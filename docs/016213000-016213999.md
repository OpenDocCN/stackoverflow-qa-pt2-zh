# StackOverflow 问答 16213000-16213999

# javascript - 验证文本区域中超长单词的用户输入

> ID：16213000
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:44.927
> 
> 标签：javascript, jquery, jquery-validate, validation

我在验证用户在 textarea 中的输入时遇到问题。假设用户在表单的文本区域字段之一中输入他的描述。但是有些人只是放了诸如“aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'之类的随机文本，以绕过最小长度要求。

现在我想防止用户输入这么长的文本而没有任何空格，因为它会破坏我页面的 UI。用户输入的没有任何空格的长文本也可以是有效的 url。那么我该如何管理这个&只有当文本太长并且不是有效的url时才会向用户抛出错误以更正文本？

PS：我不想自己拆分字符串。我只想检测它并在客户端验证时向用户抛出错误。只是为了结束一些疑问，我将进行服务器端验证，在该验证中我将强行输入一个空间并将其保存在数据库中。但我期待在客户端解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:08:04.670

```
function validate()
{
  var expression = /[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;
  var wordLengthExpr = /\b[^\s]{50,}\b/;
  var regex = new RegExp(expression);
  var wordLengthRegex = new RegExp(wordLengthExpr);
  var t = $("#myTextarea").val();
  if (t.match(regex) ||  !t.match(wordLengthRegex))
  {
    //valid
  }
  else
  {
    //throw error
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:17:52.677

```
var STRING_MAX_LENGTH = 10;

var description = 'aaa aaaaaaaaaa bbbbbbbbbb http://www.google.com/search?q=client-side-filtering';
var array = description.split( ' ' );

$.each( array, function() {
  if ( this.length >= STRING_MAX_LENGTH ) {
    if( /^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i . test( this ) ) {
      alert( this + ' is an URL' );
    } else {
      alert( this + ' is not an URL' );
    }
  }
}); 
```

[http://jsfiddle.net/vVYAp/](http://jsfiddle.net/vVYAp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T12:12:09.620

这是一个两步过程：

1.  确定是否有任何单词太长。
2.  如果是，请确定它们是否是有效的 URL。

```
var validateWordLength = function (str) {
    var maxLength = 50,  // or whatever max length you want
        reURL = /^(ftp|http|https):\/\/[^\s]+$/, // use whatever regular expression for URL matching you feel best
        words = str.split(/\s+/),
        i;

    for (i = 0; i < words.length; i += 1) {
        if (words[i].length > maxLength) {
            // test for url
            // but bear in mind the answer at http://stackoverflow.com/questions/1410311/regular-expression-for-url-validation-in-javascript
            // testing for url may not be fruitful
            if (!reURL.test(words[i])) {
                return false;
            }
        }
    }

    return true;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:04:21.607

尝试这个

```
 var value = Your text;

    var result = value.replace(" ","");

if(value.length == result .length)
  //not valid
else
 //valid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:06:30.807

您可以获得每个单词的长度，然后可以决定是否允许用户 -

```
var arr = text.split(' ');

$.each(arr,function(){
   console.log(this.length);
   // check valid word length
}); 
```

[http://jsfiddle.net/mohammadAdil/cNZtn/](http://jsfiddle.net/mohammadAdil/cNZtn/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T11:12:25.890

如果你使用[jQuery validate 插件](http://docs.jquery.com/Plugins/Validation)，你可以给它添加一个方法：

```
jQuery.validator.addMethod("samechars", function(value, element) { 
    return this.optional(element) ||  !/([a-z\d])\1\1/i.test(value); 
}, "Invalid input"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T12:10:44.710

如果要使用 jQuery，可以使用以下命令：

```
$("form").submit(function(e){
var $textarea = $('#msg'),
    maxWordLength = 20;

            var value = $textarea.val().split(' '),
                longWord = false;

            for(var n = 0; n < value.length; n++) {
                if(value[n].length >= maxWordLength)
                    longWord = true;
            }

if(longWord) {
    alert('Too long word');
    return false;
}
}); 
```

这是一个小提琴：http: [//jsfiddle.net/pJgyu/31286/](http://jsfiddle.net/pJgyu/31286/)

# javascript - src image changer after click with JavaScript

> ID：16213002
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:49.000
> 
> 标签：javascript, html, image

I have this image in my html page:

```
<img src="/images/deactivate.png" onclick="act_deact(this);"/> 
```

and in my javascript code i have this:

```
function act_deact(image) {
    image.src = (image.src=="/images/activate.png" ) ? "/images/deactivate.png" : "/images/activate.png";
} 
```

and when i click on the image that initially deactivated it activate but in the second click it doesn't desactivate !

is there any probleme with my code ?

from JS amateur :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:06:43.790

`/images/activate.png`这是因为当您在第一次单击时将其设置为（或更改为）时，该`src`属性不再只是`/images/activate.png`，而是以服务器地址为前缀。

你可以在这里查看：http: [//jsfiddle.net/hGcqq/](http://jsfiddle.net/hGcqq/)

或者在您自己的服务器上，如果您愿意，可以使用 a`console.log`或 an 。`alert`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:22:55.807

首先是括号，应该是这样的：

```
image.src = (image.src=="/images/activate.png" ? "/images/deactivate.png" : "/images/activate.png") 
```

还可以尝试使用 image.getAttribute("src") 和 image.setAttribute("src") 而不是 image.src。

请尝试以下代码：

```
function act_deact(image) {
    image.setAttribute("src", (image.getAttribute("src")=="/images/activate.png" ? "/images/deactivate.png" : "/images/activate.png"))
} 
```

编辑：其他答案告诉您绝对和相对网址的问题，因此 getAttribute 将解决该问题。我不建议在这里使用 RegExp 或子字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:23:39.180

要使其与相对 url 一起使用，您可以像这样简单地保存当前 url：

```
var newsrc = "/images/deactivate.png";
function act_deact(image) {
  if ( newsrc == "/images/deactivate.png" ) {
    image.src = "/images/activate.png";
    newsrc  = "/images/activate.png";
  }
  else {
    image.src = "/images/deactivate.png";
    newsrc  = "/images/deactivate.png";
  }
} 
```

然后调用它

```
<img src="/images/deactivate.png" onclick="act_deact(this);"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:13:47.847

[@hjpotter92](https://stackoverflow.com/users/1190388/hjpotter92)已经[解释](https://stackoverflow.com/a/16213111/303270)了它不起作用的原因。

使其工作的一种方法是检查**src**是否以`/images/activate.png`：

```
var activateURL = '/images/activate.png';
if (img.src.substring(img.src.length - activateURL.length) !== activateURL) {
    image.src = '/images/activate.png';
} else {
    image.src = '/images/deactivate.png';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:18:22.617

image.src 包含规范路径，即使使用相对路径初始化。您可以在条件下使用完整路径，例如

```
function act_deact(image) {
    image.src = (image.src=="FULL-PATH-OF-IMAGE" ) ? "/images/deactivate.png" : "images/activate.png";
} 
```

（要获得完整路径，可以使用 alert(image.src);)

或者，如果您的所有图像都有唯一的名称

```
function act_deact(image) {
    image.src = image.src.match(/activate.png$/) ? "/images/deactivate.png" : "images/activate.png";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T11:50:14.050

我自己找到了解决方案：p 并且我尝试了@fardjad 命题，即在 url 中寻找字符串并创建条件

我分享解决方案:)

```
function act_deact(image) {
if(image.src.indexOf('deactivate') != -1)
   image.src="/images/activate.png";
else 
   image.src="/images/deactivate.png";
} 
```

@hjpotter92：带有检查条件的解决方案`image.alt`适用于：

html:

```
<img alt="deactivate" src="/images/deactivate.png" onClick="act_deact(this);" /> 
```

Js函数：

```
function act_deact(image) { 
    if (image.alt=="activate") {
       image.src = "/images/deactivate.png";
       image.alt = "deactivate"                                          }
    else {  
       image.src = "/images/activate.png"; 
       image.alt = "activate"
    }
} 
```

感谢您的回复:)

# c# - How to convert a LambdaExpression to typed Expression >

> ID：16213005
> 
> 赞同：24
> 
> 时间：2013-04-25T11:01:06.367
> 
> 标签：c#, .net, casting, lambda, linq-expressions

I'm dynamically building linq queries for nHibernate.

Due to dependencies, I wanted to cast/retrieve the typed expression at a later time, but I have been unsuccessfull so far.

This is not working (the cast is supposed to happen elsewhere):

```
var funcType = typeof (Func<,>).MakeGenericType(entityType, typeof (bool));
var typedExpression =  (Func<T, bool>)Expression.Lambda(funcType, itemPredicate, parameter); //Fails 
```

This is working:

```
var typedExpression = Expression.Lambda<Func<T, bool>>(itemPredicate, parameter); 
```

Is it possible to get the 'encapsulated' typed expression from a LambdaExpression?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-25T11:09:27.930

```
var typedExpression =
    (Func<T, bool>)Expression.Lambda(funcType, itemPredicate, parameter); //Fails 
```

This is not surprising, as you have to [`Compile`](http://msdn.microsoft.com/en-us/library/bb356928.aspx) a `LambdaExpression` in order to get an actual delegate that can be invoked (which is what `Func<T, bool>` is).

So this would work, but I 'm not sure if it is what you need:

```
// This is no longer an expression and cannot be used with IQueryable
var myDelegate =
    (Func<T, bool>)
    Expression.Lambda(funcType, itemPredicate, parameter).Compile(); 
```

If you are not looking to compile the expression but instead to move an expression tree around, then the solution is to instead cast to an `Expression<Func<T, bool>>`:

```
var typedExpression = (Expression<Func<T, bool>>) 
                      Expression.Lambda(funcType, itemPredicate, parameter); 
```

# emacs - emacs中pdfLaTeX的安静模式

> ID：16213008
> 
> 赞同：0
> 
> 时间：2013-04-25T11:01:21.600
> 
> 标签：emacs, customization, pdflatex, verbose

我已经开始使用 emacs 作为 pdfLaTeX 编写器/编译器，这真是太棒了。

但是，每当我执行 TeX 文件 ( `C-c C-f`) 时，它当前执行以下操作：

```
(setq latex-run-command "pdflatex") 
```

我从 pdfLaTeX 得到了很多冗长的输出*。*

有没有办法改变这种行为？我想过，`(setq latex-run-command "pdflatex -interaction=batchmode")`但这似乎并没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:33:48.717

在 emacs 中使用 LaTex 时，您应该使用名为 AUCTeX 的包。这解决了您的问题并具有许多额外的功能。

# regex - Perl - Regex to extract only the comma-separated strings

> ID：16213011
> 
> 赞同：4
> 
> 时间：2013-04-25T11:01:27.953
> 
> 标签：regex, perl, split, comma, www-mechanize

I have a question I am hoping someone could help with...

I have a variable that contains the content from a webpage (scraped using WWW::Mechanize).

The variable contains data such as these:

```
$var = "ewrfs sdfdsf cat_dog,horse,rabbit,chicken-pig"
$var = "fdsf iiukui aawwe dffg elephant,MOUSE_RAT,spider,lion-tiger hdsfds jdlkf sdf"
$var = "dsadp poids pewqwe ANTELOPE-GIRAFFE,frOG,fish,crab,kangaROO-KOALA sdfdsf hkew" 
```

The only bits I am interested in from the above examples are:

```
@array = ("cat_dog","horse","rabbit","chicken-pig")
@array = ("elephant","MOUSE_RAT","spider","lion-tiger") 
@array = ("ANTELOPE-GIRAFFE","frOG","fish","crab","kangaROO-KOALA") 
```

**The problem I am having:**

I am trying to extract only the comma-separated strings from the variables and then store these in an array for use later on.

But what is the best way to make sure that I get the strings at the start (ie cat_dog) and end (ie chicken-pig) of the comma-separated list of animals as they are not prefixed/suffixed with a comma.

**Also**, as the variables will contain webpage content, it is inevitable that there may also be instances where a commas is **immediately succeeded by a space and then another word**, as that is the correct method of using commas in paragraphs and sentences...

For example:

```
Saturn was long thought to be the only ringed planet, however, this is now known not to be the case. 
                                                     ^        ^
                                                     |        |
                                    note the spaces here and here 
```

I am not interested in any cases where the comma is followed by a space (as shown above).

**I am only interested in cases where the comma DOES NOT have a space after it (ie cat_dog,horse,rabbit,chicken-pig)**

I have a tried a number of ways of doing this but cannot work out the best way to go about constructing the regular expression.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T11:31:59.243

怎么样

```
[^,\s]+(,[^,\s]+)+ 
```

这将匹配一个或多个不是空格或逗号的字符，`[^,\s]+`后跟一个逗号和一个或多个不是空格或逗号的字符，一次或多次。

*进一步评论*

要匹配多个序列，请添加`g`全局匹配修饰符。
以下`$&`在 a 上拆分每个匹配`,`并将结果推送到`@matches`。

```
my $str = "sdfds cat_dog,horse,rabbit,chicken-pig then some more pig,duck,goose";
my @matches;

while ($str =~ /[^,\s]+(,[^,\s]+)+/g) {
    push(@matches, split(/,/, $&));
}   

print join("\n",@matches),"\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:46:12.393

虽然你可能可以构造一个单一的正则表达式，一个正则表达式的组合，`split`s，`grep`看起来`map`不错

```
my @array = map { split /,/ } grep { !/^,/ && !/,$/ && /,/ } split 
```

从右到左：

1.  `split`在空格 ( )上分割线
2.  只保留两端没有逗号但内部有一个逗号的元素 ( `grep`)
3.  将每个这样的元素拆分为部分 (`map`和`split`)

这样，您可以轻松更改部分，例如消除两个连续的逗号添加`&& !/,,/`内部`grep`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:46:36.867

我希望这很清楚并适合您的需求：

```
 #!/usr/bin/perl
    use warnings;
    use strict;

    my @strs = ("ewrfs sdfdsf cat_dog,horse,rabbit,chicken-pig",
    "fdsf iiukui aawwe dffg elephant,MOUSE_RAT,spider,lion-tiger hdsfds jdlkf sdf", 
     "dsadp poids pewqwe ANTELOPE-GIRAFFE,frOG,fish,crab,kangaROO-KOALA sdfdsf hkew", 
     "Saturn was long thought to be the only ringed planet, however, this is now known not to be the case.",
     "Another sentence, although having commas, should not confuse the regex with this: a,b,c,d");

    my $regex = qr/
                \s #From your examples, it seems as if every
                   #comma separated list is preceded by a space.
                (
                    (?:
                        [^,\s]+ #Now, not a comma or a space for the
                                 #terms of the list

                        ,        #followed by a comma
                    )+
                    [^,\s]+     #followed by one last term of the list
                )
                /x;

    my @matches = map {
                    $_ =~ /$regex/;
                    if ($1) {
                        my $comma_sep_list = $1;
                        [split ',', $comma_sep_list];
                    }
                    else {
                        []
                    }
                } @strs; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:34:03.943

```
$var =~ tr/ //s;    
while ($var =~ /(?<!, )\b[^, ]+(?=,\S)|(?<=,)[^, ]+(?=,)|(?<=\S,)[^, ]+\b(?! ,)/g) {
      push (@arr, $&);
    } 
```

正则表达式匹配三种情况：

```
(?<!, )\b[^, ]+(?=,\S) : matches cat_dog
(?<=,)[^, ]+(?=,)      : matches horse & rabbit
(?<=\S,)[^, ]+\b(?! ,) : matches chicken-pig 
```

# php - 关闭一个只有我的区域

> ID：16213014
> 
> 赞同：1
> 
> 时间：2013-04-25T11:01:47.197
> 
> 标签：php, .htaccess, web

因此，我需要将我的网站转换为新版本，但它位于名为“/public_html/opdaterning”的文件夹中，但我不希望其他人甚至我自己也无法访问该文件夹。我试着这样做，但它没有任何帮助.. :(

```
ErrorDocument 403 /specific_page.html
Order Allow,Deny
Allow from 111.222.333.444 
```

[全部拒绝，通过 htaccess 只允许一个 IP](https://stackoverflow.com/questions/4400154/htaccess-deny-all-allow-only-one-ip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:04:31.443

```
order deny,allow
deny from all
allow from 111.222.333.444 
```

对于多个额外的允许行或用空格分隔

```
order deny,allow
deny from all
allow from 111.222.333.444
allow from 111.111.111.111 111.111.111.112 
```

对于批评者，我知道一个 ip 不能包含 333 或 444 ;)

# c# - c#中的压缩字符串

> ID：16213015
> 
> 赞同：1
> 
> 时间：2013-04-25T11:01:51.227
> 
> 标签：c#, compression

我正在使用以下代码压缩 2 个字符串，它在压缩中效果很好。但是，当我尝试解压缩第二个字符串并且如果第一个字符串很短（大约 4 个字符）时，我得到块长度与其补码异常不匹配。这是我用于压缩的类：

```
 using System;
    using System.IO;
    using System.IO.Compression;
    using System.Text;

    namespace CompressString {
    internal static class StringCompressor
{
    /// <summary>
    /// Compresses the string.
    /// </summary>
    /// <param name="text">The text.</param>
    /// <returns></returns>
    public static string CompressString(string value)
    {
        //Transform string into byte[] 
        byte[] byteArray = new byte[value.Length];
        int indexBA = 0;
        foreach (char item in value.ToCharArray())
        {
            byteArray[indexBA++] = (byte)item;
        }

        //Prepare for compress
        System.IO.MemoryStream ms = new System.IO.MemoryStream();
        System.IO.Compression.GZipStream sw = new System.IO.Compression.GZipStream(ms,
        System.IO.Compression.CompressionMode.Compress);

        //Compress
        sw.Write(byteArray, 0, byteArray.Length);
        //Close, DO NOT FLUSH cause bytes will go missing...
        sw.Close();

        //Transform byte[] zip data to string
        byteArray = ms.ToArray();
        System.Text.StringBuilder sB = new System.Text.StringBuilder(byteArray.Length);
        foreach (byte item in byteArray)
        {
            sB.Append((char)item);
        }
        ms.Close();
        sw.Dispose();
        ms.Dispose();

        return sB.ToString();
    }

    /// <summary>
    /// Decompresses the string.
    /// </summary>
    /// <param name="compressedText">The compressed text.</param>
    /// <returns></returns>
    public static string DecompressString(string sData)
    {
        byte[] byteArray = new byte[sData.Length];

        int indexBa = 0;
        foreach (char item in sData)
            byteArray[indexBa++] = (byte)item;

        MemoryStream memoryStream = new MemoryStream(byteArray);
        GZipStream gZipStream = new GZipStream(memoryStream, CompressionMode.Decompress);

        byteArray = new byte[1024];

        StringBuilder stringBuilder = new StringBuilder();

        int readBytes;
        while ((readBytes = gZipStream.Read(byteArray, 0, byteArray.Length)) != 0)
        {
            for (int i = 0; i < readBytes; i++) stringBuilder.Append((char)byteArray[i]);
        } gZipStream.Close(); memoryStream.Close(); gZipStream.Dispose(); memoryStream.Dispose(); return stringBuilder.ToString();
    }
} 
```

}

我在以下行中的 DecompressString 方法出现异常：

```
while ((readBytes = gZipStream.Read(byteArray, 0, byteArray.Length)) != 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-23T20:53:13.887

对于收到错误消息“块长度与其补码不匹配”的其他人，如果您尝试解压缩未压缩的文件，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:39:22.553

您的 Compress 和 Decompress 方法应该接受并返回字节数组。如果您需要生成字符串输出，您可以将字节数组转换为 base64 字符串。

例如：

```
// compress some string data
string stringData = GetSomeStringData();

// assumes the string data is UTF8 string - would work for ASCII encoding as well
byte[] uncompressedData = Encoding.UTF8.GetBytes(stringData);

byte[] compressedData = StringCompressor.Compress(uncompressedData);

// produce base64 encode string of compressed data
string compressedString = Convert.ToBase64String(compressedData);

// decompress base64 encoded string 
// first convert to byte array
byte[] dataToDecompress = Convert.FromBase64String(compressedString);

byte[] decompressedData = StringCompressor.Decompress(dataToDecompress);

// encode decompressed data as a UTF8 encoded string
string decompressedString = Encoding.UTF8.GetString(decompressedData); 
```

相应地重命名和调整 Compress() 和 Decompress() 方法。如果您真的想要一个严格使用字符串的类，请在您的方法中嵌入 Base 64 编码/解码的逻辑。但是，如果您的类直接使用 'byte[]`，您的代码在其他实例中将更加灵活和可重用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-30T06:48:27.260

我得到相同的“块长度与其补码不匹配”。System.IO.InvalidDataException。

我找到了这些信息：http: [//yvanrodrigues.com/content/block-length-does-not-match-its-complement](http://yvanrodrigues.com/content/block-length-does-not-match-its-complement)

它声明：“先向前搜索 2 个字节。在压缩文件的开头有一个 2 字节签名 0x789c。”

如果您跳过这 2 个字节，它应该可以工作。

更多信息： [zlib 标头是什么样的？](https://stackoverflow.com/questions/9050260/what-does-a-zlib-header-look-like/17176881#17176881) 和 [.Net zlib 使用 .Net 4.5 膨胀](https://stackoverflow.com/questions/17212964/net-zlib-inflate-with-net-4-5)

# android - 在 Android 中使用另一个线程进行“网络”

> ID：16213020
> 
> 赞同：2
> 
> 时间：2013-04-25T11:02:04.740
> 
> 标签：android, multithreading, background-process

我正在开发一个 Android 应用程序，当它启动时：

**1)**我向我的服务器发出 HTTP 请求以发送一个小的 JSON 文件。

**2)**打开 webView 以显示 URL。

当服务器正常运行时，绝对没有问题，一切顺利。

**但是**，如果由于某种原因服务器关闭，HTTP 请求实际上会挂起，我需要等到大约 30 秒的 HTTP 超时，直到我真正看到带有 URL 加载的 webView。

我读到我不应该在 UI 线程内建立任何*网络*，我应该为此使用另一个线程。

在 BlackBerry 中，我已经为其开发了应用程序，就这么简单：

```
new Thread(){
  public void run(){
    HttpConnection hc = 
            (HttpConnection)Connector.open("http://www.stackoverflow.com");
  }
}.start(); 
```

我只是开始一个新线程，在里面我提出请求和所有必要的*网络*。这样，即使我的服务器无法访问，webView 也会立即加载，而不会让用户等待并感觉到应用程序实际上正在挂起。

我怎么能在 Android 中做同样的事情，最简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T11:11:37.980

为什么不使用与 BlackBerry 相同的方法呢？

```
new Thread() {
  public void run() {
    new URL("http://www.stackoverflow.com").getContent();
  }
}.start(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T11:06:20.193

使用 AsyncTask，这是最简单的方法。更多详情：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:24:22.973

在冰淇淋三明治及以上版本中，您不得在 UI 线程中使用任何 web cal。但是，您可以使用线程，但 android 提出的最佳方法是使用异步任务。一个非常简单的例子如下。

> 《AsyncTask<参数类型、进度值类型、返回类型>》

```
 class MyAsyncTask extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
     // Runs on UI thread- Any code you wants 
     // to execute before web service call. Put it here.
     // Eg show progress dialog
    }
    @Override
    protected String doInBackground(String... params) {
      // Runs in background thread
        String result = //your web service request;         

         return result;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(String resp) {

      // runs in UI thread - You may do what you want with response 
      // Eg Cancel progress dialog - Use result         
    }

} 
```

# facebook - Facebook API 方法：如何使用 FB.api 向多个朋友发送私人消息

> ID：16213024
> 
> 赞同：1
> 
> 时间：2013-04-25T11:02:15.477
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我想悄悄地给我的朋友发一条私信。所以，我更喜欢 FB.api 方法来发送。

但是，我找不到解决问题的最佳方法。

Send Dialog api 以 FB.ui 方法发送，一次不能发送超过 1 个。它需要一个表单提交。

Feed Dialog api 是一个公开帖子。我想，我是对的。

我的确切情况是，我的应用程序中有大量消息。我会选择并发送给我的朋友。它不会显示在他们的墙上。我的意思是它不应该是公众的。应该是私信。

请发送您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T05:38:27.670

Facebook 没有为此提供任何 api，但提供了聊天 api，因此您可以通过它发送消息。有关更多详细信息，请参阅[https://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)

# sip - Asterisk 11 没有转码

> ID：16213025
> 
> 赞同：0
> 
> 时间：2013-04-25T11:02:15.663
> 
> 标签：sip, asterisk, codec

我在 sip.conf 中定义了一个 IP 地址/域，并以我强制调用 g729 的方式定义它

现在我通过保存退出 sip.conf 后重新加载了星号

并通过在 .. 上进行调试来呼叫号码

有任何想法吗？

我的 sip.conf

```
[IP]
host = IP
type = peer
port = 8060
disallow = all
allow = g729
canreinvite = no 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:55:25.060

很可能它使用其他部分。

执行以下操作：

```
asterisk -r
core set verbose 5
sip set debug on 
```

并检查输出。

# r - More efficient strategy for which() or match()

> ID：16213029
> 
> 赞同：6
> 
> 时间：2013-04-25T11:02:21.463
> 
> 标签：r, match, vectorization

I have a vector of positive and negative numbers

```
vec<-c(seq(-100,-1), rep(0,20), seq(1,100)) 
```

the vector is larger than the example, and takes on a random set of values. I have to repetitively find the number of negative numbers in the vector... I am finding this is quite inefficient.

Since I only need to find the number of negative numbers, and the vector is sorted, I only need to know the index of the first 0 or positive number (there may be no 0s in the actual random vectors).

Currently I am using this code to find the length

```
length(which(vec<0)) 
```

but this forces R to go through the entire vector, but since it is sorted, there is no need.

I could use

```
match(0, vec) 
```

but my vector does not always have 0s

So my question is, is there some kind of `match()` function that applies a condition instead of finding a specific value? Or is there a more efficient way to run my `which()` code?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T20:42:06.397

到目前为止提供的解决方案都意味着创建一个`logical(length(vec))`并对此进行全面或部分扫描。如您所见，向量已排序。我们可以通过二分搜索来利用这一点。我开始认为我会非常聪明并在 C 中实现它以获得更快的速度，但是在调试算法的索引时遇到了麻烦（这是棘手的部分！）。所以我用R写了它：

```
f3 <- function(x) {
    imin <- 1L
    imax <- length(x)
    while (imax >= imin) {
        imid <- as.integer(imin + (imax - imin) / 2)
        if (x[imid] >= 0)
            imax <- imid - 1L
        else
            imin <- imid + 1L
    }
    imax
} 
```

为了与其他建议进行比较

```
f0 <- function(v) length(which(v < 0))
f1 <- function(v) sum(v < 0)
f2 <- function(v) which.min(v < 0) - 1L 
```

为了好玩

```
library(compiler)
f3.c <- cmpfun(f3) 
```

导致

```
> vec <- c(seq(-100,-1,length.out=1e6), rep(0,20), seq(1,100,length.out=1e6))
> identical(f0(vec), f1(vec))
[1] TRUE
> identical(f0(vec), f2(vec))
[1] TRUE
> identical(f0(vec), f3(vec))
[1] TRUE
> identical(f0(vec), f3.c(vec))
[1] TRUE
> microbenchmark(f0(vec), f1(vec), f2(vec), f3(vec), f3.c(vec))
Unit: microseconds
      expr       min        lq     median         uq       max neval
   f0(vec) 15274.275 15347.870 15406.1430 15605.8470 19890.903   100
   f1(vec) 15513.807 15575.229 15651.2970 17064.8830 18326.293   100
   f2(vec) 21473.814 21558.989 21679.3210 22733.1710 27435.889   100
   f3(vec)    51.715    56.050    75.4495    78.5295   100.730   100
 f3.c(vec)    11.612    17.147    28.5570    31.3160    49.781   100 
```

可能有一些棘手的边缘情况我错了！搬到C，我做到了

```
library(inline)
f4 <- cfunction(c(x = "numeric"), "
    int imin = 0, imax = Rf_length(x) - 1, imid;
    while (imax >= imin) {
        imid = imin + (imax - imin) / 2;
        if (REAL(x)[imid] >= 0)
            imax = imid - 1;
        else
            imin = imid + 1;
    }
    return ScalarInteger(imax + 1);
") 
```

和

```
> identical(f3(vec), f4(vec))
[1] TRUE
> microbenchmark(f3(vec), f3.c(vec), f4(vec))
Unit: nanoseconds
      expr   min      lq  median      uq   max neval
   f3(vec) 52096 53192.0 54918.5 55539.0 69491   100
 f3.c(vec) 10924 12233.5 12869.0 13410.0 20038   100
   f4(vec)   553   796.0   893.5  1004.5  2908   100 
```

`findInterval`[当在R-help](https://stat.ethz.ch/pipermail/r-help/2013-April/352460.html)列表上提出类似问题时，出现了。它缓慢但安全，检查`vec`实际排序并处理 NA 值。如果一个人想要生活在边缘（可以说不比实施 f3 或 f4 更糟），那么

```
f5.i <- function(v)
    .Internal(findInterval(v, 0 - .Machine$double.neg.eps, FALSE, FALSE)) 
```

几乎与 C 实现一样快，但可能更健壮和矢量化（即，在第二个参数中查找值的向量，以便于进行类似范围的计算）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:06:20.130

使用`sum()`和逻辑比较：

```
sum( vec < 0 )
[1] 100 
```

这将非常快，当您对逻辑求和时，`TRUE`为 1 和`FALSE`0，因此总数将是负值的数量。

哦，我觉得需要进行基准比较... :-) 矢量长度为 2e5

```
library(microbenchmark)
vec<-c(seq(-100,-1,length.out=1e5), rep(0,20), seq(1,100,length.out=1e5))
microbenchmark( (which.min(vec < 0) - 1L) , (sum( vec < 0 )) )

Unit: milliseconds
                      expr      min       lq   median       uq       max neval
 (which.min(vec < 0) - 1L) 1.883847 2.130746 2.554725 3.141787 75.943911   100
            (sum(vec < 0)) 1.398100 1.500639 1.508688 1.745088  2.662164   100 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T11:15:28.680

你可以使用`which.min`

```
 which.min(vec < 0) - 1L 
```

这将返回第一个`FALSE`值，即第一个 0。

# wordpress - Remove posts permalink (href)

> ID：16213033
> 
> 赞同：0
> 
> 时间：2013-04-25T11:02:37.430
> 
> 标签：wordpress, href, permalinks

I am trying to figure out a way to remove permalink's from posts with the category 'nolink'. I have tried a few java script attempts - but have not managed to get it to work.

```
<?php 
query_posts( 'tag=Client-list' );
while ( have_posts() ) : the_post();
    echo '<ul class="client-thumb-wrap">';
        echo '<a href="';
            the_permalink();
        echo '">';
            echo '<li class="'; 
                $category = get_the_category( $custompost );
                echo $category[0]->cat_name ;
                    echo ' ';
                echo $category[1]->cat_name ;
                    echo ' ';
                echo $category[2]->cat_name ;
                    echo ' ';
                echo $category[3]->cat_name ;
            echo '">';

            echo '<img src="';
            the_field('client_logo');
            echo '">';
        echo '</li>';
    echo '</ul>';
endwhile;
wp_reset_query();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:23:22.410

[`has_term`](http://codex.wordpress.org/Function_Reference/has_term)允许您检查帖子是否已分配（或未分配）特定术语，请尝试：

```
$href = ( has_term( 'nolink', 'category' ) ) ? '#' : get_permalink();
echo '<a href="' . $href . '">'; 
```

# javascript - li 上的点击事件并不完美

> ID：16213034
> 
> 赞同：0
> 
> 时间：2013-04-25T11:02:39.790
> 
> 标签：javascript, xml, function, xslt

这是我的 xml 文件：-

```
<?xml-stylesheet href="b.xsl" type="text/xsl"?>
<root>
  <child_1 entity_id = "1" value="Game" parent_id="0">
    <child_2 entity_id="2" value="Activities" parent_id="1">
      <child_3 entity_id="3" value="Physical1" parent_id="2">
        <child_6 entity_id="6" value="Cricket" parent_id="3">
          <child_7 entity_id="7" value="One Day" parent_id="6"/>
        </child_6>
      </child_3>
      <child_4 entity_id="4" value="Test1" parent_id="1">
        <child_8 entity_id="8" value="Test At Abc" parent_id="4"/>
      </child_4>
      <child_5 entity_id="5" value="Test2" parent_id="1">
        <child_9 entity_id="9" value="Test At Xyz" parent_id="5"/>
      </child_5>
    </child_2>
</child_1>
</root> 
```

这是我的 xslt 代码：-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="*" mode="item">
    <xsl:choose>
      <xsl:when test="self::node()/child::*">
        <li>
          <xsl:value-of select="@value"/>
          <xsl:apply-templates select="current()[*]"/>
        </li>
      </xsl:when>
      <xsl:otherwise>
        <li onclick="final()">
          <xsl:value-of select="@value"/>
          <xsl:apply-templates select="current()[*]"/>
        </li>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="*/*/*">
    <ul>
      <xsl:apply-templates select="*[1] | node()[current()/ancestor::*[3]]" mode="item"/>
    </ul>
  </xsl:template>
</xsl:stylesheet> 
```

在这里，我尝试从 xml 文件中获取活动
，如果最后一个 li 然后将一个函数设置为属性类型，例如：-

```
<li onclick ="final()">One Day</li> 
```

它只设置最后一个没有孩子的 li...
现在我正在创建一个用于获取 xslt 和 html 输出的 javascript 文件。:-

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <title>Untitled Page</title>
    <script>
    function final(){
        $('li:not(:has(*))').click(function(){
        alert('click');
        $('#result').text($(this).text());
        });
        }
    </script>
    <script>
        var xml = loadXMLDoc("final.xml");
        var xsl = loadXMLDoc("b.xsl");

        function loadXMLDocOther(location) {
            xhttp = new XMLHttpRequest();
            xhttp.open("GET", location, false);
            xhttp.send("");
            return xhttp.responseXML;
        }

        function loadXMLDoc(dname) {
            if (window.ActiveXObject) {
                return loadXMLDocActiveX(dname);
            }
            else if (window.XMLHttpRequest) {
                return loadXMLDocOther(dname);
            }
        }        
        function transformOther(xml, xsl, target, selected) {
            var xsltProcessor = new XSLTProcessor();
            xsltProcessor.importStylesheet(xsl);

            if (selected) {
                xsltProcessor.setParameter(null, "selected", selected);
            }

            var resultDocument = xsltProcessor.transformToFragment(xml, document);
            target.innerHTML = "";
            target.appendChild(resultDocument);
        }

        function displayResult() {
            var targetElement = document.getElementById("load");

            // code for IE
            if (window.ActiveXObject) {
                transformActiveX(xml, xsl, targetElement);
            }
            // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation && 
                     document.implementation.createDocument) {
                transformOther(xml, xsl, targetElement);
            }
        }

    </script>
</head>
<body onload="displayResult()">
    <div id="load">
    </div>
    <div id="result">result</div>
</body> 
```

这是我的 javascript 代码，用于单击最后一个 li 它的值附加在`<div id="result">`

```
<script>
        function final(){
            $('li:not(:has(*))').click(function(){
            alert('click');
            $('#result').text($(this).text());
            });
            }
        </script> 
```

现在的问题是我点击最后一个它的工作，但它的工作类似于 for 循环。当我尝试一个警报时，我遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:46:29.853

It is quite hard to know what you are trying to. Therefor here first an explanation what you are doing. You generate a html fragment like this (via xlst):

```
<ul>
    <li>Physical1<ul>
        <li>Cricket<ul>
            <li onclick="final()">One Day</li>
        </ul>
        </li>
    </ul>
    </li>
</ul> 
```

There is one onlclick handlder (`onclick="final()`) at the li element without children.

```
function final(){
        $('li:not(:has(*))').click(function(){
        alert('click');
        $('#result').text($(this).text());
        });
        } 
```

Firs click on "One Day" item calls final(). The final function than sets new onclick handler to all li elements with not children. **Which is the same and only element which has already an final as onclick hanlder** Because of event propagation the next click calls the new hanlder and afterward final. Which installs again a new onclick handler. Now wee have already three handler on the element. And each click add one more. To stop this can you try to use `event.stopPropagation();` or to remove the event handler `attr('onclick', '').off('click');`

```
function final() {
    var lis = $('li:not(:has(*))');
    lis.attr('onclick', '').off('click');
        $('li:not(:has(*))').click(function(event) {
              $('#result').text($(this).text());
        });
    } 
```

But I more suspect that the selector is wrong `$('li:not(:has(*))')`.
Some more comments:
- It would not make lot sense to set event handler to your parent `<li>` elements either. Because the li elements include each other (**what is correct!**) clicking on an child will also trigger the handler of the parent elements.
- Therefore (perhaps) you should add elements around the content (text) of the li elements. (`<li><span>Physical1</span><ul><li>...`)
- Than you can add the onclick handler the span elements.
- If only the "final" elements should trigger an event, you do not need to set any new click functions.

```
function final(){
        alert('click');
        $('#result').text($(this).text());
        } 
```

# forms - PayPal 项目名称/描述使用表格在不同的行上

> ID：16213040
> 
> 赞同：2
> 
> 时间：2013-04-25T11:02:45.043
> 
> 标签：forms, paypal, paypal-sandbox, payment-processing

我正在使用基本标准免费帐户和标准表单“_xclick”选项处理 PayPal 快速结帐的简单表单。

在传递项目名称或描述时，我知道您限制为 144 个字符，但我希望将标题内的信息或描述放在不同的行中，以便在 PayPals 结帐区域时将信息分开，以便用户可以清楚地看到他们的内容正在支付。

我尝试使用**"\r"**和**"\n"**来分隔行，如下所示，在**"item_name"**输入中使用**"This is line 1\r\nThis is line 2\r\nThis is line 3"**，但它只是忽略了“\r”和“\n”，当传递到 PayPal 支付页面并在收据电子邮件中发送时。

**当前示例代码：**

```
<form name="TheForm" method="post" action="https://www.sandbox.paypal.com/cgi-bin/webscr">    
  <input type="hidden" name="cmd" value="_xclick">
  <input type="hidden" name="currency_code" value="GBP">
  <input type="hidden" name="item_name" value="This is line 1\r\nThis is line 2\r\nThis is line 3">
  <input type="hidden" name="price" id="price" value="" />
  <input type="hidden" name="business" value="test@test.com">
  <input type="hidden" name="amount" value="">
  <input type="hidden" name="no_shipping" value="1">
  <input type="submit" name="Submit" id="Submit" value="Process Payment" />
</form> 
```

我也尝试过使用`&#10;`,和这些都不起作用，并且作为文本传递`&#13;`。`<br>``<br />`

如何使用表单选项 INPUT 值将项目信息分隔在单独的行上，如上所示，请为项目描述或标题，因为我尝试过的方式不起作用并且我找不到任何解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:31:12.123

目前没有办法做到这一点。标准的立即购买按钮不支持此功能。最接近将东西放在不同线路上的方法是使用购物车上传方法。而不是传递 1 个项目，项目名称中的 3 个值要显示在 3 个不同的行上，您将传递 3 个单独的项目，这将导致它们位于 3 个不同的行上。

# css - 正确使用边框图像

> ID：16213043
> 
> 赞同：1
> 
> 时间：2013-04-25T11:02:55.013
> 
> 标签：css

我正在尝试在我创建的 div 中实现border-image 属性，我希望叶子图像（[http://imageshack.us/photo/my-images/703/leafy.png/](http://imageshack.us/photo/my-images/703/leafy.png/)）绕过div 的边缘。

我曾尝试这样做，但无法让叶子看起来正常，而且它们似乎在角落重叠，我发现border-image 属性真的令人困惑和沮丧，希望有人能指出我正确的方向！

我正在使用的代码在这里：jsfiddle.net/MQrd6/

我想要实现的（大致）在这里：http: [//imageshack.us/a/img203/1029/concept.png](http://imageshack.us/a/img203/1029/concepto.png)

我也知道 IE（像往常一样）不支持border-image 属性，有解决方法吗？使用 javascript 什么的？

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:49:16.720

你可以尝试这样的事情：http: [//jsfiddle.net/MQrd6/3/](http://jsfiddle.net/MQrd6/3/)

诀窍是将宽度设置`border-image`为`border-width`：

```
#leaf {
    width: 760px;
    vertical-align: middle;
    border-width: 22px;
    border-image: url(http://img703.imageshack.us/img703/4976/leafy.png) 22 22 round;
} 
```

没有任何版本的 IE 支持边框图像。要在 IE 中提供支持，您可以尝试[CSS3pie](http://css3pie.com/)，这是一个简单的库，可让您在 IE6 或更高版本中使用多个 CSS3 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:11:40.567

有图片边框的css指令：

**CSS**

```
-moz-border-image:url("border-image.png") 25 30 10 20 repeat;
-webkit-border-image:url("border-image.png") 25 30 10 20 repeat;
border-image:url("border-image.png") 25 30 10 20 repeat; 
```

更多信息：

[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

和

[http://css-tricks.com/almanac/properties/b/border-image/](http://css-tricks.com/almanac/properties/b/border-image/)

# git - 在 git 中，我可以恢复以前未提交的索引状态吗？

> ID：16213048
> 
> 赞同：4
> 
> 时间：2013-04-25T11:03:13.930
> 
> 标签：git, indexing

我修改了一些文件并将它们暂存（它们已添加到索引中）。然后我误叫了`git reset --hard`。是否可以从重置之前恢复索引的状态？换句话说，我正在寻找类似`reflog`for index 的东西，它可以让我浏览索引的先前状态，甚至是未提交的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:24:25.107

我找到[了 this](https://stackoverflow.com/a/6780036/2058424)，它部分回答了我的问题，并有助于恢复丢失的文件：您可以使用`git fsck --lost-found`，它将未引用的对象保存到`<path to repo>/.git/lost-found/`，并且存在暂存但未提交的更改。

不过，我不确定这是否不符合将这个问题标记为重复的条件。

# android - Licensing: Android, LGPL and the ZBar QR Code scanner

> ID：16213050
> 
> 赞同：0
> 
> 时间：2013-04-25T11:03:17.700
> 
> 标签：android, licensing, lgpl

I have integrated zbar code scanner in my Android-app in minutes (great library!), nevertheless I am thinking of replacing it with another QR code reader now. The reason is, that there is much scepticism[1][2] on the web whether LGPL is compatible with commercial Android projects.

Can someone tell me why zbar uses LGPL but nevertheless are supporting android? (the even have a android section in their support forum...)

Is there a way to make sure my app meets the license requirements?

[1] [http://source.android.com/source/licenses.html](http://source.android.com/source/licenses.html)

[2] [http://www.gnu.org/licenses/lgpl-java.html](http://www.gnu.org/licenses/lgpl-java.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:57:48.190

Android 平台项目与 3rd 方应用程序开发人员有不同的许可要求。虽然可以在 3rd 方应用程序中替换和反向工程 LGPL 库，但对于只读固件中的 LGPL 库则不然。

Android zbar 的关键部分以二进制 .so 文件的形式分发。因此，它们可以在符合 LGPL 的分布式应用程序中替换。

对于 Java 适配器代码 (zbar.jar)，请确保您没有在其上使用 ProGuard 或其他混淆。

作为参考，droidText 项目如何解决 LGPL 合规性问题：[https ://code.google.com/p/droidtext/wiki/LGPLCompliance](https://code.google.com/p/droidtext/wiki/LGPLCompliance)

（标准的“我不是律师”免责声明适用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:03:37.767

TL / DR：始终将*zbar*源与应用程序一起分发，您很清楚。

我想说，用户想要升级图书馆并不容易。相反，为了安全起见，您应该将程序视为与库静态链接。（从实际的角度来看，你的程序是静态链接的，无论如何。）

如果这样做，则必须分发***库***的源代码（或可链接目标文件） 。它必须是您使用的可能经过调整的源，而不是一些通用的下载链接。

[顺便说一句，我也赞成[llato 的](https://stackoverflow.com/a/16214115/193892)回答，因为它有一些优点，但我不会热衷于在法官面前争论这种推理方式。（并不是说我认为 zbar 的作者特别会把我拖到那里，但你明白了。）]

# java - SPRING MVC 3.2.2 + SPRING SECURITY 3.1.3 INCOMPATIBILITY java.lang.IncompatibleClassChangeError

> ID：16213051
> 
> 赞同：0
> 
> 时间：2013-04-25T11:03:18.493
> 
> 标签：java, spring, maven, spring-mvc, spring-security

I have changed the version of spring security in my application from 3.2.0.M1 to 3.1.3 but I have an error when Tomcat launches my application. The first row of the exception stack is the following:

`2013-04-25 11:33:12,893 [localhost-startStop-1] ERROR org.springframework.web.context.ContextLoader - org.springframework.web.context.ContextLoader - Context initialization failed org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\Users\daniele\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\Ice-Cream-Webapp\WEB-INF\classes\com\myprj\app\web\controller\FrontPagesController.class]; nested exception is java.lang.IncompatibleClassChangeError: class org.springframework.core.type.classreading.ClassMetadataReadingVisitor has interface org.springframework.asm.ClassVisitor as super class`

And my pom.xml is:

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.company</groupId>
<artifactId>myprj-Webapp</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>

<name>myprj-Webapp</name>
<url>http://www.company.com</url>

<properties>
    <org.springframework.version>3.2.2.RELEASE</org.springframework.version>
    <org.springframework.test.version>3.2.2.RELEASE</org.springframework.test.version>
    <org.springframework.security.version>3.1.3.RELEASE</org.springframework.security.version>
    <org.springframework.security.oauth.version>1.0.2.RELEASE</org.springframework.security.oauth.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>

    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security.oauth</groupId>
        <artifactId>spring-security-oauth2</artifactId>
        <version>${org.springframework.security.oauth.version}</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>

    <dependency>
        <groupId>net.sourceforge.findbugs</groupId>
        <artifactId>annotations</artifactId>
        <version>1.3.2</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet-api</artifactId>
        <version>7.0.34</version>
        <scope>provided</scope>
    </dependency>

    <!-- Test dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.test.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<repositories>
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>

<build>
    <finalName>myprj-Webapp</finalName>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

It is one day that I am working on that, I have still no idea which are the dependecies those create this conflict.
Any idea?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:52:59.503

使用 mvn dependency:tree 查找您获得的依赖项。

看起来你`spring-asm jar`在他们的 3.2 后导致了这个问题，所有这些都被合并到`spring-core`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T11:51:18.653

从你的 spring-security 依赖项中排除 spring asm

```
<exclusions>
    <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
    </exclusion>
</exclusions> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T20:56:33.407

遇到类似的问题，通过添加解决了问题

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>${org.springframework.version}</version>
</dependency> 
```

# php - Inner join 2 tables with same column names

> ID：16213054
> 
> 赞同：17
> 
> 时间：2013-04-25T11:03:30.063
> 
> 标签：php, mysql, inner-join

I'm working on displaying the achievements from my minecraft server on my website. But I can't get it to work.

```
function achievements() {
    global $id;
    $sql="SELECT * FROM achievements
           INNER JOIN stats ON achievements.type=stats.type
           INNER JOIN stats ON achievements.block=stats.block
           INNER JOIN stats ON achievements.data=stats.data
           INNER JOIN stats ON achievements.value=stats.value
           WHERE player_id = $id";
    $result=mysql_query($sql) or die(mysql_error());
    $rows=mysql_fetch_array($result);
} 
```

Will I be able to use `$rows['achievements.type'];` and `$rows['stats.type'];` to get the column "type" from the selected table, or is there a another way to do it?

The column and table names are defined by the plugin I use, so the names can't be changed.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-25T11:09:39.037

the reason why it is not working is because (*in my own opinion*) the server is a little confused on where how it will handle the columns names properly. In order it to work, add an alias on every table that has the same name that you want to join as well as the columns, eg

```
SELECT  achievements.*,
        a.Name as TypeName,
        b.Name AS BlockName,
        c.Name as DataName,
        d.Name AS ValueName
FROM    achievements
        INNER JOIN stats a ON achievements.type = a.type
        INNER JOIN stats b ON achievements.block = b.block
        INNER JOIN stats c ON achievements.data = c.data
        INNER JOIN stats d ON achievements.value = d.value
WHERE   player_id = $id 
```

assuming you want to *get the names for every specific columns*.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T11:08:25.310

Give the columns you want to have while you `SELECT` them an alias as example:

```
SELECT `achievements`.`type` AS `Achieve-Type`
FROM `achievements` 
```

Now you can get the values like this: `$rows['Achieve-Type'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:07:51.263

使用...为表名起别名更容易

```
SELECT * FROM achievements AS ac INNER JOIN stats as st 
```

如果您愿意，您甚至可以为结果设置别名，以便在您从中选择它们时更容易区分`$rows`

# javascript - 如何通过文件上传显示文件名

> ID：16213056
> 
> 赞同：3
> 
> 时间：2013-04-25T11:03:33.833
> 
> 标签：javascript, jquery, html, css

我想在上传文件时显示文件名。为此，我使用了隐藏字段。我的代码是

```
<label>File</lable>
<input type="image" src="http://upload.wikimedia.org/wikipedia/commons/c/ca/Button-Lightblue.svg" width="30px"/>
<input type="file" id="my_file" style="display: none;" /> 
```

javascript是

```
$("input[type='image']").click(function() {
    $("input[id='my_file']").click();
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:06:55.387

如果您只需要文件名：

```
$('#my_file').change(function(){
    var filename = $(this).val().split('\\').pop();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T11:15:17.650

你可以这样做：

```
$("input[type='image']").click(function () {
    $("input[id='my_file']").click();
});

$("input[id='my_file']").change(function (e) {
    var $this = $(this);
    $this.next().html($this.val().split('\\').pop());
}); 
```

[**小提琴**](http://jsfiddle.net/Bkzfk/3/)

# java - 如何将 jtest 的代码覆盖率报告导出到外部以与团队共享报告

> ID：16213058
> 
> 赞同：0
> 
> 时间：2013-04-25T11:03:41.340
> 
> 标签：java, code-coverage, jtest

有什么方法可以将类文件的代码覆盖率百分比从 jtest 工具导出为某种报告格式，以便可以与团队的其他成员共享此报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:22:37.140

根据[在线文档](http://www.technology.heartland.edu/courses/Computer%20Science/Programming/Java%20Courses/JTest%20User%27s%20Guide/view_rep.htm)，您可以将它们导出为 HTML/XML 和 ASCII，甚至可以应用 XSL 来制作自己的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T22:46:18.930

当测试完成执行时，找到报告生成按钮以创建结果和覆盖率的 html 报告。根据您拥有的 JTest 许可证和版本，您可以通过 JTest 首选项自定义更多报告样式。

# c# - 使用 xamarin android 解析 json

> ID：16213059
> 
> 赞同：4
> 
> 时间：2013-04-25T11:03:43.297
> 
> 标签：c#, json, xamarin.android, xamarin

我在我的 android xamarin 应用程序中编写了一个解析 json 字符串的代码。

```
 var request = HttpWebRequest.Create(myUrl);
            request.ContentType = "application/json";
            request.Method = "GET";
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {            
                if (response.StatusCode != HttpStatusCode.OK)
                {
                    Console.Out.WriteLine("Error fetching data. Server returned status code: {0}", response.StatusCode);
                }
                using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                {
                    string content = reader.ReadToEnd();
                    if (string.IsNullOrWhiteSpace(content))
                    {
                        Console.Out.WriteLine("Response contained empty body...");
                    }
                    else
                    {                        
                        List<BillsTableFields> billList = Newtonsoft.Json.JsonConvert.DeserializeObject<List<BillsTableFields>>(content);                        
//return block
                    }
                }
            } 
```

但它会引发构建错误。任何帮助将不胜感激，因为我是 xamarin 的新手，在其他任何地方都找不到任何支持。我得到的构建错误如下

C:\Program Files\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(5,5)：错误 MSB4018：“LinkAssemblies”任务意外失败。

Mono.Cecil.ResolutionException：无法解析 System.Diagnostics.TraceLevel

在 Mono.Linker.Steps.MarkStep.MarkType（TypeReference 参考）

在 Mono.Linker.Steps.MarkStep.MarkField（FieldReference 参考）

在 Mono.Linker.Steps.MarkStep.InitializeFields（TypeDefinition 类型）

在 Mono.Linker.Steps.MarkStep.InitializeType（TypeDefinition 类型）

在 Mono.Linker.Steps.MarkStep.InitializeAssembly（AssemblyDefinition 程序集）

在 Mono.Linker.Steps.MarkStep.Initialize()

在 Mono.Linker.Steps.MarkStep.Process（LinkContext 上下文）

在 Mono.Linker.Pipeline.Process（LinkContext 上下文）

在 MonoDroid.Tuner.Linker.Process（LinkerOptions 选项，LinkContext& 上下文）

在 Xamarin.Android.Tasks.LinkAssemblies.Execute()

在 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()

在 Microsoft.Build.BackEnd.TaskBuilder.d__20.MoveNext() (MSB4018) (LoginApptest)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:01:07.780

如果链接器因“未能找到类型等等”而失败，那么这通常意味着您在应用程序的某个位置使用了桌面 .Net 库。如果是 JSON.Net，去掉桌面程序集，使用组件存储上的 JSON.Net 版本（这是 Xamarin 的 NuGet 版本，除了有些东西是付费的）。

我还会确保您拥有最新版本的 Xamarin.Android。

# jquery - 如何使用jquery从特定字体中获取符号作为数组

> ID：16213061
> 
> 赞同：1
> 
> 时间：2013-04-25T11:03:48.377
> 
> 标签：jquery, unicode, fonts, symbols

我需要在 Microsoft word 的插入符号中显示所选字体的符号。如果我可以在数组中获取字体的符号，那么我可以在表格中将它们显示为锚点，以便在用户单击时将它们插入我的网页的目标文本区域。我是网络开发的新手。

或者，如果我可以得到 r 计算这些符号的 unicode，那么我可以使用它们。我已经严格搜索了各种符号的 unicode，但是由于符号很多而且我无法获得所有人的代码，所以它变得乏味。

任何帮助是极大的赞赏。

# java - 通用异常处理

> ID：16213063
> 
> 赞同：0
> 
> 时间：2013-04-25T11:04:13.097
> 
> 标签：java, exception-handling

我发现下面的异常处理代码处理了应用程序抛出的所有异常，包括运行时。

```
 public static void handleException(String strMethodName,
                    Exception ex) throws CustomException{
            String strMessage = "";
            try {
                throw ex;
            } 
            catch (NullPointerException npe){
                logger.log(pr, strMethodName, npe.getMessage());
                strMessage=ERR_02;
                throw new CustomException(strMessage);
            } 
            catch(IndexOutOfBoundsException iobe) {
                logger.logMethodException(strMethodName,iobe.getMessage());
                strMessage=ERR_03;
                throw new CustomException(strMessage);
            }
            ... So On
     } 
```

以下是我认为的一些缺点：

1.  要确定异常的根本原因，我们需要始终检查消息字符串。
2.  不区分异常类型

优势：

1.  更少的代码。（代码可以最小化）

你能否让我知道我是否应该采用这种机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:12:39.860

不确定您使用代码的情况。

在您的方法中，您不会重新抛出可用于调试的异常对象

```
public static void handleException(String strMethodName,
                    Throwable th){
            String strMessage = "";
            try {
                throw th;
            } 
            catch (Throwable thr){
                logger.log(pr, strMethodName, npe.getMessage());
                //get the appropriate error code from a method
                strMessage=getErrorCode();
                throw new CustomException(strMessage, th); 
               //CustomException is of type RuntimeException
            }
     } 
```

通过捕获和“投掷” Throwable 对象，您可以确保即使是错误也能得到正确处理。[重要的是不要压制 Throwable 对象]

# c# - 如何从 c# 声明和调用 svrapi.dll 的 NetShareEnum

> ID：16213067
> 
> 赞同：0
> 
> 时间：2013-04-25T11:04:17.140
> 
> 标签：c#

我需要从 c# 调用 svrapi.dll（不是 netapi32.dll）的 NetShareEnum。方法签名应该是什么。如果有人可以帮助我举例说明如何调用（要传递的参数）它并处理结果，那将会很有帮助。

谢谢

西塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T13:41:54.370

我相信 NetShareEnum 位于 Netapi32.dll 中？

# php - 如何通过 Web 服务调用传递到另一台服务器？

> ID：16213075
> 
> 赞同：0
> 
> 时间：2013-04-25T11:04:46.063
> 
> 标签：php, web-services, zend-framework

有两个 Web 应用程序（exampleA.com 和 exampleB.com）。我想做的是将对 exampleA.com 的每个调用传递给 exampleB.com - 所以实际上 exampleA.com 只能作为代理服务器工作。这两个应用程序都基于 Zend Framework 1.11.11 构建并使用 Zend_Soap_*。

我可以进行 302 重定向（无论如何我都会这样做），但我相信，不能保证 WS 客户端会遵循该重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:12:35.347

为什么不将 exampleA.com 的 IP 更改为与 exampleB.com 相同并将别名 exampleA.com 添加到 exampleB.com 的 vhost

# c# - 在 asp.net C# Ajax 计时器或 Jquery Timer 中，在线测试应用程序的最佳和安全计时器是什么？

> ID：16213076
> 
> 赞同：1
> 
> 时间：2013-04-25T11:04:47.913
> 
> 标签：c#, jquery, asp.net, ajax, timer

我在 asp.net 4.0 中创建一个包含在线测试模块的新应用程序，该应用程序应该一次处理 10-20k 学生。现在我的困惑是我应该在这里使用什么，应该是：

1.  安全，我不希望孩子们在浏览器中关闭 javascript 并获得无限的测试时间。
2.  这不应该开销网络流量。
3.  具有暂停/开始功能和尝试限制。
4.  时间完成后应该在服务器端触发所需的功能（例如，通过 c# 函数重定向到另一个页面）

任何帮助和示例代码表示赞赏。

问候

阿洛克夏尔马

仅供参考：我对 jquery 没有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:19:36.830

如果计时器的安全性至关重要，则不应完全依赖 javascript 代码。我建议保留为服务器和客户端双方的特定用户启动测试的时间。然后实现定期与 Web 服务器同步的 javascript 计时器。当用户完成测试并将结果发送到服务器时，您应该检查服务器端是否超时。

另外，我将添加一个逻辑，以禁止在未启用 javascript 的情况下打开页面并开始测试的可能性。

# asp.net - 同一台机器上不允许多次登录，但允许同一浏览器

> ID：16213078
> 
> 赞同：0
> 
> 时间：2013-04-25T11:04:49.190
> 
> 标签：asp.net, authentication, declarative-authorization

我有一个简单的要求，不允许用户一次登录多个浏览器。同一个浏览器就好了。

可以做的最简单的事情是什么？

技术：.net 4.0 和 sql sever 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:59:57.547

请参阅以下我的建议：

1.  为每个用户存储`LastActivityDate`。如果您使用的是 asp.net `SqlMembershipProvider`- 该字段存在于那里，如果您使用其他身份验证机制 - 可能您需要创建它并根据特定用户的每个请求进行更新。
2.  为每个用户添加一个额外的布尔字段`LoggedIn`。当用户登录时，该字段将设置为 true。如果您使用的是 asp.net `SqlMembershipProvider`，则可以将其值存储在`Comment`字段中。
3.  当用户关闭浏览器时，向服务器发送请求到“注销”用户，这意味着将`LoggedIn`字段设置为`false`. 为此使用`window.onbeforeunload`javascript 事件。
4.  在用户登录时，您应该检查`LoggedIn`用户的字段，如果它是错误的 - 您只需处理操作。如果不是 - 你应该检查`LastActivityDate`值，如果它比超时更早，你将定义（比如说 3 分钟）处理操作。如果不是 - 拒绝它并显示错误消息。此附加检查是必需的，因为我们无法保证`window.onbeforeunload`始终执行该检查。
5.  最后一步将是一个 javascript，它会在超时时调用服务器操作来更新`LastActivityDate`. 此脚本应在登录用户可访问的每个页面上定义。

我希望方法是明确的。

# ios - renderInContext:UIGraphicsGetCurrentContext(), iOS 之后的插值问题

> ID：16213079
> 
> 赞同：1
> 
> 时间：2013-04-25T11:04:49.817
> 
> 标签：ios, uiview, interpolation, cglayer

我有一些 UIVies 边缘到边缘对接。视图完全覆盖了 superView。显示效果很好，但是在渲染时相邻的边缘是可见的，也就是说它们之间会出现一条线。由于视图在显示中看起来很完美，我想它一定是导致这种情况的视图像素的插值。

有人知道怎么修这个东西吗？

下图是渲染图。在设备或模拟器上，这些线将不可见。 ![在此处输入图像描述](https://i.stack.imgur.com/FQnc6.jpg)

渲染代码

```
-(void)renderImage {
    CGSize renderSize = CGSizeMake(masterView.frame.size.width, masterView.frame.size.height);
    UIGraphicsBeginImageContext(renderSize);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextConcatCTM(context, [[masterView layer] affineTransform]);
    [[masterView layer] renderInContext:UIGraphicsGetCurrentContext()];
    renderedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    CGContextRestoreGState(context);
    UIImageWriteToSavedPhotosAlbum(renderedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
    masterView.transform = CGAffineTransformIdentity;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T13:25:22.107

核心图形试图消除您的视图的别名。你需要告诉它不要那样做。

考虑以下示例，它将自身（一个 UIView）呈现为一个没有抗锯齿的 UIImage：

```
UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, [[UIScreen mainScreen] scale]);
CGContextSetAllowsAntialiasing(UIGraphicsGetCurrentContext(), FALSE);
[self.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T11:34:24.663

尝试：

```
UIGraphicsBeginImageContextWithOptions(renderSize, false, [[UIScreen mainScreen] scale]); 
```

代替：

```
UIGraphicsBeginImageContext(renderSize); 
```

# grammar - ANTLR 3，LT!* 是什么意思？

> ID：16213085
> 
> 赞同：3
> 
> 时间：2013-04-25T11:05:01.100
> 
> 标签：grammar, antlr3

我正在查看用 ANTLR 3 编写的 Javascript 语法的代码，

[http://www.antlr3.org/grammar/1206736738015/JavaScript.g](http://www.antlr3.org/grammar/1206736738015/JavaScript.g)

在许多情况下，我发现

```
program
    : LT!* sourceElements LT!* EOF!
    ; 
```

是什么`LT!*`意思？

编辑：

来自 [http://ftp.camk.edu.pl/camk/chris/antlrman/antlrman.pdf](http://ftp.camk.edu.pl/camk/chris/antlrman/antlrman.pdf)

我发现那`LT`代表`LOOKAHEAD TOKEN`但它是第一个`N`前瞻标记，`N`上面的部分在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:41:41.673

不，`LT`并不意味着`LOOKAHEAD TOKEN`在这种情况下。它是一个几乎在语法末尾定义的标记：

```
LT
 : '\n'      // Line feed.
 | '\r'      // Carriage return.
 | '\u2028'  // Line separator.
 | '\u2029'  // Paragraph separator.
 ; 
```

这`*`意味着解析器尝试匹配零个或多个这些标记，并且`!`指示生成的 AST 不应包含这些`LT`标记。

# java - Hibernate 标准 API：只有一个结果

> ID：16213087
> 
> 赞同：0
> 
> 时间：2013-04-25T11:05:15.193
> 
> 标签：java, hibernate, jakarta-ee, hibernate-criteria

我对 Hibernate 标准 API 有一些问题。我想将表的行作为对象，但限制返回结果的数量。这是代码：

```
Criteria c = session.createCriteria(User.class);
c.setFirstResult(start);
c.setMaxResults(end-start);
c.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
List<User> test = c.list(); 
```

在我的情况下，第一个结果是 0，最大结果是 10。数据库中有 3 个用户。问题是只有数据库的第一行在结果列表中。如果我不使用resultTransformer，第一行是列表中的10倍（maxResults）。如果我不使用 max results 和 resultTransformer，第一行在结果列表中大约是 100 次。

如果我为特定用户添加限制，结果列表包含特定用户，因此很明显，由于某些奇怪的情况，不仅可以找到第一行。

请帮忙，我一无所知。

# javascript - Http使用node express从不同的API端点获取多个json文件

> ID：16213088
> 
> 赞同：0
> 
> 时间：2013-04-25T11:05:17.270
> 
> 标签：javascript, json, node.js, express, pug

我正在研究使用 node.js 从不同 API 端点获取多个 JSON 文件的最有效方法。

基本上我想将每个 JSON 对象存储在一个变量中，并将它们全部发送到 Jade 模板文件进行解析。通过执行以下操作，我已将其设置为获取**一个**JSON 文件 (jsonFile1)：

```
httpOptions = {
    host: 'api.test123.com',
    path : '/content/food/?api_key=1231241412',
    headers: {
        "Accept": "application/json",
        'Content-Type': 'application/json'
    },
    method: "GET",
    port: 80
}

var jsonFile1;

http.get(httpOptions, function(res) {
    var body = '';

    res.on('data', function(chunk) {
        body += chunk;
    });

    res.on('end', function() {
        jsonFile1= JSON.parse(body)
        console.log("Got response: " + jsonFile1);
    });
}).on('error', function(e) {
    console.log("Got error: " + e.message);
});

app.set('views', __dirname);

app.get('/', function(req, res) {
    res.render('home', {
        data: jsonFile1
    });
}); 
```

但我真的不想重复所有这些来获取**多个**json 端点并将它们发送到 home 玉模板。

有什么想法可以有效地做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:01:48.827

根据您的代码，这是一个使用出色[异步](https://github.com/caolan/async)库的快速示例。

```
var async = require('async'),
    // Array of apis
    httpOptions = [
        {
            host: 'api.test123.com',
            path : '/content/food/?api_key=1231241412',
            headers: {
                "Accept": "application/json",
                'Content-Type': 'application/json'
            },
            method: "GET",
            port: 80
        },
            host: 'api.test234.com',
            path : '/content/food/?api_key=1231241412',
            headers: {
                "Accept": "application/json",
                'Content-Type': 'application/json'
            },
            method: "GET",
            port: 80
        }
    ];

// Put the logic for fetching data in its own function
function getFile(options, done) {
    http.get(options, function(res) {
        var body = '';

        res.on('data', function(chunk) {
            body += chunk;
        });

        res.on('end', function() {
            done(null, JSON.parse(body));
            console.log("Got response: " + jsonFile1);
        });
    }).on('error', function(e) {
        done(e);
        console.log("Got error: " + e.message);
    });
}

app.get('/', function(req, res) {
    // Map the options through the getFile function, resulting in an array of each response
    async.map(httpOptions, getFile, function (err, jsonFiles) {
        // You should probably check for any errors here
        res.render('home', {
            data: jsonFiles
        });
    });
}); 
```

# c++ - 使用单一设置和部署安装 Windows 服务和控制台应用程序

> ID：16213090
> 
> 赞同：1
> 
> 时间：2013-04-25T11:05:23.913
> 
> 标签：c++, visual-studio-2008, visual-c++, windows-services, watchdog

我创建了一个控制台应用程序，它在*C++*中用作后台应用程序。如果应用程序崩溃，我正在尝试通过 Windows 服务运行此应用程序以自动启动。

我不能做的是创建一个可以触发`xxx.exe`.

如何将此 Windows 服务和后台应用程序作为单个安装文件进行安装？

# ios - 文本视图字符串中子字符串的颜色

> ID：16213091
> 
> 赞同：1
> 
> 时间：2013-04-25T11:05:24.707
> 
> 标签：ios, objective-c, xcode, nsstring, uitextview

我有像这样的文本视图：

```
 UITextview staticTxt = [[UITextView alloc]initWithFrame:CGRectMake(10, 80, 300, 400)];
        staticTxt.backgroundColor = [UIColor clearColor];
        staticTxt.text = @"this is a textview";
        staticTxt.textColor = [UIColor whiteColor];
[self.view addSubview:staticTxt]; 
```

现在我想要的是文本“textview”应该是一些不同的颜色。我怎样才能做到这一点？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:08:40.347

You need to create an attributed text string, as described in this answer:

[Underline text in a UITextView](https://stackoverflow.com/questions/13112965/underline-text-in-a-uitextview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:23:21.003

首先，您必须将字符串分解为子字符串。正如您在评论中所说，**“这是一个”是白色的，“textview”是红色的**“......我将在该参考中向您建议一种方式。

```
staticTxt.text = @"this is a textview";

NSString *yourString = staticTxt.text;

NSString *str = [[yourString componentsSeparatedByString:@"a "] lastObject]; 
```

现在您可以设置“str”子字符串的颜色。

让我很清楚地告诉你一件事。它只是改变静态字符串的子字符串颜色的方法。如果你要动态改变你的textview的文本......那么这种方法不是一个好的选择......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T12:17:44.420

您可以使用此类方法在控件（UILabel、UITextField 或 UItextView）中使用不同的颜色、不同的字体和不同大小的文本

```
+ (void)setMultiColorAndFontText:(NSString *)text rangeString:(NSArray *)rangeString inputView:(UITextView*) inputView font:(NSArray*) fontName color:(NSArray*) colorName
{
    inputView.layer.sublayers = nil;

    NSMutableAttributedString *mutableAttributedString = [[ NSMutableAttributedString alloc]initWithString:text];

    for (int i =0 ; i<[rangeString count]; i++)
    {
        CTFontRef  ctFont = CTFontCreateWithName((__bridge CFStringRef) [UIFont fontWithName:[fontName objectAtIndex:i] size:14.0].fontName, [UIFont fontWithName:[fontName objectAtIndex:i] size:14.0].pointSize, NULL);

        NSRange whiteRange = [text rangeOfString:[rangeString objectAtIndex:i]];

        if (whiteRange.location != NSNotFound)
        {
            [mutableAttributedString addAttribute:(NSString *)kCTForegroundColorAttributeName value:(id)[colorName objectAtIndex:i] range:whiteRange];
            [mutableAttributedString addAttribute:(NSString*)kCTFontAttributeName
                                            value:( __bridge id)ctFont
                                            range:whiteRange];
        }
    }

    CGSize expectedinputViewSize = [text sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14.0f] constrainedToSize:CGSizeMake(186,100) lineBreakMode:UILineBreakModeWordWrap];

    CATextLayer   *textLayer = [[CATextLayer alloc]init];
    textLayer.frame =CGRectMake(0,4, inputView.frame.size.width,expectedinputViewSize.height+4);
    textLayer.contentsScale = [[UIScreen mainScreen] scale];
    textLayer.string=mutableAttributedString;
    textLayer.opacity = 1.0;
    textLayer.alignmentMode = kCAAlignmentLeft;
    [inputView.layer addSublayer:textLayer];
    [textLayer setWrapped:TRUE];

    [inputView setText:@""];
} 
```

在这里你可以传递你的 text ，它的 range ， font 和 color 作为参数。例子 ：

```
[CommonFunctions setMultiColorAndFontText:@"This is a textview" rangeString:[NSArray arrayWithObjects:@"This is a",@"textview", nil] textfield:txtEmailAddress font:[NSArray arrayWithObjects:@"Arial",@"Helvetica",nil] color:[NSArray  arrayWithObjects:(UIColor *)[UIColor whiteColor].CGColor,(UIColor *)[UIColor redColor].CGColor,nil]]; 
```

它将显示不同颜色和不同字体的文本。

注意：在这个方法中，我们使用了 UITextView。如果你需要 UILabel 或 UITextField 那么你只需要以同样的方式改变它：

**UIL标签**

```
+ (void)setMultiColorAndFontText:(NSString *)text rangeString:(NSArray *)rangeString inputView:(UILabel*) label font:(NSArray*) fontName color:(NSArray*) colorName; 
```

**UITextField**

```
+ (void)setMultiColorAndFontText:(NSString *)text rangeString:(NSArray *)rangeString inputView:(UITextField*) label font:(NSArray*) fontName color:(NSArray*) colorName; 
```

**UITextView**

```
+ (void)setMultiColorAndFontText:(NSString *)text rangeString:(NSArray *)rangeString inputView:(UITextView*) label font:(NSArray*) fontName color:(NSArray*) colorName; 
```

希望它可以帮助你。

# visual-studio-2012 - 在 VS2012 中调试混合模式 C++/CLI MFC 应用程序时如何显示本机类型

> ID：16213095
> 
> 赞同：2
> 
> 时间：2013-04-25T11:05:45.227
> 
> 标签：visual-studio-2012, mfc, c++-cli, visual-studio-debugging, mixed-mode

[这个问题](https://stackoverflow.com/questions/16176080/mfc-c-cli-project-clr-switch-in-vs2012-causes-debugging-issues)可能重复。

我有一个 MFC 项目，它使用 /clr 开关和一些 C++/CLI 代码来使用 .Net 组件。最初这是在 VS2005 上。

在升级到 VS2012 Update 2 时，在调试期间，本机数据类型没有显示任何值或类型。我了解到，在 VS2010 中引入了一种新的原生数据类型可视化机制（natvis），并在 VS2012 中进行了扩展/增强。按照[该页面上](http://msdn.microsoft.com/en-us/library/vstudio/jj620914.aspx)的信息，我取消选中**托管 C++ 兼容模式**和**C/C++ 编辑并继续**。在此之后，断点被禁用并停止被击中。使用“Only Managed”调试器，断点被命中，但没有显示任何值。

最后，我使用“混合”调试器并用于`__debugbreak()`强制中断。这导致仅当它们是本地汽车时才显示整数值；并且数据类型被正确提取。但是，`std::string`或者`CString`不显示值，而是在值列中显示它们的类型。同样，不显示指针、类成员或函数参数值，并且在值列中显示类型信息、未定义值或超出范围。

该行为在汽车、本地和监视窗口以及鼠标悬停在符号上是一致的。

如何在 VS2012 混合模式 C++/CLI MFC 应用程序中调试期间获取本机数据类型以显示其值。

我已阅读[此问题](https://stackoverflow.com/questions/3325588/mixed-mode-assembly-not-loading-symbol-for-native-c-pdbs)并验证所有符号已加载到模块窗口中。

显然，微软已经[意识到了这个问题](http://connect.microsoft.com/VisualStudio/feedback/details/783004/children-cannot-be-evaluated-on-c-cli-after-vs2012-update-2)，即将到来的更新 3 的 CTP 应该会修复它。

另外，为什么我需要使用`__debugbreak()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T18:47:44.367

几天前，微软发布了一个 Visual Studio Service Pack 3 RC，它可能会有所帮助（现在我自己安装）。这是链接：[http ://www.microsoft.com/en-us/download/details.aspx?id=38832](http://www.microsoft.com/en-us/download/details.aspx?id=38832)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:28:10.183

重新安装 Visual Studio 2012 并且不要应用 Service Pack 2。

# php - CodeIgniter Initial Page Load Variable?

> ID：16213097
> 
> 赞同：-1
> 
> 时间：2013-04-25T11:05:52.587
> 
> 标签：php, ajax, codeigniter

I'm looking for a solution to loading the header/footer/navigation only on the initial page view.

The reasoning behind this is that my navigation panel uses Ajax to render the content of the destination link in the main content div instead of actually loading the page itself.

However, I need to be able to say something along the lines of if its the initial view, load the header, navigation, then the actual page, then the footer. But if its not the initial view and the page is loaded in the content div area so for example a navigation link or a form submit, it doesn't load the header, navigation and footer but only the actual page.

So for example I have these 4 views:

header_view navigation_view page_a_view footer_view

And this controller:

controller_a

The navigation has a link which is 'Page A' and points to [http://myurl.com/controller_a](http://myurl.com/controller_a). If that link is clicked I only wanted controller_a to load the page_a_view view, because the navigation link will load the data of that page into the div.

However if I directly go to [http://myurl.com/controller_a](http://myurl.com/controller_a), it needs to render the the header/navigation/footer also.

The solution I thought I was on the right lines with was something like a base controller with a function load_page() which would be something like:

```
function load_page($page, $data) {

    if($this->uri->segment($this->uri->total_segments()) == "initial_page_load") {
        $this->load->view('header_view');
        $this->load->view('navigation_view');
        $this->load->view($page, $data);
        $this->load->view('footer_view');
    } else {
        $this->load->view($page, $data);
    }

} 
```

So if I was to go to [http://myurl.com/controller_a/initial_page_load](http://myurl.com/controller_a/initial_page_load) it would load the header/navigation/footer but if I went to [http://myurl.com/controller_a](http://myurl.com/controller_a) it wouldn't.

However this doesn't cover all possibilities.

Another way I thought of is checking if there is a referring URL, if there is, don't load the header/navigation/footer. But again, this doesn't cover things such as what if the link was referred by an external website?

Does anyone have any suggestions to how I can achieve what I need?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:28:18.137

让它成为所有视图的视图页面。对于您的其他页面，您将通过 ajax 动态更改 div 上的内容“page_content”。

```
**application/views/your_template_view.php**
<?php
    $this->load->view('header_view');
    $this->load->view('navigation_view');
?>
<a href="javascript:void(0)" id='home' class='my_links'>Home</a>
<a href="javascript:void(0)" id='about_us' class='my_links'>About us</a>

<!--
    Make sure the id of the page is same as 
    the file name of view page for respective pages
 -->

<div id='page_content'><?php echo $page_content; ?></div>

<?php
    $this->load->view('footer_view');
?>
<script lang='javascript'>
    $('.my_links').click(function(){
        $.post(
            '<?php echo site_url('test_controller/get_page_content') ?>',
            {'page_content':$(this).attr('id')},
                function(response){
                    if(response != '')
                        $('#page_content').text(response);
                },'json'
        );
    });
</script> 
```

让它成为你的控制器：

```
**application/controller/test_controller.php**
function your_page($param1 = '', $param2 ='') {
    /*this one is for your initial page*/
    if($param1)
        // send mail
    if($param2)
        // send mail 
    $data['page_content'] = $this->load->view('initial_page_load');
    $this->load->view('your_template_view', $data); 
}
function get_page_content()
{
    /*this one is for other pages, this provides page content 
      for the request made from ajax*/
    $page_title = $this->input->post('page_title');
    $page_content = $this->load->view($page_title);
    echo json_encode($page_content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:54:51.190

制作一个会话变量来表示是否加载了页眉/页脚，如果是，则跳过它们

```
if (!$this->session->userdata('nav_loaded')) {
    $this->load->view('header_view');
} 
```

ETC...

这将适用于您的所有页面，无论它们是从哪里调用的，只要所有初始化后调用都由 AJAX 完成。

编辑

如果你想在那之后混合 ajax 和非 ajax 调用，当然会话变量将不起作用。也许您可以在您的 url 中放置一个 ajax 参数并据此调整控制器。

```
public function index($ajax = false) {
...
    if (!ajax) {
        $this->load->view('header_view');
    }
    etc...
} 
```

因此，所有的 AJAX 调用都会将 url 中的附加参数设置为 true（几乎除了零之外的任何参数：`index/1`、`index/ajax`等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:16:08.387

尽管我仍在对此进行测试，但到目前为止它似乎完全符合我的预期！它是那些简单但完成工作的那些之一，所以希望没有问题弹出......

在 MY_Controller.php

```
function load_page($page, $data) {
    if(!$this->input->is_ajax_request()) {
        $this->load->view('header_view');
        $this->load->view('navigation_view');
    }
    $this->load->view($page, $data);
    if(!$this->input->is_ajax_request()) {
        $this->load->view('footer_view');
    }
} 
```

在查看 Input 类文档时设法偶然发现了该功能

# php - 如果用户刷新页面，Facebook 服务器登录不会检索信息

> ID：16213100
> 
> 赞同：0
> 
> 时间：2013-04-25T11:05:57.307
> 
> 标签：php, facebook, facebook-login

该代码是根据fb手册，我注意到如果用户刷新页面，我无法检索用户的ID..用户需要从地址栏中清除我的网址后的整个字符串，在为了能够获取用户信息..

```
<?php 

   $app_id = "myid";
   $app_secret = "mysecretkey";
   $my_url = "http://myurl.php";

   session_start();

   $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'] . "&scope=publish_actions";

     header("Location: " . $dialog_url);
   }
   if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $_SESSION['access_token'] = $params['access_token'];

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url));
   echo var_dump($user);
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   } 
```

var_dump 在第一次重定向后返回给我所有必要的信息，但是如果我刷新页面它返回 null .. 也许我需要“销毁”任何会话 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:20:15.967

发生这种情况是`$code`因为您正在使用的不再有效并且已被消耗。
我还可以建议您使用[Facebook 的 PHP SDK](https://github.com/facebook/facebook-php-sdk)。这将减少开发您的应用程序并为您处理这些错误的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T07:25:53.350

我稍微修改了代码，以绕过问题..

```
 $graph_url = "https://graph.facebook.com/me?access_token=" 
   . $params['access_token'];

   if ($params['access_token'] == NULL) {
         header("Location: " . $my_url);
   }

 $user = json_decode(file_get_contents($graph_url));
 } 
```

因此，如果 access_token 无效，则“强制”页面在没有任何字符串查询的情况下重新加载并检索新的.. :) 这里也有一个有用的参考[https://developers.facebook.com /blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/) 非常感谢@Anvesh Saxena 的贡献

# java - Java comparator by using priority for classes that extend a common parent class

> ID：16213103
> 
> 赞同：0
> 
> 时间：2013-04-25T11:06:11.710
> 
> 标签：java, guava, comparator

I need to implement several comparators in Java.

I have a lot of known classes, `A1`, `A2`, `A3`, ..., `An`, which all extends class `A`. What I want to to is a comparator class based on Guava [`Ordering`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html#immutableSortedCopy%28java.lang.Iterable%29), like the following:

```
Ordering<A> sorterType1 = new Ordering<A>() {
        // Here, provide a Set or something similar that keeps in memory
        // the class types and the associated priority. 

        @Override
        public int compare(A left, A right) {
           // return -1 if class of left has an higher priority wrt class of right; 
           // return  0 if class of left has the same priority wrt class of right; 
           // return  1, otherwise.
        } 
```

Since I need to develop a lot of different comparators, I don't want to put the priority inside the class type, since there are several priorities differentiated for each comparator. What I'm missing are the parts with comments.

**What is the most effective and efficient implementation of the parts with comments?**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T11:28:37.123

不要自己编写比较实现，使用`Ordering`超能力（[`Ordering#explicit(List)`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Ordering.html#explicit%28java.util.List%29)准确地说）：

```
List<Class<? extends A>> myOrder = ImmutableList.of(
    A1.class, A4.class, A3.class, A2.class);
Ordering<A> explicitByClassOrdering = Ordering.explicit(myOrder)
    .onResultOf(new Function<A, Class<? extends A>>() {
      @Override public Class<? extends A> apply(A a) {
        return a.getClass();
      }
    });

System.out.println(explicitByClassOrdering.sortedCopy(
    ImmutableList.of(new A3(), new A2(), new A3(), new A1(), new A4())));
// [Test$A1, Test$A4, Test$A3, Test$A3, Test$A2] 
```

# sql-server - FOR XML EXPLICIT - 生成 £

> ID：16213104
> 
> 赞同：0
> 
> 时间：2013-04-25T11:06:14.947
> 
> 标签：sql-server, xml, escaping, for-xml

使用 FOR XML EXPLICIT 时遇到问题。

基本上我们（我们的公司）使用我们向其发送 XML 的文档打印公司。我正在开发一份新文件，需要的句子之一是：

“在任何索赔中，每个月支付 98 英镑，最长可达 12 个月。”

印刷公司无法处理英镑符号，因此要求其格式为 £ 我虽然很容易实现。所以我在 SQL 中构建了字符串，但是当生成输出时，FOR XML EXPLICIT 生成 &#163; 公司也不想要。

请你帮我输出文字字符串 £

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T18:29:26.253

You should use the modificators (element, xml). See this

```
 select 1 as tag, null as parent,
 '£'            as [a!1!b!xml],
 '&#163;'       as [a!1!c!xml],
 '&#163;'       as [a!1!d!element]
 for xml explicit 
```

# html - 使用 PSD 切片的移动电子邮件

> ID：16213113
> 
> 赞同：0
> 
> 时间：2013-04-25T11:06:51.323
> 
> 标签：html, email, mobile, newsletter

我正在寻找一种将我们的时事通讯自动调整为移动设备的方法。我们通常使用 Photoshop 中的切片（大约 100 多个图像切片）将电子邮件放在表格布局中。问题是，图像宽度等大小的变化太多了，我无法对其进行编码。有没有更简单的方法？我读过[这篇](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)文章，我有点明白这篇文章的要点，只是我找不到深入讨论表格的文章。任何建议都会有所帮助，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:07:51.950

我无法想象你为什么需要这么多切片。使用 Photoshop 切片绝对不是电子邮件中的最佳做法。事实上，图像应该限制在必要的地方，因为在大多数情况下，读者会从他们的电子邮件客户端默认关闭的图像开始。许多人在关闭图像的情况下阅读电子邮件，如果他们看不到它，那就达不到目的了。

我建议你看看你是如何创建你的基本电子邮件时事通讯的，并让事情变得非常简单。使用这么多不同的电子邮件客户端很难始终如一地呈现响应式电子邮件。尝试使用多于一列或两列类型的布局只是自找麻烦。

Acid 上的电子邮件有一个可靠的[响应模板](http://www.emailonacid.com/blog/details/C13/emailology_a_free_responsive_email_template_using_media_queries_-_part_i)来帮助您入门

[Campaign Monitor](http://www.campaignmonitor.com/templates/all/)上也有很多模板

# java - Spring中的事件触发

> ID：16213114
> 
> 赞同：0
> 
> 时间：2013-04-25T11:06:53.430
> 
> 标签：java, spring, event-handling, scheduled-tasks, task

我需要使用 Spring 触发事件触发的任务。该任务应在特定 JMS 消息到来时触发，如下例所示：

```
@Override
protected void processMessage(MessageClass myMessage) {
    Event event = (Event) (myMessage.toString());
    if (event.getType() == Type.KEEPALIVE) {
        // trigger the task
    }
} 
```

我的计划是使用 Spring 中的 TaskScheduler，但那里似乎不支持事件。

# android - 使用 AsyncTask 解析 Xml 比在主线程中解析慢

> ID：16213118
> 
> 赞同：0
> 
> 时间：2013-04-25T11:07:12.627
> 
> 标签：android, eclipse, xml-parsing, android-asynctask

我的代码中有一个奇怪的行为：在模拟器上使用 asyncTask 解析本地 xml 文件比在主线程上解析它需要更长的时间。

这是我的 AsyncTask 代码：

```
public class MostraTutti extends SherlockActivity {
ListView lv;
final List<ListViewItem> items = new ArrayList<MostraTutti.ListViewItem>();
final ArrayList<String> nome = new ArrayList<String>();
final ArrayList<String> immagine = new ArrayList<String>();
...

final   int array_image2[] ={R.drawable.iodocloroidrossichinolina,R.drawable.acidoacetilsalicilico,
        ...};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mostra_tutti);
    lv = (ListView) findViewById(R.id.listView);
    getSupportActionBar().setDisplayShowHomeEnabled(false);

    RssFeedTask rssTask = new RssFeedTask();
       rssTask.execute();

}

private class RssFeedTask extends AsyncTask<String, Void, String> {
    private ProgressDialog Dialog;
    String response = "";

    @Override
    protected void onPreExecute() {
        Dialog = new ProgressDialog(MostraTutti.this);
        Dialog.setMessage("Leggo le sostanze...");
        Dialog.show();
    }

        @Override
        protected String doInBackground(String... urls) {
            InputStream xmlFile = getResources().openRawResource(R.raw.sostanze);
            try {

            DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
            final Document document = documentBuilder.parse(xmlFile);
            document.getDocumentElement().normalize();
            NodeList nodeList = document.getElementsByTagName("sostanza");

            for (int i = 0; i < nodeList.getLength(); i++) {
            final int   indice = i;

            nome.add(document.getElementsByTagName("nome").item(indice).getTextContent());
            iupac.add(document.getElementsByTagName("iupac").item(indice).getTextContent());
            aspetto.add(document.getElementsByTagName("aspetto").item(indice).getTextContent());
            formula.add(document.getElementsByTagName("formula").item(indice).getTextContent());
            immagine.add(document.getElementsByTagName("immagine").item(indice).getTextContent());
            appartenenza.add(document.getElementsByTagName("appartenenza").item(indice).getTextContent());
            spiegazione.add(document.getElementsByTagName("spiegazione").item(indice).getTextContent());
            tempFus.add(document.getElementsByTagName("temperaturaFusione").item(indice).getTextContent());
            tempEboll.add(document.getElementsByTagName("temperaturaEbollizione").item(indice).getTextContent());
            solubilita.add(document.getElementsByTagName("solubilita").item(indice).getTextContent());
            note.add(document.getElementsByTagName("eccezioni").item(indice).getTextContent());

            String str = document.getElementsByTagName("formula").item(indice).getTextContent();

            str = str.replaceAll("0", "\u2080");
            str = str.replaceAll("1", "\u2081");
            str = str.replaceAll("2", "\u2082");
            str = str.replaceAll("3", "\u2083");
            str = str.replaceAll("4", "\u2084");
            str = str.replaceAll("5", "\u2085");
            str = str.replaceAll("6", "\u2086");
            str = str.replaceAll("7", "\u2087");
            str = str.replaceAll("8", "\u2088");
            str = str.replaceAll("9", "\u2089");

            final String stringa = str;
            formulaConvertita.add(stringa);

                    //CustomListViewAdapter adapter = new CustomListViewAdapter(MostraTutti.this,items);
                    //lv.setAdapter(adapter);
                    items.add(new ListViewItem()
                    {{
                        ThumbnailResource = array_image2[indice];
                        Title = document.getElementsByTagName("nome").item(indice).getTextContent();
                        SubTitle = stringa;
                    }});   
            };

        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   

        return response;
}
        @Override
        protected void onPostExecute(String result) {
            Dialog.dismiss();
            CustomListViewAdapter adapter = new CustomListViewAdapter(MostraTutti.this,items);
            lv.setAdapter(adapter);

            lv.setOnItemClickListener(
                    new OnItemClickListener()
                    {
                        public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
                        {                           
                            Context context = getBaseContext();
                           Intent myIntent = new Intent(context, Dettagli.class);

                           myIntent.putExtra("nome_sostanza",nome.get(position));
                         //  myIntent.putExtra("formula",formula.get(position));
                           myIntent.putExtra("iupac",iupac.get(position));                  
                           myIntent.putExtra("aspetto",aspetto.get(position));                 
                           myIntent.putExtra("appartenenza",appartenenza.get(position));
                           myIntent.putExtra("solubilita",solubilita.get(position));
                           myIntent.putExtra("tempFus",tempFus.get(position));
                           myIntent.putExtra("tempEboll",tempEboll.get(position));
                           myIntent.putExtra("spiegazione",spiegazione.get(position));
                           myIntent.putExtra("immagine", array_image2[position]);
                           myIntent.putExtra("formulaConvertita", formulaConvertita.get(position));
                           myIntent.putExtra("note", note.get(position));
                           startActivityForResult(myIntent, 0);
                        }

                        }
                 );
        }
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

class ListViewItem {
public int ThumbnailResource;
public String Title;
public String SubTitle;
}
} 
```

这是我没有 AsyncTask 的代码：

```
public class MostraTutti extends SherlockActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mostra_tutti);
    getSupportActionBar().setDisplayShowHomeEnabled(false);

    final ListView lv = (ListView) findViewById(R.id.listView);
    final List<ListViewItem> items = new ArrayList<MostraTutti.ListViewItem>();
    final ArrayList<String> nome = new ArrayList<String>();
    final ArrayList<String> immagine = new ArrayList<String>();
    ...

    final   int array_image2[] ={R.drawable.iodocloroidrossichinolina,R.drawable.acidoacetilsalicilico,
            ...}; 
```

InputStream xmlFile = getResources().openRawResource(R.raw.sostanze);

```
 try {

        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
        final Document document = documentBuilder.parse(xmlFile);
        document.getDocumentElement().normalize();
        //tagHandler.handleChannelTag(document);
        NodeList nodeList = document.getElementsByTagName("sostanza");

        for (int i = 0; i < nodeList.getLength(); i++) {
        final int   indice = i;

        nome.add(document.getElementsByTagName("nome").item(indice).getTextContent());
        iupac.add(document.getElementsByTagName("iupac").item(indice).getTextContent());
        aspetto.add(document.getElementsByTagName("aspetto").item(indice).getTextContent());
        formula.add(document.getElementsByTagName("formula").item(indice).getTextContent());
        immagine.add(document.getElementsByTagName("immagine").item(indice).getTextContent());
        appartenenza.add(document.getElementsByTagName("appartenenza").item(indice).getTextContent());
        spiegazione.add(document.getElementsByTagName("spiegazione").item(indice).getTextContent());
        tempFus.add(document.getElementsByTagName("temperaturaFusione").item(indice).getTextContent());
        tempEboll.add(document.getElementsByTagName("temperaturaEbollizione").item(indice).getTextContent());
        solubilita.add(document.getElementsByTagName("solubilita").item(indice).getTextContent());
        note.add(document.getElementsByTagName("eccezioni").item(indice).getTextContent());

        String str = document.getElementsByTagName("formula").item(indice).getTextContent();

        str = str.replaceAll("0", "\u2080");
        str = str.replaceAll("1", "\u2081");
        str = str.replaceAll("2", "\u2082");
        str = str.replaceAll("3", "\u2083");
        str = str.replaceAll("4", "\u2084");
        str = str.replaceAll("5", "\u2085");
        str = str.replaceAll("6", "\u2086");
        str = str.replaceAll("7", "\u2087");
        str = str.replaceAll("8", "\u2088");
        str = str.replaceAll("9", "\u2089");

        final String stringa = str;
        formulaConvertita.add(stringa);

        items.add(new ListViewItem()
            {{
                ThumbnailResource = array_image2[indice];
                Title = document.getElementsByTagName("nome").item(indice).getTextContent();
                SubTitle = stringa;
            }});
        }
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       
    CustomListViewAdapter adapter = new CustomListViewAdapter(this,items);
    lv.setAdapter(adapter);

    lv.setOnItemClickListener(
            new OnItemClickListener()
            {
                public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
                {                           
                    Context context = getBaseContext();
                   Intent myIntent = new Intent(context, Dettagli.class);

                   myIntent.putExtra("nome_sostanza",nome.get(position));
                 //  myIntent.putExtra("formula",formula.get(position));
                   myIntent.putExtra("iupac",iupac.get(position));                  
                   myIntent.putExtra("aspetto",aspetto.get(position));                 
                   myIntent.putExtra("appartenenza",appartenenza.get(position));
                   myIntent.putExtra("solubilita",solubilita.get(position));
                   myIntent.putExtra("tempFus",tempFus.get(position));
                   myIntent.putExtra("tempEboll",tempEboll.get(position));
                   myIntent.putExtra("spiegazione",spiegazione.get(position));
                   myIntent.putExtra("immagine", array_image2[position]);
                   myIntent.putExtra("formulaConvertita", formulaConvertita.get(position));
                   myIntent.putExtra("note", note.get(position));
                   startActivityForResult(myIntent, 0);
                }

                }
         );
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

class ListViewItem {
public int ThumbnailResource;
public String Title;
public String SubTitle;
}
} 
```

模拟器上的差异是主线程一的 16 秒和 AsyncTask 一的 1 分钟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:12:56.690

我已将此问题标记为重复，但上次我这样做时，审阅者投了反对票。

无论哪种方式，原因是它`AsyncTask`在`doInBackground()`后台优先级中运行，并且必须与所有其他后台任务（例如您的 RSS 阅读器等）共享最多 10% 的 CPU 时间——无论系统实际上有多空闲。

有关[详细讨论和解决方案，请参见此处](https://stackoverflow.com/a/14217816/1856738)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:26:43.350

UI 线程上的 16 秒仍然太多，这不是解决方案 - 您的用户每次都会受到 ANR 对话框的打击。所以有几点建议：

1.  优化里面的代码`doInBackground()`。
2.  考虑使用另一个 XML 解析器，它可能会提高性能。
3.  如果适合您的应用程序逻辑，请将此代码移至后台`Service`，使其在用户未与您的应用程序交互时处理数据。`Activity`将信息存储在数据库中并在打开时加载它。

# sql - XACT_ABORT OFF ACID 不兼容？

> ID：16213120
> 
> 赞同：2
> 
> 时间：2013-04-25T11:07:18.077
> 
> 标签：sql, sql-server

我是新来的，所以请温柔！:) 好的，所以我已经进入 SQL Server 社区/世界大约 2 年了（SQL Server Dev 和 DBA - 2005+ 版本），最近我还发现了 ACID 理论，我只是想知道到底是怎么回事SQL Server ACID 兼容？默认情况下，它总是带有 XACT_ABORT OFF 选项，对吧？这是 MSDN 的一个例子：

```
 IF OBJECT_ID(N't2', N'U') IS NOT NULL
        DROP TABLE t2;
    GO
    IF OBJECT_ID(N't1', N'U') IS NOT NULL
        DROP TABLE t1;
    GO
    CREATE TABLE t1
        (a INT NOT NULL PRIMARY KEY);
    CREATE TABLE t2
        (a INT NOT NULL REFERENCES t1(a));
    GO
    INSERT INTO t1 VALUES (1);
    INSERT INTO t1 VALUES (3);
    INSERT INTO t1 VALUES (4);
    INSERT INTO t1 VALUES (6);
    GO
    SET XACT_ABORT OFF;
    GO
    BEGIN TRANSACTION;
    INSERT INTO t2 VALUES (1);
    INSERT INTO t2 VALUES (2); -- Foreign key error.
    INSERT INTO t2 VALUES (3);
    COMMIT TRANSACTION;
    GO

select * from t2; 
```

结果集：

```
a
1
3 
```

在这种情况下，原子性在哪里？也许我把整个 ACID 理论弄错了？

PS：我问这个的原因不仅是因为 ACID 属性，还因为我过去曾多次使用此 XACT_ABORT 选项，尤其是当它通过 ODBC 连接与应用程序中的 CLR 代码结合时 - 但偏离主题： )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:16:18.600

是的，你是对的。当这样使用时，在 XACT_ABORT OFF 且没有 TRY/CATCH 块的情况下，SQL Server 中的事务几乎毫无用处。

您应该始终使用 XACT_ABORT_ON 和 TRY/CATCH 块来确保您的交易安全。

在这种情况下，即使 XACT_ABORT OFF，TRY/CATCH 也可以工作：

```
 SET XACT_ABORT OFF;
    GO
    BEGIN TRY
        BEGIN TRANSACTION;
        INSERT INTO t2 VALUES (1);
        INSERT INTO t2 VALUES (2); -- Foreign key error.
        INSERT INTO t2 VALUES (3);
        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
        ROLLBACK;
    END CATCH  
    GO 
```

# java - LineNumberReader 跳过文件的第一行

> ID：16213124
> 
> 赞同：1
> 
> 时间：2013-04-25T11:07:31.173
> 
> 标签：java, readline

我正在使用以下代码读取文本文件的前 6 行：

```
File finish = new File("C:/ABC Statements final/");
        File[] finf = finish.listFiles();
        String[] filenames1 = finish.list();
        LineNumberReader br = null;  
        PrintWriter bw = null;  
        for (int k = 0; k < filenames1.length; k++) {
            try {
            br = new LineNumberReader(new FileReader(new File("C:/ABC Statements final/" + filenames1[k])));  
            String line = br.readLine();  

            while (line != null && br.getLineNumber() <= 6 ) {   
                line = br.readLine();  
                System.err.println(line);
            }  

            } catch (Exception asd) {
                System.err.println(asd);
            } 
```

我的输出不打印文件的第一行。谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:09:51.320

那是因为你正在吃掉第一行是`read`.

```
String line = br.readLine();  // First line was read here.

while (line != null && br.getLineNumber() <= 6 ) {   
    line = br.readLine();  // Your first line was overriden here.
    System.err.println(line);
} 
```

使上面的代码看起来像这样：-

```
String line = null;  
while ((line = br.readLine()) != null && br.getLineNumber() <= 6 ) {   // Line is read and checked - both together
    System.err.println(line);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:09:31.243

将这两行交换

```
line = br.readLine();  
System.err.println(line); 
```

所以它是这样的

```
System.err.println(line);
line = br.readLine(); 
```

您在第一次打印之前调用了两次读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:09:38.710

在第 9 行，您阅读第一行。这永远不会打印，因为您在打印之前阅读了 while 循环中的第二行

# php - 选择表列名然后显示它们

> ID：16213125
> 
> 赞同：1
> 
> 时间：2013-04-25T11:07:41.767
> 
> 标签：php, mysql, sql

我想选择特定表中的所有列名。然后显示它们。

我搜索并得到了一些类似这样的结果。

```
SELECT `COLUMN_NAME` 
FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_SCHEMA`='yourdatabasename' 
AND `TABLE_NAME`='yourtablename'; 
```

如果我查询这个，如何获取它们并显示它们？当我获取任何表的数据时，我会根据它们的列名显示它们。

喜欢：

```
$table = mysql_query("SELECT * FROM table_name");

while($fetch = mysql_fetch_assoc($table))
{
  echo $fetch['id'] . ":" . $fetch['fullname'] . '<br>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:10:07.960

Try this

```
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA WHERE TABLE_NAME = 'my_table'; 
```

You can also use

```
SHOW COLUMNS FROM my_table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:14:02.423

```
$rows = mysql_query("SHOW COLUMNS FROM table_name");

while($row = mysql_fetch_assoc($rows))
{
   echo $row['Field'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:10:24.357

When you `mysql_fetch_assoc`, you get an array where the keys are the column names:

```
$table = mysql_query("SELECT * FROM table_name");

while($fetch = mysql_fetch_assoc($table))
{
  foreach ($fetch as $column=>$value) {
      echo $column . ":" . $value . '<br>';
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:12:59.007

尝试使用这个

```
for($i = 0; $i < mysql_num_fields($table); $i++) {
    $field_info = mysql_fetch_field($table, $i);
    echo "Column name: $field_info->name";
} 
```

# java - 来自 Collections.frequency 的排序结果

> ID：16213132
> 
> 赞同：-2
> 
> 时间：2013-04-25T11:08:10.380
> 
> 标签：java, filtering, hashset

我有一个包含 500 多个单词的 ArrayList。我试图将它们组织成一个列表，其中出现最多的单词位于顶部，然后是第二个最频繁的单词，依此类推。

到目前为止，我已经设法使用下面的代码过滤掉频率小于 5 的单词，但是我无法弄清楚如何将这些结果按降序组织到频率列表中。

```
 Set<String> unique = new HashSet<String>(wordsL);

    for (String key : unique) {
      if (Collections.frequency(wordsL, key) > 5) {
//        println(Collections.frequency(wordsL, key));
        lwords.add(key);
        println(lwords);
      }
    } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:19:09.103

您可以`Map<String, Integer>`用于计数。

您可以稍后[按值对地图进行排序](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)。

# angularjs - AngularJS：从范围中删除而不强制执行

> ID：16213134
> 
> 赞同：0
> 
> 时间：2013-04-25T11:08:12.130
> 
> 标签：angularjs

我有一组项目绑定到AngularJS`<li>`中的元素。`<ul>`我希望能够单击每个旁边的“删除项目”并删除该项目。

StackOverflow 上的[这个答案让我们能够做到这一点，但是因为要从中删除元素的数组的名称是硬编码的，所以它不能跨列表使用。](https://stackoverflow.com/questions/14250642/angularjs-how-to-remove-and-item-from-scope)

[您可以在此处看到有关JSfiddle 设置](http://jsfiddle.net/jphastings/WJ226/1/)的示例，如果您尝试单击游戏旁边的“删除”，则会删除学生，而不是游戏。

从按钮传`this`回让我可以访问 Angular $scope，但我不知道如何从父数组中干净地删除该项目。

我可以定义按钮`ng-click="remove('games',this)"`并使函数看起来像这样：

```
$scope.remove = function (arrayName, scope) {
  scope.$parent[arrayName].splice(scope.$index,1);
} 
```

（[就像这个 JSFiddle 一样](http://jsfiddle.net/jphastings/WJ226/3/)）但是当我在里面命名父数组时，当我在一年内编辑我的代码时，它似乎是一种破坏功能的好方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:17:36.720

我不明白你为什么要通过`this`..你几乎不需要处理`this`角度问题。（我认为这是它的优势之一！）。

这是一个以稍微不同的方式解决问题的小提琴。

[http://jsfiddle.net/WJ226/5/](http://jsfiddle.net/WJ226/5/)

控制器现在简化为

```
function VariousThingsCtrl($scope) {

    $scope.students = students;
    $scope.games = games;

    $scope.remove = function (arrayName,$index) {
      $scope[arrayName].splice($index,1);
    }
} 
```

与其通过整体`scope`，为什么不直接通过`$index`呢？由于您已经在数组所在的范围内，因此从那时起应该很容易。

# html - 将边框底部添加到嵌套列表项

> ID：16213138
> 
> 赞同：4
> 
> 时间：2013-04-25T11:08:24.997
> 
> 标签：html, css

我想用 css 为每个列表项添加一个底部边框。这是我的 CSS 代码：

```
ul,ol{
    li{
        list-style-type: none;
        margin: 0;
        padding: 0;
        padding-top: 3px;
        padding-bottom: 10px;
        margin-bottom: 10px;
        border-bottom: 1px solid #eeeeee;

        ul,ol{
            margin-left: 2em;
                li{
                    border-bottom: 1px solid #eeeeee;
                }
        }
    }
} 
```

它给出这样的输出：

截图网址： http: [//oi34.tinypic.com/ih1eea.jpg](http://oi34.tinypic.com/ih1eea.jpg)

css 代码在顶级项目上运行良好。但不在子列表中。请查看屏幕截图并帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:11:27.057

[**演示**](http://jsfiddle.net/8mJUj/)

给你`ul`讲课`demo`

```
.demo li {
   border-bottom: 1px solid #000;  
} 
```

如果您希望网站中的每一个 li 都应该得到`border-bottom`，那么使用这不是一个好主意

```
ul li {
   border-bottom: 1px solid #000;
} 
```

如果你想缩进你的嵌套`li`，你可以使用文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:23:14.917

您在问题中发布的语法是错误的。（*您不能在 CSS 规则中进行嵌套*）

等效的正确语法是

```
li{
    list-style-type: none;
    margin: 0;
    padding: 0;
    padding-top: 3px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    border-bottom: 1px solid #eeeeee;
}

 li ul, 
 li ol{
    margin-left: 2em;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-25T11:24:44.823

我不确定我是否非常了解您，但是您可以使用简单的代码：

**HTML**

```
<div>
    <ul class="list-1">
        <li class="item-1">Item 1
            <ul class="list-1-1">
                <li>Item 1-1</li>
            </ul>
        </li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul>
</div> 
```

**CSS**

```
ul.list-1 li.item-1, ol.list-1 li.item-1 {
        list-style-type: none;
        margin: 0;
        padding: 0;
        padding-top: 3px;
        padding-bottom: 10px;
        margin-bottom: 10px;
        border-bottom: 1px solid #eeeeee;   
}
ul.list-1 li.item-1 ul.list-1-1 , ol.list-1 li.item-1 ul.list-1-1 {
    margin-left: 2em;
}
ul.list-1-1 li {
    border-bottom: 1px solid #eeeeee;
} 
```

**演示**

[http://jsfiddle.net/jVcFb/1/](http://jsfiddle.net/jVcFb/1/)

# cocoa - 在末尾插入新行时使 insertRowAtIndexes:withAnimation 可见

> ID：16213140
> 
> 赞同：0
> 
> 时间：2013-04-25T11:08:26.490
> 
> 标签：cocoa, nstableview

我正在使用 insertRowAtIndexes:withAnimation 向 NSTableView 添加新行。

如果新行的矩形已经可见，那么这可以正常工作，但是在最后插入新行时会出现问题。该行按预期插入，但由于滚动位置未调整，动画发生在屏幕外！

我缺少任何明显的修复程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:56:26.130

您必须手动使新行可见。您不能调用`-rectOfRow:`要插入的行，因为它还没有在表中 - 相反，查看表中最后一行的矩形，添加新行的预期高度，然后查看结果是否rect 将在屏幕上可见；如果没有，您需要滚动。

如果要为滚动设置动画，请参阅[带有动画的 NSTableView scrollRowToVisible 。](https://stackoverflow.com/questions/7925136/nstableview-scrollrowtovisible-with-animation)请注意，在 10.7+ 上，您可能还想调用[`-flashScrollers`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScrollView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScrollView/flashScrollers)滚动视图。

# xpath - In a blueprint.xml route, call a propertyplaceholder using an xpath returned value

> ID：16213142
> 
> 赞同：0
> 
> 时间：2013-04-25T11:08:32.593
> 
> 标签：xpath, fuseesb

I have a blueprint.xml in which I write some routes for an ESB. I want to get values from an XML file passed into the route. I want to then use these values to make up a dynamic property key name and call the properties file and get the matching property (all within the route). I want to avoid having to create a Java processor due to the overhead of instantiating this each time. Essentially I want to do this:

```
 <from uri="file:C:/myfilelocation?"/>
    <to uri= {{<xpath>//company</xpath>+<xpath>//branch</xpath>}}/> 
```

So in blueprint you call a property using {{}} I am trying to place the xpath values as the property key inside of the property {{}} tags. In my properties file I have a mapping for each company/branch combination like so:

company1branch1=[http://thiscompany.com](http://thiscompany.com) company2branch2=[http://someothercompany.com](http://someothercompany.com)

Any way to do this, e.g. some sort of escape characters?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:57:48.660

< to > 用于静态 uris，如果你想使用动态运行时计算的 uris，那么你应该使用收件人列表 EIP：[http](http://camel.apache.org/recipient-list.html) ://camel.apache.org/recipient-list.html允许发送消息到在运行时计算的收件人。

这也是此常见问题解答中的描述：http: [//camel.apache.org/how-do-i-use-dynamic-uri-in-to.html](http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html)

虽然使用 xpath，但您需要先将它们设置为标头。有点像：

```
<setHeader headerName="company">
   <xpath resultType="java.lang.String">/xxxx</xpath>
</setHeader>
...
<recipientList><simple>{{${header.company}${header.branch}}}</simple></recipientList> 
```

收件人列表也可以发送到 2+ 个目的地，分隔符默认为逗号。但是你可以配置它。请参阅上面的链接。

# c# - 如何在 Windows 8 的 HashSet 中检查特定类型的对象？

> ID：16213144
> 
> 赞同：1
> 
> 时间：2013-04-25T11:08:37.297
> 
> 标签：c#, windows-8

我有一个`HashSet`通用类型`UserControl`，它可以有各种 UserControl（登录、设置）。我想检查该集合是否包含任何特定类型的对象（例如登录）。如果是这样，我想得到那个元素。

我知道用循环很容易做到，但是有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:11:38.817

不幸的是，没有循环就无法做到这一点，因为您需要尝试集合中的所有元素来检查它们的类型。事实上，你有一个散列集并不重要：它与列表或任何其他可枚举的工作相同。但是，LINQ 允许您隐藏循环，如下所示：

```
var item = hashSet.OfType<DesiredType>().FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:21:54.427

正如@dasblinkenlight 所说，您可以使用`OfType<T>()`LINQ 方法来隐藏循环。他的回答也使用`FirstOrDefault()`了“包含元素？”的方法。问题被改写为“不为空”。另一种方法是使用`Count() > 0`after `OfType<T>()`。

```
var items = hashSet.OfType<DesiredType>();
if (items.Count() > 0) {
    DesiredType item = items.First();
    ...
} 
```

第三种方法是将谓词放在`FirstOrDefault()`方法中。

```
var item = hashSet.FirstOrDefault(x => 
    x.getType() == typeof(DesiredType)
);

if (item != null) {
    ...
} 
```

如果您的集合不经常更改，您可以使用`GroupBy(func)`将计算复杂度降低到*O(1)*。想法是建立一次字典并查询它。

```
var groups = new Dictionary<Type, IEnumerable<UserControl>>();
foreach(var group in hashSet.GroupBy(x => x.GetType()))
    groups.Add(group.Key, group);

    .
    .
    .

if (groups.ContainsKey(typeof(DesiredType)) {
    DesiredType item = items.First();
    ...
} 
```

# php - how to retrieve the data from two table in mysql database with if condition in php mysql

> ID：16213145
> 
> 赞同：-1
> 
> 时间：2013-04-25T11:08:37.860
> 
> 标签：php, mysql, if-statement, for-loop

![table design ](https://i.stack.imgur.com/lTZJA.jpg)

my code is

```
<html>
<head>
<body>
<div style="width:400px;height:300px;border:1px solid blue;"> 
<div style="width:400px;height:50px; float: left;">&nbsp;</div>
<form>
<div align="right" style="width:150px;height:30px; float: left;">Show Name :&nbsp;    </div>
<div style="width:250px;height:30px; float: left;">
<select name="show_name" onchange="showUser(this.value)">
<option selected="selected"> -- Select The Show --</option>
<?php   
session_start();
include_once('db.php');
$sql = mysql_query("SELECT show_id, show_name FROM show_name");
while($row=mysql_fetch_array($sql))
{
$show_id = $row['show_id'];
$show_name= $row['show_name'];
echo "<option value ='.$show_id'>$show_name</option>";
}
?>
</select>
</div>
<div align="right" style="width:150px;height:30px; float: left;">Show Place :&nbsp;      </div>
<div style="width:250px;height:30px; float: left;">
<select name="show_place" onchange="showUser(this.value)">
<option selected="selected"> -- Select The Show Place --</option>
<?php   
$sql = mysql_query("SELECT * FROM show_name, show_place WHERE    show_name.show_id=show_place.show_id");
while($row=mysql_fetch_array($sql))
{
$show_id = $row['show_id'];
$show_place = $row['show_place'];
echo "<option value ='.$show_id'>$show_place</option>";
}
?>
</select>
</div>
</form>
</div>
</body>
</head>
</html> 
```

i want to option box condition for stud show to select the particular place .. please guide me how to merge the two table by using if condition or foreach condition

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:18:56.357

对于严格匹配：

```
 SELECT * 
    FROM show_name
    JOIN show_place ON (show_name.show_id = show_place.show_id) 
```

或者，如果您也想要没有地方的名称：

```
 SELECT * 
    FROM show_name
    LEFT JOIN show_place ON (show_name.show_id = show_place.show_id) 
```

# php - 如何在提交时弹出联系表单在弹出窗口中显示确认消息？

> ID：16213146
> 
> 赞同：1
> 
> 时间：2013-04-25T11:08:38.600
> 
> 标签：php, jquery, html, css, onsubmit

我在制作此联系表时遇到了很大的问题，该联系表可以在下面的图片中看到。我希望联系表单做的是在提交感谢消息或确认消息时显示，而不是重定向到没有任何样式的 contact.php 文件，您可以在提供的链接上看到这一点。

我发现了一些我可以使用 Jquery Ajax 执行此操作的信息，我也尝试过在下面显示这些信息，但我似乎仍然无法让它在提交时工作以在弹出窗口中显示一条消息。

有谁知道更简单的方法来做到这一点，或者可能指出我正确的方向，因为这是我一直试图解决的问题，上帝知道多久了。

感谢您的任何帮助

视觉： http: [//madaxedesign.co.uk/dev/index.html](http://madaxedesign.co.uk/dev/index.html)

PHP 和 HTML：

```
<?php
        $your_email = "maxlynn@madaxedesign.co.uk";
        $subject = "Email From Madaxe";
        $empty_fields_message = "<p>Please go back and complete all the fields in the form.</p>";
        $thankyou_message = "<p>Thank you. Your message has been sent. We Will reply as soon as possible.</p>";

        $name = stripslashes($_POST['txtName']);
        $email = stripslashes($_POST['txtEmail']);
        $message = stripslashes($_POST['txtMessage']);

        if (!isset($_POST['txtName'])) {

        ?>
        <form id="submit_message" class="hide_900" method="post" action="/contact.php" onsubmit="javascript: doSubmit();">
            <div id="NameEmail"> 
                <div>
                    <label for="txtName">Name*</label> 
                    <input type="text" title="Enter your name" name="txtName" />
                </div> 
                <div>
                    <label for="txtEmail">Email*</label> 
                    <input  type="text" title="Enter your email address" name="txtEmail" />
                </div> 
            </div>
            <div id="MessageSubmit">
                <div> 
                    <textarea maxlength="1200" title="Enter your message" name="txtMessage"></textarea> 
                    <label for="txtMessage">Message</label>
                </div>
                <div class="submit"> 
                    <input type="submit" value="Submit" /></label>
                </div>
            </div> 
        </form> 
```

查询：

```
function doSubmit(){
  var postData = jQuery('#submit_message').serialize();    

  jQuery.ajax({
    url: '/contact.php',
    data: postData
  }).done(function( html ) {
    alert(html);
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:13:24.007

您可以添加`return false`；在 doSubmit 函数或以下代码的末尾，以防止表单将用户重定向到操作页面。

```
var doSubmit = function (event) {
  var postData = jQuery('#submit_message').serialize();    

  jQuery.ajax({
    url: '/contact.php',
    data: postData
  }).done(function( html ) {
    alert(html);
  });
  event.preventDefault();
}

$(function () {
    $('#submit_message').submit(doSubmit);
}); 
```

修改后的 HTLM

```
<form id="submit_message">
...
</form> 
```

**这段代码在做什么？**

首先，我们定义一个提交表单数据的函数。注意函数中的事件参数。此函数中的第一个变量是在兼容 ajax 的请求字符串中序列化的所有表单值。该`.ajax()`功能将所有数据发送到您的服务器。请注意，由于您没有在`.ajax()`函数中设置类型参数，因此将使用 GET HTTP 方法发送数据。最后，`event.preventDefault()`防止在浏览器中触发提交事件。当浏览器检测到提交事件时，它会根据html 标签中的`action`和`method`参数尝试提交表单。`<form>`通常，此提交将用户重定向到`action`页面。这个`event.preventDefault()`将禁用此重定向。请注意，事件参数将由 jQuery 自动设置。

最后一部分，`$(function() { ... });`part的意思是“在文档完全加载时执行这部分”。它确保在调用方法`sumbit_message`之前具有 id 的元素存在。`.submit()`最后一种方法是事件绑定器。这意味着当在表单上触发提交事件时，将调用`submit_message`该函数。`doSubmit`

我希望你对这个脚本有更好的理解。这是一个非常基础的方法，但如果你清楚地了解其中的机制，它将帮助你成为一个更好的 jQuery 程序员。:)

[小提琴演示](http://jsfiddle.net/TCffC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:15:46.373

```
1.<form onsubmit='confirm()'>
function confirm()
{
alert("Thank You");
} 
```

2.在contact.php中调用再次显示的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:16:08.587

您需要防止表单的默认事件。为此，请将`e.preventDefault();`函数添加到函数的顶部，以防止触发此事件。

另请注意，我们正在将`e`参数传递给您的函数。这表示已触发的事件。

```
function doSubmit(e){
  e.preventDefault();
  var postData = jQuery('#submit_message').serialize();    

  jQuery.ajax({
    url: '/contact.php',
    data: postData
  }).done(function( html ) {
    alert(html);
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:22:31.377

尝试这个

更改您的表格

```
<form id="submit_message" class="hide_900" method="post"> 
```

并在脚本中放入

```
$("#submit_message").submit(function(e){
    e.preventDefault();
    //call your ajax
}); 
```

# sql - Confused with sql query

> ID：16213156
> 
> 赞同：0
> 
> 时间：2013-04-25T11:09:17.867
> 
> 标签：sql, postgresql-9.2

I have the following tables:

```
Customer(login varchar, town varchar)
Orders (Ordno int , login varchar) >>login Fk from Customer
combination (Id int, ordno int ,Product_Id int) >>ordno fk from orders 
```

I need to show the products that have been sold in **ALL** the cities.

Example:

```
Insert into Customer (log1 , NY) (log2, NY) (log3, London)
Insert into Orders (1,log1) (2,log1) (3,log3) 
Insert into combination (1,1,1) (2,2,2) (3,3,1) 
```

*   Product 1 sold in NY
*   product 2 sold in NY
*   product 1 sold in London

if the available cities are only NY and London, then the only product that must be the result of the query is product 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:17:36.803

```
SELECT  a.ProductID
FROM    Combination a
        INNER JOIN Orders b
            ON a.OrdNo = b.OrdNo
        INNER JOIN Customer c
            ON b.Login = c.LogIn
GROUP   BY a.ProductID
HAVING  COUNT(DISTINCT a.ID) = (SELECT COUNT(DISTINCT town) FROM Customer) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!12/8d330/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:16:55.717

不知道你到底想在这里做什么。

```
SELECT c.Town, cc.Product_Id FROM from Customer c
JOIN Orders o ON c.login = o.login
JOIN Combination cc ON o.Ordno = cc.ordNo
GROUP BY c.town 
```

这会将城镇组合在一起并向您显示 Product_Id

您仍然需要一个产品表来显示产品表。

此查询不包括产品表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:17:37.430

假设 Products 表如下所示：

```
Products (Product_Id int, Name) 
```

您需要将东西一路向下（或向上）连接到客户......

```
SELECT p.Name, c.town
FROM Products p
  INNER JOIN Combination comb ON comb.Product_Id=p.Product_Id
  INNER JOIN Orders o ON o.Ordno=comb.ordno
  INNER JOIN Customer cust ON cust.login=o.login
GROUP BY p.Name, c.town 
```

# javascript - 当名称在变量中时如何在jquery中获取textarea元素

> ID：16213157
> 
> 赞同：2
> 
> 时间：2013-04-25T11:09:22.710
> 
> 标签：javascript, jquery, textarea

我正在尝试使用单个选择按钮填充多个文本区域。对于我的应用程序，我不能使用其他任何东西（特别是 id）所有文本区域都是动态创建的，并按 tx1 、 tx2 ... txn 的顺序命名。

我的代码就像....

```
var count = 13;
            for(var i=1;i<count;i++ )
            {
            var txtname = 'tx' + i;

            var txt1 = $('textarea[name=txtname]');

            var selTxt1 = $(this).find("option:selected").attr('text');
..... 
```

......

但`var txt1 = $('textarea[name=txtname]');`不起作用！如何将动态创建的 txtaarea 名称提供给 var txt1 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:10:36.133

Like this -

```
$("textarea[name="+txtname+"]"); 
```

# javascript - 使用 jQuery 使用 .eq() 选择多个元素

> ID：16213158
> 
> 赞同：13
> 
> 时间：2013-04-25T11:09:24.410
> 
> 标签：javascript, jquery, html-table

我想从表中选择一个 tds 子集。

我事先知道索引是什么，但它们实际上是随机的（不是奇数或偶数索引等）。

例如说我想选择第 0 个、第 5 个和第 9 个 td。

```
indexesToSelect = [0, 5, 9];

// 1) this selects the one by one
$('table td').eq(0)
$('table td').eq(5)
$('table td').eq(9)

// 2)this selects them as a group (with underscore / lodash)
var $myIndexes = $();

_.forEach(indexesToSelect, function (idx) {
    $myIndexes = $myIndexes.add($('table td').eq(idx));
}); 
```

所以（2）有效，我正在使用它，但我想知道是否有更自然的方式使用 jQuery。

像传递`.eq()`索引数组这样的东西？（这不起作用）

```
// does not work
$('table td').eq([0, 5, 9]) 
```

如果没有，我会为之类的东西编写一个小插件`.eqMulti(array)`。

注意：这些 td 没有专门共享的类，因此基于类进行选择将不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T11:11:57.297

我会用[`.filter()`](http://api.jquery.com/filter/)and来做[`$.inArray()`](http://api.jquery.com/jQuery.inArray/)：

```
var elements = $("table td").filter(function(i) {
    return $.inArray(i, indexesToSelect) > -1;
}); 
```

另一种 [*更丑陋*] 的方式是映射到选择器：

```
var elements = $($.map(indexesToSelect, function(i) {
    return "td:eq(" + i + ")";
}).join(","), "table"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T12:04:29.193

我将 VisioN 的过滤器方法包装到一个 jQuery 插件中：

```
$.fn.eqAnyOf = function (arrayOfIndexes) {
    return this.filter(function(i) {
        return $.inArray(i, arrayOfIndexes) > -1;
    });
}; 
```

所以现在使用很干净：

```
var $tds = $('table td').eqAnyOf([1, 5, 9]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T11:10:53.960

尝试这个

```
 $('table td:eq(0), table td:eq(5), table td:eq(9)') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-31T03:00:01.423

```
$('table td').filter(':eq(' + indexesToSelect.join('), :eq(') + ')') 
```

# c - OpenSSL - 在证书链中查找错误深度

> ID：16213162
> 
> 赞同：1
> 
> 时间：2013-04-25T11:09:35.083
> 
> 标签：c, ssl, openssl

我正在编写一个 C 程序来使用 OpenSSL 检索和验证 x509 证书链。这是我第一次用 C 编程，我非常依赖[http://www.ibm.com/developerworks/linux/library/l-openssl/上的教程](http://www.ibm.com/developerworks/linux/library/l-openssl/)

我可以使用以下代码从连接中检索任何错误代码：

```
if (SSL_get_verify_result(ssl) != X509_V_OK)
{
    printf("\nError verifying certificate\n");
    fprintf(stderr, "Error Code: %lu\n", SSL_get_verify_result(ssl));
} 
```

但是我还需要知道哪个证书是有问题的。有没有办法像命令行 s_client 那样确定错误的链深度？任何示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T00:56:19.267

我在 Chandra、Messier 和 Viega 的“使用 OpenSSL 的网络安全”中找到了答案。

它使用 SSL_CTX_set_verify 指定一个回调函数，该函数在链中每个证书的验证例程之后运行。

```
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, verify_callback);

int verify_callback(int ok, X509_STORE_CTX * store)
{
  if (!ok) //if this particular cert had an error
  {
    int depth = X509_STORE_CTX_get_error_depth(store);
    int err = X509_STORE_CTX_get_error(store);
  }
} 
```

# python - Code run but answer not correct ( python)

> ID：16213166
> 
> 赞同：0
> 
> 时间：2013-04-25T11:09:45.963
> 
> 标签：python

```
player_number=name_to_number(name)
player_number=int ()

# compute random guess for comp_number using random.randrange()
comp_number=random.randrange (0,4)

# compute difference of player_number and comp_number modulo five
rpsls_match = (player_number-comp_number)%5

 # use if/elif/else to determine winner
if rpsls_match == 1 or 2:
    rpsls_winner = 'Player wins!'
elif rpsls_match == 3 or 4:
    rpsls_winner = 'Computer wins!'
else:
    rpsls_winner = 'Player and computer tie!'

    #print "Player chooses " + name

   # convert comp_number to name using number_to_name
print 'Computer chooses ', number_to_name(comp_number),comp_number
print 'player chooses ' , name, player_number
return rpsls_winner 
```

Code run correctly but i did not get answer what i want,, it give me answer like

```
Computer chooses  paper 2
player chooses  rock 0
Player wins!

Computer chooses  lizard 3
player chooses  paper 0
Player wins!

Computer chooses  spock 1
player chooses  scissors 0
Player wins!

Computer chooses  paper 2
player chooses  lizard 0
Player wins!

incorrect input
Computer chooses  lizard 3
player chooses  Spock 0
Player wins! 
```

but I want like

```
Player chooses rock
Computer chooses scissors
Player wins!

Player chooses Spock
Computer chooses lizard
Computer wins!

Player chooses paper
Computer chooses lizard
Computer wins!

Player chooses lizard
Computer chooses scissors
Computer wins!

Player chooses scissors
Computer chooses Spock
Computer wins! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:13:41.377

`rpsls_match == 1 or 2`应该

`rpsls_match in (1, 2)`或者

`rpsls_match == 1 or rpsls_match == 2`.

尝试`1 or 2`在 REPL 进行评估。答案是`1`因为`or`返回第一个非错误评估操作数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:13:41.537

线

```
player_number=int () 
```

将始终设置`player_number`为 的默认值`int`，即零。您应该删除该行以保留上一行中设置的值。

# c# - 匹配 在行尾/行首有空格

> ID：16213169
> 
> 赞同：2
> 
> 时间：2013-04-25T11:09:58.897
> 
> 标签：c#, regex

我不知道如何让 C# 正则表达式`IsMatch`匹配 a`<keyword>`后跟行尾或空格。

我目前有`[\s]+keyword[\s]+`which 适用于空间，但不适用于`keyword<end of string>`or `<start of string>keyword`。

我试过`[\s^]+keyword[\s$]+`了，但这使它无法与空格匹配，并且在字符串的末尾或开头不起作用。

这是我尝试过的代码：

```
string pattern = string.Format("[\\s^]+{0}[\\s$]+",keyword);
if(Regex.IsMatch(Text, pattern, RegexOptions.IgnoreCase)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T11:25:04.267

问题是`^`和`$`内部字符类不被视为锚，而是作为文字字符。您可以简单地使用交替而不是字符类：

```
string pattern = string.Format(@"(?:\s|^){0}(?:\s|$)",keyword); 
```

请注意，不需要`+`，因为您只想确定是否有一个空格。你不在乎他们是否有更多。这`?:`只是一种很好的做法，并且会抑制您在此处不需要的[捕获。](http://www.regular-expressions.info/brackets.html)并且`@`使字符串成为逐字字符串，您不必双重转义反斜杠。

还有另一种方法，我觉得它稍微整洁一些。您可以使用[lookarounds](http://www.regular-expressions.info/lookaround.html)，以确保关键字的左右两侧没有非空格字符（是的，双重否定，请考虑一下）。如果存在空格字符或字符串有一端，则此假设有效：

```
string pattern = string.Format(@"(?<!\S){0}(?!\S)",keyword); 
```

这完全一样，但可能效率更高一些（不过，您必须对其进行分析才能确定 - 如果它甚至很重要）。

您还可以将第一个模式（具有非反转逻辑）与（正）环视一起使用：

```
string pattern = string.Format(@"(?<=\s|^){0}(?=\s|$)",keyword); 
```

但是，这对第一个模式并没有真正的影响，除非您想在一个字符串中找到多个匹配项。

顺便说一句，如果您`keyword`可能包含正则表达式元字符（如`|`、`$`等`+`），请务必先使用[`Regex.Escape`](http://msdn.microsoft.com/en-GB/library/system.text.regularexpressions.regex.escape.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:00:53.033

我不确定你真的想用这个正则表达式来完成什么，但是下面的代码将匹配字符串“关键字”，当它的两边都有空格时：

```
string resultString = null;
try {
    Regex regexObj = new Regex(@"\b(keyword)\b");
    resultString = regexObj.Match(subjectString).Value;
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

一般可以解释为：\b 断言在开始和结束词边界的位置。在这种情况下，我假设感兴趣的词是关键字。

从我对您问题的解释中，我还认为您可能有兴趣匹配关键字后面的整个字符系列直到换行符。如果是这种情况，则以下正则表达式代码将返回该匹配项：

```
string resultString = null;
try {
    Regex regexObj = new Regex(@"\bkeyword\b(\w*\s*)$");
    resultString = regexObj.Match(subjectString).Value;
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

这个正则表达式可以解释为找到开始和结束单词的边界，这就是 \b 在两边的原因。(\w*\s*) *$ 读起来像这样匹配所有单词 \w*字符和空格字符 \s* 的出现次数，并将位置移动到 $ 行的末尾。

下一段代码将读入包含关键字的整行数据，不包含关键字的数据行将不匹配。

```
string resultString = null;
try {
    Regex regexObj = new Regex("^.*keyword.*$");
    resultString = regexObj.Match(subjectString).Value;
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

解释：字符串开头的 ^ 位置，.* 匹配任何不是换行符的字符，然后包含关键字，后跟 .*，因此包含剩余的非换行符，$ 断言位于字符串末尾的位置，在此示例中将是整行。

我希望以上内容对您有所帮助，如果不是这次，也许将来会有所帮助。我一直在尝试发现替代做法以达到相同的结果，因此，如果您有任何建设性的批评，请发表。

最好的祝愿，史蒂夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:12:27.077

尝试这个：

```
string pattern = string.Format("^\\s*{0}\\s*$",keyword); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:27:36.253

我发现了这篇其他帖子 [如何指定“空格或字符串结尾”和“空格或字符串开头”？](https://stackoverflow.com/questions/6713310/regexp-question-space-or-end-of-string-and-space-or-start-of-string)

这回答了这个问题，所以我的代码现在是

```
string pattern = string.Format("\\b+{0}\\b+",keyword);
if(Regex.IsMatch(UserText, pattern, RegexOptions.IgnoreCase)) 
```

# php - 哈希值是否包含引号？

> ID：16213172
> 
> 赞同：-1
> 
> 时间：2013-04-25T11:10:03.240
> 
> 标签：php, mysql, hash, sql-injection, phpass

哈希值是否包含引号？

如果它依赖于算法，我想知道`blowfish`使用`phpass`.

我问的是关于 SQL 注入`prepare`的问题，因为我不希望查询 for`authentication`和 use `place holders`，只是将`username`and`password hash`括在引号中。（我也怀疑`username`仅由`word chars [a-wA-W1-9_]`（无引号或其他特殊字符）组成时是否安全？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:11:58.977

是的，哈希值可以包含引号。以及用户名。

你也不应该把你的数据库交互建立在他们永远不应该有的脆弱假设上（因为你非常希望不要准备这听起来很荒谬）。

相反，无论您假设数据是什么，都应使数据库查询尽可能安全。有时事情会在某些方面出错，您不希望将错误存储在持久层中，也不希望为 SQL 注入提供潜在的门。

# ruby-on-rails - 链接回表单之前访问的页面

> ID：16213176
> 
> 赞同：30
> 
> 时间：2013-04-25T11:10:29.170
> 
> 标签：ruby-on-rails, url, redirect, request, refer

我有一个列表页面，然后是一个表格，然后是一个感谢页面。我需要在感谢页面上放置一个链接，该链接将用户带回他们在表单之前所在的页面，该页面总是变化的。我试过用这个：

```
= link_to "Back", :back 
```

但这只会让他们回到上一页，所以表单。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-07-07T20:36:08.990

尝试这个

```
<%= link_to 'Back', url_for(:back) %>
# if request.env["HTTP_REFERER"] is set to "http://www.example.com"
# => http://www.example.com 
```

[这里有更多细节。](http://api.rubyonrails.org/v3.2.14/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-25T11:38:27.180

好吧，您可以在表单页面中设置一个方法来收集该 url。基本思想是使用自定义会话变量来存储以前的 url 并将其保留到下一个会话。

假设您的表单的操作是 SomeController#new，那么

```
class SomeController < ApplicationController
  after_action "save_my_previous_url", only: [:new]

  def save_my_previous_url
    # session[:previous_url] is a Rails built-in variable to save last url.
    session[:my_previous_url] = URI(request.referer || '').path
  end

end 
```

然后在感谢页面中，您可以`my_previous_url`通过

```
 session[:my_previous_url] 
```

这应该能够适合您的情况，两页前的上一个网址。

免责声明：这未经验证。想法而已。

### 添加

会话属于控制器。它不是您可以直接在视图中使用的助手。您需要在控制器中定义一个实例变量，然后您可以在视图中使用它。像这样

```
# Controller
@back_url = session[:my_previous_url]

# View
<%= link_to "Back", @back_url %> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-01-16T15:38:27.113

您可以使用 Rails API 中的示例：

```
<%= link_to "Back", :back %> 
```

[用于 link_to 的 Rails API 文档](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

> 使用 :back 符号而不是选项哈希将生成指向引荐来源网址的链接（如果不存在引荐来源网址，将使用 JavaScript 反向链接代替引荐来源网址）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T11:33:26.080

既然你说，它可能是表单之前的不同页面，可能 request_url 可以帮助你。您可以将您的 request_url 保存在一个参数中并重定向到 param_url（如果有）。

这是您可以参考的来源。 [http://programming-tut.blogspot.com/2010/06/ruby-on-rails-request-url.html](http://programming-tut.blogspot.com/2010/06/ruby-on-rails-request-url.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-05T09:52:19.260

如果在Controller中使用，可以直接这样使用：

```
def some_action
  # some code
  redirect_to :back
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-16T16:24:50.087

这对我有用：

在先前视图的控制器中：

```
cookies[:original_referrer] = request.orignal_url 
```

使用原始页面的 URL 在浏览器上设置 cookie

在当前视图的控制器中：

```
redirect_to cookies[:original_referrer] 
```

# jquery - Scroll sprite element on a path

> ID：16213177
> 
> 赞同：0
> 
> 时间：2013-04-25T11:10:30.993
> 
> 标签：jquery

I would like to do something similar with: [this](http://benthebodyguard.com/index.php) but instead of a straight path, I have a path with curves! And the sprites must be able to be animated on scroll! Any suggestions or help will be appreciated! Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:48:54.653

这个 JQuery 插件用于在纯 HTML 和 JavaScript [spritely.net中创建动态角色和背景动画](http://www.spritely.net/)

这应该可以帮助你！

# java - Use hibernate query with entity field

> ID：16213178
> 
> 赞同：1
> 
> 时间：2013-04-25T11:10:32.007
> 
> 标签：java, hibernate, jpa

I have simple entity like :

```
 @Entity
    public class University implements Serializable {

        /** The Constant serialVersionUID. */
        private static final long serialVersionUID = 1L;

        @Id
        @GeneratedValue(strategy = GenerationType.AUTO)
        private int id;

        @Column
        String name;

        @Column 
        String address;

        @Column 
        Student student;
    } 
```

And entity Student :

```
 @Entity
    public class Student implements Serializable {

        /** The Constant serialVersionUID. */
        private static final long serialVersionUID = 1L;

        @Id
        @GeneratedValue(strategy = GenerationType.AUTO)
        private int id;

        @Column
        String Firstname;

        @Column 
        String LastName;

        @Column 
        StudentStatus status;
    } 
```

Can i create **@JoinFormula** or something like that to create query , which will take students from Student entity to University entity ?

I tried something like that:

```
 @JoinFormula("SELECT l FROM Student l where l.id = 1")
    Student student; 
```

but it doesn't work. **Can i create query to select some students ?**

UPDATED : **@JoinFormula never called.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:15:40.260

我可能错过了重点，但如果您只想引用另一个实体，您可以使用 @ManyToOne 注释。

例子：

```
@ManyToOne
public MediaLibrary getParentLibrary() {
    return parentLibrary;
} 
```

同样，如果您有一个列表，您可以使用 @ManyToMany 注释，然后指定正确的连接表：

例子：

```
@ManyToMany(fetch = FetchType.EAGER, cascade = { CascadeType.MERGE, CascadeType.REFRESH, })
@JoinTable(name = "MediaDataTag", joinColumns = { @JoinColumn(name = "MediaData_Id") }, inverseJoinColumns = { @JoinColumn(name = "Tag_Id") })
public Set<Tag> getTags() {
    return this.tags;
} 
```

如果你提供一个清晰的用例，提供一个具体的解决方案会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:22:59.383

[EclipseLink](http://wiki.eclipse.org/Introduction_to_EclipseLink_JPA_%28ELUG%29#.40OneToOne)有一组很棒的 JPA 文档和示例（即使您使用的是不同的实现）

尝试改用这个（我假设一所大学可以有多个学生）

```
@OneToMany(mappedBy="university")
private Set<Student> student; 
```

在学生中，您将拥有反向映射

```
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="UniversityID")
private University university; 
```

# c++ - 在 C++ 中创建 RGBA 图像

> ID：16213183
> 
> 赞同：3
> 
> 时间：2013-04-25T11:10:39.313
> 
> 标签：c++, image, rgba

我有一个 640x480x4 值的矩阵，即每个有 4 个通道 (RGBA) 的 640x480 像素。我想创建一个显示透明度的 png 文件。我曾尝试使用 opencv，但显然不支持透明度。我可以做到这一点的最快和最简单的方法是什么，我只需要保存一些图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:43:59.777

正如其他人所说，如果不使用外部库，您将无法轻松地在 C++ 中编写 PNG 图像文件。

[`libpng`](http://www.libpng.org/pub/png/libpng.html)是最小和最便携的解决方案，它是官方的 PNG 参考库，大多数图像库都使用它来编写和读取 PNG 文件。这是一个相当容易使用的 C 库，但可能不是 C++ 新手的最佳解决方案。

使用以下内容编写 PNG 图像的示例`libpng`：

```
FILE *fp = fopen("file.png", "wb");
png_structp png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, 0, 0, 0);
png_infop info_ptr = png_create_info_struct(png_ptr);
png_init_io(png_ptr, fp);

/* write header */
png_set_IHDR(png_ptr, info_ptr, width, height,
    bit_depth, color_type, PNG_INTERLACE_NONE,
    PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE);

png_write_info(png_ptr, info_ptr);

/* write bytes */
png_bytep * row_pointers;
<allocate row_pointers and store each row of your image in it>
png_write_image(png_ptr, row_pointers);
png_write_end(png_ptr, NULL);

/* cleanup heap allocation */
for (y=0; y<height; y++) free(row_pointers[y]);
free(row_pointers);

fclose(fp); 
```

`libpng`正如您所看到的，它需要相当多的行来简单地初始化编写上下文，并且我自愿删除了错误管理，这对于（用作实例）有点棘手，`setjmp`并且绝对不适合新手 C 程序员。

您可以查看更高级别的图像库，例如`ImageMagick`它有一个称为 C++ API 的库[`Magick++`](http://www.imagemagick.org/Magick++/)，这是将内存中的图像写入 PNG 文件的示例：

```
Magick::Blob blob(data, length); 
Magick::Image image; 
image.size("640x480") 
image.magick("RGBA"); 
image.read(blob);
image.write("file.png"); 
```

如您所见，使用更高级别的库要容易得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:23:37.370

除了 BMP 图像，所有常见的图像格式都相当复杂，你真的不能只写几行代码就得到你想要的。它们都有许多元素（页眉、页脚等），并且通常在主图像部分进行压缩。

您需要使用某种库。我没有直接使用它，但是我在我的机器上编译的代码似乎经常使用[libpng](http://www.libpng.org/pub/png/libpng.html)

# android - 如何更改android中单选按钮的边框颜色？

> ID：16213186
> 
> 赞同：6
> 
> 时间：2013-04-25T11:10:49.917
> 
> 标签：android, android-ui

如何更改android中单选按钮的边框颜色？

我想更改 android 单选按钮的圆圈颜色。

提前致谢。任何帮助是极大的赞赏。

我尝试了不同的解决方案并关注是否有任何其他可绘制图像的属性

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-04-10T00:03:24.350

是的，这是您要查找的属性：buttonTint，但仅适用于 api 级别 21 或以上

```
<RadioButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/radio"
    android:checked="true"
    android:buttonTint="@color/your_color"/> 
```

在您的 values/colors.xml 中，在这种情况下将您的颜色设置为微红色：

```
<color name="your_color">#e75748</color> 
```

结果：

![彩色 Android 单选按钮](https://i.stack.imgur.com/KehCS.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-25T11:17:59.220

自定义（更改颜色）视图的最简单方法。

转到：[http ://android-holo-colors.com/](http://android-holo-colors.com/)

*   选择您想要的单选按钮颜色
*   下载输出资源 (Download.Zip)
*   提取 zip 内容
*   将提取的 zip 文件中的文件复制到您的项目可绘制对象、样式和值
*   将应用主题的父主题更改为您下载的主题
*   你得到了你想要的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-25T10:57:16.007

尝试使用 AppCompatRadioButton

```
<android.support.v7.widget.AppCompatRadioButton
    android:id="@+id/rb"
    app:buttonTint="@color/colorAccent" //This to set your default button color
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

有关更多详细信息，请查看此答案：[Android：以编程方式更改 RadioButtons 和复选框的颜色](https://stackoverflow.com/questions/32472737/android-change-the-color-of-radiobuttons-and-checkboxes-programmatically/38565260#38565260)

# oracle - 在 @INC 中找不到模块 DBD::Oracle 的可加载对象：Cygwin

> ID：16213190
> 
> 赞同：0
> 
> 时间：2013-04-25T11:11:02.340
> 
> 标签：oracle, perl, cygwin, dbd

我在 Windows 上使用 cygwin 来编译 perl 模块。我能够通过 cpan 安装 perl DBI 后来我安装了 DBD ，它也说安装成功。

> cpan[1]> install DBD::Oracle Going to read '/home/e1sched/.cpan/Metadata' Database was generated on Wed, 24 Apr 2013 12:08:01 GMT DBD::Oracle is up to date (1.60) .

现在，当我执行我的脚本时，我在下面收到此错误。

> $ ./invpayhistload.sh 5 50000 Thu, Apr 25, 2013 5:53:31 AM 开始批处理 PPID 7580 install_driver(Oracle) 失败：无法在 @INC 中找到模块 DBD::Oracle 的可加载对象（@INC 包含: /usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int /usr/lib/perl5/site_perl/5.14 /usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int /usr/ lib/perl5/vendor_perl/5.14 /usr/lib/perl5/5.14/i686-cygwin-threads-64int /usr/lib/perl5/5.14 /usr/lib/perl5/site_perl/5.10 /usr/lib/perl5/vendor_perl/ 5.10 /usr/lib/perl5/site_perl/5.8 .) at (eval 3) line 3 在 (eval 3) line 3 的 require 编译失败。也许 DBD::Oracle 需要的模块尚未完全安装在 /usr /local/batch/bin/invpayhistload.pl 第 33 行

DBD::Oracle 似乎没有正确安装。我尝试了很多次，但结果都是一样的。找路径有问题吗？这是什么`@INC`？感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:39:05.277

我怀疑`DBD::Oracle`安装是否正确。众所周知，很难得到就是工作。基本上，您需要：

1.  安装一个工作（！），正确配置的 oracle 客户端
2.  准备好你的环境，这样你就可以使用 oracle 客户端（尤其是`LD_LIBRARY_PATH`需要正确设置的东西）
3.  获取最新的`DBD::Oracle`并`perl Makefile.PL; make`手动运行
4.  希望...

有关更多信息，请参见例如[此问题...](https://stackoverflow.com/questions/1848808/how-to-install-dbdoracle-in-strawberry-perl?rq=1)

# android - 在android中实现自定义视图时出错：

> ID：16213203
> 
> 赞同：0
> 
> 时间：2013-04-25T11:11:46.057
> 
> 标签：android, view, android-custom-view

我正在尝试在我的应用程序中实现自定义视图。我浏览了这个页面：http: [//developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

我创建了以下内容：

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/leftMenu"
android:layout_width="100dp"
android:layout_height="fill_parent"
android:background="@drawable/left_menu_background"
android:orientation="vertical"
android:visibility="gone" >

<ImageButton
    android:layout_width="fill_parent"
    android:layout_height="52dp"
    android:background="@drawable/left_menu_close_button"
    android:onClick="showLeftMenu" />

<ImageButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/left_menu_separator" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/left_menu_buttons_container"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/left_menu_data_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/left_menu_button_transparent"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:paddingBottom="10dp"
            android:paddingTop="10dp" 
            android:onClick="showSelectTab">

            <ImageButton
                android:id="@+id/left_menu_data_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/transparent_rectangle"
                android:scaleType="fitXY"
                android:src="@drawable/folder" 
                android:onClick="showSelectTab"/>

            <TextView
                android:id="@+id/left_menu_data"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:text="Data"
                android:textColor="@color/my_white" 
                android:onClick="showSelectTab"/>
        </LinearLayout>

        <ImageButton
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/left_menu_separator" />

        <LinearLayout
            android:id="@+id/left_menu_settings"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/transparent"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:paddingBottom="10dp"
            android:paddingTop="10dp" 
            android:onClick="showSettingsPopup">

            <ImageButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/transparent_rectangle"
                android:scaleType="fitXY"
                android:src="@drawable/settings" 
                android:onClick="showSettingsPopup"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:text="Settings"
                android:textColor="@color/my_white" 
                android:onClick="showSettingsPopup">
            </TextView>
        </LinearLayout>

        <ImageButton
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/left_menu_separator" />
    </LinearLayout>
</ScrollView> 
```

和那些类：

**应用视图线性布局：**

```
package com.emildesign.sgreportmanager.ui;

import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.LinearLayout;

public class AppViewLinearLayout extends LinearLayout {

public AppViewLinearLayout(Context context, AttributeSet attrs, int layoutResource)
{
    super(context, attrs);
    if (isInEditMode())
        return;
    View view = LayoutInflater.from(context).inflate(layoutResource, null);
    addView(view);
} 
```

}

和：**左侧菜单：**

```
package com.emildesign.sgreportmanager.ui;

import com.emildesign.sgreportmanager.R;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;

public class LeftSideMenu extends AppViewLinearLayout
{
private LeftSideMenuClickListener mListener;

public LeftSideMenu(Context context, AttributeSet attrs, int layoutResource) 
{
    super(context, attrs, layoutResource);
    findViewById(R.id.left_menu_data).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.dataOnClick(v);
        }
    });

    findViewById(R.id.left_menu_settings).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });
}

public interface LeftSideMenuClickListener {
    void dataOnClick(View v);

    void settingsOnClick(View v);
} 
```

}

现在我尝试将它添加到我的主布局中，如下所示：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".LoginScrActivity" >

<com.emildesign.sgreportmanager.ui.LeftSideMenu
    android:id="@+id/leftSideMenu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
.... 
```

出于某种原因，我在 logcat 中收到了这个：

```
E/AndroidRuntime( 1034): java.lang.RuntimeException: Unable to start activity Co
mponentInfo{com.emildesign.sgreportmanager/com.emildesign.sgreportmanager.activi
ties.ReportsTableActivity}: android.view.InflateException: Binary XML file line
#10: Error inflating class com.emildesign.sgreportmanager.ui.LeftSideMenu 
```

**更新：**

我做了以下更改，在`LeftSideMenu`：

```
public LeftSideMenu(Context context, AttributeSet attrs) 
{
    super(context, attrs, R.layout.left_menu);
            ..... 
```

错误消失了，但我仍然可以看到我的自定义布局。

层级查看器：

![在此处输入图像描述](https://i.stack.imgur.com/KWUEj.png) 我究竟做错了什么？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:25:05.150

添加此构造函数：

```
public LeftSideMenu (Context context, AttributeSet attrs) {...} 
```

# logging - 使用 jboss7 默认日志机制的同一类中的多个记录器

> ID：16213205
> 
> 赞同：0
> 
> 时间：2013-04-25T11:11:54.810
> 
> 标签：logging, jboss7.x

基本上我需要使用 jboss7 日志机制在同一个类中以相同的记录器阈值记录两条消息。请让我知道如何详细完成？我遵循了您建议的方法，并创建了两个周期性旋转文件处理程序，如下所示

```
 <periodic-rotating-file-handler name="FILE_DEBUG">
                <level name="DEBUG"/>
                <formatter>
                    <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
                </formatter>
                <file relative-to="jboss.server.log.dir" path="File111_debug.log"/>
                <suffix value=".yyyy-MM-dd"/>
                <append value="true"/>
            </periodic-rotating-file-handler>

            <periodic-rotating-file-handler name="FILE_INFO">
                <level name="INFO"/>
                <formatter>
                    <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
                </formatter>
                <file relative-to="jboss.server.log.dir" path="File222_info.log"/>
                <suffix value=".yyyy-MM-dd"/>
                <append value="true"/>
            </periodic-rotating-file-handler>

            <logger category="com.mypackage">
                <handlers>
                    <handler name="FILE_DEBUG"/>
                    <handler name="FILE_INFO"/>
                </handlers>
            </logger>

        <root-logger>
            <level name="DEBUG"/>
            <handlers>
                <handler name="CONSOLE"/>
            </handlers>
        </root-logger>

and in my class, I have declared as below,

package com.mypackage.log

ClassA{
private static final Logger loggerDebug = Logger.getLogger("FILE_DEBUG");
private static final Logger loggerInfo = Logger.getLogger("FILE_INFO");

method1()
{
    loggerDebug.debug("This message should be logged into  DEBUG log file");
        loggerInfo.info("This message should be logged into  INFO log file");
}

} 
```

尽管在日志文件夹下创建了新的记录器文件，但上述行并未打印在相应的日志文件中。

感谢您是否可以帮助我检查配置中出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:31:42.410

您可以将处理程序分配给记录器，但通过该记录器记录的所有消息都将使用指定的处理程序。

解决这个问题的最简单方法是使用两个不同的记录器类别。使用`Logger.getLogger(Class<?>)`只是`Logger.getLogger(Class<?>.getName())`. 这意味着您可以执行以下操作：

```
package com.example;

class ClassA {
    private static final Logger LOGGER1 = Logger.getLogger(ClassA.class.getName() + "1");
    private static final Logger LOGGER2 = Logger.getLogger(ClassB.class.getName() + "2");

    void method1() {
        LOGGER1.info("This message should be logged to a file called File111"); 
        LOGGER2.info("This message should be logged to a file called File222");
    }
} 
```

然后配置日志子系统，如：

```
<subsystem xmlns="urn:jboss:domain:logging:1.1">
    ...
    <periodic-rotating-file-handler name="FILE1">
        <formatter>
            <pattern-formatter pattern="%d{HH:mm:ss,SSS} "/>
        </formatter>
        <file relative-to="jboss.server.log.dir" path="File111.log"/>
        <suffix value=".yyyy-MM-dd"/>
        <append value="true"/>
    </periodic-rotating-file-handler>
    <periodic-rotating-file-handler name="FILE2">
        <formatter>
            <pattern-formatter pattern="%d{HH:mm:ss,SSS} "/>
        </formatter>
        <file relative-to="jboss.server.log.dir" path="File222.log"/>
        <suffix value=".yyyy-MM-dd"/>
        <append value="true"/>
    </periodic-rotating-file-handler>

    <logger category="com.example1">
        <level name="INFO"/>
        <handlers>
            <handlers name="FILE1"/>
        </handlers>
    </logger>

    <logger category="com.example2">
        <level name="INFO"/>
        <handlers>
            <handlers name="FILE2"/>
        </handlers>
    </logger>
    ...
</subsystem> 
```

另一种选择是在记录器类别上使用过滤器，但这需要了解某种模式，即什么消息发送到什么处理程序。

# wcf - 从 Excel 中的 VBA 代码调用 WCF 函数（使用引用的参数）

> ID：16213206
> 
> 赞同：0
> 
> 时间：2013-04-25T11:11:56.713
> 
> 标签：wcf, excel, pass-by-reference, vba

我开发了一个成功运行的 WCF 服务。然后我在 Excel 中有一些 VBA 代码，是我按照本指南编写的 - [http://damianblog.com/2009/07/05/excel-wcf/](http://damianblog.com/2009/07/05/excel-wcf/)

它正在工作，我已经使用具有参数和返回值的简单函数对其进行了测试 - 它正确返回结果。我现在需要的是通过引用传递几个参数，在函数中设置它们的值，然后返回。为此，我创建了这个测试函数：

```
// interface...
[OperationContract]
int Read(ref int val1, ref int val2);

// implementation...
public void Read(ref int val1, ref int val2)
{
    val1 = 10;
    val2 = 20;
} 
```

我从 VBA 模块中调用它，如下所示：

```
val1 = 0
val2 = 0

Call service1.Read(val1, val2)
MsgBox val1
MsgBox val2 
```

我最后得到的值是 20 和 0，而不是 10 和 20。

是否不支持超过 1 个 'byref' 参数，或者我在这里做错了什么？

PS 另一个有趣的事情是我不能将 val1 声明为整数或长整数，因为 service1.Read() 调用返回异常“类型不匹配”。它似乎只适用于 Variant 类型。

* * *

编辑：好的，我通过从函数返回一个对象数组来解决这个问题。像这样的东西：

```
// interface...
[OperationContract]
object[] Read();

// implementation...
public object[] Read()
{
    return new object[4] { 10, 20, "hello world", DateTime.Now };
} 
```

在 VBA 中：

```
Dim val() As Variant

val = service1.Read()
MsgBox val(0)
MsgBox val(1)
MsgBox val(2)
MsgBox val(3) 
```

像魅力一样工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:56:22.203

你可以添加你的结构并从 wcf 方法返回它吗？我的意思是，而不是

```
int Read(ref int val1, ref int val2); 
```

做类似的事情

```
[DataContract]
struct MyDataStructure {

[DataMember]
int val0;

[DataMember]
int val1;

[DataMember]
int val2;

}

...

MyDataStructure Read(); 
```

# css - CSS 活动菜单

> ID：16213210
> 
> 赞同：0
> 
> 时间：2013-04-25T11:12:11.000
> 
> 标签：css

在这个 CSS 上为我的菜单添加一个活动类的最佳方法是什么？

```
.vertical-nav{
    width:200px;
    height:auto;
    list-style:none;
    float:left;
    margin-right:40px;
}
.vertical-nav li{
    width:200px;
    height:25px;
    margin:5px;
    padding:5px;
    background-color:#666666;
    border:none;
    text-align:center;
    float:left;
}
.vertical-nav li:hover{
    background-color:#f36f25;
    color:#FFFFFF;
}
.vertical-nav li a{
    font-family:Calibri, Arial;
    font-size:18px;
    font-weight:bold;
    color:#ffffff;
    text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:19:23.223

我会将它添加到 .vertical-nav li:active { } 这样您就可以同时修改 the`<li>`和`<a>`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:24:34.133

这取决于您希望“当前”列表项如何显示，

就我个人而言，我总是会向 li 申请类，所以它会给你类似的东西：

```
.vertical-nav li.active {
background-color:#D9A300;
} 
```

并设置内部链接的样式

```
.vertical-nav li.active a {
color:#000000;
} 
```

我实际上建议使用术语“当前”而不是“活跃”，因为它很容易被误解。

我可能误解了你的要求..如果我有，请告诉我，我会相应地修改我的答案。

# jsp - 在jsp中导入和检索类对象

> ID：16213212
> 
> 赞同：1
> 
> 时间：2013-04-25T11:12:16.063
> 
> 标签：jsp, jakarta-ee, servlets

我正在尝试`QueryClass`从我制作的 servlet 中检索类型的数组列表对象并导入类，`QueryClass`这样我就可以在我的 jsp 中使用名为`validate.jsp`“但是当我在 jsp 文件中获取属性时该对象似乎不存在，尽管在我的 servlet 中使用适当的数据对其进行了初始化，并且我使用正确的名称对其进行了设置。

在我的 servlet 中，我有这个片段

```
QueryClass query = new QueryClass("","","","");

String searchName = request.getParameter("searchName");

ArrayList<QueryClass> data = query.getSearchedNames(searchName);

request.setAttribute("data",data);  

RequestDispatcher rd = request.getRequestDispatcher("validate.jsp");

rd.forward(request, response); 
```

在我的jsp中，我有以下内容

```
<%@page import="src.main.java.QueryClass"%>

<%
if(request.getAttribute("data")!=null) 
{
    ArrayList<QueryClass> value = (ArrayList<QueryClass>)request.getAttribute("data");
}
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:21:05.520

您的要求基本上可以通过牢记 MVC 方法来满足，该方法基本上使 scriptlet 过时和弃用。

1.  在 servlet 方法中将所需的数据设置为请求属性：

    ```
    List<QueryClass> data = createList(...);
    request.setAttribute("data",data);
    request.getRequestDispatcher("validate.jsp").forward(request, response); 
    ```

2.  通过 EL 访问请求的不同属性（会话、应用程序等）：

    ```
    ${data} 
    ```

因此，为了记住您想要遍历列表，如果您使用 JSTL，遍历在 JSP 中可能具有以下样式：

```
<ul>
    <c:forEach var="element" items="${data}">
        <li>${element.name}</li>
    </c:forEach>
</ul> 
```

如果您的类定义了方法，上面的代码将从您的数据对象生成每个元素的名称列表`getName()`。

# mysql - strtodate mysql 函数不存在 .. mysql 查询

> ID：16213213
> 
> 赞同：-3
> 
> 时间：2013-04-25T11:12:20.953
> 
> 标签：mysql, sql

我有一张价格房间的桌子，

有三个季节（默认，低，高），我想按两个日期搜索以获得不同日期，季节的总价格..

这是我的表和查询

[http://sqlfiddle.com/#!2/7ebc2/1](http://sqlfiddle.com/#!2/7ebc2/1)

[如何计算5天（mysql）酒店预订系统的总价](https://stackoverflow.com/questions/14187081/how-can-calculate-the-total-price-for-5-days-mysql-hotel-booking-system/14187307#14187307)

```
select sum(coalesce(prices.room_price , def.room_price) ) as TotalPrice
from (select strtotime('2013-05-07' , '%Y-%m-%d') as thedate union all
      select strtotime('2013-05-08' , '%Y-%m-%d') as thedate
     ) dates left outer join
     SH_rooms_price prices
     on dates.thedate between prices.start_season and prices.end_season and
        dayname(dates.thedate) = prices.day_of_week join SH_rooms_price def
    on def.season_price = 'default' and
       def.id_hotel = 5544 and
       def.day_of_week = dayname(dates.thedate) 
```

# 出现错误：strtotime 不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:22:26.377

strtotime 不是 mysql 中的有效函数。它仅针对 php 定义。尝试使用[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)。

修改后的查询工作正常。

```
select sum(coalesce(prices.room_price , def.room_price) ) as TotalPrice
from (select str_to_date('2013-05-15' , '%Y-%m-%d') as thedate union all
      select str_to_date('2013-05-08' , '%Y-%m-%d') as thedate
     ) dates left outer join
     SH_rooms_price prices
     on dates.thedate between prices.start_season and prices.end_season and
        dayname(dates.thedate) = prices.day_of_week join SH_rooms_price def
    on def.season_price = 'default' and
       def.id_hotel = 5544 and
       def.day_of_week = dayname(dates.thedate); 
```

. 查看[SQLFiddle](http://www.sqlfiddle.com/#!2/7ebc2/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:20:10.577

strtotime 是一个 PHP 函数，而不是 mySQL 函数。

# html - 这是一个好习惯 里面 年代？

> ID：16213214
> 
> 赞同：5
> 
> 时间：2013-04-25T11:12:25.050
> 
> 标签：html, html-lists, accessibility, semantics, article

通常在博客的首页上，有几篇最近的博文，每篇博文都是一个`<article>`. 通常博客评论也使用`<article>`s 标记。

`<article>`我的问题是：将那些s 放在s中是一个好习惯`<li>`吗？我曾经这样做，因为在我自己的解释中，这些s 一起以**一定数量**/**数量**`<article>`的方式呈现。因此，在列出一定数量/数量的元素时，它们是最佳选择。****`<ul>``<ol>`****

 ****但是，也许我需要重新考虑我的解释，因为将`<article>`s 放入`<li>`s 似乎是对`<li>`. 而且我还想考虑**可访问性**。我不确定这样做是否会导致对辅助技术的混淆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T12:31:45.317

问题真正归结为：什么构成列表？如果是文章列表，则应使用`<li>`. 屏幕阅读器用户的优势是屏幕阅读器可以使用语义标记来传达有用的信息。例如，通知用户他们刚刚进入“5 个项目的列表”有助于他们了解内容的组织方式以及内容的数量。

也就是说，如果列表中的每个项目都很长或包含具有大量嵌套元素的复杂内容，我同意@IanY 这可能会造成混淆，因为这样用户就很难跟踪他们在列表中的位置。

当内容块相对较大时，如果有视力的用户不太可能查看该内容并将其识别为项目列表，那么您不应该使用`<li>`. 如果您使用`<article>`和 标题来标记文章标题，则提供了足够的语义以方便屏幕阅读器用户导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:17:50.413

如果文章是完整的博客文章，则它是合适的。我不会用它来做预告片。文章标签应该用于可以独立存在的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:21:10.017

> 将`<article>`s 放入`<li>`s 似乎是对 . 的误用`<li>`。

怎么会这样？

> 我不确定这样做是否会导致对辅助技术的混淆。

据我所知不是。如果确实如此，我会对所讨论的辅助技术感到惊讶/失望。****

# javascript - 处理点击事件中的变量

> ID：16213218
> 
> 赞同：1
> 
> 时间：2013-04-25T11:12:35.513
> 
> 标签：javascript, javascript-events

我使用以下函数动态创建了一个画布：

```
var animating=false;
function create_canvas(Container,Id,Width,Height)
{
 ...//set width,height
 //added a click event listener
 document.getElementById(Id).addEventListener("click", function () 
        {
            if(animating==true)
            {
                alert("Running the animation"); //can't reach this part 
                return;
            }
            else
            {
                animating=true;
                run_canvas();
                animating=false;
            }
        });
 ...//append to Container
}
function run_canvas()
{
 ...//some code here 
} 
```

现在，每当我单击画布时，无论如何都会开始动画。我的意思是全局变量**动画**不会改变它的值。因此我的问题是：我做错了什么，我应该如何处理这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:15:48.833

该`run_canvas`方法可能异步执行其动画代码，但在`animating`动画开始后立即执行将属性设置为 false 的语句。当动画完成时，您需要在`run_canvas`方法中将属性设置为 false，或者在完成时触发事件并在事件处理程序中设置属性。

# c++ - 具有并发值的哈希映射（在 C++ 中）

> ID：16213221
> 
> 赞同：1
> 
> 时间：2013-04-25T11:12:41.567
> 
> 标签：c++, concurrency, thread-safety, concurrenthashmap

我有一个哈希映射，从字符串键到指向线程安全类的指针。此类的每个对象都包含一个互斥体，我用它来在其各种方法之间进行同步。

此外，每隔一段时间我想丢弃一段时间未使用的值。我希望能够安全地删除值指针并将其从哈希映射中删除，同时确保没有人使用我的值。

实现这一目标的最佳方法是什么（一般来说，在 C++ 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:17:10.657

如果您希望人们使用您的哈希映射来获取这些指针，然后能够继续使用它们而不必通知您的哈希映射类他们已经完成了它，那么将共享指针存储在哈希映射中是最简单的计时方法实际对象删除到对象的最后一个用户完成它的时间。然后哈希映射可以随时删除它指向对象的共享指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:17:21.143

存储和传递指向对象的共享指针 ( `std::shared_ptr`)。使用`std::shared_ptr::use_count`方法检查当前正在使用多少个指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T19:11:39.540

您还可以使用TBB[库中的](https://www.threadingbuildingblocks.org/)[concurrent_hash_map](https://software.intel.com/en-us/node/506191)。它使用访问器（一种带锁的智能指针）保护其元素的并发访问和生命周期

# iphone - 您是否需要从 Documents/Inbox 中删除导入的文件？

> ID：16213226
> 
> 赞同：12
> 
> 时间：2013-04-25T11:12:52.580
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个从电子邮件附件导入文件的 iOS 应用程序。我注意到，一旦我完成它，它会将导入的文件放入 Documents/Inbox。

我的应用程序应该删除这些文件还是操作系统最终会清除它们？

如果是这样，如何？我试过了：

```
[[NSFileManager defaultManager] removeItemAtPath:[self.url path] error:nil]; 
```

但是，即使 self.url 是我的导入文件的正确路径，它似乎也没有引用收件箱中的文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T11:26:09.033

系统不会清除导入的文件，需要时手动清除，但不要删除Documents目录。

如何清除`NSDocumentsDirectory`你可以在**[这里找到](https://stackoverflow.com/questions/4793278/deleting-all-the-files-in-the-iphone-sandbox-documents-folder)**

如果要从收件箱中删除文件，请使用相同的代码添加

```
...
NSString *path = [NSString stringWithFormat:@"%@/Inbox", documentsDirectory ];
NSArray *directoryContents = [fileMgr contentsOfDirectoryAtPath:error:&error];
... 
```

阅读[参考资料](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

来自苹果文档：

> 使用此目录访问外部实体要求您的应用打开的文件。具体来说，Mail 程序将与您的应用关联的电子邮件附件放在此目录中；文档交互控制器也可以在其中放置文件。
> 
> 您的应用可以读取和删除此目录中的文件，但不能创建新文件或写入现有文件。如果用户尝试编辑此目录中的文件，您的应用程序必须在进行任何更改之前静默地将其移出目录。
> 
> 此目录的内容由 iTunes 备份。

# php - 如何从 MSSQL 导出图像并将其显示在网站上？

> ID：16213227
> 
> 赞同：2
> 
> 时间：2013-04-25T11:12:53.453
> 
> 标签：php, sql-server

我在让它工作时遇到了一些困难。

这是我正在使用的代码：

```
require_once('db_connection.php');
$Query = mssql_query("SELECT Photo FROM Persons WHERE IDPerson = '3'");
$Person = mssql_fetch_array($Query);
$Photo = $Person["Photo"];
header('Content-type: image/jpeg');
echo $Photo; 
```

这是我得到的结果：

![在此处输入图像描述](https://i.stack.imgur.com/PyeEY.png)

> （图像底部出现了一些东西，但这只是图像的一部分）

这是图像值在我的数据库中的样子：

> 0x424D3684030000000000360000002800000040010000F000000001001800000000000084030000000000000000000000000000000000FDFEF5FCFDF4FFFFFAE3F2

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:20:24.557

您应该必须使用 base64 编码来显示数据库中的图像

喜欢

```
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAWgBaAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAAB..." /> 
```

**使用，base64编码**

```
<?php
$Query = mssql_query("SELECT Photo FROM Persons WHERE IDPerson = '3'");
$Person = mssql_fetch_array($Query);
$Photo = $Person["Photo"];

$mime = null;
// place $type init. here
if ($type=="pjpeg") // <<< where do you get $type btw?
    $mime = "image/jpeg";

$b64Src = "data:".$mime.";base64," . base64_encode($Photo);
echo '<img src="'.$b64Src.'" alt="" />';
?> 
```

**例如**

```
header("Content-type: image/png");

echo base64_decode('iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHhSURBVDjLjZPLSxtRFIfVZRdWi0oFBf+BrhRx5dKVYKG4tLhRqlgXPmIVJQiC60JCCZYqFHQh7rrQlUK7aVUUfCBRG5RkJpNkkswrM5NEf73n6gxpHujAB/fOvefjnHM5VQCqCPa1MNoZnU/Qxqhx4woE7ZZlpXO53F0+n0c52Dl8Pt/nQkmhoJOCdUWBsvQJ2u4ODMOAwvapVAqSJHGJKIrw+/2uxAmuJgFdMDUVincSxvEBTNOEpmlIp9OIxWJckMlkoOs6AoHAg6RYYNs2kp4RqOvfuIACVFVFPB4vKYn3pFjAykDSOwVta52vqW6nlEQiwTMRBKGygIh9GEDCMwZH6EgoE+qHLMuVBdbfKwjv3yE6Ogjz/PQ/CZVDPSFRRYE4/RHy1y8wry8RGWGSqyC/nM1meX9IQpQV2JKIUH8vrEgYmeAFwuPDCHa9QehtD26HBhCZnYC8ucGzKSsIL8wgsjiH1PYPxL+vQvm5B/3sBMLyIm7GhhCe90BaWykV/Gp+VR9oqPVe9vfBTsruM1HtBKVPmFIUNusBrV3B4ev6bsbyXlPdkbr/u+StHUkxruBPY+0KY8f38oWX/byvNAdluHNLeOxDB+uyQQfPCWZ3NT69BYJWkjxjnB1o9Fv/ASQ5s+ABz8i2AAAAAElFTkSuQmCC'); 
```

如果您的字符串是这样的，它将打印 pdf 徽标

# python - 两个python脚本之间的通信

> ID：16213235
> 
> 赞同：18
> 
> 时间：2013-04-25T11:13:20.107
> 
> 标签：python, inter-process-communicat

方法论问题：

我有一个“主”python 脚本，它在我的系统上的无限循环上运行，我想偶尔使用其他一些 python 脚本向它发送信息（例如，json 数据字符串），这些脚本稍后将由我自己或其他程序启动并将在发送字符串后结束。

我不能在这里使用子进程，因为我的主脚本不知道另一个脚本何时运行以及它们将执行什么代码。

我正在考虑让主脚本在本地端口上侦听并让其他脚本在该端口上发送字符串，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T11:19:18.490

zeromq：[http](http://www.zeromq.org/) ://www.zeromq.org/ - 是进程间通信的最佳解决方案，恕我直言，并且对 python 具有出色的绑定： [http ://www.zeromq.org/bindings:python](http://www.zeromq.org/bindings:python)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T15:01:21.270

由于“主”脚本看起来像一项服务，因此您可以使用 Web API 对其进行增强。[瓶子](http://bottlepy.org/)是完美的解决方案。使用此附加代码，您的 python 脚本能够接收请求并处理它们：

```
import json

from bottle import run, post, request, response

@post('/process')
def my_process():
  req_obj = json.loads(request.body.read())
  # do something with req_obj
  # ...
  return 'All done'

run(host='localhost', port=8080, debug=True) 
```

客户端脚本可以使用 httplib 向服务器发送消息并读取响应：

```
import httplib

c = httplib.HTTPConnection('localhost', 8080)
c.request('POST', '/process', '{}')
doc = c.getresponse().read()
print doc
# 'All done' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-19T21:07:24.367

如果您对实现 Mike 在 Python 3.x 中提出的客户端脚本感兴趣，您会很快发现没有可用的 httplib。幸运的是，库 http.client 也完成了同样的事情。

否则是一样的：

```
import http.client
c = http.client.HTTPConnection('localhost', 8080)
c.request('POST', '/process', '{}')
doc = c.getresponse().read()
print(doc) 
```

虽然这很旧，但我想我会发布这个，因为我今天有一个类似的问题，但使用的是服务器。

# c# - WinForms 可滚动控件触摸行为

> ID：16213237
> 
> 赞同：0
> 
> 时间：2013-04-25T11:13:24.337
> 
> 标签：c#, winforms, scroll, touch

我有一个包含 Atalasoft 的 AnnotateViewer 的 SplitContainer。类层次结构如下：

```
System.Windows.Forms.Control
  Atalasoft.Imaging.WinControls.ScrollPort
    ...
      Atalasoft.Annotate.UI.AnnotateViewer
        My.AnnotateViewer 
```

现在的问题：只要 SplitContainer 的内容小于实际视口，因此没有可见的滚动条，触摸输入被解释为鼠标左下，鼠标移动和鼠标左上，这正是我所期望和喜欢的看。我仍然可以使用两指平移来滚动视图。但是：如果我缩放查看器，使我的内容变得比我的视口大，滚动条会出现并且触摸输入的行为会有所不同：水平平移保持不变，但现在垂直平移会导致滚动，即使用一个手指也是如此。

问题是：这种行为是特定于 Atalasoft、特定于 WinForms 还是特定于系统的，我可以做些什么来改变它吗？我希望单指始终转换为左键单击和移动。两个手指的滚动很好（并且已经工作了。）

我担心它是特定于系统的，因为您可以在 Word 2010 中找到完全相同的行为。不过，它是 Microsoft 产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T11:52:03.753

SetGestureConfig API 接受 GESTURECONFIG 结构作为其第四个参数。如何传入 GESTURECONFIG[] 数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:31:13.120

我开始讨厌这样一个事实，即您在最终将您的问题输入论坛或类似网站后经常突然获得灵感。

现在通过重新注册手势事件解决了这个问题。您可以注册除水平和/或垂直单指平移之外的所有平移手势。

```
// adapt the gesture registration for this window
GESTURECONFIG[] gestureConfig = new[]
{
    // register for zoom gesture
    new GESTURECONFIG { dwID = GID_ZOOM, dwWant = GC_ZOOM, dwBlock = 0 },
    // register for pan gestures but ignore single finger (only use two-finger-pan to scroll)
    new GESTURECONFIG { dwID = GID_PAN, dwWant = GC_PAN, dwBlock = GC_PAN_WITH_SINGLE_FINGER_HORIZONTALLY | GC_PAN_WITH_SINGLE_FINGER_VERTICALLY }
};
SetGestureConfig(this.Handle, 0, (uint)gestureConfig.Length, gestureConfig, (uint)Marshal.SizeOf(typeof(GESTURECONFIG))); 
```

详细信息：http: [//msdn.microsoft.com/de-de/library/dd353241%28v=vs.85%29.aspx](http://msdn.microsoft.com/de-de/library/dd353241%28v=vs.85%29.aspx)

我认为这是您可以获得的最干净的解决方案。

# weather - 如何调用 Yahoo 每小时天气预报 API？

> ID：16213242
> 
> 赞同：2
> 
> 时间：2013-04-25T11:13:43.620
> 
> 标签：weather, yahoo-weather-api

我发现雅虎天气预报最有帮助。

我可以从雅虎获得每小时[的天气请求。](http://in.weather.com/weather/hourByHour-INXX0104?cm_ven=yahoo_in&cm_cat=citypage&cm_ite=weather&cm_pla=hourly)

如何使用 Yahoo API 调用[http://weather.yahooapis.com/forecastrss?w=2502265](http://weather.yahooapis.com/forecastrss?w=2502265)为上述每小时天气报告发出 API 请求？

[这是我找到的文档](http://developer.yahoo.com/weather/#req)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-21T20:42:18.840

Yahoo Weather Api 似乎不支持每小时预报，只有几个参数可以控制，例如 (woeid) 或 (lat, long) 中的位置和温度单位 (u 或 f)，请参阅[此处](https://developer.yahoo.com/weather)获取 yahoo 查询语。

您可以使用其他 api 的[AccuWeather](http://apidev.accuweather.com/developers/forecasts)获取每小时的详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T11:50:54.413

您可以使用您想要使用的编程语言的 REST API。我将举**Java** 示例。（类似的事情也适用于其他语言......）'

```
package tests;

import org.apache.http.*;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

/**
 * A simple Java REST GET example using the Apache HTTP library.
 * This executes a call against the Yahoo Weather API service, which is
 * actually an RSS service (http://developer.yahoo.com/weather/).
 * 
 * Try this Twitter API URL for another example (it returns JSON results):
 * http://search.twitter.com/search.json?q=%40apple
 * (see this url for more twitter info: https://dev.twitter.com/docs/using-search)
 * 
 * Apache HttpClient: http://hc.apache.org/httpclient-3.x/
 *
 */
public class ApacheHttpRestClient1 {

  public static void main(String[] args) {
    DefaultHttpClient httpclient = new DefaultHttpClient();
    try {
      // specify the host, protocol, and port
      HttpHost target = new HttpHost("weather.yahooapis.com", 80, "http");

      // specify the get request
      HttpGet getRequest = new HttpGet("/forecastrss?p=80020&u=f");

      System.out.println("executing request to " + target);

      HttpResponse httpResponse = httpclient.execute(target, getRequest);
      HttpEntity entity = httpResponse.getEntity();

      System.out.println("----------------------------------------");
      System.out.println(httpResponse.getStatusLine());
      Header[] headers = httpResponse.getAllHeaders();
      for (int i = 0; i < headers.length; i++) {
        System.out.println(headers[i]);
      }
      System.out.println("----------------------------------------");

      if (entity != null) {
        System.out.println(EntityUtils.toString(entity));
      }

    } catch (Exception e) {
      e.printStackTrace();
    } finally {
      // When HttpClient instance is no longer needed,
      // shut down the connection manager to ensure
      // immediate deallocation of all system resources
      httpclient.getConnectionManager().shutdown();
    }
  } 
```

还有更多方法可以做到这一点...您可以在[http://alvinalexander.com/java/java-apache-httpclient-restful-client-examples找到许多其他替代方法](http://alvinalexander.com/java/java-apache-httpclient-restful-client-examples)

# web-applications - ASP.NET EF5 代码优先不创建 SQL Server CE 数据库

> ID：16213243
> 
> 赞同：1
> 
> 时间：2013-04-25T11:13:44.370
> 
> 标签：web-applications, asp.net-mvc-4, ef-code-first, sql-server-ce, entity-framework-5

我进行了广泛的搜索，浏览了教程和技巧，但它不起作用！

EF 5 code-first 不会生成我的 SQL Server CE 4 数据库文件。

我有一个 ASP.NET Web 应用程序，我想使用代码优先的方法生成一个数据库。

这是我的模型类：

```
 public class Class
    {
        [Key]
        public int id { get; set; }
        public bool isLecture { get; set; }

        public int courseId { get; set; }
        public virtual Course course { get; set; }
        public int teacherId { get; set; }
        public virtual Teacher teacher { get; set; }
    }

    public class Course
    {
        [Key]
        public int id { get; set; }
        public string name { get; set; }
        public int semester { get; set; }
    }

    public class Teacher
    {
        public int id { get; set; }
        public string name { get; set; }
        public string lastName { get; set; }
    } 
```

这是上下文：

```
 public class MyContext : DbContext
    {
        public DbSet<Class> Classes { get; set; }
        public DbSet<Teacher> Teachers { get; set; }
        public DbSet<Course> Courses { get; set; }
    } 
```

这是 中的连接字符串`web.config`：

```
 <add name="MyContext" 
         connectionString="Data Source=|DataDirectory|\MyContext.sdf"
         providerName="System.Data.SqlServerCe.4.0" /> 
```

这是在`global.asax.cs`：

```
 protected void Application_Start()
    {
        Database.SetInitializer<MyContext>
            (new DropCreateDatabaseIfModelChanges<MyContext>());

        ...
    } 
```

我已经尝试了 w/ 和 w/o 这些行，`global.asax.cs`并且 w/ 和 w/o 连接字符串。

应用程序加载并工作，但只是没有创建数据库文件。我尝试`.sdf`自己创建文件，因此它可以由 EF 代码先填充，但它仍然是空的。

该项目是用 HotTowel 模板制作的 ASP.NET MVC 4，如果它意味着什么，我正在使用 Visual Studio 2012。

**解决了：**

需要此代码`global.asax.cs`：

```
 MyContext context = new MyContext();
    context.Database.Initialize(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:18:35.590

这对我有用 - 你需要连接工厂......

```
<configSections>...
</configSections>
<entityFramework>
    <defaultConnectionFactory 
        type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
        <parameters>
            <parameter value="System.Data.SqlServerCe.4.0" />
        </parameters>
    </defaultConnectionFactory>
</entityFramework> 
```

# c# - WPF New Window with content

> ID：16213244
> 
> 赞同：4
> 
> 时间：2013-04-25T11:13:46.587
> 
> 标签：c#, wpf

I want create a new Window beside an existing main Windwoe with a scrollable Textbox.

I'm pressing in my main Window on a button "Open New Window" and then it should open a new Window with a scrollable Textbox.

inside `form2`

In WPF you can drag drop elements in the main Window but cant do that for a new window. So I thought it is only possible when you create a new window in the MainWindow.xaml.cs

I was able to create a new Window trough:

```
private void btnConnect_Click(object sender, RoutedEventArgs 
 {
    Form form2 = new Form();
    //Do intergreate TextBox with scrollbar in form2

    form2.Show();

 } 
```

and now I want a Textbox

But how can I do that in C# or WPF?

Thx

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T11:29:21.033

好吧...您可以创建一个新窗口并将其加载到此 Windows.Content 中，您可以在新的 XAML 中创建一个 UserControl。例子：

```
NewXamlUserControl ui = new NewXamlUserControl();
MainWindow newWindow = new MainWindow();
newWindow.Content = ui;
newWindow.Show(); 
```

Xaml 可能是这样的

```
<UserControl x:Class="Projekt"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       x:Name="newXamlUserControl"      
        Height="300" Width="300">

    <Grid>

        <TextBox Text = ..../>

    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T12:09:46.540

在您的项目中创建一个新的 WPF 窗口：

1.  项目 -> 添加新项目 -> 窗口 (WPF)
2.  适当地命名窗口（这里我使用`ConnectWindow.xaml`）
3.  添加`TextBox`到 XAML

    ```
    <Window
        x:Class="WpfApplication1.ConnectWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Connect"
        Height="300"
        Width="300"
        ShowInTaskbar="False">
        <TextBox
            AcceptsReturn="True"
            VerticalScrollBarVisibility="Auto"
            HorizontalScrollBarVisibility="Auto"/>
    </Window> 
    ```

    `Window`您可以根据需要自定义两者`TextBox`。

有几种方法可以显示窗口。

显示模态窗口（`this`指主窗口）：

```
var window = new ConnectWindow { Owner = this };
window.ShowDialog();
// Execution only continues here after the window is closed. 
```

显示无模式子窗口：

```
var window = new ConnectWindow { Owner = this };
window.Show(); 
```

显示另一个顶级窗口：

```
var window = new ConnectWindow();
window.Show(); 
```

# xcode - NSCollectionView：使用 Selected Item 转到下一个选择视图

> ID：16213246
> 
> 赞同：0
> 
> 时间：2013-04-25T11:13:50.520
> 
> 标签：xcode, macos, nscollectionview

我是 OS X 的新手，已经开始处理 NSCollectionView。我想要做的是用 imageView 数组显示 NSCollectionView 和标签。在选择图像时，我想打开一个新的 viewController 类。我能够在集合视图中显示图像和标签数组，但我完全不知道如何使用 NSCollectionView 中的选择进入新视图以及如何将选择的图像显示给新的 viewController 类。

我有一个 NSTabView，并且我有 customView，我在其中显示 CollectionView。在 awakeFromNib 我这样做是为了填充我的 collectionView

```
 -(void)awakeFromNib
{
arrItems = [[NSMutableArray alloc]init];
 NSMutableArray *imageArray=[[NSMutableArray alloc]initWithObjects:@"Baby-Girl-Wallpaper-2012-7.jpg",@"Cute-Little-Baby-Girl.jpg",@"Joker_HD_Wallpaper_by_RiddleMeThisJoker.jpg",@"The-Dark-Angel-Wallpaper-HD.jpg",@"hd-wallpapers-1080p_hdwallpapersarena_dot_com.jpg",@"lion_hd_wallpaper.jpg",@"Ganesh_painting.jpg",@"krishna-wallpaper.jpg",@"LeoN_userpic_79630_fire_lion_by_alex_barrera.jpg",@"273483.png",@"japan_digital_nature-wide.jpg", nil];
NSMutableArray *imageName = [[NSMutableArray alloc]initWithObjects:@"Baby-Girl",@"Cute-Little",@"Joker",@"The-Dark",@"hd-wallpapers", @"lion", @"Ganesh", @"krishna", @"LeoN_userpic",@"273483.png",@"japan_digital", nil];

for(int i = 0; i<[imageArray count]; i++)
{
    STImageCollectionModal * img1 = [[STImageCollectionModal alloc] init];
    img1.image = [NSImage imageNamed:[imageArray objectAtIndex:i]];
    img1.imageName = [NSString stringWithFormat:@"%@",[imageName objectAtIndex:i]];
    [arrItems addObject:img1];
}
[collectionView setContent:arrItems];
} 
```

后来我创建了一个名为“STCollectionView”的NSCollectionView子类的新类，并将collectionView类分配给“STCollectionView”，并在setSelectionIndexes方法的帮助下，我尝试通过这个获取所选项目的索引

```
 - (void)setSelectionIndexes:(NSIndexSet *)indexes
 NSLog(@"%ld",[indexes firstIndex]); 
```

但是这个方法被调用了两次，每当我输入“super setSelectionIndexes”时，它都会给我垃圾值。我正在搜索它，但找不到任何解决方案。请帮忙..

先感谢您。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-25T12:19:58.433

你的问题让我很困惑。我在想你可以通过添加 UICollectionView 和`UICollectionView`添加自定义来完成这项任务`UICollectionViewCell`。在自定义 UICollectionViewCell 中添加`UIImageView`和`UILabel`。在方法中

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
static NSString *identifier = @"ReuseID";
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];
    cell.imageView.image = [UIImage imagewithNmaed:@"your Image name"];
    cell.label.text = @"image Named";
return cell;
  } 
```

并在 storyBoard 中按住 CLT+拖动到您`UIViewController`的 .In 方法 prepareForSgue 方法中将数据传递给您的 Next viewController。

# c# - 如何从现有的excel文件中读取单元格值

> ID：16213255
> 
> 赞同：2
> 
> 时间：2013-04-25T11:14:10.270
> 
> 标签：c#, excel

我想读取 excel 文件中的每个单元格值，但即使在 NET 中尝试了不同的示例后，我也无法获取单元格值。我没有得到以下代码的结果，任何人都可以回到这个问题上。我正在使用 .net 框架 2.0

```
string filePath = "F:/BulkTest.xlsx";
Microsoft.Office.Interop.Excel.Application ExcelApp = new Microsoft.Office.Interop.Excel.Application();
ExcelApp.Visible = true;
Microsoft.Office.Interop.Excel.Workbook wb = ExcelApp.Workbooks.Open(filePath, Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value,Missing.Value);

Microsoft.Office.Interop.Excel.Worksheet sh = (Microsoft.Office.Interop.Excel.Worksheet)wb.Sheets["Sheet1"];
Range excelRange = sh.UsedRange;

for (int i=2; i<= excelRange.Count + 1 ; i++)
{
    string values = sh.Cells[i,2].ToString();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T11:45:38.707

> 到目前为止，我正在尝试将单元格值直接传递给变量，现在我将尝试使用 Range 将单元格值传递给数组。谢谢！！！！– Teja Varma 13 分钟前

不，我什至不是那个意思 :) 正如我在评论中提到的，您可以将整个范围存储在一个数组中。这并不意味着您需要遍历每个单元格以将其存储在数组中。您可以直接将范围的值分配给数组。请参阅此示例。

```
xlRng = xlWorkSheet.get_Range("A1", "A20");

Object arr = xlRng.Value;

foreach (object s in (Array)arr)
{
    MessageBox.Show(s.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T10:06:24.993

正确的答案是使用：

```
Sheet.Cells[row,col].Value.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T04:06:46.330

C# 代码
测试正常

```
string s = xlSheet.UsedRange.Cells[1,   7].Value.ToString();
//or
string d = xlSheet.UsedRange.Cells[1, "G"].Value.ToString(); 
```

完整代码

```
 Excel.Application xlApp = new Excel.Application();
        Excel.Workbook xlBook;
        Excel.Worksheet xlSheet;

        string Path = System.IO.Path.GetDirectoryName(Application.ExecutablePath);

        xlBook = xlApp.Workbooks.Open(Path + "\\myfile.xlsx");
        xlApp.Visible = true;
        xlSheet = xlBook.ActiveSheet;

        string s = xlSheet.UsedRange.Cells[1, 7].Value.ToString();
        string d = xlSheet.UsedRange.Cells[1, "G"].Value.ToString();

        xlBook.Close();
        xlApp.Quit();

        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlSheet);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlBook);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlApp); 
```

# doctype - 如何在 Xerces 2.8 上使用 DOM 获取 doctype 声明

> ID：16213260
> 
> 赞同：0
> 
> 时间：2013-04-25T11:14:12.443
> 
> 标签：doctype, xerces

我正在尝试使用 Xerces 2.8 将 DOCTYPE 声明添加到输出 XML 文件

我正在使用 DOMDocument* doc1 = implementation->createDocument(); 创建文档

我想将doctype从doc添加到doc1。

我可以从 doc 获取 doctype，如下所示：

DOMDocumentType* document_type = doc->getDoctype();

但是，我不能将 document_type 传递给函数 createDocument()。

有没有人有如何做到这一点的例子？

谢谢，

吉尔默

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:38:16.543

您必须将 Xerces 实例的“ [http://xml.org/sax/properties/lexical-handler](http://xml.org/sax/properties/lexical-handler) ”属性设置为“LexicalHandler”类型的对象。您将收到有关“startDTD”回调的任何事件的通知。至少对于 Java 来说是这样。对于 C 来说应该是相同的。

# c# - Move the line in canvas - problems

> ID：16213261
> 
> 赞同：1
> 
> 时间：2013-04-25T11:14:14.743
> 
> 标签：c#, wpf

Hi i tryied to move line object in my app.

Xaml:

```
<Canvas x:Name="canvas" Height="300" Width="350" MouseDown="Canvas_MouseDown" MouseMove="Canvas_MouseMove" MouseUp="Canvas_MouseUp" Background="Transparent" /> 
```

Code Behind:

```
private void Canvas_MouseDown(object sender, MouseButtonEventArgs e)
{
  startPoint = e.GetPosition(canvas);

  if (e.OriginalSource is Line)
        {
            linia = (Line)e.OriginalSource;
            if(!LineFocus)
                LineFocus = true;
            return;
        }
   else
     LineFocus = false;
}
private void Canvas_MouseMove(object sender, MouseEventArgs e)
{
  var pos = e.GetPosition(canvas);
  TranslateTransform ruch = new TranslateTransform(pos.X - startPoint.X, pos.Y - startPoint.Y);
  linia.RenderTransform = ruch;
} 
```

It works fine my line is moved, but when I try to move it again it is moving from oryginal place (the place when i draw them at the very first time). When I checked it by MessageBox() with this:

```
...
linia = (Line)e.OriginalSource;
MessageBox.Show(linia.X1 + linia.Y1 + linia.X2 + linia.Y2);
... 
```

Allways return exactly the same values even after move, so what is the reason of that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:20:32.273

这些是我的编辑：

首先你需要两个点：一个起点（startPoint）和一个终点（pos）。在移动处理程序中，您将 newPoint 设置为相对于画布的当前鼠标位置。然后你取新点和旧点之间的差，你得到两个变量：dX 和 dY。现在您将这些差异添加到线的 Points 中，最后使新点指向下一个起点：

```
pos = e.GetPosition(canvas);
double dX = pos.X - startPoint.X;
double dy = pos.Y - startPoint.Y;
//if you want, you can put here an if- statement to check if the mouse is down
linia.X1 += dX;
linia.X2 += dX;
linia.Y1 += dY;
linia.Y2 += dY;
//Here comes the end of the if
startPoint = pos; 
```

希望这对您有所帮助！

假设您想通过 2 个步骤更改位置：

线是这样的：

X1 = 70

X2 = 80

Y1 = 70

Y2 = 80

您将鼠标移动 x=1 和 y=1

位置 = (71, 81)

起点 = (70, 80)

**1.步骤：**

X1 = 70 + 71 - 70 = 71 与其他值相同

这条线是这样的：

X1 = 71

X2 = 81

Y1 = 71

Y2 = 81

**现在将 startPoint 的值设置为 pos 的值：**

**起点 = (71, 81)**

**2.步骤**

startPoint = (71, 81) pos = (72, 82) //你移动鼠标 1 和 1

这将得到这样的一行：

X1 = 71 + 72 - 71 = 72

X2 = 71 + 72 - 71 = 72

Y1 = 81 + 82 - 81 = 82

Y2 = 81 + 82 - 81 = 82

等等...

# javascript - Alternative to Eco templates with multiline

> ID：16213263
> 
> 赞同：0
> 
> 时间：2013-04-25T11:14:20.467
> 
> 标签：javascript, templates, backbone.js, ruby-on-rails-3.2, coffeescript

I used Eco templates for some time, but I don't like at all. I have searched some alternatives in Google, but I don't get useful information.

I am looking for templates with this features:

1.  Multiline
2.  Clear syntax
3.  Rails 3.x supported
4.  CoffeeScript supported
5.  Backbone supported

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:34:30.377

我会推荐 haml-coffee，集成得非常好，或者可能是玉 :)。

# mysql - PHP MySQL Hierarchy Data group_concat

> ID：16213264
> 
> 赞同：0
> 
> 时间：2013-04-25T11:14:29.253
> 
> 标签：mysql, group-concat

any help would be amazing. currently got the following MySQL query:

```
SELECT 
  GROUP_CONCAT( sp.`slug` SEPARATOR  '/' ) 
FROM  
  `category` sn,  `category` sp 
WHERE 
  sn.lft BETWEEN sp.`lft` AND sp.`rgt` 
  AND sn.`id` =3 
ORDER BY 
  sp.`lft` ASC; 
```

Without the group_concat function this returns the desired results in the correct order. as soon as I apply group_contact the order is mashed up and incorrect. Does anyone know how to rewrite the query to give me the concatenated result desired and in the correct order?

Im at a loss on this. On a side note does anyone know how to rewrite it using the "inner join" statements as opposed to the two table names quoted next to each other as I dont understand how its joining the two tables.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:20:15.243

尝试这个：

```
SELECT 
  GROUP_CONCAT( sp.`slug` ORDER BY  sp.`lft` ASC SEPARATOR  '/' ) 
FROM  
  `category` sn,
INNER JOIN  `category` sp 
  ON sn.lft BETWEEN sp.`lft` AND sp.`rgt`
WHERE    
  sn.`id` =3 
```

# c# - How to check if column can be converted to double? (DataTable.Column.DataType)

> ID：16213265
> 
> 赞同：1
> 
> 时间：2013-04-25T11:14:31.140
> 
> 标签：c#, if-statement, types

I need simple condition to replace this (incomplete) `if` condition.

```
// i dont want to write all possible data types
if (col.DataType == typeof(int) || col.DataType == typeof(int64) ... all types)
{
    // i want to do something on numeric columns
    // (convert all numbers to double datatype)
}
else
{
    // string and other non-numbers will remain unchanged
} 
```

I was trying something like this:

```
col.DataType.IsNumeric() 
```

but there is no such method in that class.

I cant use `TryParse()` method on data because there is too much data.

**Condition must be determined only by DataTable column datatype property.**

Is there any simple method to simplify my `if`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:17:17.347

您可以像以前一样使用 DataType，也可以创建一个函数来执行此操作（请参阅此[确定 DataColumn 是否为数字](https://stackoverflow.com/questions/1725903/determine-if-datacolumn-is-numeric)）：

```
public static bool IsNumeric(this DataColumn col) {

  if (col == null)
    return false;

  // all numeric types
  var numericTypes = new [] { typeof(Byte), typeof(Decimal), typeof(Double),
        typeof(Int16), typeof(Int32), typeof(Int64), typeof(SByte),
        typeof(Single), typeof(UInt16), typeof(UInt32), typeof(UInt64)};

  return numericTypes.Contains(col.DataType);
} 
```

并使用

```
if (col.IsNumeric()) 
{
   // the column is numeric
} 
```

现在，对于您的专栏内容，您可以尝试使用`double.TryParse()`方法，如下所示：

```
double temp;
if (double.TryParse(col["Column"].ToString(), out temp))
{
  // the content can be converter and you can read it from temp variable.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:35:42.343

您还可以检查`DataColumn.DataType.Name`财产。喜欢 ：

```
string[] IntType ={"Byte","Decimal","Double","Int16","Int32","SByte",
                "Single","UInt16","UInt32","UInt64"};

static void Main(string[] args)
{
    DataTable dt = new DataTable();
    dt.Columns.Add("num", typeof(int));
    dt.Columns.Add("str", typeof(string));
    Program p=new Program();
    string type = dt.Columns["num"].DataType.Name;
    if (p.IntType.Contains(type))
    {
        //True
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:52:52.123

你可以试试这个：

```
if(Microsoft.VisualBasic.Information.IsNumeric
    (
     Activator.CreateInstance(col.DataType
    )
   ) 
```

# elasticsearch - ElasticSearch faceted search for a multilingual field

> ID：16213267
> 
> 赞同：1
> 
> 时间：2013-04-25T11:14:44.050
> 
> 标签：elasticsearch, faceted-search

I have a Elasticsearch DSL query like below,

```
query = {
     "query": {"query_string": {"query": "%s" % q}},
        "facets": {"destination": {
            "terms": {"field": "destination"}}}} 
```

where my destination indexed as a multilingual field like below,

```
destination': {u'fr': u'Portland', u'en': u'Portland'} 
```

So my facets result comes empty because of this multingual issue. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:17:22.673

```
query = {
     "query": {"query_string": {"query": "%s" % q}},
        "facets": {"destination": {
            "terms": {"field": "destination.en"}}}} 
```

为我工作

# vb.net - 在 vb.net 中检测屏幕关闭

> ID：16213274
> 
> 赞同：2
> 
> 时间：2013-04-25T11:15:19.307
> 
> 标签：vb.net, events, screen, shutdown

我正在使用 vb.net 构建一个应用程序，它应该记录一些特定的用户操作，其中一个操作是屏幕关闭，有没有办法做到这一点？也许是系统事件或我可以定期检查以了解屏幕是否处于活动状态的东西。

我已经找到了一些代码来检查屏幕保护程序是否正在运行，但我想知道是否有办法检测屏幕是否被物理关闭。

# php - “service httpd reload”会重新加载新的 php.ini 设置吗？

> ID：16213275
> 
> 赞同：10
> 
> 时间：2013-04-25T11:15:19.720
> 
> 标签：php, apache, ssh, terminal

我正在尝试通过设置在 PHP 中启用速记：

```
short_open_tag = 1 
```

然后我执行：

```
service httpd reload 
```

但是更改不会生效。我需要做“service apache2 reload”吗？还是“service httpd reload”通常可以加载新的 php.ini 设置？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T11:20:01.167

你需要

```
service apache2 reload 
```

由于 php.ini 设置更改需要重新加载 apache/nginx 或任何服务器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:35:37.200

取决于发行版

基于 Fedora 的是“服务 httpd 重启” 基于 Debian 的是“服务 apache2 重启”

不确定其他发行版的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T12:50:27.393

使用 CentOS 和 Apache 2.4，您可以使用以下命令重新加载 apache 配置，包括 php.ini

```
apachectl graceful 
```

# html - 标签内容背景在 Safari 中被切断，但在 Chrome 中很好

> ID：16213278
> 
> 赞同：0
> 
> 时间：2013-04-25T11:15:28.290
> 
> 标签：html, css, tabs

我在网站的 css 选项卡内容方面遇到了一些问题。客户端刚刚要求将图像添加到背景中，我已经这样做了，它在 Chrome 和 IE 中运行良好。但是在 Safari 中，图像被截断，请参阅[http://jsfiddle.net/j9Ftx/11/](http://jsfiddle.net/j9Ftx/11/)了解我所指的内容。控制宽度的选项卡的 CSS 中必须有一些东西，但我找不到什么。

谢谢你的帮助

```
 .tabs {
    position: relative;
    margin: 40px auto;
    width: 810px;
    background-color:#FFFFFF;
    background-image:url(http://creationdev.co.uk/expressiveprint/images/parrot.png);
    background-repeat:no-repeat;
}

.tabs input {
    position: absolute;
    z-index: 1000;
    height: 40px;
    left: 0px;
    top: 40px;
    opacity: 0;
    cursor: pointer;
}
.tabs input#tab-2{
    top: 80px;
}
.tabs input#tab-3{
    top: 120px;
}
.tabs input#tab-4{
    top: 160px;
}

.tabs input#tab-5{
    top: 200px;
}

.tabs label {
    background: #1c1c1c;
    margin-top:8px;
    font-size:32px;
    font-weight:normal;
    line-height: 40px;
    height: 40px;
    position: relative;
    padding: 0 20px;
    display: block;
    width: auto;
    color: #ffffff;
    text-align: right;
    float: left;
    clear: both;
    z-index:2000;
}

.tabs label:after {
    content: '';
    background: #ffffff;
    color:#1c1c1c;
    position: absolute;
    right: -2px;
    top: 0;
    width: 2px;
    height: 100%;
}

.tabs input:hover + label {
    background: #5e5e5e;
}

.tabs label:first-of-type {
    z-index: 4;
}

.tab-label-2 {
    z-index: 3;
}

.tab-label-3 {
    z-index: 2;
}

.tab-label-4 {
    z-index: 1;
}

.tab-label-5 {
    z-index: 1;
}

.tabs input:checked + label {
    background: #c196c5;
    color:#ffffff;
    z-index: 6;
}

.content h2 {
    font-size:30px;
}

.clear-shadow {
    clear: both;
}

.content {
    background: #fff;
    position: relative;
    width: auto;
    margin: -175px 0 0 200px;
    height: 430px;
    z-index: 5;
    overflow: hidden;
}

.content div {
    position: absolute;
    top: 0;
    padding: 10px 40px;
    z-index: 1;
    opacity: 0;
    -webkit-transition: all linear 0.5s;
    -moz-transition: all linear 0.5s;
    -o-transition: all linear 0.5s;
    -ms-transition: all linear 0.5s;
    transition: all linear 0.5s;
}

.content div{
    -webkit-transform: translateY(-450px);
    -moz-transform: translateY(-450px);
    -o-transform: translateY(-450px);
    -ms-transform: translateY(-450px);
    transform: translateY(-450px);
}

.tabs input.tab-selector-1:checked ~ .content .content-1,
.tabs input.tab-selector-2:checked ~ .content .content-2,
.tabs input.tab-selector-3:checked ~ .content .content-3,
.tabs input.tab-selector-4:checked ~ .content .content-4,
.tabs input.tab-selector-5:checked ~ .content .content-5 {
    -webkit-transform: translateY(0px);
    -moz-transform: translateY(0px);
    -o-transform: translateY(0px);
    -ms-transform: translateY(0px);
    transform: translateY(0px);
    z-index: 100;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
    -webkit-transition: all ease-out 0.3s 0.3s;
    -moz-transition: all ease-out 0.3s 0.3s;
    -o-transition: all ease-out 0.3s 0.3s;
    -ms-transition: all ease-out 0.3s 0.3s;
    transition: all ease-out 0.3s 0.3s;
}

.content div h2,
.content div h3{
    color: #1c1c1c;
    text-align:left;
}
.content div p {
    font-size: 14px;
    line-height: 22px;
    text-align: left;
    margin: 0;
    color: #777;
}

    <div class="content2">
    <h3><span class="black">&nbsp;Services&nbsp;</span></h3>
    <div class="container">
            <!-- Codrops top bar -->

            <section class="tabs">
                <input id="tab-1" type="radio" name="radio-set" class="tab-selector-1" checked="checked" />
                <label for="tab-1" class="tab-label-1">Print</label>

                <input id="tab-2" type="radio" name="radio-set" class="tab-selector-2" />
                <label for="tab-2" class="tab-label-2">Direct Mail</label>

                <input id="tab-3" type="radio" name="radio-set" class="tab-selector-3" />
                <label for="tab-3" class="tab-label-3">Hand Finishing</label>

                <input id="tab-4" type="radio" name="radio-set" class="tab-selector-4" />
                <label for="tab-4" class="tab-label-4">Fullfilment</label>

                <input id="tab-5" type="radio" name="radio-set" class="tab-selector-5" />
                <label for="tab-5" class="tab-label-5">POS</label>

                <div class="clear-shadow"></div>

                <div class="content">

                    <div class="content-1">
                        <h2>Let our print capture your customers’ imagination.</h2>
                        <p>If you need creative, concise and competitively priced print then you should be talking to Expressive Print. Either supply your own artwork or make use of our full design and copy writing service. Whatever your print requirements be it brochures, inserts, questionnaires, leaflets or envelopes we can offer highly competitive prices together with outstanding print quality.  A full creative and design service is offered to compliment your existing activity or devise a fresh new look for your brand or campaign. We aim to understand your requirements and translate them into great design with strong copy while also being environmentally friendly, cost effective and delivering to schedule.</p>
                    </div>
                    <div class="content-2">
                        <h2>Excellent response rates and return on investment.</h2>
                        <p>Expressive Print handle low and high volume direct mail campaigns making use of the latest developments to ensure your mailings are relevant and results driven. Better targeted Direct Mail is seeing a resurgence as an apathy to email communication grows especially in the B2B sector. We strive to ensure that the data is carefully selected and targeted and visual presentation is to the highest standard to ensure excellent response rates and return on investment for each campaign.</p>
                    </div>
                    <div class="content-3">
                        <h2>Hand Finishing</h2>
                        <p>Many campaigns require some element of hand finishing before mailing such as the attachment of a business cards or a CD. Expressive Print will implement the application most suitable for your mail piece selecting the correct tack and materials to ensure a good visual finish. Don’t allow your mailing piece to be spoilt at the final stage by unsympathetic finishing.</p>
                    </div>
                    <div class="content-4">
                        <h2>Fullfilment</h2>
                        <p>Whatever your project involves Expressive Print are experienced in delivering it for you.  From daily pick and pack requirements to contract packing and bulk despatches we have the ideal space to work in - clean, modern and secure premises with packing teams who are all fully CRB checked, robust stock control systems, comprehensive insurance cover and expertise. This ensures the right things are packed in the right order and sent the right people – simple but critical. Selecting a fulfilment partner who has strong systems with full accountability and customer service resource is vital to ensure your product’s success.</p>
                    </div>

                    <div class="content-5">
                        <h2>POS & Kit Collation</h2>
                        <p>Handling large despatch projects for Education, Banking and the Drinks industry, Expressive Print ensure that each project has it’s own documented process system with full track and trace on all deliveries.  We source and supply specialist packaging for those fragile or odd shaped items and fully test packs and packaging prior to despatch to ensure delivery in pristine condition.</p>
                    </div>
                </div></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:18:15.397

****现在像这样****定义****你的** `.tabs` `background-size: 25% 100%`**

 ****```
.tabs {
    background-size: 25% 100%; // add this line and adjust background size according your layout 
} 
```

**[演示](http://jsfiddle.net/rohitazad/j9Ftx/15/)******

# android - 执行 api 调用时出错，android 应用程序崩溃

> ID：16213280
> 
> 赞同：0
> 
> 时间：2013-04-25T11:15:29.260
> 
> 标签：android

我是 android 新手，我正在尝试使用 php 进行 api 调用，我已经为它做了一个示例，它可以在另一台计算机上正常工作，但相同的应用程序包在我的笔记本电脑上的 eclipse 中出现错误。

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "Hi"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} ` 
```

听到是我的错误日志，我得到了这么多错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:21:25.063

```
//Try following way    
//List<NameValuePair> nameValuePairs 
HttpClient hc = new DefaultHttpClient();
HttpPost hp = new HttpPost(url);
UrlEncodedFormEntity obj=new UrlEncodedFormEntity(nameValuePairs);
obj.setChunked(true);
hp.setEntity(obj);
HttpResponse hr = hc.execute(hp);   
HttpEntity he = hr.getEntity(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:23:17.183

Logcat 很清楚：`Could not find a method postData(View) in the activity class`. 我猜您已经使用 xml 布局来设置按钮操作。

在这种情况下，只需更改您的

```
public void postData() {
} 
```

至

```
public void postData(View view) {
} 
```

注意：以这种方式设置按钮侦听器效率不高。

此外，您应该在另一个线程上执行网络操作 - 在主线程上使用网络将在 Android 3.0+ 上引发[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# python - Linking two items from two seperate lists together. python

> ID：16213281
> 
> 赞同：0
> 
> 时间：2013-04-25T11:15:36.443
> 
> 标签：python, list, linker

Underneath i have two lists which have been imported from a text file. I need a way in which to be able to link the lines together. so say if line1 is printed randomly I want line2 to be printed.

```
line1 = (file.readline())
line2 = (file.readline())
line3 = (file.readline())
line4 = (file.readline())
line5 = (file.readline())
line6 = (file.readline())
line7 = (file.readline())
line8 = (file.readline())
line9 = (file.readline())
line10 = (file.readline())
line11 = (file.readline())
line12 = (file.readline())
line13 = (file.readline())
line14 = (file.readline())
line15 = (file.readline())
line16 = (file.readline())
line17 = (file.readline())
line18 = (file.readline())
line19 = (file.readline())
line20 = (file.readline())
line21 = (file.readline())
line22 = (file.readline())
line23 = (file.readline())
line24 = (file.readline())
line25 = (file.readline())
line26 = (file.readline())
line27 = (file.readline())
line28 = (file.readline())
line29 = (file.readline())
line30 = (file.readline()) 

# creates an empty list and fills it with all the definitions from the file
defi = []
defi.append(line2)
defi.append(line4)
defi.append(line6)
defi.append(line8)
defi.append(line10)
defi.append(line12)
defi.append(line14)
defi.append(line16)
defi.append(line18)
defi.append(line20)
defi.append(line22)
defi.append(line24)
defi.append(line26)
defi.append(line28)
defi.append(line30)
randdef = random.choice(defi) #chooses random lines from the list 
randdefi = random.choice(defi) # "       "      "     "   "   "

#creates an empty list and fills it with all the keywords from the file
key = []
key.append(line1)
key.append(line3)
key.append(line5)
key.append(line7)
key.append(line9)
key.append(line11)  
key.append(line13)
key.append(line15)
key.append(line17)
key.append(line19)
key.append(line21)
key.append(line23)
key.append(line25)
key.append(line27)
key.append(line29)
randkey = random.choice(key) 
```

But i need to link certain lines in each list together. so they print together

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:17:28.607

只需将整个文件读入一个列表，然后使用切片将它们分成两个列表：

```
with open(filename, 'r') as inputfile:
    lines = list(inputfile)

key = lines[::2]   # every second line
defi = lines[1::2] # every second line, starting with the second 
```

您可以直接从文件中将它们配对，使用一点`itertools`魔法：

```
from itertools import tee, izip

def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b)

with open(filename, 'r') as inputfile:
    key_def_pairs = list(pairwise(inputfile)) 
```

或者直接把它变成字典：

```
with open(filename, 'r') as inputfile:
    key_def_pairs = dict(pairwise(inputfile)) 
```

但您可能需要先删除换行符：

```
from itertools import imap

with open(filename, 'r') as inputfile:
    key_def_pairs = dict(pairwise(imap(str.rstrip, inputfile))) 
```

# java - Find available "number" in a 2d array

> ID：16213282
> 
> 赞同：6
> 
> 时间：2013-04-25T11:15:37.863
> 
> 标签：java, algorithm

I have this problem that I need to solve in the most effecient way. I have a 2d array that contains the following: Everything that is a 1 is a "wall" which means you cannot go through it. 2 is the entrance where you "enter" the array or map if you like. 3 are the things we need to find. Here is an example of a map:

```
1111111
1  3131
2 11111
1    31
1111111 
```

This could be an example of an array that i need to look in. As you can see there is a 3 that is "unreachable, since it's surrounded by a wall "1". Which means that there are two available numbers in this array.

First we need to find the entrance. Since the entrance can be anywhere I need to search the entire array. I have done the following:

```
int treasureAmount = 0;
     Point entrance = new Point(0,0);
     for (int i = 0; i < N; i++) {
         for (int j = 0; j < N; i++){
             if(map[i][j] == 2){
                 entrance.x =i;
                 entrance.y =j;
             }

         } 
```

This takes O(n^2) time, and i don't really see another way to do this, since the entrance can be anywhere. However i'm not really sure how to find the available numbers effectivly and fast. I thought about while searching the arrays for the entrance i will at the same time find the all the number 3 in the array even though some might not be accessible, and after that i'm not really sure how to effectivly find which are accessible.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:40:45.860

你不能比 O(n^2) 做得更好。仅仅读取数组就需要这么多时间。但随后您可以进行深度优先搜索以在数组中找到可到达的 3。这是伪代码。

```
main()
{
    read array and mark the entrance as ent.x and ent.y and also an array threex[] and threey[] that stores all the exit position.
    boolean visited[][]; //stores whether array[i][j] is reachable or not.
    dfs(ent.x,ent.y);
    for each element in three arrays
    {
        if(visited[threex[i]][threey[i]]) print ("Reachable");
        else print("not reachable", threex[i], threey[i]);
    }
}
int dx[]={1,0,-1,0},dy[]={0,1,0,-1}; // dx[i], dy[i] tells whether to move in E,N,W,S respectively.
dfs(int x,int y)
{
    visited[x][y]=true;
    for(i=0;i<4;i++)//move in all directions
    {
        int newx=x+dx[i],newy=y+dy[i];
        //check if this is within the array boundary
        if(newx>=0&&newx<N && newy>=0&&newy<N)
        if(!visited[newx][newy] && array[newx][newy]!=1) // check if the node is unvisited and that it is pemissible
             dfs(newx,newy);
    }
} 
```

由于每个数组元素在 dfs 函数中被占用不超过一次，因此代码的复杂度为 O(n^2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:52:44.517

由于入口项和目标项都可以位于数组中的任何位置，因此您别无选择，只能搜索所有内容。因此，您的入口搜索尽可能高效，关于目标项目，我推荐[迷宫洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)。

然而，该算法的链接版本偏向于一个方向（就像它正在用水填充它，它会“向下”泛滥）。为了尽可能高效，您应该让它向各个方向扩展（就像您正在用气体填充它），例如：

```
 2
      1    212
0    101  21012
      1    212
            2 
```

数字代表扩展的迭代。扩展是在四个方向上进行的：左、右、上和下。当你到达目标item时，只需回溯到迭代索引小于1的相邻cell邻居，就可以找到最短路径，直到返回到0迭代索引——入口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:23:59.420

创建数组时，您可以保留值为 2 的坐标列表。您可以在 O(n) 中遍历该列表。

# java - BSA calculation results me Zero

> ID：16213284
> 
> 赞同：0
> 
> 时间：2013-04-25T11:15:38.243
> 
> 标签：java

```
public static int calculateBSA(double height, double grams) {
    double weightforBmi = convertGramsToPounds(grams);
    return (int) Math.sqrt(((convertCentimeterToInches(height) * weightforBmi) / 3131));
} 
```

Here is my code for converting Centimeter to Inches and Grams to Pounds.

```
private static double convertCentimeterToInches(double height) {
    return (Math.round((height / 2.54) * 100) / 100);
}

public static int convertGramsToPounds(double grams) {
   double gramsToPoundUnit = .00220462262;
   double pounds = (grams * gramsToPoundUnit);
   return (int)(Math.round(pounds * 100) / 100);
} 
```

BSA calculation results me always `Zero`. Am i doing the Math.sqrt rightly inside BSA.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:24:52.440

制作方法`calculateBSA`&`convertGramsToPounds`返回`double`而不是`int`. 由于 your`double gramsToPoundUnit = .00220462262;`小于 1，因此转换为`int`正在返回`0`，这导致了问题。

此外，由于那里`gramsToPoundUnit`的`grams`值`calculateBSA`很小（

例如：- 完成上述更改后，

> calculateBSA(103.2, 5000.4) 给出 0.37487355474941564

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:36:18.047

如果你打电话

> 计算BSA(1e4, 1e4)

它返回 5。对于相对较小的克值，convertGramsToPounds(double Gram) 返回 0，因为您将其转换为 int。类似的情况发生在 calculateBSA 和 convertCentimeterToInches 方法上。如果您可以接受双值，则可以将代码修改为：

```
public double calculateBSA(double height, double grams) {
    double weightforBmi = convertGramsToPounds(grams);
    return  Math.sqrt(((convertCentimeterToInches(height) * weightforBmi) / 3131));
}

private double convertCentimeterToInches(double height) {
    return (height / 2.54);
}

public double convertGramsToPounds(double grams) {
    double gramsToPoundUnit = .00220462262;
    double pounds = (grams * gramsToPoundUnit);
    return pounds;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:24:26.240

如果任何一个转换为整数的计算小于一，则结果将为零。

# node.js - Node.js 的沙盒插件

> ID：16213293
> 
> 赞同：7
> 
> 时间：2013-04-25T11:15:58.823
> 
> 标签：node.js, plugins

我是一个完整的 Node 菜鸟，所以如果这个问题有一个明显的答案，我深表歉意。

我正在寻找一个网络应用程序，它将运行来自不受信任的来源（即社区提交）的插件。所以我需要将这些插件锁定到一个只允许某些访问权限的沙箱中（不能写入磁盘等）。理想情况下，插件只能使用某些经过批准的节点包和 API。

这在Node中可能吗？如果是这样，您能否向我指出可以帮助我入门的软件包或文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T14:48:39.007

以下是可以帮助您的项目的一小部分列表：

*   [https://github.com/gf3/sandbox](https://github.com/gf3/sandbox)
*   [https://github.com/hflw/node-sandbox](https://github.com/hflw/node-sandbox)
*   [https://github.com/bcoe/sandcastle](https://github.com/bcoe/sandcastle)
*   [https://github.com/wearefractal/boxy](https://github.com/wearefractal/boxy)

我建议第一个（[`sandbox`](https://github.com/gf3/sandbox)），因为它更成熟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T02:51:01.313

我还将通过我的库为列表做出贡献：[https](https://github.com/asvd/jailed) ://github.com/asvd/jailed 。除了不受信任代码的沙箱（在受限制的子进程中）之外，它还提供了在沙箱内导出任何功能集的机会，从而为沙箱代码定义了自定义 API。

# javascript - 检查页面上选定的文本是否包含一些单词

> ID：16213303
> 
> 赞同：0
> 
> 时间：2013-04-25T11:16:48.367
> 
> 标签：javascript

使用下面的代码，我可以在页面上找到文本并突出显示它

```
document.designMode = "on";
if(window.find(textLine, true)){  
       document.execCommand("BackColor", false, "rgb(250, 250, 0)");
   textSelection.collapseToEnd();
}
document.designMode = "off"; 
```

但我的要求是在所选文本中查找文本。即，如果所选文本中存在某些单词，我想突出显示某些文本。使用该`surroundCountents()`方法，我可以用一些 DIV 元素包装初始文本，然后尝试搜索 HTML，但我正在寻找类似于上面代码的解决方案。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:47:31.353

不支持使用 window.find 查找已从上一个 window.find 中选择的文本，因为 window.find 方法（据我所见）不支持在范围或选择中搜索。

API在这里：[http ://help.dottoro.com/ljkjvqqo.php](http://help.dottoro.com/ljkjvqqo.php)

我怀疑您可以再次使用 window.find 作为您的关键字并检查插入符号的位置等来验证结果是否在原始结果中，但乍一看似乎效率低下。看看选择 API 和范围... [https://developer.mozilla.org/en/docs/DOM/Selection](https://developer.mozilla.org/en/docs/DOM/Selection) 您可以运行 2 window.find 并比较范围以查看第二个在第一个范围内。

我认为一个简单的 javascript 文本搜索对于您想要的内容将非常有效和快速。

# php - 如何保护此用户 cookie？

> ID：16213309
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:13.797
> 
> 标签：php, mysql, security, cookies, session-cookies

所以我有一个用户登录网络，它会在登录时创建一个 cookie。我需要知道如何保护它，因为目前我可以编辑 cookie，它可以让我访问我将登录 cookie 更新为的任何用户名。这是现有的代码：

```
<?
$username = $_REQUEST['username'];
$goto = $_REQUEST['goto'];
$expdate = time() + 864000;

setcookie('loggedin',"$username",$expdate, "/");

echo "<META HTTP-EQUIV=Refresh CONTENT=\"0; URL='/$goto.html'\">";
?> 
```

任何帮助是极大的赞赏！谢谢！总的来说，我对 cookie 和 PHP 还很陌生。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T11:25:55.690

在 PHP 中，设置 cookie 的参数是通过“setcookie”函数上的一些可选参数来完成的：

```
setcookie( name, value, expire, path, domain, secure, httponly);

// Open
setcookie( 'UserName', 'Bob', 0, '/', '.example', false, false);

// Locked Down
setcookie( 'UserName', 'Bob', 0, '/forums', 'www.example.com', isset($_SERVER["HTTPS"]), true); 
```

# ruby-on-rails - 这是生成销售报告/分析的有效方式吗？

> ID：16213311
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:16.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个应用程序，我可以在其中接收和提取来自多个来源的每日销售报告。所有的结构都不同，所以我在单独的表中存储到我的 Postgres 数据库中。

我目前正在做这样的事情来迭代一个报告源的过去 30 天的销售情况，它似乎工作得很好。我担心的是，当我添加其他报告源时，这将是多么高效和可扩展，因为我目前的结构化方式意味着我必须为每个新源添加和重复大量代码。

```
<% from = Date.today - 30 %> #30 days ago
<% to = Date.today %> #Today
<% step_date = from %> 

<% source_one_chart_data = [] %> #Initialise empty array to later pass to JS Chart library

<% begin %>
    <% count = @product.sales_source_one.total.where(:report_date => step_date).count %> #check if there are any sales for this product on the current step date
        <% if count != 0 %>
            <% sale = @product.sum_total_net_by_day(step_date) %>
            <% source_one_chart_data.push(sale.to_s) %> #Push sales total to array if sales exist on that date
        <% else %>
            <% source_one_chart_data.push("0") %> #Otherwise push a zero into array so all 30 days map to a value
        <% end %>

    <% step_date += 1.day %> #Increase step_date by 1 on each iteration of the loop
<% end while step_date <= to %> #Stop loop when we reach to date 
```

任何人都可以就如何有效地引入额外的销售来源而无需重复代码提供任何指导吗？此外，如果我可以将步骤从日更改为周/月/年并让它相应地计算销售额，那就太好了；因此，如果每天报告销售来源并且步骤是周，它将汇总步骤周中出现的所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:58:25.153

为什么您的视图中有所有这些代码？您应该将大部分内容移至您的模型/控制器。

```
def process_chart_data
  from = 1.month.ago.to_date
  to = Date.today
  step_date = from
  chart_data = []

  while step_date <= to
    sales_total = sales_source_one.total.where(report_date: step_date).count
    if sales_total.zero?
      chart_data.push(0)
    else
      sale = sum_total_net_by_day(step_date)
      chart_data.push(sale.to_s)
    end
    step_date += 1
  end

  return chart_data
end 
```

上面可能会进一步重构，但现在如果你把它放在你的`Product`模型中，然后在你的控制器中，你可以这样做：

```
@product = Product.find(params[:id]) # or whatever
@chart_data = @product.process_chart_data 
```

然后在您看来，您可以使用`@chart_data`.

将该代码移动到一个方法中还可以让您更快地更新它，假设我希望用户控制检索多远的记录：

```
def process_chart_data(start_date)
  from = start_date
  ...
end 
```

在控制器中：

```
@product = Product.find(params[:id])
@chart_data = @product.process_chart_data(params[:start_date]) 
```

# ruby-on-rails-3 - “flying-sphinx start”导致 Faraday::Error::ParsingError（用于内部服务器错误响应）

> ID：16213313
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:18.047
> 
> 标签：ruby-on-rails-3, heroku, thinking-sphinx

我在重新索引或重新启动heroku上的飞行狮身人面像时遇到错误

```
Running `flying-sphinx start` attached to terminal... up, run.8515/app/.bundle/gems/ruby/1.8/gems/json-1.7.5/lib/json/common.rb:155:in `parse': 757: unexpected token at
'<!DOCTYPE html> (Faraday::Error::ParsingError)
<html>
  <head>
  <title>We're sorry, but something went wrong (500)</title>
  <style type="text/css">
  body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }
  div.dialog {
  width: 25em;
  padding: 0 4em;
  margin: 4em auto 0 auto;
  border: 1px solid #ccc;
  border-right-color: #999;
  border-bottom-color: #999;
 }
 h1 { font-size: 100%; color: #f00; line-height: 1.5em; }
 </style>
  </head>

<body>
<!-- This file lives in public/500.html -->
 <div class="dialog">
<h1>We're sorry, but something went wrong.</h1>
<p>We've been notified about this issue and we'll take a look at it shortly.</p>
</div>
</body> 
```

我已经使用命令 heroku run flying-sphinx restart 重新启动了思考狮身人面像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T17:34:17.700

看起来您已经运行了一个搜索守护程序。你需要先用思考狮身人面像杀死它，然后重试你的飞行狮身人面像重新索引或重新启动。

这是一个答案，它将向您展示如何：[部署后思考 Sphinx - ThinkingSphinx::SphinxError (unknown local index 'user_core' in search request)：](https://stackoverflow.com/questions/16886364/thinking-sphinx-after-deployment-thinkingsphinxsphinxerror-unknown-local-in)

# javascript - jQuery 循环插件似乎首先显示第二张图片

> ID：16213316
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:24.830
> 
> 标签：javascript, jquery, html

我使用 cycle.js 插件来制作幻灯片，它非常轻量级并且是一个很棒的插件。

但是，我首先使用的图像没有首先显示，它首先显示第二张图像，这是一个问题，因为幻灯片下方有一个导航。

问：

```
$('#slideShow').after('<div id="ssnav">').cycle({ 
                    delay: -12000,
                    next:   '#next2', 
                    prev:   '#prev2',
                    timeout:  8000,
                    pager: '#ssnav',
                 }); 
```

HTML结构：

```
<div>
    <img src="#_" />
    <p>text</p>
</div>
<div>
    <img src="#_" />
    <p>text</p>
</div>
<div>
    <img src="#_" />
    <p>text</p>
</div> 
```

你得到了图片，但它首先显示了第二个 div - 我该如何抵消这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T05:19:07.573

问题出在您使用的“延迟”选项中：延迟：第一次转换的额外延迟（以毫秒为单位）（提示：可以为负）

当您删除它时，幻灯片将从第一个开始。

[您可以从此链接](http://jquery.malsup.com/cycle/options.html)检查带有小描述的选项

# python - 错误：object.__new__() 没有参数

> ID：16213318
> 
> 赞同：1
> 
> 时间：2013-04-25T11:17:27.163
> 
> 标签：python, django, django-models

我收到以下消息， *这个以前可以工作*。我删除了下面的 .delay 函数只是为了生成消息，因为这是一项任务，但通常它看起来像**ProcessRequests.delay.(batch)**

**object._ *new* _() 不带参数**

```
if request.method == 'POST':                               
    batches = Batch.objects.for_user_pending(request.user) 
    for batch in batches:                                  
        ProcessRequests(batch)   #ProcessRequests.delay is normally used here                          
        batch.complete_update() 
```

**任务：**

```
class ProcessRequests(Task):
    name = "Request to Process"
    max_retries = 1
    default_retry_delay = 3

    def run(self, batch):
        for e in Contact.objects.filter(contact_owner=batch.user, group=batch.group):
            msg = Message.objects.create(
                recipient_number=e.mobile,
                content=batch.content,
                sender=e.contact_owner,
                billee=batch.user,
                sender_name=batch.sender_name
            )
            gateway = Gateway.objects.get(pk=2)
            msg.send(gateway) 
```

完整错误：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/sms/process

Django Version: 1.5.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.humanize',
 'south',
 'sms',
 'debug_toolbar')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'async_messages.middleware.AsyncMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File "/Users/user/Documents/workspace/s/django-env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/user/Documents/workspace/s/django-env/lib/python2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  25\.                 return view_func(request, *args, **kwargs)
File "/Users/user/Documents/workspace/s/sms/views.py" in process_all
  214\.             ProcessRequests(batch)

Exception Type: TypeError at /sms/process
Exception Value: object.__new__() takes no parameters 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:21:36.173

看起来您正在尝试使用参数实例化`ProcessRequests`该类，但该类没有带参数的构造函数，因此出现错误。

我觉得你只需要改变...

```
ProcessRequests(batch) 
```

...到...

```
ProcessRequests().run(batch) 
```

...但它是否会做你想要的取决于`Task`类的定义。

# c++ - 改进 CUDA 中的异步执行

> ID：16213322
> 
> 赞同：4
> 
> 时间：2013-04-25T11:17:35.727
> 
> 标签：c++, cuda, gpu, gpgpu

我目前正在编写一个使用 CUDA API 在 GPU 上执行大型模拟的程序。为了提高性能，我尝试同时运行我的内核，然后再次将结果异步复制到主机内存中。代码大致如下：

```
#define NSTREAMS   8
#define BLOCKDIMX  16
#define BLOCKDIMY  16

void domainUpdate(float* domain_cpu,       // pointer to domain on host
                  float* domain_gpu,       // pointer to domain on device
                  const unsigned int dimX,
                  const unsigned int dimY,
                  const unsigned int dimZ)
{
    dim3 blocks((dimX + BLOCKDIMX - 1) / BLOCKDIMX, (dimY + BLOCKDIMY - 1) / BLOCKDIMY);
    dim3 threads(BLOCKDIMX, BLOCKDIMY);

    for (unsigned int ii = 0; ii < NSTREAMS; ++ii) {

        updateDomain3D<<<blocks,threads, 0, streams[ii]>>>(domain_gpu,
                                                           dimX, 0,  dimX - 1, // dimX, minX, maxX
                                                           dimY, 0,  dimY - 1, // dimY, minY, maxY
                                                           dimZ, dimZ * ii / NSTREAMS,  dimZ * (ii + 1) / NSTREAMS - 1); // dimZ, minZ, maxZ

        unsigned int offset = dimX * dimY * dimZ * ii / NSTREAMS;
        cudaMemcpyAsync(domain_cpu + offset ,
                        domain_gpu+ offset ,
                        sizeof(float) * dimX * dimY * dimZ / NSTREAMS,
                        cudaMemcpyDeviceToHost, streams[ii]);
    }

    cudaDeviceSynchronize();
} 
```

总而言之，它只是一个简单的 for 循环，循环所有流（在本例中为 8 个）并划分工作。这实际上是一个更快的交易（高达 30% 的性能提升），尽管可能比我希望的要少。我在 Nvidia 的 Compute Visual Profiler 中分析了一个典型的循环，执行如下：

![Compute Visual Profiler 中的 CUDA API 跟踪](https://i.stack.imgur.com/FMUyB.png)

从图中可以看出，内核确实重叠，尽管同时运行的内核不会超过两个。我对不同数量的流和不同大小的模拟域尝试了同样的事情，但情况总是如此。

所以我的问题是：有没有办法鼓励/强制 GPU 调度程序同时运行两个以上的东西？或者这是依赖于无法在代码中表示的 GPU 设备的限制？

我的系统规格是：64 位 Windows 7，和 GeForce GTX 670 显卡（即 Kepler 架构，计算能力 3.0）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:30:37.197

仅当 GPU 有剩余资源可运行第二个内核时，内核才会重叠。一旦 GPU 完全加载，并行运行更多内核没有任何好处，因此驱动程序不会这样做。

# django - Django & TastyPie：request.POST 为空

> ID：16213324
> 
> 赞同：16
> 
> 时间：2013-04-25T11:17:37.310
> 
> 标签：django, tastypie

我正在尝试使用 curl 进行 POST：

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"item_id": "1"}' http://www.mylocal.com:8000/api/1/bookmarks/ 
```

但是，request.POST 始终为空。

下面是我的模型资源代码：

```
class BookmarkResource(ModelResource):

    class Meta:
        queryset = Bookmark.objects.all()    
        resource_name = 'bookmarks'
        fields = ['id', 'tags']
        allowed_methods = ['get', 'post', 'delete', 'put']
        always_return_data = True
        authorization= Authorization()
        include_resource_uri = False

    def determine_format(self, request):
        return "application/json"

    def obj_create(self, bundle, **kwargs):

        request = bundle.request

        try:
            payload = simplejson.loads(request.POST.keys()[0])
        except:
            payload = simplejson.loads(request.POST.keys()) 
```

有人知道我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-25T13:30:27.413

从 Django 1.5 开始，`request.POST`不再包含非表单数据。他们现在在[`request.body`](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.body).

[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:04:59.570

我不是 cURL 期望，而是从 Chrome 开发工具中复制一个 POST 请求，我`--data`看起来如下：

`--data "foo=bar&bar=foo"`

因此，您可能希望将命令更改为：

`--data item_id="1"`

**旁注：** 我强烈推荐以下任一 Chrome 应用程序来发出 HTTP 请求：

[高级 REST 客户端](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo?utm_source=chrome-ntp-launcher)或[开发 HTTP 客户端](https://chrome.google.com/webstore/detail/dev-http-client/aejoelaoggembcahagimdiliamlcdmfm?utm_source=chrome-ntp-launcher)

此外，如果您可以在浏览器中进行调用（表单提交等），那么在 Chrome 开发工具网络面板中，您可以将请求复制为 cURL 命令（右键单击它）

# android - 如何限制 APK 不安装在 Android Emulator/Simulator 中，而是安装在真实设备中？

> ID：16213326
> 
> 赞同：11
> 
> 时间：2013-04-25T11:17:42.857
> 
> 标签：android, android-emulator, apk

希望您知道，可以借助 Astro 文件管理器等应用程序将安装在 Android 设备中的应用程序备份并存储为可安装文件（作为 APK 文件）。同样的 apk 也可以安装在 android 模拟器中。因此，其他人有机会轻松挖掘已安装应用程序的文件，如数据库、共享首选项等。

有没有办法只允许在真实设备中安装而不是在模拟器中安装？？？

我知道如果它是 ROOTED 设备，我们可以像在模拟器中一样访问应用程序的数据。即使我想知道我们是否可以限制在模拟器中安装 apk。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-12-14T07:24:05.013

使用这个功能：

```
public static boolean isEmulator() {
    return Build.FINGERPRINT.startsWith("generic")
            || Build.FINGERPRINT.startsWith("unknown")
            || Build.MODEL.contains("google_sdk")
            || Build.MODEL.contains("Emulator")
            || Build.MODEL.contains("Android SDK built for x86")
            || Build.MANUFACTURER.contains("Genymotion")
            || (Build.BRAND.startsWith("generic") && Build.DEVICE.startsWith("generic"))
            || "google_sdk".equals(Build.PRODUCT);
} 
```

为此：

```
if (isEmulator()) {
   // emulator
} else {
   //not emulator
} 
```

**我的建议：**

从 github试试[这个。](https://github.com/framgia/android-emulator-detector)

易于检测的android模拟器

> *   检查 Device Farm 中的真实设备 ( [https://aws.amazon.com/device-farm/](https://aws.amazon.com/device-farm/) )
> *   蓝叠
> *   Genymotion
> *   安卓模拟器
> *   安迪 46.2.207.0
> *   逍遥游
> *   Nox 应用播放器
> *   播放器
> *   ......

**如何使用示例：**

```
EmulatorDetector.with(this)
                .setCheckTelephony(true)
                .addPackageName("com.bluestacks")
                .setDebug(true)
                .detect(new EmulatorDetector.OnEmulatorDetectorListener() {
                    @Override
                    public void onResult(boolean isEmulator) {

                    }
                }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T11:25:56.367

没有通用的方法来做到这一点。毕竟，模拟器的工作是尽可能地表现得像真实设备一样，包括模拟来自摄像头、GPS 传感器等的输入。

如果您将清单设置为依赖于模拟器通常不支持的某些硬件，您可能会有所收获。例如：

```
<uses-feature android:name="android.hardware.sensor.accelerometer" 
              android:required="true" /> 
```

但实际上，如果您想防止人们在您的应用程序存储的数据中四处寻找，最好的解决方案是对其进行加密或混淆。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T11:26:05.480

目前无法阻止 APK 安装在模拟器上。（过去可以通过向应用程序添加传感器要求来实现，但现在模拟器也可以模拟）

但是，在运行时，您应该能够使用以下检查来验证您的应用程序是否在模拟器上运行：

```
if (android.os.Build.MODEL.equals(“google_sdk”)) {
   // emulator
} else {
   //not emulator
} 
```

您可以在创建数据库和 SharedPreference 文件等之前进行此检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-25T08:07:28.190

@Saeed 的 Xamarin 版本

```
 public static bool isEmulator()
        {
            return Build.Fingerprint.StartsWith("generic")
                    || Build.Fingerprint.StartsWith("unknown")
                    || Build.Model.Contains("google_sdk")
                    || Build.Model.Contains("Emulator")
                    || Build.Model.Contains("Android SDK built for x86")
                    || Build.Manufacturer.Contains("Genymotion")
                    || (Build.Brand.StartsWith("generic") && Build.Device.StartsWith("generic"))
                    || "google_sdk".Equals(Build.Product);
        } 
```

为此：

```
if (isEmulator()) {
   // emulator
} else {
   //not emulator
} 
```

# c# - 使用 C#.net 在同一目录中使用 Web 服务创建文本文件

> ID：16213327
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:46.047
> 
> 标签：c#, asp.net

我想在文件所在的同一目录中使用 C#.net 创建一个文本文件。解决办法是什么？当我尝试创建时，出现错误“访问路径 'C:\Windows\SysWOW64\inetsrv\test.txt' 被拒绝”。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:21:14.627

您不会尝试在与 Web 服务目录相同的目录中创建文件，因为当您创建例如 new StreamWriter("test.txt") 时，它会在进程的当前**工作**目录中创建文件 (ASP.网络/IIS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:24:35.660

使用 Server.MapPath('~\test.text')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:26:21.670

这可能是由不允许您在“c”驱动器上创建文件的 Windows 权限引起的。或者文件夹具有分配给它们的某些访问权限。尝试将权限或权限更改为另一个文件以找出答案。

# jwplayer - jwPlayer 6 寻找精确位置

> ID：16213330
> 
> 赞同：2
> 
> 时间：2013-04-25T11:17:51.610
> 
> 标签：jwplayer, rtmp, wowza, m3u8

无论关键帧间隔如何，是否有可能以某种方式让 jwPlayer 6 寻找视频中的确切位置？

我承认这可能需要它必须转到上一个关键帧并从那里加载，但我希望它跳过那几秒钟，只在我指定的那一秒开始。

我们目前正在使用 Wowza 进行流式传输。

如果响应涉及在我想要的位置注入关键帧 - 是否有任何工具可以为 mp4 视频做到这一点？例如“promotetokeyframe videofile.mp4 12.0”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:55:08.643

您可以使用我们的 API 和 jwplayer().seek(); 但我们只寻求可用的关键帧。API 参考在这里，如果你需要它 - [http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference](http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference)

# java - Android UIAutomator：setAsHorizo ntalList() 抛出 noSuchMethodError

> ID：16213331
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:54.030
> 
> 标签：java, android, testing, nosuchmethoderror, android-uiautomator

我在三星 Galaxy SII 上运行 android 版本 4.1.2。我最近开始使用 UIAutomator 来测试我的用户界面。问题是，每次我尝试在手机上运行测试时，我都会在 UIScrollable 对象上使用的方法 setAsHorizo​​ntalList() 上得到 NoSuchMethodError。Eclipse 确实识别该方法并且它不会给出编译错误。

```
 private void turnOffNetwork() throws UiObjectNotFoundException {
        getUiDevice().pressHome();

        UiObject allAppsButton = new UiObject(new UiSelector().description("Apps"));
        allAppsButton.clickAndWaitForNewWindow();
        UiObject appsTab = new UiObject(new UiSelector().text("Apps"));
        appsTab.click();
        UiScrollable appViews = new UiScrollable(new UiSelector().scrollable(true));
        appViews.setAsHorizontalList();
        UiObject settingsApp = appViews.getChildByText(new UiSelector().className(android.widget.TextView.class.getName()), "Instellingen");

        settingsApp.clickAndWaitForNewWindow();

        UiObject switchObject = new UiObject(new UiSelector().className(android.widget.Switch.class.getName()));

        if (switchObject.isChecked()) {
            switchObject.click();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T02:56:42.510

不幸的是，setAsHorizo​​ntalList() 函数只能在 4.2.2 (API 17) 设备上运行，不能在 API 16 上运行，您可以在模拟器或具有 API 17 的平板电脑上尝试。几天前我很难学会

# jquery - 如何检查父母的父母的ID等于

> ID：16213332
> 
> 赞同：0
> 
> 时间：2013-04-25T11:17:54.077
> 
> 标签：jquery

```
<ul id="productmenu">
    <li>
      <a ref="#"></a>
    </li>
</ul> 
```

如何检查链接的父级是否有一个 id =“productmenu”？我尝试使用 PrentNode，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:19:00.853

```
var pid = $(this).closest('ul').attr('id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:22:41.820

```
if($(this).closest("ul").attr("id") == "productmenu"){
} 
```

# javascript - Calculate Number of days between two dates excluding sundays and an array of holidays in Javascript

> ID：16213333
> 
> 赞同：1
> 
> 时间：2013-04-25T11:17:57.083
> 
> 标签：javascript, arrays

How to Calculate business days between two dates in Javascript.

Say

```
Date 1 : 04-25-2013
Date 2 : 05-10-2013

Holidays : ["04-27-2013","05-03-2013"] 
```

I want total number of days excluding holidays if any exists between these two dates and excluding sundays if any.

I have tried but I can't be able to do it for holidays array.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:04:44.960

您需要做的是检查一天是否在您的开始和结束日期之间，如果为*true*则减去一天。然后，当您从一个日期到另一个日期时，您需要为每一天`0`（*星期日）添加一天。*

此答案使用*UTC*时间，因此不必担心夏令时/时区等。

```
//                    yyyy-MM-dd hh:mm:ss
var start = new Date('2013-04-25T00:00:00Z'),
    end   = new Date('2013-05-10T00:00:00Z'),
    holiday = [
        new Date('2013-04-27T00:00:00Z'),
        new Date('2013-05-03T00:00:00Z')
    ], i = holiday.length,
    n_days = 0;
while (i--) { // loop over holidays
    if (holiday[i] >= start)
        if (holiday[i] <= end)
            n_days = n_days - 1; // day holiday within dates
}
while (start <= end) {
    if (start.getUTCDay()) n_days = n_days + 1; // not sunday
    start.setUTCHours(24); // add a day
}
console.log(n_days); // 12 
```

我没有检查这是否在一天前结束。您可以通过使用每个来减少内存占用`.valueOf()`，除非`start`我们使用实际的*Date*方法。此外，您可能还想检查假期是否不是*Sunday*。

* * *

获取两个日期之间的天数（不包括*Sundays*）的另一种方法是

```
n_days = (end - start) / 86400000; // time difference in days
i = n_days - start.getUTCDay(); // trim to first Sunday
i = i - i % 7; // trim to last Sunday
n_days = n_days - i / 7; // subtract Sundays 
```

这样可以省去每天循环的麻烦。在此之后，您将使用与上述相同的检查来删除假期（请记住重新设置`i`为`holiday.length`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:51:29.473

```
diff=endDate-startDate;
var holidays=new Array("04-28-2013","05-22-2013","06-28-2013");
idx_holidays=0;
num_holidays=0;
while(idx_holidays < holidays.length)
   {
       holiday=new Date(holidays[idx_holidays]);
       if(diff>holiday-startDate)
           num_holidays++;
       idx_holidays++;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:45:24.923

/* 有多种方法可以做到这一点。

您可以将假期和周末的日期放在一个数组中。

通过过滤数组，您可以从

两个日期之间的实际天数，

或在您将工作日添加到开始日期时考虑它们。

当您跨越多年时，它会变得更加复杂

具有不同的假期数组，但这就是计算机的用途... */

```
if(!Array.prototype.filter){
    Array.prototype.filter= function(fun, scope){
        var T= this, A= [], i= 0, itm, L= T.length;
        if(typeof fun== 'function'){
            while(i<L){
                if(i in T){
                    itm= T[i];
                    if(fun.call(scope, itm, i, T)) A[A.length]= itm;
                }
                ++i;
            }
        }
        return A;
    }
}
Date.prototype.dayOfYear= function(){
    var j1= new Date(this);
    j1.setMonth(0,0);
    return  Math.round((this-j1)/8.64e7);
}

// this covers a few years of federal holidays:

var holidates={
    y2012:[1, 2, 16, 51, 149, 186, 247, 282, 316, 317, 327, 360],
    y2013:[1, 21, 49, 147, 185, 245, 287, 315, 332, 359],
    y2014:[1, 20, 48, 146, 185, 244, 286, 315, 331, 359],
    y2015:[1, 19, 47, 145, 184, 185, 250, 285, 315, 330, 359],
    y2016:[1, 18, 46, 151, 186, 249, 284, 316, 329, 360, 361],
    y2017:[1, 2, 16, 20, 51, 149, 185, 247, 282, 314, 315, 327, 359],
    y2018:[1, 15, 50, 148, 185, 246, 281, 315, 316, 326, 359],
    y2019:[1, 21, 49, 147, 185, 245, 287, 315, 332, 359],
    y2020:[1, 20, 48, 146, 185, 186, 251, 286, 316, 331, 360],
    y2021:[1, 18, 20, 46, 151, 185, 186, 249, 284, 315, 329, 358, 359],
    y2022:[1, 17, 52, 150, 185, 248, 283, 315, 328, 359, 360, 365],
    y2023:[1, 2, 16, 51, 149, 185, 247, 282, 314, 315, 327, 359]
}

// return an array of weekends and holidays for a given year, 
// or the current year. Each element is the day of the year,
// Jan 1 is 1.

function getOffdays(y){
    if(typeof y!= 'number') y= new Date().getFullYear();
    var offdays= [], i= 0, firstwk, lastwk, H= holidates['y'+y].slice(0);
    var d= 1, year= new Date(y, 0, 1);
    while(year.getDay()!= 0) year.setDate(++d);
    firstwk= year.dayOfYear();
    year.setMonth(11, 31);
    d= 31;
    if(year.getDay()== 6) lastwk= year.dayOfYear();
    else{
        while(year.getDay()!= 0) year.setDate(--d);
        lastwk= year.dayOfYear();
    }
    while(firstwk<= lastwk){
        offdays.push(firstwk-1, firstwk);
        firstwk+= 7;
    }
    if(offdays[0]== 0) offdays.shift();
    if(H) offdays= offdays.concat(H);
    return offdays.sort(function(a, b){
        return a-b;
    });
}

// expects two dates, 
// returns the number of business days between them

function bizDays(day1, day2){
    var dayfrom= day1, dayto= day2;
    if(day1>day2){
        dayto= day1;
        dayfrom= day2;
    }
    var offdays= 0, diff= Math.round((dayto-dayfrom)/8.64e7),
    d1= dayfrom.dayOfYear(), d2= dayto.dayOfYear(),
    y1= dayfrom.getFullYear(), y2= dayto.getFullYear();

    if(y1<y2){
        offdays= getOffdays(y1).filter(function(d){
            return d>= d1;
        }).length;
        while(y1+1<y2){
            offdays+= getOffdays(++y1).length;
        }
        offdays+= getOffdays(y1).filter(function(d){
            return d<= d2;
        }).length;
    }
    else{
        offdays= getOffdays(y1).filter(function(d){
            return d>= d1 && d<= d2;
        }).length;
    }
    return diff-offdays;
}

// expects an integer and an optional start date-
// uses the current date if no date is specified.
// returns the date that is biz business days after day1

function bizDaysAfter(biz, day1){
    var start= day1 || new Date(),
    end= new Date(day1), bdiff;

    end.setDate(start.getDate()+biz);
    bdiff= biz-bizDays(start, end);

    while(bdiff>0){
        end.setDate(end.getDate()+bdiff);
        bdiff= biz-bizDays(start, end);
    }
    return end;
}

//Some testing:

var D1= new Date(2013, 3, 25), D2= new Date(2013, 4, 15), 
days=14,
s1=D1.toLocaleDateString(), s2=D2.toLocaleDateString();

['Business days between '+ s1+' and\n'+s2+': '+bizDays(D1,D2)+' days.',
days+' business days after '+s1+':\n'+
bizDaysAfter(days,D1).toLocaleDateString()].join('\n\n');

/*  returned value: (String)
Business days between Thursday, April 25, 2013 and
Wednesday, May 15, 2013: 14 days.

14 business days after Thursday, April 25, 2013:
Wednesday, May 15, 2013
*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T06:41:15.337

```
//days count
var days_count = 0;

//start date 
var start = new Date("10/01/2017");

//end date
var end = new Date("10/21/2017");

//holidays array
var date_array = [ new Date('2017-01-26'), new Date('2017-03-13'), new 
Date('2017-03-29'), new Date('2017-08-15'), new Date('2017-08-25'), new 
Date('2017-10-02'), new Date('2017-10-19'), new Date('2017-12-25')];

while(start <= end){
    // 0 = Sunday and 6 = Saturday 
    if(start.getDay() > 0 && start.getDay() < 6){
        days_count = days_count + 1;
        for(var dat in date_array){
        var a = date_array[dat];
        a.setHours(0,0,0,0);
            if(a.getTime() == start.getTime()){
                days_count = days_count - 1;
            }
        }
    }
    var newDate = start.setDate(start.getDate() + 1);
    start = new Date(newDate);
}
console.log(days_count); 
```

# php - 发送带有表单的画布，创建 PNG 并命名

> ID：16213340
> 
> 赞同：0
> 
> 时间：2013-04-25T11:18:10.457
> 
> 标签：php, javascript, html, forms, canvas

我打算将画布图像与表单信息一起发送到服务器。然后，这将保存一个以表单中的信息命名的 PNG。

目前，写入的 PNG 无法打开，只是一个 0 kb 的杂乱文件。

完整的网站在[这里](http://www.lovetriangles.co.uk/indexPHPtest.html)

HTML - 提交时写入信息并激活 javascript 的表单

```
<form action="PHPtestupload.php" method="post">
  Name <input type="text" name="name" value="" style="width:230px;  margin-left: -160px; font-size:1em; "/>
  Email <input type="email" name="email" value="" style="width:230px;  margin-top: 12px; margin-left: -160px; font-size:1em; "/>

  <input type="submit" onclick="postImagePlusForm();" value="Submit" style=" opacity:1; -webkit-appearance: none; width:100px; height:50px; margin-left: -50px;">
</form> 
```

JS

```
 // sends image to server
    // serialize your canvas
    var dataURL=document.getElementById('colors_sketch').toDataURL('image/png');

    // serialize your form
    var str = $("form").serializeArray();

    // wrap both in an object
    var package={ formData: str, imageDataURL: dataURL }

    // ajax it 
    postImagePlusForm();

    function postImagePlusForm(){
    $.ajax({  
     type: "POST",  
     url: "PHPtestupload.php",  
     data: package,  
     success: function(value) {  
        // ...we have success!
    }
   });
  } 
```

PHP

```
 $dataURL = $_POST["imageDataURL"];
    $dataURL = str_replace('data:image/png;base64,', '', $dataURL);
    $dataURL = str_replace(' ', '+', $dataURL);
    $image = base64_decode($dataURL);
    $filename = 'newImage.png';
    file_put_contents('image/' . $filename, $image);

    $name = $_POST["formData"];
    $target = 'newImage.png';
    rename($target, $newName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:47:49.293

这对我有用，图像字符串取自您的网站

```
<?php
header("Content-type: image/png");
echo base64_decode("iVBORw0KGgoAAAANSUhEUgAAAlgAAAJECAYAAADKclo8AAAFXElEQVR4nO3BMQEAAADCoPVPbQ0PoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeDVA/wABLuHtHQAAAABJRU5ErkJggg==");
?> 
```

或保存在文件中

```
$image = imagecreatefromstring(base64_decode("iVBORw0KGgoAAAANSUhEUgAAAlgAAAJECAYAAADKclo8AAAFXElEQVR4nO3BMQEAAADCoPVPbQ0PoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeDVA/wABLuHtHQAAAABJRU5ErkJggg=="));
imagepng($image, "test.png"); 
```

# java - Register more than one MBean of same MBean class

> ID：16213344
> 
> 赞同：2
> 
> 时间：2013-04-25T11:18:16.953
> 
> 标签：java, jmx, mbeans

I want to register more than one MBean of same class.

I have `Hello` class implementing the `HelloMBean` interface.

Now in main i have two object of `Hello` class and I want to register them both

```
MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
ObjectName name = new ObjectName("mBeans:type=Hello");

Hello h1 = new Hello();
Hello h2 = new Hello();

mbs.registerMBean(h1, name);
mbs.registerMBean(h2, name); 
```

This throws `InstanceAlreadyExistsException` .

How can I register both h1 and h2, and using jConsole view both of them?

* * *

Reason of this,

I want to change the attribute value of both `h1 and h2 object` through `MBean`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:57:24.953

您需要为每个 MBean 注册一个唯一的名称。如果您这样做，则在注册第二个 MBean 时将不再收到异常。您必须分别管理每个 bean（即每个 Home 对象的属性是通过单独的 MBean 设置的）。

```
MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();

Hello h1 = new Hello();
Hello h2 = new Hello();

mbs.registerMBean(h1, new ObjectName("mBeans:type=Hello-1"));
mbs.registerMBean(h2, new ObjectName("mBeans:type=Hello-2")); 
```

如果您想`Hello`通过一个 MBean 同时管理两个对象（即更改一个 MBean 上的属性会导致两个 Hello 对象上的更改），您可以尝试使用[复合](http://en.wikipedia.org/wiki/Composite_pattern)Hello 对象并将其公开为 MBean。

通用接口：

```
interface IHello {
    void setAttribute(int value);
} 
```

单个 hello 对象：

```
class Hello implements IHello {
    int attribute;

    void setAttribute(int value) {
        attribute = value;
    }
} 
```

复合 hello 对象：

```
class CompositeHello implements IHello {
    IHello[] Hellos;

    CompositeHome(IHello...hellos) {
        super();
        this.hellos = hellos;
    }

    void setAttribute(int value) {
        for (IHello hello : hello) {
            home.setAttribute(value);
        }
    }
} 
```

注册复合 MBean：

```
MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();

Hello h1 = new Hello();
Hello h2 = new Hello();
CompositeHello composite = new CompositeHello(h1, h2);
mbs.registerMBean(composite, new ObjectName("mBeans:type=Hello")); 
```

# tsql - UPDATE 和 SELECT 之间的冲突

> ID：16213346
> 
> 赞同：2
> 
> 时间：2013-04-25T11:18:20.913
> 
> 标签：tsql, sql-server-2012

我有一个`DB.DATA_FEED`使用 T/SQL 过程更新的表。每分钟，针对不同的数据执行以下过程 100 次。

```
ALTER PROCEDURE [DB].[UPDATE_DATA_FEED]  
   @P_MARKET_DATE varchar(max),
   @P_CURR1 int,
   @P_CURR2 int,
   @P_PERIOD float(53),
   @P_MID float(53)
AS 

   BEGIN

      BEGIN TRY

         UPDATE DB.DATA_FEED
            SET 
               MID = @P_MID, 
               MARKET_DATE = convert(datetime,@P_MARKET_DATE, 103)
            WHERE 
               cast(MARKET_DATE as date) = 
               cast(convert(datetime,@P_MARKET_DATE, 103) as date) AND 
            CURR1 = @P_CURR1 AND 
            CURR2 = @P_CURR2 AND 
            PERIOD = @P_PERIOD

         IF @@TRANCOUNT > 0
            COMMIT WORK 

      END TRY

      BEGIN CATCH

         --error code

      END CATCH

   END

 END 
```

当用户使用应用程序时，他们也会根据下面的 SQL 从此表中读取数据。此选择可能在一分钟内运行数千次。（问号被解析器替换为适当的日期/数字）

```
DECLARE @MYDATE AS DATE;
SET @MYDATE='?'
SELECT *
FROM DB.DATA_FEED
WHERE MARKET_DATE>=@MYDATE AND MARKET_DATE<DATEADD(D,1,@MYDATE)
AND CURR1 = ?
AND CURR2 = ?
AND PERIOD = ?

ORDER BY PERIOD 
```

我有时，虽然很少，得到一个数据库锁。

使用来自[http://sqlserverplanet.com/troubleshooting/blocking-processes-lead-blocker](http://sqlserverplanet.com/troubleshooting/blocking-processes-lead-blocker)的脚本，我看到它是 SPID=58。然后我做了 DECLARE @SPID INT; 设置@SPID = 58; DBCC INPUTBUFFER(@SPID) 找到原来是我的选择语句的 SQL 脚本。

我的 SQL 代码有问题吗？我能做些什么来防止将来发生这种锁定？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T13:39:24.530

读者优先于作者，因此当有人在写作时，读者必须等待写作完成。您可以尝试两种[表提示](http://msdn.microsoft.com/en-us/library/ms187373.aspx)，一种是 NOLOCK，它读取未提交的行（脏读），另一种是 READPAST（仅读取上次提交时已提交的信息）。在这两种情况下，读取器都不会阻塞表，因此不会死锁写入器。

作家可以阻止其他作家，但如果我理解正确的话，每次执行只能写入一次，因此读者会插入写入，从而减少死锁。

希望能帮助到你。

# google-maps - J2ME 的核心 Google Map API

> ID：16213351
> 
> 赞同：0
> 
> 时间：2013-04-25T11:18:30.477
> 
> 标签：google-maps, java-me

我正在使用 http url 在 J2ME 应用程序中显示地图，但它需要更多时间，因为它会在每次刷新时绘制图像。因为 GPRS 的网速有点慢。

J2ME 是否有任何核心 Google Map API？

com.jappit.midmaps.googlemaps.GoogleMaps 是 J2ME 应用程序的授权 Google 地图库吗？

等待你的回复。

问候，

帕尔马南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:34:15.047

不，没有用于 J2ME 的核心 Google Map API。不，Jappit 库不是官方授权的产品，尽管它是基于当时可用技术的映射库的一次很好的尝试。

Jappit 库中地图更新如此**缓慢的原因是它背后的底层****静态**地图服务不太适合刷新和更新**动态**地图。

**每次**地图移动或更新时，都会下载屏幕大小的图像，从而导致大量数据流量。更好的解决方案是使用地图切片服务，实施积极的图像缓存并在其上添加覆盖对象。基本上尽一切努力避免下载更多图像。

因此，总而言之，如果您只需要**一张**地图图像，请使用[静态地图 API之类的网络服务。](https://developers.google.com/maps/documentation/staticmaps/)如果您需要响应式动态地图，请使用专用的 Java ME 映射库，例如 Java ME 的[HERE Maps API 。](http://www.developer.nokia.com/Resources/Library/HERE_Maps_Java_ME)

 **作为隶属关系的通知，我应该提到我为诺基亚工作。**

# java - 使用 eBay API 获取产品详细信息

> ID：16213355
> 
> 赞同：0
> 
> 时间：2013-04-25T11:18:47.330
> 
> 标签：java, ebay-api, ebay-lms

我可以使用**eBay 交易 API 的****getCategories()**方法获取类别层次结构的结构化数据形式。但现在我想获取 eBay 网站某些类别的产品列表。这样做的最佳方法是什么。我还需要使用哪些其他 API？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T19:31:19.060

您可以通过**Finding API使用****findItemsByCategory**调用。您最多传递 3 个类别 ID，eBay 将搜索属于这些类别的项目。此外，可以通过此调用执行以下操作。

 ***   按条件和价格等各种字段过滤结果。
*   对结果进行排序。
*   使用分页将结果拆分为多个页面。

更多信息和示例可以在 eBay 官方[文档](http://developer.ebay.com/DevZone/finding/CallRef/findItemsByCategory.html)中找到。****

# javascript - 使用预定义的方法更改对象 Javascript 的属性

> ID：16213357
> 
> 赞同：0
> 
> 时间：2013-04-25T11:18:55.353
> 
> 标签：javascript

我有一个在创建对象之前定义的函数。此预定义函数使用“this”关键字来更改对象中属性的值。在对象内部，我有一个使用一个参数调用预定义方法的方法。但是，在调用此方法并尝试打印应该更改的属性的值之后，它仍然保持不变。我该如何解决？

```
var setName = function(yourName){
    this.name = "Your name is " + yourName;
};

// create an object called `human`
var human = {
    name: "Nothing here yet",
    setHumanName: function(name) {
        setName(name);//Name should be changed now
    }
};

human.setHumanName("Emeka");
console.log(human.name); //this does not print the new value of name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:22:45.627

您应该在对象上下文中调用该函数：

```
setHumanName: function(name) {
    setName.call(this, name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:32:21.457

只需使用

```
var human = {
    name: "Nothing here yet",
    setHumanName: setName // no invocation, only assigning the function
}; 
```

*要在*对象上显式调用任意函数（以便将它们的[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)设置为该对象），请使用函数的[`call`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。

# c++ - 声明大小为 150000 的双数组时出错？

> ID：16213358
> 
> 赞同：0
> 
> 时间：2013-04-25T11:18:55.583
> 
> 标签：c++

我正在开发一个代码，其中需要声明大小为 150000 的双精度数组，并且当声明一个数组时，代码运行成功。如果我们声明两个数组，则在执行时它终止抛出异常。

```
Code is :

double a[150000];
double b[150000]; 
```

如果我们只声明a，那么它会完美执行。如果同时声明a和b，那么它就会终止。谁能建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T11:20:04.127

这两个数组[溢出堆栈](http://en.wikipedia.org/wiki/Stack_overflow)（假设它们是局部变量）。而是为数组动态分配内存，使用 a[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)为您管理内存：

```
std::vector<double> a(150000);
std::vector<double> b(150000); 
```

即使`std::vector`实例在堆栈上，也会在`std::vector`内部为堆上的数据动态分配内存，避免堆栈溢出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T11:40:17.387

好的！您的应用中有[Stack Overflow](http://en.wikipedia.org/wiki/Stack_overflow)！ ![在此处输入图像描述](https://i.stack.imgur.com/Y4aOk.jpg)

修复示例：

*   不要使用堆栈 - 使用[动态内存分配（堆）](http://www.cplusplus.com/doc/tutorial/dynamic/)：

    `double* a = new double[150000];`

*   使用 STL 容器，例如[vector](http://www.cplusplus.com/reference/vector/vector/) - 在内部它在堆上分配东西

    `std::vector<double> a(150000);`

*   增加堆栈大小（坏主意，但如果您真的需要它，请阅读编译器文档，并查看[此处](https://stackoverflow.com/questions/625416/can-you-set-the-size-of-the-call-stack-in-c-vs2008)）

*   以某种方式重新设计你的代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T11:38:44.710

这个问题有一个解决方案，但它会导致（至少）三种不同的后续解决方案。解决方案是“不要使用大数组作为局部变量，因为它会炸毁堆栈”。

解决方案显然意味着以某种方式更改代码。有几种不同的方法可以做到这一点。

显而易见且直接的解决方案是`std::vector<double>`改用。

另一种解决方案是使用`

```
unique_ptr<double[]> a = std::unique_ptr<double[]>(new double[150000]); 
```

第三个，有时也是一个很好的解决方案，是制作`a`和`b`全局变量。

还有其他几种变体，但它们通常是同一主题的变体，只是略有不同。在您的情况下最好的方法实际上取决于您的其余代码在做什么。我会从 开始`std::vector<double>`，但确实存在其他替代方案，如果由于某种原因这是一个不合适的解决方案。

# symfony - Symfony2 - Give a default filter in a list of elements of Sonata Admin

> ID：16213361
> 
> 赞同：14
> 
> 时间：2013-04-25T11:18:56.817
> 
> 标签：symfony, sonata-admin

I have a list of elements of type Vehicle and I show these elements with Sonata Admin. I allow to filter these elements by the "status" field, but I want that, when the list is showed, only the active vehicles are showed, and if somebody wants to see the inactive vehicles, uses the filter and select the inactive status. I would like to know if somebody Knows the way to apply filters by default for a list of elements using Sonata Admin.

Here is my code:

```
public function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('name')
        ->add('status')
    ;
}

protected function configureDatagridFilters(DatagridMapper $mapper)
 {
     $mapper
         ->add('name')
         ->add('status')
     ;
 } 
```

Is there any option that can be added to the status field in configureDatagridFilters() to achieve this goal? Other options?

Thanks in advance.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T11:41:20.240

您必须`$datagridValues`按以下方式覆盖属性（`status > 0`如果它是整数）：

```
 /**
    * Default Datagrid values
    *
    * @var array
    */
   protected $datagridValues = array (
           'status' => array ('type' => 2, 'value' => 0), // type 2 : >
           '_page' => 1, // Display the first page (default = 1)
           '_sort_order' => 'DESC', // Descendant ordering (default = 'ASC')
           '_sort_by' => 'id' // name of the ordered field (default = the model id field, if any)
      // the '_sort_by' key can be of the form 'mySubModel.mySubSubModel.myField'.
   ); 
```

来源：[在列表视图中配置默认​​页面和排序](http://sonata-project.org/bundles/admin/2-0/doc/reference/advance.html#configure-the-default-page-and-ordering-in-the-list-view)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-03T14:49:48.907

你也可以使用这个方法

```
 public function getFilterParameters()
    {
        $this->datagridValues = array_merge(
            array(
                'status' => array (
                    'type' => 1,
                    'value' => 0
                ),
                // exemple with date range
                'updatedAt' => array(
                    'type' => 1,
                    'value' => array(
                        'start' => array(
                            'day' => date('j'),
                            'month' => date('m'),
                            'year' => date('Y')
                            ),
                        'end' => array(
                            'day' => date('j'),
                            'month' => date('m'),
                            'year' => date('Y')
                            )
                        ),
                    )
                ),
            $this->datagridValues
            );

        return parent::getFilterParameters();
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-19T13:54:57.887

使用上述两种建议的方法都会破坏过滤器的“重置”行为，因为我们总是强制过滤器按默认值过滤。对我来说，我认为最好的方法是使用 getFilterParameters 函数（因为我们可以在其中添加逻辑而不是静态添加值）并检查用户是否单击了“重置按钮”

```
/**
 * {@inheritdoc}
 */
public function getFilterParameters()
{
    // build the values array
    if ($this->hasRequest()) {
        $reset = $this->request->query->get('filters') === 'reset';

        if (!$reset) {
            $this->datagridValues = array_merge(array(
                'status' => array (
                    'type' => 1,
                    'value' => 0
                ),
            ),
                $this->datagridValues
            );
        }
    }

    return parent::getFilterParameters();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-30T14:24:11.857

另一种方法是使用 createQuery 和 getPersistentParameters 来强制执行不可见过滤器。这种方法最好有完全可定制的过滤器。在这里查看我的文章：

[http://www.theodo.fr/blog/2016/09/sonata-for-symfony-hide-your-filters/](http://www.theodo.fr/blog/2016/09/sonata-for-symfony-hide-your-filters/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-28T09:26:42.790

从 sonata-admin 4.0 开始，该函数`getFilterParameters()`被标记为 final 并且 $datagridValues 不再存在。

所以你需要重写这个`configureDefaultFilterValues()`函数

```
protected function configureDefaultFilterValues(array &$filterValues): void
{
    $filterValues['foo'] = [
        'type'  => ContainsOperatorType::TYPE_CONTAINS,
        'value' => 'bar',
    ];
} 
```

更多详细信息：[https ://symfony.com/bundles/SonataAdminBundle/current/reference/action_list.html#default-filters](https://symfony.com/bundles/SonataAdminBundle/current/reference/action_list.html#default-filters)

# php - 使用多个表进行列过滤的数据表服务器端处理

> ID：16213368
> 
> 赞同：1
> 
> 时间：2013-04-25T11:19:23.243
> 
> 标签：php, datatables, jquery-datatables

我正在使用`Datatables`从两个表中提取记录来显示记录集。

### 表 A

```
sno      | item_id | start_date | end_date   | created_on |
===========================================================
10523563 | 2       | 2013-10-24 | 2013-10-27 | 2013-01-22 |
10535677 | 25      | 2013-11-18 | 2013-11-29 | 2013-01-22 |
10587723 | 11      | 2013-05-04 | 2013-05-24 | 2013-01-22 |
10598734 | 5       | 2013-06-14 | 2013-06-22 | 2013-01-22 | 
```

### 表 B

```
id       | item_name                |
=====================================
2        | Timesheet testing        |
25       | Vigour                   |
11       | Fabwash                  |
5        | Cruise                   | 
```

现在由于返回的记录数将在不久的将来变成一个很大的数字，我希望在服务器端完成处理。我已经成功地做到了这一点，但这是有代价的。我在处理过滤器时遇到了问题。

![数据表](https://i.stack.imgur.com/LDEz9.png)

从上图中，(1) 是值将在`int`( `item_id`) 中的列，但是在 mysql 资源的循环中使用了一些小的修改`while`，我显示了相应的`string`using `Table B`。

现在，如果我使用过滤器 (2)，它工作正常，因为这些值来自`Table A`

### 问题

当我尝试从字段 (3) 中过滤时，如果我输入一个`string`值，例如`fab`它表示找不到记录。但是，如果我输入一个`int`，我会得到一个包含作为项目名称`11`的单行。`Fabwash`

因此，在过滤时，我需要使用 in 中使用的直接值，`Table A`而不是`string`存储在`Table B`. 我希望我要表达的观点是可以理解的，因为很难用语言来解释。

我对如何解决这个问题一无所知。

# mysql - Laravel 3: Joining and getting sum of two tables, Is there a better way?

> ID：16213372
> 
> 赞同：1
> 
> 时间：2013-04-25T11:19:50.500
> 
> 标签：mysql, laravel, fluent, eloquent

I'm trying to get columns of a table while getting sum of another related table (I'm using a MySQL database). Tables are Advantages and Conversions, Advantages has a `conversionID` column to join. They are all related via models. I first tried to achieve this with Eloquent method, but I could not succeed, so I came up with this Fluent method, which is working fine:

```
DB::table('conversions')
    ->join('advantages','advantages.conversionID','=','conversions.id')
    ->where('conversions.used','=',0)
    ->group_by('conversions.id')
    ->get(array(
        'conversions.*',
        DB::raw('SUM(advantages.point) as totaladvantage')
      )) 
```

I guess the query describes how the columns are and what I want to achieve.

So my question is: Is there a more efficient way to achieve this? Using `DB::raw` for this seemed weird to me, and `sum()` method only returns sum of the columns. This is the almost only place where I wrote both fluent and raw query in my project, so that made me think if I'm missing something.

Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T09:58:17.937

可以通过fluent调用聚合方法

```
DB::table('conversions')
    ->join('advantages','advantages.conversionID','=','conversions.id')
    ->where('conversions.used','=',0)
    ->group_by('conversions.id')
    ->select(array(
        'conversions.*',
        'advantages.point as totaladvantage')
      )
    ->sum('advantages.point') 
```

没有测试过这个，所以让我知道你的进展如何

# java - 使用 GSON 在序列化 JSON 中键入信息

> ID：16213375
> 
> 赞同：2
> 
> 时间：2013-04-25T11:19:59.813
> 
> 标签：java, json, serialization, deserialization, gson

使用 Jackson，我们可以选择将类型信息附加到序列化对象（[http://jackson.codehaus.org/1.5.5/javadoc/org/codehaus/jackson/annotate/JsonTypeInfo.html](http://jackson.codehaus.org/1.5.5/javadoc/org/codehaus/jackson/annotate/JsonTypeInfo.html)）。

有没有办法使用 GSON 来做到这一点，例如：

```
{
    propertyName:"test",
    _className:"foo.bar.TestClass"
} 
```

这个想法是让它通用，所以当 a`ArrayList<Object>`被反序列化时，正确的对象实例会随之恢复。

我看到了这个问题：[https](https://stackoverflow.com/a/8683689/1001027) ://stackoverflow.com/a/8683689/1001027这或多或少是我需要的，但它仅适用于特定类别的对象。怎么能以如此通用的方式实现，以至于每个对象都将使用此属性进行序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:29:22.760

您需要实现反序列化器，它将查看类型属性并将对象转换为给定类型。我相信，没有别的办法。

查看[javadoc](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonDeserializer.html)，实现这个接口可能是你的答案。

# ruby - Ruby 的 Sublime 文本注释缩进问题

> ID：16213381
> 
> 赞同：10
> 
> 时间：2013-04-25T11:20:12.653
> 
> 标签：ruby, sublimetext2, auto-indent

几个月以来，我一直在使用 SublimeText 和 ruby​​，但我遇到了评论自动缩进的问题。缩进使用注释的缩进，并使用此缩进缩进以下所有代码。我希望自动缩进忽略（至少）或设置先前代码的缩进（充其量），但根本不接受评论的缩进：

我所有使用这个编辑器的同事都有同样的问题这是一个由 SublimeText 重新缩进的示例代码

```
class Test
  def method1
  end

    #Bad indentation
    def method2
      somecode
    end

    def method3
      somecode
    end

  end 
```

想要：

```
class Test
  def method1
  end

  #Bad indentation
  def method2
    somecode
  end

  def method3
    somecode
  end

end 
```

我对 ~/.config/sublime-text-2/Packages/Default/Indentation Rules - Comments.tmPreferences 做了一个快速修复

更换

```
<key>scope</key>
<string>comment</string>
<key>settings</key>
<dict>
    <key>preserveIndent</key>
    <true/>
</dict> 
```

和

```
<key>scope</key>
<string>comment</string>
<key>settings</key>
<dict>
    <key>preserveIndent</key>
    <false/>
</dict> 
```

但它会影响默认行为，我更喜欢只影响 Ruby 的行为。有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T03:52:07.047

我建议你使用[BeautifyRuby](https://github.com/CraigWilliams/BeautifyRuby) ST2 包。您还需要安装`htmlbeautifier`gem。不仅您的评论，而且您的代码都会很好地缩进。

如果您使用 rvm，您可能需要更改 `BeautifyRuby.sublime-settings`为使用 rvm 安装的 ruby​​，而不是系统安装的 ruby​​。要找出您正在使用的 ruby​​ 的路径，请`which ruby`在 shell 提示符下键入。将此路径粘贴为名为的键的值，`"ruby"`例如：

```
"ruby": "/home/thetuxracer/.rvm/rubies/ruby-2.0.0-p247/bin/ruby" 
```

并且 beautifyruby 可以用于：edit->beautify ruby

或者您可以更改它的键绑定：

```
 { 
  "keys": ["alt+tab"],
  "command": "beautify_ruby", 
  "context": { "key": "selector",
    "operator": "equal", 
    "operand": "source.rb, source.ruby" }

  },
{
  "keys": ["alt+tab"],
  "command": "reindent", 
  "args": {
    "single_line": false
    },
  "context": { "key": "selector",
    "operator": "not_equal", 
    "operand": "source.rb, source.ruby" }
  }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:27:39.320

我把它放在我的用户设置文件中：

首选项 -> 设置 - 用户：

```
{
"color_scheme": "Packages/Theme - Refined/Color Schemes/Danro.tmTheme",
"ensure_newline_at_eof_on_save": true,
"font_size": 18.0,
"hot_exit": false,
"ignored_packages":
[
    "Vintage"
],
"remember_open_files": false,
"save_on_focus_lost": true,
"tab_size": 2,
"translate_tabs_to_spaces": true 
```

}

我试图重现您的问题，但无法强制执行这些设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T11:13:59.593

对于缩进，以下是关键设置

```
"tab_size": 2,
"translate_tabs_to_spaces": true 
```

这对我有用

```
{
"caret_style": "solid",
"color_scheme": "Packages/Color Scheme - Default/Monokai.tmTheme",
"enable_tab_scrolling": false,
"folder_exclude_patterns":
[
    ".git",
    ".hg",
    ".sass-cache",
    "log",
    "tmp",
    "script",
    "vendor",

],
"font_size": 10,
"highlight_line": true,
"highlight_modified_tabs": true,
"ignored_packages":
[
    "Vintage"
],
"rulers":
[
    100
],
"scroll_past_end": false,
"tab_size": 2,
"translate_tabs_to_spaces": true
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-15T06:40:55.603

对于 ST3，首选项 -> 设置 - 用户

添加以下代码：{“tab_size”：2}

默认情况下，SublimeText 使用 4 个字符长的硬制表符。

# javascript - 如何在extjs的控制器中创建商店实例

> ID：16213385
> 
> 赞同：1
> 
> 时间：2013-04-25T11:20:19.060
> 
> 标签：javascript, extjs4

我想从控制器中的 init() 函数调用图表的存储。我想在控制器中创建一个图表存储实例。这是我的代码..

```
Ext.define('Gamma.controller.ControlFile', {
  extend: 'Ext.app.Controller',
  //define the stores
  stores: ['BarColumn', 'RadarView', 
           'VoiceCallStore', 'SMSCallStore', 
           'MMSCallStore', 'GPRSUsageStore'],
  //define the models 
  models: ['BarCol', 'radar', 
           'VoiceCallModel', 'SMSCallModel', 
           'MMSCallModel', 'GPRSUsageModel'],
  //define the views
  views: ['BarColumnChart', 'LineChart', 
          'RadarChart', 'VoicePie', 
          'SMSPie', 'MMSPie', 'GPRSPie'],
  init: function () {
    this.control({});
  }
}); 
```

请任何人帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:29:54.637

这是一个简单的：

`var store = this.getStore('storeName');`

`this`你的控制器在哪里。

请参阅：[Ext.app.Controller.getStore 文档](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.app.Controller-method-getStore)

# jquery - 如何将 promise 对象数组转换为数组的 promise 对象？

> ID：16213391
> 
> 赞同：1
> 
> 时间：2013-04-25T11:20:38.027
> 
> 标签：jquery, promise, q

有没有办法将 promise 对象数组转换为数组的 promise 对象？我正在寻找一些行为类似于[`$q.all(promises)`](http://docs.angularjs.org/api/ng.%24q)AngularJS 的东西。

这是我的代码：

```
var getPages = function(courses) {
  var courses_promises = courses.filter(function(item) {
    return item.courses[0].home_link;
  }).map(function(item) {
    deferred = $.Deferred();
    item["class_link"] = item.courses[0].home_link;
    item["home_link"] = item["class_link"] + "class/index";
    $.get(item.home_link)
       .then(function(response) {
        item["html"] = response;
        deferred.resolve(item);
       });
    return deferred.promise();
  });
  return $.when.apply($, courses_promises);
}; 
```

我希望该`getPages`函数返回一个将使用值数组解析的单个承诺，每个值对应于承诺数组中相同索引处的承诺。如果任何一个 Promise 被拒绝解决，这个结果 Promise 将被同样的拒绝解决。

然后我会用

```
getPages.then(getEvents) 
```

where`getEvents`是另一个函数，它需要一个数组，其中的元素由`getPages`.

谁能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-13T10:57:59.313

对于那些不想引入另一个库的人（虽然我可以确认 Q 很棒，它似乎是节点的最佳承诺系统），这里是`Q.all`使用 jQuery 的实现`when`：

```
function all(arrayOfPromises) {
    return jQuery.when.apply(jQuery, arrayOfPromises).then(function() {
        return Array.prototype.slice.call(arguments, 0);
    });
}; 
```

这需要解决两个问题：

1.  不是接受一个数组，而是接受`jQuery.when`可变数量的参数，所以我们必须调用它`apply`来给它我们的承诺数组。
2.  组合的 Promise 用多个参数解决，而不是单个数组参数，所以我们必须`arguments`变成一个真正的数组（使用`slice`）。

因此：

```
var getAnimal = function(animal) {
    return $.get('animals/' + animal);
};

var arrayOfPromisesToAnimals = ['frog', 'cat', 'horse'].map(getAnimal);

var promiseToArrayOfAnimals = all(arrayOfPromisesToAnimals);

promiseToArrayOfAnimals.then(function(arrayOfAnimals) {

    arrayOfAnimals.forEach(function(animal) {
        console.log(animal);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:15:13.120

如果您使用的是[Q](https://github.com/kriskowal/q)，那么只需执行以下操作：

```
Q.all(promises) 
```

这通常比使用 jQuery 来实现你的承诺要好得多，因为 Q 的设计要好得多。此外，给`Q.all`jQuery 承诺是安全的，它会很好地吸收它们。

如果您不想使用 Q，我相信`$.when`会做类似的事情，但它并不那么干净和简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T22:24:06.470

where`promises`是一个数组，jQuery 的等价物`Q.all(promises)`是：

```
jQuery.when.apply(null, promises); 
```

许多 jQuery 程序员使用它，同时同意这是笨拙的。`jQuery.when()`接受一个数组会更好。

## 编辑

现在我已经看到了完整的`getPages`功能，我可以更好地建议一个 jQuery 解决方案：

我认为这很简单：

```
var getPages = function(courses) {
    var promises = courses.map(function(c) {
        if(!c.courses[0].home_link) return null;//filter action
        return $.get(c.courses[0].home_link + "class/index").done(function(response) {
            c.html = response;
        });
    }).get();//Remove jQuery wrapper to reveal an array of jqXHR promises.
    return $.when.apply($, promises);
}; 
```

这`$.when.apply($, promises)`条线总是正确的。你只需要确保它`promises`是一个真正的 javascript 数组，而不是一个 jQuery 集合。

# html - Windows 7 高对比度主题覆盖 Firefox 中的网站颜色

> ID：16213395
> 
> 赞同：4
> 
> 时间：2013-04-25T11:21:03.793
> 
> 标签：html, css, windows, firefox, themes

我有一个用于控制自定义设备的网站。在此表中，您单击一个单元格并使用 javascript 将颜色发送到设备。

```
<table style="width:100%;" id="ColorTable">
<tr>
    <td style="background-color:#FF8080;"><br/><br/></td>
    <td style="background-color:#FFFF80;"><br/><br/></td>
    <td style="background-color:#808000;"><br/><br/></td>     etc. 
```

不幸的是，在控制设备的 Windows 7 计算机上，高对比度主题 #1 处于活动状态（叹气），因为客户希望这样。

Windows XP 过去在更改主题时会忽略网站，但 Windows 7 似乎会覆盖 Firefox 中网站的样式表信息。加载网站时，单元格显示为黑色，单击时会向设备发送#000000。

谷歌浏览器显示颜色不变。Internet Explorer 没有。

有没有办法..

..告诉 Firefox/网站忽略 Windows 7 主题？

.. 告诉 Windows 7 主题不要管网站？

更改 Compability 设置和 firefox 颜色设置不起作用。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T00:57:52.790

我知道这是很久以前问过的，但如果其他人遇到与我相同的问题，我会回答这个问题。

高对比度主题用于可用性，就像标志或斜坡而不是楼梯上的盲文。许多程序（如 Skype 和 Firefox）会检查这一点并改变它们的视觉效果以匹配。

如果您只是喜欢对比主题的外观，请选择经典主题并调整设置，直到它们与您选择的主题相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-20T10:43:07.743

我刚刚在 Windows 10 中遇到了这个问题。

对我有用并且可能对你有用的是：

`about:preferences#content`→`Colors...`

然后使用上面的选择更改*覆盖页面指定的颜色：*从`Only with High Contrast themes`到`Never`。

[![Firefox 高对比度颜色](https://i.stack.imgur.com/VlyTG.png)](https://i.stack.imgur.com/VlyTG.png)

（我正在使用[GreyEveTheme FINAL-Windows 10 高对比度主题](http://eversins.deviantart.com/art/GreyEveTheme-FINAL-Windows-10-High-Contrast-Theme-643504863)）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-11T01:03:59.157

[Bugzilla](https://bugzilla.mozilla.org/show_bug.cgi?id=452800)上有一个关于此问题的错误。

这是我的解决方法。将此添加到`<body>`：

```
<div class="high-contrast-test"></div> 
```

添加这个CSS：

```
.high-contrast-test {
    width: 0;
    height: 0;
    background-image: url('#');
} 
```

使用这个 JavaScript：

```
$(document).ready(function () {

    // detect high contrast mode to deal with firefox bug
    // .high-contrast-test has a background-image,
    // if there is no background-image we are in high contrast mode
    // https://bugzilla.mozilla.org/show_bug.cgi?id=452800
    if ($('.high-contrast-test').css('background-image') === 'none') {
        if ($('.Container').css('background-color') === 'rgb(255, 255, 255)') {
            $('html').addClass('hc-black-on-white');
        } else {
            $('html').addClass('hc-white-on-black');
        }
    }
}); 
```

然后可以使用 CSS 路径覆盖 HC 模式 CSS。

# android - Phonegap vs Android Native SDK 支持多种语言

> ID：16213396
> 
> 赞同：-5
> 
> 时间：2013-04-25T11:21:07.993
> 
> 标签：android, cordova, localization, internationalization

我想解析一个行星提要，它有多个支持多种语言（如西班牙语、德语等）的 RSS

我的问题是我应该使用 phonegap 还是原生 android sdk。我不确定哪一个会更好，可以支持这个要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:32:34.880

取决于你的技能。如果你必须学习 javascript 和 java 没关系。选择一个并学习如何做。如果您已经了解 javascript 或 java，请选择您最了解/最喜欢的一个并继续努力。

本机 sdk 提供本地化：[请参阅此处](http://developer.android.com/guide/topics/resources/localization.html)。使用 phonegap，您必须定义自己的 javascript 本地化方法。这并不复杂，我以前做过，而且我不是 javascript 专家。

您还必须考虑其他事项，例如：

*   您的应用程序是否仅适用于 Android，或者您将支持其他平台？
*   你的应用程序有多“重”？它是否渲染繁重的图形或具有精美的动画？在我的经验中，phonegap 在这些方面有点滞后。

搜索两者的区别、利弊。[帮助您入门。](http://bit.ly/ZmZYiM)

# visual-studio-2010 - 尝试运行项目时出现 Visual Studio 错误

> ID：16213403
> 
> 赞同：0
> 
> 时间：2013-04-25T11:21:32.530
> 
> 标签：visual-studio-2010

我有以下情况：

*   带有一个 WPF 项目的 Visual Studio 2010 解决方案，输出文件是“Tool.exe”
*   Eclipse 共享库项目，输出文件为“Tool.dll”

我将 dll 放在与 exe 相同的文件夹中，然后尝试使用 Visual Studio 进行调试；但我收到以下错误：

> 尝试运行项目时出错：无法加载文件或程序集“工具”或其依赖项之一。该模块应包含程序集清单。

我已经设法找到问题的解决方案，**重命名**dll，显然 exe 和 dll 不能具有相同的名称。我的问题是，为什么首先会发生此错误？为什么 dll 的名称会影响 Visual Studio？该错误甚至在尝试调用 dll 之前发生。如果我在没有 Visual Studio 的情况下运行我的应用程序，它可以完美运行，但我当然希望能够调试它。

现在重命名 dll 是计划 B，但在此之前，我想知道是否还有其他方法可以解决此问题？

提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-03-14T10:50:57.740

我找到了解决此错误的简单步骤。

1-改变你的窗户。

2- 安装 Symantec Endpoint Protection Client 12.1.6318.6100 x32 或 x64 位。

您可以从以下链接获取它的软件（32 位）：( [ftp://192.168.168.215/Public/Antivirus/Symantec/Symantec](ftp://192.168.168.215/Public/Antivirus/Symantec/Symantec) Endpoint Protection Client 12.1.6318.6100 x86.rar)

将其拖放到您的软件（IE，....）中即可工作。

3-在您的计算机上安装所有驱动程序。

4-安装Visual Studio。

结尾

# requirejs - Typescript AMD 使用 Javascript / RequireJS 实现错误

> ID：16213406
> 
> 赞同：5
> 
> 时间：2013-04-25T11:21:45.527
> 
> 标签：requirejs, typescript

如果我有这个 ts 模块：

```
export function say(){
    console.log("said");
} 
```

我用 amd 选项编译它，我可以很容易地从 ts 客户端使用它：

```
import foo = module("tsmodule")
foo.say();

export var x = 123; 
```

但是，如果我有与 ts 模块等效的 javascript：

```
define(["require", "exports"], function(require, exports) {
    function say() {
        console.log("said");
    }
    exports.say = say;
}) 
```

没有办法轻松使用它。最简单的可能解决方案：

```
// of course you can use .d.ts for requirejs but that is beside the point
declare var require:any;

// will fail with error module has not been loaded yet for context
// http://requirejs.org/docs/errors.html#notloaded
var useme = require("jsmodule")
useme.say();

export var x = 123;
import foo = module("tsmodule")
foo.say(); 
```

由于错误[http://requirejs.org/docs/errors.html#notloaded](http://requirejs.org/docs/errors.html#notloaded)失败。由于“jsmodule”未传递给生成的打字稿中的定义调​​用。

我有两种解决方法

*   不要使用导入/导出（语言功能丢失）
*   使用 require([]) （仍然不能导出依赖于 require([]) 调用的东西）

有限制：[https](https://github.com/basarat/typescript-requirejs) ://github.com/basarat/typescript-requirejs 。还有其他方法吗？如果不能，你可以在这里投票：[https](https://typescript.codeplex.com/workitem/948) ://typescript.codeplex.com/workitem/948 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:03:33.743

如果你想加载一个 JavaScript 模块，你总是可以使用（错误记录的）`amd-dependency`标签：

```
/// <amd-dependency path="jsmodule" /> 
```

这将放入`jsmodule`您定义调用的依赖数组中。

然后提供一个声明文件，您只需在其中声明

```
module useme {
    function say(): void;
} 
```

# json - 如何从 Gadget 中的 Greenhopper REST API 获取 JSON 响应？

> ID：16213413
> 
> 赞同：0
> 
> 时间：2013-04-25T11:22:22.587
> 
> 标签：json, rest, jira, jira-plugin, jira-agile

我无法通过我的 Gadget 应用程序从 GreenHopper REST API 获取 URL http://:2990/jira/rest/greenhopper/1.0/sprints/1 的响应。

当我从浏览器尝试时，我能够得到以下输出，下面是输出。

```
 {"sprints":[{"id":1,"name":"Sprint 1","closed":false}],"rapidViewId":1} 
```

我在 Gadget 中检索 sprint 详细信息的代码片段是：

```
args: {
     key: "sprints",
    ajaxOptions: function () {
    return {                                
        url: "/rest/greenhopper/1.0/sprints/1",
           };
     }
 } 
```

任何人都可以建议我如何从 greenhopper REST API 获取 JIRA 仪表板的 JSON 响应。

我在服务器中收到以下异常：

```
 [talledLocalContainer]   at java.lang.Thread.run(Thread.java:662)
 [talledLocalContainer] 2013-04-25 15:26:58,985 http-2990-11 ERROR admin 926x5323x1            dggnll 172.27.186.82 /rest/greenhopper/1.0/sprints/1      

 [common.error.jersey.ThrowableExceptionMapper] Uncaught exception thrown by REST service
 [talledLocalContainer] javax.ws.rs.WebApplicationException
 [talledLocalContainer]   at   com.sun.jersey.server.impl.uri.rules.TerminatingRule.accept(TerminatingRule.java:66)
 [talledLocalContainer]   at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:25:16.477

That's the right URL so maybe the sprint doesn't exist or you don't have permission to view it? Also, try using the Developer Workbox add-on and the REST API browser to test these kind of methods.

# java - 如何一次性构建主项目和依赖项目

> ID：16213415
> 
> 赞同：0
> 
> 时间：2013-04-25T11:22:27.657
> 
> 标签：java, swing, shared-libraries, netbeans-7

在 NetBeans 7.1 中，我有许多与我的主项目链接的项目作为库。例如 Main Project1 DepProject1.lib DepProject2.lib DepProject3.lib

当我在我的依赖项目（例如DepProject1）中进行一些更改时，我必须清理构建依赖项目并粘贴到我的主项目的libraray文件夹中，然后清理构建我的主项目。如果我构建主项目，依赖项目会自动构建并且主项目的库会自动更新，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:29:29.050

不要将库 JAR 直接添加到您的项目中，如此处所示，而是[添加一个包含您的其他项目的库，如此](https://stackoverflow.com/a/1975994/230513)[处](https://stackoverflow.com/a/1976322/230513)所示。

# image - 将形状/图像添加到 Dynamics AX 2009 表单的最佳/更简单的方法？

> ID：16213418
> 
> 赞同：1
> 
> 时间：2013-04-25T11:22:36.147
> 
> 标签：image, axapta, shapes, x++, dynamics-ax-2009

我想在表单中添加一些彩色方形以显示图例。由于我没有遇到任何添加彩色形状的方法，所以我求助于将形状创建为图像，将它们作为资源加载，目前正在尝试将它们加载到表单中......虽然这看起来很长一个简单的单色正方形的解决方法。

首先，有没有办法将给定颜色的基本形状添加到 AX 形式？否则，是否有更简单的方法可以将图像添加到表单而无需复制 CompanyImage（或 CompanyInfo）表单？

注意：我希望将图像正确存储在 AX 中，而不是通过文件路径将图像链接到本地​​计算机上的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T10:28:46.957

您可以使用[`WinGDI Class`](http://msdn.microsoft.com/en-us/library/gg785039.aspx). 这是一个简单的示例：

```
void drawShapes()
{
    WinGDI winGDI;
    Int brush, height, width;
    ;

    //myWindow being the FormWindowControl
    height = myWindow.heightValue()/2;
    width  = myWindow.widthValue()/2;

    myWindow.lockDC();

    winGDI  = new WinGDI(myWindow.hDC());

    brush = winGdi.createSolidBrush(WinAPI::RGB2int(0, 0, 255));
    winGDI.fillRect(0, 0, width, height, brush);
    winGDI.deleteObject(brush);

    winGDI.ellipse(0, 0, width, height);

    brush = winGdi.createSolidBrush(WinAPI::RGB2int(255, 0, 0));
    winGDI.fillRect(width, height, 2*width, 2*height, brush);
    winGDI.deleteObject(brush);

    myWindow.UnlockDC();
} 
```

我假设你有类似的东西。

现在，如果您只在窗体中调用一次，则只要调用窗口控件的方法（并且经常调用它） `init`，绘图就会被删除。`paint`

`paint`所以最简单的方法就是在窗口的方法中调用它。这样，每次重绘 myWindow 的内容时，您的形状也会如此。
您还可以像俄罗斯方块教程一样*（查看`cycle`方法）*使用（查看方法）强制以（短）定期时间间隔重绘形状，`setTimeout`但这对于静态内容可能有点过分。

你现在应该有这个

![输出](https://i.stack.imgur.com/pgbe0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:35:59.807

您可以将图像作为容器 (BLOB) 存储在数据库中，并将它们显示在表单或报告中：

[如何：将图像添加到表单](http://msdn.microsoft.com/en-us/library/aa890890%28v=ax.50%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T18:30:20.327

这可能是一个简单的解决方法，但这就是我为我的一个更改所做的。由于您想将它用于图例，您只需添加一个按钮并将属性设置为平面，给它一个颜色和一个文本。作为传奇，这应该足够了。

# python - 执行 python-paramiko

> ID：16213420
> 
> 赞同：0
> 
> 时间：2013-04-25T11:22:37.913
> 
> 标签：python, paramiko

我正在尝试通过 python 对远程机器执行一些命令

```
 ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(SERVER_IP, username='root', password='xxxxx')
    stdin, stdout, stderr = ssh.exec_command(
        "tar -C /home -xzf /home/Tests.tar.gz;dos2unix /home/Tests/run.py;chmod +x /home/Tests/run.py;/home/Tests/run.py>/home/Tests/log.txt"
    ) 
```

似乎最后一个命令`/home/Tests/run.py>/home/Tests/log.txt`不起作用，`log.txt`没有值，如果我`/home/Tests/run.py>/home/Tests/log.txt`在远程机器终端上做同样的工作。

如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-11T20:28:40.100

您不会像这样将客户端传输到会话：

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(SERVER_IP, username='root', password='xxxxx')
#note the next line you are missing
ssh_session = ssh.get_transport().open_session() 
```

然后（在声明 ssh_session 之后）你可以使用`ssh_session.exec_command(. . .)`.

试试看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:20:05.147

为了确保您的`paramiko`代码正常工作并且正在建立连接，请尝试一些简单的事情，例如

```
stdin, stdout, stderr = ssh.exec_command("hostname") 
```

并确保其中`stdin`包含您所期望的。然后尝试调试您正在远程执行的命令：

```
$ tar -C /home -xzf /home/Tests.tar.gz
$ dos2unix /home/Tests/run.py
$ chmod +x /home/Tests/run.py
$ /home/Tests/run.py > /home/Tests/log.txt 
```

如果您通过常规`ssh`连接在删除机器上运行代码，如果您希望它也能正常工作，它必须按照您的预期执行`paramiko`。

# android - 使用 HTTP POST / DELETE 方法时的 Facebook Graph API 请求错误

> ID：16213427
> 
> 赞同：2
> 
> 时间：2013-04-25T11:22:50.087
> 
> 标签：android, facebook, facebook-graph-api, nullpointerexception, facebook-like

我正在开发一个与 Facebook SDK 集成的 Android 应用程序。

首先，我正在使用 Graph API 获取 Facebook 页面的提要，它运行良好。我想允许用户喜欢并针对每个提要发表评论。

我正在为**Like使用以下代码片段**

```
Bundle parameters = new Bundle();
parameters.putString("access_token", access_token);

String response = null;
    String id = <Target Feed ID>;
    try {
        response = facebook.request(id+"/likes", parameters, "POST");
    } catch (MalformedURLException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
        Log.i("FB Like Output", ""+response); 
```

但我在以下行得到 NullPointerException：

```
response = facebook.request(id+"/likes", parameters, "POST"); 
```

请注意，**仅当我使用“POST”或“DELETE”作为第三个参数**时才会出现此错误。相反，如果我使用 GET 我会得到正确的响应（但是，这不会满足我的目的）。

此外，我还添加了相关权限，例如**publish_stream**。

这是使用 HTTP POST 方法发出同步请求的正确语法吗？

```
04-25 16:29:08.332: E/AndroidRuntime(710): FATAL EXCEPTION: main
04-25 16:29:08.332: E/AndroidRuntime(710): java.lang.NullPointerException
04-25 16:29:08.332: E/AndroidRuntime(710):  at java.net.URLDecoder.decode(URLDecoder.java:130)
04-25 16:29:08.332: E/AndroidRuntime(710):  at java.net.URLDecoder.decode(URLDecoder.java:68)
04-25 16:29:08.332: E/AndroidRuntime(710):  at com.facebook.android.Util.openUrl(Util.java:186)
04-25 16:29:08.332: E/AndroidRuntime(710):  at com.facebook.android.Facebook.requestImpl(Facebook.java:806)
04-25 16:29:08.332: E/AndroidRuntime(710):  at com.facebook.android.Facebook.request(Facebook.java:794)
04-25 16:29:08.332: E/AndroidRuntime(710):  at com.test.myapp.adapters.FacebookAdapter$1.onClick(FacebookAdapter.java:107)
04-25 16:29:08.332: E/AndroidRuntime(710):  at android.view.View.performClick(View.java:2408)
04-25 16:29:08.332: E/AndroidRuntime(710):  at android.view.View$PerformClick.run(View.java:8816)
04-25 16:29:08.332: E/AndroidRuntime(710):  at android.os.Handler.handleCallback(Handler.java:587)
04-25 16:29:08.332: E/AndroidRuntime(710):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 16:29:08.332: E/AndroidRuntime(710):  at android.os.Looper.loop(Looper.java:123)
04-25 16:29:08.332: E/AndroidRuntime(710):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-25 16:29:08.332: E/AndroidRuntime(710):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 16:29:08.332: E/AndroidRuntime(710):  at java.lang.reflect.Method.invoke(Method.java:521)
04-25 16:29:08.332: E/AndroidRuntime(710):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-25 16:29:08.332: E/AndroidRuntime(710):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-25 16:29:08.332: E/AndroidRuntime(710):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:11:38.267

如[https://developers.facebook.com/docs/reference/api/publishing/](https://developers.facebook.com/docs/reference/api/publishing/)所示，

**喜欢给定的对象（如果它有 /likes 连接**）

![在此处输入图像描述](https://i.stack.imgur.com/HPKSp.png)

而且您无法在[https://developers.facebook.com/docs/reference/api/page/上找到 /likes 连接](https://developers.facebook.com/docs/reference/api/page/)

你不能喜欢一个粉丝专页，代码导致了问题

```
 String id = <Facebook Page ID>; 
```

# ios - 适用于 iOS 应用程序的 QuickBlox

> ID：16213429
> 
> 赞同：2
> 
> 时间：2013-04-25T11:22:55.743
> 
> 标签：ios, chat, quickblox

我是 iOS 开发的新手。我必须构建一个聊天应用程序，我发现了这个网站 QuickBlox.com，它提供代码和后端来帮助在各种平台上构建应用程序。我怀疑我从这个网站获得帮助，我构建的应用程序是否完全是我的应用程序。我担心的是，如果我构建了一个应用程序，它应该完全是我的应用程序，并且任何其他网站或公司的名称在最终到达用户时都不应该对用户可见。如果有人知道 QuickBlox.com，请澄清我的疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:33:17.620

The app is completely yours, you can publish under yor own name and use the business model you want.

You can check these case studies, donwload the apps and check it by yourself

[http://quickblox.com/apps/](http://quickblox.com/apps/)

However, if you want to publish remember to have your own AppStore licences for Apple AppStore and Google Play.

Hope it helps,

# linux - Linux如何使用rm和排除开关

> ID：16213432
> 
> 赞同：3
> 
> 时间：2013-04-25T11:23:01.713
> 
> 标签：linux, ubuntu, switch-statement, rm

我想知道我们如何将 linux **rm**命令与**--exclude 开关**一起使用？

例如，像**grep**在搜索文件时具有排除功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:23:01.713

这是一个具体的

```
rm `find . -name "safe_room*" ! -name "safe_rooms.php"` 
```

我主要用于 git

```
git rm `find . -name "safe_room*" ! -name "safe_rooms.php"` 
```

解释：

`rm`- 用于删除的 linux 命令

**``** - mysql 中使用的标志。在键盘上 CTRL + 7

`find . -name "safe_room*"` - 使用 safe_room* 查找所有内容

`!`- NOT 逻辑运算符

`-name "safe_rooms.php"`- 排除除 safe_rooms.php 之外的所有内容

希望这会有所帮助:)

# java - 指令重新排序和发生之前的关系

> ID：16213443
> 
> 赞同：56
> 
> 时间：2013-04-25T11:23:37.187
> 
> 标签：java, multithreading, concurrency, java-memory-model

在 Java Concurrency In Practice 一书中，我们多次被告知，程序的指令可以由编译器、运行时的 JVM 甚至处理器重新排序。所以我们应该假设执行的程序不会以与我们在源代码中指定的顺序完全相同的顺序执行其指令。

但是，讨论 Java 内存模型的最后一章提供了一系列**发生前发生的**规则，指示 JVM 保留了哪些指令顺序。这些规则中的第一个是：

*   “程序顺序规则。线程中的每个操作都发生在该线程中程序顺序后面的每个操作之前。”

我相信“程序顺序”是指源代码。

**我的问题**：假设这条规则，我想知道实际上可以重新排序什么指令。

“动作”定义如下：

> Java 内存模型是根据操作指定的，包括对变量的读取和写入、监视器的锁定和解锁以及启动和加入线程。JMM 定义了一个偏序，称为发生在程序中的所有操作之前。为了保证执行action B的线程可以看到action A的结果（无论A和B是否发生在不同的线程中），A和B之间必须有happens before关系。在没有ahappens before ordering的情况下，两个之间的排序操作时，JVM 可以随意对它们进行重新排序。

其他提到的订单规则是：

*   监控锁定规则。监视器锁上的解锁发生在同一监视器锁上的每个后续锁之前。
*   易变的变量规则。对 volatile 字段的写入发生在对同一字段的每次后续读取之前。
*   线程开始规则。对线程的 Thread.start 调用发生在已启动线程中的每个操作之前。
*   线程终止规则。线程中的任何操作发生在任何其他线程检测到该线程已终止之前，要么通过从 Thread.join 成功返回，要么通过 Thread.isAlive 返回 false。
*   中断规则。一个线程在另一个线程上调用中断发生在被中断的线程检测到中断之前（通过抛出 InterruptedException，或者调用 isInterrupted 或中断）。
*   终结器规则。对象的构造函数的结束发生在该对象的终结器开始之前。
*   传递性。如果 A 发生在 B 之前，B 发生在 C 之前，那么 A 发生在 C 之前。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-05-18T21:56:27.977

程序顺序规则的关键点是：***在一个线程***中。

想象一下这个简单的程序（所有变量最初都是 0）：

T1：

```
x = 5;
y = 6; 
```

T2：

```
if (y == 6) System.out.println(x); 
```

从 T1 的角度来看，执行必​​须与在 x （程序顺序）之后分配的 y 一致。然而，从 T2 的角度来看，情况并非如此，T2 可能会打印 0。

T1 实际上允许先分配 y，因为这 2 个分配是独立的，并且交换它们不会影响 T1 的执行。

通过适当的同步，T2 将始终打印 5 或什么也不打印。

**编辑**

您似乎误解了程序顺序的含义。[节目顺序规则归结为](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-110)：

> 如果`x`和`y`是同一线程的动作并且按程序顺序`x`出现在之前，则（即*发生前*）。`y``hb(x, y)``x` *`y`*

 **happens-before*在 JMM 中具有非常特殊的含义。特别是，从挂钟的角度来看，这并不意味着必须在*T1*之后`y=6`。`x=5`这只意味着T1执行的动作顺序必须*与*该顺序一致。您也可以参考[JLS 17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-200)：

> 应该注意的是，两个动作之间存在之前发生的关系**并不一定意味着它们必须在实现中以该顺序发生**。如果重新排序产生与合法执行一致的结果，则不是非法的。

在我上面给出的示例中，您会同意，从 T1 的角度来看（即在单线程程序中），`x=5;y=6;`这是一致的，`y=6;x=5;`因为您不读取这些值。在 T1 中保证下一行的语句可以查看这两个操作，无论它们执行的顺序如何。*

# css - Firefox 中带有轮廓和伪元素的奇怪行为

> ID：16213445
> 
> 赞同：4
> 
> 时间：2013-04-25T11:23:38.483
> 
> 标签：css, firefox, pseudo-element

当您结合大纲和伪元素时，Firefox 的行为与 Chrome 和 Safari（我没有测试过其他浏览器）不同。有没有办法修复它或者这是一个错误？

```
.main {
  position: relative;
  width: 100px;
  height: 100px;
  margin: 10px auto;
  border: 2px solid #f00;
  outline: 2px solid #00f;
}
.main:after {
  content: 'Hello';
  position: absolute;
  width: 100px;
  text-align: center;
  bottom: -50px;
}
.wtf {
  width: 400px;
  margin: 90px auto;
}
```

```
<div class="main"></div>
<div class="wtf">
  <p>In Chrome and Safari the 'Hello' is outside of the outline.</p>
  <p>In firefox the outline is extended and the 'Hello' is inside the outline. Bug from Firefox or is there a way to fix this?</p>
</div>
```

演示：[http ://codepen.io/romainberger/pen/nuxlh](http://codepen.io/romainberger/pen/nuxlh)

编辑：在 Firefox 20.0、Chrome 28 和 Safari 5.1 中测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:26:23.653

现在习惯了

**盒子阴影**

**像这样**

```
.main {
  position: relative;
  width: 100px;
  z-index:1;
  height: 100px;
  margin: 10px auto;
  border: 2px solid #f00;
  box-shadow:0px 0px 0px 3px #00f;
}
.main:after {
  content: 'Hello';
  position: absolute;
  text-align: center;
  bottom: -50px;
  left:0;
  right:0;
  z-index:2;
}

.wtf {
  width: 400px;
  margin: 90px auto;
} 
```

**[演示](http://codepen.io/anon/pen/vmtfh)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:55:57.287

无需使用 z-index。

```
.main { 
  position: relative;
  width: 100px;
  height: 100px;
  margin: 10px auto;
  border: 2px solid #f00;
  box-shadow:0px 0px 0px 3px #00f;
}
.main:after {
  content: 'Hello';
  position: absolute;
  text-align: center;
  bottom: -50px;
  left:0;
  right:0;
}

.wtf {
  width: 400px;
  margin: 90px auto;
} 
```

# iphone - iPhone how to validate a string is just a image name or image url in Objective - c?

> ID：16213447
> 
> 赞同：1
> 
> 时间：2013-04-25T11:23:43.723
> 
> 标签：iphone, ios, objective-c, regex, validation

On my xib I have a `UITextField` and `UIImageView` and a button,

![enter image description here](https://i.stack.imgur.com/vewOg.png)

what actually I want is when user can enter image name e.g. `Default.png` OR a full web `URL` of image and when press that button should check

if text is simple e.g. Default.png then use the local image and if text is web URL with image then load data from image URL and create a image and then put on UIImageView.

I have checked many question here but did not get exact solution for what I want to achieve.

What I have done: (Which is not working)

```
//  imageViewViewController.h

#import <UIKit/UIKit.h>

@interface imageViewViewController : UIViewController<UITextFieldDelegate>
{
    IBOutlet UITextField * urlInput;
    IBOutlet UIImageView * myImgView;
}

- (IBAction)submit:(id)sender;
@end 
```

Code from .m file

```
- (IBAction)submit:(id)sender
{
    NSString *url = urlInput.text;
    UIImage *tempImg;

    if([self validateUrl:url]) {
        NSURL *imageurl = [NSURL URLWithString:url];
        NSData *imagedata = [[NSData alloc]initWithContentsOfURL:imageurl];
        tempImg = [UIImage imageWithData: imagedata];       
    } else {
        tempImg = [UIImage imageNamed:url];
    }

    if(tempImg == nil){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Image not present!!!" message:@"Image not present!!!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    } else {
        myImgView.image = tempImg;
    }
}

- (BOOL) validateUrl: (NSString *) candidate {
    NSString *urlRegEx =
    @"(http|https)://((\\w)*|([0-9]*)|([-|_])*)+([\\.|/]((\\w)*|([0-9]*)|([-|_])*))+";
    NSPredicate *urlTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", urlRegEx];
    return [urlTest evaluateWithObject:candidate];
} 
```

Even after entering correct image URL it is showing me alert "Image not present!!!"

I think there is problem with my URL validation function.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:26:21.507

You could use the

```
+(id)URLWithString:(NSString *)URLString 
```

method of `NSURL`, which returns nil if the string is not URL

"The string with which to initialize the NSURL object. Must be a URL that conforms to RFC 2396\. This method parses URLString according to RFCs 1738 and 1808." (c) [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:29:51.273

The code support the string is URL or Not,

```
NSString *incoming_string=@"http://www.gmail.com";
NSString *substring=@"http";
NSRange textRange = [incoming_string rangeOfString:substring];
  if(textRange.location != NSNotFound){
    NSLog(@"This is url image");
}else{
    NSLog(@"This is SYSTEM Image");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:33:51.767

```
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:txtField.text]]];
if(img)
{
// Do something
} 
```

Try this.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T11:36:09.733

Use this method to check for a valid url

```
- (BOOL)isValidUrl:(NSString *)urlString{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
    return [NSURLConnection canHandleRequest:request];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T12:20:13.167

There are two alternative to check valid URL :

Method 1:

```
- (BOOL)CheckUrl:(NSString *)urlString {
    NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
    return [NSURLConnection canHandleRequest:request];
} 
```

Method 2 :

```
NSString *urlRegEx = @"http(s)?://([\\w-]+\\.)+[\\w-]+(/[\\w- ./?%&amp;=]*)?"; 
```

Hope this might solve the problem

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T11:27:03.103

Use this code for check that its valid URL or not...

```
NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString: url]];
bool valid = [NSURLConnection canHandleRequest:req]; 
```

# php - 提取的 pdf 页面和某些 pdf 文件未上传 pdf 文件

> ID：16213448
> 
> 赞同：0
> 
> 时间：2013-04-25T11:23:44.497
> 
> 标签：php, mysql, imagemagick, wampserver, ghostscript

我在下面的脚本中使用 imagemagic/ghostscript 来提取 pdf 文件的第一页并将其转换为 jpg 格式，然后我使用 html 表单将 jpg 图片与 pdf 文件和其他信息一起上传到我的 wamp 服务器。但令我惊讶的是，它上传了一些pdf文件并进入确认页面，只有在上传成功时才会激活。但对于某些人来说，它会返回 $err 消息。你能帮帮我吗？

```
<?php include ('head.php');
    include ('connect.php');

    if(isset($_POST['submit'])) {

        $pdfDirectory = "pdf/";
        $thumbDirectory = "pdfimage/";

        //get the name of the file
        $filename = basename( $_FILES['pdf']['name'], ".pdf");

        //remove all characters from the file name other than letters, numbers, hyphens and underscores
        $filename = preg_replace("/[^A-Za-z0-9_-]/", "", $filename).".pdf";

        //name the thumbnail image the same as the pdf file
        $thumb = basename($filename, ".pdf");

                $title=$_POST['title'] ;
                $author= $_POST['author'] ; 
                $pub = $_POST['pub'];               
                $abstract= $_POST['abstract'] ;
                $year= $_POST['year'] ;
                $category= $_POST['cat'] ;  

                    if(move_uploaded_file($_FILES['pdf']['tmp_name'], $pdfDirectory.$filename)){

                        //the path to the PDF file
                        $pdfWithPath = $pdfDirectory.$filename;

                         //add the desired extension to the thumbnail
                        $thumb = $thumb.".jpg";

                        //execute imageMagick's 'convert', setting the color space to RGB and size to 200px wide
                        exec("convert \"{$pdfWithPath}[0]\" -colorspace RGB -background white -geometry 200 -flatten $thumbDirectory$thumb");

                        //show the image
                        //echo "<p><a href=\"$pdfWithPath\"><img src=\"pdfimage/$thumb\" alt=\"\" /></a></p>";

                        $imagez = "pdfimage/$thumb";

                        $query ="INSERT INTO books (title, author, publisher, abstract, year, category, book, bkimage) VALUES ('".$title."', '".$author."', '".$pub."', '".$abstract."', '".$year."', '".$category."', '".$filename."', '".$imagez."')" ;

        $result = mysql_query($query);

        if (!$result) {
            $err = "Could not Add to library at this time";
        } else {
            header('Location:confirm.php');

            }
                    }
        }

 ?> 
```

### 将书籍添加到图书馆

标题 作者 出版商 摘要 年份类别选择...建筑 建筑工程 土木工程 计算机 电气工程 土地测量 综合管理 机械工程 数量测量 其他 上传书    

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:55:56.747

代替

```
$err = "Could not Add to library at this time"; 
```

做这样的事情：

```
$err = "Could not Add to library at this time. SQL: ".$query; 
```

如果您无法查看问题出在哪里，请连接到 mysql 并运行查询。您应该能够看到mysql错误（我在第一个答案中要求=））。

# android - android supporting arabic in html tags?

> ID：16213449
> 
> 赞同：1
> 
> 时间：2013-04-25T11:23:45.273
> 
> 标签：android, html, lang

I want to use Arabic language inside html tags in android application,
the html tags are in the `strings.xml` file and its works perfectly with English language,
when I added Arabic version of the `strings.xml` file every thing is OK but the html string becomes understandably language ??
I tried to add

```
<head>
    <meta http-equiv="Content-Type" ; content="text/html; charset=utf-8" ; />
</head> 
```

but the problem still. how can I fix it ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:48:40.583

是的，我找到了，
我必须在我的活动中以这种方式加载文本
`aboutus.loadData(stringData, "text/html; charset=UTF-8", null);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:59:22.353

您是否更改了设备的区域设置？

您的阿拉伯语字符串文件必须位于此值文件夹中。“价值观-ar”

在您的活动类中，通过应用程序的代码更改您的设备区域设置。您可以在菜单上调用它或按下按钮。

```
 String languageCode = "ar_EG";
    Resources res = getResources();
        DisplayMetrics dm = res.getDisplayMetrics();
        android.content.res.Configuration conf = res.getConfiguration();
        conf.locale = new Locale(languageCode.toLowerCase());
        res.updateConfiguration(conf, dm);
        // you need to restart activity so that this change take place
        startActivity(new Intent(this, MyActivity.class));
        finish(); 
```

# javascript - 用 Angular.js替换src

> ID：16213457
> 
> 赞同：3
> 
> 时间：2013-04-25T11:24:20.427
> 
> 标签：javascript, angularjs

我目前正在构建标题图像的幻灯片，然后单击选择并设置该标题图像以替换旧图像。到目前为止，这是我的代码：

```
var app = angular.module('plunker', []);

app.controller('BannerCtrl', function($scope) {  

  var imageCounter = 0;

  $scope.nextButton = function () {
    imageCounter = imageCounter + 1;
    if (imageCounter === 1) {
      $scope.carouselState = 'second-slide';
    }
    if (imageCounter === 2) {
      $scope.carouselState = 'third-slide';
    }
    if (imageCounter > 2) {
      imageCounter = 0;
      $scope.carouselState = 'reset-slide';
    }
  };

  $scope.previousButton = function () {
    imageCounter = imageCounter - 1;
    if (imageCounter < 0) {
      imageCounter = 2;
      $scope.carouselState = 'third-slide';
    }
    if (imageCounter === 1) {
      $scope.carouselState = 'second-slide';
    }
    if (imageCounter === 0) {
      $scope.carouselState = 'reset-slide';
    }
  };

  $scope.setHeader = function () {
    if (imageCounter === 0) {
      $scope.currentbannerImage = '/styles/img/banner-default1.jpg';
      $scope.bannerState = '';
    }
  };

  $scope.currentbannerImage = [
    {
      src: "1.jpg"
    }
  ];

  $scope.bannerImages = [
    {
      src: "2.jpg"
    },
    {
      src: "3.jpg"
    },
    {
      src: "4.jpg"
    }
  ];
}); 
```

我还设置了一个 Plunker，以展示我的目标！

[http://plnkr.co/edit/vRexvso9RvLwyKK1vcKZ](http://plnkr.co/edit/vRexvso9RvLwyKK1vcKZ)

请有人可以帮我用其他“bannerImages”之一替换“currentBannerImage”吗？

谢谢，

J.P

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T12:04:13.823

您可以使用[AngularJS UI Bootstrap](http://angular-ui.github.io/bootstrap/#/carousel)来实现带有 AngularJS 的轮播（如果您的兴趣仅限于解决方案）。

**编辑：**

我不确定这是否是您想要的，但也许这会有所帮助：http: [//jsfiddle.net/FKUs3/](http://jsfiddle.net/FKUs3/)

```
<img ng-src="{{availableImages[currentImage].src}}"/> 
```

和

```
$scope.currentImage = 0;
$scope.availableImages = [
{
  src: "http://upload.wikimedia.org/wikipedia/commons/thumb/8/80/US_1.svg/50px-US_1.svg.png"
},
{
  src: "http://0.tqn.com/d/painting/1/0/V/_/1/Stencil-Number2a.jpg"
},
{
  src: "http://eminiunderground.com/wp-content/uploads/2012/02/Stencil-Number3a.jpg"
}
];

$scope.nextButton = function() {
  $scope.currentImage++;
  if ($scope.currentImage > ($scope.availableImages.length - 1)) {
    $scope.currentImage = 0;
  }
}
$scope.prevButton = function() {
  $scope.currentImage--;
  if ($scope.currentImage < 0) {
    $scope.currentImage = ($scope.availableImages.length - 1);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:52:58.340

我认为您可以简单地更改 setHeader 上 currentbannerImage 的值：

```
$scope.setHeader = function () {
    $scope.currentbannerImage = $scope.bannerImages[imageCounter];
}; 
```

# ruby-on-rails-3 - Rails 获取远程图像的标头响应

> ID：16213466
> 
> 赞同：1
> 
> 时间：2013-04-25T11:24:35.267
> 
> 标签：ruby-on-rails-3, http-headers, http-status-code-404

我在我的应用程序中加载了一些用户的 Facebook 图像（为了提高性能，我在数据库中加载了这张图片的 url）。但是当用户更改个人资料图片时，URL 也必须更改。

如何检测外部服务器的响应（例如何时是 404），以便我知道我必须刷新该用户的 url 图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:32:11.780

您可以使用[rest-client](https://github.com/rest-client/rest-client)，对 url 执行**头部**请求并检查响应状态。

# shell - 带有选定客户端 IP 地址的 snmptrap SNMPv3

> ID：16213470
> 
> 赞同：3
> 
> 时间：2013-04-25T11:24:41.940
> 
> 标签：shell, snmp, snmp-trap

我想发送陷阱并指定客户端地址

当我搜索时，有两种方法：

1.  编辑 /etc/snmp/snmp.conf 并设置：clientaddr [IP_OF_DEVICE]
2.  指定 IP 作为参数：--clientAddr="[IP_OF_DEVICE]"

当我尝试发出命令时：

```
snmptrap -v 3 -l noAuthNoPriv -u SomeUser -n "" AGENT_IP .1.3.6.1.4.1.161.5.2 .1.3.6.1.4.1.161.1.2.3.4 5 
```

它给出了一个错误

```
getaddrinfo(AGENT_IP, NULL, ...): Address family for hostname not supported 
```

当我没有指定 clientadress 时，它按预期工作，但它使用我发出命令的机器的 IP 作为客户端 IP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T06:57:41.853

为了摆脱这个，我必须：

*   为要模拟的设备的 ip 定义虚拟接口
*   指定代理协议（默认情况下，当我在 /etc/snmp/snmp.conf 中设置 clientaddr 时，它看起来像是尝试使用 IPv6 作为代理）

    snmptrap -v 3 -l noAuthNoPriv -u SomeUser -n "" udp:AGENT_IP ...

# ruby-on-rails - Ruby 的 Haml 代码转换

> ID：16213480
> 
> 赞同：0
> 
> 时间：2013-04-25T11:25:00.160
> 
> 标签：ruby-on-rails, haml, indentation

我在下面提到了这段代码，我试图让它在 haml 扩展下的 RoR 应用程序上工作。但是我得到了意想不到的关键字结尾。我阅读了网络和 stackoverflow，发现 HAML 中不需要 end 。但是，当我删除它时，我收到一条错误消息，提示应该使用 end 关键字。您能否检查并提示我我做错了什么？提前致谢。

```
<div id="comments">
<% @comments.each do |comment| %>
    <div class ="comment">
    <%= simple_format comment.content %>
</div>
<%end%>
</div> 
```

到目前为止我所做的是：

```
%h1 Comments
 .comments
 - @comments.each do |comment|
 .comment
 = simple_format comment.content 
```

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:26:48.410

请注意，haml 基于 2 个空格缩进。您的html的正确haml版本是

```
#comments
  - @comments.each do |comment|
    .comment
      = simple_format comment.content 
```

# android - android java中的Ajax发布数据

> ID：16213484
> 
> 赞同：0
> 
> 时间：2013-04-25T11:25:07.730
> 
> 标签：android, ajax, json, http-post

我是新的 t ajax，但对 android 很熟悉。我正在将 ajax 程序转换为 android 应用程序。作为其中的一部分，我需要将数据发布到服务器。下面是 ajax 中给定的 post 命令。

```
var postTo = 'xyz.php';
 $.post(postTo,{employee_name: $('[name=employee_name]').val() , phone: $('[name=phone]').val(), employee_type: 'guest' } ,
 function(data) {

 if(data.success){
 window.localStorage["sa_id"] = data.mid;
 window.location="getempdb.html";
 }

 if(data.message) {
 $('#output').html(data.message);
 } else {
 $('#output').html('Could not connect');
 }
 },'json'); 
```

我想在 android 中实现这一点，但在上述陈述中很少。任何擅长ajax的人都可以帮我解决这个问题。截至目前，我将用户名和电话号码作为编辑文本输入。我需要使用 http 客户端将此发送到 php。我知道如何使用 php 发送数据，但不知道要发送什么格式以及它是要发送的字符串还是要发送的 json 对象。请帮助解释上述代码并提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:53:04.457

显然，`UrlEncodedFormEntity`如果您`HttpClient`在 android 中使用，这将使用。

这是通过使用 List 创建的`NameValuePair`。

从参数到 $.post：

```
{employee_name: $('[name=employee_name]').val() , phone: $('[name=phone]').val(), employee_type: 'guest' } 
```

您必须创建一个 NameValuePair for `employee_name`，一个 for `phone`... 每个都从 HTML 元素 name 中获取`employee_name`，`phone`... 这是您从 EditTexts 中放置值的地方。

它返回一个 JSON 格式的字符串，您必须对其进行解析（通常`JSONObject obj = new JSONObject(result);`在您从服务器获取结果后使用）

在这个 JSON 对象中，你有一个名为 的键`success`，它没有指定格式，除非你可以假设如果它存在的话一切顺利；一把钥匙`mid`，一把钥匙`message`。

# php - 如果 div 在左侧，则显示图像背景 1，如果图像在右侧，则显示背景 2？

> ID：16213487
> 
> 赞同：0
> 
> 时间：2013-04-25T11:25:09.520
> 
> 标签：php, css

嗨，我想知道是否有人可以提供帮助，不完全确定这是可能的，但我有一个名为的 div 容器`<div class="scroll">`

在 div scroll 内部是一个 sql 查询，它与数据库中用户发布的评论相呼应。div滚动设置为600px的宽度，所以评论会从左到右排列在这个div中，每行有两个评论框，每个评论框都在300px以下，以便彼此对齐。

评论如下所示：

```
<div class="scroll">

comment 1 | comment 2
comment 3 | comment 4
comment 5 | comment 6
</div> 
```

评论包含在 div "comment_box" 中

现在我所做的是将背景图像放入 div “comment_box” 这个图像是一个指向左侧并位于 div 左侧的指针箭头，但我也想要第二个背景图像右侧对齐的注释框，因此在这种情况下，注释 2、4 和 6 将具有不同的背景图像/指向 div 右侧右侧的箭头。

这可能吗？

谢谢

```
comment box{

.wall_post_case_branch {
    background-image:url(../img/effects/arrow_left.png);
    background-repeat:no-repeat;
    background-position: center;
    height:90px;
    width:290px;
    position:relative;
        border:#ccc 1px solid;

}

mysql:

<?php
    if(mysql_num_rows($wallposts_set) > 0) {
        while ($posts = mysql_fetch_array($wallposts_set)) {
            $age = days_from_date($posts['date_added']);
            ?>
            <div class="comment_box">
             <?php echo "{$posts['content']}"; ?>
             </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:30:23.030

您可以按如下方式进行。

```
<?php
    $i = 0;
    while ($posts = mysql_fetch_array($wallposts_set))
    {
        $class = ' odd';
        if ($i++ % 2 == 0)
        {
            $class = ' even';
        }
        echo '<div class="comment_box'.$class.'">';
    }
?> 
```

并且在`css`

```
.odd { background-image:imageone.jpg; }
.even{ background-image:imagesecond.jpg; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:54:17.740

您也可以使用 CSS 简单地执行此操作：

```
:nth-child(even)
:nth-child(odd) 
```

小提琴用背景颜色而不是图像来说明。

[http://jsfiddle.net/ingvi/CFMcA/](http://jsfiddle.net/ingvi/CFMcA/)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:30:22.457

我会在 while 循环之前生成变量`$i = 0;`。

它将使用它来定义它应该使用的背景颜色。

然后在while循环中我会使用这个代码：

```
while ($posts = mysql_fetch_array($wallposts_set)) {
    $i++;
    $age = days_from_date($posts['date_added']);
    echo "<div class=\"comment_box_$i\">
    $posts['content']}
    </div>";
    if ($i == 2)
        $i = 0;
} 
```

然后这些盒子将有 2 个不同的类别，左边的一个将有，`class="comment_box_1"`而右边的盒子将有`class="comment_box_2"`.

然后，您可以为差异框创建 CSS。

享受

# apache - 按字母顺序递归尝试所有 url 并下载文件

> ID：16213490
> 
> 赞同：0
> 
> 时间：2013-04-25T11:25:23.450
> 
> 标签：apache, http, curl, wget

有没有办法递归和按字母顺序测试文件夹中所有可能的 url 并将所有文件递归下载到本地机器？

我知道 curl 和 wget，但我不确定它们是否像这样工作。

说... [http://www.domain.com/something/](http://www.domain.com/something/)

从那里递归下载位于子文件夹中的所有文件，如 aaa、aab、aba、baa、abb、bab、bbb、ccc ......以及脚本用户的所有可能数量的字母/数字和自定义限制。

# css - 使用盒子模型在其父 div 中包含项目

> ID：16213492
> 
> 赞同：5
> 
> 时间：2013-04-25T11:25:27.653
> 
> 标签：css, parent, children, contain

使用以下 HTML 和 CSS3 规则，我试图确保遵守以下标准：

> 我的所有标准都有效，除了第 1 项，孩子们超出了他们父母的宽度。问题：如何让孩子留在父母身边？

1.  li 项目不能超过其父宽度，即 400px
2.  img、label 和 currency 内容必须在它们的范围内垂直居中
3.  货币不应换行，应始终完整显示
4.  货币应始终尽可能靠近标签跨度显示。
5.  标签文本应固定在 2 行，并在超过 2 行的地方显示省略号。

注意：只需要在 Chrome 和 Safari 基于 webkit 的浏览器中工作。

它应该看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/CCMXs.png)

但是，它现在看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/9TZ2a.png)

有任何想法吗？

************************ [JS Fiddle 示例](http://jsfiddle.net/philipjmurphy/WDjZ3/3/)************************

```
<ul>
    <li>
        <span class="img"></span>
        <span class="label">Acclaim</span>
        <span class="currency">(USD 50)</span>
    </li>

    <li>
        <span class="img"></span>
        <span class="label">Acclaim 1 11 111 1111 11111</span>
        <span class="currency">(USD 50)</span>
    </li>

    <li>
        <span class="img"></span>
        <span class="label">Acclaim 1 11 111 1111 11111 2 22222 2222 22222 3 33 333 3333 33333 4 44 444 4444 44444 5 55 555 5555 55555 6 66 666 6666 66666</span>
        <span class="currency">(USD 50)</span>
   </li>
</ul>

ul {
    width: 400px;

    background-color: yellow;
    padding: 0;
    margin: 0;
}

li {
    display: -webkit-box;

    padding-right: 50px;
}

.label {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-pack: center;

    -webkit-line-clamp: 2;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: normal;
    word-wrap: break-word;
    line-height: 1.3em;
    margin-right: 0.2em;    

    background-color: pink;    
}

.currency {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-pack: center;

    white-space: nowrap;

    background-color: lightgreen;    
}

.img {
    display: block;
    width: 40px;
    height: 40px;
    margin-right: 0.1em;

    background-image:url('data:image/png;base64,iVBOR...);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T17:56:28.767

如果价格没有变宽，以下方法将起作用：

[http://jsfiddle.net/WDjZ3/4/](http://jsfiddle.net/WDjZ3/4/)

我只是将 margin-right 转换为像素，所以我知道标签以外的内容占用的空间，然后为其余部分添加了 max-width：

```
.label {   
    margin-right: 3px;  
    max-width: 294px;
} 
```

如果价格或图像是可变宽度，您将需要 js 读取它们的宽度，从 400px 中删除并将该值添加到 max-width。

这是一个使用 JavaScript 动态设置最大宽度的示例：http: [//jsfiddle.net/WDjZ3/7/](http://jsfiddle.net/WDjZ3/7/)

我没有检查所有尺寸，所以应该添加它以使其完全准确，否则边距会使价格不再合适。

我基本上检查了其他元素的宽度：

```
function getWidth(el) {   
    return parseInt(window.getComputedStyle(el,null).getPropertyValue("width"));
} 
```

然后我从 400px 中删除了这个宽度，并设置了 maxWidth：

```
for (var i=0; i<imgs.length; i++) {
    var width = 400 - (getWidth(imgs[i]) + getWidth(currencies[i])) + "px"; 
    labels[i].style.maxWidth = width;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T23:25:19.110

我已经解决了这个问题，无需 JavaScript。但是，它仅适用于更现代的浏览器，包括 Chrome 和 Opera。它在 Safari 中不起作用。一旦更新到最新规范，它将在 Firefox 中运行。我可能可以让它在 IE10 中工作，但我必须进一步研究。省略号仅适用于 Chrome/Safari，因为它是特定于供应商的。

该演示位于[http://jsfiddle.net/uLm92/1/](http://jsfiddle.net/uLm92/1/)

首先，我们要将 li 设为 flexbox 容器并将其设置为 400px，因此 flex 项将尝试适应该大小（稍后会详细介绍）：

```
li {
    /* make all items inside li as flex items */
    display: -webkit-flex;
    display: flex;

    height: 40px;
    max-width: 400px;
 } 
```

现在子项目是弹性项目，让标签适合的关键是将图像和价格设置为不弹性。对于价格，我们知道它希望始终是 40xp 宽，所以我设置了以下内容：

```
.img {
    width: 40px;
    height: 40px;

    -webkit-flex-basis: 40px;
    flex-basis: 40px;
    -webkit-flex-shrink: 0;
    flex-shrink: 0;
 } 
```

这表示 id 为 40px 的首选，并且永远不会使其更小。

然后我们还想告诉价格永远不要缩小，并且还要让匿名框（内容）居中：

```
.currency {

    /* make anonymous box vertically centred */ 
    display: -webkit-flex;
    display: flex;

    -webkit-align-items: center;
    align-items: center;

    /* make sure it never shrinks */ 
    -webkit-flex-shrink: 0;
   flex-shrink: 0;
} 
```

最后，我们还希望将标签文本居中。由于您需要省略号技巧，因此我使用了 WebKit 的旧 Flexbox 语法。如果不使用旧的 flexbox，line-clamp 属性不起作用：

。标签 {

```
/* need to use old flexbox for line-clamp to work
   it is a *horrible hack* */
display: -webkit-box;
display: flex;

-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow : hidden;
text-overflow: ellipsis;

-webkit-box-pack: center;
align-items: center; 
```

}

由于其他两项永远不会缩小，因此 .label 元素是唯一可以缩小的元素，因此如果没有剩余空间，它会缩小大小。

# java - 在休眠状态下对结果进行有条件排序

> ID：16213494
> 
> 赞同：1
> 
> 时间：2013-04-25T11:25:33.520
> 
> 标签：java, sql, hibernate

这是我正在使用的表格。有一个包含一些预定义列的 User 表（下例中的“名称”）和一个用于使架构扩展成为可能的 Extra Attributes 表。Extra Attributes 表将任何新扩展属性的值存储为键值对（'title' 和 'mobile' 是下面示例中的额外属性），并且 'user' 列用于连接主 User 表。这种安排通常适用于大多数操作，但我想不出一种方法来对用户的任何额外属性进行排序。

```
User Table:
---------------
id        name
============== 
1         jon  
2         harry

Extra attributes table:
--------------------------------
user   attr_key    attr_value
================================
1      title       engineer
1      mobile      111-2222-4444
2      title       manager
2      mobile      111-0000-5555

Result of joining the two tables above(few columns intentionally skipped):
--------------------------------------------
id        name     attr_key    attr_value
============================================
1         jon      title       engineer
1         jon      mobile      111-2222-4444
2         harry    title       manager
2         harry    mobile      111-0000-5555 
```

我正在为 ORM 使用休眠。以下是实体类：

```
@Entity
public class User {

    private Long id;
    private String name;
    private Set<ExtraAttributes> extraAttributes;

    public String getName() {}

    @OneToMany(mappedBy="user",fetch=FetchType.EAGER)
    public Set<ExtraAttributes> getExtraAttributes() {}

    ... 
}

@Entity
public class ExtraAttribute {

    private Long id;
    private String attrKey;
    private String attrValue;
    private User user;

    ...

    @ManyToOne(optional = false)
    public User getUser() {}

    ...
} 
```

我希望能够通过与特定 attr_key 相对应的 attr_value 对结果进行排序，例如“title”。问题是，如果我按 attr_value 排序结果，那么将考虑所有 attr_values，而我只想按与特定 attr_key - 'title' 对应的 attr_values 排序。我想过按 attr_key 和 attr_value 排序，但这似乎也不能解决问题。

# node.js - 如何在 node.js 模块中实现继承？

> ID：16213495
> 
> 赞同：34
> 
> 时间：2013-04-25T11:25:33.823
> 
> 标签：node.js

我正在编写 nodejs 应用程序。它基于expressjs。我对在 nodejs 模块中进行继承感到困惑。我想做的是创建一个模型基类，比如说 my_model.js。

```
module.exports = function my_model(){
  my_model.fromID = function(){
    //do query here
  }
} 
```

现在我想在我的其他模型类的 my_model 中使用这些方法。假设 user_model.js 我如何在 user_model 中继承 my_model？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-25T11:36:18.110

在 base_model 中：

```
function BaseModel() { /* ... */ }

BaseModel.prototype.fromID = function () { /* ... */ };

module.exports = BaseModel; 
```

在用户模型中：

```
var BaseModel = require('relative/or/absolute/path/to/base_model');

function UserModel() {
    UserModel.super_.apply(this, arguments);
}

UserModel.super_ = BaseModel;

UserModel.prototype = Object.create(BaseModel.prototype, {
    constructor: {
        value: UserModel,
        enumerable: false
    }
});

UserModel.prototype.yourFunction = function () { /* ... */ };

module.exports = UserModel; 
```

* * *

除了`Object.create()`直接使用，您还可以使用[util.inherits](http://nodejs.org/api/util.html#util_util_inherits_constructor_superconstructor)，因此您的`user_model`变为：

```
var BaseModel = require('relative/or/absolute/path/to/base_model'),
    util = require('util');

function UserModel() {
    BaseModel.apply(this, arguments);
}

util.inherits(UserModel, BaseModel);

UserModel.prototype.yourFunction = function () { /* ... */ };

module.exports = UserModel; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-02-21T20:48:42.710

在 ES6 中，不鼓励使用[util.inherits()](https://nodejs.org/docs/latest/api/util.html#util_util_inherits_constructor_superconstructor)以支持 ES6**类**和**扩展**

```
const EventEmitter = require('events');

class MyStream extends EventEmitter {
  constructor() {
    super();
  }
  write(data) {
    this.emit('data', data);
  }
}

const stream = new MyStream();

stream.on('data', (data) => {
  console.log(`Received data: "${data}"`);
});
stream.write('With ES6'); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-23T19:14:34.187

使用`utility.inherits`还可以帮助您`child`将`parent`.

`parent`您可以使用`super_`调用父级而不是显式调用。

```
var BaseModel = require('relative/or/absolute/path/to/base_model'),
util = require('util');

function UserModel() {
   this.super_.apply(this, arguments);
}

util.inherits(UserModel, BaseModel); 
```

`utility.inherits`来源：

```
var inherits = function (ctor, superCtor) {
ctor.super_ = superCtor;
ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
        value: ctor,
        enumerable: false
        }
    });
}; 
```

# vb.net - InStr 数组在字符串中

> ID：16213498
> 
> 赞同：1
> 
> 时间：2013-04-25T11:25:43.850
> 
> 标签：vb.net

目前我正在使用 InStr 在字符串中查找字符串，我是 VB.NET 的新手，想知道是否可以使用 InStr 搜索字符串中数组的每个元素，或者类似这样的函数：

```
InStr(string, array) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:33:57.943

你需要循环：

```
Dim bFound As Boolean = False
For Each elem As String In array
    If myString.Contains(elem) Then
        bFound = True
        Exit For
    End If
Next 
```

您可以将其转换为一个函数以轻松地多次调用它：

```
Public Function MyInStr(myString As String, array() As String) As Boolean
    For Each elem As String In array
        If myString.Contains(elem) Then return True
    Next

    return false
End Function 
```

然后：

```
MyInStr("my string text", New String() {"my", "blah", "bleh"}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T12:01:32.520

这是LINQ解决方案：

```
Dim a() = {"123", "321", "132"}
Dim v = a.Select(Function(x) InStr(x, "3")).ToArray
MessageBox.Show(String.Join(",", v)) '3,1,2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T11:59:35.167

将 SysDragon 的答案转换为经典的 asp：

你需要循环：

```
Dim bFound
bFound = False

For Each elem In myArray
    If InStr(myString, elem)>=0 Then
        bFound = True
        Exit For
    End If
Next 
```

您可以将其转换为一个函数以轻松地多次调用它：

```
Function MyInStr(myString, myArray)
    Dim bFound
    bFound = false

    For Each elem In myArray
        If InStr(myString, elem)>=0 Then
            bFound = True
            Exit For
        End If
    Next

    MyInStr = bFound
End Function 
```

然后：

```
MyInStr("my string text", Array("my", "blah", "bleh")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T11:35:26.300

如果您正在寻找在字符串数组中的任何项目中搜索字符串，那么您可以使用`array.find(<T>)`method. 在此处查看更多信息：http: [//msdn.microsoft.com/en-IN/library/d9hy2xwa%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-IN/library/d9hy2xwa%28v=vs.90%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:30:04.387

`Instr`返回一个整数，指定一个字符串在另一个字符串中第一次出现的起始位置。

参考[这个](http://www.homeandlearn.co.uk/net/nets7p4.html)

要在字符串中查找字符串，您可以使用其他方法

这是一个同时突出显示您搜索的所有文本的示例，但如果这不是您想要的，您必须自己解决它。

```
Sub findTextAndHighlight(ByVal searchtext As String, ByVal rtb As RichTextBox)
Dim textEnd As Integer = rtb.TextLength
Dim index As Integer = 0
Dim fnt As Font = New Font(rtb.Font, FontStyle.Bold)
Dim lastIndex As Integer = rtb.Text.LastIndexOf(searchtext)
While (index < lastIndex)
  rtb.Find(searchtext, index, textEnd, RichTextBoxFinds.WholeWord)
  rtb.SelectionFont = fnt
  rtb.SelectionLength = searchtext.Length
  rtb.SelectionColor = Color.Red
  rtb.SelectionBackColor = Color.Cyan
  index = rtb.Text.IndexOf(searchtext, index) + 1
End While
End Sub 
```

此方法在 RichTextBox2 中搜索文本“男孩”，将文本颜色更改为红色，将背景颜色更改为青色

```
 Private Sub Button5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click
 findTextAndHighlight("boy", RichTextBox2)   
 End Sub 
```

# c# - System.InvalidOperationException：内部连接致命错误。打开sql连接时

> ID：16213499
> 
> 赞同：1
> 
> 时间：2013-04-25T11:25:53.390
> 
> 标签：c#, sql, fatal-error

我刚刚开始在 C# 上使用 SQL，并且正在尝试连接到远程 SQL 服务器。我已将我的 IP 添加到具有远程访问权限的主机列表中。

我的代码不断产生这个错误：

> System.InvalidOperationException：内部连接致命错误。
> 在 System.Data.SqlClient.TdsParserStateObject.TryPocessHeader<>
> 在 System.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer<>
> 在 System.Data.SqlClient.TdsParserStateObject.TryReadByteArray<.Byte[] buff, Int32 offset, Int32 len, Int32& totalRead>

跟踪实际上比这更长，但那是前几行。

这是导致错误的代码（我的实际连接字符串具有正确的用户名、密码和数据库名称）：

```
connectionString = "Data Source=173.254.28.27,3306;Network Library=DBMSSOCN;Initial Catalog=myDatabase;User Id=myUserName;Password=myPassword;";
using (SqlConnection myConnection = new SqlConnection(connectionString))
{
    try { myConnection.Open(); }
    catch (Exception e) { Console.WriteLine(e.ToString()); }
} 
```

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:31:34.523

**已编辑**

如果您正在使用，`MySQL Server`那么您的连接字符串是错误的！

试试这个 connectionString ：

```
_connectionStr = new MySqlConnectionStringBuilder
            {
                Server = "173.254.28.27",
                Database = myDatabase,
                UserID = myUserName,
                Password = myPassword,
                ConnectionTimeout=60,
                Port = 3306,
                AllowZeroDateTime = true
            };
            _con = new MySqlConnection(_connectionStr.ConnectionString);

            try
            {
                _con.Open();
            }
            catch
            {
                Console.WriteLine("Error, help i can't get connected!");
            } 
```

如果您正在使用`SQLServer`尝试通过连接字符串禁用连接池！

通过添加 ：

> `Pooling=false`

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:21:15.970

创建一个udl文件，如果它连接那么问题是代码/应用程序，如果它没有连接，那么它是你的防火墙，连接字符串，dll库等。这里重要的可能是连接字符串。执行以下操作：创建一个空文本文件并将其重命名为“myconnection.udl”。现在双击该文件，它将启动一个小程序。您可以配置与数据库的连接并对其进行测试。（它将获取已注册的连接库等）。如果它给出确定，然后在记事本中打开 udl 文件，您将看到正确的连接字符串。粘贴到您的应用程序连接设置。UDL 文件通常被误解。它们只是一个保存连接设置的文本文件。然后他们调用连接 dll。如果 udl 文件有效，那么您有一个正确的连接字符串 100%

# windows-phone-8 - Windows phone 8 图像上传到 Windows azure

> ID：16213504
> 
> 赞同：0
> 
> 时间：2013-04-25T11:26:02.987
> 
> 标签：windows-phone-8, azure-storage, azure-blob-storage

我想从我的 windows phone 8 应用程序上传图片到 azure，我搜索了一个

很多，并在 windows phone 7 中找到了各种解决方案，都在使用

> “电话.存储”

，但是当我尝试为我的 windows phone 8 应用程序安装它时，它会抛出错误。我也尝试过使用 nuget 包管理器的各种包，但每个安装都失败了

> 'Microsoft.WindowsAzure.ConfigurationManager 1.7.0.3'。安装失败。滚回来...

请帮我解决这个问题，如果有好的教程，请分享。

祖克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:34:20.810

我有类似的问题，原因是VS2012 RTM附带的NuGet版本不支持WP8。您可以尝试将您的 NuGet 包管理器更新到最新版本吗？

去

```
Menu Tools -> Extensions and Updates -> Updates -> Visual Studio Gallery -> NuGet 
```

更新重启。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T09:20:06.623

如果您在尝试从 Nuget 安装 Azure 存储库时收到此错误。“无法安装包 'Microsoft.WindowsAzure.ConfigurationManager'”。这是因为您尝试安装的软件包不包括 Windows Phone 8 库。作为修复：从包管理器控制台使用此命令：Install-Package WindowsAzure.Storage-Preview -Pre

[在安装完 Azure 存储 SDK http://www.windowsazure.com/en-us/documentation/articles/mobile-services-windows-phone-upload-data-blob](http://www.windowsazure.com/en-us/documentation/articles/mobile-services-windows-phone-upload-data-blob-storage/)后，这里有一些关于如何实现它的文档 [-贮存/](http://www.windowsazure.com/en-us/documentation/articles/mobile-services-windows-phone-upload-data-blob-storage/)

# jquery - 访问 tr 数组中给定单元格的值

> ID：16213505
> 
> 赞同：0
> 
> 时间：2013-04-25T11:26:04.560
> 
> 标签：jquery

我得到了这个小提琴[http://jsfiddle.net/QupLN/3/](http://jsfiddle.net/QupLN/3/)的所有行，比如

```
var x =  $("tr").map(function(i,j){
return $(j).text();
}); 
```

我可以访问该数组中的一个项目，例如

```
console.log(x[1]); 
```

`console.log(x[1]);`保存我感兴趣的一行的数据。但是我想获取每个单元格的值`console.log(x[1]);`

例如，我如何访问中的名字值`x[1];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:31:37.813

尝试这个：

```
var x =  $("tr").map(function(i,j){
   return $(j).text();
});

var firstname = x[1].split("\n")[2];
var lastname  = x[1].split("\n")[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:30:23.317

您可以使用

```
 $("#tableId tr td:first-child").click(function() {
     $(this).text()
   }); 
```

# php - 删除 PHP 中使用 JavaScript 添加的空间

> ID：16213510
> 
> 赞同：1
> 
> 时间：2013-04-25T11:26:09.663
> 
> 标签：php, javascript

我的要求是使用 JavaScript 在逗号后添加空格，并且添加的空格应该使用
PHP 以继续我的操作。

## JavaScript：

```
return date.replace(/\,/g ,', '); 
```

## PHP代码：

```
$reqFilterData['reqFrmDt'] = preg_replace('/\s+/', '', $reqFilterData['reqFrmDt']); 
```

`$reqFilterData['reqFrmDt']`变量将日期作为其值。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:28:12.370

试试这个`str_replace`

```
$reqFilterData['reqFrmDt'] = str_replace(", ",",",$reqFilterData['reqFrmDt']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:27:33.347

您可以像这样使用 str_replace

```
$reqFilterData['reqFrmDt'] = str_replace(", ",",",$reqFilterData['reqFrmDt']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:28:09.373

```
$reqFilterData['reqFrmDt']= preg_replace('/( *)/', '',$reqFilterData['reqFrmDt']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T07:36:32.737

我的问题的答案是在控制器中我们必须像这样使用正则表达式

```
$reqFilterData['reqFrmDt'] = preg_replace('/[^a-zA-Z0-9-,s|]/', '', $reqFilterData['reqFrmDt']); 
```

# java - 如何使用循环引用进行json？

> ID：16213511
> 
> 赞同：1
> 
> 时间：2013-04-25T11:26:12.080
> 
> 标签：java, json, serialization, jackson

我有以下类构造创建循环依赖项。一般来说，`Jackson`库应该能够处理这些循环依赖。

我正在寻找一种方法，不必在每个具有循环性的类上使用注释，而是以某种方式在`ObjectMapper`.

```
@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "@id")
abstract class Shape;

class Line extends Shape {
    //a line can only connect 2 circles
    Circle from, to;
}

class Circle extends Shape {
    // a circle can have many lines connected
    List<Line> lines;
} 
```

然后我序列化一个列表，其中包含`circles`和`lines`：

```
List<Shape> shapes;

    ObjectMapper om = new ObjectMapper().setDefaultTyping(); 
```

是否可以在映射器上全局配置 id 生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:14:00.243

没有。由于不是所有类型都可以有 ids（只有 POJO 类型，即`Collection`s、`Map`s 和数组除外），并且由于细节可能会有所不同，因此没有与类型 ids 不同的“默认 id”设置。

# wpf - 我如何在 wpf 的 devexpress 中的 DataControlDetailDescriptor 中填充网格

> ID：16213523
> 
> 赞同：0
> 
> 时间：2013-04-25T11:26:44.440
> 
> 标签：wpf, windows, devexpress

当网格位于 wpf 的 devexpress 中的 DataControlDetailDescriptor 内时，我如何填充网格

什么是 itemsSourcePath 以及我应该为这个 ItemsSourcePath 分配哪个值。dxg:DataControlDetailDescriptor ItemsSourcePath="AccessProfiles"。

```
 <dxg:GridControl AutoPopulateColumns="True"   HorizontalAlignment="Left"         Margin="-9,52,0,0" Name="gridControl1" VerticalAlignment="Top" Height="415" Width="623" MasterRowExpanding="gridControl1_MasterRowExpanding" AutoExpandAllGroups="True" >
        <!--ItemsSource="{Binding Path=Bindd, Mode=OneWay}"-->

        <dxg:GridControl.View>
            <dxg:TableView Name="tableView1" ShowTotalSummary="True" />
        </dxg:GridControl.View>
        <dxg:GridControl.DetailDescriptor>
            <dxg:DataControlDetailDescriptor     x:Name="detail1" ItemsSourceBinding="{Binding Path=Bindd, Converter={StaticResource AlternationConverter1}}">
                <dxg:DataControlDetailDescriptor.DataControl>
                    <dxg:GridControl Name="detailGrid" AutoPopulateColumns="True" >

                        <dxg:GridControl.View >

                            <dxg:TableView NavigationStyle="Row" ShowGroupPanel="False"  ShowTotalSummary="True" />
                        </dxg:GridControl.View>
                    </dxg:GridControl>
                </dxg:DataControlDetailDescriptor.DataControl>
            </dxg:DataControlDetailDescriptor>
        </dxg:GridControl.DetailDescriptor>
    </dxg:GridControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:27:30.477

我相信您应该首先检查[DataControlDetailDescriptor 类文档](http://documentation.devexpress.com/#wpf/clsDevExpressXpfGridDataControlDetailDescriptortopic)。[DataControlDetailDescriptor.ItemsSourcePath 属性](http://documentation.devexpress.com/#wpf/DevExpressXpfGridDataControlDetailDescriptor_ItemsSourcePathtopic)也通过它的帮助参考进行了完整的描述。
相关示例：[使用网格和自定义内容创建详细信息并将它们放在选项卡式容器中](http://www.devexpress.com/Support/Center/Example/Details/E4031)

# php - htaccess mod_rewrite，一种语法有效，但其他没有

> ID：16213524
> 
> 赞同：-1
> 
> 时间：2013-04-25T11:26:44.773
> 
> 标签：php, .htaccess

当我在 .htaccess 中写入这个 mod_rewrite

```
 RewriteEngine on
 RewriteRule ^(.*)\.my_extension$ $1.php 
```

这很好用。

但是当我像这样尝试 mod_rewrite 时：

```
RewriteEngine on
RewriteRule ^(.*)$ index.php?url=$1 
```

这给了我`Internal Server Error`打开任何地址时，例如`site.com/somepage`

那么，这可能是什么原因呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:34:54.147

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !(index.php)
RewriteRule ^(.*)$ index.php?url=$1 
```

您有一个重定向循环，您需要从规则中排除 index.php。

# python - Updating h5py Datasets

> ID：16213525
> 
> 赞同：14
> 
> 时间：2013-04-25T11:26:48.080
> 
> 标签：python, hdf5, h5py

Does any one have an idea for updating hdf5 datasets from h5py? Assuming we create a dataset like:

```
import h5py
import numpy
f = h5py.File('myfile.hdf5')
dset = f.create_dataset('mydataset', data=numpy.ones((2,2),"=i4"))
new_dset_value=numpy.zeros((3,3),"=i4") 
```

Is it possible to extend the dset to a 3x3 numpy array?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T13:19:59.353

您需要使用“可扩展”属性创建数据集。在初始创建数据集后无法更改此设置。为此，[您需要使用“maxshape”关键字](https://code.google.com/p/h5py/wiki/HowTo#Appending_to_a_dataset_%28HDF5_1.8_only%29)。`None`元组中的值`maxshape`表示该维度可以是无限大小。因此，如果`f`是 HDF5 文件：

```
dset = f.create_dataset('mydataset', (2,2), maxshape=(None,3)) 
```

创建一个大小为 (2,2) 的数据集，该数据集可以沿第一个维度无限扩展，沿第二个维度扩展至 3。现在，您可以使用以下方法扩展数据集`resize`：

```
dset.resize((3,3))
dset[:,:] = np.zeros((3,3),"=i4") 
```

第一个维度可以随心所欲地增加：

```
dset.resize((10,3)) 
```

# playframework - 上传大文件时需要代理授权 1.2.5

> ID：16213531
> 
> 赞同：0
> 
> 时间：2013-04-25T11:27:02.427
> 
> 标签：playframework, playframework-1.x

我在播放 1.2.5 中上传大文件时需要代理授权。点击上传按钮后，没有调用所需的操作。但是，当我上传小型文件时，我没有收到此错误。可能是什么原因。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:42:23.440

这与玩无关。`play.netty.maxContentLength`虽然您可以通过在 中设置值来限制请求的大小（以及可上传文件的大小）`application.conf`，[但默认情况下没有限制](https://github.com/playframework/play/blob/master/framework/src/play/server/PlayHandler.java#L527)。

该问题很可能是由位于您和 Play 应用程序之间的代理服务器引起的，该代理服务器需要超过特定请求大小的身份验证。询问负责该代理服务器的人员如何规避此问题（例如，通过增加最大请求大小或为您提供代理的身份验证凭据）。

# hadoop - 跨所有节点的 Hadoop 版本

> ID：16213533
> 
> 赞同：2
> 
> 时间：2013-04-25T11:27:18.150
> 
> 标签：hadoop

Hadoop 的版本和安装位置是否必须在集群中的所有节点上完全相同？例如，如果我在 /usr/local/hadoop 的主节点上安装了 hadoop-0.18.2，那么版本和安装目录是否必须在所有数据节点中都相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:28:25.183

是的，它们必须相同，否则您将遇到重大问题。

# c# - edsdk - 以编程方式制作图片

> ID：16213538
> 
> 赞同：0
> 
> 时间：2013-04-25T11:27:55.287
> 
> 标签：c#, edsdk, canon-sdk

如何使用带有 edsdk 2.12 的相机 Canon EOS Rebel T3i/600D 拍照？我想使用 C# 以编程方式从相机拍摄照片。

# xcode - 如果 info.plist 中缺少某些键，则生成 xcode 警告？

> ID：16213540
> 
> 赞同：0
> 
> 时间：2013-04-25T11:27:58.380
> 
> 标签：xcode

如果info.plist 中不存在某些键（例如**URL 类型**
），是否可以生成 xcode 警告， 或者有什么方法可以提醒此类问题
任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:18:46.303

把[这个](https://stackoverflow.com/a/9530129/1270586)和[这个结合起来](http://shitmores.blogspot.ro/2011/04/xcode-tip-make-use-of-warning-directive.html)

您基本上阅读了 info.plist 并检查密钥是否存在，如果不存在，请添加警告（我不确定这是否有效，因为即使没有输入 if 语句也可能会调用 #warning 指令）。测试它，看看会发生什么。

# java - Aparapi 是否提供任务并行性？

> ID：16213541
> 
> 赞同：0
> 
> 时间：2013-04-25T11:28:01.473
> 
> 标签：java, opencl, aparapi

aparapi（Open CL 的 Java 中的 API）是提供任务并行还是仅提供数据并行。如果提供任务并行性，是否保证任务将在不同的设备上执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T16:38:54.513

Aparapi 不仅仅是用于 OPENCL 的 Java 中的 API，它还是一个并行处理库。

您可以在 GPU 或 CPU 上执行 Aparapi 内核。如果您选择在您的 GPU 上运行 Aparapi 内核，但 Aparapi 无法为您的 GPU 交叉编译内核，或者您的 GPU 无法处理 Aparapi 的输出，它将尝试回退到您的 CPU。当它这样做时，它会产生一个警告。

Aparapi 只会尝试在单个设备上运行内核，而不是在许多不同的设备上运行。如果您打算这样做，您将需要手动决定是否以及如何执行此操作。

我希望这能回答你的问题。

# css - css 完成后保持动画

> ID：16213542
> 
> 赞同：3
> 
> 时间：2013-04-25T11:28:02.807
> 
> 标签：css

例如，我从 1 到 2 进行缩放，并且我想让它在缩放到 2 时保持不变，例如，当用户悬停一些它被缩放的图像时，这可能吗？

```
@-webkit-keyframes scale {
    from {
        transform: scale(1);
        -ms-transform: scale(1); /* IE 9 */
        -webkit-transform: scale(1); /* Safari and Chrome */
    }
    to {
        transform: scale(1.5);
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari and Chrome */
    }
}
@keyframes scale {
    from {
        transform: scale(1);
        -ms-transform: scale(1); /* IE 9 */
        -webkit-transform: scale(1); /* Safari and Chrome */
    }
    to {
        transform: scale(1.5);
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari and Chrome */
    }
}

div.item:hover
{
animation: scale 2s;
-webkit-animation: scale 2s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T06:22:47.613

使用`animation-fill-mode`：`forwards`或`both`

```
div.item:hover
{
animation: scale 2s forwards;
-webkit-animation: scale 2s forwards;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:13:50.803

您可以使用过渡属性而不是关键帧动画。

```
div.item {
    transform: scale(1);
    transition: all .2s;
}

div.item:hover {
  transform: scale(1.5);
} 
```

看这个小提琴的例子：http: [//jsfiddle.net/8eHHL/](http://jsfiddle.net/8eHHL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-06T18:49:08.860

用这个：

```
.div.item { animation: bubble 1.0s forwards;
   -webkit-animation: bubble 1.0s forwards;  /* for other modern browsers */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T12:17:07.720

I'm afraid it's impossible to keep result of animation in your case. You bind animation on hover and trying to keep it when user blurs mouse from your element. But there is ability to keep animaton on click. [click event is done with :target](http://tympanus.net/Tutorials/CSS3Lightbox/index2.html#page)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:41:59.473

使用这个。我认为它会工作。我只提供你需要为所有人编写的 webkit(Crome) 版本。

```
@-webkit-keyframes scale{
     0% {
        transform: scale(1);
        -ms-transform: scale(1); /* IE 9 */
        -webkit-transform: scale(1); /* Safari and Chrome */
     }
     100% {
        transform: scale(1.5);
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari and Chrome */
     }
    }

div.item:hover
{
  -webkit-animation: scale 2s;
} 
```

# javascript - jQuery 自动完成和本地获取的 json 数据

> ID：16213543
> 
> 赞同：0
> 
> 时间：2013-04-25T11:28:05.140
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我正在努力使用 jQuery UI 自动完成并从存储从 json 数组返回的所有数据的变量中读取自动完成值。这就是 JavaScript 的样子：

```
function populate_branch(){
     $.get('/branch/list', {bank_name : $("#select_bank_name").val()}, function(branch_data){
        branch_index = branch_data;
     },"json");
};

for( var i = 0; i < branch_index.length; i++ )
  branch_autocomplete += "" + "\'" + branch_index[i].branch_code + "\'" + "},";

$("#branch_auto_complete").autocomplete({
            source: branch_autocomplete
}); 
```

当我尝试使用自动完成文本框时会发生什么，我的控制台做了一些非常奇怪的事情，它返回：

> //localhost:3000/undefined%7B'label':'301105'%7D,%7B'label':'301205'%7…'label':'639625'%7D,%7B'label':'639845' %7D,%7B'label':'639948'%7D,?term=41 404（未找到）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:36:19.940

你可以试试这个方法。

```
$.ajax({
     url: '/branch/list',
     type: "GET",
     data: {bank_name : $("#select_bank_name").val()} ,
     dataType: "json",
     async: false,
     success: function(dataType) { 

          for( var i = 0; i <  branch_index.length; i ++ ){
              index_branch_code[i] = branch_index[i].branch_name + " ("+ branch_index[i].branch_code + ")";
          }

         $("#branch_auto_complete").autocomplete({
              minLength: 0,
              source: branch_code,
         });
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:46:04.090

这就是我为完成这项工作所做的，

```
var branch_index;
var branch_autocomplete, branch_name;
var index_branch_code = new Array();
function populate_branch(){
     $.get('/branch/list', {bank_name : $("#select_bank_name").val()}, function(branch_data){
        branch_index = branch_data;
        for( var i = 0; i <  branch_index.length; i ++ )
        {
            index_branch_code[i] = branch_index[i].branch_name + " ("  + branch_index[i].branch_code + ")";
        }
     },"json");
};

$("#branch_auto_complete").autocomplete({
      minLength: 0,
      source: branch_code,
}); 
```

我只需要将所有数据推入一个数组并创建一个等于 index_branch_code 的新变量，以便浏览器将变量视为平面文件而不是动态文件。

# c++ - 客户端中的安全配置文件

> ID：16213546
> 
> 赞同：2
> 
> 时间：2013-04-25T11:28:08.833
> 
> 标签：c++, windows, sqlite, security, configuration-files

在一个项目中，我们将为每个客户端创建配置文件（也可以在每个客户端中使用 sqlite 而不是配置文件）。该文件将包括政策等关键信息。因此最终用户不得添加、删除、更改该配置文件或文件中的某些内容。

我正在考虑使用活动目录来防止用户打开包含我的配置文件的文件夹。

是否有使用安全配置文件的标准方法？

编辑：当然，读取文件的速度很重要，因为安全性

EDIT2：我不能用数据库服务器做到这一点，因为我的策略必须在没有互联网连接的情况下也可以访问。服务器将在某些时期更新该文件或 sqlite 表。我正在使用c++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:34:07.003

安全是一个相当广泛的问题。如果您的系统遭到入侵，会发生什么？有人亏钱吗？有人在游戏中获得加分吗？有人可以访问核导弹发射代码吗？某人的医疗数据是否会向公众公开？

所有这些或多或少都是重要的安全问题，但正如你可以想象的那样，核导弹发射对完全安全的要求比某些游戏中有人可以提高分数的要求更高，而金钱和健康显然最终处于中间的某个位置。这个范围，还有很多其他我们可以添加到列表中的东西。

您要保护的“用户”类型也很重要。是国家级安全专家（例如 FBI、CIA、KGB 等）、爱好黑客，还是普通计算机用户？加密文件将阻止普通用户，也许还有业余黑客，但国家安全专家肯定不会因此而受挫。

最终，如果保存数据的机器也知道如何读取数据，那么您就不可能拥有一个完全安全的系统。系统可以通过读取代码中的密钥来绕过，并重新实现作为“安全”一部分的任何解密/加密等。一旦数据为纯文本，就可以对其进行修改，然后重新加密并存储回来。

你当然可以让它变得更复杂，这意味着某人必须有更强烈的动机才能通过你复杂的方法来工作，但最终归结为“如果机器知道如何解密某些东西，那么某人访问机器可以解密内容”。

这取决于您（显然还有您正在关注其数据的“客户”和/或“合作伙伴”），您是否认为这是您可以冒险的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:33:40.227

很抱歉粉碎了您的希望和梦想，但是如果您的安全性基于客户端上的配置文件，那么您就完蛋了。

配置文件由您的应用程序加载和解密，这意味着可以在应用程序运行时使用特殊工具更改值。

如果安全性很重要，请在服务器而不是客户端上进行这些检查。

# winapi - 挂钩 NtQueryDirectoryFile 无法隐藏文件

> ID：16213552
> 
> 赞同：2
> 
> 时间：2013-04-25T11:28:18.513
> 
> 标签：winapi, hook

我想隐藏文件（在我的程序中）。我决定使用 NtQueryDirectoryFile。但是文件没有隐藏，代码不起作用。我不使用驱动程序，我使用用户模式。有人可以帮我吗？

代码片段：

```
typedef NTSTATUS (WINAPI * NTQUERYDIRECTORYFILE) (IN HANDLE FileHandle,IN HANDLE Event OPTIONAL,IN PIO_APC_ROUTINE ApcRoutine OPTIONAL,IN PVOID ApcContext OPTIONAL,OUT PIO_STATUS_BLOCK IoStatusBlock,OUT PVOID FileInformation,IN ULONG FileInformationLength,IN MYFILE_INFORMATION_CLASS FileInformationClass,IN BOOLEAN ReturnSingleEntry,IN PUNICODE_STRING FileName OPTIONAL,IN BOOLEAN RestartScan);

NTQUERYDIRECTORYFILE OriginalNtQueryDirectoryFile;

#define STATUS_NO_SUCH_FILE 0xC000000F

NTSTATUS
  HookedNtQueryDirectoryFile(
        IN HANDLE FileHandle,
        IN HANDLE Event OPTIONAL,
        IN PIO_APC_ROUTINE ApcRoutine OPTIONAL,
        IN PVOID ApcContext OPTIONAL,
        OUT PIO_STATUS_BLOCK IoStatusBlock,
        OUT PVOID FileInformation,
        IN ULONG FileInformationLength,
        IN MYFILE_INFORMATION_CLASS FileInformationClass,
        IN BOOLEAN ReturnSingleEntry,
        IN PUNICODE_STRING FileName OPTIONAL,
        IN BOOLEAN RestartScan)
{
    NTSTATUS status = OriginalNtQueryDirectoryFile(FileHandle,Event,ApcRoutine,ApcContext,IoStatusBlock,FileInformation,FileInformationLength,FileInformationClass,ReturnSingleEntry,FileName,RestartScan);

    vector<wstring> listDataForHidding;
    listDataForHidding.push_back(L"afile.txt");
    listDataForHidding.push_back(L"bfile.txt");
    listDataForHidding.push_back(L"cfile.txt");
    listDataForHidding.push_back(L"dfile.txt");

    if (NT_SUCCESS(status))
    {
        PMYFILE_DIRECTORY_INFORMATION FileDirectoryInfo, LastFileDirectoryInfo;
        PMYFILE_FULL_DIR_INFORMATION  LastFileFullDirectoryInfo, FileFullDirectoryInfo;
        PMYFILE_BOTH_DIR_INFORMATION  LastFileBothDirectoryInfo, FileBothDirectoryInfo;
        PMYFILE_NAMES_INFORMATION     LastFileNamesInfo, FileNamesInfo;

        ULONG Offset = 0;
        BOOL bNeedHide = FALSE;

        switch (FileInformationClass)
        {
            case FileDirectoryInformation :
                FileDirectoryInfo = NULL;

                do 
                {
                    //FileDirectoryInfo = (PVOID)((ULONG)FileInformation + Offset);
                    FileDirectoryInfo = (PMYFILE_DIRECTORY_INFORMATION)((ULONG)FileInformation + Offset);
                    LastFileDirectoryInfo = FileDirectoryInfo;

                    wstring wstrCurrFileName = FileDirectoryInfo->FileName;
                    bNeedHide = FALSE;
                    for(size_t index = 0; index < listDataForHidding.size(); index ++)
                    { 
                        if(wstrCurrFileName.find(listDataForHidding[index]) != wstring::npos)
                        {

                            bNeedHide = TRUE;
                            break;
                        }
                    }

                    //if (FileDirectoryInfo->FileName[0] == 0x5F00)
                    if(bNeedHide == TRUE)
                    {
                        if (!FileDirectoryInfo->NextEntryOffset)
                        {
                            if (LastFileDirectoryInfo) LastFileDirectoryInfo->NextEntryOffset = 0;
                            else status = STATUS_NO_SUCH_FILE;
                            return status;
                        } else 
                        if (LastFileDirectoryInfo) LastFileDirectoryInfo->NextEntryOffset += FileDirectoryInfo->NextEntryOffset;                        
                    }

                    Offset += FileDirectoryInfo->NextEntryOffset;

                } while (FileDirectoryInfo->NextEntryOffset);

            break;

            case FileFullDirectoryInformation :
                FileFullDirectoryInfo = NULL;
                do
                {
                    LastFileFullDirectoryInfo = FileFullDirectoryInfo;
                    //FileFullDirectoryInfo = (PVOID)((ULONG)FileInformation + Offset);
                    FileFullDirectoryInfo = (PMYFILE_FULL_DIR_INFORMATION)((ULONG)FileInformation + Offset);

                    wstring wstrCurrFileName = FileDirectoryInfo->FileName;
                    bNeedHide = FALSE;

                    for(size_t index = 0; index < listDataForHidding.size(); index ++)
                    { 
                        if(wstrCurrFileName.find(listDataForHidding[index]) != wstring::npos)
                        {    
                            bNeedHide = TRUE;
                            break;
                        }
                    }

                    //if (FileFullDirectoryInfo->FileName[0] == 0x5F00)
                    if(bNeedHide == TRUE)
                    {
                        if (!FileFullDirectoryInfo->NextEntryOffset)
                        {
                            if (LastFileFullDirectoryInfo) LastFileFullDirectoryInfo->NextEntryOffset = 0;
                            else status = STATUS_NO_SUCH_FILE;
                            return status;
                        } else 
                        if (LastFileFullDirectoryInfo) LastFileFullDirectoryInfo->NextEntryOffset += FileFullDirectoryInfo->NextEntryOffset;
                    }

                    Offset += FileFullDirectoryInfo->NextEntryOffset;

                } while (FileFullDirectoryInfo->NextEntryOffset);
            break;

            case FileBothDirectoryInformation :
                FileBothDirectoryInfo = NULL;
                do
                {
                    LastFileBothDirectoryInfo = FileBothDirectoryInfo;
                    //FileBothDirectoryInfo = (PVOID)((ULONG)FileInformation + Offset);
                    FileBothDirectoryInfo = (PMYFILE_BOTH_DIR_INFORMATION)((ULONG)FileInformation + Offset);

                    wstring wstrCurrFileName = FileDirectoryInfo->FileName;
                    bNeedHide = FALSE;

                    for(size_t index = 0; index < listDataForHidding.size(); index ++)
                    { 
                        if(FileBothDirectoryInfo->FileNameLength > 1 && wstrCurrFileName.find(listDataForHidding[index]) != wstring::npos)
                        {

                            bNeedHide = TRUE;
                            break;
                        }
                    }

                    //if (FileBothDirectoryInfo->FileNameLength > 1 && FileBothDirectoryInfo->FileName[0] == 0x5F00)
                    if(bNeedHide == TRUE)
                    {
                        if (!FileBothDirectoryInfo->NextEntryOffset)
                        {
                            if (LastFileBothDirectoryInfo) LastFileBothDirectoryInfo->NextEntryOffset = 0;
                            else status = STATUS_NO_SUCH_FILE;
                            return status;
                        } else 
                        if (LastFileBothDirectoryInfo) LastFileBothDirectoryInfo->NextEntryOffset += FileBothDirectoryInfo->NextEntryOffset;
                    }

                    Offset += FileBothDirectoryInfo->NextEntryOffset;

                } while (FileBothDirectoryInfo->NextEntryOffset);
            break;

            case FileNamesInformation :
                FileNamesInfo = NULL;
                do
                {
                    LastFileNamesInfo = FileNamesInfo;
                    //FileNamesInfo = (PVOID)((ULONG)FileInformation + Offset);
                    FileNamesInfo = (PMYFILE_NAMES_INFORMATION)((ULONG)FileInformation + Offset);

                    wstring wstrCurrFileName = FileDirectoryInfo->FileName;
                    bNeedHide = FALSE;

                    for(size_t index = 0; index < listDataForHidding.size(); index ++)
                    { 
                        if(wstrCurrFileName.find(listDataForHidding[index]) != wstring::npos)
                        {  
                            bNeedHide = TRUE;
                            break;
                        }
                    }

                    //if (FileNamesInfo->FileName[0] == 0x5F00)
                    if(bNeedHide == TRUE)
                    {
                        if (!FileNamesInfo->NextEntryOffset)
                        {
                            if(LastFileNamesInfo) LastFileNamesInfo->NextEntryOffset = 0;
                            else status = STATUS_NO_SUCH_FILE;
                            return status;
                        } else 
                        if (LastFileNamesInfo) LastFileNamesInfo->NextEntryOffset += FileNamesInfo->NextEntryOffset;
                    }

                    Offset += FileNamesInfo->NextEntryOffset;
                } while (FileNamesInfo->NextEntryOffset);

            break;
        }
    }

    return status;
} 
```

# java - 使用 AJAX 向 Struts Action 提交表单

> ID：16213553
> 
> 赞同：0
> 
> 时间：2013-04-25T11:28:20.833
> 
> 标签：java, ajax

```
function callProcessFastaFiles(){
    var form=document.forms[0];
    document.forms[0].action="/BioInformaticsOnlineTool/fromProcessFasta.do";
    document.forms[0].submit();
} 
```

我正在调用此函数将表单发送到服务器。如何使用 ajax 进行更改，以便在服务器完成后，响应出现在同一页面上？

# google-apps-script - Google Apps 电子表格根据当前日期（月）打开特定工作表

> ID：16213555
> 
> 赞同：3
> 
> 时间：2013-04-25T11:28:28.420
> 
> 标签：google-apps-script, google-sheets

我目前正在 Google Apps 中创建一个电子表格，用于记录客户出席情况。该电子表格包含 12 张工作表。每张表代表一年中的一个月，所以表一代表一月，表二代表二月，依此类推。

我正在尝试使用 On_Open 函数创建一个 Google Apps 脚本，以根据当前日期自动打开相关工作表。

例如，如果当前日期为 2013 年 2 月 18 日，则电子表格将自动打开，并以工作表 2（二月）为焦点。

我认为我在使用 SpreadsheetApp.setActiveSheet 时是正确的，但我不知道如何使用 Google App Script 捕获日期，特别是月份。

我假设脚本会像下面这样流动？

如果 Date = 18/02/2013 那么 SpreadsheetApp.setActiveSheet 2

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T18:07:40.117

要获取月份数，0 - 11：

```
var month = (new Date()).getMonth(); 
```

假设您有 { `Sheet1`.. `Sheet12`} 代表一月 - 十二月，那么这将起作用：

```
/**
 * Selects a monthly sheet
 */
function onOpen() {
  var month = (new Date()).getMonth();

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheets()[month];
  ss.setActiveSheet(sheet);
}; 
```

或者，您可以按月份命名工作表，然后按名称查找相应的每月工作表。这将允许您在电子表格中拥有其他非月度工作表：

```
/**
 * Selects a monthly sheet
 */
function onOpen() {
  var monthTabs = [ "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December" ];

  var month = (new Date()).getMonth();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName(monthTabs[month]);
  ss.setActiveSheet(sheet);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-15T18:12:45.113

以及按周显示的代码。

我的标签上写着一周的名字。

# java - 在java中迭代问题时删除

> ID：16213556
> 
> 赞同：0
> 
> 时间：2013-04-25T11:28:30.980
> 
> 标签：java

我想实现一个像这样工作的方法攻击：我部队中的每个战士都攻击从另一个部队中随机选择的战士。如果被攻击的战士死亡，则必须将其从部队中移除。使用我尝试的方法，我得到了随机数的错误：

```
 java.lang.IllegalArgumentException: n must be positive 
```

部队是List`<Creature>`战士；我认为我没有正确地进行删除，否则我不应该有那个错误。

```
public void atac(Troop opponentTroop){
        for(Creature f : warriors){
            Creature c = getOpponent(opponentTroop);
            f.atac(c);
            ListIterator<Creature> iterator = opponentTroop.warriors.listIterator();
            while(iterator.hasNext()){
                c = iterator.next();
                if(c.isDead()){
                    iterator.remove();                  
                }
            }   

        }       
    }

private Creature getOpponent(Troop opponent){
        int x = rand.getRandomArrayIndex(opponent.warriors.size());
        return opponent.warriors.get(x);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:33:33.603

删除条目会使迭代器无效。你需要保存它，你可以这样做：

```
while(iterator.hasNext()) {
    c = iterator.next();
    if(c.isDead()) {
        // Make a temporary iterator
        ListIterator<Creature> toDelete= c;
        // Step the regular one
        c = iterator.next();
        // Remove
        toDelete.remove();                  
    }
} 
```

此外，请确保`int x = rand.getRandomArrayIndex(opponent.warriors.size());`永远不会超出最后一个索引（即条目数**减去 1** .

# php - 仅具有特定类的 get_post() - Wordpress

> ID：16213558
> 
> 赞同：1
> 
> 时间：2013-04-25T11:28:37.700
> 
> 标签：php, wordpress

我正在使用 Wordpress 作为我正在构建的网站的 CMS。

页面模板：

```
 <?php get_header(); ?>

    <!-- Class here -->

    <div id="wrap">
        <div id="content" class="column">
            <?php if( have_posts() ): while( have_posts() ): the_post(); ?>

            <div class="post">

            <?php the_content(); ?>

            </div>

            <?php endwhile; endif; ?>
        </div>

        <div id="sidebar" class="column">
            <?php get_sidebar(); ?>
        </div>
    </div>

</div>

</div>
&nbsp;
<div>

<?php get_footer(); ?> 
```

我需要一个具有“ `theslide`”类的 div，在 之前调用，`#wrap (Class here)`而不是被后面的 php 再次调用。

可以按照“”的方式做某事`get_post if class=theslide`吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:50:50.040

感谢所有的意见，我的一个朋友帮助了我。

如果其他人有同样的问题：

```
<?php if( have_posts() ): while( have_posts() ): the_post();

$post_content = get_the_content();
preg_match('/(<div.*?class="theslide".*?<\/div>)(.*)/ism', $post_content, $content);

if( isset($content[1]) )
{
    echo $content[1];            //print the "theslide" div
    $page_content = $content[2];
}
else
{
    $page_content = $post_content;

}
?>

<div id="wrap">
    <div id="content" class="column">

        <div class="post">
            <?php echo $page_content; ?>
        </div>

    </div>
    <div id="sidebar" class="column">
        <?php get_sidebar(); ?>
    </div>
</div>
<?php endwhile; endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:11:46.597

您可以使用此插件将自定义字段添加到您的帖子 [http://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)

然后在你的循环中，你可以添加一个条件，比如

```
<?php 
     if(get_field('your_field_name' )){
        //add class 
     }
 ?> 
```

# soap - 测试 SOA 组合应用程序时出现异常

> ID：16213561
> 
> 赞同：2
> 
> 时间：2013-04-25T11:28:47.533
> 
> 标签：soap, weblogic, soa, jdeveloper

我正在开发 Oracle SOA Suite 11g，我是一名初学者，并且正在关注一些实验室，我在 JDeveloper 11g IDE 中开发一些 SOA 复合应用程序。在使用 WebLogic Server 的企业管理器测试复合应用程序时，我遇到了以下异常：

无法调用选定的操作执行。

调用 Web 服务操作时发生异常。请查看日志以获取更多详细信息。

```
oracle.sysman.emSDK.webservices.wsdlapi.SoapTestException: javax.xml.soap.SOAPException: oracle.j2ee.ws.saaj.ContentTypeException: Not a valid SOAP Content-Type: text/html; charset=UTF-8<br>

java.lang.Exception: oracle.sysman.emSDK.webservices.wsdlapi.SoapTestException: javax.xml.soap.SOAPException: oracle.j2ee.ws.saaj.ContentTypeException: Not a valid SOAP Content-Type: text/html; charset=UTF-8

    at oracle.sysman.emas.model.wsmgt.WSTestModel.invokeOperation(WSTestModel.java:813)
    at oracle.sysman.emas.view.wsmgt.WSView.invokeOperation(WSView.java:385)
    at oracle.sysman.emas.view.wsmgt.WSView.invokeOperation(WSView.java:302)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:187)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.apache.myfaces.trinidadinternal.taglib.util.MethodExpressionMethodBinding.invoke(MethodExpressionMethodBinding.java:53)
    at org.apache.myfaces.trinidad.component.UIXComponentBase.broadcastToMethodBinding(UIXComponentBase.java:1415)
    at org.apache.myfaces.trinidad.component.UIXCommand.broadcast(UIXCommand.java:183)
    at oracle.adf.view.rich.component.fragment.ContextSwitchingComponent$1.run(ContextSwitchingComponent.java:92)
    at oracle.adf.view.rich.component.fragment.ContextSwitchingComponent._processPhase(ContextSwitchingComponent.java:361)
    at oracle.adf.view.rich.component.fragment.ContextSwitchingComponent.broadcast(ContextSwitchingComponent.java:96)
    at oracle.adf.view.rich.component.fragment.UIXInclude.broadcast(UIXInclude.java:103)
    at oracle.adf.view.rich.component.fragment.ContextSwitchingComponent$1.run(ContextSwitchingComponent.java:92)
    at oracle.adf.view.rich.component.fragment.ContextSwitchingComponent._processPhase(ContextSwitchingComponent.java:361)
    at oracle.adf.view.rich.component.fragment.ContextSwitchingComponent.broadcast(ContextSwitchingComponent.java:96)
    at oracle.adf.view.rich.component.fragment.UIXInclude.broadcast(UIXInclude.java:97)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:475)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:756)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._invokeApplication(LifecycleImpl.java:957)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._executePhase(LifecycleImpl.java:427)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:207)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:301)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.emSDK.license.LicenseFilter.doFilter(LicenseFilter.java:101)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.adf.model.servlet.ADFBindingFilter.doFilter(ADFBindingFilter.java:205)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.adfinternal.view.faces.webapp.rich.RegistrationFilter.doFilter(RegistrationFilter.java:128)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:446)
    at oracle.adfinternal.view.faces.activedata.AdsFilter.doFilter(AdsFilter.java:60)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:446)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:271)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:177)
    at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.help.web.rich.OHWFilter.doFilter(Unknown Source)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.emas.fwk.MASConnectionFilter.doFilter(MASConnectionFilter.java:41)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.adf.library.webapp.LibraryFilter.doFilter(LibraryFilter.java:180)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.eml.app.AuditServletFilter.doFilter(AuditServletFilter.java:179)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.eml.app.EMRepLoginFilter.doFilter(EMRepLoginFilter.java:203)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.core.model.targetauth.EMLangPrefFilter.doFilter(EMLangPrefFilter.java:158)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.core.app.perf.PerfFilter.doFilter(PerfFilter.java:141)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.sysman.eml.app.ContextInitFilter.doFilter(ContextInitFilter.java:542)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:119)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:324)
    at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:460)
    at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:103)
    at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:171)
    at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:163)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:60)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3738)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3704)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2281)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2180)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1491)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221)
Caused by: oracle.sysman.emSDK.webservices.wsdlapi.SoapTestException: javax.xml.soap.SOAPException: oracle.j2ee.ws.saaj.ContentTypeException: Not a valid SOAP Content-Type: text/html; charset=UTF-8

    at oracle.sysman.emSDK.webservices.wsdlapi.dispatch.DispatchUtil.invoke(DispatchUtil.java:362)
    at oracle.sysman.emSDK.webservices.wsdlparser.OperationInfoImpl.invokeWithDispatch(OperationInfoImpl.java:1004)
    at oracle.sysman.emas.model.wsmgt.PortName.invokeOperation(PortName.java:750)
    at oracle.sysman.emas.model.wsmgt.WSTestModel.invokeOperation(WSTestModel.java:807)
    ... 79 more
Caused by: javax.xml.ws.WebServiceException: javax.xml.soap.SOAPException: oracle.j2ee.ws.saaj.ContentTypeException: Not a valid SOAP Content-Type: text/html; charset=UTF-8
    at oracle.j2ee.ws.client.jaxws.DispatchImpl.invoke(DispatchImpl.java:880)
    at oracle.j2ee.ws.client.jaxws.OracleDispatchImpl.synchronousInvocationWithRetry(OracleDispatchImpl.java:235)
    at oracle.j2ee.ws.client.jaxws.OracleDispatchImpl.invoke(OracleDispatchImpl.java:106)
    at oracle.sysman.emSDK.webservices.wsdlapi.dispatch.DispatchUtil.invoke(DispatchUtil.java:358)
    ... 82 more
Caused by: javax.xml.soap.SOAPException: oracle.j2ee.ws.saaj.ContentTypeException: Not a valid SOAP Content-Type: text/html; charset=UTF-8
    at oracle.j2ee.ws.saaj.client.p2p.HttpSOAPConnection.call2(HttpSOAPConnection.java:231)
    at oracle.j2ee.ws.common.transport.HttpTransport.transmit(HttpTransport.java:75)
    at oracle.j2ee.ws.common.async.MessageSender.call(MessageSender.java:67)
    at oracle.j2ee.ws.common.async.Transmitter.transmitSync(Transmitter.java:134)
    at oracle.j2ee.ws.common.async.Transmitter.transmit(Transmitter.java:90)
    at oracle.j2ee.ws.common.async.RequestorImpl.transmit(RequestorImpl.java:273)
    at oracle.j2ee.ws.common.async.RequestorImpl.invoke(RequestorImpl.java:94)
    at oracle.j2ee.ws.client.jaxws.DispatchImpl.invoke(DispatchImpl.java:824)
    ... 85 more
Caused by: oracle.j2ee.ws.saaj.ContentTypeException: Not a valid SOAP Content-Type: text/html; charset=UTF-8
    at oracle.j2ee.ws.saaj.soap.MessageFactoryImpl.createVersionedMessage(MessageFactoryImpl.java:281)
    at oracle.j2ee.ws.saaj.soap.MessageFactoryImpl.createMessage(MessageFactoryImpl.java:173)
    at oracle.j2ee.ws.saaj.client.p2p.HttpSOAPConnection.getHttpResponseMessage(HttpSOAPConnection.java:766)
    at oracle.j2ee.ws.saaj.client.p2p.HttpSOAPConnection.post2(HttpSOAPConnection.java:534)
    at oracle.j2ee.ws.saaj.client.p2p.HttpSOAPConnection$PrivilegedPost.run(HttpSOAPConnection.java:1287)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.j2ee.ws.saaj.client.p2p.HttpSOAPConnection.call2(HttpSOAPConnection.java:229)
    ... 92 more 
```

我被卡住了，有人可以提供线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:53:54.410

尝试使用 SOAPUI pr TCPMonitor 来分析客户端和 SOA 服务器之间的通信。这将告诉您是发送`text/html`还是发送`text/xml`。

此外，您应该检查与您正在测试的服务相对应的 SOA 服务器上的 WSDL，尝试访问`http://server:port/service?WSDL`以查看真正部署的内容。您也可以从测试控制台看到这一点。

然后，在您的 BPEL 编辑器 (jDeveloper) 中验证组合输入接口的定义，看看它是否约束输入格式。它是一个 WebService 调用接口，对吧？

# mod-rewrite - 在 Joomla 菜单中重写 URL

> ID：16213563
> 
> 赞同：0
> 
> 时间：2013-04-25T11:29:02.010
> 
> 标签：mod-rewrite, redirect, joomla, menu, rewrite

我和我的团队正在与 Joomla 一起做一个学校项目。我们有自定义 php 来列出我们数据库中的“文章”，并且 PHP 正在从`$_GET`（从 url）获取其数据。跳到问题：

这就是我们所拥有的：

```
example.com/articles/menu 
```

我们想要：

```
example.com/articles/menu?q=something+something 
```

你如何重写/添加文本到 url，所以我们得到这种格式？
我们使用的是学校服务器，所以我们在服务器上没有管理员权限。
我在 .htaccess 中尝试了 mod_rewrite 规则，但没有成功。
服务器正在运行 Windows。
我们正在使用 joomla 2.5

```
RewriteEngine On

RewriteRule ^index.php/articles/menu?q=something+something$ /index.php/articles/menu [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:51:32.613

试试这个：

```
RewriteEngine On
RewriteRule ^/articles/menu$ index.php/articles/menu?q=something+something [QSA,L] 
```

这将完成这项工作。

嘿顺便说一下，试着谷歌一下，这样简单的事情有很多答案**`;)`**

查看有关 QSA 指令的正确文档：[http ://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)

# php - 检查生成的许可证是否有效

> ID：16213566
> 
> 赞同：9
> 
> 时间：2013-04-25T11:29:13.877
> 
> 标签：php, security, function, license-key

我有一个 PHP 脚本，它生成一些将用作许可证密钥的字符串：

```
function KeyGen(){
     $key = md5(microtime());
     $new_key = '';
     for($i=1; $i <= 25; $i ++ ){
               $new_key .= $key[$i];
               if ( $i%5==0 && $i != 25) $new_key.='-';
     }
  return strtoupper($new_key);
  }
$x = 0;
while($x <= 10) {
  echo KeyGen();
  echo "<br />";
$x++; 
} 
```

运行脚本一次后，我得到了这些：

```
8B041-EC7D2-0B9E3-09846-E8C71
C8D82-514B9-068BC-8BF80-05061
A18A3-E05E5-7DED7-D09ED-298C4
FB1EC-C9844-B9B20-ADE2F-0858F
E9AED-945C8-4BAAA-6938D-713ED
4D284-C5A3B-734DF-09BD6-6A34C
EF534-3BAE4-860B5-D3260-1CEF8
D84DB-B8C72-5BDEE-1B4FE-24E90
93AF2-80813-CD66E-E7A5E-BF0AE
C3397-93AA3-6239C-28D9F-7A582
D83B8-697C6-58CD1-56F1F-58180 
```

我现在要做的是更改它，以便我有另一个函数来检查密钥是否已使用我的脚本生成。目前，我正在考虑将 设置`$key`为一个特定字符串（例如，`test`）的 MD5，但是，当然，这会返回所有字符串相同。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T14:40:43.710

有三种基本的处理方法。你如何做到这一点取决于你生成了多少密钥，以及能够在以后使密钥失效的重要性。你选择哪一个取决于你。

# 选项 1：服务器数据库存储

当服务器生成密钥（例如使用您的算法）时，您将其存储在数据库中。然后，您需要做的就是检查密钥是否在数据库中。

**请注意**，您的算法需要的熵比您提供的要多得多。当前时间戳是**不够**的。相反，使用强随机性：

```
$key = mcrypt_create_iv($length_needed, MCRYPT_DEV_URANDOM); 
```

或者，如果您没有 mcrypt：

```
$key = openssl_random_pseudo_bytes($length_needed); 
```

或者，如果您没有 mcrypt 和 openssl，请使用[库](https://github.com/ircmaxell/RandomLib)

请注意，它`md5`返回一个十六进制输出 (a-f0-9)，其中所有以上都返回完整的随机二进制字符串（字符 0 - 255）。所以要么`base64_encode()`它，要么`bin2hex()`它。

### 优点：

*   易于实施
*   可以在以后“停用”已发布的密钥
*   无法伪造新密钥

### 缺点：

*   每个键都需要持久存储
*   可能无法很好地扩展
*   需要“密钥服务器”来验证密钥

# 选项 2：签名密钥

基本上，您生成一个强随机密钥（从这里称为私钥），并将其存储在您的服务器上。然后，在生成许可证密钥时，您会生成一个随机 blob，然后 HMAC 用私钥对其进行签名，并使许可证成为该块的一部分。这样，您就不需要存储每个单独的密钥。

```
function create_key($private_key) {
    $rand = mcrypt_create_iv(10, MCRYPT_DEV_URANDOM);
    $signature = substr(hash_hmac('sha256', $rand, $private_key, true), 0, 10);
    $license = base64_encode($rand . $signature);
    return $license;
}

function check_key($license, $private_key) {
    $tmp = base64_decode($license);
    $rand = substr($tmp, 0, 10);
    $signature = substr($tmp, 10);
    $test = substr(hash_hmac('sha256', $rand, $private_key, true), 0, 10);
    return $test === $signature;
} 
```

### 优点：

*   易于实施
*   不需要持久存储
*   微不足道的规模

### 缺点：

*   无法单独“停用”密钥
*   需要存储“私钥”
*   需要“密钥服务器”来验证密钥。

# 选项 3：公钥加密

基本上，您生成一个公钥/私钥对。您将公钥嵌入到您的应用程序中。然后，您生成一个密钥（类似于上面的“签名密钥”），但不是使用 HMAC 签名对其进行签名，而是使用私钥对其进行签名。

这样，应用程序（具有公钥）可以直接验证签名，而无需回调您的服务器。

```
function create_key($private_key) {
    $rand = mcrypt_create_iv(10, MCRYPT_DEV_URANDOM);

    $pkeyid = openssl_get_privatekey($private_key);
    openssl_sign($rand, $signature, $pkeyid);
    openssl_free_key($pkeyid);

    $license = base64_encode($rand . $signature);
    return $license;
}

function check_key($license, $public_key) {
    $tmp = base64_decode($license);
    $rand = substr($tmp, 0, 10);
    $signature = substr($tmp, 10);

    $pubkeyid = openssl_get_publickey($public_key);
    $ok = openssl_verify($rand, $signature, $pubkeyid);
    openssl_free_key($pubkeyid);

    return $ok === 1;
} 
```

### 优点：

*   易于实施
*   不需要持久存储
*   微不足道的规模
*   不需要“密钥服务器”来验证密钥

### 缺点：

*   无法单独“停用”密钥
*   需要存储“私钥”

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-25T13:04:05.300

**笔记：**

此解决方案假设您希望您的许可证密钥始终存在`fixed format`（见下文）并且仍然`self authenticated`

```
 FORMAT : XXXXX-XXXXX-XXXXX-XXXXX-XXXX 
```

如果不是这种情况，请参阅`@ircmaxell`更好的解决方案

**介绍**

自我认证的串行是一个棘手的解决方案，因为：

*   序列号有限
*   它需要在没有数据库或任何存储的情况下自行验证
*   如果私钥泄露..很容易被逆转

**例子**

```
$option = new CheckProfile();
$option->name = "My Application"; // Application Name
$option->version = 0.9; // Application Version
$option->username = "Benedict Lewis"; // you can limit the key to per user
$option->uniqid = null; // add if any

$checksum = new Checksum($option);
$key = $checksum->generate();
var_dump($key, $checksum->check($key)); 
```

输出

```
string '40B93-C7FD6-AB5E6-364E2-3B96F' (length=29)
boolean true 
```

请注意，选项中的任何修改都会更改密钥并使其无效；

**检查碰撞**

我刚刚运行了这个简单的测试

```
set_time_limit(0);

$checksum = new Checksum($option);
$cache = array();
$collision = $error = 0;
for($i = 0; $i < 100000; $i ++) {
    $key = $checksum->generate();
    isset($cache[$key]) and $collision ++;
    $checksum->check($key) or $error ++;
    $cache[$key] = true;
}

printf("Fond %d collision , %d Errors  in 100000 entries", $collision, $error); 
```

输出

```
 Fond 0 collision , 0 Errors in 100000 entries 
```

**更好的安全性**

默认情况下，脚本使用`sha1`但`PHP`有很多更好的`hash functions`，您可以使用以下代码获得它

```
print_r(hash_algos()); 
```

例子

```
$checksum = new Checksum($option, null, "sha512"); 
```

**使用的类**

```
class Checksum {
    // Used used binaray in Hex format
    private $privateKey = "ec340029d65c7125783d8a8b27b77c8a0fcdc6ff23cf04b576063fd9d1273257"; // default
    private $keySize = 32;
    private $profile;
    private $hash = "sha1";

    function __construct($option, $key = null, $hash = "sha1") {
        $this->profile = $option;
        $this->hash = $hash;

        // Use Default Binary Key or generate yours
        $this->privateKey = ($key === null) ? pack('H*', $this->privateKey) : $key;
        $this->keySize = strlen($this->privateKey);
    }

    private function randString($length) {
        $r = 0;
        switch (true) {
            case function_exists("openssl_random_pseudo_bytes") :
                $r = bin2hex(openssl_random_pseudo_bytes($length));
                break;
            case function_exists("mcrypt_create_ivc") :
            default :
                $r = bin2hex(mcrypt_create_iv($length, MCRYPT_DEV_URANDOM));
                break;
        }
        return strtoupper(substr($r, 0, $length));
    }

    public function generate($keys = false) {
        // 10 ramdom char
        $keys = $keys ?  : $this->randString(10);
        $keys = strrev($keys); // reverse string

        // Add keys to options
        $this->profile->keys = $keys;

        // Serialise to convert to string
        $data = json_encode($this->profile);

        // Simple Random Chr authentication
        $hash = hash_hmac($this->hash, $data, $this->privateKey);
        $hash = str_split($hash);

        $step = floor(count($hash) / 15);
        $i = 0;

        $key = array();
        foreach ( array_chunk(str_split($keys), 2) as $v ) {
            $i = $step + $i;
            $key[] = sprintf("%s%s%s%s%s", $hash[$i ++], $v[1], $hash[$i ++], $v[0], $hash[$i ++]);
            $i ++; // increment position
        }
        return strtoupper(implode("-", $key));
    }

    public function check($key) {
        $key = trim($key);
        if (strlen($key) != 29) {
            return false;
        }
        // Exatact ramdom keys
        $keys = implode(array_map(function ($v) {
            return $v[3] . $v[1];
        }, array_map("str_split", explode("-", $key))));

        $keys = strrev($keys); // very important
        return $key === $this->generate($keys);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T11:41:57.757

您实际上正在寻找的是像 Partial Key Validation 这样的算法

有关工作原理，请参阅本文并将其移植到 PHP

[http://www.brandonstaggs.com/2007/07/26/implementing-a-partial-serial-number-verification-system-in-delphi/](http://www.brandonstaggs.com/2007/07/26/implementing-a-partial-serial-number-verification-system-in-delphi/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:35:33.060

创建这些键时将它们存储在数据库中。稍后将它们与数据库行匹配，瞧..它将完成

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-25T12:58:18.100

请注意，使用此算法获得重复密钥并非不可能，但不太可能，但中奖也是如此。您必须将密钥存储在数据库或文件中以检查它是否已经存在。

# database - 将模式转换为第二范式

> ID：16213567
> 
> 赞同：-2
> 
> 时间：2013-04-25T11:29:16.133
> 
> 标签：database, database-design

考虑一个基本的表模式：

> StudentID, Student Name, Department, courseCode, Course Name, year-Semester, Grade

如何通过识别函数依赖将其转换为**第二范式？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:10:39.903

我对前三个范式使用助记符。我使用 RePeaT 这个词忽略了元音。首先是没有重复组或多值字段，其次没有对主键的部分依赖，最后没有临时依赖。

在您的情况下，它看起来像 1NF 问题而不是 2NF。2NF 表示部分依赖，查看您的表没有复合主键，即主键具有超过 1 个字段，因此不存在部分依赖的可能性。因此对于 1NF，有两种可能性，一种是重复组，另一种是多值字段。因此，具有重复组的 1NF 示例在[此处](http://www.tutorialspoint.com/sql/first-normal-form.htm)，多值示例在[此处](http://en.wikipedia.org/wiki/First_normal_form)。

如果您有表的实际记录/行并提出以下问题会更好：是否有任何重复组或是否有任何多值字段？从那里您可以使用我上面提供的示例开始回答您的问题。

**根据您的新信息**：

你有：

```
 Table : Student
 Fields : StudentID, Student Name, Department

 Table : Course
 Fields : CourseCode, Course Name, Year, Semester

 Table: TableGrade
 Fields : StudentID, CourseID, Grade 
```

如果我们遵循您想要的，即 TableGrade 没有参加任何课程（或提供的课程，您将在稍后看到），那么我们需要在您的课程表中再添加一个字段以匹配您的 TableGrade 表或更改您的 TableGrade 的一个字段：

如果您只想更改课程表，它将是这样的：

```
Table: Course
Fields: CourseID, CourseCode, Course Name, Year, Semester 
```

如果您只想更改 TableGrade，它将是这样的：

```
Table: TableGrade
Fields: StudentID, CourseCode, Grade 
```

但是，如果您查看**课程**表，则会出现问题。假设你有原始的：

```
CourseCode, Course Name, Year, Semester 
```

如果您仔细查看此课程名称会出现不必要的重复，这实际上违反了 1NF，即没有重复组。在这种情况下，CourseCode 和 Course Name 会不必要地重复。

如果您还使用我提到的建议更改，它仍然会有问题：

```
CourseID, CourseCode, Course Name, Year, Semester 
```

在这种情况下，它违反了没有瞬态依赖的 3NF。在这种情况下，Course Name 取决于 CourseCode 而不是 CourseID 是主键。

另一件事是我们知道课程有部分，所以你至少会有

```
 CourseCode, Course Name, Section, Year, Semester 
```

所以，这就是为什么有一个课程更有意义或更合适的课程提供，然后添加另一个表名称课程作为参考表。

因此，新架构将如下所示：

```
 Table : Student
 Fields : StudentID, Student Name, Department

 Table : CoursesOffered
 Fields : CourseID, CourseCode, Section, Year, Semester

 Table: Courses
 Fields : CourseCode, Course Name

 Table: TableGrade
 Fields : StudentID, CourseID, Grade 
```

这对你有意义吗？

# jquery - 在 jquery 中翻转图像的逻辑

> ID：16213571
> 
> 赞同：0
> 
> 时间：2013-04-25T11:29:31.157
> 
> 标签：jquery, html, css

任何人都请解释我应该用来在图像滑块中翻转图像的逻辑。基本上我正在制作一个图像滑块，点击任何图像，它应该翻转并且我想在后面显示该图像的描述。

我试过例子。它们与单个图像完美配合，但是当我在我的示例中尝试时，它不起作用。我知道滑动是如何工作的，只需解释翻转图像的逻辑即可。

只要给我逻辑，我会尝试编写代码。

提前致谢，

## HTML

```
<head>
    <meta charset="utf-8">
    <title>HTML</title>
    <link rel="stylesheet" href="main.css" type="text/css" />
    <script src="jquery.js" type="text/javascript"></script>
    <script src="main.js" type="text/javascript"></script>
</head>
<body>
    <div id="f1_container">
        <div id="f1_card" class="shadow">
            <div class="front face">
                <img src="http://media-cdn.tripadvisor.com/media/photo-s/03/48/0b/14/dolphin-view-chalets.jpg" style="height: 281px; width: 450px;" />
            </div>
            <div class="back face center">
                Some text inside here
            </div>
        </div>
    </div> 
```

## CSS

```
#f1_container {
position: relative;
margin: 10px auto;
width: 450px;
height: 281px;
    z-index : 1;
}
#f1_container {
    -webkit-perspective: 1000;
    perspective: 1000;
}
#f1_card {
    width: 100%;
    height: 100%;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: all 1.0s linear;
    transform-style: preserve-3d;
    transition: all 1.0s linear;
}
#f1_container:hover #f1_card {
    -webkit-transform: rotateY(180deg);
    transform: rotateY(180deg);
    box-shadow: -5px 5px 5px #aaa;
}
.face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}
.face.back {
    display: block;
    -webkit-transform: rotateY(180deg);
    transform: rotateY(180deg);
    box-sizing: border-box;
    color: white;
    text-align: center;
    background-color: #aaa;
} 
```

# .net - 本地化到不同的字母表

> ID：16213572
> 
> 赞同：0
> 
> 时间：2013-04-25T11:29:35.183
> 
> 标签：.net

所以，我有一个用 C# 编写的完整的应用程序，完全支持本地化。到目前为止，我们已经完成了不同语言的翻译，但它们都使用拉丁字母。现在，我需要将我的应用程序翻译成俄语西里尔文。

有人可以快速告诉我进行这种转换需要做什么吗？

# spring - 使用 Hibernate 4.2 和 Spring 3.1.1 设置 MultiTenantConnectionProvider

> ID：16213573
> 
> 赞同：18
> 
> 时间：2013-04-25T11:29:35.807
> 
> 标签：spring, hibernate, orm, multi-tenant

我目前正在尝试使用单独的模式方法为多租户设置 Hibernate。
在研究了大约 2 天并浏览了几乎所有我可以通过 Google 找到的资源之后，我开始感到非常沮丧。

基本上我正在尝试遵循 Hibernate devguide [http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e4691](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e4691)
中提供的指南 但不幸的是我无法找到 ConnectionProviderUtils构建 ConnectionProvider。目前我正在尝试找出 2 点：

1.  为什么永远不会调用我的 MSSQLMultiTenantConnectionProvider 的 configure(Properties props) 方法。根据我从其他 ConnectionProvider 实现的来源和描述中解释的内容，我假设将调用此方法来初始化 ConnectionProvider。

2.  由于我无法使用 configure(Properties props)，我尝试了其他方法来获取应用程序上下文和 hibernate.cfg.xml 中指定的休眠属性和数据源。（就像将数据源直接注入到 ConnectionProvider 中一样）

任何指向解决此问题的可能方法的指针（方法、类、教程）

所以这里是我实现的相关部分：
**数据源和 Hibernate.cfg.xml：**

```
 <bean id="dataSource"   class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
        <property name="url" value="jdbc:sqlserver://<host>:<port>;databaseName=<DbName>;" />
        <property name="username" value=<username> />
        <property name="password" value=<password> />
   </bean>
   <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <!-- property name="dataSource" ref="dataSource" /-->
        <property name="annotatedClasses">
            <list>
                <value>c.h.utils.hibernate.User</value>
                <value>c.h.utils.hibernate.Role</value>
                <value>c.h.utils.hibernate.Tenant</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=org.hibernate.dialect.SQLServerDialect
                hibernate.show_sql=true
                hibernate.multiTenancy=SCHEMA
                hibernate.tenant_identifier_resolver=c.h.utils.hibernate.CurrentTenantIdentifierResolver
                hibernate.multi_tenant_connection_provider=c.h.utils.hibernate.MSSQLMultiTenantConnectionProviderImpl 
            </value>
        </property>
    </bean> 
```

**MSSQLMultiTenantConnectionProviderImpl：**

```
package c.hoell.utils.hibernate;

import java.sql.Connection;
import java.sql.SQLException;

import javax.sql.DataSource;

import org.hibernate.service.UnknownUnwrapTypeException;
import org.hibernate.service.jdbc.connections.spi.ConnectionProvider;
import org.hibernate.service.jdbc.connections.spi.MultiTenantConnectionProvider;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class MSSQLMultiTenantConnectionProviderImpl implements MultiTenantConnectionProvider  {

    private static final long serialVersionUID = 8074002161278796379L;

    @Autowired
    private DataSource dataSource;

    public void configure(Properties props) throws HibernateException {

    }

    @Override
    public Connection getAnyConnection() throws SQLException {
        Properties properties = getConnectionProperties(); //method which sets the hibernate properties

        DriverManagerConnectionProviderImpl defaultProvider = new   DriverManagerConnectionProviderImpl();
        defaultProvider.configure(properties);
        Connection con = defaultProvider.getConnection();
        ResultSet rs = con.createStatement().executeQuery("SELECT * FROM [schema].table");
        rs.close(); //the statement and sql is just to test the connection
        return defaultProvider.getConnection();
    }

    @Override
    public Connection getConnection(String tenantIdentifier) throws SQLException {
        <--not sure how to implement this-->
    }

    @Override
    public void releaseAnyConnection(Connection connection) throws SQLException {
        connection.close();

    }

    @Override
    public void releaseConnection(String tenantIdentifier, Connection connection){
        try {
            this.releaseAnyConnection(connection);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public boolean supportsAggressiveRelease() {
        return false;
    }

    @Override
    public boolean isUnwrappableAs(Class unwrapType) {
        return ConnectionProvider.class.equals( unwrapType ) || MultiTenantConnectionProvider.class.equals( unwrapType ) || MSSQLMultiTenantConnectionProviderImpl.class.isAssignableFrom( unwrapType );
    }

    @SuppressWarnings("unchecked")
    @Override
    public <T> T unwrap(Class<T> unwrapType) {
        if ( isUnwrappableAs( unwrapType ) ) {
            return (T) this;
        }
        else {
            throw new UnknownUnwrapTypeException( unwrapType );
        }
    }

    public DataSource getDataSource() {
        return dataSource;
    }

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

} 
```

现在，我看到有 2 种可能的方法可以从配置文件中获取我需要的配置。要么让 configure() 方法运行，要么以某种方式使 DataSource 的注入成为可能。我想第一个会是更好的方法。

需要提到的重要一点是，我只为一个租户启动并运行了 Hibernate（意味着不使用 MultiTenantConnectionProvider，使用 Hibernate 使用的标准 ConnectionProvider）

已经非常感谢任何正在阅读这篇文章的人。期待答案。

此致

## ***更新1：***

我对此进行了一些尝试，并将连接详细信息硬编码到我的 MultiTenantConnectionProvider 中（更新了上面的代码）。这对于 MultiTenantConnectionProvider 来说工作正常。但这仍然不能解决我的问题。**现在我的应用程序在初始化事务管理器**时失败：

```
<tx:annotation-driven transaction-manager="txManager" proxy-target-class="true"/>
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

这是**异常堆栈跟踪**的顶部：

> 原因：org.springframework.orm.hibernate4.HibernateTransactionManager.afterPropertiesSet(HibernateTransactionManager.java:264) 的 org.springframework.orm.hibernate4.SessionFactoryUtils.getDataSource(SessionFactoryUtils.java:101) 的 java.lang.NullPointerException .beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)

我在调试模式下追踪了这个问题，发现问题是我的 SessionFactory 不知何故没有掌握数据源。（我是否在 hibernate.cfg.xml 中指定 DataSource 没有区别）但是在初始化 TransactionManager 时，它尝试从 SessionFactory 获取 DataSource 并因此失败并出现 NullPointerException。有没有人暗示休眠的内部工作在哪一点失败了？在我看到的所有文档和帖子中，没有迹象表明我需要处理将 DataSource 注入到 SessionFactory 中。现在我只是想弄清楚如何将 DataSource 放入所需的位置或如何更改初始化流程。如果有人有更好的主意，我会非常高兴。

编辑：现在也在 Hibernate 论坛上发布了这个：

## ***更新 2：***

所以我设法通过将 TransactionManager 中的 autodetectDataSource 属性设置为 false 来解决这个问题：

```
<property name="autodetectDataSource" value="false"/> 
```

我从以下帖子[http://forum.springsource.org/showthread.php?123478-SessionFactory-configured-for-multi-tenancy-but-no-tenant-identifier-specified](http://forum.springsource.org/showthread.php?123478-SessionFactory-configured-for-multi-tenancy-but-no-tenant-identifier-specified)中得到了这个提示。不幸的是，我现在完全陷入了这个问题。^^" 但这是另一个主题的问题。（编辑：原来这只是早期测试的错误配置+一个旧的依赖项）

至于这个主题，问题仍然是我希望能够以某种方式重用 DataSource，无论如何我已经在配置中使用 Spring Security，以便 Hibernate 避免需要在两个地方配置 DataSource。所以问题仍然是如何在我的 MultiTenantConnectionProvider 中集成 DataSource 的使用。有没有人知道在哪里可以找到任何提示？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-05T07:25:21.250

根据[Steve Ebersole](https://stackoverflow.com/users/1082300/steve-ebersole)对这个问题的一位评论者（[HHH-8752](https://hibernate.atlassian.net/browse/HHH-8752?focusedCommentId=69229&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-69229)）提到的 JIRA 问题的评论：

> 首先，Hibernate “实例化由 ... MULTI_TENANT_CONNECTION_PROVIDER 和 MULTI_TENANT_IDENTIFIER_RESOLVER 引用的类”根本不是真的。Hibernate 首先尝试将这些设置视为其预期类型的​​对象（MultiTenantConnectionProvider 用于 MULTI_TENANT_CONNECTION_PROVIDER 和 CurrentTenantIdentifierResolver 用于 MULTI_TENANT_IDENTIFIER_RESOLVER。
> 
> 因此，只需直接传递您的 bean，根据需要进行配置。

**我只是按照他的建议并设法使它起作用。**

这是一个`CurrentTenantIdentifierResolver`定义为 Spring Bean：

```
@Component
@Scope(value = "request", proxyMode = ScopedProxyMode.TARGET_CLASS)
public class RequestURITenantIdentifierResolver implements CurrentTenantIdentifierResolver {

    @Autowired
    private HttpServletRequest request;

    @Override
    public String resolveCurrentTenantIdentifier() {
        String[] pathElements = request.getRequestURI().split("/");
        String tenant = pathElements[1];
        return tenant;
    }

    @Override
    public boolean validateExistingCurrentSessions() {
        return true;
    }
} 
```

这是一个`MultiTenantConnectionProvider`定义为 Spring Bean：

```
@Component
public class SchemaPerTenantConnectionProviderImpl implements MultiTenantConnectionProvider {

    @Autowired
    private DataSource dataSource;

    @Override
    public Connection getAnyConnection() throws SQLException {
        return dataSource.getConnection();
    }

    @Override
    public void releaseAnyConnection(final Connection connection) throws SQLException {
        connection.close();
    }

    @Override
    public Connection getConnection(final String tenantIdentifier) throws SQLException {
        final Connection connection = getAnyConnection();
        try {
            connection.createStatement().execute("USE " + tenantIdentifier);
        } catch (SQLException e) {
            throw new HibernateException("Could not alter JDBC connection to specified schema [" + tenantIdentifier + "]",
                                         e);
        }
        return connection;
    }

    @Override
    public void releaseConnection(final String tenantIdentifier, final Connection connection) throws SQLException {
        try {
            connection.createStatement().execute("USE dummy");
        } catch (SQLException e) {
            // on error, throw an exception to make sure the connection is not returned to the pool.
            // your requirements may differ
            throw new HibernateException(
                    "Could not alter JDBC connection to specified schema [" +
                            tenantIdentifier + "]",
                    e
            );
        } finally {
            connection.close();
        }
    }

    @Override
    public boolean supportsAggressiveRelease() {
        return true;
    }

    @Override
    public boolean isUnwrappableAs(Class aClass) {
        return false;
    }

    @Override
    public <T> T unwrap(Class<T> aClass) {
        return null;
    }
} 
```

最后，这是`LocalContainerEntityManagerFactoryBean`使用上述两个组件的有线连接：

```
@Configuration
public class HibernateConfig {

    @Bean
    public JpaVendorAdapter jpaVendorAdapter() {
        return new HibernateJpaVendorAdapter();
    }

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource,
                                                                       MultiTenantConnectionProvider multiTenantConnectionProvider,
                                                                       CurrentTenantIdentifierResolver tenantIdentifierResolver) {
        LocalContainerEntityManagerFactoryBean emfBean = new LocalContainerEntityManagerFactoryBean();
        emfBean.setDataSource(dataSource);
        emfBean.setPackagesToScan(VistoJobsApplication.class.getPackage().getName());
        emfBean.setJpaVendorAdapter(jpaVendorAdapter());

        Map<String, Object> jpaProperties = new HashMap<>();
        jpaProperties.put(org.hibernate.cfg.Environment.MULTI_TENANT,
                          MultiTenancyStrategy.SCHEMA);
        jpaProperties.put(org.hibernate.cfg.Environment.MULTI_TENANT_CONNECTION_PROVIDER,
                          multiTenantConnectionProvider);
        jpaProperties.put(org.hibernate.cfg.Environment.MULTI_TENANT_IDENTIFIER_RESOLVER,
                          tenantIdentifierResolver);
        emfBean.setJpaPropertyMap(jpaProperties);
        return emfBean;
    }
} 
```

我使用的数据源由[Spring Boot](http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-connect-to-production-database)自动提供。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-12T07:14:09.763

好的，总结一下，这就是我最终得到的结果。我使用一个简单的 CurrentTenantIdentifierResolver。而不是尝试从其他地方将 DataSource 注入到我的 MultiTenantConnectionProviderImpl 我在 ConnectionProvider 中创建 DataSource (c3p0 ComboPooledDatasource) 并开始仅使用我的 ConnectionProvider 提供的连接。所以我消除了额外的数据源。为了使 DataSource 的属性易于配置，我选择从属性文件中获取配置数据。

**CurrentTenantIdentifierResolverImpl:**

```
public class CurrentTenantIdentifierResolverImpl implements CurrentTenantIdentifierResolver {

    /**
     * The method returns the RequestServerName as tenantidentifier.
     * If no FacesContext is available null is returned.
     * 
     * @return String tenantIdentifier
     */
    @Override
    public String resolveCurrentTenantIdentifier() {
        if (FacesContext.getCurrentInstance() != null){
            return FacesContext.getCurrentInstance().getExternalContext().getRequestServerName();
        } else {
            return null;
        }
    }

    @Override
    public boolean validateExistingCurrentSessions() {
        return true;
    }

} 
```

**MultiTenantConnectionProviderImpl：**

请注意，PropertyUtil 只是一个简单的本地帮助类来获取我的属性。因为它没什么特别的，所以我不会把它包括在内，以免弄乱答案。

```
public class MultiTenantConnectionProviderImpl implements MultiTenantConnectionProvider  {

    private static final long serialVersionUID = 8074002161278796379L;

    private static Logger log = LoggerFactory.getLogger(MultiTenantConnectionProviderImpl.class );

    private ComboPooledDataSource cpds;

    private Properties properties;

    /**
     * 
     * Constructor. Initializes the ComboPooledDataSource based on the config.properties.
     * 
     * @throws PropertyVetoException
     */
    public MultiTenantConnectionProviderImpl() throws PropertyVetoException {
        log.info("Initializing Connection Pool!");
        properties = new Properties();
        try {
            properties.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("config.properties"));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        cpds = new ComboPooledDataSource("Example");
        cpds.setDriverClass(properties.getProperty("jdbc.driver"));
        cpds.setJdbcUrl(properties.getProperty("jdbc.url"));
        cpds.setUser(properties.getProperty("jdbc.user"));
        cpds.setPassword(PropertyUtil.getCredential("jdbc.password"));
        log.info("Connection Pool initialised!");
    }

    @Override
    public Connection getAnyConnection() throws SQLException {
        log.debug("Get Default Connection:::Number of connections (max: busy - idle): {} : {} - {}",new int[]{cpds.getMaxPoolSize(),cpds.getNumBusyConnectionsAllUsers(),cpds.getNumIdleConnectionsAllUsers()});
        if (cpds.getNumConnectionsAllUsers() == cpds.getMaxPoolSize()){
            log.warn("Maximum number of connections opened");
        }
        if (cpds.getNumConnectionsAllUsers() == cpds.getMaxPoolSize() && cpds.getNumIdleConnectionsAllUsers()==0){
            log.error("Connection pool empty!");
        }
        return cpds.getConnection();
    }

    @Override
    public Connection getConnection(String tenantIdentifier) throws SQLException {
        log.debug("Get {} Connection:::Number of connections (max: busy - idle): {} : {} - {}",new Object[]{tenantIdentifier, cpds.getMaxPoolSize(),cpds.getNumBusyConnectionsAllUsers(),cpds.getNumIdleConnectionsAllUsers()});
        if (cpds.getNumConnectionsAllUsers() == cpds.getMaxPoolSize()){
            log.warn("Maximum number of connections opened");
        }
        if (cpds.getNumConnectionsAllUsers() == cpds.getMaxPoolSize() && cpds.getNumIdleConnectionsAllUsers()==0){
            log.error("Connection pool empty!");
        }
        return cpds.getConnection(tenantIdentifier, PropertyUtil.getCredential(tenantIdentifier));
    }

    @Override
    public void releaseAnyConnection(Connection connection) throws SQLException {
        connection.close();
    }

    @Override
    public void releaseConnection(String tenantIdentifier, Connection connection){
        try {
            this.releaseAnyConnection(connection);
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public boolean supportsAggressiveRelease() {
        return false;
    }

    @SuppressWarnings("rawtypes")
    @Override
    public boolean isUnwrappableAs(Class unwrapType) {
        return ConnectionProvider.class.equals( unwrapType ) || MultiTenantConnectionProvider.class.equals( unwrapType ) || MultiTenantConnectionProviderImpl.class.isAssignableFrom( unwrapType );
    }

    @SuppressWarnings("unchecked")
    @Override
    public <T> T unwrap(Class<T> unwrapType) {
        if ( isUnwrappableAs( unwrapType ) ) {
            return (T) this;
        }
        else {
            throw new UnknownUnwrapTypeException( unwrapType );
        }
    }
} 
```

c3p0 特定配置取自**c3p0-config.xml**：

```
<c3p0-config>
    <named-config name="Example">
        <property name="acquireIncrement">3</property>
        <property name="preferredTestQuery">SELECT 1</property>
        <property name="checkoutTimeout">2000</property>
        <property name="idleConnectionTestPeriod">30</property>
        <property name="initialPoolSize">1</property>
        <property name="maxIdleTime">18000</property>
        <property name="maxPoolSize">30</property>
        <property name="minPoolSize">1</property>
        <property name="maxStatements">50</property>
        <property name="testConnectionOnCheckin">true</property>
    </named-config>
</c3p0-config> 
```

db 特定属性由**config.properties**文件提供：

```
jdbc.url=<serverUrl>
jdbc.driver=<driverClass>
jdbc.dbName=<dBname>
jdbc.dbowner=<dbo>
jdbc.username=<user>
jdbc.password=<password>

hibernate.dialect=<hibernateDialect>
hibernate.debug=false 
```

凭据以类似的方式从另一个文件中获取。

感谢任何提供改进的反馈。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-25T19:26:56.210

使用`<map>`而不是的建议`<props>`似乎对我有用。 [https://jira.springsource.org/browse/SPR-10823#comment-94855](https://jira.springsource.org/browse/SPR-10823#comment-94855)

```
 <bean id="multiTenantConnectionProvider"
       class="test.MultiTenantConnectionProviderImpl"/>

 <bean id="sessionFactory"
      class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="packagesToScan" value="test.models" />
    <property name="hibernateProperties">
        <map>
            <entry key="hibernate.dialect" value="org.hibernate.dialect.PostgreSQL82Dialect"/>
            <entry key="hibernate.multiTenancy" value="SCHEMA"/>
            <entry key="hibernate.tenant_identifier_resolver" value="test.CurrentTenantIdentifierResolverImpl"/>
            <entry key="hibernate.multi_tenant_connection_provider" value-ref="multiTenantConnectionProvider"/>
        </map>
    </property>
  </bean> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-22T23:54:55.980

从 Spring Framework 版本 3.2.4 开始，无法让 Spring 容器管理 MultiTenantConnectionProvider 和 CurrentTenantIdentifierResolver。这会产生许多障碍，例如使用已配置的 DataSource、WebContext 和其他 Spring 托管 bean 和特性。我试图找到一个更清洁的解决方案，但只提出了一个：

扩展 org.springframework.orm.hibernate4.LocalSessionFactoryBuilder 并编写一个自定义 LocalSessionFactoryBean （不能子类化并提供 LocalSessionFactoryBuilder，它基本上是原始副本的微小变化）

开始：

```
package com.levitech.hibernate;

import javax.sql.DataSource;

import org.hibernate.cfg.Environment;
import org.hibernate.context.spi.CurrentTenantIdentifierResolver;
import org.hibernate.service.jdbc.connections.spi.MultiTenantConnectionProvider;
import org.springframework.core.io.ResourceLoader;

public class CustomLocalSessionFactoryBuilder extends org.springframework.orm.hibernate4.LocalSessionFactoryBuilder {

    public CustomLocalSessionFactoryBuilder(DataSource dataSource,ResourceLoader resourceLoader, MultiTenantConnectionProvider connectionProvider, 
            CurrentTenantIdentifierResolver tenantIdResolver) {
        super(dataSource, resourceLoader);
        getProperties().put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, connectionProvider);
        getProperties().put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, tenantIdResolver);

    }

} 
```

LocalSessionFactoryBean 替换（唯一的变化是在 afterPropertiesSet() 方法中使用自定义 LocalSessionFactoryBuilder）：

```
package com.levitech.hibernate;

/*
 * Copyright 2002-2013 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import java.io.File;
import java.io.IOException;
import java.util.Properties;

import javax.sql.DataSource;

import org.hibernate.Interceptor;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.cfg.NamingStrategy;
import org.hibernate.context.spi.CurrentTenantIdentifierResolver;
import org.hibernate.service.jdbc.connections.spi.MultiTenantConnectionProvider;
import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.FactoryBean;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.context.ResourceLoaderAware;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.Resource;
import org.springframework.core.io.ResourceLoader;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
import org.springframework.core.io.support.ResourcePatternResolver;
import org.springframework.core.io.support.ResourcePatternUtils;
import org.springframework.orm.hibernate4.HibernateExceptionTranslator;
import org.springframework.orm.hibernate4.LocalSessionFactoryBuilder;

/**
 * {@link org.springframework.beans.factory.FactoryBean} that creates a Hibernate
 * {@link org.hibernate.SessionFactory}. This is the usual way to set up a shared
 * Hibernate SessionFactory in a Spring application context; the SessionFactory can
 * then be passed to Hibernate-based data access objects via dependency injection.
 *
 * <p><b>NOTE:</b> This variant of LocalSessionFactoryBean requires Hibernate 4.0 or higher.
 * It is similar in role to the same-named class in the {@code orm.hibernate3} package.
 * However, in practice, it is closer to {@code AnnotationSessionFactoryBean} since
 * its core purpose is to bootstrap a {@code SessionFactory} from annotation scanning.
 *
 * <p><b>NOTE:</b> To set up Hibernate 4 for Spring-driven JTA transactions, make
 * sure to either specify the {@link #setJtaTransactionManager "jtaTransactionManager"}
 * bean property or to set the "hibernate.transaction.factory_class" property to
 * {@link org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory}.
 * Otherwise, Hibernate's smart flushing mechanism won't work properly.
 *
 * @author Juergen Hoeller
 * @since 3.1
 * @see #setDataSource
 * @see #setPackagesToScan
 * @see LocalSessionFactoryBuilder
 */
public class CustomLocalSessionFactoryBean extends HibernateExceptionTranslator
        implements FactoryBean<SessionFactory>, ResourceLoaderAware, InitializingBean, DisposableBean {

    private MultiTenantConnectionProvider multiTenantConnectionProvider;

    private CurrentTenantIdentifierResolver tenantIdResolver;

    private DataSource dataSource;

    private Resource[] configLocations;

    private String[] mappingResources;

    private Resource[] mappingLocations;

    private Resource[] cacheableMappingLocations;

    private Resource[] mappingJarLocations;

    private Resource[] mappingDirectoryLocations;

    private Interceptor entityInterceptor;

    private NamingStrategy namingStrategy;

    private Properties hibernateProperties;

    private Class<?>[] annotatedClasses;

    private String[] annotatedPackages;

    private String[] packagesToScan;

    private Object jtaTransactionManager;

    private ResourcePatternResolver resourcePatternResolver = new PathMatchingResourcePatternResolver();

    private Configuration configuration;

    private SessionFactory sessionFactory;

    public MultiTenantConnectionProvider getMultiTenantConnectionProvider() {
        return multiTenantConnectionProvider;
    }

    public void setMultiTenantConnectionProvider(
            MultiTenantConnectionProvider multiTenantConnectionProvider) {
        this.multiTenantConnectionProvider = multiTenantConnectionProvider;
    }

    public CurrentTenantIdentifierResolver getTenantIdResolver() {
        return tenantIdResolver;
    }

    public void setTenantIdResolver(CurrentTenantIdentifierResolver tenantIdResolver) {
        this.tenantIdResolver = tenantIdResolver;
    }

    /**
     * Set the DataSource to be used by the SessionFactory.
     * If set, this will override corresponding settings in Hibernate properties.
     * <p>If this is set, the Hibernate settings should not define
     * a connection provider to avoid meaningless double configuration.
     */
    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    /**
     * Set the location of a single Hibernate XML config file, for example as
     * classpath resource "classpath:hibernate.cfg.xml".
     * <p>Note: Can be omitted when all necessary properties and mapping
     * resources are specified locally via this bean.
     * @see org.hibernate.cfg.Configuration#configure(java.net.URL)
     */
    public void setConfigLocation(Resource configLocation) {
        this.configLocations = new Resource[] {configLocation};
    }

    /**
     * Set the locations of multiple Hibernate XML config files, for example as
     * classpath resources "classpath:hibernate.cfg.xml,classpath:extension.cfg.xml".
     * <p>Note: Can be omitted when all necessary properties and mapping
     * resources are specified locally via this bean.
     * @see org.hibernate.cfg.Configuration#configure(java.net.URL)
     */
    public void setConfigLocations(Resource[] configLocations) {
        this.configLocations = configLocations;
    }

    /**
     * Set Hibernate mapping resources to be found in the class path,
     * like "example.hbm.xml" or "mypackage/example.hbm.xml".
     * Analogous to mapping entries in a Hibernate XML config file.
     * Alternative to the more generic setMappingLocations method.
     * <p>Can be used to add to mappings from a Hibernate XML config file,
     * or to specify all mappings locally.
     * @see #setMappingLocations
     * @see org.hibernate.cfg.Configuration#addResource
     */
    public void setMappingResources(String[] mappingResources) {
        this.mappingResources = mappingResources;
    }

    /**
     * Set locations of Hibernate mapping files, for example as classpath
     * resource "classpath:example.hbm.xml". Supports any resource location
     * via Spring's resource abstraction, for example relative paths like
     * "WEB-INF/mappings/example.hbm.xml" when running in an application context.
     * <p>Can be used to add to mappings from a Hibernate XML config file,
     * or to specify all mappings locally.
     * @see org.hibernate.cfg.Configuration#addInputStream
     */
    public void setMappingLocations(Resource[] mappingLocations) {
        this.mappingLocations = mappingLocations;
    }

    /**
     * Set locations of cacheable Hibernate mapping files, for example as web app
     * resource "/WEB-INF/mapping/example.hbm.xml". Supports any resource location
     * via Spring's resource abstraction, as long as the resource can be resolved
     * in the file system.
     * <p>Can be used to add to mappings from a Hibernate XML config file,
     * or to specify all mappings locally.
     * @see org.hibernate.cfg.Configuration#addCacheableFile(java.io.File)
     */
    public void setCacheableMappingLocations(Resource[] cacheableMappingLocations) {
        this.cacheableMappingLocations = cacheableMappingLocations;
    }

    /**
     * Set locations of jar files that contain Hibernate mapping resources,
     * like "WEB-INF/lib/example.hbm.jar".
     * <p>Can be used to add to mappings from a Hibernate XML config file,
     * or to specify all mappings locally.
     * @see org.hibernate.cfg.Configuration#addJar(java.io.File)
     */
    public void setMappingJarLocations(Resource[] mappingJarLocations) {
        this.mappingJarLocations = mappingJarLocations;
    }

    /**
     * Set locations of directories that contain Hibernate mapping resources,
     * like "WEB-INF/mappings".
     * <p>Can be used to add to mappings from a Hibernate XML config file,
     * or to specify all mappings locally.
     * @see org.hibernate.cfg.Configuration#addDirectory(java.io.File)
     */
    public void setMappingDirectoryLocations(Resource[] mappingDirectoryLocations) {
        this.mappingDirectoryLocations = mappingDirectoryLocations;
    }

    /**
     * Set a Hibernate entity interceptor that allows to inspect and change
     * property values before writing to and reading from the database.
     * Will get applied to any new Session created by this factory.
     * @see org.hibernate.cfg.Configuration#setInterceptor
     */
    public void setEntityInterceptor(Interceptor entityInterceptor) {
        this.entityInterceptor = entityInterceptor;
    }

    /**
     * Set a Hibernate NamingStrategy for the SessionFactory, determining the
     * physical column and table names given the info in the mapping document.
     * @see org.hibernate.cfg.Configuration#setNamingStrategy
     */
    public void setNamingStrategy(NamingStrategy namingStrategy) {
        this.namingStrategy = namingStrategy;
    }

    /**
     * Set Hibernate properties, such as "hibernate.dialect".
     * <p>Note: Do not specify a transaction provider here when using
     * Spring-driven transactions. It is also advisable to omit connection
     * provider settings and use a Spring-set DataSource instead.
     * @see #setDataSource
     */
    public void setHibernateProperties(Properties hibernateProperties) {
        this.hibernateProperties = hibernateProperties;
    }

    /**
     * Return the Hibernate properties, if any. Mainly available for
     * configuration through property paths that specify individual keys.
     */
    public Properties getHibernateProperties() {
        if (this.hibernateProperties == null) {
            this.hibernateProperties = new Properties();
        }
        return this.hibernateProperties;
    }

    /**
     * Specify annotated entity classes to register with this Hibernate SessionFactory.
     * @see org.hibernate.cfg.Configuration#addAnnotatedClass(Class)
     */
    public void setAnnotatedClasses(Class<?>[] annotatedClasses) {
        this.annotatedClasses = annotatedClasses;
    }

    /**
     * Specify the names of annotated packages, for which package-level
     * annotation metadata will be read.
     * @see org.hibernate.cfg.Configuration#addPackage(String)
     */
    public void setAnnotatedPackages(String[] annotatedPackages) {
        this.annotatedPackages = annotatedPackages;
    }

    /**
     * Specify packages to search for autodetection of your entity classes in the
     * classpath. This is analogous to Spring's component-scan feature
     * ({@link org.springframework.context.annotation.ClassPathBeanDefinitionScanner}).
     */
    public void setPackagesToScan(String... packagesToScan) {
        this.packagesToScan = packagesToScan;
    }

    /**
     * Set the Spring {@link org.springframework.transaction.jta.JtaTransactionManager}
     * or the JTA {@link javax.transaction.TransactionManager} to be used with Hibernate,
     * if any.
     * @see LocalSessionFactoryBuilder#setJtaTransactionManager
     */
    public void setJtaTransactionManager(Object jtaTransactionManager) {
        this.jtaTransactionManager = jtaTransactionManager;
    }

    public void setResourceLoader(ResourceLoader resourceLoader) {
        this.resourcePatternResolver = ResourcePatternUtils.getResourcePatternResolver(resourceLoader);
    }

    public void afterPropertiesSet() throws IOException {
        LocalSessionFactoryBuilder sfb = new CustomLocalSessionFactoryBuilder(this.dataSource, this.resourcePatternResolver, multiTenantConnectionProvider, tenantIdResolver);

        if (this.configLocations != null) {
            for (Resource resource : this.configLocations) {
                // Load Hibernate configuration from given location.
                sfb.configure(resource.getURL());
            }
        }

        if (this.mappingResources != null) {
            // Register given Hibernate mapping definitions, contained in resource files.
            for (String mapping : this.mappingResources) {
                Resource mr = new ClassPathResource(mapping.trim(), this.resourcePatternResolver.getClassLoader());
                sfb.addInputStream(mr.getInputStream());
            }
        }

        if (this.mappingLocations != null) {
            // Register given Hibernate mapping definitions, contained in resource files.
            for (Resource resource : this.mappingLocations) {
                sfb.addInputStream(resource.getInputStream());
            }
        }

        if (this.cacheableMappingLocations != null) {
            // Register given cacheable Hibernate mapping definitions, read from the file system.
            for (Resource resource : this.cacheableMappingLocations) {
                sfb.addCacheableFile(resource.getFile());
            }
        }

        if (this.mappingJarLocations != null) {
            // Register given Hibernate mapping definitions, contained in jar files.
            for (Resource resource : this.mappingJarLocations) {
                sfb.addJar(resource.getFile());
            }
        }

        if (this.mappingDirectoryLocations != null) {
            // Register all Hibernate mapping definitions in the given directories.
            for (Resource resource : this.mappingDirectoryLocations) {
                File file = resource.getFile();
                if (!file.isDirectory()) {
                    throw new IllegalArgumentException(
                            "Mapping directory location [" + resource + "] does not denote a directory");
                }
                sfb.addDirectory(file);
            }
        }

        if (this.entityInterceptor != null) {
            sfb.setInterceptor(this.entityInterceptor);
        }

        if (this.namingStrategy != null) {
            sfb.setNamingStrategy(this.namingStrategy);
        }

        if (this.hibernateProperties != null) {
            sfb.addProperties(this.hibernateProperties);
        }

        if (this.annotatedClasses != null) {
            sfb.addAnnotatedClasses(this.annotatedClasses);
        }

        if (this.annotatedPackages != null) {
            sfb.addPackages(this.annotatedPackages);
        }

        if (this.packagesToScan != null) {
            sfb.scanPackages(this.packagesToScan);
        }

        if (this.jtaTransactionManager != null) {
            sfb.setJtaTransactionManager(this.jtaTransactionManager);
        }

        // Build SessionFactory instance.
        this.configuration = sfb;
        this.sessionFactory = buildSessionFactory(sfb);
    }

    /**
     * Subclasses can override this method to perform custom initialization
     * of the SessionFactory instance, creating it via the given Configuration
     * object that got prepared by this LocalSessionFactoryBean.
     * <p>The default implementation invokes LocalSessionFactoryBuilder's buildSessionFactory.
     * A custom implementation could prepare the instance in a specific way (e.g. applying
     * a custom ServiceRegistry) or use a custom SessionFactoryImpl subclass.
     * @param sfb LocalSessionFactoryBuilder prepared by this LocalSessionFactoryBean
     * @return the SessionFactory instance
     * @see LocalSessionFactoryBuilder#buildSessionFactory
     */
    protected SessionFactory buildSessionFactory(LocalSessionFactoryBuilder sfb) {
        return sfb.buildSessionFactory();
    }

    /**
     * Return the Hibernate Configuration object used to build the SessionFactory.
     * Allows for access to configuration metadata stored there (rarely needed).
     * @throws IllegalStateException if the Configuration object has not been initialized yet
     */
    public final Configuration getConfiguration() {
        if (this.configuration == null) {
            throw new IllegalStateException("Configuration not initialized yet");
        }
        return this.configuration;
    }

    public SessionFactory getObject() {
        return this.sessionFactory;
    }

    public Class<?> getObjectType() {
        return (this.sessionFactory != null ? this.sessionFactory.getClass() : SessionFactory.class);
    }

    public boolean isSingleton() {
        return true;
    }

    public void destroy() {
        this.sessionFactory.close();
    }

} 
```

在您的应用程序上下文中定义 bean：

```
<bean id="multiTenantProvider" class="com.levitech.hibernate.MultiTenantConnectionProviderImpl" depends-on="myDataSource" lazy-init="false"></bean>
<bean id="tenantIdResolver" class="com.levitech.hibernate.TenantIdResolver"></bean>

<bean id="sessionFactory" class="com.levitech.hibernate.CustomLocalSessionFactoryBean" depends-on="liquibase, myDataSource, multiTenantProvider">
        <property name="dataSource" ref="myDataSource"></property>
        <property name="multiTenantConnectionProvider" ref="multiTenantProvider"></property>
        <property name="tenantIdResolver" ref="tenantIdResolver"></property>

         <property name="mappingLocations" value="classpath*:hibernate/**/*.hbm.xml" />

    <property name="hibernateProperties">
      <value>
        hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
        hibernate.show_sql=true
        hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory
        hibernate.cache.use_query_cache=true
        hibernate.cache.use_second_level_cache=true
        hibernate.multiTenancy=SCHEMA
          </value>
    </property>
      </bean> 
```

不要在 hibernate 属性中提供以下值：hibernate.tenant_identifier_resolver 和 hibernate.multi_tenant_connection_provider

你已经准备好了，你所有的 bean 都是 Spring 管理的。您可以再次使用 DI！希望这可以帮助某人。我确实为该功能提出了 Jira 请求..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T02:25:24.667

使用这些人的回应和这个[链接](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e4691)，我把它放在一起，没有 Spring 或 C3P0 以外的任何其他东西。

我必须将这两个属性添加到我的休眠配置中

```
properties.setProperty("hibernate.multiTenancy", "SCHEMA");
properties.setProperty("hibernate.multi_tenant_connection_provider", MultiTenantConnectionProviderImpl.class.getName()); 
```

HibernateUtils.java

```
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 *
 * @author Alex
 */
public class HibernateUtils {
    private static final Logger logger = LoggerFactory.getLogger(HibernateUtils.class);
    private static SessionFactory sessionFactory;

    static{
        init();
    }

    public static void init(){
        try {
            Configuration configuration = new Configuration()
                    .setProperties(ConnectionPropertiesUtils.getProperties());

            ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
            sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        } catch (Exception e) {
            logger.error(e.getMessage());
        }
    }

    public static Session getTenantSession(String tenant){
        return getSession(tenant);
    }

    public static Session getAuthSession(){
        return getSession("AUTH");
    }

    public static Session getLogSession(){
        return getSession("LOG");
    }

    public static Session getConfigSession(){
        return getSession("CONFIG");
    }

    public static Session getSession(String tenant)
            throws HibernateException {
        if(sessionFactory == null){
            init();
        }
        return sessionFactory.withOptions().tenantIdentifier(tenant).openSession();
    }

    @Deprecated
    public static Session getSession()
            throws HibernateException {
        if(sessionFactory == null){
            init();
        }
        return sessionFactory.openSession();
    }
} 
```

和 MultiTenantConnectionProviderImpl.java

```
import com.mchange.v2.c3p0.ComboPooledDataSource;
import java.beans.PropertyVetoException;
import java.sql.Connection;
import java.sql.SQLException;
import org.hibernate.HibernateException;
import org.hibernate.service.UnknownUnwrapTypeException;
import org.hibernate.service.jdbc.connections.spi.ConnectionProvider;
import org.hibernate.service.jdbc.connections.spi.MultiTenantConnectionProvider;
import org.hibernate.service.spi.Stoppable;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Simplistic implementation for illustration purposes showing a single
 * connection pool used to serve multiple schemas using "connection altering".
 * Here we use the T-SQL specific USE command; Oracle users might use the ALTER
 * SESSION SET SCHEMA command; etc.
 */
public class MultiTenantConnectionProviderImpl implements MultiTenantConnectionProvider, Stoppable {

    private static Logger log = LoggerFactory.getLogger(MultiTenantConnectionProviderImpl.class);
    private ComboPooledDataSource cpds;

    public MultiTenantConnectionProviderImpl() throws PropertyVetoException {
        log.info("Initializing Connection Pool!");

        cpds = new ComboPooledDataSource("Example");
        cpds.setDriverClass(ConnectionPropertiesUtils.getProperty("hibernate.connection.driver_class"));
        cpds.setJdbcUrl(ConnectionPropertiesUtils.getProperty("hibernate.connection.url"));
        cpds.setUser(ConnectionPropertiesUtils.getProperty("hibernate.connection.username"));
        cpds.setPassword(ConnectionPropertiesUtils.getProperty("hibernate.connection.password"));

        log.info("Connection Pool initialised!");
    }

    @Override
    public Connection getAnyConnection() throws SQLException {
        log.debug("Get Default Connection:::Number of connections (max: busy - idle): {} : {} - {}", new int[]{cpds.getMaxPoolSize(), cpds.getNumBusyConnectionsAllUsers(), cpds.getNumIdleConnectionsAllUsers()});
        if (cpds.getNumConnectionsAllUsers() == cpds.getMaxPoolSize()) {
            log.warn("Maximum number of connections opened");
        }
        if (cpds.getNumConnectionsAllUsers() == cpds.getMaxPoolSize() && cpds.getNumIdleConnectionsAllUsers() == 0) {
            log.error("Connection pool empty!");
        }
        return cpds.getConnection();
    }

    @Override
    public Connection getConnection(String tenantIdentifier) throws SQLException {
        final Connection connection = getAnyConnection();
        try {
            //This is DB specific syntax. This work for MSSQL and MySQL
            //Oracle uses the ALTER SESSION SET SCHEMA command
            connection.createStatement().execute("USE " + tenantIdentifier);
        } catch (SQLException e) {
            throw new HibernateException("Could not alter JDBC connection to specified schema [" + tenantIdentifier + "]", e);
        }
        return connection;
    }

    @Override
    public void releaseAnyConnection(Connection connection) throws SQLException {
        connection.close();
    }

    @Override
    public void releaseConnection(String tenantIdentifier, Connection connection) {
        try {
            this.releaseAnyConnection(connection);
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public boolean supportsAggressiveRelease() {
        return false;
    }

    @SuppressWarnings("rawtypes")
    @Override
    public boolean isUnwrappableAs(Class unwrapType) {
        return ConnectionProvider.class.equals(unwrapType) || MultiTenantConnectionProvider.class.equals(unwrapType) || MultiTenantConnectionProviderImpl.class.isAssignableFrom(unwrapType);
    }

    @SuppressWarnings("unchecked")
    @Override
    public <T> T unwrap(Class<T> unwrapType) {
        if (isUnwrappableAs(unwrapType)) {
            return (T) this;
        } else {
            throw new UnknownUnwrapTypeException(unwrapType);
        }
    }

    public void stop() {
        cpds.close();
    }
} 
```

# java - 如何处理 setVisible(false) 后打开的 JDialog？

> ID：16213575
> 
> 赞同：1
> 
> 时间：2013-04-25T11:29:48.297
> 
> 标签：java, swing, jdialog, windowlistener

这是场景：

*   将 windowOpened() 处理程序添加到 JDialog 的新实例
*   首次使用 jdialog.setVisible(true) 显示对话框
*   正如预期的那样：windowOpened() 处理程序已触发
*   jdialog.setVisible(假)
*   jdialog.setVisible(真)
*   预期的，但没有发生：windowOpened() 处理程序已触发

当我第一次或以后调用 setVisible(true) 时，当我的模态对话框出现在屏幕上时，我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:35:41.433

> 当我第一次或以后调用 setVisible(true) 时，当我的模态对话框出现在屏幕上时，我该如何处理？

*   必须使用 ComponentListener，并覆盖方法 componentHidden() 和 componentShown()

*   JComponent 必须从 isDisplayable() 返回 true

*   [更多在这里](https://stackoverflow.com/questions/10880326/jpanel-which-one-of-listeners-is-proper-for-visibility-is-changed)

# python - Twisted：如何在服务器上打印消息？

> ID：16213589
> 
> 赞同：1
> 
> 时间：2013-04-25T11:30:27.380
> 
> 标签：python, twisted

我是使用`Twisted`框架的初学者。

我正在使用`twisted`Python 中的库开发一个简单的客户端服务器程序。

我在服务器端使用代码。

```
factory = protocol.ServerFactory()
factory.protocol = Echo
PortNo = 8000
reactor.listenTCP(PortNo,factory)

reactor.run() 
```

每当客户端关闭连接时，我想在服务器端打印消息。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:41:34.457

扩展您要使用的协议的 connectionLost 方法。

```
def connectionLost(self, reason): 
   self.factory.numProtocols = self.factory.numProtocols-1
   // do stuff 
```

更多参考：

[http://twistedmatrix.com/documents/12.2.0/core/howto/servers.html#auto2](http://twistedmatrix.com/documents/12.2.0/core/howto/servers.html#auto2)

# xml - 当 id 在元素而不是属性中时，如何使用 xpath 获取特定的节点值？

> ID：16213590
> 
> 赞同：1
> 
> 时间：2013-04-25T11:30:32.867
> 
> 标签：xml, xpath

使用 xpath `/levels/level[@id="3"]/value`，我可以获得 id=3 的 level 值，如下所示：

```
<levels>
     <level id="2">
          <value>25</value>
     </level>
     <level id="3">
          <value>33</value>
     </level>
     <level id="4">
          <value>44</value>
     </level>
</levels> 
```

但我正在阅读的 XML 的格式没有像这样的属性：

```
<levels>
     <level>
          <id>2</id>
          <value>25</value>
     </level>
     <level>
          <id>3</id>
          <value>33</value>
     </level>
     <level>
          <id>4</id>
          <value>44</value>
     </level>
</levels> 
```

**第二个 XML 块的等效 xpath 是什么，它将获得 id=3 的 level 的值？**（不保证 id=3 永远是第二个节点。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:44:24.670

以下情况如何：

```
/levels/level[id/text() = "3"]/value 
```

或者

```
/levels/level[id/. = "3"]/value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:35:20.723

**更简单/更短**：

```
/*/*[id = 3]/value 
```

# windows - HTA/VBScript Windows 小工具在睡眠时停止并且不会恢复

> ID：16213595
> 
> 赞同：0
> 
> 时间：2013-04-25T11:30:41.940
> 
> 标签：windows, vbscript, hta, windows-desktop-gadgets

我创建了一个 Windows 小工具，它在子程序中执行一个功能，该功能是定时的（当前为 10 秒），它将每 10 秒检查一次，然后等待并循环并再次执行该功能，但是，当 PC 出来时循环停止睡眠，它停止死亡并且不会恢复，我将如何阻止这种情况在 VBScript/HTA 中发生？

```
<SCRIPT LANGUAGE="VBScript">
    Option Explicit
    Dim iTimerID, RefreshList
    Sub
        Window_OnLoad RefreshList
        iTimerID = window.setInterval("RefreshList", 10000, "VBScript")
    End Sub
</SCRIPT>

Sub RefreshList {do something} End Sub 
```

# java - 页面刷新后如何重定向到登录页面

> ID：16213596
> 
> 赞同：0
> 
> 时间：2013-04-25T11:30:44.513
> 
> 标签：java, html, jquery-mobile

我在服务器端为我的应用程序和 java 使用 jQuery mobile。如果用户按下刷新按钮，用户必须被重定向到登录页面，即 index.html。

这可以使用 JavaScript 完成还是我需要添加 java 代码来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:38:43.510

使用 JavaScript，您只能处理[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)事件。但是您不知道用户是刷新还是导航离开。您需要 localstorage 或 cookie 来保持您的状态并检查用户是否刷新，以便您可以重定向它们。我什至不知道这在 onbeforeunload 事件中是否可行，但我建议您在服务器端修复它。您需要有一些逻辑服务器端。例如，将最后一页保留在会话中，如果它等于新页面，则重定向到您的 index.html。

# ios - 使用多线程从多个表中并行加载大数据

> ID：16213603
> 
> 赞同：0
> 
> 时间：2013-04-25T11:31:09.163
> 
> 标签：ios, performance, uitableview, grand-central-dispatch, nsthread

我正在尝试从我的 Ultralite DB 的 6 个不同表中加载大约 10K 条记录的数据。

我为 6 个不同的表创建了不同的函数。

我尝试使用 NSInvokeOperations、NSOperations、GCD、子类化 NSOperation 并行加载这些，但没有任何效果。

实际上，从 1 个表加载 10K 需要 4 秒，从另一个 5 秒开始，如果我将这 2 个表放在队列中，则需要 9 秒。这意味着我的代码没有并行运行。

如何改善性能问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:19:23.280

可能有多种方法可以做到这一点。

我的建议是：

*   将表格视图的行数设置为精确计数（在您的情况下为 10k）
*   表格视图经过优化，在开始时仅创建少量单元格（遵循拉模型）。所以 cellForRowAtIndexPath 在开始时只会被调用几次。
*   有一个数组并在开始时仅获取 50 个条目。有一个计数器变量。
*   当用户滚动表格视图并且计数达到 50 后，获取下一个 50 个项目（这将花费更少的时间）并用下一个 50 个数据填充单元格。继续做同样的事情。

希望它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:55:41.297

您应该以块的形式获取记录（即一次在表中获取 50-60 条记录）。然后当用户到达表的末尾时加载另外 50 -60 条记录。试试这个库：[Bottom Pull to refresh more data in a UITableView](https://github.com/emenegro/bottom-pull-to-refresh)

关于并行性与 GCD 一起使用，并在 GCD 的成功块调用时重新加载相应的表。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-25T11:33:01.937

好的，您必须使用**Para**和**Time**函数在线查找更多信息

# php - MySQL不会连接到数据库，夜间创建用户名和密码

> ID：16213607
> 
> 赞同：-4
> 
> 时间：2013-04-25T11:31:29.103
> 
> 标签：php, mysql

您好，我的脚本有问题，它不会以任何形式创建并连接到我的数据库。这是我的代码：

```
<?php
$host="fdb4.biz.nf"
$username="1373217_users";
$passowrd="1234";
$db_name="1373217_users"; // Database name 
$tbl_name="members"; // Table name 

mysql_connect("$host", "$username", "$passowrd") or die("Database could not connect");
mysql_select_db("$db_name") or die("Database selected could not be found");
$sql="INSERT INTO `members` ('user') VALUES ('$_POST[username]')";

$username=$_POST['username'];
$password=$_POST['password'];

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$sql="INSERT INTO `members` (`username`)  VALUES ('{$_POST['username']}')";

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

这是 login.php，它给我的错误是：

解析错误：语法错误，第 4 行 /srv/disk11/1373217/www/tracklist.co.nf/login.php 中的意外 T_VARIABLE

谁能告诉我为什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:32:42.417

您有一个语法错误，您错过了在 $host 语句之后放置分号，如下所示

```
 $host="fdb4.biz.nf"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:33:44.430

问题是你把'（单引号）放在`user`你忘了`;`附近`$host="fdb4.biz.nf"`

改变这个

```
$sql="INSERT INTO `members` ('user') VALUES ('$_POST[username]')"; 
```

至

```
$sql="INSERT INTO `members` (`user`) VALUES ('$_POST[username]')"; 
```

# angularjs - 来自服务的 $rootscope 对象模型并非（总是）在每个控制器中都可用

> ID：16213609
> 
> 赞同：0
> 
> 时间：2013-04-25T11:31:34.510
> 
> 标签：angularjs, angularjs-scope

在我的应用定义中，我有：

```
var myVtModule = angular.module('vtApp', ['myAppDev','mongoAPI']);
myVtModule.run(function($rootScope, $location, Shop){
    $rootScope.shopData = {};
    Shop.getShop(function(response){
        $rootScope.shopData = response;
    });
}) 
```

Shop 是一种从服务器检索数据的服务，它可以工作。问题是在控制器中我并不总是可以访问shopData，有时是空的，有时工作正常。

```
function SupportCtrl($rootScope, $scope) {
    console.log ($rootScope.shopData);
} 
```

为什么在收到服务响应时不更新？我不能把 Shop.getShop 放在控制器中，因为我到处都需要它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:07:39.127

我的建议是使用控制器继承和服务，以便您的子控制器始终可以访问商店。这是一个演示：

[http://beta.plnkr.co/edit/DtjwLMi3jHCdzThEJDNn?p=preview](http://beta.plnkr.co/edit/DtjwLMi3jHCdzThEJDNn?p=preview)

代码：

```
angular.module('myApp', ['myApp.services']);

function MainCtrl($scope, ShopService) {
   $scope.shop = ShopService.getShop();
}
function ChildCtrl($scope) {
}
angular.module('myApp.services', []).
    factory('ShopService', function ($rootScope) {
        var shop = {
          storename: 'your store'
        };

        var service = {
              getShop: function() {
                return shop;
              }
        }

        return service;
    }); 
```

设置子控制器关系的 HTML：

```
<html ng-app="myApp" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <link rel="stylesheet" href="style.css">
  <script>document.write("<base href=\"" + document.location + "\" />");</script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
   The store is {{shop.storename}}
  <div ng-controller="ChildCtrl">
      The store name is: {{shop.storename}}

  </div>
</body>
</html> 
```

您会注意到，`shop`由于父作用域检索到了它，所以它对孩子可用。我设置了服务，以便您可以使其可测试/等。除了继承之外，您还可以轻松地将 in 注入`ShopService`每个控制器并让它们进行调用，但是如果您有很多控制器可能会变得乏味。

有关范围继承的更多信息：

[我可以继承父控制器的变量吗？](https://stackoverflow.com/questions/12008150/can-i-inherit-a-parent-controllers-variables) [http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:00:22.093

如果您需要控制器中的结果，您应该跳过`myVtModule.run`并执行以下操作：

```
function SupportCtrl($scope, Shop) {
  Shop.getShop(function(response){
    console.log (response);
    //do something, put response in $scope or $scope.$rootScope etc...
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T03:35:39.420

您的 ng-controller 范围都原型继承自 rootScope（最终），因此它们都可以访问您在 rootScope 上定义的任何对象。由于从服务器检索数据是异步操作，因此您的控制器可能会在服务器数据返回之前执行。

您可以在控制器中使用[$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)来确定数据何时实际可用。但是，如果您只想在数据可用时更新视图，则不必使用 $watch。当数据可用时，Angular 应该会自动更新您的视图。例如，

```
function SupportCtrl($rootScope, $scope) {
  $scope.shopData = $rootScope.shopData;
} 
```

那么在你看来：

```
<div ng-controller="SupportCtrl">shopData = {{shopData}}</div> 
```

[Fiddle](http://jsfiddle.net/mrajcok/4x7fJ/) - 我使用`$timeout`. 请注意，在小提琴中，我还使用`angular.copy()`更新控制器的引用，而不是分配`$rootScope.shopData`给新的/不同的数组：

```
app.run(function($rootScope, $timeout){
    $rootScope.shopData = [];
    $timeout(function() {
        angular.copy([{d1: 'data1', d2: 'data2'}], $rootScope.shopData);
    }, 2000);
}); 
```

# ios - 崩溃 -[AVPlayerItem _attachToPlayer:] 一个 AVPlayerItem 不能与多个 AVPlayer 实例关联

> ID：16213611
> 
> 赞同：13
> 
> 时间：2013-04-25T11:31:35.870
> 
> 标签：ios, cocoa, uikit, avfoundation, avplayer

我遇到了一个影响大约 10% 用户的崩溃，但我无法重现它，也不知道具体何时发生。

Crashlytics 报告说，大约一半的崩溃用户没有关注应用程序，即做背景音频或 AirPlay。该应用程序播放 HLS 视频流，并在后台切换到纯音频版本。

有什么想法，或者为什么我的单例 Player 类中有多个 AVPlayer 实例？

谢谢！

```
Exception Type:
NSInvalidArgumentException
Reason:
An AVPlayerItem cannot be associated with more than one instance of AVPlayer
Fatal Exception
Latest Crash: 4/06/2013 at 8:48:46 UTC+0200
0   CoreFoundation  __exceptionPreprocess + 162
1   libobjc.A.dylib objc_exception_throw + 30
2   AVFoundation    -[AVPlayerItem _attachToPlayer:] + 188
3   AVFoundation    -[AVPlayer _attachItem:andPerformOperation:withObject:] + 336
4   AVFoundation    -[AVPlayer _insertItem:afterItem:] + 26
5   AVFoundation    -[AVQueuePlayer insertItem:afterItem:] + 136
6   MediaPlayer __block_global_4 + 520
7
...
libdispatch.dylib   _dispatch_call_block_and_release + 10
14 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-30T10:19:10.083

似乎可以通过在设置新 URL 之前明确停止播放来解决，例如

```
[moviePlayer stop];
moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;
[moviePlayer setContentURL:[NSURL URLWithString:[videos objectForKey:quality]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T09:29:12.773

找到了这个问题的原因......如果创建了 MovieViewController，并且它当前正在缓冲（即状态！= MPMovieLoadStatePlayable 或 MPMovieLoadStatePlaythroughOK），调用“播放”方法将使应用程序崩溃并出现此异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-25T15:39:51.883

尝试在 SourceType 之后设置 ContentURL

```
moviePlayerController_ = [[MPMoviePlayerViewController alloc] init];
moviePlayerController_.movieSourceType = MPMovieSourceTypeStreaming;
[moviePlayerController_.moviePlayer setContentURL:url]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T00:25:12.560

需要考虑的几件事：

1.  播放器项目和播放器之间的代理将提供一种方法来控制 AVPlayer 实例对播放器项目的访问。

2.  关联引用允许存储通过类别添加到给定类的属性；因此，您可以为播放器项目类创建一个类别，该类别由一个属性组成，每当将播放器项目分配给 AVPlayer 时设置该属性（例如，它是描述字符串）。为了确保播放器项目没有分配给另一个播放器，只需将存储在 AVPlayer 中的描述与相关播放器返回的描述进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T05:04:11.960

如果您不确定视频 URL 的类型，您将获取设置源类型为未知。这适用于所有情况。

```
moviePlayerController = [[MPMoviePlayerViewController alloc] init];
moviePlayerController.movieSourceType = MPMovieSourceTypeUnknown;
[moviePlayerController.moviePlayer setContentURL:url]; 
```

# primefaces - Primefaces 画廊 - 如何在没有 filmStrip 的情况下导航

> ID：16213613
> 
> 赞同：0
> 
> 时间：2013-04-25T11:31:46.643
> 
> 标签：primefaces

我需要在底部没有胶片的 primefaces 画廊。当我使用 showFilmstrip="false" 时，无法手动导航。即使添加 autoPlay="true" 也不会使内容移动。

```
<p:galleria id="gal" value="#{articleController.welcomes}" var="w" autoPlay="true" showFilmstrip="false" >
    <h:outputLabel value="#{w.sinhalaTopic}" ></h:outputLabel>
</p:galleria> 
```

有没有办法让一个底部没有胶片的galaria，但可以用两边的箭头导航？如果那不可能，是否可以使用其他类似的 primefaces 组件来代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:55:54.690

```
.ui-galleria-filmstrip-wrapper {
    display:none;
} 
```

将上面的代码添加到您的`.css`文件中，这将使条带隐藏在`p:galleria`.

# email - Phonegap - 从应用程序发送邮件

> ID：16213616
> 
> 赞同：1
> 
> 时间：2013-04-25T11:32:00.823
> 
> 标签：email, cordova, plugins

我需要在我的应用程序上添加一个按钮，向我的 gmail发送*建议邮件。*

我尝试了一些方法，但都没有奏效。

我正在尝试，像这样：

```
<section data-role="page" id="home">
        <article data-role="content" style="position: fixed;text-align: center;width: 100%;height: 100%;margin:0;padding:0;overflow: hidden;" >
            <!--<a id="go" href="#view-feed-custom"> <img style="max-width: 100%;" src="img/portada.jpg" alt="Logo"> </a>-->

            <script>
            var args = {
                subject: 'Hi there',
                body: 'message to suggest you',
                toRecipients: 'reciver@gmail.com'
            };
            cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);
            </script>

            <a href="#" onclick="cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);">Enviar Sugerencia 2</a> 

        </article>

    </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:54:39.343

我现在尝试你展示给我的两种方法......

```
<body onload="init()">

        <!-- START -->
        <section data-role="page" id="home">
            <article data-role="content" style="position: fixed;text-align: center;width: 100%;height: 100%;margin:0;padding:0;overflow: hidden;" >
                <a id="go" href="#view-feed-custom"> <img style="max-width: 100%;" src="img/portada.jpg" alt="Logo"> </a>
            </article>

            <script>
            function send(){
                var args = {
                    subject: 'Hi there',
                    body: 'message to suggest you',
                    toRecipients: 'miemail@gmail.com'
                };
            cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);
           }
            </script>
            <button onclick='send();'>Send Mail onClick</button>
            <button href="mailto:email@email.com?cc=email2@email.com&bcc=email3@email.com&subject=The subject of the email&body=The body of the email">Enviar Correo href</button>

        </section> 
```

但是没有运行/工作......

感谢很多人帮助我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:21:57.760

你有没有尝试过：

```
<a href="mailto:email@email.com">email</a> 
```

您可以添加更多参数，如下所示：

```
<a href="mailto:email@email.com?cc=email2@email.com&bcc=email3@email.com&subject=The subject of the email&body=The body of the email">Send mail with cc, bcc, subject and body</a> 
```

该锚点将调用设备的本机邮箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:39:39.353

而不是使用`<a>`标签使用`<button>`标签并 `'onClick=aFunction();'`在标签属性内给出。

并且`aFunction()`可以定义为-

```
function aFunction(){
            var args = {
                    subject: 'Hi there',
                    body: 'message to suggest you',
                    toRecipients: 'reciver@gmail.com'
                };
            cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);
            } 
```

另外，请确保您已`EmailComposer.js`在文件`www`夹中添加了`.m`（假设您在 iOS 上）和.`.h``plugins folder`

# git - Microblaze 重建所需的最少文件

> ID：16213619
> 
> 赞同：2
> 
> 时间：2013-04-25T11:32:12.287
> 
> 标签：git, fpga, xilinx, microblaze

我正在开发一个包含 microblaze 设计的 Xilinx 项目。我很好奇将项目的硬件部分存储在 Git（或其他一些 CM 工具）中所需的最小文件集，并且仍然能够在不同的机器上重建它。到目前为止，我一直无法缩小范围，但是生成了很多文件，我确信我可以摆脱这些文件。在顶层目录中还有 _xps、bootloops、data 等、hdl、implementation、pcores、revup、SDK 和综合目录。哪些目录是完全不需要的，哪些文件是其余文件夹中必须的？

到目前为止，我无法在任何地方找到一个好的列表（我自己缩小范围的尝试也没有结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:51:29.710

makefile 中有一个要清理的目标。IIRC 它被称为`hwclean`- 曾经`swclean`也有。

如果你运行这些，你会得到一个更有限的文件集。我似乎记得它留下了 __xps，我认为这是不必要的。

反过来，从我的脑海中浮出水面，你需要：

*   XMP、MHS 和 MSS 文件
*   `data`目录_
*   `pcores`您创建的任何本地项目
*   `etc`目录_

这应该会给你一个“空”的比特流，在 microblaze BRAM 中没有代码

该软件将位于树外的 SDK 文件夹中（否则它会被工具删除！）。Eclipse clean 做了一个合理的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T14:44:12.857

我过去开发过 Microblaze 设计，现在仍在维护它们，目前使用 Perforce 进行 SCM。我没有对完全重新创建项目所需的绝对最小文件集进行详尽的分析，但在我列出我发现的内容之前，让我问一两个问题。

这是以 XPS 为中心的设计，还是您正在使用 ISE、Planahead 或 Vivado 在更大的 FPGA 设计中实例化 Microblaze 软核处理器？

您使用的是什么版本的 Xilinx 工具？您具体使用哪种工具来创建和处理 Microblaze 硬件设计？

我的最后一个包含 Microblaze 内核的设计是使用 ISE v10.1 完成的，因此如果您使用更新的工具，我的建议可能不适用。

# r - 如何以编程方式在 data.table 中选择列？

> ID：16213620
> 
> 赞同：26
> 
> 时间：2013-04-25T11:32:13.163
> 
> 标签：r, dataframe, data.table

我有以下数据表（DT）：

```
DT <- data.table(V1 = 1:3, V2 = 4:6, V3 = 7:9) 
```

我想通过使用存储相关变量名称的对象以编程方式（动态）选择变量的子集。例如，我想选择存储在变量“keep”中的两列“V1”和“V3”

```
keep <- c("V1", "V3") 
```

如果我们要从 data.frame 中选择“保留”列，以下将起作用：

```
DT[keep] 
```

不幸的是，当这是一个 data.table 时，这不起作用。我认为 data.frame 和 data.table 与这种行为相同，但显然它们不是。有人能就正确的语法提供建议吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-25T11:36:26.020

[常见问题解答 1.1、1.2 和 2.17](https://rawgit.com/wiki/Rdatatable/data.table/vignettes/datatable-faq.html)对此进行了介绍。

一些可能性：

```
DT[, keep, with = FALSE]
DT[, c('V1', 'V3'), with = FALSE]
DT[, c(1, 3), with = FALSE]
DT[, list(V1, V3)] 
```

原因`DF[c('V1','V3')]`与 a`data.frame`的作用相同，包含在`?`[.data.frame``

> 数据帧可以以多种模式进行索引。当`[`和`[[`与单个向量索引（`x[i]`或`x[[i]]`）一起使用时，它们对数据框进行索引，就好像它是一个列表一样。在这种用法中，一个`drop`参数被忽略，并带有警告。

* * *

From [`data.table 1.10.2`](https://github.com/Rdatatable/data.table/blob/master/NEWS.md#changes-in-v1102--on-cran-31-jan-2017)，您可以在以`..`编程方式对列进行子集化时使用前缀：

> 何时会在调用范围内查找`j`以它为前缀的符号，并将其值视为列名或数字 [...] 这是实验性的。`..`

因此：

```
DT[ , ..keep]
#    V1 V3
# 1:  1  7
# 2:  2  8
# 3:  3  9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-23T15:42:03.813

更多可能性：

```
DT[, .SD, .SDcols = keep]
DT[, mget(keep)] 
```

# magento - Magento 以编程方式设置模板变量

> ID：16213621
> 
> 赞同：1
> 
> 时间：2013-04-25T11:32:21.380
> 
> 标签：magento, magento-1.7

我需要能够发送包含条件句的交易电子邮件。对于包含某些产品的任何订单，我想在订单确认电子邮件中包含一句话。有很多示例说明如何根据内置变量在交易电子邮件中使用条件，但我想将条件基于我自己的变量，我将从我自己的扩展程序中以编程方式创建该变量。

邮件程序类 Mage_Core_Model_Email_Template_Mailer 确实有一个公共 setTemplateParams 方法，但由于该方法只调用基类 setData 方法，即使我可以访问该方法来设置我自己的参数，它也会覆盖显示内容所必需的核心模板参数篮子。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:22:36.817

您应该在保存条件句的位置创建一个新的 order 属性。然后，您可以通过以下方式在交易电子邮件模板中轻松访问您的属性`{{htmlescape var=$order.getYourAttribute()}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:03:09.277

您正在创建的属性与哪个实体产品或客户有关

对于客户，您可以通过 {{var order.getCustomer().getAttrName()}} 获得它

# jquery - 拆分 JSON 结果

> ID：16213623
> 
> 赞同：0
> 
> 时间：2013-04-25T11:32:21.850
> 
> 标签：jquery, json

我在 ASP.NET 中使用 Jquery

我的 JSON 结果采用以下格式

> **2@2@POD @POL @IsTransshipmentPort**

我想拆分值并绑定到下拉列表如何拆分 Json 结果。

```
 select: function (e, i) 
    { 
       $('#<%=hddnPortTerminal.ClientID%>').html(i.item.val); 

    } 
```

结果绑定到 HiddenFiled，如何拆分 HiddenFiled 中的这些数据并将其带到其他下拉列表？

我没有任何想法，任何人都可以请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:35:38.813

```
$pieces = explode("@", $result); 
```

当然，说“我想拆分一个字符串”是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:35:48.823

如果要拆分字符串，则可以使用该`split()`函数（很奇怪）。

像这样的东西：

```
var x = "2@2@POD @POL @IsTransshipmentPort";

var splits = x.split("@");//assuming you want to split on "@"

for(var i = 0; i < splits.length; i++){
    alert(splits[i]);//you can do what you want with each value here
} 
```

[这是一个工作示例](http://jsfiddle.net/tcL8r/)（警告：5 个警报弹出窗口）

# java - Xuggler 流 [0] 不是视频

> ID：16213624
> 
> 赞同：1
> 
> 时间：2013-04-25T11:32:27.590
> 
> 标签：java, netbeans, xuggler, xuggle

这是我第一次在这个表格上提问。我的问题有 2 个部分。

首先请看下面的代码，使用 Xuggle 从视频文件中提取音频。

```
IMediaReader reader;
File f;
reader = ToolFactory.makeReader("E:\\NetBeanWorkspace\\Repo\\VideoSamples\\one.mp4");   
f  =  new File("E:\\NetBean Workspace\\Repo\\VideoSamples\\"+"one"+".wav");                 
IMediaWriter mediaWriter =ToolFactory.makeWriter(f.getAbsolutePath(), reader);    
int sampleRate = 44100;    
int channels = 2;    
mediaWriter.addAudioStream(0, 0, ICodec.ID.CODEC_ID_ADPCM_IMA_WAV, channels, sampleRate);    
reader.addListener(mediaWriter);    
mediaWriter.setMaskLateStreamExceptions(true);

    while(  reader.readPacket() == null  ); 
```

1.  我在某些文件上收到以下错误，并且某些文件工作正常。

    java.lang.IllegalArgumentException：流 [0] 不是 com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:754) 的视频，位于 com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:783) 的 com。 xuggle.mediatool.MediaWriter.onVideoPicture(MediaWriter.java:1434) at com.xuggle.mediatool.AMediaToolMixin.onVideoPicture(AMediaToolMixin.java:166) at com.xuggle.mediatool.MediaReader.dispatchVideoPicture(MediaReader.java:610) at com .xuggle.mediatool.MediaReader.decodeVideo(MediaReader.java:519) at com.xuggle.mediatool.MediaReader.readPacket(MediaReader.java:475) at audioextractor.AudioExtractor.main(AudioExtractor.java:108)

2.  提取 16 位 WAV 文件的最佳编解码器是什么。

请帮我找到这两个问题的答案。

# sql - 查询返回 1 行但抛出更多错误

> ID：16213628
> 
> 赞同：0
> 
> 时间：2013-04-25T11:32:47.483
> 
> 标签：sql, oracle, stored-procedures, plsql

我有一个非常奇怪的问题。

我有以下查询：

```
dbms_output.put_line('Prefix : ' || prefix || 'Vendor ID :' || vendor_id);

select  r.rate 
into rate
from rates r
where r.quality = 0
and r.vendor_id = vendor_id
and r.prefix = prefix
and r.direction = 'OUT'
and r.calendar_value = 0
and (sysdate-(1/24/60) >= r.effective_date_from 
and sysdate-(1/24/60)  < nvl(r.effective_date_to, sysdate)); 
```

现在 rate、vendor_id 和 prefix 是 3 个变量，所有 3 个都是数字。这个查询在一个存储过程中，在这个查询之前我输出了两个 vars，它打印`Prefix : 5 Vendor ID : 361`

这个查询落在`ORA-01422: exact fetch returns more than requested number of rows`

`5`问题是，如果我使用and将此查询复制/粘贴到过程之外的单独 SQL 查询`361`，我会得到 1 行。

有谁知道为什么会发生这种情况？我在 Oracle 11g 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:48:14.793

我敢打赌，您的输入中有重复项。考虑以下数据：

```
create table rates (pk number not null primary key, rate number, 
  quality number, vendor_id number, prefix number,
  direction varchar2(30), calendar_value number, 
  effective_date_from date, effective_date_to date);      

insert into rates values(1, 2, 0, 361, 5, 'OUT', 0, 
  to_date('2013-04-25 13:40:00', 'YYYY-MM-DD hh24:mi:ss'), 
  to_date('2013-04-25 13:45:00', 'YYYY-MM-DD hh24:mi:ss'));

insert into rates values(2, 3, 0, 361, 5, 'OUT', 0, 
  to_date('2013-04-25 13:45:00', 'YYYY-MM-DD hh24:mi:ss'), 
  to_date('2013-04-25 13:46:00', 'YYYY-MM-DD hh24:mi:ss'));

insert into rates values(3, 4, 0, 361, 5, 'OUT', 0, 
  to_date('2013-04-25 13:45:30', 'YYYY-MM-DD hh24:mi:ss'), 
  null); 
```

（注意第 2 行和第 3 行之间的重叠）。

鉴于此数据，您的查询将返回

*   如果在 13:45:00 和 13:45:30 之间运行，则为 1 行
*   如果在 13:45:30 和 13:46:00 之间运行，则为 2 行
*   1排之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:21:13.467

好吧，我不知道是什么问题。

但是改变变量`prefix`和`vendor_id`不同的名字解决了这个问题。

也许它与使用相同名称或其他东西的同一用户的不同程序的变量范围有关，不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:54:42.773

例如，表格中可能有一排带有空格的行。空格不是空的，它是一个字符。但是在过程之外运行查询时，您可能看不到它的输出。如果存在多于一行或不存在行，则 SELECT INTO 或隐式游标将始终引发异常。使用显式游标或处理异常。在您的情况下，例外是 Too_Many_Rows。

# javascript - 如何在jquery中使用条件在其他文本框中显示结果

> ID：16213630
> 
> 赞同：0
> 
> 时间：2013-04-25T11:32:54.847
> 
> 标签：javascript, jquery

我有这样的领域 ![在此处输入图像描述](https://i.stack.imgur.com/dCjtw.png)

如图所示，如果我在结果字段中输入小于 20，则 nor/ab 值应自动更改为“低”，如果输入大于 110，则应显示高，否则正常。所以我只是用jquery尝试了它并没有成功......让我们看看我的表格。

```
<div style=" width:900px; height:auto; float:left; text-align:center;">
<div style=" height:auto; width:140px; float:left">{title}</div>
<div style=" height:30px; width:140px; float:left"><input type="text" height="30px" width="140" name="rep_result_{txt}"  /></div>
<div style=" height:30px; width:140px; float:left">{unit}</div>
<div style=" height:30px; width:140px; float:left">{first_val}&nbsp;-&nbsp;{last_val}</div>
<div style=" height:30px; width:140px; float:left"><input type="text" height="30px" width="140" name="remark_{txt}" > 
```

您可以看到我在 first_val（表示 20）和 last_val（表示 110）两个部分中输入了范围值，所以我如何使用 jquery 使其完整（记住范围值是动态的，所以我不能仅在 20,110 上应用条件）。 ..提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:47:13.897

HTML

```
<input type='text' id='result' />
<input type='text' id='nor' data-min='20' data-max='110' /> 
```

JavaScript

```
$('#result').change(function() {
    var result = $(this).val(),
        nor = $('#nor'),
        min = nor.data('min'),
        max = nor.data('max');
    if(result < min) {
        nor.val('Low');
    } else if (result < max) {
        nor.val('Normal');
    } else {
        nor.val('High');
    }
}); 
```

JSFiddle：http: [//jsfiddle.net/BbPC7/](http://jsfiddle.net/BbPC7/)

可能这会有所帮助。

# html - 使 CSS 弹出窗口始终保持在其父级之上

> ID：16213636
> 
> 赞同：0
> 
> 时间：2013-04-25T11:33:13.363
> 
> 标签：html, css

我有两个 div。

一个是相对位置，另一个是绝对位置。

它们以某种方式充当弹出按钮。

有什么方法可以强制`div`with`position: absolute`始终保持在它的父级之上，无论它的高度是多少？

在上面我的意思是“站在上面”，而不是`z-index`财产

[jsFiddle 示例](http://jsfiddle.net/Rhb3M/)

```
<div style="position: relative; border: 1px solid #000; padding: 2px;">
    <span>Popup container</span>
    <div style="position: absolute;">
        <div style="height: 100px; background-color: #f0f0f0; top: 0;"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:47:03.977

尺寸是根据容器而不是本身计算的

所以你需要给它一个

```
bottom:100%; 
```

演示在[http://jsfiddle.net/gaby/Rhb3M/4/](http://jsfiddle.net/gaby/Rhb3M/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:42:30.927

如果您的`popupParent`高度固定（例如`100px`），那么您可以使用`bottom`：

```
bottom: 100px; 
```

检查更新的小提琴：http: [//jsfiddle.net/Rhb3M/2/](http://jsfiddle.net/Rhb3M/2/)

还要记住您应该添加的其他值（填充、边距、边框）

在您的情况下，它将`105px`( `100px height + border + 2*padding`)

# javascript - 使用纯 JavaScript 更改正文颜色

> ID：16213637
> 
> 赞同：2
> 
> 时间：2013-04-25T11:33:14.973
> 
> 标签：javascript

hi2all 我编写的代码会在用户单击 div 时更改网页的颜色

但在这里不起作用是我的代码有什么问题

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html" />
    <meta name="author" content="gencyolcu" />

    <title>Untitled 1</title>

    <script type="text/javascript">

    var x=document.getElementById("m");
    x.addEventListener("click",function{

      document.body.style.backgroundColor = "red";
    });

    </script>
</head>

<body >

<div id="m">kfjgflg</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:49:31.523

您应该使用以下内容：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html" />
        <meta name="author" content="gencyolcu" />
        <title>Untitled 1</title>
    </head>
    <body>
        <div id="m">kfjgflg</div>
        <script type="text/javascript">
            var x=document.getElementById("m");
            x.addEventListener("click",function(){
                document.body.style.backgroundColor = "red";
            });
        </script>
    </body>
</html> 
```

因为您的原始代码中有两个问题：

*   在标记“函数”之后缺少一个**重要的 ()。**
*   Javascript 仅在页面或元素准备就绪后识别元素。在这种情况下，只有当您的代码在识别它的 Javascript 代码之后，该元素才会被读取以被识别。

上面的代码解决了这个问题。

一个重要的观察：在某些 IE 中，此代码无法工作，因为使用了 x.addEventListener，在这种情况下，您可以将匿名函数转换为普通函数（带有名称）并使用*addEventListener*（如果可用）进行侦听和*onclick*（推荐用于旧 IE）。

这样，代码看起来像：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html" />
        <meta name="author" content="gencyolcu" />
        <title>Untitled 1</title>            
    </head>

    <body>

        <div id="m">kfjgflg</div>

        <script type="text/javascript">
            function changeColor(){
                document.body.style.backgroundColor = "red";
            }
            var x=document.getElementById("m");
            if(!!x.addEventListener){ //If exists
                x.addEventListener("click", changeColor);
            }
            x.onclick = changeColor; //It's a property, and ALWAYS can be set (but in some cases is not recognized)
        </script>
    </body>
</html> 
```

这是此代码的工作示例：http: [//jsfiddle.net/fjorgemota/qCXH3/](http://jsfiddle.net/fjorgemota/qCXH3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:35:44.420

如果您打开了 JavaScript 错误控制台，它会告诉您无法访问`addEventListener`.`undefined`

您需要在构建 DOM 树`m` *后查找元素。*要么放入一个被调用的函数中`DOMContentLoaded`：

```
document.addEventListener('DOMContentLoaded', function() {
    /* ... */
}, false); 
```

或将您的脚本放在`<body>`.

# java - 使用哈希映射用名词替换数字

> ID：16213638
> 
> 赞同：2
> 
> 时间：2013-04-25T11:33:16.377
> 
> 标签：java, hashmap

我的输入语句是：

> 拉姆你在哪里

之后我会得到这个解析树：

```
' 2|TYPE|nx0e-VPadjn-Vnx1 1|RPron|nx-RP-S 0|NOUN|NXN 3|NOUN|NXN ', '1' 
```

我想将 2 替换为 'are' 1 与 'where' 并 ram 替换为 0 。

我应该如何使用哈希映射来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:18:08.023

这个答案基于很多假设，因为您的问题不够清楚。但我没有足够的代表发表评论。

如果您在输入句子上使用[String.split()为：](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

```
String[] words = "ram where are you".split(" ");
// words[0] => ram
// words[1] => where
// words[2] => are
// words[3] => you 
```

看来您的解析树是通过解析输入句子生成的。
解析树第一部分中的每个条目对应于输入句子中的一个单词。
解析条目中的第一个数字似乎对应于输入句子中每个单词的索引。

所以一个解析条目可以被分解为：`<word index>|<word category>|<something not clear>`

所以它看起来

```
2|TYPE|nx0e-VPadjn-Vnx1 => are
1|RPron|nx-RP-S => where
0|NOUN|NXN => ram
3|NOUN|NXN => you 
```

基于这些假设，可以使用使用解析树条目构建的哈希图。
您需要使用 将解析条目放入地图中`key = <word index>; value = <parse entry>`。
这可以通过将解析树分离为条目然后`<word index>`从每个条目中检索来完成。

构建该映射后，您可以处理输入句子并将树条目解析为：

```
String[] words = "ram where are you".split(" ");

Map<Integer, String> entriesMap = getEntriesMap(parseTree); // assuming parseTree is just a String

for(int i = 0; i < words.length; i++) {
    String x = entriesMap.get(i).replaceAll("^" + i + "|", words[i]);
} 
```

填充地图的方法。有多种方法可以做到这一点。
使用带有适当正则表达式的[Pattern](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)类可能是最好的方法。

```
private Map<Integer, String> getEntriesMap(String parseTree) {
    Map<Integer, String> entriesMap = new LinkedHashMap<Integer, String>();

    // assuming parseTree format as: '<parse entries separated by spaces>', '1'
    // use String.split() to split the parseTree by single quote (')
    // first element in returning array would contain the <parse entries separated by spaces>
    // use String.split() again on that element with space to separate parse entries
    // for each <entry> in <parse entries>
    //     split <entry> with pipe (|) and use first element in resulting array as the key and <entry> as the value to put in entriesMap

    return entriesMap;
} 
```

无法弄清楚`,'1'`解析树末尾对应的是什么。

# asp.net-mvc-4 - 将 url 从视图传递到 PaypalReturnView 上的控制器

> ID：16213639
> 
> 赞同：1
> 
> 时间：2013-04-25T11:33:17.930
> 
> 标签：asp.net-mvc-4, view, paypal, controller

我几乎已经整理好我的移动网络应用程序，我只需要在完成我的 paypal 交易后从退货页面获取退货网址，我需要该网址，因为它有令牌和 payerid，这样我就可以完成付款。

我已经看到我可以获得Request.Url.AbsoluteUri，但无论如何我可以解码它，所以它是正常的字符串格式，然后我可以提取令牌和payerid，也是我如何获取这些信息视图加载，而不是在按钮按下时进行..

谢谢

# php - IIS7重写正则表达式不识别+号

> ID：16213640
> 
> 赞同：0
> 
> 时间：2013-04-25T11:33:20.090
> 
> 标签：php, iis-7, web-config

我正在使用带有 IIS7 的 PHP。在 web.config 文件中，我制定了重写规则。我匹配的模式是

```
^product/([0-9a-zA-Z\+\-]+)$ 
```

现在的问题是当有 + 登录 url 时它不起作用，例如它不适用于

```
http://mywebsite/product/ABC+DEF+GHI 
```

我需要它为上述工作。

但它确实适用于

```
http://mywebsite/product/ABC DEF GHI 
```

所以我想它是在识别空间，但不是 +

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:32:00.837

我找到了答案。只是分享以防有人需要。

就放

```
<system.webServer>
<security>
    <requestFiltering allowDoubleEscaping="true"/>
</security> 
```

在 web.config 文件中。

并做了

# javascript - 计算 WiFi 带宽或 WiFi 信号强度

> ID：16213644
> 
> 赞同：2
> 
> 时间：2013-04-25T11:33:31.483
> 
> 标签：javascript, jquery-mobile

我想使用 jQuery 或 JavaScript 计算 WiFi 或 WiFi 信号强度的带宽。我知道我们可以计算服务器端代码的强度，但我想在客户端计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:38:52.823

检查这个网站，我认为这将适合 WiFi 连接：

> [http://www.wiseloop.com/demo/javascript-bandwidth-tester](http://www.wiseloop.com/demo/javascript-bandwidth-tester)

这是加载图像时计算下载速度的示例：

```
var imageAddr = "http://www.tranquilmusic.ca/images/cats/Cat2.JPG" + "?n=" + Math.random();
var startTime, endTime;
var downloadSize = 5616998;
var download = new Image();

download.onload = function() {
  endTime = (new Date()).getTime();
  showResults();
}

startTime = (new Date()).getTime();
download.src = imageAddr;

function showResults() {
  var duration = (endTime - startTime) / 1000; //Math.round()
  var bitsLoaded = downloadSize * 8;
  var speedBps = (bitsLoaded / duration).toFixed(2);
  var speedKbps = (speedBps / 1024).toFixed(2);
  var speedMbps = (speedKbps / 1024).toFixed(2);
  alert("Your connection speed is: \n" +
    speedBps + " bps\n" +
    speedKbps + " kbps\n" +
    speedMbps + " Mbps\n");
}
```

# ubuntu - 当我在 ubuntu 系统中安装 perl 时，系统回复为权限被拒绝

> ID：16213649
> 
> 赞同：0
> 
> 时间：2013-04-25T11:33:41.567
> 
> 标签：ubuntu, command-line, installation, ubuntu-12.04

我只想安装星号软件。为此，我需要安装 perl cmd 等。但是，当我尝试在 ubuntu 中安装 perl 时，系统会回复：权限被拒绝。

这是我使用的命令：

```
php05@linux05:~$ cd /usr/local
php05@linux05:/usr/local$ 
php05@linux05:/usr/local$ wget http://asterisk.gnuinter.net/files/asterisk-perl-0.08.tar.gz
--2013-04-25 16:56:59--  http://asterisk.gnuinter.net/files/asterisk-perl-0.08.tar.gz Resolving
asterisk.gnuinter.net (asterisk.gnuinter.net)... 69.54.200.117
Connecting to asterisk.gnuinter.net
(asterisk.gnuinter.net)|69.54.200.117|:80... connected. HTTP request
sent, awaiting response... 200 OK Length: 13217 (13K)
[application/x-tar] asterisk-perl-0.08.tar.gz: Permission denied

Cannot write to `asterisk-perl-0.08.tar.gz' (Permission denied).
php05@linux05:/usr/local$ 
```

我怎样才能获得适当的权限来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T11:14:42.357

尝试使用“ **sudo** wget [http://asterisk.gnuinter.net/files/asterisk-perl-0.08.tar.gz](http://asterisk.gnuinter.net/files/asterisk-perl-0.08.tar.gz) ”命令，因为您尝试将文件下载到 /usr/local 文件夹，然后输入密码再一次，这里去。

# python - Python 中的 SNMP 代理

> ID：16213660
> 
> 赞同：5
> 
> 时间：2013-04-25T11:34:11.337
> 
> 标签：python, python-2.7, twisted, snmp, pysnmp

我需要 python 中的 SNMP 代理，它侦听特定端口并响应基本 SNMP 命令（如 GTE、SET、GETNEXT ...等）

如果有人有代码，请回复此帖子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:49:25.727

[在pysnmp 网站上](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp/v2c-custom-scalar-mib-objects.html)有一组 SNMP 命令响应程序脚本。

这是一个简单的基于 PySNMP 的命令响应程序，它使用 /tmp 中的文本文件作为 MIB 数据存储。

```
from pysnmp.entity import engine, config
from pysnmp.entity.rfc3413 import cmdrsp, context
from pysnmp.carrier.asynsock.dgram import udp
from pysnmp.smi import instrum, error
from pysnmp.proto.api import v2c

snmpEngine = engine.SnmpEngine()

config.addSocketTransport(
    snmpEngine,
    udp.domainName,
    udp.UdpTransport().openServerMode(('127.0.0.1', 1161))
)

config.addV1System(snmpEngine, 'my-area', 'public', contextName='my-context')

config.addVacmUser(snmpEngine, 2, 'my-area', 'noAuthNoPriv', (1,3,6), (1,3,6))

snmpContext = context.SnmpContext(snmpEngine)

class FileInstrumController(instrum.AbstractMibInstrumController):
    def readVars(self, vars, acInfo=(None, None)):
        try:
            return [ (o,v2c.OctetString(open('/tmp/%s.txt' % o, 'r').read())) for o,v in vars ]
        except IOError:
            raise error.SmiError

    def writeVars(self, vars, acInfo=(None, None)):
        try:
            for o,v in vars:
                open('/tmp/%s.txt' % o, 'w').write(str(v))
            return vars
        except IOError:
            raise error.SmiError

snmpContext.registerContextName(
    v2c.OctetString('my-context'),          # Context Name
    FileInstrumController()                 # Management Instrumentation
)

cmdrsp.GetCommandResponder(snmpEngine, snmpContext)
cmdrsp.SetCommandResponder(snmpEngine, snmpContext)

snmpEngine.transportDispatcher.jobStarted(1)

try:
    snmpEngine.transportDispatcher.runDispatcher()
except:
    snmpEngine.transportDispatcher.closeDispatcher()
    raise 
```

请记住，此脚本只是您的入门，它不处理一些极端情况。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T12:03:35.017

```
import socket
import netsnmp
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)
s.bind((HOST, PORT)) #give host ip and port no:
s.listen(2)

conn, addr = s.accept()
data = conn.recv(1024)
bindvariable = netsnmp.Varbind("give full oid here")
xx = netsnmp.snmpget(bindvariable, Version = 2, DestHost = '192.168.0.216', Community='private') 
```

同样，您也可以使用 snmpset 和 walk

# spring - Spring FactoryBean 在配置之前使用？

> ID：16213662
> 
> 赞同：0
> 
> 时间：2013-04-25T11:34:17.977
> 
> 标签：spring

我有两个 FactoryBeans 为应用程序上下文中的现有 bean 创建代理。

FactoryBeanA.getObject() 作为单例预实例化的一部分被调用，它尝试自动装配返回的实例。

此自动装配需要一个由 FactoryBeanB 定义的 bean，该 bean 尚未配置（已注入属性）。

是否可以通过这样的方式进行控制，即在尝试实例化任何 bean 之前，我确信两个 FactoryBeans 都已完全配置（注入属性）？

**编辑：** 从 FactoryBeanA 对象自动装配工作正常，直到我将 FactoryBeanB 更改为需要注入属性。在此更改之后，我看到 A-bean 的自动装配尝试调用 FactoryBeanB.getObject()，但这会失败，因为尚未注入属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:39:47.780

问题实际上是由我自己的错误引起的。FactoryBeanB 没有像我想的那样正确配置。

# c# - 如何在 Asp.net MVC 中为 textboxfor 创建自定义“类型”属性？

> ID：16213665
> 
> 赞同：3
> 
> 时间：2013-04-25T11:34:29.477
> 
> 标签：c#, jquery, .net, asp.net-mvc-3

我在 MVC 中工作。我陷入了困境。据我们所知，

```
 @Html.Textboxfor 
```

有一个名为**type**的属性，它检测文本框可以采用的输入类型。

例如：**type = "email"**将电子邮件作为输入，如果验证失败，则会显示错误消息，例如“请输入有效的电子邮件地址”。

**type = "number"** 仅将数字作为输入，并在使用文本时显示验证消息。

我希望我的文本框将采用手机/电话号码（带国家代码和不带国家代码。例如 +9177777777777）。

那么我可以创建自己的自定义**“类型”**属性来完成上述任务并在验证失败时生成我自己的验证消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:38:19.387

`type`您所说的属性是html`<input />`元素的属性。根据 HTML5 规范，此属性只能采用几个有效值。在这里看到他们：http: [//www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

因此，您不能只添加任何类型的“自定义”值，这意味着浏览器会进行一些自动验证。我认为，您想要的是能够根据特定的电话号码格式验证输入。为此，您需要`[RegularExpression]`在模型类的属性上使用属性（完全不同的东西，但名称相同）。这与不显眼的客户端验证相结合，将为您提供所需的行为。

## 更新

不同的`type`属性值使您能够调用浏览器的本机客户端验证支持。对于自定义格式，使用通用`type="text"`并将正则表达式放在`pattern`属性中。`title`浏览器将显示来自属性的消息的错误弹出窗口。

所以，在你看来，你可以有这样的东西：

```
@Html.TextBoxFor(m => m.PhoneNumber, new { pattern = "\d{3}-\d{3}-\d{4}" }) 
```

假设属性名称是`PhoneNumber`. 根据您要支持的实际格式，您的正则表达式会有所不同。

* * *

我认为值得一提的是与验证相关的另外几个属性：

*   `required`
*   `maxlength`

更多关于本地客户端验证的信息：http: [//www.html5rocks.com/en/tutorials/forms/constraintvalidation/](http://www.html5rocks.com/en/tutorials/forms/constraintvalidation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:14:02.653

是的，有可能，您会在这里找到您喜欢的解决方案： [http ://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

编辑：我在想你的问题，我想我错了。`Custom Type`您可以使用 Mvc“ ”添加您所谓的“ `Template`”。

例如： 创建一个“ `DisplayTemplates`”目录到`Shared`你的视图的“ ”文件夹中。

在这个新模型中，使用您的自定义模型创建一个`PartialView`类型。将您想要的所有内容放入新的局部视图/模型中，以执行您所期望的操作。

进入您的主视图页面后。Juste 调用`@Html.DisplayFor(model=>model.YourNewCustomModel)`，MVC 完成其余的工作。当然，您的新 CustomModel 必须是主调用页面模型的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:19:51.533

也许我遗漏了一些东西，但您可以简单地说以下内容（相应地替换 ???）：

```
@Html.TextBoxFor(m => m.???, new { type = "???" }) 
```

# wordpress - Wordpress - 显示 3 个相关帖子，无论帖子类型如何，自定义或其他

> ID：16213667
> 
> 赞同：2
> 
> 时间：2013-04-25T11:34:36.433
> 
> 标签：wordpress, custom-post-type

我正在尝试在我的单个帖子视图下方显示 3 个帖子（我设置了自定义帖子类型，因此希望此查询适用于所有单个帖子页面，无论帖子类型如何）。

但是，使用下面的代码，我没有显示任何相关的帖子。当我删除时，`.'&exclude=' . $current`我会显示 3 个相关帖子，但当前帖子是其中之一。因此，为什么我添加了“排除”，但我不明白为什么当我添加它时它没有显示任何内容。

任何帮助将不胜感激。谢谢

```
<?php

$backup = $post; 
$current = $post->ID; //current page ID

global $post;
$thisPost = get_post_type(); //current custom post
$myposts = get_posts('numberposts=3&order=DESC&orderby=ID&post_type=' . $thisPost .  
'&exclude=' . $current);

$check = count($myposts);

if ($check > 1 ) { ?>
<h1 id="recent">Related</h1>
<div id="related" class="group">
    <ul class="group">
    <?php   
        foreach($myposts as $post) :
            setup_postdata($post);
    ?>
        <li>
            <a href="<?php the_permalink() ?>" title="<?php the_title() ?>" rel="bookmark">
                <article>
                    <h1 class="entry-title"><?php the_title() ?></h1>
                    <div class="name-date"><?php the_time('F j, Y'); ?></div>
                    <div class="theExcerpt"><?php the_excerpt(); ?></div>
                </article>
            </a>
        </li>

    <?php endforeach; ?>
    </ul>
<?php
    $post = $backup; 
    wp_reset_query();
?>

</div><!-- #related -->
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:11:32.657

您可以使用[WP_Query ，而不是使用 get_posts()](https://codex.wordpress.org/Class_Reference/WP_Query)

```
<?php

// You might need to use wp_reset_query(); 
// here if you have another query before this one

global $post;

$current_post_type = get_post_type( $post );

// The query arguments
$args = array(
    'posts_per_page' => 3,
    'order' => 'DESC',
    'orderby' => 'ID',
    'post_type' => $current_post_type,
    'post__not_in' => array( $post->ID )
);

// Create the related query
$rel_query = new WP_Query( $args );

// Check if there is any related posts
if( $rel_query->have_posts() ) : 
?>
<h1 id="recent">Related</h1>
<div id="related" class="group">
    <ul class="group">
<?php
    // The Loop
    while ( $rel_query->have_posts() ) :
        $rel_query->the_post();
?>
        <li>
        <a href="<?php the_permalink() ?>" title="<?php the_title() ?>" rel="bookmark">
            <article>
                <h1 class="entry-title"><?php the_title() ?></h1>
                <div class="name-date"><?php the_time('F j, Y'); ?></div>
                <div class="theExcerpt"><?php the_excerpt(); ?></div>
            </article>
        </a>
        </li>
<?php
    endwhile;
?>
    </ul><!-- .group -->
</div><!-- #related -->
<?php
endif;

// Reset the query
wp_reset_query();

?> 
```

尝试上面的代码并根据自己的需要进行修改。修改以适合您自己的标记。

# string - awk：字符串 Concat 添加“0”

> ID：16213671
> 
> 赞同：0
> 
> 时间：2013-04-25T11:35:01.013
> 
> 标签：string, awk, string-concatenation, concat

我试图在 awk 脚本中连接两个字符串，但我得到的结果在最后一个位置有一个“0”。

```
 (input...) | awk '$1 ~ "match" { 
            (...)
            STRING1 = $2 ;
            STRING2 = $3 ;

            RESULT = STRING1 "" STRING2 ;   

            print RESULT ;   

    }' | (output....) 
```

如果例如`$2 = "Foo"`and `$3 = "Bla"`，RESULT 将是“ `FooBla0`”。

如何连接结果为“ `FooBla`”的这两个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:42:53.620

给定的代码不会将 a 添加`0`到行中，或者您的代码不完整，您的输入与您预期的不一样，或者在简化问题时您遗漏了一条关键信息：

```
$ cat file
match foo bla

$ awk '$1 ~ "match" { 
             STRING1 = $2 ;
             STRING2 = $3 ;

             RESULT = STRING1 "" STRING2 ;

             print RESULT ;   

     }' file
foobla 
```

注意：对于简单的字段连接，这是很多不必要的代码：

```
$ awk '$1=="match"{print $2$3}' file
foobla 
```

还要注意 第一个是完整字段字符串匹配，第二个是正则表达式匹配之间`$1=="match"`的区别。`$1~"match"`如果你真的想要第二个，我建议使用`$1~/match/`.

* * *

正如我怀疑你错过了重要的信息，`print fflush()`打印函数的退出状态。您想要`print RESULT;fflush()`或更好，只需将函数调用放在脚本的下一行。

# javascript - REST call with XQIB reports function send-request not available

> ID：16213674
> 
> 赞同：2
> 
> 时间：2013-04-25T11:35:24.110
> 
> 标签：javascript, xml, xquery

I have been trying simple REST call with XQIB. My attempt is only more simplified example ([http://www.xqib.org/js/RESTCallCourses_source.html](http://www.xqib.org/js/RESTCallCourses_source.html)), but I can't get to run neither of them. I get the same error in both cases:

> MXQuery output the following error during compilation: Line 8, Column 12: err:XPST0017 Function named http-client:send-request with arity 1 not available

It must be something obvious, but I can't figure it out. Here is my code:

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>   
    <title>Sample</title>
    <meta charset="UTF-8"/>
    <script type="text/javascript" src="mxqueryjs/mxqueryjs.nocache.js"></script>
    <script type="application/xquery">
      declare namespace http-client = "http://expath.org/ns/http-client";

        for $x in http-client:send-request
          (
            <http-client:request href="http://www.fi.muni.cz/~xprazak2/xqib/samplefires.xml" method="get"/>
          )//*:street
        return
          insert node
            <p>{$x/*:street/data(.)}</p>
          as last into b:dom()//body     
    </script>
  </head>
  <body>
    <h1>Will it work?</h1>    
  </body>
</html> 
```

I even tried functions with different arities ([http://www.zorba-xquery.com/html/modules/expath/http-client](http://www.zorba-xquery.com/html/modules/expath/http-client)), same error. Has anyone encountered this before?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T00:28:07.147

> Seems like a bug to me. It is definitely in the spec and I also tried with another XQuery processor, where this query works fine. I also tried using xqib and got the same error. Looks to me like the version used in there demo is more up-to-date than what is in the svn or you have to build it yourself with some special parameters

# redis - Hiredis 等待消息

> ID：16213676
> 
> 赞同：3
> 
> 时间：2013-04-25T11:35:32.123
> 
> 标签：redis, hiredis

我正在使用hiredis C 库连接到redis 服务器。订阅新消息后，我无法弄清楚如何等待新消息。

我的代码如下所示：

```
signal(SIGPIPE, SIG_IGN );
  struct event_base *base = event_base_new();

  redisAsyncContext *c = redisAsyncConnect("127.0.0.1", 6379);
  if (c->err) {
    /* Let *c leak for now... */
    printf("Error: %s\n", c->errstr);
    return 1;
  }

  redisLibeventAttach(c, base);
  redisAsyncSetConnectCallback(c, connectCallback);
  redisAsyncSetDisconnectCallback(c, disconnectCallback);
  redisAsyncCommand(c, NULL, NULL, "SET key %b", argv[argc - 1],
                    strlen(argv[argc - 1]));
  redisAsyncCommand(c, getCallback, (char*) "end-1", "GET key");
  redisAsyncCommand(c, getCallback, (char*) "end-1", "SUBSCRIBE foo"); 
```

现在如何告诉hiredis等待频道上的消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:24:07.063

你不必告诉hiredis你需要在频道上等待：事件循环只会等待之前注册的Redis连接。

这是一个完整的例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <signal.h>
#include "hiredis.h"
#include "async.h"
#include "adapters/libevent.h"

void subCallback(redisAsyncContext *c, void *r, void *priv) {
    redisReply *reply = r;
    if (reply == NULL) return;
    if ( reply->type == REDIS_REPLY_ARRAY && reply->elements == 3 ) {
        if ( strcmp( reply->element[0]->str, "subscribe" ) != 0 ) {
            printf( "Received[%s] channel %s: %s\n",
                    (char*)priv,
                    reply->element[1]->str,
                    reply->element[2]->str );
        }
    }
}

void connectCallback(const redisAsyncContext *c, int status) {
    if (status != REDIS_OK) {
        printf("Error: %s\n", c->errstr);
        return;
    }
    printf("Connected...\n");
}

void disconnectCallback(const redisAsyncContext *c, int status) {
    if (status != REDIS_OK) {
        printf("Error: %s\n", c->errstr);
        return;
    }
    printf("Disconnected...\n");
}

int main (int argc, char **argv) {
    signal(SIGPIPE, SIG_IGN);
    struct event_base *base = event_base_new();

    redisAsyncContext *c = redisAsyncConnect("127.0.0.1", 6379);
    if (c->err) {
        /* Let *c leak for now... */
        printf("Error: %s\n", c->errstr);
        return 1;
    }

    redisLibeventAttach(c,base);
    redisAsyncSetConnectCallback(c,connectCallback);
    redisAsyncSetDisconnectCallback(c,disconnectCallback);
    redisAsyncCommand(c, subCallback, (char*) "sub", "SUBSCRIBE foo");

    event_base_dispatch(base);
    return 0;
} 
```

您只需使用以下命令发布内容即可对其进行测试：

```
redis-cli publish foo something 
```

event_base_dispatch 函数是实际启动事件循环并使其等待 Redis 订阅的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T03:12:57.873

基于 LibUV 的解决方案

Redis 版本：5.0.5

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <signal.h>
#include "hiredis.h"
#include "async.h"
#include <time.h>
#include <uv.h>
#include "adapters/libevent.h"
#include "adapters/libuv.h"

void subCallback(redisAsyncContext *c, void *r, void *priv) {
    redisReply *reply = r;
    time_t seconds;
    seconds = time(NULL);
    if (reply == NULL) return;
    if (reply->type == REDIS_REPLY_ARRAY && reply->elements == 3) {
        if (strcmp(reply->element[0]->str, "subscribe") != 0) {
            printf("[%d] Received[%s] channel %s: %s\n",
                   seconds,
                    (char *) priv,
                   reply->element[1]->str,
                   reply->element[2]->str);
        }
    }
}

void connectCallback(const redisAsyncContext *c, int status) {
    if (status != REDIS_OK) {
        printf("Error: %s\n", c->errstr);
        return;
    }
    printf("Connected...\n");
}

void disconnectCallback(const redisAsyncContext *c, int status) {
    if (status != REDIS_OK) {
        printf("Error: %s\n", c->errstr);
        return;
    }
    printf("Disconnected...\n");
}

int main(int argc, char **argv) {
    signal(SIGPIPE, SIG_IGN);
    uv_loop_t *loop = malloc(sizeof(uv_loop_t));
    uv_loop_init(loop);

    redisAsyncContext *c = redisAsyncConnect("127.0.0.1", 6379);
    if (c->err) {
        /* Let *c leak for now... */
        printf("Error: %s\n", c->errstr);
        return 1;
    }

    redisLibuvAttach(c, loop);
    redisAsyncSetConnectCallback(c, connectCallback);
    redisAsyncSetDisconnectCallback(c, disconnectCallback);
    redisAsyncCommand(c, subCallback, (char *) "sub", "SUBSCRIBE test-channel");

    uv_run(loop, UV_RUN_DEFAULT);
    uv_loop_close(loop);
    free(loop);
    return 0;
} 
```

![频道发布](https://i.stack.imgur.com/vnTzO.png)

![频道订阅](https://i.stack.imgur.com/X0Ywm.png)

# selenium - 位于 selenium 2.0 中的元素的可见性的替代方法是检查 DOM 上元素的存在？

> ID：16213679
> 
> 赞同：2
> 
> 时间：2013-04-25T11:35:34.090
> 
> 标签：selenium, python-2.7, selenium-webdriver

我的框架中有一个问题，我尝试等待元素的可见性，而不是使用静态睡眠。问题是元素的可见性检查 DOM 上元素的存在，这将返回 true，但在我的系统中，页面尚未完全加载。发生的情况是，一旦我在检查元素的可见性时得到了正确的设置值。当实际页面完全加载时，这些值会被重置。

我的问题是我可以使用什么代替静态睡眠来等待实际页面（不仅是 DOM）完全加载，因为元素的可见性对我不起作用？

PS我正在使用带有python 2.7的Selenium webdriver

/亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-13T20:58:38.997

该`expected_conditions.visibility_of_element_located(locator)`方法将检查两者 - DOM 中元素的存在，以及它的可见性（元素以大于零的高度和宽度显示）。

理想情况下，该`driver.get(url)`方法应该自动等待整个页面加载完毕，然后再继续下一行。但是，如果正在测试的 Web 应用程序使用 ajax 调用/操作（虽然页面已加载但 ajax 操作仍在进行中），这可能不会按预期运行。在这种情况下，我们可以使用类似下面的方法来等待稳定性，然后再对所需的 web 元素执行操作。

```
# create the firefox driver
driver = webdriver.Firefox()

# navigate to the app url
driver.get('http://www.google.com')

# keep a watch on jQuery 'active' attribute
WebDriverWait(driver, 10).until(lambda s: s.execute_script("return jQuery.active == 0"))

# page should be stable enough now, and we can perform desired actions
elem = WebDriverWait(driver, 10).until(expected_conditions.visibility_of_element_located((By.ID, 'id')))

elem.send_keys('some text') 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T19:01:41.733

试试`ExpectedConditions.elementToBeClickable`。见：[https ://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#elementToBeClickable-org.openqa.selenium.By-](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#elementToBeClickable-org.openqa.selenium.By-)

# xcode - Xcode 快速跳转到与 Control 关联的 Action

> ID：16213680
> 
> 赞同：14
> 
> 时间：2013-04-25T11:35:36.560
> 
> 标签：xcode, interface-builder, storyboard, xib

有没有一种快速的方法可以跳转到与控件关联的操作。

假设 XIB 文件上有一个具有关联操作的按钮。查找与此相关的代码的方法相当繁琐。有没有捷径可以快速跳转到代码。

我被 Visual Studio 宠坏了——双击一个按钮，它会把你带到它的处理程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-25T13:53:46.300

我知道至少可以快速访问操作所在的源文件的最快方法如下：

1.  在 UI 编辑器中选择按钮
2.  点击`ctrl`+ `1`（这将打开“相关文件”下拉菜单）
3.  导航到“Sent Actions”子菜单，例如通过`s`,`enter`
4.  选择相关的类（我认为在这种情况下只能有一个，所以再打`enter`一次）

一旦你在课堂上，动作应该很容易找到。如果不是这种情况，因为您的源文件太大，请键入`ctrl`+`6`打开“文档项目”下拉菜单并开始键入操作的名称。看到动作后，通过键盘或鼠标选择它。

如果您经常不知道动作的名称，则必须在导航到该类之前查找它，例如通过右键单击按钮。

# android - PhoneGap 中的 Web 服务

> ID：16213683
> 
> 赞同：0
> 
> 时间：2013-04-25T11:35:39.793
> 
> 标签：android, web-services, cordova, undefined

我是phonegap的新手。我被困住了。在电话间隙中调用 web 服务时我无法获得结果。我同时使用了 Ajax 和 getJSON 方法。结果未定义，RealData 变量未定义。我觉得我错过了一些东西。请帮助各位。
这是我的代码....

```
function onDeviceReady() {

    console.log("Device is Ready111111");
    alert("alert Device ready");

    /*var jqxhr = $
                .getJSON(
                'http://www.infoline.in/mobdata.aspx?
                                          reqfor=area_list&city=ahmedabad',
                        function() {

                            console.log("Device is Ready111111....."+jqxhr);
                            alert('success');
                        }).error(function() {
                    alert('error');
                });*/
    $(document).ready(function () {
        $.ajax({

            url: "http://www.infoline.in/mobdata.aspx",
            data: {
                "reqfor": "area_list",
                "city": "ahmedabad"
            },
            crossDomain: true,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg, textStatus, jqXHR) {
                alert(textStatus);

                var theRealData = msg.d;
                alert(theRealData.length)
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:05:51.340

为了查看对象，您必须将 msg 转换为字符串。

试试这个：

```
console.log(JSON.stringify(msg)); 
```

# angularjs - angular.js 广播错误：$rootScope.broadcast 不是函数

> ID：16213684
> 
> 赞同：6
> 
> 时间：2013-04-25T11:35:40.417
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我正在将项目动态添加到项目数组中，并希望让指令知道有新项目。因此，在控制器函数 addItem() 中，我尝试执行以下操作：

```
setTimeout(function(){
    $rootScope.broadcast("itemAdded");
    // I also tried: $scope.broadcast("itemAdded"); which isn't working
}); 
```

问题：我收到错误：

> $rootScope.broadcast 不是函数

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T11:49:16.710

它是一个错字：

```
$rootScope.$broadcast(name, args) 
```

# javascript - 将用户重定向到屏幕顶部（智能手机）

> ID：16213693
> 
> 赞同：2
> 
> 时间：2013-04-25T11:35:49.513
> 
> 标签：javascript, jquery, mobile-safari

我想知道是否有任何 jQuery/Javascript 事件允许将用户重定向到智能手机屏幕的顶部。这是为了始终显示顶部的 safari 栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:44:36.643

您可能想要做的是使用锚。把它放在页面顶部：

```
<a name="top"></a> 
```

将此添加到您希望页面顶部的链接所在的位置：

```
<a href="#top">Go to Top</a> 
```

以下是更多信息的链接：http: [//www.w3schools.com/tags/tag_a.asp](http://www.w3schools.com/tags/tag_a.asp)

# asp.net - 如果我使用会话，为什么控制器线程被阻塞？

> ID：16213694
> 
> 赞同：1
> 
> 时间：2013-04-25T11:35:49.873
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, controller, asynccontroller

我有一个非常简单的控制器：

```
 public class HomeController : Controller
    {
        public ActionResult Index()
        {
            Session["SomeData"] = "123";
            return View();
        }

        [HttpPost]
        public ActionResult LongTest()
        {
            Thread.Sleep(5000);
            return Json(new { Text = DateTime.Now.ToString("hh:mm:ss.fff") + " - LongTest"});
        }

        [HttpPost]
        public ActionResult CantAnswer()
        {
            return Json(new { Text = DateTime.Now.ToString("hh:mm:ss.fff") + " - CantAnswer"});
        }
    } 
```

我以这种方式从客户端使用这些方法：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnLongOperation').click(function () {
            $.post("/Home/LongTest", null, function (data) {
                $('#result').text(data.Text);
            }, "json");
        });

        $('#btnWnotWork').click(function () {
            $.post("/Home/CantAnswer", null, function (data) {
                $('#result').text(data.Text);
            }, "json");
        });
    });
</script>
<div>
    <input id="btnLongOperation" type="button" value="Long operation"/>
    <input id="btnWnotWork" type="button" value="Won't work"/>
</div>
<div id="result"> 
```

如果我单击第一个按钮，然后不等待 5 秒单击第二个按钮，我的第二个操作将不会被调用。如果您在 Init 方法中使用 session 删除字符串，您将看到可以调用这些操作而无需相互等待。但是，一旦您使用会话对象，您将不会看到第二个操作的结果，直到第一个操作完成。谁能解释 asp.net mvc 的这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:40:23.983

这是由会话锁定引起的。本质上，每个使用会话状态的请求都会对其进行锁定，直到完成读取。在前一个请求释放锁之前，后续请求*无法*访问。`Session`

这样做的目的是确保会话数据的完整性。例如，如果请求 A 需要写入会话，请求 B 需要读取，但请求是同时发出的，会发生什么情况？B 读取的数据是不可预测的，因为您无法知道它是写入前还是写入后。

阅读此处了解更多信息：

[http://www.timvasil.com/blog14/post/2008/04/16/Handling-multiple-simultaneous-requests-from-a-user-in-ASPNET.aspx](http://www.timvasil.com/blog14/post/2008/04/16/Handling-multiple-simultaneous-requests-from-a-user-in-ASPNET.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:43:59.683

您可以将异步控制器用于不同的行为。看到这个[链接](http://www.codeproject.com/Tips/526099/Asynchronous-Controller-in-ASP-NET-MVC)

# php - PDO 显示表数组

> ID：16213695
> 
> 赞同：13
> 
> 时间：2013-04-25T11:35:56.420
> 
> 标签：php, mysql, arrays, pdo

仅使用此功能并没有按计划进行。它应该获取数据库中的所有表名并将它们存储在一个数组中。但是，数组的结果使下面示例中显示的数组加倍：

```
Array ( [0] => 113340 ) 
Array ( [0] => 113340 [1] => 116516 ) 
Array ( [0] => 113340 [1] => 116516 [2] => 139431 ) 
Array ( [0] => 113340 [1] => 116516 [2] => 139431 [3] => 20731 ) 
Array ( [0] => 113340 [1] => 116516 [2] => 139431 [3] => 20731 ... ) 
```

我正在使用的代码：

```
function itemDiscontinued($dbh, $id, $detail) {
  try {
    $tableList = array();
    $result = $dbh->query("SHOW TABLES");
    while ($row = $result->fetch(PDO::FETCH_NUM)) {
      $tableList[] = $row[0];
      print_r($tableList);
    }
  }
  catch (PDOException $e) {
    echo $e->getMessage();
  }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-12-14T08:26:45.080

要获得所有表的名称，这要好得多

```
public function list_tables()
{
    $sql = 'SHOW TABLES';
    if($this->is_connected)
    {
        $query = $this->pdo->query($sql);
        return $query->fetchAll(PDO::FETCH_COLUMN);
    }
    return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:43:05.697

您正在 while 循环中打印数组！每次您从记录集中向其中添加项目时，这将打印它。相反，您需要在完成填充后打印它，如下所示：

```
function itemDiscontinued($dbh, $id, $detail) {
    try {   
        $tableList = array();
        $result = $dbh->query("SHOW TABLES");
        while ($row = $result->fetch(PDO::FETCH_NUM)) {
            $tableList[] = $row[0];
        }
        print_r($tableList);
    }
    catch (PDOException $e) {
        echo $e->getMessage();
    }
} 
```

# javascript - 如何更改注入目标以在 jit infovis 工具包中创建树图？

> ID：16213697
> 
> 赞同：0
> 
> 时间：2013-04-25T11:35:58.423
> 
> 标签：javascript, infovis

我需要在一个网页中创建 2 个方形树图。我使用 jit infovis 工具包来帮助创建这个树形图。是否可以创建不使用 id 为“infovis”的 div 的树形图？例如，当我将 div 的 id 更改为“test”之类的其他内容时，它会导致错误树形图不起作用。我还已经更改了用于创建 treemap 的 jit javascript 函数中的“注入”属性。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T13:56:24.220

是的，可以这样做。

在 InfoVis 的标准示例中，div“infovis”包含在“center-container”中。html页面一般包含一个css文件base.css。该文件将某些规则应用于“infovis”和“center-container”。

```
#infovis {
  position:relative;
  width:600px;
  height:600px;
  margin:auto;
  overflow:hidden;
} 
```

而对于中心容器..

```
#center-container {
  width:600px;
  left:200px;
  background-color:#1a1a1a;
  color:#ccc;
} 
```

您可以在呈现可视化的 html 文件中检查这一点。您应该确保要在其中注入可视化的 div 应用相同/相似的规则。您可能还需要在您的 html 文件和 css 文件中进行更多更改，以确保您具有正确的 div 层次结构并且所有 base.css 规则都正确应用于它们。这就是我可以说的所有内容，而无需查看您的 html 文件和代码。

# email - 电子邮件中的内部链接？

> ID：16213698
> 
> 赞同：4
> 
> 时间：2013-04-24T05:36:00.557
> 
> 标签：email, hyperlink

如何在电子邮件中插入内部链接？

这是我在浏览器中打开的 html，在 gmail 中复制粘贴，将其发送给我自己并期望其内部链接能够正常工作：

```
<html>
  <body>
    <p><a href="#Title1" title="Click to go to Title 1">Birds</a></p>
    <p><a href="#Title2" title="Click to go to Title 2">Trees</a></p>
    <p><a href="#Title3" title="Click to go to Title 3">Flowers</a></p>
    <h4 id="Title1">Birds</h4>
    <p> There are many different birds. There are... </p>
    <h4 id="Title2">Trees</h4>
    <p> Trees have many different colors and branches... </p>
    <h4 id="Title3">Flowers</h4>
    <p> The Lignum Vitae is the national flower of Jamaica... </p>
  </body>
</html> 
```

**编辑**：

我将以下内容发送给我自己：

```
<html>
  <body>
    <p><a href="#Title1" title="Click to go to Title 1">Birds</a></p>
    <p><a href="#Title2" title="Click to go to Title 2">Trees</a></p>
    <p><a href="#Title3" title="Click to go to Title 3">Flowers</a></p>
    <h4 id="Title1"><a name="Title1">Birds</a></h4>
    <p> There are many different birds. There are... HOWEVER, it should be noted that Gmail appears to override the default browser/HTML functionality with JavaScript (and inserts a prefix into the named anchor and corresponding href so as not to interfere with its web interface). Consequently it seems that Gmail will only scroll to the named anchor if it is currently out of view - if it is already visible then no scroll occurs. HOWEVER, it should be noted that Gmail appears to override the default browser/HTML functionality with JavaScript (and inserts a prefix into the named anchor and corresponding href so as not to interfere with its web interface). Consequently it seems that Gmail will only scroll to the named anchor if it is currently out of view - if it is already visible then no scroll occurs.</p>
    <h4 id="Title2"><a name="Title2">Trees</a></h4>
    <p> Trees have many different colors and branches... HOWEVER, it should be noted that Gmail appears to override the default browser/HTML functionality with JavaScript (and inserts a prefix into the named anchor and corresponding href so as not to interfere with its web interface). Consequently it seems that Gmail will only scroll to the named anchor if it is currently out of view - if it is already visible then no scroll occurs. HOWEVER, it should be noted that Gmail appears to override the default browser/HTML functionality with JavaScript (and inserts a prefix into the named anchor and corresponding href so as not to interfere with its web interface). Consequently it seems that Gmail will only scroll to the named anchor if it is currently out of view - if it is already visible then no scroll occurs.</p>
    <h4 id="Title3"><a name="Title3">Flowers</a></h4>
    <p> The Lignum Vitae is the national flower of Jamaica... HOWEVER, it should be noted that Gmail appears to override the default browser/HTML functionality with JavaScript (and inserts a prefix into the named anchor and corresponding href so as not to interfere with its web interface). Consequently it seems that Gmail will only scroll to the named anchor if it is currently out of view - if it is already visible then no scroll occurs. HOWEVER, it should be noted that Gmail appears to override the default browser/HTML functionality with JavaScript (and inserts a prefix into the named anchor and corresponding href so as not to interfere with its web interface). Consequently it seems that Gmail will only scroll to the named anchor if it is currently out of view - if it is already visible then no scroll occurs.</p>
  </body>
</html> 
```

并且链接不可点击。我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:41:45.363

在*gmail*中，您将需要使用命名锚点：

```
<a name="Title1">Birds</a> 
```

正如您所料，不同的电子邮件客户端......工作方式不同。有些支持 ID 的内部链接；有些没有；一些支持两者。AFAIK gmail 仅支持*命名*锚点。请记住，可能会有一些电子邮件客户端根本不支持内部链接。

in the `id`in the`h4`不是绝对必要的，因为命名的锚应该在大多数电子邮件客户端中工作。但是，据我所知，没有理由不同时拥有两者。以下内容在 Gmail 中适用于我：

```
<h4 id="Title1"><a name="Title1">Birds</a></h4> 
```

但是，应该注意的是，Gmail 似乎用 JavaScript 覆盖了默认的浏览器/HTML 功能（并在命名的锚点和相应的 href 中插入了一个前缀，以免干扰其 Web 界面）。因此，Gmail 似乎**只会在当前不可见的情况下滚动到指定的锚点**- 如果它已经可见，则不会发生滚动。

# selenium - Selenium Grid2 打印屏幕

> ID：16213703
> 
> 赞同：0
> 
> 时间：2013-04-25T11:36:10.107
> 
> 标签：selenium, jenkins, selenium-webdriver, selenium-grid

我想知道人们是如何从硒网格测试中获取屏幕截图的。大概我的屏幕截图将保存到运行 selenium 节点的机器上，我怎样才能将它恢复到一个公共位置？理想情况下，我希望我的图像都在詹金斯的工作目录中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:29:21.157

屏幕截图保存到您正在执行测试的机器上，而不是网格节点上。我们没有使用 Jenkins，而是使用 Ruby 环境。

```
#Ruby Screenshot
driver = Selenium::WebDriver.for :ie
driver.get "https://www.google.com"
driver.save_screenshot("./screen.png") 
```

屏幕截图存储在您从连接到 selenium 网格的 webdriver 实例实例化 webdriver 的机器上。我相信 Jenkins 中有一个环境变量可以让您设置它们的存储位置。不过，我对詹金斯的了解有限。

# matlab - Matlab：从文本文件中读取并计算出现值的百分比

> ID：16213705
> 
> 赞同：0
> 
> 时间：2013-04-25T11:36:17.973
> 
> 标签：matlab, file-io, find-occurrences

我有一组 .txt 文件，其名称为： `table.iterations.txt`where `iterations = 1:10000`（所以它是`table.01.txt`,`table.02.txt`等`table.1001.txt`，每个文件大小小于 2kb）。每个 txt 文件在不同的行 pe 中包含值、不带小数的整数：

```
table.01.txt  table.02.txt ... table.1001.txt
 2              5               32
 5             19               37
19             45               58
52             88               62 
62             89               75
95                              80
99                              88
                               100 
```

每个 txt 文件可以包含不同数量的值，其中`0<value<101`.

我需要有关如何读取所有这些文件以查找其值在所有 txt 文件中出现的百分比的帮助。在上面的粗略示例中，值 2 出现一次，值 5 出现两次，值 100 出现一次，依此类推。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:56:05.763

从评论中，根据[这篇文章](https://stackoverflow.com/questions/7287723/process-a-list-of-files-with-a-specific-extension-name-in-matlab/7293443#7293443)：

```
dirName = 'C:\yourpath';                           %# folder path
files = dir( fullfile(dirName,'table.*.txt') );    %# list all *.txt files, make sure you have only the txt's you are interested on inside selected path
files = {files.name}';                             %# file names
data = cell(numel(files),1);                       %# store file contents
for i=1:numel(files)  
    fname = fullfile(dirName,files{i});            %# full path to file
    values{i}=load(fname);                         %# load values from txt to variable
    data{i} = histc(values{i},1:100);              %# find occurences, for max value =25 change 100 to 25
end

thestructdata=[data{:}];                           %# convert to matrix
for j2=1:size(thestructdata,1)
    occ(j2,:)=histc(thestructdata(j2,:),1);        %# find the number of occurence, 1 is present, on each line on all txt files 
end
occ=[occ]';                                        %# gather results to an array
occperce=occ(1,:)./numel(files)*100                %# results in percentage, max value = 25, change to 100 if needed as the OP question 
```

结果（对于 25 个值的最大值）：

```
occ =    
    14    11    10    12    13    15    11    10    11    10     7    14    11    12    11    13     7    11    10    12    14    12    13    14    11

occperce =

  Columns 1 through 20

   56.0000   44.0000   40.0000   48.0000   52.0000   60.0000   44.0000   40.0000   44.0000   40.0000   28.0000   56.0000   44.0000   48.0000   44.0000   52.0000   28.0000   44.0000   40.0000   48.0000

  Columns 21 through 25

   56.0000   48.0000   52.0000   56.0000   44.0000 
```

如果你愿意，你可以这样做删除所有 txt 文件：`delete(dirName,'table.*.txt');`

# python - 将 multiprocessing.Queue 放入 multiprocessing.Queue 会爆炸

> ID：16213708
> 
> 赞同：0
> 
> 时间：2013-04-25T11:36:18.607
> 
> 标签：python, multithreading, queue, multiprocessing

以下代码在 python 2.7 和 3.3 中引发异常并打印 123。

```
from multiprocessing import Queue

class Pool(object):
    def __init__(self):
        self.q = Queue()

p = Pool()
p.q.put(p)
print(123) 
```

这实际上是某种竞争条件，如下所示：

```
yuv@yuvpad2:~/$ python3.3 t.py
123
Traceback (most recent call last):
  File "/home/yuv/Downloads/Python-3.3.0/Lib/multiprocessing/queues.py", line 249, in _feed
yuv@yuvpad2:~/$ 
```

完整的错误是`RuntimeError: Queue objects should only be shared between processes through inheritance`并且回溯根本没有解释它是如何/在哪里发生的。问题的根源是队列中的对象不能引用队列。我真正的用例实际上是一个工作对象和一个池对象，其中一个工作人员报告它完成工作到池的`Queue`. 所以我希望工人将自己送回给工人`Queue`。

尽管多线程对我的情况很有效，但我不使用的原因`Queue.Queue`是因为在 Python 2.7 中存在一个错误，它使 queue.get() 忽略 Ctrl-C，这很烦人。

有没有办法干净地做这个模式？

[真正的问题代码在键盘上](http://codepad.org/JX0lDoeG)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:59:47.807

抱怨的错误是这样的：

```
p.q.put(p) 
```

在这里，您尝试将引用 a 的对象`Queue`放入队列中。队列用于在进程之间进行通信，其工作方式是腌制您尝试放入其中的任何内容，然后在另一个进程中将其取消腌制 - 但腌制 a`Queue`是不可能的，甚至没有意义。

这就是为什么当您尝试腌制队列时会收到您提到的错误：

```
>>> from multiprocessing import Queue
>>> q = Queue()
>>> import pickle
>>> pickle.dumps(q)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.2/multiprocessing/queues.py", line 77, in __getstate__
    assert_spawning(self)
  File "/usr/lib/python3.2/multiprocessing/forking.py", line 51, in assert_spawning
    ' through inheritance' % type(self).__name__
RuntimeError: Queue objects should only be shared between processes through inheritance 
```

如果您想使用队列在进程之间共享数据，可以这样做：

```
class Worker(multiprocessing.Process):
    queue = multiprocessing.Queue()
    def run(self):
        print(self.queue.get())
        ... 
```

有关更多示例，您应该查看[文档](http://docs.python.org/3/library/multiprocessing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:49:39.830

我想有几种方法可以做到这一点，但如果不确切知道你不想做什么，很难推荐一种。

我想最简单的方法是为此目的使用 2 个不同的队列。一个用于新来的工人，一个用于完成的工人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:56:38.600

回溯未在代码中显示问题的原因是`multiprocessing.Queue`该类启动了一个后台线程，并且该线程中正在生成异常。我得到以下回溯...

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/queues.py", line 266, in _feed
    send(obj)
  File "/usr/lib/python2.7/multiprocessing/queues.py", line 77, in __getstate__
    assert_spawning(self)
  File "/usr/lib/python2.7/multiprocessing/forking.py", line 51, in assert_spawning
    ' through inheritance' % type(self).__name__
RuntimeError: Queue objects should only be shared between processes through inheritance 
```

...我怀疑是由线路发起的...

```
p.q.put(p) 
```

...您似乎将`Pool`包含对象的`Queue`对象放入 a`Queue`中，这是不允许的，因此出现错误。

如果您想要一个有用的解决方案，这将有助于明确您想要实现的目标。

# php - sql 查询的语法错误

> ID：16213710
> 
> 赞同：0
> 
> 时间：2013-04-25T11:36:21.937
> 
> 标签：php, mysql

以下是代码，但我收到此错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

任何帮助将不胜感激。

```
 <?php
 include("../includes/conn.php");
 $sql = "SELECT * 
 FROM  `t_maincontent`
 where uid_page =". $_GET['page'] ;
 $results = mysql_query($sql, $conn) or die(mysql_error());
 $content = mysql_fetch_assoc($results);
 //print $content['nv_content']."¬".$content['nv_title']."¬".$content['nv_meta'];
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:38:48.493

请阅读有关从 PHP 进行数据库查询的基础知识。

您应该`$_GET['page']`通过`isset( $_GET['page'] );`仅发送查询（如果存在）来检查是否存在。

```
include( '../includes/conn.php' );
if( isset( $_GET['page'] ) )
{
    /* cast to int would be enough to cancel SQL injection attacks */
    $sql = 'SELECT * FROM  t_maincontent WHERE uid_page = ' . (int) $_GET['page'] ;
    $results = mysql_query($sql, $conn) or die(mysql_error());
    $content = mysql_fetch_assoc($results);
} 
```

# javascript - 在 jquery 验证中使用远程方法的问题

> ID：16213712
> 
> 赞同：3
> 
> 时间：2013-04-25T11:36:32.020
> 
> 标签：javascript, jquery, ajax, validation, jquery-validate

我正在关注[这篇](http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/)文章以验证我的表单

我的问题是当我必须使用该`remote`方法时，例如`remote: "check-username.php"`

由于远程方法的[文档](http://docs.jquery.com/Plugins/Validation/Methods/remote)对我来说不是很清楚，我会知道：

我需要如何在 php 脚本中构造我的 json 输出？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-02T03:41:38.773

要对 使用默认方法`remote`，远程页面必须以字符串值`"true"`或响应`"false"`。

**有效**（*成功*）必须是：

```
echo "true"; 
```

**无效**（*失败*）：

```
echo "false"; // this can be any false. eg: 0 , "" , NULL. 
```

响应将被评估为 JSON。

要应用错误消息，除了默认的无效远程响应（“false”），将输入名称添加到验证器选项`messages`对象，如下所示。

```
rules:{
    username:{
        remote: "check-username.php"
    }
},   
messages:{
    username:{
        remote: jQuery.format('{0} is already in use, please choose a different name')
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:15:41.023

You don't need JSON. You can put any text. For example you can

```
echo "success"; 
```

for passed validation, and enter validation message like:

```
echo "Username already exists."; 
```

for failed validation.

In your callback do something like this:

```
remote: {
           url: "check-username.php" ,
           type: "post" ,
           data: {
              username: function() {
              return $("#username").val();
           },
           complete: function(data){
                if( data.responseText != "success" ) {
                   alert(data.responseText);
                   //handle failed validation
                }
             }
         } 
```

# php - PDO/PHP脚本查询数据库（游戏服务器封禁系统）

> ID：16213714
> 
> 赞同：0
> 
> 时间：2013-04-25T11:36:37.363
> 
> 标签：php, pdo

数据库结构：

*   姓名：犯罪对象
*   原因：给予处罚的理由
*   管理员：谁发布了处罚
*   编号：PK
*   类型：1,2,3,4,5

类型 3：踢类型 0：禁止

它的设置方式是一旦玩家受到惩罚，它将在数据库中添加一个新行。我正在尝试创建一个 PHP 脚本，玩家可以在其中输入他们在网站上的用户名（他们的用户名 = 数据库中的名称字段，它将显示他们帐户上的所有罪行。

到目前为止我所拥有的：

```
$name = $_GET["username"];

try {
$conn = new PDO('mysql:host=localhost;dbname=server', 'username', 'pass');
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$data = $conn->query('SELECT * FROM logs WHERE name = ' . $conn->quote($name));

} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

如果上述内容是否正确，我不确定在显示数据方面我会从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:41:56.703

直接来自[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)

```
$stmt = $conn->prepare('SELECT * FROM logs WHERE name = ?');
$stmt->execute(array($_GET["username"]));
$data = $stmt->fetchAll();
?>
<table>
<? foreach ($data as $row): ?>
  <tr>
    <td><?=$row['type']?></td>
    <td><?=$row['admin']?></td>
    <td><?=$row['reason']?></td>
  </tr>
<? endforeach ?> 
```

# json - 为什么“<”字符在 JSON 响应中被替换为 unicode 字符

> ID：16213716
> 
> 赞同：3
> 
> 时间：2013-04-25T11:36:42.983
> 
> 标签：json, api, facebook-graph-api

在 FaceBook 的 Json API 响应中用 unicode 字符替换“<”字符的原因是什么？

安全？？如果响应中出现“<”字符，则可能进行什么样的攻击。

谢谢巴拉

# java - 使用 servlet 获取从网站返回的参数

> ID：16213717
> 
> 赞同：0
> 
> 时间：2013-04-25T11:36:51.103
> 
> 标签：java, tomcat, servlet-3.0

你好，

**1.**我将这样的表格发送到测试 Sandbox Paypal 服务器

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Start page</title>
</head>
<body>
<form method=post action=https://api-3t.sandbox.paypal.com/nvp>
        <input type=hidden name=USER value=my_sandbox_account>
        <input type=hidden name=PWD value=my_pass>
        <input type=hidden name=SIGNATURE value=my_sign_key>
        <input type=hidden name=VERSION value=72.0>
        <input type=hidden name=PAYMENTREQUEST_0_PAYMENTACTION
            value=Sale>
        <input name=PAYMENTREQUEST_0_AMT value=6.00>
        <input type=hidden name=RETURNURL
            value=http://www.my_return_url.com>
        <input type=hidden name=CANCELURL
            value=http://www.my_return_url.com>
        <input type=submit name=METHOD value=SetExpressCheckout>
</form>
</body>
</html> 
```

**2.**提交该表单后，我会在浏览器中收到如下字符串：

```
TOKEN=EC%23409823094JKK&TIMESTAMP=2013%2d04%2d25T10%3a30%3a54Z&CORRELATIONID=345803985njkk3&ACK=Success&VERSION=72%2e0&BUILD=5709304 
```

**3.**我希望我的 servlet 在我的变量中获取这个返回的字符串，以便我可以进一步管理它

```
 import java.io.IOException;

    import javax.servlet.ServletException;
    import javax.servlet.annotation.WebServlet;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    /**
     * Servlet implementation class SetExpressCheckoutServlet
     */
    @WebServlet("/SetExpressCheckoutServlet")
    public class SetExpressCheckoutServlet extends HttpServlet {
        private static final long serialVersionUID = 1L;

        /**
         * @see HttpServlet#HttpServlet()
         */
        public SetExpressCheckoutServlet() {
            super();
            // TODO Auto-generated constructor stub
        }

        /**
         * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            doPost(request, response);
        }

        /**
         * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

            String token = request.getQueryString();
            System.out.println(token.toString());
        }

    } 
```

当我启动项目时，它只通过了第 1 步和第 2 步，但第 3 步没有通过。

请帮助我正确创建servlet。

**更新**

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String token = request.getParameter("TOKEN");
    PrintWriter pw = response.getWriter();
    if(token == null){
        System.out.println("It is null");
    } else {
        pw.print("<html><body>" + token + "<body></html>");
    }

} 
```

**我的 web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0" metadata-complete="true">

  <display-name>Ppconnector</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>SetExpressCheckoutServlet</servlet-name>
    <servlet-class>ua.pp.connector.SetExpressCheckoutServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>SetExpressCheckoutServlet</servlet-name>
    <url-pattern>/SetExpressCheckoutServlet</url-pattern>
  </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:46:48.473

您想要的是通过已知参数名称获取参数值，使用[`ServletRequest#getParameter(String name)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html). 参数是 get 请求中的那些`name=value`对，它们可以通过调用`getParameter`方法在 servlet 中检索。所以，在你的情况下，它会是：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String token = request.getParameter("TOKEN");
    //retrieve other parameters in a same way
    //and handle parameters accordingly
} 
```

对于要调用的 servlet，您的请求 URL 必须路径 servlet 的 url 映射，在您的情况下，该映射是通过`@WebServlet`注释声明的。

此外，如果您不需要 get 方法 - 不要使用它。否则，更好的做法是让 get 和 post 方法都调用一个通用函数，例如`processRequest(...)`.

# visual-studio-2012 - CleanWPPAllFilesInSingleFolder 错误使我的项目不再加载

> ID：16213719
> 
> 赞同：86
> 
> 时间：2013-04-25T11:36:54.673
> 
> 标签：visual-studio-2012

使用 VS2012 我创建了一个动态数据项目。一切正常，然后我开始配置 Web 部署设置。我不确定我更改了什么设置，因为没有错误。但是，当我尝试加载解决方案时，我收到项目的以下错误，它将不再加载。

```
Specified condition "$(CleanWPPAllFilesInSingleFolder)" evaluates to "" instead of a boolean. C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets 
```

我在 csproj 文件中看不到 CleanWPPAllFilesInSingleFolder。关于如何解决这个问题以便我可以再次加载项目的任何想法？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-04-25T19:57:19.330

我也有这个问题。尝试以下操作：

1.  关闭 Visual Studio
2.  删除您的 .user 和 .suo 文件
3.  重新打开解决方案。

这对我有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-22T09:45:54.087

对于这种类型的部署问题，我发现了一个非常奇怪（并且有效）的解决方法，如果您尝试关闭和打开 VS 却没有运气，请尝试在发布过程之前关闭所有打开的文档。奇怪吧？:)

因此针对此类问题的完整修复指南如下所示：

1.  尝试“清洁”然后重建
2.  如果仍未发布，请尝试再次关闭并重新打开您的项目
3.  还是没有运气？尝试关闭 VS 但这次删除所有`*.user`&`*.suo`文件，然后再次打开您的解决方案并试一试。
4.  最后，如果所有这些步骤都不起作用，请尝试我的最新技巧，关闭所有打开的文档并尝试一下

让我知道这是否对您有所帮助:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-10T00:25:04.580

我关闭并重新打开了我的解决方案。我倾向于认为这是预览功能中的一个缺陷，因为这是我在它开始发生之前所做的唯一不同的事情。但是，从那以后我就无法复制它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-13T10:46:56.677

我所做的只是关闭 Visual Studio 然后重新打开它。完毕

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T23:42:45.470

就我而言，结果证明目标服务器上没有安装 IIS！安装它解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-17T12:42:18.273

就我而言，在删除所有 *.user 和 *.suo 后，我不得不重新启动 VS。

# java - 将 JSON 解析为 java 类

> ID：16213723
> 
> 赞同：0
> 
> 时间：2013-04-25T11:37:06.943
> 
> 标签：java, json, gson

我有这个 JSON，我正在尝试使用 GSON 解析它的 Java 类。这是JSON

```
resp = "{"isVisible":true,"image":{"preferenceOrder":["Rose","Lilly","Lotus"]}}"; 
```

我的java解析代码是这样的。

```
ImageOrderResult result = new Gson().fromJson(resp,ImageOrderResult.class); 
```

这是我定义的类

```
public class ImageOrderResult {
    //Used for general Error Tracing
    public String status = "";
    public String message = "";
    public String errorTrace = "";

    public class Image{
        @SerializedName("preferenceOrder")
        public ArrayList<String> flowers= new ArrayList<String>();
    }

    @SerializedName("isVisible")
    public boolean isVisible= false; 
} 
```

在这里，我错过了鲜花阵列部分。解析器无法获取值列表。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:40:52.573

问题是你定义了 Image 的类型，但是你的类缺少一个引用变量来实际“存储”它。你需要像这样定义你的类才能正确序列化它：

```
public class ImageOrderResult {
    //Used for general Error Tracing
    public String status = "";
    public String message = "";
    public String errorTrace = "";

    @SerializedName("image")
    public Image image = null;

    @SerializedName("isVisible")
    public boolean isVisible= false; 

    public class Image{
        @SerializedName("preferenceOrder")
        public ArrayList<String> flowers= new ArrayList<String>();
    }
} 
```

# html - Bootstrap警报中关闭类按钮上的Jquery事件

> ID：16213728
> 
> 赞同：3
> 
> 时间：2013-04-25T11:37:24.847
> 
> 标签：html, jquery, twitter-bootstrap

我想在单击 Jquery 警报块上的关闭标志时执行一些 Jquery 事件。我的视图代码如下::

```
<div class=' alert alert-block fade in'  >
    <button type='button' class='close' data-dismiss='alert'>×</button>
    <p>Just Close Me  </p>
<div> 
```

我的 Js 代码如下::

```
$('button.close').click(function () {
                var id = $(this).attr('data-id');
                alert("deleted list is"+id);

            }); 
```

根据上面的代码，我无法在单击“X”按钮时检测或执行 Jquery 事件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-27T09:44:56.563

如果您使用的是 Bootstrap 3，则需要执行以下操作：

```
$('#my-alert').on('close.bs.alert', function () {
//code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-16T14:32:46.507

我知道这已经很老了，但这值得一看

[http://www.tutorialrepublic.com/codelab.php?topic=bootstrap&file=alert-events](http://www.tutorialrepublic.com/codelab.php?topic=bootstrap&file=alert-events)

```
<script type="text/javascript">
$(document).ready(function(){
    $("#myAlert").bind('closed.bs.alert', function(){
        alert("Alert message box has been closed.");
    });
});  
</script>

<div id="myAlert" class="alert alert-info">
    <a href="#" class="close" data-dismiss="alert">&times;</a>
    <strong>Note!</strong> Please read the comments carefully.
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-28T06:15:20.223

当您关闭时，与警报对应的 dom 元素将从 Dom 中删除。

试试这个：

```
<html>
<head>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script src="node_modules/jquery/dist/jquery.min.js"></script>

    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
</head>
<body>
    <form id="myform">
        <input type="submit" value="Submit">

    </form>
<div id="messages" class="hide" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <div id="messages_content"></div>
</div>
<script>
    $('#myform').submit(function(e) {
        $('#messages').removeClass('hide').addClass('alert alert-success alert-dismissible').slideDown().show();
        $('#messages_content').html('<h4 class="usefont" style="text-align: center">Thank you message!</h4>');
        $('#modal').modal('show');
        e.preventDefault();
    });
    $('#messages').on('close.bs.alert', function (e) {
        $('#messages').removeClass('alert alert-success alert-dismissible').addClass('hide').slideDown().show();
        e.preventDefault();

    });

</script>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:39:35.573

这就是绑定关闭事件的方式

```
$('#my-alert').bind('close', function () {
    //do something…
}) 
```

PS。您应该阅读手册，所有内容都在其中。

# r - 转换格式为 d/mm/yy 的日期（早于 69 年）

> ID：16213730
> 
> 赞同：2
> 
> 时间：2013-04-25T11:37:31.990
> 
> 标签：r

使用该函数将字符“6/07/69”转换为日期会`as.Date`导致“2068-07-06”而不是“1968-07-06”。我怎样才能解决这个问题？

例子：

```
as.Date(c("6/07/68", "6/07/69"), format="%d/%m/%y")
[1] "2068-07-06" "1969-07-06" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:50:45.060

你可以使用图书馆`chron`

例如

```
> library(chron)
> as.Date(chron(c("6/07/67", "6/07/69"), format = c(dates = "m/d/y")))
#[1] "1967-06-07" "1969-06-07" 
```

# c++ - c++ 中的 printf 如何处理传递给它的参数？

> ID：16213731
> 
> 赞同：-1
> 
> 时间：2013-04-25T11:37:37.540
> 
> 标签：c++, c, parsing, printf

我一直试图了解 printf 如何处理传递给它的参数。更具体地说，有人可以解释以下输出是如何发生的。

```
int a=1;
printf("%d %d %d",++a,a,a++);// outputs: 3 3 1

a=1;
printf("%d %d %d",a++,a,a++);// outputs: 2 3 1

a=1;
printf("%d %d %d",a,a,a++);// outputs: 2 2 1

a=1;
printf("%d %d %d",a,a++,a);// outputs: 2 1 2

a=1;    
printf("%d %d %d",a,a,++a);// outputs: 2 2 2 
```

该`cout`语句出现相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:40:18.973

这段代码

```
printf("%d %d %d",++a,a,a++);// outputs: 3 3 1 
```

在同一个表达式中修改 a 两次。准确地说，它修改了两次，没有中间的*序列点*。因此，此代码具有*未定义的行为*，任何对其进行推理的尝试都是徒劳的。编译器可以为所欲为，不同的编译器会做不同的事情。有关详细说明，请参阅[未定义](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)的行为和序列点。

使用这样的代码

```
printf("%d %d %d",a,a,a++);// outputs: 2 2 1 
```

当 a++ 递增时，它是未定义的，它可能在 a 用于其他参数之前或之后。所以你的输出可能会有所不同。

这里唯一要理解的是**不要写这样的代码**。遵循这条规则，你就不会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:41:46.437

`printf`这与如何和`cout`工作没有任何关系。C++ 标准定义了对表达式求值及其副作用的排序。措辞在 C++03 和 C++11 之间发生了一些变化，但它目前将函数参数的评估描述为*unsequenced*。也就是说，您无法保证函数参数的执行顺序。

由于您在两个未排序的表达式中使用`a`和 modify的值`a`，因此您有未定义的行为。

> 如果标量对象上的副作用相对于同一标量对象上的另一个副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。

# c# - 对通用列表进行降序排序

> ID：16213732
> 
> 赞同：2
> 
> 时间：2013-04-25T11:37:51.473
> 
> 标签：c#, asp.net-mvc, list

我的控制器中有一个方法

```
 public ActionResult Index()
    {
        return View(db.Posts.ToList());
    } 
```

如何按降序获取列表？就像不是从 id:1 开始，而是从表中的最后一个 id 开始

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:39:50.647

```
public ActionResult Index()
    {
        return View(db.Posts.OrderByDescending(p => p.Id).ToList());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:40:11.967

使用[Enumerable.OrderByDescending 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx)

> 按降序对序列的元素进行排序。

```
public ActionResult Index()
{
    return View(db.Posts.OrderByDescending(r=> r.id).ToList());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:40:36.313

像这样的东西：

```
db.Posts.OrderByDescending(x => x.id).ToList(); 
```

# php - 如何检查收到的电子邮件是否合法？

> ID：16213736
> 
> 赞同：4
> 
> 时间：2013-04-25T11:38:12.023
> 
> 标签：php, email, pipe

我正在开发一个从 PIPE 获取电子邮件的系统，验证从电子邮件发送的电子邮件地址是否在客户端数据库中，并将其写入数据库。

问题是我不想有安全问题，如果有人用 PHP 向系统发送电子邮件，它也会记录下来。那么，如何检查电子邮件是否由正确的邮件服务器发送？我正在考虑获取域的邮件服务器的 IP，并在电子邮件标头中验证它是否是从这些服务器发送的。因此，如果我收到来自 test@hotmail.com 的电子邮件，它会 ping mail.hotmail.com 并检查电子邮件是否来自这些 IP 地址。

无论如何，如果有人有一个像 yourdomain.com 这样的自定义域，在共享的 cPanel 服务器中运行，这些服务器中的其他人可以使用 PHP 发送电子邮件并通过 IP 验证。因此，我正在考虑检查电子邮件是使用 PHP 发送的还是从邮件服务器发送的，但我不知道该怎么做。

你的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:45:56.130

我`http://verify-email.org/`给你找的。他们有一个 API，因此您可以通过该服务检查电子邮件地址。

**编辑**

当您在网站上查看电子邮件地址时，您会看到以下结果：

```
MX record about gmail.com exists.
Connection succeeded to alt3.gmail-smtp-in.l.google.com SMTP.
220 mx.google.com ESMTP tz3si2159695bkb.62 - gsmtp

> HELO verify-email.org 
250 mx.google.com at your service

> MAIL FROM: <check@verify-email.org>
=250 2.1.0 OK tz3si2159695bkb.62 - gsmtp

> RCPT TO: <test@gmail.com>
=550-5.1.1 The email account that you tried to reach does not exist. Please try

550-5.1.1 double-checking the recipient's email address for typos or

550-5.1.1 unnecessary spaces. Learn more at

550 5.1.1 http://support.google.com/mail/bin/answer.py?answer=6596 tz3si2159695bkb.62 - gsmtp 
```

您可以通过登录到 smtp 服务器并发送您在上面看到的命令来构建自己的检查：

```
> HELO verify-email.org
> MAIL FROM: <check@verify-email.org>
> RCPT TO: <test@gmail.com> 
```

您可以在获得的输出中检查错误或成功消息。我认为用php构建并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:58:03.067

> 我正在考虑检查电子邮件是使用 PHP 发送的还是从邮件服务器发送的

您通常无法找出这两者之间的区别。使用 PHP 发送的电子邮件看起来与来自邮件服务器的电子邮件完全相同，并且使用 PHP 发送的电子邮件很可能*也是*来自邮件服务器的电子邮件。

您可以尝试根据您所做的监控自己编写检测（您自己的过滤器）并找出错误邮件（或者如果您因法律法规而无法深入监控电子邮件，则从您的用户那里报告的邮件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T04:14:13.590

呃，如果我误会了，这是我第一次回答这么抱歉的问题。无论如何，如果您正在检查 PHP 中的电子邮件，我有一些可以提供帮助的东西；

```
If($_POST['email']){
    $Email = $_POST['email'];
    $Allowed = array('gmail.com', 'yahoo.com', 'ymail.com', etc..);
    If(filter_var($Email, FILTER_VALIDATE_EMAIL)){
        $Domain = array_pop(explode('@', $Email));
        If(!In_Array($Domain, $Allowed)){
            Echo 'Your response here...'; 
}}} 
```

或者为了检查邮件的字符，你可以调用一个函数或者自己检查；

```
Function checkEmail($Email){
    return preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $Email);
} 
```

所以它会是这样的；

```
checkEmail('email@domain.com'); 
```

这会检查输入，如果没有电子邮件字符，您可以选择要做什么。

希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-06T12:45:43.473

是的，有很多电子邮件验证工具。我个人喜欢[www.verifyemailaddress.org](http://www.verifyemailaddress.org)

但是有很多这样的工具可以找到。

# mysql - 调用过程mysql没有返回值

> ID：16213737
> 
> 赞同：0
> 
> 时间：2013-04-25T11:38:13.703
> 
> 标签：mysql, null, return-value, procedure

我在 mysql 中有一个过程，它有 4 个参数作为输入，3 个参数作为 OUTPUT，并且 OUTPUT 的一个参数不返回任何内容（null）。

```
DELIMITER $$
drop procedure if exists `cierreMes`$$
create procedure cierreMes (in tarjeta varchar(100),in bancoBus varchar(100),in mes int,in anyo int, out total int, out nulas int, out erroneas int)
begin
    declare stockActual int default 0;
    declare cantidad int;
    /*declare xcantidad,xnulas,xerroneas int;*/
    declare entrada, salida int default 0;
    declare total int default 0;

    select stock
        into stockActual
    from almacen
    where idProducto = 
        (select idProducto from productos where productos.banco = bancoBus and productos.plastico = tarjeta);

    call entradasSalidas(tarjeta,bancoBus,mes,anyo,@ent,@sal);
    set entrada = @ent;
    set salida = @sal;

    call obtenerMovimientosMes(tarjeta,bancoBus,mes,anyo,@cant,@nul,@err);
    set cantidad = @cant;
    set nulas = @nul;
    set erroneas = @err;    

    set total =(stockActual + entrada) - (salida + cantidad);

    select total; 

end$$
DELIMITER ;

call cierreMes('4B MC','SANTANDER',3,2013, @total, @nulas, @erroneas);

select @total, @nulas, @erroneas; 
```

> 当我“调用”@nulas 和@erroneas 时返回一个值，但@total 什么也没有。

选择总计，它的工作正常。但没有返回值，在此选择中：选择@total，@nulas，@erroneas；@total 为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:35:42.587

你`total`用这个公式计算：

```
set total =(stockActual + entrada) - (salida + cantidad); 
```

如果计算中使用的其中一个值是`NULL`，那么总计将是`NULL`。

`entrada`我可以看到、`salida`和的集合语句`cantidad`。但是 的价值是`stockActual`多少？

您似乎缺少一个将设置`stockActual`.

# python - Paramiko 在运行简单命令时在 150 多台服务器上运行时挂起

> ID：16213743
> 
> 赞同：0
> 
> 时间：2013-04-25T11:38:28.993
> 
> 标签：python, linux, ssh, paramiko

我正在尝试使用 python 的 Paramiko 模块在一堆远程服务器上运行多个命令。

我尝试运行的命令是简单的命令，例如 cat、lspci（带有 grep）以及只有 1 行输出的小脚本。

问题是，如果我提供几台机器（约 50 台），它就可以正常工作。当我尝试在多台机器上运行脚本时，问题就开始了。

```
try:
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(host, username='root', password='pass')
    transport = ssh.get_transport()
    channel = transport.open_session()
    stdin, stdout, stderr = ssh.exec_command(cmd)
    for line in stdout.readlines():
        line = line.strip() 
        sheet1.write(row_line,0,host,style_cell) # writing to xls file
        sheet1.write(row_line,1,line,style_cell) # writing to xls file

    while channel.recv_ready():
        channel.recv(1024)

    ssh.close()

expect:
    print stdout
    print stderr 
```

这是我得到的标准输出，标准错误：

```
paramiko.ChannelFile from paramiko.Channel 2 (EOF received) (open) window=2097152
paramiko.Transport at 0xce44c9d0L (cipher aes128-ctr, 128 bits) (active; 2 open channel(s)) 
```

请指教，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:54:17.740

也许这是特定服务器的问题。尝试输出导致错误的服务器，看看如果仅在该特定服务器上运行脚本，是否可以重新创建问题。

# python - 在 python 中使用 cookie 刷新浏览器时出错

> ID：16213745
> 
> 赞同：0
> 
> 时间：2013-04-25T11:38:32.193
> 
> 标签：python, html, cgi

这是我的 form.html

```
form name="form1" action="/cgi-bin/form2.py" method="post"
input type="text" name="firstname"
input type="submit" value="submit" 
```

下面是我的form2.py

```
import cgi
print 'Content-type:text/html\n\n'
cookie=Cookie.SimpleCookie()
form = cgi.FieldStorage()
searchterm = form["firstname"].value
print 'Set-Cookie: lastvisit=' + str(searchterm)
cookie["firstname"]=searchterm
print "firstname="+ cookie["firstname"].value
cookie_string = os.environ.get('HTTP_COOKIE')
if not cookie_string:
      print '<p>First visit or cookies disabled</p>'
 else: 
      print '<p>The returned cookie string was "' + cookie_string + '"</p>'
cookie.load(cookie_string)
lastvisit = float(cookie['lastvisit'].value)
cookie['lastvisit']['path'] = '/var/www/cgi-bin/'
print searchterm
print 'Content-type:text/html\n\n'
print "<meta http-equiv='refresh' content='5'>" 
```

我们有一个 form.html 和 form2.py 文件，从 form.html 我提交 firstname 到 form2.py 提交后我得到'searchterm'值，然后我在刷新后刷新浏览器我得到`<type 'exceptions.keyerror'>:firstname`。即使我已经设置并检索了 cookie 值，我也无法使用 cookie 值刷新浏览器。请帮助我，我从过去 4 天开始就面临这个问题。

谢谢，维塔尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:18:58.883

如果我的猜测是正确的，首先你点击提交按钮，然后它重定向到 form2.py（即 form.html 正在向 form2.py 提交值，所以值 form["firstname"].value 存在）。现在您正在刷新 form2.py ，因为没有提交，所以它又不发送任何值。刷新并不意味着提交它只是加载当前页面

form2.py 没有提交任何数据，那么值 form["firstname"].value 是如何存在的

# c++ - “分段错误”程序的 Valgrind 结果

> ID：16213746
> 
> 赞同：0
> 
> 时间：2013-04-25T11:38:34.873
> 
> 标签：c++, valgrind

我的程序 (./a.out) 遇到了分段错误，因此我使用 Valgrind 检查是否可以找到程序损坏的代码行。我得到了以下输出，但我无法理解它们。对我来说，输出中最可疑的行是**==17967== Address 0x20687cf80 is 0 bytes inside a block of size 16 alloc'd**，这行是否意味着地址 0x20687cf80 没有正确分配内存块？我能做些什么来解决这个问题。

我正在使用具有 64GB 内存的 64 位 linux。

```
[root@gpu BloomFilterAndHashTable]# valgrind --tool=memcheck --leak-check=full ./a.out /mnt/disk2/experiments/two_stage_bloom_filter/test/10_10.txt /mnt/disk2/experiments/10M_worstcase_trace/w_10_10.trace 24
==17967== Memcheck, a memory error detector
==17967== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==17967== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==17967== Command: ./a.out /mnt/disk2/experiments/two_stage_bloom_filter/test/10_10.txt /mnt/disk2/experiments/10M_worstcase_trace/w_10_10.trace 24
==17967==
9998797 Prefixes loaded!  //output of my program
==17967== Warning: set address range perms: large range [0x4201a040, 0x6f423220) (defined)
==17967== Warning: set address range perms: large range [0x9c834040, 0x20687cf40) (undefined)
insertion cost time(us): 173168519      9998797 17.318935       0.057740 //output of my program
==17967== Warning: set address range perms: large range [0x23647d040, 0x25647d040) (defined)
Trace loaded! //output of my program
lookup cost time(us): 5728767367        67108864        85.365286       0.011714  //output of my program
==17967== Mismatched free() / delete / delete []
==17967==    at 0x4A055FE: free (vg_replace_malloc.c:366)
==17967==    by 0x401B13: hash_table_delete(BloomFilter*, char*) (BloomFilterAndHashTable.cpp:503)
==17967==    by 0x402212: main (BloomFilterAndHashTable.cpp:687)
==17967==  Address 0x20687cf80 is 0 bytes inside a block of size 16 alloc'd
==17967==    at 0x4A05F97: operator new(unsigned long) (vg_replace_malloc.c:261)
==17967==    by 0x40146D: hash_table_insert(char*, int, BloomFilter*) (BloomFilterAndHashTable.cpp:293)
==17967==    by 0x401DD5: main (BloomFilterAndHashTable.cpp:597)
==17967==
Delete succeeded!  //output of my program
deletion cost time(us): 178048113       9998797 17.806953       0.056158  //output of my program
==17967== Warning: set address range perms: large range [0x23647d030, 0x25647d050) (noaccess)
--17967:0:aspacem  Valgrind: FATAL: VG_N_SEGMENTS is too low.
--17967:0:aspacem    Increase it and rebuild.  Exiting now.
[root@gpu BloomFilterAndHashTable]# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:52:06.877

“可疑”输出**==17967== 地址 0x20687cf80 在大小为 16 的块内分配了 0 个字节**，这意味着有一个已分配的内存块，大小为 16 个字节。地址 0x20687cf80 是该块的第一个字节的地址（即，它是整个块的地址）。因此，该行本身只会告诉您有关整个警告中涉及的内存块的详细信息。

警告本身是关于“不匹配的 free()”。以下几行显示了`free`调用的位置：

> ==17967== 在 0x4A055FE: 空闲 (vg_replace_malloc.c:366)
> ==17967== **在 0x401B13: hash_table_delete(BloomFilter*, char*)** (BloomFilterAndHashTable.cpp:503)

意思是，`hash_table_delete`打电话`free()`。现在，为什么 valgrind 认为这是不匹配的？因为被释放的内存块的地址（0x20687cf80）是由分配的`operator new`，它被调用`hash_table_insert`：

> ==17967== 在 0x4A05F97：操作员新（无符号长）（vg_replace_malloc.c:261）
> ==17967== **通过 0x40146D：hash_table_insert（char*，int，BloomFilter*）**（BloomFilterAndHashTable.cpp:293）

这是可疑的。如果它是您的错误的根源是另一个问题，但无论如何您都应该修复它。

# jquery - 在jQuery自动完成中传递参数

> ID：16213747
> 
> 赞同：0
> 
> 时间：2013-04-25T11:38:41.720
> 
> 标签：jquery, ruby-on-rails

我正在尝试在我的 rails 应用程序中实现自动完成。我正在尝试通过 jquery 的源传递 ruby​​ 参数。这就是我想要做的。

```
$( "#text" ).autocomplete({
appendTo: "#searchwrapper1",
source:  h_url+"product_details/menu_search_auto/" + <%= "'#{params[:deptid]}'" %> ,
open:function() {
        $(".ui-autocomplete").mCustomScrollbar1({
            set_width : false,
            set_height : false, 
            horizontalScroll : false, 
            scrollInertia : 550, 
            scrollEasing : "easeOutCirc", 
            mouseWheel : "auto", 
            autoDraggerLength : true, 
            scrollButtons : {
                enable : false, 
                scrollType : "continuous", 
                scrollSpeed : 20, 
                scrollAmount : 40 
            }, 
        } 
```

这是我的 route.rb 文件

```
match "/product_details/menu_search_auto/:deptid"=>'product_details#menu_search_auto' 
```

控制器部分是：

```
def menu_search_auto
    list=[]
    if(params[:deptid].to_s == 'all')
      b1=test4.where("name LIKE ?","#{params[:term]}%")
    else
      case params[:deptid].to_i
      when 1
        b1=test1.where("name LIKE ?","#{params[:term]}%")
      when 2
        b1=test2.where("name LIKE ?","#{params[:term]}%")
      when 3
        b1=test3.where("name LIKE ?","#{params[:term]}%")
      else
      end
    end

    b1.each do |b1|
      list << {"label"=>b1.name, "value"=>b1.name, "id"=>b1.id}
    end 

    respond_to do |format|
      format.json{render :json=>list.to_json, :layout=>false}
    end
  end 
```

但是我既不能传递参数，也不能得到任何错误。

请建议我哪里出错了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:02:58.337

我想您在帖子中获得的代码位于带有 js(.coffee) 扩展名的视图中。

你写它的方式，“<%=”的东西被识别为js代码。

试试下面的。

在您的控制器中：

```
def an_action
  @foo = "something"
  respond_to do |format|
    format.js
  end 
end 
```

在您看来：

```
source:  h_url+"product_details/menu_search_auto/<%= j("#{@foo}") %>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:16:36.900

我已经在 rails 布局文件中定义了那个搜索栏。我在 homepage.js 中添加了包含 autocomlpete 函数的 js 文件，其中定义了所有 js 函数。我还在 document.ready(function() 中定义了自动完成函数。我传递了如下所述的参数

```
source: h_url+"product_details/menu_search_auto/" + deptid1, 
```

# ios - iOS 通过滑动控制动画或视频

> ID：16213753
> 
> 赞同：0
> 
> 时间：2013-04-25T11:39:00.860
> 
> 标签：ios, animation, video, swipe

是否可以通过滑动来控制动画或更好的视频？

我有：

*   动画作为视频（约 2 秒的播放时间，如果需要，可以转换为其他文件类型，但不应该太大）
*   iOS >= 6.0

我想：

*   显示动画的第一帧
*   如果用户以与指尖速度相对应的速度在控件上移动他的指尖，则前后播放动画。

![视频运行类似于用户交互](https://i.stack.imgur.com/hbKad.png)

我目前正在试验 MPMoviePlayerController。有更好的控件吗？您对解决这个问题有什么建议吗？

# javascript - 为什么 Chrome 上的页面更长？

> ID：16213757
> 
> 赞同：-4
> 
> 时间：2013-04-25T11:39:14.227
> 
> 标签：javascript, jquery, css, google-chrome

检查此页面 www.danielmalek.bugs3.com/oferta.html，在 Chrome 上您可以看到它有点太长，所以左侧的光束没有到达站点的末端。在 Firefox 和 IE 上似乎是正确的，在 localhost Chrome 也显示得很好。

HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl" lang="pl">

<head>

  <title>Strony internetowe - Daniel Małek</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link href="style.css" type="text/css" rel="stylesheet" />  
<script language="JavaScript" type="text/javascript" src="jQuery.js"></script>

<script type="text/javascript">

$(document).ready(function (){
/*$("body").css("overflow-y", "hidden");*/
        /*("#slider").css("overflow", "hidden");*/
    function tytul() {
}   

        $(".galeria").click(
        function()
        {
            $("#ukryte").toggle(200);
        });
});
</script>
</head>

<body>
<div id="container">

    <div id="header">
        <div id="header2"></div>
        <div id="pasek"></div>
    </div>
    <div id="przedluzenie"></div>
    <div id="content">
        <div id="menu">
        <div id="menu2">
            <a class="start" href="index.html"></a>
            <a class="galeria" href="#"></a>
                <div id="ukryte" style="display: none;">
                <a class="webdesign"  href="webdesign.html"></a>
                <a class="grafika"  href="grafika.html"></a>
                </div>
            <div id="oferta_b"></div>
            <a class="omnie" href="omnie.html"></a>
            <a class="kontakt" href="kontakt.html"></a>
        </div>
        </div>

    <div id="prawa_strona">
<div id="omnietxt" style="margin-bottom:60px;">
<ul style="margin-left:20px;" class="ofertatxt">
<li>Administracja istniejącymi stronami internetowymi</li>
<li>Hosting, domeny i instalacja stron na serwerze</li>
<li>Projektowanie i kodowanie stron www</li>
<li>Identyfikacja wizualna (tworzenie logo)</li>
<li>Dedykowane systemy CMS</li>
<li>Blogi Wordpress</li>
<li>Oprogramowanie sklepów KQSStore</li>
</ul>
</br>
<p class="ofertatxt">
Ponadto, wraz ze znajomymi programistami tworzymy młody, ambitny zespół, który jest w stanie stworzyć w pełni funkcjonalne i rozbudowane serwisy internetowe.</br></br>
Nie wystawiam faktury VAT, preferowany rodzaj współpracy to umowa o zlecenie lub umowa o dzieło.</p>
</div>
    <div id="footerx">
        <img src="img/foot_linia.png"></img><br>
         <p class="stopka">Copyright © 2013 Daniel Małek </p>
    </div>
    </div>

    <div class="clear"></div>

    </div>
</div>

<script type="text/javascript" charset="utf-8">
    var scrollSpeed = 70;
    var step = 1;
    var current = 0;
    var imageWidth = 410;
    var headerWidth = 410;      

    var restartPosition = -(imageWidth - headerWidth);

    function scrollBg(){
        current -= step;
        if (current == restartPosition){
            current = 0;
        }

        $('#header').css("background-position",current+"px 0");
    }

    var init = setInterval("scrollBg()", scrollSpeed);
</script>

<script type="text/javascript" charset="utf-8">
$(window).load(function(){
var content = $('#content').height();
var winh = $(window).height();
if(content>=winh){$('#menu').height(content);}
else{
    winh=winh-200;
    $('#menu').height(winh);}
});
</script>

</body>
</html> 
```

和 CSS：

```
 * {  padding: 0;  margin: 0;}
.clear {clear: both;}
html{}
html, body, #container, #content{}
body {background: url('img/tekstura.png');background-repeat:repeat-y repeat-x;background-color:#d5d5d5;}
#container {margin: 0 auto;  position:relative;}

#content {margin: 0 auto;position:relative;width:960px;overflow:auto;}

#header {background-color:#2099c8;background: url('img/heder/tekstura.png') repeat-x;  height:160px;  margin:0 auto;  position:relative;  width:100%;box-shadow: 0 0 30px 9px white;}

#pasek{height:3px;background: url('img/heder/pasek.png') repeat-x;}

#header2{background: url('img/heder/przod2.png') no-repeat;background-repeat:repeat-y repeat-x;margin: 0 auto;width:960px;  height:157px;}

#gradient_poziom{height:37px; background: url('img/gradient_poziom.png') repeat-x;}

#prawa_strona{ float:right;width:720px; margin-right:10px;}

#przedluzenie{width:209px; height:40px;background-color:black;margin:0 auto;position:relative;right:376px;background: url('img/gradient_pion.png') repeat-y;}
#menu {float:left;width:209px;margin-right:5px;background: url('img/gradient_pion.png') repeat-y;}
#menu2{float:right;margin-right:20px;}

#ukryte {position:relative;left:23px;}

#start_b {background: url('img/start_b.png') no-repeat;height:29px;width: 169px;margin-bottom:15px;}
.start {background:url('img/start.png') no-repeat;display:block;height:29px;width:169px;margin-bottom:15px;}
a.start:hover {background-position: 0px -29px;}

#galeria_b {background: url('img/galeria_b.png') no-repeat;height:29px;width: 169px;margin-bottom:15px;}
a.galeria {background: url('img/galeria.png') no-repeat;display:block;height:29px;overflow:hidden;width: 169px;margin-bottom:15px;}
a.galeria:hover {background-position: 0px -29px;}

#webdesign_b {background: url('img/webdesign_b.png') no-repeat;height:20px;width: 142px;margin-bottom:15px;}
a.webdesign {background: url('img/webdesign.png') no-repeat;display:block;height:20px;overflow:hidden;width: 169px;margin-bottom:15px;}
a.webdesign:hover {background-position: 0px -20px;}

#grafika_b {background: url('img/grafika_b.png') no-repeat;height:20px;width: 142px;margin-bottom:15px;}
a.grafika {background: url('img/grafika.png') no-repeat;display:block;height:20px;overflow:hidden;width: 169px;margin-bottom:25px;}
a.grafika:hover {background-position: 0px -20px;}

#oferta{background: url('img/oferta_b.png') no-repeat;height:29px;width: 142px;margin-bottom:15px;}
a.oferta {background: url('img/oferta.png') no-repeat;display:block;height:29px;width: 142px;margin-bottom:15px;}
a.oferta:hover {background-position: 0px -29px;}

#omnie_b{background: url('img/omnie_b.png') no-repeat;height:29px;width: 169px;margin-bottom:15px;}
a.omnie {background: url('img/omnie.png') no-repeat;display:block;height:29px;width: 169px;margin-bottom:15px;}
a.omnie:hover {background-position: 0px -29px;}

#oferta_b{background: url('img/oferta_b.png') no-repeat;height:29px;width: 169px;margin-bottom:15px;}
a.oferta {background: url('img/oferta.png') no-repeat;display:block;height:29px;width: 169px;margin-bottom:15px;}
a.oferta:hover {background-position: 0px -29px;}

#kontakt_b {background: url('img/kontakt_b.png') no-repeat;height:29px;width: 169px;margin-bottom:15px;}
a.kontakt {background: url('img/kontakt.png') no-repeat;display:block;height:29px;width: 169px;margin-bottom:15px;}
a.kontakt:hover {background-position: 0px -29px;}

.minwebd{border: 1px solid #2e2e2e;float:left;position:relative;left:10px;}

.cien{display:block;height:28px;width:216px;float:left;margin-left:22px;}
#cienie{z-index:-1;float:right;position:relative;top:-8px;}

#jrs{margin-top:25px;float:right;margin-left:7px;}
.jrs{background: rgba(255, 255, 255, 0.7);width:218px;float:left;}
.jrs_img{}
.jrs_tekst{margin: 0 10px 15px 10px; text-align:justify;color:#464646;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:12px;}
.znak_plus{position:relative;float:left;width:20px;font-size:20px;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;margin-top:15px;text-align:center;color:#3f3f3f;}

#footerx{float:right;margin:20px 0;width:412px;}
.stopka{float:right;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:0.6em;color:#2e2e2e;position:relative;margin-right:10px;margin-top:5px;}

.obrazek1{
height:159px;
width: 198px;
float:left;
border: 1px solid #417f99;
}

.obrazek2{}

#galgraf{margin-right:30px;float:left;}
#napis{ width:190px;float:right;height:35px;background: white;background: rgba(255, 255, 255, 0.7); display: block; padding: 5px ;  margin: 0 0 20px 20px;}
#wstep{float:left; position:relative; width:auto;  background: white; background: rgba(255, 255, 255, 0.7);margin: 0 0 30px 66px; padding:10px 15px 10px 15px;color:#464646;}

#gallery{
float:right;
}

#gallery2{
float:left;
width:200px;
}

#webdopisy{
float:left;
}

#webdopis{float:right;width: 430px; background: white;background: rgba(255, 255, 255, 0.7); display: block;margin: 0 0 15px 40px; padding:15px;color:#464646;}
#beczka{margin-bottom:30px;position:relative;float:left;}
.webdopis {}

.opis a {
text-decoration:none;
color:#006c96;
}

.opis a:hover{
text-decoration:underline;
color:#006c96;
}
h1 {
color:black;
font-size:0.9em;
font-family:tahoma,Helvetica,sans-serif;
font-weight:100;
text-align:center;
}

.omnietxt{line-height:20px;color:#464646;font-size:0.9em;float:left;font-family:arial,Helvetica,sans-serif;padding: 0 5px 0 5px;}

.ofertatxt{line-height:20px;color:#464646;font-size:0.9em;font-family:arial,Helvetica,sans-serif;text-align:justify}

#omnietxt{
  float:left;
  width: 500px;
  background: white;
  background: rgba(255, 255, 255, 0.7); 
  display: block;
  padding:15px 15px 15px 15px;
  margin: 0 0 110px 120px;
}

#wysokosc{
height:420px;
}

/* LAJTBOKS */

.thumb {
float:left;
margin: 0 0 0 20px ;
border: 1px solid #2e2e2e;
 } 

 .clearFloat {
  clear:both;
 } 

/* KONTAKT */

#numery{  padding:20px 20px 20px 20px;float:left;position:relative;left:265px;background: rgba(255, 255, 255, 0.7);   margin-top:15px;margin-bottom:150px;}

.gg1 {position:relative;top:2px;left: 13px;}

.gg2 {font-style:italic;font-size:1.2em;position:relative;top:5px;left:15px;}
.adres1 {color:#015d81;font-size:15;font-family:Arial,Helvetica,sans-serif;}
.adres2 {position:relative;top:5px;color:#015d81;font-size:15;font-family:Arial,Helvetica,sans-serif;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:32:27.297

您在 HTML 中嵌入了两个脚本：

```
<script type="text/javascript" charset="utf-8">
  $(window).load(function(){
    var content = $('#content').height();
    var winh = $(window).height();
    if(content>=winh){$('#menu').height(content);}
    else{
      winh=winh-200;
      $('#menu').height(winh);}
  });
</script>

<script type="text/javascript" charset="utf-8">
  $(window).load(function(){
    var content = $('#content').height();
    $('#menu').height(content);
  });
</script> 
```

两者同时开火: `$(window).load`，并且都做同样的事情: `$('#menu').height(value);`，但值不同。

显然，这是错误的。可能在 Chrome 中，这些片段的完成顺序与在其他浏览器中不同，因此存在差异。

### UPD #1

我现在用 Chrome 打开你的链接，但没有出现垂直滚动条。我假设我的解决方案有效，请不要忘记接受这个问题。;)

但是你知道你不需要 Javascript 来解决这个任务吗？

这是一个如何在纯 CSS 中进行垂直拉伸的示例：[CSS 3 col 模板 100% 相同高度](https://stackoverflow.com/questions/15693817/css-3-col-template-100-same-height/15699812#15699812)

此外，您不应该使用非语义元素进行装饰：`#przedluzenie`等`#pasek`。这也可以在纯 CSS 中解决，而不会弄乱您的 HTML。

# java - 是否应该通过“get”方法或公共最终字段或两者都检索 Java 枚举常量？

> ID：16213760
> 
> 赞同：3
> 
> 时间：2013-04-25T11:39:16.593
> 
> 标签：java, enums

例如，请参见下面的代码：

```
public enum Employees {  

    BOB("Bob Barker", "BB", 100);    

    private String fullName; //are these better accessed through public or getFullName() below? 
    private String initials;
    private String age;  

    Employees(String fullName, String initials, int age) {  
        this.fullName = fullName;
        this.initials = initials;
        this.age = age;
    }  

    public String getFullName() {  
        return fullName;
    }  
    //etc ...
} 
```

哪种访问方法更正确或更高效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:42:48.697

您无法`fullName`通过`static`方法访问。它们是*实例*字段。

你的代码是正确的。您可能希望将您的字符串字段标记为`final`并摆脱`setXXX`方法（因为`Enum`值传统上是不可变的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:42:32.600

我*总是*制作 enum fields `final`，然后删除 setter 的实用程序。该`enum`实例是公开共享的，并且大多数明智的客户端代码都希望它是不可变的。

就 getter 而言，这取决于您的个人喜好，尽管惯例有它添加一个 getter 并使该字段私有。所以你的口味必须“强烈”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:45:37.953

使用 getter 是惯例……如果您以后在 jstl/el 中使用依赖于使用 getters/is 的 bean 规范的枚举，您将不会得到任何令人讨厌的惊喜。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T11:54:14.610

我认为您误解了枚举的概念。枚举是一个不会改变的共享实例。您描述的是一个常规的可变 Java 对象。因此，您应该做的第一件事是从切换`enum`到`class`：

```
public class Employee {  

    private String fullName;
    private String initials;
    private String age;  

    public Employee(String fullName, String initials, int age) {  
        this.fullName = fullName;
        this.initials = initials;
        this.age = age;
    }  

    public String getFullName() {  
        return fullName;
    }  
    //etc ...
} 
```

然后像普通课程一样使用您的课程：

```
Employee bob = new Employee("Bob Barker", "BB", 100); 
```

**编辑**

你现在已经移除了你的二传手，但是，这对我来说仍然不像一个`enum`。

# apache - WSO2 示例错误 - 必须了解检查失败

> ID：16213766
> 
> 赞同：1
> 
> 时间：2013-04-25T11:39:38.100
> 
> 标签：apache, windows-server-2008, wso2

我正在建立一个测试实验室来了解更多关于 WSO2 应用程序的信息。我正在尝试重新创建此处描述的场景：[http ://wso2.org/library/tutorials/2012/12/providing-xacml-fine-grained-authorization-webapps](http://wso2.org/library/tutorials/2012/12/providing-xacml-fine-grained-authorization-webapps)

我使用的是单个 Windows 2008 服务器，并且所有 WSO 应用程序都在不同的端口上侦听。WSOIS 的 tryit 功能表明该策略正在被正确评估。但是，当我尝试使用 Web 服务时，我收到了一个必须理解检查失败 500 错误。

错误的全文如下

我重新创建了设置，我得到了同样的错误。

> TID[-1234] [AS] [2013-04-25 21:36:37,740] 错误 {org.apache.axis2.engine.AxisEngine} - 必须了解标头 [http://docs.oasis-open.org检查失败/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd) : 安全 org.apache.axis2.engine.AxisEngine.checkMustUnderstand(AxisEngine.java:104) org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:170) org.apache.axis2.description.OutInAxisOperationClient.handleResponse( OutInAxisOperation.java:356) org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:413) org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:224) org.apache.axis2.client。 OperationClient.execute(OperationClient.java:149) org.wso2.carbon.identity.entitlement.stub.EntitlementServiceStub.getDecision(EntitlementServiceStub.java:1108) org.wso2.carbon.identity.entitlement.proxy.soap.basicAuth.BasicAuthEntitlementServiceClient。 getDecision(BasicAuthEntitlementServiceClient.java:191) org.wso2.carbon.identity.entitlement.proxy.soap.basicAuth。BasicAuthEntitlementServiceClient.getDecision(BasicAuthEntitlementServiceClient.java:62) org.wso2.carbon.identity.entitlement.proxy.PEPProxy.getDecision(PEPProxy.java:78) org.wso2.carbon.identity.entitlement.proxy.PEPProxy.getDecision(PEPProxy. java:122) org.wso2.carbon.identity.entitlement.proxy.PEPProxy.getDecision(PEPProxy.java:99) org.wso2.carbon.identity.entitlement.filter.EntitlementFilter.doFilter(EntitlementFilter.java:185) org. apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java: 222) org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) org.apache.catalina.authenticator。AuthenticatorBase.invoke(AuthenticatorBase.java:581) org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) org.wso2。 carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:177) org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:161) org.apache.catalina.valves.AccessLogValve。调用(AccessLogValve.java:936) org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:57) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) org. apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653) java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor. java:1145) java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) java.lang.Thread.run(Thread.java:722)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:27:53.267

根本原因是您在soap消息中设置mustunderstand标头，因此SOAP处理器处理它并由于缺少要求而失败。您可以阅读以下[文章](http://wso2.org/library/tutorials/understand-famous-did-not-understand-mustunderstand-header-s-error)以获得更多说明

# javascript - 悬停时的随机 CSS 动画

> ID：16213773
> 
> 赞同：1
> 
> 时间：2013-04-25T11:39:58.747
> 
> 标签：javascript, css, animation

我有javascript，当悬停播放动画时，我有4个不同的动画，我希望它在每次元素悬停时随机化它

这是我的代码

```
function firsthelp() { 

document.getElementById('help-text').innerHTML = 'Enter your first name';
  document.getElementById('help-box').style.animation ='greenhover 2s;';
  document.getElementById('help-box').style.WebkitAnimation ='greenhover 2s';

} 
```

其他 css 动画是`bluehover` `orangehover`和`purplehover`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:50:01.103

```
 function getRandomAnimation(duration) {

      var possibleAnimations = ["greenhover","bluehover","orangehover","purplehover"];
      var randomNumber = Math.floor((Math.random()*4));
      return (possibleAnimations[randomNumber] + " " + duration || "");
    } 
```

并像这样使用它：

```
 document.getElementById('help-box').style.animation = getRandomAnimation('2s)'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:43:03.870

使用[Math.random](http://www.w3schools.com/jsref/jsref_random.asp)随机化你的动画

```
var randomNumber = Math.floor((Math.random()*4)+1);
var hover;
if(randomNumber == 1)
{
    hover = 'greenhover'
}
else if(randomNumber == 2)
{
    hover = 'purplehover';        
}
else if(randomNumber == 3)
{
    hover = 'orangehover';        
}
else if(randomNumber == 4)
{
    hover = 'bluehover';        
}

document.getElementById('help-text').innerHTML = 'Enter your first name';
document.getElementById('help-box').style.animation =hover +' 2s;';
document.getElementById('help-box').style.WebkitAnimation =hover +' 2s'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:52:50.847

您可以使用`Math.Random`1 到 4 或 0 到 3 之间的随机数。这里我得到 0 到 3 之间并使用 JavaScript 数组来获取动画

```
var animations = new Array();
animations[0] = "greenhover";
animations[1] = "bluehover";
animations[2] = "orangehover";
animations[3] = "purplehover";

var randomNo = Math.floor(Math.random() * 4);

document.getElementById('help-text').innerHTML = 'Enter your first name';
document.getElementById('help-box').style.animation =animations[randomNo] +' 2s;';
document.getElementById('help-box').style.WebkitAnimation =animations[randomNo]+' 2s'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:47:22.187

```
function firsthelp() { 

document.getElementById('help-text').innerHTML = 'Enter your first name';
  var random_animation = ["greenhover", "bluehover", "orangehover", "purplehover"];
  var number = Math.random();
  var animation = random_animation[Math.floor(number * 4)] + " 2s";
  document.getElementById('help-box').style.animation = animation;
} 
```

# ruby - 用于审计请求参数的 Ruby gem

> ID：16213774
> 
> 赞同：0
> 
> 时间：2013-04-25T11:40:03.717
> 
> 标签：ruby, ruby-on-rails-3

是否有任何 ruby​​ gem 可用于获取请求对象值？我需要将特定值从请求对象保存到 rails db。像下面的值

*   request.headers['HTTP_USER_AGENT']
*   request.headers['QUERY_STRING']
*   request.headers['ORIGINAL_FULLPATH']
*   request.remote_ip
*   request.remote_addr

我需要为每次在 rails db 中加载的特定页面保存这些值。我知道我们可以直接从请求对象中获取。但是通过 gem 做可能会简化我的工作。

# java - “指标”直方图中的“有偏”是什么意思

> ID：16213776
> 
> 赞同：5
> 
> 时间：2013-04-25T11:40:17.390
> 
> 标签：java, metrics

Codahale 的“指标”收到的属性之一是“有偏见的”。
有人可以解释这是什么意思吗？

```
public Histogram newHistogram(Class<?> klass,
                     String name,
                     boolean biased)
Creates a new Histogram and registers it under the given class and name.
Parameters:
klass - the class which owns the metric
name - the name of the metric
biased - whether or not the histogram should be biased
Returns:
a new Histogram 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T12:28:17.757

如有疑问，请查看来源：

```
 /**
     * Uses an exponentially decaying sample of 1028 elements, which offers a 99.9% confidence
     * level with a 5% margin of error assuming a normal distribution, and an alpha factor of
     * 0.015, which heavily biases the sample to the past 5 minutes of measurements.
     */
    BIASED {
        @Override
        public Sample newSample() {
            return new ExponentiallyDecayingSample(DEFAULT_SAMPLE_SIZE, DEFAULT_ALPHA);
        }
    }; 
```

有偏差的直方图是对最近的测量值赋予更多权重的直方图。

# jquery - $.mobile.changePage 不改变页面？

> ID：16213790
> 
> 赞同：0
> 
> 时间：2013-04-25T11:41:05.973
> 
> 标签：jquery, cordova, jquery-mobile

这是HTML代码：

```
 <div data-role="page" id="mainMenu">
    <div data-role="header">

    </div>
    <div data-role="content">
    <ul data-role="listview" data-inset="true"
                                        style="margin-top:50%; margin-left:20%;">
     <li id="prayerId" data-theme="b"><a href="#"><img
                                                src="css/images/namazimage.jpg" />PRAYERS </a>
                                        </li>
     <li id="goalId" data-theme="e"><a href="#"><img
                                                src="css/images/namazimage.jpg" />GOAL </a>
                                        </li>

     </ul>
     </div>
    </div>
    <!-- //////////////////////// PRAYER PAGE START //////////////////////////////////////  --> 
        <div data-role="page" id="prayer">
            <div data-role="header" data-theme="b"></div>
            <div data-role="content"></div>
            <div data-role="footer" data-theme="e" data-position="fixed">

                <div data-role="navbar">

                    <ul>
                        <li id="namazId"><a href="#" data-role="tab" data-icon="grid">NAMAZ</a></li>
                        <li id="fastId"><a href="#" data-role="tab" data-icon="grid">FAST</a></li>
                    </ul>
                </div>
            </div>

        </div>

<!-- //////////////////////// PRAYER PAGE END //////////////////////////////////////  --> 
```

这是写在单独的 js 文件中的代码：

```
$('#mainMenu').live('pageinit', function() {
    $('#prayerId').off('click').on('click', function() {
        alert("prayer id");
        $.mobile.changePage("#prayer", null, true, true);
        //$.mobile.changePage('#loginPage', null, true, true);

    });
});
$('#prayer').live('pageinit',function()
 {  
    alert("prayer page");
    $('#namazId').off('click').on('click', function() {
        alert("namaz page");
        //$.mobile.changePage('#mainMenu', null, true, true);
        $.mobile.changePage('#namazPage', null, true, true);

    });
}); 
```

但是在这里更改页面不起作用 jquery 和cordova 的所有引用已经使用cordova 2.0.0 和 jquery 1.7.1 添加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:44:15.893

`click`从事件中删除[`pageinit`](http://api.jquerymobile.com/pageinit/)事件。[`pageinit`](http://api.jquerymobile.com/pageinit/)仅在页面初始化时触发一次，之后，附加到它的任何事件都将被忽略。

```
$('#prayerId').off('click').on('click', function () {
 alert("prayer id");
 $.mobile.changePage("#prayer", null, true, true);
});

$('#namazId').off('click').on('click', function () {
 alert("namaz page");
 $.mobile.changePage('#namazPage', null, true, true);
}); 
```

> **[演示](http://jsfiddle.net/Palestinian/wre7k/)**

# ios6 - 在ios的UIWebView中加载缓存的网页

> ID：16213797
> 
> 赞同：1
> 
> 时间：2013-04-25T11:41:29.927
> 
> 标签：ios6, uiwebview, asihttprequest, uiweb

我的任务是提高 UIWebView 中网页加载的速度。为此，我将转向缓存概念。这里我使用 ASIWebPageRequest 来缓存网页的所有内容。它做得很好。但是当加载缓存的网页时，超链接不起作用（不与实时网址链接）？

和另一个。如果网页被缓存意味着它从缓存加载，否则从实时 url 加载。我该如何解决？

这是我的代码：

```
- (void)fetchURL:(NSURL *)url
{

    [self setRequestsInProgress:[NSMutableArray array]];

    [request setDelegate:nil];
    [request cancel];
    [self setRequest:[ASIWebPageRequest requestWithURL:url]];

    [request setDidFailSelector:@selector(webPageFetchFailed:)];
    [request setDidFinishSelector:@selector(webPageFetchSucceeded:)];
    [request setDelegate:self];
    [request setDownloadProgressDelegate:self];
    [request setUrlReplacementMode:ASIReplaceExternalResourcesWithData];

    [request setDownloadCache:[ASIDownloadCache sharedCache]];
    [request setCachePolicy:ASIOnlyLoadIfNotCachedCachePolicy];

    // This is actually the most efficient way to set a download path for ASIWebPageRequest, as it writes to the cache directly
    [request setDownloadDestinationPath:[[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:request]];

    [[ASIDownloadCache sharedCache] setShouldRespectCacheControlHeaders:NO];
    [request startAsynchronous];
}

- (void)webPageFetchFailed:(ASIHTTPRequest *)theRequest
{
    NSLog(@"fetch error = %@",[theRequest error]);
}

- (void)webPageFetchSucceeded:(ASIHTTPRequest *)theRequest
{
    NSURL *baseURL;
    if ([request isFinished] ) {

        baseURL = [NSURL fileURLWithPath:[request downloadDestinationPath]];

        //        // If we're using ASIReplaceExternalResourcesWithLocalURLs, we must set the baseURL to point to our locally cached file
    } else {
        baseURL = [request url];
    }

    if ([theRequest downloadDestinationPath]) {

        NSString *response = [NSString stringWithContentsOfFile:[theRequest downloadDestinationPath] encoding:[theRequest responseEncoding] error:nil];

        [webView loadHTMLString:response baseURL:baseURL];

    } else {

        [webView loadHTMLString:[theRequest responseString] baseURL:baseURL];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:24:59.330

更改此行

```
[[ASIDownloadCache sharedCache] setShouldRespectCacheControlHeaders:NO]; 
```

至

```
[[ASIDownloadCache sharedCache] setShouldRespectCacheControlHeaders:YES]; 
```

它会工作

# jquery - 使用 jquery 切换兄弟姐妹

> ID：16213800
> 
> 赞同：1
> 
> 时间：2013-04-25T11:41:35.270
> 
> 标签：jquery, toggle, accordion, collapse, siblings

我在 jquery 中遇到了 toggle() 的问题。请参阅[http://jsfiddle.net/rch7L/](http://jsfiddle.net/rch7L/)。单击 1 级标题时，它会执行应有的操作，但单击 2 级标题时，它会打开所有 3 级行，而不仅仅是 2 级标题下的 3 级行。

```
$('tr.level-2, tr.level-3').css("display", "none");

$("tr.level-1").click(function(){
    $(this).siblings('tr.level-2').toggle();
});

$("tr.level-2").click(function(){
    $(this).siblings('tr.level-3').toggle();
}); 
```

我尝试过使用兄弟姐妹（），但单击 2 级标题时它不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:43:53.310

简单的使用[`.nextUntil()`](http://api.jquery.com/nextUntil/)方法

`**[LIVE DEMO](http://jsfiddle.net/rch7L/2/)**`

```
$("tr.level-2").click(function(){
    $(this).nextUntil('tr.level-2').toggle();
}); 
```

# android - 如何获得具有 2 列等宽的 TableLayout

> ID：16213801
> 
> 赞同：6
> 
> 时间：2013-04-25T11:41:37.333
> 
> 标签：android, android-layout

为什么我的表格的列宽不相等？这是完整的布局：首先是表格，然后是表格之外的 LinearLayout 中的两个按钮，它们被平分。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="4dp" >

            <TableRow
                android:layout_marginTop="2dp"
                android:gravity="center_vertical" >

               <TextView
                    style="@style/Label.Plain"
                    android:layout_width="match_parent"
                    android:text="@string/Caption" />

                <EditText
                    android:background="#00ff00"
                    android:layout_width="match_parent"
                    android:layout_weight="1"
                    android:layout_height="@dimen/button_height"
                    android:inputType="numberDecimal"
                    android:selectAllOnFocus="true"
                    android:textSize="@dimen/spinner_text" />
            </TableRow>
        </TableLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp"
            android:layout_marginBottom="3dp"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/btnOk"
                style="@style/Button.Plain.Fill"
                android:layout_weight="1"
                android:text="@string/ALS_OK" />

            <Button
                android:id="@+id/btnClose"
                style="@style/Button.Plain.Fill"
                android:layout_weight="1"
                android:text="@string/CANCEL" />
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

下面是它的外观（为可见性绘制了一列）：

![在此处输入图像描述](https://i.stack.imgur.com/0Nrwq.png)

我可以在这里使用线性布局，只是想了解背后的逻辑`TableLayout`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-10-27T04:48:11.140

你可以通过不同的方式获得它，

喜欢使用

```
android:stretchColumns="*" 
```

在 TableLayout 或

```
android:weightSum="1" 
```

在 TableRow 和

```
 android:layout_width="0dp" 
 android:layout_height="wrap_content" 
```

和 TableRow 中的任何视图。

**这是一个例子**

```
<?xml version="1.0" encoding="utf-8"?>       
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" android:layout_width="match_parent"
        android:layout_height="match_parent">
        <TableLayout
            android:id="@+id/tblTop10List"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_centerInParent="true"
            android:layout_marginTop="23dp"
            android:stretchColumns="*" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="1" >

                <TextView
                    android:id="@+id/tvTopName"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:paddingLeft="8dp"
                    android:text="HELLO THERE"
                    android:textColor="#FFF000"
                    android:layout_column="0"
                    />

                <TextView
                    android:id="@+id/tvTopNumber"
                    android:paddingLeft="4dp"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:textColor="#FFF000"
                    android:text="HELLO THERE "
                    android:layout_column="1"
                    />
            </TableRow>
        </TableLayout>

    </LinearLayout> 
```

** 有关表格布局及其属性的更多信息，请查看这篇不错的文章

> [http://www.informit.com/articles/article.aspx?p=2007353&seqNum=7](http://www.informit.com/articles/article.aspx?p=2007353&seqNum=7)

# sublimetext2 - 从关联程序中的 sublimetext 开始打开的文件

> ID：16213805
> 
> 赞同：0
> 
> 时间：2013-04-25T11:41:44.910
> 
> 标签：sublimetext2

我通常用 sublime text 2 编辑文件，这些文件也可以用另一个程序编辑和编译。因为我已经在 sublimetext 中打开了它们，所以我执行以下操作：

1.  右键单击并选择“复制文件路径”（到剪贴板）
2.  Win+R 打开windows运行对话框
3.  CTRL+V 粘贴文件路径
4.  按回车键打开带有关联程序的文件

我想知道可以配置一些快捷方式，以便它使用其关联程序自动启动打开的文件

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T03:41:45.677

右键单击该文件，按“属性”。您将看到`Opens with SomeProgram`一个更改按钮。单击更改按钮，然后查看 Sublime Text 的列表，如果找不到，您可以使用文件资源管理器选择一个应用程序，从那里您可以导航到`C:\Program Files\Sublime Text 2`并选择 sublime_text.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T07:28:07.927

1.  打开“regedit.exe”；
2.  导航

    ```
    HKEY_CLASSES_ROOT\Applications\sublime_text.exe\shell\open\command 
    ```

3.  更正路径。退出“regedit.exe”

4.  （可选）重新启动“explorer.exe”或重新启动您的 PC。

享受：p;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:52:23.763

This can be done. I was in a very similar situation using Sublime as my editor of choice over the default SAS program editor. I was able to use the `win32com.client.dynamic.Dispatch` module to connect to SAS via OLE and pass text from Sublime directly to SAS using Sublime's build system to call my plugin. Making the connection was the easy part, it was the other processing that I had to do which was the time consuming part, but since you want to pass just a file name or the entire contents of your file, this should be a fairly straightforward plugin. Since I do not know what program you wish to open, here is the code that makes my implementation work. Maybe you caan glean something out of this.

```
def send_to_sas_via_ole(selected_code):

    from win32com.client.dynamic import Dispatch
    sasinstance = Dispatch("SAS.Application")

    # submit the lines to sas
    for selection in selected_code:
        # for some reason cannot send as one big line to SAS, so split into
        # multipe lines and send line by line
        for line in selection.splitlines():
            sasinstance.Submit(line) 
```

and then the call in the run method of my plugin class:

```
class RunSasMakoCommand(sublime_plugin.TextCommand):

def run(self, edit):

    try:
        send_to_sas_via_ole(selected_code)
    except Exception as e: 
        print "\n".join(selected_code)
        print "Couldn't connect to SAS OLE"
        print e 
```

Good luck!

# outlook - Windows 更新后 Outlook 加载项变为非活动状态

> ID：16213813
> 
> 赞同：1
> 
> 时间：2013-04-25T11:42:04.777
> 
> 标签：outlook, vsto, add-in

我已经编写了一个 Outlook 加载项（C# 中的 VSTO），现在出现的问题是，在安装了 Office 2010 的某些计算机（所有 Windows 7）上，Outlook 加载项在 Windows 更新（包括至少一个 Office 更新）后突然变为非活动状态）。

它可以重新激活而没有任何问题，一切都会正常工作，包括用户设置。

你知道什么会导致这种行为吗？

谢谢。

# c# - LINQ (C# .NET 4) 中的转换问题

> ID：16213816
> 
> 赞同：3
> 
> 时间：2013-04-25T11:42:25.300
> 
> 标签：c#, linq

我遇到了一个非常令人困惑的问题，希望有人可以帮助我。在我的应用程序中，我有以下数据结构：

```
public struct EntityDetails
{
    public string EntityName { get; set; }
    public List<AttributeDetails> Attributes { get; set; }
    public bool EntityExists { get; set; }
}

public struct AttributeDetails
{
    public string AttributeName { get; set; }
    public string DisplayName { get; set; }
    public string DataType { get; set; }
    public string Description { get; set; }
    public bool AttributeExists { get; set; }
} 
```

我使用以下内容实例化对象：

```
public static List<EntityDetails> entityList { get; set; } 
```

所以，我需要做的是能够根据实体名称和属性名称返回过滤后的属性列表。为此，我编写了以下 LINQ：

```
public static List<AttributeDetails> GetFilteredAttributeList(string pEntityName, string pAttributeFilter)
{

    return (List<AttributeDetails>)entityList.Where(e => e.EntityName == pEntityName)
                                             .Select(e => e.Attributes
                                                           .Where (a => a.AttributeName
                                                           .Contains (pAttributeFilter)));

 } 
```

最初，当我这样做时，我一开始没有演员表，但它带来了编译时错误，所以我添加了演员表以允许它编译。但是，当它使用此方法时，我收到以下消息：

> {“无法将类型为 'WhereSelectListIterator `2[MPYA.BU.CRMClientUpdateTool.CRMAccess.CRMAccessLayer+EntityDetails,System.Collections.Generic.IEnumerable`1[MPYA.BU.CRMClientUpdateTool.CRMAccess.CRMAccessLayer+AttributeDetails]]' 的对象转换为类型 'System.Collections.Generic.List`1[MPYA.BU.CRMClientUpdateTool.CRMAccess.CRMAccessLayer+AttributeDetails] ]'。"}

现在，从我所做的研究来看，一个是 IEnumerable 类型，另一个是列表，我理解，但我一生都无法弄清楚如何投射它，所以它是可以接受的！我也尝试过 ToList()，通过扩展方法和其他各种东西进行转换。我还确认数据结构包含正确的数据。

任何帮助，将不胜感激。

# 更新

抱歉，但由于某种原因，我无法在 8 小时内回复答案*sigh*。我已按照每个人的建议使用 ToList，现在我收到以下错误：

感谢您到目前为止的答案。在我看来 ToList() 是唯一合乎逻辑的方法，但是当我这样做时，我得到以下编译时错误：

```
error CS0029: Cannot implicitly convert type 'System.Collections.Generic.List<System.Collections.Generic.IEnumerable<MPYA.BU.CRMClientUpdateTool.CRMAccess.CRMAccessLayer.AttributeDetails>>' to 'System.Collections.Generic.List<MPYA.BU.CRMClientUpdateTool.CRMAccess.CRMAccessLayer.AttributeDetails>' 
```

当我将鼠标悬停在它上面时，实际的错误消息是“System.ArgumentNullException”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:45:18.677

您可以简单地**通过调用来结束您的 LINQ 查询，[`.ToList()`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)**以将结果转换为`List<T>`.

要记住的一件事是调用`.ToList()`LINQ 查询“实现”它，这意味着不再[延迟](http://msdn.microsoft.com/en-us/library/bb738633.aspx)执行；结果现在存储在您的`List<T>`.

另外，我相信你想**使用[`.SelectMany()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)从句，而不是`.Select()`**. `e.Attributes`是一个 `List<AttributeDetails>`。如果您使用`Select()`，它将创建一个`IEnumarable<list<AttributeDetails>>`, 每个元素都是您的一个实体的属性。 **`SelectMany`将合并返回的列表**并返回一个`IEnumerable<AttributeDetails>`，这似乎是您想要的。

最终，您要使用以下内容：

```
return entityList.Where(e => e.EntityName == pEntityName)
                 .SelectMany(e => e.Attributes
                             .Where (a => a.AttributeName
                                     .Contains(pAttributeFilter)))
                 .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:15:45.777

You need `SelectMany` to pull out the attributes into a single list. You also need `ToList()` to convert the result to a List(). The cast will be unnecessary.

Try

```
return entityList.Where(e => e.EntityName == pEntityName)
                 .SelectMany(e => e.Attributes
                                   .Where (a => a.AttributeName
                                                 .Contains (pAttributeFilter)))
                 .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:43:48.293

使用此代码：

```
 return entityList.Where(e => e.EntityName == pEntityName)
                                             .Select(e => e.Attributes
                                                           .Where (a => a.AttributeName
                                                           .Contains (pAttributeFilter))).ToList() 
```

LINQ 返回不是列表的 IEnumerable，因此您不能将此对象强制转换为列表。当您调用`ToList()`linq 查询将被执行并转换为列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:45:14.910

鉴于您`Attributes`实际上是 的实例`AttributeDetails`，那么您可以`.ToList()`在查询结束时调用。但是，另一种合适的方法可能是让您更改方法的签名以返回`IEnumerable<AttributeDetails>`，这取决于调用者期望的功能。

事实上，如果调用者需要，他们仍然可以在闲暇时转换查询结果，您可以可靠地返回一个更可读和可查询的集合。所以...

```
public static IEnumerable<AttributeDetails> GetFilteredAttributeList(
  string pEntityName, string pAttributeFilter) {
  return entityList
    .Where(e => e.EntityName == pEntityName)
    .Select(e => e.Attributes
      .Where (a => a.AttributeName.Contains (pAttributeFilter)
    )
  );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:49:36.210

```
public static List<AttributeDetails> GetFilteredAttributeList(string pEntityName, string pAttributeFilter)
    {
        var entityList = new List<EntityDetails>(); //added just to makte it compile

        var filtered =
            from entity in entityList
            where entity.EntityName == pEntityName
            from attribute in entity.Attributes
            where attribute.AttributeName.Contains(pAttributeFilter)
            select attribute;
        return filtered.ToList();
    } 
```

# c++ - 从函数返回通用类型数据

> ID：16213819
> 
> 赞同：1
> 
> 时间：2013-04-25T11:42:35.710
> 
> 标签：c++, function, generics, return, virtual

我已经编写了以下代码。函数*func()*打印标题和数据的地方。

```
class ICell
{
    public:
        wstring header;
        virtual void Fetch() = 0;
};

template <class T>
class Cell : public ICell
{
public:
    //wstring header;
    T data;
    void Fetch()
    {
        wcout<< header << L": ";
        cout<<data<<endl;
    }
  // implementation of cell methods
};

class Row
{
public:
  vector <ICell *> cells;
}; 
```

有没有办法在函数中返回数据而不是打印？如果是这样，应该修改代码的哪一部分？提前致谢。

```
int main()
{
    Cell<int>c1;
    Cell<double>c2;

    c1.header = L"Roll", c1.data = 100;
    c2.header = L"CGPA", c2.data = 3.5;

    Row r;
    r.cells.push_back(&c1);
    r.cells.push_back(&c2);

    vector <ICell *>::iterator it;
    for(it=r.cells.begin();it!=r.cells.end();it++)
    {
        //checkt type of it wherther it points Cell<int> or Cell<double>
    }

    return 0;
} 
```

我在这里改变了我的问题。在循环内的 main() 中，如何检查“it”指向的对象类型？

谢谢大家的耐心和帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:54:13.413

最简单的方法是使用`dynamic_cast`：

```
vector <ICell *>::iterator it;
for(it=r.cells.begin();it!=r.cells.end();it++)
{
    Cell<int>* cell_i= dynamic_cast<Cell<int>*>(*it);
    if(cell_i)
    {
       do_something(cell_i->data);
       continue;
    }

    Cell<double>* cell_d= dynamic_cast<Cell<double>*>(*it);
    if(cell_d)
    {
       do_something(cell_d->data);
       continue;
    } 
} 
```

更好的方法是使用访问者模式：

```
class ICellVisitor; //declaration for ICell to understand ICell* pointer
class ICell
{   public:
    ~ICell(){}; // important
    std::wstring header;
    virtual void visit( ICellVisitor* v ) = 0;
};
template <class T> class Cell; // for Cell<T>* pointer
class ICellVisitor
{   public:
    virtual void visit( Cell<int>* c ) = 0;
    virtual void visit( Cell<double>* c ) = 0;
    virtual void visit( Cell<float>* c ) = 0;
    virtual void visit( Cell<long long>* c ) = 0;
};
template <class T> class Cell : public ICell
{   public:
    //wstring header;
    T data;
    void visit( ICellVisitor* v )
    {
        std::wcout<< header << L": ";
        v->visit(this);
    }
  // implementation of cell methods
};
class Row
{ public:
  std::vector <ICell *> cells;
}; 
```

现在我们需要定义具体的访问者来保留每种类型的算法：

```
class MyCellVisitor: public ICellVisitor
{   public:
    void visit( Cell<int>* c ){ 
        std::wcout<<"(int)"<<c->data<<std::endl; 
    }
    void visit( Cell<double>* c ){ 
        std::wcout<<"(double)"<<c->data<<std::endl;
    }
    void visit( Cell<float>* c ){ 
        std::wcout<<"(float)"<<c->data<<std::endl;
    }
    void visit( Cell<long long>* c ){ 
        std::wcout<<"(long long)"<<c->data<<std::endl;
    }
};

int main()
{
    Cell<int>c1;
    Cell<double>c2;
    c1.header = L"Roll", c1.data = 100;
    c2.header = L"CGPA", c2.data = 3.5;
    Row r;
    r.cells.push_back(&c1);
    r.cells.push_back(&c2);
    MyCellVisitor visitor;
    std::vector <ICell *>::iterator it;
    for(it=r.cells.begin();it!=r.cells.end();it++)
    {
        (*it)->visit( &visitor );
    }
    return 0;
} 
```

# c# - 通过编辑文本框 C# 更新 Sql 数据库

> ID：16213825
> 
> 赞同：0
> 
> 时间：2013-04-25T11:42:54.103
> 
> 标签：c#, sql-server, textbox

我有一个 Winform，它通过编辑两个 TextBox 产品名称和产品成本来更新 SQL 数据库，但是它不会更新数据库，这是我的示例代码

```
 private void simpleButton5_Click(object sender, EventArgs e)
    {
        string id = comboBox2.Items[comboBox2.SelectedIndex].ToString();
        string name = txtProdName.Text;
        string cost = txtProductCost.Text;
        cn.Open();

        string query = "UPDATE [Product1] SET [Product_Name]= @Product_Name,[Product_Cost]= @Product_Cost where [Product_ID]= @Product_ID";
        SqlCommand cmd = new SqlCommand(query, cn);
        cmd.Parameters.AddWithValue("@Product_ID", id);
        cmd.Parameters.AddWithValue("@Product_Name", name);
        cmd.Parameters.AddWithValue("@Product_Price", cost);
        try
        {
            cmd.ExecuteNonQuery();
            MessageBox.Show("Update Succesfully");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        cn.Close();

    } 
```

id 的数据类型是`char`，Product_Name 是`nvarchar(50)`，Porduct_Cost 是`bigint`。任何我会感激的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:55:16.633

看来你转换有错误，如果你的数据库中的成本字段是 bigint 然后转换

```
string cost = txtProductCost.Text 
```

到

```
Int64 cost = Convert.Toint64(txtProductCost.Text); 
```

Int64 直接映射到 BigInt。

或者如果它是 Double 然后转换

```
string cost = txtProductCost.Text 
```

到

```
Double cost = Convert.ToDouble(txtProductCost.Text); 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:47:29.227

一、将字符串值转换为int

```
string cost = txtProductCost.Text;
costval=int.Parse(cost)// costval is integer 
```

接下来，更新数据库

```
cmd.Parameters.AddWithValue("@Product_Price", costval); 
```

# listview - 快速列表视图加载

> ID：16213828
> 
> 赞同：0
> 
> 时间：2013-04-25T11:42:58.523
> 
> 标签：listview, vb6

这个问题很简单，你们中的许多人已经知道`Listview`即使它被隐藏也会慢得多。有一些建议，例如：

1.  加载部分数据，然后在滚动时加载，但默认情况下没有滚动事件
2.  加载部分数据，然后提供按钮以加载更多（比如 50 条）记录
3.  加载部分数据，显示屏幕，然后使用计时器加载剩余数据

还有什么建议？

如何`LockWindowUpdate`工作？是否等于`ListView.Visible = False`？`Listviews`是否可以使用此 API 锁定两个或更多？

**编辑**

[HyperList](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=66732&lngWId=1#zip)看起来很棒，但它的使用很复杂，有人可以简化它或解释调用者端发生的事情，即如何填充数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:32:34.833

这里最明显的解决方案是您提到的所有解决方案之间的交叉；基本上是分页。加载一个设定的数字，然后允许用户使用控件上方或下方的编号页面序列来向后和向前翻页`ListView`。

要进一步加快速度，请不要使用 active `RecordSet`; 相反，将数据加载到数组中，然后直接将信息放入控件中。如果要编辑信息而不是在 ListView 控件中进行编辑，请使用替代表单。

或者，您可以创建自己的`ListView`等价物并使用自己的格式将对象直接写入表单。

我认为，如果您必须使用类似的东西，`LockWindowUpdate`那么您就走错了路。您应该能够使用控件的适当属性来防止用户干扰。

**- 编辑 -**

这个想法是将数据读入内存中的数组，然后循环遍历它并`ListView`以与此类似的方式填充您的数据：

```
Private Function TestInsertListView() As Long
    Dim i As Long
    Dim j As Long
    Dim lT As Long
    Dim itmX As ListItem
    lT = timeGetTime

    ' Add first row
    With lvwTest
        i = 1
        Set itmX = .ListItems.Add(, , "Row" & i & ";Col 1")
        For j = 2 To mcCOLS
           itmX.SubItems(j - 1) = "Row" & i & ";Col" & j - 1
        Next

        For i = 2 To m_iRows
           Set itmX = .ListItems.Add(i, , "Row" & i & ";Col 1")
           For j = 2 To mcCOLS
              itmX.SubItems(j - 1) = "Row" & i & ";Col" & j - 1
           Next
        Next
     End With
     TestInsertListView = timeGetTime - lT

End Function 
```

*[（我在这里](http://www.vbaccelerator.com/home/VB/Code/Controls/S_Grid_2/Performance/VB6_SGrid_2_Performance_Test_zip_frmSpeedTest_frm.asp)找到了上面的例子。）*

显然，您需要修改上述内容以包括数据的读取，但这应该非常简单。 [此链接](http://msdn.microsoft.com/en-us/library/office/jj249311.aspx)提供了 ADO`GetRows`方法的演示，该方法允许您读取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:53:09.780

For suggestion #1 - You could either superempose your only vertical scroll bar on top of the list view control, or subclass the ListView control.

Alternatively, you could use the ItemClick() event (clicking items near the bottom of the list) to determine whether more lines need to be loaded.

Don't use LockWindowUpdate - that is meant to be used for processes which need to draw into windows belonging to other processes when do drag-drop. Google OldNewThing LockWindowUpdate for articles explaining how it works and why using this is a bad idea. It isn't equal to ListView.Visible = False. You can only use one window at a time with this API call.

Use the following SendMessage calls to disable and enable updating.

```
Private Declare Function SendMessage Lib "User32.dll" Alias "SendMessageA" (ByVal hWnd As Long, ByVal wMsg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long

Private Const WM_SETREDRAW  As Long = &HB
Private Const SR_ON         As Long = 1
Private Const SR_OFF        As Long = 0

SendMessage ListView.hWnd, WM_SETREDRAW, SR_OFF, 0&
SendMessage ListView.hWnd, WM_SETREDRAW, SR_ON, 0& 
```

# java - java swing JTextField 设置 PlaceHolder

> ID：16213836
> 
> 赞同：28
> 
> 时间：2013-04-25T11:43:32.383
> 
> 标签：java, swing, jtextfield, placeholder

我创建了一个 JTextField，现在我想在那个 JTextField 上设置占位符，但我不知道怎么做？请帮忙。这是我的代码：

```
JTextField database=new JTextField("Enter Data Base Name");
database.setPreferredSize(database.getPreferredSize());
database.setText(""); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-26T05:01:51.617

试试这个类：

```
package playground;

import java.awt.*;

import javax.swing.*;
import javax.swing.text.Document;

@SuppressWarnings("serial")
public class PlaceholderTextField extends JTextField {

    public static void main(final String[] args) {
        final PlaceholderTextField tf = new PlaceholderTextField("");
        tf.setColumns(20);
        tf.setPlaceholder("All your base are belong to us!");
        final Font f = tf.getFont();
        tf.setFont(new Font(f.getName(), f.getStyle(), 30));
        JOptionPane.showMessageDialog(null, tf);
    }

    private String placeholder;

    public PlaceholderTextField() {
    }

    public PlaceholderTextField(
        final Document pDoc,
        final String pText,
        final int pColumns)
    {
        super(pDoc, pText, pColumns);
    }

    public PlaceholderTextField(final int pColumns) {
        super(pColumns);
    }

    public PlaceholderTextField(final String pText) {
        super(pText);
    }

    public PlaceholderTextField(final String pText, final int pColumns) {
        super(pText, pColumns);
    }

    public String getPlaceholder() {
        return placeholder;
    }

    @Override
    protected void paintComponent(final Graphics pG) {
        super.paintComponent(pG);

        if (placeholder == null || placeholder.length() == 0 || getText().length() > 0) {
            return;
        }

        final Graphics2D g = (Graphics2D) pG;
        g.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g.setColor(getDisabledTextColor());
        g.drawString(placeholder, getInsets().left, pG.getFontMetrics()
            .getMaxAscent() + getInsets().top);
    }

    public void setPlaceholder(final String s) {
        placeholder = s;
    }

} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-11-09T21:23:19.740

```
JTextField searchText; 
```

...

在构造函数中：

```
searchText = new JTextField("Search");
searchText.setForeground(Color.GRAY);
searchText.addFocusListener(new FocusListener() {
    @Override
    public void focusGained(FocusEvent e) {
        if (searchText.getText().equals("Search")) {
            searchText.setText("");
            searchText.setForeground(Color.BLACK);
        }
    }
    @Override
    public void focusLost(FocusEvent e) {
        if (searchText.getText().isEmpty()) {
            searchText.setForeground(Color.GRAY);
            searchText.setText("Search");
        }
    }
    }); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-01T06:11:27.103

如此简单的使用[swingx jar](https://mvnrepository.com/artifact/org.swinglabs/swingx)然后像这样

```
JTextArea txtMSISDNList = new JTextArea();  
PromptSupport.setPrompt("01197585960,01197585961", txtMSISDNList); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-25T16:12:58.213

如果我理解这个问题，[Text Prompt](http://tips4java.wordpress.com/2009/11/29/text-prompt/)会显示一种可以做到这一点的方法。

# php - PHP Excel - 将数据提取到变量

> ID：16213837
> 
> 赞同：2
> 
> 时间：2013-04-25T11:43:34.693
> 
> 标签：php, phpexcel

我一直在使用 PHPExcel，并且能够获取数据集数据并在大型数据集上创建数组。但如果我想让我的客户从单个单元格中提取数据，我似乎无法完成这项工作。

我正在寻找的正是从 excel 中的单个单元格中获取数据并将其放入 PHP 变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:46:27.867

假设您使用 PHPExcel 作为您的库。

要获取“原始”单元格值：

```
$cellA1Value = $objPHPExcel->getActiveSheet()->getCell('A1')->getValue(); 
```

或获取包含公式的单元格的计算值：

```
$cellB2Value = $objPHPExcel->getActiveSheet()->getCell('B2')->getCalculatedValue() 
```

或获取单元格的格式化值：

```
$cellC3Value = $objPHPExcel->getActiveSheet()->getCell('C3')->getFormattedValue() 
```

# c# - 如何动态传递与参数类型相同的泛型类型？

> ID：16213842
> 
> 赞同：0
> 
> 时间：2013-04-25T11:43:48.397
> 
> 标签：c#, windows-8

我正在尝试做这样的事情：

```
public static void ShowTaskPane(UserControl type)
        {            
                var item = set.OfType<typeof(type)>().FirstOrDefault();
     } 
```

但这不起作用，我想选择类型的对象或传递的参数。方法签名，如果需要，我可以更改它，但建议我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:48:18.093

您可以将方法定义为：

```
public static void ShowTaskPane<T>()
{
    var item = set.OfType<T>().FirstOrDefault();
} 
```

然后像这样称呼它：

```
ShowTaskPane<UserControl>(); 
```

或者，如果您的方法假设返回控件，则：

```
public T ShowTaskPane<T>()
{
    return set.OfType<T>().FirstOrDefault();
} 
```

像这样称呼它：

```
var item = ShowTaskPane<UserControl>(); 
```

> 评论：无论如何我可以将 T 的类型限制为 UserControl 的子类型吗？

您可以指定约束，如：

```
public T ShowTaskPane<T>() where T : UserControl
{
    return set.OfType<T>().FirstOrDefault();
} 
```

# html - 无法定位元素

> ID：16213847
> 
> 赞同：0
> 
> 时间：2013-04-25T11:43:59.870
> 
> 标签：html, css

我正在尝试定位此“关于我”框，但无法将其定位。我可以使用 margin-left 或 margin-right 属性向左或向右移动它，但我无法将它向上或向下移动。我使用 float:right 来定位侧边栏。所以我在我的标题上使用了 clear:both 。但它仍然保持静止。

以下图片将帮助您了解我的问题。

![在此处输入图像描述](https://i.stack.imgur.com/Rf6gE.png)

这个页面的代码在[这里](http://jsfiddle.net/ZFzp7/)（jsFiddle）

```
<!doctype html>

<html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="description">
    <link rel="stylesheet" media="screen" href="style123.css">

    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->    
    <title>My First Page</title>
</head>

<body>
    <div id="wrapper">
        <ul id="nav">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Work</a></li>
            <li><a href="#">Contact</a></li>
        </ul>

        <div id="box">
            <h3> ABOUT ME </h3>
        </div>
      </div>
</body>
</html> 
```

CSS：

```
body {
   background: #091A1B;
   color: #544738;
   font-family: helvetica, sans-serif;
}

#nav {
      margin-top: 0px;
      float: right;
}

ul li {
    float: left;
    list-style: none;
    margin-right: 1em; 
}

li a {
    color: #544738;
    text-decoration: none;
    float: left;
    font-size: 25px;
    padding: 12px;
}

li a:hover {
    -webkit-transform: rotate(-10deg) scale(1.2);
    -moz-transform: rotate(-10deg) scale(1.2);
    -o-transform: rotate(-10deg) scale(1.2);
    color: #25296F;
}

#box {
      background-color: black;
      width: 150px;
      height: 38px;
      margin-left: 500px;
      clear: both;
      margin-top: 500px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:56:09.980

习惯了这个代码

```
#box:before, #wrapper:before{
    content:"";
    overflow:hidden;
    clear:both;
    display:table;

} 
```

**[演示](http://jsfiddle.net/rohitazad/ZFzp7/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:07:58.977

您的代码的唯一问题是**垂直边距折叠**。为了防止它添加以下针对您的包装器 div 的规则就可以了。无需其他更改

```
#wrapper {
    overflow:hidden;

} 
```

[在这里](http://jsfiddle.net/Fico/T2CBr/)提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:49:18.687

```
 #box {
position:absolute;

background-color: black;

width: 150px;

height: 38px;

margin-left: 0px;

clear: both;

margin-top: 200px; 
```

}

看看这个演示：给 margin-top 不同的位置和位置变化......

演示：http: [//jsfiddle.net/Praveen16oct90/ZFzp7/1/](http://jsfiddle.net/Praveen16oct90/ZFzp7/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T23:56:24.083

我猜这里的问题是浮动元素。要使您的上边距起作用，只需插入一个样式为 [clear:both] 的空 div，如下所示，`

```
<body>
    <div id="wrapper">
        <ul id="nav">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Work</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
      <div style='clear:both'></div>
        <div id="box">
            <h3> ABOUT ME </h3>
        </div>
      </div>
</body>` 
```

# javascript - 使用来自 HTML 输入的输入搜索 JSON 对象

> ID：16213848
> 
> 赞同：0
> 
> 时间：2013-04-25T11:44:00.653
> 
> 标签：javascript, jquery, html, json, html-input

我有一个使用 jQuery 获得的 JSON 文件。

我想知道如何搜索项目并只获取与 HTML 输入相关的项目。

这是我尝试过的：

```
 function Search(form) {

        $(".products").empty();
        $.getJSON('products.json', function(data) {
            $(data.Products).each(function(index, item) {
                if(form == item.Name) {

                    var input = document.getElementById('searchForm');

                    $('<div/>', {'class':'productname'}).text(item.Name).append(
                            $('<div/>', {'class':'productdetails', text:'Album: '+item.Album}),
                            $('<div/>', {'class':'productdetails'}).append($('<img>').attr({src:item.Source,title:item.Name,alt:item.Name,class:'productimage'})),
                            $('<div/>', {'class':'productdetails', text:'Genre: '+item.Genre}),
                            $('<div/>', {'class':'productdetails', text:'Price: '+item.Price}),
                            $('<div/>', {'class':'productdetails', text:'Quantity: '+item.Quantity}),
                            $('<div/>', {'class':'productdetails', text:'Tracks: '+item.Tracks}),
                            $('<div/>').append(
                                    $('<button />', {'class':'productbutton'})
                                            .text('Add To Cart.')
                                            .click(function(){
                                                $.fn.SaveToCart(i,item.Name, item.Album, item.Price);
                                            })
                            )
                    ).appendTo(".products");
                }   else if (form == item.Album) {

                    var input = document.getElementById('searchForm');

                    $('<div/>', {'class':'productname'}).text(item.Name).append(
                            $('<div/>', {'class':'productdetails', text:'Album: '+item.Album}),
                            $('<div/>', {'class':'productdetails'}).append($('<img>').attr({src:item.Source,title:item.Name,alt:item.Name,class:'productimage'})),
                            $('<div/>', {'class':'productdetails', text:'Genre: '+item.Genre}),
                            $('<div/>', {'class':'productdetails', text:'Price: '+item.Price}),
                            $('<div/>', {'class':'productdetails', text:'Quantity: '+item.Quantity}),
                            $('<div/>', {'class':'productdetails', text:'Tracks: '+item.Tracks}),
                            $('<div/>').append(
                                    $('<button />', {'class':'productbutton'})
                                            .text('Add To Cart.')
                                            .click(function(){
                                                $.fn.SaveToCart(i,item.Name, item.Album, item.Price);
                                            })
                            )
                    ).appendTo(".products");

                }
            });
        });
    };

    $(document).ready(function() {
        $('#searchForm').submit(function(e) {
            e.preventDefault();
            Search(this);
        });
    }); 
```

HTML：

```
 <form name="searchForm" id="searchForm" >
<input name="productname" id="productname" type="text">
<input type="submit" value="Search">
 </form> 
```

尝试此代码只会刷新页面。

关于如何修复它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:59:55.210

您需要阻止提交表单。您可以在函数`return false;`的最底部添加（在最后一个之前），或者删除内联并使用 jQuery 将处理程序附加到表单，这将允许您使用：`Search()``};``onsubmit``submit`[`preventDefault()`](http://api.jquery.com/event.preventDefault/)

```
$(document).ready(function() {
  $('#searchForm').submit(function(e) {
    e.preventDefault(); 
    Search(this);
  });
}); 
```

此外，您在以下行中有拼写错误：

`var input = document.getElementById('searhForm');`

应该

`var input = document.getElementById('searchForm');`

# visualization - 关于多重相关矩阵的可视化有什么想法吗？

> ID：16213849
> 
> 赞同：1
> 
> 时间：2013-04-25T11:44:01.960
> 
> 标签：visualization, correlation

我想在三种不同情况下比较一组变量中的相关结构，我想生成一个这样的图：[示例图](https://i.stack.imgur.com/gkEZI.png)

它是三个相关矩阵的组合。希望有人比其他人更有创意......

ps 也是这样的：[data-visualization](http://stats.blogoverflow.com/category/data-visualization/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T15:21:20.053

来自 R-blogger 的类似内容；可能对您有帮助，

[http://www.r-bloggers.com/visualizing-the-correlations-of-a-matrix/](http://www.r-bloggers.com/visualizing-the-correlations-of-a-matrix/)

# jquery - 如果验证失败，如何在表单中启用提交事件

> ID：16213852
> 
> 赞同：0
> 
> 时间：2013-04-25T11:44:05.640
> 
> 标签：jquery, html, forms, form-submit, submit-button

购物车表单包含带有 ajax 提交的验证表单。如果验证失败，将出现 alert() 框并取消提交。`return false` 如果验证失败，则不再调用提交方法。随后单击按钮将被忽略。

只有第一次单击绿色`Lisa ostukorvi`按钮会导致警报框。随后的点击被忽略，submit() 事件不会触发。这发生在 IE10、FireFox 和 Chrome 中。如何解决这个问题？

```
<script>
var request;
$(function() {
$(".browse-addtocart-form").submit(function(event){
    if (request) {
        request.abort();
    }
    var $form = $(this);
    var $inputs = $form.find("input, select, button, textarea");
    var serializedData = $form.serialize();
    var q = parseInt(this.quantity.value, 10);
    if(isNaN(q) || q === 0){
      alert('Fill quantity');
      $(this.quantity).focus();
      // TODO: Why this causes submit event not to occur on subsequent clicks:
      return false;
      }

    request = $.post('/AddToCart', serializedData );
    return false;
    });
   });
</script>

 <form class='browse-addtocart-form' action="/AddToCartPost" method="post">
<input type="submit" value="Add to cart" class='button green small bigrounded' />
</form>
</html> 
```

使用 jquery、jquery-ui、ASP .NET MVC2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:53:52.653

嗨，你应该使用这样的点击函数 $("#submitId").click(function () { /* your code*//}); 并给你的提交按钮一个 id

# java - 安卓应用导航 | 自定义导航

> ID：16213853
> 
> 赞同：-2
> 
> 时间：2013-04-25T11:44:06.840
> 
> 标签：java, android, map, navigation, gesture

我认为这可能有点困难。我创建了一个坐标系，以在其上构建游戏。从现在开始，您可以通过滑动左右移动。是否可以允许向上/向下滑动？但我认为一直滑动很烦人，所以我想添加一个像谷歌地图这样的系统使用它（通过点击并按住移动）。是否已经有一个听众或类似的东西来包括这个，或者有人知道如何创建类似的东西。我已经在网上搜索了一些东西......没有成功。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:44:12.863

我自己有一个遮阳篷，只需使用 OnTouchListener 并捕获 MotionEvent.ACTION_DOWN 和 .ACTION_MOVE 例如，这样您就可以始终获取当前触摸位置并计算它与起始位置之间的差异并为此制作地图动画价值观。

# ios - UIAlertView clickedButtonAtIndex 方法未被调用

> ID：16213854
> 
> 赞同：1
> 
> 时间：2013-04-25T11:44:08.543
> 
> 标签：ios, objective-c, uialertview

在 .h 文件中

```
@interface MenuViewController : UIViewController<UIAlertViewDelegate> 
```

在 .m 文件中

```
@interface TACDIYMenuViewController ()

@end

@implementation TACDIYMenuViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return [self.imageViews count];
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath{
    CGSize size = CGSizeMake(200, 100);
    return size;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    MenuViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MenuViewCellIdentifier" forIndexPath:indexPath];
    if ([indexPath row] < [self.imageViews count]) {
        cell.thumbnails.image = [self.imageViews objectAtIndex:[indexPath row]];
    } else {
        cell.thumbnails.image = [UIImage imageNamed:@"addMark.png"];
    }

    return cell;
}

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{
    [self doSomething];
}

- (void)doSomething{
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Warning"
                                                    message:@"Are you sure"
                                                   delegate:self
                                          cancelButtonTitle:@"NO"
                                          otherButtonTitles:@"YES",nil];
    [alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if(buttonIndex == 0){
        NSLog(@"0");
    } else {
        NSLog(@"1");
    }
}

@end 
```

但是，clickedButtonAtIndex 没有被调用。它是怎么发生的？
顺便说一下，MenuViewController 中的视图是另一个类的子视图，它也有一个 UIAlertView 和 clickedButtonAtIndex 方法。但它运作良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-11T01:36:59.277

如果在单击 AlertView 上的按钮之前解除分配委托对象（在您的情况下为 TACDIYMenuViewController 的实例），则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:27:18.253

代替

```
@interface MenuViewController : UIViewController<UIAlertViewDelegate> 
```

和

```
@interface TACDIYMenuViewController : UIViewController<UIAlertViewDelegate> 
```

然后它应该工作。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-25T11:47:43.907

请在 [alert show] 之前添加此行；alert.delegate = 自我；

# node.js - 在 Node.js Express 上渲染 HTML（在另一个 HTML 文件中包含 HTML 代码）

> ID：16213855
> 
> 赞同：1
> 
> 时间：2013-04-25T11:44:18.513
> 
> 标签：node.js, html, express

我正在使用安装了 Express-Framework 的 Node.js 服务器，并且在组合两个不同的 html 文件时遇到了问题。

我有一个基本的 template.html 文件，其中包含一个`<div id="content">`。现在我想在将数据发送到客户端之前在这个 div 中包含 content.html。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:15:22.480

我喜欢使用 EJS，因为它是最直接的模板语言，但同样的想法也适用于 Jade 或您可能使用的任何东西。要在运行后在 express 中启用此功能`npm install ejs`：

```
app.engine('.ejs', require('ejs').__express); 
```

当您发送响应时，运行：

```
res.render('content.html.ejs'); 
```

将你的 template.html 吐进`views/header.html.ejs`and `views/footer.html.ejs`，并`views/content.html.ejs`像这样包含它们：

```
<% include header.ejs %>
  Content Here
<% include footer.ejs %> 
```

# r - 如何将数字映射到颜色？

> ID：16213856
> 
> 赞同：1
> 
> 时间：2013-04-25T11:44:20.607
> 
> 标签：r, plot, raster

我正在尝试将此文件（无符号字符，像素 = 1440 和行 = 720）作为地图查看。我尝试了下面给出的代码。首先，我下载的可能问题是这段代码使用的是连续配色方案，即使我有离散数据（这是一个分类方案）。如何将数字映射到颜色？请举一个想要的比例的例子如下所示：

```
conne <- file("C:\\landcover.bin", "rb")
dfr<- readBin(conne, integer(), size=1,  n=720*1440, signed=F)

y<-matrix((data=dfr), ncol=1440, nrow=720)
image(y) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T18:06:00.063

该`raster`包提供了一种使用分类数据的方法。阅读帮助页面`ratify`了解详情。

首先让我们用您的数据创建一个`RasterLayer`：

```
library(raster)

dfr <- readBin('biome1440s.bin', integer(), size=1,  n=720*1440, signed=F)
r <- raster(nrow=720, ncol=1440)
r[] <- dfr 
```

现在我们将其定义`RasterLayer`为 的一个因子`ratify`。您应该使用您的信息而不是更改其级别`LETTERS`：

```
r <- ratify(r)
rat <- levels(r)[[1]]
rat$soil <- LETTERS[1:15]
levels(r) <- rat 
```

最后，这个分类`RasterLayer`可以用[package](http://rastervis.r-forge.r-project.org/)`levelplot`的方法显示。`rasterVis`

```
library(rasterVis) 
myPal <- c('lightblue', terrain.colors(14))
## using par.settings
levelplot(r, par.settings=rasterTheme(region=myPal))
## or with col.regions
levelplot(r, col.regions=myPal) 
```

![世界土地利用](https://i.stack.imgur.com/Z69NU.png)

编辑：`levelplot`使用`lattice`图形，同时`plot`使用 `base`图形。它们不能一起使用（除非您使用该 `gridBase`软件包）。`+.trellis`但是，您可以使用包中的和`layer`函数 轻松覆盖附加信息`latticeExtra`。由于`wrld_simpl`是 a `SpatialPolygonsDataFrame`，您可以使用包中的`sp.polygons`函数`sp`来绘制它。

```
library(maptools) ## needed for wrld_simpl
data(wrld_simpl) ## a SpatialPolygonsDataFrame
levelplot(r, col.regions=myPal) +
    layer(sp.polygons(wrld_simpl, lwd=0.5)) 
```

![wrld_simpl](https://i.stack.imgur.com/hA0vR.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:19:36.163

首先，没有代码可以使用“连续”的配色方案，因为所有数据都是数字化和量化的。
现在，有很多内置的颜色模式`R`。有关`?image`用于地图等的一些常用调色板的讨论，请参阅 参考资料。如果您的地图数据具有各种土壤类型的离散数值范围，则可以通过一些缩放数学来为每个类别应用不同的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:24:35.393

或者你可以使用优秀的 ggplot2 包。这具有`geom_raster`可以与您的数据一起正常工作的几何形状。请注意，`ggplot2`要求其数据的格式与矩阵不同，您可以使用`melt`from`reshape2`包来执行此转换。另请参阅我对[先前问题的](https://stackoverflow.com/questions/12285120/how-to-visualize-a-map-from-a-netcdf-file/12295601#12295601)回答，该问题与您的问题有很多相似之处。

# mysql - 在 select 语句中合并两个相似的聚合函数

> ID：16213861
> 
> 赞同：0
> 
> 时间：2013-04-25T11:44:35.687
> 
> 标签：mysql, sql, aggregate-functions

这是一条 SQL 语句：

```
SELECT DISTINCT  `class`, `student_id` , `student_name`,
( 
    SELECT SUM(  `credits` ) 
    FROM  `stumgr_scores` B
    JOIN  `stumgr_courses` USING (  `course_id` ) 
    WHERE  `year` =2012 AND A.`student_id` = B.`student_id`
) AS  `total_credits`,
( 
    SELECT SUM( `credits` *  `final_score` )
    FROM  `stumgr_scores` C
    JOIN  `stumgr_courses` USING (  `course_id` ) 
    WHERE  `year` =2012 AND A.`student_id` = C.`student_id`
) AS `total_scores`
FROM  `stumgr_scores` A
NATURAL JOIN  `stumgr_students` 
WHERE  `year` =2012 AND  `grade` =2011 
```

您可能会发现这两个使用聚合函数的 select 语句是相似的。所以，我想将它们合并为一个，如下所示：

```
SELECT DISTINCT  `class`, `student_id` , `student_name`,
( 
    SELECT 
        SUM(  `credits` ) AS  `total_credits`, 
        SUM( `credits` *  `final_score` ) AS  `total_scores`
    FROM  `stumgr_scores` B
    JOIN  `stumgr_courses` USING (  `course_id` ) 
    WHERE  `year` =2012 AND A.`student_id` = B.`student_id`
) AS `something`
FROM  `stumgr_scores` A
NATURAL JOIN  `stumgr_students` 
WHERE  `year` =2012 AND  `grade` =2011 
```

当然，上面的SQL语句不起作用，我也不知道该怎么办。另外，由于数据量大，查询很慢，您有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:58:08.457

我不得不稍微猜测您的表结构，但是您应该能够通过使用`JOIN`s 而不是相关子查询来大规模简化此查询：

```
SELECT  st.student_id,
        st.student_name,
        c.class,
        SUM(sc.credits) AS total_credits,
        SUM(sc.credits * sc.final_score) AS total_scores
FROM    stumgr_students st
        INNER JOIN stumgr_scores sc
            ON sc.student_id = st.student_id
        INNER JOIN stumgr_courses c
            ON c.course_id = st.course_id
GROUP BY st.student_id, st.student_name, c.class; 
```

# java - 版本升级时出现 java.lang.NullPointerException

> ID：16213863
> 
> 赞同：9
> 
> 时间：2013-04-25T11:44:50.963
> 
> 标签：java, android, nullpointerexception

当我在现有版本上安装 apk 时，我的应用程序引发异常。

这些是重现我的错误的步骤：

1.  安装应用程序（即 v1）并运行它（未发现错误）
2.  安装相同的 apk 或带有小更新的新 apk（即 v2）
3.  抛出 NullReferenceException
4.  安装与#2相同的apk
5.  一切正常

这是一个例外：

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.empystudio.cashflow/com.empystudio.cashflow.MainActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.empystudio.cashflow.MainActivity.onCreate(MainActivity.java:66)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
... 11 more 
```

这是 MainActivity 的代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    documentsView = (ImageView) findViewById(R.id.documents_view);
    backupView = (ImageView) findViewById(R.id.backup_view);
    restoreView = (ImageView) findViewById(R.id.restore_view);
    helpView = (ImageView) findViewById(R.id.help_view);
    versionView = (TextView) findViewById(R.id.ver_name);
    ... 
```

行号 66 是

```
documentsView = (ImageView) findViewById(R.id.documents_view); 
```

我试图评论我的应用程序的很多部分但没有成功，现在我不知道如何解决这个问题。

[编辑]

更多信息：

1.  MainActivity 是 Android 清单中的启动器 Activity
2.  我无法捕捉到异常（我拥有的唯一堆栈来自 Google Play 异常管理）
3.  如果我评论第 66 行，我仍然有一个例外

[编辑]

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/main_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/adLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_vertical"
    android:gravity="center_vertical"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical"
            tools:ignore="UseCompoundDrawables" >

            <ImageView
                android:id="@+id/documents_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:adjustViewBounds="false"
                android:contentDescription="@string/title_activity_documents"
                android:gravity="center"
                android:src="@drawable/menu_documents" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center"
                android:text="@string/title_activity_documents" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical"
            tools:ignore="UseCompoundDrawables" >

            <ImageView
                android:id="@+id/help_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:contentDescription="@string/menu_help"
                android:gravity="center"
                android:src="@drawable/menu_help" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center"
                android:text="@string/menu_help" />
        </LinearLayout>
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical"
            tools:ignore="UseCompoundDrawables" >

            <ImageView
                android:id="@+id/backup_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:contentDescription="@string/menu_backup_database"
                android:gravity="center"
                android:src="@drawable/menu_backup" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center"
                android:text="@string/menu_backup_database" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical"
            tools:ignore="UseCompoundDrawables" >

            <ImageView
                android:id="@+id/restore_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:contentDescription="@string/menu_restore_database"
                android:gravity="center"
                android:src="@drawable/menu_restore" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center"
                android:text="@string/menu_restore_database" />
        </LinearLayout>
    </TableRow>
</TableLayout>

<TextView
    android:id="@+id/ver_name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_gravity="bottom"
    android:gravity="right"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

[编辑]

这里有两个不同的 APK 来重现错误：

[http://www.empystudio.com/downloads/private/cashflow_1.0.64.apk](http://www.empystudio.com/downloads/private/cashflow_1.0.64.apk)

[http://www.empystudio.com/downloads/private/cashflow_1.0.65.apk](http://www.empystudio.com/downloads/private/cashflow_1.0.65.apk)

要重现错误：

1.  安装版本。64
2.  打开它
3.  安装版本。65
4.  打开它（这里我收到一个错误）
5.  安装版本。又是65
6.  一切正常

# javascript - Javascript 将字符串转换为对象数组

> ID：16213864
> 
> 赞同：15
> 
> 时间：2013-04-25T11:44:56.313
> 
> 标签：javascript, node.js, json, parsing, salesforce

我有一个接受字符串的 NodeJS 应用程序（上传的*输入*！）我**无法控制**输入我只是构建一个 REST 服务来*处理*数据。

该字符串是*一个*JSON**对象****数组**，然后我可以循环提取每个元素......

 **我**收到**以下内容（作为字符串）：

```
[
  {Name: 'Jane',
       Id: '005b0000000MGa7AAG'},
  {Name: 'Tom',
       Id: '005b0000000MGa7AAF'}
] 
```

当我尝试**JSON.parse**这个我得到

```
SyntaxError: Unexpected token N 
```

可以理解，因为我*知道*这是**无效的 JSON**

而*下*一个字符串是*有效的 JSON*并通过[http://jsonlint.com/](http://jsonlint.com/)：

```
[
    {"Name": "Jack",
        "Id": "005b0000000MGa7AAA"},
    {"Name": "Jill",
        "Id": "005b0000000MGa7AAB"}
] 
```

我的问题是：*如何*接受第*一个*输入并解析它以允许：

```
parsed[0]['Name'] == 'Jane'
>> true 
```

我的第一直觉是将键替换为字符串（例如，将名称更改为“名称”），然后尝试解析它。但如果其他人有解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T11:54:26.167

您可以通过一些正则表达式替换来做到这一点：

```
var json = "[ {Name: 'Jane', Id: '005b0000000MGa7AAG'}, {Name: 'Tom', Id: '005b0000000MGa7AAF'} ]";

var newJson = json.replace(/([a-zA-Z0-9]+?):/g, '"$1":');
newJson = newJson.replace(/'/g, '"');

var data = JSON.parse(newJson);

alert(data[0]["Name"]); 
```

首先，我们将属性名称用引号括起来，然后将单引号替换为双引号。这足以使其成为有效的 JSON，然后可以对其进行解析。

[这是一个工作示例](http://jsfiddle.net/KuTjq/)

* * *

**注意**：一般使用 RegEx 处理这样的事情并不理想，而且这个解决方案只能在特定情况下工作（比如这个例子）。如评论中所述，一个问题是数据值是否包含冒号`:`

考虑到这一点，这是一个更可靠的解决方案：

```
var json = $("div").html();

var newJson = json.replace(/'/g, '"');

newJson = newJson.replace(/([^"]+)|("[^"]+")/g, function($0, $1, $2) {
    if ($1) {
        return $1.replace(/([a-zA-Z0-9]+?):/g, '"$1":');
    } else {
        return $2; 
    } 
});

var data = JSON.parse(newJson);
alert(data[0]["Name"]); 
```

这将匹配以冒号结尾的任何变量（字母数字）`:`，但将忽略在引号之间找到的任何匹配项（即数据字符串值）

[这是一个例子](http://jsfiddle.net/KuTjq/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:02:59.523

创建一个 javascript 类，用您的输入填充对象，然后使用：`JSON.stringify(object)`以避免错误将其转换为干净的 json。[我的完整帖子在这里](http://www.microsofttranslator.com/bv.aspx?from=es&to=en&a=http://makcn.blogspot.com/2012/05/enviar-un-json-bien-formado.html)。

注意：如果您使用 IE7 或更低版本，您必须添加`JSON.js`库才能使用`JSON.stringify()`功能。**

# java - 在java中创建差异补丁

> ID：16213866
> 
> 赞同：0
> 
> 时间：2013-04-25T11:44:59.093
> 
> 标签：java, diff, patch

尊敬的开发者！你能说，是否存在一个 java 库，它允许创建差异补丁，最好是从 jar 文件并将它们应用于这些 jar 文件？也许，有人有关于它的文章？我将非常感谢您的帮助。

# python - 加载具有多个 python 版本的特定 PyQt4 模块

> ID：16213867
> 
> 赞同：2
> 
> 时间：2013-04-25T11:45:06.020
> 
> 标签：python, windows-7, path, pyqt4, multiple-versions

我在 win7 系统上安装多个 python 时遇到问题。我有一个 Python2.6.4 和一个 Python3.1。他们每个人都在其站点包目录中正确安装了不同的 PyQt4 版本。更加具体：

Python2.6.4 与 PyQt4 4.7.3
Python3.1 与 PyQt4 4.8.2

问题是我似乎无法在任何这些版本中导入 PyQt4。这显然是路径冲突的问题。

我从路径环境变量中删除了任何路径，并尝试通过以下方式专门为每个 python 版本设置它们：

*   每个版本的站点包文件夹中的 [.pth] 文件
*   在导入之前在我的脚本中的 sys.path 中手动添加 PyQt4 文件夹，但没有任何效果

我发现使它工作的唯一方法是在系统环境路径中添加 PyQt4 文件夹，这不方便，因为每次切换 Python 版本时我都必须手动更改它。

我究竟做错了什么 ？

# java - 相乘时的不同结果

> ID：16213872
> 
> 赞同：0
> 
> 时间：2013-04-25T11:45:20.113
> 
> 标签：java, operators, range

我有以下代码和输出：

```
public static void main(String[] args) {
    long lon = 1000;
    lon = lon * 3600;
    lon = lon * 24;
    lon = lon * 365;

    System.out.println("lon:  " + lon);

    long lon2 = 1000 * 3600 * 24 * 365;
    System.out.println("lon2: " + lon2);
}
lon:  31536000000
lon2: 1471228928 
```

我想某种溢出正在发生`lon2`，但我似乎无法弄清楚。结果远低于 Long.MAX_VALUE。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:46:50.710

Java 不够聪明，无法在这里猜测您的意图。

你的问题是你在发生溢出的地方乘以*`int`s 。*该计算中的每个数字都是`int`，因此它的结果也是`int`。在分配时，结果`int`将转换为`long`，但到那时为时已晚。

所以使用类似的东西

```
long lon2 = 1000L * 3600 * 24 * 365; 
```

确保整个计算在`long`s 中完成。或者，为了安全起见，只需`L`在每个文字上加上 。使您的意图非常明确:-)

# java - 在 Apache HttpClient 4.x 中多次读取响应正文

> ID：16213874
> 
> 赞同：4
> 
> 时间：2013-04-25T11:45:23.033
> 
> 标签：java, inputstream, apache-httpclient-4.x

我在我的应用程序中使用 Apache HttpClient 4.2.3。我们存储 HTTP 调用的响应，如下所示：

```
HttpResponse httpResponse = (DefaultHttpClient)httpClient.execute(httpRequest); 
```

响应正文是 4.x API 中的 InputStream：

```
InputStream responseStream = httpResponse.getEntity().getContent(); 
```

我的问题是我需要在应用程序的各个点将响应正文作为字符串和字节 [] 读取。但是 Apache 使用的 InputStream 是一个 EofSensorInputStream，这意味着一旦我到达流 EOF，它就会关闭。无论如何我可以多次获取字符串和字节[]表示而不关闭流？

我已经尝试[将字节数组包装在新的 ByteArrayInputStream 中](https://stackoverflow.com/questions/5923817/how-to-clone-an-inputstream)并将其设置为请求正文，但它不起作用，因为我的响应正文可以达到几场演出。我也试过[这个](https://stackoverflow.com/questions/12107049/how-can-i-make-a-copy-of-a-bufferedreader)，但我注意到原始响应流仍然关闭。

欢迎任何指点。

编辑：在相关说明中，如果我可以在不消耗流或通过反转消耗的情况下找到 InputStream 的长度，那也很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:28:43.673

1\. 我认为您的要求有些矛盾：

一个）

> 它不起作用，因为我的响应主体可以达到几场演出

b)

> 无论如何我可以多次获取字符串和字节[]表示而不关闭流

如果您没有足够的内存，这是不可能的。

顺便说一句，以字节形式获取响应的另一种方法是`EntityUtils.byte[] toByteArray(final HttpEntity entity)`.

你真的需要 N-gigs String 吗？你打算用它做什么？

2.

> 如果我能找到 InputStream 的长度也很棒

`httpResponse.getEntity().getContentLength()`

3\. 由于响应不适合内存，我建议将其保存到文件（或临时文件）中。然后在该文件上设置 InputStream，然后根据需要多次读取。

# java - 搜索二维数组

> ID：16213880
> 
> 赞同：-1
> 
> 时间：2013-04-25T11:45:52.350
> 
> 标签：java, algorithm, graph

所以我正在编写一个 java 程序，它应该找到从入口`"2"`到其中一个数字的最短路径`"3"`。它只能在`" "`位置上行走。`"1"`是墙壁。

```
11111121 
131    1 
1 1 1111 
1 1 13 1     
1 1 11 1 
1 1    1
1      1  
11111111 
```

我的开始想法是在二维数组中找到入口。这可以这样做：

```
Point entrance = new Point(0,0);
   for (int i = 0; i < N; i++) {
     for (int j = 0; j < N; j++){
        if(map[i][j] == 2){
           entrance.x =i;
           entrance.y =j;
        }
   } 
```

我也可以找到这两个`"3"`并将它们保存在积分中。**但**我不确定如何将路线返回到最近的位置`"3"`。我正在考虑像一个操纵杆，我保存你去的方向，比如（上，下，左，右）。然后返回从入口到最近的移动的完整列表 3\. 有什么建议或想法我可以如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:48:45.843

您在这里所拥有的只是图的非规范表示。您将每个单元格作为图中的一个顶点，并且当且仅当它们都是空闲的时，您在两个相邻单元格之间有一条边。

既然您以这种方式看待问题，请像您一样找到入口，而不是进行[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)以找到出口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:48:23.480

您需要创建一个计数器，每次当前位置为“”（可步行）时都会增加

符号`" "`=`0`在矩阵中：

```
Point entrance = new Point(0,0);
for (int i = 0; i < N; i++) {
 for (int j = 0; j < N; j++){
    if(map[i][j] == 2){
       entrance.x =i;
       entrance.y =j;
    }
}

Point firstexit = new Point(0,0);
int steps = 0;
int i = entrance.x;
int j = entrance.y;
int lasti = 0;
int lastj = 0;
while(true){

    if(map[i][j] == 3){
       firstexit.x =i;
       firstexit.y =j;
       break ;
    }
    if(map[i][j] == 0){
       steps++;
    }

    // TO-DO : check if position exists
    if(map[i][j+1] == 0 && (lasti != i && lastj != j)){
       lastj = j;
       j++;
    }else if(map[i][j-1] == 0 && (lasti != i && lastj != j)){
       lastj = j;
       j--;
    }else if(map[i+1][j] == 0 && (lasti != i && lastj != j)){
       lasti = i;
       i++;
    }else if(map[i-1][j] == 0 && (lasti != i && lastj != j)){
       lasti = i;
       i--;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:49:58.550

我会尝试创建一个带有节点和边的图。节点是迷宫中的连接点，边缘是连接点与入口或出口对象之间的路径。每个边缘对象都有一个“权重”。从双数组计算网络后，您可以使用一些简单的算法来计算出最短路径。

# c# - Monty Hall 程序模拟 (C#)

> ID：16213882
> 
> 赞同：7
> 
> 时间：2013-04-25T11:46:02.960
> 
> 标签：c#, probability

我正在尝试用我最熟悉的编程语言 C# 模拟[蒙蒂霍尔问题](http://en.wikipedia.org/wiki/Monty_Hall_problem)（因为我从[Think Statistics](http://greenteapress.com/thinkstats/)一书中读到，一个人特别是在看到计算机模拟后才被说服）。我的场景是，奖品的位置是随机的（每次运行中），我的选择是随机的，游戏主持人开门的选择是随机的（如果我选择了非奖品就不可能是随机的）。

但令人惊讶的是，无论我是否切换，我的程序都获得了 50:50 的获胜机会。这是它的代码（请原谅我的冗长）：

```
class Program
{
    static void Main(string[] args)
    {
        Random rand = new Random();

        int noSwitchWins = RunGames(rand, false, 10000);
        int switchWins = RunGames(rand, true, 10000);

        Console.WriteLine(string.Format("If you don't switch, you will win {0} out of 1000 games.", noSwitchWins));
        Console.WriteLine(string.Format("If you switch, you will win {0} out of 1000 games.", switchWins));

        Console.ReadLine();
    }

    static int RunGames(Random rand, bool doSwitch, int numberOfRuns)
    {
        int counter = 0;

        for (int i = 0; i < numberOfRuns; i++)
        {
            bool isWin = RunGame(rand, doSwitch);
            if (isWin)
                counter++;
        }

        return counter;
    }

    static bool RunGame(Random rand, bool doSwitch)
    {
        int prize = rand.Next(0, 2);
        int selection = rand.Next(0, 2);

        // available choices
        List<Choice> choices = new List<Choice> { new Choice(), new Choice(), new Choice() };
        choices[prize].IsPrize = true;
        choices[selection].IsSelected = true;
        Choice selectedChoice = choices[selection];
        int randomlyDisplayedDoor = rand.Next(0, 1);

        // one of the choices are displayed
        var choicesToDisplay = choices.Where(x => !x.IsSelected && !x.IsPrize);
        var displayedChoice = choicesToDisplay.ElementAt(choicesToDisplay.Count() == 1 ? 0 : randomlyDisplayedDoor);
        choices.Remove(displayedChoice);

        // would you like to switch?
        if (doSwitch)
        {
            Choice initialChoice = choices.Where(x => x.IsSelected).FirstOrDefault();
            selectedChoice = choices.Where(x => !x.IsSelected).FirstOrDefault();
            selectedChoice.IsSelected = true;
        }

        return selectedChoice.IsPrize;
    }
}

class Choice
{
    public bool IsPrize = false;
    public bool IsSelected = false;
} 
```

这完全是为了我自己的利益，我以我最熟悉和最舒服的方式写了它。欢迎提出自己的看法和批评，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T12:02:36.450

```
rand.Next(0,2) 
```

只返回 0 或 1；上限是*独占*的。您永远不会选择第三扇门（除非您切换），第三扇门永远不会有奖品。您正在建模错误的问题。

请尝试：

```
rand.Next(0,3) 
```

同样地：

```
int randomlyDisplayedDoor = rand.Next(0, 1); 
```

只选择第一个候选门；应该：

```
int randomlyDisplayedDoor = rand.Next(0, 2); 
```

现在我们得到：

```
If you don't switch, you will win 3320 out of 1000 games.
If you switch, you will win 6639 out of 1000 games. 
```

注意 -当*等于*时，上限*包括在内*- 即总是返回。*`rand.Next(1,1)``1`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:05:28.677

参见[Random.Next(minValue, maxValue)](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)

> 参数
> 
> minValue 类型：System.Int32 返回的随机数的下限。
> 
> maxValue 类型：System.Int32 返回的随机数的独占上限。maxValue 必须大于或等于 minValue。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T12:58:05.317

要添加到 Marc 的答案，您还可以使用[Random.Next(Int32)](http://msdn.microsoft.com/en-us/library/zd1bc8e5.aspx)因为您的下限为 0，所以它很简单：

```
rand.Next(3) 
```*

# html - 在 html/CSS 中自定义滚动条

> ID：16213885
> 
> 赞同：1
> 
> 时间：2013-04-25T11:46:07.380
> 
> 标签：html, css

我创建了一个带有自定义滚动条的页面。当我应用代码时，正文中的所有滚动条和浏览器窗口的滚动条都会对代码做出反应。然而我想要的是只为正文而不是窗口自定义滚动条。

我怎样才能改变这个？非常感谢。这是 webkit 代码。

```
::-webkit-scrollbar .right {    
    width: 7px;        
}    

/* Track */    
::-webkit-scrollbar-track .right{    
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);     
    -webkit-border-radius: 10px;    
     border-radius: 10px;     
}

/* Handle */    
::-webkit-scrollbar-thumb .right{    
     -webkit-border-radius: 10px;       
     border-radius: 10px;      
     /*background: rgba(255,0,0,0.8); */    
     -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);     
}    

::-webkit-scrollbar-thumb:hover {    
     background-color:#028eff;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:53:58.983

**演示**： http: [//jsfiddle.net/2cpSW/2/](http://jsfiddle.net/2cpSW/2/)（仅限 webkit）

您可以使用更具限制性的选择器：

```
/* just for testing */
div.custom-scroll {
    overflow: auto;
    height: 200px;
}

/* modified selectors from question */

.custom-scroll::-webkit-scrollbar {
    width: 7px;
}
.custom-scroll::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
    -webkit-border-radius: 10px;
    border-radius: 10px;
}
.custom-scroll::-webkit-scrollbar-thumb {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);
}
.custom-scroll::-webkit-scrollbar-thumb:hover {
    background-color:#028eff;
} 
```

看起来您正在尝试使用 ( `::-webkit-scrollbar .right`) 来执行此操作。也许您需要做的就是更正选择器？( `.right::-webkit-scrollbar`)。

更多阅读：[伪元素选择器](http://www.w3.org/TR/selectors/#pseudo-elements)

# django - Django：隐藏主键（pk）并使用带有get_queryset的DetailView

> ID：16213894
> 
> 赞同：1
> 
> 时间：2013-04-25T11:46:42.833
> 
> 标签：django, django-class-based-views

跟进这个线程：[django: How do I hash a URL from the database object's primary key?](https://stackoverflow.com/questions/10559935/django-how-do-i-hash-a-url-from-the-database-objects-primary-key) ，我想对用户隐藏主键并`Detailview`在我的 urlconf 中使用。我能够在大多数情况下使用按位 XOR 来完成这种隐藏（它在我的视图函数中工作），直到我必须“取消屏蔽”在 url 中发送到我的子类的屏蔽主键的部分`DetailView`.

如何在将 pk_masked 命名组发送到我的`DetailViewFilteredOnUser(DetailView)`实例之前“取消屏蔽”它？有没有办法`mask_toggle(pk_unmasked)`在 urlconf 中发送给我对 DetailViewFilteredOnUser 的调用？在寻找解决方案时，我`pk_url_kward`在 Django 文档中找到了一些内容，但我无法让它工作，而且无论如何我认为这不能帮助我对 DetailView 操作的主键执行操作。

这是我的屏蔽功能：

```
def mask_toggle(number_to_mask_or_unmask):
    return int(number_to_mask_or_unmask) ^ settings.MASKING_KEY 
```

我的模型是包含“项目”的“pkgs”：

```
class Pkg(models.Model):
    user = models.ForeignKey(User, editable=False)
    tracking_number = models.CharField(max_length=60, unique=True)

class Item(models.Model):
    pkg = models.ForeignKey(Pkg)
    description = models.CharField(max_length=300) 
```

这是我的 urls.py 中的内容：

```
class ListViewFilteredOnUser(ListView):
    def get_queryset(self):
        return Pkg.objects.order_by('-created_at').filter(user=self.request.user)

class DetailViewFilteredOnUser(DetailView):
    def get_queryset(self):
    qs = super(DetailViewFilteredOnUser, self).get_queryset()
        return qs.filter(user=self.request.user)

....

url(r'^(?P<pk_masked>\d+)/$',
    login_required(DetailViewFilteredOnUser.as_view( model=Pkg,
                        template_name='pkgs/detail.html'
                        )), 
    name='detail'), 
```

所以问题是，如果我的 urlconf 中的命名组是“pk”，那么一个被屏蔽的主键（因为被屏蔽的键是 url 中的内容）被发送到 DetailView。如果我的 urlconf 中的命名组是“pk_masked”，那么我需要在`pk=mask_toggle(pk_masked)`某个地方做，我不知道在哪里或如何做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:27:32.147

如果我正确理解了您的问题，则需要覆盖`get_object`（这`get_queryset`几乎无关紧要，但为了清楚起见，您仍然可以使用它）。就像是：

```
class DetailViewFilteredOnUser(DetailView):
    model = Pkg
    template_name = 'pkgs/detail.html'
    def get_queryset(self):
        return super(DetailViewFilteredOnUser, self).get_queryset().filter(user=self.request.user)
    def get_object(self):
        return self.get_queryset().get(pk=mask_toggle(self.kwargs.get("pk_masked")) 
```

（当然，不要忘记捕捉异常，为了清晰和简洁，我把它省略了。）

# java - 如何在 Struts 2 中捕获默认拦截器堆栈抛出的异常？

> ID：16213900
> 
> 赞同：-4
> 
> 时间：2013-04-25T11:46:52.257
> 
> 标签：java, exception, struts2, action-mapping

如何在 Struts 2 中捕获默认拦截器堆栈抛出的异常？

**异常消息：**

```
There is no action mapped for action name `index`. 
```

如何捕获异常，因为我想定义我的处理方式？

```
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:475)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter.doFilter(StrutsPrepareFilter.java:82)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    com.zhanxiao.sys.PermissionFilter.doFilter(PermissionFilter.java:61)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.proces 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:17:33.187

抛出异常是因为请求使用的 URL 未正确映射到操作配置。要消除异常，您应该正确地将 URL 映射到操作或使用默认操作引用，如果未找到给定 URL 的操作，则会调用该引用。

您也可以使用通配符映射来映射一堆 URL，即使使用正则表达式模式匹配器也会找到您的操作，或者如果通过提供您的自定义实现来覆盖操作映射器的默认行为无济于事。

要处理来自您的操作代码和拦截器堆栈的异常，您可以在您的操作堆栈上使用[`exception`拦截器](https://struts.apache.org/core-developers/exception-interceptor.html)。它将通过全局异常映射帮助您处理什么样的异常，并定义实际处理异常的全局结果。请参阅链接，其中详细说明了如何使用异常处理制作默认包的详细信息和示例。

有一个选项可以扩展拦截器并覆盖异常处理机制，如文档中所述。

# javascript - 我可以使用 Google 图表工具创建重叠条形图吗？

> ID：16213906
> 
> 赞同：1
> 
> 时间：2013-04-25T11:47:14.490
> 
> 标签：javascript, google-visualization

我正在使用[Google Chart Tools](https://google-developers.appspot.com/chart/)为我的一些数据创建图表。我几乎仅限于可以在[Charts Gallery](https://google-developers.appspot.com/chart/interactive/docs/gallery)中找到的示例，并且找不到这样的重叠条形图示例（mspaint）：

![图表示例](https://i.stack.imgur.com/Md16Y.png)

是否可以使用 Google 图表工具创建这样的图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:03:27.643

这在 Google 图表工具中称为“堆积条形图”。要创建一个，您只需制作一个每行具有多个值的[BarChart](https://google-developers.appspot.com/chart/interactive/docs/gallery/barchart)并将`isStacked`选项设置为`true`. 示例结果：

![图表](https://i.stack.imgur.com/13hEX.png)

# iphone - 模拟光标并单击

> ID：16213907
> 
> 赞同：-3
> 
> 时间：2013-04-25T11:47:17.040
> 
> 标签：iphone, ios, ipad

我想在视图中的任何对象上模拟鼠标指针和单击事件。到目前为止，我能够模拟鼠标指针，即鼠标指针通过在视图上拖动来移动。现在我想在单击模拟鼠标指针的基础对象上触发点击事件。假设一个按钮。这个概念是关于手指鼠标的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:05:04.873

我接到你了，

1）`UITapGestureRecognizer`在鼠标指针上添加一个。

2）在tapgesture处理方法中，

得到指点，

```
CGPoint fingerlocation = [tap locationInView:self.view]; 
```

像这样制作一个fingerRect，

```
CGRect finderRect = CGRectMake(location.x - 5, location.y - 5, 10, 10); 
```

遍历 self.view 中的所有 uiview

```
 for (UIView *view in self.view.subviews) {
    CGRect frameOfTheView = view.frame;

    if(CGRectIntersectsRect(frameOfTheView, finderRect)){
        NSLog(@"clicked on view %@", view);
        return;
    }

} 
```

最后的方法是这样的，

```
-(void) handleTap:(UITapGestureRecognizer *) tap{

    //get the tapped point
    CGPoint location = [tap locationInView:self.view];
    CGRect finderRect = CGRectMake(location.x - 5, location.y - 5, 10, 10);

    for (UIView *view in self.view.subviews) {
        CGRect frameOfTheView = view.frame;

        if(CGRectIntersectsRect(frameOfTheView, finderRect)){
            NSLog(@"clicked on view %@", view);
            return;
        }

    }

} 
```

这样您就可以检测到被触摸的视图，具体取决于您可以调用所需方法的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:54:12.063

稍加修改并查看 KIF 测试框架：

[https://github.com/square/KIF/blob/master/Additions/UIView-KIFAdditions.m](https://github.com/square/KIF/blob/master/Additions/UIView-KIFAdditions.m) 这里是一个`UIView::tapAtPoint`方法&一个`_eventWithTouch`方法

在那里查看更多代码 .. 它并不是所有公开记录的 API，因此您可能会因此而被拒绝：D

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T12:03:03.443

您是否需要这样做才能运行 iOS 应用程序的自动化测试？如果是这样，这个线程很老，但有相关材料的链接。 [堆栈溢出 402389](https://stackoverflow.com/questions/402389/automated-testing-for-iphone)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-25T12:03:19.767

你不能直接模拟触摸！！！！这就是为什么会有测试之类的东西。您要么执行此操作（运行应用程序，单击并移动），要么不执行。

另外..它被称为触摸，而不是点击

# java - assertTrue 语句需要 intelliJ IDEA 中的静态导入？

> ID：16213910
> 
> 赞同：5
> 
> 时间：2013-04-25T11:47:20.747
> 
> 标签：java, junit, intellij-idea

我刚刚将我的项目从 Netbeans 转移到了 intelliJ IDEA，它是一个基于 junit 的测试项目。在netbeans中我使用的是语句

```
assertTrue("Message", conditionCustom()); 
```

它在没有任何额外导入的情况下工作。现在在 intelliJ 中使用相同的上述命令时，我必须导入文件

```
import static org.junit.Assert.assertTrue; 
```

有什么办法让我不需要在我的代码文件中写上面的行吗？否则我必须编辑我的所有文件才能获得有效的 assertTrue 语句。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T11:49:07.363

您要么必须添加静态导入，要么明确静态调用与哪个类相关联：

```
Assert.assertTrue("Message", conditionCustom()); 
```

我通常使用后者，因为我认为它更清晰。

Java 不会编译，除非它能够确定与该静态方法关联的类。

我猜也许您使用继承将该静态方法与您的测试相关联。

# lync-2010 - 通过脚本更改 Lync 的状态

> ID：16213916
> 
> 赞同：9
> 
> 时间：2013-04-25T11:47:31.323
> 
> 标签：lync-2010

是否可以通过脚本更改 Microsoft Lync 2010 的状态？

我想要在 Win XP 上运行的脚本，并在固定间隔后将状态更改为可用。尝试在互联网上搜索，但没有成功找到一个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-02T16:54:23.720

根据文档，Lync 二进制文件[不提供](http://technet.microsoft.com/en-us/library/gg398376.aspx)该功能。但是，您可以使用[Lync SDK](http://www.microsoft.com/en-us/download/details.aspx?id=18898)通过编写一个小型帮助应用程序（或将相关代码合并到您当前的应用程序中）来实现您想要的。

根据[Microsoft 论坛](http://social.technet.microsoft.com/Forums/en-US/ocspresenceim/thread/641e0e18-ec71-407f-948a-1187e75619e5/#07979927-841c-4901-b86d-7213d536fd78)中的 MVP ，这也不是开箱即用的。

但是，根据文档，像这样的 PowerShell 脚本应该能够做到这一点：

```
import-module "C:\Program Files (x86)\Microsoft Lync\SDK\Assemblies\Desktop\Microsoft.Lync.Controls.Dll"

$availability = [Microsoft.Lync.Controls.ContactAvailability]::Available

$contactInfo = new-object 'System.Collections.Generic.Dictionary[Microsoft.Lync.Model.PublishableContactInformationType, object]'
$contactInfo.Add([Microsoft.Lync.Model.PublishableContactInformationType]::Availability, 
                $availability)

$ar = $self.BeginPublishContactInformation($contactInfo, $null, $null)
$self.EndPublishContactInformation($ar) 
```

此脚本需要安装 Lync SDK 或 Lync SDK 可再发行组件。

大部分信息都是从[这里](http://msdn.microsoft.com/en-us/library/lync/hh243705%28v=office.14%29.aspx)获取的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-11T15:27:59.130

上面的帖子不起作用。需要更多的 DLL 模块。但是我在下面进行了以下更改，因此可以正常工作。然后你可以使用 TaskSch 让它自动运行。仍然需要安装 2010 Lync SDK。

将 15550 设置为“下班”而不是“离开”。更有用。

请参阅 - [http://blogs.technet.com/b/heyscriptingguy/archive/2012/08/11/weekend-scripter-use-the-windows-task-scheduler-to-run-a-windows-powershell-script。 aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2012/08/11/weekend-scripter-use-the-windows-task-scheduler-to-run-a-windows-powershell-script.aspx)

请注意，此代码不会检查 LYNC 是否已登录。如果不是，它将不会运行。

```
import-module "C:\Program Files (x86)\Microsoft Lync\SDK\Assemblies\Desktop\Microsoft.Lync.Controls.Dll"
import-module "C:\Program Files (x86)\Microsoft Lync\SDK\Assemblies\Desktop\Microsoft.Lync.Model.Dll"

# Obtain the entry point to the Lync.Model API
$client = [Microsoft.Lync.Model.LyncClient]::GetClient()

$self = $client.Self;

#Set Details of Personal Note and Availability
#Useful availability codes for use below - 3500 Available, 15500 Away (converted to "Off Work" in this script by setting activity ID), 6500 Busy, 9500 Do not disturb, 12000 Be Right Back) 
$availability = 3500
$date = [DateTime]::Now
$message = "Remote Work. UK Time +5 hours EST (US), -5.5 IST (India). Availability script last run $date"

#Publish personal note and presence availability of the local user
$contactInfo = new-object 'System.Collections.Generic.Dictionary[Microsoft.Lync.Model.PublishableContactInformationType, object]'
$contactInfo.Add([Microsoft.Lync.Model.PublishableContactInformationType]::PersonalNote, 
            $message)
$contactInfo.Add([Microsoft.Lync.Model.PublishableContactInformationType]::Availability, 
            $availability)
If ($availability -eq 15500) {$contactInfo.Add([Microsoft.Lync.Model.PublishableContactInformationType]::ActivityId, 
            "off-work")}

$ar = $self.BeginPublishContactInformation($contactInfo, $null, $null)
$self.EndPublishContactInformation($ar) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-09T23:34:08.890

好的 - 这就是我所做的

1.  安装 2013 SDK（这也适用于 Skype for Business 顺便说一句）
2.  使用上面 Pete 的代码，除了将程序集目录更改`C:\Program Files (x86)\Microsoft Office\Office15\LyncSDK\Assemblies\Desktop\` 为
3.  我必须为每个页面添加配置文件（以管理员身份运行[http://tfl09.blogspot.com/2010/08/using-newer-versions-of-net-with.html](http://tfl09.blogspot.com/2010/08/using-newer-versions-of-net-with.html)
4.  更改 Pete 脚本中的消息
5.  使用任务计划程序自动化`.ps1`脚本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-19T17:41:44.420

对于 Lync 2013，此 PowerShell 脚本有效。您需要先安装[Lync 2013 SDK](https://www.microsoft.com/en-gb/download/confirmation.aspx?id=36824)。SDK 安装程序可能会说您需要安装 Silverlight 4，但不必担心，这不是必需的。

```
Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope Process -Confirm:$false
Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope CurrentUser -Confirm:$false

Import-Module "C:\Program Files\Microsoft Office\Office15\LyncSDK\Assemblies\Desktop\Microsoft.Lync.Model.dll"
Import-Module "C:\Program Files\Microsoft Office\Office15\LyncSDK\Assemblies\Desktop\Microsoft.Lync.Controls.dll"

$client = [Microsoft.Lync.Model.LyncClient]::GetClient()

$availability = [Microsoft.Lync.Controls.ContactAvailability]::Away

$contactInfo = (New-Object "System.Collections.Generic.Dictionary[Microsoft.Lync.Model.PublishableContactInformationType,object]") -As "System.Collections.Generic.IEnumerable[System.Collections.Generic.KeyValuePair[Microsoft.Lync.Model.PublishableContactInformationType,object]]"
$contactInfo.Add([Microsoft.Lync.Model.PublishableContactInformationType]::Availability, $availability)

$ar = $client.Self.BeginPublishContactInformation($contactInfo, [System.AsyncCallback]$null, [object]$null)
$client.Self.EndPublishContactInformation($ar) 
```

这会将状态设置为“消失”，但您可以更改`[Microsoft.Lync.Controls.ContactAvailability]::Away`为此`[Microsoft.Lync.Controls.ContactAvailability]::None`状态以重置状态。

# java - 自定义对象是通过值传递还是在片段和活动中通过引用传递。？

> ID：16213919
> 
> 赞同：10
> 
> 时间：2013-04-25T11:47:43.747
> 
> 标签：java, android, android-intent, android-fragments, android-activity

你好 Java 和 Android 专家。我有一个问题。我正在制作一个基于 XMPP 的聊天应用程序。有几件事让我感到困惑。

我有一个名为 Room_Structure 的类，它实现了**Serializable**。这个类有一个名为**currentRoom**的对象。

如果我通过将它放在一个包中来在两个片段之间传递**currentroom**对象，它的工作正常并且令人惊讶的是它是通过引用传递的。我不知道这是为什么。它不应该这样。顺便说一句，我正在使用 Android 支持库？

但是，如果我使用捆绑包在活动之间传递该**currentRoom**对象并将该捆绑包放入意图中，那么每当我尝试使用该意图启动新活动时，我都会遇到崩溃。

更多描述这里是代码

```
public class Room_Structure implements Serializable {

    private static final long serialVersionUID = 1L;
    private String Rname;
    private ArrayList<Message_Pattern> msg_list;
    private MultiUserChat XmppSession;
    private boolean Background;
    private boolean Modified;
    private boolean Destroyed;
} 
```

上面的类有构造函数以及getter 和setter。

**现在这是我在做什么：**

考虑一下 currentRoom 对象已经被填充，这就是我将它传递给 Fragment 的方式

```
 Bundle b = new Bundle();
    b.putSerializable("RoomObject", currentRoom);
    Fragment_Chat newChat = new Fragment_Chat();
    newChat.setArguments(b);
    FragmentManager fm = getChildFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ft.replace(R.id.fl_chatFragment, newChat);
    ft.addToBackStack(null);
    ft.commit(); 
```

像这样从 Fragment_Chat OnActivityCreated() 方法中检索它

```
Bundle extras = getArguments();
Room_Structure recievedRoom = (Room_Structure) extras.getSerializable("RoomObject"); 
```

现在，上面的代码对**Fragments**工作得很好。唯一的问题是对象的引用被传递给了新的片段。这不是它真正应该如何表现的。它应该只发送值而不是参考。

这是我如何知道对象是通过引用传递的

```
Sending Object : com.software.chat.Classes.Room_Structure@425585e8
Recieved Object: com.software.chat.Classes.Room_Structure@425585e8 
```

两者都有相同的参考或地址。**在调试**期间检查了它

 ****现在我无法在活动中复制这种行为**

我有一个包含 ExpandibleListView 的活动。我已经通过从 BaseExpandableListAdapter 扩展这个 Expandiblelistview 实现了适配器。此适配器类名称为 Websites_ListAdapter.java。它还在其构造函数中传递了活动的上下文。我在列表中做了一个可点击的布局。我想在点击时开始一项活动。请不要问我为什么这样做，这是一个很长的故事。我像这样从那个 Websites_ListAdapter 发送这个对象

```
Intent i=new Intent(ActivityContext, ChatScreen.class);
    Bundle b = new Bundle();
    b.putSerializable("RoomObject", currentRoom);
    i.putExtras(b);
    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    ActivityContext.startActivity(i); 
```

但是我在 Logcat 中得到这个错误这次我调用 ActivityContext.startActivity(i)

```
04-25 15:38:07.474: E/AndroidRuntime(10250): FATAL EXCEPTION: main
04-25 15:38:07.474: E/AndroidRuntime(10250): java.lang.RuntimeException: Parcelable encountered IOException writing 

serializable object (name = com.software.chat.Classes.Room_Structure)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Parcel.writeSerializable(Parcel.java:1279)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Parcel.writeValue(Parcel.java:1233)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Parcel.writeMapInternal(Parcel.java:591)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Bundle.writeToParcel(Bundle.java:1619)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Parcel.writeBundle(Parcel.java:605)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.content.Intent.writeToParcel(Intent.java:6814)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.ActivityManagerProxy.startActivity

(ActivityManagerNative.java:1910)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1415)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.Activity.startActivityForResult(Activity.java:3446)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.Activity.startActivityForResult(Activity.java:3407)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.support.v4.app.FragmentActivity.startActivityForResult

(FragmentActivity.java:817)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.Activity.startActivity(Activity.java:3617)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.Activity.startActivity(Activity.java:3585)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at com.software.chat.Adapters.Websites_ListAdapter$1.onClick

(Websites_ListAdapter.java:211)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.view.View.performClick(View.java:4211)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.view.View$PerformClick.run(View.java:17267)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Handler.handleCallback(Handler.java:615)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Looper.loop(Looper.java:137)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.lang.reflect.Method.invokeNative(Native Method)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.lang.reflect.Method.invoke(Method.java:511)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run

(ZygoteInit.java:1006)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at dalvik.system.NativeStart.main(Native Method)
04-25 15:38:07.474: E/AndroidRuntime(10250): Caused by: java.io.NotSerializableException: 

org.jivesoftware.smackx.muc.MultiUserChat
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1364)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeObjectInternal

(ObjectOutputStream.java:1671)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.defaultWriteObject

(ObjectOutputStream.java:368)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeObjectInternal

(ObjectOutputStream.java:1671)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
04-25 15:38:07.474: E/AndroidRuntime(10250):    at android.os.Parcel.writeSerializable(Parcel.java:1274)
04-25 15:38:07.474: E/AndroidRuntime(10250):    ... 24 more 
```

**我知道有很多方法可以在活动之间传递对象，但我想知道为什么会发生这种情况以及可序列化在后台做什么？**

非常感谢有关此问题的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:56:55.433

如果您查看[Bundle](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/os/Bundle.java#Bundle.putSerializable%28java.lang.String,java.io.Serializable%29)源代码，您会发现它使用 Map 来存储对象，并且仅在 Bundle 本身被序列化时才会序列化对象。

似乎 Bundle 在传递给片段时没有序列化。它可以是优化技巧或实现“错误”。

但是当你想开始新的活动时，Bundle 将被序列化而不是反序列化。这就是为什么您仅对活动有此例外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:04:37.720

不同之处在于，您不会像使用片段那样创建活动对象，而是要求系统执行它。您创建一个意图是为了要求系统创建活动，意图中的每一件事都被序列化，然后通过系统传递给新的活动。不可能同时创建两个共享同一个对象的活动。如果你真的需要相同的对象引用，你总是可以创建一个单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T09:32:02.553

问题在这里：

```
Caused by: java.io.NotSerializableException: 

org.jivesoftware.smackx.muc.MultiUserChat 
```

答案是：

```
public Class MultiUserChat implements Serializable 
```**

# jquery - MVC 自定义 DataAnnotation (RequiredAttribute) 未应用于选择元素

> ID：16213921
> 
> 赞同：0
> 
> 时间：2013-04-25T11:47:44.790
> 
> 标签：jquery, asp.net-mvc-3, select, validation, requiredfieldvalidator

我创建了一个名为“RequredWhen”的新RequiredAttribute 扩展。

它适用于文本框，但不适用于选择元素。出于某种原因，那些仅在回发而不是在客户端进行验证。“必需”下拉列表很好地验证了客户端，那么为什么“RequiredWhen”属性没有验证失败？

添加此属性时

```
[Required] 
```

你得到这个标记

```
<select class="customSelect input-validation-error" data-val="true" data-val-number="The field x must be a number." data-val-range="Please select the correct range" data-val-range-max="5" data-val-range-min="0" data-val-required="The x field is required." id="x" name="x"></select> 
```

这不会发生您添加自定义属性。在标记中，选择元素中缺少所有与验证相关的属性（如 data-val 等），但它们应用于输入字段。

我需要做些什么来强制验证对选择元素起作用吗？此外，我调试时 GetClientValidationRules 不包括这些元素。我确信这是问题的一部分。

我的属性扩展了RequiredAttribute，它适用于选择元素，所以我不确定为什么它们被排除在我的实现之外。有任何想法吗？

这是我的 javascript，它适用于其他元素。：

```
 jQuery.validator.unobtrusive.adapters.add('requiredwhenchecked', [ 'otherproperty', 'checkedproperty', 'otherpropertyvalue' ],function (options) {
    // simply pass the options.params here
    options.rules['requiredWhenChecked'] = options.params;
    }
);

jQuery.validator.addMethod('requiredWhenChecked', function (value, element, params) {
    return true;
}, ''); 
```

除了“选择”属性之外，有一些东西可以让这一切都很好地工作。

我认为我的问题可能与[这个](http://aspnet.codeplex.com/workitem/7629)和[这个](https://stackoverflow.com/questions/6116764/unobtrusive-dropdown-validation-in-mvc-3)似乎还没有解决方案的案例有关

* * *

**更新** 没有解决方案，但有一种解决方法，我在[这里](https://stackoverflow.com/questions/4799958/asp-net-mvc-3-unobtrusive-client-validation-does-not-work-with-drop-down-lists/8102022#8102022)找到了！祝遇到这个讨厌问题的人好运

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:44:15.580

> 属性类本身没有什么值得一提的，它扩展了 RequiredAttribute 并且应该类似地工作，不是吗？

不，当然不是。必需属性[`RequiredAttributeAdapter`](http://msdn.microsoft.com/en-us/library/system.web.mvc.requiredattributeadapter%28v=vs.108%29.aspx)在元数据提供程序中具有与之关联的对应属性。如果您希望客户端验证适用于您的自定义属性，您应该编写自定义适配器（通过派生自`DataAnnotationsModelValidator<RequiredWhen>`）或让您`RequiredWhenAttribute`实现[`IClientValidatable`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable%28v=vs.98%29.aspx)接口。

您可以查看[`MVC Foolproof Validation`](http://foolproof.codeplex.com/)验证框架的源代码以了解这是如何完成的。我写了一个例子[`here`](https://stackoverflow.com/a/4784986/29407)。

# android - 使 javascript 注入与 api 16 兼容

> ID：16213928
> 
> 赞同：2
> 
> 时间：2013-04-25T11:48:07.950
> 
> 标签：android, android-webview

我正在构建一个必须与 api 14 及更高版本兼容的 android 应用程序。我在 javascript 界面中有 1 个方法。

从 api 17 开始，您必须向方法添加注释`@JavascriptInterface`，但是向后 api 不支持注释，因为该应用程序是 api 14 的目标，所以出现错误。但如果我不添加注释，则在 Android 4.2 的移动设备中不会触发 javascript。

如果 deviceOs 比 4.2 更新，是否可以制作 ifdef？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:55:08.507

将您的构建目标设置为 API 级别 17。将您设置`android:minSdkVersion`为您想要支持的 Android 版本。然后您的代码将编译*并*具有`@JavascriptInterface`注释。Lint 会在代码中指出您使用的类、方法等比您`android:minSdkVersion`的 .

或者，将您的值设置`android:targetSdkVersion`为 16 或更低，在这种情况下`@JavascriptInterface`不需要。请参阅[http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)。

# c# - 使所有表单都可以访问表单功能

> ID：16213929
> 
> 赞同：1
> 
> 时间：2013-04-25T11:48:12.907
> 
> 标签：c#, forms, function, public-method

我有这个功能`Form1`，我想使用相同的功能`Form2`，`Form3`等等，而不是在每个表单上重复这个功能有什么方法可以让所有人都可以访问它？我试图创建一个新的`Class : Form`，然后从表单中调用该函数，但没有工作......

```
public void tb_Leave(object sender, EventArgs e)
{
    if ((sender as TextBox).Text.Count() < (sender as TextBox).MaxLength)
        (sender as TextBox).Text = (sender as TextBox).Text.PadLeft((sender as TextBox).MaxLength, '0');
} 
```

**更新**

感谢您的回答，它们工作正常，但是如果我想对 X 文本框使用相同的方法怎么办？（就像我对 tb_Leave 函数所做的那样）

我的意思是，使用我的旧方法，我只需选择 X 文本框并将离开事件发送到我的函数，就像你提到的那样，我需要创建一个方法来调用辅助类中的另一个方法......但我仍然需要创建一个方法在每个表格中，调用那个类，对吗？虽然，您的答案实际上非常有帮助，因为我只需要使用我的所有帮助程序类创建一个新的 .cs 文件:)

**更新 2** 我在迁移此方法时遇到问题

```
public static void TextBoxKeyDown(this TextBox tb, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Enter:
            case Keys.Add:
                e.SuppressKeyPress = true;
                processTabKey(true);
                break;
            case Keys.Decimal:
                if (tb.Tag == "importe")
                {
                    e.SuppressKeyPress = true;
                    processTabKey(true);
                }
                break;
            case Keys.Subtract:
                e.SuppressKeyPress = true;
                processTabKey(false);
                break;
        }
    } 
```

当然我知道`processTabKey();`只会在活动形式上工作，但是如何让它在`Form`课堂之外工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:54:23.990

这是您的代码的真正简化版本。要创建一种可在任何地方重用的方法，请创建一个新的 Utility.cs 文件，其中包含一个简单的静态类

```
namespace MyApp.Utilities
{
    public static class MyUtility
    {
        public static void PadForTextBox(TextBox tb)
        {
            if (tb.Text.Length < tb.MaxLength)
                tb.Text = tb.Text.PadLeft(tb.MaxLength, '0');
        }
    }
} 
```

现在，您可以从每个表单中调用此方法，这些表单引用了您定义类的命名空间。

```
public void tb_Leave(object sender, EventArgs e)
{
    Utility.PadForTextBox(sender as TextBox);
} 
```

实现相同结果的另一种优雅方法是通过 TextBox 的扩展方法

```
namespace MyApp.Utilities
{
    public static class TextBoxExtensions
    {
        public static void PadForTextBox(this TextBox tb)
        {
            if (tb.Text.Length < tb.MaxLength)
                tb.Text = tb.Text.PadLeft(tb.MaxLength, '0');
        }
    }
} 
```

并调用它

```
public void tb_Leave(object sender, EventArgs e)
{
    (sender as TextBox).PadForTextBox();
} 
```

顺便说一句，使用这些方法可以让你摆脱丑陋的演员阵容。

当然，您的 tb_Leave 方法是一个事件处理程序，因此它应该链接到文本框。
如果您希望应用程序中的每个文本框都有一个通用的文本框事件处理程序，独立于创建文本框的表单，那么您不能依赖 WinForm 设计器，但您需要手动将事件处理程序添加到您的文本框中在 InitializeComponent 调用之后形成构造函数。总而言之，我更愿意将此任务留给设计人员，并在需要时添加上面的单行。例如：

```
InitializeComponent();
// connect the leave event for 3 textboxes to the same static method inside the
// MyUtility static class
textBox1.Leave+=MyUtility.PadEventForTextBox;
textBox2.Leave+=MyUtility.PadEventForTextBox;
textBox3.Leave+=MyUtility.PadEventForTextBox;

.....

public static void PadEventForTextBox(object sender, EventArgs e)
{
    TextBox tb=sender as TextBox;
    if (tb.Text.Length<tb.MaxLength)
        tb.Text=tb.Text.PadLeft(tb.MaxLength, '0');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:04:37.883

创建一个新的辅助静态类，如：

```
using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Text;
        using System.Windows.Forms;

public class HelperClass
{
    public static void LeaveMethos(object sender, EventArgs e)
    { 
        if ((sender as TextBox).Text.Count() < (sender as TextBox).MaxLength)
            (sender as TextBox).Text = (sender as TextBox).Text.PadLeft((sender as TextBox).MaxLength, '0');
    }
} 
```

并在您的文本框中的离开事件中调用它：

```
HelperClass.LeaveMethos(sender, e); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:53:47.817

有一个 Helpers.cs 文件（或任何你喜欢的文件），并创建一个 Helper 方法，例如：

```
Yournamespace.Helpers
{
    public string GetTextBoxText(TextBox sender)
    {
        if (sender.Text.Count() < sender.MaxLength)
        return sender.Text.PadLeft(sender.MaxLength, '0');
    }
} 
```

然后只需在表单中包含命名空间并使用它：

```
public void tb_Leave(object sender, EventArgs e)
{  
   TextBox textBox = sender as TextBox
   textBox.Text = GetTextBoxText(textBox);
} 
```

# c# - Regex.Split 创建新行

> ID：16213937
> 
> 赞同：0
> 
> 时间：2013-04-25T11:48:41.497
> 
> 标签：c#, regex, winforms, newline

基本上是在导入或添加数据时尝试在列表框中创建一个新行。例如，地址需要换行

```
2
example road
example 
```

此时，它以一行而不是 3 行显示该项目。

```
private void txtPhrase_SelectedIndexChanged(object sender, EventArgs e)
{
    foreach (string s in Regex.Split("", "\r\n"))
        txtPhrase.Items.Add(s);
} 
```

不确定将什么作为字符串输入？因为有不同的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:16:10.517

列表框不支持将单个列表项拆分为多行的功能。您可能需要考虑在表单上使用单独的项目或不同的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:52:48.423

输入是 Regex 正在接收的字符串的名称。它会是这样的：

```
string[] values = new string[] { "2", "example road", "example" };

foreach (string stringvalue in values)
{
 string[] ResultRegex= Regex.Split(stringvalue, "pattern");
} 
```

顺便说一句，我认为你不需要正则表达式，你需要使用 String.Split()。例如：

```
string[] splitedValues = values.Split('\r\n'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:55:12.157

只是一个想法不知道它是否有效，但我使用 - Environment.NewLine -

```
String.Format(" after this text a new line {0}",Environment.NewLine) 
```

# search - 我们如何向共享点搜索服务发送请求？

> ID：16213939
> 
> 赞同：0
> 
> 时间：2013-04-25T11:48:50.647
> 
> 标签：search, service, request, sharepoint-2013

有人可以向我解释我们如何向共享点搜索服务发送请求吗？我将在 sharepoint 2013 上开始开发。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:58:33.127

如果你想使用 rest api 那么你可以下载以下搜索工具 [http://blogs.msdn.com/b/nadeemis/archive/2012/11/10/sharepoint-2013-search-query-tool-released-on -codeplex.aspx](http://blogs.msdn.com/b/nadeemis/archive/2012/11/10/sharepoint-2013-search-query-tool-released-on-codeplex.aspx)

您输入这些值，您将获得其余的 api 查询。要使用搜索客户端对象模型，请点击以下链接

[http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2012/09/10/how-to-query-search-with-the-sharepoint-2013-client-object-model.aspx](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2012/09/10/how-to-query-search-with-the-sharepoint-2013-client-object-model.aspx)

希望能帮助到你

# uiviewcontroller - Cocos2d + UIViewController 切换

> ID：16213940
> 
> 赞同：2
> 
> 时间：2013-04-25T11:48:53.427
> 
> 标签：uiviewcontroller, cocos2d-iphone

它是一款带有 cocos2d 2.1 beta 的游戏。

我使用了按下按钮时出现的单独的 viewController。当我在这两者之间快速切换时，有时游戏会挂起……不会崩溃……fps标签有效。像stopAnimation这样的东西..

我的代码有什么问题？如何避免挂起？只有在快速切换时。

```
-(void)showNativeView
{
    UIViewController *controller = [[UIViewController alloc] init];
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

    [[app navController] presentModalViewController:controller animated:NO];
    [UIView animateWithDuration:1.0
                     animations:^{controller.view.alpha = 1.0;}];

    [controller release];
}

-(void)gotoGameAgain
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

    [app navController].modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [[app navController] dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T23:55:33.120

单击按钮时，您真的需要启动 UIViewController 吗？如果您只启动一次并且在单击按钮时使用它可能会更好。每次单击按钮时启动它可能会在快速切换期间产生一些性能问题......

# java - 如何计算算术表达式（字符串）并返回答案？

> ID：16213942
> 
> 赞同：0
> 
> 时间：2013-04-25T11:48:55.687
> 
> 标签：java, string

我知道如何计算没有变量的简单表达式。但是怎么办，当我们用“x”表达时呢？例如

```
(x+1)*(x-1) 
```

在这个示例程序中应该返回：x^2 - 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:55:26.020

这是一项不平凡的努力。我强烈建议你看看外面有什么。例如[Symja](https://code.google.com/p/symja/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:02:20.450

您所要求的是让程序转换（并可能解决）数学方程。这当然是可能的，并且有一些工具和 API 可以做到这一点，但这绝对超出了你自己破解 Java 程序的范围。

如果您只想计算给定公式的结果，那么这是可行的。有趣的是，您只需向 Google 抛出一个方程式（例如 (5 + 3) * (8-4)），它就会为您提供结果。那么，为什么不直接使用它呢？;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:00:13.670

您可能想查看 java 的脚本功能。您似乎可以使用此脚本引擎从 Java 执行 Javascript（或其他脚本语言）。

您可以在[https://today.java.net/pub/a/today/2006/04/11/scripting-for-java-platform.html](https://today.java.net/pub/a/today/2006/04/11/scripting-for-java-platform.html)找到一些示例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-26T09:10:45.173

当我们去面试时，他们会问这种合乎逻辑的问题。我遇到了同样的问题。但我无法成功面试，因为这类问题。后来我在网上搜索后找到了自己的结果。都想做这个的朋友。。

按照这个操作。我会给这个完全免费的。

# 我将输入等式作为字符串 Like。

a*b*c+d/mx。

将此方程作为字符串对象。并使用以下功能。#

```
public void calc() throws IOException
{
    String equation,store,get;

    StringBuilder sb= new StringBuilder();
    DataInputStream dis= new DataInputStream(System.in);
    System.out.println("Enter the equation");
    equation= dis.readLine();
    equation="%"+equation+"%";
    byte[] buf= equation.getBytes();
    for(int i=0;i<equation.length();i++)
    {
        if(buf[i]>=97&&buf[i]<=122)
        {
            System.out.println("Enter the value for "+(char)buf[i]);
            get=dis.readLine();
            sb.append(get);
        }
        else
            sb.append((char)buf[i]);
    }
    store= sb.toString();

    char[] buf1= new char[25];

    for(int i=0;i<store.length();i++)
    {
        buf1[i]=store.charAt(i);          
    }
    for(int i=0;i<buf1.length;i++)
    {
        no.append(buf1[i]);
    }
    System.out.println(no.toString());
    int m,n=0;
    for(int i=0;i<no.length()-1;i++)
    {
        if('/'==no.charAt(i))
        {
            leftCount=rightCount=0;
            m=findLeftValue(i-1) / findRightValue(i+1);
            no.replace(i-leftCount, i+rightCount+1, String.valueOf(m));
            i=0;  
        }          
   }

    for(int i=0;i<no.length()-1;i++)
    {
        if('*'==no.charAt(i))
        {
            leftCount=rightCount=0;
            m=findLeftValue(i-1) * findRightValue(i+1);
            no.replace(i-leftCount, i+rightCount+1, String.valueOf(m));
            i=0;  
        }          
   }
    for(int i=0;i<no.length()-1;i++)
    {
        if('+'==no.charAt(i))
        {
            leftCount=rightCount=0;
            m=findLeftValue(i-1) + findRightValue(i+1);
            no.replace(i-leftCount, i+rightCount+1, String.valueOf(m));
            i=0;  
        }          
   } 
     for(int i=0;i<no.length()-1;i++)
    {
        if('-'==no.charAt(i))
        {
            leftCount=rightCount=0;
            m=findLeftValue(i-1) - findRightValue(i+1);
            no.replace(i-leftCount, i+rightCount+1, String.valueOf(m));
            i=0;                 
        }          
   }
    for(int i=0;i<no.length();i++)
    {
        if('%'==no.charAt(i))
        {
            no.deleteCharAt(i);
            i=0;
        }
    }
    System.out.println(no.toString());

}
public int findLeftValue(int i)
{
    StringBuilder sb= new StringBuilder();
    int x=0;
    while(no.charAt(i)!='*'&&no.charAt(i)!='+'&&no.charAt(i)!='-'&&no.charAt(i)!='/' &&no.charAt(i)!='%')
    {
          leftCount++;
          sb.insert(0, no.charAt(i));
          i--;
    }          
     x=Integer.parseInt(sb.toString());
    return x;
}
 public int findRightValue(int i)
{
    StringBuilder sb= new StringBuilder();
    int x;            
    while(no.charAt(i)!='*'&&no.charAt(i)!='+'&&no.charAt(i)!='-'&&no.charAt(i)!='/' &&no.charAt(i)!='%')
    {        
        rightCount++;
        sb.append(no.charAt(i));            
        i++;
    }     
    x=Integer.parseInt(sb.toString());
    return x;
} 
```

这里可能有未使用的变量。请找到并删除它。我没有为计算设置任何偏好。只是我随波逐流。如果你改变流程，答案会有所不同。所以，请记住。你也可以对不同的运营商做同样的事情。还有一件事是，请在继续执行函数之前验证方程。因为，它不会检查方程是否正确。(a+*d++c)。这不是正确的方程式。方程应该是正确的格式.. 像 a+b*cd/x。

享受..打破面试并获得正确的工作..

# browser - window.onerror 不会捕获所有错误

> ID：16213943
> 
> 赞同：0
> 
> 时间：2013-04-25T11:48:57.563
> 
> 标签：browser, error-handling

出于某种原因，我能够捕获除“不安全的 JavaScript 尝试使用 URL 访问框架”之外的所有控制台错误。有谁知道为什么该错误被过滤？

我的代码：

```
window.onerror = function(message) { alert(message); return true; }; 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:56:47.423

> **可能重复：**
> 
> *   [显示 Javascript“同源策略”违规](https://stackoverflow.com/questions/7270637/display-javascript-same-origin-policy-violations)
> *   [在 Javascript 中捕获同源异常？](https://stackoverflow.com/questions/4318658/catching-same-origin-exception-in-javascript)

我不确定这是否是检测[同源策略](http://code.google.com/p/browsersec/wiki/Part2#Same-origin_policy)违规的方法，因为`window.onerror`唯一会捕获*运行时 JS 错误*（请参见[此处](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)）。

对于`error`事件的跨浏览器兼容性，您可以查看：

[http://www.quirksmode.org/dom/events/error.html](http://www.quirksmode.org/dom/events/error.html)

# automation - 如何从 citrix 中获取数据

> ID：16213944
> 
> 赞同：1
> 
> 时间：2013-04-25T11:48:58.173
> 
> 标签：automation, citrix

这是我希望能够做到的：

在我的本地计算机上运行一个程序，该程序登录到一个 citrix 服务器（使用 citrix 接收器或以类似方式这样做），在 citrix 会话中的服务器上打开一个 Web 浏览器，加载一个网站，然后带上那个 html站点退出 citrix 会话并回到我的本地计算机上。基本上我想从 citrix 远程会话中获取数据。

如何以编程方式执行此操作？

无论您使用哪种编程语言/方式来回答问题，我都很好。

我对 citrix api 进行了一些研究，但是当我发现一些关于登录甚至发送击键和鼠标点击的事情时，我发现没有关于获取数据的信息。我可以登录然后使用像wireshark这样的程序来获取信息，但我猜它都是加密的（另外我不会以编程方式完成我的任务）。我知道至少有一个开源程序似乎能够替换 citrix 接收器/客户端（openthinclient.org），但在我深入研究其所有源代码以尝试回答我的问题之前，我想我会在这里问如果有人有一个更简单的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T11:51:12.070

如果您想要的只是自动化任务，是否有必要让程序充当 citrix 客户端？

我假设您在 citrix 会话中没有安装权限，因此无法安装许多可用的自动化工具之一（例如[http://docs.seleniumhq.org/](http://docs.seleniumhq.org/)）？

鉴于上述...

如果您在本地机器上有/允许 java，请查看[http://www.sikuli.org/](http://www.sikuli.org/)

这个和我遇到的其他自动化工具之间的主要区别在于，Sikuli 使用屏幕上的图像来导航 gui，而不是抓取对小部件的调用（这在 citrix 会话中不起作用）。

因此，假设您可以截取 citrix 会话的屏幕截图，它可能对您有用。

# php - codeigniter 添加 facebook 作为注册选项

> ID：16213945
> 
> 赞同：0
> 
> 时间：2013-04-25T11:48:58.880
> 
> 标签：php, codeigniter

我正在使用自己的注册程序在在线商店网站上工作。用户通过选择唯一的用户名和密码以及电子邮件地址在我的网站上注册。现在我希望将 facebook 注册选项也集成到我的网站中。我有以下问题：

1.  我如何保持 facebook 注册过程与我现有的兼容。例如，无论哪种情况，我都需要以下注册数据。如果有人点击**facebook 登录**按钮，我如何捕获这些附加信息？如果用户拒绝我的许可，如果某些功能需要，我该如何再次请求？
    *   名字和姓氏
    *   注册的电子邮件地址
    *   唯一的用户名
    *   完整的出生日期
2.  如果已经拥有本地网站注册的用户也尝试使用 facebook 登录怎么办？在这种情况下应该怎么做？
    *   是否应该创建一个新帐户并将其链接到本机帐户？
    *   本地帐户是否应该转换为 facebook 帐户？
3.  我试图寻找很多带有演示的教程，但我找不到任何好的教程。如果有人知道一个好的教程/演示，请赐教。我正在寻找以下教程/演示：
    *   可以部署在本地进行测试。
    *   演示原生注册 + facebook 注册
    *   建立在codeigniter之上。

阿西姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:00:49.787

首先，你必须创建一个 facebook 应用程序，谷歌如何创建一个，只要我认为我不认为你被允许在 facebook 上注册用户。一旦您在 facebook 创建应用程序，并根据提供给 facebook 应用程序的权限，一旦获得用户授权，您就可以提取用户的详细信息。

对于您的第二个答案，您不必切换帐户，为 facebook 电子邮件 ID 创建一个字段，因此，您必须检查两个登录条件。您可以在用户注册时执行“使用 facebook 注册”之类的操作。

对于 codeigniter facebook 集成，请检查以下 a3m auth 模块，

[A3M – CodeIgniter 帐户身份验证和授权模块安装](http://blog.biernacki.ca/2010/11/a3m-a-codeigniter-account-authentication-authorization-module-installation/)

# string - 检测是否可以在 Lua 中打印变量

> ID：16213948
> 
> 赞同：4
> 
> 时间：2013-04-25T11:49:15.930
> 
> 标签：string, types, lua

我有一个变量，它可以是多种类型——有时是字符串，有时是数字、表格或布尔值。我每次都尝试像这样打印出变量的值：

```
print("v: "..v) 
```

成为我的`v`变量。问题是，当我得到一个无法连接的值时，我得到这个错误：

> myscript.lua:79：尝试连接表值

我已尝试将其更改为此，以防它设法检测是否可以打印变量：

```
print("v: "..(v or "<can't be printed>")) 
```

但我在那里遇到了同样的问题。是否有某种函数可以用来确定变量是否可以连接到字符串，或者是打印出变量的更好方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T11:52:01.527

您可以将这些值作为单独的参数提供来打印：

```
print("v:", v) 
```

这将打印类似

```
v:  table: 006CE900 
```

不一定是最有用的，但如果仅用于调试目的，则比崩溃要好。

[有关更有用的表格打印的信息，请参见此处。](http://lua-users.org/wiki/TableSerialization)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-01T09:08:07.463

tostring(v) 适用于所有可能的 v 值（包括 nil）。所以把你的行写成：

打印（“v：”..tostring（v））

将永远有效。

或者，您可以查看 type( v ) ，如果它的“字符串”打印它，否则打​​印其他内容（如果这是您想要的）。

# maven - 将 android ndk 依赖项部署到 maven 存储库

> ID：16213953
> 
> 赞同：5
> 
> 时间：2013-04-25T11:49:18.847
> 
> 标签：maven, android-ndk, android-maven-plugin

我有一个依赖于第三方、仅二进制 JNI 库的 android 项目。使用 ant，我只需将 .so 放在 libs/ 中，将标头放在 jni/ 中即可。

但是，我的其余 android 项目使用 maven，我希望能够将这个库集成到我现有的基于 maven 的项目中，就像我将任何其他库一样（即带有一个`<dependency />`条目，库自动从公司服务器下载） .

我尝试使用`mvn deploy:deploy-file`with`-Dpackaging=so`和手动上传 .so 文件`-Dclassifier=armeabi`，并以 zip 格式上传标头并使用 .so 进行部署`-Dpackaging=har`。但是 NDK 仍然无法检测到库和标头。

我的 Android.mk 是

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := test
LOCAL_LDLIBS := -llog
LOCAL_SHARED_LIBRARIES := my-dependency
LOCAL_SRC_FILES := test.cpp
include $(BUILD_SHARED_LIBRARY) 
```

以及我的 pom 中的依赖

```
<dependency>
    <groupId>com.thirdparty.my-dependency</groupId>
    <artifactId>my-dependency</artifactId>
    <version>1.0</version>
    <classifier>armeabi</classifier>
    <type>so</type>
</dependency> 
```

在 maven for android 中部署这样的第三方库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T06:50:56.263

在对样本进行了一些修改后，我设法让它编译。

部署很好，但事实证明我需要添加

```
LOCAL_SHARED_LIBRARIES := $(ANDROID_MAVEN_PLUGIN_LOCAL_SHARED_LIBRARIES)
include $(BUILD_SHARED_LIBRARY)
include $(ANDROID_MAVEN_PLUGIN_MAKEFILE) 
```

到应用程序的`Android.mk`

# android - Android如何重新创建片段视图

> ID：16213955
> 
> 赞同：4
> 
> 时间：2013-04-25T11:49:28.333
> 
> 标签：android, view, fragment, recreate

我有一个 Android 片段。当我创建视图时，我用模型中的值填充布局中的字段。在某一时刻，我想使用相同的类模型但使用其​​他值重新创建视图。

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater
                .inflate(R.layout.item_view, container, false);
        editText = (EditText) v.findViewById(R.id.question_text);
        questionText.setText(myModel.getName());
            ---------------
} 
```

我有一个私有函数，它会在点击视图时调用

```
private void recreateView(MyModel model){
   myModel = model;
 //here I want to recall onCreateView or something like that but I don't know if that is ok, or is a more simple way to do that
} 
```

# java - 命令“使用数据库名称”如何使用 java 代码

> ID：16213957
> 
> 赞同：0
> 
> 时间：2013-04-25T11:49:29.067
> 
> 标签：java, mysql, jdbc

我想制作一个程序，将excel文件中的数据存储在数据库中。我有很多数据库，所以在我的程序中，我必须选择将数据存储在哪个数据库中。我制作的代码能够将 mysql 与我的程序连接并显示可用的数据库。我现在想做的是说我将在哪个数据库中存储数据。更具体地说，我希望用户首先在他的客户端中查看可用的数据库，然后他将有机会说出数据将存储在哪个数据库中。谁能帮助我如何做到这一点？

查看所有可用数据库的代码如下：

```
Class.forName("com.mysql.jdbc.Driver");
        Connection con = (Connection) DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/", "root", "root");
        DatabaseMetaData meta = (DatabaseMetaData) con.getMetaData();
        ResultSet res = meta.getCatalogs();
        System.out.println("List of the databases: ");
        while (res.next()){
            System.out.println (" " +res.getString(1));
    } 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:54:24.910

我希望[这个 SO 链接](https://stackoverflow.com/questions/5679259/how-to-get-list-of-databases-schema-names-of-mysql-using-java-jdbc)可以帮助你。您可以从连接对象中获取所有数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:57:11.127

首先创建一个简单的连接

`Connection con = (Connection) DriverManager.getConnection( "jdbc:mysql://localhost:3306/", "root", "root");`

[在此处](http://www.javatpoint.com/example-to-connect-to-the-mysql-database)查找示例

看看他如何使用`ResultSet`Class 来访问结果。

现在，

从中检索信息，`information_schema.SCHEMATA`以便您可以查询

`SELECT schema_name FROM information_schema.SCHEMATA S;`

获取所有模式

接下来[从用户（可能来自控制台）获得选择后，您可以使用](http://www.mkyong.com/java/how-to-read-input-from-console-java/)[Connection#setCatalog()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#setCatalog%28java.lang.String%29)根据用户值设置数据库

如果您想要表信息，请使用此查询

`SELECT * FROM information_schema.TABLES T;`

它将列出所有模式中的所有表

# c - 使用“scanf()”的返回值来检查文件是否结束

> ID：16213959
> 
> 赞同：4
> 
> 时间：2013-04-25T11:49:32.690
> 
> 标签：c, file, scanf

我正在网上搜索如何使用scanf的返回值来检查文件的结尾！我找到了以下代码。但是我很难理解？

这种方法是如何工作的？

'~' 运算符是什么意思？

```
while(~scanf("%d",&n)) { 
  /* Your solution */
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T11:55:36.587

这是一种检查值是否不同于 -1 的可怕方法。`~x`返回 的按位否定`x`。因此，请记住用于负数的补充代码（顺便说一下，在**大多数编译器**上，这种方法甚至不是很便携）-1 由 1-s 的序列表示，因此`~(-1)`将产生一个零。

请不要使用这种方法。简单的写`scanf("%d", &n) != EOF`方式更容易理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:51:55.920

`~`是按位 NOT 运算符。因此，这是一种稍微模糊的循环方式，直到`scanf`返回非 -1 的值。换句话说，

```
while(~scanf("%d",&n)) 
```

相当于

```
while(scanf("%d",&n) != -1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:22:59.573

在 C 中，~ 是一个执行按位移位操作的运算符，它创建原始数字的补码。在C中没有布尔类型，0是假的，其他一切都是真的，在你的例子中：

```
while(~scanf("%d",&n)) { 
  /* Your solution */
} 
```

如果没有更多字符要读取，则 scanf() 返回 EOF，它等于 -1（不是在所有平台上！）所以 -1 由（111... 32 次在 32 位架构中）~EOF = 0 表示，因此有一个您编码的风险不适用于所有平台。

# javascript - 如何检查复选框列表是否在 Struts2 中至少被选中一个？

> ID：16213960
> 
> 赞同：0
> 
> 时间：2013-04-25T11:49:34.110
> 
> 标签：javascript, jquery, validation, struts2, checkboxlist

我正在使用 struts2 框架。我的代码中有一个复选框列表。

```
<div id="MyCheckbox">
    <td>
      <s:checkboxlist theme="simple" name="claimListView.claimStatus" list="#{'U':'Unprocessed', 'P':'Processed','R':'Routed','S':'Sent'}" id="claimStatus" required="true" value="defaultColor"/>
    </td>
</div> 
```

所以我希望这个字段成为必填字段。我的意思是用户应该至少选择一个复选框。否则应该抛出错误消息并阻止提交表单。我怎样才能做到这一点？

我在jquery中尝试过下面给出的代码。

```
var n = $("#MyCheckbox input:checked").length;
alert("The count is : "+n);
if (n>0) {
return true;
}
else{
return false;
} 
```

我知道我错过了一些东西。谁能帮助我，我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T11:56:06.297

最后我找到了我自己问题的解决方案。下面的脚本工作正常。

```
var n = $('input[name="claimListView.claimStatus"]:checkbox:checked').length;
if (n>0) {
return true;
}
else{
return false;
} 
```

# solr - 如果 WildcardQuery 不影响文档的评分，为什么它总是返回 0.5？

> ID：16213964
> 
> 赞同：0
> 
> 时间：2013-04-25T11:49:43.720
> 
> 标签：solr, lucene, elasticsearch, text-search

我在文档上使用 WildcardQuery，我看到所有结果文档的得分均为 0.5。我读到像 WildcardQuery 这样的查询不会影响文档的评分，现在我想知道得分为 0.5 的原因是什么。

我正在使用这个简单的查询：

```
WildcardQuery wq = new WildCardQuery("filed_name", "book"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:14:31.867

`WildcardQuery`肯定**会**影响得分。它使用 a [`CONSTANT_SCORE_AUTO_REWRITE`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/MultiTermQuery.html#CONSTANT_SCORE_AUTO_REWRITE_DEFAULT)，这可能是您所指的。这意味着与 WildcardQuery 匹配的每个字段对该匹配添加的分数都有相同的提升。然而，没有任何典型的相似性逻辑（例如 tf-idf）适用于 WildcardQuery 的匹配。

# angularjs - 有没有像角度初始化模块一样的东西？

> ID：16213966
> 
> 赞同：3
> 
> 时间：2013-04-25T11:49:44.410
> 
> 标签：angularjs

我可以在角度模块中加载一些数据吗？我尝试使用 .run() 但每当访问页面时都会调用它。例如：假设有 2 个 html 页面属于同一个模块：

```
TestPage1.html:
<html ng-app="myApp">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="js/angular.min.js"></script>
<script src="js/jquery-1.8.2.js"></script>
<script src="js/app.js"></script>
</head>
<body>
    <p><a ng-href="TestPage2.html">Go to Page2</a></p>
</body>
</html>

TestPage2.html:
<html ng-app="myApp">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="js/angular.min.js"></script>
<script src="js/jquery-1.8.2.js"></script>
<script src="js/app.js"></script>
</head>
<body>
    <p><a ng-href="TestPage1.html">Go to Page1</a></p>
</body>
</html>

app.js:
var myApp = angular.module('myApp', []);
var cnt = 0;
myApp.run(['$rootScope', '$http', function(scope, $http) {
if(scope.loggedIn == undefined || scope.loggedIn == null) {
    $http.get('rest/userData').success(function(data) {
        cnt++;
        alert(cnt);
        scope.loggedIn = true;
});
}
}]); 
```

当我从一个页面导航到另一个页面时，这个 .run() 被一次又一次地调用，cnt 为 1。是否有可能在模块初始化的生命周期中调用一次？或者其他方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:32:39.693

您似乎缺少一些基础知识，例如控制器。典型的角度设置是`ng-view`为您的应用程序设置一个并通过路由加载其他页面。这是一个简单的例子：

[http://beta.plnkr.co/edit/RnZWeWxTJFri49Bvw50v?p=preview](http://beta.plnkr.co/edit/RnZWeWxTJFri49Bvw50v?p=preview)

应用程序.js

```
var app = angular.module('myApp', []).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/view1', {templateUrl: 'TestPage1.html', controller: Page1Ctrl});
    $routeProvider.when('/view2', {templateUrl: 'TestPage2.html', controller: Page2Ctrl});

    $routeProvider.otherwise({redirectTo: '/view1'});
  }]).run(function () { // instance-injector

    alert('only run on first page load this is where you load data or whatever ONE time');  // this only runs ONE time
  })

 function MainCtrl($scope) {
  $scope.name = 'main';
}

function Page1Ctrl($scope) {
  $scope.name = 'page 1';
}

function Page2Ctrl($scope) {
  $scope.name = 'page 2';
} 
```

HTML：

```
<html ng-app="myApp" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <link rel="stylesheet" href="style.css">
  <script>document.write("<base href=\"" + document.location + "\" />");</script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
  This is the main page. Main nav:

   <a ng-href="#/view1">Go to Page1</a>&nbsp;&nbsp;
    <a ng-href="#/view2">Go to Page2</a>
 <div ng-view></div>
</body>
</html> 
```

您会注意到 html 中有一个`ng-view`，当遇到路由时，例如`#/view`routeprovider 会查找它并提供正确的模板并调用适当的控制器。我相信这是您想要实现的那种设置。

# html - AS3 .swf 文件上传到服务器时无法播放或预览

> ID：16213973
> 
> 赞同：0
> 
> 时间：2013-04-25T11:50:16.380
> 
> 标签：html, object, flash, embed, swfobject

需要帮助。

我有一个使用 AS3 创建的 Flash 游戏的 .swf 文件。我已使用对象标记将其添加到 HTML 文件中。当我在我的 MAC 上的浏览​​器窗口中本地测试文件时，它会播放 .swf 文件。该文件包含在与 html 文件相同的文件夹中。当我将它上传到服务器并在 FF/Chrome/Safari 上查看时，它只会显示白框。

以前我尝试使用 jquery swfobject，同样的问题。

我已经剥离了代码以承受 minimun 并习惯于在网上找到不同的示例并且没有运气。

代码示例：

```
<!DOCTYPE html>
<html>
<body>

<object
classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash /swflash.cab#version=8,0,0,0">
<param name="SRC" value="BodyShopGame.swf">
<embed src="BodyShopGame.swf"></embed>
</object>

<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" width="339" height="513">
<param name="movie" value="BodyShopGame.swf">
<embed src="BodyShopGame.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="339" height="513"></embed>

</object> 

</body>
</html> 
```

网站链接： http: [//www.stellacurley.com/flashtest.html](http://www.stellacurley.com/flashtest.html)

我也在PC上测试过，问题是一样的。我知道我忽略了一些明显的事情，但花了很长时间试图找出答案。我是新手，所以任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:59:00.433

白框通常表示电影加载失败。使用浏览器的开发人员控制台查看 SWF 请求是否返回 404（未找到文件）错误。

清单：

1.  确保您使用的是正确的 SWF 路径
2.  确保您的 SWF 已上传
3.  确保您的 SWF 名称正确（在某些服务器上区分大小写）
4.  确保您的服务器配置为托管 SWF 文件（`application/x-shockwave-flash`应启用 mime 类型）

# javascript - XDomainRequest 发布数据未显示

> ID：16213975
> 
> 赞同：1
> 
> 时间：2013-04-25T11:50:27.180
> 
> 标签：javascript, ajax, internet-explorer, xdomainrequest

我无法通过 Internet Explorer XDomainRequest 获取 POST 数据。简直什么都没有出现。。

我创造了一个[小提琴](http://jsfiddle.net/itimeheke/AV9vs/)

*parim.ee/test.php*只是打印出来`$_POST`，`$_REQUEST`变量如下：

```
header('Access-Control-Allow-Origin: *', true);
header("Access-Control-Allow-Headers: *", true);

echo "var_export(\$_POST):\n";
var_export($_POST);

echo "\n\n";

echo "var_export(\$_REQUEST):\n";
var_export($_REQUEST); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:17:01.843

**FOUND A SOLUTION:**

Instead of using `$_POST` i have to use `$HTTP_RAW_POST_DATA`.

# c# - 设置单个属性时无法设置级联属性工作正常

> ID：16213977
> 
> 赞同：0
> 
> 时间：2013-04-25T11:50:35.193
> 
> 标签：c#, .net

以下代码未设置该属性。它什么也不做，调试时只是向前跳，即使是 F11

```
job.TDataReference.CheckedOut = false; 
```

工作属于 TJob 类型，我使用以下属性构建自己的类：

```
public TDataReference TDataReference
{
    get
    {
        return new TDataReference(this.DataReference);
    }
    set { this.tDataReference = value; }
} 
```

TDataReference 也是我自己用属性构建的一个类：

```
public bool CheckedOut
{
    get { return (dataRow[CHECKEDOUT].ToString() == "True"); }
    set { dataRow[CHECKEDOUT] = value.ToString(); }
} 
```

和 DataRow 类型的私有成员 dataRow

有趣的是，以下代码可以正常工作并设置属性：

```
TDataReference dr = job.TDataReference;
dr.CheckedOut = false; 
```

谁能给我解释一下。

* * *

**更新**

* * *

非常感谢您的回答！我明白这个问题。:)

tDataReference 取决于 this.DataReference 中的值，因此可以设置 tDataReference 的最早时间是 this.DataReference 已知的时间。您如何考虑将其更改为：

```
private TDataReference tDataReference;

public TDataReference TDataReference
{
    get
    {
    if(tDataReference == null | tDataReference.Id != this.DataReference)
    {
        this.tDataReference = new TDataReference(this.DataReference);
    }        
    return this.tDataReference 
    }
    set { this.tDataReference = value; }
} 
```

然后设置级联属性工作吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:58:19.350

您的属性 getter 每次调用它时都会创建新实例。这段代码：

```
job.TDataReference.CheckedOut = false; // here you setting CheckedOut for the 1st instance of TDataReference
job.TDataReference.CheckedOut = false; // here you setting CheckedOut for the 2nd instance of TDataReference 
```

是这个伪代码的类似物：

```
var tDataRef1 = new TDataReference(job.DataReference);
tDataRef1.CheckedOut = false;

var tDataRef2 = new TDataReference(job.DataReference);
tDataRef2.CheckedOut = false; 
```

你不应该这样写属性，这违反了设计准则。考虑这种情况的结果：

```
job.TDataReference == job.TDataReference // false, ooops... 
```

为避免这种情况，请通过以下方式修复属性：

```
public TDataReference TDataReference
{
    get
    {
        return tDataReference;
    }
    set { this.tDataReference = value; }
}
// field initialization is optional here, you can omit it 
// or make lazy initialization in getter like this: 
// return tDataReference ?? (tDataReference = new TDataReference(this.DataReference));
private TDataReference tDataReference = new TDataReference(this.DataReference); 
```

# jquery - fancybox 加载正常...然后当页面完成加载时它被抛出并改变位置

> ID：16213981
> 
> 赞同：0
> 
> 时间：2013-04-25T11:50:59.047
> 
> 标签：jquery, css, fancybox, wordpress

我尝试使用 chromes 调试工具查看我网站的代码，以了解为什么会发生这种情况，但无济于事。

基本上。

我在 wordpress 中使用了 fancybox，这样当用户单击图像时，它会展开成一个漂亮的灯箱。

目前，如果我单击图像，页面仍在加载，fancybox 加载正常，但是一旦页面完成加载，fancybox 就会定位在右侧，并且覆盖仅显示在网站内容（不是整个浏览器屏幕）上，我想知道是否有是一种查看导致此问题的原因或是否有人知道修复方法的方法:(将不胜感激。

[http://bit.ly/17k4Ef1](http://bit.ly/17k4Ef1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:42:39.960

一般来说，设置`size`,`position` 和/或和标签不是一个好主意`margins`，而是使用包装容器。`body``html`

你的问题是因为`body`有

```
element.style {
    min-height: 100%;
    position: relative;
    top: 0;
} 
```

... css 属性。

删除它们作为测试，您会看到一切恢复正常。

# jenkins - 无法在詹金斯的可用插件列表中找到插件

> ID：16213982
> 
> 赞同：35
> 
> 时间：2013-04-25T11:51:02.733
> 
> 标签：jenkins, jenkins-plugins

我已经`Jenkins`通过将其 WAR 文件部署到`Tomcat`. 打字时

```
http://localhost:8080/jenkins 
```

在浏览器中，`jenkins`主页正在打开，这意味着`jenkins`安装成功。我配置了系统设置，给出了`jdk`Maven 路径并保存了它们。然后要安装插件，我点击 Jenkins->Manage plugins 并点击 Available 选项卡，但找不到任何插件。我尝试了三种解决方案：

1.  通过转到`Jenkins->Manage Plugins->Advanced`（未找到插件）为 Jenkins 配置代理

2.  重新启动服务器，刷新浏览器并转到`Jenkins->Manage plugins->Available`（仍然没有找到任何插件）。所以，我在某处读到，如果插件没有自动更新，我们会强制更新它们。因此，转到`Jenkins->Manage Plugins->Advanced`并单击“立即检查”选项卡（单击“可用”选项卡仍然没有找到任何插件）。

3.  最后我在某处读到，如果我们将 pluginGroup 'org.jvnet.hudson.tools' 添加到 maven 的 settings.xml 文件中，问题可能会得到解决。因此，在 settings.xml 中添加了相应的代码：

然后我又试了一次，但仍然找不到任何插件

```
Jenkins->Manage plugins->Available 
```

如果有任何其他解决方案可以解决此问题，请告诉我。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-01-27T12:03:46.430

转到：管理 Jenkins → 管理插件 → 高级，然后单击右下角的立即检查。当您返回可用选项卡时，应列出所有插件。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-01-15T12:41:44.953

在 Jenkins 的插件部分打开“高级设置”选项卡并将以下 URL 粘贴到更新服务器 URL 字段（在底部）：[https ://updates.jenkins.io/update-center.json](https://updates.jenkins.io/update-center.json)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-07-22T23:03:29.633

对我来说，以下工作：

转到管理 Jenkins-> 配置全局安全性

点击“使用浏览器下载元数据”复选框

我还禁用了安全性并防止未经检查的跨站点伪造。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-04-25T13:24:19.073

您可以手动强制更新插件列表。

这对我有用：

```
wget -O default.js http://updates.jenkins-ci.org/update-center.json
sed '1d;$d' default.js > default.json
curl -X POST -H "Accept: application/json" -d @default.json http://localhost:8080/updateCenter/byId/default/postBack --verbose 
```

（我创建这个是为了能够部署 Jenkins 并批量安装插件）

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2013-11-12T02:13:53.753

问题可能是您的**浏览器**代理设置未正确配置。

Jenkins 不会直接从更新中心检索插件列表，它会告诉您的浏览器检索它并将其发布回 Jenkins。因此，此步骤将忽略 Jenkins 中的 HTTP 代理设置。

因此，如果您使用配置为仅在您的网络中工作的浏览器来连接到本地服务器（例如 Jenkins 实例），那么您将无法更新插件列表。

（这只是发生在我身上，花了一个令人沮丧的小时来锻炼。）

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-09-20T20:22:18.610

这*太*令人沮丧了……不是因为困难，而是因为缺乏清晰度和良好的文档，至少对于我遇到的问题而言。我最终不得不以一种*非常*具体、挑剔的方式设置管理插件 -> 高级 -> HTTP 代理配置。如果我没有完全做到这一点，减去底部最后提到的东西，我就无法让它工作。也许这是我工作的防火墙，也许是詹金斯，如果您无法成功更新您的代理设置，无论哪种方式都可以试一试。我使用`Validate Proxy`了菜单中的工具。我将非常简要地描述下面的信息图基础

[![在此处输入图像描述](https://i.stack.imgur.com/UZH2v.png)](https://i.stack.imgur.com/UZH2v.png)

1.  不要添加`http://`或添加`https://`到您的`Server`字段
2.  将您的詹金斯凭据用于`Username`and `Password`，而不是您的代理凭据（如果这甚至适用）
3.  如果您正在检查 Google 或 Yahoo 之类的内容，请添加`http://`到您的`Test URL`
4.  提交您的更改
5.  然后运行 ​​check-now
6.  （可选？）将更新站点从 HTTP 更改为 HTTPS

您现在应该可以轻松更新插件*了*

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-06-04T09:40:57.480

将更新站点从 [https://updates.jenkins.io/update-center.json](https://updates.jenkins.io/update-center.json)更改 为 [http://updates.jenkins-ci.org/update-center.json](http://updates.jenkins-ci.org/update-center.json)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-04-02T02:07:08.980

我在使用 nginx 作为安全反向代理时遇到了这个问题。如上所述，我需要更新从其下载更新列表的 url，仅使用 https 以防止 chrome 中的混合内容错误。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-10-06T12:03:26.783

我找不到我搜索的插件的原因`Jenkins->Manage plugins->Available`：

它已经安装并且在`Jenkins->Manage plugins->Installed`.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-03-10T13:21:10.150

当我遇到同样的问题时，我遇到了这个 SO 答案。当我单击“立即检查”以强制 Jenkins 下载最新列表时，我的浏览器会挂起。直到我跟踪了 Jenkins 日志，我才在这里发现了这个：

```
Mar 10, 2014 1:15:54 PM hudson.security.csrf.CrumbFilter doFilter
WARNING: No valid crumb was included in request for /administrativeMonitor/hudson.diagnosis.ReverseProxySetupMonitor/test.  Returning 403. 
```

看起来这个问题与我如何将 Jenkins 放在反向代理后面并启用防止跨站点请求伪造的选项有关。一旦我禁用它，“立即检查”会在 30 秒内完成。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-11-26T06:38:44.340

对我来说，以下工作。在虚拟框中的 Ubuntu 1404 上全新安装 jenkins 1.638 后，我遇到了这个空的可用列表问题。我们在 ISA 代理服务器下。

转到`Jenkins->Manage Plugins->Advanced`并设置代理，如下所示：

`Host: 192.168.x.x`（您的代理 IP）

`Port: 80`（您的代理端口）

请注意，我发现格式**很重要**。我尝试添加`http://`它不起作用。它必须与上面完全相同。

然后`check now`按照其他人的建议点击右下角的按钮。然后你得到清单。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-05-30T06:34:02.480

我的解决方案在这里

如果您在浏览器的地址栏中输入“ [http://updates.jenkins-ci.org/update-center.json ”目录，（在我的情况下）它实际上重定向到“](http://updates.jenkins-ci.org/update-center.json) [http://ftp.tsukuba.wide.ad .jp/software/jenkins/updates/current/update-center.json](http://ftp.tsukuba.wide.ad.jp/software/jenkins/updates/current/update-center.json)。”

当我将“ [http://ftp.tsukuba.wide.ad.jp/software/jenkins/updates/current/update-center.json](http://ftp.tsukuba.wide.ad.jp/software/jenkins/updates/current/update-center.json) ”设置为 Jenkins 的更新站点，然后单击“保存”和“更新”时，它起作用了。

希望这可以帮助。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-08-11T04:19:10.603

或者您的插件可能已经安装。安装后，它不在可用插件列表中。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-03-26T20:59:59.023

如果您使用的是 Chrome 转到：管理 Jenkins → 管理插件 → 高级，然后单击`Check now`右下角的 。然后点击地址栏中的盾牌图标，点击`Load anyway`Jenkins 将开始更新插件。在 Firefox 中，此图标位于地址栏的左侧，靠近后退按钮。

![在此处输入图像描述](https://i.stack.imgur.com/lz3LF.png)

![在此处输入图像描述](https://i.stack.imgur.com/l8JE0.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-06-27T18:30:09.477

您可以手动安装插件，对此，进入管理插件中的高级选项卡，下载您需要的插件后，提交这些

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-11-22T21:25:39.387

我对 Jenkins 的 NginX 代理请求有疑问。我有错误：

```
Nginx 413 Request Entity Too Large 
```

我能够通过添加来解决这个问题

```
client_max_body_size 2M; 
```

到 /etc/nginx/nginx.conf 文件。之后我去了 Jenkins - 插件管理器 - 高级选项卡，然后按立即检查按钮

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-06-06T11:46:21.093

我遇到了同样的问题，并且能够通过启用浏览器元数据下载来解决它。请按照以下步骤在 Jenkins 中启用此配置

*   步骤 01：选择 Manage Jenkins 并点击 Configure Global Security
*   步骤 02：在插件管理器部分下勾选“使用浏览器下载元数据”
*   步骤 03：在管理 Jenkins 的插件管理器部分下查看可用选项卡

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-12-20T19:03:43.543

如果它不是在代理之后的全新安装，请按照可用“使用上面的搜索字段搜索可用插件”下的说明进行操作。

[![在此处输入图像描述](https://i.stack.imgur.com/D1GdF.png)](https://i.stack.imgur.com/D1GdF.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-11-20T13:28:45.420

在尝试了很多事情（包括此处发布的所有解决方案）和数小时的搜索之后......我最终***将 jenkins 升级到了版本 1.638***。

这有助于解决旧版本 jenkins 中可用的空插件令人沮丧的问题！

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-12-06T14:16:40.027

此答案特定于**Windows 10**。如果您使用 Jenkins 现在捆绑的安装程序，Jenkins 将作为服务安装。默认情况下，该服务在**本地系统**帐户下运行。您必须将其更改为在**网络服务**帐户下运行，以便 Jenkins 能够连接到插件更新服务。如果您在系统上具有管理员权限，那么这些步骤应该会有所帮助：

1.  打开命令提示符。
2.  输入 Services.msc 并回车。
3.  服务窗口现在应该打开了。
4.  在列表中找到 Jenkins 实例。
5.  右键单击它，然后单击属性。
6.  转到“登录”选项卡（应该是第二个）。
7.  应该有 2 个单选按钮。
    *   本地系统帐户（已选择）
    *   此帐户（未选择）
8.  选择此帐户。

9.  在文本框中输入**网络服务**。

10.  提供您的 Windows 密码。
11.  点击应用并确定。
12.  重启 Jenkins 服务。
13.  在浏览器中重新加载 Jenkins。

对于添加措施，您还可以在 Windows 防火墙（或您可能正在使用的任何其他防火墙）中添加规则以允许来自 Jenkins 的出站请求。指向**jenkins.exe**应用程序，该应用程序应位于该规则的 Jenkins 安装目录中。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-01-28T15:08:45.667

对于像我这样使用 Jenkins 和 JDK8u60+ 版本的 Docker 的人，您需要删除 JDK_HOME/jre/lib/security/java.security 中的 MD5 哈希以使其正常工作：

```
jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize < 1024

To

jdk.certpath.disabledAlgorithms=MD2, RSA keySize < 1024 
```

这应该是一个临时的解决方法

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-08-30T04:50:20.580

您在 Jenkins 机器上没有互联网连接。请在离线模式下配置互联网或安装插件。

去Jenkins-插件管理器-上传插件

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-11T00:29:12.723

我的环境

*   Windows 7 企业版
*   詹金斯 2.89.2
*   直接访问互联网

我尝试了这里提供的大部分建议，但在我尝试遵循之前没有任何效果

**第一：**我需要以“管理员”身份运行

**第二：**它在 C:\users\yourusername\.jenkins 使用默认用户主目录。

**什么有效：**

我通过定义 JENKINS_HOME 环境变量将上面的默认目录更改为不同的文件夹，并且我能够获得新的插件。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-12-08T15:17:03.903

我在最新的 Jenkins 版本中遇到了同样的问题，所有解决方案都不适用于我，所以我按照命令行方法安装任何插件

```
sudo java -jar jenkins-cli.jar -s http://localhost:8080/ -auth USERNAME:PASSWORD -webSocket install-plugin PLUGIN_NAME 
```

您可以从已安装的 Jenkins 页面 http://localhost:8080/cli 下载 Jenkins-cli.jar

[您可以从 Jenkins 站点https://plugins.jenkins.io/](https://plugins.jenkins.io/)搜索插件名称

> 如果您安装了 Jenkins CLI，您可以直接通过终端运行此命令

```
jenkins-plugin-cli --plugins PLUGIN_NAME 
```

如果其他人没有与您合作，我希望此解决方案有所帮助。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-01-27T17:25:10.387

我也尝试了以上所有方法，但这创造了奇迹

脚步：

1.  转到 `https://plugins.jenkins.io`（获取您要在 jenkins 上安装的所有 jenkins 插件的官方页面）

2.  搜索“github”（因为我们需要安装 github 插件）

3.  您将看到 github 插件，检查插件 id...它显示为 id:github....所以“github”是确切的插件 id

4.  在 jenkins 服务器中下载`jenkins-cli.jar` from`http://localhost:8080/cli`并复制到下`/opt/jenkins-cli.jar`

5.  在 jenkins 服务器上，运行命令安装 github 插件 `java -jar jenkins-cli.jar -s "http://localhost:8080" -auth jenkins-username:jenkins-password install-plugin github`

6.  重启服务器

7.  现在你会看到安装部分下安装的 github 插件

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-09-21T07:27:42.840

对于那些使用 Docker 和 MacOS 的人。当您使用 Docker 时，无需在 Jenkins 应用程序中为 Jenkins 配置代理设置，但是您可以并且应该在运行容器时已经这样做。对于上下文，我使用 MacOS，并且我在配置了代理的企业域中工作。

**解决方案**

1.  **为 Docker 配置代理设置。**如果您在 Docker Desktop 中打开 Preferences，您可以这样做。左侧菜单，“[资源](https://docs.docker.com/desktop/mac/#resources)”->“代理”。在那里您需要添加正确的代理设置，然后单击“应用并重新启动”
2.  **在运行容器时通过提供和环境变量 HTTP_PROXY 和 HTTPS_PROXY 将代理设置添加到容器。**将以下具有正确值的标志添加到您的命令中：`-e HTTP_PROXY=<your_http_proxy:port> -e HTTPS_PROXY=<your_http_proxy:port>`. 我自己的代理配置示例：

```
docker run \
-p 8080:8080 \
-p 50000:50000 \
-e HTTP_PROXY=http://10.65.100.13:8080 \
-e HTTPS_PROXY=http://10.65.100.13:8080 \
-v jenkins_home:/var/jenkins_home \
jenkins/jenkins:lts-jdk11 
```

**潜在问题**

问题是 SSL 证书。Jenkins 在下载插件时，在未配置为使用代理工作的容器内工作时无法访问 CA 证书。这导致下载失败。即使我按照先前答案中的建议配置了 Jenkins 代理设置，也不好，因为容器本身无法通过代理进行通信。

阅读[Docker 文档](https://docs.docker.com/desktop/mac/#resources)，我发现 Docker 应该从钥匙串访问 CA 证书本身，但它不会自动将代理设置添加到容器中。必须手动添加对容器的配置。这样做可以根据代理正确配置整个容器，并且容器能够访问 CA 证书。一旦容器按预期通过代理工作，Jenkins 本身就不需要额外的配置。

# c# - 抱歉，处理您的 C# 和 Ajax 请求时出错

> ID：16213986
> 
> 赞同：0
> 
> 时间：2013-04-25T11:51:19.343
> 
> 标签：c#, jquery, ajax

我正在进行 Ajax 调用，并且在我的本地环境中它可以工作，但是当我访问我的服务器时它开始出现问题。

出现的错误：Sorry, an error occurred while processing your request By F-12 Google Chrome 出现：Failed to load resource: the server respond with a status of 500 (Internal Server Error)

查询：

```
function converter(origem, destino, tipo) {
  $.ajax({
      type: "GET",
      url: "@Url.Action("Converter", "Home")",
      data: {aCoordenada: origem.val(), aTipo: tipo},
      success: function (msg) {
          destino.val(msg);
      }
  });
}; 
```

控制器：

```
public JsonResult Converter(string aCoordenada, string aTipo)
{
    var orientacao = "";
    aCoordenada = aCoordenada.Replace(".", ",");
    decimal coordenada = Convert.ToDecimal(aCoordenada);
    coordenada = Math.Abs(coordenada);

    int coorHora = (int)coordenada;
    coordenada = (coordenada - coorHora) * 60;
    int coorMin = (int)coordenada;
    coordenada = (coordenada - coorMin) * 60;
    decimal coorSeg = Math.Round(coordenada, 3);

    return Json(coorHora.ToString() + "° " + coorMin.ToString() + "' " + coorSeg.ToString() + "'' " + orientacao, JsonRequestBehavior.AllowGet);
} 
```

网址发送参数：

```
http://localhost/Home/Converter?aCoordenada=-49.06022071838379&aTipo=LNG 
```

[]s！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:01:41.560

我的本地环境是标准的 en-Br 并且服务器是国际的......我在我的 web.config 中添加了命令并且它工作......

```
<globalization enableClientBasedCulture="true" uiCulture="pt-BR" culture="pt-BR"/> 
```

tks 的帮助

# java - 优化 Android/Java 代码 - 创建相同对象类型的多个实例

> ID：16213991
> 
> 赞同：2
> 
> 时间：2013-04-25T11:51:41.450
> 
> 标签：java, android, xml

我有一个工作应用程序，但想优化代码。下面是一个示例，我创建了 10 个单独的图像按钮（注意每个按钮的递增对象名和 XML 引用）并设置它们的侦听器。任何人都可以提出一种更优化的方法，也许是动态方法/循环？谢谢....

```
private void initialiseButtons() {  
    ImageButton imageButton1 = (ImageButton)this.findViewById(R.id.imageButton1);
    imageButton1.setOnClickListener(this);
    ImageButton imageButton2 = (ImageButton)this.findViewById(R.id.imageButton2);
    imageButton2.setOnClickListener(this);
    ImageButton imageButton3 = (ImageButton)this.findViewById(R.id.imageButton3);
    imageButton3.setOnClickListener(this);
    ImageButton imageButton4 = (ImageButton)this.findViewById(R.id.imageButton4);
    imageButton4.setOnClickListener(this);
    ImageButton imageButton5 = (ImageButton)this.findViewById(R.id.imageButton5);
    imageButton5.setOnClickListener(this);
    ImageButton imageButton6 = (ImageButton)this.findViewById(R.id.imageButton6);
    imageButton6.setOnClickListener(this);
    ImageButton imageButton7 = (ImageButton)this.findViewById(R.id.imageButton7);
    imageButton7.setOnClickListener(this);
    ImageButton imageButton8 = (ImageButton)this.findViewById(R.id.imageButton8);
    imageButton8.setOnClickListener(this);
    ImageButton imageButton9 = (ImageButton)this.findViewById(R.id.imageButton9);
    imageButton9.setOnClickListener(this);
    ImageButton imageButton0 = (ImageButton)this.findViewById(R.id.imageButton0);
    imageButton0.setOnClickListener(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:55:47.853

[您可以使用http://androidannotations.org/](http://androidannotations.org/)减少样板代码，这将允许您执行类似的操作

```
 @ViewById
 ImageButton imageButton1; 
```

但使用数组或按钮列表而不是多个引用可能会更好，例如：

```
private void init() {
    int[] ids=new int[]{R.id.imageButton1, R.id.imageButton2 ...};
    List<ImageButton> buttons=new ArrayList<ImageButton>;
    for(int id : ids) {
        buttons.add((ImageButton)this.findViewById(id));
    }
} 
```

然后您可以轻松地在列表上进行迭代，例如设置监听器

```
for(ImageButton button : buttons) {
   button.setOnClickListener(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:08:08.410

您可以使用循环和使用`getIdentifier()`方法。

```
int idToInitialize;
ImageButton ib;
for (int i = 0; i < 9; i++) {
    idToInitialize = getResources().getIdentifier("imageButton" + i, "id", getPackageName());
    ib = (ImageButton) this.findViewById(idToInitialize);
    ib.setOnClickListener(this);
} 
```

但是，如果我们与普通方法相比，它非常慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:00:16.840

我无法尝试，因为我这里没有 Android Environmetn。但我认为这应该有效：

```
private void initialiseButtons() {
   for(int i = 0; i < 10; i++) {
      ImageButton imageButton = (ImageButton)this.findViewById(R.id.getClass().
         getField("imageButton" + i).get(R.id));
      imageButton.setOnClickListener(this);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T12:02:25.670

您可以使用数组、列表...

例如：

```
private static final int[] BUTTONS_IDS = new int[] {R.id.imageButton0, R.id.imageButton1, R.id.imageButton2, R.id.imageButton3, R.id.imageButton4, R.id.imageButton5, R.id.imageButton6, R.id.imageButton7, R.id.imageButton8, R.id.imageButton9};

ImageButton[] buttons = new ImageButton[BUTTON_IDS.length];

private void initialiseButtons() {
    for (int i = 0; i < BUTTONS_IDS.length; i++) {
        buttons[i] = (ImageButton) findViewById(BUTTONS_IDS[i]);
        buttons[i].setOnClickListener(this);
    }
} 
```

您还可以将 id 列表放入 arrays.xml 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T12:38:23.597

如果仅用于设置`onClickListener`，您可以摆脱整个`initialiseButtons()`方法，只需添加`android:onClick="handleButtonClick"`布局 xml 并在您的活动中定义该方法，如下所示：

```
public void handleButtonClick(View view) {
    switch(view.getId()) {
    case R.id.imageButton1: // handle button 1 pressed ....
    case R.id.imageButton2: // handle button 2 pressed ....
    // ... handle further buttons
    }
} 
```

# .net - 由于为活动语句查找分析树节点时出错，Visual Studio 无法进入调试模式

> ID：16213995
> 
> 赞同：2
> 
> 时间：2013-04-25T11:51:51.620
> 
> 标签：.net, debugging, visual-studio-2012

我只是从存储库更新我的项目，因为当我的程序遇到调试点时，它会给我这个消息：

> 进入中断模式失败，原因如下：查找活动语句的分析树节点时出错。通常，如果在启动调试会话之前未重新构建项目、项目的程序集文件已过期或项目源文件在项目构建之间移动到不同的磁盘位置时，就会出现这种情况调试会话开始了。此调试会话将禁用“编辑并继续”。

我清理和重建了很多次，更新到以前的版本，删除了 bin 和 obj 目录，suo 文件，到目前为止没有运气。什么可能导致这种情况？我应该检查什么？

# asp.net - ASP.NET 4 JSON DataContractJsonSerializer 小写

> ID：16213997
> 
> 赞同：1
> 
> 时间：2013-04-25T11:51:57.353
> 
> 标签：asp.net, json, webforms, datacontractserializer

我有一个类，其中有几个属性都在句子大小写中定义：

```
Public Class Provider
    Public Property ProviderName As String
End Class 
```

我需要能够通过 AJAX 传递它的实例，然后我将在 JavaScript 中使用它来添加到数组、进程等。目前我正在使用 DataContractJsonSerializer 序列化为 JSON 并通过 ASHX 处理程序返回。可能只是我很挑剔，但我真的不喜欢在 JavaScript 中使用句子大小写属性，我希望它们都是小写的，以产生以下内容：

```
alert(myProvider.providername); 
```

使用默认的 DataContractJsonSerializer 我根本找不到办法做到这一点！使用 JSON.NET，这似乎是一项简单的任务，但不幸的是，我无法在这个项目中引入另一个依赖项 - 就像我想的那样。

有人知道有什么方法可以覆盖生成的密钥格式吗？

该项目使用 ASP.NET Web Forms 4.0。

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-26T16:14:52.070

可以自定义 DataMember 属性以使用小写名称。这是 C# 中的语法，我假设在 VB 中应该类似：

```
[DataMember(Name = "title")]
public string Title { get; set; } 
```