# StackOverflow 问答 14544000-14544999

# mips - 如何从 2 补码转换为以 10 为底的？MIPS

> ID：14544000
> 
> 赞同：0
> 
> 时间：2013-01-27T03:02:19.950
> 
> 标签：mips

我知道如何手动将二进制补码转换为 10 进制。

[http://sandbox.mc.edu/~bennet/cs110/tc/tctod.html](http://sandbox.mc.edu/~bennet/cs110/tc/tctod.html)

如链接所示。你可以通过第一位判断一个数字是负数还是正数，所以我的想法是因为这个数字是 8 位，所以我将除以 1000 0000 二进制或十六进制 0x00000080。

有没有人有更好的解决方案，因为现在这对我不起作用，我的代码在底部。寄存器 1 是二进制补码的位置。

```
lis $8
.word 0x00000080

div $1, $8

mflo $9

jr $31 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:28:35.363

首先，您可以做的是创建变量的 NOT。MIPS 没有内置的 NOT 但您可以使用 XOR 来获取它（使用 addi 将寄存器的值设置为 -1，在寄存器上使用 XOR 与其中带有 -1 的寄存器取反，它存储所有1)

之后就很简单了，加1就行了。

# php - 压缩显示的空间数字（如堆栈，但也适用于 <1）

> ID：14544007
> 
> 赞同：0
> 
> 时间：2013-01-27T03:04:03.860
> 
> 标签：php, javascript, jquery, mysql

奇怪我找不到这个答案（可能没有正确搜索）。

我想在非零数字的第一个实例之后删除所有数字。

例如，如果我有`0.00208239`，我怎样才能将它减少到`0.002`更好`2m`（[SI 单位](http://www.zen22142.zen.co.uk/Prac/SI.htm)）？此数据来自 MySQL，但通过 PHP AJAX 路由到一个 id'd div。

**注意**第一个有效数字可以是任何地方，从 10^-6 到 10^6。所以，`1,000.77`必须是`1,000`，或者如果你很棒，`1k`。

我用 jQuery 为它点亮，所以 js、jQuery、MySQL、PHP 的最佳答案得到检查，但任何有效的解决方案当然都会得到 +。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:07:57.073

您可以使用正则表达式获取第一个数字，然后使用查找表添加后缀：

```
$suffixes = array( 
    -6 => 'µ',
    -5 => '',
    -4 => '',
    -3 => 'm',
    -2 => 'c',
    -1 => '',
     0 => '',
     1 => '',
     2 => '',
     3 => 'k',
     4 => '',
     5 => '',
     6 => 'M',
);

preg_match( '/^[^1-9]*([1-9])/', $str, $matches);
$ten = floor( log( $str, 10));
echo $matches[1] . $suffixes[ $ten ] . "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:43:37.490

您可以在使用 JavaScript 显示之前发送原始数据并对其进行格式化。见[演示](http://jsfiddle.net/8f4Fa/)：

```
var MACRO_SCALE = ["", "k", "M", "G", "T"];
var MICRO_SCALE = ["", "d", "c", "m", "µ"];

function formatNumber(n) {
    if (n >= 1) {
        n = Math.floor(n);
        var i = 0;
        while (n > 100 && i < MACRO_SCALE.length - 1) {
            n /= 1000;
            i++;
        }
        n = Math.round(n) + MACRO_SCALE[i];
    } else {
        var r = /(\d*)\.([0]*\d{1}?)/.exec(n);
        if (r) {
            n = r[1] + "." + r[2];
        }
        var i = 0;
        while (n < 1 && i < MICRO_SCALE.length - 1) {
            n *= 1000;
            i++;
        }
        n = n + MICRO_SCALE[i];
    }
    return n;
}; 
```

这样做的好处是您可以操纵（如果需要）原始数据，而不是重新转换它。毕竟，数据就是数据，应该只为显示而格式化，除非你真的关心在数据传输中节省几个字节:)

****编辑****

我更新了函数，以便它可以更智能地格式化值（而且我认为`MICRO_SCALE`格式化不准确）。这不是白痴证明，但它应该足够接近。查看[更新](http://jsfiddle.net/8f4Fa/2/)的jsfiddle ：

```
// will not likely to go that high/low, but provided anyway
var MACRO_SCALE = ["", "k", "M", "G", "T" /*, "P", "E", "Z", "Y"*/]; 
var MICRO_SCALE = ["", "d", "c", "m", "µ" /*, "n", "p", "f", "a"*/]; 

function formatNumber(n) {
    var r = /(\d*)(\.([0]*\d{1}?).*?(e-(\d+))?)?$/.exec(n);
    if (r) {
        var i = 0;
        var scale;
        //console.log(r);
        if (r[4]) {
            scale = MICRO_SCALE;
            i = Math.abs(r[5]);
            n = r[1];
            while (i >= scale.length) {
                n /= 10; i--;
            }
        } else if (r[1] >= 1) {
            n = r[1]; 
            scale = MACRO_SCALE;
            while (n > 100 && i < scale.length - 1) {
                n /= 1000; i++;
            }
        } else {
            n = parseFloat("0." + r[3]); 
            scale = MICRO_SCALE;   
            while (n < 1 && i < scale.length - 1) {
                n *= 10; i++;
            }
        }
        n += scale[i];
    } else {
        n = 0;
    }

    return n;
}; 
```

使用这些值和结果进行测试

```
0.00208239 ==> 2m
1000.77 ==> 1k
abc ==> 0
0.000000342 (or 3.42e-7) ==> 0.003µ
0.0000234 ==> 0.2µ
1 ==> 1
1.2 ==> 1 
```

**注意**：如果你想得到`.2µ`而不是`0.2µ`，你所要做的就是将 jsfiddle 的第**34**行（ ）替换为：`n += scale[i];`

```
n = (n < 1 && n > 0 ? (""+n).substring(1) : n) + scale[i]; 
```

# java - 如何在 Java 应用程序中打印 JTable 对象

> ID：14544013
> 
> 赞同：2
> 
> 时间：2013-01-27T03:05:34.187
> 
> 标签：java, swing, printing, jtable, awt

**问题**现在，一旦从数据库中获取数据并显示在嵌入在滚动窗格中的 JTable 对象“表”中，我们如何创建一个打印作业，以便可以在 A3 大小的纸上打印显示的表？

我从数据库中获取数据的代码如下所示：

```
try 
{
    Class.forName("com.mysql.jdbc.Driver"); 
    Connection con=DriverManager.getConnection("jdbc:mysql://localhost/newb","root","pass");
    Statement stat=con.createStatement();   
    ResultSet res=stat.executeQuery("select * from table where name = '"+name+"'");
    ResultSetMetaData rsmd = res.getMetaData();
    int colcount = rsmd.getColumnCount();
    Vector columns = new Vector(colcount);
        for(int i=3; i<=colcount; i++)
    {
        columns.add(rsmd.getColumnName(i));
    }
    Vector data = new Vector();
    Vector row;

    // Store row data
    while(res.next())
    {
        row = new Vector(colcount);
        for(int i=3; i<=colcount; i++)
        {
            row.add(res.getString(i));
        }
        data.add(row);
    }
    table = new JTable(data, columns);
    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    scrollPane.setViewportView(table);
}
catch(Exception ex)
{       
    System.out.println(ex);
} 
```

我正在使用向量类从表中获取数据。我们如何将显示的表格中显示的数据打印到纸上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:02:28.137

您显然没有阅读[上一个问题](https://stackoverflow.com/questions/14543695/how-to-make-a-scrollable-jtable/14543806#14543806)中提供的链接。

[来自如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)的打印部分

> 印刷
> 
> JTable 为打印表格提供了一个简单的 API。打印表格最简单的方法是调用不带参数的 JTable.print：

```
try {
     if (! table.print()) {
         System.err.println("User cancelled printing");
     } 
 } catch (java.awt.print.PrinterException e) {
     System.err.format("Cannot print %s%n", e.getMessage()); 
 } 
```

> 在普通的 Swing 应用程序上调用 print 会弹出一个标准的打印对话框。（在无头应用程序中，表格只是简单地打印。）返回值指示用户是继续打印作业还是取消了它。JTable.print 可以抛出 java.awt.print.PrinterException，这是一个检查异常；这就是为什么上面的例子使用了 try ... catch。
> 
> JTable 提供了几种带有各种选项的打印重载。TablePrintDemo.java 中的以下代码显示了如何定义页眉：
> 
> MessageFormat header = new MessageFormat("Page {0,number,integer}");

```
try {
    table.print(JTable.PrintMode.FIT_WIDTH, header, null); 
} catch (java.awt.print.PrinterException e) {
     System.err.format("Cannot print %s%n", e.getMessage()); 
} 
```

> 对于更复杂的打印应用程序，使用 JTable.getPrintable 来获取表格的 Printable 对象。有关可打印的更多信息，请参阅 2D 图形跟踪中的打印课程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T03:20:32.177

只是使用`JTable.print()`方法。这是[一篇关于将 JTable 发送到打印机](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)的文章和[另一篇有更多参数的文章](http://docs.oracle.com/javase/tutorial/uiswing/misc/printtable.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T16:56:49.363

**我希望可以帮助您使用此代码尝试如何在 Java netbeans 中打印 JTable**

```
 private void btn_printActionPerformed(java.awt.event.ActionEvent evt) {                                          
    // TODO add your handling code here:
         MessageFormat header = new MessageFormat("Print Report");
        MessageFormat footer = new MessageFormat("Page{0,number,integer}");
    try {
        table_employee.print(JTable.PrintMode.FIT_WIDTH, header, footer);
    } catch (java.awt.print.PrinterAbortException e) {
    } catch (PrinterException ex) {
        Logger.getLogger(employee_info.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

# c - 如何在C中将指针值与NULL进行比较

> ID：14544017
> 
> 赞同：-1
> 
> 时间：2013-01-27T03:05:51.820
> 
> 标签：c

我正在编写一个函数，它删除链表中的一个节点，其输入是一个指向链表的指针。如果该函数删除一个只有一个节点的链表，该函数将使指针指向 NULL。以下是部分代码：

```
void remove(dlinkNode_t *start){
    //some previous code
    if(start->next==NULL){//meaning we're removing the head of the linked list
        dlinkNode_t current=start;  //get a temp pointer to point at this node
        start=NULL;    //make start point to null
        free(current); //free the head
        return;
    }
    // More code 
```

在 main 中，我创建了一个带有一个节点的链表，并将该链表传递给删除函数以释放它。这是代码：

```
int main(){
    dlinkNode_t *node1=create();  //creates a node and make node1 point at it
    remove(node1);  //now node1 should point at NULL
    if(node1==NULL)
        printf("hi");
    return 0;
} 
```

但是我没有看到打印的hi。我不知道为什么 if 语句没有通过。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:08:32.563

指针的新副本在`remove`. 您对指针所做的任何更改都将仅在该范围内可见。您对指针指向的值所做的任何更改都将返回到调用范围。

您可以通过以下两种方式之一解决此问题：

*   返回编辑后的指针

    ```
    node1 = remove(node1); 
    ```

    并在 remove 中进行更改。

    ```
    dlinkNode_t * remove(dlinkNode_t *start){
        //some previous code
        //Function code
        return start; 
    ```

*   或者，您可以将指针传递给指针 start，然后操作该指针。

    函数调用：

    ```
    remove(&node1); 
    ```

    函数定义：

    ```
    void remove(dlinkNode_t **start){
        //some previous code
        if((*start)->next==NULL){ // meaning we're removing 
                                  // the head of the linked list
            dlinkNode_t current=**start; //get a temp pointer
                                         // to point at this node
            **start=NULL;  //make start point to null
            free(current); //free the head 
    ```

# r - 将列中的日期和小时值组合成 R 中的时间序列（和反向）

> ID：14544025
> 
> 赞同：1
> 
> 时间：2013-01-27T03:06:29.600
> 
> 标签：r, csv, time-series, import-from-csv

我有一些格式为 CSV 的数据：

```
date, total, avg, hour00, hour01, ... hour23 
```

我想将此扩展为格式为时间序列：

```
date-time(date + hourXX), (value of hourXX) 
```

示例输入：

```
 date, total, avg, hour00, hour01, hour02, hour03, ..., hour23
2013-01-27,   240,  10,      5,     15,     20,      0, ...,     14
2013-01-28,   305,  15,      9,     18,     17,     12, ...,     16 
```

示例输出（data.frame 对象）：

```
 date-time, hourXX
2013-01-27 00:00,      5
2013-01-27 01:00,     15
2013-01-27 02:00,     20
2013-01-27 03:00,      0
...
2013-01-27 23:00,     14
2013-01-28 00:00,     15
... 
```

因此，hour00-hour23 列中的每个值都对应于在 date+hourXX 采集的样本。

我知道如何在 sql 中执行此操作，我将在其中创建 24 个 UNION ALL，每个选择一列，但是在**R**中是否有一种“智能”的方式来执行此操作（或者可能是一些甚至知道更好的方式的专家）这在 sql 中）。

作为一个额外的问题，有没有办法反过来（采用时间序列并将其转换为 hour00-hour23 格式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:59:22.750

这是一种蛮力方法。它正在使用您的示例，小时数为 c(0:3,23)。请注意函数第一行的注释，以便在一天中的所有时间都存在时重塑数据。

```
f <- function(df) {
  hours <- paste0('hour', sprintf('%02d', c(0:3,23)))  ## paste0('hour', sprintf('%02d', 0:23))
  df <- reshape(df, direction='long', varying=hours, sep='')[c('date', 'time', 'hour')]
  df[['date-time']] <- paste0(df$date, ' ', sprintf('%02d', df$time), ':00')
  df <- df[c('date-time', 'hour')]
  df[order(df[['date-time']]),]
}

df <- read.csv(header=T, text="      date, total, avg, hour00, hour01, hour02, hour03, hour23
2013-01-27,   240,  10,      5,     15,     20,      0, 14
2013-01-28,   305,  15,      9,     18,     17,     12, 16")

f(df)
##             date-time hour
## 1.0  2013-01-27 00:00    5
## 1.1  2013-01-27 01:00   15
## 1.2  2013-01-27 02:00   20
## 1.3  2013-01-27 03:00    0
## 1.23 2013-01-27 23:00   14
## 2.0  2013-01-28 00:00    9
## 2.1  2013-01-28 01:00   18
## 2.2  2013-01-28 02:00   17
## 2.3  2013-01-28 03:00   12
## 2.23 2013-01-28 23:00   16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:32:43.570

这就是我猜你想要的。如果没有，那么请发布一个更好地代表问题的示例：

```
require(zoo)
txt <- scan(textConnection("2013-01-27, 240, 10, 5, 15, 20, 0"), what="character", sep=",") vals=txt[-(1:2)]> dt <- as.POSIXct(txt[1], format="%Y-%m-%d")
zoo(vals, order.by=seq(dt, by="1 hour", length=length(vals) ) )

2013-01-27 00:00:00 2013-01-27 01:00:00 2013-01-27 02:00:00 
                 10                   5                  15 
2013-01-27 03:00:00 2013-01-27 04:00:00 
                 20                   0 
```

# debugging - 制作后删除了 GDB 自动显示表达式

> ID：14544026
> 
> 赞同：0
> 
> 时间：2013-01-27T03:06:32.997
> 
> 标签：debugging, gdb, disp

我正在调试交流程序。函数内部有一个断点，我创建了一些自动显示表达式以便进一步执行（例如，'(gdb) display *array@30'）。

每次我发出 make 然后再次运行应用程序时，这些自动显示都会被删除。我通过信息显示检查，它们没有被禁用，它们已经消失了。但是，它们似乎在运行中被删除，在 make 之后它们仍然存在。

有什么东西可以保存和恢复它们，还是简单地保留它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:39:14.610

如果每次运行 GDB 都需要自动加载命令，那么可以使用加载脚本。在这里（在脚本内）您可以自定义命令。您可以查看此[链接](https://stackoverflow.com/questions/13241972/source-a-script-from-gdb/13244207#13244207)了解详细信息。

# iphone - 更改应用名称后，AppStore 下载 URL 是否会更改？

> ID：14544038
> 
> 赞同：0
> 
> 时间：2013-01-27T03:09:24.763
> 
> 标签：iphone, ios, app-store-connect

我需要在新版本中更改我的 iOS 应用名称（在 iTunesConnect 中）。我不确定的一件事是新名称版本上线后下载链接是否会更改，因为该名称包含在 iTunes 下载 URL 中。

我需要确定，因为我在代码中包含 URL 以将潜在用户引导至下载链接。如果链接确实发生了变化，我怎样才能获得新的链接？还是在提交初始版本后链接已修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:17:34.243

当您更新名称时，它不会在 iTunesConnect 中显示一个新链接吗？

最好联系苹果这个朋友。

1-800-MY-APPLE (1-800-692-7753)

# groovy - 使用 GPar 的 Fork/Join 示例

> ID：14544040
> 
> 赞同：3
> 
> 时间：2013-01-27T03:09:52.583
> 
> 标签：groovy, fork-join, gpars

我在这里找到了 GPars 中 fork/join 的示例：[Fork/Join](http://www.gpars.org/1.0.0/guide/guide/dataParallelism.html#dataParallelism_fork-join)

```
import static groovyx.gpars.GParsPool.runForkJoin
import static groovyx.gpars.GParsPool.withPool
withPool() {
    println """Number of files: ${
        runForkJoin(new File("./src")) {file ->
            long count = 0
            file.eachFile {
                if (it.isDirectory()) {
                    println "Forking a child task for $it"
                    forkOffChild(it)           //fork a child task
                } else {
                    count++
                }
            }
            return count + (childrenResults.sum(0))
            //use results of children tasks to calculate and store own result
        }
    }"""
} 
```

它可以工作并返回正确数量的文件，但不幸的是我不明白这一行：

```
return count + (childrenResults.sum(0)) 
```

究竟是如何工作`count`的`childrenResult`？
为什么将 a`0`作为参数传递给`sum()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:30:14.377

我对 GPars 不太熟悉，但是您提供的链接说它是一种[分而治之的](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)算法，并在稍后澄清了更多隐含的内容，`forkOffChild()`并解释说不等待 - 而是等待`getChildrenResults()`。

如果您对此更熟悉，您可能会发现更容易理解同一页面中提供的替代方法，该方法使用更多 Java 风格。

`childrenResults`导致调用方法[`getChildrenResults()`](http://gpars.org/1.0.0/groovydoc/groovyx/gpars/forkjoin/AbstractForkJoinWorker.html#getChildrenResults%28%29)，这是“Fork/Join”中的“join”，它等待所有孩子完成，然后返回一个包含它们结果的列表（或重新抛出孩子可能抛出的任何异常）。

`0`只是总和的初始值。如果`childrenResult`为空，则总和为`count`：

```
groovy:000> [].sum(1)
===> 1
groovy:000> [1].sum(1)
===> 2 
```

# php - 导入带下标字符的excel文件

> ID：14544042
> 
> 赞同：0
> 
> 时间：2013-01-27T03:10:07.533
> 
> 标签：php, mysql, excel, subscript

上传 Excel 文件没问题，不是问题

浏览了很多关于uloading excel to mysql的文章试过了

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

[http://sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/)

[https://stackoverflow.com/a/7889220/1026905](https://stackoverflow.com/a/7889220/1026905)（非常好的编码类）

我的问题是我无法上传在 excel 文件中看到的字符

上标部分正在转换中的示例

`∴ tn = n² + 2n + 1 + 2`

n² ... 按原样转换
∴ .... 按原样转换

∠Ωπ √ ∞ ≅⊥∫∪∴≈≡⊆μ 这样的所有字符我都可以按原样转换

唯一的问题是 tn, t1, t2, t3 我无法获得 n,1,2,3 作为下标（无法在此处显示，但您可以在图像中查看

```
 tn ... should be t<sub>n</sub>

... in html format n should be subscript 
```

我没有得到这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:32:59.493

使用 PHPExcel，您可以识别单元格是否包含富文本，因为 getValue() 调用将返回 PHPExcel_RichText 对象而不是字符串/整数/浮点数/布尔标量类型。

然后，您可以遍历该 PHPExcel_RichText 对象的 PHPExcel_RichText_Run 对象集合，查看与其关联的样式：

```
$cellValueAsString = '';
$elements = $cell->getValue()->getRichTextElements();
foreach ($elements as $element) {
    // Rich text start?
    if ($element instanceof PHPExcel_RichText_Run) {
        if ($element->getFont()->getSuperScript()) {
            $cellValueAsString .= '<sup>';
        } else if ($element->getFont()->getSubScript()) {
            $cellValueAsString .= '<sub>';
        }
    }
    // Convert UTF8 data to PCDATA
    $cellText = $element->getText();
    $cellValueAsString .= htmlspecialchars($cellText);
    if ($element instanceof PHPExcel_RichText_Run) {
        if ($element->getFont()->getSuperScript()) {
            $cellValueAsString .= '</sup>';
        } else if ($element->getFont()->getSubScript()) {
            $cellValueAsString .= '</sub>';
        }
    }
} 
```

将是一个简单的代码块，将富文本单元格内容转换为简单的 HTML 标记，显示上标和下标字符

# c++ - 操作数类型不兼容（“char”和“const char*”）

> ID：14544043
> 
> 赞同：18
> 
> 时间：2013-01-27T03:10:08.300
> 
> 标签：c++, c, arrays, types

我收到以下错误...

> 操作数类型不兼容（“char”和“const char*”）

...尝试执行 if 语句时。我假设我不了解输入值是如何存储的，尽管我不确定是否可以将其转换为匹配类型？

要重现的示例代码是：

```
char userInput_Text[3];

if (userInput_Text[1] == "y") {
    // Do stuff.
} 
```

我不确定是什么原因造成的。看起来一种类型是 char 而另一种是 const char 指针，尽管我不确定是什么，作为参考，当我不使用数组时也会发生此错误）。

提示/反馈将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-27T03:11:23.490

双引号是C++ 中*c 字符串的快捷语法。*如果要比较单个字符，则必须改用单引号。您可以简单地将代码更改为：

```
char userInput_Text[3];

if (userInput_Text[1] == 'y') { // <-- Single quotes here.
    // Do stuff.
} 
```

以供参考：

*   `"x"`=`const char *`
*   `'x'`=`char`

# agile - 敏捷方法的适用性和不适用性？

> ID：14544048
> 
> 赞同：-1
> 
> 时间：2013-01-27T03:11:25.870
> 
> 标签：agile

每个人都在谈论敏捷以及这有多好。敏捷有几个优点和缺点。我从理论上研究过它们。由于这里有许多项目工作过的专家，我想知道敏捷不适合和适合的真正的两两场景。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:59:03.237

在以下情况下，敏捷**可能**不适合：

*   它有可能暴露过度的管理（一些职位突然变得明显多余）
*   人们实际上不想玩得开心，不想做有创意的事情，更喜欢朝九晚五的日常工作模式（维护迫不及待要处理的旧式蹩脚软件）
*   政治而不是专业精神经营公司
*   人力资源管理公司（敏捷是关于人的，人力资源将他们视为事物）
*   客户希望你能弄清楚他需要什么（敏捷会让你问他不想回答的问题）
*   敏捷有望成为一根神奇的魔杖，无需任何人改变习惯即可解决问题（另一个流行词，一种时尚）
*   开发分布在彼此相距很远的多个地点，在不同的时区（通信受到影响）
*   你有一个尖头发的老板；）

或一般来说：

*   被误解了
*   组织被严重的病态吞噬
*   没有人真正想要它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:03:33.547

如果有可能做好敏捷，那么我相信这总是一件好事。如果不可能做好，那我相信它可能是有害的。不是因为敏捷有任何本质上的危险，而是因为它意味着使用功能失调的过程。

因此，当不存在做好它的条件时，敏捷是不合适的。

有些事情可能会阻碍敏捷的采用：

*   团队成员不了解流程，也没有时间或意愿去学习它
*   团队成员没有经验或成熟度来承担对自己流程的更多控制
*   管理层需要详细的长期计划作为可交付成果
*   客户不愿意在最终发货之前提供有关增量版本的反馈
*   团队成员流失率高
*   正在使用的技术不允许构建和测试周期的有用长度（我已经完成了敏捷的三个小时构建和测试周期；这非常痛苦，但几乎可行），或者根本不允许
*   问题域不承认解决方案的增量开发（我不确定这是否正确；我最近遇到的情况是在处理密码学时，事情要么完全工作，要么根本不工作)

在某种程度上，这些都是可以补救的。一个不知情或缺乏经验的团队可以由一群知情或经验丰富的成员组成。团队领导可以写一个长期计划，然后让团队忽略它，并希望交付工作代码能够安抚管理层。业务分析师或 QA 可以充当代理客户，为增量发布提供反馈。分支策略和构建服务器可用于将构建和测试与提交和合并分离。但是，这些补救措施当然不能保证成功，如果问题仍然无法解决，敏捷将不会成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T11:36:44.923

我与许多尝试转向敏捷的不同团队合作。有的成功了，有的没有成功。根据我的经验，我可以这样说：

*   当软件创建者非常想提高他们的产品质量（无论它在他们的环境中意味着什么）以至于他们甚至准备好作为一个团队来实现它时，转向敏捷是**合适的。**

*   当每个人都对当前的质量水平感到满意和/或不想作为一个团队工作时，转向敏捷是**不合适的。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T12:05:14.773

排序答案：当 IT 公司在制造自己的产品时，敏捷是合适的。例如，Visual Studio 是在几年内以敏捷的方式制作的。你可以看到更好的“交货时间的想法”。敏捷不适合网上银行。另一个例子是位于美国的客户和开发团队或其在 azia 的一部分。时间延迟使事情变得复杂。

长答案：首先，如果你想运行一个敏捷项目，你的管理层应该理解它，你公司的流程应该接受它。如果您尝试解决它们，您将失败。在这里了解管理和内部流程的重要性：[https](https://www.youtube.com/watch?v=4u5N00ApR_k) ://www.youtube.com/watch?v=4u5N00ApR_k管理层和团队领导理解敏捷流程比程序员更重要。通常情况正好相反。

其次，您客户的管理和流程应该包含敏捷流程。银行或金融机构永远不会签署敏捷合同。他们的流程需要多层次的深入规划和批准。了解客户对敏捷的误解如何导致失败：[https ://www.youtube.com/watch?v=lAf3q13uUpE](https://www.youtube.com/watch?v=lAf3q13uUpE)

我完全同意汤姆安德森的观点，环境比项目本身的类型更重要。例如，如果您签订了固定合同（由于您的管理层或客户），您可能有详细的要求。如果你有详细的要求，你不会运行 scrum 而是“SCRUM BUT”。这与敏捷哲学背道而驰。

项目可能既不适合敏捷，也不适合瀑布。有时最好在内部使用敏捷，将产品负责人角色分配给公司中最了解该领域的人。

[敏捷方法的适用性和不适用性？](https://stackoverflow.com/questions/14544048/suitability-and-unsuitability-of-agile-methods)

# perl - Perl：网站模板集合

> ID：14544050
> 
> 赞同：3
> 
> 时间：2013-01-27T03:12:23.507
> 
> 标签：perl, templates, web

是否有任何项目包含 perl Web 模板的集合？喜欢在 github 或源代码伪造上？

那里有大量的 HTML/CSS 模板，但是是否有任何开源集合已经为不同的站点类型/功能设置了框架（可能使用 HTML::Template）？

很高兴看到预先构建的线框，一些使用分页，一些有数据库连接，用户登录，设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:53:35.803

在 Perl 世界中，我们倾向于称之为“模板”的东西更像是“填补空白以创建特定页面”之类的东西。它不创建或定义任何程序级功能，它只是将底层代码的功能呈现给用户。例如，模板将显示用户可以用来导航到其他页面的控件，但它不实现分页。它显示“用户名”和“密码”输入字段，但它对数据库、会话或验证凭据一无所知。等等。

在我看来，您正在寻找更多 Perl 社区所称的“Web 应用程序框架”，其中有几个。现在的三大巨头是[Dancer](http://www.perldancer.org/)、[Mojolicious](http://mojolicio.us/)和[Catalyst](http://www.catalystframework.org/)。

如果你*真的*想混合你的模板和你的功能，我相信[Mason](https://metacpan.org/module/Mason)就是这样工作的，但我鼓励你先看看其他框架，然后尝试用干净的关注点分离来构建东西——框架代码只提供功能；仅提供用户界面的模板 - 在以老式 PHP 风格将功能代码混合到表示层之前。

# javascript - 响应式下拉菜单 - 单击后隐藏菜单

> ID：14544051
> 
> 赞同：1
> 
> 时间：2013-01-27T03:12:26.603
> 
> 标签：javascript, css, responsive-design

我正在使用 CSS-Tricks 中的响应式下拉菜单

[响应式菜单概念](http://css-tricks.com/responsive-menu-concepts)

我希望用户单击链接后菜单消失。这是一个响应式单页网站，因此在单击链接后，用户会向下滚动到相关内容。

**单击后如何自动隐藏菜单？**

虽然菜单目前只有 CSS，但如果需要，我对添加 javascript 没有任何疑虑。

这是html

```
<div class="nav-container">
    <nav class="three columns" role="custom-dropdown">
        <input type="checkbox" id="button">
        <label for="button" onclick></label>

        <ul>
            <li><a href="#header"><span>Home</span></a></li>
            <li><a href="#aboutus"><span>About SoEmi</span></a></li>
            <li><a href="#massage"><span>Massage</span></a></li>
            <li><a href="#special"><span>Specials</span></a></li>
            <li><a href="#mobile"><span>Mobile Spa</span></a></li>
            <li><a href="#appointment"><span>Appointment</span></a></li>
            <li><a href="#where"><span>Find Us</span></a></li>
        </ul>
    </nav>
</div> 
```

我从 frenchie 修改了下面的代码并解决了这个问题。谢谢你。

```
$(document).ready(function () {

$('.nav-container').on({

   click: function () { $("#button").prop("checked", false); }

}, 'a'); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:19:21.430

为此，您需要 javascript，因为您需要处理事件。

像这样的东西：

```
$(document).ready(function () {

    $('.nav-container').on({

       click: function () { $('.nav-container').hide(); }

    }, 'a');

}); 
```

确保您`jQuery`在页面上有。

# xml - 使用 XSLT 进行 XML 转换，需要从多个复杂类型中获取最大过期日期

> ID：14544052
> 
> 赞同：1
> 
> 时间：2013-01-27T03:12:49.207
> 
> 标签：xml, xslt-1.0

我有以下节点结构，我需要在 XSLT 中获取`<FTACERTEXPIRATIONDATE>`最大值`<partSupplierFTA>`。有人可以帮我吗？

```
<modelMasterHeader>
   <sender>sender3889</sender>
   <receiver>receiver3890</receiver>
   <messageType>messageType3891</messageType>
   <batchID>97</batchID>
   <modelMaster>
      <ACTION>M</ACTION>
      <PARTNUMBER>PARTNUMBER3893</PARTNUMBER>
      <productCountry>
         <COUNTRYCODE>COUNTRYCODE3894</COUNTRYCODE>
         <COUNTRYGROUP>COUNTRYGROUP3895</COUNTRYGROUP>
         <LOCALPARTDESCRIPTION>LOCALPARTDESCRIPTION3896</LOCALPARTDESCRIPTION>
         <COUNTRYOFORIGIN>COUNTRYOFORIGIN3897</COUNTRYOFORIGIN>
         <HS>-0</HS>
         <HSDESCRIPTION>HSDESCRIPTION3898</HSDESCRIPTION>
         <SOURCESYSTEM>SOURCESYSTEM3899</SOURCESYSTEM>
         <ECCNUM>ECCNUM3900</ECCNUM>
         <USEGENLIC>USEGENLIC3901</USEGENLIC>
         <EXPORTHARMONIZEDTARIFFNUMBER>-0</EXPORTHARMONIZEDTARIFFNUMBER>
         <PARTUNIT>PARTUNIT3902</PARTUNIT>
      </productCountry>
      <Supplier>
         <PARTSUPPCOUNTRYOFORIGIN></PARTSUPPCOUNTRYOFORIGIN>
         <PRIMARYFLAG>Y</PRIMARYFLAG>
         <CTRY_OF_IMPORT>US</CTRY_OF_IMPORT>
         <SEQ_NO>23</SEQ_NO>
         <SupplierFTA>
            <FTASITEID>GLOBAL</FTASITEID>
            <FTASEQNO2>1</FTASEQNO2>
            <FTACERTEXPIRATIONDATE>11/30/2012</FTACERTEXPIRATIONDATE>
            <FTACOUNTRYOFORIGIN>US</FTACOUNTRYOFORIGIN>
            <FTASTATUS>H</FTASTATUS>
            <FTAHTSNUMBER>8414593000</FTAHTSNUMBER>
         </SupplierFTA>
         <SupplierFTA>
            <FTASITEID>GLOBAL</FTASITEID>
            <FTASEQNO2>2</FTASEQNO2>
            <FTACERTEXPIRATIONDATE>12/31/2013</FTACERTEXPIRATIONDATE>
            <FTACOUNTRYOFORIGIN>CN</FTACOUNTRYOFORIGIN>
            <FTASTATUS>V</FTASTATUS>
            <FTAHTSNUMBER>8414593000</FTAHTSNUMBER>
         </SupplierFTA>
         <SupplierFTA>
            <FTASITEID>GLOBAL</FTASITEID>
            <FTASEQNO2>1</FTASEQNO2>
            <FTACERTEXPIRATIONDATE>12/31/2012</FTACERTEXPIRATIONDATE>
            <FTACOUNTRYOFORIGIN>AU</FTACOUNTRYOFORIGIN>
            <FTASTATUS>V</FTASTATUS>
            <FTAHTSNUMBER>8302103000</FTAHTSNUMBER>
         </SupplierFTA>
        </Supplier>
        <Supplier>
         <PARTSUPPCOUNTRYOFORIGIN></PARTSUPPCOUNTRYOFORIGIN>
         <PRIMARYFLAG>Y</PRIMARYFLAG>
         <CTRY_OF_IMPORT>US</CTRY_OF_IMPORT>
         <SEQ_NO>23</SEQ_NO>
         <SupplierFTA>
            <FTASITEID>GLOBAL</FTASITEID>
            <FTASEQNO2>1</FTASEQNO2>
            <FTACERTEXPIRATIONDATE>11/30/2012</FTACERTEXPIRATIONDATE>
            <FTACOUNTRYOFORIGIN>US</FTACOUNTRYOFORIGIN>
            <FTASTATUS>H</FTASTATUS>
            <FTAHTSNUMBER>8414593000</FTAHTSNUMBER>
         </SupplierFTA>
         <SupplierFTA>
            <FTASITEID>GLOBAL</FTASITEID>
            <FTASEQNO2>2</FTASEQNO2>
            <FTACERTEXPIRATIONDATE>12/31/2013</FTACERTEXPIRATIONDATE>
            <FTACOUNTRYOFORIGIN>CN</FTACOUNTRYOFORIGIN>
            <FTASTATUS>V</FTASTATUS>
            <FTAHTSNUMBER>8414593000</FTAHTSNUMBER>
         </SupplierFTA>
         <SupplierFTA>
            <FTASITEID>GLOBAL</FTASITEID>
            <FTASEQNO2>1</FTASEQNO2>
            <FTACERTEXPIRATIONDATE>12/31/2012</FTACERTEXPIRATIONDATE>
            <FTACOUNTRYOFORIGIN>AU</FTACOUNTRYOFORIGIN>
            <FTASTATUS>V</FTASTATUS>
            <FTAHTSNUMBER>8302103000</FTAHTSNUMBER>
         </SupplierFTA>
        </Supplier>
     </ModelMaster>
   </ModelMasterHeader> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:09:38.320

这将使用 XSLT2 查找最新日期。如果您需要找到包含`<SupplierFTA>`节点，这应该为您提供一个起点。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    version="2.0">
    <xsl:variable name="a" select="//FTACERTEXPIRATIONDATE/text()"/>
    <xsl:template match="root">
        <xsl:value-of select="max(for $x in $a return xs:date(replace($x,'^([0-9]+)/([0-9]+)/([0-9]+)$','$3-$1-$2')))"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:42:42.750

虽然效率相当低，但您可以使用 an`xsl:for-each`并按年、月和日对值进行排序，然后选择第一项：

```
<xsl:for-each select="
        /modelMasterHeader/modelMaster/Supplier/SupplierFTA/FTACERTEXPIRATIONDATE
        ">
    <xsl:sort order="descending" data-type="number" 
        select="substring-after(substring-after(., '/'), '/')"/>
    <xsl:sort order="descending" data-type="number" 
        select="substring-before(substring-after(., '/'), '/')"/>
    <xsl:sort order="descending" data-type="number" 
        select="substring-before(.,'/')"/>
    <xsl:if test="position()=1">
        <xsl:value-of select="."/>
    </xsl:if>
</xsl:for-each> 
```

# hadoop - copyFromLocalFile 在 CDH4 中不起作用

> ID：14544055
> 
> 赞同：1
> 
> 时间：2013-01-27T03:13:17.443
> 
> 标签：hadoop, amazon-ec2, cloudera, java

我已经在亚马逊云中的 ubuntu 12 LTS 服务器上成功安装了 CDH4（1 个服务器）。我使用 Cloudera Manager 免费版安装软件，没有错误）。

我有一个程序，它使用 java API 将文件从我的家用计算机加载到云中的 HDFS。我想知道为什么这个程序会失败以及如何修复它。

```
Configuration conf = new Configuration();       
conf.set("fs.defaultFS", "hdfs://node01:8020");
FileSystem fs = FileSystem.get(conf);       
Path targetPath = new Path("/users/<username>/myfile.txt");
Path sourcePath = new Path("/home/<username>/myfile.txt");
fs.copyFromLocalFile(false,true,sourcePath,targetPath); 
```

我收到以下错误（名称节点日志）：

```
org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /user/<username>/myfile.txt could only be replicated to 0 nodes instead of minReplication (=1).  There are 1 datanode(s) running and 1 node(s) are excluded in this operation.
    at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget(BlockManager.java:1322)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2170)
    at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:471)
    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:297)
    at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44080)
    at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687) 
```

然后我将我的代码上传到云端并在本地运行代码（将文件从本地 fs 上传到 hdfs）没有任何错误。只有当我从我的个人计算机运行代码时才会发生这种情况......

当我在云服务器上使用 cli 'hadoop fs -put' 命令时，写入 hdfs 时没有错误。我还可以使用 Hue 上传文件。我做了一些阅读，发现当没有足够的磁盘空间时会出现这个问题，但是我有足够的 dfs 和非 dfs （见下面的报告）。我可以从家用计算机上使用 java API 成功读取 hadoop 文件系统，甚至可以使用 API 从 HBase 连接和读/写。所有端口都对我在此服务器上的 IP 开放。已检查文件权限。程序失败后，我在 hdfs 看到了我尝试上传的文件，但是内容是空白的（类似这篇帖子：[https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!主题/cdh-user/XWA-3H0ekYY](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/XWA-3H0ekYY) )

这是 hdfs dfsadmin -report 的输出

```
Configured Capacity: 95120474112 (88.59 GB)
Present Capacity: 95120474112 (88.59 GB)
DFS Remaining: 95039008768 (88.51 GB)
DFS Used: 81465344 (77.69 MB)
DFS Used%: 0.09%
Under replicated blocks: 177
Blocks with corrupt replicas: 0
Missing blocks: 0

-------------------------------------------------
Datanodes available: 1 (1 total, 0 dead)

Live datanodes:
Name: privateip:port (node01)
Hostname: node01
Rack: /default
Decommission Status : Normal
Configured Capacity: 95120474112 (88.59 GB)
DFS Used: 81465344 (77.69 MB)
Non DFS Used: 0 (0 KB)
DFS Remaining: 95039008768 (88.51 GB)
DFS Used%: 0.09%
DFS Remaining%: 99.91%
Last contact: Sun Jan 27 03:01:53 UTC 2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:39:30.907

我已经解决了问题-

我正在从我的家用机器连接到 hadoop，而不是在 hadoop 本地网络上。显然，当您这样做时，namenode 会告诉我的家用计算机使用 datanode 的私有 IP 写入 datanode。不在同一个网络上，我的家用机器无法连接到创建此错误的数据节点。

我通过创建从我的家庭网络到 hadoop 网络的 VPN 连接解决了这个问题，现在一切正常。

# dojo - 道场/开。Dojo 1.8/2.0 中的 emits、widget.on 等

> ID：14544058
> 
> 赞同：1
> 
> 时间：2013-01-27T03:13:48.917
> 
> 标签：dojo

我想全面了解事件在 Dojo 中的运作方式。我实际上对 Dojo 2.0 的工作方式很感兴趣——我现在使用的是 1.8，但我只对使用/记录*不会*在 2.0 中弃用的功能感兴趣。现在......在 _WidgetBase.js 我读到：

```
on: function(/*String|Function*/ type, /*Function*/ func){
  // For backwards compatibility, if there's an onType() method in the widget then connect to that.
                // Remove in 2.0. 
```

这基本上意味着在不久的将来，一个小部件基本上会做：

```
 on: function(/*String|Function*/ type, /*Function*/ func){
            // Otherwise, just listen for the event on this.domNode.
            return this.own(on(this.domNode, type, func))[0]; 
```

这很好。现在......在 1.8 的发行说明中，我看到：

“小部件事件，包括属性更改，作为 DOM 树上的事件发出”

发行说明指出这一点：[http](http://livedocs.dojotoolkit.org/quickstart/events#widget-events-published-to-the-dom) ://livedocs.dojotoolkit.org/quickstart/events#widget-events-published-to-the-dom尽管该文档似乎已经过时（它仍然谈论“普通对象”的方面）。

所以，我的问题是：是否有一个点/一堆页面/票可以描述整个事件工作的当前*更新方式？*

我目前的理解（对于 Dojo 2.0）：

*   on：100% 委托给 on.js
*   发射：当你运行 randomWidget.on('something', function(){}): -如果 randomWidget 有'onsomething'，它会简单地运行它；<--- 这会随着 2.0 消失吗？- 否则，它将委托给 on()

所以，一切都是为了理解dojo/on。那是我感到困惑的时候：阅读源代码，on.js 似乎将功能委托给小部件本身（...我刚刚在上面写过，将简单地从 2.0 委托给 dojo/on ......？！？）。除非委托给对象的位注定要消失……？

此外，我习惯于使用模板编写小部件，然后在我执行 data-dojo-attach-event="onclick:_click" 的地方添加项目，以确保在有人点击它时调用一个函数。使用新的 on() 系统，这会改变吗？（我的意思是，是否所有事件都传播到 DOM，反之亦然吗？）

那么，有人可以对此有所了解吗？我现在感觉有点不安，添加事件和做事，因为我不是 100% 确定发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:33:27.107

天哪，那是前一阵子......从那时起，我写了这个：

[https://github.com/mercmobily/writeups/blob/master/dojo/widgets_containers_on.md](https://github.com/mercmobily/writeups/blob/master/dojo/widgets_containers_on.md)

这几乎解释了一切！

默克。

# x86 - x86 中的 .data 和 .text 是什么？

> ID：14544068
> 
> 赞同：5
> 
> 时间：2013-01-27T03:17:08.130
> 
> 标签：x86

1

```
.data
value: .long 0x69
.text
#... 
```

2

```
.text
value: .long 0x69
#... 
```

我是一名学习 x86 的学生，我注意到`value`如果它在`.text`. 我一直在尝试阅读原因，但找不到。有人可以带我到可以阅读或简要解释的地方吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T03:30:53.403

`.text`节是可执行文件的实际可执行指令所在`.data`的区域，节是可执行文件的非基于堆栈的变量和常量所在的区域。您无法修改该`.text`部分中的值的原因是因为称为[W^X](http://en.wikipedia.org/wiki/W%5EX)（又名 PaX、Exec Shield、DEP 等）的安全功能在大多数现代操作系统上启用，其中操作系统不允许区域内存在执行时不可写。它可以帮助缓解任意代码注入。

# python - 正则表达式获取具有特定字母的所有单词的列表（unicode 字形）

> ID：14544071
> 
> 赞同：7
> 
> 时间：2013-01-27T03:17:37.343
> 
> 标签：python, regex, unicode, tamil, indic

我正在为 FOSS 语言学习计划编写 Python 脚本。假设我有一个 XML 文件（或者为了简单起见，是一个 Python 列表），其中包含一个特定语言的单词列表（在我的例子中，这些单词是泰米尔语，它使用基于婆罗米语的印度语脚本）。

我需要画出可以仅使用这些字母拼写的单词的子集。

一个英文例子：

```
words = ["cat", "dog", "tack", "coat"] 

get_words(['o', 'c', 'a', 't']) should return ["cat", "coat"]
get_words(['k', 'c', 't', 'a']) should return ["cat", "tack"] 
```

泰米尔语示例：

```
words = [u"மரம்", u"மடம்", u"படம்", u"பாடம்"]

get_words([u'ம', u'ப', u'ட', u'ம்')  should return [u"மடம்", u"படம்")
get_words([u'ப', u'ம்', u'ட') should return [u"படம்"] 
```

返回单词的顺序或输入字母的顺序不应该有所不同。

尽管我了解 unicode 代码点和字形之间的区别，但我不确定它们在正则表达式中是如何处理的。

在这种情况下，我只想匹配输入列表中由特定字素组成的那些单词，而不是其他（即字母后面的标记应该只跟在那个字母后面，但字素本身可以出现在任何命令）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T06:23:20.443

要支持可以跨越多个 Unicode 代码点的字符：

```
# -*- coding: utf-8 -*-
import re
import unicodedata
from functools import partial

NFKD = partial(unicodedata.normalize, 'NFKD')

def match(word, letters):
    word, letters = NFKD(word), map(NFKD, letters) # normalize
    return re.match(r"(?:%s)+$" % "|".join(map(re.escape, letters)), word)

words = [u"மரம்", u"மடம்", u"படம்", u"பாடம்"]
get_words = lambda letters: [w for w in words if match(w, letters)]

print(" ".join(get_words([u'ம', u'ப', u'ட', u'ம்'])))
# -> மடம் படம்
print(" ".join(get_words([u'ப', u'ம்', u'ட'])))
# -> படம் 
```

它假设同一个字符可以在一个单词中使用零次或多次。

如果您只想要包含完全给定字符的单词：

```
import regex # $ pip install regex

chars = regex.compile(r"\X").findall # get all characters

def match(word, letters):
    return sorted(chars(word)) == sorted(letters)

words = ["cat", "dog", "tack", "coat"]

print(" ".join(get_words(['o', 'c', 'a', 't'])))
# -> coat
print(" ".join(get_words(['k', 'c', 't', 'a'])))
# -> tack 
```

注意：`cat`在这种情况下，输出中没有，因为`cat`不使用所有给定的字符。

* * *

> 规范化是什么意思？你能解释一下 re.match() 正则表达式的语法吗？

```
>>> import re
>>> re.escape('.')
'\\.'
>>> c = u'\u00c7'
>>> cc = u'\u0043\u0327'
>>> cc == c
False
>>> re.match(r'%s$' % (c,), cc) # do not match
>>> import unicodedata
>>> norm = lambda s: unicodedata.normalize('NFKD', s)
>>> re.match(r'%s$' % (norm(c),), norm(cc)) # do match
<_sre.SRE_Match object at 0x1364648>
>>> print c, cc
Ç Ç 
```

没有规范化`c`和`cc`不匹配。字符来自[`unicodedata.normalize()`文档](http://docs.python.org/2.7/library/unicodedata.html#unicodedata.normalize)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T05:45:35.720

编辑：好的，不要使用这里的任何答案。当我认为 Python 正则表达式没有单词边界标记时，我写了所有这些，我试图解决这个缺陷。然后@Mark Tolonen 添加了 Python`\b`作为单词边界标记的注释！所以我发布了另一个简短的答案，使用`\b`. 我会把这个留在这里，以防有人有兴趣看到解决缺少的解决方案`\b`，但我真的不希望有人这样做。

* * *

制作一个只匹配特定字符集的字符串的正则表达式很容易。您需要使用的是一个“字符类”，其中仅包含您要匹配的字符。

我会用英语做这个例子。

`[ocat]` 这是一个字符类，它将匹配集合中的单个字符`[o, c, a, t]`。字符顺序无关紧要。

`[ocat]+` 将 a`+`放在末尾使其匹配集合中的一个或多个字符。但这本身还不够；如果你有“教练”这个词，这将匹配并返回“coac”。

可悲的是，“单词边界”没有正则表达式功能。[编辑：事实证明这是不正确的，正如我在第一段中所说。]我们需要自己做一个。有两种可能的单词开头：行的开头，或将我们的单词与前一个单词分开的空格。类似地，有两种可能的词尾：行尾，或将我们的词与下一个词分开的空格。

由于我们将匹配一些我们不想要的额外内容，因此我们可以在我们想要的模式部分周围加上括号。

为了匹配两个备选方案，我们可以在括号中创建一个组，并用竖线分隔备选方案。Python 正则表达式有一个特殊的符号来创建一个我们不想保留其内容的组：`(?:)`

因此，这是匹配单词开头的模式。行首或空格： `(?:^|\s)`

这是词尾的模式。空格或行尾：`(?:\s|$)

综上所述，这是我们的最终模式：

```
(?:^|\s)([ocat]+)(?:\s|$) 
```

您可以动态构建它。你不需要对整个事情进行硬编码。

```
import re

s_pat_start = r'(?:^|\s)(['
s_pat_end = r']+)(?:\s|$)'

set_of_chars = get_the_chars_from_somewhere_I_do_not_care_where()
# set_of_chars is now set to the string: "ocat"

s_pat = s_pat_start + set_of_chars + s_pat_end
pat = re.compile(s_pat) 
```

现在，这绝不会检查有效单词。如果您有以下文字：

```
This is sensible.  This not: occo cttc 
```

我向您展示的模式将匹配`occo`and `cttc`，而这些并不是真正的单词。它们是仅由字母组成的字符串`[ocat]`。

所以只需对 Unicode 字符串做同样的事情。（如果您使用的是 Python 3.x，那么所有字符串都是 Unicode 字符串，所以就可以了。）将泰米尔语字符放入字符类中，您就可以开始了。

这有一个令人困惑的问题：`re.findall()`不会返回所有可能的匹配项。

编辑：好的，我知道是什么让我感到困惑。

我们想要的是我们的模式可以使用，`re.findall()`这样你就可以收集所有的单词。但`re.findall()`只能找到*不重叠的*模式。在我的示例中，`re.findall()`仅返回`['occo']`而不是`['occo', 'cttc']`按预期返回...但这是因为我的模式与 . 之后的空格匹配`occo`。匹配组没有收集空白，但它仍然匹配，并且由于`re.findall()`希望匹配之间没有重叠，所以空白被“用完”并且不适用于`cttc`.

解决方案是使用我以前从未使用过的 Python 正则表达式的一个特性：特殊的语法说“不能在前面”或“不能在后面”。该序列`\S`匹配任何非空白，因此我们可以使用它。但是标点符号不是空格，我认为我们确实希望标点符号来分隔单词。“必须在前面”或“必须在后面”也有特殊的语法。所以，我认为，这是我们能做的最好的：

构建一个字符串，意思是“当字符类字符串在行首并且后跟空格时匹配，或者当字符类字符串前面是空格并且后跟空格时，或者当字符类字符串前面是空格并且后跟结尾时匹配行，或者当字符类字符串前面是行首，后跟行尾”。

这是使用的模式`ocat`：

```
r'(?:^([ocat]+)(?=\s)|(?<=\s)([ocat]+)(?=\s)|(?<=\s)([ocat]+)$|^([ocat]+)$)' 
```

我很抱歉，但我真的认为这是我们能做的最好的事情，而且仍然可以合作`re.findall()`！

不过，它实际上在 Python 代码中不那么令人困惑：

```
import re

NMGROUP_BEGIN = r'(?:'  # begin non-matching group
NMGROUP_END = r')'  # end non-matching group

WS_BEFORE = r'(?<=\s)'  # require white space before
WS_AFTER = r'(?=\s)'  # require white space after

BOL = r'^' # beginning of line
EOL = r'$' # end of line

CCS_BEGIN = r'(['  #begin a character class string
CCS_END = r']+)'  # end a character class string

PAT_OR = r'|'

set_of_chars = get_the_chars_from_somewhere_I_do_not_care_where()
# set_of_chars now set to "ocat"

CCS = CCS_BEGIN + set_of_chars + CCS_END  # build up character class string pattern

s_pat = (NMGROUP_BEGIN +
    BOL + CCS + WS_AFTER + PAT_OR +
    WS_BEFORE + CCS + WS_AFTER + PAT_OR +
    WS_BEFORE + CCS + EOL + PAT_OR +
    BOL + CCS + EOL +
    NMGROUP_END)

pat = re.compile(s_pat)

text = "This is sensible.  This not: occo cttc"

pat.findall(text)
# returns: [('', 'occo', '', ''), ('', '', 'cttc', '')] 
```

所以，疯狂的是，当我们有可以匹配的替代模式时，`re.findall()`似乎为不匹配的替代模式返回一个空字符串。所以我们只需要从结果中过滤掉长度为零的字符串：

```
import itertools as it

raw_results = pat.findall(text)
results = [s for s in it.chain(*raw_results) if s]
# results set to: ['occo', 'cttc'] 
```

我想只构建四种不同的模式，`re.findall()`在每种模式上运行，然后将结果连接在一起可能不会那么令人困惑。

编辑：好的，这是构建四种模式并尝试每种模式的代码。我认为这是一种改进。

```
import re

WS_BEFORE = r'(?<=\s)'  # require white space before
WS_AFTER = r'(?=\s)'  # require white space after

BOL = r'^' # beginning of line
EOL = r'$' # end of line

CCS_BEGIN = r'(['  #begin a character class string
CCS_END = r']+)'  # end a character class string

set_of_chars = get_the_chars_from_somewhere_I_do_not_care_where()
# set_of_chars now set to "ocat"

CCS = CCS_BEGIN + set_of_chars + CCS_END  # build up character class string pattern

lst_s_pat = [
    BOL + CCS + WS_AFTER,
    WS_BEFORE + CCS + WS_AFTER,
    WS_BEFORE + CCS + EOL,
    BOL + CCS
]

lst_pat = [re.compile(s) for s in lst_s_pat]

text = "This is sensible.  This not: occo cttc"

result = []
for pat in lst_pat:
    result.extend(pat.findall(text))

# result set to: ['occo', 'cttc'] 
```

编辑：好的，这是一种非常不同的方法。我最喜欢这个。

首先，我们将匹配文本中的所有单词。一个词被定义为一个或多个不是标点符号和空格的字符。

然后，我们使用过滤器从上面删除单词；我们只保留仅由我们想要的字符组成的单词。

```
import re
import string

# Create a pattern that matches all characters not part of a word.
#
# Note that '-' has a special meaning inside a character class, but it
# is valid punctuation that we want to match, so put in a backslash in
# front of it to disable the special meaning and just match it.
#
# Use '^' which negates all the chars following.  So, a word is a series
# of characters that are all not whitespace and not punctuation.

WORD_BOUNDARY = string.whitespace + string.punctuation.replace('-', r'\-')

WORD = r'[^' + WORD_BOUNDARY + r']+'

# Create a pattern that matches only the words we want.

set_of_chars = get_the_chars_from_somewhere_I_do_not_care_where()
# set_of_chars now set to "ocat"

# build up character class string pattern
CCS = r'[' + set_of_chars + r']+'

pat_word = re.compile(WORD)
pat = re.compile(CCS)

text = "This is sensible.  This not: occo cttc"

# This makes it clear how we are doing this.
all_words = pat_word.findall(text)
result = [s for s in all_words if pat.match(s)]

# "lazy" generator expression that yields up good results when iterated
# May be better for very large texts.
result_genexp = (s for s in (m.group(0) for m in pat_word.finditer(text)) if pat.match(s))

# force the expression to expand out to a list
result = list(result_genexp)

# result set to: ['occo', 'cttc'] 
```

* * *

编辑：现在我不喜欢上述任何解决方案；请参阅另一个答案，即使用`\b`, 以获得 Python 中的最佳解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T22:41:22.657

制作一个只匹配特定字符集的字符串的正则表达式很容易。您需要使用的是一个“字符类”，其中仅包含您要匹配的字符。

我会用英语做这个例子。

`[ocat]`这是一个字符类，它将匹配集合中的单个字符`[o, c, a, t]`。字符顺序无关紧要。

`[ocat]+`将 + 放在末尾使其匹配集合中的一个或多个字符。但这本身还不够；如果你有这个词，`"coach"`这将匹配并返回`"coac"`。

`\b[ocat]+\b' Now it only matches on word boundaries. (Thank you very much @Mark Tolonen for educating me about`\b`。）

因此，只需构建一个像上面这样的模式，只在运行时使用所需的字符集，然后就可以了。您可以将此模式与`re.findall()`或一起使用`re.finditer()`。

```
import re

words = ["cat", "dog", "tack", "coat"]

def get_words(chars_seq, words_seq=words):
    s_chars = ''.join(chars_seq)
    s_pat = r'\b[' + s_chars + r']+\b'
    pat = re.compile(s_pat)
    return [word for word in words_seq if pat.match(word)]

assert get_words(['o', 'c', 'a', 't']) == ["cat", "coat"]
assert get_words(['k', 'c', 't', 'a']) == ["cat", "tack"] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T03:59:47.323

我不会使用正则表达式来解决这个问题。我宁愿像这样使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> def get_words(word_list, letter_string):
    return [word for word in word_list if Counter(word) & Counter(letter_string) == Counter(word)]
>>> words = ["cat", "dog", "tack", "coat"]
>>> letters = 'ocat'
>>> get_words(words, letters)
['cat', 'coat']
>>> letters = 'kcta'
>>> get_words(words, letters)
['cat', 'tack'] 
```

此解决方案也适用于其他语言。`Counter(word) & Counter(letter_string)`找到两个计数器之间的交集，或 min(c[x], f[x])。如果这个交集等同于您的单词，那么您希望将该单词作为匹配项返回。

# c++ - 阅读任意长度的消息？你怎么知道你的完成

> ID：14544075
> 
> 赞同：2
> 
> 时间：2013-01-27T03:19:03.377
> 
> 标签：c++, sockets, boost, boost-asio

**编辑！只需读取该读取将阻塞，直到缓冲区已满。我到底如何接收较小的数据包而不必每次发送 1MB（我的最大缓冲区长度）？**如果我想发送任意长度的消息怎么办？

在 Java 中，您似乎可以毫无顾虑地发送一个 char 数组。但是在带有 boost 套接字的 C++ 中，我似乎要么必须继续调用`socket.read(...)`，直到我认为我拥有一切，要么发送我的完整缓冲区长度的数据，这似乎很浪费。

上下文的旧原始问题。

> 再一次提升插座让我完全难住了。我正在使用 `boost::asio::ssl::stream<boost::asio::ip::tcp::socket> socket;`我使用 boost SSL 示例进行指导，但我已经为它专门设置了一个线程，而不是进行异步调用。
> 
> 第一个`socket.read_some(...)`套接字很好，它读取所有字节。之后它读取 1 个字节，然后读取下一个字节，`socket.read_some(...)`这让我非常困惑。然后我注意到 read_some 通常有这种行为。所以我搬到了 `boost::asio::read`socket 确实有一个成员函数 read 让我感到惊讶。但是注意到 boost::asio 有一个读取函数，它需要一个套接字和缓冲区。但是它是永久阻塞的。
> 
> ```
> //read blocking data method
> //now
> bytesread = boost::asio::read(socket,buffer(readBuffer, max_length)); << perminatly blocks never seems to read.
> //was 
> //bytesread =  socket.read_some(buffer(readBuffer, max_length)); << after the 1st read it will always read one byte and need another 
> ```
> 
> socket.read_some(...) 调用以读取其余部分。
> 
> 我需要做什么`boost::asio::read(...)`工作？
> 
> 注意 .. 我使用了 wireshark 来确保服务器没有发送破碎的数据。服务器没有故障。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:41:56.537

在合并缓冲区的循环中读取，`read_some()`直到获得完整的应用程序消息。假设您可以取回 1 字节和缓冲区全长之间的任何内容。

关于“知道你什么时候完成” - 进入你的*应用程序级协议*，它可以使用分隔消息、固定长度消息、告诉有效负载长度的固定长度标头等。

# ios - ios - 获取 UIBarButtonItem 的坐标或 CGPoint

> ID：14544081
> 
> 赞同：1
> 
> 时间：2013-01-27T03:20:38.497
> 
> 标签：ios, uibutton, uibarbuttonitem, cgpoint

我需要获取 UIBarButtonItem 的 CGPoint。我知道我可以通过这样做得到一个普通的 UIButton ：

```
- (IBAction)buttonTapped:(UIButton *)sender
  {
    CGPoint coordinates = sender.frame.origin;
  } 
```

但是，如果我为 UIBarButtonItem 更改它，这似乎不起作用。我需要程序将这些值返回给我的原因是，否则在 iPhone 5、4S 和屏幕前，当我包含横向版本时，我需要设置 3 个可能的位置，如果没有更简单的方法，我会这样做实现这一目标的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:58:31.210

[我在这里](https://stackoverflow.com/questions/2994354/figure-out-uibarbuttonitem-frame-in-window)找到了这个答案。

正如所指出的， UIBarButtonItem 不扩展 UIView 因此它没有框架属性。链接中提供的解决方法是私有 API，通常不推荐。

```
UIView* barView = sender.view;
CGRect barFrame = [barView convertRect:barView.bounds toView:nil]; 
```

链接中还提供了另一种解决方案。

# objective-c - 在 NSTableView 中添加行？

> ID：14544082
> 
> 赞同：2
> 
> 时间：2013-01-27T03:21:00.253
> 
> 标签：objective-c, macos, cocoa, nstableview

我有一个 tableView 和两个按钮。一个添加一行，一个删除一行（已选择）。

1.  如何添加一行文本框单元格？
2.  另外，我将如何删除选定的行？
3.  用户是否可以选择一行，而不仅仅是单个单元格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T05:35:42.480

如果您正在寻找 Mac OSX：

您可以使用两种方法，在这两种情况下您都处理模型而不是视图：使用[绑定](http://cocoadevcentral.com/articles/000080.php)和常规编程的[ArrayController 。](http://www.keepandshare.com/doc/5462248/arraycontrollersortsearch-zip-58k?da=y)

> 1 如何添加一行文本框单元格？

```
//in the IBAction of add button
[yourModelArray addObject:newObject];
[yourTableView reloadData]; 
```

> 2 另外，我将如何删除选定的行？

```
//in the IBAction of remove button
[yourModelArray removeObjectAtIndex:[yourTableView selectedRow];
[yourTableView reloadData]; 
```

> 3 用户是否可以选择一行，而不仅仅是单个单元格？

```
NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:1];
[yourTableview selectRowIndexes:indexSet byExtendingSelection:NO];
//If you want to select multiple rows, use YES. 
```

# python - Matplotlib 与 Google App Engine

> ID：14544084
> 
> 赞同：5
> 
> 时间：2013-01-27T03:21:31.017
> 
> 标签：python, google-app-engine, import, matplotlib

我无法将 matplotlib 导入谷歌应用引擎。我用谷歌搜索并找到了一些解决方案，但它们似乎都不适合我。在我的 app.yaml 文件中，我有

```
libraries:
- name: matplotlib
  version: latest  
- name: numpy
  version: latest 
```

在我的 python 文件中，我将导入我可以拥有的 numpy

```
numpy.arange(10) 
```

问题是当我尝试导入 matplotlib

```
import matplotlib as plt 
```

访问页面时出现此错误

```
The website encountered an error while retrieving http://localhost:8080/. 
It may be down for maintenance or configured incorrectly. 
```

我删除了 matplotlib 导入，刷新，一切都恢复正常了。我已经看到应用引擎网页使用 matplotlib，例如[http://gae-matplotlib-demo.appspot.com](http://gae-matplotlib-demo.appspot.com)导入 matplotlib，所以我知道这是可能的。

如何在 Google App Engine 中使用 matplotlib？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:53:04.220

不幸的是，Matplotlib 目前不能在 GAE 开发应用服务器中工作，如库页面上的[Matplotlib 注释中所述。](https://developers.google.com/appengine/docs/python/tools/libraries27#matplotlib)如果您使用 appcfg 将其部署到生产服务器，它应该可以工作。不过，我意识到这对于开发来说并不理想。当开发服务器支持 Matplotlib 时，我们将更新该页面。

正如@mjibson 指出的那样，Dima Tisnek 已经[找到了一种](http://code.activestate.com/recipes/578393-gae-matplotlib-demo/)让它在开发应用服务器中工作的方法，但是它涉及到一些黑客攻击，我们并不正式支持这种方法。（作为记录，我能够使用这种方法使其工作。）

马特·朱卡

谷歌

# python - 类变量不能在函数中修改

> ID：14544085
> 
> 赞同：0
> 
> 时间：2013-01-27T03:21:56.770
> 
> 标签：python, class, python-3.x

这是到目前为止的代码：

```
class Player:
    hand = []
    def take(self, card):
        hand.append(card) 
```

这是我调用该函数时的错误：

```
 hand.append(card)
NameError: global name 'hand' is not defined 
```

我试过让它像这样全球化：

```
class Player:
    hand = []
    def take(self, card):
        global hand
        hand.append(card) 
```

它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:27:18.310

尝试通过“self”指针引用变量“hand”：

```
class Player:
    hand = []
    def take(self, card):
        self.hand.append(card) 
```

在 Python 中，成员函数中的 self 指针始终包含调用该函数的类的实例的值，从而允许您编辑该实例的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:33:35.107

正是奎里奥姆所说的。

当然，除非您打算在该类的所有实例中使用一个“手”变量（即全局变量，这是 Python 认为您正在尝试做的事情，但这不是很好的编码实践）。在这种情况下，你会这样做：

```
hand = []

class Player:
   def take(self, card):
      hand.append(card) 
```

但我假设这不是你想要做的，因为它看起来像扑克类型的场景。

# mongodb - Mongodb Java API 在 servlet 中打开了太多的连接

> ID：14544092
> 
> 赞同：0
> 
> 时间：2013-01-27T03:23:37.243
> 
> 标签：mongodb, caching, servlets, connection

据我了解，每个应用程序只需要一个 MongoClient 实例，因此为了方便起见，我使用此方法扩展了 HttpServlet：

```
DB getDB(String dbName) throws Exception {
    MongoClient m = (MongoClient)getServletContext().getAttribute("mongo");
    if(m == null) {
        m = new MongoClient();
        getServletContext().setAttribute("mongo",m);
    }
    return m.getDB(dbName);
} 
```

当我运行这段代码时，它工作得很好，我连接并做我需要做的工作，但每次我运行这个特定的 Servlet 时，它似乎都会不断地打开到 mongodb 的新连接：

```
1 月 26 日星期六 21:31:42 [initandlisten] 接受来自 127.0.0.1:46860 #1 的连接（现在打开 1 个连接）
1 月 26 日星期六 21:31:53 [initandlisten] 接受来自 127.0.0.1:46861 #2 的连接（现在打开 2 个连接）
1 月 26 日星期六 21:32:00 [initandlisten] 接受来自 127.0.0.1:46863 #3 的连接（现在打开 3 个连接）

```

在我这样做的页面中：

```
DB db = getDB("foo");
col = db.getCollection("bar"); 
```

然后运行一个简单的查询。谁能解释为什么我得到这么多新的连接？我也看过这个 Mongo.Holder 类。这是做我正在做的事情的首选方式吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:26:53.933

MongoDB Java驱动实现了一个连接池，默认维护10个连接。池由驱动程序在内部进行管理。从 servlet 容器到 Mongo 服务器的连接不应超过 10 个。如果您想更改这些默认设置，请查看[MongoOptions](http://api.mongodb.org/java/current/com/mongodb/MongoOptions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:18:54.603

MongoClientOptions 中连接池的默认最大大小从 10 增加到 100，详细的 Javadoc 中有提到：http://api.mongodb.org/java/current/com/mongodb/MongoClientOptions.html#getConnectionsPerHost [()](http://api.mongodb.org/java/current/com/mongodb/MongoClientOptions.html#getConnectionsPerHost())。

如果你使用的是 MongoOptions，默认还是 10。

# java - 如果先指定 -jar，为什么 -Dproperty=value 不起作用？

> ID：14544095
> 
> 赞同：0
> 
> 时间：2013-01-27T03:24:40.857
> 
> 标签：java, command-line, system-properties

给定以下课程：

```
public class SpecifySystemPropertiesCommandLine {

    public static void main(String[] args) {
        String prop1 = System.getProperty("prop1", "defaultvalue");
        String prop2 = System.getProperty("prop2", "defaultvalue");

        System.out.println("prop1 = " + prop1);
        System.out.println("prop2 = " + prop2);
    }

} 
```

为什么以下不起作用：

```
$ java -jar sysprop.jar -Dprop1="i can haz?"
prop1 = defaultvalue
prop2 = defaultvalue 
```

但这有效：

```
$ java -Dprop1="i can haz?" -jar sysprop.jar 
prop1 = i can haz?
prop2 = defaultvalue 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:29:30.890

请参阅[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)。

jar 文件名之后的所有内容都是传递给类/应用程序的 main 方法的参数。

-Dprop=val 是传递给 java 进程的参数。

# grep - 使用 grep 进行模式匹配

> ID：14544099
> 
> 赞同：0
> 
> 时间：2013-01-27T03:25:54.320
> 
> 标签：grep, pattern-matching

假设我们有一个输入字符串，例如

```
Nice 
```

我们有模式

```
D*A*C*N*a*g*.h*ca*e 
```

然后“Nice”将匹配模式。（`*`表示 0 次或多次出现，`.`表示一个字符）我认为在这种情况下使用 grep 比 java 更好（也许）。我怎样才能在grep中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:35:10.710

使用相同的正则表达式：

```
grep 'D*A*C*N*a*g*.h*ca*e' <<EOF
Nice
EOF 
```

* * *

> 如果输入是“Nicely”，它仍然会打印出来！它是如何工作的？

当前的正则表达式在行中的任何位置查找模式。如果它必须完全匹配（整行），则将锚点添加到行的开始（`^`）和结束（`$`）：

```
grep '^D*A*C*N*a*g*.h*ca*e$' <<EOF
Nice
Nicely
Darce
Darcy
Darcey
EOF 
```

# php - 如何使用 PHP simpleXML 从数据库中回显这些 XML 数据？

> ID：14544101
> 
> 赞同：0
> 
> 时间：2013-01-27T03:26:02.533
> 
> 标签：php, xml, wordpress, simplexml

我在 Wordpress 中使用了一个表单构建器插件，它将表单输入作为 XML 数据提交到数据库。现在我想获取该数据并将其显示在另一个页面中。我已经开始尝试 simpleXML 来实现这一点，但现在我遇到了困难。

出现在数据库每一行中的 XML 数据遵循以下格式：

```
<form>
    <FormSubject>Report</FormSubject>
    <FormRecipient>****@***.com</FormRecipient>
    <Name>admin</Name>
    <Department>test</Department>
    <Value>1000</Value>
    <Comments>test</Comments>
    <Page>http://***.com</Page>
    <Referrer>http://****.com</Referrer>
</form> 
```

我以前曾设法使用 simpleXML 从数据库中相同标记的 XML 字符串中获取我需要的数据，但现在我的问题是，如何对数据库中的每一行进行循环？

运行以下代码时，wordpress 会显示一个空白页，表示存在错误：

```
<?php
global $wpdb;
$statistics = $wpdb->get_results("SELECT * FROM wpformbuilder_results WHERE form_id = '00000000000000000001';");
echo "<table>";
foreach($statistics as $statistic){
$string = $statistic->xmldata
$xml = simplexml_load_string($string);
$Name = (string) $xml->Name;
$Department = (string) $xml->Department;
$Value = (string) $xml->Value;
$Comments = (string) $xml->Comments;

echo "<tr>";
echo "<td>".$statistic->timestamp."</td>";
echo "<td>".$Name."</td>";
echo "<td>".$Department."</td>";
echo "<td>".$Value."</td>";
echo "<td>".$Comments."</td>";
echo "</tr>";
}
echo "</table>";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:25:22.657

你不见了；在第 5 行

```
$string = $statistic->xmldata 
```

应该

```
$string = $statistic->xmldata; 
```

您应该考虑在 wp-config.php 文件中启用 WP_DEBUG 常量。将以下代码插入到您的 wp-config.php 中，就在 /* 之前，就是这样，停止编辑！快乐的博客。*/

```
define('WP_DEBUG', true);

/* That's all, stop editing! Happy blogging. */ 
```

有关调试的更多提示，请阅读[codex](https://codex.wordpress.org/Debugging_in_WordPress)

Formbuilder 用户自定义函数在 formbuilder_xml_db_results 类中提取 XML 数据：

```
function xmltoarray($xml)
    {
        $xml = trim($xml);

        $match = "#<([a-z0-9_]+)([ \"']*[a-z0-9_ \"']*)>(.*)(</\\1>)#si";
        $offset = 0;

        if(!preg_match($match, $xml, $regs, false, $offset)) {
            return($xml);
        }

        while(preg_match($match, $xml, $regs, false, $offset))
        {
            list($data, $element, $attribs, $content, $closing) = $regs;
            $offset = strpos($xml, $data) + strlen($data);

            $tmp = $this->xmltoarray($content);
            $result[$element] = $tmp;

        }

        return($result);
    } 
```

在您的代码中定义该函数（在全局 $wpdb 之前；您不必害怕与 Class 中定义的该函数同名），然后以这种方式修改您的代码：

```
<?php
global $wpdb;
$statistics = $wpdb->get_results("SELECT * FROM wpformbuilder_results WHERE form_id = '00000000000000000001';");
echo "<table>";
foreach($statistics as $statistic){
$xml = xmltoarray( $statistic->xmldata );
$Name = (string) $xml['form']['Name'];
$Department = (string) $xml['form']['Department'];
$Value = (string) $xml['form']['Value'];
$Comments = (string) $xml['form']['Comments'];

echo "<tr>";
echo "<td>".$statistic->timestamp."</td>";
echo "<td>".$Name."</td>";
echo "<td>".$Department."</td>";
echo "<td>".$Value."</td>";
echo "<td>".$Comments."</td>";
echo "</tr>";
}
echo "</table>";

?> 
```

**编辑：**将 $xml['Comments'] 编辑为 $xml['form']['Comments'] 和类似的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:59:45.197

我通过使用从 XML 字符串中去除反斜杠来修复它`stripslashes()`

# audio - 采样 wav 文件以获取特定时间的幅度

> ID：14544103
> 
> 赞同：0
> 
> 时间：2013-01-27T03:26:04.750
> 
> 标签：audio, wav, sampling, wave, amplitude

我想知道是否有任何方法可以循环浏览 .wav 文件以获取 wav 文件中特定点的振幅/DB。我现在正在将它读入一个字节数组，但这对我来说没有任何帮助。

我将它与我开发的一些硬件结合使用，这些硬件将光数据编码为二进制并输出音频。我不会详细介绍，但我需要能够在 c# 或 c++ 中执行此操作。我在任何地方都找不到有关此的任何信息。我从未编写过任何与音频相关的东西，所以如果这是一件非常简单的事情，请原谅。

我没有任何开始，因为这是起点，所以如果有人能指出一些函数、库或方法，以便能够在文件中的特定时间收集波的幅度，我将不胜感激。

我希望这是足够的信息，如果您愿意提供帮助，请提前感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:18:16.243

这是可能的，并且以一种简单的方式完成：带有 PCM 音频的文件包含每个通道的一个值，每 (1/采样率) 秒。

然而，这些值可能会有所不同：8 位、16 位、单精度浮点值。您当然必须考虑到这一点，这就是您不能直接从字节数组中获取字节的原因。

.WAV 文件在实际有效负载之前还有一个标头。

# javascript - 复选框检查事件监听器

> ID：14544104
> 
> 赞同：107
> 
> 时间：2013-01-27T03:26:08.720
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, dom-events

最近我一直在使用 Chrome 插件 API，我正在寻找一个插件，它可以让我更轻松地管理网站。

现在我想做的是在选中某个复选框时触发一个事件。由于这个网站不属于我，我无法更改代码，因此我使用的是 Chrome API。主要问题之一是有一个名称，而不是一个 ID。我想知道是否可以在选中带有“名称”的特定复选框后触发该功能。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-01-27T04:52:10.497

简短回答：使用[`change`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event)事件。这里有几个实际的例子。由于我误读了这个问题，我将包括 jQuery 示例以及纯 JavaScript。但是，通过使用 jQuery，您并没有获得太多（如果有的话）。

## 单个复选框

使用[`querySelector`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector).

```
var checkbox = document.querySelector("input[name=checkbox]");

checkbox.addEventListener('change', function() {
  if (this.checked) {
    console.log("Checkbox is checked..");
  } else {
    console.log("Checkbox is not checked..");
  }
});
```

```
<input type="checkbox" name="checkbox" />
```

## 带有 jQ​​uery 的单个复选框

```
$('input[name=checkbox]').change(function() {
  if ($(this).is(':checked')) {
    console.log("Checkbox is checked..")
  } else {
    console.log("Checkbox is not checked..")
  }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<input type="checkbox" name="checkbox" />
```

## 多个复选框

这是复选框列表的示例。要选择多个元素，我们使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)而不是`querySelector`. 然后使用[`Array.filter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)and[`Array.map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)提取检查值。

```
// Select all checkboxes with the name 'settings' using querySelectorAll.
var checkboxes = document.querySelectorAll("input[type=checkbox][name=settings]");
let enabledSettings = []

/*
For IE11 support, replace arrow functions with normal functions and
use a polyfill for Array.forEach:
https://vanillajstoolkit.com/polyfills/arrayforeach/
*/

// Use Array.forEach to add an event listener to each checkbox.
checkboxes.forEach(function(checkbox) {
  checkbox.addEventListener('change', function() {
    enabledSettings = 
      Array.from(checkboxes) // Convert checkboxes to an array to use filter and map.
      .filter(i => i.checked) // Use Array.filter to remove unchecked checkboxes.
      .map(i => i.value) // Use Array.map to extract only the checkbox values from the array of objects.

    console.log(enabledSettings)
  })
});
```

```
<label>
   <input type="checkbox" name="settings" value="forcefield">
   Enable forcefield
</label>
<label>
  <input type="checkbox" name="settings" value="invisibilitycloak">
  Enable invisibility cloak
</label>
<label>
  <input type="checkbox" name="settings" value="warpspeed">
  Enable warp speed
</label>
```

## 带有 jQ​​uery 的多个复选框

```
let checkboxes = $("input[type=checkbox][name=settings]")
let enabledSettings = [];

// Attach a change event handler to the checkboxes.
checkboxes.change(function() {
  enabledSettings = checkboxes
    .filter(":checked") // Filter out unchecked boxes.
    .map(function() { // Extract values using jQuery map.
      return this.value;
    }) 
    .get() // Get array.

  console.log(enabledSettings);
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<label>
   <input type="checkbox" name="settings" value="forcefield">
   Enable forcefield
</label>
<label>
  <input type="checkbox" name="settings" value="invisibilitycloak">
  Enable invisibility cloak
</label>
<label>
  <input type="checkbox" name="settings" value="warpspeed">
  Enable warp speed
</label>
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-11-24T02:12:48.587

由于我`jQuery`在 OP 中看不到标签，因此这是一个仅限*javascript*的选项：

```
document.addEventListener("DOMContentLoaded", function (event) {
    var _selector = document.querySelector('input[name=myCheckbox]');
    _selector.addEventListener('change', function (event) {
        if (_selector.checked) {
            // do something if checked
        } else {
            // do something else otherwise
        }
    });
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/wewtnbpc/1/)**

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-12-03T19:22:13.477

如果您的 html 中有一个复选框，例如：

`<input id="conducted" type = "checkbox" name="party" value="0">`

并且您想使用 javascript 将 EventListener 添加到此复选框，在您关联的 js 文件中，您可以执行以下操作：

```
checkbox = document.getElementById('conducted');

checkbox.addEventListener('change', e => {

    if(e.target.checked){
        //do something
    }

}); 
```

# android - GridView 和 ListView 在同一个活动中？notifyDataSetChanged()

> ID：14544106
> 
> 赞同：0
> 
> 时间：2013-01-27T03:26:39.160
> 
> 标签：android, listview, notifydatasetchanged

我在同一个活动上有一个gridview和一个listview，当`notifyDataSetChanged()`在listview上使用更新适配器时，gridview焦点项目总是将焦点重置到gridview中的第一个项目。如何`notifyDataSetChanged()`从“看起来”停止列表视图，重绘屏幕上的所有视图并让它单独更新列表视图？

谢谢！

# javascript - HTML视频播放器解决方案？

> ID：14544109
> 
> 赞同：1
> 
> 时间：2013-01-27T03:27:07.670
> 
> 标签：javascript, html, video, browser, html5-video

我想创建一个能够播放这些视频文件的视频播放器：

```
 'mpg':
     'mov': 
     'wmv':
     'rm':
     '3g2':
     '3gp':
     'm4v':
     'mp4':
     'asf':
     'asx':
     'avi':
     'flv':
     'srt':
     'swf':
     'vob': 
```

这些视频将用于在线考试，因为某些问题可能需要观看视频以获取信息。该视频需要在所有主要浏览器上运行。能够在电脑或ipad上工作。

我的问题是创建 html 视频播放器的最佳方式是什么？

我是否选择 HTML5 + object + embed 方法（示例）：

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
  <object data="movie.mp4" width="320" height="240">
    <embed src="movie.swf" width="320" height="240">
  </object> 
</video> 
```

要包含其他文件类型，我是否只包含更多`<embed>`标签来支持这些文件？

或者是使用`Youtube`播放器的最佳方式：

**框架：**

```
<iframe width="420" height="345"
src="http://www.youtube.com/embed/XGSy3_Czz8k">
</iframe> 
```

或者

**冲击波：**

```
<embed
width="420" height="345"
src="http://www.youtube.com/v/XGSy3_Czz8k"
type="application/x-shockwave-flash">
</embed> 
```

我也在 SO 上看到了这个例子，但不确定它是否好用：

```
<object id='tempVid1' name="emQTPlayer" height="240px"
                    width="320px" style="behavior: url(#BinaryBehaviorID)"
                    codebase="http://www.apple.com/qtactivex/qtplugin.cab"
                    classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B">
                    <param name="autoplay" value="false" />
                    <param name="src"
                        value="" />
                    <param name="controller" value="true" />
                    <param name="type" value="video/quicktime" />
                    <param name="align" value="bottom" />
                    <param name="border" value="0" />
                    <param name="scale" value="tofit" />
                    <%--                                    <param name="wmode" value="transparent">--%>
                    <param name="showcontrols" value="true">
                    <embed id='tempVid2' name="emQTPlayer" type="video/quicktime"
                        autoplay="false" height="auto" width="auto" align="top"
                        border="0" controller="true" postdomevents="true"
                        pluginspage="http://www.apple.com/quicktime/download/"
                        showcontrols="true" scale="tofit"
                        src='' />
                </object> 
```

更多信息在这里：[http ://www.w3schools.com/html/html_videos.asp](http://www.w3schools.com/html/html_videos.asp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:44:22.933

您列表中的大多数格式不适用于所有平台。有些需要仅在特定平台上可用的插件。

您将需要转换为 h.264 mp4 文件 + 另一个（ogg 或 webm，除非您可以使用 flash 播放 mp4 文件）。

您可以自己执行此操作，或使用[Zencoder](http://zencoder.com/en/)之类的工具为您执行此操作。

# spring - 如何使用 Spring MVC 和 Hibernate 将对象保存在两个不同的表中

> ID：14544110
> 
> 赞同：0
> 
> 时间：2013-01-27T03:27:15.333
> 
> 标签：spring, hibernate, spring-mvc

让我们考虑以下几点：

```
@Entity
@Table(name="person")
public class Person implements Serializable {

  @Id
  @GeneratedValue
  @Column(name="id")
  private int id;

  @Column(name="firstName")
  private String firstName;

  @Column(name="lastName")
  private String lastName;

  ...getters/setters...

} 
```

和

```
@Entity
@Table(name="car")
public class Car implements Serializable {

  @Id
  @GeneratedValue
  @Column(name="id")
  private int id;

  @Column(name="brand")
  private String brand;

  @Column(name="model")
  private String model;

  @Column(name="personId")
  private String personId;

  ...getters/setters...

} 
```

假设用户要订阅并输入他的个人信息，例如名字、姓氏、汽车品牌以及汽车型号。

我不希望此人的个人信息与汽车信息存储在同一个表中。

我也希望能够用 检索汽车信息`personId`，这就是我`personId`在 Car 类中的原因。

我应该使用哪些注释来实现这一点？显然我需要对`Car`表进行约束并创建`personId`一个外键，对吗？什么是最好的方法？

我见过不同的东西，什么是最好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:42:40.587

在 Car 类中，替换

```
@Column(name="personId")
private String personId; 
```

和

```
@ManytoOne(fetch = FetchType.LAZY)
@CJoinColumn(name="person")
private Person person; 
```

在 Person 类中，添加

```
@OneToMany(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE})
private List<Car> cars; 
```

您现在正在形成双向，`one-to-many`这意味着您可以检索人和汽车的人（所有者）的汽车。

级联允许在保存人员时保存或更新汽车。当人员被移除时，所有汽车也会被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:52:47.613

这取决于您的要求。如果你想为多个用户使用同一个车辆，那么你应该把它变成一个实体，并使用多对多的关系。

如果您根本不想更改实体结构，而只是数据库映射然后查看`@SecondaryTable`注释`@SecondaryTables`，它们为实体定义了更多表，然后您应指定每列使用哪个表（否则它们被分配到主表）。

# python - OAuth + 谷歌日历 + Python

> ID：14544113
> 
> 赞同：0
> 
> 时间：2013-01-27T03:27:45.563
> 
> 标签：python, oauth, calendar, passwords

我卡住了。。

基本上我的目标是我希望能够提取最终用户的日历，并每天解析他们的数据。我不需要他们进行任何交互，只需使用 OAuth 对他们进行身份验证即可。我目前的解决方案是一个纯文本文件，它作为字典遍历并以这种方式拉入日历，但这只是自找麻烦。我刚刚开始使用 OAuth，但不知道如何在我的实例中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:19:00.097

看看[这个](https://github.com/GoogleCloudPlatform/storage-oauth2-tool-python/blob/master/gs-oauth.py)使用 OAuth2 访问 Google Cloud Storage 的示例。您应该能够通过相对较小的调整来使用它来提取 Google 日历数据（主要是将范围`https://www.googleapis.com/auth/devstorage.full_control`从`https://www.googleapis.com/auth/calendar`

[这个例子](http://code.google.com/p/google-api-python-client/source/browse/samples/plus/plus.py)也很有帮助，它展示了如何遍历所有用户的 Google+ 活动并将它们打印到控制台。尤其要注意如何使用`from apiclient.discovery import build`构建 API 对象来与服务交互。

您还可以使用[OAuth 2.0 游乐场工具](https://developers.google.com/oauthplayground/)使用 Google 日历 API，或使用[API 资源](https://developers.google.com/apis-explorer/#p/calendar/v3/)管理器查看 API 。

# node.js - 在 win8 中运行带主管的 node.js

> ID：14544114
> 
> 赞同：0
> 
> 时间：2013-01-27T03:27:53.653
> 
> 标签：node.js, windows-8, node-supervisor

我正在尝试让我的节点服务器与主管一起运行。我让它在 Windows 7 中运行，但现在它一直失败。这是输出：

```
"C:\Program Files\nodejs\node.exe" C:\Users\Mark\AppData\Roaming\npm\node_modules\supervisor\lib\cli-wrapper.js --no-restart-on error server.js

DEBUG: Running node-supervisor with

CreateProcessW: The system cannot find the file specified.
DEBUG:   program 'server.js'
DEBUG:   --watch '.'
DEBUG:   --ignore 'undefined'
DEBUG:   --extensions 'node|js'
DEBUG:   --exec 'node'
DEBUG: Starting child process with 'node server.js'
DEBUG: Watching directory 'D:\Websites\MyProject' for changes.
DEBUG: Program node server.js exited with code 127 
```

[这家伙](https://stackoverflow.com/a/7762775/65387)建议改用nodemon，但结果或多或少是一样的：

```
"C:\Program Files\nodejs\node.exe" C:\Users\Mark\AppData\Roaming\npm\node_modules\nodemon\nodemon.js server.js
26 Jan 22:23:10 - [nodemon] v0.7.1
26 Jan 22:23:10 - [nodemon] watching: D:\Websites\MyProject
26 Jan 22:23:10 - CreateProcessW: The system cannot find the file specified.
[nodemon] starting `node server.js`
26 Jan 22:23:10 - [nodemon] app crashed - waiting for file changes before starting... 
```

但是，如果我运行“vanilla”node.js，它会正常启动：

```
"C:\Program Files\nodejs\node.exe" server.js
Listening on http://localhost:8081 
```

可能是什么问题？是`server.js`找不到文件吗？为什么会找不到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:05:29.383

重新启动Windows，问题消失了。现在启动很好。可能只需要重新启动 Windows 或我的 IDE 来刷新一些文件路径:-)

# c# - SortedSet 从起始位置枚举

> ID：14544115
> 
> 赞同：0
> 
> 时间：2013-01-27T03:28:02.453
> 
> 标签：c#, c#-4.0

我想从给定位置开始枚举一个排序集。假设我的集合包含 [1,2,10,23,30]。我想搜索 10 然后从该位置枚举。我相信从排序集中的固定位置进行的枚举在 O(n) 中运行，其中 n 是您要访问的元素数。但是按索引访问是 O(log n)。因此，如果我试图说找到 10 并获得索引 2，然后执行索引 2 - N 的 for 循环，这将是运行时 O(n log n)，这是不可接受的。

有人在这里有经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:25:15.043

使用[GetViewBetween](http://msdn.microsoft.com/en-us/library/dd381801.aspx)。它是为范围扫描而制作的。

每当我使用一个新类时，我都会在 Reflector 中查看它的成员，以尝试在那里发现有用的宝石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:13:03.927

`s.SkipWhile(x => x < 10)`应该是`O(n)`，其中 n 是列表中的元素数。

从一个元素移动到下一个元素很快；如果按索引查找，则从一开始就移动到第*i个元素可能不是。*

# c#-4.0 - 基本集合论（交集、联合、排除）在大型对象集上的性能，这在 c# 或 f# 中是更快的 linq？

> ID：14544117
> 
> 赞同：0
> 
> 时间：2013-01-27T03:28:19.957
> 
> 标签：c#-4.0, f#, c#-to-f#

我想比较两个基于联合和交集的实体框架 pocos 集合。我试图找出开箱即用是否使用 f# 而不是 linq 处理这些集合会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:52:36.470

您不需要运行分析器——F# 3.0 支持 LINQ，因此您应该能够组合一个小型基准测试项目，该项目同时使用 LINQ 和标准 F# `Set<'T>`，并测量完成您需要的任何操作的时间（`System.Diagnostics.Stopwatch`用于此）。

事情就是这样——这个问题的答案在很大程度上取决于你的确切需求，所以你需要做一些测试来看看哪个对*你的*用例来说更快。例如，如果您创建一个小型基准测试应用程序并发现 LINQ（在 C# 或 F# 3.0 中）快了 10 毫秒，您是否只使用 LINQ，因为它更快？也许，也许不是——这取决于 10 毫秒的节省对您的应用程序是否重要；在大多数情况下，它可能不是，因此您应该使用最容易与其余代码集成的任何解决方案。

就个人而言，我会在这里使用 F# 3.0 和 LINQ，因为它允许非常简洁的定义，并且如果 EF 可以将部分或全部计算卸载到数据库服务器，它也可能会更快。

# php - 回显 html 时调用 html attr

> ID：14544120
> 
> 赞同：0
> 
> 时间：2013-01-27T03:28:40.813
> 
> 标签：php, javascript, jquery, ajax

我正在通过将 html 从我的控制器回显到 ajax 函数来创建一个列表。所以我的javascript通过ajax获取这些数据并创建li的......然后我想从这个创建的html中调用一个属性......它不起作用。... 我究竟做错了什么？

JAVA脚本

//创建列表

```
$.ajax({
             url:'ol_locations',  // ol_locations is a controller, see below.
             dataType: 'html',

                success: function (data3){

            //  list elements in the ordered list

            $('ol.locations_list').html(data3);
                }});
//list populated successfully 
```

控制器 ol_location ....

公共功能 ol_locations(){

```
 $this->load->model('model_location');
    $data = $this ->model_location -> fetch_location_data();
    $i=1;
    foreach ($data as $row){

        if ($row->Type == 'locality'){

            echo "<div data-color ='red' id='".$i."'><li><a href ='#'> <span class='location_title'>". $row -> Nickname . " </span> ". $row->FormattedAddress .
            "</a> <a class='remove_location' title='Remove this location' data-nid='{$row->Id}'
            style='float:right;'>x</a>" ." </li> </div>";
            $i++;
        }
        else {
                 echo "<div data-color ='red' id='".$i."'><li> <a href ='#'><span class='location_title'>". $row -> Nickname. " ". $row -> Radius ." km of </span> ". " </span> ". $row->FormattedAddress ."</a><a class='remove_location' title='Remove this location' data-nid='{$row->Id}'style='float:right;'>x</a>" ." </li> </div>";
            $i++;
        } }
} 
```

* * *

现在HTML呈现良好......但是当我尝试访问这个“创建的html”中的任何元素时，什么也没有发生......

例如 alert ($('#1').attr('color')); 将给出“null”或未定义。

我尝试了很多东西，比如

var initial_location = $('ol.locations_list li a'). attr('href');

仍然为空...

我真的被困在这里了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:14:31.647

由于您说 html 已正确添加到您的 DOM，因此您可能会尝试在新元素实际加载之前访问它们。确保仅在之后放置与新元素相关的任何代码`$('ol.locations_list').html(data3);`，例如 -

```
$.ajax({
         url:'ol_locations',  // ol_locations is a controller, see below.
         dataType: 'html',

            success: function (data3){

        //  list elements in the ordered list

        $('ol.locations_list').html(data3);
}}).done(function() {
    alert ($("#1").attr('data-color'));
}); 
```

# c++ - 使用opencv跟踪多个人头

> ID：14544121
> 
> 赞同：2
> 
> 时间：2013-01-27T03:28:41.313
> 
> 标签：c++, opencv, face-recognition

我正在做我正在做一个视频处理项目，初步步骤涉及人脸识别。由于我无法训练fisher / eigen人脸识别器模型，我尝试使用LBP人脸识别器模型并且它确实有效......基本上我的人脸识别程序所做的是它在识别的人脸周围绘制一个矩形并且我不想要任何矩形外星人脸...但是 LPB 识别器强制这样做？...因为它预测检测到的人脸匹配的最近标签....因此外星人脸也被预测为训练有素的人脸...:-(((. ..还有人知道如何使用任何预处理技术改进 LBP 人脸识别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:59:30.760

你问的问题接近人脸验证。

LBP 人脸识别器将置信度值（距离值）与标签一起返回。
如果您不想在出现外星人面孔时绘制矩形，请添加额外条件：-

*仅在Confidence score* <**阈值**时绘制

 **要确定阈值，您必须对经过训练的模型进行充分测试；找出置信度分数的范围并确定阈值。

*预处理*

您可以使用高斯差分或简单的直方图均衡器进行照明标准化。
您可以旋转头部，使两个眼睛坐标处于同一水平以进行姿势校正。**

# c# - 尝试将值传递给水晶报表文本框对象时发生异常

> ID：14544123
> 
> 赞同：1
> 
> 时间：2013-01-27T03:28:58.193
> 
> 标签：c#, crystal-reports

我正在尝试将 C# 代码中的值传递给 CrystalReport 报表。

**编辑**

```
private void PrintOrder(List<OrderPrintBO> pListOrderBO)
        {
            DSOrderReport oDSOrderReport = new DSOrderReport();
            DataTable oDataTable = oDSOrderReport.Tables[0];
            String sOrderNo = "";

            if (pListOrderBO.Count > 0)
            {
                for (int i = 0; i < pListOrderBO.Count; i++)
                {
                    DataRow oRow = oDataTable.NewRow();
                    oRow["OrderID"] = pListOrderBO[i].OrderID;
                    oRow["OrderNumber"] = pListOrderBO[i].OrderNumber;
                    sOrderNo = pListOrderBO[i].OrderNumber;
                    oDataTable.Rows.Add(oRow);
                }
            }

            oDSOrderReport.Merge(oDataTable);
            oDSOrderReport.AcceptChanges();

            if (oDSOrderReport.Tables[0].Rows.Count > 0)
            {
                // Main Copy
                PrintDialog printDialog = new PrintDialog();
                rptOrder oMainOrder = new rptOrder();

                String sCompanyName = System.Configuration.ConfigurationManager.AppSettings["CompanyName"].ToString();
                String sPhone1 = System.Configuration.ConfigurationManager.AppSettings["Phone1"].ToString();
                String sPhone2 = System.Configuration.ConfigurationManager.AppSettings["Phone2"].ToString();
                String sShowOrderNo = System.Configuration.ConfigurationManager.AppSettings["ShowOrderNo"].ToString();

                ((CrystalDecisions.CrystalReports.Engine.TextObject)oMainOrder.ReportDefinition.ReportObjects["txtCompanyName"]).Text = sCompanyName;
                ((CrystalDecisions.CrystalReports.Engine.TextObject)oMainOrder.ReportDefinition.ReportObjects["txtPhone1"]).Text = "Tel:" + sPhone1;
                ((CrystalDecisions.CrystalReports.Engine.TextObject)oMainOrder.ReportDefinition.ReportObjects["txtPhone2"]).Text = "Tel:" + sPhone2; 
```

////这个注释掉的部分给出了异常

```
 //string sVarOrderNo = "";

            //if (sShowOrderNo.ToLower() == "yes")
            //{
            //    sVarOrderNo = sOrderNo;
            //}

            //((CrystalDecisions.CrystalReports.Engine.TextObject)oMainOrder.ReportDefinition.ReportObjects["txtOrderNo"]).Text = "O.N. : " + sVarOrderNo;

                oMainOrder.SetDataSource(oDSOrderReport);

                oMainOrder.PrintOptions.PrinterName = printDialog.PrinterSettings.PrinterName;

    try
                    {
                        oMainOrder.PrintToPrinter(1, false, 0, 0);
 MessageBox.Show("Order Printed Successfully", "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message.ToString());
                    }
                }
                else
                {
                    MessageBox.Show("Error in Printing Order", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    return;
                } 
```

**结束编辑**

对于前三个文本框（公司名称、电话 1 和电话 2），一切正常，但是当我尝试将 OrderNo 传递给报告时，**索引超出了数组的范围。**发生异常，即使我的报告有一个名为**txtOrderNo的 TextBox 对象**

我不确定为什么会这样。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:56:26.857

尝试更改您的`sOrderNo`相关代码如下。

```
string sVarOrderNo = "";

if (sShowOrderNo.ToLower() == "yes")
{
     sVarOrderNo =  sOrderNo;
}

((CrystalDecisions.CrystalReports.Engine.TextObject)oMainOrder.ReportDefinition.ReportObjects["txtOrderNo"]).Text = "O.N. : " + sVarOrderNo; 
```

**更新**

您的问题是下面提到的代码片段。在`for loop`您尝试将值分配给`sOrderNo`. 这是没有意义的。B'cos 每次循环时都会覆盖它。那么这样做的目的是什么？如果您需要此值，则必须将此值作为表格的行或作为报告的参数。

```
if (pListOrderBO.Count > 0)
            {
                for (int i = 0; i < pListOrderBO.Count; i++)
                {
                    DataRow oRow = oDataTable.NewRow();
                    oRow["OrderID"] = pListOrderBO[i].OrderID;
                    oRow["OrderNumber"] = pListOrderBO[i].OrderNumber;
                    sOrderNo = pListOrderBO[i].OrderNumber;
                    oDataTable.Rows.Add(oRow);
                }
            } 
```

我希望这对你有帮助。

# r - 使用条形图的分组条形图

> ID：14544124
> 
> 赞同：2
> 
> 时间：2013-01-27T03:29:02.077
> 
> 标签：r, graphing

> **可能重复：**
> [如何使用 R 创建分组条形图](https://stackoverflow.com/questions/8148956/how-to-create-grouped-barplot-with-r)

```
Species      Dbh   Height
1       DF 383.7143 254.3036
2       ES 403.3333 280.0000
3        F 372.0000 270.0000
4       FG 381.5000 275.0000
5       GF 351.5838 242.6522
6       HW 209.0000 198.0000
7       LP 232.8571 218.3333
8       PP 568.5000 330.0000
9       SF 136.4286 154.1000
10      WC 375.0757 234.8777
11      WL 340.0588 252.5714
12      WP 319.7273 251.3939 
```

我想把上面的数据变成这样的条形图。物种作为箱，dbh 和高度作为每个箱的条。

![图形](../Images/9c9f1efedd3ba980d86b0258315ddccd.png)

我使用了代码：

```
aggregate(ufc[,4:5],ufc[3],mean,na.rm=TRUE) 
```

得到上述数据集

使用此代码一次只能获取一个变量：

```
barplot(ufc.means$Height, col=rainbow(20), 
                            names.arg=(ufc.means$Species), las=2,main="Height") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T05:11:37.950

首先，不要重复发布！如有必要，请编辑您以前的问题，而不是发布新问题。

[其次，您在之前的帖子](https://stackoverflow.com/questions/14544027/how-to-create-a-barplot-beside-t-in-r-for-2-variables)中提到的错误消息是不言自明的。这是错误消息：

> barplot.default(ufc.means, col = rainbow(20), names.arg = (ufc.means$Species), 中的错误：'height' 必须是向量或矩阵

仔细阅读最后一部分：*`'height' must be a vector or a matrix`*，但您正在尝试使用`data.frame`. 因此，解决方案很简单：`data.frame`在使用`barplot`.

假设你`data.frame`的名字是“mydf”：

```
mymat <- t(mydf[-1])
colnames(mymat) <- mydf[, 1]
barplot(mymat, beside = TRUE) 
```

结果：

![在此处输入图像描述](../Images/598a169af9dd16383dcd072251c1fc4f.png)

# android - 按钮单击后Android应用程序停止工作

> ID：14544126
> 
> 赞同：1
> 
> 时间：2013-01-27T03:29:23.967
> 
> 标签：android, button, onclicklistener

嘿伙计们，我正在创建一个 android 应用程序（我对它很陌生），我在单击登录按钮后尝试访问一个新的活动窗口，但是一旦我单击它，就会弹出一个窗口说“不幸的是，“appname”已停止”并退出程序。这是我的代码，你能看出它有什么问题吗？多谢你们

这是登录 Class.java 文件

```
package com.example.smartsignoutv3;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class LoginScreen extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login_screen);

    ((Button)findViewById(R.id.sign_in_button)).setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_login_screen, menu);
    return true;
  }
@Override
public void onClick(View arg0) {
    switch (arg0.getId()) {
    case (R.id.sign_in_button): {
        System.out.println("yo dawg");
        Intent i = new Intent(this, MainScreen.class);
        startActivity(i);
        return;
    }
    }
}
} 
```

这是单击登录按钮后我要打开的主活动屏幕

```
package com.example.smartsignoutv3;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;

public class MainScreen extends Activity {

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login_screen);

    gestureDetector = new GestureDetector(new MyGestureDetector());
    View mainview = (View) findViewById(R.id.welcome_screen);

    // Set the touch listener for the main view to be our custom gesture listener
    mainview.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (gestureDetector.onTouchEvent(event)) {
                return true;
            }
            return false;
        }
    });
}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    Intent intent = new Intent(MainScreen.this.getBaseContext(), MainScreen.class);

        if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
            return false;
        }

        // right to left swipe
        if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        startActivity(intent);
        MainScreen.this.overridePendingTransition(
        R.anim.slide_in_right,
        R.anim.slide_out_left
        );
        // right to left swipe
        }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        startActivity(intent);
        MainScreen.this.overridePendingTransition(
        R.anim.slide_in_left, 
        R.anim.slide_out_right
        );
        }

        return false;
    }

    // It is necessary to return true from onDown for the onFling event to register
    @Override
    public boolean onDown(MotionEvent e) {
            return true;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_login_screen, menu);
    return true;
} 
```

}

如果需要，这是android清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.smartsignoutv3"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.smartsignoutv3.LoginScreen"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.smartsignoutv3.MainScreen"
        android:label="@string/app_name">

    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:21:47.907

在您的`LoginScreen`活动中，您有

```
setContentView(R.layout.activity_login_screen); 
```

在你的`MainScreen`活动中，你有

```
setContentView(R.layout.activity_login_screen); 
```

应该有不同的布局`MainScreen`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:11:11.790

从此更改您的 LoginScreen Activity 的 onCreate

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_login_screen);

((Button)findViewById(R.id.sign_in_button)).setOnClickListener(this);
} 
```

对此

```
private Button button;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_login_screen);

   button = (Button)findViewById(R.id.sign_in_button).setOnClickListener(this);
} 
```

在您的 onClick 中直接执行此操作

```
@Override
public void onClick(View arg0) {
switch (arg0.getId()) {
case R.id.sign_in_button: 
    System.out.println("yo dawg");
    Intent i = new Intent(this, MainScreen.class);
    startActivity(i);

 break;

}

  return true; 
```

}

# c++ - Firefox XPCOM 扩展在安装后不起作用（C++）

> ID：14544129
> 
> 赞同：0
> 
> 时间：2013-01-27T03:30:06.370
> 
> 标签：c++, firefox, firefox-addon, gecko, protocol-handler

我已经使用 Gecko SDK 在 C++ 中实现了协议处理程序扩展。当 dll 被复制到 C:\Program Files (x86)\Mozilla Firefox\components 时，一切正常。但是，当使用相同的 dll 创建 .xpi 安装文件时，会安装扩展名；但自定义协议不起作用。

我在 xpi 文件中有以下结构

```
chrome.manifest
components
components/abc.dll
install.rdf 
```

我没有 IDL 文件。xpi中是否需要IDL文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:14:14.700

固定的！

`<em:unpack>true</em:unpack>`install.rdf 中缺少

应该在问题中包含 install.rdf :)

# php - PHP 搜索引擎和 MYSQL

> ID：14544132
> 
> 赞同：0
> 
> 时间：2013-01-27T03:30:41.063
> 
> 标签：php, mysql

作为 php 的新手和想要成为搜索引擎所有者的人，我会遭受很多头痛。我想创建自己的搜索引擎。我正在尝试使用 PHP 和 MYSQL 创建一个最初编码的测试版，但最终我想学习 C++，这样我就可以创建自己的表/搜索系统，比如 Google 的 Bigtable。我的代码应该在这篇文章的某个地方。有人可以帮我编码吗？

```
 The "PAGE" that does all the work
<?php
    $query = $_GET['S'];
    $con = mysql_connect("localhost","" ,""); 
    $i="";
    $result= mysql_query("SELECT * FROM searchengine WHERE keywords");
    explode(" ",$query); 
    if (mysql_num_rows($result)>0) {
        foreach ($i++ as $result){
            mysql_fetch_row(resource $result);
            $url = mysql_column['url'];
            $title= mysql_column['title'];
            $description= mysql_column['description'];
            $rating= mysql_column['rating'];
            echo '<a href=$url>$title</a><br>$description<br>Rating: $rating'; 
        }
    }
    else
    {
    echo "No Search Results."
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:37:14.010

不要制作自己的搜索引擎。有更聪明的人创建了搜索引擎并将其开源。谷歌`Nutch`，`Solr`和`Lucene`

# linux - 概念验证：Fink 中的 distcc 或 Mac 上的 MacPorts

> ID：14544133
> 
> 赞同：0
> 
> 时间：2013-01-27T03:30:47.910
> 
> 标签：linux, macos, macports, homebrew, fink

尽管进行了很多调整和修改，但我从未能够让 distcc 在我的 Mac 上的 Fink 或 MacPorts 中成功工作。

我已经在各种 Linux 平台以及 OS X 上成功使用了 distcc。

有没有人能够让 distcc 在 Fink 或 MacPorts 内的几台 Mac 之间分发编译？家酿怎么样？我主要对概念验证感兴趣：可以做到吗？

# c# - 如何使文本框中的默认文本变灰？

> ID：14544135
> 
> 赞同：1
> 
> 时间：2013-01-27T03:30:59.080
> 
> 标签：c#, c#-4.0, c#-3.0

当我单击文本框时，我希望默认文本消失。是否有任何其他财产可以用于此目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-04T08:39:35.373

以下将默认文本设置为灰色。此外，当您将文本框留空时，再次将默认文本设置为文本框。

```
private void Form1_Load(object sender, EventArgs e)
    {
        this.textBox2.Enter += new EventHandler(textBox2_Enter); 
        this.textBox2.Leave += new EventHandler(textBox2_Leave);
        textBox2_SetText();
    }

    protected void textBox2_SetText()
    {
        this.textBox2.Text = "Default Text...";
        textBox2.ForeColor = Color.Gray;
    }

    private void textBox2_Enter(object sender, EventArgs e)
    {
        if (textBox2.ForeColor == Color.Black)
            return;
        textBox2.Text = "";
        textBox2.ForeColor = Color.Black;
    }
    private void textBox2_Leave(object sender, EventArgs e)
    {
        if (textBox2.Text.Trim() == "")
            textBox2_SetText();
    } 
```

![在此处输入图像描述](../Images/b1601a4ba394c2b6ddc24298f21e7bba.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T03:36:06.320

`GotFocus`向 TextBox 的事件添加一个方法，将 Text 属性更改为 ""

```
private void Form1_Load(object sender, EventArgs e) {
    this.textBox1.GotFocus += new EventHandler(textBox1_Focus); 
    this.textBox1.Text = "some default text...";
}

protected void textBox1_Focus(Object sender, EventArgs e) {
    textBox1.Text = "";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T04:17:55.933

听起来您想在文本框中添加水印。

请参阅这些文章。

*   [http://www.codeproject.com/Articles/319910/Custom-TextBox-with-watermark](http://www.codeproject.com/Articles/319910/Custom-TextBox-with-watermark)
*   [System.Windows.Forms.TextBox 中的水印](https://stackoverflow.com/questions/578193/watermark-system-windows-forms-textbox-using-c-sharp)
*   如果您使用 wpf 类似的东西[http://msdn.microsoft.com/en-us/library/bb613590.aspx](http://msdn.microsoft.com/en-us/library/bb613590.aspx)

# android - Webview中的网页不显示

> ID：14544146
> 
> 赞同：0
> 
> 时间：2013-01-27T03:33:26.327
> 
> 标签：android, android-emulator

该页面在模拟器中显示“网页不可用”。我试过改变 wv.loadURL 来加载一个简单的 yahoo.com 页面，但我仍然得到相同的结果。但是，当我尝试下面的代码时，我可以看到 .index 文件中的布局和信息……有什么建议吗？

```
 package com.example.athletic_profile;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView wv = (WebView) findViewById(R.id.webView);

        WebSettings webSettings = wv.getSettings();
        webSettings.setBuiltInZoomControls(true);

        wv.loadUrl("file:///android_asset/Index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# dart - 在 Dart 中，hashCode() 方法调用是否可以在相等 (==) 对象上返回不同的值？

> ID：14544151
> 
> 赞同：0
> 
> 时间：2013-01-27T03:34:18.307
> 
> 标签：dart, hashcode, checksum

我当前的项目是开发一个校验和系统，以证明两个有些复杂的对象（功能上）相等——从某种意义上说，它们的关键属性具有相同的值。（发现不能包含日期/时间，所以不能在更大的对象上使用 JSON - 呃 :) （出于我的目的））。

要做到这一点，在选定的字符串上调用`hashCode()`方法似乎是要走的路。

在实现这一点后，我注意到在实践中，我在功能上“相同”的最高级别对象的多次运行中得到了非常不同的值。

有许多“数字”我没有四舍五入，有整数、布尔值、字符串等等。

我“总是”认为同一组值上的 hashCode 会返回相同的数字，我错过了什么吗？

顺便说一句，我发现材料的唯一上下文是`hashCode()`WebSockets。

当然，我可以将自己的 String 写入唯一值，但我想了解这是否是 Dart 或其他问题的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:16:47.433

我可以尝试回答标题中提出的问题：“hashCode() 方法调用能否在相等 (==) 对象上返回不同的值？”

简短的回答：如果这两个对象相等（==），则两个对象的哈希码必须相同。

如果您覆盖`hashCode`，您还必须覆盖`equals`. 由 定义的相等的两个对象`==`也必须具有相同的哈希码。

但是，哈希码不必是唯一的。也就是说，一个完全有效的哈希码是 value `1`。然而，一个*好的哈希码应该是均匀分布的。*

来自[Object](http://api.dartlang.org/docs/releases/latest/dart_core/Object.html)的文档：

> 当使用相等运算符 == 进行比较时，哈希码保证对于相等的对象是相同的。除此之外，不保证哈希码。它们在运行之间将不一致，并且没有分布保证。
> 
> 如果子类覆盖 hashCode 它也应该覆盖相等运算符以保持一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:12:54.933

我发现了直接的问题。对象 stringify() 方法在某一层上没有被调用，而是一些必须存在于所有对象中的 stringify 属性（？）。

有了这个修复，一切都按照我的预期工作，我们的统计研究的多次运行在最高级别（基于大约 5 个层次结构）返回完全相同的校验和。

同时 JSON.stringify 继续失败。即使是最基本的对象。我无法确定导致失败的原因。当然，问题不在于“stringify”是如何完成的。

所以，至少从经验上看，我相信“具有相同属性的对象”在 Dart 中返回相等的 checkSums 是真的。决定对数字进行舍入，我不知道这是否会导致问题 - 也许需要注意？当然，请记住要提防日期、时间或任何可能合法变化的东西。

_swarmii

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-27T02:35:30.323

[Seth Ladd](https://stackoverflow.com/users/123471/seth-ladd)链接的文档现在包含以下信息：

> 它们不需要在同一程序的执行之间保持一致，并且没有分发保证。`

因此，对于您的问题，技术上`hashCode`的价值可以在不同的执行中随着相同的对象而改变：

> 我“总是”认为同一组值上的 hashCode 会返回相同的数字，我错过了什么吗？

# c++ - C++ 输出格式化变量参数列表的最佳方式

> ID：14544157
> 
> 赞同：0
> 
> 时间：2013-01-27T03:35:21.363
> 
> 标签：c++, debugging, cout, variadic-functions

这是我当前的功能，它可以工作但不是类型安全的，有时会很烦人。

```
void Debug::Log(LogLevel level, const char* format, ...)
{
va_list args;
va_start(args, format);
cout << "[" << LogLevelToString(level) << "]\t";
vprintf(format, args);
va_end(args);
cout << endl;
} 
```

如您所见，我希望传入的参数按照指定的格式进行格式化。我知道 std::cout 具有格式化功能，但我没有找到任何解释如何使用 C va_list 实现它的东西。

基本上要点是：我想保持相同的行为，但使用类型安全的更现代的方法，我需要 std::cout 以便我可以轻松地将输出重定向到文件或我需要的任何地方。

有用的点：从格式中我可以确定传入了多少个参数，有没有办法循环遍历 va_list 参数，以便我可以将它们单独传递给 cout ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:24:11.210

为了方便重定向，您当然可以使用`vfprintf()`. 对于每个参数的单独控制/计算，我认为唯一的方法是`va_arg()`使用正确的类型来遍历列表，即`an_int = va_arg(the_va_list, int);`,`a_double = va_arg(the_va_list, double);`等等。我还没有尝试过，但我认为会使用传递给它`va_arg`的内存做适当的增量。`type`

# javascript - 使用 Javascript 更改 CSS 可见性属性

> ID：14544158
> 
> 赞同：1
> 
> 时间：2013-01-27T03:35:31.783
> 
> 标签：javascript

我对 JavaScript 很陌生，我在使用它来删除 CSS 属性时遇到了问题。

这是我正在尝试做的事情：

我试图在未选中复选框时使文本输入框不可见，并在选中该框时使其可见。这是我的代码：

```
<html>
<head>
<script>

if (document.box.test.checked == true)
    {document.getElementById("test").style.display == "";
    }

</script>
<body>

<form name="box"> 
<input type="checkbox" name="test" value="engraved">Engraved?
</form>

<div id="test" style="display:none">
<p>Engraving Message here:</p>
<form>
<input type="text" name="engraving-text" value="Type here">
</form>
</div>

</body>
</html> 
```

非常感谢任何和所有帮助。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:46:40.193

您可以`onchange`在`checkbox`

```
<input type="checkbox" name="test" value="engraved" onchange="show_hide()"> 
```

然后切换输入​​框

```
function show_hide()
{
    if (document.box.test.checked) {
        document.getElementById("test").style.display = "block";
    } else {
        document.getElementById("test").style.display = "none";
    }
} 
```

用于测试的[JSFiddle](http://jsfiddle.net/WYU3y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:46:49.487

这里有2个问题。

1.  您编写的脚本将显示更改为 "" 仍将显示应为的文本框`display="none";`
2.  每次有人更改复选框的值时，脚本都不会运行。

试试这个。将您的检查封装到一个函数中，然后将该函数添加到正文 onload 事件和复选框的 oncchage 事件中。

```
<script>

function checkHideTextField()
{
   if (document.box.test.checked == true)
   {
      document.getElementById("test").style.display == "none";
   }
}

</script>
<body onload="checkHideTextField()">

<form name="box"> 
<input onchage="checkHideTextField()" type="checkbox" name="test" value="engraved">Engraved?
</form>

<div id="test" style="display:none">
<p>Engraving Message here:</p>
<form>
<input type="text" name="engraving-text" value="Type here">
</form>
</div>

</body>
</html> 
```

# database - 多对多关系和历史表

> ID：14544162
> 
> 赞同：1
> 
> 时间：2013-01-27T03:36:34.417
> 
> 标签：database, database-design, model, many-to-many, relational-database

假设我有`Item`and `Tag`，其中每个只有一个`id`and`name`列，以及一个`Item_Tag_Map`具有复合`Item.id, Tag.id`主键的表。

如果我想为`Item`and实现一个历史表`Tag`，这似乎相对简单——我可以添加第三列`revision`和一个触发器以复制到一个`ItemHistory`or`TagHistory`表中，并`id, revision`作为主键和`operation`（“INSERT”、“UPDATE”等）。由于我可能想“删除”项目，我可以采用以下两种方式之一：

*   `Item`在或`Tag`上添加另一列`is_active`，并且实际上永远不会删除任何行
*   删除行，但将删除记录在历史表中作为`delete`操作，并在`Item`或`Tag`插入时，确保从或表中获取该项目的最新`revision`编号，并将其设置为`ItemHistory``TagHistory`

第二种选择在我的嘴里留下了不好的味道，所以我可以使用第一种。毕竟，当我可以修改它或改变它的活动状态时，为什么我真的*需要删除它呢？*

现在，我在桌子上的历史表上遇到了同样的问题`Item_Tag_Map`，但这一次，这两个选项似乎都没有那么吸引人。如果我选择添加一个`is_active`for `Item_Tag_Map`，找出一个标签是否映射到一个项目的逻辑从：

> 获取这些项目的所有 tag_mapping

至

> 获取这些项目的所有 tag_mapping WHERE is_active

映射的存在意味着映射存在的隐含想法消失了。未映射的项目标签集不仅包括表中不存在的所有项目标签，还包括`is_active`为假的项目标签。

另一方面，如果我选择第二个选项，它仍然相当难看。

我敢肯定人们以前曾多次遇到过这个问题，我有兴趣了解您是如何处理它的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:57:33.610

我的答案取决于一些事情，所以我会尝试陈述我的假设。

无论我认为 Item 和 Tag 上的 is_active 是什么，都可以。如果这两个实体上的记录大小增长非常快，则考虑运行夜间作业以将非活动记录移动到表的存档版本。这可用于以后报告或审计事情。如果需要，您还可以编写一个脚本来恢复记录，但想法是您的实时表速度很快并且没有删除数据。

如果您允许用户添加/更新/删除映射，那么我会认为该表与 Item 和 Tag 相同。添加标志并在您的查询中使用它。它对我来说并不难看——我以前见过。

如果映射表不受用户控制，那么我猜您会在 Item 或 Tag 上使用 is_active 标志来确定是否可以运行查询。

只要知道一旦添加了该标志，人们就会忘记使用它。我知道我已经做过很多次了，（“为什么我得到了这么多记录，我错过了什么？哦，是的，is_active ...）

# php - 在php中创建对象时出错

> ID：14544169
> 
> 赞同：-1
> 
> 时间：2013-01-27T03:38:49.850
> 
> 标签：php

嘿伙计们，我刚刚在我的计算机上安装了 wamp 服务器，但是当我在它上面执行一些 php 时，当我创建一个简单的新对象时出现错误，这里是代码

```
 <?php
      class foo {
      function affichage () {
      echo 'xxxx';
      }
      $display = new foo();
      $display -> affichage();
      }
          ?> 
```

错误是

> ( ! ) SCREAM: ( ! ) 忽略错误抑制
> 解析错误: 语法错误, 意外的 '$display' (T_VARIABLE), 期待函数 (T_FUNCTION) 在 C:\wamp\www\new 4.php 第 6 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:40:24.533

好吧，您已将过程代码放在类声明的中间。不要那样做。

程序代码在开放空间的中间进入或退出：

```
<?php
class foo {
   function affichage() {
      echo 'xxxx';
   }
}

$display = new foo();
$display->affichage();
?> 
```

您的 PHP 书会告诉您在哪里编写程序代码，*以及许多其他方便实用的技巧*。我不禁以最强烈的措辞推荐您阅读它。

# c - 需要帮助重组循环/让简单的平均代码工作。

> ID：14544172
> 
> 赞同：0
> 
> 时间：2013-01-27T03:39:55.203
> 
> 标签：c, loops, average

第一次使用 C，我被要求为我的 Systems 类做一个没有 scanf 的简单平均函数（仅使用 getchar）。我最终编写了一个不必要的复杂循环，只是为了让我的代码能够编译，即使在编译+运行之后，它在接受键盘输入后似乎也没有做任何事情。

```
#include <stdio.h>
#include <stdlib.h>

//average program

//use getchar to get numbers separately instead of scanf and integers.
//Not sure why. Most likely to build character.

int main (int argc, const char * argv[])
{
    char x,z;
    float avg;
    int tot,n,b;

    printf("Input Integer values from 1 to 100\. Separate each value by a space. For example: 23 100 99 1 76\n");

     ret:

    x=getchar();
    while( x != '\n' );
    {
        if(x==isspace(x))
        { goto ret;}

     opd:

    z=getchar();
        if ((z == isspace(z)))
        {
            b = x - '0';//subtracting 0 from any char digit returns integer value
            tot +=b;
            n++;
            goto ret;
        }

        else if(z == '\n')
        {
            b = x - '0';
            tot +=b;
            n++;
            goto end;
        }

        else
        {
            x = x*10;
            x = x + z;
            goto opd;
        }
    }

    end:
    avg=tot/n;

    printf("Taking of the average of the values. The average is %1.2f\n",avg);

    return avg;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:42:54.107

1.  中的分号`while(...);`导致无限循环，相当于说：`while(...) continue;`
2.  您应该只使用一个循环，并且您应该尝试只使用一个调用`getchar()`... 它与多个调用太混淆，`getchar()`并且您的代码正试图按照其编写方式丢弃第一行。
3.  绝对摆脱这种`goto`说法，你的教练不会喜欢它们，而且它们是完全没有必要的。（请阅读*休息*并*继续*。）
4.  在直接调用的 C 解析器`getchar()`中，能够将字符推回输入流是很有用的。请参阅`man 3 ungetc`或仅编写一个简单的包装器 在`getchar().`解析器循环结束时，您应该只需要一个 pushback 字符。

# jquery - 从随机定义的属性中获取值是否可取？

> ID：14544174
> 
> 赞同：4
> 
> 时间：2013-01-27T03:40:30.703
> 
> 标签：jquery, html

当我发现 jquery 可以从任何随机定义的属性中获取值时，我感到非常震惊。

**HTML**

```
<a postid='10' class='delete_post'>Delete</a> 
```

**JS**

```
$('body').on('click', '.delete_post', function() {
    var id = $(this).attr('postid');
    delete_post(id); //$.post request for deleting post
}); 
```

我在[这里做了小提琴来](http://jsfiddle.net/fTUnb/)测试这个。

我的问题是 => 是否建议使用这种随机定义的属性来获得价值？

通常我使用下面的代码获得价值。

**HTML**

```
<div class='delete_post'>
    <a>Delete</a>
    <input type='hidden' class='id' value='10' />
</div> 
```

**JS**

```
$('.delete_post').on('click', 'a', function() {
    var id = $(this).parent().find('.id').val();
    delete_post(id); //$.post request for deleting post
}); 
```

*（我在 chrome、firefox 和 Internet Explorer 中成功测试了这个。）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:56:54.897

虽然这通常会起作用，但不建议使用专有/用户定义的属性。这些将无法验证，并且您可能错误地使用了真实属性。您的代码也不是面向未来的，因为您可以定义一个现在不使用但以后可以使用的属性。

相反，您应该使用`data-`属性 / `.data`：

```
<input data-postid=10 class=delete_post>

var postID = $(this).data('postid'); 
```

规格：[http ://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T03:57:10.410

`data-*`HTML5 定义了使用属性是可以接受的。“任意随机”可能不如`data-any-random`.

# python - 实例化具有任意数量属性的类

> ID：14544176
> 
> 赞同：2
> 
> 时间：2013-01-27T03:40:59.203
> 
> 标签：python, class, variables, variable-assignment

这个问题专门针对这里的 Python 类，但可以更笼统。我正在创建一个`m`将使用四个变量初始化的类，然后我想将其分配给该类的实例化。现在，这看起来像这样：

```
class mm(object):
  def __init__(self, a, b, c, r):
    self.a = a
    self.b = b
    self.c = c
    self.r = r
  # etc. 
```

但是，我希望能够将变量分配给`self`一行，类似于伪代码：

```
def __init__(self, a, b, c, r):
  self.varname = var for var in [a, b, c, r] 
```

如果这可以推广到任意数量的变量，那就更好了，这样你就可以得到类似的东西：

```
def __init__(self, **kwargs):
  assign(self, varname, value) for varname, value in kwargs.iteritems() 
```

但是，据我所知，实际上不可能循环遍历这样的语句。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T03:46:40.160

您可以使用`setattr`：

```
class mm(object):
    def __init__(self, **kwargs):
        for varname, value in kwargs.iteritems():
            setattr(self, varname, value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T03:49:21.637

您还可以使用实例的命名空间字典进行批量分配：

```
class mm(object):
    def __init__(self, **kwargs):
       self.__dict__.update(kwargs) 
```

# javascript - 使用 SVG 规范计算子路径的长度

> ID：14544177
> 
> 赞同：0
> 
> 时间：2013-01-27T03:41:20.463
> 
> 标签：javascript, svg, jquery-svg

我是编码的业余爱好者，正在尝试学习 Javascript。如果我听起来太笼统，请原谅我。我会尽量不要。

我正在处理 SVG 编辑，我正在尝试获取子路径的长度（在我的“超级路径”上创建节点后正在绘制的路径）。我知道我可以使用 get.totalpathlength 方法获得“超级路径”的总长度。

他们是这样做的方法，还是我需要使用总路径长度和鼠标点击检测从头开始构建公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:35:25.080

如果您想知道最后一段的长度，请测量整个路径，然后测量没有最后一段的路径的不可见副本并减去。

# mysql - MySQL 根据最新时间戳选择记录组

> ID：14544183
> 
> 赞同：4
> 
> 时间：2013-01-27T03:42:39.827
> 
> 标签：mysql, select, timestamp

我有一个每隔几个小时运行一次的例程，它在用于记录的表中创建多个条目。我需要做的是选择具有最新**时间戳**且具有共同帐户 ID 的所有记录。像这样的东西：

```
SELECT * 
FROM TABLE_logs 
WHERE ACCOUNT_ID='12345' 
ORDER BY TIMESTAMP DESC 
```

我被卡住的地方是我不能说`LIMIT 5`或类似的东西，因为在每个例行时间间隔创建的记录数量可能不同。因此，例如，当例程在上午 10 点运行时，它可能会创建 6 个表条目，而在下午 2 点仅创建 4 个表条目。

有没有办法在不知道有多少的情况下选择最新记录的分组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:36:13.500

假设您的意思是 Table_Logs 表中的多个条目可能具有相同的时间戳，并且您希望返回最近输入的每个条目，您需要使用`GROUP BY`：

```
SELECT Field1, Field2, Max(TimeStamp) maxTime
FROM Table_Logs
WHERE Account_Id = '12345'
GROUP BY Field1, Field2 
```

Field1 等是您要在 Table_Logs 中返回的字段。

这是一些示例[SQL Fiddle](http://sqlfiddle.com/#!2/b1a8c/1)可供试用。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:47:38.077

我认为您想要的是按时间戳分组。假设在上午 10 点输入的所有时间戳都具有相同的时间戳，下午 2 点，同上，将类似于：

```
 SELECT timestamp, Field1, Field2
    FROM Table_Logs
GROUP BY timestamp 
```

如果您的时间戳太精确，只需执行一个子字符串：

```
 SELECT LEFT(timestamp, 5), Field1, Field2
    FROM Table_Logs
GROUP BY LEFT(timestamp, 5) 
```

假设时间戳是一个字符串（日志文件）。如果没有，您必须对其进行字符串化。

# java - 我可以避免这么多 if 语句吗？

> ID：14544188
> 
> 赞同：0
> 
> 时间：2013-01-27T03:43:16.017
> 
> 标签：java

在我的项目中，一个 ComboBox 中的选择会影响下一个 ComboBox 中可用的选项......我对此很陌生，但如果我是对的，我将这里的每个字符串视为 actionListener 中的 if/else 语句. 有什么办法可以减少这种情况，还是现在是时候敲响我的指关节并开始打字了（如果您看到 2 个具有相同字符串的模型，那只是因为尚未添加所有单独的字符串）？

```
//Model Dropdown
final DefaultComboBoxModel termModel = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Hypercom", "DejaVoo", "Nurit", "Verifone"});

//Default Dropdown
final DefaultComboBoxModel slctAbove = new DefaultComboBoxModel(new String[]{"Select Option Above"});

//Terminal Dropdowns
final DefaultComboBoxModel hSpecModel = new DefaultComboBoxModel(new String[]{
        "Choose One...", "T7Plus", "4205", "4210", "4220", "4230"});
final DefaultComboBoxModel dSpecModel = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Dial", "IP", "Wireless"});
final DefaultComboBoxModel nSpecModel = new DefaultComboBoxModel(new String[]{
        "Choose One...", "2085", "3020", "8320 Dial", "8320 IP", "8400 Dial", "8400 IP"});
final DefaultComboBoxModel vSpecModel = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Global Dial", "Global IP", "TPS Dial", "TPS IP", "Ptech Dial", "Ptech IP"});

//Call Type Dropdown
final DefaultComboBoxModel callReason = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Download", "Troubleshoot"});

//Error Dropdowns
//Hypercom
final DefaultComboBoxModel hypError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Printer Error", "Retry Batch Trans", "AP Dupe", "Invalid Balance Settlement"});

//DejaVoo
final DefaultComboBoxModel dejaError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Invalid Batch #", "AP Dupe"});
final DefaultComboBoxModel dejaMError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Invalid Batch #", "Transport Layer Abort", "AP Dupe"});

//Nurit
final DefaultComboBoxModel nuritDError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Invalid DUKPT Key", "Invalid Balance Settlement", "AP Dupe", "Secure Capture", "Invalid Term ID", "Open Tab", "No Host Response"});
final DefaultComboBoxModel nuritIpError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Invalid DUKPT Key", "Invalid Balance Settlement", "AP Dupe", "Secure Capture", "Invalid Term ID", "Open Tab", "No Host Response"});
final DefaultComboBoxModel nuritWError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Invalid DUKPT Key", "Invalid Balance Settlement", "AP Dupe", "Secure Capture", "Invalid Term ID", "Open Tab", "No Host Response", "Rad Fail", "No Net"});

//Verifone
final DefaultComboBoxModel verifError = new DefaultComboBoxModel(new String[]{
        "Choose One...", "Invalid Merch ID", "Invalid DUKPT Key", "Invalid Balance Settlement", "AP Dupe", "Keyboard Locked", "Invalid Term ID", "Card Not Supported", "Comm Error"}); 
```

# php - 知道为什么我必须单击注销按钮两次才能注销吗？

> ID：14544191
> 
> 赞同：0
> 
> 时间：2013-01-27T03:43:54.193
> 
> 标签：php, html, css, web-services, web

[这是我的 logout.php 代码](http://imgur.com/1vLqlQ4)

当我在我正在构建的网页上单击 LOGOUT 时，我必须单击它两次才能注销，知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:13:20.653

您似乎同时使用了会话和 cookie，可能是为了“记住我”功能。但是，注销脚本一次只删除一个。

尝试删除`else`.`else if`

```
if (session exists)
{
    destroy session
}

if (cookie exists)
{
    delete cookie
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:14:23.083

第一次注销时，`if`会运行，破坏会话。下次您注销时，将`else`运行，删除 cookie。

看看[PHP - session_destroy](http://php.net/manual/en/function.session-destroy.php)，有一个关于如何处理这个的例子。

也可以一次运行，只做两个独立`if`的s

```
if (isset($_SESSION['user_id']) {
...
}

if (isset($_COOKIE['user_id']) {
...
} 
```

# java - 声明 TextView 列表的更好方法？

> ID：14544195
> 
> 赞同：1
> 
> 时间：2013-01-27T03:44:48.687
> 
> 标签：java, android, textview

我有一个相对做同样事情的 Clickable TextViews 列表。你点击它，它就会进入那个活动。设置转到设置活动。约到约等。除了这个重复的代码之外，还有更简单的方法来声明和设置这些可点击的 TextView 吗？

```
 TextView create,
                         edit,
                         settings,
                         about;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_navigation);

                create = (TextView) findViewById(R.id.create);
                        create.setTextColor(Color.parseColor("#000000"));
                edit = (TextView) findViewById(R.id.edit);
                        edit.setTextColor(Color.parseColor("#000000"));
                settings = (TextView) findViewById(R.id.settings);
                        settings.setTextColor(Color.parseColor("#000000"));
                about = (TextView) findViewById(R.id.about);
                        about.setTextColor(Color.parseColor("#000000"));

                create.setOnClickListener(new View.OnClickListener(){
                        @Override
                        public void onClick(View v) {

                        }      
                });

                edit.setOnClickListener(new View.OnClickListener(){
                        @Override
                        public void onClick(View v){

                        }
                });

                settings.setOnClickListener(new View.OnClickListener(){
                        @Override
                        public void onClick(View v){

                        }
                });

                about.setOnClickListener(new View.OnClickListener(){
                        @Override
                        public void onClick(View v){

                        }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:39:23.110

如果您有一小部分项目，您可以采取以下方法：

```
public class MyActivity extends Activity implements AdapterView.OnItemClickListener {

    private ArrayAdapter<Item> mAdapter;

    private static enum Item {Create,Edit,Settings,About}

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //-- can set up from external layout also--
        ListView list = new ListView(this);
        setContentView(list);

        list.setOnItemClickListener(this);

        mAdapter = new ArrayAdapter<Item>(this,android.R.layout.simple_list_item_1,Item.values());
        list.setAdapter(mAdapter);

    }

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
        switch (mAdapter.getItem(i)){
            case Create:
                //--do stuff--
                break;
            case Edit:
                //--do stuff--
                break;
            case Settings:
                //--do stuff--
                break;
            case About:
                //--do stuff--
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:07:02.090

您可以实现**View.OnClickListener**。

```
 public class YOURACTIVITY extends Activity implements OnClickListener 
```

在 onCreate()-

```
 yourTextview.setOnClickListener(this); 
```

进而

```
@Override
public void onClick(View v) {
    // Based on the view , set the action

} 
```

# c++ - tic tac toe - 不匹配 operator* 错误

> ID：14544196
> 
> 赞同：-1
> 
> 时间：2013-01-27T03:44:59.777
> 
> 标签：c++, arrays, templates, pointers, operators

我正在尝试用 C++ 编写井字游戏，但每当我运行它时，我都会收到一条错误消息：

```
TicTacToe.cpp: In instantiation of ‘void copy_array(T*, T*) [with T = std::basic_string<char>]’:
TicTacToe.cpp:115:25:   required from here
TicTacToe.cpp:93:3: error: no match for ‘operator*’ in ‘**(new_arr + ((sizetype)(((long unsigned int)i) * 8ul)))’ 
```

它指向这个函数：

```
86    template<class T>
87    void copy_array(T old_arr[], T *new_arr)
88    {
89      int size = sizeof(old_arr)/sizeof(old_arr[0]);
90      for(int i = 0; i < size; i++)
91      {
92          *new_arr[i] = old_arr[i];
93      }
94    } 
```

一段代码：

```
114    string copy[9];
115    copy_array(board, copy); 
```

谁能向我解释导致错误的原因以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:47:53.677

该错误消息很奇怪，它似乎正在打印出您的代码的转换版本，但我很确定它指的是这一行：

```
*new_arr[i] = old_arr[i]; 
```

删除`*`，你应该没问题。

虽然它当然不会像你期望的那样运行。你的论点`T old_arr[]`将完全像`T *old_arr`. 值得注意的是，`sizeof()`您依靠它来为您提供数组的完整大小，但不会。

您可以使用以下模板来解决此问题：

```
template<class T, int N>
void copy_array(T (&old_arr)[N], T *new_arr) {
    for (int i = 0; i < N; i++) {
        new_arr[i] = old_arr[i];
    }
} 
```

或者，如果你可以使用 C++11，你可以切换到`std::array<>`，它知道它的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:49:34.307

改变这个：

```
*new_arr[i] = old_arr[i]; 
```

为了这：

```
new_arr[i] = old_arr[i]; 
```

当您使用方括号 c++ 在内部取消引用指针时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:14:39.290

这对您想要的内容进行了更安全的变体：

```
template<typename T, size_t size>
void copy_array(T (&old_arr)[size], T (&new_arr)[size])
{
    std::copy(&old_arr[0], &old_arr[0] + size, &new_arr[0]);
} 
```

它强制目标的大小与源的大小相同。如果你最终想要覆盖它，你真的应该重新考虑你的设计。

# java - 带有刻度的 JRadioButtonMenuItem

> ID：14544197
> 
> 赞同：3
> 
> 时间：2013-01-27T03:45:13.477
> 
> 标签：java, swing, jradiobutton

我想知道是否可以更改 Java Swing 中的默认单选按钮菜单项外观。

默认情况下，里面有一个点的圆圈将指示按钮的选定状态，但我只想在选定的菜单项旁边有一个老式的勾号，而在未选定的项目旁边不显示任何内容。（所有有问题的项目都是 type `JRadioButtonMenuItem`）

我尝试使用`.setSelectedIcon(...)`可以在这里找到的：

[http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setSelectedIcon(javax.swing.Icon)](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setSelectedIcon(javax.swing.Icon))

但没有任何改变，没有抛出异常，我仍然坚持默认外观。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T04:27:44.820

`JRadioButtonMenuItem`您可以不使用 a ，而使用`JCheckBoxMenuItem`默认情况下带有刻度线的 which。`JCheckBoxMenuItems`也可以属于一个`ButtonGroup`也给你显示的单一选择行为`JRadioButtonMenuItem`。

[例子](http://www.herongyang.com/Swing/JMenuBar-Check-Box-Menu-Item-Test-Program.html)

# java - Java正则表达式匹配大括号之间的文本

> ID：14544199
> 
> 赞同：0
> 
> 时间：2013-01-27T03:45:58.290
> 
> 标签：java, regex

```
program A {
   int x = 10;
   tuple date {
            int day;
            int month;
            int year;
   }
}

function B {
    int y = 20;
    ...
}

process C {
    more code;
} 
```

我想提取 A、B、C 后面的花括号内的任何内容。我编写了以下代码，但它不起作用。

```
public class Test {
    public static void main(String[] args) throws IOException {
        String input = FileUtils.readFileToString(new File("input.txt"));
        System.out.println(input);
        Pattern p = Pattern.compile("(program|function|process).*?\\{(.*?)\\}\n+(program|function|process)", Pattern.DOTALL);
        Matcher m = p.matcher(input);
        while(m.find()) {
            System.out.println(m.group(1));
        }
    }
} 
```

谁能说出我做错了什么？

我已经在 J​​avascript 中测试了正则表达式并且它有效。见[这里](http://rubular.com/r/D6FMq4TX8M)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:24:49.817

尝试

```
 Pattern p = Pattern.compile("\\{(.*?)\\}(?!\\s*\\})\\s*", Pattern.DOTALL);
    Matcher m = p.matcher(input);
    while (m.find()) {
        System.out.println(m.group(1));
    } 
```

输出

```
 int x = 10;
   tuple date {
            int day;
            int month;
            int year;
   }

    int y = 20;
    ...

    more code; 
```

我仍然认为这会更可靠

```
 for (int i = 0, j = 0, n = 0; i < input.length(); i++) {
        char c = input.charAt(i);
        if (c == '{') {
            if (++n == 1) {
                j = i;
            }
        } else if (c == '}' && --n == 0) {
            System.out.println(input.substring(j + 1, i));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:25:03.803

试试这个：

```
Pattern p = Pattern.compile("(program|function|process).*?(\\{.*?\\})\\s*", Pattern.DOTALL);
Matcher m = p.matcher(input);
while(m.find()) {
      System.out.println(m.group(2));
} 
```

# php - PHP Regex 替换一个略有不同的整个字符串

> ID：14544201
> 
> 赞同：1
> 
> 时间：2013-01-27T03:46:00.577
> 
> 标签：php, regex

我正在尝试替换文件中的整个字符串。

```
$db['default']['hostname'] = 'localhost'; 
```

我想做一个**preg_replace 整个字符串**，甚至是变量。我无法将它与 RegEx 匹配。到目前为止我有这个：

```
preg_match("/\$db\['default'\]\['hostname'\]^;"); 
```

但我想做的是找到整条线并用其他东西完全替换它。所以正则表达式就像：

```
"^$db['default']['hostname'](AnythingHere);$" 
```

有谁知道我完成的角色组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:10:27.320

这个在 RegexPal 上工作：

```
(\$db\[\'default']\['hostname'])( = 'localhost')(;) 
```

替换字符串应该是：

```
\1(AnythingHere)\2 
```

[例子](http://regexpal.com/?flags=gm&regex=%5C%24db%5C%5B%5C%27default%27%5D%5C%5B%27hostname%27%5D%20=%20%27localhost%27;&input=%24db%5B%27default%27%5D%5B%27hostname%27%5D%20=%20%27localhost%27; "正则表达式链接")

# java - NumberFormatException 处理

> ID：14544203
> 
> 赞同：0
> 
> 时间：2013-01-27T03:46:11.563
> 
> 标签：java

谁能向我解释为什么 add() 方法返回 0 而不是 4？我正在尝试使用 int 0 以防提供“无效”字符串编号（例如四个）。我得到了字符串参数 3,4 / 3, 四 / 三, 四 / 但不是三、 4 的正确结果。

你能告诉我我做错了什么吗？谢谢！

 `````
public class Numbers2
{
    public static void main(String[] args) {

        System.out.println(add("d","4"));
    } // main() method

   public static int add(String a, String b)
   {
       int x = 0;
       int y = 0;

      try{ 
          x = Integer.parseInt(a); 
          y = Integer.parseInt(b);

          System.out.println("No exception: " + (x+y));

          return x + y;
      }
      catch (NumberFormatException e){

          if(x != (int) x ){              
              x = 0;
          }
          if(y != (int) x ){
              y = 0;              
          }      
          return x + y;  
      }

   } // add() method
} // class 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:48:37.970

因为第二个参数是“d”，所以你总是会陷入异常情况。这里，x = y = 0。

你的 If 语句在这里不会做任何事情，因为 (x == (int)x) 总是当 x 是一个 int 和 (y == (int)x) 因为它们都是 0 所以这些块都不会被执行。

因此，x + y 将始终 = 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:53:15.240

问题是该行`y = Integer.parseInt(b);`没有机会执行，因为您`"d"`作为第一个参数而不是整数传递，该行`x = Integer.parseInt(a);`导致异常并且两者都`x`保持`y`为0。

您可以通过对两者使用单独的 try/catch 来解决问题：

```
int x = 0; //x is 0 by default
int y = 0; //y is 0 by default

try { 
    x = Integer.parseInt(a); //x will remain 0 in case of exception  
}
catch (NumberFormatException e) {
    e.printStackTrace();
}

try {  
    y = Integer.parseInt(b); //y will remain 0 in case of exception  
}
catch(NumberFormatException e) {
      e.printStackTrace();
}

return x + y; //return the sum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:04:26.423

如果您使用错误的甲酸盐参数作为第一个参数，那么语句会发生异常

```
x = Integer.parseInt(a); 
```

线

```
y = Integer.parseInt(a); 
```

在这种情况下永远不会执行，因此对每个语句使用不同的 try-catch 块。``

# ruby-on-rails - 在使用 FactoryGirl 进行控制器测试时，Devise 无法正确登录

> ID：14544212
> 
> 赞同：3
> 
> 时间：2013-01-27T03:47:24.683
> 
> 标签：ruby-on-rails, devise, factory-bot

当我试图让 Devise 在我的控制器测试中正确登录时，我有一些有趣的行为。它似乎在某些情况下有效，但在其他情况下无效。我不确定这是 Devise 和 FactoryGirl 之间的交互还是其他工作。

首先，这是我的工厂：

```
factory :advisor do
  name "Jason Jones"
  association :user
  initialize_with {Advisor.find_or_create_by_name('Jason Jones')}
end

factory :client do
  name "Rich Homeowner"
  association :advisor
end

factory :user do
    email "jason@jones.com"
    password "testpassword"
    initialize_with {User.find_or_create_by_email('jason@jones.com')}
end 
```

我的控制器：

```
class ClientsController < ApplicationController
  before_filter :authenticate_user!

 def destroy
    @client = current_user.advisor.clients.where(:id => params[:id]).first

    @client.destroy
    flash[:notice] = 'Client deleted.'
    redirect_to clients_path
  end 
```

和我的控制器测试：

```
 describe "DELETE destroy" do
    it "should delete a client" do

        a = FactoryGirl.create(:advisor)
        c = FactoryGirl.create(:client, :advisor => a)
        login_user(a.user)

        expect{
          delete :destroy, :id => c.id
          response.should be_redirect
          assigns(:client).should eq(c)
        }.to change(Client, :count).by(-1)

      end
  end 
```

login_user 规范助手是它变得时髦的地方。如果我取消注释下面的行，强制将用户设置为 FactoryGirl 对象，则测试通过。如果我留下评论，Devise 会尝试以传递的用户身份登录（我已通过调试验证是数据库中的同一用户），但它实际上并没有登录。在这两种情况下，sign_in 调用实际上返回相同的数组，但基于执行路径，控制器代码永远不会执行，因为 Devise 重定向到登录页面。

```
def login_user(user=nil)
   @request.env["devise.mapping"] = Devise.mappings[:user]

   if user.nil?
     user = FactoryGirl.create(:user)
   end

   # user = FactoryGirl.create(:user) # uncommenting this line causes test to pass

   sign_in user
 end 
```

如何让 sign_in 正常工作？

作为记录，当涉及到 Rails 的 TDD 时，我花了 10 分钟让我的实际代码正常工作，并花 2 小时跳过障碍来让我的测试代码完成它应该做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T06:16:52.477

我最近开始尝试接受 TDD 的哲学，并承认我和你一开始有同样的感觉。您的时间估计似乎相当准确，10 分钟的开发和 2 小时的测试用例实施。我的第一个建议是，就像生活中的许多事情一样，*它会变得更好*。当你第一次做出看似无害的改变然后意识到你已经打破了一半的测试回归时，你会很高兴你吃了药。

话虽如此，这听起来像是一个警察，因为你在问为什么`Devise`不起作用，我的回答是：你不应该关心。显然你做错了什么，恐怕我无法从所提供的信息中分辨出它是什么，但我想我无论如何都能提供帮助。

我在上面看到的唯一错误是您的规范正在测试至少四件事：

1.  响应是重定向。
2.  `@client`被安排了。
3.  A`Client`被破坏。
4.  `Devise`正在提供适当的身份验证。

规范应该只测试一件事和一件事。尽管进行更多测试可能很诱人，但我不推荐它。Cucumber 或其他集成测试测试一堆东西，但不是规范。

`Devise`不是你应该在这里测试的东西，所以`stub`它出来了。我认为这样的事情会起作用：

```
before :each do
  @advisor = FactoryGirl.create(:advisor)
  controller.stub(:authenticate_user!).and_return(true)
  controller.stub(:current_user).and_return(@advisor.user)
end 
```

在此之后，为您正在测试的三件事创建三个不同`it "should" do`的块。

另一个提示是我认为您不需要`association`在定义`FactoryGirl` `factory`. 我认为这只需要多态关联。通常，您可以只给出不带值的关联名称，它将以相同的名称运行工厂。请注意无限循环。

我希望这会有所帮助。

# linux - 在 Linux 内核中写入只读内存

> ID：14544215
> 
> 赞同：1
> 
> 时间：2013-01-27T03:47:37.207
> 
> 标签：linux, linux-kernel, x86, kernel-module, kernel

为了在内核模块中写入只读内存位置（这种内存位置的示例是 sys_call 表），通过操作 CR0 寄存器的第 16 位来禁用页面保护是否足够？
还是我们需要更多的东西来写入只读内存位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:12:32.227

如果您禁用页面写保护，您可能会破坏依赖它的某些内容（例如，内核页面上发生的任何写时复制）。如果你这样做，你可能想暂时禁用中断/调度，所以内存修改在那个 CPU 上看起来是原子的，如果你有超过 1 个，这也可以避免将线程移动到不同的 CPU。

我不确定使用像 0xc12c9e90 这样的硬编码地址是个好主意。我不知道 Linux 如何在地址空间的内核部分中布置东西，但是由于动态内存分配或出于安全原因，地址可能会从一个引导更改为另一个引导（移动东西是有用的，因为它减少了机会利用内核错误）。

# java - 随机浮点数 [0-1] 到 n 个随机浮点数 [0-1]

> ID：14544220
> 
> 赞同：-1
> 
> 时间：2013-01-27T03:48:05.177
> 
> 标签：java, random, procedural-generation

如果我在一个球体周围有一组随机浮点数（0.0f - 1.0f）（甚至在 2D 网格上也可以），每个浮点数与它们的邻居仅相差约 0.1f，有没有办法转换这些浮动到，比如说颜色，每个颜色的 RGB 值也只与它们的邻居相差大约 0.1f，其方式（基本上）获得任何颜色的可能性相同（所以某些颜色不会偏向于其他颜色）？

我使用的方法是[这样](http://freespace.virgin.net/hugo.elias/models/m_landsp.htm)，在每个顶点的最终偏移完成后，我将所有偏移缩小到从 0.0 到 1.0 的浮点值，其中这些浮点值仍然反映值的初始分布。如果有帮助，我可以发布代码片段，或者如果您只是好奇，它们正在编辑中。

这是一个潜在的答案，谢谢 Hot Licks！不过，提供更均匀分布的东西可能会很好。尽管如此，这是一个开始（而且它本身有点酷），是的，谢谢！

```
Random randomGen = new Random();

int randomOne = randomGen.nextInt(256);
int randomTwo = randomGen.nextInt(256);
int randomThree = randomGen.nextInt(256);

float offsets[] = new float[vertices.length];

... // Calcuate the offsets via the method described in that article (code is in the edits if you're curious)

for(int i = 0; i < vertices.length; i++)
{
    float randomFloat = offsets[i];

    float r = (float)((int)(offsets[i]*255.0) ^ randomOne)/255.0f;
    float b = (float)((int)(offsets[i]*255.0) ^ randomTwo)/255.0f;
    float g = (float)((int)(offsets[i]*255.0) ^ randomThree)/255.0f;
} 
```

编辑：删除了很多额外的东西，并得到了问题的实质。如果您对代码片段或其他相关信息感到好奇，您可以看到编辑，但这确实是我要问的大部分内容。

编辑编辑：添加（部分）解决方案代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:05:24.887

> 有没有办法可以将单个浮点值转换为 n 个浮点值，每个浮点值（基本上）彼此无关并反映相同的分布？

不，要求是矛盾的。

如果您采用单个浮点值并以确定的方式从中生成 N 个其他浮点数，那么它们将按*定义*相关。并且也是高度可预测的......给定第一个值。

我唯一能想到的就是尝试找到一个更便宜的随机数生成器。（例如，使用 SecureRandom 生成器将是一个错误……如果这是您当前正在做的事情。）

* * *

> 随机性的关键是生成随机数不是问题（我使用的是一个非常快速的随机数生成器），它在球体上以平滑的分布生成它们，所以加速它并不是真正的我认为不会降低分发质量的选项。我的随机方法非常优化，本质上它很慢。

好吧，我仍然认为答案是一样的……除非你能找到某种方法来加速“球体周围的分布”问题。（显然，您可以利用旋转对称性......但同样明显的是，这会产生明显的非随机结果。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:23:12.030

嗯，我想你想要的是 nextGaussian()。

另一种选择是，从类别剧本中取出一页，将颜色视为代表光谱上的一个点，然后您获取一个随机数并在一次操作中找到相应的颜色。因此，为了论证，假设您从 RGB 值中制作了 100 种颜色，其中第一种颜色是 R:256 G:0 B:0 到 R:0 G:0 B:256。如果有 100 个，那么你得到你的随机 #，并说它是 0.56，你去得到数组中的第 56 个 #。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T04:14:08.073

我不知道您在分布方面需要什么，但我会考虑将连续随机数的分数位模式异或在一起，或者可能只是将随机数与 10 个固定随机模式异或。

但我怀疑这只有在您处理均匀分布时才有效。

# sql - 如何启用即席分布式查询

> ID：14544221
> 
> 赞同：116
> 
> 时间：2013-01-27T03:48:05.430
> 
> 标签：sql, sql-server-2008

当我`OPENROWSET`在 SQL Server 2000 中运行查询时，它可以工作。

但是 SQL Server 2008 中的相同查询会产生以下错误：

> SQL Server 阻止了对组件“即席分布式查询”的声明“OpenRowset/OpenDatasource”的访问，因为该组件作为该服务器安全配置的一部分被关闭。系统管理员可以使用**sp_configure**启用**“即席分布式查询”**

 *** * *

## 回答 #1

> 赞同：242
> 
> 时间：2013-01-27T03:54:21.840

以下命令可能对您有所帮助..

```
EXEC sp_configure 'show advanced options', 1
RECONFIGURE
GO
EXEC sp_configure 'ad hoc distributed queries', 1
RECONFIGURE
GO 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-27T18:36:14.090

您可以检查以下命令

```
sp_configure 'show advanced options', 1;
RECONFIGURE;
GO  --Added        
sp_configure 'Ad Hoc Distributed Queries', 1;
RECONFIGURE;
GO

SELECT a.*
FROM OPENROWSET('SQLNCLI', 'Server=Seattle1;Trusted_Connection=yes;',
     'SELECT GroupName, Name, DepartmentID
      FROM AdventureWorks2012.HumanResources.Department
      ORDER BY GroupName, Name') AS a;
GO 
```

或此[文档链接](http://technet.microsoft.com/en-us/library/ms187569.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-27T14:41:43.247

如果“不支持”对系统目录的临时更新，或者如果您收到“Msg 5808”，那么您需要像这样配置覆盖：

```
EXEC sp_configure 'show advanced options', 1
RECONFIGURE with override
GO
EXEC sp_configure 'ad hoc distributed queries', 1
RECONFIGURE with override
GO 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-17T15:59:24.197

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
GO
RECONFIGURE;
GO 
```**

# ios - iOS dequeueReusableCellWithIdentifier 总是返回 null

> ID：14544222
> 
> 赞同：1
> 
> 时间：2013-01-27T03:48:06.040
> 
> 标签：ios, uitableview

在这一点上我真的很沮丧。使用标识符出列可重用单元始终返回 null。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil) {
        NSLog(@"INIT");
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    return cell;
} 
```

我在这里做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T05:24:01.547

你做的一切都是正确的，一切都在正常工作。iOS 将创建足够多的新单元格来填满屏幕（加一个）。`UITableView`只有当您包含的行数超出一个屏幕的容量并且用户滚动时，它才会开始重用这些单元格。

你会发现如果你有一个数据源会说，里面有 100 个项目，然后滚动，你的日志消息可能只会显示 11 次（取决于你的屏幕上有多少单元格），而不是 iOS 会显示的 100 次滚动时开始回收单元格。

对于大型列表，它会使用太多内存来为`UITableView`. 另一种方法是在滚动时为行分配新视图。但是，这会造成性能瓶颈，导致任何`UITableView`.

[Apple在他们关于`UITableView`s](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)的文档中提到了性能瓶颈。

> 重复使用细胞。- 对象分配有性能成本，特别是如果分配必须在短时间内重复发生 - 例如，当用户滚动表视图时。如果您重用单元格而不是分配新单元格，则可以大大提高表格视图的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:52:14.613

您是否设置了单元格的重用标识符？使用 初始化您的单元格`-initWithStyle:reuseIdentifier:`，或在 IB 中设置标识符。

# xcode4 - 为现有项目ios创建模板

> ID：14544223
> 
> 赞同：0
> 
> 时间：2013-01-27T03:48:15.600
> 
> 标签：xcode4

我有几个类似的项目，我想跳过为每个项目创建新文件和项目的过程。我阅读了项目模板，我想知道是否有人有一个好的教程或参考，以便我可以实现我的项目模板。它基本上是iPhone开发，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:51:25.303

[将新模板添加到 Apple 通过 Xcode 提供的模板中并](https://stackoverflow.com/questions/9531720/how-to-create-project-templates-in-xcode-4-2)非易事，但一个简单的解决方案是您可以创建一个空项目，其中只包含您希望在所有项目之间通用的基本内容。然后复制您的新伪模板应用程序，您可以从那里自定义和填写代码。

如果您*确实*想创建自定义 Xcode 项目模板，[这里是我发现的一个教程，可能会对您有所帮助](http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/)。

# python - Flask：具有自定义域名的 Heroku 会中断会话？

> ID：14544225
> 
> 赞同：1
> 
> 时间：2013-01-27T03:48:33.383
> 
> 标签：python, session, cookies, flask

我有一个托管在 Heroku 上的 Flask 应用程序，并且 Heroku 实例（比如“ `helloworld.herokuapp.com`”）有一个自定义域名，比如“ `www.helloworld.com`”。

当我在本地 heroku URL 访问应用程序时，会话工作得很好。当我在 访问它时`www.helloworld.com`，它们不起作用。我认为这是因为 Flask 正在签名的会话 cookie 用于错误的域。

我尝试将`app.SESSION_COOKIE_DOMAIN`and分配`app.SERVER_NAME`给“ `helloworld.com`”，但它仍然只为`helloworld.herokuapp.com`.

有什么方法可以强制会话 cookie 签名为我的自定义域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:55:29.173

经过大量测试和 and 的多次排列后`SESSION_COOKIE_DOMAIN`，`SERVER_NAME`我得出结论认为问题出在 Heroku。Heroku 当前路由/连接到自定义域的方式会破坏域 cookie。

我通过迁移到 EC2 验证了这一点……现在一切正常。

# codeigniter - twitter oauth - 无效或过期的令牌

> ID：14544231
> 
> 赞同：2
> 
> 时间：2013-01-27T03:49:06.227
> 
> 标签：codeigniter, twitter, twitter-oauth

我正在使用 simon 的 twitter 库在代码点火器中使用 twitter 实现登录

这是代码

推特配置

```
$config['twitter'] = array(
'_tokens' => array(
    'consumer_key' => 'xxxxxxxxxxxxxxxxxxxxx',
    'consumer_secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
    //'access_key' => '',
    //'access_secret' => '',
),
'_force_login' => false, /* Do we force the user to login */
'_token_session' => 'twitter_oauth_tokens', /* Session name */
'_open_in_new_window' => true, /* Do links in Tweets get opened in a new window (add target="_blank" if true) */
'_new_window_target' => '_blank',
'_search_url' => 'http://twitter.com/search?q=%search%', /* Link for searches - '%search% is where the search key lives */
'_user_url' => 'http://twitter.com/%user%', /* Link for profiles - %user% is where the username lives */

/* Cache method (remember to make /applications/cache writable) or false for no caching */
'_cache_method' => array(
    'adapter' => 'apc',
    'backup' => 'file',
),
'cache_timeout' => 60, /* Timeout in seconds */

/* Most of these things shouldn't change */
'_access_token_url' => 'http://api.twitter.com/oauth/access_token',
'_api_url' => 'https://api.twitter.com/1.1/',
'_authorization_url' => 'http://api.twitter.com/oauth/authorize',
'_request_token_url' => 'http://api.twitter.com/oauth/request_token',
'_signature_method' => 'HMAC-SHA1',
'_version' => '1.0',
'_method' => 'json',
); 
```

授权推特登录

```
public function index() {

    /* Check we're logged in */
    if($this->twitter->is_logged_in()) {
        /* We are */
        //$test = $this->twitter->get_username();
        //var_dump($test);
        //$url = 'account/verify_credentials';

        //$arrData = $this->twitter->call('get', 'account/verify_credentials');

        $user = $this->twitter->call('get', 'account/verify_credentials');
        var_dump($user); } 
```

但我得到以下错误结果

> 401 | 请求失败{"errors":[{"message":"Invalid or expired token","code":89}]}

如何解决这个问题呢？任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T19:26:24.533

你解决了这个问题吗？
在 Twitter 应用程序设置中重置您的使用者密钥/秘密，或重新创建您的访问令牌可能会有所帮助

还要检查[Twitter OAuth - Invalid/Expired Token](https://stackoverflow.com/questions/5470854/twitter-oauth-invalid-expired-token)

# php - 在 foreach 中使用 isset() 不起作用？

> ID：14544236
> 
> 赞同：0
> 
> 时间：2013-01-27T03:50:15.783
> 
> 标签：php, mysql, foreach

基本上，我想从 mysql 数据库中保存的变量中生成不定数量的按钮。

```
$stmt = $conn->prepare('SELECT * FROM array');
$stmt->execute();
$array = $stmt->fetchAll();

foreach ($array as $var) {
echo '<br>Would you like to accept or reject?';
echo '<br><input name="accept' . $var['subject'] . '" type="submit" value="Accept" /><input name="reject' . $var['subject'] . '" type="submit" value="Reject" />';
} 
```

现在，当我尝试按下按钮时，什么也没有发生。这是我认为可能适用的代码：

```
foreach ($array as $var) {
$accept = 'accept' . $var['subject'];
$reject = 'reject' . $var['subject'];
if (isset($_POST[$accept])) {
//script for accept
}
if (isset($_POST[$reject])) {
//script for reject
}
} 
```

没有错误。我认为这是因为我不能以这种方式在 foreach 中使用 isset。有没有其他有效的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:57:44.640

您可以并且它会正常工作，但您可能希望将其更改为以下

```
if (!empty($_POST[$accept])) {
    //script
}

if (!empty($_POST[$reject])) {
    // script
} 
```

`$_POST`是一个全局变量，并且总是被视为“设置”是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T20:40:10.127

我收到此错误的原因是我忘记在 html 文件中使用 <form> 标记。

# c++ - 字符串的C打印导致奇怪的字符

> ID：14544237
> 
> 赞同：-3
> 
> 时间：2013-01-27T03:51:08.777
> 
> 标签：c++

我正在尝试通过以下方式输出 int：

```
void the_int(int i)
{
     int lenghtOfInt = 0;
     int tempValue = i;
     while(tempValue >= 1)
     {
          tempValue/=10;
          lenghtOfInt++;
     }

     int currentDigit;
     char string[lengthOfInt];
     while(i>9)
     {
           currentDigit= i % 10;
           i = i/10;
           char ch = (char)(((int)'0')+currentDigit);

           string[lengthOfInt--] = ch;
     }
     string[lengthOfInt]= (char)(((int)'0')+i);
     function(str); //prints the string character by character
} 
```

如果我用 i = 12 尝试这个函数，我会得到 à12ç。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:01:24.257

加入 21 世纪并使用`std::string`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:58:16.820

您正在访问超出以下行中的数组边界。

```
string[lengthOfInt--] = ch; 
```

这试图访问`lengthofInt`不正确的索引。

现在，忽略带有变量的数组声明，

```
char string[lengthOfInt]; 
```

`0`声明一个具有索引 from to的数组`lengthofInt - 1`

此外，根据您打印字符串的方式，最后可能需要一个 '\0' 字符。虽然，如果您逐个字符地进行并且确定自己的界限，那么它不是必需的，但仍然推荐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T03:59:06.437

C 中的所有字符串都必须以空字节 (0) 结尾。因此，首先将 1 添加到您在堆栈上分配的 char 数组的长度，然后在打印之前将 nul 字节添加到字符串中。

我认为这是一项家庭作业。否则，您应该只使用该`itoa`功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T03:59:35.403

忽略您使用变量声明数组（您应该使用动态分配或至少使用常量）这一事实，`char string[lengthOfInt];`需要`char string[lengthOfInt+1];`并且您需要`string[lengthOfInt] = '\0';`在 while 循环之前。C 字符串以 NULL 结尾。

此外，为什么不只是`printf("%d", i);`？

# haskell - 在 BST Haskell 中删除最小值

> ID：14544248
> 
> 赞同：2
> 
> 时间：2013-01-27T03:55:05.583
> 
> 标签：haskell, binary-search-tree

如何删除 BST 中的最小值？我似乎找不到保留树的方法

```
data BST = EmptyT
         | Node Float BST BST
           deriving (Eq, Show, Read)

deleteMin :: BST -> Maybe BST
deleteMin EmptyT  = Nothing
deleteMin (Node x left right)
    |left == EmptyT = ? 
    |otherwise = ? 
```

我需要吸气剂和二传手吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T04:27:35.863

Haskell 没有 OOP 意义上的“getter and setter”，尽管您可以提出类似的概念。如果要删除二叉树中的值，则必须构造一个缺少该值的新树。这就是你如何“保护树”。

假设您使用的是标准 BST，那么树中最左边的节点将包含最小元素。所以，通过向左遍历你的树，你最终应该会遇到这样的情况`Node x EmptyT r`。任何其他节点，您只需递归调用`deleteMin`左分支。

这给出了一个看起来像的函数

```
deleteMin :: BST -> Maybe BST
deleteMin EmptyT                = Nothing
deleteMin (Node x EmptyT right) = Just right
deleteMin (Node x left right)   =
    case deleteMin left of
         Nothing -> Nothing
         Just nl -> Just $ Node x nl right 
```

您必须检查每次调用的结果`deleteMin`以检查 `Nothing`. 我不认为你真的需要返回 a `Maybe BST`，除非你真的需要表明没有要删除的元素。如果没有要删除的内容，则返回一棵空树更有意义（至少对我而言）。

我认为大多数人也会考虑使用模式匹配，而不是使用带有相等检查的守卫。

# c++ - 适用于 g++ 但不适用于 MSVC++

> ID：14544255
> 
> 赞同：1
> 
> 时间：2013-01-27T03:57:02.010
> 
> 标签：c++, visual-c++, g++

> **可能重复：**
> [为什么 cin >> string 不能与 Visual C++ 2010 一起使用？](https://stackoverflow.com/questions/5343035/why-isnt-cin-string-working-with-visual-c-2010)

我编写的第一个程序[拒绝](http://pastebin.com/6jpf6WF8)在 Visual C++ 中编译，而且它似乎在抱怨没有为 istream 定义 '>>' 运算符。

仔细查看后，它似乎是正确的，所以我用 g++ 进行了检查，它编译得很好（并且 -Wall 没有警告）。

那么为什么它适用于 g++ 而不是 Visual C++ 呢？

这是程序：

```
#include <iostream>
#include <list>

int main() {
    std::list<std::string> list;
    std::string str = "";
    std::cin >> str;
    while (str.compare("q") != 0) {
        list.push_back(str);
        std::cin >> str;
    }

    std::cout << "You entered: \n";

    for (std::list<std::string>::iterator i = list.begin(); i != list.end(); i++) {
        std::cout << *i << std::endl;
    }
    return 0;
} 
```

我曾认为为 Visual C++ 编写的 C++ 代码和为 g++ 编写的 C++ 代码在大多数情况下几乎相同。

它们有多大不同，你说这些问题多久出现一次，你知道我在哪里可以找到这些差异/陷阱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:02:37.983

不同的编译器具有不同的头文件，这些头文件在内部包含其他头文件。gcc 可能包括`<string>`inside `<iostream>`，而 Visual Studio`<iostream>`不包括`<string>`. 尝试放置：

```
#include <string> 
```

在顶部与您的其他包括。`<string>`是定义的头文件`operator>>(std::istream, std::string)`（换句话说，`<string>`是“正式”提供您需要做的功能的头文件`std::cin >> str;`）。

# jquery - jquery 切换需要 2 次点击

> ID：14544257
> 
> 赞同：1
> 
> 时间：2013-01-27T03:57:20.023
> 
> 标签：jquery, jquery-click-event

这是一个jsfiddle：

[http://jsfiddle.net/FVuvC/](http://jsfiddle.net/FVuvC/)

在 jquery 中，它使绿色三角形拉出容器，然后红色三角形将其推回，但它需要 2 次点击才能发生。我该如何做才能使它只需要在两个三角形上单击 1 次？

```
$(function () {
    $("#clickmeright, #clickmeleft").toggle(function () {
        $(this).parent().animate({
            right: '0px'
        }, {
            queue: false,
            duration: 500
        });
    }, function () {
        $(this).parent().animate({
            right: '-170px'
        }, {
            queue: false,
            duration: 500
        });
    });
}); 
```

我在网站上查找了其他问题，但我仍然不明白。如：

[JQuery 切换问题，需要单击两次](https://stackoverflow.com/questions/9445502/jquery-toggle-issue-requires-two-clicks)

[需要点击 2 次的切换功能](https://stackoverflow.com/questions/8783317/toggle-function-requiring-2-clicks)

我从他们那里得到的最大收获是我必须将切换更改为单击功能。所以这应该告诉你我在哪里理解这些东西。另外，有人可以推荐一些好的资源来学习这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:08:47.550

发生这种情况是因为事件处理程序不是在两个元素上切换功能，而是在每个元素上分别切换功能（`$('#e1,#e2').click(function)`如果单击 e1 ，您不会想知道是否不会在两个元素上触发事件），解决方法我会做类似的事情：

```
$(function () {
    var $clickmeright=$("#clickmeright");
    $("#clickmeleft").click(function() {
        $clickmeright.click();
    })
    $clickmeright.toggle(function () {
        $(this).parent().animate({
            right: '0px'
        }, {
            queue: false,
            duration: 500
        });
    }, function () {
        $(this).parent().animate({
            right: '-170px'
        }, {
            queue: false,
            duration: 500
        });
    });
}); 
```

[http://jsfiddle.net/oceog/FVuvC/1/](http://jsfiddle.net/oceog/FVuvC/1/)

# java - 是否可以从 Python 生成 Java 代码，并在两个进程之间进行通信？

> ID：14544259
> 
> 赞同：1
> 
> 时间：2013-01-27T03:57:38.313
> 
> 标签：java, python

### 编辑：

我最初忘了添加，但真正的大要求是这需要作为 .exe 交付。我现在使用 PyInstaller 将所有内容压缩为可执行文件，但是当您开始涉及多种编程语言时，我不知道所有内容如何组合在一起。

* * *

我有一个使用 Python 和 wxWidgets 编写的小 gui。该程序的真正核心是 CPU 和网络密集型，我使用多处理模块在一个新进程中生成。这样，gui 保持响应，第二个进程可以在自己的内存/处理器空间中自由运行。最后，我使用一个带有 a 的线程`Multiprocess.Queue`来处理 gui、它本身和进程之间的通信。

![在此处输入图像描述](../Images/c723b4849cd1ea57451a4881d9d8f349.png)

现在，问题在于 Python 处理主要功能的速度有点慢。所以我很快就用 Java 构建了原型，我的速度提高了大约 60%。因此，对于核心逻辑，我想将所有内容都移植到 Java。

然而，我已经在 Python 和 WX 的 Gui 中投入了*大量*的工作，所以我不想用 Java 重写这方面的内容。所以，我的问题是，我将如何组合这两个独立的系统？

在很大程度上，通信的范围是发出启动和停止命令。其余的是反馈给 gui 的微小更新，只是为了让用户知道它当前正在做什么。

希望这一切都说得通！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:14:08.893

> 我最初忘了添加，但真正的大要求是这需要作为 .exe 交付。

好吧，我认为这将在很大程度上排除 Java。虽然可以将一些 Java 程序转换为 .exe 文件，但在许多方面都存在问题......

我认为你最好用 C 或 C++ 编写需要真正快速的东西。您可以将其设为单独的可执行文件，或者（为了获得更好的性能）您可以使用本机库机制之一进行访问；见[http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages](http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages)

* * *

如果您在这里真正要解决的问题是 GUI 响应能力，那么您应该能够使用 python 线程来做同样的事情......用更少的编码工作。

# html - 图像大小调整导致滚动缓慢

> ID：14544260
> 
> 赞同：19
> 
> 时间：2013-01-27T03:57:40.830
> 
> 标签：html, css

我正在加载大图像并让浏览器调整它们的大小。我明确设置大小。

```
<img src="http://example.com/image1.jpg" width="240" height="360"/> 
```

页面上有很多这样的图像。滚动非常缓慢且不稳定。滚动时，chrome 中的事件时间轴看起来像这样：

```
Paint

* Image decode (JPEG)
* Image resize (non-cached)
* Image decode (JPEG)
* Image resize (non-cached)
* ...

Paint

* Image resize (cached)
* Image resize (cached)
* Image resize (cached)
* Image resize (cached)

Paint

* Image decode (JPEG)
* Image resize (non-cached)
* Image decode (JPEG)
* Image resize (non-cached)
* ....

Paint

* Image resize (non-cached)
* Image resize (non-cached)
* Image resize (non-cached)
* Image resize (non-cached)

Paint

* Image decode (JPEG)
* Image resize (cached)
* Image decode (JPEG)
* Image resize (cached)
* ... 
```

等等

我不确定为什么某些 Paint 事件包括图像解码而其他事件不包括，也不知道为什么有时调整大小被缓存而有时却没有。我想这一定与进入视口的新图像有关。

**有什么办法可以确保我在页面加载时只为每张图片支付一次图片调整大小的费用，并避免在滚动期间调整图片大小？**

（当然，我知道最好的解决方案是通过加载已经具有适当大小的图像来避免浏览器调整大小。在这种情况下，这是不切实际的。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T21:19:42.890

此功能将允许您只调整一次图像大小，将其替换为以所需比例调整大小的新图像：

```
function resizeImage(image, maxWidth, maxHeight) {

  // Output scale is the minimum of the two possible scales
  var scale = Math.min((maxWidth / image.width), (maxHeight / image.height))

  // Output canvas
  var outputCanvas = document.createElement('canvas')
  outputCanvas.width = image.width * scale
  outputCanvas.height = image.height * scale

  // Draw image content in output canvas
  var outputContext = outputCanvas.getContext('2d')
  outputContext.drawImage(image, 0, 0, parseInt(image.width * scale), parseInt(image.height * scale))

  // Replace image source
  image.src = outputCanvas.toDataURL()
} 
```

它将您传递的图像作为`image`参数，并在其调整大小的位置创建一个画布`image`，然后将`image.src`属性设置为输出画布的内容，使用`toDataURL()`.

您调整大小的图像**必须位于 RELATIVE 路径中**（是的，这并不酷），否则如果不满足 CORS，您将遇到安全错误。

但是您可以将 base64 数据作为`src`属性传递，并且使用 AJAX 可以很容易地做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:33:32.180

您的问题是同时下载大量图像，大量大图像。如果存在大量大图像并且用户个人内存和处理器限制，则将它们渲染为原始大小以外的其他尺寸也会很慢。

无论您告诉浏览器渲染图像的大小，浏览器仍会加载原始图像大小，然后动态调整它。大图像必须通过用户的 Internet 连接从服务器传输到浏览器。通过使用 html 属性，您实际上所做的就是使用 CSS 来更改下载后的图像大小。

在 mho 中，您最好的选择是在服务器端创建多个图像尺寸，最好是在创建资产时，而不是在运行时调用最接近您需要的图像尺寸。如果您使用脚本等动态创建图像，请将它们保留在服务器上以供以后再次使用，并减少加载时间和服务器资源。

最后一个提示也是确保您正在缓存。更多信息在这里[http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/](http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T22:35:08.950

CSS在这里会有所帮助。这将作为默认设置，可能会减慢单个加载时间。要实现这一点，只需为图像做基本的 css。参考如下：

```
 <img src="....." /> 
```

对于您的 css，您需要以下代码作为示例：

```
 img {
height: 360;
width: 240;
} 
```

然后，您可以添加额外的代码来获得圆角、边框或任何您可能想要的效果。

为了避免所有调整大小，这当然有助于在 Photoshop 中调整图像大小。然后它只会显示图像，而不是在显示页面的不同部分时渲染每个图像。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T02:47:06.337

大图像需要更多时间才能加载到内存 (RAM)，即使图像已经在内存 (RAM) 上，如果内存消耗很大（大图像太多或有应用程序在后台占用大量内存），不可见（外部可见区域）图像被推送到分页/交换文件（在硬盘驱动器上），因此当图像到达可见区域时，浏览器将以硬盘驱动器速度（慢速）从分页/交换加载该文件。

在这种情况下，如果您在一页上有很多大图像，则不能依赖客户端调整大小，因为这会使您的客户端浏览体验变差。

您应该考虑在服务器端根据需要或预先调整大小（缩略图）来调整图像大小。

在按需方法的情况下，您可以使用 Apache 的 mod_rewrite 将图像指向脚本以调整客户端浏览器请求的图像的大小和图像。

查看流行的图像共享/托管站点，查看随机图像并复制其 URL，将其粘贴到另一个选项卡，然后通过更改/删除 URL 的某些部分来使用 URL。您可以看到它们在服务器端动态调整图像大小。

**TLDR**：页面上的许多大图像不能平滑滚动，要么使用缩略图，要么如果你坚持不使用缩略图，则滚动不流畅。

哦，还有一件事要考虑，那就是增加你（和你的客户）的 RAM 来处理这样的内存需求

# scala - Scala：不变性和依赖路径的类型兼容性

> ID：14544269
> 
> 赞同：4
> 
> 时间：2013-01-27T03:58:29.363
> 
> 标签：scala, path-dependent-type

我已经围绕这个主题提出了一些问题，但这次我想对其进行更一般的讨论，因为在我看来 Scala 缺少一些非常重要的块。

考虑以下代码（从我的真实项目中简化），

```
trait World {
  type State <: StateIntf
  def evolve(s: State): State
  def initialState: State
}

class Algorithm(world: World) {
  def process(s: world.State) {
    val s1 = world.evolve(s)
    // ... do something with s and s1
  }
} 
```

一切看起来都那么美好和数学，但是

```
object SomeWorld extends World {...}
new Algorithm(SomeWorld).process(SomeWorld.initialState)  // incompatible type 
```

当然可以通过以下方式进行

```
trait World {
  type State <: StateIntf
  var s: State
  def evolve: Unit      // s = next state
  def initialize: Unit  // s = initial state
  def getState: StateIntf = s
} 
```

但我们只是回到了可变世界。

有人告诉我这是因为 Scala 没有流分析。如果这就是问题所在，Scala 不应该得到那部分吗？我只需要编译器可以知道从`val`to传递的值`val`是相同的，以便它们的内部类型必须一致。这对我来说似乎很自然，因为：

1.  `val`是涉及scala中不变性的最基本概念
2.  需要路径相关的类型兼容性来对`World`具有完全不变性的事物进行建模（从数学角度来看这是非常需要的）
3.  通过s的流分析`val`解决问题

我要求太多了吗？还是已经有解决它的好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T09:00:46.007

我认为泛型为这个问题提供了一个更简单的解决方案：

```
trait World[S <: StateInf] {
  def evolve(s: S): S
  def initialState: S
}

class Algorithm[S <: StateInf](world: World[S]) {
  def process(s: S) {
    val s1 = world.evolve(s)
    // ... do something with s and s1
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T02:33:43.833

编译器有时需要一点帮助来证明您在使用路径相关类型时所做的事情是合法的。即，正如您所说，编译器缺少流分析，因此我们必须明确告诉它我们不只是使用 any `World`，我们正在使用精确`SomeWorld`以便我们可以使用`SomeWorld.initialState`.

在您的情况下，如果您`Algorithm`像这样更改：

```
class Algorithm[W <: World](world: W) {
  def process(s: world.State) {
    val s1 = world.evolve(s)
    // ... do something with s and s1
  }
} 
```

然后编译如下：

```
object SomeWorld extends World {...}
new Algorithm[SomeWorld.type](SomeWorld).process(SomeWorld.initialState) 
```

# iphone - 如何取消`performSelector:withObject:afterDelay:`？

> ID：14544270
> 
> 赞同：-1
> 
> 时间：2013-01-27T03:58:33.017
> 
> 标签：iphone, cocoa-touch, performselector

> **可能重复：**
> [取消排队的 performSelector:afterDelay 调用](https://stackoverflow.com/questions/1806445/cancelling-queued-performselectorafterdelay-calls)

我有代码可以将结果显示延迟 6 秒。但是，如果用户继续，我希望能够中止此延迟。我不确定如何在延迟方法调用启动后取消它。有人可以指出我正确的方向吗？

这是我用来调用延迟方法和下面方法的代码。

```
[self performSelector:@selector(delay) withObject:nil afterDelay:6.0];

-(void)delay{
    [buttonScreen setFont:[UIFont systemFontOfSize:32.0]];
    buttonScreen.text = [formatter stringFromNumber:[NSNumber numberWithDouble:result]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:07:49.920

`performSelector:withObject:afterDelay:`在 NSObject 类文档中。所以要做的就是查看 NSObject 类文档，看看还有什么。如果你这样做，你会看到：

> `cancelPreviousPerformRequestsWithTarget:``performSelector:withObject:afterDelay:` 取消执行先前使用实例方法注册的请求。

# asp.net - asp.net中的下拉列表选定字段

> ID：14544271
> 
> 赞同：0
> 
> 时间：2013-01-27T03:58:48.250
> 
> 标签：asp.net

****我有 2 个 aspx 页面 default1.aspx 和 default2.aspx。我在 default1.aspx 中创建了一个下拉列表。在我单击 default1.aspx 页面中的提交按钮后，我想检索下拉列表的选定值并在我的 default2.aspx 页面中设置标签值***。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:18:04.307

```
 protected void Button1_Click(object sender, EventArgs e)
  {
  Session["Value"] = DropDowlList.SelecetedValue;
  Response.Redirect("default2.aspx ");
  } 
```

在 default2.aspx 中像这样访问那个 Session。

如果是整数

```
 int value=Convert.ToInt32(Session["Value"]); 
```

如果是字符串

```
string value=Convert.ToString(Session["Value"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:17:26.673

假设 default2.aspx 尚未加载，您可以使用此处讨论的技术之一：

[http://dotnetslackers.com/Community/blogs/haissam/archive/2007/11/26/ways-to-pass-data-between-webforms.aspx](http://dotnetslackers.com/Community/blogs/haissam/archive/2007/11/26/ways-to-pass-data-between-webforms.aspx)

# javascript - 每次用户访问网站时如何加载最新的 javascript 文件

> ID：14544277
> 
> 赞同：1
> 
> 时间：2013-01-27T03:59:35.057
> 
> 标签：javascript, jquery, asp.net-mvc-3

> **可能重复：**
> [如何强制刷新浏览器中的 javascript 文件？](https://stackoverflow.com/questions/8230589/how-do-i-force-the-refresh-of-javascript-files-in-a-browser)

我在基于 ASP.NET MVC 的应用程序和 javascript 文件包含在 .csHtml 文件中。

我需要这样做，以便用户不必执行 [Ctrl+F5] 或手动清除缓存，并且每次在浏览器中加载最新版本的 javascript 文件。

如果可以提供一些示例，我将不胜感激。

建议的主要技术是在包含文件时使用虚拟参数。此外，每次修改 js 文件时，我都不会手动更改参数。如果可以自动完成，需要一些示例。

编辑 1：请提供与 ASP.NET MVC 预期的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:02:18.690

在 JS 文件的文件名中添加版本号（就像 jQuery 一样）。然后，每当您修改 JS 文件时，都会更改版本并更改包含它的 HTML 文件。

jQuery文件命名示例：

```
jquery-1.8.3.js
jquery-1.9.0.js 
```

这使您可以在服务器上为 JS 文件本身设置非常长的缓存，这确实有助于提高网站的性能。但是，每当您修改 JS 文件时，查看器都会立即获取新的 JS 文件，因为新命名的文件会被新的 HTML 文件提取，因为它们不在浏览器缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:04:38.983

您可以通过在每个 javascript 文件 URL 之后附加随机哈希或数字 URL 参数来进行缓存清除，如下所示：

```
http://www.bestsiteonearth.yes/cool_javascript.js?cache_buster=2187sasas1289012890aohkjaiosa0990 
```

由于每次加载页面时该数字都不同，因此不会缓存 URL。更多信息[在这里](http://www.developphp.com/view_lesson.php?v=275)。教程提供了 PHP 示例，但如果您知道如何使用任何语言创建哈希或随机数并可以将其附加到 URL，那么您就可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:10:26.067

我个人使用 PHP，但我这样做的方式是在输出缓冲区中搜索静态文件，例如图像、脚本和样式表（以及音频、视频等），然后从文件系统中检索它们的修改时间并将其附加为`/t=TIMESTAMP`. 然后我使用`.htaccess`剥离时间戳并获取原始文件名。这优于查询字符串，因为许多客户端不会缓存带有查询字符串的文件，而且它也优于版本控制，因为它只需修改文件即可自动更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T04:14:14.147

您想使用[Bundling 和 Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。根据您的 MVC 版本，实现略有不同。在最新版本中，默认使用它。

捆绑和缩小会将所有脚本（和样式表）组合并缩小到一个文件中（或多个文件，具体取决于您的使用方式），并为它们提供一个独特的参数。每当该特定捆绑包中的文件更改时（因此用户需要下载新文件），该参数会自动更改。

对于 MVC3，您需要安装[Microsoft Web Optimization](http://nuget.org/packages/Microsoft.Web.Optimization/0.1)。

然后在你的 global.ascx 中，你会做这样的事情并从以下位置调用它`Application_Start`：

```
private static void SetupBundling()
{
     var jsBundle = new Bundle("~/Scripts/js", typeof(JsMinify));
     jsBundle.AddDirectory("~/Scripts/", "*.js", false);
     jsBundle.AddDirectory("~/Scripts/anothr-good-folder/", "*.js", false);
     BundleTable.Bundles.Add(jsBundle);

     var randomBundle = new Bundle("~/Scripts/random", typeof(JsMinify));
     randomBundle.AddFile("~/Scripts/random/main.js");
     randomBundle.AddFile("~/Scripts/random/cool.js");
     BundleTable.Bundles.Add(randomBundle);

     var cssBundle = new Bundle("~/Content/css", typeof(CssMinify));
     cssBundle.AddDirectory("~/Content/", "*.css", false);
     BundleTable.Bundles.Add(cssBundle);
} 
```

因此，第一个捆绑包将捆绑`.js`您`~/Scripts`文件夹中的每个文件。在您的头文件中，您可以像这样引用它：

```
<script src="@Microsoft.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")" type="text/javascript"></script> 
```

它将呈现为：

```
<script src="/Scripts/js?v=-2573834892993289" type="text/javascript"></script> 
```

并且任何时候您的`.js`文件之一更改（或`.css`），参数也会更改。

CSS 捆绑包的类似实现，如果您只想`randomBundle`在某些页面上引用它。

# ruby-on-rails - Rspec - 动态测试，好主意还是坏主意？

> ID：14544280
> 
> 赞同：0
> 
> 时间：2013-01-27T04:00:17.947
> 
> 标签：ruby-on-rails, testing, rspec

这个想法源于`factory_girl` [测试所有工厂](https://github.com/thoughtbot/factory_girl/wiki/Testing-all-Factories-%28with-RSpec%29)的方法。这让我开始思考，为什么不对模型、控制器和请求做类似的事情呢？

据我所知，任何新`ActiveRecord`模型*都应该*是无效的。如果没有，那么您还没有创建相关的验证。从 TDD 方法来看，这可能不是问题，因为您首先要处理您的断言。但是，如果您要继承另一个没有适当测试的项目，那么如果您可以使用一些 [非常] 通用的断言来测试每个模型/视图/控制器，那将是非常宝贵的。

对于模型，我认为这`model.new.should be_invalid`是一个好的开始。

对此有什么想法吗？这是一个好/坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:39:16.583

我不鼓励这种广泛的测试，因为您将花费大量时间运行具有固有低价值的测试。

您的测试应该定义系统的行为/要求。断言所有模型都具有一个或多个必需值并不是对每个模型都进行的有用测试。

如果您有真正的横切关注点，您应该将该逻辑提取到一个 mixin 中，并使用它自己的测试来隔离和定义行为。然后，您可以将其混合到所有模型中，而无需测试每个模型。

大多数工程师都同意功能代码的成本应该与业务/行为价值进行权衡，但测试也应该如此。这些类型的测试本质上是低价值的，但在运行时间、维护和误报方面都有成本。

# sql - 不满足条件时如何显示 NULL

> ID：14544283
> 
> 赞同：2
> 
> 时间：2013-01-27T04:01:02.573
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有这张桌子

```
Column1  Column2
1        value1
2        value2
3        value3
4        value4 
```

使用此语句：

```
SELECT * FROM table WHERE column2='value2' 
```

只显示这个：

```
Column1  Column2
2        value2 
```

我想显示这个：

```
Column1  Column2
1
2        value2
3
4 
```

如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T04:13:14.513

好吧，您的`WHERE`子句是在说“告诉我行在哪里`column2 = value2`” - 因此，正如所写的，它不可能包含任何`column2`具有其他值的行，因为它们已被过滤掉。

`CASE`这是使用表达式（且无`WHERE`子句）完成您要查找的内容的一种方法：

```
SELECT column1, column2 = CASE 
  WHEN column2 = 'value2' THEN 'value2'
  ELSE NULL
END
FROM dbo.table; 
```

# android - 音频不会播放？

> ID：14544293
> 
> 赞同：0
> 
> 时间：2013-01-27T04:04:17.733
> 
> 标签：android, audio, media-player, media

我遇到了这个问题，音频只是不想播放。没有错误，但是当我应该听到音乐时，我听不到音乐。这是下面的代码和logcat。我不知道如何阅读 logcat，这可能有助于解决问题。

```
public void start1(final View view)
    {
    setContentView(R.layout.timer); 
    if(path1.equals("default"))
     {
         path1="R.raw.iwilltouchthesky.mp3";
     }

     mp.reset();
     try {
        mp.setDataSource(path1);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     mp.start();    
    text = (TextView) this.findViewById(R.id.textView1);
    text2 = (TextView) this.findViewById(R.id.textView3);
    a=new CountDownTimer(interval1*1000, 1000) {
        public void onTick(long millisUntilFinished) {
            text.setText("Seconds Remaining: " + (millisUntilFinished / 1000));
            text2.setText("Repetitions Left: "+repsleft);
        }

        public void onFinish() {
            mp.stop();
         start2(view);
        }
     }.start();
    } 
```

日志猫

```
01-26 20:28:48.620: I/InputReader(1908): dispatchTouch::touch event's action is 0 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0]
01-26 20:28:48.620: I/InputDispatcher(1908): Delivering touch to current input target: action: 0, channel 'xxxx'
01-26 20:28:48.620: I/InputDispatcher(1908): Delivering touch to current input target: action: 0, channel 'xxxx'
01-26 20:28:48.620: D/LightsService(1908): setLight_native: 2
01-26 20:28:48.620: E/lights(1908): write_int: path /sys/devices/virtual/sec/sec_touchkey/brightness, value 1
01-26 20:28:48.620: I/PowerManagerService(1908): Ulight 3->7|0
01-26 20:28:48.620: D/PowerManagerService(1908): setLightBrightness : mButtonLight : 118
01-26 20:28:48.620: V/LightsService(1908): setLight #2 #ff767676
01-26 20:28:48.695: I/InputReader(1908): dispatchTouch::touch event's action is 1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0]
01-26 20:28:48.695: I/InputDispatcher(1908): Delivering touch to current input target: action: 1, channel 'xxxx'
01-26 20:28:48.695: I/InputDispatcher(1908): Delivering touch to current input target: action: 1, channel 'xxxx'
01-26 20:28:48.695: I/AudioService(1908): playSoundEffect() type:0 volume:-1
01-26 20:28:48.700: I/AudioPolicyManagerBase(1757): getSituationVolume: isBTConnected:0 isHeadConnected:0
01-26 20:28:48.700: I/AudioPolicyManager(1757): getParamFromPolicy  deviceInt = 0, situationInt = 1, situationVolume = 0.300000
01-26 20:28:48.700: I/AudioPolicyManager(1757): startOutput() output 1, stream 1, session 17216
01-26 20:28:48.700: I/AudioFlinger(1757): start output streamType (0, 1) for 1
01-26 20:28:48.700: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::createVolume()
01-26 20:28:48.700: V/yamaha::media::UserDep(1757): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
01-26 20:28:48.700: V/yamaha::media::UserDep(1757):                       incall: onoff=0, devices=00000000h
01-26 20:28:48.700: V/yamaha::media::UserDep(1757):                       capture: onoff=0, devices=00100000h, audioSource=6
01-26 20:28:48.700: V/yamaha::media::UserDep(1757):                       playback: audio_onoff=0, line_onoff=0)
01-26 20:28:48.700: V/yamaha::media::UserDep(1757): ALL Off
01-26 20:28:48.700: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume()
01-26 20:28:48.700: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() FM Playback: Ready
01-26 20:28:48.700: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() VoiceCall: Ready
01-26 20:28:48.745: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::createVolume()
01-26 20:28:48.745: D/yamaha::media::VolumeCtrl(1757): Dir0      : AP Playback Music SP (0001h)
01-26 20:28:48.745: D/yamaha::media::VolumeCtrl(1757): Dir0Att   : AP Playback Music SP (0001h)
01-26 20:28:48.745: D/yamaha::media::VolumeCtrl(1757): DacMaster : AP Playback Music SP (0101h)
01-26 20:28:48.745: D/yamaha::media::VolumeCtrl(1757): Sp        : AP Playback Music SP (0001h)
01-26 20:28:48.745: E/yamaha::media::VolumeCtrl(1757): Dir0      : AP Playback Music SP (0001h)
01-26 20:28:48.745: E/yamaha::media::VolumeCtrl(1757): Dir0Att   : AP Playback Music SP (0001h)
01-26 20:28:48.745: E/yamaha::media::VolumeCtrl(1757): DacMaster : AP Playback Music SP (0101h)
01-26 20:28:48.745: E/yamaha::media::VolumeCtrl(1757): Sp        : AP Playback Music SP (0001h)
01-26 20:28:48.745: V/yamaha::media::UserDep(1757): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
01-26 20:28:48.745: V/yamaha::media::UserDep(1757):                       incall: onoff=0, devices=00000000h
01-26 20:28:48.745: V/yamaha::media::UserDep(1757):                       capture: onoff=0, devices=00100000h, audioSource=6
01-26 20:28:48.745: V/yamaha::media::UserDep(1757):                       playback: audio_onoff=1, line_onoff=0)
01-26 20:28:48.745: V/yamaha::media::UserDep(1757): Playback[Audio], Output[dev:DAC, NonAE]
01-26 20:28:48.745: V/yamaha::media::UserDep(1757): editDacDst(devices=2h) HPOUT Off
01-26 20:28:48.745: V/yamaha::media::UserDep(1757): editDacDst(devices=2h) RCOUT Off
01-26 20:28:48.745: V/yamaha::media::UserDep(1757): editDacDst(devices=2h) LINEOUT1 Off
01-26 20:28:48.745: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume()
01-26 20:28:48.745: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() FM Playback: Ready
01-26 20:28:48.745: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() VoiceCall: Ready
01-26 20:28:48.770: D/AndroidRuntime(16000): Shutting down VM
01-26 20:28:48.775: W/dalvikvm(16000): threadid=1: thread exiting with uncaught exception (group=0x40c251f8)
01-26 20:28:48.795: E/AndroidRuntime(16000): FATAL EXCEPTION: main
01-26 20:28:48.795: E/AndroidRuntime(16000): java.lang.IllegalStateException: Could not execute method of the activity
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.view.View$1.onClick(View.java:3098)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.view.View.performClick(View.java:3620)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.view.View$PerformClick.run(View.java:14292)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.os.Handler.handleCallback(Handler.java:605)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.os.Looper.loop(Looper.java:137)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.app.ActivityThread.main(ActivityThread.java:4507)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at java.lang.reflect.Method.invokeNative(Native Method)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at java.lang.reflect.Method.invoke(Method.java:511)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at dalvik.system.NativeStart.main(Native Method)
01-26 20:28:48.795: E/AndroidRuntime(16000): Caused by: java.lang.reflect.InvocationTargetException
01-26 20:28:48.795: E/AndroidRuntime(16000):    at java.lang.reflect.Method.invokeNative(Native Method)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at java.lang.reflect.Method.invoke(Method.java:511)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.view.View$1.onClick(View.java:3093)
01-26 20:28:48.795: E/AndroidRuntime(16000):    ... 11 more
01-26 20:28:48.795: E/AndroidRuntime(16000): Caused by: java.lang.IllegalStateException
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.media.MediaPlayer._reset(Native Method)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at android.media.MediaPlayer.reset(MediaPlayer.java:1339)
01-26 20:28:48.795: E/AndroidRuntime(16000):    at phil.H.com.HIITActivity.start1(HIITActivity.java:165)
01-26 20:28:48.795: E/AndroidRuntime(16000):    ... 14 more
01-26 20:28:48.835: I/ALSAModule(1757): Initialized ALSA PLAYBACK device hifi
01-26 20:28:48.860: E/android.os.Debug(1908): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error
01-26 20:28:48.870: I/dumpstate(16023): Check if stand-alone
01-26 20:28:48.875: D/dalvikvm(16000): GC_CONCURRENT freed 381K, 5% free 8972K/9415K, paused 4ms+2ms
01-26 20:28:48.885: I/dumpstate(16023): begin
01-26 20:28:49.000: I/AudioPolicyManager(1757): stopOutput() output 1, stream 1, session 17216
01-26 20:28:49.025: I/AudioFlinger(1757): stop output streamType (0, 1) for 1
01-26 20:28:49.360: W/ActivityManager(1908): Activity pause timeout for r
01-26 20:28:49.530: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::createVolume()
01-26 20:28:49.530: D/yamaha::media::VolumeCtrl(1757): Dir0      : AP Playback Music SP (0001h)
01-26 20:28:49.530: D/yamaha::media::VolumeCtrl(1757): Dir0Att   : AP Playback Music SP (0001h)
01-26 20:28:49.530: D/yamaha::media::VolumeCtrl(1757): DacMaster : AP Playback Music SP (0101h)
01-26 20:28:49.530: D/yamaha::media::VolumeCtrl(1757): Sp        : AP Playback Music SP (0001h)
01-26 20:28:49.530: E/yamaha::media::VolumeCtrl(1757): Dir0      : AP Playback Music SP (0001h)
01-26 20:28:49.530: E/yamaha::media::VolumeCtrl(1757): Dir0Att   : AP Playback Music SP (0001h)
01-26 20:28:49.530: E/yamaha::media::VolumeCtrl(1757): DacMaster : AP Playback Music SP (0101h)
01-26 20:28:49.530: E/yamaha::media::VolumeCtrl(1757): Sp        : AP Playback Music SP (0001h)
01-26 20:28:49.530: V/yamaha::media::UserDep(1757): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
01-26 20:28:49.530: V/yamaha::media::UserDep(1757):                       incall: onoff=0, devices=00000000h
01-26 20:28:49.530: V/yamaha::media::UserDep(1757):                       capture: onoff=0, devices=00100000h, audioSource=6
01-26 20:28:49.530: V/yamaha::media::UserDep(1757):                       playback: audio_onoff=1, line_onoff=0)
01-26 20:28:49.530: V/yamaha::media::UserDep(1757): Playback[Audio], Output[dev:DAC, NonAE]
01-26 20:28:49.530: V/yamaha::media::UserDep(1757): editDacDst(devices=2h) HPOUT Off
01-26 20:28:49.530: V/yamaha::media::UserDep(1757): editDacDst(devices=2h) RCOUT Off
01-26 20:28:49.530: V/yamaha::media::UserDep(1757): editDacDst(devices=2h) LINEOUT1 Off
01-26 20:28:49.530: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume()
01-26 20:28:49.530: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() FM Playback: Ready
01-26 20:28:49.530: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() VoiceCall: Ready
01-26 20:28:50.120: D/LightsService(1908): setLight_native: 2
01-26 20:28:50.120: E/lights(1908): write_int: path /sys/devices/virtual/sec/sec_touchkey/brightness, value 2
01-26 20:28:50.120: W/PowerManagerService(1908): Timer 0x7->0x3|0x0
01-26 20:28:50.120: I/PowerManagerService(1908): Ulight 7->3|0
01-26 20:28:50.120: D/PowerManagerService(1908): setLightBrightness : mButtonLight : 0
01-26 20:28:50.120: V/LightsService(1908): setLight #2 #ff000000
01-26 20:28:52.090: I/ALSAModule(1757): Terminated ALSA PLAYBACK device hifi
01-26 20:28:52.510: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::createVolume()
01-26 20:28:52.510: V/yamaha::media::UserDep(1757): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
01-26 20:28:52.510: V/yamaha::media::UserDep(1757):                       incall: onoff=0, devices=00000000h
01-26 20:28:52.510: V/yamaha::media::UserDep(1757):                       capture: onoff=0, devices=00100000h, audioSource=6
01-26 20:28:52.510: V/yamaha::media::UserDep(1757):                       playback: audio_onoff=0, line_onoff=0)
01-26 20:28:52.510: V/yamaha::media::UserDep(1757): ALL Off
01-26 20:28:52.510: V/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume()
01-26 20:28:52.510: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() FM Playback: Ready
01-26 20:28:52.510: D/yamaha::media::VolumeCtrl(1757): VolumeCtrl::setVolume() VoiceCall: Ready
01-26 20:28:52.570: D/PowerManagerService(1908): mIsLockZone =  false
01-26 20:28:55.685: D/VoldCmdListener(1746): asec list
01-26 20:28:55.690: D/VoldCmdListener(1746): CommandListener::AsecCmd::runCommand -> -- 
01-26 20:28:56.095: D/BatteryService(1908): update start
01-26 20:28:56.095: D/BatteryService(1908): level:73 scale:100 status:2 health:2 present:true voltage: 4011 temperature: 310 technology: Li-ion AC powered:false USB powered:true icon:17302822 invalid charger:0
: E/(): Device disconnected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:13:43.897

试试这个 ：

**编辑：**

```
//Play music
    public void playSound(int id){
            try{
                mp = MediaPlayer.create(mContext, id);
                mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                    @Override
                    public void onPrepared(MediaPlayer arg0) {
                        mp.start();  
                    }
                });
                mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener () {

                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        // TODO Auto-generated method stub
                        mp.release();
                    }});
            }
            catch (Exception e) {
                // TODO: handle exception
                Log.v("Sound Exception","Sound Exception = "+e.getMessage());
            }
    } 
```

并以这种方式调用，

```
playSound(R.raw.iwilltouchthesky); 
```

您不能以这种方式`"R.raw.iwilltouchthesky.mp3"`从`raw`文件夹中使用路径。

谢谢。

# android - 确定文件是否包含android中的字符串

> ID：14544296
> 
> 赞同：0
> 
> 时间：2013-01-27T04:05:14.617
> 
> 标签：android, string, file

正如标题所说，我正在寻找一个简短的函数，如果有特定的字符串，它会在文件中读取，并且//如果存在则做一些事情。例如，如果在 test.txt 文件中存在字符串 TestString。有人会那么好心地建议我一个方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:19:02.963

```
 InputStream is = //--open an input stream from file--
  BufferedReader rd = new BufferedReader(new InputStreamReader(is,"UTF-8"));
  String line;

  while ( (line = rd.readLine()) != null ){
      if(line.matches(".*TestString.*")){ //--regex of what to search--
          //--do something---
          break; //--if not want to search further--
      }
  } 
```

# mod-rewrite - Apache RewriteEngine 不适用于虚拟主机设置

> ID：14544297
> 
> 赞同：1
> 
> 时间：2013-01-27T04:05:15.980
> 
> 标签：mod-rewrite, apache

我在我的机器上启用了基本的虚拟主机设置，当我输入服务器名称时它工作正常。但是，当我包含“RewriteEngine On”时，它会杀死它。是的，我确实安装了重写模块，是的，我已经重新启动了 apache。我实际上还没有尝试任何重写规则，因为仅仅打开它的行为就足以让它停止工作。关于发生了什么的任何线索？似乎如果包含模块，这应该可以工作。我忘记了什么？这是我的虚拟主机文件中的内容

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot "C:/www/mysite/public/"
    ServerName mysite

    RewriteEngine on
    <Directory "C:/www/mysite/public/"
        Options Indexes FollowSymLinks
        AllowOverride all
        Order Deny,Allow
        Allow from all
    </Directory>
</VirtualHost> 
```

当我删除“RewriteEngine on”行时，一切正常。当我把它放回去时，它会破裂。如果我有一些奇怪的规则，我可以理解，但简单地打开它不应该破坏任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T04:35:05.643

也许您的设置中没有启用 mod_rewrite？您可以尝试将 RewriteEngine On 放在这样的测试中

```
<IfModule mod_rewrite.c>
    RewriteEngine On
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-05T20:08:39.840

我假设你是一个类似 Ubuntu 的系统。

转到 /etc/apache2/sites-available/your_site.conf

使用您喜欢的文本编辑器打开 your_site.conf。

添加/更新目录部分，如下所示

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory> 
```

保存并重新启动apache。

# regex - 带有“Mx发生”的emacs正则表达式中的“或”运算符

> ID：14544300
> 
> 赞同：3
> 
> 时间：2013-01-27T04:05:33.367
> 
> 标签：regex, emacs

我想大致了解一下我的 Python 程序，所以我跑了：

`M-x occur`

对于我提供的正则表达式

`(def)|(class)`

未能匹配任何东西。

我也看过[这篇](https://stackoverflow.com/questions/4443095/what-is-the-or-operator-in-emacs-regexps)文章，并尝试过

`(def)\\|(class)`

但这也不匹配任何东西......

我如何`M-x occur`匹配`class`或`def`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T04:10:32.020

您必须使用单个反斜杠（不带括号，或者您也应该转义括号）：

```
def\|class 
```

# objective-c - 嵌入在 UIBarButtonItems 中的 UISearchBar（仅在 iPad 文档中可用）？

> ID：14544309
> 
> 赞同：2
> 
> 时间：2013-01-27T04:08:15.173
> 
> 标签：objective-c, ios5, xcode4.5, uisearchbar

我正在尝试将 UISearchBar 插入到我的 TableView 的工具栏，但它无法构建我的应用程序（iOS5.1）并出现此错误

```
UISearchBar embedded in UIBarButtonItems (Only available in iPad documents) 
```

[http://img.muse-gaming.org/file/1359259573-uisearchbar.png](http://img.muse-gaming.org/file/1359259573-uisearchbar.png)

而且我真的想不通...

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:55:47.890

话虽如此，有可能使您自己的视图看起来和工作起来都像 a`UIToolbar`那样允许 a `UISearchBar`。

解决方案是使用导航栏而不是工具栏。将搜索栏设置为导航栏的标题视图。

![在此处输入图像描述](../Images/70513ae310c371d7e20a65d3a84f6403.png)

**或者 Yu 可以以编程方式添加它**

```
self.searchBar.frame = CGRectMake(70, 3, 230, 44);
    UIToolbar  * searchToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0,0+20,[self view].bounds.size.width,52)];
     UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *infoButtonItem=[[UIBarButtonItem alloc]initWithTitle:@"Update" style:UIBarButtonItemStyleBordered  target:self action:@selector(infoButtonClicked)];

    UIBarButtonItem  * searchBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:self.searchBar];

    [searchToolbar setItems:[NSArray arrayWithObjects:flexibleSpace,infoButtonItem,searchBarButtonItem, nil] animated:YES];

    [self.view addSubview:searchToolbar]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T15:54:17.660

Apple 在**Xcode 8.2**中修复了这个问题。我认为他们之前禁用了它，因为在 iOS 8.0 之前的 iOS 上不允许弹出窗口，并且工具栏中的搜索栏意味着大多数时候都会使用弹出窗口。

# php - 如何使用 Join 从另一个表中只获取一条记录

> ID：14544312
> 
> 赞同：0
> 
> 时间：2013-01-27T04:09:06.560
> 
> 标签：php, mysql, join, mysqli, left-join

我有一张酒店的桌子。我也有一张酒店图片的桌子。对于特定的酒店，酒店图片表中会有多个图像。

我只需要获得所有酒店的单一图像。使用左连接时，我正在获取特定酒店的所有图像。我只需要所有酒店的一张图像。

酒店餐桌

```
 CREATE TABLE IF NOT EXISTS `tbl_hotel` (
  `int_hotel_id` int(11) NOT NULL auto_increment,
  `str_country_id` varchar(5) NOT NULL,
  `str_hotel_name` varchar(20) default NULL,
  `int_property_type_id` int(11) default NULL,
  `int_hotel_theme_id` int(11) default NULL,
  `str_hotel_facility` varchar(50) default NULL,
  `str_star_category` varchar(10) default NULL,
  `str_web_url` varchar(30) default NULL,
  `str_hotel_mail_id` varchar(25) default NULL,
  `txt_hotel_description` text,
  `str_hotel_city_name` varchar(50) default NULL,
  `str_hotel_address` text NOT NULL,
  `str_hotel_address2` text NOT NULL,
  `int_hotel_zip_code` varchar(20) default NULL,
  `str_hotel_phone` varchar(20) default NULL,
  `str_hotel_fax_no` varchar(20) default NULL,
  `bit_allow_booking` tinyint(4) default NULL,
  `bit_active` tinyint(4) NOT NULL default '0',
  `str_account_type` varchar(200) NOT NULL,
  PRIMARY KEY  (`int_hotel_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=95 ; 
```

酒店形象

```
CREATE TABLE IF NOT EXISTS `tbl_hotel_image` (
  `int_image_id` int(11) NOT NULL auto_increment,
  `str_image_name` varchar(50) default NULL,
  `txt_image_description` text,
  `int_hotel_id` int(11) default NULL,
  `bit_main_image` tinyint(4) default NULL,
  `bit_active` tinyint(4) default NULL,
  PRIMARY KEY  (`int_image_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=119 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:10:44.713

连接绑定两个表，但 [GROUP BY] 的作用类似于记录压缩，获取具有相同值的记录，在这种情况下，它仅从**tbl_hotel_imgage.int_hotel_id获取一条记录，** [此处](http://www.w3schools.com/sql/sql_groupby.asp)和[此处](http://dev.mysql.com/doc/refman/5.1/en/group-by-optimization.html)您可以找到此语句的更多信息.

```
 Select * from 
         tbl_hotel inner join tbl_hotel_image on 
         tbl_hotel_image.int_hotel_id=tbl_hotel.int_hotel_id
    Group by
        tbl_hotel_image.int_hotel_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:45:54.427

```
select * from (
select * from tbl_hotel h 
  join (select 
               int_image_id, 
               str_image_name,       
               @curRank := @curRank + 1 AS rank 
        from tbl_hotel_image,(SELECT @curRank := 0) r
ORDER BY  image_id) img
    on h.int_hotel_id = img.int_hotel_id
) q 
where rank = 1 
```

# c# - 在 Win 表单上的 c# Web 浏览器控件中加载大 HTML 文件

> ID：14544313
> 
> 赞同：0
> 
> 时间：2013-01-27T04:09:15.630
> 
> 标签：c#, winforms, webbrowser-control

我正在使用 .net 4.0 使用 C# 开发一个 Windows 应用程序，其中我们必须在 Web 控件中显示大的 HTML 文件。该应用程序在大小高达 100 MB 的情况下工作正常，但有时我们需要加载高达 600 MB 的 HTML，在这种情况下，应用程序挂起并且没有响应，尽管运行此应用程序的计算机的配置很好，它是具有 4 GB RAM 的 C2D。

有人可以帮助我们了解如何处理在 win 表单中的 Web 浏览器控件中加载的如此大的 HTML 文件。

谢谢，HN米什拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:19:05.323

一个 600 MB 的 DOM 几乎可以杀死任何计算机。现代浏览器肯定不能毫无滞后地完成这项任务。

您可能会将 HTML Agility Pack 作为在浏览器中加载文档的替代方法。

# ubuntu-12.04 - Openfire：安装完成：无法访问管理员

> ID：14544323
> 
> 赞同：0
> 
> 时间：2013-01-27T04:11:43.617
> 
> 标签：ubuntu-12.04, openfire

我在 Ubuntu 12.04 上。

Java 安装正确，因为我可以运行`java -version`

`java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21) Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)`

使用以下命令安装 OpenFire：

1.  wget [http://download.igniterealtime.org/openfire/openfire_3.7.1_all.deb](http://download.igniterealtime.org/openfire/openfire_3.7.1_all.deb)
2.  dpkg -i openfire_3.7.1_all.deb

输出是：

```
Selecting previously unselected package openfire.
(Reading database ... 67858 files and directories currently installed.)
Unpacking openfire (from openfire_3.7.1_all.deb) ...
Setting up openfire (3.7.1) ...
adduser: Warning: The home directory `/var/lib/openfire' does not belong to the user you are currently creating.
Processing triggers for ureadahead ... 
```

有两个问题：
1.）“/opt”中没有“openfire”文件夹
2.）当我在外部端口上点击 9090 端口时，它没有通过。
3.)`ps -ef | grep openfire`不会产生任何东西。也尝试了 grepping "java" & "jive"。

我试图了解 OpenFire 是否真的安装正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:17:03.913

> 警告：主目录 `/var/lib/openfire' 不属于您当前创建的用户。

这似乎是一个非常重要的线索。我认为用户应该是`openfire`？然后像这样更改所有权：

```
chown -R openfire:openfire /var/lib/openfire 
```

此外，[请查看这些设置说明](http://library.linode.com/communications/xmpp/openfire/ubuntu-10.04-lucid#sph_configure-openfire)。特别是防火墙设置。大量的港口似乎需要关注。

并检查[安装脚本的来源以](http://svn.igniterealtime.org/svn/repos/openfire/trunk/build/debian/openfire.postinst)获取有关目录权限的更多线索。

# c++ - C++11 Geany 设置

> ID：14544325
> 
> 赞同：8
> 
> 时间：2013-01-27T04:11:49.383
> 
> 标签：c++, gcc, c++11, geany

我正在学习 C++，我需要在 Geany 中为 C++11 正确设置我的编译和构建命令。

我以为我有正确的，但使用时`auto`，我收到以下错误：

```
warning: ‘auto’ will change meaning in C++0x; please remove it [-Wc++0x-compat] 
```

这是我当前的设置构建命令：

```
Compile:  g++ -Wall -c "%f"
Build:  g++ -Wall -o "%e" "%f"
Execute:  "./%e" 
```

为了正确编译、构建和执行 C++11 程序，我需要将这些设置为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T04:58:02.217

正如评论中指出的那样，您需要添加 flag `-std=c++0x`。您可以在“构建”->“设置构建命令”中进行设置，然后在以下框中修改命令：

编译：

```
g++ -Wall -std=c++0x -c "%f" 
```

建造：

```
g++ -Wall -std=c++0x -o "%e" "%f" 
```

# android - 使图像出现半屏

> ID：14544327
> 
> 赞同：18
> 
> 时间：2013-01-27T04:12:23.633
> 
> 标签：android, android-imageview

我无法让我的图像视图出现在屏幕的一半有人可以帮忙。这是我的 xml 文件。它应该占据屏幕大小的一半，并且带有 textview 的线性布局应该位于 imageview 的页脚。

```
xmlns:tools="http://schemas.android.com/tools"

android:layout_width="fill_parent"

android:layout_height="fill_parent"

android:background="@drawable/fond" >

<RelativeLayout

    android:layout_width="fill_parent"

    android:layout_height="fill_parent"

    android:layout_alignParentLeft="true"

    android:layout_below="@+id/relativeLayout1" >

    <RelativeLayout

        android:layout_width="fill_parent"

        android:layout_height="fill_parent"

        android:layout_alignParentLeft="true" >

        <WebView

            android:id="@+id/webcontent"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:layout_alignParentLeft="true"

            android:layout_alignParentTop="true"

            android:layout_marginTop="151dp" />

    </RelativeLayout>

    <ImageView

        android:id="@+id/image_actualitedetails"

        android:layout_width="fill_parent"

        android:layout_height="fill_parent"

        android:layout_alignParentTop="true"

        android:layout_centerHorizontal="true"

        android:src="@drawable/six_yamaha" />

    <LinearLayout

        android:id="@+id/linearvideo"

        android:layout_width="fill_parent"

        android:layout_height="65dp"

        android:layout_alignBottom="@+id/image_actualitedetails"

        android:layout_alignParentLeft="true"

        android:background="#88FFFFFF"

        android:gravity="center"

        android:paddingLeft="@dimen/fourdp"

        android:paddingRight="@dimen/fourdp" >

        <TextView

            android:id="@+id/text_actualites"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:text="TextView"

            android:textColor="@color/tabDark"

            android:textStyle="bold" />

    </LinearLayout>

</RelativeLayout>

<RelativeLayout

    android:id="@+id/relativeLayout1"

    android:layout_width="fill_parent"

    android:layout_height="75dp"

    android:layout_alignParentLeft="true"

    android:layout_alignParentTop="true"

    android:background="@drawable/header" >

    <Button

        android:id="@+id/boutton_retour"

        android:layout_width="wrap_content"

        android:layout_height="wrap_content"

        android:layout_alignParentLeft="true"

        android:layout_centerVertical="true"

        android:layout_marginLeft="14dp"

        android:background="@drawable/back" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-27T04:24:47.487

使用 LinearyLayout 包装你的 ImageView 和另一个不可见的 View，并将 layout_weight 都设置为 0.5，那么 ImageView 应该是一半大小。

这是一个示例，展示如何将图像设置为屏幕大小的一半

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5"
        android:background="#ff0000"
        >
        <ImageView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/your_image"
            android:adjustViewBounds="true"
            />
    </RelativeLayout>
    <View
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5"
        android:background="#00ff00"
        />
</LinearLayout> 
```

这就是结果

![enter image description here](../Images/aa4bbd434a68e730698e76aee5b7eeea.png)

If you want to put your image in center of the screen, you can use the same idea and set proper weight to achieve your goal. Good luck!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T04:18:34.473

首先，您需要在运行时获取显示尺寸

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
windowWidth = size.x;
windowHeight = size.y; 
```

然后您可以继续将您的 imageView 高度和宽度参数设置为这些值的一半

```
int orgWidth = yourImageView.getDrawable().getIntrinsicWidth();
int orgHeight = yourImageView.getDrawable().getIntrinsicHeight();

//Use RelativeLayout.LayoutParams if your parent is a RelativeLayout
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
windowHeight / 2, windowWidth / 2);
yourImageView.setLayoutParams(params);
yourImageView.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-11T03:25:51.100

Just if someone wants landscape version its almost the same :)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:baselineAligned="true"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:background="#ff0000" >

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/adele" />
    </RelativeLayout>
    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:background="#00ff00" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T04:23:29.503

您必须将您的 imageview 放在具有水平对齐的 LinearLayout 中，这样您就可以使用

```
android:weight = 0.5// this attribute for the image view will force the image to fill half  of the screen, counting of course with the linear layout as the top parent layout(filling the hole window) 
```

# android - 如何使用 Facebook Android SDK 在页面墙上发布图片？

> ID：14544335
> 
> 赞同：0
> 
> 时间：2013-01-27T04:13:11.003
> 
> 标签：android, facebook, post, sdk, image

我已经尝试了数千种方法，但都没有奏效。每次帖子都不会出现。我之前设法发布过文字，但图像永远无法正常工作......

```
 try {
            String response = facebook.request("me");
            Bundle parameters = new Bundle();

            String DIRECTORY_PATH = Environment.getExternalStorageDirectory().getAbsolutePath() + "/img/img.jpg";
            Bitmap bitmap = BitmapFactory.decodeFile(DIRECTORY_PATH);
            byte[] data = null;
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            data = baos.toByteArray();
            parameters.putString("message", "picture caption");
            parameters.putByteArray("source", data); //I try "picture" too

            String pageid = "152390368241461";
            response = facebook.request(pageid + "/photos", parameters, 
                    "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("") || 
                    response.equals("false")) {
               Log.v("Error", "Blank response");
           }
            showToast(getResources().getString(R.string.sucessharefc));
     } catch(Exception e) {
         e.printStackTrace();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:03:27.210

根据[Graph API Page 文档](https://developers.facebook.com/docs/reference/api/page/#photos)，您需要`multipart/form-data`使用具有权限 的令牌`publish_stream`进行POST。`manage_pages`

[Facebook Android SDK request()](https://developers.facebook.com/docs/reference/androidsdk/request/)文档说明了`request()`您使用的形式：

> 请注意，此辅助函数尚不支持二进制数据参数（例如图片）。

因此，您必须为此使用 HTTP 客户端库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T18:02:47.280

您正在使用 Facebook SDK 中已弃用的 API。[在此处](https://developers.facebook.com/android/)下载最新版本，并查看入门指南和各种教程。

要上传照片，您应该使用[Request](https://developers.facebook.com/docs/reference/android/3.0/Request)类，特别是[Request.newUploadPhotoRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newUploadPhotoRequest%28Session,%20Bitmap,%20Callback%29)方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-05T20:14:59.857

```
Bitmap imaBitmap= BitmapFactory.decodeResource(this.getResources(),R.drawable.androidface);
byte[] data = null;
ByteArrayOutputStream baos = new ByteArrayOutputStream();
imaBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
data = baos.toByteArray();
Bundle params = new Bundle();
params.putString("message"," Facebook App Testing");
params.putByteArray("picture", data);
mAsyncRunner.request("1741449412743375/photos", params, "POST", new SampleUploadListener(), null); 
```

# c# - 如何返回列表的内容

> ID：14544336
> 
> 赞同：0
> 
> 时间：2013-01-27T04:13:14.163
> 
> 标签：c#

```
 public List<char> Columns(String input)
    {
        char[] temp = input.ToCharArray();
        List<char> columns = new List<char>(input.Length);
        for (int i = 0; i < input.Length; i++)
        {
            if (other.Contains(temp[i]))
            {
                columns.Add((char)(i+1));
            }
        }
        return columns;
    } 
```

我的目标是让这个方法返回一个列表。但是，当我用另一种方法输出内容时，我得到了 'System.Collections.Generic.List[char]

```
Console.WriteLine(ex.Columns(line)); 
```

那是我输出它的尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T04:43:16.343

首先，让我们回答为什么会得到`System.Collections.Generic.List[char]`.

您用来向控制台输出内容的方法是[Console.WriteLine](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)。如果您转到链接页面，您将看到该方法的许多重载，它们都采用不同类型的参数。让我们想想当你传递一个 type 的参数时使用的是哪一个`List<char>`。

如果您仔细查看该列表，您会发现没有需要`List<anything>`. `System.Object`如您所知，在 .NET 中，每种类型**都** 派生自`System.Object`. 当 C# 编译器试图选择一个方法重载时，它无法解析出确切的类型，它会返回寻找**是一种**关系。在我们的例子中，唯一匹配的重载[是需要`System.Object`](http://msdn.microsoft.com/en-us/library/swx4tc5e.aspx).

那么这个超载有什么作用呢？如果您阅读说明，您将很容易理解。

> 如果 value 为 null，则仅写入行终止符。否则，将调用 value 的 ToString 方法以生成其字符串表示形式，并将生成的字符串写入标准输出流。

好的，所以当你传递你的字符列表时，它会调用一个 ToString() 方法。让我们看[一下`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx). 当您单击“ToString”链接时，您将看到您最终进入[`System.Object.ToString()`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)页面。这意味着 List 类型**不会覆盖**基本方法。那么`Object.ToString()`做什么呢？

> ToString 方法的默认实现返回Object 类型**的完全限定名称**，如以下示例所示。

谜团已揭开！

当您编写时`Console.WriteLine(ex.Columns(line));`，编译器会调用调用传递参数的`Console.WriteLine(Object)`重载，它会打印类型的完全限定名称。`Object.ToString()`

有了这些知识，您就可以弄清楚要如何打印字符本身。例如，您可以通过[`Console.WriteLine(Char[])`](http://msdn.microsoft.com/en-us/library/kxcchfk6.aspx)编写传递一个字符数组来调用重载`Console.WriteLine(ex.Columns(line).ToArray());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:17:53.777

不确定您要在这里完成什么。始终可以对字符串进行索引以获取特定字符。

那么为什么要引入一个`List`以及为什么有一个时髦的方法。做就是了：

```
s[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:19:18.833

没有一个数组不会帮助你。要输出集合的内容，您需要遍历集合中的每个元素。

使用`list.ToString()`调用`ToString()`on`List<T>`调用标准对象 ToString 实现，即打印出类型的名称，这就是您所看到的。

您必须对其进行迭代并访问每个元素：

```
foreach(var item in list) {
    string s = item.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T04:20:56.967

试试这个：

```
Console.WriteLine(new string(ex.Columns(line).ToArray())); 
```

# spring - 使用 jdbcTemplate 在 zOS 上调用 DB2 函数时控制台中出现警告消息

> ID：14544339
> 
> 赞同：0
> 
> 时间：2013-01-27T04:13:24.890
> 
> 标签：spring, db2, jboss7.x, jdbctemplate, db2-connect

我的 java 应用程序部署在 jboss AS 7 中，使用 spring 数据查询 MS SQL 服务器数据库。我还需要在使用 Spring JdbcTemplate 的 zOS 上调用 DB2 函数。SQL 是：

```
public String getUniqueId()
{
    String sql = "SELECT " + schemaName + ".SGB_LON_ID_NEXT() FROM SYSIBM.SYSDUMMY1" ;
    return (jdbcTemplate.queryForLong(sql));
} 
```

Eclipse 中的单元测试工作正常。当我在 jboss 服务器中部署时，第一个调用有效。但是，从第二个事务开始，调用本身有效，但每次调用的 server.log 中都会出现一些警告。

我想知道这是否可能是 JDBC 调用不是 JPA 事务的一部分。（注意 jdbc 调用很简单——DB2 函数只返回字段的下一个序列号）

以下是来自错误堆栈的警告消息：

```
 21:50:33,955 WARN  [org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory] (http-/127.0.0.1:8080-14) 
        Destroying connection that is not valid, due to the following exception: com.ibm.db2.jcc.t4.b@1167bd5: com.ibm.db2.jcc.am.SqlSyntaxErrorException: 
        DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=<END-OF-STATEMENT>;MICROSECONDS MICROSECOND SECONDS SECOND MINUTES MIN, DRIVER=3.63.123

        21:50:34,096 WARN  [org.jboss.jca.core.connectionmanager.listener.TxConnectionListener] (http-/127.0.0.1:8080-14) 
        IJ000305: Connection error occured:org.jboss.jca.core.connectionmanager.listener.TxConnectionListener@f79f0f[state=NORMAL managed connection=org.jboss.jca.adapters.jdbc.local.LocalManagedConnection@136e43e connection handles=0 lastUse=1359255001136 trackByTx=false 
        pool=org.jboss.jca.core.connectionmanager.pool.strategy.PoolByCri@c2c2de pool internal context=SemaphoreArrayListManagedConnectionPool@8793c7[pool=DB2_zOS_DS] 
        xaResource=LocalXAResourceImpl@f70194[connectionListener=f79f0f connectionManager=112dadb warned=false currentXid=null] txSync=null]: 
        com.ibm.db2.jcc.am.SqlSyntaxErrorException: 
        DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=<END-OF-STATEMENT>;MICROSECONDS MICROSECOND SECONDS SECOND MINUTES MIN, DRIVER=3.63.123

        21:50:34,196 WARN  [org.jboss.jca.core.connectionmanager.pool.strategy.PoolByCri] (http-/127.0.0.1:8080-14) 
        IJ000612: Destroying connection that could not be successfully matched: org.jboss.jca.core.connectionmanager.listener.TxConnectionListener@f79f0f[state=DESTROYED managed connection=
        org.jboss.jca.adapters.jdbc.local.LocalManagedConnection@136e43e connection handles=0 lastUse=1359255001136 trackByTx=false 
        pool=org.jboss.jca.core.connectionmanager.pool.strategy.PoolByCri@c2c2de pool internal context=SemaphoreArrayListManagedConnectionPool@8793c7[pool=DB2_zOS_DS] 
        xaResource=LocalXAResourceImpl@f70194[connectionListener=f79f0f connectionManager=112dadb warned=false currentXid=null] txSync=null] 
```

有关如何修复的任何建议？我不清楚如何将 JDBC 调用添加到当前事务 (JPA)。或者它应该是一个单独的交易。如前所述，jdbc 调用是一个 db2 函数，它返回序列号的下一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:11:43.180

问题出在我在 JBOSS_HOME/standalone/configuration/standalone.xml 中的数据源设置中。

在验证部分，我有这个不正确的。

```
<validation>
    <check-valid-connection-sql>select 1</check-valid-connection-sql>
<validation> 
```

以上不正确，DB2 给出了验证错误。

我将其更改为以下内容：

```
 <validation>
          <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"/>
          <stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2StaleConnectionChecker"/>
          <exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"/>
      </validation> 
```

这是完整的数据源设置，以防其他人发现它有用。

```
 <datasource jndi-name="java:jboss/datasources/DB2_zOS_DS" pool-name="DB2_zOS_DS" enabled="true" use-java-context="true">
      <connection-url>jdbc:db2://MyHostName:MyPortNo/MyDBQA1:currentSchema=MySchemaQA1;</connection-url>
      <driver>db2zOS</driver>
      <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
      <pool>
          <min-pool-size>9</min-pool-size>
          <max-pool-size>50</max-pool-size>
          <prefill>true</prefill>
          <allow-multiple-users/>
      </pool>
      <security>
          <user-name>MY-APP-ID</user-name>
          <password>My-APP-ID-PASSWORD</password>
      </security>
      <validation>
          <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"/>
          <stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2StaleConnectionChecker"/>
          <exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"/>
      </validation>
      <timeout>
          <set-tx-query-timeout>true</set-tx-query-timeout>
          <blocking-timeout-millis>500</blocking-timeout-millis>
          <idle-timeout-minutes>15</idle-timeout-minutes>
      </timeout>
      <statement>
          <track-statements>false</track-statements>
          <prepared-statement-cache-size>32</prepared-statement-cache-size>
          <share-prepared-statements>true</share-prepared-statements>
      </statement>
    </datasource>
    <drivers>
      <driver name="db2zOS" module="com.ibm.db2">
          <driver-class>com.ibm.db2.jcc.DB2Driver</driver-class>
      </driver>
    </drivers> 
```

# ios - MGSplitViewController：iOS6 中的详细视图布局问题

> ID：14544340
> 
> 赞同：2
> 
> 时间：2013-01-27T04:13:31.947
> 
> 标签：ios, ipad, rotation, uisplitviewcontroller

我正在使用 MGSplitViewController（替换 UISplitViewController）。我在：[https](https://github.com/mattgemmell/MGSplitViewController/issues/81) ://github.com/mattgemmell/MGSplitViewController/issues/81 中发布了同样的问题。

但是，我仍然想在这里再次发帖，希望其他人可以帮助我解决这个问题

问题描述：详细查看，iOS5下可以。在 iOS6 中，似乎不处理旋转（见附件黄色部分：它是细节视图的背景颜色）

![在此处输入图像描述](../Images/a0036ce1dc2510ce8f8eeec7eed72af8.png)

![在此处输入图像描述](../Images/9f7de23716236728733b42f6fc5b722e.png) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T14:01:31.867

补丁[https://github.com/mattgemmell/MGSplitViewController/pull/73/files#r1829508](https://github.com/mattgemmell/MGSplitViewController/pull/73/files#r1829508)似乎解决了这个问题。

# ruby - 根据哈希元素匹配返回哈希数组

> ID：14544343
> 
> 赞同：0
> 
> 时间：2013-01-27T04:13:53.103
> 
> 标签：ruby, hash

我想知道如何搜索散列数组并根据搜索字符串返回一个值。例如，`@contacts`包含哈希元素：`:full_name`、`:city`和`:email`。变量`@contacts`（我猜它是一个数组）包含三个条目（可能是行）。以下是我迄今为止根据`:city`价值进行搜索的代码。但是它不起作用。谁能给我一个想法是怎么回事？

```
def search string
  @contacts.map {|hash| hash[:city] == string}
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:18:48.677

您应该使用`select`而不是`map`：

```
def search string
  @contacts.select { |hash| hash[:city] == string }
end 
```

在您的代码中，您尝试`map`使用一个块来（或转换）您的数组，这会产生布尔值。`map`接受一个块并为 的每个元素调用该块`self`，构造一个包含该块返回的元素的新数组。结果，你得到了一个布尔数组。

`select`工作类似。它需要一个块并迭代数组，但不是转换源数组，而是返回一个包含块返回的元素的数组`true`。所以这是一种选择（或过滤）方法。

为了理解这两种方法之间的区别，查看它们的示例定义很有用：

```
class Array
  def my_map
    [].tap do |result|
      self.each do |item|
        result << (yield item)
      end
    end
  end

  def my_select
    [].tap do |result|
      self.each do |item|
        result << item if yield item
      end
    end
  end
end 
```

示例用法：

```
irb(main):007:0> [1,2,3].my_map { |x| x + 1 }
[2, 3, 4]
irb(main):008:0> [1,2,3].my_select { |x| x % 2 == 1 }
[1, 3]
irb(main):009:0> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:17:41.073

你可以试试这个：

```
 def search string
    @contacts.select{|hash| h[:city].eql?(string) }
 end 
```

这将返回与字符串匹配的哈希数组。

# javascript - 输入验证后使文本条目淡出，然后使用原始占位符文本淡入

> ID：14544344
> 
> 赞同：0
> 
> 时间：2013-01-27T04:13:53.717
> 
> 标签：javascript, jquery, html, fadein, fadeout

我正在设置一个带有单个电子邮件输入表单的启动页面。

现在，当用户输入电子邮件时，表单会迅速淡出，而感谢消息会淡出以替换它。我想做的是让“谢谢”在几秒钟后淡出，然后让表格淡入。

我可以让它发生，只是表单与最初输入的电子邮件一起返回，我花了很多时间试图找出一种用原始占位符文本替换电子邮件地址的方法。

这是来自：

```
<form action="" method="post" id="sendEmail">
    <div class="forms">
        <div class="buttons" id="buttons">
            <button type="submit" id="submit"></button>
            <input type="hidden" name="submitted" id="submitted" value="true"
            />
        </div>
        <div class="text_box" id="text_box">
            <input type="text" name="emailTo" id="emailTo" value="   Your Email Here"
            onfocus="this.value=''" />
        </div>
    </div>
</form>
<div class="answerBox">
    <div style="display:none;" id="thanks">Thank you!</div>
</div> 
```

这是我用来处理淡入、成功验证后淡出的 Jquery：

```
if (hasError == false) {
    $.post("adduser1.php", {
        emailTo: emailToVal
    }, function (data) {
        $(".buttons").fadeOut(200);
        $(".text_box").fadeOut(200, function () {
            $("#thanks").fadeIn(200)
        });
    });
}
return false; 
```

我试过这个：

```
$.post("adduser1.php", {
    emailTo: emailToVal
}, function (data) {
    $(".buttons").fadeOut(200);
    $(".text_box").fadeOut(200, function () {
        $("#emailTo").text("   Your Email Here", function () {
            $("#thanks").fadeIn(200))
        }); 
```

但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:01:38.740

**首先**，`#emailTo`不受它的影响，`.text`因为它是一个`<input>`元素。替换`.text`为`.val`：

```
$("#emailTo").val("   Your Email Here") 
```

**其次**，您试图绑定`#thanks.fadeIn`到 .text（或 .val）更改的末尾。因为它是一个即时动作，所以这是不必要的（我认为也不是正确的 jQuery 语法）。只需放在`$("#thanks").fadeIn(200)`下一行：

```
function (data) {
  $(".buttons").fadeOut(200);
  $(".text_box").fadeOut(200, function () {
    $("#emailTo").val("   Your Email Here")
    $("#thanks").fadeIn(200))
  });
} 
```

**工作示例：[jsFiddle](http://jsfiddle.net/A2A8b/)**

# c++ - 初始化 GUID 变量：如何？

> ID：14544348
> 
> 赞同：8
> 
> 时间：2013-01-27T04:14:15.083
> 
> 标签：c++, winapi

我正在尝试初始化一个[GUID](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373931%28v=vs.85%29.aspx)变量，但我不确定这就是你要这样做的方式。我特别困惑的是如何将最后 12 个十六进制数字存储在 char 数组中（我是否包含“-”字符？）

**如何定义/初始化 GUID 变量？**

```
bool TVManager::isMonitorDevice(GUID id)
{
    // Class GUID for a Monitor is: {4d36e96e-e325-11ce-bfc1-08002be10318}

    GUID monitorClassGuid;
    char* a                = "bfc1-08002be10318"; // do I store the "-" character?
    monitorClassGuid.Data1 = 0x4d36e96e;
    monitorClassGuid.Data2 = 0xe325;
    monitorClassGuid.Data3 = 0x11ce;
    monitorClassGuid.Data4 = a;

    return (bool(id == monitorClassGuid));
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T04:17:47.400

该`Data4`成员不是指针，它是一个数组。你会想要：

```
monitorClassGuid.Data4 = { 0xbf, 0xc1, 0x08, 0x00, 0x2b, 0xe1, 0x03, 0x18 }; 
```

使您的示例正常工作。您可能会发现与`monitorClassGuid`变量的定义一起进行所有初始化会更容易：

```
GUID monitorClassGuid = { 0x4d36e96e, 0xe325, 0x11c3, { 0xbf, 0xc1, 0x08, 0x00, 0x2b, 0xe1, 0x03, 0x18 } }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-14T11:54:15.413

这个问题很久以前就被问过了，但也许它对其他人有帮助。

您可以使用此代码来初始化 GUID：

```
#include <combaseapi.h>;

GUID guid;
CLSIDFromString(L"{4d36e96e-e325-11ce-bfc1-08002be10318}", &guid); 
```

# javascript - 'textContent' 为 null 或不是对象

> ID：14544351
> 
> 赞同：0
> 
> 时间：2013-01-27T04:14:16.747
> 
> 标签：javascript, ie-developer-tools

我对这段代码有疑问，这段代码在除 IE 之外的所有浏览器上运行良好，我的 IE 是 8.0 有什么解决方案吗？我不会真诚地使用 jquery 注意：我将 Node.TEXT_NODE 更改为 3，但发生了其他错误：'textContent' 为空或不是对象

```
 <!DOCTYPE html>
 <html>
 <head>
 <script>

 function replaceText(oldText, newText, node){ 
   node = node || document.body; 

   var childs = node.childNodes, i = 0;

   while(node = childs[i]){ 
     if (node.nodeType == Node.TEXT_NODE){ 
  node.textContent = node.textContent.replace(oldText, newText); 
} else { 
  replaceText(oldText, newText, node); 
} 
     i++; 
   } 
 }

 </script>
 </head>
 <body>
 old
 <h1 id="myHeader" onclick="replaceText('old','new')">old Click me! whatever</h1>

 </body>
 </html> 
```

我找到了

```
 while(i < childs.length){
   if (rgx.test(document.body.innerHTML)){
   childs[i][textPropName] =childs[i][textPropName].replace(rgx,'new');
   }
   else
   {
   replaceText(oldText, newText,document.body.childNodes[i])
   }
        i++; 
      } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:15:09.017

`Node.TEXT_NODE`&`textContent`在 IE8 中不可用。

* * *

使用`3`代替`Node.TEXT_NODE`，`innerText`如果`textContent`不可用则使用：

```
var textPropName = node.textContent === undefined ? 'innerText' : 'textContent';

if (node.nodeType == 3) {
    node[textPropName] = node[textPropName].replace(oldText, newText); 
} else { 
    replaceText(oldText, newText, node); 
} 
```

您可能应该将其缓存`textPropName`在您的函数之外，这样您就不会在每次调用该函数时都重新检查它（`document.body`用于测试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T17:00:06.200

代替 textContent，使用 nodeValue

```
node.nodeValue = node.nodeValue.replace(oldText, newText); 
```

# html - 在 HTML 中混合文本颜色

> ID：14544355
> 
> 赞同：3
> 
> 时间：2013-01-27T04:14:47.883
> 
> 标签：html

使用 HTML，有没有办法根据每个文本选择所在的标签来混合文本颜色？此伪代码描述了我尝试创建的文本颜色混合类型：

```
<red>
    This text should be red.
    <blue>
        This text should be purple, since it is inside red and blue tags.
    </blue>
    This text should be red.
    <white>
        This text should be pink, since it is inside white and red tags.
    </white>
</red> 
```

是否可以将此伪代码转换为有效的 HTML，以便以这种方式组合文本颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T04:26:45.027

动态地，不是[没有脚本](https://stackoverflow.com/questions/726549/algorithm-for-additive-color-mixing-for-rgb-values)。但是，您可以定义一些 CSS 规则。

```
.red {
    color: red;
}
    .red .white,
    .white .red {
        color: pink;
    }
    .red .blue,
    .blue .red {
        color: purple;
    }
.blue {
    color: blue;
}
    .blue .white 
    .white .blue {
        color: light-blue;
    } 
```

等等

这可以根据您的需要简单或复杂。

**编辑：**这是用于演示目的的 jsfiddle：http: [//jsfiddle.net/LhSk2/](http://jsfiddle.net/LhSk2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:16:42.573

如果你不必支持 IE8 及以下，你可以使用半透明的 RGBA 颜色：

```
<div style="background: red">
    This text should be red.
    <div style="background: rgba(128, 0, 128, .5)">
        This text should be purple, since it is inside red and blue tags.
    </div>
    This text should be red.
    <div style="background: rgba(255, 255, 255, .5)">
        This text should be pink, since it is inside white and red tags.
    </div>
</div> 
```

这是小提琴：http: [//jsfiddle.net/zT8JD/](http://jsfiddle.net/zT8JD/)

# windows - java 在我的 64 位机器的任务管理器中显示为 32 位

> ID：14544356
> 
> 赞同：0
> 
> 时间：2013-01-27T04:14:59.380
> 
> 标签：windows, 32bit-64bit, java, taskmanager

我在运行 64 位操作系统的 Windows 7 上安装了 jdk 64 位。我还将路径环境变量设置为 C:\Program Files\Java\jre7\bin

此外，当我在 cmd 中检查 java 的版本时，会显示以下内容：

```
java version "1.7.0_11"
Java Hotspot(TM) 64-bit serve VM 
```

现在的问题是当我签入任务管理器时，它显示进程名称为“java.exe *32”

我安装的一些应用程序抱怨我在 64 位机器上使用 32 位 jdk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:20:49.920

最可能的解释是您实际上安装了 32 位和 64 位版本的 Java，并且由于它们/您的系统的配置方式，某些应用程序正在使用 32 位版本。

您可能没有明确安装 32 位 Java。某些应用程序可能包含嵌入式 32 位 JRE 安装。

* * *

如果您的应用程序坚持不能在 32 位 JRE 上运行，您的选择包括：

*   查找并卸载任何显式安装（独立）的 32 位 JRE，
*   获取 32 位版本的应用程序，或
*   阅读应用程序的安装/配置文档以获取有关如何强制其使用特定安装的线索。

# javascript - 在 Document.write() 之后无法调用函数

> ID：14544363
> 
> 赞同：0
> 
> 时间：2013-01-27T04:16:41.807
> 
> 标签：javascript, html, css, document.write

当我单击按钮时，我在获取要调用的函数时遇到问题。我正在使用的代码如下所示，并且已在其他页面上运行，这就是我感到困惑的原因。可能是因为此代码是使用 Document.write(NewPage) 覆盖旧页面的新页面的一部分，其中新页面本质上是从 ajax 帖子返回的 php 文档？

```
<div class="abSpec" id="intro" style="display: block; text-align: center;"> 
    <p>Some text</p>
    <input type="button" name="proceed" id="proceed" value="Proceed"/>
</div>
<script>
$(function(){
    $("#proceed").click(function(){
        document.getElementById('intro').style.display="none";
    }
}
</script> 
```

我不喜欢问调试问题，但我已经尝试了我能想到的一切。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:46:54.037

`document.write`只能在初始页面加载期间使用。请参阅[在未执行 document.write() 之后的 JavaScript 代码中，为什么？](https://stackoverflow.com/questions/13820535/in-javascript-code-after-document-write-is-not-executed-why)

# javascript - 数学随机重复

> ID：14544370
> 
> 赞同：0
> 
> 时间：2013-01-27T04:17:28.643
> 
> 标签：javascript, html, int, innerhtml

我正在创建一个基本的修改后的 Crapps 游戏。我正在使用 java 脚本和 HTML。所以它看起来不太好，但它的目的是教我 Java Script。

我还处于起步阶段，遇到了障碍。应该发生的是当我单击一个按钮时，此功能会发生。我的功能发生了，但它继续滚动 2 个 6，因此骰子显示为 6。

一切正常，除了**6 不断重复出现**。

我检查了代码，但找不到常见的错误——确保它应该生成的数字被覆盖，我的基础被覆盖 6 个数字（1-5）都有工作，我的名字是正确的，等等。我知道我的功能是之所以被调用，是因为每次我想要它去的地方，骰子的图像都会显示为 6。

```
 function rolldice()
   {
     dice1=Math.floor(Math.random()*6+0);
        if(dice1=0)
            {
             document.getElementById("dice1").innerHTML="<img src='1.jpg' width='100' height='100' />";
            }
        if(dice1=1)
            {
              document.getElementById("dice1").innerHTML="<img src='2.jpg' width='100' height='100' />";

            }
        if(dice1=2)
            {
              document.getElementById("dice1").innerHTML="<img src='3.jpg' width='100' height='100' />";

            }
        if(dice1=3)
            {
              document.getElementById("dice1").innerHTML="<img src='4.jpg' width='100' height='100' />";

            }
        if(dice1=4)
            {
              document.getElementById("dice1").innerHTML="<img src='5.jpg' width='100' height='100' />";

            }
        if(dice1=5)
            {
             document.getElementById("dice1").innerHTML="<img src='6.jpg' width='100' height='100' />";

            }
dice2=Math.floor(Math.random()*6+0);
    if(dice2=0)
            {
             document.getElementById("dice2").innerHTML="<img src='1.jpg' width='100' height='100' />";
            }
        if(dice2=1)
            {
              document.getElementById("dice2").innerHTML="<img src='2.jpg' width='100' height='100' />";

            }
        if(dice2=2)
            {
              document.getElementById("dice2").innerHTML="<img src='3.jpg' width='100' height='100' />";

            }
        if(dice2=3)
            {
              document.getElementById("dice2").innerHTML="<img src='4.jpg' width='100' height='100' />";

            }
        if(dice2=4)
            {
              document.getElementById("dice2").innerHTML="<img src='5.jpg' width='100' height='100' />";

            }
        if(dice2=5)
            {
             document.getElementById("dice2").innerHTML="<img src='6.jpg' width='100' height='100' />";

            }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T04:19:53.070

您正在使用`=`而不是`==`. 这意味着它将运行 1-5 中的每个语句。

```
if (dice1 = 5){ 
```

是相同的

```
dice1 = 5;
if (dice1){ 
```

这将永远是真的。

`var`在分配随机值时，您还应该在每个变量之前都有，仅供参考。

我会考虑将所有这些代码缩短为如下所示：

```
function rolldice(){
  for (var i = 0; i < 2; i++){
    var roll = Math.floor(Math.random() * 6);
    document.getElementById('dice' + (i + 1)).innerHTML = 
      "<img src='" + (roll + 1) + ".jpg' width='100' height='100' />"
  }
} 
```

# ios - 在 iOS4/iOS5 中发布 AVAudioPlayer 给出 EXC_BAD_ACCESS 错误

> ID：14544379
> 
> 赞同：1
> 
> 时间：2013-01-27T04:18:46.113
> 
> 标签：ios, avaudioplayer

**编辑**：将我的设备（和部署目标）从 iOS 4.3.5 更新到 iOS 5.1.1，但仍然存在同样的问题

在播放声音后释放类成员**AVAudioPlayer**以播放另一个声音时出现问题。

这似乎只是我的一个设备上的问题，运行**iOS 4.3.5/5.1.1的****第三**代**iPod Touch**。

 **我运行**iOS 6的****第 4**代和**第 5**代设备运行良好。

 **```
[audio release];
audio = nil;
@try
{
    audio = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    if ((audio != nil) && (!error))
    {
        audio.delegate = (id)self;
        audio.volume = gVolume/10;
        [audio play];
    }
    else
    {
        [audio release];
        audio = nil;
    }
}
@catch (NSException *exception)
{
    [audio release];
    audio = nil;
} 
```

第一次播放很好，但是当此代码第二次执行以播放另一个声音时，它会给出**EXC_BAD_ACCESS错误，这在我的****第 4 代/第 5**代设备上不会发生。

我故意延迟**释放**，直到我需要播放另一个声音，以便给**播放**时间来执行。

尝试使用**AVAudioPlayerDelegate**但这并没有解决问题，也没有调用：

```
[audio prepareToPlay]; 
```

我确实在**viewDidLoad中将****音频**初始化为**nil ，并在****viewDidUnload**和**dealloc**中进行清理。

 ******有很多内存泄漏问题，但这个版本的代码似乎已经解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:59:00.783

感谢上面的评论，以及我所有其他想法的失败，我继续利用**ARC**。

我不想重构我的整个项目来开始使用**ARC**，所以我重写了一个新类来处理我所有的音频需求并设置一些编译器标志 ( **-fobjc-arc** ) 来仅为该文件启用**ARC 。**

不完全确定我之前做错了什么，但系统在管理内存方面似乎比我好得多，我很高兴让它解决我所有的问题。

**编辑 2**：

显然，Apple 终于修复了他们的内存泄漏，所以我回到了我的**ARC**解决方案，它适用于**iOS 5**和**iOS 6**。

**编辑**：

我可能有点为时过早。

虽然为此实施**ARC**总体上是有帮助的，但这个特定问题更深入。

显然，**Core Foundation** for **iOS 6**存在漏洞。

[使用 ARC 从 NSURL 和 AVAudioPlayer 泄漏](https://stackoverflow.com/questions/12498015/leak-from-nsurl-and-avaudioplayer-using-arc)

[内存泄漏 - NSString & NSURL](https://stackoverflow.com/questions/13309745/memory-leak-nsstring-nsurl)

使用**ARC**，它在我的**Gen 3 iOS 5设备上运行良好，但在****Gen 4/5 iOS 6**上显着泄漏。

没有**ARC**，**Gen 4/5 iOS 6**工作正常，但**Gen 3 iOS 5**崩溃。

我最终制作了我的新类的两个版本，一个使用**ARC**，一个不使用，并在运行时检查系统版本**[[UIDevice currentDevice] systemVersion]**以确定要使用的版本。

它可能有点笨拙，但确实允许我支持**Gen 3**设备。如果**Apple**解决了他们的问题，我可以在那个时候返回单个版本。**********

# ruby-on-rails - 使用分页（kaminari）时如何使用 dalli 实现片段缓存？

> ID：14544396
> 
> 赞同：1
> 
> 时间：2013-01-27T04:22:23.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dalli

我知道`dalli`（缓存）是一个非常强大的插件，可以提高静态页面的性能。
但是带有分页的动态页面会经常更新吗？
正确的设置方法是什么`dalli`？

例如，我遇到的一个问题：`dalli`使用分页时将不同的 params[:page] 识别为同一页面:(

`dalli`两者都使用时，你们将如何设计系统

*   经常更新的页面
*   不会经常更新的页面

例如。我有 4 个模型，例如`User`、`Community`、`Topic`和`Comment(defined Polymorphic to both Community, and Topic. They can be created or shown in #show pages)`

就像是

*   社区 > (has_many) > 主题 > (has_many) > 评论
*   社区 > (has_many) > 评论
*   都属于用户（创作者）

我当前的代码就是这样（这有点长。抱歉）
我在使用缓存时面临分页问题......

-------------------------------------**设置**------------ ----------------------------

**配置/环境/development.rb**

```
config.consider_all_requests_local       = true
config.action_controller.perform_caching = true
config.cache_store = :dalli_store 
```

**路线.rb**

```
resources :communities do
    resources :topics do
        resources :comments do
    end
end 
```

-------------------------------------**社区**------------ ----------------------------

**控制器/communities_controller.rb#index&show**

```
caches_page :show
caches_action :edit, :new

def index
    ....
    if params[:sort] == 'new'
        @communities = Community.scoped.page(params[:page]).order("created_at DESC")
    elsif params[:sort] = 'popular'
        @communities = Community.scoped.page(params[:page]).order("follow_count DESC")
    elsif params[:sort] = 'reputation'
        @communities = Community.scoped.page(params[:page]).order("reputation_count DESC")
    else
        @communities = Community.scoped.page(params[:page]).order("created_at DESC")
    end
    ....
end

def show
    @community = Community.find(params[:community_id])
    @comments @community.comments.page(params[:page]
    @topics = @community.topics.limit(10)
end 
```

**views/communities/index.html.erb** 注意：但是，即使我移至下一个参数 [:page]，内容也会相同：( 似乎缓存将不同的页面识别为相同的内容...

```
#here, the url will could be something like this example.com/communities?utf8=✓&amp;location=14&genre=3&search=strawberry
 But this is going to create gigantic petterns of the caches:(  
 So I want to make it work only when params[:sort] was not empty. Because, no other parameters come with when params[:sort] is not empty. 
 It could be like, example.com/communities?sort=new, example.com/communities?sort=popular, example.com/communities?sort=reputation

...
<% if params[:sort] %>
    <% @key = "community_index_" + params[:sort] + params[:page] %>

    <% cache(:controller => "communities", :action => "index", :action_suffix => @key) do %>
        <%= page_entries_info(@communities, :entry_name => 'community').html_safe %>
        <%= paginate @communities, :window => 4 %>

        <% @communities.each do |community| %>  
            <%= render 'communities/community', :community => community %>
        <% end %>
    <% end %>
<% end %>
... 
```

**意见/社区/show.html.erb**

```
...
<% @key = params[:community_name] + "_community_show_information" %>
<% cache(:controller => "communities", :action => "show", :action_suffix => @key) do %>
    <h2>Information</h2>
    <div class="CommunityInformation">
        <%= render 'communities/information'%>
    </div>
<% end %>

<% @key = params[:community_name] + "_community_show_wall_" + params[:page] + %>
<% cache(:controller => "communities", :action => "show", :action_suffix => @key) do %>
<%= paginate @comments, :window => 4 %>
    <h2>Topic</h2>
    <div class="WallInformation">
        <%  @comments.eager.recent.each do |comment| %>
            <%= render 'communities/comment', :comment => comment %>
        <% end %>
    </div>
<% end %>

<% @key = params[:community_name] + "_community_show_topics" %>
<% cache(:controller => "communities", :action => "show", :action_suffix => @key) do %>
    <h2>Topic</h2>
    <div class="TopicInformation">
        <%  @topics.eager.recent.each do |topic| %>
            <%= render 'communities/topic', :topic => topic %>
        <% end %>
    </div>
<% end %>
... 
```

**模型/community_sweeper.rb**

```
class CommunitySweeper < ActionController::Caching::Sweeper
  observe Community

  def after_save(record)
    expire_fragment(url_for(:action => 'index', :only_path => true) + '?????(all the caches related to the community#index)')
    expire_fragment(url_for(:action => 'show', :only_path => true) + '?????(the cache related to the particular community#show)')
  end
end

end 
```

-------------------------------------**主题**------------ ----------------------------

**控制器/topics_controller.rb#index&show**

```
caches_page :show
caches_action :edit, :new

def index
    ....
    @community = Community.find(params[:community_id])
    @topics = @community.topics.page(params[:page]
    ....
end

def show
    @topic = Topic.find(params[:id])
    @comments = @topic.comments.page(params[:page]
end 
```

**意见/主题/index.html.erb**

```
...
<% @key = params[:community_id] + "_topic_index_"  + params[:page] %>
    <% cache(:controller => "topics", :action => "index", :action_suffix => @key) do %>
        <%= page_entries_info(@communities, :entry_name => 'community').html_safe %>
        <%= paginate @communities, :window => 4 %>

        <% @communities.each do |community| %>  
            <%= render 'communities/community', :community => community %>
        <% end %>
    <% end %>
<% end %>
... 
```

**意见/主题/show.html.erb**

```
...    
<% @key = params[:community_name] + "_topic_show_" + params[:id] + "_comments" + params[:page] %>
    <% cache(:controller => "topics", :action => "show", :action_suffix => @key) do %>
         <%= paginate @comments, :window => 4 %>
         <%= page_entries_info(@comments, :entry_name => 'comment').html_safe %>

         <h2>Comment</h2>
         <div class="CommentInformation">
         <% @comments.each do |comment| %>
             <%= render 'topics/comment', :comment => comment %>
         <% end %>
    </div>
<% end %>
... 
```

**模型/topic_sweeper.rb**

```
class TopicSweeper < ActionController::Caching::Sweeper
  observe Topic

  def after_save(record)
    expire_fragment(url_for(:action => 'index', :only_path => true) + '?????(all the caches related to the topic#index)')
    expire_fragment(url_for(:action => 'show', :only_path => true) + '?????(the cache related to the particular topic#show)')
  end
end 
```

-------------------------------------**评论**------------ ----------------------------

**模型/comment_sweeper.rb**

```
class CommentSweeper < ActionController::Caching::Sweeper
  observe Comment

  def after_save(record)
    expire_fragment(url_for(:action => 'index', :only_path => true) + '?????(all the caches related to the topic#index)')
    expire_fragment(url_for(:action => 'show', :only_path => true) + '?????(the cache related to the particular topic#show)')
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:53:12.657

我正在继续我的回答

[我应该如何为包含大量内容更新的动态页面设置 dalli？](https://stackoverflow.com/questions/14539581)

请注意，我不是专家，但我确实尝试了您的方法并放弃了它，因为随着我的应用程序的增长，它变得越来越复杂，我选择了上一个问题中提到的基于缓存密钥片段的方法。有几件事要记住。

1.  缓存清扫器方法要求您在对应用程序进行更改时确保清扫器是最新的，这意味着额外的维护和测试工作。

2.  在动态应用程序中，您可能无法轻松缓存整个页面，尤其是当视图显示来自许多模型的信息时。

3.  除非页面参数成为缓存键的一部分，否则您将无法处理分页问题。

4.  当您的缓存已满时，memcached 将在放入新的缓存片段时简单地删除最少使用/最旧的缓存项。

5.  因此，当您的模型更改并让 memcached 清除旧的过时缓存项时，您只需推送新的缓存片段并没有问题。

因此，您的视图中的片段缓存可能是最简单的解决方案，因为它将处理分页，您不必处理手动缓存失效

所以看看你的一个观点，我可能会做的是

```
<% if params[:sort] %>

        <%= page_entries_info(@communities, :entry_name => 'community').html_safe %>
        <%= paginate @communities, :window => 4 %>

        <% @communities.each do |community| %>  
            <% cache(community, :suffix => "community_index") do 
                <%= render 'communities/community', :community => community %>
            <% end %>
        <% end %>
<% end %> 
```

我所做的是缓存每个社区记录的呈现，并且分页变得无关紧要

# .net - 如何从用 F# 编写的编译器定位 LLVM？

> ID：14544398
> 
> 赞同：9
> 
> 时间：2013-01-27T04:22:35.253
> 
> 标签：.net, compiler-construction, f#, llvm

我正在用 F# 编写一种玩具语言。我想以 LLVM 为目标，但看起来我必须做一些工作才能实现这一目标。

看起来我可以与 IRBuilder 库进行一些互操作，或者我可以推出自己的 IR 发射器。据我搜索，我找不到其他人提出的任何解决方案。

我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T14:31:53.800

我认识几个经常使用 F# + LLVM 的人，我之前在 SO 上看到过很多关于它的问题： [标记为 F# 和 LLVM的问题](https://stackoverflow.com/questions/tagged/f%23+llvm?sort=votes)

不管怎样，看看Github 上[F# 的 LLVM 绑定](https://github.com/fsharp/llvm-fs)——这应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-26T11:10:58.737

[LLVMSharp](https://github.com/Microsoft/LLVMSharp)似乎是一个可行的解决方案。他们有一个[C# 教程](http://ice1000.org/llvm-cs/en/)，用于在 LLVM 之上构建一种应该很容易转换为 F# 的语言。

# php - PHP 无法识别 ajax 发布的数据

> ID：14544405
> 
> 赞同：0
> 
> 时间：2013-01-27T04:23:49.790
> 
> 标签：php, javascript, ajax

我正在向我的 PHP 脚本发送一个 ajax 调用，如下所示：

```
function load(){
    var request = {};
    request['action'] = 'load';
    request['file'] = 'lorem_ipsum.txt';
    $.ajax({
        type: 'POST',
        url: cgi_file,
        data: JSON.stringify(request),
        processData: false,
        dataType: 'html',
        contentType: 'application/html',
        success:function(response){
            console.log("received " + response);
        }
    });
} 
```

我的PHP脚本如下：

```
$content_dir = '/static/content/';

$action = $_POST['action'];

switch ($action){
    case 'load':
        $file = $_POST['filename'];
        echo file_get_contents($content_dir . $file);
        exit();
} 
```

PHP 以以下失败响应：

```
Notice: Undefined index: action in /var/www/river/api.php on line 5 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:25:08.270

保持`data`原样：

```
data: request, 
```

您不需要对其进行字符串化。

此外，您的`file`参数允许攻击者从您的文件系统中读取任意文件。对其进行消毒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:47:02.883

尝试沟渠`processData: false`，`contentType: 'application/html'`它应该工作

```
$.ajax({
    type: 'POST',
    url: cgi_file,
    data: request,
    dataType: 'html',
    success:function(response){
        console.log("received " + response);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T05:01:35.790

这里有一些问题，首先`contentType`属性是您发送到服务器的数据，其次 dataType 应该设置`text`为您从服务器接收的数据。如果您想接收`$_POST`数组中的数据，您的 javascript 应该如下所示，

```
$.ajax({
    type: 'POST',
    url: cgi_file,
    data: {
        action: "load",
        file: "lorem_ipsum.txt";
    },
    dataType: 'text',
    success:function(response){
        console.log("received " + response);
    }
}); 
```

Jquery 会将您的数据作为标准帖子发送到您的服务器端代码。

# c - 更改字符串中的字符时，MingW 下的分段错误

> ID：14544409
> 
> 赞同：-2
> 
> 时间：2013-01-27T04:24:20.730
> 
> 标签：c, gcc, segmentation-fault, mingw

> **可能重复：**
> [无法修改 char* - 内存访问冲突](https://stackoverflow.com/questions/5343721/cant-modify-char-memory-access-violation)

一直在寻找我用 MingW 编译的 c 程序中的一个问题，最终归结为下面非常简单的测试用例。

当然，目的是更改字符串中的字符。但是这段代码给了我一个分段错误。有人可以解释为什么吗？我不明白...

测试.c：

```
#include <stdio.h>

main(){
  char *s = "xx";
  printf("(%s)\n", s);
  s[0] = 'z';  // ** Segmentation fault here **
  printf("(%s)\n", s);
} 
```

--

```
$ gcc -c test.c
$ gcc -o test.exe test.o
$ ./test.exe
(xx)
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:34:19.383

编译器可以将字符串“xx”分配到只读内存中。因此，当您尝试更改该内存时，如果它已分配给只读内存，您将遇到分段错误。

如果您的字符串大小是固定的，例如在您的示例中，如果您将字符串定义为字符数组，则不会以只读方式分配内存，并且您不会遇到该问题。

有时，你不知道字符串的最大大小或者你不想浪费空间，所以你需要 malloc() 那个内存，使用 strdup() （它分配内存作为它的函数的一部分），或者其他的相似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:42:08.630

谢谢你的帮助。

因此，对于记录，这是有效的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void main(){
  char s[] = "xx";
  // or: char *s = malloc(5); strcpy(s, "xx");
  printf("(%s)\n", s);
  s[0] = 'z';  // ** Segmentation fault here **
  printf("(%s)\n", s);
} 
```

# javascript - Ajax 成功处理程序 - 数据未定义

> ID：14544414
> 
> 赞同：0
> 
> 时间：2013-01-27T04:25:26.383
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

这是我提出ajax请求的方式

```
 #action
  def get_item
    if request.get?
      binding.pry  #it always stop here, so it's working
      item = Item.where(...)
      unless item
        item = Item.new
        # .....
      end
      respond_to do |format| 
        format.json { render(json: item) } 
      end
    elsif request.post?
       # ......
    end
  end

  #view
     $.ajax({
          type: "GET",
          url: "/contr/get_item",
                data: {key1: "value1"},
                //datatype: "json",
                success: function(data){
                  console.log("ajax success, data -> " + data[0]);
                    }
             }); 
```

尽管`get_item`执行了其中的代码，`data`但页面上的值始终为`undefined`.

我错过了什么？

ps 请注意，请求 **是**从服务器以 json 格式发回的。我可以通过单击 F12 并转到“网络”选项卡的“调试工具”在 Chrome 中看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:31:35.830

试试这个：

```
 def get_item
   if request.get?
     item = Item.where(...)
     unless item
       item = Item.new
       # .....
     end
     render :json => item.to_json
   elsif request.post?
    #...
   end
 end 
```

# 看法

```
 $.ajax({
      type: "GET",
      url: "/contr/get_item",
            data: {key1: "value1"},
            //datatype: "json",
            success: function(data){
              console.log("ajax success, data -> " + data[0]);
                }
         }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:35:10.023

您的 URL 需要说明您要使用的格式。在您的情况下，它应该`.json`以 json 响应结束。

```
#view
   $.ajax({
        type: "GET",
        url: "/contr/get_item.json", 
```

# asp.net - 将 XML 文件加载到 HTML(aspx) 页面并设置文本标签

> ID：14544417
> 
> 赞同：0
> 
> 时间：2013-01-27T04:26:30.020
> 
> 标签：asp.net, xml

我刚开始在 ASP.Net VB 中编程，我需要帮助！我有几个 HTML(aspx) 页面，每个页面都有他的 XML 文件。当我访问这些页面中的任何一个时，我想阅读他的 XML 文件并为标签设置文本。我怎么能这样做？？？例如：

**xml文件：**

```
<?xml version="1.0" encoding="utf-8" ?>
<page>
        <title>Page Number One:</title>
        <chapter1>Main Chapter:</chapter1>
        <chapter2>Second Chapter:</chapter2>

         ...

</page> 
```

**html页面：**

```
...
    <form id="form1" runat="server">

        <asp:Label ID="lblTitle" runat="server" Text="<%= title %>">"></asp:Label>

        <asp:Label ID="lblFName" runat="server" Text="<%= chapter1 %>"></asp:Label>

        <asp:Label ID="lblLName" runat="server" Text="<%= chapter2 %>"></asp:Label>

    </form>

 ... 
```

类似的东西或更好的方法来做到这一点？？？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:32:50.700

最简单的方法是使用[XDocument 加载/解析文件](http://www.codeproject.com/Articles/169598/Parse-XML-Documents-by-XMLDocument-and-XDocument)，然后使用 XPath 获取所需节点的值。

为了使用您发布的绑定表达式，您需要使用数据绑定控件，例如转发器和[XMLDataSource](http://www.codeproject.com/Articles/10898/Introduction-to-XMLDataSource-control-in-ASP-NET-2)。

# c++ - C/C++ 如何知道如何编译正确的架构？

> ID：14544418
> 
> 赞同：3
> 
> 时间：2013-01-27T04:26:43.280
> 
> 标签：c++, assembly, architecture

好吧，我开始学习像 c++ 和 c 这样的计算机编程。我有一个关于处理器架构的强烈问题，这将使我能够更好地理解我的代码将在哪里运行。

所以，假设我编译了一个 c++ 程序。此时，它编译为汇编低级代码。此代码具有执行我的代码的处理器指令。由于每个处理器都有不同的指令集，我想知道我的代码将在哪里运行。就像，我在代码块上编译我的程序。我如何知道我是为 32 位还是 64 位计算机编译它？我可以改变它吗？两个32位处理器有什么区别，一个是i5，另一个是奔腾4？（我的代码会在两个处理器中运行吗？）

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T04:32:00.053

> 我如何知道我是为 32 位还是 64 位计算机编译它？

当你构建你的程序时，你必须告诉编译器。它可能有一些默认值 - 检查它的文档。

> 我可以改变它吗？

也许，这取决于你的编译器。如果它有必要的选项，那么是的。`clang`，例如，有一个`-arch`标志。

> 两个32位处理器有什么区别，一个是i5，另一个是奔腾4？

如果两者都实现相同的指令集，那么它们在编译您的软件时实际上是等效的。但是，非常特定于机器的优化可能在其中一个或另一个上效果更好。

> 我的代码会在两个处理器中运行吗？

在您给出的示例中，可能是的。

# html - 我可以把h标签放在页脚吗？

> ID：14544422
> 
> 赞同：0
> 
> 时间：2013-01-27T04:27:17.687
> 
> 标签：html

我有一个主题回复列表。每个回复都带有文章标签，并且不需要标题，而且没有标题的布局看起来不错。但在 html5 大纲测试中，每个回复都是一个“未定义部分”。所以我想把它放在页脚：

```
<h3>Reply-$id</h3> 
```

这是html5的无效还是不好的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:39:26.870

目前 W3C HTML 工作组邮件列表上有一个相关的线程 - 它从[http://lists.w3.org/Archives/Public/public-html/2013Jan/0109.html](http://lists.w3.org/Archives/Public/public-html/2013Jan/0109.html)开始- 普遍的观点似乎是使用该`<article>`元素进行评论/回复没有帮助，应该从规范中删除建议，并`<ol>/<li>`改为推荐。

这将具有从文档大纲中删除单个注释的效果，除非您明确为每个注释提供标题。

继续直接解决您的问题，就我个人而言，我不同意 BoltClock - 我认为作为标题很好，如果您认为它属于页脚，我认为将其放在页脚中没有问题。请记住，评论/回复经常通过他们的回复编号相互交叉引用，特别是当回复者不提供标题时，因此能够通过内容列表/文档大纲找到交叉引用的回复将是一种有用的效果。而回复号是回复的一种从属元数据，因此将其包含在页脚中似乎并不合理。

但是，如果用户通过例如屏幕阅读器通过交叉引用找到回复，他们会希望回复的文本跟在标题之后，所以在这种情况下，您应该将`<footer>`回复文本放在回复文本之前。这样做并没有错，尽管它可能会否定你的表达意图。

# c++ - C++ while(cin >> x){} 与 while(true) {cin >>x;}

> ID：14544423
> 
> 赞同：0
> 
> 时间：2013-01-27T04:27:24.553
> 
> 标签：c++

请考虑使用此 C++ 代码创建和遍历链表（节点数由用户决定，而不是程序员）

```
#include <iostream>
using namespace std;
class Node
{ 
 public:
 int data; Node* next;
 Node(int d, Node* j): data(d),next(j) {cout << "Constructor\n";}
};

int main()
{int n; Node* p; Node* q = 0;

while(cin >> n) 
{ p = new Node(n,q);
  q = p;}

for(;p->next; p=p->next)
    cout << p->data << "->";
    cout << p-> data << "->*\n";
return 0;} 
```

上面的代码完美运行，用户可以使用**`Ctrl`+`D`**后跟**`Enter`**. 但是，如果我们使用 cin >> n 将 while(cin >> n) 替换为 while (true)；在循环内，如此处所示

```
 while(true) 
    { cin >> n;
    p = new Node(n,q); q = p;} 
```

然后在用户尝试终止时，循环会继续自动创建新节点！为什么？？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:34:55.770

它继续运行，因为循环条件是`true`，使其成为无限循环。如果你想跳出无限循环，你可以使用一个`break`语句，例如

```
while (true) {
    if (!(cin >> n)) {
        break; // exits the loop
    }
    p = new Node(n,q);
    q = p;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:51:25.677

也许有一种误解，即代码`cin >> n`在到达文件末尾时会以某种方式自动导致循环中断。事实上，我们要么必须隐式检查文件结尾，如原始示例或@MrFooz 的解决方案所示，要么显式检查，如下所示：

```
while(true) { 
    cin >> n;
    if (cin.eof()) break; // We're explicitly checking for EOF here
    p = new Node(n,q);
    q = p;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:35:59.573

Ctrl+D 发出 EOF 信号，这可能导致 >> 操作返回 false，因为用户已发出标准输入结束信号。

# c++ - 来自stdin的Cin当它是一行的结尾

> ID：14544424
> 
> 赞同：0
> 
> 时间：2013-01-27T04:27:29.740
> 
> 标签：c++, input, cin

例如，我有一个文件

```
M
4
2
//comments
.#.. 
```

它通过标准输入提供给程序。我不能使用 fstream，只能使用 iostream。

如果我想一个字一个字地阅读整件事，我可以做吗？

```
char first_letter, first_num, second_num;
cin >> first_letter;
cin >> first_num;
cin >> second_num; 
```

还是行尾会弄乱cin？如，cin 在读取第一个字母的 M 后是否知道它需要走到最后一行？

其次，我不想阅读评论行。我的计划是，如果我看到 / 我将使用 getline 来“删除”该行，然后移至 . # . . 并将它们存储在我的数组中。那会是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:55:07.280

首先，流默认跳过空格（空格、制表符、换行符），因此这部分很容易。

现在，关于注释行，这有点复杂。您可以使用 std::getline() 读取一行。这会将行存储在字符串中并丢弃尾随的换行符。但是，如果您例如在上面的代码中读取了第一个字母，则换行符仍保留在流中，因此 getline() 将读取一个空字符串。简而言之，不要混合基于行和基于标记的输入。

在实践中，您读取一行并手动解析它，或者为此创建一个流：

```
while(getline(in, line)) {
    if(line.empty()) continue; // empty line
    if(line[0] == '#') continue; // comment line
    // parse line
    std::stringstream s(line);
    char c;
    s >> c;
} 
```

# java - 在方法调用之前修改参数

> ID：14544428
> 
> 赞同：0
> 
> 时间：2013-01-27T04:28:19.197
> 
> 标签：java, parameters, annotations, parameter-passing, java-6

我在几种方法中有一个名为“服务器”的参数：

```
public synchronized Client getClientByStreamId(String streamId, Server server) {
  //some logic
}

public Client getClientByPublicSID(String publicSID, boolean isAVClient, Server server) {
  //some logic
} 
```

我想要的是每次调用这些方法时都会有一个检查，在调用方法*之前*对参数服务器执行：

```
if (server == null) {
  server = someServer; //someServer is a variable I get somewhere else
} 
```

据我所知，Java6 中的注释必须有一些技巧，以便您可以执行类似（伪代码）的操作：

```
@ManipulateArgs(MyMethod);
public synchronized Client getClientByStreamId(String streamId, Server server) {
  //some logic
}

@ManipulateArgs(MyMethod);
public Client getClientByPublicSID(String publicSID, boolean isAVClient, Server server) {
  //some logic
}

private MyMethod(Server server) {
  if (server == null) {
    server = someServer; //someServer is a variable I get somewhere else
  }
} 
```

在使用参数调用实际方法*之前*调用的某种“预处理器” 。我只是不记得这个预处理的名称是什么。或者如果它是基于注释的或其他的。但我认为这是一个注释。

谢谢塞巴斯蒂安
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:32:16.560

您正在寻找的通用术语是*方法拦截器*。它们有多种实现方式。面向方面的编程是一种方式。请参阅教程[http://www.javaworld.com/javaworld/jw-01-2002/jw-0118-aspect.html](http://www.javaworld.com/javaworld/jw-01-2002/jw-0118-aspect.html)。如果您使用的是 Spring 或 JBoss 等框架，则内置了拦截器注释。

# mysql - mysql left join 与一个非常大的表 - 超级慢

> ID：14544429
> 
> 赞同：1
> 
> 时间：2013-01-27T04:28:33.267
> 
> 标签：mysql

[site_list] ~100,000 行... 10mb 大小。

*   site_id
*   网站网址
*   **site_data_most_recent_record_id**

[site_list_data] ~ 15+ 百万行并且还在增长......大小约为 600mb。

*   **记录ID**
*   site_id
*   站点连接时间
*   站点速度
*   日期检查

* * *

粗体列是**唯一的索引键。**

我需要返回 50 个最近更新的站点以及与之相关的最新数据 - 连接时间、速度、日期......
这是我的查询：

```
SELECT SQL_CALC_FOUND_ROWS
  site_list.site_url,
  site_list_data.site_connect_time,
  site_list_data.site_speed,
  site_list_data.date_checked
FROM site_list
  LEFT JOIN site_list_data
    ON site_list.site_data_most_recent_record_id = site_list_data.record_id
ORDER BY site_data.date_checked DESC
LIMIT 50 
```

如果没有 ORDER BY 和 SQL_CALC_FOUND_ROWS（我需要它进行分页），查询大约需要 1.5 秒，而那些需要超过 2 秒或更长时间的查询还不够好，因为将显示此数据的特定页面正在获得 20K+ 页面浏览量/一天，这个查询显然太重了（当我把它上线时服务器几乎死了）而且太慢了。

mySQL的专家，你会怎么做？如果表达到 1 亿条记录怎么办？每 30 秒将这个巨大的结果缓存到临时表中是我得到的唯一其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:34:44.300

您需要向查询添加启发式。您需要对查询进行门控以获得合理的性能。它有效地按日期降序对您的 site_list_date 表进行排序——整个表。

因此，如果您知道前 50 名将在最后一天或一周内，请在查询中添加“and date_checked > <boundary_date>”。然后它应该首先减少整体结果集，然后对其进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:04:30.693

SQL_CALC_ROWS_FOUND 是慢速使用 COUNT 代替。看看[这里](http://www.mysqlperformanceblog.com/2007/08/28/to-sql_calc_found_rows-or-not-to-sql_calc_found_rows/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T05:29:47.637

一些观察。

两者`ORDER BY`都会`SQL_CALC_FOUND_ROWS`增加你的表演成本。 `ORDER BY`可以通过适当的索引来改进子句——你的 date_checked 列上有索引吗？这可能会有所帮助。

您的确切需求是`SQL_CALC_FOUND_ROWS`什么？考虑用一个单独的查询替换它`COUNT`。假设您的查询缓存已启用，这可能会好得多。

如果您可以使用`COUNT`，请考虑将您的替换`LEFT JOIN`为 an `INNER JOIN`，因为这也有助于提高性能。

祝你好运。

# javascript - 在网页上使用 XSL Tranx 将标头添加到 XML 数组内容

> ID：14544431
> 
> 赞同：0
> 
> 时间：2013-01-27T04:28:39.467
> 
> 标签：javascript, xml, xslt

假设我有以下使用 JAXB 生成的 xml 数组来进行 xslted：

```
<warning>blah</warning>
<warning>blah</warning>
... 
```

但是我忘记使用根/父元素来包装数组。那么如何将前面的内容添加到数组的转换结果中，比如：

```
Warning:
blah
blah
... 
```

因为我们有超过数千个 xml，所以我不想再次编组它们，而是像 JS 或 XSL 那样获得前端出路。

我能想到的唯一解决方案是检查 xsl 模板中是否存在 wanring。但是，我有几十个模板，并且警告基本上可以在 xml 中的任何位置出现，所以我不想检查每个模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:13:20.950

只是我自己想通了。简单的。CSS 伪的路要走！

```
.warning:first-child:before{content:"Warning: "} 
```

# android - 为什么多点触控不能与 andengine GLES-2 SimpleBaseGameActivity 一起使用？

> ID：14544436
> 
> 赞同：1
> 
> 时间：2013-01-27T04:29:52.150
> 
> 标签：android, andengine, multi-touch

嗨，我正在尝试制作一个两人乒乓球游戏，但它的多点触控部分不起作用我知道我正在使用的设备启用了多点触控，所以我的代码中的某些内容一定是错误的。现在我有两个专用的背景部分，当触摸它们时设置桨位置，但如果有人的手指在屏幕上，它不会识别第二次触摸。

```
public class TwoPlayerMode extends SimpleBaseGameActivity {

private static final int CAMERA_WIDTH = 800;
private static final int CAMERA_HEIGHT = 480;
private ITextureRegion mField, mField1, mField2, mField3, mPaddle;
private Sprite bottomPaddleSprite, topPaddleSprite, backgroundSpriteP2, backgroundSpriteP1, backgroundSpriteP3;
private String homelife, awaylife;
private int homeCount, awayCount;
Font mFont;
Text scores, lives;
SharedPreferences prefs;
MultiTouchController mtc;

@Override
public EngineOptions onCreateEngineOptions() {
    mtc = new MultiTouchController();
    final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    final FixedStepEngine engine = new FixedStepEngine(new EngineOptions(true,
            ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(
                    CAMERA_WIDTH, CAMERA_HEIGHT), camera),60);
    if (MultiTouch.isSupported(this)) {
        Toast.makeText(this, "Multitouch", Toast.LENGTH_LONG).show();
        engine.setTouchController(mtc);
    }

    return engine.getEngineOptions();

}

@Override
protected void onCreateResources() {
    prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    try {

        ITexture paddle = new BitmapTexture(this.getTextureManager(),
                new IInputStreamOpener() {
                    @Override
                    public InputStream open() throws IOException {
                        boolean light = prefs.getBoolean("theme", false);
                        if (light) {
                            return getAssets().open("gfx/paddle2.png");
                        } else {
                            return getAssets().open("gfx/paddle.png");
                        }
                    }
                });
        ITexture fieldmid = new BitmapTexture(this.getTextureManager(),
                new IInputStreamOpener() {
                    @Override
                    public InputStream open() throws IOException {
                        boolean light = prefs.getBoolean("theme", false);
                        if (light) {
                            return getAssets().open("gfx/fieldmid2.png");
                        } else {
                            return getAssets().open("gfx/fieldmid.png");
                        }

                    }
                });
        ITexture fieldend = new BitmapTexture(this.getTextureManager(),
                new IInputStreamOpener() {
                    @Override
                    public InputStream open() throws IOException {
                        boolean light = prefs.getBoolean("theme", false);
                        if (light) {
                            return getAssets().open("gfx/fieldend2.png");
                        } else {
                            return getAssets().open("gfx/fieldend.png");
                        }

                    }
                });

        // 2 - Load bitmap textures into VRAM

        fieldend.load();
        fieldmid.load();
        paddle.load();

        // 3 - Set up texture regions

        this.mField1 = TextureRegionFactory.extractFromTexture(fieldend);
        this.mField2 = TextureRegionFactory.extractFromTexture(fieldmid);
        this.mField3 = TextureRegionFactory.extractFromTexture(fieldend);
        this.mPaddle = TextureRegionFactory.extractFromTexture(paddle);
        loadFonts();
    } catch (IOException e) {
        Debug.e(e);
    }

}

public void loadFonts() {
    FontFactory.setAssetBasePath("font/");
    final ITexture fontTexture = new BitmapTextureAtlas(
            getTextureManager(), 256, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    boolean light = prefs.getBoolean("theme", false);
    if (light) {
        mFont = FontFactory.createFromAsset(getFontManager(), fontTexture,
                getAssets(), "plaincre.ttf", 40f, true,
                Color.rgb(0, 221, 255));

    } else {
        mFont = FontFactory.createFromAsset(getFontManager(), fontTexture,
                getAssets(), "plaincre.ttf", 40f, true,
                Color.rgb(0, 153, 204));

    }
    mFont.load();

}

@Override
protected Scene onCreateScene() {

    final Scene scene = new Scene();

    topPaddleSprite = new Sprite(0, 195, this.mPaddle,
            getVertexBufferObjectManager());
    bottomPaddleSprite = new Sprite(785, 195, this.mPaddle,
            getVertexBufferObjectManager());
    // my spirtes and background
    /*
     * Sprite backgroundSprite = new Sprite(0, 0, this.mField,
     * getVertexBufferObjectManager()); scene.attachChild(backgroundSprite);
     */
    backgroundSpriteP1 = new Sprite(0, 0, this.mField1,
            getVertexBufferObjectManager())  {
        boolean mGrabbed = false;
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            switch(pSceneTouchEvent.getAction()) {
                        case TouchEvent.ACTION_DOWN:
                            if (pSceneTouchEvent.isActionMove()
                                    || pSceneTouchEvent.isActionDown()) {
                                topPaddleSprite.setPosition(0f,
                                        pSceneTouchEvent.getY() - topPaddleSprite.getHeight() / 2);
                            }
                                this.mGrabbed = true;
                                break;
                        case TouchEvent.ACTION_MOVE:
                                if(this.mGrabbed) {
                                    if (pSceneTouchEvent.isActionMove()
                                            || pSceneTouchEvent.isActionDown()) {
                                        topPaddleSprite.setPosition(0f,
                                                pSceneTouchEvent.getY() - topPaddleSprite.getHeight() / 2);
                                    } }
                                break;
                        case TouchEvent.ACTION_UP:
                                if(this.mGrabbed) {
                                        this.mGrabbed = false;
                                        if (pSceneTouchEvent.isActionMove()
                                                || pSceneTouchEvent.isActionDown()) {
                                            topPaddleSprite.setPosition(0f,
                                                    pSceneTouchEvent.getY() - topPaddleSprite.getHeight() / 2);
                                        }
                                }
                                break;
                }
                return true;
        }
};
    backgroundSpriteP2 = new Sprite(backgroundSpriteP1.getWidth(), 0,
            this.mField2, getVertexBufferObjectManager());
    backgroundSpriteP3 = new Sprite(backgroundSpriteP1.getWidth()
            + backgroundSpriteP2.getWidth(), 0, this.mField3,
            getVertexBufferObjectManager()) {
        boolean mGrabbed = false;
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            switch(pSceneTouchEvent.getAction()) {
                        case TouchEvent.ACTION_DOWN:

                                bottomPaddleSprite.setPosition(785f,
                                        pTouchAreaLocalY - bottomPaddleSprite.getHeight() / 2);

                                this.mGrabbed = true;
                                break;
                        case TouchEvent.ACTION_MOVE:
                                if(this.mGrabbed) {

                                        bottomPaddleSprite.setPosition(785f,
                                                pSceneTouchEvent.getY() - bottomPaddleSprite.getHeight() / 2);
                                     }
                                break;
                        case TouchEvent.ACTION_UP:
                                if(this.mGrabbed) {
                                        this.mGrabbed = false;

                                            bottomPaddleSprite.setPosition(785f,
                                                    pSceneTouchEvent.getY() - bottomPaddleSprite.getHeight() / 2);

                                }
                                break; 
                }
                return true;
        }
};

    scene.registerTouchArea(backgroundSpriteP1);
    scene.registerTouchArea(backgroundSpriteP3);
    scene.setTouchAreaBindingOnActionMoveEnabled(true);
    scene.setTouchAreaBindingOnActionDownEnabled(true);
    scene.attachChild(backgroundSpriteP1);
    scene.attachChild(backgroundSpriteP2);
    scene.attachChild(backgroundSpriteP3);
    scene.attachChild(topPaddleSprite);
    scene.attachChild(bottomPaddleSprite);

    awayCount = 3;
    awaylife = "3";
    homeCount = 3;
    homelife = "3";
    scores = new Text(50, 50, mFont, awaylife,
            getVertexBufferObjectManager());
    lives = new Text(650, 50, mFont, homelife,
            getVertexBufferObjectManager());
    scene.attachChild(lives);
    scene.attachChild(scores);

    return scene;
}

} 
```

这是一个截图 ![截屏](../Images/ad1b824f9122314e550e27287a7aa779.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:44:09.120

看起来像[这里](http://www.andengine.org/forums/multitouch/does-not-detect-multi-touch-t10116.html)描述的问题。

发布的代码中没有对 TouchOptions 的引用。

# xml - 在 xsl 中使用算术数学创建等级

> ID：14544438
> 
> 赞同：0
> 
> 时间：2013-01-27T04:30:19.370
> 
> 标签：xml, xslt

我在做算术数学和存储在某个地方时遇到了麻烦。我必须创建一个基于游戏的排名。如果国家队获胜得 3 分，如果是平局则得 1 分。

在代码中有 1 平和 5 胜。我如何总结各国的观点？我需要元素还是创建属性或其他东西？

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="file:///C:/Users/Cesar%20Frantz/Desktop/teste.xsl"?>
<Bolaocopa xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:///C:/Users/Cesar%20Frantz/Desktop/teste.xsd">
    <grupos>
        <grupo tipo="A">
            <pais id="s1">Franca<pontos>0</pontos></pais>
            <pais id="s2">Senegal<pontos>0</pontos></pais>
            <pais id="s3">Uruguai<pontos>0</pontos></pais>
            <pais id="s4">Dinamarca<pontos>0</pontos></pais>
        </grupo>
    </grupos>
    <jogoGrupo id="a">
        <selecao paiscasa="s1" golc="1" paisfora="s2" golf="1"/>
        <selecao paiscasa="s3" golc="2" paisfora="s4" golf="3"/>
        <selecao paiscasa="s4" golc="4" paisfora="s2" golf="1"/>
        <selecao paiscasa="s3" golc="6" paisfora="s1" golf="3"/>
        <selecao paiscasa="s4" golc="8" paisfora="s1" golf="5"/>
        <selecao paiscasa="s2" golc="1" paisfora="s3" golf="7"/>
    </jogoGrupo>
</Bolaocopa> 
```

xsl:

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="file:///C:/Users/Cesar%20Frantz/Desktop/teste.xsl"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
                <xsl:template match="/Bolaocopa">                                   
                        <xsl:for-each select="/Bolaocopa/jogoGrupo[1]/selecao">                 
                        <xsl:variable name="paiscasa" select="@paiscasa" />
                        <xsl:variable name="paisfora" select="@paisfora" />                     
                        <xsl:variable name="contador"/>                                                                                                         
                        <xsl:if test="(@golc &gt; @golf)">
                            Vitoria::
                            <xsl:value-of select="/Bolaocopa/grupos/grupo/pais[@id = $paiscasa]"/>
                            <br/><br/>
                        </xsl:if>                       
                        <xsl:if test="(@golf &gt; @golc)">
                            Vitoria::
                            <xsl:value-of select="/Bolaocopa/grupos/grupo/pais[@id = $paisfora]"/>  
                            <br/><br/>                                                  
                        </xsl:if>               
                        <xsl:if test="(@golf = @golc)">
                            Empate::
                            <xsl:value-of select="/Bolaocopa/grupos/grupo/pais[@id = $paiscasa]"/>
                            e <xsl:value-of select="/Bolaocopa/grupos/grupo/pais[@id = $paisfora]"/>                            
                            <br/><br/>                      
                        </xsl:if>
                    </xsl:for-each>
                </xsl:template>                             
</xsl:stylesheet> 
```

架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--W3C Schema generated by XMLSpy v2013 sp1 (x64) (http://www.altova.com)-->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:simpleType name="T_pontos">
        <xs:restriction base="xs:int">
            <xs:enumeration value="0"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_7">
        <xs:restriction base="xs:string">
            <xs:enumeration value="A"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_5">
        <xs:restriction base="xs:int">
            <xs:enumeration value="1"/>
            <xs:enumeration value="3"/>
            <xs:enumeration value="5"/>
            <xs:enumeration value="7"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_3">
        <xs:restriction base="xs:int">
            <xs:enumeration value="0"/>
            <xs:enumeration value="1"/>
            <xs:enumeration value="2"/>
            <xs:enumeration value="4"/>
            <xs:enumeration value="6"/>
            <xs:enumeration value="8"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_2">
        <xs:restriction base="xs:string">
            <xs:enumeration value="s1"/>
            <xs:enumeration value="s2"/>
            <xs:enumeration value="s3"/>
            <xs:enumeration value="s4"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_1">
        <xs:restriction base="xs:string">
            <xs:enumeration value="a"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:complexType name="T_selecao">
        <xs:attribute ref="paisfora" use="required"/>
        <xs:attribute ref="paiscasa" use="required"/>
        <xs:attribute ref="golf" use="required"/>
        <xs:attribute ref="golc" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_pais" mixed="true">
        <xs:sequence>
            <xs:element ref="pontos"/>
        </xs:sequence>
        <xs:attribute name="id" type="AT_2" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_jogoGrupo">
        <xs:sequence>
            <xs:element ref="selecao" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="id" type="AT_1" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_grupos">
        <xs:sequence>
            <xs:element ref="grupo"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="T_grupo">
        <xs:sequence>
            <xs:element ref="pais" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute ref="tipo" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_Bolaocopa">
        <xs:sequence>
            <xs:element ref="grupos"/>
            <xs:element ref="jogoGrupo"/>
        </xs:sequence>
    </xs:complexType>
    <xs:attribute name="tipo" type="AT_7"/>
    <xs:attribute name="paisfora" type="AT_2"/>
    <xs:attribute name="paiscasa" type="AT_2"/>
    <xs:attribute name="golf" type="AT_5"/>
    <xs:attribute name="golc" type="AT_3"/>
    <xs:element name="selecao" type="T_selecao"/>
    <xs:element name="pontos" type="T_pontos"/>
    <xs:element name="pais" type="T_pais"/>
    <xs:element name="jogoGrupo" type="T_jogoGrupo"/>
    <xs:element name="grupos" type="T_grupos"/>
    <xs:element name="grupo" type="T_grupo"/>
    <xs:element name="Bolaocopa" type="T_Bolaocopa"/>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:25:34.533

请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="kTies"
         match="@paiscasa[../@golc = ../@golf] | @paisfora[../@golc = ../@golf]" 
         use="."/>
  <xsl:key name="kWins"
         match="@paiscasa[../@golc &gt; ../@golf] | @paisfora[../@golf &gt; ../@golc]" 
         use="."/>

  <xsl:template match="/">
    <div>
      <xsl:apply-templates select="/Bolaocopa/grupos/grupo/pais">
        <xsl:sort data-type="number"
                  select="count(key('kTies', @id)) + 3 * count(key('kWins', @id))" 
                  order="descending"/>
      </xsl:apply-templates>
    </div>
  </xsl:template>

  <xsl:template match="pais">
    <xsl:variable name="score" 
                  select="count(key('kTies', @id)) + 3 * count(key('kWins', @id))"/>
    <p>
      <xsl:value-of select="concat(text(), ' - ', $score)"/>
    </p>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例 XML 上运行时，结果是：

```
<div>
    <p>Dinamarca - 9</p>
    <p>Uruguai - 6</p>
    <p>Franca - 1</p>
    <p>Senegal - 1</p>
</div> 
```

# c - 指向二维数组的指针和指针

> ID：14544439
> 
> 赞同：-2
> 
> 时间：2013-01-27T04:30:26.970
> 
> 标签：c

我正在浏览一个问题并找到了这个答案。

答案最后我看不懂这个程序，特别是putoff函数的前三行

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>

 #define NUM_ELEM(ar) (sizeof(ar) / sizeof((ar)[0]))

int * put_off(const int newrow[2])
{
static int mymatrix[3][2];
static int (*rowp)[2] = mymatrix;
int (* const border)[] = mymatrix + NUM_ELEM(mymatrix);

memcpy(rowp, newrow, sizeof(*rowp));
rowp += 1;
if (rowp == border) {
    rowp = mymatrix;
}

return *rowp;
 }

int main(int argc, char *argv[])
{
int i = 0;
int row[2] = {0, 1};
int *rout;

for (i = 0; i < 6; i++) {
    row[0] = i;
    row[1] += i;
    rout = put_off(row);
    printf("%d (%p): [%d, %d]\n", i, (void *) rout, rout[0], rout[1]);
}

return 0;
  } 
```

我需要一些关于程序中函数的前 3 行的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:56:14.337

这里有一些解释性说明可以帮助您：

```
static int mymatrix[3][2]; 
```

`mymatrix`是一个 3 行 2 列的二维整数数组。C 使用行优先顺序，这意味着行在内存中一个接一个地存储。static 关键字使其值在函数调用中保持不变（而作用域仍然是本地的）。

```
static int (*rowp)[2] = mymatrix; 
```

这声明了一个指向两个整数数组的指针（即本例中的一行 mymatrix）。将其初始化为 mymatrix 相当于将其初始化为第一行。static 关键字当然和上面的意思一样。

```
int (* const border)[] = mymatrix + NUM_ELEM(mymatrix); 
```

`border`是一个指向整数数组的常量指针（即指针不能更改）。它被初始化为 mymatrix 之外的内存地址（这可能有点不寻常）。具体来说，它指向如果`mymatrix`还有一行将存在的下一行，因此当行指针正好指向该点时，函数将行指针环绕回到填充整个矩阵的第一行。

对于指针、数组括号等的集合，您可以随时尝试[cdecl](http://cdecl.org/)看看它是否可以为您翻译。

# java - sqlite 插入重复条目

> ID：14544443
> 
> 赞同：0
> 
> 时间：2013-01-27T04:30:55.690
> 
> 标签：java, sqlite

我在sqlite数据库中插入数据时遇到问题。我创建了一个包含3列studentid、studentname和studentmarks的表。当我为两个不同的学生插入相同的标记时，它不会插入重复的entery。如何解决它将接受的这个问题学生姓名和学生成绩重复条目。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:35:13.990

由于您有学生证，因此不需要学生姓名。该表应该有一个课程 ID/名称列，以将特定标记与学生和课程相关联。

基本上你想要三个表：

```
Student (ID, Name)
Course (ID, Name)
Mark (studentID, courseID, studentMark) 
```

这被称为`third normal form`。 [http://en.wikipedia.org/wiki/Third_normal_form](http://en.wikipedia.org/wiki/Third_normal_form)

但是，如果您的数据库只需要一个表，那么您仍然必须将课程 ID 和/或名称添加到表中，并确保主键包括学生 ID 和课程 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:16:28.443

检查标记列上是否存在唯一约束/或者如果上述任何一种情况为真，您是否已将标记设置为主键，您应该删除唯一约束/主键以使您的代码按预期工作（在表名上删除索引 index_name） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:37:33.597

您可能已创建主键为 StudentID 的表。在这种情况下，您不能为单个学生标记插入多行。您将需要重新创建表以消除 StudentID 的主键/唯一值等限制

您还应该为`Students`使用主键 ( `Student ID`) 创建一个单独的表，您只在其中插入学生数据（每行代表一个学生）。然后为 Student_marks 创建一个表，其中 Student 与 Marks 的关系是一对多的，这意味着表中的多行属于`Students_Marks`单行`Students`

# ruby-on-rails - Rails Ajax - 通过 javascript 加载部分视图

> ID：14544444
> 
> 赞同：1
> 
> 时间：2013-01-27T04:31:11.017
> 
> 标签：ruby-on-rails, ajax, partial-views

我正在构建一个类似 twitter 的小提要。用户有输入，而您有输入源。

提要实际上是一个帖子列表。每个帖子的视图由`_post.html.haml`部分视图定义。

我有一个 AJAX 发布方法，可以在后端创建一个新帖子。问题是您必须刷新页面才能真正查看出现在提要上的帖子。

我想将 html 附加到提要列。但是，我使用一个局部视图在提要列上创建一个帖子，该视图接受帖子详细信息的局部变量。

部分视图位于服务器端。我怎样才能仍然使用相同的局部视图来获取我创建的新帖子的 html 代码，以便我可以将其附加到提要列而无需刷新页面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:43:43.117

在您发布到的操作中尝试[render(:update) ：](http://apidock.com/rails/ActionView/Helpers/PrototypeHelper/JavaScriptGenerator/GeneratorMethods/replace_html)

```
render(:update) do |page|
  page.replace_html 'divID', :partial => 'your-partial'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:51:20.197

发布代码片段，以便轻松回答。无论如何，你可以这样做。当您使用 get ajax 请求创建新帖子时，它将进入您的控制器操作。在控制器操作中，您可以执行以下操作：

```
 def get_new_post   #This is the controller action called by your ajax
     post = Post.create!(ajax_params)
     render :partial => "post", :locals => {:post => post}
   end 
```

鉴于您将新帖子附加到帖子列表，如下所示：

```
$.get("ajax_request", function(data, status){
 if(status=="success"){  //if your ajax is success
   $("#post-list").append(data)  //Assuming post-list is the div id of list of posts
 }
}); 
```

# python - ImportError：无法导入名称 open_workbook

> ID：14544447
> 
> 赞同：1
> 
> 时间：2013-01-27T04:31:30.200
> 
> 标签：python, excel, importerror, xlrd

我在使用 xlrd 时遇到问题。我正在使用 Fedora 17。

我跑了

```
python run.py 
```

我得到了错误

```
ImportError: cannot import name open_workbook 
```

我已经在谷歌上搜索了很长一段时间，但还没有找到解决方案。它变得有点令人沮丧。

根据我在 Google 上的发现，我认为这与 Python 寻找 xlrd 并找到冲突的文件/文件夹有关。如果是这样的话，我猜这与我安装 xlrd 的方式有关。首先，我相信我下载了一个 rpm 文件（我找不到下载它的确切位置）。在我这样做之后，我的文件运行良好，但由于某种原因，我决定我需要从更有信誉的来源安装 xlrd。所以我去了[http://www.python-excel.org/](http://www.python-excel.org/)并使用那里的链接下载它。它安装得很好，但这是我开始收到导入错误的时候。

如果可能的话，我想从我的电脑上完全卸载 xlrd 并重新开始。这是否有帮助，我不知道。但是，如果有人能指出我正确的方向，那就太好了。

这是我的代码：

```
from xlrd import open_workbook

wb = open_work('week 1/AFROTC SP13 Eagles Sqaudron Weekly Attendance.xls')

LLab = {}
TuesPT = {}
ThursFriPT = {}

for s in wb.sheets():
    if s.name == "LLab":
        for row in range(s.nrows):
            values = []
            for col in range(s.ncols):
                values.append(s.cell(row,col).value)
            if values[0] != "end":
                if values[1] == "0" or values[1] == "1":
                    LLab[values[0]]=int(values[1])

    elif s.name == "TuesPT":
        for row in range(s.nrows):
            values = []
            for col in range(s.ncols):
                values.append(s.cell(row,col).value)
            if values[0] != "end":
                if values[1] == "0" or values[1] == "1":
                    TuesPT[values[0]]=int(values[1])

    elif s.name == "ThursFriPT":
        for row in range(s.nrows):
            values = []
            for col in range(s.ncols):
                values.append(s.cell(row,col).value)
            if values[0] != "end":
                if values[1] == "0" or values[1] == "1":
                    ThursFriPT[values[0]]=int(values[1])

print "LLab"
for key in LLab:
    print key,
    print LLab[key]

print
print

print "TuesPT"
for key in TuesPT:
    print key,
    print TuesPT[key]

print
print

print "ThursFriPT"
for key in ThursFriPT:
    print key,
    print ThursFriPT[key] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:44:11.923

`copy`根据我们在上面评论中的讨论，最终原因是目录本身中有一个名为的文件。这导致了一个问题，因为包中的`formula`模块`xlrd`试图`import copy`导入，而不是内置版本，而是导入本地命名的`copy`，导致错误。

# ember.js - 显示元素集合，隐藏活动元素

> ID：14544453
> 
> 赞同：0
> 
> 时间：2013-01-27T04:32:38.740
> 
> 标签：ember.js

**更新**自从提出这个问题以来，我重新设计了我的 UI，这样我就不再需要这个功能了；但是，为了帮助遇到类似问题的其他人，我将保持开放和积极的态度。

我在模板中列出了一组元素，每个元素都有一个链接，可以在列表右侧打开它。单击一个时，我只想隐藏该元素并在单击另一个时再次显示它。我目前执行此操作的方法是在模型上将属性（活动）设置为 true。这感觉不对，原因有以下三个：

1.  这个属性实际上不是模型模式的一部分，它只是任意的；这使它看起来像是一个控制器问题（请参阅下文了解为什么这不起作用）
2.  我必须首先在所有型号上将 active 设置为 false，迫使我更改另一个路由器的型号，这可能是好是坏，我不确定
3.  在最近的 PeepCode 截屏视频中，他展示了使用`@each.{attribute}`绑定到数组中的属性；这让我觉得必须有类似的事情我可以做（比如`this.set("@each.active", false)`）一举将它们全部设置好

我想在控制器上使用一个方法，但似乎我不能将参数传递给 Handlebars if 语句中的函数。

这是我用来呈现列表的代码：

```
 {{#each note in controller}}
    {{!v-- I was trying to do {{#if isCurrentNote note}} but that seems to be invalid handlebars}}
    {{#unless note.active}}
      <li class="sticky-list-item">
        {{view Ember.TextArea classNames="sticky-note" valueBinding="note.content"}}
        {{#linkTo note note classNames="sticky-permalink"}}
          ∞
        {{/linkTo}}
      </li>
    {{/unless}}
  {{/each}} 
```

以下是路线：

```
App.NotesController = Ember.ArrayController.extend({
  // v-- this is what I was trying to do, but couldn't pass note in the template
  isCurrentNote: function(note){ 
    return this.get("currentNote") == note;
  }.property("currentNote")
});

App.NoteRoute = Ember.Route.extend({
  setupController: function(controller,model){
    this.modelFor("notes").forEach(function(note){
      note.set("active", false);
    });
    model.set("active", true);
  }
}); 
```

就像我说的，我有什么工作，但感觉不对。谁能证实我的怀疑或帮助我放松一下？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:20:48.113

对我来说，这看起来应该主要由`NotesView`存储`NotesController`Note*选择的*

这是小提琴：http: [//jsfiddle.net/colymba/UMkUL/6/](http://jsfiddle.net/colymba/UMkUL/6/)

将`NotesController`保存所有笔记和所选笔记的记录：

```
App.NotesController = Ember.ArrayController.extend({
  content: [],
  selectedNote: null,
  selectNote: function(id){
     var note = this.get('content').findProperty('id', id);
     this.set('selectedNote', note);
  }
}); 
```

观察`NotesView`选择并相应地显示/隐藏列表的元素

```
App.NotesView = Ember.View.extend({
  templateName:  'notes',
  refresh: function(){
    var view = this.$(),
        selection = this.get('controller.selectedNote');
    if (view) {
        view.find('li').show();
        if (selection) view.find('li.note_'+selection.id).hide();
    }
  }.observes('controller.selectedNote')
}); 
```

这是`Note`对象，它是 2 个模板（在列表中或完整显示时）。*ListView*处理事件`click`并将 传递`id`给`NotesController`.

```
App.Note = Ember.Object.extend({
  name: '',
  content: ''
});

App.NoteView = Ember.View.extend({
    templateName: 'note'
});

App.NoteListItemView = Ember.View.extend({
    tagName: 'li',
    templateName: 'noteListItem',
    classNameBindings: ['noteID'],
    noteID: function(){
        return 'note_' + this._context.id;
    }.property(),
    click: function(e){
        this.get('controller').selectNote(this._context.id);
    }
}); 
```

在`NotesView`模板中显示所有内容，如果有`selectedNote`，我们将`Note`再次完整显示：

```
{{#each note in controller}}
  {{#with note}}
    {{view App.NoteListItemView}}
  {{/with}}
{{/each}}

{{#if selectedNote}}
  {{#with selectedNote}}
    {{view App.NoteView}}
  {{/with}}
{{/if}} 
```

把`Routes`它放在一起

```
App.Router.map(function() {
  this.resource('notes', { path: "/notes" });
});

App.IndexRoute = Ember.Route.extend({ 
  enter: function() {
    this.transitionTo('notes');
  }
});
App.NotesRoute = Ember.Route.extend({
  model: function() {
    return [
        App.Note.create({id: 1, name: 'Milk', content: '15% fresh milk'}),
        App.Note.create({id: 2, name: 'Juice', content: 'Orange with pulp'}),
        App.Note.create({id: 3, name: 'Cereals', content: 'Kelloggs Froot Loops'}),
    ];
  },
  setupController: function(controller, model) {
      controller.set('content', model);
  },
  renderTemplate: function(controller, model) {
    this.render('notes', { outlet: 'content' });
  }
}); 
```

# php - PHP 不会在 apache 的虚拟主机中运行

> ID：14544457
> 
> 赞同：2
> 
> 时间：2013-01-27T04:33:47.553
> 
> 标签：php, apache

我无法让 PHP 脚本在我的虚拟主机中运行。它在默认主机上运行良好，但不会在任何其他主机上运行。我已经尝试了所有可以在网上找到的东西。Mac 10.8 服务器。

```
#/private/etc/apache2/extra/httpd-vhosts.conf
Listen 80
Listen 8080
Listen 8010
NameVirtualHost *:80
NameVirtualHost *:8080
NameVirtualHost *:8010

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    DocumentRoot "/Library/Server/Web/Data/Sites/Gradschool"
    ServerName gradschool.local
</VirtualHost>

<VirtualHost *:8080>
    DocumentRoot "/Library/Server/Web/Data/Sites/PMST"
    ServerName PMST.local
</VirtualHost>

<VirtualHost *:8010>
    DocumentRoot /library/server/web/data/sites/test
    ServerName test.local
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:05:54.317

可以为虚拟主机禁用 PHP。尝试使用“php_admin_flag engine on”启用它：

```
<VirtualHost *:80>
    DocumentRoot "/Library/Server/Web/Data/Sites/Gradschool"
    ServerName gradschool.local

    <Directory /Library/Server/Web/Data/Sites/Gradschool>
            php_admin_flag engine on
            AllowOverride AuthConfig FileInfo
            Order allow,deny
            allow from all
    </Directory>
</VirtualHost> 
```

# javascript - 使用正则表达式匹配路径的中间？

> ID：14544458
> 
> 赞同：1
> 
> 时间：2013-01-27T04:33:55.990
> 
> 标签：javascript, regex

我有一个 var`showNo`是目录开头的输入。

例子：`var showNo = "101B"`

之后`showNo`是其他部门设置的网络上包含空格和其他垃圾的字符。

例子：`/101B A Trip to the Beach/`

我需要在这个里面使用子目录：

例子：`/101B A Trip to the Beach/assets/tools/`

有没有办法使用正则表达式和变量来避免扫描所有目录并尝试匹配前 4 个字符的子字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:06:09.953

```
var directory = str.match(/\/101B[^\/]+\//)[0]; 
```

将匹配以您的变量开头的第一个目录名称。

更重要的是，这个想法如下：

1.  匹配以目录斜杠开头的前四个字符串文字。

2.  然后匹配任何**不是**目录斜杠的字符。“不是”由 ^ 表示。

3.  然后再重复 2 次 0 次或更多次。

4.  最后匹配目录斜线。

我怀疑您在使用“任何不是”字符类时遇到了麻烦。它有时很棘手，但一旦你得到它，它就是一个非常有用的捷径。

- 编辑 -

实际上，在重新阅读时，我怀疑您在使用正则表达式中的变量时遇到了麻烦，对吗？一旦您知道如何操作，这也很容易。

您可以先将其构造为字符串：

```
var regex_string = "/" + showNo + "[^/]+/"; 
```

然后将其“编译”成一个您可以正常使用的正则表达式：

```
var regex_dir = RegExp(regex_string);

var directory = str.match(regex_dir); 
```

希望这可以帮助！

# ruby - 从哈希数组中返回唯一的值数组

> ID：14544466
> 
> 赞同：0
> 
> 时间：2013-01-27T04:35:19.720
> 
> 标签：ruby

我有一个哈希数组`@contacts`，每个哈希都有以下键：

```
:full_name
:city
:state
:email 
```

我将如何遍历数组以`:city`唯一地返回值？下面是我最好的尝试

```
@contacts.uniq {|hash| hash[:city]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:38:00.377

```
@contacts.map { |k| k[:city] }.uniq 
```

# xml - 使用 XSL Key 根据属性通配符查找唯一元素

> ID：14544467
> 
> 赞同：1
> 
> 时间：2013-01-27T04:35:23.643
> 
> 标签：xml, xslt, indexing, key

XSLT 2 是首选，我希望使这更容易。

给定一个类似于

```
<doc xmlns:bob="bob.com">
    <element bob:name="fred" bob:occupation="Dr">Stuff</element>
    <element bob:name="Bill" bob:occupation="Dr" bob:birthMonth="Jan"/>
    <element>Kill Me</element>
    <element bob:name="fred" bob:occupation="Dr">different Stuff</element>
</doc> 
```

我想拥有基于 bob 命名空间中所有属性的所有唯一元素。这是一个有代表性的样本，但我会有更深的嵌套，所以我希望它遍历树

```
*[@bob:*] and get the unique set of those. 
```

希望的输出看起来像

```
<doc xmlns:bob="bob.com">
    <element bob:name="fred" bob:occupation="Dr">Stuff</element>
    <element bob:name="Bill" bob:occupation="Dr" bob:birthMonth="Jan"/>
</doc> 
```

其中一个元素因没有任何 @bob:* 属性而被删除，另一个元素因仅基于属性而与第一个元素重复而被删除。

我试图使用钥匙，但似乎做得不对

```
<xsl:key name="BobAttributes" match="//*" use="./@bob:*" /> 
```

我还尝试创建一个连接所有 @bob 属性的函数，但这似乎也没有达到我的预期。

```
<xsl:key name="BobAttributes" match="//*" use="functx:AllBobConcat(.)" />

 <xsl:function name="functx:AllBobConcat" as="xs:string*" 
    xmlns:functx="http://www.functx.com" >
    <xsl:param name="nodes" as="node()*"/> 

    <xsl:for-each select="$nodes/@bob:*">
        <xsl:value-of select="local-name(.)"/>
        <xsl:value-of select="."/>
    </xsl:for-each>
</xsl:function> 
```

在这两种情况下，我都使用“简单”XSL 来过滤掉唯一的 XSL，也许我在这里搞砸了？此处添加的变量用于尝试和调试。

```
 <xsl:template match="*[@ism:*]" priority="100">
        <xsl:variable name="concat">
            <xsl:value-of select="functx:AllBobConcat(.)"/>
        </xsl:variable>

        <xsl:variable name="myID">
            <xsl:value-of select="generate-id() "/>
        </xsl:variable>

        <xsl:variable name="Keylookup">
            <xsl:value-of select="key('BobAttributes', $concat)"/>
        </xsl:variable>
        <xsl:value-of select="concat($concat, $Keylookup, $myID)"/>
        <xsl:if test="generate-id() = generate-id(key('BobAttributes', $concat)[1])">

            <xsl:apply-templates select="." mode="copy"/>
        </xsl:if>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="@*|node()" mode="copy">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template> 
```

期待听到我忽略了什么简单的事情，或者我应该采取完全不同的酷方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:18:09.343

我会像您一样定义函数 AllBobConcat，然后将其用作分组键：

```
<xsl:for-each-group select="element" group-by="f:AllBobConcat(.)">
  <xsl:if test="current-grouping-key() != ''">
    <xsl:copy-of select="current-group()[1]"/>
  </xsl:if>
</xsl:for-each-group> 
```

除了 AllBobConcat 需要确保属性处于规范顺序之外，因此：

```
<xsl:function name="f:AllBobConcat" as="xs:string">
    <xsl:param name="node" as="element(element)"/> 
    <xsl:value-of>
      <xsl:for-each select="$node/@bob:*">
        <xsl:sort select="local-name()"/>
        <xsl:value-of select="local-name(.)"/>
        <xsl:value-of select="'='"/>
        <xsl:value-of select="."/>
        <xsl:value-of select="' '"/>
      </xsl:for-each>
    </xsl:value-of>
</xsl:function> 
```

此外，您不应该将您的函数放在属于其他人的命名空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:25:51.417

几乎可以肯定有更好的方法，但是 FWIW，这是一个蛮力、程序性惊人、效率极低的解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
    version="1.0"
    xmlns:bob="bob.com"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    >

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="element">
    <xsl:variable name="this" select="."/>
    <xsl:variable name="match">
      <xsl:for-each select="preceding::element">
        <xsl:variable name="diff">
          <xsl:variable name="that" select="."/>
          <xsl:for-each select="$this/@bob:*">
            <xsl:variable name="att-name" select="name()"/>
            <xsl:variable name="att-val" select="."/>
            <xsl:for-each select="$that/@bob:*[name()=$att-name]">
              <xsl:if test=". != $att-val">
                DIFF
              </xsl:if>
            </xsl:for-each>
          </xsl:for-each>
        </xsl:variable>
        <xsl:if test="$diff = ''">MATCH</xsl:if>
      </xsl:for-each>
    </xsl:variable>

    <xsl:if test="$match = ''">
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

对于每个元素，循环遍历所有前面的元素。对于每个属性，检查值是否相等，如果不相等，则引发 DIFF 标志。任何没有引发 DIFF 标志的前面元素都会引发 MATCH 标志。然后仅在未引发 MATCH 标志时才通过元素。

感觉就像我在用汇编语言编程。现在我们将坐下来等待迈克尔给我们他的单线使用`deep-equal`或类似的东西。

# android - 尝试将 Android 中的 Intent 设置为选项卡

> ID：14544468
> 
> 赞同：1
> 
> 时间：2013-01-27T04:35:31.180
> 
> 标签：android

我正在开发我的第一个 Android 项目，我正在尝试将一个特定设置`intent`到一个选项卡中，我正面临一些严重的问题。

下面是我创建每个选项卡的代码：

```
private void setupTab(final View view, final String tag, int imageId) {
    View tabview = createTabView(mTabHost.getContext(), tag, imageId);

    Intent intent = new Intent(this, MyNewActivity.class);
    TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(intent);

    mTabHost.addTab(setContent);
} 
```

上述函数运行后，我不断看到以下堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.tabs.CustomTabActivity}: java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'?
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
```

但是，我阅读了以下网站：

[创建意图 onClick 按钮但活动接收器的选项卡主机消失的 TabActivity](https://stackoverflow.com/questions/10437181/tabactivity-that-create-an-intent-onclick-button-but-the-tabhost-of-activity-rec)

[在 Android 中向 TabActivity 添加意图](https://stackoverflow.com/questions/8243078/adding-an-intent-to-a-tabactivity-in-android)

从上面看来我的代码是正确的？有什么我想念的吗？

**编辑**

取得了一些进展...

以前我的 TabHost正在扩展，`Activity`但现在我正在扩展`TabActivity`并且它正在通过......但是我的在线功能`Intent`失败了`onCreate``setContentView(R.layout.mylayout);`

出现错误：

AdapterView 不支持 addView(View, LayoutParams)

为此，我阅读了以下内容：

[http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)

是用同样的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:33:57.263

使用上面的链接（[http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)），我能够实现它。

# html - 使用css添加按钮按下效果

> ID：14544469
> 
> 赞同：2
> 
> 时间：2013-01-27T04:35:55.207
> 
> 标签：html, css

我正在尝试将按钮按下效果添加到带有图像的按钮。这是CSS

```
input.happy {
   background-image url(/img/happy.png)
   background-color transparent
   background-repeat no-repeat
   border none
   width 64px
   height 64px
   margin 10px
  cursor pointer
  border-radius:8px
  -moz-border-radius:8px
  -webkit-border-radius:8px
  box-shadow: 0px 3px 5px #000
  -moz-box-shadow: 0px 3px 5px #000
  -webkit-box-shadow: 0px 3px 5px #000
}

input.happy:hover { 
  position:relative
  top 3px
  color #fqq
  box-shadow none
  -moz-box-shadow none
  -webkit-box-shadow none
} 
```

效果仅在悬停时显示。如何更改它以便在单击时显示它。我添加了类似的东西

```
 .pressed { 
      position:relative
      top 3px
      color #fqq
      box-shadow none
      -moz-box-shadow none
      -webkit-box-shadow none
    } 
```

并将类更改为 .pressed on click 。但它不起作用。有什么建议么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T04:41:45.857

```
input.happy:active {
     background-color:red
} 
```

# asp.net - 从 DBML 读取值（具有存储过程）

> ID：14544473
> 
> 赞同：0
> 
> 时间：2013-01-27T04:36:26.920
> 
> 标签：asp.net, asp.net-mvc

我有一个 dbml，它的存储过程被拖走了。我有 EmployeeModel 类，它具有 get 和 set 属性。

我有一个接口 IEmployee 和一个具有方法实现的 Repository Employee Repository。请参考代码。在存储过程 GetRoles 我只有 SELECT * FROM ROLE 。

在存储库中如何遍历结果集。我可以在 dbml 设计器文件中将 ISingleResult 更改为 IMultipleResult 吗？

EmployeeModel.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcWebsite.Models
{
    public class EmployeeModel
    {
        public int RoleId { get; set; }
        public string RoleName { get; set; }
        public string Description { get; set; }
        public string TaskMark { get; set; }
        public int RoleFlag { get; set; }
    }
} 
```

员工：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MvcWebsite.Models;

namespace MvcWebsite.DAL
{
    public interface IEmployees
    {
        IList<EmployeeModel> ListAll();
        // void Save(EmployeeModel employ);
    }
} 
```

EmployeeRepository.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using MvcWebsite.Models;
using System.Data.Linq;

namespace MvcWebsite.DAL
{
    public class EmployeeRepository:IEmployees
    {

        private DataDataContext _dataContext;

        public EmployeeRepository()
        {
            _dataContext = new DataDataContext();
        }

        public IList<EmployeeModel> ListAll()
        {
            //IMultipleResults result =_dataContext.GetRoleDetails();
            //var Emps = result.GetResult(EmployeeModel);
            List<EmployeeModel> emp = _dataContext.GetRoleDetails();
            // foreach (GetRoleDetailsResult role in Emps)
            // {
            // role.Description=Emps.

            // }
            return Emps.ToList();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:47:40.060

您可以循环遍历结果集，如下所示：

```
 List<EmployeeModel> employeeModels = new List<EmployeeModel>();
        foreach (EmployeeModel employeeModel in _dataContext.GetRoleDetails())
        {
            employeeModels.Add(employeeModel);
        } 
```

或者您可以使用 System.Linq.Enumerable 类 ToList<> 方法，如下所示：

```
List<Product> products = context.GetProducts().ToList<Product>(); 
```

当存储过程返回多个结果集时使用 IMultipleResults。但是，当您将此类过程交给设计器时，它不会生成 IMultipleResults。为此，您可以更改设计器生成的代码以使用 IMultipleResults，如下所示：

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.GetCustomerAndProducts")]
[ResultType(typeof(Customer))]
[ResultType(typeof(Product))]
public IMultipleResults GetCustomerAndProducts()
{
    IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())));
    return ((IMultipleResults)(result.ReturnValue));
} 
```

但是，当您在设计器中进行任何更改时，它会覆盖您的修改，因为它会重新生成代码。为避免这种情况，您可以使用部分类。

或者你也可以使用 SqlMetal 工具。它是一个命令行工具，可为 .NET Framework 的 LINQ to SQL 组件生成代码和映射。此工具生成 IMultipleResults。您可以在此处获取此工具的详细信息：

[http://msdn.microsoft.com/en-us/library/bb386987.aspx](http://msdn.microsoft.com/en-us/library/bb386987.aspx)

编辑：

无论您在 ASP.Net Mvc 或 WinForms 或任何其他表示层中工作，存储库功能都是相同的。

您可以将存储库功能更改为以下内容：

```
public List<EmployeeModel> ListAll()
{
    return _dataContext.GetRoleDetails().ToList<EmployeeModel>();
} 
```

或者：

```
public List<EmployeeModel> ListAll()
{
    List<EmployeeModel> employeeModels = new List<EmployeeModel>();
    foreach (EmployeeModel employeeModel in _dataContext.GetRoleDetails())
    {
        employeeModels.Add(employeeModel);
    }

    return employeeModels;
} 
```

# jquery - 如何在这个 jQuery 中创建 3 秒延迟？

> ID：14544476
> 
> 赞同：-5
> 
> 时间：2013-01-27T04:37:33.123
> 
> 标签：jquery

```
jQuery.noConflict();

jQuery(document).ready(function() {

    // milliseconds
    var intervalTime = 75,

    div = jQuery(".animate"), st = div.text(), timer, count = 0, total = st.length;
    div.html("").css("visibility", "visible");

    timer = setInterval(showLetters, intervalTime);

    function showLetters() {

        if(count < total) {

            div.html(div.text().split("_").join("") + st.charAt(count) + "");
            count++;

        }
        else {

            clearInterval(timer);

        }

    }

}); 
```

* * *

```
<div class="animate">Some text here.</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:54:21.610

要“等待”在 Javascript 中做某事，您可以随时使用

```
setTimeout(callback, intervalInMillis) 
```

因此，如果`showLetters()`您想等待 3 秒钟，则需要

```
setTimeout(showLetters(), 3000); 
```

希望有帮助！

# javascript - 是否存在从 HTML 属性名称到 DOM 属性名称的映射？

> ID：14544481
> 
> 赞同：2
> 
> 时间：2013-01-27T04:38:25.087
> 
> 标签：javascript, html, dom

在 HTML 中

```
<td colspan=3 style='background-color:pink;' >hello world</td> 
```

但在 Javascript / DOM

```
var td = document.createElement('td');
td.colSpan = 3;
td.style.backgroundColor = 'pink'; 
```

是否存在 HTML 属性和样式到 Javascript/DOM 属性和样式的映射？

了解 CSS 样式的 camelBack

有一些 HTML 规范，例如 ，`colspan=3`并用 Javascript 实现它们。所以需要 HTML 属性名和 DOM 属性名之间的映射。

* * *

好的，这是异常属性的映射。那些具有 1::1 映射和函数的将被省略。

```
html2dom = {
  接受字符集：'接受字符集'，
  访问密钥：'访问密钥'，
  bgcolor: 'bgColor',
  细胞指数：'细胞指数'，
  细胞填充：'细胞填充'，
  细胞间距：'细胞间距'，
  choff: 'chOff',
  类：'类名'，
  代码库：'代码库'，
  代码类型：'代码类型'，
  colspan: 'colSpan',
  日期时间：'日期时间'，
  检查：'defaultChecked'，
  选择：'defaultSelected'，
  值：'默认值'，
  框架边框：'框架边框'，
  httpequiv: 'httpEquiv',
  longdesc: 'longDesc',
  marginheight: 'marginHeight',
  边距宽度：'边距宽度'，
  最大长度：'最大长度'，
  nohref: 'noHref',
  noresize: 'noResize',
  noshade: '无阴影',
  nowrap: 'noWrap',
  只读：'只读'，
  行索引：'行索引'，
  行跨度：'行跨度'，
  sectionrowindex: 'sectionRowIndex',
  selectedindex：'selectedIndex'，
  tabindex: 'tabIndex',
  tbodies: 'tBodies',
  tfoot: 'tfoot',
  头：'头'，
  网址：'网址'，
  使用地图：'使用地图'，
  valign: 'vAlign',
  值类型：'值类型'};

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:41:57.257

你只需要骆驼式的属性。[以下是 jQuery 的做法](https://github.com/jquery/jquery/blob/master/src/core.js#L518)：

```
function camelCase (prop) {
    return prop.replace(/-([a-z])/gi, function (all, letter) {
        return letter.toUpperCase();
    });
} 
```

然后你可以调用这个函数：

```
camelCase('background-color') // backgroundColor 
```

或直接在您的代码中：

```
td.style[ camelCase('background-color') ] = 'pink'; 
```

* * *

HTML 属性名称[通常遵循相同的模式](http://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/idl-definitions.html)，但也有一些例外。您最好的选择是在浏览器本身中检查它。每当您有要使用的新属性名称时，只需在该元素上调用以下命令：

```
console.log( element.attributes ); 
```

您将获得该元素可用的所有属性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T04:59:48.433

为了方便和一致性，[DOM IDL](http://www.w3.org/TR/REC-DOM-Level-1/idl-definitions.html)以不同方式公开不同的 HTML 属性。也就是说，`COLSPAN`->`colSpan`和`CLASS`-> `className`。（请记住，HTML 属性*不*区分大小写，因为它是大小写规范的，而 DOM 属性是。）

由于所有标准 HTML 属性*都*列在适当的 DOM IDL 中（这是权威来源），因此可以根据提供的定义生成映射。对于特定于供应商或尚未编纂的属性，可能需要查阅其他文档。

[1.1.3 命名约定](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-45A944CB)说：

> 虽然属性和方法名称应该简短、信息丰富、内部一致并且为类似 API 的用户所熟悉，但这些名称也不应该与 DOM 实现支持的遗留 API 中的名称发生冲突。此外，OMG IDL 和 ECMAScript 在区分来自不同名称空间的名称的能力方面都有很大的局限性，这使得难以避免与短而熟悉的名称发生命名冲突。因此，DOM 名称往往很长且具有描述性，以便在所有环境中都是唯一的。

也就是说，虽然 DOM 试图与 HTML（和 XML）很好地配对，但它有利于内部一致性和普遍使用。

* * *

问题的原始前提不正确，因为`background-color` *不是*HTML 属性。它是一个在 DOM 中公开的 CSS 属性`elm.style.backgroundColor`（参见 Jospehn Siber 的映射答案）。

因为`background-color`它*不是*HTML 属性，*所以无法*与 HTML 属性（例如`colspan`或）进行比较`class`。

# c# - 上传整个文件夹内容的选项

> ID：14544484
> 
> 赞同：3
> 
> 时间：2013-01-27T04:38:58.803
> 
> 标签：c#, asp.net, asp.net-mvc-3, html, asp.net-mvc-4

试图找出在 HTML5 / .NET MVC-4 项目中上传文件夹全部内容的最佳方式。看起来只有谷歌浏览器支持 HTML5 拖放文件上传功能。我可以使用另一个插件来允许用户上传文件夹的全部内容吗？

# c++ - 如何在opencv中找到一条线的端点？

> ID：14544489
> 
> 赞同：0
> 
> 时间：2013-01-27T04:40:02.610
> 
> 标签：c++, opencv, line, point

我试图弄清楚如何找到一条线的终点。假设我有一条从坐标系出发的线，并`(0,0) to (2,2)`使用概率霍夫线变换看到这条线，我如何找到这两个点？`cartesian``opencv`

我知道霍夫线变换通过匹配点来找到线，但是我如何使用该线并找到构成该线的两个点？

提供此功能的库中是否已内置任何功能？

我`OpenCV 2.4.3`正在`C++`使用

```
VS Studio 2010 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:43:38.153

如何使用[`HoughLinesP`](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=houghlinesp#houghlinesp)：

> 线 - 线的输出向量。每条线由一个 4 元素向量 (x1,y1,x2,y2) 表示，其中 (x1,y1) 和 (x2,y2) 是每个检测到的线段的终点。

甚至还有使用示例。

# android - 在 onClick(View v) 中从 onClick(View v) 设置 TextViews？

> ID：14544490
> 
> 赞同：0
> 
> 时间：2013-01-27T04:40:13.717
> 
> 标签：android, android-listview, adapter

这条线不会设置，`holder.t1.setText(NewItem);`

如果我将它移到 parent `onClick`，使用硬编码字符串（用于测试）它会。

请记住，这是在 .getView 方法中`ArrayAdapter`。我正在尝试将 setText 设置为`ListView`行。

编辑：

扩展，完成 getView() -- 按要求（没有时间编辑，稍后会，抱歉！）

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {

        convertView = inflater.inflate(R.layout.commentlayout, parent,
                false);
        holder = new ViewHolder();
        holder.t1 = (TextView) convertView.findViewById(R.id.labelComment);
        holder.t2 = (TextView) convertView.findViewById(R.id.labelDate);
        holder.t3 = (TextView) convertView.findViewById(R.id.labelUser);
        holder.t3.setTypeface(tf);
        holder.t4 = (TextView) convertView
                .findViewById(R.id.labelHelpfulCount);
        holder.t5 = (TextView) convertView
                .findViewById(R.id.labelCommentCount);
        holder.ib1 = (ImageView) convertView
                .findViewById(R.id.labelChatIcon);
        holder.ib2 = (ImageView) convertView
                .findViewById(R.id.labelCommentFlag);
        holder.rb1 = (RatingBar) convertView
                .findViewById(R.id.myCommentsRatingBarSmall);
        holder.b1 = (Button) convertView.findViewById(R.id.bReview1);
        holder.b2 = (Button) convertView.findViewById(R.id.bReview2);
        holder.b3 = (Button) convertView.findViewById(R.id.bReview3);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
        convertView.setOnCreateContextMenuListener(null);
    }

    ReviewObject ro = getItem(position);
    final String item = ro.item;
    final String review = ro.review;
    final String username = ro.username;
    Long date = Long.valueOf(ro.date);
    String rating = ro.ratings;
    String voteCount = ro.voteCount;
    String chatcount = ro.chatCount;
    String cat = ro.cat;

    final ArrayList<String> passing = new ArrayList<String>();
    passing.add(item);
    passing.add(review);
    passing.add(cat);
    passing.add(username);

    String time = "";
    time = DateConvert.dateConvert(Long.valueOf(date));

    holder.t1.setText(review);
    holder.t2.setText(time);
    holder.t3.setText(username);
    holder.t4.setText(voteCount);
    holder.t5.setText(chatcount);
    holder.ib1.setImageResource(R.drawable.updown);
    holder.ib2.setImageResource(R.drawable.comment);
    holder.rb1.setRating(Float.valueOf(rating));

    if (rating.equals("0")) {
        holder.rb1.setEnabled(false);
    }

    holder.b1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            String ReviewUser = holder.t3.getText().toString();
            String ReviewWords = holder.t1.getText().toString();

            Intent intent = new Intent(getContext(), Comments.class);
            intent.putExtra("comment", ReviewWords);
            intent.putExtra("user", ReviewUser);
            intent.putExtra("item", item);
            getContext().startActivity(intent);

        }
    });

    if (!Rateit.username.equals(username)) {

        holder.b2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                AlertDialog.Builder alertbox = new AlertDialog.Builder(getContext());
                alertbox.setMessage("Did you like this?");
                alertbox.setNegativeButton("Vote Up",
                        new DialogInterface.OnClickListener() {

                            @SuppressWarnings("unchecked")
                            public void onClick(DialogInterface arg0,
                                    int arg1) {

                                String VoteTally = holder.t4.getText()
                                        .toString();
                                int ReviewCountInt = Integer
                                        .valueOf(VoteTally) + 1;
                                VoteTally = String.valueOf(ReviewCountInt);
                                holder.t4.setText(VoteTally);

                                new HelpfulTask().execute(passing);
                            }
                        });

                alertbox.setPositiveButton("Vote Down",
                        new DialogInterface.OnClickListener() {

                            @SuppressWarnings("unchecked")
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                String VoteTally = holder.t4.getText()
                                        .toString();
                                int ReviewCountInt = Integer
                                        .valueOf(VoteTally) - 1;
                                VoteTally = String.valueOf(ReviewCountInt);
                                holder.t4.setText(VoteTally);

                                new UnHelpfulTask().execute(passing);

                            }
                        });

                alertbox.setNeutralButton("Report Spam",
                        new DialogInterface.OnClickListener() {

                            @SuppressWarnings("unchecked")
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                new SpamTask().execute(passing);

                            }
                        });

                alertbox.show();

            }

        });

    } else {
        holder.b2.setText("Edit");
        holder.b2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                final Dialog dialog = new Dialog(getContext());
                dialog.setContentView(R.layout.editreview);
                dialog.setTitle("Edit Review");
                dialog.show();

                final EditText etEdit = (EditText) dialog
                        .findViewById(R.id.etEditReview);

                etEdit.setText(review);

                Button bInsert = (Button) dialog.findViewById(R.id.bInsert);
                bInsert.setOnClickListener(new OnClickListener() {

                    @SuppressWarnings("unchecked")
                    public void onClick(View v) {

                        NewItem = etEdit.getText().toString();

                        if (NewItem.equals("")) {

                            Toast.makeText(getContext(),
                                    "Please add something first.",
                                    Toast.LENGTH_SHORT).show();

                        } else {

                            holder.t1.setText(NewItem);
                            passing.add(NewItem);

                            dialog.dismiss();

                            new EditCommentTask().execute(passing);

                        }

                    }
                });

            }
        });

    }

    if (!Rateit.username.equals(username)) {

        holder.b3.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent i = new Intent(getContext(), OtherProfile.class);
                i.putExtra("userprofile", username);
                getContext().startActivity(i);

            }
        });

    } else {
        holder.b3.setText("Delete");
        holder.b3.setOnClickListener(new OnClickListener() {
            @SuppressWarnings("unchecked")
            public void onClick(View v) {

                AlertDialog.Builder alertbox = new AlertDialog.Builder(
                        getContext());
                alertbox.setMessage("Are you sure you want to delete your review?");
                alertbox.setNegativeButton("No",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface arg0,
                                    int arg1) {

                            }
                        });

                alertbox.setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int id) {

                                new DeleteReviewTask().execute(passing);

                            }
                        });

                alertbox.show();

            }
        });

    }

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:46:46.460

根据您在上述评论中所说的，这是预期的功能。自从，

> 除了对话框确实关闭，我得到了祝酒词并且任务正确运行。

这被编码到您的 onClick() 中：

```
bInsert.setOnClickListener(new OnClickListener() {

                @SuppressWarnings("unchecked")
                public void onClick(View v) {

                    NewItem = etEdit.getText().toString();

                    if (NewItem.equals("")) {

                        Toast.makeText(getContext(),
                                "Please add something first.",
                                Toast.LENGTH_SHORT).show();
                    } else {

                        holder.t1.setText(NewItem);
                        passing.add(NewItem);

                        dialog.dismiss();

                        new EditCommentTask().execute(passing);
                    }
                }
            }); 
```

具体来说，这是执行：

```
 if (NewItem.equals("")) {
   Toast.makeText(getContext(),
      "Please add something first.",
      Toast.LENGTH_SHORT).show();
 } 
```

所以我假设你的问题是`NewItem`，我从来没有看到你实际初始化它的位置，但我假设它是`.equals("")`因为它正在执行。尝试将 a`Log.d`或`println()`正好放在该线下方`NewItem = etEdit.getText().toString();`，看看此时的值`NewItem`是多少。

# macos - IBOutlet 未声明

> ID：14544494
> 
> 赞同：-1
> 
> 时间：2013-01-27T04:41:19.923
> 
> 标签：macos, interface-builder, nstextfield, iboutlet

我正在编写一个 Mac 应用程序，并且我有一个要更新其内容的文本字段。在 Interface Builder 中，我将文本字段控制拖动到 AppDelegate.h 中，这创建了行

```
@property (unsafe_unretained) IBOutlet NSTextField *cStatus; 
```

现在在我的 AppDelegate.m 中，我想在以下函数中编辑状态：

```
static void Handle_DeviceMatchingCallback(void *inContext, IOReturn inResult, void *inSender, IOHIDDeviceRef inIOHIDDeviceRef){
   NSLog(@"\nDevice added: %p\nDevice count: %ld", (void*)inIOHIDDeviceRef, USBDeviceCount(inSender));
   [cStatus setString:@"Connected"];
} 
```

但这给了我错误“使用未声明的变量 cStatus”。一般来说，我对 XCode、InterfaceBuilder 和 Objective C 很陌生，如何引用这个文本字段？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:00:17.957

cStatus 是一个属性，所以尝试：

```
[self.cStatus setString:@"Connected"]; 
```

# android - ORMLite 并将现有的持久化实体添加到外部字段集合

> ID：14544499
> 
> 赞同：3
> 
> 时间：2013-01-27T04:42:09.357
> 
> 标签：android, ormlite, foreign-collection

我有一个`Language`带有 ForeignCollection 实体的`Country`实体：

```
@ForeignCollectionField(eager = false, foreignFieldName = "language")
public ForeignCollection<Country> countries; 
```

我在我的数据库中创建了一个国家，比如说代表法国。后来，我通过查询它的 id 来检索它，我想将它添加到语言的外国国家集合中：

```
Country country = dbHelper.getCountryDao().queryForId(countryId);
if (country != null) {
    country.language = language;    
    ForeignCollection<Country> countries = language.countries;
    if (countries == null) {
        countries = dbHelper.getLanguageDao().getEmptyForeignCollection("countries");
    }
    countries.add(country); // Illegal state exception thrown here
    language.countries = countries;
    dbHelper.getLanguageDao().create(language);
} 
```

但是，标记的行`countries.add(country)`会导致抛出非法状态异常：

> 01-27 13:39:19.112: E/AndroidRuntime(15614): 原因: java.sql.SQLException: 插入数据库失败: INSERT INTO `countries`( `identifier`, `name`, `language_id`) VALUES (?,?,?) 01-27 13:39 :19.112: E/AndroidRuntime(15614): 在 com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)

为什么会`.add()`触发重新创建存在于数据库和内部 DAO 中的实体？而我应该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:01:57.967

> 为什么 .add() 会触发重新创建存在于数据库和内部 DAO 中的实体？

它这样做是因为它就是这样设计的。引用[javadocs`EagerForeignCollection#add()`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/BaseForeignCollection.html#add%28T%29)：

> 向集合中添加一个元素。这也会将该项目添加到关联的数据库表中。

该国家/地区已存在于表中，因此引发异常。您可以通过执行以下操作将现有国家/地区与语言相关联：

```
country.language = language;
dbHelper.getCountryDao().update(country); 
```

然后，如果您想用您所做的语言刷新您渴望的收藏：

```
dbHelper.getLanguageDao().refresh(language); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T23:02:31.693

Right now I get an SQL Exception, if I add an already created element to the collection, because of the `dao.create()` in the `add()` of the collection realization. But for a quite some time we got a `dao.createOrUpdate()` method, which is better for this situation because it would do an update or simply nothing if we have an already created entity in collection. Is it possible to change this in the source code?

By the way there is an already done and closed ticket ([#31](http://sourceforge.net/p/ormlite/feature-requests/31/)) with changes that should automatically set the parent field value on the collection element. But even in the 4.45 I still have to do this manually. Did I miss something or probably do something wrong?

# python-2.7 - 如何使用 GdkPixbuf 截屏？

> ID：14544500
> 
> 赞同：3
> 
> 时间：2013-01-27T04:42:28.860
> 
> 标签：python-2.7, gtk, gtk3, pygobject

使用 PyGTK，我曾经能够使用`gtk.gdk.pixbuf.get_from_drawable`.

我似乎无法弄清楚如何使用 PyGObject 和 GdkPixbuf 做到这一点。我已经尝试过`get_from_drawable`，`get_from_window`但都不能在 PyGObject 中工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:17:48.993

使用[`Gtk.OffscreenWindow`](http://developer.gnome.org/gtk3/stable/GtkOffscreenWindow.html)：

```
offscreen_window = Gtk.OffscreenWindow()
offscreen_window.add(widget_that_needs_screenshotting)
pixbuf = offscreen_window.get_pixbuf() 
```

# c - execvp 实际上做了什么？

> ID：14544501
> 
> 赞同：1
> 
> 时间：2013-01-27T04:42:36.473
> 
> 标签：c, shell, exec, execvp

> **可能重复：**
> [编写 shell - 如何执行命令](https://stackoverflow.com/questions/14473751/writing-a-shell-how-to-execute-commands)

我的任务是用 C 编写一个 shell。到目前为止，我知道 execvp 将尝试在 arg1 中以 arg2 作为参数运行程序。现在看来，这样做

```
execvp ("ls", args); //assume args is {"ls", ">", "awd.txt"} 
```

不等于在控制台中输入这个

```
ls > awd.txt 
```

我意识到我需要使用 freopen 来获得相同的结果，但我很好奇 execvp 在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:45:10.503

`exec`函数族最终是一个系统调用。系统调用直接进入内核，通常执行只有内核才能执行的非常特定的服务。

另一方面，重定向是一个 shell 特性。

因此，当在 shell 中键入`ls > awd.txt`一个时，shell 首先执行 a `fork(2)`，然后关闭子项中的标准输出，然后`awd.txt`在文件描述符上打开一个，以便它成为新的标准输出。

然后，并且只有这样，shell 才会进行`exec-`家庭系统调用。

在您的情况下，您只需将字符串传递给 exec 系统调用，`>`然后`awd.txt`从那里传递给`ls`. 顺便说一句，请确保使用空指针终止 execvp arg 数组。

* * *

^(注意：如您所见，重定向运算符永远不会被执行的程序看到。在 Unix 之前，每个程序都必须根据选项将输出定向到文件。更多琐事：大多数程序从不知道它们被重定向，但具有讽刺意味的是，`ls` *它确实*检查它的输出是否是一个 tty，如果是，它会执行多列格式化输出的事情。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:46:10.193

它`ls`使用 2 个参数执行：`>`和`awd.txt`. 相当于运行：

```
'ls' '>' 'awd.txt' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:53:20.830

您可以将命令直接传递给 shell：

```
char * const args[] = { "sh", "-c", "ls > awd.txt", NULL};
execvp("/bin/sh", args); 
```

但这似乎不是一个好主意。

# android - 如何将 GLSurfaceView 添加到 Android 地图 v2 标记 InfoWindow

> ID：14544502
> 
> 赞同：2
> 
> 时间：2013-01-27T04:42:36.890
> 
> 标签：android, glsurfaceview, android-maps-v2

对于在 Android 地图 v2 标记信息窗口中可以使用哪些类型的自定义视图有任何限制吗？虽然我已经能够添加许多类型的视图，但我无法添加 GLSurfaceView。

Android 地图 v2 允许在标记的信息窗口中自定义视图。我知道 GLSurfaceView 不会以任何方式进行交互，正如 Android 开发网站所述：

> 绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用`View.draw(Canvas)`）

但我认为它至少会在调用 InfoWindow.getInfoContents() 时将 GLSurfaceView 捕获为图像，但 InfoWindow 仅在 GLSurfaceView 所在的位置是黑色的。

有任何想法吗？

# c# - 可以查找 Json.net 中不存在的 Key

> ID：14544503
> 
> 赞同：22
> 
> 时间：2013-01-27T04:42:38.613
> 
> 标签：c#, json, json.net

我收到了几种不同的格式，但我不知道如何处理它们，因为当我尝试按键查找时 json.net 崩溃。我希望它只会返回null。

```
foreach (var item in jsonObj)
{
    var msg = item.Value["Msg"];
    if (msg != null)
    {
       txtErrors.Text += msg + Environment.NewLine;
    }
} 
```

// 格式一

```
{[UserNotFound, {
  "SeverityType": 3,
  "ValidationType": 2,
  "Msg": "Email Not Found"
}]} 
```

我的代码有效。

// 格式 2（因为我没有在服务器端捕获异常而出现）

```
{
  "Message": "An error has occurred.",
  "ExceptionMessage": "Object reference not set to an instance of an object.",
  "ExceptionType": "System.NullReferenceException",
  "StackTrace": "  "
} 
```

我当然可以解决这个问题并捕获异常。但是，如果我再次忘记，我宁愿不要让它在客户端崩溃。所以我很想打印出“消息”，但我不知道该怎么做，所以它不会崩溃`var msg = item.Value["Msg"];`

我尝试执行 var 时遇到的错误`msg = item.Value["Msg"];`

```
System.InvalidOperationException was unhandled
  Message=Cannot access child value on Newtonsoft.Json.Linq.JValue.
  StackTrace:
       at Newtonsoft.Json.Linq.JToken.get_Item(Object key)
       at Fitness.WindowsPhone7.UI.MainPage.<btnSignIn_Click>b__0(IRestResponse response)
       at RestSharp.RestClientExtensions.<>c__DisplayClass1.<ExecuteAsync>b__0(IRestResponse response, RestRequestAsyncHandle handle)
       at RestSharp.RestClient.ProcessResponse(IRestRequest request, HttpResponse httpResponse, RestRequestAsyncHandle asyncHandle, Action`2 callback)
       at RestSharp.RestClient.<>c__DisplayClass3.<ExecuteAsync>b__0(HttpResponse r)
       at RestSharp.RestClient.<>c__DisplayClass5.<>c__DisplayClass7.<ExecuteAsync>b__2(Object s)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
       at System.Delegate.DynamicInvokeOne(Object[] args)
       at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
       at System.Delegate.DynamicInvoke(Object[] args)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
       at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
       at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
       at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
       at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-27T05:55:51.997

假设您使用 Newtonsoft.Json：

您可以使用 JObject 来测试是否有属性：

```
JObject jObj; //initialized somewhere, perhaps in your foreach
var msgProperty = jObj.Property("msg");

//check if property exists
if (msgProperty != null) {
    var mag = msgProperty.Value;
} else {
    //there is no "msg" property, compensate somehow.
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-10T09:29:22.227

您可以使用*TryGetValue*它是一种标准方法，可以完全满足您的需求。我说标准是因为*Try*方法可以在 .NET 框架中找到，并且通常具有相同的方法签名。

使用它，您可以获得这样的值。

```
JObject json = new JObject();
JToken value;
if (json.TryGetValue("myProperty", out value))
{
    string finalValue = (string)value;
} 
```

TryGetValue 返回一个布尔值，告知是否找到该值，如果找到该值，则将作为第二个参数传递的值设置为属性值。否则设置为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T14:22:33.990

或者您可以简单地在 JsonObject 上使用 ContainsKey。这是我自己的代码示例，与您的问题类似：

```
foreach (JsonObject feed in data)
            {
                var fbFeed = new FacebookFeeds();
                if (feed.ContainsKey("message"))
                    fbFeed.Message = (string)feed["message"];
                if (feed.ContainsKey("story"))
                    fbFeed.Message = (string)feed["story"];
                if (feed.ContainsKey("picture"))
                    fbFeed.Message = (string)feed["picture"];
                fbFeeds.Add(fbFeed);
            } 
```

# design-patterns - MVP 中的组合与继承

> ID：14544504
> 
> 赞同：20
> 
> 时间：2013-01-27T04:42:47.740
> 
> 标签：design-patterns, user-interface, inheritance, mvp, composition

我正在使用 MVP 模式来开发大型应用程序。在开发过程中，我提出了是否应该使用组合或继承的问题。例如：假设我有一个名为**Foo**的表单，其中包含字段**A**和**B**。在应用程序的其他部分，我有一个表单**Bar**，它具有相同的字段**A**和**B**但有一个附加字段**C**。

目前，代码是使用继承方法编写的，其中表单**Bar**的视图继承自表单**Foo**。然后，演示者处理的数据与模型略有不同。这很简单，但如果遵循“是 A”的经验法则，这让我很失望，因为即使形式不同，它们也处理公共输入（A 和 B）。

但是，在这里我一直在考虑“组合优于继承”和[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，并开始认为我应该使用组合而不是继承。但是，由于我使用的是 MVP，因此它比预期的要复杂，因为我必须有一个带有字段**A**和**B的表单****Foo**的演示者，然后是带有字段**C的****Bar演示者和对****Foo**的演示者的引用，这样它可以将字段**A**和**B**注入其中。

 ******问题是它已被证明是更多的代码，因为我必须在**Foo**的演示者中添加一些排序 getter 和 setter才能将数据传递给**Bar**。这感觉就像我打破 MVP 以提供组合一样。

所以我的问题是：

我的案例使用组合而不是继承真的更好吗？为什么？

使用组合是否会“破坏”MVP？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T03:12:49.573

> 我的案例使用组合而不是继承真的更好吗？为什么？

是的。因为组合在更大的应用程序中更可靠、更安全、更易于维护、更易于发现、更可记录且更易于理解。恕我直言。:)

> 使用组合是否会“破坏”MVP？

是的。它打破了你现在正在做的那种简单的 MVP。组合让您可以选择如何耦合您的代码，这对于大型应用程序非常有用。它确实使用了更多代码，因为您必须具体说明您的耦合方式。

一个简单的应用程序增长，并成为从简单的 MVP 继承过渡到更复杂的组合的良好候选者是非常合理的。这是一个解耦步骤，可以以新的方式重新耦合。

这类似于有多少简单的 Web 应用程序正在转变为前端/后端 API 驱动的应用程序。这本质上是前端用户视图与后端存储模型的解耦。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T04:56:09.517

> 当表单不同时，它们处理公共输入（A 和 B）。

这意味着 Foo 演示者在*概念上*与 Bar 演示者不同，*只是碰巧*共享一些公共输入，因此它们不应通过继承相关联。将处理公共输入的代码提取到实用程序类中，并在 Foo Presenter 和 Bar Presenter 中重用。

如果 Foo 的概念发生变化，它不会影响 Bar （反之亦然：如果 Bar 的概念在不改变 Foo 的概念的情况下不能改变，那么*它是*“is A”关系，并且确实可以使用继承）

有疑问时，总是更喜欢构图

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-03T16:08:32.350

一个更干净的组合是有类：

**模型**：A、B、C、Foo、Bar
**视图**：AView、BView、CView、 FooView、
**BarView**演示者：APresentor、BPresentor、CPresentor、FooPresentor、BarPresentor

其中 FooView 包含一个 AView 和一个 BView，BarView 包含一个 AView、BView 和一个 CView，并且演示者具有相似的组成。

这种组合使 A、B 和 C（连同它们的视图和演示者）模块化，以便您可以随意混合和匹配，组合类（Foo 和 Bar）处理集成。

这可以与继承一起使用：如果 Bar 是 Foo 的特定情况，则 Bar 应该从 Foor 继承，而 BarPresentor 可以从 FooPresentor 继承。但是，我会考虑以更具体的方式继承视图，因为视图可能适合也可能不适合继承，具体取决于它们的行为。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-04T05:24:37.523

让我们从基础开始，关于类你必须知道的最重要的事情，子类*总是*超类的完整实例。因此，如果您在超类中定义字段变量，则始终在创建子类的实例时创建此字段。您可以使用 super.getVariable() 在子类中获取该变量以重用字段（类变量、字段、标志，这在 OO 编程中都是一样的）。但是您也可以只从外部调用 subclassInstance.getVariable() 并且您将获得相同的字段（无需通过子类更改它）。所以你通常根本不需要在你的子类中调用“super”，因为你通常只想从外部获取/设置它的超类（包括抽象类！）的一个字段。由于您应该始终将字段变量设置为私有，因此我始终建议不要调用“super”来访问任何字段变量（因为即使使用 super 您也可以`protected`super.getField() 之类的方法，虽然很烦人但很有必要）。

现在让我们从数据模型开始：您有模型A 和模型B。您可以从超类或仅从 Object 继承它们。但是如果你只继承Object，你可以定义一个简单的（Java！）接口，并将这个接口实现到modelA和modelB中。然后您只需通过接口处理这两个类（它们都是“接口对象”并且可以通用处理）。如果您的模型C 由模型A 和模型B 组成，您只需在模型C 中使用两个模型的实例（有时也称为“取消引用”），不需要更多代码。因此，您可以选择尽可能小且简单的模型（“bean”）。基于组件的实现，这是数据结构的常用方式。

如果您有 GUI 或表单，它看起来会有所不同。您可能有很多共同的代码，并且您不想将这些代码拆分为几十个不同的类，然后将这些组件放在一个控制器/演示器类中。因此，您可以定义一个抽象类，其中包含所有共享字段/标志以及访问和更改它们的几种方法。然后，您从 formA 和 formB 中调用这些常用方法并重用代码。

集合论对你说了什么吗？你有两个圆，A 和 B，以及 A 和 B 的交集。抽象类是交集，子类 formA 和 formB 是集合差异。学习编写正确的程序……就是理解集合论。;-)

用你的话来说：**Foo**形式的大部分代码都在一个抽象超类**Foobar**中，这个类将能够处理**A**和**B**。然后你从它继承表单**Foo**和表单**Bar**，虽然**C**可能大部分仍然是**Foobar**的一个子集，但你在**Bar**中添加了处理**C**的能力，这就是设置的区别。

最后，**Bar**在任何时候都不会是**Foo**，它们都将只是**Foobar**。你有一些新的共享字段/标志？没问题，您将他们的代码迁移到**Foobar**中，您可以在两个子类中使用它！

但是，如果有一天您需要与**Foo**略有不同的第三个组件**FooToo**怎么办？没问题，让**FooBarFoo成为扩展****FooBar**的抽象类，然后创建**Foo**和**FooToo**作为子类。最终结果将是一个类树，其中根（通常）是抽象类，叶子是真正的类，这种结构提供了代码的最大化重用（并且不会更改类名，因此您不需要更改任何其他代码已经使用**Foo**类）。

 ******您说您将在您的表单（或其演示者）中实现 setter/getter？然后您还必须使用模型**modelA**和**modelB**（但没有 modelC 因为**C**仅用于**Bar**而不是**Foo**）。这些模型用作包装器在**Foo**和**Bar**之间传输数据。并且此数据流应由演示者控制，而不是由**Foo**或**Bar**控制。

所以你的问题最终是这样的：主持人到底是什么？实际上，presenter 是运行 GUI 组件和数据模型的代码。它是“框架”，一方面使用 GUI 组件，另一方面使用数据模型的 getter/setter。它是GUI层和数据层两层之间的中间件，甚至是不同GUI组件和不同数据模型之间的中间件。

所以通常只有两种方法可以做到这一点：没有演示者/控制器或使用它。如果没有，您将需要将大量的摆动组件代码复制粘贴到您的演示者类中。所以呢？是的，当你使用挥杆组件时，你总是*已经*使用 (M)VP 模式，不可能做到不同！

所以说，要创建一个框架，你需要使用组件设计，因为你想为使用你的框架的程序员提供最大的灵活性。但是生产系统与框架不同，这是许多框架程序员认为的错误。因此，如果框架程序员告诉您“基于组件的实现就是一切”，那么他可能错了。仅仅因为他正在为他的框架编写组件，这并不意味着您需要为您的演示者做同样的事情！

这就是我们开始讨论 GUI 组件与 GUI 表示的时候。可以创建“尽可能多的演示者组件”，因为您可以使用“include(...)”方法创建一个简单的 HTML 站点并从中创建数十个 PHP 站点。但我可以向你保证，基于组件的设计并不总能提高代码的可维护性！如果我可以只用一节课做某事，而且我可以做到清晰易读，我宁愿上一节课，而不是十节课。一位演示者 = 一节课，或者更具体地说：一个 GUI 框架/选项卡 = 一节课。

同样，如果您有 2 个相似的框架/标签，但它们不一样，该怎么办？将共享代码迁移到抽象类中，并创建 2 个子类，对吗？*不，您首先需要考虑那些 GUI 的份额。他们有共享旗帜吗？所以将标志移动到一个抽象超类中。但他们只是表现不同吗？好吧，您只需在同一个类中实现两个不同的方法，并在需要时调用它们。*这是最重要的。

用你的话来说：GUI **Pres1**完全使用**Foo**、**Bar**、**A**、**B**和**C**。并且 GUI **Pres2**仅在具有不同标志的情况下才属于另一个类*。*否则，您将设置一个标志**Pres1**和一个标志**Pres2**并在您的方法中检查此标志。由`if(flag="Pres1"){} else if(flag="Pres2"){}`. 像这样，您将获得最大的灵活性和代码可重用性。

不要将 Java 类视为不灵活、不可重用、不可更改的东西。如果您是一名优秀的程序员，一旦需要，您将直观地更改程序的结构。您不需要考虑人为的概念，您只需要了解面向对象的编程模式即可。

“组件”总是意味着“带有构造函数的东西”。但是，有时您只会使用方法而不是组件来做某事！因此，如果有人告诉您“组件设计就是一切”，他会告诉您“基于构造函数的设计就是一切”。但是要创建构造函数，您需要有字段变量/标志！没有字段变量，仅仅为了它而创建一个新类完全是无稽之谈。

*注意：“组件”不是方法。很明显，您将在您的 GUI 类中使用很多方法来非常容易地处理事情，所以最后您只需调用几个方法。所以不要混用组件和方法！我总是建议一个强大的面向方法的设计，因为这一切都是为了使用更少的代码行。因此，尽可能多地定义方法……但也要尽可能少地定义类/组件。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-01T20:55:37.537

当然，当 Foo 不扩展 Bar 时，你需要添加更多的代码，因为你有额外的 getter 和 setter。但最大的好处是 Foo 不再依赖于 Bar。这看起来可能是一个很小的好处，但想象一下如果你使用超过 50 个类的继承会是什么样子......这将是地狱，没有任何逻辑，如果你必须更改使用的组件，这将非常复杂在由其他几个类扩展的类中。

出于维护原因，请避免使用继承。正如您所说，“Bar 不是 Foo”，因此 Bar 不应扩展 Foo。根据我的经验，继承从来都不是一个好的解决方案，并且应该只用于一系列类（例如，当使用复合模式时）。************

# matlab - 使用 ==> plot3 时出错 从单元格转换为双精度是不可能的。plot3(p(1,:),p(2,:),p(3,:),'+r');

> ID：14544505
> 
> 赞同：3
> 
> 时间：2013-01-27T04:42:58.653
> 
> 标签：matlab, plot

我试图在 kdd 数据集上调用竞争层，但我得到了这个：

```
???Error using ==> plot3 Conversion to double from cell is not possible. plot3(p(1,:),p(2,:),p(3,:),'+r'); 
```

这是我的代码：

```
clear all;
p=importdata('kdd train.txt');
tar=[];
for i=0:size(p);
    tar=[tar;0 1];
end
net=newc(tar,5,0.1);
w = net.IW{1};
plot3(p(1,:),p(2,:),p(3,:),'+r');
grid on;
hold on;
circles = plot3(w(:,1),w(:,2),w(:,3),'ob');
net.trainParam.epochs = 10;
net = train(net,p);
w = net.IW{1};
delete(circles);
plot3(w(:,1),w(:,2),w(:,3),'ob'); 
```

谁能看到导致错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:07:14.267

该错误表明对于`p`变量，假设从单元格转换为双精度，所以我假设`p`是单元格数组而不是数字矩阵。尝试使用以下方法进行转换[`cell2mat`](http://www.mathworks.com/help/matlab/ref/cell2mat.html)：

```
 p=cell2mat(p); 
```

# android - Android CursorIndexOutOfBoundsException 请求索引 0，大小为 0

> ID：14544522
> 
> 赞同：1
> 
> 时间：2013-01-27T04:46:39.127
> 
> 标签：android, indexing, cursor, indexoutofboundsexception

我试图在我的 Activity 中使用 2 个不同的 ListView 来填充数据库内容 onCreate。自从我添加了代码以来，我现在都因标题中提到的错误而受到逼迫。

我不知道为什么会这样。

继承人的代码：

```
 currentList = (ListView)findViewById(R.id.list_current_day);
    cursor = datasource.fetchCurrentLogs(dayExerciseDataID);
    to = new int[] { R.id.listitem_log_reps, R.id.listitem_log_weight };
    dataAdapterCurrent = new SimpleCursorAdapter(this, R.layout.listitem_log, cursor, columns, to, 0);
    currentList.setAdapter(dataAdapterCurrent);

    previousList = (ListView)findViewById(R.id.list_previous_day);
    cursor = datasource.fetchPreviousLogs(dayExerciseDataID);
    to = new int[] { R.id.listitem_log_reps, R.id.listitem_log_weight };
    dataAdapterPrevious = new SimpleCursorAdapter(this, R.layout.listitem_log, cursor, columns, to, 0);
    previousList.setAdapter(dataAdapterPrevious); 
```

以下是数据库的结构和功能：

```
public Cursor fetchCurrentLogs(long dayExerciseDataID) {
    // where day = today
    Cursor cursor = database.rawQuery("select " + MySQLiteHelper.COLUMN_ID + "," + MySQLiteHelper.COLUMN_REPS + ", " + MySQLiteHelper.COLUMN_WEIGHT + " " +
            "from " + MySQLiteHelper.TABLE_LOGS + " " +
            "where " + MySQLiteHelper.COLUMN_ID_DAY_EXERCISE + " = '" + dayExerciseDataID + "'", null);
    if (cursor != null) { cursor.moveToFirst(); }
    return cursor;
}

public Cursor fetchPreviousLogs(long dayExerciseDataID) {
    // where day = closest day from today
    Cursor cursor = database.rawQuery("select " + MySQLiteHelper.COLUMN_ID + "," + MySQLiteHelper.COLUMN_REPS + ", " + MySQLiteHelper.COLUMN_WEIGHT + " " +
            "from " + MySQLiteHelper.TABLE_LOGS + " " +
            "where " + MySQLiteHelper.COLUMN_ID_DAY_EXERCISE + " = '" + dayExerciseDataID + "'", null);
    if (cursor != null) { cursor.moveToFirst(); }
    return cursor;
}

    database.execSQL("create table " + TABLE_LOGS + " (" 
            + COLUMN_ID + " integer primary key autoincrement," 
            + COLUMN_ID_DAY_EXERCISE + " integer not null,"
            + COLUMN_REPS + " integer not null,"
            + COLUMN_WEIGHT + " real not null,"
            + COLUMN_1RM + " real not null,"
            + COLUMN_DATE + " integer not null"
            + ")"); 
```

有人可以解释为什么会这样吗？如果我错过了任何重要的代码，请告诉我，我会更新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:55:48.110

尝试`cursor`对两个列表使用不同的实例。

```
currentList = (ListView)findViewById(R.id.list_current_day);
cursor1 = datasource.fetchCurrentLogs(dayExerciseDataID); 
```

和

```
previousList = (ListView)findViewById(R.id.list_previous_day);
cursor2 = datasource.fetchPreviousLogs(dayExerciseDataID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:56:35.877

你必须以这种方式使用 SimpleCursorAdapter

```
dataAdapterPrevious = new SimpleCursorAdapter(this, R.layout.listitem_log, cursor, columns, to); 
```

而不是这个

```
 dataAdapterPrevious = new SimpleCursorAdapter(this, R.layout.listitem_log, cursor, columns, to, 0); 
```

# xaml - 分组时如何将 UserControl 绑定到 GridView？

> ID：14544525
> 
> 赞同：0
> 
> 时间：2013-01-27T04:47:14.773
> 
> 标签：xaml, gridview, binding, windows-8

我想在 GridView 的 ItemTemplate 部分中绑定 UserControl。

UserControl 只包含修饰文本..

我一直在使用 Collection，它由 xaml 主页面中的 ItemTemplate 组成并直接在其中绑定 Content，这很容易。

但是现在我的收藏变成了..我现在怎么绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:09:26.800

不要将`UserControl`s 放入模型中（即您的集合）。它们属于视图（即您的 XAML 页面）。

我猜你用 a 替换了`String`你最初使用的，`UserControl`因为你想`UserControl`对不同的项目使用不同的。看看[`ItemTemplateSelector`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.itemtemplateselector.aspx)。您可以将其绑定到一个`DataTemplateSelector`内部，您可以根据单个项目决定使用哪个模板。您现在可以为 Content 提供一个自定义类，并在其中有一个属性来选择`UserControl`基于它的内容。

# zend-framework2 - Zend\Session\Container 在使用时烦人的锁，你的解决方法是什么？

> ID：14544531
> 
> 赞同：1
> 
> 时间：2013-01-27T04:49:05.067
> 
> 标签：zend-framework2

我有一个有两个动作的控制器。一个执行非常长的计算，并在几个步骤中将状态存储在会话容器中：

```
public function longAction()
{

    $session = new Container('SessionContainer');
    $session->finished = 0;
    $session->status   = "A";

    // do something long

    $session->status = "B";

    // do more long jobs

    $session->status = "C";

    // ...

} 
```

第二个控制器：

```
public function shortAction()
{

    $session = new Container('SessionContainer');

    return new JsonModel(
        array(
            'status' => $session->status
        )
    );

} 
```

这些都是通过 AJAX 调用的，但我可以证明仅使用浏览器选项卡的行为相同。我首先调用 /module/long 来完成它的工作。当它完成它的任务时，调用 /module/short （我以为只会回显 JSON）停止 /module/long 就完成了！

提出这一点，一些 ZFers 认为这是对竞争条件的有效保护。但我不能是唯一一个真正不关心后者的用例。

有什么便宜的技巧可以避免使用队列、数据库或内存缓存？试图保持轻量级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:25:44.597

这是预期的行为。这就是为什么：

使用 cookie 来识别会话以存储会话 ID，这允许您的浏览器在下一次请求时获取相同的会话。

由于您的长进程正在使用会话，因此在整个进程执行完成之前它不会调用**session_write_close()**，这意味着在长进程运行时会话仍然打开。

当您使用另一个浏览器选项卡连接时，浏览器将尝试获取相同的会话（使用相同的 cookie），该会话仍处于打开状态并运行漫长的过程。

如果您使用不同的浏览器打开链接，您会看到页面加载正常，而不是等待**session_write_close()**被调用，这是因为它正在打开一个单独的会话（但是您不会看到您想要的文本，因为它是单独的会话）

您可以尝试手动编写和关闭 (session_write_close()) 会话，但这可能不是最好的处理方式。

绝对值得看看像 Gearman 这样的东西，没有太多额外的工作，而且它是专门为这种异步作业处理而设计的。即使将状态写入数据库也会更好，但这仍然不理想。

# ios6 - 仅在使用 Storyboard 和 segue 时 iOS6 中的 EXC_BAD_ACCESS 错误

> ID：14544532
> 
> 赞同：0
> 
> 时间：2013-01-27T04:49:07.227
> 
> 标签：ios6, uistoryboardsegue, xcode-storyboard

我在我的应用程序中使用故事板。我正在使用下面的代码从 UITableView 导航到另一个 UIView。

```
-(void)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"showNextView" sender:self];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showNextView"])
    {
        AnotherViewController *destination = [segue destinationViewController];
        // do something with the destination.
    }
} 
```

当我使用iOS 5和iOS 5.1模拟器时完全没有问题。但是当我使用 iOS 6 模拟器时出现如下错误。

> 线程 1：EXC_BAD_ACCESS（代码=2，地址=0x10）

排队

```
0x1588098:  movl   (%eax), %edx 
```

在文件中

> libobjc.A.dylib`objc_msg发送：

即使我将 AnotherViewController 设为纯空白视图。我仍然遇到同样的错误。

谢谢

# c - makecontext uc_link 给出分段错误

> ID：14544534
> 
> 赞同：1
> 
> 时间：2013-01-27T04:49:42.470
> 
> 标签：c, multithreading, pthreads, coroutine, context-switch

我正在尝试制作像 pthreads 这样的用户级线程库。我正在使用*makecontext()* / *swapcontext()*在线程之间进行切换，并且在为线程创建上下文时，我将*uctx_main*传递给上下文中的*uc_link*字段。

```
context.uc_stack.ss_sp = thread->c_stack;
context.uc_stack.ss_size = sizeof(thread->c_stack);
context.uc_link = &uctx_main; 
```

但是，当我的线程终止时，它会给我一个分段错误。我的主程序仍在运行。

另外，有人可以解释一下*uctx_main*是什么吗？它是主要功能的默认上下文吗？我需要为我创建的每个线程都有一个*uctx_main吗？*很抱歉问了这么愚蠢的问题，但我在谷歌上没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:51:25.483

根据您的参考，我假设`uctx_main`您正在遵循[Linux 手册页中`makecontext()`](http://linux.die.net/man/3/makecontext)的示例。

在该示例中，`uctx_main`是主线程的上下文，在调用`setcontext()`switch时设置`uctx_func2`。

`uctx_main``uctx_func1`除了它是从主线程设置的（并且在示例中被设置为后继）之外，它在任何方面都没有什么特别之处。

通常，您创建的每个线程都需要有一个上下文。

# javascript - 在函数内部存储属性，静态的？

> ID：14544537
> 
> 赞同：0
> 
> 时间：2013-01-27T04:50:01.313
> 
> 标签：javascript

各位程序员，大家好，我已经开始学习 JavaScript。这种语法是纯粹的巫术，有人可以澄清一下：

```
function CleanPet(){
    alert("The pet is now clean!");
}

CleanPet.Description="Dirty Business"; 
```

我正在阅读的材料解释说，在 JavaScript 中，函数就像任何其他对象一样，但是如果我将属性附加到函数，这是否意味着它是静态的，因为我实际上并没有声明它？

谢谢你的帮助，在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:58:49.620

对象属性并没有`var`像你对变量所做的那样在正式意义上“声明”。给定一个现有的 object `CleanPet`，您可以分配诸如`CleanPet.Description`（如问题中所示）之类的属性，如果该属性尚不存在则将创建该`Description`属性，或者如果该属性已存在则覆盖该属性。

尝试访问您尚未设置的对象属性也是“合法的”，例如`CleanPet.SomeOtherProperty`- 结果值为`undefined`. （不是错误，尽管假设`CleanPet`实际上是一个对象。如果`CleanPet`是`null`或`undefined`然后`CleanPet.SomeOtherProperty`会给出错误。）

因此，特别是关于函数，函数声明：

```
 function CleanPet { /* some code */ } 
```

...声明一个恰好是函数的对象。这意味着您可以将其称为 function `CleanPet()`，但它仍然可以获得“普通”对象行为，例如分配属性的能力。

如果用 调用 JavaScript 函数也是对象构造函数`new`：

```
var cleanPet1 = new CleanPet(); 
```

在这种情况下，JS 每次调用时都会创建一个新对象（实例）`new CleanPet()`，但该`CleanPet.Description`属性*不可*访问，`cleanPet1.Description`因为它是构造函数的属性，而不是结果`new`实例的属性。所以从这个意义上说，是的，该属性是“静态的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:58:38.777

是的，函数/类的属性是静态的

```
MyClass.Description = "Dirty Business";

MyClass.staticFn = function() {

};

MyClass = function() {
  this.var = "test";
};

MyClass.prototype.instanceFn = function() {

};

// To call an instance function
obj = new MyClass();
obj.instanceFn();

// To call a static function
MyClass.staticFunction();

// Or to access a static property
alert(MyClass.Description) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T05:02:02.927

javascript中的函数是对象，可以有属性。

当您将属性分配给示例中的函数时，它会在该函数对象上创建一个新属性，并且它的行为本质上类似于与函数本身在同一范围内的变量，但该属性的范围仅限于函数名称，因此它不会污染全局命名空间。

有几个原因可能会这样做：

1.  您需要一个全局变量，该变量在函数的一次调用到另一次调用中保持其值。
2.  您不想污染这个新变量的全局命名空间。
3.  您喜欢封装与它们相关的函数相关的全局变量的想法。
4.  您希望优化代码，以便在每次运行函数时都不会重新评估静态或常量声明。

在您的示例中，您看到了所有四个的好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T05:55:23.890

# 比较 JavaScript 和 C++

JavaScript 是一种类似于 Self 的原型面向对象语言。然而，JavaScript 的语法是从 C/C++ 借来的。这是让大多数来自经典面向对象背景的程序员感到困惑的地方。

## 1\. 公共和私人财产

考虑以下 C++ 程序：

```
#include <iostream>

using namespace std;

class Rectangle {
    int height;
    int width;

    public:

    Rectangle(int height, int width) {
        this.height = height;
        this.width = width;
    }

    int area() {
        return height * width;
    }
}

int main() {
    Rectangle rectangle(3, 7);
    cout << rectangle.area() << endl;
    return 0;
} 
```

这将一对一地转换为 JavaScript，如下所示：

```
main();

function Rectangle(height, width) {
    this.area = function () {
        return height * width;
    };
}

function main() {
    var rectangle = new Rectangle(3, 7);
    console.log(rectangle.area());
    return 0;
} 
```

这里有几点需要注意：

1.  该函数`main`在声明之前被调用。这是可能的，因为声明被[提升了](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/ "快速提示：JavaScript 提升解释 |  网易+")。无需前向声明。
2.  “`Square`类”（咳咳，“构造函数”）既简单又小。
3.  公共属性（或函数）被添加到 指向的对象`this`。
4.  其他一切都是私有的（只能通过[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29 "闭包（计算机科学） - 维基百科，免费的百科全书")访问）。

## 2\. 共享公共财产

在 C++ 中，只有内联函数在类体内定义。其他所有功能都必须在外部定义。但是，通常所有函数（包括内联函数）都在外部定义：

```
#include <iostream>

using namespace std;

class Rectangle {
    public:

    int height;
    int width;

    Rectangle(int height, int width);
    int area();
}

Rectangle::Rectangle(int height, int width) {
    this.height = height;
    this.width = width;
}

int Rectangle::area() {
    return this.height * this.width;
}

int main() {
    Rectangle rectangle(3, 7);
    cout << rectangle.area() << endl;
    return 0;
} 
```

在 JavaScript 中，您将向`prototype`构造函数添加共享方法（从不创建共享属性）。这类似于上面的 C++ 程序。这样做的好处是 JavaScript 不会为构造函数的每个实例创建新方法：

```
main();

function Rectangle(height, width) {
    this.height = height;
    this.width = width;
}

Rectangle.prototype.area = function () {
    return this.height * this.width;
};

function main() {
    var rectangle = new Rectangle(3, 7);
    console.log(rectangle.area());
    return 0;
} 
```

JavaSctipt 版本实际上更小，因为我们不需要在类中声明属性和方法。

## 3\. 公共静态属性

C++ 允许您在类上声明静态属性和方法。这就像将类用作对象一样。您也可以将函数用作对象。这些被称为[函子](http://en.wikipedia.org/wiki/Function_object "函数对象 - 维基百科，免费的百科全书")：

```
#include <iostream>

using namespace std;

class Rectangle {
    public:

    int height;
    int width;

    static Rectangle fromSquare(int side);
    Rectangle(int height, int width);
    int area();
}

static Rectangle Rectangle::fromSquare(int side) {
    return new Rectangle(side, side);
}

Rectangle::Rectangle(int height, int width) {
    this.height = height;
    this.width = width;
}

int Rectangle::area() {
    return this.height * this.width;
}

int main() {
    Rectangle square = Rectangle.fromSquare(5);
    cout << square.area() << endl;
    return 0;
} 
```

由于函数是 JavaScript 中的对象，因此您可以简单地向它添加属性（如仿函数）。如果将这些函数用作构造函数，则函数上的属性称为静态属性：

```
main();

Rectangle.fromSquare = function (side) {
    return new Rectangle(side, side);
};

function Rectangle(height, width) {
    this.height = height;
    this.width = width;
}

Rectangle.prototype.area = function () {
    return this.height * this.width;
};

function main() {
    var square = Rectangle.fromSquare(5);
    console.log(square.area());
    return 0;
} 
```

而已。看到 JavaScript 和 C++ 中相同代码之间的大小差异了吗？你决定哪种语法是纯粹的巫术。=)

## 4。结论

如果你在 JavaScript 中遇到 OOP 问题，有很多经典的面向对象库可以帮助你，比如这个：[https ://github.com/javascript/augment](https://github.com/javascript/augment)

# c++ - C++ 中的链表

> ID：14544539
> 
> 赞同：6
> 
> 时间：2013-01-27T04:50:22.630
> 
> 标签：c++, linked-list

我正在尝试用节点结构自学链接列表，并希望有人可以帮助我。我会从命令行获取输入，它会让我成为一个嵌套列表，我可以输出它。

例子：

输入：“1 2 3 4 5”
输出：“1 2 3 4 5”

有两件事我遇到了麻烦：1）当我运行程序时，我不断收到**警告：在这个声明中忽略了'typedef'[默认启用]** 我怎样才能摆脱这个？

编辑：我已将其更改为`typedef struct Node* NodePtr;`

2）我的代码不能正常工作。我怎样才能解决这个问题？我正在尝试用 C++ 自学链表。

```
typedef struct Node;
typedef Node* NodePtr;
struct Node{
    int x;
    NodePtr next;
};

int main ()
{
    int n;
    NodePtr head, ptr = NULL;
    head = ptr;
    while (cin >> n){
        ptr = new Node;
        ptr->x = n;
        ptr->next = NULL;
        ptr = ptr->next;
    }

    NodePtr bling = head;
    while(bling != NULL){
        cout << bling->x << endl;
        bling = bling->next;
    }
    return 0;
} 
```

理想情况下，我想做的是制作一个如下所示的链表。

```
1 -> 2 -> 3 -> NULL. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T05:31:27.403

首先，关于你的结构的声明和你似乎想要的指针 typedef，有很多方法可以做到这一点。以下将在 C 或 C++ 中工作。

```
// declare NodePtr as a pointer to Node, currently an incomplete type
//  C and C++ both allow you to declare a pointer to damn-near anything
//  so long as there is an understanding of what it *will* be, in this
//  case, a structure called Node.
typedef struct Node *NodePtr;

// Now declare the structure type itself
struct Node
{
    int x;
    NodePtr next;
}; 
```

也就是说，老实说，我*不建议这样做*。大多数工程师想要一个*清晰*且语法可见的定义，让他们尖叫，“这是一个指针！” 你可能不一样。我个人更喜欢这个：

```
struct Node
{
    int x;
    struct Node *next; // omit the 'struct' for C++-only usage
}; 
```

只要您以及同样重要的*其他工程师阅读您的代码*，了解您`NodePtr`作为指向节点的指针的用法，然后选择最适合您的情况。指针类型声明对某些人来说几乎是宗教性的，所以请记住这一点。有些人更喜欢看到那些星号（我就是其中之一），有些人可能不喜欢（听起来像*你*=P）。

注意：有*一个*地方使用`typedef`ed 指针类型可以避免潜在的错误：**多变量声明**。考虑一下：

```
Node* a, b;     // declares one Node* (a), and one Node (b) 
```

有一个`typedef struct Node *NodePtr;`允许这样做：

```
NodePtr a, b;   // declares two Node*; both (a) and (b) 
```

如果您花足够的时间用 C 编写代码，那么前者会在您学会不犯该错误的情况下反复咬您一口，但它仍然会偶尔发生。

* * *

**负载循环**

关于将列表拼凑在一起的加载循环，您没有正确连接列表，坦率地说，有一百万种方法可以做到这一点，其中一种是下面的方法。这*不需要*您清除“额外的节点”。它也不需要任何`if (head){} else{}`块结构来避免上述相同的情况。考虑一下我们真正想做的事情：创建节点并将它们的地址分配给正确的指针：

```
NodePtr head = NULL;     // always the head of the list.
NodePtr* ptr = &head;    // will always point to the next pointer to assign.
int n;
while (cin >> n)
{
    *ptr = new Node;
    (*ptr)->x = n;
    ptr = &(*ptr)->next;
}

// note this always terminates the load with a NULL tail.
(*ptr)->next = NULL; 
```

* * *

**这个怎么运作**

1.  将头指针初始化为NULL
2.  初始化节点指针指针（是的指针指针）以指向头指针。该指针对指针将始终保存*目标*指针的地址，该地址将接收下一个动态分配节点的地址。最初，这将是头指针。在上面的代码中，这个指向指针的指针就是变量：`ptr`.
3.  开始while循环。`ptr`对于读取的每个值，分配一个新节点，将其保存在由（因此）指向的指针中`*ptr`。在第一次迭代中，它保存了`head`指针的地址，因此`head`变量将获得我们的新节点分配。在所有后续迭代中，它包含*插入的最后一个节点*`next`的指针的地址。顺便说一句，保存这个新目标指针的地址是我们进入下一个分配周期之前在循环中完成的*最后一件事。*
***   循环完成后，插入的*最后一个*节点需要将其`next`指针设置为 NULL 以确保正确终止的链表。*这是强制性的*。我们很方便地有一个指向该指针的指针（我们一直在使用的那个指针），因此我们将它“指向”的指针设置为 NULL。我们的列表已终止，我们的加载已完成。Brain Food：如果加载循环从未加载任何节点，它将指向什么指针*？*答案：`&head`，如果我们的列表为空，这正是我们想要的（一个`NULL`头指针）。**

 *** * *

**设计**

我希望这将有助于更好地解释它是如何通过循环的三个完整迭代来工作的。

初始配置

```
 head ===> NULL;
ptr --^ 
```

一次迭代后：

```
head ===> node(1)
          next
ptr ------^ 
```

两次迭代后

```
head ===> node(1)
          next ===> node(2)
                    next
ptr ----------------^ 
```

三轮迭代后

```
head ===> node(1)
          next ===> node(2)
                    next ===> node(3)
                              next
ptr --------------------------^ 
```

如果我们在 3 次迭代中停止，最终的终止赋值 ( `*ptr = NULL;`) 给出：

```
head ===> node(1)
          next ===> node(2)
                    next ===> node(3)
                              next ===> NULL;
ptr --------------------------^ 
```

请注意，`head`一旦第一次迭代完成，就永远不会改变（它总是指向第一个节点）。另请注意，`ptr`始终保存要填充的下一个指针的地址，在初始迭代之后（它从我们的头指针的地址开始），将始终是添加的*最后一个*节点中`next`指针的地址。

 *我希望这能给你一些想法。值得注意的是，将这两个指针（`head`指针和`ptr`指针）配对成各自的结构并具有适当的管理功能定义了教科书[*Queue*](http://en.wikipedia.org/wiki/Queue_%28abstract_data_type%29)；其中一端仅用于插入 ( `ptr`) 一端用于提取 ( `head`) 并且容器*不允许*随机访问。如今，对于标准库容器适配器（如[`std::queue<>`](http://en.cppreference.com/w/cpp/container/queue).

* * *

**完整的工作样本**

这个示例只加载我们的队列，包含 20 个元素，打印它们，然后清理队列并退出。根据需要适应您的使用情况（提示：比如更改传入数据的来源）

```
#include <iostream>
using namespace std;

// declare NodePtr as a pointer to Node, currently an incomplete type
//  C and C++ both allow you to declare a pointer to damn-near anything
//  so long as there is an understanding of what it *will* be, in this
//  case, a structure called Node.
typedef struct Node *NodePtr;

// Now declare the structure type itself
struct Node
{
    int x;
    NodePtr next;
};

int main()
{
    // load our list with 20 elements
    NodePtr head = NULL;
    NodePtr* ptr = &head;
    for (int n=1;n<=20;++n)
    {
        *ptr = new Node;
        (*ptr)->x = n;
        ptr = &(*ptr)->next;
    }

    // terminate the list.
    *ptr = NULL;

    // walk the list, printing each element
    NodePtr p = head;
    while (p)
    {
        cout << p->x << ' ';
        p = p->next;
    }
    cout << endl;

    // free the list
    while (head)
    {
        NodePtr victim = head;
        head = head->next;
        delete victim;
    }

    return 0;
} 
```

**输出**

```
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T04:58:20.327

您实际上并未将“head”变量设置为 NULL(head = ptr)。你实际上从一开始就失去了你的清单。尝试这个：

```
int n;
NodePtr head, ptr;
ptr = new Node;
head = ptr;
while (cin >> n){
    ptr->x = n;
    ptr->next = new Node;
    ptr = ptr->next;
} 
```

然后您可能想要删除最后一个 ptr->next 并将其设置为 0 以节省内存并避免打印出额外的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T04:56:48.223

您没有连接列表。每个新项目都将为`->next`NULL。

你说`ptr = ptr->next`（它是NULL）但是下一次迭代用新分配的节点覆盖ptr。您需要重新排列代码以将节点串在一起......

一种方法是`ptr->next = head`让你的新节点指向旧的头。然后`head = ptr`将头部移动到新节点。例如：

在开头插入（例如对于 LIFO，后进先出）：

```
while (cin >> n){
    ptr = new Node;
    ptr->x = n;
    ptr->next = head;
    head = ptr;
} 
```

在末尾插入（对于 FIFO）：

```
while (cin >> n){
    if(!head) {
        head = new Node;
        ptr = head;
    }
    else
    {
        ptr->next = new Node;
        ptr = ptr->next;
    }
    ptr->next = NULL;
    ptr->x = n;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T05:20:57.317

首先，您的 typedef :`typedef struct Node;`不正确。您使用 sintaxe 声明一个结构：

```
struct st_Name{
    int field1;
    double field2;
}; 
```

typedef 就像一个名称归属函数。您应该（为了便于阅读/工作）更改结构的名称，这是可能的，在声明它之后，使用：

```
typedef struct Node_st Node; 
```

或者，全部在一个声明中：

```
typedef struct node_st{
  int x;
  struct node_st *next;
}Node; 
```

在上面的段中，请注意我也将 更改`NodePtr`为`struct node_st *Next`，原因是：如果你在一个段中完成所有操作，因为 c++ 代码是线性读取的 top->down(kinda)，如果你尝试在结构声明之前创建`NodePtr`一个指针`Node`你会得到一个错误，如果你稍后再做并`NodePtr`在结构中使用你也会有一个错误。编译器还不知道该结构存在，因此它会说您正在尝试命名不存在的东西。

然后，您的指针操作是错误的。

```
...
while (cin >> n){
    ptr = new Node;
    ptr->x = n;
    ptr->next = NULL;  // You're making the next slot inexistent/NULL
    ptr = ptr->next;   // You're just setting ptr to NULL
}
... 
```

我认为您想要的是继续添加到末尾，将头部保持在第一个数字中。对于第一种情况，您可以简单地使用 if/else 语句来执行此操作：

```
 while (cin >> n){
     if(head == NULL){
        ptr = new Node;
        ptr->x = n;
        ptr->next = NULL;
        head = ptr;
     }else{ 
        ptr->next = new Node;
        ptr = ptr->next;
        ptr->x = n;
        ptr->next = NULL; 
     }
} 
```

这样，您的插入最终会发生，因此您的打印循环应该可以工作。

希望这可以帮助。***

# c# - 如何避免在 Razor 视图中为 Styles.Render 方法使用完全限定名称

> ID：14544547
> 
> 赞同：1
> 
> 时间：2013-01-27T04:52:51.993
> 
> 标签：c#, razor

我正在尝试在我的项目中实现 Styles.Render 方法，并且我正在使用从新建项目向导创建的单独的、预构建的 MVC 4 Internet 应用程序项目作为我的模型。在预建的 MVC 网站的 _Layout.cshtml 布局视图中，以下代码出现在 head 标签内：

```
@Styles.Render("~/Content/css") 
```

但是，在我自己的项目中，仅使用 @Styles.Render 语法似乎不起作用。由于某种原因，视图不喜欢它。我不得不求助于使用该方法的完全限定版本：

```
@System.Web.Optmization.Styles.Render("~/Content/css") 
```

我想知道我遗漏了什么，或者如何避免必须以上述预构建版本的方式在 Razor 视图中使用完全限定的类型和成员语法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:14:37.500

您在视图文件夹中的 web.config 中缺少 System.Web.Optimization 命名空间引用

```
<configuration>
 <system.web.webPages.razor>
  <pages basePageType="...">
   <namespaces>
    <add namespace="System.Web.Optimization"/>
   </namespaces>
  </pages>
 </system.web.webPages.razor>
</configuration> 
```

# ocaml - 复杂数据结构上的模式匹配ocaml

> ID：14544549
> 
> 赞同：3
> 
> 时间：2013-01-27T04:53:16.650
> 
> 标签：ocaml

我对 OCaml 完全陌生，所以我在基础知识方面遇到了一些麻烦。对于我的程序，我必须将核苷酸与它的补体（G -> C，C -> G，A -> T，T -> A）进行匹配，以便找到双螺旋的另一半。一般的想法是 DNA 由 2 个互补的螺旋组成，每个螺旋都是核苷酸序列。目前，我正在尝试计算双螺旋的另一半。

到目前为止，我已经用枚举表示了核苷酸，并用对应于一个螺旋的核苷酸列表表示了 DNA。

```
type nucleotide = 
| G 
| C 
| A 
| T

type helix = nucleotide list

let rec complementary_helix (x:helix): helix =
| [G] -> [C]
| [C] -> [G]
| [A] -> [T]
| [T] -> [A]
end 
```

我知道这里缺少一些东西，但我不知道该怎么做。有人可以引导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T05:01:13.457

你基本上只是缺少`List.map`：

```
let complement = function
| G -> C
| C -> G
| A -> T
| T -> A

let complementary_helix (x: helix) : helix =
    List.map complement x 
```

（对于它的价值，没有必要指定类型。OCaml 将推断类型。为文档指定它们是一种很好的风格，但如果它们很明显，则可能不是。）

**编辑**

好的，我想这是一个家庭作业问题，您应该使用递归来解决问题。

考虑递归的方式是你想解决一小部分问题，这给了你一个更小的问题要解决。您将较小的问题传递给自己（在解决您的小问题之前或之后）。您还需要知道问题何时变得如此小以至于没有更多工作要做。

在你的情况下，小部分是将一个核苷酸翻译成它的补体。你正在做那个半OK（你有列表，你真的只想在单核苷酸上工作）。但是您并没有将问题的其余部分传递给自己以递归方式解决。您也没有检查问题是否如此小而无事可做。

对于列表上的函数，大约 99% 的情况下，您将通过将列表拆分为头部（单个元素）和尾部（一个小一倍的列表）来缩小问题。这对你有用。

**编辑 2**

作为列表递归的示例，下面是一个将列表中的所有整数相加的函数：

```
let rec sum l =
    match l with
    | [] -> 0
    | head :: tail -> head + sum tail 
```

这有我描述的所有部分。用于判断问题何时是微不足道的`match`（当列表为空时）并将列表拆分为头部和尾部。假设你有尾巴的总和（你可以递归地得到），答案很明显。你只需要把头加到这个总和上。你只需要问自己（几乎总是）：如果我有列表尾部的答案，我需要做什么才能将它与头部结合起来？

# ios - 在代码中将 PKPass 附加到电子邮件

> ID：14544552
> 
> 赞同：1
> 
> 时间：2013-01-27T04:53:57.083
> 
> 标签：ios, email, nsdata, passbook, passslot

我正在使用 PassSlot，它可以即时创建一个可以添加到存折的通行证。我正在尝试将其下载到设备以允许附加到电子邮件。这是我到目前为止所拥有的：

```
[PassSlot passFromTemplateWithName:@"LoveCouponCards" withValues:values pass:^(PSPass *pass) {
    [PassSlot downloadPass:pass pass:^(PSPass *pass) {
        PKPass *pkpass = [pass performSelector:@selector(pass)];
        NSLog(@"Pass: %@", pkpass);

        MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
        picker.mailComposeDelegate = self;

        NSArray *toRecipients = [NSArray arrayWithObject:@"friend@example.com"];

        [picker setToRecipients:toRecipients];

        [picker addAttachmentData:pkpass mimeType:@"application/vnd.apple.pkpass" fileName:@"HI"];

        // Fill out the email body text
        NSString *emailBody = \\
        [picker setMessageBody:emailBody isHTML:NO];

        [self presentViewController:picker animated:YES completion:nil];

    }];
}]; 
```

问题是在电子邮件的 addAttachment 部分中，它引发了一个错误，即 NSData 基本上与 PKPass 无关。如何将通行证转换为 NSData 以便我可以附加它？

更新：

我试着做

```
 NSURL *url = pkpass.passURL;
 NSData *so = [NSData dataWithContentsOfURL:url]; 
```

然后将'so'作为addAttachment，但它没有附加任何电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:44:08.330

首先， 的`passURL`属性`PKPass`并不像你想象的那样工作。它*不是*通行证本身的 URL。这是一个打开 Passbook 应用程序并加载请求的通行证的 URL。

您可以*创建*一个`PKPass`with `NSData`，但不能逆转该过程。听起来好像您正试图在设备上获得通行证，然后通过电子邮件发送它。这是不允许的 - 如果是这样，人们可以轻松地复制和分发通行证（这不一定是一件好事）。

如果您想通过电子邮件向用户发送通行证，您需要在服务器端而不是客户端进行。恐怕您无法使用`PassKit`. 对不起！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:19:11.793

Unfortunately the PassKit library does not provide a way to get back the NSData from a PKPass.

We already provide an [API call](http://www.passslot.com/developer/api/resources/showPass) that allows you to get the raw data of a pass. We will extend our PassSlot SDK with a method that allows you to get the NSData without having the manually call this API method.

**Update**

The new SDK version 0.5 is now released. You can attach the pass with the following code:

```
[PassSlot passFromTemplateWithName:@"LoveCouponCards" withValues:values pass:^(PSPass *pass) {
    [PassSlot downloadPass:pass pass:^(PSPass *pass) {

        MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
        picker.mailComposeDelegate = self;

        [picker setToRecipients:@[@"friend@example.com"]];
        [picker addAttachmentData:pass.data mimeType:@"application/vnd.apple.pkpass" fileName:@"LoveCouponCard.pkpass"];
        [picker setMessageBody:emailBody isHTML:NO];

        [self presentViewController:picker animated:YES completion:nil];
    }];
}]; 
```

# java - HBase第一次使用，连接本地主机出错

> ID：14544555
> 
> 赞同：0
> 
> 时间：2013-01-27T04:54:50.963
> 
> 标签：java, ssh, hbase

部署了一个“joynet hadoop smartmachine”来修补 HBase。它安装了所有东西。我使用 PuTTY 进行 SSH，我转到 /opt/local/bin/hbase shell 之类的可执行文件。一切都很好，然后我尝试像这样创建我的测试表：

```
create 'test', 'cf' 
```

发生了一堆事情，然后出现了：

```
ERROR zookeeper.CLientCnxnSOcketNIO: Unable to open socket to localhost/127.0.0.1:2181 
```

谷歌搜索后，我在这里遇到有人说要在我的配置文件中添加这样的内容：

```
config.set("hbase.zookeeper.quorum", "172.80.72.86"); 
```

我找不到应该添加它的配置文件。我的其他问题：

```
172.80.72.86 
```

那不是我的IP，这只是我发现的一个例子。该IP地址应该是服务器的IP地址还是我自己的IP地址？我的服务器 IP 是 165.225.130.251

如何仅从命令行将其附加到配置文件中？

我对此完全陌生。对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:17:34.240

在 hbase-site.xml(/etc/hbase/conf) 中添加以下属性

```
 <property>
            <name>hbase.zookeeper.quorum</name>
            <value>IP-of-Zookeeper-Installed Machine</value>
    </property> 
```

# ios - 如何在 UI 标签中显示 int？

> ID：14544557
> 
> 赞同：-4
> 
> 时间：2013-01-27T04:55:28.300
> 
> 标签：ios

我需要在 UILabel 中的 AppDelegate.mm 中显示一个 int。我是新手，所以我不知道该怎么做。Xcode，4.3。现在，我在 xib 文件中有一个 UILabel，在 AppDelegate.mm 中有一个整数 y。我只需要在 UILabel 中显示 y。我不知道如何将这两个东西联系起来。谢谢，汤姆·洛瑞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:57:12.513

试试这个函数在标签中显示一个 Int：

```
self.label.text = [NSString stringWithFormat:@"%d", 3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:59:37.187

```
self.Yourlabel.text = [NSString stringWithFormat:@"%d", Y]; 
```

**变量 Y 是声明的 int 值...**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T04:59:37.247

```
 int yourInt;
       NSString *num = [NSString stringWithFormat:@"%d", youInt];
       UILabel *lab = [UILabel alloc] initWhithFrame:CGRectMake(200, 200, 100, 30)];
       lab.text = num;
       [self.view addSubView:lab]; 
```

# nhibernate - NHibernate Profiler 在骗我？

> ID：14544572
> 
> 赞同：3
> 
> 时间：2013-01-27T04:58:16.390
> 
> 标签：nhibernate, fluent-nhibernate, decimal, nhprof

## 我使用 Fluent NHibernate 作为我的 ORM，当我执行它时，NH Profiler 向我抛出了这个 sql 查询

```
INSERT INTO [Location]
        (Name,
         Lat,
         Lon)
VALUES      ('my address' /* @p0 */,
         -58.37538459999996 /* @p1 */,
         -34.5969468 /* @p2 */); 
```

* * *

顺便说一句，这是绝对正确的。这是我的位置表的设计：

```
[Id] [int] IDENTITY(1,1) NOT NULL,
[Name] [varchar](255) NULL,
[Lat] [decimal](23, 20) NULL,
[Lon] [decimal](23, 20) NULL, 
```

* * *

但是当我在sqlserver management studio中看到插入的数据时，我可以看到它已插入

-58.37538000000000000000 而不是 -58.37538459999996000000 和

-34.59694000000000000000 而不是 -34.59694680000000000000。

当我手动执行此插入查询时，它会正确插入值（Lat 列的 14 位小数），但如果 nhibernate 这样做，它只会插入 5 位小数。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T06:57:27.550

该问题与默认值`precision`和`scale`. NHibernate 默认`decimal`表示是`decimal (28,5)`，所以最后的 INSERT 语句只包含 5 个小数位。XML 映射

```
<property name="Lat" precision="23" scale="20" />
<property name="Lon" precision="23" scale="20" /> 
```

流利：

```
...
.Precision(23)
.Scale(20) 
```

现在 INSERT 语句将是`decimal (23,20)`.

# distinct - SphinxSE 不同的空结果

> ID：14544573
> 
> 赞同：0
> 
> 时间：2013-01-27T04:58:18.597
> 
> 标签：distinct, sphinx

我在 sphinx se 控制台中运行此查询：

```
SELECT @distinct FROM all_ips GROUP BY ip1; 
```

我得到这个结果：

```
+------+--------+
| id   | weight |
+------+--------+
|    1 |      1 |
|    2 |      1 |
|    3 |      1 |
|    9 |      1 |
|   15 |      1 |
|   16 |      1 |
|   17 |      1 |
|   20 |      1 |
|   21 |      1 |
|   25 |      1 |
|   26 |      1 |
|   27 |      1 |
|   31 |      1 |
|   32 |      1 |
|   38 |      1 |
|   39 |      1 |
|   40 |      1 |
|   46 |      1 |
|   50 |      1 |
|   51 |      1 |
+------+--------+
20 rows in set (0.57 sec) 
```

如何获得唯一值的数量？为什么@distinct 列没有显示在结果中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:07:12.773

1）我不认为那是 sphinxSE - 你真的是说 sphinxQL 吗？这看起来更像 sphinxQL。

2）不同的列？您需要向 sphinx 出售要计算不同值的属性。在 sphinxQL 中使用 COUNT(DISTINCT column_name)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:39:27.477

您将需要简单的 SQL 语句来获取计数。像这样的东西

```
SELECT count(ip1),ip1 
FROM all_ips 
GROUP BY ip1; 
```

# objective-c - 将 NSBItmapImageRep 保存为没有 alpha 的灰度 png

> ID：14544582
> 
> 赞同：0
> 
> 时间：2013-01-27T04:59:44.243
> 
> 标签：objective-c, cocoa, image-processing

我尝试在没有 alpha 通道的情况下保存 NSBItmapImageRep。我的代码是：

```
NSBitmapImageRep* rep = [[NSBitmapImageRep alloc] initWithCIImage:img];
NSColorSpace *targetColorSpace = [NSColorSpace genericGrayColorSpace];
NSBitmapImageRep *targetImageRep = [rep bitmapImageRepByConvertingToColorSpace:targetColorSpace 
                                                               renderingIntent:NSColorRenderingIntentPerceptual];

NSData* PNGData = [targetImageRep representationUsingType:NSPNGFileType properties:nil];
[PNGData writeToURL:url atomically:YES];    
[rep release]; 
```

但它不起作用。它使用 GrayScaleAlpha 类型保存我的图像。如何指定使用 alpha？

# mysql - 在一个事件调度程序中更新和删除

> ID：14544584
> 
> 赞同：1
> 
> 时间：2013-01-27T04:59:57.060
> 
> 标签：mysql, sql, sql-update, sql-delete

我正在用 php 创建房间预订。

我有两张桌子：

桌子`RESERVE`

*   Reserve_id
*   room_id
*   room_reserve_qty
*   查看

桌子`ROOM`

*   room_id
*   房间数量

当“结帐”日期达到今天的日期时，保留表中的该行将被删除。实际上我已经有该事件：

```
DROP EVENT `auto_delete_chckout`;
CREATE DEFINER=`root`@`localhost` 
EVENT `auto_delete_chckout` 
ON SCHEDULE EVERY 1 MINUTE STARTS '2013-01-26 13:09:15' 
ON COMPLETION NOT PRESERVE ENABLE DO 
DELETE FROM reserve WHERE checkout <= CURDATE() 
```

所以我的问题是：

如果*要删除预订*，则`room_reserve_qty` *必须将其添加*到`room_qty`房间表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:05:48.203

在删除 table 上的记录之前`reserve`，您需要先更新 table 的记录，`room`以便您知道哪些`room_id`将被更新，例如

```
UPDATE  room a
        INNER JOIN reserve b
            ON a.room_id = b.room_id
SET     a.room_qty = a.room_qty + b.room_reserve_qty
WHERE   b.checkout <= CURDATE();

DELETE FROM reserve WHERE checkout <= CURDATE(); 
```

完整代码：

```
DROP EVENT `auto_delete_chckout`;
DELIMITER $$
CREATE EVENT `auto_delete_chckout` 
    ON SCHEDULE EVERY 1 MINUTE STARTS '2013-01-26 13:09:15' 
    ON COMPLETION NOT PRESERVE ENABLE 
    DO 
        BEGIN
            UPDATE  room a
                    INNER JOIN reserve b
                        ON a.room_id = b.room_id
            SET     a.room_qty = a.room_qty + b.room_reserve_qty
            WHERE   b.checkout <= CURDATE();

            DELETE FROM reserve WHERE checkout <= CURDATE();
        END $$
DELIMITER ; 
```

 ~~**更新**

既然你提到你是新人，`Event`我*认为这*会导致服务器上的大量工作。A`TRIGGER`可能是另一种方式。A`Trigger`基本上是每次在桌子上发生事件（*之前或之后*`INSERT`）时触发的代码块，例如：`UPDATE`和`DELETE`。

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:12:30.780

首先，您可能不需要每分钟触发您的事件，因为您只检查日期部分。您可能希望每天执行一次。

其次，我会将更新`room_qty`逻辑放在[触发器](http://dev.mysql.com/doc/refman/5.6/en/create-trigger.html)中。这样，无论您如何删除预订，您`room_qty`都是正确的。

您的触发器可能如下所示

```
DELIMITER $$

CREATE TRIGGER reserve_before_delete BEFORE DELETE ON reserve
    FOR EACH ROW BEGIN
        UPDATE room
           SET room_qty = room_qty + OLD.room_reserve_qty 
         WHERE room_id = OLD.room_id;
    END;
$$

DELIMITER ; 
```

`DELETE`当您使用触发器时，您的代码保持不变。~~~~

# python - 如何子类化构建命令？

> ID：14544587
> 
> 赞同：12
> 
> 时间：2013-01-27T05:00:35.280
> 
> 标签：python, python-3.x, setuptools

主题是自描述的：我需要对`setup.py build`命令进行子类化以执行其他构建步骤。但是我找不到任何`build`可以继承的命令类。我一直在尝试：

```
class BuildCommandProxy(setuptools.command.build):
    pass 
```

和

```
class BuildCommandProxy(distutils.command.build):
    pass 
```

乃至：

```
class BuildCommandProxy(setuptools.distutils.command.build):
    pass 
```

没有任何成功。

**更新**：寻找[如何](https://stackoverflow.com/a/11332078/359730)用`setuptools`.

**UPDATE2**：我有一些自定义命令实现：

```
class CustomCommand(setuptools.Command):
    # ... 
```

我想实现的是将这个命令传递给`cmdclass`这样的：

```
cmdclass={
    "build": CustomCommand,
} 
```

然后在执行一些自定义步骤后调用原始`build`文件`CustomCommand.run`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T11:08:35.973

Setuptools 不会覆盖`distutils` `build`命令本身；只有`build_py`和`build_ext`子命令。

因此，要创建自己的子类，您需要从包含一个类（的子类）的`distutils.command.build` *模块*中导入：`build``Command`

```
import distutils.command.build

class BuildCommandProxy(distutils.command.build.build):
    pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-02T01:36:04.120

为了完整起见，这里是如何添加自定义构建操作的完整示例：

```
import distutils.command.build

# Override build command
class BuildCommand(distutils.command.build.build):

    def run(self):
        # Run the original build command
        distutils.command.build.build.run(self)
        # Custom build stuff goes here

# Replace the build command with ours
setup(...,
      cmdclass={"build": BuildCommand}) 
```

# python - python mechanize提交表单将我踢回root

> ID：14544590
> 
> 赞同：1
> 
> 时间：2013-01-27T05:01:06.237
> 
> 标签：python, forms, cookies, submit, mechanize

我有一个机械化python脚本，用于提交表格以查询药物信息。当我运行它时，它没有给我任何错误消息，但是当我查看响应时，它不是我在浏览器视图源页面上看到的。提交后我检查了网址：

这是我得到的：

[http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm](http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm)

这是我应该得到的地址：

[http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm?fuseaction=Search.DrugDetails](http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm?fuseaction=Search.DrugDetails)

我看到第二个 url 不包含我的查询文本，这是否意味着我需要 cookie？如果是这样，如何？

这是我的代码片段：

```
br = mechanize.Browser()
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)
....
br.addheaders = [('User-agent', 'Mozilla/6.0 (X11; U; i686; en-US; rv:1.9.0.1) Gecko/2008071615 OS X 10.2 Firefox/3.0.1')]

fda_url2 = 'http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm?fuseaction=Search.Addlsearch_drug_name'

print br.open(fda_url2).geturl()

for f in br.forms():
   print 'this is a form'
   print f

br.select_form('searchoptionB')
br.form['ApplNo'] = '018780'
html = br.submit(name = 'Search_Button')

print html.geturl() 
```

打印表单输出为：

```
<searchoptionB POST http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm application/x-www-form-urlencoded
  <HiddenControl(fuseaction=Search.SearchAction) (readonly)>
  <HiddenControl(SearchType=AddlSearch) (readonly)>
  <HiddenControl(SearchOption=B) (readonly)>
  <TextControl(ApplNo=)>
  <SubmitControl(Search_Button=Submit) (readonly)>
  <SubmitControl(clearcriteria=Clear) (readonly)>> 
```

对不起，很长的帖子；p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:46:10.357

**UPD**关于您的评论。这是我的测试文件：

```
#!/usr/bin/env python
import mechanize
import cookielib

br = mechanize.Browser()
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)
br.addheaders = [('User-agent', 'Mozilla/6.0 (X11; U; i686; en-US; rv:1.9.0.1) Gecko/2008071615 OS X 10.2 Firefox/3.0.1')]

fda_url2 = 'http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm?fuseaction=Search.Addlsearch_drug_name'

print br.open(fda_url2).geturl()

for f in br.forms():
   print 'this is a form'
   print f

br.select_form('searchoptionB')
br.form['ApplNo'] = '018780'
html = br.submit()

print br.response().read() 
```

这就是我在运行它时得到的：

```
$ ./test.py  | grep HUM
            <td valign="top" class="product_table" height="24"><a href="index.cfm?fuseaction=Search.Overview&DrugName=HUMULIN%20R">
 HUMULIN R
 INSULIN RECOMBINANT HUMAN
            <td valign="top" class="product_table" height="24"><a href="index.cfm?fuseaction=Search.Overview&DrugName=HUMULIN%20R%20PEN">
 HUMULIN R PEN
 INSULIN RECOMBINANT HUMAN 
```

也许您以某种方式更改了脚本或查询了不同的页面？

* * *

您是否尝试在浏览器中提交此表单？

如果我导航到[这个 URL](http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm?fuseaction=Search.Addlsearch_drug_name)，用“018780”填写“选项 B”并点击“提交”，浏览器确实会将我重定向到[http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm](http://www.accessdata.fda.gov/scripts/cder/drugsatfda/index.cfm)，其中包含搜索结果。

尝试将其添加到代码片段的末尾：

```
print br.response().read() 
```

这将输出页面的 HTML，并且它确实包含预期的搜索结果。

> 我看到第二个 url 不包含我的查询文本，这是否意味着我需要 cookie？如果是这样，如何？

此表单通过 POST 发送，在这种情况下，所有参数都嵌入在请求正文中（RFC 2616）。

# css - Rails 助手中的类名

> ID：14544593
> 
> 赞同：0
> 
> 时间：2013-01-27T05:01:41.357
> 
> 标签：css, ruby-on-rails

我像这样向 Rails image_tag 助手添加了一个“地图”类

```
<%= image_tag "http://maps.google.com/maps/api/staticmap?size=300x200&sensor=false&zoom=16&markers={{ latitude }}%2C{{ longitude }}", :class => "map" %> 
```

我尝试使用地图类设置特定于该图像的样式，以便默认情况下该图像不可见：

```
img {
border: solid 0px black;
}

img .map { visibility: hidden

} 
```

但是，地图类图像默认是可见的

'map' 类在 html 中可见。

```
<img alt="Staticmap?size=300x200&amp;sensor=false&amp;zoom=16&amp;markers=40.6891947%2c-74.0444169" class="map" src="http://maps.google.com/maps/api/staticmap?size=300x200&amp;sensor=false&amp;zoom=16&amp;markers=40.6891947%2C-74.0444169"> 
```

当我检查元素时，Chrome 控制台显示它只有样式`img`正在注册，而不是`img .map`

你能看出我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:03:50.323

你的 CSS 应该说

```
img.map {
    visibility: hidden
} 
```

带有空格的是 CSS[元素元素](http://www.w3schools.com/cssref/sel_element_element.asp)选择器。它选择元素内的元素。您正在寻找使用[类选择器](http://www.w3schools.com/cssref/sel_class.asp)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T05:04:16.697

**消除IMG**和**.map**类之间的差距。像这样写：

```
img.map { visibility: hidden} 
```

因为有了空格，术语会发生变化`img .map`，因此在**img**标签 中表示 class **.map**并且表示带有**img标签的 class** **.map**。**`img.map`**

 ******阅读更多[内容 CSS 选择器中的空格是什么意思？即.classA.classB 和.classA.classB 有什么区别？](https://stackoverflow.com/questions/1126338/difference-between-classa-classb-and-classa-classb-in-css)******

# php - 多图上传失败

> ID：14544594
> 
> 赞同：0
> 
> 时间：2013-01-27T05:01:56.030
> 
> 标签：php, html, file, image-upload

我正在尝试允许在表单中上传多个图像。但是它并不完全有效，我无法发现问题。

表格如下所示：

```
<form method="post" action="add-property.php" enctype="multipart/form-data">
<input type="file" multiple="multiple" name="files[]" />
<input type="submit" name="submit" class="property-submit" value="Submit Property" />
</form> 
```

随后的 PHP（在同一页面上）是：

```
//Image logic    
for ($i = 0; $i < count($_FILES['files']['name']); $i++) {
    if (($_FILES['files']['type'] == "image/jpeg") || ($_FILES['files']['type'] == "image/png") || ($_FILES['files']['type'] == "image/jpg")) {
        if ($_FILES['files']["error"] > 0) {
            echo "Return Code: ".$_FILES['files']["error"]."<br />";
        }
        else {
            $target = $_SERVER['DOCUMENT_ROOT'].'/images/property-images/';
            if (file_exists($target.$currUser.$_FILES['files']['name'])) {
                echo $file["name"] . "already exists.";
            }
            else {
                move_uploaded_file($_FILES['files']["tmp_name"],
                $target.$currUser.$_FILES['files']["name"]);
                echo "Stored in: ".$target.$currUser.$_FILES['files']["name"];
            }
        }
    }
    else {
        echo 'error';
    }
} 
```

$currUser 是用户的当前用户名。

问题是 - 当我尝试上传文件时。什么都没发生。它回显一个错误，但文件类型绝对正确。没有图像发送到该文件夹​​。我哪里会出错？

编辑 - 请求的 var 转储：

```
array(1) {
  ["files"]=>
  array(5) {
    ["name"]=>
    array(1) {
      [0]=>
      string(17) "Chrysanthemum.jpg"
    }
    ["type"]=>
    array(1) {
      [0]=>
      string(10) "image/jpeg"
    }
    ["tmp_name"]=>
    array(1) {
      [0]=>
      string(14) "/tmp/php1WEAjj"
    }
    ["error"]=>
    array(1) {
      [0]=>
      int(0)
    }
    ["size"]=>
    array(1) {
      [0]=>
      int(879394)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:14:25.050

排除`count($_FILES['files']['name'])`，您需要添加`[$i]`到每个`$_FILES`引用，例如，`$_FILES['files']["tmp_name"][$i]`。

另外，`$file["name"]`应该是`$_FILES['files']["name"][$i]`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T06:35:16.350

```
for ($i = 0; $i < count($_FILES['file']['name']); $i++) {

if (($_FILES['file']['type'][$i] == "image/jpeg") || ($_FILES['file']['type'][$i] == "image/png") || ($_FILES['file']['type'][$i] == "image/jpg")) {
    if ($_FILES['file']["error"][$i] > 0) {
        echo "Return Code: ".$_FILES['file']["error"][$i]."<br />";
    }
    else {

        if (file_exists("upload/".$_FILES['file']['name'][$i])) {
            echo $_FILES['file']["name"][$i] . "already exists.<br>";
        }
        else {
            move_uploaded_file($_FILES['file']["tmp_name"][$i],
                "upload/".$_FILES['file']["name"][$i]);
            echo "Stored in: ". "upload/" .$_FILES['file']["name"][$i];
        }
    }
}
else {
    echo 'error';
} 
```

}

# php - cgridview 相关字段过滤

> ID：14544602
> 
> 赞同：1
> 
> 时间：2013-01-27T05:03:51.340
> 
> 标签：php, yii, cgridview

我有一个问题，我已经解决了除一个 cgridview 过滤器之外的所有问题，这是一个相关领域。

我正在使用 Seenivasan 提供的解决方案，但相关字段状态未添加到字符串中。

这是 cgridview ：-

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'tbl-orders-grid',
    'dataProvider'=>$dataProvider,
    'afterAjaxUpdate'=>"function() {
                                                jQuery('#Orders_date_first').datepicker(jQuery.extend({showMonthAfterYear:false}, jQuery.datepicker.regional['id'], {'showAnim':'fold','dateFormat':'yy-mm-dd','changeMonth':'true','changeYear':'true','constrainInput':'false'}));
jQuery('#Orders_date_last').datepicker(jQuery.extend({showMonthAfterYear:false}, jQuery.datepicker.regional['id'], {'showAnim':'fold','dateFormat':'yy-mm-dd','changeMonth':'true','changeYear':'true','constrainInput':'false'}));
                                                }",

'filter'=>$model,
'columns'=>array(
    array(
        'name'=>'id',
        'type'=>'raw',
        'value'=>'str_pad($data->id,8-strlen($data->id),"0",STR_PAD_LEFT)',
        'htmlOptions'=>array('style' => 'text-align: right;width: 60px;')
    ),
    array(
            'name'=>'date_order_placed',
            'filter'=>$dateisOn,
            'value'=>'date("d-m-Y",strtotime($data->date_order_placed))',
            ), 
    array(
      'name'=>'status',
      'type'=>'raw',
      //'htmlOptions'=>array('id' => 'order_status_search'),
      'value'=>'CHtml::value($data,"status.orders_status_name")',
      'filter'=>CHtml::listData(OrderStatus::model()->findAll(
                  array(
                   'select'=>array('orders_status_name'),
                   'distinct'=>true

                  )),"orders_status_name","orders_status_name")//this is the focus of your code

   ),

    array(
        'class'=>'EButtonColumnWithClearFilters',
         'clearVisible'=>true,
        'template'=>'{view}{email}',
        'buttons'=>array
        (
            'email' => array
            (
                'label'=>'Reprint invoice and email to yourself',
                'imageUrl'=>Yii::app()->request->baseUrl.'/images/email.png',
                'url'=>'Yii::app()->createUrl("orders/ureprint", array("id"=>$data->id))',

            ),

        ),
    ),
),
)); ?> 
```

这是将当前过滤器值添加到 url 的 php 和 js。

```
echo CHtml::button('List Orders',array('id'=>'listelement'));

Yii::app()->clientScript->registerSCript('test','
$("body").on("click","#listelement",function(){
        var str="&";
    $.each($("#tbl-orders-grid input").serializeArray(),function(i,j){
            str=str+j.name+"="+j.value+"&";

            });

            window.location="'.CHtml::normalizeUrl(array('orders/index')).'"+str;
    });

'); 
```

其他过滤器、日期和 id 可以完美运行。它们被添加到上面的 url。状态不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:56:39.020

1-您需要在模型 serach() 方法中定义新过滤器，例如

```
 $criteria->compare('Restaurant.Name',$this->Name,true); 
```

Restaurant 是您的关系键，名称：与此 fk 相关的另一个表中的值

2-您必须添加 gridview 列的值，例如：

看法：

```
array(
          'name' => 'Restaurant.Name',
          'header' => 'Username',
          'filter' => CHtml::activeTextField($model, 'name'),
          'value' => '$data->Restaurant->Name', 
```

此链接将帮助您 [yii CGridView 过滤器与关系](https://stackoverflow.com/questions/11758189/yii-cgridview-filter-with-relations)

# c++ - 新的和删除的混淆

> ID：14544610
> 
> 赞同：0
> 
> 时间：2013-01-27T05:06:39.370
> 
> 标签：c++, pointers, memory-management

我在使用`new`and`delete`运算符时遇到了一个小问题。我在很多地方读到每个`new`运算符都必须与 a 相对应`delete`，据我所知，使用创建的变量`new`将持续存在，直到它们被 that 击中`delete`。如果你想看看下面的代码，它很长但很简单：

```
#include <iostream>

using namespace std;

int* testFunction1();
int* testFunction2();

int main(){
    int* ptr1 = testFunction1();
    int* ptr2 = testFunction2();

    cout << *ptr1 << endl; // outputs 5
    cout << *(ptr1 - 1) << endl; // outputs random int
    cout << *ptr2 << endl; // outputs random int

    cout << ptr1 << endl; //prints address of b from testFunction1()
    cout << ptr1 - 1 << endl; // prints address of a and c from testFunction1()
    cout << ptr2 << endl; // prints address of a and c from testFunction1()

    cout << endl;

    // delete ptr1; won't work
    return 0;
}

int* testFunction1(){
    int a = 5, b = 10;
    int* pointerToInt1 = new int;
    pointerToInt1 = &a;
    pointerToInt1 = &b;
    cout << &a << endl;
    cout << &b << endl;
    return pointerToInt1;
}

int* testFunction2(){
    int c = 5;
    int* pointerToInt2 = &c;
    cout << &c << endl;
    return pointerToInt2;
} 
```

我有两个问题：

1.  我认为`testFunction1()`，我正在按值返回指针。但我不知道如何解决这个问题，返回对指针的引用，以便我可以在 main 方法（或任何其他方法）中释放内存。

2.  为什么我在取消引用时得到 5 作为输出`*ptr1`？我的意思是，从地址输出中，很明显分配给`c`in的值`testFunction2()`存储在那里，但为什么会发生这种情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:10:45.297

您正在将指针设置为在堆栈上分配的变量：

```
int a = 5, b = 10;
int* pointerToInt1 = new int; // allocates an int on heap
pointerToInt1 = &a; // overwrite pointer with a local variable 
```

发生的情况是，您返回的指针指向一个在堆栈上具有自动分配的值，因此当函数退出其范围时，pinter 变得无效。

此外，由于您丢失了对在堆上动态分配的对象的任何引用，因此您无法再删除它，因此它是内存泄漏。

最后 delete 尝试删除一个指针，该指针指向在调用期间位于堆栈上的地址，`testFunction1`因此它不再是有效指针，因此`delete`不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:18:33.753

让我们不要把你的问题放在一边，先解释你的代码。

您声明并定义了一个名为`testFunction1`返回`int`poitner的函数

```
int* testFunction1(){
    int a = 5, b = 10;             // define local variables with initial values. a,b have different memory addresses
    int* pointerToInt1 = new int;  // dynamic allocate pointer(new address) to int
    pointerToInt1 = &a;            // set pointerToInt1 to point to address of a
    pointerToInt1 = &b;            // set pointerToInt1 to point to address of b
    cout << &a << endl;           
    cout << &b << endl;
    return pointerToInt1;          // return pointerToInt1 pointer which currently points to address of b
} 
```

`a,b`是函数内部的局部变量`testFunction1`，它们具有自动持续时间，当函数完成时它们被释放，所以`pointerToInt1`实际上是悬空指针并访问它是未定义的行为。

中还引入了典型的内存泄漏`testFunction1`，分配的原始内存块`new`丢失。

```
int* pointerToInt1 = new int;
pointerToInt1 = &a; 
```

现在，让我们`"fix"`函数`testFunction1`，是的，我的意思是用双引号修复。

```
int* testFunction1(){
    int a = 5, b = 10;             
    int* pointerToInt1 = new int;  
    *pointerToInt1 = a;             // copy a to memory pointerToInt1 
    *pointerToInt1 = b;             // copy b to memory pointerToInt1 
    cout << &a << endl;
    cout << &b << endl;
    return pointerToInt1;           // return pointerToInt1 pointer
} 
```

调用 function 后`testFunction1`，仍然需要删除动态分配的内存块。

```
int *p = testFunction1();
delete p; 
```

现在，如果您回过头来复习您的两个问题，您得到答案了吗？

# uibarbuttonitem - 自定义 UIBarButton 在 UITableView 中未正确显示

> ID：14544612
> 
> 赞同：0
> 
> 时间：2013-01-27T05:06:57.970
> 
> 标签：uibarbuttonitem, navigationbar

我有成功创建出现在导航栏上的自定义 UIBarButtonItem 的代码。我在其他视图控制器中使用该代码，它运行良好，但在 UITableViewController 中，按钮显示为常规 BackButtonItem。有人可以帮我吗？这是我在所有 viewController 的 viewDidLoad 方法中使用的代码

```
@implementation P2OListViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.leftBarButtonItem = nil;
    self.navigationItem.hidesBackButton = YES;

    UIImage *backButtonImage = [UIImage imageNamed:@"button-back@2x.png"];
    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton setImage:backButtonImage forState:UIControlStateNormal];
    backButton.frame = CGRectMake(0, 0, 60, 35);

    [backButton addTarget:self
                   action:@selector(goToMenu:)
         forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *back = [[UIBarButtonItem alloc]initWithCustomView:backButton];
    self.navigationItem.backBarButtonItem = back;

- (void)viewWillAppear:(BOOL)animated {

}

- (void)goToMenu:(id)sender {
[self.navigationController popToRootViewControllerAnimated:YES];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
} 
```

@结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:15:18.213

通过将其 hide 属性设置为 yes 来隐藏默认 backBarButtonItem

```
self.navigationItem.hidesBackButton = YES; 
```

在你看来会出现

```
- (void)viewWillAppear:(BOOL)animated 
{
self.navigationItem.leftBarButtonItem = nil;
    self.navigationItem.hidesBackButton = YES;

    UIImage *backButtonImage = [UIImage imageNamed:@"button-back@2x.png"];
    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton setImage:backButtonImage forState:UIControlStateNormal];
    backButton.frame = CGRectMake(0, 0, 60, 35);

    [backButton addTarget:self
                   action:@selector(goToMenu:)
         forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *back = [[UIBarButtonItem alloc]initWithCustomView:backButton];
    self.navigationItem.backBarButtonItem = back;

} 
```

如果上述方法不起作用，试试这个并看看会发生什么：

```
if (!self.navigationItem.backBarButtonItem.hidden) {
      self.navigationItem.backBarButtonItem.hidden = YES;
   }
   else { 
      NSLog(@"back button already hidden");
   } 
```

# overriding - 如何覆盖 Plone 事件订阅者

> ID：14544614
> 
> 赞同：5
> 
> 时间：2013-01-27T05:07:17.580
> 
> 标签：overriding, plone

我需要用第二个产品扩展一个 Plone 产品 (Products.Poi)。在扩展产品中，我需要覆盖原始的订阅者事件。我试图在 override.zcml 中订阅一个具有相同名称的事件，但第二个事件不覆盖第一个事件，但所有两个事件都被执行。

这里[http://plone.org/products/dexterity/documentation/manual/five.grok/core-components/events](http://plone.org/products/dexterity/documentation/manual/five.grok/core-components/events)似乎是不可能的：

> 与适配器不同，您不能通过使用更具体的接口来覆盖事件订阅者。触发事件时，将执行每个适用的事件订阅者。

有人有诀窍吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T17:33:45.170

Simone Orsi 给了我一个解决方案：[z3c.unconfigure](http://pypi.python.org/pypi/z3c.unconfigure)。

本产品允许禁用 zcml 配置。

为了使用它，我在我的扩展 Poi 产品上执行了这个步骤：

1.  在 setup.py 中添加了“z3c.unconfigure”作为 install_requires
2.  使用 update_tracker_watchers 的新定义创建 event.py
3.  在 overrides.zcml 添加此行以取消配置 Products.Poi.events.update_tracker_watchers 并注册我的新事件

> `<include package="z3c.unconfigure" file="meta.zcml" />`
> `<unconfigure>`
>     `<subscriber`
>         `for="Products.Poi.interfaces.ITracker`
>                   `Products.Archetypes.interfaces.IObjectEditedEvent"`
>         `handler="Products.Poi.events.update_tracker_watchers"`
>     `/>`
> `</unconfigure>`
> `<subscriber`
>     `for="Products.Poi.interfaces.ITracker`
>               `Products.Archetypes.interfaces.IObjectEditedEvent"`
>     `handler=".events.update_tracker_watchers"`
> `/>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T13:20:38.697

当你指定了 overrides.zcml 时，你还需要在 buildout 中注册 zcml 覆盖吗？看看： http: [//developer.plone.org/components/zcml.html](http://developer.plone.org/components/zcml.html?highlight=zcml#overrides) ?highlight=zcml#overrides 它会是这样的：zcml = my.package-overrides

此外，您可以尝试使用 z3c.unconfigure 包：[http ://pypi.python.org/pypi/z3c.unconfigure](http://pypi.python.org/pypi/z3c.unconfigure)

# javascript - 使用 $.cookie 进行滑动切换

> ID：14544615
> 
> 赞同：2
> 
> 时间：2013-01-27T05:07:22.587
> 
> 标签：javascript, cookies, slidetoggle

这是我为我们论坛上的一个小组编写的一段代码，它从 2012 年 7 月到大概 2012 年 12 月一直有效，直到我注意到它不再有效……有什么变化吗？仅供参考，如果相关的话，jquery.cookie.mini.js 安装在 PHPBB 的模板文件夹中。

```
<script>

    // Open / Close Panel According to Cookie //    
    if ($.cookie('streamshow') == 'open' || $.cookie('streamshow') == null){    
        /*$('.slide').slideDown('fast'); // Show on Page Load / Refresh with Animation*/
        $('#streamslide').show(); // Show on Page Load / Refresh without Animation
    } else {
        /*$('.slide').slideUp('fast'); // Hide on Page Load / Refresh with Animation*/
        $('#streamslide').hide(); // Hide on Page Load / Refresh without Animation
    }

    // Toggle Panel and Set Cookie //
    $('#streamclk').click(function(){        
        $('#streamslide').slideToggle('fast', function(){
            if ($('#streamclk').is(':hidden')) {
                $.cookie('streamshow', 'close', { expires: 30 });
            } else {
                $.cookie('streamshow', 'open');
            }
        });
        return false;
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:09:15.753

您是否引用了托管在不再支持 cookie 的某个地方的 jQuery 库？有没有被修改？自动更新是否运行并更新了您的库？

查看页面上所有引用的 jQuery 库。我总共可以算出其中大约 4 个，最后一个引用的库是 1.5.1。

# vhdl - ModelSim - 无法模拟按钮按下

> ID：14544616
> 
> 赞同：0
> 
> 时间：2013-01-27T05:07:38.780
> 
> 标签：vhdl, fpga, modelsim

我想使用四个按钮作为输入，三个七段 LED 显示器作为输出。两个按钮应通过 16 个 RAM 位置上下移动；另外两个应该增加和减少当前显示的内存位置的内容。我有以下两个实体：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity DE2_TOP is

  port (
    KEY : in std_logic_vector(3 downto 0);         -- Push button
    CLOCK_50: in std_logic;
    );

end DE2_TOP;

architecture datapath of DE2_TOP is

begin  
  U1: entity work.lab1 port map (
    key => key,
    clock => clock_50,        
  );

end datapath;

library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity raminfr is                     -STANDARD RAM INFERENCE
    port (
        clock: in std_logic;
        we : in std_logic;
        a : in unsigned(3 downto 0);
        di : in unsigned(7 downto 0);
        do : out unsigned(7 downto 0)
    );
end raminfr;

architecture rtl of raminfr is

type ram_type is array (0 to 15) of unsigned(7 downto 0);
signal RAM : ram_type;
signal read_a : unsigned(3 downto 0);
begin
process (clock)
begin
    if rising_edge(clock) then
        if we = '1' then
            RAM(to_integer(a)) <= di;
        end if;
        read_a <= a;
    end if;
end process;
do <= RAM(to_integer(read_a));
end rtl; 
```

和

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity lab1 is
    port(
        clock : in std_logic;
        key : in std_logic_vector(3 downto 0); 
        );
end lab1;

architecture up_and_down of lab1 is
    signal value_in_ram : unsigned(7 downto 0);
    signal we : std_logic;
    signal value_counter    : unsigned(7 downto 0) ;
    signal register_counter : unsigned(3 downto 0);
        begin
    U1: entity work.raminfr port map (
        a   => register_counter,
        di  => value_counter,
        do  => value_in_ram,
        clock => clock,
        we  => we
    );

    process(clock)
        begin
            if rising_edge(clock) then
                if (key(3)='0' and key(2)='0' and key(1)='1' and key(0)='0') then
                    value_counter <= value_counter + "1";   
                elsif (key(3)='0' and key(2)='0' and key(1)='0' and key(0)='1') then  
                    value_counter <= value_counter - "1";   
                elsif (key(3)='1' and key(2)='0' and key(1)='0' and key(0)='0') then
                    register_counter<= register_counter + "1";
                    value_counter <= value_in_ram;
                elsif (key(3)='0' and key(2)='1' and key(1)='0' and key(0)='0') then
                    register_counter<= register_counter - "1";
                    value_counter <= value_in_ram;
                end if;
            end if;
    end process;
end architecture up_and_down; 
```

我还有以下测试台，我尝试在其中模拟通过 KEY 按下的按钮：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity DE2_TOP_TEST is
end;

architecture BENCH of DE2_TOP_TEST is

    signal KEY :  std_logic_vector(3 downto 0);
    signal CLOCK_50 :  std_logic := '0';
    signal hex4, hex5, hex6 :  std_logic_vector(6 downto 0);           
begin
    clock_50 <= not clock_50 after 50 ns;
    process
        begin
            KEY<="0010";
                    wait for 1 us;
        KEY<="0000";
    end process;

uut:work.DE2_TOP port map (                                                         
    KEY=>key,
    CLOCK_50=>clock_50, 
    hex4=>hex4,
hex5=>hex5,
hex6=>hex6                                 
);
end BENCH; 
```

我的测试台设置如下所示：

![在此处输入图像描述](../Images/7cb29dfc241f3cb46ac9882bba45c72d.png)

为了模拟，我编译了上述所有三个文件，然后模拟了 DE2_TOP_TEST，但结果是我的“KEY”仍然未定义，如下所示（虽然 CLOCK_50 确实获得了我设置的默认值）：

![在此处输入图像描述](../Images/17ff3d8046c998501c157f98250038c3.png)

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:32:22.787

(1) 您在键入要测试的实体上有未连接的端口。这些输入的测试结果与预期的一样 - 特别是 clk，未驱动。

(2) 连接 clk 后，您需要驱动它。

```
signal clk : std_logic := '0'; 
```

和

```
clk <= not clk after 50 ns; 
```

应该给一个10MHz的时钟，在模拟器中检查这个

(3) 用特定的值序列驱动“KEY”

```
subtype keys is std_logic_vector(3 downto 0);
constant count_up : keys := "0001";
constant count_dn : keys := "0010";
constant idle     : keys := "0000"; 
-- etc

    process
    begin
        KEY <= count_up;
        wait for 1 us;
        KEY <= idle;
        wait for ...
-- etc
    end process; 
```

(4) 将 OUTPUTS 带回测试台，以便您检查它们的值。如果要将它们连接到显示器，则无论如何都需要将它们作为顶级（设计）实体中的端口带出来！

然后（稍后，一旦事情开始计划）你可以在测试平台过程中测试它们......

```
 wait for 100 ns;
    -- after the last press, we should have "07" on the display
    assert digit(1) = "0111111" report "Left digit has wrong value" severity ERROR;
    assert digit(0) = "0000111" report "Left digit has wrong value" severity ERROR; 
```

像这样的自检测试平台通过盯着波形来节省调试。只有在测试失败时才需要波形...

# x86 - .align 指令有什么作用？

> ID：14544617
> 
> 赞同：4
> 
> 时间：2013-01-27T05:07:54.037
> 
> 标签：x86

我正在学习 x86，并且试图弄清楚 .align 指令的作用以及它的用途。

Oracle参考[手册](http://docs.oracle.com/cd/E26502_01/html/E28388/eoiyg.html)说：

> .align 指令使生成的下一个数据以模整数字节对齐。整数必须是正整数表达式并且必须是 2 的幂。如果指定，pad 是用于填充的整数字节值。文本部分的 pad 的默认值为 0x90（nop）；对于其他部分，pad 的默认值为零 (0)。

但我不确定这意味着什么。您是否可以参考我可以在哪里阅读更多相关信息或通过示例简要说明？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T05:11:13.413

理解它的作用的关键是理解它为什么存在。

所有计算机都有一个称为*wordsize*的自然边界。此边界通常为 4 字节或 8 字节。

如果 4 和 8 字节值位于这些边界上，CPU 可以更快地从内存加载和存储，并且不会浪费缓存空间。某些类型的 CPU*根本无法*获取未对齐的值。

因此，汇编器中必须有一种机制可以跳到下一个边界，以便标签和存储分配指令可以从更有效的地址开始。

对于指令，奇数边界适用于大多数计算机，但它们仍然会影响性能并浪费缓存空间。

```
 .string "ab\0"
; this next address is 3 
```

对比

```
 .string "ab\0"
    .align 4 # sometimes interpreted as 2**n, so, .align 2
; this next address is 4, and would still be 4 if the string was just "a" 
```

# vim - 有没有办法在 Vim Script 中获取缓冲区的行数？

> ID：14544618
> 
> 赞同：11
> 
> 时间：2013-01-27T05:08:07.110
> 
> 标签：vim

有没有办法只获取 Vim 缓冲区中的行数，而不一定是当前的行数？

用`line('$')`一个可以获得当前缓冲区的最后一行的编号，从而获得行数。`getbufline({expr}, 1 , '$')`可以得到由 给定的缓冲区的行字符串列表`{expr}`，列表大小为行数。

Using`getbufline`有在内存中复制整个文件的开销，只是为了获取它包含的行数。`line`完成这项工作，但仅适用于当前缓冲区。

这应该通过脚本完成，而不是交互方式，并且尽可能减少开销`line('$')`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T05:28:56.973

如果 vim 使用 python 支持编译并且不旧于 7.3.569，您可以使用

```
python import vim
let numlines=pyeval('len(vim.buffers['.({expr}-1).'])') 
```

. 使用支持 python 的旧 vim，您可以使用

```
python import vim
python vim.command('let numlines='+str(len(vim.buffers[int(vim.eval('{expr}'))-1]))) 
```

. 测试表明，对于 11 MiB 的日志文件，第一个解决方案的速度比之前快 209 倍`len(getbufline({expr}, 1, '$'))`（0.000211 与 0.044122 秒）。请注意，缓冲区`vim.buffers`的索引从零开始，而不是从一开始。

# c - 为什么在 Linux 中使用 select

> ID：14544621
> 
> 赞同：40
> 
> 时间：2013-01-27T05:09:00.840
> 
> 标签：c, linux, file-descriptor, select-syscall

我正在通过一个串行程序，我观察到他们`select()`在使用`read()`. 为什么需要这样做。为什么我们不能直接调用`read()`并检查它是否失败？另外，为什么我们必须将文件描述符增加 1 并在我将文件描述符集传递给时传递它`select()`？

例子：

`r=select(fd+1, &fds, NULL, NULL, &timeout);` 其中 fds 已经具有 fd 的值

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-27T05:13:26.253

系统[`select()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)调用告诉您是否有任何数据要读取您感兴趣的文件描述符。严格来说，这是一个文件描述符上的读取操作是否会阻塞的问题。

如果您`read()`在文件描述符上执行——例如连接到串行端口的文件描述符——并且没有要读取的数据，那么调用将挂起，直到有一些数据要读取。使用的程序`select()`不希望这样被阻止。

你还问：

> 为什么我们必须将文件描述符增加 1 并在我将文件描述符集传递给时传递它`select`？

这可能是指定 FD_SET 的大小。的第一个参数`select()`被称为*`nfds`*和 POSIX 说：

> 该`nfds`参数指定要测试的描述符范围。`nfds`应在每组中检查第一个描述符；`nfds-1`也就是说，应检查描述符集中从零开始的描述符。

因此，要测试文件描述符`n`， in 的值`nfds`必须至少为`n+1`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T05:28:13.787

想要在读取交互式用户输入^(1的)*同时*继续运行的程序需要是多线程的*，或者*他们需要仔细读取输入流，特别是有条件的读取。

 *[`Select(2)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)可用于实现第二种设计模式。它可以确定是否可以在不阻塞整个应用程序的情况下读取输入。

* * *

^(1\. 或其他不可预测的输入。)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T05:13:55.010

当您必须不断监视文件描述符直到它们准备好进行某些 IO 而不阻塞时，您可以使用 select 调用。

通常在您希望 IO（例如 read() ）非阻塞时使用，请阅读：[手册页](http://linux.die.net/man/2/select)

另请阅读相关 API*

# c# - WebBrowser 对象可以正常调用插入到脚本字符串中的 JavaScript 吗？

> ID：14544622
> 
> 赞同：0
> 
> 时间：2013-01-27T05:09:06.247
> 
> 标签：c#, javascript, .net-4.0, webbrowser-control

我可能没有正确地问这个问题，但我有一个 WebBrowser，里面有非常冗长的脚本。我正在使用一些字符串操作将我自己的 JavaScript 字符串插入其中（只是一个简单的 window.external.(); 行），希望它会调用它，但到目前为止，它还没有。

像这样：

```
 string script = <WebBrowserObject>.Document.GetElementsByTagName("script")[3].InnerText;
    script = script.Insert(script.IndexOf(<Line to place function call after>) + <length of that line>, <string variable holding my function call>);
    <WebBrowserObject>.Document.GetElementsByTagName("script")[3].InnerText = script; 
```

有一个反复触发的 JavaScript 函数，我需要与显示倒数计时器的表单显示同步。

我也有：

```
 <WebBrowserObject>.ObjectForScripting = this; 
```

没有显示 JavaScript 错误，我已经能够通过添加 window.external.(); 来绑定类似 JavaScript 的响应。行到输入按钮的onclick 属性并看到结果。现在，该函数唯一应该做的就是在输出窗口中写一行以确保它正常工作。这种方法是实现这一预期结果的正确方法吗？有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:05:02.990

据我所知，一旦脚本标签的内容已经运行，你就不能再次运行它（你可能能够重置它的标志，关于内容是否已经运行，但我确定它是否存在，那是浏览器特定的东西）。我认为您需要做的是添加一个新的脚本标签，其中包含您想要的代码。如果 WebBrowser 控件的界面与您在 javascript 中与 DOM 交互时所做的类似，您可以创建一个脚本元素，将文本添加到元素，然后将其附加到 DOM 的某个位置（如`head`）然后它应该跑。

在纯 javascript 中，它会是这样的。

```
var head1 = document.getElementsByTagName('head')[0]
var script1 = document.createElement('script');
script1.innerText = "alert('hey');"; //javascript to run.
head1.appendChild(script1) 
```

当然，当你完成后，你可能应该`h1111.removeChild(script111)`只是阻止 DOM 累积脚本......我不知道在某些浏览器中何时可以安全删除脚本标签是否有什么特别之处......你可能会立即删除它（我似乎对阅读一些建议稍等片刻的案例有一些模糊甚至不正确的回忆）。

# java - 二维数组，输出几乎不正确

> ID：14544623
> 
> 赞同：4
> 
> 时间：2013-01-27T05:09:14.817
> 
> 标签：java, arrays, 2d, output

```
import java.util.Scanner;

public class Maze {

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);

        int rows = 0;
        int cols = 0;
        String arrayLine = "";
        int counter = 0;

        rows = sc.nextInt();
        cols = sc.nextInt();
        arrayLine = sc.next();

        char[][] array = new char[rows][cols];

        for(int r=0; r<rows; r++){
            for (int c=0; c<cols; c++){
                array[r][c] = arrayLine.charAt(counter);
                counter ++;
            }
        }

        System.out.println(array);
        System.out.println();
    }
} 
```

* * *

我从中引入信息的文件是：

```
8
7
000000011111S0000000110101111010101100010110111011010E00 
```

* * *

我运行它时得到的输出是`[[C@252f0999`

请帮忙，我刚开始学习java！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T05:16:03.253

`array`是一种特殊的对象，它没有隐式`toString()`管理数组内容的漂亮打印，发生的是对象由对象的标准表示形式表示，即它的哈希码。

你应该使用[`Arrays.toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)：

```
for (int i = 0; i < array.length; ++i)
  System.out.println(Arrays.toString(array[i])); 
```

请注意，您不能直接编写`Arrays.toString(array)`，因为如文档中所述：

> 如果数组包含其他数组作为元素，它们会通过继承自 Object 的 Object.toString() 方法转换为字符串，该方法描述的是它们的标识而不是它们的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T05:18:12.673

当您在对象上调用 println() 时，Java 默认返回资源的位置（这就是 C@252....）。你想打电话

```
System.out.println(Arrays.deepToString(array) 
```

显示数组中的数据。

# python - 以编程方式将文本转换为语音 TTS 可读文本？

> ID：14544627
> 
> 赞同：1
> 
> 时间：2013-01-27T05:09:41.250
> 
> 标签：python, ruby, text-to-speech

我想获取文本片段并以编程方式将它们转换为比传统英语拼写更具语音性。这样做的目的是为了将我正在使用的一堆文本转换为可以被普通 TTS 工具以更自然的方式读取的版本，以用于科学应用程序。

许多术语和首字母缩略词很常见，但也有一些不是。我希望找到已经完成大部分工作的某种脚本或资源（意识到我将不得不根据这些条款进行一些自定义），但是到目前为止，我还没有发现任何沿着这条路走下去的东西.

我已经找到了*真正*的语音解决方案并且适用于语言应用程序，但是这些都是不可取的，因为我使用的标准现成 TTS 解决方案无法读取它们。

这种情况的起点有什么想法吗？任何使这更容易咀嚼的示例甚至库都可以。还是我必须坐下来研究出一个完全由我自己设计的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:43:08.457

这是一个应该可行的想法：

1.  使用狡猾的“语言学家”级注音器。

2.  使用标准的小表拼音到英语音节（在您选择的英语口音中），映射。

3.  通过标准的 OTS TTS 产品运行生成的“拼音”单词。

因此，例如，您可以拥有：

炸鱼和薯条----step 1--->语音语言代码---step 2.（新西兰口音）---> fush und chupsh ---step 3.--->音频愉悦

希望这对您有所帮助！

# rspec - 测试“验证 ...，格式 => 与”

> ID：14544628
> 
> 赞同：7
> 
> 时间：2013-01-27T05:09:48.023
> 
> 标签：rspec, rspec-rails

我有一个带有此验证的用户模型

```
validates :name, :lastname, :format => {:with => /^[a-zA-Z]+$/, :message => 'Only letters and spaces allowed.'} 
```

我不确定如何正确测试它。

我已经完成了一个函数，它返回一个由 a-zA-z 字符数组中的 10 个字符组成的随机字符串。

```
def get_random_name
  "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split('').shuffle[0..10].join 
```

结束结束

然后我为我的规范的每次运行获得一个新名称。

我不想测试它是否使用了一些正则表达式，因为那样我将测试实现而不是行为，而且我也不想只测试一个硬编码的情况。

我的问题是：我应该这样做吗？真的需要吗？是更好还是没用？您知道测试这种验证的更好方法吗？

编辑：另一个问题，如何生成无效的随机名称？有没有办法创建在允许值之外至少包含一个字符的随机名称？我不能硬编码一个包含所有无效值的数组来随机化它，因为它太大了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T14:59:20.313

查看开源项目 Shoulda Matchers： [https ://github.com/thoughtbot/should-matchers](https://github.com/thoughtbot/shoulda-matchers)

编辑：抱歉刚刚注意到也`Paul Fioravanti`提到了应该。但是，您不需要使用 FactoryGirl 来创建模型的实例。`create`验证测试不需要使用。

您可以直接在模型上创建单元测试：

```
 describe User, 'Validations' do
  it { should allow_value("Name").for(:name) }
  it { should_not allow_value("Inv4lid_").for(:name) }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T06:40:51.617

为了测试有效和无效格式（我认为正则表达式可以定义要验证的格式），如何在一些帮助实用程序方法中定义您认为有效和无效名称的内容，如果需要，您可能会随着时间的推移对其进行改进。例如：

**规范/支持/实用程序.rb**

```
def valid_names
  %w[Homer bart LISA]
end

def invalid_names
  %w[BuRn$ 5M1+h3Rs♡]
end 
```

然后，您可以使用 RSpec、[shouda-matchers](https://github.com/thoughtbot/shoulda-matchers)和[Factory Girl](https://github.com/thoughtbot/factory_girl_rails)`:name`为(and )编写测试，如下所示：`:lastname`

**规格/模型/user_spec.rb**

```
describe User do

  let(:user) { FactoryGirl.create(:user) }

  # ...

  describe "validations" do
    context "for name, lastname" do
      context "when format is invalid" do
        invalid_names.each do |invalid_name|
          it { should_not allow_value(invalid_name).for(:name) }
          it { should_not allow_value(invalid_name).for(:lastname) }
        end
      end

      context "when format is valid" do
        valid_names.each do |valid_name|
          it { should allow_value(valid_name).for(:name) }
          it { should allow_value(valid_name).for(:lastname) }
        end
      end
      # ...
    end
    # ...
  end
  # ...
end 
```

如果您将来打算将您的应用程序国际化，请记住并非所有世界名称都符合这种格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T03:56:45.213

[针对随机数据进行测试是一种称为Fuzzing](https://en.wikipedia.org/wiki/Fuzz_testing)的常见测试技术。我会考虑使用[FuzzBert 的](https://github.com/emboss/FuzzBert)生成器来创建真正的随机二进制数据以进行测试。

这是一些您不希望通过验证的出色随机数据的示例。

```
irb> require 'fuzzbert'
       => true
irb> test_string = FuzzBert::Generators.random_fixlen(10)[]
       => "S\x1EU1\x11HVY\x0E\xD0"
irb> puts test_string
     S▲U1◄HVY♫�
       => nil 
```

**随机是好的**

因为它将随机二进制位转换为字符串，所以您将得到一些非常时髦的结果来进行测试。这是一件好事！它不仅会针对使用已知符号（如？）进行测试，还会针对有效和无效字符的各种组合进行测试。

**随机有时有效**

您有机会时不时地获得有效数据，尽管可能性很小。此外，您创建的随机字符串越长，获得有效数据的几率就越低。

解决此问题的第一次尝试可能是在每个输出中附加一个无效字符，但我不建议这样做。例如，如果您总是附加“！”，那么它会使您的测试等同于确保字符串没有“！” 在其中，而不是对完整正则表达式可能性的真正测试。

我建议针对同一个正则表达式测试你的随机字符串，如果它*通过*了，生成一个不同的字符串来测试。

最后，您可以忽略随机数据有效的罕见机会。如果这个特定的 rspec 每隔一段时间都会失败，请查看它失败的字符串，如果它是有效的字符串，然后重新运行。

**测试所有可能性**

您将永远无法测试所有无效字符串（除非您的最大长度较短），但通过使用模糊测试，您将能够针对包含大量有效和无效字符的字符串进行测试。

# magento - 如何在 magento 中使用观察者进行结帐来删除运费？

> ID：14544629
> 
> 赞同：2
> 
> 时间：2013-01-27T05:09:53.520
> 
> 标签：magento, checkout, shipping

我的问题：

我想在结帐页面开始之前使用观察者，因为根据购物车中的产品，如果它不符合某些条件，我想禁用运输。

我正在使用 **[controller_action_predispatch_checkout_onepage_index]**事件观察器，这基本上是在结帐页面开始加载之前调用...我能够获取所有产品和报价信息，但没有找到任何**禁用运输**的方法。

我在寻找什么，

从观察者那里，是否可以通过调用某些 magento 方法或任何其他解决方案来禁用运输？

**覆盖 collectRates()**

在收到很少的回复后，我尝试使用下面给出的代码覆盖 collectRates() 方法

$method = Mage::getModel('shipping/rate_result_method');

```
 $method->setCarrier('flatrate');
        $method->setCarrierTitle($this->getConfigData('title'));

        $method->setMethod('flatrate');
        $method->setMethodTitle($this->getConfigData('name'));

        if ($request->getFreeShipping() === true || $request->getPackageQty() == $this->getFreeBoxes()) {
            $shippingPrice = '0.00';
        }

        $method->setPrice($shippingPrice);
        $method->setCost($shippingPrice);

        $result->append($method); 
```

虽然，我也不想启用统一运费方式。我只想禁用运输，或者选择回复类似

*   免运费 $0.00

用户可以选择继续下一步。请从这里帮助我.. **我应该在 $method->setCarrier('??????'); 中使用什么** 或者**我需要在上面的代码中做哪些更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:15:49.373

我认为覆盖或子类化各个 Carrier 模型可能会更好。

所有运营商都实现了一个方法“Mage_Shipping_Model_Carrier_Abstract::collectRates()”来返回结果。可以在此方法中获取有关当前报价的信息以修改返回的费率/选项。

也就是说，如果有办法让观察者做到这一点，它可能会更清洁/更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:17:21.377

最后我有覆盖运输方法，它是一个两步代码，但如果你愿意，你可以将它减少到一步。这是我的两步解决方案。在我们开始之前，我们的运输类需要**扩展和实现**

```
extends Mage_Shipping_Model_Carrier_Abstract
    implements Mage_Shipping_Model_Carrier_Interface 
```

现在，我们创建一个受保护的方法

```
protected function _createMethod($request, $method_code, $title, $price, $cost)
{
    $method = Mage::getModel('shipping/rate_result_method');

    $method->setCarrier('australiapost'); // in my case its australia post, it can be any other whatever you are using
    $method->setCarrierTitle($this->getConfigData('title'));

    $method->setMethod($method_code);
    $method->setMethodTitle($title);

    $method->setPrice($this->getFinalPriceWithHandlingFee($price));
    $method->setCost($cost);

    return $method;
} 
```

现在只需使用下面的代码创建免费送货的新方法并绕过现有的运费计算器，此代码将进入 **collectRates(Mage_Shipping_Model_Rate_Request $request)**方法

```
 // PROCESS WILL RETURN FREE SHIPPING
   if ($request->getFreeShipping() === true || $request->getPackageQty() == $this->getFreeBoxes()) {
            $shippingPrice = '0.00';
         }

    $shipping_method = 'Free Shipping';
    $method = $this->_createMethod($request, $shipping_method, 'Shipping Disabled', '0.00', '0.00');

         $result->append($method);

         return $result; 
```

通过这样做，您可以在结帐时获得如下结果，用户可以轻松单击继续下一步。

*   运输禁用 $0.00

# java - 如何使用 rapidminer 创建带标签的输出集？

> ID：14544631
> 
> 赞同：0
> 
> 时间：2013-01-27T05:10:09.600
> 
> 标签：java, rapidminer

我正在完成我们研究中一种新的数据挖掘技术的实施。

我想从 rapidminer 中包含的定义的度量和性能运算符中获利，所以我需要向性能运算符提供一个标记的数据集。

谁能帮我找到如何创建标记数据集？（我有标签和预测，我的问题是如何以标签集的形式创建输出数据表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:00:58.110

RapidMiner distinguishes between regular and special attributes. If you already have an example set with prediction and label attribute you have to change the role of these. But typically this roles are set when you import your data and the learning of the model.

You have to do this, because the performance operators expects two special attributes with the role 'label' and 'prediction'. Therefore, insert the "Set Role" operator before the performance operator and select the attribute name (use 'set additional roles' for more than one attribute) and the target role accordingly.

# iphone - MonoTouch：UpPopoverController.DidDismiss 未触发

> ID：14544633
> 
> 赞同：1
> 
> 时间：2013-01-27T05:11:00.503
> 
> 标签：iphone, ios, ipad, xamarin.ios, uipopovercontroller

我有一个连接了**DidDismiss**的**UIPopoverController**：

```
 popYear.PresentFromBarButtonItem(btnYear,UIPopoverArrowDirection.Any,true);

           popYear.DidDismiss += (sender, args) => {
              Console.WriteLine("Bye bye");
           }; 
```

当用户在**popover****外部**点击关闭 popover 时， DidDismiss 会很好地触发。

但是，当弹出窗口从它托管的视图控制器中关闭时**，** DidDismiss**不会**触发：

```
 tbhCLose.Tapped+= () => {
           if(PopOver!=null)
             PopOver.Dismiss(false); //Won't cause DidDismiss to fire
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:52:48.090

调用 popover.Dismiss 时不会触发 DidDismiss。

更好的选择是听 viewconvtroller 的 ViewDisappearing 并在那里进行更新”

```
 var uc = new YearViewController(SelectedYear);
           uc.ViewDisappearing+= (sender, e) => {
              this.SelectedYear = uc.SelectedYear;
              Update();
           };
           popYear = new UIPopoverController(uc);
           uc.PopOver = popYear;
           popYear.PresentFromBarButtonItem(btnYear,UIPopoverArrowDirection.Any,true); 
```

# bash - 如果在使用 read 时没有以新行字符 (\n) 终止，则尊重最后一行

> ID：14544636
> 
> 赞同：8
> 
> 时间：2013-01-27T05:11:28.730
> 
> 标签：bash, shell, built-in

一段时间以来，我注意到`read`如果文件末尾没有“换行符”字符，则从未真正读取文件的最后一行。如果考虑到，只要文件中没有“换行符”字符，就好像它包含 0 行（这很难承认！），这是可以理解的。例如，请参见以下内容：

```
$ echo 'foo' > bar ; wc -l bar
1 bar 
```

但...

```
$ echo -n 'bar' > foo ; wc -l foo
0 foo 
```

那么问题来了：当用于处理尚未由我自己创建或修改的文件时，我该如何处理这种情况`read`，并且我不知道它们是否真的以“换行符”字符结束？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T12:19:35.977

`read`实际上，确实会将未终止的行读入分配的 var （`$REPLY`默认情况下）。它还在这一行返回 false，这只是意味着“文件结束”；因此，直接在经典循环中使用其返回值会`while`跳过最后一行。如果您稍微更改循环逻辑，则可以正确处理非换行符终止的文件，而无需事先进行清理，使用`read`：

```
while read -r || [[ -n "$REPLY" ]]; do
    # your processing of $REPLY here
done < "/path/to/file" 
```

请注意，这比依赖外部的解决方案要快得多。

*向[Gordon Davisson 致敬](https://stackoverflow.com/users/89817/gordon-davisson)以改进循环逻辑。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T05:16:12.330

POSIX 要求文件中的任何行末尾都有一个换行符来表示它是一行。但是[这个站点](http://backreference.org/2010/05/23/sanitizing-files-with-no-trailing-newline/)为您所描述的场景提供了一个解决方案。最终产品就是这个小块。

```
newline='
'
lastline=$(tail -n 1 file; echo x); lastline=${lastline%x}
[ "${lastline#"${lastline%?}"}" != "$newline" ] && echo >> file
# Now file is sane; do our normal processing here... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T10:32:55.353

这或多或少是迄今为止给出的答案的组合。

它不会修改文件。

```
(cat file; tail -c1 file | grep -qx . && echo) | while read line
do
    ...
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T05:22:48.867

如果你必须使用 read，试试这个：

```
awk '{ print $0}' foo | while read line; do
    echo the line is $line
done 
```

因为 awk 似乎即使没有换行符也能识别行

# visual-studio-2010 - Silverlight 在 IE 中工作，在其他浏览器中显示空白页面

> ID：14544640
> 
> 赞同：1
> 
> 时间：2013-01-27T05:11:51.510
> 
> 标签：visual-studio-2010, xaml, silverlight-4.0, cross-browser, silverlight-5.0

我是 SilverLight 的新手，我正在尝试从 Matthew MacDonald 的“Pro Silverlight 5 in C#”一书中复制一个简单的示例。

我正在使用 VS2012 创建 Silverlight 5 应用程序。

当我运行*SilverlightApplication1TestPage.html* -**它适用于 IE10，但在 FF 和 Chrome 中我得到一个空白页**。SilverLight 插件在这些浏览器中加载，但不显示任何内容。

请给我任何关于为什么会发生这种情况的建议。

*MainPage.xaml*代码如下。

```
<UserControl x:Class="SilverlightApplication1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel>
        <TextBlock x:Name="lblMessage" Text="Hello World!" Margin="5"></TextBlock>
        <Button x:Name="cmdClickMe" Content="Click Me!" Margin="5" Click="cmdClickMe_Click" />
    </StackPanel>
</Grid> 
```

*MainPage.xaml.cs*包含以下处理程序。

```
 private void cmdClickMe_Click(object sender, RoutedEventArgs e)
    {
        lblMessage.Text = "Goodbye, cruel world.";
    } 
```

html 页面如下所示（正文部分）。

```
<body>
<form id="form1" runat="server" style="height:100%">
<div id="silverlightControlHost">
    <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
      <param name="source" value="SilverlightApplication1.xap"/>
      <param name="onError" value="onSilverlightError" />
      <param name="background" value="white" />
      <param name="minRuntimeVersion" value="5.0.61118.0" />
      <param name="autoUpgrade" value="true" />
      <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">
          <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
      </a>
    </object><iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe></div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:17:12.613

问题是 Silverlight 项目目录位于“C:\Users\<USER>\Documents\Visual Studio 2012\Projects”下，其中 <USER> 不是用英文编写的。

我将 .html 和 .xap 文件移动到 C:\ 并且投影在所有浏览器中都可以正常工作。

# java - 在 AndoridManifest.xml 中定义 OnClickListener

> ID：14544645
> 
> 赞同：3
> 
> 时间：2013-01-27T05:13:44.857
> 
> 标签：java, android, button, android-manifest

我使用 OnClickListener 链接了 menu.java 文件中的所有按钮，并将其定义在 Manifest 中，但按钮不起作用。我想我可能把它放在清单中是错误的。

菜单.java

```
package com.invoice;

import android.app.Activity;
import android.os.Bundle;
import android.view.View.OnClickListener;
import android.view.View;
import android.widget.Button;

public class menu extends Activity implements OnClickListener {
    /** called the activity is first created. */
    Button button1, button2, button3, button4, button5;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button1 = (Button)findViewById(R.id.button1);
        button2 = (Button)findViewById(R.id.button2);
        button3 = (Button)findViewById(R.id.button3);
        button4 = (Button)findViewById(R.id.button4);
        button5 = (Button)findViewById(R.id.button5);
        button1.setOnClickListener(this);
        button2.setOnClickListener(this);
        button3.setOnClickListener(this);
        button4.setOnClickListener(this);
        button5.setOnClickListener(this);
    }   
    public void onClick(View v) {
        //TODO Auto-generate method stub
        //figure out which button was pressed
        switch (v.getId()) {
        case R.id.button1:
            //do button1 action
            break;
        case R.id.button2:
            //do button2 action
            break;
        case R.id.button3:
            //do button3 action
            break;
        case R.id.button4:
            //do button4 action
            break;
        case R.id.button5:
            //do button5 action
            break;
        }

        }
    } 
```

对应的Java文件（每个按钮都有独立的java文件）

```
package com.invoice;

import android.app.Activity;
import android.os.Bundle;

public class Job extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.job);
    }

} 
```

我为清单中的每个按钮添加的内容：

```
<activity android:name=".Help"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.invoice.help" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:24:00.887

您需要`startActivity`在每个按钮单击时调用启动 Activity 的方法：

```
public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
            //do button1 action

            // start next activity here
            Intent intent=new Intent(menu.this,Job.class);
            startActivity(intent);
            break;
         ///.... same for all buttons 

        }
   } 
```

并且您必须先注册所有 Activity，`AndroidManifest.xml`然后才能将其用作：

```
<activity android:name=".menu"
   android:label="@string/app_name">
   <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
   <intent-filter>
    </activity>
<activity android:name=".Help" />
<activity android:name=".Job" />
//.....same for others 
```

# objective-c-2.0 - 为什么要在 Obj-C 中更改 getter 和 setter 的名称？

> ID：14544648
> 
> 赞同：3
> 
> 时间：2013-01-27T05:14:16.093
> 
> 标签：objective-c-2.0

我刚刚了解到您可以修改 Objective-C 属性的自动生成的 getter 和 setter 名称

```
// boolean property of "door" object in game
@property (strong, nonatomic, getter=isOpen) BOOL open; 
```

我了解如何`isOpen`更好地获取 just `open`，但为什么不将属性名称更改为`isOpen`？

`isOpen`为什么不希望同时命名设置器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:01:19.710

如果我们使用 [] 语法，这种区别将得到最好的体现

```
 if ([door isOpen])
       doSomething;
    else
       [door setOpen:YES]; 
```

读起来更像简单的英语而不是

```
 if ([door isOpen])
       doSomething;
    else
       [door setIsOpen:YES]; 
```

在现代点语法中，差异有点丢失

```
 if (door.isOpen)
       doSomething;
    else
       door.open = YES; 
```

对比

```
 if (door.isOpen)
       doSomething;
    else
       door.isOpen = YES; 
```

# backbone.js - 获取成功的主干，模型不安慰

> ID：14544651
> 
> 赞同：0
> 
> 时间：2013-01-27T05:14:43.833
> 
> 标签：backbone.js, backbone-views

使用 fetch 方法，我从本地 json 获取模型，但通常成功，没有什么能安慰我..

我的代码有任何问题..我调用渲染函数的方式在成功时是正确的吗？

我使用的 JSON：

```
[
    {'name':'student1'},
    {'name':'student2'},
    {'name':'student3'}
]; 
```

我的代码：

```
$(document).ready(function(){

    var school = {};

    school.model = Backbone.Model.extend({
        defaults:{
            name:'name yet to decide'    
        }    
    });

    school.collect = Backbone.Collection.extend({
        model:school.model,
        url:'js/school.json',
        initialize:function(){
            console.log(this.collection)//shows the undefined
        }
    });

    school.view = Backbone.View.extend({
        initialize:function(){
            var that = this;
            this.collection = new school.collect;
            this.collection.fetch({
                success:function(model,response){       
                    console.log(model,response);//i am not get any mode or response here
                    that.render(); //not at all calling..
                }
            });
        },
        render:function(){
            console.log('hi')
        }
    });

    var newModel = new school.model;

    var newSchool = new school.view({model:newModel});

}) 
```

# java - 唯一检测客户的最佳方法是什么？

> ID：14544652
> 
> 赞同：0
> 
> 时间：2013-01-27T05:14:48.353
> 
> 标签：java, client, detection

我想唯一地检测我的客户以记录一些独特的信息。最好的方法是什么，根据我的研究发现MAC地址是不可能的，操作系统生成的硬盘序列号与制造序列号不同..你有什么建议？这些技术是struts (jsp)、spring和hibernate。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T05:32:57.067

我建议你不要。

假设客户端实际上是 Web 浏览器（因为您使用的是 struts），则无法可靠地识别客户端 IP 地址......并且浏览器沙箱将阻止您获取任何其他可以识别机器的信息.

我能想到的最佳建议是要求用户安装客户端 SSL 证书，并将您的服务配置为请求/要求浏览器为 HTTPS 连接提供客户端证书。例如，此页面描述了如何使用 Tomcat 执行此操作 - [http://www.tomcatexpert.com/knowledge-base/client-certificate-authentication-tomcat](http://www.tomcatexpert.com/knowledge-base/client-certificate-authentication-tomcat)

当然，客户端 SSL 证书*假定*用户愿意安装一个。没有用户……或管理他/她机器的人的合作，您无法实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:56:31.167

可能会根据[panopticlick](https://panopticlick.eff.org/)收集的信息类型进行一些浏览器指纹识别：系统字体、浏览器类型等。您也可以将 cookie 放到他们的系统上，有效期很长，它会将该浏览器识别为只要他们把饼干放在身边。

也就是说，这是一种收集访问者信息的非常狡猾的方式。

# php - mysqli代码和call_user_func_array()中出现的错误

> ID：14544657
> 
> 赞同：8
> 
> 时间：2013-01-27T05:15:42.863
> 
> 标签：php, html, mysql, mysqli

尝试使用 mysqli 创建动态 where 子句时遇到很多错误：

> 警告：mysqli_stmt::bind_param() 的参数 2 应为参考，在第 319 行的 ... 中给出的值
> 
> 警告：mysqli_stmt::execute(): (HY000/2031): 没有为第 328 行的准备好的语句中的参数提供数据
> 
> 警告：mysqli_stmt::bind_result(): (HY000/2031): No data provided for parameters in Prepared statement in ... on line 331
> 
> 警告：mysqli_stmt::store_result(): (HY000/2014): 命令不同步；您现在无法在 ... 第 332 行运行此命令

我猜想解决这些问题需要进行一些更改，但是如果两个下拉菜单中的一个不相等`All`或两者不相等`All`，则会出现错误。

下面是显示下拉菜单和查询（带有动态 where 子句）的代码，具体取决于所选的 n 个选项：

**HTML：**

学生下拉菜单：

```
<select name="student" id="studentsDrop">
<option value="All">All</option>
<option value="11">John May</option>
<option value="23">Chris Park</option>
</select> 
```

问题编号 下拉菜单

```
<select name="question" id="questionsDrop">
<option value="All">All</option>
<option value="123">1</option>
<option value="124">2</option>
<option value="125">3</option>
</select> 
```

**PHP/MYSQLI:**

```
 function StudentAnswers()
        {

    /*BELOW IS THE QUERY WHERE I AM TRYING TO RETRIEVE DATA DEPENDING ON THE ASSESSMENT CHOSEN AND
    THEN DEPENDING ON OPTIONS CHOSEN IN STUDENT AND QUESTION NUMBER DROP DOWN MENU */

        $selectedstudentanswerqry = "
        SELECT
        StudentAlias, StudentForename, StudentSurname, q.SessionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
        ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
        GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
        FROM Student s
        INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
        INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
        INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
        INNER JOIN Answer an ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
        ";

        // Initially empty
        $where = array('q.SessionId = ?');
        $parameters = array($_POST["session"]);
        $parameterTypes = 'i';

        // Check whether a specific student was selected
        if($_POST["student"] !== 'All') {
            $where[] = 'sa.StudentId = ?';
            $parameters[] =& $_POST["student"];
            $parameterTypes .= 'i';
        }

        // Check whether a specific question was selected
        // NB: This is not an else if!
        if($_POST["question"] !== 'All') {
            $where[] = 'q.QuestionId = ?';
            $parameters[] =& $_POST["question"];
            $parameterTypes .= 'i';
        }

        // If we added to $where in any of the conditionals, we need a WHERE clause in
        // our query
        if(!empty($where)) {
            $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
            global $mysqli;
            $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
            // You only need to call bind_param once
                call_user_func_array(array($selectedstudentanswerstmt, 'bind_param'),
                array_merge(array($parameterTypes), $parameters)); //LINE 319 ERROR 1
        }

    //Add group by and order by clause to query
        $selectedstudentanswerqry .= "
          GROUP BY sa.StudentId, q.QuestionId
          ORDER BY StudentAlias, q.SessionId, QuestionNo
        ";

        // get result and assign variables (prefix with db)
        $selectedstudentanswerstmt->execute(); //LINE 328 ERROR 2

    //bind database fields 
$selectedstudentanswerstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,$detailsQuestionNo, 
        $detailsQuestonContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,$detailsStudentAnswer,$detailsResponseTime,
        $detailsMouseClick,$detailsStudentMark); //LINE 331 ERROR 3

    //store results retrieved
        $selectedstudentanswerstmt->store_result(); //LINE 332 ERROR 4

    //count number of rows retrieved
        $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows();     

    //output query
        echo "$selectedstudentanswerqry";

        }

        ?> 
```

**这是一个演示：** [演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text30.php)

在演示中，从下拉菜单中选择评估并提交。您将看到两个下拉菜单。将它们都设置为`All`并提交，它将毫无问题地输出查询。在其中一个下拉菜单中选择否，更改`All`为特定学生或问题，然后提交。现在你会看到错误

**VAR转储：**

当我选择带有 value 、 student number value和 question number value以及 WHERE CLAUSE的`var_dump(array_merge(array($parameterTypes), $parameters)));`会话（评估）时的结果：`31``40``81``WHERE q.SessionId = ? AND sa.StudentId = ? AND q.QuestionId = ?`

我得到这个输出：`array(4) { [0]=> string(3) "iii" [1]=> string(2) "31" [2]=> string(2) "40" [3]=> string(2) "81" }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:31:07.293

这是由`call_user_func_array`PHP 5.4 中的行为变化引起的棘手情况（我必须假设）：[文档](http://ca3.php.net/call_user_func_array#refsect1-function.call-user-func-array-notes)

像这样丑陋，它可以这样调用`bind_param`：

```
$selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
global $mysqli;
$stmt =$mysqli->prepare($selectedstudentanswerqry);

if (count($where) === 1) {
    $stmt->bind_param($parameterTypes, $parameters[0]);
}
else if (count($where) === 2) {
    $stmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
}
else if (count($where) === 3) {
    $stmt->bind_param($parameterTypes, $parameters[0], $parameters[1],
       $parameters[2]);
} 
```

我和你一样讨厌这个。我建议切换`mysqli`到`PDO`which 以更好的方式处理变量参数（在我看来，通常具有更好的语法）：

```
$pdo = new PDO('mysql:host=localhost', 'username', 'password');
$stmt = $pdo->prepare($selectedstudentanswerqry);
$stmt->execute($parameters);
$selectedstudentanswernum = $stmt->rowCount(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:16:49.410

> 警告：mysqli_stmt::bind_param() 的参数 2 应为参考，在第 319 行的 ... 中给出的值

这应该是不言自明的：bind_param 的参数是通过引用传递的，因此必须是变量。您可能忽略了`array_merge`返回一个新数组，该数组不包含对原始变量的引用，而只包含值。

由于参数未绑定，因此出现以下错误。

一种可能的解决方案是将引用存储在您的`$parameters`数组中，这些引用甚至会被 array_merge 保留：

```
$parameters[] =& $_POST["student"];

$parameters[] =& $_POST["question"]; 
```

现在的数组项`$parameters`是对 POST 变量的引用，`array_merge`结果的数组项也是。

编辑：看起来这不再可能了，请参阅[@Explosion Pills](https://stackoverflow.com/a/14616482/664108)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-23T08:41:33.413

这仍然不是为 PDO 放弃 mysqli 的充分理由，尤其是当我当时有很好的理由不使用 PDO 时。另一方面，是的，他们不需要强制 mysqli_stmt::bind_param 和 bind_result 方法要求通过引用传递变量，他们可以让它们返回一个数组。但是，这里真正的问题是不再可能调用时传递引用，但 mysqli 仍然需要传递引用，因此任何使用动态参数的人（任何具有直观 SQL 的人）都会被抓住在这个问题上，包括我自己。在花费数小时编写自定义 mysqli 包装类，将数组集转换为动态准备的 SQL 语句之后，我不打算尝试重写它以使用 PDO，特别是因为 PDO 需要将参数命名为绑定的一部分，我必须编写多个函数才能为每种类型的查询构建发送内容的列表。这是违反直觉的，我不会浪费无数小时来模仿我用 mysqli 完成的工作。

此时唯一的问题是我们不能通过引用传递 call_user_func_array() 中的变量，而 mysqli_stmt::bind_* 要求它们通过引用传递...所以我们唯一的选择是 1) 编写一个新的 call_user_func_array()旨在为 bind_* 方法显式工作的函数，其中传递的参数本质上是通过 args 复制到新数组或变量集中，然后在回调中传递这些 byRef；或 2) 重写 mysqli 类以正确的方式进行操作，只需查看传递的内容，执行 SQL，然后按预期返回结果。没有理由我们传递给执行 SQL 的方法必须用结果来破坏，应该像对待 SQL 控制台一样对待它。

因为编码太累了，直到我的眼睛几乎流血，我将采取非建议的选择，将我的 PHP 版本保持在 5.3.10-1，直到我真正以正确的方式解决了问题。对于那些会争论“为了所有这些努力，为什么不把它花在编写你的 PDO 包装器上呢？”...我的回答很简单：我在许多服务器是一台小型计算机的项目中专门使用 PHP 和 MySQL空间和资源非常有限，更不用说 CPU 能力了。PDO 会加载它所能做的一切，而不仅仅是你将要使用的东西，所以在你的资源中为你甚至不会使用的东西做了一些保留，我的项目不能失去这些。

值得庆幸的是，目前保留我的 PHP 版本不会有害。这是许多企业级服务器场实际上所做的，以避免为了“使用当前版本”而不得不降低所有内容，而每两年升级一次所有内容也非常昂贵。

# javascript - 无法让img处理ie中的事件

> ID：14544663
> 
> 赞同：0
> 
> 时间：2013-01-27T05:16:50.657
> 
> 标签：javascript, html

我最近正在制作一个程序，可以让用户上传他们的肖像。所以我使用文件输入并重写onchange函数。在 onchange 函数中，我新建了一个图像对象，当图像对象准备好时，我使用图像的宽度和高度以及 src 来设置 img 的拟合宽度和高度。下面的代码在 chrome 中运行良好，但在 ie10 中失败。addEventListener 和 attachEvent 在 ie10 中都失败了。我只想让 img 处理 onload 事件。我怎样才能做到这一点？

```
function setImage(file){
var tempImg = document.createElement('img');
tempImg.addEventListener('load', function(){
        alert('success');

        var isExist = false;
        var imgDiv = document.getElementsByClassName('img-border')[0];

        if (document.getElementsByClassName('photo-canvas').length == 1){
            var canvas = document.getElementsByClassName('photo-canvas')[0];            
            isExist = true;
        }
        else{
            var canvas = document.createElement('canvas');
        }

        var xTimes = tempImg.width / portraitWidth;
        var yTimes = tempImg.height / portraitWidth;

        var realTimes = xTimes > yTimes ? xTimes : yTimes;

        realWidth = tempImg.width / realTimes;
        realHeight = tempImg.height / realTimes;

        centerX = realWidth / 2;
        centerY = realHeight / 2;

        var realImg = document.getElementsByClassName('temp-photo')[0];

        realImg.style.width = realWidth + 'px';
        realImg.style.height = realHeight + 'px';
        realImg.style.marginLeft = -realWidth / 2 + 'px';
        realImg.style.marginTop = -realHeight / 2 + 'px';
        realImg.src = null;
        realImg.src = tempImg.src;

        canvas.width = realWidth;
        canvas.height = realHeight;     
        canvas.style.marginLeft =  -realWidth / 2 + 'px';
        canvas.style.marginTop = -realHeight / 2 + 'px';

        if (!isExist){
            canvas.onload = function(){
                draw(this);
            }
            imgDiv.appendChild(canvas);
        }
        else
            draw(canvas);           
    }, false); 

if (document.all){
    tempImg.src = file.value;
    var temp = document.getElementsByClassName('temp-photo')[0];
    temp.src = file.value;
}
else{
    var image = file.files.item(0);

    if (typeof(image.getAsDataURL) != 'undefined')  
        tempImg.src = image.getAsDataURL();
    else
        tempImg.src = window.webkitURL.createObjectURL(image);
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T10:32:32.103

如果要在 ie 中上传本地文件，则必须将该站点添加到受信任列表中。

# php - 更新到 MySQL 5.6.9 后，localhost 不再工作

> ID：14544669
> 
> 赞同：0
> 
> 时间：2013-01-27T05:18:38.360
> 
> 标签：php, mysql, codeigniter, apache2

我在我的服务器上安装了 Apache2 2.2.22、MySQL 5.5 和 PHP 5.3。我正在使用 codeigniter 来完成我们的项目。在我将 MySQL 升级到 5.6（开发人员发布版本）之前，一切正常。它显示 ERROR2002(HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 并且不能再连接到我的本地主机。所以，我降级到 5.5 但仍然无法连接到我的本地主机。当我转到本地主机时，它显示 HTTP ERROR 500。

我会删除并重新安装所有东西，但想先得到一个建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T21:36:17.047

我遇到了同样的问题，从 5.6 退回，一切正常。我正在运行 PHP 5.5.1 和 Apache 2.4。我很想知道如何让 5.6 正常工作，但我现在唯一的答案是删除它。在卸载 MySQL 5.6 之前，我安装了一个早期版本，该版本不能与 codeigniter（与 MySQLAdmin、MySQLyog 一起使用）一起使用。一旦 5.6 消失了，早期版本的 MySQL 又可以正常工作了。

# java - Spring 3.2 + Hibernate 4 OpenSessionInViewFilter

> ID：14544670
> 
> 赞同：7
> 
> 时间：2013-01-27T05:18:43.330
> 
> 标签：java, spring, hibernate

我是春季新手，正在尝试我的第一个应用程序。我的休眠在视图被渲染之前就关闭了，并且延迟加载的属性有问题（预期的行为）。我已将 OpenSessionInViewFilter 添加到我的 web.xml 并导致以下情况：

```
java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered? 
```

事先它在我拥有的默认 servlet 上下文配置中运行良好（有人可以告诉我为什么吗？）。所以我添加了以下内容：

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/springapp-servlet.xml
    </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
```

新错误消失了..但仍然从休眠中获得无会话异常

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.test.model.Store.categories, could not initialize proxy - no Session 
```

我在我的一个控制器中放了一条调试消息，它似乎被初始化了 3 次。也许我有多个休眠会话工厂 bean 实例？我的控制器方法被标记为@Transactional 并且一切正常，直到我试图让会话保持打开状态以使惰性字段可用于视图。

我的完整 web.xml （添加了新的上下文，在我添加休眠过滤器之前没有它可以正常工作）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" > 
    <display-name>
      Spring
    </display-name>
    <description>
     Spring Test
    </description>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/springapp-servlet.xml
    </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

   <filter>
      <filter-name>hibernateFilter</filter-name>
      <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
      <init-param>
         <param-name>sessionFactoryBeanName</param-name>
         <param-value>sessionFactory</param-value>         
      </init-param>      
   </filter>

   <filter-mapping>
     <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
   </filter-mapping> 

  <servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <error-page>
    <error-code>500</error-code>
    <location>/error/500</location>
  </error-page>
   <error-page>
    <error-code>404</error-code>
    <location>/resources/pages/error.html</location>
  </error-page>

</web-app> 
```

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc 
                    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
                    http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.2.xsd
                    http://www.springframework.org/schema/tx
                   http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
                   http://www.springframework.org/schema/aop
                   http://www.springframework.org/schema/aop/spring-aop-3.2.xsd">

    <context:component-scan base-package="com.test.web.controllers,com.test.service.impl" />

    <mvc:annotation-driven />
    <mvc:resources mapping="/resources/**" location="/resources/" /> 

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/test?zeroDateTimeBehavior=convertToNull"/>
    <property name="username" value="spring"/>
    <property name="password" value="test"/>
  </bean>

  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource"/>
    <property name="mappingLocations" value="classpath*:com/test/model/hbm/**/*.hbm.xml" />

    <property name="hibernateProperties">
      <value>
        hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
        hibernate.show_sql=true
      </value>
    </property>
  </bean>

 <tx:annotation-driven />
  <bean id="transactionManager"
            class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

    <bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
        <property name="resourceLoaderPath" value="/WEB-INF/templates/"/>
    </bean>
    <bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityLayoutViewResolver">
      <property name="cache" value="true"/>
      <property name="prefix" value=""/>
      <property name="suffix" value=".vm"/>
      <property name="layoutUrl" value="index.vm" />

      <!-- if you want to use the Spring Velocity macros, set this property to true -->
      <property name="exposeSpringMacroHelpers" value="true"/>

    </bean>

     <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">

        <!-- one of the properties available; the maximum file size in bytes -->
        <property name="maxUploadSize" value="10000000" />
    </bean>

    <bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

    <bean id="categoryDAO" class="com.test.dao.hibernate.HibernateCategoryDAO">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>
    <bean id="categoryService" class="com.test.service.Categories" scope="singleton">
        <property name="dao" ref="categoryDAO"></property>
    </bean>
    <bean id="storeDAO" class="com.test.dao.hibernate.HibernateStoreDAO">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>
    <bean id="storeService" class="com.test.service.Stores" scope="singleton">
        <property name="dao" ref="storeDAO"></property>
        <property name="categoryDao" ref="categoryDAO"></property>

    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T17:35:16.730

我的控制器初始化了两次，根 ApplicationContext 和 FrameworkServlet 使用了相同的配置。我已经初始化了两个上下文。我为名为 springapp.xml 的根上下文创建了一个配置，并将我的所有中间层配置移到那里，并将我的 web 层配置留在 springapp-servlet.xml

My web.xml now looks like this and everything works fine:

```
 <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/springapp.xml
        </param-value>
        </context-param>

     <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>

<filter>
      <filter-name>hibernateFilter</filter-name>
      <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
      <init-param>
         <param-name>sessionFactoryBeanName</param-name>
         <param-value>sessionFactory</param-value>         
      </init-param>      
   </filter>

   <filter-mapping>
     <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
   </filter-mapping> 

    <servlet>
        <servlet-name>springapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
                <param-name>contextConfigLocation</param-name>
                <param-value>/WEB-INF/springapp-servlet.xml</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
      </servlet>

      <servlet-mapping>
        <servlet-name>springapp</servlet-name>
        <url-pattern>/</url-pattern>
      </servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-05T16:06:51.633

To solve the problem in my case it was just missing this line

in the application-context file.

The @Transactional annotation over a method was not taken into account.

Hope it will help someone

# perl - 在不构建的情况下在分发中测试脚本

> ID：14544674
> 
> 赞同：2
> 
> 时间：2013-01-27T05:19:08.850
> 
> 标签：perl, testing, software-distribution

我正在尝试测试包含在我的 Perl 发行版中的脚本。该脚本仅输出到文件，因此我的测试在运行它后会检查文件内容。我尝试按照[这篇](http://blogs.perl.org/users/neilb/2012/09/testing-scripts-in-your-distribution-portably.html)文章中的说明进行操作，但它对我来说不太奏效。我正在测试的脚本使用同一发行版中的模块，因此运行脚本需要以`@INC`某种方式添加模块的位置。我注意到[Test::Script](https://metacpan.org/module/Test%3a%3aScript)添加`-Mblib` 到参数中，所以我尝试了相同的方法。但是，它在开发过程中不起作用，因为没有 blib 目录。使用`-Mblib`使一切仅在`dzil test`or下工作`make test`。在开发过程中，我使用`prove`或简单地`perl -Ilib t/test_script.pl`使用，并尝试使用`-Mblib`导致测试失败和警告`Cannot find blib even in C:\`。考虑到这一点，我有几行代码缺少一个关键部分：

```
my $script_path = catfile( $FindBin::Bin, updir(), qw(scripts my_script.pl) );
my $include = 
    $HAS_BLIB && '-Mblib' || 
    '-I"' . catdir($FindBin::Bin, updir(), 'lib') . '"';
my $args = join ' ', map {qq["$_"]} @input_args;
my $command = qq{"$^X"  $include "$script_path" $args};
`$command`;
#test that script worked here... 
```

我放什么而不是标量`$HAS_BLIB`？我需要一种方法来判断我是否正在构建发行版。欢迎其他意见。也许我有更好的方法来做这件事？我只是想要一种方法来测试同时通过 和 的`prove`脚本`make test`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T22:24:10.210

要回答这个问题，您可以使用 Module::Path 来检查分发中的任何模块文件是否在`blib/lib`目录中。这不是万无一失的，因为有人可能`prove`在另一个名为 的目录内的发行版上运行`blib`，但我认为这不太可能。这也有一个缺点，即要求发行版`.pm`在某处有一个文件，但情况可能并非如此。

或者，您可以检查保存该目录的`t`目录（在测试脚本中，这将`$Bin`来自`FindBin`）中是否有`blib`目录。但是，如果您在`make`没有运行`make clean`该脚本后又进一步开发了该脚本，则当您运行`prove`该`blib`目录中的陈旧脚本时，仍将运行该脚本。

在我对我的问题的评论中，我提到了检查`$INC{'blib.pm'}`。这仅在使用 调用测试脚本时才有效`-Mblib`，并且`make test`不这样做。相反，它[`ExtUtils::Command::MM::test_harness`](https://metacpan.org/source/BINGOS/ExtUtils-MakeMaker-6.84/lib/ExtUtils/Command/MM.pm#L53)使用`blib/lib`和`blib/arch`作为包含目录调用。

Once you know that you're running code out of blib, then you need to change both the include path, which should be `blib/lib`, and the script path, which should be `blib/script/whatever` (and no `.pl` if your script had one originally, because `make` removes it). So here's a correct version of the original example:

```
use Module::Path 'module_path';
use Path::Tiny;
use FindBin;
use Test::More;
plan tests => 1;
use Capture::Tiny;
my $module_path = path(module_path('My::Thing'));
my $HAS_BLIB =
    $module_path        #Thing.pm
        ->parent    #My
        ->parent    #lib
        ->parent    #blib
        ->basename eq 'blib';
my $script_path = $HAS_BLIB && path(qw(blib script my_script)) ||
    path(path($FindBin::Bin)->parent, 'bin', 'my_script.pl');
my $include = $HAS_BLIB && '-Mblib' || # could also do -Iblib/lib -Iblib/arch
    '-I'. path(path($FindBin::Bin)->parent, 'lib'); # would use installed version of C code
my @command = ($^X, $include, $script_path, @batch_files);
my ($stdout, $stderr) = capture {system(@command)};
is($stderr, '', 'no errors reported from script');
#more tests here 
```

This is an awful lot of trouble, and in this case I don't think that it's necessary. I'm not entirely sure when it would be useful. If your distribution has C/C++ code then you might want to *always* use the blib solution, which adds blib/arch to the include path. With the above simple example, the test passes using the non-blib settings because the original files are still available. Little change happens to the files copied into the `blib` directory. So when I was debugging this, the only way I could tell if it was doing the right thing was to print out the full command used!

In other words, it wasn't very testable, and if someone really needs this then they should create a module to manage it (and test that). [Test::Script](https://metacpan.org/source/ADAMK/Test-Script-1.07/lib/Test/Script.pm#L116) seems to always use -Mblib, which would mean you could be using a stale `make` result, and you have to pass in the path of the script, meaning it's up to you to decide to whether to use the original script or the one inside `blib/script`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T03:52:25.913

如果您只需要测试脚本是否已成功写入文件而不需要检查其内容，则可以在脚本中执行此操作。例如，Perl [open](http://perldoc.perl.org/functions/open.html)`returns nonzero on success`和[print](http://perldoc.perl.org/functions/print.html) `returns true if successful`。

捕获这些函数（或您正在使用的任何函数）的返回值，测试是否成功，并相应地设置脚本的[退出值](http://perldoc.perl.org/functions/exit.html)，然后对其进行测试。

# ruby - 从脚本调用时，`stanfordparser` ruby gem 在`gsub`（TypeError）上失败？

> ID：14544675
> 
> 赞同：0
> 
> 时间：2013-01-27T05:19:13.820
> 
> 标签：ruby, stanford-nlp

我正在尝试在一个简单的 ruby​​ 脚本中使用`stanfordparser`( `gem install stanfordparser`)，但是我遇到了一些问题。我确实必须先安装一些依赖项（`rjb`& `treebank`），但是我没有遇到我认为源于这个 gem 的时代的问题，也许它不支持 ruby​​ 1.9。

我得到的错误是： `/Users/username/.rvm/gems/ruby-1.9.3-p362@all/gems/stanfordparser-2.2.0/lib/stanfordparser.rb:150:in 'gsub': can't convert Pathname into String (TypeError)`

似乎我需要修改像这样调用的任何 gsub 实例？

```
def initialize(grammar = ENGLISH_PCFG_MODEL, options = [])
  @grammar = Pathname.new(grammar.gsub(/\$\(ROOT\)/, ROOT))
  super("edu.stanford.nlp.parser.lexparser.LexicalizedParser", @grammar.to_s)
  @java_object.setOptionFlags(options)
end 
```

根据评论中的要求，`grammar`以 Nil 的形式出现，所以这绝对是一个问题，但我不知道如何解决这个问题。

如果您访问[http://stanfordparser.rubyforge.org](http://stanfordparser.rubyforge.org)上的文档并尝试按照 irb 中的说明进行操作，您会得到以下结果：

```
>> require "stanfordparser"
=> true
>> preproc = StanfordParser::DocumentPreprocessor.new
NoClassDefFoundError: edu/stanford/nlp/process/DocumentPreprocessor
    from /Users/username/.rvm/gems/ruby-1.9.3-p362@all/gems/stanfordparser-2.2.0/lib/java_object.rb:40:in `import'
    from /Users/username/.rvm/gems/ruby-1.9.3-p362@all/gems/stanfordparser-2.2.0/lib/java_object.rb:40:in `initialize'
    from /Users/username/.rvm/gems/ruby-1.9.3-p362@all/gems/stanfordparser-2.2.0/lib/stanfordparser.rb:240:in `initialize'
    from (irb):2:in `new'
    from (irb):2
    from /Users/username/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>' 
```

有没有其他人有运气让这个工作？

# c# - 如何在c#中截断字符串值？

> ID：14544676
> 
> 赞同：-6
> 
> 时间：2013-01-27T05:19:29.330
> 
> 标签：c#, formatting

我有一个格式为：

```
ABCDEFGHIJKLMN-OOOOOO 
```

如何在 c# 中将字符串值截断为以下值？

```
ABCDKLMNOOOOOO 
```

希望指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:28:59.310

好的，我将猜测一下逻辑规则。怎么样：

```
 string newStr = str.Substring(0,4)+str.Substring(10,4)+str.Substring(15,6); 
```

或者你可能想要

```
 string newStr = str.Substring(0,4)+str.Substring(10,4)+str.Split("-")[1]; 
```

你可能想要很多东西

# java - jstl taligb 中的 HTML5 data-* 属性

> ID：14544677
> 
> 赞同：1
> 
> 时间：2013-01-27T05:20:14.863
> 
> 标签：java, html, jsp, jstl, taglib

如何使用允许使用[data-* HTML API](http://html5doctor.com/html5-custom-data-attributes/)的 JSTL（Java 标准标签库）实现自定义 taglib ？如果这样的功能不存在，我将如何尽可能接近地模拟它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T09:27:45.453

如果我理解正确，您想创建一个接受动态属性的 JSP 自定义标记。请参阅[http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/tagext/DynamicAttributes.html](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/tagext/DynamicAttributes.html)。

您的标签必须声明为

```
<dynamic-attributes>true</dynamic-attributes> 
```

在 TLD 中，它必须实现`DynamicAttributes`接口。

# java - 无法在 jsp 页面中打印 request.getparameter 值

> ID：14544679
> 
> 赞同：0
> 
> 时间：2013-01-27T05:20:30.873
> 
> 标签：java, mysql, sql, jsp

我是 jsp 新手，我尝试在我的 jsp 页面中打印我的数据库值，下面的程序工作正常，而我直接打印 s1="january" 和 s2="2012" 值，数据类型均为 VARCHAR

```
String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber FROM userseven WHERE readingmonth = '"+s1+"' AND readingyear= '"+s2+"'"; 
```

如果我尝试打印我的 request.getparameter("t1")( t1 contains january ) value request.getparameter("t2");(t2 contains 2011)

它不会打印任何想法，

```
String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber FROM userseven WHERE readingmonth = '"+s11+"' AND readingyear= '"+s22+"'";

           <body>
           <form action="yeardb.jsp">
           <table border="1" >
           <tr>
           <td>Select Year</td>
           <td>
           <select name="t1">
           <option value="2013">2013</option>
           <option value="2012">2012</option>
           <option value="2011">2011</option>
           <option value="2010">2010</option>
           </select>
           </td></tr><tr><td>
          <tr><td>Select Month:</td>
          <td>
          <select name="t2"> 
          <option value="january">JANUARY</option>
          <option value="march">March</option>
          <option value="may">May</option>
           <option value="july">JULY</option>
           <option value="aug">AUGUEST</option>
            <option value="oct">OCTOBER</option>
            <option value="dec">DECEMBER</option>
            </select></td></tr><tr><td>
           <input type= "submit" value="submit" >
          </td></tr>
          </table>
           </form>
          </body>

          yeardb.jsp
       ********
        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

       <%@page import="com.mysql.jdbc.Driver"%>
       <%@ page import="java.sql.*" %>
       <%@ page import="java.io.*" %> 

      <html>
      <head>
     <title>display data from the table using jsp</title>
      </head>
       <body>
     <h1>welcome</h1>

     <%
     String s11=request.getParameter("t1");
     String s22=request.getParameter("t2");
     String s1="january";
     String s2="2011";
     out.print("i am String"+s11);
     out.print("i am String"+s22);
      out.print("outside try");
     try {
      out.print("inside try");
      String connectionURL = "jdbc:mysql://localhost:3306/horizontal";

      Connection connection = null;

      Statement statement = null;

      ResultSet rs = null;

      Class.forName("com.mysql.jdbc.Driver").newInstance();

      connection = DriverManager.getConnection(connectionURL, "root", "root");
      statement = connection.createStatement();
      out.print("before query");

    String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber FROM userseven WHERE readingmonth = '"+s1+"' AND readingyear= '"+s2+"'";

      out.print("after query");

      rs = statement.executeQuery(QueryString); 
```

%>

```
 <TABLE cellpadding="15" border="1" style="background-color: #ffffcc;">
  <%
   out.print("outside while");
   while (rs.next()) {
    out.print("inside while");
   %>
      <TR>

      <TD><%=rs.getString(1)%></TD>
      <TD><%=rs.getString(2)%></TD>
      <TD><%=rs.getString(3)%></TD>
      <TD><%=rs.getString(4)%></TD>

     </TR>
    <%   }    %>
    <%
// close all the connections.
    rs.close();
    statement.close();
   connection.close();
      }      catch (Exception ex) {
%>
</font>
<font size="+3" color="red"></b>
    <%
            out.println("Unable to connect to database.");
        }
    %>
    </TABLE><TABLE>
      <TR>

        <button type="submit"><-- back</button></TD>
       </TR>
     </TABLE>
    </font> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:55:17.647

我更深入地查看了您的代码，您正在设置：

```
String s22=request.getParameter("t2"); 
```

t2 包含月份，但您的 s2 变量包含年份。交换那些，你应该没问题。

```
 String s11=request.getParameter("t1");  <- This is your year
 String s22=request.getParameter("t2");  <- This is your month
 ....
 String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber FROM userseven WHERE readingmonth = '"+s22+"' AND readingyear= '"+s11+"'"; 
```

话虽如此，您应该真正考虑使用参数化查询（这很容易受到 SQL 注入的影响）——看看使用 PreparedStatement 代替：

```
String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber FROM userseven WHERE readingmonth = ? AND readingyear= ?";
PreparedStatement ps = connection.prepareStatement(QueryString )
ps.setString(1, s22);
ps.setString(2, s11);
rs = ps.executeQuery(); 
```

祝你好运。

# c# - LINQ 中的动态继承映射

> ID：14544683
> 
> 赞同：2
> 
> 时间：2013-01-27T05:21:29.350
> 
> 标签：c#, linq-to-entities

这是一个继承映射，当我知道类型：客户和员工时起作用。

```
modelBuilder.Entity<Person>()
            .Map<Customer>(c => c.Requires("Type").HasValue("Customer"))
            .Map<Employee>(e => e.Requires("Type").HasValue("Employee"))
            .ToTable("People", "dbo"); 
```

在我的例子中，**Customer**和**Employee**类将驻留在插件程序集中。所以，我正在尝试使用反射创建映射。

**注意：**为了使示例简单，我对类型进行了硬编码。另外，我只是尝试为**Customer**类型创建映射。

```
const BindingFlags binding = BindingFlags.Public | BindingFlags.Instance;

EntityTypeConfiguration<Person> entityConfig = modelBuilder.Entity<Person>();
var entityConfigType = entityConfig.GetType();

// Map Method
MethodInfo mapMethod = null;
var methods = entityConfigType.GetMethods(binding);
foreach (var method in methods)
{
    if (method.Name == "Map" && method.IsGenericMethod)
    {
        mapMethod = method.MakeGenericMethod(typeof(Customer));
        break;
    }
}

// Requires Method
Type[] requiresArgType = new Type[]
    {
        typeof(string)
    };

var mappingConfigType = typeof(EntityMappingConfiguration<Customer>);
var requiresMethod = mappingConfigType.GetMethod("Requires", binding, null, requiresArgType, null);

// Has Value Method
var vccType = typeof (ValueConditionConfiguration);
Type[] hasValueArgType = new Type[]
    {
        typeof(string)
    };

var hasValueMethod = vccType.GetMethod("HasValue", binding, null, hasValueArgType, null);

var param1 = Expression.Parameter(typeof (EntityMappingConfiguration<Customer>), "c");
var requiresCall1 = Expression.Call(param1, requiresMethod, Expression.Constant("Type"));
var hasValueCall1 = Expression.Call(requiresCall1, hasValueMethod, Expression.Constant("Customer"));

var lambda1 = Expression.Lambda(hasValueCall1, param1);
var @delegate1 = lambda1.Compile();

mapMethod.Invoke(entityConfig, new object[]
    {
        @delegate1
    }); 
```

尝试调用**Map**方法时，会引发以下异常：-

```
Object of type 'System.Func`2[System.Data.Entity.ModelConfiguration.Configuration.EntityMappingConfiguration`1[ConsoleApplication1.Customer],System.Data.Entity.ModelConfiguration.Configuration.StringColumnConfiguration]' cannot be converted to type 'System.Action`1[System.Data.Entity.ModelConfiguration.Configuration.EntityMappingConfiguration`1[ConsoleApplication1.Customer]]'. 
```

我如何转换

```
Func<EntityMappingConfiguration<Customer>> with return type of StringColumnConfiguration 
```

至

```
Action<EntityMappingConfiguration<Customer>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:14:04.030

我换了

```
var lambda1 = Expression.Lambda(hasValueCall1, param1); 
```

与以下

```
MethodInfo[] expressionMethods = typeof (Expression).GetMethods(BindingFlags.Public | BindingFlags.Static);

MethodInfo lambdaMethod = null;
foreach (MethodInfo method in expressionMethods)
{
    if (method.Name == "Lambda" && method.IsGenericMethod && method.GetParameters().Length == 2)
    {
        lambdaMethod = method;
        break;
    }
}

MethodInfo genericLambdaMethod = lambdaMethod.MakeGenericMethod(typeof (Action<>).MakeGenericType(typeof<EntityMappingConfiguration<Customer>>));

LambdaExpression lambda1 = (LambdaExpression) genericLambdaMethod.Invoke(null, new object[]
{
    hasValueCall1, new[]
    {
        param1
    }
}); 
```

# ruby-on-rails-3 - 如何从 Rails 3 中的视图实时更改控制器实例变量

> ID：14544684
> 
> 赞同：0
> 
> 时间：2013-01-27T05:22:05.037
> 
> 标签：ruby-on-rails-3

在我们的应用程序中，我们有一个 gem，它为五个运行 Rails 应用程序的网站提供通用代码。在文件中的 gem 中`lib/theme/controller_module.rb`是以下代码：

```
def application_javascripts(*items)
  @application_javascripts ||= []
  @application_javascripts += items
end 
```

在文件中的 gem 中`helpers/theme_helper.rb`是以下代码：

```
def application_js_include_tag
  if @application_javascripts
    javascript_include_tag( *@application_javascripts)
  end
end 
```

主题宝石位于每个应用程序的`Gemfile`. 在控制器代码和帮助程序中，`application_javascripts`执行以跟踪页面上使用了哪些特定于页面的 JavaScript，并将其`application_js_include_tag`放置在视图的底部以仅使那几个文件可用。

`@application_javascripts`不幸的是，一旦视图开始渲染，视图中的值似乎不会更新。在页面底部执行时，在帮助程序中添加`@application_javascripts`的内容对视图不可用。`application_js_include_tag`我是否需要一个单独的助手，比如`application_javascripts`在那里定义的变量，并在其中使用两者`application_js_include_tag`？还是其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:58:43.187

从它的行为来看，似乎`@application_javascripts`是在渲染开始时拍摄的。在渲染期间执行`controller.application_javascripts`不会更改`@application_javascripts`视图中 available 的值。定义`helpers/theme_helper.rb`：

```
def application_javascripts(*items)
  controller.application_javascripts(*items)
end 
```

也不会改变值。起作用的是重现代码，以便`@application_javascripts`由驻留在帮助文件中的代码更改。`helpers/theme_helper.rb`在控制器代码的副本中定义：

```
def application_javascripts(*items)
  @application_javascripts ||= []
  @application_javascripts += items
end 
```

工作正常。

# java - Java - 带有 System.out.println() 的 Mac/Windows

> ID：14544690
> 
> 赞同：3
> 
> 时间：2013-01-27T05:23:10.637
> 
> 标签：java, windows, macos, console, system.out

我们大多在 IDE 的控制台中使用 System.out.println。我正在使用 Eclipse。我还可以在我的 Mac 控制台应用程序上清楚地看到 println() 消息。这对我个人的事情很好。

这是代码：

```
public class Main {

    public static void main(String[] args) {

        System.out.println("Is this logged anywhere?");

    }

} 
```

这是我在 Mac 上看到的：

![在此处输入图像描述](../Images/62b2bd57f899258ac9fb68359573c84e.png)

Windows 是否有类似于 Mac 版本的控制台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:34:37.917

它不是。但是，如果您想检查其标准输出，您可以简单地从命令提示符运行该过程。（正如你所说，eclipse当然也可以。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T06:00:45.177

可悲的是，如前所述，我们在 Windows 上并没有真正做到这一点。您最好的选择是从 CMD 运行您的程序，然后将标准输出到文件中。类似 java -jar HelloWorld.jar > hello.txt 的东西。

我通常做的是为日志文件创建一个处理程序（通常只是 [program name] log [date].txt 并根据日志级别在此处输出所有消息，如果您习惯于仅使用 System ，这是一个好习惯打印出来。

直截了当的回答仍然是 Windows 没有标准的此类功能。您必须以某种方式通过管道传输到文件。

# c# - 如何在 SQL Server 数据库中更新信息时触发程序？

> ID：14544695
> 
> 赞同：1
> 
> 时间：2013-01-27T05:24:55.357
> 
> 标签：c#, .net, sql-server-2008

我想创建在另一个用户从数据库更新表值时更新其控件属性的应用程序。我通过计时器的帮助每秒刷新一个控件来找到一个解决方案，但这不好我想在更新一个值后更改而不是每秒请求一次 SQL Server？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:27:23.543

基本上你需要在表更新时发布 SQL。这称为推模型（相反的是您现在正在做的拉模型）。

您可以为此使用 SqlDependency。请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency%28v=vs.100%29.aspx)

但是，有一些与推送方法相关的开销。许多应用程序只是每 n 秒 (3 - 10) 执行一次查询，然后仅在属性更改时更新控件。

这确实是一种优化权衡。发出网络请求（拉模型）是否比让 SQL 服务器执行触发器然后发送更新消息（推模型）更“昂贵”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:26:44.850

您可以为此使用[SqlDependency ，而无需轮询。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency%28v=vs.100%29.aspx)

[在 C# Windows 应用程序中实现 SQL Server 2005 查询通知](http://support.microsoft.com/kb/555893)

# python - python简单的wsgi文件上传脚本 - 出了什么问题？

> ID：14544696
> 
> 赞同：1
> 
> 时间：2013-01-27T05:25:07.853
> 
> 标签：python, post, cgi, wsgi

```
import os, cgi

#self_hosting script
tags = """<form enctype="multipart/form-data" action="save_file.py" method="post">
<p>File: <input type="file" name="file"></p>
<p><input type="submit" value="Upload"></p>
</form>"""

def Request(environ, start_response):
    # use cgi module to read data
    form = cgi.FieldStorage(fp=environ['wsgi.input'], environ=environ, keep_blank_values=True)

    try:
        fileitem = form['file']
    except KeyError:
        fileitem = None

    if fileitem and fileitem.file:
        fn = os.path.basename(fileitem.filename)
        with open(fn, 'wb') as f:
            data = fileitem.file.read(1024)
            while data:
                f.write(data)
                data = fileitem.file.read(1024)

            message = 'The file "' + fn + '" was uploaded successfully'

    else :
        message = 'please upload a file.'

    start_response('200 OK', [('Content-type','text/html')])

    return [message + "<br / >" + tags] 
```

以上是我的 python wsgi 脚本，它接收文件并将其写入磁盘。但是，在执行时（选择文件）：

内部服务器错误 处理此请求时发生错误。请求处理程序失败

```
Traceback (most recent call last):
  File "C:\Python26\Http\Isapi.py", line 110, in Request
    return Handler(Name)
  File "C:\Python26\Http\Isapi.py", line 93, in 
    "/apps/py/" : lambda P: RunWSGIWrapper(P),
  File "C:\Python26\Http\Isapi.py", line 86, in RunWSGIWrapper
    return RunWSGI(ScriptHandlers[Path])
  File "C:\Python26\Http\WSGI.py", line 155, in RunWSGI
    Result = Application(Environ, StartResponse)
  File "\\?\C:\Python26\html\save_file.py", line 13, in Request
    form = cgi.FieldStorage(fp=environ['wsgi.input'], environ=environ, keep_blank_values=True)
  File "C:\Python26\Lib\cgi.py", line 496, in __init__
    self.read_multi(environ, keep_blank_values, strict_parsing)
  File "C:\Python26\Lib\cgi.py", line 620, in read_multi
    environ, keep_blank_values, strict_parsing)
  File "C:\Python26\Lib\cgi.py", line 498, in __init__
    self.read_single()
  File "C:\Python26\Lib\cgi.py", line 635, in read_single
    self.read_lines()
  File "C:\Python26\Lib\cgi.py", line 657, in read_lines
    self.read_lines_to_outerboundary()
  File "C:\Python26\Lib\cgi.py", line 685, in read_lines_to_outerboundary
    line = self.fp.readline(1<<16)
AttributeError: 'module' object has no attribute 'readline' 
```

在 wsgi 和 cgi 模块上相当愚蠢，我现在不知道要进步。任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T19:21:30.167

`environ['wsgi.input']`是像流一样的对象。您需要首先将其缓存到类似对象的文件中，例如：`tempfile.TemporaryFile`或`StringIO`（`io.BytesIO`在python3中）：

```
from tempfile import TemporaryFile
import os, cgi

def read(environ):
    length = int(environ.get('CONTENT_LENGTH', 0))
    stream = environ['wsgi.input']
    body = TemporaryFile(mode='w+b')
    while length > 0:
        part = stream.read(min(length, 1024*200)) # 200KB buffer size
        if not part: break
        body.write(part)
        length -= len(part)
    body.seek(0)
    environ['wsgi.input'] = body
    return body

def Request(environ, start_response):
    # use cgi module to read data
    body = read(environ)
    form = cgi.FieldStorage(fp=body, environ=environ, keep_blank_values=True)
    # rest of your code 
```

出于安全原因考虑掩盖`environ`您传递给的值`FieldStorage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:51:39.033

自我回答：对不起，我没有说这是 PyISAPIe 特有的问题。类文件对象`environ['wsgi.input']`没有`readline()`像`environ`不同 wsgi 实现中的其他变量那样的方法。

（低效的解决方法）是将 environ['wsgi.input'] 中的所有内容保存到 a`tempfile`并将其传递给`FieldStorage`.

所以 ：

```
import tempfile, cgi
def some_wsgi_app(environ, start_response):
    temp_file = tempfile.TemporaryFile()
    temp_file.write(environ['wsgi.input'].read()) # or use buffered read()
    temp_file.seek(0)
    form = cgi.FieldStorage(fp=temp_file, environ=environ, keep_blank_values=True)
    # do_something #
    temp_file.close() #close and destroy temp file

    # ... start_response, return ... # 
```

但是，如果用户上传的数据太大，上述示例将无法正常运行。

# python - 权限被拒绝 安装和配置 mod_wsgi

> ID：14544698
> 
> 赞同：0
> 
> 时间：2013-01-27T05:25:49.233
> 
> 标签：python, mod-wsgi, ubuntu-12.04

我正在尝试使用[http://grok.zope.org/documentation/tutorial/installing-and-setting-up-grok-under-mod-wsgi/installing-and-configuring-mod-wsgi](http://grok.zope.org/documentation/tutorial/installing-and-setting-up-grok-under-mod-wsgi/installing-and-configuring-mod-wsgi)编译最新的 m0d_wsgi 文件。在 ubuntu 12.04 我有：

```
$./configure mod_wsgi.c --with-python=f:/python/python.exe 
```

我正进入（状态：

./configure mod_wsgi.c --with-python=f:/python/python.exe

```
bash: ./configure: Permission denied 
```

这是目录：

```
drwx------ 2 dan dan  16384 2012-08-22 23:12 .
drwx------ 3 dan dan  16384 2013-01-26 21:25 ..
-rw-r--r-- 1 dan dan   3782 2013-01-26 23:25 config.log
-rw-r--r-- 1 dan dan  20428 2013-01-26 23:24 config.status
-rw-r--r-- 1 dan dan  80107 2012-08-22 23:10 configure
rw-r--r-- 1 dan dan   5886 2012-08-22 23:10 configure.ac
-rw-r--r-- 1 dan dan     97 2012-08-22 23:10 .hgignore
-rw-r--r-- 1 dan dan     56 2012-08-22 23:10 .hgtags
-rw-r--r-- 1 dan dan  11358 2012-08-22 23:10 LICENCE
-rw-r--r-- 1 dan dan 484936 2012-08-22 23:10 mod_wsgi.c
-rw-r--r-- 1 dan dan   1195 2012-08-22 23:10 posix-ap1X.mk.in
-rw-r--r-- 1 dan dan   1247 2012-08-22 23:10 posix-ap2X.mk.in
-rw-r--r-- 1 dan dan  18063 2012-08-22 23:12 README
-rw-r--r-- 1 dan dan    907 2012-08-22 23:10 win32-ap22py26.mk
-rw-r--r-- 1 dan dan    907 2012-08-22 23:10 win32-ap22py27.mk
-rw-r--r-- 1 dan dan    907 2012-08-22 23:10 win32-ap22py31.mk 
```

我会很感激任何帮助。

谢谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:29:16.017

您的配置脚本没有执行权限

您应该`chmod 755 configure`首先运行以授予它执行权限。

# algorithm - 多对一匹配算法

> ID：14544701
> 
> 赞同：1
> 
> 时间：2013-01-27T05:26:22.517
> 
> 标签：algorithm, many-to-many

如果这是重复的，我很抱歉。我缺乏计算机科学知识，不知道要正确搜索什么。

我需要找到一个匹配算法。我有一系列房间，以及一系列内容换房间。内容物有一个最小尺寸的房间可以容纳——所以有些人很乐意放在任何房间里，有些人只能放在一两个房间里。我还将为某些房间设置最大尺寸，但我认为这仅在我确定房间是否合适时才会生效。

假设（虽然 - 这在我的实际使用中不能保证）有一个潜在的解决方案，我如何找到最佳分配，使得每个房间只使用一次并且没有一个内容缺少房间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:06:32.713

您的问题似乎是[最大二分匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)问题。您可以将您的问题视为无向图`G(V,E)`，其中顶点`V`是房间和内容，边`E`是房间和内容之间的可能连接：

1.  该图是二分图。如果我们将顶点分成两个集合，房间和内容，每个集合中都没有内部边。
2.  如果房间足够大以容纳内容`contents(i)`，则图表中存在一条边。`room(j)`

最大匹配产生两个集合（即房间和内容）中顶点之间的最大配对数，确保每个顶点只使用一次。如果所有顶点都匹配，则称匹配是“完美的”。有许多算法可用于此类问题，可能最快的是[Hopcroft-Karp](http://en.wikipedia.org/wiki/Hopcroft-Karp_algorithm)方法。

您还可以考虑进一步优化您的问题，尝试将房间中浪费的总空间最小化。在这种情况下，“权重”将根据内容区域和房间区域之间的差异与上面定义的边缘相关联。然后，您将寻求最大权重最大匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:09:59.370

您可以将其解决为[http://en.wikipedia.org/wiki/Assignment_problem](http://en.wikipedia.org/wiki/Assignment_problem)。您没有匹配数量的要匹配的东西，但您可以为先不足的一方补上东西。如果您为每个可能的匹配设置相同的组合事物的成本，则具有组合事物的解决方案的最小成本答案也将是仅产生部分匹配的没有组合事物的解决方案的最小成本答案，因为编造的东西对成本的贡献无论如何分配都是一样的。

（当然，可能有一种更快的方法来解决您的特定问题 - 例如，如果您在一侧只有一件事要匹配，只需在每个可能的位置尝试）。

# c# - C# - 如何在用户控件之间传输信息

> ID：14544702
> 
> 赞同：2
> 
> 时间：2013-01-27T05:26:24.263
> 
> 标签：c#, winforms

我正在做一个应用程序，用户在文本框中输入一个值，然后他按下一个按钮，两者都在同一个用户控件中。然后文本框的结果将显示在其他用户控件的标签上。两个用户控件都在同一个窗体中。

谢谢！

[用户界面图片](http://www4.picturepush.com/photo/a/12049907/img/12049907.jpg)

![在此处输入图像描述](../Images/efa5453dc96ea8a458587681a308cad2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:35:39.033

最常见的方法是使用事件。我会这样做：

首先定义一个 EventArgs：

```
public class MyEventArgs : EventArgs
{
    public string Text { get; private set; }

    public MyEventArgs(string Text)
    {
        this.Text = Text;
    }
} 
```

然后在您的 UserControl （带有按钮的那个）中：

```
public partial class MyUserControl
{
    public event EventHandler<MyEventArgs> ButtonClicked;

    public MyUserControl()
    {
        //...

        button1.Click += (o, e) => OnButtonClicked(new MyEventArgs(textBox1.Text));
    }

    protected virtual void OnButtonClicked(MyEventArgs args)
    {
        var hand = ButtonClicked;
        if(hand != null) ButtonClicked(this, args);
    }
} 
```

然后在表单中订阅您的`MyUserControl.ButtonClicked`事件并调用第二个控件中的方法。

* * *

请注意，如果按钮的行为和文本框中的文本实际上*不*相关，则可以使用属性来获取输入的文本，并将`EventArgs`事件留空。

PS 名称`MyEventArgs`、`MyUserControl`和`ButtonClicked`仅用于演示目的。我鼓励您在代码中使用更具描述性/相关性的命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:45:55.400

试试这个：

```
public class FirstUserControl:UserControl
{
    Public event EventHandler MyEvent;

    //Public property in your first usercontrol
    public string MyText
    {
        get{return this.textbox1.Text;} //textbox1 is the name of your textbox
    }

    private void MyButton_Clicked(/* args */)
    {
        if (MyEvent!=null)
        {
            MyEvent(null, null);
        }
    }
    //other codes
}

public class SecondUserControl:UserControl
{
    //Public property in your first usercontrol
    public string MyText
    {
        set{this.label1.Text = value;} //label1 is the name of your label
    }

    //other codes
} 
```

然后在您的 MainForm 中：

```
public class MainForm:Forms
{
    //Add two instance of the UserControls

    public MainForm()
    {
        this.firstUserControl.MyEvent += MainWindow_myevent;
    }

    void MainWindow_myevent(object sender, EventArgs e)
    {
        this.secondUserControl.MyText = this.firstUserControl.MyText;
    }

    //other codes
} 
```

# mysql - 从 Coldfusion 10 服务器执行 MySQL 插入语句的问题

> ID：14544703
> 
> 赞同：1
> 
> 时间：2013-01-27T05:26:39.937
> 
> 标签：mysql, coldfusion

我正在尝试从 Coldfusion 10 服务器执行 MySQL MySQL 插入语句，这会导致 Cold Fusion 错误。

```
<cfquery name="test" datasource="MySQLServer_2"> 
    INSERT INTO developer_website.debug
    (Value_INT,Value_STR)
    VALUES(1,'test');
</cfquery>

 Coldfusion error link - http://postimage.org/image/dazcm6bfr/ 
```

从 MySQL Workbench 执行时，MySQL insert 语句可以正常工作。此外，我确认在 Coldfusion 10 服务器上执行的选择语句可以正常工作。

```
INSERT INTO developer_website.debug 
(Value_INT,Value_STR) 
VALUES(1,'test'); 

<cfquery name="test" datasource="MySQLServer_2"> 
    SELECT * 
    FROM developer_website.debug;
</cfquery> 
```

接下来，我尝试设置变量 'binlog-format' cfquery 本身。

```
<cfquery name="test" datasource="MySQLServer_2"> 
    SET GLOBAL binlog_format = 'ROW';

    INSERT INTO developer_website.debug
    (Value_INT,Value_STR)
    VALUES(1,'test');

    SET GLOBAL binlog_format = 'STATEMENT';
</cfquery> 
```

这导致了一个新的 CFE。

```
Coldfusion error link - http://postimage.org/image/7q4rjrhnv/ 
```

最后，我尝试在“MySQL Server 5.5\my.ini”文件中设置“binlog-format”。

```
binlog-format = ROW 
```

同样，问题没有解决。我继续收到原始的 CFE，并且没有插入数据。

我正在寻求有关该问题的见解，特别是如何解决该问题或可能的解决方法。欢迎所有建设性的意见/见解/问题/（解决方案）。

规格： Coldfusion 版本：ColdFusion 10,282462 MySQL 版本：5.5.29-log MySQL 连接器版本：mysql-connector-java-5.1.22-bin

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:39:45.640

如果 DSN 设置正确，则已指定数据库。没有理由指定`developer_website.debug`为您的表格，这可能是导致问题的原因。您应该只是`debug`作为该特定 DSN 的表进行访问。

# c - 传递一个双指针来修改字符串

> ID：14544712
> 
> 赞同：3
> 
> 时间：2013-01-27T05:28:20.560
> 
> 标签：c

所以我有一个程序有时可以工作，但有时却不行。有时放入 printf 语句会使程序神奇地工作（有时 printf 会使它中断）。这让我觉得就指针/分配而言我搞砸了，因为我仍然无法解决一些问题。该程序太长，无法发布所有代码，所以我只显示我认为问题所在。

我得到了一个函数，它接受一个 FILE* 和一些 char** 作为参数，返回一个 int。该函数正在解析文件，将必要的字符串存储到双指针指向的位置。

这是我使用该函数的方式（省略/简化了很多代码）：

```
char **s1;
char **s2;
char **s3;

int main(int argc, char ** argv){
    s1 = (char**)malloc(20);
    s2 = (char**)malloc(20);
    s3 = (char**)malloc(20);

    /* Unnecessary code omitted */
    read(inFile);
}

int read(FILE* in){
    /* omitted code */
    parse(in,s1,s2,s3);
    printf("%s",*s1); /* This is to show how I access the strings */
} 
```

我很确定在我的程序的某个地方，这些字符串被覆盖了，因为我没有正确分配内存。希望我的错误在我给出的代码片段中可见，因为我没有很多其他理论可以解释为什么我的代码不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:33:10.343

由于`parse()`指定了 API，`char **`我相信可以安全地假设您确实*需要*在调用中使用双重间接，但在声明中不需要。

因此，您可能需要跳过`malloc()`电话并说：

```
char *s1, *s2, *s3;
...
parse(in, &s1, &s2, &s3); 
```

这将允许`parse()`分配它自己的空间并通过修改指针本身将三个指针返回给它的调用者。感谢您将问题提炼为核心的努力，但看到*parse()*的原型可能会很有趣。

# javascript - Javascript 逐行差异

> ID：14544713
> 
> 赞同：3
> 
> 时间：2013-01-27T05:28:52.583
> 
> 标签：javascript, diff

我有来自用户 Harmen 的这个 javascript 代码。

令人惊讶的是，如此短的代码如何使工作如此出色。 [http://jsfiddle.net/pfYtu/](http://jsfiddle.net/pfYtu/)

我试图对其进行编辑以进行逐行比较，但是代码没有注释，而且我越来越难以理解逻辑（它是如何工作的）。愿原编码员能给我一些建议。

我说的逐行是什么意思？目前它将结果显示为表格的单列，我希望它在两列中。这是原始源代码。

```
// http://harmen.no-ip.org/javascripts/diff/
// http://stackoverflow.com/questions/4462609
function diff_text(text1, text2) {
  var table = '';

  function make_row(x, y, type, text) {
    if (type == ' ') console.log(x, y);
    var row = '<tr';
    if (type == '+') row += ' class="add"';
    else if (type == '-') row += ' class="del"';
    row += '>';

    row += '<td class="lineno">' + y;
    row += '<td class="lineno">' + x;
    row += '<td class="difftext">' + type + ' ' + text;

    table += row;
  }

  function get_diff(matrix, a1, a2, x, y) {
    if (x > 0 && y > 0 && a1[y-1] === a2[x-1]) {
      get_diff(matrix, a1, a2, x-1, y-1);
      make_row(x, y, ' ', a1[y-1]);
    }
    else {
      if (x > 0 && (y === 0 || matrix[y][x-1] >= matrix[y-1][x])) {
        get_diff(matrix, a1, a2, x-1, y);
        make_row(x, '', '+', a2[x-1]);
      }
      else if (y > 0 && (x === 0 || matrix[y][x-1] < matrix[y-1][x])) {
        get_diff(matrix, a1, a2, x, y-1);
        make_row('', y, '-', a1[y-1]);
      }
      else {
        return;
      }
    }
  }

  function diff(a1, a2) {
    var matrix = new Array(a1.length + 1);
    var x, y;

    for (y = 0; y < matrix.length; y++) {
      matrix[y] = new Array(a2.length + 1);

      for (x = 0; x < matrix[y].length; x++) {
        matrix[y][x] = 0;
      }
    }

    for (y = 1; y < matrix.length; y++) {
      for (x = 1; x < matrix[y].length; x++) {
        if (a1[y-1] === a2[x-1]) {
          matrix[y][x] = 1 + matrix[y-1][x-1];
        }
        else {
          matrix[y][x] = Math.max(matrix[y-1][x], matrix[y][x-1]);
        }
      }
    }

    get_diff(matrix, a1, a2, x-1, y-1);
  }

  diff(text1.split('\n'), text2.split('\n'));
  return '<table class="diff_text">' + table + '</table>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:33:59.380

试试这个 make_row 函数...它在 2 列中给出结果。

```
function make_row(x, y, type, text) {
    if (type == " ") console.log(x, y);
    var row = "<tr";
    if (type == "+") row += ' class="add"';
    else if (type == "-") row += ' class="del"';
    row += ">";

    row += '<td class="lineno">' + y;
    row += '<td class="lineno">' + x;
    if (type == " ") {
        row += '<td class="difftext">' + type + " " + text;
        row += '<td class="difftext">' + type + " " + text;
    }

    if (type == "+") {
        row += '<td class="difftext">' + " ";
        row += '<td class="difftext">' + type + " " + text;
    }

    if (type == "-") {
        row += '<td class="difftext">' + type + " " + text;
        row += '<td class="difftext">' + " ";
    }

    table += row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:53:32.973

我强烈推荐[Google 的 diff_match_patch](http://code.google.com/p/google-diff-match-patch/)库——它非常高效且运行良好。它可以从机器和人类的角度产生差异。

最近在一个项目中使用它。API 有点麻烦——所以我写了一个 jQuery 库来包装调用：[https](https://github.com/arnab/jQuery.PrettyTextDiff/) ://github.com/arnab/jQuery.PrettyTextDiff/ 。

这是[关于 jsfiddle 的演示](http://jsfiddle.net/arnab/YwSVY/)。基本上你需要做的就是：

```
$(<selector>).prettyTextDiff({
    // options
}); 
```

如果您使用它并有疑问，请在此处提问（或在 GH 问题中）。

# php - 阵列不工作（自定义点系统）

> ID：14544726
> 
> 赞同：0
> 
> 时间：2013-01-27T05:31:55.097
> 
> 标签：php, arrays, function

我正在做一个积分系统。我制作了一个数组来保存升级所需的点，但它不起作用。

这是代码：

```
 $level_stats = array();

    $level_stats[1] = 50;

    $level_stats[2] = 100;

    $level_stats[3] = 175;

    $level_stats[4] = 250;

    $level_stats[5] = 350;

    $level_stats[6] = 500;

    $level_stats[7] = 700;

    $level_stats[8] = 950;

    $level_stats[9] = 1250;

    $level_stats[10] = 2000;

    function getLevelRequirementForUser($name){ // function to get needed points to level up
            $level = tonumber(getLevelForUser($name)); // returns 1 (function not shown in code, it works though)
            return $level_stats[$level]; // returns nothing.

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:36:22.107

首先，您的数组是在函数范围之外定义的。当您尝试访问函数内部的 $level_stats 时，它正在访问一个局部变量，在您的情况下该变量是未定义的。这就是为什么它没有返回任何东西。

您可以通过使用 global 关键字或将数组作为参数传递给函数来解决此问题。

1)

```
 function getLevelRequirementForUser($level_stats, $name){ // function to get needed points to level up

        $level = tonumber(getLevelForUser($name)); // returns 1 (function not shown in code, it works though)
        return $level_stats[$level]; // returns nothing.

      } 
```

2)

```
 function getLevelRequirementForUser($name){ // function to get needed points to level up
        global $level_stats;
        $level = tonumber(getLevelForUser($name)); // returns 1 (function not shown in code, it works though)
        return $level_stats[$level]; // returns nothing.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:37:11.863

这似乎是一个简单的范围界定问题。该`$level_stats`数组不在函数的范围内。

如果您不需要`$level_stats`其他任何地方，您可以简单地在您的函数中定义它，例如

```
function getLevelRequirementForUser($name) {
    $level_stats = array(
        1 => 50,
        2 => 100,
        // etc
    );

    $level = tonumber(getLevelForUser($name));
    return $level_stats[$level];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T05:35:15.453

您需要全球化您的变量：

```
function getLevelRequirementForUser($name){ 
        global $level_stats;

        $level = tonumber(getLevelForUser($name));
        return $level_stats[$level];
} 
```

# javascript - KineticJS 无法用图像填充多边形

> ID：14544728
> 
> 赞同：2
> 
> 时间：2013-01-27T05:32:03.223
> 
> 标签：javascript, jquery, html, canvas, kineticjs

将 KineticJS 从 v4.0.5 更新到 v4.3.1 后，我无法再使用此方法用图像填充多边形：

```
polygon.setFill({
    image: imageObj
}); 
```

我最终得到黑色背景。还有其他方法吗？

**尝试：**我试过`poly.setFillPattern(image)`

**jsfiddle：http:** [//jsfiddle.net/eeSSN/](http://jsfiddle.net/eeSSN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:42:44.367

*   删除 Kinetic.Polygon 中的“填充”配置。
*   您创建了 thingImage 但从未使用过它。
*   您可以使用“setFillPatternImage”
*   您必须在 iamge.onload 中调用 stage.draw

代码：

```
var stage = new Kinetic.Stage({
   container: 'canvas',
   width: 600,
   height: 600
});
var layer = new Kinetic.Layer();
// Outline
var poly = new Kinetic.Polygon({
    points: [0, 0, 400, 0, 400, 400, 0, 400],
    //fill: 'red',
    stroke: '#000',
    strokeWidth: 0,
    name: 'poly',
    draggable: false
});
var imageObj = new Image();
imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
imageObj.onload = function() {
    poly.setFillPatternImage(imageObj);
    stage.draw();
}

layer.add(poly);
stage.add(layer); 
```

[http://jsfiddle.net/lavrton/eeSSN/1/](http://jsfiddle.net/lavrton/eeSSN/1/)

# ruby-on-rails - 'rails s' 抛出错误

> ID：14544731
> 
> 赞同：1
> 
> 时间：2013-01-27T05:32:44.883
> 
> 标签：ruby-on-rails, ruby, web-applications, configure

我正在配置一个 Rails APP。我确实正确安装了捆绑包。还使用 RVM 使用 ruby​​ 1.8.7。现在在捆绑安装之后，它在执行 rails 时会抛出以下给定的错误。

> /usr/local/lib/site_ruby/1.8/rubygems.rb:335:in `bin_path': 找不到 rails-3.2.9 的可执行 rails (Gem::Exception)

谁能帮我解决这个问题？

> 使用红宝石：1.8.7
> 
> 导轨版本：3.0.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:06:12.687

运行 bundle install 后，您`Gemfile.lock`将获得所需的所有 gem 及其版本的列表。

但是，您需要运行`bundle exec`才能让 bundler 为您提供这些 gem 版本。

rails 脚本是一个例外，因为它会为您调用 bundler，但听起来好像某些东西在您的环境中不起作用。

尝试使用 bundle exec 执行 rails 脚本，如下所示：

`bundle exec rails s`

看看这是否有帮助。此外，来自编写捆绑程序的人：http: [//yehudakatz.com/2011/05/30/gem-versioning-and-bundler-doing-it-right/](http://yehudakatz.com/2011/05/30/gem-versioning-and-bundler-doing-it-right/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:50:02.880

您在同一个 gemset 中有两个 rails gem 版本，因此它正在选择最新版本。因此，您需要为 rails 命令指定 rails 版本。

尝试这个：

```
 $ rails _3.0.3_ server 
```

# php - 如何在数据库中的复选框中将默认值设置为“已选中”

> ID：14544737
> 
> 赞同：0
> 
> 时间：2013-01-27T05:34:23.220
> 
> 标签：php, mysql

简而言之，用户将复选框值存储在 MySQL 数据库中。我可以遍历数据库以显示每个复选框的 VALUES (Skills_ID + Skills_Name)，以便用户可以添加他们的技能；但是，对于数据库中已有的技能，我无法使用标记为“已选中”的默认值填充这些复选框。

一个装满业力的盒子，给今晚能帮我上床的人。:)

这是我的代码：

```
 function isChecked() {
            $query = "select * FROM individual_skills WHERE Ind_ID = ".$_SESSION['Ind_ID']. "";
            $result = mysql_query($query) or die(mysql_error());        
            while($row = mysql_fetch_array($result))
            {
                // If value exists, set $valueExitsInDB to true
                if (isset($row['Skills_ID'])) {
                    $valueExitsInDB="TRUE";
                } else {
                    $valueExitsInDB="FALSE";
                }
                    // if the value does exist, then we are writing 'checked' in the checkbox       
                    if ($valueExitsInDB) {
                        return "checked";
                    } else {
                        return "";
                    }
            } // END WHILE LOOP
        } // END FUNCTION 
```

而且，我在复选框循环中的代码看起来像这样（无需让您阅读循环，因为我可以安全地将复选框值拉到输出 - 只是不是默认值）：

```
 echo "<input type='checkbox' name='skills[]' value='$skill_ID' checked='isChecked()'>". $skillName .""; 
```

所以，你可以看到，我正在调用函数：isChecked()。

任何和所有的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:59:24.507

假设我了解您要执行的操作，您的代码存在一些问题：

*   您实际上并没有`isChecked()`像您认为的那样调用该函数；它只是`"isChecked()"`添加到输出中的字符串。如果您检查生成的 HTML，您会注意到这一点。该行应为：

    ```
    echo "<input type='checkbox' name='skills[]' value='$skill_ID'" .
        (isChecked($skill_ID) ? " checked='checked'" : "") . "'> $skillname"; 
    ```

*   正如您在上面注意到的，您应该将技能 ID 传递给`isChecked()`函数。然后您应该检查查询中的这一行，而不是*返回的查询中是否有任何`Skills_ID`集合。否则，您正在检查是否为该个人定义了*任何技能！*所以你的函数现在应该是：

    ```
    function isChecked($skill_ID)
    {
        $query = "SELECT 1 FROM individual_skills WHERE Ind_ID = " . 
            $_SESSION['Ind_ID'] . " AND Skills_ID = $skill_ID";

        $result = mysql_query($query) or die(mysql_error());
        return mysql_num_rows($result) = 1;
    } 
    ```

* * *

一些旁注：

*   我从函数中返回一个假值或真值。这与将返回是或否的命名“is...”一致。然后调用者（`echo`语句）可以决定如何处理返回的值。

*   您可能不必像现在这样访问数据库 1000 次。如果您将初始查询更改为包含一`isChecked`列，则首先不需要该函数和其他查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T05:43:59.063

它应该如下所示。

***方法一***

```
echo "<input type='checkbox' name='skills[]' value='$skill_ID'  checked='".isChecked()."'>". $skillName .""; 
```

***方法二***

你可以试试

```
echo "<input type='checkbox' name='skills[]' value='$skill_ID ".isChecked().">". $skillName .""; 
```

# 解释

***方法一***

```
checked="checked" 
```

应该是不同的属性，而不是将其放入值中

***方法二***

另外添加也`checked`可以为您解决问题。

# 建议

不要为每个复选框进行数据库调用，而是尝试创建一个包含所有数据的数组。尝试多维数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T05:46:23.437

```
echo "<input type='checkbox' name='skills[]' value='$skill_ID'" . isChecked() . ">" . $skillName . ""; 
```

尝试使用这个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T05:55:00.393

我认为，你`error(all checked checkboxes)`是因为**isset**，

而不是`isset($row['Skills_ID'])`使用`!empty($row['Skills_ID'])`，或者`!is_null($row['Skills_ID'])`因为如果该字段为空，那么它也会给你真实的，

见这里[链接](http://php.net/manual/en/types.comparisons.php)

# c# - Windows Phone 编程 Visual Studio

> ID：14544738
> 
> 赞同：0
> 
> 时间：2013-01-27T05:34:28.210
> 
> 标签：c#, windows-phone-7, visual-studio-2012

我正在为 Windows Phone 编写一些应用程序，并且正在寻找一些我无法弄清楚如何在 Visual Studio 中的 Windows Phone 项目中执行的标准调试实践。

1.  如何仅出于调试目的在 Windows Phone 项目中将语句打印到命令行？
2.  可以用吗`MessageBox.show()`（好像不能导入System.Windows.Forms）

感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:40:24.297

您可以使用将输出到调试窗口的 Debugger.Log

[http://msdn.microsoft.com/en-in/library/system.diagnostics.debugger.log(v=vs.95).aspx](http://msdn.microsoft.com/en-in/library/system.diagnostics.debugger.log(v=vs.95).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:28:28.620

对于**高级跟踪和日志记录**，您可能需要查看

[Silverlight 和 WP7 异常处理和日志记录构建块](http://silverlightlogging.codeplex.com/)

[Windows Phone 的 NLog](http://nlog-project.org/2011/01/09/nlog-for-windows-phone-7.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T20:02:16.010

1.  您可以简单地使用`Debug.WriteLine(Something);`like `Console.WriteLine(Something);`。将`Something`自动转换为字符串。这很简单。
2.  如前所述，您确实可以使用`MessageBox`控制。它存在于`System.Windows`命名空间中。如果您需要自定义消息框，也可以使用 Coding4Fun 等第三方工具包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T05:43:29.300

实际上，您不能从 Windows Phone 项目导入 System.Windows.Forms。对于 WP7，您将使用 Silverlight 的子集进行编程。考虑到这一点，Silverlight for WP7 中有一个使用 System.Windows 命名空间的消息框控件：http: [//msdn.microsoft.com/en-us/library/system.windows.messagebox (VS.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.messagebox(VS.95).aspx)

我建议您通过利用单元测试而不是打印到消息框来满足您的调试需求。

# javascript - 如何制作 AngularJS 指令来停止传播？

> ID：14544741
> 
> 赞同：76
> 
> 时间：2013-01-27T05:34:57.713
> 
> 标签：javascript, jquery, angularjs, stoppropagation

我正在尝试“stopPropagation”以防止在单击 li 内的元素（链接）时关闭 Twitter Bootstrap 导航栏下拉菜单。使用这种方法似乎是常见的[解决方案](https://stackoverflow.com/questions/12323066/twitter-bootstrap-stop-propagation-on-dropdown-open)。

在 Angular 中，似乎指令是执行此操作的地方？所以我有：

```
// do not close dropdown on click
directives.directive('stopPropagation', function () {
    return {
        link:function (elm) {            
            $(elm).click(function (event) {                
                event.stopPropagation();
            });
        }
    };
}); 
```

...但该方法不属于元素：

```
TypeError: Object [object Object] has no method 'stopPropagation' 
```

我将指令与

```
<li ng-repeat="foo in bar">
  <div>
    {{foo.text}}<a stop-propagation ng-click="doThing($index)">clickme</a>
  </div>
</li> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-01-27T12:18:35.087

我用过这种方式：创建了一个指令：

```
 .directive('stopEvent', function () {
        return {
            restrict: 'A',
            link: function (scope, element, attr) {
                if(attr && attr.stopEvent)
                    element.bind(attr.stopEvent, function (e) {
                        e.stopPropagation();
                    });
            }
        };
     }); 
```

可以这样使用：

```
<a ng-click='expression' stop-event='click'> 
```

这是停止任何类型事件传播的更通用的方法。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2013-01-27T06:25:07.710

*“目前，一些指令（即 ng:click）会停止事件传播。这会阻止与依赖于捕获此类事件的其他框架的互操作性。”* -[链接](https://github.com/angular/angular.js/issues/259)

...并且能够在没有指令的情况下进行修复，并且只需执行以下操作：

```
<a ng-click="doThing($index); $event.stopPropagation();">x</a> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-27T05:36:35.390

`stopPropagation`必须在事件对象上调用，而不是元素本身。这是一个例子：

```
compile: function (elm) {
    return function (scope, elm, attrs) {
        $(elm).click(function (event) {
            event.stopPropagation();
        });
    };
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-06T16:54:41.823

这是一个简单的抽象指令，用于停止事件传播。我认为它可能对某人有用。只需传递您希望停止的事件。

```
<div stopProp="click"></div> 
```

```
app.directive('stopProp', function () {
  return function (scope, elm, attrs) {
    elm.on(attrs.stopProp, function (event) {
        event.stopPropagation();
    });
  };
});
```

# android - 使用 Facebook 等从 Android 客户端登录 Openfire 服务器

> ID：14544742
> 
> 赞同：3
> 
> 时间：2013-01-27T05:35:00.247
> 
> 标签：android, facebook, login, openfire, google-talk

我正在创建一个具有聊天功能的 Android 应用程序。我计划使用 openfire 作为服务器并管理自定义数据库中的其他用户数据。我希望用户能够使用他们的 facebook 或 gtalk 等帐户登录到我的服务器，而无需在我的 openfire 服务器上创建单独的帐户。我知道 Kraken 能够允许当前用户连接到其他 xmpp 服务器上的其他帐户。

另一种选择是直接从客户端连接到那些其他服务，但是我将无法从我的中央数据中心轻松跟踪和管理这些连接。我必须进行额外的传输才能将该数据传输回我的服务器。这也可能会导致冲突，因为聊天功能应该只与我的应用程序的其他用户而不是那些不是我的应用程序用户的用户通信。

TIA 为您提供任何帮助。这是我在开始完善我的应用程序的所有其他部分以进行初始发布之前必须克服的最后一个主要障碍。

[编辑] 我有一个外部数据库。我不能直接使用一些 PHP 和 SQL 来编辑数据库以输入新用户吗？我还认为我可以允许一个人登录到 facebook 或其他一些服务，然后从该服务请求信息以将其输入到 Openfire 数据库中，如果它不存在的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:47:26.603

您可以使用[用户服务插件](http://www.igniterealtime.org/projects/openfire/plugins/userservice/readme.html)在 Openfire 服务器上创建用户，但这并不安全，因为客户端需要插件密码才能执行此操作。

您的应用最好使用单独的身份验证服务器；它的功能之一是通过这个插件在 Openfire 服务器上创建用户。

# java - 使用 primefaces 在 Bean 中检索组件标签（菜单栏）

> ID：14544744
> 
> 赞同：0
> 
> 时间：2013-01-27T05:35:33.527
> 
> 标签：java, xhtml, primefaces

这是 Process.xhtml 中的代码。我们有一个“Process”菜单栏，在该菜单栏下我们有“Data Report”和“Charts”作为 subMenuBars 当我们单击 DataReport 或 Charts 时，我们需要在 backing bean 中使用标签名称“Process”。

```
<p:menubar>               
 <p:submenu label="Process" icon="ui-icon-home"
            style="font-size:10pt;">
            <p:menuitem value="Data Report" icon="ui-icon-contact"
                url="DataReport.xhtml" id="DataExport"/>
            <p:submenu label="Charts" icon="ui-icon-star">
                <p:menuitem value="Bar Graph" url="BarChart.xhtml" id="BarChart"/>      
            </p:submenu>
            </p:submenu> 
 </p:menubar> 
```

# objective-c - 未调用 connectiondidfinishloading

> ID：14544753
> 
> 赞同：0
> 
> 时间：2013-01-27T05:36:31.210
> 
> 标签：objective-c, nsurlconnection

我试图四处寻找答案，但没有找到适合我的解决方案。

我要做的就是正确设置我的 NSURLConnection 。当我调用doSomethingTwo() 时，我从didReceiveResponse 和didReceiveData 得到打印输出，但没有didFailWithError 或connectionDidFinishLoading。还有其他我需要做的事情吗？

这是我的代码：

```
- (void) doSomethingTwo: (CCMenuItem  *) menuItem
{
    NSLog(@"The second menu was called");
    self.responseData = [NSMutableData data];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://theholyroller.net/iphone/index.php"]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response {
    NSLog(@"Received Response");
    [self.responseData setLength:0];
}

- (void) connection:(NSURLConnection *) connection didReceiveData:(NSData *)data {
    NSLog(@"Received Data");
    NSLog(@"%@", data);
    [self.responseData appendData:data];
}

- (void) connection:(NSURLConnection *) connection didFailWithError:(NSError *)error {
    NSLog(@"Failed with error");
}

- (void) connectionDidFinishloading:(NSURLConnection *)connection {
    NSLog(@"Finished Loading");
    NSLog(@"%@", self.responseData);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:38:51.847

您没有将 . 中的“L”大写`connectionDidFinishLoading`。

# java - Java - ImageIO 抛出 IllegalArgumentException

> ID：14544759
> 
> 赞同：0
> 
> 时间：2013-01-27T05:38:48.030
> 
> 标签：java, embedded-resource, javax.imageio, illegalargumentexception

您好 Java 开发人员，

所以我最近遇到了这个问题。这是和SSCCE：

```
public class SampleClass extends JPanel{

    private Image img;
    private final String IMG_DIRECTORY = ("/res/BG.png");

    public SampleClass(){

        try{
            img = ImageIO.read(getClass().getResource(IMG_DIRECTORY));
        } catch (IOException ioEx) {
            ioEx.printStackTrace();
        }
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);

        g.drawImage(img, 0, 0, null);
    }

} 
```

此行抛出异常

```
img = ImageIO.read(getClass().getResource(IMG_DIRECTORY)); 
```

这是堆栈跟踪：

```
Exception in thread "main" java.lang.IllegalArgumentException: input == null!
    at javax.imageio.ImageIO.read(Unknown Source)
    at com.forte.project.chatservice.uicomponent.FrameBackground.<init>(FrameBackground.java:27)
    at com.forte.project.chatservice.ui.MainFrame.<init>(MainFrame.java:27)
    at com.forte.project.chatservice.ChatService.main(ChatService.java:18) 
```

我做了以下事情：
- 谷歌。
- 更新了我的 Java
- .getResourceAsStream(IMG_DIRECTORY);
- this.getClass().getResource(IMG_DIRECTORY));
- MainClass.class.getClass().getResource(IMG_DIRECTORY);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:49:58.597

将文件夹放置`res`到`src`文件夹解决了问题。

# r - 计算潮差

> ID：14544762
> 
> 赞同：3
> 
> 时间：2013-01-27T05:39:25.873
> 
> 标签：r

我有一个包含以下潮汐信息的数据框。我正在尝试编写一个需要四个参数（low.max、hi.max、hi.earliest、hi.latest）的函数。例如，向我展示所有低点为 2 英尺或更低、嗨点为 6 英尺或更低、嗨点发生在上午 10 点到下午 4 点之间的所有日子。现在我正在遍历行来执行此操作（有点让 hi.max - low.max 使用它），但我是 R 新手，并假设有一种更像 R 的方法。

```
 date      day  time       ft      cm     H/L
2013/01/01  Tue 07:03 AM    8.1     247     H
2013/01/01  Tue 12:49 PM    5.1     155     L
2013/01/01  Tue 05:30 PM    5.7     174     H
2013/01/02  Wed 12:03 AM    0.5     15      L
2013/01/02  Wed 07:33 AM    8.1     247     H
2013/01/02  Wed 01:40 PM    4.4     134     L
2013/01/02  Wed 06:32 PM    5.3     162     H
2013/01/03  Thu 12:42 AM    1.4     43      L
2013/01/03  Thu 08:03 AM    8.1     247     H
2013/01/03  Thu 02:33 PM    3.5     107     L
2013/01/03  Thu 07:46 PM    4.9     149     H 
```

添加 dput 输出：

```
structure(list(Date = structure(c(15706, 15706, 15706, 15707, 
15707, 15707, 15707, 15708, 15708, 15708), class = "Date"), Day = c("Tue", 
"Tue", "Tue", "Wed", "Wed", "Wed", "Wed", "Thu", "Thu", "Thu"
), Time = c("7:03 AM", "12:49 PM", "5:30 PM", "12:03 AM", "7:33 AM", 
"1:40 PM", "6:32 PM", "12:42 AM", "8:03 AM", "2:33 PM"), Pred.Ft. = c(8.1, 
5.1, 5.7, 0.5, 8.1, 4.4, 5.3, 1.4, 8.1, 3.5), Pred.cm. = c(247L, 
155L, 174L, 15L, 247L, 134L, 162L, 43L, 247L, 107L), High_Low = c("H", 
"L", "H", "L", "H", "L", "H", "L", "H", "L")), .Names = c("Date", 
"Day", "Time", "Pred.Ft.", "Pred.cm.", "High_Low"), row.names = c(NA, 
10L), class = "data.frame") 
```

到目前为止，我为 hi/lo 部分所做的尝试与时间无关：

```
 tides <- read.csv("TideData.csv", stringsAsFactors = FALSE)

  for (i in 1: nrow(tides)){
    if (tides[i, 6] == "L" & tides[i, 4] <= low.max 
        & tides[i+1, 6] == "H" & tides[i+1, 4] <= hi.max){

      #deal with last iteration being out of bounds / write out to a df

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:57:15.687

子集化数据是 R 中非常基本的操作，并且在 R 手册[An Introduction to R](http://cran.r-project.org/doc/manuals/r-release/R-intro.html#Index-vectors)中有很好的描述。

假设您的数据被调用`x`，请使用子集运算符`[`指定要保留的行：

```
x[x$Pred.Ft < 2, ]

        Date Day     Time Pred.Ft. Pred.cm. High_Low
4 2013-01-02 Wed 12:03 AM      0.5       15        L
8 2013-01-03 Thu 12:42 AM      1.4       43        L 
```

或者只有涨潮：

```
x[x$Pred.Ft > 6, ]

        Date Day    Time Pred.Ft. Pred.cm. High_Low
1 2013-01-01 Tue 7:03 AM      8.1      247        H
5 2013-01-02 Wed 7:33 AM      8.1      247        H
9 2013-01-03 Thu 8:03 AM      8.1      247        H 
```

要组合逻辑语句，请使用`|`for`OR`或`&`for `AND`。因此，要一步获得一组低潮和高潮：

```
x[x$Pred.Ft > 6 | x$Pred.Ft < 2, ]

        Date Day     Time Pred.Ft. Pred.cm. High_Low
1 2013-01-01 Tue  7:03 AM      8.1      247        H
4 2013-01-02 Wed 12:03 AM      0.5       15        L
5 2013-01-02 Wed  7:33 AM      8.1      247        H
8 2013-01-03 Thu 12:42 AM      1.4       43        L
9 2013-01-03 Thu  8:03 AM      8.1      247        H 
```

* * *

仅在大潮中获得高潮，试试这个。由于您知道每个低点后面都有一个高点，因此您可以使用 计算潮位差`diff`，然后只返回差值高于阈值的行：

```
x$Tidediff <- c(NA, diff(x$Pred.Ft))
na.omit(x[x$Tidediff > 6, ])

        Date Day    Time Pred.Ft. Pred.cm. High_Low Tidediff
5 2013-01-02 Wed 7:33 AM      8.1      247        H      7.6
9 2013-01-03 Thu 8:03 AM      8.1      247        H      6.7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:28:04.313

使用该`by`函数处理具有相同日期值的记录：

```
L.lt.2 <- by(tides, tides$Date, FUN= function(d) d[
                          d$High_Low=="L" & d$Pred.Ft <= 2,  "Date",drop=FALSE])
H.lt.6.b.4 <- by(tides, tides$Date, FUN= function(d) d[
               d$High_Low=="H"     &     d$Pred.Ft <= 6    & 
               as.POSIXct(d$Time, format="%H:%M %p") <= 
                                           as.POSIXct("4:00 PM", format="%H:%M %p"), 
                                                             "Date", drop=FALSE])
intersect(L.lt.2, H.lt.6.b.4)
#[[1]]
#character(0) 
```

没有费心提出额外的时间要求，因为数据不是为了支持条件测试而构建的。留下作为“练习”，因为它只涉及向`[i, ...]`-selection 操作添加额外的逻辑向量。（最好构建一个至少有一个日期满足目标的示例。）

# php - 从文件中读取字符串并在点击时显示随机字符串的 PHP 脚本

> ID：14544763
> 
> 赞同：0
> 
> 时间：2013-01-27T05:39:27.137
> 
> 标签：php, string, file, random

我有一个包含大约 100 个不同单词的文本文档，当用户单击按钮以查看我将如何执行此操作并显示文本文件中的字符串时，我希望随机显示这些单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:42:53.527

```
$words = file('file.txt');
shuffle($words);
echo $words[0]; 
```

# android - 从用户 Android Eclipse 加载多个图像和选择

> ID：14544769
> 
> 赞同：1
> 
> 时间：2013-01-27T05:40:32.097
> 
> 标签：android, eclipse

我是android的初学者。

我想要做的是，加载多个图像图标，比如一个需要打开图像的文件夹。用户将选择一个，该图像应以全尺寸显示。

这是我到目前为止所做的......

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    addListenerOnButton();

}

public void addListenerOnButton() {

    image = (ImageView) findViewById(R.id.imageView1);

    button = (Button) findViewById(R.id.btnChangeImage);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            image.setImageResource(R.drawable.def);
        }

    });

} 
```

我的意思是，如果我在 setImageResource 中添加更多图像，这里的图像将会改变，但不像我想要的那样。我应该进一步做什么？请帮忙...

# c++ - C++ 错误：类模板已被定义

> ID：14544771
> 
> 赞同：1
> 
> 时间：2013-01-27T05:41:02.813
> 
> 标签：c++, templates

我在 Visual Studio 2010 Pro 中收到此错误：“错误 C2953：'list_1::Node'：已定义类模板”

这是我收到错误的 Node.cpp 类列表（在第 24 行，代码的最后一行。）

```
#include "Node.h"

namespace list_1
{
    template <typename T>
    struct Node
    {
        //Constructor
        Node<T>(T D)
        {
            data = d;
            next = NULL;        
        }
    }
;} 
```

和 Node.H 文件：

```
#pragma once

namespace list_1
{
    template <typename T>
    struct Node
    {
        T data;
        Node<T> *next;

        // Constructor
        // Postcondition: 
        Node<T> (T d);
    };
} 
```

我已经看过[here](https://stackoverflow.com/questions/10157416/error-class-template-has-already-been-defined)，这对我没有帮助，因为我已经使用过#pragma 一次，并且在列表头文件中我有#ifndef LIST_H 和#define LIST_H。这个[问题](https://stackoverflow.com/questions/2346879/how-do-i-fix-class-template-has-already-been-defined)不适合我的需要，这个[答案](https://stackoverflow.com/questions/6825313/class-template-has-already-been-declared-as-a-non-class-template)中的所有内容似乎都与我已经拥有的模板位有关。

如果我尝试将其设为 struct Node，则会收到错误“错误 C2753：'list_1::Node'：部分专业化无法匹配主模板的参数列表”

所以我不知道该怎么办。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T05:47:25.387

对于一个普通的（非模板）类，你会做这样的事情：

```
//whatever.h
namespace Y 
    class X {
    public:
        X();
    };
} 
```

然后在 cpp 文件中，您将拥有如下内容：

```
namespace Y { 
    X::X() { /* ... */ }
} 
```

但是，对于模板，您通常需要将实现放在编译器可以看到它的任何地方，这通常意味着也放入头文件中。既然如此，很多人只是将定义写为类定义中的内联定义：

```
namespace Y { 
    template <class T>
    class X {
    public:
        X(T d) { /* ... */ }
    };
} 
```

如果需要，您可以在类定义之外定义函数，但是由于它们无论如何都会成为标题，因此并不能真正完成很多事情（至少在典型情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:41:55.660

我同意你的编译器。你定义了`struct`两次。

修理 -

从您的标题中删除。

你的 .cpp 应该是这样的。

```
#include "Node.h"

namespace list_1
{
    //Constructor
    template<typename T>
    Node<T>::Node(T D){
        ...
    }
} 
```

本质上，结构块只出现在标题中。

此外，我想知道您是否知道涉及在[文件](http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html)[中定义模板类成员的问题`.cpp`](http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html)

# java - Java中的字符串相等比较失败

> ID：14544774
> 
> 赞同：0
> 
> 时间：2013-01-27T05:42:12.883
> 
> 标签：java, string, jpa, oracle11g, ejb

我从对象列表中的对象中获取一个字符串值。

```
transitionName = transitionList.get(m).getTransitionName().toString(); 
```

以及来自 EJB 查询检索到的对象的另一个字符串值。

```
changeItem = changeItemFacade.getChangeItem(changeGroupList.get(1));
char tempNewString[] = changeItem.getNewstring();
newString=new String(tempNewString); 
```

现在这个 Char[] 与 String 的比较是因为包含 changeItem 的 Oracle 表已将列 NewString 定义为 CLOB。并且 ejb 实体将变量“NewString”的类型定义为 Char[] 数组。所以我必须在进行比较之前将其转换为字符串。

问题是这个 if 语句总是返回 false 并且不会被执行。

```
if(transitionName.equalsIgnoreCase(newString)){} 
```

当我尝试记录值 (Logger.Debug) 时，它完美地显示了服务器实例日志中的两个（相等）字符串值。

我转换 char[] 数组的方式有问题吗？

我尝试将实体类变量的类型更改为 String（当然还有 getter 和 setter 方法），但也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:56:56.127

在比较之前尝试对字符串进行 trim()。另外，寻找字符编码差异。– 奇点

# php - Magento 1.7.0.0 FishPig - 不包括类别

> ID：14544782
> 
> 赞同：1
> 
> 时间：2013-01-27T05:44:09.887
> 
> 标签：php, magento, magento-1.7, fishpig

**编辑 01-28-13：修改以澄清我的问题。**

我正在使用 Magento 1.7.0.0 和 FishPig WP 完全集成。我们已经成功列出了特定类别和所有类别的产品，但想知道在某些情况下我们是否可以从指定类别中排除。我在 WordPress 的 functions.php 中找到了解决方案，但这似乎不起作用。

这是显示所有类别帖子的当前代码。我们想添加一个例外，以便可以排除 WordPress 1 类别。

**这是从我不想包括类别“Press_HomePage”的所有类别中显示的代码：**

```
 $col_posts = Mage::getResourceModel('wordpress/post_collection')->addIsPublishedFilter();
    $posttotal = count($col_posts->getAllIds());
    $posttotid = $col_posts->getAllIds();

    //i<=2 means displays last 2 posts
    //display latest 2 posts...
    for ( $i=1; $i<=2; $i++ )
      {
  ?>
        <div class="blog">
          <h2><?php echo $col_posts->getItemById($posttotid[$posttotal-$i])->getPostDate(); ?></h2>
          <h1><?php echo $col_posts->getItemById($posttotid[$posttotal-$i])->getPostTitle(); ?></h1>
          <div style="float:left; margin-top:15px; margin-bottom:25px;">
          <?php 
            $featured_img = $this->getSkinUrl('images/pree_emty.png');
            if($featuredImage = $col_posts->getItemById($posttotid[$posttotal-$i])->getFeaturedImage())
              {
                $featured_img = $featuredImage->getAvailableImage();
              }
          ?>
            <img style="float: left;" src="<?php echo $featured_img; ?>" width="204" height="204" alt="" />

            <div style="float: left; width: 580px; padding: 10px;">
              <p><?php echo substr(strip_tags($col_posts->getItemById($posttotid[$posttotal-$i])->getPostContent()), 0, 400); ?></p>
              <p>
                <a href="<?php echo $col_posts->getItemById($posttotid[$posttotal-$i])->getUrl(); ?>">
                  <img src="<?php echo $this->getSkinUrl('images/view_btn.jpg'); ?>" width="170" height="32" alt="" />
                </a>
              </p>
            </div>
          </div>
        </div>
  <?php
      }
  ?> 
```

让我知道是否需要澄清自己。我很感激你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:50:42.680

```
 //loki - get all the post ids
    $col_posts = Mage::getResourceModel('wordpress/post_collection')->addIsPublishedFilter();
    $posttotid = $col_posts->getAllIds();

    //loki - get all the press ids
    $col_posts_press = Mage::getResourceModel('wordpress/post_collection')->addIsPublishedFilter()->addCategorySlugFilter('press_homepage');
    $posttotid_press = $col_posts_press->getAllIds();

    //loki - removing the press_homepage category from array and reindexing
    $blogposts = array_diff($posttotid, $posttotid_press);
    $blogposts = array_values($blogposts);
    $posttotal = count($blogposts);

    //i<=2 means displays last 2 posts
    //display latest 2 posts...

    for ( $i=1; $i<=2; $i++ )
      {

  ?>
        <div class="blog">
          <h2><?php echo $col_posts->getItemById($blogposts[$posttotal-$i])->getPostDate(); ?></h2>
          <h1><?php echo $col_posts->getItemById($blogposts[$posttotal-$i])->getPostTitle(); ?></h1>
          <div style="float:left; margin-top:15px; margin-bottom:25px;">
          <?php 
            $featured_img = $this->getSkinUrl('images/pree_emty.png');
            if($featuredImage = $col_posts->getItemById($blogposts[$posttotal-$i])->getFeaturedImage())
              {
                $featured_img = $featuredImage->getAvailableImage();
              }
          ?>
            <img style="float: left;" src="<?php echo $featured_img; ?>" width="204" height="204" alt="" />

            <div style="float: left; width: 580px; padding: 10px;">
              <p><?php echo substr(strip_tags($col_posts->getItemById($blogposts[$posttotal-$i])->getPostContent()), 0, 400); ?></p>
              <p>
                <a href="<?php echo $col_posts->getItemById($blogposts[$posttotal-$i])->getUrl(); ?>">
                  <img src="<?php echo $this->getSkinUrl('images/view_btn.jpg'); ?>" width="170" height="32" alt="" />
                </a>
              </p>
            </div>
          </div>
        </div>
  <?php
      }
  ?> 
```

# jquery - jQuery Sortable - 使用元素的数据作为属性？

> ID：14544783
> 
> 赞同：1
> 
> 时间：2013-01-27T05:44:09.697
> 
> 标签：jquery, jquery-ui-sortable

我想使用该`sortable("toArray")`方法。但是，我不想使用元素的默认属性`id`。我知道我可以做这样的事情：

```
var arr = ("#my_list").sortable("toArray", { attribute: something_else }); 
```

但我相信这*不是*数据值，而是元素的正常属性。相反，我希望能够使用存储在元素本身中的一些数据。

例如，我的列表中的一个列表项`sortable`可能看起来像这样（用 FireBug 观察...有点不同，我猜它看起来有点不同）：

```
<li class="wo-event wo-event-red" style="">Service | Hancock</li>
sch_item="189"
woID="R-130109-072"
woType="R"
title="Service | Hancock"
backgroundColor="red"
pos="3"
rt_item=192 
```

因此，根据上述内容，我有、、、、、和`<li>`的数据值。理想情况下，我将能够使用这些数据值中的一个生成一个数组，以便我的数组看起来像这样：等等...`sch_item``woID``woType``title``backgroundColor``pos``rt_item``[<sch_item value>, <another sch_item value>]`

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:20:11.340

考虑到这一点，有一种方法可以做到这一点。您可以创建自己的迭代器。

因此，如果您想在`sch_item`每次列表排序时生成一个排序数组：

```
$("#my_list").sortable({
   stop: function(event, ui) {
         var arrayOfCustomData = [];
         $(this).find('li').each(function(index, item) {
                 arrayOfCustomData[index] = item.data('sch_item');
         });
         $(this).data('sch_item_sorted',arrayOfCustomData);
   }
}); 
```

然后您可以随时检索排序列表`$("#mylist").data('sch_item_sorted');`

# android - Android ICS/JB，以编程方式重启到安全模式？

> ID：14544787
> 
> 赞同：1
> 
> 时间：2013-01-27T05:44:59.493
> 
> 标签：android, android-4.2-jelly-bean

我正在为我的galaxy nexus 制作一个实用程序应用程序。我想以安全模式重新启动我的平板电脑。

我试着往里看`PowerManager`

```
PowerManager p = (PowerManager) getSystemService(POWER_SERVICE);
p.reboot(reason); 
```

看来这不会以安全模式重新启动设备。是否可以以编程方式重新启动设备？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:49:39.030

> 基本上有两种已知的进入安全模式的方法：
> 
> 1.  Android 检测到新安装的应用程序存在问题，并在进入安全模式时强制关闭它。
>     
>     
> 2.  电源应用时的按键组合；

我怀疑还有另一种方法可以做到这一点。如果有的话，Custom ROMS 的大多数恢复和电源菜单都会包含它。

传递给的字符串`reboot()`是内核参数，并且只有在设备的内核具有该选项时才会生效。您可以在这里尝试一些选项。

**更新：**

安全模式是切换在`PackageManagerService`Android 的系统服务器（“包”服务）内部：

```
public void enterSafeMode() {
    enforceSystemOrRoot("Only the system can request entering safe mode");

    if (!mSystemReady) {
        mSafeMode = true;
    }
} 
```

以下是关于从任何 APP 使用它的一些要点：

1.  执行此代码的进程必须是系统或具有 Root 权限
2.  这是一项内部服务，禁止使用任何外部代码。不过，某些系统类确实获得`IPackageManager`了该服务的实现存根 ()。
3.  模式更改仅在系统尚未准备好时才有用。
4.  假设您的应用程序确实以某种方式打开了安全模式，由于启用了安全模式，因此无法将其关闭。除非它是一个系统应用程序，内置在 ROM 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:35:05.020

第三种进入安全模式的方法（在 GingerBread 2.3.5 之后的某个时间可用）

在设备完全通电的情况下，按电源按钮，然后长按电源关闭菜单项。一个选项似乎进入了安全模式。因此，现在可能有一种以编程方式进入安全模式的方法。当然希望能帮助解决问题。我正在记忆一篇引用了另一个来源的 lifehacker 文章。

# c++ - 将多态 unique_ptr 作为参数传递时内存泄漏

> ID：14544788
> 
> 赞同：1
> 
> 时间：2013-01-27T05:45:03.240
> 
> 标签：c++, memory-leaks, c++11, polymorphism

**编辑：**对于任何阅读此问题以备将来使用的人：该错误与 unique_ptr 无关。正如 JoergB 在他的回答中公正地说的那样，这只是我忘记基类的虚拟析构函数的错误。

* * *

在偶尔的运行时崩溃之后，我认为我的代码正遭受严重的内存泄漏炎。我用 Valgrind 运行我的程序，医生似乎同意：字节**肯定会丢失**。不过，我终其一生都无法弄清楚哪里出了问题。

我设法将泄漏归结为以下三行：

```
std::unique_ptr<Operator> pointer(new Operator{"left", "right"});
NodeSpace space; // The node space takes ownership over the operator

// When I comment out the following line, Valgrind reports nothing:
space.setNode("key", move(pointer)); 
```

在第一行`unique_pointer`创建了一个类的实例`Operator`。内部`Operator`看起来像这样：

```
class Operator : public Node {
public:
    Operator(std::initializer_list<std::string> input_keys) {
        input_nodes_.reserve(input_keys.size());
        for_each(begin(input_keys), end(input_keys), [this](const string& key) {
            input_nodes_[key] = nullptr;
        });
    }

    // ...

private:
    std::unordered_map<std::string, Node*> input_nodes_;
}; 
```

我将`unique_ptr`r 值引用传递给以下函数：

```
void NodeSpace::setNode(const std::string& key, std::unique_ptr<Node> node); 
```

因为节点空间接管了传入节点的所有权，所以它采用`unique_ptr`按值（移动语义）。在内部它将指针存储在一个 中`std::map`，但即使函数体被注释掉，内存泄漏仍然会发生（这让我相信问题是`node`函数调用的参数）。

有人远程知道问题出在哪里吗？

**旁注：**我没有使用`shared_ptr`，因为节点可以以循环方式相互引用。`weak_ptr`可能是一种选择，但是通过系统的构建，当其拥有的节点空间不再存在时，节点就不可能存在。

**Valgrind 输出：**

```
==83791== 112 (16 direct, 96 indirect) bytes in 1 blocks are definitely lost in loss record 606 of 794
==83791==    at 0x100060ABD: malloc (vg_replace_malloc.c:274)
==83791==    by 0x1000C9147: operator new(unsigned long) (in /usr/lib/libc++.1.dylib)
==83791==    by 0x10000CB0F: std::__1::__hash_table<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*>, std::__1::__unordered_map_hasher<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, true>, std::__1::__unordered_map_equal<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, true>, std::__1::allocator<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*> > >::__rehash(unsigned long) (in ./test/mimi)
==83791==    by 0x10000C684: std::__1::__hash_table<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*>, std::__1::__unordered_map_hasher<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, true>, std::__1::__unordered_map_equal<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, true>, std::__1::allocator<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, mimi::Node*> > >::rehash(unsigned long) (in ./test/mimi)
==83791==    by 0x100005D5A: mimi::Operator::Operator(std::initializer_list<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >) (in ./test/mimi)
==83791==    by 0x100005984: mimi::Operator::Operator(std::initializer_list<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >) (in ./test/mimi)
==83791==    by 0x10002E940: main (in ./test/mimi) 
```

我也不明白为什么 Valgrind 似乎告诉我泄漏发生在`Operator`构造函数中，即使在调用时操作符已经被构造`NodeSpace::setNode()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T14:15:10.760

您没有向我们展示代码的关键部分 - 的声明`Node`，特别是它的析构函数，的部分`NodeSpace`，特别是它如何删除`Node`s 等。但是从您的评论“节点和运算符都没有任何析构函数和复制/移动构造函数/assignment-operator”，看来这就是问题所在。

`Operator`如果您通过 a`Node *`或 a维护 a 的所有权`unique_ptr<Node>`，即如果您通过 a 删除任何派生对象`Node *`，则`Node` **必须**具有虚拟析构函数。如果你不声明和定义一个，它不会。

虽然结果行为未定义，但结果通常是派生类成员的析构函数不被调用。这与您的错误消息相匹配。

# iphone - 隐藏/取消隐藏视图的动画

> ID：14544792
> 
> 赞同：0
> 
> 时间：2013-01-27T05:46:01.953
> 
> 标签：iphone, ipad

我想隐藏/显示按钮点击视图。目前我正在做

> view.hidden=YES;

和

> view.hidden=否；

但我正在寻找一些动画，同时隐藏和显示视图。请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:01:02.433

你可以试试这个动画，它会在 2 秒内显示和隐藏你的视图

```
 //your view displayed
                view.alpha = 1.0

                //animate you view hidden
                [UIView animateWithDuration:2.0f
                      delay:0.0f
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{
                     view.alpha = 0.0;
                 }
                 completion:^(BOOL finished) {
                    //view completed 
               }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:07:05.943

给按钮的**标签**是**101**并设置`view.hidden=NO;`

**写入按钮方法**

```
-(void)btnMetho:(UIButton *)sender
{
  if(sender.tag == 101)
  {
      if(!view.isHidden)
        view.hidden=YES;
     button.tag = 102; 
  }
  else
  {
    if(view.isHidden)
        view.hidden=NO;
     button.tag = 101;
  }

} 
```

**编辑 ：**

对于动画集`view.alpha to 0`（***对应于 hidden = YES）***或`view.alpha to 1`（***hidden = NO***）。

```
[UIView animateWithDuration:0.3 animations:^() {
    view.alpha = 1 /or/ 0;
}] 
```

# objective-c - 为什么这段代码有一个 3 个字节的数组来构建一个“整个字节”？

> ID：14544793
> 
> 赞同：1
> 
> 时间：2013-01-27T05:46:15.010
> 
> 标签：objective-c, c, strtol

我在互联网上找到了以下代码，它将`NSString`表示形式
`@"00F04100002712"`转换为实际的字节数组。该代码有效并且确实生成了正确的输出；我只是不明白为什么有`char byte_chars[3]`而不是`char byte_chars[2]`因为代码中只使用了前两个位置。

```
void hexStringToBytes(NSString *s, NSMutableData *data)
{
    unsigned char whole_byte;
    char byte_chars[3] = {'\0','\0','\0'};
    int commandLength = (int)[s length];

    // convert hex values to bytes
    for (int i=0; i < commandLength/2; i++)
    {
        byte_chars[0] = [s characterAtIndex:i*2];
        byte_chars[1] = [s characterAtIndex:i*2+1];
        whole_byte = strtol(byte_chars, NULL, 16);
        [data appendBytes:&whole_byte length:1];
    }
} 
```

我认为这与`strtol`函数调用有关，但我不确定是什么。

**有人可以解释这是如何以及为什么起作用的吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:48:41.223

C 风格的字符串有一个终止零（又名空）字符。以十六进制表示的 8 位字节的 ASCII 表示将是两个字符加上该终止符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T05:48:53.357

是的，它确实。strtol 需要一个“字符串”。在 C 中，字符串以 null 结尾。因此空值的额外字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T05:48:54.623

C 字符串必须以 NULL (0) 结尾。由于这是使用带有函数的 C 字符串，该函数需要以 NULL 结尾的字符串，因此字符数组必须为 NULL 留出空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T05:51:56.083

C 字符串必须以 NUL (0) 终止。对 strtol 函数的调用期望如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T06:16:07.343

你搞砸了 C、C++ 和 Objective-C。

C++ 和 Obj-c 充分利用了数组。C++ 为 NULL ('\0') 创建一个大小为 + 额外 1 个空间的数组。Obj-c 的 NSString 类只是一个指针，因此不需要 NULL。

在 C 中，您需要以 NULL ('\0) 来终止字符数组，并使用分配的大小中的最后一个空间。因此，如果您编写`char str[10];`，那么您可以使用 9 个字符，最后一个字符会自动设为 NULL。

在您使用 strtol 的代码片段中，这是一个需要 C-char-array 的 C 函数。最后一个空间没有明确使用。NULL 占据了那个位置。

# c# - 在 C# 中区分两个字符串列表

> ID：14544795
> 
> 赞同：0
> 
> 时间：2013-01-27T05:46:39.180
> 
> 标签：c#, list, except

我正在尝试创建一个字符串列表，其中包含列表 A 和列表 B 之间不同的所有项目。我有以下代码，我觉得我很接近，但我在最后一行遇到语法错误。任何帮助，将不胜感激：

```
 List<string> ListA = new List<string>(textBox_CompareListA.Text.Split(delimiterChars, StringSplitOptions.RemoveEmptyEntries));
 List<string> ListB = new List<string>(textBox_CompareListB.Text.Split(delimiterChars, StringSplitOptions.RemoveEmptyEntries));

 List<string> DifferencesList = ListA.Except(ListB, StringComparer.OrdinalIgnoreCase).Union(ListB.Except(ListA, StringComparer.OrdinalIgnoreCase)); 
```

这是错误：[http ://screencast.com/t/Y8S9LC2Y](http://screencast.com/t/Y8S9LC2Y)

![语法错误](../Images/0797231bb0ba2c866aba77ec4aa33476.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:50:36.163

您应该尝试调用[Enumerable.ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx)从查询表达式中获取列表。

```
List<string> DifferencesList = ListA.Except(ListB, StringComparer.OrdinalIgnoreCase).Union(ListB.Except(ListA, StringComparer.OrdinalIgnoreCase)).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T06:01:08.040

我忍不住指出这一点：

```
 List<string> diffs = ListA.Union(ListB).Except(ListA.Intersect(ListB)).ToList(); 
```

根据您的数据，它可能会更快（我相信如果交叉点很小）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T05:50:27.863

更改最后一行代码：

```
List<string> DifferencesList = ListA.Except(ListB, StringComparer.OrdinalIgnoreCase).Union(ListB.Except(ListA, StringComparer.OrdinalIgnoreCase)); 
```

到 ：

```
var DifferencesList = ListA.Except(ListB, StringComparer.OrdinalIgnoreCase).Union(ListB.Except(ListA, StringComparer.OrdinalIgnoreCase)); 
```

或者 ：

```
IEnumerable<string> DifferencesList = ListA.Except(ListB, StringComparer.OrdinalIgnoreCase).Union(ListB.Except(ListA, StringComparer.OrdinalIgnoreCase)); 
```

# php - 要在数据表中显示的 JSON 数据

> ID：14544799
> 
> 赞同：0
> 
> 时间：2013-01-27T05:47:35.967
> 
> 标签：php, mysql, json

我尝试将 sql 结果显示在数据表中，但是当我尝试执行代码时，数据数组的 JSON 结果显示为 NULL。我检查了 SQL，它是正确的，但无法以 JSON 格式显示。这是代码：

```
 <?php 
// { initialise variables 
  $amt=100; 
  $start=0; 
// } 
// { connect to database 
  function dbRow($sql){ 
    $q=mysql_query($sql); 
    $r=mysql_fetch_array($q); 
    return $r; 
  } 
  function dbAll($sql){ 
    $q=mysql_query($sql); 
    while($r=mysql_fetch_array($q))$rs[]=$r; 
    return $rs; 
  } 
  mysql_connect('localhost','root','unu@12'); 
  mysql_select_db('GRBS_SITE_DB'); 
// } 
// { count existing records 
  $r=dbRow('select count(University_Name) as c 
            from grbs_country join grbs_rating 
            join grbs_university on grbs_country.Country_Code=grbs_university.Country_Code 
            and grbs_rating.University_id=grbs_university.University_id '); 
  $total_records=$r['c']; 
// } 
// { start displaying records 
  echo '{"iTotalRecords":'.$total_records.',
         "iTotalDisplayRecords":'.$total_records.',
         "aaData":['; 
  $rs=  dbAll("select University_Name,Country_Name,Total_Pubs,Per_Pubs_A1,Per_Pub_A1_A,
               Total_Cite,Per_Cite_A1,Per_Cite_A1_A,H_Index 
               from grbs_country join grbs_rating join grbs_university 
               on grbs_country.Country_Code=grbs_university.Country_Code 
               and grbs_rating.University_id=grbs_university.University_id 
               $start,
               $amt"); 
  $f=0; 
 foreach($rs as $r){ 
    if($f++) echo ',';  
    echo '["',$r['University_Name'],'",
            "',$r['Country_Name'],'",
            "',$r['Total_Pubs'],'",
            "',$r['Per_Pubs_A1'],'",
            "',$r['Per_Pub_A1_A'],'",
            "',$r['Total_Cite'],'",
            "',$r['Per_Cite_A1'],'",
            "',$r['Per_Cite_A1'],'",
            "',$r['H_Index'],'"]'; 
  } 
echo ']}'; 

// } 
```

萤火虫的结果是这样的：

```
 {"iTotalRecords":189540,
         "iTotalDisplayRecords":189540,
         "aaData":[]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:59:16.120

首先，使用`json_encode()`而不是构建 JSON 字符串。

其次，在第二个查询中，您的和变量似乎没有`WHERE`or`LIMIT`子句（我不知道您要对它们做什么）。`$start``$amt`

第三，不推荐使用 MySQL 扩展。您不应该使用它来编写新代码。相反，使用 PDO（强烈推荐）或 MySQLi。

见[https://stackoverflow.com/a/12860046/283366](https://stackoverflow.com/a/12860046/283366)

# javascript - 如何在我的数据库中记录赞成票和页面浏览量？

> ID：14544800
> 
> 赞同：-1
> 
> 时间：2013-01-27T05:48:12.593
> 
> 标签：javascript, jquery, mysql

我正在设计一个论坛，我希望能够让用户对某些帖子进行投票，我想记录每个帖子的浏览量，以便我可以将它们展示给公众。我主要使用 mysql、php、javascript 和 jQuery。通常当用户点击我想记录在数据库中的东西时，我使用 jQuery 来检查数据，然后 php 将数据输入到 mysql 数据库中；但是，这种方法需要重新加载页面，这绝对不是 FB 或 Stackoverflow 网站上发生的事情。我知道您可以使用 jQuery 或 javascript 向数据库写入数据，但是在我读到的任何地方，出于安全目的，他们都建议不要这样做。那么我该怎么做呢？此外，虽然已经在这里，是否有人可以就应采取的某些预防措施提出建议，以防止滥用投票系统。我计划将其限制为注册用户，并有一个表格来保存每个用户的投票，这样他们就不能多次投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:02:34.533

阅读 AJAX。唯一的安全预防措施基本上只是验证您的输入，就像您应该为您的表单或来自请求的任何其他输入所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:24:40.200

无论您在哪里在线阅读到通过 ajax、jquery、JavaScript 将数据发布到服务器是不好的，我都会忽略。从现在开始，任何提供任何类型价值的网站都将使用加载了 JavaScript 的客户端编写。

即使将整个页面以“传统方式”发布到服务器并从表单值中收集数据，您仍然冒着随机用户多次投票或用垃圾邮件评论您的论坛的风险。

关键是确保每个人都有一个帐户，这样您就可以对访问您论坛的每个人进行身份验证。没有理由认为网站用户应该能够在您的论坛上匿名发帖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:58:31.133

经过更多研究后，我发现了这个小宝石……感谢所有回复的人。

[如何使用 jQuery 运行 MySQL 查询？](https://stackoverflow.com/questions/8598659/how-can-i-use-jquery-to-run-mysql-queries?rq=1)

# android - 自定义 AlertDialog 列表布局

> ID：14544801
> 
> 赞同：3
> 
> 时间：2013-01-27T05:48:16.890
> 
> 标签：android, android-layout, android-alertdialog

过去几天我一直在使用自定义 AlertDialog 选择，并偶然发现了**android.R.layout** .xxx 布局。

[这个](https://stackoverflow.com/questions/6304608/what-is-android-r-id-text1)问题就是一个很好的例子。android文档对此非常[吝啬](http://developer.android.com/reference/android/R.layout.html)......

我还没有找到只是如何查找此类布局的组件。我试图在 Eclipse 中打开这些布局，但它说不能，而且我无法找到列出这些布局的站点。

那么我如何找出**android.R.id**在这样的布局中是什么以及什么布局适合什么用途呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:18:15.337

您可以在此处查看布局文件列表：

[https://github.com/android/platform_frameworks_base/tree/master/core/res/res/layout](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/layout)

打开您感兴趣的文件以检查每个文件中的 ID

# c++ - 线程化opencl编译

> ID：14544802
> 
> 赞同：8
> 
> 时间：2013-01-27T05:48:19.813
> 
> 标签：c++, multithreading, opencl, stdthread

[更新：] 我现在正在生成多个进程并且它工作得相当好，尽管基本的线程问题仍然存在。[/]

我正在尝试编写一个编译一堆 opencl 内核的 c++ (g++ 4.6.1) 程序。大部分时间都花在 clBuildProgram 中。（这是基因编程，实际上运行代码和评估适应性要快得多。）我正在尝试线程化这些内核的编译，但到目前为止没有任何运气。此时，线程之间没有共享数据（除了具有相同的平台和设备引用），但它一次只能运行一个线程。我可以将此代码作为多个进程运行（只是在 linux 的不同终端窗口中启动它们），然后它将用完多个内核，但不在一个进程中。我可以使用具有相同基本线程代码（std::thread）的多个内核，只需要基本数学，所以我认为它' 与 opencl 编译或我忘记的一些静态数据有关。：） 有任何想法吗？我已经尽力使这个线程安全，所以我很难过。

我正在使用 AMD 的 SDK（opencl 1.1，大约 2010 年 6 月 13 日）和 5830 或 5850 来运行它。SDK 和 g++ 不是最新的。上次我为了获得更新的 g++ 安装了更新的 linux 发行版时，我的代码以一半的速度运行（至少 opencl 编译是），所以我回去了。（刚刚检查了该安装上的代码，它以一半的速度运行，仍然没有线程差异。）另外，当我说它一次只运行一个线程时，它会启动所有线程，然后在两个线程之间交替，直到它们完成，然后做接下来的两个，等等。看起来所有线程都在运行，直到代码开始构建程序。我没有在 clBuildProgram 中使用回调函数。我意识到这里有很多可能出错的地方，没有代码很难说。:)

我很确定这个问题发生在 clBuildProgram 内部或调用中。我正在打印这里花费的时间，被推迟的线程将在第一次编译时返回很长的编译时间。这些 clBuildProgram 调用之间唯一共享的数据是设备 ID，因为每个线程的 cl_device_id 具有相同的值。

这就是我启动线程的方式：

```
 for (a = 0; a < num_threads; a++) {
        threads[a] = std::thread(std::ref(programs[a]));        
        threads[a].detach();
        sleep(1);    // giving the opencl init f()s time to complete
    } 
```

这是它陷入困境的地方（这些都是被传递的局部变量，尽管设备 ID 将是相同的）：

```
 clBuildProgram(program, 1, & device, options, NULL, NULL); 
```

每个线程是否具有唯一的上下文或命令队列似乎没有区别。我真的怀疑这是我提到它的原因。:)

更新：使用 fork() 生成子进程将适用于此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:34:23.527

您可能想在 AMD 的支持论坛上发布一些关于此的内容。考虑到规范要求的许多关于线程一致性的失败 OpenGL 实现，OpenCL 驱动程序在这个意义上仍然不是最优的也就不足为奇了。他们可以在内部使用进程 ID 来分隔数据，谁知道呢。

如果您有一个工作的多处理生成，那么我建议您保留它，并使用 IPC 传达结果。您可以使用 boost::ipc ，它具有使用序列化的有趣方式（例如，使用 boost::spirit 来反映数据结构）。或者您可以使用 posix 管道或共享内存，或者只是将编译结果转储到文件并从父进程轮询目录，使用 boost::filesystem 和目录迭代器...

分叉的进程可能会继承一些句柄；所以我相信还有一些方法可以使用未命名的管道，这可以帮助您避免创建将实例化客户端管道的管道服务器的需要，这可能导致广泛的协议编码。

# java - 将证书链写入 PEM 文件

> ID：14544806
> 
> 赞同：1
> 
> 时间：2013-01-27T05:48:41.583
> 
> 标签：java, ssl, ssl-certificate, x509certificate, jsse

我有一个证书链，其中可能包含单个证书或证书以及中间 CA 的证书。现在我想把它写成一个 PEM 格式的文件。是否可以在没有任何第三方库的情况下使用现有的 java 库来实现？下面是我的证书链代码，

```
 final Collection<? extends Certificate> c =
         (Collection<? extends Certificate>) certFactory.generateCertificates(
             new ByteArrayInputStream(certificateString.getBytes()));
     final Certificate[] certs = (Certificate[]) c.toArray(new Certificate[] {}); 
```

现在我想将此证书写入 PEM 文件。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:20:35.443

尝试这个：

```
 BASE64Encoder encoder = new BASE64Encoder();
    out.println(X509Factory.BEGIN_CERT);
    encoder.encodeBuffer(cert.getEncoded(), out);
    out.println(X509Factory.END_CERT); 
```

或试试这个

```
import javax.xml.bind.DatatypeConverter;
x509cert.encode();
try {
    System.out.println("---BEGIN CERTIFICATE---");
    System.out.println(DatatypeConverter.printBase64Binary(x509cert.getEncoded()));
    System.out.println("---END CERTIFICATE---");
} catch (CertificateEncodingException e) {
    e.printStackTrace();
} 
```

# android - Android 无法使用 LibGDX 打开文件

> ID：14544809
> 
> 赞同：5
> 
> 时间：2013-01-27T05:48:56.217
> 
> 标签：android, file-io, libgdx

我目前正在编写一个 LibGDX 游戏，我需要为 spritesheet 打开一个 XML 文件。不幸的是，当我尝试打开文件时，我得到一个`IOException`. 文件存在于正确的位置，项目已清理并保持最新等。

这是踢球者：LibGDX 将打开并显示同一目录中的图像文件，实际上会在它自己的`FileHandle`对象中获取 XML 文件（我已经让它的大小和它匹配）。然而，当我将文件发送到 SAX 解析器时，我得到一个异常，导致我回到文件，说它无法打开它。

这是`ClipSprite`类中的问题代码行：

```
private void parseConfigFile(FileHandle file) throws ParserConfigurationException, SAXException 
{
    //Use a SAX parser to get the data out of the XML file.
    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser parser = factory.newSAXParser();
    XMLConfigHandler handler = new XMLConfigHandler();

    //Parse through the document
    try
    {
        parser.parse(file.path(),handler); //IOException here
    } 
```

这是我在`create`主 LibGDX 类的方法中选择游戏中文件的代码

```
 //This loads a png file
    texture = new Texture(Gdx.files.internal("data/graphics/CDE1/CDE1.png"));
    texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);      
    TextureRegion region = new TextureRegion(texture, 0, 0, 512, 275);

     //Here I load the xml file and it tells me how many bytes it is
    Gdx.app.error("File","xml bytes:"+Gdx.files.internal("data/graphics/CDE1/CDE1.xml").length());

     //Here I load the same file and it crashes
     //Note that it looks in the subdirectory and finds /CDE1.xml properly
    animation = new ClipSprite("data/graphics/CDE1"); 
```

来自 logcat 的错误：

```
java.io.IOException: Couldn't open data/graphics/CDE1/CDE1.xml 
```

为什么它可以识别文件，但我仍然收到关于无法打开它的 IOExceptions？感谢您的帮助，如有必要，我会提供更多信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T22:23:55.283

只是为了将上面的所有评论合并成一个答案，以防其他人遇到这种情况或类似情况：

尝试`Gdx.files.local()`加载您的文件，而不是`Gdx.files.internal()`，因为“内部”文件是从（压缩的）APK 中读出的，并且可能不像普通文件那样“可见”。（这在很大程度上取决于您传递路径名的代码想要使用它做什么。）

对于 libGDX`FileHandle file`对象，使用`file.file()`传递文件句柄，而不是`file.path()`传递可能被误解的字符串。

对于 libGDX`FileHandle file`使用直接`file.read()`将一个`InputStream`传递给消费者（而不是传递一个字符串或文件句柄并期望他们打开它）。

libGDX“内部”文件映射到 Android [AssetManager 文件](http://developer.android.com/reference/android/content/res/AssetManager.html)，因此在[某些情况下](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder?lq=1)它们可能[有点不稳定](https://stackoverflow.com/questions/1273300/ioexception-while-reading-from-inputstream)。具体来说，它们可以被压缩并存储在传统文件读取功能中，或者不可见。`.jar``.apk`

# web2py - AttributeError：“行”对象没有属性“标题”Web2py

> ID：14544812
> 
> 赞同：0
> 
> 时间：2013-01-27T05:50:22.467
> 
> 标签：web2py

度过了漫长的一天，希望能得到一些帮助:)

我正在 web2py 中开发一个搜索表单，我创建这样的表单

```
<table>    
<form method="post" action="{{=URL('views', 'search')}}">
    <tr><td><label>Enter Keywords</label></td><td><input style="background-color: lightgreen; color:#333; font-weight:bold; width:260px;" type="text" name="tags"></td>
        </tr>
        <tr>
        <td>
        <label>Select Region</label>
            </td>
            <td>
                <select name="region" style="width:260px">
    <option value="" style="background-color: darkgreen; color:#FEFEFE; font-weight:bold; width:260px;">Choose a Region...

    {{for region in region_query:}}
    <option value="{{=region.id}}" style="background-color: lightgreen; color:#333; font-weight:bold; width:260px;">{{=region.title}}</option>
    {{pass}}
    </select>
    </td>
    </tr>
    <tr>
            <td>
        <label>Select Category</label>
            </td>
    <td>

    <select name="category" style="width:260px;">

    <option value="" style="background-color: darkgreen; color:#FEFEFE; font-weight:bold; width:260px;">Choose a Category
    {{for cat in cat_query:}}
    <optgroup label="{{=cat.title}}" style="background-color: darkgreen; color:#FEFEFE; font-weight:bold; width:260px;">
    {{sub_query = db(db.sub_category.main_category == cat.id).select(orderby=db.sub_category.title)}}
    </optgroup>
    {{for sub in sub_query:}}
    <option value="{{=sub.id}}" style="background-color: lightgreen; color:#333; width:260px;">{{=sub.title}}</option>

    {{pass}}
    {{pass}}
    </select>

    </td>
    </tr>
    <tr>
<td colspan="2" align="right">
    <input type="submit" style="background-color: lightgreen; color:#333; font-weight:bold; width:260px; height:30px" value="Search Business Directory">
    </td>
    </tr>
</form>
</table> 
```

我的控制器由这个组成

```
def search():
    mystr = str(request.post_vars["tags"])
    if mystr == "" or mystr == None:
        return redirect(URL('default', 'error_search'))
    region = str(request.post_vars["region"])
    if region == "" or region == None:
        return redirect(URL('default', 'error_search'))
    category = str(request.post_vars["category"])
    if category == "" or mystr == None:
        return redirect(URL('default', 'error_search'))
    featured = db((db.featured_listing.tag_words.like('%'+mystr+'%')) | (db.listing.region.contains(region)) | (db.listing.sub_category.contains(category))).select(orderby=db.featured_listing.title)
    query = (db.listing.tag_words.like('%'+mystr+'%')) | (db.listing.region.contains(region)) | (db.listing.sub_category.contains(category))
    orderby = db.listing.title
    pcache = (cache.ram, 15)
    paginate = Pagination(db, query, orderby, display_count=10, cache=pcache, r=request, res=response)
    search_query = paginate.get_set(set_links=True)
    return dict(search_query=search_query, featured=featured) 
```

我对结果搜索的看法包含这个

```
{{for query2 in featured:}}                                                                        

    <div class="listingItem">
    <div class="listingItem-content">
        <h2>{{=query2.title}}</h2>
    .... 
```

等等等等

搜索时收到此错误

```
Traceback (most recent call last):
  File "/var/www/web2py/gluon/restricted.py", line 212, in restricted
    exec ccode in environment
  File "/var/www/web2py/applications/GreenPages_web/views/views/search.html", line 47, in <module>
AttributeError: 'Row' object has no attribute 'title' 
```

知道如何解决这个问题并达到我想要的结果。

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:15:25.670

```
featured = db((db.featured_listing.tag_words.like('%'+mystr+'%')) |
    (db.listing.region.contains(region)) |
    (db.listing.sub_category.contains(category))).select(orderby=db.featured_listing.title) 
```

上面的查询引用了两个不同的表（`db.featured_listing`和`db.listing`）。因此，结果将包括两个表中的字段，因此您需要同时使用表名和字段名来引用每条记录中的字段。如果“标题”字段在`db.featured_listing`表中，则必须通过`query2.featured_listing.title`而不是`query2.title`.

请注意，尽管您的查询引用了两个表，但它不涉及联接，因此此查询可能不会返回您期望的结果。

请参阅[http://web2py.com/books/default/chapter/29/06#Inner-joins](http://web2py.com/books/default/chapter/29/06#Inner-joins)。

# javascript - 检测 Internet Explorer 并显示消息

> ID：14544816
> 
> 赞同：12
> 
> 时间：2013-01-27T05:50:38.633
> 
> 标签：javascript, jquery, html

我一直在环顾四周，找不到我要找的东西

我想向 IE 用户显示一个警告，即我的网站不支持 IE，也不会尝试支持，并且您应该获得更好的浏览器。

你如何检测 IE 确实是我所需要的，但如果有人告诉我如何在页面上触发灯箱，那就太好了，但如果你不包括它，我可以自己做

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-27T05:52:28.427

条件 HTML 注释适用于检测 IE9 或更低版本。来自[HTML5 Boilerplate](http://html5boilerplate.com/)，我强烈建议您使用：

```
<!--[if lt IE 7]>
    <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:55:36.090

尝试这个

```
 if ($.browser.msie) {
    // you are using IE
 } 
```

更多细节：[jquery.browser](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T05:57:41.710

`navigator`对象具有与客户端机器的浏览器和平台详细信息相关的所有详细信息。

**navigator.userAgent**提供浏览器相关的详细信息。

JS 片段：

```
<script>
  var x = navigator.userAgent;
  alert(' browser details ' + x);
</script> 
```

下面的链接详细讨论了它：

[http://www.javascriptkit.com/javatutors/navigator.shtml](http://www.javascriptkit.com/javatutors/navigator.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T08:20:36.230

将代码粘贴到标签后：

```
 <!--[if lt IE 8]>
  <p class="browserupgrade">Vous utilisez un <strong>ancien navigateur</strong>. Mettez votre <a href="http://browsehappy.com" target="_blank">navigateur à jour</a> dès aujourd'hui !</p>
  <![endif]--> 
```

PS：根据需要编辑内容。我把它翻译成法语供我自己使用。

# javascript - 使用 javascript 框架运行 django 时的 URL 处理

> ID：14544817
> 
> 赞同：0
> 
> 时间：2013-01-27T05:51:05.727
> 
> 标签：javascript, python, django, google-closure

我有一个用 javascript 闭包编写的应用程序，它在 apache 服务器上运行良好，还有一个在 django 上运行的不同应用程序。

我想在我的 django 项目中包含 javascript 应用程序，但是我在我的关闭应用程序中将点击侦听器连接到诸如“/places”之类的 url，这导致我的 django 应用程序出现混乱，因为它试图使用 urls.py 来解析所有 url .

我如何一起运行这些类型的应用程序，特别是我如何告诉 django 不理会一些 url 并允许关闭应用程序处理它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:30:38.157

如果您使用 apache 运行 django，则可以在 apache 级别排除它们，就像媒体文件一样。

```
<Location "/places">
    SetHandler None
</Location> 
```

# mysql - 如果数据库暂时不可用如何重试 MySQL 连接

> ID：14544818
> 
> 赞同：0
> 
> 时间：2013-01-27T05:51:14.367
> 
> 标签：mysql, mysql-python

```
import MySQLdb 
```

`MySQLdb.connect`有时无法连接失败，有没有办法设置超时并重复尝试而不编写应用程序特定代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:55:02.433

将您的连接代码抽象为您可以调用的方法并让它返回连接。在该方法中，最多尝试连接到数据库 3 或 5 次。在每次尝试之间执行 time.sleep(.01)。那是百分之一秒。如果你能少走一点，那就更好了。

# php - Tank_auth set_value() 在自定义登录页面上未定义

> ID：14544819
> 
> 赞同：0
> 
> 时间：2013-01-27T05:51:45.303
> 
> 标签：php, codeigniter, tankauth

在默认的 tank_auth 登录视图中，没有任何错误。但是，我想对其进行样式设置以匹配站点的其余部分，因此我将代码粘贴到自定义登录页面中（因此替换了表单元素，但保留了其他所有内容）。但是，我最终在表单元素应位于的位置出现此错误：

> 致命错误：在第 247 行的 /home/tester/public_html/testsite/application/views/login.php 中调用未定义函数 set_value()

我应该注意，该视图不在 /auth/ 目录中，就像默认的 tank_auth 登录视图一样。是否必须移动它，还是有办法按原样使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:05:03.520

在 config/autoload.php 加载表单助手这将起作用 set_value 是表单助手的一部分

# c# - 如何从循环中删除额外的 AND

> ID：14544823
> 
> 赞同：1
> 
> 时间：2013-01-27T05:52:48.523
> 
> 标签：c#, .net, string

```
foreach (string word in allTheseWords)
{
allTheseStringsWhereClause = allTheseStringsWhereClause + 
                             " report=" + 
                             word + 
                             " AND ";
} 
```

`AND`问题是在循环之后，SQL 子句在它的末尾有一个额外的。

我该如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T05:59:05.320

您也可以使用`LINQ`

```
string _final = string.Join(" AND ", (allTheseWords.Select(x => "report=" + x))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T06:18:55.967

通过将用户输入插入到 sql where 子句中，您正在为**SQL Injection Attack**引入一个向量。不要使用这种方法。基本上你想使用 SQL 参数。

```
where report in @allTheseWords 
```

请参阅[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

**编辑**

[请参阅参数化 SQL IN 子句](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)中投票最多的答案，了解如何在查询中真正进行参数化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T07:46:21.587

这种问题很常见，这里就是证明。

1.  [删除字符串的最后一个字符](https://stackoverflow.com/questions/7901360/delete-last-char-of-string)
2.  [如何在C#中删除字符串中的最后一个字符？](https://stackoverflow.com/questions/3745859/how-to-delete-last-character-in-a-string-in-c)
3.  [查找数组的最后一个索引](https://stackoverflow.com/questions/1056749/finding-the-last-index-of-an-array)

但这是我的简单解决方案

```
 string[] allTheseWords = { "try", "test", "let" };
        string whereLine = string.Empty;
        foreach (var item in allTheseWords)
                whereLine += "report = " + item.ToString() + " and ";
        string final = whereLine.Remove(whereLine.Length - 5);
        Console.WriteLine(final);
        Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T06:43:58.857

一个简单的方法是添加一个虚假的 always-true 子句（并移动 AND）：

```
string allTheseStringsWhereClause = "WHERE 1=1";
foreach (string word in allTheseWords)
{
allTheseStringsWhereClause = allTheseStringsWhereClause + 
                             " AND report=" + 
                             word;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T09:40:29.400

您不需要 LINQ，只需使用`Join`：

```
string whereClause = " report=" + String.Join(" AND report=", allTheseWords); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-27T05:56:17.020

在不硬编码子字符串方法的情况下执行此操作的最佳方法是尝试聚合 LINQ 查询

```
var result = allTheseWords.Aggregate(allTheseStringsWhereClause, (current, word) => current + " report=" + word + " AND "); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-01-27T05:56:50.533

简单的。您只需要执行 allTheseStringsWhereClause.substr(0,-4) 即可！

# javascript - 要求指令 - 文件 url

> ID：14544825
> 
> 赞同：4
> 
> 时间：2013-01-27T05:53:34.167
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, sprockets

在 Rails 3 (Sprocket) 中，有没有办法使用 url 将 javascript 文件加载到远程站点？例如，我想在你的 .js 文件中使用**require**指令类似的东西，

```
//= require http://example.com/remote_file.js 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T20:32:39.347

No.

You can only require files that are inside your application or in gems that your application depend on. See [http://guides.rubyonrails.org/asset_pipeline.html#asset-organization](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization) and [http://guides.rubyonrails.org/asset_pipeline.html#adding-assets-to-your-gems](http://guides.rubyonrails.org/asset_pipeline.html#adding-assets-to-your-gems).

# google-fusion-tables - 不支持融合表 OR

> ID：14544826
> 
> 赞同：0
> 
> 时间：2013-01-27T05:53:43.567
> 
> 标签：google-fusion-tables

> **可能重复：**
> [融合表过滤条件或](https://stackoverflow.com/questions/10438720/fusion-tables-filter-conditions-or)

在融合表中，我尝试进行此查询

```
 select col0 from xyz col1 = value1 or col2 = value2 
```

但在融合表中[OR 不受支持](https://developers.google.com/fusiontables/docs/v1/sql-reference)。

我怎样才能进行这个查询？如果我进行两次查询，我会得到重复的信息。

# log4net - 当 log4net 在我的和第 3 方 dll 中配置时，log4net 创建 2 个日志文件而不是预期的一个

> ID：14544827
> 
> 赞同：0
> 
> 时间：2013-01-27T05:53:52.477
> 
> 标签：log4net, log4net-configuration, white-framework

我的解决方案中有 2 个项目，都是类库类型。

1.  动作：包含动作的项目，使用 White 编写（基于 MS UI 自动化的 UI 自动化框架）
2.  测试：带有测试装置和测试方法的项目，使用 MbUnit

我决定为这两个项目添加使用 log4net 的日志记录。我正在使用的 log4net 配置如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<log4net>
  <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString"
          value="c:/AutomationLog/Automation_%date{dd.MM.yy_HH.mm.ss}.log" />
    <appendToFile value="false" />
    <rollingStyle value="Once" />
    <maxSizeRollBackups value="-1" />
    <maximumFileSize value="10MB" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%-5level %date{HH:mm:ss,fff} %logger - %message%newline" />
    </layout>
  </appender>
  <root>
    <level value="ALL" />
    <appender-ref ref="RollingLogFileAppender" />
  </root>
  <logger name="root">
    <level value="OFF" />
  </logger>
</log4net> 
```

我希望每次运行都创建一个文件（每个夹具套件运行一个）。但是会创建两个文件：

> 自动化_27.01.13_07.33.53.log
> 
> 自动化_27.01.13_07.33.53.log.1

经过调查，我发现日志每次都在同一个地方被吐到第二个文件中——当调用包含 White 类型的操作时。看起来这是因为 White 在内部也使用 log4net。

所以，我想，情况是这样的：

1.  我有一个初始化 log4net 的类
2.  我启动了灯具套件
3.  在测试项目中有一个运行 1st 的类，其中包含`Log.Info("...")`
4.  日志文件已创建
5.  文本被附加到..
6.  引用怀特类型的第一个动作是从测试项目中运行的
7.  在这个阶段会创建一个新文件
8.  我猜这是因为 White Dlls 内部还有另一个初始化 log4net 的调用，它在里面是硬编码的

知道如何在不修改 White（第 3 方 dll）的代码的情况下防止日志拆分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:37:02.070

我通过重命名配置文件解决了这个问题，白色查找 log4net.config 名称。但我仍然没有得到答案 - 是否有可能强制 log4net 只初始化一次，并跳过未来的尝试。

# ruby-on-rails - Aptana studio 3 或任何带有 ruby on rails 辅助代码定义的 IDE 或基于文本的编辑器

> ID：14544828
> 
> 赞同：0
> 
> 时间：2013-01-27T05:53:54.270
> 
> 标签：ruby-on-rails, windows, ide, definition

在使用 Java 进行编码时，我习惯于使用 Eclipse 或 Netbeans 之类的 IDE，并且有一个小的代码辅助似乎给了我对每种可用方法的简短描述。现在，代码辅助在 Aptana Studio 3 for Ruby on rails 中确实有效，但它并没有为您提供这些方法的作用的简短描述，它们只是为您提供了一个方法列表。是否有任何基于 IDE 或文本的编辑器可以在编码时为我提供代码定义，或者有没有办法配置 Aptana Studio 来做到这一点？

由于我是 ruby​​ 的新手，我目前还不想投资和购买 IDE 或基于文本的编辑器（尽管请随时告诉我付费的是否是唯一可以满足我要求的人）。我正在运行 Windows 7。但如果我唯一的选择是使用 Linux 运行 VM 以获得我所要求的内容，那么请建议 IDE 或基于文本的编辑器的名称。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:37:13.673

[RadRails](http://www.aptana.com/products/radrails)必须根据它的[描述](http://en.wikipedia.org/wiki/RadRails)有一个代码定义，但我个人更喜欢不昂贵的最有特色的[RubyMine](http://www.jetbrains.com/ruby/)

它使用[RDoc](https://github.com/rdoc/rdoc)，因此您必须确保在 gems 安装期间生成了帮助（请参阅文档）...

（浏览本地 gem 文档的另一种方法是`RubyGems Documentation`- 只需`$ gem server`从控制台运行，但这不是您问题的答案）

# android - 与 4.0.3 分开的联系人代码

> ID：14544829
> 
> 赞同：2
> 
> 时间：2013-01-27T05:53:57.573
> 
> 标签：android

我已经从 4.0.3 中分离了联系人，并且编译成功。当我尝试安装它时，它会引发以下错误：

```
01-27 05:31:21.865: E/DatabaseUtils(601): Writing exception to parcel
01-27 05:31:21.865: E/DatabaseUtils(601): java.lang.SecurityException: The caller must have permissions com.android.voicemail.permission.ADD_VOICEMAIL AND com.android.voicemail.permission.READ_WRITE_ALL_VOICEMAIL
01-27 05:31:21.865: E/DatabaseUtils(601):   at com.android.providers.contacts.VoicemailPermissions.checkCallerHasFullAccess(VoicemailPermissions.java:64)
01-27 05:31:21.865: E/DatabaseUtils(601):   at com.android.providers.contacts.CallLogProvider.checkVoicemailPermissionAndAddRestriction(CallLogProvider.java:289)
01-27 05:31:21.865: E/DatabaseUtils(601):   at com.android.providers.contacts.CallLogProvider.query(CallLogProvider.java:132)
01-27 05:31:21.865: E/DatabaseUtils(601):   at android.content.ContentProvider$Transport.query(ContentProvider.java:178)
01-27 05:31:21.865: E/DatabaseUtils(601):   at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:112)
01-27 05:31:21.865: E/DatabaseUtils(601):   at android.os.Binder.execTransact(Binder.java:338)
01-27 05:31:21.865: E/DatabaseUtils(601):   at dalvik.system.NativeStart.run(Native Method)
01-27 05:31:21.996: E/DatabaseUtils(601): Writing exception to parcel
01-27 05:31:21.996: E/DatabaseUtils(601): java.lang.SecurityException: The caller must have permissions com.android.voicemail.permission.ADD_VOICEMAIL AND com.android.voicemail.permission.READ_WRITE_ALL_VOICEMAIL 
```

虽然以下几行在联系人清单文件中：

```
<uses-permission android:name="com.android.voicemail.permission.ADD_VOICEMAIL" />
<uses-permission android:name="com.android.voicemail.permission.READ_WRITE_ALL_VOICEMAIL" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:10:58.860

VoicemailContract 的 Google 文档中没有包含一些信息，可以解释您的问题：

[http://developer.android.com/about/versions/android-4.0.html](http://developer.android.com/about/versions/android-4.0.html)（向下滚动到“语音邮件提供商”）

> **语音信箱提供商**
> 
> 新的语音邮件提供程序允许应用程序向设备添加语音邮件，以便在单个可视化演示中呈现所有用户的语音邮件。例如，用户可能有多个语音邮件源，例如一个来自电话服务提供商，另一个来自 VoIP 或其他替代语音服务。这些应用程序可以使用语音邮件提供程序 API 将其语音邮件添加到设备。然后，内置的电话应用程序将所有语音邮件以统一的方式呈现给用户。虽然系统的电话应用程序是唯一可以读取所有语音邮件的应用程序，但每个提供语音邮件的应用程序都可以读取它已添加到系统中的那些（但不能读取来自其他服务的语音邮件）。
> 
> 由于 API 当前不允许第三方应用程序读取系统中的所有语音邮件，因此唯一应该使用语音邮件 API 的第三方应用程序是那些将语音邮件传递给用户的应用程序。
> 
> VoicemailContract 类定义了 Voicemail Provder 的内容提供者。VoicemailContract.Voicemails 和 VoicemailContract.Status 子类提供了表格，应用程序可以在其中插入语音邮件数据以存储在设备上。有关语音邮件提供商应用程序的示例，请参阅语音邮件提供商演示。

所以……基本上，即使他们有这个新的 API（很酷而且很有用），你也只能访问你的应用程序插入数据库的语音邮件。您无权访问您的设备拥有的任何其他语音邮件。

我仍然不确定是否应该为设备上的所有应用程序或仅系统应用程序触发广播意图，但由于我没有收到此广播，我只能假设它仅适用于系统应用程序.

从本质上讲，我的猜测是您的联系人应用程序的编译版本会尝试访问其代码中的所有语音邮件，从而导致您的异常。它通常可以毫无问题地执行此操作，因为它是具有系统签名的系统应用程序，但是当您自己安装它时不再适用。

# c - 为什么 for 循环不能由 int 变量以外的其他变量运行？

> ID：14544831
> 
> 赞同：-5
> 
> 时间：2013-01-27T05:54:15.783
> 
> 标签：c, for-loop

为什么 for 循环不能由 int 变量以外的其他变量运行？我试图通过采用浮点变量来运行 for 循环，但它不是由除 int 类型之外的任何其他变量运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:02:18.823

您可以使用带有整数变量、浮点变量甚至完全没有变量的 for 循环。

```
int i;
for(i = 0; i < 10; i++) continue;

float f;
for(f = 0.0; f < 5; f += 0.5) continue;

for(;;) break; 
```

但是请参阅[每个计算机科学家应该了解的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的知识，了解为什么在使用示例 2 之前应该三思而后行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T06:00:39.423

您应该可以使用 STEP 命令来完成

```
float X = 0;
//
//increase in steps of 1 x 1 thousandth
for (X = 1; X <= 100; X += 0.001) {
  // DISPLAY YOUR RESULT  maybe using: Math.Round(X, 3)
} 
```

# python - Google App Engine NDB：如何存储文档结构？

> ID：14544834
> 
> 赞同：3
> 
> 时间：2013-01-27T05:54:41.050
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

来自 App Engine NDB[文档](https://developers.google.com/appengine/docs/python/ndb/overview)：

> NDB API 在无模式对象数据存储中提供持久存储。它支持自动缓存、复杂查询和原子事务。NDB 非常适合存储结构化数据记录。

我想使用 NDB 创建如下结构，其中每个实例如下所示：

```
{
 city: 'SFO'
 date: '2013-01-27'
 data: {
           'keyword1': count1,
           'keyword2': count2,
           'keyword3': count3,
           'keyword4': count4,
           'keyword5': count5,
           ....
       }
} 
```

如何使用 NDB 在 Google App Engine(GAE) 中设计这种无模式实体？
我是 GAE 新手，不知道如何实现

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T02:40:17.970

如果您不需要查询数据中的属性，您可以使用@voscausa 提到的属性之一：

JsonProperty

```
class MyModel(ndb.Model):
  city = ndb.StringProperty()
  date = ndb.DateProperty()
  data = ndb.JsonProperty()

my_model = MyModel(city="somewhere", 
                   date=datetime.date.today(),
                   data={'keyword1': 3,
                         'keyword2': 5,
                         'keyword3': 1,}) 
```

结构化属性：

```
class Data(ndb.Model):
  keyword = ndb.StringProperty()
  count = ndb.IntegerProperty()

class MyModel(ndb.Model):
  city = ndb.StringProperty()
  date = ndb.DateProperty()
  data = ndb.StructuredProperty(Data, repeated=True)

my_model = MyModel(city="somewhere", 
                   date=datetime.date.today(),
                   data=[Data(keyword="keyword1", count=3),
                         Data(keyword="keyword2", count=5),
                         Data(keyword="keyword3", count=1)])
my_model.put() 
```

这里的问题是过滤结构化属性。Keyword 的属性被视为并行数组。执行查询，例如：

```
q = MyModel.query(MyModel.data.keyword=='keyword1',
                  MyModel.data.count > 4) 
```

会错误地包括`my_model`.

[https://developers.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties](https://developers.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties)

使用 expando 模型可以工作，并允许您查询关键字：

```
class MyModel(ndb.Expando):
  city = ndb.StringProperty()
  date = ndb.DateProperty()

m = MyModel(city="Somewhere", date=datetime.date.today())
m.keyword1 = 3
m.keyword2 = 5
m.keyword3 = 1
m.put()

q = MyModel.query(ndb.GenericProperty('keyword1') > 2) 
```

[https://developers.google.com/appengine/docs/python/ndb/entities#expando](https://developers.google.com/appengine/docs/python/ndb/entities#expando)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:17:51.153

您可以使用`ndb.JsonProperty`来表示模型中的列表、字典或字符串。您可以查看[文档](https://developers.google.com/appengine/docs/python/ndb/properties)以获取更多信息。

# python - 在python的scipy中用fsolve找到一个根以外的值

> ID：14544838
> 
> 赞同：0
> 
> 时间：2013-01-27T05:55:07.370
> 
> 标签：python, scipy, root, solver

我知道如何解决`python`使用`scipy.optimize.fsolve`.

我定义了一个函数 `f = lambda : -1*numpy.exp(-x**2)`，我想解决`x`将函数设置为某个非零的问题。例如，我想解决`x`使用`f(x) = 5`.

有没有办法做到这一点，`fsolve`或者我需要在 scipy 中使用其他工具？换句话说，我正在寻找类似于 Maple 的东西`fsolve`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:59:13.520

如果您更改 的定义，这很容易`f(x)`。例如，如果您愿意`f(x) = 5`，请定义您的功能：`g(x) = f(x) - 5 = 0`

# android - 有时音乐不会停止android

> ID：14544848
> 
> 赞同：1
> 
> 时间：2013-01-27T05:56:11.140
> 
> 标签：android

有一个函数在播放音乐的 onCreate 方法上调用...

```
 public void playBeep() {
    try {

        if (m.isPlaying()) {
            m.stop();
            m.release();
            m = new MediaPlayer();
        }
        AssetFileDescriptor descriptor = getAssets().openFd("beep.mp3");
        m.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
        descriptor.close();

        m.prepare();
        m.setVolume(1f, 1f);
        m.setLooping(true);
        m.start();
    } catch (Exception e) {
        e.printStackTrace();
    }
   } 
```

在 onPause 方法上，我编写了停止音乐的代码，所以当用户离开活动时，音乐应该自动停止......

```
 @Override
protected void onPause() {
    isBeeping = false;
    if (m != null) {

        if (m.isPlaying()) {
            m.stop();
            m.release();
        }
    }
    super.onPause();
} 
```

但有时它工作正常，但有时音乐不会停止！！！

任何人都可以建议我在离开活动时如何停止音乐:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:21:55.323

试试这个：

```
@Override
protected void onPause() {
    super.onPause(); 
    isBeeping = false;
    if (m != null)
       m.release();       
} 
```

谢谢。

# html - 使用 :target 从窗口右侧转换 CSS3

> ID：14544852
> 
> 赞同：2
> 
> 时间：2013-01-27T05:56:33.810
> 
> 标签：html, css, jsfiddle

我面临两个问题：

这是要参考的 jsFiddle：http: [//jsfiddle.net/2D7Ss/1/](http://jsfiddle.net/2D7Ss/1/)

1.  在当前的 jsFiddle 中，当问候框向左滑动时，它会完全立即出现，而不是增量出现，然后再向左滑动。右边的幻灯片工作正常。

2.  如果我将问候 div 的宽度设置为 100%，它不会向左滑动。这个问题似乎与上述问题有关，因为它在滑动之前完全出现在面板中。但在这种情况下，宽度为 100%，因此不会发生滑动。

最终，当其他页面或内容面板从右侧滑动时，我正在尝试构建一个页面。

这是HTML：

```
<a href="#hello">Hello</a> | <a href="#goodbye">Goodbye</a>
<div id="content">
    <div id="hello">Hello</div>
</div>
<div id="content">
    <div id="goodbye">Goodbye</div>
</div> 
```

这是CSS：

```
body {
  margin-left: 5px;   
}

#content {
  background: #ccc;
  width: 100%;
  height: 102px;
  position: relative;
  overflow: hidden;
}

#content div {
  position: absolute;
  background: lightblue;
  width: 100px;
  height: 100px;
  border: 1px solid gray;
  left: 100%;
  -moz-transition: left 1s ease;
  -webkit-transition: left 1s ease;
}

#content > div:target {
  left: 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T07:39:48.727

这似乎是一个浏览器问题，并且在一些延迟和处理宽度的情况下似乎可以正常工作，作为一种解决方法，您可以尝试通过转换更改左侧、边框宽度和宽度，下面是仅在 chrome 中测试的工作案例（[请参阅更新的 jsfiddle样品](http://jsfiddle.net/2D7Ss/39/)）：

```
#content div {
    position: absolute;
    overflow: hidden;
    background: lightblue;
    width: 0px;
    height: 100px;
    border: 1px solid gray;
    border-width: 0px;
    left: 100%;
    -moz-transition: left 1s ease, width 0s ease-out 1s, border-width 0s ease-out 1s;
    -webkit-transition: left 1s ease, width 0s ease-out 1s, border-width 0s ease-out 1s;
}
#content > div:target {
    left: 0;
    width: 100%;
    border: 1px solid gray;
    -moz-transition: left 1s ease 0.1s, width 0s ease-out 0.1s, border-width 0s ease-out 0.1s;
    -webkit-transition: left 1s ease 0.1s, width 0s ease-out 0.1s, border-width 0s ease-out 0.1s;
} 
```

# spring - Spring MVC 静态资源映射

> ID：14544854
> 
> 赞同：4
> 
> 时间：2013-01-27T05:56:50.873
> 
> 标签：spring, spring-mvc

我有以下 servlet 映射存在 -

```
 <!--  Mapping Static Resources -->
     <mvc:resources mapping="/css/**" location="/resources/css/" />
     <mvc:resources mapping="/js/**" location="/resources/js/" />
     <mvc:resources mapping="/images/**" location="/resources/images/" /> 
```

我在 html 中的图像链接是“/images/folder/imageName.jpg” - 这些图像给我一个 404 而如果将链接更改为“/images/imageName.jpg”并将图像直接移动到图像文件夹下给我图像。

我是否需要以任何方式修改我的 servlet 映射以考虑层次结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:45:47.017

您需要修改图像的链接。当你写

```
<mvc:resources mapping="/images/**" location="/resources/images/" /> 
```

然后，您的 HTTP 请求将`/resources/images`被转换为`webapp/images`服务器上的文件夹。所以在html中你应该有这样的东西：

```
<img src="<spring:url value='/resources/images/logo.png'/>" 
```

# php - $_POST 可以区分具有相同名称的两个元素吗？

> ID：14544864
> 
> 赞同：4
> 
> 时间：2013-01-27T05:58:23.087
> 
> 标签：php, mysql, post

PHP 新手，阅读 Robin Nixon 的 PHP、MySQL、Javascript 书籍。我在使用 PHP 脚本插入和删除数据的示例中遇到问题，特别是作者如何使用 $_POST。

该示例是一个非常简单的添加记录/删除具有多个输入的书籍记录。这是代码：

```
if (isset($_POST['delete']) && isset($_POST['isbn']))
{
    $isbn  = get_post('isbn');
    $query = "DELETE FROM classics WHERE isbn='$isbn'";

    if (!mysql_query($query, $db_server))   
    echo "DELETE failed: $query<br />" .
    mysql_error() . "<br /><br />";
}

if (isset($_POST['author']) &&
    isset($_POST['title']) &&
    isset($_POST['category']) &&
    isset($_POST['year']) &&
    isset($_POST['isbn']))
{
    $author   = get_post('author');
    $title    = get_post('title');
    $category = get_post('category');
    $year     = get_post('year');
    $isbn     = get_post('isbn');

    $query = "INSERT INTO classics VALUES" .
        "('$author', '$title', '$category', '$year', '$isbn')";

    if (!mysql_query($query, $db_server))
        echo "INSERT failed: $query<br />" .
        mysql_error() . "<br /><br />";
}

echo <<<_END
<form action="sqltest.php" method="post"><pre>
    Author <input type="text" name="author" />
    Title <input type="text" name="title" />
    Category <input type="text" name="category" />
    Year <input type="text" name="year" />
    ISBN <input type="text" name="isbn" />
    <input type="submit" value="ADD RECORD" />
    </pre></form>
_END;

$query = "SELECT * FROM classics";
$result = mysql_query($query);

if (!$result) die ("Database access failed: " . mysql_error());
$rows = mysql_num_rows($result);

for ($j = 0 ; $j < $rows ; ++$j)
{
    $row = mysql_fetch_row($result);
    echo <<<_END
<pre>
  Author $row[0]
   Title $row[1]
Category $row[2]
    Year $row[3]
    ISBN $row[4]
</pre>
<form action="sqltest.php" method="post">
<input type="hidden" name="delete" value="yes" />
<input type="hidden" name="isbn" value="$row[4]" />
<input type="submit" value="DELETE RECORD" /></form>
_END;
}

mysql_close($db_server);

function get_post($var)
{
    return mysql_real_escape_string($_POST[$var]);
}
?> 
```

当您使用 if (isset($_POST['delete']) && isset($_POST['isbn'])) 引用 $_POST 中的元素时，其中 delete 和 isbn 被多次用作名称，$_POST 如何知道要删除哪个元素？我假设由于一次只能删除一条记录，因此数组中的元素将自动指向已设置的记录。但是， isset($_POST['isbn']) 的第二个条件如何知道要检查哪个“isbn”元素？&& 是否使 $_POST['isbn'] “继承”正确的行？

谢谢您的帮助！并对任何可能的词汇滥用表示歉意。还是习惯了一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T06:04:32.670

您的问题实际上是经过深思熟虑的。书中给出的例子对我来说似乎很草率。我假设在后面的章节中他将深入研究`$_POST`值中数组的使用。但无论如何，这里是整个脚本功能的关键：

```
for ($j = 0 ; $j < $rows ; ++$j)
{
    $row = mysql_fetch_row($result);
    echo <<<_END
<pre>
  Author $row[0]
   Title $row[1]
Category $row[2]
    Year $row[3]
    ISBN $row[4]
</pre>
<form action="sqltest.php" method="post">
<input type="hidden" name="delete" value="yes" />
<input type="hidden" name="isbn" value="$row[4]" />
<input type="submit" value="DELETE RECORD" /></form>
_END;
} 
```

看到了`<form action="sqltest.php" method="post">`吗？看到关闭了`</form>`吗？请注意，每次`for ($j = 0 ; $j < $rows ; ++$j)`循环发生时都会渲染它们？每一行都有一个单独的表单元素。那是凌乱的代码，但它有效。当单击`submit`每个单独的列表时，包装表单会响应并解析嵌套在其中的变量。

就像我说的，草率的代码。但有效。这是因为如果您列出了 30 个 ISBN，该程序将输出 30 个独立包装的`<form>`物品。啊！严重的是，如果这本书以后没有以解决这种编码混乱的面孔的方式解决数组问题，那就找一本新书吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:06:46.597

由于有多个表单，因此只提交一个表单的输入元素。

所以基本上，只接收一个包含相应值的`sqltest.php`数组和 ['isbn'] 一次。`$_POST``['delete']`

您可以使用`print_r($_POST)`in来检查这一点`sqltest.php`。

# .net - 为什么需要 Econo JIT？

> ID：14544867
> 
> 赞同：5
> 
> 时间：2013-01-27T05:58:48.190
> 
> 标签：.net, clr, jit

我研究了 Econo JIT 没有针对编译 IL 的环境进行优化，这与 Normal JIT 不同。此外，它不会为下一次执行创建机器代码缓存，这意味着每次 PE 运行时，JIT 都会再次将 IL 编译为机器指令。

我很困惑为什么 One 会选择在 Econo Jit 中编译。此外，是否可以在 Visual Studio 中选择 JIT？或者如果我想选择不同的 JIT 模式，我应该通过提示编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:30:46.760

Econo JIT 的理念是减少编译时间，从而降低交互式应用程序的启动延迟。一旦您注意到应用程序需要几秒钟才能启动，这实际上就是您想要的。.NET 的启动时间已经非常慢了（Java 的 :) 也是如此）。

在服务器端应用程序中，您需要相反的情况：您需要完美的代码并愿意等待，因为您可能在将应用程序连接到负载均衡器之前无论如何都要预热它。您向主页和其他重要页面发出自动 GET 以加载和编译它们。

自 .NET 2.0 以来，AFAIK Econo JIT 已过时。不再有选择（除了禁用所有优化，这是核弹选项）。

# ruby-on-rails - 如何在多对多中获取中间表的列？

> ID：14544868
> 
> 赞同：0
> 
> 时间：2013-01-27T05:58:58.970
> 
> 标签：ruby-on-rails

如何从收据实例中获取数量？

我有 3 个表：receipt，receipt_foods，
我想从收据实例中获取receipt_foods 列的食物，例如数量。

```
class Receipt
  # columns: id, place
  has_many :receipt_foods
  has_many :foods, through: :receipt_food
end

class ReceiptFood
  # columns: id, quantity, receipt_id, food_id
  belongs_to :receipt
  belongs_to :food
end

class Food
  # columns: id, name
  has_many :receipt_foods
  has_many :receipts, through: :receipt_food
end 
```

我想这样回应json：

```
{ "receipts": [
  "receipt": {
     "id": 1,
     "place": "supermarket",
     "foods": [ {
        "food": {
           "id": 1,
           "quantity": 12, // how to echo this ?
           "name": "apple" } 
....
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:09:49.387

你可以得到如下的数量

```
receipt_foods = @receipt.receipt_foods 
receipt_foods.each do |receipt_food|
  puts receipt_food.quantity 
end 
```

# ruby-on-rails - rails中的密码格式

> ID：14544875
> 
> 赞同：0
> 
> 时间：2013-01-27T05:59:32.853
> 
> 标签：ruby-on-rails, testing, rspec

好的，我正在编写一些测试，但我意识到我无法在模型测试中检查 rails 中的密码格式。格式是指验证密码至少为 6 个字符长等的正则表达式。我不能这样做的原因是因为我只存储密码的安全哈希。在大多数 Rails 应用程序中这是正常的吗？并且是我在集成测试中检查密码的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:29:11.850

在模型中，您可以拥有

```
validates_format_of :password, :with => /^(?=.\d)(?=.([a-z]|[A-Z]))([\x20-\x7E]){6,40}$/ 
```

应该管用。

# xml - 如何让 Flash 等到加载 XML 以使函数可用于从另一个类调用？

> ID：14544877
> 
> 赞同：0
> 
> 时间：2013-01-27T05:59:53.580
> 
> 标签：xml, flash, oop, actionscript-2

我正在用 Actionscript 2 编写一个应用程序，它需要访问 XML 文件、获取其内容，然后使用该信息来填充一堆文本字段。这在基于帧的动作脚本中很简单，因为我所要做的就是停止做事，将下一步设置为从 XML.onLoad 函数运行，然后我就可以开始了。但是我正在用类文件重写这个东西，并且在调用依赖于它已经存在的函数之前，我很难让我的 XML 加载。

详细说明，

假设我有一堂课，Main。该类看起来像：

```
import XMLItems;

class Main {
    private var _xmlItems:XMLItems;

    public function Main() {
        _xmlItems = new XMLItems();
        _itemData = _xmlItems.getItemData();
} 
```

到目前为止看起来还不错，对吧？它所做的只是创建一个新的 XMLItems 实例，然后调用该实例的 getItemData() 方法。

所以现在这里是 XMLItems：

```
import mx.xpath.XPathAPI;
import XMLLoader;

class XMLItems {

    private var _loader:XMLLoader;
    private var _itemData:XML;
    private var _eventPath:String = "/*/dbresult/playlist/";

    public function XMLItems() {
        trace('XMLItems object instantiated.');
    }

    private function parseItemData(itemData:XML):Array {
        var nodes:Array = XPathAPI.selectNodeList(itemData, _eventPath + "item");

        return nodes;
    }

    public function getItemData():Array {
        _loader = new XMLLoader();
        _itemData = _loader.getXML();
        var r:Array = parseItemData(_itemData);
        return r;
    }

} 
```

所以现在我们有了一个 XMLLoader 对象，以便我们可以调用该 getXML 函数（别担心，最后一个）：

```
import mx.xpath.XPathAPI;

class XMLLoader {

    private var _rawXML:XML;
    private var _xmlLocation:String = '';
    private var _recommendRequestURL:String;
    private var _xmlIsLoaded:Boolean = false;

    private var _eventPath:String = "/*/dbresult/playlist/";

    public function XMLLoader() {
        trace('Instantiating XML loader...');
        _recommendRequestURL = _root.recmReqUrl ? _root.recmReqUrl : escape('http://www.myURL.com/');

        _rawXML = new XML();
        _rawXML.ignoreWhite = true;

        var host = this;
        _rawXML.onLoad = function(success:Boolean) {
            if (success) {
                _xmlIsLoaded = true;
                trace('XML data was successfully loaded.');
                var nodes:Array = XPathAPI.selectNodeList(host._rawXML, host._eventPath + "item");
                trace("Number of XML nodes: " + nodes.length);
                trace("Sample node: " + nodes[nodes.length - 1]);
            } else {
                trace('There was an error loading the XML. Please check the XML file.');
            }
        }

        loadXML();
    }

    private function loadXML():Void {
        var xmlLocation:String;
        if ( !_root.recmReqUrl ) {
            trace("There is no network address for the XML file. Defaulting to local settings.")
        xmlLocation = './localBannerData.xml';
        } else {
            xmlLocation = _recommendRequestURL.concat( '&spec=', 'specInfo', 'getCatInfo()', 'getXCatInfo()', '&t=', new Date().getTime() );
        }

        if ( _rawXML.load( xmlLocation ) ) {
            trace('Loading XML file: ' + xmlLocation);
        } else {
                trace('I\'m having difficulty finding the XML. You might want to check your data source.')
        }

    }

    public function getXML():XML {
        return _rawXML;
    }

} 
```

问题是当调用 getXML 函数时，XML 还没有加载。所以该方法将一个空的 XML 对象返回给 XMLItems 类，即使我这样做了：

```
_loader = new XMLLoader();
_itemData = _loader.getXML(); 
```

尽管我的意思是构造函数必须在评估下一条语句之前完成运行。显然它没有。

我尝试创建一个由 onLoad 函数设置的布尔值，并在 getXML 方法中（在方法返回之前）放置一个 while (true) 循环，以检查该布尔值并在它返回 true 时中断，但它从未返回 true，所以它只是永远循环。

我真的不明白这里发生了什么。为什么我不能让班级同步请求 XML 并在 XML 进来之前冷静下来？

谢谢，SS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:06:06.270

Hrm，有人可能会纠正我，但我认为flash 不能同步加载外部资源（xml 或其他），我相信这可能是设计使然。至少根据我的经验，每当加载外部资源时，它总是异步完成的。

特别是对于 AS2 XML，它还说 load() 方法调用是异步的：

> 加载过程是异步的；它不会在 load() 方法执行后立即完成。 [http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html)

您可能已经知道这意味着什么：您必须添加一个回调方法或让您的 xml 加载类抛出您要监听的某种“完成”事件（对于这个问题，表面上或多或少是相同的事情我认为）。

* * *

## 如评论中所述添加到答案

正如我在评论中提到的，您可以允许您的类通过使用 EventDispatcher 类来引发自定义事件。我猜这个类实际上是用于从 flash mx 组件调度事件，这就是它在 mx 包中的原因。

因为您需要为事件对象创建自己的事件类。从文档/谷歌搜索中，（不记得确切的位置），在基本级别，事件具有两个属性：目标（对引发事件的对象的引用）和名称。如果您想要自己的自定义事件，您可以随时添加更多或扩展它。

```
class Event {
    public var type:String;
    public var target:Object;

    public function Event(inputType:String, inputTarget:Object){
        type = inputType;
        target = inputTarget;
    }
} 
```

*在这里进行了仔细检查，看来您实际上不需要创建自己的 Event 类，它可以只是具有这两个必需属性的通用对象-但我还是喜欢制作一个以根据需要重用并保持我的代码更干净.*

然后在您的（XML）类中：

```
// add this
import mx.events.EventDispatcher;

class MyXMLClass {

    public MyXMLClass(){        
        // add this to your constructor
        mx.events.EventDispatcher.initialize(this);
    }

    // add these, leave these empty, they are init'ed during runtime
    private function dispatchEvent() {};
    public function addEventListener() {};
    public function removeEventListener() {};

} // end of class 
```

现在这为您的课程添加了 3 个方法。在您的类方法中，您可以像这样发送事件：

```
// first create the event object
var event:Event = new Event("complete", this); // 'this' refers to this current object
dispatchEvent(event); 
```

在您的班级之外，您可以像这样注册一个事件侦听器：

```
var xmlObject:MyXMLClass = new MyXMLClass();

function eventListenerMethod(inputEvent:Event):Void {
    trace("I got the event: "+ inputEvent.type +" from "+ inputEvent.target);
}
xmlObject.addEventListener("complete", eventListenerMethod); 
```

现在，由于事件名称“完成”是一个常量字符串并且不应更改，我建议在事件类中将其设为静态常量，如下所示：

```
class Event {
    // added this
    public static var COMPLETE:String = "complete";

    public var type:String;
    public var target:Object;

    public function Event(inputType:String, inputTarget:Object){
        type = inputType;
        target = inputTarget;
    }
} 
```

因此，您可以通过 Event.COMPLETE 来引用它，例如：

```
new Event(Event.COMPLETE, this);
addEventListener(Event.COMPLETE, eventListenerMethod); 
```

只是为了减少拼写错误的机会，并且可以通过查看事件类来引用您拥有的事件类型。

现在还有一件事要担心：我发现事件处理程序方法在引发事件的对象范围内运行。您可以通过添加 trace(this); 来验证这一点。到 eventListenerMethod() 方法，它应该追踪你的类，而不是该方法的编写位置。为了解决这个问题，您可以使用 Delegate 类使该方法在编写它的范围内运行。

所以之前：

```
// assuming this is written in the timeline/frame
function eventListenerMethod(inputEvent:Event):Void {
    trace("I got the event: "+ inputEvent.type +" from "+ inputEvent.target);
    trace(this); // will trace out "xmlObject" instead of _level0 or _root as you might expect
}
xmlObject.addEventListener(Event.COMPLETE, eventListenerMethod); 
```

你可以走了：

```
import mx.utils.Delegate;

function eventListenerMethod(inputEvent:Event):Void {
    trace("I got the event: "+ inputEvent.type +" from "+ inputEvent.target);
    trace(this); // should trace out _level0 / _root now or whatever 'this' was refering to in the Delegate.create() method
}
xmlObject.addEventListener(Event.COMPLETE, Delegate.create(this, eventListenerMethod)); 
```

在我和你一样为加载外部数据和遇到随机范围问题而困惑之前，我不知道如何正确修复它们（必须想出“创造性”方法）。=b

当我不得不在 AS2 中工作几年时，发现这两件事让我保持清醒一点，这两件事在 AS3 中做得更好（例如，不需要范围问题/委托，还有很多对象自然已经扩展了 EventDispatcher 类，使其更易于使用或更“原生”，正如我喜欢说的那样，它有一个可以使用/扩展的实际 Event 类，因此您不需要自己制作）。

请去尝试我写的后半部分，看看你是否真的需要使用 Delegate 类，因为你可能并不总是需要它，并且当你需要删除事件侦听器时，有时会导致垃圾收集本身的问题（在在这种情况下，我需要保留对传递给 addEventListener() 的 Delegate 对象的显式引用，以便稍后将其传递给 removeEventListener()。根据我的经验，我几乎总是需要它，这就是我添加它的原因对我的回答。我发现它对其他事情也很有用。您可以单独使用它来运行其他对象范围内的方法（在这种情况下，它用于在_root/“写在哪里”）。

我强烈建议尽可能迁移到 AS3。我还建议在帮助中查找 EventDispatcher 和 Delegate 类的引用，以便更好地了解内部发生的情况 - 我已经很长时间没有编写任何真正的 AS2 并且我的记忆可能有点模糊。我刚才写的大部分都是凭记忆写的。:)

# java - 使之前使用的文本在 Java 中再次匹配

> ID：14544882
> 
> 赞同：2
> 
> 时间：2013-01-27T06:00:15.957
> 
> 标签：java, regex

```
program A {
   int x = 10;
   tuple date {
            int day;
            int month;
            int year;
   }
}

function B {
    int y = 20;
    ...
}

process C {
    more code;
} 
```

我想提取`program`,`function`和`process`. 在输出方面，我想看到三个匹配项：

```
 int x = 10;
       tuple date {
                int day;
                int month;
                int year;
       } //first match

       int y = 20;
       ... //second match

       more code; //third match 
```

我已经使用 Javascript 实现了这一点。我使用的正则表达式是`/(program|function|process).*?{(.*?)}\n+(program|function|process)/m`，它的工作原理如[Rubular 所示](http://rubular.com/r/D6FMq4TX8M)。

但是，当我在 Java 中使用相同的表达式时，它就不再起作用了。它只返回第一个匹配项。我有一个模糊的记忆，上一次匹配中消耗的文本将不会再次匹配。在我的情况下，关键字`program`和`function`已在第一次匹配中被消耗，导致没有进一步的匹配。Java中有没有办法匹配消费的文本？

**编辑**：Java 代码按要求发布在下面。

```
public class Test {
    public static void main(String[] args) throws IOException {
        String input = FileUtils.readFileToString(new File("input.txt"));
        Pattern p = Pattern.compile("(program|function|process)[^\\{]*?\\{(.*?)\\}\\s*(program|function|process)", Pattern.DOTALL);
        Matcher m = p.matcher(input);
        while(m.find()) {
            System.out.println(m.group(2));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:16:22.287

[您可以通过使用环视](http://www.regular-expressions.info/lookaround.html)来解决您的问题..所以您的正则表达式将是

```
(?<=program|function|process)[^{]*\\{(.*?)\\}\\s*(?=program|function|process|$) 
```

**第 1 组**将有您的数据..

# ios - 在我的 iOS 应用程序中集成 Google Analytics SDK (GoogleAnalyticsiOS_2.0beta4) 时出错

> ID：14544891
> 
> 赞同：1
> 
> 时间：2013-01-27T06:01:48.667
> 
> 标签：ios, google-analytics

我收到以下错误

> 重复符号 _OBJC_METACLASS_$_GAIDispatcher 在：
> /Shared/ThirdParty/Analytics/libGoogleAnalytics.a(GAIDispatcher.o)
> /Shared/ThirdParty/Analytics/libGoogleAnalytics_debug.a(GAIDispatcher.o) ld：212 个重复符号，用于架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我在我的应用程序中使用 coredata，并且我已经链接了文档中提到的所有框架。另外，我正在使用 Xcode 4.5.2 编译我的应用程序。

一个可能的重复 Q 可能是（[在 iPhone 上安装应用程序时，iOS 的 Google Analytics SDK 不是为 armv7s 架构构建的](https://stackoverflow.com/questions/12815700/the-google-analytics-sdk-for-ios-isnt-built-for-the-armv7s-architecture-while-i)）。但是，我没有使用 Analytic v1.5.1。我正在使用版本 2（测试版）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T06:06:48.947

您看到的问题是因为您的构建产品中包含了***两个***Google Analytics 库。非调试版和调试版。

您需要安顿下来并简单地使用其中之一。从您的项目中取出未使用的一个，或者在文件检查器中取消选中目标的“成员资格”复选框以查找该不需要的库。

我正在谈论的复选框如下所示。而不是“UIKit.framework”（我很快选择了这个例子），寻找两个谷歌分析库之一并将其关闭。

![确保为您的 .m 文件选择了 Target Membership](../Images/8a712ba07f70b744223e5d8c7c39304e.png)

# python - 为什么以下 python 代码不打印到文件

> ID：14544893
> 
> 赞同：7
> 
> 时间：2013-01-27T06:01:49.770
> 
> 标签：python

```
from sys import stdout
stdout = open('file', 'w')
print 'test'
stdout.close() 
```

确实创建了文件，但它不包含任何内容。

我不得不使用

```
import sys
sys.stdout = open('file', 'w')
print 'test'
sys.stdout.close() 
```

但是不会`from ... import...`自动使名称可用吗？为什么我仍然必须使用`sys.stdout`而不是`stdout`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T06:12:46.810

问题是这样的：`print`相当于`sys.stdout.write()`.

因此，当您这样做时`from sys import stdout`，该变量`stdout`将不会被`print`.

但是当你这样做时

```
import sys
print 'test' 
```

它实际上写入`sys.stdout`指向`file`您打开的哪个。

**分析**

```
from sys import stdout
stdout = open('file', 'w')
print 'test' # calls sys.stdout.write('test'), which print to the terminal
stdout.close() 
```

* * *

```
import sys
sys.stdout = open('file', 'w')
print 'test' # calls sys.stdout.write('test'), which print to the file
sys.stdout.close() 
```

**结论**

这有效...

```
from sys import stdout
stdout = open('file', 'w')
stdout.write('test')
stdout.close() 
```

# c++ - 如何将自己的类或超类设置为C++中的实例

> ID：14544894
> 
> 赞同：0
> 
> 时间：2013-01-27T06:01:50.647
> 
> 标签：c++, inheritance, this

标题可能听起来有点令人困惑，我的意思是我有一个扩展类 B 的类 A，因此具有 B 的所有属性，我想将类 B 设置为一个实例（B 中的所有变量都已更改），所以通过这种方式 B 从其他地方更新 A 将产生相应的效果，同时您可以操作 A 并进行他们的单独交互。代码如下。

```
class A : public B
{
public:
    A()  {}
    ~A() {}

    void setA(B b)
    {
               // NOT SURE WHAT TO DO HERE
    }

}; 
```

在 java 中有`this`and`.super()`在 C++ 中似乎不一样，`this`是 a`const`并且无法更改，我不确定它是如何`.super()`工作的。

顺便说一句，有可能看到类 A 本身到 A 的另一个实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:10:48.317

# 前言：

如果你在 Java 中编写，

```
A a1 = new A();
A a2 = a1; 
```

然后`a1`和`a2`指的是同一个对象。
但在 C++ 中，情况略有不同。您可能不需要`new A()`总是创建一个对象。

假设您创建一个*自动*对象，如下所示：

```
A a1; // a1 is created on stack
A a2 = a1; // a2 is created on stack and copied from a1 
```

请注意`a1`和`a2`是具有相同值的不同对象。他们不是指同一个实体。如果你想`a2`成为参考，`a1`那么写如下：

```
A &a2 = a1; 
```

如果您想模拟原始 Java 行为，那么指针很有用：

```
A *a1 = new A();
A *a2 = a1; 
```

# 回答：

至此，您将了解上面的 C++ 对象和引用之间的区别。

话虽如此，C++ 有更好的方法来设置对象而不是使用`setA()`. 你可以简单地重载`operator =`

```
class A : public B
{
  int member; // some member variable

public:
  A& operator = (const A &a) // don't need to use `B&`
  {
    *(static_cast<B*>(this)) = a; // this calls `B::operator =`
    this->member = a.member;  // copy other members likewise
    return *this;
  }
}; 
```

用法：

```
A a1, a2;
a1 = a2; // calls B::operator = and A::operator = 
```

另请注意，您可能并不总是需要`operator =`在类内部进行定义。当您真正需要它时，有一些*特殊*情况。默认情况下，编译器会生成一个复制构造函数和赋值运算符并为您执行复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:30:21.073

我认为您只想调用`setA(B b)`一次，以便在`b`更改时`A`看到最新值？如果是这样，您正在尝试替换子对象，这是不可能的。

对于您尝试实现的用例，如果`B*`是成员变量，那将是恰当的。有什么理由`B`必须是`A`? 的基类。最好能给出一个实名的具体例子或者更详细的解释。

# jquery - 外部内容时出错，而不是内联时出错

> ID：14544895
> 
> 赞同：0
> 
> 时间：2013-01-27T06:01:56.843
> 
> 标签：jquery, initialization

我显然忽略了一些东西

我已经把它烧死并放弃了

我正在使用[动态驱动器stickybar](http://www.dynamicdrive.com/dynamicindex17/stickybar.htm)脚本实现一个粘性底部栏，除了设置一个cookie来记住状态之外，它似乎可以做我想做的所有事情。如果我保持栏内容内联，它会像宣传的那样工作，但是当我将内容外部化时，我会得到
`Uncaught TypeError: Cannot read property 'position' of undefined` 看起来内容在脚本访问时尚未加载。

在 Firefox 我得到

```
TypeError: this.setting is undefined
/SO/expstickybar/expstickybar2.js
Line 47 
```

有人可以帮我确定问题出在哪里吗？这将有助于未来的调试会话能够找出问题所在。

1.  [具有有效内联内容的页面](http://plungjan.name/SO/expstickybar/cookie.htm)
2.  [包含不起作用的外部内容的页面](http://plungjan.name/SO/expstickybar/cookie1.htm)
3.  [将外部内容直接附加到页面的页面也不起作用](http://plungjan.name/SO/expstickybar/cookie2.htm)

**更新**从头开始并在此处修复[DEMO](http://plungjan.name/SO/expstickybar/ddorg.htm)

我假设我需要了解一些通用的 jQuery 问题以供将来参考，所以我希望有人能提供帮助，而不是因为过于本地化而关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:18:23.913

您的带有外部内容的内容示例没有名为的 div`stickybar`

从不起作用的页面：

```
<div id="ajaxstickydiv_stickybar"> 
```

并且从执行以下操作的页面：

```
<div id="stickybar" class="expstickybar" style="visibility: visible; bottom: 0px;"> 
```

当您的 jQuery 查找 div named`stickybar`时，在第一个示例中它没有找到它，这就是错误的原因。

```
var mystickybar=new expstickybar({
    id: "stickybar", //  <---- Problem here
      ...
}); 
```

});

**编辑：**

我不确定，但是在您的外部内容中，包装器 div 有一个重复的 id，`stickybar`它可能会导致问题。尝试重命名它。

# ruby-on-rails - Rails 3，IE 资产

> ID：14544901
> 
> 赞同：0
> 
> 时间：2013-01-27T06:03:10.520
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sass, sprockets

是否有专门为在 Rails 3 中启用资产管道的 IE 浏览器组织样式表/javascript 资产文件的好习惯？例如，我不想在我的**.html.erb**文件中乱扔类似于下面用于浏览器检测的条件注释。

```
<!--[if !IE]> -->
According to the conditional comment this is not IE<br />
<!-- <![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:19:27.527

您可以将它们放入部分中`app/views/layouts/`。这也是 Michael Hartl 对 HTML5 Shim 所做的教程：[http ://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-partials](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-partials)

# ios - 如果以编程方式创建，则无法访问 UIImageView

> ID：14544907
> 
> 赞同：0
> 
> 时间：2013-01-27T06:05:19.410
> 
> 标签：ios, uiview, uiscrollview, uiimageview

如果我创建一个`UIImageView`via Storyboard 并将其作为 a 添加`@property`到 a`ViewController.h`中，我可以`UIImageView`从`ViewController.m`via`[self UIImageView]`或`self.UIImageView`.

但是，如果我如下所示以`UIImageView`编程方式创建`viewDidLoad`，我似乎失去了从外部访问它的能力`viewDidLoad`。

```
UIImageView *prevImgView = [[UIImageView alloc] init];
UIImageView *currImgView = [[UIImageView alloc] init];
UIImageView *nextImgView = [[UIImageView alloc] init];

NSArray *imageViews = [NSArray arrayWithObjects:prevImgView, currImgView, nextImgView, nil];

UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
[self.view addSubview: scrollView];

CGRect cRect = scrollView.bounds;
UIImageView *cView;

for (int i=0; i<imageViews.count; i++) {
    cView = [imageViews objectAtIndex:i];
    cView.frame = cRect;
    [scrollView addSubview:cView];
    cRect.origin.x += cRect.size.width;
} 
```

因此，稍后如果我想修改在`UIImageView`我创建的任何一个中显示的图像`viewDidLoad`，我似乎无法访问它。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:07:33.400

你需要在你的头文件中创建你的 UIImageView ，然后它将在视图的其余部分中可用。不过，您需要将其添加到 viewDidLoad 中的视图中。

```
 Header
         UIImageView *image;

         Main // ViewDidLoad
         image = [UIImageView alloc] .....
         [self.view addSubView image];

         Main Function .....
         [image setImage .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:18:40.467

AgnosticDev 在这里试图说的答案是将 ivar 添加到视图控制器的 .h 文件中......例如：

```
@implementation YHLViewController : ViewController
{
    UIImageView * currImageView;
} 
```

然后在您的 " `viewDidLoad`" 方法中，您可以通过以下方式分配和初始化它：

```
currImageView = [[UIImageView alloc] init]; 
```

并可以从视图控制器中的其他任何地方访问它。

# ios - iOS - 像 Path 这样的应用程序如何优化每个单元格（几乎）不同的表格单元格？

> ID：14544909
> 
> 赞同：2
> 
> 时间：2013-01-27T06:05:32.243
> 
> 标签：ios, uitableview, path

所以这是我目前遇到的问题。

我有一个应用程序，它显示带有 UITableView 的 Facebook/Path 类提要。假设我的数据源有大约 200 个项目，并且并非所有单元格都具有相同的内容和单元格高度。有些有图像，有些没有。通过使用以下格式的可重用标识符初始化我的单元格，我能够克服滚动性能问题：[NSString stringWithFormat:"entry_%d", some_id]。在我开始使用 UIImagePickerViewController 之前，事情进展顺利。正如您可以想象的那样，由于我的数据源/表很大，我收到了很多内存警告。

使用 Path 的应用程序并尝试将尽可能多的数据加载到单个视图中时；他们在滚动性能和内存管理方面做得非常好。每当我进入相机模式时，他们的应用程序也不会崩溃。

有什么想法或理论吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:34:51.037

我强烈建议您查看重新实现表格视图的 Facebook iOS 框架。框架的名称是 Three20，你可以在 github 上找到[它](https://github.com/facebook/three20)。

话虽如此，如果你有一个非常大的表，你需要小心只为那些在视图中的东西加载资源，并在它们离开视图时释放它们的资源。委托方法`tableView:didEndDisplayingCell:forRowAtIndexPath:`（适用于 iOS 6 及更高版本）是您的朋友。[这是与此主题相关的另一个问题](https://stackoverflow.com/questions/9831485/best-way-to-check-if-uitableviewcell-is-completely-visible)。

# node.js - fs.createReadStream() 等效于 Node 中的远程文件

> ID：14544911
> 
> 赞同：24
> 
> 时间：2013-01-27T06:05:50.687
> 
> 标签：node.js

对于远程文件，Node 中的 fs.createReadStream() 是否有等效的方法？使用如下抛出`Unhandled 'error' event`

```
var s = fs.createReadStream('some_mp3_url'); 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-27T09:34:09.890

节点不是 PHP :)

使用[请求](https://github.com/mikeal/request)模块：

```
request('http://fromrussiawithlove.com/baby.mp3').pipe(fs.createWriteStream('song.mp3')) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-12-24T21:14:24.257

~~使用request~~（[alternatives](https://github.com/request/request) ）之类的模块可能会更好，但您可以这样做：

**ES6 版本**

```
http.get('some_mp3_url', res => res.pipe(fs.createWriteStream('some.mp3'))); 
```

**ES5 版本**

```
http.get('some_mp3_url', function (res) {
  res.pipe(fs.createWriteStream('some.mp3'));
}); 
```

注意：除此之外`fs`，`http`（或`https`）模块也必须被导入/需要。

# xml - 具有复杂内容、限制和属性的 jaxb 元素

> ID：14544913
> 
> 赞同：0
> 
> 时间：2013-01-27T06:06:10.090
> 
> 标签：xml, jaxb

我需要为以下 XML 模型实现 JAXB

```
<OrderItemList>
    <ItemCount>2</ItemCount>
    <OrderItem Sequence="1">
      <ItemId>12345</ItemId>
      <Quantity>1</Quantity>
      <DiscountId>prm</DiscountId>
      <DiscountPercent>3.5</DiscountPercent>
    </OrderItem>
    <OrderItem Sequence="1">
      <ItemId>44523</ItemId>
      <Quantity>3</Quantity>
      <DiscountId>nil</DiscountId>
      <DiscountPercent>0</DiscountPercent>
    </OrderItem>
</OrderItemList> 
```

我收到以下错误：

```
16:15:28,564 WARN  [OrderItemValidate] [error] null : cvc-complex-type.3.2.2: Attribute 'Sequence' is not allowed to appear in element 'OrderItem'.
16:15:28,565 ERROR [OrderItemValidate] org.xml.sax.SAXParseException; lineNumber: 7; columnNumber: 24; cvc-complex-type.3.2.2: Attribute 'Sequence' is not allowed to appear in element 'OrderItem'.
org.xml.sax.SAXParseException; lineNumber: 7; columnNumber: 24; cvc-complex-type.3.2.2: Attribute 'Sequence' is not allowed to appear in element 'OrderItem'.

22:05:09,966 WARN  [OrderItemValidate] [error] null : cvc-complex-type.2.4.a: Invalid content was found starting with element 'TotalCount'. One of '{"www.myapp.com":OrderItem}' is expected.
22:05:09,967 ERROR [OrderItemValidate] org.xml.sax.SAXParseException; lineNumber: 7; columnNumber: 17; cvc-complex-type.2.4.a: Invalid content was found starting with element 'TotalCount'. One of '{"www.myapp.com":OrderItem}' is expected.
org.xml.sax.SAXParseException; lineNumber: 7; columnNumber: 17; cvc-complex-type.2.4.a: Invalid content was found starting with element 'TotalCount'. One of '{"www.myapp.com":OrderItem}' is expected. 
```

我尝试了以下方法，

```
* <complexType name="OrderItem">
 * <复杂内容>
 * <restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 * <全部>
 * <attribute name="Sequence" type="{www.myapp.com}Integer" use="required"/>
 * <element name="ItemId" type="{www.myapp.com}String" minOccurs="0"/>
 * <element name="Quantity" type="{www.myapp.com}Integer" minOccurs="0"/>
 * <element name="DiscountId" type="{www.myapp.com}Number" minOccurs="0"/>
 * <element name="DiscountPercent" type="{www.myapp.com}Number" minOccurs="0"/>
 * </全部>
 * </限制>
 * </复杂内容>
 * </complexType>
 *
```

*   ```
     <ItemId>12345</ItemId>
      <Quantity>1</Quantity>
      <DiscountId>prm</DiscountId>
      <DiscountPercent>3.5</DiscountPercent> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:10:38.043

> 我需要为以下 XML 模型实现 JAXB

* * *

**选项 #1 - 从 Java 类开始**

您可以从 Java 对象开始并执行以下操作：

**订单项列表**

```
import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="OrderItemList")
@XmlType(propOrder={"itemCount", "orderItems"})
@XmlAccessorType(XmlAccessType.FIELD)
public class OrderItemList {

    @XmlElement(name="OrderItem")
    private List<OrderItem> orderItems = new ArrayList<OrderItem>();

    @XmlElement(name="ItemCount")
    public int getItemCount() {
        return orderItems.size();
    }

} 
```

**订单项**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class OrderItem {

    @XmlAttribute(name="Sequence")
    private int sequence;

    @XmlElement(name="ItemId")
    private int itemId;

    @XmlElement(name="Quantity")
    private int quantity;

    @XmlElement(name="DiscountId")
    private String discountId;

    @XmlElement(name="DiscountPercent")
    private float discountPercent;

} 
```

* * *

**选项 #2 - 从 XML 模式开始**

您不需要从 XML 模式生成模型。但是，如果您希望 XML 模式看起来像下面这样：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="OrderItemList" type="orderItemList"/>

  <xs:complexType name="orderItemList">
    <xs:sequence>
      <xs:element name="ItemCount" type="xs:int"/>
      <xs:element name="OrderItem" type="orderItem" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="orderItem">
    <xs:sequence>
      <xs:element name="ItemId" type="xs:int"/>
      <xs:element name="Quantity" type="xs:int"/>
      <xs:element name="DiscountId" type="xs:string" minOccurs="0"/>
      <xs:element name="DiscountPercent" type="xs:float"/>
    </xs:sequence>
    <xs:attribute name="Sequence" type="xs:int" use="required"/>
  </xs:complexType>

</xs:schema> 
```

我使用以下代码从上述带注释的模型生成了这个 XML 模式：

```
import java.io.IOException;
import javax.xml.bind.*;
import javax.xml.transform.Result;
import javax.xml.transform.stream.StreamResult;

public class GenerateSchema {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(OrderItemList.class);
        jc.generateSchema(new SchemaOutputResolver() {

            @Override
            public Result createOutput(String namespaceUri, String suggestedFileName)
                    throws IOException {
                StreamResult result = new StreamResult(System.out);
                result.setSystemId(suggestedFileName);
                return result;
            }
        });
    }

} 
```

# ios - UICollectionViewCell 中的 setFrame 时，UIProgressView 无法正常工作

> ID：14544917
> 
> 赞同：0
> 
> 时间：2013-01-27T06:06:38.707
> 
> 标签：ios, uicollectionview, uiprogressview, uicollectionviewcell

我在 UICollectionViewCell 中创建了一个 UIProgressView，我尝试为 UIProgressView 设置框架以更改 UICollectionViewCell 中的位置，但是这样做时，某些单元格不显示 progressView。当我删除 setFrame 时，没关系，但 UICollectionViewCell 顶部的默认宽度

有什么问题？如何更改 UIProgressView 大小、原点？请帮忙！

```
//Cell:UICollectionViewCell 
//Cell.m
    - (id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
           //ProgressView
           self.progressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
           [self.progressView setFrame:progressViewFrame];//Some cells not display progressView
           [self.progressView addSubview:self.downloadBar];
    }
        return self;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:43:38.830

我已经修改了你的代码。现在，进度视图工作正常。所有单元格都显示进度视图。`self.downloadB`此外，如果您在下面的代码中更改框架，则可以修改单元格的宽度和位置

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self.contentView setBackgroundColor:[UIColor underPageBackgroundColor]];

        //cellImage
        self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(100, 0, 57, 57)];
        [self.imageView setBackgroundColor:[UIColor clearColor]];
        [self.contentView addSubview:self.imageView];

        //ProgressView
        self.downloadBar = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
        [self.downloadBar setFrame:CGRectMake(0, 10, 300, 10)];

        [self.contentView addSubview:self.downloadBar];
        [self.downloadBar setHidden:YES];

        self.receivedData = [[NSMutableData alloc] init];

    }
    return self;
} 
```

我已经从您提供的 github url 修改了 cell.m 的代码。

# c - 如何从C中的字符串中删除最后几个字符

> ID：14544920
> 
> 赞同：5
> 
> 时间：2013-01-27T06:06:57.553
> 
> 标签：c

我知道我可以使用字符串`substr()`中的前`n`几个字符。但是，我想删除最后几个字符。像我在 Python 中那样使用`-2`或作为 C 中的结束位置是否有效？`-3`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T06:11:43.603

您可以简单地在您希望字符串结束的位置放置一个空终止字符，如下所示：

```
int main()
{
    char s[] = "I am a string";
    int len = strlen(s);
    s[len-3] = '\0';
    printf("%s\n",s);
} 
```

这会给你：

> “我是一个str”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T06:13:07.873

C 不像 Python；字符串索引不是“智能”的。字面`str[-3]`意思是“开始前三个字节的字符”；访问此内存是*未定义的行为*。

如果您想将字符串的最后几个字符作为另一个字符串，只需获取指向您想要的第一个字符的指针即可：

```
char *endstr = str + (strlen(str) - 3); // get last 3 characters of the string 
```

如果要*删除*最后几个字符，只需将第 kth-from-the-end 字符设置为 null ( `\0`)：

```
str[strlen(str)-3] = 0; // delete last three characters 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T06:59:13.813

这是一个`substr()`函数的可能实现，包括测试代码。请注意，测试代码不会突破边界——缓冲区长度比请求的字符串短或缓冲区长度为零。

```
#include <string.h>

extern void substr(char *buffer, size_t buflen, char const *source, int len);

/*
** Given substr(buffer, sizeof(buffer), "string", len), then the output
** in buffer for different values of len is:
** For positive values of len:
** 0    ""
** 1    "s"
** 2    "st"
** ...
** 6    "string"
** 7    "string"
** ...
** For negative values of len:
** -1   "g"
** -2   "ng"
** ...
** -6   "string"
** -7   "string"
** ...
** Subject to buffer being long enough.
** If buffer is too short, the empty string is set (unless buflen is 0,
** in which case, everything is left untouched).
*/
void substr(char *buffer, size_t buflen, char const *source, int len)
{
    size_t srclen = strlen(source);
    size_t nbytes = 0;
    size_t offset = 0;
    size_t sublen;

    if (buflen == 0)    /* Can't write anything anywhere */
        return;
    if (len > 0)
    {
        sublen = len;
        nbytes = (sublen > srclen) ? srclen : sublen;
        offset = 0;
    }
    else if (len < 0)
    {
        sublen = -len;
        nbytes = (sublen > srclen) ? srclen : sublen;
        offset = srclen - nbytes;
    }
    if (nbytes >= buflen)
        nbytes = 0;
    if (nbytes > 0)
        memmove(buffer, source + offset, nbytes);
    buffer[nbytes] = '\0';
}

#ifdef TEST

#include <stdio.h>

struct test_case
{
    const char *source;
    int         length;
    const char *result;
};

static struct test_case tests[] =
{
    {   "string",  0, ""            },
    {   "string", +1, "s"           },
    {   "string", +2, "st"          },
    {   "string", +3, "str"         },
    {   "string", +4, "stri"        },
    {   "string", +5, "strin"       },
    {   "string", +6, "string"      },
    {   "string", +7, "string"      },
    {   "string", -1, "g"           },
    {   "string", -2, "ng"          },
    {   "string", -3, "ing"         },
    {   "string", -4, "ring"        },
    {   "string", -5, "tring"       },
    {   "string", -6, "string"      },
    {   "string", -7, "string"      },
};
enum { NUM_TESTS = sizeof(tests) / sizeof(tests[0]) };

int main(void)
{
    int pass = 0;
    int fail = 0;

    for (int i = 0; i < NUM_TESTS; i++)
    {
        char buffer[20];
        substr(buffer, sizeof(buffer), tests[i].source, tests[i].length);
        if (strcmp(buffer, tests[i].result) == 0)
        {
            printf("== PASS == %2d: substr(buffer, %zu, \"%s\", %d) = \"%s\"\n",
                   i, sizeof(buffer), tests[i].source, tests[i].length, buffer);
            pass++;
        }
        else
        {
            printf("!! FAIL !! %2d: substr(buffer, %zu, \"%s\", %d) wanted \"%s\" actual \"%s\"\n",
                   i, sizeof(buffer), tests[i].source, tests[i].length, tests[i].result, buffer);
            fail++;
        }
    }
    if (fail == 0)
    {
        printf("== PASS == %d tests passed\n", NUM_TESTS);
        return(0);
    }
    else
    {
        printf("!! FAIL !! %d tests out of %d failed\n", fail, NUM_TESTS);
        return(1);
    }
}

#endif /* TEST */ 
```

函数声明应该在适当的标题中。该变量`sublen`有助于代码在以下情况下干净地编译：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
        -Wold-style-definition -Werror -DTEST substr.c -o substr 
```

测试输出：

```
== PASS ==  0: substr(buffer, 20, "string", 0) = ""
== PASS ==  1: substr(buffer, 20, "string", 1) = "s"
== PASS ==  2: substr(buffer, 20, "string", 2) = "st"
== PASS ==  3: substr(buffer, 20, "string", 3) = "str"
== PASS ==  4: substr(buffer, 20, "string", 4) = "stri"
== PASS ==  5: substr(buffer, 20, "string", 5) = "strin"
== PASS ==  6: substr(buffer, 20, "string", 6) = "string"
== PASS ==  7: substr(buffer, 20, "string", 7) = "string"
== PASS ==  8: substr(buffer, 20, "string", -1) = "g"
== PASS ==  9: substr(buffer, 20, "string", -2) = "ng"
== PASS == 10: substr(buffer, 20, "string", -3) = "ing"
== PASS == 11: substr(buffer, 20, "string", -4) = "ring"
== PASS == 12: substr(buffer, 20, "string", -5) = "tring"
== PASS == 13: substr(buffer, 20, "string", -6) = "string"
== PASS == 14: substr(buffer, 20, "string", -7) = "string"
== PASS == 15 tests passed 
```

* * *

在对另一个[答案](https://stackoverflow.com/a/14554107/15168)的评论中，[cool_sops](https://stackoverflow.com/users/1849260/cool-sops)问道：

> 为什么这不起作用：`memcpy(new_string, old_string, strlen(old_string) - 3; &new_string[strlen(old_string) - 3] = '\0'`假设`new_string`and`old_string`都是`char`指针 and `strlen(old_string) > 3`？

假设您删除`&`，插入缺少的`)`和`;`，指针指向有效的非重叠位置，并且满足长度条件，那么将旧字符串中除了最后 3 个字符之外的所有字符复制到新字符串中应该是可以的，如您可以通过将其嵌入到一些测试代码中来进行测试。它不会尝试处理复制旧字符串的最后三个字符，这似乎是问题主要要问的问题。

```
#include <string.h>
#include <stdio.h>
int main(void)
{
    char new_string[32] = "XXXXXXXXXXXXXXXX";
    char old_string[] = "string";
    memcpy(new_string, old_string, strlen(old_string) - 3);
    new_string[strlen(old_string) - 3] = '\0';
    printf("<<%s>> <<%s>>\n", old_string, new_string);
    return(0);
} 
```

输出：

```
<<string>> <<str>> 
```

但是，请注意棘手的巧合；我选择了一个 6 个字符长的示例旧字符串，并且 -3 给出的 'length -3' 也等于 3。要获取最后 N 个字符，您需要的代码更像：

```
#include <assert.h>
#include <string.h>
#include <stdio.h>

int main(void)
{
    int  N = 3;
    char new_string[32] = "XXXXXXXXXXXXXXXX";
    char old_string[] = "dandelion";
    int  sublen = strlen(old_string) - N;

    assert(sublen > 0);
    memcpy(new_string, old_string + sublen, N);
    new_string[N] = '\0';
    printf("<<%s>> <<%s>>\n", old_string, new_string);
    return(0);
} 
```

输出：

```
<<dandelion>> <<ion>> 
```

请注意，编写这样的小程序是一种很好的做法，并且具有教育意义。编写大量代码是更好地编写代码的一种方法。

唯一需要注意的陷阱是，如果您正在测试“未定义的行为”，您只需从单个编译器获得响应，但其他编译器可能会生成行为不同的代码。这段代码没有执行未定义的行为，所以很好。识别未定义的行为很棘手，因此您可以部分忽略此评论，但请确保您使用编译器上可以忍受的严格警告选项进行编译——它们有助于识别未定义的行为。

我有一些示例程序，我将它们（在源代码控制下）保存在一个名为`vignettes`;的目录中。它们是程序的小客串，说明了一种技术，如果我认为我将来可能再次需要它，我可以参考它。它们是完整的；他们工作; （它们比这些特定示例更复杂，但我用 C 编程的时间比你长；）但它们是玩具——有用的玩具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-27T06:08:38.550

不，您必须像这样使用 strlen() 来获取最后一个字符。

```
substr(strlen(str)-4,3); 
```

记住字符串是基于 0 的，所以这会给你最后 3 个。

所以一般的技术是

```
substr(strlen(str)-n-1,n); 
```

（当然字符串必须长于`n`）

如果您想获得最后 3 个，请使用以下命令：

```
substr(0,strlen(str)-4); 
```

或者一般来说

```
substr(0,strlen(str)-n-1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T01:02:21.163

我注意到这`substr`不是标准的 C 函数，因此在 C 中使用它是无效的。因此，通过消除可以使用的最后几个字符来查找子字符串`memcpy(new_string, old_string, strlen(old_string) - 3)`

# php - 如果where等于数组索引，则选择php mysql中的位置

> ID：14544922
> 
> 赞同：0
> 
> 时间：2013-01-27T06:07:07.677
> 
> 标签：php, mysql, arrays

嘿伙计们，我试图在 php 中查询一些东西，但是 WHERE 是数组中的一个索引，这就是我所做的

```
 $data=array();
                    while ($row = mysql_fetch_array($result))
                                {
                                    $item = array(
                                       'sec_id'=>$row['section_id'],
                                       'sec_name'=>$row['section_name'],
                                       'sec_dept'=>$row['section_department'],
                                       'sec_lvl'=>$row['section_level'],
                                      'advisory_id'=>$row['advisory_id'],
                                      'first_name'=>$row['f_firstname'],
                                      'last_name'=>$row['f_lastname'],
                                      'middle_name'=>$row['f_middlename'],
                                      'advisor_id'=>$row['faculty_id'],
                                    );

                    $get_subjects = "SELECT subject_name
                                        FROM subjects  
                                        WHERE level = '".$row['section_level']."' ";

                        $result_get_subjects =mysql_query($get_subjects)or die(mysql_error());

                        $subjects_count = mysql_num_rows($result_get_subjects);

                    $check_archive_subjects = " SELECT b.subject_name 
                                                FROM registrar_grade_archive a
                                                LEFT JOIN subjects b ON(a.subject_id=b.subject_id)
                                                LEFT JOIN section c ON(a.section_id = c.section_id)                                                 
                                                WHERE a.advisor_faculty_id ='".$row['faculty_id']."'
                                                WHERE a.section_id ='".$row['section_id']."'

                                                GROUP BY b.subject_name ASC
                                                 " ;

                     $query_checking =mysql_query($check_archive_subjects)or die(mysql_error());

                    $subjects_count_sent = mysql_num_rows($query_checking); 
```

但不幸的是，我在 $check_archive_subjects 中遇到了一个错误，上面写着：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE a.section_id ='24' 
```

有没有其他方法可以将数组索引放在 mysql 的 where 子句中。我知道 mysql 已被弃用，并且在我完成这个项目后将切换到 mysqli，所以请原谅我。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T06:08:12.700

多个`WHERE`条件应使用布尔关键字`AND`或`OR`. 您不会发出多个`WHERE`条款。

另外，请阅读有关 MySQL 扩展的内容 - [https://stackoverflow.com/a/12860046/283366](https://stackoverflow.com/a/12860046/283366)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:16:21.917

试试下面的查询

```
SELECT b.subject_name
FROM registrar_grade_archive a
LEFT JOIN subjects b ON(a.subject_id=b.subject_id)
LEFT JOIN section c ON(a.section_id = c.section_id)
WHERE a.advisor_faculty_id ='".$row['faculty_id']."' AND a.section_id ='".$row['section_id']."'
GROUP BY b.subject_name ASC 
```

# 解释

`WHERE`MySQL 不接受使用像上面这样的多个子句。根据您的要求，尝试`WHERE`使用`AND`或使用替换第二个。`OR`我用过`AND`

# sql - 我可以在单个语句中多次迭代更新单个列吗？

> ID：14544925
> 
> 赞同：3
> 
> 时间：2013-01-27T06:07:40.187
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在存储过程中收到了一个表作为表类型参数（它来自 excel 工作簿源，但这是另一回事）。它有几列，我需要根据每列的有效值列表来验证这些值。

假设我的表`OriginDetails`看起来像这样（请注意，这只是模拟数据；我有两个这样的表，每 8 列我将验证） -

```
Origin   | Status     | Priority | ErrMsg
------------------------------------------
Testing  | In Review  | Low      | 
Design   | Initiated  | Medium   | 
Prod     | Declined   | Critical | 
```

而且，我正在验证列中的值`Origin`，`Status`并`Priority`针对三个不同的列表（实际上我正在验证表中的数据的值，但为简单起见，我在这里硬编码了这些值），并`ErrMsg`根据我的验证更新列 -

```
UPDATE OriginDetails 
SET ErrMsg = ErrMsg + '|Invalid Origin' 
WHERE Origin NOT IN ('Pre-Design','Design','Development') 

UPDATE OriginDetails 
SET ErrMsg = ErrMsg + '|Unrecognized Status' 
WHERE Status NOT IN ('In Review','Approved') 

UPDATE OriginDetails 
SET ErrMsg = ErrMsg + '|Priority check failed' 
WHERE Priority NOT IN ('Critical','Medium','High') 
```

这一切都很好，很好，效果很好 - 但我最终得到了 16 个这样的更新语句，用于 2 个表，所以我有一个非常大而丑陋的代码块（还有很多重复，因为我有 2 个几乎相同的代码表）。

有没有一种方法可以让每个表的所有更新都在一个语句中完成？

类似于下面的内容，**除了它应该执行每个条件而不是只执行一个**-

```
UPDATE OriginDetails
SET ErrMsg = ErrMsg + 
(CASE WHEN Origin NOT IN ('Pre-Design','Design','Development') 
           THEN '|Invalid Origin'
      WHEN Status NOT IN ('In Review','Approved') 
           THEN '|Unrecognized Status'
      WHEN Priority NOT IN ('Critical','Medium','High') 
           THEN '|Priority check failed'
END) 
```

任何想法/方向表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T06:41:55.520

像这样的东西应该可以很好地工作（并且只需要您一次键入值）：

```
UPDATE OriginDetails
SET ErrMsg = ErrMsg + 
    CASE WHEN Origin NOT IN ('Pre-Design','Design','Development') THEN '|Invalid Origin' ELSE '' END
    + CASE WHEN Status NOT IN ('In Review','Approved') THEN '|Unrecognized Status'  ELSE '' END
    + CASE WHEN Priority NOT IN ('Critical','Medium','High')  THEN '|Priority check'  ELSE '' END 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/028c1/1)。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:22:22.463

这个怎么样：

```
UPDATE OriginDetails
SET ErrMsg = ErrMsg + 
(CASE 
WHEN Origin NOT IN ('Pre-Design','Design','Development') and Status NOT IN ('In Review','Approved') and Priority NOT IN ('Critical','Medium','High') 
           THEN '|Invalid Origin|Unrecognized Status|Priority check failed'
WHEN 
Origin NOT IN ('Pre-Design','Design','Development') and Status NOT IN ('In Review','Approved') and Priority IN ('Critical','Medium','High') 
           THEN '|Invalid Origin|Unrecognized Status'

END) 
```

您可以像我一样添加所有案例。

# android - 了解自定义包的 XML 属性

> ID：14544926
> 
> 赞同：11
> 
> 时间：2013-01-27T06:07:53.903
> 
> 标签：android, android-xml, android-2.1-eclair

我正在尝试使用这个精美项目中的拖放功能：[https ://github.com/bauerca/drag-sort-listview/](https://github.com/bauerca/drag-sort-listview/)

首先，我使用[GitHub 上的说明](https://github.com/bauerca/drag-sort-listview/blob/master/README.md#installation-in-eclipse-indigo)添加了库。

其次，我正在尝试使用[XML 声明](https://github.com/bauerca/drag-sort-listview/blob/master/README.md#xml-layout-declaration)。这是我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:dslv="http://schemas.android.com/apk/res/com.mobeta.android.dslv"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include layout="@layout/header"/>

    <com.mobeta.android.dslv.DragSortListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#D9D9D9"
        android:dividerHeight="2dp"
        android:listSelector="@drawable/list_selector"
        dslv:drag_enabled="true"
        dslv:drag_scroll_start="0.33"
        dslv:drag_start_mode="onDown"/>
</LinearLayout> 
```

但是，Eclipse 抛出了这个错误：`No resource identifier found for attribute 'drag_enabled' in package 'com.mobeta.android.dslv';`类似地 for`'drag_scroll_start'`和`'drag_start_mode'`.

我想在更一般的层面上了解我在这里做错了什么。如果有人能给我使用这个库的具体帮助，我也会很感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T06:34:18.657

由于您是从库中引用属性而不是给出库的完整路径，因此请给出“res-auto”，请查看更改

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:dslv="http://schemas.android.com/apk/res-auto"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<include layout="@layout/header"/>

<com.mobeta.android.dslv.DragSortListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#D9D9D9"
    android:dividerHeight="2dp"
    android:listSelector="@drawable/list_selector"
    dslv:drag_enabled="true"
    dslv:drag_scroll_start="0.33"
    dslv:drag_start_mode="onDown"/> 
```

[以供参考](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)

# android - 带有图标的 AlertDialog MultiChoiceItems

> ID：14544930
> 
> 赞同：2
> 
> 时间：2013-01-27T06:08:42.837
> 
> 标签：android, android-alertdialog

我想显示已安装应用程序的列表，用户可以在该列表中选择多个应用程序。到目前为止，我非常成功，显示了图标，但陷入了列表操作：触摸时没有选择项目，而且我也不知道如何在用户完成后检索选定的项目。

代码：

```
PackageManager pm = getPackageManager(); //get a list of installed apps.
List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
final ArrayList<AppsItem> apps = new ArrayList<AppsItem>(packages.size());
for (ApplicationInfo packageInfo : packages)
{
  log.i("getting package list", "Installed package : %s  name %s", packageInfo.packageName, pm.getApplicationLabel(packageInfo));
  apps.add(new AppsItem(packageInfo.packageName, pm.getApplicationIcon(packageInfo), pm.getApplicationLabel(packageInfo).toString()));
}
Collections.sort(apps);

final ListAdapter adapter = new ArrayAdapter<AppsItem>(this, android.R.layout.select_dialog_multichoice, android.R.id.text1, apps)
{
  public View getView(int position, View convertView, ViewGroup parent)
  {
    //User super class to create the View
    View v = super.getView(position, convertView, parent);
    CheckedTextView tv = (CheckedTextView) v.findViewById(android.R.id.text1);
    final AppsItem itm = apps.get(position);

    tv.setText(itm.appText);
    //Put the image on the TextView
    tv.setCompoundDrawablesWithIntrinsicBounds(itm.icon, null, null, null);
    tv.setChecked(itm.selected);

    tv.setOnClickListener(new OnClickListener()
    {
      public void onClick(View view)
      {
        CheckedTextView v = (CheckedTextView) view;
        itm.selected = !itm.selected;
        v.setChecked(itm.selected);
      }
    });

    //Add margin between image and text (support various screen densities)
    int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
    tv.setCompoundDrawablePadding(dp5);

    return v;
  }
};

AlertDialog.Builder alert = new AlertDialog.Builder(Settings.this);

alert.setTitle(rTitle);
alert.setAdapter(adapter, null);
alert.setPositiveButton(TX.s(android.R.string.ok), new DialogInterface.OnClickListener()
{
  @Override
  public void onClick(DialogInterface dialog, int which)
  {
    String selApps = "";
    for (AppsItem app: apps)
      if (app.selected)
        selApps += app.appID + ",";
    if (selApps.length() > 0)
      selApps = selApps.substring(0, selApps.length() - 1);
    log.i("app selection", "selected apps: %s", selApps);            
  }}); //How to retrieve the clicked items here?
alert.setNegativeButton(TX.s(android.R.string.cancel), null);
alert.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:16:28.230

我已经在我的一个应用程序中实现了这一点。您可以通过为列表视图创建一个自定义适配器并在每一行中放置一个复选框以及一个用于存储所选项目名称的字符串数组来实现这一点。现在在 getView( ) 您的适配器，如果检查为真，则在名称数组中的位置的帮助下添加列表项，反之亦然。希望你明白我的意思...

# java - Spring Web Flow - 页面上的多个表单 - 验证正确的表单

> ID：14544931
> 
> 赞同：2
> 
> 时间：2013-01-27T06:08:45.660
> 
> 标签：java, spring, spring-webflow, spring-webflow-2

我正在使用 Spring Web Flow 2.3，并且我有一个页面，上面有两个表单，根据提交的表单转换到不同的位置。为了实现这一点，我为我的视图状态创建了一个复合模型对象，其中包含两个表单。我看到的问题是，如果触发了转换 A，我只想验证表单 A，同样使用表单 B - 如果触发了 B 转换，我只想验证 B。我不确定如何指明要验证的表格。为每个转换验证整个复合表单的视图状态：

```
<view-state model="compositeForm">
    <transition on="formAsubmit" to="formApage" validate="true"/>
    <transition on="formBsubmit" to="formBpage" validate="true"/>
</view-state> 
```

有谁知道我如何触发自定义验证器根据触发的转换进行不同的验证？

谢谢你的帮助。

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:48:51.067

我不知道每个的自定义验证器，但在您的验证方法中，我认为您可以使用[`RequestContextHolder.getRequestContext()`](https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/execution/RequestContextHolder.html#getRequestContext--)to[`getCurrentTransition()`](https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/execution/RequestContext.html#getCurrentTransition--)或[`getCurrentEvent()`](https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/execution/RequestContext.html#getCurrentEvent--)手动比较该`getId()`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:37:41.347

我最终做的是在提交表单 B 时手动触发我的验证，并转换到检查是否存在验证错误的决策状态。这有点难看，但我觉得这是最好的方法：

```
<view-state id="start" model="compositeForm">
    <transition on="formAsubmit" to="pageA" validate="true"/>
    <transition on="formBsubmit" to="isFormBValid" validate="false">
        <evaluate expression="formBValidator.validate(compositeForm.formB, messageContext)"/>
    </transition
</view-state>

<decision-state id="isFormBValid">
    <if test="messageContext.hasErrorMessages()" then="start" else="pageB"/>
</decision-state> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-27T15:56:43.867

这不是最好的解决方案，但至少可以解决问题。这就是我在 vlaidator 中获得转换 ID 和视图状态 ID 的方式。

过渡编号

```
RequestContextHolder.getRequestContext().getFlowExecutionContext().getActiveSession().getState().getId(); 
```

视图状态 ID

```
 RequestContextHolder.getRequestContext().getFlowExecutionContext().getActiveSession().getState().getId(); 
```

# ios - 将排序的 NSManagedObjects 重新分配给 NSSet

> ID：14544934
> 
> 赞同：-2
> 
> 时间：2013-01-27T06:09:57.580
> 
> 标签：ios, core-data

我刚刚开始使用 Core Data，不确定它是如何工作的。我基本上有一个人实体和一个警报实体。每个人可以有许多警报。我想要的是去 person 对象的 detailViewController 并查看他们的警报。因为 NSSet 没有排序，所以我有一种方法可以返回排序的警报，如下所示：

```
- (NSArray *)sortedTimes {
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Alarm" inManagedObjectContext:self.managedObjectContext];
    [request setEntity:entity];

    NSSortDescriptor *timeDescriptor = [[NSSortDescriptor alloc] initWithKey:@"time" ascending:YES selector:@selector(compare:)];
    [request setSortDescriptors:@[timeDescriptor]];

    NSError *error = nil;
    NSArray *objects = [self.managedObjectContext executeFetchRequest:request error:&error];

    // Can I do this???
    //self.person.alarms = [NSSet setWithArray:objects];

//    for (NSManagedObject *obj in objects) {
//        NSDate *date = [obj valueForKey:@"time"];
//        NSLog(@"date: %@", [date description]);
//    }
    return objects;
} 
```

我想知道的是，排队`self.person.alarms = [NSSet setWithArray:objects];`可以吗？我想我不确定到底发生了什么。我的 executeFetchRequest 返回我想要的对象数组。我可以继续将其分配给人员实体的警报属性吗？我不确定是否有来自 Person->Alarm 的关系，我不应该搞砸，或者这样的事情是否完全合法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:20:52.767

首先，您的 fetch 请求返回*所有*警报，而不仅仅是`self.person`. 您必须向 fetch 请求添加谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"person = %@", self.person];
[request setPredicate:predicate]; 
```

（假设这`person`是从*Alarm*实体到*Person*实体的反比关系）。但是你并不真的需要一个获取请求来获取一个人的排序警报。更直接的方法是

```
NSArray *objects = [[self.person.alarms allObjects]
                              sortedArrayUsingDescriptors:@[timeDescriptor]]; 
```

现在回答你的问题：声明

```
self.person.alarms = [NSSet setWithArray:objects]; 
```

只需将同一组警报重新分配给该人。这实际上不会改变任何东西，因为它是同一个集合。特别是，它不保证`self.person.alarms`现在将按时间排序。

*备注：*如果您想显示一个带有人的警报的表格视图，您也可以使用`NSFetchedResultsController`（FRC）作为表格视图数据源。使用 FRC 的优点是，如果插入、删除或更新对象，表格视图会自动更新。

查看包含所有必需代码模板的文档`NSFetchedResultsController`。`NSFetchedResultsControllerDelegate`

# javascript - BackboneJS：backbone.js 中出现未捕获的类型错误

> ID：14544935
> 
> 赞同：0
> 
> 时间：2013-01-27T06:09:59.090
> 
> 标签：javascript, backbone.js

我是backbonejs的新手。我面临以下错误

```
Uncaught TypeError: undefined is not a function                    backbone.js:26 
```

这是我的代码

脚本标签内的 index.php

```
<script>
    new App.Router;
    Backbone.history.start();

    App.contacts = new App.Collections.Contacts;
    App.contacts.fetch().then(function () {
        new App.Views.App({ collection: App.contacts });
    });
</script> 
```

main.js

```
(function ($) {
window.App = {
    Models: {},
    Collections: {},
    Views: {},
    Router: {}
};

window.vent = _.extend({}, Backbone.Events);
})(jQuery); 
```

路由器.js

```
App.Router = Backbone.Router.extend({
routes: {
    '': 'index'
},

index: function () {
    console.log('index page');
}
}); 
```

集合.js

```
App.Collections.Contacts = Backbone.Collection.extend({
model: App.Models.Contact,
url : '/contacts'
}); 
```

模型.js

```
App.Models.Appoinment = Backbone.Model.extend({
//validate
}); 
```

视图.js

```
//Global App view
App.Views.App = Backbone.View.extend({
initialize: function () {
    console.log(this.collection.toJSON());
}
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:20:44.480

我找到了解决方案。在这里我所做的在我所指向的 collections.js 中，`App.Models.Contact`而我没有这个模型。我创建了它，现在它可以工作了。

# google-chrome - Chrome 中的 CSS3 过渡错误创建了奇怪的背景颜色

> ID：14544937
> 
> 赞同：1
> 
> 时间：2013-01-27T06:10:04.413
> 
> 标签：google-chrome, css, background-color, transition

我正在尝试通过实现 CSS3 的转换属性在按钮上制作流畅的动画。**在Firefox**、**Safari**和**Opera**中，按钮从深绿色平滑地变为浅绿色（IE 无论如何都不支持过渡）。

但是由于某种原因，在**Chrome**中，如果您将鼠标悬停在一个按钮上，然后立即将鼠标悬停在另一个按钮上，颜色似乎会滞后。有时我得到一个霓虹绿按钮，有时我得到一个黑色按钮；每当我从一个按钮到下一个按钮运行鼠标过快时，都会发生一些事情。Chrome 能不能跟上过渡或其他什么？

我正在使用的准系统代码：

```
.button {  
transition: background-color 0.2s;  
-moz-transition: background-color 0.2s;  
-webkit-transition: background-color 0.2s;  
background-color: #466b46; 
}

.button:hover {  
background-color: #74d06c;  
} 
```

Chrome 版本为 24.0.1312.56。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:06:12.067

如果我清楚地理解您的问题，您希望在悬停按钮时在 chrome 中平滑过渡？为此更改您的代码，如下所示：

```
.button {  
     transition: background-color linear 0.2s;  
     -moz-transition: background-color linear 0.2s;  
     -webkit-transition: background-color linear 0.2s;  
     background-color: #466b46; 
}

.button:hover {  
     transition: background-color linear 0.2s;  
     -moz-transition: background-color linear 0.2s;  
     -webkit-transition: background-color linear 0.2s;  
     background-color: #74d06c;  
} 
```

使用此代码，如果您将鼠标悬停在按钮上，您还可以平滑过渡回初始参数。

我希望这会对你有所帮助。

# mysql - MySQL ADDDATE、DATE_FORMAT 和 CONCAT_WS

> ID：14544938
> 
> 赞同：4
> 
> 时间：2013-01-27T06:10:06.693
> 
> 标签：mysql, sql, date, select

我正在构建以下查询，但遇到语法问题：

```
SELECT FORMAT(yrs_served * 365, 0) AS days_served,
ADDDATE(date_comm, INTERVAL days_served DAY(DATE_FORMAT(CONCAT_WS('-', yr_comm, mth_comm, day_comm), %Y-%m-%d) AS date_comm) AS left_office
FROM prime_minister JOIN ministry
; 
```

可以看出，我首先尝试将 CONCAT_WS 三个值转换为日期，然后使用 DATE_FORMAT 将其格式化为日期，这样我就可以使用 ADDDATE 将天数添加到该日期。

请指教我哪里出错了，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:30:25.740

您不能`ALIAS`在已定义的同一级别上使用。

```
SELECT   FORMAT(yrs_served * 365, 0) AS days_served,
         ADDDATE(CONCAT_WS('-', yr_comm, mth_comm, day_comm), INTERVAL (yrs_served * 365) DAY) AS left_office
FROM     prime_minister JOIN ministry..... 
```

如果您不想使用它，只需将其包装在子查询中，例如

```
SELECT  days_served,
        ADDDATE(date_comm, INTERVAL days_served DAY) AS left_office
FROM
(
    SELECT  FORMAT(yrs_served * 365, 0) AS days_served,
            CONCAT_WS('-', yr_comm, mth_comm, day_comm) as date_comm
    FROM     prime_minister JOIN ministry.....
) s 
```

*   [添加日期（*与 相同`DATE_ADD`*）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_adddate)

# mercurial - Mercurial 列出上次更新期间更改的所有文件

> ID：14544941
> 
> 赞同：2
> 
> 时间：2013-01-27T06:10:58.190
> 
> 标签：mercurial

是否有命令列出上次**更新**期间更改的所有文件？

```
hg status --change tip 
```

只给我最后一个**变更集**的文件。

我可以使用

```
hg status --rev FROM --rev TO 
```

但后来我必须存储更新前的转速。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:36:54.633

您可以通过执行状态并传入当前和修订来计算出在执行*之前*会发生什么变化： .`hg update``tip``hg status --rev . --rev tip`

正如蒂姆·德莱尼（Tim Delaney）所说，这将向您显示执行更新时*会*更改哪些文件，但在更新后不会有任何影响。我假设您想知道在拉动后进行更新时发生了什么变化？*在这种情况下，最好在进行更新之前*知道会发生什么变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T01:44:04.960

Mercurial 不会记录您运行的频率`hg update`，因此它无法告诉您上次更新触及了哪些文件。但是，它也不会影响受影响文件的修改时间，因此您可以查看它们的时间戳以了解发生了什么变化。要找出在过去五分钟内修改了哪些文件，请使用

```
find . -mmin -5 -print 
```

另一种方法是记录 mercurial*将*更新的内容，正如@icabod 建议的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T20:29:59.933

不会。一旦执行更新，Mercurial 不会存储有关工作目录先前状态的任何信息。在更新期间，它可能会存储一些状态以帮助在更新中断后恢复，但对您的用例没有任何用处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T17:03:16.187

如果*在*执行“hg update”之后，您想了解更新期间发生了什么变化，您可以试试这个：

首先，使用“hg log -l nn”获取作为最新更新一部分的修订列表。

接下来，使用“hg diff -r nn”显示自更新*前*修订以来的所有差异。

而且，如果您只想要更改文件的摘要，请使用“hg diff --stat -r nn”。

# php - mysql中的PHP正则表达式检查名称是否包含重音字母和名称长度大于5

> ID：14544942
> 
> 赞同：0
> 
> 时间：2013-01-27T06:11:18.330
> 
> 标签：php, mysql, regex

如何为以下场景编写带有正则表达式的查询。

```
id name
1  Müllere
2  Kees
3  Hernández
4  Björn 
```

上面给出的是我的 MySQL 表。我想得到结果，名称包含重音字母且名称长度大于 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:45:45.623

试试这个查询：

```
Select * from test where Length(name) > '5' and name REGEXP '[accentedcharacters]+'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:34:57.267

```
WHERE length(name) > 5 and name REGEXP '[accentedcharacters]+' 
```

但是，我不确定重音字符的 mysql REGEXP

[1] [http://dev.mysql.com/doc/refman/5.0/en/regexp.html](http://dev.mysql.com/doc/refman/5.0/en/regexp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T18:55:23.767

```
SELECT * FROM letters
+--------+
| letter |
+--------+
| '      |
| -      |
| a      |
| b      |
| c      |
| d      |
| e      |
| f      |
| g      |
| h      |
| i      |
| j      |
| k      |
| l      |
| m      |
| n      |
| o      |
| p      |
| q      |
| r      |
| s      |
| t      |
| u      |
| v      |
| w      |
| x      |
| y      |
| z      |
| å      |
| ä      |
| ö      |
| ÿ      |
+--------+

SELECT *
  FROM letters
 WHERE letter NOT REGEXP '[a-z\'|A-Z\-]';
+--------+
| letter |
+--------+
| å      |
| ä      |
| ö      |
| ÿ      |
+--------+ 
```

# c++ - 如何使用两个键作为整数创建 2D 向量

> ID：14544948
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:12:42.520
> 
> 标签：c++, vector, std

我有一个 c++ 程序，目前正在使用一个使用字符和数字作为键的向量。例如`myvector['A'][1] = line.substr(0,7)`。但是我需要它来工作，`myvector[1][3] = line.substr(0,7)`这样我就可以将两个键都用作数字。

在我当前的工作代码中，我有这个：

```
std::vector<std::vector<std::string> >myvector; 
```

我认为只需将字符串更改为整数即可，但我收到“分段错误（核心转储）”或“无法在赋值中将 'std::basic_string' 转换为 'int'”错误。

```
std::vector<std::vector<int> >myvector; 
```

我知道这个错误非常模糊，但我是 C++ 新手，所以我不知道如何找到任何其他特定的错误命令响应。我在网上浏览了很多示例，但遗憾的是无法编译其中的任何一个。任何帮助将不胜感激；感谢您的时间。

如果我以某种方式使用超出我范围的索引，这就是我输入索引的方式。

```
myvector[rn].resize(100);
std::ifstream fin(argv[3]);
std::string line;
int rn = 0;
int rln = 0;
while( getline(fin, line) ) {  
rn = 0;
while(rn < line.length()/7){
  myvector[rn][rln] = line.substr (rn*7,7);
  rn++;
}
rln++;
} 
```

当我输出“line.substr (rn*7,7)”时，结果完全符合预期，我只是无法将此变量设置到我的向量中。同样 rn 最终在 10+ 左右， rln 在 6 结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:20:04.030

您无需更改任何内容，vector 不是关联容器，它只能通过索引访问其数据，这是您的代码中已经发生的事情，因为 chars 在需要时会自动向上转换为 int：当您这样做时`data['A']`，A 是在 ASCII 编码中被视为它的 int 值。

在任何情况下，如果您的值是稀疏的，请考虑使用像`map<vector<string> >`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:22:25.090

在 C++ 中，字符串在双引号`"test"`中而不是在单代码`'test'`中，请尝试：

```
std::vector<std::vector<std::string> >myvector(3);
myvector[1].resize(10);
myvector[1][3] = "test";
std::cout << myvector[1][3] << std::endl; 
```

同样使用 std::vector 你没有关键概念，实际上你正在调用 access `operator[]`。

# autofac - 我可以在工厂内创建隐式 Lifetime 范围吗？

> ID：14544952
> 
> 赞同：2
> 
> 时间：2013-01-27T06:13:16.050
> 
> 标签：autofac

Autofac 是否支持使用工厂的隐式生命周期范围？例如，我希望能够执行以下操作

```
public class Session : IDisposable
{
    public Session(A a, B b, C c)
    {
        ...
    }
} 

...

using (var session = _sessionFactory())
{
    ...
} 
```

然后在每次调用 _sessionFactory 时 Autofac 自动创建一个嵌套的生命周期范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:18:34.523

是的。让工厂退货`Owned<Session>`。[拥有的实例](https://code.google.com/p/autofac/wiki/OwnedInstances)表明调用代码负责处置服务。实际上，如果您`Func<Owned<Session>>`从容器中解析 a，Autofac 将为您提供一个自动工厂来生成此类实例。

# c# - c# 对列表进行排序 >

> ID：14544953
> 
> 赞同：19
> 
> 时间：2013-01-27T06:13:34.997
> 
> 标签：c#, list, sorting, compare, keyvaluepair

在 C# 中，我想`List<KeyValuePair<int, string>>`按列表中每个字符串的长度对 a 进行排序。在 Psuedo-Java 中，这将是匿名的，看起来像：

```
 Collections.Sort(someList, new Comparator<KeyValuePair<int, string>>( {
      public int compare(KeyValuePair<int, string> s1, KeyValuePair<int, string> s2)
      {
          return (s1.Value.Length > s2.Value.Length) ? 1 : 0;    //specify my sorting criteria here
      }
    }); 
```

1.  如何获得上述功能？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-27T06:18:23.627

C# 中的等价物是使用 lambda 表达式和`Sort`方法：

```
someList.Sort((x, y) => x.Value.Length.CompareTo(y.Value.Length)); 
```

您也可以使用`OrderBy`扩展方法。它的代码略少，但它增加了更多开销，因为它创建了列表的副本而不是对其进行排序：

```
someList = someList.OrderBy(x => x.Value.Length).ToList(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-27T06:15:07.947

您可以使用 linq 调用[OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

```
list.OrderBy(o => o.Value.Length); 
```

有关@Guffa 指出的更多信息，请查找[Linq 和 Deferred Execution](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)，基本上它只会在需要时执行。因此，要立即从该行返回一个列表，您需要添加一个`.ToList()`将使要执行的表达式返回一个列表的列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-27T06:20:46.303

你可以用这个

```
using System;
using System.Collections.Generic;

class Program
{
    static int Compare1(KeyValuePair<string, int> a, KeyValuePair<string, int> b)
    {
    return a.Key.CompareTo(b.Key);
    }

    static int Compare2(KeyValuePair<string, int> a, KeyValuePair<string, int> b)
    {
    return a.Value.CompareTo(b.Value);
    }

    static void Main()
    {
    var list = new List<KeyValuePair<string, int>>();
    list.Add(new KeyValuePair<string, int>("Perl", 7));
    list.Add(new KeyValuePair<string, int>("Net", 9));
    list.Add(new KeyValuePair<string, int>("Dot", 8));

    // Use Compare1 as comparison delegate.
    list.Sort(Compare1);

    foreach (var pair in list)
    {
        Console.WriteLine(pair);
    }
    Console.WriteLine();

    // Use Compare2 as comparison delegate.
    list.Sort(Compare2);

    foreach (var pair in list)
    {
        Console.WriteLine(pair);
    }
    }
} 
```

# php - 允许最终用户将标签添加到 wordpress 中的特定帖子

> ID：14544954
> 
> 赞同：1
> 
> 时间：2013-01-27T06:13:38.707
> 
> 标签：php, wordpress, wordpress-theming

我正在基于 wordpress (.org) 的博客中寻找以下功能

“发布帖子后，允许最终用户将他们赢得的自定义标签添加到他们想要的帖子中。因此，发布者可能已将标签“足球”添加到帖子中，但读者可能还希望将其标记为“阅读稍后”，这样他就可以将他想稍后阅读的所有帖子都标记为“稍后阅读”。”

简而言之，如何让读者将自己的标签添加到帖子中。一个先决条件可能是读者必须在博客网站上注册。

或者，如果有人可以建议任何支持此功能的主题，那就太好了。

谢谢，光辉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:31:51.323

不幸的是，WordPress.com 不允许这样的事情——您需要做的任何事情（例如，提交数据更改的表单）都将被他们的服务所禁止，因为它完全被锁定为大量定制。

# java - org.apache.struts.chain.commands.servlet.CreateAction createAction INFO：初始化动作类型：

> ID：14544958
> 
> 赞同：1
> 
> 时间：2013-01-27T06:15:12.607
> 
> 标签：java, struts, struts-1

我的 struts 应用程序出现问题，要求用户使用 userUpdateAction 的表单操作更新他的详细信息，而表单 bean 是 UserUpdateForm。我有 servlet 过滤器来检查用户是否已经登录。如果他没有登录，我将转发到登录操作。如果他登录，我将向他显示更新表单，在所有成功验证后将其转发到空白页面。

struts-config.xml

```
<action path="/userUpdateAction" type="com.vaannila.action.userUpdateAction" name="UserUpdateForm" input="/update.jsp"  validate="true" scope="request">
            <forward name="success" path="/updateSuccess.jsp"  />
            <forward name="error" path="/update.jsp" />
</action> 
```

动作类

```
public class userUpdateAction extends Action {

    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest req, HttpServletResponse res) throws Exception {
        UserUpdateForm userform = (UserUpdateForm) form;
        System.out.println("form values:" + userform.getEmail());
        return mapping.findForward("success");
    }
} 
```

转发名称是正确的（成功在类和 struts-config.xml 中都是正确的）。

execute 方法也正确地覆盖了 Action 的执行方法。

在tomcat控制台中我可以看到

```
user already logged in start chain execution
2 Feb, 2012 9:12:10 AM org.apache.struts.chain.commands.servlet.CreateAction createAction
INFO: Initialize action of type: com.vaannila.action.userUpdateAction
errors : {} 
```

userUpdateAction 已初始化，但它不执行`execute`方法并转到空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T16:05:51.230

我在评论部分看到发布的问题已针对特定用户解决。我的行为与描述的相同（提交 http 请求但只返回一个空白页面）。想与他人分享我的决心，特别是因为这里的最初答案帮助我达成了我的决心。

我和我的团队正在从 Struts 1.1 升级到 1.3（一个很大的飞跃）。大多数我们所有的动作类都使用 perform() 方法。事实证明，对于 v1.1，不推荐使用 perform() 并添加了 execute()。在 v1.2 中，perform() 被删除。在我们开始升级工作之前，这些信息从未在我们的初步研究中找到。我不知道为什么我们最初的应用程序编写者多年前不使用 execute()。

我们更改了操作类以使用 execute() 方法，一切都重新开始工作。

希望这可以在将来节省其他人的时间和精力。

[参考 Struts v1.1 API](http://grepcode.com/file/repository.springsource.com/org.apache.struts/com.springsource.org.apache.struts/1.1.0/org/apache/struts/action/Action.java#Action.perform%28org.apache.struts.action.ActionMapping%2Corg.apache.struts.action.ActionForm%2Cjavax.servlet.http.HttpServletRequest%2Cjavax.servlet.http.HttpServletResponse%29)

[参考 Struts v1.2 API](http://struts.apache.org/release/1.2.x/api/org/apache/struts/action/Action.html)

# sql - SSIS - 如何将文件从 FTP 保存为 Unicode

> ID：14544960
> 
> 赞同：0
> 
> 时间：2013-01-27T06:15:28.117
> 
> 标签：sql, file, ftp, ssis

我需要从 ftp 服务器获取一个 txt 文件到我自己服务器的本地文件夹中，并将其保存为文本 Unicode。我该如何做“另存为”部分？

谢谢

# ios - 以编程方式在 UIScrollview 中添加多个 UIImageview

> ID：14544963
> 
> 赞同：3
> 
> 时间：2013-01-27T06:16:20.560
> 
> 标签：ios, iphone, objective-c, uiscrollview, uiimageview

```
UIView *view = nil;

NSArray *subviews = [scrollView subviews];

CGFloat curXLoc = 0;

for (view in subviews)
{
    if ([view isKindOfClass:[UIView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;

        frame.origin = CGPointMake(curXLoc, 0);

        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
} 
```

我放了一个`Scrollview`，在这个滚动视图中我把 5`UIImageview`放在 XIB 文件中

我有一个图像和一个按钮，每当我单击按钮时，图像都应该以编程方式加载到程序中的所有`UIImageview`s 中`UIScrollview`。

我还使用了以下编码

```
for(UIImageView *addview in Scroll)
{

    if([addview isKindOfClass:[UIImageView class]])
    {

        UIImageView *newImage = (UIImageView *)addview;

        newImage.image = [UIImage imageNamed:@"EarP010.jpg"];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:39:06.690

试试这个，

```
NSMutableArray * imagesArray = [[NSMutableArray alloc]init];

for (int imageCount = 0; imageCount < (noOfImages);imageCount++)
{
 [imagesArray addObject:[UIImage imageNamed:@"localImagePath%d.png",imageCount]];
}

UIScrollView * scrollview = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0,0.0,480.0,960.0)];
scrollview.contentSize = CGSizeMake(scrollview.size.width * (noOfImages),scrollview.frame.size.height);
scrollview.pagingEnabled = YES;

CGFloat xPos = 0.0;

for (UIImage * image in imagesArray) {
@autoreleasepool {
UIImageView * imageview = [[UIImageView alloc]initWithImage:image];
imageview.frame = CGRectMake(xPos, 0.0,scrollview.frame.size.width ,self.scrollView.frame.size.height);
[scrollview addSubview:imageview];
xPos += scrollview.size.width;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:22:41.480

如果您知道需要多少图像视图，则可以在 while 循环中添加图像视图。

```
 UIScrollView *sv = [UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
     ....
     [self.view addSubView:sv];

     int i = 0;
     while(i < numberOfImages){
         i = i + 200;
         UIImageView *i = [UIImageView alloc] initWithFrame:CGRectMake(20, i, 200, 100)]
         ....
         [sv addSubView:i];
       i++;
     } 
```

这是您可以使用的一种情况。您将需要知道所需的图像视图数量以及这些图像视图上的 Y 值。这段代码大部分是伪代码，需要填写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T06:32:11.493

用这个

```
NSArray* objects = [[NSBundle mainBundle] loadNibNamed:@"your xib name" owner:nil options:nil];

UIView* mainView = [objects objectAtIndex:0];

for (UIView* view in [mainView subviews]) {
    if([view isKindOfClass:[UIImageView class]])
    {
        UIImageView *iview = (UIImageView *)view;

        iview.image = [UIImage imageNamed:@"your imagename.png"];
    }
} 
```

# android - Android编程zxing条码扫描器检查数据mysql

> ID：14544968
> 
> 赞同：1
> 
> 时间：2013-01-27T06:17:03.943
> 
> 标签：android, mysql, json, database, barcode-scanner

我有代码 zxing 条码阅读器。我想从 msql 服务器检索有关条形码的数据。

1.  BarcodeScannerActivity
2.  意图积分器
3.  意图结果

我使用 json 从服务器检索数据，并且我已经成功完成了以下代码

```
public class CustomHttpClient {

    /** The time it takes for our client to timeout */

    public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds

    /** Single instance of HttpClient */

    private static HttpClient mHttpClient;

    /**

     * Get our single instance of our HttpClient object.

     *

     * @return an HttpClient object with connection parameters set

     */

    private static HttpClient getHttpClient() {

        if (mHttpClient == null) {

            mHttpClient = new DefaultHttpClient();

            final HttpParams params = mHttpClient.getParams();

            HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);

            HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);

            ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);

        }

        return mHttpClient;

    }

    /**

     * Performs an HTTP Post request to the specified url with the specified

     * parameters.

     *

     * @param url

     *            The web address to post the request to

     * @param postParameters

     *            The parameters to send via the request

     * @return The result of the request

     * @throws Exception

     */

    public static String executeHttpPost(String url,ArrayList<NameValuePair> postParameters) throws Exception {

        BufferedReader in = null;

        try {

            HttpClient client = getHttpClient();

            HttpPost request = new HttpPost(url);

            UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);

            request.setEntity(formEntity);

            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            StringBuffer sb = new StringBuffer("");

            String line = "";

            String NL = System.getProperty("line.separator");

            while ((line = in.readLine()) != null) {

                sb.append(line + NL);

            }

            in.close();

            String result = sb.toString();

            return result;

        } finally {

            if (in != null) {

                try {

                    in.close();

                } catch (IOException e) {

                    Log.e("log_tag", "Error converting result "+e.toString());

                    e.printStackTrace();

                }

            }

        }

    }

    /**

     * Performs an HTTP GET request to the specified url.

     *

     * @param url

     *            The web address to post the request to

     * @return The result of the request

     * @throws Exception

     */

    public static String executeHttpGet(String url) throws Exception {

        BufferedReader in = null;

        try {

            HttpClient client = getHttpClient();

            HttpGet request = new HttpGet();

            request.setURI(new URI(url));

            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity()

                    .getContent()));

            StringBuffer sb = new StringBuffer("");

            String line = "";

            String NL = System.getProperty("line.separator");

            while ((line = in.readLine()) != null) {

                sb.append(line + NL);

            }

            in.close();

            String result = sb.toString();

            return result;

        } finally {

            if (in != null) {

                try {

                    in.close();

                } catch (IOException e) {

                    Log.e("log_tag", "Error converting result "+e.toString());

                    e.printStackTrace();

                }

            }

        }

    }

public class JSONUseActivity extends Activity {
    EditText byear ;   // To take birthyear as input from user
    Button submit;
    TextView tv;
          int by= 1987;// TextView to show the result of MySQL query

    String returnString;   // to store the result of MySQL query after decoding JSON

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                .detectDiskReads().detectDiskWrites().detectNetwork() // StrictMode is most commonly used to catch accidental disk or network access on the application's main thread
                .penaltyLog().build());
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        byear =  (EditText) findViewById(R.id.editText1);
        submit = (Button) findViewById(R.id.submitbutton);
        tv = (TextView) findViewById(R.id.showresult);

        // define the action when user clicks on submit button
        submit.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v) {
                // declare parameters that are passed to PHP script i.e. the name "birthyear" and its value submitted by user
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

                // define the parameter
                postParameters.add(new BasicNameValuePair("birthyear", byear.getText().toString()));

                String response = null;

                // call executeHttpPost method passing necessary parameters
                try {
                    response = CustomHttpClient.executeHttpPost(
                            //"http://129.107.187.135/CSE5324/jsonscript.php", // your ip address if using localhost server
                            "http://srknysv.netai.net/dosyalar/jsonscript.php",  // in case of a remote server
                            postParameters);

                    // store the result returned by PHP script that runs MySQL query
                    String result = response.toString();

                    //parse json data
                    try{
                        returnString = "";
                        JSONArray jArray = new JSONArray(result);
                        for(int i=0;i<jArray.length();i++){
                            JSONObject json_data = jArray.getJSONObject(i);
                            Log.i("log_tag","id: "+json_data.getInt("id")+
                                    ", name: "+json_data.getString("name")+
                                    ", sex: "+json_data.getInt("sex")+
                                    ", birthyear: "+json_data.getInt("birthyear")
                            );
                            //Get an output to the screen
                            returnString += "\n" + json_data.getString("name") + " -> "+ json_data.getInt("birthyear");
                        }
                    }
                    catch(JSONException e){
                        Log.e("log_tag", "Error parsing data "+e.toString());
                    }

                    try{
                        tv.setText(returnString);
                    }
                    catch(Exception e){
                        Log.e("log_tag","Error in Display!" + e.toString());;
                    }
                }
                catch (Exception e) {
                    Log.e("log_tag","Error in http connection!!" + e.toString());
                }
            }
        });
    } 
```

我的两个项目都运行良好

我从服务器获取值

```
postParameters.add(new BasicNameValuePair("birthyear", byear.getText().toString())); 
```

条形码阅读器返回以下代码的意图`public final class IntentResult {

```
private final String contents;
private final String formatName;
private final byte[] rawBytes;
private final Integer orientation;
private final String errorCorrectionLevel;

IntentResult() {
    this(null, null, null, null, null);
}

IntentResult(String contents,
             String formatName,
             byte[] rawBytes,
             Integer orientation,
             String errorCorrectionLevel) {
    this.contents = contents;
    this.formatName = formatName;
    this.rawBytes = rawBytes;
    this.orientation = orientation;
    this.errorCorrectionLevel = errorCorrectionLevel;
}

@Override
public String toString() {
    StringBuilder dialogText = new StringBuilder(100);
    dialogText.append("Format: ").append(formatName).append('\n');
    dialogText.append("Contents: ").append(contents).append('\n');
    int rawBytesLength = rawBytes == null ? 0 : rawBytes.length;
    dialogText.append("Raw bytes: (").append(rawBytesLength).append(" bytes)\n");
    dialogText.append("Orientation: ").append(orientation).append('\n');
    dialogText.append("EC level: ").append(errorCorrectionLevel).append('\n');
    return dialogText.toString();
} 
```

}` 如何使用此代码将扫描的条形码代码发送到服务器。

# html - iframe 不适用于某些网站

> ID：14544969
> 
> 赞同：1
> 
> 时间：2013-01-27T06:17:07.553
> 
> 标签：html, iframe

我尝试使用 iframe 访问一些网站。似乎它适用于某些网站，但不适用于其他网站。有什么想法吗？如何解决？iframe中的src链接是有效的，我可以直接访问。它只是没有出现在 iframe 中。

这与 X-Frame-Options 有关吗？如何绕过它？

非常感谢。

========

这是html代码：

```
<html>
<head>
<title>IFrame Test</title>
</head>

<body>
<iframe src="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxn%2F7bvn0ay1PXvKwtZSEswjTW0qipvZgGECAqg4jFMvRrmqEsewCV2vrDIKlj1m7fQBXl8oXaLeyNdntQSWHx%2F4LzcWUbay3v1DbpVnqVPkubyxNIXPljUBoBNuLFC0ZLm4SV46zTasP3e6uSYcfiqrWYSyZV%2B7G&spm=2014.21191910.1.0" width="100%" height="600" >
</iframe>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:41:58.840

> **这与 X-Frame-Options 有关吗？**

是的，不错。很难，甚至不可能确定服务器端采用了何种技术来防止内容被加载到不同域的框架中，但`X-Frame-Options:SAMEORIGIN`没有使用。这是尝试在 iframe 中加载相关网页时返回的响应标头：

```
HTTP/1.1 302 Moved Temporarily
Server: Tengine
Date: Sun, 27 Jan 2013 06:24:22 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: close
Location: [too long, irrelevant, removed ;)]
Expires: Sun, 27 Jan 2013 06:24:22 GMT
Cache-Control: max-age=0 
```

如您所见，服务器以 HTTP 状态代码 302 ( `moved temporarily`) 进行响应，这通常用于 Web 服务器，而不是`forbidden`为了防止任何其他此类请求使 Web 服务器过载（或在日志中区分单个被拒绝的请求）文件）。但是，没有任何`X-Frame-Options:SAMEORIGIN`标题。无论如何，此类标头可能会或可能不会受到各种浏览器的尊重。

> **如何绕过它？**

没有在涉及的 Web 服务器上做一些非法和讨厌的工作，或者知道 Web 服务器需要满足哪些条件才能授予对所请求位置的访问权限，这是不可能的。不过，您可以请求网络服务器的管理员为您的域设置此规则的例外。只是一个想法...

**编辑**：经过进一步调查，您提供的 URL 实际上重定向到

`http://item.taobao.com/item.htm?id=13188785766&ali_trackid=2:mm_32761976_0_0:1359267664_4k8_1456591680&spm=2014.21191910.1.0`

这意味着涉及一些服务器端重写规则。这对您的 URL 没有多大帮助，但如果您只想将目标页面呈现给最终用户，您可以使用它转换为的那个。问题是，您丢失了任何会话数据和/或跟踪 cookie，您可能想要强加给毫无戒心的用户并收集一些推荐计划的战利品。我并不是在暗示这就是你想要做的，但如果你这样做了，那么在 iframe 源中放入一个翻译后的 URL 是行不通的。;)

# sql - SQL用他们部门的平均工资更新员工的工资

> ID：14544971
> 
> 赞同：-1
> 
> 时间：2013-01-27T06:17:45.100
> 
> 标签：sql, oracle, sql-update

考虑表格`employee`：

```
desc employee;

Name                       Null?    Type
-------------------------- -------- ------------
EMPLOYEENO                 NOT NULL NUMBER(4)
ENAME                               VARCHAR2(15)
JOB                                 VARCHAR2(15)
MGR                                 NUMBER(4)
HIREDATE                            DATE
SAL                                 NUMBER
COMM                                NUMBER
DEPTNO                              NUMBER(2) 
```

包含 的值`deptno`，`sal`如：

```
 DEPTNO      SAL
---------- ----------
        10     2450
        10     5000
        10     1300
        20     2975
        20     3000
        20     1100
        20      800
        20     3000
        30     1250
        30     1500
        30     1600
        30      950
        30     2850
        30     1250 
```

需要用**他们**部门的平均工资来更新员工的工资。即将每个员工的工资设置为部门平均水平。group by 条款是否有任何解决方案，例如

```
update employee set sal =(select avg(sal) from employee group by deptno) where deptno in(select deptno from employee group by deptno) 
```

那么如何查询相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T06:28:14.877

试试这个

```
UPDATE EMPLOYEE A
SET SAL = (SELECT AVG(SAL) FROM EMPLOYEE B WHERE B.DEPTNO = A.DEPTNO); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:29:17.333

```
update employee a
set sal =  (select avg(sal) as avgsal
          from employee b
          where A.DEPTNO = b.deptno
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:44:33.663

这将作为 MERGE 更有效地实现，其中 USING 子句将所有部门的薪水汇总到部门级别，并连接到 department_id 上的员工表。

# php - 通过javascript发布php ajax结果时激活javascript

> ID：14544976
> 
> 赞同：2
> 
> 时间：2013-01-27T06:18:32.300
> 
> 标签：php, javascript, html, ajax

我有这个 html 表单：

```
 <form method="post">
        <input type="radio" name="news" id="new" value="nuova" onchange="newstype(this.id);">Nuova News
        <input type="radio" name="news" id="mod" value="modifica" onchange="newstype(this.id);">Modifica News

        <select name="news" id="modifica" style="display:none" onchange="shownews(this.value)">
            <?php
                include "../flock/sql.php";
                $connection = new mysqli($host, $user, $pw, $db) or die("Impossibile connettersi"); 
                $querylistanews = "SELECT * FROM NEWS ORDER BY id DESC";
                $listanews = $connection->query($querylistanews);                       
                    print '<option>Seleziona una news...</option>';                     
                while ($newsdamodificare = $listanews->fetch_object()) {
                    print '<option value="'.$newsdamodificare->id.'">'.$newsdamodificare->data." - ".$newsdamodificare->title.'</option>';
                }
                $listanews->close();
                $connection->close;      
            ?>    
        </select>
    </form> 
```

这个javascript：

```
function newstype(param) {
    if(param == 'new') {
        document.getElementById('crea').style.display = 'inline';
        document.getElementById('modifica').style.display = 'none';
        document.getElementById('newsdamodificare').style.display = 'none';
    } else {
        if(param == 'mod') {
        document.getElementById('crea').style.display = 'none';
        document.getElementById('modifica').style.display = 'inline';
        document.getElementById('newsdamodificare').style.display = 'inline';
        }
    }
}

function shownews(str) {

    if (str=="") {
      document.getElementById("newsdamodificare").innerHTML="";
      return;
    } 

    if (window.XMLHttpRequest) {        // codice per IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();     
    } else {                            // codice per IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById("newsdamodificare").innerHTML=xmlhttp.responseText;
      }
    }

xmlhttp.open("GET","modifica.php?news="+str,true);
xmlhttp.send();
} 
```

这个php：

```
<head>
<script type="text/javascript" src="../editor/ckeditor.js"></script>
<script type="text/javascript" src="/js/charscounter.js"></script>
</head>

<?php
$news=$_GET["news"];
include "../flock/sql.php";

$connection = new mysqli($host, $user, $pw, $db) or
  die('Impossibile connettersi al database: ' . mysql_error());

$newsdaldatabase="SELECT * FROM NEWS WHERE id = '".$news."'";

$result = $connection->query($newsdaldatabase);

$count = mysqli_num_rows($result);

if($count==1){
    while($dati = mysqli_fetch_array($result)) {
      $id = $dati['id'];
      $data = $dati['data'];
      $title = $dati['title'];
      $body = $dati['body'];
    }
} else {
    die('Errore del sistema. Più di una news selezionate: ' . mysql_error());
}
mysqli_close($connection);
?>

<div class="normal" id="modifica">
<table style="width:100%;height:100%;">
<tr>
<td colspan="3" border="0">
    <strong class="confirm">Modifica news</strong>
</td>
</tr>

<tr>
<td width="107" align="right">
    <strong>Data</strong>
</td>
<td colspan="2">
<form name="modificanews" method="post" action="italiano.php?modifica=yes">
    <input name="idmodificanews" type="text" style="display:none" value="<?php echo $id ?>">
    <input name="datanewsmodificata" type="text" maxlength="10" size="8" value="<?php echo $data ?>"> gg.mm.aaaa
</td>
 </tr>

<tr>
<td align="right">
    <strong>Titolo</strong>
</td>
<td width="360">
    <input name="modificatitolo" type="text" maxlength="50" size="50" value="<?php echo $title ?>" onKeyPress="return taLimit(this)" onKeyUp="return taCount(this,'myCounter')">
</td>
<td width="522">
          <b><span id=myCounter>50</span></b> caratteri rimanenti per il titolo</font>
</td>
</tr>

<tr>
<td colspan="3">
    <textarea name="modificatesto"><?php echo $body ?></textarea>
        <script>
            CKEDITOR.replace('modificatesto');
        </script>
</td>
</tr> 
```

一切都很好，除了一件事：当我选择要编辑的新闻时，来自服务器的内容被正确地发布在 php 上，但在 HTML 上，php 中的脚本（CKEDITOR 和 Char Cunter）不活动。

所以，在我的 HTML 上，如果用户将编辑新闻，我只得到一个简单的文本区域而不是 CKEDITOR 等。

有没有办法解决这个问题？你能以某种方式帮助我吗？

谢谢！

编辑：我自己解决了这个问题。将解决方案视为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:43:29.623

对于那些有同样问题的人：

我通过以下方式解决了我的问题：在javascript上添加一个新行：

```
document.getElementById("newsdamodificare").action=CKEDITOR.replace('modificatesto'); 
```

在这 2 行之间：

```
document.getElementById("newsdamodificare").innerHTML=xmlhttp.responseText;
NEW LINE TO INSERT HERE
} 
```

并从 php 中删除这些行：

```
<script>
    CKEDITOR.replace('modificatesto');
</script> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:23:56.513

您正在尝试通过**name**选择您的 textarea ，但`CKEDITOR.replace('modificatesto');`正在寻找一个**ID**。

尝试

```
<textarea id="modificatesto"><?php echo $body ?></textarea>
    <script>
        CKEDITOR.replace('modificatesto');
    </script> 
```

# printing - 动态更改打印数据

> ID：14544978
> 
> 赞同：2
> 
> 时间：2013-01-27T06:18:46.247
> 
> 标签：printing, ghostscript, postscript

我正在寻找一种方法来处理发送到打印机的数据（现在是喷墨打印机。可能是 HP 2460）。我想在打印机每次尝试打印时动态更改数据。

IE。在第 1 点，打印的页面将保持正常，但纸张可能会改变其位置，因此我正在寻找一种方法来旋转输入图像以对抗纸张的旋转。

我***想***我正在寻找一种方法来实时指定要逐像素打印的数据。

## 可用数据输入：

1.  回转
2.  实时提供的每个瞬间打印头相对于页面角落的位置

## 到目前为止我所拥有的：

我见过一个实例，其中特定的 HP 喷墨打印机被修改为直接在 arduino 上工作，但我现在想直接从计算机上进行操作，原因有两个：

1.  我需要尽快提交概念验证系统
2.  我没有很容易访问逻辑分析仪/示波器来对通信协议进行逆向工程（也可能是专业知识）。

我正在调查`PostScript`，`GhostScript`但据我所知，我将无法动态修改数据（仍在试图弄清楚，如果我错了，请原谅我）。这种方法行得通吗？还是我需要查看驱动程序或其他东西？

我知道提出问题的限制以及研究不周的问题是如何被皱眉的。我仍在努力弄清楚如何完成这项工作，并且一直在研究我脑海中出现的所有事情，并且在浏览过程中遇到了问题。但是，到目前为止，我所看到的似乎都无法做我想做的事（或者我错过了它）。我问这个问题是希望得到一些关于要研究什么的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:08:35.990

如果你的意思是操纵每一页，即这个页面横向下一页纵向等，那么我会处理后记输入，甚至不考虑具体的硬件通信。

另一方面，您想在打印开始后抓住打印头并实时操作，那么该方法显然取决于特定的打印机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:02:10.420

如果可能的话，我会尝试在更高的水平上做到这一点。最好是如果您控制后记的生成方式，那么您可以插入`<<...>> setpagedevice`以更改打印机参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:40:45.333

一个问题是大多数打印机制造商已停止分发有关打印机命令语言的文档。

另一个问题是 ghostscript 输出设备已经过时了，比如点阵打印机。（见问题一）。

对于丝网打印输出应用程序，我对 epson 1400 打印命令语言进行了逆向工程，并编写了一个程序以将位图输出到打印机。然后我编写了一个基于 .bmp 驱动程序的 ghostscript 打印驱动程序，该驱动程序创建位图并将位图转换为 epson 命令。由于您想使用 HP，很遗憾，此代码无济于事。

走过那条路，我可以告诉你，这并不容易。喷墨打印机不允许旋转，因此您需要对喷墨打印机进行光栅化，然后重新创建旋转图像。Ghostscript 本身很难使用 gsprint 和 redmon 运行到打印机，但如果您已经有直立打印的 postscript 作业，则可以使用 postscript 命令旋转和移动图像。

我不明白你想要完成什么。您可以使用带有网络摄像头的电脑来预览方向，然后生成位图并将其打印到打印机，还是需要等到纸张就位后再生成打印数据？

# java - 如何限制 JSP/Servlet 中的每个用户角色？

> ID：14544980
> 
> 赞同：1
> 
> 时间：2013-01-27T06:18:58.540
> 
> 标签：java, jsp, jakarta-ee, servlets

我想在我的 JPS Web 应用程序中提供许多用户。我不想为每个用户重定向很多页面。我只想为所有用户提供一页。例如，我有一个页面包含添加、编辑和删除按钮，这是管理员用户的主要或唯一角色。如果登录用户不是管理员，我不希望任何用户有权添加、编辑和删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T06:26:32.813

即使您为不同的角色使用相同的 JSP 页面也是可能的。JSP 在服务器中编译并在发送到客户端之前转换为原始 HTML 和 js。

因此，在 JSP 页面中，您可以放置​​用户角色的条件基础。像 -

登录Servlet -

```
public class LonginServelt extends HttpServlet{
    public void doPost(HttpServletRequest request, HttpServletResponse response){
        User user = userService.checkUserCredential(username,password);
        Session session = request.getSession();
        session.setAttribute("user",user);
    }
}

<c:choose>
  <c:when test="${isAdmin}">
    You got Gold 
  </c:when>

  <c:when test="${isCustomer}">
    You got Silver 
  </c:when>

  <c:when test="${isProducer}">
    You got Bronze 
  </c:when>

  <c:otherwise>
    Better luck next time 
  </c:otherwise>
</c:choose> 
```

因此，当用户在服务器本身中使用不同角色访问此页面时，它将填充角色依赖的 html。

> 注意：您甚至可以使用 scriplet 来放置被视为旧技术的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T07:28:20.013

你想要的是一个过滤器，准确地说是一个会话过滤器，你可以试试这些：

如果没有，我假设您有一个用户类：

用户.java

```
public class User implements Serializable {
  private int accountId;
  private String loginId;
  private Role type;

  public User(int accountId, String loginId, Role type) {
    this.accountId = accountId;
    this.loginId = loginId;
    this.type = type;
  }

  public User() {
    this.accountId = -1;
    this.loginId = null;
    this.type = null;
  }

  public void setRole(Role type) {
    this.type = type;
  }

  public Role getRole() {
    return this.type;
  }

  public void setAccountId(int accountId) {
    this.accountId = accountId;
  }

  public int getAccountId() {
    return this.accountId;
  }

  public void setLoginId(String loginId) {
    this.loginId = loginId;
  }

  public String getLoginId() {
    return this.loginId;
  }
} 
```

您还可以为您的角色类型创建一个枚举：

角色.java

```
public enum Role {

  ADMINISTRATOR, STAFF;
} 
```

在您的 login.jsp 中，这只是给您一个想法的示例：

```
<%
  //put your login query stuff here
  User user = new User();
  user.setAccountId(1);
  user.setLoginId("adminaccount01);
  user.setRole(Role.ADMINISTRATOR);
  session.setAttribute("LOGIN_USER", user);
%> 
```

这是过滤器：**SessionCheckFilter.java**

```
public class SessionCheckFilter implements Filter {

    private String contextPath;

    @Override
    public void init(FilterConfig fc) throws ServletException {
        contextPath = fc.getServletContext().getContextPath();
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain fc) throws IOException, ServletException {

        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;                        

        User user = (User) req.getSession().getAttribute("LOGIN_USER");
        if (user == null) {                
                //put your redirect stuff here
                res.sendRedirect(contextPath + "/to_your_login.jsp");                
        } else {
            switch (user.getRole()) {
                case ADMINISTRATOR:
                        //put your redirect stuff here
                        res.sendRedirect(contextPath + "/redirect_to_your_admin_path/admin_page.jsp");
                    break;
                case STAFF:
                        //put your redirect stuff here
                        res.sendRedirect(contextPath + "/redirect_to_staff_path/staff_page.jsp");
                    break;
                default:
                    break;
            }
            fc.doFilter(request, response);
        }
    }

    @Override
    public void destroy() {
    }
} 
```

并添加不要忘记将这些添加到**web.xml**

```
 <filter>
    <filter-name>SessionCheckFilter</filter-name>
    <filter-class>package_name_if_there_is_any.SessionCheckFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <url-pattern>/your_path/*</url-pattern> 
  </filter-mapping> 
```

# windows-phone-7.1 - Windows Phone 获取字符串中的图像源路径

> ID：14544985
> 
> 赞同：0
> 
> 时间：2013-01-27T06:19:48.520
> 
> 标签：windows-phone-7.1, windows-phone-8

我正在尝试获取字符串中的图像源路径但无法获取它。

这是我的代码

```
String tempJPEG = imgUpload.Source.ToString() ; 
```

这里**imgUpload**是`<Image x:Name="imgUpload" ></Image>`

我`"System.Windows.Media.Imaging.BitmapImage"`在**tempJPEG**得到这个。

如何获取图像路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:01:00.107

图像控件的源属性包含 BitmapImage 本身。因此，您需要使用 BitmapImage.UriSource 属性。

# java - 如何配置 slf4j-simple

> ID：14544991
> 
> 赞同：188
> 
> 时间：2013-01-27T06:21:30.493
> 
> 标签：java, logging, slf4j

api 1.7 和 slf4j-simple 作为实现。我只是找不到如何使用这种组合配置日志记录级别。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2013-01-27T06:51:03.327

它要么通过系统属性

```
-Dorg.slf4j.simpleLogger.defaultLogLevel=debug 
```

或`simplelogger.properties`类路径上的文件

详见[http://www.slf4j.org/api/org/slf4j/impl/SimpleLogger.html](http://www.slf4j.org/api/org/slf4j/impl/SimpleLogger.html) _

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2014-04-30T14:51:22.380

这是您可以放置​​在类路径中的示例`simplelogger.properties`（取消注释您希望使用的属性）：

```
# SLF4J's SimpleLogger configuration file
# Simple implementation of Logger that sends all enabled log messages, for all defined loggers, to System.err.

# Default logging detail level for all instances of SimpleLogger.
# Must be one of ("trace", "debug", "info", "warn", or "error").
# If not specified, defaults to "info".
#org.slf4j.simpleLogger.defaultLogLevel=info

# Logging detail level for a SimpleLogger instance named "xxxxx".
# Must be one of ("trace", "debug", "info", "warn", or "error").
# If not specified, the default logging detail level is used.
#org.slf4j.simpleLogger.log.xxxxx=

# Set to true if you want the current date and time to be included in output messages.
# Default is false, and will output the number of milliseconds elapsed since startup.
#org.slf4j.simpleLogger.showDateTime=false

# The date and time format to be used in the output messages.
# The pattern describing the date and time format is the same that is used in java.text.SimpleDateFormat.
# If the format is not specified or is invalid, the default format is used.
# The default format is yyyy-MM-dd HH:mm:ss:SSS Z.
#org.slf4j.simpleLogger.dateTimeFormat=yyyy-MM-dd HH:mm:ss:SSS Z

# Set to true if you want to output the current thread name.
# Defaults to true.
#org.slf4j.simpleLogger.showThreadName=true

# Set to true if you want the Logger instance name to be included in output messages.
# Defaults to true.
#org.slf4j.simpleLogger.showLogName=true

# Set to true if you want the last component of the name to be included in output messages.
# Defaults to false.
#org.slf4j.simpleLogger.showShortLogName=false 
```

在 Maven 或 Gradle 项目中，“类路径”上的一个方便位置是`src/main/resources/simplelogger.properties`.

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2013-06-02T22:25:08.013

您可以通过设置系统属性以编程方式更改它：

```
public class App {
  public static void main(String[] args) {
    // for the code below to work, it must be executed before the
    ​// logger is created. see note below
    System.setProperty(org.slf4j.impl.SimpleLogger.DEFAULT_LOG_LEVEL_KEY, "TRACE");

    ​org.slf4j.Logger log = LoggerFactory.getLogger(App.class);
       ​
    ​log.trace("trace");
    ​log.debug("debug");
    ​log.info("info");
    ​log.warn("warning");
    ​log.error("error");
  ​}
​} 
```

日志级别是`ERROR`> `WARN`> `INFO`> `DEBUG`> `TRACE`。

请注意，一旦创建了记录器，就无法更改日志级别。如果您需要动态更改日志记录级别，您可能希望将[log4j](http://logging.apache.org/log4j/1.2)与 SLF4J 一起使用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-06T15:09:46.980

我注意到 Eemuli 说您不能在创建日志级别后更改它们 - 虽然这可能是设计，但这并不完全正确。

我遇到了一种情况，我正在使用一个登录到 slf4j 的库 - 我在编写 maven mojo 插件时正在使用该库。

Maven 使用 slf4j SimpleLogger 的（黑客）版本，我无法让我的插件代码将其日志重新路由到我可以控制的 log4j 之类的东西。

而且我无法更改 Maven 日志记录配置。

因此，为了消除一些嘈杂的信息消息，我发现我可以像这样使用反射，在运行时使用 SimpleLogger。

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.spi.LocationAwareLogger;
    try
    {
        Logger l = LoggerFactory.getLogger("full.classname.of.noisy.logger");  //This is actually a MavenSimpleLogger, but due to various classloader issues, can't work with the directly.
        Field f = l.getClass().getSuperclass().getDeclaredField("currentLogLevel");
        f.setAccessible(true);
        f.set(l, LocationAwareLogger.WARN_INT);
    }
    catch (Exception e)
    {
        getLog().warn("Failed to reset the log level of " + loggerName + ", it will continue being noisy.", e);
    } 
```

当然，请注意，这不是一个非常稳定/可靠的解决方案......因为它会在下次 Maven 人员更改他们的记录器时中断。

# ios - iOS应用流程图工具

> ID：14544992
> 
> 赞同：0
> 
> 时间：2013-01-27T06:21:37.110
> 
> 标签：ios, ios5, workflow, flowchart

我正在寻找可以帮助我为包含视图的 iOS 应用程序创建流程图的应用程序。一个例子：

[http://yvonnelao.com/wp-content/uploads/2011/04/RW_FlowChart_121410.jpg](http://yvonnelao.com/wp-content/uploads/2011/04/RW_FlowChart_121410.jpg)

是否已经为此建立了解决方案，或者我应该手动绘图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:27:01.247

我见过很多客户使用的一种 iOS 商业线框图工具是[Balsamiq](http://www.balsamiq.com/products/mockups)。不过，单用户许可证需要 80 美元。

# android - Android - SurfaceView：使用或不使用精灵表？

> ID：14544993
> 
> 赞同：1
> 
> 时间：2013-01-27T06:21:53.387
> 
> 标签：android, sprite, surfaceview, out-of-memory

我目前正在尝试使用 SurfaceView 为 Android 平板设备创建游戏。我有精灵，什么都没有，但是如果我应该使用整个精灵表（其中包含每个动画），或者只是在图像文件上分离精灵，我正在努力。

例如，我的 spritesheet 名为 Bear.png，里面包含 16 张图片。我可以使用 Rect 为它们制作精美的动画（感谢 mybringback）：

`canvas.drawBitmap(bitmap, rectSrc, rectDest, null);`

但是，我担心这样做最终会增长到大于堆大小。

但是，还有另一种方法。通过分离每个图像（bear1.png、bear2.png 直到 bear16.png），我还可以通过以下方式使用这些精灵创建动画：

`Bitmap bitmap = Bitmap.decodeResource(context.getResources(), context.getResources().getIdentifier("bear" + index, "drawable", "com.example.game"));`

然后将其调用到画布：

`canvas.drawBitmap(bitmap, bitmapX, bitmapY, null);`

现在也可以正常工作。当然，它大大减少了我的堆大小，因为我一次只使用 1 个图像。但是，因为好吧.. 因为，我几乎总是会想起 Bitmap.decodeResource()，我担心一次将许多动画放在一起时，可能会导致明显的延迟。

简而言之：
- Spritesheets：增加堆大小（最终可能导致 OutOfMemory 错误），但性能更好
- 不同图像文件上的 Sprites：减小堆大小，但可能会影响性能

我不完全确定使用哪种方法。如果我使用第二种方法（不同图像文件上的精灵）实际上可以吗？还是只使用精灵表会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:16:54.277

没关系，我只是回答了我自己的问题。似乎 `Bitmap.decodeResource()` 每次迭代的渲染都滞后于整个画布，而不是渲染实际的 spritesheets 并使用`Rect`. 性能方面，如果在画布上遇到太多延迟，除了使用`inSampleSize`或使用`GLSurfaceView`.

# java - 关于 ThreadLocal 的烦人 tomcat 警告

> ID：14544995
> 
> 赞同：2
> 
> 时间：2013-01-27T06:22:19.793
> 
> 标签：java, multithreading, tomcat, classloader

我一直想问这个问题。有没有人看到以下问题，

```
Thread.currentThread().getContextClassLoader().getResourceAsStream(CONFIG_FILE); 
```

我使用此输入流将属性文件加载到运行良好的 java.util.Properties 对象中。

我不确定的是为什么 Tomcat 6 有这个问题，我没有保留类加载器参考，所以为什么它会给出警告......

> 严重：Web 应用程序 [/example] 创建了一个 ThreadLocal，其键类型为 [com.sun.xml.bind.v2.ClassFactory$1]（值 [com.sun.xml.bind.v2.ClassFactory$1@4ae1da40]）和[java.util.WeakHashMap] 类型的值（值 [{class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@31bfc628}]）但在 Web 应用程序停止时未能将其删除。这很可能造成内存泄漏。2013 年 1 月 27 日上午 6:18:34 org.apache.catalina.startup.ExpandWar deleteDir

这不是世界上最大的问题，因为我不会热重新部署我的应用程序，但是我想知道我是否在做不合适的事情。

非常感谢，

Ĵ