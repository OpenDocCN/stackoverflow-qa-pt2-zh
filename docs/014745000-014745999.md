# StackOverflow 问答 14745000-14745999

# c - 纯 C 中的 Win32 COM 编程

> ID：14745001
> 
> 赞同：5
> 
> 时间：2013-02-07T06:28:28.387
> 
> 标签：c, winapi, com

我有一个编程项目，它需要访问一些较低级别的 Windows API（特别是 WASAPI）。我对 C#、Java 和 PHP 等高级编程语言相当有经验，而且我对 C/C++ 知之甚少。

我想在这个项目中使用 C（不是 C++），因为[C++ 有点吓人](http://yosefk.com/c++fqa/picture.html#fqa-6.6)。在 Visual Studio 中更改我的项目的 C/C++ 设置以编译为 C 代码后，我注意到任何调用`__uuidof`都不起作用，因为它们是 C++ 特定的。

我的问题是双重的：

1.  **是否可以在纯 C 中编写使用 COM 的 Win32 程序**，以及
2.  **如果是这样，是否应该避免使用纯 C？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:14:52.633

1.  是的，可以使用编写使用 COM 的纯 C 程序，实际上这是 10-15 年前的常见做法。

2.  使用 C 并没有帮自己一个忙（正如您已经注意到的那样）。例如，ATL 在你做 COM 时提供了很多帮助，可以帮助你避免常见的错误。

如果我是你，我会选择 C++，即使一开始的门槛可能会更高一些。如果你没有这方面的书，也可以买一本。在网上可以找到很多示例，但最好有一些手把手指导你的东西，因为无论你使用 C 还是 C++，COM 编程都不适合胆小的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T09:05:35.923

COM 在 C 部分之外使用了相当小的 C++ 子集，并且不需要使用许多“可怕”的项目，例如：

*   例外——如果你没有把它们弄对，这些真的会在 C++ 中咬你（你需要真正购买[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)习语，如果你习惯于更传统的 C/Win32 编码，这可能需要习惯）；但异常根本不是 COM 的一部分：COM 对所有错误处理都使用返回码。如果需要，有一些包装器和编译器扩展可以将 COM 的返回代码转换为 C++ 异常，但它是可选的。

*   类层次结构和继承——继承也不是 COM 本身的真正组成部分，除了所有 COM 接口都派生自（或从方法开始）IUnknown 的事实。但是您不需要了解有关多重虚拟继承的任何知识即可*使用*COM。其中一些对于了解您是否自己*实现*COM 对象非常有用，但不仅仅是使用它。（例如，使用 C++ 多重继承是实现公开多个接口的 COM 对象的一种非常常见的方法；但这不是唯一的方法。）

*   模板 - 同样，不是 COM 的一部分，但有几个库 - 例如。MFC 和 ATL - 使用模板使 COM 更易于使用。对于像 CComPtr 这样的智能指针类来说尤其如此，它会为你处理一些引用计数，让你的代码专注于做真正有趣的事情，而不是把它打包成家务。

COM 和 C++ 之间的主要联系是 Windows 上的所有 C++ 编译器将以完全符合 COM 要求的方式在内存中布置 C++ 对象。这使您可以像使用 C++ 对象一样使用 COM 对象，这使得代码的冗长程度大大降低，因为语言/编译器正在为您处理一些非常简单但冗长的东西。

因此，不要在 C 中执行以下操作（逐步通过 vtable 并显式传递此参数）：

```
pUnk->lpVtbl->SomeMethod(pUnk, 42); 
```

您可以在 C++ 中执行以下操作：

```
pUnk->SomeMethod(42); 
```

您真的不想在每次调用 COM 时都键入 ->lpVtbl 并确保传递正确的“this”参数（剪切和粘贴时要小心！），对吗？

我的建议是找一本好的 COM 书——《Inside COM》是一本好书——然后开始使用你熟悉的 C++ 子集。一旦您知道如何使用“原始”COM 指针，并自己使用 QI、AddRef 等，那么也许您可以使用使用模板为您做一些簿记的帮助程序库。决定使用将 COM 错误映射到 C++ 异常的包装器是一个更大的跳跃，因为您需要首先编写异常安全的 C++ 代码，因此需要首先了解这些问题的各种问题。但是我想不出任何好的理由——除了纯粹的好奇心——回去使用纯 C 中的 COM。

# ios - 在 UIKit 或 CoreText 中访问 OpenType 功能

> ID：14745002
> 
> 赞同：7
> 
> 时间：2013-02-07T06:28:45.113
> 
> 标签：ios, uikit, core-text

我正在使用 OpenType(.otf) 格式的自定义字体，并希望使用该字体的一些[OpenType 功能](http://en.wikipedia.org/wiki/OpenType_feature_tag_list#OpenType_typographic_features)。

如何使用 UIKit 或 CoreText 完成此任务？我显然更喜欢 UIKit，但看看[UIFont](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)，选项非常有限。

似乎完全没有关于 iOS 上 OpenType 支持的文档，除了可以使用字体格式。

相关阅读：Microsoft[对 OpenType 功能的参考](http://www.microsoft.com/typography/otspec/featurelist.htm)，以及一些关于[浏览器如何开始提供 OpenType 功能支持的](http://www.typotheque.com/articles/opentype_features_in_web_browsers)信息。虽然这个问题是为了在 iOS 上原生渲染具有 OpenType 功能的字体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-13T19:24:35.840

Since all I'm hearing are crickets in this dark and lonesome Core Text place, I thought I'd post the answer I found on my own.

The answer is UIKit does not support the setting of OpenType features within its framework(at the time of writing), you have to drop down to Core Text to do it, and luckily they do have an API that exposes additional font features.

I won't go into detail about using Core Text to draw text, but the relevant idea is you will need to get a `CTFontDescriptorRef` that defines all the attributes of the font that will be used to draw your text.

**Sample Code:**

```
CTFontDescriptorRef fontDescriptorNoFeatures = CTFontDescriptorCreateWithNameAndSize((__bridge CFStringRef)self.font.fontName, pointSize);

// Set up OpenType Attributes
CFAllocatorRef defaultAllocator = CFAllocatorGetDefault();

int numberSpacing = kNumberSpacingType;
int numberSpacingType = kMonospacedNumbersSelector;

CFNumberRef numberSpacingId = CFNumberCreate(defaultAllocator, kCFNumberIntType, &numberSpacing);
CFNumberRef monospacedNumbersSelector = CFNumberCreate(defaultAllocator, kCFNumberIntType, &numberSpacingType);

CTFontDescriptorRef fontDescriptor = CTFontDescriptorCreateCopyWithFeature(fontDescriptorNoFeatures, numberSpacingId, monospacedNumbersSelector);

CFRelease(fontDescriptorNoFeatures);
CFRelease(numberSpacingId);
CFRelease(monospacedNumbersSelector); 
```

The main thing I am doing here is making a copy, using [`CTFontDescriptorCreateCopyWithFeature()`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/CTFontDescriptorRef/Reference/reference.html#//apple_ref/c/func/CTFontDescriptorCreateCopyWithFeature), of the normal font descriptor with an additional feature, in OpenType it is called "Tabular Figures", but in Core Text you would access this feature by using the number spacing feature (`kNumberSpacingType`), and set the value for the appropriate enum defined in **`<CoreText/SFNTLayoutTypes.h>`**.

For the number spacing feature the enum values(for some reason they call them selectors!?!) are:

```
enum {
  kMonospacedNumbersSelector    = 0,
  kProportionalNumbersSelector  = 1,
  kThirdWidthNumbersSelector    = 2,
  kQuarterWidthNumbersSelector  = 3
}; 
```

So the trick is there isn't a direct one-to-one mapping of OpenType to CoreText features, but it appears they all are there, you'll just need to go through the pain of identifying the feature by looking through the constants defined in **`<CoreText/SFNTLayoutTypes.h>`**.

The rest of the pain is now you have to draw the text with this font in Core Text, instead of a higher level view, but there are lots of references out there for doing that.

# actionscript-3 - Flex中的菜单栏分隔符？

> ID：14745008
> 
> 赞同：0
> 
> 时间：2013-02-07T06:29:09.403
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

在我的 Flex 应用程序中，定义 Grid 中的菜单栏。

如何为每个项目做分隔符？

如何扩展（特定大小）整个窗口的菜单栏（即或 chrome）？

实际上这是我的示例代码。

```
<Canvas id="canvas_afterLogin" width="100%" visible="false">
        <Grid width="100%">
           <GridRow id="header1" width="100%" horizontalAlign="center">

               <GridItem horizontalAlign="left" width="100%">
                 <Image source="assets/sitsLogo.png" width="60" height="60"/>
             </GridItem>

               <GridItem width="100%">
                     <MenuBar id="myMenuBar0" width="100%"
                             borderColor="#C8DCF5" color="#000000"
                             cornerRadius="0" dataProvider="{xml}"
                             fontFamily="Arial" fontSize="14" fontStyle="normal"
                             fontWeight="normal" itemClick="myMenuBar_itemClickHandler(event)"
                             labelField="@label" themeColor="#06FC8B"/>
                </GridItem>
                <GridItem width="100%" horizontalAlign="right">
                    <Button height="22" label="Logout" click="logoutUser(event)"
                            color="#000000" fontSize="12" themeColor="#B0D2D4"/>
                </GridItem>
           </GridRow>
      </Grid>
    </Canvas> 
```

和 dataProvider`xml`是

```
<XMLList id="xml">
    <menuitem label="Home"/>        
    <menuitem label="Contacts">         
        <menuitem label="Find"/>
    </menuitem>
                   <menuitem label="Profile">
    </menuitem>         
    <menuitem label="Messages">
        <menuitem label="DetailsSearch"/>   
    </menuitem>         
    <menuitem label="Classes">
        <menuitem label="LiveView"/>
    </menuitem>         
    <menuitem label="Reports">
        <menuitem label="Money_Form"/>
    </menuitem>     
    <menuitem label="Money" color="#112233">
        <menuitem label="Receive_Founds"/>
    </menuitem>     
    <menuitem label="Confilcts">
        <menuitem label="Myconflicts"/>         
    </menuitem>         
    <menuitem label="Courses">
        <menuitem label=""/>
    </menuitem> 
    <menuitem label="eC9 Deck">
        <menuitem label="Contact_Us"/>
    </menuitem>
</XMLList> 
```

请帮帮我...如何为每个菜单指定分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:12:59.707

采用

```
<menuitem type="separator"/> 
```

有关更多详细信息，请参阅[文档](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7b1e.html#WS2db454920e96a9e51e63e3d11c0bf69084-7b23)。

# sencha-touch - Sencha Touch Lists 高度拉伸至 100%

> ID：14745010
> 
> 赞同：0
> 
> 时间：2013-02-07T06:29:10.400
> 
> 标签：sencha-touch, sencha-touch-2

我的父容器有一个 vbox 布局，有 3 个项目，一个包含静态数据，两个其他列表。我希望我的列表的高度扩展到它们内部内容大小的 100%，我在[这里](http://www.senchafiddle.com/#MfLkR#O5P4M)有一个例子。

如您所见，当您有数据并准备好提供服务时，这非常有用，但在我的情况下，我需要在回调中获取两个列表的数据并为每个列表设置相应的存储。问题是如果我不指定高度，列表将被折叠并且不会显示列表数据。我已经尝试过“适合”并在回调中刷新（）视图，但似乎没有任何效果。有任何想法吗？

这是我在控制器中填充商店的方法：

```
function buildOrgView (record, view) {
    var managerUid = record.get('managerUid');
    var uid = record.get('uid');
    //Get data for org view
    if (managerUid) {
        var managerStore = new People.store.EmployeeDetails();//Ext.data.StoreManager.lookup('mgrDetailsStore');
        managerStore.getProxy().setUrl(People.app.userDetailsUrl + managerUid);
        managerStore.load({
            callback: function (records) {
                var peerStore = new People.store.OrgMembers();
                peerStore.getProxy().setUrl(People.app.orgMembersUrl + managerUid);
                peerStore.load({
                    callback: function (recs) {
                        Ext.each(recs, function(item, idx, allItems) {
                           if (item.get('fullName') == record.get('fullName')) {
                               peerStore.remove(item);
                           }
                        });
                        view.getPeersList().setStore(peerStore);

                        var drStore = new People.store.OrgMembers();
                        drStore.getProxy().setUrl(People.app.orgMembersUrl + uid);
                        drStore.load({
                            callback: function (recs) {
                                view.getDirectReportsList().setStore(drStore);
                            }
                        });
                    }
                });
            }
        });
    }
} 
```

这是我要填充的 List 组件：

```
Ext.define('People.view.people.OrgList', {
    extend: 'Ext.List',
    xtype: 'orgList',
    config: {
        cls: 'peopleInfo',
        store: 'OrgMembers',
//        scrollable: true,
//        height: 300,
        itemTpl: [
            "<div class='listView small'>",
            "   <tpl if='workforceID != undefined'>",
            "       <tpl if='workforceID == \"phind\"'>",
            "           <div class='avatar notFound user'></div>",
            "       <tpl else>",
            "           <div class='avatar'></div>",
            "       </tpl>",
            "   </tpl>",
            "   <ul class='data'>",
            "      <li><h3>{fullName}</h3></li>",
            "   </ul>",
            "</div>"
        ],
        listeners: [
            {
                fn: 'onPersonTap',
                event: 'itemtap'
            }
        ]
    },
    onPersonTap: function (dataview, newValue, oldValue, eOpts) {
        debugger;
        this.fireEvent('persontap', this, newValue, oldValue, eOpts);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:26:22.550

我发现解决此问题的最佳方法是将列表中的元素数量乘以我在配置中定义的每个元素的高度，然后添加标题的高度（在我的情况下为 27px）。虽然这会产生预期的效果，但它有点笨拙（适合布局应该真的有效）。

```
view.getPeersList().setHeight(recs.length*50 + 27); 
```

我能够在 Sencha Touch 2.1.1 中使用这两个参数来修复项目的高度：

```
itemHeight: 50,
variableHeights: false, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:43:47.213

您可以在设置商店后设置列表的最小高度，如下所示：

```
list.setMinHeight(Ext.Viewport.getWindowHeight()/2); 
```

或者您可以在`initialize`列表视图的功能中执行此操作。

# c++ - 当字符串为空时结束 for 循环

> ID：14745017
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:29:44.580
> 
> 标签：c++

所以我有一个调用字符串的函数，我将字符串转换为一个 int 数组。

```
for (i = 0; ; i++)
{
    areaIntA[i] = area[i] - '0';
    areaCounter++;
} 
```

在我拥有它之前是 for(i = 0; i < 5; i++) 因为 5 是我的 int 数组的最大限制，但我遇到了问题。当字符串没有更多值时，如何使条件结束 for 循环，因为有时它可能会调用“50”或“540”或“1”或“1930”等...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T06:31:54.240

开关（字符串类型）

案例`std::string`：

```
for (i = 0; i<area.length() ; i++)
{ 
```

案例`char*`：

```
for (i = 0; area[i] != '\0' ; i++)
{ 
```

案例固定长度`char[]`：

```
for (i = 0; i< sizeof(area)/sizeof(area[0]) ; i++)
{ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:32:25.140

```
for (i = 0; area[i]!='\0'; i++)
{
    areaIntA[i] = area[i] - '0';
    areaCounter++;
} 
```

# jsp - Tomcat 不监听网络驱动器

> ID：14745020
> 
> 赞同：0
> 
> 时间：2013-02-07T06:29:50.720
> 
> 标签：jsp, tomcat

在 tomcat 7 中，我正在尝试访问**NETWORK DRIVE**中的文件，并且网络与我的系统映射，Tomcat 没有侦听远程文件访问，我可以知道它背后的原因是什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T06:39:18.673

`network derives`如果您的系统受以下保护，您将无法访问`Firewall`

你有两种选择来实现这一点，

*   禁用`Firwall`
*   不使用tomcat可执行安装`archive formats(zip)`

# python - 如何将数据框字符串列拆分为两列？

> ID：14745022
> 
> 赞同：290
> 
> 时间：2013-02-07T06:30:11.817
> 
> 标签：python, dataframe, pandas

我有一个包含一个（字符串）列的数据框，我想将其拆分为两个（字符串）列，一个列标题为 ' `fips'`，另一个`'row'`

我的数据框`df`如下所示：

```
 row
0    00000 UNITED STATES
1    01000 ALABAMA
2    01001 Autauga County, AL
3    01003 Baldwin County, AL
4    01005 Barbour County, AL 
```

我不知道如何使用`df.row.str[:]`来实现拆分行单元格的目标。我可以`df['fips'] = hello`用来添加一个新列并用`hello`. 有任何想法吗？

```
 fips       row
0    00000 UNITED STATES
1    01000 ALABAMA 
2    01001 Autauga County, AL
3    01003 Baldwin County, AL
4    01005 Barbour County, AL 
```

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2016-09-06T22:52:23.940

# TL;DR 版本：

对于简单的情况：

*   我有一个带分隔符的文本列，我想要两列

最简单的解决方案是：

```
df[['A', 'B']] = df['AB'].str.split(' ', 1, expand=True) 
```

`expand=True`如果您的字符串具有不均匀的拆分数量并且您想要`None`替换缺失值，则必须使用。

请注意，在任何一种情况下，该`.tolist()`方法都不是必需的。也不是`zip()`。

# 详细地：

[Andy Hayden 的解决方案](https://stackoverflow.com/a/21296915/1273938)最出色地展示了该[`str.extract()`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html)方法的强大功能。

但是对于在已知分隔符上的简单拆分（例如，用破折号拆分或按空格拆分），该[`.str.split()`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.split.html)方法就足够了¹。它对一列（系列）字符串进行操作，并返回一列（系列）列表：

```
>>> import pandas as pd
>>> df = pd.DataFrame({'AB': ['A1-B1', 'A2-B2']})
>>> df

      AB
0  A1-B1
1  A2-B2
>>> df['AB_split'] = df['AB'].str.split('-')
>>> df

      AB  AB_split
0  A1-B1  [A1, B1]
1  A2-B2  [A2, B2] 
```

[1：如果您不确定前两个参数的`.str.split()`作用，我推荐使用[该方法的纯 Python 版本的](https://docs.python.org/3.6/library/stdtypes.html#str.split)文档。]

但是你怎么去：

*   包含两个元素列表的列

到：

*   两列，每列包含列表的相应元素？

好吧，我们需要仔细看看`.str`列的属性。

它是一个神奇的对象，用于收集将列中的每个元素视为字符串的方法，然后尽可能高效地在每个元素中应用相应的方法：

```
>>> upper_lower_df = pd.DataFrame({"U": ["A", "B", "C"]})
>>> upper_lower_df

   U
0  A
1  B
2  C
>>> upper_lower_df["L"] = upper_lower_df["U"].str.lower()
>>> upper_lower_df

   U  L
0  A  a
1  B  b
2  C  c 
```

但它也有一个“索引”接口，用于通过索引获取字符串的每个元素：

```
>>> df['AB'].str[0]

0    A
1    A
Name: AB, dtype: object

>>> df['AB'].str[1]

0    1
1    2
Name: AB, dtype: object 
```

当然，这个索引接口`.str`并不真正关心它索引的每个元素是否实际上是一个字符串，只要它可以被索引，所以：

```
>>> df['AB'].str.split('-', 1).str[0]

0    A1
1    A2
Name: AB, dtype: object

>>> df['AB'].str.split('-', 1).str[1]

0    B1
1    B2
Name: AB, dtype: object 
```

然后，利用 Python 元组对可迭代对象进行解包是一件简单的事情

```
>>> df['A'], df['B'] = df['AB'].str.split('-', 1).str
>>> df

      AB  AB_split   A   B
0  A1-B1  [A1, B1]  A1  B1
1  A2-B2  [A2, B2]  A2  B2 
```

当然，从拆分一列字符串中获取 DataFrame 非常有用，该`.str.split()`方法可以使用`expand=True`参数为您完成：

```
>>> df['AB'].str.split('-', 1, expand=True)

    0   1
0  A1  B1
1  A2  B2 
```

因此，完成我们想要的另一种方法是：

```
>>> df = df[['AB']]
>>> df

      AB
0  A1-B1
1  A2-B2

>>> df.join(df['AB'].str.split('-', 1, expand=True).rename(columns={0:'A', 1:'B'}))

      AB   A   B
0  A1-B1  A1  B1
1  A2-B2  A2  B2 
```

该`expand=True`版本虽然更长，但与元组解包方法相比具有明显的优势。元组拆包不能很好地处理不同长度的拆分：

```
>>> df = pd.DataFrame({'AB': ['A1-B1', 'A2-B2', 'A3-B3-C3']})
>>> df
         AB
0     A1-B1
1     A2-B2
2  A3-B3-C3
>>> df['A'], df['B'], df['C'] = df['AB'].str.split('-')
Traceback (most recent call last):
  [...]    
ValueError: Length of values does not match length of index
>>> 
```

但是`expand=True`通过放置`None`在没有足够“拆分”的列中来很好地处理它：

```
>>> df.join(
...     df['AB'].str.split('-', expand=True).rename(
...         columns={0:'A', 1:'B', 2:'C'}
...     )
... )
         AB   A   B     C
0     A1-B1  A1  B1  None
1     A2-B2  A2  B2  None
2  A3-B3-C3  A3  B3    C3 
```

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2013-02-07T07:03:46.033

可能有更好的方法，但这是一种方法：

```
 row
    0       00000 UNITED STATES
    1             01000 ALABAMA
    2  01001 Autauga County, AL
    3  01003 Baldwin County, AL
    4  01005 Barbour County, AL 
```

```
df = pd.DataFrame(df.row.str.split(' ',1).tolist(),
                                 columns = ['fips','row']) 
```

```
 fips                 row
0  00000       UNITED STATES
1  01000             ALABAMA
2  01001  Autauga County, AL
3  01003  Baldwin County, AL
4  01005  Barbour County, AL 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2014-01-23T00:20:07.503

您可以使用正则表达式模式非常巧妙地[提取](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html)不同的部分：

```
In [11]: df.row.str.extract('(?P<fips>\d{5})((?P<state>[A-Z ]*$)|(?P<county>.*?), (?P<state_code>[A-Z]{2}$))')
Out[11]: 
    fips                    1           state           county state_code
0  00000        UNITED STATES   UNITED STATES              NaN        NaN
1  01000              ALABAMA         ALABAMA              NaN        NaN
2  01001   Autauga County, AL             NaN   Autauga County         AL
3  01003   Baldwin County, AL             NaN   Baldwin County         AL
4  01005   Barbour County, AL             NaN   Barbour County         AL

[5 rows x 5 columns] 
```

* * *

解释有点长的正则表达式：

```
(?P<fips>\d{5}) 
```

*   匹配五个数字 ( `\d`) 并为其命名`"fips"`。

下一部分：

```
((?P<state>[A-Z ]*$)|(?P<county>.*?), (?P<state_code>[A-Z]{2}$)) 
```

是否 ( `|`) 做以下两件事之一：

```
(?P<state>[A-Z ]*$) 
```

*   匹配任意数量`*`的 ( ) 大写字母或空格 ( `[A-Z ]`) 并将其命名`"state"`在字符串 ( `$`) 的结尾之前，

或者

```
(?P<county>.*?), (?P<state_code>[A-Z]{2}$)) 
```

*   然后匹配任何其他 ( `.*`)
*   然后是逗号和空格
*   `state_code`匹配字符串末尾的两位数( `$`)。

*在示例中：*
*请注意，前两行命中“州”（将 NaN 留在县和 state_code 列中），而后三行命中县 state_code（将 NaN 留在州列中）。*

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2018-06-24T12:21:58.083

```
df[['fips', 'row']] = df['row'].str.split(' ', n=1, expand=True) 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2018-04-21T12:32:44.720

您可以将[`str.split`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.split.html)空格（默认分隔符）和参数`expand=True`用于`DataFrame`分配给新列：

```
df = pd.DataFrame({'row': ['00000 UNITED STATES', '01000 ALABAMA', 
                           '01001 Autauga County, AL', '01003 Baldwin County, AL', 
                           '01005 Barbour County, AL']})
print (df)
                        row
0       00000 UNITED STATES
1             01000 ALABAMA
2  01001 Autauga County, AL
3  01003 Baldwin County, AL
4  01005 Barbour County, AL

df[['a','b']] = df['row'].str.split(n=1, expand=True)
print (df)
                        row      a                   b
0       00000 UNITED STATES  00000       UNITED STATES
1             01000 ALABAMA  01000             ALABAMA
2  01001 Autauga County, AL  01001  Autauga County, AL
3  01003 Baldwin County, AL  01003  Baldwin County, AL
4  01005 Barbour County, AL  01005  Barbour County, AL 
```

修改如果需要删除原始列[`DataFrame.pop`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pop.html)

```
df[['a','b']] = df.pop('row').str.split(n=1, expand=True)
print (df)
       a                   b
0  00000       UNITED STATES
1  01000             ALABAMA
2  01001  Autauga County, AL
3  01003  Baldwin County, AL
4  01005  Barbour County, AL 
```

什么是一样的：

```
df[['a','b']] = df['row'].str.split(n=1, expand=True)
df = df.drop('row', axis=1)
print (df)

       a                   b
0  00000       UNITED STATES
1  01000             ALABAMA
2  01001  Autauga County, AL
3  01003  Baldwin County, AL
4  01005  Barbour County, AL 
```

* * *

如果得到错误：

```
#remove n=1 for split by all whitespaces
df[['a','b']] = df['row'].str.split(expand=True) 
```

> ValueError：列的长度必须与键的长度相同

您可以检查并返回 4 列`DataFrame`，而不仅仅是 2：

```
print (df['row'].str.split(expand=True))
       0        1        2     3
0  00000   UNITED   STATES  None
1  01000  ALABAMA     None  None
2  01001  Autauga  County,    AL
3  01003  Baldwin  County,    AL
4  01005  Barbour  County,    AL 
```

然后解决方案是追加新`DataFrame`的[`join`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.join.html)：

```
df = pd.DataFrame({'row': ['00000 UNITED STATES', '01000 ALABAMA', 
                           '01001 Autauga County, AL', '01003 Baldwin County, AL', 
                           '01005 Barbour County, AL'],
                    'a':range(5)})
print (df)
   a                       row
0  0       00000 UNITED STATES
1  1             01000 ALABAMA
2  2  01001 Autauga County, AL
3  3  01003 Baldwin County, AL
4  4  01005 Barbour County, AL

df = df.join(df['row'].str.split(expand=True))
print (df)

   a                       row      0        1        2     3
0  0       00000 UNITED STATES  00000   UNITED   STATES  None
1  1             01000 ALABAMA  01000  ALABAMA     None  None
2  2  01001 Autauga County, AL  01001  Autauga  County,    AL
3  3  01003 Baldwin County, AL  01003  Baldwin  County,    AL
4  4  01005 Barbour County, AL  01005  Barbour  County,    AL 
```

删除原始列（如果还有其他列）：

```
df = df.join(df.pop('row').str.split(expand=True))
print (df)
   a      0        1        2     3
0  0  00000   UNITED   STATES  None
1  1  01000  ALABAMA     None  None
2  2  01001  Autauga  County,    AL
3  3  01003  Baldwin  County,    AL
4  4  01005  Barbour  County,    AL 
```

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2015-09-29T17:52:36.873

如果您不想创建新的数据框，或者您的数据框的列多于您要拆分的列，您可以：

```
df["flips"], df["row_name"] = zip(*df["row"].str.split().tolist())
del df["row"] 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-01-15T12:08:41.070

如果您想根据分隔符将字符串拆分为多于两列，您可以省略“最大拆分”参数。
您可以使用：

```
df['column_name'].str.split('/', expand=True) 
```

这将自动创建与任何初始字符串中包含的最大字段数一样多的列。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-01-22T07:52:50.677

很惊讶我还没有看到这个。如果你只需要**两个**拆分，我强烈推荐。. .

# **[`Series.str.partition`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.partition.html)**

`partition`对分隔符执行一次拆分，通常性能非常好。

```
df['row'].str.partition(' ')[[0, 2]]

       0                   2
0  00000       UNITED STATES
1  01000             ALABAMA
2  01001  Autauga County, AL
3  01003  Baldwin County, AL
4  01005  Barbour County, AL 
```

如果您需要重命名行，

```
df['row'].str.partition(' ')[[0, 2]].rename({0: 'fips', 2: 'row'}, axis=1)

    fips                 row
0  00000       UNITED STATES
1  01000             ALABAMA
2  01001  Autauga County, AL
3  01003  Baldwin County, AL
4  01005  Barbour County, AL 
```

如果您需要将其加入到原始状态，请使用`join`或`concat`：

```
df.join(df['row'].str.partition(' ')[[0, 2]]) 
```

```
pd.concat([df, df['row'].str.partition(' ')[[0, 2]]], axis=1)

                        row      0                   2
0       00000 UNITED STATES  00000       UNITED STATES
1             01000 ALABAMA  01000             ALABAMA
2  01001 Autauga County, AL  01001  Autauga County, AL
3  01003 Baldwin County, AL  01003  Baldwin County, AL
4  01005 Barbour County, AL  01005  Barbour County, AL 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-10-31T14:32:08.843

用于`df.assign`创建新的 df。见[https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.assign.html](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.assign.html)

```
split = df_selected['name'].str.split(',', 1, expand=True)
df_split = df_selected.assign(first_name=split[0], last_name=split[1])
df_split.drop('name', 1, inplace=True) 
```

或以方法链形式：

```
df_split = (df_selected
            .assign(list_col=lambda df: df['name'].str.split(',', 1, expand=False),
                    first_name=lambda df: df.list_col.str[0],
                    last_name=lambda df: df.list_col.str[1])
            .drop(columns=['list_col'])) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-03T17:18:22.073

我看到没有人使用切片方法，所以我把我的 2 美分放在这里。

```
df["<col_name>"].str.slice(stop=5)
df["<col_name>"].str.slice(start=6) 
```

此方法将创建两个新列。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-03T13:45:06.393

我更喜欢导出对应的pandas系列（即我需要的列），使用**apply**函数将列内容拆分成多个系列，然后将生成的列**加入**到现有的DataFrame中。当然，应该删除源列。

例如

```
 col1 = df["<col_name>"].apply(<function>)
 col2 = ...
 df = df.join(col1.to_frame(name="<name1>"))
 df = df.join(col2.toframe(name="<name2>"))
 df = df.drop(["<col_name>"], axis=1) 
```

拆分两个单词字符串函数应该是这样的：

```
lambda x: x.split(" ")[0] # for the first element
lambda x: x.split(" ")[-1] # for the last element 
```

# android - 如何打印由android的query（）方法执行的查询

> ID：14745027
> 
> 赞同：8
> 
> 时间：2013-02-07T06:30:42.663
> 
> 标签：android, sqlite

我们向android的query()方法传递了很多参数。Android 通过提供查询方法简化了我们的工作。有什么办法可以让我打印出 android 将从这个查询方法参数中形成的 sql 查询，该查询方法参数由 android 创建并发送到 sqlite。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T12:01:43.903

根据之前的帖子，我已经尝试并得到了以下解决方案，以便在日志中打印查询字符串。

**的使用`buildQueryString`方法`SQLiteQueryBuilder`。它采用与方法采用的几乎相同的参数`query()`............**

```
String sqlQry = SQLiteQueryBuilder.buildQueryString(false,TABLE_NAME, null, COLUMN_NAME_PATIENTID +"="+ patientID, null, null, COLUMN_NAME_PATIENTFIRSTNAME, null);

Log.i(TAG, sqlQry);

cursor = db.query(TABLE_NAME, null, COLUMN_NAME_PATIENTID +"="+ patientID, null, null, null, COLUMN_NAME_PATIENTFIRSTNAME); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-11T21:58:36.480

对于它的价值，如果您在调试器下运行，您可以查看私有成员变量`mQuery`，它显示了在该游标上执行的确切 SQL 查询 - 它很方便，可以按需使用，而无需处理任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:35:43.550

由于查询方法是游标类型的，我不确定它是否会被打印。如果要调试任何查询，可以使用 EXPLAIN QUERY PLAN 关键字和查询或使用 SQLiteQueryBuilder() 或使用 rawQuery() 方法简单地运行 SQL 查询。您可以从以下位置获取参考：

[http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html)

[http://www.sqlite.org/eqp.html](http://www.sqlite.org/eqp.html)

# asp.net-mvc - 带有字典的下拉列表 不适用于所选值

> ID：14745028
> 
> 赞同：11
> 
> 时间：2013-02-07T06:31:01.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试以这种方式绑定 MVC3 中的下拉列表。

模型

```
public static Dictionary<string, string> SexPreference()
{
      var dict = new Dictionary<string, string>();
      dict.Add("Straight", "S");
      dict.Add("Gay", "G");
      dict.Add("Bisexual", "BISEX");
      dict.Add("Bicurious", "BICUR");
      return dict;
} 
```

控制器

```
ViewBag.SexPreference = MemberHandler.SexPreference(); 
```

看法

```
@{
var itemsSexPreference = new SelectList(ViewBag.SexPreference, "Value", "Key", Model.sexpreference);
}

@Html.DropDownListFor(m => m.sexpreference, @itemsSexPreference) 
```

下拉菜单没有选择选定的值，不知道为什么。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T07:00:05.247

`ViewBag.SexPreference`当你有模型时，你为什么要设置？忘记这个 ViewBag。此外，您应该有 2 个属性来制作下拉列表：一个标量类型属性用于保存所选值，一个集合属性用于保存所选值列表。现在您似乎只使用一个并试图将 DropDown 绑定到一个显然没有任何意义的集合属性。

通过使用视图模型以正确的方式进行操作：

```
public class MyViewModel
{
    public string SelectedSexPreference { get; set; }
    public Dictionary<string, string> SexPreferences { get; set; }
} 
```

您将在控制器操作中填充并传递给视图：

```
public ActionResult SomeAction()
{
    var model = new MyViewModel();

    // Set the value that you want to be preselected
    model.SelectedSexPreference = "S";

    // bind the available values
    model.SexPreferences = MemberHandler.SexPreference();

    return View(model);
} 
```

在你的视野内：

```
@model MyViewModel

@Html.DropDownListFor(
    m => m.SelectedSexPreference, 
    new SelectList(Model.SexPreferences, "Value", "Key")
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:40:06.893

Model.sexpreference 必须是以下值之一： Straight... 这将起作用：

```
public static Dictionary<string, string> SexPreference()
{
  var dict = new Dictionary<string, string>();
  dict.Add("S", "Straight");
  dict.Add("G", "Gay");
  dict.Add("BISEX", "Bisexual");
  dict.Add("BICUR", "Bicurious");
  return dict;
}

@{
    var itemsSexPreference = new SelectList(ViewBag.SexPreference, "Key", "Value", "S");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-08T18:53:59.037

我做了不同的事情。这整件事非常令人沮丧。

在控制器中执行以下操作：

```
var percentagesFromDb = _service1.GetPercentagesFromDb(parameters);
var percentages = percentagesFromDb.ToDictionary(percentage => percentage.someKey, 
                                                percentage => percentage.someValue);
ViewData["selectedPercentages"] = percentages; 
```

然后在模型中：

```
[Display(Name = "%")]
public string Percentage { get; set; }

private static Dictionary<string, string> GetPercentageList()
{
    return new Dictionary<string, string>
    {
        {"100", "100%"},
        {"90", "90%"},
        {"80", "80%"},
        {"70", "70%"},
        {"60", "60%"},
        {"50", "50%"},
        {"40", "40%"},
        {"30", "30%"},
        {"20", "20%"},
        {"10", "10%"}
    };
}

public SelectList GetSelectList(string selected, object selectedPercentages)
{
    var selectedDict = new Dictionary<string, string>();
    if (selectedPercentages != null)
        selectedDict = (Dictionary < string, string>) selectedPercentages;
    var selectedvalue = selectedDict.ContainsKey(selected) ? selectedDict[selected] : "100";
    Percentage = selectedvalue;
    return new SelectList(GetPercentageList(), "Key", "Value");
} 
```

最后在视图中：

```
<table class="table table-bordered table-striped">
    <thead>
    <tr>
        <th>@Html.LabelFor(m => m.Items, new {@class = "control-label"})</th>
        <th>@Html.LabelFor(m => m.Percentage, new {@class = "control-label"})</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var item in Model.Items)
    {
        <tr>
            <td>
                @item.Value
            </td>

            <td>
                @Html.DropDownListFor(m => m.Percentage,
                Model.GetSelectList(item.Key, ViewData["selectedPercentages"]),
                new {@class = "form-control", id = item.Key})
            </td>
        </tr>
    }
    </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-18T21:04:20.803

```
 @* @Html.DropDownListFor(x => x.GetAttribute_ID, new SelectList(Model.GetAttributes, "ID", "AttributeName", Model.GetAttribute_ID), "Select Attribute", new Dictionary<string, object>() { }) new { @id = "SelectAttribute", @name = "SelectAttribute[]", @class = "form-control dd" })*@
                        @Html.DropDownListFor(x => x.GetAttribute_ID, new SelectList(Model.GetAttributes, "ID", "AttributeName", Model.GetAttribute_ID), "Select Attribute", new Dictionary<string, object>() { { "class", "skill-level" }, { "data-val", "true" }, { "data-val-required", "Select skill level!"}}) 
```

# php - 致命错误：调用 sforceBaseclient.php 中的成员函数 __setSoapHeaders()

> ID：14745030
> 
> 赞同：0
> 
> 时间：2013-02-07T06:31:00.620
> 
> 标签：php, cakephp, salesforce

我收到此错误：

> 致命错误：在第 188 行的 D:\xampp\htdocs\fsc\app\Model\Datasource\soapclient\SforceBaseClient.php 中的非对象上调用成员函数 __setSoapHeaders()。

我正在使用 cakephp 框架。当我尝试使用 create() 方法在 salesforce 帐户列表中添加帐户数据时。这个 __setSoapHeaders() 在 setHeader() 函数中，它给出了这个错误。这个错误的解决方案是什么？

在 sforceBaseclient.php 中，有一个名为 setHeader() 的函数：

```
private function setHeaders($call=NULL) {
    **$this->sforce->__setSoapHeaders(null); [it gives above error.]**
      .
      .
    } 
```

当用户注册或在我们的网站上进行任何交易时，我想在 salesforce 帐户中添加帐户详细信息。所以我将以下代码放在我的 Account 模型中只是为了测试，可能会产生任何问题：

```
$mySforceConnection = new SforceEnterpriseClient();
$fieldsToUpdate = array(
  'AccountNumber'  => 123456,
  'BillingCity'    => 'Testcity',
  'BillingCountry' => 'Testcountry',
  'BirthDate'      => '27-04-1992'
);

$sObject = new stdClass();
$sObject->fields = $fieldsToUpdate;
$sObject->type = 'Account';

try {
  $CreateResponse = $mySforceConnection->create(array ($sObject),'Account');
} catch (Exception $e) {
  echo "<BR>Error Creating the Case! ";
  echo $e->faultstring;
  exit;
}

//To Make sure the case was created successfully.

if ($CreateResponse->success != 1) {
  echo "<BR>Error Creating the Account. ";
  print_r($CreateResponse->errors->message);
  exit;
} 
```

这个错误有什么解决办法？

最初调用 connect() 有代码：

```
public function connect() {
        if (empty($this->config['username']) || empty($this->config['password']) || empty($this->config['wsdl'])) {
        $this->error = "Your username-password-wsdl must all be set";
        $this->showError();
        return false;
        }
        $wsdl = APP.'model/datasource/soapclient/'.$this->config['wsdl'];
                 $wsdl = str_replace('\\','/',$wsdl);
                $mySforceConnection = new SforceEnterpriseClient();
        $mySforceConnection->createConnection($wsdl);
        $mySoapClient = $mySforceConnection->createConnection($wsdl);
                $mylogin = $mySforceConnection->login($this->config['username'], $this->config['password']);
               $this->client = $mySforceConnection;
        return $mySforceConnection;
            } 
```

在此函数中，您可以看到 createConnection 和 Login 被调用...其中有代码

```
public function createConnection($wsdl, $proxy=null) {
            $_SERVER['HTTP_USER_AGENT'] = 'Salesforce/PHPToolkit/1.0';
                $soapClientArray = null;
        if (phpversion() > '5.1.2') {
        $soapClientArray = array (
                'user_agent' => 'toolkit-php',            
                 'encoding' => 'utf-8',
                 'trace' => 1,
                'compression' => SOAP_COMPRESSION_ACCEPT | SOAP_COMPRESSION_GZIP
            );
        } else {
        $soapClientArray = array (
                 'user_agent' => 'toolkit-php',            
               'encoding' => 'utf-8',
                'trace' => 1
            );
        }
        if ($proxy != null) {
        $proxySettings = array();
            $proxySettings['proxy_host'] = $proxy->host;
        $proxySettings['proxy_port'] = $proxy->port; // Use an integer, not a string
        $proxySettings['proxy_login'] = $proxy->login; 
                 $proxySettings['proxy_password'] = $proxy->password;
        $soapClientArray = array_merge($soapClientArray, $proxySettings);
        }
        $this->sforce = new SoapClient($wsdl, $soapClientArray);
        return $this->sforce;
            } 
```

然后登录（）

```
public function login($username, $password) {
    $this->sforce->__setSoapHeaders(NULL);
    if ($this->callOptions != NULL) {
        $this->sforce->__setSoapHeaders(array($this->callOptions));
    }
    if ($this->loginScopeHeader != NULL) {
        $this->sforce->__setSoapHeaders(array($this->loginScopeHeader));
    }
    $result = $this->sforce->login(array (
             'username' => $username,
            'password' => $password
    ));
    $result = $result->result;
    $this->_setLoginHeader($result);
    return $result;
        } 
```

这段代码完美运行......现在正如我上面提到的，我正在尝试使用帐户模型中的创建方法添加记录..所以第一个创建方法调用它在名为 SforceEnterpriseClient.php 的类中

```
 public function create($sObjects, $type) {
               foreach ($sObjects as &$sobject) {
                 $sobject = new SoapVar($sobject, SOAP_ENC_OBJECT, $type, $this->namespace);
                }
                 $arg = $sObjects;
                return parent::_create(new SoapParam($arg, "sObjects"));
               } 
```

在这里你可以看到 __create 被称为 ehich 在 sorceBaseClient 类中......

```
protected function _create($arg) {
        $this->setHeaders("create");
       return $this->sforce->create($arg)->result;
        } 
```

这里首先调用 setHeader 函数....

```
private function setHeaders($call=NULL) {
       **$this->sforce->__setSoapHeaders(null);** // as I told this line gives error at this point..if I comment it below __setSoapHeaders() gives error.and if I comment that create() function gives error....
    $header_array = array (
    $this->sessionHeader
    );
    $header = $this->callOptions;
    if ($header != NULL) {
    array_push($header_array, $header);
    }
        if ($call == "create" ||
    $call == "merge" ||
    $call == "update" ||
    $call == "upsert"
    ) {
        $header = $this->assignmentRuleHeader;
        if ($header != NULL) {
            array_push($header_array, $header);
        }
    }
    if ($call == "login") {
        $header = $this->loginScopeHeader;
        if ($header != NULL) {
            array_push($header_array, $header);
        }
    }
    if ($call == "create" ||
    $call == "resetPassword" ||
    $call == "update" ||
    $call == "upsert"
    ) {
        $header = $this->emailHeader;
        if ($header != NULL) {
            array_push($header_array, $header);
        }
    }
    if ($call == "create" ||
    $call == "merge" ||
    $call == "query" ||
    $call == "retrieve" ||
    $call == "update" ||
    $call == "upsert"
    ) {
        $header = $this->mruHeader;
        if ($header != NULL) {
            array_push($header_array, $header);
        }
    }
    if ($call == "delete") {
        $header = $this->userTerritoryDeleteHeader;
        if ($header != NULL) {
            array_push($header_array, $header);
        }
    }
    if ($call == "query" ||
    $call == "queryMore" ||
    $call == "retrieve") {
        $header = $this->queryHeader;
        if ($header != NULL) {
            array_push($header_array, $header);
        }
    }
    $this->sforce->__setSoapHeaders($header_array);
       } 
```

我无法理解我的“创建”是从 __create 方法传递给 setHeader 函数的。如果我打印 $call（接收到的参数），它会打印“查询”……所以这是我追踪的代码……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T04:36:07.480

我遇到了同样的错误，发现原因是我的 wsdl xml 路径错误 - 您可能需要检查这一行：

$wsdl = APP.'model/datasource/soapclient/'.$this->config['wsdl'];

我现在已经很晚了，但这可能对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:39:57.453

有什么不清楚的？PHP 告诉你你在一个错误的对象上调用了一个函数。这正是它所说的：`__setSoapHeaders()`应该在 SoapClient 对象上调用，而在您的脚本中则不是。换句话说`$this->sforce`，不是 SoapClient 对象。查看/显示您的其他代码，了解原因。

# spring - 如何正确使用 Spring JPA clearAutomatically？

> ID：14745032
> 
> 赞同：0
> 
> 时间：2013-02-07T06:31:06.117
> 
> 标签：spring, spring-data-jpa

我在使用 Spring JPA 时遇到了一个问题。我想编写如下更新 SQL：

```
@Modifying
@Query("update Account as a set a.status = ?1 where a.id in (?2)")
public int updateStatus(ACCOUNT_STATUS status, List<Long> id); 
```

然后我写了一些测试来测试它。

```
private List<Account> createAccounts() {

    List<Account> accounts = new ArrayList<>();

    Account account1 = new Account();

    account1.setCaseNumber("999123");
    account1.setAccountNbr("888123");
    account1.setCaseType(CASE_TYPE.REGULAR);
    account1.setStatus(ACCOUNT_STATUS.NOT_USED);

    accountRepository.save(account1);

    Account account2 = new Account();

    account2.setCaseNumber("999456");
    account2.setAccountNbr("888456");
    account2.setCaseType(CASE_TYPE.REGULAR);
    account2.setStatus(ACCOUNT_STATUS.NOT_USED);

    accountRepository.save(account2);

    Account account3 = new Account();

    account3.setCaseNumber("999789");
    account3.setAccountNbr("888789");
    account3.setCaseType(CASE_TYPE.DISASTER);
    account3.setStatus(ACCOUNT_STATUS.NOT_USED);

    accountRepository.save(account3);

    accounts.add(account1);
    accounts.add(account2);
    accounts.add(account3);

    return accounts;
}

@Test
public void testUpdateAccountStatus() {

    List<Long> ids = new ArrayList<>();

    List<Account> accounts = createAccounts();

    for (Account account : accounts) {
        ids.add(account.getId());
    }

    int count = accountRepository.updateStatus(ACCOUNT_STATUS.USED, ids);

    Assert.assertEquals(ids.size(), count);

    for (Long id  : ids) {
        Account account = accountRepository.findOne(id);
        Assert.assertEquals(ACCOUNT_STATUS.USED, account.getStatus());
    }
} 
```

测试失败，因为状态没有改变。但实际上更新 SQL 效果很好。帐户状态已更改。

可以通过两种方式通过测试。如果我将 accountRepository.findOne() 调用到数据库中的现有 Account （这里，在测试代码中，所有 Account 记录都在测试开始之前插入，请参见 createAccounts 方法）

或者，如果我添加@Modifying(clearAutomatically=false)，一切看起来都不错。

我在 Spring 网站上检查了有关 clearAutomatically 的文档。但我仍然无法理解我的代码行为。

我的 Spring-JPA 版本是 1.1.0，它已将 clearAutomatically 默认值更改为 true。

有没有人对 Spring JPA 了解太多？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T08:56:43.320

该属性的默认值可能在您使用后发生了变化。

请参阅他们似乎仍然存在的文档问题：[https ://jira.springsource.org/browse/DATAJPA-305](https://jira.springsource.org/browse/DATAJPA-305)

# wpf - 在 WPF MVVM 应用程序中使用多个 IOC

> ID：14745042
> 
> 赞同：0
> 
> 时间：2013-02-07T06:32:13.983
> 
> 标签：wpf, mvvm, inversion-of-control, mef, extensible

我正在使用 MVVMlight 工具包开发 MVVM WPF 应用程序。

它带有 SimpleIoc 容器，主要用于设计时/运行时分离（如果我错了，请纠正我）。

我的问题是除此之外它还有什么作用吗？

我需要 IOC 用于程序的其他部分，很可能我会使用 Ninject 之类的东西。

也很可能使其可扩展我将使用 MEF。

那么应用程序中就会有 3 个独立的 IOC 事物（来自 mvvmlight、Ninject 和 MEF 的 SimpleIoc）。这是可行和必要的吗？

一个可以做另外两个的工作，或者我真的需要他们三个来覆盖不同的领域。

有什么最佳实践建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:52:55.337

对棱镜的另一票。对于 Prism 中的容器，我倾向于只选择一个 IoC 容器——我通常选择 MEF。它适用于他们所说的所有事情（可发现性、插件架构、重组等）。我用它来连接我的应用程序，将视图模型绑定到视图，并让区域导航为我实例化事物。

Unity 更好的一个领域是动态对象创建——您可以从统一容器请求特定类型的对象，然后取回满足依赖关系的对象。但是有一个很好的小工具是 Glen Block 制作的，称为 CompositionInitializer，它允许您满足使用 MEF 创建的任何类的导入。[此处](http://reedcopsey.com/2010/03/26/mef-compositioninitializer-for-wpf/)和[此处](http://blogs.interknowlogy.com/tag/compositioninitializer/)的博客文章描述了如何使用它以及从哪里获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:25:42.237

在你的情况下，我会使用[Prism](http://compositewpf.codeplex.com/)。它比 MVVM light 成熟得多。是的，它也更大，所以如果你不制作模块化应用程序，你只能使用 Unity IOC，这可能是最好的容器之一。如果您不止一个，则取决于您所采取的架构问题的方法。基本上一个容器应该绰绰有余。

# javascript - 如何使用主干创建级联/动态选择列表

> ID：14745045
> 
> 赞同：1
> 
> 时间：2013-02-07T06:32:19.507
> 
> 标签：javascript, html, backbone.js

我正在尝试创建一个代表选择元素的可重用主干视图，并支持以下内容：

*   从模型中设置选定值
*   将其他选择视图绑定到它，以便当它的值更改时，其他选择视图会更新它们的集合

我已经看到了一些不同的资源，例如

*   [http://blog.shinetech.com/2011/07/25/cascading-select-boxes-with-backbone-js/](http://blog.shinetech.com/2011/07/25/cascading-select-boxes-with-backbone-js/)
*   [http://railsindirection.blogspot.com/2011/08/backbonejs-and-dependent-selects.html](http://railsindirection.blogspot.com/2011/08/backbonejs-and-dependent-selects.html)

但是，它们似乎都不支持满足这两个目的的通用对象-它们似乎是骇人听闻的。

有人对如何创建这个有任何建议吗？或者也许一个链接到其他人的代码可以优雅地解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:53:08.003

我建议您以这种方式实现事件聚合器。 [http://lostechies.com/derickbailey/category/backbone-eventbinder/](http://lostechies.com/derickbailey/category/backbone-eventbinder/)

因此，您将第一个视图内选择列表上的更改事件绑定到触发其他视图中更新的方法。

希望这可以帮助

# php - 如何通过了解完整的选项类型来显示单个选项

> ID：14745049
> 
> 赞同：1
> 
> 时间：2013-02-07T06:32:45.007
> 
> 标签：php, html, mysqli

我在下面有一个示例数据库：

问题表：

```
QuestionId (PK auto)  QuestionNo   OptionId (FK)
11                     1             1
12                     2             3
13                     3             26 
```

选项表

```
OptionId  OptionType
1         A-C
2         A-D
3         A-E
4         A-F

...

25        True or False
26        Yes or No 
```

现在，我在下面显示了每个问题编号及其认可的选项类型a：

```
 foreach ($arrQuestionId as $key=>$question) {

    ?>

    <p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrOptionType[$key]); ?></p>

    <?php

}

?> 
```

所以输出看起来像这样：

```
1: A-C
2: A-E
3: Yes or No 
```

但是我想做的是现在通过确定完整的选项类型来显示每个单独的选项。例如，如果选项类型是`A-C`，那么它应该显示`A B C`，如果选项类型是`A-E`显示`A B C D E`，如果选项类型是`Yes or No`，那么显示`Yes No`。

每个单独的选项都应显示为一个复选框。所以如果你有`A B C`，那么它应该是：

A（复选框） B（复选框） C（复选框）

我的问题是如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:29:29.420

一种方法是在字符上结合使用explode 和increment 运算符。例如：

```
<?php

$questions = array(
  array(1, "A-E"),
  array(2, "Yes or No"),
  array(3, "A-C"),
  array(4, "True or False")
);

foreach ($questions as $question) {
    echo $question[0] , ': ' , ExpandOptionType($question[1]), '<br/>';
}

function ExpandOptionType($option) { 
  $options = explode('-', $option);
  if(count($options) > 1) {
    $start = array_shift($options);
    $end = array_shift($options);
    do {
      $options[] = $start;
    }while(++$start <= $end);
  }
  else{
    $options = explode(' or ', $option);
  }
  return implode(" ", $options);
}

?> 
```

输出：

```
1: A B C D E
2: Yes No
3: A B C
4: True False 
```

# excel - 在 Excel 2011 的图表中创建了一个额外的系列

> ID：14745050
> 
> 赞同：0
> 
> 时间：2013-02-07T06:32:48.843
> 
> 标签：excel, applescript

在 excel 2011 中，使用苹果脚本创建了一个额外的系列。

```
 tell application "Microsoft Excel"
    make new workbook
    tell worksheet "sheet1" of active workbook
        set value of cell "A1" to 10
        set value of cell "B1" to 5
        set obj to make new chart object at end with properties {left position:100,      top:100, height:200, width:300, name:"MyChart"}
        set ochart1 to chart of chart object "MyChart"
        tell ochart1
            set chart type to bar clustered
            make new series at end with properties {series values:"=Sheet1!$A$1:$B$1", name:"2"}

        end tell
    end tell
end tell 
```

我的问题是，在 sheet1 中创建了一个额外的系列（即系列 1）。

![在此处输入图像描述](../Images/0d689bec4a5c35f8292f8f7f89f27334.png)

![在此处输入图像描述](../Images/e8cb26fd9a6ade30a64efa258e3b0c5c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:48:54.630

当您创建更有意义的系列时，似乎一切正常：

```
tell application "Microsoft Excel"
    make new workbook
    tell worksheet "sheet1" of active workbook
        set value of cell "A1" to 2
        set value of cell "B1" to 3
        set value of cell "A2" to 4
        set value of cell "B2" to 6
        set value of cell "A3" to 10
        set value of cell "B3" to 5
        set obj to make new chart object at end with properties {left position:100, top:100, height:200, width:300, name:"MyChart"}
        set ochart1 to chart of chart object "MyChart"
        tell ochart1
            set chart type to bar clustered
            #remove  first series
            make new series at end with properties {series values:"=Sheet1!$A$1:$A$3", name:"one"}
            make new series at end with properties {series values:"=Sheet1!$B$1:$B$3", name:"two"}
        end tell
    end tell
end tell 
```

注意 - 我单独创建了这个系列，因为我不知道如何在单个语句中为它们命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:01:49.180

我确信这不是正确的做法，但它应该可以完成工作。

```
tell application "Microsoft Excel"
    make new workbook
    tell worksheet "sheet1" of active workbook
        set value of cell "A1" to 10
        set value of cell "B1" to 5
        set obj to make new chart object at end with properties {left position:100, top:100, height:200, width:300, name:"MyChart"}
        set ochart1 to chart of chart object "MyChart"
        tell ochart1
            set chart type to bar clustered
            make new series at end with properties {series values:"=Sheet1!$A$1:$B$1", name:"2"}
            delete (every series whose name ≠ "2")
        end tell
    end tell
end tell 
```

# ssl - Kohana 网站的 SSL

> ID：14745051
> 
> 赞同：0
> 
> 时间：2013-02-07T06:32:51.510
> 
> 标签：ssl, kohana, kohana-3

我在 Kohana 3.0.7 中有一个网站，并且我购买了 SSL 证书。我已经用 https 标记了成功页面，pay pal 交易详细信息返回到该页面。更新数据库后，我添加了以下代码 -

```
$this->request->redirect('business/fnc_manage'); 
```

但是这个页面是用 https 加载的，并且在谷歌浏览器上没有正确加载。

如果我尝试如下，它会给我 500 错误 -

```
 header("Location:"+url::base()+"business/fnc_manage");
  exit(); 
```

我怎样才能摆脱这个？这是否意味着我必须确保加载的所有资源都应该通过 https 提供？

如果是，那么我可能必须更改所有路径。我怎样才能为 HTML 助手做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:37:07.873

我还没有尝试过，但我会说`base_url`在你的***bootstrap.php***中更改可能会有所帮助：

```
Kohana::init(array(
    'base_url' => 'https://yoururlhere.com',
    'index_file' => FALSE,
    'charset' => 'utf-8',
    'cache_dir' => APPPATH . 'cache',
    'errors' => TRUE,
    'profile' => Kohana::$environment !== Kohana::PRODUCTION,
    'caching' => Kohana::$environment === Kohana::PRODUCTION,
)); 
```

# c# - 断开/关闭客户端

> ID：14745052
> 
> 赞同：1
> 
> 时间：2013-02-07T06:32:54.097
> 
> 标签：c#, sockets, tcpclient, tcplistener

我有一个简单的客户端-服务器应用程序，它的工作原理如下：服务器总是在监听（在一个单独的线程中）客户端连接（它发送它希望服务器杀死的进程的名称）。

这是服务器：

```
private void btnStart_Click(object sender, EventArgs e)
{
  _port = int.Parse(comboBoxPorts.SelectedItem.ToString());

  _tcpListener = new TcpListener(_ipAddress, _port);

  _keepRunning = true;
  _listenerThread = new Thread(Listen);
  HandleListenerThreadStartListenEvent += HandleListenerThreadStartedEventMethod;
  ListenerThreadStartedEvent += HandleListenerThreadStartListenEvent;
  _listenerThread.Start();
}

private void btnStop_Click(object sender, EventArgs e)
{ 
  if (_tcpListener != null)
  {
    _keepRunning = false; 

    if (_tcpListener.Server.Connected)
    {
      _tcpListener.Server.Disconnect(true); 
    } 

    _tcpListener.Stop(); 
  }

  labelServerStatus.Text = "Server is stopped";   
  comboBoxPorts.Enabled = true; 
  btnStart.Enabled = true; 
  btnStop.Enabled = false; 
} 

private void Listen()
{
  try
  {
    _tcpListener.Start();
    OnListenerThreadStartListenEvent(); // just update the GUI
  }
  catch(Exception e)
  {
    MessageBox.Show("Port " + _port + " is NOT available." + Environment.NewLine +
                    "Please choose another one: " + e.Message);
    return;
  }

  _keepRunning = true;
  string ballonMessage = "Socket Server Running at " + _ipAddress + ", port: " + _port;
  notifyIcon1.ShowBalloonTip(2000, "Simplex Listener", ballonMessage, ToolTipIcon.Info);

  while (_keepRunning)
  {
    try
    {          
      #region using AcceptSocket()

      _clientSocket = _tcpListener.AcceptSocket();
      string checkString = string.Empty;
      IPAddress ipOfClient = ((IPEndPoint) _clientSocket.LocalEndPoint).Address;
      notifyIcon1.ShowBalloonTip(2000, "Simplex Listener", "New client has connected from ip " + ipOfClient, ToolTipIcon.Info);

      byte[] buffer = new byte[SIZE_OF_BUFFER];
      int bytesReceived = _clientSocket.Receive(buffer);

      // Concatenate chars as bytes to a received string.
      for (int i = 0; i < bytesReceived; i++)
        checkString += Convert.ToChar(buffer[i]);

      //..... getting the name of process and kill it (and than open it...
      RestartProcess(nameOfProcess, windowName, pathToExeFile);

      // Client is waiting to know operation is complete- so send him some char...
      ASCIIEncoding encoder = new ASCIIEncoding();
      _clientSocket.Send(encoder.GetBytes("v"));
      _clientSocket.Disconnect(true);
      _clientSocket.Close();
      #endregion
    }
    catch (Exception )
    {    
    }
  }
} 
```

客户端：

```
public void RestartTheSoftwareInServerComputer(string ipOfServer, int portNumber)
{
  TcpClient client = new TcpClient();

  if (_serverEndPoint == null)
  {
    _serverEndPoint = new IPEndPoint(IPAddress.Parse(ipOfServer), portNumber);     
  }

  client.Connect(_serverEndPoint);

  // Send the command to the server:
  NetworkStream clientStream = client.GetStream();
  ASCIIEncoding encoder = new ASCIIEncoding();
  byte[] buffer = encoder.GetBytes("....detailsOfProcess....");

  clientStream.Write(buffer, 0, buffer.Length);
  clientStream.Flush();

  // Now, wait for the server's response [which means the process had been restart].
  NetworkStream stream = client.GetStream();
  byte[] bytes = new byte[5];
  stream.Read(bytes, 0, 5);
  string response = Encoding.UTF8.GetString(bytes, 0, 1);

  if (response.Equals("x"))
  {
    throw new Exception("Failed to restart X software.");
  }

  stream.Close();
  client.Close();
} 
```

当我停止并重新启动服务器时（当没有客户端连接时），一切正常。

问题是当服务器连接了一些客户端并重新启动时，客户端已断开连接，需要重新启动服务器。当我们再次点击“START SERVER”时，它会得到异常：

> 每个套接字地址（协议/网络地址/端口）通常只允许使用一次。

我应该如何关闭端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:21:05.620

当您退出服务器时，您应该调用 _tcpListener.Stop() 来关闭服务器正在侦听的主套接字。

编辑：您也可以尝试在停止按钮单击中调用 _listenerThread.Join() ，以等待侦听器线程完成，然后再开始下一个。

```
private void btnStop_Click(object sender, EventArgs e)
{ 
  if (_tcpListener != null)
  {
    _keepRunning = false;

    if (_tcpListener.Server.Connected)
    {
      _tcpListener.Server.Disconnect(true); 
      _tcpListener.Stop();
      if (_clientSocket != null)
      {
        _clientSocket.Close();
        _clientSocket = null;
      }
      _listenerThread.Join();
    }
  }

  labelServerStatus.Text = "Server is stopped";   
  comboBoxPorts.Enabled = true; 
  btnStart.Enabled = true; 
  btnStop.Enabled = false; 
} 
```

编辑2：

这是一个类似于您的服务器的 Windows 窗体。我不需要客户端，只需在命令提示符下使用“telnet localhost 49152”来“假装”成为连接的客户端。

```
public partial class Form1 : Form
{
    private TcpListener _tcpListener;
    private bool _keepRunning;
    private Thread _listenerThread;
    private Socket _clientSocket;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var address = IPAddress.Parse("127.0.0.1");
        _tcpListener = new TcpListener(address, 49152);

        _keepRunning = true;
        _listenerThread = new Thread(Listen);
        _listenerThread.Start();

        button1.Enabled = false;
        button2.Enabled = true;
    }

    private void Listen()
    {
        try
        {
            _tcpListener.Start();
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
            return;
        }

        _keepRunning = true;

        while (_keepRunning)
        {
            try
            {
                _clientSocket = _tcpListener.AcceptSocket();

                var buffer = new byte[8192];
                var bytesReceived = _clientSocket.Receive(buffer);
                var checkString = String.Empty;

                if (_keepRunning)
                {
                    // bytesReceived can be 0 if the remote socket disconnected
                    if (bytesReceived > 0)
                    {
                        checkString = Encoding.ASCII.GetString(buffer, 0, bytesReceived);

                        // Client is waiting to know operation is complete- so send him some char...
                        var encoder = new ASCIIEncoding();
                        _clientSocket.Send(encoder.GetBytes("v"));
                    }
                    if (_clientSocket.Connected) _clientSocket.Disconnect(true);
                }
                _clientSocket.Close();
            }
            catch (Exception ex)
            {
                // really should do something with these exceptions
            }
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (_tcpListener != null)
        {
            _keepRunning = false;

            if (_tcpListener.Server.Connected)
            {
                _tcpListener.Server.Disconnect(true);
            }
            _tcpListener.Stop();

            if (_clientSocket != null)
            {
                _clientSocket.Close();
                _clientSocket = null;
            }
            _listenerThread.Join();
        }

        button1.Enabled = true;
        button2.Enabled = false;
    }
} 
```

这段代码有很多问题，例如跨线程共享变量等，但在我的机器上，Join 似乎不会阻塞任何时间。_keepRunning 的问题在于，在某些系统上，一个线程可能看不到从 true 到 false 的变化，因为它被优化或缓存了。您应该真正使用某种形式的线程同步，使其易失，或将其包裹在锁中等。我建议您在[这里](http://www.albahari.com/threading/)阅读有关此内容。我还建议您也阅读一下 Sockets，或者如果其他评论者提到，如果您对了解套接字和线程的所有特性不感兴趣，也许您应该寻找一个隐藏的更高级别的库这一切？

# xml - 从 PowerPoint VBA 中提取 OLEObject（XML 文档）

> ID：14745056
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:33:00.720
> 
> 标签：xml, vba, embedded, powerpoint

我正在用 VBA 开发一个应用程序。用户窗体连接到读取 SPSS Statistics SAV 文件或 SPSS Dimensions MDD 文件的 COM 对象。

此应用程序的一部分将元数据存储在 XML 文档中，以便我们稍后可以检索元数据并重新填充或更新从用户表单创建的图形。只要我们依赖于本地驱动器上存在的 XML 文件，这就可以正常工作——这不是一个理想的解决方案。我们更愿意将 XML 嵌入（而不是链接）到 PPTM 文件中，我已经能够做到这一点（见附件）。

**问题**是我找不到让 VBA 成功提取 OLEObject XML 文件的方法。

OLEObject 可以从 PPT 手动打开（鼠标单击/等），并且呈现良好。但是，当我们尝试以编程方式提取此文档并将其保存到驱动器以便 VBA 可以将文件路径传递给 COM 对象时，所提取的 XML 文件总是出现损坏。

我发现的唯一方法是：

```
metaDoc.Copy
CreateObject("Shell.Application").Namespace(ActivePresentation.Path).self.InvokeVerb "Paste" 
```

我已经读到 OLEFormat.ProgID = "Package" 存在一些困难，这可能不允许所需的行为。

我有一些解决方法，例如创建 PPTM 文件的 ZIP 副本并从该文件夹中提取嵌入的文档 XML 文件，这应该可以，但如果有更简单的方法来激活此形状/对象并通过 VBA 与之交互，这将非常有帮助。

下面是一些创建 XML 并将其插入的示例代码。问题是我如何提取它，或者我必须做上面提到的ZIP方法吗？

```
Public Const XMLFileName As String = "XML Embedded File.xml"
Sub ExampleCreateEmbedXML()

Dim fso As Object
Dim oFile As Object
Dim metaDoc As Shape
Dim shp As Shape
Dim sld As Slide
Dim user As String
Dim xmlExists As Boolean

xmlExists = False
user = Environ("Username")
XMLFilePath = "C:\Users\" & user & "\" & XMLFileName

Set sld = ActivePresentation.Slides(1)
For Each shp In sld.Shapes
    If shp.Name = XMLFileName Then
    xmlExists = True
    End If
Next

If Not xmlExists Then
'If the XML OLEObject doesn't exist, then create one:

'Create a new file in the active workbook's path
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set oFile = fso.CreateTextFile(XMLFilePath)
    oFile.Close

    'And then embed the new xml document into the appropriate slide
    Set metaDoc = sld.Shapes.AddOLEObject(FileName:=XMLFilePath _
            , Link:=False, DisplayAsIcon:=False)
    metaDoc.Name = XMLFileName

'Save this out to a drive so it can be accessed by a COM Object:
    metaDoc.Copy
    CreateObject("Shell.Application").Namespace(ActivePresentation.Path).self.InvokeVerb "Paste"

    'This file will be an empty XML file which will not parse, but even files that have been
    ' created correctly by the COM object (verified against the embed file vs. the extracted file)
    ' do not open properly. It seems that this method of pasting the object yields errors in
    ' xml structure.

    ' I have compared by activating the Metadoc object which renders fine in any XML viewer
    ' but the saved down version does not open and is obviously broken when viewed in txt editor

 Else:
    'The file exists, so at this point the COM object would read it
    ' and do stuff to the document or allow user to manipulate graphics through
    ' userform interfaces which connect to a database

    ' the COM object then saves the XML file

    ' another subroutine will then re-insert the XML File.
    ' this part is not a problem, it's getting VBA to open and read the OLEObject which is
    ' proving to be difficult.

 End If

 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:24:51.957

经过大量（大量）搜索后，当我偶然发现一个可能的解决方案时，我已将其注销并转向几个“B计划”解决方案之一。

我知道这会`DoVerbs 1`激活嵌入式包文件（.txt、.xml 等），但我无法控制记事本的新实例，我需要从中读取其中包含的 XML。

而不是复制并尝试粘贴对象（手动和编程失败）

```
 'Save this out to a drive so it can be accessed by a COM Object:
        metaDoc.Copy
    CreateObject("Shell.Application").Namespace(ActivePresentation.Path).self.InvokeVerb "Paste" 
```

我能够使用此处发布的解决方案的略微修改版本：

[http://www.excelforum.com/excel-programming-vba-macros/729730-access-another-unsaved-excel-instance-and-unsaved-notepad-text.html](http://www.excelforum.com/excel-programming-vba-macros/729730-access-another-unsaved-excel-instance-and-unsaved-notepad-text.html)

以字符串形式读取打开的、未保存的记事本实例，然后将其写入新文件。这是从`NotepadFunctions.ReadNotepad()`上述链接中记录的函数调用的。

```
Sub ExtractLocalXMLFile(xlsFile As Object)
    'Extracts an embedded package object (TXT file, for example)
    ' reads string contents in from Notepad instance and
    ' prints a new file with string contents from embed file.

    Dim embedSlide As slide
    Dim DataObj As New MSForms.DataObject 'This is the container for clipboard contents/object
    Dim fullXMLString As String         'This is the captured string from clipboard.
    Dim t As Long                       'Timer variable

    MsgBox "Navigating to the hidden slide because objects can only be activated when " & _
            "the slide is active."

    Set embedSlide = ActivePresentation.Slides("Hidden")

    ActivePresentation.Windows(1).View.GotoSlide embedSlide.SlideIndex

    'Make sure no other copies of this exist in temp dir:

    On Error Resume Next
        Kill UserName & "\AppData\Local\Temp\" & _
             MetaDataXML_FilePath
                'replace an xls extension with txt
    On Error GoTo 0

    xlsFile.OLEFormat.DoVerb 1
            '1 opens XML package object -- ' for xls/xlsm files use Verb 2 to Open.
            ' in which case I can maybe control Notepad.exe

    t = Timer + 1

    Do While Timer < t
        'Wait... while the file is opening
    Wend

    'Retrieve the contents of the embedded file

    fullXMLString = Notepad_Functions.ReadNotepad(Notepad_Functions.FindNotepad("Chart Meta XML"))

    'This function closes Notepad (would make it a subroutine, instead.

    'CloseAPP_B "NOTEPAD.EXE"  '<--- this function is NOT documented in my example on StackOverflow

    'Create a new text file

    WriteOutTextFile fullXMLString, MetaDataXML_FilePath

    'Get rid of the embedded file

    xlsFile.Delete

End Sub

Sub WriteOutTextFile(fileString As String, filePath As String)

    'Creates a txt file at filePath
    'inserting contents (filestring) from the temp package/XML object

    Dim oFile As Object
    Dim fso As Object

    Set fso = CreateObject("Scripting.FileSystemObject")
    Set oFile = fso.CreateTextFile(filePath)

    oFile.WriteLine (fileString)
    oFile.Close

End Sub 
```

# sed - 限制 sed 命令

> ID：14745058
> 
> 赞同：1
> 
> 时间：2013-02-07T06:33:06.327
> 
> 标签：sed

我有一个需要修改的变量，以便添加分钟 %M。我知道 sed 命令，它按预期工作。

```
# cat mysed.txt 
myfirstfile="comany$mydb`date +'%d-%b-%Y-%H'`.sql"

# sed -i 's/\%H/\%H-\%M/' mysed.txt
# cat mysed.txt 
myfirstfile="company$mydb`date +'%d-%b-%Y-%H-%M'`.sql" 
```

但是如果我再次运行相同的 sed 命令，它将再次添加 %M，如下所示。

```
# sed -i 's/\%H/\%H-\%M/' mysed.txt

# cat mysed.txt 
myfirstfile="company$mydb`date +'%d-%b-%Y-%H-%M-%M'`.sql" 
```

我需要一个 sed 命令，即使 sed 命令被执行两次（错误地），它也应该只添加一次分钟 %M

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:36:33.983

```
# sed -i "s/%H'/%H-%M'/" mysed.txt 
```

这应该有效。这样，只有在 %H 旁边有引号时才会进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:20:19.797

在替换之前测试它是否存在：

```
sed '/%H-%M/! s/%H/%H-%M/' mysed.txt 
```

顺便提一句。`%`不需要逃脱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T07:42:42.397

我相信下面的命令可以正常工作。请将 test.dat 文件替换为您的文件名。

```
cat test.dat|sed "s/\%H\'/\%H\-\%M\'/" > test.dat 
```

没有 cat 命令

```
sed -i "s/\%H\'/\%H\-\%M\'/" test.dat >  test.dat 
```

干杯!

# javascript - 调用 $().SPServices.SPGetCurrentUser() 是否从 AD 或 SP 用户配置文件中提取数据？

> ID：14745060
> 
> 赞同：1
> 
> 时间：2013-02-07T06:33:07.147
> 
> 标签：javascript, jquery, sharepoint-2010

我目前正在调试一个 Sharepoint 2010 网站，并在调试器遇到以下功能时遇到错误：

```
var thisUserID = $().SPServices.SPGetCurrentUser({
    fieldName: "ID",
    debug: false
}); 
```

错误是：

```
The value of the property '$' is null or undefined, not a Function object 
```

所以我想知道（[作为底部的用户也是如此](https://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPGetCurrentUser)）调用 $().SPServices.SPGetCurrentUser() 是否从 AD 或 SP 用户配置文件中提取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:59:14.483

据我所知，它从 Active Directory 而不是用户配置文件中提取信息，我已经对其进行了尝试和测试。有时它确实表现得很奇怪。

# php - 如何以编程方式启用 cURL？

> ID：14745063
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:33:16.210
> 
> 标签：php, curl, php-extension

我知道手动过程取消注释该行

```
;extension=php_curl.dll 
```

但我需要使用 php 代码启用此功能。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:34:13.970

~~这只能在`php.ini`文件中完成。~~

编辑：显然它可以按照原始海报所述来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:47:39.003

您可能正在寻找[`runkit_function_add()`](http://www.php.net/manual/en/function.runkit-function-add.php)

```
runkit_function_add('curl_init'); 
```

这与该用户在此线程中尝试执行的操作相反： [Programmatically disable specific PHP functions for testing](https://stackoverflow.com/questions/9380423/programmatically-disable-specific-php-functions-for-testing)

# performance - WCF Restful API 的整体性能改进

> ID：14745066
> 
> 赞同：0
> 
> 时间：2013-02-07T06:33:33.540
> 
> 标签：performance, wcf, linq, sql-server-2008, entity-framework

几天前我们交付了一个成功的项目，现在我们需要在 WCF Restful API 中进行一些性能改进。

> 这些项目正在使用以下工具/技术

1- LINQ
2- 实体框架
3- 用于记录/异常处理的企业库
4- MS SQL 2008
5- 部署在 IIS 7 上

> 需要注意的几点

1- 10-20 查询在 LINQ 中有超过 7 个表连接

2- 当前 IIS 部署了 10 多个应用程序

3- 实体框架有大约 60 个表

4- WCF api 使用 HTTPS

5- 所有 API 调用都返回 JSON 响应

> 一般流程是

1- 收到 WCF 调用

2- 会话被检查

3- 调用 BL 层的函数

4-调用来自DA层的函数

5- 以 JSON 格式返回的响应

> 目前，根据我的知识和研究，我认为以下可能会提高性能

1-实现参考数据的缓存

2-将具有超过 3 个连接的 LINQ 查询移动到存储过程（并且可能使用提示？）

3- 数据库表重新索引

4-使用性能计数器了解问题区域

5- 将具有 3 个以上更新/删除/插入的函数移动到存储过程

> 您能指出上述改进的一些问题吗？我还能做哪些其他改进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:58:47.673

您的帖子缺少有关改进建议的一些背景信息。它们只是猜测还是您实际测量并确定它们是问题区域？

确实没有什么可以替代适当的性能监控和分析来确定您应该关注哪个区域进行优化。其他一切都只是猜测，尽管有些事情可能很明显，但实际上提高性能的往往是不那么明显的事情。

1.  通过性能分析工具运行您的代码，以快速识别实际应用程序中的问题区域。如果您无法访问[Visual Studio 性能分析器](http://msdn.microsoft.com/en-us/library/ms182372.aspx)（Visual Studio Premium 或 Ultimate），请查看[PerfView](http://www.microsoft.com/en-us/download/details.aspx?id=28567)，它是一个非常好的内存/CPU 分析器，不会花费您任何费用。

2.  使用[MiniProfiler](http://miniprofiler.com/)等工具可以轻松设置测量点，以及在运行时监控实体框架的执行。MiniProfiler 也可以配置为将结果保存到数据库中，这在您没有 UI 时很方便。

3.  分析从实体框架生成的 T-SQL 语句（可以在 MiniProfiler 中看到）应该允许您通过查看 SQL 执行计划以及获取[SQL IO 统计信息](http://msdn.microsoft.com/en-us/library/ms184361.aspx)来轻松测量查询性能。这应该让您对可以/应该放入存储过程的内容以及是否需要任何其他索引有一个很好的概述。

# android - 在列表视图中搜索数据项

> ID：14745068
> 
> 赞同：1
> 
> 时间：2013-02-07T06:34:05.430
> 
> 标签：android, listview, search, adapter

为了搜索数据项，`listview`我已经完成了编码，这里是逻辑，创建了`arraylist`，在`onTextChanged`类上，关键字与`edittext`进行比较，`listview`结果存储在`arraylist`调用中`searchResult`，并使用`lazyadapter`使其显示在`listview`，能够得到搜索结果，`toast`但现在我必须告诉惰性适配器按`listview`顺序排列项目并显示它`listview`，我尝试了很多方法，但没有任何帮助我得到结果。

这是我的完整代码`lazyadapter`。

```
public class Home extends ListActivity {
ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;    

 //ArrayList thats going to hold the search results
  ArrayList<HashMap<String, String>> searchResults;
  LayoutInflater inflater;
// All static variables
static final String URL = "http://www.abc.com/ads/?json=get_recent_posts";  

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final EditText searchBox=(EditText) findViewById(R.id.search);
    final ListView  list=(ListView)findViewById(android.R.id.list);

    //get the LayoutInflater for inflating the customomView
     //this will be used in the custom adapter
     inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

 final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);
            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }               

              //searchResults=OriginalValues initially
                searchResults=new ArrayList<HashMap<String, String>>(songsList);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

             searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                       //get the text in the EditText
                       String searchString=searchBox.getText().toString();
                       int textLength=searchString.length();

                              //clear the initial data set
                       searchResults.clear();

                       for(int i=0;i<songsList.size();i++)
                       {
                      String playerName=songsList.get(i).get("title").toString();

                      if(textLength<=playerName.length()){

                      //compare the String in EditText with Names in the ArrayList
                        if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                              Toast.makeText(getApplicationContext(),playerName,1).show();
                        searchResults.add(songsList.get(i));
                      }
                       }

                       adapter=new LazyAdapter(Home.this, searchResults);
                       list.setAdapter(adapter);
                       adapter.notifyDataSetChanged();
                     }

                     public void beforeTextChanged(CharSequence s, int start, int count,
                         int after) {

                       }

                       public void afterTextChanged(Editable s) {

                       }
                      });
                 } 
```

**懒惰适配器**

```
public class LazyAdapter extends BaseAdapter {
  TextView title;
private Activity activity;
 // private TextWatcher textWatcher;
   private ArrayList<HashMap<String, String>> data;
   private static LayoutInflater inflater=null;
   public ImageLoader imageLoader; 

   public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
     activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.activity_home, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView date = (TextView)vi.findViewById(R.id.date); // artist name
    TextView content = (TextView)vi.findViewById(R.id.content);  // duration
    TextView name = (TextView)vi.findViewById(R.id.name); 
    // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
   title.setText(song.get(Home.KEY_TITLE));
    date.setText(song.get(Home.KEY_DATE));
    content.setText(song.get(Home.KEY_CONTENT));
    name.setText(song.get(Home.KEY_NAME));

   imageLoader.DisplayImage(song.get(Home.KEY_URL), thumb_image);
    return vi;
} 
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:26:35.997

我认为您不需要`adapter`在搜索后重新初始化。

你可以这样试试。

在第一次用你的初始化它时`ArrayList`再准备一个。然后在初始化时将它传递给你的适配器。在搜索时，用你的& 重新初始化。`tempList``songsList``tempList``tempList``searchResults``adapter.notifyDataSetChanged()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:16:24.090

我建议您使用过滤器类来搜索/过滤列表中的任何项目。您需要从 EditText 的 onTextChanged() API 调用该类，并且过滤联系人的逻辑必须编写在过滤器类中。例如，

```
public void onTextChanged(CharSequence s, int start, int before, int count){   
               //Call filter class
        getFilter().filter(s);

    } 
//getFilter class
 public Filter getFilter() {
                 //put a Null check
        if (null == filter) {
                  //Calling a private filter class, that contains the logic..
            filter  = new FilterList(); 
                }
        return filter; 
    }

private class FilterList extends Filter {
//Here, I was using a pojo to store the attributes of the List Item
        List<DefaultPojo> buffer = new ArrayList<DefaultPojo>();
        @Override
        protected FilterList performFiltering(CharSequence constraint) {

            FilterList results = new FilterList();          

                    if(constraint != null && constraint.toString().length() > 0)
                    {
                       if(List != null){
                        int count = List.size();
                        ArrayList<DefaultPojo> filt = new ArrayList<DefaultPojo>(count);

if(constraint != null && constraint.toString().length() > 0){  
                    //Logic for searching the list
}
                    else{
                        //Load the Parent List....                      
                        buffer = List;

                    }
            //Sorting the obtained List..                   
            Collections.sort(buffer);
            if(buffer!=null && buffer.size()>0){
            results.values = buffer; 
            results.count = buffer.size(); }

            return results;
        }
//Setting the content to the List and Adapter will be done by publishResults() method..
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            filteredList = (List<DefaultPojo>)results.values;
            if(filteredList!=null){     
                ListAdapter = new ListAdapter(Contactlist.this,mFilteredContactDetails);
                List.setAdapter(ListAdapter); 
            }
            else{
                List.setAdapter(null);
                ListAdapter=null;
            }           
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:08:21.210

我想你错过了这一行，只需在`yourActivity.this.adapter.getFilter().filter(cs);` 此处添加`addTextChangedListener`这一行

```
 searchBox.addTextChangedListener(new TextWatcher() {           

        @Override
        public void onTextChanged(CharSequence cs, int start, int count, int after) {
            // your data    

            Home .this.adapter.getFilter().filter(cs);                          
        } 
```

编辑：像这样改变

```
 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                   String searchString=searchBox.getText().toString();
                   int textLength=searchString.length();

                          //clear the initial data set
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                  String playerName=songsList.get(i).get("title").toString();

                  if(textLength<=playerName.length()){

                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                          Toast.makeText(getApplicationContext(),playerName,1).show();
                    searchResults.add(songsList.get(i));
                  }
                   }

                   adapter=new LazyAdapter(Home.this, searchResults);
                   list.setAdapter(adapter);
                   adapter.notifyDataSetChanged();

       Home .this.adapter.getFilter().filter(s);    
                 } 
```

# c++ - 查找排序范围内元素数量的最快方法是什么？

> ID：14745074
> 
> 赞同：1
> 
> 时间：2013-02-07T06:34:33.363
> 
> 标签：c++, algorithm

给定一个排序列表
`1, 3, 5, 6, 9....`
是否有一种快速算法，而不是`O(n)`计算给定范围内的元素数量`[a, b]`，假设所有数字都是整数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T06:40:09.390

这是一个 O(log n) 算法：使用[二分搜索搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)两个端点，范围内的元素数量基本上就是索引的差异。

要获得确切的数字，需要区分范围端点是否在数组中的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:41:16.883

由于列表已排序，因此您可以在 O(log(n)) 时间内找到值的位置（或者，如果该值不在列表中，则应将其插入到哪里）。您只需对两端执行此操作并减去即可获得范围内元素的数量。元素是否为整数没有区别；列表只需要排序。

如果元素不是唯一的，您确实需要小心；在这种情况下，在找到命中后，您可能需要对重复元素序列的末尾进行线性扫描。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T08:14:56.367

[`lower_bound`](http://en.cppreference.com/w/cpp/algorithm/lower_bound)并对[`upper_bound`](http://en.cppreference.com/w/cpp/algorithm/upper_bound)已分类的容器进行操作。

首先找到该范围内的较低值，然后从那里搜索到最后的较高值。函数的实现可能使用二进制搜索：

```
#include <algorithm>
#include <list>
#include <iterator>

int main() {
    using std::list;
    using std::upper_bound;
    using std::lower_bound;
    using std::distance;

    list<int> numbers = {1, 3, 5, 6, 9};
    int a = 3;
    int b = 6;

    auto lower = lower_bound(numbers.begin(), numbers.end(),
                             a);
    auto upper = upper_bound(lower, numbers.end(),
                             b);

    int count = distance(lower, upper);

    return 0;
} 
```

# ios6 - 当运行应用程序按钮图像大小变化？

> ID：14745078
> 
> 赞同：1
> 
> 时间：2013-02-07T06:35:08.493
> 
> 标签：ios6, uibutton, xib

在 xib 中，我创建了一个图像大小为 (120,45) 的按钮，同时运行该按钮图像大小变得小于指定的应用程序，我不知道如何获得该原始图像大小。

# arrays - 数组访问需要 O(1) 时间改进吗？

> ID：14745082
> 
> 赞同：4
> 
> 时间：2013-02-07T06:35:12.910
> 
> 标签：arrays, big-o

我一直在读一本分配给班级的书，它提到数组访问需要 O(1) 时间。我意识到这非常快（可能尽可能快），但是如果您有一个必须多次引用它的循环，那么分配一个临时变量以在数组中查找值有什么好处吗？或者使用临时变量仍然是 O(1) 吗？

我假设这个问题与语言无关。我也意识到，即使答案是肯定的，优势很小，我只是好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:39:54.603

请注意，O(1) 并不意味着“瞬时”。它只是意味着“至多是一些常数”。这意味着 1 和 10 ^(1000)都是 O(1)，即使其中的第二个大于宇宙中的原子数。

如果您多次重复访问同一个数组元素，则每次访问将花费 O(1) 时间。将该数组元素存储在局部变量中也会给 O(1) 查找时间，但常量可能不一样。*选择一个选项可能*会更好，但您确实必须对程序进行概要分析才能确定。

在实践中，这种微优化不太可能对程序时间产生可衡量的影响，除非您正在运行的代码占程序运行时间的很大一部分。我会很震惊地找到一个例子，这个变化会对任何真实的代码产生明显的影响。

现代架构可能会使这种变化更快一些，但不会如此显着。如果您多次访问同一个数组元素，处理器可能会将数组的那部分保留在缓存中，从而使查找速度非常快。此外，一个好的优化编译器可能已经为您将非本地复制代码转换为本地复制代码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T06:38:55.730

如果我明白了，你问的是

```
for (int i=0; i<len; i++) {
   int temp = ar[i];
   foo += temp;
   bar -= temp;
} 
```

比：

```
for (int i=0; i<len; i++) {
   foo += ar[i];
   bar -= ar[i];
} 
```

我不会担心它：

如果循环体中的代码要访问同一个数组条目，比如说`ar[i]`多次，任何中途的编译器（在非零优化级别）都会将该值保存在寄存器中以便快速重用。换句话说，编译器可能会在给定上述任一代码示例的情况下生成完全相同的程序集。

请注意，其中任何一个仍然是 O(1)（一次访问一件事）。不要将算法的大 O 表示法与指令级优化混淆。

**编辑**

我刚刚编译了一个带有两个函数的示例程序，包含上述两个示例，并且在`-O2`gcc 4.7.2 生成了*完全相同的*机器代码；逐字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T06:38:50.287

比 O(1) 时间表现更好的唯一方法是一开始就不必做*任何事情*。那将是 O(0) 时间。

或者用更少的词：不。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:44:50.690

现代 CPU 硬件（例如高速缓存行）中已经内置了一些东西，它们可以像您描述的那样做一些事情，但以临时变量无法做到的方式更好。甚至更好的是，不需要修改源代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-29T13:08:52.617

不。阵列访问不是由闪闪发光和爱组成的神奇的零占用空间。从 C 中的数组索引确定地址的算法可以在[这里](http://codinghighway.com/?p=1159)看到。数组上的维度越多，访问速度就越慢，因为需要额外的操作（主要是`mul`s 和条件，在成本方面）才能到达最终的一维内存地址。即使你的数组​​只有一维，你仍然需要计算基地址上的偏移量，这是一个单一的`add`操作，因此 O(1)。

# php - 使用关系表查找所有朋友

> ID：14745085
> 
> 赞同：1
> 
> 时间：2013-02-07T06:35:21.147
> 
> 标签：php, mysql, sql

有了周围的所有工具和 CMS，我一直很容易创建应用程序。虽然我第一次不得不在没有任何 ORM 的情况下使用高级 SQL，所以我不知道如何获得我正在寻找的结果。

我正在尝试制作一个用户朋友系统。基本上一个用户可以添加另一个用户为好友，好友用户可以接受。我有两个表用户和用户关系。Users表有明显的，用户信息和User_Relationships表有relation_setter（请求者用户的id），relation_getter（被请求用户的id）和active

问题是我需要在页面上显示所有朋友（活动或非活动）。我知道以下查询是错误的，但这是我想出的：

```
$sql = "SELECT *
        FROM users_relationships
        LEFT JOIN users
        ON users_relationships.relation_setter = users.user_id
        WHERE users_relationships.relation_getter = " . $logged_in_id.
      " OR users_relationships.relation_setter = " . $logged_in_id; 
```

我需要的是关系表中的所有用户作为 $logged_in_user 的 setter 或 getter。简单地说，我需要所有与我成为朋友的人，无论是谁添加了他们，我或他们，并且基于我为每一行获得的“活动”值，它会打印“请求待处理”或不打印。

上面的查询给我带来了非常复杂的结果，其中许多重复的请求挂起也是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:39:18.477

`JOIN`桌子`Users`再一次是这样的：

```
SELECT 
  us.UserName AS SetterName,
  ug.UserName AS GetteerName,
  ur.Active AS Status,
  ...
FROM users_relationships ur
LEFT JOIN users us ON ur.relation_setter = us.user_id
LEFT JOIN users ug ON ur.relation_getter = ug.user_id 
WHERE $logged_in_id IN(ur.relation_getter, ur.relation_setter); 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/8b152/1)

* * *

## 更新 1

为了将朋友列表作为一个列表而不是两个用户名，您可以这样做：

```
SELECT 
  us.UserName AS FriendName,
  ur.Active AS Status
FROM 
(
  SELECT relation_setter user_id, active 
  FROM users_relationships
  WHERE relation_getter = $logged_in_id 
  UNION  
  SELECT relation_getter, active 
  FROM users_relationships
  WHERE relation_setter = $logged_in_id 
) AS ur
LEFT JOIN users us ON ur.user_id = us.user_id; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/8b152/6)

这将为您提供登录用户的朋友名称列表。

* * *

## 更新 2

**这个查询是如何工作的？**

登录使用的列表是 a`relation_setter`或`relation_getter`。因此，为了将这两个放在一列中，我使用两个查询来获取它们中的每一个，一个用于`relation_setter`：

```
 SELECT relation_setter user_id, active 
  FROM users_relationships
  WHERE relation_getter = $logged_in_id 
```

另一个用于`relation_getter`：

```
 SELECT relation_getter, active 
  FROM users_relationships
  WHERE relation_setter = $logged_in_id 
```

然后我曾经**[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)**将它们作为一个结果集：

```
 SELECT relation_setter user_id, active 
  FROM users_relationships
  WHERE relation_getter = $logged_in_id 
  UNION  
  SELECT relation_getter, active 
  FROM users_relationships
  WHERE relation_setter = $logged_in_id 
```

这个查询将把来自两个查询的所有数据放入两个字段`user_id`中`active`。

**注意：**

*   `UNION`是隐式选择不同的行，它将消除重复的行，但`UNION ALL`会保留那些重复的行。

*   两个联合的结果集将具有在第一个选择中指定的列名；在我们的查询中，第二个选择的第一列具有名称`relation_getter`，来自该列的值将在下面，`userid`因为它是在第一个查询中定义的。

然后我将这两个联合查询包含在一个子查询中并将它与`Users`表连接起来，我们就完成了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:46:06.320

```
$sql = "SELECT *
        FROM users_relationships rel
        LEFT outer JOIN users from  ON rel.relation_setter = from.user_id
        LEFT outer JOIN users to ON rel.relation_getter = to.user_id
        WHERE rel.relation_getter in (" . $logged_in_id. "," . $logged_in_id . ")"; 
```

# zend-framework - 选择适当的 Zend Framework 异常类

> ID：14745088
> 
> 赞同：2
> 
> 时间：2013-02-07T06:35:29.873
> 
> 标签：zend-framework

使用 Zend Framework，如果传递的参数对于该方法来说是非法的，我想在模型类中的特定方法内抛出异常。例如，在 Java 中，我会这样做：

```
public void addName(String name) {
 if (name.equals('')) {
  throw new IllegalArgumentException();
 }
 // Other code if everything is ok.
} 
```

但是，据我所知，PHP 和 Zend Framework 缺少像`IllegalArgumentException`. 那么我应该使用什么来正确传递一个实际描述出了什么问题的异常呢？自己创建这样的异常类？但是框架不应该消除这种代码吗？

我刚开始学习 Zend 框架。我一生中没有写过很多 PHP，所以请随时向我解释一些你认为对于一个体面的 PHP 程序员来说应该是显而易见的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:49:11.710

下面是[PHP SPL 异常类](http://www.php.net/manual/en/spl.exceptions.php)中可用异常的列表。

```
Exception
     LogicException
         BadFunctionCallException
         BadMethodCallException
         DomainException
         InvalidArgumentException
         LengthException
         OutOfRangeException
     RuntimeException
         OutOfBoundsException
         OverflowException
         RangeException
         UnderflowException
         UnexpectedValueException 
```

Zend Framework`Zend_Exception`只是 PHP 内置异常的一个包装器，但是大多数主要组件都有一个可调用的异常类。

例如：

```
public function setId($id)
    {
        $validator = new My_Validator_Id();
        if ($validator->isValid($id)) {
            $this->id = $id;
            return $this;
        } else {
            throw new Zend_Validate_Exception("$id is not a valid value for the ID field.");
        }
    } 
```

或使用 PHP 的内置异常：

```
public function __get($name)
    {
        $property = strtolower($name);

        if (!property_exists($this, $property)) {
            throw new \InvalidArgumentException(
                "Getting the property '$property' is not valid for this entity");
        }
        //truncated...
    } 
```

Zend Framework 2 有更具体的`exceptions`可用。

# jquery - bezierCurveTo() 与自定义滚动路径 Jquery 插件

> ID：14745090
> 
> 赞同：1
> 
> 时间：2013-02-07T06:35:41.963
> 
> 标签：jquery, path, scroll

我正在使用 jQuery 插件：来自[https://github.com/JoelBesada/scrollpath](https://github.com/JoelBesada/scrollpath)的自定义滚动路径。我看到他们为 bezierCurveTo 添加了功能，但效果不是很好。路径绘制不正确。有人可以帮我吗？

非常感激！

# highcharts - 如何将 highcharts 折线图点颜色设置为颜色数组？

> ID：14745092
> 
> 赞同：5
> 
> 时间：2013-02-07T06:35:48.650
> 
> 标签：highcharts

我花了一些时间浏览 API 文档，但我没有看到解决问题的简单方法。这就是我要找的：

在图表中，我可以将每条线设置为我选择的不同颜色

```
colors: [ 'red', 'green', 'blue ] 
```

但是，如果我希望点的颜色与线的颜色不同怎么办？

我知道我可以设置

```
 plotOptions: {
        series: {
            marker: {
                fillColor: 'yellow',
                lineColor: 'yellow' 
            }
        }
    }, 
```

但是如果我希望每个点标记都是不同的颜色呢？（例如，我希望蓝线有深蓝色点，红线有深红色点，绿线有深绿色点。

我想我想做一些事情

```
borderColors: [ 'darkBlue', 'darkGreen', 'darkRed' ] 
```

或任何与fillColors相同的东西......

有什么方法可以让我很容易地做到这一点，但我错过了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:59:57.873

定义系列中的标记...

我在 api 中找到了这个：[Highchart symbol api](http://api.highcharts.com/highcharts#plotOptions.series.marker.symbol)

链接到这个小提琴： [High char jsfiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-symbol/)

更改代码以使用颜色：

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 316.4, 294.1, 195.6, 154.4],
        marker: {
                fillColor: '#f11',
                lineWidth: 2,
                lineColor: '999'
        }
    }, {
        data: [216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5],
        marker: {
                fillColor: '#999',
                lineWidth: 2,
                lineColor: '#111' 
        }
    }]
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:09:36.153

您可以明确指定每个系列的线条颜色和标记颜色。

[**`Series Color`**](http://api.highcharts.com/highcharts#series.data.color)将颜色设置为系列。

[**`Markers Color`**](http://api.highcharts.com/highcharts#series.data.marker.fillColor)将颜色设置为系列中的每个点。

## [**演示**](http://jsfiddle.net/gopinaghr/GfjmL/2/)。

# c# - 使用 NUnit 的 Selenium WebDriver 测试用例的单独类

> ID：14745099
> 
> 赞同：0
> 
> 时间：2013-02-07T06:36:25.580
> 
> 标签：c#, c#-4.0, selenium, automated-tests, selenium-webdriver

我正在将 Selenium WebDriver 与 NUnit 一起使用。我只是不想将我所有的测试用例（即我的代码）放在一个 C# 类中。我想要一个有驱动程序启动的课程。另一个具有登录测试用例的类。另一个具有患者表格测试用例的类。等等。

当我使用 NUnit 时，它不需要 Main 方法。它只是自己调用方法。如果我在另一个类中创建了驱动程序，我将如何访问另一个类中的驱动程序？

在 Login 类中创建 Driver 类的对象在性能方面是否会很好？我认为这会扼杀 NUnit 的目的。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:49:42.970

最简单的方法是

您可以将 Web Driver 实例声明为`Static`变量并在所有包中使用。记住一件事静态变量是一个服务器端变量，所以当你完成你的执行时无效。

另一种有效的方法是您可以使用`Java Reflection`API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:58:23.220

查看用于 WebDriver的[PageObject 模型模式。](http://code.google.com/p/selenium/wiki/PageObjects)
在那里，您根据 Pages 隔离您的测试规范代码和测试实现代码。您的页面对象只不过是代表应用程序的页面/更高级别部分的类。您在主测试类中启动一个 WebDriver 实例，并将它的对象传递给其构造函数中的 PageObjects。

# javascript - 谷歌地图 api 3 信息窗口

> ID：14745100
> 
> 赞同：1
> 
> 时间：2013-02-07T06:36:31.493
> 
> 标签：javascript, google-maps, infowindow

您好我正在尝试将此代码用于我正在使用 Google Maps API 进行的项目。

我想知道是否有人知道如何在信息窗口的街景下方添加一个调用 url 链接的 var。

```
function initialize() {

    // Create the map 
    // No need to specify zoom and center as we fit the map further down.
    var map = new google.maps.Map(document.getElementById("map_canvas"), {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false
    });

    // Create the shared infowindow with two DIV placeholders
    // One for a text string, the other for the StreetView panorama.
    var content = document.createElement("DIV");
    var title = document.createElement("DIV");
    content.appendChild(title);
    title.style.color ="gray";
    title.style.height = "30px";
    var streetview = document.createElement("DIV");
    content.appendChild(streetview);
    streetview.style.width = "260px";
    streetview.style.height = "160px";
    streetview.style.background ="red";
    var aqui = document.createElement("DIV");
    content.appendChild(aqui);
    aqui.style.color ="gray";
    aqui.style.height = "30px";
    var infowindow = new google.maps.InfoWindow({
        content: content
    });

    // Define the list of markers.
    // This could be generated server-side with a script creating the array.
    var markers = [
        { lat: 0, lng: -0, name: "name", icon: "icon.png" },
        { lat: 0, lng: -0, name: "name", icon: "icon.png" },
        { lat: 0, lng: -0, name: "name", icon: "icon.png"  },
        { lat: 0, lng: -0, name: "name", icon: "icon.png"}
    ];

    // Create the markers
    for (index in markers) 
        addMarker(markers[index]);

    function addMarker(data) {
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(data.lat, data.lng),
        icon: data.icon,
            map: map,
            title: data.name
        });
        google.maps.event.addListener(marker, "click", function() {
            openInfoWindow(marker);
        });
    }

    // Zoom and center the map to fit the markers
    // This logic could be conbined with the marker creation.
    // Just keeping it separate for code clarity.
    var bounds = new google.maps.LatLngBounds();
    for (index in markers) {
        var data = markers[index];
        bounds.extend(new google.maps.LatLng(data.lat, data.lng));
    }
    map.fitBounds(bounds);

    // Handle the DOM ready event to create the StreetView panorama
    // as it can only be created once the DIV inside the infowindow is loaded in the DOM.
    var panorama = null;
    var pin = new google.maps.MVCObject();
    google.maps.event.addListenerOnce(infowindow, "domready", function() {
        panorama = new google.maps.StreetViewPanorama(streetview, {
            navigationControl: false,
            enableCloseButton: false,
            addressControl: true,
            linksControl: false,
            visible: true
        });
        panorama.bindTo("position", pin);
    });

    // Create a StreetViewService to be able to check
    // if a given LatLng has a corresponding panorama.
    var service = new google.maps.StreetViewService();

    // Set the infowindow content and display it on marker click.
    // Use a 'pin' MVCObject as the order of the domready and marker click events is not garanteed.
    function openInfoWindow(marker) {
        title.innerHTML = marker.getTitle();
        streetview.style['visibility'] = 'hidden';
        service.getPanoramaByLocation(marker.getPosition(), 50, function(result, status) {
            if (status == google.maps.StreetViewStatus.OK) {
                pin.set("position", marker.getPosition());
                streetview.style['visibility'] = '';
            }
        })
        infowindow.open(map, marker);
    }
} 
```

# iphone - 如何找到上传的剩余时间

> ID：14745104
> 
> 赞同：0
> 
> 时间：2013-02-07T06:36:44.680
> 
> 标签：iphone, ios, file-upload, upload

在我的 Iphone 应用程序中，我正在将视频上传到服务器。我可以找出总咬数和上传咬数。有没有办法找到上传过程完成的剩余时间

我正在打印这样的咬痕-----上传的字节数-----总字节数-----------

```
2013-02-07 01:25:33.439 VideoProject[9170:907] ------32768------2195238-----------
2013-02-07 01:25:33.451 VideoProject[9170:907] ------65536------2195238-----------
2013-02-07 01:25:33.456 VideoProject[9170:907] ------98304------2195238-----------
2013-02-07 01:25:33.462 VideoProject[9170:907] ------131072------2195238-----------
.
.
.
.
2013-02-07 01:25:54.443 VideoProject[9170:907] ------2129920------2195238-----------
2013-02-07 01:25:54.449 VideoProject[9170:907] ------2145728------2195238----------- 
2013-02-07 01:25:55.215 VideoProject[9170:907] ------2162688------2195238----------- 
2013-02-07 01:25:55.222 VideoProject[9170:907] ------2193380------2195238-----------
2013-02-07 01:25:55.542 VideoProject[9170:907] ------2195238------2195238----------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:43:00.690

您可以保存开始日期，并在每次调用进度函数（或块）时，计算自开始以来经过的时间，并通过简单的交叉乘法找到估计的剩余时间量，因为您知道还剩多少字节：

```
elapsed_time * total_bytes = total_time * downloaded_bytes
remaining_time = total_time - elapsed_time 
```

但是，是的，网络状况可能随时变化，所以这并不准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:47:58.170

使用可达性你可以实现这个点击[这里](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

使用可达性你可以计算网络的速度，然后用这个速度你可以划分剩余的字节，并可以产生上传剩余时间等的结果。

希望这可以帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T06:58:28.073

*   以秒为单位获取上传字节的时间。
*   以秒为单位估计总时间。这可以通过比较字节找到
*   通过寻找差异找到剩余时间。
*   使用以下获取小时，分钟，秒。

`

```
- (NSDictionary*)createTimemapForSeconds:(int)seco                                   
  {
       int hours = floor(seco / (60 * 60) );

       float minute_divisor = seco % (60 * 60);
       int minut = floor(minute_divisor / 60);

       float seconds_divisor = seco % 60;
       seco = ceil(seconds_divisor);

       NSDictionary * timeMap = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:[NSNumber numberWithInt:hours], [NSNumber numberWithInt:minut], [NSNumber numberWithInt:seco], nil] forKeys:[NSArray arrayWithObjects:@"h", @"m", @"s", nil]];

       return timeMap;
    } 
```

# java - 如何从 Spring AOP 处理范围中排除 bean/包

> ID：14745107
> 
> 赞同：0
> 
> 时间：2013-02-07T06:36:54.903
> 
> 标签：java, spring, jmx, spring-aop, spring-integration

如何排除 bean 或包**Spring AOP**处理范围中排除 bean 或包？

**我在修复JBoss上的****Spring Integration JMX**支持问题时遇到了这个问题。

 **作为开发环境，我们使用**Spring 3.2.0.RELEASE**、**Spring Integration 2.2.0.RELEASE**和**Jboss AS 7.1.1**。

启用**Spring Integration JMX**时，您实际上是在创建**IntegrationMBeanExporter** ，它从底层**ApplicationContext**中提取所有与**Spring Integration**相关的 bean并创建适当的托管**MBean**。用于将创建的**MBean**分配给所需的服务器**MBeanServer**，必须在**ApplicationContext**中定义，通常使用标准**MBeanServerFactoryBean**完成，它返回平台相关**************MBeanServer**。************

 ****问题出现了，因为我们使用**Spring AOP**进行一些增强操作，而**AOP 后处理机制**试图像普通**bean一样处理平台****mbeanServer**，验证****初始平台 ClassLoader**，最终它失败了。**

 **这似乎类似于[https://jira.springsource.org/browse/SPR-9335](https://jira.springsource.org/browse/SPR-9335)，但具有通用细节。

因此，作为一种解决方案，我阻止**spring将****mbeanServer**作为 ApplicationContext 的一部分进行处理：

```
<bean id="jmxIntegration" scope="singleton" class="org.springframework.integration.monitor.IntegrationMBeanExporter">
    <property name="server" value="#{ T(org.springframework.jmx.support.JmxUtils).locateMBeanServer() }"/>
</bean> 
```

这行得通，但这似乎是一个更普遍的问题，与**AOP**。

另外有趣的一点是，春天的**MBeanExporter**也指的是**JmxUtils**而不是上下文的**MBeanServer**。********

# .net - 无法从浏览器调用 SSRS 管理器链接

> ID：14745108
> 
> 赞同：1
> 
> 时间：2013-02-07T06:36:55.090
> 
> 标签：.net, reporting-services

我已配置 Microsoft SQL 报告服务器。我在服务帐户中设置了我的管理员用户名和密码。所有配置都运行良好。但是当我从浏览器调用服务器管理器链接时，将显示身份验证对话框。我已设置我的服务帐户用户名和密码并登录。但是我进不去。我怎样才能进入？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:20:00.820

也许有两件事要尝试。

**1 - 报表服务器权限**

这些不同于服务帐户权限。默认情况下，只有*BUILTIN\Administrators*组可以访问报表服务器。您的用户是服务器管理员吗？

如果是这样，请尝试通过 IE 使用**Run As Administrator**访问 Report Manager 网站。

**2 - 验证对话框**

您可以将 IE 配置为自动传递您的 Windows 用户凭据。

您需要查看 IE 配置中的用户身份验证权限。

此链接包含更多信息：[输入凭据](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/878c6a48-892b-4c98-b0b4-3de55ab4f83a)。

如果这些不起作用，您将需要提供更多信息，例如错误消息的屏幕截图、日志中任何错误的详细信息等。

# c# - WebMatrix - 为 CSHTML 页面创建控制器

> ID：14745112
> 
> 赞同：2
> 
> 时间：2013-02-07T06:37:21.850
> 
> 标签：c#, asp.net, asp.net-mvc, razor, webmatrix

我正在使用 WebMatrix 开发一个网站。我最近问了一个关于从数据库中获取数据的问题。当我尝试在我的 CSHTML 页面中编写数据逻辑时，我很快就被告知这样做是错误的，因为我违背了 MVC 的原则。问题是，在 Visual Studio 2010 中，MVC 对我来说很容易，每个页面都有一个视图`page.aspx`和一个控制器`page.aspx.cs`，但在 WebMatrix 中，我使用的是 Razor C# 语法，所以我的页面只是一个`page.cshtml`文件。当我创建一个新站点或一个新文件时，没有 MVC 模板，所以我必须自己创建视图和控制器。

如何显示`page.cshtml`使用控制器从数据库中获取的数据（我的控制器会是“page.cshtml.cs”吗？）？换句话说，如何将页面数据逻辑与其实际内容/标记/视图分开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:39:42.370

我认为您将 ASP.NET MVC 与 WebMatrix WebPages 混淆了。您只使用所有代码都在 Razor 模板中的网页。没有控制器的概念。

但即使在 WebMatrix 中，您也可以将数据访问代码分隔在单独的文件中。创建一个名为的特殊文件夹`~/App_Code`，在此文件夹中您可以创建 .NET 类。例如，您可以有一个`DataAccess.cs`可以放置数据访问逻辑的文件。您还可以引用您创建的外部程序集。例如：

```
@using MyNamespace

@{
    DataAccess myClass = new DataAccess();
    ...
} 
```

# jsp - jsp图像显示

> ID：14745115
> 
> 赞同：0
> 
> 时间：2013-02-07T06:37:41.203
> 
> 标签：jsp, jsp-tags, jspinclude, jspx

我试过这段代码使用blob显示来自MySQL数据库的图像...图像不可见。我用过这段代码。

请纠正这个错误

```
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <img src="WEB-INF/New folder/birthhappy birthday.jpeg"
         width="65" height="71" alt="birthhappy birthday"/>    
        <H1>Database Lookup</H1>
        <FORM ACTION="base.jsp" METHOD="POST">
            Please enter the ID of the publisher you want to find:
            <BR>
            <input type="text" name="imagename">
            <BR>
            <INPUT TYPE="SUBMIT" value="Submit">
        </FORM>

    </body>
</html> 
```

base.jsp：

```
<%@page import="java.io.OutputStream"%>
<%@ page import="java.sql.*" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

         <% 

        Class.forName("com.mysql.jdbc.Driver");
        Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/searchimg","root","");
         Statement stmt = con.createStatement();
          //String id = request.getParameter("id"); 
          String imagename=request.getParameter("imagename");

          ResultSet resultset =stmt.executeQuery("select * from friendupload where imagename = '" +imagename.trim()+ "' ") ; 

 while(resultset.next())
{

%>                                      

<table>
    <tr>
        <td> <%=resultset.getString(1)%>         </td>
        <td>   <%=resultset.getString(2) %> </td>
        <td>    <%=resultset.getString(3)%>  </td>
                <td>     
                    Blob getimg=rs.getBlob( 4);
      InputStream readImg = getimg.getBinaryStream();
      int size=readImg.available();
      OutputStream outf=new FileOutputStream("D:/profile/"+rs.getString(2)+rs.getString(3)+".jpeg");

      byte b[]= new byte[size];
            readImg.read(b);
            outf.write(b);
            outf.close();

        </td>

    </tr>
    </table>

<% }%>

        </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:00:04.827

有时浏览器不允许您使用本地硬盘驱动器中的资源。

您最好编写一个 ImageServlet 来直接传递这些图像，而无需将它们写入文件。

**注意：**如果您使用分块流（默认）传送这些图像，请指定内容长度！否则浏览器将不知道响应何时结束。这会导致防病毒程序永无止境地分析这些图像。

**顺便说一句**：WEB-INF/New folder/birthhappybirthday.jpeg 无法访问，尝试使用 WEB-INF/classes/META-INF/resources/New folder/birthhappybirthday.jpeg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:49:15.483

为您存储的图像提供正确的路径，因此在 blob 保存图像后，您应该使用图像标签加载它，只是给 blob 不会显示图像。

```
<%while(resultset.next())
{
%>                                      
<table>
<tr>
    <td> <%=resultset.getString(1)%>         </td>
    <td>   <%=resultset.getString(2) %> </td>
    <td>    <%=resultset.getString(3)%>  </td>
            <td>     
                Blob getimg=rs.getBlob( 4);
  InputStream readImg = getimg.getBinaryStream();
  int size=readImg.available();
  OutputStream outf=new FileOutputStream("D:/profile/"+rs.getString(2)+rs.getString(3)+".jpeg");

  byte b[]= new byte[size];
        readImg.read(b);
        outf.write(b);
        outf.close();

  <image src="<%=path%>" />

    </td>

</tr>
</table> 
```

您是否检查过图像文件是否保存在您指定的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:51:16.050

您的`<form>`标签丢失，并确保 d:\profile/ 目录`<img>`在表单元素中存在使用元素

# python - Django 管理站点中数据输入的最佳实践（同一模型上的不同 ModelAdmin）

> ID：14745117
> 
> 赞同：1
> 
> 时间：2013-02-07T06:37:44.170
> 
> 标签：python, django, django-admin

将自定义视图添加到 Django 管理站点以进行协调数据输入的最佳实践是什么？我有一个模型*foo*，它已经有一个`ModelAdmin _FooAdmin_`. 这对于编辑和调整数据很有用，但为了方便批量数据输入，我想添加一个额外的视图，它有一个表单可以一次添加，比如 20 个*foo*。

我无法将另一个 ModelAdmin 添加为 Django 错误`AlreadyRegistered: The model foo is already registered`。

我在[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-views-to-admin-sites)中看到了我可以覆盖`get_urls()`的内容，但这似乎有点骇人听闻，因为我想要的只是`ModelAdmin`同一模型上的两个略有不同的 '。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:36:25.273

我有模型 InspectorCheck 和同一模型的两个 ModelAdmin 类 - 一个显示已删除字段等于 False 的记录，第二个显示已删除记录。

此函数创建从主模型继承的新代理模型类：

```
def create_proxymodel(model_from, name=None, attrs=None, meta=None):
    attrs, meta = (attrs if attrs else {}, meta if meta else {})

    class  Meta:
        proxy = True
        app_label = model_from._meta.app_label

    for k, v in meta.items():
        setattr(Meta, k, v)

    attrs.update({'__module__': '', 'Meta': Meta})
    newmodel = type(name, (model_from,), attrs)

    return newmodel 
```

**两个用于不同目的的 ModelAdmins：**

```
class InspectorCheckAdmin(admin.ModelAdmin):
    list_display = ('id', 'check_address', 'check_form', 'check_target_name')

class InspectorCheckAdminDeleted(admin.ModelAdmin): # or inherit from other ModelAdmin
    list_display = ('id', 'check_address', 'check_form', 'check_target_name', 'editor', 'updated')
    def queryset(self, request):
        return InspectorCheck.trash

#and in last step create and register both classes:

InspectorCheckDeleted = create_proxymodel(InspectorCheck, 'InspectorCheckDeleted', meta={
    'verbose_name': u'Inspector check (deleted)',
    'verbose_name_plural': u'Inspector checks (deleted)'}
)
admin.site.register(InspectorCheck, InspectorCheckAdmin)
admin.site.register(InspectorCheckDeleted, InspectorCheckAdminDeleted) 
```

# wso2 - WSO2：代理服务与业务流程（BPEL）

> ID：14745121
> 
> 赞同：3
> 
> 时间：2013-02-07T06:38:20.753
> 
> 标签：wso2, soa, wso2esb, bpel

我是 WSO2 堆栈的新手，想知道何时应该使用 WSO2 ESB 代理服务以及何时通过 BPEL 创建业务流程？

我认为他们在做同样的事情——通过服务组合和一些中介来执行任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T00:05:55.473

ESB 和 BPEL 之间存在根本区别。

**ESB 的作用**是为业务请求提供各种**非功能属性。****因此， ESB**用于请求的*调解*、*转换*、*安全*和*虚拟化/代理*。虽然它可以使用序列图进行一些简单*的消息丰富*，但它的主要目的是在系统中的各种服务/主机之间调解消息。

另一方面，**BPEL**致力于实现业务服务和处理复杂的业务工作负载。因此，**BPEL 的作用**是为业务流程提供**功能属性**——例如实现实际的业务流程逻辑。

因此，ESB 和 BPEL 一起提供了**关注点分离，**这通常被组件和面向服务的体系结构所强调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:44:53.817

如果您有一个定义明确的长期运行的业务流程，您需要使用 WSO2 BPS。您可以将 WSO2 ESB 用于具有较短生命周期的短跨度流程。WSO2 BPS 有许多集成点，您可以使用人工任务等功能控制业务流程。另一方面，ESB 具有这些功能，但对于长期运行且定义良好的业务流程，它可能不像 BPS 那样方便和优化。

# wordpress - buddypress注册问题

> ID：14745122
> 
> 赞同：0
> 
> 时间：2013-02-07T06:38:32.370
> 
> 标签：wordpress, registration, buddypress

请建议我如何停止使用 buddypress 注册和个人资料页面。因为，我已经有注册和个人资料页面。我只想用那个。我之前的注册页面“ [http://www.ferie.nu/wp-login.php?action=register](http://www.ferie.nu/wp-login.php?action=register) ”正在重定向到好友新闻的注册页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:23:07.773

如果您已经有一个注册页面，请选择该页面作为 buddypress 注册页面。

1.  转到仪表板。
2.  在设置菜单-> buddypress 下。
3.  单击buddypress设置中的“页面”选项卡。
4.  在注册部分下，从下拉列表中选择您的注册页面并保存。

有了这个，您可能会被重定向到您的注册页面。

# linux - 如何 tar 目录但排除文件

> ID：14745123
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:38:35.510
> 
> 标签：linux, tar, gunzip

我想 tar.gz 一个目录但想排除一个大文件？用于中间提取。转储将被写入并希望保留。

```
E.g tar -zcf remote_test.tar.gz mydir/* except tsung.dump 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:51:25.840

来自[`man tar`](http://linux.die.net/man/1/tar)：

> ```
>  --exclude=PATTERN
>        exclude files, given as a PATTERN 
> ```

所以你可以使用

```
 tar -zcf remote_test.tar.gz --exclude=tsung.dump mydir/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:55:33.680

tar有一个[排除选项](http://www.cyberciti.biz/faq/exclude-certain-files-when-creating-a-tarball-using-tar-command/)。如果您想将`mydir`除 a 之外的所有内容 tar `tsung.dump`，该命令将如下所示：

```
$ tar -zcf remote_test.tar.gz --exclude='tsung.dump' mydir 
```

# javascript - 从子窗口访问父窗口？

> ID：14745124
> 
> 赞同：1
> 
> 时间：2013-02-07T06:38:38.837
> 
> 标签：javascript

我有一个名为 worklistManager.jsp 的主窗口。
worklistManager.jsp 有一个名为 processManager.jsp 的弹出窗口。
同样，processManager.jsp 有另一个弹出窗口，名为 eventLog.jsp。
eventLog.jsp 再次有一个名为 eventUsers.jsp 的弹出窗口。

eventUsers.jsp 有一个 dojox/grid/DataGrid 和一个按钮。在网格中选择特定行，然后单击按钮后，必须在关闭 eventUsers.jsp 后将值放入 eventLog.jsp 的文本框中。

到目前为止，我已经尝试了下面的脚本来完成此操作，但它并没有像我希望的那样工作。

```
<script type="text/javascript">
function getEventLogUserSelect(){
    if(dijit.byId('dynamiceventusergridCWUSER')){
        var selctedItem = dijit.byId('dynamiceventusergridCWUSER').selection.getSelected();
        if(selctedItem.length){
            dojo.forEach(selctedItem, function(selectedItem){
                if(selectedItem !== null){
                    dojo.forEach(dijit.byId('dynamiceventusergridCWUSER').store.getAttributes(selectedItem), function(attribute){
                        var value = dijit.byId('dynamiceventusergridCWUSER').store.getValues(selectedItem, attribute);
                        if(attribute == "USERID"){
                            window.opener.SetValue(value);
                            window.close();
                        }

                    });
                }
            });
            //alert("grid row selected");
        }else{
            alert("grid row not selected");
        }
    }
    if(gbshowgridFlag==false){
        alert("grid not loaded");
    }
}
function SetValue(val){
       var txt = document.getElementById('CWPROCESSEVENTLOG.USER_ID');
       txt.value = val;

    }
</script> 
```

# html - 响应式布局延迟？

> ID：14745141
> 
> 赞同：0
> 
> 时间：2013-02-07T06:40:01.170
> 
> 标签：html, css, web, responsive-design

我想知道您如何在响应式设计中创建“延迟”？

我的意思是，以网站[awwwards.com](http://www.awwwards.com)为例。当您减小浏览器的宽度时，网站的响应会有一点延迟。

我会想象代码是这样的：

```
html, body {transition: all 0.2s ease-in-out;} 
```

但显然它不是（......或者是吗？！）

只想将此效果应用于我自己的网站[Blue Harlequin](http://www.blueharlequin.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:44:36.180

它确实有`transition: width 0.3s linear 0s;`，但它在`wrapper div`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:03:51.657

像这样添加`-webkit-transition: width 0.3s linear;` 到您的`.w`CSS类

CSS：

```
.w {
    width: 960px;
    margin: 0 auto;
   -webkit-transition: width 0.3s linear;
   } 
```

因为 .w 是所有元素的容器，所以将过渡添加到该类将使布局符合您的预期。

# mysql - 在mysql中使用存储过程插入日期维度日期时出错

> ID：14745145
> 
> 赞同：1
> 
> 时间：2013-02-07T06:40:08.710
> 
> 标签：mysql, date, stored-procedures

我正在使用以下存储过程来填充日期维度。它给出了以下错误

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的“DELETE FROM Date_Dim SET v_full_date = p_start_date WHILE v_full_date < p_end_d”附近使用正确的语法

```
CREATE PROCEDURE datedimbuild (p_start_date DATE, p_end_date DATE)

BEGIN

DECLARE v_full_date DATE
DELETE FROM Date_Dim
SET v_full_date = p_start_date

WHILE v_full_date < p_end_date 
DO
 INSERT INTO Date_Dim 
(
            Full_Date ,
            DayOfMonth ,
            DayOfYear ,
            DayOfWeek ,
            Day_Name ,
            Month_Number,
            Month_Name,
            Year,
            Quarter
  )
 VALUES 
(
            v_full_date,
            DAYOFMONTH(v_full_date),
            DAYOFYEAR(v_full_date),
            DAYOFWEEK(v_full_date),
            DAYNAME(v_full_date),
            MONTH(v_full_date),
            MONTHNAME(v_full_date),
            YEAR(v_full_date),
            QUARTER(v_full_date)
   );

SET v_full_date = DATE_ADD(v_full_date, INTERVAL 1 DAY)

END WHILE
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:46:34.117

您必须分隔语句。尝试这个：

```
DELIMITER $$

CREATE PROCEDURE datedimbuild (p_start_date DATE, p_end_date DATE)

BEGIN

DECLARE v_full_date DATE;
DELETE FROM Date_Dim;
SET v_full_date = p_start_date;

WHILE v_full_date < p_end_date 
DO
 INSERT INTO Date_Dim 
(
            Full_Date ,
            DayOfMonth ,
            DayOfYear ,
            DayOfWeek ,
            Day_Name ,
            Month_Number,
            Month_Name,
            Year,
            Quarter
  )
 VALUES 
(
            v_full_date,
            DAYOFMONTH(v_full_date),
            DAYOFYEAR(v_full_date),
            DAYOFWEEK(v_full_date),
            DAYNAME(v_full_date),
            MONTH(v_full_date),
            MONTHNAME(v_full_date),
            YEAR(v_full_date),
            QUARTER(v_full_date)
   );

SET v_full_date = DATE_ADD(v_full_date, INTERVAL 1 DAY);

END WHILE;
END $$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:47:42.663

利用

```
DELIMITER |

CREATE PROCEDURE datedimbuild (p_start_date DATE, p_end_date DATE)

BEGIN

DECLARE v_full_date DATE;
DELETE FROM Date_Dim;
SET v_full_date = p_start_date;

WHILE v_full_date < p_end_date 
DO
 INSERT INTO Date_Dim 
(
            Full_Date ,
            DayOfMonth ,
            DayOfYear ,
            DayOfWeek ,
            Day_Name ,
            Month_Number,
            Month_Name,
            Year,
            Quarter
  )
 VALUES 
(
            v_full_date,
            DAYOFMONTH(v_full_date),
            DAYOFYEAR(v_full_date),
            DAYOFWEEK(v_full_date),
            DAYNAME(v_full_date),
            MONTH(v_full_date),
            MONTHNAME(v_full_date),
            YEAR(v_full_date),
            QUARTER(v_full_date)
   );

SET v_full_date = DATE_ADD(v_full_date, INTERVAL 1 DAY);

END WHILE;
END;
| 
```

# android-layout - 无法检测 .java 文件中的错误

> ID：14745148
> 
> 赞同：1
> 
> 时间：2013-02-07T06:40:30.163
> 
> 标签：android-layout

在下面的 java 文件中，我声明了一个 imageview 和 TextView 。

```
 int numRow = 6;
        int numCol = 4;

        TableLayout tblLayout = (TableLayout)findViewById(R.id.tblLayout);

        for(int i = 0; i < numRow; i++) {
            HorizontalScrollView HSV = new HorizontalScrollView(this);
            HSV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

            TableRow tblRow = new TableRow(this);
            tblRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            tblRow.setBackgroundResource(R.drawable.bookshelf);
          //  tblRow.setGravity(Gravity.CENTER | Gravity.BOTTOM);

            for(int j = 0; j < numCol; j++) {

                 ImageView imageView = new ImageView(this);
                 imageView.setImageResource(R.drawable.icon);
                 imageView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

                 TextView textView = new TextView(this);
                 textView.setText("Java Tester");
                 textView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
              //   textView.setTextColor(Color.parseColor("#FFFFFF"));
                //Sultan
                tblRow.addView(imageView,j);
              //  tblRow.addView(textView,j);
            }

            HSV.addView(tblRow);
            tblLayout.addView(HSV, i); 
```

但是 textview 的文本没有显示在屏幕上。问题是什么 ？

![在此处输入图像描述](../Images/e00061c9b943b634c7a60615f05031e6.png)

我想在 TextView 下面显示文本“Java Tester”。为此我能做些什么？

# java - apache lucene 索引和搜索文件路径

> ID：14745149
> 
> 赞同：0
> 
> 时间：2013-02-07T06:40:34.653
> 
> 标签：java, lucene

我正在使用 apache lucene 来索引 html 文件。我将 html 文件的路径存储在 lucene index 中。它存储索引，并且我已经在 luke all 中检查了它。但是当我搜索文件的路径时，它返回的文档数量非常高。我希望它应该搜索存储在 lucene 索引中的确切路径。我正在使用以下代码

```
for index creation

   try{
         File indexDir=new File("d:/abc/")
        IndexWriter indexWriter = new IndexWriter(
             FSDirectory.open(indexDir),
            new SimpleAnalyzer(),
            true,
            IndexWriter.MaxFieldLength.LIMITED);
            indexWriter.setUseCompoundFile(false);
        Document doc= new Document();
        String path=f.getCanonicalPath();
          doc.add(new Field("fpath",path,
        Field.Store.YES,Field.Index.ANALYZED));
        indexWriter.addDocument(doc);
        indexWriter.optimize();
        indexWriter.close();
     }
    catch(Exception ex )
    {
     ex.printStackTrace();
    }

  Following the code for searching the filepath

        File indexDir = new File("d:/abc/");
           int maxhits = 10000000;
                     int len = 0;
                try {
                    Directory directory = FSDirectory.open(indexDir);
                     IndexSearcher searcher = new IndexSearcher(directory, true);
                    QueryParser parser = new QueryParser(Version.LUCENE_36,"fpath", new SimpleAnalyzer());
                    Query query = parser.parse(path);
                    query.setBoost((float) 1.5);
                    TopDocs topDocs = searcher.search(query, maxhits);
                    ScoreDoc[] hits = topDocs.scoreDocs;
                   len = hits.length;
                   JOptionPane.showMessageDialog(null,"items found"+len);

                 }
                catch(Exception ex)
               {
                 ex.printStackTrace();
              } 
```

它显示找到的文档数量为文档总数，而搜索的路径文件仅存在一次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:05:42.813

您正在分析路径，这会将其拆分为单独的术语。根路径术语（如/ **catalog** **/products/versions**中的目录）可能出现在所有文档中，因此任何包含**目录**但不强制所有术语都是强制性的搜索将返回所有文档。

您需要一个搜索查询，例如（使用上面的示例）：

```
+catalog +products +versions 
```

强制所有条款都存在。

请注意，如果同一组术语可以以不同的顺序出现，这会变得更加复杂，例如：

```
/catalog/products/versions
/versions/catalog/products/SKUs 
```

在这种情况下，您需要使用与标准分析器中的分词器不同的 Lucene 分词器。

# windows-phone-7 - 在捏（手势）上调整矩形元素的大小

> ID：14745151
> 
> 赞同：2
> 
> 时间：2013-02-07T06:40:47.027
> 
> 标签：windows-phone-7

我正在尝试裁剪图像。为了选择裁剪区域，我使用了一个矩形元素。矩形的初始宽度和高度分别设置为 100。捏合时矩形的大小将增加。我怎样才能获得这个被放大的矩形的大小？

我正在使用的代码如下：

```
 private void GestureListener_PinchDelta(object sender, PinchGestureEventArgs e)  
    {                                                     
         ImageTransformation.ScaleX = _initialScale * e.DistanceRatio;   
         ImageTransformation.ScaleY = ImageTransformation.ScaleX;   
         cropRectangle.Width = cropRectangle.Width + e.DistanceRatio;  
         cropRectangle.Height = cropRectangle.Height + e.DistanceRatio;  
    } 
```

我无法获得放大矩形的大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:22:54.090

RenderTransforms 不会改变控件的宽度和高度，因为它只影响渲染。不确定是否有更好的方法，但您可以使用原始大小和比例因子简单地计算渲染大小。

这是一个非常基本的例子

**xml**

```
<Canvas x:Name="cnv" Grid.Row="1">      
    <Rectangle Canvas.Top="150" Canvas.Left="150" 
               Width="200" Height="200" x:Name="myrect" 
               Fill="AliceBlue" 
               ManipulationStarted="myrect_ManipulationStarted" 
               ManipulationDelta="myrect_ManipulationDelta" 
               ManipulationCompleted="myrect_ManipulationCompleted">             
    </Rectangle>
</Canvas> 
```

**代码**

```
public MainPage()
{
    InitializeComponent();

    transformGroup = new TransformGroup();
    translation = new TranslateTransform();
    scale = new ScaleTransform();
    transformGroup.Children.Add(scale);
    transformGroup.Children.Add(translation);
    myrect.RenderTransform = transformGroup;
}

private TransformGroup transformGroup;
private TranslateTransform translation;
private ScaleTransform scale;

private void myrect_ManipulationStarted(object sender, ManipulationStartedEventArgs e)
{
    //change the color of the Rectangle to a half transparent Red
    myrect.Fill = new SolidColorBrush(Color.FromArgb(127, 255, 0, 0));
}

private void myrect_ManipulationDelta(object sender, ManipulationDeltaEventArgs e)
{
    translation.X += e.DeltaManipulation.Translation.X;
    translation.Y += e.DeltaManipulation.Translation.Y;

    //Scale the Rectangle
    if (e.DeltaManipulation.Scale.X != 0)
        scale.ScaleX *= e.DeltaManipulation.Scale.X;
    if (e.DeltaManipulation.Scale.Y != 0)
        scale.ScaleY *= e.DeltaManipulation.Scale.Y;

}

private void myrect_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
{
    myrect.Fill = new SolidColorBrush(Color.FromArgb(255, 255, 0, 0));
    Debug.WriteLine(myrect.Width * scale.ScaleX);
    Debug.WriteLine(myrect.Height * scale.ScaleY);
} 
```

# javascript - Backbonejs：组织路由

> ID：14745154
> 
> 赞同：0
> 
> 时间：2013-02-07T06:41:12.553
> 
> 标签：javascript, backbone.js, code-organization, backbone-routing

如果里面有太多的路线，比如说一百条，你如何组织你的路线对象。你只是把它放在一个文件或对象中吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:52:40.863

我认为这里没有正确或错误的答案。绝对正确的是，您不能拥有一个包含 50 多个路由的路由器……这是可维护性的噩梦。

相反，我更喜欢将我的应用程序拆分为子应用程序或模块（根据需要调用它们），每个子应用程序或模块都有明确定义的目的和职责。因此，在假设的订单管理系统中，我可能会有

*   订购管理应用程序
    *   个人应用
        *   路由器.js
        *   应用程序.js
        *   ...
    *   订购应用
        *   路由器.js
        *   应用程序.js
        *   ...
    *   ...
    *   globalrouter.js
    *   globalapp.js

这里的关键是永远不要创建一个巨大的应用程序/单体应用程序，而是创建许多可以组合在一起以形成整个应用程序的小应用程序（与每个应用程序之间的事件通信）。也就是说，在上面的示例中，“人”和“订单”应用程序都有自己的路由器，这些路由器只保存与他们相关的路由。“全局”应用程序形成了粘合剂，将所有单个应用程序结合在一起，例如拥有应用程序菜单，也许还有一些通用路线，而不是紧贴特定模块/子应用程序。

也许[Backbone Aura](https://github.com/aurajs/aura)是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:01:14.720

您可以将路由器分解为多个文件。你如何分解它取决于你的用例，在我的应用程序中，我们按模块分解它。

您如何定义模块取决于您的应用程序，但一般的经验法则是您将在一个“功能”或主题下将功能分组在一起。

例如，假设您的应用程序是一个基本的“公司”应用程序（使用 Backbone.js 的例子很糟糕，但让我们保持简单。）该站点有几个部分：“关于我们”、“产品”、“客户”、“支持”、“博客”、“职业”。在每个部分中，它有 2 个级别的子页面（例如，在产品中，您可以拥有产品列表，并且在每个产品中，您可以深入了解产品、如何购买产品、等等等等）

每个部分，在示例中，我们可以将它们视为模块。并且，基于此，您可以将包含所有路由的单个路由器分解为不同的路由器。（它们当然可以在不同的文件中！）

```
var MainRouter = Backbone.Router.extend({ 
  routes: {
    '/': 'home'
  },
  home: function() {
    // Display home view
  }
});

var ProductRouter = Backbone.Router.extend({
  routes: {
    '/product': 'listProducts',
    '/product/:id/buy': 'buyProduct',
    '/product/:id': 'viewProduct',
    '/product/compare/:id1/:id2': 'compareProduct'
  },
  listProducts: function() { ... },
  buyProduct: function(id) { ... }
  viewProduct: function(id) { ... }
  compareProduct: function(id1, id2) { ... }
}); 
```

当您启动应用程序时，您只需启动它们：

```
$(function() {
  new MainRouter();
  new ProductRouter();
}); 
```

通过这样做，您还可以将代码分解为不同的模块，甚至将视图、模板和模型按模块分开。

# ruby-on-rails-3 - 为什么 RailsAdmin 中的图标会停止显示？

> ID：14745158
> 
> 赞同：3
> 
> 时间：2013-02-07T06:41:26.240
> 
> 标签：ruby-on-rails-3, rails-admin

我不确定我做了什么，但菜单选项中的图标不再显示。

只有正方形，如下所示：

![RailsAdmin 中缺少图标](../Images/e15a42d3ee63f9fae0f08eb5d14450d4.png)

是什么原因造成的，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-14T20:50:48.697

这可能是一个丑陋的解决问题的方法，但在尝试了一切之后，这是唯一对我有用的方法。

Rails 管理员使用旧版本的 fontawesome。在此处下载 zip 文件：http: [//fortawesome.github.io/Font-Awesome/3.2.1/assets/font-awesome.zip](http://fortawesome.github.io/Font-Awesome/3.2.1/assets/font-awesome.zip)

然后将以下文件放入您的 rails 项目的 /public/assets 目录中，从 zip 文件的 /font 目录中：

*   fontawesome-webfont.eot
*   fontawesome-webfont.svg
*   fontawesome-webfont.ttf
*   fontawesome-webfont.woff
*   FontAwesome.otf

这当然是绕过了正确的 rails 资产管道，但作为一种解决方法，直到 rails admin 修复后才能正常工作。

# java - org.hibernate.exception.MappingException 或 ConstraintViolation

> ID：14745162
> 
> 赞同：1
> 
> 时间：2013-02-07T06:41:47.497
> 
> 标签：java, hibernate

我正在使用休眠 4.1.9。我有用户，用户有账户列表，账户有交易列表。这是我的 hbm.xml

```
<?xml version="1.0"?> 
```

```
<class name="User" table="users">
    <id name="userId" column="userid">
        <generator class="increment"/>
    </id>
    <property name="username" column="username" not-null="true"/>
    <property name="password" column="password" not-null="true"/>
    <property name="registerDate" type="timestamp" column="register_date"/>
    <list name="accounts" table="accounts" inverse="true" cascade="all">
        <key column="userid" not-null="true"/>
        <index column="accountid"/>
        <one-to-many class="com.joe.data.Account"/>
    </list>
</class>
<class name="Account" table="accounts">
    <id name="accountId" column="accountid">
        <generator class="increment"/>
    </id>
    <property name="balance" type="big_decimal" column="balance"/>
    <property name="lastModified" type="timestamp" column="last_modified"/>
    <list name="txns" table="transactions" inverse="true" cascade="all">
        <key column="accountId" not-null="true"/>
        <index column="transactionId"/>
        <one-to-many class="com.joe.data.Transaction"/>
    </list>
    <many-to-one name="userId" class="User" column="userid" not-null="true" 
         unique="true" cascade="all"/> 
    <many-to-one name="accountType" class="AccountType" column="account_type" 
        not-null="true" cascade="all" unique="true" />
</class>
<class name="Transaction" table="transactions">
    <id name="transactionId" column="transactionid">
        <generator class="increment"/>
    </id>
    <property name="description" column="description"/>
    <property name="amount" type="big_decimal" column="amount"/>
    <property name="dateAdded" column="date_added"/>
    <property name="reoccuring" type="numeric_boolean" column="reoccuring"/>
    <many-to-one name="category" class="Category" column="category" 
        not-null="true" cascade="all" unique="true" />
</class>

<class name="Category" table="categories">
    <id name="categoryId" column="categoryid"/>
    <property name="categoryName" column="categoryname" not-null="true"/>
</class>
<class name="AccountType" table="account_types">
    <id name="accountType" column="account_type"/>
    <property name="accountName" column="name"/>
</class> 
```

如果我将 inverse="true" 留在帐户列表中（在用户中），我会收到 ConstraintViolationException，因为用户 ID 没有放入插入查询中。如果我从帐户列表中取出 inverse="true"，我会得到 org.hibernate.MappingException: Repeated column in mapping for entity: com.joe.data.Account column: accountid (应该用 insert="false" 映射更新=“假”）

为了澄清小写名称是数据库列名称，驼峰式名称是类变量名称。我知道 Transaction 类还不能很好地工作，但是如果我可以插入 Accounts，我可以做同样的事情来插入 Transactions。

**编辑：**我在 Account 类上添加了多对一，现在我得到另一个异常，hibernate 抱怨在 com.joe.data.Account 中缺少 userId 的 getter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:54:00.757

为了获得 inverse="true" 工作，您需要为 Account 中的 User 和 Transaction 类和映射中的 Account 定义多对一。

# android - 将应用程序上传到 android-market 时出错

> ID：14745167
> 
> 赞同：1
> 
> 时间：2013-02-07T06:42:23.220
> 
> 标签：android, google-play

我已经通过导出它在eclipse中签署了android应用程序。但是当我尝试将 .apk 文件上传到市场时，我收到以下错误

无法使用“aapt dump badging”分析您的 APK。错误输出：无法运行 aapt 转储标记：W/ResourceType（32345）：获取资源编号 0x01080057 的值时没有已知包 获取“android：icon”属性时出错：属性不是字符串值

下面是我的 Manifiest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="c.programs.simplified.vinay"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS" />
    <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS" />
    <uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" />
    <uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" />
    <uses-permission android:name="com.android.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.htc.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.motorola.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.motorola.dlauncher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.fede.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.lge.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="org.adw.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.motorola.launcher.permission.INSTALL_SHORTCUT" />
    <uses-permission android:name="com.motorola.dlauncher.permission.INSTALL_SHORTCUT" />
    <uses-permission android:name="com.lge.launcher.permission.INSTALL_SHORTCUT" />
    <uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS" />
    <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.apperhand.device.android.EULAActivity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.Translucent" />
        <activity
            android:name="c.programs.simplified.vinay.Splash"
            android:label="@string/app_name"
            android:launchMode="standard"
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Splash" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="c.programs.simplified.vinay.programview"
            android:icon="@android:drawable/ic_menu_view"
            android:launchMode="standard"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="c.programs.simplified.vinay.MainActivity"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:launchMode="standard"
            android:screenOrientation="portrait" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T15:19:16.387

我遇到了同样的问题，因为值文件夹不包含 string.xml。我把它建立在 values-th 和 values-en 上。然后我将 string.xml 从 values-en 移动到 values。这是固定的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:24:46.657

您的问题可能与可绘制文件夹中所需的默认值文件夹或字符串文件或图标有关。请查看这些已经对少数人有所帮助的答案。

[https://stackoverflow.com/a/10452390/989418](https://stackoverflow.com/a/10452390/989418)

[https://stackoverflow.com/a/7475737/989418](https://stackoverflow.com/a/7475737/989418)

[https://stackoverflow.com/a/11852699/989418](https://stackoverflow.com/a/11852699/989418)

[将 apk 上传到 android 市场时出错](https://stackoverflow.com/questions/8819400/error-while-uploading-apk-to-android-market)

[http://www.blackmoonit.com/2010/07/market-disallow-use-of-android-icons/](http://www.blackmoonit.com/2010/07/market-disallow-use-of-android-icons/)

[http://blog.accidentallyproductive.com/2012/10/so-this-is-problem-that-we-ran-into.html](http://blog.accidentallyproductive.com/2012/10/so-this-is-problem-that-we-ran-into.html)

# wcf - WCF 文本和 mtom 编码也是二进制编码吗？

> ID：14745168
> 
> 赞同：2
> 
> 时间：2013-02-07T06:42:24.393
> 
> 标签：wcf, serialization

我需要帮助理解 WCF 中的消息编码。据我了解，消息是用二进制、文本或 Mtom 编码的——可能还有其他的。让我困惑的是，一旦你到达协议栈的底部，一切都是二进制的。那么为什么二进制是一种编码呢？他们的意思是当它在文本中时，它首先在内存中创建对象的文本表示，然后将该文本序列化为二进制并通过网络发送？如果编码是二进制的，那么通过网络传递的内存对象，只需从它们的本地二进制表示直接转到网络数据包（当然是通过传输协议数据包）。有人能告诉我我是否做对了吗？

# c# - 使用 WriteableBitmapEx Windows Phone 覆盖透明 PNG 时移除不需要的光晕

> ID：14745174
> 
> 赞同：1
> 
> 时间：2013-02-07T06:42:47.353
> 
> 标签：c#, windows-phone-8, blit, halo, writeablebitmapex

从图像中可以看出，eclipse 的边缘并不平滑。我正在使用以下混合模式。其他模式会产生更多不需要的结果。

![在此处输入图像描述](../Images/4b99eedd8575a51b3d6b27483edbb295.png)

```
writeableBmp.Blit(destRect, wbCircle, sourceRect, WriteableBitmapExtensions.BlendMode.Alpha); 
```

附上日食png。如何去除仅在 Windows Phone 上进行 blit 操作后可见的边缘周围的光晕？

![在此处输入图像描述](../Images/a3557fed9e3e3ed44c17013062130fc8.png)

# php - 如何在 wordpress 中覆盖 get_bloginfo 函数

> ID：14745175
> 
> 赞同：1
> 
> 时间：2013-02-07T06:42:58.053
> 
> 标签：php, wordpress, function, overriding

```
function custom_get_bloginfo( $show = '', $filter = 'raw' ) {

    switch( $show ) {
            case 'description':
            $output = "my description";
            break;

            default:
            $output = get_option('blogname');
            break; 
    }

        return $output;

}

add_filter('get_bloginfo', 'custom_get_bloginfo', 1, 2); 
```

我用上面的代码它不起作用..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T07:13:33.897

get_bloginfo 函数支持两个过滤器，但前提是第二个参数“filter”设置为“display”，即

```
get_bloginfo('name', 'display'); 
```

因此，如果您希望将其用于某些插件，它将没有多大用处。

可以使用的过滤器：

*   bloginfo_url （这个适用于所有返回 url 的选项）
*   博客信息

用法：

```
add_filter('bloginfo_url', 'custom_get_bloginfo', 10, 2);
add_filter('bloginfo', 'custom_get_bloginfo', 10, 2);

function custom_get_bloginfo($output, $show) {
    switch( $show ) {
        case 'description':
            $output = 'my custom description';
            break;
        case 'name':
            $output = 'custom name';
            break;
    }

    return $output;
} 
```

**更新：** 如果您只想替换站点描述，您可以这样做：

```
add_filter('option_blogdescription', 'custom_option_description', 10, 1);
function custom_option_description($value) {
    return 'custom description';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:49:51.933

好的，我现在明白了，更好的方法是编辑 header.php 并查找 bloginfo('description') 然后用 custom_get_bloginfo() 更改它，然后添加你可以使用它到你的 function.php

```
function custom_get_bloginfo(){
switch( $show ) {
case 'description':
$output = "my description";
break;

default:
$output = get_option('blogname');
break; 
}
return $output;
} 
```

# asp.net-mvc - Javascript 文件的 MVC 路由操作

> ID：14745178
> 
> 赞同：2
> 
> 时间：2013-02-07T06:43:01.243
> 
> 标签：asp.net-mvc

我正在尝试添加一个 mvc 路由以从控制器生成一个 javascript。我添加了以下路线，但它不起作用：

```
routes.MapRouteWithName(
           "DataSourceJS", // Route name
           "Scripts/Entities/{controller}/datasource.js", // URL with parameters
           new { controller = "Home", action = "DataSourceJS"} // Parameter defaults,
           , null
           ); 
```

但是，如果我将路线更改为没有“.js”并导航到“Scripts/Entities/{controller}/datasource”，它就可以工作。但是我需要在那里有 .js 文件扩展名，我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:49:49.790

> 我该怎么做？

IIS 拦截该请求，因为它包含一个文件扩展名并劫持它，认为它是一个静态文件，而不是将其传递给您的应用程序。

要使其工作，您应该告诉 IIS 不要这样做。在该`<system.webServer>`部分中，您可以添加以下处理程序以指示具有指定模式的请求应由托管管道处理：

```
<system.webServer>
    <handlers>
        ...
        <add name="ScriptsHandler" path="Scripts/Entities/*/datasource.js" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

有些人可能还会告诉您使用：

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

但我不建议您这样做，因为这意味着对静态资源的所有请求现在都将流经托管管道，这可能会对您的应用程序产生负面的性能开销。处理程序语法允许您选择性地仅为某些路由模式和 HTTP 动词启用此功能。

# cocoa-touch - 核心数据：托管对象与上下文一起保存后如何撤消操作

> ID：14745181
> 
> 赞同：0
> 
> 时间：2013-02-07T06:43:25.420
> 
> 标签：cocoa-touch, core-data, undo

我正在尝试从服务器上的几个表中下载批量数据。

就我而言，有 16 张桌子。对于所有这些表，我将向服务器发出 10 个请求。这意味着我对相关表做了一些逻辑分组，但就像所有表都通过一种或另一种关系相互关联。

下载时需要考虑三种情况：

1.  将数据保存到本地的每个表中。
2.  管理插入对象之间的关系。
3.  下载期间其中一个请求失败的处理情况，例如第 8 个请求失败。

对于每个响应，我将遵循这种方法：

1.  在托管对象上下文中插入数据。
2.  通过触发 NSPredicate 和关联相关对象来管理关系。
3.  保存上下文。

如果响应失败，我有两种选择：

1.  下次从失败的响应继续。
2.  将所有保存的数据恢复到以前的状态。

第一种方法可能会导致一些数据不一致，所以我将采用第二种方法。

我知道如果未保存托管对象上下文，我们可以恢复更改，但是

> 如果保存了托管对象上下文，是否可以恢复更改？

我需要社区提供一些有用的答案。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:04:31.760

**如果保存了托管对象上下文，是否可以恢复更改？**

保存后？也许吧，但这可能很棘手。如果你为你的网络操作设置一个单独的托管对象上下文，并给它一个`NSUndoManager`，你可以稍后告诉撤消管理器将所有内容回滚到以前的状态。

不过，在完成之前不保存更改会更简单。使用撤消管理器并没有太大帮助——存储所有撤消操作所需的内存至少会与保存所有未保存的更改直到完成之前的内存使用量相匹配。如果您正在处理单独的托管对象上下文（无论是子上下文还是完全独立的上下文），处理错误情况就像让 MOC 在不先保存更改的情况下被释放一样简单。

# java - 在两个不同的 java 类中使用变量

> ID：14745182
> 
> 赞同：0
> 
> 时间：2013-02-07T06:43:27.163
> 
> 标签：java, jakarta-ee

我想知道是否可以在另一个 java 类中使用一个 java 类的变量。假设变量 Time 在 A 类中定义和计算，我如何在 B 类中使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T06:53:34.070

其他答案建议增加变量的可见性。**不**要这样做。它打破了封装：您的类使用字段来存储特定信息的事实是实现细节；您应该改为通过类的 API（其方法）公开相关信息。*在几乎所有*情况下，您都应该将字段设为私有。

同样，其他一些答案建议可能将变量设为静态。**不要**随意这样做。您需要了解静态的真正含义：它表示这条信息与类型相关，而不是与该类型的任何一个特定实例相关。有时这是合适的，但它通常是通往不易测试代码的道路——而且在许多情况下，这显然是错误的。例如，一个`Person`类可能有一个`name`变量，但它当然不应该是静态的——它显然是关于一个人的*信息*。

无论如何，在公开信息之前，您应该仔细考虑 - 考虑是否存在相关类可以公开的更广泛的操作，而不是仅仅零碎地泄露其数据 - 但是当您*确实*想要公开字段的值时，请使用属性。例如：

```
public class Person {
    private final String name;

    public Person(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
} 
```

通过通过*方法*公开它，您可以在不破坏现有客户端的情况下更改实现细节。

然后从另一个类中，您只需调用该`getName()`方法：

```
// However you end up getting a reference to an instance of Person
Person person = ...;
String name = person.getName(); 
```

如果您*确实*有一个静态字段，则可以以相同的方式公开该值，但使用静态方法，您可以使用类名调用该方法。

小心返回可变的值，例如`java.util.Date`. 这是使用 getter 方法而不是允许直接访问该字段的另一个原因 - 您可以使该方法在您需要的地方返回一个防御性副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:49:33.683

![在此处输入图像描述](../Images/b0478e883794fb314fedb1448d535301.png)

另请阅读[Java 中的访问说明符，](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T06:47:16.667

如果它被声明为 public，你可以使用`ClassA.yourVariable`. 另一方面，对于私有访问修饰符，将 getter 包含到您的`ClassA`. 上`ClassB`，打电话`ClassA.getYourVariable()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:46:32.843

如果您将变量声明为 public 或 static，您将能够从另一个类访问它。

**这是一个非常非常糟糕的主意**:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:48:08.253

如果变量是`static`，您可以`A.Time`从任何可以访问该变量的代码中引用它。所有类 A只有一个`Time`值。如果它是一个实例变量，并且您有一个`a`class的实例`A`，则可以将该变量称为`a.Time`。class 的每个实例都有一个单独的值`A`。

这取决于 Java 的访问规则：

*   如果字段是`public`，任何代码都可以访问它（这使得`public`变量有点危险，除非它们也被声明`final`）
*   如果该字段是`protected`，则只有同一包或子类中的代码`A`才能访问它
*   如果该字段具有默认访问权限，则只有与 A 类位于同一包中的代码才能访问它
*   如果该字段是`private`，则只有类中的代码`A`（包括 的内部类`A`）可以访问它。

或者，您可以在 A 类中提供*访问器方法*：

```
public class A {
    . . .
    public class getTime() {
        return this.Time; // the "this." is optional
    }
} 
```

# javascript - Google 云端硬盘表单数据验证

> ID：14745185
> 
> 赞同：0
> 
> 时间：2013-02-07T06:43:41.780
> 
> 标签：javascript, google-app-engine, google-drive-api

我正在开发一个 Google Drive Form，它将验证输入并在提交时发送电子邮件。问题是将处理程序附加到 Google 创建的表单控件。一些[教程](https://developers.google.com/apps-script/uiapp#Validators)创建控件并将它们添加到 UiApp 的实例中，并在附加处理程序后从函数中返回该对象。我试过在打开表单时调用这样的函数，但它不起作用，但我可以在提交时调用这样的函数。

```
function sendFormByEmail(e) 
{ 
  var email = "some@email.com"; 
  var subject = "Form Results"; 
  var message = ""; for(var field in e.namedValues) 
  { 
    message += field + ' :: ' + e.namedValues[field].toString() + "\n\n";
  } 
  MailApp.sendEmail(email, subject, message); 

} 
```

但是，我想做客户端和服务器端验证。我突然想到我会看看 html 对控件有什么样的属性，也许我可以通过这种方式找到控件，但我不知道 Google 不会更改 id、类或在任何给定时间为此事命名。这是我最后尝试使用并返回 UiApp 实例的代码，但我更喜欢抓住控制并按照我的方式处理它们。

```
function doGet(){
  //create app
  var app = UiApp.createApplication();
  //controls
  var txtbAccountNumber = app.createTextBox().setId('tbAccountNumber').setName('tbnAccountNumber');
  var txtbOwnerEmail = app.createTextBox().setId('tbOwnerEmail').setName('tbnOwnerEmail');
  var txtbAccountAdjustment = app.createTextBox().setId('tbAccountAdjustment').setName('tbnAccountAdjustment');
  var btnSubmit = app.createButton("Submit").setEnabled(false);
  var lblEmailFailed = app.createLabel("The email was not valid");
  var lblAccountNumber = app.createLabel("The account number was not valid");
  var lblAccountAdjustment = app.createLabel("The account adjustment was not valid");
  //handler for submit click
  var handler = app.createServerHandler("validateInput")
  .validateEmail(txtbOwnerEmail)
  .validateNumber(txtbAccountNumber)
  .validateNumber(txtbAccountAdjustment)
  .addCallbackElement(txtbAccountNumber)
  .addCallbackElement(txtbOwnerEmail)
  .addCallbackElement(txtbAccountAdjustment);

  //callback control handlers
  var validEmail = app.createClientHandler()
  .validateEmail(txtbOwnerEmail)
  .forTargets(txtbOwnerEmail)
  .setStyleAttribute("color","black")
  .forTargets(btnSubmit)
  .setEnabled(true)
  .forTargets(lblEmailFailed)
  .setVisible(false);

  var validAccountNumber = app.createClientHandler()
  .validateNumber(txtbAccountNumber)
  .forTargets(txtbAccountNumber)
  .setStyleAttribute("color","black")
  .forTargets(btnSubmit)
  .setEnabled(true)
  .forTargets(lblAccountNumber)
  .setVisible(false);

  var validAccountAdjustment = app.createClientHandler()
  .validateNumber(txtbAccountAdjustment)
  .forTargets(txtbAccountAdjustment)
  .setStyleAttribute("color","black")
  .forTargets(btnSubmit)
  .setEnabled(true)
  .forTargets(lblAccountAdjustment)
  .setVisible(false);

  var invalidEmail = app.createClientHandler()
  .validateEmail(txtbOwnerEmail)
  .forTargets(txtbOwnerEmail)
  .setStyleAttribute("color","red")
  .forTargets(btnSubmit)
  .setEnabled(false)
  .forTargets(lblEmailFailed)
  .setVisible(true);

  var invalidAccountNumber = app.createClientHandler()
  .validateNumber(txtbAccountNumber)
  .forTargets(txtbAccountNumber)
  .setStyleAttribute("color","red")
  .forTargets(btnSubmit)
  .setEnabled(false)
  .forTargets(lblAccountNumber)
  .setVisible(true);

  var invalidAccountAdjustment = app.createClientHandler()
  .validateNumber(txtbAccountAdjustment)
  .forTargets(txtbAccountAdjustment)
  .setStyleAttribute("color","red")
  .forTargets(btnSubmit)
  .setEnabled(false)
  .forTargets(lblAccountAdjustment)
  .setVisible(true);

  txtbOwnerEmail.addBlurHandler(validEmail);
  txtbOwnerEmail.addBlurHandler(invalidEmail);
  txtbAccountNumber.addBlurHandler(validAccountNumber);
  txtbAccountNumber.addBlurHandler(invalidAccountNumber);
  txtbAccountAdjustment.addBlurHandler(validAccountAdjustment);
  txtbAccountAdjustment.addBlurHandler(invalidAccountAdjustment);
  btnSubmit.addClickHandler(handler);

  app.add(txtbOwnerEmail);
  app.add(txtbAccountNumber);
  app.add(txtbAccountAdjustment);
  app.add(lblEmailFailed);
  app.add(lblAccountNumber);
  app.add(lblAccountAdjustment);

  return app;
}

function validateInput(e){
 var app = UiApp.getActiveApplication();
  var pattern = /^[a-zA-Z0-9._]+@[a-zA-Z0-9._]+\.[a-zA-Z0-9._]{2,4}/;
  return pattern.test(e.parameter.txtbOwnerEmail);   
} 
```

如何将处理程序和验证字段附加到 Google Doc 生成的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:09:19.260

那是不可能的。您必须使用 UiApp 或 HtmlService 自己创建一个表单。您目前可以与 Google 表单进行的唯一交互是您可以绑定到 onFormSubmit()。

# zend-framework2 - 如何修复“无法打开流：zend 2 中没有这样的文件或目录”？

> ID：14745190
> 
> 赞同：0
> 
> 时间：2013-02-07T06:44:15.153
> 
> 标签：zend-framework2

我正在尝试对 zend 框架进行小测试，以了解它是如何工作的。我创建了一个模块调查。现在，在这个控制器中，我想包含一个在上面一个目录中找到的文件，当我执行这个时，我得到

```
( ! ) Warning: require(../database.php) [<a href='function.require'>function.require</a>]: failed to open stream: No such file or directory in C:\wamp\www\zend\module\Survey\src\Survey\Controller\SurveyController.php on line 4
Call Stack
#   Time    Memory  Function    Location
1   0.0010  367280  {main}( )   ..\index.php:0
2   0.2738  5658600 Zend\Mvc\Application->run( )    ..\index.php:15
3   0.2780  5685104 Zend\EventManager\EventManager->trigger( )  ..\Application.php:297
4   0.2781  5685112 Zend\EventManager\EventManager->triggerListeners( ) ..\EventManager.php:208
5   0.2784  5686672 call_user_func ( )  ..\EventManager.php:464
6   0.2784  5686688 Zend\Mvc\DispatchListener->onDispatch( )    ..\EventManager.php:464
7   0.2785  5686688 Zend\Mvc\Controller\ControllerManager->get( )   ..\DispatchListener.php:90
8   0.2785  5686840 Zend\ServiceManager\AbstractPluginManager->get( )   ..\ControllerManager.php:114
9   0.2786  5686840 Zend\ServiceManager\ServiceManager->get( )  ..\AbstractPluginManager.php:110
10  0.2787  5687256 Zend\ServiceManager\ServiceManager->create( )   ..\ServiceManager.php:437
11  0.2787  5687288 Zend\ServiceManager\AbstractPluginManager->createFromInvokable( )   ..\ServiceManager.php:491
12  0.2788  5687704 Zend\Loader\StandardAutoloader->autoload( ) ..\ServiceManager.php:0
13  0.2788  5687760 Zend\Loader\StandardAutoloader->loadClass( )    ..\StandardAutoloader.php:217
14  0.2850  5694072 include( 'C:\wamp\www\zend\module\Survey\src\Survey\Controller\SurveyController.php' )  ..\StandardAutoloader.php:306

( ! ) Fatal error: require() [<a href='function.require'>function.require</a>]: Failed opening required '../database.php' (include_path='.;C:\php\pear') in C:\wamp\www\zend\module\Survey\src\Survey\Controller\SurveyController.php on line 4
Call Stack
#   Time    Memory  Function    Location
1   0.0010  367280  {main}( )   ..\index.php:0
2   0.2738  5658600 Zend\Mvc\Application->run( )    ..\index.php:15
3   0.2780  5685104 Zend\EventManager\EventManager->trigger( )  ..\Application.php:297
4   0.2781  5685112 Zend\EventManager\EventManager->triggerListeners( ) ..\EventManager.php:208
5   0.2784  5686672 call_user_func ( )  ..\EventManager.php:464
6   0.2784  5686688 Zend\Mvc\DispatchListener->onDispatch( )    ..\EventManager.php:464
7   0.2785  5686688 Zend\Mvc\Controller\ControllerManager->get( )   ..\DispatchListener.php:90
8   0.2785  5686840 Zend\ServiceManager\AbstractPluginManager->get( )   ..\ControllerManager.php:114
9   0.2786  5686840 Zend\ServiceManager\ServiceManager->get( )  ..\AbstractPluginManager.php:110
10  0.2787  5687256 Zend\ServiceManager\ServiceManager->create( )   ..\ServiceManager.php:437
11  0.2787  5687288 Zend\ServiceManager\AbstractPluginManager->createFromInvokable( )   ..\ServiceManager.php:491
12  0.2788  5687704 Zend\Loader\StandardAutoloader->autoload( ) ..\ServiceManager.php:0
13  0.2788  5687760 Zend\Loader\StandardAutoloader->loadClass( )    ..\StandardAutoloader.php:217
14  0.2850  5694072 include( 'C:\wamp\www\zend\module\Survey\src\Survey\Controller\SurveyController.php' )  ..\StandardAutoloader.php:306 
```

这是控制器文件

```
<?php

namespace Survey\Controller;
(require 'test.php');

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Config\Config;

class SurveyController extends AbstractActionController
{
    public function indexAction()
    {
         $plugin = $this->plugin('url');

    }

    public function addAction()
    {
    }

    public function editAction()
    {
    }

    public function deleteAction()
    {
    }
} 
```

控制器中的相同代码，当我将 database.php 放在与控制器相同的目录中时，工作正常。为什么它不允许我包含上面的一个目录以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:42:12.410

请看一下[`index.php`](https://github.com/zendframework/ZendSkeletonApplication/blob/master/public/index.php)ZendSkeletonApplication 的。注意更改目录命令，即`chdir()`.

此命令将 PHP 脚本的工作目录设置为应用程序的根目录。所以每当你想在你的脚本中包含一个文件时，你必须相对链接它们。在您的情况下，这将解决问题：

```
include __DIR__ . '/../database.php'; 
```

但是：仅通过文件名我会说您正在做的事情并不是真正想要的。应该不需要为了获取一些数据库参数而进行另一个文件系统交互。这类信息应该放入`./config/autoload/database.local.php`

您将能够以这种方式使用控制器中的数组语法访问参数：

```
$config   = $this->getServiceLocator()->get('config');
$dbParams = $config['dbParams'];  // or whatever you name it, default PHP Arrays 
```

# html - SVG 和 VML 路径填充的区别

> ID：14745193
> 
> 赞同：0
> 
> 时间：2013-02-07T06:44:23.013
> 
> 标签：html, svg, vml

我从 VML 迁移到 SVG。路径填充方式有问题。这是一个例子：

![用 VML 和 SVG 绘制的星星](../Images/e88fec8c95d5cbd42f548f18db9fba01.png)

左边是用 VML 绘制的星形，右边是用 SVG 绘制的。VML 的源代码（仅适用于 IE）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:v="urn:schemas-microsoft-com:vml">
<head>
    <style> v\:* { behavior: url(#default#VML); }</style >
</head>
<body>
    <div style="width:300; height:270;">
        <v:shape fillcolor="blue" strokecolor="red" coordorigin="0 0" coordsize="300 270"
            strokeweight="2" style="position:relative; top:20; left:20; width:300; height:270" 
            path="m150,20 l240,240 l30,90 l270,90 l60,240 x e">
        </v:shape>
    </div>
</body> 
```

SVG的源代码：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <svg width="300" height="270">
            <path d="M150,20 L240,240 L30,90 L270,90 L60,240 Z" fill="blue" stroke="red" stroke-width="3"/>
        </svg>
    </body>
</html> 
```

星星中间填充有明显区别。我更喜欢 VML 风格。有没有办法用 SVG 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:25:21.650

当然，您只需要一个偶数[填充规则](http://www.w3.org/TR/SVG/painting.html#FillProperties)

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <svg width="300" height="270">
            <path d="M150,20 L240,240 L30,90 L270,90 L60,240 Z" fill-rule="evenodd" fill="blue" stroke="red" stroke-width="3"/>
        </svg>
    </body>
</html> 
```

# python - 如何在 Python 中解栈嵌套元组？

> ID：14745199
> 
> 赞同：56
> 
> 时间：2013-02-07T06:44:46.767
> 
> 标签：python, nested, tuples

如何转换以下元组：

从：

```
(('aa', 'bb', 'cc'), 'dd') 
```

到：

```
('aa', 'bb', 'cc', 'dd') 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-07T07:04:34.503

```
l = (('aa', 'bb', 'cc'), 'dd')
l = l[0] + (l[1],) 
```

这适用于您的情况，但[John La Rooy 的解决方案](https://stackoverflow.com/a/14745275/1907098)更适合一般情况。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2018-02-16T00:20:38.803

```
a = (1, 2)
b = (3, 4)

x = a + b

print(x) 
```

出去：

```
(1, 2, 3, 4) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-07T06:49:36.130

```
>>> tuple(j for i in (('aa', 'bb', 'cc'), 'dd') for j in (i if isinstance(i, tuple) else (i,)))
('aa', 'bb', 'cc', 'dd') 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-07T06:49:19.337

```
x = (('aa', 'bb', 'cc'), 'dd')
tuple(list(x[0]) + [x[1]]) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-09-30T20:09:21.310

```
l = (('aa', 'bb', 'cc'), 'dd') 
```

你可以简单地做：

```
(*l[0], l[1]) 
```

结果：

```
('aa', 'bb', 'cc', 'dd') 
```

# c++ - 联合与位掩码和位移

> ID：14745201
> 
> 赞同：3
> 
> 时间：2013-02-07T06:44:53.427
> 
> 标签：c++, c, unions, bit-shift, bitmask

`unions`在存储一些信息（如一系列字节）并能够一次或一个接一个地访问它们时，使用它们有什么缺点。

示例：颜色可以用 RGBA 表示。所以颜色类型可以定义为，

```
typedef unsigned int RGBAColor; 
```

然后我们可以使用位的“移位和屏蔽”来“检索或设置”RGBAColor 对象的红色、绿色、蓝色、alpha 值（就像在 Direct3D 函数中使用宏函数完成的一样，例如`D3DCOLOR_ARGB()`）。

但是如果我使用联合呢？

```
union RGBAColor
{
unsigned int Color;
struct RGBAColorComponents
{
    unsigned char Red;
    unsigned char Green;
    unsigned char Blue;
    unsigned char Alpha;
} Component;
}; 
```

这样我就不需要总是为读取或写入颜色分量进行移位 ( `<<`) 或屏蔽 ( )。`&`但这有问题吗？（我怀疑这有一些问题，因为我没有看到任何人使用这种方法。）

字节序可以成为一个问题吗？如果我们总是`Component`用于访问颜色组件并`Color`用于访问整个事物（用于复制、分配等），那么字节序应该不是问题，对吧？

-- 编辑 -- 我发现一个旧帖子是同样的问题。所以我想这个问题有点转贴：P 抱歉。这是链接：[在 C++ 中使用联合是一个好习惯吗？](https://stackoverflow.com/questions/943267/is-it-a-good-practice-to-use-unions-in-c)

根据答案，对于给定示例，联合使用似乎在 C++ 中是可以的。因为那里没有数据类型的变化，它只是访问相同数据的两种方式。如果我错了，请纠正我。谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:17:41.690

联合的这种用法在 C++ 中是非法的，其中联合包含重叠但互斥的对象。你不能写一个工会的成员，然后读出另一个成员。

在 C 语言中这是合法的，这是推荐的类型双关语方式。

这与（严格）别名的问题有关，这是编译器在尝试确定具有不同类型的两个对象是否不同时面临的困难。语言标准不同意，因为专家仍在研究可以在不牺牲性能的情况下安全地提供哪些保证。就个人而言，我避免所有这些。`int`实际将用于什么？翻译的安全方法是复制字节，如 by `memcpy`。

还有字节顺序问题，但这是否重要取决于您想对`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:14:50.533

我相信使用联合*可以解决*与字节顺序相关的任何问题，因为 RGBA 顺序很可能是在网络顺序中定义的。此外，每个组件将是 uint8_t 或类似的事实，可以帮助一些编译器使用符号/零扩展加载，将低 8 位直接存储到非对齐字节指针，甚至能够并行化一些字节操作（例如 arm 有一些打包的4x8 位指令）。

# verilog - 如何在综合级别访问文本文件

> ID：14745202
> 
> 赞同：0
> 
> 时间：2013-02-07T06:44:54.207
> 
> 标签：verilog, fpga, lattice-diamond

我正在使用 Lattice Diamond 编写 Verilog 代码进行综合。

我在一个文本文件中有二进制数据，我想将其用作我的代码的输入。

在模拟级别，我们可以使用**$readmemb**函数来做到这一点。这是如何在综合层面完成的？

我想访问文本文件中存在的数据作为 FPGA 的输入。

正如 Martin Thompson 先生所建议的（答案如下），我编写了一个 Verilog 代码来从文件中读取数据。

Verilog代码如下： -

```
module rom(clock,reset,o0);
 input clock,reset;
 output o0;
 reg ROM [0:0];
 reg o0;
 initial
  $readmemb("rom.txt",ROM);
 always @(negedge clock,negedge reset )
   begin
if(reset==0)
    begin
    o0<=0;
    end
else
    begin
    o0<=ROM[0];
    end
  end
endmodule 
```

当我在 fpga 上运行此代码时，我面临以下问题：-

如果我要读取的文本文件只有一位是“1”，那么我可以将输入输出引脚分配给时钟、复位和 ROM。但是，如果我在文本文件中有一位为“0”或多于一位的数据，我将无法分配输入引脚（即时钟、复位）并显示警告：-

```
 WARNING: IO buffer missing for top level port clock...logic will be discarded.
 WARNING: IO buffer missing for top level port reset...logic will be discarded. 
```

我无法理解为什么会收到此警告以及如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:44:59.913

一种方法是将数据构建到您已综合的网表中。您可以使用数据初始化只读存储器 (ROM)，`$readmemb`然后从设备内将其作为普通存储器进行访问。

下面介绍一些内存初始化方法：

[http://myfpgablog.blogspot.co.uk/2011/12/memory-initialization-methods.html](http://myfpgablog.blogspot.co.uk/2011/12/memory-initialization-methods.html)

在这里：

[http://rijndael.ece.vt.edu/schaum/slides/ddii/lecture16.pdf](http://rijndael.ece.vt.edu/schaum/slides/ddii/lecture16.pdf)

是倒数第二张幻灯片上文件初始化 RAM 的示例。如果您只想要一个 ROM，请忽略该`if (we)`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:59:18.823

将模拟视为一个环境而不是一个关卡。您应该只是将 DUT（被测设备）从 RTL 代码切换到综合网表，除此之外，您的仿真环境中应该没有任何变化。

从您提供的代码块来看，您似乎没有将测试和 fpga 的代码分开。您不应该尝试综合您的测试我建议将其拆分为至少 2 个单独的模块，您的测试会实例化您想要放置在 fpga 上的代码。很确定`$fwrite`也是不可合成的。

一个简单的测试用例可能如下所示：

```
module testcase
  //Variables here
  reg reg_to_drive_data;

  thing_to_test DUT (
    .input_ports ( reg_to_drive_data )
    .output_ports ()
    ...
  ); 

  //Test
  initial begin
    #1ns;
    reg_to_drive_data = 0;
    ...
  end
endmodule 
```

Via`includes`或`incdir`file 列出了 thing_to_test (DUT) 的代码被拉入模拟，将其更改为指向合成版本。

如果您要做的是初始化 ROM，并将这些数据保存在综合设计中，Martin Thompson 的回答涵盖了这个的正确用法`$readmemb`。

# vba - 在同一工作簿上复制数据时出现运行时错误 1004

> ID：14745204
> 
> 赞同：1
> 
> 时间：2013-02-07T06:44:55.867
> 
> 标签：vba, copy-paste

我正在尝试将数据从一张纸复制到另一张纸。但我得到一个运行时错误`1004 Application defined or object defined error`。

```
Sub copycells()
    Sheets("B").Select
    Range("A2:M299").Copy
    Sheets("A").Select
    Range("E20:Q317").Select
    ActiveSheet.Paste
End Sub 
```

有没有其他方法可以做到这一点。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:58:08.503

尝试：

```
Sub copycells()
    Sheets("A").Range("A2:M299").Copy
    Sheets("B").Range("E20:Q317").Activate
    ActiveSheet.Paste
End Sub 
```

这是另一种甚至不使用“激活”的方法

```
Sub CopyCellsWithoutActivate()
    Sheets(1).Range("A2:M299").Copy
    Sheets(2).Range("E20:Q317").PasteSpecial (xlPasteAll)
End Sub 
```

# elasticsearch - 为 not null 和 not empty("") 创建 Elasticsearch curl 查询

> ID：14745210
> 
> 赞同：90
> 
> 时间：2013-02-07T06:45:44.077
> 
> 标签：elasticsearch

如何创建 Elasticsearch curl 查询以获取不为空且不为空的字段值（“”），

这是mysql查询：

```
select field1 from mytable where field1!=null and field1!=""; 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-07T10:23:47.903

空值和空字符串都导致没有值被索引，在这种情况下您可以使用`exists`过滤器

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "constant_score" : {
         "filter" : {
            "exists" : {
               "field" : "myfield"
            }
         }
      }
   }
}
' 
```

`title`或与（例如）字段上的全文搜索结合使用：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "filtered" : {
         "filter" : {
            "exists" : {
               "field" : "myfield"
            }
         },
         "query" : {
            "match" : {
               "title" : "search keywords"
            }
         }
      }
   }
}
' 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-07-30T18:55:08.310

正如@luqmaan 在评论中指出的那样，[文档](https://www.elastic.co/guide/en/elasticsearch/reference/1.6/query-dsl-exists-filter.html)说过滤器`exists` **不会过滤掉空字符串，因为它们被认为是非空值**。

因此，添加到@DrTech 的答案中，为了有效地过滤出 null 和空字符串值，您应该使用以下内容：

```
{
    "query" : {
        "constant_score" : {
            "filter" : {
                "bool": {
                    "must": {"exists": {"field": "<your_field_name_here>"}},
                    "must_not": {"term": {"<your_field_name_here>": ""}}
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2018-01-22T15:34:31.493

在 elasticsearch 5.6 上，我必须使用下面的命令来过滤掉空字符串：

```
 GET /_search
    {
        "query" : {
            "regexp":{
                "<your_field_name_here>": ".+"
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-02-07T10:10:53.280

[在Bool 过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/bool-filter.html)的 Must-Not 部分包裹一个[缺失](http://www.elasticsearch.org/guide/reference/query-dsl/missing-filter.html)的过滤器。它只会返回存在该字段的文档，并且如果您将“null_value”属性设置为 true，则值明确不为空。

```
{
  "query":{
     "filtered":{
        "query":{
           "match_all":{}
        },
        "filter":{
            "bool":{
              "must":{},
              "should":{},
              "must_not":{
                 "missing":{
                    "field":"field1",
                    "existence":true,
                    "null_value":true
                 }
              }
           }
        }
     }
  }
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-06-25T09:42:39.323

您可以使用 bool 查询以及 must 和 must_not 的组合来做到这一点，如下所示：

```
GET index/_search
{
    "query": {
        "bool": {
            "must": [
                {"exists": {"field": "field1"}}
            ],
            "must_not": [
                {"term": {"field1": ""}}
            ]
        }
    }
} 
```

我在 Kibana 中使用 Elasticsearch 5.6.5 对此进行了测试。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-12-06T23:00:11.707

在 5.6.5 中对我有用的唯一解决方案是 bigstone1998 的正则表达式答案。出于性能原因，我不希望使用正则表达式搜索。我相信其他解决方案不起作用的原因是因为将分析标准字段，因此没有空字符串令牌可以否定。存在查询本身也无济于事，因为空字符串被认为是非空的。

如果您无法更改索引，则正则表达式方法可能是您唯一的选择，但如果您可以更改索引，则添加关键字子字段将解决问题。

在索引的映射中：

```
"myfield": {
    "type": "text",
    "fields": {
        "keyword": {
            "ignore_above": 256,
            "type": "keyword"
        }
    }
} 
```

然后你可以简单地使用查询：

```
{
  "query": {
    "bool": {
      "must": {
        "exists": {
          "field": "myfield"
        }
      },
      "must_not": {
        "term": {
          "myfield.keyword": ""
        }
      }
    }
  }
} 
```

注意`.keyword`must_not 组件中的 。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-04-10T11:49:48.750

您可以在**缺少的基础上使用****not**过滤器。

 **```
"query": {
  "filtered": {
     "query": {
        "match_all": {}
     },
     "filter": {
        "not": {
           "filter": {
              "missing": {
                 "field": "searchField"
              }
           }
        }
     }
  }
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-11-08T07:29:27.497

这是检查多个字段是否存在的查询示例：

```
{
  "query": {
    "bool": {
      "filter": [
        {
          "exists": {
            "field": "field_1"
          }
        },
        {
          "exists": {
            "field": "field_2"
          }
        },
        {
          "exists": {
            "field": "field_n"
          }
        }
      ]
    }
  }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-29T13:11:00.730

**您需要使用带有 must/must_not 和存在的 bool 查询**

**去哪里地方是空的**

```
{
  "query": {
    "bool": {
      "must_not": {
        "exists": {
          "field": "place"
        }
      }
    }
  }
} 
```

**去哪里地方不为空**

```
{
  "query": {
    "bool": {
      "must": {
        "exists": {
          "field": "place"
        }
      }
    }
  }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-03T03:49:07.197

我们使用的是 Elasticsearch 1.6 版，我使用同事的这个查询来覆盖字段的非空和非空：

```
{
  "query": {
    "filtered": {
      "query": {
        "match_all": {}
      },
      "filter": {
        "bool": {
          "must": [
            {
              "exists": {
                "field": "myfieldName"
              }
            },
            {
              "not": {
                "filter": {
                  "term": {
                    "myfieldName": ""
                  }
                }
              }
            }
          ]
        }
      }
    }
  }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-09-07T17:39:45.790

您可以将 bool 组合查询与 must/must_not 结合使用，它可以提供出色的性能并返回字段不为空且不为空的所有记录。

bool must_not 类似于“NOT AND”，表示字段！=“”，bool 必须存在表示其！= null。

如此有效地启用：**where field1!=null and field1!=""**

```
GET  IndexName/IndexType/_search
{
    "query": {
        "bool": {
            "must": [{
                "bool": {
                    "must_not": [{
                        "term": { "YourFieldName": ""}
                    }]
                }
            }, {
                "bool": {
                    "must": [{
                      "exists" : { "field" : "YourFieldName" }
                    }]
                }
            }]
        }   
    }
} 
```

弹性搜索版本：

```
 "version": {
    "number": "5.6.10",
    "lucene_version": "6.6.1"
  } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-12T08:10:49.200

ES 7.x

```
{
  "_source": "field", 
  "query": {
    "bool": {
      "must": [
        {
          "exists": {
            "field":"field"
          }
        }
      ],
      "must_not": [
        {
          "term": {
            "field.keyword": {
              "value": ""
            }
          }
        }
      ]
    }
  }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-24T10:32:31.890

```
Elastic search Get all record where condition not empty.

const searchQuery = {
      body: {
        query: {
          query_string: {
            default_field: '*.*',
            query: 'feildName: ?*',
          },
        },
      },
      index: 'IndexName'
    }; 
```**

# drupal - 在节点编辑表单中嵌入带有公开表单过滤器的视图（VBO 表单）

> ID：14745214
> 
> 赞同：1
> 
> 时间：2013-02-07T06:45:59.330
> 
> 标签：drupal, drupal-6, views, embed, form-api

**案例**：在另一个表单中插入/嵌入表单，同时保持`<form>`嵌入输出中的原始标记。在这种情况下，它是一个 Views Bulk Operations 表单，其中包含嵌入在节点编辑表单中的公开表单过滤器。

**问题**：嵌入时，表面上的一切看起来都很好，视图显示表单及其所有元素。但是，当检查 Views Exposed Form 呈现的输出时，Exposed Filter 被剥离了它的`<form>`标记。但是，当我在与节点编辑表单相同的页面上以标准方式将块添加到区域时，Views Exposed Form 输出包含`<form>`标记并且过滤器工作正常。

**注意**：VBO 表单的视图内容不受影响，其`<form>`标记在节点编辑表单中保持不变。只有同一视图显示中的 Exposed Form Filter 会被剥离`<form>`。此外，在视图显示中使用分页器并将 Use Ajax 设置为 Yes，如果我单击视图结果的下一页，Ajax 刷新的表单将包含`<form>`Views Exposed Form 的正确标记，并且过滤器从那时起开始工作。

**我尝试过的事情**：

*   将公开的表单设置为出现在一个块中，然后使用 module_invoke('views', 'block', 'view', '-exp-instructor_select-page_1') 单独嵌入公开的表单块。

*   使用 views_embed_view('VIEW-NAME', 'VIEW-DISPLAY') 嵌入视图 - VIEW-DISPLAY 是“默认”、“page_1”还是“block_1”——同样的问题。

*   使用 module_invoke('views', 'block', 'view', 'VIEWS-DISPLAY-block_1') 嵌入视图块显示；

*   使用 drupal_build_form($form_id, &$form_state) 直接插入表单（视图替换 drupal_get_form）

**经测试**：

*   使用 hook_form_alter

*   theme_preprocess_NODETYPE_node_form($vars)

*   在自定义视图公开的过滤器模板中对标记进行硬编码：

*   `<form id="views-exposed-form-VIEWS-DISPLAY" method="get" accept-charset="UTF-8" action="/URL" class="views-processed">` **查看暴露的表单模板代码** `<input type="hidden" value="instructor_select" name="view_name"><input type="hidden" value="block_1" name="view_display_id"><input type="hidden" value="" name="view_args"><input type="hidden" value="user/1/edit/studio" name="view_path"><input type="hidden" value="URL-PATH" name="view_base_path"><input type="hidden" value="VIEWS-DISPLAY" name="view_dom_id"><input type="hidden" value="0" name="pager_element"></form>`

我确定我错过了一些我尝试解决的其他方法，但这应该足以作为尝试的示例。

无论表单如何嵌入到节点编辑表单中，视图暴露过滤器都不起作用，因为`<form>`缺少元素，但是 AJAX 可以与 VBO 表单的其余部分一起使用，并且在使用分页器和 AJAX 刷新视图表单显示时，Exposed Form Filter 标记被正确呈现并且过滤器工作。

在这一点上，我没有想法。我真的很感激一些关于如何尝试的指针或代码示例。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:37:59.550

我想做同样的事情，像你一样挣扎。我终于找到了适合我的东西。上下文：Drupal 6，将带有暴露过滤器的 ajax 视图放在节点编辑表单上。

我在视图上创建了一个显示“块”并简单地通过块管理 UI 将其插入......事实证明它工作正常。

# html - TD wight everywhere

> ID：14745217
> 
> 赞同：0
> 
> 时间：2013-02-07T06:46:22.160
> 
> 标签：html, css, ruby-on-rails

Please help, I want **td** was the same size everywhere. And that was a vertical scrolling. I used height and this doesn't help.

I'm styled only **th**(his wight)

[http://imageshack.us/f/402/feedbacktz.jpg/](http://imageshack.us/f/402/feedbacktz.jpg/)

```
 <table class="table table-striped" id="feedback_table">
    <thead>
      <tr>
        <th style="width: 25px">Anything</th>
        <th style="width: 70px">Anything</th>
        <th style="width: 80px">Anything</th>
        <th style="white-space:nowrap; width: 125px">Anything</th>
        <th style="width: 360px">Anything</th>
        <th style="width: 114px">Anything</th>
      </tr>
    </thead>
    <tbody> 
```

if the reviews contain lots of text, the Text review is too broad (see attachment). Scrolling is required to see the edit button.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:37:34.040

Set the table with.

```
<table class="table table-striped" id="feedback_table" width="774"> 
```

or

```
table.table { width: 774px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:39:31.223

This might help in your case.

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

i have modified the code according to your need for example below

```
<p>overflow:scroll</p><table>
<tr>
  <td>
  <div class="scroll">You can use the overflow property when you want to have better control of the layout. The default value is visible.</div>
 </td>
</tr>
</table> 
```

//CSS

```
div.scroll { 
background-color:#00FFFF; 
width:100px; height:100px;
overflow:scroll;
} 
```

hope this helps!

# python - Python 成员函数装饰器使用实例作为参数

> ID：14745223
> 
> 赞同：2
> 
> 时间：2013-02-07T06:46:36.387
> 
> 标签：python

如何在 python 成员函数装饰器中使用实例作为参数。下面是一个例子。

```
def foo(func):
    def wrap(s):
        func()
        s.ma()
    return wrap

class A:
    def ma(self):
        print "this is ma"

    @foo(self)     #error.name 'self' is not defined
    def mb(self):
        print "this is mb" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:28:21.253

目前尚不清楚您在寻找什么，但如果您希望能够在装饰器中使用对实例的引用：

```
def foo(func):
    def wrap(s): # I'd call this 'self' instead of 's' to remind us it's a reference to an instance

        func(s) # This is a function, not a method yet - so we need to pass in the reference

        s.ma() # This is a method, because you use attribute lookup on the object s to get it
    return wrap

class A:
    def ma(self):
        print "this is ma"

    @foo     # if the way foo wraps mb doesn't depend on some arg, don't use args here
    def mb(self):
        print "this is mb" 
```

我认为您在这里对 Python 中的方法和函数之间的区别感到困惑——您似乎期望`func`它会像方法一样工作，而实际上它在被修饰时仍然是一个函数。在实例上查找属性时，装饰函数将被转换为方法；这意味着当您调用`func`包装函数时，您仍然需要显式的 self 。

[请参阅How to make a chain of function decorators](https://stackoverflow.com/questions/739654/understanding-python-decorators/739665#739665)的绝妙答案？为了更好地解释正在发生的事情。

# php - 如何为名称缩写制作正则表达式

> ID：14745226
> 
> 赞同：0
> 
> 时间：2013-02-07T06:46:49.643
> 
> 标签：php, regex

我有这样的原始数据

**原始数据：**

*   斯里兰卡伊斯提亚宁西
*   戴安娜·雷迪宁西
*   ENDANG WAHYU PURWANINGSIH
*   THERESIA PUDJI ASTUTIE 纱丽

我需要像这样展示它：

**查看数据：**

*   SRI I。
*   戴安娜·W。
*   ENDANG WP
*   特蕾西亚·帕斯

如何使用 PHP 和正则表达式完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:05:25.520

这是一个简单的解决方案，可以很容易地变成一个函数。

```
$name = 'THERESIA PUDJI ASTUTIE SARI';

//split the name to a maximum of 2 array values.
list ($first_name, $second_names) = explode(' ', $name, 2);

$second_names = explode(' ', $second_names);

foreach ($second_names as $key => $value) {
    $second_names[$key] = $value[0] . '.';
}

echo $first_name . ' ' . implode(' ', $second_names); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:19:43.200

假设， $var 具有您要转换的字符串。

```
$var = "THERESIA PUDJI ASTUTIE SARI";

$parts = explode(" ", $var);
$str = $parts[0]." ";
for($i=1; $i<count($parts); $i++){
    $str .= $parts[$i][0].". ";
}

echo $str will give you desired output. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:10:09.817

我不知道“make delimiter”是什么意思，但这是一个基于正则表达式的解决方案：

```
function shorten_name($name) {
    return preg_replace('/ (\w)\w*/', ' $1.', $name);
} 
```

该模式匹配一​​个空格后跟任意数量的“单词字符”( `\w`)，即字母（区域设置）、数字和下划线，然后仅用空格、第一个字母和一个点替换这个序列。

**可能的修改：**

*   如果您只想像示例中那样匹配来自 AZ 的大写字母，请替换`\w`为`[A-Z]`.
*   如果您想匹配任何不是空格的内容（即“MÜLLER-RIEBENSEE”=>“M.”），请替换`\w`为`\S`（非空格）。
*   如果您想使用空格以外的其他字符作为分隔符，请使用字符类和子模式，例如：`preg_replace('/([\s-])(\w)\w*/', '$1$2.', $name)`将任何空白字符`\s`或破折号`-`作为分隔符（即“MÜLLER-RIEBENSEE”=>“M.-R.” )

# jquery - 函数更改div值后颜色变化太慢

> ID：14745230
> 
> 赞同：0
> 
> 时间：2013-02-07T06:47:02.120
> 
> 标签：jquery, css, colors

很难解释我正在经历什么。该代码检测 div 标签的值。如果该值低于 0、0 或高于零；它会变成不同的颜色。虽然它正在做的是滞后（-1 仍然是灰色，0 将是绿色或红色但不是灰色，1 将是灰色）

```
function vote(vote_id, votetype) {

    $.post('vote.php', {
        id: vote_id,
        type: votetype
    },

    function (output) {
        $('#vote' + vote_id).html(output).show();

    });
    colorChange(vote_id);
}

function colorChange(vote_id) {
    var voteTotal = $('#vote' + vote_id);

    if (voteTotal.text() < 0) {
        voteTotal.css('color', '#800000');
    } else if (voteTotal.text() == 0) {
        voteTotal.css('color', '#333333');
    } else if (voteTotal.text() > 0) {
        voteTotal.css('color', '#32cd32');
    } else {
        voteTotal.css('color', '#333333');
    }

} 
```

vote.php 根据投票类型更新数据库，然后将数据库中的新值返回给函数。

似乎直到函数完全关闭后，该函数才会完成并更新值。我尝试在我正在使用的 onClick 中分离函数`onClick="vote(x,y);colorChange(id)"`，但没有成功。

我在这里俯瞰什么？我有一种感觉，这很简单，我只是脑残。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:53:34.640

如果你想在你`vote`的 div 颜色应该改变之后你应该调用这个函数`colorChange`

```
function vote(vote_id, votetype) {

   $.post('vote.php', {id: vote_id, type: votetype },
     function(output) {
        $('#vote' + vote_id).html(output).show();
        colorChange(vote_id);    
     });    
} 
```

并且代码`colorChange`可以更改为

```
function colorChange(vote_id) {
    var voteTotal = $('#vote' + vote_id);
    if (voteTotal.text() < 0) {
        voteTotal.css('color', '#800000');
    }
    else if (voteTotal.text() > 0) {
        voteTotal.css('color', '#32cd32');
    }
    else {
        voteTotal.css('color', '#333333');
    }
} 
```

# php - 用php下载图片代码

> ID：14745232
> 
> 赞同：0
> 
> 时间：2013-02-07T06:47:05.693
> 
> 标签：php, image, curl

我是 php 的新手，希望编写一个下载代码，允许用户下载图像。这意味着我已经给出了一个下载链接 onclick 位于服务器上的图像应该开始下载。我尝试了各种选项，如 fopen、curl 等，但无济于事。在使用 curl 时，图像会下载，但不会在下载位置打开。它给出错误消息“无法读取文件头！未知文件格式。” 请帮助这是我使用的 curl 代码：

```
function DownloadImageFromUrl($imagepath)
{
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, 0);
curl_setopt($ch,CURLOPT_URL, $imagepath);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result=curl_exec($ch);
curl_close($ch);
return $result;
}

$imagecontent =DownloadImageFromUrl("http://www.xyz.com/back_img.png");
$savefile = fopen('myimage.png', 'w');
fwrite($savefile, $imagecontent);
fclose($savefile); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:55:49.257

您应该为此使用 http 标头

```
header('Content-Type: "'.$mime.'"');
header('Content-Disposition: attachment; filename="'.$filename.'"');
header("Content-Transfer-Encoding: binary");
header('Expires: 0');
header('Pragma: no-cache');
header("Content-Length: ".strlen($data));
exit($data); 
```

mime - 图像的 MIME 类型

文件名 - 下载文件的名称

数据 - 文件。您可以使用以下方法从其他服务器获取图像：

```
$data = file_get_contents('http://www.xyz.com/back_img.png') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:53:57.383

试试这个

```
$imagecontent =DownloadImageFromUrl("http://www.xyz.com/back_img.png");
$savefile = fopen('myimage.png', 'r');
fread($savefile, $imagecontent);
fclose($savefile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:53:30.080

```
function downloadFile ($url, $path) {

  $newfname = $path;
  $file = fopen ($url, "rb");
  if ($file) {
    $newf = fopen ($newfname, "wb");

    if ($newf)
    while(!feof($file)) {
      fwrite($newf, fread($file, 1024 * 8 ), 1024 * 8 );
    }
  }

  if ($file) {
    fclose($file);
  }

  if ($newf) {
    fclose($newf);
  }
 }

downloadFile ("http://www.site.com/image.jpg", "images/name.jpg"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:56:32.020

您需要添加`header()`方法以使其作为可下载项目打开。

```
header("Content-Type: application/force-download"); 
header("Content-Disposition: attachment; filename=\"".basename($fullPath)."\";" ); 
```

在哪里

`$fullPath`是图像路径。

有关更多规范，请参阅 - [php 中的标头](http://php.net/manual/en/function.header.php)

# css - CSS - 悬停时更改 2 个元素的状态

> ID：14745236
> 
> 赞同：0
> 
> 时间：2013-02-07T06:47:24.547
> 
> 标签：css, hover

```
<li class="red">
<p><a href="#">Home</a></p>
</li> 
```

在 CSS 中，我想改变 li 元素的 bg 颜色，但是文本的颜色也必须改变。问题是，即使在我将鼠标悬停在 li 元素之后，我也必须更进一步并实际触摸文本才能改变它的颜色。

如果这可行，我会感到惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:50:18.033

首先删除`<p>`标签

```
li.red > a:hover {  
    color: red;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:50:18.753

```
li:hover {
   background-color: blue;
}

li:hover p,
li:hover a {
   color: yellow;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:54:14.503

您应该考虑**两件事：**

1.  `<p></p>`是块级元素。它不在 inline-element 内部使用，在这种情况下，`<li></li>`

2.  只需将您的`<a></a>`标签设为块级元素即可。

所以你的代码应该是这样的：

```
<ul>
    <li class="red">
       <a href="#">Home</a>
    </li>
</ul> 
```

然后你可以想出这样的 CSS：

```
.red a:hover {
   padding: 10px 20px;
   display: block;
   background-color: #9900;
   color: #FFFFFF;
} 
```

# c# - windows8中的应用程序源代码

> ID：14745241
> 
> 赞同：3
> 
> 时间：2013-02-07T06:47:45.963
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我想使用 c# 和 xaml 开发 Metro 风格的应用程序。在 Windows 8 中有许多默认应用程序，如地图、天气等。有没有办法在 Windows 8 中获取地图或天气应用程序的源代码？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:00:06.123

所有 Windows 应用商店应用程序都安装到

```
C:\Program Files\WindowsApps 
```

你可以在哪里查看它们。JavaScript 应用程序可读性没有问题，您需要反编译 C# 应用程序以获取其源代码。您可以使用来自 Telerik（免费）的[JustDecompile](http://www.telerik.com/products/decompiler.aspx)等工具。有关更多信息，请参阅 Justin Angel 的这篇文章[http://justinangel.net/ReverseEngineerWin8Apps](http://justinangel.net/ReverseEngineerWin8Apps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:57:42.947

我强烈建议您访问 Microsoft Windows Store 应用程序站点。该网站提供了大量的功能示例。请在以下链接下载 C# 30.9M 示例文件，这将是您很好的参考。

[http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)

对于您想象的更多真实示例，

*   天气应用示例： [http ://www.c-sharpcorner.com/UploadFile/99bb20/consume-web-service-in-metro-style-app/](http://www.c-sharpcorner.com/UploadFile/99bb20/consume-web-service-in-metro-style-app/)
*   地图应用示例： [http ://code.msdn.microsoft.com/Bing-Maps-SDK-for-Metro-31b378eb](http://code.msdn.microsoft.com/Bing-Maps-SDK-for-Metro-31b378eb)

# internet-explorer - Internet Explorer 未检测到图像 (width="70%")

> ID：14745244
> 
> 赞同：0
> 
> 时间：2013-02-07T06:47:53.503
> 
> 标签：internet-explorer, width

Internet Explorer 无法识别我的索引页图像。我创建了一个随机的图片数组，每次刷新索引时都会出现一个宽度为“70%”的新图片（以便能够适用于不同的设备）。当我删除宽度=“70%”时，一切都适用于所有不同的浏览器；但是，我希望有一个根据屏幕尺寸而变化的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:21:38.867

使用 css 宽度 img.seventy{width:70%; 框尺寸：边框框；-wekit-box-sizing:边框框；-moz-box-sizing:边框框；-o-box-sizing:border-box}

# android - 如何在 listView 上禁用 Jquery 移动弹出窗口滚动？

> ID：14745254
> 
> 赞同：1
> 
> 时间：2013-02-07T06:48:33.190
> 
> 标签：android, jquery, ios, html, jquery-mobile

我正在为 IOS 和 Android 开发 Jquery 移动应用程序。我阻止弹出窗口在其外部单击时关闭。我的弹出窗口正在列表上打开，当我在弹出 textArea 中键入任何内容时，弹出窗口会根据列表滚动上下滚动。当我的列表滚动时，甚至我的弹出窗口也会滚动。有什么方法可以防止列表滚动或弹出滚动。

# azure - 客户域映射到在具有不同端口的 azure 上运行的项目

> ID：14745255
> 
> 赞同：0
> 
> 时间：2013-02-07T06:48:34.613
> 
> 标签：azure, cname, domain-mapping

有 6 个项目在具有不同端口的单个实例上运行。这是 [http://stanthony.cloudapp.net](http://stanthony.cloudapp.net) 。. [http://stanthony.cloudapp.net:86](http://stanthony.cloudapp.net:86)

现在我想用不同的域运行每个 url，我`CNAME`用一个域进行了映射，但仍然存在所有端口都在这个单一域 www.kpmaurya.org 上运行的相同问题。. www.kpmaurya.org:86

我想用不同的域运行所有这些 url，请让我知道锄头是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:12:02.030

在 Azure Web 角色的服务定义文件中，您有一个用于添加站点的部分。在此站点中，您可以为 6 个站点中的每一个添加绑定部分，并将主机标头设置为您的每个自定义域。

请参阅此链接了解更多详情：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)

# regex - 对于这样的情况如何改变情况？

> ID：14745257
> 
> 赞同：1
> 
> 时间：2013-02-07T06:48:40.653
> 
> 标签：regex, sed

我想使用 sed 或类似的东西来读取文本文件并将所有大写短语的实例更改为用 \textsc{ *** * } 包裹的小写。

例如：

```
THIS SENTENCE IS ALL CAPS except not really 
```

应该成为

```
\textsc{this sentence is all caps} except not really 
```

如果

```
This Sentence Has Many Caps 
```

应该留下

```
This Sentence Has Many Caps 
```

使用这种模式`s/\(.[A-Z]*\)/textsc{\L\1}/`，字符串只需更改第一个单词。

谁能指出我正确的方法？

***更新：***正则表达式模式也应涵盖撇号

```
I'll BUY YOU A DRINK 
```

大多数解决方案都会分解字母***I***和***'***像这样`\textsc{i}'ll \textsc{buy you a} \textsc{drink}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:38:42.173

```
$ cat file
THIS SENTENCE IS ALL CAPS except not really
This Sentence Has Many Caps
THIS SENTENCE Has Many Caps

$ awk -f tst.awk file
\textsc{this sentence is all caps} except not really
This Sentence Has Many Caps
\textsc{this sentence} Has Many Caps

$ cat tst.awk
{
   while ( match( $0, /([[:upper:]]{2,}[[:space:]]*)+/) ) {
      rstart  = RSTART
      rlength = RLENGTH

      if ( match( substr($0,RSTART,RLENGTH), /[[:space:]]+$/) ) {
         rlength = rlength - RLENGTH
      }

      $0 = substr($0,1,rstart-1) \
           "\\textsc{" tolower(substr($0,rstart,rlength)) "}" \
           substr($0,rstart+rlength)
   }

   print
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:37:58.460

这看起来应该适合你。

```
echo "THIS sentence IS ALL CAPS Except not really BUT THIS IS" | \
  sed -re "s/\b(([A-Z]+ [A-Z]+)+)\b/\\\textsc{\L\1}/g" 
```

这导致了这个短语：

```
THIS sentence \textsc{is all caps} Except not really \textsc{but this is} 
```

这`/g`是一个全局替换（不仅仅是第一个匹配）。这`\b`表示短语必须在单词边界上开始和结束（而不是在单词中间）。之前的三个斜线`textsc`是转义（转义）以产生最终的`\textsc`. 这`([A-Z]+ [A-Z]+)+`是为了捕获一个全大写的短语。我首先尝试在字符类中添加一个空格，如在 中`[A-Z ]`，但这导致在大括号之前有一个空格，如在`\text{this sentence }`. 所以我在单词中间建立了空间来创建一个短语。

请注意，这会留下孤立的大写单词。我认为这是有意的，因为问题询问的是“短语”。但是，如果您还需要更换它们，请尝试以下方法：

```
echo "THIS sentence IS ALL CAPS Except not really BUT THIS IS" | \
  sed -re "s/\b((([A-Z]+ [A-Z]+)+)|[A-Z]+)\b/\\\textsc{\L\1}/g" 
```

这导致

```
\textsc{this} sentence \textsc{is all caps} Except not really \textsc{but this is} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:16:53.477

这可能对您有用（GNU sed）：

```
sed -r 's/\b[A-Z]+\b( *\b[A-Z]+\b)*/\\textsc{\L&}/g' file 
```

# c# - 使用 C# 代码隐藏中的 GridViewRow 对象创建 GridView 行

> ID：14745258
> 
> 赞同：0
> 
> 时间：2013-02-07T06:48:40.273
> 
> 标签：c#, asp.net

我想在后面的代码中创建一个 GridView 控件。

数据是从数据库表中获取的。

我的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class gv1 : System.Web.UI.Page
{
    SqlConnection cn;
   SqlCommand cmd;
   DataSet ds;
   SqlDataAdapter da;

   protected void Page_Load(object sender, EventArgs e)
  {
       cn = new SqlConnection("Data Source=AMIR-PC\\MOHEMMAD;Initial Catalog=CRM_InvestPlus;Integrated Security=True");

}
protected void Button1_Click(object sender, EventArgs e)
{
    cn.Open();
    cmd = new SqlCommand("Select * from Customer_Master", cn);
    da = new SqlDataAdapter(cmd);
    ds = new DataSet();
    da.Fill(ds);
    cn.Close();

    GridView gr1 = new GridView();

    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        GridViewRow row = new GridViewRow(i, i, DataControlRowType.DataRow,  DataControlRowState.Normal);
        TableCell cell1 = new TableCell();
        TableCell cell2 = new TableCell();
        cell1.Text = ds.Tables[0].Rows[i][0].ToString();
        cell2.Text = ds.Tables[0].Rows[i][0].ToString();
        row.Cells.Add(cell1);
        row.Cells.Add(cell2);
        gr1.Controls[0].Controls.AddAt(i, row);

      }
        this.Controls.Add(gr1);
   }
} 
```

但是当我运行代码错误如下：

用户在显示的代码行未处理 ArgumentOutOfRangeException

gr1.Controls[0].Controls.AddAt(i,row);

请帮忙..
提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:10:04.247

我认为发生这种情况是因为您要添加的`Control[0]`内容未在任何地方设置。像这样改变它，看看它是否有帮助：

~~gr1.Controls.AddAt(i, row);~~

好的，这应该是这样的：

首先，当您初始化网格视图时，您必须添加它`Table`

```
var gv = new GridView();
var t = new Table();
gv.Controls.Add(t); 
```

然后你可以按照你的方式添加你的行

```
gv.Controls[0].AddAt(i, row); 
```

请尝试这种方式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:04:08.817

为什么不尝试更简单的代码？

```
if(ds.tables.count > 0)
    {
    gr1.DataSource = ds;
    gr1.DataBind();

    }
else
{
  lable.Text = "No Record Found";
} 
```

# jsf - 如何创建 以编程方式标记？

> ID：14745259
> 
> 赞同：4
> 
> 时间：2013-02-07T06:48:41.983
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试创建一个动态 TabView，其中每个选项卡在标签的帮助下显示不同的 xhtml 页面`<ui:include>`。

以下是我尝试执行的代码片段

```
 Tab tab= new Tab();  
    Portal portal=itr.next();
    tab.setTitle(portal.getPortal_name());
    tab.setId(portal.getPortal_name());
    /*   Code to generate <ui:include> tag
     *   and add it to tab
     */
    tabView.getChildren().add(tab); 
```

我进行了很多搜索，但找不到任何生成`<ui:include>`标签的方法。谁能建议一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:07:29.390

使用[`FaceletContext#includeFacelet()`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html#includeFacelet%28javax.faces.component.UIComponent,%20java.lang.String%29)：

```
FaceletContext faceletContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
faceletContext.includeFacelet(tab, "include.xhtml"); 
```

请注意，在视图构建期间未运行时，此构造在 MyFaces 中失败。它适用于莫哈拉。

* * *

**与具体问题无关**，您知道`<p:tabView value>`哪些可以收集吗？无需以编程方式创建选项卡。另请参阅例如[如何添加按钮以在最后一个选项卡附近添加新选项卡？](https://stackoverflow.com/questions/11961692/how-to-add-button-for-adding-new-tabs-near-last-tab/11962703#11962703)

# c# - 在 awesomium 中创建 JavaScript 全局对象

> ID：14745260
> 
> 赞同：1
> 
> 时间：2013-02-07T06:48:49.300
> 
> 标签：c#, awesomium

我试图在 Awesomium 聊天中提问，但没有得到答复。所以。让我们试试这段代码：

```
JSObject jso1 = webView.CreateGlobalJavascriptObject("Super1");
JSObject jso2 = webView.CreateGlobalJavascriptObject("Super2");
webView.ExecuteJavascript("Super2 = function() { return 555; }");
JSValue val = webView.ExecuteJavascriptWithResult("Super2();"); 
```

如果我们使用调试器跟踪它，我们可以看到 jso2 尚未创建，但 jso1 会。因此，val 2 永远不会设置为 555。

让我们试试这个：

```
webView.CreateGlobalJavascriptObject("Super1");
JSObject jso2 = webView.CreateGlobalJavascriptObject("Super2");
webView.ExecuteJavascript("Super2 = function() { return 555; }");
JSValue val = webView.ExecuteJavascriptWithResult("Super2();"); 
```

Super2 将被创建但不会分配给功能。val 将是未定义的（不是 555）。

反对：

```
webView.CreateGlobalJavascriptObject("Super1");
webView.CreateGlobalJavascriptObject("Super2");
webView.ExecuteJavascript("Super2 = function() { return 555; }");
JSValue val = webView.ExecuteJavascriptWithResult("Super2();"); 
```

完美运行！此代码创建两个对象并将 Super2 分配为函数。val 在代码执行后设置 555。

所以。问题是谁错了？可能是我，因为我可能不了解 awesomium 引擎的原理。还是它的一个错误？

问候！

# django - 拆分选择日期时间小部件

> ID：14745266
> 
> 赞同：0
> 
> 时间：2013-02-07T06:49:09.987
> 
> 标签：django

```
 forms.py 

 class KEBReading_form(forms.ModelForm):

class Meta:
    model=KEBReading
    exclude=("truepower_consumed","powerfactor",)

    datetime = forms.DateTimeField(widget=forms.SplitSelectDateTimeWidget(hour_step=2, \
    minute_step=15, second_step=30, twelve_hr=True, years=[2008,2009,2010])) 
```

在数据库中，我使用了一个名为 DateTime 的字段，但在我的网页中，我希望它是单独的日期和时间供用户输入。如何使用 splitSelectDateTimeWidget 使其工作。我试过了，但它工作正常。它显示为一个名为 datetime 的字段，仅供用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:22:34.137

试试这个片段 SplitSelectDateTimeWidget [http://djangosnippets.org/snippets/1206/](http://djangosnippets.org/snippets/1206/)

这里还有如何使用 django admin datetime 小 [部件 以自定义形式使用 Django 时间/日期小部件](https://stackoverflow.com/questions/38601/using-django-time-date-widgets-in-custom-form)

# android - 锁定 Android 手机时出现致命信号 11

> ID：14745276
> 
> 赞同：0
> 
> 时间：2013-02-07T06:49:40.073
> 
> 标签：android, crash, cocos2d-x

我有一个 android 应用程序，当我按下手机的锁定按钮时它崩溃了。当我按下主页按钮并从任务栏中恢复时，该应用程序运行良好。但是当我锁定屏幕时，它会显示以下日志并崩溃。因此，当我从任务栏中恢复应用程序时，它会重新启动应用程序。

```
02-07 12:42:09.247: W/Settings(23540): Setting android_id has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
02-07 12:42:09.257: A/libc(23540): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 23554 (Thread-1101) 
```

有人可以帮我解决这个问题，因为我对 Android 开发还很陌生。我正在使用 cocos2d-x 开发我的应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:55:04.767

将标签`android:hardwareAccelerated="false"`的`activity`标签放在`Manifest`崩溃的文件中。

# plsql - 如何从oracle导入？

> ID：14745282
> 
> 赞同：0
> 
> 时间：2013-02-07T06:49:59.947
> 
> 标签：plsql, oracle11g, sql-loader

朋友们，我尝试通过以下命令使用命令行从 oracle 导入数据：

```
expdp hr/Password1 DIRECTORY=dmpdir DUMPFILE=hr.dump 
```

我得到了转储文件，但问题是它不是可读的形式！而且我尝试使用导出到另一个模式

```
C:\Users\thiyagarajan_a>impdp schema1/Password1 DIRECTORY=dmpdir DUMPFILE=scott.
dmp 
```

数据没有被导出！

谁能解释一下这里到底发生了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:00:00.710

表导出/导入：

TABLES 参数用于指定要导出的表。以下是表导出和导入语法的示例。

```
expdp scott/tiger@db10g tables=EMP,DEPT directory=TEST_DIR dumpfile=EMP_DEPT.dmp logfile=expdpEMP_DEPT.log

impdp scott/tiger@db10g tables=EMP,DEPT directory=TEST_DIR dumpfile=EMP_DEPT.dmp logfile=impdpEMP_DEPT.log 
```

对于模式导出/导入：

exp 的 OWNER 参数已替换为 SCHEMAS 参数，该参数用于指定要导出的模式。以下是模式导出和导入语法的示例。

```
expdp scott/tiger@db10g schemas=SCOTT directory=TEST_DIR dumpfile=SCOTT.dmp logfile=expdpSCOTT.log

impdp scott/tiger@db10g schemas=SCOTT directory=TEST_DIR dumpfile=SCOTT.dmp logfile=impdpSCOTT.log 
```

# asp.net - 使用文本框、ajax 日历扩展器和比较验证器时出错

> ID：14745283
> 
> 赞同：0
> 
> 时间：2013-02-07T06:50:00.367
> 
> 标签：asp.net

我使用带有 textchanged 事件的文本框，autopostback true ，ajax 日历扩展器并保留比较验证器来检查大于今天的日期，如果我输入错误的日期验证错误会立即出现并消失并且文本框事件正在触发？如何停止事件触发和显示错误

# mysql - grouping join query results

> ID：14745285
> 
> 赞同：0
> 
> 时间：2013-02-07T06:50:11.180
> 
> 标签：mysql, join, group-by

I am trying to write a query that shows me all orders with their options. So far that's done, but when I try to group them by order id it just print a separate row for each option and not the order ID and all its option under it.

I am missing something but can't figure out what is it :)

Here is what I have

```
$sql = 'SELECT *
        FROM `order` RIGHT JOIN `order_option`
        on order.order_id=order_option.order_id
        where order_status_id = 2 
        group by order_option.order_option_id';

$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
    print "ID:{$row['order_id']}  <br> ".
         "OPTION NAME: {$row['name']} <br> ".
         "VALUE: {$row['value']} <br> ".
         "--------------------------------<br>";
} 
echo "Fetched data successfully\n";
mysql_close($conn);

?>

**UPDATE 1** 
```

This is how the query worked now

```
SELECT 
  o.order_id, 
  o.name, 
  o.value, 
  GROUP_CONCAT(o.order_id, o.name, o.value SEPARATOR ',') AS Options 
FROM `order_option` AS o 
LEFT JOIN `order` AS oo on o.order_id = oo.order_id 
where oo.order_status_id = 2 
group by o.order_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:57:02.590

You should `GROUP BY order_id` instead, and use `GROUP_CONCAT` to get all the options of an order in the same row:

```
SELECT 
  o.order_id,
  GROUP_CONCAT(oo.order_option_id SEPARATOR ',') AS Options
FROM `order` AS o
RIGHT JOIN `order_option` AS oo on o.order_id = oo.order_id
where o.order_status_id = 2 
group by o.order_id; 
```

[**SQL Fiddle Demo**](http://www.sqlfiddle.com/#!2/a7a8e/1)

If `GROUP_CONCAT` is not what are you looking for, then you have to use other aggregate functions, but don't include any columns that is not in the `GROUP BY` clause in the `SELECT` clause without an aggregate function. Otherwise you will got inconsistent data.

* * *

## Update 1

The reason your query doesn't work:

```
SELECT 
  o.order_id, 
  o.name, 
  o.value, 
  GROUP_CONCAT(o.order_id SEPARATOR ',') AS Options 
FROM order_option AS o 
LEFT JOIN order AS oo on o.order_id = oo.order_id 
where oo.order_status_id = 2 
group by o.order_id 
```

Becuase the two columns `o.name, o.value` in the `SELECT` clause are not neither in an aggregate function not in the `GROUP BY` clause, so you are getting inconsistent values of these tow columns, MySQL gets an arbitrary value for them. Try this instead:

```
SELECT 
  o.order_id, 
  o.name, 
  o.value, 
  GROUP_CONCAT(o.order_id SEPARATOR ',') AS Options 
FROM order_option AS o 
LEFT JOIN order AS oo on o.order_id = oo.order_id 
where oo.order_status_id = 2 
group by o.order_id, 
         o.name,
         o.value; 
```

# sql - 从一个表中获取一个值并将其插入另一个 SQL

> ID：14745293
> 
> 赞同：0
> 
> 时间：2013-02-07T06:50:43.490
> 
> 标签：sql, sql-server, sql-server-2008

我的存储过程是这样的

```
 ALTER PROCEDURE [dbo].[kt_insernotes]
     (@DATASET  NVARCHAR (512)
      ,@ROWNUMBER INT
      ,@LASTCHANGED DATETIME
      ,@NOTESFILEID INT
      ,@NOTESRECID INT 
      ,@LINENUMBER NUMERIC (28, 12)
      ,@TXT  NVARCHAR (512)
      ,@DATE_   DATETIME 
      ,@USERID  INT   
    )
AS

INSERT INTO NOTES (DATASET
      ,ROWNUMBER
      ,LASTCHANGED
      ,NOTESFILEID
      ,NOTESRECID
      ,LINENUMBER
      ,TXT
      ,DATE_
      ,USERID)
values (@DATASET,@ROWNUMBER,@LASTCHANGED,@NOTESFILEID, (select ISP_EFAVORITLINE.ROWNUMBER where ISP_EFAVORITLINE.DATASET=(@DATASET)) ,@LINENUMBER ,@TXT,@DATE_,@USERID)
    RETURN 
```

一切对我来说都很好，但是这条线

```
(select ISP_EFAVORITLINE.ROWNUMBER where ISP_EFAVORITLINE.DATASET=(@DATASET)) 
```

抛出错误

> *消息 4104，级别 16，状态 1，过程 kt_insernotes，第 26 行
> 无法绑定多部分标识符“ISP_EFAVORITLINE.DATASET”。
> 消息 4104，级别 16，状态 1，过程 kt_insernotes，第 26 行
> 无法绑定多部分标识符“ISP_EFAVORITLINE.ROWNUMBER”。*

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:53:50.477

您缺少一个`FROM`子句：

```
(select ISP_EFAVORITLINE.ROWNUMBER from ISP_EFAVORITLINE where ISP_EFAVORITLINE.DATASET=(@DATASET)) 
```

系统看到一个表名或别名，但它不知道它要绑定到什么。它*可能*只是假设您的意思是具有该名称的表，但 SQL 并不倾向于以假设的方式做太多事情。如果你想使用一个表，你最好把它放在一个`FROM`子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:08:25.837

是的，我们可以在 value 子句中选择查询：

```
ALTER PROCEDURE [dbo].[kt_insernotes]
              (@DATASET  NVARCHAR (512)
              ,@ROWNUMBER INT
              ,@LASTCHANGED DATETIME
              ,@NOTESFILEID INT
              ,@NOTESRECID INT 
              ,@LINENUMBER NUMERIC (28, 12)
              ,@TXT  NVARCHAR (512)
              ,@DATE_   DATETIME 
              ,@USERID  INT   
            )
AS

INSERT INTO NOTES (DATASET
                  ,ROWNUMBER
                  ,LASTCHANGED
                  ,NOTESFILEID
                  ,NOTESRECID
                  ,TXT
                  ,DATE_
                  ,USERID
                  ,LINENUMBER
                 )
select @DATASET,
       @ROWNUMBER,
       @LASTCHANGED,
       @NOTESFILEID,
       @LINENUMBER,
       @TXT,
       @DATE_,
       @USERID,
       ISP_EFAVORITLINE.ROWNUMBER 
from ISP_EFAVORITLINE
where ISP_EFAVORITLINE.DATASET=(@DATASET)

RETURN 
```

# javascript - 我有一个名为 remove() 的自定义 js 函数，它适用于除 chrome 之外的所有浏览器

> ID：14745294
> 
> 赞同：2
> 
> 时间：2013-02-07T06:50:44.630
> 
> 标签：javascript, google-chrome, conflict

我搜索了一下，发现它似乎是 chrome 中的保留关键字，因此它与我的代码的 remove() 冲突。是否有一种解决方法可以在不实际更改所有地方的名称的情况下完成这项工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:46:35.990

今天上课的时候，我也遇到了同样的问题。我做了一个示例代码，演示了如何在 JS 中应用 removeChild 方法。它适用于除 chrome 之外的所有浏览器。我只是更改了函数的名称，一切正常。名为**remove**的用户函数不起作用。查看代码。

此致。

```
 <html>
    <head>
    <script>
    function remover(){ 
      var itemRemover = document.getElementById("numero").value;
      var item=document.getElementById(itemRemover);
      var lista=document.getElementById("lista");
      lista.removeChild(item);
      document.getElementById("numero").value="";     
    }
    </script>
    </head>
    <body>
       <ul id="lista">
          <li id="1">Ford</li>
          <li id="2">GM</li>
          <li id="3">Honda</li>
       </ul>    
        <input type="text" id="numero" />
        <input type="button" value="Remove by Id" 
               onclick="remover();" />
    </body>
    </html> 
```

# html - 如何在两列中显示无序列表？

> ID：14745297
> 
> 赞同：277
> 
> 时间：2013-02-07T06:50:56.937
> 
> 标签：html, css, html-lists, css-multicolumn-layout

使用以下 HTML，将列表显示为两列的最简单方法是什么？

```
<ul>
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
    <li>E</li>
</ul> 
```

所需显示：

```
A B
C D
E 
```

该解决方案需要与 Internet Explorer 一起使用。

* * *

## 回答 #1

> 赞同：478
> 
> 时间：2013-02-07T06:59:47.140

## 现代浏览器

利用 css3 columns 模块来支持您正在寻找的内容。

[http://www.w3schools.com/cssref/css3_pr_columns.asp](http://www.w3schools.com/cssref/css3_pr_columns.asp)

**CSS：**

```
ul {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
} 
```

[http://jsfiddle.net/HP85j/8/](http://jsfiddle.net/HP85j/8/)

## 旧版浏览器

不幸的是，对于 IE 支持，您需要一个涉及 JavaScript 和 dom 操作的代码解决方案。这意味着，只要列表的内容发生更改，您就需要执行将列表重新排序为列并重新打印的操作。为了简洁起见，下面的解决方案使用 jQuery。

[http://jsfiddle.net/HP85j/19/](http://jsfiddle.net/HP85j/19/)

**HTML：**

```
<div>
    <ul class="columns" data-columns="2">
        <li>A</li>
        <li>B</li>
        <li>C</li>
        <li>D</li>
        <li>E</li>
        <li>F</li>
        <li>G</li>
    </ul>
</div> 
```

**JavaScript：**

```
(function($){
    var initialContainer = $('.columns'),
        columnItems = $('.columns li'),
        columns = null,
        column = 1; // account for initial column
    function updateColumns(){
        column = 0;
        columnItems.each(function(idx, el){
            if (idx !== 0 && idx > (columnItems.length / columns.length) + (column * idx)){
                column += 1;
            }
            $(columns.get(column)).append(el);
        });
    }
    function setupColumns(){
        columnItems.detach();
        while (column++ < initialContainer.data('columns')){
            initialContainer.clone().insertBefore(initialContainer);
            column++;
        }
        columns = $('.columns');
    }

    $(function(){
        setupColumns();
        updateColumns();
    });
})(jQuery); 
```

**CSS：**

```
.columns{
    float: left;
    position: relative;
    margin-right: 20px;
} 
```

**编辑：**

正如下面所指出的，这将按如下方式对列进行排序：

```
A  E
B  F
C  G
D 
```

而 OP 要求匹配以下变体：

```
A  B
C  D
E  F
G 
```

要完成该变体，您只需将代码更改为以下内容：

```
function updateColumns(){
    column = 0;
    columnItems.each(function(idx, el){
        if (column > columns.length){
            column = 0;
        }
        $(columns.get(column)).append(el);
        column += 1;
    });
} 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2014-07-24T03:30:06.843

我正在查看@jaider 的解决方案，该解决方案有效，但我提供了一种稍微不同的方法，我认为这种方法更易于使用，并且我认为它在浏览器中表现良好。

```
ul{
    list-style-type: disc;
    -webkit-columns: 2;
    -moz-columns: 2;
    columns: 2;
    list-style-position: inside;//this is important addition
} 
```

默认情况下，无序列表会在外部显示项目符号位置，但在某些浏览器中，它会根据浏览器布局您的网站的方式导致一些显示问题。

要使其以以下格式显示：

```
A B
C D
E 
```

等使用以下内容：

```
ul li{
    float: left;
    width: 50%;//helps to determine number of columns, for instance 33.3% displays 3 columns
}
ul{
    list-style-type: disc;
} 
```

这应该可以解决显示列的所有问题。一切顺利，感谢@jaider，因为您的回复帮助我发现了这一点。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-02-07T09:58:20.490

我尝试将此作为评论发布，但无法正确显示列（根据您的问题）。

您要求：

AB

光盘

乙

...但作为解决方案接受的答案将返回：

广告

是

C

...所以要么答案不正确，要么问题是。

一个非常简单的解决方案是设置你的宽度，`<ul>`然后`<li>`像这样浮动并设置你的项目的宽度

```
<ul>
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
    <li>E</li>
</ul>

ul{
    width:210px;
}
li{
    background:green;
    float:left;
    height:100px;
    margin:0 10px 10px 0;
    width:100px;
}
li:nth-child(even){
    margin-right:0;
} 
```

此处示例[http://jsfiddle.net/Jayx/Qbz9S/1/](http://jsfiddle.net/Jayx/Qbz9S/1/)

如果您的问题是错误的，那么前面的答案适用（由于缺少 IE 支持而进行了 JS 修复）。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-06-12T15:44:40.747

我喜欢现代浏览器的解决方案，但是缺少项目符号，所以我添加了一个小技巧：

[http://jsfiddle.net/HP85j/419/](http://jsfiddle.net/HP85j/419/)

```
ul {
    list-style-type: none;
    columns: 2;
    -webkit-columns: 2;
    -moz-columns: 2;
}

li:before {
  content: "• ";
} 
```

![在此处输入图像描述](../Images/05ea158e8e59ffe9ec8179fa35e3fdc6.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-04-29T08:17:15.670

这是一个可能的解决方案：

片段：

```
ul {
  width: 760px;
  margin-bottom: 20px;
  overflow: hidden;
  border-top: 1px solid #ccc;
}
li {
  line-height: 1.5em;
  border-bottom: 1px solid #ccc;
  float: left;
  display: inline;
}
#double li {
  width: 50%;
}
```

```
<ul id="double">
  <li>first</li>
  <li>second</li>
  <li>third</li>
  <li>fourth</li>
</ul>
```

它已经完成了。
3 列使用`li`宽度为 33%，4 列使用 25%，依此类推。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2020-12-03T19:23:49.583

现在，对于预期的结果，`display:grid;`会做*（最简单的？）*：

```
ul {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
}
```

```
<ul>
  <li>A</li>
  <li>B</li>
  <li>C</li>
  <li>D</li>
  <li>E</li>
</ul>
```

您还可以让列在左侧缩小并且能够具有不同的宽度：

```
ul {
  display: grid;
  grid-template-columns: repeat(2, auto);
  justify-content: start;
}

li {
  margin-left: 1em;
  border: solid 1px;/*see me */
}
```

```
<ul>
  <li>A</li>
  <li>B</li>
  <li>C 123456</li>
  <li>D</li>
  <li>E</li>
</ul>
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-05-11T10:36:55.043

这是最简单的方法。仅限 CSS。

1.  为 ul 元素添加宽度。
2.  添加 display:inline-block 和新列的宽度（应小于 ul 宽度的一半）。

```
ul.list {
  width: 300px;  
}

ul.list li{
  display:inline-block;
  width: 100px;
}
```

```
<ul class="list">
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
    <li>E</li>
</ul>
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-01-13T11:24:08.530

您只能使用**CSS**设置两列或更多列

> AE
> 
> 乙
> 
> C
> 
> D

```
 <ul class="columns">
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
    <li>E</li>
</ul>

ul.columns  {
   -webkit-columns: 60px 2;
   -moz-columns: 60px 2;
    columns: 60px 2;
   -moz-column-fill: auto;
   column-fill: auto;
 } 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-02-07T06:54:17.190

这可以使用父 div 上的 column-count css 属性来实现，

像

```
 column-count:2; 
```

查看此内容以获取更多详细信息。

[如何使浮动 DIV 列表出现在列中，而不是行中](https://stackoverflow.com/questions/5484215/how-to-make-floating-div-list-appear-in-columns-not-rows)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-03T14:26:08.457

[您可以使用jQuery-Columns 插件](http://github.com/fzondlo/jquery-columns)非常轻松地做到这一点，例如将 ul 与您会做的 .mylist 类分开

```
$('.mylist').cols(2); 
```

[这是jsfiddle 上](http://jsfiddle.net/EebVF/5)的一个活生生的例子

我比 CSS 更喜欢这个，因为 CSS 解决方案并不是所有的东西都垂直对齐到顶部。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-21T20:36:57.620

几年后还有一个答案！

**在这篇文章中：** [http ://csswizardry.com/2010/02/mutiple-column-lists-using-one-ul/](http://csswizardry.com/2010/02/mutiple-column-lists-using-one-ul/)

HTML：

```
<ul id="double"> <!-- Alter ID accordingly -->
  <li>CSS</li>
  <li>XHTML</li>
  <li>Semantics</li>
  <li>Accessibility</li>
  <li>Usability</li>
  <li>Web Standards</li>
  <li>PHP</li>
  <li>Typography</li>
  <li>Grids</li>
  <li>CSS3</li>
  <li>HTML5</li>
  <li>UI</li>
</ul> 
```

CSS：

```
ul{
  width:760px;
  margin-bottom:20px;
  overflow:hidden;
  border-top:1px solid #ccc;
}
li{
  line-height:1.5em;
  border-bottom:1px solid #ccc;
  float:left;
  display:inline;
}
#double li  { width:50%;}
#triple li  { width:33.333%; }
#quad li    { width:25%; }
#six li     { width:16.666%; } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-04-14T20:32:14.570

`updateColumns()`需要而`if (column >= columns.length)`不是`if (column > columns.length)`列出所有元素（例如，跳过 C），所以：

```
function updateColumns(){
    column = 0;
    columnItems.each(function(idx, el){
        if (column >= columns.length){
            column = 0;
        }
        console.log(column, el, idx);
        $(columns.get(column)).append(el);
        column += 1;
    });
} 
```

[http://jsfiddle.net/e2vH9/1/](http://jsfiddle.net/e2vH9/1/)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-31T16:08:52.407

使用 Bootstrap ... 这个答案（[https://stackoverflow.com/a/23005046/1128742](https://stackoverflow.com/a/23005046/1128742)）让我指出了这个解决方案：

```
<ul class="list-unstyled row">
   <li class="col-xs-6">Item 1</li>
   <li class="col-xs-6">Item 2</li>
   <li class="col-xs-6">Item 3</li>
</ul> 
```

[http://jsfiddle.net/patrickbad767/472r0ynf/](http://jsfiddle.net/patrickbad767/472r0ynf/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-09T16:22:47.553

最佳答案中的旧版解决方案对我不起作用，因为我想影响页面上的多个列表，而答案假设一个列表加上它使用了相当多的全局状态。在这种情况下，我想更改 a 中的每个列表`<section class="list-content">`：

```
const columns = 2;
$("section.list-content").each(function (index, element) {
    let section = $(element);
    let items = section.find("ul li").detach();
    section.find("ul").detach();
    for (let i = 0; i < columns; i++) {
        section.append("<ul></ul>");
    }
    let lists = section.find("ul");
    for (let i = 0; i < items.length; i++) {
        lists.get(i % columns).append(items[i]);
    }
}); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-02-29T14:40:16.527

尽管我发现 Gabriel 的回答在一定程度上起作用，但在尝试垂直排序列表时确实发现了以下内容（第一个 ul AD 和第二个 ul EG）：

*   当 ul 中有偶数个 li 时，它并没有均匀地分布在 ul 中
*   在 ul 中使用数据列似乎效果不佳，我不得不将 4 列放入 3 列，即便如此，它仍然只是将 li 传播到 JS 生成的 ul 的 2 中

我已经修改了 JQuery，所以希望上述情况不会发生。

```
(function ($) {
    var initialContainer = $('.customcolumns'),
        columnItems = $('.customcolumns li'),
        columns = null,
        column = 0;
    function updateColumns() {
        column = 0;
        columnItems.each(function (idx, el) {
            if ($(columns.get(column)).find('li').length >= (columnItems.length / initialContainer.data('columns'))) {
                column += 1;
            }
            $(columns.get(column)).append(el);
        });
    }
    function setupColumns() {
        columnItems.detach();
        while (column++ < initialContainer.data('columns')) {
            initialContainer.clone().insertBefore(initialContainer);
            column++;
        }
        columns = $('.customcolumns');
        updateColumns();
    }

    $(setupColumns);
})(jQuery); 
```

```
.customcolumns {
  float: left;
  position: relative;
  margin-right: 20px;
} 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div>
  <ul class="customcolumns" data-columns="3">
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
    <li>E</li>
    <li>F</li>
    <li>G</li>
    <li>H</li>
    <li>I</li>
    <li>J</li>
    <li>K</li>
    <li>L</li>
    <li>M</li>
  </ul>
</div> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-15T16:26:26.267

这对我有用。是最好的解决方案，因为一行中的单元格具有相同的高度而无需照顾内容

```
ul {
  display: grid;
  grid-template-columns: repeat(2, 1fr); 
  list-style-position: inside;
  list-style-type: none;
}
li {  border: solid 1px; }
```

```
<ul>
  <li>asdasd asdad asdasd asdasd adasdasdasd adasdadadada adadas dasdadasdasd asd aA</li>
  <li>B</li>
  <li>C</li>
  <li>D</li>
  <li>E</li>
</ul>
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-11-13T06:49:17.677

这是使用简单的 CSS 制作多列列表的简单方法。如果需要，样式标签显然可以放入 CSS 中。

```
<p>Materials List</p>
<ul style="display: inline-block; float: left">
    <u>Item Description<u>
    <li>1/2" x 4' wood dowel</li>
    <li>1/2" x 12"  PVC pipe</li>
    <li>1/2" PVC pipe end cap</li>
    <li>7/16" x 3" light duty expansion spring</li>
    <li>6" plastic zip ties</li>
    <li>Light weight antenna</li>
</ul>
<div style="display: inline-block; margin-left: 1em">
    <u>Qty</u>
    <div style="text-indent: 0.5em">3</div>
    <div style="text-indent: 0.5em">1</div>
    <div style="text-indent: 0.5em">1</div>
    <div style="text-indent: 0.5em">2</div>
    <div style="text-indent: 0.5em">8</div>
    <div style="text-indent: 0.5em">1</div>
</div>
<p></p> 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-05-23T08:29:02.193

Thisd 对我来说是一个完美的解决方案，多年来一直在寻找：

[http://css-tricks.com/forums/topic/two-column-unordered-list/](http://css-tricks.com/forums/topic/two-column-unordered-list/)

# android - Android用手指在webView上绘制不会在绘制时滚动webview

> ID：14745298
> 
> 赞同：0
> 
> 时间：2013-02-07T06:51:01.883
> 
> 标签：android

参考这个链接[Android draw with finger over webView](https://stackoverflow.com/questions/9951329/answer/submit)

我可以在 HTML 页面上绘制任何内容，但无法像在 ontouch 上那样滚动页面。请帮助我解决问题，以便能够在 html 页面上绘制并滚动 Webview 内容..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:47:08.507

提到的链接中的给定解决方案的不同之处在于自定义视图位于顶部`webview`并采用全屏显示，因此`touch`将由`customView`not处理`webView`。

你可以做两件事

1.  扩展 webView 并在那里实现手指绘图功能。
2.  `DispatchTouchEvent(Motion)`根据某些条件实现并将触摸传递给您的 webView。

# ios - 普通 UIButton Click 上的 PopOverWindow

> ID：14745299
> 
> 赞同：0
> 
> 时间：2013-02-07T06:51:09.380
> 
> 标签：ios, objective-c, uipopovercontroller

我正在寻找一种方法来使用带有普通按钮的 PopOverWindow。我发现有关 Storyboard 的信息与 PopOverView 按钮相结合，但我不使用 Storyboard。所以我需要帮助或教程。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:36:17.270

您可以使用

```
presentPopoverFromRect:inView:permittedArrowDirections:animated: 
```

并将按钮的框架作为第一个参数传递给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:18:42.830

```
-(IBAction)yourButton:(UIButton*)sender
{
    VC1 *vcObject =  [[VC1 alloc]initWithNibName:@"VC1" bundle:nil];
    _popOver= [[UIPopoverController alloc] initWithContentViewController:vcObject];
    _popOver.delegate = self;
    _popOver.popoverContentSize = CGSizeMake(330, 362); // set the size of the popOver you want in your app
    [_popOver presentPopoverFromRect:sender.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; //sender.frame is the button's frame here
} 
```

注意：_popOver 是特定 VC 中提到的 ivar

# algorithm - 求数组中 n 个元素的最大总和，使得相邻的元素不超过 k 个

> ID：14745300
> 
> 赞同：2
> 
> 时间：2013-02-07T06:51:15.670
> 
> 标签：algorithm, dynamic-programming

几乎与此相同： [找到数组中元素的最大总和，使得相邻的元素不超过 k](https://stackoverflow.com/questions/11977663/find-maximum-sum-of-elements-in-an-array-such-that-not-more-than-k-elements-are)

除了我们可以选择的 n 个元素的限制。如何修改 DP 算法以使其适用于此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:10:13.623

添加 DP 函数的新维度： - 前**i**`f[i, j, l]`个元素的最大总和，如果使用**j**个总元素和此总和中的**最后 l 个元素**。

 ******* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T01:43:44.727

好吧，让我说得更清楚。

问题：求数组中 n 个元素的最大和，使得相邻的元素不超过 K

让*int f[i][j][k]*表示前 i 个元素的最大总和，使用 j 个总元素并使用最后 k 个元素。let *bool g[i][j][k]*表示是否可以得到某种组合。例如。g[1][1][2] 是假的。这很重要，因为没有限制， f 可能会产生**不可能**的答案。

最初，memset f 和 g 都为零，并将 g[0][0][0] 设置为真。我们可以使用前向递归来解决这个DP问题。显然，每次遇到一个数字，你都有两个选择：选择它，或者放弃它。他们给出了递归公式：

```
f[i][j][k] can infer f[i+1][j+1][k+1], or
f[i][j][k] can infer f[i+1][j][0] 
```

所以，伪代码可以如下：

```
memset(f,0,sizeof(f));
memset(g,0,sizeof(g));
g[0][0][0]=true;
for (int i=0;i<array.size();i++)
    for (int j=0;j<=n;j++)
        for (int k=0;k<=K;k++) if (g[i][j][k]) {
            f[i+1][j][0]=max(f[i+1][j][0],f[i][j][k]);
            f[i+1][j+1][k+1]=max(f[i+1][j+1][k+1],f[i][j][k]+array[i]);
            g[i+1][j][0]=true;
            g[i+1][j+1][k+1]=true;
        } 
```

最终结果将是：

```
ans=0;
for (i=0;i<=K;i++)
    ans=max(ans,f[array.size()][n][i]);
return ans; 
```

上面**正好给出了 j 个元素**。如果你想得到**最多 j 个元素**，你可以这样改变它：

```
ans=0;
for (i=0;i<=n;i++)
    for (j=0;j<=K;j++)
        ans=max(ans,f[array.size()][i][j]);
return ans; 
```******

# jsp - 我正在研究三重奏。每次单击链接（菜单）时，它都会创建一个新会话。后端我们使用tomcat

> ID：14745303
> 
> 赞同：-3
> 
> 时间：2013-02-07T06:51:21.047
> 
> 标签：jsp, tomcat, servlets, tridion, tridion-content-delivery

我正在使用 SDL Tridion 将 JSP 页面发布到我们的 Tomcat 应用程序服务器。每次我单击指向另一个页面的链接时，它都会创建一个新会话。如何防止为每个页面视图创建新会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:02:48.117

您可以通过设置阻止会话创建`session=false`

有关更多描述，请检查[一次](https://stackoverflow.com/questions/5515729/why-set-a-jsp-page-session-false-directive)

# javascript - 在上传之前预览字体

> ID：14745307
> 
> 赞同：5
> 
> 时间：2013-02-07T06:51:41.037
> 
> 标签：javascript, jquery, file-upload, fonts

我希望在`<input type="file">`输入中选择字体文件后预览它。

我尝试了一种类似于用于预览图像的方法（类似于[此答案](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded#4459419)），但使用[`Font`对象](http://pomax.nihongoresources.com/pages/Font.js/)而不是`Image`对象。但是，设置后字体无法加载`src`，因为它搜索系统上安装的字体，但通过临时名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:06:41.327

就是这样（尽管这更像是一个猜测而不是受过教育/经过测试的答案）：

在上传之前预览字体（在现代浏览器中），方法是使用 fileReader 类并在新的`@font-face`css 定义中将读取文件对象结果属性附加到文档：

```
 function previewfonts(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('<style>'+
                     '@font-face{'+
                         'font-family: preview;'+
                         'src: url('+e.target.result+');'+
                      '}'+
                      '.preview {font-family: preview;}'+
                  '</style>'+
                  '<div class="preview">lorem ipsum...</div>').appendTo($(document));

            }

           reader.readAsDataURL(input.files[0]);
        }
     } 
```

# php - 默认选中一个复选框 html

> ID：14745308
> 
> 赞同：8
> 
> 时间：2013-02-07T06:51:41.697
> 
> 标签：php, html

我试图默认选中一个复选框，但我尝试过的一切似乎都不起作用。我不知道它是否与代码中的 PHP 有关。

```
function show_subscription_checkbox ($id='0') {
    global $sg_subscribe;
    sg_subscribe_start();

    if ( $sg_subscribe->checkbox_shown ) return $id;
    if ( !$email = $sg_subscribe->current_viewer_subscription_status() ) :
        $checked_status = ( !empty($_COOKIE['subscribe_checkbox_'.COOKIEHASH]) && 'checked' == $_COOKIE['subscribe_checkbox_'.COOKIEHASH] ) ? true : false;
    ?>   
<p <?php if ($sg_subscribe->clear_both) echo 'style="clear: both;" '; ?>class="subscribe-to-comments">
        <input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" <?php if ( $checked_status ) echo 'checked="checked" '; ?>/>

        <label for="subscribe"><?php echo $sg_subscribe->not_subscribed_text; ?></label>
        </p> 
```

这是一个 wordpress 插件，允许您订阅博客评论。

我努力了

```
echo 'checked=\"checked\" ';
echo 'checked="checked" ' ;
echo 'checked> '; 
```

插件作者指出，您过去可以默认选中复选框，但现在不行了。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-30T03:08:47.293

由于这在谷歌中显示为“默认选中复选框”，我想我会回答它。Alpay 是对的：确保默认选中复选框的正确方法是这样的（后面是未选中的示例）：

```
<input type="checkbox" name="vehicle" value="Car" checked> I have a car    
<input type="checkbox" name="vehicle" value="Bike"> I have a bike 
```

答案是在[w3schools](http://www.w3schools.com/tags/att_input_checked.asp)上找到的。原始问题的作者在使用他的 PHP 代码时遇到了问题，这与问题标题完全无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T07:10:01.393

在 HTML 中，如果您希望默认选中复选框，请参见以下内容；

```
<input type="checkbox" name="name1" value="uc"> This checkbox is unchecked <br>
<input type="checkbox" name="name2" value="c" checked> This checkbox is checked<br> 
```

所以，你可以考虑改变

```
<?php if ( $checked_status ) echo 'checked="checked" '; ?> 
```

至

```
<?php if ( $checked_status ) echo 'checked'; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:06:22.787

问题不在于生成的 HTML 标记；`echo 'checked="checked" '`，就像问题一样，效果很好，更简单的`echo 'checked'`.

问题在于条件`$checked_status`。就发布的代码而言，您正在测试未定义的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-03T16:50:44.773

我有同样的问题。我发现我试图将复选框放入表格中，但忽略了 and。

没有检查：

```
if(!$stump){echo '<input type="checkbox" name="stump" value="stump" checked="checked"><b> Stump Job!</b>';} 
```

检查：

```
if(!$stump){echo '<td><input type="checkbox" name="stump" value="stump" checked="checked"><b> Stump Job!</b></td>';} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T17:26:12.577

在常规 PHP 中，您可以在提交后使用它来“保存”选中状态。

```
<form name="checkbox" method="post" action="#" >
<input type="checkbox" name="checkbox1" value="Bike" <?php if ($_POST['checkbox1']=="Bike") echo "checked";?>>I have a bike
<input type="checkbox" name="checkbox2" value="Car" <?php if ($_POST['checkbox2']=="Car") echo "checked";?>>I have a car 
<input type="submit" name="submit" value="Display this Data" /> 
```

如果您想在提交后将此数据用于其他用途，只需添加：

```
<?php
   if(isset($_POST['checkbox1']) OR isset($_POST['checkbox2']) ) 
   {
    echo "for 1 : ".$_POST['checkbox1']."for 2: ".$_POST['checkbox2'];
   }
?> 
```

如果要清除表单（基本上清除所有帖子数据）可以添加：

```
<form method="post" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>">
<input type="submit" name="Clear all form data" value= "Clear this form">
</form> 
```

# django - Mongo db中的时间范围查询

> ID：14745309
> 
> 赞同：0
> 
> 时间：2013-02-07T06:51:42.237
> 
> 标签：django, mongodb, pymongo

我正在使用 django-nonrel 和 mongodb 开发应用程序。我知道对象 id 以对象创建插入时间的时间戳开始。因此可以根据 _id 字段进行时间范围查询。

如何根据 python 或 django 中的给定时间生成最小的 object_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:29:18.977

```
from bson.objectid import ObjectId
import time

def get_minimal_object_id_for_int_timestamp(int_timestamp=None):
    if not int_timestamp:
        int_timestamp=int(time.time())
    return ObjectId(hex(int(int_timestamp))[2:]+'0000000000000000')

def get_int_timestamp_from_time_string(time_string=None): 

    # format "YYYY-MM-DD hh:mm:ss" like '2012-01-05 13:01:51'
    if not time_string:
        return int(time.time())
    return int(time.mktime(time.strptime(time_string, '%Y-%m-%d %H:%M:%S')))

def get_minimal_object_id_for_time_string(time_string=None):
    return get_minimal_object_id_for_int_timestamp(get_int_timestamp_from_time_string(time_string=time_string)) 
```

我终于找到了解决方案。希望对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T12:22:44.807

这是 OP 在此处提供的另一个答案的更多 Pythonic 版本，以及文档：

```
from bson.objectid import ObjectId
import datetime

def datetime_to_objectid(dt):
    # ObjectId is a 12-byte BSON type, constructed using:
    # a 4-byte value representing the seconds since the Unix epoch,
    # a 3-byte machine identifier,
    # a 2-byte process id, and
    # a 3-byte counter, starting with a random value.

    timestamp = int((dt - datetime.datetime(1970,1,1)).total_seconds())
    time_bytes = format(timestamp, 'x') #4 bytes
    return ObjectId(time_bytes+'00'*8) #+8 bytes 
```

但是，从 pymongo 1.6 版开始，执行以下操作会更加优雅：

```
from bson.objectid import ObjectId

ObjectId.from_datetime(dt) 
```

# android - 保持对 SQLiteDatabase 的全局引用？

> ID：14745310
> 
> 赞同：1
> 
> 时间：2013-02-07T06:51:49.590
> 
> 标签：android

我在整个应用程序中使用单个 sqlite 数据库。因此，为了方便起见，我想将与数据库的连接包装在单例中。起初我以为我可以为此保留对 SQLiteDatabase 的引用：

```
MySQLiteOpenHelper helper = new MySQLiteOpenHelper(appContext); // local
myGlobalSQLiteDatabase = helper.getWritableDatabase(); // global

...

void someFunction() {
    try {
        myGlobalSQLiteDatabase.insertOrThrow(...);
    } catch (Exception ex) {
    }
} 
```

但这会导致错误，例如：

```
(1802) os_unix.c:30011: (2) stat(/data/data/com.me.test/databases/test.db) - 
(1802) statement aborts at 16: [INSERT INTO mytable(f1,f2) VALUES (?,?)]
android.database.sqlite.SQLiteDiskIOException: disk I/O error (code 1802)
    at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
    at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
    ... 
```

（这一切都在主线程上完成，一个单一的测试）。

我的第二次尝试是只保留对助手的全局引用：

```
myGlobalSQLiteOpenHelper helper = new MySQLiteOpenHelper(appContext); // global

...

void someFunction() {
    SQLiteDatabase db = myGlobalSQLiteOpenHelper.getWritableDatabase();
    try {
        db.insertOrThrow(...);
    } catch (Exception ex) {
    } finally {
        db.close();
    }
} 
```

那行得通。我必须在每次调用 someFunction() 时调用 getWritableDatabase() 和 close()。

我不知道 getWritableDatabase() 和 close() 有多少开销，我最初希望实现最快的实现，因为我将重复调用 someFunction() 以响应用户输入。第二种方法是此设置的最佳选择吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:23:23.987

您不需要一次又一次地编写 getwritable 数据库，只需创建一个 db 类的构造`public DBCustomer open() throws SQLException { db = DBHelper.getWritableDatabase(); return this; }` 函数并调用 db 的所有函数，只需 decaling object 并调用 object.open 函数

# perl - 将文件的第一列分配给散列键，将其余列分配给散列值

> ID：14745314
> 
> 赞同：-3
> 
> 时间：2013-02-07T06:52:16.437
> 
> 标签：perl

我有一个文件如下：

```
23  Line number 23
2   Line number 2
87  Line number 87
28  Line number 28
4   Line number 4
83  Line number 83 
```

我需要将第一列作为散列键，将第二列作为散列值。我也应该使用哈希键对文件进行排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:36:36.693

这很简单：我们`split`将空白处的行分成两部分。第一部分是`$key`，其余的是`$value`。

然后我们`keys`按`%hash`字母顺序排序，并打印出所有数据。

```
#!/usr/bin/perl
use strict; use warnings;

my %hash;
while (<>) {
  chomp; # remove newline
  my ($key, $value) = split ' ', $_, 2;
  $hash{$key} = $value;
}
# or shorter:
# my %hash = map {chomp; split ' ', $_, 2} <>;

my @sorted_keys = sort keys %hash;
for my $key (@sorted_keys) {
  print "$key $hash{$key}\n";
}
# or shorter:
# print "$_ $hash{$_}\n" for sort keys %hash; 
```

输入可以通过 STDIN 或作为命令行参数中命名的文件提供。

您提供的输入的输出：

```
2 Line number 2
23 Line number 23
28 Line number 28
4 Line number 4
83 Line number 83
87 Line number 87 
```

如果您想要数字排序，请更改`sort keys`为`sort {$a <=> $b} keys`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:01:41.970

尝试这个：

```
#!/usr/perl/bin  -w
use strict;
use Data::Dumper;

my $file_name = "file.txt";
open(FH, "<".$file_name) or die "Could not open $file_name";
my %hash = ();
while(<FH>) {
    chomp;
    my ($key, $value) = split(/ /, $_);
    $hash{$key} = $value;
}

close FH;

print Dumper(%hash); 
```

# ruby-on-rails - 如何在 ruby on rails 中传递数据的 id 以进行编辑？

> ID：14745316
> 
> 赞同：2
> 
> 时间：2013-02-07T06:52:28.760
> 
> 标签：ruby-on-rails, ruby

我的任务是编辑数据的值。为此，我创建了一个`edit_userlist`页面并创建了用于编辑的代码。但是通过运行我得到了一个错误，它显示如下

```
Couldn't find User without an ID 
```

这个链接的网址是：`http://localhost:3000/edit_userlist.1`

我的控制器页面是

```
def edit_userlist
   @user = User.find(params[:id])
 end 
```

我的编辑索引页是

```
<% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.age %></td>
    <td><%= user.country %></td>
    <td><%= user.state %></td>
    <td><%= user.email %></td>
    <td><%= user.phone %></td>
    <td><%= link_to 'Show', user %></td>
    <td><%= link_to 'Edit', edit_userlist_path(user) %></td>
    <td><%= link_to 'Destroy', user, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
  </tr>
<% end %> 
```

我的 edit_userlist 页面是

```
<%= form_for(@user) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :age %><br />
    <%= f.text_field :age %>

  </div>
  <div class="field">
    <%= f.label :country %><br />
    <%= f.text_field :country %>
  </div>
  <div class="field">
    <%= f.label :state %><br />
    <%= f.text_field :state %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :phone %><br />
    <%= f.text_field :phone %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我给页面提供了正确的路由。我的`routes.rb`页面是

```
match '/edit_userlist/' => 'users#edit_userlist', :as => :edit_userlist 
```

如何传递 id 来编辑值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:56:18.667

将您的路线更改为

```
match '/edit_userlist/:id' => 'users#edit_userlist', :as => :edit_userlist 
```

# java - TCP 服务器小程序

> ID：14745318
> 
> 赞同：0
> 
> 时间：2013-02-07T06:52:28.613
> 
> 标签：java, applet, opensocial, tcpserver

我有一个开放的社交容器，我需要在该容器中放置一个小程序，小程序需要充当 tcpServer，我需要一些指导，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:05:31.337

[网络教程](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)详细解释了如何创建 TCP 服务器套接字并接受来自它的连接。

这是它的要点：

```
 ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(4444);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 4444.");
        System.exit(1);
    }

    Socket clientSocket = null;
    try {
        clientSocket = serverSocket.accept();
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }

    // now get the input and output streams from the client socket
    // and use them  to read and write to the TCP connection

    clientSocket.close();
    serverSocket.close(); 
```

# c++ - 在 vc++ 中获取活动进程名

> ID：14745320
> 
> 赞同：1
> 
> 时间：2013-02-07T06:52:32.660
> 
> 标签：c++, visual-c++

我正在研究 vc++ 中的后台应用程序

如何获取当前应用程序的进程名称，例如“Iexplore”用于使用 Internet Explorer，“Skype”用于带有磁贴“Skype - 用户名”的窗口，“Explorer”用于使用 Windows 资源管理器？

我引用了此链接，但出现 Null 错误： http: [//www.codeproject.com/Articles/14843/Finding-module-name-from-the-window-handle](http://www.codeproject.com/Articles/14843/Finding-module-name-from-the-window-handle)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T23:26:29.120

这可以使用以下代码完成：

```
bool GetActiveProcessName(TCHAR *buffer, DWORD cchLen)
{
    HWND fg = GetForegroundWindow();
    if (fg)
    {
        DWORD pid;
        GetWindowThreadProcessId(fg, &pid);
        HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, pid);
        if (hProcess)
        {
            BOOL ret = QueryFullProcessImageName(hProcess, 0, buffer, &cchLen);
            //here you can trim process name if necessary
            CloseHandle(hProcess);
            return (ret != FALSE);
        }
    }
    return false;
} 
```

接着

```
TCHAR buffer[MAX_PATH];
if(GetActiveProcessName(buffer, MAX_PATH))
{
    _tprintf(_T("Active process: %s\n"), buffer);
}
else
{
    _tprintf(_T("Cannot obtain active process name.\n"));
} 
```

请注意，尽管*QueryFullProcessImageName*函数仅在 Windows Vista 之后可用，但在早期系统上，您可以使用*GetProcessImageFileName*（类似，但需要与 psapi.dll 链接并返回设备路径而不是通常的 win32 路径）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T08:55:23.553

根据一些研究（感谢@dsi），我在我的 QT5/C++ 项目中使用此代码成功获取了当前活动的进程名称和窗口标题。只是想共享代码，以便其他人从中受益。

```
# Put this two declarations in the top of the CPP file
#include <windows.h>
#pragma comment(lib, "user32.lib") 
```

并将以下内容放入方法中：

```
// get handle of currently active window
HWND hwnd = GetForegroundWindow();
if (hwnd) {
    // Get active app name
    DWORD maxPath = MAX_PATH;
    wchar_t app_path[MAX_PATH];
    DWORD pid;
    GetWindowThreadProcessId(hwnd, &pid);
    HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, pid);
    if (hProcess) {
        QueryFullProcessImageName(hProcess, 0, app_path, &maxPath);
        // here you can trim process name if necessary
        CloseHandle(hProcess);
        QString appPath = QString::fromWCharArray(app_path).trimmed();
        QFileInfo appFileInfo(appPath);
        windowInfo.appName = appFileInfo.fileName();
    }

    // Get active window title
    wchar_t wnd_title[256];
    GetWindowText(hwnd, wnd_title, sizeof(wnd_title));
    windowInfo.windowTitle = QString::fromWCharArray(wnd_title);
} 
```

这段代码可能无法直接编译，因为`windowInfo`是我程序中的一个参数。如果您在尝试此代码时遇到任何问题，请随时告诉我。

# java - Java Input.run 错误

> ID：14745323
> 
> 赞同：0
> 
> 时间：2013-02-07T06:52:44.300
> 
> 标签：java, runtime-error

好吧，我正在尝试用 Java 制作一个简单的多人游戏。我已经编写了服务器和客户端。我可以成功连接到服务器，但一秒钟后我收到一个错误，导致我断开连接。

```
Exception in thread "Thread-3" java.lang.ArrayIndexOutOfBoundsException: 1769152617
    at Client.updateCordinates(Client.java:49)
    at Input.run(Client.java:143)
    at java.lang.Thread.run(Unknown Source) 
```

以上是我从客户端收到的错误。服务器没有显示错误。

**客户端代码：**

```
import java.applet.*;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.*;
import java.util.Scanner;

@SuppressWarnings("unused")
public class Client extends Applet implements Runnable, KeyListener{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    static Socket socket;
    static DataInputStream in;
    static DataOutputStream out;
    int playerid;

    int[] x = new int [10];
    int[] y = new int [10];

    boolean left,down,right,up;

    int playerx;
    int playery;
    public void init(){
        setSize(100,100);
        addKeyListener(this);
        try{
        System.out.println("Connecting...");
        socket = new Socket("localhost",7777);
        System.out.println("Connection successful.");
        in = new DataInputStream(socket.getInputStream());
        playerid = in.readInt();
        out = new DataOutputStream(socket.getOutputStream());
        Input input = new Input(in,this);
        Thread thread = new Thread(input);
        thread.start();
        Thread thread2 = new Thread(this);
        thread2.start();
    }catch(Exception e){
        System.out.println("Unable to start client");
    }
    }
    public void updateCordinates(int pid, int x2, int y2){
        this.x[pid] = x2;
        this.y[pid] = y2;

    }
    public void paint(Graphics g){
        for (int i=0; i <10;i++){
        g.drawOval(x[i], y[i], 5, 5);
    }

    }
    public void run(){
            while(true){
                if(right == true){
                    playerx += 10;

                }
                if(left == true){
                    playerx -= 10;

                }
                if(up == true){
                    playery += 10;

                }
                if(down == true){
                    playery -= 10;

                }
                if(right||left||up||down){
                    try{
                    out.writeInt(playerid);
                    out.writeInt(playerx);
                    out.writeInt(playery);
                }catch(Exception e){System.out.println("Error sending cordinates");

                }
                }
                repaint();
                try{
                Thread.sleep(400);
            }catch(InterruptedException e){
                e.printStackTrace();

            }
            }
        }
    public void keyPressed(KeyEvent e){
            if (e.getKeyCode() == 37){
                left = true;
            }
            if (e.getKeyCode() == 38){
                up = true;
            }
            if (e.getKeyCode() == 39){
                right = true;
            }
            if (e.getKeyCode() == 40){
                down = true;
            }

        }
    public void keyReleased(KeyEvent e){
             if (e.getKeyCode() == 37){
                left = false;
            }
            if (e.getKeyCode() == 38){
                up = false;
            }
            if (e.getKeyCode() == 39){
                right = false;
            }
            if (e.getKeyCode() == 40){
                down = false;
            }

        }
    public void keyTyped(KeyEvent e){

        }
}

class Input implements Runnable{
    DataInputStream in;
    Client client;
    public Input(DataInputStream in, Client c){
        this.in = in;
        this.client = c;
    }
    public void run(){
        while(true){
            try {
                int playerid = in.readInt();
                int x = in.readInt();
                int y = in.readInt();
                client.updateCordinates(playerid, x, y);
        }catch(IOException e){
            e.printStackTrace();
        }
        }

    }
} 
```

**服务器端代码：**

```
import java.io.*;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {

   static ServerSocket serverSocket;
   static Socket socket;
   static DataOutputStream out;
   static Users[] user = new Users[10];
   static DataInputStream in;
   public static void main(String[]args)throws Exception{
       System.out.println("Starting server");
       serverSocket = new ServerSocket(7777);
       System.out.println("Server Started");
       socket = serverSocket.accept();
       for (int i=0; i <10;i++){
       System.out.println("Connection from:"+socket.getInetAddress());
       out = new DataOutputStream(socket.getOutputStream());
       out.writeUTF("This is a of Java sockets");
       System.out.println("Data has been sent.");
       in = new DataInputStream(socket.getInputStream());
       if(user[i]==null){
           user[i] = new Users(out,in,user,i);
       Thread th = new Thread(user[i]);
       th.start();
       break;

    }
    }
    }
}
class Users implements Runnable{
    DataOutputStream out;
    DataInputStream in;
    Users[]user=new Users[10];
    String name;
    int playerid;
    int playeridin;
    int xin;
    int yin;
    public Users(DataOutputStream out, DataInputStream in, Users[] user, int pid){
       this.out = out;
       this.in = in;
       this.user = user;
       this.playerid = pid;

}
public void run(){
    try {
        out.writeInt(playerid);
    }catch (IOException e1){
        System.out.println("Failed to send PlayerID");
    }
    while(true){
        try{
            playeridin = in.readInt();
            xin = in.readInt();
            yin = in.readInt();
            for(int i=0;i<10;i++){
                if (user[i] !=null){
                    user[i].out.writeInt(playeridin);
                    user[i].out.writeInt(xin);
                    user[i].out.writeInt(yin);
        }
    }
}
    catch(IOException e){
        user[playerid] = null;
    }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:57:12.947

你有

```
 int[] x = new int [10]; 
```

表示当您引用 this.x[pid] 时 x[] 的大小为 10 pid**的值是多少？**

如果它是**10 或 >10**你会得到异常，因为索引从 0 开始在你的情况下它是从**0 到 9**

还

在for循环内的服务器端执行此操作`out.writeUTF("This is a of Java sockets");`，而在客户端执行此操作，`playerid = in.readInt();`因为它没有获得任何整数，它正在读取> 10的随机值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:02:11.660

诺亚，你能给出你输入的样本输入值，它触发了上述异常。因为它自己说的异常，当有一个数组索引值超出时，它在 updatecoordinated(....) 函数中崩溃绑定（在您的情况下可能超出索引 9，因为 x[] 和 y[] 的数组大小为 10）

# iphone - 如何在iphone的标签中加粗特定单词

> ID：14745327
> 
> 赞同：0
> 
> 时间：2013-02-07T06:53:01.973
> 
> 标签：iphone

我实际上在做什么：-

```
lbl1= [[UILabel alloc] init];
lbl1.frame=CGRectMake(10, 10,90, 40);
lbl1.textColor=[UIColor blackColor];
lbl1.text=@"Definitions"; 
lbl1.font = [UIFont boldSystemFontOfSize:16.0f];

UILabel* finalLabel=[[UILabel alloc] init];
finalLabel.frame=CGRectMake(100, 10,90, 40);
finalLabel.text=[NSString stringWithFormat:@"%@:,The following terms shall have the described meaning:",lbl1];  
 finalLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
finalLabel.numberOfLines=2;

[self.view addSubview:lbl1];
[self.view addSubview:finalLabel]; 
```

没有得到最终标签的正确结果

它打印：- 定义 UILABEL:0X68640;frame(10,10,90,40);text='Definition',CliptoBound=YES;Userintraction......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:01:11.040

您的意思是在单个 UILabel 中部分粗体。正确的？

你应该检查[这个](https://stackoverflow.com/questions/3586871/bold-non-bold-text-in-a-single-uilabel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:05:36.013

查看以下网址：

[自定义标签 1](https://github.com/petrpavlik/PPLabel)

[自定义标签 2](https://github.com/rootd/AMAttributedHighlightLabel)

这将对您有所帮助，并且可以实现您的功能。

干杯!

# queue - 使用来自远程 ActiveMq 队列的消息

> ID：14745328
> 
> 赞同：0
> 
> 时间：2013-02-07T06:53:06.917
> 
> 标签：queue, jms, activemq, message-queue, apache-camel

如何使用 Apache Camel 的 ActiveMQ 组件连接到 ActiveMQ 的远程实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:02:19.697

您可以为每个 ActiveMQ 实例定义一个端点：

```
<bean id="instance1" 
   class="org.apache.activemq.camel.component.ActiveMQComponent">
   <property name="brokerURL" value="tcp://server1:61616"/>
</bean>
...
<bean id="instance2" 
   class="org.apache.activemq.camel.component.ActiveMQComponent">
   <property name="brokerURL" value="tcp://server2:61616"/>
</bean> 
```

然后在路线中使用它作为 `<from uri="instanceX:myQueue"/>`或`<to uri="instanceX:myQueue"/>`

# c - 故意通过argv获取分段错误

> ID：14745329
> 
> 赞同：1
> 
> 时间：2013-02-07T06:53:10.857
> 
> 标签：c, memory, memory-management, segmentation-fault

我想编写一个小程序，通过 argv 用户输入，该程序会出现分段错误。我对 C 很陌生，但我认为以下代码可以完成这项工作：

```
int main(int argc, char *argv[])
{
    int bufferSize;
    char * buffer[100];
    unsigned int i;

    if (argc > 1) {
        bufferSize = atoi(argv[1]);
        for (i = 0; i < bufferSize; ++i)
            *( buffer + i ) = i;
    }

    return 0;
} 
```

我的想法是程序初始化（？）一个指向特定大小缓冲区的指针。如果用户然后输入一个大于缓冲区大小的数字，它将写入未初始化的内存，因此得到一个段。过错。这个推理是否正确？

附言。编译时，`I get a assignment makes pointer from integer without a cast`警告，有人可以告诉我为什么会这样吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:00:16.220

我见过的故意获取分段错误的最传统方法是写入`NULL`，例如：

```
*((char *) NULL) = 0; 
```

您可以使用命令行参数作为简单的布尔值来查看是否应该这样做。

请注意，写入`NULL`实际上并不能保证会导致崩溃，它只是*未定义的行为*，因此基本上任何事情都可能发生（包括导致[鼻恶魔](http://www.catb.org/jargon/html/N/nasal-demons.html)）。

警告是因为您有一个指针数组，并尝试将整数分配给数组中的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:55:48.627

`char * buffer[100];`是一个指针数组，默认指向一些垃圾位置。

在这里`*( buffer + i ) = i;`，您试图尊重不属于您的区域。

我的猜测是，您想创建一个缓冲区。所以

`char buffer[100];`足够。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:21:05.370

我不会担心写入会导致分段错误。读书就够了。如果缓冲区在堆上，则更有可能导致段错误。对于我来说，对于小于 -10 的负输入，此应用程序相当可靠的段错误。

```
#include "stdio.h"
#include "stdlib.h"
#include "string.h"

int main(int argc, char* argv[])
{
    static const int array[10] = {0,1,2,3,4,5,6,7,8,9};

    int * const heapArray = malloc(sizeof(array));

    memcpy(heapArray,array,sizeof(array));

    const int index = atoi(argv[1]);

    printf("%i\n",heapArray[index]);

    free(heapArray);
    return 0;   
} 
```

问题是， malloc() 的结果可能比大多数系统请求的大小要大得多。因此，即使对于较大的值，它也不会出现段错误，它只会返回内存中发生的任何内容。

```
ericu@eric-phenom-linux:~$ ./segfault -5
Segmentation fault (core dumped)
ericu@eric-phenom-linux:~$ ./segfault 11
0
ericu@eric-phenom-linux:~$ ./segfault 100
0
ericu@eric-phenom-linux:~$ ./segfault 100
0
ericu@eric-phenom-linux:~$ ./segfault 1000
0
ericu@eric-phenom-linux:~$ ./segfault 10000
0
ericu@eric-phenom-linux:~$ ./segfault 100000
Segmentation fault (core dumped) 
```

# actionscript-3 - 如何从数组中选择随机颜色变换并将其应用于 Flash ActionScript 3 中的影片剪辑？

> ID：14745331
> 
> 赞同：0
> 
> 时间：2013-02-07T06:53:19.780
> 
> 标签：actionscript-3

我正在尝试在 ActionScript 3 中制作俄罗斯方块游戏。我正在使用 movieClip 和 colorTransform 数组来创建彩色、随机、独特的片段。随机化影片剪辑中的帧效果很好，但是当我尝试使用剪辑的 colorTransform 属性应用随机颜色时，我得到了：

```
Tetris.as, Line 342 1067: Implicit coercion of a value of type Number to an unrelated type flash.geom:ColorTransform. 
```

这是一些示例代码：

```
 private function LandTetromino():void
    {
        var cT:int = currentTetromino;
        var landed:Tetris_Shapes;

        for (var i:int=0; i<shapeBuilder[cT][currentRotation].length; i++)
        {
            for (var j:int=0; j<shapeBuilder[cT][currentRotation][i].length; j++)
            {
                if (shapeBuilder[cT][currentRotation][i][j]==1)
                {
                    landed = new Tetris_Shapes();
                    landed.transform.colorTransform = Math.floor(Math.random()*allcolorTransforms.length);
                    landed.gotoAndStop(Math.floor(Math.random()*12));
                    addChild(landed);
                    landed.name="r"+(startingRow+i)+"c"+(startingCol+j);
                    boardArray[startingRow+i][startingCol+j]=1;
                }
            }
        }
        removeChild(tetrisShape);
        dropTime.removeEventListener(TimerEvent.TIMER, OnTimeTick);
        dropTime.stop();
        CheckForCompleteLines();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:58:09.483

allcolorTransforms 是 ColorTransform 数组吗？

如果是的话。正确的跟随代码。

```
landed.transform.colorTransform = allcolorTransforms[Math.floor(Math.random()*allcolorTransforms.length)]; 
```

# macos - MACOSX：如何从可可应用程序启动需要 root 权限的守护进程

> ID：14745334
> 
> 赞同：3
> 
> 时间：2013-02-07T06:53:23.683
> 
> 标签：macos, cocoa, root, daemon, privileges

条件如下：MacOSX 10.7 和 Cocoa 用objective-c 编写的图形应用程序。

我面临以下问题。我无法从 Cocoa 应用程序的 /user/bin 文件夹启动守护程序应用程序。我知道我应该有 root 权限才能做到这一点。

我有安装程序，不是 *.pkg，而是手动编写的安装程序应用程序。安装过程完成后，我需要启动我的守护进程。如何提高我在 Objective-C 应用程序中的权限级别？

我有这个代码。但是 AuthorizationExecuteWithPrivileges 调用已被弃用。

我们不应该使用它。

```
AuthorizationItem authItem      = { kSMRightModifySystemDaemons, 0, NULL, 0 };
AuthorizationRights authRights  = { 1, &authItem };
AuthorizationFlags flags        = kAuthorizationFlagDefaults |
                                  kAuthorizationFlagInteractionAllowed |
                                  kAuthorizationFlagPreAuthorize |
                                  kAuthorizationFlagExtendRights;

AuthorizationRef authRef = NULL;

OSStatus status = AuthorizationCreate(&authRights,
kAuthorizationEmptyEnvironment, flags, &authRef);

status = AuthorizationExecuteWithPrivileges(authorizationRef, tool, kAuthorizationFlagDefaults, args, &pipe); 
```

第二种方法是使用特权助手。对于我的情况，这种方式看起来非常复杂。我只需要在安装后启动守护进程。

当然，我可以要求用户重新启动 mac。但我想避免它。

其他可能性是守护程序可执行文件上的 SUID 位。但我认为这并不安全。

我的问题是：还有其他更简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:26:30.213

好吧，这里可能会有答案。

你需要：

1.  使用您的操作创建一个 shell 脚本。
2.  创建一个苹果脚本`NSString`，您可以在其中请求执行 shell 脚本`with administrator privilege`。
3.  创建一个实例`NSAppleScript`并执行苹果脚本。

以下是更多详细信息：

[AuthorizationExecuteWithPrivileges 已弃用](https://stackoverflow.com/questions/6841937/authorizationexecutewithprivileges-is-deprecated)

# php - 使用 jquery 的左侧边栏内容库？

> ID：14745342
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:53:40.647
> 
> 标签：php, jquery, gallery

我正在寻找一个带有左侧边栏内容选择器的 jquery 库插件，您有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:00:11.387

看看： [http](http://www.slidesjs.com/) ://www.slidesjs.com/ 产品示例有一个右侧边栏。（有点编码，然后侧边栏就离开了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:08:09.387

您在寻找免费下载示例吗？检查：[http](http://www.pikachoose.com/) ://www.pikachoose.com/ 它有不同选项的免费下载，但如果您想付费：检查：[http ://www.tn3gallery.com/examples/tn3_eris_vertical/](http://www.tn3gallery.com/examples/tn3_eris_vertical/)

# c++ - CvCaptureFromFile(..) 的源代码

> ID：14745344
> 
> 赞同：-2
> 
> 时间：2013-02-07T06:53:45.143
> 
> 标签：c++, c, opencv, video-capture

我想使用`CvCaptureFromFile(..)`函数的源代码，因为我不想在我的项目中使用 OpenCV 库函数。所以我按 F10,F11 进入函数内部，然后复制我需要的东西并将它们转换为 C 代码。到现在一切都还好。

但是当我尝试运行时，我在函数内部遇到了链接错误`icvIntFFMPEG(void)`

错误如下：

> 错误 1 `error LNK2019: unresolved external symbol "__declspec(dllimport) void * __stdcall GetProcAddress(struct HINSTANCE__ *,char const *)" (__imp_?GetProcAddress@@YGPAXPAUHINSTANCE__@@PBD@Z) referenced in function "void __cdecl icvInitFFMPEG(void)" (?icvInitFFMPEG@@YAXXZ)`
> ​​错误 2 `error LNK2019: unresolved external symbol "struct HINSTANCE__ * __stdcall LoadLibrary(char const *)" (?LoadLibrary@@YGPAUHINSTANCE__@@PBD@Z) referenced in function "void __cdecl icvInitFFMPEG(void)" (?icvInitFFMPEG@@YAXXZ)`

我复制了源代码中的所有内容。知道我哪里出错了吗？我该如何解决这个错误？

**更新**：如果我将头文件（我正在处理源代码的地方）包装在一个外部“C”中，就像这样 -

```
extern "C" {
  #include "defination.h"
 } 
```

然后第一个错误消失了，loadLibrary 的错误变为

> `error LNK2019: unresolved external symbol __imp__LoadLibrary@4 referenced in function _icvInitFFMPEG`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:57:06.383

OpenCv 使用 ffmpeg - 这是一个非常大的项目。ffmpeg 在幕后使用了其他一些工具。您可能想使用 ffmpeg，但从 ffmpeg 本身获取源代码是愚蠢的 - 您将花费数年时间摆弄该代码 - 真的。

所以，决定一个视频输入库——无论是 OpenCV、ffmpeg、Direct3D 还是其他什么，并使用它。

不要坚持“你不能使用外部库”的想法，因为你不能没有它们。开发这样一个库需要数年时间——我很确定你不想那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:41:06.260

好吧，看来您对 Kernel32.dll 中的 LoadLibrary()/GetProcAddress() 函数的调用未解决。您使用的是什么 IDE/项目类型？除非在某处指定 /NODEFAULTLIB，否则默认情况下应链接 Kernel32.lib，至少据我所知。您可以尝试将代码添加`#pragma comment(lib, "kernel32.lib")`到复制代码的文件中，但如果没有有关您的设置的更多信息，很难回答是什么原因造成的。

# javascript - 如何使用无 jquery XmlHttpRequest 方式交换 jQuery.ajax 调用？

> ID：14745351
> 
> 赞同：0
> 
> 时间：2013-02-07T06:54:00.520
> 
> 标签：javascript, .net, jquery, xmlhttprequest

你能帮我用 XmlHttpRequest 交换下面的 jQuery ajax 调用，这样就不需要 jQuery 了吗？（我是否还需要交换：

```
jQuery.support.cors = true; 
```

当我不使用 jQuery.ajax 而是使用 XmlHttpRequest 时？)

```
jQuery.support.cors = true; 

var endpointAddress = "http://My.Server.FooService/FooServices.svc/";
var url = endpointAddress + "/SubmitFoo";
        $.ajax(
            {
                type: 'POST',
                url: url,
                contentType: 'application/json',
                data: JSON.stringify(request),
                success: function (result) {
                    alert("Foo submitted succesfully!");
                },
                error: function (jqXHR, textStatus, errorThrown) {

                    alert('Error Occured' + errorThrown);
                }
            }               //eof ajax object
        );  //eof .ajax
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:01:20.453

[使用 XMLHttpRequest 或 XDomainRequest 进行跨域 JavaScript 请求](http://www.leggetter.co.uk/2010/03/12/making-cross-domain-javascript-requests-using-xmlhttprequest-or-xdomainrequest.html)

# c# - 从现有数据库 EF 5 生成 POCO（有一些条件）

> ID：14745354
> 
> 赞同：2
> 
> 时间：2013-02-07T06:54:06.580
> 
> 标签：c#, entity-framework, ef-code-first, poco

我有一个现有的数据库，我想生成它的 POCO，但**我想以`.tt`文件外部的模型类结束，而不`partial`为每个类提供定义和“自动生成”注释标题，**我希望得到一个结果，就像我从头开始构建 POCO . 有没有获得这个结果的过程？问候

我想重新生成我的数据库并开始使用迁移从 POCO 更新模型

**更新**：编辑模板文件（.tt）后，我可以删除标题注释和部分定义。我想我可以手动完成我的工作。现在，我只需`.tt`要从项目中排除文件及其子类，然后再次将我的业务类添加到项目中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:25:42.640

您可以使用[Entity Framework Power Tools Beta 3](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)扩展来生成您的 pocos。它具有逆向工程代码优先选项，它为现有数据库生成 POCO 类、派生的 DbContext 和代码优先映射。

# c++ - Qt5 Static Build 无法打开输入文件“/SDK/lib/x86.obj”

> ID：14745355
> 
> 赞同：0
> 
> 时间：2013-02-07T06:54:07.543
> 
> 标签：c++, qt, build, static, installation

我正在尝试对 Qt 进行静态构建，但出现错误：

```
LINK : fatal error LNK1181: cannot open input file 'SDK\Lib\x86.obj'
NMAKE : fatal error U1077: '"c:\Development\Visual Studio 2010\VC\BIN\link.EXE"'
 : return code '0x49d'
Stop.
NMAKE : fatal error U1077: '"c:\Development\Visual Studio 2010\VC\BIN\nmake.exe"
' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop. 
```

我使用的是 Windows 7 x64，并且系统路径中有 Perl 和 Python。我一直在使用[本](http://qt-project.org/wiki/Building_Qt_5_from_Git "这个")指南下载 Qt。（git 存储库）还使用 msvc2010 编译器安装了 Windows SDK 7.1。我还有另一个共享的 Qt 编译，效果很好。我正在尝试构建的 Qt 的静态构建位于不同的目录中。

只是当我将 -static 选项传递给 Qt 配置时，才会弹出此错误。

我的配置命令看起来像这样

```
configure -static- mp -nomake tests -nomake examples -release -developer-build -opensource 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:52:55.737

看起来它是一个损坏的构建路径，或者什么。

我实际上去重新格式化我的硬盘驱动器并全新安装 Win7 x64。之后，Qt 的静态编译在第一次尝试时成功完成。对于可能遇到此问题的其他人，我建议您使用注册表清洁器之类的东西，看看您是否可以完全清除它。

我改变的另一件事; 我在configure.exe中添加了“ *-opengl desktop* ”，因为我的显卡比较好，所以决定不安装DirectX SDK。

# python - 将 many2one 字段链接到另一个类的特定字段

> ID：14745362
> 
> 赞同：0
> 
> 时间：2013-02-07T06:54:25.050
> 
> 标签：python, openerp

我有一个使用以下代码创建的类

```
class exp(osv.osv):
    _name = "sim.exp"
    _description = "xxx"
    _columns = {
        'building': fields.many2one('sim.buildings','Building',required=True,ondelete='cascade'),
        'owner': fields.many2one('sim.student','Name of Owner',required=True,ondelete='cascade'),
    }
exp() 
```

我对该领域有一个特定的问题，`owner`由于某种原因让我回到了该`regnum`领域，我希望取回该`student_name`领域

我的`sim.student`课程如下所示

```
class student(osv.osv):
    _name = "sim.student"
    _description = "xxx"
    _columns = {
        'student_name': fields.char('Name',size=256,required=True),
        'regnum': fields.char('Registration Number',size=256,required=True),
        'father_name': fields.char('Last Name',size=256),
        'gender':fields.selection([('male','Male'),('female','Female')],'Gender'),
        'contact_no':fields.char('e-mail',size=256),
        'building': fields.many2one('sim.buildings','Consorcio',required=True,ondelete='cascade'),

    }
student() 
```

有什么办法可以具体得到`student_name`吗？

任何正确方向的提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:58:13.167

看来您没有`rec_name`在“sim.student”课程中指定。

`rec_name`在您的班级中添加：

```
class student(osv.osv):
    rec_name = 'student_name' 
```

希望它能解决你的问题。

# javascript - NodeJS异步库并行方法奇怪的行为

> ID：14745367
> 
> 赞同：0
> 
> 时间：2013-02-07T06:54:47.640
> 
> 标签：javascript, node.js, scope

我第一次尝试将 async 模块与 NodeJS 一起使用，当我尝试动态构造函数数组以运行 async.parallel 函数时遇到了问题：

```
 methods = [];
    for (key in entries) {
      methods.push(function(callback) {
        return callback(null, key);
      });
    }
    return async.parallel(methods, function(err, results) {
      console.log(results);
      return render_views(req, res, 'view_blog_all', {
        entries: entries
      });
    }); 
```

我一直看到的输出是：

```
 [ 'powerful_sms_communication_for_teams',
  'powerful_sms_communication_for_teams',
  'powerful_sms_communication_for_teams' ] 
```

我循环的“条目”对象肯定有三个不同的键。我错过了什么？

异步模块： [https ://github.com/caolan/async](https://github.com/caolan/async)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:59:57.733

这是人们在使用异步逻辑时遇到的常见问题。关键是要记住，在您调用 之前，您的回调不会运行`async.parallel`，此时，`key`循环中的最后一个键值将运行。

解决此问题的一种方法是使用 IIFE 在新范围内捕获键值。

```
methods = [];
for (key in entries) {
  (function(key){
    methods.push(function(callback) {
      return callback(null, key);
    });
  })(key);
} 
```

您也可以使用`async.map`普通数组和单个迭代器。

```
return async.map(
  entries,
  function(key, callback){
    callback(null, key);
  },
  function(err, results) {
    console.log(results);
    return render_views(req, res, 'view_blog_all', {
      entries: entries
    });
  }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:08:41.983

这是使用[https://github.com/caolan/async#map进行的重写](https://github.com/caolan/async#map)

```
async.map(entries, function(entry, callback) {
  //do your stuff, fully parallel and async ;)
  callback(null, entry);
}, function(err, results) {
  console.log(results);
  return render_views(req, res, 'view_blog_all', {
    entries: entries
  });
}); 
```

# ios - ios：如何使用 fmdb 将空值插入 sqlite

> ID：14745369
> 
> 赞同：0
> 
> 时间：2013-02-07T06:55:07.837
> 
> 标签：ios, sqlite

我的 sqlite 表结构是：

```
CREATE TABLE "location" ("latitude" DOUBLE,"longitude" DOUBLE,"date" DATETIME,"locationDescription" VARCHAR,"photopath" VARCHAR,"placemark" BLOB,"wheelId" INTEGER,"wheelSize" DOUBLE,"frontWheelx" DOUBLE,"frontWheely" DOUBLE,"rearWheelx" DOUBLE,"rearWheely" DOUBLE) 
```

现在我想在表中插入一条记录，插入列：（日期，光路，wheelId，wheelSize，frontWheelx，frontWheely，rearWheelx，rearWheely）并忽略列：（纬度，经度，locationDescription，地标）

我的代码是：

```
    BOOL 成功 = [lunGaiDataBase executeUpdate:@"插入位置（日期、光路、wheelid、wheelsize、frontwheelx、frontwheely、rearwheelx、returnwheely）值（？，？，？，？，？，？，？，？）"，
     location.date,location.photoPath, location.wheelId,location.wheelSize,location.frontWheelx,location.frontWheely,location.rearWheelx,location.rearWheely];

我的位置类是：

    @property (nonatomic, assign) 双纬度；
    @property (nonatomic, assign) 双经度；
    @property（非原子，保留）NSDate * 日期；
    @property (nonatomic, 保留) NSString * locationDescription;
    @property (nonatomic, 保留) NSString * photoPath;
    //@property (nonatomic, retain) NSString * category;
    @property（非原子，保留）CLPlacemark * 地标；
    @property (nonatomic, assign) NSInteger wheelId;
    @property（非原子，分配）双前轮；
    @property (nonatomic, assign) double frontWheely;
    @property（非原子，分配）双后轮；
    @property（非原子，分配）双后轮；
    @property（非原子，分配）双轮尺寸；

```

当我运行程序时，它崩溃了！帮我 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:50:26.330

如果我没记错的话，你的崩溃信息会是`"EXC_BAD_EXCESS"`对的吗？

尝试这个 ：

```
BOOL succeed = [lunGaiDataBase executeUpdate:@"insert into location (wheelId) values(?)",
 [NSNumber numberWithInt:location.wheelId]]; 
```

由于`wheelId`被声明为`NSInteger`，您必须将其传递为

```
[NSNumber numberWithInt:location.wheelId] 
```

# ruby-on-rails - 我可以在比较期间遍历数组吗？

> ID：14745375
> 
> 赞同：0
> 
> 时间：2013-02-07T06:55:48.217
> 
> 标签：ruby-on-rails, ruby

```
s = Array.new 

s << 19 
while (s.last + 19) < 100000 do
  s << s.last + 19 
end 
```

这^有效。s 是 100,000 以下 19 的所有因子的数组。
我试图在一个简洁的语句中找到 s 中的所有数字，其中该数字的倒数也在数组中。例如：176 和 671。

```
reflections= s.select { |num| num.to_s.reverse == s.each.to_s } 
```

我知道这是错误的，但我如何检查整个数组中的每个反转项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:59:56.093

这应该有效：

```
reflections = s.select { |num| s.include?(num.to_s.reverse.to_i) } 
```

虽然它产生了你可能没有预料到的结果

```
s = [176, 234, 671, 111]

reflections = s.select { |num| s.include?(num.to_s.reverse.to_i) }

reflections # => [176, 671, 111] 
```

根据您的逻辑，这些都是有效的结果。

排除自我匹配非常简单：

```
s = [176, 234, 671, 111]

reflections = s.select do |x|
  x = x.to_s
  r = x.reverse
  (x != r) && s.include?(r.to_i)
end

reflections # => [176, 671] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T08:23:28.733

```
reflections = s & s.map{|num| num.to_s.reverse.to_i} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:20:10.387

尝试：

```
reverse_array = s.select {|num| num.to_s == num.to_s.reverse } 
```

更新：

检查后我发现这会起作用：

```
myarr = ""
s = (1..1000)    
s.select{ |num| 

unless s.include?(num.to_s.reverse.to_i)   
   myarr << num.to_s
end

} 
```

最后，`myarr`将包含所有在 array 中出现反转的数字`s`。

# r - 如何在 R 中跨多个独立向量执行成对 t.test？

> ID：14745379
> 
> 赞同：5
> 
> 时间：2013-02-07T00:24:53.043
> 
> 标签：r

**TL;DR 版**

我有向量 X1,X2,X3,...Xn。对于每种可能的向量组合，我想测试任何一个向量的平均值是否与任何其他向量的平均值显着不同。我正在寻找比运行 n^2 个单独的 t.tests 在 R 中执行此操作的更好方法。

**全文**

我有一个包含特定 CSA 的人口普查数据的数据框。每行包含特定人口普查区域的每个变量（列）的观测值。

我需要做的是比较不同 MSA 的人口普查区域中相同变量的均值。换句话说，我想根据 MSA 指定变量（这是列之一）对我的 data.frame 进行分解，然后在每个新分解的 MSA 中成对比较另一个感兴趣的变量的均值差异。这本质上是在每个随后的向量上进行成对的 t.tests，但我希望以一种比一遍又一遍地编写 t.test(MSAx, MSAy) 更优雅的方式来做到这一点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T07:58:10.923

下面我的方法对@ashkan 提出的方法的优势是我的方法可以删除重复项。（即 X1 vs X2 或 X2 vs X1 将出现在结果中，而不是两者都出现）

```
# Generate dummy data
df <- data.frame(matrix(rnorm(100), ncol = 10))
colnames(df) <- paste0("X", 1:10)

# Create combinations of the variables
combinations <- combn(colnames(df),2, simplify = FALSE)

# Do the t.test
results <- lapply(seq_along(combinations), function (n) {
                  df <- df[,colnames(df) %in% unlist(combinations[n])]
                  result <- t.test(df[,1], df[,2])
                  return(result)})

# Rename list for legibility    
names(results) <- paste(matrix(unlist(combinations), ncol = 2, byrow = TRUE)[,1], matrix(unlist(combinations), ncol = 2, byrow = TRUE)[,2], sep = " vs. ") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-26T15:20:07.020

只需使用`pairwise.t.test`，这是一个示例：

```
x1 <- rnorm(50)
x2 <- rnorm(30, mean=0.2)
x3 <- rnorm(100,mean=0.1)
x4 <- rnorm(100,mean=0.4)

x <- data.frame(data=c(x1,x2,x3,x4),
                key=c(
                  rep("x1", length(x1)),
                  rep("x2", length(x2)),
                  rep("x3", length(x3)),
                  rep("x4", length(x4))) )

pairwise.t.test(x$data,
                x$key,
                pool.sd=FALSE)

#   Pairwise comparisons using t tests with non-pooled SD 
#
# data:  x$data and x$key 
#
#    x1     x2     x3    
# x2 0.7395 -      -     
# x3 0.9633 0.9633 -     
# x4 0.0067 0.9633 0.0121
#
# P value adjustment method: holm 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T01:22:54.007

如果您有一个 data.frame 并且您希望在 data.frame 的每一列之间独立执行 T 检验，您可以使用双重应用循环：

```
apply(MSA, 2, function(x1) {
  apply(MSA, 2, function(x2) {
    t.test(x1, x2)
  })
}) 
```

伴随这种蛮力方法的一个很好的可视化将是森林图：

```
cis <- apply(MSA, 2, function(x) mean(x) + c(-1, 1) * sd(x) * 1.96)
plot.new()
plot.window(xlim=c(1, ncol(cis)), ylim=range(cis))
segments(1:ncol(cis), cis[1, ], 1:ncol(cis), cis[2, ])
axis(1, at=1:ncol(cis), labels=colnames(MSA))
axis(2)
box()
abline(h=mean(MSA), lty='dashed')
title('Forest plot of 95% confidence intervals of MSA') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-20T09:43:54.953

除了来自 quarzgar 的响应之外，还有另一种方法可以在 R 中跨多个因子执行成对测试。基本上是通过创建因子水平组合来使用两个（或多个）因子的技巧。

2x2 经典设计示例：

```
df <- data.frame(Id=c(rep(1:100,2),rep(101:200,2)),
               dv=c(rnorm(100,10,5),rnorm(100,20,7),rnorm(100,11,5),rnorm(100,12,6)),
             Group=c(rep("Experimental",200),rep("Control",200)),
             Condition=rep(c(rep("Pre",100),rep("Post",100)),2))

#ANOVA
summary(aov(dv~Group*Condition+Error(Id/Condition),data = df))

#post-hoc across all factors
df$posthoclevels <- paste(df$Group,df$Condition) #factor combination
pairwise.t.test(df$dv,df$posthoclevels)

#   Pairwise comparisons using t tests with pooled SD 
#
# data:  df$dv and df$posthoclevels 
#
#                 Control Post Control Pre Experimental Post
# Control Pre       0.60         -           -                
# Experimental Post <2e-16       <2e-16      -                
# Experimental Pre  0.26         0.47        <2e-16           
#
# P value adjustment method: holm 
```

# android - onTouchListner 不在冰淇淋三明治上工作，但在姜饼上工作

> ID：14745386
> 
> 赞同：0
> 
> 时间：2013-02-07T06:56:33.463
> 
> 标签：android, android-4.0-ice-cream-sandwich, ontouchlistener

我已经`ontouchlistener`在我的服务类中实现了，并试图让 touch 事件运行良好，`gingerbread`但它不适用于高于`icreamsandwich`. 我正在努力解决这个问题，但即使在阅读了 stackoverflow 中的大量文档后，我也没有得到任何解决方案，

这是代码..请帮我解决这个问题。在`onCreate`我定义的方法中`ImageButton`

```
ImageButton imageButton=new ImageButton(this);
imageButton.setBackgroundColor(Color.TRANSPARENT);
imageButton.setOnTouchListener(this);
WindowManager.LayoutParams layoutParams=new WindowManager.LayoutParams(
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, 
            WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH, 
            PixelFormat.TRANSLUCENT);
WindowManager windowManager=(WindowManager)getSystemService(WINDOW_SERVICE);
windowManager.addView(imageButton, layoutParams);`

@Override 
public boolean onTouch(View arg0, MotionEvent arg1) {
     Toast.makeText(getApplicationContext(), "Double touched "+DoubleTouch, 1000).show();
     return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:03:58.437

为什么你返回 false ？你应该在触摸监听器上返回 true ！对不起，你能告诉我你想用触摸监听器做什么吗？正如我在您的代码中看到的那样，您只显示 Toast。如果你想在 click 上执行。只需使用 OnClickListener 而不是触摸监听器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:48:05.623

您必须在 onTouch 上返回 true 以指示发生了触摸事件并且您想要返回结果。

参考这篇：[Android：如何检测双击？](https://stackoverflow.com/questions/2217670/android-how-to-detect-double-tap)和[Android 多点触控和双击一起工作以获得图像视图](https://stackoverflow.com/questions/4604011/android-multi-touch-and-double-tap-working-together-for-an-imageview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:42:06.317

回复您的评论。好吧，您可以使用 OnClickListener 代替双击或更多！

这是一个示例：首先您创建一个*`Boolean`*变量并将其分配给`true`

```
boolean lightit = true; 
```

第二个创建按钮点击的方法。在我的示例中，当我第一次单击按钮图像将更改为另一个图像。当再次单击按钮时，它会将其更改回旧图像。在这里按照我的示例进行操作，并希望它对您有所帮助。

```
 private void showHide1() {
    if (lightit) {
        if (null != bmp) {
            rotator = null;
            styleId = StyleKosh.bright;
            change = StyleKosh.changeStyle(bmp, styleId);
            view.setImageBitmap(change);
            fix.setImageResource(R.drawable.lighton);
        } else if (null == bmp) {
            final Toast tst = Toast.makeText(getApplication(),
                    "Please Select An Image First", Toast.LENGTH_SHORT);
            tst.setGravity(Gravity.CENTER, 0, 0);
            tst.show();
        }
    } else {
        rotator = null;
        change = null;
        fix.setImageResource(R.drawable.light);
        view.setImageBitmap(bmp);
    }
    lightit = !lightit;
} 
```

然后在您的按钮上单击侦听器添加这`showHide();` 是我处理按钮或图像视图单击的方式。对于多次点击，您只需要添加 if else 。请看我使用相同的方法在 fullScreen 中显示和隐藏 statusBar 但我使用的是 Gesture 而不是 OnTouchListener 。告诉我你是否想知道我如何使用 Gesture 更容易使用。

# python-3.x - 在 Python 3 中从字节串中提取有效数据

> ID：14745387
> 
> 赞同：1
> 
> 时间：2013-02-07T06:56:45.323
> 
> 标签：python-3.x, regex, python-3.2

给定以下字节串，我如何删除与 \xFF 匹配的任何字符，并从剩下的内容中创建一个列表对象（通过分割已删除的区域）？

```
b"\x07\x00\x00\x00~\x10\x00pts/5\x00\x00/5\x00\x00user\x00\x00" 
```

期望的结果：

```
["~", "pts/5", "/5", "user"] 
```

上面的字符串只是一个例子 - 我想删除任何 \x.. （非解码）字节。

我正在使用 Python 3.2.3，并且希望只使用标准库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:06:34.080

# php - ionCube 安装 :: 缺少 zend_extension CentOs

> ID：14745394
> 
> 赞同：13
> 
> 时间：2013-02-07T06:57:05.337
> 
> 标签：php, ioncube

我正在安装ionCube，但是php配置缺少ionCube的zend_extension，但没有指定确切的内容

我正在开发 CentO

一切顺利谢谢:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-08T05:27:55.650

我错过了几件事

```
Select the correct bit release

Match the Loader with your PHP version, e.g. for PHP 5.3, ioncube_loader_lin_5.3.so (extensions are inside the folder)

Add 'zend_extension = /usr/local/ioncube/ioncube_loader_lin_5.3.so' to php.ini

Restart the server 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-15T16:04:49.700

该解决方案有两个部分对我有用：

1.  将 00-ioncube.ini 文件`conf.d`从`mods-available`目录符号链接到目录中。不要像加载程序向导建议的那样简单地将文件复制到 conf.d 中。
2.  重新启动 fastcgi 守护进程和 apache 守护进程

有关更多详细信息，请参阅[我的博客文章](http://metaperl.org/uncategorized/the-necessary-zend_extension-line-could-not-be-found-in-the-configuration)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T01:47:37.393

我在 Ubuntu 上安装时遇到了完全相同的问题。Ubuntu 想要从 /etc/php5/apache2/conf.d/20-ioncube.ini 到 /etc/php5/mods-available/20-ioncube.ini 的软链接。我按照给定的指示尝试了该操作，并且 apache 重启失败并出现此错误：“PHP 致命错误：[ionCube Loader] 加载程序必须作为第 0 行未知的 php.ini 文件中的第一个条目出现”在错误日志/ var/log/apache2/error.log

对我有用的解决方案是删除软链接并从 /etc/php5/mods-available/20-ioncube.ini ("zend_extension=/usr/lib/php5/20121212/ioncube_loader_lin_5.5.so ") 到 /etc/php5/apache2/php.ini

可能值得注意的是，我删除了等号两侧的空格。

Apache 成功重新启动并单击加载程序脚本页面中的测试链接导致成功消息，就像我的开发环境中依赖 ioncube 的后续脚本执行一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-14T09:39:40.673

实际上 ioncube 需要在 php.d 目录中拥有自己的 ini 文件。Ioncube 读取自己的文件名为 20-ioncube.ini 的文件。

所以要做到这一点，我们需要创建 vi /etc/php.d/20-ioncube.ini 并在其中添加文本：“zend_extension = /usr/lib/php/modules/ioncube_loader_lin_5.3.so”。现在重新加载 php-fpm 和浏览器。Ioncube 现在会找到 zend 框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-22T09:32:12.230

您可以尝试在我的[gist](https://gist.github.com/rangerz/271504c282ea254779ddb730605fd662) install_ioncube.sh中执行我的安装 ioncube 脚本

或者按照其他脚本中的官方向导手动安装

```
# run-loader-wizard.sh

curl -O https://www.ioncube.com/loader-wizard/loader-wizard.tgz
tar zxvf loader-wizard.tgz

cd ./ioncube
php -S localhost:8000

# open http://localhost:8000/loader-wizard.php 
```

# 3d - 3D管一侧黑色

> ID：14745398
> 
> 赞同：0
> 
> 时间：2013-02-07T06:57:21.193
> 
> 标签：3d, geometry, three.js

我正在用 three.js 绘制 3D 管

我看到那个管子的一侧是黑色的。请帮助我

请在以下位置找到代码：http: [//jsfiddle.net/7WNZ7/](http://jsfiddle.net/7WNZ7/) `Code at above link`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:45:32.463

您需要像这样添加一些环境光：

```
var light = new THREE.AmbientLight( 0x888888 );
scene.add( light ); 
```

你需要为`ambient`你的材料增加反射率。如果材料是双面的，它也会更好看：

```
var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, 
    [new THREE.MeshLambertMaterial({
        color: color, 
        ambient: color, 
        side: THREE.DoubleSide
    }), 
    new THREE.MeshBasicMaterial({
        color: 0x000000,
        wireframe: true,
        transparent: false
    })
]); 
```

或者，您可以添加更多的定向或点光源。

小提琴：http: [//jsfiddle.net/7WNZ7/1/](http://jsfiddle.net/7WNZ7/1/)

# python - 如何在 tornadoweb 中使用启用的 xsrf throw AJAX 上传 multipart/form-data

> ID：14745400
> 
> 赞同：1
> 
> 时间：2013-02-07T06:57:34.020
> 
> 标签：python, tornado

我正在尝试通过启用 XSRF 保护的 POST HTTP 请求作为 AJAX 请求上传文件，但我每次都得到：

```
WARNING:root:403 POST /path/to/uploader/ (127.0.0.1): '_xsrf' argument missing from POST 
```

我检查了请求的数据：

```
_xsrf=01f86a98fe2346f9baec589dc8af3027&id=2 
```

如我所见，我将 _xsrf 发送给处理程序，但找不到此参数。

如果我将 multipart/form-data 禁用为 contentTypem，则错误将消失，并且 self.request.files 也为空。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:17:12.113

如果您包含表单的代码可能会有所帮助。

你需要在你的`<form>`标签中包含这个的输出（在 中生成`tornado.web.RequestHandler.get()`）：

```
self.xsrf_form_html() 
```

如果输入字段名为upload_file，您可以在处理POST 的处理程序中执行此操作：

```
file = self.request.files['upload_file'][0]
uploaded_content_type = file['content_type']
uploaded_filename = file['filename']
local_file_path = '/some/path/on/server/uploaded.file'
output_file = open(local_file_path, 'w')
output_file.write(file['body'])
output_file.close() 
```

# java - ThreadLocal 共享数据？

> ID：14745403
> 
> 赞同：1
> 
> 时间：2013-02-07T06:57:48.467
> 
> 标签：java, tomcat, servlet-filters, thread-local, esapi

无论如何，我知道以下是不可能的，但它发生在我们的一个生产环境中：

**设置**

*   ESAPI 2.01
*   主 servlet 过滤器设置和删除当前请求线程本地对象：

    ```
    try {
        ESAPI.httpUtilities().setCurrentHTTP(request, response);

        // filter logic ...
    } catch (Exception e) {
        LOG.error(Logger.SECURITY_FAILURE, "Error in ESAPI "
                + "security filter: " + e.getMessage(), e);
        request.setAttribute("message", e.getMessage());
    } finally {
        ESAPI.clearCurrent();
    } 
    ```

所有请求都通过此过滤器，并`ESAPI.currentRequest()`在整个系统中使用。

*   路径 A ( `http://server/path_a/`)
    *   一直到它到达`method_a`，这个方法不能从`path_b`
*   路径 B ( `http://server/path_b`)
    *   一直到它到达`method_b`，无法从`path_a`

这两条路径都经过 servlet 过滤器（映射“ `/*`”）

我收到的其中一封错误邮件表明`path_a`正在引发错误，这反过来又会启动错误邮件，在邮件代码中，当前请求（通过`ESAPI.currentRequest()`）被枚举为请求信息。

**问题**

在错误邮件中，来自的请求信息与来自`path_a`的堆栈跟踪信息相关`method_b`，对我来说这似乎是不可能的，因为两者都在单独的线程中运行。

**问题**

这怎么可能？我无法在本地重新创建它，除了设置和清除之外，我还必须采取某些预防措施`ThreadLocal`吗？这可能是tomcat设置的问题吗？我迷路了。

* * *

[PS：问题中的代码已被简化，因为例如代码库太大]

* * *

![错误邮件](../Images/98c4dc7da74690c71176526b696ba437.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:44:54.290

阅读 ESAPI 代码[https://code.google.com/p/owasp-esapi-java/source/browse/trunk/src/main/java/org/owasp/esapi/reference/DefaultHTTPUtilities.java](https://code.google.com/p/owasp-esapi-java/source/browse/trunk/src/main/java/org/owasp/esapi/reference/DefaultHTTPUtilities.java)有一些关于线程本地。

我要说的最大问题是它使用`InheritableThreadLocal`. 如果线程 A 派生了一个线程 B，B 将继承 A 的线程局部值；但是，当 A 然后清除本地线程时，它不会影响 B，因此 B 的继承值将保留。ESAPI 可能不应该使用`InheritableThreadLocal`.

如果不了解有关应用程序中线程的更多信息，我不能说这会如何产生您看到的问题。

# spring - 在 Hibernate HQL 中调用 Oracle 用户定义的函数

> ID：14745404
> 
> 赞同：0
> 
> 时间：2013-02-07T06:57:52.950
> 
> 标签：spring, hibernate, hql

有人能帮我一下吗。我想在 Spring+hibernate 应用程序中调用 oracle 函数。如何做到这一点。

例如：Oracle Function olddata(Varchar2 serialNumber) 这将返回具有 xyz 字段的记录集。我需要使用 HQL 在休眠中调用此函数。此外，该函数中有 2 个使用连接的表，并且从这两个表中获取记录。

问候， 帕里查亚

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T08:42:03.690

我认为[这个](http://keyurj.blogspot.com/2012/12/v-behaviorurldefaultvmlo.html)博客准确地描述了你需要什么。（基本上，您需要创建自己的 Hibernate 方言 - 起初听起来很吓人，但实际上没什么大不了的）。

# android - ProgressDialogue 与 DictionaryDatabase

> ID：14745407
> 
> 赞同：0
> 
> 时间：2013-02-07T06:58:02.783
> 
> 标签：android, android-asynctask

我在安卓中实现 DictionaryDatabase。当时我有一个 EditText 视图，我在其中输入一个单词，匹配的单词来自数据库。现在的问题是我的数据库太大了。就像单词“A”一样，我有 200 到 300 个单词。第一次安装应用程序时，必须加载数据库，这需要 1 到 3 分钟，这太可怕了。现在我希望在应用程序安装后或单击 EditTex 意味着焦点上我应该调用带有 ProgressDialogue 框的 asyntask。在数据库中执行 loadWords 并在完成时关闭对话。我知道异步任务，但我不知道如何为我的代码使用异步

这是数据库加载类的代码：

```
 /**
    * Contains logic to return specific words from the dictionary, and
    * load the dictionary table when it needs to be created.
    */
   public class DictionaryDatabase extends SQLiteOpenHelper  {
       private static final String TAG = "DictionaryDatabase";
            final static String DB_DESTINATION = "/data/data/YOUR_PACKAGE_NAME/databases/dictionary.db";
            private DictionaryDatabase mDictionary;
//****FOr Dictionary****//
static int [] raw_textFiles={R.raw.a,R.raw.b,R.raw.c,
    R.raw.d,R.raw.e,R.raw.f,
    R.raw.g,R.raw.h,R.raw.i,
    R.raw.j,R.raw.k,R.raw.l,
    R.raw.m,R.raw.n,R.raw.o,
    R.raw.p,R.raw.q,R.raw.r,
    R.raw.s,R.raw.t,R.raw.u,
    R.raw.v,R.raw.w,R.raw.x,
    R.raw.y,R.raw.z};

//Array for Parsing Use
ArrayList<String> Words = new ArrayList<String>();
private static String word;
private final Context mHelperContext;
private SQLiteDatabase mDatabase;
private ProgressDialog dialog;

//The columns we'll include in the dictionary table
public static final String KEY_WORD = SearchManager.SUGGEST_COLUMN_TEXT_1;
public static final String KEY_DEFINITION = SearchManager.SUGGEST_COLUMN_TEXT_2;

private static final String DATABASE_NAME = "dictionary";
private static final String FTS_VIRTUAL_TABLE = "FTSdictionary";
private static final int DATABASE_VERSION = 2;

private static final HashMap<String,String> mColumnMap = buildColumnMap();

private static final String FTS_TABLE_CREATE =
        "CREATE VIRTUAL TABLE " + FTS_VIRTUAL_TABLE +
        " USING fts3 (" +
        KEY_WORD + ", " +
        KEY_DEFINITION + ");";

/**
 * Constructor
 * @param context The Context within which to work, used to create the DB
 */
public DictionaryDatabase(Context context) {

    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    mHelperContext = context;
}

/**
 * Builds a map for all columns that may be requested, which will be given to the 
 * SQLiteQueryBuilder. This is a good way to define aliases for column names, but must include 
 * all columns, even if the value is the key. This allows the ContentProvider to request
 * columns w/o the need to know real column names and create the alias itself.
 */
private static HashMap<String,String> buildColumnMap() {
    HashMap<String,String> map = new HashMap<String,String>();
    map.put(KEY_WORD, KEY_WORD);

    map.put(KEY_DEFINITION, KEY_DEFINITION);
    map.put(BaseColumns._ID, "rowid AS " +
            BaseColumns._ID);
    map.put(SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID, "rowid AS " +
            SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID);
    map.put(SearchManager.SUGGEST_COLUMN_SHORTCUT_ID, "rowid AS " +
            SearchManager.SUGGEST_COLUMN_SHORTCUT_ID);
    return map;
}

/**
 * Returns a Cursor positioned at the word specified by rowId
 *
 * @param rowId id of word to retrieve
 * @param columns The columns to include, if null then all are included
 * @return Cursor positioned to matching word, or null if not found.
 */
public Cursor getWord(String rowId, String[] columns) {
    String selection = "rowid = ?";
    String[] selectionArgs = new String[] {rowId};

    return query(selection, selectionArgs, columns);

    /* This builds a query that looks like:
     *     SELECT <columns> FROM <table> WHERE rowid = <rowId>
     */
}

/**
 * Returns a Cursor over all words that match the given query
 *
 * @param query The string to search for
 * @param columns The columns to include, if null then all are included
 * @return Cursor over all words that match, or null if none found.
 */
public Cursor getWordMatches(String query, String[] columns) {
    String selection = KEY_WORD + " MATCH ?";
    String[] selectionArgs = new String[] {query+"*"};

    return query(selection, selectionArgs, columns);

    /* This builds a query that looks like:
     *     SELECT <columns> FROM <table> WHERE <KEY_WORD> MATCH 'query*'
     * which is an FTS3 search for the query text (plus a wildcard) inside the word column.
     *
     * - "rowid" is the unique id for all rows but we need this value for the "_id" column in
     *    order for the Adapters to work, so the columns need to make "_id" an alias for "rowid"
     * - "rowid" also needs to be used by the SUGGEST_COLUMN_INTENT_DATA alias in order
     *   for suggestions to carry the proper intent data.
     *   These aliases are defined in the DictionaryProvider when queries are made.
     * - This can be revised to also search the definition text with FTS3 by changing
     *   the selection clause to use FTS_VIRTUAL_TABLE instead of KEY_WORD (to search across
     *   the entire table, but sorting the relevance could be difficult.
     */
}

/**
 * Performs a database query.
 * @param selection The selection clause
 * @param selectionArgs Selection arguments for "?" components in the selection
 * @param columns The columns to return
 * @return A Cursor over all rows matching the query
 */
private Cursor query(String selection, String[] selectionArgs, String[] columns) {
    /* The SQLiteBuilder provides a map for all possible columns requested to
     * actual columns in the database, creating a simple column alias mechanism
     * by which the ContentProvider does not need to know the real column names
     */
    SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
    builder.setTables(FTS_VIRTUAL_TABLE);
    builder.setProjectionMap(mColumnMap);

    Cursor cursor = builder.query(getReadableDatabase(),
            columns, selection, selectionArgs, null, null, null);

    if (cursor == null) {
        return null;
    } else if (!cursor.moveToFirst()) {
        cursor.close();
        return null;
    }
    return cursor;
}

/**
 * This creates/opens the database.
 */
@Override
public void onCreate(SQLiteDatabase db) {
    mDatabase = db;
    Log.i("PATH",""+mDatabase.getPath());
    mDatabase.execSQL(FTS_TABLE_CREATE);
//  loadDictionary();
}
/**
 * Starts a thread to load the database table with words
 */
private void loadDictionary() {
    new Thread(new Runnable() {
        public void run() {
            try {
                loadWords();
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
    }).start();
}

public void loadWords() throws IOException {
    Log.d(TAG, "Loading words...");
    for(int i=0;i<=25;i++)
    {  //***// 
        final Resources resources = mHelperContext.getResources();
        InputStream inputStream = resources.openRawResource(raw_textFiles[i]);
        //InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {
            StringBuilder sb = new StringBuilder();
            while ((word = reader.readLine()) != null)
            {
                sb.append(word);
                //  Log.i("WORD in Parser", ""+word);
            }
            String contents = sb.toString();
            StringTokenizer st = new StringTokenizer(contents, "||");
            while (st.hasMoreElements()) {
                String row = st.nextElement().toString();
                String title = row.substring(0, row.indexOf("$$$"));
                String desc = row.substring(row.indexOf("$$$") + 3);
                // Log.i("Strings in Database",""+title+""+desc);
                long id = addWord(title,desc);

                if (id < 0) {
                    Log.e(TAG, "unable to add word: " + title);
                }
            }
        } finally {
            reader.close();
        }
    } //***//
    Log.d(TAG, "DONE loading words.");
}

/**
 * Add a word to the dictionary.
 * @return rowId or -1 if failed
 */
public long addWord(String word, String definition) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_WORD, word);
    initialValues.put(KEY_DEFINITION, definition);

    return mDatabase.insert(FTS_VIRTUAL_TABLE, null, initialValues);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + FTS_VIRTUAL_TABLE);
    onCreate(db);
}
   } 
```

**更新：** EditTEx 搜索；

```
//::::::::::::::::::::::TextWatcher For EditTextView :::::::::::::::::::::://

TextWatcher myTextWatcher = new TextWatcher() {

    @SuppressLint("NewApi")
    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        query= (search.getText().toString());
        char character = 0;
        if(query.isEmpty()==false)
        {
            character=query.toLowerCase().charAt(0);
        }

        if (start==0) {
            //Log.i("query",""+query);

                Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,new String[] {query}, null);

            viewFlipper.showNext();

        }

        listAdapter.notifyDataSetChanged();
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    @SuppressLint("NewApi")
    @Override
    public void afterTextChanged(Editable s) {

        query= s.toString();
        char character = 0;

        if(query.isEmpty()==false)
        {
            character=query.toLowerCase().charAt(0);
        }

            Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,new String[] {query}, null);

        listAdapter.getFilter().filter(s);
    }
}; 
```

**这是提供者类：**

```
 */
private static UriMatcher buildUriMatcher() {
    UriMatcher matcher =  new UriMatcher(UriMatcher.NO_MATCH);
    // to get definitions...
    matcher.addURI(AUTHORITY, "dictionary", SEARCH_WORDS);
    matcher.addURI(AUTHORITY, "dictionary/#", GET_WORD);
    // to get suggestions...
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY, SEARCH_SUGGEST);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY + "/*", SEARCH_SUGGEST);

    /* The following are unused in this implementation, but if we include
     * {@link SearchManager#SUGGEST_COLUMN_SHORTCUT_ID} as a column in our suggestions table, we
     * could expect to receive refresh queries when a shortcutted suggestion is displayed in
     * Quick Search Box, in which case, the following Uris would be provided and we
     * would return a cursor with a single item representing the refreshed suggestion data.
     */
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_SHORTCUT, REFRESH_SHORTCUT);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_SHORTCUT + "/*", REFRESH_SHORTCUT);
    return matcher;
}

@Override
public boolean onCreate() {
    mDictionary = new DictionaryDatabase(getContext());
    return true;
}

/**
 * Handles all the dictionary searches and suggestion queries from the Search Manager.
 * When requesting a specific word, the uri alone is required.
 * When searching all of the dictionary for matches, the selectionArgs argument must carry
 * the search query as the first element.
 * All other arguments are ignored.
 */
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,
                    String sortOrder) {

    // Use the UriMatcher to see what kind of query we have and format the db query accordingly
    switch (sURIMatcher.match(uri)) {
        case SEARCH_SUGGEST:
            if (selectionArgs == null) {
              throw new IllegalArgumentException(
                  "selectionArgs must be provided for the Uri: " + uri);
            }
            return getSuggestions(selectionArgs[0]);
        case SEARCH_WORDS:
            if (selectionArgs == null) {
              throw new IllegalArgumentException(
                  "selectionArgs must be provided for the Uri: " + uri);
            }
            return search(selectionArgs[0]);
        case GET_WORD:
            return getWord(uri);
        case REFRESH_SHORTCUT:
            return refreshShortcut(uri);
        default:
            throw new IllegalArgumentException("Unknown Uri: " + uri);
    }
}

private Cursor getSuggestions(String query) {
  query = query.toLowerCase();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
   /* SearchManager.SUGGEST_COLUMN_SHORTCUT_ID,
                    (only if you want to refresh shortcuts) */
      SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

  return mDictionary.getWordMatches(query, columns);
}

private Cursor search(String query) {
  query = query.toLowerCase();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION};

  return mDictionary.getWordMatches(query, columns);
}

private Cursor getWord(Uri uri) {
  String rowId = uri.getLastPathSegment();
  String[] columns = new String[] {
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION};

  return mDictionary.getWord(rowId, columns);
}

private Cursor refreshShortcut(Uri uri) {
  /* This won't be called with the current implementation, but if we include
   * {@link SearchManager#SUGGEST_COLUMN_SHORTCUT_ID} as a column in our suggestions table, we
   * could expect to receive refresh queries when a shortcutted suggestion is displayed in
   * Quick Search Box. In which case, this method will query the table for the specific
   * word, using the given item Uri and provide all the columns originally provided with the
   * suggestion query.
   */
  String rowId = uri.getLastPathSegment();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
      SearchManager.SUGGEST_COLUMN_SHORTCUT_ID,
      SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

  return mDictionary.getWord(rowId, columns);
}

/**
 * This method is required in order to query the supported types.
 * It's also useful in our own query() method to determine the type of Uri received.
 */
@Override
public String getType(Uri uri) {
    switch (sURIMatcher.match(uri)) {
        case SEARCH_WORDS:
            return WORDS_MIME_TYPE;
        case GET_WORD:
            return DEFINITION_MIME_TYPE;
        case SEARCH_SUGGEST:
            return SearchManager.SUGGEST_MIME_TYPE;
        case REFRESH_SHORTCUT:
            return SearchManager.SHORTCUT_MIME_TYPE;
        default:
            throw new IllegalArgumentException("Unknown URL " + uri);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:34:23.293

有许多教程，例如 [http://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html](http://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html)

问题在于 Activity 的生命周期与之前的`AsyncTask`不同`Activity`：在 AsyncTask 完成的那一刻，Activity 可能已经从屏幕上移除并被另一个 Activity 替换。重新创建一个活动，例如当屏幕方向改变时。但它是旧的，不再可见的，由 AsyncTask 通知操作完成的 Activity。

请参阅以下讨论： [AsyncTask 真的在概念上存在缺陷还是我只是遗漏了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)

（注意默认 AsyncTask 行为中版本之间的不兼容：在 API 11 之前，不同的 AsyncTask 是并行执行的；从 API 11 开始，它们在单个工作线程上串行执行。）

解决方案是从 Model（在 MVC 意义上）而不是从 Controller（=Activity）调用长操作，这很可能不是 AsyncTask。

话虽这么说，一些代码：

```
public class AsyncTaskTestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d("~~~~","~~~onCreate ~~~ "+this);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    public void onStartButton(View view) {
        Log.d("~~~~","~~~onStartButton {");
        class MyTask extends AsyncTask<Void, Void, Void> {

            @Override
            protected Void doInBackground(Void... params) {
                // TODO Auto-generated method stub
                Log.d("~~~~","~~~doInBackground started");
                try {
                    for (int i=0; i<10; i++) {
                        Log.d("~~~~","~~~sleep#"+i);
                        Thread.sleep(200);
                    }
                    Log.d("~~~~","~~~sleeping over");
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Log.d("~~~~","~~~doInBackground ended");
                return null;
            }
            @Override
            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
                taskDone();
            }
        }
        MyTask task = new MyTask();
        task.execute(null);
        Log.d("~~~~","~~~onStartButton }");
    }
    private void taskDone() {
        Log.d("~~~~","\n\n~~~taskDone ~~~ "+this+"\n\n");
    }
    public void onStopButton(View view) {
        Log.d("~~~~","~~~onStopButton {");
        MagicAppRestart.doRestart(this);
        Log.d("~~~~","~~~onStopButton }");
    }
    public void onPause() {   Log.d("~~~~","~~~onPause ~~~ "+this);   super.onPause(); }
    public void onStop() {    Log.d("~~~~","~~~onStop ~~~ "+this);    super.onPause(); }
    public void onDestroy() { Log.d("~~~~","~~~onDestroy ~~~ "+this); super.onDestroy(); }
} 
```

基本上，您必须重构您的应用程序，以便 AsyncTask 数据的到达是一个异步事件。如果一个操作长得不可接受，它在 AsyncTask 中不会变得更快。

# php - 如何在 PHP SimpleXML 节点上使用 ucfirst()？

> ID：14745411
> 
> 赞同：0
> 
> 时间：2013-02-07T06:58:14.540
> 
> 标签：php, simplexml

我使用 php 和 simplexml 来解析 url。我想取 simplexml 节点的值并对其进行更改，首先我将其转换为字符串，但 ucfirst() 不适用于该字符串。

```
$xml = simplexml_load_file($url); 

foreach($xml->offers->offer as $offer)
{
    $bodyType = (string) $offer->{"body-type"}; //I convert simplexml to string first  
    echo ucfirst($bodyType); // In this line ucfirst doesn't work
} 
```

如何处理？

更新：问题出在西里尔字母中，因为 ucfirst 仅适用于拉丁语。工作解决方案是使用此功能：

```
 $bodyType = (string) $offer->{"body-type"};
    $encoding='UTF-8';
    $str = mb_ereg_replace('^[\ ]+', '', $bodyType); 
    $str = mb_strtoupper(mb_substr($str, 0, 1, $encoding), $encoding). mb_substr($str, 1, mb_strlen($str), $encoding); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:18:20.697

鉴于[Farrukh 的回答](https://stackoverflow.com/a/14745562/624466)，您实际上甚至可以省略类型转换`test.xml`。这对我也有效：

```
<?php
$url = "test.xml";
$xml = simplexml_load_file($url); 

foreach($xml->offers->offer as $offer) {
    echo ucfirst($offer->{"body-type"}) .'<br>';
} 
```

这是一个现场演示：[http ://codepad.viper-7.com/L4VwPL](http://codepad.viper-7.com/L4VwPL)

* * *

**更新（在 OP 提供 URL 之后）**

您很可能会遇到编码问题。当我明确设置 UTF-8 字符集时，它按预期工作（否则 simplexml 仅返回损坏的字符串）。

```
$url = "http://carsguru.net/x/used/exchange/4.xml";
$xml = simplexml_load_file($url); 

header('Content-Type: text/html; charset=utf-8');
foreach($xml->offers->offer as $offer) {
    echo ucfirst($offer->{"body-type"}) .'<br>';
} 
```

当我运行上面的代码片段时，我得到了这个输出（剥离）：

```
фургон
универсал
хэтчбек
хэтчбек
минивэн
минивэн
минивэн
седан
седан
универсал
хэтчбек
универсал
седан
хэтчбек
седан 
```

**注意**您不为 xml 提供内容类型/字符集标头！我会补充一点。

* * *

无论如何，你可能想看看这个：[iconv](http://www.php.net/manual/en/function.iconv.php) ->`iconv("cp1251", "UTF-8", $str);`

* * *

> 实际上文件编码是 Cyrillic windows-1251，这可能是有意义的。

为什么？当然，您可以使用有效的 UTF-8！[这是使用此 cp1251-to-utf8-function](http://www.php.net/manual/en/function.iconv.php#47499)转换的 XML 中的示例节点（可能看起来很奇怪，但呈现完美！）

```
<?xml version="1.0" encoding="UTF-8"?>
<auto-catalog>
    <creation-date>2013-02-07 02:00:08 GMT+4</creation-date>
    <host>carsguru.net</host>
    <offers>
        <offer type="commercial">
            <url>http://carsguru.net/used/5131406/view.html</url>
            <date>2013-02-07</date>
            <mark>&#1043;&#1040;&#1047;</mark>
            <model>2705</model>
            <year>2003</year>
            <seller-city>&#1057;&#1072;&#1085;&#1082;&#1090;-&#1055;&#1077;&#1090;&#1077;&#1088;&#1073;&#1091;&#1088;&#1075;</seller-city>
            <seller-phone>8-921-997-74-06</seller-phone>
            <price>150000</price>
            <currency-type>RUR</currency-type>
            <steering-wheel>&#1083;&#1077;&#1074;&#1099;&#1081;</steering-wheel>
            <run-metric>&#1082;&#1084;</run-metric>
            <run>194</run>
            <displacement>2300</displacement>
            <stock>&#1074; &#1085;&#1072;&#1083;&#1080;&#1095;&#1080;&#1080;</stock>
            <state>&#1061;&#1086;&#1088;&#1086;&#1096;&#1077;&#1077;</state>
            <color>&#1089;&#1080;&#1085;&#1080;&#1081;</color>
            <body-type>&#1092;&#1091;&#1088;&#1075;&#1086;&#1085;</body-type>
            <engine-type>&#1073;&#1077;&#1085;&#1079;&#1080;&#1085;</engine-type>
            <gear-type>&#1079;&#1072;&#1076;&#1085;&#1080;&#1081;</gear-type>
            <transmission>&#1088;&#1091;&#1095;&#1085;&#1072;&#1103;</transmission>
            <horse-power>98</horse-power>
            <image>http://carsguru.net/clf/03/af/9c/8b/used.4r9v39h31facog8cs0w0wk8ws.jpg.medium.jpg</image>
            <image>http://carsguru.net/clf/ae/51/be/3a/used.bxyc3q9mx80sko0wg80880w0k.jpg.medium.jpg</image>
            <image>http://carsguru.net/clf/28/dc/c1/d4/used.8i1b76l1b8o4cwg8gc08oos4s.jpg.medium.jpg</image>
            <image>http://carsguru.net/clf/55/3d/37/10/used.7dmn7puczuo0wo4cs8kko0cco.jpg.medium.jpg</image>
            <image>http://carsguru.net/clf/49/02/15/54/used.7k8lhomw4j4s4040kssk4kgso.jpg.medium.jpg</image>
            <equipment>&#1052;&#1072;&#1075;&#1085;&#1080;&#1090;&#1086;&#1083;&#1072;</equipment>
            <equipment>&#1055;&#1086;&#1076;&#1086;&#1075;&#1088;&#1077;&#1074; &#1079;&#1077;&#1088;&#1082;&#1072;&#1083;</equipment>
        </offer>
    </offers>
</auto-catalog> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:09:08.073

亲爱的请分享您的 xml 文件数据。我已经使用了以下，它工作正常..

```
<?xml version="1.0"?>
<data>
    <offers>
        <offer>
            <body-type>offer 1</body-type>
        </offer>
        <offer>
            <body-type>offer 2</body-type>
        </offer>
    </offers>
</data> 
```

我的输出是

```
Offer 1
Offer 2

HTML: Offer 1<br />Offer 2<br /> 
```

通过以下php代码..

```
<?PHP
$url = "test.xml";
$xml = simplexml_load_file($url); 

foreach($xml->offers->offer as $offer)
{
    $bodyType = (string) $offer->{"body-type"}; //I convert simplexml to string first  
    echo ucfirst($bodyType); // In this line ucfirst doesn't work
    echo '<br />';
}

?> 
```

# java - 在java中对仅包含0和1的数组进行排序

> ID：14745412
> 
> 赞同：-2
> 
> 时间：2013-02-07T06:58:19.500
> 
> 标签：java, sorting, data-structures

如何对数组进行排序

```
int[] A = {0,1,1,0,1,0,1,1,0} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-04T10:33:23.220

您实际上可以通过仅遍历数组一次来对该数组进行排序。

这是我的代码片段：

```
 int arr[] = {1,1,1,1,0,   0,1,0,1,1,1};
    int arrb[] = new int[arr.length];
    int zeroInsertIndex = 0;
    int oneInsertIndex =arrb.length-1;

    for(int i=0; i<arr.length; i++){
        if(arr[i] == 1) 
            arrb[oneInsertIndex--] = 1;
        else if (arr[i] == 0) 
            arrb[zeroInsertIndex++] = 0;
    }
    for(int i=0;i<arrb.length;i++)
        System.out.print(arrb[i] + " "); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T07:06:34.593

尽管 Arrays.sort 是一个明显、简单的 O(n log n) 解决方案，但对于这种特殊情况有一个 O(n) 解决方案：

1.  计算零的个数，zeroCount。
2.  用 0 填充第一个 zeroCount 元素，用 1 填充其余元素。

这只需要两次通过数组。

更一般地，任何只有少量不同值的数组都可以通过计算每个值出现的次数来排序，然后相应地填充数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T06:59:52.507

使用任何排序算法来做到这一点。对于初学者使用冒泡排序（易于理解）
参考[Wiki](http://en.wikipedia.org/wiki/Bubble_sort)

```
public static void bubble_srt( int a[], int n ){
  int i, j,t=0;
  for(i = 0; i < n; i++){
    for(j = 1; j < (n-i); j++){
      if(a[j-1] > a[j]){
        t = a[j-1];
        a[j-1]=a[j];
        a[j]=t;
      }
    }
  }
} 
```

**正如@Pradeep**
所说：您绝对可以使用 Array.sort()

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T07:00:09.950

您的数组仅包含 0 和 1，因此将数组中的所有元素相加，然后用最后的许多 '1' 重置数组，并在开头休息 '0'。时间复杂度也是 O(n)，空间恒定。所以这似乎是最好和最容易的。

```
 public static void main(String[] args) {
    int[] A = { 0, 1, 1, 0, 1, 0, 1, 1, 0 };
    int sum = 0;
    for (int i = 0; i < A.length; i++)
        sum = sum + A[i];

    Arrays.fill(A, A.length - sum, A.length, 1);
    Arrays.fill(A, 0, A.length - sum, 0);
    System.out.println(Arrays.toString(A));

  } 
```

试试这个我实现了上面的算法。

输出：

```
[0, 0, 0, 0, 1, 1, 1, 1, 1] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T07:00:42.243

您可以使用类中[`Arrays.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)的方法`Arrays`：

```
int[] A = {0,1,1,0,1,0,1,1,0};
Arrays.sort(A);
System.out.println(A); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T07:05:49.553

实际上，标准的现成排序算法通常适用于 O(n*log(n))。一旦添加了所有值（即 1 的数量），您就可以遍历数组。假设您将其放入`count1`. 然后再次遍历数组，将第一个`count1`位置设置为 1，将其余位置设置为 0。它需要 2n 步。

当然，正如其他发帖人所说：这种优化是你一旦检测到瓶颈就会做的事情，而不是在你开始时马上做的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T07:03:06.413

Arrays.sort(A,Collections.reverseOrder());

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-07T07:04:56.747

利用

```
 Arrays.sort(A); 
```

对数组进行排序的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-07T04:00:05.623

```
public class Test {
 public static void main(String[] args) {
    int[] arr = {0, 1, 0, 1, 0, 0, 1, 1, 1, 0};
    int start = 0;
    for (int i = 0; i < arr.length; i++) {
        if (arr[i] == 0) {
            arr[start] = 0;
            if (i != start) {  // should not override same value with 1
                arr[i] = 1;
            }
            start++;
        }
    }

    for (int i = 0; i < arr.length; i++) {
        System.out.print(arr[i] + " ");
    }
 }
} 
```

//复杂度是O(n)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-12T15:20:27.353

```
public static void sort(int a[]) {
        int sum=0;
        int b[]= new int [a.length];
        for(int i=0;i<a.length;i++) {
            sum=sum+a[i];
        }
        System.out.println(sum);
        int j=b.length-1;
        while(sum>0) {
            b[j]=1;
            sum--;
            j--;
        }

        System.out.println(Arrays.toString(b));

    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-27T07:39:46.217

```
Team 
Please consider the below program in Swift in o(n) time complexity and constant extra space.

import UIKit

var inputArray = [1,0,1,0,0,0,0,1,1,1,1,1,1]

var leftIndex: Int = 0
var rightIndex: Int = inputArray.count-1

while leftIndex < rightIndex{

    while inputArray[leftIndex] == 0 && leftIndex < rightIndex{
        leftIndex = leftIndex+1
    }

    while inputArray[rightIndex] == 1 && rightIndex > leftIndex {
        rightIndex = rightIndex-1
    }

    if leftIndex <  rightIndex{
        inputArray[leftIndex] = 0
        inputArray[rightIndex] = 1
        leftIndex = leftIndex+1
        rightIndex = rightIndex-1
    }
}

print(inputArray) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-19T11:02:09.227

使用以下代码对 0 和 1 数组进行排序：

```
public static int[] sortArray(int[] array){
        int first = 0;
        int last = array.length-1;
        while(first<last){
            if(array[first]==0){
                first++;
            }else if(array[last] == 0){
                int temp = array[last];
                array[last] = array[first];
                array[first] = temp;
                first++;
            }else{
                last--;
            }
        }
        return array;
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-16T08:50:12.163

你也可以这样试试

```
public static void main(String[] args) {
    int inputArray[] = { 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0 };
    formatInputArray(inputArray);

}

private static void formatInputArray(int[] inputArray) {
    int count = 0;
    for (int i = 0; i < inputArray.length; i++) {
        if (inputArray[i] == 0) {
            count++;
        }
    }
    // System.out.println(count);
    for (int i = 0; i < inputArray.length; i++) {
        if (i < count) {
            inputArray[i] = 0;
        }

        else {
            inputArray[i] = 1;
        }
    }
    for (int i = 0; i < inputArray.length; i++) {
        System.out.print(inputArray[i] + " , ");
    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-15T08:36:50.293

以下代码将对您的数组进行排序。请注意，它是这样做的——所以它会修改内存中的对象，而不是返回一个新对象。

**在 Python 中**

```
arr=[0,1,0,0,1,1,1,0,1,1,0]
arr.sort()
print(arr) 
```

**在 Java 中**

```
public class test{
public static void main(String[] args){
int[] arr= {0,1,0,0,1,1,1,0,1,1,0};
Arrays.sort(arr); 
System.out.println(Arrays.toString(arr));
}} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-23T13:13:56.897

```
var binaryArr = [1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,0,0,1,0,1,0,0,0,0];

//i - starting index
//j - ending index
function binarySort(arr){
   var i=0,j=arr.length-1;
   for(;i!=j;){
       if(arr[i] == 1){
           if(arr[j] == 0){
               arr[i] = 0;
               arr[j] = 1;
               j--;
               i++;
           } else {
               j--;
           }
       }else{
         i++;
       }
   }
}
binarySort(binaryArr); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-07-24T13:43:03.960

> 仅包含 0,1 和 2 的排序数组

```
import java.util.*;
public class HelloWorld {

static void sort012(int []a, int length) {
    int start = 0;
    int mid = 0;
    int end = length - 1;
    int temp;
    while(mid<=end) {
        switch(a[mid]) {
            case 0:
                temp = a[start];
                a[start] = a[mid];
                a[mid] = temp;
                start++;
                mid++;
                break;
            case 1:
                mid++;
                break;
            case 2: 
              temp = a[end];
                a[end] = a[mid];
                a[mid] = temp;
                end--;
                break;
        }

    }

}

 public static void main(String []args){
     Scanner sc = new Scanner(System.in);
     int n = sc.nextInt();

    int a[] = new int[n];
    for (int i =0;i<n; i++)
    a[i] = sc.nextInt();

     HelloWorld.sort012(a, n);
    // Print the sorted Array
    for (int i =0;i<n; i++)
    System.out.println(a[i]);

 }
 } 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-05-23T13:38:00.573

int[] a = {0,1,1,0,1,0,1,1,0}

在这里，我们使用 i 进行迭代，其中 i 从 1 开始。因此我们可以将之前的索引值与 i 的当前值进行比较。使用交换技术对数组进行排序。

**注意：**我们也可以使用 Sort/2 指针技术。

```
public int[] sort(int[] a){
  int temp=0;
  for(int i=1;i<a.length;i++){
   if( a[i-1] > a[i]){
    temp = a[i-1];
    a[i-1] = a[i];
    a[i] = temp;
  }
 }
return a[i];
} 
```

时间复杂度：O(n)

# iphone - 如图所示，如何实现 UIPickerView，并带有组件的标题？

> ID：14745417
> 
> 赞同：2
> 
> 时间：2013-02-07T06:58:42.867
> 
> 标签：iphone, ios, uipickerview

![在此处输入图像描述](../Images/97369b929d075d7ffb12e80411189c7b.png)

如何实现这样的选择器视图？我已经实现了所有必要的委托和数据源方法来填充数据，但我无法理解的是如何添加这个标题**成人**、**儿童**和**婴儿**？它们是静态的，不会随组件旋转！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-29T16:31:20.430

我只是使用 Interface Builder 完成了这项工作。

我创建了一个容器视图，然后将选择器视图放入其中。为了确保我的容器大小与选取器视图相同，我设置了空间限制：前导、尾随、顶部和底部。

然后我在选择器视图上方放置了 3 个标签（但它们仍然是容器的子视图）并将它们的框架设置为居中。

也为了实现与屏幕截图相同的标签视觉效果（它似乎在选择栏下），将标签的 alpha 降低到大约 0.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:06:30.683

您可以将标签放在特定的框架位置，然后将标签背景颜色设置为 clearColor。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T07:08:35.050

当您显示选择器视图时，将 3 个标签作为子视图添加到您的视图中，然后在选择器关闭时隐藏它们。

您必须将标签放置在表带上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:01:18.580

您需要添加标签作为选择器视图的子视图。UIPickerView 中没有内置任何功能来简化此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T07:09:11.487

创建您的选择器，创建一个带有阴影的标签，然后将其推送到 selectionIndicator 视图下方的选择器子视图。

它看起来像这样

```
UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(135, 93, 80, 30)] autorelease];
label.text = @"Label";
label.font = [UIFont boldSystemFontOfSize:20];
label.backgroundColor = [UIColor clearColor];
label.shadowColor = [UIColor whiteColor];
label.shadowOffset = CGSizeMake (0,1);
[picker insertSubview:label aboveSubview:[picker.subviews objectAtIndex:5]]; 
//When you have multiple components (sections)...
//you will need to find which subview you need to actually get under
//so experiment with that 'objectAtIndex:5'
//
//you can do something like the following to find the view to get on top of
// define @class UIPickerTable;
// NSMutableArray *tables = [[NSMutableArray alloc] init];
// for (id i in picker.subviews) if([i isKindOfClass:[UIPickerTable class]]) [tables addObject:i];
// etc... 
```

# ios - IOS不需要flash播放器，使用StageWebView打开包含flash内容的网站？

> ID：14745418
> 
> 赞同：1
> 
> 时间：2013-02-07T06:58:51.477
> 
> 标签：ios, flash, apache-flex, stagewebview

我有一个本机 Flash 应用程序，它像使用 StageWebView 的 Web 浏览器一样工作，我需要一种方法来打开包含 Flash 内容的网站，而无需安装 Flash 播放器（即我希望 adobe air 框架充当flash player 无需安装）。

我需要这个应用程序能够使用它在我的网络浏览器文件中构建的框架来运行位于任何网页中的 flash 文件。

如果这可行，它将解决 iPad/iPhone 的问题，因为它们没有 Flash 播放器。

我已经从 Android 设备中删除了 flash 插件和任何 flash 应用程序，并尝试运行多个 web 控件，但它们都无法运行 flash 元素。

如果有任何库或控件，免费软件或可以测试，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:10:56.480

你正在寻找的东西是不可能的。

它`StageWebView`使用 iOS 和 Android 上可用的本机浏览器组件，而不是它自己的引擎。由于 iOS 浏览器没有 Flash 插件，因此您的嵌入式浏览器也没有。（它在桌面上使用自己的引擎；我不确定插件支持。）

在 Android 上，您可以启用 Flash Player（如果可用），但您需要[请求硬件加速](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f-5d0f4f25128cc9cd0cb-7ffc.html#WS365a66ad37c9f5102ec8a8ba12f2d91095a-8000)。

# c# - WPF中的自定义消息框按钮

> ID：14745421
> 
> 赞同：4
> 
> 时间：2013-02-07T06:59:02.847
> 
> 标签：c#, .net, wpf

有没有办法自定义 WPF MessageBox 上的按钮，而不是“是”和“否”，我想要“输入”或“退出”或类似的东西。我搜索的所有网络都告诉它很难通过创建一个窗口来做到这一点，除了那些都是 3 或 4 岁的答案。现在有什么简单的方法可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:46:36.913

您可以自定义[WPF Toolkit Extende](http://wpftoolkit.codeplex.com/) [MessageBox](http://wpftoolkit.codeplex.com/wikipage?title=MessageBox&referringTitle=Home)。或者您可以使用 ACB 建议的自定义[WPFCustomMessageBox 。](https://github.com/evanwon/WPFCustomMessageBox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-06T13:58:13.370

我知道这是一个迟到的答案，但它可能很有用。

我需要同样的东西，我找到了这种方式，我想分享它。

我为此使用了一个窗口。

在我的窗口中，我有一个标题标签和另一个消息标签。

和三个按钮（或更多，如果需要）。

这是我的窗口：

```
<Window x:Class="CapronCAD.LIB.Controls.CapronMessageBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:CapronCAD.LIB.Controls"
    mc:Ignorable="d" Height="450" Width="800" WindowStyle="None" WindowStartupLocation="CenterOwner" WindowState="Minimized" ResizeMode="NoResize" ShowInTaskbar="False" AllowsTransparency="True" Background="Transparent">
<Grid x:Name="grdMessageBox" Background="#33000B4B">
    <Border BorderBrush="Black" BorderThickness="0" HorizontalAlignment="Center" Height="250" Margin="0" VerticalAlignment="Center" Width="600" Background="White" CornerRadius="5">
        <Grid>
            <Button x:Name="btnMessageBoxYes" FontWeight="SemiBold" Content="Oui" HorizontalAlignment="Right" VerticalAlignment="Bottom" Style="{DynamicResource ResourceKey=Capron_Violet_ButtonStyle}" Margin="0,0,30,30" Width="60" Click="btnMessageBoxYes_Click"/>
            <Button x:Name="btnMessageBoxNo" FontWeight="SemiBold" Content="Non" HorizontalAlignment="Right" VerticalAlignment="Bottom" Style="{DynamicResource ResourceKey=Capron_Violet_ButtonStyle}" Margin="0,0,103,30" Width="60" Background="#FFCFC9FF" Foreground="#FF6F5DF5" Click="btnMessageBoxNo_Click"/>
            <TextBlock x:Name="tbMessageBoxCaption" FontWeight="SemiBold" Margin="30,43,10,0" TextWrapping="Wrap" Text="-" VerticalAlignment="Top" FontFamily="Poppins" FontSize="14"/>
            <TextBlock x:Name="tbMessageBoxMessage" Margin="30,80,10,0" TextWrapping="Wrap" Text="-" VerticalAlignment="Top" FontFamily="Poppins"/>
            <Image x:Name="imgMessageBoxCancel" HorizontalAlignment="Right" Height="18" Margin="0,19,30,0" VerticalAlignment="Top" Width="18" Source="/CapronCAD.LIB;component/Resources/CloseBlack.png" MouseLeftButtonUp="imgMessageBoxCancel_MouseLeftButtonUp"/>
            <Button x:Name="btnMessageBoxClose" FontWeight="SemiBold" Content="Fermer" HorizontalAlignment="Center" VerticalAlignment="Bottom" Style="{DynamicResource ResourceKey=Capron_Violet_ButtonStyle}" Margin="0,0,0,30" Visibility="Collapsed" Click="btnMessageBoxClose_Click"/>
        </Grid>
    </Border>
</Grid> 
```

这是将窗口显示为对话框的简单方法：

```
 internal static System.Windows.Forms.DialogResult ShowCustomMessageBox(string message, string caption = "Default caption", bool dialog = true)
    {
        Controls.CapronMessageBox mb = new Controls.CapronMessageBox(caption, message, dialog);
        mb.Topmost = true;
        mb.WindowState = WindowState.Maximized;
        mb.ShowDialog();

        if (mb.DialogResult == null)
            return System.Windows.Forms.DialogResult.None;
        else if (mb.DialogResult == true)
            return System.Windows.Forms.DialogResult.Yes;
        else
            return System.Windows.Forms.DialogResult.No;
    } 
```

这是窗口后面的代码：

```
 public partial class CapronMessageBox: Window
{
    public CapronMessageBox(string caption, string message, bool dialog)
    {
        InitializeComponent();
        tbMessageBoxCaption.Text = caption;
        tbMessageBoxMessage.Text = message;
        if (!dialog)
        {
            btnMessageBoxClose.Visibility = Visibility.Visible;
            btnMessageBoxNo.Visibility = Visibility.Collapsed;
            btnMessageBoxYes.Visibility = Visibility.Collapsed;
        }
    }

    private void btnMessageBoxNo_Click(object sender, RoutedEventArgs e)
    {
        DialogResult = false;
    }

    private void imgMessageBoxCancel_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        this.Close();
    }

    private void btnMessageBoxYes_Click(object sender, RoutedEventArgs e)
    {
        DialogResult = true;
    }

    private void btnMessageBoxClose_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }
} 
```

我怎么称呼它：

```
 if (UserMethods.ShowCustomMessageBox("Do you want to save changes?", "Are you sure?", false) == DialogResult.Yes)
                {
                    btnSave_Click(btnSave, null);
                } 
```

看起来是这样的： [![在此处输入图像描述](../Images/e6dedbfc5f1dd8ce6569ef9f323ac829.png)](https://i.stack.imgur.com/rVlxT.png)

# ant - 使用 Ant 和 OJDeploy 部署 Jar 用于打包 ADF

> ID：14745423
> 
> 赞同：0
> 
> 时间：2013-02-07T06:59:07.430
> 
> 标签：ant, oracle-adf

我正在尝试从 ANT 脚本（使用 OjDeploy）部署 Jar 文件，该脚本编译成功。但是当我运行主项目（它具有 Jar 依赖项）时，我遇到了一个巨大的事件，当我分析事件日志时，它说

```
"Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist" 
```

我分析了两个 jar 文件（一个由 ANT 脚本生成，另一个由 Jdev 生成）。我找不到这两个罐子的黑白清单有任何区别。其他的文件夹也是一样的，也就是说，两者几乎是一样的，要不然我也搞不清生成的两个jar文件的区别。

我知道，我错过了一些东西，build.xml 的配置或其他东西，但无法找出确切的问题。

谢谢，

湿婆香卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:56:47.770

I figured out a way to solve the problem. Not sure what was the cause of this issue, but a couple of changes made both to JAR/EAR build scripts set the things right

While building JAR files:

1.  Uncheck "Make this the project build file" while creating the ANT build file, while the "Include Packaging Tasks (uses OjDeploy)" must be checked.
2.  Remove "nocompile" parameter from tag in the OjDeploy.

While Building EAR files:

1.  Create EAR in the view controller project.
2.  Go to the View Controller Project Properties-> Project Source Path -> Resources, remove the newly created build file dependency, which specifies that the build file is for the whole project and not for the individual project.
3.  Remove "Project" parameter from tag in the OjDeploy. (Ensures to build for the whole application)
4.  Remove "nocompile" parameter from tag in the OjDeploy.

These are the exhaustive set of changes, which I made to ensure the ANT files are building correctly, if you get any other errors after this EAR is deployed, then its definitely due to code, EO/VO or DB related.

Thanks for all the help!! Shiva Shankar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:13:08.883

我的猜测是问题不在 JAR 文件中，而是在使用它的项目中。似乎该项目中的数据库连接与您的 JAR 项目中的不同 - 这会导致无法找到数据库中所需的表之一。

# javascript - 使用 jquery1.3.2 插件的选取框的 javascript 代码

> ID：14745425
> 
> 赞同：0
> 
> 时间：2013-02-07T06:59:25.797
> 
> 标签：javascript, jquery

嘿伙计们，我有一种情况，我必须显示水平滚动文本，方向应该是从左边而不使用选取框标签。它应该只使用 jquery1.3.2.min.js 插件。

请帮助我。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:02:53.933

您可以使用 jQuery 动画 ( [http://api.jquery.com/animate/](http://api.jquery.com/animate/) )。您的元素需要绝对定位，并且您可以为 css left 属性设置动画。

# android - 我想从我的列表视图中获取数据，它显示来自数据库的信息，因为我希望这些数据自动绑定在文本字段中

> ID：14745428
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:59:42.843
> 
> 标签：android

我从我的 sql lite 数据库中获取数据，该数据库显示在列表视图中。现在，一旦用户单击列表视图，我希望自动获取所有详细信息，并且应该在文本字段中进行限制例如，假设我有一个客户列表数据库，其中包含名称区域地址移动和 id 作为主键. 现在，当我从我的应用程序中搜索名称为 john 时，列表视图将显示我数据库中所有 jhons 的一些选定详细信息。现在，一旦用户单击其中一个 jhon，我希望他的详细信息被限制在我的文本字段中。我希望我已经清除了我想要的东西。如果没有，请随意询问请任何人帮助我，提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:04:16.727

您使用什么代码从 listview 获取数据

为您的列表视图创建一个行 xml 绑定 baseAdapter 中的行并将该 baseadapter 设置为列表视图它将显示在列表视图中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:09:51.520

**编辑**

首先，确保您正确地创建了游标，也就是说，确保您将要访问的列通过正确的投影在查询语句中声明。ü

```
public static final String [] projection= {
    Database.Customers.Media._ID,       
    Database.Customers.Media.NAME,
    Database.Customers.Media.PHONE,
    Database.Customers.Media.EMAIL,
    Database.Customers.Media.ADDRESS,
}; 
```

通过查询传递：

```
Cursor cursor = mContentResolver.query(uri, projection, selection, selectionArgs, sortOrder); 
```

然后到适配器：

```
mAdapter = new YourCustomerAdapter(getActivity(),
                        R.layout.custom_list_view_layout, 
                        mCursor, 
                        from, to, 
                        SampleCursorAdapter.NO_SELECTION); 
```

如果您自定义适配器代码，您的 from 和 to 真的无关紧要。但是，如果您使用库存适配器，它们将限制您的数据。

客户绑定：

```
@Override
 public void bindView(View view, Context context, Cursor cursor) {
     ViewHolder mHolder = (ViewHolder) view.getTag();

     if (mHolder == null) {
         mHolder = new ViewHolder();
         mHolder.name= (TextView) view.findViewById(R.id.list_item_name);
         mHolder.phone = (TextView) view.findViewById(R.id.list_item_phone);
     }

     mHolder.name.setText(cursor.getString(1));
     mHolder.phone .setText(cursor.getString(2));

 } 
```

您要填充的 uiItems 越多，您将通过 onBind 初始化的越多，然后将光标数据关联到它们。

如果您尝试访问列索引或未在投影中定义的列，这意味着它不是游标的一部分，那么您将收到运行时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:34:10.783

试试这个：

```
my_listview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              

            }
        }); 
```

# websocket - 如何在 Dropwizard 中实现 websocket

> ID：14745430
> 
> 赞同：8
> 
> 时间：2013-02-07T06:59:48.343
> 
> 标签：websocket, dropwizard

我需要使用 dropwizard 项目实现 websocket。但是我找不到任何与之相关的文件。任何人都可以指出相同的资源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-02T08:05:11.663

我一直在处理同样的问题，并想分享我的解决方案： [http ://cvwjensen.wordpress.com/2014/08/02/websockets-in-dropwizard/](http://cvwjensen.wordpress.com/2014/08/02/websockets-in-dropwizard/)

我使用 Atmosphere 框架，该解决方案默认使用 websockets，但如果需要，可以降级为长轮询。

这应该足以让你开始......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T05:18:42.427

I'm looking to do this too. This is the best information I've found so far:

Supposedly one of the most popular websocket frameworks out there works well with Jersey (Jersey is bundled with Dropwizard). You can find more about it here: [https://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere)

Also, someone has published a repository integrating the two of them together: [https://github.com/mgutz/dropwizard-atmosphere/](https://github.com/mgutz/dropwizard-atmosphere/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T00:00:31.997

我通过包含 CometD 将 websockets 实现到 Dropwizard 项目中。

CometD 包含一个用于处理 WS 请求的 servlet，Dropwizard 公开环境以允许您注册任意 servlet。

我的应用程序（Groovy）的一小段摘录：

```
 environment.addServlet(new Initializer(httpClient, amqpConsumer), "/_initializer")
            .setInitOrder(2)

    environment.addServlet(AnnotationCometdServlet, "/cometd/*")
            .addInitParams([
            transports: 'org.cometd.websocket.server.WebSocketTransport',
            services: EventService.getCanonicalName(),
            jsonContext: 'org.cometd.server.JacksonJSONContextServer',
            maxSessionsPerBrowser: serviceConfiguration.maxBrowserSessions.toString(),
            maxInterval: '7200',
            logLevel: "2"
    ]).setInitOrder(1) 
```

如 CometD 教程中所示，初始化器 servlet 使事情变得简单。

# android - 你如何将 FragmentTabhost 放在底部

> ID：14745438
> 
> 赞同：4
> 
> 时间：2013-02-07T07:00:08.573
> 
> 标签：android, android-layout

我想像 iPhone App 一样将 tabwidget 放在底部。我知道这种布局违反了 Google UserInterface 指南，但我需要。

所以，我在 Stackoverflow 上读过很多类似的帖子。但每个帖子都不起作用。

我想使用 FragmentTabhost，而不使用外部库（例如：ActionBarsherlock

这是我的代码

```
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_above="@android:id/tabs" />

    <FrameLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_above="@android:id/tabs" />

    <TabWidget
        android:id="@+id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" />
</RelativeLayout> 
```

活动代码如下

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_top);

    //set up FragmentTabhost
    FragmentTabHost host = (FragmentTabHost)findViewById(R.id.tabhost);
    host.setup(this,getSupportFragmentManager(),R.id.content);

    //add tabspec
    TabSpec tabSpec1 = host.newTabSpec("tab1");
    Button btn1 = new Button(this);
    btn1.setBackgroundResource(R.drawable.icon1);
    tabSpec1.setIndicator(btn1);
    Bundle bundle1 = new Bundle();
    bundle1.putString("name", "tab1");
    host.addTab(tabSpec1,SampleFragment.class,bundle1);

    TabSpec tabSpec2 = host.newTabSpec("tab2");
    Button btn2 = new Button(this);
    btn2.setBackgroundResource(R.drawable.icon2);
    tabSpec2.setIndicator(btn2);
    Bundle bundle2 = new Bundle();
    bundle2.putString("name", "tab2");
    host.addTab(tabSpec2,SampleFragment1.class,bundle2);

} 
```

所以我尝试了另一种这样的布局

```
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0" />

    <TabWidget
        android:id="@+id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:orientation="horizontal" />

    <FrameLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

请帮我，

* * *

**注意** 最后我解决了这个问题。这是 SupportPackage 的错误.....

试试这个

[http://code.google.com/p/android/issues/detail?id=40035](http://code.google.com/p/android/issues/detail?id=40035)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:26:44.897

试试这个：

```
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TabWidget
    android:id="@android:id/tab"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" />

<FrameLayout
    android:id="@android:id/content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:11:37.683

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" />
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_weight="0"/>
    </LinearLayout>
</android.support.v4.app.FragmentTabHost> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-07T07:15:31.813

试试这个，遵循 XML 非常适合我。

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.app.FragmentTabHost  xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@android:id/tabhost"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</RelativeLayout>
</android.support.v4.app.FragmentTabHost> 
```

希望这会奏效。

# ios - 在 iOS 上使用字体属性时出现 Uibutton 字体对齐问题

> ID：14745439
> 
> 赞同：1
> 
> 时间：2013-02-07T07:00:08.870
> 
> 标签：ios, objective-c

设置 uibutton 属性时出现问题：

```
[self.btnName.titleLabel setFont:[UIFont fontWithName:@"gillsansstd" size:16.0]]; 
```

它会干扰文本对齐，文本显示按钮顶部。为什么setFont会干扰uibutton的文字对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:55:55.810

这就是你需要的。

```
[btnName.titleLabel setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter]; 
```

您可以垂直对齐按钮中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:04:22.270

以下代码设置标题对齐的中心（水平）`UIButton` 。

```
myButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter; 
```

**另一种方式**

```
[myButton.titleLabel setTextAlignment:UITextAlignmentCenter]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-07T12:26:40.907

从 xib 文件中选择 Edge Inset。

![在此处输入图像描述](../Images/38a065a9eefbfb444bd82752e11d0c3a.png)

![在此处输入图像描述](../Images/4698e94c11d96f7aca09ddb3d7432652.png)

# windows - 客户端配置设置

> ID：14745447
> 
> 赞同：3
> 
> 时间：2013-02-07T07:00:40.723
> 
> 标签：windows, wcf, configuration, client

我有一个调用 WCF 服务来构建特定 URL 的 Windows 应用程序。

从 Windows 应用程序调用的 WCF 函数接受数组形式的位置详细信息。

我面临一个问题，当发送到 WCF 函数的数组大小很小（例如 10）时，服务会返回正确的结果。

但是当数组大小增加（例如 >200）时，服务会返回 400 Bad request。

我不确定数组大小或数组内容是否会导致此问题。

我试图更改服务器（服务）端 web.config 以接受最大缓冲区大小。

```
<bindings>
<basicHttpBinding>
<binding name="BasicHttpBinding_IServiceContract" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" 

sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" 

maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" messageEncoding="Text" 

textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" 

maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>

</basicHttpBinding>
</bindings>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
            <httpRuntime executionTimeout="90" maxRequestLength="1048576" useFullyQualifiedRedirectUrl="false" 

minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="100" />
  </system.web> 
```

我仍然面临同样的问题。

在客户端（这里是 windows 应用程序）我们如何设置配置设置，以便客户端能够将大数据发送到服务器端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:04:04.497

您需要在服务器配置文件和客户端配置文件中增加 Reader Quota。

```
<readerQuotas maxDepth="2147483647" 
maxStringContentLength="2147483647" 
maxArrayLength="2147483647" 
maxBytesPerRead="2147483647" 
maxNameTableCharCount="2147483647" /> 
```

和 maxReceivedMessageSize 和 bufferSize：

```
<httpTransport transferMode="Buffered"
maxReceivedMessageSize="2147483647"
maxBufferSize="2147483647"/> 
```

您可能还需要将 dataContractSerializer 添加到您的服务行为中。

```
<serviceBehaviors>
<behavior name="Your SB">
<serviceMetadata httpGetEnabled="True"/>
<dataContractSerializer maxItemsInObjectGraph="2147483647" />
<serviceDebug 
includeExceptionDetailInFaults="False" />
</behavior>
</serviceBehaviors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:42:47.320

您需要在客户端进行更改。更改`maxBufferSize`和`maxReceivedMessageSize`。我昨天遇到了类似的问题，并通过将这些值重置为更高的值来修复它。

注意：实际上我没有对服务（服务器）进行任何更改。

# c++ - 使用不同的预处理器宏在同一源树上构建多个目标

> ID：14745449
> 
> 赞同：3
> 
> 时间：2013-02-07T07:00:52.393
> 
> 标签：c++, build, makefile, cmake, scons

尽管在很长一段时间内进行了大量的谷歌搜索和实验，但我对**make**和**autotools**的了解（我还没有用于这个项目）充其量只是初级知识。我有一个像下面这样的源层次结构，我试图找到尽可能无缝地构建的方法。

该应用程序由一个主应用程序组成，其源代码位于 app/src 下的各个子文件夹中。这些是使用该文件夹根目录中的相应 Makefile 构建的。

然后我有多个其他实用程序，它们驻留在 app/tools 下的不同文件夹中，每个文件夹都有自己的 Makefile。

```
app/src/module1/file1.cpp
app/src/module1/file1.hpp
app/src/module2/file2.cpp
app/src/module2/file2.hpp
app/src/module3/file3.cpp
app/src/module3/file3.hpp
app/src/main.cpp
app/src/main.hpp
app/src/Makefile
app/tools/util1/file1.cpp
app/tools/util1/file1.hpp
app/tools/util1/Makefile
app/tools/util2/file2.cpp
app/tools/util2/file2.hpp
app/tools/util2/Makefile 
```

对我来说，问题是其中一些工具依赖于 app/src 源文件夹中的源文件，但启用了预处理宏 EXTERNAL_TOOL。所以编译主应用程序生成的目标文件和各种实用程序不兼容。

目前要构建项目的每个部分，我必须清理其间的源代码树。这很痛苦，而且肯定不是我最终想要的。解决这个问题的最佳方法是什么？我曾经有但无法付诸实践的想法是：

1.  项目每个部分的单独构建目录
2.  在构建外部工具时，以某种方式在主应用程序源树中标记它们的目标文件（util.file1.o？）

我不太确定我是否有时间和耐心来掌握 make / autotools。其他构建工具之一（scons？cmake？）是否可以使这种任务更容易完成？如果有，是哪一个？

**更新：**这就是我现在所拥有的

```
SOURCES := util1.cpp util2.cpp util3.cpp \
    ../../src/module1/file1.cpp \
    ../../src/module1/file2.cpp \
    ../../src/module1/file3.cpp \
    ../../src/module2/file4.cpp \
    ../../src/module3/file5.cpp \
    ../../src/module3/file6.cpp \
    ../../src/module4/file7.cpp \
    ../../src/module4/file8.cpp \
    ../../src/module3/file9.cpp \
    ../../src/module4/file10.cpp \
    ../../src/module5/file11.cpp \
    ../../src/module3/file12.cpp \
    ../../src/module1/file13.cpp \
    ../../src/module3/file14.cpp \
    ../../src/module3/file15.cpp

OBJECTS = $(join $(addsuffix .util/, $(dir $(SOURCES))), $(notdir $(SOURCES:.cpp=.o)))

.PHONY: all mkdir
all: util
util: $(OBJECTS)
    $(CXX) $(CXXFLAGS) $(OBJECTS) $(LIBS) -o util

$(OBJECTS): | mkdir
    $(CXX) -c $(CXXFLAGS) -o $@ $(patsubst %.o,%.cpp,$(subst .util/,,$@))

mkdir:
    @mkdir -p $(sort $(dir $(OBJECTS)))

clean:
    -@rm -f $(OBJECTS) util
    -@rmdir $(sort $(dir $(OBJECTS))) 2>/dev/null 
```

我是在广泛搜索 SO 浏览后发现的。这似乎可行，但这部分看起来并不是特别好（感觉有点像黑客）：

```
$(OBJECTS): | mkdir
    $(CXX) -c $(CXXFLAGS) -o $@ $(patsubst %.o,%.cpp,$(subst .util/,,$@)) 
```

特别是我不太热衷于我之前从源创建对象列表并添加后缀的事实，只是在这里做相反的事情。我似乎无法让它以任何其他方式工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:21:00.340

CMake 有`add_definitions`和`remove_definitions`命令。您可以使用它们为项目的不同部分定义宏：

```
# building tools #
add_definitions(-DEXTERNAL_TOOL)
add_subdirectory($TOOL1$ $BUILD_DIR$)
add_subdirectory($TOOL2$ $BUILD_DIR$)
...

# building main app #
remove_definitions(-DEXTERNAL_TOOL)
add_executable(...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T10:02:55.237

这可以通过 SCons 轻松完成。对于使用不同的预处理器宏构建的对象，您肯定需要一个构建目录层次结构。在 SCons 术语中，创建这样的构建目录称为 variant_dir。我会推荐以下 SCons 分层构建结构：

```
app/SConstruct
app/src/module1/file1.cpp
app/src/module1/file1.hpp
app/src/module2/file2.cpp
app/src/module2/file2.hpp
app/src/module3/file3.cpp
app/src/module3/file3.hpp
app/src/main.cpp
app/src/main.hpp
app/src/SConscript_modules
app/src/SConscript_main
app/tools/util1/file1.cpp
app/tools/util1/file1.hpp
app/tools/util2/file2.cpp
app/tools/util2/file2.hpp
app/tools/SConscript
app/build/main/
app/build/target1/modules/
app/build/target2/modules/
app/build/tools/utils/ 
```

为了能够使用不同的预处理器宏构建相同的源文件，您需要使用多个不同的环境构建相同的文件。这些环境可以在 src/module SConscript 脚本中设置，或者从根 SConstruct 设置并传递下来。我更喜欢第二种选择，因为它会使 src/module SCons 脚本模块化，并且不知道（不可知）预处理器宏。

这是根构建脚本，它创建不同的环境并编排子目录构建脚本：

应用程序/SConstruct

```
defines1 = ['MACRO1']
defines2 = ['MACRO2']

env1 = Environment(CPPDEFINES = defines1)
env2 = Environment(CPPDEFINES = defines2)

includePaths = [
  'src/module1',
  'src/module2',
  'src/module3',
]
env1.Append(CPPPATH = includePaths)
env2.Append(CPPPATH = includePaths)

# Build different versions of the module libs
SConscript('src/SConscript_modules',
           variant_dir = '#build/target1/modules',
           exports = {'env':env1},
           duplicate=0)
SConscript('src/SConscript_modules',
           variant_dir = '#build/target2/modules',
           exports = {'env':env2},
           duplicate=0)

# Build main with env1
SConscript('src/SConscript_main',
           variant_dir = '#build/main',
           exports = {'env':env2},
           duplicate=0)

# Build tools with env2
SConscript('tools/SConscript',
           variant_dir = '#build/utils',
           exports = {'env':env2},
           duplicate=0) 
```

这是主 app/src/SConscript_main 的构建脚本

```
Import('env')

sourceFiles = ['main.cpp']
# If you want to modify the env here, Clone() it first, otherwise
# the changes will be visible to all other SConscripts
env.Program(target = 'main', source = sourceFiles) 
```

这是模块库的构建脚本，它将被调用两次，每次使用不同的 env app/src/SConscript_modules

```
Import('env')

module1SourceFiles = ['file1.cpp']
module2SourceFiles = ['file2.cpp']
module3SourceFiles = ['file3.cpp']

# If you want to modify the env here, Clone() it first, otherwise
# the changes will be visible to all other SConscripts
env.Library(target = 'module1', source = module1SourceFiles)
env.Library(target = 'module2', source = module2SourceFiles)
env.Library(target = 'module3', source = module3SourceFiles) 
```

# windows - 批处理文件未通过 Windows 7 任务计划程序运行

> ID：14745456
> 
> 赞同：-1
> 
> 时间：2013-02-07T07:01:22.600
> 
> 标签：windows, batch-file, scheduled-tasks, batch-processing

我有一个批处理文件，它执行一个从后端获取文件（pdf）并保存在本地的 php 脚本。我已经尝试通过命令提示符执行批处理文件，并且效果很好。

但是当我设置一个 Windows 任务计划程序来运行这个批处理时，它不起作用。命令提示符窗口弹出并显示很多不可读的字符并挂在那里。

我还选择了蝙蝠以最高权限运行的选项，但没有区别。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:44:43.357

我的错。设法解决它。php 的路径设置不正确。

现在好了。

# php - 从字符串 php 中提取顶级域

> ID：14745458
> 
> 赞同：10
> 
> 时间：2013-02-07T07:01:23.707
> 
> 标签：php, string

我需要从可以是任何字符串的字符串中提取域名。如：

```
$sitelink="http://www.somewebsite.com/product/3749875/info/overview.html"; 
```

或者

```
$sitelink="http://subdomain.somewebsite.com/blah/blah/whatever.php"; 
```

无论如何，我希望提取“somewebsite.com”部分（可以是任何内容），并丢弃其余部分。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T07:03:28.293

使用[parse_url($url)](http://php.net/manual/en/function.parse-url.php)

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';

print_r(parse_url($url));
?>

The above example will output:

Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
) 
```

使用这些值

```
echo parse_url($url, PHP_URL_HOST); //hostname 
```

或者

```
$url_info = parse_url($url);
echo $url_info['host'];//hostname 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T07:06:02.497

这里是

```
<?php

$sitelink="http://www.somewebsite.com/product/3749875/info/overview.html";

$domain_pieces = explode(".", parse_url($sitelink, PHP_URL_HOST));

$l = sizeof($domain_pieces);

$secondleveldomain = $domain_pieces[$l-2] . "." . $domain_pieces[$l-1];

echo $secondleveldomain; 
```

请注意，这可能不是您正在寻找的行为，因为对于像这样的主机

```
stackoverflow.co.uk 
```

它会回显“co.uk”

* * *

看：

[http://publicsuffix.org/learn/](http://publicsuffix.org/learn/)

[http://www.dkim-reputation.org/regdom-libs/](http://www.dkim-reputation.org/regdom-libs/)

[http://www.dkim-reputation.org/regdom-lib-downloads/](http://www.dkim-reputation.org/regdom-lib-downloads/) <-- 在这里下载，包括 php

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-23T01:25:19.847

2 复杂的网址

```
$url="https://www.example.co.uk/page/section/younameit";
or
$url="https://example.co.uk/page/section/younameit"; 
```

要获得“www.example.co.uk”：

```
$host=parse_url($url, PHP_URL_HOST); 
```

仅获取“example.co.uk”

```
$parts = explode('www.',$host);
$domain = $parts[1];

// ...or...

$domain = ltrim($host, 'www.') 
```

如果您的网址包含“www”。或者您是否得到相同的最终结果，即“example.co.uk”

瞧！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-01T14:49:19.380

您需要使用[Public Suffix List](https://publicsuffix.org/)的软件包，只有这样您才能正确提取具有二级、三级 TLD（co.uk、a.bg、b.bg 等）和多级子域的域。正则表达式、parse_url() 或字符串函数永远不会产生绝对正确的结果。

我建议使用[TLD Extract](https://github.com/layershifter/TLDExtract)。这里的代码示例：

```
$extract = new LayerShifter\TLDExtract\Extract();

$result = $extract->parse('http://www.somewebsite.com/product/3749875/info/overview.html');
$result->getSubdomain(); // will return (string) 'www'
$result->getHostname(); // will return (string) 'somewebsite'
$result->getSuffix(); // will return (string) 'com'
$result->getRegistrableDomain(); // will return (string) 'somewebsite.com' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-27T11:07:42.327

对于可以是任何东西的字符串，新方法：

```
function extract_plain_domain($text) {

    $text=trim($text,"/");
    $text=strtolower($text);

    $parts=explode("/",$text);
    if (substr_count($parts[0],"http")) {
        $parts[0]="";
    }
    reset ($parts);while (list ($key, $val) = each ($parts)) {
            if (!empty($val)) { $text=$val; break; }
    }

    $parts=explode(".",$text);
    if (empty($parts[2])) {
        return $parts[0].".".$parts[1];
        } else {
        $num_parts=count($parts);
        return $parts[$num_parts-2].".".$parts[$num_parts-1];
        }

} // end function extract_plain_domain 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-22T07:45:37.507

您可以使用 Utopia Domains 库（[https://github.com/utopia-php/domains](https://github.com/utopia-php/domains)），它会根据 Mozilla 公共后缀列表（[https://publicsuffix.org](https://publicsuffix.org)）返回域 TLD 和公共后缀，它可以用作当前存档的 TLDExtract 包的替代方案。

您可以使用“parse_url”函数从您的 URL 中获取主机名，然后使用 Utopia Domains 解析器获取正确的 TLD 并将其与域名一起加入：

```
<?php

require_once './vendor/autoload.php';

use Utopia\Domains\Domain;

$url = 'http://demo.example.co.uk/site';

$domain = new Domain(parse_url($url, PHP_URL_HOST)); // demo.example.co.uk

var_dump($domain->get()); // demo.example.co.uk
var_dump($domain->getTLD()); // uk
var_dump($domain->getSuffix()); // co.uk
var_dump($domain->getName()); // example
var_dump($domain->getSub()); // demo
var_dump($domain->isKnown()); // true
var_dump($domain->isICANN()); // true
var_dump($domain->isPrivate()); // false
var_dump($domain->isTest()); // false

var_dump($domain->getName().'.'.$domain->getSuffix()); // example.co.uk 
```

# ruby - 红宝石 rvm 要求

> ID：14745459
> 
> 赞同：0
> 
> 时间：2013-02-07T07:01:27.810
> 
> 标签：ruby, rvm, osx-mountain-lion, homebrew

运行 rvm 要求说我需要 brew install 所有这些

```
# For ruby:
brew install autoconf automake apple-gcc42 libtool 
pkg-config openssl readline libyaml sqlite libxml2 libxslt libksba 
```

我怎么知道我的电脑上是否已经有了这些，我不会再浪费空间下载它们了？`brew install sqlite`例如，如果我会覆盖计算机上已经存在的 sqlite 或安装另一个副本，我知道山狮带有 sqlite吗？我正在运行 Mac 10.8.2，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:47:23.063

它不会卸载任何东西。Brew 将其包分开并创建符号链接到`/usr/local`. 您可以运行`whereis autoconf`,`whereis sqlite`等以确保在环境中安装并正确加载了所需的软件包，然后使用 homebrew 安装其余的。虽然你的旧包应该足够了，但如果 ruby​​ 安装失败，你应该使用自制软件来安装所有东西，因为它将确保所有包都是兼容的。

# javascript - 是否可以通过用户脚本检测页面修改？

> ID：14745460
> 
> 赞同：0
> 
> 时间：2013-02-07T07:01:38.587
> 
> 标签：javascript, web-applications, greasemonkey, userscripts

如果您有一个网站，您能否以某种方式找出访问者是否正在使用 javascript 用户脚本修改您的网站？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:12:19.473

简而言之：EEEEEEK！不要这样做！相反，决定什么*需要*保护，然后保护*那个*。不惜一切代价避免轮询（定期检查）。特别是，避免对任何东西进行定期的重检查。

* * *

并非每个更改都可以跟踪。大多数变化都很难跟踪，因为有很多事情可以改变。

可以检测到对 DOM 的更改（新节点、删除的节点、更改的属性）。另一个答案建议`innerHTML`定期检查，但最好使用[突变观察者](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)（Firefox、Chrome 支持）或较旧的突变事件（`DOMSubtreeModified`等）（支持因事件而异）。

无法可靠地检测到标准方法的更改，除非手动比较*每个方法*和属性 (eeeek)。这包括需要引用大量对象，例如`Array.prototype.splice`（当然还有），并定期运行`Array`繁重*的*脚本。但是，这不是用户脚本通常所做的。`Array.prototype`

 *输入的状态是属性，而不是属性。这意味着文档 HTML*不会*改变。如果状态被脚本改变，`change`事件也不会触发。同样，唯一的解决方案是手动轮询*每个输入*（eeek）。

没有可靠的方法来检测是否附加了事件处理程序。对于初学者，您需要保护`onX`属性（第 2 段），检测对`addEventListener`(ek) 的任何调用（不触​​发第 2 段检查），检测您的库（`jQuery.bind`以及其他几个）对相应方法的任何调用。

* * *

~~*对您有利的一*件事，并且可能是唯一的一件事：用户脚本在页面加载时运行（永远不会更快），因此您有足够的时间来准备防御。~~ [甚至没有对您有利](http://developer.chrome.com/extensions/content_scripts.html#run_at)（感谢 Brock Adams 的注意和链接）

您可以通过将其替换为您自己的 (ek) 来检测已调用的标准方法。您需要以这种方式（eek）检测许多方法，一些通过浏览器，一些通过您的框架。IE（甚至可以指示Firefox，感谢@Brock）*不会*让您触摸DOM类的原型这一事实在“eek”中添加了另一个“e”或两个。某些方法只能通过方法调用（返回值，回调参数）获得的事实增加了另一个“e”或两个，总共“eeeek”。爬过整个的想法`window`将被安全异常和无法捕获的安全异常所挫败。也就是说，除非您不使用 iFrame 并且您不在 iFrame 中。

即使您检测到每个方法调用，也可以通过写入`innerHTML`. Firefox 和 Chrome 支持 Mutation Observers，因此您可以使用它们。

即使您检测到对预先存在的方法的每个方法调用并监听突变，大多数属性都不会被两者反映，因此您还需要观察每个对象的所有属性。祈祷某人不要使用您永远猜不到的键添加不可枚举的属性。顺便说一句，这也会捕获 DOM 突变。在 ES6 中，可以观察对象的属性集。我不确定您是否可以将设置器附加到 ES5 中的现有对象属性（同时遵守 ES3 语法）。轮询每个属性是eeeek。

当然，您应该允许*自己的*脚本进行一些更改。工作流程是设置一个标志（不能从全局范围访问！）“我是合法的”，做你的工作，并清除标志 - 记住也要在你的所有回调的两侧。然后方法观察者将检查标志是否设置。属性看门狗将更难检测更改是否有效，但可以从脚本通知每个合法更改（手动；再次确保用户脚本看不到该通知流）。哎呀。

起初我没有意识到一个完全不同的问题：用户脚本在页面加载时*运行*，但它们也可以创建 iFrame。用户脚本会：1）检测您的脚本阻止程序，2）从轨道上删除页面（您无法阻止，至少在没有严重篡改的情况下*无法*阻止），3）插入一个具有原始 URL 的单个 iframe（防止双重加载服务器端？）和 4）有足够的时间在您的保护加载之前对该空 iframe 采取行动。`document.body.innerHTML =``document.body`

另外，请参阅[Brock Adams 找到的副本](https://stackoverflow.com/questions/8548141/can-a-website-know-if-i-am-running-a-userscript)，其中显示了我认为不应该进行的其他几项检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:06:40.770

如果您自己没有脚本来更改您的内容，那么您可以将 document.body.innerHTML 和 document.head.innerHTL 与原来的内容进行比较。

当您在脚本中更改 DOM 时，您可以更新值以进行比较。使用 setInterval 定期比较。*

# iphone - 无法在 iOS 6.0.1 设备上安装应用程序

> ID：14745463
> 
> 赞同：1
> 
> 时间：2013-02-07T07:01:48.237
> 
> 标签：iphone, ios6

我用 xcode 4.5 开发 iphone 应用程序。我使用 TestFlight 进行临时测试。将构建 (.ipa) 上传到 TestFlight 并获取安装链接时。我可以使用 TestFlight 安装链接在我的 iPad 5.0.1 上安装应用程序。但我试图在 iPhone 6.0.1 上安装应用程序，它给了我错误消息。“不会安装此应用程序”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:03:52.360

问题是 XCode 4.5 不支持 iOS 6.0.1。因此，您的 .ipa 文件未安装在装有 iOS 6.0.1 的设备中。解决方案是将您的 XCode 更新到最新版本，即 4.6。它会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:18:12.357

还有另一种解决方案。

## 问题

问题是新操作系统不包含旧 Xcode 加载调试信息的正确信息，而此信息只能由最新的 Xcode 获得。

## 解决方案

1.  安装最新的 Xcode（目前是 Xcode 4.6，你可以从 Mac AppStore 获得）。
2.  在新的 Xcode 打开时连接您的设备。（无论是先打开 Xcode 还是先连接您的设备）
3.  按**⌘ + Shift + 2**打开 Xcode 管理器，如果管理器不在设备选项卡中，请单击设备图标
4.  等下看到你的 iOS 6.0.1（甚至是 iOS 6.0、iOS 6.1.1）的设备**变成绿色**
5.  现在你的新操作系统有足够的旧 Xcode 调试信息
6.  将此设备连接到您的旧 Xcode 4.5。您应该无法将应用程序发送到设备。

## 一些缺点

1.  您的系统将有 2 个 Xcode，如果您的旧 Xcode 也是从 Mac AppStore 安装的，您需要从开发人员中心下载新的 Xcode。
2.  安装新 Xcode 后，您的命令行工具通常使用新 Xcode 作为默认开发工具。用于`xcode-select`切换到旧 Xcode 的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:18:29.580

请检查该设备的 udid id，或再次包含 udid 并下载新配置文件，然后使用该配置文件存档。只是因为udid

# php - 限制照片上传字段的想法

> ID：14745464
> 
> 赞同：0
> 
> 时间：2013-02-07T07:01:48.583
> 
> 标签：php, html, mysql, image

我有一个包含 10 个照片上传字段的表单。我想做的是限制10张照片上传。通常在您上传 10 张照片之后，这 10 个字段将再次出现。但这一次我想限制它。例如，有 10 个上传字段，上传 5 张照片后，将只剩下 5 个字段。如果你删除一张照片，那里会出现 6 个字段。现在，我`select count(*)`用来计算 MySql 表中的行数，我正在使用：

```
if ($rownumber == 4) { 
    "show 6 fields" 
} 
```

有没有其他方法可以做到这一点？我现在使用的方法非常复杂，并且使用代码很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:09:05.933

为什么有很多代码？

```
$maxuploadslots = 10;
for($i=0; $i<$maxuploadslots; $i++)
{
    if($i < $rownumber)
        continue;
    echo "<input...."; // I believe you add them this way, right?
    // that is "ADD 1 FIELD"
} 
```

for 循环将运行十次，每次它检查上传的图像计数是否 i 小于行号它不会添加新行，否则它会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:25:22.737

对于名称，您可以连接一个变量，也可以将名称作为数组输入。

# windows-runtime - Windows 运行时组件 C++ Windows Phone 8

> ID：14745467
> 
> 赞同：1
> 
> 时间：2013-02-07T07:02:16.053
> 
> 标签：windows-runtime, windows-phone-8

我正在尝试使用 Windows 运行时组件，我想在 Windows Phone 8 C# 中运行 C++。

我可以返回整数、双精度、浮点数、布尔值，但不能返回 char 字符串或使用 void 函数。我在构建解决方案时收到此消息：

错误 3 错误 C3992：“getChar”：公共成员的签名包含无效类型“char”

我可以创建 void 函数并且它可以编译，但我不能在我的 C# 代码中使用它。

我也想在 C++ 中创建对象并在 Windows Phone 8 中使用它。

我不知道我的问题是否清楚，但我希望有人理解我想做什么，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T22:41:28.803

我不清楚您到底要做什么，但 C++/CX 中仅支持某些类型

见这里：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh755822.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh755822.aspx)

和

[http://msdn.microsoft.com/en-us/library/windows/apps/hh700121.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700121.aspx)

# asp.net-mvc-4 - ASP.NET MVC4 n 层架构：最佳方法

> ID：14745474
> 
> 赞同：4
> 
> 时间：2013-02-07T07:03:04.580
> 
> 标签：asp.net-mvc-4, entity-framework-5, n-tier-architecture

我为 MVC4 webapp + EntityFramwork5 开发了一个 3 层架构。我想保持单独的层，所以只有 DAL 知道我正在使用 EF，例如。

实际上我有很多课程来管理它：

**达尔**

1.  实体 POCO
2.  实体数据上下文：DbContext
3.  实体库

**提单**

1.  实体视图模型
2.  实体服务（实例化实体存储库）

**网络**

1.  实体控制器（实例化实体服务）

这是有效的，但很难维持。我正在考虑删除 DAL 中的实体存储库并直接使用 DataContext（如果我没记错的话，毕竟 DbContext 已被设计为存储库和工作单元），但这将迫使我添加对我的 BL 中的 EntityFramework.dll。不是什么大问题，但我不确定它是否是最佳选择。

有什么建议吗？

（我希望我提供了足够的信息，如果您需要更多信息，请询问）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:12:13.763

你可以使用[这个](http://www.codeproject.com/Articles/70061/Architecture-Guide-ASP-NET-MVC-Framework-N-tier-En) 和[这篇](http://www.codeproject.com/Articles/434282/A-N-Tier-Architecture-Sample-with-ASP-NET-MVC3-WCF)[文章](http://forums.asp.net/t/1669618.aspx/1)。

> ```
> An experienced Architect does not need to go through every single step in the book to get a reasonable design done for a small web 
> ```
> 
> 应用。这样的架构师可以利用他们的经验来加速这个过程。由于我之前做过类似的 Web 应用程序并且理解了我的可交付成果，我将采用更快的方法来完成我们 DMS 设计的初始部分。这有望帮助我缩短本文的篇幅。
> 
> ```
> For those who do not have experience, let me briefly mention the general steps that involved in architecturing a software below...
> 
> Understand the initial customer requirement - Ask questions and do research to further elaborate the requirement
> Define the process flow of the system preferably in visual (diagram) form. I usually draw a process-flow diagram here. In my 
> ```
> 
> 努力，我会尝试首先定义系统的手动版本，然后尝试将其转换为自动化版本，同时识别流程及其关系。我们在这里绘制的这个流程图也可以用作与客户一起验证捕获的需求的媒介。确定适合您需求的软件开发模型 在设计开始之前完全捕获和定义需求时，您可以使用“瀑布”模型。但是当需求未定义时，可以使用“Spiral”的变体来处理它。当需求没有定义时，系统在设计时就被定义了。在这种情况下，您需要在各个模块中保留足够的空间，以便以后进行扩展。决定使用什么架构。就我而言，为了设计我们的文档管理系统 (DMS)，我将使用 ASP.NET MVC 和多层架构（三层变体）的组合。分析系统并识别其模块或子系统。
> 一次选择一个子系统并进一步分析它并确定属于该系统部分的所有细粒度级别的需求。识别数据实体并定义实体之间的关系（实体关系图或 ER 图）。随后可以识别业务实体（一些业务实体直接映射到系统的类）并定义业务流程。组织你的实体。这是您规范数据库的地方，并决定要使用的 OOP 概念和设计模式等。
> 使您的设计保持一致。在所有模块和层中遵循相同的标准。这包括简化概念（例如，如果您在两个不同的模块中使用了两种不同的设计模式来实现相同的目标，那么选择更好的方法并在两个地方都使用），以及项目中使用的约定。调整设计是该过程的最后一部分。为此，您需要与项目团队开会。在那次会议上，您需要向您的团队展示您的设计并让他们提出问题。以此为契机，诚实地评估/调整您的设计。

# select - 如何使用xpath按列标题名称选择表列

> ID：14745478
> 
> 赞同：13
> 
> 时间：2013-02-07T07:03:21.320
> 
> 标签：select, xpath

我有一个结果表，如下所示：

```
<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Type</th>
      <th>Amount</th>
      <th>Price</th>
      <th>Name</th>
      <th>Expiration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>123</td>
      <td>Paper</td>
      <td>10 pcs.</td>
      <td>$10</td>
      <td>Premium Copier paper</td>
      <td>None</td>
    </tr>
    <tr>
      <td>321</td>
      <td>Paper</td>
      <td>20 pcs.</td>
      <td>$20</td>
      <td>Extra Copier paper</td>
      <td>None</td>
    </tr>
  </tbody> 
```

我想用 xpath 按其名称选择整个列，例如，`{<td>$10</td>, <td>$20</td>}`如果按列名“价格”选择，我希望返回的结果是一个数组。我是 xpath 的新手，不太确定如何执行此操作，但我很确定这是可能的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T06:52:19.843

好的，我找到了足够的答案并且看起来很优雅。这是所需的 XPath 字符串：

```
//table/tbody/tr/td[count(//table/thead/tr/th[.="$columnName"]/preceding-sibling::th)+1] 
```

输入列的名称而不是 $columnName。这对我很有效。没有 XSL 或任何东西，只有纯 xpath 字符串。如何应用它 - 这是另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:25:04.517

你可以使用这个 XPath：

```
/table/tbody/tr/td[count(preceding-sibling::td)+1 = count(ancestor::table/thead/tr/th[.='Price']/preceding-sibling::th)+1] 
```

我认为测试相关位置的位置（）`position()`会起作用，但在我测试时似乎没有。`td``th`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T05:19:20.490

如果您找到了解决方案，我建议您将其作为答案发布在这里，但只是为了好玩，这就是我的处理方式：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:key name="kCol" match="td" use="count(. | preceding-sibling::td)"/>
  <xsl:param name="column" select="'Price'" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <found>
      <xsl:apply-templates select="table/thead/tr/th" />
    </found>
  </xsl:template>

  <xsl:template match="th">
    <xsl:if test=". = $column">
      <xsl:apply-templates select="key('kCol', position())" />
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

当以“价格”作为参数值运行时：

```
<found>
  <td>$10</td>
  <td>$20</td>
</found> 
```

以“名称”作为参数值运行时：

```
<found>
  <td>Premium Copier paper</td>
  <td>Extra Copier paper</td>
</found> 
```

# linux - 如何使用 awk 将增量字符串添加到文件的开头

> ID：14745489
> 
> 赞同：1
> 
> 时间：2013-02-07T07:03:55.570
> 
> 标签：linux, awk, increment

我正在尝试在文件中每行的开头添加一个递增的数字以及使用 awk 的字符串。

这是我尝试做的事情：

```
awk 'BEGIN { for ( i=1 ; i <= 60 ; i++ ) print "\""i"\""  "\""$0 }'
    test1.vdf > test2.vdf 
```

但是这样做只会给我数字并忽略文件中的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:39:03.053

BEGIN 是一种“特殊模式”，仅*在第一条记录之前处理*

如果您将尝试转移到更有可能的区域，您会发现您不需要“循环”，因为“一次记录一次”的标准过程将为您执行此操作。

尝试这个：

```
{
    print "\""++i"\"" "\""$0
} 
```

我不知道它是否正是您想要的输出，但它主要是您的代码。

# opengl - 将背景颜色设置为纹理

> ID：14745492
> 
> 赞同：0
> 
> 时间：2013-02-07T07:04:02.787
> 
> 标签：opengl, graphics, colors, background

所以在openGL中，当我调用 glClearColor() 时，有没有办法将背景颜色设置为纹理，而不是将其设置为静态颜色？或者除了 glClearColor() 之外还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T07:09:42.063

您无法将屏幕清除为纹理。你可以：

*   绘制一个屏幕大小的纹理四边形。

*   [将 FBO 中的纹理](http://www.opengl.org/wiki/Framebuffer_Object#Framebuffer_Blitting)粘贴到屏幕上。

任何一个都可以。

# c - 寻找阶乘和阶乘数的结尾零

> ID：14745496
> 
> 赞同：-4
> 
> 时间：2013-02-07T07:04:10.207
> 
> 标签：c

**我有个问题。我想找到大数的阶乘。**

例如：1555！= ?。195！= ?。

我的主要问题是我想知道阶乘数字中以 0 结尾的确切数量。

我使用以下公式： (m!)^n = m! = 2*10^(n-1) + 2^2 * 10^(n-2) + ------- + 2^n。

有了这个，我可以解决像这样结束 0 的数量的其他阶乘。

100!= 2*10^1 + 2^2*10^0 = 20+4 = 24

100！根据此计算，有 24 个结尾 0。

但是，然后我遇到了其他问题，

例如： 95！

一）95！= (100 - 5)！= 24 - 2*5^(1-1) = 24 - 2 = 22 => 95！有 22 个 0。

ii) 95！= (90 + 5)！= 9*(2*10^0) + 2*5^0)= 18+2 = 20 => 95！有 20 个 0。

这是我的问题。通过使用上面的公式，我得到了两个不同的答案，我很困惑，我没有得到完美的答案，所以请帮我找到它。

***谢谢...***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:22:01.477

n! 中尾随零的数量！是序列 1, 2, ..., n 中 5 的因子数。这是因为尾随零是结果中 10 的因子数，而 10 的素因数分解为 5 x 2。2 的因子总是多于 5，因此 5 的数量给出了结果。

5 的因子数是...`[n/5] + [n/25] + ... + [n/(5^k)] + ...`其中`[ ]`表示向下舍入（*floor*）。

计算这个的代码应该是什么样的？可能是这样的。

```
int trailing_factorial_zeros(int n) {
    int result = 0;
    int m5 = 5;
    while (n >= m5) {
        result += n / m5;
        m5 *= 5;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:18:55.573

这是一个不好的问题，无论如何可能属于数学网站。但这里有一个想法给你：

前100名！= 100 * 99！

99！= 99 * 98！依此类推，直到 1！= 1 和 0！= 1。

您想知道 N 中有多少个尾随 0！（至少我是这样理解这个问题的）。

想想10中有多少！

```
10! = 3628800 
```

所以有两个。原因是因为只有 2*5 = 一个尾随 0 和 10 的数字。所以我们总共有 2。（5*4 有尾随 0 但 4 是 2 的倍数，此外，我们只得到将单个数字相乘一次）

那么，20 是一个不错的选择！有 4 个（确实如此）。

现在你的工作是证明（或反驳）这种模式会成立，然后想出一种编码方法。

# php - 如何使用foreach提取PHP变量中的数组数据？

> ID：14745498
> 
> 赞同：0
> 
> 时间：2013-02-07T07:04:16.683
> 
> 标签：php

我需要提取最后一个数组数据，即站点名称、网址、标题到 php 中的变量。

```
 array
  'ApplicableProductOfferings' => 
    array
      0 => string 'EasyDemo' (length=10)
  'Artist' => string 'Hello' (length=10)
  'ReferralDestinations' => 
    array
      0 => 
        array
          'SiteName' => string 'gettyimages' (length=11)
          'Url' => string 'http://www.gettyimages.com/detail/160414706' (length=43)
          'Title' => string 'Pixie Lott Launches The New BlackBerry Z10' (length=42)
          'UrlComp' => string 'http://localhost.com' (length=197)
          'UrlPreview' => string 'http://localhost.com' (length=164)
          'UrlThumb' => string 'http://localhost.com' (length=82)
          'UrlWatermarkComp' => string 'http://localhost.com' (length=197)
          'UrlWatermarkPreview' => string 'http://localhost.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:27:24.893

这取决于您如何将数据存储在数组中。如果你有一个已经有最后一个数组数据的数组，那就很简单了。

```
foreach ($myArray as $var) {
  echo $var;
} 
```

或以 $myArray['SiteName']、$myArray['Url'] 等方式访问单个元素。

假设您在一个名为 $arrayOfArrays 的数组中包含上述数据

```
foreach ($arrayOfArrays as $myArray) {

  // $myArray now holds first array, second array etc as the loop is executed
  // First time it holds 'ApplicableProductOfferings', second time 'ReferralDesinations'..

  // If the array is 'ReferralDesitnations' you can loop through that array
  // to get the elements you are looking for SiteName etc as below

  foreach ($myArray as $URLElement) {
    echo $URLElement;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:08:29.820

尝试这个.......

```
 foreach($data as $dat)
   {
       foreach($dat['ReferralDestinations'] as $key => $d) 
        {
           echo $d['SiteName'];
           echo $d['Url'];
           echo $d['Title'];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-12T11:39:49.610

```
$array1 = [];
$array2 = [];

foreach ($array1 as $key=> $val) {
extract($array2, EXTR_IF_EXISTS, $val);
} 
```

// extract() 标志 => EXTR_IF_EXISTS ... // [http://php.net/manual/ru/function.extract.php](http://php.net/manual/ru/function.extract.php)

# html - 如何在另一个内容块下显示某些内容

> ID：14745500
> 
> 赞同：0
> 
> 时间：2013-02-07T07:04:31.783
> 
> 标签：html, css

我在下面有一个屏幕截图，其中显示了考试信息、计时器和一些问题：

![在此处输入图像描述](../Images/f50e97bfc9895759505f00ae43b42698.png)

现在的问题是我希望问题详细信息显示在考试详细信息下方，而不是旁边。我的问题是如何让问题显示在下面？我也想要彼此下方的问题

**HTML/PHP：**

```
//EXAM DETAILS
 <div class='lt-container'>

    <p><input type='hidden' id='studentId' name='studentId' value='<?php echo $dbStudentId; ?>' /></p>
    <p><strong>Student:</strong><?php echo $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname; ?> <br/>
    <strong>Module:</strong><?php echo $dbModuleNo . " - " . $dbModuleName; ?> 
    <input type='hidden' id='moduleId' name='moduleId' value='<?php echo $dbModuleId; ?>' /><br/>
    <strong>Assessment:</strong><?php echo $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)); ?> 
    <input type='hidden' id='sessionId' name='sessionId' value='<?php echo $dbSessionId; ?>' /><br/>
    <strong>Assessment Weight: </strong><?php echo $dbSessionWeight; ?> <br/>
    <strong>Total Marks: </strong><?php echo $dbTotalMarks; ?> <br/>
    <strong>Penalty: </strong><?php echo $penaltymsg; ?> </p>
    </div>

//TIMER
    <div id='rt-container'>
    <h1><span id='countdown'><?php echo $dbSessionDuration; ?></span></h1>
    </div>

    <?php
    }

//QUESTION DETAILS
    foreach ($arrQuestionId as $key=>$question) {

    ?>

    <div class='lt-container'>
    <p><strong>QUESTION <span id="quesnum"></span>:</strong></p>
    <p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p>
    </div> 
```

**CSS：**

```
.lt-container{
 float: left;   
 }

#rt-container {
 clear: right;
 float:right;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:09:54.227

从. `float:left`_ `.lt-container`并将`#rt-container`上面的`.lt-container`

```
.lt-container{   
 }
#rt-container {
 float:right;  
    background:red
} 
```

**[演示](http://jsfiddle.net/XnACL/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:10:41.143

您在 css 中使用 float right ，这迫使 div 向右浮动。你可以做的是给你的左 div 100% 的宽度，这会将你的右 div 移动到左 div 的底部。

# selenium - 数据驱动的多浏览器 Selenium Grid2 MbUnit/Gallio C# 测试超时

> ID：14745506
> 
> 赞同：1
> 
> 时间：2013-02-07T07:05:11.567
> 
> 标签：selenium, mbunit

我正在使用 Selenium Grid2 和 MbUnit/Gallio 在 C# 中工作。我读到可以使用数据集的组合来驱动 MbUnit [v3 中的 MbUnit UsingFactories 替代方案](https://stackoverflow.com/questions/1237933/usingfactories-alternative-in-mbunit-v3)。因此，我尝试使用 MbUnit 在多个浏览器上执行单个测试，并使用附加数据集将浏览器和数据的笛卡尔积变成测试。如果我在没有额外数据集的情况下运行代码，一切正常，测试代码将针对两个浏览器执行。

```
 private IEnumerable<ICapabilities> ProvideCapabilities
    {
        get
        {
            yield return DesiredCapabilities.Firefox();
            yield return DesiredCapabilities.Chrome();
        }
    }
    [Test]
    public void testBrowser([Factory("ProvideCapabilities")] ICapabilities browser)
    {
        IWebDriver driver = new RemoteWebDriver(new Uri("http://127.0.0.1:4444/wd/hub"),
                                  browser);
        driver.Navigate().GoToUrl("http://www.google.com/");
        IWebElement query = driver.FindElement(By.Name("q"));
        query.SendKeys("Bark");
        query.Submit();
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
        wait.Until((d) => { return d.Title.ToLower().StartsWith("bark"); });
        System.Console.WriteLine("Page title is: " + driver.Title);
        driver.Quit();
        System.Console.WriteLine("end of testBrowser");
    } 
```

如果我添加数据集以使测试用例数据驱动 Selenium 超时，但操作已针对浏览器正确运行。似乎网格永远不会从节点接收结果。在 MbUnit 测试运行程序 Icarus 中，我看到四个测试已运行但超时。该代码在每次执行时都会创建一个新的 WebDriver 对象，但是 Selenium Grid2 中是否存在其他一些共享资源会阻止它工作。

```
 private IEnumerable<ICapabilities> ProvideCapabilities
    {
        get
        {
            yield return DesiredCapabilities.Firefox();
            yield return DesiredCapabilities.Chrome();
        }
    }
    public IEnumerable<string> ProvideSearchString
    {
        get
        {
            yield return "Cheese";
            yield return "Bark";
        }
    }

    [Test]
    public void testBrowser([Factory("ProvideCapabilities")] ICapabilities browser, [Factory("ProvideSearchString")] string searchString)
    {
        IWebDriver driver = new RemoteWebDriver(new Uri("http://127.0.0.1:4444/wd/hub"),
                                  browser);
        driver.Navigate().GoToUrl("http://www.google.com/");
        IWebElement query = driver.FindElement(By.Name("q"));
        query.SendKeys(searchString);
        query.Submit();
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
        wait.Until((d) => { return d.Title.ToLower().StartsWith(searchString); });
        System.Console.WriteLine("Page title is: " + driver.Title);
        driver.Quit();
        System.Console.WriteLine("end of testBrowser");
    } 
```

# jquery - 使用 ui 对话框按钮

> ID：14745512
> 
> 赞同：0
> 
> 时间：2013-02-07T07:05:37.607
> 
> 标签：jquery, css, jquery-ui-dialog

我的页面上有应用 ui 对话框按钮集的对话框，我使用此代码

```
$('#pop_div').load("mypopname.php").dialog({
        width: 880,
        height: 650,
        modal: true,
        draggable: false,
        resizable: false,
        title: 'page title',
        buttons: {
            Cancel: function () {
                $('#pop_div').dialog("close");
            },
            Submit: function () {
                $("#frmname").submit();
            }
        }
    }); 
```

我想知道是否可以在任何页面（不一定在对话框中）通常使用相同的按钮（主题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:22:58.387

HTML：

```
<button>A button</button>
<input type="submit" value="A submit button" /> 
```

JavaScript：

```
$('button').button();
$('input[type=submit]').button(); 
```

# java - 无法在 Hazelcast 中创建地图条目

> ID：14745513
> 
> 赞同：1
> 
> 时间：2013-02-07T07:05:46.810
> 
> 标签：java, maven, in-memory-database, hazelcast

我在 Eclipse 中使用 Hazelcast v2.5 和 Maven 插件。我尝试在 Eclipse 中运行一个示例程序，它在 ABCD 命名空间中创建了 3 个映射条目。当我在 Eclipse 中运行我的代码时，它会显示此警告消息

```
Feb 07, 2013 12:08:23 PM com.hazelcast.impl.ConcurrentMapManager
WARNING: [192.168.1.36]:5702 [dev] Caller -> RedoLog{name=c:ABCD, redoType=REDO_TARGET_UNKNOWN, operation=CONCURRENT_MAP_MERGE, target=null / connected=false, redoCount=53, migrating=null
partition=Partition [227]{
}
} 
```

这会一直迭代，直到超过重做阈值。

```
Feb 07, 2013 12:08:42 PM com.hazelcast.impl.LifecycleServiceImpl
WARNING: [192.168.1.36]:5702 [dev] [CONCURRENT_MAP_MERGE] Redo threshold[90] exceeded! Last redo cause: REDO_TARGET_UNKNOWN, Name: c:ABCD
com.hazelcast.core.OperationTimeoutException: [CONCURRENT_MAP_MERGE] Redo threshold[90] exceeded! Last redo cause: REDO_TARGET_UNKNOWN, Name: c:ABCD
    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getRedoAwareResult(BaseManager.java:640)
    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResult(BaseManager.java:627)
    at com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsBoolean(BaseManager.java:437)
    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsBoolean(BaseManager.java:544)
    at com.hazelcast.impl.ConcurrentMapManager$MPut.mergeOne(ConcurrentMapManager.java:1758)
    at com.hazelcast.impl.ConcurrentMapManager$MPut.merge(ConcurrentMapManager.java:1747)
    at com.hazelcast.impl.LifecycleServiceImpl$1.run(LifecycleServiceImpl.java:143)
    at com.hazelcast.impl.executor.ParallelExecutorService$ParallelExecutorImpl$ExecutionSegment.run(ParallelExecutorService.java:212)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
    at com.hazelcast.impl.ExecutorThreadFactory$1.run(ExecutorThreadFactory.java:38) 
```

为什么会出现这种情况？

请帮忙。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:22:11.857

您可以执行以下操作以开始使用准系统 Java 类（我建议您阅读更详细的教程，因为它可能更有用 - 我没有访问 Hazelcast 服务）：

1.  在 hazelcast.xml 文件中指定映射如下：

    ```
     <map name="testMap">     
        <backup-count>1</backup-count>
        <eviction-policy>NONE</eviction-policy>
        <max-size policy="cluster_wide_map_size">0</max-size>
        <eviction-percentage>25</eviction-percentage>
        <merge-policy>hz.ADD_NEW_ENTRY</merge-policy>
        <map-store enabled="true">
        <class-name>models.test.StoreLoadTestMap</class-name>
        <write-delay-seconds>5</write-delay-seconds> 
        </map-store>
        <entry-listeners>
        <entry-listener include value="true"local="false">models.test.ListenerTestMap</entry-listener>
         </entry-listeners>
         </map> 
    ```

完成后，您只需从 Java 应用程序中调用以下命令：

```
IMap<String, testObject> testMap = Hazelcast.getMap("testMap"); 
```

现在，您应该能够根据需要在地图中放置/获取值。您可以根据您的用例使用 tcp 或多播进行复制（如果可能，使用 tcp）并从第二个映射中检索信息以确认数据复制。还请了解数据如何跨地图复制。

希望能帮助到你

# c - 我的 fork fifo c 代码无法正常工作

> ID：14745515
> 
> 赞同：0
> 
> 时间：2013-02-07T07:05:52.753
> 
> 标签：c, linux, process, fork, fifo

我在使用以下代码时遇到问题。我正在做一个关于使用分叉（创建进程）的实验室任务。它是一个简单的程序，应该从键盘读取输入，然后将其读/写到 fifo 并显示其内容和写入的字节。

当我运行它时，一切似乎都很好，直到我输入一些文本。父打印消息显示正常，但子打印消息从未出现，直到我输入我的第二条消息，它总是说它写了 80 个字节，即使我知道它没有，还有一堆奇怪的特殊字符无处不在。

以下是有关程序应如何运行的可执行文件： Linux：[http](http://www.mediafire.com/?6806v24q6lz7dpc) ://www.mediafire.com/? 6806v24q6lz7dpc QNX：[http ://www.mediafire.com/?a9dhiwmrlx2ktkp](http://www.mediafire.com/?a9dhiwmrlx2ktkp)

到目前为止我的代码：

```
#include<stdio.h>
#include<stdlib.h>
#include <sys/stat.h>
#include <unistd.h>
#include <sys/types.h>
#include <fcntl.h>
#include <string.h>

int main(int argc, char *argv[]) {

    char FifoName[] = "fifoDan";
    int fd;
    pid_t retval;
    int size_read;
    char buff[80];
    int  size_written;

    mknod(FifoName, S_IFIFO | 0666, 0);

     // Check if its not equal to zero (ie: child process = 0)
     if (retval = fork ()) {

             printf ("Parent: Waiting for writers \n");

             if(fd = open(FifoName, O_RDONLY) == -1) {
                            perror( "Could not read the FIFO" );
                    return EXIT_FAILURE;
             }

             printf ("Parent: Received a writer \n");

             do {

                             int strsize;

                             size_read = read(fd, buff, sizeof(buff));

                             printf("Parent: read %d bytes: %s \n", size_read, buff);
                             fflush(stdout);

                            strsize = strlen(buff);

                             //   put a '\0' at the end of the data
                            buff[strsize] = '\0';

                     } while(size_read > 0);

                    close(fd);
                    waitpid(retval, NULL, NULL);

                    if(unlink(FifoName) != -1) {
                            return EXIT_SUCCESS;
                    } else {
                            return EXIT_FAILURE;
                    }

    } else {

      printf ("Child pid %d waiting for readers \n", getpid ());
      fflush(stdout);

       if(fd = open(FifoName, O_WRONLY) == -1) {
                            perror( "Could not read the FIFO" );
                    return EXIT_FAILURE;
            }

      printf ("Child: Got a reader, enter some stuff:\n");
      fflush(stdout);

      while(fgets(buff, 80, stdin) != NULL) {

                     int strsize;

                     strsize = strlen(buff);

                     if(strsize < 80) {
                             buff[strsize] = '\0';
                     }

                    size_written = write(fd, buff, sizeof(buff));

                    printf ("Child: wrote %d bytes \n", size_written);
                    fflush(stdout);

             }

             close(fd);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:11:16.727

这条线（例如）不会做你认为它做的事情：

```
if(fd = open(FifoName, O_WRONLY) == -1) 
```

相等运算符比赋值运算符具有更高的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)，所以你实际上是这样的：

```
if(fd = (open(FifoName, O_WRONLY) == -1)) 
```

当你想要这个时：

```
if((fd = open(FifoName, O_WRONLY)) == -1) 
```

* * *

缓冲区读取/写入的问题是因为您确实写入了整个缓冲区：

```
size_written = write(fd, buff, sizeof(buff)); 
```

改为仅使用实际字符串写入`strsize`。

# java - 如何制作性能数字的直方图

> ID：14745523
> 
> 赞同：1
> 
> 时间：2013-02-07T07:06:33.997
> 
> 标签：java, hashmap, histogram, concurrenthashmap

我正在尝试衡量`Database Insert`. 我已经在一个`ConcurrentHashMap`. 我正在尝试制作这些数字的直方图。

在那个并发哈希映射中，它将是这样的。我引用了一个例子。但是该地图将有更多的数据意味着更多的键值对。

```
Key- 11
Value- 2 
```

这意味着，2 个呼叫在 11 毫秒内返回。下面的另一个例子

```
Key - 30
Value -1 
```

这意味着，1 个呼叫在 30 毫秒内返回。

所以根据上面的地图，我正在尝试做这样的事情 -

```
Number of calls came back in between 1 and 10 ms
Number of calls came back in between 10 and 20 ms
Number of calls came back in between 20 and 30 ms
Number of calls came back in between 30 and 40 ms
Number of calls came back in between 40 and 50 ms
Number of calls came back in between 50 and 60 ms
Number of calls came back in between 60 and 70 ms
Number of calls came back in between 70 and 80 ms
Number of calls came back in between 80 and 90 ms
Number of calls came back in between 90 and 100 ms
Number of calls came back in greater than 100 ms 
```

我无法找到一种简单的方法来从该地图制作像上面这样的直方图。我能想到的唯一一件事就是对各种计数器进行硬编码，如果它落在该特定范围内，则继续递增这些计数器。但这看起来不是一个干净的方法。任何想法我该如何解决这个问题？

```
private static void logHistogramInfo() {

  // here histogram is the concurrenthashmap
    System.out.println(histogram);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:22:45.037

Java中的简单直方图：

```
import java.util.HashMap;
import java.util.Map;
import java.util.SortedSet;
import java.util.TreeSet;
public class Histogram {
    public static void main(String[] args) {
        Map<Integer,Integer> data = new HashMap<Integer,Integer>();
        data.put(10, 2);
        data.put(20, 3);
        data.put(30, 5);
        data.put(40, 15);
        data.put(50, 4);
        drawHistogram(data);
    }

    private static void drawHistogram(Map<Integer,Integer> data){
        SortedSet<Integer> keys = new TreeSet<Integer>(data.keySet());
        for(Integer key : keys){
            System.out.print(key + " : ");
            for(int i = 0; i< data.get(key); i++){
                System.out.print("*");
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:49:26.840

这是一个快速的技巧：按以下方式分离关注点。

1.  不要使用 Java 数据结构保留直方图信息。它使您的代码混乱。相反，只需将每次调用的持续时间输出到日志文件，无需预处理。
2.  使用任何统计应用程序，例如 Excel、R 或 SciPy 来导入数据并生成直方图。例如，按照[这些说明](http://www.wikihow.com/Create-a-Histogram-in-Excel)在 Excel 中生成直方图。R 有一个内置函数，可以更轻松地绘制直方图。

恕我直言，这种方法的优点是您可以使用专门的工具对此数据进行任何类型的统计分析，而不会干扰您的主要开发工作。缩小是日志文件可能相当长。如果这成为一个真正的问题，请使用 gzipped 输出流。

# iphone - AVAudioPlayer 15 次不播放音频

> ID：14745526
> 
> 赞同：3
> 
> 时间：2013-02-07T07:06:35.933
> 
> 标签：iphone, ios, core-audio, avaudioplayer

我正面临着一个非常奇怪的问题与 AVAudioPlayer。我已经初始化了 AVAudioPlayer，如下所示。它大部分时间播放音频，但每 15-20 次没有音频播放一次。播放器正在正确初始化并且没有错误。请帮我解决问题。

```
AVAudioPlayer *backgroundMusicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:backgroundMusicURL error:&error];
self.backgroundMusicPlayer = backgroundMusicPlayer;
[backgroundMusicPlayer release];
[self.backgroundMusicPlayer setDelegate:self];
[self.backgroundMusicPlayer prepareToPlay];
[self.backgroundMusicPlayer play]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:21:51.060

> 使用`GCD to load audio data`. 使用 GCD 将歌曲的数据异步加载到 NSData 的实例中，并将其用作音频播放器的馈送。您必须这样做，因为加载音频文件的数据（取决于音频文件的长度）可能需要很长时间，如果您在主线程上执行此操作，那么您将面临暂停 UI 体验的风险. 因此，您必须使用全局并发队列来确保您的代码不会在主线程上运行。如果它在主线程上，那么您面临的问题就会发生。看到这个示例代码

```
 dispatch_queue_t dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_async(dispatchQueue, ^(void)
     { 
    NSBundle *mainBundle = [NSBundle mainBundle];
        NSString *filePath = [mainBundle pathForResource:@"MySong" ofType:@"mp3"];
        NSData *fileData = [NSData dataWithContentsOfFile:filePath]; NSError *audioPlayerError = nil;
     self.audioPlayer = [[AVAudioPlayer alloc] initWithData:fileData error:&audioPlayerError];

        if (self.audioPlayer != nil)
    {
        self.audioPlayer.delegate = self;
        if ([self.audioPlayer prepareToPlay] && [self.audioPlayer play])
    {
        NSLog(@"Successfully started playing.");
        } 
    else 
    { 
    NSLog(@"Failed to play the audio file.");
     self.audioPlayer = nil;
        }
        } 
    else { NSLog(@"Could not instantiate the audio player.");
} }); 
```

您的问题也可能是因为`initWithContentsOfURL`，如果它没有通过该 URL 获取数据，那么它不会播放音频。

您的代码的其他问题可能是释放 audioPlayer 对象。如果您分配了很多对象并且从不从内存中释放它们。这最终可能导致内存不足。

# mysql - mysql查询以获取单个ID的计数

> ID：14745533
> 
> 赞同：0
> 
> 时间：2013-02-07T07:07:30.273
> 
> 标签：mysql, sql, group-by

以下mysql查询将给出如下结果

```
$query = "SELECT PS.user_id, PS.pro_id
    FROM pro_Purchase AS PS
    INNER JOIN program_detail AS PD ON PD.program_master_id = PS.pro_id
    WHERE PD.program_type = 'program'
    AND PS.subscribe_status = '1'
    GROUP BY PS.`programs_subscribed_id`
    HAVING COUNT( `pro_id` ) > '1'
    ORDER BY PS.pro_id" 
```

结果

```
user_id program_id
97      167     
12      172     
12      172     
216     173     
216     173     
215     173     
216     173     
12      173     
12      173     
12      173     
216     173 
```

在这里我想得到`count`每个`program_id`

例如：count(172),count(173) 等等。

```
id   count
172  2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:09:44.283

您可以将查询包装在子查询中并在外部查询中计数，如下所示：

```
SELECT 
  user_id, COUNT(pro_id)
FROM
(
    SELECT PS.user_id, PS.pro_id
    FROM pro_Purchase AS PS
    INNER JOIN program_detail AS PD ON PD.program_master_id = PS.pro_id
    WHERE PD.program_type = 'program'
      AND PS.subscribe_status = '1'
    GROUP BY PS.programs_subscribed_id
    HAVING COUNT( pro_id ) > '1'
) AS Sub
GROUP BY user_id
ORDER BY pro_id; 
```

**请注意：**在您发布的查询中，您在子句中进行分组`PS.programs_subscribed_id`和选择`PS.user_id, PS.pro_id`，这些`SELECT`子句既不在聚合函数中也不在`GROUP BY`子句中，因此您不会以这种方式获得不一致的数据。

你可以这样做：

```
SELECT PS.pro_id, COUNT(PS.user_id)
FROM pro_Purchase AS PS
INNER JOIN
(
   SELECT programs_subscribed_id
   FROM pro_Purchase 
   GROUP BY programs_subscribed_id
   HAVING COUNT( pro_id ) > 1
) AS PS2 ON PS.programs_subscribed_id = PS2.programs_subscribed_id
INNER JOIN program_detail AS PD ON PD.program_master_id = PS.pro_id
WHERE PD.program_type = 'program'
  AND PS.subscribe_status = '1'
GROUP BY PS.pro_id; 
```

这样，`JOIN`子查询的额外内容：

```
 SELECT programs_subscribed_id
   FROM pro_Purchase 
   GROUP BY programs_subscribed_id
   HAVING COUNT( pro_id ) > 1 
```

将确保从`pro_Purchase`表中选择的`COUNT( pro_id ) > 1`每一 行都有`programs_subscribed_id`，这就是您`programs_subscribed_id`在第一个查询中分组的原因。

# css - Html/Css 2 相邻容器和回流

> ID：14745537
> 
> 赞同：0
> 
> 时间：2013-02-07T07:07:44.557
> 
> 标签：css, wordpress, html, header

我是 HTML/CSS 的新手——如果我不这样做，就假设我不知道。

我想要这些在 headerimg 右侧的 site-title 和 site-desc 元素；当然，它们在某些浏览器宽度下以这种方式显示，带有浮动选项。尽管浏览器宽度尽可能大，我希望它们保持相邻。

另外，我想让标题容器扩展以容纳它们 - 下面的主体是不同的颜色，因此随着浏览器宽度的缩小，图像会向下移动。

以下是 header.php 中的相关内容：

```
<hgroup>
   <?php
       // Check to see if the header image has been removed
       $header_image = get_header_image();
       if ( ! empty( $header_image ) ) :
   ?>
  <h1 id="site-logo">
       <a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">
            <img src="<?php header_image(); ?>" alt="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" />
       </a>
  </h1>
      <?php endif; // end check for removed header image ?> 
<div id="headertext"><span> 
    <h1 id="site-title"><span><a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home"><?php bloginfo( 'name' ); ?></a></span></h1>
    <h2 id="site-description"><?php bloginfo( 'description' ); ?></h2></span>
        </div>
            <div id="headerimg">
             <img src="/wp-content/themes/catch-box/images/Puzz_letters.png" align="left" />
        </div>
</hgroup> 
```

这是 style.css：

```
#headertext {
    float: right;
    margin-bottom: 20px;
}

#headerimg {
    float: left;
    margin-bottom: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:08:30.800

PHP：

```
<hgroup>
<?php
   // Check to see if the header image has been removed
   $header_image = get_header_image();
   if ( ! empty( $header_image ) ) :
?>

<div id="site-logo">
   <a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">
      <img src="<?php header_image(); ?>" alt="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" />
   </a>
</div>

<?php endif; // end check for removed header image ?> 

<div id="headertext">
    <h1 id="site-title">
        <a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home"><?php bloginfo( 'name' ); ?></a>
    </h1>

    <h2 id="site-description"><?php bloginfo( 'description' ); ?></h2>
</div>

<div id="headerimg">
  <img src="/wp-content/themes/catch-box/images/Puzz_letters.png" align="left" />
</div>

<div class="clear"> </div>

</hgroup>

<div class="clear"> </div> 
```

CSS：

```
#site-logo {
  width: 100px;
  height: 100px;
  float: left;
  margin-right: 30px;
}

#headertext {
  float: left;
}

#site-title {
  margin-bottom: 20px;
}

.clear {
  clear: both; /* Look up what clear:both does. */
}

@media only screen and (max-width: 900px) { /* define your smaller screen styles inside this */
    #site-logo, #headertext {
     float: none;
    }     

} 
```

在较小的屏幕中，使用 CSS（不是一种好的方式）不可能将徽标的位置更改为底部。

# apache - Windows 8 上的 WAMP 堆栈安装 - 不会变红或变黄

> ID：14745541
> 
> 赞同：0
> 
> 时间：2013-02-07T07:08:06.213
> 
> 标签：apache, wampserver

分布：[wampserver.com](http://www.wampserver.com/en/#wampserver-32-bits-php5-3)

我在 Windows 8 上安装了 wamp。Wamp 没有变成橙色或绿色。每当我从 apache > service >test port 80 测试端口 80 时，我都会收到消息“您的端口未实际使用”。我没有安装Skype。

当我打开时， `http://127.0.0.1/ " or http://localhost/`我在 Firefox 和 chrome 中收到错误消息“找不到服务器”。

我已经尝试过 apache > service > install service..但是当它（cmd 窗口）询问时：- 按 enter 继续，它消失了.. 没有任何工作正常。！！

apache > apache_error_log 中没有生成错误日志。

我的主机文件仅包含以下行：

```
127.0.0.1  localhost 
```

谢谢...

# c# - 在 C# 中转义字符串中的特殊字符

> ID：14745546
> 
> 赞同：2
> 
> 时间：2013-02-07T07:08:16.963
> 
> 标签：c#

在下面需要你的帮助。

我有代码检查数据表中是否存在特定行；如果行不存在，那么我将该行添加到数据表中。这工作正常，但是当行值包含特殊字符链接`'`（单引号）时失败。

下面是代码：

```
string lastName = dgRow.Cells[2].Text.Replace("amp;", "");
DataRow[] dr = dt.Select("LastName='" + lastName + "'"); //check whether row is available in datatable or not

if (dr.Length <= 0)// Condition to check if row is there in data table
{
    dt.Rows.Add();
    dt.Rows[dt.Rows.Count - 1]["FirstName"] = dgRow.Cells[1].Text;
    dt.Rows[dt.Rows.Count - 1]["LastName"] = dgRow.Cells[2].Text;
    dt.AcceptChanges();
}
return dt; //Return modified data table to calling function. 
```

当 LastName 包含单引号时，此代码将失败。

我需要一个不从姓氏中删除引号的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:16:33.937

`dt.Select()`我强烈建议使用 LINQ，而不是一开始就使用。它避免了整个“在字符串中嵌入查询”问题，这个问题非常可怕，让人联想到 SQL 注入攻击。

所以：

```
var lastNameToFind = dgRow.Cells[2].Text.Replace("&amp;", "");
var matched = dt.AsEnumerable()
                .Where(dr => dr["LastName"].Equals(lastNameToFind))
                .Any();

if (matched)
{
    DataRow newRow = dt.NewRow();
    dt.Rows.Add(newRow);
    newRow["FirstName"] = dgRow.Cells[1].Text;
    newRow["LastName"] = dgRow.Cells[2].Text;
    dt.AcceptChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:16:21.673

尝试改变：

```
DataRow[] dr = dt.Select("LastName='" + dgRow.Cells[2].Text.Replace
("amp;", "")+ "'"); 
```

对此：

```
DataRow[] dr = dt.Select("LastName='" + dgRow.Cells[2].Text.Replace
("amp;", "").Replace("\'", "\'\'") + "'"); 
```

*（未经测试）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:24:10.413

您可以将**Single** Quote替换为**Double Quote**：

```
Dim LastName As String = Replace(txtLastName.Text, "'", "''") 
```

但这不是一个好习惯......

看看这个：[Replaceing apostrophe in asp.net to prevent SQL error](https://stackoverflow.com/questions/7476445/replacing-apostrophe-in-asp-net-to-prevent-sql-error)

# c++ - C++ 程序根据特定规则接受字符串（num opr num）

> ID：14745550
> 
> 赞同：0
> 
> 时间：2013-02-07T07:08:32.030
> 
> 标签：c++

我有一个根据定义的规则接受特定字符串的程序，即数字运算符号。例如：`2+4-5*9/8`

上面的字符串是可以接受的。现在，当我输入类似的内容时`2+4-a`，它再次显示可以接受，这是完全不可接受的，因为根据定义的规则，数字值的范围应仅在 0 到 9 之间。我想我将不得不使用 ASCII 值来检查。

参考下面的代码：

```
#include <iostream>
#include <ncurses.h>
#include <string.h>
#include <curses.h>

int check(int stvalue) {
    if(stvalue < 9) return(1);
    else return(0);
}

main() {
    int flag = 0;
    char str[10];
    std::cout << "Enter the string:";
    std::cin >> str;
    int i = 1;
    int n = strlen(str);
    for(i = 0; i < n - 1; i += 2) {
        if(!check(str[i])) {
            if(str[i + 1] == '+' || str[i + 1] == '-' || str[i + 1] == '/' || str[i + 1] == '*') flag = 1;
            else {
                flag = 0;
                break;
            }
        }
    }
    if(flag == 1) std::cout << "String is acceptable" << std::endl;
    else std::cout << "String is not acceptable\n" << std::endl;
    getch();
} 
```

输出：

```
 Enter the string:2+4-5
 String is acceptable

 Enter the string:3*5--8
 String is not acceptable

 Enter the string:3+5/a
 String is acceptable 
```

最后的输出不应该是可接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:23:56.967

```
int check(int stvalue) {
    if(stvalue < 9) return(1);
    else return(0);
} 
```

这是错误的，因为 ASCII 图表上的等价数字是 48 到 57，从 0 到 9。

您可以通过类似于以下的函数传递验证来简化验证：

```
#include <cctype>
bool validateString(const std::string& str) {
   auto compare = [](char c) {
        return ((c == '+') || (c == '-') || (c == '*') || (c == '/'));
    };
    size_t length = str.length();
    for(size_t i = 0; i < length; ++i) {
        if(!(std::isdigit(str[i]) || compare(str[i])))
            return false;
        if(compare(str[i]) && (i <= length-1) && compare(str[i+1]))
            return false;
        if(compare(str[length-1]))
            return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:16:13.220

```
for(i = 0; i < n - 1; i += 2) { 
```

您不检查字符串的最后一个字符，因此最终`a`通过。

记住`strlen`不包括空字符，你不需要调整它。

也可以使用`check(str[i] - '0')`，因为您要检查数字而不是其 ascii 代码。

最后一个大问题——

```
if(str[i] == '+' || str[i] == 
```

如果检查失败，**您需要检查该 char 是否为 operator**，**而不是 next**，如上所述。[输出](http://liveworkspace.org/code/1uXtKy%2419)

默认情况下也将 flag 设置为 1。我已经[稍微改写了你的代码](http://liveworkspace.org/code/1uXtKy%2419)。

[进一步重写代码，捕获重复的数字或运算符](http://liveworkspace.org/code/1uXtKy%2425)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T07:16:29.713

这里有一些提示：

1.  您的循环仅检查输入中的偶数字符。您的循环`n`每次添加 2，因此它会检查但`3+`永远不会被查看。`5/``a`
2.  如果您的输入总是在单个数字和运算符之间交替，您可以使用以下内容：

    ```
    for (int i = 0; i < n; i++) // read *every* character
    {
        if (i % 2 == 0)
        {
            // you are looking at a character with an even index
        }
        else
        {
            // you are looking at a character with an odd index
        }
    } 
    ```

    运算符将`%`左操作数除以右，并为您提供该除法的余数。

3.  您的`check`功能是检查该`char`值是否小于 9，而不是该`char`值是否代表数字字符。您可以包含`<cctype>`标题并使用`isdigit`而不是您的`check`函数，该函数检查输入是否代表数字字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:11:17.640

这些数字是 char 类型，因此请检查它们的 ASCII 值以查看它们是否是数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T07:33:48.433

如果 0 是 48 并且 9 是 57.. 不是 9，则为 ASCII 值。所以，如果（stvalue < 9）返回（1）；

应该是，if(stvalue <= 57) return(1);

顺便说一句，这种方法可能有效，但其他答案是解决这个问题的更成熟的方法。

# asp.net-mvc - 使用 ASP.NET MVC 的 Ajax 数组发布？

> ID：14745551
> 
> 赞同：2
> 
> 时间：2013-02-07T07:08:33.877
> 
> 标签：asp.net-mvc, arrays, jquery

这是我为生成数组而创建的 acript：

```
var data_points = $("#bcc_datapoint_selection").find("input:checked").map(function () {
    return $(this).val();
}).get(); 
```

控制台日志输出：

```
["3","4","6"] 
```

Ajax 发布脚本：

```
$.ajax({
    url: '@Url.Action("BccGetMeterReadingsChart", "Widget")',
    type: 'POST',
    data: { dataPoints: data_points },
    success: function (result) {
        $("#bcc_chart").html(result);
    },
    error: function () {
         alert("Seçilen kritere uygun veri bulunamadı!");
    }
}); //end ajax 
```

控制器方法：

```
public ActionResult BccGetMeterReadingsChart(string[] dataPoints)
{
    // Some code
    return Json("", JsonRequestBehavior.AllowGet);
} 
```

调试输出：

```
dataPoints : null 
```

请求数据输出：

```
dataPoints%5b%5d=3&dataPoints%5b%5d=4&dataPoints%5b%5d=6 
```

我错过了什么？这是 Ajax 函数中的问题吗？还是其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:12:21.773

尝试`traditional`为您的 AJAX 请求将参数设置为 true：

```
$.ajax({
    url: '@Url.Action("BccGetMeterReadingsChart", "Widget")',
    type: 'POST',
    data: { dataPoints: data_points },
    traditional: true,
    success: function (result) {
        $("#bcc_chart").html(result);
    },
    error: function () {
         alert("Seçilen kritere uygun veri bulunamadı!");
    }
}); 
```

现在 POST 有效负载将如下所示：

```
dataPoints=3&dataPoints=4&dataPoints=6 
```

模型绑定器会愉快地将点集合绑定到您的操作参数。

# ios - 从 iPad 上的相机捕捉图像

> ID：14745555
> 
> 赞同：-2
> 
> 时间：2013-02-07T07:08:37.780
> 
> 标签：ios, ipad, ios5, ios6, ios-simulator

已经创建了一个从相机捕获图像的应用程序。这是我的代码

```
-(IBAction) showCameraUI {
    BOOL hasCamera = [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera];
    UIImagePickerController* picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = hasCamera ? UIImagePickerControllerSourceTypeCamera :    UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:picker animated:YES];
} 
```

并实现了这个委托方法来获取捕获的图像

```
- (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissModalViewControllerAnimated:YES];
    UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage];
    UIImage *yourImageView = image;
} 
```

如果用户取消控制器，则实现此方法

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController*)picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

但它显示了这个例外。有谁知道为什么在执行最后一行函数 showCameraUI 后会显示这样的异常。

> UIStatusBarStyleBlackTranslucent 在此设备上不可用。2013-02-07 10:06:06.976 CaptureImage [460:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“在 iPad 上，UIImagePickerController 必须通过 UIPopoverController 呈现”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:24:46.847

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
self.imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
                [self presentModalViewController:self.imgPicker animated:YES];
 }

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    [[picker parentViewController] dismissModalViewControllerAnimated:YES];
    [self.imgPicker dismissModalViewControllerAnimated:TRUE]; 

   [self performSelectorInBackground:@selector(DoImageConversionInBackGround:) withObject:img ];
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:29:53.077

请试试这个

// 从相册中选择一张图片

```
- (IBAction)imageFromAlbum:(id)sender
{
    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentViewController:imagePicker animated:YES completion:nil];
} 
```

// 用相机拍照

```
- (IBAction)imageFromCamera:(id)sender
{
    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
    [self presentViewController:imagePicker animated:YES completion:nil];
}

//  Dismiss the image picker on selection and use the resulting image in our ImageView

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(    UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [imagePicker dismissModalViewControllerAnimated:YES];
    [imageField setImage:image];
} 
```

// 在取​​消时，只关闭选择器控制器

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [imagePicker dismissModalViewControllerAnimated:YES];
} 
```

# windows-store-apps - 为 Windows 8 pro 开发应用程序

> ID：14745559
> 
> 赞同：0
> 
> 时间：2013-02-07T07:09:05.727
> 
> 标签：windows-store-apps

我正在使用 C# for Tablets 为 Windows RT 开发应用程序。由于设备管理 API 不足（设备屏幕锁定、n/w 配置、限制摄像头等），我们的客户决定转向 Windows 8 pro。那么我们是否有任何用于为 Windows 8 专业版开发平板电脑应用程序的模板（我在 Win rt 的“Windows 应用商店应用程序”模板中使用 C# 和 XAML），或者如何为 Windows 8 专业版创建平板电脑应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:52:18.557

Windows 商店应用程序始终是 Windows 商店应用程序 - 无论哪种方式，您都可以为 RT/PRO 或桌面开发它。您可以使用 Windows 8 桌面应用程序并在 PRO 机器上运行它。您甚至可以通过商店出售您的桌面应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:28:04.337

如果您的客户决定转向 Windows 8 Pro，您应该能够使用 Visual Studio 中的项目模板来开发 Windows 8 应用程序，除非我在这里遗漏了什么。

如果您必须在 ARM 上为 Windows 开发应用程序，您可能需要查看 Jason Zander 的博客“关于在 ARM 上开发 Windows (WOA) 需要了解的知识”，网址为[http://blogs.msdn.com/b/ jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)

# jquery - 如何在 jQuery 手风琴中获取所选项目的值并显示它？

> ID：14745561
> 
> 赞同：0
> 
> 时间：2013-02-07T07:09:07.770
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我正在使用 jQuery Accordion 并参考[此处](http://jqueryui.com/accordion/#option-active)。

单击我的部分（标题）中的项目时，我想以以下格式显示：

我的标签中的第 # -> 项目 # 作为文本（如面包屑）。

我试图搜索它，我得到了使用的线索

```
var active = $('.selector').accordion('option', 'active'); 
```

但我不知道如何使用它。我是 jQuery 的新手。

我的代码如下：

```
 $(function () {
                $("#accordion").accordion({
                    heightStyle: "content"
                });  
            }); 
        </script>  

                        <div id="accordion">
                            <h3>
                                Section 1</h3>
                            <div>
                                <asp:LinkButton ID="LinkButton1" runat="server">Item 1</asp:LinkButton> 
                                <br /><br />
                                <asp:LinkButton ID="LinkButton3" runat="server">Item 2</asp:LinkButton> 
                            </div>
                            <h3>
                                Section 2</h3>
                            <div>
                                 <asp:LinkButton ID="LinkButton2" runat="server">Item 3</asp:LinkButton> 
                                 <br /><br />
                                 <asp:LinkButton ID="LinkButton4" runat="server">Item 4</asp:LinkButton> 
                            </div> 
                        </div> 

<asp:Label runat="server" ID="lbl_selectedValue"  ></asp:Label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:27:22.153

试试下面的代码： -

```
$("#accordion").bind("click", function() {

    alert($("h3[aria-expanded='true']",this).text());

}); 
```

或者

```
$("#accordion h3").bind("click", function() {

    alert($(this).text());

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:15:51.360

这里

```
$('.selector').accordion('option', 'active'); 
 --^^^^^^^^^---this is accordion selector.. in your case it is <div id="accordion"> so use #accordion. 
```

使用`text()`或`html()`替换活动值`<label>`

```
 $('#lbl_selectedValue').text();
 --^^^^^^^^^^^^^^^^^^^^--- label selector with id as lbl_selectedValue 
```

尝试这个

```
 $(function () {
    $("#accordion").accordion({
                heightStyle: "content"
    });  

    var activeAccordion=$( "#accordion" ).accordion( "option", "active" );
    $('#lbl_selectedValue').text($("#accordion h3").eq(activeAccordion).text()); //"OR $('#lbl_selectedValue').html(activeAccordion);

    $(".accordion-header").on("click", function() { 
         var activeClickAccordion=$( "#accordion" ).accordion( "option", "active" );
         $('#lbl_selectedValue').text($("#accordion h3").eq(activeClickAccordion).text());
    })
 }); 
```

**更新**

给你的标签一个类别并尝试它..

```
<asp:Label runat="server" ID="lbl_selectedValue"  class="lbl_selectedValue"></asp:Label> 
```

和你的选择器。

```
$('.lbl_selectedValue').text($("#accordion h3").eq(activeAccordion).text()); 
```

# java - 重复使用传递性的依赖？

> ID：14745574
> 
> 赞同：0
> 
> 时间：2013-02-07T07:09:49.883
> 
> 标签：java, maven, dependencies, dependency-management

我有一个项目`X`依赖于项目`Y`和`Z`

项目 Y 也依赖于项目 Z

如果我只在 my 中指定`X`依赖，那么一切仍然有效，因为依赖是传递获得的。`Y``pom.xml``Z`

那么有什么充分的理由将依赖项包含`Z`在 my 中`pom.xml`吗？还是把它放在外面就可以了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:20:19.283

这取决于。如果您的项目实际上*只*使用类，`Y`那么没有理由显式声明依赖于，`Z`因为它`Y`依赖于`Z`.

但我见过一些项目实际上使用了一些类`Y`，`Z`但只声明它们依赖于`Y`. 我认为这是一种不好的做法，因为：a）您没有明确声明*所有*项目依赖项；b) 如果您更新`Y`到较新版本，您可能会遇到问题，因为它可能不再依赖`Z`或依赖可能不包含项目所需类的较新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:02:00.913

我同意安德鲁的回答，但我想补充几点：

*   你可能想看看这个[讨论](https://stackoverflow.com/questions/8923787/different-scopes-of-the-same-artifact-and-transitive-dependencies-issue)。如果您在 X 的代码中使用 Z，将 Z 作为依赖项显式添加到 X 可能会给您带来一些问题。例如，如果您将 Z 添加为测试依赖项（因为您仅将其用于测试），则 Z 将不会包含在主类路径中，并且您会遇到一些问题，因为 Y 使用的类将不存在。

*   Maven Enforcer 插件中添加了一个新的强制规则。它允许您更好地控制传递依赖。启用后，所有传递依赖项都将被禁止，您必须明确包含或排除它们。有关更多详细信息，请参见[此处](http://maven.apache.org/enforcer/enforcer-rules/banTransitiveDependencies.html)。

# ios - 在同一个 iOS 项目中混合使用 ARC 和非 ARC 代码有多安全？

> ID：14745576
> 
> 赞同：7
> 
> 时间：2013-02-07T07:09:52.473
> 
> 标签：ios, objective-c, automatic-ref-counting

我正在修改一个非 ARC的[开源应用程序。](http://code.google.com/p/remail-iphone/)我的大部分 iOS 体验都是使用启用了 ARC 的 Objective-c，所以当我创建新文件并将其添加到项目中时，我倾向于使用[编译器标志](http://korutech.hubpages.com/hub/Adding-non-ARC-sources-to-ARC-projects)使它们符合 ARC （尤其是当我遇到奇怪的非 arc 代码[错误](https://stackoverflow.com/q/11788000/766570)时）。

让我彻夜难眠的问题是：在我的项目中混合使用 arc 和非 arc 代码有多安全可靠？当 QA 时间到来时，测试内存泄漏和性能等内容会是一场噩梦吗？换一种方式问..是否值得将现有的非弧码转换为弧码并摆脱潜在的麻烦？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T07:11:43.420

您可以自由混合，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:16:09.920

我不认为这是安全的，因为当 ARC 开启时某些代码被禁止，例如这种方法：

```
- (void)dealloc
{
    [super dealloc];
} 
```

当然，在发布时：

```
[exampleVariable release]; 
```

可以出现在非 ARC 项目中。

# jdk1.6 - Jitterbit studio 启动错误：

> ID：14745579
> 
> 赞同：1
> 
> 时间：2013-02-07T07:09:58.350
> 
> 标签：jdk1.6, jitterbit

嗨，我已经在 ubuntu 12.04 上安装了 jitterbit5.0 我正在使用应用程序菜单和使用

```
 jitterbit-studio50 
```

我收到以下错误：

```
Error
Exception in thread "main" java.lang.NoClassDefFoundError: Could not initialize class       java.awt.EventQueue
at org.jitterbit.integration.client.main.IntegrationMain.showStartupError(IntegrationMain.java:85)
at org.jitterbit.integration.client.main.IntegrationMain.main(IntegrationMain.java:49) 
```

我哪里出错了？我的Java版本是：

```
 java version "1.6.0_37"
 Java(TM) SE Runtime Environment (build 1.6.0_37-b06)
 Java HotSpot(TM) Server VM (build 20.12-b01, mixed mode) 
```

# triggers - 如何编写启动批处理脚本的 ClearCase 触发器？

> ID：14745580
> 
> 赞同：1
> 
> 时间：2013-02-07T07:10:01.237
> 
> 标签：triggers, clearcase

对于 ClearCase 触发器，我是一个非常新手，但我非常习惯使用 ClearCase。

我想编写一个触发器，当用户签入文件并启动 ClearCase 服务器上的批处理脚本时将触发该触发器。我假设触发器会以某种方式向我提供正在使用的活动的 ID 和作为参数的流，所以我需要学习如何使用这些。

我在哪里可以找到教程？我找到了一些文档，但它并没有真正帮助我。我需要一个分步指南来进行编程（带有代码示例）和设置它。

谢谢！

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:31:40.267

它是一个 postop checkin 触发器，您可以在“ [IBM Rational ClearCase：十大最佳触发器](http://www.ibm.com/developerworks/rational/library/4311.html)”页面中看到其中的一些：

```
cleartool mktrtype -c "Trigger to check the checkin" -element -all -postop checkin -execwin "ccperl \\server\triggers\check_checkin.bat" -execunix "Perl /net/server/triggers/check_checkin.pl" CHECK_CHECKIN 
```

您可以在页面“ [mktrtype](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mktrtype.htm) ”中查看可以在由触发器启动的脚本中使用的所有环境变量。
这包括：

*   `CLEARCASE_ACTIVITY`：UCM 活动（如果适用）涉及导致触发器触发的操作。
    对于签入、签出和取消签出操作，在用于操作的视图中设置的活动。
*   `CLEARCASE_STREAM`：UCM 流包含导致触发器触发的操作所涉及的对象（如果适用）。

注意：[OP Andrew](https://stackoverflow.com/users/1999794/andrew) [提到](https://stackoverflow.com/questions/14745580/how-do-i-write-a-clearcase-trigger-that-launches-a-batch-script/14745896#comment20671598_14745896)：

> `CLEARCASE_STREAM`EV 仅对 All`deliver`和操作`rebase`有效；, , , , , , , , 和运算。 随着操作它返回。`mkbl``mkactivity``chactivity``rmactivity``setactivity``mkstream``chstream``rmstream``chbl``rmbl`
> `checkin``NULL`

在这种情况下，您可以使用`CLEARCASE_VIEW_TAG`EV 来获取流名称：

```
 # Windows Syntax
cleartool lsstream -view %CLEARCASE_VIEW_TAG%
 # Unix Syntax
cleartool lsstream -view $CLEARCASE_VIEW_TAG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T15:51:32.643

触发器总是在客户端执行，而不是在服务器上。 [ftp://public.dhe.ibm.com/software/rational/docs/presentations/ruc99_pres/supplementccm28coverf/triggertips.html](ftp://public.dhe.ibm.com/software/rational/docs/presentations/ruc99_pres/supplementccm28coverf/triggertips.html)

# java - 在对 Java 集合进行排序时忽略单词“the”

> ID：14745583
> 
> 赞同：4
> 
> 时间：2013-02-07T07:10:04.670
> 
> 标签：java, sorting, collections

目前我有一些代码可以获取文件名并以一些不同的方式对它们进行排序（区域设置敏感的自然排序、不区分大小写的 ASCII 排序、按修改日期等），例如，对于区域设置敏感的自然排序，它使用以下方法：

```
Collections.sort(files, new Comparator<File>() {
    @Override
    public int compare(File f1, File f2) {
        return NaturalComparator.compareNatural(collator, f1.getName(), f2.getName());
    }
}); 
```

我想知道如何让它忽略文件名开头的“the”这个词，所以不要像这样排序文件：

苹果
胡萝卜
香蕉

它像这样命令它们：

苹果
香蕉
胡萝卜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T07:13:09.213

`The`您可以在将其传递给比较器之前替换第一次出现的，使用[`String#replaceFirst(regex, replacement)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)or[`String.replaceAll(regex, replacement)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法，这两个方法都需要一个`regex`作为参数来替换，并且都可以在这里使用：-

```
@Override
public int compare(File f1, File f2) {
    return NaturalComparator.compareNatural(collator, 
                                          f1.getName().replaceAll("^(?i)The ", ""), 
                                          f2.getName().replaceAll("^(?i)The ", ""));
} 
```

在进行不 *区分大小写*的替换之前添加了一个`(?i)`标志 （感谢@Chris 指出这一点）。`regex pattern`

 *`Caret (^)`在模式之前添加，因此它仅替换`The`字符串开头的。因此，`The banana`将被替换为`banana`，但`Banana, The`不会被替换为`Banana,`。它将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:15:26.077

```
Collections.sort(files, new Comparator<File>() {
    @Override
    public int compare(File f1, File f2) {
        return NaturalComparator.compareNatural(collator, f1.getName().startsWith("The  ")?f1.getName().substring(4) : f1.getName(), f2.getName().startsWith("The ")?f2.getName().substring(4):f2.getName();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:17:11.910

```
static String ignoreThe(String s) {
    if (s.length > 3) {
        if (s.substring(0, 4).toLowerCase().equal("the ")) {
            return s.substring(0, 4);
        }
    }
    return s;
}

Collections.sort(files, new Comparator<File>() {
    @Override
    public int compare(File f1, File f2) {
        String name1 = ignoreThe(f1.getName()); 
        String name1 = ignoreThe(f2.getName()); 
        return name1.compareTo(name2);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:17:18.230

尝试

```
...
return NaturalComparator.compareNatural(collator, f1.getName().replaceAll("^The ", ""), f2.getName().replaceAll("^The ", "")); 
```*

# node.js - Node js 是客户端应用程序配置管理的良好候选者吗

> ID：14745584
> 
> 赞同：0
> 
> 时间：2013-02-07T07:10:07.650
> 
> 标签：node.js, configuration

我们有各种客户端应用程序，它们需要各种参数来调用服务。这主要是服务 URL 和所有。现在我们正在注入 java 对象作为来自 asp.net 的服务器响应。或asp。因此，服务器代码执行了具有所有 vlaues 的 javascript 对象的 response.write。

我打算将配置移动到节点，以便 Javascript 应用程序可以直接调用节点并将配置值作为 json 对象获取。

一旦我将值传递给 client ，我就可以缓存它们，直到有人再次在后端进行更改。

你们认为这是否是一个好方法。

如果有人更改后端的配置值，我如何刷新缓存。

任何类型的输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:15:48.330

考虑到 asp.net 服务也可以用 JSON 对象响应，那么我想真正的问题是，“你为什么要改变服务架构”。如果您有能力更改为 node.js 以使整个堆栈都使用 Javascript，那很好，但否则这似乎有点浪费，除非 node.js 有一些您需要 asp.net 的东西才不是。作为同时使用两者的人，它们都适合作为将 JSON 传入和传出客户端的 Web 服务。

如果您希望在后端进行更改时更新您的客户端应用程序，那么听起来您需要某种 Web 服务的“推送”功能，以便它可以告诉客户端新信息可用。可以通过这两种技术（asp.net/wcf 或 node.js）使用 websockets 来做到这一点，但如何做到这一点取决于您。

# php - 如何在 php 中使用 wget？

> ID：14745587
> 
> 赞同：37
> 
> 时间：2013-02-07T07:10:23.093
> 
> 标签：php, wget

我有这个参数来下载 XML 文件：

```
wget --http-user=user --http-password=pass http://www.example.com/file.xml 
```

我如何在 php 中使用它来打开这个 xml 文件？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-07T07:12:07.697

**wget**

[`wget`](http://linux.die.net/man/1/wget)是一个 linux 命令，而不是 PHP 命令，所以要运行它，你需要使用[`exec`](http://php.net/manual/en/function.exec.php)，这是一个用于执行 shell 命令的 PHP 命令。

```
exec("wget --http-user=[user] --http-password=[pass] http://www.example.com/file.xml"); 
```

如果您正在下载一个大文件 - 并且想要监控进度，这可能很有用，但是在处理您只对内容感兴趣的页面时，有一些简单的功能可以做到这一点。

*该`exec`功能默认启用，但在某些情况下可能会禁用。此配置选项驻留在您的`php.ini`, 启用,`exec`从`disabled_functions`配置字符串中删除。*

**选择**

使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)我们可以检索指定 URL/URI 的内容。当您只需要将文件读入变量时，这将是替代 curl 的完美功能 -在构建 URL 时遵循[URI 语法。](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier#Syntax)

```
// standard url
$content = file_get_contents("http://www.example.com/file.xml");

// or with basic auth
$content = file_get_contents("http://user:pass@www.example.com/file.xml"); 
```

*如前所述`Sean the Bean`- 您可能还需要在 php.ini 中更改* *为**以允许在此方法中使用 URL，但是，默认情况下应该是这样。*[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php) *`true`*

如果您想将该文件存储在本地，则有一个[`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)将其写入文件的功能，结合以前的功能，这可以模拟文件下载：

```
file_put_contents("local_file.xml", $content); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-07T07:11:44.843

如果目标只是在应用程序中加载内容，您甚至不需要使用`wget`：

```
$xmlData = file_get_contents('http://user:pass@example.com/file.xml'); 
```

请注意，如果[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)在 php.ini 或 Web 服务器配置（例如 httpd.conf）中禁用（默认启用）此功能将不起作用。

如果您的主机明确禁用它，或者您正在编写库，建议使用[cURL](http://php.net/curl)或抽象功能的库，例如[Guzzle](http://guzzle.readthedocs.org)。

```
use GuzzleHttp\Client;

$client = new Client([
  'base_url' => 'http://example.com',
  'defaults' => [
    'auth'    => ['user', 'pass'],
]]);

$xmlData = $client->get('/file.xml'); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-19T09:01:33.453

您可以使用`curl`为了获取数据和被识别（**对于“基本”和“摘要”身份验证**），而不需要扩展权限（如 exec 或 allow_url_fopen）。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/file.xml");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_USERPWD, "user:pass");
$result = curl_exec($ch);
curl_close($ch); 
```

然后，您的结果将存储在`$result`变量中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-21T07:11:37.507

php 中有很多方法可以读取 exec、file_get_contents、curl 和 fopen 等文件，但这取决于您的要求和文件权限

访问这个[file_get_contents vs cUrl](https://stackoverflow.com/questions/25970872/file-get-contents-vs-curl-which-is-more-relevant-and-secure)

基本上是为你准备的 file_get_contents

```
$data = file_get_contents($file_url); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-24T12:23:08.197

如果在 php 中使用 Curl...

```
function disguise_curl($url) 
{ 
  $curl = curl_init(); 

  // Setup headers - I used the same headers from Firefox version 2.0.0.6 
  // below was split up because php.net said the line was too long. :/ 
  $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,"; 
  $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"; 
  $header[] = "Cache-Control: max-age=0"; 
  $header[] = "Connection: keep-alive"; 
  $header[] = "Keep-Alive: 300"; 
  $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; 
  $header[] = "Accept-Language: en-us,en;q=0.5"; 
  $header[] = "Pragma: "; // browsers keep this blank. 

  curl_setopt($curl, CURLOPT_URL, $url); 
  curl_setopt($curl, CURLOPT_USERAGENT, 'Googlebot/2.1 (+http://www.google.com/bot.html)'); 
  curl_setopt($curl, CURLOPT_HTTPHEADER, $header); 
  curl_setopt($curl, CURLOPT_REFERER, 'http://www.google.com'); 
  curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate'); 
  curl_setopt($curl, CURLOPT_AUTOREFERER, true); 
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
  curl_setopt($curl, CURLOPT_TIMEOUT, 10); 

  $html = curl_exec($curl); // execute the curl command 
  curl_close($curl); // close the connection 

  return $html; // and finally, return $html 
} 

// uses the function and displays the text off the website 
$text = disguise_curl($url); 
echo $text; 
?> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-25T04:27:35.410

*该方法只是一个类，不需要导入其他库或重用代码。*

我个人使用我不久前制作的这个脚本。位于[此处，](http://api.kbcomp.co/http/)但对于那些不想单击该链接的人，您可以在下面查看。它允许开发人员使用静态方法`HTTP::GET($url, $options)`在 curl 中使用 get 方法，同时能够通过自定义 curl 选项。您也可以使用`HTTP::POST($url, $options)`，但我几乎不使用该方法。

```
/**
  *  echo HTTP::POST('http://accounts.kbcomp.co',
  *      array(
  *            'user_name'=>'demo@example.com',
  *            'user_password'=>'demo1234'
  *      )
  *  );
  *  OR
  *  echo HTTP::GET('http://api.austinkregel.com/colors/E64B3B/1');
  *                  
  */

class HTTP{
   public static function GET($url,Array $options=array()){
    $ch = curl_init();
    if(count($options>0)){
       curl_setopt_array($ch, $options);
       curl_setopt($ch, CURLOPT_URL, $url);
       $json = curl_exec($ch);
       curl_close($ch);
       return $json;
     }
   }
   public static function POST($url, $postfields, $options = null){
       $ch = curl_init();
       $options = array(
          CURLOPT_URL=>$url,
          CURLOPT_RETURNTRANSFER => TRUE,
          CURLOPT_POSTFIELDS => $postfields,
          CURLOPT_HEADER => true
          //CURLOPT_HTTPHEADER, array('Content-Type:application/json')
          ); 
       if(count($options>0)){
           curl_setopt_array($ch, $options);
       }
       $json = curl_exec($ch);
       curl_close($ch);
       return $json;
   }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-24T12:26:01.777

[Shellwrap](https://github.com/MrRio/shellwrap)是在 PHP 中使用命令行的绝佳工具！

您的示例可以非常简单易读地完成：

```
use MrRio\ShellWrap as sh;

$xml = (string)sh::curl(['u' => 'user:pass'], 'http://example.com/file.xml'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-25T22:23:47.740

我了解您想使用 php 打开一个 xml 文件。这被称为解析 xml 文件。最好的参考在这里。

[http://php.net/manual/de/function.xml-parse.php](http://php.net/manual/de/function.xml-parse.php)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-09T10:27:24.437

```
<?php
function wget($address,$filename)
{
  file_put_contents($filename,file_get_contents($address));
}
?> 
```

采用：

```
<?php
wget(URL, FileName);
?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-27T12:23:04.623

> 要在 PHP 中运行 wget 命令，您必须执行以下步骤：
> 
> 1) 通过将 wget 命令添加到 sudoers 列表中，允许 apache 服务器使用 wget 命令。
> 
> 2）检查“exec”功能是否已启用或存在于您的 PHP 配置中。
> 
> 3）以root用户身份运行“exec”命令，即sudo用户
> 
> 下面的代码示例根据 ubuntu 机器

```
#Add apache in sudoers list to use wget command
~$ sudo nano /etc/sudoers
#add below line in the sudoers file
www-data ALL=(ALL) NOPASSWD: /usr/bin/wget

##Now in PHP file run wget command as 
exec("/usr/bin/sudo wget -P PATH_WHERE_WANT_TO_PLACE_FILE URL_OF_FILE"); 
```

# php - 多个 MySQL 表到 json_encode

> ID：14745588
> 
> 赞同：5
> 
> 时间：2013-02-07T07:10:27.887
> 
> 标签：php, mysql, join, json

我的数据库中有 3 个不同的表，分别称为`consoleConsole`、`consoleModel`和`consoleGame`。然后我想做的是每个控制台内部都有一个循环用于它的模型，每个模型内部都有另一个循环用于它的游戏，如下所示：

```
[
   {
      "Console":"PlayStation",
      "Information":[
         {
            "Model":"PlayStation 3",
            "Title":[
               {
                  "Game":"007 Legends",
                  "Publisher":"Electronic Arts"
               },
               {
                  "Game":"Ace Combat: Assault Horizon",
                  "Publisher":"Namco"
               }
            ]
         },
         {
            "Model":"PlayStation 2",
            "Title":[
               {
                  "Game":"007: Agent of Fire",
                  "Publisher":"Electronic Arts"
               },
               {
                  "Game":"Ace Combat 4: Shattered Skies",
                  "Publisher":"Namco"
               }
            ]
         },
         {
            "Model":"PlayStation 1",
            "Title":[
               {
                  "Game":"007 Racing",
                  "Publisher":"Electronic Arts"
               },
               {
                  "Game":"Ace Combat",
                  "Publisher":"Namco"
               }
            ]
         }
      ]
   },
   {
      "Console":"Wii",
      "Information":[
         {
            "Model":"Wii",
            "Title":[
               {
                  "Game":"007: Quantum of Solace",
                  "Publisher":"Activision"
               },
               {
                  "Game":"AC/DC Live: Rock Band Track Rack",
                  "Publisher":"MTV Games"
               }
            ]
         }
      ]
   },
   {
      "Console":"Xbox",
      "Information":[
         {
            "Model":"Xbox",
            "Title":[
               {
                  "Game":"AFL",
                  "Publisher":"Acclaim"
               },
               {
                  "Game":"American Chopper",
                  "Publisher":"Activision"
               }
            ]
         },
         {
            "Model":"Xbox 360",
            "Title":[
               {
                  "Game":"AFL Live",
                  "Publisher":"Electronic Arts"
               },
               {
                  "Game":"Akai Katana Shin",
                  "Publisher":"Cave"
               }
            ]
         }
      ]
   }
] 
```

但可悲的是，我没有将我的数据库与这个数据库一起使用，而是直接将它写在一个 php 文件中。

**编辑**

无论如何，继续前进。我修改了我的代码，结果是这样的。

```
<?PHP
    $consoleQuery = "SELECT * ".
    "FROM consoleConsole ".
        "JOIN consoleModel ".
                "ON consoleConsole.consoleId = consoleModel.consoleId ".
            "JOIN consoleGame ".
                "ON consoleModel.modelId = consoleGame.gameId";

$consoleResult = mysql_query($consoleQuery);

$consoleFields = array_fill_keys(array(
    'consoleName',
    ), null);

$modelFields = array_fill_keys(array(
    'modelName',
    ), null);

$console = array();
$rowConsole = array();

while ($rowConsole = mysql_fetch_assoc($consoleResult)) {
    $consoleId = $rowConsole['consoleId'];
    $modelId = $row['modelId'];
    if (isset($console[$consoleId]['Information'])) {
        $console[$consoleId]['Information'][] = array_intersect_key($rowConsole, $modelFields);
    }

    else {
        $console[$consoleId] = array_intersect_key($rowConsole, $consoleFields);
        $console[$consoleId]['Information'] = array(array_intersect_key($rowConsole, $modelFields));
    }
}

$console = array_values($console);
echo json_encode($console);

?> 
```

我能够产生一个输出，但它看起来不像上面的输出。

```
[
  {
    "consoleName": "PlayStation",
    "Information": [
      {
        "modelName": "PlayStation"
      },
      {
        "modelName": "PlayStation 2"
      },
      {
        "modelName": "PlayStation 3"
      },
      {
        "modelName": "PlayStation 3"
      }
    ]
  },
  {
    "consoleName": "Wii",
    "Information": [
      {
        "modelName": "Wii"
      },
      {
        "modelName": "Wii"
      }
    ]
  },
  {
    "consoleName": "Xbox",
    "Information": [
      {
        "modelName": "Xbox"
      },
      {
        "modelName": "Xbox 360"
      }
    ]
  }
] 
```

他们的关系： ![在此处输入图像描述](../Images/13df574d769327bddbaa5619c9931b8c.png)

我现在的问题是，我无法添加每个游戏的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:17:51.630

由于您使用 php 函数对 json 进行编码，因此它将以默认格式为您提供 json。您要做的是使用字符串操作创建自己的函数以获得所需的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T23:12:15.423

好的，所以我已经写了您的解决方案。您必须确保其中包含 order by，因为它假定您将它们与那里的物品一起订购。我也不知道您的发布者是如何存储的，所以我将其分离到一个单独的表中（这将允许您随后也可以通过那里的发布者获取项目），现在是 4 个连接。另外在另一个说明中，我也将其更新为进行内部连接。这样，对于没有分配任何游戏的控制台，您将不会得到空结果。如果你想要这些，你可以简单地改变连接，这样它也会给你这些结果。让我知道这是否有帮助

```
//get all of the information
$query = '
    SELECT c.consoleId,c.consoleName,m.modelId,m.modelName,g.gameId,g.gameName,p.publisherId,p.publisherName
    FROM `consoleconsole` c
        INNER JOIN `consolemodel` m ON c.consoleId=m.consoleId
        INNER JOIN `consolegame` g ON m.modelId=g.modelId
        INNER JOIN `consolepublisher` p ON g.publisherId = p.publisherId
    ORDER BY c.consoleName, m.modelName, g.gameName
';

//get the results
$result = mysql_query($query);

//setup array to hold information
$consoles = array();

//setup holders for the different types so that we can filter out the data
$consoleId = 0;
$modelId = 0;

//setup to hold our current index
$consoleIndex = -1;
$modelIndex = -1;

//go through the rows
while($row = mysql_fetch_assoc($result)){
    if($consoleId != $row['consoleId']){
        $consoleIndex++;
        $modelIndex = -1;
        $consoleId = $row['consoleId'];

        //add the console
        $consoles[$consoleIndex]['console'] = $row['consoleName'];

        //setup the information array
        $consoles[$consoleIndex]['information'] = array();
    }

    if($modelId != $row['modelId']){
        $modelIndex++;
        $modelId = $row['modelId'];

        //add the model to the console
        $consoles[$consoleIndex]['information'][$modelIndex]['model'] = $row['modelName'];

        //setup the title array
        $consoles[$consoleIndex]['information'][$modelIndex]['title'] = array();
    }

    //add the game to the current console and model
    $consoles[$consoleIndex]['information'][$modelIndex]['title'][] = array(
        'game'      => $row['gameName'],
        'publisher' => $row['publisherName']
    );
}

echo json_encode($consoles); 
```

# node.js - 如何将 tropo 模块与 node.js 一起使用？

> ID：14745592
> 
> 赞同：0
> 
> 时间：2013-02-07T07:10:47.890
> 
> 标签：node.js, tropo

在我的应用程序中，我需要使用带有 node.js 的 tropo 应用程序来发送、接收消息以及拨打和接听电话。我看到了文档，但我不明白。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:01:26.420

免责声明 - 我从未使用过 tropo，但这就是我理解它的工作方式：

1.  您编写了一个 tropo 可以在大多数语言中解析的脚本，以执行某些功能。
2.  您可以使用 tropo 的 Web 界面将该脚本链接到一个数字。
3.  您/客户拨打该号码，tropo 获取您的脚本并执行它。

以下是上述所有工作原理的完整演练：[https ://www.tropo.com/docs/scripting/creating_first_application.htm](https://www.tropo.com/docs/scripting/creating_first_application.htm)

现在，如果您希望您的脚本执行动态操作，您需要自己托管它。为此，您可以使用 node.js：

1.  您在 node.js 中编写了一个根据时间/用户数据更改的脚本
2.  您可以使用 tropo 的 Web 界面链接脚本。
3.  当有人呼叫/发送号码时，tropo 现在会从您的 node.js 服务器获取动态脚本。

此 node.js api 可用于在您的节点服务器上编写脚本：[https://github.com/tropo/tropo-webapi-node](https://github.com/tropo/tropo-webapi-node)，[https://www.tropo.com/docs/webapi/new_tropo_web_api_overview.htm](https://www.tropo.com/docs/webapi/new_tropo_web_api_overview.htm)

最后，您可能希望为不同的用户动态创建不同的脚本并将它们连接到各个号码。此时，您使用 REST API 来自动执行您过去必须在 tropo 网站上手动完成的“号码连接工作”。您可以使用任何节点 REST 客户端，例如[`request`](https://github.com/mikeal/request)这样做。以下是 API 文档：[https ://www.tropo.com/docs/rest/rest_api.htm](https://www.tropo.com/docs/rest/rest_api.htm)

# python - 未能获得 facebook access_token

> ID：14745594
> 
> 赞同：2
> 
> 时间：2013-02-07T07:11:03.063
> 
> 标签：python, facebook, google-app-engine, facebook-oauth

这是从 facebook-sdk 示例获取 access_token 的一部分。得到后`code`，我完全按照下面的示例进行操作

```
 if self.request.get("code"):
            args["client_secret"] = FACEBOOK_APP_SECRET
            args["code"] = self.request.get("code")
            response = cgi.parse_qs(urllib.urlopen(
                "https://graph.facebook.com/oauth/access_token?" +
                urllib.urlencode(args)).read())
            access_token = response["access_token"][-1] 
```

我得到的错误`response`是

```
'{"error":{"message":"Error validating verification code. Please make sure your redirect_uri is identical to the one you used in the OAuth dialog request","type":"OAuthException","code":100}} 
```

谁能告诉我有什么问题？

这是我为了获取 access_token 而获得的链接

```
https://graph.facebook.com/oauth/access_token?code=AQD3K0Qc-9mJ1pUIWovhbO549GIk-X_y2v6VRbjFB_WtHMtINtU6GTZ4T2rBbjUr9teiGbhxsBm23xjRXhX4CfWdMXgsNXjgTOUeG9Nz6oNmgluvZwv3oQQ42w8vBTowlDGOdKvmW065WrQTLW3e8oZJ7C_XNwUl5bYDD5JF_JLD9O4BBfAGbfRHWHAf6Yy0ewaJr8MmtU-qhemYe8mQ2hrM&client_secret=xxxxx&redirect_uri=http%3A%2F%2F127.0.0.1%3A8088&client_id=xxxx 
```

它有`https://graph.facebook.com/oauth/access_token?` `code`, `client_secret`, `redirect_uri`,`client_id`

我是否错过了获取 access_token 的任何参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:12:54.793

我知道了。我`redirect_uri`需要一个破折号“/”在网址的末尾。

应该是“ [http://abc.com/](http://abc.com) **”**

找错太痛苦了

# android - LocalActivityManager 在尝试添加选项卡时显示警告和无法在活动中使用 TabHost - 应用程序停止

> ID：14745597
> 
> 赞同：3
> 
> 时间：2013-02-07T07:11:23.020
> 
> 标签：android, tabs

这有什么错误？我在 LocalActivityManager 上收到警告：

> LocalActivityManager 类型已弃用

这是代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.app.LocalActivityManager; **// Showing Cancel Warning**
import android.content.Intent;
import android.view.Menu;
import android.widget.TabHost;

public class MainActivity extends Activity {

TabHost tabHost;
@SuppressWarnings("deprecation")
LocalActivityManager mLocalActivityManager; **// Showing Cancel Warning**

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initTabs(savedInstanceState);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected void onResume() {
    mLocalActivityManager.dispatchResume(); 
    super.onResume();
}

@Override
protected void onPause() {
    mLocalActivityManager.dispatchPause(isFinishing());
    super.onPause();
}

@SuppressWarnings("deprecation")
private void initTabs(Bundle savedInstanceState) {
    tabHost = (TabHost) findViewById(android.R.id.tabhost);     // The activity TabHost
    mLocalActivityManager = new LocalActivityManager(this, false);
    mLocalActivityManager.dispatchCreate(savedInstanceState);
    tabHost.setup(mLocalActivityManager);

    TabHost.TabSpec spec;                               // Resusable TabSpec for each tab
    Intent intent;                                      // Reusable Intent for each tab        

    intent = new Intent("com.plastemart.plastemartandroid");
    spec = tabHost.newTabSpec("text").setIndicator("Latest")
                  .setContent(intent);
    tabHost.addTab(spec);      **// Getting Error Unfortunitly Application Stopped...Why?**

    intent = new Intent("com.plastemart.plastemartandroid");
    spec = tabHost.newTabSpec("text").setIndicator("Latest")
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent("com.plastemart.plastemartandroid");
    spec = tabHost.newTabSpec("text").setIndicator("Latest")
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent("com.plastemart.plastemartandroid");
    spec = tabHost.newTabSpec("text").setIndicator("Latest")
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(4);
} 
```

我的 XML 如下

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:orientation="vertical"
tools:context=".MainActivity" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="36dp"
    android:background="@drawable/bg_plastemart_title" >

    <TextView
        android:id="@+id/textViewTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Plastemart.Com"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ffffff" />
</RelativeLayout>

<TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:fillViewport="true"
                android:scrollbars="none" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >
                </TabWidget>
            </HorizontalScrollView>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />

            <LinearLayout
                    android:id="@+id/tab1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                    android:id="@+id/tab2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                    android:id="@+id/tab3"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
            </LinearLayout>

        </LinearLayout>
</TabHost> 
```

我哪里错了？我是Android的初学者。如果找到解决方案，请详细说明。我通过在互联网上查找步骤和解决方案编写了上面的代码，但我从过去 4 天开始就被困在这里。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:12:48.417

此类在 API 级别 13 中已弃用。建议使用 Fragment 和 FragmentManager。如果您不打算使用 Fragment 和 FragmentManager API，那么您需要忍受此警告消息。

请理解，这只是一条警告消息，而不是错误消息。所以你仍然可以忍受这个。但推荐的选项是使用 Fragment 和 FragmentManager API

您可以在此处查看有关已弃用类的更多详细信息[http://developer.android.com/reference/android/app/LocalActivityManager.html](http://developer.android.com/reference/android/app/LocalActivityManager.html)

片段 - [http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html) FragmentManager - [http://developer.android.com/reference/android/app/FragmentManager.html](http://developer.android.com/reference/android/app/FragmentManager.html)

# android - Android ListView 项目在滚动时重叠

> ID：14745599
> 
> 赞同：2
> 
> 时间：2013-02-07T07:11:39.633
> 
> 标签：android, android-listview

我已经`ListView`使用自定义实现在我的应用程序中实现了`CursorAdapter`. 我的问题是，每当我快速滚动到列表底部时（在启动应用程序之后），有时我最终会看到所有 ListView 项目相互重叠。如果我向上滚动或触​​摸其中一项，它们就会被正确排列。

这是我快速向下滚动后的样子：http: [//i.stack.imgur.com/cTcfD.png](http://i.stack.imgur.com/cTcfD.png)

这是我选择其中一项时的 外观： [http :](http://i.stack.imgur.com/ZTRSt.png) *//i.stack.imgur.com/ZTRSt.png*

这是我的 XML `ListView`：

```
<ListView
        android:id="@+id/all_reminders_list"
        android:paddingLeft="4dp"
        android:paddingRight="4dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:layout_alignParentLeft="true"
        android:clickable="true"
        android:dividerHeight="1.0sp"
        android:animateLayoutChanges="true"> 
```

这`newView(..)`是我的自定义 CursorAdapter 的方法：

```
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(parent.getContext());
    View view = inflater.inflate(R.layout.view_list_item, parent, false);
    return view;
} 
```

这是`bindView(..)`方法：

```
 public void bindView(View view, Context context, Cursor cursor) {

        TextView whatTextView = (TextView) view.findViewById(R.id.item_what_text);
        whatTextView.setText(cursor.getString(1));
        TextView whenTextView = (TextView) view.findViewById(R.id.item_when_text);

        if(cursor.getInt(9) != 0) // DONE_FLAG = 1 (completed)
        {
            //Arrow visibility
            ImageView arrow = (ImageView)view.findViewById(R.id.list_item_arrow);
            arrow.setVisibility(View.INVISIBLE);

            //Text color
            whatTextView.setTextColor(Color.LTGRAY);
            whenTextView.setTextColor(Color.LTGRAY);

            //WHEN text
            whenTextView.setText(TimeCalculationHelper.getCompletedTimeString(cursor.getLong(2)));
        }
        else // DONE_FLAG = 0
        {
            //Arrow visibility
            ImageView arrow = (ImageView)view.findViewById(R.id.list_item_arrow);
            arrow.setVisibility(View.VISIBLE);

            //Text color
            whatTextView.setTextColor(Color.BLACK);
            whenTextView.setTextColor(Color.BLACK);

            //WHEN text
            whenTextView.setText(TimeCalculationHelper.getTimeRemainingString(cursor.getLong(2)));

        }
} 
```

我还注意到，只有当我的设备（Galaxy S2）处于省电模式时，我才能复制它。有什么我应该在这里做不同的事情吗？提前致谢！

**编辑**：包括列表项的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingLeft="2dp">

<TextView android:id="@+id/item_what_text"
          android:lines="1"
          android:maxLines="2"
          android:textSize="22dp"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:paddingTop="3dp"/>

<TextView android:id="@+id/item_when_text"
          android:lines="1"
          android:maxLines="1"
          android:textSize="14dp"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="13 minutes"
          android:paddingBottom="2dp"
          android:layout_below="@+id/item_what_text"/>

<ImageView
    android:id="@+id/list_item_arrow"
    android:src="@drawable/next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:19:08.530

我也遇到了同样的问题，我的 ListView 中的列表项在滚动时相互重叠。

**我的解决方法：** 我刚刚为包含相关 ListView 的父布局指定了背景。以前是透明的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T21:36:34.110

我遇到了同样的问题，发现它是由 listview 上的 animateLayoutChanges 属性设置为 true 引起的。

不幸的是，我通过删除它失去了列表视图的动画，但至少在快速滚动时它可以正确绘制。

正如 Pavan 所提到的，为父布局提供背景似乎也可以解决问题。如果我发现背景更改存在问题，将尝试并更改我的答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T04:45:55.953

为了解决这个问题，我还有一个解决方案：

我使用这种布局遇到了问题：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"    
    >       
        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:scrollbars="none"            
            android:paddingTop="4dip"   
            android:dividerHeight="0dp"
            android:divider="@null"   
            android:cacheColorHint="#00000000"
            android:listSelector="@color/transprent_editbox"
            android:focusableInTouchMode="false" />           
</RelativeLayout> 
```

为了解决这个问题，我只是对上面的布局做了一些修改，它们是：1）将顶部布局从相对布局更改为线性布局。2）将我的 ListView 放在其他相对布局中.. 我这样做了：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"    
    android:orientation="vertical" >
        <RelativeLayout        
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"       
            android:orientation="vertical" >
        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:scrollbars="none"            
            android:paddingTop="4dip"   
            android:dividerHeight="0dp"
            android:divider="@null"   
            android:cacheColorHint="#00000000"
            android:listSelector="@color/transprent_editbox"
            android:focusableInTouchMode="false" />
        </RelativeLayout>
</LinearLayout> 
```

使用后，我的问题解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T08:30:11.010

1.在我看来，高度是 wrap_content 因为 listview 是恢复行 2.其他意见是在 ListView 中写这段代码 android:cacheColorHint="#00000000"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-13T13:29:10.953

我也遇到了同样的问题，发现导致问题的 animateLayoutChanges 属性。

所以我改变了

```
android:animateLayoutChanges="true" 
```

至

```
android:animateLayoutChanges="false" 
```

它奏效了。

# python - django 是设置操作更快还是 for 循环？

> ID：14745601
> 
> 赞同：0
> 
> 时间：2013-02-07T07:11:43.703
> 
> 标签：python, django

以下哪个操作更快？

使用 for 循环：

```
 OrgIdChoices = []
 Orgid_used_choices = [(choice["organization_id"])for choice in list(Organization.objects.all().values("organization_id"))]   #Gets used ID's
 OrgIdAvailChoices  = [ "%c%c" % (x, y) for x in range(ord('A'), ord('Z')+1) for y in range(ord('A'), ord('Z')+1)]  #Gets available ID's
 for i in OrgIdAvailChoices:
      if not i in Orgid_used_choices:
          OrgIdChoices.append((i,i))   #Generates OrgIdAvailChoices which are not in Orgid_used_choices 
```

或使用集合操作：

```
 OrgIdChoices = []
 Orgid_used_choices = set([(choice["organization_id"])for choice in list(Organization.objects.all().values("organization_id"))])
 OrgIdAvailChoices  = set([ "%c%c" % (x, y) for x in range(ord('A'), ord('Z')+1) for y in range(ord('A'), ord('Z')+1)])
 OrgChoices = OrgIdAvailChoices - Orgid_used_choices
 for i in OrgChoices:
     OrgIdChoices.append((i,i)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T08:12:02.477

查看[QuerySet API 文档](https://docs.djangoproject.com/en/1.5/ref/models/querysets/)，更准确地说是`values_list`部分 (with `flat=True`) 和`distinct()`部分。当然，这会比`values`提取您想要的字段并转换为`list`或`set`接近的速度更快。

之后，生成集合`OrgIdAvailChoices`和`difference_update`使用 QuerySet 的简单方法应该比您建议的方法快得多。

或者，受 Pannu 评论的启发，采用以下方法`itertools`：

```
import itertools
import string

filter(
    lambda x: x not in OrgIdAvailChoices,
    [''.join(el) for el in itertools.combinations_with_replacement(string.ascii_uppercase, 2)]
) 
```

说实话，我不确定是否`QuerySet`实际上是一个集合，也就是说，如果其中的搜索是对数的，但根据我的经验判断，正确使用 Django 的 ORM（如我的回答开头所述）将为您带来最大的加速。

# iphone - Iphone-如何让图像连续旋转约 60 秒然后在另一个方向停止

> ID：14745602
> 
> 赞同：0
> 
> 时间：2013-02-07T07:11:43.830
> 
> 标签：iphone, objective-c, animation, xcode4.5

我需要图像旋转几次，然后在相反的方向停下来。该图像是一个带有箭头的按钮，它指向右侧，然后它旋转了几次，然后停止面向另一方向。任何帮助将不胜感激。这就是我目前所拥有的。

```
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
  animation.duration = 0.60;//animation.duration = 0.60;
  animation.repeatCount = 1;//animation.repeatCount = 1000ˆ

//#warning remove comment brackets below

  animation.keyTimes = [NSArray arrayWithObjects:
                        [NSNumber numberWithFloat:0.0],
                        [NSNumber numberWithFloat:1.0], nil];

  animation.values = [NSArray arrayWithObjects:
                      [NSNumber numberWithFloat:0.0],
                      [NSNumber numberWithFloat:(degrees / 180)*M_PI], nil];

  animation.fillMode = kCAFillModeForwards; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:57:42.313

请试试这个，让我知道。这对我有用。

```
UIImageView *tempView = [[UIImageView alloc] initWithFrame:CGRectMake(100, 100, 80, 80)];
    tempView.image = [UIImage imageNamed:@"Icon"];
    tempView.backgroundColor = [UIColor redColor];
    [self.view addSubview:tempView];

    const NSUInteger rotations = 10;
    const NSTimeInterval duration  = 5;

    CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation"];
    CGFloat touchUpStartAngle = 0;
    CGFloat touchUpEndAngle = (M_PI);
    CGFloat angularVelocity = (((2 * M_PI) * rotations) + M_PI) / duration;
    anim.values = @[@(touchUpStartAngle), @(touchUpStartAngle + angularVelocity * duration)];
    anim.duration = duration;
    anim.autoreverses = NO;
    anim.delegate = self;
    anim.repeatCount = 1;
    anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    [tempView.layer addAnimation:anim forKey:@"test"];

    tempView.transform = CGAffineTransformMakeRotation(touchUpStartAngle + (touchUpEndAngle)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:48:57.247

以下代码适用于我。它实际上并没有改变方向。我认为您可以通过添加一个更改 imagesArray 的计时器来实现这一点。首先，我也尝试像您一样使用 CAKeyframeAnimation，但我无法弄清楚。所以我改用动画图像 - 我认为这种方式不会太糟糕，因为 Apple 例如也使用这种方式来为活动指示器设置动画。

```
-(void) myImageInitFunction {
    UIImage *icon = [UIImage imageNamed:@"yourIconImage"];
    NSArray *imagesArray = rotatingImagesArrayOfImage(icon, 30);
    myImageViewThatShouldRotate.animationImages = imageArray;
    myImageViewThatShouldRotate.animationDuration= 2.0;
    [myImageViewThatShouldRotate startAnimating];
}

NSArray *rotatingImagesArrayOfImage(UIImage * icon, NSInteger nFrames)
{
    NSMutableArray *images = [NSMutableArray arrayWithObject:icon];

    for (NSInteger nLoop = 1; nLoop < nFrames; nLoop++) {
            [images addObject: [UIImage imageWithCGImage: CGImageRotatedByAngle(icon.CGImage, nLoop * ( 360 / nFrames)) ] ];
    }
    return images;
}

CGImageRef CGImageRotatedByAngle(CGImageRef imgRef,  CGFloat angle) {
    CGFloat angleInRadians = angle * (M_PI / 180);
    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGRect imgRect = CGRectMake(0, 0, width, height);
    CGAffineTransform transform = CGAffineTransformMakeRotation(angleInRadians);
    CGRect rotatedRect = CGRectApplyAffineTransform(imgRect, transform);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef bmContext = CGBitmapContextCreate(NULL,
                                               rotatedRect.size.width,
                                               rotatedRect.size.height,
                                               8,
                                               0,
                                               colorSpace,
                                               kCGImageAlphaPremultipliedFirst);
    CGContextSetAllowsAntialiasing(bmContext, YES);
    CGContextSetShouldAntialias(bmContext, YES);
    CGContextSetInterpolationQuality(bmContext, kCGInterpolationHigh);
    CGColorSpaceRelease(colorSpace);
    CGContextTranslateCTM(bmContext,
                      +(rotatedRect.size.width/2),
                      +(rotatedRect.size.height/2));
    CGContextRotateCTM(bmContext, angleInRadians);
    CGContextTranslateCTM(bmContext,
                      -(rotatedRect.size.width/2),
                      -(rotatedRect.size.height/2));
    CGContextDrawImage(bmContext, CGRectMake(0, 0,
                                         rotatedRect.size.width,
                                         rotatedRect.size.height),
                   imgRef);

    CGImageRef rotatedImage = CGBitmapContextCreateImage(bmContext);
    CFRelease(bmContext);

    return rotatedImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:55:17.767

我用这个：

```
- (void)startAnimations {

   CABasicAnimation* spinAnimation = [CABasicAnimation
                                   animationWithKeyPath:@"transform.rotation"];
   spinAnimation.toValue = [NSNumber numberWithFloat:M_PI];
   spinAnimation.cumulative = YES;
   spinAnimation.duration = 0.5;
   spinAnimation.repeatCount = 10000;
   [imageView.layer addAnimation:spinAnimation forKey:@"spinAnimation"];

}
- (void)cancelAnimations {

   [imageView.layer removeAnimationForKey:@"spinAnimation"];
   imageView.transform = CGAffineTransformMakeRotation(0.0);

} 
```

在开始动画中调用计时器以在 60 秒内调用取消动画。你可以随心所欲地制作旋转角度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:50:19.240

谢谢大家这个页面现在非常足智多谋。

这是另一种解决方案。

```
- (CAKeyframeAnimation *)rotateFrom:(CGFloat)fromDegrees to:(CGFloat)toDegrees {
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
    animation.delegate = self;
    animation.duration = 0.30;
    animation.repeatCount = 1;

    animation.keyTimes = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.0],
                          [NSNumber numberWithFloat:1.0], nil];

    animation.values= [NSArray arrayWithObjects:
                       [NSNumber numberWithFloat:fromDegrees*(M_PI/180)],
                       [NSNumber numberWithFloat:toDegrees*(M_PI/180)], nil];

    animation.fillMode = kCAFillModeForwards;

    animation.removedOnCompletion = NO;

    return animation;

} 
```

# c - linux系统打开设备文件失败

> ID：14745603
> 
> 赞同：0
> 
> 时间：2013-02-07T07:11:44.613
> 
> 标签：c, linux, linux-kernel, uart

我在基于 omap4 的系统中工作。它有 4 个 UART 端口，因此内核可以：

```
/dev/ttyO0
/dev/ttyO1
/dev/ttyO2
/dev/ttyO3 
```

当我从用户空间打开时：

```
fd = open("/dev/ttyO1",O_RDONLY) 
```

它成功打开，我可以用它进行读写。

但是当我打开时：

```
fd = open("/dev/ttyO3",O_RDONLY) 
```

它失败了。

我仍然可以在我的系统中看到`/dev/ttyO3`节点，为什么我无法打开它？任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:31:22.387

我已授予该节点的权限，现在我可以打开该节点

```
chmod 0606 /dev/ttyO3 
```

# rabbitmq - RabbitMQ 和轮询主题交流

> ID：14745607
> 
> 赞同：16
> 
> 时间：2013-02-07T07:12:00.307
> 
> 标签：rabbitmq

我正在寻求一些关于如何最好地配置我的 rabbitMQ 交换的建议。

我正在尝试在循环方法中使用主题交换。每个消费者都有自己的（唯一的）命名队列附加到主题交换。我希望交换轮询消息到每个消费者队列的“相同”主题 -`*.log`比如说。

我尝试了多种组合，但似乎只能同时将消息传递到消费者队列，这实际上意味着我要处理消息两次，每个消费者一次。

为了清楚起见，我还有一个扇出交换，我用它来“控制”消费者（开始、停止等）。这应该在任何结果中保持不变。

任何关于如何最好地实现既定结果的指导都会很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-18T22:51:49.477

> 每个消费者都有自己的（唯一的）命名队列附加到主题交换

诀窍是让您想要在其之间循环的每个工作人员/消费者设置一个命名队列，并且都使用相同的队列而不是创建自己的队列。

因此，您可以为所有“日志”工作人员创建一个名为“日志”的命名队列。您将为所有“foo”工作人员创建一个不同的命名队列，例如“foo”。请求将循环传递给查看同一队列的所有消费者。

# html - 如何做css样式

> ID：14745609
> 
> 赞同：0
> 
> 时间：2013-02-07T07:12:05.443
> 
> 标签：html, css

手头上的一个非常简单的任务..但是我的浏览器因为我徒劳的尝试而在我脸上大笑。

如何在文本周围设置 div 类的样式

所以我在后端使用 jinja，我的 html 看起来像这样

```
<div class="content">
<pre>  {{contents}}</pre>
</div> 
```

我的CSS是

```
div.content {
    background-color: #add8e6;

} 
```

但是正在发生的事情是..如果“内容”是行的一半..这种样式跨越整个水平线..我只想优雅地将颜色包裹在文本而不是整个水平页面上。当我尝试

```
display: inline; 
```

所有背景颜色都消失了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:13:56.243

采用`display:inline-block`

```
div.content {
    background-color: #add8e6;
    display:inline-block

} 
```

**[演示](http://jsfiddle.net/KNq8j/)**

**`inline`和之间的区别`inline-block`**

**inline-block** - 此值使元素生成内联级块容器。内联块的内部被格式化为块框，元素本身被格式化为原子内联级框。

**inline** - 此值使元素生成一个或多个内联框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:14:04.373

试试这个：

```
div.content * {
    background-color: #add8e6;
} 
```

这会将样式应用于 div 块中的所有元素。

# c++ - 验证值的函数在调用 1 位时返回 true，但当其为 2 或更多时，即使它为 true，它也会返回 false

> ID：14745610
> 
> 赞同：0
> 
> 时间：2013-02-07T07:12:06.947
> 
> 标签：c++

所以我已经解决这个问题几个小时了，我不知道出了什么问题。如果调用的 int 是有效的，则此函数返回 true 或 false。当我调用一个 1 位长的有效数字时，“0”或“1”返回 true。但是，当我调用一个大于 1 位的数字（例如应该返回 true 的“83”或“955”）时，即使它应该返回 true，它也总是返回 false！

我的验证器功能：

```
int isRegistered(FILE* file, int area) {

int areaDigit = 0;
int check = 0;

while(fscanf(file, "%d %*[^ ] %*[^\n]", &areaDigit) != EOF)
{
     if (area == areaDigit)
       check = 1;
}

return check; 
```

以及调用该函数的代码：

```
 for ( i = 0; i < areaCounter; i++)
    {
    cout << areaInt << endl;
    areaCheck = isRegistered(file, areaInt);

    if (areaCheck != 1)
        areaInt = areaInt * 10 + areaIntA[i+1];
    } 
```

如果 areaIntA[3] 的值 = 955，则循环调用 9，然后是 95，然后是 955，直到它不再有要调用的数字。955 应该返回 true，因为该值是 true，但由于某种原因它返回 false。

当我调用为真的“0”或“1”时，它返回真，但对于任何大于 1 位的数字，它总是返回假。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:33:07.060

该函数`isRegistered`将文件读取到其末尾，并且您永远不会倒回它。第一次调用`isRegistered`工作正常，但下一次调用永远不会进入`while`循环，因为`fscanf`返回 EOF。

如果`isRegistered`要搜索整个文件，请尝试以下操作：

```
int isRegistered (FILE * file, int area)
{
    int areaDigit = 0;

    rewind (file);  // Go to beginning of file and clear flags

    while (fscanf (file, "%d %*[^ ] %*[^\n]", &areaDigit) != EOF)
        if (area == areaDigit)
            return 1;

    return 0;
} 
```

# android - 如何在 Android 中查找视频/图像文件的分辨率

> ID：14745614
> 
> 赞同：0
> 
> 时间：2013-02-07T07:12:22.577
> 
> 标签：android

我想知道我的媒体文件（视频/图像）在 Android 中的分辨率（高度、宽度）是多少。

我有我的文件路径，它可以存储在内部或外部存储中。

我遇到了一些 API ，例如 等`MediaStore`，`Media`但不知道如何使用它们。

谁能告诉我以最少开销检索此元数据的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:38:50.897

找到了方法：

**对于视频**

```
MediaMetaDataRetriever mdr = new MediaMetaDataRetriever();
mdr.setDataSource("file_path");
int height = Integer.parseInt(mdr.extractMetadata(MediaMetadataRetriver.METADATA_KEY_VIDEO_HEIGHT));
int width = Integer.parseInt(mdr.extractMetadata(MediaMetadataRetriver.METADATA_KEY_VIDEO_WIDTH)); 
```

**图像**

```
Bitmap bitmap = BitmapFactory.decodeFile("file_path");
bitmap.getHeight();
bitmap.getWidth(); 
```

# heroku - heroku moonshado 倒闭了？

> ID：14745616
> 
> 赞同：1
> 
> 时间：2013-02-07T07:12:42.970
> 
> 标签：heroku

在过去 2 周内，Moonshado 已停止为我的应用程序运行。

1.  错误是：“帐户 getaddrinfo：名称或服务未知”
2.  heroku仪表板显示我的moonshado插件已“弃用”..这是什么意思？我还没有收到任何相关信息，我仍然需要为插件付费。
3.  单击我的 heroku 仪表板页面上的 moonshado 链接失败并出现错误：“找不到 heroku.moonshado.com 上的服务器，因为 DNS 查找失败。”
4.  `$ curl http://<API KEY>@heroku.moonshado.com
    curl: (6) Couldn't resolve host 'heroku.moonshado.com'
    $ nslookup heroku.moonshado.com
    ** server can't find heroku.moonshado.com.gateway.xxxxx.net: REFUSED`

5.  拨打 Moonshado 联系电话 (800) 971-3106 的电话在 3 声响后挂断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:00:44.497

Moonshado 似乎没有响应 - 他们的网站似乎只有一半功能，并且已从附加组件目录中删除：[https ://devcenter.heroku.com/articles/moonshadosms](https://devcenter.heroku.com/articles/moonshadosms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:48:43.933

我注意到我使用 Heroku 应用程序的 Moonshado 最近停止工作，并联系了刚刚告诉我的 Heroku 支持：

> 嘿，本，
> 
> Moonshado 在二月份的几个小时内停止了工作。您会在 2 月的发票上发现，我们从当月 1 日起将您切换到免费计划，这样您就不会再产生任何费用，并且在 3 月我们完全取消了附加组件的配置。
> 
> 最好的，
> 
> G

希望 Heroku 将与其他提供商安排一个短信插件。

# windows - 远程操作花费的时间比预期的要长

> ID：14745620
> 
> 赞同：1
> 
> 时间：2013-02-07T07:13:04.760
> 
> 标签：windows, visual-studio-2012, windows-phone-8

我正在 VS2012 Express 中为 windows phone 开发 windows phone 应用程序。当我使用 ctrl+F5 运行应用程序时，它会正确安装并运行良好。但是当我按F5时。我收到“**远程操作花费的时间比预期的长**”错误。我无法调试应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:24:04.910

检查您是否使用 VPN。卸载 Astrill VPN 对我有用。

# sql - 如何使用 forxml 子句从 xmlstring 中读取列值

> ID：14745624
> 
> 赞同：0
> 
> 时间：2013-02-07T07:13:27.387
> 
> 标签：sql, xml, for-xml

在我们的数据库表中，列存储为 xml 字符串，如下所示。

```
<DocumentElement>
  <PartInfo>
    <ID>0</ID>
    <PartNo>0</PartNo>
    <SerialNo>1</SerialNo>
    <Parameter>0</Parameter>
    <InstalledDate>2013-01-15T00:00:00+05:30</InstalledDate>
    <InstalledTill>2013-01-25T00:00:00+05:30</InstalledTill>
  </PartInfo>
  </DocumentElement> 
```

我想获取此字符串的列值。例如，我必须获取列的值`2013-01-15T00:00:00+05`。`Installed Date`如何使用 forxml 子句获得这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:26:23.747

假设 SQL-Server 你可以使用这样的东西：

```
DECLARE @T TABLE (X XML);
INSERT @T VALUES ('<DocumentElement>
  <PartInfo>
    <ID>0</ID>
    <PartNo>0</PartNo>
    <SerialNo>1</SerialNo>
    <Parameter>0</Parameter>
    <InstalledDate>2013-01-15T00:00:00+05:30</InstalledDate>
    <InstalledTill>2013-01-25T00:00:00+05:30</InstalledTill>
  </PartInfo>
  </DocumentElement>');

SELECT  InstalledDate = X.value('/DocumentElement[1]/PartInfo[1]/InstalledDate[1]', 'DATETIME')
FROM    @T; 
```

如果您可以在其中有多个`PartInfo`节点，`DocumentElement`那么您将需要使用`CROSS APPLY .. nodes`来获取所有`InstalledDate`s

```
SELECT  InstalledDate = PartInfo.value('InstalledDate[1]', 'DATETIME')
FROM    @T
        CROSS APPLY X.nodes('/DocumentElement/PartInfo') p (PartInfo); 
```

# ruby-on-rails - 在使用之前（：全部）时，使用 Capybara 对 Rails 的 Rspec 测试失败

> ID：14745626
> 
> 赞同：1
> 
> 时间：2013-02-07T07:13:34.420
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

您好，我是**Rails**的新手，现在正在尝试制作一个**简单的推文应用程序**。

我写了一个简单的测试并尝试使用`before(:all)`，因为我**不想****每次都**访问页面，但是测试并没有保留访问页面对象。

当然，当我使用`before(:each)`测试成功时，但是当`it`增加到大量时，我想测试的时间也会增加。

我怎样才能写这个测试`before(:all)`？谢谢你的好心。

```
# /spec/requests/tweet_pages.spec
require 'spec_helper'

describe "TweetPages" do
  describe "GET /tweet_pages" do

    before(:each) {visit tweets_path} # this line pass test but...
    #before(:all) {visit tweets_path} # next line fails in second it test. 

    subject {page}
    context do
      its(:status_code) {should == 200}
      it {should have_selector 'input'}
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:41:28.280

*   `before(:each)`每个`it`语句运行一次。
*   `before(:all)`为它所在的每个`context`或`describe`块运行一次。

在你的情况下试图强制`before(:all)`会适得其反，但一种方法是将结果存储在 a 中`@@class_variable`，然后在你的主题中重用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:57:48.393

如果我没记错 before(:all) 运行给定描述或上下文块中的所有示例。在这种情况下，您的示例位于它们自己的上下文块中。如果您要删除上下文块，则测试应该通过。否则，您可以将 before(:all) 块添加到您希望 before(:all) 有权访问的描述或上下文块中。

NB 还建议添加一个 after(:all) 块来避免之前(:all) 给你带来的麻烦。一般来说，不建议使用 before(:all) 。

# php - php 无法从组合框中输入正确的选定值

> ID：14745628
> 
> 赞同：0
> 
> 时间：2013-02-07T07:13:45.983
> 
> 标签：php, combobox

这就是我所拥有的::

```
 <form action="" method="post">
 <input type="hidden" name="id" value="<?php echo $id; ?>"/>
 <input type="hidden" name="email" value="<?php echo $email; ?>"/><br/>
 <strong>Applicant ID:</strong> <?php echo $id; ?><br />
 <strong>Applicant name: </strong> 
 <input type="text" name="username" readonly value="<?php echo $lastname. "," . $firstname. " " .substr($middlename, 0,1); ?>"/><br/>
 <strong>Username: </strong><input type="text" readonly name="username" value="<?php echo $username; ?>" /> <br />
 <strong>Password: </strong><input type="text" readonly name="password" value="<?php echo $password; ?>" /> <br />

 <strong>Manage Application: </strong><select name="status">
  <?php
    $selection = array(
    0 => "Pending",
    1 => "Approve",
    2 => "Revoke" );

    foreach($selection as $key => $value)
    {
        echo '<option value="' . $key . '"';
        if ($status == $key)
        echo ' selected="selected"';
        echo '>' . $value . '</option>';
        echo ' <br />';
    }
?>
</select>
<br />

<button type="submit" name="submit" value="Submit"><img src="../../images/login.png" />Update</button>

<?php 

if(isset($_POST['submit']))
{
if($value == 'Approve'){

$to = $_POST['email'];
//define the subject of the email
$subject = 'BCE Scholars Application Notification';  
//define the message to be sent. Each line should be separated with \n
$message = "Congratulations! Your application is approved."; 
//define the headers we want passed. Note that they are separated with \r\n
$headers = "From: bcescholar@yahoo.com\r\nReply-To: bcescholar@yahoo.com";
//send the email
if (mail($to, $subject, $message, $headers)) {
echo("<p>Congrats!</p>");
} else {
echo("<p>Message delivery failed...</p>");
}
}

if($value == 'Revoke')
{
$to = $_POST['email'];
//define the subject of the email
$subject = 'BCE Scholars Application Notification'; 
//define the message to be sent. Each line should be separated with \n
$message = "Sorry your application is revoked."; 
//define the headers we want passed. Note that they are separated with \r\n
$headers = "From: bcescholar@yahoo.com\r\nReply-To: bcescholar@yahoo.com";
//send the email
if (mail($to, $subject, $message, $headers)) {
echo("<p>Congrats!</p>");
} else {
echo("<p>Message delivery failed...</p>");
}
}

} // end of if button pressed

  ?>

 <a href="../index.php"><button type="button"><img src="../../images/back.png"/>Back</button></a>
 </div>
</form> 
```

我的网站正在向其申请人发送电子邮件通知。如果管理员从组合框中选择了批准，它会自动发送一封电子邮件，否则也会发送一封电子邮件通知申请人他的申请已被撤销/拒绝。但我的问题是它没有进入 APPROVE if ($value == 'Approve') 语句。它总是进入 REVOKE 语句。这有什么问题？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:20:57.987

问题是，这`$value`只能在您的`foreach($selection as $key => $value)`循环中访问，但您尝试**在循环之外**使用它。您可以将您的值保存到临时数组中，以便以后使用它们

**例子：**

```
$tempArray = array();
foreach($selection as $key => $value)
{
    echo '<option value="' . $key . '"';
    if ($status == $key)
    echo ' selected="selected"';
    echo '>' . $value . '</option>';
    echo ' <br />';
    $tempArray[] = $value;
} 
```

然后通过以下方式访问它：

```
for($i = 0; $i < count($tempArray[]); $i++) {
   // do what you want sith $tempArray[$i];
} 
```

**但我认为你想做的是**

`if($_POST['status'] == 1)`检查您的组合框中是否选择了“批准”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:34:11.917

我已经解决了！

因为我保存了它的状态ID，所以我改为

```
 if($_POST['status'] == 1) 
```

感谢所有帮助过的人！

# c - 有没有办法让 printf 只引用一个变量的一个实例来重复 x 次相同的转换字符？

> ID：14745629
> 
> 赞同：1
> 
> 时间：2013-02-07T07:13:46.993
> 
> 标签：c, printf

我在想可能有一个“技巧”来复合`printf()`?

或者像这样的例子......

```
float x;
printf("%.1f %.1f %.1f %.1f \n", x, x, x, x ); 
```

像这样

```
float x;
printf("%.1f %.1f %.1f %.1f \n", magicArrayOfxAmountofx); 
```

（我知道这是错误的——我主要是为了美观和神奇的目的，我在想如果它是相同的值，必须有一个“技巧”将右侧复合`printf()`到一个变量中？也许是一个数组？作为我的变量name 比它长得多`x`，我想保持它的名称不变，不要让这`printf()`条线太长！）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T07:19:48.300

就在这里。在 POSIX 系统上，`printf()`允许您使用`n$`转换说明符中的修饰符指定应打印的参数，其中`n`表示要打印的参数的编号，从 1 开始。你可以利用这个事实：

```
printf("%1$f %1$f %1$f %1$f\n", 1.0f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:35:45.710

不完全是您所要求的，但在这个特定的示例中，看起来您最好使用循环，以减少格式字符串和变量列表中的代码重复。就像是：

```
for(k=0; k<4; ++k)
    printf("%.1f ", x);
printf("\n") 
```

（当然，如果您要经常这样做，无论如何您都希望将该代码放入函数中。）

# c - gcc 内联汇编中的双百分号 (%%) 有什么作用？

> ID：14745631
> 
> 赞同：12
> 
> 时间：2013-02-07T07:13:54.563
> 
> 标签：c, gcc, x86

我遇到了一个看起来像这样的代码：

```
asm volatile (
    # [...]
    "movl $1200, %%ecx;"
    # [...]
); 
```

我知道`movl $1200, %ecx`在 x86 中做了什么。但我对为什么有两个百分号感到困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T07:16:17.053

GCC 内联汇编使用 %0、%1、%2 等来引用输入和输出操作数。这意味着您需要将两个 %% 用于实际寄存器。

查看此[操作指南](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)以获取重要信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-29T21:07:54.207

**这取决于**

*   如果字符串后面有一个冒号`:`，那么它是一个[扩展的 asm](https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)，并转义了[Carl 提到的](https://stackoverflow.com/a/14745659/895245)`%%`可能具有特殊含义的百分比。例子：

    ```
    uint32_t in = 1;
    uint32_t out = 0;
    asm volatile (
        "movl %1, %%eax;"
        "inc %%eax;"
        "movl %%eax, %0"
        : "=m" (out) /* Outputs. '=' means written to. */
        : "m" (in)   /* Inputs. No '='. */
        : "%eax"
    );
    assert(out == in + 1); 
    ```

*   否则，这将是一个编译时错误，因为没有冒号它是一个[基本的 asm](https://gcc.gnu.org/onlinedocs/gcc/Basic-Asm.html#Basic-Asm)，它不支持变量约束并且不需要或支持转义`%1`。例如：

    ```
    asm volatile ("movl $1200, %ecx;"); 
    ```

    工作得很好。

扩展 asm 更常用，因为它更强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T10:22:18.877

这有助于 GCC 区分操作数和寄存器。操作数有一个 % 作为前缀。'%%' 总是与寄存器一起使用。

# iphone - 提交后更改应用截图

> ID：14745633
> 
> 赞同：22
> 
> 时间：2013-02-07T07:13:58.383
> 
> 标签：iphone, ios, xcode, app-store, app-store-connect

我有一个简单的问题。

提交应用程序后，我可以在 itunesconnect.apple.com 的“元数据和上传”部分更改我的应用程序的屏幕截图**吗？**（起初我的应用程序在被拒绝后被苹果拒绝，我在应用程序中进行了一些更改，然后在上传时使用“准备上传二进制文件”按钮再次上传新的二进制文件，`iTunesconnect`他没有要求我更新屏幕截图..）

如果没有，我需要重新上传二进制文件吗？

我在 itunesconnect 中的当前状态显示`Waiting for review`

谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-07T07:23:54.627

甚至最近（谁知道什么时候......）显然您可以在应用程序等待审核时再次更改屏幕截图。

* * *

最近（2015 年或更早），即使您的应用“等待审核”，您也无法更改屏幕截图。

* * *

*应用程序获得批准后，*您不得更改它们，所以要快。请参阅Apple 发布的[此新闻稿](https://developer.apple.com/news/index.php?id=1092013a)：

此举被认为是[一种阻止垃圾邮件发送者](http://www.macstories.net/links/app-store-screenshot-changes/)发布虚假应用程序然后更改屏幕截图以模仿现有流行应用程序的方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-16T07:11:27.613

与 Apple 交谈后更新：

在 2015 年 8 月 18 日美国东部时间下午 12:30，答案仍然是否定的——但仍有希望。

我在 2015 年 8 月 17 日星期一与 Apple 进行了交谈，在调查了该问题后，他们解释说，由于 iTunes Connect 的持续更新，iTunes Connect 截图上传存在临时错误，如 WWDC 所述。他们现在意识到了这个问题，他们的工程师将尽快恢复旧功能，允许我们在等待审核时上传新图像。同时，如果需要修改截图，简单的“Remove this version from review”，换屏，然后重新点击“Submit For Review”。

我希望这有帮助。
:-)

在 2015 年 8 月 16 日美国东部时间凌晨 2 点 48 分，答案是否定的。

我无法在 Safari、Chrome 或 Firefox 中编辑、添加或删除屏幕截图，状态为“等待审核”。在编辑任何其他内容之前我不能这样做——比如标题或关键字，它们是可编辑的——我也不能在编辑任何其他内容之后这样做。

我已完整阅读以上链接中提供的所有指南。在某一点上，它变成了关于编辑元数据和应用程序状态的循环链接。是的，当应用程序不可编辑时屏幕被锁定，但所有迹象都表明等待审核是可编辑状态。没有任何证据表明情况并非如此。哎呀，在应用程序屏幕的顶部公然声明：“（i）您可以在您的版本等待审核时编辑所有信息。要提交新版本，您必须从审核中删除此版本。”

但是，一个人做不到。这是一个真正的打击，因为直到为时已晚并且正在阅读这些帖子时才意识到这一点-现在人们意识到自己已经浪费了时间，必须拒绝并重新排队。要么这样，要么带着劣质的元数据屏幕进入市场。

我将在太平洋标准时间早上 7 点拨打联系电话。如果有任何变化，我会更新这篇文章。如果没有更新，可以假设这是此时的最终状态。

*** 可悲的是：如果你需要改变你的元屏幕，而你做不到，停止希望，停止阅读，我很抱歉地说：你做不到。取消提交，更改版本号，更改屏幕并重新提交，越早越好。

:-(

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-01T02:40:43.673

我今天晚上才发现，当它进入“审查”时，他们将其锁定。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-26T07:00:41.553

这些“规则”会不时更改，目前（2015 年 6 月）您可以在提交审核时更改某些项目，但不能更改图像。

有关您可以更改和不能更改的内容的更多信息位于此处： [https ://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Appendices/Properties.html#//apple_ref/doc/uid/TP40011225 -CH26-SW2](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Appendices/Properties.html#//apple_ref/doc/uid/TP40011225-CH26-SW2)

最后一列当前状态`Locked`。它还指出：

> 常规应用信息属性被锁定或解锁。解锁的属性始终是可编辑的。锁定的属性仅在您的应用处于可编辑状态时才可编辑。本节中的表格指示属性是锁定还是解锁。您对未锁定的常规应用信息属性所做的更改会立即发布（预计 24 小时后会在商店中完全刷新更改）。另请参阅关于应用程序状态。

有关应用程序状态的信息： [https ://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/ChangingAppStatus.html#//apple_ref/doc/uid/TP40011225-CH30-SW23](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/ChangingAppStatus.html#//apple_ref/doc/uid/TP40011225-CH30-SW23)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-19T08:05:37.147

苹果最近改变[了他们的指导方针](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Appendices/Properties.html)。一旦应用程序状态更改为“等待审核”，您显然不能再删除或更改屏幕截图。

-_-

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T07:19:04.010

如果您需要更改二进制文件，您可以更改它。您可以通过删除现有屏幕截图（如果有五个或替换一个）来上传新屏幕截图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-18T12:52:18.980

当应用程序处于“**等待审核**”状态时，您可以更改屏幕截图。我确实在 2019 年 10 月 18 日星期五检查了它。

从 App Store Connect 网站复制：

> 在您的版本等待审核期间，您仍然可以编辑所有信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-18T07:34:36.803

我今天能够更改已经“等待审核”的应用程序的几个屏幕截图。所以显然这又是可能的。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2013-02-07T07:17:27.753

是的。

您可以在申请批准后上传/更改屏幕截图。

甚至您也可以更改应用程序的价格和描述。

但是您不能更改应用程序的类别。

所以，目前，如果你已经上传了2张截图，那么在app审核通过后，你可以上传其他3张截图，或者也可以更改现有的2张截图。

希望，你有一个想法。

干杯!

# scala - 使用 Scala 进行网页抓取

> ID：14745634
> 
> 赞同：37
> 
> 时间：2013-02-07T07:13:58.740
> 
> 标签：scala, web-scraping, libraries

只是想知道是否有人知道利用 Scala 简洁语法的网络抓取库。到目前为止，我已经找到[了 Chafe](https://github.com/ofrasergreen/chafed)，但这似乎没有得到很好的记录和维护。我想知道是否有人已经用 Scala 进行了抓取并有建议。（我正在尝试集成到现有的 Scala 框架中，而不是使用用 Python 编写的爬虫。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T20:04:50.550

首先，JVM 中有大量的 HTML 抓取库，您需要做的就是[对其中一个进行 pimp（pimp my library pattern）](http://www.decodified.com/scala/2010/12/02/the-quickpimp-pattern)。

我用过的四个是：

*   HtmlUnit - 将模拟浏览器甚至运行 Javascript
*   Jericho - 如果您想编辑抓取的 HTML，则保留格式和理想的
*   NekoHTML
*   JSoup -~~[不适用于 Scala](https://issues.scala-lang.org/browse/SI-3809)~~。[可能工作](https://stackoverflow.com/questions/14745634/web-scraping-with-scala/14759873#comment20659065_14759873)

我使用过 Selenium，但从未用于刮擦。[Scala 有一个围绕 selenium 的包装器](http://www.scalatest.org/user_guide/using_selenium)。

我建议将现有的 Java 库放在一些半生不熟的 Scala 库上。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T19:56:53.873

我没有针对 Scala 的建议，但对于 JVM，我在以下方面取得了很好的成功：

*   [JSoup](http://jsoup.org/)您可以使用 CSS 选择器“抓取”文档。真的很高兴与之合作。
*   使用[Tagsoup](http://ccil.org/~cowan/XML/tagsoup/)将您的输入 HTML 转换为 XML，然后使用 XML 处理器“抓取”。

Tagsoup 路线实际上与 Scala 配合得很好，因为 Scala 的内置 XML“dsl”非常简洁（如果您可以原谅它的性能问题和偶尔的 API 怪异）。此外，Tagsoup 将处理您提供给它的几乎所有垃圾文档。它还具有一些细节，例如对许多 HTML 实体的内置理解，其他 SAXParsers 会因为未声明而窒息。

**tl;dr** - 如果可能，JSoup + CSS 选择器，否则为 Tagsoup + scala XML。如果慢没问题，先tagsoup，然后jsoup结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T19:39:09.700

我推荐鹅：[https ://github.com/jiminoc/goose](https://github.com/jiminoc/goose)

它不像您可能需要的那样通用，但如果您从热门网站抓取文章内容，它可能开箱即用。如果您想扩展他们的代码以覆盖其他站点，它还为您提供了一个工作框架。

# html - 固定高度容器上没有滚动图像背景

> ID：14745638
> 
> 赞同：0
> 
> 时间：2013-02-07T07:14:30.583
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 2.2.2。我有一个固定高度的容器（基于用户窗口高度）并为其激活了滚动条。

问题来自容器的图像背景：即使我已将其设置为滚动，它仍处于固定状态。

这是我的CSS：

```
html {
    width:100%;
    height:100%;
    overflow:hidden;
}
#tb1 {
    width:100%;
    height:40px;
    background-color:blue;
}
#tb2 {
    width:100%;
    height:30px;
    background-color:red;
}
#container {
    /*overflow-y:hidden;
    height:400px;*/
    background:url(http://placehold.it/350x150) no-repeat scroll transparent;
    position:absolute;
    top:70px;
    left:0;
    right:0;
    bottom:0;
}
#row1 {
    padding:10px;
    overflow-y:scroll;
    max-height:100%;
} 
```

HTML：

```
<html>

    <head>
        <link rel="stylesheet" media="screen" href="//cdn.a973c.com/scripts/bootstrap/2.2.2/bootstrap-2.2.2.css">
        <link rel="stylesheet" media="screen" href="//cdn.a973c.com/scripts/bootstrap/2.2.2/bootstrap-responsive-2.2.2.css">
    </head>

    <body>
        <div id="tb1">tb1</div>
        <div id="tb2">tb2</div>
        <div id="container" class="container-fluid">
            <div class="row-fluid" id="row1" style="height:1500px;">
                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

                 <h1>content</h1>

            </div>
        </div>
    </body>

</html> 
```

还有一个[jsFiffle](http://jsfiddle.net/A973C/hbJqm/1/)

我的代码有什么问题？

谢谢你的帮助！

编辑：当我为#row1 取消设置高度时，我的背景正在正确滚动......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:43:34.980

错误代码是：

```
 background:url(http://placehold.it/350x150) no-repeat scroll transparent;//No .png provied 
```

您的 css 中未提供文件的扩展名。它应该像下面

**正确的代码**

```
background:url(http://placehold.it/350x150.png) repeat scroll transparent; 
```

正如我所看到的，我刚刚尝试使用`.png`它可以工作的扩展名，您需要通过扩展名指定哪种类型的文件

这是[小提琴](http://jsfiddle.net/krish/hbJqm/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T15:51:20.920

添加**“背景附件：本地”**应该可以解决您的问题：

```
#container {
    overflow-y:auto;
    height:400px;
    background:url(http://placehold.it/350x150) no-repeat transparent;
    background-attachment: local;
    top:70px;
    left:0;
    right:0;
    bottom:0;
}
#row1 {
    padding:10px;
    max-height:100%;
} 
```

# linux - 支持 Linux 机器的打包工具

> ID：14745642
> 
> 赞同：0
> 
> 时间：2013-02-07T07:14:50.680
> 
> 标签：linux, installation

我需要打包工具列表来创建一个支持 linux 机器的安装程序。我需要打包一些软件并在linux机器上逐步安装它们。为此，我需要一些工具。请任何人建议我使用支持 linux 机器的最佳工具。

对于 Windows，我知道 Advanced Installer，Install Shield 工具。但是这些工具只支持windows而不是linux机器......任何人都可以建议我使用一些安装程序工具来打包我的linux应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:34:35.880

您也可以创建 tar.gz 或自解压 tar，但这取决于您要打包的软件类型。最方便的是使用像[https://build.opensuse.org/](https://build.opensuse.org/)这样的在线构建服务。这将使用户能够通过他们的发行工具进行安装。

# php - 使用 get_where 返回两个表

> ID：14745645
> 
> 赞同：1
> 
> 时间：2013-02-07T07:14:52.897
> 
> 标签：php, codeigniter

我正在使用 php (codeigniter)，我希望执行此查询

```
SELECT * FROM families, products WHERE family = "madison" 
```

在这从

```
 $query = $this->db->get_where("families", array("family" => $key)); 
```

当我尝试

```
$query = $this->db->get_where("families", "products" array("family" => $key)); 
```

它返回错误。有没有办法做到这一点？

编辑：
发生数据库错误

```
Error Number: 1054

Unknown column 'products' in 'where clause'

SELECT * FROM (`families`) WHERE `products` IS NULL LIMIT 1

Filename: /Users/Home/Sites/models/family_get.php

Line Number: 5 
```

问题是选择两个表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:20:10.120

这不是有效的 PHP 语法。

```
$query = $this->db->get_where("families", "products" array("family" => $key)); 
```

您应该只将两个参数传递给`get_where`. 像这样的东西：

```
$query = $this->db->get_where("families, products", array("family" => $key)); 
```

请注意，它`get_where`需要四个参数，但您没有使用偏移量/限制，因此可以省略这些*可选参数。*

# python - KStatusNotifierItem 在较新版本的 KDE 4 中不起作用

> ID：14745646
> 
> 赞同：0
> 
> 时间：2013-02-07T07:15:03.690
> 
> 标签：python, pyqt, kde, pykde

我有一个使用 PyKDE4 的 KStatusNotifierItem 的小程序。在从 kde4-config -v 获取的版本（Qt - 4.8.4，KDE 开发平台 - 4.9.5）的 Arch Linux 中，它可以工作。

但是，在带有版本（Qt - 4.8.3，KDE 开发平台 - 4.9.98）的 Kubuntu 12.10 中，它不起作用。谁能指出我如何调试它？

这是代码的示例。

```
#!/usr/bin/python2
# -*- coding: utf-8 -*-

import sys
from PyQt4 import Qt
from PyQt4.QtCore import QObject, QString
from PyKDE4.kdeui import KStatusNotifierItem

App = Qt.QApplication(sys.argv)

class Notifier(QObject):
  def __init__(self, parent=None):
    QObject.__init__(self, parent)

    self.tray = KStatusNotifierItem(self)
    self.tray.setCategory(KStatusNotifierItem.Communications)
    self.tray.setIconByName(QString("/usr/share/icons/oxygen/16x16/categories/applications-internet.png"))
    self.tray.setStatus(KStatusNotifierItem.Active)
    self.tray.setToolTipIconByName(QString("/usr/share/icons/oxygen/16x16/categories/applications-internet.png"))

if __name__ == '__main__':
  notifer = Notifier()
  App.exec_() 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:30:16.477

我也在[bugs.kde.org 上报告了这个问题，](https://bugs.kde.org/show_bug.cgi?id=314595)他们找到了解决方案。基本上该行`self.tray = KStatusNotifierItem(self)`需要更改为`self.tray = KStatusNotifierItem("someID", self)`.

# orbeon - 引用不存在的模型 id：autocomplete-model

> ID：14745647
> 
> 赞同：0
> 
> 时间：2013-02-07T07:15:05.370
> 
> 标签：orbeon

4.0.0 Beta 3 中出现问题

这是嵌入在 xf:group 中的脚本片段（引用不同的模型），它是 xxf:dialog 的一部分。

```
<fr:autocomplete id="bookingDescription" ref="summary" class="bookingDescriptor" dynamic-itemset="false" max-results-displayed="25" show-full-itemset-dropdown="true">
    <xf:label></xf:label>
    <xf:itemset model="coreModel" nodeset="instance('appointmentList')/descriptions">
        <xf:label ref="name"/>
        <xf:value ref="name"/>
    </xf:itemset>                       
</fr:autocomplete> 
```

当对话框通过 X 按钮或操作中的 xxf:hide 关闭时，我们会遇到标题中提到的问题。这发生在 xforms-disable 处理程序进程中。似乎是 xforms 上下文堆栈中的 validationException 错误的结果。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T02:02:27.843

这看起来像一个错误。我在跟踪器中创建[了一个问题](https://github.com/orbeon/orbeon-forms/issues/829)，您可以观看该线程以获取更新。

# android - 我们如何在 android 中创建一个不同于 spinner 的自定义下拉列表？请帮我写代码

> ID：14745648
> 
> 赞同：0
> 
> 时间：2013-02-07T07:15:11.037
> 
> 标签：android

与微调器不同，下拉列表应具有固定的预定义名称。当它的元素被点击时，他们应该传递一个 Intent 去他们相应的活动。希望有好的代码。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:30:07.643

我将在此处发布基础知识，但您可以在我们的 github 存储库 ( [https://github.com/todoroo/astrid](https://github.com/todoroo/astrid) ) 中找到更多详细信息。基本思想是按照 hanry 的建议扩展 GreenDroid 的 QuickActionWidget。子类看起来像：

```
public class MenuPopover extends QuickActionWidget {

protected DisplayMetrics metrics;
protected LinearLayout content;

public MenuPopover(Context context) {
    super(context);
    setContentView(R.layout.my_layout);

    content = (LinearLayout) getContentView().findViewById(R.id.content);
    metrics = context.getResources().getDisplayMetrics();

    setFocusable(true);
    setTouchable(true);
}

@Override
protected void populateQuickActions(List<QuickAction> quickActions) {
    // Do nothing
}

@Override
protected void onMeasureAndLayout(Rect anchorRect, View contentView) {
    contentView.setLayoutParams(new     FrameLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,     ViewGroup.LayoutParams.WRAP_CONTENT));
    contentView.measure(MeasureSpec.makeMeasureSpec(getScreenWidth(),     MeasureSpec.EXACTLY),
            ViewGroup.LayoutParams.WRAP_CONTENT);

    int rootHeight = contentView.getMeasuredHeight();

    int offsetY = getArrowOffsetY();
    int dyTop = anchorRect.top;
    int dyBottom = getScreenHeight() - anchorRect.bottom;

    boolean onTop = (dyTop > dyBottom);
    int popupY = (onTop) ? anchorRect.top - rootHeight + offsetY : anchorRect.bottom -  offsetY;

    setWidgetSpecs(popupY, onTop);
}
} 
```

布局文件 my_layout.xml 非常简单：

```
 <LinearLayout
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/gdi_arrow_up"
            android:orientation="vertical"/>

    <ImageView
        android:id="@+id/gdi_arrow_up"
        android:layout_width="27dip"
        android:layout_height="27dip"
        android:layout_marginLeft="-10dip"
        android:scaleType="fitCenter"
        android:layout_marginBottom="-8dip"
        android:src="?attr/asListArrowUp" />

    <ImageView
        android:id="@+id/gdi_arrow_down"
        android:layout_width="27dip"
        android:layout_height="27dip"
        android:scaleType="fitCenter"
        android:layout_marginBottom="-8dip"
        android:layout_below="@android:id/list"/>

    </RelativeLayout> 
```

然后，您只需向 popover 类添加一个简单的辅助方法，即可将视图（即行，带有可选侦听器）添加到 popover 的主体：

```
public void addViewToContent(View v, OnClickListener listener) {
    content.addView(v);
    if (listener != null) {
        v.setOnClickListener(listener);
    }
} 
```

创建弹出窗口的实例后，您可以通过调用来显示它

```
menuPopover.show(anchorView); 
```

这是一个稍微简化的版本——在实践中，我们将一些附加信息、侦听器等附加到这些视图中，以使它们在单击时实际执行操作。如果你愿意，你可以在[https://github.com/todoroo/astrid](https://github.com/todoroo/astrid)查看完整的代码——类是 com.todoroo.astrid.ui.MainMenuPopover。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:25:36.963

为什么您希望它与 Spinner 不同？您可以将微调器设置为在选择项目时启动活动。

```
 playlistsSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int pos, long arg3) {
            Intent intent = new Intent(this, yourOtherActivity.class);
            intent.putExtra("extra-pos", pos);

            //or, if you want different activites then: 
            Intent newActivity;
            switch (pos) {
            case 0:
                newActivity = new Intent(this, activityB.class); 
                break;
            case 1: 
                newActivity = new Intent(this, activityC.class); 
                break;
            default:
                //do nothing
                break;
            }
            if (newActivity != null) {
                startActivity(newActivity);
            }
        } 
```

您还可以根据自己的喜好自定义微调器的外观。

# c# - 检查流是否可以读取，以便它不会引发异常 c#

> ID：14745649
> 
> 赞同：1
> 
> 时间：2013-02-07T07:15:19.007
> 
> 标签：c#, stream

我正在使用 TCP 客户端

这是我的代码

```
do
{

   responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);

   bytes = stream.Read(data, 0, data.Length);

} while (bytes != 0); 
```

我有时在这里遇到错误

```
bytes = stream.Read(data, 0, data.Length); 
```

现有连接被服务器强制关闭。

如何处理。

如何检查流是否可以继续读取。

在服务器端，我正在写入流并关闭它。我应该在服务器上做点什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:36:35.123

该代码适用于流正常关闭的正常/健康场景。您所描述的（“现有连接被服务器强制关闭”）*不是*正常/健康的场景，因此它告诉您这个问题是完全合理的，它通过抛出异常来做到这一点。如果您正在读取文件，并且文件系统变得不可用（有人拉动磁盘/笔式驱动器等），这与您可能期望的相同。

所以：`catch`异常并适当地处理它。

*除了很好地*关闭流之外，您在服务器上没有什么特别的事情可以做。

# c - Julia Set - 以 CUDA 为例 - 帮我设置项目

> ID：14745652
> 
> 赞同：4
> 
> 时间：2013-02-07T07:15:39.090
> 
> 标签：c, cuda, nvidia

我一直在阅读 Jason Sanders 和 Edward Kandrot 的 CUDA by Example 并遇到了第 4 章，他们使用 CUDA 解决了 Julia Set。此外，书籍页面上还有可用的源代码；[https://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0](https://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0)

当我尝试包含项目所需的所有文件（所有头文件和 .cu 文件）时，它不会编译。我从头开始创建的常用 CUDA 项目没有问题（VS 2010，CUDA 5.0）。

有没有人遇到过同样的问题，您能否指定每个步骤以使这个 Julia Set 设置为应有的状态？

PS这是一个在头文件中不起作用的代码：

```
/*
 * Copyright 1993-2010 NVIDIA Corporation.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property and
 * proprietary rights in and to this software and related documentation.
 * Any use, reproduction, disclosure, or distribution of this software
 * and related documentation without an express license agreement from
 * NVIDIA Corporation is strictly prohibited.
 *
 * Please refer to the applicable NVIDIA end user license agreement (EULA)
 * associated with this source code for terms and conditions that govern
 * your use of this NVIDIA software.
 *
 */

#ifndef __GPU_ANIM_H__
#define __GPU_ANIM_H__

#include "gl_helper.h"

#include "cuda.h"
#include "cuda_gl_interop.h"
#include <iostream>

PFNGLBINDBUFFERARBPROC    glBindBuffer     = NULL;
PFNGLDELETEBUFFERSARBPROC glDeleteBuffers  = NULL;
PFNGLGENBUFFERSARBPROC    glGenBuffers     = NULL;
PFNGLBUFFERDATAARBPROC    glBufferData     = NULL;

struct GPUAnimBitmap {
    GLuint  bufferObj;
    cudaGraphicsResource *resource;
    int     width, height;
    void    *dataBlock;
    void (*fAnim)(uchar4*,void*,int);
    void (*animExit)(void*);
    void (*clickDrag)(void*,int,int,int,int);
    int     dragStartX, dragStartY;

    GPUAnimBitmap( int w, int h, void *d = NULL ) {
        width = w;
        height = h;
        dataBlock = d;
        clickDrag = NULL;

        // first, find a CUDA device and set it to graphic interop
        cudaDeviceProp  prop;
        int dev;
        memset( &prop, 0, sizeof( cudaDeviceProp ) );
        prop.major = 1;
        prop.minor = 0;
        HANDLE_ERROR( cudaChooseDevice( &dev, &prop ) );
        cudaGLSetGLDevice( dev );

        // a bug in the Windows GLUT implementation prevents us from
        // passing zero arguments to glutInit()
        int c=1;
        char* dummy = "";
        glutInit( &c, &dummy );
        glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGBA );
        glutInitWindowSize( width, height );
        glutCreateWindow( "bitmap" );

        glBindBuffer    = (PFNGLBINDBUFFERARBPROC)GET_PROC_ADDRESS("glBindBuffer");
        glDeleteBuffers = (PFNGLDELETEBUFFERSARBPROC)GET_PROC_ADDRESS("glDeleteBuffers");
        glGenBuffers    = (PFNGLGENBUFFERSARBPROC)GET_PROC_ADDRESS("glGenBuffers");
        glBufferData    = (PFNGLBUFFERDATAARBPROC)GET_PROC_ADDRESS("glBufferData");

        glGenBuffers( 1, &bufferObj );
        glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, bufferObj );
        glBufferData( GL_PIXEL_UNPACK_BUFFER_ARB, width * height * 4,
                      NULL, GL_DYNAMIC_DRAW_ARB );

        HANDLE_ERROR( cudaGraphicsGLRegisterBuffer( &resource, bufferObj, cudaGraphicsMapFlagsNone ) );
    }

    ~GPUAnimBitmap() {
        free_resources();
    }

    void free_resources( void ) {
        HANDLE_ERROR( cudaGraphicsUnregisterResource( resource ) );

        glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, 0 );
        glDeleteBuffers( 1, &bufferObj );
    }

    long image_size( void ) const { return width * height * 4; }

    void click_drag( void (*f)(void*,int,int,int,int)) {
        clickDrag = f;
    }

    void anim_and_exit( void (*f)(uchar4*,void*,int), void(*e)(void*) ) {
        GPUAnimBitmap**   bitmap = get_bitmap_ptr();
        *bitmap = this;
        fAnim = f;
        animExit = e;

        glutKeyboardFunc( Key );
        glutDisplayFunc( Draw );
        if (clickDrag != NULL)
            glutMouseFunc( mouse_func );
        glutIdleFunc( idle_func );
        glutMainLoop();
    }

    // static method used for glut callbacks
    static GPUAnimBitmap** get_bitmap_ptr( void ) {
        static GPUAnimBitmap*   gBitmap;
        return &gBitmap;
    }

    // static method used for glut callbacks
    static void mouse_func( int button, int state,
                            int mx, int my ) {
        if (button == GLUT_LEFT_BUTTON) {
            GPUAnimBitmap*   bitmap = *(get_bitmap_ptr());
            if (state == GLUT_DOWN) {
                bitmap->dragStartX = mx;
                bitmap->dragStartY = my;
            } else if (state == GLUT_UP) {
                bitmap->clickDrag( bitmap->dataBlock,
                                   bitmap->dragStartX,
                                   bitmap->dragStartY,
                                   mx, my );
            }
        }
    }

    // static method used for glut callbacks
    static void idle_func( void ) {
        static int ticks = 1;
        GPUAnimBitmap*  bitmap = *(get_bitmap_ptr());
        uchar4*         devPtr;
        size_t  size;

        HANDLE_ERROR( cudaGraphicsMapResources( 1, &(bitmap->resource), NULL ) );
        HANDLE_ERROR( cudaGraphicsResourceGetMappedPointer( (void**)&devPtr, &size, bitmap->resource) );

        bitmap->fAnim( devPtr, bitmap->dataBlock, ticks++ );

        HANDLE_ERROR( cudaGraphicsUnmapResources( 1, &(bitmap->resource), NULL ) );

        glutPostRedisplay();
    }

    // static method used for glut callbacks
    static void Key(unsigned char key, int x, int y) {
        switch (key) {
            case 27:
                GPUAnimBitmap*   bitmap = *(get_bitmap_ptr());
                if (bitmap->animExit)
                    bitmap->animExit( bitmap->dataBlock );
                bitmap->free_resources();
                exit(0);
        }
    }

    // static method used for glut callbacks
    static void Draw( void ) {
        GPUAnimBitmap*   bitmap = *(get_bitmap_ptr());
        glClearColor( 0.0, 0.0, 0.0, 1.0 );
        glClear( GL_COLOR_BUFFER_BIT );
        glDrawPixels( bitmap->width, bitmap->height, GL_RGBA,
                      GL_UNSIGNED_BYTE, 0 );
        glutSwapBuffers();
    }
};

#endif  // __GPU_ANIM_H__ 
```

出现第一个错误的行是：

```
PFNGLBINDBUFFERARBPROC    glBindBuffer     = NULL; 
```

VS 说：***IntelliSense：PCH 警告：标头停止不能在宏或#if 块中。未生成智能感知 PCH 文件。***

非常感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:52:48.173

要正确运行它，您必须首先从 :` [CUDA by Example source code 下载源代码](https://developer.nvidia.com/sites/default/files/akamai/cuda/files/cuda_by_example.zip)

然后提取它。当您在 Visual Studio 中创建项目时，如果是 2010 及更新版本，您应该转到项目属性并转到 VC++ 目录并将提取的文件夹添加为包含路径。还将 lib 文件夹添加为库路径，将 bin 添加为可执行文件路径。

然后您可以将一个新的 cu 文件添加到您的项目中并复制第 4 章文件夹的内容 - 您想要的任何文件 - 并将其粘贴到那里并编译它。

如果仍然无法编译，您应该转到项目属性 -> 链接器并找到“附加依赖项”并添加 cudart.lib，一切就绪。

还要注意书籍代码中的包含短语是这样的：`/.../common/book.h`，您应该将它们更改为`common/book.h`格式。

# java - 在java中设置双精度类型数组值

> ID：14745653
> 
> 赞同：1
> 
> 时间：2013-02-07T07:15:40.757
> 
> 标签：java, jpa

我有一个 JPA 实体

```
package com.vivo.entities;
public class Lv_work_item {
  double[] aRBal = new double[10];
  public double[] getaRBal() {
    return aRBal;
  }
  public void setaRBal(double[] aRBal) {
   this.aRBal = aRBal;
  }
} 
```

我必须在 JAVA 类中使用 double 类型设置这个 aRBal 值。我如何设置它的值并从中获取值？

在我的 JAVA 类中，我编写的代码像...

```
Lv_work_item lvwork = new Lv_work_item();
double[] aRBa = new double[10]; 
    for(int i=0;i<=10;i++){
      aRBa[i]=0.0;
   lvwork.setaRBal(aRBa);
   System.out.println(lvwork.getaRBal().toString()+""+aRBa[i]);
} 
```

但是我如何设置值和值来自 lvwork.getaRBal()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:37:00.773

您可以通过迭代索引获取数组值，例如：

```
 double[] array = { 1, 2, 3 };
    for (int i = 0; i < array.length; i++) {
        System.out.print(array[i]);
    } 
```

# node.js - Node服务器崩溃时jQuery Ajax函数没有响应

> ID：14745660
> 
> 赞同：0
> 
> 时间：2013-02-07T07:16:19.710
> 
> 标签：node.js, jquery

我的 jQuery Ajax 请求在我的 NodeJS 服务器崩溃时没有响应时遇到问题。

```
function postRequest(url, query, onComplete) {

    $.post(url, query)

    .done(function (response) {
        onComplete(false, response);
    })

    .fail(function (xhr) {
        onComplete(true, xhr.status);
    }); 
}

postRequest('/noderoute', {id: 4}, function (error, res) {
    if (!error) {
        $('#content').html(res);
    }
    else {
        alert(res);
    }
}); 
```

如果服务器响应，一切都很好，但如果它崩溃了，什么也不会发生。我该如何解决这个问题？谢谢你。

**编辑：已解决**

我一直在生产版本而不是我的开发文件上运行我的测试。现在一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:04:15.247

您正在向您的呼叫传递一个不正确的`xhr`参数。`fail`

```
.fail(xhr, function () { 
```

应该

```
.fail(function (xhr) { 
```

# java - 如何重现 Runtime.exec() 的 java.io.IOException 异常？

> ID：14745665
> 
> 赞同：0
> 
> 时间：2013-02-07T07:16:32.970
> 
> 标签：java, exception, runtime.exec

有时，我的 java 应用程序中出现“java.io.IOException: error=12, Cannot allocate memory”。

我想在我的机器上重现它。有没有办法重现这个错误？Runtime.exec 什么时候会抛出 java.io.IOException？

仅供参考，[root@ara ~]# java -version java version "1.6.0_22" Java(TM) SE Runtime Environment (build 1.6.0_22-b04) Java HotSpot(TM) 64-Bit Server VM (build 17.1-b03,混合模式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:45:43.037

[你可以从这里](https://stackoverflow.com/questions/1124771)得到你的答案：

1.  在旧的 OpenJDK 版本上试一试。这似乎是一个 JVM 错误。
2.  设置`overcommit_memory`为 2（不要过度使用）

    `echo 2 > /proc/sys/vm/overcommit_memory`

3.  运行以下程序：

    ```
    public class ReproduceException {

       public static void main(String[] args) throws IOException {
            Runtime.getRuntime().exec("ls");
       }

    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:38:35.370

我已经链接了一个问题，该问题解释了导致此问题的原因并提供了至少两种解决方法。从解释中，您应该能够找出导致它的策略……如果您在阅读问答后仍然感兴趣的话。

# ruby-on-rails - RVM - 所有宝石套装中的常见宝石

> ID：14745666
> 
> 赞同：1
> 
> 时间：2013-02-07T07:16:33.217
> 
> 标签：ruby-on-rails, ruby, rvm

我正在使用 RVM 和 Gemsets 来管理我的 Ruby 项目环境，我`.rvmrc`在每个项目目录中都保留了一个文件，以便获得不同的 Gemset（使用`rvm use --create 1.9.3@<project_name>`）。一切都以这种方式运行良好，但是：

但是由于某种原因，当我使用时`rvm use <ruby_version>@<gemset_name>`，`gem list`我得到了正确的 gem（确实 - 已经安装在我的项目中的那些）以及其他一些绝对不相关的 gem。

知道是什么原因造成的吗？也许有一个“默认”gemset，如果我不小心在它上面安装了一些 gem，它会将它们包含在我所有的 gemset 中？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:24:03.757

没关系，在这里找到了我的答案 - **[Interpreter global gemsets](https://rvm.io/gemsets/global/)**：

*RVM 为每个 ruby​​ 解释器提供 (>= 0.1.8) 一个 @global gemset。您为给定 ruby​​ 安装到 @global gemset 的 Gem 可用于您创建的与该 ruby​​ 关联的所有其他 gemset。这是允许所有项目为特定的 ruby​​ 解释器安装共享同一个已安装 gem 的好方法。*

# eclipse - Eclipse Juno Editors 并排给出白条

> ID：14745669
> 
> 赞同：3
> 
> 时间：2013-02-07T07:16:48.167
> 
> 标签：eclipse, eclipse-juno

Eclipse Juno Build id：20120614-1722，在 Windows XP 64 位上运行。使用经典主题。

当我并排打开两个编辑器时，Eclipse Juno 会出现这个白条。有没有人知道解决这个问题？

![当我并排打开两个编辑器时，Eclipse Juno 会出现这个白条](../Images/9b4f70fe5ac724de59246023e85db03f.png)

也许回答我自己的问题，这并不总是发生：关闭并重新打开几次后，我看到它没有白条。

![并不总是发生](../Images/92e8e0d3cbab7b166b2d7c4c9e0c5ef7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:09:29.993

我通过再次关闭和打开 Eclipse 来解决这个问题。这一定是一个间歇性问题，因为我无法可靠地重新生成它。这可能是我使用的透视图的某种组合，在两个屏幕上拉伸 Eclipse 和高内存使用。

# c++ - 在 matlab 中创建类或在 matlab 中转换 c 代码

> ID：14745672
> 
> 赞同：0
> 
> 时间：2013-02-07T07:17:00.037
> 
> 标签：c++, matlab

我如何在 matlab 中创建类....请举例说明。

我想在那个类中创建类操作，应该有 3 个函数 add,multiply,minus.... 我想通过 .m 文件访问它

我正在发布粗略的 c 代码，我希望在 matlab 中完成

```
class operation
{
    public:

    function add(int a,int b)
    {
        return(a+b);
    }

    function minus(int a,int b)
    {
        return(a-b);
    }
}

void main()
{
    int a,b;
    operaion o;
    cout<<o.add(2,4)<<endl;
    cout<<o.minus(3,5);  

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:12:16.517

你可以把它作为你的类放在一个 .m 文件中（例如 operation.m）

```
classdef operation
    methods
        function c = add(obj, a, b)
            c = a + b;
        end
        function c = minus(obj, a, b)
            c = a - b;
        end
        function c = multiply(obj, a, b)
            c = a * b;
        end

        %.... add whatever other functions

    end
end 
```

然后你可以这样使用它：

```
obj = operation;
obj.add(1,2)
obj.minus(1,2)
obj.multiply(1,2) 
```

话虽如此，我强烈建议您为此阅读 matlab 文档，因为它非常详尽。你可以从这里开始：http: [//www.mathworks.com/help/matlab/object-oriented-programming.html](http://www.mathworks.com/help/matlab/object-oriented-programming.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:31:42.070

这是一个使用您附加的 C 代码的示例。为简单起见，文件的名称与 C 中的函数名称保持相同

制作三个文件，如下所示：

> 添加.m

函数 [结果]=add(a,b)

结果=a+b;

> 减.m

函数 [结果]=diff(a,b)

结果=ab;

> 主文件

a=input('输入一个数字：');

b=input('输入第二个数字：');

add_res=add(a,b)

diff_res=diff(a,b)

# heroku - Heroku SendGrid 附加计费系统如何工作

> ID：14745673
> 
> 赞同：3
> 
> 时间：2013-02-07T07:17:01.583
> 
> 标签：heroku, sendgrid

当我尝试添加[Heroku SendGrid Addon - Starter Plan](https://addons.heroku.com/sendgrid)时，我不小心单击了“添加 SendGrid Platinum Plan Addon”按钮。我没有得到任何确认，并且插件会自动添加到我的应用程序中。我立即刷新浏览器并删除了 Heroku 应用程序。

SendGrid Platinum 计划是否会向我收取月费？由于我删除了我的应用程序，我无法检查该旧应用程序的 SendGrid 帐户是否仍处于活动状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T14:09:50.850

如果有的话，您可能需要支付几美分，具体取决于您运行插件的时间，但您不会被收取全部费用。

Heroku 在其文档中声明以下内容：

> 数据库和附加组件根据其适用的月费按比例分配到第二个。

这意味着您只需为使用的时间付费。例如，如果您在每月 10% 的时间里使用它，那么您的价格约为 40 美元。

**来源**：[https ://devcenter.heroku.com/articles/usage-and-billing](https://devcenter.heroku.com/articles/usage-and-billing)

# python - NameError：未定义全局名称“create_engine”[尝试创建 SQLAlchemyJobStore 时]

> ID：14745674
> 
> 赞同：6
> 
> 时间：2013-02-07T07:17:09.563
> 
> 标签：python, mysql, sqlalchemy, scheduler, apscheduler

我正在尝试添加一个`SQLAlchemyJobStore`工作商店（并使其成为`default`工作商店）并在其上存储一些工作。我正在运行`mysql`它有一个名为`jobstore`.

我有以下程序试图打开一个`SQLAlchemyJobStore`作业存储到`mysql`正在运行的数据库：

```
# sqlalchemy.py 
from sqlalchemy import *
from apscheduler.jobstores.sqlalchemy_store import SQLAlchemyJobStore
from apscheduler.scheduler import Scheduler
from datetime import datetime, timedelta
import time

def alarm(time):
    print('Alarm! This alarm was scheduled at %s.' % time)

_aps_config = {'standalone': 'True'}
_dbURL = 'mysql://root:<root-password>@localhost/jobstore'

if __name__ == '__main__':

    scheduler = Scheduler(_aps_config)
    scheduler.add_jobstore(SQLAlchemyJobStore(url=_dbURL), 'default')

    alarm_time = datetime.now() + timedelta(seconds=10)
    scheduler.add_date_job(alarm, alarm_time, name='alarm1', args=[datetime.now()])
    print 'alarms added: ', alarm_time

    alarm_time = datetime.now() + timedelta(seconds=15)
    scheduler.add_date_job(alarm, alarm_time, name='alarm2', args=[datetime.now()])
    print 'alarms added: ', alarm_time

    alarm_time = datetime.now() + timedelta(seconds=20)
    scheduler.add_date_job(alarm, alarm_time, name='alarm3', args=[datetime.now()])
    print 'alarms added: ', alarm_time

    try:
        scheduler.start()
    except (KeyboardInterrupt, SystemExit):
        scheduler.shutdown()
        pass 
```

尝试运行上述代码时，我看到以下内容：

```
NameError: global name 'create_engine' is not defined

$ python sqlalchemy.py
Traceback (most recent call last):
  File "sqlalchemy.py", line 19, in <module>
    scheduler.add_jobstore(SQLAlchemyJobStore(url=_dbURL), 'default')
  File "/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/jobstores/sqlalchemy_store.py", line 29, in __init__
    self.engine = create_engine(url)
NameError: global name 'create_engine' is not defined
$ 
```

我明白`"/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/jobstores/sqlalchemy_store.py"`了，它`__init__`正在尝试`create_engine`并且它失败了。

```
 20 class SQLAlchemyJobStore(JobStore):
 21     def __init__(self, url=None, engine=None, tablename='apscheduler_jobs',
 22                  metadata=None, pickle_protocol=pickle.HIGHEST_PROTOCOL):
 23         self.jobs = []
 24         self.pickle_protocol = pickle_protocol
 25 
 26         if engine:
 27             self.engine = engine
 28         elif url:
 29             self.engine = create_engine(url) 
```

这里出了什么问题？！换句话说，我如何创建一个`SQLAlchemyJobStore`using`APScheduler`并成功地将作业存储在它们上面？任何示例/代码片段都会有很大帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:37:25.833

您的代码似乎没有问题。我尝试运行它，它成功完成并显示以下输出：

```
python jobstore.py
alarms added:  2013-02-07 10:31:10.234000
alarms added:  2013-02-07 10:31:15.240000
alarms added:  2013-02-07 10:31:20.240000 
```

我所做的唯一更改是更新`_dbURL = 'sqlite:///:memory:'`为使用 sqlite 引擎。

请检查您是否安装了 sqlalchemy，并且可以通过您的脚本在 PYTHONPATH 中找到它。在 python 控制台中运行以下代码，或者最好将其添加到脚本的开头并检查输出。

```
import sqlalchemy
print sqlalchemy.__version__ 
```

**更新** 我重新阅读了您的帖子，并意识到我的测试代码还有一个不同之处-我创建了另一个名称的文件：jobstore.py

我试图将文件重命名为 sqlalchemy.py 并得到同样的异常：

```
Traceback (most recent call last):
  File "C:/stackoverflow/so/sqlalchemy.py", line 22, in <module>
    scheduler.add_jobstore(SQLAlchemyJobStore(url=_dbURL), 'default')
  File "C:\Progs\Python27\lib\site-packages\apscheduler\jobstores\sqlalchemy_store.py", line 29, in __init__
    self.engine = create_engine(url)
NameError: global name 'create_engine' is not defined

Process finished with exit code 1 
```

基本上问题是您的python脚本名称与sqlalchemy模块名称具有相同的名称，因此python首先加载您的脚本并且无法访问sqlalchemy代码。

尝试将脚本名称重命名为其他名称`sqlalchemy.py`- 如果您安装了 sqlalchemy 模块，这将有所帮助。

# android - 如何自定义谷歌建议？

> ID：14745677
> 
> 赞同：0
> 
> 时间：2013-02-07T07:17:24.747
> 
> 标签：android, android-layout, search

我想定制建议

![建议看起来像这样](../Images/705523b27c303a37654d4816638dfa92.png)我得到了建议提供者。我想在左边添加一张图片和一个副标题。它应该是这样的：![我的目标是像这样定制它们](../Images/868148a118cde3d3a8702ebdc8d98d4d.png)

这种方式可以改变它们的布局吗？感谢所有的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:30:42.523

请把任何有图像的谷歌建议 api 回复。不确定该谷歌建议响应是否也提供图像。如果谷歌建议 API 提供图像作为响应，那么是的，你可以做到。但是，如果他们没有，那么您将无法放置图像。

是的，您可以放置​​所有建议列表通用的任何静态图像和静态描述。但如果未提供谷歌建议，则无法设置任何动态图像。

希望你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:48:12.000

我发现它可以通过再添加 2 行来完成：

```
private static final String[] SEARCH_SUGGEST_COLUMNS = {
            BaseColumns._ID,
            SearchManager.SUGGEST_COLUMN_TEXT_1,
            SearchManager.SUGGEST_COLUMN_TEXT_2,//this
            SearchManager.SUGGEST_COLUMN_ICON_1,//this
            SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID
    }; 
```

您可以像这样简单地将图像添加到光标：

```
cursor.addRow(new Object[] { -1, "Plants", "Search Plants", R.drawable.pin_bank,0}); 
```

希望能帮助到你

# java - 使用java复制文件的最不同的方式是什么？

> ID：14745680
> 
> 赞同：-1
> 
> 时间：2013-02-07T07:17:31.327
> 
> 标签：java, file, copy

我需要编写一个应用程序来将文件（*.jar、* .xml、*.sql、* .exe）从不同位置复制到某个特定位置 使用 java 复制文件的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:28:58.417

在 java 7 中使用`java.nio.file.Files.File#copy`which induced。示例 -

```
Files.copy(source, target, REPLACE_EXISTING); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:20:03.273

这在[基本 I/O](http://docs.oracle.com/javase/tutorial/essential/io/)教程中有详细介绍

# python - 动态嵌套python字典

> ID：14745681
> 
> 赞同：1
> 
> 时间：2013-02-07T07:17:37.417
> 
> 标签：python, dictionary

我想创建一个函数，它将在 python 字典中创建动态嵌套级别。例如，如果我调用我的函数**nesting**，我想要如下输出：

```
nesting(1)  :  dict = {key1:<value>}
nesting(2)  :  dict = {key1:{key2:<value>}}
nesting(3)  :  dict = {key1:{key2:{key3:<value>}}} 
```

等等。在调用此函数之前，我拥有所有键和值，但在我开始执行代码之前没有。

我将密钥存储在变量**“m”**中，其中 m 来自：

```
m=re.match(pattern,string) 
```

该模式是针对这种情况动态构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:39:47.277

```
def nesting(level, l=None):
    # assuming `m` is accessible in the function
    if l is None:
        l = level
    if level == 1:
        return {m[l-level]: 'some_value'}
    return {m[l-level]: nesting(level-1, l) 
```

对于合理`level`的 s，这不会超过递归深度。这也假设该值始终相同并且`m`其形式为：

```
['key1', 'key2', ...] 
```

这个函数的迭代形式可以写成这样：

```
def nesting(level):
    # also assuming `m` is accessible within the function
    d = 'some_value'
    l = level
    while level > 0:
        d = {m[l-level]: d}
        level -= 1
    return d 
```

或者：

```
def nesting(level):
    # also assuming `m` is accessible within the function
    d = 'some_value'
    for l in range(level, 0, -1):  # or xrange in Python 2
        d = {m[l-level]: d}
    return d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:27:06.683

您可以像这样遍历键：

```
def nesting(level):
    ret = 'value'
    for l in range(level, 0, -1):
        ret = {'key%d' % l: ret}
    return ret 
```

将`range(...)`片段替换为按所需顺序生成键的代码。因此，如果我们假设键是捕获的组，则应按如下方式更改函数：

```
def nesting(match): # `match' is a match object like your `m' variable
    ret = 'value'
    for key in match.groups():
        ret = {key: ret}
    return ret 
```

或者`reversed(match.groups())`，如果您想以相反的顺序获取密钥，请使用。

# xslt - 使用 XSLT 解析 HTML

> ID：14745688
> 
> 赞同：0
> 
> 时间：2013-02-07T07:18:04.090
> 
> 标签：xslt

我有一个包含 cdata 部分的 xml。我已经设法使用 XSLT 获取 cdata 文本。但是在 CDATA 里面我们有 html。那么任何人都可以帮助我如何解析 HTMl。下面是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <xsl:output method="html" indent="yes"/>

    <xsl:template match="/">

        <xsl:variable name="dummy">
            <xsl:value-of select="somexpath"/>
        </xsl:variable>
    </xsl:template>

</xsl:stylesheet> 
```

直到这是一个 html 的输出：

```
 <div class="feed-description">
<p style="text-align: justify;">Les amateurs du jeu Dance Central 3 pourront ajouter quelques nouvelles pièces à leur collection en février. Parmi les artistes qui seront disponibles via téléchargements, on retrouve le groupe de l'heure One Direction, Justin Bieber, Ellie Goulding et B.o.B. Dès demain le <strong>5 février</strong>, vous pourrez danser sur la chanson ''<strong>What Makes You Beautilful</strong>'' de One Direction.
</p>
</div> 
```

现在我想使用 XSLT 读取 p 标签的内部文本。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:59:13.490

请尝试

```
<xsl:variable name="dummy">
   <xsl:value-of select="msxsl:node-set(somexpath)//p/text()"/>
</xsl:variable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:55:08.960

你有几个选择，没有一个是你说你想要的（对不起）。我突然想到的那些（肯定还有其他的）包括：

1.  您可以创建一个提取 HTML 的工作流，将其传递给 Tidy 或其他类似工具以生成 XHTML，将其作为标记而不是字符序列重新插入到文档中，然后在结果上运行您的样式表。
2.  您可以在 XSLT 中编写 HTML 解析器，以获取输入文档中的字符序列并为其生成元素结构。这将是乏味、容易出错且耗时的，当你完成它时，主要浏览器将推出新版本，以不同方式处理极端情况，所以你的用户会抱怨你的解析器没有做对的'。但是，如果您喜欢做那种事情，那将是具有挑战性和乐趣的，当您成功时，您将拥有严重的黑客信誉。
3.  您可以寻找可以为您处理此任务的 XSLT 处理器的扩展。（我不知道任何手头，但这并不意味着它们不存在。）
4.  您可以重新考虑项目的设计。例如，您可以重新构造输入，以便不是伪装成字符数据的 HTML，而是任何元素的内容，它是 XSLT 旨在处理的那种类型的实际标记。您可以将 HTML 有效负载的处理从 XSLT 移到 Javascript 和 DOM 中。你可能会洗掉整个问题，然后搬到南海。

祝你好运。

# javascript - 如何将html设置为extjs中的元素

> ID：14745691
> 
> 赞同：7
> 
> 时间：2013-02-07T07:18:24.947
> 
> 标签：javascript, extjs, extjs4, extjs4.1

**1）**如何设置`HTML`已创建的面板或任何其他元素？

我是初学者。我尝试了以下在 HTML 中设置一些内容

```
var clickedElement = Ext.getCmp('id').el.child('>');
clickedElement.setHTML("hello"); 
```

以上工作正常，但问题是面板内部有许多 div。上述方法是擦除 html 内部的那些（即 div）并用上述内容替换它。

我通过 Chrome 看到面板有三个嵌套的 div。因此，如果我想向其中添加 HTML，那么我需要提供如下内容：

```
var clickedElement = Ext.getCmp('id').el.child('>').child('>');  //two times child 
```

当我尝试上述方法时，我成功添加了 html 内容，并且 div 也没有删除。这里的问题是，我看不到添加的内容（可能是因为某些默认样式，我可以看到内容正在添加到 Chrome 控制台中。）

我只是问是否有任何有效的方法可以将 HTML 添加到面板中。在我看来，这应该是我在这里复杂化的非常简单的方法。

**2）**如何检查一个元素是否有一个特定的孩子？

例如，假设`extjs Button`我在创建面板时将 a 作为子项（项目）添加到面板中。（我能做到）。如何检查面板是否有特定元素（即此处的按钮）？

在问这里之前，我进行了很多搜索，发现与我的问题有些相关但没有帮助的[链接](https://stackoverflow.com/q/13608736/1577396)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T07:56:29.447

在 ExtJS 中，大多数组件被认为只有一个 body 元素，即使您在 dom 上看到更多。与基本上添加在标记之上的 jQuery 相比，ExtJS 自己生成整个标记。

现在回答你的问题，要更新组件的 HTML，你可以简单地调用这样的`update()`方法

```
Ext.getCmp('id').update('hello'); 
```

见**[JSFiddle](http://jsfiddle.net/X6kQK/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T16:23:51.610

```
Ext.ComponentQuery.query('#itemIdOfComponent').update('new value'); 
```

不要在组件上设置 id，而是添加 itemId 配置并查看 Ext.ComponentQuery.query 的文档。

# c# - windows8中根据各种分辨率进行设计

> ID：14745692
> 
> 赞同：2
> 
> 时间：2013-02-07T07:18:25.107
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, winrt-xaml

在我的 Metro 应用程序中，我想设计满足所有分辨率的页面。为此，我使用了 Viewbox 控件并为 Viewbox 内的控件设置了 height=768 和 width=1366。在这种情况下，除 1024*768 和 1280*800 之外的所有分辨率都满足设计。如何设计满足每个分辨率的页面。请帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:38:24.670

嗨，这是可以解决您的问题的代码片段。

```
//add event listner on size changed
Window.Current.SizeChanged += Current_SizeChanged; 
```

这是事件侦听器或任何其他您想要获取高度和宽度并执行所有操作的自定义方法中的代码：

```
var height = Window.Current.Bounds.Height;
var width = Window.Current.Bounds.Width; 
```

这将为您提供应用程序的高度和宽度。（我在这里编写应用程序是因为地铁也可以在快照模式下运行）......根据这个，你可以用你的控件进行所有操作。

# regex - 如何验证 Facebook 签名请求 - 有效字符和长度

> ID：14745693
> 
> 赞同：0
> 
> 时间：2013-02-07T07:18:27.850
> 
> 标签：regex, facebook, validation, response, maxlength

我希望能够通过 RegEx 验证应该由 Facebook 返回的 SignedRequest 是正确的长度（在 n 最大字符以下）并且只有有效字符。

在这样的签名请求中是否有长度限制或有限的字符集？

如果你想要更大的上下文，这里是：我正在使用 ESAPI 来验证系统的所有输入。由于 SignedRequest 已经使用签名进行了验证，因此我考虑不使用 ESAPI 进行任何事先验证，但这会引发各种 DOS 攻击，所以至少我想验证最大大小，如果可能的话还要验证字符集.

正在寻找此信息但找不到它，如果它在某个地方很容易获得，请链接到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:42:19.913

没有特别定义的最大长度，因为长度取决于嵌入的信息量。

> 但这开启了各种 DOS 攻击

抱歉，但如果你问我，这听起来有点偏执。

# android - 单击android主页按钮时视频从暂停状态继续

> ID：14745695
> 
> 赞同：1
> 
> 时间：2013-02-07T07:18:34.817
> 
> 标签：android

我在我的应用程序中使用视频播放器。它工作正常。但是我需要在 android“HOME”按钮在暂停状态下单击视频播放器并再次单击应用程序时，它会从上次播放状态继续。

这是我的代码：

```
videoView = (VideoView)findViewById(R.id.videoView);
MediaController mediaController= new MediaController(this);
        mediaController.setAnchorView(videoView);  
        String path1="http://commonsware.com/misc/test2.3gp";
        Uri uri=Uri.parse(path1);
        videoView.setMediaController(mediaController);
        videoView.setVideoURI(uri);

        videoView.requestFocus();
        videoView.start();    
@Override
    protected void onPause() {
        videoView.pause();
        super.onPause();

    }
    @Override
    protected void onResume(){
        videoView.start();
        super.onResume();

    } 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T14:01:40.457

解决了这个问题。这是我的答案

```
@Override
protected void onResume() {
    super.onResume();
    try{
        if (videoView != null) {
            videoView.seekTo(position);    
            videoView.start();
        }
    }catch (Exception e) {
                }
}

@Override
protected void onPause() {
    super.onPause();    
    try{
        if (videoView != null) {
            position = videoView.getCurrentPosition();
            videoView.pause();         
        }
    }catch (Exception e) {
                }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:26:10.493

VideoView 请参考 android API 参考

您可以使用以下方法来实现这一点。

```
int getCurrentPosition () 
```

和

```
void seekTo (int msec) 
```

# php - 在同一行上带有 2 个 imgs（链接）的下拉菜单？

> ID：14745701
> 
> 赞同：0
> 
> 时间：2013-02-07T07:19:07.127
> 
> 标签：php, html

有没有办法让我的下拉菜单 [提交] 和 [添加] | [编辑] imgs 在顶部的同一行？

```
 print "<td valign=\"top\" align=\"right\">\n";
    print "<a href=\"$popup_href\" class=\"action_link\" title=\"Add\"><img src=\"images/add.png\" alt=\"Add\" width=\"20\" height=\"20\" border=\"0\"></a>\n";
    print "<a href=\"daily.php?$ymdStr\" title=\"Edit\"><img src=\"images/edit.png\" alt=\"Edit\" width=\"20\" height=\"20\" border=\"0\"></a>\n";
    print "<ul id=\"nav\" class=\"drop\">\n";
    print "<li onmouseover=\"\"><b>Submit</b>\n";
    print "<ul>\n";
    print "<li><a href=\"confirm.php?$ymdStr\">Timesheet</a></li>\n";
    print "<li><a href=\"overtime.php?$ymdStr\">Overtime</a></li>\n";
    print "</ul></li></ul></td>\n"; 
```

示例图片：![在此处输入图像描述](../Images/63af1648695c07033ced7e1036dd7869.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:40:19.513

想通了...只需要制作一个新的`<td>`，它们现在就在同一条线上。

使固定：

```
 print "<td valign=\"top\" align=\"right\">\n";
        print "<a href=\"$popup_href\" class=\"action_link\" title=\"Add\"><img src=\"images/add.png\" alt=\"Add\" width=\"20\" height=\"20\" border=\"0\"></a>\n";
        print "<a href=\"daily.php?$ymdStr\" title=\"Edit\"><img src=\"images/edit.png\" alt=\"Edit\" width=\"20\" height=\"20\" border=\"0\"></a></td>\n";
        print "<td valign=\"top\" align=\"right\">\n";
        print "<ul id=\"nav\" class=\"drop\">\n";
        print "<li onmouseover=\"\"><b>Submit</b>\n";
        print "<ul>\n";
        print "<li><a href=\"confirm.php?$ymdStr\">Timesheet</a></li>\n";
        print "<li><a href=\"overtime.php?$ymdStr\">Overtime</a></li>\n";
        print "</ul></li></ul></td>\n"; 
```

# php - 插入字符串到 foreach 结果

> ID：14745704
> 
> 赞同：2
> 
> 时间：2013-02-07T07:19:10.953
> 
> 标签：php, function, insert, foreach, ads

我有一个查看论坛帖子脚本

```
if(isset($replys)){
    foreach ($replys as $reply) {
        echo $reply['name'].' | '.$reply['date'];
    }
} 
```

输出如：

```
abc | 2013-1-1
123 | 2013-1-2
456 | 2013-1-3 
```

然后我想随机展示广告，例如：

```
abc | 2013-1-1
Google Ads | testing
123 | 2013-1-2
456 | 2013-1-3 
```

使用一些 if 语句：

```
if( is_string(substr(sha1(uniqid()),-1)) ){
// show ads
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:22:03.880

找一个随机位置插入广告：

```
if (is_string(substr(sha1(uniqid()),-1))) {
    // show ads
    $offset = mt_rand(0, count($replys) - 1);
    $ad = array('name' => 'Google Ads', 'date' => 'testing');

    $replys = array_splice($replys, $offset, 0, $ad);
} 
```

# open-source - Gatein 以外的开源门户容器

> ID：14745705
> 
> 赞同：0
> 
> 时间：2013-02-07T07:19:12.933
> 
> 标签：open-source, portal, gatein

我们已经使用 Gatein 3.5 进行了概念验证，它在 JBoss AS7 上运行良好。

但是，JBoss AS7 只有社区版，我们无法继续使用它。因此，我们必须切换到 JBoss 6 企业版。

不幸的是，Gatein 不适用于 JBoss 6。我在 JBoss/Gatein 社区中提出了这个问题，他们表示[JBoss 6 中的 Gatein 不是一个好的组合](https://developer.jboss.org/thread/217552?tstart=0&_sscc=t)。

请让我知道一些可以在 JBoss 6 上运行的开源门户容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:47:52.837

Bipul，我认为您误解了论坛中的建议。

建议您从 3.4（使用 JBoss AS 6）升级到使用 JBoss AS 7 的 3.5。

如果您正在寻找 GateIn 3.5 和 JBoss Enterprise Application Platform 6 的解决方案，您应该知道我们将很快发布 JBoss Portal Platform 6，这正是这个。

您已经可以在此处下载评估版： [https ://access.redhat.com/downloads#eval](https://access.redhat.com/downloads#eval)

明天（星期二），有一个平台介绍：[https ://engage.redhat.com/forms/20130212_JBossPP_tipsandtricks?sc_cid=70160000000URk2AAG&offer_id=701600000007O1kAAE](https://engage.redhat.com/forms/20130212_JBossPP_tipsandtricks?sc_cid=70160000000URk2AAG&offer_id=701600000007O1kAAE)

托马斯

# ios - 为免费应用设置定价层

> ID：14745706
> 
> 赞同：3
> 
> 时间：2013-02-07T07:19:19.627
> 
> 标签：ios, iphone

我已经开发了一个应用程序，它已经提交到应用程序商店并且也获得了批准。但我心中有以下问题。

1.  目前我的应用程序是免费的。但我的客户希望在 2 个月后付款。我没有设置定价信息，因为尚未确认要选择哪一层。所以我的问题是，如果我在应用批准几天后设置定价信息，应用会再次进行审核吗？更改定价信息需要批准吗？

2.  假设一个用户在应用程序
    免费时在他的设备上下载了应用程序。客户更改了定价细节，现在应用程序不是免费的。现在我的问题是该用户将如何进行付款程序。苹果会
    处理这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:24:19.540

1.  目前我的应用程序是免费的。但我的客户希望在 2 个月后付款。我没有设置定价信息，因为尚未确认要选择哪一层。所以我的问题是，如果我在应用批准几天后设置定价信息，应用会再次进行审核吗？更改定价信息需要批准？

    **不。除非您在应用程序中进行了一些更改并且您想上传新版本或其他内容。只是价格变化不需要重新批准**

2.  假设一个用户在应用程序免费时在他的设备上下载了应用程序。客户更改了定价细节，现在应用程序不是免费的。现在我的问题是该用户将如何进行付款程序。苹果会处理这种情况吗？

    **没有苹果不会处理这种情况。他们将继续免费使用它。Apple 表示您购买/下载的应用程序是您的。之后的所有更新都是免费的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:23:44.013

以下是您的问题的答案。

1.  不，您的应用不会因价格变化而再次审核。您的应用程序只是成为付费应用程序。

2.  如果用户在免费时下载了您的应用程序，那么他/她可以一直使用您的应用程序。即使在 2 个月后，如果您将您的应用设为付费，那么现有用户也无需为此付费，因为他们已经下载了免费的应用。只有新用户需要付费才能下载应用程序。

希望，你对你的问题有所了解。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T07:24:30.153

1.  不，更改价格不需要再次审核

2.  一旦下载了应用程序，用户就拥有了它，他们不会再次付费。

# wpf - 表达式混合中没有新的项目类型

> ID：14745707
> 
> 赞同：0
> 
> 时间：2013-02-07T07:19:25.483
> 
> 标签：wpf, silverlight, windows-phone-7, expression-blend, expression-blend-4

我是表情混合的新手。当我尝试在表达式混合中创建一个项目时，它只列出 windows phone 项目。但我想创建 WPF 项目。如何在表达式混合中安装其他项目类型。我也想要 WPF 和 Silverlight 项目类型...

现在我在表达式混合中创建新项目菜单如下所示

![在此处输入图像描述](../Images/f65daf6275e367722d69b18faa40c83f.png)

但我想像下面

![在此处输入图像描述](../Images/687841ad6057e870163218de5cff16df.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:27:39.097

这是因为您只安装了 Blend for Windows Phone（免费版本）。

*   [Blend 附带 Visual Studio 2012 Pro](http://www.microsoft.com/expression/)。
*   [Expression Blend 4](http://www.microsoft.com/en-us/download/details.aspx?id=5915)支持 WPF 等和 Silverlight 最高版本 4。
*   [Expression Blend for Silverlight](http://www.microsoft.com/en-gb/download/details.aspx?id=9503)也可用，但仅支持 Silverlight 5 项目

请注意，如果您决定安装 Blend 4 的试用版，则可能很难恢复到 Windows Phone 版本。试用期结束后，您可能会被困住。

# wkhtmltoimage - 将 wkhtmltoimage 包装到 xvfb-run

> ID：14745711
> 
> 赞同：0
> 
> 时间：2013-02-07T07:19:31.307
> 
> 标签：wkhtmltoimage, imgkit

我如何使用`wkhtmltoimage`默认运行`xvfb`？

```
/usr/bin/xvfb-run --server-args="-screen 0, 1024x1024x24" 
```

我必须像这样创建 bash 文件`wkhtmltoimage`

```
/usr/bin/xvfb-run --server-args="-screen 0, 1024x1024x24" /usr/local/bin/wkhtmltoimage-64 $* 
```

但在这种情况下，其他程序 ( `gem imgkit`) 不能与`wkhtmltoimage`. 它将添加调试信息添加到文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T13:29:50.123

您可以像我那样创建一个包装脚本：

wkhtmltoimage:

```
xvfb-run --server-args="-screen 0, 1024x680x24" wkhtmltoimage.bin -q --use-xserver $* 
```

其中 wkhtmltoimage.bin 是原始二进制文件。

# ios5 - 在导航控制器线上添加工具栏时出现在两侧？

> ID：14745714
> 
> 赞同：0
> 
> 时间：2013-02-07T07:19:32.233
> 
> 标签：ios5

我什至在导航控制器上尝试 UIView，但遇到了同样的问题。如果工具栏和导航控制器的 Tint 颜色相同，即使出现线条。

```
 UIToolbar* NavigationToolBar = [[UIToolbar alloc] initWithFrame:CGRectZero];
    [NavigationToolBar sizeToFit];
    [NavigationToolBar setTintColor:[UIColor blueColor]];
    [NavigationToolBar setBarStyle:UIBarStyleDefault];
    [self.navigationItem setTitleView:NavigationToolBar]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:24:17.307

你有没有在应用程序委托中创建一个导航工具栏。如果不先做

```
UINavigationController *mainNavigationController = [[UINavigationController alloc] initWithRootViewController:viewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:15:28.130

你必须确定工具栏是否被隐藏。[self.navigationController setToolbarHidden:NO]; 此代码将可见。

```
[self.navigationController setToolbarHidden:NO]; 
UIBarButtonItem *btn1 = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:nil];
UIBarButtonItem *btn2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:nil];
NSArray *items = [NSArray arrayWithObjects:btn1,btn2, nil];
[self setToolbarItems:items];
[self setToolbarItems:setToolbar animated:YES] 
```

# c# - 在流对象c#中写入块并接收块

> ID：14745716
> 
> 赞同：1
> 
> 时间：2013-02-07T07:19:37.763
> 
> 标签：c#, stream

我有两个应用程序，一个在服务器上，一个在客户端上。

在服务器端，我像这样写流。

```
NetworkStream stream = client.GetStream();

byte[] msg = System.Text.Encoding.ASCII.GetBytes(messageSent);

stream.Write(msg, 0, msg.Length);
stream.Write(msg, 0, msg.Length); 
```

我正在一个一个地在流中写入多个字符串。字符串的长度是可变的，最大长度约为 500

问题：

如何在客户端读取块

有时我会得到组合字符串

就像我发送了 A,B,C

在客户端我收到了 A, BC

我是这样的客户：

```
bytes = stream.Read(data, 0, data.Length); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:24:02.507

是的，你有一个*流*——只是一个字节序列——但你把它当作不是一个流；就好像它是一个面向消息的协议一样。

从根本上说，通过简单的基于流的通信，将流分解为消息并没有什么*固有的。*如果你想这样做，你需要在上面构建一个层。有三种常见的方法可以做到这一点：

*   使用您在阅读时发现的“消息结束”标记
*   在每条消息之前使用长度前缀
*   使用一种混合方式，其中每条消息可以由多个块组成，每个块都有长度前缀，以及一个表示“消息结束”的 0 长度块

其中第二个可能是最简单的，但有一个限制，即您需要在开始发送之前知道消息的大小。第三个选项通过具有可变数量的块来解决这个问题。如果可能的话，我个人会避免第一个选项 - 除非你有一些自然的“消息结束”令牌，你永远不会想要将其作为数据*包含在*消息中，你必须开始制定一个转义方案，这很痛苦...而且读取数据也更难。

当然，您不必从头开始执行所有这些操作。如果两端都有 .NET，则可以使用支持长度前缀字符串的 .NET，`BinaryReader`并且`BinaryWriter`周围也有很多序列化框架，它们通常以某种形式处理这个问题。（我个人的偏好是 Protocol Buffers，因为它高效、独立于平台，并且是我在工作中使用的。有两个常见的 .NET 端口——[一个是我自己](http://code.google.com/p/protobuf-csharp-port)的，[一个是 Marc Gravell 的](http://code.google.com/p/protobuf-net/)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:23:51.757

顾名思义，您使用的是流。不能保证`Write`一侧的调用与另一侧的调用之间存在 1-1 对应关系`Read`。

发送消息的一种常见方法是首先发送消息长度（例如，将 int 转换为 4 个字节），然后发送消息。

然后（在接收端）读取该长度，（如果需要）分配该大小的缓冲区，然后重复调用`Read`直到缓冲区被填满。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T07:24:43.273

流只是一个字节序列。除了您创建的块之外，没有块的概念。您将需要发明一些*额外*的机制来了解每个块的开始/结束位置。有多种常见的方法可以做到这一点：

*   使用一些“标题”值，（例如）指示下一个块中的字节数；例如，您可以使用固定的 32 位整数计数器并存储 [0 0 0 1 65 0 0 0 2 66 67] 其中 0 0 0 1 是 big-endian`1`意思是“要读取 1 个字节”，而 65 是`A`， ETC。
*   哨兵价值观；例如，由于这是一个文本协议，您可能可以使用 nil 值 (0) 或换行符结束每个块；所以 [65 0 66 67 0] 或 [65 10 66 67 10]

# javascript - oncontextmenu="返回假；" 不是在 Opera 中工作吗？

> ID：14745721
> 
> 赞同：1
> 
> 时间：2013-02-07T07:19:54.057
> 
> 标签：javascript, html, javascript-events

在我需要禁用**右键单击**功能的应用程序中。

所以我`oncontextmenu="return false;"`在`body`标签中使用了。

它在除**Opera**之外的所有浏览器中都能正常工作。

如何在**Opera中禁用****右键单击**。?

 **我在**谷歌**上搜索了很多，但在那里找不到解决方案。希望你们能帮助我找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:33:47.340

试试这个

```
document.getElementsByTagName("body")[0].oncontextmenu = function(e){ e.preventDefault();} 
```**

# java - java读取xml时输出错误

> ID：14745722
> 
> 赞同：0
> 
> 时间：2013-02-07T07:19:59.377
> 
> 标签：java, xml

我的 xml 文件包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<Contacts>
    <ContactGroup1>
        <person aa="sads">
            <name>Aghil</name>
            <emailid>aghilvarghese@gmail.com</emailid>
        </person>
    </ContactGroup1>  
</Contacts> 
```

我正在尝试通过以下 java 代码阅读此内容：

```
 DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = (Document) dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());

        NodeList nList = doc.getElementsByTagName("ContactGroup1");
        Node nNode = nList.item(0);//take first cgroup
        NodeList nl = (nNode.getChildNodes());
        System.out.println("nodes in ContactGroup1 : " + nl.getLength());
        for (int i = 0; i &lt; nl.getLength(); i++) {
            Node node = nl.item(i);
            System.out.println("node type is " + node.getNodeType() + " " + node.getNodeName());
         } 
```

输出是：

```
根元素：联系人
ContactGroup1 中的节点：3
节点类型为 3 #text
节点类型为1人
节点类型为 3 #text
```

但是在 ContactGroup1 中只有一个节点（即人），不是吗？为什么这个错误的输出？我该怎么做才能让它正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:24:47.723

您可以跳过空文本节点。检查这个问题：[How to remove #text from my Node parsing in Java dom xml parsing](https://stackoverflow.com/questions/4650878/how-to-remove-text-from-my-node-parsing-in-java-dom-xml-parsing) 所以基本上你应该检查它节点是文本并且为空然后跳过它。

# android - 从您的应用程序显示呼叫设置屏幕

> ID：14745726
> 
> 赞同：0
> 
> 时间：2013-02-07T07:20:10.140
> 
> 标签：android

如何从我们的应用程序显示呼叫设置页面......或者如果有人可以指导我如何获取所有呼叫持续时间值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T07:23:28.340

有一个名为[CallLog.Calls](http://developer.android.com/reference/android/provider/CallLog.Calls.html)的类，其中包含用于查询通话历史的[CONTENT_URI 。](http://developer.android.com/reference/android/provider/CallLog.Calls.html#CONTENT_URI)

这是一个列出通话记录中电话号码的示例：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.main);

String[] projection = new String[] {
    CallLog.Calls._ID, CallLog.Calls.NUMBER};
Cursor query = this.managedQuery(
    CallLog.Calls.CONTENT_URI, projection, null, null, null);

ListAdapter adapter = new SimpleCursorAdapter(
    this, android.R.layout.simple_list_item_1, query,
    new String[] {CallLog.Calls.NUMBER},
    new int[] {android.R.id.text1});
this.setListAdapter(adapter);
} 
```

# iphone - Textarea占位符不适用于iphone phonegap

> ID：14745730
> 
> 赞同：0
> 
> 时间：2013-02-07T07:20:27.763
> 
> 标签：iphone, css, html, cordova

我正在使用 iphone 处理 phonegap 并且遇到 textarea 占位符问题。

主要问题是：我将占位符设置为文本区域，但是当页面加载时，当我单击 textarea 占位符内的空白文本时，它不会显示占位符文本包。

我浏览了很多关于它的信息，甚至使用了很多 jQuery，但问题仍然存在。

**编辑**

我的 HTML 是

```
<textarea id="statusText" class="comments_fontsize" placeholder="Update your status"> </textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:02:54.983

删除两个标签之间的空格。浏览器读取好像里面有数据（在这种情况下是一个空格）。

# android - 在 onPause() 方法中调用 GC 是一种好习惯吗？

> ID：14745736
> 
> 赞同：0
> 
> 时间：2013-02-07T07:21:04.400
> 
> 标签：android, android-memory

显式调用 GC 是否会对系统内存产生影响？

我在我的活动中使用了许多数据结构，例如`Arraylist`和`HashMap`。每次用户加载活动时，都需要重新填充来自 Web 服务的更新数据。这意味着当用户离开活动并再次回来时，这些数据结构应该进入内存。

当用户离开活动并且不再访问它时，我不希望这些数据结构占用任何内存。

那么可以通过在`onPause()`活动中调用GC来执行吗？这样做是个好习惯吗？如果我想做这样的事情，有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:35:18.107

首先，**System.gc()**只是一个请求。无法保证系统会运行垃圾收集器。

接下来，来到你的问题。如果您确定该活动将退出并重新创建以进行数据更新，最好将当前活动中的所有数据结构分配给**NULL**。

您可以在 onDestroy() 方法中执行此操作。这将确保您的所有 DS 对象都已释放，并且系统在运行 gc() 时将考虑进行垃圾收集。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:27:11.960

您应该首先调用清除所有数据结构并将它们设置为空。调用 GC 可能会降低设备性能及其对垃圾收集器的请求，不确定 GC 是否会被执行。

因此，与其自己调用 GC，不如清除所有 DS 并将它们设置为空。

# c++ - 调用结构中定义的函数时出错

> ID：14745739
> 
> 赞同：1
> 
> 时间：2013-02-07T07:21:13.190
> 
> 标签：c++, struct

我已经获得了创建双向链表的代码。链表中的节点是一个名为*ListItem*的结构。现在在该节点内是一个为该节点分配值的函数。我遇到的问题是我似乎无法创建节点并使用该函数为其分配值。

这是结构“ *ListItem* ”的代码。

```
template <class T>
struct ListItem
{
    T value;
    ListItem<T> *next;
    ListItem<T> *prev;

    ListItem(T theVal)
    {
        this->value = theVal;
        this->next = NULL;
        this->prev = NULL;
    }
}; 
```

随附的 .cpp 文件中对应的*ListItem函数：*

```
template <class T>
ListItem<T>* List<T>::getHead()
{
}

template <class T>
ListItem<T>* List<T>::getTail()
{
}

template <class T>
ListItem<T> *List<T>::searchFor(T item)
{
} 
```

这是我试图在我的主要功能中做的事情。

```
int main()
{
    ListItem<int> a;
    a.ListItem(int 5);
    system("PAUSE");
} 
```

我在这里要做的就是创建一个节点并为其分配一个值。以下是我得到的错误：

= **'a' 不是类或命名空间**

= **'(' 标记之前缺少模板参数**

= **'int' 之前的预期主表达式**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:23:34.430

请记住， a`struct`与 a 相同`class`，因此您所做的是创建一个类，其名称`ListItem`包含一个带有单个参数的普通构造函数。

你像往常一样创建它：

```
ListItem<int> a(5); 
```

您还有其他一些问题，例如具有未在类中声明的类的函数（例如`getHead`函数）。您也不能在单独的源文件中实现模板化函数成员，它们必须与类（或结构）定义一起在头文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:24:54.430

ListItem 不是函数名，而是类/结构的构造函数。构造函数是一个特殊的函数，不能这样调用。您的代码应如下所示：

```
int main()
{
    ListItem<int> a(5);
    system("PAUSE");
} 
```

# android - 带有一个图标的 ShareActionProvider - 看起来很简单的 actionitem

> ID：14745740
> 
> 赞同：5
> 
> 时间：2013-02-07T07:21:20.847
> 
> 标签：android, android-actionbar, shareactionprovider

我想显示`ShareActionProvider`，`ActionBar`但具有自定义外观。只有一个简单的无边框共享图标，右侧没有最常用的应用程序图标。但是为最常用的应用程序提供弹出菜单。有没有一种简单的方法可以做到这一点而无需实现 own `ShareActionProvider`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T07:27:01.253

好的，所以不管 ActionBarSherlock 第一次测试是否正确创建了意图，ABS 使用与通用选择器相同的代码，因此在执行此代码时查看您正在寻找的应用程序是否出现。

```
Intent I= new Intent(Intent.ACTION_SEND);
I.setType("text/plain");
I.putExtra(android.content.Intent.EXTRA_TEXT, "My Test Text");

startActivity(Intent.createChooser(I,"Share using ...")); 
```

所有处理纯文本的应用程序都会显示，如果 facebook 或任何您期望的内容不存在，那么这些应用程序不支持您注册的类型（纯文本/文本）的 ACTION_SEND 意图。（Facebook 有，但稍后会详细介绍）

ABS 有一个使用共享操作提供程序的示例，但它尝试发送照片，而不是短信（状态更新）您应该使用的设置是这样的

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate your menu.
    getSupportMenuInflater().inflate(R.menu.share_action_provider, menu);

// Set file with share history to the provider and set the share intent.
MenuItem item = menu.findItem(R.id.menu_item_share_action_provider_action_bar);
ShareActionProvider provider = (ShareActionProvider) item.getActionProvider();
              provider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);
// Note that you can set/change the intent any time,
// say when the user has selected an image.
provider.setShareIntent(createShareIntent());

return true
} 
```

这是将用于匹配应用程序并将它们从示例中列出的意图

```
private Intent createShareIntent() {
        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType("image/plain");
        Uri uri = Uri.fromFile(getFileStreamPath("shared.png"));
        shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
        shareIntent.putExtra(Intent.EXTRA_TITLE, "This is an android icon");
        return shareIntent;
    } 
```

但你希望它是

```
private Intent createShareIntent() {
        Intent I= new Intent(Intent.ACTION_SEND);
        I.setType("text/plain");
        I.putExtra(android.content.Intent.EXTRA_SUBJECT, "TEST - Disregard");
        I.putExtra(android.content.Intent.EXTRA_TEXT, Uri.parse("http://noplace.com"));
    } 
```

这应该在 ABS 中为您提供与上面选择器显示的小测试存根中相同的列表。

# php - 如何在 cakephp 中运行查询？

> ID：14745742
> 
> 赞同：3
> 
> 时间：2013-02-07T07:21:22.777
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我想在 cakephp 的组件文件中运行查询，但它显示致命错误，当我在控制器中执行此操作时，它工作得非常好，但我想在组件中执行此操作。

```
 function product_check(){

 $this->User = ClassRegistry::init('User');
 $this->UserNode = ClassRegistry::init('UserNode');
 $this->ProductsUserNode = ClassRegistry::init('ProductsUserNode');

    $conditionss = array(
        # http://book.cakephp.org/2.0/en/models/retrieving-your-data.html
        'OR' => array(
            array('ProductsUserNode.'. NODE_ID => $this->Auth->user(NODE_ID)),
            array('ProductsUserNode.'. NODE_ID => $this->Auth->user(NODE_IDX)),
        ),
    );

     $productcheck = $this->User->UserNode
                                ->ProductsUserNode
                                ->find(
                                    'first'
                                    , array(
                                            'conditions' => $conditionss
                                    )   
                                );

     $active = $productcheck['ProductsUserNode']['is_active'];
    if ($active == "0")
    {
        $this->Session->setFlash('You Are Deactived For This Product'); 
        $this->redirect(array('controller'=>'events','action'=>'view_dashboard'));
    } 

} 
```

但它显示了这个错误

```
Fatal Error
Error: Call to a member function user() on a non-object 
```

我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:30:54.373

我认为您没有指定您的组件使用该`Auth`组件。您可以使用以下代码段执行此操作：

```
public $components = array('Auth'); 
```

另请参阅[在组件中使用其他组件](http://book.cakephp.org/2.0/en/controllers/components.html#using-other-components-in-your-component)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:27:09.523

尝试通过在 product_check() 中加载用户模型

```
 $this->ModelName = ClassRegistry::init('ModelName'); 
```

在你的情况下它是 User ，这应该是理想的工作，只要确保你有：

```
 model : User.php 
```

和表

```
users 
```

希望能帮到你！

# ruby - 硒“xpath”给出错误的值

> ID：14745752
> 
> 赞同：-1
> 
> 时间：2013-02-07T07:22:35.250
> 
> 标签：ruby, xpath, selenium-webdriver

我可能做错了什么，任何人都可以纠正我在哪里。

我为一些选择设置了代码：

```
to_select = wbs.cells(rows,7).value
driver.find_element(:xpath,"//table[contains(@id,'searchTable')]/tbody/tr[contains(@code,to_select)]/td").click 
```

但是上面选择了一些其他的值。

当我尝试以下操作时，工作正常。

```
driver.find_element(:xpath,"//table[contains(@id,'searchTable')]/tbody/tr[contains(@code,"PowerSelect")]/td").click 
```

***HTML***

```
<tr id="19692" code="PowerSelect" onclick="selectPopupField('19692','popupConditionCode','popupConditionId','conditionPopupDiv');return false;"> <td>PowerSelect</td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:35:07.077

像这样试试

```
driver.find_element(:xpath,"//table[contains(@id,'searchTable')]/tbody/tr[contai‌​ns(@code,'#{to_select}')]/td").click 
```

这可能会有所帮助。

# java - TitlePageIndicator 无法解析为android中的类型

> ID：14745766
> 
> 赞同：0
> 
> 时间：2013-02-07T07:23:45.073
> 
> 标签：java, android, rss, feed

[嗨，我必须从BBC 新闻阅读器应用](https://github.com/okey666/BBC-News-Reader)程序开发 android BBC 新闻阅读器应用程序

在这里我必须从上面的链接导入这些应用程序并运行该应用程序意味着我收到以下错误。我该如何解决这些错误？？？请帮我

错误是：

TitlePageIndicator 无法解析为类型...我在下一行收到错误...

```
TitlePageIndicator pagerIndicator = (TitlePageIndicator) findViewById(R.id.categoryPagerIndicator); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:30:57.013

**你应该阅读项目[自述文件](https://github.com/okey666/BBC-News-Reader#references)**

我们使用其他几个项目来帮助我们：

*   android-rss - 一个轻量级的 rss 库 - [https://github.com/ahorn/android-rss](https://github.com/ahorn/android-rss)
*   ActionBarSherlock (v4.1.0) - <4.0 设备的 UI 兼容性 - [http://actionbarsherlock.com](http://actionbarsherlock.com)
*   ViewPagerIndicator (v2.4.1) - 类别视图中的页面指示器 - [http://android.hlidskialf.com/blog/code/android-seekbar-preference](http://android.hlidskialf.com/blog/code/android-seekbar-preference)
*   drag-sort-listview (v0.4.1) - 选择时允许对类别进行排序 - [https://github.com/bauerca/drag-sort-listview/](https://github.com/bauerca/drag-sort-listview/)
*   Eula - 首次运行时显示“eula” - [http://code.google.com/p/apps-for-android/source/browse/trunk/DivideAndConquer/src/com/google/android/divideandconquer/Eula.java](http://code.google.com/p/apps-for-android/source/browse/trunk/DivideAndConquer/src/com/google/android/divideandconquer/Eula.java)

TitlePageIndicator 是 ViewPagerIndicator 的一部分，RSSFeed 是 android-rss 的一部分等等。只需下载此库，构建它并添加到您的项目中。

# css - 在图像上移动 div 时显示工具提示

> ID：14745771
> 
> 赞同：6
> 
> 时间：2013-02-07T07:23:55.673
> 
> 标签：css, tooltip, jquery, imagemap

**我所拥有的是：**

1.  我显示了一张饼图的图像
2.  我有一张饼图的图像地图
3.  默认浏览器工具提示显示在鼠标移动到图像上

**我想做的是：**

1.  在饼图切片 touchmove 上，在相对于饼图的圆形路径上移动绿色标记（一个 div）

**我想要达到的目标：**

1.  在将 div 圆形移动到饼图时显示默认浏览器工具提示
2.  在图像周围移动绿色标记（div）时显示饼图区域的值

**我该如何做到这一点？**

![当前饼图](../Images/9aa9899e70c28c239cdf4eacc9b5d007.png)

**一些代码：**
小提琴链接：[这里](http://jsfiddle.net/WhPrv/3/)

```
$("img").bind("touchmove",function(event) {
    e=event.originalEvent;
    x1 = e.pageX;
    y1 = e.pageY;
    x = x1 - x0;
    y = y1 - y0;

    r = 180 - ((180/Math.PI) * Math.atan2(y,x));

    $("#marker").css('-webkit-transform','rotate(-'+r+'deg) translate(-160px)');

    // Code to show values of Pie as a tooltip or in a separate div
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:21:40.750

令人惊讶的是，您的问题只能通过 CSS 解决（注意，我没有检查这是否适用于触摸设备，但应该可以）：

```
area {
    display:block;
    position: absolute;
}

area:after {
    background: red;
    color: white;
    position: absolute;
    display: block;
    white-space: nowrap;
}

area:hover:after {
    content: attr(title);
} 
```

但是，如果您想保持 javascript 的灵活性，您实际上不需要检查拖动状态，因为 touchmove 意味着手指被按下。您不应该需要嵌套的窗口加载事件（无论如何它不会在 Chrome 中触发）。这稍微简化了代码。

```
$(document).ready(function(){
    var angle=180;
    var x0, y0;
    var x, y, x1, y1, drag = 0;
    var content=$("#content");
    var img=$("#myimage");
    var imgpos = img.position();
    var marker = $("#marker");
    var info = $("#info");

    $(document).bind('touchmove touchstart',function(e){

        e.originalEvent.preventDefault();
    });

    img.removeAttr("width");
    img.removeAttr("height");

    x0 = imgpos.left + (img.width() / 2);
    y0 = imgpos.top + (img.height() / 2);

content.on("touchmove mousemove", "map", function(event) {
    e=event.originalEvent;
    x1 = e.pageX;
    y1 = e.pageY;
    x = x1 - x0;
    y = y1 - y0;
    r = 180 - ((180/Math.PI) * Math.atan2(y,x));
    marker.css('-webkit-transform','rotate(-'+r+'deg) translate(-160px)');
    info.text(event.target.getAttribute('title'));
});

}); 
```

你可以在这里看到这两种实现：http: [//jsfiddle.net/Wz7fF/](http://jsfiddle.net/Wz7fF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:54:30.957

你为什么不使用像 HighCharts 这样的标准库，让它处理你想要显示的工具提示信息。

# android - 了解GetView方法的convertView参数

> ID：14745780
> 
> 赞同：1
> 
> 时间：2013-02-07T07:24:18.873
> 
> 标签：android, baseadapter, convertview

您好 android 开发人员，我已阅读有关 BaseAdapter 的 getView 方法的文档，并且我的理解是视图可以重用/回收，因此在使用之前应检查此视图是否为非空且类型合适。在我的情况下，每次 convertview 为空并创建新视图。尽管列表已正确填充，但我想知道何时回收视图以及何时创建新视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:27:45.657

基本上，当您滚动列表时，它会被回收。当项目被隐藏时 - 它可以被回收并用作新的可见项目。尝试添加大约 100 个项目并滚动它们并检查真正创建了多少视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:38:59.297

```
so should check that this view is non-null and of an appropriate type before using 
```

所以，我相信你在 ListView 中使用了多个布局。

```
In my case every time convertview is null and new view is created 
```

这可能是因为，您没有使用：

```
@Override
public int getItemViewType(int position) {

    return dataArray[position].getType();
}
@Override
public int getViewTypeCount() {

    return TYPE_MAX_COUNT;
} 
```

* * *

```
Though list is populated correctly,but I would like to know when view will be recycled and when it will create new view 
```

它不会自动回收，您应该检查 ConvertView(not null) 的可用性并使用它，而不是膨胀新视图。

**这边走：**

```
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    int type = getItemViewType(position);
    if (convertView == null) {

        holder = new ViewHolder();
        switch (type) {
        case TYPE1:
        //inflate type1
        break;
        case TYPE2:
        //inflate type2
        break;
        }
    convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
} 
```

当特定类型的视图至少膨胀一次并且不再可见时，ConvertView 可以重用（非空），因为您滚动了列表。

# iphone - 单击 UITable 的 UIAlertView 标题部分后，从 Xcode 中的数据库更新

> ID：14745781
> 
> 赞同：0
> 
> 时间：2013-02-07T07:24:19.613
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试创建一个应用程序，当我按下警报视图打开时，我`add button`在导航栏上的 table.m 文件中创建。此警报标题存储在数据库中，此标题显示在 UITableView 上。怎么表现？`button``Enter name of alert title.`

```
-(IBAction)Add:(id)sender
{
    UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"GPS Reminder?" message:@"Please Enter Reminder" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];

    text_field = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
    text_field.placeholder=@"Enter Reminder";
    [text_field becomeFirstResponder];
    [text_field setBackgroundColor:[UIColor whiteColor]];
    [myAlertView addSubview:text_field];
    [myAlertView show];

}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex;
{
     if (buttonIndex == 1) {
        [self validation];

        NSString *str = [NSString stringWithFormat:@"insert into Worklist (userid,worktype) values ('%d','%@')",pkoflist,text_field.text];
        NSLog(@"%@",str);

        [Database executeQuery:str];
        [self initilization];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:29:56.013

首先，您不能对文本字段发出警报。当您单击它时，您可以将其分配给一个按钮。请参阅要制作`otherButtonTitles`为的代码`nil`。

```
-(void)method {
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"username" 
                                   message:@"plz enter the corret username" 
                                  delegate:nil 
                         cancelButtonTitle:@"OK"
                         otherButtonTitles: nil];
     [alert show];
     [alert release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:20:23.477

使用 alertViewStyle UIAlertViewStylePlainTextInput

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"message" delegate:self cancelButtonTitle:@"Abort" otherButtonTitles:@"Save", nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;
[alert show]; 
```

然后在

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
   if (buttonIndex == 1) {
    // get string from textfield
    string = [alertView textFieldAtIndex:0].text;
    // save
    // reload table with saved string
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:44:12.503

我的 void 方法有错误，我检测到这个.... - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex; {

```
if (buttonIndex == 1)
{
    if([self validation])
    {
    NSString *str = [NSString stringWithFormat:@"insert into Worklist (userid,worktype) values ('%d','%@')",pkoflist,text_field.text];
    NSLog(@"%@",str);

    [Database executeQuery:str];
    [self initilization];
    }
} 
```

}

# mysql - 如何在perl中绑定表名的值？

> ID：14745782
> 
> 赞同：3
> 
> 时间：2013-02-07T07:24:27.793
> 
> 标签：mysql, perl

在这里，我试图为特定查询绑定表名：

```
$sth = $dbh->prepare("SELECT id FROM ? WHERE service_id = ?"); 
```

和执行语句：

```
$sth->execute($table_name,$service_id); 
```

它给出了一个 SQL 错误，为什么会这样？

有什么方法可以将表名绑定到特定查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T07:39:02.050

您可以使用查询参数代替SQL 表达式 中的*文字值。*

即，在您通常会使用带引号的字符串文字或带引号的日期文字或数字的地方。

参数不能用于表名、列名、值列表（如 IN 子句）、SQL 关键字或 SQL 表达式。

要使表的名称动态化，您必须在准备*之前*将其插入到 SQL 查询字符串中：

```
my $table_name_lit = $dbh->quote_identifier($table_name);
my $sth = $dbh->prepare("SELECT id FROM $table_name_lit WHERE service_id = ?");
$sth->execute($service_id); 
```

注意`$table_name`不包含任何不受信任的内容。最好的方法是与`$table_name`已知表名列表进行比较。换句话说，使用一个固定的表列表作为*白名单*。如果`$table_name`与您的任何表名都不匹配，则使用默认表名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T08:57:25.340

@Karwin 响应没问题，还有关于 sql 注入问题的说明。在插入 SELECT 字符串之前，您应该检查 $table_name 是否包含有效的表名。例如，如果您使用 MySQL，您可以通过以下方式获取在 DB 中设置的当前表名：

```
my @tables = @{ $dbh->selectcol_arrayref('SHOW TABLES') }; 
```

并且很容易使用“grep”检查 $table_name 是否包含正确的值。也可以（并且独立于数据库）使用[DBI 的表方法](http://search.cpan.org/~timb/DBI-1.623/DBI.pm#tables)获取表目录。

# c# - 要运行此应用程序，您首先必须安装 .Net 4.5

> ID：14745787
> 
> 赞同：9
> 
> 时间：2013-02-07T07:24:43.637
> 
> 标签：c#, visual-studio-2010, .net-4.5

我有一个在 VS2012 中创建的 wpf 项目，但现在正试图在 VS2010 中破解。

在 csproj 文件中，我删除了“所需版本”的内容。我可以在 VS2010 中打开项目，也可以编译它，但如果我尝试运行它，我会收到“需要 v4.5”消息。

我尝试删除所有引用并重新添加它们：仍然编译（因此所有依赖项都应该在我的（XP）机器上）。

我还应该去哪里寻找？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T07:30:03.023

检查文件[`<supportedRuntime>`](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)中的元素`.config`。

如果设置为，`<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />`那么它将寻找 .NET 4.5。（当然，这个设置在编译过程中根本不使用，这就是为什么 VS 在编译时不会发出任何警告或错误的原因）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:27:24.130

您需要更改`Target Framework`项目属性中的设置。

如果一切都失败了，那么只需使用 WPF 应用程序项目创建一个新的解决方案，然后添加所有 cs 文件和其他解决方案中的所有其他内容，然后尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:27:24.610

Visual Studio 2012 的运行时与 2010 不同，.Net 框架也不同，VS2010 使用 4.0，VS2012 使用 4.5。

这可能会有所帮助：[Visual Studio 2012 可以与 Visual Studio 2010 并排安装吗？](https://stackoverflow.com/questions/7425475/can-visual-studio-2012-be-installed-side-by-side-w-visual-studio-2010)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:29:49.303

尝试更改 web.config 文件：

```
<configuration>
    <system.web>
        <compilation debug="true" strict="false" explicit="true" targetFramework="4.5" />
    </system.web>
</configuration> 
```

了解更多[详情](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)

# java - OpenGL ES 2.0 中的模板纹理

> ID：14745796
> 
> 赞同：5
> 
> 时间：2013-02-07T07:25:22.343
> 
> 标签：java, opengl-es, opengl-es-2.0, libgdx, stencil-buffer

我一直在尝试在[Libgdx](http://libgdx.badlogicgames.com/)项目中进行一些模板制作。到目前为止，我只能模版出多边形（*插图后的代码*）。

**问题：**我应该如何在 OpenGL ES 2.0 中模版出非多边形形状？（即我不希望将透明像素绘制到模板缓冲区）

我应该如何在不使用 GL_ALPHA_TEST 的情况下实现这一点（因为 OpenGL ES 2.0 不允许这样做）？

非常感谢任何帮助或指示，并在此先感谢。

**编辑：**如果您能提供一些代码示例以供理解，那将非常有帮助。

请考虑下图：

![在此处输入图像描述](../Images/a643ee6ea98373415c714f4496b36bfb.png)

这是渲染代码：

```
@Override
public void render(float delta) {
    Gdx.gl20.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_STENCIL_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT );

    stage.act();
    stage.draw();

    Gdx.gl20.glColorMask(false, false, false, true);
    Gdx.gl20.glDepthMask(false);

    Gdx.gl20.glClearStencil(0x0);

    Gdx.gl20.glEnable(GL20.GL_STENCIL_TEST);

    Gdx.gl20.glStencilFunc(GL20.GL_ALWAYS, 0x1, 0x1);
    Gdx.gl20.glStencilOp(GL20.GL_KEEP, GL20.GL_KEEP, GL20.GL_REPLACE);      

    batch.begin();
    batch.draw(heart, 0, i+50);
    batch.end();

    Gdx.gl20.glColorMask(true, true, true, true);
    Gdx.gl20.glDepthMask(true);

    Gdx.gl20.glStencilFunc(GL20.GL_NOTEQUAL, 0x1, 0x1);
    Gdx.gl20.glStencilOp(GL20.GL_KEEP, GL20.GL_KEEP, GL20.GL_KEEP);

    batch.begin();
    batch.draw(heart, 0, i);
    batch.end();

    Gdx.gl20.glDisable(GL20.GL_STENCIL_TEST);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:02:41.310

我没有使用 libgdx 的经验，但在通常情况下，您可以在片段着色器中模拟 alpha 测试：

```
if (pixelColor.a <= ALPHA_THRESHOLD) // threshold should be 0 for good visual results
        discard; 
```

# sql - 根据 SQL Server 中多个先前行的值提取行

> ID：14745798
> 
> 赞同：6
> 
> 时间：2013-02-07T07:25:27.207
> 
> 标签：sql, tsql

我有一个包含这样的示例数据的表：

```
ID  Key   User
--  ----  -----
1   a     test
2   ab    test
3   abc   test
4   abcd  test
5   e     test1
6   ef    test1
7   efg   test1
8   efgh  test1
9   t     test1
10  ty    test1
11  tyu   test1
12  tyui  test1 
```

数据由用户构建的值的顺序“快照”组成。我想为每个用户实例返回最后一行，建立一个不同的最终`Key`值。请注意大多数行如何`Key`包含整个前一行`Key`以及一个附加字母？我只想要终止这样一个序列的行并且是每个链中可能的最长值`Keys`连续包含前一个`Key`值。

上述示例数据应返回以下内容：

```
ID  Key   User
--  ----  -----
4   abcd  test
8   efgh  test1
12  tyui  test1 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T23:26:49.583

在没有回答我的问题的情况下，我不得不做出以下假设：

*   该`ID`列代表年表，并且始终无间隔地增加一。
*   SQL Server 2005 或更高版本

*（更新：我做了一个小调整，使这项工作与来自不同用户的“交错”数据一起工作，并在我的小提琴中添加了一些交错和一些棘手的数据。）*

所以这是我的解决方案。[在 SqlFiddle 中查看它](http://sqlfiddle.com/#!6/78ec8/3)。值得注意的是，它模拟了`LEAD`来自 SQL Server 2012 的分析，没有`JOIN`.

```
WITH Info AS (
  SELECT
     Grp = Row_Number() OVER (PARTITION BY UserName ORDER BY ID, Which) / 2,
     *
  FROM
     dbo.UserEntry U
     CROSS JOIN (
        SELECT 1 UNION ALL SELECT 2
     ) X (Which)
)
SELECT
   ID = Max(V.ID),
   DataKey = Max(V.DataKey),
   UserName = Max(V.UserName)
FROM
   Info I
   OUTER APPLY (SELECT I.* WHERE Which = 2) V
WHERE I.Grp > 0
GROUP BY
   I.UserName,
   I.Grp
HAVING
   Max(I.DataKey) NOT LIKE Min(I.DataKey) + '_'; 
```

输入：

```
INSERT dbo.UserEntry (ID, DataKey, UserName)
VALUES
(1, 'a', 'test'),
(2, 'ab', 'test'),
(3, 'e', 'test1'),
(4, 'ef', 'test1'),
(5, 'abc', 'test'),
(6, 'abcd', 'test'),
(7, 'efg', 'test1'),
(8, 'efgh', 'test1'),
(9, 't', 'test1'),
(10, 'ty', 'test1'),
(11, 'tyu', 'test1'),
(12, 'tyui', 'test1'),
(13, 't', 'test1'),
(14, 'a', 'test'),
(15, 'a', 'test'),
(16, 'ab', 'test'),
(17, 'abc', 'test'),
(18, 'abcd', 'test'),
(19, 'to', 'test1'), 
(20, 'abcde', 'test'),
(21, 'top', 'test1'); 
```

输出：

```
ID  DataKey  UserName
--  -------  --------
6   abcd     test
8   efgh     test1
12  tyui     test1
14  a        test
20  abcde    test
21  top      test1 
```

注意：我使用了不同的列名，因为使用保留字作为列名不是最佳做法（它会强制您在任何地方的名称周围加上方括号）。

我使用的技术将适用于单次扫描。它没有连接。使用适当索引的正确构建的基于连接的查询**可能**在 CPU 和时间上略胜一筹，但此解决方案肯定会具有最少的读取。

**更新**

虽然我的查询可能很好，但这个问题中的特定数据结构适合我第一次回答时没有考虑的非常优雅的解决方案。感谢 Andriy 的基本思想，这是一个炸药和超简单的查询（与上面相同的小提琴）。

```
WITH Info AS (
   SELECT
      Grp = Row_Number() OVER (PARTITION BY UserName ORDER BY ID) - Len(DataKey),
         *
   FROM
      dbo.UserEntry U
)
SELECT
   ID = Max(I.ID),
   DataKey = Max(I.DataKey),
   I.UserName
FROM
   Info I
GROUP BY
   I.UserName,
   I.Grp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:52:52.677

这是另一种方法：

1.  使用首字母作为序列的分组标准。

2.  分别对每个用户的行进行排名，按 ID 对它们进行排序，然后从排名中减去 Key 值的长度。将结果用作另一个序列分组标准。

3.  再次对行进行排序，这次按用户和#1 和#2 的条件对它们进行分区，并按 ID 的降序对它们进行排序。

4.  获取排名为 1 的行。

这是一个实现：

```
WITH partitioned AS (
  SELECT
    *,
    SeqKey = LEFT([Key], 1),
    SeqGrp = ROW_NUMBER() OVER (
      PARTITION BY UserName
      ORDER BY ID
    ) - LEN([Key])
  FROM dbo.UserEntry
),
ranked AS (
  SELECT
    ID,
    [Key],
    UserName,
    rnk = ROW_NUMBER() OVER (
      PARTITION BY UserName, SeqKey, SeqGrp
      ORDER BY ID DESC
    )
  FROM partitioned
)
SELECT
  ID,
  [Key],
  UserName
FROM ranked
WHERE rnk = 1
; 
```

与@ErikE 的解决方案一样，假设 ID 列定义了序列的顺序。但是，如果与同一序列相关的 ID 值存在间隙，上述查询仍然可以正常工作。

[您也可以在 SQL Fiddle](http://sqlfiddle.com/#!6/39a32/24)上尝试此查询。（注意：演示使用@ErikE 的 DDL。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:42:34.833

此查询应为您提供正确的结果。我正在考虑这样一个事实，即 ID 之间可能存在一些差距（可能存在一些缺失的 ID，或者超过用户可能同时构建的序列）。

在内部查询中，我将返回表中的每一行，以及`prevID`指向同一用户的前一个 ID。然后我再次加入此查询的结果`yourtable`：

```
SELECT
  t.ID, t.DataKey, t.UserName
FROM
  yourtable t LEFT JOIN (
    SELECT t1.ID id,
           max(t1.DataKey) DataKey,
           max(t1.UserName) UserName,
           max(t2.ID) prevID
    FROM
      yourtable t1 LEFT JOIN yourtable t2
      ON
        t1.ID>t2.ID
        AND t1.UserName = t2.UserName
    GROUP BY t1.ID
  ) t2
  ON t2.prevID = t.ID
     AND t2.UserName = t.UserName
     AND t2.DataKey LIKE CONCAT(t.DataKey, '_')
WHERE t2.ID is NULL 
```

只有当前行是序列的一部分，连接才会成功。如果该行是`DataKey`序列的最后一个连接将不会成功，我将返回该行。

[在这里](http://sqlfiddle.com/#!6/3683e/1)看小提琴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T19:56:07.160

那么这个版本假设字符只添加到值中（不删除）：

```
SELECT *
FROM dbo.UserEntry t1
WHERE 
  NOT EXISTS (
      SELECT *
      FROM dbo.UserEntry t2
      WHERE t1.username = t2.username 
      AND t2.dataKey LIKE t1.dataKey + '%'
      AND t2.ID = t1.ID + 1
   ) 
```

您可以轻松地将其更改为删除 dataKey 中的字符。

[SqlFiddle](http://sqlfiddle.com/#!6/1206b/2)

这是使用`LEAD`函数执行此操作的另一种方法。这样，您可以通过使用以下行的值扩展原始行来简化主选择：

```
WITH UserEntryWithNext AS (
SELECT 
  t1.*, 
  LEAD(t1.DataKey,1,0) OVER (ORDER BY ID) AS NextDataKey
FROM dbo.UserEntry t1
)
SELECT * 
FROM UserEntryWithNext 
WHERE NOT NextDataKey LIKE DataKey + '%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T10:32:24.370

请找到我的部分答案：我们如何知道一个序列是否从新开始？如果能够记录序列 ID，肯定会使答案变得更容易。

```
select * from UserEntry 
where ID in (
  select max(ID) from UserEntry group by SeqNum
)

-- that assumes seqnum globally unique.  If only unique per person then group by SeqNum, UserName

-- Create data:
CREATE TABLE dbo.UserEntry (
  ID int,
  DataKey varchar(20),
  SeqNum int,
  UserName varchar(10)
);

INSERT dbo.UserEntry (ID, DataKey, SeqNum, UserName)
VALUES
  (1, 'a', 1 , 'test'),
  (2, 'ab', 1 , 'test'),
  (3, 'abc',  1 ,'test'),
  (4, 'abcd',  1 ,'test'),
  (5, 'e', 2 , 'test1'),
  (6, 'ef', 2 , 'test1'),
  (7, 'efg', 2 , 'test1'),
  (8, 'efgh',  2 ,'test1'),
  (9, 't',  3 ,'test1'),
  (10, 'ty', 3 , 'test1'),
  (11, 'tyu', 3 , 'test1'),
  (12, 'tyui',  3 ,'test1'),
  (13, 't',  4 ,'test1'),
  (14, 'to',  4 ,'test1'), 
  (15, 'top',  4 ,'test1'); 
```

[SQL小提琴](http://sqlfiddle.com/#!3/ce3a9/1/0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T08:32:22.130

EXISTS 选项

```
SELECT *
FROM dbo.test37 t1
WHERE EXISTS (
              SELECT *
              FROM dbo.test37 t2
              WHERE t1.[user] = t2.[user]
              GROUP BY LEFT([Key], 1), [User]
              HAVING MAX([Key]) = t1.[Key]
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b2d6b/1/0)上的演示[](http://sqlfiddle.com/#!3/b2d6b/1/0)

 **更新

```
;WITH cte AS
 (      
  SELECT t1.[Key], t1.[User], ROW_NUMBER() OVER(ORDER BY t1.[User], t1.[Key]) AS Id
  FROM dbo.test37 t1
  )
  SELECT c1.[Key], c1.[User]
  FROM cte c1 LEFT JOIN cte c2 ON c1.ID + 1 = c2.Id
  WHERE ISNULL(c2.[Key], '') NOT LIKE ISNULL(c1.[Key], '') + '%' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T08:46:28.663

因此，您存储了输入某些数据的整个历史记录，并且您只想获得最终的注册数据。有人在这里看到问题吗？

**为什么不只存储最终提交的值？或者编写一个将使用 ajax 在离开字段时推送值的 javascript？**

对考虑不周的数据库表进行复杂而昂贵的查询并不是一个好主意。始终尝试以方便获取的形式存储您以后需要的内容，即使您必须花费一些时间来处理数据或以编程方式获取数据。

想象一下在这样的表中有数百万行。如果您必须经常执行双嵌套查询，它将杀死您的数据库。**

# android - Android 发送带附件的邮件

> ID：14745805
> 
> 赞同：4
> 
> 时间：2013-02-07T07:25:42.390
> 
> 标签：android, jakarta-mail, sendmail

我正在发送带有附件的电子邮件！没关系，但有一个问题。我添加到电子邮件正文的文件具有“完整路径”的名称。发送喜欢...

```
 class SendEmailAsyncTask extends AsyncTask <Void, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Void... params) {
        {
            Context context = getApplicationContext();
            Mail m = new Mail("****a@gmail.com", "te****mail"); 
            String[] toArr = {"te****all@yan****"}; 
            m.setTo(toArr); 
            m.setFrom("t****il.ya@gmail.com"); 
            m.setSubject("TESTING");         
            m.setBody("Принят test");
            try { 
                String path = "/mnt/sdcard/qwe";
                 File fileDir = new File( path );
                 String[] _files = fileDir.list(); 
                 for ( int i = 0 ; i < _files.length ; i++  )
                 { 
                     _files[i] = path + "/"+ _files[i];
               //        _files[i] = path + "/"+ _files[i].substring(_files[i].lastIndexOf("/"));
                       m.addAttachment(_files[i]);
                       Log.v("list sending", _files[i]);
                       Log.v("list sending", _files[i].substring(_files[i].lastIndexOf("/")));
                 }

              if(m.send()) { 

                  for ( int i = 0 ; i < _files.length ; i++  )
                  { 
                      Log.v("test mail result", "success");
                  }
              } else { 
                  Log.v("test mail result", "fail");
              } 
            } catch(Exception e) {
                 Log.v("test mail result", "error while sending");
            }           
        }
        return null;
    }
} 
```

发送日志是......

```
 02-07 11:18:15.542: V/list sending(18255): /mnt/sdcard/qwe/1233.txt
     02-07 11:18:15.542: V/list sending(18255): /1233.txt
     02-07 11:18:15.542: V/list sending(18255): /mnt/sdcard/qwe/123.txt
     02-07 11:18:15.542: V/list sending(18255): /123.txt
     02-07 11:18:15.552: V/list sending(18255): /mnt/sdcard/qwe/12333.txt
     02-07 11:18:15.552: V/list sending(18255): /12333.txt
     02-07 11:18:15.722: D/dalvikvm(18255): GC_FOR_MALLOC freed 3564 objects / 349496 bytes in 33ms
     02-07 11:18:15.722: I/global(18255): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
     02-07 11:18:16.222: I/SSLSocketFactory(18255): Using factory org.apache.harmony.xnet.provider.jsse.OpenSSLSocketFactoryImpl@4006ed60
     02-07 11:18:17.084: D/NativeCrypto(18255): SSL_OP_NO_SSLv3 is set
     02-07 11:18:18.562: I/global(18255): Default buffer size used in BufferedOutputStream constructor. It would be better to be explicit if an 8k buffer is required.
     02-07 11:18:18.562: I/global(18255): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
     02-07 11:18:19.152: I/global(18255): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
     02-07 11:18:27.687: V/test mail result(18255): success 
```

如何仅获取附件中的文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:51:10.927

这是我的 addAttachment 的样子：

```
public static void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename);        
    messageBodyPart.setDataHandler(new DataHandler(source));

    // Truncating the full file path to just filename
    Pattern p = Pattern.compile("[^/]*$");
    Matcher m = p.matcher(filename);
    if (m.find())
        messageBodyPart.setFileName(m.group());
    else 
        messageBodyPart.setFileName(filename);

    multipart.addBodyPart(messageBodyPart);
  } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:56:33.540

我不知道“邮件”类是什么，但看起来该错误在 Mail.addAttachment 方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T08:42:54.220

试试这个：

```
messageBodyPart.setFileName(filename.substring(filename.lastIndexOf("/") + 1)); 
```

# c++ - 为 double * obj 和 obj * double 重载 * 运算符的问题

> ID：14745809
> 
> 赞同：0
> 
> 时间：2013-02-07T07:25:56.947
> 
> 标签：c++, visual-c++

我正在尝试重载 Vector2D 类的 * 运算符，以便我可以执行以下操作： object * double（不工作） double * object（不工作） object * object（这个工作正常）

我收到有关如何没有运算符采用 Vector2D 的左手类型或 double 的左手类型等的错误消息。我不确定在尝试实现各种 * 重载时我做错了什么. 我什至为自动类型转换添加了一个构造函数：

```
#include <iostream>
using namespace std;

struct Vector2D 
{
public:
    // constructors
    Vector2D(double X=0, double Y=0);
    Vector2D(double number);

    // mutators
    void setX(double X);
    void setY(double Y);
    //accessors
    double getX() const;
    double getY() const;

    // overloads * operator for Vector2D * double
    const Vector2D operator *(const Vector2D& vector2) const;
    // overloads * operator for Vector2D * Vector2D -- returns dot product
    double operator *(const Vector2D& vector2);

private:
    // vector components
    double x;
    double y;
};

// overloads * operator for double * Vector2D
const Vector2D operator *(const Vector2D& vector1, const Vector2D& vector2);

int main()
{
    int x, y;
    Vector2D vecA, vecB, vecC;

    cout << "Enter x and y components (separated by a space) for vector A: ";
    cin >> x >> y;
    vecA.setX(x);
    vecA.setY(y);

    vecB = vecA * 25.0;
    cout << vecB.getX() << endl << vecB.getY() << endl;

vecC = 25.0 * vecA;
cout << vecC.getX() << endl << vecC.getY() << endl;

    return 0;
}

Vector2D::Vector2D(double X, double Y) {
    x = X;
    y = Y;
}

Vector2D::Vector2D(double number) {
    x = y = number;
}

void Vector2D::setX(double X) {
    x = X;
}

void Vector2D::setY(double Y) {
    y = Y;
}

double Vector2D::getX() const {
    return x;
}

double Vector2D::getY() const {
    return y;
}

const Vector2D Vector2D::operator *(const Vector2D& vector2) const {
    double newX = x*vector2.x;
    double newY = y*vector2.y;
    return Vector2D(newX, newY);
}

// Vector2D * Vector2D (returns dot product)
double Vector2D::operator *(const Vector2D& vector2) {
    double dotProd = (x*vector2.x) + (y*vector2.y);

    return dotProd;
}

// double * Vector2D
const Vector2D operator *(const Vector2D& vector1, const Vector2D& vector2) {
    double newX = vector1.getX()*vector2.getX();
    double newY = vector2.getX()*vector2.getY();
    return Vector2D(newX, newY);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:33:11.833

```
const Vector2D operator *(const Vector2D& vector1, const Vector2D& vector2); 
```

对于双 * 向量，这应该是

```
const Vector2D operator *(double d, const Vector2D& vector2); 
```

而对于 vector * double 它应该是

```
// overloads * operator for Vector2D * double
    const Vector2D operator *(double d) const; 
```

# javascript - JQuery 语句中的双循环

> ID：14745812
> 
> 赞同：-1
> 
> 时间：2013-02-07T07:26:05.787
> 
> 标签：javascript, jquery

我的网站中有以下 Jquery 代码，

```
 $("#nav-tabs").on("click", "a", function(e) {
            e.preventDefault();
            $(this).tab('show');
        });

        var counter = 1;

        $('.plus').click(function(e) {

            if(counter <= 3){
            $('#nav-tabs').append('<a href="#tab' +</button></a></li>');
            } else { alert("Only 3 Tabs Allowed!")};

            $('.tab-content').append('<div class="tab-pane" id="tab' + counter + '"></div>');
            if (counter <= 3) {
                counter++;
            } else {};

        $('.close').click(function(e) {

            var panelId = $(this).closest("li").remove().attr("aria-controls");
            $("#tab" + panelId).remove();
            if(counter < 1){
                counter = 1
                }else if (counter >= 1) {
                    counter--;
                } else if (counter == 0) {
                    counter = 1
                };

        })

    }); 
```

我的问题是，一旦我单击 .close 而不是在函数中执行一次，它就会再次重复自己并减少我的计数器...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:35:30.827

而不是实际绑定点击事件来识别关闭/打开被点击。尝试这样做。

```
$(document).ready(function(){

var counter = 1;

$("#nav-tabs").on("click", "a", function() {
    var item = $(this); // the anchor tag which was clicked

    item.tab('show');

    if( item.hasClass("open") ) { // checks if the clicked anchor tag has class "open"

        if(counter <= 3)
            $('#nav-tabs').append('<a href="#tab">Button</a></li>');
        else
            alert("Only 3 Tabs Allowed!");

        $('.tab-content').append('<div class="tab-pane" id="tab' + counter + '"></div>');

        if (counter <= 3)
            counter++;
    }

    else if( item.hasClass("close") ) { // checks if the clicked anchor tag has class "close"
        var panelId = $(this).closest("li").remove().attr("aria-controls");

        $("#tab" + panelId).remove();

        if(counter < 1)
           counter = 1
        else if (counter >= 1)
            counter--;
        else if (counter == 0) {
            counter = 1
    }

    return false; //this will prevent default behavior
});

}); 
```

# asp.net - WebService 方法有时耗时过长

> ID：14745813
> 
> 赞同：1
> 
> 时间：2013-02-07T07:26:07.550
> 
> 标签：asp.net, sql-server, wcf, monitoring, administration

我是一名初级 Asp.net 开发人员，并得到了一项有趣的任务。我正在托管一个 Web 服务。当客户端调用将一些数据保存到我们的数据库的方法时，有时需要很长时间才能成功。通常**~5 sec**有时**30+sec**。我真的不知道从哪里开始。

在我看来，这可能是由以下原因引起的`2 reasons`：

1.  客户的互联网连接不良。
2.  我的数据库超载

但是我怎样才能证明这一点或找到真正的原因呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:28:28.107

运行 WCF 跟踪和数据库跟踪。在它们两者之间，您应该能够找出是其中一个还是另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:32:51.133

尝试[在 SQL](http://msdn.microsoft.com/en-us/library/ff650699.aspx)端进行分析以检查查询执行情况。您还可以在服务器上使用[wireshark](https://www.wireshark.org/)来查看收到的请求以及一段时间内发生的情况。检查服务的代码是否有循环（如果该参数不是预期的值，则可能存在一些检查某些参数的递归检查 - 冻结并再次检查）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:43:15.600

一种选择是在客户端访问 Web 服务代码时对其进行调试。

如果需要很长时间才能达到调试点，那么客户端就有问题。

如果它快速完成调试，则单步执行代码并查看哪个步骤需要很长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:12:40.343

当谈到在高于 2003 的 Windows 服务器中部署和托管时，可以安装 AppFabric，它具有在 IIS 上监视和排除 Web 服务和 Web 应用程序的强大功能。

监控可以通过 IIS 管理中的 UI 和 web.config 进行配置。并且比默认的 IIS 跟踪功能更好。

如何实现它以及我的意思在这里更好地描述：

[http://msdn.microsoft.com/en-us/library/ee677277.aspx](http://msdn.microsoft.com/en-us/library/ee677277.aspx)

当数据库因读取操作而特别过载时，还可以使用 AppFabric 分布式缓存。

首先检查您的请求执行了多长时间。然后决定配置文件或不数据库。尝试以这种方式设计您的架构，以避免在保存后阻塞，可能是异步响应，或者客户端在保存完成时并不总是应该等待。客户稍后可以询问保存状态，您不会阻止他。无论如何，要了解有关架构或所需要求的准确、更多详细信息。

# r - R - 坚持 plot() - 根据槽值着色 shapefile 多边形

> ID：14745815
> 
> 赞同：8
> 
> 时间：2013-02-07T07:26:19.367
> 
> 标签：r, geospatial, shapefile

我有一个显示澳大利亚偏远地区的 shapefile，从澳大利亚统计局获得：

[http://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.005July%202011?OpenDocument](http://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.005July%202011?OpenDocument)

同一个 URL 是 PDF“ASGS Remoteness Structure Edition 2011 PDF Maps”——我正在尝试从这个 PDF 文档中复制第一张地图。

我已阅读 shapefile 并将颜色信息添加到`data`插槽：

```
ra <- readShapeSpatial("RA_2011_AUST", delete_null_obj = TRUE)
ra@data$COLOUR <- "#FFFFFF"
ra@data$COLOUR[(as.numeric(as.character(ra@data$RA_CODE11)) %% 10) == 0] <- "#006837"
ra@data$COLOUR[(as.numeric(as.character(ra@data$RA_CODE11)) %% 10) == 1] <- "#31A354"
ra@data$COLOUR[(as.numeric(as.character(ra@data$RA_CODE11)) %% 10) == 2] <- "#78C679"
ra@data$COLOUR[(as.numeric(as.character(ra@data$RA_CODE11)) %% 10) == 3] <- "#C2E699"
ra@data$COLOUR[(as.numeric(as.character(ra@data$RA_CODE11)) %% 10) == 4] <- "#FFFFCC" 
```

我唯一要做的就是绘制地图！这就是我卡住的地方...

`ra@polygons`是一个包含 35 个多边形的列表，每个多边形都有一个插槽`ID`，它是数据帧的索引`ra@data`。所以我所要做的就是告诉`plot()`在`ra@data$COLOUR[ID]`. 嗯，不完全是。35 个多边形（“多边形”类）中的每一个都有自己的多边形列表（“多边形”类）；总共有 6902 个多边形！！！

我的理解`plot()`是，我必须以与绘制多边形相同的顺序向它传递一个颜色向量。因此，我相信我必须创建一个长度为 6902 的向量，每个元素都保存相关多边形的颜色值。到目前为止我做得怎么样？

如果按顺序绘制多边形，那将很容易，但事实并非如此。35 个多边形中的每一个都有`plotOrder`一个整数向量槽，因此颜色向量可能必须按每个向量中的值排序。

在这一点上，这一切似乎有点太复杂了。我在这里完全偏离轨道了吗？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T08:05:15.247

你已经完成了所有的工作！

```
plot(ra, col=ra@data$COLOUR) 
```

甚至，正如@Spacedman 建议的那样：

```
plot(ra, col=ra$COLOUR) 
```

就是这样！

![在此处输入图像描述](../Images/9725581b6aa956bdefb3856991c84743.png)

如果你想摆脱多边形边界：

```
plot(ra, col=ra$COLOUR, border=NA) 
```

![在此处输入图像描述](../Images/6d2f6e63496cea82da8918ba76fe2881.png)

**编辑**：试图解释这种行为：

根据`?SpatialPointsDataFrame`：

> 具有默认 ID 匹配的 SpatialPolygonsDataFrame 根据多边形 ID 槽检查数据框行名称。然后它们必须彼此一致，并且是唯一的（没有 Polygons 对象可以共享 ID）；如果需要匹配多边形 ID，数据框行将重新排序。

这意味着多边形是根据它们的 ID 排序的，因此按照 slot 中数据帧的行的顺序排列`@data`。

现在，如果您查看函数`plot.SpatialPolygons`（使用`getAnywhere(plot.SpatialPolygons)`），在某些时候会出现这些行：

```
...
    polys <- slot(x, "polygons")
    pO <- slot(x, "plotOrder")
    if (!is.null(density)) {
        if (missing(col)) 
            col <- par("fg")
        if (length(col) != n) 
            col <- rep(col, n, n)
        if (length(density) != n) 
            density <- rep(density, n, n)
        if (length(angle) != n) 
            angle <- rep(angle, n, n)
        for (j in pO) .polygonRingHoles(polys[[j]], border = border[j], 
            xpd = xpd, density = density[j], angle = angle[j], 
            col = col[j], pbg = pbg, lty = lty, ...)
    }
... 
```

输入到的向量与槽`col`具有相同的顺序`polygons`，因此与 ID 相同。`plotOrder`用于以相同的方式索引所有这些。

# iphone - 获取 Html 标签值 monotouch

> ID：14745817
> 
> 赞同：0
> 
> 时间：2013-02-07T07:26:29.550
> 
> 标签：iphone, html, ipad, xamarin.ios

假设我们有一个字符串变量，它的值包含一个 Html 值，例如

```
<span class =\"Name\">VALUE</span> 
```

在 monodevelop 我们可以通过以下代码访问它的值（'VALUE'）：

```
Html .FromHtml (Stringvariable).ToString (); 
```

无论字符串是文字字符串（如`"VALUE"`），还是 HTML 标记（如上面的标记示例），它都会返回值。但它已在一个 android 库中定义。

***我的问题是：***在 monotouch 中，我们如何进行这样的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:52:23.853

您可以尝试使用[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)。我个人没有在 MT 项目中使用过它，但据说它可以从源代码构建以在 MT 中使用。

# javascript - 使用气球标记和信息窗口在地图上绘制坐标

> ID：14745818
> 
> 赞同：0
> 
> 时间：2013-02-07T07:26:32.767
> 
> 标签：javascript, html, google-maps, google-maps-api-3, google-maps-markers

我一直在尝试在地图上绘制一些随机坐标，并在地图上显示为标记并`onClick`弹出一个`infoWindow`.. 但无济于事:(

地图显示为空。谁能告诉我我哪里出错了？任何建议都是非常可观的:)

我的 HTML 页面：

```
<html lang="en">
<head>
<title>Google Map</title>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  function initialize() {
  var myOptions = {
   zoom: 2,
    center: new google.maps.LatLng(23.241346, 18.281250),
     mapTypeId: google.maps.MapTypeId.ROADMAP
   }
   var map = new google.maps.Map(document.getElementById("map_canvas"),
                            myOptions);

   setMarkers(map, locations);
}

 var locations = [
   ['AU', -37.850565, 144.980289 , 4,"'<p>'233'</p>'"],
    ['AS', 48.1670845, 16.3465254, 5, "'<p>'233'</p>'"],
   ['BE', 50.8826906, 4.4570261, 3, "'<p>'233'</p>'"],
   ['BR', -23.5004937, -46.8482093, 2, "'<p>'233'</p>'"],
   ['CZ', 50.0878114, 14.4204598, 1, "'<p>'233'</p>'"],
   ['DM', 55.6710507, 12.4401635, 6, "'<p>'233'</p>'"],
   ['FI', 60.2101064, 24.8251788, 7, "'<p>'233'</p>'"],
   ['FR', 48.8744779, 2.1668675, 8, "'<p>'233'</p>'"],
   ['GE', 51.19423, 6.70568, 9, "'<p>'233'</p>'"],
   ['GR', 38.0433281, 23.797971, 10, "'<p>'233'</p>'"]
 ];

  function setMarkers(map, locations) {

  var image = new google.maps.MarkerImage('punaise.png',
      // This marker is 30 pixels wide by 30 pixels tall.
      new google.maps.Size(30, 30),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
       // The anchor for this image is the base of the flagpole at 0,32.
       new google.maps.Point(0, 32));
     var shadow = new google.maps.MarkerImage('schaduw.png',
      // The shadow image is larger in the horizontal dimension
       // while the position and offset are the same as for the main image.
       new google.maps.Size(30, 30),
       new google.maps.Point(0,0),
       new google.maps.Point(0, 32));
       // Shapes define the clickable region of the icon.
       // The type defines an HTML &lt;area&gt; element 'poly' which
       // traces out a polygon as a series of X,Y points. The final
       // coordinate closes the poly by connecting to the first
       // coordinate.
   var shape = {
      coord: [1, 1, 1, 20, 18, 20, 18 , 1],
      type: 'poly'

   };
   for (var i = 0; i < locations.length; i++) {
    var entity = locations[i];
    var myLatLng = new google.maps.LatLng(entity[1], entity[2]);
    var marker = new google.maps.Marker({
         position: myLatLng,
        map: map,
        shadow: shadow,
        icon: image,
       shape: shape,
        title: entity[0],
        zIndex: entity[3],
    });
     infoWindow = new google.maps.InfoWindow({
         content: entity[4]
    });
 }
      google.maps.event.addListener(marker, "click", function () {

     if (currentInfoWindow) {
         currentInfoWindow.close();
     }
     infoWindow.open(gmap, marker);
     currentInfoWindow = infoWindow;
  });

 }

</script>
 </head>
<body onload="initialize()">

 <div id="map_canvas" style="width: 800px; height: 500px;"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:03:42.797

你的代码应该是这样的：

（仅使用现有代码的相关部分）

[**现场演示**](http://jsfiddle.net/UtebK/1/)

代码：

```
var centr = new google.maps.LatLng(48.1670845, 16.3465254);
var locations = [
    ['AU', -37.850565, 144.980289, 4, "'<p>'233'</p>'"],
    ['AS', 48.1670845, 16.3465254, 5, "'<p>'233'</p>'"],
    ['BE', 50.8826906, 4.4570261, 3, "'<p>'233'</p>'"],
    ['BR', -23.5004937, -46.8482093, 2, "'<p>'233'</p>'"],
    ['CZ', 50.0878114, 14.4204598, 1, "'<p>'233'</p>'"],
    ['DM', 55.6710507, 12.4401635, 6, "'<p>'233'</p>'"],
    ['FI', 60.2101064, 24.8251788, 7, "'<p>'233'</p>'"],
    ['FR', 48.8744779, 2.1668675, 8, "'<p>'233'</p>'"],
    ['GE', 51.19423, 6.70568, 9, "'<p>'233'</p>'"],
    ['GR', 38.0433281, 23.797971, 10, "'<p>'233'</p>'"]
];

var map;
var infowindow; //global declaration for single instance of infowindow
function init() {
    var mapOptions = {
        zoom: 3,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: centr
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);
    infowindow = new google.maps.InfoWindow();
    drop();
}

function drop() {
    for (var i = 0; i < locations.length; i++) {
        var entity = locations[i];
        var myLatLng = new google.maps.LatLng(entity[1], entity[2]);
        var mark = new google.maps.Marker({
            position: myLatLng,
            map: map,
        });
    iWindow(mark, entity[4]);
   }
}

function iWindow(marker, title) {
    google.maps.event.addListener(marker, 'click', function () {

        infowindow.setContent(title);
        infowindow.open(map, marker);
    });
}
window.onload = init; 
```

# java - Android/Java 中的多重继承

> ID：14745819
> 
> 赞同：-2
> 
> 时间：2013-02-07T07:26:33.227
> 
> 标签：java, android

我需要将我的 Android`Activity`与`SQLite`数据库连接。

现在的问题是`Class`for `Activity`will `extend`(inherit) `Activity`Class 和 for Database 我需要继承 ( `extend`) `SQLiteOpenHelper`，即需要同时扩展这两个类。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:34:01.833

创建一个单独的扩展对象`SQLiteOpenHelper`。然后，您的活动可以将任何调用委托给该对象。但是，根本没有充分的理由`Activity`来处理这些电话。他们应该只是去帮助对象。

# javascript - javascript从表单打开模态窗口

> ID：14745823
> 
> 赞同：0
> 
> 时间：2013-02-07T07:26:42.113
> 
> 标签：javascript, jquery, html

所以，我对 Javascript 和 Jquery 非常陌生，并且在我的腿上得到了这个可怕的旧网店。它的基本结构是一个表单和两个按钮，每个按钮更新“action”属性然后提交表单，像这样..

```
<form id="orderform" name="order" action="javascript:inspect()" method="post">
    ...
    <input type="button" id="btnOrder" value="Order" name="btnOrder">
    <input type="submit" id="btnInspect" value="Inspect" name="submitButtonInspect">
    ...
</form> 
```

使用一些微弱的 jquery，我将每个按钮设置为“单击”以调用执行一些前期工作的函数，然后提交表单。我的问题是如何让“检查”按钮在对话框而不是窗口中显示返回的 html？

```
function inspect() {
    $("#orderform").attr("target", "_blank");
    $("#orderform").attr("action", "/order/inspectorder.p");
    $("#orderform").submit();
}; 
```

一些快速的谷歌搜索给了我这个提示，但我无法管理如何让这个谜题发挥作用。我需要将表单提交给inspectorder.p 服务器代码，谁会返回正确的html，但是如何让那个进入模态对话框？

```
$("#dialog").load('myfunction.p', function() {
$(this).dialog({
    modal: true,
    autoOpen: true, 
    closeOnEscape: true,
    height: 200
}); 
```

非常欢迎任何建议，我很喜欢网络和 javascript :( 问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:32:16.220

由于您已经在使用 jquery，您可以使用 ajax 方法进行表单提交，例如

```
 $.ajax ({
    type: 'POST' ,
    url : '/order/inspectorder.p' , 
    data : $("#orderform").serialize() ,
    success : function (data){
        alert (data) ; // this is the returned data
     }, 
    error : function (jqXhr, status, errorthrown){
        alert(errorthrown); // if an error ocurs 
     }
   }) 
```

您可以成功处理返回的结果。如果您使用的是 jquery 1.8+，那么回调是不同的，但它仍然有效。试试这个。

# c++ - unsigned char 在函数调用中自动提升为int，为什么？

> ID：14745825
> 
> 赞同：13
> 
> 时间：2013-02-07T07:26:48.760
> 
> 标签：c++

为什么调用函数时会`unsigned char`自动提升为an ？`int`在下面的示例中，有一个`f(int)`和一个`f(char)`函数。编译器会强制 a和调用的`unsigned char`参数似乎更合乎逻辑，因为它们具有相同的位数。它正在调用，即使这意味着将参数提升为具有更多位的类型。任何指向规则定义位置的指针？标准还是编译器/平台特定？`char``f(char)``f(int)`

```
#include <iostream>

void f( int key )
{
    std::cout << __PRETTY_FUNCTION__ << std::endl;
}

void f( char key )
{
    std::cout << __PRETTY_FUNCTION__ << std::endl;
}

int main( int argc, char* argv[] )
{
    int a = 'a';
    char b = 'b';
    unsigned char c = 'c';

    f(a);
    f(b);
    f(c);

    return 0;
} 
```

产生这个输出：

```
void f(int)
void f(char)
void f(int) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T07:31:38.870

因为`unsigned char`不能用 来表示`char`。例如，如果它们都是 8 位，并且您的 unsigned char 包含 value `255`，则会溢出`signed char`- 并且有符号整数溢出会调用未定义的行为。无论如何，通常期望可打印的字符存储在`char`而不是`unsigned char`（并且C字符串的类型是`char[]`而不是`unsigned char[]`等）

因此，`int`必须提升 to 来表示大于 的值`1 << (CHAR_BIT - 1)`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T07:59:43.790

我相信该标准的正确推导基于以下段落，该段落位于第 13.3.3 节*最佳可行函数*，即它是函数重载解析（非常复杂）规则的一部分。

> (§13.3.3.2/4) 标准转换序列按其等级排序：精确匹配是比提升更好的转换，这是比转换更好的转换。除非以下规则之一适用，否则具有相同等级的两个转换序列是无法区分的：[...]

转换`unsigned char`为`int`被归类为*提升*（在 §4.5 中定义；阅读以下内容时，请注意它`(unsigned) char`是*整数类型*）：

> §4.5 整体促销
> [...]
> 
> (§4.5/2) 整数类型的纯右值，而不是 bool、char16_t、char32_t 或 wchar_t，其整数转换等级 (4.13) 小于 int 的等级，如果 int 可以表示所有，则可以将其转换为 int 类型的纯右值源类型的值；否则，可以将源纯右值转换为 unsigned int 类型的纯右值。

而转换`unsigned char`为`char`不属于*晋升*，因为它们的等级相同：

> (§4.13/1) [...] char 的等级应等于signed char 和unsigned char 的等级。[...]

相反，它被归类为*积分转换*（第 4.7 节），并且如上所述，在重载解决期间，提升优于转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T08:49:31.040

在 C++ 标准中，`char`未定义为无符号或有符号（尽管大小为 1 字节），因此它是定义的实现。所以在你的实现中，我相信它是签名的字符，这就是它被提升的原因。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T07:36:54.703

int 和 char 在 C 和 C++ 中的范围不同，如果是 char，它的范围是 0 到 255，如果是 int，它的范围是 65535（int 的范围会因操作系统而异）。所以编译器只是把它当作int。

# sql - 为什么要从子查询中得到结果？

> ID：14745826
> 
> 赞同：0
> 
> 时间：2013-02-07T07:26:54.830
> 
> 标签：sql, subquery

我总是与 sql 子查询作斗争。例如[这个问题](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column?rq=1)的答案：

```
select userid,
       my_date,
       ...
from
(
select userid,
      my_Date,
      ...
      max(my_date) over (partition by userid) max_my_date
from   users
)
my_date = max_my_date 
```

为什么不能只是：

```
select userid,
       my_Date,
       ...
       max(my_date) over (partition by userid) max_my_date
from  users
where 
my_date = max_my_date 
```

我知道这是不正确的，但毕竟第一次选择只是从第二次选择的结果中选择了一些东西，加上`my_date = max_my_date`. 在什么样的情况下我应该考虑使用这种子查询（除了正常的in、exist等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:38:06.550

因为该`WHERE`子句（逻辑上）*在* `SELECT`.

处理顺序为：

> 1.  从
> 2.  上
> 3.  外
> 4.  在哪里
> 5.  通过...分组
> 6.  立方体 | 卷起
> 7.  拥有
> 8.  选择
> 9.  清楚的
> 10.  订购方式
> 11.  最佳

[（从这里](http://blog.sqlauthority.com/2009/04/06/sql-server-logical-query-processing-phases-order-of-statement-execution/)偷来的）

如您所见，`SELECT`实际上发生在流程的后期，在任何可能的过滤和分组活动发生之后。因此，如果您想在`SELECT`子句中使用表达式的结果，最好是`SELECT`作为子查询（或（早期）CTE）一部分的 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:32:29.373

max() 是 SQl 中的一个 GROUP 函数，这就是在第二个查询中没有得到正确答案的原因。

在第一个查询中，它首先检索最大值，然后比较表中的最大值。

# c# - longlistselector 中的半网格/动态列对象

> ID：14745828
> 
> 赞同：1
> 
> 时间：2013-02-07T07:27:01.163
> 
> 标签：c#, xaml, windows-phone-8, windows-phone, silverlight-5.0

我正在尝试制作一个看起来像这样的 longlistselector（不同颜色的不同类型的对象）：

![...](../Images/8a1c9312de4002ac31545c7ad22eaa41.png)

然而问题是我的所有对象都像蓝色对象一样堆叠（红色和绿色对象也放置在同一行）。我只希望蓝色对象做到这一点。其余的对象应该有自己的行。有没有办法做到这一点？

我一直在看 WrapPanel，但这似乎在 WP8 中不起作用

我的代码：

```
<phone:LongListSelector LayoutMode="Grid" IsGroupingEnabled="False" GridCellSize="200,60" Width="Auto" Height="600" ItemsSource="{Binding Items}" x:Name="ListBoxMatchHistory">
  <phone:LongListSelector.ItemTemplate>
    <DataTemplate>
      <datatemplate:ListboxTemplateSelector Content="{Binding}">
        <datatemplate:ListboxTemplateSelector.Player>
          <DataTemplate>
            <toolkit:WrapPanel HorizontalAlignment="Left" Orientation="Vertical" ItemWidth="250" ItemHeight="60">
              <StackPanel Orientation="Horizontal" Width="250" Height="40">
                <Image Source="{Binding Path=Hero.Image}" Stretch="None"/>
                <TextBlock Text="{Binding account_id}" VerticalAlignment="Center"/>
              </StackPanel>
            </toolkit:WrapPanel>
          </DataTemplate>
        </datatemplate:ListboxTemplateSelector.Player>
        <datatemplate:ListboxTemplateSelector.ResultShort>
          <DataTemplate>
            <TextBlock Text="{Binding status}" Width="400"/>
          </DataTemplate>
        </datatemplate:ListboxTemplateSelector.ResultShort>
        <datatemplate:ListboxTemplateSelector.MatchDetailsShort>
          <DataTemplate>
            <toolkit:WrapPanel HorizontalAlignment="Left" Orientation="Vertical" ItemWidth="400" ItemHeight="30">
              <StackPanel Orientation="Horizontal" Width="400">
                <TextBlock Text="{Binding MatchId}"/>
                <TextBlock Text="{Binding LobbyType}"/>
              </StackPanel>
            </toolkit:WrapPanel>
          </DataTemplate>
        </datatemplate:ListboxTemplateSelector.MatchDetailsShort>
      </datatemplate:ListboxTemplateSelector>
    </DataTemplate>
  </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T21:52:55.357

回答了类似的问题，但对于 WP7 仍应适用，如此处所示 = [如何在 LongListSelector 中显示多个列？](https://stackoverflow.com/questions/16407430/how-do-i-show-multiple-columns-in-a-longlistselector/16407856#16407856)

# ruby-on-rails - 如何在 Ruby on Rails 中读取/格式化 *.txt 文件

> ID：14745829
> 
> 赞同：1
> 
> 时间：2013-02-07T07:27:02.780
> 
> 标签：ruby-on-rails, ruby

我工作的地方有一个程序，可以将过期的工具报告打印到`.txt`文档中，我基本上想创建一个 Rails 应用程序来让我的生活更轻松，它会将数据解析为上传的表格，并通过电子邮件发送给正确的人在文件中。是否有关于如何在 Rails 中执行此操作的好读物，或者有人可以快速了解一下吗？我没有看到任何关于我尝试谷歌搜索的内容（如何在 Ruby on Rails 中从 .txt 文件上传和格式化数据）。

谢谢。

编辑：与其说是如何上传它，不如说是如何以我需要的方式阅读和格式化它。

编辑：txt文件中的数据看起来像

supervisorname/id 下面列出了所有员工，显示他们当前过期的工具，例如

foob​​ar bazquux 锤子

# wordpress - 需要 .HTACCESS 代码来解码 %3Fand %3D

> ID：14745834
> 
> 赞同：0
> 
> 时间：2013-02-07T07:27:12.003
> 
> 标签：.htaccess, wordpress, apache, .htaccess

我已经为 wordpress 安装了“custom-permalinks”插件

它运行良好，但我对`%3F`( `?`) 和`%3D`( `=`)有疑问

而不是这个： `?file=kop444.php`作为url（444代表任何其他数字）它使它`%3Ffile%3Dkop444.php`

我知道[.htaccess](/questions/tagged/.htaccess "显示标记为“.htaccess”的问题")可以提供帮助 - 但我还没有找到报告正在运行的代码

这是我的 .htaccess 文件的内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
# END WordPress 
```

# android - 自定义操作栏 sherlock

> ID：14745836
> 
> 赞同：0
> 
> 时间：2013-02-07T07:27:13.013
> 
> 标签：android

我已经使用如下所示的自定义样式实现了动作条 sherlock

```
 <resources>
  <style name="MyTheme" parent="Theme.Sherlock">
  <item name= "actionBarStyle">@style/ActionStyle</item>
  <item name="actionBarTabTextStyle">@style/MyTabTextStyle</item>
  <item name="android:actionBarTabTextStyle">@style/MyTabTextStyle</item>
  </style>
  <style name= "ActionStyle" parent="Widget.Sherlock.ActionBar">
   <item name="android:background">#ff000000</item>
   <item name="background">#ff000000</item>
  </style>
 <style name="MyTabTextStyle" parent="Widget.Sherlock.ActionBar.TabText" >
 <item name="android:textColor">#0EBFE9</item>
 <item name = "android:showDividers">none</item>
<item name ="android:textStyle">bold</item>
<item name = "android:divider">#000000</item>

</style>
</resources> 
```

即使将背景设置为黑色，操作栏也会在操作栏和导航选项卡之间显示蓝色分隔线。我已将显示分隔符指定为无，但导航包含选项卡之间的分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:14:33.977

You need to Inherit the Parent Theme **TabBar**, not **TabText**:

```
Widget.Sherlock.ActionBar.TabBar 
```

This way:

```
<style name="Theme.mActionBarTabBar" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:showDividers">none</item>
</style> 
```

# sql - 如何用逗号分隔列值

> ID：14745843
> 
> 赞同：1
> 
> 时间：2013-02-07T07:27:27.813
> 
> 标签：sql, sql-server

我从表中有表`Grouping`Groupid(PK)、Sensorid(FK) `Sensor`。并且`Sensor`表具有 Unitsid 作为外键引用。所以我使用这个查询从三个表中获取所有列：

```
 Select * from Grouping
  left join Sensors on Grouping.SensorID = Sensors.SensorID
  left joinUnits on Grouping.UnitsID = Units.UnitsID 
```

输出：

```
Group  Unit    Sensor
G1  U1  S1
G1  U2  S2
G1  U1  S4
G1  U1  S3
G1  U2  S5
G2  U1  S7 
```

我的问题是我想要这样的输出：

```
G1  U1  S1,S3,S4
G1  U2  S2,S5
G2  U1  S7 
```

如何从“分组”表中获取此输出？

```
WITH CTE
AS
(
   Select * fromGrouping
  left join Sensors on Grouping.SensorID = Sensors.SensorID
  left join Units onGrouping.UnitsID = Units.UnitsID 
)
SELECT 
  t1."Group",
  t1.Unit ,
  STUFF((
    SELECT ', ' + t2.Sensor  
    FROM Grouping  t2
    WHERE t2."Group" = t1."Group"
      AND t2.Unit = t1.Unit
    FOR XML PATH (''))
  ,1,2,'') AS Sensors
FROM Grouping  t1
GROUP BY t1."Group", t1.Unit; 
```

这不起作用，因为分组表只有sensorId和unitsId，因此会引发无效列错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:34:47.290

在 SQL Server 中，没有内置的方法来执行此操作，但是，您可以使用[**`FOR XML`**](http://msdn.microsoft.com/en-us/library/ms178107%28v=sql.100%29.aspx)来执行此操作：

```
WITH CTE
AS
(
  -- Put your query here
)
SELECT 
  t1."Group",
  t1.Unit ,
  STUFF((
    SELECT ', ' + t2.Sensor  
    FROM CTE t2
    WHERE t2."Group" = t1."Group"
      AND t2.Unit = t1.Unit
    FOR XML PATH (''))
  ,1,2,'') AS Sensors
FROM CTE t1
GROUP BY t1."Group", 
         t1.Unit; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/c01bc1/2)

这会给你：

```
| GROUP | UNIT |    SENSORS |
-----------------------------
|    G1 |   U1 | S1, S4, S3 |
|    G1 |   U2 |     S2, S5 |
|    G2 |   U1 |         S7 | 
```

# unicode - 解决方案中的所有项目都应该具有相同的字符编码吗？

> ID：14745848
> 
> 赞同：2
> 
> 时间：2013-02-07T07:28:02.497
> 
> 标签：unicode, multibyte

对于包含十个左右项目的大型解决方案，所有项目都应该具有相同的字符集（unicode）吗？

项目具有不同字符编码的可能后果是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:05:42.653

许多奇怪的事情都是可能的——但我认为你对此不感兴趣。我相信所有项目都应该使用相同的编码来减少错误的数量。此编码应为 UTF-8，以便与世界其他地方兼容。

关于该主题的最佳操作信息来源是[http://utf8everywhere.org](http://utf8everywhere.org)。

# android - Android MapView：找不到连接工厂客户端

> ID：14745850
> 
> 赞同：1
> 
> 时间：2013-02-07T07:28:14.623
> 
> 标签：android, google-maps, android-mapview, mapactivity

据我所知，这个问题在这里讨论了很多次，但是当我尝试时，我仍然遇到了同样的问题，并且都尝试了我在这里和谷歌看到的东西，但这个问题仍然没有解决。

另外，我尝试了很多站点的示例代码，也有同样的问题。（在`MapActivity`派生类上，我可以看到`grid`但地图没有加载，同时抛出上述异常）

我尝试了我自己`API key`的以及示例代码中已经存在的键。并且，还尝试在设备中保持位置选项启用和禁用两者。

请给我你的帮助。

下面使用了一个清单文件...

**

```
<permission
      android:name="com.Example.appl.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>

<uses-permission android:name="com.Example.appl.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

   <uses-library android:name="com.google.android.maps" />

    <activity
        android:name="com.Example.appl.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MHomeActivity"></activity>

</application> 
```

**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:35:50.167

最后，在搞砸了两天之后，我仍然得到了解决方案，如果有人最好请更新我。

我做了什么，在查看了这么多线程和链接之后，我知道上面的代码/清单没有任何问题，所以我深入研究了 Google Map API 密钥，下面的解决方案看我的方式......（请注意，我我正在通过 mac 进行开发）。

首先我打开我的终端，在那里我访问了 Java 文件夹和它的 bin 文件夹，然后在命令下键入以下内容：-

```
***keytool -list -alias androiddebugkey -keystore \User\.android\debug.keystore -storepass android -keypass android*** 
```

请注意，在上面的命令“\User.android\debug.keystore”中，这是保存你的 android 调试密钥的路径，如果你想在 eclipse 中找到那个路径（可能在你的系统上不同），请使用下列的：

```
**eclipse->window->preferences->Android->Build** 
```

因此，当您运行上述命令时，您会找到 MD5 密钥，然后您需要访问以下链接：-

[https://developers.google.com/maps/documentation/android/v1/maps-api-signup](https://developers.google.com/maps/documentation/android/v1/maps-api-signup)

在这里，您将在下面给出上面获得的 MD5 密钥，它会为您生成 api 密钥进行调试。然后在所需的 xml 或编码中提供此 api 密钥（取决于您如何编码）。

但此规定适用于 v1。如果有人找到 v2 的方法，请更新此线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:36:58.047

阅读并浏览了很多使用 API v2 的答案，即使您是为 Android 2.2 开发的

### 获取签名 SHA1

```
keytool -list -alias androiddebugkey -keystore ~/.android/debug.keystore -storepass android -keypass android 
```

得到类似 (SHA1): 82:73:C3:82:73:C3:82:73:C3:82:73:C3:82:73:C3:82:73:C3

### 获取 API_KEY

转到“服务”中的“ [Google Api 控制台](https://code.google.com/apis/console/)`Google Maps Api v2`”，稍后在“Api 访问”部分单击“创建新的 Android 密钥”或“更新”（如果有），放入对话框

```
82:73:C3:82:73:C3:82:73:C3:82:73:C3:82:73:C3:82:73:C3;COM.PACKAGE.NAME 
```

### 添加库

添加`google-play-services`到您的项目中，转到`Project properties -> Android`“库”部分中单击添加并浏览到`sdk-android>/extras/google/google_play_services/libproject/google-play-services_lib`。

检查`android-support-v4.jar`项目依赖项中的库。

### 编辑您的代码

```
<!--AndroidManifest.xml-->
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-feature android:glEsVersion="0x00020000" android:required="true"/>
<permission android:name="COM.PACKAGE.NAME.permission.MAPS_RECEIVE"></permission>
<uses-permission android:name="COM.PACKAGE.NAME.permission.MAPS_RECEIVE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<!--inside <application> tag-->
<meta-data android:value="API_KEY" android:name="com.google.android.maps.v2.API_KEY"/> 
```

在您的活动课程中，您的需求从`android.support.v4.app.FragmentActivity`

```
//MainActivity.java

package COM.PACKAGE.NAME;    

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

最后你需要改变你的`activity_main.xml`

```
<!--./res/layout/activity_main.xml-->
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:19:57.843

我搜索了您的问题我有解决方案，并在下面给出请参考这些...

[无法在 logcat 中获取连接工厂客户端](https://stackoverflow.com/questions/12555174/couldnt-get-connection-factory-client-in-logcat)

[无法获取连接工厂客户端](https://stackoverflow.com/questions/2199403/couldnt-get-connection-factory-client)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:51:13.790

检查您是否在 Application 标签内的 android-manifest 文件中添加了地图库。

```
<uses-library android:name="com.google.android.maps" /> 
```

# c# - 如何发送带有 PDF 文件的邮件

> ID：14745852
> 
> 赞同：2
> 
> 时间：2013-02-07T07:28:22.660
> 
> 标签：c#, asp.net, email, attachment

我想用 C# 发送一个带有邮件的 pdf 文件。我知道如何发送邮件，但我不知道如何发送带有 pdf 文件的邮件:(

例如，我在文件夹 C:\test.pdf 中有一个 pdf 文件

这是我的代码：

```
private void SendEmail(string pdfpath,string firstname, string lastname, string title, string company, string mailfrom,string mailto) 
{
    try
    {
        MailMessage m = new MailMessage();
        System.Net.Mail.SmtpClient sc = new System.Net.Mail.SmtpClient();

        m.From = new System.Net.Mail.MailAddress(mailfrom);
        m.To.Add(mailto);

        m.Subject = "Company Gastzugang (" + lastname + ", " + firstname + ")";

        // what I must do for sending a pdf with this email 

        m.Body = "Gastzugangdaten sind im Anhang enthalten";

        sc.Host = SMTPSERVER; // here is the smt path

        sc.Send(m);
    }
    catch (Exception ex)
    {
        error.Visible = true;
        lblErrorMessage.Text = "Folgender Fehler ist aufgetreten: " + ex.Message;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T07:33:12.037

你可以这样做：

```
var filename = @"c:\test.pdf";
m.Attachments.Add(new Attachment(filename)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:30:02.160

您需要将其添加为附件。

检查有关此的 MSDN 文档 - [http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T07:34:53.570

```
System.Net.Mail.Attachment attachment;
attachment = new System.Net.Mail.Attachment("filename");
m.Attachments.Add(attachment); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:38:17.180

这是我的整个代码：

```
 public void SendMail()
{
    MailMessage msg = new MailMessage();
    msg.From = new MailAddress("contact@yourwebsite.com");
    string s = txtEmail.Text;
    msg.To.Add(txtEmail.Text);
    msg.Body = "<html><body><img src='~/images/back.png'/><br></body></html>";
    msg.IsBodyHtml = true;
    msg.BodyEncoding = System.Text.Encoding.GetEncoding("utf-8");
    Attachment at = new Attachment(Server.MapPath("~/Main/images/English.pdf"));
    //Dim at1 As New Attachment(Server.MapPath("~/Main/images/English.pdf"))
    msg.Attachments.Add(at);
    //msg.Attachments.Add(at1)
    msg.Priority = MailPriority.High;
    msg.Subject = "Special Gift";
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "smtp.gmail.com";
    smtp.EnableSsl = true;
    smtp.Credentials = new System.Net.NetworkCredential("yourgmail@gmail.com", "gmailpassword");
    smtp.Send(msg);
} 
```

# lua - 如何在 Awesome wm ver 3.5 的任务列表中只有应用程序图标？

> ID：14745860
> 
> 赞同：4
> 
> 时间：2013-02-07T07:28:55.020
> 
> 标签：lua, awesome-wm

在 Awesome <3.5 我是这样做的：

```
mytasklist[s] = awful.widget.tasklist(function(c)
  local task = { awful.widget.tasklist.label.currenttags(c, s) }
  return '', task[2], task[3], task[4]
end, mytasklist.buttons) 
```

但是在 3.5 中不再像在 3.5 中那样工作了，所以没有这样的功能-whole.widget.tasklist.label.currenttags() 和新功能 awesome.widget.tasklist.filter.currenttags() 只返回 true 或 false 所以它不是真正的替代品。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-25T11:31:36.970

您的意思是通过将代码放在 rc.lua 文件中的问题中来删除图标？

从 v3.5.1 开始，可以通过添加来删除任务列表图标

```
theme.tasklist_disable_icon = true 
```

到你的 theme.lua。

文档：[https ://awesomewm.org/doc/api/classes/awful.widget.tasklist.html#beautiful.tasklist_disable_icon](https://awesomewm.org/doc/api/classes/awful.widget.tasklist.html#beautiful.tasklist_disable_icon)

# java - 为什么 setImageResource 方法不起作用？

> ID：14745864
> 
> 赞同：25
> 
> 时间：2013-02-07T07:29:13.723
> 
> 标签：java, android, android-image

这是第一个画布：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:background="@drawable/background_linen" >

  <ScrollView
          android:id="@+id/scrollView1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

    <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

      <TableRow
              android:id="@+id/TableRow01"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/TextView03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" "
                android:textAppearance="?android:attr/textAppearanceLarge" />
      </TableRow>

      <TableRow
              android:id="@+id/tableRow1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <ImageView
                android:id="@+id/img1"
                android:layout_width="wrap_content"
                android:layout_height="150dp"
                android:src="@drawable/girbaud1front" />

      </TableRow>

      <TableRow
              android:id="@+id/tableRow2"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" "
                android:textAppearance="?android:attr/textAppearanceLarge" />
      </TableRow>

      <TableRow
              android:id="@+id/tableRow3"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <ImageView
                android:id="@+id/img2"
                android:layout_width="320dp"
                android:layout_height="150dp"
                android:src="@drawable/girbaud4front" />

      </TableRow>

      <TableRow
              android:id="@+id/tableRow4"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" "
                android:textAppearance="?android:attr/textAppearanceLarge" />
      </TableRow>

      <TableRow
              android:id="@+id/tableRow5"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <ImageView
                android:id="@+id/img3"
                android:layout_width="320dp"
                android:layout_height="150dp"
                android:src="@drawable/girbaud2front" />

      </TableRow>

      <TableRow
              android:id="@+id/TableRow6"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/TextView02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" "
                android:textAppearance="?android:attr/textAppearanceLarge" />
      </TableRow>

      <TableRow
              android:id="@+id/TableRow7"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <ImageView
                android:id="@+id/img4"
                android:layout_width="320dp"
                android:layout_height="150dp"
                android:src="@drawable/girbaud3front" />

      </TableRow>

      <TableRow
              android:id="@+id/TableRow02"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/TextView04"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" "
                android:textAppearance="?android:attr/textAppearanceLarge" />
      </TableRow>

    </TableLayout>
  </ScrollView>

</RelativeLayout> 
```

将发生图像更改的第二个画布是此文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/Layout01"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

  <ImageView
          android:id="@+id/ImageView01"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentBottom="true"
          android:layout_alignParentLeft="true"
          android:layout_alignParentRight="true"
          android:layout_alignParentTop="true"
          android:layout_marginBottom="10dp"
          android:layout_marginTop="10dp"
          android:layout_marginRight="10dp"
          android:layout_marginLeft="10dp"
          android:scaleType="fitXY"
          android:src="@drawable/girbaud1front" />

  <TextView
          android:id="@+id/txt1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentBottom="true"
          android:layout_alignParentLeft="true"
          android:layout_marginBottom="62dp"
          android:layout_marginLeft="48dp"
          android:textAppearance="?android:attr/textAppearanceLarge"
          android:textColor="#000000" />

</RelativeLayout> 
```

Java 文件：

```
package com.example.flip3d;

import android.app.Activity;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.widget.Toast;

public class Cards extends Activity {

  ImageView img1;
  ImageView img2;
  ImageView image;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cards);

    img1 =(ImageView) findViewById(R.id.img1);
    img2 =(ImageView) findViewById(R.id.img2);
    image =(ImageView) findViewById(R.id.ImageView01);

    img1.setOnClickListener(new View.OnClickListener() {

      public void onClick(View arg0) {

        image.setImageResource(R.drawable.myfirstimage);
        Intent startyou = new Intent("com.example.flip3d.FLIP3D");
        startActivity(startyou);
      }
    });

    img2.setOnClickListener(new View.OnClickListener() {

      public void onClick(View view) {
        image.setImageResource(R.drawable.may2ndimage);

        Toast.makeText(Cards.this, "Card Selected", Toast.LENGTH_SHORT).show();

        Intent startyou = new Intent("com.example.flip3d.FLIP3D");
        startActivity(startyou);
      }
    });

  }

} 
```

[我的 logcat 消息。](http://i820.photobucket.com/albums/zz130/lestah23/untitled-1_zps33fa9be5.png)

当我在手机上运行此代码时。发生错误，当我检查 logcat 时它说：我在`setImageResource();`.

我该怎么办？我是Android编程的初学者。

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T07:36:27.643

更新@

`Simon Schubert` [答案](https://stackoverflow.com/a/14745966/646806)看起来正确。

否则，您也可以通过访问资源中的 getDrawable 方法来完成。

```
Resources resources = getResources();
image.setImageDrawable(resources.getDrawable(R.drawable.myfirstimage)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-19T17:44:04.370

`getResources().getDrawable`已弃用。

你可以试试**`ContextCompat.getDrawable`**：

`image.setImageDrawable(ContextCompat.getDrawable(context, R.drawable.myimage));`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T07:35:47.070

1.  好的，我看到了您的 logcat 图像捕获。做得好。

2.  检查您的`R.layout.cards`.

    ```
    img1 = (ImageView) findViewById(R.id.img1);
    img2 = (ImageView) findViewById(R.id.img2);
    image = (ImageView) findViewById(R.id.ImageView01); 
    ```

您的一张图片似乎无法访问。第 55 行到底是什么？

3.  您的代码应该可以工作。我猜你的 R 中有一个不好的参考。清理你的项目并重新创建你的 R。

日食：`Project`→`Clean`

安卓工作室：`Build`→`Clean Project`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-07T07:35:22.040

您也可以致电**`setImageDrawable`**：

```
image.setImageDrawable(getResources().getDrawable(R.drawable.myfirstimage)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-27T22:32:22.683

我和你有同样的问题。实际上我发现我所有的图像都放在 /res/drawable 中。我有一些非常大的图片，所以我不得不将它们移动到 /res/drawable-hdpi 或 xhdpi。另一个技巧是缩小它们。我希望这会对某人有所帮助。干杯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T07:31:20.027

试试这个，

```
int id = getResources().getIdentifier("yourpackagename:drawable/" + StringGenerated, null, null); 
```

这将返回您想要访问的可绘制对象的 id...然后您可以通过执行以下操作在 imageview 中设置图像

```
imageview.setImageResource(id); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-05T07:08:47.337

试试这个代码：

```
Resources resources = getResources();
image.setImageDrawable(resources.getDrawable(R.drawable.myfirstimage)); 
```

第一行将解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-06T05:33:49.313

试试这个单行：

```
img.setImageDrawable(ResourcesCompat.getDrawable(getResources(),R.drawable.theResId, null)); 
```

# android - 解析由管道分隔的文本文件

> ID：14745868
> 
> 赞同：0
> 
> 时间：2013-02-07T07:29:39.693
> 
> 标签：android

我是android开发的新手，只需要知道是否有任何方法可以解析由管道分隔的文本文件？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:40:36.490

只需将文件读入字符串并使用管道或任何其他分隔符拆分字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:02:11.957

我认为您想读取文本文件的内容并希望基于管道将字符串中的整个数据分开？如果我是对的，下面的代码会有所帮助：

```
public class FileReader {
      private String fileType;
      FileReader (String targetFilePath){
        File file = new File(targetFilePath);
        if (!file.exists()) {
            Log.e("",targetFilePath + " does not exist.");
        } else if (!(file.isFile() && file.canRead())) {
            Log.e("",file.getName() + " cannot be read from.");
        } else {
            try {
                fileInputStream = new FileInputStream(file);
                fileBufferedInputStream = new BufferedInputStream(fileInputStream);
                //Use FileBufferedInputStream just for supporting mark()/reset() while reading 
                // reading file extension ex. java or xml or txt
                this.fileType = targetFilePath.substring(
                        targetFilePath.lastIndexOf('.') + 1,
                        targetFilePath.length());

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                Log.e("",""+e.printStackTrace());
            }
        }
      }

/*
This method will return a arraylist of Strings which are seperated by '|' in given  txt file 
and null otherwise like if file was not text,blank.etc
*/
    public ArrayList<String> read(){ 
        if(fileType.equalsIgnoreCase("txt")){
        char currentChar;
        ArrayList<String> myStringsList ;
        while (fileBufferedInputStream.available() > 0) {
               StringBuilder stringBuilder = new StringBuilder();
               while ((currentChar = (char) fileBufferedInputStream.read()) == '|') {
                   stringBuilder.append(current);
               }
               if(null == myStringsList){
                 myStringsList = new ArrayList<String>();
               }  
               myStrings.add(stringBuilder.toString());
        }    
        }
        fileBufferedInputStream.close();
        return myStringsList ;
}

 } 
```

现在调用上面的代码如下：

```
FileReader fileReader = new FileReader("Path to your text file");
ArrayList<String> stringsSeperatedByPipeDelimeters = fileReader.read(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T08:12:45.980

你也可以这样做：

```
private String[] getPipedChunks(String targetFilePath){
           File file = new File(targetFilePath);
           try {
                    fileInputStream = new FileInputStream(file);
           }
           } catch (FileNotFoundException e) {
                  // TODO Auto-generated catch block
                  Log.e("",""+e.printStackTrace());
           }
           StringBuilder sb;
           while(fileInputStream.available() > 0) {

       if(null== sb)  sb = new StringBuilder();

            sb.append((char)fileInputStream.read());
       }
       String stringArray [];
       if(null!=sb){
            stringArray = sb.toString.split('|');
            // This is your String Array.

       }
       try {
          fileInputStream.close();
       }
       catch(Exception e){
           // TODO Auto-generated catch block
           Log.e("",""+e.printStackTrace());
       }
           return stringArray;
} 
```

# opencart - Opencart：维护模式变量

> ID：14745869
> 
> 赞同：0
> 
> 时间：2013-02-07T07:29:46.807
> 
> 标签：opencart

当我将 opencart 设置为维护模式时，出现以下错误：

```
Fatal error: Call to a member function getLayout() on a non-object in
../catalog/controller/common/header.php on line 195 
```

第 195 行的代码是：

```
 $layout_id = $this->model_design_layout->getLayout($route); 
```

我想在站点位于时忽略此行`maintenance mode`，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:43:54.663

添加行

```
$this->load->model('design/layout'); 
```

在给出错误的人`catalog/controller/common/header.php`应该更正这一点之前。如果没有，请尝试重新上传`/catalog/model/design/layout.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:20:45.863

最可能的问题是您的一个或多个库文件因上传而损坏。从本地文件夹重新上传您的`system/library/`文件夹。您的配置文件看起来不错，并且错误未引用配置问题。

还有你用的是什么版本。你有 vQMod 吗？服务器是什么 PHP 版本？据我所知，我认为您的线路已被替换。我的 OpenCart 没有这条线。我用的是最新版本`1.5.5.1`

# java - 在java中读取属性文件

> ID：14745871
> 
> 赞同：-3
> 
> 时间：2013-02-07T07:29:51.417
> 
> 标签：java

我有一个属性文件，我想在我的 java 程序中读取它。代码是

```
Properties prop = new Properties();
File file =new  File("sendmails.properties");
String absolutePath = file.getAbsolutePath();

FileReader reader = new FileReader(file) ; 
prop.load(reader); 
```

*   文件未找到异常显示。
*   两个文件都在同一个目录

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:17:19.880

```
package readFile;
import java.util.Enumeration;
import java.util.ResourceBundle;
public class ReadPropFile 
{
    public static void main(String[] args) 
    {
        ResourceBundle bundle = ResourceBundle.getBundle("MyProp");
        //System.out.println(bundle.toString());
        String email = bundle.getString("email");
        String password = bundle.getString("password");
        System.out.println("Email :: "+email);
        System.out.println("Password :: "+password);
        // Fetch all the Properties.
        Enumeration keys = bundle.getKeys();
        while(keys.hasMoreElements()){
        System.out.println(keys.nextElement());
        }
    }
} 
```

MyProp.properties 应该在 src 文件夹中

MyProp.properties 电子邮件 = 侯赛因密码 = 侯赛因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T19:31:35.870

我所做的是：

```
 Properties props = new PropertiesBean(configPath);
    /* where 
    configPath = this.getClass().getName();
    */ 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:32:46.233

```
File file = new File("sendmails.properties");
                   ^^^^^ 
```

放置正确的文件路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:36:02.933

我想问题是你的工作目录。

您可以使用以下命令检查工作目录：

```
String workingDir = System.getProperty("user.dir");
System.out.println("Current working directory : " + workingDir); 
```

并检查该文件夹下是否存在该文件（我猜不...）

两种解决方案：

1.  使用绝对路径，因为您可以从文件系统中获取

    文件 file =new File("d:/sendmails.properties");

2.  检查当前工作目录的相对路径。如果您需要向上移动 4 个文件夹，请使用：

    文件文件 =new File("../../../../sendmails.properties");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T07:36:09.227

创建文件时，要么使用绝对路径，要么在类路径中包含属性并使用类加载器加载它们：

```
prop.load(classLoader.getResourceAsStream("sendmails.properties")) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T08:51:08.723

属性文件应该在您的类路径中。将属性文件所在的目录添加到您的服务器/系统类路径中，您的问题将得到解决。

# javascript - 一种在 KineticJS 中向样条曲线添加点的方法？

> ID：14745872
> 
> 赞同：1
> 
> 时间：2013-02-07T07:29:55.747
> 
> 标签：javascript, kineticjs, spline

有没有办法在 KineticJS 中向现有样条线添加点？现在，我必须`destroy()`在添加点时调用样条并创建一个全新的样条。我希望有更好的方法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T14:16:53.607

您可以在行尾添加。

```
line.attrs.points.push({x:100, y:20})
layer.draw() 
```

如果要在行的中间添加，则需要使用函数来重建点。即按x点排序

---- 样条曲线（已编辑）--

```
spline.attrs.points.push({x:10,y:10})
spline.setPoints(spline.attrs.points); 
layer.draw(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:38:03.173

刚刚`setPoints`从`Line`类中找到了`Spline`可以使用的方法。这样效果更好，我不必破坏样条线并重新创建它。如果有人有更好的答案，那就太好了。我希望有一个隐藏的`add(point)`方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:21:06.097

你可以做

```
 spline.setPoints(spline.getPoints().push({x:10,y:10})); 
```

或创建一个快速函数：

```
 function addPoint(spline, point){
      spline.setPoints(spline.getPoints().push(point); 
 } 
```

# backbone.js - 如何在多个项目中使用一组通用的 require.config 值

> ID：14745879
> 
> 赞同：0
> 
> 时间：2013-02-07T07:30:08.337
> 
> 标签：backbone.js, requirejs

有没有办法可以为依赖于公共项目的不同项目的 require.config 提供一些公共值？通用项目基本上包含项目可能使用的所有 3rd 方库和自定义小部件。

例如。我有 3 个项目 Proj1、Proj2、Proj3。他们使用的通用模块称为“shell”。而且我有一组 require.config 路径和它们三个都使用的一些路由器配置代码。

```
require.config({
    baseUrl:'parentFolder/',
    paths:{
        /*  Third party libs  */
        jquery:'shell/lib/jquery/jquery-1.7.1',
        json2: 'shell/lib/json/json2',
        underscore:'shell/lib/underscore/underscore',
        backbone:'shell/lib/backbone/backbone',
        handlebars:'shell/lib/handlebars/handlebars',

        /* Routers */
        externalRouter:'shell/common/util/externalRouter',

        /* My custom widgets */          
        datePicker:'shell/common/widget/datePicker',
        treeView:'shell/common/widget/TreeView',
        videoPlayer:'shell/common/widget/VideoPlayer',
   }
}); 
```

我想在一个位置维护上述配置代码，并希望 3 个项目在他们自己的 require.config 中使用它，并能够添加新的配置参数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:06:40.803

这可以通过多种方式实现，但最简单的可能是利用 RequireJS 允许您将配置对象定义为在加载`require`之前调用的全局变量这一事实`require.js`，并在启动时自动应用这些值。

因此，将您的通用配置放在一个普通的 javascript 源文件中，如下所示：

```
//common-config.js
require = {
    baseUrl:'parentFolder/',
    paths:{
        jquery:'shell/lib/jquery/jquery-1.7.1',
    }
}; 
```

并将其包含在require.js**之前的页面中：**

```
<script src="common-config.js"></script>
<script src="require.js" data-main="main"></script> 
```

`require.config`然后，您可以像往常一样使用特定于应用程序的配置再次调用主模块。请注意，如果您定义该`baseUrl`选项，则`main`模块将相对于该基本 URL 被引用，因此您必须`data-main`相应地调整属性。

此功能的文档在[此处](http://www.requirejs.org/docs/api.html#config)。

# iphone - 如何在解析后获取xml文件的元素并在iPhone程序中对其进行验证

> ID：14745882
> 
> 赞同：1
> 
> 时间：2013-02-07T07:30:21.803
> 
> 标签：iphone, ios, ios6

我已经成功地从远程 Web 服务器解析了 XML 文件。我的 XML 包含几个带有图像链接的元素。我想在不同的 UIImageView 上分配图像，因为我尝试了以下方式，但由于获取元素的所有图像而失败。因此，我无法为特定的 UIImageView 分配特定的图像。任何人都可以建议我如何做到这一点，

**我的XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<Products>
  <Main id="0">
   <name>Main</name>
   <mainimage id="1">http://sample.com/images/first.png</mainimage>
   <mainimage id="2">http://sample.com/images/second.png</mainimage>
  </Main>
  <Category id="1">
   <name>category1</name>
   <categoryimage id="1">http://sample.com/images/img1.png</categoryimage>
  </Category>
  <Category id="2">
   <name>category2</name>
   <categoryimage id="2">http://sample.com/images/img2.png</categoryimage>
   <subcategoryimage id="1">http://sample.com/images/img5.png</subcategoryimage>
   <subcategoryimage id="2">http://sample.com/images/img4.png</subcategoryimage>
  </Category>
</Products> 
```

**XML 解析**

```
- (BOOL)loadXMLByURL:(NSURL *)url
  {
     self.parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
     self.parser.delegate = self;
     return [self.parser parse];
  }

- (void)parserDidStartDocument:(NSXMLParser *)parser
  {
    self.products = [[NSMutableArray alloc] init];
  }
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
  if([elementName isEqualToString:@"mainimage"]){
     self.currentProduct = [[EGSProduct alloc] init];
     self.currentProduct.imageIdentifier = attributeDict[@"id"];
  }
if ([elementName isEqualToString:@"Category"]){
     self.currentProduct = [[EGSProduct alloc] init];
     self.currentProduct.imageIdentifier = attributeDict[@"id"];
  }
else if ([elementName isEqualToString:@"subcategoryimage"]){
     self.currentSubProduct = [[EGSProduct alloc] init];
     self.currentSubProduct.imageIdentifier = attributeDict[@"id"];
     if (self.currentProduct.subProducts == nil){
         self.currentProduct.subProducts = [NSMutableArray array];
     }
     self.currentSubProduct.imageIdentifier = attributeDict[@"id"];
     self.currentElementContent = [[NSMutableString alloc] init];
  }
else if ([elementName isEqualToString:@"name"] || [elementName isEqualToString:@"categoryimage"]){
     self.currentElementContent = [[NSMutableString alloc] init];
  }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
   if ([elementName isEqualToString:@"mainimage"]){
       self.currentProduct.name = self.currentElementContent;
       self.currentElementContent = nil;
   }
if ([elementName isEqualToString:@"name"]){
    self.currentProduct.name = self.currentElementContent;
    self.currentElementContent = nil;
   }
else if ([elementName isEqualToString:@"categoryimage"]){
self.currentProduct.imageUrlString = [self.currentElementContent stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
self.currentElementContent = nil;
}
else if ([elementName isEqualToString:@"subcategoryimage"]){
    self.currentSubProduct.imageUrlString = self.currentElementContent;
    self.currentElementContent = nil;
    [self.currentProduct.subProducts addObject:self.currentSubProduct];
    self.currentSubProduct = nil;
}
else if ([elementName isEqualToString:@"Category"]){
    [self.products addObject:self.currentProduct];
    self.currentProduct = nil;
 }
} 
```

在视图控制器中，当我厌倦了获取`Main`元素的图像时，我只得到`Category`了 XML 的元素。

**视图控制器**

```
[super viewDidLoad];
 NSURL *url = [NSURL URLWithString:@"http://www.sample.com/Category.xml"];
 EGSParser *parser = [[EGSParser alloc] init];
 if ([parser loadXMLByURL:url])
    self.xmlProductsResults = parser.products;
    EGSProduct *prod = (EGSProduct *)[self.xmlProductsResults objectAtIndex:0];
    NSData *mydata = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:prod.imageUrlString]];
    self.firstImage.image = [UIImage imageWithData:mydata];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:14:30.720

我认为您无法获得特定图像视图的特定图像。我认为您正在尝试分别获取 MainImage、CategoryImage 和 SubCategoryImage ..并尝试相应地使用它们。您可以在字典中重新格式化您的数据，如下所示

{ "mainimage":["image1","image2"], "categoryimage":["image1","image2"], "subcategoryimage":["image1","image2"] }

您可以通过为您的 3 个类别使用 3 MutableArray 来实现上述目标。并按要求存储数据，如下所示

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
  if([elementName isEqualToString:@"Products"]){
     mainImages=[[NSMutableArray alloc] init];
     catImages=[[NSMutableArray alloc] init];
     subCatImages=[[NSMutableArray alloc] init];
  }

} 
```

然后在迪登

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

   if ([elementName isEqualToString:@"mainimage"]){
       [mainImages addObject:self.currentElementContent];

   }else if ([elementName isEqualToString:@"categoryimage"]){
       [catImages addObject:self.currentElementContent];

   }else if ([elementName isEqualToString:@"subcategoryimage"]){
       [subCatImages addObject:self.currentElementContent];

   }

   self.currentElementContent = nil;
 } 
```

我认为这是您想要的。如果想使用更多信息，您可以使用字典或类对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:22:18.347

`self.currentProduct.imageUrlString`当您遇到`mainimage`didEndElement中的元素时，您必须为其赋值，即

```
if([elementName isEqualToString:@"mainimage"])
{   self.currentProduct.imageUrlString=self.currentElementContent;;

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:27:17.773

对于这种情况，我更喜欢更简单的 XML Parser 看看这个 [http://vuknikolic.wordpress.com/2012/04/27/super-easy-ios-xml-parsing/](http://vuknikolic.wordpress.com/2012/04/27/super-easy-ios-xml-parsing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:59:04.623

@Ravindra 给了你正确的答案，你需要以数组或其他方式管理你的数据。此 `self.currentProduct.name = self.currentElementContent;` 行也替换您的主要图像数据。所以最好使用字典结构

# python - Flask-Restless 无法构造查询

> ID：14745883
> 
> 赞同：3
> 
> 时间：2013-02-07T07:30:22.833
> 
> 标签：python, flask-restless

我最近使用 Flask-Restless 创建 API。

当我尝试查询 API 时，我在 Web 浏览器 (firefox) 上收到“无法构造查询”错误消息。这是查询：

```
http://localhost:5000/api/product?q={ "filters" : [ { "name": "name", "op": "eq", "value": "mercy" } ] } 
```

这是产品类：

```
class Product(db.Model):
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    name = db.Column(db.String(80))
    details = db.Column(MutableDict.as_mutable(HSTORE))

    def __init__(self, name, details):
        self.name = name
        self.details = details

    def __repr__(self):
        return self.name 
```

此错误仅在我使用查询时发生。访问只能`http://localhost:5000/api/product`正常工作。

问题是什么？

我试图省略 HSTORE 字段，但仍然出错。所以，我认为 HSTORE 不是嫌疑人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:55:38.143

尝试`val`代替`value`

[参考](https://flask-restless.readthedocs.org/en/latest/searchformat.html#query-format)

# json - 从 JSON 文件创建动态 ActionScript 对象

> ID：14745884
> 
> 赞同：0
> 
> 时间：2013-02-07T07:30:31.883
> 
> 标签：json, actionscript-3

我一直在尝试解决这个棘手的问题，但无法找到一个好的方法。

所以我有一个 JSON 字符串：

```
{
   "fruit_color":{
     "apple":"",
     "banana":"",
     "orange":""
   }
} 
```

我想处理这个 JSON 以从中获取一个代表该类的对象：

```
class FruitColor
{
    private var apple: String;
    private var banana: String;
    private var orange: String;

    public function FruitColor(apple: String, banana: String, orange: String)
    {
         this.apple=apple;
         this.banana=banana;
         this.orange=orange;
    }
} 
```

这可能吗？如果我使用 JSON 字符串并尝试从中创建代码会更好吗？

我需要这样做的原因是我需要使用特定的 JSON 来创建 ActionScript、Java、Objective C 中的类结构，从而以这些语言创建库。因此，我正在寻找可以一次性指定所有详细信息的东西，因此我不必单独监视所有单独的库代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:28:10.983

可能[Apache Thrift](http://thrift.apache.org/)会有用。它有自己的 *.thrift 格式来描述数据结构，并且默认支持很多语言，甚至更多的社区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T08:18:17.723

嗯，这是可能的，但是 JSON 解析器不会返回 FruitColor 的实例，而是返回一个 Object。因此，使用这个 JSON 字符串，您将收到一个带有 Object 类型的“fruit_color”字段的对象，该字段又将具有三个 String 类型的字段。说，这个“fruit_color”实际上决定了完整的 FruitColor 实例，在这种情况下你可以这样做：

```
class FruitColor {
...
public function loadFrom(ob:Object):void {
     this.apple=ob.apple;
     this.banana=ob.banana;
     this.orange=ob.orange;
}
...
} 
```

并调用它，创建一个新的 FruitColor 实例，然后在`loadFrom()`. 或者，创建一个类似的静态函数，该函数将返回一个现成的 FruitColor 对象，如下所示：

```
public static function loadFrom(ob:Object):FruitColor {
     var fc:FruitColor=new FruitColor();
     fc.apple=ob.apple;
     fc.banana=ob.banana;
     fc.orange=ob.orange;
     return fc;
} 
```

编辑：鉴于您想要一个 JSON 对象模板中的 *.as 文件，想要一个能够提供必要值的构造函数，您需要一种类似于以下的方法：

```
public function makeClassFromObject(ob:Object):String {
    var header:String;
    var footer:String="}\n}";
    var cr:String=""; // constructor header
    var props:String="";
    var crbody:String="";
    for (var k:String in ob) {
        var the_ob=ob[k];
        if (the_ob is Object) {
            header="package { public class "+k+"{\n";
            cr="public function "+k+"(";
            for (k in the_ob) {
                var v:*=the_ob[k];
                var tt:String="Object"; // the type
                if (v is String) tt="String"; else
                if (v is int) tt="Number"; else 
                if (v is Number) tt="Number"; else 
                if (v is Array) tt="Array";
                props+="private var "+k+": "+tt+";\n";
                if (cr.charAt(cr.length-1)!='(') cr+=',';
                cr+=k+":"+tt;
                crbody+="this."+k+"="+k+";\n";
            }
            cr+="){\n";
            crbody+="}";
        } else {
            throw new Error("A nested Object is required!");
        }
        break; // we need ONE field in ob
    }
    return header+props+cr+crbody+footer;
 } 
```

# csv - 如何使用 d3.js 和 .csv 绘制（每日、每周、每月、每年）天气图

> ID：14745890
> 
> 赞同：2
> 
> 时间：2013-02-07T07:30:54.373
> 
> 标签：csv, charts, d3.js, weather

早上好！

我正在寻找一种使用 d3.js 可视化来自气象站的数据的方法。我每天、每周、每月和每年收集 .csv 文件，如下所示：

```
01.01.2013,00:00,8.4,84,0.0,19.8,168,9,7.2
01.01.2013,00:30,7.8,89,0.9,18.1,156,9,7.3
01.01.2013,01:00,7.8,90,1.8,21.6,139,9,7.5
01.01.2013,01:30,8.0,90,2.4,18.3,126,9,7.6
01.01.2013,02:00,8.0,89,3.0,22.0,167,9,7.4
[...] 
```

现在我正在使用 pChart 创建图表，但它需要永远加载每月甚至每周报告。

我想要这样的图表：

[*klick* -> 图片：每周图表](http://i.stack.imgur.com/6Wsjc.png)

但我现在真的被困住了，无法以正确的方式加载 .csv。

我已经看过[Multi-Series Line Chart](http://bl.ocks.org/3884955)，改变了

```
d3.tsv("data.tsv", function(error, data) { 
```

至

```
d3.csv.parseRows("data.tsv", function(error, data) { 
```

因为我的 .csv 文件中没有标题

你能帮我在这里吗？

非常感谢！

# lucene - Lucene .NET 3.0.3 中的 ChainedFilter 类在哪里？

> ID：14745898
> 
> 赞同：5
> 
> 时间：2013-02-07T07:31:44.767
> 
> 标签：lucene, lucene.net

它在版本 2.9.4的*Lucene.Net.Analyzers.dll中。*但是我在 3.0.3 版中找不到这个类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:39:16.380

Mindas：这是我的评论，因为我无法添加普通评论：如何访问这个 ChainedFilter 类？我已经下载了这个包，但是没有像 Lucene.Net.Contrib 这样的命名空间，或者没有其他命名空间可以让我访问 ChainedFilter 类。这似乎很愚蠢，但我被困住了！

更新：来自 Nuget 的二进制文件以及在 Lucene.net 的 apache 站点上上传的 zip 文件中存在一个错误。我下载了源代码并注意到 ChainedFilter.cs 类存在于 Apache-Lucene.Net-3.0.3-RC2.src\src\contrib\Analyzers\Filters 文件夹中，但令人惊讶的是，这个文件夹不是 Contrib 的一部分.Analyzers 项目。这就是生成的二进制文件中缺少它的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:57:37.563

改写[这个答案](https://stackoverflow.com/questions/4957666/where-has-lucene-net-highlight-gone)，您可以自己构建它或使用 Nuget 获取二进制文件。

[http://nuget.org/packages/Lucene.Net.Contrib/](http://nuget.org/packages/Lucene.Net.Contrib/)

`ChainedFilter`应该在 contrib/misc 下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:57:06.267

看起来它位于 Lucene 3.x的**org.apache.lucene.misc.ChainedFilter中。**

# jquery - 使用fancybox时选择输入重复

> ID：14745899
> 
> 赞同：1
> 
> 时间：2013-02-07T07:31:49.360
> 
> 标签：jquery, fancybox

我正在使用这样的fancybox加载内容

```
$.fancybox($('#myDiv').html());

<div id="myDiv" style="display: none;">
    <select id="mySelect">
        <option>Abc</option>
        <option>Cde</option>
    </select>
</div> 
```

在 js 中，当 fancybox 显示内容时，我得到了 4 个选项，为什么？

```
$('#mySelect option').size() => 4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:13:48.773

因为`$('#myDiv').html()`正在克隆`select`元素，`#myDiv`所以你有两个隐藏`select`元素和两个在幻想框内。

而不是这个：

```
$.fancybox($('#myDiv').html()); 
```

...我宁愿这样做：

```
$.fancybox('#myDiv'); 
```

见**[JSFIDDLE](http://jsfiddle.net/aT7Ee/)**

# java - 多线程和共享对象

> ID：14745903
> 
> 赞同：0
> 
> 时间：2013-02-07T07:32:09.917
> 
> 标签：java, multithreading, jakarta-ee, shared-memory

如果我有这样的课程：

```
class MultiThreadEg {

private Member member;

public Integer aMethod() {
    ..............
    ..............
}

public String aThread() {
    ...............
    member.memberMethod(.....);
    Payment py = member.payment();
    py.processPayment();
    ...........................
}

} 
```

假设**aThread()**是一个新线程，那么，太多线程同时访问共享**成员对象会不会出现问题（访问规则如下）？**

```
Rule 1 : ONLY reading, no writing to the object(member).
Rule 2 : For all the objects that need some manipulation(writing/modification), a copy of the original object will be created. 
```

例如：在**payment()**方法中，我这样做：

```
public class Member {

private Payment memPay;

public payment() {
   Payment py = new Payment(this.memPay);//Class's Object copy constructor will be called.
   return py;
}

} 
```

我担心的是，即使我为“写入”创建对象副本（例如在方法**payment()**中），同时通过太多线程访问**成员对象也会导致一些差异。**

事实是什么？这种实现在每种情况下都可靠吗（0 个或多个并发访问）？请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:55:51.123

您可以简单地使用[**ReentrantReadWriteLock**](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html "可重入读写锁")。这样，您可以同时读取多个线程，而不会出现问题，但只允许一个线程修改数据。Java 为您处理并发。

```
 ReadWriteLock rwl = new ReentrantReadWriteLock();
 Lock readLock = rwl.readLock;
 Lock writeLock = rwl.writeLock;

 public void read() {

    rwl.readLock.lock();
    try {
       // Read as much as you want.
    } finally {
       rwl.readlock.unlock();
    }
 }

 public void writeSomething() {
    rwl.writeLock.lock();
    try {
       // Modify anything you want
    } finally {
       rwl.writeLock.unlock();
    }
 } 
```

请注意，您应该在 try 块开始之前*lock()*，以确保在开始之前就已经获得了锁。并且，将*unlock()*放在*finally*子句中可以保证，无论 try 中发生什么（提前*返回、*抛出异常等），锁都会被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:38:09.180

如果对 memPay 的更新取决于 memPay 内容（如 memPay.amount+=100），您应该在更新时阻止其他线程的访问。这看起来像：

```
mutual exclusion block start
get copy
update copy
publish copy
mutual exclusion block end 
```

否则，当两个线程同时开始更新 memPay 对象时，可能会丢失更新。

# maven - Jenkins 无法解决依赖关系

> ID：14745904
> 
> 赞同：4
> 
> 时间：2013-02-07T07:32:11.163
> 
> 标签：maven, jenkins

jenkins 1.500 版有问题。我正在尝试构建一个依赖于我的另一个项目的项目。错误是：

> `[ERROR] Failed to execute goal on project projectname: Could not resolve dependencies for project projectname:jar:1.0.0: Failure to find reference-project:jar:1.0.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1]`

如果我通过控制台和 Maven 构建这个项目，整个项目构建成功。我检查了存储库中的依赖 jar 文件，它位于正确的位置。

Maven 有自己的存储库还是我错过了什么？

但是在 Jenkins 系统设置下，我选择了“Default(~/.m2/repository)”，并没有在项目设置中勾选“使用自己的存储库”复选框。有任何想法吗？

**更新** 我为 jenkins 中的依赖项创建了一个额外的工作，并调用了 Maven 目标安装，然后一切正常。在此步骤之前，我通过 Console 和 mvn install 安装了依赖项。为什么有区别？（我尝试了删除并重新安装给定的解决方案，但这没有帮助）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T08:40:40.397

*简单的解决方案从~/.m2/repository*中删除代表您所写工件的文件夹。*~/.m2/repository/${groupId}/...*并重建。如果您在下载工件等过程中遇到问题，有时会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T20:13:00.477

我也有类似的问题，并尝试删除 ~/.m2/repository/ 中的文件夹，现在仍然将依赖项从远程存储库位置下载到本地

# usb - 从机如何在睡眠模式下的 USB BUS 期间唤醒主机

> ID：14745906
> 
> 赞同：0
> 
> 时间：2013-02-07T07:32:17.577
> 
> 标签：usb

如果有可能，HOST和slave都处于睡眠状态，但是USB物理连接是永久的（USB总线也处于睡眠状态），那么slave可以通过USB总线唤醒HOST吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T19:44:35.833

USB 总线上有唤醒信号。主机可以暂停总线；设备可以对某些外部事件做出反应，发送远程唤醒并激活主机。

例如，没有连接设备的 USB 集线器将在枚举后立即被操作系统挂起。但是，当设备连接到集线器时，它将发送唤醒以让主机激活总线并枚举设备。

# javascript - jQuery 源代码中的 returnTrue 和 returnFalse 函数

> ID：14745912
> 
> 赞同：12
> 
> 时间：2013-02-07T07:32:34.957
> 
> 标签：javascript, jquery

我不禁注意到jQuery的源代码中有两个看似无用的函数（对于v1.9.1，它是第2702行和第2706行）：

```
function returnTrue() {
    return true;
}

function returnFalse() {
    return false;
} 
```

这两者在 jQuery 中经常被调用。他们为什么不简单地将函数调用替换为布尔值`true`或是否有原因`false`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T07:40:08.477

如果对象属性、函数参数等需要 a`function`你应该提供 a`function`而不是 a `boolean`。

例如在原生 JavaScript 中：

```
var a = document.createElement("a");
a.href = "http://www.google.com/";
/*
 * see https://developer.mozilla.org/en-US/docs/DOM/element.onclick
 * element.onclick = functionRef;
 * where functionRef is a function - often a name of a function declared 
 * elsewhere or a function expression.
 */
a.onclick = true;                        // wrong
a.onclick = returnTrue;                  // correct
a.onclick = function() { return true; }; // correct 
```

另外，写作：

```
someProperty: returnTrue, 
```

比写更方便：

```
someProperty: function(){
    return true;
}, 
```

特别是因为它们*经常被调用*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T07:44:01.050

它是这样使用的：

```
stopImmediatePropagation: function() {
    this.isImmediatePropagationStopped = returnTrue;
    this.stopPropagation();
} 
```

这`isImmediatePropagationStopped`是一个查询**方法**。像这样使用`event.isImmediatePropagationStopped()`

当然，你可以定义一个实例方法，比如：

```
event.prototyoe.isImmediatePropagationStopped = function() { return this._isImmediatePropagationStopped };

stopImmediatePropagation: function() {
    this._isImmediatePropagationStopped = true; //or false at other place.
    this.stopPropagation();
} 
```

但是您必须引入一个新的实例属性`_isImmediatePropagationStopped`来存储状态。

通过这个技巧，您可以在此处切断一堆用于保持真/假状态的实例属性，例如`_isImmediatePropagationStopped`等`_isDefaultPrevented`。

因此，在我看来，这只是代码风格的问题，没有对错之分。

PS：事件的查询方法，如`isDefaultPrevented`，，在DOM事件级别3 sepc中定义`isPropagationStopped`。`isImmediatePropagationStopped`

规格：[http ://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-Event-isImmediatePropagationStopped](http://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-Event-isImmediatePropagationStopped)

# php - PHP - 如何从对象中检索值

> ID：14745919
> 
> 赞同：0
> 
> 时间：2013-02-07T07:33:01.777
> 
> 标签：php, arrays, object

我一直在努力解决这个问题，包括在这里查看问题（例如这个问题：[Read var_dump data with PHP](https://stackoverflow.com/questions/9220158/read-var-dump-data-with-php)），但我就是不明白。

我正在尝试检索以下值：

```
COM_USERS_REGISTRATION_SAVE_FAILED 
```

并将其存储为变量。这是我试图从中检索它的绝对混乱（我不明白）（这是文本的最后一行）：

```
object(UsersModelRegistration)#98 (9)
    { ["data:protected"]=> object(stdClass)#106 (1) { 
        ["groups"]=> array(1) {
            [0]=> string(1) "2" } }         
    ["_forms:protected"]=> array(0) { }
    ["__state_set:protected"]=> NULL
    ["_db:protected"]=> object(JDatabaseMySQL)#15 (19) {
        ["name"]=> string(5) "mysql"
        ["nameQuote:protected"]=> string(1) "`"
        ["nullDate:protected"]=> string(19) "0000-00-00 00:00:00"
        ["dbMinimum:protected"]=> string(5) "5.0.4"
        ["_database:private"]=> string(15) "table_joomla"
        ["connection:protected"]=> resource(29) of type (mysql link)
        ["count:protected"]=> int(0)
        ["cursor:protected"]=> resource(83) of type (Unknown)
        ["debug:protected"]=> bool(false)
        ["limit:protected"]=> int(0)
        ["log:protected"]=> array(0) { }
        ["offset:protected"]=> int(0)
        ["sql:protected"]=> object(JDatabaseQueryMySQL)#126 (18) {
            ["db:protected"]=> *RECURSION*
            ["type:protected"]=> string(6) "select"
            ["element:protected"]=> NULL
            ["select:protected"]=> object(JDatabaseQueryElement)#127 (3) {
                ["name:protected"]=> string(6) "SELECT"
                ["elements:protected"]=> array(1) {[0]=> string(4) "`id`" }
                ["glue:protected"]=> string(1) "," }
            ["delete:protected"]=> NULL
            ["update:protected"]=> NULL
            ["insert:protected"]=> NULL
            ["from:protected"]=> object(JDatabaseQueryElement)#128 (3) {
                ["name:protected"]=> string(4) "FROM"
                ["elements:protected"]=> array(1) {
                    [0]=> string(10) "`#__users`" }
            ["glue:protected"]=> string(1) "," }
            ["join:protected"]=> NULL
            ["set:protected"]=> NULL
            ["where:protected"]=> object(JDatabaseQueryElement)#129 (3) {
                ["name:protected"]=> string(5) "WHERE"
                ["elements:protected"]=> array(2) {
                    [0]=> string(31) "`username` = 'test123@mail.com'"
                    [1]=> string(9) "`id` != 0" }
            ["glue:protected"]=> string(5) " AND " }
            ["group:protected"]=> NULL ["having:protected"]=> NULL
            ["columns:protected"]=> NULL ["values:protected"]=> NULL
            ["order:protected"]=> NULL ["union:protected"]=> NULL
        ["autoIncrementField:protected"]=> NULL }
        ["tablePrefix:protected"]=> string(6) "s7kou_"
        ["utf:protected"]=> bool(true)
        ["errorNum:protected"]=> int(0)
        ["errorMsg:protected"]=> string(0) ""
        ["hasQuoted:protected"]=> bool(false)
    ["quoted:protected"]=> array(0) { } }
    ["name:protected"]=> string(12) "registration"
    ["option:protected"]=> string(9) "com_users"
    ["state:protected"]=> object(JObject)#99 (1) {
        ["_errors:protected"]=> array(0) { } }
    ["event_clean_cache:protected"]=> string(19) "onContentCleanCache"
    ["_errors:protected"]=> array(1) {
        [0]=> string(34) "COM_USERS_REGISTRATION_SAVE_FAILED" } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:41:09.850

对象的所有属性都受到保护，要访问它们，您应该在 UsersModelRegistration 类中实现“getter”/或扩展 UsersModelRegistration 并实现 getter

```
/**
* @returns array
*/
public function getErrors(){

return $this->_errors;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:53:41.477

看看类源，很可能有一个方法可以返回这个值。有*一些*解决方案可以访问受保护的属性（[反射](http://php.net/reflection)或将对象转换为数组）**，但**我不会推荐这些，因为它们完全违反了 OOP 的封装原则。该属性[受到保护](http://php.net/manual/en/language.oop5.visibility.php)是有原因的，您应该通过`UserModelRegistration`.

# windows-7 - 使用 cygwin 为 hadoop 安装 ssh

> ID：14745923
> 
> 赞同：3
> 
> 时间：2013-02-07T07:33:19.773
> 
> 标签：windows-7, hadoop, ssh, cygwin

在我解释我遇到的问题之前，需要让你知道我对 CYGWIN 和类似的东西完全陌生。我使用 CYGWIN 安装 SSH 的目的是在 windows 7 x64 机器上设置 Hadoop。我正在尝试执行[https://gist.github.com/tariqmislam/2159173](https://gist.github.com/tariqmislam/2159173)上给出的步骤。但是我无法提供空白密码。以下是相同的日志。任何帮助将不胜感激。

$ chmod +r /etc/passwd

$ chmod u+w /etc/passwd

$ chmod +r /etc/组

$ chmod u+w /etc/组

$ chmod 755 /var

$ touch /var/log/sshd.log

$ chmod 664 /var/log/sshd.log

$ ssh-主机配置

*** 查询：覆盖现有的 /etc/ssh_config 文件？（是/否）是 ***信息：创建默认 /etc/ssh_config 文件 *** 查询：覆盖现有 /etc/sshd_config 文件？（是/否）是 ***信息：创建默认 /etc/sshd_config 文件 *** 信息：自 OpenSSH 3.3 起，权限分离默认设置为是。** **信息：但是，这需要一个名为“sshd”的非特权帐户。* ****信息：有关权限分离的更多信息，请阅读 /usr/share/doc/openssh/README.privsep。** **问：应该使用权限分离吗？（是/否）否 ** * 信息：更新 /etc/sshd_config 文件****

 ******* 查询：您想将 sshd 安装为服务吗？** **查询：（如果已作为服务安装，请说“否”）（是/否）是* ****查询：为守护进程输入CYGWIN的值：[]** **信息：在 Windows Server 2003、Windows Vista 及更高版本上，* ****信息：SYSTEM 帐户无法设置其他用户的 ID——一种能力** **信息：sshd 需要。您需要拥有或创建一个特权 ** * Info: 帐户。该脚本将帮助您做到这一点。*******

 ********* 信息：您似乎正在运行 Windows XP 64 位、Windows 2003 Server、** **信息：或以后。在这些系统上，无法使用 LocalSystem* ****信息：可以更改用户 ID 的服务帐户，而无需** **Info：显式密码（例如*通过 sshd 的无密码登录 [eg public key * * Info: authentication]）。****

 *******信息：如果您想启用该功能，则需要创建** **信息：具有特殊权限的新帐户（除非是类似帐户* ****信息：已经存在）。然后使用此帐户运行这些特殊的 *** Info: 服务器。***

 ****** 信息：请注意，创建新用户需要当前帐户 ***信息：本身具有管理员权限。

***信息：找不到特权帐户。

*** 信息：此脚本计划使用“cyg_server”。***信息：“cyg_server”只会被注册的服务使用。 *** 查询：您想使用不同的名称吗？（是/否）否 ***查询：创建新的特权用户帐户“cyg_server”？（是/否） 是 *** 信息：请输入新用户 cyg_server 的密码。请务必** **信息：此密码与您系统上给出的密码规则相匹配。* ****信息：不输入密码将退出配置。** **查询：请输入密码：* ****查询：请输入密码：** **查询：请输入密码：** * 查询：请输入密码：*******

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:46:15.493

我只能推荐在 linux 虚拟机或本机 linux 中运行 hadoop。虽然在 windows xp+cygwin 和 windows7+cygwin 上成功运行 hadoop 0.20.0，但我曾经尝试在 windows7 上设置更新版本的 hadoop，但由于 hadoop 错误而惨遭失败。由于文件权限等问题，带有安全补丁的 IIRC hadoop 甚至无法在 windows7 上运行。所以我的建议：如果可以的话，在 linux 上运行 hadoop，您将避免大量问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T05:34:01.867

我按照以下链接中的步骤操作，sshd 安装和启动服务对我来说工作正常：

[http://cloudcelebrity.wordpress.com/2012/01/16/configure-openssh-host-in-windows-using-cygwin/](http://cloudcelebrity.wordpress.com/2012/01/16/configure-openssh-host-in-windows-using-cygwin/)***********************

# html - 按钮中的垂直文本

> ID：14745924
> 
> 赞同：2
> 
> 时间：2013-02-07T07:33:21.970
> 
> 标签：html, css

所以我是新手，我正在尝试修改 Windows CE 设备上的代码以使文本在按钮中垂直显示。

我的代码是：

```
.philips_menu_button { 
BACKGROUND-IMAGE : url(dynalite/images/buttons/philips/Philips_Button_Menu.png); 
TEXT-ALIGN : center; 
WIDTH : 128px; 
HEIGHT : 32px; 
COLOR : #07529c; 
FONT-WEIGHT : 600; 
dynalite-type : button-theme; 
upImage : dynalite/images/buttons/philips/Philips_Button_Menu.png; 
downImage : dynalite/images/buttons/philips/Philips_Button_Menu_pressed.png; 
text-offsety : 0; 
text-offsetx : 0; 
} 
```

和

```
<dynalite:button style="BACKGROUND-IMAGE: none; POSITION: absolute; WIDTH: 80px; HEIGHT: 70px; FONT-SIZE: 20px; OVERFLOW: hidden; TOP: 230px; LEFT: 700px; dont_layout: true; textid: Button_0001_txt; Button_0001_txt: " id=Button_0001 class="philips_menu_button swap_page" onclick="TouchPanel.GoToPage( './Edit Presets.html')" alpha="False" ATOMICSELECTION="true" text="Edit<br>&#10;Levels">
        <IMG style="POSITION: absolute; VISIBILITY: inherit; TOP: 0px; LEFT: 0px" id=Button_0001_img src=".\dynalite\images\buttons\philips\philips_button_menu.png" width=80 height=70> 
        <IMG style="POSITION: absolute; VISIBILITY: hidden; TOP: 0px; LEFT: 0px" id=Button_0001_img_1 src=".\dynalite\images\buttons\philips\philips_button_menu_pressed.png" width=80 height=70> 
                <DIV style="Z-INDEX: 998; POSITION: absolute; OVERFLOW: visible; TOP: 50%; LEFT: 0px">
                    <DIV style="Z-INDEX: 999; POSITION: relative; WIDTH: 80px; TOP: -50%; LEFT: 0px" id=Button_0001_txt>Edit 
                        <BR>Levels 
                    </DIV>
                </DIV> 
```

基本上屏幕设计为横向，但我想将它旋转 90 度。我可以处理必须旋转按钮或文本。

提前致谢。

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:53:25.193

如果要旋转按钮，可以使用带有变换的 css 方法。

```
<input type="button" value="edit" style="transform:rotate(7deg);
-ms-transform:rotate(90deg); /* IE 9 */
-moz-transform:rotate(90deg); /* Firefox */
-webkit-transform:rotate(90deg); /* Safari and Chrome */
-o-transform:rotate(90deg); /* Opera */"/> 
```

如果您希望文本直立显示而不是旋转显示，一个选项是使用 jquery..

html部分：

```
<input type="button" value="edit" id="vert" style="width:1.5em;"> 
```

jQuery部分：

```
$(document).ready(function() {
         $('#vert').val('e\nd\ni\nt');   
        }); 
```

在这里查看.. [http://codepen.io/lukeocom/pen/mHnvl](http://codepen.io/lukeocom/pen/mHnvl)

# facebook - Facebook FQL 查询

> ID：14745928
> 
> 赞同：0
> 
> 时间：2013-02-07T07:33:42.223
> 
> 标签：facebook, facebook-graph-api

我正在尝试获取我网站中某个页面的 Facebook 分享数、链接数和评论数。我正在尝试为此使用 FQL。这是我的代码：

```
<?php   
         $query = "select comment_count, share_count, like_count from link_stat 
         where url=<my_url_of_page>";  
         //My FQL Query

         $url = "https://graph.facebook.com/fql?q=".$query;
         $fbData = file_get_contents($url);
         echo $fbData;    
?> 
```

当我在图形资源管理器中运行相同的查询时，它会给出正确的结果。当我从我的机器上调用它时，它显示为空白页。

请建议我在这里做错了什么。

- 谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:43:27.500

您需要`login as an app`先使用该`link stat`表。

按照[文档](https://developers.facebook.com/docs/howtos/login/login-as-app/)中的步骤以应用程序登录。

# javascript - 类型错误：$(...) 为空

> ID：14745933
> 
> 赞同：1
> 
> 时间：2013-02-07T07:33:51.597
> 
> 标签：javascript, salesforce, typeerror

我的要求是当我将鼠标悬停在 helpText 值上时，将在其中显示超链接，然后单击超链接 mouseout 事件。为此，我添加了一个`click`事件，然后添加了 mouseout 事件。但是出现错误。

我的代码是：

```
<script>
   jQuery.noConflict();
    function doOnclick(){
        doMouseout();
    }
    function doMouseout(){
    alert('hi');
        $('Foo').hide();
    }
</script>

 <style>
    .helpLink {
      position:relative;
    }

    .video{
      display:none;
      width:160px;
      height:120px;
      background:#EEE;
      border:1px solid #CCC;

      position:absolute;

      z-index:10;
    }
  </style>

            <apex:outputLink styleClass="helpLink" onmouseover="$('{!$Component.Foo}').style.display = 'block';">  <!-- title="help" onmouseout="$('{!$Component.Foo}').style.display = 'none';" -->
                <apex:image value="/s.gif" styleClass="helpIcon" />
            </apex:outputLink>
            <apex:outputPanel id="Foo" styleClass="video" title="help" >
               <a  href="{!taburl}" target="_blank"  onclick="doOnclick();" >link</a>
               <a href="{!tabvideo}" target="_blank">Video</a>
            </apex:outputPanel> 
```

得到错误：

> 类型错误：$(...) 为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:02:36.890

我一直习惯于`jQuery.noConflict()`返回一个不同的别名来使用，以避免与可能正在使用的其他库发生冲突`$`。绝对没有必要这样做，但我发现它有助于避免混淆。

也就是说，Salesforce 在 VF 页面上使用元素 ID 做了一些意想不到的事情（但如果您在 VF 标记中指定 ID，它至少会显示在*某处*生成的 HTML 的 ID 中），所以我建议使用选择器抓取 ID*包含*您要查找的内容的所有元素，例如`jq$("[id*='Foo']")`.

```
<apex:includeScript value="{!$Resource.jquery}" />

<script >
    jq$ = jQuery.noConflict();
    function doOnclick(){
        doMouseout();
    }
    function doMouseout(){
        alert("hi");
        jq$("[id*='Foo']").hide();
    }
</script>

<style>
    .helpLink {
        position:relative;
    }
    .video{
        display:none;
        width:160px;
        height:120px;
        background:#EEE;
        border:1px solid #CCC;
        position:absolute;
        z-index:10;
    }
</style>

<apex:outputLink styleClass="helpLink" onmouseover="$('{!$Component.Foo}').style.display = 'block';">  <!-- title="help" onmouseout="$('{!$Component.Foo}').style.display = 'none';" -->
    <apex:image value="/s.gif" styleClass="helpIcon" />
</apex:outputLink>
<apex:outputPanel id="Foo" styleClass="video" title="help" >
    <a  href="{!taburl}" target="_blank"  onclick="doOnclick();" >link</a>
    <a href="{!tabvideo}" target="_blank">Video</a>
</apex:outputPanel> 
```

# ios - 在目标 c 中使用 NSthread 在扇区中传递多个参数

> ID：14745935
> 
> 赞同：-1
> 
> 时间：2013-02-07T07:34:01.943
> 
> 标签：ios, objective-c, nsthread

我想使用 NSThread 将两个参数传递给方法。我尝试使用[这第三个答案](https://stackoverflow.com/questions/2327617/calling-selector-with-two-arguments-on-nsthread-issue)。`andKeys:` 但不幸的是，由于方法不可用，该代码无法正常运行。

```
 [NSThread detachNewThreadSelector:@selector(DownloadCheckServerPath:DirectoryName:) toTarget:self withObject:"How to pass two objects"]; 
```

那么我应该如何`-(void)DownloadCheckServerPath:(NSString *)serverPath DirectoryName:(NSString *)directoryName`通过NSThread在Sector中调用这个方法。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:39:17.387

您不能将多个参数传递给此消息发送调用的方法。解决方法：使用集合。一个论据绰绰有余。

```
- (void)reallyCallMethod:(NSDictionary *)dict
{
    [self downloadCheckServerPath:dict[@"path"] directoryName:dict[@"dir"]];
}

[NSThread detachNewThreadSelector:@selector(reallyCallMethod:)
                         toTarget:self
                       withObject:@{ @"path" : @"/foo/bar", @"dir" : @"baz" }]; 
```

另外：**不要以大写字母开头的选择器名称。**这仅适用于课程（*真的很难看，*不是吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:39:30.180

在这种情况下，我通常会创建一个 NSDictionary 并通过它。在函数中，我阅读了字典并获取了我需要的所有元素。

# web-services - Web 服务故障报告和新闻

> ID：14745938
> 
> 赞同：0
> 
> 时间：2013-02-07T07:34:08.963
> 
> 标签：web-services, bpel

我试图找到

1.  一般Web服务故障率报告；
2.  有关 Web 服务故障的一些新闻，例如（最好来自更著名的新闻来源）[http://blog.crowdflower.com/2008/07/amazons-s3-web-service-our-1-cause-of-failure/](http://blog.crowdflower.com/2008/07/amazons-s3-web-service-our-1-cause-of-failure/)

如果你知道这些，请在这里分享，谢谢。

（这是试图向我的同事强调为 Web 服务提供适当的故障处理机制的重要性）

# ruby-on-rails - 使用 remove_const 删除类定义后 Rails 动态重新加载 Class.subclasses

> ID：14745941
> 
> 赞同：0
> 
> 时间：2013-02-07T07:34:14.907
> 
> 标签：ruby-on-rails, ruby

我有一个以下片段，元编程创建了一个类的子类`Vehicle`：

```
class Vehicle; end

klazz = Class.new(Vehicle)
Object.const_set('Car', klazz) 
```

这里没有什么花哨的。正如我所料，`Vehicle.subclasses`会返回我`[Car]`的数组。

接下来，我删除了类 Car 定义：

```
Object.send(:remove_const, :Car) 
```

令我惊讶的是，`subclasses`它们不会动态重新加载，因为：

```
Vehicle.subclassess.count == 1 
```

我很想知道如何重新加载子类，或者我使用的方式`remove_const`是否错误。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:47:37.560

`subclasses`不是纯 Ruby 的一部分，`remove_const`而是。这里可能发生的是，该`subclasses`方法是通过一个在`inherited`钩子上递增的计数器实现的。但是，由于删除常量通常不是在代码库中完成的，因此可能没有相关的递减（我不相信 有一个挂钩`class_removed`，所以他们不能轻易地进行相关的递减）。

从技术上讲，您可以重写`remove_const`以使其弄清楚要减少的内容，但我认为这不值得，也不是明智之举（猴子修补核心方法总是有问题的 IMO）。

# php - PHP和Jquery中倾斜和倾斜字符的自定义验证规则

> ID：14745948
> 
> 赞同：3
> 
> 时间：2013-02-07T07:34:53.043
> 
> 标签：php, javascript, jquery

我需要对 PHP 和 Jquery 中的 tild(~) 和tild(`) 字符进行良好的验证。这是我所做的 Jquery 验证。

```
$.validator.addMethod("validSMS", function(value, element) {
    if (value.indexOf('~') === -1 || value.indexOf('`') === -1)
    {
        return true;
    }
    else
    {
        return false;
    }
}, "Tild and tilt Character is not allowed"); 
```

但是我需要另一种在 Jquery 和 PHP 中验证的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:08:08.773

这是可以用 javascript 完成的。您可以根据您的要求更改条件。

```
<script language=javascript>
  var txt='jayd~ev';

  var re1='.*?';    // Non-greedy match on filler
  var re2='(~)';    // Any Single Character 1

  var p = new RegExp(re1+re2,["i"]);
  var m = p.exec(txt);
  if (m != null)
  {
      var c1=m[1];
      document.write("("+c1.replace(/</,"&lt;")+")"+"\n");
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:22:54.537

这是php版本，使用[strpos](http://php.net/manual/es/function.strrpos.php)

```
if (strrpos($mystring, "~") === false && strrpos($mystring, "`") === false ) { 
    // $mystring has no tild(~) and tilt(`) chars
} 
```

# javascript - 将卢比金额转换为单词

> ID：14745958
> 
> 赞同：0
> 
> 时间：2013-02-07T07:35:22.870
> 
> 标签：javascript

我必须将卢比金额转换为**javascript**中的单词。这里的**ConvertToHundreds**是转换百、十和个值的函数。

```
var aUnits = ["Thousand", "Lacs", "Crore", "Arab", "Kharab" ];
var cWords; 

var nLeft = Math.floor(s);
var st = new String(nLeft);
for (var i = 0; nLeft > 0; i++) {
  if (i != 0) {
    cWords += ConvertToHundreds(nLeft) + " " + aUnits[i-1] + " " +cWords;
  } else {
    cWords = ConvertToHundreds(nLeft) + " ";
  }

  if (st.length <= 5) {
    nLeft = Math.floor(nLeft / 1000);
  } else if (st.length > 5 && st.length <= 7){
    nLeft = Math.floor(nLeft / 1000) / 100;
    //~ console.log(i);
    i++;
  } else if (st.length > 7 && st.length <= 9) {
    nLeft = Math.floor(nLeft / 1000) /10000;
    i+=2;
  } else if (st.length > 9 && st.length <= 11){
    nLeft = Math.floor(nLeft / 1000) /1000000;
    i+=3;
  } else {
    nLeft = Math.floor(nLeft / 1000) /100000000;
    i+=4;
  }
}

s = Math.round(s * 100) % 100;
var rupee = "Ruppes " + cWords;
if (s > 0)
  cWords = rupee + "and Paise " + ConvertToHundreds(s) + " Only";
else
  cWords = rupee + "Only";

return cWords; 
```

此代码不显示千值。例如：5,01,000.00 仅返回卢比 5 Lacs

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-03-13T12:43:52.923

印度金额，价格货币根据输入数字显示为单词输入：1250000000 结果：12.5 亿 输入：1250000 结果：12.50 Lac(s)

```
function price_in_words(price) {
            var sglDigit = ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"],
                dblDigit = ["Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"],
                tensPlace = ["", "Ten", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"],
                handle_tens = function(dgt, prevDgt) {
                    return 0 == dgt ? "" : " " + (1 == dgt ? dblDigit[prevDgt] : tensPlace[dgt])
                },
                handle_utlc = function(dgt, nxtDgt, denom) {
                    return (0 != dgt && 1 != nxtDgt ? " " + sglDigit[dgt] : "") + (0 != nxtDgt || dgt > 0 ? " " + denom : "")
                };

                var str = "",
                    digitIdx = 0,
                    digit = 0,
                    nxtDigit = 0,
                    words = [];
                if (price += "", isNaN(parseInt(price))) str = "";
                else if (parseInt(price) > 0 && price.length <= 10) {
                    for (digitIdx = price.length - 1; digitIdx >= 0; digitIdx--) switch (digit = price[digitIdx] - 0, nxtDigit = digitIdx > 0 ? price[digitIdx - 1] - 0 : 0, price.length - digitIdx - 1) {
                        case 0:
                            words.push(handle_utlc(digit, nxtDigit, ""));
                            break;
                        case 1:
                            words.push(handle_tens(digit, price[digitIdx + 1]));
                            break;
                        case 2:
                            words.push(0 != digit ? " " + sglDigit[digit] + " Hundred" + (0 != price[digitIdx + 1] && 0 != price[digitIdx + 2] ? " and" : "") : "");
                            break;
                        case 3:
                            words.push(handle_utlc(digit, nxtDigit, "Thousand"));
                            break;
                        case 4:
                            words.push(handle_tens(digit, price[digitIdx + 1]));
                            break;
                        case 5:
                            words.push(handle_utlc(digit, nxtDigit, "Lakh"));
                            break;
                        case 6:
                            words.push(handle_tens(digit, price[digitIdx + 1]));
                            break;
                        case 7:
                            words.push(handle_utlc(digit, nxtDigit, "Crore"));
                            break;
                        case 8:
                            words.push(handle_tens(digit, price[digitIdx + 1]));
                            break;
                        case 9:
                            words.push(0 != digit ? " " + sglDigit[digit] + " Hundred" + (0 != price[digitIdx + 1] || 0 != price[digitIdx + 2] ? " and" : " Crore") : "")
                    }
                    str = words.reverse().join("")
                } else str = "";
                return str

        }

        alert(price_in_words(1250000000));

        function price_in_num_words(price) {
            var result = "",
            priceInNum = parseFloat(price),
            priceStr = new String(price);
            if (!isNaN(priceInNum)) {
                var x = priceStr.split("."),
                intLength = x[0].length;
                result = intLength <= 3 ? priceInNum.toFixed(1) : intLength <= 5 ? (priceInNum / 1e3).toFixed(1) + " Thousand" : intLength <= 7 ? (priceInNum / 1e5).toFixed(2) + " Lac(s)" : intLength <= 9 ? (priceInNum / 1e7).toFixed(2) + " Cr(s)" : "More than One Hundred Cr(s)"
            }
            return result
          }
         alert(price_in_num_words(1250000)); 
```

# ios - SDWebImageProgressiveDownload 时应用程序崩溃

> ID：14745959
> 
> 赞同：1
> 
> 时间：2013-02-07T07:35:27.550
> 
> 标签：ios, objective-c, xcode, uitableview, sdwebimage

我正在使用 SDWebImage 库在表格视图中获取和缓存图像。但是，当我使用选项 SDWebImageProgressiveDownload 时，应用程序由于内存不足而崩溃。此外，该库下载图像的速度似乎很慢。我不认为它会缓存它们，因为每次我请求获取相同的时间来下载时。有没有人遇到过同样的问题？有解决方案吗？

# javascript - 限制特殊字符的正则表达式

> ID：14745961
> 
> 赞同：3
> 
> 时间：2013-02-07T07:35:38.453
> 
> 标签：javascript, regex

我的表单中有一个地址字段，我想限制
`* | \ " : < > [ ] { } \ ( ) '' ; @ & $`
我尝试过的

```
var nospecial=/^[^* | \ " : < > [ ] { } ` \ ( ) '' ; @ & $]+$/;
            if(address.match(nospecial)){
                alert('Special characters like * | \ " : < > [ ] { } ` \ ( ) \'\' ; @ & $ are not allowed');
                return false; 
```

但它不工作。请告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T07:38:10.397

您需要转义字符类中的右括号（以及反斜杠）。您也不需要所有空格：

```
var nospecial=/^[^*|\":<>[\]{}`\\()';@&$]+$/; 
```

我摆脱了你所有的空间；如果您还想限制空格字符，请重新添加一个空格。

**编辑**正如@fab 在评论中指出的那样，反转正则表达式的意义会更有效：

```
var specials=/[*|\":<>[\]{}`\\()';@&$]/; 
```

并测试是否存在特殊字符（而不是不存在）：

```
if (specials.test(address)) { /* bad address */ } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-02T06:42:18.560

/[$&+,:;=?[]@#|{}'<>.^*()%!-/]/

低于一个不应允许输入这些字符，它将返回空格

```
.replace(/[$&+,:;=?[\]@#|{}'<>.^*()%!-/]/,""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T17:44:19.053

使用以下功能

```
function checkSpcialChar(event){
    if(!((event.keyCode >= 65) && (event.keyCode <= 90) || (event.keyCode >= 97) && (event.keyCode <= 122) || (event.keyCode >= 48) && (event.keyCode <= 57))){
        event.returnValue = false;
        return;
    }
    event.returnValue = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-10T08:48:59.687

使用它这将解决问题

String patttern = r"[!-/:-@[-`{-~]";

RegExp regExp = RegExp(patttern);

# javascript - 如何使用 getjson 方法进行发布请求并获取响应？

> ID：14745969
> 
> 赞同：0
> 
> 时间：2013-02-07T07:36:01.757
> 
> 标签：javascript, ajax, getjson

我想将 textarea 数据发布到 php 表单并将其响应返回到另一个 textarea。你们能告诉我这是怎么做到的吗？我试过跟随但它不起作用！

```
$.post(url, dataToBeSent, function(data, textStatus) {

   url="./doit.php";
   var dataToBeSent = $("myform").serialize();

var siteContents2 = data.contents;  
document.myform2.outputtext2.value = siteContents2 ;

}, "json"); 
```

形式：

```
<form id="myform" name="myform" action="./ok1.php?Id=&title=" method="post">
<td><textarea rows="7" cols="15" name="outputtext" style="width: 99%;"></textarea></td>

</form>

<form id="myform2" name="myform2" action="./ok2.php?Id=&title=" method="post">
<td><textarea rows="7" cols="15" name="outputtext2" style="width: 99%;"></textarea></td>

</form> 
```

php 获取传递的数据 beg getjson:

```
$passed3 = $_post['dataToBeSent'];
echo $passed3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:52:33.370

您在回调函数中定义 URL 和数据。您需要在调用之前定义它们`$.post()`。您可以使用下面的代码进行尝试，这是*带有*`$.ajax()`.

### JS

```
$.ajax(
{
    type: 'POST',
    url: './doit.php',
    data: $("#myform").serialize(),
    success: function(data)
    {
        $('.result').html(data);
        $('textarea[name="outputtext2"]').val(data);
    }
}); 
```

### PHP

```
$formData = $_POST;
echo $formData['outputtext']; 
```

有关使用 jQuery 的 POST 请求的更多信息：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# java - 使用 lucene 搜索未分析的字段

> ID：14745973
> 
> 赞同：0
> 
> 时间：2013-02-07T07:36:07.660
> 
> 标签：java, lucene

我正在尝试使用 Apache Lucene 索引进行搜索。为此，我在显示路径的字段文件路径上创建了 Lucene 索引，但未对其进行分析。

现在我无法搜索未分析的字段。是否可以在未分析的字段上进行搜索。或者有什么方法可以在分析时停止拆分要存储的单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:25:01.580

您可以搜索未分析的字段查询，但只有在字段值完全等于搜索词的情况下才会匹配。正如 Mindas 所提到的 - 应该使用短语查询。

如果您想搜索该字段，则需要使用正在分析的该字段重新索引您的文档。

您可以尝试使用现有的分析器/标记器（例如，在创建 IndexWriter 时设置 StandardAnalyzer）或实现您自己的分析器/标记器，使用文件分隔符作为分隔符将文件路径拆分为标记。

如果您有兴趣，Solr 的 PathHierarchyTokenizerFactory 已经将一些分层路径拆分为标记，然后再存储到索引中，这使得文件路径搜索变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:44:34.233

> 是否可以搜索未分析的字段

为了搜索未分析的字段，您需要使用[词组查询](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/PhraseQuery.html)。

> 或者有什么方法可以在分析时停止拆分要存储的单词

对不起，我不明白这个。如果未分析字段，则不会拆分并按原样存储。你能澄清你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T16:30:41.383

Yes, you can replace standardAnalyzer by others like KeywordAnalyzer in IndexSearcher config. It will treat the field as one term for search.

# jboss7.x - Jboss AS7 - 如何为外部库创建 module.xml？

> ID：14745978
> 
> 赞同：0
> 
> 时间：2013-02-07T07:36:22.380
> 
> 标签：jboss7.x

我有多个使用多个库的 .ear 项目。所以我需要将它们设为通用并将它们添加到模块中。那么有没有什么简单的方法可以创建 module.xml，因为我需要为每个库创建 module.xml？

我还需要为 module.xml 中的每个库定义依赖项吗？

请让我知道是否有任何简单的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:00:59.647

无需为每个库创建“module.xml”。

创建一个模块并将所有库放在那里并在资源根目录中提及它。还要提及任何模块依赖项（如果没有，请忽略它）。

示例 module.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<module xmlns="urn:jboss:module:1.1" name="com.test.myownresteasy">
    <properties>
        <property name="jboss.api" value="private"/>
    </properties>

    <resources>
        <resource-root path="activation-1.1.jar"/>
        <resource-root path="httpcore-4.1.2.jar"/>
        <resource-root path="jettison-1.3.1.jar"/>
        <resource-root path="resteasy-jaxrs-2.3.2.Final.jar"/>
        <resource-root path="scannotation-1.0.3.jar"/>
        <resource-root path="httpclient-4.1.2.jar"/>
        <resource-root path="jaxrs-api-2.3.2.Final.jar"/>
        <resource-root path="jul-to-slf4j-stub-1.0.0.Final.jar"/>
        <resource-root path="resteasy-jaxb-provider-2.3.2.Final.jar"/>
        <resource-root path="resteasy-jettison-provider-2.3.2.Final.jar"/>
    </resources>

    <dependencies>
        <!-- Insert dependencies here -->
    </dependencies>
</module> 
```

将您的模块复制到“$JBOSS/modules”目录，使其成为全局模块。

参考： [如何在 JBoss 7 上使用外部 jar？](https://stackoverflow.com/questions/9662456/how-can-i-use-the-external-jars-on-jboss-7)

# embedded-linux - 覆盆子 x264 编译问题

> ID：14745986
> 
> 赞同：0
> 
> 时间：2013-02-07T07:36:57.713
> 
> 标签：embedded-linux, raspberry-pi

树莓派如下：

```
cd /my/path/where/i/keep/my/source/code
git clone git://git.videolan.org/x264
光盘 x264
./configure --host=arm-unknown-linux-gnueabi --enable-static --cross-prefix=${CCPREFIX} --prefix=/my/path/were/i/keep/built/arm/stuff
制作
进行安装
```

当我这样做时，我收到了一些消息：

> 您在 CFLAGS 中指定了 pre-ARMv6 或 Thumb-1 CPU。如果你真的想在这样的 CPU 上运行，请使用 --disable-asm 进行配置。

如何做到这一点..我将在使用 ARM 11 处理器的树莓派上使用这一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:50:12.147

> 我将在使用 ARM 11 处理器的树莓派上使用这一切

请注意，ARM 版本控制与 ARM 体系结构不同。ARM11*芯片*是第一个使用 ARMv6*架构*的芯片。

无论如何，正如[Ottavio Campana](https://stackoverflow.com/users/795910/ottavio-campana)在那条评论中所说，这条消息只是警告你你错过了一个开关。将 --disable-asm 添加到您之前使用的命令的末尾，看看会发生什么。

# java - 所有单选按钮都在一个单选组下被选中，android

> ID：14745988
> 
> 赞同：2
> 
> 时间：2013-02-07T07:37:03.487
> 
> 标签：java, android

我对android很陌生，我有一个这样的xml：

```
<RadioGroup
        android:id="@+id/cardRadioGroup"
        android:layout_width="wrap_content"
        android:layout_height="45dp" android:layout_alignParentLeft="true" android:layout_marginLeft="35dp"
        android:layout_alignTop="@+id/cardEditText">
</RadioGroup> 
```

我很想使用我的代码来扩展这个 xml，以根据我的数据模型生成尽可能多的单选按钮。

我使用的代码是（在 for 循环中）：

```
 LayoutInflater inflater = this.getLayoutInflater();
        View currentView = inflater.inflate(R.layout.card_payment_content_node,null);

        RadioGroup rg = (RadioGroup) currentView.findViewById(R.id.cardRadioGroup);
        RadioButton rb =  new RadioButton(this);
        //set radiobutton properties
        rb.setText(entry.getKey());
        rb.setId(++radioButtonIdCounter);

        rg.addView(rb);

        //add to view
        parent.addView(currentView); 
```

这按预期工作。但问题是我可以在我的设备上一次选择许多单选按钮。

我不确定为什么会这样。我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T07:42:44.117

您的所有按钮都具有相同的 ID。这就是他们行动如此一致的原因。

您只会膨胀一次布局。您必须以编程方式添加按钮，方法是识别`cardRadioGroup`然后循环输入代码，为所有按钮生成唯一 ID。

要将单选按钮添加到组，请使用[RadioGroup.addview()](http://developer.android.com/reference/android/widget/RadioGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)。

要创建单选按钮，请使用[RadioButton](http://developer.android.com/reference/android/widget/RadioButton.html)的构造函数之一，并根据需要设置更多属性。

# android - 不同混合模式的OpenGL ES性能

> ID：14745991
> 
> 赞同：2
> 
> 时间：2013-02-07T07:37:14.900
> 
> 标签：android, performance, opengl-es, opengl-es-2.0

我需要在渲染场景上应用全屏摄影般的晕影效果。显然，我必须使用混合来实现这一点。我想选择最快的混合模式，因为它将应用于所有屏幕空间。

OpenGL ES 中的某些混合模式是否比另一种更快？或者是否有任何混合模式以相同的填充率工作？到目前为止，我还没有在 Internet 上找到任何资源说某些混合模式比另一种慢或快，所以我决定在 SO 上问这个问题。

这是针对 Android 应用程序的，所以我知道这种行为当然可能取决于 GPU 供应商，但也许有一些常见的考虑因素可以加快混合速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:15:39.140

混合的一个缓慢部分是从后台缓冲区读取像素（仅 alpha 或 rgb 或两者都无关）。因此，只要它是使用颜色/alpha 的“真实”混合（即不使用类似或类似`dst`的退化混合函数） - 就没有性能差异。`glBlendFunc(GL_ONE, GL_ZERO)``glBlendFunc(GL_ZERO, GL_ONE)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:56:39.947

无论您选择哪种混合选项，它都会减慢片段着色器的速度，因为它需要从目标帧缓冲区读回像素值。您可以通过将效果拆分为围绕屏幕边界设置的一些四边形并保留帧缓冲区的中心部分而不覆盖四边形来节省一些周期。您还可以采取一些更棘手的方法来使用一些基于图块的移动 GPU（如 Mali 的 GPU）所采用的早期片段丢弃，但可能只是不值得付出努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:16:34.830

简而言之，不，可能没有明显更差的混合模式（只要您正在进行“真正的”混合）。

混合可以通过具有固定功能的混合阶段来实现，也可以通过向将执行实际混合的着色器程序添加一个短尾来实现。另一种解决方案是固定函数用于大多数常见的混合模式，而如果存在不常见的混合模式，则着色器会接管。如果您点击着色器，您的性能可能会受到影响。

知道什么是好是坏将是非常特定于硬件的 - 由于最大的成本是您需要读取和组合两个缓冲区，而不是相对较小的额外着色成本，因此甚至可能无法衡量。

# javascript - 尝试保留过滤器状态时出现类型错误 - Kendo UI Grid

> ID：14745994
> 
> 赞同：0
> 
> 时间：2013-02-07T07:37:27.473
> 
> 标签：javascript, kendo-ui, kendo-grid

我正在使用 Kendo UI 的 Grid 并尝试添加一些代码，这些代码通过 cookie 保留网格的过滤器/分组/等。它在示例中有效，但在我的代码中根本无效。

示例：[http ://www.kendoui.c​​om/code-library/web/grid/preserve-grid-state-in-a-cookie.aspx](http://www.kendoui.com/code-library/web/grid/preserve-grid-state-in-a-cookie.aspx)

我的代码：http: [//jsfiddle.net/PwajE/](http://jsfiddle.net/PwajE/)

无论出于何种原因（我确信这是一个简单的原因），我不断收到类型错误。两个小时后……我来了。

一如既往，任何帮助表示赞赏。

@RRfive

* * *

```
<script>

            var data = [{"name":"John Smith","email":"test@test.com","permission":"admin","costRate":"60","dt":"2013-02-02 10:26:29","memberID":"M0000001"},{"name":"Test Simple","email":"test@jones.com","permission":"user","costRate":"40","dt":"2013-02-02 00:00:00","memberID":"M0000002"}];     

                $(document).ready(function() {
                    $("#grid").kendoGrid({
                    dataSource: {
                        data: data,
                        //transport: {
                        //    read: "assets/data/data.users.php",
                        //},
                        schema: {
                            data: function(result) {     
                              return result.data || result;
                            },
                            total: function(result) {
                                var data = this.data(result);
                                return data ? data.length : 0;
                            },
                            model:{
                            id:"memberID",
                                fields:{
                                    dt:{ type:"date" },
                                    costRate:{ type:"number" }
                                }
                            }
                        },
                        pageSize: 10,

                    },

                    sortable: {
                        mode: "single",
                        allowUnsort: true,
                    },
                     pageable: {
                        input: true,
                        numeric: false
                    },

                    reorderable: true,
                    resizable: true,
                    filterable: {
                        extra:false, 
                        operators: {
                            string:{
                                contains: "Contains",
                            }
                        }
                    },
                    columnMenu: false,      
                    groupable: true,

                    dataBound: function(e){
                    var grid = this;
                    var dataSource = this.dataSource;

                    var state = kendo.stringify({
                        page: dataSource.page(),
                        pageSize: dataSource.pageSize(),
                        sort: dataSource.sort(),
                        group: dataSource.group(),
                        filter: dataSource.filter()
                    });

                    $.cookie("employeesState",state);
                    if($.cookie('empRows')){
                        $.each(JSON.parse($.cookie('empRows')),function(){                        
                            var item = dataSource.get(this);
                            var row = grid.tbody.find('[data-uid='+item.uid+']');
                            row.addClass('k-state-selected');
                        })
                    }
                },
                change:function(){
                    var grid = this;
                    var ids = grid.select().map(function(){
                       return grid.dataItem($(this)).Id
                    }).toArray();
                    $.cookie('empRows',JSON.stringify(ids));                    
                },

                    columns: [
                        { field: "name", title:"Name" },
                        { field: "email", title:"Email/Username" },
                        { field: "costRate", title:"Cost Rate (p/hr)", template: '#= kendo.toString(costRate, "c") #', },
                        { field: "permission", title:"Permission", template: "#= (permission == 'admin') ? 'Administrator' : 'User' #" },
                        { field: "dt", title:"Registered", template: '#= kendo.toString(dt,"d-M-yyyy") #' },
                        { field: "memberID", title:" ", width: "83px", filterable: false, sortable: false, template: '<a class="k-button k-button-icontext k-grid-edit" href="manage_admin.php?form=editMember&ID=#= kendo.toString(memberID, "n2")#"><span class=\"k-icon k-edit\"></span>Edit</a>'},
                        ]
                    });

        var state = JSON.parse($.cookie("employeesState"));
            if(state){
                if(state.filter){
                    parseFilterDates(state.filter, grid.dataSource.options.schema.model.fields);                    
                }
                grid.dataSource.query(state);
            }
            else{
                grid.dataSource.read();
            }

                });

                function parseFilterDates(filter, fields){
            if(filter.filters){
                for(var i = 0; i < filter.filters.length; i++){
                    parseFilterDates(filter.filters[i], fields);
                }
            }
            else{
                if(fields[filter.field].type == "date"){
                    filter.value = kendo.parseDate(filter.value);
                }
            }
        }
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:59:45.763

如果您调试该小提琴，您会看到以下行引发错误：

```
grid.dataSource.query(state); 
```

原因是它`grid`不是 Kendo Grid 的实例，而是`div`带有`id='grid'`. `grid`修复很简单——在使用之前初始化变量：

```
var grid = $("#grid").data('kendoGrid');
grid.dataSource.query(state); 
```