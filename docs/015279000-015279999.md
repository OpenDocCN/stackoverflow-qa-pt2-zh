# StackOverflow 问答 15279000-15279999

# c# - 如何在标签页上添加按钮？

> ID：15279004
> 
> 赞同：2
> 
> 时间：2013-03-07T18:31:34.020
> 
> 标签：c#, asp.net, winforms

我在 Windows 窗体应用程序中尝试了一个完整的 Firefox。我添加了一些添加标签页，但无法通过单击关闭。我不知道在标签页上粘贴一个十字按钮。我的编码部分是：-

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (tabControl1.SelectedTab.Text == "+")
        {
            AddNewTab();
        }
        foreach (Control item in tabControl1.SelectedTab.Controls)
        {
            if (item.GetType() == typeof(WebBrowser))
            {
                WebBrowser wb = (WebBrowser)item;
                toolStripButton1.Enabled = wb.CanGoBack;
                toolStripButton2.Enabled = wb.CanGoForward;
            }
        }
        this.wb.DocumentTitleChanged += Browser_DocumentTitleChanged;
        this.wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);
    } 
```

![在此处输入图像描述](../Images/18933f4331854de227e08d565b10e30b.png)

我的封闭函数——

```
 private void tabPage1_Click(object sender, EventArgs e)
    {
        if (tabControl1.SelectedTab != null)
        {
            tabControl1.SelectedTab.Dispose();
        }
    } 
```

此功能通过双击关闭标签页，我想借助与 FireFox 工作相同的按钮关闭标签页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:03:19.203

您想要做的不在[TabControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.aspx)的范围内。

为此，您需要创建一个[自定义控件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775501%28v=vs.85%29.aspx)。

在您的自定义控件中，您可以在[Label](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)和几个[Panel](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)控件上添加一个带有 a 图像和一些文本的小[PictureBox 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.aspx)`+`

`+` [对Click 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)进行编码以调用您的关闭技术。

[对Label](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)的[Click 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)进行编码，以在您的 HTML 页面中显示不同的[Panel 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)

**编辑：**就像布赖恩在下面指出的那样，这是一个关于如何在 CodeProject 上执行此操作的优秀教程：

[CodeProject：类似 FireFox 的选项卡控件](http://www.codeproject.com/Articles/20050/FireFox-like-Tab-Control)
![截屏](../Images/8e1bab2f1ee5431583b52aa4a346d22e.png)

# python - 来自 Django 的多系列 Highchart 图表

> ID：15279006
> 
> 赞同：0
> 
> 时间：2013-03-07T18:31:48.910
> 
> 标签：python, django, highcharts

我一直在以这种方式通过 Django 创建一些 Highcharts：

```
...get rows from database
            rows = cursor.fetchall()

            months = list()
            avg_class = list()

            for i in range(0, len(rows)):
                months.append(rows[i][2])
                avg_class.append(rows[i][5])

            months_j = json.dumps(months, cls=DecimalandDateEncoder)
            avg_class_j = json.dumps(avg_class, cls=DecimalandDateEncoder)
send to my template.... 
```

其中包含图表的javascript，如下所示。

```
 xAxis: {
                type: 'datetime',
                categories: {{ months|safe }},
                etc...........
            },
            series: [{
                name: 'Series Name',
                data: {{ avgclassdata }}
            }] 
```

这工作得很好，有这样的数据。

```
Month       Avg Class Data
1/1/2012    17.600493
2/1/2012    18.114341
3/1/2012    16.246443
4/1/2012    16.09489 
```

现在，我有这样的数据：

```
Location    Month   Avg Class Data
Location 1  1/1/2012    17.600493
Location 1  2/1/2012    18.114341
Location 1  3/1/2012    16.246443
Location 1  4/1/2012    16.09489
Location 2  1/1/2012    21.56584
Location 2  2/1/2012    19.54654
Location 2  3/1/2012    17.54654
Location 2  4/1/2012    20.54551 
```

这可以是任意数量的位置。我想使用每个位置组作为一个系列来创建一个 Highchart。对于如何遍历我的行结果并将位置用作系列名称，然后将相应的平均类数据用作系列数据，我有点不知所措。

我的最终目标是从我的数据库结果中创建它：

```
 xAxis: {
                type: 'datetime',
                categories: {{ months|safe }},
                etc...........
            },
            series: [{
                name: Here would go the name of Location 1,
                data: {{ location 1 data }}
            }, {
                name: Here would go the name of Location 2,
                data: {{ location 2 data }}
            }] 
```

我宁愿只是朝着正确的方向前进，而不是有人只是为我编写代码。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:58:20.927

```
 xAxis: {
     type: 'datetime',
     categories: {{ months|safe }},
     etc...........
 },series: [
        {% for location in locations %}
        {
            name: Here would go the name of {{location.name}},
            data: [
               {% for data in location_data %}
               {{data}},
               {% endfor %}
            ]
        },
        {% endfor %}
 ] 
```

# python - 如何避免使用套接字阻塞（聊天客户端）

> ID：15279009
> 
> 赞同：0
> 
> 时间：2013-03-07T18:32:06.220
> 
> 标签：python, sockets, select, module

我整天都在环顾四周，但我无法解决我在这里的聊天客户端遇到的问题。

这就是问题所在：我最近决定更改客户端，以便它允许用户输入他们想要的任何消息，而不必先等待回复（阻塞或某些事情会停止我的程序，直到有回复）

我决定使用 select.select 模块来做到这一点，但是在今天编写了几个不同版本的客户端试图让它工作之后，我一直卡在这一点上。

每当我输入一条消息时，循环就会卡在某个地方（可能在 .recv 数据处）我该如何解决这个问题？我没有尝试过让它去。

编辑：更清楚地说，当我跑步时，我到达了输入消息的位置，按回车键，然后什么也没有发生。它只是保持这样运行。

```
from socket import *
import select
import sys #because why not?

print("New Chat Client Using Select Module")

HOST = input("Host: ")
PORT = int(input("Port: "))

s = socket(AF_INET,SOCK_STREAM)

print("Trying to connect....")
s.connect((HOST,PORT))
s.setblocking(0)
# Not including setblocking(0) because select handles that. 
print("You just connected to",HOST,)

# Lets now try to handle the client a different way!

while True:
    Incoming_data = [s]
    Exportable_data = []

    Exceptions = []
    User_input = input("Your message: ")

    rlist,wlist,xlist = select.select(Incoming_data,Exportable_data,Exceptions)

    if User_input == True:
        Exportable_data += [User_input]

    for i in rlist:
        data = i.recv(1024)
        if data == "":
            continue

    for i in wlist:
        if Exportable_data is True:
            i.send(Exportable_data)
            continue 
```

当它设置为接收数据时，有什么方法可以覆盖阻塞（我认为是问题）？不会 s.setblocking(0) 使它不会阻塞（？）（有或没有它仍然会卡住）

谢谢参观

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:41:38.843

我认为您应该有单独的线程或进程来与您的套接字和另一个线程进行交互，它将接受用户输入并打印聊天消息。您可以使用 2 个队列进行线程之间的交互：用于传入和传出消息。

看看[线程](http://docs.python.org/2/library/threading.html)和[队列](http://docs.python.org/2/library/queue.html)模块。

# c++ - 在 64 位 `long int` 和 `long long int` 的平台上，`intmax_t` 应该是什么？

> ID：15279011
> 
> 赞同：4
> 
> 时间：2013-03-07T18:32:11.000
> 
> 标签：c++, c, c++11

在 C++ 标准 18.4 中，它指定：

```
typedef 'signed integer type' intmax_t; 
```

根据具有 64 位`long int`和 64位的平台上的标准`long long int`，这种“有符号整数类型”应该是什么？

请注意`long int`和`long long int`是*不同的*基本类型。

C++ 标准说：

> 头文件定义了与 C 标准中的 7.18 相同的所有函数、类型和宏。

在 C 标准 (N1548) 的 7.18 中，它说：

> 以下类型指定能够表示任何有符号整数类型的任何值的有符号整数类型：
> 
> ```
> intmax_t 
> ```

在这种情况下，似乎两者都`long int`符合`long long int`条件？

这是正确的结论吗？那要么是符合标准的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:37:22.443

是的，你的推理是正确的。大多数现实世界的实现选择满足条件的最低等级类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:42:01.530

好吧，假设 GNU C 库是正确的（来自 /usr/include/stdint.h）：

```
/* Largest integral types.  */
#if __WORDSIZE == 64
typedef long int                intmax_t;
typedef unsigned long int       uintmax_t;
#else
__extension__
typedef long long int           intmax_t;
__extension__
typedef unsigned long long int  uintmax_t;
#end 
```

# symfony - symfony2：伪语言环境（自动）检测

> ID：15279017
> 
> 赞同：1
> 
> 时间：2013-03-07T18:32:37.783
> 
> 标签：symfony, fosuserbundle

我已经用谷歌搜索了好几个星期了，但我找不到一个很好的答案和独特的方法来做到这一点。我有一个使用 FOSUserBundle 的 symfony2 应用程序。该应用程序有多种语言版本。

我想要的是有一种独特的方式来处理语言环境检测。由于它已从会话移至请求，因此我看不到实现该目标的明确方法。

步骤 a) 用户未登录，可能是我们第一次看到它。从请求标头 Accept-Language:en-US,en;q=0.8,fr;q=0.6 中获取语言环境（例如）。为用户提供本地化版本的登录页面

步骤 b) 用户现在已登录。当然，我们仍然为他服务是基于相同标题的首选语言

到目前为止，我已经使用 ResponseListner 完成了这项工作，但它似乎不适用于第一个请求，并且 FOSuser 登录页面存在问题。

任何有关样品的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:30:00.677

LuneticsLocaleBundle 非常适合：[https ://github.com/lunetics/LocaleBundle](https://github.com/lunetics/LocaleBundle)

它允许您创建自定义区域设置猜测器： [https ://github.com/lunetics/LocaleBundle/blob/master/Resources/doc/guesser.md](https://github.com/lunetics/LocaleBundle/blob/master/Resources/doc/guesser.md)

# javascript - 使用 jquery 更改 iframe youtube src - IE8 错误

> ID：15279021
> 
> 赞同：0
> 
> 时间：2013-03-07T18:32:53.733
> 
> 标签：javascript, jquery, iframe, twitter-bootstrap, custom-data-attribute

我正在使用以下代码将不同的 youtube 视频加载到 Twitter Bootstrap 模式中。为什么 IE8 是唯一不加载 youtube 视频的浏览器？它只显示一个黑色的 div，视频通常会在其中显示。我正在处理的页面上有更多视频要上传，还有很多额外的脚本，所以我试图让它尽可能灵活和轻量级。任何建议，将不胜感激。谢谢！**jsfiddle 在底部。**

```
<div id="Videos">
    <a data-source="http://www.youtube.com/embed/z4Ezruu1oeQ" href="#" class="videoThumbnail">
        <img src="http://placehold.it/200x100&text=Video%20Thumbnail%20One"></a>

    <a data-source="http://www.youtube.com/embed/3tYrd4tPVXs" href="#" class="videoThumbnail">
        <img src="http://placehold.it/200x100&text=Video%20Thumbnail%20Two"></a>

</div>

<div id="videoModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="videoModalLabel" aria-hidden="true">
    <div class="modal-body">
        <div class="video-container">
            <iframe width="520" height="390" frameborder="0" allowfullscreen=""></iframe>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
</div> 
```

Javascript：

```
$('.videoThumbnail').click(function(e) {
    e.preventDefault();
    var src = $(this).data('source');
    $('#videoModal').modal('show');
    $('#videoModal iframe').attr('src', src);
});

$('#videoModal button').click(function () {
    $('#videoModal iframe').removeAttr('src');
}); 
```

[http://jsfiddle.net/curly33/LTxm7/](http://jsfiddle.net/curly33/LTxm7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:49:23.040

我建议让 html 完成这项工作。

```
<a href="http://www.youtube.com/embed/z4Ezruu1oeQ" target="videoIframe" class="videoThumbnail"> 
```

和

```
<iframe name="videoIframe" width="520" height="390" frameborder="0" allowfullscreen=""></iframe> 
```

对js的小修改：

```
$('.videoThumbnail').click(function(e) {
    $('#videoModal').modal('show');
});
$('#videoModal button').click(function () {
    $('#videoModal iframe').removeAttr('src');
    // ^^ is this really needed? ^^
}); 
```

[http://jsfiddle.net/LTxm7/3/](http://jsfiddle.net/LTxm7/3/)

# c# - 嵌套for循环未执行

> ID：15279024
> 
> 赞同：1
> 
> 时间：2013-03-07T18:33:04.373
> 
> 标签：c#, for-loop

谁能告诉我为什么下面代码中的嵌套 for 循环不执行？即不打印“Hello World”。第一个循环正在执行。

```
 for (int i = 0; i < data.Length; i++)
        {// Loop through array

            **for (int j = data.Length - 1; j < i; j--)**
            {
                // Loop backwards through array
                **Console.WriteLine("Hello World");**
                double subTotal = 0;   //Keeps track of current subsequence's value
                subTotal += data[j];
                if (bbestTotal < subTotal)
                {
                    bbestTotal = subTotal;
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:35:14.303

循环没有执行，因为循环条件

```
j < i 
```

就`false`在循环的开头。

由于您的循环`j` *向下*推进，您应该将条件更改为

```
for (int j = data.Length - 1 ; j >= i ; j--) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:34:40.653

内部循环变量`j`用最高值初始化，然后它更大，`i`所以使用`j > i`而不是`j < i`循环条件部分。

改变

```
for (int j = data.Length - 1; j < i; j--) 
```

至

```
for (int j = data.Length - 1; j > i; j--) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:42:34.373

问题的根本原因是，`j < i`对于 i 的所有值，第二个 for 循环的条件始终为 false。所以它永远不会进入第二个 for 循环的主体。这应该可以解决问题：

```
for (int j = data.Length - 1; j > i; j--) 
```

# json - MVC3 和 EF：如何处理嵌套实体（父、子和孙）的 CRUD 操作

> ID：15279036
> 
> 赞同：0
> 
> 时间：2013-03-07T18:33:35.467
> 
> 标签：json, asp.net-mvc-3, entity-framework, razor, entity-framework-5

我是 MVC 3 和实体框架的新手，所以我想知道什么是最好的方法。

基本上，我有 3 个实体：课程、模块和章节。每个都是具有一对多关系的下一个的父级（一个课程有许多模块，一个模块有许多章节）。我有一列 SortOrder 用于 Modules 和 Chapters，让它们按顺序排列。

我的想法是在更新父实体时为子实体使用部分视图。

我有3个观点：

1.  创建/更新课程：课程的所有基本信息
2.  课程模块（基本上是更新课程的不同视图），可以选择添加多个部分视图，每个视图都创建一个模块
3.  课程时间表（对于更新课程仍然是不同的视图）列出了所有模块（在单独的 div 上），并且可以选择添加多个部分视图，每个视图都创建一个章节

我的计划听起来正确和合理吗？我计划使用隐藏字段来存储 ID。我还希望保存异步发生。

任何建议或信息将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:19:32.770

我认为这是你的追求，但不确定。为了处理子/孙实体的持久性，您可以通过多种方式执行此操作。您可以分别对每个实体执行 crud 操作。因此，这将涉及例如通过引用课程（可能是 courseId）来保存模块本身。

或者您可以只保存聚合根，在这种情况下，它看起来像您的课程实体。这将涉及加载课程、填充课程中的模块以及为每个模块填充章节。然后当你 `db.Courses.Add(newCourse); db.SaveChanges(); 所有实体都将被持久化。您必须确保您的外键和模型引用设置正确。

例如，要保存子实体：

```
public ActionResult DoSomething(int courseId, Module newModule)
{
    var course = someService.LoadCourse(courseId);
    course.Modules.Add(newModule);

    using (var db = new MyDbContext())
    {
        db.Courses.Add(course);
        db.SaveChanges();
    }

    return RedirectToAction("Success");
} 
```

或者您可以单独保存：

```
public ActionResult DoSomething(Module newModule)
{
    using (var db = new MyDbContext())
    {
        //You will need to make sure newModule.CourseId is set correctly
        db.Modules.Add(newModule);
        db.SaveChanges();
    }

    return RedirectToAction("Success");
} 
```

根据您的观点，您将能够判断哪种方式最好。关于异步保存，您将能够使用 jquery 将模型发布为 json 来调用这些端点。附带说明一下，要查看的一件事是为 json 请求创建一个自定义的 Anti Forgery Token 验证器，[例如](https://stackoverflow.com/a/2906780/471565).

# java - 即使相机放大，如何保持某些纹理的大小不变？

> ID：15279040
> 
> 赞同：1
> 
> 时间：2013-03-07T18:33:52.237
> 
> 标签：java, android, game-engine, libgdx

我正在使用 libgdx 构建 2D 益智类型游戏。尺寸比实际屏幕尺寸大，所以我们使用捏缩放功能来查看地图的较小部分。问题是，当我缩放时，暂停菜单也显得更大。有什么方法可以使暂停菜单显示相同的大小，即使 camera.zoom 不是默认的。

因为它现在的方式是游戏中的菜单随关卡而缩放。有没有办法在整个游戏中保持某些精灵的大小不变？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:00:47.483

您需要将不同的相机应用于屏幕上的可缩放对象，而不是用于不可缩放对象。根据您使用的 Libgdx API（scene2d、SpriteBatch、原始 OpenGL），具体情况有所不同，但总体思路是相同的。有关详细信息，请参阅[https://gamedev.stackexchange.com/questions/31379/how-do-i-make-an-on-screen-hud-in-libgdx](https://gamedev.stackexchange.com/questions/31379/how-do-i-make-an-on-screen-hud-in-libgdx)。

# jquery - 使用多个值和图像实现 Jquery 自动完成

> ID：15279041
> 
> 赞同：1
> 
> 时间：2013-03-07T18:33:58.267
> 
> 标签：jquery, image, autocomplete, jquery-autocomplete, multipleselection

我是 jQuery 新手，在尝试实现返回图像（由堆栈成员制作）但可以选择各种值（多个值）的自动完成时遇到问题。但在我的代码中，用户只能选择一个值。

这是jsfiddle：

[http://jsfiddle.net/Igaojsfiddle/85SAF/](http://jsfiddle.net/Igaojsfiddle/85SAF/)

```
$(function() {
function split( val ) {
  return val.split( /,\s*/ );
}
function extractLast( term ) {
  return split( term ).pop();
}

$( "#tags" )
  // don't navigate away from the field on tab when selecting an item
  .bind( "keydown", function( event ) {
    if ( event.keyCode === $.ui.keyCode.TAB &&
        $( this ).data( "ui-autocomplete" ).menu.active ) {
      event.preventDefault();
    }
  })
  .autocomplete({
    minLength: 0,
     source: function (request, response) {
        $.ajax({
            url: "http://api.stackoverflow.com/1.1/users",
            data: {
                filter: request.term,
                pagesize: 10
            },
            jsonp: "jsonp",
            dataType: "jsonp",
            success: function(data) {
                response($.map(data.users, function(el, index) {
                    return {
                        value: el.display_name,
                        avatar: "http://www.gravatar.com/avatar/" +
                            el.email_hash
                    };
                }));
            }
        });
    },
    focus: function() {
      // prevent value inserted on focus
      return false;
    },
    select: function( event, ui ) {
      var terms = split( this.value );
      // remove the current input
      terms.pop();
      // add the selected item
      terms.push( ui.item.value );
      // add placeholder to get the comma-and-space at the end
      terms.push( "" );
      this.value = terms.join( ", " );
      return false;
    }
  }).data("autocomplete")._renderItem = function (ul, item) {
    return $("<li />")
        .data("item.autocomplete", item)
        .append("<a><img src='" + item.avatar + "' />" + item.value + "</a>")
        .appendTo(ul);
}; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:25:09.683

问题是您将文本框中的完整文本作为过滤器（例如“Name1, a”）发送，而不仅仅是逗号后面的部分（例如“a”）。您正在正确地发出请求（可以通过查看您选择的浏览器的开发人员工具栏中的“网络”选项卡看到），但您没有发送正确的数据作为查询的一部分。似乎您从[http://jqueryui.com/autocomplete/#multiple](http://jqueryui.com/autocomplete/#multiple)的代码副本开始，但您没有使用*extractLast*方法。如果您将 json 调用的*数据*部分从

```
data: {
    filter: request.term,
    pagesize: 10
}, 
```

至

```
data: {
    filter: extractLast(request.term),
    pagesize: 10
}, 
```

它应该工作。我已经用这个更新了你的 jsfiddle ( [http://jsfiddle.net/85SAF/10/](http://jsfiddle.net/85SAF/10/) )，它似乎工作正常。

希望能帮助到你！

# spring - 角色投票器不工作

> ID：15279043
> 
> 赞同：0
> 
> 时间：2013-03-07T18:34:01.223
> 
> 标签：spring, spring-security

我试图实现角色层次结构，但它不想工作。除此以外，其他一切都完美无缺。这是我的spring-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
     xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd">

<!-- Enable method-level security via annotations -->
<global-method-security secured-annotations="enabled" pre-post-annotations="enabled"/>

<!-- Configure form-based authentication -->
<http auto-config="true" use-expressions="true" entry-point-ref="securityEntryPoint" >
    <intercept-url pattern="/resources/script/jquery-ui/**" access="permitAll" />
    <intercept-url pattern="/resources/script/jquery*" access="permitAll" />
    [....]
    <intercept-url pattern="/**" access="isAuthenticated()" />

    <session-management invalid-session-url="/login.jsp?info=invalid" >
        <concurrency-control max-sessions="1" session-registry-alias="sessionRegistry" expired-url="/login.jsp?info=expired" />
    </session-management>

    <form-login login-page="/login.jsp" authentication-failure-url="/login.jsp?error=credentials" />

    <logout logout-url="/logout" invalidate-session="true" logout-success-url="/login.jsp" />

</http>

<!-- Configure a spring security logger listener for logging authentication attempts. -->
<beans:bean id="loggerListener" class="org.springframework.security.access.event.LoggerListener"/>

<!-- Configure a delegating entry point -->
<beans:bean id="securityEntryPoint" class="org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint">

    <!-- Requests of type text/html or application/xhtml+xml should be handled by form-based authentication -->
    <beans:constructor-arg>
        <beans:map>
            <beans:entry>
                <beans:key>
                    <beans:bean class="com.test.security.AcceptHeaderRequestMatcher"/>
                </beans:key>
                <beans:bean class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
                    <beans:property name="loginFormUrl" value="/login.jsp" />
                </beans:bean>
            </beans:entry>
        </beans:map>
    </beans:constructor-arg>

    <!-- Otherwise use BASIC authentication by default -->
    <beans:property name="defaultEntryPoint">
        <beans:bean class="org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint">
            <beans:property name="realmName" value="test Web Service" />
        </beans:bean>
    </beans:property>

</beans:bean>

<!-- Configure an authentication manager via our defaultUserService -->
<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="defaultUserService">
        <password-encoder hash="md5" />
    </authentication-provider>
</authentication-manager>

<beans:bean id="accessDecisionManager"  class="org.springframework.security.access.vote.AffirmativeBased">
   <beans:property name="decisionVoters">
       <beans:list>
           <beans:ref bean="roleVoter" />
           <beans:ref bean="authenticatedVoter" />
       </beans:list>
   </beans:property> 
```

```
<beans:bean id="roleVoter" class="org.springframework.security.access.vote.RoleHierarchyVoter">
    <beans:constructor-arg ref="roleHierarchy" />
    <beans:property name="rolePrefix" value="" />
</beans:bean>

<beans:bean id="roleHierarchy" class="org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl">
    <beans:property name="hierarchy">
        <beans:value>
            PERM_READ_ALL_USER_LIST > PERM_READ_USER_LIST
        </beans:value>
    </beans:property>
</beans:bean> 
```

如果我尝试使用具有PERM_READ_ALL_USER_LIST 的用户访问需要PERM_READ_USER_LIST 的资源@PreAuthorize("hasRole('PERM_READ_USER_LIST')")，则它不起作用，但如果他有PERM_READ_USER_LIST，它可以工作。所以显然角色投票者没有做它的工作，但我不明白为什么......

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:55:29.127

您必须为`MethodSecurityExpressionHandler`.

有关更多详细信息，请参阅此 Stack Overflow 问题和答案。 [如何在 Spring Security 3 和 Spring EL 中使用角色层次结构？](https://stackoverflow.com/questions/2515789/how-to-use-role-hierarchy-in-spring-security-3-with-spring-el)

# java - 用于保存二进制数据的字符集

> ID：15279044
> 
> 赞同：1
> 
> 时间：2013-03-07T18:34:01.307
> 
> 标签：java, string, 8-bit

有没有可以用来保存 8 位数据的字符集？我的意思是一切都是二进制的，而不改变它的字符串内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:41:11.323

java.io 包定义了两种保存数据的类：

*   XXXOutputStream，用于保存原始 8 字节数据
*   XXXWriter，用于保存字符串

只需使用 XXXOutputStream 系列中适合您需求的类即可。你不需要一个字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:39:19.173

我认为您正在寻找数据类型`byte[]`。

# c# - 如何从后面的代码中添加 ContextIndicator 或 FlipViewIndicator？

> ID：15279046
> 
> 赞同：1
> 
> 时间：2013-03-07T18:34:04.553
> 
> 标签：c#, xaml, windows-8, windows-store-apps

Callisto 有一个名为 FlipViewIndicator 的工具，它充当上下文指示器，现在我知道如何从 xaml 本身添加指示器

```
<StackPanel>
<FlipView x:Name="MyFlipView"/>
<callisto:FlipViewIndicator FlipView="{Binding ElementName=MyFlipView}" />
</StackPanel> 
```

如何从后面的代码中添加 FlipViewIndicator？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T19:53:46.070

您可以尝试类似（在向 StackPanel 添加名称后）

```
MyStackPanel.Children.Add(new FlipViewIndicator { FlipView = MyFlipView }); 
```

# python - 从电子表格到 ipython/python 中的字典等等？

> ID：15279049
> 
> 赞同：0
> 
> 时间：2013-03-07T18:34:09.490
> 
> 标签：python, dictionary, ipython

我希望能够从文件（电子表格或其他文件）中获取数据并创建一个字典，然后我可以在循环中迭代键，并在我的命令中为每个键插入相应的值。对不起，如果这没有多大意义，我将在下面更详细地解释。

我有几个样本正在通过生物信息学管道运行，并且我正在尝试使该过程自动化。其中一个步骤是将“读取组”信息添加到我的文件中，这是使用以下 shell 命令完成的：

> picard-tools AddOrReplaceReadGroups I=input.bam O=output.bam RGID=IDXX RGLB=LBXX RGPL=PLXX RGPU=PUXX RGSM=SMXX VALIDATION_STRINGENCY=SILENT SORT_ORDER=坐标 CREATE_INDEX=true

对于每个样本 ID，都有一个不同的 RGID、RGLB、GRPL、RGPU 和 RGSM（以及不同的输入文件，但我已经知道如何调用该信息。）我想做的是有一个循环来执行此命令每个样本 ID 并在命令中插入相应的 RGLB、GRPL、RGPU 和 RGSM。是否有捷径可寻？我一直在阅读，似乎字典可能是要走的路，但我不清楚如何生成字典并将独立值调用到我的命令中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:45:45.063

这应该很容易，但是如何操作取决于输入文件的格式。你会想要基本上像这样的东西：

```
import subprocess # This is how we're going to call the commands.

samples = {} # Empty dict
with open('inputfile','r') as f:
    for line in f:
        # Extract sampleID, other things depending on file format...

        samples[sampleID] = [rgid, rglb, grpl, rgpu, rgsm] # Populate dict

for sampleID in samples:
    rgid, rglb, grpl, rgpu, rgsm = samples[sampleID]

    # Now you can run your commands using the subprocess module.
    # Remember to add a change based on sampleID if e.g. the IO files differ.
    subprocess.call(['picard-tools', 'AddOrReplaceReadGroups', 'I=input.bam', 
        'O=output.bam', 'RGID=%s' % rgid, 'RGLB=%s' % rglb, 'RGPL=%s' %rgpl,
        'RGPU=%s' % rgpu, 'RGSM=%s' % rgsm, 'VALIDATION_STRINGENCY=SILENT', 
        'SORT_ORDER=coordinate', 'CREATE_INDEX=true']) 
```

# javascript - Raphael .animate on path 属性从一种状态跳转到另一种状态，没有过渡

> ID：15279051
> 
> 赞同：0
> 
> 时间：2013-03-07T18:34:12.203
> 
> 标签：javascript, raphael

我遇到了一个问题，在我看来非常简单的 Raphael.js 代码通过使用属性`.animate()`上的方法为从一个位置移动到另一个位置的路径设置动画，并在其新位置传递路径。`path:`

但是，它不是从旧路径平滑过渡到新路径，而是暂停一段等于过渡时间的时间，然后直接跳到动画的结尾。

我可以看到的代码中的所有内容似乎都遵循文档和标准模式，并且由于它没有崩溃而是给出了意外的行为，因此我没有任何消息或直接反馈可以使用。

动画有效，但跳过了中间过渡步骤。怎么，为什么？

* * *

这是代码的[**JSBIN 现场演示**](http://jsbin.com/ovahud/4/edit)......

...这是示例代码。

```
var paper = Raphael("huh", '100%', '100%');

paper.customAttributes.pathX = function( x ) {
    var path = this.attr('path');
    var origin = getPathOrigin(path);
    return { path: Raphael.transformPath(path, ['T', x - origin.x, 0 ]) };
};
paper.customAttributes.pathY = function( y ) {
    var path = this.attr('path');
    var origin = getPathOrigin(path);
    return { path: Raphael.transformPath(path, ['T', 0, y - origin.y]) };
};
paper.customAttributes.pathXY = function( x,y ) {
    var path = this.attr('path');
    var origin = getPathOrigin(path);
    return { path: Raphael.transformPath(path, ['T', x - origin.x, y - origin.y ]) };
};

function getPathOrigin(path) {
    return {x: path[0][1], y: path[0][2]};
}

var path = paper.path('M 100 100 L 105 105 L 95 105 L 95 95 L 105 95 L 100 100');

var origin = getPathOrigin(path);

path.attr({pathX: origin.x, pathY: origin.y, pathXY: [origin.x, origin.y]});

path.animate({pathX: 200},1000, 'linear', function(){
  path.animate({pathY: 200},1000, 'elastic', function(){
    path.animate({pathXY: [50,50]}, 1000, 'bounce');
  });
});

path.animate({pathX: 200},1000, 'linear'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:34:12.203

我在发布之前发现问题是由于动画使用了`customAttribute`在动画开始之前没有正确设置的动画。无论如何发布，因为这个问题没有明确记录。

在 Raphael 2.1 中， s 需要在**`customAttribute`第一次动画之前设置一个数值**（例如使用`.attr()`，否则 Raphael 尝试通过对非数值使用数值运算符来计算中间过渡“补间”点，如`undefined`不工作。

*（在我的情况下，我有我认为足以防止这种情况的代码，但它有一个不足以导致错误的错误，但足以导致`attr`无法正确设置为数值。检查你想要动画的 attr 在动画不工作之前有一个数值）*

* * *

如果您设法将**无法识别的非数字值放入 Raphael 属性**然后对其进行动画处理，或者如果您找到另一种方法使 Raphael 尝试在数字值和非数字之间“过渡”，您将看到同样的问题初始点。

[代码的工作版本，`customAttribute`这里有工作动画](https://stackoverflow.com/a/15232507/568458)。

# c# - 我无法在数据库中写入路径它给了我另一个与服务器相关的路径

> ID：15279052
> 
> 赞同：0
> 
> 时间：2013-03-07T18:34:12.713
> 
> 标签：c#, asp.net

我尝试使用 eval 从数据库中获取图像路径，但在 cs 部分我得到不同的路径名。

```
 <asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:HiddenField ID="HiddenField1" Value='<%#Eval("Path")%>' runat="server" />
        <img alt="image" style="text-align: center" src="<%#Eval("Path")%>" /></a><asp:CheckBox
            ID="CheckBox1" runat="server" />
        <br></br>
    </ItemTemplate>
</asp:Repeater> 
```

在 .cs 部分中，我绑定到了这个路径值，但它给我带来了非常不同的数据路径

```
 foreach (RepeaterItem item in Repeater1.Items)
    {
        CheckBox ch = (CheckBox)item.FindControl("CheckBox1");
        HiddenField hf = (HiddenField)item.FindControl("HiddenField1");
        if (ch.Checked)
        {

            Image_BLLcs ibll = new Image_BLLcs();
            File.Delete(hf.Value);
            ibll.Delete(hf.Value);

        } 
```

我该如何解决这些问题，你能帮帮我吗？

例如，在我的数据库路径中是相等的`image/images (3).jpg` ，但是当我执行此代码时，它会将其显示 `C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0\image\images (3).jpg`为路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:57:04.233

我用过 Server.MapPath 它解决了我的问题

```
 File.Delete(Server.MapPath(hf.Value));
        ibll.Delete(Server.MapPath(hf.Value)); 
```

# ruby-on-rails-3.2 - 最基本的东西我可以在D3中写看到一些东西

> ID：15279053
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:34:13.807
> 
> 标签：ruby-on-rails-3.2, d3.js

我只是想开始学习 D3 并在 Rails 中有一个项目来玩它。

我有一个正在运行的铁路服务器 - localhost - 我已经在 index.html 中写了这个：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>
    body { font: 12px Arial;}
    path {
        stroke: steelblue;
        stroke-width: 2;
        fill: none;
    }
    .axis path, .axis line {
        fill: none;
        stroke: grey;
        stroke-width: 1; shape-rendering: crispEdges;
    }
</style>
<body>
<p> Hi i am here</p>
<script src="http://d3js.org/d3.v3.min.js"></script>

</body> 
```

现在我可以从那里输入并在浏览器中看到一些东西的最基本的东西是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:40:35.773

下面是一个画圆的示例代码：

```
<script>
    d3.selectAll("body") //select the body
        .append("svg") // add an svg element to the body
        .append("circle") // add a circle to the svg element
        .attr("r", 40) // add attributes to the circle
        .attr("cx", 50)
        .attr("cy", 50)
</script> 
```

这是您的代码“已完成”的 jsFiddle：http: [//jsfiddle.net/Bd7HA/](http://jsfiddle.net/Bd7HA/)

* * *

如果你不是指图形的东西，你也可以这样做，这基本上会在“body”标签内写“Hello World”。

```
<script>
    d3.selectAll("body").text("Hello World")
</script> 
```

jsFiddle：http: [//jsfiddle.net/chrisJamesC/Bd7HA/5/](http://jsfiddle.net/chrisJamesC/Bd7HA/5/)

# matlab - 在 MATLAB 中获取音符的峰值频率

> ID：15279058
> 
> 赞同：1
> 
> 时间：2013-03-07T18:34:28.803
> 
> 标签：matlab, fft

我试图通过使用存在于`MATLAB`. 我只是复制粘贴了数学函数的 FFT 代码，并用音频文件替换了该函数。

```
Fs = 44100;                    % Sampling frequency
T = 1/Fs;                     % Sample time
L = 1000;                     % Length of signal
t = (0:L-1)*T;                % Time vector
% Sum of a 50 Hz sinusoid and a 120 Hz sinusoid
y = wavread('c-note2.wav');     
plot(Fs*t(1:50),y(1:50))

xlabel('time (milliseconds)')

NFFT = 2^nextpow2(L); % Next power of 2 from length of y
Y = fft(y,NFFT)/L;
f = Fs/2*linspace(0,1,NFFT/2+1);

% Plot single-sided amplitude spectrum.
plot(f,2*abs(Y(1:NFFT/2+1))) 
title('Single-Sided Amplitude Spectrum of y(t)') 
xlabel('Frequency (Hz)')
ylabel('|Y(f)|') 
```

在这里，`y=wavread('c-note2.wav')`我们有类似`y=0.15sin(5x)+0.32cos(50t)+rand(I)`（给信号添加噪声）的东西，而不是 。

我们正在尝试做的事情是否正确？我们可以用 wavread 代替数学信号吗？

从获得的图表中，我想获得 的峰值频率`c-note`并检查它是否与 a 的实际频率匹配`c-note`，但我得到的结果很荒谬。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:20:11.823

音符的音高通常与 FFT 返回的峰值频率不同。音符通常包含大量泛音，许多泛音通常比音高频率更强，有些甚至可能在频率上略微不和谐。搜索音高检测或估计算法，而不仅仅是查看 FFT 频谱。

此外，当使用 FFT 查看音频频谱时，FFT 的长度必须比感兴趣的最低频率的几个周期长。您的 FFT 长度似乎太短而无法解析 50 Hz（20 mS 周期）。

# encryption - 压缩的数据加密标准（DES）更大？

> ID：15279059
> 
> 赞同：2
> 
> 时间：2013-03-07T18:34:30.077
> 
> 标签：encryption

我有点知道为什么压缩 DES 文件时它会更大，但是谁能给我正确的理由或链接我似乎找不到任何原因？

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:41:55.210

对于压缩程序来说，经过适当加密的密文看起来非常像一串随机数。如果没有以明文形式出现的模式，压缩器就找不到太多要删除的冗余，因此根本无法很好地压缩。添加压缩器需要解码的数据，“压缩”文件完全有可能比原始文件大。

如果要压缩，可以考虑在加密之前这样做。

# c++ - ')' 标记之前的预期主表达式

> ID：15279070
> 
> 赞同：-5
> 
> 时间：2013-03-07T18:35:02.773
> 
> 标签：c++, image-processing, error-handling, compiler-errors, linked-list

每当我尝试编译时，我的调试器都会出现该错误（在 ')' 标记之前的预期主表达式）。这是有错误的代码。

```
#define threshold 40 //threshold intensity

using namespace std;
using namespace cimg_library;

void RegionGrow (CLinkedList<struct structure> &ListName, CByteImage &Img, uint32_t uRow, uint32_t uCol)
{
 if (Img.Element (uRow+1, uCol) > threshold)
 {
  ListName.AddToTail(structure);
  Img.Element (uRow+1, uCol) = 0;
  RegionGrow (ListName, Img, uRow+1, uCol);
 }
} 
```

有人知道C链表吗？或错误处理？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:43:13.887

排队：

> ListName.AddToTail(结构);

*结构*是数据类型*而不是*对象。

也许你打算写这样的东西：

> ListName.AddToTail(ListName);

**编辑：**另外，您在错误的上下文中使用术语调试器、C 链接列表和错误处理。参考一些好的 C++ 书籍：[The Definitive C++ Book Guide and List](https://stackoverflow.com/q/388242/770118)

# ios - 仅将搜索词应用于 iTunes 搜索 API 中的特定字段。可能的？

> ID：15279072
> 
> 赞同：0
> 
> 时间：2013-03-07T18:35:06.757
> 
> 标签：ios, app-store, itunes, itunes-search-api

使用 iTunes 搜索 api 进行应用搜索，是否可以预先过滤结果，以便将搜索词应用于特定的字段集？例如，标题。我厌倦了找不到任何东西，只是因为它被埋在结果中，而其他一些更流行但完全不相关的应用程序出现在顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:54:26.267

iTunes 搜索 API 确实提供了这个功能，文档非常清楚地说明了如何做到这一点。

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

查看您可以附加的参数列表，您要查找的参数是“属性”：

> 您要在商店中搜索的属性，相对于指定的媒体类型。例如，如果您想按名称搜索艺术家，请指定 entity=allArtist&attribute=allArtistTerm。
> 
> 在此示例中，如果您搜索 term=maroon，iTunes 会在搜索结果中返回“Maroon 5”，而不是所有曾经录制过标题中包含“maroon”一词的歌曲的艺术家。
> 
> 默认值为与指定媒体类型关联的所有属性。

# php - 在颜色框中加载页面

> ID：15279074
> 
> 赞同：2
> 
> 时间：2013-03-07T18:35:07.543
> 
> 标签：php, javascript, jquery, css, modal-dialog

我想知道如何将`.php`文件加载到使用颜色框制作的模态弹出窗口中（[colorbox](http://www.jacklmoore.com/colorbox)是一个 jquery 插件，因此您可以制作模态对话框弹出窗口）？

这是我要加载的

```
<?php include './includes/misc/misc.inc.php';?> 
```

进入这个：

```
<div id="cboxLoadedContent"></div> 
```

有任何想法吗？

我的模态弹出窗口代码如下所示：

```
$(document).ready(function(){
    $(".register_link").colorbox({
        initialWidth:'896',
        initialHeight:'450',
        innerWidth:'896',
        innerHeight:'450',
        fixed:true,
        scrolling:false,
        transition:'none',
        onOpen: function(){
            $("#colorbox").css("opacity", 0);
        },
        onComplete: function(){
            $("#cboxLoadedContent").appendTo("#cboxContent");

            var title = 'Register';
            $('#cboxTitle').text(title);
            $("#colorbox").animate({"opacity": 1});
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:22:57.570

无论您的`register_link`url 指向何处，都添加 $_GET 参数，例如[http_build_query](http://php.net/manual/en/function.http-build-query.php)或`implode('&', $_GET)`

```
<?php
$my_url = '[url to register_link]'.'?'.http_build_query($_GET);
?>
<a href="<?php echo $my_url; ?>" class="register_link">my text</a> 
```

然后在你的`register_link`脚本中，你可以在任何你需要的地方包含你需要的文件：

```
<?php include './includes/misc/misc.inc.php'; ?> 
```

# html - css在不同的分辨率上搞砸了

> ID：15279077
> 
> 赞同：0
> 
> 时间：2013-03-07T18:35:14.193
> 
> 标签：html, css

![在此处输入图像描述](../Images/b85af1f5ce05046dc3f0c3167688f0dd.png)在开发时，假设我声明了以下 CSS 属性

```
.buttons-pos {
    /*margin: 0px 20px;*/
    padding: 10px;
    display:inline-block;
    overflow:hidden;
    height:20px;
    position: relative;
    right:-550px;
    background-color: #E6E6E6;
    position: relative;
    text-align: justify;
    border: 1px solid;
    border-color: #E6E6E6;
    border-radius: 3px;

} 
```

两个蓝色按钮的 css：

```
 .checksheet {
    /*margin: 0px 20px;*/
    left: 400px;
    top: 45px;
    position: relative;

}
  .nchecksheet {
    /*margin: 0px 20px;*/
    left: 680px;
    top:2px;
    position: relative;

} 
```

这在我的电脑上看起来非常好，但是当我在其他电脑上检查时..位置都搞砸了？

有什么方法可以解决这个问题？

附上截图。忽略灰色条......暂时......

你看到的蓝色按钮..那是我笔记本电脑屏幕中央的..

但是在这里..它已经向左移动了。

如果我在我的笔记本电脑上看这个..蓝色按钮将在我的屏幕中央，但灰色条将向右移动..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:57:15.473

我没有深入阅读您的代码，但您的问题几乎可以肯定是因为以像素为单位对位置和尺寸进行硬编码。当您在较高分辨率的设备上进行设计，然后在较低分辨率的设备上进行检查时，您会发现您的布局一团糟。

如果您希望页面流畅，您可能应该在布局页面时使用[百分比。](https://developer.mozilla.org/en-US/docs/CSS/percentage)

另一种可能更适合您需求的解决方案是针对最低公分母进行设计。这实质上意味着，在这种情况下，您决定页面将显示的最低分辨率是多少，然后针对该分辨率进行设计，将页面居中用于其他分辨率。

# c++ - 裸 char32_t 是签名的还是未签名的？

> ID：15279080
> 
> 赞同：15
> 
> 时间：2013-03-07T18:35:15.207
> 
> 标签：c++, c++11, char32-t

同样，裸`char16_t`签名还是未签名？是否定义了实现？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T18:40:09.150

来自标准（C++11 前草案 n3290，或 C++11 后草案 n3337）§3.9.1*基本类型*：

> 类型`char16_t`和`char32_t`表示具有相同大小、符号和对齐方式的不同类型，分别与`uint_least16_t`和，称为基础类型。`uint_least32_t``<stdint.h>`

`uint_least16_t`并且`uint_least32_t`都是无符号的（来自 §18.4.1 *Header `<cstdint>`synopsis*），所以`char16_t`和`char32_t`.

# java - 让 Preferences API 在 Android 和 PC 上运行

> ID：15279083
> 
> 赞同：5
> 
> 时间：2013-03-07T18:35:22.860
> 
> 标签：java, android

我想在 PC 或 Android 手机上运行的草图中保存用户偏好，尽可能使用与标准“Java 方式”相同的代码。

对我而言，理想的候选人似乎是 java.util.prefs.Preferences 类。所以，我写了一个小测试脚本，看看它是否正在处理中：

```
String prId = "counter";
Preferences prefs = Preferences.userNodeForPackage(this.getClass());
int counter = prefs.getInt(prId, 0);

println(counter);
prefs.putInt(prId, 1+counter); 
```

该程序每次执行时都会输出一个递增的数字 - 在 PC 上。在 Android 上，始终显示默认值 (0)。是否需要任何其他步骤才能使其在 Android 上运行？要请求的权限？是否有任何替代方法可以在两个平台上保存名称 - 值对？

观察：“WRITE_EXTERNAL_STORAGE”权限已启用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-15T12:44:11.190

不幸的是，这是一个已知的 Android 错误：[https ://code.google.com/p/android/issues/detail?id=22232](https://code.google.com/p/android/issues/detail?id=22232)

基本上，该应用程序没有生成路径的写入权限，该路径应该是用户具有写入权限的系统特定位置。

最简单的（跨平台）解决方法可能是使用 java.util.Properties，您可以在其中控制存储位置。

另一种解决方法（如果您因某种原因与 Preferences API 相关联）可能是提供您自己的 AbstractPreferences 实现（可能由 Android SharedPreferences 支持？），请参阅此 SO 帖子：[Is there a way to use java.util.Preferences under没有它的 Windows 使用注册表作为后端？](https://stackoverflow.com/questions/208231/is-there-a-way-to-use-java-util-preferences-under-windows-without-it-using-the-r/208289#208289)

**PS**：另一种解决方法可能是使用`Preferences.exportSubtree(OutputStream os)`和 显式导出/导入数据`Preferences.importPreferences(InputStream is)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:43:51.493

在 Android 中，存储首选项的首选方式是使用[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html). 等效代码如下：

```
String prId = "counter";
SharedPreferences prefs = getPreferences(MODE_PRIVATE);
int counter = prefs.getInt(prId,0);    // Get int, default is 0

SharedPreferences.Editor prefsEditor = prefs.edit();
prefsEditor.putInt(prId, counter++);    // Put counter back
prefsEditor.commit();    //Don't forget to commit the changes 
```

我不知道为什么`java.util.prefs.Preferences`会在 Android 中失败。`Activity`我怀疑原因是当前或应用程序被破坏后数据将被删除。

由于每个平台的目录结构不同，仅使用一种相同的方法很难获得偏好。例如，数据存储在`/.java/.userPrefs/**yourpacakgename**/prefs.xml`Android 上，而它在 Windows 上的注册表和`~/Library/Preferences/**yourpacakgename**/prefs.xml`Mac OS X 上。此外，您不能`Preferences.userRoot()`在 Android 中使用，因为应用程序无法`root`访问。

# c# - 晶体学米勒指数从列表中删除等效指数

> ID：15279084
> 
> 赞同：0
> 
> 时间：2013-03-07T18:35:24.853
> 
> 标签：c#, list, filter

我正在使用米勒指数 (hkl) 进行一些晶体学计算，即存储在`int[]`数组中的整数三元组 (hkl)。我正在使用 C#。到目前为止，如果我设置一个最大值 hmax、kmax 和 lmax，我可以填充一个包含所有等效项的列表：

```
List<int[]> milind = new List<int[]>;
int[] mindex = new int[3];
for ( int h = -hmax ; h <= hmax; h++)
{
    mindex[0] = h;
    for ( int k = -kmax ; k <= kmax; k++)
    {
        mindex[1] = k;
        for ( int l = -lmax ; l <= lmax; l++)
        {
             mindex[2] = l;
             milind.Add(mindex);
        }
    }
} 
```

问题：如何使用 C# 删除/过滤所有等价物，即一组 [h,k,l] 的排列？

示例：假设我们有`[h=1,k=0,l=0]`，我想删除/过滤： `[0,1,0]`, `[0,0,1]`, `[-1,0,0]`, `[0,-1,0]`, `[0,0,-1]`... 等。仅保留`[0,0,1]`在列表中。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:51:45.070

为您的索引定义一个“规范”形式，例如：

*   [h]为最大震级指数，符号+1；
*   [k] 是第二大震级指数；
*   [l] 是剩余索引
*   所有共同因素都已被排除在外

现在将所有索引转换为其规范形式，如果它们与已找到的索引重复，则将其删除。

这种形式还允许对您的米勒指数进行排序，加快搜索速度等。

我有物理学学位；我知道米勒指数不能太大。;-)

这是一个“规范化”程序。它使用蛮力进行分解，但我相信这对于问题域来说已经足够了；如果性能是一个可以稍后解决的问题。

**2013-03-09：更新为使用预先计算的素数表 <= 31**

```
 public struct MillerIndex {
    public int H { get; private set; }
    public int K { get; private set; }
    public int L { get; private set; }

    public MillerIndex( int h, int k, int l) : this() {
      H = h;  K = k;  L = l;
    }
  }

  public static class MillereHandler {

    static IList<int> Primes = new List<int> {2,3,5,7,11,13,17,19,23,29,31};

    public static MillerIndex GetCanonical(MillerIndex mi) {
      int h, k, l, sign;
      if (Math.Abs(mi.H) > Math.Abs(mi.K) && Math.Abs(mi.H) >  Math.Abs(mi.L) ) {
        sign = Math.Sign(mi.H);
        h = mi.H;
        k = Math.Abs(mi.K) > Math.Abs(mi.L) ? mi.K : mi.L;
        l = Math.Abs(mi.K) > Math.Abs(mi.L) ? mi.L : mi.K;
      } else if (Math.Abs(mi.K) > Math.Abs(mi.H) && Math.Abs(mi.K) >  Math.Abs(mi.L) ) {
        sign = Math.Sign(mi.K);
        h = mi.K;
        k = Math.Abs(mi.H) > Math.Abs(mi.L) ? mi.H : mi.L;
        l = Math.Abs(mi.H) > Math.Abs(mi.L) ? mi.L : mi.H;
      } else {
        sign = Math.Sign(mi.L);
        h = mi.L;
        k = Math.Abs(mi.H) > Math.Abs(mi.K) ? mi.H : mi.K;
        l = Math.Abs(mi.H) > Math.Abs(mi.K) ? mi.K : mi.H;
      }

      h *= sign;  k *= sign;  l *= sign;

      foreach (var i in Primes.Where(i=> (i^2) < l) ) {
        while ( (h/i)*i == h  &&  (k/i)*i == k &&  (l/i)*i == l ) {
          h /= h/i;  k /= k/i;  l /= l/i;
        }
      }

      return new MillerIndex(h, k, l);
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T23:39:29.230

我只想补充彼得的答案。取消公因数是不正确的。(200) 反射不同于 (100) 反射。因此，没有必要对素数进行所有努力。

如果您具有三次对称性，则生成规范形式的最简单方法是通过取绝对值然后对三个数字进行排序来使所有索引为正。因此`[0,-2,-1]`-> `[0,2,1]`->`[0,1,2]`

# java - 如何将其他项目中的类指定到小程序？

> ID：15279087
> 
> 赞同：0
> 
> 时间：2013-03-07T18:35:44.270
> 
> 标签：java, applet

我有 2 个项目：小程序所在的主要项目，以及我使用一些类的第二个项目。我将第二个项目添加到我的主要项目构建路径中。但是当我在 Chrome 中运行我的小程序时，它给出了一个错误：`java.lang.NoClassDefFoundError: chapter13/MessagePanel`. `chapter13/MessagePanel`是我从第二个项目导入到我的主项目中的类。

我这样调用小程序（html文件位于主项目根文件夹中）：

```
<applet
      code = "myapplets/DisplayMessageApp.class"
      width = 250
      height = 50>
</applet> 
```

我该怎么做才能让小程序可以从第二个项目中看到“chapter13/MessagePanel”类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:48:49.743

最简单的方法是将所有需要的类捆绑在一个 jar 文件中，然后将其指定为存档。

像这样：

[http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html) 安德烈

# c# - 当我按下标签时，面板清除

> ID：15279090
> 
> 赞同：0
> 
> 时间：2013-03-07T18:35:55.183
> 
> 标签：c#, drawing, panel

使用 DrawImageUnscaled 我的程序绘制抛物线或线...

如果我在程序绘制后按 Tab，则图像所在的面板会清除..

对于我使用的 ox 和 oy 轴？他们也消失了……

```
System.Drawing.Pen linepen;
linepen = new System.Drawing.Pen(System.Drawing.Color.Green);

System.Drawing.Graphics g = drawingboard.CreateGraphics();

g.DrawLine(linepen, 0, drawingboard.Height / 2, drawingboard.Width, drawingboard.Height / 2);
g.DrawLine(linepen, drawingboard.Width / 2, 0, drawingboard.Width / 2, drawingboard.Height);
timer1.Enabled = false; 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:44:23.970

通常在 DOT.NET 中，您不只是在随机位置绘制您希望用户看到的内容。相反，每个面板（和控件）都有一个 OnPaint 函数，该函数在控件显示自身时被调用。你想修改这个函数来绘制你的新线。

当您使用 .NET 时，您会注意到，当应用程序中发生某些事件时，该函数将被多次调用——例如重新调整大小。这允许程序员更改窗口大小时显示的内容。

将上面的代码添加到控件的 OnPaint 函数中，它应该会更好地工作。

我不确定你所说的 ox 和 oy 是什么意思——你似乎没有任何代码

# asp.net-mvc-4 - ASP.NET MVC 4 路由不起作用

> ID：15279093
> 
> 赞同：2
> 
> 时间：2013-03-07T18:36:01.640
> 
> 标签：asp.net-mvc-4, routes, maproute

路线

```
 routes.MapRoute(
                 name: "Default",
                 url: "{controller}/{action}/{id}",
                 defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
             );
    routes.MapRoute(
                    name: "Contact",
                    url: "Contact",
                    defaults: new { controller = "Home", action = "Contact" }
                ); 
```

我的控制器

```
 public class HomeController : BaseController
    {
        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }
    } 
```

我的全球.asax

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
        } 
```

最后我的请求网址

```
http://localhost:1234/Contact/ 
```

浏览器错误

> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的网址：/联系方式/
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18033

我究竟做错了什么？

**解决方案：**

自定义路由应该优先

```
 routes.MapRoute(
                        name: "Contact",
                        url: "Contact",
                        defaults: new { controller = "Home", action = "Contact" }
                    );
 routes.MapRoute(
                     name: "Default",
                     url: "{controller}/{action}/{id}",
                     defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
                 ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T18:50:12.980

框架总是尝试按照`route`添加到`RouteCollection`

*所以你应该把自定义路由放在默认路由之前*，

```
 //Custom route
 routes.MapRoute(
                    name: "Contact",
                    url: "Contact",
                    defaults: new { controller = "Home", action = "Contact" }
                );
 //default route
 routes.MapRoute(
                 name: "Default",
                 url: "{controller}/{action}/{id}",
                 defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
             ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T11:31:24.163

```
You can use:

routes.MapRoute(
            name: "Default",
            url: "{*p}",
            defaults: new { controller = "Home", action = "Index", p = UrlParameter.Optional }
        );
The asterisk indicates that it's a catch-all route. Keep in mind that these routes are extremely greedy, make sure that this stays below any specific routes.

You could also add a route constraint to this route which can determine whether the page exists in the database or something. 
```

# javascript - 如何为 Sharepoint 2010 禁用 ECMAScript _vit_bin/services

> ID：15279094
> 
> 赞同：0
> 
> 时间：2013-03-07T18:36:02.777
> 
> 标签：javascript, web-services, sharepoint-2010

目前我们没有使用 ECMAScript 客户端 OM，我们也不想在我们的实现中使用。有没有办法在全球范围内关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:45:25.217

我不是 100% 确定，但我认为 SharePoint 在内部使用 ECMAScript 客户端 OM 来处理功能区、对话框和通知等内容。一个简单的检查方法是从您的 _layoyts 文件夹中临时删除 sp.js、sp.core.js 和 sp.runtime.js（以及调试版本）。如果一切正常，您就有了解决方案。如果由于我提到的内部依赖关系而开始出现问题，那么您将不得不探索替代方法来实现您想要的结果。

# java - 使用 Sherlock ActionBar、Fragment Tab's、ViewPager、PreferenceActivity

> ID：15279102
> 
> 赞同：0
> 
> 时间：2013-03-07T18:36:26.440
> 
> 标签：java, android, android-fragments, actionbarsherlock, preferences

所以我有这个偏好活动并且似乎无法弄清楚如何使这项工作或是否可以完成。我的应用程序使用 Sherlock Actionbar、View-pager 和 Fragment Tabs。除了最后一个选项卡（我的 PreferenceActivity）之外，我所有的选项卡都可以使用。

```
 public class Prefs extends SherlockPreferenceActivity implements
    OnSharedPreferenceChangeListener {

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    addPreferencesFromResource(R.xml.settings);

    Preference customPref = (Preference) findPreference("clearcache");
    customPref
            .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                public boolean onPreferenceClick(Preference preference) {
                    Toast.makeText(getBaseContext(), "Cache Cleared",
                            Toast.LENGTH_LONG).show();
                    Webview.web.clearCache(true);
                    return false;
                }
            });

    Preference customerPref1 = (Preference) findPreference("intent1");
    customerPref1
            .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                public boolean onPreferenceClick(Preference preference) {
                    Intent myIntent = new Intent(Prefs.this, Intent1.class);
                    Prefs.this.startActivity(myIntent);
                    return true;
                }
            }); 
```

这就是我设置偏好活动的方式。现在主要问题是选择此选项卡时的以下问题。

LOGCAT

```
 03-07 10:55:09.553: E/AndroidRuntime(3968): FATAL EXCEPTION: main
 03-07 10:55:09.553: E/AndroidRuntime(3968): java.lang.ClassCastException:      com.application.example.EditPreferences cannot be cast to android.support.v4.app.Fragment
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.support.v4.app.Fragment.instantiate(Fragment.java:394)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at com.application.example.ABSTabsViewPagerActivity$TabsAdapter.getItem(ABSTabsViewPagerActivity.java:106)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:97)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:800)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.support.v4.view.ViewPager.populate(ViewPager.java:991)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at      android.support.v4.view.ViewPager.populate(ViewPager.java:880)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1374)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.View.measure(View.java:15518)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.View.measure(View.java:15518)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.View.measure(View.java:15518)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.View.measure(View.java:15518)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.Choreographer.doFrame(Choreographer.java:532)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.os.Handler.handleCallback(Handler.java:725)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.os.Handler.dispatchMessage(Handler.java:92)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.os.Looper.loop(Looper.java:137)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at android.app.ActivityThread.main(ActivityThread.java:5204)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at java.lang.reflect.Method.invokeNative(Native Method)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at java.lang.reflect.Method.invoke(Method.java:511)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
 03-07 10:55:09.553: E/AndroidRuntime(3968):    at dalvik.system.NativeStart.main(Native Method) 
```

任何想法，示例，其他建议，甚至其他能够执行设置页面的示例，我的大多数设置都只是其他活动的意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:52:40.913

您正在尝试加载活动来代替片段。这就是为什么它给出一个例外。如果您的设置是简单的意图，则无需将它们放在首选项活动中。只需扩展 SherlockFragment 并将您的代码放在那里。

# php - 使用 javascript（不是 JQuery）导入 JSON 文件

> ID：15279112
> 
> 赞同：0
> 
> 时间：2013-03-07T18:36:45.577
> 
> 标签：php, javascript, json

我已经搜索了所有内容，但没有找到关于仅使用 JavaScript 和/或 PHP 导入 JSON 文件（在同一服务器/目录上）的全面教程或说明。我知道使用图书馆更好，但我想知道如何在没有图书馆的情况下做到这一点。

假设我在`.json`文件中有以下内容

```
{
   "customers":[
   {"name":"Joe Smith","age":"36"},
   {"name":"Jane Doe","age":"27"}
   ]
} 
```

我将如何有效地将其拉入脚本并使用其数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:40:43.983

不使用 Ajax 的一种简单方法是将文件的内容从 PHP 回显到 javascript 变量中，如下所示。因为 JSON 使用与 Javascript 中的对象相同的结构，所以可以直接将数据用作变量。

```
var myData = <?php echo file_get_contents('path/to/file.json'); ?>;

// 2
console.log(myData.customers.length); 
```

请注意，这是假设数据是有效的 JSON。此外，请确保文件的来源是可信的，因为这可以在您的文档上下文中执行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:41:18.983

假设您想动态获取数据，您将使用`XMLHttpRequest`（请求文本）和`JSON.parse`（解析它）的组合。

```
function getData(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open(url);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
            if (xhr.status == 200) {
                callback(JSON.parse(xhr.responseText));
            }
            else {
                callback(null); // Or something to indicate failure
            }
        }
    };
    xhr.send();
}

// usage
getData("/path/to/your/file", function(data) {
    if (data === null) {
        // Handle the error
    }
    else {
        // Use `data` here
    }
}); 
```

现在，图书馆的用武之地：

*   一些较旧的浏览器不支持`new XMLHttpRequest`并要求您以各种不同的方式创建 XHR 对象。图书馆通过为您处理这些来帮助您。

*   一些较旧的（不是那么旧的）浏览器`JSON.parse`本身还不支持，因此您可能需要一个 shim。[您可以在Douglas Crockford 的 github 页面](https://github.com/douglascrockford/JSON-js/)上找到几个。但同样，一个体面的图书馆会为你处理这个问题。

# java - 使用 JPA 存储/读取日期时的时区相关问题

> ID：15279114
> 
> 赞同：0
> 
> 时间：2013-03-07T18:36:48.987
> 
> 标签：java, jpa

我有一个 Java EE 5 应用程序（IBM RAD、WebSphere 7.5、Oracle 11）。

我正在使用 JPA 在我的应用程序中读取和写入日期，如下所示：

```
@Entity
@Table="APPOINTMENT"
public class Appointment implements Serializable {
  /* ... */
  @Temporal(TemporalType.TIMESTAMP)
  private Date lastUpdateTimestamp;
  /* ... */
} 
```

每当我更新约会时，我都会...

```
myAppointment.setLastUpdateTimestamp(new Date()); 
```

...以反映更新发生在“现在”。

有两个 WebSphere 服务器，都指向同一个数据库。

当我的本地开发机器的 WebSphere 存储更新时间时，它将“现在”存储为：

```
March 7, 2013 1:30pm EST 
```

当生产服务器存储更新时间时，它将“现在”存储为：

```
March 7, 2013 6:30pm GMT 
```

问题是时区似乎没有存储为时间戳的一部分。因此，当我浏览到本地（EST）机器上的应用程序时，它会将时间显示为：

```
March 7, 2013 6:30pm EST 
```

……如果你跟着我，这实际上是未来 5 小时。

我的问题是，如何将时区与 Date 对象中的日期和时间一起存储到数据库中？

任何信息都很有用，谢谢！

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:25:30.550

事实证明，正确的答案是时区根本没有存储在 Oracle TIMESTAMP 字段中，并且没有办法实现这一点。您必须在存储之前将日期转换为正确的值。

作为记录，这是我考虑的解决方法：

(a) 更改我的所有实体 bean 以将日期存储为长（UTC / 纪元时间）而不是日期对象（UTC = myDate.getTime()），并转换为日期以用于显示目的。决定这是太多的代码更改。

(b) 在写入数据库之前将我的 Date 对象中的时间转换为 GMT。也决定反对这一点，因为这种转换发生在太多地方，我敢肯定一些未来的开发人员会搞砸它或忘记在未来的代码增强中添加它。

(c) 我将开发网络服务器的时区设置为 GMT，在[此处](http://edwin.baculsoft.com/2011/08/how-to-set-timezone-on-websphere-application-server/)找到说明。

我选择了（c）。

# asp.net-mvc - 长时间的操作并等待 ASP.NET MVC 3 中的新视图

> ID：15279124
> 
> 赞同：0
> 
> 时间：2013-03-07T18:37:36.240
> 
> 标签：asp.net-mvc, view, loading

我正在使用 ASP.NET MVC3。在视图中，我有一个发起新请求的链接：

```
@Html.ActionLink ("Link", "LongAction", "Home") 
```

动作“LongAction”需要很长时间，在等待新视图时，我想显示一个模拟加载全新视图的图像：

```
public ActionResult LongAction()
{
Threas.Sleep(10000);
return View();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:14:16.537

你可以这样做：

1.  用户点击按钮
2.  显示加载 GIF
3.  POST/GET 到服务器端点
4.  服务器端点踢了长时间运行的任务。
5.  在 ajax 请求的完成事件中隐藏加载器。
6.  通知用户

您可以考虑将它与 Jquery 绑定在一起，或者如果您想在 mvc 框架中使用某些东西，您可以查看[Ajax ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx)。无论哪种方式，您都可以使用 javascript 隐藏/显示加载程序。

jQuery 示例：

```
$('#userButton').click(function(){
    longRunningTask();
    return false;
});

function longRunningTask()
{
     $('#loader').show();
     $.ajax({ 
        url: 'http://serverendpointaddress.co.uk'
     }).done(function(){
        //notify the user
     }).always(function() {
        $('#loader').hide();
     });
} 
```

# java - Smartwatch Application Deployment

> ID：15279128
> 
> 赞同：0
> 
> 时间：2013-03-07T18:38:03.733
> 
> 标签：java, eclipse, sony, sony-smartwatch

I am struggling to find any documentation or tutorial on how to deploy an application to the Sony Smartwatch (I'm attempting to deploy the open source "Eight Puzzle" application written by Sony which I have imported into Eclipse. I have a Samsung S3 connected to a Sony Smartwatch, upon compiling I get the following:

```
No Launcher activity found!
The launch will only sync the application package on the device!
Performing sync
Automatic Target Mode: using device '4df1e79d35975fa7'    
Uploading EightPuzzleExtension.apk onto device 'xxxxxxxxxxxxxxx'
Installing EightPuzzleExtension.apk...
Success!
\EightPuzzleExtension\bin\EightPuzzleExtension.apk installed on device
Done! 
```

But after reinstalling Sony SmartConnect and looking through under "Applications" and "Sort Applications" on the device, I am unable to find the app. Is there something I'm missing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:22:41.073

*   I just [downloaded](http://developer.sonymobile.com/downloads/code-example-module/music-player-and-8-game-extensions-for-smartwatch-open-source/) the open source code.
*   Unzipped the files
*   Imported the code into eclipse using File > Import.
*   Added SmartExtensionAPI and SmartExtension Utils as Libraries into the Eight Puzzle Game project.
*   Using Run > Configurations installed the application on my device
*   Application installed
*   Sort application screenshot shows the application at the bottom as 8 game.
*   Also shows up on the smartwatch, I can post a pic if you need to verify

It shows up on the bottom of my screen. ![enter image description here](../Images/7968c1791f47661615d9e747727780ec.png)

I am not sure about the issue you are facing. If you did the same procedure as mine, it should work the very first time.

# java - java - 如何将mySQL中的日期与java中的当前日期进行比较？

> ID：15279131
> 
> 赞同：1
> 
> 时间：2013-03-07T18:38:23.727
> 
> 标签：java, mysql, jakarta-ee, servlets

我正在使用 MVC 模式在 Java EE 中编写一个简单的登录程序，我希望提醒用户他/她的密码已超过一年。目前我可以从数据库中获取数据，并将其转换为字符串，但之后我不知道如何将其与当前日期进行比较。

这是我到目前为止所拥有的：

```
public String validateAccount(String email, String enterPassword) {

        try {
            Class.forName(driverName).newInstance();
        } catch (InstantiationException | IllegalAccessException
                | ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Connection connection;

        try {

            connection = DriverManager.getConnection(dbURL, username, password);

            // Retrive current user data from database
            String getCredentials = "SELECT id,dateSet,strength FROM users WHERE email=? AND hashPassword=SHA2(CONCAT(?, salt), 256)";
            PreparedStatement verifyCredentials = connection
                    .prepareStatement(getCredentials);
            verifyCredentials.setString(1, email);
            verifyCredentials.setString(2, enterPassword);
            ResultSet foundData = verifyCredentials.executeQuery();

            while (foundData.next()) {
                System.out.println("Found account");
                int id = foundData.getInt("id");
                String dateSet = foundData.getString("dateSet");
                String strength = foundData.getString("strength");

                // ... do something with these variables ... if
                if (strength.equals("Weak")) {
                    return "1";

                } else if (/*Check if the date in the database is over a year old, and return 2*/) {
                    return "2";
                } else {
                    return "0";
                }

            }
            foundData.close();

            return "Account not found, re-enter your info again";

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return "";

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:43:38.383

您可以改用 foundData.getTimestamp() 并获取时间戳，您可以将其转换为普通的 java Data 类:)

所以，你会有类似的东西

```
Date dateSet = new Date(foundData.getTimestamp("dateSet").getTime()); 
```

或者，如果您不熟悉使用 Date 实例（您还需要使用日历），您可以直接在 SQL 查询中进行检查，

```
String getCredentials = "SELECT id,dateSet,strength, IF(dateSet < NOW() - INTERVAL 1 YEAR, TRUE, FALSE) AS oldPasswd FROM users WHERE email=? AND hashPassword=SHA2(CONCAT(?, salt), 256)"; 
```

接着

```
else if (foundData.getBoolean("oldPasswd")) {
   return "2";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:48:01.130

尝试这个

```
java.sql.Date date  = foundData.getDate("dateSet");
java.sql.Date date2 =  new Date(System.currentTimeMillis());
date2.compareTo(date); 
```

我刚刚修改了您从结果集中访问日期的方式。请注意，如果参数 Date 等于此 Date，“compareTo”将返回值 0；如果此 Date 在 Date 参数之前，则值小于 0；如果此 Date 在 Date 参数之后，则值大于 0。

以下方法将使您在天数内获得差异

```
public static long daysBetween(Date sd, Date ed) {
    Calendar startDate = Calendar.getInstance();
    startDate.setTime(sd);
    Calendar endDate = Calendar.getInstance();
    startDate.setTime(ed);
    Calendar date = (Calendar) startDate.clone();
    long daysBetween = 0;
    while (date.before(endDate)) {
        date.add(Calendar.DAY_OF_MONTH, 1);
        daysBetween++;
    }
    return daysBetween;
} 
```

# c++ - 错误：ISO C++ 禁止声明没有类型的“TimerExeption”

> ID：15279132
> 
> 赞同：2
> 
> 时间：2013-03-07T18:38:25.033
> 
> 标签：c++, exception-handling

尝试在 timer.cpp 文件中抛出 TimerException 类型的异常时出现此错误。这是 timer_exception.h

```
 1 #ifndef TIMER_EXCEPTION_H
  2 #define TIMER_EXCEPTION_H
  3                              
  4 #include <iostream>
  5 #include <string>   
  6                                                                        
  7 class TimerException{         
  8         friend std::ostream &operator <<(std::ostream &os, const TimerException e){
  9                 std::cout << " *** TIMER EXCEPTION *** " << e.message;
 10                 return os;    
 11         }                                
 12 public:                         
 13         TimerExeption(std::string message) : message(message) {}
 14 private:                        
 15         std::string message;                   
 16 };                                         
 17                       
 18                                 
 19 #endif 
```

这是我的 timer.cpp 文件，其中正在实例化 TimerException

```
 1 #include <ctime>
  2 #include "timer.h"
  3 #include "timer_exception.h" 
  4 
  5 void Timer::start(){
  6         if(timer != 0) throw TimerException("Timer already started");
  7         this->timer = clock();
  8 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:41:51.087

简单的错字。您的构造函数名称中缺少“c”。

```
13         TimerExeption(std::string message) : message(message) {}
//               ^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:42:39.087

您的构造函数有错字。TimerExeption，缺少 c。

# windows-installer - 通过 MSI 属性指定 MSI 转换

> ID：15279133
> 
> 赞同：0
> 
> 时间：2013-03-07T18:38:35.513
> 
> 标签：windows-installer

我使用 WiX 二进制元素将 MSI 转换作为资源嵌入到我的 MSI 文件中。我希望通过在 MSI 上指定 TRANSFORMS 属性，使人们能够应用嵌入式转换。

使用 ORCA，我添加了 TRANSFORMS 属性，并指定要使用的转换。但是，转换似乎并没有真正起作用。运行`msiexec /i product.msi /lv log.txt`，我看到一行写着

`MSI (c) (0C:FC) [11:27:06:957]: PROPERTY CHANGE: Deleting TRANSFORMS property. Its current value is ':Product.mst'.`

如何让 MSI 使用我指定的转换？

**编辑：**我刚刚尝试像这样手动指定 TRANSFORMS 属性：`msiexec /i Product.msi /lv Log.txt TRANSFORMS=:Transform.mst`，并且 msiexec 抱怨无法找到转换。此外，如果我使用 7-Zip 提取 MSI 的内容，则转换被列为“Transform.binary”。这可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:37:17.687

看：

[_Storages 表 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372916%28v=vs.85%29.aspx)

您不会在 ORCA 中看到此表，因为它是一个临时表。但是，如果您运行 SQL 查询，您将获得名称。这就是需要在 TRANSFORMS 属性中使用的内容。

# php - 用JS加密数据，用表单解密PHP

> ID：15279134
> 
> 赞同：-3
> 
> 时间：2013-03-07T18:38:42.823
> 
> 标签：php, javascript, forms, encryption, encoding

我创建了一个表单，它将以密码的形式从用户那里获取输入。然后我想在客户端对其进行编码，然后在服务器端对其进行解密。所以想用JS编码，用PHP解码。所以写了下面提到的JS代码：

```
<script>
    function doThis()
    {
        document.myform.password.value = "hello" + document.myform.password.value; // Considering this as encoded data
        return true;
    }
</script> 
```

当我尝试对这些数据进行编码时，它会导致问题，这是因为我没有使用正确的编码算法。经过一番搜索，我发现了一个编码解码方法 base64_decode 和 base64_encode，它们都是 PHP 的。所以我想知道是否有任何方法可以在 JS 中编码并在 PHP 中解码，以便我可以获得正确的数据。在服务器上，我使用以下代码：

```
$password = base64_decode($_POST['password']); 
```

HTML 代码：

```
<form name="myform" onsubmit="return doThis()" action="admin.php" method="post">
<input type="password" name="password" id='password'>
<input type="submit" value="SignIn"> 
```

这将有助于在从客户端发送到服务器时保护密码。我不想使用 SSL，但仍想保护密码免受钓鱼或其他类型的攻击。

请通过代码示例帮助理解这一点。如果我可以使用任何其他加密算法，请帮助我理解使用代码。也只能通过 PHP 来实现这一点吗？，我搜索了一下，发现我们需要 JS 来做这件事，因为需要在客户端进行编码，但是因为使用 PHP 所以想使用 PHP 对其进行解码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T18:41:22.940

你看过这里吗：

[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)

这应该做问题的javascript部分

# java - ClassNotFoundException - ResteasyBootstrap

> ID：15279136
> 
> 赞同：2
> 
> 时间：2013-03-07T18:38:52.313
> 
> 标签：java, google-app-engine, gwt, resteasy

在运行我的 GWT/GAE (App Engine) 应用程序时，该应用程序会引发此错误：

```
ClassNotFoundException: org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap 
```

这是 POM.xml

```
<dependency>
  <groupId>org.jboss.resteasy</groupId>
  <artifactId>resteasy-jaxrs</artifactId>
  <version>${resteasy.version}</version>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxb-provider</artifactId>
    <version>${resteasy.version}</version>
</dependency> 
```

这是日志：

> java.lang.ClassNotFoundException: org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355 ) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at com.google.appengine。 tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at org.mortbay.jetty.handler.ContextHandler.loadClass(ContextHandler.java:1101) at org org.mortbay.jetty.webapp.WebXmlConfiguration 上的 .mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:630)。initWebXmlElement(WebXmlConfiguration.java:368) 在 org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289) 在 org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222) 在 org.mortbay .jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180) 在 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1247) 在 org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java :517) org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) org.mortbay.jetty.handler.HandlerWrapper。 doStart(HandlerWrapper.java:130) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 org.mortbay.jetty。handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.jetty.Server.doStart(Server.java:224) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google .appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:205) 在 com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:232) 在 com.google.appengine.tools.development.DevAppServerImpl .start(DevAppServerImpl.java:157) 在 com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97) 在 com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509 ) 在 com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836) 在 com.google.gwt.dev 的 com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)。DevMode.main(DevMode.java:311)

可能缺少什么？

**更新：**

任何人都可以分享他们为 RestEasy + GAE 工作的 web.xml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:17:11.483

异常表明类不存在。

确保将 resteasy-jaxrs 复制到您的 WEB-INF/lib 中，并确保您的版本是 2.3.0.GA 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T15:04:55.983

如果您的项目是 Maven 基础项目，则运行

mvn 日食：清洁

mvn 日食：日食

它会将 jar 从 m2 repo 添加到 lib 文件夹，然后重新部署 webapp 并重新启动 tomcat/server

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-02T14:07:58.530

请检查

1.  你指的不是JRE，应该是JDK。
2.  删除并添加您的服务器。然后再次运行应用程序。

# birt - 在表格行eclipse birt中插入单元格

> ID：15279137
> 
> 赞同：4
> 
> 时间：2013-03-07T18:38:54.390
> 
> 标签：birt

我似乎找不到在 Eclipse 的 Birt 报告中的表格行中插入另一个单元格的方法，有人知道该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:06:55.863

不确定您遇到的是哪个问题，但解决方案应该是；

1 在表格中插入一列

*   选择表

*   鼠标右键单击列顶部并在左侧或右侧插入一列

2.将网格插入现有单元格，而不添加列。（*通常当你想在同一个页眉或页脚单元格中有一个标签和一个聚合时，你会这样做*）

*   从调色板中，将“网格”元素拖放到单元格中，

*   将“列数”设置为 2，将“行数”设置为 1。

*   将您的其他元素（即标签和聚合）放入表格的单个单元格中的网格的单独单元格中。

# usb - Windows 何时取消进行中的 WDF 请求？

> ID：15279142
> 
> 赞同：1
> 
> 时间：2013-03-07T18:39:16.660
> 
> 标签：usb, driver, device-driver, kmdf, wdf

我正在为 USB3 设备编写一个使用 WDF (KMDF) 的 Windows 设备驱动程序，该设备一次传输大块数据。我编写了一个用户级应用程序来测试这个功能，并且在大多数情况下，一切正常。

我遇到的问题是这样的：我发现当我强制关闭（来自cmd窗口的CTRL + C）应用程序中间传输时，取消时正在进行的数据传输立即停止并且主机似乎只是停止与该端点通信。我在 USB 总线跟踪上观察到了这一点。请求在功能驱动程序中返回为“STATUS_CANCELLED”

我查看了其他类似的第三方设备并在这些设备上使用他们的驱动程序运行他们的测试应用程序，发现当我在数据传输过程中终止他们的测试应用程序时，传输在应用程序关闭之前完成。

我的问题：

当应用程序关闭时，Windows 如何/何时决定终止正在进行的请求？

有没有办法将请求标记为“不可取消”？我已经搜索了文档，但没有发现任何迹象表明我需要做一些事情来防止请求在转移过程中被取消。

任何见解表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:43:09.023

这与设备驱动程序无关；这是关于控制台应用程序[处理 Ctrl-C 事件](http://msdn.microsoft.com/en-us/library/system.console.cancelkeypress.aspx)的方式。控制台应用程序必须捕获 Ctrl-C 事件，并在退出之前等待传输完成。

# jekyll - Jekyll 如何处理 _posts/subdir 中的帖子

> ID：15279147
> 
> 赞同：12
> 
> 时间：2013-03-07T18:39:24.520
> 
> 标签：jekyll

Jekyll Bootstrap 项目在 _posts/core-samples/ 目录中有一个示例博客文章。

我假设，子目录中的帖子（文件）的处理方式与根目录中的帖子相同。它是否正确？

如果是这样，我将添加一个“stage”子目录，将其排除，这样我就可以通过移动它们来存放帖子并发布它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-05-20T14:37:27.073

由于不同之处仅在，`post.path`所以我同意您的说法：

> **子目录**中的帖子（文件）的处理方式与**根目录中的帖子相同**

您可以将帖子存放在目录中`_posts/core-samples/`并像这样发布它们：

```
{% for post in site.posts %}
  {% if post.path contains 'core-samples' %}
     ..your code
  {% endif %}
{% endfor %} 
```

作为一个工作示例，您可能会看到[*此代码*](https://github.com/chetabahana/chetabahana.github.io/blob/1329c5cc02f05384b603baf2e6bf051c52641b76/_includes/head/Eksekusi#L12)如何在[*其部分*](https://chetabahana.github.io/#chetabahana-eksekusi)中发布这些[*停放的帖子*](https://github.com/chetabahana/chetabahana.github.io/tree/master/_posts/eksekusi)。[](https://chetabahana.github.io/#chetabahana-eksekusi)

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T18:54:37.480

无意中在[post-yaml](http://jekyllrb.com/docs/frontmatter/#predefined-global-variables)部分找到了：

> 您可以指定帖子所属的一个或多个类别，而不是将帖子放在文件夹中。当网站生成时，帖子的行为就好像它已经正常设置了这些类别一样。类别（复数键）可以指定为 YAML 列表或空格分隔的字符串。

所以**子目录==类别**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-31T13:28:51.640

我最终来到这里是因为我想创建以下结构：

```
index.html
_animals
  cats
    my-cat.html
    ...
  dogs
    my-dog.html
    ... 
```

我创建了该结构，然后在`_config.yml`：

```
collections:
  animals:
    output: true
    permalink: /animal/:title.html 
```

最后，让狗进来`index.html`：

```
<div id='dogs'>
  {% for a in site.animals %}
    {% if a.path contains 'dogs' %}
      <a href='{{ a.url }}'>{{ a.title }}</a>
    {% endif %}
  {% endfor %}
</div> 
```

注意：这种方法要求`_animals`不能命名包含所有记录（在我的示例中）的目录`_posts`，因为后者是 Jekyll 中的特殊名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-31T22:20:47.357

实际上，该语句所说的是将 _posts 文件夹放在子目录中。然后该子目录将被视为类别。*

# css - CSS水平下拉菜单问题

> ID：15279150
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:39:44.503
> 
> 标签：css, drop-down-menu, menu, html-lists

我的 CSS 菜单有一些问题。我正在重新设计我所有的 CSS 菜单并取消任何 javascript 帮助。我确定这很简单，所以请放轻松。

第一个问题：我正在尝试将 ul 的上边框连接到 li 的右边框。 ![缺少边框](../Images/1b51b962f6d80e88e9aec1d0a8c6b64e.png)

我曾尝试为 'ul#nav ul' 添加一个顶部边框，但它一直贯穿始终。

我尝试将 margin-bottom:-1px 添加到 'ul#nav li:hover > a' 以使其向下延伸以覆盖上面的顶部边框，但这不起作用。

第二个问题：当鼠标在滑出中处于活动状态时，我在主 li 上得到一个奇怪的空间。 ![奇怪的空间](../Images/59c7da71280fb93f9cafeb4583d1556f.png)

最后一期：我查看了几个在线教程，在有子菜单时添加“>”图形，但似乎无法将其集成到正确的位置。

这里是代码链接：http: [//jsfiddle.net/Bqh9a/](http://jsfiddle.net/Bqh9a/)

这是代码：

```
<style type="text/css">
.pipe {margin-top:4px;}
.li_hover {color: #002398;}
.bottom_li {margin-bottom:6px;margin-top:2px;}
ul#nav li .bottom_li:hover > a{background:#E0E0E0;}
ul#nav, ul#nav ul {width:300px;list-style:none;margin:0;padding:0;position:absolute;z-index:9;border:1px solid #297BCE;}
ul#nav li {position:relative;float:left;zoom:1; /*Needed for IE*/}
ul#nav li:hover > a{background:#E0E0E0;color:#297BCE;border-left:1px solid #297BCE;border-right:1px solid #297BCE;border-top:1px solid #E0E0E0;border-bottom:1px solid #E0E0E0;text-decoration:underline;}
ul#nav li:hover > ul{display:block;}
ul#nav li a{border:1px solid #FFFFFF;display:block;padding:4px 6px 4px 6px;color:#297BCE;font-weight:bold;font-family:Arial, Times New Roman, Tahoma;font-size:13px;text-decoration:none;}
ul#nav ul {padding-left:8px;padding-top:2px;display:none;position:absolute;width:150px;border:1px solid #297BCE;background:#E0E0E0;left:0;border-top:none;}
ul#nav ul li{background:#E0E0E0;color:#000;border:none;float:none;}
ul#nav ul li a{border:none;width:100%;padding:0;display:block;color:#000000;line-height:145%;font-size:12px;font-weight:normal;} 
ul#nav ul li a:hover{border:none;width:150px;color:#297BCE;>}
ul#nav ul ul{position: absolute;top: 0;left: 100%;margin-left:-3px;display: none;}
ul#nav ul ul{padding-left:8px;position:absolute;width:150px;border:1px solid #297BCE;background:#E0E0E0;}
ul#nav ul li:hover ul{display: block;}
</style>

<ul id="nav">
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
<li class="pipe">|</li>
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
<li class="pipe">|</li>
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
</ul> 
```

非常感谢您在正确方向上的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:10:17.177

第 1 期：

实现此目的的一种方法是使 a 链接的 z-index 更高（z-index:100 @ Line 7），然后将 ul 菜单的 z-index 设为 -1 并使用 'top:23px' 向上拉菜单下。

但它有点像黑客，如果我是你，我会避免尝试这样做

第二期：

在 CSS 的第 7 行，:hover 样式作用于所有 li，即使是嵌套的，给内部 ul 提供自己的类会更好，然后您现在可以应用更具体的样式左边框应用于#nav 下方的所有 li

第三期：

您可以在 li 中添加另一个元素 () 并向右浮动，这可能有一个 > 图像或只是一个 > 字符。

我知道您说您要删除 javascript，但可能值得查看[jQuery UI 菜单](http://jqueryui.com/menu/)并查看他们使用的 CSS 布局，（或者只是为了捏他们的图标）

# android - 这个 curl 操作的 android 等价物是什么？

> ID：15279151
> 
> 赞同：0
> 
> 时间：2013-03-07T18:39:47.143
> 
> 标签：android, curl

我目前正在使用以下 linux 命令将文件提交到网站：

```
curl --form file=@s1.png --form someparameter=somevalue http://api.website.com/upload.php 
```

我以前从未做过安卓应用。但是 android SDK 中是否有等效的操作？或者由于android开发是用Java完成的，也许有什么可以做的？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:09:51.453

有些人喜欢使用[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)。

你不会在一行中得到任何东西，但它拥有你需要的一切。

如果您需要更全面的东西，那么[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)将是您的理想选择。

更新：

避免使用 HttpClient！[它已被弃用](http://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-apache-http-client)。目前最常用的 Http 库是[OkHttp](http://square.github.io/okhttp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:14:05.413

这个问题的答案可能是基于对[httpclient multipart post](https://stackoverflow.com/questions/8173914/httpclient-multipart-post-with-input-streaming)的答案以及我所知道的输入流来创建的。

# php - 循环SQL并在PHP中计算总和

> ID：15279152
> 
> 赞同：0
> 
> 时间：2013-03-07T18:39:50.003
> 
> 标签：php, mysql, sql, loops

我的代码有问题。我有 2 张桌子。第一个员工 ID：

> |员工编号|
> 
> 1
> 
> 2
> 
> 3

第二个表称为employee_times：

> |Employee_id|Hours_dev|hours_pm|
> 
> |1|2|3|
> 
> |1|3|4|
> 
> |2|3|3|

我要做的是计算每个员工工作的总时间（hours_dev+hours_pm）。例如，employee_id 1 工作了 12 小时

到目前为止，我已经尝试从第一个表中检索所有employee_id，并使用for 循环在SQL 语句中遍历employee_times（参见下面的代码）。但是该代码不起作用，因为它为employee_id 和total_hours 都打印了0。

我在本地主机服务器上使用 MYSQL。

> $sql = "从员工中选择员工 ID"; $result = mysql_query($sql); while($row = mysql_fetch_array) { $employee_id = $row['employee_id']; }

```
 $employee_id_length = sizeof($employee_id);

              for($i = 0; $i < $employee_id_length; $i++)
              {
                 $sql4 = "SELECT employee_id, hours_dev, hours_pm FROM employee_times WHERE employee_id= '$employee_id[$i]'";
                        $result =  mysql_query($sql4);
                          while($info = mysql_fetch_array($result));
                        {
                            $employee_id = $info['employee_id'];
                            $hours_dev=$info['hours_dev'];
                            $hours_pm=$info['hours_pm'];
                            $total_hours = ($total_hours + $hours_dev + $hours_pm );

                        }

                        //print "$employee_id worked for $total_hours";
              } 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:44:21.627

你可以直接得到sum

```
 select employee_id, sum(hours_dev)+ sum(hours_pm) as total 
from employee_times WHERE employee_id= '1'
group by employee_id 
```

参考这个[小提琴演示](http://sqlfiddle.com/#!2/ec91b/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:44:29.613

这应该得到你需要的数据

```
SELECT
  hours_dev,
  hours_pm,
  sum(hours_dev) + sum(hours_pm) as total_hours
FROM
  employee_times
WHERE
  employee_id = 123
GROUP BY
  employee_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:47:23.157

看看聚合函数： [http ://www.w3schools.com/sql/sql_functions.asp](http://www.w3schools.com/sql/sql_functions.asp) [http://www.w3schools.com/sql/sql_func_sum.asp](http://www.w3schools.com/sql/sql_func_sum.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:52:58.747

这个 SQL 查询应该比通过脚本更快地提取信息；

```
SELECT Employee_id, SUM(Hours_dev), SUM(Hours_pm), SUM(Hours_dev + Hours_pm) 
FROM employee_times 
GROUP BY Employee_id 
```

# java - 如何使用 OpenGL ES 2.0 和 Java (Android) 使用索引缓冲区绘制顶点

> ID：15279153
> 
> 赞同：1
> 
> 时间：2013-03-07T18:39:53.447
> 
> 标签：java, android, opengl-es-2.0, indices, vertices

我无法弄清楚如何在 OpenGL ES 2.0 中执行此操作。我已经搜索和搜索，但找不到如何执行此操作的答案。我已经使用了一本书并在 DirectX 中完成了它之前非常简单，所以我确实了解它们是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:45:15.783

看看这个博客：

*   [http://opengles2learning.blogspot.de/](http://opengles2learning.blogspot.de/)

它有很多你可能会感兴趣的东西。并为每个帖子提供源代码。

有关 Android 上的基本 OpenGL ES 2.0 设置，请参阅：

*   [http://opengles2learning.blogspot.de/2011/05/first-experience-with-opengl-es2-on_15.html](http://opengles2learning.blogspot.de/2011/05/first-experience-with-opengl-es2-on_15.html)

可以在此处找到使用索引缓冲区的示例：

*   [http://opengles2learning.blogspot.de/2011/06/texturing-cube-applying-same-texture-on_04.html](http://opengles2learning.blogspot.de/2011/06/texturing-cube-applying-same-texture-on_04.html)

# html - 破折号出现在页面上，但无法在代码中找到它们

> ID：15279154
> 
> 赞同：1
> 
> 时间：2013-03-07T18:39:55.627
> 
> 标签：html

我有一个关于我的网站的具体问题。这些破折号似乎出现在每个翻转图像之间。我查看了整个代码（非常简单），我似乎无法弄清楚它在代码中的位置和/或如何摆脱它。
这是我的网站：
[http ://andiamlisa.com/](http://andiamlisa.com/)

任何帮助都会很棒-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:48:25.230

将此添加到您的 CSS #navigation a {text-decoration: none;}

看起来导航锚上的元素之间有一些隐藏的间距。

# java - Selenium：对服务器的请求顺序与真实浏览器不同

> ID：15279159
> 
> 赞同：0
> 
> 时间：2013-03-07T18:40:17.360
> 
> 标签：java, selenium, fiddler

我正在使用 Selenium 对某个 url 执行一个简单的请求。我将流量记录到服务器 fia Fiddler2。

如果我将流量与真实浏览器的流量（In Private Browsing with Internet Explorer）进行比较，请求的顺序是不同的。

这是我的代码：

```
package com.example.tests.javaJunit4Webdriver;

import static org.junit.Assert.fail;

import java.io.IOException;
import java.util.Date;
import java.util.concurrent.TimeUnit;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.Alert;
import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.remote.DesiredCapabilities;

public class JavaJunit4WebdriverInternetExplorerWikiFacebook {
    private WebDriver driver;
    private String baseUrl;
    private boolean acceptNextAlert = true;
    private StringBuffer verificationErrors = new StringBuffer();

    @Before
    public void setUp() {

        try {

            DesiredCapabilities caps = DesiredCapabilities.internetExplorer();
            caps.setCapability("ignoreZoomSetting", true);
            // Delete Browser Cache since IE does not open a clean profile
            // unlike Chrome & FireFox
            try {
                Runtime.getRuntime().exec(
                        "RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 255");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            driver = new InternetExplorerDriver(caps);
            driver.manage().deleteAllCookies();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void testJavaJunit4Webdriver() {
        System.out.println("testJavaJunit4Webdriver");

        System.out.println("airdroid");
        driver.get("http://web.airdroid.com/");
        Date now = new Date();
        System.out.println(now.toString());
        for (long stop = System.nanoTime() + TimeUnit.SECONDS.toNanos(7); stop > System
                .nanoTime();) {
        }
        System.out.println(new Date().toString());
        System.out.println("Wiki Facebook");

        baseUrl = "http://de.wikipedia.org/wiki/Facebook";

        driver.get(baseUrl);

    }

    @After
    public void tearDown() {
        System.out.println("tearDown");

        Date now = new Date();
        System.out.println(now.toString());
        for (long stop = System.nanoTime() + TimeUnit.SECONDS.toNanos(7); stop > System
                .nanoTime();) {
        }
        System.out.println(new Date().toString());

        driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
            fail(verificationErrorString);
        }
    }

} 
```

如果我执行这个测试用例，我会得到：

```
GET http://de.wikipedia.org/wiki/Facebook
200 OK (text/html)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.flaggedRevs.basic%7Cext.gadget.CommonsDirekt%2CWikiMiniAtlas%7Cext.wikihiero%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmw.PopUpMediaTransform%7Cskins.vector&only=styles&skin=vector&*
200 OK (text/css)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=startup&only=scripts&skin=vector&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=site&only=styles&skin=vector&*
200 OK (text/css)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Disambig-dark.svg/25px-Disambig-dark.svg.png
200 OK (image/png)

GET http://bits.wikimedia.org/geoiplookup
200 geoiplookup (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Facebook.svg/266px-Facebook.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/MarkZuckerberg.jpg/220px-MarkZuckerberg.jpg
200 OK (image/jpeg)

GET http://bits.wikimedia.org/static-1.21wmf10/skins/common/images/magnify-clip.png
200 OK (image/png)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=jquery%2Cmediawiki%2CSpinner%7Cjquery.triggerQueueCallback%2CloadingSpinner%2CmwEmbedUtil%7Cmw.MwEmbedSupport&only=scripts&skin=vector&version=20130218T165645Z
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.centralNotice.bannerController%7Cjquery.client%2Ccookie%2CmwExtension%7Cmediawiki.legacy.ajax%2Cwikibits%7Cmediawiki.notify%2Cutil%7Cmediawiki.page.startup%7Cwikibase.client.init&skin=vector&version=20130307T025300Z&*
200 OK (text/javascript)

GET http://meta.wikimedia.org/wiki/Special:BannerRandom?userlang=de&sitename=Wikipedia&project=wikipedia&anonymous=true&bucket=0&country=DE&slot=2
200 OK (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Flag_of_the_United_States_%28Pantone%29.svg/20px-Flag_of_the_United_States_%28Pantone%29.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Flag_of_Indonesia.svg/18px-Flag_of_Indonesia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Flag_of_Mexico.svg/18px-Flag_of_Mexico.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Flag_of_India.svg/20px-Flag_of_India.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/20px-Flag_of_Brazil.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Flag_of_the_Vatican_City.svg/13px-Flag_of_the_Vatican_City.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Flag_of_%C3%85land.svg/20px-Flag_of_%C3%85land.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Flag_of_American_Samoa.svg/20px-Flag_of_American_Samoa.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Flag_of_Nauru.svg/20px-Flag_of_Nauru.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Flag_of_Guernsey.svg/18px-Flag_of_Guernsey.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Flag_of_Monaco.svg/18px-Flag_of_Monaco.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Flag_of_Iceland.svg/20px-Flag_of_Iceland.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/Flag_of_the_Faroe_Islands.svg/18px-Flag_of_the_Faroe_Islands.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Brunei.svg/20px-Flag_of_Brunei.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Flag_of_the_People%27s_Republic_of_China.svg/20px-Flag_of_the_People%27s_Republic_of_China.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Flag_of_Niger.svg/20px-Flag_of_Niger.svg.png
200 OK (image/png)

GET http://meta.wikimedia.org/wiki/Special:RecordImpression?result=hide&reason=empty&country=DE&userlang=de&project=wikipedia&db=dewiki&sitename=Wikipedia&bucket=0
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Flag_of_Gibraltar.svg/18px-Flag_of_Gibraltar.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Flag_of_Burundi.svg/18px-Flag_of_Burundi.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Tonga.svg/18px-Flag_of_Tonga.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Flag_of_French_Polynesia.svg/20px-Flag_of_French_Polynesia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Flag_of_Latvia.svg/20px-Flag_of_Latvia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/2/27/Flag_of_Moldova.svg/20px-Flag_of_Moldova.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Flag_of_the_Bahamas.svg/20px-Flag_of_the_Bahamas.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Afghanistan.svg/20px-Flag_of_Afghanistan.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Flag_of_Yemen.svg/20px-Flag_of_Yemen.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Flag_of_Guinea.svg/20px-Flag_of_Guinea.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Flag_of_Canada.svg/18px-Flag_of_Canada.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Denmark.svg/20px-Flag_of_Denmark.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Flag_of_Vietnam.svg/20px-Flag_of_Vietnam.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Flag_of_Palestine.svg/20px-Flag_of_Palestine.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Flag_of_Cambodia.svg/20px-Flag_of_Cambodia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Flag_of_Azerbaijan.svg/20px-Flag_of_Azerbaijan.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Commons-logo.svg/12px-Commons-logo.svg.png
200 OK (image/png)

GET http://bits.wikimedia.org/images/wikimedia-button.png
200 OK (image/png)

GET http://bits.wikimedia.org/static-1.21wmf10/skins/vector/images/search-ltr.png?303-4
200 OK (image/png)

GET http://bits.wikimedia.org/static-1.21wmf10/skins/common/images/poweredby_mediawiki_88x31.png
200 OK (image/png)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=skins.vector&only=scripts&skin=vector&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=site&only=scripts&skin=vector&*
200 OK (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/e/ec/Wikipedia-logo-v2-de.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Flag_of_Turkmenistan.svg/20px-Flag_of_Turkmenistan.svg.png
200 OK (image/png)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.UserBuckets%7Cext.articleFeedbackv5.startup%7Cext.flaggedRevs.advanced%7Cext.gadget.CommonsDirekt%2CWikiMiniAtlas%7Cjquery.articleFeedbackv5.verify%7Cjquery.autoEllipsis%2CcheckboxShiftClick%2CclickTracking%2CdelayedBind%2Chidpi%2ChighlightText%2Cjson%2CmakeCollapsible%2Cmw-jump%2Cplaceholder%2Csuggestions%2CtabIndex%7Cmediawiki.api%2Chidpi%2CsearchSuggest%2Cuser%7Cmediawiki.page.ready%7Cmobile.desktop%7Cmw.MwEmbedSupport.style%7Cmw.PopUpMediaTransform&skin=vector&version=20130307T025253Z&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.vector.collapsibleNav%2CcollapsibleTabs%2CeditWarning%7Cjquery.collapsibleTabs&skin=vector&version=20130307T025311Z&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=jquery.ui.button%2Ccore%2Cdialog%2Cdraggable%2Cmouse%2Cposition%2Cresizable%2Cwidget&skin=vector&version=20130218T165324Z&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/favicon/wikipedia.ico
200 OK (image/x-icon)

GET http://meta.wikimedia.org/w/index.php?title=MediaWiki:Wikiminiatlas.js&action=raw&ctype=text/javascript&smaxage=21600&maxage=86400
200 OK (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/a/a1/Monobook-bullet-star-gray.png
200 OK (image/png) 
```

如果我在 Internet Explorer 的“私人会话”中执行请求，则执行顺序会有所不同。

```
GET http://de.wikipedia.org/wiki/Facebook
200 OK (text/html)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.flaggedRevs.basic%7Cext.gadget.CommonsDirekt%2CWikiMiniAtlas%7Cext.wikihiero%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmw.PopUpMediaTransform%7Cskins.vector&only=styles&skin=vector&*
200 OK (text/css)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=site&only=styles&skin=vector&*
200 OK (text/css)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=startup&only=scripts&skin=vector&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/geoiplookup
200 geoiplookup (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Disambig-dark.svg/25px-Disambig-dark.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Facebook.svg/266px-Facebook.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/MarkZuckerberg.jpg/220px-MarkZuckerberg.jpg
200 OK (image/jpeg)

GET http://bits.wikimedia.org/static-1.21wmf10/skins/common/images/magnify-clip.png
200 OK (image/png)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=jquery%2Cmediawiki%2CSpinner%7Cjquery.triggerQueueCallback%2CloadingSpinner%2CmwEmbedUtil%7Cmw.MwEmbedSupport&only=scripts&skin=vector&version=20130218T165645Z
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.centralNotice.bannerController%7Cjquery.client%2Ccookie%2CmwExtension%7Cmediawiki.legacy.ajax%2Cwikibits%7Cmediawiki.notify%2Cutil%7Cmediawiki.page.startup%7Cwikibase.client.init&skin=vector&version=20130307T025300Z&*
200 OK (text/javascript)

GET http://meta.wikimedia.org/wiki/Special:BannerRandom?userlang=de&sitename=Wikipedia&project=wikipedia&anonymous=true&bucket=1&country=DE&slot=7
200 OK (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Flag_of_the_United_States_%28Pantone%29.svg/20px-Flag_of_the_United_States_%28Pantone%29.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Flag_of_Indonesia.svg/18px-Flag_of_Indonesia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Flag_of_India.svg/20px-Flag_of_India.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Flag_of_Mexico.svg/18px-Flag_of_Mexico.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/20px-Flag_of_Brazil.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Flag_of_the_Vatican_City.svg/13px-Flag_of_the_Vatican_City.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Flag_of_%C3%85land.svg/20px-Flag_of_%C3%85land.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Flag_of_American_Samoa.svg/20px-Flag_of_American_Samoa.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Flag_of_Nauru.svg/20px-Flag_of_Nauru.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Flag_of_Guernsey.svg/18px-Flag_of_Guernsey.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Flag_of_Iceland.svg/20px-Flag_of_Iceland.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Flag_of_Monaco.svg/18px-Flag_of_Monaco.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Flag_of_Turkmenistan.svg/20px-Flag_of_Turkmenistan.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Flag_of_Gibraltar.svg/18px-Flag_of_Gibraltar.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Flag_of_Burundi.svg/18px-Flag_of_Burundi.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Tonga.svg/18px-Flag_of_Tonga.svg.png
200 OK (image/png)

GET http://meta.wikimedia.org/wiki/Special:RecordImpression?result=hide&reason=empty&country=DE&userlang=de&project=wikipedia&db=dewiki&sitename=Wikipedia&bucket=1
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Flag_of_Latvia.svg/20px-Flag_of_Latvia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Flag_of_the_People%27s_Republic_of_China.svg/20px-Flag_of_the_People%27s_Republic_of_China.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/Flag_of_the_Faroe_Islands.svg/18px-Flag_of_the_Faroe_Islands.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Brunei.svg/20px-Flag_of_Brunei.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/2/27/Flag_of_Moldova.svg/20px-Flag_of_Moldova.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Flag_of_the_Bahamas.svg/20px-Flag_of_the_Bahamas.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Afghanistan.svg/20px-Flag_of_Afghanistan.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Flag_of_Yemen.svg/20px-Flag_of_Yemen.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Flag_of_Guinea.svg/20px-Flag_of_Guinea.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Flag_of_Canada.svg/18px-Flag_of_Canada.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Denmark.svg/20px-Flag_of_Denmark.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Flag_of_Vietnam.svg/20px-Flag_of_Vietnam.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Flag_of_Palestine.svg/20px-Flag_of_Palestine.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Flag_of_Cambodia.svg/20px-Flag_of_Cambodia.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Flag_of_Azerbaijan.svg/20px-Flag_of_Azerbaijan.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Commons-logo.svg/12px-Commons-logo.svg.png
200 OK (image/png)

GET http://bits.wikimedia.org/static-1.21wmf10/skins/vector/images/search-ltr.png?303-4
200 OK (image/png)

GET http://bits.wikimedia.org/images/wikimedia-button.png
200 OK (image/png)

GET http://bits.wikimedia.org/static-1.21wmf10/skins/common/images/poweredby_mediawiki_88x31.png
200 OK (image/png)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=skins.vector&only=scripts&skin=vector&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=site&only=scripts&skin=vector&*
200 OK (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Flag_of_Niger.svg/20px-Flag_of_Niger.svg.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/e/ec/Wikipedia-logo-v2-de.png
200 OK (image/png)

GET http://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Flag_of_French_Polynesia.svg/20px-Flag_of_French_Polynesia.svg.png
200 OK (image/png)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.UserBuckets%7Cext.articleFeedbackv5.startup%7Cext.flaggedRevs.advanced%7Cext.gadget.CommonsDirekt%2CWikiMiniAtlas%7Cjquery.articleFeedbackv5.verify%7Cjquery.autoEllipsis%2CcheckboxShiftClick%2CclickTracking%2CdelayedBind%2Chidpi%2ChighlightText%2Cjson%2CmakeCollapsible%2Cmw-jump%2Cplaceholder%2Csuggestions%2CtabIndex%7Cmediawiki.api%2Chidpi%2CsearchSuggest%2Cuser%7Cmediawiki.page.ready%7Cmobile.desktop%7Cmw.MwEmbedSupport.style%7Cmw.PopUpMediaTransform&skin=vector&version=20130307T025253Z&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=ext.vector.collapsibleNav%2CcollapsibleTabs%2CeditWarning%7Cjquery.collapsibleTabs&skin=vector&version=20130307T025311Z&*
200 OK (text/javascript)

GET http://bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&lang=de&modules=jquery.ui.button%2Ccore%2Cdialog%2Cdraggable%2Cmouse%2Cposition%2Cresizable%2Cwidget&skin=vector&version=20130218T165324Z&*
200 OK (text/javascript)

GET http://meta.wikimedia.org/w/index.php?title=MediaWiki:Wikiminiatlas.js&action=raw&ctype=text/javascript&smaxage=21600&maxage=86400
200 OK (text/javascript)

GET http://upload.wikimedia.org/wikipedia/commons/a/a1/Monobook-bullet-star-gray.png
200 OK (image/png) 
```

在比较 Selenium-2-Chrome <-> Chrome 浏览器和 Selenium-2-Firefox <-> Firefox 浏览器时，也会出现这种差异。

是否有可能使硒会话与“自然浏览”会话完全一样？

提前致谢！

PS: Sysout/Syserror 如下：

```
Started InternetExplorerDriver server (64-bit)
2.29.1.0
Listening on port 15656
Mrz 07, 2013 7:15:42 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (java.net.SocketException) caught when processing request: Software caused connection abort: recv failed
Mrz 07, 2013 7:15:42 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
testJavaJunit4Webdriver
airdroid
Thu Mar 07 19:15:44 CET 2013
Thu Mar 07 19:15:51 CET 2013
Wiki Facebook
tearDown
Thu Mar 07 19:15:55 CET 2013
Thu Mar 07 19:16:02 CET 2013 
```

我的图书馆是：

```
27.02.2013  15:54           345.048 apache-mime4j-0.6.jar
27.02.2013  15:54           242.154 bsh-1.3.0.jar
27.02.2013  15:54           324.238 cglib-nodep-2.1_3.jar
27.02.2013  15:54           232.771 commons-codec-1.6.jar
27.02.2013  15:54           575.389 commons-collections-3.2.1.jar
27.02.2013  15:54            52.543 commons-exec-1.1.jar
27.02.2013  15:54           173.587 commons-io-2.2.jar
27.02.2013  15:54           299.994 commons-jxpath-1.3.jar
27.02.2013  15:54           315.805 commons-lang3-3.1.jar
27.02.2013  15:54            60.686 commons-logging-1.1.1.jar
27.02.2013  15:54           281.014 cssparser-0.9.8.jar
27.02.2013  15:54         2.189.111 guava-14.0.jar
27.02.2013  15:54            45.024 hamcrest-core-1.3.jar
27.02.2013  15:54            53.070 hamcrest-library-1.3.jar
27.02.2013  15:54         1.230.705 htmlunit-2.11.jar
27.02.2013  15:54         1.009.889 htmlunit-core-js-2.11.jar
27.02.2013  15:54           427.022 httpclient-4.2.1.jar
27.02.2013  15:54           223.374 httpcore-4.2.1.jar
27.02.2013  15:54            26.598 httpmime-4.2.1.jar
27.02.2013  15:54           101.578 ini4j-0.5.2.jar
27.02.2013  15:54            56.533 jcommander-1.29.jar
27.02.2013  15:54           125.727 jetty-websocket-8.1.8.jar
27.02.2013  15:54         1.006.639 jna-3.4.0.jar
27.02.2013  15:54           913.435 jna-platform-3.4.0.jar
27.02.2013  15:54            37.875 json-20080701.jar
27.02.2013  15:54           245.039 junit-dep-4.11.jar
27.02.2013  15:54           124.478 nekohtml-1.9.17.jar
27.02.2013  15:54         1.106.629 netty-3.5.7.Final.jar
27.02.2013  15:54         4.060.747 operadriver-1.2.jar
27.02.2013  15:54             8.597 phantomjsdriver-1.0.1.jar
27.02.2013  15:54           450.284 protobuf-java-2.4.1.jar
27.02.2013  15:54            15.808 sac-1.3.jar
27.02.2013  15:54         3.749.497 selenium-java-2.31.0.jar
27.02.2013  15:54           278.281 serializer-2.7.1.jar
27.02.2013  15:54           813.398 testng-6.8.jar
27.02.2013  15:54         3.176.148 xalan-2.7.1.jar
27.02.2013  15:54         1.363.159 xercesImpl-2.10.0.jar
27.02.2013  15:54           220.536 xml-apis-1.4.01.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:12:29.567

根据系统负载、空闲连接的可用性、DNS 查找时间等，您将看到来自任何客户端的请求的不同顺序。

因此，从纯粹的“排序”角度查看请求并不是很可靠。

您没有提供任何时间戳来显示*给*定请求的发出时间。据我们所知，所有这些请求都是在同一毫秒内发送的，如果您在浏览器中重新加载页面，您会得到不同的结果。

我不久前写的一篇文章：http: [//blogs.msdn.com/b/ieinternals/archive/2011/07/18/optimal-html-head-ordering-to-avoid-parser-restarts-redownloads-and-改进性能](http://blogs.msdn.com/b/ieinternals/archive/2011/07/18/optimal-html-head-ordering-to-avoid-parser-restarts-redownloads-and-improve-performance.aspx).aspx 解释了“前瞻”解析器如何在不同浏览器和同一浏览器的不同版本之间导致不同的请求排序。

# java - 动态处理 HTML 上的链接文件

> ID：15279161
> 
> 赞同：2
> 
> 时间：2013-03-07T18:40:18.500
> 
> 标签：java, php, jquery, archive, webarchive

我有一个备用网站。类似于[Wayback 机器](http://archive.org/web/web.php0)。当我返回 HTML 的内容时，很明显，链接的文档（如图像、javascript 文件、css 文件等）是从原始 Web 服务器（而不是我的服务器）加载的。现在我想替换这些链接，以便从我的服务器加载它们。我有两种方法可以采取：

1.  使用 Java 或 PHP 在服务器端进行。我可以同时使用 Java 和 PHP 来做到这一点。例如在 Java 中，我可以使用 jSoup 来解析 HTML 并替换链接。
2.  使用 jQuery 在客户端执行此操作。

使用第二种方法意味着我不必在我的服务器上增加负载来解析 HTML，但我认为，一旦页面被加载，文件就会开始从原始服务器下载，并且用户的带宽将被浪费。

另一方面，如果我能以某种方式确定图像是否已成功下载，我可以跳过从我的服务器下载并让用户使用从原始服务器下载的文件。

您对此有何建议？

## 更新

关于相对和绝对链接，我应该做一些澄清。我的服务上的链接存储为绝对路径。但是，HTML 文档可能同时具有这两种类型的链接。我需要做的是：

*   转换`http://stackoverflow.com/images/image.png`为`http://mysite.com/view/content?url=http://stackoverflow.com/images/image.png`
*   将`/images/image.png`（在 上`http://stackoverflow.com`）转换为`http://mysite.com/view/content?url=http://stackoverflow.com/images/image.png`

简而言之，HTML上的相对链接应该转换为绝对链接，然后作为`URL`参数发送到我的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:00:46.020

如果链接是相对的，您可以`<base>`使用 jQuery 添加标签。

```
$(function () {
    var base = $("<base>", {
        href: "http://www.your-new-website.com/"
    });
    $("head").append(base);
}); 
```

**更新**

jQuery 不会是最好的解决方案，因为您将对每个项目进行 2 次调用……一个用于从原始服务器进行初始加载，另一个用于从新服务器进行第二次加载，因为 jQuery 更改了`img`和`css`链接。尽管如此，这应该有效。

```
function replaceDomain(href) {
    var originalDomain = document.domain;
    var newDomain = "mysite.com/view/content?url=http://" + originalDomain;
    if (href.indexOf(originalDomain) == -1) href = "http://" + originalDomain + href;
    return href.replace(originalDomain, newDomain);
}
$(function () {
    //convert links
    $('a').each(function () {
        $(this).attr("href", replaceDomain($(this).attr("href")));
    });

    //convert imgs
    $('img').each(function () {
        $(this).attr("src", replaceDomain($(this).attr("src")));
    });

    //convert css links
    $('link').each(function () {
        $(this).attr("href", replaceDomain($(this).attr("href")));
    });
}); 
```

# jquery - 触发按钮单击事件并使用 jquery 对话框中的值

> ID：15279162
> 
> 赞同：0
> 
> 时间：2013-03-07T18:40:21.660
> 
> 标签：jquery, asp.net

我正在尝试弹出一个窗口来输入值以在回发时使用该值。

我在互联网上搜索了很多，并且能够为服务器控件构建弹出代码，下面是我的代码。

但是在构建了这么多之后，我无法从对话框“充电”按钮以及如何使用输入的值中触发按钮单击事件（执行回发）。

我尝试使用 `document.getElementById("<%=Open.ClientID %>").click();`from "Charge" 和 used 一样无用`$(e.currentTarget).unbind('click');` `e.currentTarget.click();`。但非工作。

```
 $(document).ready(function() {  

    $('#Open').click(function(e){
                e.preventDefault();
                $( "#Open-dialog" ).dialog( "open" );
    });

 $( "#Open-dialog" ).dialog({
            modal: true,
            autoOpen: false,
            height: 255,
            width: 300,
            buttons: {
                "Charge": function() {
                     var amount = $('#Amount').val();                                                                                  
                     $( this ).dialog( "close" ); 
                     return true;               
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
    });   
});

    <form id="form1" runat="server">   
    <asp:Button id="Open" Text="Charge" runat="server" OnClick="Open_Click"/>
    <asp:Label ID="txt" Text="hi" runat="server" Visible="false"></asp:Label>
    <div id="Open-dialog" style="display: none;" title="Enter Amount">
        <label for="Amount">Amount</label>
        <input type="text" name="Amount" id="Amount" class="text ui-widget-content ui-corner-all" value="$" />
    </div>
    </form> 
```

我无法在任何问题中找到任何清晰的图片，任何人都可以帮助我并提示如何继续..

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:54:09.690

打开按钮是服务器控制，您需要捕获客户端 ID，并且您需要调用 _dopostback(action, param) 以在“更改”按钮单击时应用手动回发。

```
<script>
        $(document).ready(function () {

            $('[id$=Open]').click(function (e) {
                e.preventDefault();
                $("#Open-dialog").dialog("open");
            });
            $("#Open-dialog").dialog({
                modal: true,
                autoOpen: false,
                height: 255,
                width: 300,
                buttons: {
                    "Charge": function () {
                        var amount = $('#Amount').val();
                         //manual do post back
                        __doPostBack('btnSave ', amount)
                        $(this).dialog("close");
                        return true;
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                },
            });
        });
    </script> 
```

在服务器端，您可以通过以下方式赶上帖子

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack)
            {
                string amount = Request["__EVENTARGUMENT"]; // parameter
                string btnSave = Request["__EVENTTARGET"]; // actionname
            }

        } 
```

快乐的编码...

如果您在浏览器中遇到 _dopostback is undefined 错误，我想在这里向您介绍[Hanselman](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx) 或者您需要获取[Zip 文件](http://www.hanselman.com/blog/content/binary/App_BrowsersUpdate.zip)并将新的浏览器文件手动放入 App_Browsers 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:41:37.727

最后我能够找到解决方案。如果有人正在寻找带有回发的 Jquery 对话框，我会把它放在一起。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#Open').click(function(e){
                    e.preventDefault();
                    $( "#Open-dialog" ).dialog( "open" );
        });
     $( "#Open-dialog" ).dialog({
                modal: true,
                autoOpen: false,
                height: 255,
                width: 300,
                buttons: {
                    "Charge": function() {  
                         __doPostBack("<%= Open.UniqueID %>", $('#Amount').val()); 
                         $( this ).dialog( "close" );                                    

                    },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                    }
                },
        });
    });
</script>

<form id="form1" runat="server">
<asp:Button ID="Open" Text="Charge" runat="server" OnClick="Open_Click" CausesValidation="false" />
<asp:Label ID="txt" Text="hi" runat="server" Visible="false"></asp:Label>
<div id="Open-dialog" style="display: none;" title="Enter Amount">
    <label for="Amount">
        Amount</label>
    <input type="text" name="Amount" id="Amount" class="text ui-widget-content ui-corner-all"
        value="$" />
</div>
</form> 
```

如果遇到脚本错误

> '__doPostBack' 未定义

添加

```
ClientScript.GetPostBackEventReference(this, string.Empty); 
```

感谢大家在此线程中提供的宝贵意见..

# javascript - 使用javascript从左到右移动（滑动）3个不同的图像

> ID：15279164
> 
> 赞同：0
> 
> 时间：2013-03-07T18:40:27.137
> 
> 标签：javascript, html

我有 3 张图像（汽车）要在屏幕上移动。当我点击“开始”按钮时，相关的汽车应该在屏幕上移动。汽车 1、汽车 2 和汽车 3。每个按钮都需要激活三个不同的定时器事件。每辆车都应该使用“margin-left”样式属性移动，同时通过行进的像素数量增加距离参数。

我也想要一个赢家。无论哪辆车越过或重叠检查的图像，都应显示一个警告框，指示获胜者并停止所有计时器。

这是我迄今为止所拥有的：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Welcome to div races!</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<style type="text/css">
    .style1
    {
        width: 134px;
        height: 51px;
    }
</style>
</head>

<body>

<div id="header">Div Races!</div>

<div id="track">

<div class="lane"><div id="Car1">
  <img id="Car1" alt="Car1" class="style1" longdesc="Car1" 
      src="Car1.jpg" /></div></div><!--Car1-->
<button onclick="Car1()">Start</button>

<div class="lane"><div id="Car2">
  <img id="Car2" alt="Car2" class="style1" longdesc="Car2" 
      src="Car2.jpg" /></div></div><!--Car2-->
<button onclick="Car2()">Start</button>

<div class="lane"><div id="Car3">
  <img id="Car3" alt="Car3" class="style1" longdesc="Car3" 
      src="Car3.jpg" /></div></div><!--Crankshaft-->
<button onclick="Car3()">Start</button>

</div><!--track-->

<div id="footer">Click on a start button to start a racecar!</div>

</body>
</html>

function Car1() {
var animate, left = 0, imgObj = null;
init();
    function init(){

       imgObj = document.getElementById('rusty');
       imgObj.style.position= 'absolute';
       imgObj.style.top = '240px';
       imgObj.style.left = '-300px';
       imgObj.style.visibility='hidden';

       moveRight();
    }

    function moveRight(){
        left = parseInt(imgObj.style.left, 10);

        if (10 >= left) {
            imgObj.style.left = (left + 5) + 'px';
            imgObj.style.visibility='visible';

            animate = setTimeout(function(){moveRight();},20); 

            //stopanimate = setTimeout(moveRight,20);
        } else {
            stop();
        }
        //f();
    }

    function stop(){
       clearTimeout(animate);
    }

window.onload = function() {init();};
}

function Car2() {
var animate, left = 0, imgObj = null;
init();
    function init(){

       imgObj = document.getElementById('dusty');
       imgObj.style.position= 'absolute';
       imgObj.style.top = '240px';
       imgObj.style.left = '-300px';
       imgObj.style.visibility='hidden';

       moveRight();
    }

    function moveRight(){
        left = parseInt(imgObj.style.left, 10);

        if (10 >= left) {
            imgObj.style.left = (left + 5) + 'px';
            imgObj.style.visibility='visible';

            animate = setTimeout(function(){moveRight();},20); 

            //stopanimate = setTimeout(moveRight,20);
        } else {
            stop();
        }
        //f();
    }

    function stop(){
       clearTimeout(animate);
    }

window.onload = function() {init();};
}

function Car3() {
var animate, left = 0, imgObj = null;
init();
    function init(){

       imgObj = document.getElementById('crankshaft');
       imgObj.style.position= 'absolute';
       imgObj.style.top = '240px';
       imgObj.style.left = '-300px';
       imgObj.style.visibility='hidden';

       moveRight();
    }

    function moveRight(){
        left = parseInt(imgObj.style.left, 10);

        if (10 >= left) {
            imgObj.style.left = (left + 5) + 'px';
            imgObj.style.visibility='visible';

            animate = setTimeout(function(){moveRight();},20); 

            //stopanimate = setTimeout(moveRight,20);
        } else {
            stop();
        }
        //f();
    }

    function stop(){
       clearTimeout(animate);
    }

window.onload = function() {init();};
} 
```

我在正确的轨道上吗？我使用的代码是在网站上找到的。任何建议将不胜感激。

# android - Android 制作由多个位图组成的可绘制 XML

> ID：15279169
> 
> 赞同：8
> 
> 时间：2013-03-07T18:40:51.977
> 
> 标签：android, xml, drawable

在我的整个应用程序中，我有几个`LinearLayout`s 的背景：

```
android:background="@drawable/metal_plate" 
```

可绘制\metal_plate.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/diamond_metal"
    android:tileMode="repeat"
    android:dither="true">
</bitmap> 
```

我想在金属板的 4 个角上放置 4 个螺丝位图。
我在几个地方使用了金属板，所以我更喜欢将它定义为一个可绘制的，而不是必须在每个场合都用`RelativeLayout`.

**是否可以在可绘制文件夹中定义 XML 以组合平铺金属板和 4 个螺钉？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-07T18:54:36.493

不幸的是我现在不能真正测试这个，但我相信你可以用这样的 LayerListDrawable 来完成这个：

```
<?xml version="1.0" encoding="utf-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <bitmap
            android:src="@drawable/diamond_metal"
            android:tileMode="repeat" />
    </item>

    <item android:right="10dp" android:bottom="10dp">
        <bitmap
            android:src="@drawable/screw"
            android:gravity="bottom|right" />
    </item>

    <item android:left="10dp" android:bottom="10dp">
        <bitmap
            android:src="@drawable/screw"
            android:gravity="bottom|left" />
    </item>

    <item android:top="10dp" android:left="10dp">
        <bitmap
            android:src="@drawable/screw"
            android:gravity="top|left" />
    </item>

    <item android:top="10dp" android:right="10dp">
        <bitmap
            android:src="@drawable/screw"
            android:gravity="top|right" />
    </item>
</layer-list> 
```

用螺钉所需的任何插图替换 10dp 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:45:02.877

这可能很容易使用[NinePatch](http://developer.android.com/reference/android/graphics/NinePatch.html)完成。您可以创建一个 NinePatch 可绘制对象，然后将其设置为您想要拥有背景的任何布局的背景。这只需要你创建一个方形版本的背景，然后我建议使用[Draw 9-Patch](http://developer.android.com/tools/help/draw9patch.html)工具将其制作成 .9.png 供 Android 使用。

# javascript - 如何使用打字机插件显示很多 ?

> ID：15279178
> 
> 赞同：0
> 
> 时间：2013-03-07T18:41:29.193
> 
> 标签：javascript, jquery, html, plugins

我有一些像这样的同一个类的 div 标记：

```
div class="test" 
```

我正在使用 jquerytypewriter 来显示效果文本。我的问题是当一个 div 结束它的隐藏并且在 div 以 jquerytypewriter 效果开始之后我怎么能

我的身体代码是：

```
<div class="test">aaaaaaaaaaaaaaaaaaaaaa</div>
<div class="test">bbbbbbbbbbbbbbbbbbbbbbbb</div>
 <div class="test">ccccccccccccccccccccccc</div>
 <div class="test">dddddddddddddddddddddddd</div> 
```

我的js代码是：

```
$(document).ready(function(){

m();
function m(){
    //alert($('.test').length);
    for(var i=0; i<$('.test').length ; i++){
$('.test').eq(i).typewrite({delay:20, extra_char : "_" , trim : true,callback : function(){
    $('.test').eq(i).hide(800);
    $('.test').eq(i).next().show(1000);

    }});

}
}); 
```

我怎样才能在 div 上一个一个地应用这个效果 .. ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:06:15.287

```
$(document).ready(function(){
var i = 0;
var x = $('.test').length;
m();
function m(){
    //alert($('.test').length);

    //for(var i=0; i<$('.test').length ; i++){  

    if(x>0)
$('.test').eq(i).typewrite({delay:20, extra_char : "" , trim : true,callback :setTimeout(function(){
    $('.test').eq(i).hide(1);
    i++;
    if(i==$('.test').length){i=0}
    m();
    },3000)});

    //}
}

}); 
```

# vba - VBA：如何在excel中更新趋势线标签

> ID：15279179
> 
> 赞同：0
> 
> 时间：2013-03-07T18:41:32.997
> 
> 标签：vba, excel, graph, trendline

有时，当我更改图形数据时，excel 中的趋势线标签没有更新。因此我想通过 VBA 更新。我想对所有工作表和图表中的所有现有趋势线执行此操作。

到目前为止，我的代码不起作用。你会在评论中发现错误。

```
 Sub Auto_Open()
        Debug.Print "Start"
        Dim oChart As ChartObject, nSheet As Integer, nChart As Integer
        nSheet = 1
        Do While nSheet <= Sheets.Count
            nChart = 1
            Do While nChart <= Sheets(nSheet).ChartObjects.Count
                nSeriesCollection = 1
                'Debug.Print Sheets(nSheet).ChartObjects(nChart).SeriesCollection.Count
                'Error in next line
                Do While nSeriesCollection <= Sheets(nSheet).ChartObjects(nChart).SeriesCollection.Count
                    Debug.Print "nSheet: " & nSheet & " nChart: " & nChart
                    Set oChart = Sheets(nSheet).ChartObjects(nChart)
                    oChart.Activate
                    'Next line has to changed too
                    ActiveChart.SeriesCollection(1).Trendlines(1).Select
                    With Selection
                        .DisplayRSquared = False
                        .DisplayEquation = False
                        .DisplayRSquared = True
                        .DisplayEquation = True
                    End With            
                    nSeriesColletion = nSeriesColletion + 1
                Loop
                nChart = nChart + 1
            Loop
            nSheet = nSheet + 1
        Loop
    End Sub 

######################################################################## 
```

存在运行时错误“438”。错误注释所在行中的对象不支持此属性或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:46:14.850

这是解决方案：:)

```
Sub Auto_Open()
    Debug.Print "###########################################"
    Debug.Print "Start"
    Dim oChart As ChartObject, nSheet As Integer, nChart As Integer
    nSheet = 1
    Do While nSheet <= Sheets.Count
        Debug.Print "Sheet: " & nSheet
        nChart = 1
        Do While nChart <= Sheets(nSheet).ChartObjects.Count
            Debug.Print " ChartObjects: " & nChart
            nSeriesCollection = 1
            Do While nSeriesCollection <= Sheets(nSheet).ChartObjects(nChart).Chart.SeriesCollection.Count
                Debug.Print "  SeriesCollection: " & nSeriesCollection

                Sheets(nSheet).ChartObjects(nChart).Chart.SeriesCollection(nSeriesCollection).Trendlines(1).DisplayEquation = True

                nSeriesCollection = nSeriesCollection + 1
            Loop
            nChart = nChart + 1
        Loop
        nSheet = nSheet + 1
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:49:36.277

有错误

`ActiveChart.SeriesCollection(1).Trendlines(1).Select`

将其更改为：

`ActiveChart.SeriesCollection(1).Trendlines(1).DataLabel.Select`

# c# - xslt 参数传递问题—— 返回空结果

> ID：15279183
> 
> 赞同：0
> 
> 时间：2013-03-07T18:41:41.113
> 
> 标签：c#, xslt

下面是我的代码，我正在传递 Xslt 参数并检查参数是否为真，然后 xslt:text 应该返回，但我没有得到任何值。好吧，我是 xslt 的新手。

```
 string filename = "tmp.xml";
    string stylesheet = "result.xslt";
    protected void Page_Load(object sender, EventArgs e)
    {
        //Create the XslTransform and load the stylesheet.
        XslCompiledTransform xslt = new XslCompiledTransform();
        xslt.Load(stylesheet);

        //Load the XML data file.
        XPathDocument doc = new XPathDocument(filename);
        XsltArgumentList obj = new XsltArgumentList();
        bool category = ConfigurationManager.AppSettings["Code"].Contains("Software");
        obj.AddParam("category", "", category);
        //Create an XmlTextWriter to output to the console.             
        StringWriter sw = new StringWriter();
        XmlTextWriter writer = new XmlTextWriter(sw);
        writer.Formatting = Formatting.Indented;
        //Transform the file.
        xslt.Transform(doc, obj, writer, null);
        writer.Close();
    } 
```

----- 结果.xslt 文件----

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt"
    xmlns:user="urn:my-scripts">
  <xsl:param name="category" />
  <xsl:template match="data">
    <xsl:if test="$category=true">
      <xsl:text>Software is avilable.</xsl:text>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

------ tmp.xml 文件 -------------

```
<?xml version="1.0" encoding="utf-8" ?>

<data>
  <circle>
    <radius>12</radius>
  </circle>
  <circle>
    <radius>37.5</radius>
  </circle>
</data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:32:32.050

`test="$category=true"`表示`test="$category = child::true"`，除非您有一个名为“true”的元素，否则比较的结果将是错误的。我猜你的意思是`test="$category=true()"`，虽然写起来更简单`test="$category"`。

（我对 .NET 转换 API 不太熟悉，但我假设当 AddParam() 提供一个布尔值时，样式表看到的也是一个布尔值）。

# java - 为什么不同数据源的持久化单元查询同一个数据源？

> ID：15279184
> 
> 赞同：24
> 
> 时间：2013-03-07T18:41:41.573
> 
> 标签：java, jakarta-ee, jpa, cdi, jta

我正在开发一个需要访问两个不同数据库服务器（H2 和 Oracle）的 webapp。该容器是一个[Apache Tomee 1.5.1](http://tomee.apache.org/apache-tomee.html)，我正在使用 Java EE 堆栈以及其中提供的库（JSF、JPA、CDI、EJB 等）。

我试图在 XA 事务中使用两个实体管理器从 Oracle 数据库中提取数据并在转换后将其保存在 H2 中，但是无论我使用什么实体管理器，所有查询都是针对 H2 数据库执行的。有什么帮助吗？

**编辑**：我发现如果我尝试以相反的顺序访问实体管理器，它们的行为是相同的，但访问的是 Oracle。即：实体管理器与访问的第一个数据库保持一致。

发生这种情况的 EJB（`service.getFoo()`从 JSF 调用）：

```
@Named
@Stateless
public class Service {
    @Inject
    @OracleDatabase
    private EntityManager emOracle;

    @Inject
    @H2Database
    private EntityManager emH2;

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public List<Foo> getFoo() {
        TypedQuery<Foo> q = emH2.createQuery(
                "SELECT x FROM Foo f", Foo.class);
        List<Foo> l = q.getResultList();
        if (l == null || l.isEmpty()) {
            update();
        }

        return q.getResultList();
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public void update() {
        // FAIL: This query executes against H2 with Oracle entity manager!
        List<Object[]> l = emOracle.createNativeQuery("SELECT * FROM bar ").getResultList(); 

        //more stuff...
    }
} 
```

实体管理器的资源生产者 (CDI)（其中 @H2Database 和 @OracleDatabase 是[限定符](http://docs.oracle.com/javaee/6/api/javax/inject/Qualifier.html)）：

```
public class Resources {
    @Produces
    @PersistenceContext(unitName = "OraclePU")
    @OracleDatabase
    private EntityManager emOracle;

    @Produces
    @PersistenceContext(unitName = "H2PU")
    @H2Database
    private EntityManager emH2;
} 
```

我的*peristence.xml*看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="H2PU"
        transaction-type="JTA">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <jta-data-source>H2DS</jta-data-source>
        <class>my.app.h2.Foo</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
    </persistence-unit>

    <persistence-unit name="OraclePU" transaction-type="JTA">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <jta-data-source>OracleDS</jta-data-source>
        <class>my.app.oracle.Bar</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
    </persistence-unit>
</persistence> 
```

最后，*tomee.xml*中的数据源（该文件中没有配置任何其他数据源）：

```
<Resource id="OracleDS" type="javax.sql.DataSource">
    jdbcDriver = oracle.jdbc.xa.client.OracleXADataSource
    jdbcUrl = jdbc:oracle:thin:@server:port:instance
    jtaManaged = true
    password = abcde
    userName = user
</Resource>

<Resource id="H2DS" type="javax.sql.DataSource">
    jdbcDriver=org.h2.jdbcx.JdbcDataSource
    jdbcUrl=jdbc:h2:h2/db;AUTO_SERVER=TRUE
    jtaManaged = true
    password = edcba
    userName = user
</Resource> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-12T07:24:49.117

**容器管理的持久性上下文**

当使用容器管理的持久性上下文时（就像您通过 @PersistenceContext 注释一样），JPA 规范指定只有一个持久性上下文可以与 JTA 事务相关联。

持久性上下文由 Java EE 容器创建。尽管出现了代码（@PersistenceContext 注释似乎表明 PC 被直接注入到您的 EntityManager 实例变量中），但持久性上下文实际上存储为 JTA 事务中的引用。每次 EntityManager 操作发生时，它都不会引用它自己的内部持久性上下文。相反，它执行一个特殊操作，因为它是容器管理的——它总是在 JTA 事务中查找持久性上下文并使用它。这称为 JTA 持久性上下文传播。

JPA 规范中的一些引用：

> *当使用容器管理的实体管理器时，持久性上下文的生命周期总是自动管理，对应用程序透明，并且持久性上下文通过 JTA 事务传播。*
> 
> 容器管理的事务范围持久性上下文
> 
> ... *当容器管理的实体管理器在活动 JTA 事务的范围内被调用 [76] 时，一个新的持久性上下文开始，并且没有与 JTA 事务相关联的当前持久性上下文。创建持久性上下文，然后将其与 JTA 事务相关联。*
> 
> 容器管理的扩展持久性上下文
> 
> ...容器管理的扩展持久性上下文只能在有状态会话 bean 的范围内启动。它从创建声明对 PersistenceContextType.EXTENDED 类型的实体管理器的依赖关系的有状态会话 bean 开始存在，并且被称为绑定到有状态会话 bean。通过 PersistenceContext 注释或 persistence-context-ref 部署描述符元素声明对扩展持久性上下文的依赖。当有状态会话 bean 的 @Remove 方法完成时（或者有状态会话 bean 实例被销毁），容器将关闭持久性上下文。
> 
> 持久化上下文传播的要求
> 
> ...如果调用了一个组件并且没有 JTA 事务...，则不会传播持久性上下文。• 调用使用 PersistenceContextType.TRANSACTION 定义的实体管理器将导致使用新的持久性上下文。• 调用使用 PersistenceContextType.EXTENDED 定义的实体管理器将导致使用绑定到该组件的现有扩展持久性上下文。
> 
> ... 如果调用了一个组件并将 JTA 事务传播到该组件中： • 如果该组件是一个有状态会话 bean，扩展的持久性上下文已绑定到该 bean，并且有一个不同的持久性上下文绑定到 JTA 事务，则EJBException 由容器引发。• 否则，如果存在绑定到 JTA 事务的持久性上下文，则传播并使用该持久性上下文。

**所以这是你的问题。显而易见的 64 美元问题：为什么规范要求这个？？？**

**嗯，这是因为它是一种经过深思熟虑的权衡，它为 EJB 带来了强大的 EntityManager 魔法。**

使用 JTA 事务传播单个持久性上下文有一个限制：事务不能跨越多个持久性上下文，因此不能跨越多个数据库。

但是，它也有一个巨大的优势：在 EJB 中声明的任何 entityManager 都可以自动共享相同的持久性上下文，因此可以对同一组 JPA 实体进行操作并参与同一事务。您可以有一个 EJB 链调用任何复杂性的其他 EJB，并且它们都针对 JPA 实体数据进行明智且一致的行为。而且它们也不需要跨方法调用一致地初始化/共享实体管理器引用的复杂性——可以在每个方法中私有地声明 EntityManagers。实现逻辑可以非常简单。

**问题的答案：使用应用程序管理的持久性上下文（通过应用程序管理的 EntityManagers**）

通过以下方法之一声明您的 entityManager：

```
// "Java EE style" declaration of EM
@PersistenceUnit(unitName="H2PU")
EntityManagerFactory emfH2;
EntityManager emH2 = emfH2.createEntityManager(); 
```

或者

```
// "JSE style" declaration of EM
EntityManagerFactory emfH2 = javax.persistence.Persistence.createEntityManagerFactory("H2PU");
EntityManager emH2 = emfH2.createEntityManager();

and the same for emfOracle & emOracle. 
```

完成每个 EM 后，您必须调用 em.close() - 最好通过 final { } 子句或通过 Java 7 try-with-resources 语句。

应用程序管理的 EM 仍然参与（即同步）JTA 事务。任何数量的应用程序管理的 EM 都可以参与单个 JTA 事务——但这些都不会将它们的持久性上下文与任何容器管理的 EM 关联或传播到任何*容器管理的 EM*中。

如果 EntityManager 是在 JTA 事务的上下文之外创建的（在事务开始之前），那么您必须明确要求它加入 JTA 事务：

```
// must be run from within Java EE code scope that already has a JTA 
// transaction active:
em.joinTransaction(); 
```

或者更简单，如果 EntityManager 是在 JTA 事务的上下文中创建的，那么应用程序管理的 EntityManager 会自动隐式加入 JTA 事务 - 不需要 joinTransaction()。

因此，应用程序管理的 EM 可以有一个跨越多个数据库的 JTA 事务。当然，您总是可以运行独立于 JTA 的本地资源 JDBC 事务：

```
EntityTransaction tx = em.getTransaction();  
tx.begin();

// ....

tx.commit(); 
```

**编辑：使用应用程序管理的实体管理器进行事务管理的额外细节**

警告：下面的代码示例用于教育用途 - 我已经将它们从头顶输入以帮助解释我的观点并且没有时间编译/调试/测试。

EJB 的默认@TransactionManagement 参数是TransactionManagement.CONTAINER，EJB 方法的默认@TransactionAttribute 参数是TransactionAttribute.REQUIRED。

事务管理有四种排列方式：

*   A) 带有 CONTAINER 管理的 JTA 事务的 EJB

    这是首选的 Java EE 方法。
    EJB 类 @TransactionManagement 注释：
    必须显式设置为 TransactionManagement.CONTAINER 或省略它以隐式使用默认值。
    EJB 方法@TransactionAttribute 注释：必须显式设置为 TransactionAttribute.REQUIRED 或省略它以隐式使用默认值。（注意：如果您有不同的业务场景，您可以使用 TransactionAttribute.MANDATORY 或 TransactionAttribute.REQUIRES_NEW，前提是它们的语义符合您的需求。）
    应用程序管理的实体管理器：
    它们必须通过 Persistence.createEntityManagerFactory("unitName") 和 emf 创建.createEntityManager()，如上所述。
    通过 JTA 事务加入 EntityManager：
    在事务性 EJB 方法中创建 EntityManager，它们将自动加入 JTA 事务。或者，如果事先创建了 EntityManager，则在事务 EJB 方法中调用 em.joinTransaction()。
    使用完毕后调用 EntityManager.close()。这应该是所有需要的。

    基本示例 - 只需使用更多 EntityManager 进行跨多个 DB 的事务：

    ```
    @Stateless  
    public class EmployeeServiceBean implements EmployeeService {

        // Transactional method
        public void createEmployee() {
            EntityManagerFactory emf = Persistence.createEntityManagerFactory("EmployeeService");
            EntityManager em = emf.createEntityManager();
            Employee emp = ...; // set some data
            // No need for manual join - em created in active tx context, automatic join:
            // em.joinTransaction();         
            em.persist(emp);
            // other data & em operations ...
            // call other EJBs to partake in same transaction ...
            em.close();    // Note: em can be closed before JTA tx committed. 
                       // Persistence Context will still exist & be propagated 
                       // within JTA tx.  Another EM instance could be declared and it 
                       // would propagate & associate the persistence context to it.
                       // Some time later when tx is committed [at end of this 
                       // method], Data will still be flushed and committed and 
                       // Persistence Context removed .
        emf.close();
        }

    }

    @Stateful  
    public class EmployeeServiceBean implements EmployeeService {  

        // Because bean is stateful, can store as instance vars and use in multiple methods  
        private EntityManagerFactory emf;
        private EntityManager em;

        @PostConstruct      // automatically called when EJB constructed and session starts
        public void init() {
            emf = Persistence.createEntityManagerFactory("EmployeeService");
            em = emf.createEntityManager();
        }

        // Transactional method
        public void createEmployee() {
            Employee emp = ...; // set some data
            em.joinTransaction();         // em created before JTA tx - manual join
            em.persist(emp);
        }

        // Transactional method
        public void updateEmployee() {
            Employee emp = em.find(...);  // load the employee
            // don't do join if both methods called in same session - can only call once: 
            // em.joinTransaction();         // em created before JTA tx - manual join
            emp.set(...);                 // change some data
                                 // no persist call - automatically flushed with commit
        }

        @Remove                           // automatically called when EJB session ends
        public void cleanup() {
            em.close();
            emf.close();
        }
    // ...
    } 
    ```

*   B) 带有 BEAN 管理的 JTA 事务的 EJB

    使用@TransactionManagement.BEAN。
    注入JTA UserTransaction 接口，使bean 可以直接标记JTA 事务。
    通过 UserTransaction.begin()/commit()/rollback() 手动标记/同步事务。
    确保 EntityManager 加入 JTA 事务 - 在活动的 JTA 事务上下文中创建 EM 或调用 em.joinTransaction()。

    例子：

    ```
    @TransactionManagement(TransactionManagement.BEAN)  
    @Stateless  
    public class EmployeeServiceBean implements EmployeeService {

        // inject the JTA transaction interface
        @Resource UserTransaction jtaTx;

        public void createEmployee() {
            EntityManagerFactory emf = Persistence.createEntityManagerFactory("EmployeeService");
            EntityManager em = emf.createEntityManager();
            try {
                jtaTx.begin();
                try {
                   em.joinTransaction();         
                   Employee emp = ...; // set some data
                   em.persist(emp);
                   // other data & em operations ...
                   // call other EJBs to partake in same transaction ...
                } finally {
                    jtaTx.commit();
                }
            } catch (Exception e) {
               // handle exceptions from UserTransaction methods
               // ...
            }

            Employee emp = ...; // set some data
            // No need for manual join - em created in active tx context, automatic join:
            // em.joinTransaction();         
            em.persist(emp);
            em.close();    // Note: em can be closed before JTA tx committed. 
                       // Persistence Context will still exist inside JTA tx.
                       // Data will still be flushed and committed and Persistence 
                       // Context removed some time later when tx is committed.
            emf.close();
        }

    } 
    ```

*   C) POJO/Non-EJB 与手动编码（bean 管理）资源本地事务（不是 JTA）

    只需使用 JPA EntityTransaction 接口进行 tx 分界（通过 em.getTransaction() 获得）。

    例子：

    ```
    public class ProjectServlet extends HttpServlet {

        @EJB ProjectService bean;

        protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
            // ...
            try {
                EntityManagerFactory emf = Persistence.createEntityManagerFactory("myPU");
                EntityManager em = emf.createEntityManager();
                EntityTransaction tx = em.getTransaction();
                tx.begin();
                try {
                    bean.assignEmployeeToProject(projectId, empId);
                    bean.updateProjectStatistics();
                } finally {
                    tx.commit();
                }
            } catch (Exception e) {
               // handle exceptions from EntityTransaction methods
               // ...
            }
        // ...
        }
    } 
    ```

*   D) 带有手动编码（POJO 管理）JTA 事务的 POJO/非 EJB

    这假设 POJO/组件在一些支持 JTA 的容器中运行。
    如果在 Java EE 容器中，可以使用 JTA UserTransaction 接口的 Java EE 资源注入。
    （或者，可以显式查找 JTA 接口的句柄并对其进行划分，然后调用 em.getTransaction().joinTransaction() - 请参阅 JTA 规范。）

    例子：

    ```
    public class ProjectServlet extends HttpServlet {

        @Resource UserTransaction tx;
        @EJB ProjectService bean;

        protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
            // ...
            try {
                tx.begin();
                try {
                    bean.assignEmployeeToProject(projectId, empId);
                    bean.updateProjectStatistics();
                    EntityManagerFactory emf = Persistence.createEntityManagerFactory("myPU");
                    EntityManager em = emf.createEntityManager();
                    // Should be able to avoid explicit call to join transaction.
                    // Should automatically join because EM created in active tx context.
                    // em.joinTransaction();
                    // em operations on data here
                    em.close();
                    emf.close();
                } finally {
                    tx.commit();
                }
            } catch (Exception e) {
               // handle exceptions from UserTransaction methods
               // ...
            }
        // ...
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T14:25:22.667

尝试首先创建一个查询而不是本机查询，返回一个 Bars 列表。还尝试在您的 EJB 中注释 H2 注入。如果它有效，那么您就知道这是一个 CDI 冲突问题。

# php - 我需要从 jquery ajax 帖子中提取数据并将数组拆分为单独的输出

> ID：15279185
> 
> 赞同：1
> 
> 时间：2013-03-07T18:41:41.923
> 
> 标签：php, ajax, jquery, jquery-mobile

我需要获取数组，而不是仅仅将数据推送到 html div 中——取回 php 变量。

我的 $.ajax 帖子----

```
 <script type="text/javascript">
    $(function() {

        $("#login").click(function() {
            var theName = $.trim($("#username").val());

            if(theName.length > 0)
            {
                $.ajax({
                  type: "POST",
                  url: "callajaxdemo.php",
                  data: ({name: theName}),
                  cache: false,
                  dataType: "text",
                  success: onSuccess
                });
            }
        });

        $("#resultLog").ajaxError(function(event, request, settings, exception) {
          $("#resultLog").html("Error Calling: " + settings.url + "<br />HTTP Code: " + request.status);
        });

        function onSuccess(data)
        {
            $("#resultLog").html("Result: " + data);
            //$.mobile.changePage('stats.html', { transition: 'slideup'}, true, true);
        }

    });
</script>' 
```

我的 PHP 文件是 -----

```
<?php
 $username = $_POST['username']; 
 $password = $_POST['password'];

$host = 'https://api.qpme.com/api/accounts/me';

$process = curl_init($host);
curl_setopt($process, CURLOPT_HEADER, 0);
curl_setopt($process, CURLOPT_USERPWD, $username . ":" . $password);
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($process);

$content = json_decode($return);

/*
echo "<pre>";
print_r($content);
echo "</pre>";
*/

print $content->email . "<br>";
print "<h3>" . "Welcome" . ' ' . $content->firstName . ' ' . $content->lastName . '!' . "<h3>";

?>' 
```

目标是取回数组，然后将它的某些部分发布到不同的 jquery 移动页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:45:10.880

您可以将 JSON 数据发送回 AJAX 请求。

将您的数组更改为 JSON，如下所示：

```
echo json_encode($yourData); 
```

要阅读本文，您必须设置脚本以接受 JSON 数据

```
 $.ajax({
          type: "POST",
          url: "callajaxdemo.php",
          data: ({name: theName}),
          cache: false,
          dataType: "json", // <--- Here
          success: onSuccess
        }); 
```

然后您可以将属性作为 JavaScript 对象访问。

```
 function onSuccess(data)
    {
        // access using data.item1
        //           or data.item2 how you prepare your array
    } 
```

# django - 另一个下载 Django 的地方？

> ID：15279187
> 
> 赞同：-5
> 
> 时间：2013-03-07T18:41:47.853
> 
> 标签：django

[除了https://www.djangoproject.com/](https://www.djangoproject.com/)还有其他地方可以下载 Django 吗？该站点似乎已关闭，并且已经关闭了一段时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:45:25.840

虽然该站点为我加载（[https://www.djangoproject.com/download/](https://www.djangoproject.com/download/)），但您也可以通过 pip 安装它：

```
pip install Django 
```

或通过 pip + git 获取最新的开发（！）版本：

```
pip install -e git+https://github.com/django/django.git#egg=django 
```

或直接从 git 获取最新的开发（！）版本：

```
git clone git://github.com/django/django.git 
```

[为了便于移植，请考虑在virtualenv](http://virtualenv.org)中安装 Django 。

# python - 在没有 eval() 的 pymongo 中设置一个 mongo 数据库。也许 setattr()？

> ID：15279191
> 
> 赞同：0
> 
> 时间：2013-03-07T18:41:52.413
> 
> 标签：python, mongodb, eval, pymongo, setattr

我已经习惯在 pymongo 中这样做作为访问特定数据库的一种方式：

```
import pymongo

connection = pymongo.MongoClient()
db = connection.DBNAME 
```

然后查询 db.collectioname.find() 等。但是，我现在希望能够连接到通过变量命名的数据库，并着眼于循环一系列数据库。所以像：

```
dbname = 'DBNAME'

connection = pymongo.MongoClient()
db = eval('connection.' + dbname) 
```

我被教导 eval() 有时是魔鬼，应该避免。如何使用 setattr() 或其他解决方案做到这一点？就像是...

```
dbname = 'DBNAME'

connection = pymongo.MongoClient()
db = setattr(connection, '??name??', dbname) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:45:03.360

你想要[`getattr`](http://docs.python.org/2/library/functions.html#getattr)，没有`setattr`。

```
db = getattr(connection,dbname) 
```

where`setattr`是一种*设置*属性的方法，如果您知道它的名称，`getattr`是一种*获取*属性的方法，如果您知道它的名称。

换句话说，以下是 100% 等效的：

```
db = connection.DBNAME
db = getattr(connection,'DBNAME') 
```

# jquery - 替换内容jquery

> ID：15279192
> 
> 赞同：1
> 
> 时间：2013-03-07T18:41:53.343
> 
> 标签：jquery, each

想换图片

HTML：

```
 <a href="#"><img src="products.jpg"  alt="products" /></a>
    <a href="#"><img src="another-image.jpg"  alt="another-image" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:48:18.367

在更改图像源之前，请使用 jQuery 函数**.data()**保存它们。然后，当您单击它们时，恢复 src 属性。像这样的东西：

```
if ( $(window).width() <= 480 ) {

    $('img').each(function (i, k) {
        $(k).data('src', $(k).attr('src'));
        $(k).attr('src', 'temp_image.jpg');
    });

    $('img').click(function () {
        $(this).attr('src', $(this).data('src'));
    });
} 
```

**参考：** [http ://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:53:21.047

这应该很容易。

首先， .click() 将函数绑定到事件单击并调用对象。你不能（你可以，但它不会像你期望的那样工作）在 .each() 内绑定事件

尝试这样的事情：

```
<div id="banner">
    <a href="#"><img src="banner.jpg" id="realImg1" alt="banner" /></a>
    <a href="#"><img src="another-image.jpg" id="realImg2" alt="another-image" /></a>
</div>

<script>
    $(document).ready(function() {

        var counter = 0;
        var toggle_images = function () {

              if (counter % 2) // if pair, change all pics to "dummy.jpg"
              {
                  $('img').each(function
                  ({
                        $(this).attr('src', 'dummy.jpg');
                  };
              }
              else  // if odd restore its initial src (you can recycle the value in alt)
              {
                   $('img').each
                   ({
                       // get the name from the alt property and append '.jpg'
                       var pic_path = $(this).attr('alt') + '.jpg'
                       $(this).attr('src', pic_path); 
                   });
              }
              counter += 1;

        };

        $('img').click(toggle_images);  // bind the event
</script> 
```

# php - PHP 邮件（）；不通过 ssmtp 发送简单邮件

> ID：15279194
> 
> 赞同：1
> 
> 时间：2013-03-07T18:41:59.147
> 
> 标签：php, linux, nginx, ssmtp

实际上，如果我在 php 控制台 (php -a) 中运行邮件功能，它可以工作，但如果我在 php 脚本上执行它并从 chrome 执行它，它就不起作用。

```
<?php
   mail('test@gmail.com', 'Subject', 'Hello!');
?> 
```

我将 Nginx 与 PHP-FPM 和 ssmtp SMTP 服务器一起使用。

注意：调查，问题出在 Nginx 或 FPM 上，当我从终端运行脚本时它可以工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:42:44.077

您是否在 chrooted 模式下使用 php-fpm？

如果是这样，您的 chrooted 环境可能无法使用许多系统 mail() 要求。

通常，此类 chroot 外部程序问题可以通过在 chroot 路径（设备、库）中创建传真文件系统来解决。但是对于邮件来说，这更难。通常的解决方案不是使用 php 邮件调用，而是使用 smtp 通信（例如使用 localhost）。[此处](http://flexichat.net/chroot-php-fpm)列出了一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:11:21.150

您是否尝试过安装 PEAR 并使用 PEAR 邮件？

# apache - 如何在 Solr 上使用 MoreLikeThis 功能来查找与文本文件相似的文档？

> ID：15279197
> 
> 赞同：1
> 
> 时间：2013-03-07T18:42:11.447
> 
> 标签：apache, solr, lucene, morelikethis

我正在尝试使用 solr 执行以下操作：

从 txt 文件中读取一些文本，然后在文本上使用 MoreLikeThis 来查找与该文本相似的文档。我怎样才能用 Solr 做到这一点？

据我所知，我认为我必须使用内容流，但我不知道如何配置它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:10:30.940

如果您从存储在索引中的文档形成 MoreLikeThisQuery，它会通过从索引中检索 TermVector 信息来形成查询。

由于您愿意找到与您拥有的文本文件类似的文档，因此您必须迭代文本文件并形成 BooleanQuery，使用文本文件中的术语，以您想要匹配的方式。

以上对于 Lucene 是正确的，我相信对于 Solr 也是如此，考虑到 MoreLikeThisQuery 基于 TermVector 信息工作。

# qt - 用vc110为vs2012编译的Qt5库？

> ID：15279198
> 
> 赞同：0
> 
> 时间：2013-03-07T18:42:12.240
> 
> 标签：qt, visual-studio-2012

我想问一下，有没有针对Visual Studio 2012 的qt5 预编译版本。插件运行良好，但我无法启动程序，因为缺少相应的*.libs。

是否有人碰巧有编译版本可供下载或配置来翻译源代码？

问候，托拜厄斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T06:30:18.820

[你可以在这里](http://releases.qt-project.org/digia/5.0.2/)找到一些已经编译好的 vs2012 Qt5 库。但这些仅适用于 x64 平台...

（例如[http://releases.qt-project.org/digia/5.0.2/latest_successful/qt-windows-opensource-5.0.2-msvc2012_64-x64-offline-2013-03-14-456.exe](http://releases.qt-project.org/digia/5.0.2/latest_successful/qt-windows-opensource-5.0.2-msvc2012_64-x64-offline-2013-03-14-456.exe)）

对于 x86，您需要自己编译 Qt，这有点痛苦（特别是如果您需要包含 WebKit）+ 需要很长的编译时间。

编译时，您可以尝试遵循：http: [//qt-project.org/wiki/Building_Qt_5_from_Git](http://qt-project.org/wiki/Building_Qt_5_from_Git)

另外，发现了一些有趣的俄罗斯人博客网站，可能值得一试：http: [//habrahabr.ru/post/168671/](http://habrahabr.ru/post/168671/)

# php - 在 PHP 中保存数组策略

> ID：15279199
> 
> 赞同：1
> 
> 时间：2013-03-07T18:42:14.577
> 
> 标签：php, arrays, performance, file, memory

我最近遇到了这个问题，我必须决定是将数组列表全部保存在一个文件中还是将其保存在单独的文件中。

这是交易。我有一个数组数组，我将简化示例：

```
countries['america'] = array('chile', 'brazil', 'usa');
countries['europe'] = array('france', 'italy', 'spain');
...and so. 
```

因此，我可以将所有数组保存在一个大文件中（将其命名为“世界”），每当我需要查询某个大陆的国家/地区时，我都会将所有文件加载到内存中。

或者，我可以将每个数组保存在不同的文件中（将其命名为“美国”、“欧洲”等），并且每当我必须查询某个大陆的国家/地区时，我都会加载相应的文件。

我知道这一切都取决于大小，所以想象一下世界有 10 个大陆，每个大陆有 2000 个国家。

最好的方法是什么？

注意：这是一个性能问题，我更愿意避免调用数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:43:34.490

您可以将数组存储到内存缓存系统中，例如 xcache 或 memcached。通过这种方式，您的数据将保存在内存中，并且比数据库或基于文件的存储更快、更轻量级。

请参阅[xcache](http://xcache.lighttpd.net/)和[memcached](http://memcached.org/)

# c - 为什么客户端的套接字close（）不导致服务器的select（）返回

> ID：15279202
> 
> 赞同：6
> 
> 时间：2013-03-07T18:42:23.800
> 
> 标签：c, sockets, select, tcp

[我之前问过类似的问题。这是一个更集中的版本。]

什么会导致服务器对 TCP 套接字的 select() 调用始终超时，而不是“看到”客户端的套接字 close()？在客户端，套接字是一个常规的 socket() 创建的阻塞套接字，它成功连接到服务器并成功传输往返事务。在服务器端，套接字通过accept() 调用创建，处于阻塞状态，通过fork() 传递给子服务器进程，被顶级服务器关闭，并被子服务器进程成功使用初始交易。当客户端随后关闭套接字时，子服务器进程的 select() 调用始终超时（1 分钟后），而不是指示套接字上的读取就绪状态。select() 调用仅查找准备就绪的条件：

这是子服务器进程中使用 select() 的简化但逻辑等效的代码：

```
int one_svc_run(
    const int           sock,
    const unsigned      timeout) 
{
    struct timeval      timeo;
    fd_set              fds;

    timeo.tv_sec = timeout;
    timeo.tv_usec = 0;

    FD_ZERO(&fds);
    FD_SET(sock, &fds);

    for (;;) {
        fd_set      readFds = fds;
        int         status = select(sock+1, &readFds, 0, 0, &timeo);

        if (status < 0)
            return errno;

        if (status == 0)
            return ETIMEDOUT;

        /* This code not reached when client closes socket */
        /* The time-out structure, "timeo", is appropriately reset here */
        ...            
    }
    ...
} 
```

这是客户端事件序列的逻辑等价物（未显示错误处理）：

```
struct sockaddr_in *raddr = ...;

int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
(void)bindresvport(sock, (struct sockaddr_in *)0);
connect(sock, (struct sockaddr *)raddr, sizeof(*raddr));
/* Send a message to the server and receive a reply */
(void)close(sock); 
```

fork()、exec() 和 system() 永远不会被调用。代码比这复杂得多，但这是相关调用的顺序。

Nagel 的算法会导致 FIN 数据包在 close() 时不发送吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T18:09:33.130

最可能的解释是，当您认为自己关闭时，您实际上并没有关闭连接的客户端。可能是因为您有一些其他文件描述符引用了未关闭的客户端套接字。

如果您的客户端程序曾经执行过`fork`（或相关的分叉调用，例如`system`or `popen`），则分叉的子程序很可能拥有文件描述符的副本，这会导致您看到的行为。

测试/解决问题的一种方法是让客户端在关闭套接字之前执行显式关闭（2）：

```
shutdown(sock, SHUT_RDWR);
close(sock); 
```

如果这导致问题消失，那么这就是问题所在——您在某处有另一个客户端套接字文件描述符副本。

如果问题是由于孩子获得了套接字，最好的解决方法可能是在创建套接字后立即在套接字上设置 close-on-exec 标志：

```
fcntl(sock, F_SETFD, fcntl(sock, F_GETFD) | FD_CLOEXEC); 
```

或者在某些系统上，将`SOCK_CLOEXEC`标志用于套接字创建调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T22:31:43.863

谜团已揭开。

@nos 在第一条评论中是正确的：这是防火墙问题。不需要客户端的shutdown()；客户端确实关闭了套接字；服务器确实使用了正确的超时时间；并且代码中没有错误。

该问题是由我们的 Linux 虚拟服务器 (LVS) 上的防火墙规则引起的。一个客户端连接到 LVS，连接被传递到几个后端服务器中负载最小的一个。来自客户端的所有数据包都通过 LVS；来自后端服务器的所有数据包都直接发送到客户端。LVS 上的防火墙规则导致来自客户端的 FIN 数据包被丢弃。因此，后端服务器从未看到客户端的 close()。

解决方案是从 LVS 系统的 iptables(8) 规则中删除“-m state --state NEW”选项。这允许将来自客户端的 FIN 数据包转发到后端服务器。[这篇文章](http://archive.linuxvirtualserver.org/html/lvs-users/2008-04/msg00113.html)有更多信息。

感谢所有建议使用wireshark(1) 的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:19:41.403

`select()`Linux 的调用将修改`timeout`参数的值。从手册页：

> 在 Linux 上，select() 修改超时以反映未睡眠的时间量

所以你的`timeo`意志会归零。当它为零`select`时将立即返回（大多数返回值为零）。

以下更改可能会有所帮助：

```
for (;;) {
    struct timeval timo = timeo;
    fd_set      readFds = fds;
    int         status = select(sock+1, &readFds, 0, 0, &timo); 
```

# events - openlayers中的捏缩放事件

> ID：15279204
> 
> 赞同：0
> 
> 时间：2013-03-07T18:42:27.353
> 
> 标签：events, gis, openlayers, pinchzoom

我在图像上使用 openlayers 并希望拥有它，这样如果我一直放大并且它稍微偏向一边，它将自动居中。我有以下代码，但它不起作用。它看起来不像在捏时调用'zoomEnd'，但是触发了什么事件？

在 Openayers 中是否有所有可能的事件列表？我在文档中的任何地方都找不到类似的东西..

```
map = new OpenLayers.Map('detailsdiv', {
    projection : 'EPSG:3785',
    units : 'm',
    fractionalZoom : true,
    eventListeners: {
        "zoomend": recenterMap
    },
    maxResolution: Math.pow(2, graphic.numberOfTiers - 1),
    numZoomLevels : graphic.numberOfTiers,
    controls: [
         new OpenLayers.Control.TouchNavigation({
                dragPanOptions: {
                    enableKinetic: true
                }
         })
    ]
}); 
```

===============================

```
function recenterMap(){
    if (!map.centered){
        if (map.getZoom() == 0){
            map.centered = true;
            map.zoomToMaxExtent();
            map.zoomTo(0);
        } else {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:01:20.193

我相信你最好使用 moveend 事件。当拖动、平移或缩放结束时它会被触发……这样会更好。此外，这里是一个事件列表： [http ://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.events](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.events)

您可能还想在您的 centererMap() 函数中使用 map.setCenter()

# c# - 在 C# 中解析对象数组

> ID：15279207
> 
> 赞同：0
> 
> 时间：2013-03-07T18:42:34.383
> 
> 标签：c#, oop, parsing, data-structures, tibco

我有一个对象数组，我想将它传递给一个只接受`DOUBLE`、`NULL`或的`STRING`方法`DATETIME`。因此，当我尝试传入该值时，它会给出一个错误，指出我不能传入任何任意对象，并且必须将其解析为、`DOUBLE`或`NULL`首先。`STRING``DATETIME`

```
foreach (var currRow in dataSet.Tables[0].Rows)
{
    var tuple = Com.Tibco.As.Space.Tuple.Create();

    //here is where i loop through the object array
    for (int i = 0; i < currRow.Values.Length; i++)
    {
        //here is where i try to pass it to the method (which doesn't accept it)
        tuple.Put(dataSet.Tables[0].ColumnNames[i], currRow.Values[i]);
    }

    inSpace_.Put(tuple);
} 
```

![这是对象数组的样子](../Images/4dc2e15bcf87d9081e257df310989eb0.png)

简而言之，我需要一种方法来解析每个对象并将其转换为适当的对象，然后将其放入元组中。

**编辑**：

这是我试图做的，但没有奏效：

```
foreach (var currRow in dataSet.Tables[0].Rows)
{
    var tuple = Com.Tibco.As.Space.Tuple.Create();

    for (int i = 0; i < currRow.Values.Length; i++)
    {
        if (currRow.Values[i] != null)
        {
            if (dataSet.Tables[0].ColumnNames[i].GetType().IsEquivalentTo(typeof(DateTime)))
            {
                DateTime value = DateTime.Parse(dataSet.Tables[0].ColumnNames[i].ToString());
                tuple.Put(dataSet.Tables[0].ColumnNames[i], value);
            }
            else if (dataSet.Tables[0].ColumnNames[i].GetType().IsEquivalentTo(typeof(Double)))
            {
                Double value = Convert.ToDouble(dataSet.Tables[0].ColumnNames[i]);
                tuple.Put(dataSet.Tables[0].ColumnNames[i], value);
            }
            else
            {
                string value = dataSet.Tables[0].ColumnNames[i].ToString();
                tuple.Put(dataSet.Tables[0].ColumnNames[i], value);
            }
        }
    }
    inSpace_.Put(tuple);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:07:08.033

```
foreach (var currRow in dataSet.Tables[0].Rows)
{
    var tuple = Com.Tibco.As.Space.Tuple.Create();

    for (int i = 0; i < currRow.Values.Length; i++)
    {
        var obj = dataSet.Tables[0].ColumnNames[i], currRow.Values[i];
        var value = null;
        value = obj as double;
        if (!validObject(value)) value as string;
        if (!validObject(value)) value as DateTime;
        tuple.Put(dataSet.Tables[0].ColumnNames[i], value);
    }

    inSpace_.Put(tuple);
}

bool validObject(object obj) { return (null != obj); } 
```

更新，根据您的编辑，我会改用开关类型：

```
for (int i = 0; i < currRow.Values.Length; i++)
{
    var type = obj.GetType();
    var obj = dataSet.Tables[0].ColumnNames[i], currRow.Values[i];
    var value = null;
    switch (type)
    {
        case DateTime:
            value = DateTime.Parse(obj);
            break;
        case double:
            value = Convert.ToDouble(obj);
            break;
        case string:
            value = Convert.ToString(obj);
            break;
    }
    tuple.Put(dataSet.Tables[0].ColumnNames[i], value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:07:06.210

如果您在编译时知道类型，请使用`Convert.ToDouble`,`Convert.ToInt32`等。如果您不知道，请使用`Convert.ChangeType`.

# iphone - AFNetworking / AFAmazonS3Client 亚马逊文件上传

> ID：15279208
> 
> 赞同：0
> 
> 时间：2013-03-07T18:42:36.233
> 
> 标签：iphone, ios, afnetworking

尝试使用 AFNetworking / AFAmazonS3Client 将文件上传到 Amazon 时出现以下错误

```
s3Client = [[AFAmazonS3Client alloc] initWithAccessKeyID:@"mykey" secret:@"mysecretkey"];
s3Client.bucket = @"media.mysite.com";

[s3Client postObjectWithFile:video.assetPath destinationPath:@"/media/videos/" parameters:nil progress:

 ^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite){

     DLog(@"%f%% Uploaded", (totalBytesWritten / (totalBytesExpectedToWrite * 1.0f) * 100));
 }

                     success:^(id responseobject){

                         DLog(@"Success");
                         [self deleteAsset:video];

                     }failure:^(NSError* error){

                          DLog(@"Failed %@", error);
                         [self updateVideoAsset:video.assetID key:@"uploadStatus" value:[NSNumber numberWithInt:ESUploadNotStarted]];
                     }]; 
```

此服务器的证书无效。您可能正在连接到伪装成“media.myserver.com.s3.amazonaws.com”的服务器，这可能会使您的机密信息面临风险

如何解决这个问题

谢谢东姑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:30:54.873

适用于 iOS 的 AWS 开发工具包（旧版本）中似乎存在一些可能导致此问题的问题：[https ://forums.aws.amazon.com/message.jspa?messageID=248288](https://forums.aws.amazon.com/message.jspa?messageID=248288)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T08:45:49.337

以防其他人偶然发现：使用其中不带句点的存储桶名称（例如`media-mysite-com`）。这样，亚马逊的通配符 SSL 证书仍然适用，您将避免错误。

参见例如[如何为 Amazon S3 存储桶配置 SSL](https://stackoverflow.com/questions/11201316/how-to-configure-ssl-for-amazon-s3-bucket#comment23030824_11203685)

# c - 使用链表实现的任意索引处的序列插入

> ID：15279210
> 
> 赞同：1
> 
> 时间：2013-03-07T18:42:40.590
> 
> 标签：c, insert, linked-list

我正在尝试在[这里使用 add_to_front 函数实现 sequence_insert_at](http://ideone.com/cCWsF9)

之前的一切

```
typedef struct sequence *Sequence; 
```

是从另一个 c 文件粘贴的。

```
void sequence_insert_at(Sequence s, int pos, int item)
{
    struct node* temp = s->lst;
    for(; pos > 0; --pos)
    {
        temp = temp->rest;
    }
    add_to_front(&temp, item);
    ++s->length;
    if(!temp->rest)
    {
        s->end = temp;
    }
    //s->lst = temp;
} 
```

我不知道为什么我不断收到运行时错误。如果我克隆 s->lst 并遍历克隆，我不会修改指向 s 中节点的指针，但是如果我更改 temp，s->lst 应该有反映的变化，因为节点仍然是链接的。关于如何解决这个问题的任何想法？我尝试在遍历后创建另一个在 temp 之前的节点，然后设置它->rest = temp，但这也失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:41:25.010

可以发现以下错误，但到目前为止只能运行主要功能

`new_sequence`不初始化`Sequence`它创建的任何东西。`lst`访问时未初始化`sequence_insert_at`

```
struct node* temp = s->lst; 
```

这里应该是什么样子

```
Sequence new_sequence()
{
    Sequence s = malloc(sizeof(struct sequence));
    if(!s)
    {
        printf("Out of memory. Can't allocate s\n");
        exit(EXIT_FAILURE);
    }
    s->lst = malloc(sizeof(struct node));
    if(! s->lst) {
        printf("Out of memory. Can't allocate lst\n");
    }
    s->lst->rest = NULL;
    s->length = 0;
    return s;
} 
```

也`s->lst->rest`必须设置为`NULL`，这说明列表中没有更多元素，并且不会`end`过时。

```
struct sequence
{
    struct node* lst;
    int length;
}; 
```

您应该将序列本身传递给您的函数，而不是指向序列中某些内部数据的指针。

```
add_to_front(&temp, item); 
```

您的`sequence_insert_at`函数应该是可以处理任何位置的函数，`add_to_front()`因此更容易调用位置`0`，`add_to_front()`并且您可以在一个函数中完成孔工作，而不是这里一半和那里一半。

```
void sequence_insert_at(Sequence s, int pos, int item)
{
    if(s && pos <= s->length) {
        print_sequence(s);
        struct node *newnode = malloc(sizeof(struct node));
        if (newnode == NULL) {
            printf("ERROR! add_to_front ran out of memory!\n");
            exit(EXIT_FAILURE);
        }
        newnode->first = item;

        struct node* temp = s->lst;
        struct node* prv = NULL;
        for(int i = 0; i < pos; i++) {
            printf("skip %d\n", temp->first);
            prv = temp;
            temp = temp->rest;
        }
        newnode->rest = temp;
        if(pos == 0) {
            printf("insert as first\n");
            s->lst = newnode;
        } else {
            printf("insert before %d\n", temp->first);
            prv->rest = newnode;
        }

        ++s->length;
    }
} 
```

并且`add_to_front`只需要一个语句

```
void add_to_front(Sequence s, int item) {
    sequence_insert_at(s, 0, item);
} 
```

至于在列表的后面插入

```
void add_to_back(Sequence s, int item) {
    sequence_insert_at(s, s->length, item);
} 
```

main函数的一个小测试

```
void print_sequence(Sequence s)
{
    struct node* temp = s->lst;
    for(int i = 0; i < s->length; temp = temp->rest) {
        printf("%d ", temp->first);
        i++;
    }
    printf("\n");
}

int main()
{
    Sequence derp = new_sequence();
    sequence_insert_at(derp, 0, 14);
    add_to_front(derp, 16);
    sequence_insert_at(derp, 0, 17);
    sequence_insert_at(derp, 2, 15);
    add_to_back(derp, 13);
    print_sequence(derp);
    delete_sequence(derp);
    return 0;
} 
```

输出是：

```
17 16 15 14 13 
```

您必须通过其他功能并修复它们。

最后我应该注意，如果没有误导，您选择的变量名称有点令人困惑，我会这样命名它们

```
typedef struct node {
  int data; /* the data that a node holds */
  struct node* next; /* the pointer to the next node */
} Node_t;

typedef struct sequence {
    struct node* head; /* head or first element of the sequence/list */
    int length; /* length is ok but size is better */
} Sequence_t; 
```

# vb.net - VB.net 中的 SMTP BCC 功能

> ID：15279213
> 
> 赞同：1
> 
> 时间：2013-03-07T18:42:50.180
> 
> 标签：vb.net, email, smtp, bcc

我希望在以下代码中添加密件抄送邮件功能。如何更改以下代码以将自动电子邮件发送到多个电子邮件

```
 Dim SMTPServer As New SmtpClient()
    Dim Mail As New MailMessage()
    SMTPServer.Credentials = New Net.NetworkCredential(" ")
    SMTPServer.Port = 587
    SMTPServer.Host = " "

    Mail = New MailMessage
    Mail.From = New MailAddress(" ")

    Mail.To.Add(dr("").ToString)

    Mail.Subject = "Patient Assignment"
    Mail.Body = "   "

    SMTPServer.Send(Mail) 
```

# php - php - 在数组值前面加上键

> ID：15279222
> 
> 赞同：0
> 
> 时间：2013-03-07T18:43:28.997
> 
> 标签：php, arrays

我有一个数组。看起来像这样

```
$choices = array(
array('label' => 'test1','value' => 'test1'),
array('label' => 'test2','value' => 'test2'),
array('label' => 'test3','value' => 'test3'),
) 
```

现在我想在`$choices`数组中添加这个值

```
array('label' => 'All','value' => 'all'), 
```

看起来我不能使用`array_unshift`函数，因为我的数组有键。

有人可以告诉我如何预先设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:47:29.773

您的`$choices`数组只有数字键，因此`array_unshift()`可以完全按照您的意愿行事。

```
$choices = array(
    array('label' => 'test1','value' => 'test1'),
    array('label' => 'test2','value' => 'test2'),
    array('label' => 'test3','value' => 'test3'),
);
echo $choices[0]['label']; // echoes 'test1'

$array_to_add = array('label' => 'All','value' => 'all');
array_unshift($choices, $array_to_add);

/* resulting array would look like this:
$choices = array(
    array('label' => 'All','value' => 'all')
    array('label' => 'test1','value' => 'test1'),
    array('label' => 'test2','value' => 'test2'),
    array('label' => 'test3','value' => 'test3'),
);
*/
echo $choices[0]['label']; // echoes 'All' 
```

# google-apps-script - UserManager.createUser() - 权限错误

> ID：15279226
> 
> 赞同：2
> 
> 时间：2013-03-07T18:43:53.070
> 
> 标签：google-apps-script

UserManager.createUser() 给了我“您没有执行该操作的权限”错误，但我已经能够以超级管理员的身份在同一个应用程序帐户（非付费）下手动创建新的域用户。为什么通过脚本运行它会引发此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:40:55.107

Google Apps 控制面板 > 域设置 > 用户设置 > 选中启用供应 API 的复选框 > 保存您的更改。这需要首先发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:23:07.520

作为对布莱恩回答的补充：

来自[文档](https://developers.google.com/apps-script/class_usermanager?hl=en)： **类 UserManager**

*此类允许管理员在 Google Apps 域中创建、更新、检索和删除用户。要使用此类，您必须首先在您的域上启用 Provisioning API。对于下一代控制面板，通过登录您的管理员帐户启用 API，然后选择域设置和用户设置选项卡以选中启用供应 API 的复选框。如果您的控制面板不是下一代，请通过登录到您的管理员帐户并单击用户和组选项卡来启用 API。然后单击 Settings 子选项卡，选中复选框以启用 Provisioning API 并保存您的更改。*

# java - 从 Java 中更改的 URL 中解析 JSON 数组

> ID：15279229
> 
> 赞同：0
> 
> 时间：2013-03-07T18:44:04.123
> 
> 标签：java, android, arrays, json, url

对于一个学校项目，我正忙着为我的学校编写一个 Android 应用程序，它可以打开学生的日程安排。我将它们全部存储在我的网络服务器上，我可以使用 domain.com/schedule.php?lln= 打开它们，它会以 JSON 格式为我打开时间表。我在下面添加了我的。到目前为止，一切顺利。

现在我正在编写应用程序本身，我遇到了我的知识极限。我正在尝试将 JSON 下载并反序列化以用作应用程序中的字符串来填充一些 Textview。我在这里查看了如何从 url 导入数组，但没有什么能真正帮助我。我一直在搞乱谷歌的 GSON，但也没有运气。有什么建议么？

```
{"info":{"niveau": "H5","naam": "Sven Boekelder","lln": "15518","klas": "H5F"},"schedule": [["IN LKH H5.IN1 447 ","ZA H5F ","EN TOO H5F 424 ","SK VEB H5.SK2 411 ","BI ROD H5.BI2 427 ","NA BMF H5.NA2 425 ","LO SCL H5F T56 ","LO SCL H5F T56 ","-"],["M VEB H5F 426 ","BI ROD H5.BI2 427 ","SK VEB H5.SK2 413 ","WB WLH H5.WB1 421 ","NE VRH H5F 404 ","EN TOO H5F 424 ","-","-","-"],["ZB H5F ","NE VRH H5F 404 ","-","IN LKH H5.IN1 453 ","NA BMF H5.NA2 409 ","SK VEB H5.SK2 410 ","-","WB WLH H5.WB1 422 ","-"],["-","EN TOO H5F 424 ","NA BMF H5.NA2 409 ","WB WLH H5.WB1 421 ","-","BI ROD H5.BI2 427 ","-","-","-"],["NE VRH H5F 404 ","-","IN LKH H5.IN1 447 ","-","-","-","-","-","-"]]} 
```

我对Android开发很陌生，如此多的解释将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:00:22.400

您应该构建描述您的响应的数据模型。我看到 2 个类：`Response`和`Info`. 信息类

```
class Info {
    private String niveau;
    private String naam;
    private int lln;
    private String klas;

    public String getNiveau() {
        return niveau;
    }

    public void setNiveau(String niveau) {
        this.niveau = niveau;
    }

    public String getNaam() {
        return naam;
    }

    public void setNaam(String naam) {
        this.naam = naam;
    }

    public int getLln() {
        return lln;
    }

    public void setLln(int lln) {
        this.lln = lln;
    }

    public String getKlas() {
        return klas;
    }

    public void setKlas(String klas) {
        this.klas = klas;
    }

    @Override
    public String toString() {
        return "Info [niveau=" + niveau + ", naam=" + naam + ", lln=" + lln
                + ", klas=" + klas + "]";
    }
} 
```

响应类：

```
class Response {
    private Info info;
    private String[][] schedule;
public Info getInfo() {
    return info;
}

public void setInfo(Info info) {
    this.info = info;
}

public String[][] getSchedule() {
    return schedule;
}

public void setSchedule(String[][] schedule) {
    this.schedule = schedule;
}

@Override
public String toString() {
    StringBuilder builder = new StringBuilder();
    builder.append("Response [info=");
    builder.append(info).append(", schedule=");
    for (String[] array : schedule) {
        builder.append(Arrays.toString(array));
    }
    builder.append("]");
    return builder.toString();
} 
```

}

现在，主要方法可能如下所示：

```
Gson gson = new GsonBuilder().serializeNulls().create();
Response res = gson.fromJson(response, Response.class);
System.out.println(res); 
```

该程序打印：

```
Response [info=Info [niveau=H5, naam=Sven Boekelder, lln=15518, klas=H5F], schedule=[IN LKH H5.IN1 447 , ZA H5F , EN TOO H5F 424 , SK VEB H5.SK2 411 , BI ROD H5.BI2 427 , NA BMF H5.NA2 425 , LO SCL H5F T56 , LO SCL H5F T56 , -][M VEB H5F 426 , BI ROD H5.BI2 427 , SK VEB H5.SK2 413 , WB WLH H5.WB1 421 , NE VRH H5F 404 , EN TOO H5F 424 , -, -, -][ZB H5F , NE VRH H5F 404 , -, IN LKH H5.IN1 453 , NA BMF H5.NA2 409 , SK VEB H5.SK2 410 , -, WB WLH H5.WB1 422 , -][-, EN TOO H5F 424 , NA BMF H5.NA2 409 , WB WLH H5.WB1 421 , -, BI ROD H5.BI2 427 , -, -, -][NE VRH H5F 404 , -, IN LKH H5.IN1 447 , -, -, -, -, -, -]] 
```

# java - log4J 输出中跳过和重复的行号

> ID：15279230
> 
> 赞同：0
> 
> 时间：2013-03-07T18:44:21.253
> 
> 标签：java, logging, log4j

我已经设置了 log4j，但我注意到这样的奇怪输出（我希望看到 0 1 2 3 4 作为行号） -

```
0    [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.Genome  - 0011110101101010110110111011101111110001010001110011100011110111011001011100100100101001100110100000011100010100
2    [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.Genome  - 112
2    [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.Genome  - 0010100111111010110110010001000100000110110111111011011100101010011100011001111111111011110011001111010100100101
3    [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.Genome  - 112
3    [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.Genome  - 0101101000001010000001101000101001001000111111111110001010011001111011010101011010010000111000100011110010101100
3    [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.Genome  - 112 
```

谁能解释为什么会发生这种情况？log4j.properties #定义控制台追加器 log4j.appender.consoleAppender = org.apache.log4j.ConsoleAppender

```
# now define the layout for the appender
log4j.appender.consoleAppender.layout = org.apache.log4j.PatternLayout
log4j.appender.consoleAppender.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# now map our console appender as a root logger, means all log messages will go to this appender
log4j.rootLogger = DEBUG, consoleAppender 
```

基因组类

```
package org.dnsdojo.ryanhost.GA.MuPlusOne;

import java.util.Random;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class Genome
{
private static Logger logger = Logger.getLogger(Genome.class);
byte[] genome;
Random rng = new Random();
String genomeString = "";

public Genome ( int stringLength, int motorSet )
{
    PropertyConfigurator.configure("log4j.properties");
    genome = new byte[ stringLength * 7 * motorSet]; // stringLength depends on how many bytes you wish to have. For the arpibot this is dependant on the number of sensor readings taken
    for (int i = 0; i < genome.length; i++)
    {
        genome[i] = (byte)rng.nextInt(2);
        genomeString += genome[i];
    }
    logger.debug(genomeString);
    logger.debug(genomeString.length());
}

public byte[] getGenome()
{
    return genome;
}

public byte[] mutate (float mutationStep)
{
    return genome;                                  //placeholder
}

} 
```

司机班

```
package org.dnsdojo.ryanhost.GA.MuPlusOne;

import java.util.ArrayList;
public class Driver 
{
int populationSize = 0; //mu
int evaluationTime = 0; //tau measured in seconds
double reevaluationRate, mutationStep = 0;//rho = reevaluationRate, sigma = mutationStep
int numberOfSensors, numberOfMotors = 0;

ArrayList<Genome> population = new ArrayList<Genome>();

public Driver (int populationSize, int evaluationTime, double reevaluationRate, double mutationStep, int numberOfSensors, int numberOfMotors)
{
    this.populationSize = populationSize;
    this.evaluationTime = evaluationTime;
    this.reevaluationRate = reevaluationRate;
    this.mutationStep = mutationStep;
    this.numberOfSensors = numberOfSensors;
    this.numberOfMotors = numberOfMotors;

    for(int i = 0; i < populationSize; i++)
    {
        population.add (new Genome (numberOfSensors , numberOfMotors) );
    }
}

public static void main( String[] args)
{
    Driver gADriver = new Driver(100, 60 , 0.2, 0.2, 8, 2);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:51:27.597

此[Javadoc 页面](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)为 Pattern 说明了以下内容`%-4r`

> r - 用于输出从构建布局到创建日志事件所经过的毫秒数。

`%-4`就是说使用 4 个空格（填充）来写入`r`. 所以我猜你的日志一个接一个地来的太快了，它们之间只有 1-2 毫秒的间隔（你的日志语句中的第一个数字）。我们还可以推断，当您实际开始记录事物时，Pattern 布局是延迟构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:55:25.860

这与记录器无关（我使用 log4j 已经 15 年了）。它似乎正在准确记录发送给它的字符串。再次查看代码并与预期的内容进行比较。for的`Random`生成器`nextInt(2)`正在寻找 0-1 的值...因此记录了 0 和 1 的字符串。

```
for (int i = 0; i < genome.length; i++)
{
    genome[i] = (byte)rng.nextInt(2);
    genomeString += genome[i];
}
logger.debug(genomeString);
logger.debug(genomeString.length()); 
```

# regex - Perl 正则表达式多重匹配

> ID：15279235
> 
> 赞同：5
> 
> 时间：2013-03-07T18:44:35.453
> 
> 标签：regex, perl, backreference

我正在寻找一个行为如下的正则表达式：

> 输入：“你好世界。”
> 
> 输出：he, el, ll, lo, wo, or, rl, ld

我的想法类似于

```
 while($string =~ m/(([a-zA-Z])([a-zA-Z]))/g) {
        print "$1-$2 ";
    } 
```

但这有点不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T18:54:09.617

这很棘手。您必须捕获它，保存它，然后强制回溯。

你可以这样做：

```
use v5.10;   # first release with backtracking control verbs

my $string = "hello, world!";
my @saved;

my $pat = qr{
    ( \pL {2} )
    (?{ push @saved, $^N })
    (*FAIL)
}x;

@saved = ();
$string =~ $pat;
my $count = @saved;
printf "Found %d matches: %s.\n", $count, join(", " => @saved); 
```

产生这个：

```
Found 8 matches: he, el, ll, lo, wo, or, rl, ld. 
```

如果你没有 v5.10，或者你头疼，你可以使用这个：

```
my $string = "hello, world!";
my @pairs = $string =~ m{
  # we can only match at positions where the
  # following sneak-ahead assertion is true:
    (?=                 # zero-width look ahead
        (               # begin stealth capture
            \pL {2}     #       save off two letters
        )               # end stealth capture
    )
  # succeed after matching nothing, force reset
}xg;

my $count = @pairs;
printf "Found %d matches: %s.\n", $count, join(", " => @pairs); 
```

这会产生与以前相同的输出。

但你可能还是会头疼。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T19:13:26.790

无需“强制回溯”！

```
push @pairs, "$1$2" while /([a-zA-Z])(?=([a-zA-Z]))/g; 
```

尽管您可能想要匹配任何字母而不是您指定的有限集。

```
push @pairs, "$1$2" while /(\pL)(?=(\pL))/g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:43:46.047

还有另一种方法。不使用任何正则表达式魔法，它确实使用了嵌套`map`的 s 但如果需要，这可以很容易地转换为`for`循环。

```
#!/usr/bin/env perl

use strict;
use warnings;

my $in = "hello world.";
my @words = $in =~ /(\b\pL+\b)/g;

my @out = map {
  my @chars = split '';
  map { $chars[$_] . $chars[$_+1] } ( 0 .. $#chars - 1 );
} @words;

print join ',', @out;
print "\n"; 
```

同样，对我来说，这比一个奇怪的正则表达式 YMMV 更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:58:27.127

我会`group`在前瞻中使用捕获的..

```
(?=([a-zA-Z]{2}))
    ------------
         |->group 1 captures two English letters 
```

[在这里](http://regexhero.net/tester/)试试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T19:23:06.633

您可以通过查找字母并使用`pos`函数来利用捕获的位置、`\G`在另一个正则表达式中引用它以及`substr`从字符串中读取一些字符来做到这一点。

```
use v5.10;
use strict;
use warnings;

my $letter_re = qr/[a-zA-Z]/;

my $string = "hello world.";
while( $string =~ m{ ($letter_re) }gx ) {
    # Skip it if the next character isn't a letter
    # \G will match where the last m//g left off.
    # It's pos() in a regex.
    next unless $string =~ /\G $letter_re /x;

    # pos() is still where the last m//g left off.
    # Use substr to print the character before it (the one we matched)
    # and the next one, which we know to be a letter.
    say substr $string, pos($string)-1, 2;
} 
```

您可以使用零宽度肯定断言将“检查下一个字母”逻辑放入原始正则表达式中，`(?=pattern)`. 零宽度意味着它不会被捕获并且不会推进`m//g`正则表达式的位置。这有点紧凑，但零宽度断言可能会变得棘手。

```
while( $string =~ m{ ($letter_re) (?=$letter_re) }gx ) {
    # pos() is still where the last m//g left off.
    # Use substr to print the character before it (the one we matched)
    # and the next one, which we know to be a letter.
    say substr $string, pos($string)-1, 2;
} 
```

**更新**：我最初试图捕捉比赛和前瞻，`m{ ($letter_re (?=$letter_re)) }gx`但没有奏效。前瞻是零宽度并且滑出匹配。其他人的答案表明，如果您在前瞻中放置第二次捕获，那么它可能会崩溃到...

```
say "$1$2" while $string =~ m{ ($letter_re) (?=($letter_re)) }gx; 
```

我将所有答案留给 TMTOWTDI，特别是如果您不是正则表达式大师。

# python - 从模块导入反转 *

> ID：15279236
> 
> 赞同：10
> 
> 时间：2013-03-07T18:44:44.343
> 
> 标签：python, namespaces, python-import

我有一个代码库，我正在清理以前开发人员的一些混乱决定。他经常做这样的事情：

```
from scipy import *
from numpy import * 
```

...这当然会污染名称空间，并且很难分辨模块中的属性最初来自何处。

有没有办法让 Python 为我分析和解决这个问题？有没有人为此做了一个实用程序？如果没有，如何制作这样的实用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:47:52.543

是的。删除导入并在模块上运行 linter。

我建议使用[`flake8`](https://pypi.python.org/pypi/flake8)，尽管它也可能会产生很多关于样式错误的噪音。

仅仅删除导入并尝试运行代码可能是不够的，因为在您使用正确的输入运行正确的代码行之前不会引发许多名称错误。相反，linter 将通过解析来分析代码，并将检测潜在`NameError`的 s 而无需运行代码。

这一切都假定没有可靠的单元测试，或者测试没有提供足够的覆盖率。

在这种情况下，如果*有多* `from module import *`行，它会变得更加痛苦，因为您需要为每个缺失的名称找出哪个模块提供了该名称。这将需要手动工作，但您可以简单地在 python 解释器中导入模块并测试是否在该模块上定义了缺少的名称：

```
>>> import scipy, numpy
>>> 'loadtxt' in dir(numpy)
True 
```

您确实需要考虑到在这种特定情况下，`numpy`和`scipy`模块之间存在重叠；对于两个模块中定义的任何名称，最后导入的模块获胜。

请注意，保留*任何* `from module import *`行意味着 linter 将无法检测到哪些名称可能引发 NameErrors！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:58:00.670

我认为 PurityLake 和 Martijn Pieters 的辅助手动解决方案可能是最好的方法。但是以编程方式执行此操作并非*不可能。*

首先，您需要获取模块字典中可能在代码中使用的所有名称的列表。我假设您的代码没有直接调用任何**dunder**函数等。

然后，您需要遍历它们，`inspect.getmodule()`用于找出每个对象最初定义在哪个模块中。我假设您没有使用任何被双重化的东西`from foo import *`。列出在`numpy`和`scipy`模块中定义的所有名称。

现在您可以获取该输出并将每个替换`foo`为`numpy.foo`.

所以，把它放在一起，像这样：

```
for modname in sys.argv[1:]:
    with open(modname + '.py') as srcfile:
        src = srcfile.read()
    src = src.replace('from numpy import *', 'import numpy')
    src = src.replace('from scipy import *', 'import scipy')
    mod = __import__(modname)
    for name in dir(mod):
        original_mod = inspect.getmodule(getattr(mod, name))
        if original_mod.__name__ == 'numpy':
            src = src.replace(name, 'numpy.'+name)
        elif original_mod.__name__ == 'scipy':
            src = src.replace(name, 'scipy.'+name)
    with open(modname + '.tmp') as dstfile:
        dstfile.write(src)
    os.rename(modname + '.py', modname + '.bak')
    os.rename(modname + '.tmp', modname + '.py') 
```

如果其中任何一个假设是错误的，那么更改代码并不难。此外，您可能希望使用`tempfile.NamedTemporaryFile`和其他改进来确保您不会意外地用临时文件覆盖内容。（我只是不想处理跨平台编写东西的麻烦；如果您不在 Windows 上运行，这很容易。）显然，添加一些错误处理，可能还有一些报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T18:31:39.770

我现在制作了一个小实用程序来执行此操作，我称之为“dedazzler”。它将找到“来自模块导入 *”的行，然后展开目标模块的“目录”，替换这些行。

运行它之后，你仍然需要运行一个 linter。这是代码中特别有趣的部分：

```
import re

star_match = re.compile('from\s(?P<module>[\.\w]+)\simport\s[*]')
now = str(time.time())
error = lambda x: sys.stderr.write(x + '\n')

def replace_imports(lines):
    """
    Iterates through lines in a Python file, looks for 'from module import *'
    statements, and attempts to fix them.
    """
    for line_num, line in enumerate(lines):
        match = star_match.search(line)
        if match:
            newline = import_generator(match.groupdict()['module'])
            if newline:
                lines[line_num] = newline
    return lines

def import_generator(modulename):
    try:
        prop_depth = modulename.split('.')[1:]
        namespace = __import__(modulename)
        for prop in prop_depth:
            namespace = getattr(namespace, prop)
    except ImportError:
        error("Couldn't import module '%s'!" % modulename)
        return
    directory = [ name for name in dir(namespace) if not name.startswith('_') ]
    return "from %s import %s\n"% (modulename, ', '.join(directory)) 
```

我在这里以更有用的独立实用程序形式维护它：

[https://github.com/USGM/dedazzler/](https://github.com/USGM/dedazzler/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T18:47:46.260

好的，这就是我认为你可以做的，打破程序。删除导入并注意所犯的错误。然后只导入你想要的模块，这可能需要一段时间，但这是我知道的唯一方法，如果有人知道有帮助的工具，我会很高兴

编辑：啊，是的，一个短绒，我没有想到这一点。

# html - HTML 中的大括号

> ID：15279240
> 
> 赞同：3
> 
> 时间：2013-03-07T18:44:59.617
> 
> 标签：html

我偶然发现了这段代码：

```
<a href="#" class="text1"{text2}>...</a> 
```

做什么的`{text2}`？稍后，此 HTML 将替换为：

```
<a href="#" class="text1" {text2} style>...</a> 
```

有没有办法可以`text2`用 jQuery 检索值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:46:38.037

它在 HTML 中什么都不做。它实际上是无效标记。看起来您可能有一个模板系统，可以在它呈现给浏览器之前找到并替换它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:49:12.563

在某些情况下，输入了代码，因此脚本实际上可以轻松识别行。或者在某些情况下，可以作为数据库在提取数据后检索和存储数据的指标。

或者它可能是无效的标记，如果这个人知道他们在做什么是值得怀疑的。

但如果没有任何其他信息或变量，就很难说。但最常见的是访问 Php、Javascript 甚至 C# 中的脚本。因为他们可以解析 HTML 文档并对其进行操作。 *如果使用了这些大括号，并且不正确，则会导致解析错误。*

希望那种澄清它。

* * *

**更新：**

是的，jQuery 可以找到它。它是 Javascript 的一种形式。您可以实现以下内容：

```
$(function() {
    var foundString = $('*:contains("{text1}")');
}); 
```

有大量数据可以更详细地解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-23T17:17:07.447

我知道在 jinja2（一个 python 模板系统）中，括号包含模板引擎的命令，或者是：

```
Hello, {{varName}} 
```

或者：

```
<ol>
{%for l in varList%}
<li>{{l}}</li>
{%endfor%}
</ol> 
```

那是在 jinja 中，但是 jinja 的语法与 django 模板相似，许多其他模板引擎也可能复制 django 的语法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-18T04:12:32.850

它在[Angular js](https://www.w3schools.com/angular/angular_intro.asp)中使用，被称为表达式`{{expression}}`

> AngularJS 是一个 JavaScript 框架。它可以添加到带有标签的 HTML 页面中。
> 
> **AngularJS 使用Directives**扩展 HTML 属性，并使用**Expressions**将数据绑定到 HTML 。

# angularjs - 如何在 AngularJS 中动态添加指令？

> ID：15279244
> 
> 赞同：213
> 
> 时间：2013-03-07T18:45:04.220
> 
> 标签：angularjs, angularjs-directive, dynamically-generated

我对我正在做的事情有一个非常精简的版本，可以解决问题。

我有一个简单的`directive`. 每当您单击一个元素时，它都会添加另一个元素。但是，它需要先编译才能正确呈现。

我的研究使我`$compile`. 但是所有的例子都使用了一个复杂的结构，我真的不知道如何在这里应用。

小提琴在这里：http: [//jsfiddle.net/paulocoelho/fBjbP/1/](http://jsfiddle.net/paulocoelho/fBjbP/1/)

JS在这里：

```
var module = angular.module('testApp', [])
    .directive('test', function () {
    return {
        restrict: 'E',
        template: '<p>{{text}}</p>',
        scope: {
            text: '@text'
        },
        link:function(scope,element){
            $( element ).click(function(){
                // TODO: This does not do what it's supposed to :(
                $(this).parent().append("<test text='n'></test>");
            });
        }
    };
}); 
```

Josh David Miller 的解决方案：http: [//jsfiddle.net/paulocoelho/fBjbP/2/](http://jsfiddle.net/paulocoelho/fBjbP/2/)

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2013-03-07T18:51:22.860

你有很多毫无意义的 jQuery，但在这种情况下$compile 服务实际上*非常简单：*

```
.directive( 'test', function ( $compile ) {
  return {
    restrict: 'E',
    scope: { text: '@' },
    template: '<p ng-click="add()">{{text}}</p>',
    controller: function ( $scope, $element ) {
      $scope.add = function () {
        var el = $compile( "<test text='n'></test>" )( $scope );
        $element.parent().append( el );
      };
    }
  };
}); 
```

You'll notice I refactored your directive too in order to follow some best practices. Let me know if you have questions about any of those.

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-10-02T02:33:43.507

In addition to perfect Riceball LEE's example of adding a new **element-directive**

```
newElement = $compile("<div my-directive='n'></div>")($scope)
$element.parent().append(newElement) 
```

Adding a new **attribute-directive** to existed element could be done using this way:

Let's say you wish to add on-the-fly `my-directive` to the `span` element.

```
template: '<div>Hello <span>World</span></div>'

link: ($scope, $element, $attrs) ->

  span = $element.find('span').clone()
  span.attr('my-directive', 'my-directive')
  span = $compile(span)($scope)
  $element.find('span').replaceWith span 
```

Hope that helps.

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-08-14T14:19:50.170

Dynamically adding directives on angularjs has two styles:

## Add an angularjs directive into another directive

*   inserting a new element(directive)
*   inserting a new attribute(directive) to element

### inserting a new element(directive)

it's simple. And u can use in "link" or "compile".

```
var newElement = $compile( "<div my-diretive='n'></div>" )( $scope );
$element.parent().append( newElement ); 
```

### inserting a new attribute to element

It's hard, and make me headache within two days.

Using "$compile" will raise critical recursive error!! Maybe it should ignore the current directive when re-compiling element.

```
$element.$set("myDirective", "expression");
var newElement = $compile( $element )( $scope ); // critical recursive error.
var newElement = angular.copy(element);          // the same error too.
$element.replaceWith( newElement ); 
```

So, I have to find a way to call the directive "link" function. It's very hard to get the useful methods which are hidden deeply inside closures.

```
compile: (tElement, tAttrs, transclude) ->
   links = []
   myDirectiveLink = $injector.get('myDirective'+'Directive')[0] #this is the way
   links.push myDirectiveLink
   myAnotherDirectiveLink = ($scope, $element, attrs) ->
       #....
   links.push myAnotherDirectiveLink
   return (scope, elm, attrs, ctrl) ->
       for link in links
           link(scope, elm, attrs, ctrl) 
```

Now, It's work well.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-09-30T22:19:42.133

```
function addAttr(scope, el, attrName, attrValue) {
  el.replaceWith($compile(el.clone().attr(attrName, attrValue))(scope));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-15T21:33:24.123

Josh David Miller is correct.

PCoelho, In case you're wondering what `$compile` does behind the scenes and how HTML output is generated from the directive, please take a look below

The `$compile` service compiles the fragment of HTML(`"< test text='n' >< / test >"`) that includes the directive("test" as an element) and produces a function. This function can then be executed with a scope to get the "HTML output from a directive".

```
var compileFunction = $compile("< test text='n' > < / test >");
var HtmlOutputFromDirective = compileFunction($scope); 
```

More details with full code samples here: [http://www.learn-angularjs-apps-projects.com/AngularJs/dynamically-add-directives-in-angularjs](http://www.learn-angularjs-apps-projects.com/AngularJs/dynamically-add-directives-in-angularjs)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-06-25T06:36:49.297

The accepted answer by Josh David Miller works great if you are trying to dynamically add a directive that uses an inline `template`. However if your directive takes advantage of `templateUrl` his answer will not work. Here is what worked for me:

```
.directive('helperModal', [, "$compile", "$timeout", function ($compile, $timeout) {
    return {
        restrict: 'E',
        replace: true,
        scope: {}, 
        templateUrl: "app/views/modal.html",
        link: function (scope, element, attrs) {
            scope.modalTitle = attrs.modaltitle;
            scope.modalContentDirective = attrs.modalcontentdirective;
        },
        controller: function ($scope, $element, $attrs) {
            if ($attrs.modalcontentdirective != undefined && $attrs.modalcontentdirective != '') {
                var el = $compile($attrs.modalcontentdirective)($scope);
                $timeout(function () {
                    $scope.$digest();
                    $element.find('.modal-body').append(el);
                }, 0);
            }
        }
    }
}]); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-14T17:34:41.337

Inspired from many of the previous answers I have came up with the following "stroman" directive that will replace itself with any other directives.

```
app.directive('stroman', function($compile) {
  return {
    link: function(scope, el, attrName) {
      var newElem = angular.element('<div></div>');
      // Copying all of the attributes
      for (let prop in attrName.$attr) {
        newElem.attr(prop, attrName[prop]);
      }
      el.replaceWith($compile(newElem)(scope)); // Replacing
    }
  };
}); 
```

**Important:** Register the directives that you want to use with `restrict: 'C'`. Like this:

```
app.directive('my-directive', function() {
  return {
    restrict: 'C',
    template: 'Hi there',
  };
}); 
```

You can use like this:

```
<stroman class="my-directive other-class" randomProperty="8"></stroman> 
```

To get this:

```
<div class="my-directive other-class" randomProperty="8">Hi there</div> 
```

**Protip.** If you don't want to use directives based on classes then you can change `'<div></div>'` to something what you like. E.g. have a fixed attribute that contains the name of the desired directive instead of `class`.

# api - 将 API 读入不同的单元格 Matlab

> ID：15279246
> 
> 赞同：0
> 
> 时间：2013-03-07T18:45:11.217
> 
> 标签：api, matlab

我正在使用一个 API（可以在[此处](http://www3.septa.org/hackathon/locations/get_locations.php?lon=-75.1903105&lat=39.9601978&type=rail_stations&radius=5)找到示例数据的链接）我现在拥有它的方式，使用 urlread，它将所有数据读入一个单元格。如何让它读入多个单元格？最终目标是提取 location_name，所以如果你能帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:19:25.023

示例数据以 JSON 形式提供，因此您需要一个 JSON 解析器，例如[这个](http://www.mathworks.co.uk/matlabcentral/fileexchange/20565-json-parser/content/parse_json.m).

你像这样使用它：

```
>> url      = 'http://www3.septa.org/hackathon/locations/get_locations.php?lon=-75.1903105&lat=39.9601978&type=rail_stations&radius=5';
>> contents = urlread(url);
>> data     = parse_json(contents);
>> data     = data{1};        # For some reason it returns a cell array with one element...
>> data{1}
ans = 
      location_id: 90004
    location_name: '30th Street Station'
     location_lat: '39.9566667'
     location_lon: '-75.1816667'
         distance: '0.5184'
    location_type: 'rail_stations'
    location_data: [1x1 struct] 
```

# android - 使用 BitmapFont 绘图不显示任何内容

> ID：15279250
> 
> 赞同：1
> 
> 时间：2013-03-07T18:45:27.523
> 
> 标签：android, text, fonts, libgdx, bitmap-fonts

我做错了什么？

```
public class Memoration implements ApplicationListener {
private OrthographicCamera camera;
public SpriteBatch batch;
public static float w, h;
public BitmapFont clickBitmapFont;

@Override
public void create() {
    camera = new OrthographicCamera(1, h / w);
    batch = new SpriteBatch();
    w = Gdx.graphics.getWidth();
    h = Gdx.graphics.getHeight();
    Matrix4 normalProjection = new Matrix4().setToOrtho2D(0, 0, w, h); // acording to http://stackoverflow.com/questions/12895822/how-to-draw-a-bitmapfont-in-libgdx it should work...
    batch.setProjectionMatrix(normalProjection);

    clickBitmapFont = new BitmapFont(Gdx.files.internal("data/font.fnt"),Gdx.files.internal("data/font.png"),false);
    clickBitmapFont.setColor(Color.BLUE);
}

@Override
public void dispose() {
    batch.dispose();
}

@Override
public void render() {
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    batch.setProjectionMatrix(camera.combined);

    batch.begin();
    draw();
    batch.end();
}

    public void draw(){
    clickBitmapFont.draw(batch, "hello StackOverflow", 100, 100);
}
} 
```

为 .fnt 和 .png 使用 BMFont 所以这可能不是问题..

# php - 当字符串以数字开头时mysqli给出错误

> ID：15279251
> 
> 赞同：0
> 
> 时间：2013-03-07T18:45:36.123
> 
> 标签：php, mysqli, int, varchar

我的 php 脚本应该搜索客户端数据库，它运行良好，一切都很好，除非数据库中的客户端名称以数字开头（该列的格式为 Varchar(255)）。

```
if(isset($_GET['search'])) {
    $searchVal = "%" . $_GET['search'] . "%";
} 
```

是我抓取它的方式，我认为值得一提，因为网站另一端的自动完成功能工作得很好，它使用 $_POST 发送数据（我们想使用 $_GET 以便网站访问者可以导航） .

```
 $query = "SELECT DISTINCT clients.client_id,
                              clients.logoFileName,
                              clients.clientName,
                              clients.streetAddress,
                              clients.city,
                              clients.state,
                              clients.zip,
                              clients.latitude,
                              clients.longitude

                         FROM clients

                   INNER JOIN clientData

                           ON clients.client_id = clientData.client_id

                        WHERE clients.clientName LIKE ? AND clients.city LIKE ?

                           OR clientData.clientCategory LIKE ? AND clients.city LIKE ?

                           OR clientData.term LIKE ? AND clients.city LIKE ?";

    //setup
    $stmt->prepare($query);
    $stmt->bind_param('ssssss',$searchVal,$cityVal,$searchVal,$cityVal,$searchVal,$cityVal); 
```

所以这个搜索对于 99% 的搜索运行得很好（我们列出了大约 1000 个客户，这仅适用于以数字开头的 10 个）。

因此，如果我要搜索“UPS Store 1840”，我可以搜索“UPS”、“Store”或“1840”，它会返回它们。但如果我搜索“14 Candles”，“14”或“Candles”都不会返回任何结果。

如果我在 PHPMyAdmin 中搜索相同的信息，则会发生相同的结果（编辑：嗯，它给出了“返回 0 行”，而不是完全错误）。但是，就像我说的那样，使用 $_POST 的查询工作得很好，并且使用了字面上相同的代码（访问类似的搜索，但提取的数据更少并且有一个限制）。

它肯定是在 MYSQL 中弹出一个错误，所以它与正在发送的信息有关，这让我认为通过 $_POST 发送的格式与 $_GET 不同。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:34:55.460

好吧，对于任何偶然发现这一点的人，我想我发现了错误。无论出于何种原因，进行 INNER JOIN 都会把事情搞砸。切换到 LEFT JOIN 和 bam，就像一个魅力。添加了更多要访问的数据，它使用 INNER 从四个表中提取，然后是 LEFT LEFT，所以这与 INNER JOIN 跨一堆表有关。SELECT DISTINCT 必须保留，否则我会得到十亿个结果（很想用它来为权重搜索添加“相关性”选项）。

另外，我有一个理论认为它与 latin1_swedish_ci 或类似的排序规则有关，所以我通过并将所有表更改为 utf8_unicode_ci。所以这两件事之一...

# c# - 选项“应用”按钮

> ID：15279252
> 
> 赞同：0
> 
> 时间：2013-03-07T18:45:37.490
> 
> 标签：c#

我试图在我的选项表单中添加一个应用按钮，但它不起作用。

这是我尝试过的：

在`frm_Main`

```
frm_Options Options = new frm_Options();
Options.btn_Apply.Click += new System.EventHandler(this.btn_Apply_Click); 
```

之后...

```
Options.Show(); 
```

...

```
void btn_Apply_Click(object sender, EventArgs e)
{
    LoadPreferences();
} 
```

基本上我能想到的唯一方法是`frm_Main`在`frm_Options`. 我的猜测是你不能这样做，还有其他方法还是我尝试这样做的方式？

Edit1：我想在 frm_Main 中执行此操作，因为我希望按钮在按下时调用函数`frm_Main` 并且“不起作用”是指单击“应用”按钮时事件不会触发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:20:53.577

您需要在选项表单中声明您的事件

```
public event EventHandler RefreshOptions; 
```

并在按钮单击事件中引发事件（如果它有订阅者） - 例如

```
 var refreshOptions = RefreshOptions;
        if (refreshOptions != null)
            refreshOptions(this, new EventArgs()); 
```

然后在您的主表单中订阅该事件 -

```
Options options = new Options();
options.RefreshOptions += MainRefresh; 
```

并创建 MainRefresh 事件（或任何你称之为的）

```
 void MainRefresh(object sender, EventArgs e)
 {
     // TODO
  } 
```

# php - 数组空白回显问题

> ID：15279255
> 
> 赞同：0
> 
> 时间：2013-03-07T18:45:44.750
> 
> 标签：php, html, mysql, arrays

嘿，在做一个小项目，但我的代码的特定部分似乎有问题。

第一部分工作精美，并显示产品类别中的产品。 [http://mkiddr.com/phptests/shopping/category.php?id=2](http://mkiddr.com/phptests/shopping/category.php?id=2)

但是，问题似乎在于要显示的类别描述，它是从一个单独的查询派生到它自己的数组中的。我用过

```
echo(mysqli_num_rows($result2)); 
```

这似乎从查询中计算出正确的行数，表明 SQL 运行良好。

我很感激这方面的帮助，我是一个完整的需要，我已经根据我的需要修补和编辑了这个代码（由大学提供）。PS我知道安全方面存在漏洞。

```
<?php
session_start();
include "conn.php";
include "header.php";

if (isset($_GET['id'])){
$CategoryID = $_GET['id'];
$q="SELECT ProductID, ProductName FROM Products WHERE CategoryID=$CategoryID";
$d="SELECT `Desc` FROM ProductCategories WHERE CategoryID=$CategoryID";

$result = mysqli_query($_SESSION['conn'],$q);
$result2 = mysqli_query($_SESSION['conn'],$d) or die(mysql_error());

echo "<div>";
while ($row = mysqli_fetch_row($result)){
    echo "<p><a href='product.php?id=".$row[0]."'>".$row[1]."</a></p>";
}
echo "</div>";
mysqli_free_result($result);

//Description
echo(mysqli_num_rows($result2)); //Test SQL

echo "<div>";
while ($myResult = mysqli_fetch_assoc($result2)){
    echo "<p>".$myResult[0]."</p>";
}
echo "</div>";
}
include "footer.php";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:47:45.403

你取错了：

```
while ($myResult = mysqli_fetch_assoc($result2)){
                                ^^^^^--- produces a non-numerically keyed array 
```

你可能想要

```
echo $myResult['name_of_field'] 
```

或者

```
mysqli_fetch_row($result2)
             ^^^--returns a numerically keyed array. 
```

反而。

# android - 如何实现 AES 加密技术

> ID：15279257
> 
> 赞同：0
> 
> 时间：2013-03-07T18:45:48.837
> 
> 标签：android, cryptography, aes

我想在java中为android应用程序实现AES技术，我为此搜索了很多教程，但这并不是超级好的。因此，如果有人知道代码，请在这方面提供帮助，以实现 ANDROID 应用程序的 AES 技术。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:06:55.607

aes ecrpt 类包 com.d.social.network；

```
import java.security.NoSuchAlgorithmException;

    import javax.crypto.Cipher;
    import javax.crypto.NoSuchPaddingException;
    import javax.crypto.spec.IvParameterSpec;
    import javax.crypto.spec.SecretKeySpec;

    public class MCrypt {

        private String iv = "fedcba9876543210";//Dummy iv (CHANGE IT!)
        private IvParameterSpec ivspec;
        private SecretKeySpec keyspec;
        private Cipher cipher;

        private String SecretKey = "0123456789abcdef";//Dummy secretKey (CHANGE IT!)

        public MCrypt()
        {
            ivspec = new IvParameterSpec(iv.getBytes());

            keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

            try {
                cipher = Cipher.getInstance("AES/CBC/NoPadding");
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchPaddingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        public byte[] encrypt(String text) throws Exception
        {
            if(text == null || text.length() == 0)
                throw new Exception("Empty string");

            byte[] encrypted = null;

            try {
                cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

                encrypted = cipher.doFinal(padString(text).getBytes());
            } catch (Exception e)
            {           
                throw new Exception("[encrypt] " + e.getMessage());
            }

            return encrypted;
        }

        public byte[] decrypt(String code) throws Exception
        {
            if(code == null || code.length() == 0)
                throw new Exception("Empty string");

            byte[] decrypted = null;

            try {
                cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                decrypted = cipher.doFinal(hexToBytes(code));
                if( decrypted.length > 0)
                {
                    int trim = 0;
                    for( int i = decrypted.length - 1; i >= 0; i-- ) if( decrypted[i] == 0 ) trim++;

                    if( trim > 0 )
                    {
                        byte[] newArray = new byte[decrypted.length - trim];
                        System.arraycopy(decrypted, 0, newArray, 0, decrypted.length - trim);
                        decrypted = newArray;
                    }
                }
            } catch (Exception e)
            {
                throw new Exception("[decrypt] " + e.getMessage());
            }
            return decrypted;
        }

        public static String bytesToHex(byte[] data)
        {
            if (data==null)
            {
                return null;
            }

            int len = data.length;
            String str = "";
            for (int i=0; i<len; i++) {
                if ((data[i]&0xFF)<16)
                    str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);
                else
                    str = str + java.lang.Integer.toHexString(data[i]&0xFF);
            }
            return str;
        }

        public static byte[] hexToBytes(String str) {
            if (str==null) {
                return null;
            } else if (str.length() < 2) {
                return null;
            } else {
                int len = str.length() / 2;
                byte[] buffer = new byte[len];
                for (int i=0; i<len; i++) {
                    buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
                }
                return buffer;
            }
        }

        private static String padString(String source)
        {
          char paddingChar = ' ';
          int size = 16;
          int x = source.length() % size;
          int padLength = size - x;

          for (int i = 0; i < padLength; i++)
          {
              source += paddingChar;
          }

          return source;
        }
    } 
```

使用它

```
MCrypt mcrypt = new MCrypt();
 MCrypt.bytesToHex( mcrypt.encrypt("hello")); 
```

# html - 计算样式在本地文件上表现得很奇怪

> ID：15279258
> 
> 赞同：0
> 
> 时间：2013-03-07T18:45:54.890
> 
> 标签：html, css, computed-style

我的本地文件上的计算样式有问题。

请看下面的图片。

左边是我的本地文件。右边是服务器上的文件

![在此处输入图像描述](../Images/c28b881dd21d952528dc18b7d7cb7f7d.png)

如果您注意到，在 firebug 中，字体大小会被删除，因为它会在其他地方被覆盖。问题是它不会在其他任何地方被覆盖（你也可以在萤火虫中看到）。

在计算的样式中，您可以看到 font-size 是 16px，而应该是 12.8px。

**注意：**我直接从服务器加载 .css 文件，甚至在我的本地文件中，所以它们使用相同的文件。

有谁知道它为什么会这样？

谢谢你。

# asp.net - 避免在 asp.net 服务器控件中返回空值的任何替代方法

> ID：15279259
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:45:58.620
> 
> 标签：asp.net, properties, null, viewstate, servercontrol

我创建了一个服务器控件和**test.aspx**代码如下所示。

当 dll 被加载时，`RenderContents()`函数被调用。
控制转移到 DataSource 属性，但`ViewState["DataSource"]`返回`null`。

为了避免这种情况，我`ViewState["DataSource"]`使用 -

```
ViewState["DataSource"] = _Pages_dummy; 
```

我的问题是 - 如果我不想使用初始化，是否有任何替代方法`ViewState["DataSource"]` 不会返回`null`值“？

==================================================== =================================

```
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ServerControl2
{
    [DefaultProperty("Text")]
    [ToolboxData("<{0}:ServerControl1 runat=server></{0}:ServerControl1>")]
    public class ServerControl1 : WebControl
    {
        private string[,] _Pages_dummy= { {"1","2","3","4"} ,  {"11","22","33","44"}};

        public ServerControl1() 
        {
           ViewState["DataSource"] = _Pages_dummy; 
           // if user do not initialize viewstate , we use dummmey array .
        }

        public ServerControl1(string[,] pages)        
        {
            ViewState["DataSource"] = pages;  
           // user must initialize viewstate .
        }

        [Bindable(true)]
        [Category("Appearance")]
        [DefaultValue("")]
        [Localizable(true)]
         public  string[,]  DataSource
        {
            get
            {
                return (string[,])ViewState["DataSource"];
            }
            set
            {
                ViewState["DataSource"] = value;
            }
        }    
        [Bindable(true)]
        [Category("Appearance")]
        [DefaultValue("")]
        [Localizable(true)]
        protected override HtmlTextWriterTag TagKey
        {
            get
            {
                return HtmlTextWriterTag.Div;
            }
        }

        protected override void RenderContents(HtmlTextWriter output)
        {
            output.WriteBeginTag("div");

            if (DataSource != null)
            {
                    for (int i = 0; i < DataSource.GetLength(0); i++)
                    {
                       for (int j = 0; j < DataSource.GetLength(1); j++)
                       {

                       }
                   }
            }    
        } // RenderContents     
    }// class
}// namespace 
```

**测试.aspx.cs**

```
 ServerControl2.ServerControl1 n1 = new ServerControl2.ServerControl1();                     
          n1.DataSource[0,0] = "hjkhjk";
          n1.DataSource[0,1] = "jkljk";
          n1.DataSource[0,2] = "hjk";
          n1.DataSource[0,3] = "fjgfjhhgj";   
          Response.Write(n1.DataSource[0,0]);
          Response.Write(n1.DataSource[0,1]);
          Response.Write(n1.DataSource[0,2]);
          Response.Write(n1.DataSource[0,3]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:07:07.710

检查数据源属性中的视图状态是否为空。只要您直接使用该属性而不是 Viewstate("Datasource") ，就可以了。

```
[Bindable(true)]
[Category("Appearance")]
[DefaultValue("")]
[Localizable(true)]
 public  string[,]  DataSource
{
    get
    {
        string[,] value = (string[,])ViewState["DataSource"];
        if (value == null) {
            return __Pages_dummy

        }
        return value ;
    }
    set
    {
        ViewState["DataSource"] = value;
    }
} 
```

# c++ - 使用 fork() c++ 在共享内存中操作字符串

> ID：15279262
> 
> 赞同：0
> 
> 时间：2013-03-07T18:46:27.543
> 
> 标签：c++, string, fork, shared-memory

我`fileContents`在共享内存中有一个字符串 ()，它由 9 行组成：

```
sprintf(shared_memory, fileContents.c_str()); 
```

我想呼吁`fork()`创建与行相同数量的进程。这些过程将操纵每一行。但是，我不知道在调用时从哪里开始`fork()`。我看过的每个示例都只包含返回父进程和子进程的进程 ID，而不是显示进程如何或何时执行某些操作。

任何指导将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:54:17.887

> 我看过的每个示例都只包含返回父进程和子进程的进程 ID

这是不正确的。

父进程会得到子进程的进程id，但是子进程会知道它是子进程，因为`fork()`返回0。

这段代码将分叉 9 次，每个孩子都做特定的工作。

```
for( int line = 1; line <= 9; ++line ) // *cough*
{
    if ( fork() == 0 )
    {
        // Child process.  Handle line, and exit()
    }
} 
```

# custom-controls - 通过命令行添加自定义快捷方式 - Ubuntu 12.10

> ID：15279267
> 
> 赞同：3
> 
> 时间：2013-03-07T18:46:51.480
> 
> 标签：custom-controls, installation, shortcuts, ubuntu-12.10

如何通过命令行添加快捷方式？

如果我们手动操作（键盘 > 自定义快捷方式），它会按预期工作。

当我们想通过命令行执行时（以 bashscript 为例）

```
gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/ name "killscript"
gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/ command "pkill chromium"
gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/ binding "<Primary><Alt>X" 
```

这不起作用.. 当我通过 dconfeditor 检查快捷方式时，我发现它具有正确的名称、绑定和命令设置。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-04T12:41:14.253

您可以随时更改 GUI 中的设置并使用以下命令查看终端中的更改：

```
dconf watch / 
```

您会注意到有 4 个命令，其中 3 个您必须设置名称、绑定和命令，而第 4 个命令将命令添加到数组中：

```
/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/binding
  '<Primary>1'

/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/name
  'test'

/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/command
  'test'

/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings
  ['/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/'] 
```

因此，要将您的 custom0 命令添加到数组中，请使用此命令，然后它就可以工作了

```
gsettings set org.gnome.settings-daemon.plugins.media-keys custom-keybindings "['/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/']" 
```

另外，请查看有关如何操作数组的详细答案
[https://askubuntu.com/a/597414](https://askubuntu.com/a/597414)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:54:30.947

我不确定您将如何制作自定义键盘快捷键（如热键或其他东西），但如果您使用命令行并希望缩短长命令，您可以在 .bashrc 或 .bash_profile 中使用别名文件

```
alias ls='ls -la' 
```

如果它更复杂，您可以制作一个 bash 脚本并使其可执行，如果您想从任何地方访问它，请将它所在的文件夹添加到您的 PATH 变量中

# javascript - 随机化正态分布数字的偏差（javascript）

> ID：15279271
> 
> 赞同：5
> 
> 时间：2013-03-07T18:47:09.910
> 
> 标签：javascript, random, numbers, generator

我在使用 JavaScript 生成正态分布随机数 (mu=0 sigma=1) 时遇到问题。

我已经尝试过 Box-Muller 的方法和 ziggurat，但生成的一系列数字的平均值为 0.0015 或 -0.0018——与零相差甚远！！超过 500,000 个随机生成的数字，这是一个大问题。它应该接近于零，例如 0.000000000001。

我无法弄清楚这是否是方法问题，或者 JavaScript 的内置是否`Math.random()`生成不完全均匀分布的数字。

有人发现过类似的问题吗？

在这里您可以找到 ziggurat 功能：

[http://www.filosophy.org/post/35/normaldistributed_random_values_in_javascript_using_the_ziggurat_algorithm/](http://www.filosophy.org/post/35/normaldistributed_random_values_in_javascript_using_the_ziggurat_algorithm/)

下面是 Box-Muller 的代码：

```
function rnd_bmt() {
    var x = 0, y = 0, rds, c;

    // Get two random numbers from -1 to 1.
    // If the radius is zero or greater than 1, throw them out and pick two
    // new ones. Rejection sampling throws away about 20% of the pairs.
    do {
        x = Math.random()*2-1;
        y = Math.random()*2-1;
        rds = x*x + y*y;
    }
    while (rds === 0 || rds > 1) 

    // This magic is the Box-Muller Transform
    c = Math.sqrt(-2*Math.log(rds)/rds);

    // It always creates a pair of numbers. I'll return them in an array. 
    // This function is quite efficient so don't be afraid to throw one away
    // if you don't need both.
    return [x*c, y*c];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:06:57.427

如果您生成`n`独立的正态随机变量，则[均值的标准差](http://en.wikipedia.org/wiki/Standard_error_of_the_mean#Standard_error_of_the_mean)将为`sigma / sqrt(n)`.

在您的情况下`n = 500000`，`sigma = 1`平均值的标准误差约为`1 / 707 = 0.0014`。给定 0 均值的 95% 置信区间大约是这个或 的两倍 `(-0.0028, 0.0028)`。您的样本均值正好在此范围内。

您对获得`0.000000000001`( `1e-12`) 的期望没有数学基础。要达到该准确度范围，您需要生成 about`10^24`样本。每秒 10,000 个样本仍需要 3 万亿年才能完成……这正是为什么尽可能避免通过模拟计算事物的原因。

另一方面，您的算法似乎确实实现了正确:)

# date - XSL 转换提取最小和最大日期

> ID：15279274
> 
> 赞同：0
> 
> 时间：2013-03-07T18:47:17.210
> 
> 标签：date, xslt, minmax, nodesets

我正在尝试从 XML 源中提取最小和最大日期。我将一个节点集放入我的变量中，我需要节点中的实际日期值，但找不到如何获取它。

源 XML：

```
<Info dataSource="source">
<Detail>
    <StartDate>20121211</StartDate>
    <EndDate>20130112</EndDate>
</Detail>
<Detail>
    <StartDate>20121211</StartDate>
    <EndDate>20130112</EndDate>
</Detail>
<Detail>
    <StartDate>20121211</StartDate>
    <EndDate>20130112</EndDate>
</Detail>
<Detail>
    <StartDate>20121218</StartDate>
    <EndDate>20130114</EndDate>
</Detail>
</Info> 
```

XSL 代码：

```
 <xsl:if test="//StartDate != '' and //EndDate != ''">
    <xsl:variable name ="startDate">
      <xsl:for-each select="//StartDate">
        <xsl:sort select="StartDate" data-type="text" order="ascending"/>
        <xsl:if test="position() = 1">
          <xsl:value-of select="." />
        </xsl:if>
      </xsl:for-each>
    </xsl:variable>
    <xsl:variable name ="endDate">
      <xsl:for-each select="//EndDate">
        <xsl:sort select="EndDate" data-type="text" order="descending"/>
        <xsl:if test="position() = 1">
          <xsl:value-of select="." />
        </xsl:if>
      </xsl:for-each>
    </xsl:variable> 
  </xsl:if> 
```

日期格式正确以支持排序和检索，问题是一旦填充变量我找不到如何访问它们的值：

![](../Images/200fe175cb7ba52259f97178ae27da67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:08:23.997

如果您使用的是 XSLT 2.0，那么您拥有可以为您工作的功能`min`。`max`XSLT 1.0 没有这些功能，但是您可以通过这样做来作弊（对于大型输入可能效率很低，但它确实有效）：

```
<xsl:variable name="startDate" select="string(//StartDate[not(. > //StartDate)])" /> 
```

endDate 也是如此。这里的诀窍是您正在寻找没有其他 StartDate大于*d的 StartDate* *d 。*

# java - 从 600851475143 中找出最大的素数？

> ID：15279278
> 
> 赞同：3
> 
> 时间：2013-03-07T18:47:31.067
> 
> 标签：java, primes, prime-factoring, factors, factorization

我正在尝试从[http://projecteuler.net](http://projecteuler.net)解决问题 3 。但是，当我运行东西程序时，什么都没有打印出来。我究竟做错了什么？问题：数字 600851475143 的最大质因数是多少？

```
public class project_3 
{
    public boolean prime(long x)   // if x is prime return true
    {
        boolean bool = false;

        for(long count=1L; count<x; count++)
        {
            if( x%count==0 )
            {
                bool = false;
                break;
            }
            else { bool = true; }
        }
        return bool;
    }

    public static void main(String[] args)
    {
        long ultprime = 0L;  // largest prime value
        project_3 object = new project_3();

        for(long x=1L; x <= 600851475143L; x++)
        {
            if( object.prime(x)==true )
            {
                ultprime = ((x>ultprime) ? x : ultprime);
            }
        }
        System.out.println(ultprime);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:26:58.150

您的检查功能不仅`prime`总是返回`false`；即使它运行正常，您的主循环也根本不会寻找输入数字的因子，而只是寻找小于或等于它的最大素数。在伪代码中，您的代码相当于：

```
foo(n):
    x := 0 ;
    foreach d from 1 to n step 1:
        if is_prime(d):          // always false
            x := d
    return x                     // always 0

is_prime(d):
    not( d % 1 == 0 )            // always false 
```

但是您根本不需要这里的素数检查功能。下面通过[试除法](http://en.wikipedia.org/wiki/Trial_division)找到一个数的所有因数：

```
factors(n):
    fs := []
    d  := 2
    while ( d <= n/d ):
        if ( n % d == 0 ): { n := n/d ; fs := append(fs,d) }
        else:              { d := d+1 }
    if ( n > 1 ): { fs := append(fs, n) }
    return fs 
```

可分性测试只进行到数字的平方根。发现的每个因子都从被分解的数字中除以，从而进一步减少了运行时间。有问题的数字的因式分解立即运行，只需要 1473 次迭代。

通过构造，所有找到的因子都*保证*是素数（这就是不需要素数检查的原因）。重要的是要按*升序枚举可能的除数，以*实现这一点¹。升序也是最*有效*的，因为任何给定的数字都更有可能具有较小的素因数而不是较大的素因数。枚举*质数*而不是赔率，虽然不是必需的，但如果您有一种有效的方法来获取这些质数来测试除法，那么效率会更高。

增加上述内容以找到*最大*的因素是微不足道的：只需实现`append`为

```
append(fs,d):
    return d 
```

* * *

¹ *因为对于`d`被分解的原始数的任何复合除数，当我们到达 时`d`，我们已经将其素因数从原始数中除掉了，因此减少后的数将没有共同的素因数，即`d`赢了'不要除以减少的数字，即使它除以原始数字。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:52:37.943

两件事情：

1) 你从`count`1 而不是 2 开始。所有整数都可以被 1 整除。

2）您正在针对相当大的 N 运行 O(n^2) 算法（或者至少在您确定点 #1 后您将是这样）。运行时间会很长。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-18T01:01:54.500

欧拉计划的全部意义在于，寻找答案的最明显方法将花费很长时间来计算，以至于它们不值得运行。这样你就学会了寻找不那么明显、更有效的方法。

就它是否能够计算某个数字的最大素数而言，您的方法在技术上是正确的。您没有看到任何打印出来的原因是您的算法无法快速解决问题。

按照你设计的方式，大约需要 4,000,000 年才能完成。

如果您将 600851475143 号码替换为 20，它将能够很快完成。但是你有6000亿这个数字，所以没那么简单。

# c# - 如何刷新数据网格？

> ID：15279281
> 
> 赞同：0
> 
> 时间：2013-03-07T18:47:39.477
> 
> 标签：c#, silverlight, datagrid, refresh, wcf-ria-services

我正在研究用于数据库操作的 Silverlight 5 和 RIA 服务。DataGrid 完美显示数据。

但是当我删除一条记录并将更改提交到数据库时，数据库更新成功，但 DataGrid 仍然显示旧数据。它并不令人耳目一新。

我在谷歌上搜索并惊讶地发现没有简单的答案，我也惊讶地发现微软没有在 Silverlight 中提供这个基本功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:03:26.987

无论如何，这不是一个好方法，但我已经通过将 DataGrid 设置为 null 并重新添加数据来解决这个问题。

```
 System.Collections.IEnumerable temp = yourGrid.ItemsSource;
 yourGrid.ItemsSource = null;
 yourGrid.ItemsSource = temp; 
```

我不喜欢这样做，但它可以工作，就我的目的而言，我没有注意到任何性能损失。

编辑：我想这可能不适用于删除，但值得一试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:58:33.553

您是否尝试过使用 PagedCollectionView 作为 ItemSource？

就像是：

```
DataGridMainTopic.ItemsSource = new PagedCollectionView(m_context.EntitySet); 
```

甚至：

```
DataGridMainTopic.ItemsSource = new PagedCollectionView(DataGridMainTopic.ItemsSource); 
```

# windows-phone-7 - 如何获取 wp7 的所有捕获相机视频分辨率

> ID：15279284
> 
> 赞同：2
> 
> 时间：2013-03-07T18:47:47.753
> 
> 标签：windows-phone-7, video, resolution

当我尝试枚举手机中相机支持的所有格式时

```
videoCaptureDevice = CaptureDeviceConfiguration.GetDefaultVideoCaptureDevice();
foreach (var item in device.SupportedFormats)
{
    //display formats
} 
```

我只得到一个值：640 X 480

我不明白并且需要帮助才能获得其他格式（我可以在本机相机应用程序中看到，如 320X240、640X480、1280X720）来申请捕获视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:50:01.510

看起来这是一个 WP7 SDK 限制。[你可以在这里](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/a76211a9-cba2-4fee-8a7d-2fc6915f9e92/)找到讨论。

# c# - 给定字体文件，如何获取字体系列的名称？

> ID：15279285
> 
> 赞同：4
> 
> 时间：2013-03-07T18:47:48.133
> 
> 标签：c#, .net, file, fonts, metadata

我有一组文件名不可预知的字体文件，所以我无法从文件名中推断出真正的“字体系列”名称。因此，我需要读取字体元数据以提取真正的“字体系列”名称，以便呈现此字体文件。我在 C#.NET 4.0 WinForms 中。

我已经看到了该功能`GetFontInformation`，但似乎找不到相同的 P/Invoke 标头。我所拥有的只是[C++ 版本](http://www.codeproject.com/KB/GDI/xfont.aspx)，老实说很难弄清楚。有任何想法吗？

我无法使用`PrivateFontCollection`该类为我解析字体文件的原因是这些是**OTF**字体，而 .NET/GDI+ 仅支持**TTF**字体！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:51:44.907

您需要向 ( [`PrivateFontCollection`](http://msdn.microsoft.com/en-us/library/system.drawing.text.privatefontcollection.aspx)) 添加字体，然后请求[`FontFamily`](http://msdn.microsoft.com/en-us/library/system.drawing.fontfamily.aspx)并获取其`Name`属性。

```
private static string GetFontNameFromFile(string filename)
{
    PrivateFontCollection fontCollection = new PrivateFontCollection();
    fontCollection.AddFontFile("path_to_font");
    return fontCollection.Families[0].Name;
} 
```

需要的命名空间：

```
using System.Drawing;
using System.Drawing.Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-07T13:13:28.723

只需打开（双击）其中一个字体文件，您将看到如下内容：-

[![在此处输入图像描述](../Images/fe6a0ea4267046513ba4a2cb1694dfa3.png)](https://i.stack.imgur.com/f6KaH.png)

# html - 使用 float:left 属性垂直对齐几个 li 标签中的文本

> ID：15279286
> 
> 赞同：2
> 
> 时间：2013-03-07T18:47:52.020
> 
> 标签：html, css, css-float, vertical-alignment

我想设置垂直对齐：中间；将文本放入 li tags.this 在我的代码中，但它不起作用......

HTML 代码：

```
<div id="container">
<ul id="selectable">
    <li class="ui-state-default">AAAA </li>
    <li class="ui-state-default">BBB BBB</li>
    <li class="ui-state-default">CCC </li>
    <li class="ui-state-default">DD</li>
    <li class="ui-state-default">FFFFF</li>
</ul>
<div> 
```

代码：

```
#container{position:relative; top:30px;}

#selectable{ list-style-type: none;
    margin: 0;
    padding: 0;
    width: 450px;
    display:table;  }

#selectable li{width:80px;
    height:80px;
    margin:4px;
    padding:8px;
    text-align:center;
    float:left;
    list-style:none;
    display: table-cell;
    vertical-align:middle;}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:53:51.177

只需将您的`line-height`equal设置`height`为`<li>`元素的。

```
#selectable li {
    line-height:80px;
    /* ... your own properties */
} 
```

应该适用于所有浏览器

另外一个关于如何垂直对齐的[链接。](http://phrogz.net/css/vertical-align/index.html)以及工作[解决方案的链接](http://jsfiddle.net/Cgd74/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:50:42.433

如果您想使用`vertical-align:middle;`并拥有一个水平菜单，请尝试使用`display:inline-block;`：

```
#selectable li{
    width:80px;
    height:80px;
    line-height:80px;
    margin:4px;
    padding:8px;
    list-style:none;
    text-align:center;
    vertical-align:middle;
    display:inline-block;
    /* for IE7- */
    zoom:1;
    *display:inline;
} 
```

对于当今大多数此类物品，这`display:inline-block`通常[被认为是更合适的选择。](http://www.vanseodesign.com/css/inline-blocks/)

**编辑：完全误读了标题**

您希望 TEXT 垂直对齐。我的错。将 line-height 设置为等于父级的高度（在本例中为`#selectable li`）。上面的 CSS 已被编辑以包含此内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:01:44.813

Flexbox 看起来可能是满足您的要求的唯一选择。浏览器支持：Opera、Chrome、IE10。您可以根据`li`需要放入任意数量的元素。

[http://codepen.io/cimmanon/pen/mxuFa](http://codepen.io/cimmanon/pen/mxuFa)

```
#selectable {
  list-style-type: none;
  margin: 0;
  padding: 0;
  width: 450px;
}

#selectable li {
  margin: 4px;
  padding: 8px;
  width: 80px;
  height: 80px;
  text-align: center;
  list-style: none;
  vertical-align: middle;
  display: inline-block; /* fallback */
  display: -webkit-inline-flexbox;
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
} 
```

`li`对于不支持 Flexbox 的浏览器，浮动/内联阻止元素作为后备是安全的，它只是没有正确的垂直对齐。

# ruby - ruby 输出到文件导致不需要的换行符

> ID：15279291
> 
> 赞同：0
> 
> 时间：2013-03-07T18:48:08.850
> 
> 标签：ruby

在调用字符串中的变量时，我的 ruby​​ 程序会导致不需要的换行符。

然后将字符串打印到文本文件中。在这个文本文件中有很多不需要的换行符。

这是我的代码。

* * *

```
puts 'What is the 2nd Octet?'
second_octet = gets
puts 'What is the 3rd Octet?'
third_octet = gets
puts 'What is the vlan number?'
vlan_number = gets

vrf_number = <<-eos
123#{vlan_number}
eos

router_config = <<-eos 
interface Bundle-Ether7.#{vlan_number}
description * #{description_name} *
mtu 9216
vrf #{vrf_number}
ipv4 address 10.#{second_octet}.#{third_octet}.252 255.255.255.0

eos

File.open(config, 'w') { |file| file.write(router_config) }` 
```

我在调用变量后出现换行符，因此行之间存在间隙，这对于 second_octet 和 third_octet 变量非常烦人，因为它将 IP 地址拆分为多行。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:50:09.320

由返回的字符串包括来自 return/enter 键`gets`的换行符（`\n`或）。`\r\n`您需要去掉`gets.chomp`尾随换行符，或`gets.strip`去掉前导和尾随空格。任何一个都应该适用于您的情况。

# asp.net-mvc - 如何在 ASP.NET MVC 中使用根目录中的所有产品制作友好的 URL？

> ID：15279298
> 
> 赞同：1
> 
> 时间：2013-03-07T18:48:29.210
> 
> 标签：asp.net-mvc

我正在用 ASP.NET MVC 建立一个网上商店。我想要完成的是网上商店根目录中所有产品的列表。换句话说，我想要一个 SEO 优化的友好 URL，其产品名称直接位于基本 URL 之后。例如：

myexamplewebshop.com/beautiful-red-coat

myexamplewebshop.com/yellow-t-shirt

如果您单击这些链接之一，您将看到产品的详细信息页面。我想我需要在某处更改路由代码中的某些内容才能使其正常工作。谁能给我一个如何做到这一点的例子？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:58:47.123

添加如下路线：

```
routes.MapRoute(
    "SEO_Product", // Route name
     "{seoterm}",
 new { controller = "Product", action = "LookupBySEO" }
); 
```

然后在您的产品控制器中添加方法：

```
public ActionResult LookupBySEO(string seoterm) {

    // convert URL encoded seoterm into product name

    // lookup product by name

} 
```

此路由应添加在默认路由之前。注意：您站点上的所有其他页面都不能再位于根级别，即 /aboutus、/home 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:53:49.180

您需要向RegisterRoutes 函数添加[自定义路由。](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)

```
 routes.MapRoute(
                "ProductFriendly", // Route name
                "{productId}", // URL with parameters
                new {  controller = "YourProductControllerName", action = "YourProductActionName"  } // Parameter defaults
        ); 
```

将映射到`YourProductControllerName`被调用的动作`YourProductActionName`

```
public ActionResult YourProductActionName(string productId)
{
  // your code goes here...
} 
```

# php - ImageMagick 支持的格式没有价值

> ID：15279301
> 
> 赞同：10
> 
> 时间：2013-03-07T18:48:40.070
> 
> 标签：php, windows, imagemagick

`ImageMagick-6.8.3-7-Q16-x86-dll.exe`我已经从链接下载并安装`http://imagemagick.org/script/binary-releases.php#windows`，我使用的是 Windows 7 和 PHP 5.3.8。

安装时，它已正确安装在我的机器中，并且`convert`命令运行良好。在我的转换配置中，[这里](https://www.evernote.com/shard/s297/sh/f7455e38-f482-4cf3-8ba9-0694260fd58c/9f9959c5bcafd0957081e3c6e22ee5b3)显示的是：

![在此处输入图像描述](../Images/a6f2d0fcb28610964cc4c885afe66f09.png)

但在我的 phpinfo 部分，我得到：

> ImageMagick 支持的格式没有价值

我得到了像这样的所有图像魔法值`https://www.evernote.com/shard/s297/sh/12397c86-d016-4ca4-9415-fd541daeca39/2fc504bf5ddba5693efd3249402b2b5c`。

我不知道为什么它没有价值我在我的 32 位 windows7 机器上的 php 5.3.8 上安装了相同的 ImageMagick-6.8.3-7-Q16-x86-dll.exe 。我`php_imagick.dll`从其他网站下载的。我不知道我在安装 imagemaagick 时遇到了什么问题，如果是`php_imagick.dll`版本问题，任何人都可以为此配置建议适当的 php_imagick 版本吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-08T13:09:12.600

我花了几天时间寻找解决方案，最后我用 Sysinternals procmon 找到了它。

我发现 apache 正在 c:\windows\system 和 /bin 文件夹中寻找 IM_MOD_xxxx.dll 之类的 dll 文件。将文件复制到其中一个文件夹对我有用。

运气不好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-24T11:29:44.110

并非所有版本的 ImageMagick 都适用于所有版本的 php_imagick.dll。Imagick 扩展 v3.4.* 结合 ImageMagick 7.* 不支持任何图像格式。当我降级到 ImageMagick 6.9.* 时，问题就解决了。

在 phpinfo 的回显中，您可以看到需要哪个版本的 ImageMagick。搜索“使用 ImageMagick 库版本的 Imagick”和“使用 ImageMagick 版本编译的 Imagick”（应该相等）。

二进制下载列表： [https ://www.imagemagick.org/download/binaries/](https://www.imagemagick.org/download/binaries/)

或旧版本： http: [//windows.php.net/downloads/pecl/deps/](http://windows.php.net/downloads/pecl/deps/)

在 Windows 上安装 ImageMagick 的分步说明： [https ://stackoverflow.com/a/28872879/2366136](https://stackoverflow.com/a/28872879/2366136)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-13T07:16:01.173

自从它在谷歌上寻找解决这个问题的第一个结果以来，我将添加一个对我有用的结果。来源： http: [//forums.zend.com/viewtopic.php?t=2397#p15226](http://forums.zend.com/viewtopic.php?t=2397#p15226)

我遇到了 PHP 5.6 的问题，它可以识别扩展名，但不支持任何格式。( [http://windows.php.net/downloads/pecl/releases/imagick/3.1.2/](http://windows.php.net/downloads/pecl/releases/imagick/3.1.2/) )

安装最新版本的 imagemagick（带有动态库）并将 DLL 文件从 imagemagickDir/modules/coders/* 和 imagemagickDir/modules/filters/* 复制到 imagemagick root 有帮助，现在 imagemagick 在调用 php.ini 时可以正常工作。

不要忘记让 IIS 访问 imagemagick 文件夹。

编辑：

当 IIS 成功识别格式时，我遇到了兼容性问题。

PHP 5.6 的工作组合：

[http://windows.php.net/downloads/pecl/releases/imagick/3.2.0b2/](http://windows.php.net/downloads/pecl/releases/imagick/3.2.0b2/)
[http://ftp.icm.edu.pl/packages/ImageMagick/binaries/ImageMagick-6.8.8-9-Q16- x86-dll.exe](http://ftp.icm.edu.pl/packages/ImageMagick/binaries/ImageMagick-6.8.8-9-Q16-x86-dll.exe)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-07T16:35:45.593

我有同样的问题，并尝试了一切。您**不需要**- 正如我所想的那样 - 在您的系统上安装 ImageMagick 来运行 PHP 的 Imagick 模块。您只需确保在目录中包含dll`CORE_RL_*`和*dll*`IM_MOD_*`，`apache/bin`然后在`php/ext`目录中包含 php_imagick.dll。

我在 Windows 上通过 XAMPP 运行 PHP 7.0.25 x86，这些说明非常简单和有用：

[https://mlocati.github.io/articles/php-windows-imagick.html](https://mlocati.github.io/articles/php-windows-imagick.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-08T15:04:53.077

检查

> > MAGICK_HOME=C:\Program Files (x86)\ImageMagick-6.8.8-Q16\modules\coders

已设置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-25T07:26:00.227

那里有很多答案，因为这个程序和 PHP 的环境随着时间的推移而发生了变化。

我现在正在使用 PHP 7.1。起初，我像您所做的所有说明一样，到处复制 DLL。幸运的是，所需要的只是最新的 PECL 包和适用于您系统的 Imagick 的相应版本，这是棘手的部分。如果您想使用 PHP 扩展，则不能使用最新的 Imagick（在撰写本文时为版本 7），直到扩展升级。***您必须在系统上安装与 PHP 扩展版本匹配的 Imagick 版本。***

正如其他人所指示的，为您的 PHP 版本[下载最新的 imagick PECL 包。](https://pecl.php.net/package/imagick)由于我使用的是 PHP 7.1 的线程安全 x64 版本，因此我想要 3.4.3RC1 包，这是目前唯一一个为我的 PHP 版本提供 DLL 的包。

在这些文件中，我只需将`php_imagick.dll`. 接下来，前往[http://windows.php.net/downloads/pecl/deps/](http://windows.php.net/downloads/pecl/deps/)并为您的系统下载最新的 Imagick，此时可能是 VC14 版本，这似乎只是一个问题在您的系统上安装相应的 C++ Redistributable 包以使其工作。只需解压缩文件并将 bin 添加到您的路径。同样，如果你有一个更新版本的 Imagick，你会想用这个替换它，因为这是一个可以与 php 扩展一起使用的版本。

此时，你应该可以重启 apache 并确认在 phpinfo.xml 中启用了 imagick 扩展。它应该向您显示 PHP 扩展的 Imagick 版本。同样，如果路径中系统上的 Imagick 版本与 PHP 扩展显示的版本相匹配，那么您应该会看到它从系统上版本 6 Imagick 的 DLL 中获得的支持格式列表。您不需要将它们复制到 apache bin 或其他任何地方，也不需要创建 MAGICK_HOME 文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-25T06:15:17.590

即使在正确安装了 imagick 和 imagemagick 之后，如果它不起作用，请检查您的 Apache 环境 PATH 变量。如果路径变量没有显示您的 ImageMagick innatallation 文件夹，最有可能的是，请将其添加到 Windows 高级系统设置/环境变量/系统变量 -> PATH 中。

重新启动 WAMP 服务器并检查 phponfo 以查看 Apache 环境 PATH 变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-14T18:23:38.717

我搜索了帖子并尝试了各种建议 - 几个小时。直到我尝试了这里的步骤，我才获得成功：[https](https://mlocati.github.io/articles/php-windows-imagick.html) ://mlocati.github.io/articles/php-windows-imagick.html （由*Codesmith*发布- 我同意这些步骤很短，易于遵循）。我需要安装在 WAMP 上。

此链接后面的页面说明如何确定要下载的*Imagick*和*ImageMagick*的正确版本。只需将三组文件提取到指定目录，在*php.ini*中进行更改，然后重新启动 WAMP。我的代码仅使用 JPEG 和 PNG 格式，因此在基于格式的 DLL 中，我只移动了那些。

# ios - 一起为 UITableView 框架和 contentOffset 设置动画

> ID：15279303
> 
> 赞同：2
> 
> 时间：2013-03-07T18:48:42.377
> 
> 标签：ios, uitableview, animation, iad

所以我在 UITableView 的顶部添加了一个 iAd 单元。我正在屏幕外创建广告单元，然后按照您的预期将其动画化。

当广告出现时，我想同时以相同的速度为表格的 frame 和 contentOffset 设置动画，以便表格看起来保持静止，而实际上它正在缩小广告的高度并将其内容向上滑动同时。

如果我将两者一起制作动画，它们似乎会以不同的速度发生，并且当广告出现时，一切都会发生可怕的跳跃。

```
[UIView animateWithDuration:0.05 delay:0 options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                           [self.table setFrame: CGRectMake(tableFrame.origin.x,tableFrame.origin.y+50,tableFrame.size.width,tableFrame.size.height-[self getBannerHeight])];
                           [self.table setContentOffset:CGPointMake(self.table.contentOffset.x,self.table.contentOffset.y+50) animated:NO];
                           [self.adBannerView setFrame:CGRectMake(0,0,self.adBannerView.frame.size.width,self.adBannerView.frame.size.height)];
                     }
                     completion:nil]; 
```

如果我只为单元格移动的框架设置动画，这很糟糕。我希望这能尽可能少地扰乱 UI。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:16:05.660

与其同时调整表格视图的大小和滚动，不如尝试为广告的滑入设置动画，而不调整表格视图的大小。然后，在完成块中，设置表格视图框架和 contentOffset 而不对其进行动画处理。

这应该有你想要的效果，但是在动画期间，表格视图实际上只是被广告部分覆盖。

# git - 在远程工作树上运行 git 命令 (GIT_WORK_TREE=/path)

> ID：15279313
> 
> 赞同：2
> 
> 时间：2013-03-07T18:49:14.263
> 
> 标签：git

我有一个裸 git repo 设置，它运行一个更新后挂钩，如下所示：

```
GIT_WORK_TREE=/path/to/code git checkout -f 
```

这在将代码推送到例如网络服务器时效果很好。我可以编写代码，完成后，更新网络服务器很简单`git push live master`。

但是，我不知道如何回滚到例如特定标签。通常这可以用 来完成`git checkout TAG`，但是当我尝试签出标签（例如`GIT_WORK_TREE=/path/to/code git checkout -f TAG`）时，git 会响应：

```
error: pathspec 'TAG' did not match any file(s) known to git 
```

关于如何在远程工作树上签出标签的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:43:04.097

要在远程端签出标签，您需要先推送它：

```
git push --tags 
```

正如“[使用 GitHub 如何在添加现有仓库时推送所有分支？](https://stackoverflow.com/a/4886153/6309) ”中所述，甚至`git push --all`不会推送您的标签，仅推送`refs/heads/`.

# c# - 属性的获取函数的Stackoverflow异常

> ID：15279317
> 
> 赞同：0
> 
> 时间：2013-03-07T18:49:33.833
> 
> 标签：c#, sql, stack-overflow

我有以下简单的类来管理我的 SQL 数据库操作

```
public class DatabaseManager
    {

        private string CommandString
        {
             set { CommandString = GetCommandString(commandtype); }
             get { return CommandString; }
        }
        public string commandtype
        {
            set;
            get;
        }

        public DatabaseManager(string commandtype)
        {
            commandtype = this.commandtype;
            CommandString = GetCommandString(commandtype);
        }

        public DatabaseManager()
        {

        }       

        public static SqlConnection CreateConnection()
        {
            return new SqlConnection(Properties.Settings.Default.connectionString);
        }

        //returns a datatable if the command requires a dataadapter
        public DataTable ExecuteSelect()
        {
            var x = new DataTable();
            using (var da = new SqlDataAdapter(CommandString, DatabaseManager.CreateConnection()))
                {
                    da.Fill(x);
                }

            return x;
        }

        private string GetCommandString(string commandtype)
        {

            switch (commandtype)
            {
                // select commands
                case ("SELECTMARGINS"): CommandString = "select * from margins"; break;
                case ("SELECTRANKS"): CommandString = "select * from ranks"; break;
                /...and other commands

            return CommandString;
        }

    } 
```

我得到一个 Stackoverflow 异常`get { return CommandString; }`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:51:27.200

您不能让属性返回本身（它会创建一个无限循环）。

```
 private string _CommandString;
    public string CommandString
    {
         set { _CommandString = GetCommandString(commandtype); }
         get { return _CommandString; }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T18:53:21.593

功能是你的`get`问题

```
 get { return CommandString; } 
```

这相当于以下的士气

```
public string GetCommandString() { 
  return GetCommandString();
} 
```

这只会创建无限递归，最终`StackOverflowException`会抛出 a 。您需要更改`get`and`set`以对包含实际值的支持字段进行操作并使用它来代替

```
private string _commandString;
public string CommandString {
  get { return _commandString; }
  set { _commandString = GetCommandString(commandtype); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:51:22.887

您无法设置甚至获取`CommandString`，在这种情况下您必须创建一个私有变量。

```
private string _commandString;
public string CommandString
{
     set { _commandString = GetCommandString(commandtype); }
     get { return _commandString; }
} 
```

您当前的代码中发生的事情是您正在执行以下操作：

```
CommandString = "x"; 
```

调用

```
CommandString = GetCommandString(type); 
```

调用

```
CommandString = GetCommandString(type); 
```

等等......所以它一直循环直到它溢出。私有变量可防止您一遍又一遍地设置相同的属性

此外，您似乎从未真正使用`value`传递给 set 函数，这似乎是一个错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T18:51:33.540

您不能让 Get 函数返回自身，它只会导致它无限尝试检索自身，直到堆栈溢出。

创建一个私有变量来获取并设置为：

```
private string _CommandString;
private string CommandString
{
    //Also you probably want to change commandtype to value, since you will be
    //discarding whatever you attempt to set the variable as
    set { _CommandString = GetCommandString(commandtype); } 
    get { return _CommandString; }
} 
```

# java - 从列表视图中存在的号码启用电话呼叫

> ID：15279322
> 
> 赞同：0
> 
> 时间：2013-03-07T18:49:52.413
> 
> 标签：java, android, android-intent, android-widget

由于我是 android 新手，我需要 stackoverflow 成员的帮助。在我的 android 项目中，我有一个公司名称的字符串数组，其中的联系电话列在相同的字符串数组 - 项目中。

我的列表视图与列表视图中的过滤器功能正常工作。我只希望用户可以从我的列表视图中直接拨打该号码。

```
<item >Citizen Company - 731429278838 </item> 
```

我希望用户可以直接拨打给定的电话号码。

这是我的代码，请查看并通知我我的错误。

```
public class Taximain extends Activity {
// List view
private ListView lv;
// Listview Adapter
ArrayAdapter<String> adapter;
// Search EditText
EditText inputSearch;
// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.taxi_main);
    // Listview Data
    String products[] = getResources().getStringArray(R.array.Taxi);
    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);
    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.taxi_listitem, R.id.product_name, products);
    lv.setAdapter(adapter);   
    inputSearch.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            Taximain.this.adapter.getFilter().filter(cs);
        }
        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }
        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:02:36.050

您正在寻找的特殊[Intent是](http://developer.android.com/reference/android/content/Intent.html)[ACTION_DIAL](http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL)。

我假设您可以很容易地获得电话号码，所以这是您想要使用它的方式：

```
String tel = // Get phone number;

Intent intent = new Intent(Intent.ACTION_DIAL);                          
intent.setData(Uri.parse(String.format("tel:%s", tel)));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:18:53.793

首先，您必须制作公司及其号码的数组。

使用公司和号码制作自定义列表视图。

现在您可以使用`setOnItemClickListener`和拨打电话了。

```
lv.setOnItemClickListener(new OnItemClickListener()
{
        public void onItemClick(AdapterView<?> arg0, View v, int position, long id){
            Intent callintent = new Intent(Intent.ACTION_CALL,Uri.parse("tel:" + phone_arr[position]));
            startActivity(callintent);                    
        }
 }); 
```

您可以使用[此](http://android-helper.blogspot.in/2011/04/android-listview-onclick-ample.html)列表视图并进行一些修改。

**更新：**

strint [] **phone_arr** ={1234567890,9999999999,....}

始终与您的**产品**尺寸相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:46:28.260

通过使用意图“ACTION_CALL”将启用来自列表视图项目的点击的电话。

```
String callString="tel:"+phone_arr[position];
Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse(callString));  
startActivity(intent); 
```

# bash - 使用 Bash 进行单位转换

> ID：15279323
> 
> 赞同：1
> 
> 时间：2013-03-07T18:49:57.303
> 
> 标签：bash

我正在编写一个 bash 脚本，它可以从一个非常特定的输入转换单位。

我开始做简单的读取和回显语句，并且能够让它读取从声明的整数和数字派生的非常具体的输入，但我无法让它与 if 语句一起使用。

到目前为止，这是我的简单代码：

```
#!/bin/bash

declare -i n
in=inches
ft=feet

read number in "as" feet
if [ ]; then
    echo "$n $in = $[n/12] $ft"
fi 
```

我现在要做的是创建 if/else 语句以根据依赖于用户输入的多个条件来流动。所以我希望用户输入“24 英寸为英尺”或“50 码为英寸”之类的内容并执行其各自的输出。现在，我真的不知道在 if 语句中放入什么而不出现“找不到命令”之类的错误。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:59:10.377

首先，不要在`read`命令中的变量上使用引号。

```
read number in as feet 
```

另一个改进是重命名变量以表示它们存储的内容。我将替换`as`为下划线，这是一个有效但“不可读”的名称，强调它只是一个占位符，我们并不真正关心它的价值。

```
read value src_unit _ dest_unit
# If the user enters "24 inches as feet", we have:
#  value=24
#  src_unit=inches
#  _=as
#  dest_unit=feet 
```

现在，您的 if 语句需要检查两件事：值的单位是什么，以及我们要将其转换为什么单位。这是一个模板：

```
if [ "$src_unit" = X ] && [ "$dest_unit" = Y ]; then
   # Convert X into Y
fi 
```

您可以将`X`and替换为您要转换的单位，如果从英寸转换为英尺，则`Y`中间的代码将类似于。`new_value=$(( $value / 12 ))`请注意，`bash`无法处理浮点运算，这是另一个问题的主题。

cwgem 建议的`case`声明：

```
case "$src_unit-$dest_unit" in
    inches-feet)
      new_value=$(( $value / 12 ))
      ;;
    gallons-quarts)
      new_value=$(( $value * 4 ))
      ;;
    *)  echo "I don't know how to convert $src_unit to $dest_unit"
      ;;
esac 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-10T21:55:24.657

# !/bin/bash

echo "输入要转换的数字"

读号

英尺=$(($数字*12))

英寸=$(($number/12))

```
echo "feet conversion to inches="$feet

echo "inches conversion to feet="$inches 
```

菲

# qtp - QTP 请指导我初学者学习QTP [快速测试专业]

> ID：15279333
> 
> 赞同：-3
> 
> 时间：2013-03-07T18:50:29.670
> 
> 标签：qtp

QTP 请指导我开始学习QTP [快速测试专业]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:23:50.010

你必须进一步限定你的问题。但对于初学者，您可以从 HP 下载 QTP 的试用版，然后按照任何在线/youtube 教程进行操作。

虽然我不能保证它的质量，但[这个视频](http://www.youtube.com/watch?v=91XSG7qPp0o)可能是一个起点。

# php - preg_replace 匹配不包括字符串

> ID：15279336
> 
> 赞同：1
> 
> 时间：2013-03-07T18:50:40.267
> 
> 标签：php, regex, preg-match

```
$string = ' prepending string ... "{something wrapped with " quotes } inside of braces}" appending string...';
$string .= '"{something "similar again{}}"'; 
```

我需要`'"{*}"'`将此字符串中包含的切片与 preg_match 匹配，并且找不到解决方案。

像这样匹配一个中断符号对我来说很容易：`'/([^"]+)/'`，但它对于两个符号的字符串没有用。例如，这不起作用：`'/"\{([^(\}")]+)\}"/'`.

是否可以匹配字符串中由符号对包裹的所有这些切片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:56:15.603

我认为您想在这里使用不贪婪的模式：

```
$pattern = '/"\{(.*)\}"/U'; 
```

我不清楚您是否需要验证`"`或`{}`存在于外部`"{*}"`构造中才能进行匹配。如果是这样，请告诉我，我会修改答案。

# c# - 反序列化 JSON 结构

> ID：15279337
> 
> 赞同：2
> 
> 时间：2013-03-07T18:50:42.100
> 
> 标签：c#, json, parsing, deserialization

这是代码：

```
 var jss = new JavaScriptSerializer();
            GResponse dict = jss.Deserialize<GResponse>(jsonText); 
```

这些是类：

```
public class GResponse
{
    public List<GResponseData> responseData { get; set; }
    public string responseDetails { get; set; }
    public int responseStatus { get; set; }

}

public class GResponseData
{
    public List<GResult> results { get; set; }
    public List<GCursor> cursor { get; set; }
}

public class GResult
{
    public string GsearchResultClass { get; set; }
    public string unescapedUrl { get; set; }
    public string url { get; set; }
    public string visibleUrl { get; set; }
    public string cacheUrl { get; set; }
    public string title { get; set; }
    public string titleNoFormatting { get; set; }
    public string content { get; set; }
}

public class GCursor
{
    public string resultCount { get; set; }
    public List<GPages> PagesItems { get; set; }
    public string estimatedResultCount { get; set; }
    public int currentPageIndex { get; set; }
    public string moreResultsUrl { get; set; }
    public string searchResultTime { get; set; }
}
public class GPages
{
    public string start { get; set; }
    public int label { get; set; }
} 
```

很长一段时间以来，我一直在尝试反序列化以下 json 字符串但没有成功。

```
{
    "responseData": {
        "results": [
            {
                "GsearchResultClass": "GwebSearch",
                "unescapedUrl": "irrelevant",
                "url": "irrelevant",
                "visibleUrl": "irrelevant",
                "cacheUrl": "irrelevant",
                "title": "irrelevant",
                "titleNoFormatting": "irrelevant",
                "content": "irrelevant"
            },
            {
                "GsearchResultClass": "GwebSearch",
                "unescapedUrl": "irrelevant",
                "url": "irrelevant",
                "visibleUrl": "irrelevant",
                "cacheUrl": "irrelevant",
                "title": "irrelevant",
                "titleNoFormatting": "irrelevant",
                "content": "irrelevant"
            }
        ],
        "cursor": {
            "resultCount": "irrelevant",
            "pages": [
                {
                    "start": "0",
                    "label": 1
                },
                {
                    "start": "28",
                    "label": 8
                }
            ],
            "estimatedResultCount": "irrelevant",
            "currentPageIndex": 0,
            "moreResultsUrl": "irrelevant",
            "searchResultTime": "0.27"
        }
    },
    "responseDetails": null,
    "responseStatus": 200
} 
```

似乎没有出现任何错误，但是当我检查 dict.responseData.Count 时，由于某种原因它总是等于 0。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T14:40:41.497

复制你的 Json。转到 Visual Studio，然后编辑 > 选择性粘贴 -> 将 JSON 粘贴为类。您现在将看到您的 Json 反序列化为 c# 的样子，然后可以相应地调整您现有的 c# 类。

注意：您必须打开一个 C# 文件才能在剪贴板（已复制）中获取“选择性粘贴”选项以及一些有效的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:07:39.030

如果`resonseData`是列表，您还应该在 JSON 中将其作为列表/数组，因此请更改：

```
"responseData": {
   "results": ...
   "cursor: ...
} 
```

到数组，其中包含一个元素：

```
"responseData": [
    {
        "results": ...
        "cursor: ...
    }
] 
```

# actionscript-3 - 失去焦点时的 Flash Player 行为

> ID：15279339
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:50:46.693
> 
> 标签：actionscript-3, flash, flash-cs5, flashdevelop

我对 FlashPlayer 有一个真正的问题。我需要的是让它在 THROTTLE 模式下全速运行——这意味着当 FlashPlayer 失去焦点并将帧速率降低到大约 4fps 时。这通常被称为手机的一项功能，或者当您更改浏览器中的选项卡并且您的 .swf 电影不再全速运行时。我需要这种全速，因为我们在虚拟服务器上使用闪存 swfs 运行测试，不幸的是测试运行时间很长。我发现在 FP11.2 中引入了 ThrottleEvent 来通知您 Flash Player 正在做什么。它可以进入 PAUSE、THROTTLE 或 RESUME 状态。不幸的是，当它真正进入任何这些状态时，我似乎无法强制其他 stage.frameRate。我也尝试了 Event.DEACTIVATE 和 Event.ACTIVATE，但没有任何结果。我可以绕过这个吗？或者如果不是，在 Adob​​e 将此功能整合到 FP 之前，最新版本的 FlashPlayer 是什么？感谢您的任何回复！最善良的帕维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:53:30.523

你应该试试

```
stage.addEventListener(ThrottleEvent.THROTTLE, doStuff) 
```

# ruby-on-rails - 如何设置范围以预先加载与条件的关联？

> ID：15279342
> 
> 赞同：0
> 
> 时间：2013-03-07T18:50:59.973
> 
> 标签：ruby-on-rails, activerecord, scope

我有一个与“用户”、“商店”和“权限”相关的连接模型“用户权限”。

我希望能够基于 Shop 的 id 使用在 User 模型上调用的范围来预先加载 Permission 的所有实例。

创建的范围如下所示：

```
User.for_shop(1) 
```

这将为用户发出一个查询，然后对 Permission 发出一个后续查询，该查询与 UserPermission 连接，其中`shop_id == 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:06:30.337

这应该做你想要的：

```
scope :for_shop, lambda { |shop_id| where(:shop_id => shop_id).includes(:permissions) } 
```

您还有另一个（等效）选项：

```
Shop.find(1).users.includes(:permissions) 
```

无论哪种方式，您都会获得范围内的用户列表。他们的权限是预先加载的，所以当您执行以下操作时：

```
user = User.for_shop(1).first
user.permissions 
```

第二行不会命中数据库；该用户的权限已在上一行中预先加载。

# javascript - 将对象属性同时用作函数和对象

> ID：15279348
> 
> 赞同：0
> 
> 时间：2013-03-07T18:51:32.943
> 
> 标签：javascript

我想知道是否有办法将对象属性声明为函数，同时也声明为对象。

我有一个 JavaScript 程序，它提供了一个将 AJAX 请求发送到服务器的简单 API。我的目标是尝试使这个 API 尽可能简单和易于阅读。

基本上，我想让这样做成为可能：

```
var app = new App();
app.get.client(123) // Get client ID 123
app.get.client.list() // Get an array of all clients
app.login('username', 'password') // Send credentials to log as username/password
app.login.as('John') // Login using credentials stored in a server-side constant 
```

我什至怀疑这是否可能，因为我从来没有这样的事情，但我想不出一种更清晰、更易读的方法来布置方法。当然会很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:52:42.793

函数也是对象！

```
app.get.client = function(id) {
    // Get client by ID
};

app.get.client.list = function() {
    // List them
}; 
```

像你期望的那样工作。

* * *

不过，就个人而言，我会发现：

```
app.clients.byId(123)
app.clients
app.login('username', 'password')
app.loginAs('John') 
```

更具可读性。

# c# - 更改 WPF 中的按钮内容

> ID：15279349
> 
> 赞同：1
> 
> 时间：2013-03-07T18:51:33.160
> 
> 标签：c#, wpf, button, mouseevent

我有：

```
private void button1_MouseEnter(object sender, EventArgs e)
{
    for (int i = 0; i > 2; i++) 
    {     
        button1.Content = Convert.ToString(i);
        System.Threading.Thread.Sleep(1000);     
    }

    tekst.Text = "Mouse Enter";
} 
```

当我进入时，`Button`我只看到，*`Mouse Enter`*但不要更改。为什么？我能做错什么？`Content``Button`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:04:11.953

嗨，你的 for 循环正确吗？它应该是 i<2 而不是 i>2

```
 for (int i = 0; i < 2; i++)
        { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:12:47.020

您的 for 循环永远不会执行，因为您有错误的条件，将其更改为以下代码：

`for (int i = 0; i < 2; i++)`

您还应该使用`BackgroundWorker`( [msdn](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx) ) 动态更新您的 GUI。

```
private void button1_MouseEnter(object sender, MouseEventArgs e)
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += delegate
    {
        for (int i = 0; i < 2; i++)
        {
            this.Dispatcher.Invoke((Action)(() => { btn.Content = Convert.ToString(i); }));
            System.Threading.Thread.Sleep(1000);
        }                
    };
    worker.RunWorkerCompleted += delegate { tekst.Text = "Mouse Enter"; };
    worker.RunWorkerAsync();
} 
```

# android - Android 应用程序崩溃。将 JSON 数据放入 Listview

> ID：15279351
> 
> 赞同：0
> 
> 时间：2013-03-07T18:51:37.150
> 
> 标签：android, json, android-listview, crash, android-asynctask

我昨天刚刚发布，但现在我试图将我的数据放入 ListView 而不是 TextView。应用程序在启动 listview 活动后崩溃。如果有人对此有任何线索，将不胜感激。

下面是活动代码：

```
 package com.example.Accomplist;

import android.app.Activity;
import android.app.ListActivity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.RemoteException;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.IOException;

/**
 * Created with IntelliJ IDEA.
 * User: DESAI_628IL
 * Date: 3/1/13
 * Time: 7:34 PM
 * To change this template use File | Settings | File Templates.
 */
public class MainScreen extends ListActivity{
    JSONObject jsonObj= null;

    String[] eventArr= new String[10];
    int i=0;

   // HttpClient client;
    // url to make request
    String[] urlArr = new String[10];//"http://accomplist.herokuapp.com/api/v1/sharedevent/1/?format=json";

    //Following comment block is example of json object from above url
    {
    /*

    {
   "date":"2013-01-17T12:48:24.326859",
   "event":{
      "description":"I want to find work that I love so that I never have to work a day in my life.",
      "id":3,
      "resource_uri":"/api/v1/event/3/",
      "title":{
         "id":3,
         "listitem":"Get a Job I Enjoy",
         "resource_uri":"/api/v1/title/3/"
      },
      "user":{
         "date_joined":"2013-01-17T12:40:17.115755",
         "email":"sourabhdesai@gmail.com",
         "first_name":"",
         "id":3,
         "is_active":true,
         "is_staff":false,
         "is_superuser":false,
         "last_login":"2013-02-02T15:51:11.622505",
         "last_name":"",
         "password":"pbkdf2_sha256$10000$ETuiYJXQjvez$5yHd5IPaQpS0SvlissO/JydwXUHhMYDgadY7uyTyWg0=",
         "resource_uri":"/api/v1/user/3/",
         "username":"sourabhd"
      }
   },
   "id":2,
   "resource_uri":"/api/v1/sharedevent/2/",
   "votes":7
}

     */
    }
    private static final String TAG_EVENT="event"; //A JSON object within the JSON object that will be returned by JSONParse()
    private static final String TAG_DESCRIPTION="description"; //A JSON tag within the JSON object EVENT
    private static String eventString="Yo";

    protected void onCreate(Bundle savedInstanceState) {
        for(int b=0; b<urlArr.length; b++) {
            urlArr[b]= "http://accomplist.herokuapp.com/api/v1/sharedevent/"+(b+1)+"/?format=json";
        }
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
        ListView eventsList= getListView();
        new JSONParse().execute(urlArr[0],urlArr[1],urlArr[2],urlArr[3],urlArr[4],urlArr[5],urlArr[6],urlArr[7],urlArr[8]);
    }
private class JSONParse extends AsyncTask<String, Void, String> {
    HttpClient client=new DefaultHttpClient();

    @Override
    protected String doInBackground(String... jsonurl) {
//        StringBuilder url= new StringBuilder(String.valueOf(jsonurl));
        HttpUriRequest request= new HttpGet("http://accomplist.herokuapp.com/api/v1/sharedevent/2/?format=json");
        HttpResponse r= null;
        try {
            r = client.execute(request);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        int status= r.getStatusLine().getStatusCode();
        if (status==200){
            HttpEntity e=r.getEntity();
            String data= null;
            try {
                data = EntityUtils.toString(e);
            } catch (IOException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
            try {
                jsonObj = new JSONObject(data);
            } catch (JSONException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
            try {
                JSONObject eventJson= jsonObj.getJSONObject(TAG_EVENT);
                eventString= eventJson.getString(TAG_DESCRIPTION);
            }
            catch (JSONException e1) {
                eventString="Couldn't Parse Data";
            }
            return eventString;
        }
        else{
            return eventString;
        }
    }
    protected void onProgressUpdate() {
        Toast loadingToast= Toast.makeText(getApplicationContext(), "Loading", Toast.LENGTH_LONG);
        loadingToast.show();
    }
    protected void onPostExecute(String result) {
        eventString=result;
        eventArr[i]=eventString;
        i++;
        MainScreen.this.setListAdapter(new ArrayAdapter<String>(MainScreen.this,
                android.R.layout.simple_list_item_1,eventArr));

    }
}
} 
```

这是 LogCat 错误消息：

```
02-26 15:57:21.692: WARN/InputMethodManagerService(324): Got RemoteException sending setActive(false) notification to pid 5900 uid 10048
02-26 15:57:31.964: WARN/dalvikvm(5918): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
02-26 15:57:32.042: ERROR/AndroidRuntime(5918): FATAL EXCEPTION: main
        java.lang.NullPointerException
        at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
        at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
        at android.widget.AbsListView.obtainView(AbsListView.java:2143)
        at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
        at android.widget.ListView.onMeasure(ListView.java:1158)
        at android.view.View.measure(View.java:15518)
        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
        at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
        at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
        at android.view.View.measure(View.java:15518)
        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
        at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
        at android.view.View.measure(View.java:15518)
        at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
        at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
        at android.view.View.measure(View.java:15518)
        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
        at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
        at android.view.View.measure(View.java:15518)
        at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
        at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
        at android.view.Choreographer.doCallbacks(Choreographer.java:562)
        at android.view.Choreographer.doFrame(Choreographer.java:532)
        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
        at android.os.Handler.handleCallback(Handler.java:725)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:5041)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:57:27.510

首先，这条线

```
eventsList= getListView(); 
```

应该在你的`onCreate()`. 但是声明`ListView eventsList`为一个字段变量，因为你只是在初始化它`onCreate()`

这就是你`NPE`的来源，因为它`ListView`从你`Layout`那里得到你直到你打电话`setContentView()`或`inflate`用`inflater`. 所以电话`getListView()`也需要在之后`setContentView()`

你还需要一个`ListView`with`android:id="@android:id/list"`在你的`Layout`

我建议阅读[ListActivity Docs](http://developer.android.com/reference/android/app/ListActivity.html#getListView%28%29)，因为在您理解它们之前它们可能是一件棘手的事情。我还建议观看[Turbo Charge 你的 UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)，我相信我是通过 @Sam 了解到的。这个有点旧，但仍然有很多很好的信息。它处理不同的部分，但有关于更有效地`UI`使用的很好的信息。`ListView`

**编辑**

正如这里所说：

```
Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

这就是为什么我最初在我的答案中添加了这一行:)

> 你还需要一个`ListView`with`android:id="@android:id/list"` 在你的`Layout`

就像[文档中的示例](http://developer.android.com/reference/android/app/ListActivity.html)

```
<ListView android:id="@android:id/list"  //this is the important part
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#00FF00"
           android:layout_weight="1"
           android:drawSelectorOnTop="false"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:26:08.513

使用`MainScreen`上下文设置适配器，因为您在Activity`ListView`中扩展为：`ListActivity``MainScreen`

```
protected void onPostExecute(String result) {
        eventString=result;
        eventArr[i]=eventString;
        i++;
        MainScreen.this.setListAdapter(new ArrayAdapter<String>(MainScreen.this, 
                   android.R.layout.simple_list_item_1,eventArr));

    } 
```

# orchardcms - Orchard CMS 中的布尔标记

> ID：15279353
> 
> 赞同：4
> 
> 时间：2013-03-07T18:51:39.393
> 
> 标签：orchardcms, token

假设我在 Orchard CMS 中创建了一个联系我们表单，其中包含以下字段

```
姓名：
电子邮件地址：
信息：
通讯：

```

现在，在提交此表单后，我将其设置为通过电子邮件发送特定的电子邮件地址，并且我正在使用四个字段的令牌来构建电子邮件，以便收到的电子邮件可能看起来像这样。

**姓名：**约翰·史密斯

**电子邮件地址：** jsmith@example.com

**留言：**你好！我喜欢你的网站，我希望你能得到更多我将来可以使用的内容！

**时事通讯：**真实

现在这很好，但最后一个字段`Newsletter`是布尔值，我希望此处表示的文本是是/否（或可能是其他自定义词）。如何将电子邮件中的默认 True/False 令牌值替换为自定义值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:52:28.450

您可能需要为此实现自己的令牌提供程序。这是 Orchard.Fields 模块中的一个示例... [FieldTokens.cs](http://orchard.codeplex.com/SourceControl/changeset/view/b3601054d641#src/Orchard.Web/Modules/Orchard.Fields/Tokens/FieldTokens.cs)

请注意，这里没有直接引用 Orchard.Tokens 项目，因此它们使用事件总线约定，您可以在其中定义自己的接口，其名称和签名与另一个事件处理程序相同。Orchard 将看到此约定并将您的实现视为这些事件的处理程序。我只提到这一点是因为它起初让我感到困惑。如果需要，您可以直接引用令牌模块。

# mysql - 在 CakePHP 中向多个表中添加数据

> ID：15279361
> 
> 赞同：0
> 
> 时间：2013-03-07T18:52:04.863
> 
> 标签：mysql, cakephp, formhelper

我正在开发一个发票系统，我正在尝试以单一形式添加发票。现在我只能添加到我的 invoices 表，而不是 invoices_works 表。这是我正在使用的。提前抱歉添加了这么多代码：

我的发票表：

```
CREATE TABLE `invoices` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`commission` double NOT NULL DEFAULT '30',
`location_id` int(11) unsigned NOT NULL,
`created` datetime DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `location_id` (`location_id`),
CONSTRAINT `invoices_ibfk_1` FOREIGN KEY (`location_id`) REFERENCES `locations` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=latin1; 
```

我的 invoices_works 表：

```
CREATE TABLE `invoices_works` (
`invoice_id` int(11) unsigned NOT NULL,
`work_id` int(11) unsigned NOT NULL,
`count` int(11) NOT NULL DEFAULT '1',
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`id`),
KEY `invoice_id` (`invoice_id`),
KEY `work_id` (`work_id`),
CONSTRAINT `invoices_works_ibfk_2` FOREIGN KEY (`work_id`) REFERENCES `works` (`id`),
CONSTRAINT `invoices_works_ibfk_1` FOREIGN KEY (`invoice_id`) REFERENCES `invoices` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=latin1; 
```

我的作品表：

```
CREATE TABLE `works` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`name` text NOT NULL,
`cost` int(11) NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1; 
```

我的发票模型（至少是 HABTM）：

```
public $hasAndBelongsToMany = array(
        'Work' => array(
                    'className' => 'Work',
                    'joinTable' => 'invoices_works',
                    'foreignKey' => 'invoice_id',
                    'associationForeignKey' => 'work_id'
                )
        ); 
```

在Controller中添加的方法：

```
public function add() {
    if($this->request->is('post')) {
        $this->Invoice->create();
        if ($this->Invoice->saveAssociated($this->request->data)) {
            $this->Session->setFlash(_('The invoice has been saved.'), true);
            echo var_dump($this->data);
            $this->redirect(array('action' => 'index'));
        }
        else {
            $this->Session->setFlash(_('The invoice could not be saved.', true));
        }
    }
    $work = $this->Work->find('list');
    $location = $this->Location->find('list', array('conditions' => array('Location.id !=' => 0)));
    $this->set('works', $work);
    $this->set('locations', $location);
} 
```

最后，视图本身：

```
<?php

 echo $this->Form->create('Invoice');
echo "<fieldset>";
    echo $this->Form->input('location_id');
    echo $this->Form->input('commission', array('default' => 30));
echo "</fieldset>";
    //echo $this->Form->hidden('InvoiceWork.invoices_id', array('default' => 1));
echo "<fieldset>";
    echo $this->Form->input('InvoicesWork.work_id');
    echo $this->Form->input('InvoicesWork.count', array('default' => 1));
echo "</fieldset>";

 echo $this->Form->end('Save Invoice');

?> 
```

好像我错过了什么，我知道一旦我找到它就会很明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:04:38.207

在我的脸撞在键盘上几个小时后，我解决了我的问题。我最终为这两个表使用了单独的添加函数。

```
public function add() {
    if($this->request->is('post')) {
        $this->Invoice->create();
        if ($invoice = $this->Invoice->saveAll($this->request->data)) {
            $this->Session->setFlash(_('The invoice has been saved.'), true);
            if(!empty($invoice)) {
                $this->request->data['InvoicesWork']['invoice_id'] = $this->Invoice->id;

                $this->Invoice->InvoicesWork->save($this->request->data);
                echo "InvoicesWork save completed?<br/>";
                echo var_dump($this->request->data);
            }
            $this->redirect(array('action' => 'index'));
        }
        else {
            $this->Session->setFlash(_('The invoice could not be saved.', true));
        }
    }
    $work = $this->Work->find('list');
    $location = $this->Location->find('list', array('conditions' => array('Location.id !=' => 0)));
    $this->set('works', $work);
    $this->set('locations', $location);
} 
```

这不是最优雅的解决方案，但是在我将数据插入到我的发票表中之后，我从中获取新的 ID 并将其存储在我的数组中。然后，我只需从 InvoicesWork 模型中调用 add 函数。

# android - 在android中调整视图大小

> ID：15279362
> 
> 赞同：1
> 
> 时间：2013-03-07T18:52:11.197
> 
> 标签：android, android-layout

我在我的应用程序中使用滑动菜单

![在此处输入图像描述](../Images/bcb430e4104988e6c02735813bbee790.png)

单击设置图标后，我得到以下结果

![在此处输入图像描述](../Images/a2d841c2472d9563ae96ffc1c021b3bb.png)

第一个布局中的内容是换行的，而不是我想隐藏那部分视图

xml文件

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/menu_bg"
tools:context=".PrincipalActivity" >

<include layout="@layout/actionbar_menu" android:id="@+id/actionBarMenu"/>
 //listview for displaying menu
<ListView
    android:id="@+id/listMenu"
    android:layout_below="@+id/actionBarMenu"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#282828"
    android:dividerHeight="1dip"
    android:background="#3F3F3F"
    android:fadingEdge="none"
    android:listSelector="@drawable/list_selector">

</ListView>

 //this is main layout which is visible first time when application starts
<RelativeLayout
    android:id="@+id/layoutToMove"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/actionBar"
    android:background="#282828">

    <include layout="@layout/actionbar_layout" android:id="@+id/actionBar"/>

    <ImageButton
        android:id="@+id/menuButton"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_alignBottom="@+id/actionBar"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:onClick="openCloseMenu"
        android:src="@drawable/menu"
        android:background="@android:color/transparent" />
     <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="asdkjasdksajdkasjdkasjdkasdddddddddddddddddddddddddddddd"
        android:textColor="#fff"
        android:layout_centerVertical="true"/>
    <Button
        android:id="@+id/separator"
        android:layout_width="1dp"
        android:layout_height="50dp"
        android:layout_toRightOf="@+id/menuButton"
        android:background="@drawable/custom_button_black" />

</RelativeLayout> 
```

任何形式的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:52:59.883

您应该考虑使用 jfeinstein10 的[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)。它非常好，被许多流行的 Android 应用程序广泛使用，例如 Foursquare Rdio、Falcon Pro 等

# bash - bash 别名或函数查找 Compass，并将 CD 放入目录

> ID：15279363
> 
> 赞同：0
> 
> 时间：2013-03-07T18:52:11.240
> 
> 标签：bash, terminal, alias, compass-sass, sass

通常，我的项目在文件系统深处有一个 SCSS+Compass 目录。

例如，我所有的项目都在下面`~/Web/com.example.subdomain`，有时样式目录是`~/Web/com.example.subdomain/trunk/docroot/_assets/locked/styles`.

每天多次输入整个 CD 命令显然有点重复。我可以为每个项目创建一个别名（例如`alias cd-com.marketo.subdomain-scss="..."`），但必须为所有 25 个以上的项目添加和维护。

## 那么我怎样才能编写一个有效地允许我输入的函数：

```
$ cd ~/Web/com.example
$ cd-compass 
```

## 从这里，我想 cd-compass 会：

1.  使用某种形式的`find .`命令来查找`config.rb`或`.sass-cache/`
2.  如果两者都存在于同一个目录中，那么你知道它是一个指南针目录......
3.  如果`.sass-cache/`不存在并且存在`config.rb`，它将运行`compass stats /the/dir`
    1.  如果它不是指南针目录，则输出将以`Nothing to compile. If you're trying to start`...
    2.  如果它是一个指南针目录，它会吐出统计信息并创建`.sass-cache/`目录
4.  一旦成功找到该目录，它就会 CD 进入该目录。

## 奖励积分：

> 添加包含指南针命令的功能，因此输入`cd-compass compile --force`将遵循上述流程（包括 cd'ing 进入目录），然后执行`compass compile --force`
> 
> 也许在这种情况下，命令将是`compass-do`or `fcompass`or `lcompass`(f = find; l = locate)。

## 超级奖励积分：

> 如果找到多个 Compass 安装，则显示一个编号的选项列表。输入其中一个数字并按 Enter 将继续使用该选项。
> 
> 这基本上可以让我简单地输入：
> 
> `$ cd-compass`
> 
> `1\. /home/user/Web/git/com.example/trunk/docroot/admin/styles/compass`
> 
> `2\. /home/user/Web/git/com.example/trunk/docroot/styles/compass`
> 
> `3\. /home/user/Web/svn/com.example.sub/trunk/docroot/_assets/locked/styles`
> 
> `Which one? > __`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:40:53.570

这并不能完全满足您的要求 - 例如，如果 .sass-cache 丢失，它不会构建它，但它应该很容易扩展它这样做（读者练习:-)。如果目录名称中有空格，它也将不起作用。

对于 shell 别名来说，这确实有点大。

首先，您需要将所有潜在目录放入一个变量中

```
dirs=$(find . -name config.rb -o \( -type d -name .sass-cache \) | sed -e 's,/.sass-cache$,,' -e 's,/config\.rb$,,' | sort | uniq -c | grep '^ *2 ' | sed -e 's/^ *2 //') 
```

该位调用 find 来查找任何名为 config.rb 的文件或名为 .sass-cache 的目录。然后它用 sed 剥离路径的最后一部分以获取目录名称，对结果进行排序并计算简单生成路径的数量。然后只提取那些出现两次的目录，并从目录的开头去掉计数......然后“嘿，presto！” 我们有一个指南针目录列表

然后计算其中有多少：

```
count=0 ; for i in $dirs ; do : ; count=$((count+1)) ; done 
```

或者，您可以通过回显 dirs 变量并将其传送到“wc -w”来获取计数

然后你去处理 count 的不同可能值

```
if [ $count -eq 0 ] ; then echo no compass directory found; exit ; fi

if [ $count -eq 1 ] ; then cd $dirs ; exit ; fi

if [ $count -gt 1 ] ; then idx=1 ; for i in $dirs ; do echo $idx $i; idx=$((idx+1)) ; done ; fi

while true
do
    echo -n "enter directory number: "
    read choice
    if [ $choice -gt $count ]
    then
        echo "invalid choice"
    else
        idx=1
        for i in $dir
        do
            if [ $idx -eq $choice ]
            then
                cd $i ; exit
            fi
            idx=$((idx+1))
        done
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:45:27.290

[Z](https://github.com/rupa/z)解决了在命令行上快速跳转到目录的更普遍的问题。它通过建立一个您 cd 到的目录数据库来做到这一点，并按“频率”对它们进行排名——基于频率和新近度的综合分数。

一旦你访问了一些目录，你就可以跳转到它们，`z`后面跟着一个或多个子字符串。例如，要访问我的 gitolite 管理存储库，我只需键入`z gito`.

# php - 函数处理后变量没有得到定义/更新？

> ID：15279370
> 
> 赞同：0
> 
> 时间：2013-03-07T18:52:46.580
> 
> 标签：php

我编写了一些警报系统。

但是我们不要看系统本身，让我们看看系统如何知道系统确实向浏览用户发送了警报/错误。

我做了一些事情，所以当你随机转到 ?alert=name 时，没有任何错误，它会说“没有错误”。但是如果系统让你去？alert=name，它会回显错误。

我如何处理帖子

```
function postComment() {
    if (!empty($_POST['name']) || !empty($_POST['comment'])) {
        $comment = mysql_real_escape_string(htmlentities($_POST['comment']));
        $guest = mysql_real_escape_string(htmlentities($_POST['name']));
    }
    $guestId = 1;
    if (empty($guest)) {
        $alert = 1;
        return header('location: index.php?alert=name');
    }
    if (empty($comment)) {
        $alert = 2;
        return header('location: index.php?alert=comment');
    }
    if (!isset($_COOKIE['alreadyPosted'])) {
        mysql_query("INSERT INTO `comments` (`comment_guest`, `guest_id`, `comment`, `comment_date`, `comment_time`) VALUES ('$guest', '$guestId', '$comment', CURDATE(), CURTIME())") or die(mysql_error());
        header('Location: index.php?action=sucess');
        setcookie(alreadyPosted, $cookieId+1, time() + 60);
        } else {
            $alert = 3;
            header('location: index.php?alert=delay');
        }
} 
```

如您所见，为了检查用户是否真的收到该错误，我将 $alert 设置为任何错误号。

为了检查他是否收到错误，我将使用这个：

```
if (isset($_GET['alert']) == 'name') {
    if ($alert == 1) {
        echo 'hai';
    } else {
        echo 'No errors';
    }
} 
```

您可能想知道我为什么要这样做..，因为我使用 1 个函数进行发布，而我的发布函数位于表单下方，我希望警报显示在表单中。

问题：

该变量要么没有设置为运行函数时应该设置的数字，要么..有什么东西阻止了它..我不知道..

我的猜测：因为在变量设置之前检查错误是由 postComment 函数决定的？

```
<?php
    if (isset($_GET['alert']) == 'name') {
        if ($alert == 1) {
            echo 'hai';
        } else {
            echo 'No errors';
        }
    }
    ?>

<form action="index.php" method="POST">
<input type="text" name="name" placeholder="Your name here" class="field">
<textarea class="textarea" name="comment" placeholder="Your comment here..."></textarea>
<input type="submit" name="send" class="blue_button" value="Post Comment">
</form><a href="#"><input type="submit" name="" id="margin" class="blue_button" value="See all messages"></a>
<br />
<?php
//Show the comments
    showComments();

    if (isset($_POST['send'])) {
        postComment();
    }

    if (isset($_GET['delete']) == "comment"){
        deleteComment();
    }

    echo '<br />';

?> 
```

如果是，解决方案是什么？谢谢！

请不要从关于 mysql_ 函数的故事开始，我理解并且我将使用 PDO 代替，但我目前使用 mysql_ 用于测试目的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:07:13.557

问题是您正在重定向错误，因此该`$alert`变量不会被转移。

要解决此问题，请将警报类型添加到`$_GET`参数中：

```
function postComment()
{

  // ...

  if (empty($guest))
  {
    header('location: index.php?alert=name&alert_type=1');
    exit;
  }

  // ...

} 
```

然后当您检查错误时：

```
if (isset($_GET['alert']) && 'name' == $_GET['alert'])
{

  if (isset($_GET['alert_type']) && '1' == $_GET['alert_type'])
  {
    echo 'hai';
  }

  else
  {
    echo 'No errors';
  }

} 
```

另请注意，我在这里修复了错误：

```
isset($_GET['alert']) == 'name' 
```

这不像我认为你认为的那样。你想要的是：

```
isset($_GET['alert']) && 'name' == $_GET['alert'] 
```

（请原谅比较的顺序；我更喜欢在右侧使用变量进行比较，因为如果您错过 a 会导致解析错误`=`-- 比让它运行但没有按照您的预期执行要好得多）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T19:09:49.700

如果您是新手，最好考虑使用客户端脚本（即 javascript）进行验证，因为使用服务器端验证会简单地延长流程。但是当你面临问题时，这可能会给你解决方案。

当您将页面重定向到 时`index.php?alert=name'`，因此在页面自行加载时，最初不会设置 $alert。当您调用该函数时`postcomment()`， $alert 会启动，但在系统重定向时会立即销毁。当`$alert`您随机访问该页面时，它永远不会保留一个值，它显示`no error.`

# user-interface - 设计用于编辑实体的典型 GUI [桌面应用程序]

> ID：15279371
> 
> 赞同：2
> 
> 时间：2013-03-07T18:52:51.120
> 
> 标签：user-interface, desktop, usability, entities

我在为桌面应用程序开发 GUI 方面几乎没有经验，但我想开发一个典型的 GUI 来创建/编辑实体（例如客户、供应商等），这在许多情况下都是相似的，并且对用户来说很舒服。

[* 请不要关闭问题。我为准备问题付出了很多努力，我真的需要帮助。*]

在分析了我们的任务后，我设计了以下可能的选项：

1）在简单的情况下，可以通过使用普通网格来解决任务：

![仅网格](../Images/e2966c5e15c1ae3f93eb674d4eb2850e.png)

即工作流程是： 在按下添加按钮时，将新行添加到网格中。在按下 Delete 时，用户会被要求确认他/她是否真的想要删除焦点实体实例。按下 Save 后，所有先前所做的更改都会被保存。按下关闭时，表单将关闭（询问用户是否要在关闭前保存更改）。

缺点：我认为这样的 GUI 只适用于非常简单的情况。在网格中编辑复杂的东西对用户和开发人员来说都不舒服（我认为在网格中实现复杂的编辑并非易事）。

2）对于更复杂的实体，以下选项是可能的：

![用于创建/编辑的网格和模式形式](../Images/0d271e2eb692edce16f2985ba4f64d1a.png)

此处仅在只读模式下使用网格。按下 Add a modal form 以填充有关新实体的信息。在该表单中按 OK 时，验证数据，如果一切正常，则将对象添加到网格数据源。双击网格行时，将显示用于编辑所选实体实例的相同表单。

缺点：对于每个实体，我们必须创建 2 个表单。

3）另一种可能的选择：

![网格将字段放在同一表单上](../Images/aff71764ec5515ec35ab22f4a7c0724d.png)

网格也处于只读模式。当聚焦网格中的一行时，网格上方的字段将被填充，用户可以对其进行编辑。在按下 Add 时，会创建一个新的实体实例（对象）并将其添加到网格的数据源中，然后聚焦新行，清除网格上方的字段（此处提供绑定帮助），光标放置在第一个字段上，用户可以开始打字。

我在这里看不到任何缺点，只是您可能没有足够的位置放置网格和同一表单上的字段。我喜欢这个选项，虽然我不记得我在任何地方看到过。

* * *

我试图让我的程序的用户帮助我决定哪个 GUI 更适合他们，但典型的答案是“我认为这两个选项都可以”或“我不知道，你决定哪个更好”。

现在我想问有GUI设计经验的人以下问题：

1）您通常使用哪个选项？也许另一个（上面没有显示）？
2) 如果您还对您的实现（数据集/自定义业务对象/绑定等）说几句话，那就太好了。
3) 您在我的选择中注意到哪些缺点？
4) 关于我能读到的关于这个主题的任何建议？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T17:59:08.057

Junior1993，这是一个很好的问题，并且有许多在线资源将阐明每种交互设计模式的权衡，何时使用它们以及何时最有效。您没有提供具体项目的详细信息，因此无法回答这些问题。

“Work With”模式是你写作的基础，你问的是不同变体的优缺点。这里有一些关于“Work With”的读物：http: [//quince.infragistics.com/html/PatternView.aspx ?name=Work+With](http://quince.infragistics.com/html/PatternView.aspx?name=Work+With)

您描述的所有模式都有很好的文档记录，可以修改以适应不同的目的。您的#2 模式是“就地编辑”。它也可以在 Quince 网站上找到。您的#3 模式是“双面板选择器”。这有多种形式，但它有助于在编辑时保留上下文。

你没有提到的是“新项目行”。您可能还想查看那个，并选择最适合您的用户目标和他们正在创建/编辑的内容的模式或模式组合。

还有其他的模式网站，大多数都建立在 Jennifer Tidwell 的作品之上，他是交互设计经典作品“Designing Interfaces”的作者。

祝你好运！

# c# - 提交内部事务范围，同时回滚外部事务范围

> ID：15279377
> 
> 赞同：0
> 
> 时间：2013-03-07T18:52:59.940
> 
> 标签：c#, sql, database, transactions, transactionscope

我正在尝试在用 C# 编写的高度并发系统中执行以下操作。

1.  获取事务范围内数据项的行锁
2.  做很多 db-interaction
3.  如果出现任何问题
    *   更新锁定的数据项，处理失败
    *   提交更新
    *   回滚步骤 2 中的任何更改并释放对数据项的锁定

但是 - 我不知道如何实现这一点，而不是在更新之前释放项目锁定。我目前的（坏的）解决方案是这样的：

1.  获取事务范围内数据项的行锁
2.  做很多 db-interaction
3.  如果出现任何问题
    *   回滚步骤 2 中的任何更改并释放对数据项的锁定
    *   在新事务范围内重新锁定数据项
    *   更新锁定的数据项，处理失败
    *   提交更新

这个解决方案的问题是我释放了锁，以便另一个进程可以在我更改写入处理失败的项目之前拿起项目。

有没有办法创建一个嵌套事务范围，它可以提交被外部事务范围锁定的项目，同时仍然允许外部范围回滚？

看来我所有的麻烦都来自这样一个事实，即外部范围锁定了内部范围要更新的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:02:14.773

我理解这个问题的方式，你所要求的是不可能的。

有什么东西阻止你使用类似的模式吗？

```
begin outer transaction

  //do some stuff

  bool failedFlag = false;

  begin inner transaction

    // do some more stuff

    if (failed)
      failedFlag = true
      roll back inner transaction
    else
      commit inner transaction
  end inner

  if (failedFlag)
    update locked items with failed status

commit outer transaction 
```

# mysql - 如何返回组内具有 MIN/MAX 值的行的 ID？

> ID：15279380
> 
> 赞同：0
> 
> 时间：2013-03-07T18:53:06.220
> 
> 标签：mysql, sql, greatest-n-per-group, percona

```
SELECT
    MAX(`client_id`) `client_id`
FROM
    `phrases`
WHERE
    `language_id` = 1 AND
    `client_id` = 1 OR
    `client_id` IS NULL
GROUP BY
    `language_phrase_id` 
```

如何获得`id`具有`MAX(`client_id`)`价值的行？

我在派生表的上下文中需要这个，例如

```
SELECT
    `p2`.`phrase`
FROM
    (SELECT `language_phrase_id`, MAX(`client_id`) `client_id` FROM `phrases` WHERE `language_id` = 1 AND `client_id` = 1 OR `client_id` IS NULL GROUP BY `language_phrase_id`) `p1`
INNER JOIN
    `phrases` `p2`
ON
    `p2`.`language_id` = 1 AND
    `p1`.`language_phrase_id` = `p2`.`language_phrase_id` AND
    `p1`.`client_id` = `p2`.`client_id`; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:24:36.233

我在理解要求时遇到了一些麻烦，但这*似乎*就是您要寻找的。
不是最漂亮的 SQL，我相信它可以被简化，但它是一个起点；

```
SELECT p1.id, p1.phrase
FROM phrases p1
LEFT JOIN `phrases` p2
  ON p1.language_id=p2.language_id
 AND p1.language_phrase_id=p2.language_phrase_id
 AND p1.client_id IS NULL and p2.client_id = 1
WHERE p2.id IS NULL AND p1.language_id=1 
  AND (p1.client_id=1 or p1.client_id IS NULL)
GROUP BY p1.language_phrase_id 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/b819e/9)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:30:52.527

使用窗口函数查找每个组的最大值，然后使用`where`子句选择具有最大值的行：

```
select p.*
from (SELECT p.*, max(client_id) partition by (language_phrase_id) as maxci
      from phrases p
      WHERE (`language_id` = 1 AND `client_id`= 1) or
            `client_id` IS NULL
     ) p
where client_id = maxci 
```

我还添加了括号以澄清您的`where`陈述。混合`and`and时`or`，我总是使用括号来避免可能的混淆和错误。

现在您已将`mysql`标签添加到您的语句中，这将不起作用。因此，这是一个特定于 MySQL 的解决方案：

```
select language_phrase_id,
       substring_index(group_concat(id order by client_id desc), ',', 1) as max_id
from phrases
group by phrases p 
```

请注意，此 if`id`将在此过程中转换为字符串。如果它有不同的类型，您可以将其转换回来。

# java - 不鼓励的方法，不推荐使用

> ID：15279381
> 
> 赞同：7
> 
> 时间：2013-03-07T18:53:16.353
> 
> 标签：java, deprecated

一些 Java 类需要具有带有公共 getter 和 setter 的私有属性才能正常运行。例如 JSF bean 和 JPA 实体需要它们。如果不是这些库，可能有一些属性不应该有任何 getter 并且绝对不是 setter。此外，自定义代码通常不鼓励使用空构造函数。例如

```
@Entity
public class MyEntity implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    public MyEntity() {}

    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    }
} 
```

在此类中，方法 setId 永远不应由手动代码调用。但是该方法并未被弃用，因此 @Deprecated 注释将是错误的。

除了@Deprecated 之外，还有其他方法可以告诉不应使用方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:09:28.617

JPA 实体不需要公共 getter 和 setter。使用反射设置值（至少在使用您可能正在使用的 EclipseLink 或 Hibernate 时）。

在这个特定的示例中，您可以简单地将 setter 排除在外，我已经养成了习惯，并且从未遇到过问题。**注意：在属性和 getter/setter 方面坚持 Java 命名约定。**一些库/框架（错误地 imo）依赖于此。

至于问题的全局概念，我很惊讶我没有看到包含文档的建议。文档曾经、现在并且可能永远是您与代码用户的最佳沟通方式。

```
/**
 * WARNING! DO NOT USE THIS UNLESS YOU ARE GOD!
 * This will probably break stuff unless...
 * ....
 */
public void doEvilHackishThings()
{
    // Stuff happens here.
} 
```

如果你正确地记录你的代码，开发人员知道他们什么时候可能会破坏东西。确保你没有应用巫毒代码等。好的文档详细描述了它的作用以及它是如何做的。没有一个头脑正常的开发人员会在不理解为什么它是邪恶的情况下接触示例方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:13:02.670

您可以使用由该具体类支持的接口来隐藏 getter 和 setter。这也将鼓励告诉，不要问，因为没有任何你可以在界面上使用的 getter。构造函数的用法也可以隐藏在工厂中。

# c# - 使用 C# Winforms 中的 WebService 从数据库填充组合框

> ID：15279385
> 
> 赞同：0
> 
> 时间：2013-03-07T18:53:37.073
> 
> 标签：c#, winforms, web-services, combobox

这是我的代码：

```
[WebMethod]

public SqlDataReader Cmb_BranchMaster() {

        SqlCommand ad1 = new SqlCommand("select * from BranchMaster", conn);
        if (conn.State == ConnectionState.Open)
            conn.Close();

        conn.Open();

        SqlDataReader rdr2 = ad1.ExecuteReader();
        if (rdr2.HasRows)
        {
            while (rdr2.Read())
            {

               // here cmbranchname is my combobox of winforms .. so here in webservice it gievs error 
                cmbBranchName.Items.Add(rdr2[1].ToString());
            }
        }
        conn.Close();
    } 
```

现在如何返回数据并在我的 winform 中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:36:07.333

这是我得到的解决方案

## 网络服务代码

```
static SqlConnection conn = new SqlConnection(ConfigurationSettings.AppSettings["Connection"].ToString());
[WebMethod]
public DataSet Cmb_BranchMaster()
{
    conn.Open();
    SqlCommand ad1 = new SqlCommand("select * from BranchMaster", conn);
    SqlDataAdapter adapt = new SqlDataAdapter(ad1);
    DataSet ds = new DataSet();
    adapt.Fill(ds);
    conn.Close();
    return ds;
} 
```

## Winform 代码

```
private void ComboBox_Load(object sender, EventArgs e)
{
    myservice.Service test = new myservice.Service();
    DataSet dd = new DataSet();
    dd = test.Cmb_BranchMaster();
    comboBox1.DataSource = dd.Tables[0];
    comboBox1.DisplayMember = "BranchName";
    comboBox1.ValueMember = "BranchID";
} 
```

# c++ - 用零除法不正确

> ID：15279386
> 
> 赞同：1
> 
> 时间：2013-03-07T18:53:37.090
> 
> 标签：c++, string, istringstream

最近我一直在为我的期末考试写片段。其中一项常见任务是将字符串 (std::string) 划分为单词。在某些情况下，这些字符串可以包含整数。

我写了一个片段：

```
#include <sstream>
#include <iostream>
#include <vector>
using namespace std;

int main(void)
{
string str="23 005 123";
vector<int>myints;
istringstream iss(str);

string word;

while(iss>>word)
{
    int a;
    istringstream(word)>>a;
    myints.push_back(a);
}

for (vector<int>::iterator it=myints.begin();it!=myints.end();++it)
    cout<<*it<<" ";

} 
```

它可以工作，尽管有问题。我从 str 得到 5 而不是 005。似乎 VC++ 缩小了所有的零。如何仅使用 C++ 函数（而不是 string.h/cstring 中的 strtok）来避免它？

我在 MS VC++2008 和 gcc 上都得到了它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:58:19.210

如果您需要记住输入中前导零的数量并在以后使用完全相同数量的前导零打印它，唯一的选择是*不*存储为`int`. 例如，您可以将您的`vector<int>`变成`vector<string>`.

Alternatively, you could use a `vector< pair<int,string> >`, which keeps the integer you want along with the original string representation.

Finally, if you don't care about the actual number of leading zeros that were in the input, but simply want everything to be padded with leading zeros to equal length, you can use `setfill` and `setw` :

```
cout << setfill('0') << setw(5) << 25; 
```

# c# - WPF CheckBox 多重绑定

> ID：15279388
> 
> 赞同：2
> 
> 时间：2013-03-07T18:53:42.770
> 
> 标签：c#, wpf, data-binding

我需要将一个复选框绑定到两个属性，我认为我必须使用`multiBindings`

到目前为止我有这个，但这不起作用。

```
<CheckBox x:Name="FilterAll" Content="All">
 <CheckBox.IsChecked>
  <MultiBinding>
     <Binding Path="SearchEngineCompassLogView.FilterSearch.IsFilterAllEnable"
            Source="{StaticResource CompassLogView}">
     </Binding>

     <Binding Path="SearchEngineCompassLogView.FilterSearch.IsFilterVisible"
             Source="{StaticResource CoreServiceLogView}">
     </Binding>
  </MultiBinding>
 </CheckBox.IsChecked>
</CheckBox> 
```

这甚至可能与 MultiBinding 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:23:21.237

您可以使用多绑定。[正如道德逻辑所说，您必须使用转换器来执行参数的实际逻辑（无论您想要执行 AND、OR 等等。您可以在这里](http://tech.pro/tutorial/809/wpf-tutorial-using-multibindings)看到更多关于这些的信息

我不确定您要对复选框产生什么影响，但最终它会看起来像这样。

```
<CheckBox.IsChecked>
   <MultiBinding Converter="{StaticResource MultiBoolConverter}">
        <Binding Path="SearchEngineCompassLogView.FilterSearch.IsFilterAllEnable" Source="{StaticResource CompassLogView}"/>
        <Binding Path="SearchEngineCompassLogView.FilterSearch.IsFilterVisible"
             Source="{StaticResource CoreServiceLogView}"/>
    </MultiBinding>
</CheckBox.IsChecked> 
```

还有另一种方法可以做到这一点，我有时觉得这很有用。它被称为数据触发器。如果您使用过样式和模板，那么您可能以前见过它们。这是基于您的问题的示例：

```
<CheckBox>
  <CheckBox.Style>
     <Style TargetType={x:Type CheckBox}>
        <Style.Triggers>
          <MultiDataTrigger>
             <MultiDataTrigger.Conditions>
                  <Condition Binding="{Binding Path="SearchEngineCompassLogView.FilterSearch.IsFilterAllEnable" Source="{StaticResource CompassLogView}" Value="True"/>
                  <Condition Binding="{Binding Path="SearchEngineCompassLogView.FilterSearch.IsFilterVisible" Source="{StaticResource CoreServiceLogView}" Value="True"/>
              </MultiDataTrigger.Conditions>
              <Setter Property="CheckBox.IsChecked" Value="True"/>
          </MultiDataTrigger>
        </Style.Triggers>
     </Style>
  </CheckBox.Style>
</CheckBox> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:55:48.433

您必须在 MultiBinding 中指定转换器。[多重绑定](http://www.codeproject.com/Articles/328978/Introduction-to-multi-binding-and-multi-value-conv)

# javascript - 如何在d3树形图中显示周围的父母？

> ID：15279392
> 
> 赞同：1
> 
> 时间：2013-03-07T18:54:01.800
> 
> 标签：javascript, d3.js, treemap

当我放大我的树形图时，我想显示周围的父母，如下所示：

[http://www.nytimes.com/interactive/2010/02/01/us/budget.html?_r=0](http://www.nytimes.com/interactive/2010/02/01/us/budget.html?_r=0)

在这个 NYT 视觉效果（不幸的是在 Flash 中）中，当您放大某个部分时，您仍然可以看到其周围的部分。我想为我的 d3 Zoomable Treemap 创建相同的体验，但不确定如何。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T20:30:24.077

[我会尝试对这个例子](http://bost.ocks.org/mike/treemap/)进行逆向工程，看看你能走多远。然后，您可以就代码遇到的更具体问题提出更具体的问题。

# jquery - 简单的 Jquery ajax 调用不返回任何数据

> ID：15279393
> 
> 赞同：-2
> 
> 时间：2013-03-07T18:54:04.427
> 
> 标签：jquery, ajax

我是 ajax 新手，我有一个任务是从 url 获取 json 对象，但我无法得到它

```
getNews : function() {
    $.ajax = ({
        url : corporate.newsService,

        header : {
                Accept : 'application/json',
                'Content-Type' : 'application/json'
        },

        success : function success(jsonData) {
            console.log("hello Json");
        }
    })

//  console.log(corporate.newsService);

}, 
```

**Ps 甚至无法获得 console.log 消息**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:07:23.163

$.ajax 是一种方法，而不是变量。

所以

```
$.ajax({
    url: 'Your URL',
    dataType: "JSON",
    success : function success(jsonData) {
        console.log("hello Json");
       }
    }); 
```

或者尝试使用

```
$.getJSON('Your URL', null, function(dataReturned){
                  console.log(dataReturn);
                 } 
```

# junit - 仅在类修改后受影响的测试上运行 JUnit

> ID：15279401
> 
> 赞同：4
> 
> 时间：2013-03-07T18:54:29.760
> 
> 标签：junit

假设您有一个大型项目，其中包含数千个 JUnit 测试。假设运行所有这些测试需要 7 分钟。当您从 ant/maven 脚本构建项目时，这看起来很短。

但是当你使用 Eclipse 时，你不能经常运行所有的测试，因为 7 分钟太长了。

所以这里有一个问题： **当你修改一些类时，有没有办法让 JUnit 只运行*可能*受到这些类更改影响的测试？**

我的意思是，使用类加载器功能这听起来是可行的：在运行每个测试之后，可以知道已为该测试加载了哪些类，并在某处（甚至在内存中）存储用于该测试的每个类的签名。

当 Junit 再次启动时，对于每个测试，它可以检查自上次运行以来此测试使用的类是否已被修改，如果没问题并且没有影响测试的类已更改，则不启动测试。（如果上次运行的测试没问题，应该没问题）

有人知道这是否已经完成/实施了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:20:47.947

您可以尝试使用Eclipse 或 IntelliJ 中的[**Infinitest**](http://infinitest.github.com/)。（编辑拼写）

# c++ - 套接字编程初学者问题

> ID：15279406
> 
> 赞同：1
> 
> 时间：2013-03-07T18:54:41.190
> 
> 标签：c++, actionscript-3, sockets, server-side

我对整个套接字和服务器开发真的很陌生，我还不熟悉它是如何工作的。

我制作了一个需要与套接字通信的简单闪存应用程序，我使用了一个支持 AS3 并在“Red Tamarin”上工作的套接字，

好吧，我会进入正题：

我目前有一个始终运行 socket.receive() 的循环，它响应甚至显示我从 Flash 应用程序发送的文本。

我的目标是做一个简单的在线flash游戏，大概使用SQL/SQLite来保存信息并导出给玩家，

我不明白的是我怎么能把它带到那里..

我认为我需要做的是这样的：

在服务器端：

*   只要服务器处于活动状态，就有一个循环运行，该循环应该始终检查它与客户端的每个连接并等待来自它们的命令，例如登录、更新玩家位置、断开连接、请求给定位置的对象列表

客户端：

*   根据动作向服务器发送信息，例如当玩家移动时，以类似的方式向服务器发送新位置：“MovePlayer[name][x][y]”

我的计划真的应该是这样吗？关于发送的实际信息，我很好奇，不断发送服务器字符串数据是否有效？（这就是我习惯使用的，而不是一些奇怪的字节和东西）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:27:36.977

你在正确的轨道上。但我鼓励您首先定义一个通信协议。您可以从定义命令的外观开始。例如：

```
COMMAND <space> PARAM1 <space> PARAM2 <line-break> 
```

关于协议定义的一些注意事项：

1.  如果`PARAM1`是一个字符串并包含空格怎么办？你怎么知道每个参数的开始和结束？
2.  您的参数还可以包含换行符。
3.  如果您的客户端应用程序是由您的客户安装的，他们将需要不时更新它。更复杂的是，即使您更改了协议，他们也可能运行旧版本并期望它能够工作。这需要协议版本控制。如果您需要用户交互来更新应用程序的客户端部分，请记住这一点。

这些是我可以为您的方案考虑的最基本的考虑因素。可能还有其他重要的考虑因素，但其中大部分取决于您的游戏如何运作。如果您认为我忘记了 OP 应该考虑的内容，请随时修改我的列表。

在定义命令的外观后，记录您认为应用程序需要的所有命令。不要分离命令的定义，除非它对您的某些操作来说太复杂或太长。尽量保持简单。

现在回到你的问题：

> 我的计划真的应该是这样吗？

是的。这正是它应该的样子。

> 关于发送的实际信息，我很好奇，不断发送服务器字符串数据是否有效？（这就是我习惯使用的，而不是一些奇怪的字节和东西）

这取决于许多因素：

1.  您正在使用哪种协议（TCP、UDP 等）；
2.  并发客户端数；
3.  处理命令的平均时间；
4.  你会向其他玩家广播更新吗？
5.  你是如何实现你的服务器应用程序的；
6.  身体限制：
    1.  硬件：CPU、内存等；
    2.  网络：带宽、延迟等；

[![TCP 与 UDP](../Images/7ab2f7971f4c50dae1947300a097f404.png)](https://i.stack.imgur.com/m4QX5.jpg)
[（来源：[it20.info](http://www.it20.info/misc/pictures/TCP-clouds-UDP-clouds-design-for-fail-and-AWS1.jpg)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T17:31:02.480

看看这个 [https://code.google.com/p/spitfire-and-firedrop/](https://code.google.com/p/spitfire-and-firedrop/)

在那里，您将看到使用 redtamarin 构建套接字服务器的基础知识

特别参见 [https://code.google.com/p/spitfire-and-firedrop/source/browse/trunk/spitfire/src/spitfire/Server.as](https://code.google.com/p/spitfire-and-firedrop/source/browse/trunk/spitfire/src/spitfire/Server.as)

详细信息如下，redtamarin 基本上使用带有 select() 的阻塞套接字，最大硬编码 FD_SETSIZE 为 4096，请参见： [https ://code.google.com/p/redtamarin/wiki/Socket#maxConcurrentConnection](https://code.google.com/p/redtamarin/wiki/Socket#maxConcurrentConnection)

所以在这里你的服务器循环中发生了什么

你基本上有一个套接字对象数组

您每 x 毫秒循环一次，并为每个套接字询问您是否可以读取它

如果您可以在套接字上读取，然后比较此套接字 obj 是否是服务器，如果它是服务器，则意味着您有一个新连接，如果不是，则意味着客户端尝试向您发送数据，因此您读取此数据然后传递它给“翻译”

稍后在同一个循环中，您检查套接字 obj 是否仍然有效，如果您可以写入并且可以写入并且套接字对象不是服务器，那么您可以将数据发送到客户端

这里是 C 中的等效代码供参考 [http://martinbroadhurst.com/source/select-server.c.html](http://martinbroadhurst.com/source/select-server.c.html) [http://www.lowtek.com/sockets/select.html](http://www.lowtek.com/sockets/select.html)

对于一个非常基本的示例，请查看 socketpolicyd

[https://code.google.com/p/spitfire-and-firedrop/wiki/socketpolicyd](https://code.google.com/p/spitfire-and-firedrop/wiki/socketpolicyd) [https://code.google.com/p/spitfire-and-firedrop/source/browse/trunk/socketpolicyd/src/spitfire /SocketPolicyServer.as](https://code.google.com/p/spitfire-and-firedrop/source/browse/trunk/socketpolicyd/src/spitfire/SocketPolicyServer.as)

并将实现与 Perl 和 PHP [http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html进行比较](http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html)

# c# - 不存在从对象类型 DataTable 到已知托管提供程序本机类型的映射

> ID：15279410
> 
> 赞同：2
> 
> 时间：2013-03-07T18:54:57.687
> 
> 标签：c#, sql, visual-studio-2010, ado.net

我正在尝试将数据表作为参数传递到 sql 存储过程中。

我有一个助手类为我执行代码：

我正在使用的辅助类方法：

```
public int ExecNonQueryProc(string proc, params object[] args)
{
    using (SqlCommand cmd = CreateCommand(proc, CommandType.StoredProcedure, args))
    {
        return cmd.ExecuteNonQuery();
    }
}

public SqlCommand CreateCommand(string qry, CommandType type, params object[] args)
{
    SqlCommand cmd = new SqlCommand(qry, _conn);

    // Associate with current transaction, if any
    if (_trans != null)
        cmd.Transaction = _trans;

    // Set command type
    cmd.CommandType = type;

    // Construct SQL parameters
    for (int i = 0; i < args.Length; i++)
    {
        if (args[i] is string && i < (args.Length - 1))
        {
            SqlParameter parm = new SqlParameter();
            parm.ParameterName = (string)args[i];
            parm.Value = args[++i];
            cmd.Parameters.Add(parm);
        }
        else if (args[i] is SqlParameter)
        {
            cmd.Parameters.Add((SqlParameter)args[i]);
        }
        else throw new ArgumentException("Invalid number or type of arguments supplied");
    }
    return cmd;
} 
```

* * *

我的 SQL 存储过程：

```
ALTER PROCEDURE [dbo].[sp_insert_input_portfolio_metrics]
@TYPE_INPUT_PORTFOLIO_METRICS TYPE_INPUT_PORTFOLIO_METRICS readonly
-- Add the parameters for the stored procedure here 
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

delete from dbo.INPUT_PORTFOLIO_METRICS
where ID in (select ID from dbo.INPUT_PORTFOLIO_METRICS a 
inner join @TYPE_INPUT_PORTFOLIO_METRICS b
on a.Portfolio = b.portfolio and a.Portfolio_Val_date = b.portfolio_val_date)  
END 
```

* * *

我是如何执行的：

```
private void simpleButton_UploadAll_Click(object sender, EventArgs e)
{

    AdoHelper adocommand = new AdoHelper();
    var dt = new DataTable();
    dt = wizard_tables.PerformanceDetail.Copy();

    adocommand.ExecNonQueryProc("sp_insert_input_portfolio_metrics",
                                "@TYPE_INPUT_PORTFOLIO_METRICS", dt);

} 
```

* * *

我收到的错误：

> 不存在从对象类型 Risk_Performance_Platform.Datasets.DS_Wizard_Tables+PerformanceDetailDataTable 到已知托管提供程序本机类型的映射。

我试图按照 Navid Farhadi 关于 [如何将数据表插入 SQL Server 数据库表中的示例进行操作？](https://stackoverflow.com/questions/9075159/how-to-insert-a-data-table-into-sql-server-database-table?answertab=active#tab-top)

# php - 将 Ajax 中的参数传递给 JSON Web 服务

> ID：15279412
> 
> 赞同：0
> 
> 时间：2013-03-07T18:55:13.207
> 
> 标签：php, javascript, jquery, json

我正在使用 AJAX 从 PHP 构建的 Web 服务请求一些信息，但是我传递的参数似乎没有转到我的代码如下的 Web 服务：

```
$(document).on( "pageinit", "#player", function( e ) {
var passedId = (passDataObject.selectedHref != null ? passDataObject.selectedHref :    window.location.href).replace( /.*id=/, "" );
alert(passedId); // test passedId has the correct value within it 
var surl =  "a working url";
$.ajax({
    type: "GET",
    url: surl,
    data: "&Track="+passedId,
    dataType: "jsonp",
    cache : false,
    jsonp : "onJSONPLoad",
    jsonpCallback: "trackcallback",
    crossDomain: "true",
    success: function(response) {
       alert('tracks function');
    },
    error: function (xhr, status) {           
       alert('Unknown error ' + status);
    }       
 });        
});

//callback function for player page
function trackcallback(rtndata) 
{ 
alert(rtndata.track_name); // show up as undefined 
} 
```

passId 中的值正确且 URL 很好，但是即使 SQL 语句很好，Web 服务也不会产生结果。我假设问题出在我的 php Web 服务`$id = $_REQUEST['Track'];`中的这一行，因为它从 JavaScript 获取值以执行 SQL。任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:59:07.433

看下面这段代码，参数名前没有“&”：

> ```
>  $.ajax({
>                 url: homeUrl + "/Getsomething",
>                 data: "parameterhere=" +$(element).attr('attrHere'),
>                 type: 'GET',
>                 contentType: "application/json",
>                 dataType: "json",
>                 cache: false,
>                 success: function (result) {  
>                     //do stuff
>                 },
>                 error: function (xhr, ajaxOptions, thrownError) {
>                     //error handling
>                 }
>             }); 
> ```

如果你像上面的代码那样使用 ajax 会发生什么？

# vim - 设置 vim 错误格式的问题

> ID：15279413
> 
> 赞同：1
> 
> 时间：2013-03-07T18:55:16.950
> 
> 标签：vim, errorformat

我的编译器和 lint 工具以两种不同的格式输出错误。我决定逐步设置我的错误格式，首先用于 lint，然后为编译器添加模式。

这是我要匹配的 lint 输出行

```
"C:\Documents and Settings\user\Projects\MyProject\trunk\src\myfile.c",126  Info 754: local structure member 'myStructMember' (line 126, file C:\Documents and Settings\user\Projects\MyProject\trunk\src\myfile.c) not referenced 
```

我的第一次尝试是

```
set errorformat=\"%f\"\\,%l\ \ %t%s 
```

它奏效了。

然后我尝试如下设置

```
set errorformat=\"%f\"\\,%l\ \ %t\ %s 
```

它停止工作。

有谁知道是什么问题？我确实阅读了文档，但没有帮助。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:24:42.793

```
" Match the filename and line number
let &errorformat = '"%f"\,%l'

" Match white space, first character of error type, the rest of the characters
" of the error type, and white space again.
let &errorformat .= '%*\s%t%*\w%*\s'

"Match error number, whitespace and error message.
let &errorformat .= '%n:%*\s%m' 
```

# scala - 当一个库尝试从另一个库访问一个类时，使用 SBT 运行集成测试时发生 ClassNotFoundException

> ID：15279420
> 
> 赞同：1
> 
> 时间：2013-03-07T18:55:32.893
> 
> 标签：scala, sbt

我们有一个复杂的 Scala 项目，它使用了来自 Scala / Java 世界的许多不同的库。我们使用 lift-json 从我们的数据源生成 Json 输出。有时，我们需要将其中的一部分缓存到 memcached。我们为此使用 spymemcached。在某些情况下，我们直接在 Memcached 中缓存 lift-json JObject 序列，而不使用任何其他抽象。

这很好用：

*   生产中
*   从 IDE (IntelliJ) 运行集成测试时
*   在我们的暂存环境中

但是，当使用 运行我们的集成测试时`sbt it:test`，我们从 Spymemcached 中得到以下异常：

```
2013-03-07 13:26:04.393 WARN net.spy.memcached.transcoders.SerializingTranscoder:  Caught CNFE decoding 4074 bytes of data
java.lang.ClassNotFoundException: net.liftweb.json.JsonAST$JObject
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:266)
    at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at scala.collection.immutable.$colon$colon.readObject(List.scala:404)
    at sun.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1872)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at net.spy.memcached.transcoders.BaseSerializingTranscoder.deserialize(BaseSerializingTranscoder.java:100)
    at net.spy.memcached.transcoders.SerializingTranscoder.decode(SerializingTranscoder.java:66)
    at net.spy.memcached.transcoders.TranscodeService$1.call(TranscodeService.java:42)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at net.spy.memcached.transcoders.TranscodeService$Task.run(TranscodeService.java:89)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

我们的测试仍在运行，所以这是一个低优先级的错误。但是我们希望我们的测试在尽可能接近生产的环境中运行（这实际上是有效的）。我希望 spymemcached 每次都知道lift-json 的存在。

这看起来像一个类路径问题，但我很难确切地找到如何找到这个问题。

# javascript - 从 bean 有条件地调用 JavaScript

> ID：15279424
> 
> 赞同：1
> 
> 时间：2013-03-07T18:55:47.100
> 
> 标签：javascript, jsf, primefaces

如何从 JSF 2 中的 bean 有条件地调用 JavaScript？

我有一个使用 PrimeFaces 的类，它将用户文件上传到特定文件夹，但是如果用户尝试上传与已经存在的文件同名的文件，我希望 JavaScript 在这种情况下在屏幕上打开一个框询问用户是否要覆盖旧文件，或取消操作。如果不存在具有该名称的文件，则不调用 JavaScript。

我知道如何测试文件夹中是否包含特定文件，只是我需要知道如何有条件地调用 JavaScript。

我将不胜感激有关此的任何建议。

* * *

我在网上查看了各种资源，但仍然无法让应用程序正常工作。基本上，这就是我所做的，在包含的 xhtml 页面中，我有以下文件上传代码：

```
<p:fileUpload id="fileUpload" fileUploadListener="#{filters.upload}"
   allowTypes="#{filters.uploadTypes}" invalidFileMessage="#{filters.uploadBadType}"
   sizeLimit="#{filters.uploadSize}" invalidSizeMessag="#{filters.uploadBadSize}"
   update="fileUpload fileTable uploadMessage" description="Select Text File"
   disabled="#{filters.disableFileUploadButton}"/>

<!--- Then further in the same file is this: -->

<p:remoteCommand name="remoteCommandOverwrite" actionListender="#{filters.execOverwrite}"/> 
```

包含上述内容的父 xhtml 页面我有愚蠢的 JavaScript：

```
<script type="text/javascript">
  function popupConfirm() {
    var overwrite = confirm('Warning: This will overwrite the existing file - Do you confirm this?');
    if (overwrite) remoteCommandOverwrite([{name: overwrite, value: true}]);
  }
</script> 
```

在我的 bean 中，我在三种方法中有以下代码：

```
 public void upload(FileUploadEvent event) {
    FacesMessage msg = new FacesMessage("Success! ", event.getFile().getFileName() + " is uploaded.");  
    FacesContext.getCurrentInstance().addMessage(null, msg);
    overwrite = false;
    // Do what you want with the file        
    try {
        copyFile(event.getFile().getFileName(), event.getFile().getInputstream());
    } catch (IOException e) {
        e.printStackTrace();
    }
}

    public void copyFile(String fileName, InputStream in) {

     // Initialization etc.

                    File file = new File(uploadFull + fileName);
        if (file.exists()) {
            RequestContext.getCurrentInstance().execute("popupConfirm()");

// Then test to see if overwrite is true or false, and act accordingly

}

// Then I am supposed to get the value of overwrite here:
public void execOverwrite() {
    System.out.println("### execOverwrite() ###");
    FacesContext context = FacesContext.getCurrentInstance();
    Map<String, String> map = context.getExternalContext().getRequestParameterMap();
    String soverwrite = (String) map.get("overwrite");
    if (soverwrite.equals("true")) {
        overwrite = true;
        System.out.println("overwrite: true");
    }
} 
```

我要做的是首先有条件地调用 JavaScript 函数 popupConfirm()。如果代码为真，则单击“上传”按钮，这就是我想要的。然后应该调用

这有效并打开了确认（）框，但从未调用过，因此我的 bean 中的方法 execOverwrite() 也从未被调用，我无法获取返回值并将其传递给方法 copyFile( ）。出了什么问题？

* * *

我把这个问题搁置了大约一个星期，然后才回来。我让它工作，并且可以将一个值传递回 bean，但不知何故，我需要从调用 JavaScript 的地方恢复执行。

总而言之，我的 JavaScript 包含以下代码：

```
<script type="text/javascript">
  function popupConfirm() {
    var overwrite = confirm('Warning: This will overwrite the existing file - Do you confirm this?');
    if (overwrite) remoteCommandOverwrite([{name: 'overwrite', value: 'true'}]);
  }
 </script> 
```

在 xhtml 代码中，我有：

```
<p:fileUpload id="fileUpload" fileUploadListener="#{filters.upload}" ...../>

<!-- Other code -->

<p:remoteCommand name="remoteCommandOverwrite" actionListener="#{filters.execOverwrite}"/> 
```

然后在单击选择文件按钮后单击文件上传按钮，执行上面列出的 JavaScript 中的代码：

```
RequestContext.getCurrentInstance().execute("popupConfirm()"); 
```

然后单击对话框中的“确定”，在同一个 bean 中调用此方法：

```
public void execOverwrite() {
    FacesContext context = FacesContext.getCurrentInstance();
    Map<String, String> map = context.getExternalContext().getRequestParameterMap();
    String soverwrite = map.get("overwrite");
    if (soverwrite.equals("true")) {
        overwrite = true;       }
    }
} 
```

最终将测试标志“覆盖”以查看它是否为真。

使用各种打印语句，我检查它是否有效。但是，代码在遇到以下语句后并没有恢复执行：RequestContext.getCurrentInstance().execute("popupConfirm()"); 无论我在对话框中输入“确定”还是“取消”，这都是我想要它做的。看起来好像需要某种类型的回调，并且非常感谢一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:39:41.323

根据您的标签，您正在使用 PrimeFaces，因此当浏览器完成处理服务器响应时，有一种简单的方法可以从服务器端事件托管 bean 方法调用 javascript 函数。PrimeFaces 为您提供了一个名为`RequestContext`.

```
public void doActionListenerMethod() {
  if (!isValid()) {
    RequestContext.getCurrentInstance().execute("MyJSObject.doClientSideStuff()");
  }
} 
```

当 JSF 在客户端完成渲染时，以下将作为 Javascript 执行字符串参数。

# css - 表格 vs div vs 跨度

> ID：15279427
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:55:51.187
> 
> 标签：css, html-table

我一直听说最好避免`<table>`在 HTML 中使用。

但是，我遇到了一种情况，在构建显示多个产品及其特征的页面时，表格会让我的生活更轻松。

我应该尝试破解它以便我不需要一张桌子，还是应该只用一张桌子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:58:45.707

不，您不应该回避 TABLE 概念。学习/使用它来显示表格数据，而不是 Web 布局。

从 W3C 了解这些元素。

1.  [表](http://www.w3.org/TR/html401/struct/tables.html)
2.  [分区](http://www.w3.org/wiki/HTML/Elements/div)
3.  [跨度](http://www.w3.org/wiki/HTML/Elements/span)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:00:22.647

我经常在网络应用程序中使用表格——它们提供了一种非常好的和可预测的方式来在任何浏览器中显示结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:00:54.710

表格用于表格数据（如 Excel 工作表等）

**当数据不是**表格时使用 CSS 。

桌子**没有**死，你只需要正确使用它们:-)

# python - 使用 sklearn GridSearchCV 查找具有大数据（15750 个样本）的优化参数

> ID：15279429
> 
> 赞同：4
> 
> 时间：2013-03-07T18:56:01.440
> 
> 标签：python, svm, scikit-learn

我正在尝试在 Python 中使用来自 sklearn 的 GridSearchCV 来查找 SVM 分类器的参数。训练数据的形状为 (15750,65536)（15750 个样本，特征维度：65536）。

在默认设置下一切正常！但是，如果我想使用并行处理选项，通过定义 n_jobs 我会遇到以下问题：数据被加载到内存中（在具有 48 GB RAM 的机器上，它大约占整个内存的 14%），但它永远不要开始网格搜索/培训！在 (h)top 上，进程状态为 S（因此它基本上已停止！）。它继续占用内存，但从未开始运行（CPU 使用率保持为零！）。

我为 n_jobs 尝试了不同的值，例如 2,3-5（机器有 8 个内核）。但没有运气！根据文档，对于大数据，可以在 GridSearchCV 中使用 pre_dispatch 选项，这样可以限制复制数据的数量并避免内存问题。所以我什至尝试了 n_job=2 和 pre_dispatch=1，但仍然没有任何效果！

我还应该提到，我尝试了相同的代码，但样本数量要少得多，比如 1000 个，而且一切都很好！然而，问题是，鉴于一个进程的数据只占用机器内存的 15%，为什么它不能在至少两个内核上运行，且 pre_dispatch=2 ？然后它应该占用大约 30% 的机器内存。但是为什么该过程刚刚停止？甚至没有内存错误？如果有办法解决它？

这是完成这项工作的一段代码（主要取自 sklearn 文档）：

sklearn 版本：0.12.1 和 python 版本：2.7.3

```
tuned_parameters = [{'kernel': ['rbf'], 'gamma': [1e-3, 1e-4],
                     'C': [1, 10, 100, 1000]},
                    {'kernel': ['linear'], 'C': [1, 10, 100, 1000]}]

clf = GridSearchCV(SVC(C=1), tuned_parameters, n_jobs=2, verbose=3,  pre_dispatch=1)
clf.fit(tr, tt, cv=3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:14:55.983

您是否尝试过 n_jobs = -1，它指示 sklearn 使用所有 CPU？这个设置对我来说非常有效（尽管我的训练样本数量要少得多）。

# android - 使用意图选择器共享图像

> ID：15279430
> 
> 赞同：0
> 
> 时间：2013-03-07T18:56:04.183
> 
> 标签：android, android-intent, android-facebook

如何使用意图选择器共享图像。我努力了

```
Intent share = new Intent(Intent.ACTION_SEND);
        share.setType("image/png");

        share.putExtra(Intent.EXTRA_STREAM,
          Uri.parse(url)); 
```

网址来自互联网

我可以使用上面的代码共享文本，图像没有附加。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T18:58:24.773

尝试这样做，我认为它会起作用

```
Uri uri = Uri.fromFile(new File(filename));
share.putExtra(Intent.EXTRA_STREAM, uri); 
```

# html - 从智能手机查看时如何使固定侧边栏显示得很好

> ID：15279434
> 
> 赞同：0
> 
> 时间：2013-03-07T18:56:15.407
> 
> 标签：html, css, twitter-bootstrap, css-position, sidebar

我正在为我的简单网页使用引导程序和一些自定义 css。我有一个固定的侧边栏，它在用户滚动`#content`div 时保持其位置。但是，当在智能手机上查看网页时（或者浏览器的宽度变小），侧边栏会变得很奇怪，而不是很好地占据网站的顶部。

我正在寻找的行为与[Twitter 的引导站点](http://twitter.github.com/bootstrap/components.html#buttonGroups)相同。减小浏览器的宽度以了解我的意思。

我目前的结构是这样的：

```
<div class="span3" style="position:fixed">
    // sidebar stuff
</div>

<div class="span8 offset3">
    // content
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:02:08.757

您可以为此使用媒体查询。

> 媒体查询由媒体类型和零个或多个检查特定媒体功能条件的表达式组成。

此媒体查询表示样式表可用于视口（呈现文档的屏幕/纸张的部分）宽度在 400 到 700 像素之间的设备上：

```
@media screen and (min-width: 400px) and (max-width: 700px) { … } 
```

**来源：[http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)**

# mysql - 针对混合方向的多字段排序优化索引

> ID：15279436
> 
> 赞同：0
> 
> 时间：2013-03-07T18:56:15.767
> 
> 标签：mysql, optimization, indexing

我正在尝试优化 MySQL 表以加快读取速度。读取与写入的比率约为 100:1，因此我倾向于牺牲多索引的写入性能。

我的表的相关字段如下，它包含大约 200000 条记录

```
CREATE TABLE `publications` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  -- omitted fields
  `publicaton_date` date NOT NULL,
  `active` tinyint(1) NOT NULL DEFAULT '0',
  `position` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  -- these are just attempts, they are not production index
  KEY `publication_date` (`publication_date`),
  KEY `publication_date_2` (`publication_date`,`position`,`active`)
) ENGINE=MyISAM;`enter code here` 
```

由于我使用 Ruby on Rails 来访问该表中的数据，因此我为该表定义了一个默认范围，即

```
default_scope where(:active => true).order('publication_date DESC, position ASC') 
```

即默认情况下，该表中的每个查询都会使用以下SQL片段自动完成，因此您可以假设几乎所有查询都会有这些条件

```
WHERE `publications`.`active` = 1 ORDER BY publication_date DESC, position 
```

所以我主要对优化这种查询感兴趣，加上在 WHERE 条件下使用 publication_date 的查询。

我尝试了以下索引的各种组合（同时也有多个）

```
`publication_date`
`publication_date`,`position`
`publication_date`,`position`,`active` 
```

然而，一个简单的查询，因为这个仍然没有正确使用索引并使用文件排序

```
SELECT  `publications`.* FROM `publications`  
WHERE `publications`.`active` = 1 
AND (id NOT IN (35217,35216,35215,35218)) 
ORDER BY publication_date DESC, position
LIMIT 8 OFFSET 0
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: publications
         type: ALL
possible_keys: PRIMARY
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 34903
        Extra: Using where; Using filesort
1 row in set (0.00 sec) 
```

关于我的问题的一些考虑：

*   根据 MySQL 文档，当您在 ORDER BY 子句中混合 ASC 和 DESC 时，复合索引不能用于排序
*   `active`是一个布尔标志，所以把它放在一个独立的索引中没有意义（它只有 2 个可能的值）但它总是在 WHERE 子句中使用，所以它应该出现在索引中的某个地方以避免在 Extra 中使用 where
*   `position`是一个可能值很少的整数，并且它总是使用范围，`publication_date`所以我认为将它放在独立索引中是没有用的
*   许多查询`publication_date`在 where 部分中使用，因此将它也放在独立索引中会很有用，即使是多余的并且它是复合索引的第一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T01:46:03.793

一个问题是您在 order by 子句中混合了排序顺序。您可以反转您的位置**（inverted_position = max_position - position）**，以便您也可以反转该列的排序顺序。

然后，您可以在**[publication_date，inverted_position]**上创建一个复合索引，并将您的 order by 子句更改为**publication_date DESC，inverted_position DESC**。

**活动**列很可能不是索引的一部分，因为它的选择性非常低。

# c# - C# 和 Access 2007：插入和更新功能无法正常工作？

> ID：15279440
> 
> 赞同：0
> 
> 时间：2013-03-07T18:56:29.970
> 
> 标签：c#, ms-access-2007

我有两个功能。[Soner Gönül](https://stackoverflow.com/users/447156/soner-gonul)提供的插入函数（谢谢），......

表名学生

数据库

```
 `Field Name    Data Type
     *StudentID Number
      StudentName   Text
      StudentCNIC   Text
      StudentDOB    Date/Time 
```

*PK

```
using System.Data.OleDb; 

private void Form1_Load(object sender, EventArgs e)
    {

        myCon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data   Source=|DataDirectory|\Access_and_CSharp.accdb");
        this.studentsTableAdapter.Fill(this.access_and_CSharpDataSet.Students);
    } 
```

插入函数

```
private void Insertbtn_Click(object sender, EventArgs e)
    {
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "INSERT INTO Students(StudentID, StudentName, StudentCNIC, StudentDOB) Values(@StudIDTxt, @StudNameTxt, @StudCNCITxt, @StudDOBTxt)";
        cmd.Parameters.AddWithValue("@StudIDTxt", StudIDTxt.Text);
        cmd.Parameters.AddWithValue("@StudNameTxt", StudNameTxt.Text);
        cmd.Parameters.AddWithValue("@StudCNCITxt", StudCNCITxt.Text);
        cmd.Parameters.AddWithValue("@StudDOBTxt", StudDOBTxt.Text);
        cmd.Connection=myCon;   
        myCon.Open();
        cmd.ExecuteNonQuery();
         myCon.Close();
    } 
```

这是更新功能

```
private void Updatebtn_Click(object sender, EventArgs e)
    {
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "UPDATE [Students] set [StudentName] = ?, [StudentCNIC] = ?, [StudentDOB] = ? WHERE [StudentID] = ?";
        cmd.Parameters.AddWithValue("@StudIDTxt", StudIDTxt.Text);
        cmd.Parameters.AddWithValue("@StudNameTxt", StudNameTxt.Text);
        cmd.Parameters.AddWithValue("@StudCNCITxt", StudCNCITxt.Text);
        cmd.Parameters.AddWithValue("@StudDOBTxt", StudDOBTxt.Text);
        cmd.Connection = myCon;
        myCon.Open();
        int rowsAffected = cmd.ExecuteNonQuery();
        myCon.Close();
    } 
```

问题 1 - 当我使用插入功能时，我可以在前端看到新数据。但我在 Access 中看不到新数据。其他时候当我关闭应用程序并重新启动时，新记录的不存在。如果我查看 Access 应用程序并关闭它，则打开 VS2010 应用程序新数据不存在。到底是怎么回事？

问题 2 - 当我使用更新功能时，数据在应用程序第一次运行时保持更新。当应用程序关闭并再次运行时，情况并非如此。我哪里出错了？

对于这两个问题，谁能看到问题出在哪里？

提前致谢

**编辑** 更新说我正在寻找我出错的以下网站。 [http://www.c-sharpcorner.com/uploadfile/e628d9/inserting-retrieving-records-from-ms-access-2007-using-odbc/](http://www.c-sharpcorner.com/uploadfile/e628d9/inserting-retrieving-records-from-ms-access-2007-using-odbc/)

**更新** 我有 Windows 7、MS Access 2007 和 VS 2010。我想知道这是否是问题所在。如果是，那么它可能不值得麻烦。我已经下载了 AccessDatabaseEngine 但它是 32 位的，所以我不知道？如果我使用 SQL Server 而不是 Access，可能会让我的生活更轻松。

我想这个问题被问过太多次了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:49:23.413

对于初学者，请确保您的数据库不包含在您的项目构建中。

在解决方案资源管理器中，找到您的数据库并指定**Build Action = None**和**Copy to Output Directory = Do not copy**

![截屏](../Images/82e8dd77c5b2125d44fbc849b90cd86b.png)

您的数据库应该驻留在文件夹以外的`bin`文件夹中，否则每次启动项目时，您都会将项目中的相同数据库复制到输出文件夹。

相反，将数据库定位在其他地方（`C:\Program Files (x86)\Common Files`或其他位置）并连接到它。

您的项目可能还有其他问题，但这是一个让我大吃一惊的大问题。

# python - lower() 并使用列表在文件中搜索单词

> ID：15279449
> 
> 赞同：0
> 
> 时间：2013-03-07T18:57:11.690
> 
> 标签：python

所以我想做的是把所有的行都变成小写，然后使用我的 part_list 来搜索 frys.txt 中匹配的所有单词并将其附加到项目中。我在创建一个遍历列表中每个单词的循环时遇到了很多麻烦，而实际上只是在 frys.txt 中找到了这些单词。如果可能的话，我什至试图找到双打。但我想要做的主要事情就是发现这个词存在，如果它存在，就将它附加到项目中。

任何建议都会很棒！

```
items = []
part_list = ['ccs', 'fcex', '8-12', '8-15', '8-15b', '80ha3']
f = open("C:/Users/SilenX/Desktop/python/frys.txt", "r+")
searchlines = f.readlines()
f.close()

for n, line in enumerate(searchlines):
    p = 0
    if part_list[p] in line.split():
        part_list[p] = part_list[p + 1]
        parts = searchlines[n]
        parts = parts.strip('\n')
        items.append(parts)

print items 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:06:02.650

你正在用枚举做一些我认为没有必要的复杂事情，而且看起来你的内部“循环”确实没有做你想做的事情（因为你已经写了它，它不是环形）。试试这个：

```
part_list = ['ccs', 'fcex', '8-12', '8-15', '8-15b', '80ha3']
items = []
f = open("C:/Users/SilenX/Desktop/python/frys.txt", "r") # Open the file
for line in f:
    for token in line.lower().split(): # Loop over lowercase words in the line
        if token in part_list: # If it's one of the words you're looking for,
            items.append(token) # Append it to your list.
f.close()
print items 
```

这将找到文件中出现在列表中的所有单词。它**不会**识别文件中附加到其他内容的单词，例如`"ccs."`或`"fcex8-12"`。如果需要，您必须反转搜索的工作方式，以便计算每个单词`part_list`出现在该行中的次数，而不是计算该行中有多少个单词出现在 中`part_list`。

# jquery - Jquery 在 Google CND 中不起作用

> ID：15279450
> 
> 赞同：14
> 
> 时间：2013-03-07T18:57:14.243
> 
> 标签：jquery, cdn

我刚开始创建一个 html 文件并想使用 jquery。当我像这样在本地机器上使用 jquery 时，它工作正常。

```
<script src="jquery.min.js"></script> 
```

但是当我尝试使用它时，它不起作用

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

当我像这样加载脚本时，我无法使用任何 jquery 函数。

我在这里做错了什么？

编辑：顺便说一句，我的 html 文件位于驱动器 C:/ 的本地计算机上

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T18:58:34.053

您的网址不完整。我相信他们不使用 http 是为了表明您可以使用 http 或 https，因为如果您在服务器上，则不需要它。仅当您正在运行文件系统时才需要添加它。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-07T19:00:38.270

由于 HTML 文件在您的本地计算机上，我猜您正在使用`file://`协议查看它。由于您从`<script>`标签的`src`属性中省略了协议，因此它也会使用`file://`协议并失败。

我建议使用在 localhost 上运行的简单网络服务器来托管该站点。使用 file:// 时还有一些其他奇怪的地方可能会给您带来麻烦。

# c - C + extern 声明 - 放在哪里

> ID：15279453
> 
> 赞同：1
> 
> 时间：2013-03-07T18:57:20.083
> 
> 标签：c, header, declaration, extern

好吧，我了解 extern 定义的工作原理，但我不知道放置它们的“最佳”位置是什么。考虑以下文件结构：

*   main.c / main.h / global.h
*   drv_adc.c / drv_adc.h
*   drv_pwm.c / drv_pwm.h

您可能会猜到，这对于小型微控制器来说很常见。这两个驱动程序在硬件的不同部分工作并且没有相互依赖关系。两个驱动程序都能够设置一个标志（例如：adc_irq_occured、pwm_irq_occured），它表明某些事情已经发生，并将在 main.c 中处理。

现在我可以想出两种方法来放置“extern bool adc_irq_occured;”。旗帜。

*   drv_adc.h：它在某种程度上属于 ADC 驱动程序，因此我可以将它添加到它的头文件并在 main.c 中实例化它。
*   我翻转逻辑并将 extern 声明放入我的 main.h（或 global.h，如果必须如此）并在我的 drv_adc.c 中实例化它。

现在的问题是：这里的首选选项是哪个选项？有什么好书可以让我读到这些主题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:02:20.320

```
In main.c:
int flag = 0;

In main.h:  
extern int myGlobal;

In drv_adc.c: 
#include "main.h"

In drv_pwm.c:
#include "main.h" 
```

现在变量是全局的，它的安全性较低，因此请谨慎使用，并确保任何其他 drv 文件不会篡改它。

- 编辑 - 为什么不反过来呢？

我们将`extern` **声明**放在要包含在您的其他文件中的标题中。这是因为我们**声明**了一次，告诉编译器只有*一个通用版本*的标志变量可用于我们包含在头文件中的两个 drv 文件，为了更清楚，请阅读此讨论，[将变量放在头文件与将变量放在 source 中](https://stackoverflow.com/questions/2649427/difference-between-putting-variables-in-header-vs-putting-variables-in-source?rq=1)。

# c# - 如何将 FileStream 更改为字符串？

> ID：15279455
> 
> 赞同：-4
> 
> 时间：2013-03-07T18:57:22.807
> 
> 标签：c#, filestream

在有以下代码中，如何将流更改为接收字符串变量？

```
 // open dictionary file
        FileStream fs = new FileStream(dictionaryPath, FileMode.Open, FileAccess.Read, FileShare.Read);
        StreamReader sr = new StreamReader(fs, Encoding.UTF8);

        // read line by line
        while (sr.Peek() >= 0) 
        {
            string tempLine = sr.ReadLine().Trim();
            if (tempLine.Length > 0)
            {
                // check for section flag
                switch (tempLine)
                {
                    case "[Copyright]" :
                    case "[Try]" : 
                    case "[Replace]" : 
                    case "[Prefix]" :

                    ...
                    ...
                    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:02:09.453

看起来您只需要调用`ReadLine()`- 在这种情况下，您可以将类型更改`sr`为`TextReader`。

然后，您可以将您的替换`StreamReader`为[StringReader](http://msdn.microsoft.com/en-us/library/system.io.stringreader.stringreader.aspx)并传入您要使用的字符串：

```
TextReader sr = new StringReader(inputString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:22:13.290

我的建议..“如果可以的话，请远离溪流”

在这种情况下，您可以

1）读取字符串变量中的所有文件；

2) 在行尾字符 ( `\r\n`)处将其拆分为字符串数组

3）做一个简单的`foreach`循环，把你的switch语句放在里面

小例子：

```
string dictionaryPath = @"C:\MyFile.ext";

string dictionaryContent = string.empty;

try // intercept file not exists, protected, etc..
{
    dictionaryContent = File.ReadAllText(dictionaryPath);
}
catch (Exception exc)
{
    // write error in log, or prompt it to user
    return; // exit from method
}

string[] dictionary = dictionaryContent.Split(new[] { "\r\n" }, StringSplitOptions.None);

foreach (string entry in dictionary)
{
    switch (entry)
    {
        case "[Copyright]":
            break;

        case "[Try]":
            break;

        default:
            break;
    }
} 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:02:09.780

你的意思是[StringReader](http://msdn.microsoft.com/fr-fr/library/system.io.stringreader.aspx)吗？它创建一个读取字符串内容的流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:11:53.410

如果你有一个字符串，并且你想像读取流一样读取它：

```
byte[] byteArray = Encoding.ASCII.GetBytes(theString);
MemoryStream stream = new MemoryStream(byteArray); 
```

# java - 了解 Eclipse IDE 中的 Log Cat 错误

> ID：15279456
> 
> 赞同：0
> 
> 时间：2013-03-07T18:57:26.043
> 
> 标签：java, php, android, json, parsing

我正在制作一个 android 应用程序，每次尝试运行我的应用程序时都会出现一些错误。

我已经阅读了一些关于 Java 中的空指针异常的材料，但实际上无法实现任何解决方案。

我的代码中似乎有一个需要纠正的错误。

供您参考，我的日志中出现以下错误：

```
03-07 18:42:27.562: W/dalvikvm(631): threadid=1: thread exiting with uncaught exception (group=0x40014760)
03-07 18:42:27.582: E/AndroidRuntime(631): FATAL EXCEPTION: main
03-07 18:42:27.582: E/AndroidRuntime(631): java.lang.NullPointerException
03-07 18:42:27.582: E/AndroidRuntime(631):  at com.fokrul.justdeals.ActivityTab$BooksAdapter.getView(ActivityTab.java:1453)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.AbsListView.obtainView(AbsListView.java:1970)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.ListView.makeAndAddView(ListView.java:1756)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.ListView.fillDown(ListView.java:656)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.ListView.fillFromTop(ListView.java:716)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.ListView.layoutChildren(ListView.java:1595)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.AbsListView.onLayout(AbsListView.java:1800)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.View.layout(View.java:9581)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1282)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.view.ViewRoot.handleMessage(ViewRoot.java:2040)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.os.Looper.loop(Looper.java:132)
03-07 18:42:27.582: E/AndroidRuntime(631):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-07 18:42:27.582: E/AndroidRuntime(631):  at java.lang.reflect.Method.invokeNative(Native Method)
03-07 18:42:27.582: E/AndroidRuntime(631):  at java.lang.reflect.Method.invoke(Method.java:491)
03-07 18:42:27.582: E/AndroidRuntime(631):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-07 18:42:27.582: E/AndroidRuntime(631):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-07 18:42:27.582: E/AndroidRuntime(631):  at dalvik.system.NativeStart.main(Native Method) 
```

我无法弄清楚真正的问题是什么！任何想法这些错误可能指向什么？

您的帮助将不胜感激。先感谢您。

编辑：1 ACTIVITYTAB.JAVA

```
// to get a View that displays the data at the specified position in the data set. 
        public View getView(int position, View convertView, ViewGroup parent) {
            PromotionsHolder holder; 
            if(convertView == null){
                convertView = inflater.inflate(R.layout.item_product, null);
                holder = new PromotionsHolder();
                holder.imgImage = (ImageView)convertView.findViewById(R.id.imgImage);
                holder.imgImage.getLayoutParams().height = 80;
                holder.imgImage.getLayoutParams().width = 80;
                holder.tvName = (TextView)convertView.findViewById(R.id.tvName);
                holder.tvTitle = (TextView)convertView.findViewById(R.id.tvTitle);
                holder.tvPrice = (TextView)convertView.findViewById(R.id.tvPrice);
                convertView.setTag(holder);
            }else{
                holder = (PromotionsHolder)convertView.getTag();
            }
            Bitmap bmp = BitmapFactory.decodeFile(soImage.get(position));
            holder.imgImage.setImageBitmap(bmp);
            holder.tvTitle.setText(soTitle.get(position));
            ((TextView) holder.tvCode).setText(soCode.get(position));
            holder.tvPrice.setText(soPrice.get(position));

            return convertView;
        }
    }

    private static class ProductsHolder{
        ImageView imgImage;
        TextView tvCode, tvPrice, tvTitle;
    }

    private class BooksAdapter extends BaseAdapter{
        private LayoutInflater inflater;
        private ArrayList<String> list;

        public BooksAdapter(ArrayList<String> ll){
            inflater = (LayoutInflater)ActivityTab.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            list = ll;
        }

        //number of items in the data set are linked by this Adapter.
        public int getCount() {
            return list.size();
        }

        // to get data item associated with the specified position in the data set.
        public Object getItem(int position) {
            return list.get(position);
        }

        // to get the row id associated with the specified position in the list.
        public long getItemId(int position) {
            return position;
        }

        // to get a View that displays the data at the specified position in the data set.
        public View getView(int position, View convertView, ViewGroup parent) {
            ProductsHolder holder; 
            if(convertView == null){
                convertView = inflater.inflate(R.layout.item_product, null);
                holder = new ProductsHolder();
                holder.imgImage = (ImageView)convertView.findViewById(R.id.imgImage);
                holder.imgImage.getLayoutParams().height = 80;
                holder.imgImage.getLayoutParams().width = 80;
                holder.tvCode = (TextView)convertView.findViewById(R.id.tvCode);
                holder.tvTitle = (TextView)convertView.findViewById(R.id.tvTitle);
                holder.tvPrice = (TextView)convertView.findViewById(R.id.tvPrice);
                convertView.setTag(holder);
            }else{
                holder = (ProductsHolder)convertView.getTag();
            }
            Bitmap bmp = BitmapFactory.decodeFile(bImage.get(position));
            holder.imgImage.setImageBitmap(bmp);
            holder.tvTitle.setText(bTitle.get(position)); <----Line 1453
            holder.tvCode.setText(bCode.get(position));    
            holder.tvPrice.setText(bPrice.get(position));

            return convertView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:58:49.970

> NullPointerException 的原因

当任何对象包含 null 并且您尝试访问它时，就会发生这种情况。

例如。

```
String str = null;
Log.v("App",str); 
```

检查 ActivityTab.java:1453。在这种情况下，它发生在这条线上。

# python - Python 3.0+ 计算模式

> ID：15279457
> 
> 赞同：1
> 
> 时间：2013-03-07T18:57:26.240
> 
> 标签：python

我编写了一个程序来计算最常出现的数字。除非您在列表中有 2 个出现次数最多的数字，例如 7、7、7、9、9、9，否则此方法效果很好。为此，我写道：

```
if len(modeList) > 1 and modeList[0] != modeList[1]:
    break 
```

但后来我遇到了其他问题，比如一组 7、9、9、9、9 的数字。我该怎么办。下面是我的代码，它将计算一种模式。

```
list1 = [7,7,7,9,9,9,9]
numList=[]
modeList=[]
finalList =[]
for i in range(len(list1)):
    for k in range(len(list1)):
        if list1[i] == list1[k]:
            numList.append(list1[i])
numList.append("EOF")
w = 0
for w in range(len(numList)):
    if numList[w] == numList[w + 1]:
        modeList.append(numList[w])
    if numList[w + 1] == "EOF":
        break
w = 0
lenMode = len(modeList)
print(lenMode)
while lenMode > 1:
    for w in range(lenMode):
        print(w)
        if w != lenMode - 1:
            if modeList[w] == modeList[w + 1]:
                finalList.append(modeList[w])
                print(w)
    lenFinal = len(finalList)
    modeList = []
    for i in range(lenFinal):
        modeList.append(finalList[i])
    finalList = []
    lenMode = len(modeList) 
```

接着

```
print(modeList) 
```

我们还没有学过计数器，但如果有人能解释一下，我会愿意接受的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:00:27.970

我会用[`collections.Counter`](http://docs.python.org/release/3.1.5/library/collections.html#counter-objects)这个：

```
>>> from collections import Counter
>>> c = Counter([7,9,9,9,9])
>>> max(c.items(), key=lambda x:x[1])[0]
9 
```

这真的很简单。它所做的只是计算每个值在列表中出现的次数，然后选择计数最高的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T19:41:36.353

我会用[`statistics.mode()`](https://docs.python.org/3/library/statistics.html#statistics.mode)这个。如果有多个模式，它将引发异常。如果您需要处理多种模式（我不清楚是否是这种情况），您可能想要使用`collections.Counter`NPE 建议的对象。

# mysql - 查找此 SQL 语句中的错误的一些帮助

> ID：15279461
> 
> 赞同：0
> 
> 时间：2013-03-07T18:57:42.830
> 
> 标签：mysql, database

任何人都可以帮我检查这个 sql 语句我得到这个错误：

```
Error

>     SQL query:
>     
>     CREATE TABLE `dp_banks` (
>     `id` int( 11 ) NOT NULL AUTO_INCREMENT ,
>     `owner` int( 11 ) NOT NULL default '0',
>     `bname` varchar( 128 ) NOT NULL default '',
>     `baddress` varchar( 128 ) NOT NULL default '',
>     `bcity` varchar( 64 ) NOT NULL default '',
>     `bzip` varchar( 16 ) NOT NULL default '',
>     `bcountry` char( 2 ) NOT NULL default '',
>     `bstate` varchar( 32 ) NOT NULL default '',
>     `bphone` varchar( 32 ) NOT NULL default '',
>     `bnameacc` varchar( 128 ) NOT NULL default '',
>     `baccount` varchar( 32 ) NOT NULL default '',
>     `btype` char( 2 ) NOT NULL default '',
>     `brtgnum` varchar( 9 ) NOT NULL default '',
>     `bswift` varchar( 32 ) NOT NULL default '',
>     `status` tinyint( 1 ) NOT NULL default '0',
>     `default` tinyint( 1 ) NOT NULL default '0',
>     PRIMARY KEY ( `id` )
>     ) TYPE = MYISAM AUTO_INCREMENT =1;
>     
>     MySQL said: Documentation
>     #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to
> use near 'TYPE=MyISAM AUTO_INCREMENT=1' at line 19 
```

这是主要代码：

```
-- 
-- Table structure for table `dp_banks`
-- 

DROP TABLE IF EXISTS `dp_banks`;
CREATE TABLE `dp_banks` (
  `id` int(11) NOT NULL auto_increment,
  `owner` int(11) NOT NULL default '0',
  `bname` varchar(128) NOT NULL default '',
  `baddress` varchar(128) NOT NULL default '',
  `bcity` varchar(64) NOT NULL default '',
  `bzip` varchar(16) NOT NULL default '',
  `bcountry` char(2) NOT NULL default '',
  `bstate` varchar(32) NOT NULL default '',
  `bphone` varchar(32) NOT NULL default '',
  `bnameacc` varchar(128) NOT NULL default '',
  `baccount` varchar(32) NOT NULL default '',
  `btype` char(2) NOT NULL default '',
  `brtgnum` varchar(9) NOT NULL default '',
  `bswift` varchar(32) NOT NULL default '',
  `status` tinyint(1) NOT NULL default '0',
  `default` tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (`id`)
) TYPE=MyISAM AUTO_INCREMENT=1 ;

-- -------------------------------------------------------- 
```

我将不胜感激任何快速帮助。我已尽一切可能进行调试，但都无济于事。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:00:38.383

`TYPE`在 MySQL 4.0 中不推荐使用 table 选项。您应该改用该`ENGINE`选项：

```
ENGINE = MyISAM 
```

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)：

> 旧的 TYPE 选项是 ENGINE 的同义词。TYPE 自 MySQL 4.0 以来已被弃用，但仍支持 MySQL 5.1 中的向后兼容性（MySQL 5.1.7 除外）。**从 MySQL 5.1.8 开始，它会产生警告。它在 MySQL 5.5 中被删除。**您不应在任何新应用程序中使用 TYPE，而应立即开始将现有应用程序转换为使用 ENGINE。

^(*来源：* [http ://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html))

我猜这两个突出显示的句子之一解释了您所看到的错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:00:43.683

正确的语法是：

```
ENGINE = MYISAM 
```

# java - Android Junit 测试位图资源

> ID：15279463
> 
> 赞同：4
> 
> 时间：2013-03-07T18:57:53.423
> 
> 标签：java, android, junit4

```
public class JamTest {
Explosions EX = new Explosions(null);
private List<Bitmap> expList ;
Context mtx;

@Before
public void setUpList(){

    expList = new ArrayList<Bitmap>(2);
    Bitmap bmp1 = BitmapFactory.decodeResource(//resources here, R.drawable.ic_launcher);
    expList.add(bmp1);
}

@Test
 public void testInit(){

    assertNull(EX.getListSize().get(0));    
 }

@Test
 public void testGetlist(){
     assertEquals("Result",0,EX.getListSize().size());
 }} 
```

这是我正在尝试设置的一个简单测试用例，但我需要从测试类`setUpList()`方法访问资源。如何访问此 Android Junit 测试的图像资源？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T22:45:26.293

您可以使用[Robolectric](http://pivotal.github.io/robolectric/index.html)来实现这一点。

对于您的代码，您必须添加以下注释：

```
@RunWith(RobolectricTestRunner.class)
public class JamTest {
... 
```

接着

```
 Bitmap bmp1 = BitmapFactory.decodeResource(Robolectric.application.getResources(), R.drawable.ic_launcher); 
```

您可以在这里查看更多使用 Robolectric 的 BitmapFactory 用法：[http ://searchcode.com/codesearch/view/5789498](http://searchcode.com/codesearch/view/5789498)

# java - 如何向 actionPerformed 添加语句以调用 LinkedList 并将结果存储在新变量中

> ID：15279470
> 
> 赞同：0
> 
> 时间：2013-03-07T18:58:10.243
> 
> 标签：java, arrays, list, linked-list, gettext

如何向 actionPerformed 添加语句以调用 mkList 并将结果存储在新变量 LinkedList aList 中。

```
public void actionPerformed(ActionEvent event) {    
    if (event.getSource() == reading) {
        String s = txt1.getText();
        String delims = expression.getText(); 
        String[] anArray = s.split(delims);
        result.setText("");
        print(anArray);
    } 
    LinkedList<String> mkList;
    LinkedList<String> aList = new LinkedList<String>();

} // actionPerformed

public LinkedList<String> mkList(String[] sa) {
    LinkedList<String> st = new LinkedList<String>();
    for (int i = 0; i < sa.length && sa[i] != null; i++)
    st.add(sa[i] + "\n");
    return st;
} // mkList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:00:04.947

使`anArray`变量 成为**局部变量**，以便您可以使用它作为参数传递给`mkList()`外部方法`if statement`。

```
public void actionPerformed(ActionEvent event) {    
String[] anArray=null;  
  if (event.getSource() == reading) {
        String s = txt1.getText();
        String delims = expression.getText(); 
        anArray = s.split(delims);
        result.setText("");
        print(anArray);
    } 
    LinkedList<String> mkList;
    LinkedList<String> aList = new LinkedList<String>();
    if(anArray!=null)        
     aList = mkList(anArray);

} // actionPerformed 
```

# android - Scala - 自定义类构造函数

> ID：15279473
> 
> 赞同：0
> 
> 时间：2013-03-07T18:58:21.867
> 
> 标签：android, scala, constructor

我有一个简单的问题，但在任何地方都找不到答案。

我有以下java代码。FrameLayout 是一个具有 2 个构造函数的 android 类：

```
public class FrameLayout {
  public FrameLayout(Context context){ //do something
  }
  public FrameLayout(Context context, AttributeSet attrs){ //do something
  }
  ....
}

public class ClassA extends FrameLayout{
  public ClassA(Context c){ 
      super(c);
      callSomeInitMethod();
  }

  public ClassA(Context a, AttributeSet b){ 
        super(a,b);
        callSomeInitMethod();
  }
} 
```

我有以下scala代码，但它与默认构造函数不调用'callSomeInitMethod()'不同：

```
abstract class BaseComponent(context : Context, attrs : AttributeSet)
                                 extends FrameLayout(context, attrs) {
  def this(context : Context) = {
    this(context, null)
    callSomeInitMethod()
  } 
```

如何在 Scala 中实现这一点？谢谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:05:13.423

只需将调用`callSomeInitMethod`放入类主体即可。这使它成为主构造函数的一部分（因此，所有辅助构造函数）：

```
abstract class BaseComponent(context : Context, attrs : AttributeSet)
    extends FrameLayout(context, attrs) 
{
  callSomeInitMethod()

  def this(context : Context) = {
    this(context, null)
  }
} 
```

# asp.net-mvc - mvc 视图中的复杂 url - 谁负责构建它们？

> ID：15279476
> 
> 赞同：0
> 
> 时间：2013-03-07T18:58:27.987
> 
> 标签：asp.net-mvc, url-routing

假设我需要创建一个搜索页面。在那个页面上有：

*   具有许多搜索参数（param1、param2、...、paramN）的复杂搜索过滤器
*   结果项目列表
*   寻呼机
*   布局切换链接（列表或表格视图）

我将视图模型从我的操作传递给视图，其中包含有关搜索参数的当前值（来自 url）和一些不直接来自 url 的“猜测”参数的信息（例如，如果用户没有指定区域，我们可以猜测它来自他的 ip)。

现在，对于寻呼机中的每个链接，我必须编写这样的代码

```
<a href="@Url.Action(null, new { page = n, param1, param2, ..., paramN, region })">... 
```

对于布局切换链接，我必须编写类似但不同的代码：

```
<a href="@Url.Action(null, new { page = currentPage, mode = DisplayModes.List, param1, param2, ..., paramN, region })">list</a>
<a href="@Url.Action(null, new { page = currentPage, mode = DisplayModes.Table, param1, param2, ..., paramN, region })">table</a> 
```

我不喜欢的是有多少代码泄露给查看。它很难维护，也很难测试。

所以我在徘徊是为如此复杂的页面构建url是视图的责任还是动作的责任？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:26:43.670

我将使用`RouteValueDictionary`构建 url 的查询部分。

在操作代码中，我将填写参数并放入 ViewBag：

```
var routes = new System.Web.Routing.RouteValueDictionary();
routes.Add("param1", "value1");
routes.Add("param2", "value2");

ViewBag.routes = routes; 
```

然后在视图中构建我的链接，例如：

```
@Html.ActionLink("List", null, (RouteValueDictionary)ViewBag.routes) 
```

或者，如果您更喜欢使用 Url.Action：

```
<a href="@Url.Action(null, ViewBag.routes)">List</a> 
```

是的，复杂的逻辑应该在行动中，所以它是可单元测试的。视图中的逻辑更少 - 更好。

# android - android - 连接到服务器屏幕

> ID：15279477
> 
> 赞同：0
> 
> 时间：2013-03-07T18:58:29.533
> 
> 标签：android, android-asynctask

我有一个应用程序，它在启动时与我的服务器通信并获取一些数据。

我想在应用程序的主页上添加一些“等待窗口”，表明这种通信正在发生。我希望该窗口弹出，主页的其余部分将在后台淡出。

如果成功获取数据，此窗口将消失，然后可以正常使用。如果出现错误，或者无法建立与服务器的连接，我想提供 2 个选项：重试或关闭应用程序。

我的主要挑战是弹出窗口并使主页在后台淡出。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:05:56.380

在执行 AsyncTask 期间启动一个进度对话框，它从您的服务器获取数据并在获取所有数据后关闭对话框。

你的代码可能是这样的。

```
class LoadFeed extends AsyncTask<Void,Void,Void>{

    private Dialog progressDialog;
    Context context;

    public LoadFeed(Context context){
        progressDialog = getProgressDialog(context, "Updating Items", "Fetching updates...");
        this.context = context;
    }

    public void onPreExecute() {
        progressDialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {

        //fetching of data

        return null;

    }

    public void onPostExecute(Void unused) {
        progressDialog.dismiss();
    }

}

public Dialog getProgressDialog(Context context, String title, String msg){

     ProgressDialog dialog = new ProgressDialog(context);
     dialog.setTitle(title);
     dialog.setMessage(msg);
     dialog.setIndeterminate(true);
     dialog.setCancelable(true);

     return dialog;
} 
```

# java - 抛出你自己的异常

> ID：15279478
> 
> 赞同：0
> 
> 时间：2013-03-07T18:58:29.843
> 
> 标签：java

我是 Java 新手，一直在研究一个转换器，它将采用 dec 数字并将其转换为二进制，反之亦然。我想实现异常处理，但很难完全理解这个概念。我希望程序捕获`NumberFormatException`并抛出`NotInBinaryException`我在单独的类中创建的 a。我能够抛出新异常，但不确定如何成功捕获异常以显示`JOptionPane`将在程序上显示的异常，提示用户以二进制格式输入数字，同时清除错误并将焦点设置在文本字段上错误存在的地方。到目前为止，这是我创建的代码。如果能帮助我重回正轨，我将不胜感激。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class ImprovedBaseGui extends JFrame implements ActionListener
{
 private JTextField txtBaseTen;
 private JTextField txtBaseTwo;
 private JButton btnBaseTen;
 private JButton btnBaseTwo;
 private JButton btnClear;
 public ImprovedBaseGui()
{
    this.setTitle("Base 10/2 Converter");    
    Container canvas = this.getContentPane();

    canvas.add(createCenterPanel(), BorderLayout.CENTER);
    canvas.add(createSouthPanel(), BorderLayout.SOUTH);

    this.setResizable(false);
    this.setSize(475, 150);
    this.setLocation(800, 500);
    this.setVisible(true);
    this.setDefaultCloseOperation(this.EXIT_ON_CLOSE);
}

private JPanel createSouthPanel()
    {
        JPanel pnlSouth = new JPanel();

        btnBaseTen = new JButton("Base 10");
        btnBaseTen.addActionListener(this);
        btnBaseTen.setToolTipText( "Use to convert Base 2 to Base 10" );
        btnBaseTen.setBackground(Color.CYAN);
        pnlSouth.add(btnBaseTen);

        btnBaseTwo = new JButton("Base 2");
        btnBaseTwo.addActionListener(this);
        btnBaseTwo.setToolTipText( "Use to convert Base 10 to Base 2" );
        btnBaseTwo.setBackground(Color.YELLOW);
        pnlSouth.add(btnBaseTwo);

        btnClear = new JButton("Clear");
        btnClear.addActionListener(this);
        btnClear.setBackground(Color.RED);
        pnlSouth.add(btnClear);

        return pnlSouth;
    }

private JPanel createCenterPanel()
    {
        JPanel pnlCenter = new JPanel();
        pnlCenter.setLayout(new GridLayout(2,2));

        pnlCenter.add(wrapMeInAPanel(new JLabel ("Base 10")));
        txtBaseTen = new JTextField(16);
        txtBaseTen.setBackground(Color.YELLOW);
        pnlCenter.add(wrapMeInAPanel(txtBaseTen));

        pnlCenter.add(wrapMeInAPanel(new JLabel("Base 2")));
        txtBaseTwo = new JTextField(16);
        txtBaseTwo.setBackground(Color.CYAN);
        pnlCenter.add(wrapMeInAPanel(txtBaseTwo));

        return pnlCenter;
    }

    public static void main(String[] args)
    {
      new ImprovedBaseGui();
    }

    @Override
    public void actionPerformed(ActionEvent e)
        {

            if(e.getSource() == btnClear)
            {
                txtBaseTen.setText("");
                txtBaseTwo.setText("");
            }
            if(e.getSource() == btnBaseTwo)
            {
                try
                    {
txtBaseTwo.setText(Integer.toBinaryString(Integer.parseInt(txtBaseTen.getText())));
                    }
                catch(NumberFormatException err)
                    {
JOptionPane.showMessageDialog(this, txtBaseTen.getText()+"");
                    txtBaseTen.setText("");
                    txtBaseTen.grabFocus();
                    }

            }
            if(e.getSource() == btnBaseTen)
            {
                try
                    {
txtBaseTen.setText(Integer.toString(Integer.parseInt(txtBaseTwo.getText(), 2)));
            }
            catch(NumberFormatException err)
            {
            throw new NotInBinaryException();
                }

            }

        }

     private JPanel wrapMeInAPanel(Component c)
            {
                JPanel panel = new JPanel();
                panel.add(c);
                return panel;
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:05:09.220

`NotInBinaryException`如果您的方法无法处理`NumberFormatException`来自二进制解析的 ，您应该只抛出。但它可以处理它，你应该处理它。你不需要你的`NotInBinaryException`这里。

只需处理`NumberFormatException`与您在`txtBaseTen`案例中的处理方式类似的处理方式，尽管您可能希望为两者选择更用户友好的错误消息。

```
try
{
    txtBaseTen.setText(Integer.toString(Integer.parseInt(txtBaseTwo.getText(), 2)));
}
catch(NumberFormatException err)
{
    JOptionPane.showMessageDialog(this, txtBaseTwo.getText()+"");
    txtBaseTwo.setText("");
    txtBaseTwo.grabFocus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:39:57.580

如果您坚持使用`NotInBinaryException`，则让另一种方法为您执行转换，并让它抛出`NotInBinaryException`. 如果 your是 ，则该`throws`子句是不必要的。`NotInBinaryException``RuntimeException`

```
private String getDecimalText(String binaryText) throws NotInBinaryException
{
    try
    {
        return Integer.toString(Integer.parseInt(decimalText, 2));
    }
    catch (NumberFormatException err)
    {
        throw new NotInBinaryException();
    }
} 
```

然后在你的`actionPerformed`方法中捕捉它。

```
try
{
    txtBaseTen.setText(getDecimalText(txtBaseTwo.getText()));
}
catch(NotInBinaryException err)
{
    JOptionPane.showMessageDialog(this, "Number entered was not in binary: " + txtBaseTwo.getText());
    txtBaseTwo.setText("");
    txtBaseTwo.grabFocus();
} 
```

# javascript - 当我在 textarea 中输入时，KnockoutJS 绑定到 div

> ID：15279488
> 
> 赞同：3
> 
> 时间：2013-03-07T18:59:09.903
> 
> 标签：javascript, asp.net, knockout.js

是否可以在 Knockout 中在文本区域和页面上的 DIV 之间进行“实时”绑定，每次文本区域的内容更改（每个字符的字符）时都会更新 DIV？我在我的视图模型上使用了一个计算字段，但它不会更新 DIV，除非我关闭 textarea：是否可以在每次进行更改时立即更新它，而不必关闭标签？

代码

```
function EditModel() {
        this.CommentTextPlain = ko.observable("");

        var self = this;

        this.CommentReady = ko.computed(function () {
            return self.CommentTextPlain().replace(regex, "<BR>");
        });
    }

    function ApplyViewmodel() {
        model = new EditModel();
        ko.applyBindings(model, document.getElementById("mainContainer"));
    }

<div id="mainContainer">
    <div id="target" data-bind='html: CommentReady' class="commentEditBox"></div> 

    <textarea data-bind="value: CommentTextPlain" rows="20" cols="62" id="editBoxFull">    </textarea>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:03:46.040

该`value`绑定有一个名为的伴随选项`valueUpdate`，您可以将其设置为包括其他事件，例如：

```
data-bind="value: CommentTextPlain, valueUpdate: 'afterkeydown'" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:04:01.813

使用`valueUpdate`绑定

请参阅[http://knockoutjs.com/documentation/value-binding.html上的](http://knockoutjs.com/documentation/value-binding.html)**附加参数**部分

> 价值更新
> 
> 如果您的绑定还包含一个名为 valueUpdate 的参数，则这定义了 KO 应该使用的其他浏览器事件来检测除了更改事件之外的更改。以下字符串值是最常用的选择：
> 
> *   "keyup" - 当用户释放一个键时更新你的视图模型
> *   "keypress" - 当用户输入一个键时更新你的视图模型。与 keyup 不同，这会在用户按住键时重复更新
> *   “afterkeydown” - 一旦用户开始输入字符，就会更新您的视图模型。这是通过捕获浏览器的 keydown 事件并异步处理事件来实现的。在这些选项中，
> *   如果您想实时更新视图模型，“afterkeydown”是最佳选择。
> 
> 在这些选项中，如果您想实时更新视图模型，“afterkeydown”是最佳选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T23:28:23.707

Knockout 有一个`textInput`绑定，可以实现即时模型更新，而无需对值绑定使用其他参数，同时还可以处理剪切粘贴和文本拖动事件。

这是 textInput 绑定文档的链接：http: [//knockoutjs.com/documentation/textinput-binding.html](http://knockoutjs.com/documentation/textinput-binding.html)。

# wordpress - 如何禁用 wordpress 中的子菜单链接？

> ID：15279491
> 
> 赞同：1
> 
> 时间：2013-03-07T18:59:17.113
> 
> 标签：wordpress, hyperlink, submenu

一旦您为页面创建菜单项，就会有一个链接自动填充它。我如何阻止 wordpress 制作这些链接？我有能力自己制作它们，并不总是希望它们链接到他们的特定页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:40:53.823

我想通了使用并将其放入我的 header.php

```
<script type="text/javascript">
jQuery(function($) {
$("li.menu-item-627,li.menu-item-14,li.menu-item-20,li.menu-item-28").children("a").attr('href', "javascript:void(0)");
});
</script> 
```

您必须使用 firebug 或 chrome “检查元素”来找出您的菜单项是什么，然后相应地替换代码中的数字。

另外，如果您根本不希望它们出现，请添加以下代码

```
<script type="text/javascript">jQuery(function($) { $("li.menu-item-627").contents().hide();});</script> 
```

这两个一起将隐藏禁用的菜单链接

然后您可以在页面菜单字段的“导航标签”中添加自己的链接！

祝你好运，如果您有任何问题，请告诉我，我会尽力提供帮助！

# big-o - 大 O 符号和规则

> ID：15279496
> 
> 赞同：0
> 
> 时间：2013-03-07T18:59:23.017
> 
> 标签：big-o

我了解添加功能时，行为以最高功率为主。但是我很难理解这个证明。谁能帮我一步一步解释背后的证明

```
T1(n) + T2(n) => O(max (f(n), g(n))) 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:31:24.323

符号 f(n) = O(g(n)) 实际上是以下的简写：

> 存在 N > 0 和 c > 0 使得对于所有 n > N，f(n) ≤ cg(n)。

f(n) = O(g(n)) 中的等号实际上是对符号的滥用；它实际上意味着 f∈O(g)，尽管实际上没有人这么写。所以，我们有明显的

> n = O(n),
> 
> 1000 n = O(n),

乃至

> 1000 n = O(n²)。

请注意，这并不意味着 O(n) = O(n²)，将 O(n) 和 O(n²) 视为函数集；与等式不同，使用 O 表示法的表达式不是自反的。任何 O(n) 函数都是 O(n²)，但不是相反。

所以，作为一个例子，我们将展示

> n³ + 1000 n² + 10000 = O(n³)。
> 
> 令 N 为最大系数：N = 10000。然后，对于 n > N，
> 
> n³ + 1000 n² + 10000 < n³ + N n² + N < n³ + n n² + n < n³ + n³ + n³ = 3 n³。

多项式由最高次项支配。现在，您的问题的解决方案很明确。

> 如果 T₁(n) = O(f(n))，则存在 N₁ 和 c₁，使得对于所有 n > N₁，T₁(n) ≤ c₁ f(n)。
> 
> 如果 T2(n) = O(g(n))，则存在一个 N2 和一个 c2，使得对于所有 n > N2，T2(n) ≤ c2 g(n)。
> 
> 令 c = max(c₁, c₂) 和 N = max(N₁, N₂)。然后，对于 n > N，
> 
> T₁(n) + T₂(n) ≤ c₁ f(n) + c₂ g(n)
> 
> ≤ cf(n) + cg(n) = c (f(n) + g(n))
> 
> ≤ c ⋅ (2 max(f(n), g(n))) = 2c max(f(n), g(n))。

如果您在微积分中完成了 ε-δ 证明，它会有所帮助。

# magento - magento $this->getCurrencies() 不能工作？

> ID：15279497
> 
> 赞同：1
> 
> 时间：2013-03-07T18:59:31.223
> 
> 标签：magento

我把代码放在我的主题 header.phtml 中

`echo $this->getCurrencyCount() and $this->getCurrentCurrencyCode()`它们都没有任何输出。但我为该网站设置了 4 种货币。

但在同一个文件中，`$this->getWelcome()`有正确的输出。为什么？

当 i`echo Mage::app()->getStore()->getCurrentCurrencyCode();`在文件中时，它有一个值。谢谢你。如果我想输出货币切换器。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:11:26.817

这些功能来自`Mage_Directory_Block_Currency`模型，而不是`Mage_Page_Block_Html_Header`一个。

您可能会查看`directory/currency.phtml`文件以处理此类任务

如果您想通过 header.phtml 文件确定页面中的最佳位置，只需将此块定义为标题块的子块。

在您的主题布局中，在 directory.xml 的`<default>`区域中添加以下内容：

```
<reference name="header">
         <block type="directory/currency" name="header_currency" before="catalog.leftnav" template="directory/currency.phtml"/>
    </reference> 
```

然后在 header.phtml 文件中添加`echo $this->getChildHtml('currency');`您需要显示的位置。如果您只需要这些变量而不在 header.phtml 中显示货币块使用此代码

```
$currency_block = new Mage_Directory_Block_Currency;
$currency_block->getCurrentCurrencyCode(); 
```

最后一部分按原样提供，未经测试。

# sql - 将列添加到现有表并将默认值添加到另一个没有动态 sql 的列

> ID：15279503
> 
> 赞同：2
> 
> 时间：2013-03-07T18:59:46.223
> 
> 标签：sql, sql-server-2008, sql-server-2005

对于 Sql Server 2005 和 2008，我想检查给定表上是否已经存在列，如果不存在则创建它。这个新列应该有一个 ExistingColumn 的默认值。目前我需要使用动态 sql 来填充新列，因为 sql server 会抱怨语法错误。

这是当前的sql server代码：

```
IF NOT EXISTS (SELECT TOP 1 1 FROM sys.columns WHERE [name] = N'NewColumn' AND OBJECT_ID = OBJECT_ID(N'ExistingTable'))
BEGIN
    ALTER TABLE [dbo].[ExistingTable] ADD [NewColumn] VARCHAR(50) NULL;

    exec sp_executesql  N'UPDATE [dbo].[ExistingTable] SET NewColumn = ExistingColumn'

    ALTER TABLE [dbo].[ExistingTable] ALTER COLUMN  [NewColumn] VARCHAR(50) NOT NULL 
END
GO 
```

有没有其他方法可以在不求助于动态 sql 的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:12:42.977

SQL Server 在您运行*之前*解析您的语句`ALTER`，并说“嘿，没有这样的列”。当您混合 DDL 和 DML 时，解析器不理解`IF`其他分支，也无法遵循事件序列 - 或预测事件将采用的序列以及运行时会发生什么分支。

延迟名称解析允许您访问尚不存在的*对象*，但不能访问已存在的对象上尚不存在的*列*。

因此，动态 SQL 似乎是您必须这样做的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:18:23.417

由于您无论如何都在创建列，因此您可以进行两个单独的批次。

```
 IF NOT EXISTS (SELECT TOP 1 1 FROM sys.columns WHERE [name] = N'NewColumn' AND OBJECT_ID = OBJECT_ID(N'ExistingTable'))
    BEGIN
        ALTER TABLE [dbo].[ExistingTable] ADD [NewColumn] VARCHAR(50) NULL;
    END
    GO
    IF EXISTS (SELECT TOP 1 1 FROM sys.columns WHERE [name] = N'NewColumn' AND OBJECT_ID = OBJECT_ID(N'ExistingTable'))
    BEGIN
        IF EXISTS (SELECT 1 FROM [dbo].[ExistingTable] WHERE NewColumn IS NULL)
        BEGIN
            UPDATE [dbo].[ExistingTable] SET NewColumn = ExistingColumn
            ALTER TABLE [dbo].[ExistingTable] ALTER COLUMN  [NewColumn] VARCHAR(50) NOT NULL 
        END
    END
    GO 
```

# sql - 用于查找第二高的 SQL

> ID：15279506
> 
> 赞同：0
> 
> 时间：2013-03-07T19:00:01.737
> 
> 标签：sql

假设我有一张员工表，我在其中一列中维护员工的姓名，在另一列中维护他们提取的薪水。我应该写什么 SQL 来找到获得第二高薪水的员工的名字？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:26:39.897

我会使用`row_number()`：

```
select e.*
from (select e.*, row_number() over (order by salary desc) as seqnum
      from employees e
     ) e
where seqnum = 1 
```

其他人提到了`limit`//方法`top`：`rownum`

```
select e.*
from (select e.*
      from employees e
      order by salary desc
      limit 2
     ) t
order by salary
limit 1 
```

你可以用偏移量做同样的事情：

```
select e.*
from employees e
order by salary desc
limit 2, 1 
```

但是，如果您与最高薪水并列，那么*所有*这些都有问题。第一种方法很容易通过替换`row_number()`为`dense_rank()`：

```
select e.*
from (select e.*, dense_rank() over (order by salary desc) as seqnum
      from employees e
     ) e
where seqnum = 1 
```

而且，另一种方法是：

```
select e.*
from employees e
where e.salary < (select max(salary) from employees)
order by salary desc
limit 1  -- or top 1 or rownum = 1 etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:02:39.390

您可以尝试从“Top 2”中选择，按升序排序，然后是“Top 1”，它应该为您提供正确的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:03:23.537

您可以执行以下操作：

```
select * from (select * from Employees order by salary desc limit 2) as A order by salary asc limit 1; 
```

# vb.net - 带有约束的 VB 泛型——类型转换和继承？

> ID：15279507
> 
> 赞同：3
> 
> 时间：2013-03-07T19:00:03.120
> 
> 标签：vb.net, generics, inheritance, .net-4.0

采取这种情况：

```
Public Interface IMyClass
End Interface

Public mustinherit class MyBaseClass : implements IMyClass
End Class

public class MyClass : inherits MyBaseClass
End Class

public class MyModel(of t as IMyClass)

    private Dim _parameter as t

    Public Sub New(byval parameter As t)
        _parameter As t
    End Sub
End class 
```

在我的控制器中，我可以毫无问题地做到这一点：

```
Dim _myclass as IMyClass = new MyClass() 
```

我可以用这个做类似的事情吗：

```
Dim _myModel as MyModel(of IMyClass) = new MyModel(of MyClass) 
```

**？？？**

我最初的想法是错误的，因为我认为转换可以自动完成，但似乎没有完成。有什么方法可以在.NET 中实现相同的目标？

***编辑*** 我更新了 MyModel 类以显示更多我在做什么。我想限制我创建的实例，然后使用传统的非泛型代码进行缩小转换。基本上，我的部分 Razor 视图需要显式模型，而这些视图最终会渲染另一个视图，该视图将采用该模型并显示它。因为模型都实现或继承了实现 IMyClass 的类，所以所有方法都应该存在于所有实例上并且应该是可调用的，但类型是不可互换的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:00:00.793

`MyModel`让我们稍微修改一下，好吗？

```
Public Class MyModel(Of T As IMyClass)
    Private _parameter As T

    Public Sub Something(parameter As T)
        _parameter = parameter
    End Sub
End class

Public Class MyClassA : Inherits MyBaseClass
End Class

Public Class MyClassB : Inherits MyBaseClass
End Class

Dim _myModel As MyModel(Of IMyClass) = New MyModel(Of MyClassA)()
_myModel.Something(New MyClassB()) ' Boom! 
```

如果允许分配，最后一行会产生问题：`MyMode(Of MyClassA)._parameter`has type`MyClassA`但最后一行会分配一个（不相关的）类型的对象`MyClassB`。这是非法的，所以 VB 禁止这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T18:39:07.010

您是否需要多种 MyModel，或者您只是试图要求将存储的对象限制为 IMyClass？

最简单的方法（可能无法满足您的所有需求）：

```
Public Interface IMyClass
    Sub DoIt()
End Interface

Public Class MyModel
    Private ReadOnly _parameter As IMyClass
    Public Sub New(parameter As IMyClass)
        _parameter = parameter
    End Sub
    Public Sub DoItToIt()
        _parameter.DoIt()
    End Sub
End Class

Public Class MyClassA
    Implements IMyClass
    Public Sub DoIt() Implements IMyClass.DoIt
    End Sub
End Class

Public Class Tests
    Public Sub Main()
        Dim model1 As MyModel = New MyModel(New MyClassA)
        model1.DoItToIt()
    End Sub
End Class 
```

复杂性的下一步是为`IHasMyClass`包含 IMyClass 的类定义一个接口。这支持基于所包含对象的允许类型和实际类型的操作：

```
Public Interface IMyClass
    Sub DoIt()
End Interface

Public Interface IHasMyClass
    Function GetIt() As IMyClass
    Function GetItsType() As Type
    Function GetAllowedType() As Type
End Interface

Public Class MyModel(Of T As IMyClass)
    Implements IHasMyClass

    Private ReadOnly _parameter As IMyClass
    Public Sub New(parameter As IMyClass)
        _parameter = parameter
    End Sub
    Public Sub DoItToIt()
        _parameter.DoIt()
    End Sub

    Public Function GetItAsT() As T
        Return _parameter
    End Function

    Public Function GetIt() As IMyClass Implements IHasMyClass.GetIt
        Return _parameter
    End Function

    Public Function GetItsType() As Type Implements IHasMyClass.GetItsType
        Return _parameter.GetType()
    End Function

    Public Function GetAllowedType() As Type Implements IHasMyClass.GetAllowedType
        Return GetType(T)
    End Function
End Class

Public Class MyClassA
    Implements IMyClass
    Public Sub DoIt() Implements IMyClass.DoIt
    End Sub
End Class

Public Class Tests
    Public Sub Main()
        ' Allow any IMyClass
        Dim model1 As MyModel(Of IMyClass) = New MyModel(Of IMyClass)(New MyClassA)
        model1.DoItToIt()
        Dim it As IMyClass = model1.GetIt()
        Dim allowedT As Type = model1.GetAllowedType()

        ' Restrict to MyClassA
        Dim modelA As MyModel(Of MyClassA) = New MyModel(Of MyClassA)(New MyClassA)
        modelA.DoItToIt()
        Dim itA1 As IMyClass = modelA.GetIt()
        Dim itA2 As MyClassA = modelA.GetItAsT()
        Dim allowedTA As Type = modelA.GetAllowedType()
    End Sub
End Class 
```

在 Tests() 中，请注意我们现在需要声明我们是创建一个接受 ANY IMyClass 的 MyModel`MyModel(Of IMyClass)`还是一个需要特定子类的MyModel `MyModel(Of MyClassA)`。

如果我们想操作 MyModels，可能是上述任何一种类型，我们使用通用接口：

```
Dim model As IHasMyClass
model = model1
...
model = modelA 
```

或者在您的情况下，要支持 MyModel 的所有功能，重命名`IHasMyClass`为`IMyModel`，并添加各种 MyModel 函数，但不要使用 ，而是`T`使用`IMyClass`：

```
Public Interface IMyModel
    Function GetIt() As IMyClass
    Function GetItsType() As Type
    Function GetAllowedType() As Type

    Sub DoItToIt()
    Function CompareIt(other As IMyClass) As Integer
End Interface 
```

并对 IMyClass 和 MyModel 进行适当的更改/添加。

然后就可以做到：

```
Dim model As IMyModel = modelA
If model.CompareIt(model1.GetIt()) > 0 ... 
```

# c++ - 一个对象可以知道它自己的常量吗？

> ID：15279508
> 
> 赞同：10
> 
> 时间：2013-03-07T19:00:03.833
> 
> 标签：c++, reflection, c++11, typetraits, const-correctness

可以从外部检测变量的和`decltype`常量。**但是一个对象也有可能知道它自己的常量吗？**用法应该是这样的：`std::is_const`

 **```
#include <type_traits>
#include <iostream>
#include <ios>

struct Test
{
    Test() {}

    bool print() const
    {
       // does not work as is explained in https://stackoverflow.com/q/9890218/819272
       return std::is_const<decltype(*this)>::value; // <--- what will work??
    }
};

int main()
{
    Test t;
    const Test s;

    // external constness test
    std::cout << std::boolalpha << std::is_const<decltype(t)>::value << "\n";
    std::cout << std::boolalpha << std::is_const<decltype(s)>::value << "\n";

    // internal constness test
    std::cout << std::boolalpha << t.print() << "\n";
    std::cout << std::boolalpha << s.print() << "\n"; // <--- false??
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/2HfkHT$35)上的输出这有可能吗？

**动机**：我希望能够检测 const 成员函数是在 const 对象上调用还是来自非常量对象。例如，该对象可以表示一个缓存，而该成员可以表示一个视图。如果缓存是 const 的，则可能会使用优化的绘制例程，而如果底层数据是非常量的，则绘制例程需要定期检查数据是否被刷新。

**注意**：相关[问题](https://stackoverflow.com/q/9890218/819272)询问如何破坏 const 对象的构建，但我不太明白这个问题的答案是否意味着我的问题的明确否定。如果没有，我想在布尔值中捕获常量以供进一步使用。

**编辑**：正如@DanielFrey 所指出的，构造函数不是测试常量的好地方。那么 const 成员函数呢？

* * *

**更新**：感谢大家纠正我最初提出的问题并提供答案的各个部分（构造函数定义不明确的常量，右值`this`，的上下文含义`const`，后见之明 - 我忽略的明显过载技巧，以及潜伏在阴影中的 const 参考别名漏洞）。对我来说，这个问题是最好的 Stackoverflow。我决定选择@JonathanWakely 的答案，因为它展示了如何定义`Mutable`和`Immutable`加强 constness 概念的类，以一种万无一失的方式实现我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:07:09.327

构造函数（原始问题）是不可能的，因为

> ### 12.1 构造函数 [class.ctor]
> 
> ⁴构造函数不应是`virtual`(10.3) 或`static`(9.4)。可以为 或 对象调用`const`构造`volatile`函数`const volatile`。构造函数不得声明为`const`、`volatile`或`const volatile`(9.3.2)。`const`和`volatile`语义（7.1.6.1）不适用于正在构建的对象。它们在派生最多的对象 (1.8) 的构造函数结束时生效。构造函数不应使用 ref 限定符声明。

对于成员函数（当前问题），您可以简单地同时提供 a`const`和非`const`重载，将两者都转发给将 const 性作为布尔模板参数的（私有）方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T19:50:23.193

正如其他人所说，您无法判断一个对象是否`const`在成员函数中声明。您只能判断它是否在`const`上下文中被调用，这是不一样的。

> **动机：**我希望能够检测 const 成员函数是在 const 对象上调用还是来自非常量对象。例如，该对象可以表示一个缓存，而该成员可以表示一个视图。如果缓存是 const 的，则可能会使用优化的绘制例程，而如果底层数据是非常量的，则绘制例程需要定期检查数据是否被刷新。

你不能可靠地告诉这一点。

```
struct A
{
  void draw() { fut = std::async(&A::do_draw, this, false); }
  void draw() const { fut = std::async(&A::do_draw, this, true); }
  void update(Data&);
private:
  void do_draw(bool this_is_const) const;
  mutable std::future<void> fut;
};

A a;
const A& ca = a;
ca.draw();           // object will think it's const, but isn't
Data new_data = ...;
a.update(new_data);  // do_draw() should recheck data, but won't 
```

您可以通过定义单独的可变和不可变类型在类型系统中对其进行建模。

```
struct Base
{
  virtual ~Base();
  virtual void draw() const = 0;
protected:
  void do_draw(bool) const;
};

struct MutableCache : Base
{
  virtual void draw() const { fut = std::async(&Base::do_draw, this, false); }
  void update();
};

struct ImmutableCache : Base
{
  virtual void draw() const { fut = std::async(&Base::do_draw, this, true); }
  // no update function defined, data cannot change!
}; 
```

现在，如果一个缓存被创建为`ImmutableCache`你知道它*不能*改变，那么这就取代了你之前对“const”对象的想法。A`MutableCache`可以更改，因此需要检查刷新的数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T19:03:33.717

> 什么会起作用？

什么都行不通。

运行其构造函数的对象是**never`const`**。它只能在构造函数运行*后才*`const`分配给变量。

 *也无法确定成员函数（包括非 const 成员函数，因为`const_cast`可能已使用）

常量是存在于**每个调用站点**的属性，而不是函数体本身的属性。

> 动机：我希望能够检测是否在 const 对象上调用了 const 成员函数

你不能那样做，但你可以接近...

```
class C
{
public:
    void func() const
    {
        std::cout << "const!";
        func_impl();
    }
    void func()
    {
        std::cout << "non-const!";
        func_impl();
    }
private:
    void func_impl() const;
}; 
```

> 例如，该对象可以表示一个缓存，而该成员可以表示一个视图。如果缓存是 const 的，可能会使用优化的绘制例程，而如果底层数据是非常量的，则绘制例程需要定期检查数据是否被刷新。

那将是不可靠的用法，`const`因为`const`它不是对象本身的属性。它是正在使用的对象的当前上下文的属性。

检测到它`const`在当前上下文中并不能告诉您该对象一直在`const`上下文中被处理。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T19:14:40.440

我不知道是否可以通过在构造函数中设置的成员值*以这种方式实现，但对象可以使用成员函数报告其 const-ness：*

```
struct Test
{
  bool is_const() const
  {
    return(true);
  }

  bool is_const()
  {
    return(false);
  }
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-07T19:28:04.170

`this`（以及因此）的类型`*this`完全由函数的 cv 限定符确定，并且不会根据实际对象是否为 cv 限定而改变。

`§9.3.2 [class.this] p1`

> 在非静态 (9.3) 成员函数的主体中，关键字`this`是纯右值表达式，其值是调用该函数的对象的地址。类的`this`成员函数中的类型`X`是`X*`。**如果声明了成员函数，则为is的`const`类型`this``const X*`**，如果声明了成员函数，则为is的`volatile`类型，如果声明了成员函数，则为is的类型。`this``volatile X*``const volatile``this``const volatile X*`

因此，您无法在成员函数*内部*看到调用它的对象是否为`const`，但您可以使编译器根据`const`ness 调用不同的函数：

```
struct X{
  void f(){ /* non-const object */ }
  void f() const{ /* const object */ }
};

int main(){
  X x1;
  X const x2;
  x1.f(); // calls non-const 'f'
  x2.f(); // calls const 'f'

  // but beware:
  X const& rx = x1;
  rx.f(); // calls const 'f', because the "object" it's invoked on is const
} 
```

不过，请注意片段中列出的限制。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-07T19:03:17.033

这是不可能的，因为一个特定的值可能同时被视为`const`而不是`const`。考虑

```
MyType t = ...;
MyType& nonConstRef = t;
const MyType& constRef = t; 
```

此时`t`有一个`const`和一个非常量引用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-07T19:38:21.770

检测对象内的 constness 是不可能的，但你说你的动机是……

> “我希望能够检测 const 成员函数是在 const 对象上调用还是来自非 const 对象。”

嗯，这很容易，只需提供一个非`const`重载。

重载可以遵循一个常见的实现，例如如下：

```
#include <type_traits>
#include <iostream>
using namespace std;

class Test
{
private:
    template< class CvTest >
    static void print( CvTest& o )
    {
        cout << boolalpha;
        cout << "> object says: Hey, const = " << std::is_const<CvTest>::value << "!" << endl;
    }

public:
    bool print()        { return (print( *this ), false); }
    bool print() const  { return (print( *this ), true); }
};

int main()
{
    Test t;
    const Test s;

    cout << "External constness test:" << endl;
    cout << boolalpha << is_const<decltype(t)>::value << "\n";
    cout << boolalpha << is_const<decltype(s)>::value << "\n";

    cout << endl;

    cout << "Internal constness test:" << endl;
    cout << boolalpha << t.print() << "\n";
    cout << boolalpha << s.print() << "\n";
} 
```

结果：

```
外部常数测试：
错误的
真的

内部常数测试：
> 对象说：嘿，const = false！
错误的
> 对象说：嘿，const = true！
真的

```***

# c# - 设计选择 - 带有标签控件的 MDI 或带有控件的标签页？

> ID：15279512
> 
> 赞同：0
> 
> 时间：2013-03-07T19:00:15.597
> 
> 标签：c#, tabs, mdi

我正在构建一个小应用程序来编辑一些特定的文本文件。我想要一个选项卡式界面，这样我就可以在文档之间快速切换。我看到它的方式是我有两个选择。

A）我使用普通的选项卡控件并让它填充整个表单。然后创建的每个标签页都有一个文本框来保存文档文本。可能通过创建我自己的带有文本框和其他我认为必要的控件的自定义标签页。

B) 我将表单设为 MDI 容器，并使用选项卡控件在表单之间切换。（将标签页与相应的 MDI 子窗体链接）

我觉得选项A会更容易做。但是，我想了解您对我应该采用哪种选择的想法。

请让我知道你的想法！任何建议将不胜感激。

谢谢。

# c# - 无法接收 UDP Windows RT

> ID：15279519
> 
> 赞同：4
> 
> 时间：2013-03-07T19:00:26.713
> 
> 标签：c#, windows-8, windows-rt

我正在为需要在端口 49030 上接收 UDP 数据包的 Windows 8/RT 编写一个 Windows Store/Metro/Modern/RT 应用程序，但我似乎无法接收任何数据包。我已经按照使用`DatagramSocket`信函的教程进行操作，但我什么也没得到。我知道我的发送程序正在发送数据，正如我在wireshark 上看到的那样。我还编写了一个测试 C# 控制台应用程序，它使用通过 UDP 正确接收数据的常规 BSD 套接字 API (System.Net.Sockets.Socket)。

这是有效的代码：

```
Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
s.Bind(new IPEndPoint(IPAddress.Any, 49030));
byte[] buf = new byte[5000];
while (true)
{
    Console.WriteLine("Received " + s.Receive(buf) + " bytes.");
} 
```

这将输出报告正在发送的字节数的行，如预期的那样。

我的 RT 应用程序代码：

```
public async void StartListening()
{
    DatagramSocket s = new DatagramSocket();
    s.MessageReceived += s_MessageReceived;
    await s.BindServiceNameAsync(this._port.ToString());   
}

void s_MessageReceived(DatagramSocket sender, DatagramSocketMessageReceivedEventArgs e)
{
    System.Diagnostics.Debug.WriteLine("Hark! A packet!");  // Breakpoint here
} 
```

调用后`StartListening()`，断点永远不会被命中，并且不会在输出日志中打印任何内容。

我尝试运行 MSFT 提供的 DatagramSocket 示例，它没有问题（当然）。我可以看到套接字*正在*打开/监听，因为它显示在 resmon.exe 中。我还在应用程序的清单中启用了所有适当的功能。我已经在我的 x86 笔记本电脑和 Surface RT（远程调试）上对其进行了测试，它们都表现出相同的行为。

关于为什么它不起作用的任何想法？

# c# - 如何在 MVC 模块上初始化？

> ID：15279523
> 
> 赞同：0
> 
> 时间：2013-03-07T19:00:35.210
> 
> 标签：c#, asp.net-mvc

我是 MVC 编程的新手。在正常的 OOP 中，我有我的课程，我只会从数据库中初始化和加载数据。在 MVC 中，我们有模块，我如何从中加载记录？

这是我当前的 UserAcount 类型代码：

```
[Table("UserAccount")]
public class UserAccount {
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }
    public string userName { get; set; }
    public string email { get; set; }
    public int companyID { get; set; }
} 
```

假设我有一个名为“testUser”的用户，我如何初始化这条记录并获取它的信息？我该怎么做呢：

```
UserAccount user = new UserAccount("tesetUser"); 
```

我应该如何以及在哪里使用它？

```
user = user.SingleOrDefault(u => u.userName.ToLower() == User.Identity.Name.ToLower()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:50:19.030

您需要阅读[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)。这是 MVC 使用的默认 ORM。简单地：

1.  如果您还没有项目上下文，请创建一个：

    ```
    public class MyProjectContext : DbContext
    {
        public MyProjectContext()
            : base("name=ConnectionStringNameHere")
        {
        }
    } 
    ```

2.  将模型添加到项目上下文中：

    ```
    public class MyProjectContext : DbContext
    {
        ...

        public DbSet<SomeModel> SomeModels { get; set; }
        public DbSet<SomeOtherModel> SomeOtherModels { get; set; }
        # etc.
    } 
    ```

3.  使用包管理器控制台（工具 > 库包管理器 > 包管理器控制台）更新您的数据库：

    ```
    > update-database 
    ```

（键入后按 ENTER）

现在，要在控制器中使用您的上下文：

```
public class MyAwesomeController : Controller
{
    private MyProjectContext db = new MyProjectContext();

    public ActionResult Index()
    {
        var someModels = db.SomeModels;
        return View(someModels);
    }

    public ActionResult GetSomeModel(int id)
    {
        var someModel = db.SomeModels.Find(id);
        return View(someModel);
    }

    # other actions
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:04:49.557

在最简单的情况下，您应该在控制器中执行此逻辑，这会将数据传递给视图。然而，MVC 是为了 UI 分离关注点，所以理论上你应该在你的域层中这样做，它是从你的控制器调用的。

[这是 Jeff Atwood 的一篇不错的文章](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)，但我不同意控制器是应用程序的大脑。它更多的是 UI 的大脑......但这取决于你的代码有多复杂。如果它非常简单，请不要创建域层

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:05:16.727

在 MVC 模型中，Controller 负责处理 HTTP 请求。

通常，您会在控制器操作中加载您的实体（例如 UserAccount）。

如果要编辑/更新实体，通常会将相关字段映射到反映 UserAccount 的模型。建议使用单独的模型，因为 UI 的需求通常与实体模型的需求有所不同。为每个关注点设置单独的类可以避免污染实体模型以满足视图的需求。

# javascript - 在文本框 HTML JAVASCRIPT 中显示背景图像位置 (http://www...)

> ID：15279530
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:00:55.713
> 
> 标签：javascript, html, css

我的网站允许用户使用带有以下代码的 URL 更改背景图像：

```
var defaultImage = "'#fff'";
document.getElementsByTagName('body')[0].style.backgroundImage = localStorage.getItem('back') ? "url('" + localStorage.getItem('back') + "')" : "url('" + defaultImage + "')";

function changebackground() {
    var url = document.getElementById('bgchanger').value;
    document.getElementsByTagName('body')[0].style.backgroundImage = "url('" + url + "')";
    localStorage.setItem('back', url);
} 
```

我想知道如何在文本框中显示当前背景图像 URL？

演示：http: [//goo.gl/253IN](http://goo.gl/253IN)

**更新：** 这就是我想要的：

```
function changebackground() {
    var url = document.getElementById('bgchanger').value;
    document.getElementsByTagName('body')[0].style.backgroundImage = "url('" + url + "')";

    // populate the input w/ the url:
    document.getElementById('textfield').value = url;    

    localStorage.setItem('back', url);
} 
```

但是，每次页面刷新时，文本框都很清晰。如何保存此信息，以便即使刷新页面也始终保留在文本框中？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:04:05.323

怎么样：

```
function changebackground() {
    var url = document.getElementById('bgchanger').value;

    // populate the input w/ the url:
    setBackground(url);

    localStorage.setItem('back', url);
}

function setBackground(url){
    document.body.style.backgroundImage = "url('" + url + "')";
    setText(url);
}

function setText(url){
    document.getElementById('textfield').value = url;
}

var defaultImage = "'#fff'";
    bgUrl = localStorage.getItem('back') ? localStorage.getItem('back') : defaultImage;

// Set background
setBackground(bgUrl); 
```

我唯一添加的是注释行和紧随其后的行。您已经有了 URL，只需设置输入元素的值即可。

**更新**

我添加了一些代码来在第一次设置背景时初始化文本框（大概是在页面加载时），根据您在下面评论中的附加要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:51:37.387

您可以像这样获取背景图像：

```
window.onload = function () {
    var bgimage = document.body.style.backgroundImage;
    var cleaned = bgimage.replace(/^url\('/, "").replace(/'\)$/, "");
    var txtbox = document.getElementById("txt1");
    txtbox.value = cleaned || "No background image set";
}; 
```

[http://jsfiddle.net/KW852/3/](http://jsfiddle.net/KW852/3/)

它获取正文的`backgroundImage`样式，然后去除任何前导`url('`和尾随`')`并返回中间文本。然后，只需设置文本框的值。

# wordpress - Wordpress - 在类别页面上使用查询帖子

> ID：15279532
> 
> 赞同：0
> 
> 时间：2013-03-07T19:01:08.987
> 
> 标签：wordpress, pagination

我正在尝试限制类别页面上显示的帖子数量。我正在使用 query_posts 执行此操作，就像这样

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    if (have_posts()){
        query_posts('posts_per_page=6&paged=' . $paged); 
```

问题是 query_posts 似乎让网站无法意识到它所在的类别页面，因此它显示了所有类别的帖子。有没有办法解决这个问题？似乎应该有一种方法可以强制 WordPress 在 query_posts 之后“获取类别”，以便它意识到它所在的类别，然后只显示相关的帖子？

------ 使用 WP_query 时编辑显示代码 ----

```
echo '<h4>Latest Resources</h4>'."\n";
    global $post;

    if (have_posts()){
    $paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1; 
    $the_query = new WP_Query( array(
                 'post_type' => 'post', 
                 'paged' => $paged,
                 'posts_per_page' => 6));   
        while($the_query->have_posts()) { 
        $the_query->the_post(); 
            if($post->post_type == 'page') continue;
            setup_postdata($post);
            $categories = get_the_category();
                echo '<div class="listing">'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:59:03.087

请不要像这样`query_posts`使用它没有用处`WP_Query`，即：

**已编辑**

```
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1; 
    $the_query = new WP_Query( array( 
    'post_type' => 'page',
    'orderby' => 'date',
    'category_name' => 'slug of your category here',
    'order' => 'DESC',
    'paged' => $paged,
    'posts_per_page' => 2) 
); 
```

更多关于分页和`WP_Query` [**这里**](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)。

**附加信息**

```
//usage of the $the_query
while ( $the_query->have_posts() ) : $the_query->the_post();
//pagination
get_next_posts_link(Older', $the_query->max_num_pages);
get_previous_posts_link( Newer', $the_query->max_num_pages); 
```

# python - Python-Flask：ReferenceError：弱引用对象不再存在

> ID：15279537
> 
> 赞同：2
> 
> 时间：2013-03-07T19:01:23.020
> 
> 标签：python, flask

我在中使用`Flask`框架。`Python`我写了这段代码：

```
from flask import *
import mysql.connector
def connect_db():   
        db = mysql.connector.Connect(host='***',user='***',password='**',database='***')
        return db.cursor()

def query_db(query, args=(), one=False):
    cur = g.db  
    cur.execute(query, args)
    rv = [dict((cur.description[idx][0], value)
    for idx, value in enumerate(row)) for row in cur.fetchall()]
    return (rv[0] if rv else None) if one else rv

    @app.before_request
    def before_request():
        g.db = connect_db()
        blogOptions = query_db('select * from tbl_options',None)    

    @app.route("/")
    def index():    
        return render("index.html") 
```

当我运行这段代码时，它说

```
ReferenceError: weakly-referenced object no longer exists 
```

与回溯：

```
Traceback (most recent call last):
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/flask/app.py", line 1356, in full_dispatch_request
    rv = self.preprocess_request()
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/flask/app.py", line 1539, in preprocess_request
    rv = func()
  File "/Users/ozcan/Documents/python/app.py", line 124, in before_request
    blogOptions = query_db('select * from tbl_options',None)
  File "/Users/ozcan/Documents/python/app.py", line 47, in query_db
    cur.execute(query, args)
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/mysql/connector/cursor.py", line 364, in execute
    if self._have_unread_result():
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/mysql/connector/cursor.py", line 193, in _have_unread_result
    return self._connection.unread_result
ReferenceError: weakly-referenced object no longer exists 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:34:24.323

您在此处创建的连接对象正在函数结束时被垃圾收集器拾取，并且稍后当游标引用它时不再存在：

```
def connect_db():   
        db = mysql.connector.Connect(host='***',user='***',password='**',database='***')
        return db.cursor() 
```

您可以将其返回或存储，`g`以便它在请求的整个生命周期内都存在。

# php - 禁止和用户激活系统，但我在登录脚本上有一些问题

> ID：15279541
> 
> 赞同：0
> 
> 时间：2013-03-07T19:01:38.527
> 
> 标签：php, pdo, login-script

我是 php 新手。我有一个登录系统，现在我正在尝试实施一个禁止和用户激活系统，但我在登录脚本上有一些问题。这是我的脚本中的代码：

```
 <?php
    $query = "SELECT id, username, password, salt, email, firstname, lastname, active, banned FROM users WHERE username = :username "; 
    $query_params = array( 
        ':username' => $_POST['username'] 
    ); 
    try 
    { 
        $stmt = $db->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    { 
        die("Failed to run query: " . $ex->getMessage()); 
    } 
    $row = $stmt->fetch(); 

    $login_ok = false; 
    $login_match = false; 
    $login_active = false; 
    $login_banned = false; 

    if($row) 
    { 
        $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
        if($check_password === $row['password']) 
        { 
            $login_match = true; 
        } 
    if($row['active'] == 1) {
        $login_active = true;
    }
    if($row['banned'] == 1) {
        $login_banned = true;
    }
    if($login_match && $login_active && !$login_banned) {
        $login_ok = true;
    }
    } 
    if($login_ok) 
    { 
        unset($row['salt']); 
        unset($row['password']); 
        $_SESSION['user'] = $row; 
        header("Location: index.php"); 
        die("Redirecting..."); 
    } 
    else 
    { 
        if(!$login_match) { echo "Wrong username/pasword.";}
        if(!$login_active) { echo "Account not activated, check your email";}
        if($login_banned) { echo "Your account is banned";}
    } 
?> 
```

在我的数据库中，我有 2 列活动和禁止，其中 0 表示帐户已激活且未禁止，1 表示帐户未激活或被禁止。

如何向用户显示不同的消息？如果用户输入了错误的用户名或密码，他将从最后的 else {} 中获得所有三个消息。我想像这样向用户显示消息：如果用户名或密码错误，则只显示错误的用户名/密码。并忽略 $login_active $login_banned。如果用户名/密码正常，但帐户未激活，帐户未激活，请检查您的电子邮件。并忽略 $login_banned 开关。如果用户名/密码正常，但帐户被禁止显示您的帐户被禁止并忽略 $login_active 开关。

如果我写的太多了，我很抱歉，我希望我解释得对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:34:07.527

改变这个：

```
if(!$login_match) { echo "Wrong username/pasword.";}
if(!$login_active) { echo "Account not activated, check your email";}
if($login_banned) { echo "Your account is banned";} 
```

对此：

```
<?php
if ($login_banned == true) {
        echo "Your account is banned";
} else if ($login_match != true) {
        echo "Wrong username/password.";
} else if ($login_active != true) {
        echo "Account not activated, check your email";
}
?> 
```

我希望它做你想要的。

以下是您仍然可以使用的选项：

```
//PICK OPTIONS DEPENDING ON YOUR PREFERENCE AND MESSAGE PRIORITIES
    //option 1
    if ($login_match != true) {
        echo "Wrong username/pasword.";
    } else if ($login_banned != true) {
        echo "Your account is banned";
    } else if ($login_active != true) {
        echo "Account not activated, check your email";
    }

    //option 2
    if ($login_match != true) {
        echo "Wrong username/pasword.";
    } else if ($login_active != true) {
        echo "Account not activated, check your email";
    } else if ($login_banned != true) {
        echo "Your account is banned";
    }

    //option 3
    if ($login_banned == true) {
        echo "Your account is banned";
    } else if ($login_match != true) {
        echo "Wrong username/password.";
    } else if ($login_active != true) {
        echo "Account not activated, check your email";
    } 
```

# ios - 如何在 UIView 的子类中同时覆盖 initWithFrame: 和 initWithCoder:？

> ID：15279542
> 
> 赞同：26
> 
> 时间：2013-03-07T19:01:42.183
> 
> 标签：ios, objective-c, uiview

我正在尝试继承 UIView。我已经有一些指定的初始化程序，我希望有可能从代码或 Nib 文件初始化我的自定义视图。因此，Apple 告诉我们使用指定的初始化程序，但他们自己并没有这样做——`initWithCoder:`不调用`initWithFrame:`. 我应该怎么做才能在这两种情况下调用我指定的初始化程序？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-07T19:07:00.497

将您的特殊初始化打包在一种方法中。它可以是私有的（在 .m 中声明）。然后覆盖这两个初始化程序并从它们中调用您的 init 方法。

```
- (void)myInitialization
{
    //do your stuff
}

-  (id)initWithFrame:(CGRect)aRect
{
    self = [super initWithFrame:aRect];

    if (self)
    {
        [self myInitialization];
    }

    return self;
}

- (id)initWithCoder:(NSCoder*)aDecoder 
{
    self = [super initWithCoder:aDecoder];
    if (self)
    {
        [self myInitialization];
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T19:04:04.153

如你所说：

> initWithFrame: - 建议你实现这个方法。除了或代替此方法，您还可以实现自定义初始化方法。
> 
> initWithCoder： - 如果您从 Interface Builder nib 文件加载视图并且您的视图需要自定义初始化，请实施此方法。

我要做的只是一个双方都会调用的方法，它具有您想要在`UIView`.

# mysql - 通过选择获取相关单元格值后更新mysql单元格？

> ID：15279544
> 
> 赞同：0
> 
> 时间：2013-03-07T19:01:44.683
> 
> 标签：mysql

SQL：

```
$mysqli->query("UPDATE results
SET result_value = '".$row[0]['logo_value']."'
WHERE logo_id = '".$mysqli->real_escape_string($_GET['logo_id'])."'
AND user_id = '".$user_data[0]['user_id']."'"); 
```

此结果表还包含我想在更新之前获取的 result_tries，因此我可以使用它来修改 result_value... 有没有办法一次性完成，而不是先进行选择而不是更新？

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:03:54.380

基本上：

```
UPDATE results SET result_value = result_value + $row[0][logo_value] 
```

只是一个简单的添加。您可以**使用**正在更新的记录中的现有字段作为更新的一部分，因此，如果您不想只是添加，则可以使用的逻辑没有太多限制，而不仅仅是`x = x + y`.

# azure - Azure 服务器没有响应，但仪表板报告一切正在运行？

> ID：15279546
> 
> 赞同：3
> 
> 时间：2013-03-07T19:01:52.463
> 
> 标签：azure, azure-virtual-machine

突然间，没有任何更改或最近访问我的 Azure 虚拟服务器不再可用于 RDP 或 Web...我已登录到 azure 控制面板，一切似乎都在正常运行，但它无法正常工作。

我检查了端点，它们同时存在于 RDP 和 Web 中，这很奇怪。

我有 2 台虚拟服务器，另一台运行正常并响应。

有人经历过吗？就在我的客户也想查看他的网站时...

[http://cn-web-02.cloudapp.net](http://cn-web-02.cloudapp.net)是网址

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:32:34.057

原来这是微软的一次中断......超过 22 小时，但一切都恢复正常运行。这是 6 个月内第 2 次发生这种情况很长一段时间......至少可以说让我有点紧张。

感谢大家的意见和任何感兴趣的人 MS 有一个很好的网站来跟踪 Azure 上的服务水平。[Windows Azure 服务仪表板](http://www.windowsazure.com/en-us/support/service-dashboard/)

小号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:33:18.707

正如我刚刚回答的[这个问题](https://stackoverflow.com/a/15286175/272109)，虚拟机处于*预览阶段*，尚未投入生产。您的虚拟机不可用有几个原因（请参阅其他答案）。鉴于这是今天在这里报告的第二起事件，很可能它与正在更新的底层主机操作系统有关，这会使您的虚拟机在短时间内脱机。

我试过你的网址，它再次可用。请记住这是在预览中，特别是因为您提到有一个客户想要查看他的网站。如果您将生产网站放在虚拟机中，那么您将不得不承担没有 SLA 的风险。

话虽*如此*：您可以通过运行两个虚拟机来降低停机风险，监听负载平衡的输入端点。确保两个虚拟机都在同一个可用性集中。这样做可确保 Windows Azure 结构控制器在执行主机操作系统更新等操作时不会同时使两个虚拟机脱机。如果这是在生产中，那么您将拥有非常高的可用性方案。即使在预览版中，您也可以利用可用性集来提高可用性。注意：您需要使用某种类型的共享会话缓存，因为访问者现在将被发送到您的任一虚拟机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:13:46.060

我有同样的经历！我们有 2 个实例，所有实例都在没有任何通知的情况下重新成像。我知道这一点，因为我们通过 RDP 进行了一些本地更改。

重新启动或重新映像可能会有所帮助！你可以试试！

# c++ - lambda 函数的类型

> ID：15279547
> 
> 赞同：9
> 
> 时间：2013-03-07T19:01:57.987
> 
> 标签：c++, c++11, lambda, typeid

有这个代码：

```
auto fun = [](int x)->int {return x + 1; };
std::cout << typeid(fun).name() << std::endl; 
```

结果是：`Z4mainEUliE_`但是 c++filt 似乎没有解释它是什么。什么是 lambda 表达式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T19:07:22.650

§5.1.2/3 规定：

> *lambda 表达式*的类型（也是闭包对象的类型）是唯一的、未命名的非联合类类型

它继续说更多，但这是最重要的一点。lambda 基本上是匿名类的一个实例。

顺便说一句，您的 lambda 的解构形式是`main::$_0`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T19:07:19.537

标准未指定 lambda 函数的类型（第 5.1.2 节）：

> lambda 表达式的类型（也是闭包对象的类型）是**唯一的、未命名的非联合**类类型——称为闭包类型——其属性如下所述。此类类型不是聚合 (8.5.1)。闭包类型在包含相应 lambda 表达式的最小块作用域、类作用域或命名空间作用域中声明。

然后它继续列出闭包类型应该具有的确切属性。

因此，lambda 函数没有通用类型。编译器将为每个 lambda 函数生成一个具有未指定名称的新函子类型

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T19:07:20.253

> 什么是 lambda 表达式？

lambda 表达式的类型（所谓的**闭包**）是一个未命名的类类型，带有一个由编译器自动生成的函数调用运算符。编译器将给它的内部名称是未指定的。

根据 C++11 标准的第 5.1.2/3 段：

> lambda 表达式的类型（也是闭包对象的类型）是唯一的、**未命名的非联合类类型**——称为闭包类型——其属性如下所述。此类类型不是聚合 (8.5.1)。闭包类型在包含相应 lambda 表达式的最小块作用域、类作用域或命名空间作用域中声明。[...]

还要注意，类的`name()`成员函数`type_info`（返回的类型`typeid()`）也是依赖于实现的，标准并不要求它对人类有意义。

根据第 18.7.1 段：

> `const char* name() const noexcept;`
> 
> 9*返回*：**实现定义的**NTBS。
> 
> 10*备注*：该消息可能是一个以null结尾的多字节字符串（17.5.2.1.4.2），适合转换并显示为wstring（21.3，22.4.1.4）

# c - 在 printf 调用中添加长度说明符是否更安全

> ID：15279549
> 
> 赞同：3
> 
> 时间：2013-03-07T19:02:04.670
> 
> 标签：c, security, printf, format-string

我的问题是从安全的角度来看的。我正在清理一些代码，我发现当前代码存在不受控制的格式字符串漏洞；它将一个字符串传递给类似的`printf()`东西：

```
void print_it(char * str)
{
    printf(str); 
```

这显然被认为是不安全的编程，即使 gcc 通常也会给你发出至少某种警告：

> 警告：格式不是字符串文字，也没有格式参数

现在要“修复”问题，我们可以确保您得到的内容被视为字符串

```
printf("%s", str); 
```

但我想知道是否有任何......使用长度指定器的额外安全性。就像是：

```
printf("%.*s", (int)sizeof(str), str); 
```

我想不出有什么理由会更安全，但如果我在这里遗漏了一些明显的东西，我也不会感到惊讶。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:02:38.953

有点，但不是现代 C 商店安全地保护他们的 printf 语句的程度。当您处理非空终止字符串时使用它，这在与 Fortran 代码交互时非常常见。

严格来说，为了防止读取失控，这将是一项安全收益，也许您将在违反空字符后打印敏感数据。

但

```
printf("%.*s", (int)sizeof(str), str); 
```

更糟；您刚刚说“忽略空字符并打印出全部内容”。或者更确切地说，除非您一直处理空格填充的字符串直到它们的内存结束，否则情况会更糟，如果字符串来自 Fortran，情况可能就是这种情况。

*然而，*这***非常**重要：*

 *```
printf("%s", str); 
```

这`printf(str)`是一个重大的安全漏洞。阅读有关使用说明符的[printf 攻击](https://www.google.com/search?q=printf+attacks)`%n`，该说明符*写入*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:36:25.367

有一些额外的安全性

```
printf("%.*s", (int)sizeof(str), str); 
```

因为它会打印最多字节——通常是四个或八个字节——所以如果指向一个不是 0 终止的数组，`sizeof(char*)`它就不会去读取大部分内存。`str``char`

但更典型的是，它会在没有充分理由的情况下缩短输出。

如果你的意思是

```
printf("%.*s", (int)strlen(str), str); 
```

这是完全没有意义的，因为在需要精度的情况下`printf`，`strlen`调用将执行相同的无效内存访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:35:27.873

当数组传递给函数时，这个想法将不起作用，因为数组衰减为指针或任何 malloc 的指针。因为`sizeof(var)`要给出指针的大小，而不是数组。所以不能在 printf() 中使用来指定长度。

这仅适用于自动（堆栈分配）数组。那么这什么时候有用呢？我可以想到两种情况：

**1.当你写入数组超过数组的大小时。**

在这种情况下，您已经通过在不属于您的地方进行写入导致了*未定义的行为。*故事结局。

**2.当字符串末尾没有空字节时（但没有越过数组的边界）。**

在这种情况下，数组有一些有效的内容，但没有空字节。这里有两种可能性：

**2.a.** 使用长度说明符将打印数组的全部内容。因此，如果您访问数组中未初始化的字节（即使在其大小范围内），它仍然会导致*未定义的行为*。否则，您必须跟踪有效内容的长度，以便`%s`在 printf() 中使用长度说明符来避免 UB。在这种情况下，您*已经*知道有效内容的长度。因此，您可以简单地自己终止它，而不是告诉 printf()*只*打印有效内容。

**2.b。**假设您已经用零初始化了整个数组。在这种情况下，数组将是一个有效的*字符串*，因此不需要长度修饰符。

所以我会说它没有多大用处。*

# asp.net - SignalR 在 start().done() 之后并不总是准备好？

> ID：15279550
> 
> 赞同：18
> 
> 时间：2013-03-07T19:02:05.520
> 
> 标签：asp.net, signalr

我有一个使用 SignalR 的小项目，但是我得到了一些非常不一致的行为。

```
<script type="text/javascript">
    $(function () {
        var chat = $.connection.brewBattleHub;
        $.connection.hub.start().done(function () {
            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.server.roll($("#username").val(), $("#drinkname").val());
            });
            chat.server.sendMessage("SignalR loaded...");
        });
    });
</script> 
```

当我加载页面时，有时我会看到消息“SignalR 已加载”，有时我没有。

页面上还有一些其他功能，有时这也不起作用。如果我单击按钮并使事情发生得足够多，它最终会一口气完成……从这一点开始，一切都是金色的，并且可以完美运行。

有`start().done()`吗？不确保一切准备就绪？

=== 附录，我没有引用 jquery mobile（谷歌提到这样做时有一个错误）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-06T23:21:32.877

本周我遇到了类似的问题，只是 .done() 中的代码从未运行过。我启用了日志记录，但没有记录任何内容。检查浏览器的控制台没有错误。查看浏览器的开发工具，我可以看到调用 start() 时没有网络活动。我确认 $.connection.myhubclass 返回的代理有我所有的方法，所以我知道它可以与服务器对话并且服务器端代码设置正确。

在一遍又一遍地查看代码和文档之后，我确信我没有做错任何事情。SignalR 非常简单，如果您按照示例进行操作，很难做错。我在桌子上敲了很长时间，试图弄清楚这一点。

然后我注意到，如果我从控制台运行 SignalR 的 start 方法，它会起作用。这让我相信它试图过早地开始连接。我通过更改初始化代码解决了我的问题：

```
$.connection.hub.start().done(function () {
  //Do interesting stuff
}); 
```

对此：

```
setTimeout(function () {
    $.connection.hub.start().done(function () {
      //Do interesting stuff
    });
}, 5000); 
```

我确信我可以将延迟从 5 秒减少到更短的时间，但额外的时间似乎是让浏览器自己准备好创建连接所需要的时间。一旦出现延迟，日志记录开始工作，连接出现，服务器端 OnConnected() 运行，并且 done() 在客户端上运行。

在弄清楚这一点后，我仔细检查了我的 javascript 加载顺序，认为我可能正在加载一些乱序的东西，但根据 SignalR 示例，顺序是正确的。我加载 jQuery、SignalR、/signalr/hubs，然后是初始化所有内容的脚本文件。

我愿意接受有关为什么需要延迟的建议。我在任何文档中都没有看到它，所以我知道这可能是我所做的。幸运的是，对于这个页面来说，在启动 SignalR 之前的轻微延迟不是问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T19:15:04.273

尝试启用 SignalR 日志记录以帮助调试您的问题。您可能还想添加一个`fail`处理程序以防启动不成功（尽管这不太可能）。完成此操作后，您可以通过浏览器的 F12 工具查看 JS 和网络日志。

```
<script type="text/javascript">
    $(function () {
        $.connection.hub.logging = true;
        var chat = $.connection.brewBattleHub;
        $.connection.hub.start().done(function () {
            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.server.roll($("#username").val(), $("#drinkname").val());
            });
            chat.server.sendMessage("SignalR loaded...");
        }).fail(function (reason) {
            console.log("SignalR connection failed: " + reason);
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-21T11:19:36.547

我找到了解决方案（就我的问题而言）。我在 IE11 上加载了大约 7-8 秒的 SignalR，我尝试在控制台中“调试”它，我找到了加载延迟的原因：

> [13:13:04 GMT+0200 (...)] SignalR：绑定到 iframe 的加载事件。
> [13:13:09 GMT+0200 (...)] SignalR：尝试连接时，foreverFrame 超时。
> [13:13:09 GMT+0200 (...)] SignalR：永远停止帧。

花了5秒。尝试加载 iframe。

巧妙的解决方案是关闭 iframe，因为 IE11 可以正常使用 longPolling：

```
$.connection.hub.start(({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] })) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-02T20:58:34.310

我有一个类似的问题，仅在断开连接后尝试重新建立连接时出现。我从断开处理程序调用 start()，然后尝试从 start.done() 发送消息。然后我收到一条错误消息，指出 SignalR 尚未准备好。

我在日志中注意到 start.done() 立即解决，所以在我的情况下，有一个从断开连接开始然后发送的呼叫。我在断开连接处理程序中添加了一个 setTimeout，以便启动和发送与断开连接分离。这为我解决了这个问题。

# javascript - 函数内部的ejs模板函数

> ID：15279556
> 
> 赞同：0
> 
> 时间：2013-03-07T19:02:14.733
> 
> 标签：javascript, node.js, kml, ejs

ejs模板有没有办法在另一个函数中调用一个函数？例如，我正在尝试这样做：

```
<% function graph(graph) { %>
        <a href="<%= graph.href %>"><%= graph.description %></a>
<% } %>

<% function point(point) { %>

    <Placemark id="<%= point.id %>">
        <description>
        <%= point.Apibudinimas %> <%= point.IP %>
        <![CDATA[

        <% graphs.map(graph) %>

        ]]>
        </description>
    </Placemark>

<% } %> 
```

但它说图表是未定义的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:11:03.557

您的代码是说“图形”（带有“s”）是未定义的，而不是“图形”，对吗？你在哪里定义图形数组？否则，代码看起来不错。

# asp.net-mvc-3 - 如何在中使用 JQuery 自定义验证器和 onChange 事件使用 ASP.NET MVC 3

> ID：15279558
> 
> 赞同：0
> 
> 时间：2013-03-07T19:02:15.580
> 
> 标签：asp.net-mvc-3, file-upload, jquery-validate, unobtrusive-validation

## 在另一个 javascript 函数中调用自定义 jquery 验证器

如何`<input type='file' />`在普通 javascript 函数中为 onChange 事件调用 jQuery 自定义验证器。我需要捕获事件并触发已注册的自定义验证器，在它内部创建一个表，其中包含与尝试上传的每个文件相对应的行。我已经阅读了这篇文章，但我无法验证作者所说的内容：[自定义验证器调用的版本](http://devblog.springest.com/calling-built-in-validation-methods-from-the-jquery-validation-plugin-inside-custom-validation-methods)

提前致谢。

* * *

我有一个 jquery 自定义验证器函数，它可以在将它们上传到服务器时检查有效的文件扩展名（图像是现在的主要目标）：

```
$(document).ready(function () {
$('#UploadedFile').live('change', function () {
    //TODO
    alert('Hey hey!');//It works, because the event is captured and calls this line
    return jQuery.validator.methods.extensions.call(null, $(this), null);//Doesn't work for me

   //This is for running validation in the client-side      
}); 
```

});

```
jQuery.validator.addMethod("extensions", function (value, element, params) {
var extensionsAllowed = params.extensions;
var pattern = new RegExp(extensionsAllowed);
var elementToValidate = $(element);
var maxUploadSize = Math.floor(5000000 / 1024) / 1024;//converting to Kilobytes

var result = fnCreateUploadDetailsTable(elementToValidate, pattern, maxUploadSize);
return result;

   //It works for server-side Data Annotations validator, 
   //but the request travels over the HTTP connection and I want to avoid overloading the server
   //with this basic function
});

jQuery.validator.unobtrusive.adapters.add("extensions", ["extensions"], function (options) {
options.rules["extensions"] = options.params;
options.messages["extensions"] = options.message;
}); 
```

# c# - 通过 PHP 向从 C# 生成的 WSDL 发出 SOAP 请求，在语法上苦苦挣扎

> ID：15279559
> 
> 赞同：0
> 
> 时间：2013-03-07T19:02:17.093
> 
> 标签：c#, php, soap, wsdl

我有一个用 C# 编写的 Web 服务。我从 PHP 调用这个 Web 服务的方法。所有期望原始参数的方法都很好用。不过，在尝试调用更复杂的方法时，我会收到异常。

这是我的 C#：

```
[WebMethod(Description = "Search components using the specified filters and username.")]
public DataSet Search(AttributeFilter[] filters, string username,
    int[] displayedAttributes, ComponentSearchOptions options,
    bool includeFlags, bool includeIcons)
{
    RemoteComponent remoteComponent = RemoteActivator.Create<RemoteComponent>();

    return remoteComponent.SearchComponents(filters, username, displayedAttributes, options, includeFlags, includeIcons);
} 
```

这是相关的 WSDL：

```
<s:element name="Search">
    <s:complexType>
        <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="filters" type="tns:ArrayOfAttributeFilter"/>
            <s:element minOccurs="0" maxOccurs="1" name="username" type="s:string"/>
            <s:element minOccurs="0" maxOccurs="1" name="displayedAttributes" type="tns:ArrayOfInt"/>
            <s:element minOccurs="1" maxOccurs="1" name="options" type="tns:ComponentSearchOptions"/>
            <s:element minOccurs="1" maxOccurs="1" name="includeFlags" type="s:boolean"/>
            <s:element minOccurs="1" maxOccurs="1" name="includeIcons" type="s:boolean"/>
        </s:sequence>
    </s:complexType>
</s:element>
<s:complexType name="ArrayOfAttributeFilter">
    <s:sequence>
        <s:element minOccurs="0" maxOccurs="unbounded" name="AttributeFilter" nillable="true" type="tns:AttributeFilter"/>
    </s:sequence>
</s:complexType>
<s:complexType name="AttributeFilter">
    <s:sequence>
        <s:element minOccurs="1" maxOccurs="1" name="Attribute" type="s:int"/>
        <s:element minOccurs="1" maxOccurs="1" name="Comparison" type="tns:SearchComparison"/>
        <s:element minOccurs="0" maxOccurs="1" name="Value"/>
    </s:sequence>
</s:complexType>
<s:simpleType name="SearchComparison">
    <s:restriction base="s:string">
        <s:enumeration value="Equals"/>
        <s:enumeration value="GreaterThan"/>
        <s:enumeration value="GreaterThanOrEqual"/>
        <s:enumeration value="In"/>
        <s:enumeration value="LessThan"/>
        <s:enumeration value="LessThanOrEqual"/>
        <s:enumeration value="Like"/>
    </s:restriction>
</s:simpleType>
<s:simpleType name="ComponentSearchOptions">
    <s:list>
        <s:simpleType>
            <s:restriction base="s:string">
                <s:enumeration value="None"/>
                <s:enumeration value="IncludeCables"/>
                <s:enumeration value="IncludePorts"/>
            </s:restriction>
        </s:simpleType>
    </s:list>
</s:simpleType>
<s:element name="SearchResponse">
    <s:complexType>
        <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="SearchResult">
                <s:complexType>
                    <s:sequence>
                    <s:element ref="s:schema"/>
                    <s:any/>
                    </s:sequence>
                </s:complexType>
            </s:element>
        </s:sequence>
    </s:complexType>
</s:element> 
```

这是我目前在 PHP 中的尝试：

```
$filters = array("filter" => (object)array("AttributeFilter" => (object)array("Attribute" => -2, "SearchComparison" => "Equals", "Value" => "110001")));
$search = $soapClient->Search($filters , "Administrator", NULL, "None", true, true); 
```

我收到异常：

> SOAP-ERROR：编码：对象没有“选项”属性

谁能指出我正确的方向？或者让我知道我正在尝试的东西是否在技术上是不可能的？

谢谢。

哦，还有，这是一个有效的 C# 测试用例：

```
private readonly ComponentSearchServicesSoapClient ComponentSearchServices = new ComponentSearchServicesSoapClient();

[Test]
public void TestSearchBarcode()
{
    AttributeFilter filter = new AttributeFilter
    {
        Attribute = -2,
        Comparison = SearchComparison.Equals,
        Value = "110001"
    };

    DataSet dataset = ComponentSearchServices.Search(new[] { filter }, "Administrator", null, ComponentSearchOptions.None, false, false);

    if (dataset.Tables.Count == 0 || dataset.Tables[0].Rows.Count != 1)
    {
        throw new Exception("Failed to properly search");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:23:59.733

解决方案是两部分的问题。

进行调用的正确语法是：

```
$search = $soapClient->Search(array("filters" => array("AttributeFilter" => array('Attribute' => 310, 'Comparison' => 'Equals', 'Value' => 'Peering LAN')), 'username' => 'Administrator', 'displayedAttributes' => array(310), 'options' => 'None', 'includeFlags' => true, 'includeIcons' => true)); 
```

另一个问题是 AttributeFilter 类期望属性“值”是“对象”类型。将“值”更改为“字符串”类型会删除正在发生的序列化异常。

# jquery - .is(':checked') 总是返回 true

> ID：15279561
> 
> 赞同：3
> 
> 时间：2013-03-07T19:02:19.637
> 
> 标签：jquery

HTML：

```
<table id="list">
   <tr>
      <td><input type="checkbox" checked="true"></td>
      <td>...</td>
   </tr>
   <tr>
      <td><input type="checkbox" checked="true"></td>
      ...
   </tr>
   ...
</table> 
```

JS：

```
$('#list tr').each(function(){
   console.log(
        $(this).find('input[type="checkbox"]').is(':checked')
   );    
}); 
```

问题：上面的日志语句总是返回true。每个 tr 都保存一些数据，我想使用这些数据执行操作。但是用户可以取消选择一些实体，在这种情况下这是不可能的，因为 `is(':checked')`总是返回 true，即使条目被取消选择/取消选中。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:13:46.443

Your 'checked' attribute has `true` as its value, so it will return `true` as even having `<input type="checkbox" checked />` will also going be checked.

I created a [demo](http://jsfiddle.net/Wyrdk/) with your code, with additional function to retrieve `.is(":checked")` as it's property changed.

```
$("input").change(function() {
    console.log($(this).is(':checked'));
}); 
```

And It shows the change. Your problem must be somewhere else.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T19:05:56.693

我的猜测是你实际上正在使用这个：

```
input type="checkbox" checked="false" 
```

这会导致选中复选框，因为`"false"`（作为字符串）评估为`true`.

如果您希望取消选中复选框，请不要包含选中的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T19:05:37.097

首先，您使用以下语句选择所有复选框，因此如果选中一个，它将返回 true

```
$(this).find('input[type="checkbox"]').is(':checked') 
```

其次，checked 的默认值应该是checked="checked"。

# node.js - Twitter API 1.1 OAuth 获取使用数据

> ID：15279565
> 
> 赞同：3
> 
> 时间：2013-03-07T19:02:35.970
> 
> 标签：node.js, oauth, twitter, twitter-oauth

我阅读了本教程以在 nodejs 中实现 twitter oauth（用于“使用 twitter 登录”目的）-http: [//codetheory.in/how-to-use-twitter-oauth-with-node-oauth-in-your-node- js-express-应用程序/](http://codetheory.in/how-to-use-twitter-oauth-with-node-oauth-in-your-node-js-express-application/)

最后一段代码调用了这个变量`results`，它应该保存 twitter 发回的用户数据，但对我来说它只包含 screen_name 和 user_id 是不够的。我需要更多数据，例如个人资料图片等。

所以我查看了 twitter 文档 - [https://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)
示例 URL 似乎工作正常 - [https://api.twitter.com/1/users /show.json?screen_name=TwitterAPI&include_entities=true](https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true)

但最近我读到 twitter 很快就会关闭 API 1 并用 API 1.1 替换它

所以我尝试了 1.1 API - [https://dev.twitter.com/docs/api/1.1/get/users/show](https://dev.twitter.com/docs/api/1.1/get/users/show)
示例 URL**不起作用**- [https://api.twitter.com/1.1/users/show .json?screen_name=rsarver](https://api.twitter.com/1.1/users/show.json?screen_name=rsarver)

给出错误 -

```
{"errors":[{"message":"Bad Authentication data","code":215}]} 
```

我究竟做错了什么 ？如何从 twitter 正确获取用户信息，并希望在使用此模块的 Node.js 代码中 - [https://github.com/ciaranj/node-oauth](https://github.com/ciaranj/node-oauth)？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:32:11.920

[API v1.1 端点需要 OAuth 身份验证](https://dev.twitter.com/discussions/11826#comment-25719)。

您可能会查看不同的 oauth 模块：[ntwitter](https://github.com/AvianFlu/ntwitter)

# css - 如何打开 CSS 垂直菜单旁边的子菜单？

> ID：15279571
> 
> 赞同：2
> 
> 时间：2013-03-07T19:02:47.390
> 
> 标签：css, menu

我需要使用 CSS 和`<ul>` `<li>`标签制作一个垂直菜单。但是，当我将光标放在包含子菜单的链接上时，其他主要项目会移动到另一个地方。
这是[我的 jsfiddle](http://jsfiddle.net/Kc6m4/1/)。
有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:09:36.720

而不是制作子菜单`position: relative`（仍然使其成为流程的一部分），而是使用适当的///设置来包含`li` `position: relative`和：`menu_sub` `position: absolute``left``right``top``bottom`

```
#menu li {
    position: relative;
}
#menu_sub {
    margin:0;
    padding:0;
    position: absolute;
    list-style:none;
    display:none;
    left: 70%;
    top: 0;
} 
```

[http://jsfiddle.net/Kc6m4/3/](http://jsfiddle.net/Kc6m4/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:14:37.263

爆炸药丸反应有效。就像这样：

通过浮动子菜单，您也可以打破正常流程，但仍保留它与父 UL 的关系：

[http://jsfiddle.net/Kc6m4/4/](http://jsfiddle.net/Kc6m4/4/)

```
#menu li:hover ul {
    display: block;
    float: right;
    clear: none;
    position: absolute;
    top: -30px;
    left; 0;
} 
```

Then you adjust the position using top, left, right, etc. In my example above, I used a negative `top` position to clear the height of the parent list item so they start at roughly the same position.

# vb.net - 使用自动生成字段将行添加到数据表

> ID：15279573
> 
> 赞同：0
> 
> 时间：2013-03-07T19:02:48.280
> 
> 标签：vb.net, datagridview, datatable

首先，我已经搜索了互联网以找到解决方案，但似乎没有什么是完全正确的。

我有一个显示数据库信息的 DataGrid。我正在尝试将记录添加到数据网格和数据库中。下面的代码是我到目前为止的“添加”按钮。

```
Dim TaxConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & ConfigurationManager.AppSettings("Database")
    Dim dbConnection As OleDbConnection = New OleDbConnection(TaxConnStr)
    Dim dt As New DataTable
    Dim ds As New DataSet

    Try

        dt.Rows.Add(New String() {
                                            boxAssignTo.Text, _
                                            boxState.Text, _
                                            boxCounty.Text, _
                                            boxAmount.Text, _
                                            boxType.Text, _
                                            boxRank.Text})

    Catch ex As Exception
    Finally
        dbConnection.Close()
    End Try 
```

现在我遇到错误“输入数组长于此表中的列数。” 在此过程中显示。我推测这是因为在数据库的表中我有一个自动生成的 ID 字段，我没有添加到该字段中。但我对如何添加它一无所知。

不知道这是否重要，但是当我显示 DataGrid 时，我有

```
DataGridView1.Columns.Remove("ID") 
```

所以我没有实际看到 ID 字段（在这个 winForm 上有点毫无意义）。

温柔点，我对数据库和 VB 很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:28:07.253

您收到此错误的原因是您没有添加任何列：

```
 Try
        dt.Columns.Add("a")
        dt.Columns.Add("b")
        dt.Columns.Add("c")
        dt.Columns.Add("d")
        dt.Columns.Add("e")
        dt.Columns.Add("f")

        dt.Rows.Add(New String() {"1","2","3","4","5","6"})

    Catch ex As Exception
    Finally

    End Try 
```

# android - Docx/Pdf/etc 和 WebView

> ID：15279577
> 
> 赞同：0
> 
> 时间：2013-03-07T19:03:10.707
> 
> 标签：android, pdf, base64, android-webview, doc

如何将 doc/docx/pdf 和 xls 文件加载到 WebView 中？

我尝试使用 loadData(myBase64, "mime type for example application/pdf", "base64)，我尝试使用 loadUrl("file///...") - 没有效果。或者我如何查看这些文件我的应用程序？（没有外部程序）

...而且我不能使用网络阅读器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:42:53.483

> 如何将 doc/docx/pdf 和 xls 文件加载到 WebView 中？

你没有。`WebView`无法显示这些文件类型。`WebView`处理 HTML、CSS、JS、一些图像格式等。

> 或者我如何在我的应用程序中查看这些文件？（没有外部程序）

你在图书馆上花了很多钱来做到这一点。

# android - 在图像按钮单击上开始活动

> ID：15279584
> 
> 赞同：0
> 
> 时间：2013-03-07T19:03:23.643
> 
> 标签：android, android-intent, android-activity

我已经尝试实现简单的东西来开始图像按钮上的新活动单击“Dealofday”是我的图像按钮名称......这是我的 1）mainactiviy.java

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    addListenerOnButtondod();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void addListenerOnButtondod() {

    final Context context = this;

    ImageButton btndod = (ImageButton) findViewById(R.id.Dealsofday);

    btndod.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent = new Intent(context,Spldeals.class);
            startActivity(intent);   

        }

    });
}

} 
```

2)Spldeals.java 如下

```
public class Spldeals extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spldeals);
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_spldeals, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
}

} 
```

我的日志如下所示

```
03-08 00:22:38.697: D/dalvikvm(477): GC_EXTERNAL_ALLOC freed 678 objects / 52432 bytes in 87ms
03-08 00:22:42.777: I/dalvikvm(477): Could not find method com.example.test.Spldeals.getActionBar, referenced from method com.example.test.Spldeals.onCreate
03-08 00:22:42.777: W/dalvikvm(477): VFY: unable to resolve virtual method 3320: Lcom/example/test/Spldeals;.getActionBar ()Landroid/app/ActionBar;
03-08 00:22:42.788: D/dalvikvm(477): VFY: replacing opcode 0x6e at 0x0009
03-08 00:22:42.797: D/dalvikvm(477): VFY: dead code 0x000c-0011 in Lcom/example/test/Spldeals;.onCreate (Landroid/os/Bundle;)V
03-08 00:22:42.878: D/AndroidRuntime(477): Shutting down VM
03-08 00:22:42.878: W/dalvikvm(477): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-08 00:22:42.897: E/AndroidRuntime(477): FATAL EXCEPTION: main
03-08 00:22:42.897: E/AndroidRuntime(477): java.lang.NoSuchMethodError: com.example.test.Spldeals.getActionBar
03-08 00:22:42.897: E/AndroidRuntime(477):  at com.example.test.Spldeals.onCreate(Spldeals.java:15)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.os.Looper.loop(Looper.java:123)
03-08 00:22:42.897: E/AndroidRuntime(477):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-08 00:22:42.897: E/AndroidRuntime(477):  at java.lang.reflect.Method.invokeNative(Native Method)
03-08 00:22:42.897: E/AndroidRuntime(477):  at java.lang.reflect.Method.invoke(Method.java:521)
03-08 00:22:42.897: E/AndroidRuntime(477):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-08 00:22:42.897: E/AndroidRuntime(477):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-08 00:22:42.897: E/AndroidRuntime(477):  at dalvik.system.NativeStart.main(Native Method) 
```

第一个屏幕没问题，并且加载正确，但是当我单击图像按钮（Dealofday）时，应用程序意外停止，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:14:14.740

`getActionBar().setDisplayHomeAsUpEnabled(true);`

您正在尝试在不存在 ActionBar 的 Android 版本（低于 API 11）上运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:14:20.423

如果你有一个`android:minSdkVersion`低于 11 的方法`getActionBar()`是不可用的，所以尝试设置 in`AndroidManifest.xml` `android:minSdkVersion=11`或更大。

该方法`getActionBar()`仅从 API 11 开始可用。

# windows - Maven 中的 Java_home

> ID：15279586
> 
> 赞同：43
> 
> 时间：2013-03-07T19:03:32.140
> 
> 标签：windows, maven, java, java-home

当我跑的时候`mvn -version`，我注意到了`java_home`（`...jdk\jre`如下图）。那是错的吗？它不应该指向`...\jdk.x.y.z`（没有`\jre`）吗？如果是这样，我该如何重置它？（在全局`%java_home%`指向`jdk`目录）

```
C:\Users\Owner>mvn -version
Apache Maven 2.2.1 (r801777; 2009-08-06 15:16:01-0400)
Java version: 1.7.0_17
Java home: C:\Program Files\Java\jdk1.7.0_17\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 7" version: "6.1" arch: "amd64" Family: "windows" 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-07T19:06:32.143

不，这没有错。它指向您的 JDK 使用的 JRE，这是它应该做的。如果您`JAVA_HOME`在 Maven 外部打印，它应该可以正确打印：

```
C:\>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.7.0_07

C:\>mvn -version
Apache Maven 3.0.4 (r1232337; 2012-01-17 10:44:56+0200)
Maven home: C:\APPS\apache-maven-3.0.4\bin\..
Java version: 1.7.0_07, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jdk1.7.0_07\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows"
C:\> 
```

所以基本上 JAVA_HOME 需要指向一个 JDK 安装（maven 需要 tools.jar），但 maven 实际上使用 JDK 中的 jre 来运行自己。

使用时，maven 使用 java 内部 java.home 属性，从[源代码](https://git-wip-us.apache.org/repos/asf?p=maven.git;a=blob;f=maven-embedder/src/main/java/org/apache/maven/cli/CLIReportingUtils.java)`mvn -version`可以看出：

```
version.append( "Java home: " + System.getProperty( "java.home", "<unknown java home>" ) ).append( LS ); 
```

此属性与 JAVA_HOME 环境设置不同，因此可能会欺骗您。它实际上是动态属性，向您显示哪个 JRE 正在运行您的代码。如果你编译并执行一个Test.java测试类打印同样的，你可以看到如果你的JAVA_HOME指向一个JDK，java.home的值不等于你的JAVA_HOME。这是意料之中的。

引用[这个](http://javahowto.blogspot.fi/2006/05/javahome-vs-javahome.html)：

> JAVA_HOME 和 java.home 有什么区别？
> 
> JAVA_HOME 是JDK 安装目录，例如C:\jdk5。它旨在设置为环境变量并在 Windows 批处理文件或 Unix 脚本中引用。我总是在我的 Windows 控制面板和 .tcsh 文件中拥有它，以及其他常见的环境变量。一些 Java 应用程序为此使用名称 jdk.home，我认为这是一个更好的名称。但是 JAVA_HOME 从一开始就被使用，现在是一个约定。
> 
> java.home 是 JRE 安装目录，例如 C:\jdk5\jre 或 C:\Program Files\Java\jre1.5.0_06。与 JAVA_HOME 不同，我从未将 java.home 视为环境变量。java.home 是一个内置的 Java 系统属性，其值为 JRE 安装目录。由于所有 Java 系统属性也作为 Ant 构建属性公开，因此您也可以在构建文件中使用 ${java.home}。
> 
> jre.home 会是一个更好的名字吗？也许吧，但我认为 Sun 不会改变它。

可以看到 maven 在 mvn.bat 上使用了 JAVA_HOME：

```
:endInit
SET MAVEN_JAVA_EXE="%JAVA_HOME%\bin\java.exe"
..
%MAVEN_JAVA_EXE% %MAVEN_OPTS% -classpath %CLASSWORLDS_JAR% .. 
```

如果你想确定，你可以在mvn.bat中注释掉“@echo off”语句，这样你就可以看到它正在被使用。

* * *

TL;DR：根据您提供的信息，您的配置是正确的，无需更改任何内容。

* * *

编辑：感谢这个线程，还有[一个关于这令人困惑的问题](https://issues.apache.org/jira/browse/MNG-5756)，这导致 Maven 版本 3.5.4 的输出发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-14T09:34:15.067

帮助我调试 mvn/jdk 问题的是在运行 mvn 之前设置它： `set MAVEN_BATCH_ECHO=on`

你会得到详细的输出（在 Windows 上），包括 Maven 如何选择 java 的信息。

# c# - 将参数传递给ajax上的webservice

> ID：15279592
> 
> 赞同：0
> 
> 时间：2013-03-07T19:03:55.330
> 
> 标签：c#, javascript, jquery, ajax

我有一个带有一个参数的简单 Web 服务：

```
public static string LoadComboNews(string id)
{
    string strJSON = "";
    DataRowCollection people = Util.SelectData("Select * from News where person = "+ id +" Order by NewsId desc ");
    if (people != null && people.Count > 0)
    {
        //temp = new MyTable[people.Count];
        string[][] jagArray = new string[people.Count][];

        for (int i = 0; i < people.Count; i++)
        {
            jagArray[i] = new string[] { people[i]["NewsID"].ToString(), people[i]["Title"].ToString() };
        }

        JavaScriptSerializer js = new JavaScriptSerializer();
        strJSON = js.Serialize(jagArray);
    }

    return strJSON;
} 
```

在javascript上我试图用参数调用它：

```
jQuery.ajax({
        type: "POST",
        url: "webcenter.aspx/LoadComboNews",
        data: "{'id':usrid}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            // Replace the div's content with the page method's return.
            combonews = eval(msg.d);
        }

    }); 
```

**更新：**

usrid 是动态的

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:08:27.430

您发送的数据无效`"{'id':usrid}"`

这不是一个有效的 json 可能你想做的是假设 usrid 是一个变量

```
"{\"id\":"+usrid+"}" 
```

用它你应该执行这个命令

`Select * from News where person = '"+ id +"' Order by NewsId desc`

考虑 id 是一个字符串

也试试这个

```
combonews = JSON.stringify(msg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:19:23.110

将 WebMethod 添加到方法中

```
[WebMethod]
public static string LoadComboNews(string id) 
```

并尝试这种格式

```
$.ajax({
    type: "POST",
    url: "webcenter.aspx/LoadComboNews",
    data: '{"id":"usrid"}',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        // Replace the div's content with the page method's return.
        alert(msg.d);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log(textStatus, errorThrown);
        alert(textStatus + " " + errorThrown);
    }
}); 
```

或者

```
data: '{"id":"' + usrid + '"}', 
```

# ios - 滚动应用：UIPageViewController vs UIScrollView

> ID：15279601
> 
> 赞同：9
> 
> 时间：2013-03-07T19:04:13.123
> 
> 标签：ios, uiscrollview, uipageviewcontroller

我正在开发一个应用程序，其中有多个屏幕，每个屏幕都有相同的布局，只是传入不同的数据，然后我希望用户能够从一个屏幕滑动到下一个屏幕。

到目前为止，我`UIPageViewController`使用过渡样式的项目模板得到了一些工作`UIPageViewControllerTransitionStyleScroll`。到目前为止我所做的工作还可以，尽管它占用大量资源，因为每次我滑动到新页面时它都会实例化一个新的视图控制器，但我正在考虑解决这个问题。

我担心的是它不是 ibooks 意义上的严格的页面应用程序，所以即使我能够让它看起来像一个滚动应用程序，使用过渡样式设置，我想知道人们是否有理由似乎只将此模板用于书籍类型的应用程序，除非我弄错了

似乎还有另一种使用 a`UIScrollView`和`PageControl`做类似功能的方法

[http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

我不确定哪种方法可以更好地解决我要解决的问题，所以我正在寻找一些反馈。每个页面都需要是视图控制器的一个单独实例，因为每个页面上要显示多个元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:17:05.027

使用`UIScrollView`要困难得多。如果你的目标是 iOS 6，你几乎肯定应该使用`UIPageViewController`. 如果您的目标是 iOS 5，那么`UIPageViewController`可能并不完美，因为唯一可用的页面转换是“滚动”，它看起来像翻页。

如果您担心资源使用情况，您可以重用视图控制器。

请参阅 WWDC 2012 会议 223： [https ://developer.apple.com/videos/play/wwdc2012/223/](https://developer.apple.com/videos/play/wwdc2012/223/)

# coldfusion - 覆盖开发服务器环境的应用程序中的邮件设置

> ID：15279602
> 
> 赞同：1
> 
> 时间：2013-03-07T19:04:13.383
> 
> 标签：coldfusion, cfml

我目前正处于构建应用程序的最后阶段，并已要求用户组对应用程序执行生产级使用测试。我的应用程序是一个临时订单管理系统，它会在保存包含发票的订单时向客户发送电子邮件。

我昨天在做一些测试时遇到了一个问题；此环境当前包含生产质量数据，包括旧客户记录。我处理了一些订单并忘记了功能，我为订单下订单的客户收到了说订单已完成的电子邮件。很好，它起作用了，不好的是它导致了这种混乱。

我更喜欢的操作是在应用程序中的某处设置一些东西，强制所有电子邮件（无论收件人如何）都发送到特定地址，尽管我会满足于仅针对此应用程序将其关闭即可。由于需要对处理电子邮件但未填充生产质量数据的其他应用程序执行测试，因此在服务器级别关闭它不是首选选项。

是否有任何特定的标志或代码可以用来覆盖应用程序中的服务器设置，以便仅根据我们识别环境的方式将电子邮件发送到某个地址，或者完全不发送电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:11:43.400

参考这个页面： [http ://cookbooks.adobe.com/post_How_can_I_use_Application_level_SMTP_Server_Settin-16469.html](http://cookbooks.adobe.com/post_How_can_I_use_Application_level_SMTP_Server_Settin-16469.html)

出于测试目的，您可以将 SMTP 服务器设置为不存在的 IP 地址。cfmail 例程仍然有效，coldfusion 会将其移动到无法投递的文件夹中。

您可以在它周围添加`<cfif>`语句以确定您是在生产 URL 还是开发 URL 上，以便它在生产服务器上使用正确的服务器，或者在开发服务器上使用“假”服务器。或者在生产服务器上，有一个开/关变量，您可以使用它来测试通过您的 smtp 服务器的电子邮件或关闭电子邮件并将它们路由到假 SMTP 服务器。

如果您使用的是 8.0 或更早版本，您可以为您的邮件服务器设置应用程序级别变量并修改您的 cfmail 标记以引用：

```
<cfmail server="#application.mailserver#" to="" from="" subject=""> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:41:43.007

此解决方案假定您使用相同的邮件服务器，但只想将电子邮件交换到测试地址（可能是您的，因此您可以看到结果）。它还假定您的实时服务器名称解析为具有“www.something.somethong”的内容。而您的 dev/test/qa 等服务器则没有。

在您的应用程序 cfc onApplicationStart() 中尝试以下操作：

```
<cfscript>
  if(listFirst(CGI.SERVER_NAME,'.') != 'www') {
    Application.szEmailToTestEnv = 'test@somewhere.com'; // Use your test email here
  }
</cfscript> 
```

然后，您发送电子邮件的位置在您的邮件参数前面有一些逻辑，例如：

```
<cfscript>
  if(isDefined('Application.szEmailToTestEnv') && len(Application.szEmailToTestEnv)) {
    Variables.szEmailTo = Application.szEmailToTestEnv;
  } else Variables.szEmailTo = Variables.qCustomerEmail;
</cfscript> 
```

然后在您的 cfmail 中：

```
<cfmail to="#Variables.szEmailTo#".... 
```

根据需要调整范围和变量名称和值。本质上，任何不是您的实时站点的“站点”（例如 dev.yoursite.com）都将使用您在应用启动时设置的测试电子邮件发送电子邮件，并且实时将继续使用正确的客户电子邮件，而无需更改代码您的实时和测试代码。

# php - 更新比较 4 个变量的表？

> ID：15279603
> 
> 赞同：1
> 
> 时间：2013-03-07T19:04:15.140
> 
> 标签：php, mysql, sql, database

我正在尝试通过将 4 个字段与 4 个变量进行比较来更新表上的已验证列

这是示例代码

```
$query1 = mysql_query("UPDATE tbl_grades_subj 
                      SET activated01 = 1 
                      WHERE grades_subject_code = '$hidden_subj1' 
                      & grades_term = '$hidden_term1' 
                      & section = 'hidden_sec1' 
                     & grades_sy = 'hidden_sy1'")
           or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:06:56.863

你的语法不正确。您需要在您的子句中使用`AND`而不是。`&``WHERE`

```
WHERE grades_subject_code = '$hidden_subj1' 
AND grades_term = '$hidden_term1' 
AND section = 'hidden_sec1' 
AND grades_sy = 'hidden_sy1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:07:14.020

使用`AND`而不是`&`. `&`按位与，你想要一个逻辑与。

```
... WHERE field=X and field=Y AND field=z etc... 
```

# windows - 从另一个桌面查找应用程序上的窗口

> ID：15279604
> 
> 赞同：0
> 
> 时间：2013-03-07T19:04:24.583
> 
> 标签：windows, winapi, windows-7

我有同一个用户通过多个同时会话登录到 Windows 7 站（如并发 RDP 或在站登录，然后通过 RDP）。

**更新：** 好的，我对这个问题的研究一直停留在这一点上（python 示例编写不太复杂的代码）：

```
#!/usr/bin/env python
import ctypes
import ctypes.wintypes as wintypes
def enum_desktops():
    GetProcessWindowStation = user32.GetProcessWindowStation

    EnumDesktops = user32.EnumDesktopsW
    EnumDesktopsProc = ctypes.WINFUNCTYPE(wintypes.BOOL, wintypes.LPWSTR, wintypes.LPARAM)
    hwinsta = GetProcessWindowStation()

    def foreach_desktop(desk_name, lparam):
        print("Desktop %s"%desk_name)
        return True
    EnumDesktops(hwinsta, EnumDesktopsProc(foreach_desktop), desk_lparam) 
```

此函数打印有关“默认”和“Winlogon”桌面的信息。如果我们尝试枚举窗口站，我们只会得到**“** WinSta0”，而我可以看到潜在的目标进程在不同的登录会话中启动。

那么，我应该使用什么来查找目标桌面的窗口？

守护进程此时根本不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:30:20.393

有一个后台应用程序或任务托盘小程序，每次桌面会话都会启动。（通过将 EXE 路径添加到以下注册表项即可轻松安装：HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\Current Version\Run）。

存在于已安装应用程序中的代码将做两件事：

1.  您需要做的所有桌面窗口枚举和操作只能与本地桌面交互。

2.  充当在另一个桌面会话上运行的“服务器”应用程序的“客户端”。您的服务器应用程序是触发客户端进行窗口扫描的原因。为此，您几乎可以使用任何所需的进程间通信机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T17:58:02.640

自发布问题以来已经过去了一段时间，但如果有人需要，我会发布答案。

您需要做的是为当前线程设置一个桌面，该线程正在调用`FindWindow`. 这样，你的调用线程就会在其他桌面上运行，并且会找到一个窗口。为此，您必须使用`SetThreadDesktop`WinAPI 函数。

有关详细信息，请查看[SetThreadDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686250(v=vs.85).aspx)上的 MSDN 文档。

# c# - 使用 DataRow 元素填充 MVC 4 中的 SELECT 元素

> ID：15279605
> 
> 赞同：1
> 
> 时间：2013-03-07T19:04:28.517
> 
> 标签：c#, asp.net-mvc-4, datatable

我有一个应用程序正在查询数据库并获取`DataTable`. 我需要`<select>`在我的视图中创建一个其`<option>`元素依赖`DataRow`于`DataTable`. 我的问题是，有没有办法使用 HTML Helpers 来构建这种`<select>`？如果是这样，怎么做？我对 HTML 助手不是很熟悉。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:11:27.480

有一种方法。首先，将你的`DataTable`放入一个`SelectList`. 把它`SelectList`放在你的模型类中，连同一个与用户选择相对应的属性（我们称之为它`CarId`）。

这就是您的模型的样子：

```
public class MyModel
{
    public SelectList Cars { get; set; }
    public int CarId { get; set; }
} 
```

然后你可以`DropDownListFor`在你的视图中使用 HTML Helper 方法，就像这样（下面假设 Razor）：

```
@Html.DropDownListFor(model => model.CarId, Model.Cars) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:24:59.787

您正在寻找的帮手是这些

```
@Html.DropDownList
@Html.DropDownListFor 
```

我发现使用它们的最简单方法是使用可枚举的选择列表

```
public IEnumerable<SelectListItem> DDLItems { get; set; } 
```

我通常从实体填写，但你已经有一个数据表。你是怎么得到那个数据表的？你能改变它吗？

```
DDLItems = new SelectList(context.Table.ToList(),"ValueColumn","TextColumn",Model.Property); 
```

如果你能做到这一点，那么在你看来，你可以做到这一点

```
@Html.DropDOwnListFor(model => model.Property, DDLList) 
```

# ios - 向多个子视图控制器发送消息的最佳方式

> ID：15279606
> 
> 赞同：0
> 
> 时间：2013-03-07T19:04:36.523
> 
> 标签：ios, uiviewcontroller, nsnotificationcenter, childviewcontroller

我实现了一个自定义`UIViewController`，它有多个子视图控制器（主要是通过使用故事板`Container View`，但不仅仅是）。

我想知道“根”视图控制器向其子级发送消息的最佳方式是什么，考虑到发送的消息所涉及的子级视图控制器不一定是“根”视图控制器？

例如：

![查看控制器层次结构](../Images/9fa377a4f2d4c28254e2dcb38d07b63c.png)

我想从`#0`视图控制器`#1`和`#4`. 天真的实现是遍历子节点`#0`并向他们发送消息，如下所示：

```
for (UIViewController *childVC in self.childViewControllers)
{
    if ([childVC respondsToSelector:@selector(myMessage:)])
    {
        [childVC performSelector@selector(myMessage:)];
    }
} 
```

但它根本不起作用，因为`#3`会收到消息（或者如果它是 a`UINavigationController`并且我正在调用自定义方法，则可能不会收到）并且不会将其传播给它的孩子（这里`#4`）。

那么**是否有可能向自己的孩子发送消息，并让消息通过`UIViewController`层次结构传播？**

如果没有，另一种方法是使用`NSNotificationCenter`，让对消息感兴趣的孩子（`#1`和`#4`）观察通知，并在必要时让根视图控制器发布通知。但我觉得只给两个孩子发信息有点过头了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:09:01.790

我倾向于避免`NSNotificationCenter`，因为如果一个人不小心它会创建一些[意大利面条代码](http://en.wikipedia.org/wiki/Spaghetti_code)。尽管如此，**在这种情况下，我还是会使用它**，因为采用消息应该如何在 childsViewControllers 之间传播的逻辑以及 ochildsViewControllers 的子代的可能性更加过大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:10:49.157

我认为通过`NSNotificationCenter`是最好的方法。每个子视图控制器可以自己决定他们想要响应哪些通知；它负责过滤掉发布通知的对象。

*   [NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)
*   [及其指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:14:27.427

你也可以做这样的事情，但我并不是说这是一个好主意：

```
@interface UIViewController (ReverseResponder)

- (void)reverseRespond:(SEL)selector withObject:(id)object;

@end

@implementation UIViewController (ReverseResponder)

- (void)reverseRespond:(SEL)selector withObject:(id)object
{
    if ([self respondsToSelector:selector]) {
        [self performSelector:selector withObject:object];
    }

    for (UIViewController* childViewController in self.childViewControllers) {
        [childViewController reverseRespond:selector withObject:object];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:32:16.630

您可以使用 self.childViewControllers 访问所有孩子，并传递特定索引以获取特定孩子。要到达 4，您必须访问 3 的 topViewController。

```
UIViewController *child4 = [(UINavigationController *)self.childViewControllers[2] topViewController]; 
```

这是否是执行此操作的好方法，取决于您要执行的操作。你为什么要发送消息到这个级别？

# windows - zlib 可以在 Windows 上创建 tar 文件吗？

> ID：15279607
> 
> 赞同：1
> 
> 时间：2013-03-07T19:04:40.477
> 
> 标签：windows, compression, gzip, tar, zlib

在 Windows 上为 Visual Studio 安装 zlib。

我可以创建一个 tar 压缩文件吗？

如果是这样，用 zlib 压缩的 tar 文件的正确文件扩展名是什么。

（我看到 gzip 可以做到这一点并且具有 .tgz 扩展名，zlib 是否包含 gzip？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:11:42.487

gzip 和 zlib 用于压缩。他们不提供 tar 归档功能。要创建 .tgz 文件，通常使用带有`czf`标志的 tar，然后使用 gzip 进行压缩。如果您需要 tar 功能，[libarchive](http://gnuwin32.sourceforge.net/packages/libarchive.htm)看起来很适合这项工作。

# android - 用于存储阶段时的 SharedPreferences 错误

> ID：15279609
> 
> 赞同：0
> 
> 时间：2013-03-07T19:04:43.893
> 
> 标签：android, sharedpreferences

我有包含两个阶段 0 或 1 的项目数组。它们都初始化为 0。在我的一项活动中，我将某些项目的阶段 0 更改为 1。我正在尝试保存这些阶段并在我的应用程序再次启动时获取它们。

这是我改变阶段的活动：

```
public class LogoActivity extends Activity{

static SharedPreferences data;

protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_logo);
...
if(a==true){ 

      ImageAdapter.items[LogoSelectionActivity.pos] = 1;
      SharedPreferences.Editor ed = data.edit();
      ed.putInt(Integer.toString(LogoSelectionActivity.pos), 1);
      ed.commit();
   }
...
} 
```

这是从首选项中获取保存数据的活动：

```
public class LogoSelectionActivity extends Activity {

static int pos;

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    for(int i=0;i<5;i++){
        ImageAdapter.items[i] = LogoActivity.data.getInt(Integer.toString(i), 0);
    }
    setContentView(R.layout.activity_list_logos);
...
} 
```

请注意，我写的第一个活动在第二个活动之前开始。这是错误：

```
03-07 20:51:52.295: E/AndroidRuntime(25452): FATAL EXCEPTION: main
03-07 20:51:52.295: E/AndroidRuntime(25452): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.turkishlogoquiz/com.example.turkishlogoquiz.LogoSelectionActivity}: java.lang.NullPointerException
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.os.Looper.loop(Looper.java:137)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at java.lang.reflect.Method.invoke(Method.java:511)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at dalvik.system.NativeStart.main(Native Method)
03-07 20:51:52.295: E/AndroidRuntime(25452): Caused by: java.lang.NullPointerException
03-07 20:51:52.295: E/AndroidRuntime(25452):    at com.example.turkishlogoquiz.LogoSelectionActivity.onCreate(LogoSelectionActivity.java:32)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.Activity.performCreate(Activity.java:5206)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-07 20:51:52.295: E/AndroidRuntime(25452):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064) 
```

我通过排除其他行来缩短代码。我希望它可以被理解。请注意，我通过将 int 更改为字符串来使用数组中的位置编号作为键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:25:14.180

保存

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_PRIVATE);
            SharedPreferences.Editor prefsEditor = myPrefs.edit();
            prefsEditor.putInt("x", 1);
            prefsEditor.commit(); 
```

读书

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_PRIVATE);
int d = myprefs.getInt("x", -1); 
```

# java - 带有用户定义类的注释

> ID：15279610
> 
> 赞同：0
> 
> 时间：2013-03-07T19:04:44.840
> 
> 标签：java, annotations

在为游戏编写简单的技能系统时，我遇到了一个小问题。我的系统基本约定使用注释来定义技能或能力是否满足所有预定义的要求，但我希望它是可扩展的。

为此，我实现了一个带有接口的 Enum 类，并对其中的 Enum 进行了注释以收集基本信息。我发现这限制了我创建另一个注释的能力，该注释可以放在其他类上，以查看是否需要“训练”该技能。

就像是：

```
public enum AthleticSkills implements AnnotatedSkill {
    @Skill(name = "Jump", base = Agility.class, trained = true)
    JUMP(public void use(){})
} 
```

这个枚举可以是任意数量的技能类型，例如StrengthSkills等，都与AnnotatedSkill接口，这让我可以在方法和参数中定义AnnoatedSkill的类型，但我想做一些类似的事情：

```
public @interface TrainedSkill {
    AnnotatedSkill[] value();
} 
```

训练有素的技能保存在`Set<AnnotatedSkill>`.

我知道这是不可能的，但我想坚持我设置的约定。如有必要，我愿意重新定义我如何设置技能，但如果有人有任何方法可以使这项工作保持与此相似，我将非常感激。

关于如何使用它的更多解释：

技能很简单，每个人都会拥有它们（想想旧的DND技能）并且每个人都可以使用它们，他们使用属性类（Agility.class，Strength.class等）来调整它们的效果。除此之外，还有能力训练一项技能，一次射击，你知道与否，这被添加到`Set<AnnotatedSkill>`玩家对象中，这只是意味着你在使用该技能时会获得额外的修饰符。

ENUM中的use()方法可以根据注解中是否设置trained修饰符来使用，如果为true，则只有在skill被训练的情况下才能使用，如果为false，任何人都可以使用。

如果您希望限制谁可以训练技能（@Requirements）可以将训练/使用限制为类/种族/等，还可以添加另一个注释

我认为这将更多地属于技能/课程/种族/等的框架。

假设如下：

```
@Types(types = {EffectTypes.BUFF, EffectTypes.HEALTH, EffectTypes.HEAL})
@Requirements(
        abilities = {
        @RequireAbility(required = TimedHealAbility.class)})
@TrainedSkill(AthleticSkills.JUMP)
public class TimedHealEffect extends EffectComponent {} 
```

只有当他们训练了 AthleticSkills.JUMP 并且满足@requirements 的要求时，才会出现这种效果。

跟踪训练的技能：

```
public class SkillTracking {
    private Set<AnnotatedSkill> trainedSkills = Collections.newSetFromMap(new ConcurrentHashMap<AnnotatedSkill, Boolean>());

    public void addSkill(AnnotatedSkill skill) {
        trainedSkills.add(skill);
    }

    public boolean removeSkill(AnnotatedSkill skill) {
        return trainedSkills.remove(skill);
    }

    public boolean hasSkill(AnnotatedSkill skill) {
        return trainedSkills.contains(skill);
    }
} 
```

# python - 递归调用中的局部变量

> ID：15279612
> 
> 赞同：1
> 
> 时间：2013-03-07T19:04:55.883
> 
> 标签：python

我有一个函数可以计算小于二叉搜索树中项目的数字。它工作正常。但我只是不明白为什么局部变量计数可以记住总数，因为每次递归调用，它都会重置为 0。

```
def count_less(self, item):
    """(BST, object) -> int
    Return the number of items in BST that  less than item.
    """
    return BST.count_less_helper(self.root, item)

# Recursive helper function for count_less. 
def count_less_helper(root, item):
    count = 0
    if root:
        if root.item < item:
            count += 1
            count += BST.count_less_helper(root.left, item)
            count += BST.count_less_helper(root.right, item)
        elif root.item > item:
            count += BST.count_less_helper(root.left, item)
    return count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:08:36.407

> 为什么局部变量`count`可以记住总数

事实上，它并不“记住”。

在每个递归级别， 的值`count`都是使用递归调用返回的值从头开始派生的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:08:55.910

您在`count`函数开始时将本地设置为 0，但随后将来自以后递归调用的所有计数添加到它，然后再将其返回给调用者。后面的每个函数都从 0 开始，然后加上 1 + 后面调用的计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:30:02.027

您需要传递`count`给您进行的递归调用，以便它可以跟踪它并增加它。或者，您可以允许 count 成为全局变量并在每次调用时递增它，这相当不优雅。

# image - Safari中可怕的图像边框半径

> ID：15279621
> 
> 赞同：1
> 
> 时间：2013-03-07T19:05:28.050
> 
> 标签：image, safari, border, css

我知道这个问题已经被问过一百万次了，但每个解决方案似乎都有点不同，我似乎无法得到我读过的任何一篇文章来为我工作。

我正在构建一个支持 WooCommerce 的网站，并且在 Safari 中遇到图像边框半径问题。我对 CSS 很陌生，想象问题和解决方案的规模正在逃避我。由于这是一个很常见的问题，我将简短介绍。

这是布局：

*   使用 Woothemes 设置我的商店
*   我在商店中为我的拇指设置了图像边框半径
*   它在 Firefox 中看起来很棒，在 Safari 中看起来很糟糕。
*   我根本无法弄清楚如何使用我一直在阅读的解决方案使其工作。我敢肯定有一些简单的东西我还没有掌握。

这是商店的链接：http: [//printologie.com/shop/](http://printologie.com/shop/) - 以及一个显示相同问题的产品页面：http: [//printologie.com/shop/akuafoil-cards/](http://printologie.com/shop/akuafoil-cards/)

这是我的 custom.css 中的代码（简单的 -webkit 标记似乎无法修复它）：

```
ul.products li a img {
    background: none repeat scroll 0 0 transparent;
    border: 1px solid #FFFFFF;
    border-radius: 80px 60px 80px 60px;
    box-shadow: 0 0 0 0 transparent;
    display: block;
    height: auto;
    margin-bottom: 0.75em;
    padding: 4%;
    width: 91%;
} 
```

感谢您对修复程序的任何想法和解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:15:22.777

边框半径是一个 css3 属性。因此，如果您正在为您的项目使用，那么您必须添加所有供应商前缀。就像歌剧`-o-`、chrome 和 safari `-webkit-`、Firefox`-moz-`和 Microsoft一样`-ms-`。

所以你的财产看起来像：

```
-webkit-border-radius:80px 60px 80px 60px;
-moz-border-radius:80px 60px 80px 60px;
-o-border-radius:80px 60px 80px 60px;
-ms-border-radius:80px 60px 80px 60px;
border-radius:80px 60px 80px 60px; 
```

# python - 正则表达式在 html 中查找

> ID：15279626
> 
> 赞同：0
> 
> 时间：2013-03-07T19:05:46.147
> 
> 标签：python, regex, urllib2

我还没有玩过正则表达式，正在寻找一些帮助来查找字符串中的部分。

img 标签示例：

`<img border="0" alt="background, images, scarica, adobe, art, rainbow, colorful, wallpaper, tutorial, abstract, photoshop, web, pictures, wallpapers" width="192" height="120" class="h_120" src="http://static.hdw.eweb4.com/media/thumbs/1/74/736679.jpg" />`

我只是想从一个大的 html 文件中获取 src 的 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:23:42.320

使用`BeautifulSoup`：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html_doc)
page_images = [image["src"] for image in soup.findAll("img")] 
```

* * *

使用安装`BeautifulSoup`：`pip install beautifulsoup4`

# angularjs - AngularJS：防止在子元素上触发“mouseenter”事件

> ID：15279627
> 
> 赞同：6
> 
> 时间：2013-03-07T19:05:47.243
> 
> 标签：angularjs, mouseover, event-bubbling, mouseenter

我现在正在使用 AngularJS 框架，但偶然发现了一个问题。我做了一个指令，叫做“输入”。`mouseenter`它在和上触发功能`mouseleave`。我将它作为属性应用到表格行元素。它现在**为每个子元素**（所有列等）触发，但它应该只在您将鼠标悬停在表格行上时触发。

这就是我的指令的样子：

```
myapp.directive('enter', function(){
    return {
        restrict: 'A', // link to attribute... default is A
        link: function (scope, element){
            element.bind('mouseenter',function() {
                console.log('MOUSE ENTER: ' + scope.movie.title);
            });
            element.bind('mouseleave',function() {
                console.log('LEAVE');
            });
        }
    }
}); 
```

这是一个例子：http: [//jsfiddle.net/dJGfd/1/](http://jsfiddle.net/dJGfd/1/)

*您必须打开 Javascript 控制台才能查看日志消息。*

在 AngularJS 中实现我想要的功能的最佳方法是什么？如果有合理的 AngularJS 解决方案，我宁愿**不使用 jQuery。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T23:20:08.233

你可以试试这个：

```
myapp.directive('enter', function () {
    return {
        restrict: 'A',
        controller: function ($scope, $timeout) {
            // do we have started timeout
            var timeoutStarted = false;

            // pending value of mouse state
            var pendingMouseState = false;

            $scope.changeMouseState = function (newMouseState) {
                // if pending value equals to new value then do nothing
                if (pendingMouseState == newMouseState) {
                    return;
                }
                // otherwise store new value
                pendingMouseState = newMouseState;
                // and start timeout
                startTimer();
            };

            function startTimer() {     
                // if timeout started then do nothing
                if (timeoutStarted) {
                    return;
                }

                // start timeout 10 ms
                $timeout(function () {
                    // reset value of timeoutStarted flag
                    timeoutStarted = false;
                    // apply new value
                    $scope.mouseOver = pendingMouseState;
                }, 10, true);
            }
        },
        link: function (scope, element) {
            //**********************************************
            //  bind to "mouseenter" and "mouseleave" events
            //**********************************************
            element.bind('mouseover', function (event) {
                scope.changeMouseState(true);
            });

            element.bind('mouseleave', function (event) {
                scope.changeMouseState(false);
            });

            //**********************************************
            //  watch value of "mouseOver" variable
            // or you create bindings in markup
            //**********************************************
            scope.$watch("mouseOver", function (value) {
                console.log(value);
            });
        }
    }
}); 
```

[在http://jsfiddle.net/22WgG/](http://jsfiddle.net/22WgG/)同样的事情

也改为

```
element.bind("mouseenter", ...); 
```

和

```
element.bind("mouseleave", ...); 
```

你可以指定

```
<tr enter ng-mouseenter="changeMouseState(true)" ng-mouseleave="changeMouseState(false)">...</tr> 
```

见[http://jsfiddle.net/hwnW3/](http://jsfiddle.net/hwnW3/)

# javascript - 如何使用数据绑定 Knockout.js 枚举 javascript 对象的属性

> ID：15279637
> 
> 赞同：2
> 
> 时间：2013-03-07T19:06:24.967
> 
> 标签：javascript, jquery, knockout.js

我有下一个模型：

```
var simpleModel = function(){
    var self = this;   
    self.name = "Simple model";
    self.attributes = {  
        attr1: ko.observable("1"),
        attr2: ko.observable("2"),
        attr3: ko.observable("3")
    };
} 
```

我希望能够枚举`attributes`该模型的属性并显示键和值，如下所示：

```
<div>
   <span>attr1</span><span>1</span>
   <span>attr2</span><span>2</span>
   <span>attr3</span><spam>3</span>
</div> 
```

我试图根据javascript在对象上使用时的for循环行为来解决这个问题，但失败了：

```
<div data-bind="foreach: { data: designAttributes, as: 'dAttr' }">
   <span data-bind="text: $index"></span>
   <span data-bind="text: dAttr[$index]"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:22:17.497

自定义绑定：

```
<div data-bind="createSpan">

ko.bindingHandlers.createSpan =
{
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext)
    {
        for(var item in valueAccessor())
        {
            $(element).append('<span data-bind="text:' + valueAccessor()[item] + '"></span>');
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:22:25.777

恐怕 foreach 仅是为数组创建的，因此您需要将对象转换为数组的函数。[jsFiddle](http://jsfiddle.net/wW2TE/2/)

```
window.objToArray = function (obj) {
    var result = [];
    for (var i in obj) {
        result.push({ key: i, value: obj[i]});
    }
    return result;
}; 
```

并在绑定中使用它们：

```
<ul data-bind="foreach: window.objToArray(items)"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:24:57.537

使用计算的 observable 来获取您想要的结构并绑定到该结构。我冒昧地修改了您的 JS 并使 self.attributes 成为可观察的。

这是它的小提琴。

[http://jsfiddle.net/sujesharukil/A846H/](http://jsfiddle.net/sujesharukil/A846H/)

```
var simpleModel = function(){
var name = 'Simple model',
    attributes = ko.observable({
        attr1: ko.observable('1'),
        attr2: ko.observable('2'),
        attr3: ko.observable('3')
    }),
    splitAttributes = ko.computed(function(){
        var splitAttribs = [];
        for(var attr in attributes()){
            splitAttribs.push({
                name: attr,
                val: attributes()[attr]
            });
        }

        return splitAttribs;
    }),
    vm = function(){};

    vm.name = name;
    vm.attributes = splitAttributes;

    return vm;

}

ko.applyBindings(new simpleModel()); 
```

这是它的 HTML 绑定。

```
<div data-bind="foreach: attributes">
    <span data-bind="text: name"></span> = <span data-bind="text: val"></span> <br/>
</div> 
```

希望这就是你要找的。

干杯! 苏杰

# c# - 返回 Stream 的方法是如何实现的？

> ID：15279638
> 
> 赞同：2
> 
> 时间：2013-03-07T19:06:27.393
> 
> 标签：c#, stream, .net

.NET 框架充满了示例，其中方法调用将返回一个 Stream，然后您可以根据需要读取和实现该 Stream。但这是如何在幕后工作的呢？什么支持流？

假设我正在编写一个解析器，它接受一些输入并将一些数据解析为预定义的格式。例如，如果我创建了一个 MemoryStream，然后使用 StreamWriter 将我的内容写入其中，然后让该方法返回流，我会遇到问题，因为编写器将在完成时关闭底层流，而调用者将无法按预期阅读。

这通常是如何管理的？流的内容是否存储在对象中直到需要（如 a `byte[]`），然后当调用请求 Stream 的方法时，它会在那时创建它还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:45:01.460

流是字节序列的抽象，例如文件、输入/输出设备、进程间通信管道或 TCP/IP 套接字。Stream 类及其派生类提供了这些不同类型的输入和输出的通用视图，将程序员与操作系统和底层设备的具体细节隔离开来。[MSDN 说]

所以我想你使用序列化，通过使用流在.NET中使用不同格式的序列化需要定义你的需求

序列化是将对象转换为字节以进行持久存储的过程。反序列化过程将字节转换为对象，而不会丢失任何数据。序列化用于将值存储在文件或数据库中，通过网络发送对象并转换回原始对象格式。.NET Framework 提供了一组框架类库 (FCL)，用于简化序列化过程。它对于在两个不同的应用程序之间发送数据非常有用。

.NET Framework 支持二进制序列化和 XML 序列化格式。XML 序列化只序列化公共字段。但是，二进制序列化将序列化所有私有和公共字段。序列化可以作为基本或自定义执行。当类应用了 SerializableAttribute 属性时，就会发生基本序列化。基本序列化不支持版本控制。自定义序列化类必须标记为 SerializableAttribute 并实现 ISerializable 接口。用户可以为二进制和 XML 序列化格式实现自定义序列化。自定义应用程序需要重写 GetObjectData。示例应用程序对二进制和 XML 序列化都使用自定义序列化。.NET Framework 支持与开发工具相关的设计器序列化。

自定义序列化是控制序列化和反序列化过程的过程。自定义序列化可以通过在序列化期间和之后运行自定义方法或通过实现 ISerializable 接口来实现。自定义序列化用于对序列化对象进行版本控制。如果序列化的对象改变了对象状态（在以后的版本中添加了一个新文件），自定义序列化用于获取值而不丢失数据。由于缺少属性，序列化对象的版本控制可能会失败。

如果用户想在序列化期间和之后使用自定义方法，用户应该使用 OnDeserializedAttribute、OnDeserializingAttribute、OnSerializedAttribute 和 OnSerializingAttribute 属性应用自定义序列化支持，以便在序列化和反序列化期间自定义数据。OptionalFieldAttribute 属性用于忽略旧版本数据以进行反序列化。格式化程序在反序列化期间不会给出任何错误。它允许在序列化/反序列化之前和之后更新对象。

我认为下面的链接可以帮助你
[http://www.codeproject.com/Articles/422474/Serialization-using-different-formats-in-NET](http://www.codeproject.com/Articles/422474/Serialization-using-different-formats-in-NET)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:09:46.377

流可以由许多不同的事物支持。[这就是从Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)抽象基类派生的流的全部想法。

该流可以由操作系统级别的文件流、内存、HTTP 连接或任何其他可以履行`Stream`合同的东西来支持。

在后备存储的情况下，`MemoryStream`只是一块内存。

在 的情况下`StreamWriter`，对其调用 Dispose() 将关闭底层流。只要您仍然想使用流，请确保您不处置 writer。此外，如果您想在写入后重新访问 a `MemoryStream`，请务必将位置设置为开头，例如：

```
memStream.Seek(0, SeekOrigin.Begin); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:10:29.250

StreamWriter 有一个重载的构造函数，您可以使用它来指示写入不要关闭流。

此外，Stream 应该有一个 .WriteBytes 方法，可以让您完全避免使用 StreamWriter。

# android - 在操作栏顶部显示视图

> ID：15279647
> 
> 赞同：40
> 
> 时间：2013-03-07T19:07:03.523
> 
> 标签：android, view, android-actionbar, z-index

有没有办法在操作栏顶部呈现视图？我想创建一个小提示框，将用户指向操作栏中的项目。我知道`Toast`带有 set 视图的 a 将呈现在操作栏上方。有谁知道如何在视图中做到这一点？

我尝试使用`FrameLayout`with`layout_gravity="top"`和膨胀视图，然后将其添加到正在运行的活动的布局中。

我提前感谢你。

**编辑**：这是我在想的图像： ![在此处输入图像描述](../Images/f258fa83021d5d2c0ec93aedb4a9f952.png)

**编辑**：也许需要更多细节。我正在寻找一种方法，或者找出是否可以将视图添加到活动的视图层次结构中，以便最后呈现。

与 CSS 类似，我希望此特定视图（图像中的蓝色浮动框）具有更高的 z-index 顺序，以便将其呈现在活动中的操作栏区域的顶部。视图与操作栏没有任何关联，它只是简单地绘制在它上面。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-10-04T00:45:34.953

我试图实现其他目标，但我需要与此类似的解决方案。我需要绘制一个覆盖整个屏幕的不透明层，甚至是操作栏——有点像对话框。我是这样做的：

```
ViewGroup vg = (ViewGroup)(getWindow().getDecorView().getRootView());
vg.addView(myNewView, params); 
```

这可用于在屏幕上的任何位置绘制任何内容。

更新：你真的不应该再使用 ActionBar 了，如果你像 Android 推荐的那样使用 Toolbar，你一开始就不会遇到这个问题。工具栏会像常规视图一样进入您的活动 xml，您可以对其进行任何操作。并且它完全向后兼容。 [https://developer.android.com/training/appbar/setting-up](https://developer.android.com/training/appbar/setting-up)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-05T16:36:36.187

在自己挣扎了一段时间之后，这是解决方案（经过测试 - 工作良好）：

一般步骤是：

1.  创建包装视图
2.  分离屏幕视图子项，放置包装器，并附加子项
3.  向孩子们夸大内容
4.  控制包装器将帮助您完全控制操作栏及其下方的内容。
5.  现在，使用包装器，您可以将“兄弟”添加到操作栏/主区域。那位兄弟正是你在图片中所描述的。

让我们看一些代码。

首先，创建一个方法来帮助创建包装视图。包装器将放置在整个屏幕和应用内容之间。作为一个[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)，您以后可以完全控制它的内容。

```
private ViewGroup setContentViewWithWrapper(int resContent) {
        ViewGroup decorView = (ViewGroup) this.getWindow().getDecorView();
        ViewGroup decorChild = (ViewGroup) decorView.getChildAt(0);

        // Removing decorChild, we'll add it back soon
        decorView.removeAllViews();

        ViewGroup wrapperView = new FrameLayout(this);

        // You should set some ID, if you'll want to reference this wrapper in that manner later
        //
        // The ID, such as "R.id.ACTIVITY_LAYOUT_WRAPPER" can be set at a resource file, such as:
        //  <resources xmlns:android="http://schemas.android.com/apk/res/android">
        //      <item type="id" name="ACTIVITY_LAYOUT_WRAPPER"/>
        //  </resources>
        //
        wrapperView.setId(R.id.ACTIVITY_LAYOUT_WRAPPER);

        // Now we are rebuilding the DecorView, but this time we 
        // have our wrapper view to stand between the real content and the decor
        decorView.addView(wrapperView, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        wrapperView.addView(decorChild, decorChild.getLayoutParams());
        LayoutInflater.from(this).inflate(getActivityLayout(), 
                    (ViewGroup)((LinearLayout)wrapperView.getChildAt(0)).getChildAt(1), true);

        return wrapperView;
    } 
```

现在，干扰常规[Activity](http://developer.android.com/reference/android/app/Activity.html)创建，而不是使用[setContentView](http://developer.android.com/reference/android/app/Activity.html#setContentView%28int%29)，使用我们创建的方法。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // DON'T CALL `setContentView`, 
    // we are replacing that line with this code:
    ViewGroup wrapperView = setContentViewWithWrapper(R.layout.activity_layout);

    // Now, because the wrapper view contains the entire screen (including the notification bar
    // which is above the ActionBar) I think you'll find it useful to know the exact Y where the 
    // action bar is located.
    // You can use something like that:
    ViewGroup actionBar = (ViewGroup)((LinearLayout)wrapperView.getChildAt(0)).getChildAt(0);
    int topOffset = actionBar.getTop();

    // Now, if you'll want to add a view:
    //  1\. Create new view
    //  2\. Set padding top - use "topOffset"
    //  3\. Add the view to "wrapperView"
    //  4\. The view should be set at front. if not - try calling to "bringToFront()"
} 
```

就是这样。

笔记

*   我使用[Android 的层次结构查看器](http://developer.android.com/tools/help/hierarchy-viewer.html)来了解什么是正确的层次结构。（没有猜到那些`0`和`1`索引）
*   如果您在活动中使用某种菜单抽屉，您可能需要对其进行一些不同的配置，因为抽屉已经为您创建了该包装器
*   [通过查看这个很棒的图书馆](https://github.com/SimonVT/android-menudrawer)，我学到了很多东西

**编辑：**请参阅@CristopherOyarzúnAltamirano 答案以获得对较新 Android 版本的进一步支持

祝你好运！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-28T18:09:37.537

有一种更简单的方法可以实现这一点。ActionBar 将其布局保存在类 ActionBarContainer 中，该类仅继承自 FrameLayout。因此，为了在 ActionBar 上显示某些内容，您需要获取对 ActionBarContainer 的引用并将您自己的自定义 View 添加到其中。这是代码

```
 int abContainerViewID = getResources().getIdentifier("action_bar_container", "id", "android");     
    FrameLayout actionBarContainer = (FrameLayout)findViewById(abContainerViewID);      
    LayoutInflater myinflater = getLayoutInflater();        
    View customView = myinflater.inflate(R.layout.yourCustomeViewLayout, null);
    actionBarContainer.addView(customView); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-09T20:14:03.380

我根据@Sean 的回答找到了这个解决方法：

```
 //This is for Jelly, ICS, Honeycomb
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB && Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR2){
            LayoutInflater.from(this).inflate(resContent, (ViewGroup)((LinearLayout)wrapperView.getChildAt(0)).getChildAt(1), true);}
        //This is for KitKat and Jelly 4.3
        else if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2){
            LayoutInflater.from(this).inflate(resContent, (ViewGroup) (((ViewGroup) wrapperView.getChildAt(0)).getChildAt(0)), true);}
        //This is for Ginger
        else{
            LayoutInflater.from(this).inflate(resContent, (ViewGroup) ((LinearLayout)((FrameLayout) wrapperView.getChildAt(0)).getChildAt(0)).getChildAt(1), true);} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-01-03T15:50:50.123

我找到了一种更简单的方法来做到这一点。我刚刚将***android:translationZ="10dp"***应用于需要覆盖操作栏的视图。

*我选择了 10dp，但它实际上可以是任何你想要的，只要它优于操作栏的高度*

```
<ImageView
      android:layout_width="100dp"
      android:layout_height="100dp"
      android:translationZ="10dp"
      android:src="@drawable/potatoe" /> 
```

另外，不要担心 Android Studio 的以下警告：

“translationZ 不能与 API<21 一起使用”。

它将被忽略，但您并不在意，因为工具栏不应使用低于 21 的 API 覆盖您的视图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-07T19:35:09.913

尝试使用 ActionBar.setCustomView()。这是更改屏幕该区域外观的唯一方法。您不能将 View 粘贴到 ActionBar“上方”的区域中，因为该区域基本上由系统控制。另一方面，您*可以*为其提供自己的布局。

如果您更详细地解释您正在尝试做什么，受访者可能会有一些更好的设计理念。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-29T03:15:12.820

[https://github.com/michaelye/EasyDialogDemo](https://github.com/michaelye/EasyDialogDemo)

看上面的demo，可能对你有帮助

```
dialog.setLocation(new location[])//point in screen 
```

您可以自己设置位置[]。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-07T19:16:55.210

`android:actionLayout`在 menu.xml 文件中使用。

```
<?xml version="1.0" encoding="utf-8"?><menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_id"
      android:title="@string/menu_string_to_show"
      android:icon="@drawable/ic_menu_icon_name"
      android:showAsAction="always"
      android:actionLayout="@layout/action_button_foo" /></menu> 
```

然后创建你的 action_button_foo.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?><TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:text="@string/menu_string_to_show"
android:drawableLeft="@drawable/ic_menu_icon_name"
android:background="@drawable/bg_btn_action_bar"
android:clickable="true" /> 
```

要处理点击，请执行以下操作：

```
@Overridepublic boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.my_menu, menu);

final MenuItem item = menu.findItem(R.id.menu_id);
item.getActionView().setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        onOptionsItemSelected(item);
    }
});

return super.onCreateOptionsMenu(menu);} 
```

那是如果:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-07T20:09:43.260

（参考：[http](http://www.vogella.com/articles/AndroidActionBar/article.html) ://www.vogella.com/articles/AndroidActionBar/article.html ）
**中的自定义视图`ActionBar`**
您还可以在`ActionBar`. 为此，您使用类的`setCustomView`方法`ActionView`。您还必须`setDisplayOptions()`通过传入`ActionBar.DISPLAY_SHOW_CUSTOM`标志的方法启用自定义视图的显示。

例如，您可以定义一个包含`EditText`元素的布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/searchfield"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:inputType="textFilter" > 
```

可以`ActionBar`通过以下代码将此布局分配给 。示例代码允许将侦听器附加到自定义视图。

```
package com.vogella.android.actionbar.customviews;

import android.app.ActionBar;
import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

ActionBar actionBar = getActionBar();
// add the custom view to the action bar
actionBar.setCustomView(R.layout.actionbar_view);
EditText search = (EditText) actionBar.getCustomView().findViewById(R.id.searchfield);
search.setOnEditorActionListener(new OnEditorActionListener() {

  @Override
  public boolean onEditorAction(TextView v, int actionId,
      KeyEvent event) {
    Toast.makeText(MainActivity.this, "Search triggered",
        Toast.LENGTH_LONG).show();
    return false;
  }
});
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM
    | ActionBar.DISPLAY_SHOW_HOME);
}
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-10T17:31:09.240

这里的解释太长了：

将主布局文件包装到顶级 ViewGroup 中（例如，将 CoordinatorLayout 包装到 FrameLayout 中），然后在新的顶级布局中注入或声明视图。该视图将出现在操作栏上方。

# java - JTextField，JComboBox的Java JFrame水平调整大小

> ID：15279648
> 
> 赞同：0
> 
> 时间：2013-03-07T19:07:05.840
> 
> 标签：java, swing, layout, jframe, layout-manager

当我调整窗口大小时，按钮保持相同大小。更改 JFrame 窗口大小时如何进行水平调整大小？

如果用户增加或减少窗口区域，我希望 userTextArea 和 typeList 的水平大小可以扩展和收缩。

```
public ClearQuestWindow(String title){

protected JTextField userTextArea;

protected JLabel userLabel;
protected JLabel typeLabel;

protected JComboBox typeList;

    super(title);
    setLayout(null);
    setMinimumSize(new Dimension(790, 625));

    // Set to system look and feel
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } 
    catch(Exception e) {
        System.out.println("Error setting native LAF: " + e);
    }

    //Text field instantiation
    userTextArea = new JTextField();

   //Labels instantiation
    userLabel = new JLabel("User Name:");
    typeLabel = new JLabel("Type:");

    //ComboBox instantiation
    typeList = new JComboBox(typeString);

    userLabel.setSize(100, 30);
    userLabel.setLocation(10, 80 );
    userLabel.setFont(new Font("Times New Roman", Font.PLAIN, 18));

    userTextArea.setLocation(100, 85);
    userTextArea.setSize(150, 23);

    typeLabel.setSize(100, 30);
    typeLabel.setLocation(10, 110 );
    typeLabel.setForeground(Color.red);
    typeLabel.setFont(new Font("Times New Roman", Font.PLAIN, 18));

    typeList.setLocation(100, 115);
    typeList.setSize(150, 23); 
```

}

![在此处输入图像描述](../Images/7a3cdd22d3815bd70ef1d22c3cb75881.png)

![在此处输入图像描述](../Images/df9a41c9354ae54ebb20f2b03fbef69c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-08T09:54:37.550

`GridBagLayout`是一个灵活的布局管理器，应该适合您的目的：

```
mainFrame.setLayout(new GridBagLayout());
GridBagConstraints c = new GridBagConstraints();
c.fill = GridBagConstraints.HORIZONTAL;
mainFrame.add(label, c); 
```

`Fill`当组件的显示区域大于组件请求的大小时使用，以确定是否以及如何调整组件的大小。有效值（定义为`GridBagConstraints`常量）包括`NONE`（默认），`HORIZONTAL`（使组件足够宽以水平填充其显示区域，但不改变其高度），`VERTICAL`（使组件足够高以垂直填充其显示区域，但不要改变它的宽度）和`BOTH`（使组件完全填满它的显示区域）。

[有关 GridBagLayout 的更多信息，请单击此链接](https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

# json - 控制 KeyValuePair 的序列化格式 的钥匙

> ID：15279655
> 
> 赞同：3
> 
> 时间：2013-03-07T19:07:17.207
> 
> 标签：json, json.net, asp.net-web-api

我正在尝试获取[Newtonsoft JSON Library](http://james.newtonking.com/projects/json-net.aspx)，与 .NET 4.5 中的 WebAPI 捆绑在一起，以正确序列化以下类：

```
public class SomeClass {
    [Required]
    public DateTime DateToBeSerialized { get; set; }

    [Required]
    public Dictionary<DateTime, long> DatesDict { get; set; }
} 
```

序列化后输出如下JSON：

```
"DateToBeSerialized": "2013-03-07T19:03:22.5432182Z",
"DatesDict": {
    "12/01/2012 00:00:00": 593,
    "01/01/2013 00:00:00": 691,
    "02/01/2013 00:00:00": 174,
    "03/01/2013 00:00:00": 467
} 
```

如您所见，当对象为*type*时，序列化程序会遵循my的*格式*，但在序列化 a 的键部分时却没有这样做。`DateTime` *`DateTime``KeyValuePair<DateTime, long>`*

 *换句话说，我希望序列化程序输出：

```
"DateToBeSerialized": "2013-03-07T19:03:22.5432182Z",
"DatesDict": {
    "2012-12-01T00:00:00.0000000Z": 593,
    "2013-01-01T00:00:00.0000000Z": 691,
    "2013-02-01T00:00:00.0000000Z": 174,
    "2013-03-01T00:00:00.0000000Z": 467
} 
```

我希望社区可以提供有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T05:06:15.720

这已在 JSON.Net [5.0 第 1 版](http://json.codeplex.com/releases/view/104679)（2013 年 4 月 7 日）中得到纠正。如果您更新到[最新版本](http://json.codeplex.com/)，您应该已准备就绪。

这是我用来验证的测试代码：

```
SomeClass sc = new SomeClass();
sc.DateToBeSerialized = new DateTime(2013, 3, 7, 19, 3, 22, 543, DateTimeKind.Utc);
sc.DatesDict = new Dictionary<DateTime, long>();
sc.DatesDict.Add(new DateTime(2012, 12, 1, 0, 0, 0, 1, DateTimeKind.Utc), 593);
sc.DatesDict.Add(new DateTime(2013, 1, 1, 0, 0, 0, 2, DateTimeKind.Utc), 691);
sc.DatesDict.Add(new DateTime(2013, 2, 1, 0, 0, 0, 3, DateTimeKind.Utc), 174);
sc.DatesDict.Add(new DateTime(2013, 3, 1, 0, 0, 0, 4, DateTimeKind.Utc), 467);

string json = JsonConvert.SerializeObject(sc, Formatting.Indented);
Console.WriteLine(json); 
```

输出：

```
{
  "DateToBeSerialized": "2013-03-07T19:03:22.543Z",
  "DatesDict": {
    "2012-12-01T00:00:00.001Z": 593,
    "2013-01-01T00:00:00.002Z": 691,
    "2013-02-01T00:00:00.003Z": 174,
    "2013-03-01T00:00:00.004Z": 467
  }
} 
```*

# bash - Bash脚本，将二进制数从obase解析为字符串？

> ID：15279661
> 
> 赞同：1
> 
> 时间：2013-03-07T19:07:27.643
> 
> 标签：bash, awk, subnet, bc

我正在编写一个执行子网计算的脚本。到目前为止，它看起来像这样（部分）：

```
echo "Subnet Address  : "$sn1.$sn2.$sn3.$sn4
echo "BCast Address   : "$br1.$br2.$br3.$br4
echo -e "\nSubnet address in binary" :
echo "obase=2;$ip1"+"obase=2;$ip2"+"obase=2;$ip3"+"obase=2;$ip4" \
  | bc | awk '{printf("%08d",$ip1)}'
echo -e "\nBroadcast address in binary" :
echo "obase=2;$br1"+"obase=2;$br2"+"obase=2;$br3"+"obase=2;$br4" \
  | bc | awk '{printf("%08d",$br1)}' 
```

这给了我这个输出：

```
Subnet address in binary :
11000010101010100000001100000000
Broadcast address in binary :
11000010101010100000001100011111 
```

1.  我尝试将八位字节分开`'{printf("%08d.",$br1)}'`，`'{printf(".%08d",$br1)}'`但在开头或结尾我得到了一个额外的点。
2.  我想计算网络掩码有多少个 ace，但我真的找不到将输出`echo "obase=2;$br1"+"obase=2;$br2"+"obase=2;$br3"+"obase=2;$br4"| bc | awk`转换为字符串的方法，所以我可以计算它们。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:16:54.680

因此，您希望输出格式为：01111111.00000000.00000000.00000001？

好吧，当我撞到这个时，我使用的作弊方法是环绕 ipcalc：

```
%ipcalc 127.0.0.1
Address:   127.0.0.1            01111111.00000000.00000000\. 00000001
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111\. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000\. 11111111
=>
Network:   127.0.0.0/24         01111111.00000000.00000000\. 00000000
HostMin:   127.0.0.1            01111111.00000000.00000000\. 00000001
HostMax:   127.0.0.254          01111111.00000000.00000000\. 11111110
Broadcast: 127.0.0.255          01111111.00000000.00000000\. 11111111
Hosts/Net: 254                   Class A, Loopback 
```

然后提取我需要的东西。运行速度比通过“bc”多次解析快得多。即，如果您不需要，重新发明轮子是没有意义的。

如果您确实想重新发明轮子：

```
$ echo "obase=2;200" + "obase=2;150" + "obase=2;200" + "obase=2;150" | \
   bc | awk '{printf "%08d\." ,$1}' | \
   sed -e 's/[.]*$//'
11001010.10011000.11001010.10010110 
```

这将为您提供所需的 8 位二进制输出格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:51:47.767

为了分离我将使用的八位字节`printf`，`paste`例如：

```
ip1=127; ip2=0; ip3=0; ip4=1
printf "%08d\n" $(bc <<<"obase=2; $ip1; $ip2; $ip3; $ip4") | paste -sd. 
```

或者如果 ip 在一个变量中：

```
ip=127.0.0.1
printf "%08d\n" $(bc <<<"obase=2; ${ip//./;}") | paste -sd. 
```

输出：

```
00001010.00101010.01100110.11111100 
```

要计算网络掩码中 1 的数量，只需添加它们：

```
netmask=255.255.255.252
printf "%08d" $(bc <<<"obase=2; ${netmask//./;}") | grep -o . | paste -sd+ | bc 
```

输出：

```
30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:40:06.420

两个快速解决方案：

```
$ echo $br1.$br2.$br3.$br4 |  
    perl -F\\\. -anE 'say join ".", map { sprintf "%08b", $_ } @F'
$ perl -e 'printf( "%08b.%08b.%08b.%08b\n", '$br1,$br2,$br3,$br4')' 
```

# ruby-on-rails - 搜索 URL 不包括“/搜索” - 未正确重定向

> ID：15279663
> 
> 赞同：1
> 
> 时间：2013-03-07T19:07:43.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个部分工作的搜索栏。但是，似乎从我的主页它不会重定向到我的`products#index`页面。当我搜索产品时，我得到以下网址：`http://localhost:3000/?utf8=%E2%9C%93&search=intel`但是，如果我将网址更改为如下所示：`http://localhost:3000/search?utf8=%E2%9C%93&search=intel`这将起作用。我的设置如下：

**搜索控制器**

```
class SearchController < ApplicationController
  def index
    @products = Product.all(:conditions => ['title LIKE ?', "%#{params[:search]}%"])
  end
end 
```

**ProductsController.rb**

```
def index
    @products = Product.filter(params[:search], [:title])

    respond_to do |format|
      format.html
      format.json { render json: @products }
    end
  end 
```

**应用程序.html.erb**

```
 <%= form_tag search_path, :class => 'navbar-form to-the-right', :method => 'get' do %>
            <%= text_field_tag :search, params[:search], :class => 'span2', :placeholder => 'Search' %>
        <% end %>
      </form> 
```

**路由.rb**

```
 match '/search' => 'search#index' 
```

我似乎无法确定为什么这不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:29:35.977

您的路线不提供 helper `search_path`。要启用它，请执行以下操作：

```
match '/search' => 'search#index', as: :search 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:37:52.513

根据你的帖子我试试这个：

```
class ProductsController < ApplicationController

  def index
   @products = Product.filter(params[:title])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end 
```

产品.rb

```
 def self.filter (search_title)
  return scoped unless search_title.present?
    where(['title LIKE ?', "%#{search_title}%"])
 end 
```

路由.rb

```
match '/search' => 'products#index' 
```

应用程序.html

```
<%= form_tag search_path, :class => 'navbar-form to-the-right', :method => 'get' do %>
 <%= text_field_tag :title, params[:title], :class => 'span2', :placeholder => 'Search' %>
<% end %> 
```

# php - 多次循环中的最高值数

> ID：15279668
> 
> 赞同：0
> 
> 时间：2013-03-07T19:08:09.717
> 
> 标签：php, mysql, sql

我有一个 INSERT 循环，我需要向它添加一个参考号。我需要循环中的所有参考编号都相同。我知道使用 MAX() 我可以选择表中的最大数字。但是如果我循环它只会随着每个循环而增加，而我需要它保持不变。

有没有办法在查询本身中做到这一点？还是将其保存在循环外的变量中的唯一方法？

示例代码：

```
 for($i=2;$i<=$row_count;$i++){ // Loops 3 times (example)
    $part = $vehicle.'_part'.$i;
    $description = $vehicle.'_description'.$i;
    $imageName = $vehicle.'_image'.$i;
    $parts[] = array(
        'part' => $_SESSION[$part],
        'image' => $_SESSION[$part],
        'description' => $_SESSION[$description]);
    }

    foreach($parts as $onePart){    
            $queries[] = "INSERT INTO searches_tbl (ref_nr, vozila_id, korisnici_id, part, description, image)
                        VALUES (???, (SELECT id FROM vozila_tbl ORDER BY id DESC LIMIT 1), 
                            (SELECT id FROM korisnici_tbl WHERE email = '".$email_address."' ORDER BY id DESC LIMIT 1), '".$onePart['part']."', '".$onePart['description']."', '".$onePart['image']."')";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T09:10:35.753

您可以创建一个新表，即`searches_ref`仅使用一个 AUTO_INCREMENT 主键列。

> 创建表`searches_ref`（`id`INT NOT NULL AUTO_INCREMENT PRIMARY KEY）；

然后，您将在循环之前插入一个新行`searches_ref`，并获得一个可以在循环中使用的新 id。

这样，您就不应该遇到并发问题（您可能会使用`MAX()`）

# xquery - XQuery——根据标签的一部分搜索完整的标签

> ID：15279677
> 
> 赞同：-2
> 
> 时间：2013-03-07T19:08:42.033
> 
> 标签：xquery

我在处理 XQuery 中的任务时遇到了一些问题，准确地说是 FLWOR。在一个文件中，我处理全名标签，例如

```
<name>Neil Guyman</name> 

but another xml file deals with

<firstname>Neil</firstname>

<secondname>Guyman</secondname> 
```

无论如何，这需要任何解析行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:16:33.510

理想情况下，您可以迭代这些名称元素的父元素。如果不是，它就不那么漂亮了，但您可以迭代前两个并加入该案例的两个元素：

```
for $n in //(name | firstname)
return
  typeswitch($n)
    case element(name) return $n/string()
    case element(firstname) return string-join(($n, $n/following-sibling::secondname),' ')
    default **maybe throw an error?** 
```

# python - Python 作业 - 创建一个新列表

> ID：15279678
> 
> 赞同：2
> 
> 时间：2013-03-07T19:08:43.543
> 
> 标签：python, list

那作业：

> 编写一个名为的函数，该函数`splitList(myList, option)`将一个列表和一个选项作为输入，该选项为 0 或 1。如果选项的值为 0，则该函数返回一个列表，该列表由 myList 中为负的元素组成，如果该选项的值为 1，该函数返回一个列表，该列表由 myList 中的偶数元素组成。

我知道如何确定一个数字是否为偶数以及一个数字是否为负。我正在努力解决如何根据“选项”返回一个新的负数或偶数列表

这是我到目前为止所得到的：

```
def splitList(myList):
    newlist = []
    for i in range(len(myList)):
        if (myList[i]%2 == 0):
           newlist.append(myList [i])
    return newlist 
```

该程序给出以下错误：

```
Traceback (most recent call last): File "<string>", line 1, in <fragment> 
builtins.TypeError: splitList() takes exactly 1 positional argument (4 given) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:16:25.883

正如我在评论中提到的，您应该标准化缩进：四个空格是 Python 标准。您通常可以将编辑器设置为插入四个空格而不是制表符（也不想将制表符与空格混合）。

至于您的实际问题：尝试编写三个总函数：一个返回所有负值，一个返回偶数值，另一个调用基于`option`.

```
def splitlist(myList, option):
    if option == 1:
        return get_even_elements(myList)
    elif option == 0:
        return get_negative_elements(myList)

def get_even_elements(myList):
    pass # Implementation this method here.

def get_negative_elements(myList):
    pass # Implementation this method here.

# Test it out!
alist = [-1, 2, -8, 5]
print splitlist(alist, 0)
print splitlist(alist, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:16:51.890

亨利凯特的评论是正确的。只需在前面添加一个空格`newlist.append(myList [i])`，它就可以正常工作。

或者，如果您的老师允许您，您可以使用制表符而不是空格来完全避免这个问题（只要确保您不在同一个文件中使用两者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:29:22.113

我之前的回答是错误的，我真的应该在我开口之前测试一下...... 呵呵！！！活到老，学到老...

**编辑**

您的回溯正在给您答案。它将列表作为 args 列表读取。不确定是否有一种超级pythonic方式来解决它，但您可以使用命名参数：

```
splitList(myList=yourList) 
```

或者

```
splitList(myList=(1,2,3)) 
```

或者

```
splitList(myList=[1,2,3]) 
```

但你的问题真的很可能

```
splitList(1,2,3,4)  # This is not a list as an argument, it is a list literal as your 'args' list 
```

可以通过以下方式解决：

```
splitList([1,2,3,4]) 
```

或者

```
splitList((1,2,3,4)) 
```

这是你得到的回溯吗？

```
Traceback (most recent call last):
  File "pyTest.py", line 10, in <module>
    print splitList(aList,1)
TypeError: splitList() takes exactly 1 argument (2 given) 
```

该错误很可能会告诉您问题，这将是该方法仅接受一个参数，但我尝试传入两个参数，例如您的需求状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:27:16.510

```
def splitList(myList, option):
    return [i for i in myList if i<0] if option==0 else [i for i in myList if i>0]

# test
>>> myList=[2, 3, -1, 4, -7]
>>> splitList(myList, 0)
[-1, -7]
>>> splitList(myList, 1)
[2, 3, 4]
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T19:30:03.887

我按原样尝试了你的代码，当我传入一个正整数列表时我没有收到任何错误，所以我不知道你的程序为什么“崩溃”，所以我怀疑有其他东西干扰了你的调试。（尽管正如其他人所说，您确实应该在每个缩进级别使用相同数量的空格。）

这是我输入的内容：

```
def splitList(myList):
    newlist = []
    for i in range(len(myList)):
        if (myList[i]%2 == 0):
           newlist.append(myList [i])  # Only 3-space indent here
    return newlist

print splitList([1, 2, 3, 4, 5]) 
```

当我运行它时：

```
[2, 4] 
```

你能展示你如何调用该方法和确切的错误消息吗？

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2013-03-07T19:13:18.157

**编辑**

你能在调用 splitList 方法的地方显示代码吗？

**这是不正确的**

```
myList [i] 
```

是你的问题，你不能在那里有空间。python对语法非常非常非常严格

由于人们似乎认为他们应该对我投反对票，让我解释一下：

通过拥有该空间，您实际上说的是 myList（它是一个列表）和 [i]，它是一个列表文字，其值为 'i' 在索引 0....

因此，您将两个变量（一个实际变量和一个文字）传递给 append 方法，而不是用逗号分隔，这将不起作用。

# c# - 数据绑定到列表框项模板不起作用

> ID：15279679
> 
> 赞同：0
> 
> 时间：2013-03-07T19:08:43.950
> 
> 标签：c#, wpf, templates, data-binding, listbox

我有以下代码。它构建并运行，但不填充列表框。有人能发现错误吗？

```
 <Grid>
        <ListBox ItemsSource="{Binding Path=questions}" Height="401" HorizontalAlignment="Left" Name="results" VerticalAlignment="Top" Width="260" Margin="0,20,0,0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <StackPanel Orientation="Vertical">
                                    <TextBlock Text="{Binding Path=question.votes}" FontSize="15" Padding="5" Background="White" Foreground="Black"/>
                                <TextBlock Text="{Binding Path=question.answers}" FontSize="15" Padding="5" Background="White" Foreground="Black"/>
                                </StackPanel>
                                <StackPanel Orientation="Vertical" Height="Auto" Width="249">
                                <TextBlock Text="{Binding Path=question.title}" FontWeight="Bold" Background="#FF92F2CD" Height="22" Width="229" Foreground="Black"/>
                                <TextBlock Text="{Binding Path=question.body}" TextWrapping="Wrap" Height="43" Width="231" Background="#FFEFEFEF" Foreground="Black"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel>
                            <TextBlock Text="{Binding Path=question.tags}" Foreground="#FFFF9C00" Background="#FF4E3D3D" FontWeight="Bold" TextAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>       
        </ListBox>
        <Button Content="Refresh" Height="22" HorizontalAlignment="Left" Name="button1" VerticalAlignment="Top" Width="54" />
    </Grid>

public class question 
{
    public string votes     { get; set; }
    public string answers   { get; set; }
    public string title     { get; set; }
    public string body      { get; set; }
    public string tags      { get; set; }

}

public partial class MainWindow : Window
{

    ObservableCollection<question> questions = new ObservableCollection<question>();

    public MainWindow() 
    {
        questions.Add(new question
        {
            votes = "2",
            answers = "3",
        title = "This is a sample title",
        body = "This is a sample body text. It should wrap and not look like shit when presented.",
        tags = "C#,WPF,XML,JediStyle"

    });
    this.DataContext = this;

    InitializeComponent();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:14:40.870

绑定不适用于字段，但适用于属性。

```
ObservableCollection<question> questions = new ObservableCollection<question>();

ObservableCollection<question> MyQuestions
{
    get { return questions; }
} 
```

在 XAML 中

```
ItemsSource="{Binding Path=MyQuestions}" 
```

您也不必`question`为特定列表项中的每个绑定指定路径的一部分：

`Text="{Binding Path=question.tags}"`应该`Text="{Binding Path=tags}"`甚至更简单：`Text="{Binding tags}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:13:08.273

```
 <ListBox ItemsSource="{Binding Path=questions}" Height="401" HorizontalAlignment="Left" Name="results" VerticalAlignment="Top" Width="260" Margin="0,20,0,0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal">
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="{Binding Path=votes}" FontSize="15" Padding="5" Background="White" Foreground="Black"/>
                            <TextBlock Text="{Binding Path=answers}" FontSize="15" Padding="5" Background="White" Foreground="Black"/>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Height="Auto" Width="249">
                            <TextBlock Text="{Binding Path=title}" FontWeight="Bold" Background="#FF92F2CD" Height="22" Width="229" Foreground="Black"/>
                            <TextBlock Text="{Binding Path=body}" TextWrapping="Wrap" Height="43" Width="231" Background="#FFEFEFEF" Foreground="Black"/>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel>
                        <TextBlock Text="{Binding Path=tags}" //am not sure from where this tags coming
Foreground="#FFFF9C00" Background="#FF4E3D3D" FontWeight="Bold" TextAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>       
    </ListBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:56:40.840

我会尝试使用 ViewModel ...

[好文章](http://msdn.microsoft.com/en-us/library/gg405484%28v=PandP.40%29.aspx)

[另一篇好文章](http://www.codeproject.com/Articles/81484/A-Practical-Quick-start-Tutorial-on-MVVM-in-WPF)

这两篇文章重点介绍了完全绑定的好处，并进入了 NotifyPropertyChanged 和命令。值得一读。

# c++ - __next_prime 符号未定义

> ID：15279681
> 
> 赞同：5
> 
> 时间：2013-03-07T19:09:00.380
> 
> 标签：c++, ios, xcode, std

我在 iOS 的 XCode 项目中包含 unordered_map。最初，当我尝试链接时，我遇到了新操作和删除操作的错误，但是当我将“-lstdc++”添加到“其他链接器标志”时，这些错误消失了，但我留下了以下缺失的符号。

```
"std::__1::__next_prime(unsigned long)", referenced from: 
```

我尝试了 C++ 标准语言/方言的不同组合，但不能让它消失。

知道什么图书馆包含这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T19:16:55.890

此函数是 LLVM 中的私有方法`libc++`：[http](http://www.opensource.apple.com/source/libcpp/libcpp-31/src/hash.cpp?txt) ://www.opensource.apple.com/source/libcpp/libcpp-31/src/hash.cpp?txt 。因此，您需要将**C++ 标准库**更改为**libc++（支持 C++11 的 LLVM C++ 标准库）**，或者将链接器标志更改为`-lc++`.

# javascript - 重构 JSON

> ID：15279685
> 
> 赞同：4
> 
> 时间：2013-03-07T19:09:13.653
> 
> 标签：javascript, jquery, json

我现在有来自服务器的 JSON 响应，但我想根据日期对其进行重组。例如，我现在有

```
{
"items":
    [
        {
            "A": [
                {
                    "name": "a",
                    "date": "2/10/2010",
                    "sales": "100"
                },
                {
                    "name": "b",
                    "date": "6/10/2010",
                    "sales": "400"
                }
            ],
            "B": [
                {
                    "name": "c",
                    "date": "2/10/2010",
                    "sales": "1000"
                },
                {
                    "name": "d",
                    "date": "6/10/2010",
                    "sales": "400"
                }
            ]
        },
        {
            "C": [
                {
                    "name": "a",
                    "date": "10/10/2010",
                    "sales": "100"
                },
                {
                    "name": "b",
                    "date": "6/10/2010",
                    "sales": "100"
                }
            ],
            "D": [
                {
                    "name": "c",
                    "date": "2/10/2010",
                    "sales": "300"
                },
                {
                    "name": "c",
                    "date": "2/10/2010",
                    "sales": "1100"
                }
            ]
        }
    ]
} 
```

但现在我想按日期重组，对于特定的一天需要知道所有的销售情况，

```
 {
    "date1" : [sales, sales, sales],
    "date2" : [sales, sales],
    "date3" : [sales]
    } 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:15:32.493

我只能假设你想要这个：

```
var arr = JSON.parse(response); // or something like that (assuming valid JSON)
                                // or just assign the array literal

var result = {};
for (var i=0; i<arr.length; i++) {
    var date = arr[i].date,
        sales = arr[i].sales;
    if (date in result)
        result[date].push(sales);
    else
        result[date] = [sales];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:42:45.870

假设你得到了你的 JSON：

```
<?php
$list = array(
    array(
        'product'   => 'a',
        'date'      => '2012-08-01',
        'sales'     => 500,
    ),
    array(
        'product'   => 'b',
        'date'      => '2012-08-02',
        'sales'     => 600,
    ),
    array(
        'product'   => 'c',
        'date'      => '2012-08-01',
        'sales'     => 250,
    ),
    array(
        'product'   => 'd',
        'date'      => '2012-08-02',
        'sales'     => 800,
    ),
);

echo json_encode($list);
?>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
var JSON = '<?php echo json_encode($list); ?>';
var pJson = jQuery.parseJSON(JSON);

var cArray = new Array();

for each ( i in pJson ) {
         if ( typeof cArray[i.date] == 'undefined' ) {
                cArray[i.date] = Array();
         }
        cArray[i.date].push(i.sales);
}
</script> 
```

我添加了 php 部分以显示 JSON 字符串的外观。此解决方案还需要 jQuery。

# java - 适用于 Android 的 Phonegap 应用程序：在 div 中显示 Admob 广告

> ID：15279693
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:09:48.350
> 
> 标签：java, javascript, android, cordova, mobile

我正在尝试使用 Phonegap 在我的 Android 移动应用程序中通过 Admob 实现广告。我已经使用 HTML+Javascrip/Jquery 编写了整个代码，现在我正在使用 Phonegap 构建本机应用程序。

我可以使用以下代码通过 Admob 看到广告：

```
public class ModernSnake extends DroidGap {
    /** Called when the activity is first created. */
    private static final String AdMob_Ad_Unit = "a151376a873f810";
    private AdView adView;
    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        super.setIntegerProperty("splashscreen", R.drawable.splash);
        super.loadUrl("file:///android_asset/www/index.html", 10000);
        adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
        LinearLayout layout = super.root;
        layout.addView(adView); 
        AdRequest request = new AdRequest();
    request.setTesting(true);
    adView.loadAd(request);

} 
```

但问题是横幅始终位于页面底部。

那么是否可以通过 Javascript 调用 adView 函数并将其显示在我之前创建的 div 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:17:51.133

使用 JavascriptInterface 解决了这个问题，并在 Java 中调用了一个隐藏/显示广告布局的函数。

# postgresql - 如何在学说查询中获取数组长度？

> ID：15279696
> 
> 赞同：1
> 
> 时间：2013-03-07T19:10:00.177
> 
> 标签：postgresql, symfony, doctrine-orm, dql

我想知道如何在学说查询中获取数组的长度？我使用具有数组类型和许多函数来处理数组的postgresql，但我没有在教义中找到任何等效的东西，例如我使用：

```
SELECT a, abs(array_length(a.ssc,1)-array_length(a.ssb,1)) as d
FROM AbbPostBundle:Post a
order by d desc 
```

但我收到了这个错误：

```
[Syntax Error] line 0, col 17: Error: Expected known function, got 'array_length'o? 
```

所以我想知道我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:12:50.730

您必须为供应商特定的函数[创建自定义 DQL](http://symfony.com/doc/master/cookbook/doctrine/custom_dql_functions.html)函数。

# c - 在不被键盘记录器检测到的情况下，将密钥发送到应用程序的替代方法是什么？

> ID：15279698
> 
> 赞同：4
> 
> 时间：2013-03-07T19:10:09.167
> 
> 标签：c, windows, architecture, open-source

在不被键盘记录器检测到甚至没有被 SetWindowsHookEx LowLevel Keyboard Hooking 检测到的情况下，将键发送到应用程序的替代方法是什么。我知道有用于此目的的虚拟键盘，但我想要它的技术？有没有与之相关的开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:45:15.197

您可以使用 WM_SETTEXT 消息直接设置目标应用程序中特定编辑框的文本值，但您必须先将您的进程注入目标进程。

这样做的好处是，即使使用 SetWindowHookEx 钩住了消息，如果不同样注入进程，也无法找出字符串。为了真实地拦截这种消息，恶意软件必须挂钩计算机上的每个进程，即使这样它也没有用，因为大多数文本不是键盘文本，所以恶意软件无法知道什么是键盘文本以及什么是键盘文本不是。

另一种方法是使用 WM_COPYDATA，但这是外部可挂钩的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:14:55.163

最好的方法是通过剪贴板发送 ASCII 字符串，这是一些程序使用的聪明方法，比如 Bruce Schneier 的优秀 KeePassX 或 PasswordSafe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:44:17.733

如果发送 4 位或 6 位 PIN 就足够了，您的应用程序可能会要求通过随机映射输入它 ->

```
 (1)  (2)  (3)
    zih  lbg  qsw

    (4)  (5)  (6)
    ukx  ...  ... 
```

代码 1234 将输入为 ibqu 或 zlsx。
当然，这在客户实际输入他的 PIN 作为数字的那一刻就受到了损害......

当长度增加时，这种方法变得越来越烦人——所以我提供这个只是你标题中要求的一种替代方法，而不是最好的。

# asp.net-mvc - 每个模型都有 1 个存储库是否可以接受？

> ID：15279700
> 
> 赞同：0
> 
> 时间：2013-03-07T19:10:16.693
> 
> 标签：asp.net-mvc, entity-framework

我正在构建一个 MVC 4 网站，并且正在尝试遵循存储库模式。

我见过一个复杂的设置，如下所示，但由于我的技能水平，我无法完成：

```
public interface IEntityRepository<T>
    where T : class, IEntity, new()
{
    void CommitChanges();
    void DeleteOnCommit(T entity);
    T GetEntity(int key);
    IQueryable<T> GetAll();
    int InsertOnCommit(T entity);
} 
```

由于简单，我选择了这种方法：

```
public class EntityAdminRepository : IAdminRepository {

    AdminEntities db = new AdminEntities();

    public Models.Product CreateNewProduct(Models.Product productToCreate) {
       db.Products.Add(productToCreate);
       return productToCreate;
    }

    public void DeleteProduct(int id) {
        db.Products.Remove(GetProductByID(id));
    }

    public Models.Product GetProductByID(int id) {
        return db.Products.FirstOrDefault(d => d.ID == id);
    }

    public IEnumerable<Models.Product> GetAllProducts() {
        return db.Products;
    }

    public Models.Category CreateNewCategory(Models.Category categoryToCreate) {
        throw new NotImplementedException();
    }

    public void DeleteCategory(int id) {
        throw new NotImplementedException();
    }

    public Models.Category GetCategoryByID(int id) {
        throw new NotImplementedException();
    }

    public IEnumerable<Models.Category> GetAllCategories() {
        throw new NotImplementedException();
    }

    public int SaveChanges() {
       return db.SaveChanges();
    }
} 
```

除了扩大规模的问题（我认为无论如何都会存在于其他地方）这个解决方案是否如此可怕，我应该立即放弃它并继续努力，直到我能够理解并实施最初的例子？

**更新 1：** 我使用第一种方法的问题是我不知道如何在控制器中重新创建以下功能：

```
 protected IAdminRepository _repository;

    public AdminController() : this(new EntityAdminRepository()) { }
    public AdminController(IAdminRepository repository) {
        _repository = repository;
    } 
```

这种方式意味着我对每个 DTO 都有一个实体，这一切如何共同达到高潮？

**更新 2：**

```
public class DatabaseRepository<T> : IRepository<T> 
    : where T:class, IEntity, new() 
{
    private DbContext context = new MyDbContext(); // proper data actions
    public T GetEntity(int id) 
    {
        return context.Tables<T>.FirstOrDefault(x => x.Id == id);
    }
}

public class InMemoryRepository<T> : IRepository<T> 
    : where T:class, IEntity, new() 
{
    private List<T> context = new List<T>(); // stuff for unit testing
    public T GetEntity(int id) 
    {
        return context.FirstOrDefault(x => x.Id == id);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:24:48.667

以下是您的方法的一些优点和缺点：

**专业版**

*   简单的
*   容易明白
*   显式
*   做你需要的
*   直接测试

**CON**

*   大量模型类型时笨拙
*   大量重复代码
*   不利用继承*或泛型之类的东西*
*   添加新功能本质上是有风险的，因为需要单独对每个存储库进行更改

* * *

话虽如此，通用存储库总体上更能满足您的需求。以下是它的工作原理：

首先，界面。这很重要，因为它定义了一个共同商定的契约，任何实现它的类都保证遵循该契约。

这`<T>`意味着接口被声明为泛型类型。泛型类型很不错，因为您基本上可以“模板化”您的代码并避免重复自己（干！）。这`T`是一个占位符参数，实际类型名称将代替它在代码中实际使用的时间。

`where T : class, IEntity, new()`如果您不熟悉它，它会有点麻烦。像这个接口这样的泛型类型有时需要受到约束——例如，您通常需要保证 any`T`是引用类型。之后的一切都`:`构成了这样一个约束集。`class`意味着任何值都`T`必须是类，而不是值类型。`IEntity`意味着任何类`T`都必须执行`IEntity`合同。`new()`是最不直观的，意味着`T`必须有一个默认的、无参数的构造函数。那很重要，因为您经常希望能够简单地调用`var a = new T()`.

这是一个例子

```
public interface IEntity { public int Id { get; set;} }

public class FooEntity : IEntity { public int Id { get; set; } }

public class Repository<T> : IRepository<T> 
    : where T:class, IEntity, new() 
{
    private DbContext context = new MyDbContext(); // or however your db store works

    public Repository(IDbContext ctx) { context = ctx; }

    public T GetEntity(int id) 
    {
        return context.Tables<T>.FirstOrDefault(x => x.Id == id);
    }
} 
```

请注意我仍在使用这些`<T>`东西吗？这就是特制酱汁。这意味着我可以这样使用我`ProductRepository`的：

```
var a = new Repository<Product>();
var foo = a.GetByKey(1234); //foo is Product 
```

现在，要使用 repo 处理和修改对象，您有一条直截了当的路径：

1) 从存储库中获取要更改的对象 2) 对对象进行更改 3) 告诉存储库将更改写入数据存储

在代码中，

```
var a = new Repository<Product>(/* optionally, a mocked context object */);
var foo = a.GetByKey(1234); //foo is Product
// modify
foo.Name = "Bleach";
a.CommitChanges();
// create
var bar = new Product();
bar.Name = "Paper Towels";
a.InsertOnSubmit(bar);
a.CommitChanges(); 
```

这是一个 MVC 示例，假设您更新帖子中的控制器示例：

```
// ctor not listed here

public ActionResult AddProduct(Product product)
{
    if (Model.IsValid) // validate the model - may not be exact syntax...
    {
        _repository.InsertOnSubmit(product);
        _repository.CommitChanges();

        return View(product);
    }
    else { //do something else }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:27:59.520

以我的经验，无论你多么努力，花费多长时间，当你完成一个项目并且总是知道你会如何完成它（如果你可以重新开始的话）。您可以对设计进行大量改进，但您需要采取务实的立场。你现在能做什么？

我建议从你所拥有的开始，以便在你去的时候再次重新启动它几次......

* * *

通用接口非常灵活。我推荐这篇文章。保存并多次阅读；-)

[.NET Junkie - 查询/命令](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:29:23.923

无论如何，从技术上讲，每个模型都有一个存储库。每个存储库处理一个模型，并且必须为每个模型实例化。但是，您的第一个示例使用了所谓的“泛型”。这是 C# 和其他 .NET 家族语言的一个奇特且*非常强大的*功能，它允许您从本质上告诉编译器，“我稍后会告诉你我在这里处理的是什么类型，假设我要喂你一个有效类型”。因此，使用通用存储库，您将只有一个类，但您将在整个代码中使用传入的不同模型类型多次实例化它：

```
var catRepository = new Repository<Cat>();
var dogRepository = new Repository<Dog>(); 
```

不必定义 a`CatRepository`和 a`DogRepository`等等，无穷无尽。

# python - python datetime，时间和日历重叠功能

> ID：15279702
> 
> 赞同：3
> 
> 时间：2013-03-07T19:10:19.560
> 
> 标签：python, datetime, time, calendar

每次我想在 python 中做一些与日期相关的事情时，我都会感到困惑。时间、日期时间和日历模块之间似乎有很多重叠的功能。此外，您希望集成在一个模块中的一些功能分布在这三个模块中。对于日期时间类、时间元组、时间戳、字符串输入等不同格式的日期，情况会变得更糟......

有谁知道比较这三个模块并可能提供面向用例的方法的任何文章或好的教程。

像这样的东西：

要获取当前时间戳，请使用： time.time()

要将时间元组转换为时间戳，请使用：calendar.timegm()

要将日期时间转换为时间元组，请使用： datetime.timetuple()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:03:12.690

Times 图书馆试图简化这个问题。[https://github.com/nvie/times](https://github.com/nvie/times)

> Times 是一个小型的、简约的 Python 库，用于一劳永逸地处理与时区之间的时间转换。
> 
> 它的设计简单明了，但也对好的和坏的做法有意见。

我没有直接使用图书馆，但我听说过关于它的好消息。

如果您查看代码，它会导入这些库：

```
import datetime
import calendar
import pytz 
```

您可以从代码中了解每个库的使用情况。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-10T14:22:37.023

为了完整起见，有一个名为**Arrow**的库试图解决问题[https://arrow.readthedocs.io/en/latest/](https://arrow.readthedocs.io/en/latest/)。

> Arrow 是一个 Python 库，它提供了一种明智的、人性化的方法来创建、操作、格式化和转换日期、时间和时间戳。它实现并更新了 datetime 类型，填补了功能上的空白，并提供了一个支持许多常见创建场景的智能模块 API。简而言之，它可以帮助您以更少的导入和更少的代码处理日期和时间。

# git - 在 npm 包中使用非 npm 包 git 子模块

> ID：15279703
> 
> 赞同：4
> 
> 时间：2013-03-07T19:10:20.673
> 
> 标签：npm包中, git-submodules, , git, node.js, npm, git-submodules

如何在安装之前更新我的[npm包中](/questions/tagged/npm "显示标记为“npm”的问题")**的非 npm-package** [git-submodules](/questions/tagged/git-submodules "显示标记为“git-submodules”的问题")？

我正在使用 git 并且有一个 node.js 模块，该模块依赖于一个外部项目，该项目也托管在一个 git 存储库中。我将外部项目添加为子模块，现在我正在尝试制作一个 npm 包。

由于外部依赖不是 npm 包（也不是节点模块），我想我不能使用[`npm submodule`](https://npmjs.org/api/submodule.html)命令，所以我想出了[这个](https://github.com/isaacs/octave-test/blob/master/package.json#L3)文件中的预安装脚本`package.json`：

```
"scripts": { "preinstall" : "git submodule update --init"} 
```

当我`npm install`在包目录中执行时，它工作正常，但是当我尝试直接从我的远程 git 存储库或使用 tarball 安装包时`npm pack`，我收到以下错误：

```
您需要从工作树的顶层运行此命令。

```

我也尝试过（如错误消息所述）：

```
"scripts": { "preinstall" : "cd $(git rev-parse --show-toplevel) && git submodule update --init"} 
```

这个没有显示任何错误，但也没有更新包目录中的子模块。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:18:04.203

您下载的`npm`，一旦提取，不再包含 git 信息（无`.git`目录）。

所以没有 git 命令会以这种方式工作，而是在本地工作，因为你有 git 信息。

至于解决方案，您可能必须创建一个脚本来执行该`npm pack`操作，但不忽略子模块。

不是我尝试过的，但是这个脚本`https://github.com/Kentzo/git-archive-all`可能是开箱即用的，比如

```
git-archive-all --prefix package/ module.tgz 
```

可能需要一些调整...

# visual-studio - 如何让 VS 在调试器下显示从 List 继承的类的 ToString() 值？

> ID：15279706
> 
> 赞同：0
> 
> 时间：2013-03-07T19:10:27.443
> 
> 标签：visual-studio, visual-studio-debugging

当我创建一个类并覆盖`ToString()`时，当我在调试器下运行 Visual Studio 时，我可以用鼠标光标将鼠标悬停在该类型的变量上，VS 会向我显示我在方法中返回的任何内容，让在那里放置典型的信息总和特定的类和在调试过程中有价值。但是，如果我从 继承我的类`List`，VS 总是显示类似于`Count=20`忽略从我的覆盖返回的值`ToString()`，所以我`variable.ToString()`每次想查看类摘要时都必须输入 QuickWatch 窗口。有没有办法让 VS 显示`ToString()`继承自的类`List`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:14:09.323

您需要创建自己的继承 .NET`List`类的子类，并在那里覆盖该`ToString()`方法。任何使用标准`List<type>`语法的地方都需要更改以使用新的自定义 List 类。

```
public class MyList<T> : List<T>
{
    public override string ToString()
    {
        StringBuilder sb = new StringBuilder();
        foreach (T t in this)
        {
            sb.Append("[" + t.ToString() + "] ");
        }
        return sb.ToString();
    }
} 
```

使用此代码：

```
static void Main(string[] args)
{
    MyList<string> strings = new MyList<string>();
    strings.Add("asdf");
    strings.Add("teare");
} 
```

调用 ToString() 时生成此输出：

```
[asdf] [teare] 
```

编辑您的问题：

我建议构建一个通用接口，你可以指定一个特定的模板来匹配你的列表类的那个版本，然后可以获取特定的自定义类成员。下面的代码演示。

```
public interface IWidget
{
    string Name { get; }
}

public class Widget : IWidget
{
    public string Name { get; private set; }
    public Widget(string name_) { Name = name_; }
}

[DebuggerDisplay("{this.ToString()}")]
public class MyList<T> : List<T> where T : IWidget
{
    public override string ToString()
    {
        StringBuilder sb = new StringBuilder();
        foreach (IWidget w in this)
        {
            sb.Append("[" + w.Name + "] ");
        }
        return sb.ToString();
    }
} 
```

注意：这将限制您可以在自定义集合类中使用的类型，但这可能并不重要，具体取决于您要实现的目标。

# javascript - Angular JS服务设置变量正确Javascript未定义

> ID：15279708
> 
> 赞同：0
> 
> 时间：2013-03-07T19:10:31.930
> 
> 标签：javascript, html, angularjs, undefined, typeerror

因此，我创建了一个 Angular js 模块并尝试链接服务并使用该服务在整个应用程序中共享变量。一切正常，但是当我尝试将 submenu[1] 设置为一个对象时，它说 submenu[1] 未定义。这是正确的，它还没有被创建。但我只想将 submenu[1] 设置为等于一个对象。不明白为什么必须创建它。不知道为什么它说 Uncaught TypeError: Cannot Read property submenu of undefined。我 console.log 我打开的 menuArray[key] 并返回未定义。但这也没有任何意义。

```
    setSubMenu : 功能（键，子键，值）{
                        console.log(sharedVariables.menuArray[key]);
                sharedVariables.menuArray[key].subMenu[subKey] = value;
    }

```

这是我所拥有的：

```
 var myModule = angular.module('companiesApp', ['ngResource']).config(function($routeProvider) {
    $routeProvider
        .when ('/', {controller:ListCtrl, template: $('#companies-list').html()})
        .when ('/new', {controller:NewCtrl, template: $('#companies-edit').html()})
        .when('/newMenu/:companyID', {controller:EditMenuCtrl, template: $('#menu-edit').html()})
        .when ('/edit/:companyID', {controller:EditCtrl, template: $('#companies-edit').html()})
        .when ('/editMenu/:companyID', {controller:EditMenuCtrl, template: $('#menu-edit').html()})
        .when ('/settings/:companyID', {controller:SettingsCtrl, template: $('#companies-settings').html()})});

myModule.service('sharedVariables', function(){
    var sharedVariables = { count : 0, originalCount : 0, menuArray : []};
    return{
        getOriginalCount : function(){
            return sharedVariables.originalCount;
        },
      setOriginalCount : function(value){
            sharedVariables.originalCount = value;
        },
        getCount : function(){
            return sharedVariables.count;
        },
        setCount : function(value){
            sharedVariables.count = value;
        },
        getMenu : function(){
            return sharedVariables.menuArray;
        },
        setMenu : function(key, value){
            sharedVariables.menuArray[key] = value;
        },
      setMenuName : function(key,value){
            sharedVariables.menuArray[key].name = value;
        },
        setMenuEndPos : function(key, posLeft, posTop){
            sharedVariables.menuArray[key].endPosLeft = posLeft;
            sharedVariables.menuArray[key].endPosTop = posTop;
        },
        setSubMenu : function(key, subKey, value){
            sharedVariables.menuArray[key].subMenu[subKey] = value;
        }
    };
});

function EditMenuCtrl($scope,$routeParams, $location, sharedVariables){
    var count = 0;
    $scope.companyID = $routeParams.companyID;
    $scope.menuArray = [];
    $.ajax({
        url : "companies.php",
        type : "post",
        data : {
            action : "getMenus",
            id : $routeParams.companyID
        },
        success : function(data,status){
          var responses = JSON.parse(data);
            $('#menu').empty();
            for(i in responses){
                //if the Root Order LI has not been created, create it
                if($('#li-' + responses[i].rootORDER).length == 0){
                    count++;
                    var html = '<li id="li-' + responses[i].rootORDER + '" class="dropdown">' + '<a id="link-' + responses[i].rootORDER;
                    html += '" role="button" class="dropdown-toggle" data-type="text" data-toggle="dropdown">' + responses[i].menuROOT;
                    html += '</a>' + '<ul id="ul-' + responses[i].rootORDER; 
                    html += '" class="dropdown-menu" role="menu" aria-labelledby="dLabel" ><li role="presentation"><a href="javascript:void(0)" onclick="addLITOUL()" role="menuitem"><i class="icon-plus-sign"></i></a></li></ul></li>';
                    $('#menu').append(html);
                    //Record the Start Position of the Element
                    var Start = $('#li-' + responses[i].rootORDER).position();
                    sharedVariables.setMenu(responses[i].rootOrder, {name : responses[i].menuROOT, startPosLeft : Start.left, startPosTop : Start.top, subMenu : []});
                    //Make the Title Editable
                    $('#link-' + responses[i].rootORDER).editable(function(value,settings){
                        var tempID = $(this).attr('id');
                        tempID = tempID.substring(5);
                        sharedVariables.setMenuName(tempID,value);
                        return(value);
                    });
                    //Make the DropDowns and make them draggable
                    $('.dropdown-toggle').dropdown();
                    $('.dropdown').draggable({
                        containment: "#container", 
                        scroll: false, 
                        snap: true,
                        stop: function(event, ui) {
                            var Stoppos = $(this).position();
                            $("#position").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
                            var tempID = $(this).attr("id");
                            tempID = tempID.substring(3); //remove li- to get the index into the array
                            sharedVariables.setMenuEndPos(tempID, Stoppos.left, Stoppos.top);
                        }
                    });
                }//end of if
            }//end of (for i in responses)
            sharedVariables.setOriginalCount(count);
            sharedVariables.setCount(count);
            //Fill in the inner UL with it's links
            for(i in responses){
                html = '<li id="' + i + '-' + responses[i].menuTITLE+ '" role="presentation"><a role="menuitem" href="javascript:void(0)">' + responses[i].menuTITLE + '</a>';
                html += '</li>';
                $('#ul-' + responses[i].rootORDER).append(html);
                sharedVariables.setSubMenu(responses[i].rootORDER, responses[i].linkORDER, {name: responses[i].menuTITLE});
            }
        }
    });
    console.log(sharedVariables.getOriginalCount());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:50:14.523

我敢说你的问题与你`setMenu`用 key`responses[i].rootOrder`和*不同*的key打电话的事实`setSubMenu`有关。从你的其余代码来看，可能是未定义的，这应该在其他地方给出奇怪的结果......*`responses[i].rootORDER``responses[i].rootOrder`*

# matlab - 如何制作一个 MAtLab GUI 来可视化偏振椭圆

> ID：15279709
> 
> 赞同：0
> 
> 时间：2013-03-07T19:10:34.923
> 
> 标签：matlab, user-interface

我做了一些`.m files`计算斯托克斯极化参数。有两个脚本：`polarisationFromLight`它接受三个参数并返回偏振椭圆和斯托克斯参数，`polarisationFromStokes`它接受斯托克斯参数并绘制偏振椭圆。

我的文件是

**极化FromLight.m**

```
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                        %
%                                                        %
%  polarisationFromLight.m                               %
%  Matlab Script that gets the x/y component             %
%  and phase end returns the polarisation ellipse        %
%  and the 4 stokes parameters                           %
%                                                        %
%  Author:Thanos Stamatopoulos                           %
%  Date:March 2013                                       %
%                                                        %
%  Neeeds calculateEllipse.m                             %
%         angle.m                                        %
%         deg2rad.m                                      %
%                                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Eox=input('Give me the x amplitude of the wave: ');
Eoy=input('Now give the y amplitude of the wave: ');
phiDeg=input('Finally give the relative phase in degrees between x and y component: ');

if (phiDeg==(90)|phiDeg==-90 && Eox==Eoy)
    angle(90)
else
    %semiminor axis b
    phiRad=deg2rad(phiDeg);
    alpha=Eoy/Eox;
    x=asin(sin(2*alpha)*sin(phiRad))/2;
    beta=tan(x);

    %inclination angle-ellipse's orientation
    psi=atand((2*Eox*Eoy*cosd(phiDeg))/(Eox^2-Eoy^2))/2;

    %draw the ellipse
    p = calculateEllipse(0, 0, 1, beta, psi, 1000);
    plot(p(:,1), p(:,2), '.'),axis equal
end

%calculate the normalised Stokes parameters
I=Eox^2+Eoy^2;
Q=Eox^2-Eoy^2;
U=2*Eox*Eoy*cosd(phiDeg);
V=2*Eox*Eoy*sind(phiDeg);

%plot them on the canvas
text(1.01,.5,['\fontsize{16}\color{red}I= ' num2str(I/I)])
text(1.01,0.4,['\fontsize{16}\color{red}Q= ' num2str(Q/I)])
text(1.01,0.3,['\fontsize{16}\color{red}U= ' num2str(U/I)])
text(1.01,0.2,['\fontsize{16}\color{red}V= ' num2str(V/I)])

%Don't forget the left/hand polarisation
if (V>0)
    text(1.01,.8,['\fontsize{16}\color[rgb]{0 .5 0}Right Handed' ])
elseif(V<0)
    text(1.01,.8,['\fontsize{16}\color[rgb]{0 .5 0}Left Handed' ])
end 
```

**极化FromStokes.m**

```
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                        %
%                                                        %
%  polarisationFromStokes.m                              %
%  Matlab Script that gets the 4 stokes parameters       %
%  end returns the polarisation ellipse                  %
%                                                        %
%  Author:Thanos Stamatopoulos                           %
%  Date:March 2013                                       %
%                                                        %
%  Neeeds calculateEllipse.m                             %
%         angle.m                                        %
%         rad2deg.m                                      %
%                                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

I=input('Give me the I stokes parameter: ');
Q=input('Give me the Q stokes parameter: ');
U=input('Give me the U stokes parameter: ');
V=input('Give me the V stokes parameter: ');

if (V==(1)|V==-1)
    angle(90)
elseif(Q<0)
    %semiminor axis b
    x=asin(V/I)/2;
    beta=tan(x);
    p = calculateEllipse(0, 0, 1, beta, 90, 1000);
    plot(p(:,1), p(:,2), '.'),axis equal
else
    %semiminor axis b
    x=asin(V/I)/2;
    beta=tan(x);

    %inclination angle-ellipse's orientation
    psi=atan(U/Q)/2;
    psiDeg=rad2deg(psi);

    %draw the ellipse
    p = calculateEllipse(0, 0, 1, beta, psiDeg, 1000);
    plot(p(:,1), p(:,2), '.')
    axis equal
    grid on

end

if (V>0)
    text(1.01,.7,['\fontsize{16}\color[rgb]{0 .5 0}Right Handed' ])
elseif(V<0)
    text(1.01,.7,['\fontsize{16}\color[rgb]{0 .5 0}Left Handed' ])
end

text(1.01,.5,['\fontsize{16}\color{red}I= ' num2str(I/I)])
text(1.01,0.4,['\fontsize{16}\color{red}Q= ' num2str(Q/I)])
text(1.01,0.3,['\fontsize{16}\color{red}U= ' num2str(U/I)])
text(1.01,0.2,['\fontsize{16}\color{red}V= ' num2str(V/I)]) 
```

**功能`angle`**

```
 function angle=angle(phi)
    t=[0:1:360];
    x=sind(t);
    y=sind(t-phi);
    scatter(x,y,'.')
    axis equal
    grid on

**function calculateellipse**

function [X Y] = calculateEllipse(x, y, a, b, angle, steps)
    %# This functions returns points to draw an ellipse
    %#
    %#  @param x     X coordinate
    %#  @param y     Y coordinate
    %#  @param a     Semimajor axis
    %#  @param b     Semiminor axis
    %#  @param angle Angle of the ellipse (in degrees)
    %#

    error(nargchk(5, 6, nargin));
    if nargin<6, steps = 36; end

    beta = -angle * (pi / 180);
    sinbeta = sin(beta);
    cosbeta = cos(beta);

    alpha = linspace(0, 360, steps)' .* (pi / 180);
    sinalpha = sin(alpha);
    cosalpha = cos(alpha);

    X = x + (a * cosalpha * cosbeta - b * sinalpha * sinbeta);
    Y = y + (a * cosalpha * sinbeta + b * sinalpha * cosbeta);

    if nargout==1, X = [X Y]; end
end 
```

**弧度2度**

```
function deg2rad = deg2rad(degrees)

% RADIANS (DEGREES)
%
% Convert Radians to Degrees.
% Athanasios Stamatopoulos
%

deg2rad = (pi/180)*degrees; 
```

**度 2 度**

```
function rad2deg = rad2deg(radians)

%
% Convert Radians to Degrees.
% Athanasios Stamatopoulos 2010
%

rad2deg = radians/(pi/180); 
```

是否可以制作一个用户必须输入每个参数的 GUI，以便绘制偏振椭圆。

* * *

**编辑**

到目前为止，我设计了 GUI

![](../Images/0daf96f92d107fd8bcfa881bf2dd9f9b.png)

由此`.m file`产生的是

```
function varargout = Stokes2Ellipse(varargin)
% STOKES2ELLIPSE M-file for Stokes2Ellipse.fig
%      STOKES2ELLIPSE, by itself, creates a new STOKES2ELLIPSE or raises the existing
%      singleton*.
%
%      H = STOKES2ELLIPSE returns the handle to a new STOKES2ELLIPSE or the handle to
%      the existing singleton*.
%
%      STOKES2ELLIPSE('CALLBACK',hObject,eventData,handles,...) calls the local
%      function named CALLBACK in STOKES2ELLIPSE.M with the given input arguments.
%
%      STOKES2ELLIPSE('Property','Value',...) creates a new STOKES2ELLIPSE or raises the
%      existing singleton*.  Starting from the left, property value pairs are
%      applied to the GUI before Stokes2Ellipse_OpeningFcn gets called.  An
%      unrecognized property name or invalid value makes property application
%      stop.  All inputs are passed to Stokes2Ellipse_OpeningFcn via varargin.
%
%      *See GUI Options on GUIDE's Tools menu.  Choose "GUI allows only one
%      instance to run (singleton)".
%
% See also: GUIDE, GUIDATA, GUIHANDLES

% Edit the above text to modify the response to help Stokes2Ellipse

% Last Modified by GUIDE v2.5 12-Mar-2013 09:20:33

% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
                   'gui_Singleton',  gui_Singleton, ...
                   'gui_OpeningFcn', @Stokes2Ellipse_OpeningFcn, ...
                   'gui_OutputFcn',  @Stokes2Ellipse_OutputFcn, ...
                   'gui_LayoutFcn',  [] , ...
                   'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT

% --- Executes just before Stokes2Ellipse is made visible.
function Stokes2Ellipse_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to Stokes2Ellipse (see VARARGIN)

% Choose default command line output for Stokes2Ellipse
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

% UIWAIT makes Stokes2Ellipse wait for user response (see UIRESUME)
% uiwait(handles.figure1);

% --- Outputs from this function are returned to the command line.
function varargout = Stokes2Ellipse_OutputFcn(hObject, eventdata, handles) 
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;

function Itext_Callback(hObject, eventdata, handles)
% hObject    handle to Itext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of Itext as text
%        str2double(get(hObject,'String')) returns contents of Itext as a double

% --- Executes during object creation, after setting all properties.
function Itext_CreateFcn(hObject, eventdata, handles)
% hObject    handle to Itext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

function Qtext_Callback(hObject, eventdata, handles)
% hObject    handle to Qtext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of Qtext as text
%        str2double(get(hObject,'String')) returns contents of Qtext as a double

% --- Executes during object creation, after setting all properties.
function Qtext_CreateFcn(hObject, eventdata, handles)
% hObject    handle to Qtext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

function Utext_Callback(hObject, eventdata, handles)
% hObject    handle to Utext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of Utext as text
%        str2double(get(hObject,'String')) returns contents of Utext as a double

% --- Executes during object creation, after setting all properties.
function Utext_CreateFcn(hObject, eventdata, handles)
% hObject    handle to Utext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

function Vtext_Callback(hObject, eventdata, handles)
% hObject    handle to Vtext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of Vtext as text
%        str2double(get(hObject,'String')) returns contents of Vtext as a double

% --- Executes during object creation, after setting all properties.
function Vtext_CreateFcn(hObject, eventdata, handles)
% hObject    handle to Vtext (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end 
```

# html - Outlook HTML 电子邮件

> ID：15279713
> 
> 赞同：-4
> 
> 时间：2013-03-07T19:10:52.107
> 
> 标签：html, css, outlook, html-email

我有一个托管在[http://www.jn-design.co.uk/misc/Swagelok/email.html的 HTML 电子邮件](http://www.jn-design.co.uk/misc/Swagelok/email.html)

在 Outlook pre 2007 的早期版本中进行测试时，布局似乎中断了。内容被移到了表格的右侧，并切断了一些底部。如果您在浏览器中查看我的链接，与以下屏幕截图相比，您会发现问题。我以前在 IE 中遇到过这个问题，并通过完全重新开发我的电子邮件来解决它。现在问题在 Outlook 中仍然存在......

![在此处输入图像描述](../Images/826a13bcb9d48c53fea47c9fec604d19.png)

任何帮助将不胜感激....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:33:17.280

好吧，我的朋友，我看到了你的代码，因为你**有/有很多未封闭的标签，所以它被破坏了**

但是要让您的电子邮件在 Outlook 中看起来不错，您需要一个**100% 的容器表**

我在小提琴上添加了这个：

[http://jsfiddle.net/Riskbreaker/K8CLB/](http://jsfiddle.net/Riskbreaker/K8CLB/)

正如你所看到的那样......

```
<table width="100%" cellpadding="0" cellspacing="0"  border="0"  align="center" bgcolor="white">
<tr>
<td align="center">
all your email here
</td>
</tr>
</table> 
```

.....将控制内容...通过这样做，我将所有内部表格更改为对齐中心（以及所有 600 个）....似乎还有其他一些事情需要修复/关闭（您可以这样做...）但居中是固定的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:22:47.210

你的主表有宽度=600，大多数内表有宽度=550，但是那两个“阿伯丁..”和下一个有一个宽度=600，把它改回550也许它可以工作

你忘了在 aberdeen 桌前关桌

几乎最后你也没有关闭你的

```
<a> tags (info@scotland..., and www.sagelok.com, and ESPN.Vatland....) 
```

也许有一个结束

```
</td> and </tr> to much at the end, right before closing the last table! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:53:20.967

Outlook 确实对未经验证的 HTML 做了一些糟糕的事情。

请尝试：[W3C 标记验证服务器](http://validator.w3.org/)来识别代码中的问题。另请参阅：[电子邮件中 ​​CSS 支持的 Campaign Monitor 指南，](http://www.campaignmonitor.com/css/)以了解您的样式是否适用于电子邮件客户端。（特别是在 Outlook 中）。那里也有很棒的博客资源。

最后一条评论，通过在标签中声明宽度来控制项目的宽度。示例：width=400（基于像素的宽度）或 width=100%（基于百分比的宽度——请注意，因为这可能会在某些客户端出现问题）

如果您直接在标签或标签声明中编码，则大多数正常样式都是兼容的。不要尝试设置标签样式，因为某些客户端会从电子邮件内容中删除此声明。一些客户端也剥离了外部 CSS。

标签可能会导致某些浏览器中的间距问题以及标签被用户端样式首选项覆盖。
并且是你的朋友。

# xslt - XSLT 匹配模板

> ID：15279715
> 
> 赞同：2
> 
> 时间：2013-03-07T19:10:59.107
> 
> 标签：xslt

我有一种情况，我试图通过以下方式将多个可能的路径匹配到模板：

```
<xsl:template match="blah">
  <xsl:apply-templates select="foo/*/baz" mode="someMode"/>
</xsl:template>

<xsl:template match="*" mode="someMode">
  <xsl:if test="current() != 'foo/bar/baz' and
                current() ! ='foo/bam/baz'">

    <!-- Process here --> 

  </xsl:if>
</xsl:template> 
```

如您所见，“foo”下可以有任意数量的元素具有“baz”元素（例如，“bar”、“bam”、“bal”、“bav”等），但我知道大约只有 2 个，“bar”和“bam”。我不想处理这些，但我想处理其他的。不幸的是，current() 方法没有返回匹配的路径，所以测试总是成功的（即使路径是 'foo/bar/baz' 或 'foo/bam/baz'.

如何检索在 if-test 中匹配的路径？

请注意：我不能有其他专门匹配 'foo/bar/baz' 和 'foo/bam/baz' 的 xsl:template 元素，因为它们正在其他地方（以其他方式）进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:15:43.863

该`current`函数不返回路径，它返回当前上下文节点（即在`[]`谓词之外它与 完全相同`.`，在谓词内部它是它之外的值`.`）。

而不是使用你应该为与你*不*想要的特定元素匹配的`<xsl:if>`相同元素定义无操作模板，然后主模板只会为你想要的那些*元素*触发。`someMode`*`*`*

 **```
<xsl:template match="foo/bar/baz | foo/bam/baz" mode="someMode" />

<xsl:template match="*" mode="someMode">
  <!-- Process here -->
</xsl:template> 
```

你这么说

> 请注意：我不能有其他专门匹配 'foo/bar/baz' 和 'foo/bam/baz' 的 xsl:template 元素，因为它们正在其他地方（以其他方式）进行处理。

但这就是模式的全部意义——*其他*`foo/bar/baz`模式的现有模板仍然会像以前那样做。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:17:45.060

如果您有其他与 foo/bar/baz 和 foo/bam/baz 匹配的 mode="someMode" 模板，那么在该模式下匹配 * 的模板将永远不会在此类元素上触发，并且条件中的测试将始终是即使您重新制定它以说出您想要的内容，也是如此。

如果您不能完全确定与 foo/bar/baz 或 foo/bam/baz 模式匹配的给定元素是否在其他地方匹配，并且您想确保`if`语句中的代码不会为它触发，你可以将你的测试改写为

```
test="not(self::baz/parent::bar/parent::foo
          or self::baz/parent::bam/parent::foo)" 
```

许多 XSLT 程序员会以不同的方式编写它，尽管通过在模板匹配模式的谓词中添加该测试：

```
<xsl:template mode="someMode" 
              match="*[not(self::baz/parent::bar/parent::foo
                      or self::baz/parent::bam/parent::foo)]">
  <!-- process ... -->
</xsl:template> 
```***

# twitter-bootstrap - 在模态引导程序中形成

> ID：15279716
> 
> 赞同：12
> 
> 时间：2013-03-07T19:11:01.153
> 
> 标签：twitter-bootstrap, submit, modal-dialog

我有一个进行产品注册的模式。我想在不离开模式的情况下在模式内提交表单。

```
<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <form method="post">
        <button type="submit">Submit</button>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-11-24T19:03:11.137

在我的情况下，我只将提交按钮放在页脚正文中并删除数据关闭，即：

* * *

```
<div class="modal-content">
    <form id="role-form"  method="get">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>

            <h4 class="modal-title">تعديل صلاحيات المدير - {{$user->username}}</h4>
        </div>
        <div class="modal-body">

            <div class="form-group col-md-12">

                <select id="role" name="role" class="form-control">
                    <option selected disabled>الصلاحية</option>
                    <option value='1'>مدير</option>
                    <option value='2'>مشرف</option>
                </select>
            </div>

            <div class="clearfix"></div>
        </div>
        <div class="modal-footer">

            <button type="submit" class="btn btn-success" >حفظ</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">إلغاء</button>

        </div>
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-07T19:28:19.237

首先，在您的`<form>`标签上设置一个 id：

```
<form id="myForm" method="post">
    ...
</form> 
```

如果您使用的是 jQuery（强烈推荐），您可以这样做：

```
$(function(){
    $('#myForm').on('submit', function(e){
      e.preventDefault();
      $.post('http://www.somewhere.com/path/to/post', 
         $('#myForm').serialize(), 
         function(data, status, xhr){
           // do something here with response;
         });
    });
}); 
```

# asp.net-mvc - 获取 User.Identity.Name 的值到模型中

> ID：15279717
> 
> 赞同：1
> 
> 时间：2013-03-07T19:11:06.583
> 
> 标签：asp.net-mvc

我正在尝试将 User.Identity.Name 值放入提供给我的控制器操作的模型中。

在我的剃刀代码中，我可以显示它

```
@User.Identity.Name 
```

我尝试了各种方法将其放入隐藏字段的值中，以便它与模型一起提交。

```
@Html.EditorFor(m => m.UserName, new {@value=User.Identity.Name }) 
```

我的视图模型：

```
 [HiddenInput(DisplayValue = false)]
    public string UserName { get; set; } 
```

有没有更好或更合适的方法来做到这一点？

最终，我会将这些数据记录到服务器上的日志数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:14:05.213

您不需要在客户端显示它并发送它。在您的控制器中，您可以简单地执行以下操作：

```
User.Identity.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:15:39.320

您可能不想让这个值来自客户端，因为它可以更改为他们想要的任何东西。

相反，您希望接收提交表单的操作方法从 User.Identity.Name 设置此值

```
myModel.UserName  = User.Identity.Name 
```

# php - 选项卡更改时引导导航栏刷新

> ID：15279718
> 
> 赞同：-2
> 
> 时间：2013-03-07T19:11:06.727
> 
> 标签：php, jquery, twitter-bootstrap

我使用 twitter bootstrap 的导航栏。每个选项卡的内容来自一个从数据库加载数据的 php 函数。页面加载后，我希望能够在选项卡更改时刷新每个选项卡下的数据（相当于再次调用相应的 php 函数）。我猜这将是 jquery onclick() 事件，但我如何更新内容？

```
<?php 
    require_once 'Offers.php';
    $offers = new Offers();
?>

<div class="navbar">
   <div class="navbar-inner">
    <ul class="nav" id="mytab">
      <li class="active"><a href="#tab1" data-toggle="tab">A</a></li>
      <li><a href="#tab2" data-toggle="tab">B</a></li>
      <li><a href="#tab3" data-toggle="tab">C</a></li>
    </ul>
  </div>
</div>

 <div class="tab-content">
     <div class="tab-pane active" id="tab1">
       <?php echo($offers->retrieveA());?>   
     </div>
     <div class="tab-pane" id="tab2">
       <?php echo($offers->retrieveB());?>
     <div class="tab-pane" id="tab3">
       <?php echo($offers->retrieveC());?>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:16:59.030

所以这里有一个非常简单的使用 ajax 的解决方案。

首先，我们将 jquery 事件 click 附加到每个选项卡，然后对我们的函数进行 ajax 调用。因为通常 ajax 事件调用文件中的一些 php 脚本，而这里我们必须处理函数，所以我们将它们放在一个单独的 php 文件中，并使用`switch case`语句在它们之间进行选择。

所以我们开始吧。首先，我们将 id 添加到导航栏选项卡：

```
<li class="active"><a href="#tab1" data-toggle="tab" id="nav1">A</a></li>
<li><a href="#tab2" data-toggle="tab" id="nav2">B</a></li>
<li><a href="#tab3" data-toggle="tab" id="nav3">C</a></li> 
```

然后单击每个选项卡的事件处理程序。每个处理程序都使用 ajax 来更新选项卡内容。

```
//Functions to dynamically update navbar
$('#nav1').click(function() {
    $.ajax({ url: 'refreshTabContent.php',
           data: {whichTab: 'tab1'},
           type: 'post',
           success: function(output) {
                     $('#tab1').html(output);
                    }
    });
});
$('#nav2').click(function() {
    $.ajax({ url: 'refreshTabContent.php',
           data: {whichTab: 'tab2'},
           type: 'post',
           success: function(output) {
                      $('#tab2').html(output);
                    }
    });
});
$('#nav3').click(function() {
    $.ajax({ url: 'refreshTabContent.php',
           data: {whichTab: 'tab3'},
           type: 'post',
           success: function(output) {
                      $('#tab3').html(output);
                    }
    });
}); 
```

就是这样。在每个处理程序中，我们将即将编写的新 php 脚本称为“refreshTabContent.php”。在该脚本中，我们根据 的值`whichTab`调用相应的函数，该函数返回我们希望在相应选项卡中显示的内容，然后将其回显。

```
<?php

require_once 'Offers.php';
$offers = new Offers();

if(isset($_POST['whichTab']) && !empty($_POST['whichTab'])) {
    $action = $_POST['whichTab'];
    switch($action) {
        case 'tab1' : 
            echo($offers->retrieveA());
            break;
        case 'tab2' : 
            echo($offers->retrieveB());
            break;
        case 'tab3' : 
            echo($offers->retrieveC());
            break;
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:21:58.787

您可以在不重新加载整个页面的情况下即时更新任何内容的唯一方法是通过 javascript/jQuery，特别是在您使用 ajax 的情况下。因此，您必须将一个附加`onclick`到您的选项卡上，该选项卡运行一个 ajax 调用回您的 PHP 文件。（我不记得引导程序如何附加它自己的`onclick`，所以如果它根本不起作用，那是我首先要检查的地方）。

但是，我个人会以可以接受参数的方式编写您的 PHP 文件的第二个版本，`$_GET`以便它可以仅返回所选选项卡的内容。结果通过 ajax 返回，然后您可以将其发送回选项卡。

根据您从 PHP 获取的内容，当您单击选项卡时，这可能会导致短暂的加载暂停。

无论如何，如果您要在单击选项卡时重新加载它，我不确定是否值得提前加载选项卡内容。没有更多细节很难说。

# java - 在 java 标识符中使用不常见的字符 `$` 和 `_`

> ID：15279722
> 
> 赞同：3
> 
> 时间：2013-03-07T19:11:34.403
> 
> 标签：java, design-patterns, coding-style, naming-conventions

在 Java 标识符中使用这些不常见的字符有什么问题吗？来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)

> “Java 字母”包括大写和小写 ASCII 拉丁字母 AZ (\u0041-\u005a) 和 az (\u0061-\u007a)，以及由于历史原因，ASCII 下划线（_ 或 \u005f）和美元符号（$，或 \u0024）。$ 字符应仅用于机械生成的源代码中，或者很少用于访问遗留系统上预先存在的名称。

这是否意味着这些字符已经过时了？或者它们只是为特殊用例保留的。`_`常用于静态字段名。

我正在尝试构建基于字段和方法名称的行为的小型库。它将接收对象解析其字段名称并决定如何操作。
我也可以使用注释。但是序列化有困难（JAXB等）。而且有时使用描述性字段名称（Convention over Configuration）更容易和更快。因此，这些很少使用的字符在这种情况下可能很有用。

**更新**

我故意没有提到 unicode 字符。我认为标识符名称中的 unicode 字符至少不合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:16:14.340

下划线完全没问题。不过我会避免使用美元。`$name`可能与某些隐藏/生成的字段发生冲突。

如果您的库要求用户类中的特殊字段用下划线标记，那可能没问题。但是你可以想象两个库有相似的需求并且冲突运行。

# ios - iOS上的Phonegap日历插件

> ID：15279723
> 
> 赞同：2
> 
> 时间：2013-03-07T19:11:38.830
> 
> 标签：ios, cordova, jquery-mobile

试图让 Phongegap 的日历插件工作。我要做的是在单击时注册事件`event`。还使用 Jquery Mobile。

代码：

```
 <title>Calendar</title>
        <script type="text/javascript" src="cordova-2.5.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="ja/calendar.js"></script>
        <script type="text/javascript">
            var cal;
            cal = window.plugins.calendarPlugin;

            $('#event').click(function() {
                              function createEvent(title,location,notes, startDate, endDate){
                              var title = document.getElementById=("eventTitle");
                              var notes = document.getElementById=("eventNotes");
                              var startDate = document.getElementById=("eventStart");
                              var endDate = document.getElementById=("eventEnd");
                              cal.createEvent(title,location,notes,startDate,endDate);
                              }
                              });

            </script>
    </head>
    <body>

        <body>
        Titel:<input type="text" id="eventTitle"><br>
            Anteckning:<input type="text" id="eventNotes"><br>
                Startdatum:<input type="date" id="eventStart"><br>
                    Slutdatum:<input type="date" id="eventEnd"><br>

        <button id="event">Create event</button>

                        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T15:06:45.067

尝试使用 jQuery 来定义变量，我刚刚完成了一个像你这样的项目，我的代码如下所示：

```
 var title = $("#name").val();
        var location = $("#location").val()
        var notes = $("#notes").val();
        // getting dates using the moment.js file
        var s = $("#startDate").val();
        var startDate = moment(s).toDate();
        var e = $("#endDate").val();
        var endDate = moment(e).toDate(); 
```

它的日期方面正在使用其他东西来获取时间和日期。但是您会看到这里的基本格式有效。试试看，让我知道结果如何

# java - Java - 如果用户输入了无效的 IP 地址或主机名，则抛出异常

> ID：15279726
> 
> 赞同：1
> 
> 时间：2013-03-07T19:11:45.193
> 
> 标签：java, exception, ip, inetaddress

我想抛出一个异常，当用户输入无效的 IP 地址、主机名或不是完全限定的域名时，它会显示一条错误消息。

我不太确定是使用unknownhostexception 还是IOException。

我尝试做 if 语句，但我不知道 java 中的“无效”是什么。

```
If (addr != ' not a valid IP address, host name, fully qualified domain name or entered something invalid ')
{
throw new IOException/UnknownHostException("this is invalid: " + addr); } 
```

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:15:25.323

尝试`InetAddress.getByName(str)`验证字符串。`UnknownHostException`如有必要，它会抛出一个。我建议完全删除您的`if`声明。也许是这样的：

```
public static InetAddress testAddress(String str) throws UnknownHostException {
    InetAddress add = InetAddress.getByName(str);

    // Check if IP address was simply returned, instead of host.
    if (add.getCanonicalHostName().equals(add.getHostAddress())) {
        throw new UnknownHostException(str + "is not a known host.");
    }
    return add;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:31:00.090

有一个概念，称为 regex（正则表达式），您可以在其中检查该模式是否正确。您可能必须寻找好的解决方案或编写自己的正则表达式（在我个人看来这并不容易）。但这是一个很好的起点 [http://www.mkyong.com/regular-expressions/how-to-validate-ip-address-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-ip-address-with-regular-expression/) ;)

# editor - Sublime Text 2标签内的文本选择

> ID：15279727
> 
> 赞同：21
> 
> 时间：2013-03-07T19:11:49.333
> 
> 标签：editor, sublimetext2, text-editor

我正在寻找一个键盘快捷键来选择标签之间的文本，例如：

```
<div>This is the text I want to Select</div> 
```

我在谷歌、st2 网站和这里做了一些搜索，但找不到这个快捷方式。我知道 command + L 会抓住整行。

提前致谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-07T19:31:44.420

尝试`⌘</kbd> + `Shift` + `a``

我认为这是 OSX 中正确的键绑定。如果没有，请`expand_selection`在默认键盘映射中查找带有参数的命令`{"to": "tag"}`

对于 windows/nix：试试`Ctrl`++`Shift``a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-16T12:18:27.330

它仅在您指定了一种语言时才有效，例如在视图 > 语法下。如果它只是显示为纯文本文件，它不会做任何事情。

# javascript - 关闭开发模式和 Chrome 打包应用程序 -- “document.write() 在打包应用程序的沙箱中不可用”

> ID：15279728
> 
> 赞同：2
> 
> 时间：2013-03-07T19:11:52.247
> 
> 标签：javascript, google-chrome-extension, google-closure-library

我在使用 Closure 的开发模式下遇到问题，因为我的 Chrome 打包应用程序（即 v2 清单文件）的安全策略限制了在 Closure 引导过程中调用的内容（例如，当我使用未编译的开发代码加载应用程序时，我得到“document.write() 在打包应用程序的沙箱中不可用”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:11:52.247

以下代码是我最终使用的代码，它非常适合在 Chrome 的打包应用程序框架中以 Dev 模式运行 Closure。

在closure/goog/base.js 中，覆盖goog.global.CLOSURE_IMPORT_SCRIPT，如下所示：

```
goog.global.CLOSURE_IMPORT_SCRIPT = function(src) {
  var script = document.createElement('script');
  script.src = src;
  script.type = 'text/javascript';
  goog.global.document.getElementsByTagName("head")[0].appendChild(script);
  return true;
}; 
```

# version-control - 配置 Mercurial 的内置服务器

> ID：15279731
> 
> 赞同：2
> 
> 时间：2013-03-07T18:49:30.267
> 
> 标签：version-control, mercurial

我正在尝试在工作中安装 Mercurial 设置，以使用我们的旧代码对其进行评估。我目前使用的“服务器”只是在我们的 Intranet 上运行带有 SP3 的 Windows XP 的桌面。“客户端”安装在我的本地桌面上，也运行带有 SP3 的 Windows XP。（我也在两台机器上使用 TortoiseHG。）

Web 服务器在 运行`http://localhost:8000`，我可以在浏览器中查看存储库。但是，当我尝试检测对 repo 的传出更改时，我收到了 HTTP 404 错误。我可以看到请求显示在服务器的日志中，所以我指向正确的位置，但它显示`GET http://host:8000/reponame?cmd=capabilities HTTP/1.1 404`. 无论我更改什么设置，我似乎都无法让客户端成功执行针对 repo 的命令。有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:18:02.710

好吧，当我在我的 TortoiseHG 中启动内部服务器时（对于单个 repo，`Repostory`-`Start Web-server`从 Workbench 主菜单）

*   服务器窗口告诉“在 localhost:8000 上运行”，但实际上服务器侦听所有接口（`netstat -na`显示`TCP 0.0.0.0:8000 0.0.0.0:0 LISTENING`）
*   在 fork 中的 clone-edit-commit 和测试传出（直接来自 THG）我看到

`% hg --repository Z:\clone outgoing http://10.1.14.94:8000/`

`comparing with http://10.1.14.94:8000/`

`searching for changes`

`changeset: 39:c57a9357ec55`

`tag: tip`

`user: I`

`date: Fri Mar 08 17:00:05 2013 +0600`

`summary: Test-change`

前段时间，我还从我的另一台主机拉|推|到这些 Mercurial 存储库。服务器配置很简单，一切都在 TortoiseHG 设置中完成。

我在 mercurial.ini 中的 [web] 部分（仅此而已）

```
[web]
port = 8000
encoding = UTF-8
allow_archive = bz2, gz, zip
style = gitweb 
```

（现在禁用推送，在仅拉模式下工作）

PS：Windows XP SP3 上的 TortoiseHg 版本 2.7.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:28:20.847

Push 意味着将变更集从一个 repo 移动到另一个 repo。您还没有声明您制作了两个单独的回购克隆，然后尝试从 A 推送到 B。所以假设您在这里感到困惑，并谈谈这种困惑：想象一下我尝试从自己的回购推送到hg 服务实例针对我自己的存储库运行。这就像试图给自己打电话告诉自己一些事情。

其次，如果您真的想从 A 推送到 B，并且 A 中确实存在需要到达 B 的更改，那么，您的实际问题可能是您没有正确输入存储库的 URL我假设你的 GUI 工具是 Tortoise HG。在你学习的时候从命令行再试一次。如果您收到错误，请在此处发布错误：`hg push http://myserver:8000`

第一次尝试 Mercurial 时，在长期使用 Subversion 之后，我开始认为我需要一个“服务器”组件，而不是实际需要。在颠覆中，服务器是提交发生的地方。在 mercurial 中，提交发生在本地，当您推送到远程（可能是中央）服务器时，团队中的其他人会看到您的更改。这是最大的区别。我假设您正在尝试推送，因为提交发生在本地。如果您对提交和推送之间的区别感到困惑，那么我建议您查看[http://hginit.com/](http://hginit.com/)

至于设置服务器，我可以推荐三个相当简单的选项：

1.  命令行中的“hg serve”，如其他答案所示。简单，仅供临时使用。非常适合学习。

2.  在 Apache 中安装 Mercurial（比在 IIS 中安装 Mercurial 更容易）以获得具有完全身份验证和可能加密的永久 Web 服务器。如果您使用Mercurial wiki 上的[hgwebdir](http://mercurial.selenic.com/wiki/HgWebDirStepByStep)说明，则需要大约一个小时。如果您使用预先构建的解决方案，它应该花费更少的时间。我使用了 Bitnami 的 Windows 预建解决方案，最近 5 分钟就搞定了。Bitnami 提供了可用的安装程序，这些安装程序将获取 python、apache、mercurial 和其他东西，所有这些都安装并在他们所谓的“堆栈”中一起工作（一堆已经工作的东西）。

3.  这是真正出色的解决方案。使用 BitBucket.org 上的免费私人网络存储库。免费供公共（开源）和私人（小型团队和个人）使用，对于大型团队来说相当便宜。管理工作为您服务？只不过是登录一个网站。你完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:31:03.203

我有类似的设置，我也有类似的问题。

我使用以下命令来运行我的 HG 服务（它在一个批处理文件中）：

```
hg.exe serve --prefix mercurial --address 123.12.1.1 --port 8008 --web-conf hg-web.conf --accesslog hg-access.log --errorlog hg-error.log 
```

在 hg-web.conf 我有：

```
[web]
style = default
allow_push = *
push_ssl = false

[paths]
my-repo = c:\hg\my-repo 
```

通过此设置，我可以通过访问 url 来访问我的存储库`http://ip:port/mercurial/my-repo`

我可以毫无问题地推动。

试试这个设置，我希望它可以帮助你解决你的问题。

# java - Java中接口使用相关的一些疑惑（创建Hibernate DAO）

> ID：15279733
> 
> 赞同：1
> 
> 时间：2013-03-07T19:12:18.760
> 
> 标签：java, hibernate, jakarta-ee, orm

我正在开发一个简单的示例应用程序，它使用 Hibernate 来实现在数据库表上执行一些**CRUD**操作的 DAO。

我的应用程序运行良好，但我怀疑这可能与我在使用 Java 方面的角色差距有关。

在我的应用程序架构中，我有一个名为**HibernateDAO的****接口**，其中我只声明了我将拥有的 CRUD 方法，这个：

 **```
package org.andrea.myH8.myH8HelloWorld;

public interface HibernateDAO {

    // Operazione di CREATE:
    public Integer addEmployee(String fname, String lname, int salary);

    // Operazione di READ:
    public void listEmployees();

    // Operazione di UPDATE:
    public void updateEmployee(Integer EmployeeID, int salary);

    // Operazione di DELETE:
    public void deleteEmployee(Integer EmployeeID);

} 
```

然后我有实现previous接口的**具体类，这个类被命名为****HibernateDAOImpl**，这个：

```
package org.andrea.myH8.myH8HelloWorld;

import java.util.List;
import java.util.Date;
import java.util.Iterator;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

// Classe principale contenente il metodo main():
public class HibernateDAOImpl implements HibernateDAO {

    // Factory per la creazione delle sessioni di Hibernate:
    private static SessionFactory factory;

    /** Registratore di servizzi che contiene, gestisce e fornisce l'accesso
     *  ai servizzi registrati:
     */
    private static ServiceRegistry serviceRegistry;

    public HibernateDAOImpl() {

        try {

            /** Un'istanza di Configuration consente all'applicazione di specificare le 
             *  proprietà ed il documento di mapping tra oggetti da persistere e dabelle
             *  che devono essere utilizzati durante la creazione di una SessionFactory
             */

            Configuration configuration = new Configuration();
            /** Per la configurazione di Hibernate utilizza le proprietà specificate nel
             * file XML di configurazione avente nome standard hibernate.cfg.xml:
             */
            configuration.configure();

            /** ServiceRegistry crea un'istanza di ServiceRegistry (il registratore di servizzi)
             *  alla quale vengono applicati un gruppo di settaggi contenuti dentro le proprietà
             *  dell'oggetto configuration.
             *  Infine il registratore di Service creato viene costruito in base a tutte le
             *  impostazioni specificate.
             */
            serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();

            /** Crea l'istanza della SessionFactory usando le proprietà ed i mapping
             *  definiti in questa configurazione
             */
            factory = configuration.buildSessionFactory(serviceRegistry);

        } catch (Throwable ex) {    // Se viene sollevata un'eccezione la gestisce
            System.err.println("Failed to create sessionFactory object." + ex);
            throw new ExceptionInInitializerError(ex);
        }

    }

    /** Metodo relativo all'operazione CREATE di un record nella tabella EMPLOYEE:
     * 
     * @param fname nome
     * @param lname cognome
     * @param salary salario
     * @return l'identificativo intero univoco che rappresenta l'impiegato
     */

    public Integer addEmployee(String fname, String lname, int salary) {

        // Crea e mette nella connection pool la connessione JDBC:
        Session session = factory.openSession();    

        Transaction tx = null;          // Rappresenta una transazione
        Integer employeeID = null;      // Identificativo univoco impiegato

        try {
            // Inizia un'unità di lavoro e ritorna la transazione ad essa associata:
            tx = session.beginTransaction();

            // Crea un nuovo oggetto Employee:
            Employee employee = new Employee(fname, lname, salary);

            /** Persiste l'istanza transiente data ed in primo luogo gli assegna 
             *  un identificatore univoco  autogenerato
             */
            employeeID = (Integer) session.save(employee);
            tx.commit();                    // Esegue la commit della transazione
        } catch (HibernateException e) {    // Se viene sollevata un'eccezione:
            if (tx != null)                 // Se la transazione non è nulla
                tx.rollback();      // Esegue la rollback e riporta alla situazione iniziale
            e.printStackTrace();
        } finally {                 // Alla fine:
            // Chiude la sessione rilasciando la connessione JDBC e facendo il cleanup:
            session.close();    
        }
        return employeeID;
    }

    /* Metodo usato per elencare tutti i record presenti nella tabella EMPLOYEE: */
    public void listEmployees() {

        // Crea e mette nella connection pool la connessione JDBC:
        Session session = factory.openSession();
        Transaction tx = null;                  // Rappresenta una transazione

        try {
            // Inizia un'unità di lavoro e ritorna la transazione ad essa associata:
            tx = session.beginTransaction();

            /** Crea la query usando una stringa HQL per ottenere tutti i record
             *  ed ottiene la lista di tutti i record rappresentati ognuno da un
             *  oggetto Employee 
             */
            List employees = session.createQuery("FROM Employee").list();

            // Stampa i valori delle proprietà di ogni oggett nella lista:
            for (Iterator iterator = employees.iterator(); iterator.hasNext();) {
                Employee employee = (Employee) iterator.next();
                System.out.print("First Name: " + employee.getFirstName());
                System.out.print("  Last Name: " + employee.getLastName());
                System.out.println("  Salary: " + employee.getSalary());
            }
            tx.commit();                    // Esegue la commit della transazione
        } catch (HibernateException e) {    // Se viene sollevata un'eccezione:
            if (tx != null)                 // Se la transazione non è nulla
                tx.rollback();          // Esegue la rollback e riporta alla situazione iniziale
            e.printStackTrace();
        } finally {                 // Alla fine:
            // Chiude la sessione rilasciando la connessione JDBC e facendo il cleanup:
            session.close();
        }
    }

    /** Metodo che aggiorna il salario di un impiegato
     * 
     *  @param EmployeeID l'ID univoco che identifica il record nella tabella EMPLOYEE
     *  @param salary il nuovo salario dell'impiegato rappresentato dal record
     */
    public void updateEmployee(Integer EmployeeID, int salary) {

        // Crea e mette nella connection pool la connessione JDBC:
        Session session = factory.openSession();
        Transaction tx = null;              // Rappresenta una transazione

        try {
            // Inizia un'unità di lavoro e ritorna la transazione ad essa associata:
            tx = session.beginTransaction();

            /**
             * Ritorna l'istanza persistita sul database della classe fornita come
             * parametro di input avente l'identificatore fornito come parametro
             * di input. Se non esiste un tale oggetto persistito nel database 
             * allora ritorna null.
             */
            Employee employee = (Employee) session.get(Employee.class,
                    EmployeeID);

            employee.setSalary(salary);     // Setta il nuovo valore del salario
            session.update(employee);       // Esegue l'update di tale oggetto
            tx.commit();                    // Esegue la commit della transazione
        } catch (HibernateException e) {    // Se viene sollevata un'eccezione:
            if (tx != null)                 // Se la transazione non è nulla
                tx.rollback();          // Esegue la rollback e riporta alla situazione iniziale    
            e.printStackTrace();
        } finally {                     // Alla fine:
            // Chiude la sessione rilasciando la connessione JDBC e facendo il cleanup:
            session.close();
        }
    }

    /** Metodo che elimina un record dalla tabella EMPOLYEE
     * 
     *  @param EmployeeID l'ID univoco che identifica il record nella tabella EMPLOYEE 
     */
    public void deleteEmployee(Integer EmployeeID) {

        // Crea e mette nella connection pool la connessione JDBC:
        Session session = factory.openSession();
        Transaction tx = null;              // Rappresenta una transazione

        try {
            // Inizia un'unità di lavoro e ritorna la transazione ad essa associata:
            tx = session.beginTransaction();

            /**
             * Ritorna l'istanza persistita sul database della classe fornita come
             * parametro di input avente l'identificatore fornito come parametro
             * di input. Se non esiste un tale oggetto persistito nel database 
             * allora ritorna null.
             */
            Employee employee = (Employee) session.get(Employee.class,
                    EmployeeID);

            session.delete(employee);       // Rimuove l'oggetto dalla tabella del database:
            tx.commit();                    // Esegue la commit della transazione
        } catch (HibernateException e) {    // Se viene sollevata un'eccezione:
            if (tx != null)                 // Se la transazione non è nulla
                tx.rollback();          // Esegue la rollback e riporta alla situazione iniziale
            e.printStackTrace();
        } finally {                     // Alla fine:
            // Chiude la sessione rilasciando la connessione JDBC e facendo il cleanup:
            session.close();
        }
    }
} 
```

好的，省略实体类 Person，最后一个类是**MainApp**类，它包含我用来测试这个类如何工作的 main() 方法：

包 org.andrea.myH8.myH8HelloWorld；

公共类 MainApp {

```
public static void main(String[] args) {

    // Creo una nuova istanza dell'oggetto DAO per interagire con il database:
    HibernateDAO ME = new HibernateDAOImpl();

    System.out.println("CREAZIONE DEI RECORD:");
    // Inserisce 3 record nella tabella EMPLOYEE sul DB:
    Integer empID1 = ME.addEmployee("Zara", "Ali", 1000);
    Integer empID2 = ME.addEmployee("Daisy", "Das", 5000);
    Integer empID3 = ME.addEmployee("John", "Paul", 10000);

    // Elenca tutti i record della tabella EMPLOYEE:
    System.out.println("ELENCA TUTTI I RECORD:");
    ME.listEmployees();

    // Update del record avente id corrispondente al valore della variabile empID1
    System.out.println("Update del record avente id corrispondente al valore: " + empID1);
    ME.updateEmployee(empID1, 5000);

    /* Elimina dalla tabella EMPLOYEE il record avente id corrispondente al valore
     * della variabile empID2 */
    System.out.println("Eliminazione del record avente id corrispondente al valore: " + empID2);
    ME.deleteEmployee(empID2);

    // Elenca tutti i record della tabella EMPLOYEE:
    System.out.println("ELENCA TUTTI I RECORD:");
    ME.listEmployees();

} 
```

}

现在我对最后一个类有疑问......在这个类的**main()**方法中，我将我的 DAO 对象声明为接口类型（**HibernateDAO**），但我必须使用实现此接口的具体类型（ HibernateDAOImpl ）来**构造**它， 这样：

```
HibernateDAO ME = new HibernateDAOImpl(); 
```

我会知道这是否是我必须使用的最佳实践，或者是否存在一些更好的方式来说 Java 将其创建为 HibernateDAO 类型，然后自动检测到我只有一个实现并使用它的 Java。

你能给我解释一下这件事吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:47:43.497

首先，我建议将 HibernateDAO 重命名为 EmployeeDAO，然后将具体类命名为 HibernateEmployeeDAO。请记住，接口的重点是隐藏实现细节，以便以后可以更改它们。例如，如果您决定不使用 Hibernate，您只需更改具体的类，并且当实现不使用 Hibernate 时，如果有一个名为 HibernateDAO 的接口会令人困惑。

Java 不能自动知道您要使用什么实现，因此您需要使用具体的构造函数。将 DAO 声明为接口对于依赖注入很有用。

```
public class ServiceLogic {
    private final EmployeeDAO dao;
    public ServiceLogic(EmployeeDAO dao){
        this.dao = dao;
    }
    //some logic code
} 
```

`new ServiceLogic(new HibernateEmployeeDao());`如果我想使用 Hibernate 或者`new ServiceLogic(new MyBatisEmployeeDAO());`我想使用 MyBatis ，我可以调用上面的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:45:56.117

这实际上是使用接口但实例化具体类的最佳实践（显然你别无选择）。这是最终替换实现的最佳方法（假设在不久的将来，您可能想要使用`ORM`除 hibernate 之外的其他方法，因为您的老板决定更改它，因为他阅读了一篇关于一些晦涩框架的文章，而您没有要说的话（这种情况，显然，在现实生活中永远不会发生），那么你只需要创建一个新的接口实现并更改实例化就可以了。）

您接下来要问的是，如果某个框架可以为您在类路径上选择正确的类实现，尤其是如果您只有一个，那么答案是肯定的：[IOC](http://en.wikipedia.org/wiki/Inversion_of_control)框架可以做到这一点，而且我最了解的那个:`Spring`特别擅长这种东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:48:53.603

默认情况下，Java 没有在运行时可用的类注册表。此外，类定义可以在运行时动态加载，甚至从网络加载。所以不，没有办法问Java *“实现接口X的具体类是什么？”* .

`new`运算符后面必须跟一个非抽象类型，因此您的代码是正确的，并且是实例化对象的唯一合法方式。

您还可以使用类注册和反射，即在运行时动态构建对象，而无需在编译时知道具体的子类名称。这种技术要求类名在运行时在配置文件中可用。假设您有以下内容：

```
<!-- In configuration.xml -->
<database>
  <className>org.andrea.myH8.myH8HelloWorld.HibernateDAOImpl</className>
</database> 
```

在您的内部，您`main()`从配置文件中读取类名，然后执行以下操作：

```
// Note, this is unchecked
Class<HibernateDAO> daoClass = (Class<HibernateDAO>) Class.forName(name);
HibernateDAO me = daoClass.getConstructor().newInstance(); 
```

您还可以通过其他方式构建注册表，例如通过扫描`CLASSPATH`，但这当然效率较低并且可能会减慢您的应用程序的启动速度。**

# java - JavaFx 标题栏图像一直显示为黑色

> ID：15279734
> 
> 赞同：2
> 
> 时间：2013-03-07T19:12:29.127
> 
> 标签：java, javafx-2

在研究了相当多的帖子并尝试了所有内容之后，我无法自己完成一项简单的任务，比如使用 eclipse IDE 和 Java FX 2 在标题栏上设置一个图标。

它要么带有默认的空窗口图标，要么返回黑色。请让我知道我做错了什么。

以下是我的一些尝试，

```
//Image ico = new Image(UI.class.getResourceAsStream("Sunset.jpg"), 16, 16,      true,true);        
//Image ico = new Image("Sunset.jpg", true);// looks inside src folder
//primaryStage.getIcons().add(new Image(UI.class.getResourceAsStream("/title.jpeg")));
//primaryStage.getIcons().add(new Image(UI.class.getResourceAsStream("title.jpeg")));

Image ico = new Image(UI.class.getResourceAsStream("Sunset.jpg"));
primaryStage.getIcons().add(ico); 
```

我用我一直在使用的图片尝试了以下方法，

1.  我使用属性为 300x300 像素的图片
2.  我将 300x300 像素的图片转换为 16x16 像素
3.  我使用 *.ico 和 32x32 和 16x16 像素
4.  我将 .ico 转换为 jpeg 并尝试过。

请让我知道，我该如何克服这个问题。谢谢 ！

**系统详情：**

java.runtime.version - 1.7.0_11-b21
javafx.runtime.version - 2.2.4-b19
操作系统名称 - MS Win XP Professional
操作系统版本 - 5.1.2600 Service Pack 3 Build 2600
操作系统架构 - 32 位
显卡 - Intel® HD Graphics
显卡驱动程序 – igxpmp32.sys 版本 6.14.10.5384

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T17:49:14.543

原因似乎是 JavaFx 中的一个潜在错误。如果您将系统设置为低于 32 位的颜色，您的任务栏和标题栏图标会出现黑框。将您的系统设置为 32 位颜色将修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:52:27.720

以下对我有用：

```
Image image = new Image(<some valid image location here>);
stage.getIcons().setAll(image); 
```

这是一个示例应用程序：

```
import static javafx.application.Application.launch;
import javafx.application.*;
import javafx.scene.Scene;
import javafx.scene.image.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class IconApp extends Application {
  @Override public void start(Stage stage) {
    Image image = new Image(
      "http://icons.iconarchive.com/icons/tooschee/misc/128/Present-icon.png"
    );
    stage.getIcons().setAll(image);

    final VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().setAll(new ImageView(image));

    stage.setScene(new Scene(layout));
    stage.show();
  }

  public static void main(String[] args) { launch(args); }
}

// icon license (creative commons 3 with attribution): 
//   http://creativecommons.org/licenses/by-nc/3.0/
// icon attribution: 
//   http://tooschee.com/portfolio?worksCategory=icons 
```

以及应用程序的输出（您可以在标题栏的左上角看到舞台图标）：

![礼物图标](../Images/58ef28f101eabb65229d7bfa4ead792e.png)

该图标还显示在操作系统任务栏中：

![presenticonintaskbar](../Images/e0eba771b7e2a93e6df0a1ea09eddc57.png)

测试系统为 Windows 7、Java 8b77。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T13:20:50.823

如果您将显示器置于 16 位操作模式，即使在 Windows 7 上也可以重现此错误：屏幕分辨率 -> 高级设置 -> 显示器（选项卡）-> 颜色 = 16 位

似乎问题已在此处填写到 JavaFX 跟踪器中： [https](https://javafx-jira.kenai.com/browse/RT-28947) ://javafx-jira.kenai.com/browse/RT-28947由 Joe S. 来自另一个答案，但我不会打赌它已修复JDK8.

# jquery - 我无法通过 jquery json 解析修改数组

> ID：15279735
> 
> 赞同：0
> 
> 时间：2013-03-07T19:12:29.840
> 
> 标签：jquery, arrays, json

```
questions = new Array();

$.getJSON('questions.php', function(data){
    $.each(data , function(i,jsonData) {
        questions[1] = "hey";
    });
});

alert(questions[1]); 
```

这是代码。它不起作用，给了我一个“未定义”。我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:19:45.087

这是回调函数的典型用例。考虑以下示例：

```
function getQuestions(callback) {
    $.getJSON('questions.php', function(data){
        $.each(data , function(i,jsonData) {
            questions[1] = "hey";
        });
        callback(questions);
    });
}

getQuestions(function(data) {
    alert(data[1]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:19:06.080

您的“问题”数组未设置为任何内容，因此为“未定义”。在回调函数中添加警报代码或调用函数来提醒用户。

# facebook - 在 heroku 登录 ssh 公钥无法为 Facebook 应用程序生成

> ID：15279746
> 
> 赞同：2
> 
> 时间：2013-03-07T19:13:13.457
> 
> 标签：facebook, heroku

我下载了[Heroku Toolbelt](https://toolbelt.herokuapp.com/)，然后我运行了 cmd 并运行了命令`Heroku login`。

之后我根据[https://devcenter.heroku.com/articles/facebook#heroku-account-and-tools-setup输入了我的凭据](https://devcenter.heroku.com/articles/facebook#heroku-account-and-tools-setup)

我收到消息：

`Could not find an existing public key. Would you like to generate one? [Yn]`

我输入`y`然后我收到以下消息

```
Generating new SSH public key.

!    Could not generate key: 'ssh-keygen' is not recognized as an internal or e
xternal command,
 !    operable program or batch file. 
```

然后我做了更多的研究并运行了`ssh-keygen.exe`现在`..\Git\bin`

[但是我得到了和这里](https://stackoverflow.com/questions/14435939/public-key-application-error)一样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T20:10:02.760

您应该尝试运行 git 命令提示符。您可以在 \programfiles\git\Git Bash 下找到它。如果您没有 git，请从[http://git-scm.com/download/win](http://git-scm.com/download/win)安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T05:38:32.500

将 GIT **C:\Program Files (x86)\git\bin**添加到 Heroku 路径之前的 PATH 环境变量中，它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-06T06:18:07.070

今晚尝试 Heroku 时，我得到了同样的最终错误：在 Windows 下，这只是 %path% 的问题（错误的 heroku 安装包）。

解决方案：只需在 ssh.keygen.exe 目录中执行“heroku login”：C:\Program Files (x86)\Git\bin

然后一切正常，没有更多的变化。

# c# - System.Xml 无故需要

> ID：15279751
> 
> 赞同：4
> 
> 时间：2013-03-07T19:13:28.463
> 
> 标签：c#, .net

```
protected override DataTable internalExecuteTable(string SQL)
{
    DbDataReader reader = ExecuteReader(SQL);
    DataTable dt = new DataTable();
    dt.Load(reader);
    reader.Close();
    return dt;
} 
```

“internalExecuteTable”带有下划线，并引发“System.Xml”未引用的错误，我应该添加“System.Xml”引用。但为什么？

我使用上面的代码从 SQLite 数据库（System.Data.SQLite 包装器）中读取

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T19:21:07.460

您正在`System.Xml`间接使用。`DataTable`依赖于程序集中定义的类`System.Xml`。如果您查看该类的文档，或者如果您只是在 IDE 中探索它，您会注意到它包含许多用于读取和写入 XML 的方法，例如。

通过使用`System.Data.DataTable`，您还需要参考`System.Xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T12:14:36.737

DataTable is [according to MSDN](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx) declared as

```
[SerializableAttribute]
public class DataTable 
     : MarshalByValueComponent,
       IListSource,
       ISupportInitializeNotification,
       ISupportInitialize,
       ISerializable,
       IXmlSerializable 
```

`IXmlSerializable` declares Methods that use `XmlReader`, `XmlWriter` and `XmlSchema` for either in- or output, all of them declared respectively defined in System.Xml.dll.

If you dive into the code (using the official sources or IL/Decompiler) you may notice an attribute usage:

```
[XmlSchemaProvider("GetDataTableSchema")]
//...
public class DataTable : //... 
```

Unfortunately the MSDN guys didn't include that reference to `System.Xml` explicitly in the remarks section - maybe because the usual project templates include it anyways.

# sql - 如何检查 SQLDataReader 项是否为 DateTime os String 类型值？

> ID：15279752
> 
> 赞同：1
> 
> 时间：2013-03-07T19:13:35.223
> 
> 标签：sql, vb.net, csv, datareader

我有一个将数据读取器转换为 CSV 的函数。SQL 返回**YYYY-MM-DD HH:MM:SS.000**而 .net 将其转换为**MM/DD/YYYY**值。我想检查数据读取器中的值是否为 DateTime 并将其转换回**YYYY-MM-DD HH:MM:SS.000**格式。

更新：

代码：

```
Public Function DR_To_CSV_Stream() As Boolean
    Dim FirstLine As String = ""
    Dim retVal As Boolean

    m_DebugMessage = m_DebugMessage & "DR_To_CSV_Stream: "

    If m_Datareader.Read Then 'CREATE HEADER NAMES
        m_DebugMessage = m_DebugMessage & "CREATE HEADER NAMES: "
        For intcount = 0 To m_Datareader.FieldCount - 1
            If intcount <> m_Datareader.FieldCount - 1 Then
                sw.Write(String.Format("""{0}"",", m_Datareader.GetName(intcount)))
                FirstLine = FirstLine + String.Format("""{0}"",", m_Datareader.Item(intcount))
            Else
                sw.Write(String.Format("""{0}""", m_Datareader.GetName(intcount)))
                FirstLine = FirstLine + String.Format("""{0}""", m_Datareader.Item(intcount))
            End If
        Next
        sw.WriteLine("")
        m_DebugMessage = String.Format("{0}WriteLine(FirstLine): {1}", m_DebugMessage, FirstLine)
        sw.WriteLine(FirstLine)

        Do While m_Datareader.Read() 'READ DATA AND CREATE ROWS
            m_DebugMessage = m_DebugMessage & "READ DATA AND CREATE ROWS: "
            For intcount = 0 To m_Datareader.FieldCount - 1
                If intcount <> m_Datareader.FieldCount - 1 Then
                    sw.Write(String.Format("""{0}"",", m_Datareader.Item(intcount)))
                Else
                    sw.Write(String.Format("""{0}""", m_Datareader.Item(intcount)))
                End If
            Next
            sw.WriteLine("")
        Loop
        m_Datareader.Close()
        m_DebugMessage = m_DebugMessage & "m_Datareader.Close(): "
        m_Datareader = Nothing
    Else
        m_DebugMessage = m_DebugMessage & "m_Datareader.Read = FALSE: "
    End If
    sw.Flush() 'COMMIT LAST SECTION TO WRITER
    If sw.BaseStream Is Nothing Then
        m_DebugMessage = m_DebugMessage & "  |  |NOTHING IN THE STREAM: "
    Else
        m_DebugMessage = m_DebugMessage & "  |  |THERE IS SOMETHING IN THE STREAM: "
    End If

    m_sr = New IO.StreamReader(sw.BaseStream)
    m_sr.BaseStream.Seek(0, System.IO.SeekOrigin.Begin)
    m_ReturnStream = m_sr.BaseStream

    If m_ReturnStream.CanRead Then
        retVal = True
        m_DebugMessage = m_DebugMessage & "  |  | 2ND TIME - THERE IS SOMETHING IN THE STREAM: "

    Else
        retVal = False
        m_DebugMessage = m_DebugMessage & "  |  |NOTHING IN THE RETURN STREAM: "
    End If

    Return retVal

End Function 
```

此函数将 datareader 转换为 CSV 流。在另一个函数中，我将此流转换为字符串并将其写入文件：

File.WriteAllBytes(outboundFileFullPath, Encoding.ASCII.GetBytes(data))

希望这有助于理解我的问题。

或者另一种方式是：将 MemoryStream 直接写入文件。我试过了，但没有用。谢谢！

更新#2 这是我根据 Romil 的建议所做的：

```
 Dim dateValue As Date
                    If intcount <> m_Datareader.FieldCount - 1 Then
                        If (DateTime.TryParse(m_Datareader.Item(intcount).ToString(), dateValue)) Then
                            sw.Write(String.Format("""{0}"",", dateValue.ToString("yyyy-MM-dd")))
                        Else
                            sw.Write(String.Format("""{0}"",", m_Datareader.Item(intcount)))
                        End If
                    Else
                        sw.Write(String.Format("""{0}""", m_Datareader.Item(intcount)))
                    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:56:56.917

您可以覆盖当前线程的默认区域性以指定所需的默认 DateTime 格式：

```
 Dim c As CultureInfo = New CultureInfo(System.Threading.Thread.CurrentThread.CurrentCulture.Name)
    c.DateTimeFormat.ShortDatePattern = "yyyy-MM-dd"
    c.DateTimeFormat.LongTimePattern = "HH:mm:ss.fff"
    System.Threading.Thread.CurrentThread.CurrentCulture = c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:27:32.787

利用`DateTime.TryParse`

```
string input = "2000-02-02";
    DateTime dateTime;
    if (DateTime.TryParse(input, out dateTime))
    {
        Console.WriteLine(dateTime);
    } 
```

[更多示例](http://www.dotnetperls.com/datetime-tryparse)

# ruby-on-rails - 嵌套在模型命名空间下的演示者的隔离测试

> ID：15279753
> 
> 赞同：2
> 
> 时间：2013-03-07T19:13:39.827
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec

我在 Rails 应用程序中有以下对象结构：

```
# app/models/model_a/model_b/model_c.rb
class ModelA < ActiveRecord::Base
  class ModelB < ActiveRecord::Base
    class ModelC < ActiveRecord::Base
    end
  end
end

# app/presenters/model_a/model_b/presenter_for_model_c.rb
class ModelA::ModelB::PresenterForModelC
end 
```

现在，当我想用​​ RSpec 单独测试 PresenterForModelC 时，我不想`require 'spec_helper'`为了快速运行测试（à la [Corey Haines](http://www.youtube.com/watch?v=bNn6M2vqxHE)或[Gary Bernhardt](https://www.destroyallsoftware.com/screencasts/catalog/test-isolation-and-refactoring)），所以我试图直接加载我的演示者：

```
# spec/presenters/model_a/model_b/presenter_for_model_c_spec.rb
require_relative '../../../app/presenters/model_a/model_b/presenter_for_model_c'
describe ModelA::ModelB::PresenterForModelC do
end 
```

但是，这失败了：

```
uninitialized constant ModelA (NameError) 
```

我不能只创建一个存根结构，例如：

```
# spec/presenters/model_a/model_b/presenter_for_model_c_spec.rb
class ModelA
  class ModelB
  end
end
require_relative '../../../app/presenters/model_a/model_b/presenter_for_model_c' 
```

因为当我运行完整套件时这会导致问题，因为加载模型时类不会从同一个父级继承。同样，我不能使用模块（出于同样的原因）。我也想避免：

```
# spec/presenters/model_a/model_b/presenter_for_model_c_spec.rb
class ModelA < ActiveRecord::Base
  class ModelB < ActiveRecord::Base
  end
end
require_relative '../../../app/presenters/model_a/model_b/presenter_for_model_c' 
```

因为现在这将迫使我需要 ActiveRecord，这将违背快速规范的目的。

我想出的唯一其他解决方案是将演示者移动到它自己的命名空间`Presenters::ModelA::ModelB::PresenterForModelC`，其中`Presenters::ModelA`将`Presenters::ModelB`是模块而不是类。这种方法的缺点是我必须创建一个目录`app/presenters/presenters`才能使自动加载工作，我认为这看起来有点乱。

还有其他选择吗？

# android - 如何在 android 视图中为所有内容正确定义大小？

> ID：15279754
> 
> 赞同：0
> 
> 时间：2013-03-07T19:13:44.473
> 
> 标签：android, android-linearlayout, android-relativelayout

我已经定义了一个包含 a `TextView`、 an`ImageView`和 a的布局`Button`。

在 xml 文件中，我尝试使用 LinearLayout 来包含这些视图。这可以正常工作（我可以看到 my `TextView`then my `ImageView`then my `Button`），但有时`TextView`太长了，我看不到 my`ImageView`和 my `Button`。

我试过`RelativeLayout`了，但没有产生预期的结果。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/splash" >

    <TextView
        android:id="@+id/storybox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:autoLink="all"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:text="Texte"
        android:textAlignment="center"
        android:textColor="#FFFFFF"
        android:textSize="20px" />

    <ImageView
        android:id="@+id/ivImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button android:id="@+id/image" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="Images"
        android:onClick="onButtonDownUpActivityClick" /> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:27:17.493

只需将您`LinearLayout`的`ScrollView`.

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:background="@drawable/splash"  >
...
....
....
...

     </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:31:01.953

您可能正在寻找`ScrollView`哪个布局元素用于容纳对于屏幕来说太大的项目。`ScrollView`应该只有一个孩子（你的）`RelativeLayout`，然后那个孩子包含更复杂的布局。

查看 Android 开发者指南了解更多信息：http: [//developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

# flash - ActionScript 和 Arduino

> ID：15279764
> 
> 赞同：0
> 
> 时间：2013-03-07T19:14:16.813
> 
> 标签：flash, actionscript, arduino

我正在使用带有两个[无源红外传感器](http://en.wikipedia.org/wiki/Passive_infrared_sensor)(PIR) 的 Arduino 使用 Flash 制作游戏。这个想法是，这些传感器将使 Flash 中舞台上的对象移动并跟随您的交互。有很多网站提供有关 Arduino 方面的信息，但导致问题的是 ActionScript 方面。我使用了 ActionScript 3 胶水，并在点亮由 Flash 中的按钮事件侦听器供电的 LED 之前将 Arduino 连接到 Flash，但没有这样的事情，不幸的是，对我来说没有任何在线内容。

我可以在 Arduino 方面获得一系列模拟值，显示物体离传感器的距离。如何显示一个对象，以便当您的手距离距离传感器 10 到 11 厘米时，该对象将显示在屏幕上的 x,y 坐标处？

# javascript - 如何比较ul li文本和数组值

> ID：15279767
> 
> 赞同：1
> 
> 时间：2013-03-07T19:14:20.260
> 
> 标签：javascript, jquery, html

我在 jQuery Vector Map 中工作，我必须在 UL li 标签中添加用户选择的区域名称。我这样做是因为，每当用户单击矢量图区域时，相应的区域值都会在 li 标签中更新。

现在我必须做条件，

如果用户选择的区域值已经存在于 li 列表项中。我必须显示警报（'用户选择的区域已经在列表中'）；

如果用户选择的区域值不在 li 项中，我必须将区域值添加到 li 项中。

这里的示例代码 - （用户选择的区域状态值我在“区域”中获得）

```
 var regionList = new Array('Alaska','Alabama','Arkansas','Arizona', etc....) /* sample array*/

   if( li item text value  == arrayvalue) /*exact condition statement I want*/
   {
       alert("user selected region already in the list")

   }
    else
   {
          $('<li>' + region + '</li>').appendTo('ul#location-selected');
   } 

   <ul id="location-selected" style="font-weight:bold;width:350px;padding-top:15px;color:red;"></ul> 
```

请帮我完成这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:15:22.223

```
var ul = document.getElementById('location-selected');
var lis = ul.getElementsByTagName('li');

for(var i = 0; i < lis.length; i++){
    if(lis[i].innerHTML === region) {
        isInList = true;
        break;
    }
}

if(isInList)
    alert("user selected region already in the list")
else {
    var newli = document.createElement('li');
    newli.innerHTML = region;
    ul.appendChild(newli);
} 
```

jQuery：

```
var ul = $('#location-selected');
var lis = ul.children('li');

var isInList = false;
for(var i = 0; i < lis.length; i++){
    if(lis[i].innerHTML === region) {
        isInList = true;
        break;
    }
}

if(isInList)
    alert("user selected region already in the list")
else
    var newli = $('<li></li>').html(region).appendTo(ul); 
```

# java - 将数组绘制到画布

> ID：15279777
> 
> 赞同：0
> 
> 时间：2013-03-07T19:14:43.967
> 
> 标签：java, arrays, java-canvas

我正在尝试将对象从数组中绘制到画布上，但问题是，我不知道该怎么做？这必须包括形状的位置和大小，并且会有不止一种形状。到目前为止我得到的代码（虽然效率低/不好）

```
public class MCanvas extends Canvas {
    private Object[] world = {};

    public void paint(Graphics g){  
        try{  
           // How to paint all the shapes from world here?
        } catch (NullPointerException e) {  
              System.out.println(e.toString());  
        }  
      } 

} 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:03:36.507

如果您使用从 扩展的对象`java.awt.Shape`，您可以使用`Graphics2D`上下文来翻译和绘制它们

由于（在 Java 1.3/4 左右），绘制引擎保证使用`Graphics2D`实例。

```
public void paint(Graphics g){  
    super.paint(g);
    Graphics2D g2d = (Graphics2D)g;
    for (Object o : world) {
        if (o instanceof Shape) {
            Shape shape = (Shape)o;
            //if the shape isn't created with 
            // a location, you can translate them
            shape.translate(...,...);
            g2d.setColor(....);
            g2d.draw(shape);
            //g2d.fill(...);
        }
    }
} 
```

您可能想查看[2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)以了解更多详细信息。

另外，使用 a`JPanel`代替，`Canvas`然后覆盖其`paintComponent`方法

查看[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)了解更多详情

# javascript - 无需 jQuery 即可拖动

> ID：15279781
> 
> 赞同：0
> 
> 时间：2013-03-07T19:15:01.100
> 
> 标签：javascript, html, draggable

我一直在寻找使 div 可拖动的 JavaScript 代码，而我发现的唯一一件事是您需要下载 jQuery，有没有办法使用 JavaScript 在没有 jQuery 的情况下使 div 可拖动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:41:59.257

绝对地。拖动实际上很容易。有很多步骤，但这里有一个破败：

*   首先，要使元素可拖动，只需添加`draggable`如下属性：
    `<div draggable="true">`. 请注意，默认情况下图像和链接是可拖动的 - 在某些情况下，您可能希望`draggable="false"`在它们上设置属性。

*   现在，当它们被拖动时，您需要做一些事情。在元素上设置`dragstart`事件侦听器。在这种情况下，您可能希望包含如下代码：

```
evt.dataTransfer.clearData(); // clear any default data
evt.dataTransfer.setData("Text","This is some text");
somevar = this; // store the element being dragged 
```

*   接下来，您需要处理将元素拖到有效目标上时发生的情况。这是唯一有点复杂的部分，因为有两个事件可以做到这一点：`dragenter`和`dragover`. 第一个在您实际进入目标时触发，而第二个则在您实际进入目标时触发`mousemove`。您通常希望两者都发生相同的事件。在这种情况下，要使目标成为有效的放置点，您必须调用`evt.preventDefault()`and `return false`（因为默认操作是不允许放置）

*   最后，将`drop`事件附加到目标元素。当您将拖动的元素放在适当的区域时，将触发此事件。

或者，您还可以将`dragend`事件添加到源元素。当元素不再被拖动时，这将被触发，无论它是否成功删除。`dragleave`如果您远离放置目标，也会出现这种情况。

如果您需要进一步的帮助，请告诉我，但我希望这已经解释了如何做到这一点。现在，一个非常基本的例子：

```
<div id="source" draggable="true" style="background:#f88">Drag me</div>
<div id="target" style="background:#88f;padding:5px">Drop here</div>
<script type="text/javascript">
    var source = document.getElementById('source'),
        target = document.getElementById('target'),
        dragging = null, // the element being dragged
        addEvent = function(source,types,handler) {
            // this is just a standard cross-browser event registration function
            // it can handle more than one type at once
            var typearr = types.split(" "), l = typearr.length, i;
            for( i=0; i<l; i++) {
                if( source.addEventListener)
                    source.addEventListener(typearr[i],handler,true);
                else
                    source.attachEvent("on"+typearr[i],handler,true);
            }
        };
    addEvent(source,"dragstart",function(evt) {
        evt = evt || window.event;
        evt.dataTransfer.clearData();
        dragging = this;
        setTimeout(function() {dragging.style.opacity=0.5;},1);
        // ^ tiny pause so browser can get the right drag image
    });
    addEvent(target,"dragenter dragover",function(evt) {
        if( dragging) {
            this.style.backgroundColor = "#8f8";
            evt = evt || window.event;
            if( evt.preventDefault) evt.preventDefault();
            return false;
        }
    });
    addEvent(target,"dragleave",function() {this.style.backgroundColor = "#88f";});
    addEvent(target,"drop",function() {
        if( dragging) {
            this.appendChild(dragging);
            this.style.backgroundColor = "#88f";
            dragging = null;
            if( evt.preventDefault) evt.preventDefault();
            return false;
        }
    });
    addEvent(source,"dragend",function() {this.style.opacity=1;});
</script> 
```

这是一个小提琴[。](http://jsfiddle.net/VGzrC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:18:44.250

就在这里。但是您必须处理浏览器的差异。

[http://www.w3.org/html/wg/drafts/html/master/editing.html#dnd](http://www.w3.org/html/wg/drafts/html/master/editing.html#dnd)

我强烈推荐你使用 JQuery。没有理由不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:20:21.687

由于jquery是google托管的，所以不需要*下载*，直接引用即可：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

有关谷歌托管 jquery 的更多信息：http: [//encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)

但是，如果你如此渴望使用纯 js，我*强烈*推荐这个教程： [http ://tech.pro/tutorial/650/javascript-draggable-elements](http://tech.pro/tutorial/650/javascript-draggable-elements)

# php - 这是创建帖子流的有效方法，还是有更好的方法？

> ID：15279783
> 
> 赞同：0
> 
> 时间：2013-03-07T19:15:01.950
> 
> 标签：php, mysql, sql, pdo, while-loop

```
$FSQL = $pdo->query('SELECT * FROM `connections` WHERE `uid`="'.$my_id.'" && `type`="1" ORDER by `id` DESC');
$myfriends = '`uid`="'.$my_id.'" ';
while($po = $FSQL->fetch(PDO::FETCH_ASSOC)){
    $myfriends .= ' || `uid`="'.$po['cid'].'"';
}

$dsk = $pdo->query("SELECT * FROM `posts` WHERE ".$myfriends." ORDER by `id` DESC LIMIT ".$limitCount); 
```

我一直在尝试创建一个不错的帖子流，我终于把我的代码写下来了。但是如果你有大量的连接（连接来自朋友、页面或事件），它似乎效率很低。

有人可以告诉我是否有更好的方法来做到这一点？

--顺便说一句：这已经很完美了，但我觉得我会遇到问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:21:44.137

`$FSQL = $pdo->query('SELECT * FROM`连接`WHERE`uid`="'.$my_id.'" &&`类型`="1" ORDER by`id`DESC');`

这很容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响。您应该使用参数和准备好的语句。请参阅[文档](http://php.net/manual/en/pdo.prepared-statements.php)。

**工作示例**

```
$sql = $pdo->prepare('SELECT * FROM `table` WHERE `uid`=:uid');
// Create the SQL statement, with the parameter prefixed by a ":".
$userID = "username";
// Grab the value you wish to bind to your parameter.
$sql->bindParam(':uid', $userID);
// Bind the values, using the bindParam method.
$sql->execute();
// Execute the statement with the parameters bound to the SQL query. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:24:47.693

你不想使用子查询？像这样的东西...

```
$dsk = $pdo->query(
    "SELECT *
       FROM `posts` 
      WHERE uid IN (
            SELECT cid
              FROM `connections` 
             WHERE `uid`="'.$my_id.'" && `type`="1"
          ) 
      ORDER BY `id` DESC LIMIT " . $limitCount); 
```

`*`并且在不需要所有字段时尽量不要使用。

# php - 用 PHP 生成的 XML 中的 PHP 代码

> ID：15279784
> 
> 赞同：0
> 
> 时间：2013-03-07T19:15:03.020
> 
> 标签：php, xml, variables

我对 PHP 文件生成的 XML 数据有疑问。

这是我的代码：

```
$requestXmlBody .= "<PictureURL>";

    //find black

  while($row = mysql_fetch_object($ergebnis))
  {
    $posblack = strpos($row->image, $findBLACK);
    if ($posblack !== false) 
    {
    echo $row->image;
    }
  }
    $requestXmlBody .= "</PictureURL>"; 
```

此代码将生成 XML 代码

```
<PictureURL></PictureURL> 
```

但不是我从数据库中获取的名称。数据库查询正在工作，但我的问题是将它插入 XML 代码之间。通常像这样插入一个变量

```
$requestXmlBody .= '<PictureURL>$variable</PictureURL>'; 
```

我只是不知道如何将它包装在我的数据库查询中。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:19:18.407

像这样的东西？

```
while($row = mysql_fetch_object($ergebnis)) {
  $posblack = strpos($row->image, $findBLACK);
  if ($posblack !== false) {
    $requestXmlBody .= "<PictureURL>";
    $requestXmlBody .= $row->image;
    $requestXmlBody .= "</PictureURL>";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:18:31.700

您正在回显`$row->image`而不是附加到`$requestXmlBody`

将您的代码更改为：

```
$requestXmlBody .= $row->image; 
```

# ruby - 系统更新后更新所有 RVM 红宝石和宝石的最佳方式？

> ID：15279786
> 
> 赞同：8
> 
> 时间：2013-03-07T19:15:13.183
> 
> 标签：ruby, rvm, bundler, osx-mountain-lion, homebrew

我正在寻找一种更精简、更强大的方法来在操作系统更新后保持我的 rvm 环境完好无损。我正在使用 Mountain Lion、rvm 1.18.16 和 homebrew，它具有 readline、gettext、libxml2、libxslt、qt、gtk+——通常对我来说破坏的宝石是 nokogiri 和 capybara-webkit

现在两次更新 Mountain Lion 和 XCode 后，我的原生扩展 gem 和 Ruby 都遭到破坏，我不得不花时间让一切恢复正常。我不得不怀疑我是否遵循了在此类系统更新后更新所有 rvm 组件的最佳实践。

通常发生的情况是带有本机扩展的 gem 链接到不再可用的旧库，尤其是围绕 Mountain Lion 的 libxml 问题。这是我在所有项目中让我的系统重新联机所采取的基本步骤（我在 rvm 下安装了大约 8 个版本的 Ruby，所以这很乏味！）。

首先，通过 App Store 更新 Mountain Lion 和 XCode。

其次，更新自制软件：

```
brew update
brew upgrade 
```

然后列出你的红宝石并开始重新编译每一个...

```
rvm list
rvm reinstall ruby-1.9.2-p290
rvm reinstall ruby-1.9.3-p392
... 
```

注意：我确实尝试过：

```
rvm all do reinstall 
```

但这给了我这个错误：“重新安装：找不到命令”

接下来，逐步检查每个 ruby​​ 并对 gem 执行原始操作（这具有重新编译所有本机扩展 gem 的副作用）：

```
rvm use ruby-1.9.3-p392
gem pristine --all 
```

最后，转到每个项目并执行以下操作：

```
bundle install 
```

我不确定最后一步是否是绝对必要的——有些项目似乎还可以，有些则不然，但运行它似乎可以解决最后剩下的问题。

当然有一种更简化的方式来管理这个过程！？我只使用了 Mountain Lion 和 rvm 几个月，但在那段时间，两个系统更新已经杀死了我大部分工作的 Ruby 环境。由于我作为顾问的工作并且遇到了许多开发环境，我安装了很多 Ruby 版本，所以我真的很想把它归结为一个易于重复的过程。

有什么想法吗？以上可以进一步改进吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T02:58:15.290

你可以做：

```
rvm reinstall all 
```

附加`--force`以跳过问题。

请注意，将对`gem pristine`每个 gem 进行完全重新安装，您需要注意输出，因为它会通知您有关未能执行`pristine`操作的 gem。

# python - 如何在 script.py 中调用特定的 Python 版本——Windows

> ID：15279793
> 
> 赞同：8
> 
> 时间：2013-03-07T19:15:37.717
> 
> 标签：python, windows, python-2.7

我应该在 script.py 的顶部放置哪一行文本来调用我需要使用的特定 Python 版本？

我在 Windows XP 上有两个版本的 Python，2.6.5 和 2.7.2。它们每个都有自己的特殊模块，并由单独的应用程序安装。我的脚本放在桌面上，方便我双击运行。

问题是我的所有脚本都调用了 2.6.5，这对于使用随 2.6.5 安装的模块的脚本来说很好，但我的用于 2.7.2 的脚本无法运行。他们在没有我需要导入的模块的情况下调用 Python 2.6.5。

我试过在没有和没有 #! 的情况下输入各种标题！在需要时调用 2.7.2，但要么我的语法错误，要么无法在 Windows 下指定。谁能告诉我需要添加到脚本中的行的精确语法。2.7.2 的 python.exe 存储在 C:\OSGeo4W\bin 下

感谢您让我知道在 script.py 顶部放置哪一行来调用我需要使用的确切版本的 Python。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T19:23:25.913

如果您在系统上安装了 Python 3.3，它会为 Python 脚本添加一个新的启动器，这意味着您可以使用 shebang 行：

```
#!python2.7
print "Hello" 
```

或者

```
#!python3.3
print("World") 
```

将工作并运行适当的 python，或者您可以指定 Python 解释器的完整路径或创建一个定义特定 Python 解释器缩写的 ini 文件。

有关 Windows shebang 行中可用的不同选项，请参阅[PEP 397](http://www.python.org/dev/peps/pep-0397/)。

如果您不想安装 Python 3.3，那么您也可以[单独安装启动器](https://bitbucket.org/vinay.sajip/pylauncher/downloads)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:23:09.750

与其将脚本本身放在桌面上，不如在桌面上放置一个快捷方式。该过程在 [techrepublic.com](http://www.techrepublic.com/article/quick-tip-create-application-shortcuts-for-the-windows-run-command/5034562)的一篇文章中进行了描述。指定适当的解释器作为要运行的程序，并在同一字段中列出您的`.py`文件之一作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:18:58.437

Windows 上没有“shebang”表示法。

您需要更改文件的文件关联`.py`才能使用 2.7.2 安装（“打开方式”、“默认使用应用程序”）。

# javascript - Vimeo API - Froogaloop. $f 未定义

> ID：15279796
> 
> 赞同：7
> 
> 时间：2013-03-07T19:15:40.297
> 
> 标签：javascript, jquery, vimeo, froogaloop

使用 api 添加一个在页面上播放 1 个 vimeo 视频的按钮。

我将 Froogaloop 插件添加到我的 plugins.js 文件中，并在我的 main.js 文件中调用它。

这是我的代码

```
ready = function(player_id) {
  var playButton, player;
  player = $f(player_id);
  playButton = $('#playButton');

  return playButton.on('click', function(e) {
    e.preventDefault();
    player.api('play');
  });
};

$f(document.getElementById('player')).addEvent('ready', ready); 
```

我遇到的问题是在此之后的任何脚本都不会运行。JSHint 给我的错误是`'$f' is not defined`

我已经尝试定义 ( `$f = ''`)this，但它只是破坏了功能（这是有道理的，为什么会破坏它）。有没有人遇到过这个问题？你知道修复吗？

另请注意，上述代码块有效。它必须是我的主 js 文件中的最后一件事，否则它会破坏之后的所有内容。它也不会通过 JSHint。我得到两个`'$f' is not defined.`错误。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T17:00:17.197

我遇到了这个问题，因为我在包含 froogaloop.js 之前包含了我的脚本。

似乎 $f 是在那个js上定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T02:32:57.760

如果错误只是 JSHint，您可以在文件顶部添加以下注释以抑制警告：

```
/*global $f:false */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T16:16:37.653

您必须连接库

```
<script src="http://a.vimeocdn.com/js/froogaloop2.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-05T20:49:45.463

正如[drcord](https://stackoverflow.com/users/1291935/drcord)在他对这个[类似问题的](https://stackoverflow.com/questions/30202865/froogaloop-is-not-defined)[回答](https://stackoverflow.com/a/30202917/2675925)中指出的那样：

> 您要么在此代码之后加载 jQuery，要么不在。您需要在此脚本之前包含 jQuery。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js></script> 
```

# facebook-graph-api - 获取所有喜欢帖子的朋友的ID

> ID：15279798
> 
> 赞同：0
> 
> 时间：2013-03-07T19:15:44.807
> 
> 标签：facebook-graph-api, facebook-like

我正在使用 Facebook FQL 查询`stream`表。我想获取喜欢我的帖子的朋友的所有用户 ID 的列表。这是我的查询：

```
select post_id,likes.friends, likes.count from stream where source_id = me() and likes.count > 0 limit 200" 
```

但是，我最多只能获得 4 个朋友 ID，即使`likes.count > 4`，这与`likes.sample`.

这是一个错误，还是 FQL 的限制？如果我无法在此处获得喜欢的人的完整列表，我应该查看哪个表？如果这对 FQL 不可行，我如何在 Graph API 中进行类似的查询？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:29:40.273

`stream`在和`like`表上使用多查询

```
{"posts": "select post_id, likes.count from stream where source_id = me() and likes.count > 0 limit 200",
"friends_who_like_posts":"select user_id FROM like WHERE post_id IN (SELECT post_id FROM #posts) AND user_id IN (SELECT uid2 FROM friend WHERE uid1 = me() )"
} 
```

# android - ClassNotFoundException 尽管类似乎仍然存在

> ID：15279806
> 
> 赞同：0
> 
> 时间：2013-03-07T19:16:14.320
> 
> 标签：android

我有一个应用程序

```
public class mainactivity extends Activity implements View.OnClickListener
{
... 
```

我在那个清单中声明它。一切都编译并完美运行。然后我改变类如下：

```
public class mainactivity extends Activity implements View.OnClickListener , MoPubInterstitialListener
{
...
+ extra code to do with "mopub" 
```

这个新代码可以编译，但是现在，只要我的启动屏幕活动关闭并移交给 mainactivity，我就会看到

```
03-08 10:47:40.380: I/dalvikvm(9013): Failed resolving Lcom/mycompany/myapp/mainactivity; interface 1127 'Lcom/mopub/mobileads/MoPubInterstitial$MoPubInterstitialListener;'
03-08 10:47:40.380: W/dalvikvm(9013): Link of class 'Lcom/mycompany/myapp/mainactivity;' failed
03-08 10:47:40.380: D/AndroidRuntime(9013): Shutting down VM
03-08 10:47:40.380: W/dalvikvm(9013): threadid=1: thread exiting with uncaught exception (group=0x40c7e1f8)
03-08 10:47:40.385: E/AndroidRuntime(9013): FATAL EXCEPTION: main
03-08 10:47:40.385: E/AndroidRuntime(9013): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mycompany.myapp/com.mycompany.myapp.mainactivity}: java.lang.ClassNotFoundException: com.mycompany.myapp.mainactivity
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.os.Looper.loop(Looper.java:137)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.ActivityThread.main(ActivityThread.java:4511)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at java.lang.reflect.Method.invokeNative(Native Method)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at java.lang.reflect.Method.invoke(Method.java:511)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at dalvik.system.NativeStart.main(Native Method)
03-08 10:47:40.385: E/AndroidRuntime(9013): Caused by: java.lang.ClassNotFoundException: com.mycompany.myapp.mainactivity
03-08 10:47:40.385: E/AndroidRuntime(9013):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.Instrumentation.newActivity(Instrumentation.java:1026)
03-08 10:47:40.385: E/AndroidRuntime(9013):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
03-08 10:47:40.385: E/AndroidRuntime(9013):     ... 11 more 
```

我不知道如何进行。如果我尝试调试器，它似乎甚至没有执行 mainactivity.OnCreate() 的第一行。

编辑：我的清单中包含以下内容：

```
<activity android:name="com.mopub.mobileads.MoPubActivity"
 android:configChanges="keyboardHidden|orientation"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:21:17.787

# 类路径

如果这敲响了警钟，请继续阅读。

***诊断：***
这意味着编译器在过程中找到了这些类，`compile-time`但在你的类路径中没有找到这个类`runtime`

***医学：***
我以前有过这个，我不太确定步骤，但***让我把你放在正确的方向上。***

*   如果您使用的是 ADT 和 eclipse，请检查您`.classpath`的项目。
*   在**项目->构建属性**中检查**构建顺序**
***   检查您的 jar 是否包含在**构建路径中****

 **## 是图书馆项目

如果它`ComponentInfo`是库项目的一部分，那么`CardinalSin`手动将其包含在您的构建路径中是一个（真的！）。您***应该***`project properties->android`只在选项卡中添加一个库项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:24:40.587

您是否在 Manifest 中定义了 MoPub 活动？

```
<activity android:name="com.mopub.mobileads.MoPubActivity"
 android:configChanges="keyboardHidden|orientation"/> 
```

去看看[这个](http://help.mopub.com/customer/portal/articles/285194-android-integration-part-ii-interstitials)链接。它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T05:22:28.860

我遇到了类似的问题，我检查了 Java Build Path - Order and Export 下的 android-support-v4.jar 复选框。**

# photoshop - Photoshop 脚本 - 获取文档位深度

> ID：15279809
> 
> 赞同：1
> 
> 时间：2013-03-07T19:16:21.567
> 
> 标签：photoshop

我如何获得当前文档的位深度（8/16/32）？我正在使用 JavaScript。我查看了参考手册，但找不到任何属性或功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:11:25.713

尝试使用 bitsPerChannel

```
alert(activeDocument.bitsPerChannel)

returns "BitsPerChannelType.EIGHT" 
```

您可能想使用此函数来更改位深度

```
convertBitDepth(8)

function convertBitDepth(bitdepth)
{
   var id1 = charIDToTypeID( "CnvM" );
   var desc1 = new ActionDescriptor();
   var id2 = charIDToTypeID( "Dpth" );
   desc1.putInteger( id2, bitdepth );
   executeAction( id1, desc1, DialogModes.NO );
} 
```

# java - 在超级终端中从 Android 2.3.3 设备接收蓝牙串行端口（虚拟 COM 端口）数据

> ID：15279814
> 
> 赞同：1
> 
> 时间：2013-03-07T19:16:34.400
> 
> 标签：java, android

我正在开发一个包含蓝牙 SPP 连接的 Android 应用程序。[从 Android 发送的关于在 PC 上从 RFCOMM 接收字符串](https://stackoverflow.com/questions/8045214/receiving-string-from-rfcomm-on-pc-sent-from-android?rq=1)的帖子对我很有帮助。

甚至我在 Eclipse 中的日志也多次显示“写了 6 个字节中的 6 个字节”，然后套接字就关闭了。但是，我想使用超级终端在我的 PC 中接收（无论我发送什么）。我怎么做？如何在代码中指定虚拟 COM 端口？

我正在使用三星 SGH-T759 在 USB 调试模式下进行测试。

这是我的代码：

```
public class BluetoothActivity extends Activity {

private int bluetooth = 0;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bluetooth);
    TextView text = (TextView) findViewById(R.id.text);
    text.setText("Click on the button to access devices through Bluetooth");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_bluetooth, menu);
    return true;
}

public void bluetoothActivate(View view) {
    int REQUEST_ENABLE_BT = 1;
    int RESULT_ENABLE_BT  = 0;
    //TextView text = (TextView) findViewById(R.id.text);
    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    System.out.println("Button clicked...");
    if (mBluetoothAdapter == null) {
        //txtView.setText("This device does not support Bluetooth");
        CharSequence txt = "This device does not support Bluetooth";
        Toast toast = Toast.makeText(getApplicationContext(), txt, Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();

    }
    else {
        //CharSequence text = "Bluetooth is supported!!!";
        System.out.println("Bluetooth is supported!!!");
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            onActivityResult(REQUEST_ENABLE_BT, RESULT_ENABLE_BT, enableBtIntent);
        }
        else 
            bluetooth = 1;

        device_access(view);
    }
}

public void device_access(View view) {
    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    TextView text = (TextView) findViewById(R.id.text);
    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
    Spinner btDevices = (Spinner) findViewById(R.id.btDevices);

    System.out.println("Bluetooth devices...");

    if (bluetooth == 1)
        // If there are paired devices
        if (pairedDevices.size() > 0) {
            // Loop through paired devices
            System.out.println("Bluetooth paired devices...");
            final ArrayAdapter<CharSequence> mArrayAdapter = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_list_item_1);
            ArrayAdapter<CharSequence> deviceName = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_list_item_1);
            mArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            deviceName.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            for (BluetoothDevice device : pairedDevices) {

                // Add the name and address to an array adapter to show in a ListView
                mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                deviceName.add(device.getName());
            }
            btDevices.setVisibility(1);
            btDevices.setAdapter(mArrayAdapter);
            //txtView.append("\nPaired Bluetooth Devices Found...");

            /*// Create a BroadcastReceiver for ACTION_FOUND
            final BroadcastReceiver mReceiver = new BroadcastReceiver() {
                public void onReceive(Context context, Intent intent) {
                    String action = intent.getAction();
                    // When discovery finds a device
                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                        // Get the BluetoothDevice object from the Intent
                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                        // Add the name and address to an array adapter to show in a ListView
                        mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                    }
                }
            };
            // Register the BroadcastReceiver
            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
            registerReceiver(mReceiver, filter); // Don't forget to unregister during onDestroy
             */         

            String[] dvc = btDevices.getSelectedItem().toString().split("\n");
            final UUID SERIAL_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); //UUID for serial connection
            String mac = "90:00:4E:DC:41:9D"; //my laptop's mac adress
            //mac = dvc[1];
            text.append("\n Data sent to " + btDevices.getSelectedItem().toString());
            BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(mac); //get remote device by mac, we assume these two devices are already paired

            // Get a BluetoothSocket to connect with the given BluetoothDevice
            BluetoothSocket socket = null;
            OutputStream out = null;
            InputStream inp = null;
            //try {
            //socket = device.createRfcommSocketToServiceRecord(SERIAL_UUID);
            Method m;
            try {
                m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
                socket = (BluetoothSocket) m.invoke(device, 1); 
            } catch (NoSuchMethodException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //}catch (IOException e) {}

            try {     
                mBluetoothAdapter.cancelDiscovery();
                socket.connect(); 
                out = socket.getOutputStream();
                inp = socket.getInputStream();
                //now you can use out to send output via out.write
                String outputValue = "Hi...\n",inputValue;
                byte[] op = outputValue.getBytes(),buffer = null;
                int inpBytes;
                for (int i=0; i<1000000; i++) {
                    out.write(op);
                    out.flush();
                }   
                System.out.println("Data written!!");
                /*while (true) {
                    try {
                        // Read from the InputStream
                        inpBytes = inp.read(buffer);

                        inputValue = buffer.toString();
                        text.append(inpBytes+ " " + inputValue);

                    } catch (IOException e) {

                    }

                }*/ }catch (IOException e) {} finally {
                    try {
                        socket.close();
                        System.out.println("Socket closed...");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
                }
        }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:05:00.830

我自己解决了。我必须使用 listenUsingRfcommWithServiceRecord(NAME,SERIAL_UUID) 在笔记本电脑上注册手机的 SPP 功能。然后，我的笔记本电脑分配了一个 COM 端口，用于与我的手机进行 SPP 通信。然后，我在AccessPort137（另一个类似于超级终端的应用程序，在某些方面比那个更好）中指定了这个端口，并正确建立了通信。我的工作代码如下：

```
package com.example.bluetoothtest;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Set;
import java.util.UUID;

import com.example.bluetoothtest.R;
import com.example.bluetoothtest.DynamicGraph;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;

import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.Gravity;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ProgressBar;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class BluetoothActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.bluetoothtest.MESSAGE";
    public int bluetooth = 0, mState = 0;
    public boolean runThread = false;
    private TextView text;
    public static final UUID SERIAL_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); //UUID for serial connection
    public static final int STATE_DISCONNECTED = 0;
    public static final int STATE_CONNECTED = 1;
    public static final int MESSAGE_READ = 2;
    public static final int START_INTENT = 3;
    public static final int REQ_CODE_DYNAMIC = 4;

    public static BluetoothAdapter mBluetoothAdapter = null;
    public static BluetoothDevice device = null;

    BluetoothServerSocket mmServerSocket = null;
    BluetoothSocket socket = null,finalSocket = null;
    OutputStream out = null;
    //InputStream aStream = null;
    InputStreamReader aReader = null;
    BufferedReader mBufferedReader = null;

    ConnectedThread con = null;
    AcceptThread accept = null;
    ConnectThread connect = null;

    Intent intent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bluetooth);

        if (con != null) {con.cancel(); con = null;}

        mState = STATE_DISCONNECTED;

        // Start the thread to listen on a BluetoothServerSocket
        if (accept!= null) {
            accept = null;
        }

        text = (TextView) findViewById(R.id.text);
        text.setText("Click on the button to access devices through Bluetooth");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_bluetooth, menu);
        return true;
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        runThread = false;
    }

    public void bluetoothActivate(View view) {
        int REQUEST_ENABLE_BT = 1;
        int RESULT_ENABLE_BT  = 0;

        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        System.out.println("Button clicked...");
        if (mBluetoothAdapter == null) {

            CharSequence txt = "This device does not support Bluetooth";
            Toast toast = Toast.makeText(getApplicationContext(), txt, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();

        }
        else {

            System.out.println("Bluetooth is supported!!!");
            if (!mBluetoothAdapter.isEnabled()) {
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                onActivityResult(REQUEST_ENABLE_BT, RESULT_ENABLE_BT, enableBtIntent);
            }
            else 
                bluetooth = 1;

            device_access(view);
        }
    }

    public void bluetoothDisconnect(View view) {

        runThread = false;  
        con.cancel();
        //connect.cancel();
        System.out.println("Connection disconnected");
        text.append("\n Connection disconnected");
    }

    public void device_access(View view) {

        System.out.println("Bluetooth devices...");

        if (bluetooth == 1)  {

            //String mac = "F0:08:F1:36:D3:5B"; //my other phone's mac adress
            String mac = "90:00:4E:DC:41:9D"; //my laptop's mac adress
            //String mac = "A0:4E:04:B8:1D:62";
            //mac = dvc[1];
            //text.append("\n Data sent to " + btDevices.getSelectedItem().toString());

            //device = mBluetoothAdapter.getRemoteDevice(mac); //get remote device by mac, we assume these two devices are already paired

            //text.append("device = " + device);
            text.append("\n Bluetooth started...");
            System.out.println("Bluetooth Started...");
            //ensureDiscoverable();

            String backup_file = "dynamic_bluetooth.csv";

            intent = new Intent(this, DynamicGraph.class);
            intent.putExtra(EXTRA_MESSAGE, backup_file);

            System.out.println("Dynamic intent about to start...");

            /*connect = new ConnectThread(device);
            connect.start();*/

                    CheckBox plotGraph = (CheckBox) findViewById(R.id.plotGraph);
            if (plotGraph.isChecked())
                startActivityForResult(intent,REQ_CODE_DYNAMIC);
            else {
                accept = new AcceptThread();
                accept.start();
            }

        }

    }

    private class ConnectThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;

        public ConnectThread(BluetoothDevice device) {
            this.mmDevice = device;
            BluetoothSocket tmp1 = null;
            try {
                tmp1 = device.createRfcommSocketToServiceRecord(SERIAL_UUID);
            } catch (IOException e) {
                e.printStackTrace();
            }
            mmSocket = tmp1;
        }

        @Override
        public void run() {
            setName("ConnectThread");
            mBluetoothAdapter.cancelDiscovery();
            try {
                mmSocket.connect();
                System.out.println("Connected with the device");
            } catch (IOException e) {
                try {
                    mmSocket.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }

                return;

            }
            /*synchronized (PrinterService.this) {
                mConnectThread = null;
            }*/
            //connected(mmSocket, mmDevice);
        }

        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) {
                Log.e("PrinterService", "close() of connect socket failed", e);
            }
        }
    }

    private void ensureDiscoverable() {

        if (mBluetoothAdapter.getScanMode() !=
                BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
            Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
            discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
            startActivity(discoverableIntent);
        }
        System.out.println("Device set discoverable");

        text.append("\n Device set discoverable");
        return;
    }

    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {

            case MESSAGE_READ:
                /*byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);*/
                //float readM = Float.parseFloat(readMessage);

                System.out.println("Into handler...");
                String readMessage = (String) msg.obj;
                text.append("\n" + readMessage);
                try{
                    float readM = Float.parseFloat(readMessage);
                    text.append(" " + readM);
                }catch (NumberFormatException e) {
                    text.append(" - Number Format Exception!!");
                    e.printStackTrace();
                }
                break;

            case START_INTENT:
                System.out.println("Dynamic intent about to start...");
                //startActivityForResult(intent,REQ_CODE_DYNAMIC);
                break;
            }

        }

    };

    private class AcceptThread extends Thread {

        public AcceptThread() {

            BluetoothServerSocket tmp = null;

            try {
                System.out.println("Listening...");
                tmp = mBluetoothAdapter.listenUsingRfcommWithServiceRecord("SPP", SERIAL_UUID);

            }catch (IOException e) {
                System.out.println("Listening Failed");

            }

            mmServerSocket = tmp;
            if (mmServerSocket != null)
                System.out.println("Server socket established: tmp = " + tmp);
            else
                System.out.println("Server socket NOT established: tmp = " + tmp);

        }

        public void run() {

            // Get a BluetoothSocket to connect with the given BluetoothDevice
            try {     
                //socket = mmServerSocket.accept();

                System.out.println("AcceptThread Run");
                while (true) {
                    if ((mmServerSocket != null) && (mState != STATE_CONNECTED)) {  
                        try {
                            socket = mmServerSocket.accept();
                            device = socket.getRemoteDevice();
                        } catch (IOException e) {
                            System.out.println("Socket not received");
                            break;
                        }

                        if (socket!= null)  {

                            System.out.println("Device Address: " + device.getAddress());
                            runThread = true;
                            con = new ConnectedThread(socket);
                            con.start();
                            mState = STATE_CONNECTED;

                            break;
                        }
                    }
                    else {
                        System.out.println("Code incomplete. Repeat Listening");
                        break;
                    }

                }
            } 
            finally {
                /*try {
                                con.cancel();
                                mmServerSocket.close();
                                System.out.println("Socket closed...");
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                System.out.println("Server Socket close problem...");
                                e.printStackTrace();
                            } */
            }
        }

        public void cancel() {

            try {
                mmServerSocket.close();
                accept.start();
            } catch (IOException e) {

            }
        }
    }

    private class ConnectedThread extends Thread {

        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket) {

            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {

            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {

            byte[] buffer = new byte[1024],readBuffer = new byte[1024];
            int bytesAvailable,readBufferPosition;
            char[] readMsg = new char[8192];
            /*try {
                aStream = socket.getInputStream();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                System.out.println("InputStream problem...");
                e.printStackTrace();
            }*/

            /*aReader = new InputStreamReader( mmInStream );
            mBufferedReader = new BufferedReader( aReader );*/ 

            String aString = "---";

            System.out.println("Waiting for input...");

            /*try {
                Thread.sleep(10000);
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                System.out.println("Sleeping problem...");
                e1.printStackTrace();
            }*/

            while (runThread) {
                try {

                    /*aReader = new InputStreamReader( mmInStream );

                    mBufferedReader = new BufferedReader( aReader );
                    //aString = mBufferedReader.readLine();

                    mBufferedReader.read(readMsg);
                    aString = new String(readMsg);
                    readMsg = new char[8192];
                    System.out.println(aString);*/

                    aString = "---";
                    byte delimiter = 'N';     //New line
                    readBuffer = new byte[1024];
                    readBufferPosition = 0;
                    bytesAvailable = mmInStream.read(buffer);
                    boolean copied = false;

                    if (bytesAvailable > 0)
                        System.out.println(bytesAvailable + " bytes available");
                    else
                        System.out.println("Bytes not available");

                    for(int i=0;i<bytesAvailable;i++)
                    {
                        byte b = buffer[i];
                        System.out.println("Byte = "+ b);
                        if(b == delimiter)
                        {
                            byte[] encodedBytes = new byte[readBufferPosition];
                            System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);
                            aString = new String(encodedBytes, "US-ASCII");
                            readBufferPosition = 0;
                            copied= true;
                            break;

                        }
                        else
                        {
                            readBuffer[readBufferPosition++] = b;
                        }
                    }

                    /*aString = new String(buffer);
                    aString = aString.trim();*/
                    //float rx_data = Float.parseFloat(aString);

                    System.out.println("aString = " + aString);

                    /*mHandler.obtainMessage(BluetoothActivity.MESSAGE_READ, bytes, -1, buffer)
                    .sendToTarget();*/

                    //buffer = new byte[1024];

                    if (copied && (aString != "---"))
                        mHandler.obtainMessage(BluetoothActivity.MESSAGE_READ, aString)
                        .sendToTarget();

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    System.out.println("mBufferedReader problem...");
                    e.printStackTrace();
                    break;
                }

            }

            //cancel();

            /*out = socket.getOutputStream();
            //now you can use out to send output via out.write
            String outputValue = "Hi...\n",inputValue;
            byte[] op = outputValue.getBytes(),buffer = null;
            int inpBytes;
            for (int i=0; i<1000000; i++) {
                out.write(op);
                out.flush();
            }   
            System.out.println("Data written!!");

            while (true) {
    try {
        // Read from the InputStream
        inpBytes = inp.read(buffer);

        inputValue = buffer.toString();
        text.append(inpBytes+ " " + inputValue);

    } catch (IOException e) {

    }

} */
        }

        public void cancel() {
            try {

                /*aReader.close();
                mBufferedReader.close();*/
                runThread = false;
                mState = STATE_DISCONNECTED;
                mmSocket.close();
                mmServerSocket.close();
                System.out.println("Socket closed in thread...");
                accept = new AcceptThread();
                accept.start();
            } catch (IOException e) {
                System.out.println("Socket close problem...");
            }
        }

    }

} 
```

如果您想要双向通信，请取消注释并运行 ConnectThread。我只需要接收价值；所以，我已经注释掉了。但是，必须运行此线程才能为您的手机与您的笔记本电脑建立一个 COM 端口。这是因为，只有当这样的使用蓝牙 SPP 的应用程序在手机中运行并尝试与笔记本电脑配对（使用此 ConnectThread）时，笔记本电脑才会注册手机的 SPP 功能。要查看此内容并从笔记本电脑一侧启用 SPP，请执行以下操作：

1.  右键单击任务栏中的蓝牙图标，然后单击“显示蓝牙设备”。

2.  在打开的窗口中，找到您的手机（请记住，在运行此 SPP 应用程序之前，它必须已经与您的笔记本电脑配对），右键单击它并转到“属性”。

3.  转到“服务”选项卡，您将找到一个新条目，该条目由您在 listenUsingRfcommWithServiceRecord() 方法中作为第一个参数提供的名称调用。对我来说，它是“SPP”。

4.  检查该新服务以在您的笔记本电脑和手机之间启用 SPP。

5.  现在，如果您检查“硬件”选项卡，将指定一个 COM 端口，您可以在超级终端或任何此类应用程序中使用它并开始通信。

另外，请记住，这在 Windows 8 中是不可能的！我在这里提到的一切都与 Windows 7 相关。我没有在 Windows XP 中这样做，尽管它几乎是相同的方法。

我希望我的解决方案有所帮助！而且，我欢迎这些方面的专家对我的（新手）代码发表评论——毕竟，我猜 StackOverflow 主要是为了这个目的。

# javascript - EmberJS：具有动态段（路由器）但不存储的 ArrayController

> ID：15279817
> 
> 赞同：0
> 
> 时间：2013-03-07T19:16:50.527
> 
> 标签：javascript, ember.js

我想知道如何构建一个“简单”的应用程序：

```
/photos/ (shows all photos – via ArrayController but without a remote service)
/photos/1  ... /photos/2  (shows one photo) 
```

任何人都可以提供最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:47:21.467

您必须定义与您想要的 url 匹配的路由：

```
App.Router.map(function() {
    // this will give you ~/#/photos
    this.route('photos') 
    // this will give you ~/#/photos/1 (or whatever number)   
    this.route('photo', { path: '/photos/:photo_id' }); 
}); 
```

这是一个示例：http: [//jsfiddle.net/schawaska/AabL8/](http://jsfiddle.net/schawaska/AabL8/)

如果您想做嵌套视图，例如显示缩略图列表，当单击缩略图时，您会在列表下方看到其实际大小的图片，那么您必须使用路由资源进行稍微不同的操作，嵌套如下：

```
App.Router.map(function() {    
    this.resrouce('photos', function() {
        this.route('photo', { path: '/:photo_id' });    
    });
}); 
```

如果这样做，则必须`{{outlet}}`在“照片”模板中添加一个，并添加`Photos`负责单个照片对象的类的名称

*   `PhotoRoute`变成`PhotosPhotoRoute`
*   `data-template-name="photo"`变成`data-template-name="photos/photo"`

这是一个示例：http: [//jsfiddle.net/schawaska/JfRbf/](http://jsfiddle.net/schawaska/JfRbf/)

# php - PHP imagecolorat 从相同的 png 和 gif 图像返回不同的值

> ID：15279819
> 
> 赞同：1
> 
> 时间：2013-03-07T19:16:52.987
> 
> 标签：php, image-processing, png, gif

我正在制作 PHP 脚本，该脚本将从我从一些 GIF 格式的在线 Web 服务获得的图像中读取所有像素的颜色，并将颜色值插入 MySQL 数据库。我为开发创建了测试图像，并注意到我从 PNG 和 GIF 图像中获得了不同的值。有谁知道这是为什么以及如何解决这个问题？

图片：http: [//imgur.com/B79LHdx](http://imgur.com/B79LHdx)

png 演示： http: [//tinyurl.com/dxxltzm](http://tinyurl.com/dxxltzm)

gif 演示： http: [//tinyurl.com/c9a57xs](http://tinyurl.com/c9a57xs)

PNG代码：

```
<?php
include 'mysql.php';

$img = imagecreatefrompng("test1.png");
$hash = hash_file('md5', "test1.png");

$day = date("j");
$month = date("n");
$year = date("Y");
$hour = date("G");
$minute = date("i");

mysql_query("INSERT INTO pictures (year, month, day, hour, minute, hash) VALUES ('$year', '$month', '$year', '$hour', '$minute', '$hash')");

$result = mysql_query("SELECT * FROM pictures WHERE hash = '$hash' LIMIT 1");
while ($data = mysql_fetch_assoc($result)) {
    $id = $data['id'];
}
mysql_query("START TRANSACTION");
if($img) {
    $width = imagesx($img);
    $height = imagesy($img);

    $w = 1;
    $h = 1;

    while ($h < $height) {
        while ($w < $width) {
            $rgb = imagecolorat($img, $w, $h);
            $r = dechex(($rgb >> 16) & 0xFF);
            $g = dechex(($rgb >> 8) & 0xFF);
            $b = dechex($rgb & 0xFF);

            if (strlen($r) == 1) {
                $r = "0" . $r;
            }
            if (strlen($g) == 1) {
                $g = "0" . $g;
            }
            if (strlen($b) == 1) {
                $b = "0" . $b;
            }

            echo "<span style='color: #" . $r . $g . $b . "'>" . $r . $g . $b . "</span>_";
            mysql_query("INSERT INTO points (id_picture, x, y, value) VALUES ('$id', '$w', '$h', '$value')");
            $w++;
        }
        echo "<br />";
        $h++;
        $w = 1;
    }
mysql_query("COMMIT");
}

?> 
```

GIF 代码：

```
<?php
include 'mysql.php';

$img = imagecreatefromgif("test1.gif");
$hash = hash_file('md5', "test1.gif");

$day = date("j");
$month = date("n");
$year = date("Y");
$hour = date("G");
$minute = date("i");

mysql_query("INSERT INTO pictures (year, month, day, hour, minute, hash) VALUES ('$year', '$month', '$year', '$hour', '$minute', '$hash')");

$result = mysql_query("SELECT * FROM pictures WHERE hash = '$hash' LIMIT 1");
while ($data = mysql_fetch_assoc($result)) {
    $id = $data['id'];
}
mysql_query("START TRANSACTION");
if($img) {
    $width = imagesx($img);
    $height = imagesy($img);

    $w = 1;
    $h = 1;

    while ($h < $height) {
        while ($w < $width) {
            $rgb = imagecolorat($img, $w, $h);
            $r = dechex(($rgb >> 16) & 0xFF);
            $g = dechex(($rgb >> 8) & 0xFF);
            $b = dechex($rgb & 0xFF);

            if (strlen($r) == 1) {
                $r = "0" . $r;
            }
            if (strlen($g) == 1) {
                $g = "0" . $g;
            }
            if (strlen($b) == 1) {
                $b = "0" . $b;
            }

            echo "<span style='color: #" . $r . $g . $b . "'>" . $r . $g . $b . "</span>_";
            mysql_query("INSERT INTO points (id_picture, x, y, value) VALUES ('$id', '$w', '$h', '$value')");
            $w++;
        }
        echo "<br />";
        $h++;
        $w = 1;
    }
mysql_query("COMMIT");
} 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:26:14.063

固定的。

代替：

```
$rgb = imagecolorat($img, $w, $h);
$r = dechex(($rgb >> 16) & 0xFF);
$g = dechex(($rgb >> 8) & 0xFF);
$b = dechex($rgb & 0xFF); 
```

我用这个：

```
$pixelrgb = imagecolorat($img,$w,$h);
$cols = imagecolorsforindex($img, $pixelrgb);
$r = dechex($cols['red']);
$g = dechex($cols['green']);
$b = dechex($cols['blue']); 
```

[https://bugs.php.net/bug.php?id=40801&edit=3](https://bugs.php.net/bug.php?id=40801&edit=3)

# c# - 在 Mono LdapException 上运行 Exchange EWS

> ID：15279823
> 
> 赞同：5
> 
> 时间：2013-03-07T19:16:56.517
> 
> 标签：c#, mono, exchange-server, exchangewebservices

我正在尝试通过 Mono（版本 2.10.8.1 和 3.0.6）在 debian 上使用 Exchange EWS 2 我正在使用 vs2012 在 Windows 8 上进行开发。

该程序在 Windows 上运行良好，我得到了预期的输出。

然而，在单声道上，我不断收到以下输出和异常。

```
<Trace Tag="AutodiscoverConfiguration" Tid="1" Time="2013-03-07 19:09:05Z">
Starting SCP lookup for domainName='example.com', root path=''
</Trace>
Connect Error

Unhandled Exception: LdapException: (91) Connect Error
System.Net.Sockets.SocketException: No such host is known
  at System.Net.Dns.hostent_to_IPHostEntry (System.String h_name, System.String[]          h_aliases, System.String[] h_addrlist) [0x00000] in <filename unknown>:0
  at System.Net.Dns.GetHostByName (System.String hostName) [0x00000] in <filename unknown>:0
  at System.Net.Dns.GetHostEntry (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0
  at System.Net.Dns.GetHostAddresses (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0
  at System.Net.Sockets.TcpClient.Connect (System.String hostname, Int32 port) [0x00000] in <filename unknown>:0
  at System.Net.Sockets.TcpClient..ctor (System.String hostname, Int32 port) [0x00000] in <filename unknown>:0
  at Novell.Directory.Ldap.Connection.connect (System.String host, Int32 port, Int32 semaphoreId) [0x00000] in <filename unknown>:0
[ERROR] FATAL UNHANDLED EXCEPTION: LdapException: (91) Connect Error
System.Net.Sockets.SocketException: No such host is known
  at System.Net.Dns.hostent_to_IPHostEntry (System.String h_name, System.String[] h_aliases, System.String[] h_addrlist) [0x00000] in <filename unknown>:0
  at System.Net.Dns.GetHostByName (System.String hostName) [0x00000] in <filename unknown>:0
  at System.Net.Dns.GetHostEntry (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0
  at System.Net.Dns.GetHostAddresses (System.String hostNameOrAddress) [0x00000] in <filename unknown>:0
  at System.Net.Sockets.TcpClient.Connect (System.String hostname, Int32 port) [0x00000] in <filename unknown>:0
  at System.Net.Sockets.TcpClient..ctor (System.String hostname, Int32 port) [0x00000] in <filename unknown>:0
  at Novell.Directory.Ldap.Connection.connect (System.String host, Int32 port, Int32 semaphoreId) [0x00000] in <filename unknown>:0 
```

显然它正在尝试查找它找不到的主机。我的 windows 和 linux 系统都使用相同的 dns 服务器，所以这不是导致问题的原因。

当它工作时，我通读了 Windows 上的跟踪 - 跟踪显示查找失败了几次，并且自动发现方法尝试了几个不同的 url，直到它找到一个有效的 url - 在单声道上，但它似乎在第一次之后倒下失败，这就是它的结束。

我已经尝试在单声道上使用 ews 进行谷歌搜索，但我还没有找到任何这样做的人，所以我不确定还有什么可以尝试的。

使用的代码如下 - 几乎所有代码都取自 [http://msdn.microsoft.com/en-us/library/exchange/dd633709(v=exchg.80).aspx上的代码示例](http://msdn.microsoft.com/en-us/library/exchange/dd633709(v=exchg.80).aspx)

```
class Program
{
    private static int verbose = 10;
    private static string loginEmail = "email@example.com";
    private static string password = "#############";

    static void Main(string[] args)
    {
        try
        {

            ServicePointManager.ServerCertificateValidationCallback = CertificateValidationCallBack;

            ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);

            service.Credentials = new WebCredentials(loginEmail, password);

            if (verbose >= 10)
            {

                service.TraceEnabled = true;
                service.TraceFlags = TraceFlags.All;

            }

            service.AutodiscoverUrl(loginEmail, RedirectionUrlValidationCallback);

            Console.WriteLine("AutoDiscover Completed");

            getContacts(service);

            Console.ReadLine();

        }
        catch (Exception e) {
            Console.WriteLine(e.Message);
            foreach (string key in e.Data.Keys)
            {
                Console.WriteLine(String.Format("{0}: {1}",key, e.Data[key]));
            }
            throw e;
        }

    }

    private static void getContacts(ExchangeService service){

        // Get the number of items in the Contacts folder.
        ContactsFolder contactsfolder = ContactsFolder.Bind(service, WellKnownFolderName.Contacts);

        // Set the number of items to the number of items in the Contacts folder or 1000, whichever is smaller.
        int numItems = contactsfolder.TotalCount < 1000 ? contactsfolder.TotalCount : 1000;

        // Instantiate the item view with the number of items to retrieve from the Contacts folder.
        ItemView view = new ItemView(numItems);

        // To keep the request smaller, request only the display name property.
        //view.PropertySet = new PropertySet(BasePropertySet.IdOnly, ContactSchema.DisplayName);

        // Retrieve the items in the Contacts folder that have the properties that you selected.
        FindItemsResults<Item> contactItems = service.FindItems(WellKnownFolderName.Contacts, view);

        // Display the list of contacts. 
        foreach (Item item in contactItems)
        {
            if (item is Contact)
            {
                Contact contact = item as Contact;

                Console.WriteLine();
                Console.WriteLine(contact.DisplayName);
                if (verbose >= 2)
                {
                    Console.WriteLine("    " + contact.Id);
                }

                try
                {
                    Console.WriteLine("    " + contact.EmailAddresses[EmailAddressKey.EmailAddress1].ToString());
                }
                catch (Exception e) 
                {
                    if (verbose >= 5)
                    {
                        Console.WriteLine("    " + "Email Address 1 Not Available : " + e.Message);
                    }
                }
            }
        }

    }

    #region taken from tutorial

    private static bool CertificateValidationCallBack(
        object sender,
        System.Security.Cryptography.X509Certificates.X509Certificate certificate,
        System.Security.Cryptography.X509Certificates.X509Chain chain,
        System.Net.Security.SslPolicyErrors sslPolicyErrors)
    {
        // If the certificate is a valid, signed certificate, return true.
        if (sslPolicyErrors == System.Net.Security.SslPolicyErrors.None)
        {
            return true;
        }

        // If there are errors in the certificate chain, look at each error to determine the cause.
        if ((sslPolicyErrors & System.Net.Security.SslPolicyErrors.RemoteCertificateChainErrors) != 0)
        {
            if (chain != null && chain.ChainStatus != null)
            {
                foreach (System.Security.Cryptography.X509Certificates.X509ChainStatus status in chain.ChainStatus)
                {
                    if ((certificate.Subject == certificate.Issuer) &&
                       (status.Status == System.Security.Cryptography.X509Certificates.X509ChainStatusFlags.UntrustedRoot))
                    {
                        // Self-signed certificates with an untrusted root are valid. 
                        continue;
                    }
                    else
                    {
                        if (status.Status != System.Security.Cryptography.X509Certificates.X509ChainStatusFlags.NoError)
                        {
                            // If there are any other errors in the certificate chain, the certificate is invalid,
                            // so the method returns false.
                            return false;
                        }
                    }
                }
            }

            // When processing reaches this line, the only errors in the certificate chain are 
            // untrusted root errors for self-signed certificates. These certificates are valid
            // for default Exchange server installations, so return true.
            return true;
        }
        else
        {
            // In all other cases, return false.
            return false;
        }
    }

    private static bool RedirectionUrlValidationCallback(string redirectionUrl)
    {
        // The default for the validation callback is to reject the URL.
        bool result = false;

        Uri redirectionUri = new Uri(redirectionUrl);

        // Validate the contents of the redirection URL. In this simple validation
        // callback, the redirection URL is considered valid if it is using HTTPS
        // to encrypt the authentication credentials. 
        if (redirectionUri.Scheme == "https")
        {
            result = true;
        }
        return result;
    }

    #endregion

} 
```

* * *

BeepBeep 的回答帮助我解决了这个问题。

在使用 BeepBeep 的建议后，我遇到了一个问题，即 Mono 似乎没有 dnsapi.dll（根据例外情况）。我现在通过跳过自动发现解决了这个问题。

为了做到这一点，我更换了

```
service.AutodiscoverUrl(loginEmail, RedirectionUrlValidationCallback); 
```

和

```
service.Url = new Uri("https://blah.com/ews/exchange.asmx"); 
```

然后我的证书出现了错误（异常表示“请求或解密错误”） - 可以说，您需要知道默认情况下 mono 不包含任何根 ca 证书，更多信息在这里：[Mono FAQ关于安全](http://www.mono-project.com/FAQ%3a_Security)

我选择了使用 mozroots 工具获得我想要的证书的更懒惰的方式。然而，这并没有按预期工作，并且错误仍然存​​在。

然后我也使用上述常见问题解答中的 tlstest 来确定问题 - 它与我正在使用的证书链有关（根被接受，但中间体未被接受）。然后，我使用 FAQ (certmgr) 中记录的第三个工具来安装证书。

之后，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:27:18.000

同样的问题并使用此代码解决：

```
ExchangeService service = new ExchangeService();
service.EnableScpLookup = false; 
```

# php - Apache .htaccess 配置问题中的多个 RewriteConditions

> ID：15279825
> 
> 赞同：0
> 
> 时间：2013-03-07T19:17:01.887
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在尝试重写不存在的 URL 以使用我的 index.php 文件，同时还将 HTTP:Authorization 环境变量附加到我的脚本中。到目前为止，我一次只能让一个或另一个工作。不是都。有人可以告诉我.htaccess 中的错误在哪里吗？

```
RewriteEngine on

# Get HTTP authorization
RewriteCond %{HTTP:Authorization} ^Basic.*

# Append to URL
RewriteRule (.*) index.php?_auth=%{HTTP:Authorization} [QSA,L]

# If a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Otherwise forward it to index.php
RewriteRule (.*) index.php?_auth=%{HTTP:Authorization} [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:18:09.290

首先，您的 .htaccess 在我的测试环境中运行良好。我得到`_auth`每个请求的论点。

但你不需要所有这些`RewriteCond`，只需要一个`RewriteRule`

```
RewriteRule .* index.php?_auth=%{HTTP:Authorization} [QSA,L] 
```

这会将所有请求重写为`index.php`，并将授权标头添加为`_auth`参数。

如果您只想使用`_auth`参数重写不存在的 URL，只需将`RewriteCond`s 添加到`RewriteRule`. `RewriteCond HTTP:Authorization`如果在您的情况下缓存是一个问题，请添加

```
RewriteEngine on

RewriteCond %{HTTP:Authorization} ^Basic
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php?_auth=%{HTTP:Authorization} [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:52:31.213

我很确定 Authorization 标头可以通过 PHP 访问，因此似乎没有必要将该值附加为查询参数。

查看[$_SERVER](http://www.php.net/manual/en/reserved.variables.server.php)超全局变量，也许关键**AUTH_TYPE**就是您要找的？

```
<?php $_SERVER['AUTH_TYPE']) ?> 
```

无论如何，如果您仍然坚持使用 .htaccess 解决方案，那么您实际上可以将整个第一条规则全部废弃；如果存在，_auth 参数将附加 Authorization 标头。

```
# If a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Otherwise forward it to index.php
RewriteRule (.*) index.php?_auth=%{HTTP:Authorization} [QSA,L] 
```

# php - 仅在一定时间内替换字符

> ID：15279826
> 
> 赞同：0
> 
> 时间：2013-03-07T19:17:04.767
> 
> 标签：php

我一直在谷歌搜索，但我无法弄清楚要使用哪些关键字。

我正在保存用户的出生日期，并且我想确保格式为 YYYY-MM-DD。
我在想类似的事情：

```
if(!ctype_digit(str_replace("-", "", $dob)) || strlen(str_replace("-", "", $dob)) != 8)
{
   echo "Incorrect format: date of birth";
} 
```

为此，我只需要使用 strlen() 替换三个 - 字符。如果大于或小于 3，则回显格式不正确。我如何实现这一目标？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:22:05.540

使用正则表达式怎么样？

```
if ( !preg_match( "/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/", $dob) )
{ 
    echo "Invalid date.";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:29:24.513

要查找许多示例，请搜索“验证日期”，或者在您的情况下，要查找 php 示例，请尝试“php validate date format”——您会看到大多数示例都是用正则表达式解决的，这就是您的票的事情。正则表达式可以帮助您验证日期、电子邮件地址格式、满足最低要求的密码输入（例如，至少 8 个字符、至少一个数字和一个大写字母等）

这是一个这样的例子：

```
if(preg_match('/\d{4}-\d{2}-\d{2}/',$date)){
   // good date
}else{
   // bad date
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T19:30:34.590

您还应该检查日期是否为实际日期；不仅仅是它*看起来*像一个实际的日期。

```
if (!preg_match("/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/D", $dob))
{ 
    echo 'Invalid date';
}

else
{

    list($year, $month, $day) = explode('-', $dob);

    if (!checkdate((int) $month, (int) $day, (int) $year))
    {
        echo 'Invalid date';
    }

} 
```

`1988-06-31`毕竟你不想接受。

# windows - 蓝牙服务发现和设备查询有什么区别？

> ID：15279829
> 
> 赞同：0
> 
> 时间：2013-03-07T19:17:11.027
> 
> 标签：windows, winapi, service, bluetooth

我正在使用 win32 套接字开发蓝牙应用程序。但我在 msdn 上看到他们有：

•Bluetooth 和 WSALookupServiceBegin 用于设备查询
•Bluetooth 和 WSALookupServiceBegin 用于服务发现

这个服务发现是什么？我的意思是，如果我有蓝牙设备，它应该提供蓝牙服务，对吗？还是我在这里混淆了事情？

有人可以解释一下吗？

我想在开始任何类型的编码之前得到一个很好的理解:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:23:12.860

> 这个服务发现是什么？我的意思是，如果我有蓝牙设备，它应该提供蓝牙服务，对吗？

是的。为了使用蓝牙技术，设备必须与使用所需服务所需的[蓝牙配置文件子集兼容。](http://en.wikipedia.org/wiki/Bluetooth_profile)

将其视为 IP 和端口号。虽然您需要 IP（蓝牙设备）来连接主机，但您仍然需要端口（蓝牙服务）才能连接和使用主机。蓝牙服务会告诉您设备的功能以及它可以做什么。

# javascript - 使用 jQuery 在大括号中获取无效的 HTML 代码

> ID：15279830
> 
> 赞同：5
> 
> 时间：2013-03-07T19:17:11.067
> 
> 标签：javascript, jquery, html

我有一些*无法更改*的（无效）HTML 代码：

```
<a href="#" id="text1"{some-data}>...</a>
<a href="#" id="text2"{some-other-data}>...</a> 
```

使用 jQuery，我选择两个锚点之一：

```
function someFunction(id) {
  $('text'+id)...;
} 
```

现在，我想得到大括号内的文本。所以，对于`id=1`这将意味着`some-data`，对于`id=2`这将是`some-other-data`。

我怎样才能做到这一点？

为了简单起见：一个元素中只有一个花括号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:30:38.023

所以，基本上你想得到'外部' html，然后搜索大括号之间的内容。

第一部分已经在这里解决了

[获取选定元素的外部 HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)

所以使用那个问题的outerHTML插件

```
jQuery.fn.outerHTML = function(s) {
    return s
        ? this.before(s).remove()
        : jQuery("<div>").append(this.eq(0).clone()).html();
};

function someFunction(id) {
  return $('#text'+id).outerHTML().match(/{(.*)}/)[1];
} 
```

# extjs - extJS 3.2.1 AJAX 请求同时刷新其他列表

> ID：15279834
> 
> 赞同：0
> 
> 时间：2013-03-07T19:17:17.900
> 
> 标签：extjs

我有一个网格控件，我每秒左右通过一个计时器重新加载。我在调用有时需要长时间处理的 AJAX 请求之前立即启动此计时器。

我正在刷新的网格实际上是要在服务器上执行的任务列表。

我试图给用户一些关于他们需要等待多长时间的想法。

这段代码：

```
 var task = {
    run: function(){
      Ext.getCmp("id_task_approval_progress").store.reload();
    },
    interval: 1000
  }

  var runner = new Ext.util.TaskRunner();
  runner.start(task); 

  Ext.Ajax.request({
    url: 'services/index.php/application/task/approve',
    params: { id_primary: id_task, id_status: status },
    success: function(response, action){
      if(!ajax_error_handler(response, action)){
        window.location.reload(true);
      }
    }
  }); 
```

不起作用...它会阻止网格刷新，直到 AJAX 请求完成？？？

使用 ExtJS 3.2.1 - 我做错了什么？有解决方法或设置吗？

问候，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:51:45.490

我认为有几个请求已发送到服务器，问题与客户端无关（apache 配置或 php 如何处理会话）。如果是 - 请检查此[链接](https://stackoverflow.com/questions/11739709/how-to-configure-php-or-apache-for-non-blocking-http-requests)。

# xcode - GameKit Match - 在 iOS5 和 iOS6 之间邀请好友

> ID：15279836
> 
> 赞同：2
> 
> 时间：2013-03-07T19:17:20.643
> 
> 标签：xcode, ios5, ios6, game-center, gkmatchmaker

我正在尝试在 2 人实时游戏中实现 Game Center 邀请。由于模拟器不支持邀请，我正在一台运行 iOS5 的设备和另一台运行 iOS6 的设备上进行测试（这是故意完成的）。

如果我在任一设备上使用老式的内置`GKMatchmakerViewController`UI 来发起邀请，那么两种方式都可以正常工作——iOS5 设备发起邀请以及 iOS6 设备发起邀请。

但是，在 iOS6 中，我想使用自己的 UI 来选择要邀请的玩家，所以我使用`GKMatchRequest`以编程方式发出邀请，设置`playersToInvite`属性。

问题是，另一台（iOS5）设备收到推送通知，启动应用程序，运行`[GKMatchmaker sharedMatchmaker].inviteHandler`，显示带有邀请详细信息的 Game Center UI，但即使 iOS6 设备发送`finishMatchmakingForMatch`请求 - iOS5 设备也不会进行任何操作更远。iOS5 机器上没有调用其他处理程序/委托，没有`GKMatch`返回任何对象，它继续显示 Game Center UI，两个玩家都标记为“就绪”，并显示一条消息“等待 [iOS6 玩家] 开始游戏”。此 UI 上的唯一按钮是取消按钮。

下面是在 iOS6 机器上发送邀请的代码片段：

```
GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
request.minPlayers = 2;
request.maxPlayers = 2;
request.playersToInvite = [NSArray arrayWithObject:playerID];
request.inviteMessage = message;
request.inviteeResponseHandler = ^(NSString *playerID, GKInviteeResponse response)
{
   if (response == GKInviteeResponseAccepted)
      [[GKMatchmaker sharedMatchmaker] finishMatchmakingForMatch:self.match];
};
[[GKMatchmaker sharedMatchmaker] findMatchForRequest:request withCompletionHandler:^(GKMatch *match, NSError *error)
{
   ... [whatever]
}]; 
```

这是 iOS5 机器上的邀请处理程序的代码片段：

```
[GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)
{
    if (acceptedInvite)
    {
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite] autorelease];
        mmvc.matchmakerDelegate = self;
        [navController presentModalViewController:mmvc animated:YES];
    });
    else if (playersToInvite)
    {
        ... [whatever]  
    }
} 
```

顺序如下：

*   iOS6 发送一个`findMatchForRequest`带有 iOS5 播放器 ID 的请求。
*   推送通知显示在 iOS5 机器上。
*   该应用程序在 iOS5 机器上启动`inviteHandler`并被调用。
*   显示`GKMatchmakerViewController`在带有邀请详细信息的 iOS5 机器上，并且 iOS6 用户具有旋转的“正在连接”状态。
*   iOS6`inviteeResponseHandler`机器上的 被调用并发送`finishMatchmakingForMatch`请求。
*   iOS5游戏中心屏幕中iOS6用户的状态从旋转的“Connecting”变为“Ready”，此时两个玩家都被标记为“Ready”。
*   iOS6机器收到`match: player: didChangeState:`回调，显示iOS5播放器为`GKPlayerStateConnected`，对于iOS6机器来说，比赛过程结束，可以开始比赛了。
*   从现在开始，iOS5 机器上不会发生任何事情。它卡在“等待[iOS6用户]开始游戏”，直到它被超时取消。它在任何时候都不会收到任何`GKMatch`对象，因此它无法开始游戏。

因为如果我在 iOS6 机器上使用标准 Game Center UI 而不是可编程邀请，一切正常，这意味着标准 UI 必须做更多的事情来告诉另一台机器游戏必须开始。但是，我浏览了所有相关的 Game Center 对象，但找不到要发送的任何其他内容。

我应该再次提到反向配置（iOS5 使用标准 UI 发起邀请）在两台机器上都可以正常工作。

帮助，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:27:19.723

我有个类似的问题。我为部分解决而做的一件事是为 ios6 用户使用编程，为 ios5 用户使用 viewController。我认为您也在这样做，但您的邀请处理程序代码似乎只有 viewController 代码。你能完全解决你的问题吗？

# wcf - Dispatcher.DispatchOperationRuntime.InspectInputsCore 中的 WCF System.IndexOutOfRangeException

> ID：15279841
> 
> 赞同：2
> 
> 时间：2013-03-07T19:17:37.223
> 
> 标签：wcf

**问题：**调用 WCF 服务时出现以下错误。

指数数组的边界之外。在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InspectInputsCore(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime .ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) System.IndexOutOfRangeException

需要帮助来解决此问题。

**详细信息：** 我们创建了多个 Web 托管（在同一虚拟目录中，启用了 ASP.NET 兼容性，baic http 绑定）多个 WCF 服务，如下所示

6 服务，每个服务都有单独的服务合同，每个操作都有相应的数据合同。使用添加消息检查器的自定义服务主机工厂

以以下方式托管的 2 个服务 2 个单独的 wsdls（设计时文件，具有不同的模式）指向实现以下合同的相同服务端点。使用不同的自定义服务主机工厂，它还添加了消息检查器

```
[ServiceContract]
public interface IGenericService
{
    [OperationContract(Action = "*", ReplyAction = "*")]
    System.ServiceModel.Channels.Message GenericOperation(System.ServiceModel.Channels.Message msgRequest);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall,
    ValidateMustUnderstand = false)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class GenericService : IGenericService
{
    public Message GenericOperation(Message msgRequest)
    { 
```

所有这些服务在 SOA 平台中都有代理（Progress Actional）。Actional 维护用于调用实际服务的直接端点，并且能够正确调用实际服务。

在用于执行 UnitTest 的服务器中，所有 8 项服务都运行良好。当部署到 QA 服务器时，所有 6 个具有单独服务合同的服务都可以正常工作，但 2 个新服务（设计时 wsdls 文件）出现上面列出的错误。

MessageInspector（失败的服务）中的代码如下所示。其他 6 项服务的其他 Inspector 类似。

```
public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
    {
        return Stopwatch.StartNew();
    }

    public void BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
    {
        Stopwatch watch = (Stopwatch)correlationState;
        watch.Stop();
        TimeSpan performanceTime = watch.Elapsed;
        watch = null;
            // Invoke Performance Logging Code
       }
    } 
```

ServiceTrace 如下所示。

构造 ServiceHost 'XyzServices.SpecificService' （具有单独服务合同的 6 个服务之一）
**打开 ServiceHost 'XyzServices.SpecificService'**
*为特定服务打开的所有端点列表器*
**侦听 'specificservice uri'
处理消息 1
处理操作 'SpecificService.SpecificOperation.SoapAction'
执行 'XyzServices.SpecificService.SpecificOperation'
构造 ServiceHost 'XyzServices.GenericService'
处理消息 2**

> 从：在“XyzServices.SpecificService 端点”
> 活动边界开始
> 到：处理操作“GenericService.GenericOperation.SoapAction”
> 到：在“XyzServices.SpecificService 端点”
> 活动边界停止

**打开 ServiceHost 'XyzServices.GenericService'**

> *为通用服务打开的所有端点列表器*

**处理操作“GenericService.GenericOperation.SoapAction”**

> *来自：处理消息 2
> 活动边界开始
> 通过通道接收消息*- 消息头看起来不错。不显示消息正文
> *ServiceChannel 信息*- 这里的一切看起来都很好（单元测试服务器和 QA 服务器）
> ***处理异常***- 显示粘贴在问题详细信息中的异常（仅在 QA 服务器中）
> *通过通道发送消息
> Aborted InstanceContext
> 活动边界停止*
> （当服务在单元测试服务器中运行时，此活动看起来很好）

我第一次使用服务跟踪查看器，但我注意到“处理消息 2”活动从与特定服务相关的活动开始。这是否表明托管服务的方式存在任何问题。（这些服务需要分离的地方）如果需要更多详细信息，请告诉我。

```
this.InitializeCallContext(ref rpc); 
                object target = rpc.Instance;  
                this.DeserializeInputs(ref rpc);  
                **this.InspectInputs(ref rpc);** 

                ValidateMustUnderstand(ref rpc); 

                IAsyncResult result = null; 
                IDisposable impersonationContext = null;  
                IPrincipal originalPrincipal = null; 
                bool isThreadPrincipalSet = false;  

                try
                {  
                    if (this.parent.SecurityImpersonation != null) 
                    { 
                        this.parent.SecurityImpersonation.StartImpersonation(ref rpc, out impersonationContext, out originalPrincipal, out isThreadPrincipalSet); 
                    }

void InspectInputsCore(ref MessageRpc rpc) 
    {  
        int offset = this.Parent.ParameterInspectorCorrelationOffset; 

        for (int i = 0; i < this.ParameterInspectors.Length; i++) 
        {  
            IParameterInspector inspector = this.ParameterInspectors[i]; 
            rpc.Correlation[offset + i] = inspector.BeforeCall(this.Name, rpc.InputParameters);  
        }  
    } 
```

# multithreading - Qt GUI 在 Windows XP 上无响应

> ID：15279843
> 
> 赞同：0
> 
> 时间：2013-03-07T19:17:42.017
> 
> 标签：multithreading, qt, portability

我有一个获取串行数据并显示在仪表板类型 GUI 中的 Qt 应用程序。该程序的基本结构如下：

**EDIT** SerialPort（从 QIODevice 继承）对象被创建，并将它们的 readyRead 信号连接到插槽。当新数据进入时，它会通过消息处理程序通过程序进行解释和发送。最终，数据进入 GUI 层，并在此处显示给用户。

该程序在 Windows 7 中运行良好，但是当我在松下笔记本电脑上运行它时，运行 Windows XP，程序启动正常，但片刻后 GUI 停止更新。我的意思是当新数据进入时，gui 不会重绘，直到用户单击按钮或调整大小。我想知道这种行为的一些可能原因是什么。我认为可能是主线程被所有传入的串行数据所淹没，但我认为 GUI 无论如何都在单独的线程中运行。我错了吗？有没有人对可能发生的事情有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:40:54.063

如果`SerialPortIO`不在自己的线程中，那么它在等待新数据时可能会阻塞。我没有使用过那个特定的 Serial 类，但一般来说，数据流可能应该在它自己的线程中。

`qApp->processEvents()`您可以通过定期调用强制程序更新 GUI ，并且 GUI 应该更新。

此外，`qDebug`在您的代码中添加一些语句，尤其是在您怀疑调用过于频繁或不足的函数的顶部。

使用以下行，它可以很容易地跟踪多线程应用程序中发生的事情：

```
qDebug() << Q_FUNC_INFO; 
```

希望有帮助。

# ios - GLKit 的 -drawRect: 在屏幕旋转期间不被调用

> ID：15279846
> 
> 赞同：5
> 
> 时间：2013-03-07T19:18:02.670
> 
> 标签：ios, glkit, screen-rotation, autorotate, glkview

我有`GLKit`基于应用程序的应用程序，其中显示了一些简单的对象。

一切正常，除了屏幕旋转，在此期间`GLKView`不更新（`-drawRect:`不调用）。因此，在旋转期间，投影矩阵不会根据动态变化的屏幕尺寸进行更新，并且对象看起来很糟糕（拉伸）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T13:55:50.727

这可能是在黑暗中拍摄，因为我没有任何经验`GLKit`，但我确实有经验`UIView`和`-drawRect:`。尝试更改相关视图的 contentMode 以重绘：

`view.contentMode = UIViewContentModeRedraw;`

这将告诉视图当它的边界发生变化时它需要重绘它的内容。否则，`UIView`只会尝试缩放其内容（contentMode 的默认值为`UIViewContentModeScaleToFill`）。这样做的原因是，缩放现有内容比重绘内容要容易得多，并且`UIView`旨在尽可能高效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:50:13.263

这根本不是 UIKit 动画的工作方式。[我在这个答案](https://stackoverflow.com/questions/3693539/layoutsubviews-during-an-animation/3693650#3693650)中解释了它的一半是如何工作的，但我会尝试总结相关位：

*   一切都是带纹理的矩形。（有一些例外，比如 CAShapeLayer，但大多数情况下都是如此。）
*   `UIView`的属性链接到 CALayer 的“模型树”属性。他们*瞬间*变了。
*   动画通过将“表示树”属性从起始值动画到当前模型值来工作。
*   默认情况下，动画的起始值是之前的模型值。指定`UIViewAnimationOptionBeginFromCurrentState`使其使用当前表示值。

当然，也有一些例外（`CAShapeLayer`似乎不仅仅是一个纹理矩形，`UIScrollView`在计时器上滚动动画，UIView 转换完全是另一回事......）。

旋转*应该*如何工作是你得到一个单一的`-setFrame:`，一切都被布置（并可能重新渲染），然后动画属性被动画化。默认情况下，这意味着事物将重新渲染到新尺寸，但会被拉伸以适应旧尺寸，然后随着旋转的进行设置动画（和取消拉伸）。

也就是说，`GLKView`可能会有所不同。如果您使用`GLKViewController`，它甚至可能会在旋转动画期间暂停渲染。您可以尝试`-setNeedsDisplay`在旋转过程中调用，但这无济于事，因为框架已经设置为其最终值。

自己处理旋转动画的最简单方法可能是强制将非动画重新布局到旋转的帧，然后在渲染器中做一些捏造（虽然黑色边框和状态栏分别动画）。

或者，传统的方法是让您的 VC 仅纵向并自己处理设备方向通知，但这是一个很大的蠕虫（然后您必须担心状态栏方向，它决定了诸如触摸偏移和键盘方向之类的事情，并且在与其他 VC 之间转换时，它往往会“有趣地”交互）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:44:16.230

首先，确保在应用程序生命周期的早期某个时间点启用设备方向更改。

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

然后，当您的视图被实例化时，注册这样的通知。

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(deviceOrientationDidChange:) name: UIDeviceOrientationDidChangeNotification object: nil]; 
```

然后`-deviceOrientationDidChange:`在您的视图控制器中实现并调用`-setNeedsDisplay`

# json - 设计一个 Chrome 主题，出了什么问题？

> ID：15279847
> 
> 赞同：2
> 
> 时间：2013-03-07T19:18:03.150
> 
> 标签：json, google-chrome-extension, manifest, google-chrome-theme

（所以，我是一名平面设计师/艺术家，我对任何类型的代码或脚本都不熟悉。）

在我的 Chrome 主题代码中，出现错误：

> *“无法从 'E:\Web\dev\theme\dev\Test' 加载扩展。清单不是有效的 JSON。行：7，列：4，语法错误。”*

我不知道我哪里出错了，因为指定的语法错误在空格处，如以下代码示例所示：

```
 {
      "manifest_version": 2,
      "version": 2.0
      "name": "Test",
        "theme": {
          "images" : {
          "theme_frame" : "images/frame.png",
          "theme_toolbar" : "images/toolbar.png",
          "theme_ntp_background" : "images/polygons.png",
          "theme_tab_background" : "images/tab.png",
          "theme_ntp_attribution" : "images/theme_ntp_attribution.png"
        },
        "colors" : {
            "ntp_link": [255,255,255],
        "ntp_text": [255,255,255],
        "ntp_section_link": [255,255,255],
        "ntp_section_text": [10 , 17 , 27],
        "ntp_background": [10 , 17 , 27],
        "frame": [10 , 17 , 27],
        "toolbar": [10 , 17 , 27],
        "tab_text": [255,255,255],
        "tab_background_text": [10 , 17 , 27],
        "bookmark_text": [255,255,255]
        },
        "tints" : {
                    "buttons" : [0.33, 0.5, 0.47]
        },
        "properties" : {
            "ntp_background_alignment" : "bottom",
        "ntp_background_repeat": "no-repeat"
        }
      }
    } 
```

那么，哪里*出错*了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:33:05.493

你忘了把逗号放在线上

```
"version": 2.0 
```

顺便说一句，您可以使用[JSONLint](http://jsonlint.com/)来验证 JSON。

# php - jQuery $.get() 无法正常工作

> ID：15279848
> 
> 赞同：0
> 
> 时间：2013-03-07T19:18:09.730
> 
> 标签：php, jquery

我遇到了一个非常简单的 $.get() 请求的问题。当我使用错误处理功能对其进行测试时，它触发了错误和完成功能。此外，如果我直接从浏览器的 URL 栏中运行 php 文件，它会完美运行。这是我的代码：

内联 JS：[位于根目录]

```
$.get('php/getRank.php', function(teamRank) {
    alert("Your team has finished with rank: " + teamRank);
}); 
```

PHP：[位于根目录/php]

```
require_once '../includes/constants.php';

$con = mysql_connect(DB_SERVER, DB_USER, DB_PASSWORD);
if(!$con){
    die('Could not connect: ' . mysql_error());
    } 
mysql_select_db(DB_NAME, $con);

session_start();

*/ CALCULATE RANK HERE */

echo $rank; 
```

使用 $.get() 时是否存在一些 PHP 限制或其他问题？我想做的就是从 JS 执行一个 PHP 脚本。我应该使用 $.get() 以外的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:26:03.937

session_start() 通常是 PHP 中的第一条语句

# python - 比 numpy 的 in1d 掩码函数做得更好：有序数组？

> ID：15279849
> 
> 赞同：9
> 
> 时间：2013-03-07T19:18:15.343
> 
> 标签：python, performance, sorting, numpy, mask

这个操作需要尽可能快地应用到包含数百万个元素的实际数组中。这是问题的简单版本。

所以，我有一个随机的*唯一*整数数组（通常是数百万个元素）。

> totalIDs = [5,4,3,1,2,9,7,6,8 ...]

我有另一个可以创建掩码的唯一整数数组（通常是数万个）。

```
subsampleIDs1 = [5,1,9]
subsampleIDs2 = [3,7,8]
subsampleIDs3 = [2,6,9]
... 
```

我可以用 numpy 来做

> 掩码 = np.in1d(totalIDs,subsampleIDs,assume_unique=True)

然后我可以使用掩码提取我想要的另一个数组的信息（比如第 0 列包含我想要的那个）。

> 变量=所有变量[掩码][:,0]

现在鉴于 ID 在两个数组中都是唯一的，有什么方法可以显着加快速度。为几千个点 (subsampleIDs) 与数百万个 ID (totalID) 匹配构建掩码需要很长时间。

我想通过它一次并写出索引的二进制文件（以加快未来的搜索速度）。

```
for i in range(0,3):
    mask = np.in1d(totalIDs,subsampleIDs,assume_unique=True)
    index[mask] = i 
```

其中 X 在 subsampleIDsX 中。然后我可以这样做：

```
for i in range(0,3):
    if index[i] == i:
        rowmatch = i
        break

variable = allvariables[rowmatch:len(subsampleIDs),0] 
```

对？但这也很慢，因为循环中有一个条件来查找第一次匹配的时间。是否有更快的方法来查找数字何时首次出现在有序数组中，这样条件不会减慢循环速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:36:16.073

I suggest you use DataFrame in Pandas. the index of the DataFrame is the totalIDs, and you can select subsampleIDs by: `df.ix[subsampleIDs]`.

Create some test data first:

```
import numpy as np
N = 2000000
M = 5000
totalIDs = np.random.randint(0, 10000000, N)
totalIDs = np.unique(totalIDs)
np.random.shuffle(totalIDs)
v1 = np.random.rand(len(totalIDs))
v2 = np.random.rand(len(totalIDs))

subsampleIDs = np.random.choice(totalIDs, M)
subsampleIDs = np.unique(subsampleIDs)
np.random.shuffle(subsampleIDs) 
```

Then convert you data in to a DataFrame:

```
import pandas as pd
df = pd.DataFrame(data = {"v1":v1, "v2":v2}, index=totalIDs) 
df.ix[subsampleIDs] 
```

DataFrame use a hashtable to map the index to it's location, it's very fast.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:36:45.603

通常这种索引最好使用数据库（使用适当的列索引）执行。

Another idea is to sort `totalIDs` once, as a preprocessing stage, and implement your own version of `in1d`, which avoids sorting everything. The numpy implementation of `in1d` (at least in the version that I have installed) is fairly simple, and should be easy to copy and modify.

EDIT:

Or, even better, use bucket sort (or radix sort). That should give you O(N+M), N being the size of `totalIDs`, and M the size of `sampleIDs` (times a constant you can play with by changing the number of buckets). Here too, you can split `totalIDs` to buckets only once, which gives you a nifty O(N+M1+M2+...).

Unfortunately, I'm not aware of a numpy implementation, but I did find this: [http://en.wikipedia.org/wiki/Radix_sort#Example_in_Python](http://en.wikipedia.org/wiki/Radix_sort#Example_in_Python)

# refresh - 刷新 DFP 广告

> ID：15279851
> 
> 赞同：0
> 
> 时间：2013-03-07T19:18:34.723
> 
> 标签：refresh, ads, double-click

我有一个带有 Google DFP 广告的静态聊天页面。

有没有办法让这些广告每 5 分钟左右自动刷新一次？我只想刷新广告，而不是整个页面。

我知道谷歌提供了一些标签，比如 googletag.pubads().refresh(); 但我不确定我是否可以将它们用于此目的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T21:36:31.933

在这里查看它非常简单： [https ://support.google.com/dfp_premium/answer/2694377?hl=en&ref_topic=28788](https://support.google.com/dfp_premium/answer/2694377?hl=en&ref_topic=28788)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T22:25:18.190

是的，只需设置 300000 的间隔并使用您提到的刷新方法。从技术上讲，我认为在没有用户交互的情况下在计时器上刷新广告可能违反服务条款......但我不是 100% 的，你需要在 DFP 网站上更多地研究这些条款。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T09:23:47.633

这段代码应该有帮助：

```
<html>
<head>
  ...
</head>
<body>
  ...
      <!-- PUT THESE LINES ON THE FOOT OF YOUR PAGE -->
<script type="text/javascript">
   setInterval(function(){googletag.pubads().refresh();}, 300000);});  
</script> 
```

# mysql - 如何使用 chef solo 设置 MySQL root 密码而不以纯文本形式存储？

> ID：15279855
> 
> 赞同：1
> 
> 时间：2013-03-07T19:18:49.007
> 
> 标签：mysql, chef-infra

我一直在尝试通过将我们的服务器设置和配置转移到 chef solo 来尽可能多地自动化我们的基础设施。

使用 OpsCode MySQL 食谱，我可以安装 MySQL 并设置 root 密码，如下所示：

```
node['mysql']['server_root_password'] = 'my root password' 
```

（或 JSON 等价物）

这很好用，但理想情况下我们不希望以纯文本形式存储密码，因为它将在 GitHub 上进行（当然是私人存储库，但你永远不知道）。

有没有办法我可以提供密码的哈希值（类似于厨师中的用户定义），

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:22:17.867

复制您想要的哈希密码值并使用它代替您的纯文本密码。

做

```
 SELECT Password
   FROM mysql.user
  WHERE User='root'
    AND Host='localhost' 
```

从现有的 MySQL 实例中获取散列值。

# ruby-on-rails - rails 在视图中使用路由/命名助手

> ID：15279858
> 
> 赞同：2
> 
> 时间：2013-03-07T19:19:03.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这就是我所拥有的。我有一个动作，我可以通过 rake 路线查看路线

```
date_swimming_classschedules GET    /swimming/classschedules/date/:date(.:format) swimming/classschedules#date 
```

我试图在我使用的视图中生成 url

```
'<%= date_swimming_classschedules(@date)%>' 
```

我收到一条错误消息

```
undefined method `date_swimming_classschedules' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:20:08.490

尝试

```
date_swimming_classschedules_path(@date) 
```

或者

```
date_swimming_classschedules_url(@date) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T19:22:43.057

您必须附加`_path`到命名路由。像这样做。

```
date_swimming_classschedules_path(@date) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T19:24:42.717

是的，您缺少`_path`方法调用。做：

```
date_swimming_classschedules_path(@date) 
```

# ms-access - MS Access 更改多个列

> ID：15279859
> 
> 赞同：2
> 
> 时间：2013-03-07T19:19:04.583
> 
> 标签：ms-access, alter-table

我有一个来自 JDE/AS400 的 ODBC 链接表，我将其引入 MS Access 2010。该表有四个数据类型为十进制的字段，一旦我将它们写入临时表，我需要将它们转换为双精度数据类型。有没有办法在一个查询中有四个更改表/列语句？

如果有人想知道，存储在这些字段中的数据是价格和成本，但它们以 15 的十进制值和 0 个尾随小数的形式存储在 ODBC 表中，我必须将 2 除以 10,000 和 1 除以 100,000 才能得到小数正确位置的点来表示真实的价格/成本 例如，价格字段中的 3558767 实际上是 355.8767 或 355.88 舍入的价格）。当我将相同的数据带入 Access 并除以 10000 时，我得到 355.00。我需要正确的美分值。我过去能够做到这一点的唯一方法是编写一个更改表/更改列查询以在执行除法之前将数据类型更改为加倍。

由于我有四个这样的字段，我想一次更改或修改所有四个。有任何想法吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:48:11.387

在 Access（或符合 ANSI 的 SQL，据我所知）中没有办法同时更改多个列；你将不得不：

*   运行四个单独的更改脚本，或者...
*   创建一个新的临时表，将所有数据移动到临时表中，删除主表，然后重命名临时表

在这种情况下，这确实是一种清洗，因为无论哪种方式，您都将运行四个脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:21:19.223

如前所述，Access SQL 不允许您使用单个 SQL 语句更改多个列。但是，您的问题中的背景信息有些令人困惑。

```
SELECT decimal_field/10^4 AS my_quotient
FROM tblFoo; 
```

`decimal_field`是精度 = 15 和小数位数 = 0 的小数类型。

当我存储`3558767`并`decimal_field`运行该查询时，Access 2007 为我`355.8767`提供`my_quotient`. 这就是我理解你想要但没有得到的结果。

如果您可以解决这个问题，也许您不需要更改任何列。

# c# - 我想将文件复制到另一台服务器，但出现“找不到路径的一部分”错误

> ID：15279861
> 
> 赞同：0
> 
> 时间：2013-03-07T19:19:07.523
> 
> 标签：c#

我正在制作一个简单的 Windows 窗体应用程序，它基本上需要将本地文件复制到服务器上的某个位置。我尝试出现 can.not.find.part.of.path 错误：

```
file.CopyTo("\\123.45.678\\etcetc"); 
```

我需要使用什么工具来完成我的任务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:21:02.350

尝试在字符串前加一个 @ 符号：

```
file.CopyTo(@"\\123.45.678\etcetc"); 
```

您需要在 IP 地址前添加两个反斜杠，而该 IP 地址看起来是错误的（它只有 3 个八位字节，而不是四个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:21:08.937

尝试将其更改为：

```
file.CopyTo(@"\\123.45.678\etcetc"); 
```

由于您实际上需要 2 个斜杠，因此您需要将其设为字符串文字，否则双斜杠会认为您正在转义单个斜杠并导致您尝试查找路径：

```
\123.45.678\etcetc 
```

这不存在。如果没有 sting 文字，您可以转义每个斜线并像这样写：

```
file.CopyTo("\\\\123.45.678\\etcetc"); 
```

但使用字符串文字通常是更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:23:43.580

`file.CopyTo(@"\\123.45.678\etcetc");`

`@`让你`\`不用转义就可以使用

`\\`用于寻址另一台计算机

`\`用于在计算机内导航

# c# - .NET 4.5 中 REST WCF 服务中的间歇性反序列化错误

> ID：15279863
> 
> 赞同：1
> 
> 时间：2013-03-07T19:19:11.187
> 
> 标签：c#, asp.net, json, rest, exception

自从将我们的项目更新到 Visual Studio 2012 并从 4.0 面向 .NET 框架 4.5 以来，我们在尝试从我们的服务方法返回数据时间歇性地遇到序列化异常问题，但为了调试问题，我们一直专注于我们将注意力集中在单个服务方法 GetPageSelectListForSite 上。

该方法接口声明如下：

```
[OperationContract]
[WebInvoke(Method = "GET",
ResponseFormat = WebMessageFormat.Json,
RequestFormat = WebMessageFormat.Json,
UriTemplate = "/Pages/Site/ListItems/{siteId}",
BodyStyle = WebMessageBodyStyle.Bare),
Description("")]
IEnumerable<PageInfoItem> GetPreviousPages(string siteId); 
```

使用相同的签名参数调用它，并且在控制器内部返回相同的 IEnumerable 数据；但是，偶尔（每 100 次左右）这会在控制器尝试反序列化 REST 服务回复时导致序列化异常：

*System.Runtime.Serialization.SerializationException: 反序列化 System.Collections.Generic.IEnumerable`1[[Synodine.Hkd.Models.PageInfoItem, Synodine.Hkd.Models, Version=1.0.0.0, Culture= 类型的对象时出错中性，PublicKeyToken=null]]。遇到意外的字符“D”。---> System.Xml.XmlException：遇到意外字符“D”。*

完整的异常和相应的堆栈跟踪可在此处获得：http: [//pastebin.com/jaqQDbru](http://pastebin.com/jaqQDbru)

PageInfoItem 是一个包含字符串的相当简单的类，它派生自 ListInfoBase，其中包含一个 guid、一些字符串、一些布尔值和一个 DateTime。

尝试使用 [Serializable] AND/OR [DataContract]/[DataMember] 装饰类没有任何效果。我们无法始终如一地重现该问题。

我应该注意到，我们已经看到序列化异常错误发生在一个非常简单的 REST GET 方法上，响应/请求格式设置为 Json，Bare 的 BodyStyle 返回单个字符串。所讨论的其余服务方法是 POST/GET 还是其样式设置为 Bare 或 Wrapped 似乎并不重要，尽管在所有情况下我们都在使用 WebMessageFormat.Json。

我们已经尝试自己序列化数据并记录它以查看 JSON 是否以某种方式格式错误，但 JSON 是有效的，并且在失败/成功的请求中是相同的。

这是我们用来序列化数据的代码：

```
var stream1 = new MemoryStream();
var ser = new DataContractJsonSerializer(typeof(IEnumerable<PageInfoItem>));
ser.WriteObject(stream1, PageInfoItems);

stream1.Position = 0;
var streamReader = new StreamReader(stream1); 
```

正在记录的 JSON 示例是：

```
[
  {
    "DateLastUpdate": "\/Date(1362438368000+0000)\/",
    "DateLastUpdateString": null,
    "Id": "df2544e6-71a3-4f1c-ac54-d3c85269804f",
    "IsSelected": false,
    "Name": "samplepage",
    "Path": "\/samplepage"
  },
  <snip>
] 
```

这个问题只发生在我们部署的环境中。在我们的本地 IIS 网络服务器上重现该问题的所有尝试都失败了。

我们正在使用 WebChannelFactory 来使用 WCF REST 服务。正因为如此，我们没有（也不确定如何获得）对响应的直接访问权限，因此我们无法 100% 地通过网络发送数据。

在将项目升级到 Visual Studio 2012/.NET 4.5 Framework 时，有没有人遇到过类似的情况？

任何回应都非常感谢，--肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:22:14.600

您能否尝试公开另一个返回与 GetPreviousPage 返回相同数据但将 ResponseFormat 更改为 Xml 的函数？然后多次调用它（例如从浏览器），看看这个新功能*是否*会失败。这很好地帮助您了解问题是否与 Json 序列化程序有关。

```
[OperationContract]
[WebInvoke(Method = "GET",
ResponseFormat = WebMessageFormat.Xml,
RequestFormat = WebMessageFormat.Json,
UriTemplate = "/Pages/Site/ListItemsNew/{siteId}",
BodyStyle = WebMessageBodyStyle.Bare),
Description("")]
IEnumerable<PageInfoItem> GetPreviousPagesNew(string siteId); 
```

PS：将此作为答案发布，因为很难在评论中发布代码。

# php - 我们可以延迟 PHP 页面的响应，直到同一访问者的另一个标志请求？

> ID：15279866
> 
> 赞同：0
> 
> 时间：2013-03-07T19:19:17.313
> 
> 标签：php, sleep

我正在尝试制作一个聊天脚本，但我不希望访问者的浏览器每 0.5 秒要求一条新消息。相反，我希望服务器立即发送新消息。

我想我可以向服务器发送一个请求，如果没有任何新消息，服务器会等到有新消息。这个等待时间不需要很长，大概2-3秒。

我尝试了PHP的`sleep()`功能：

```
while(1)
{

   $temp=$db->query("SELECT * FROM chat WHERE (id=36 OR id=12) AND clock>".$last_time);

   if ($temp->rowCount()!=0) break;

   sleep(1);

} 
```

当其他访问者中断循环时，这种“等待中断”过程有效，但是当启动循环的访问者尝试发送消息时，他会永远等待。

我会以错误的方式解决这个问题吗？

**编辑** *系统是 IIS 7 - PHP 版本 5.3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:35:07.910

我不太清楚你为什么`facebook-chat`在此处标记。

无论如何，该方法是不合适的，并且会使您的服务器因数据库查询而过载。您应该使用[长轮询](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)或[websockets](https://www.google.com/search?q=websocket%20chat&aq=f&oq=websocket%20chat&aqs=chrome.0.57j0j62l3.2021&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=websocket%20chat%20php&oq=websocket%20chat%20php&gs_l=serp.3..0j0i22i30l2j0i22i10i30.2994.3347.0.3509.4.4.0.0.0.0.154.413.0j3.3.0.les;..0.0...1c.1.5.psy-ab.LS7TMS3XVhE&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43287494,d.dmQ&fp=a2ec104b022b507a&biw=932&bih=606)。让用户轮询更新可能听起来很多，但如果做得适当，它就很好。

# python - Python - 对象属性分配失败

> ID：15279871
> 
> 赞同：0
> 
> 时间：2013-03-07T19:19:23.833
> 
> 标签：python

**我的问题是**，在这一行之后： `-> self.__serverUrl = serverUrl`

为什么会这样？： `*** AttributeError: Client instance has no attribute '__serverUrl'`

**细节**

我正在使用 Beatbox 与 Salesforce 交互，但出现错误

`*** AttributeError: Client instance has no attribute '_Client__serverUrl'`

我想知道为什么这个字段在设置之前就被访问了，所以我补充`pdb.set_trace()`说我可以找到一些答案。这就是我所看到的（注意第 67 行）：

```
(Pdb)
--Call--
> /app/env/local/lib/python2.7/site-packages/beatbox/_beatbox.py(65)useSession()
-> def useSession(self, sessionId, serverUrl):
(Pdb) l
 64         # initialize from an existing sessionId & serverUrl, useful if we're being launched via a custom link
 65  ->     def useSession(self, sessionId, serverUrl):
 66             self.sessionId = sessionId
 67             self.__serverUrl = serverUrl
 68             (scheme, host, path, params, query, frag) = urlparse(self.__serverUrl)
 69             self.__conn = makeConnection(scheme, host)
 70 
```

我检查了 serverUrl 的值，一切正常。然后我到第 67 行，让它执行并认为 的值`serverUrl`将在`self.__serverUrl`. 显然不是....

```
> /app/env/local/lib/python2.7/site-packages/beatbox/_beatbox.py(67)useSession()
-> self.__serverUrl = serverUrl
(Pdb) n
> /app/env/local/lib/python2.7/site-packages/beatbox/_beatbox.py(68)useSession()
-> (scheme, host, path, params, query, frag) = urlparse(self.__serverUrl)
(Pdb) self.__serverUrl
*** AttributeError: Client instance has no attribute '__serverUrl' 
```

这里发生了什么！？这不应该发生。看起来任务只是悄悄地失败了。为什么这里没有分配这个值？

**来源**

我正在使用的源代码在[这里](http://code.google.com/p/salesforce-beatbox/source/browse/)

我创建了一个beatbox客户端并登录

```
svc = PythonClient()
svc.login(username, password) 
```

这会调用 python_client.Client 的登录方法。python_client.Client.login调用它的超类_beatbox.Client的login方法，如下所示：

```
class Client:
    def __init__(self, serverUrl=None):
       ...

    # login, the serverUrl and sessionId are automatically handled, returns the loginResult structure       
    def login(self, username, password):
        lr = LoginRequest(self.serverUrl, username, password).post()
        self.useSession(str(lr[_tPartnerNS.sessionId]), str(lr[_tPartnerNS.serverUrl]))
        return lr

    # initialize from an existing sessionId & serverUrl, useful if we're being launched via a custom link   
    def useSession(self, sessionId, serverUrl):
        self.sessionId = sessionId
        self.__serverUrl = serverUrl
        (scheme, host, path, params, query, frag) = urlparse(self.__serverUrl)
        self.__conn = makeConnection(scheme, host) 
```

分配发生在 _beatbox.Client.useSession 中，它是对象的超类`svc`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:22:20.783

以双下划线为前缀（不以双下划线为后缀）的名称在出现在类范围内时会被*破坏。*名称被前缀`_<classname>`.

如果您在全局范围内声明一个设置双下划线前缀名称的函数，您将设置错误的属性，因为不会发生名称重整。如果您在派生类中声明这样的函数，您还将访问错误的属性，因为名称修饰将添加派生类的名称而不是基类（因此，名称修饰实现了私有属性的弱形式）。

如果子类需要访问属性或使用属性，正确的做法是完全避免名称修改。如果你不能避免它，你将不得不使用这个kludge：

```
self._Client__serverUrl = ... 
```

# xml - 使用 XSLT 遍历节点内不同名称的子元素

> ID：15279874
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:19:30.147
> 
> 标签：xml, xslt, loops, tags

我是 XSLT 的新手。我有以下 xml，想知道我们如何使用 XSLT 遍历 A 的每个元素以获取它们的值。此外，对于每个元素，如果位置 mod 3 = 2，则获取该元素值及其下一个元素值。例如，- 因为 02 mod 3 = 2，所以得到值 22 和 2.5，依此类推。

任何帮助表示赞赏。

谢谢你。

```
<A>
 <A01>abc</A01>
 <A02>22</A02>
 <A03>2.5</A03>
 <A04>0</A04>
 <A05>2</A05>
 <A06>1.8</A06>
 <A07>2</A07>
 <A08>3</A08>
 <A09>1.9</A09>
</A>
<A>
 <A01>abb</A01>
 <A02>22</A02>
 <A03>1.5</A03>
 <A04/>
</A> 
```

我希望结果如下所示：

```
abc|22|2.5|0
abc|2|1.8|2
abc|3|1.9|
abb|22|1.5|

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:39:50.950

从您描述的输出来看，您似乎想要为所有 n 生成列是子 1、n、n+1、n+2 的行，使得 n mod 3 = 2。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:apply-templates select="*/A/*[(position() mod 3) = 2]"/>
  </xsl:template>

  <xsl:template match="*">
    <xsl:value-of select="concat(../*[1],'|', ., '|',
        following-sibling::*[1], '|', following-sibling::*[2],
        '&#10;')"/>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于以下 XML 时（您的示例包装在一个额外的根元素中以使其格式正确）

```
<root>
<A>
 <A01>abc</A01>
 <A02>22</A02>
 <A03>2.5</A03>
 <A04>0</A04>
 <A05>2</A05>
 <A06>1.8</A06>
 <A07>2</A07>
 <A08>3</A08>
 <A09>1.9</A09>
</A>
<A>
 <A01>abb</A01>
 <A02>22</A02>
 <A03>1.5</A03>
 <A04/>
</A>
</root> 
```

此样式表产生正确的结果

```
abc|22|2.5|0
abc|2|1.8|2
abc|3|1.9|
abb|22|1.5| 
```

# java - jsp web应用程序-每次单击按钮时，数字加1

> ID：15279880
> 
> 赞同：1
> 
> 时间：2013-03-07T19:19:47.567
> 
> 标签：java, html, jsp

应用程序有一个按钮，从数字 0 开始，每点击一次按钮，整数加 1。

问题是我必须将它与此代码合并并将字符串“0”转换为整数 0

```
<%
    int x = 0;
    try { x = Integer.parseInt("0"); }
    catch (Exception e) { x = 0; }
%> 
```

另外我将如何继续留在同一页面上单击按钮添加一个（我是否将代码放在 html 中？）

这就是我到目前为止所拥有的：

```
<html>
    <body>
        <form method="post" action="index.jsp" />

            <% 
                String integer = request.getParameter("0"); 
            %>

            <%
                int x = 0;
                try { x = Integer.parseInt("0"); }
                catch (Exception e) { x = 0; }
            %>

            <input type="text" name="integer" value="<%=integer%>"/>
            <input type="submit" value="submit" />

        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:49:52.263

这是适用于这种情况的代码。

```
<%! int clicks = 0; %>

<%
    String param = request.getParameter("integer");

    try
    {
       int i = Integer.parseInt(param);

       clicks ++;
    } 
    catch (NumberFormatException e)
    {
    }
%>
<p>Number of clicks untill now: <%= clicks %> </p>

<form action="">
    <input type="text" name="integer" value="1"/>
    <input type="submit" value="submit" />
</form> 
```

你犯了一些错误：

*   您没有使用**表单**标签
*   您将参数命名为“整数”，但您尝试使用“0”的名称来恢复它

一些指导方针：

*   如果你想在不重新加载页面的情况下增加值，你需要 javascript/ajax。
*   您不应该将 scriptlet 添加到您的 JSP 页面中。Insted，您应该编写一个处理点击增加的 Servlet，并使用 RequestDispatcher 发送到您正在显示它的 JSP 页面（并且不进行任何计算）。

**编辑**：我应该警告您，此代码将显示页面上每个用户的点击值。如果您不希望这样，您应该删除 de JSP 声明并改为使用参数请求。从我的代码来看，这对你来说应该很容易。

# php - 在 Ubuntu 10.04 上安装最新的 php_intl

> ID：15279881
> 
> 赞同：1
> 
> 时间：2013-03-07T19:19:50.100
> 
> 标签：php, symfony, ubuntu-10.04, updates, intl

我正在使用 Ondřej Surý 源代码来获取 Ubuntu 10.04 上的最新 php 版本。所以我得到 PHP 版本 5.4.12-1~lucid+1

对于我的 Symfony2 应用程序，我需要最新版本的 php-intl 扩展。

在我正在运行的本地 XAMPP 服务器上

*   国际版 1.1.0
*   ICU 版本 **4.6.1**

在我的网络服务器上只有这个：

*   国际版 1.1.0
*   ICU 版本 **4.2.1**

是否也有更新它的来源或方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:21:04.763

您必须从源代码编译更新版本的 ICU，然后重新编译 PHP intl 扩展。

从源代码构建 ICU 是非常标准的（配置、制作、sudo make install）。你可以通过`--prefix`configure来选择安装位置。

重新编译 PHP intl 扩展的最简单方法是删除您当前拥有的 ( `apt-get remove php5-intl`) 并安装 PECL 版本 ( `pecl install intl`)。您将被要求提供 ICU 文件的位置。

# ios - UIImage 在旋转时向右移动 - 中心点错误？

> ID：15279883
> 
> 赞同：0
> 
> 时间：2013-03-07T19:19:54.923
> 
> 标签：ios, objective-c, animation, uiview, autolayout

当我旋转图像时，它会向右移动。它不应该。似乎中心设置到了错误的点。见截图：在两种状态下——旋转而不是旋转——“+”的中心不应该改变。

![在此处输入图像描述](../Images/e44921eec133852f3e8be1a550945958.png)

我正在使用这样的自动布局定位 UIImageView：

```
- (void)viewDidLoad {
...

addIconImageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"AddCardIcon.png"]];
[addIconImageView setContentMode:UIViewContentModeCenter];
[addIconImageView setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.view addSubview:addIconImageView];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[addIconImageView]-(10)-|"
                                                                  options:nil
                                                                  metrics:nil
                                                                    views:NSDictionaryOfVariableBindings(addIconImageView)]];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: @"V:|-[addIconImageView]-|"
                                                                  options:NSLayoutFormatAlignAllCenterY
                                                                  metrics:nil
                                                                    views:NSDictionaryOfVariableBindings(addIconImageView)]];

...
} 
```

这就是我旋转图像的方法

```
[UIView animateWithDuration:0.2
                 animations:^{
                     addIconImageView.transform = CGAffineTransformRotate(addIconImageView.transform, M_PI/4);
                 } completion:^(BOOL finished) {
                 }
 ]; 
```

轮换如何正确移动，我该如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:22:44.743

我的第一个猜测是您的图像资产不是完全正方形的。

调整 AddCardIcon.png 的大小，使其具有相同的宽度和高度，并且在任何一侧都没有任何透明填充。

否则，手动确定 + 的中心并设置[`addIconImageView.layer.anchorPoint`](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/anchorPoint)

# php - 如何在 CodeIgniter 2 项目中构建数据库和填充日历？

> ID：15279884
> 
> 赞同：2
> 
> 时间：2013-03-07T19:19:59.990
> 
> 标签：php, codeigniter, calendar, codeigniter-2

我搜索了 SO 和 Google，但找不到我需要的东西。

我正在使用 CodeIgniter 2 构建一个简单的事件日历。 [根据 CodeIgniter 文档，](http://ellislab.com/codeigniter/user-guide/libraries/calendar.html)这是基本的代码结构，它正在工作......

```
// $data[2] contains the data for day #2, etc.

$data[2] = '<a href="#">event title 1</a>';
$data[8] = '<a href="#">event title 2</a><br/><a href="#">event title 3</a>';
$data[13] = '<a href="#">event title</a>';
$data[24] = '<a href="#">event title</a>';

// {content} in template is where $data is inserted for each day

$prefs = array (
    // my calendar options
    'template'  => '
        {cal_cell_content}{day}<br/>{content}{/cal_cell_content}
        {cal_cell_content_today}<div class="highlight">{day}<br/>{content}</div>{/cal_cell_content_today}'
);

$this->load->library('calendar', $prefs);

$year   = ($year === FALSE ? date('Y') : $year);
$month  = ($month === FALSE ? date('m') : $month);

echo $this->calendar->generate($year, $month, $data); 
```

* * *

现在是我如何设置我的数据库表...

*   每个事件都有一个`title`字段并创建`$slug`. ( `~/events/view/title-slug`)

*   每个 Event 都有一个`date`字段，数据格式为`mm/dd/yyyy`

现在，我正在考虑如何查询特定月份/年份的数据库并提取数据以插入每个`$data[]`变量。

看来我需要执行以下操作：

*   `month`在我的数据库表中为、`day`和`year`.创建新列

*   在验证后获取我的`date`输入数据，并将其保存到`date`列中。

*   拆分我的`date`输入数据，并将每个部分保存到`month`、`day`和`year`列中。

然后我会简单地在我的数据库中查询`year`& `month`，然后遍历这些结果来`$data[]`为每个`day`.

这是我应该解决这个问题的正确方法吗？`date`拥有一列以及`month`、`day`和列似乎非常多余`year`。可以只使用`date`( `mm/dd/yyyy`) 列吗？太简单？太复杂了？我想避免为用户提供多个字段来输入日期，最终我将拥有一个 jQuery 日期选择器来帮助确保正确的数据格式。

我知道这似乎是一个简单的问题，但我未能在网上找到简单的代码示例。我发现的大多数内容都已过时（CI 而不是 CI2），对于我正在做的事情来说太复杂了，或者使用的日常内容项目的 URI 段已经包含日期（`~/events/view/yyyy/mm/dd`）。

* * *

**编辑**：

这就是我的模型目前的设置方式：

```
return $this->db->get_where('events', array('yyyy' => $year, 'mm' => $month))->result_array(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:07:30.637

您可以保留所有内容，只需构建查询以将月份和年份作为单独的列返回：

在 SQL 中：

```
SELECT id, 
       title, 
       description, 
       MONTH(date_field) as event_month, 
       YEAR(date_field) as event_year 
FROM my_table
... etc ... 
```

在 Active Record 中（[取自此处](http://ellislab.com/forums/viewthread/74206/#368777)）：

```
$this->db->select('id');
$this->db->select('title');
$this->db->select('description');
$this->db->select("MONTH(date_field) AS event_month");
$this->db->select("YEAR(date_field) AS event_year");
$query = $this->db->get('my_table');
$results = $query->result(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T00:32:06.900

首先，我将`date`列更改为 MySQL“日期”格式，`yyyy-mm-dd`以便利用[内置的 MySQL 日期函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

我原来的 $query 如下，其中`'yyyy'`and`'mm'`是我多余的“年”和“月”列：

```
$this->db->get_where('events', array('yyyy' => $year, 'mm' => $month))->result_array(); 
```

我只是使用内置的 MySQL 日期函数将其更改为以下内容：

```
$this->db->get_where('events', array('YEAR(date)' => $year, 'MONTH(date)' => $month))->result_array(); 
```

这解决了这个问题。现在我不再需要为“年”和“月”维护额外的列。

* * *

此外，我可以将列的“天”部分分配给使用 MySQL“别名”函数`date`调用的虚拟列：`dd`

```
$this->db->select('DAY(date) AS dd'); 
```

但是，这会失败，因为它会覆盖 CI 的默认值`select('*')`。因此，您必须先查看`select()`所有相关列，否则会出错：

```
$this->db->select('*');
$this->db->select('DAY(date) AS dd'); 
```

并将它们放在模型中：

```
// select all relevant columns
$this->db->select('*');

/* use MySQL date functions to creates virtual column called 'dd' containing
"day" portion of the real 'date' column. */
$this->db->select('DAY(date) AS dd'); 

/* use MySQL date functions to match $year and $month to "year" and "month"
portions of real 'date' column. */  
return $this->db->get_where('events', array('YEAR(date)' => $year, 'MONTH(date)' => $month))->result_array(); 
```

# php - jquery ajax 变量到 php

> ID：15279886
> 
> 赞同：3
> 
> 时间：2013-03-07T19:20:02.263
> 
> 标签：php, jquery, ajax, variables, post

我被困住了 2 周，因为我决定使用基于 jquery 库的不错的三视图。我的问题是我试图将选定文件夹的值作为 php 的变量。

我能够获取该值并通过 Jquery 中的 Alertbox 显示它，但该值未发布到 PHP 变量中。echo 什么也没显示。

## 下面的文字只是为了阐明为什么我需要将此解决方案与 php 等一起使用。

然后这个问题就解决了，我将继续努力获取我稍后将发送到 bash 脚本的整个路径，该路径已经完成。它为我的 SQL 数据库创建了一个带有元标记的文本文件，该文件来自 flac 或 mp3 专辑已经完成并正在工作。这个应用程序是本地的数据库维护。

对于我的问题和代码（请注意 jquery 和 ajax 对我来说是全新的）

文件名：file_browser.php Jquery 部分

```
<script>
$(document).ready(function()
{
    $("button").click(function()
    {
        var dir = ($(".active").text())
        $.ajax({
            type: "POST",
            url:"file_browser.php",
            data: dir,
            success: function(data){ 
            alert(dir); dir }
        });
    });
});
</script> 
```

PHP 代码

```
<?php
    echo "<form>
          <button>Append</button>
          <div id'japp'>";
    if (isset($_POST['dir'])) {
        $dir = $_POST['dir']; }
        echo $dir;
       echo "</div> 
              </form>"; 
?> 
```

我会继续努力，现在我至少有机会获得一些帮助，以避免多花一周时间：)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:27:27.350

[来自$.ajax](http://api.jquery.com/jQuery.ajax/)上的 jquery 网站。

> 默认情况下，Ajax 请求使用 GET HTTP 方法发送。如果需要 POST 方法，可以通过设置 type 选项的值来指定该方法。此选项影响数据选项的内容如何发送到服务器。根据 W3C XMLHTTPRequest 标准，POST 数据将始终使用 UTF-8 字符集传输到服务器。
> 
> data 选项可以包含 key1=value1&key2=value2 形式的查询字符串，或 {key1: 'value1', key2: 'value2'} 形式的对象。如果使用后一种形式，则数据在发送之前使用 jQuery.param() 转换为查询字符串。可以通过将 processData 设置为 false 来规避此处理。如果您希望将 XML 对象发送到服务器，则该处理可能是不可取的；在这种情况下，将 contentType 选项从 application/x-www-form-urlencoded 更改为更合适的 MIME 类型。

我假设 $(".active").text() 的值只是您想要传递的值，没有任何配对的键。如上所示，将您的字符串格式化为键/值对，您应该很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:26:22.373

如果你需要你的`$_POST`数组包含一个`dir`元素，你需要发送一个键值对到你的脚本：

```
var dir = { "dir": $(".active").text() }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:24:19.423

解决方案是

```
{
    $("button").click(function()
    {
        var dir = ($(".active").text()); // from my question (gives name of selected dir)
        $.ajax({
            type: "POST",
            url: "file_browser.php",
            data: { dir: "dir" },
            success: function(response){ // function(response) was (data)
            $('#japp').html(dir);        // points to the forms id="japp"
            alert(dir); }
        });
    });
}); 
```

上面的问题解决了。

我提到的另一个问题获取完整路径而不仅仅是目录。部分解决。

将孔路径作为字符串与 dir（需要）+ dir 再一次（不需要）。它还提供了我认为的网站 url，而不是根 (/)（不需要）+来自文件系统的网页上的可见路径（需要）。

这可以通过 php 中的正则表达式来解决，但我将首先尝试通过使用这个 jQuery 函数只获取想要的东西来使其更干净。

将我几乎完成的解决方案留在这里只是为了在需要时提示那里开始。

```
var dir = ($(".active").parent('li').text()); 
```

感谢您的所有帮助并带领我走上正确的道路@Frank B、@jeroen 和 @Zim84

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:31:25.460

你应该试试这个：

```
<script>
$(document).ready(function()
{
    $("button").click(function()
    {
        // setting a key-value
        var dir = { dir: $(".active").text() };
        $.ajax({
            type: "POST",
            url:"file_browser.php",
            data: dir,
            success: function(data){ 
            alert(dir);} //removed the second 'dir'
        });
    });
});
</script> 
```

# css - background-image 不加载图片，div 没有高度

> ID：15279887
> 
> 赞同：2
> 
> 时间：2013-03-07T19:20:06.053
> 
> 标签：css, html

我目前正在学习`HTML`使用`Foundation Game Design with HTML5 and JavaScript By Rex van der Spuy`. 在**定位**章节中，有 HTML 和 CSS 代码来创建一个 div，其中包含三个空 div。然后，这 3 个空 div 中的每一个都有一个`background-image`并加载图像。

但是，我似乎没有得到相同的结果。这是我的代码，类似于书中的代码：

```
<!doctype html>
<html>
    <title> Margins and Padding </title>
    <style>
      #stage{
        display: block;
        width: 600;
        height: 600;
        border-style: dotted;
        border-width: thin;
      }

      .content{
        width: 100;
        height: 100;
        float: left;
      }

      #image1{
        background-image: url("1.jpg");
      }
      #image2{
        background-image: url("2.jpg");
      }
      #image3{
        background-image: url("3.jpg");
      }
    </style>

  <body>
    <div id="stage">
      <div class="content" id="image1"></div>
      <div class="content" id="image2"></div>
      <div class="content" id="image3"></div>
    </div>
  </body>
</html> 
```

这些图像与 HTML 页面位于同一文件夹中。我从网上尝试了一些东西，但没有什么能像在最后添加一个虚拟 div`clear: both`并设置`overflow`父 div 一样有效，但似乎没有任何效果。我得到的只是屏幕顶部的一个空行（父 div）。这本书说应该加载图像（甚至给出打印屏幕）

**请告诉我出了什么问题**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:23:05.800

您缺少宽度和高度的单位。尝试这个：

```
 #stage{
    display: block;
    width: 600px;
    height: 600px;
    border-style: dotted;
    border-width: thin;
  }

  .content{
    width: 100px;
    height: 100px;
    float: left;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:24:40.897

您需要在高度和宽度样式声明中添加单位。“高度：100px；” 或“身高：100%；” 例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:25:37.360

您需要指定宽度和高度的单位。我不得不承认，除了“px”之外，我从来没有使用过任何像素。

```
 #stage{
    display: block;
    width: 600px; <---
    height: 600px;  <---
    border-style: dotted;
    border-width: thin;
  }

  .content{
    width: 100px;  <---
    height: 100px;  <---
    float: left;
  } 
```

# grails - “创建 DB2Driver 对象失败：CCSID 值无效”在 IBM 的码头上启动 Grails 应用程序时

> ID：15279891
> 
> 赞同：4
> 
> 时间：2013-03-07T19:20:38.960
> 
> 标签：grails, db2, jetty, ibm-midrange

我正在尝试在 IBM AS400 上的 jetty-7.6.3 上运行 Grails 网络应用程序。当我这样做时，我得到一个错误，归结为：

```
Caused by: 
java.sql.SQLException: INTERNAL ERROR:  Creation of DB2Driver object for registering with DriverManager failed. -> com.ibm.db2.jdbc.app.DB2JDBCDataException: CCSID value is not valid.
at com.ibm.db2.jdbc.app.DB2ErrorDriver.throwSavedExceptions(DB2ErrorDriver.java:113)
at com.ibm.db2.jdbc.app.DB2ErrorDriver.handleURLProcessing(DB2ErrorDriver.java:296)
at com.ibm.db2.jdbc.app.DB2ErrorDriver.acceptsURL(DB2ErrorDriver.java:149)
at java.sql.DriverManager.getDriver(DriverManager.java:386)
at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)
at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
at org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy$TransactionAwareInvocationHandler.invoke(TransactionAwareDataSourceProxy.java:224)
at $Proxy16.getMetaData(Unknown Source)
at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:285)
at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:320)
at org.codehaus.groovy.grails.orm.hibernate.support.SpringLobHandlerDetectorFactoryBean.afterPropertiesSet(SpringLobHandlerDetectorFactoryBean.java:72)
... 
```

如果有帮助，我可以提供更多的堆栈跟踪。

这是我的数据源：

```
dataSource{
  dbCreate = "update"
  pooled = true
  url = "jdbc:db2:*local;naming=system;libraries=LIBV;errors=full"
  driverClassName = "com.ibm.db2.jdbc.app.DB2Driver"
  username = "user"
  password = "pass"
  dialect = org.hibernate.dialect.DB2400Dialect.class
} 
```

我不知道从哪里开始，也不知道哪个文件的 CCSID 错误。我查看了我的网络应用程序的所有文件，它们似乎很好。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:41:38.420

我不是 Grails 程序员，但我熟悉 IBM i。IBM 支持文档[29290926](http://www-912.ibm.com/s_dir/slkbase.NSF/0/9ea41ee0c6099d1e86256caa006e4b59)指出不允许使用 CCSID 65535。

几十年前，当没有 CCSID 时，已售出并安装了相当多的中端机器。随着操作系统的发展，引入了 CCSID（编码字符集 ID）的概念。当这种情况发生时，升级到新版本操作系统的人被分配了一个默认的 CCSID：65535。CCSID 65535 实际上表示“我不知道你的文件是如何编码的”。实际上，所有文件都被视为二进制数据，如 JPG 或 EXE 文件。

当时的建议是不允许使用默认值，而是分配一个描述实际编码的 CCSID。我在美国的地方，CCSID 是 37 - 美国英语。有一个称为 QCCSID 的系统值将在系统范围内设置此值。另一种方法是更改​​所涉及的用户配置文件。 `CHGUSRPRF username CCSID(37)`

# opencv - 在opencv for iris中使用霍夫圆函数查找小圆

> ID：15279892
> 
> 赞同：0
> 
> 时间：2013-03-07T19:20:41.297
> 
> 标签：opencv, edge-detection, hough-transform, iris-recognition

我需要使用 opencv2 中可用的 HoughCircle 函数检测我拥有的眼睛图片的虹膜。所以 ，

```
// Read the image
       src = imread("D:/001R_3.png");
       if( !src.data )
       { return -1; }

       /// Convert it to gray
     cvtColor( src, src_gray, CV_BGR2GRAY );

       /// Reduce the noise so we avoid false circle detection
      GaussianBlur( src_gray, src_gray, Size(9, 9), 2, 2 );

       /////////////
       /// Generate grad_x and grad_y
        Mat grad_x, grad_y;
        Mat abs_grad_x, abs_grad_y;

       Sobel( src_gray, grad_x, ddepth, 1, 0, 3, scale, delta, BORDER_DEFAULT );
         convertScaleAbs( grad_x, abs_grad_x );

     /// Gradient Y
       //Scharr( src_gray, grad_y, ddepth, 0, 1, scale, delta, BORDER_DEFAULT );
        Sobel( src_gray, grad_y, ddepth, 0, 1, 3, scale, delta, BORDER_DEFAULT );
       convertScaleAbs( grad_y, abs_grad_y );

     /// Total Gradient (approximate)
        addWeighted( abs_grad_x, 0.5, abs_grad_y, 0.5, 0, grad );
      ///////////////
       vector<Vec3f> circles;

        /// Apply the Hough Transform to find the circles
       HoughCircles( grad, circles, CV_HOUGH_GRADIENT, 1, grad.rows/8, 200, 100,0,0 );

        /// Draw the circles detected
            for( size_t i = 0; i < circles.size(); i++ )
              {
      Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
          cout<<center;
           int radius = cvRound(circles[i][2]);
            // circle center
           cout<<radius;
          circle(src, center, 3, Scalar(0,255,0), -1, 8, 0 );
          // circle outline
          circle(src, center, radius, Scalar(0,0,255), 3, 8, 0 );
           }

          /// Show your results
            namedWindow( "Hough Circle Transform Demo", CV_WINDOW_AUTOSIZE );
            imshow( "Hough Circle Transform Demo",src );
               } 
```

所以这是我的代码，只检测到眼睛的外部部分，因为我希望检测到瞳孔和虹膜边界而这没有发生，我参考了链接[OpenCV：使用霍夫圆变换检测虹膜](https://stackoverflow.com/questions/12567520/opencv-using-hough-circle-transformation-to-detect-iris) ，但它没有不能那样工作。代替精明的边缘检测器已经使用了sobel。请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-30T16:50:41.870

Hough 变换的第五个参数是 minDist，即圆之间的最小距离（以像素为单位）。您将此参数设置为图像中的行数除以 8，这意味着不会返回任何重叠的圆圈（例如眼睛的瞳孔和虹膜），因为它们太靠近了。

我会将这个数字设置为变量而不是对其进行硬编码，并尝试使用一组小得多的数字，直到找到可行的方法。

# plugins - 如何从 getLoginStatus() 函数内部更改 fb:registration 标签可见性

> ID：15279894
> 
> 赞同：0
> 
> 时间：2013-03-07T19:20:52.167
> 
> 标签：plugins, facebook-javascript-sdk, registration, facebook-login

这就是我设置登录/注册流程的方式。在 index.html 页面上有一个链接。单击它后，您将被发送到第二个页面，在该页面中检查您的登录状态，如果您未注册或未登录，则会显示 fb 登录/注册框。我所做的是使标签在页面上不可见，直到检查登录状态后？选中后，如果用户未登录或未注册，我希望它变得可见，但它不可见。在检查登录状态之前隐藏注册/登录框的可见性的最佳方法是什么。我不想使用 facebooks login() 函数，因为我不想弹出窗口。我想使用 XFBML 标签。下面是我的代码：

```
<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  <script >
  <base href="http://spilot.koding.com/">

  </script>
</head>
<body>
<div id="fb-root"></div>
<script>

  // Additional JS functions here
 window.fbAsyncInit = function() {
    FB.init({
      appId      : '3967205****88', // App ID
      channelUrl : '//http://spilot.koding.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // get login status

FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // connected
  } else if (response.status === 'not_authorized') {
    // not_authorized

        document.getElementByName("login").style.visibility = visible;

  } else {
    // not_logged_in

      document.getElementByName("login").style.visibility = visible;

  }
 });
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

</script>

<div id="fb-root" name="login" style="visibility:hidden">
<script src="https://connect.facebook.net/en_US/all.js#appId=396720557089188&xfbml=1"></script>

<fb:registration 
  fields="name,birthday,gender,location,email" 
  redirect-uri="http://spilot.koding.com/signedRequest.php" width="530">
</fb:registration> 
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:42:04.257

这是对我有用的解决方案。我决定改用注册插件。我将 iframe 放在一个 div 中并将 div 的可见性设置为“隐藏”，然后在它检查登录状态的初始化代码中，我调用一个使用 document.getElementById().style.visibility ="visible" 的函数来抓取div 并更改其可见性。确保所有需要引号的东西都有它们，这是我最初的错误之一。

```
<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  <script >
  <base href="http://spilot.koding.com/">

  </script>
</head>
<body>
<div id="fb-root"></div>
<script>

  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '396720557******', // App ID
      channelUrl : '//http://spilot.koding.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // connected

  } else if (response.status === 'not_authorized') {
    // not_authorized
    ///log function will change div visibility to "visible"
   log();

  } else {
    // not_logged_in
   log();

  }
 });//closes fb.getLoginStatus
  };// closes fbAsyncInit

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  //change div visibility to visible

  var log = function(){
     document.getElementById('login').style.visibility = "visible";

  }//closes function log()
</script>

//put iframe inside a div and set the div's visibility to hidden. 

<div id ="login" style = "visibility:hidden" >
<iframe src="https://www.facebook.com/plugins/registration?
             client_id=396720557089188&&
             redirect_uri=http://spilot.koding.com/signedRequest.php&
             fields=name,birthday,gender,location,email"
        scrolling="auto"
        frameborder="no"
        style="border:none"
        allowTransparency="true"
        width="100%"
        height="330">
 </iframe>

    </div>

</body>
</html> 
```

# java - JOptionPane如何调用自定义按钮

> ID：15279898
> 
> 赞同：0
> 
> 时间：2013-03-07T19:21:00.893
> 
> 标签：java, swing, jbutton, joptionpane

嘿，我制作了一个显示多个自定义按钮的自定义 JOptionPane

```
String [] codeVlakken = {"Kleur 1", "Kleur 2", "Kleur 3", "Kleur 4" };
JOptionPane.showOptionDialog(null, code , "Cheat menu", JOptionPane.YES_NO_OPTION,
    JOptionPane.PLAIN_MESSAGE, null, codeVlakken, "" ); 
```

因此，在第一行中，我定义了数组中的内容，在最后的第二行中，我放置了我的数组名称，这样它将用我的自定义命名按钮填充它。

现在我想给每个自定义按钮一个不同的颜色，我怎么能从中调用“Kleur 1”？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:38:43.257

该`options`参数采用类型`Object[]`

`String`尝试使用 s数组，而不是使用s 数组`JButton`。

这将允许您在添加到对话框之前创建和定义按钮的属性

**更新**

```
JButton [] codeVlakken = {JButton("Kleur 1")};
JOptionPane.showOptionDialog(null, code , "Cheat menu", JOptionPane.YES_NO_OPTION,
    JOptionPane.PLAIN_MESSAGE, null, codeVlakken, "" ); 
```

# bash - 获取文件夹的名称并与 bash 中的整数进行比较

> ID：15279908
> 
> 赞同：0
> 
> 时间：2013-03-07T19:21:52.973
> 
> 标签：bash, date, directory

好的，所以我要做的是，我所有的备份文件夹都命名为日期 03-07-13。所以我试图选择这一天，如果它大于或等于 7 天，它将被删除。这是我到目前为止所拥有的，但它不起作用。

```
DATE=$(date +"%d")

for i in /media/backupdrive/*; do
    DAY=${i:22:2}
    if [ "$DAY" -ge "7" ]
    then
        echo "day greater than 7";
    fi
done 
```

22:2 切断 /media/backupdrive/00-

00 代表月份

现在它只是检查它是否大于 7，如果是，它会打印出来。

编辑：问题已解决。我要感谢大家帮助 bash 初学者。再次感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:45:55.340

根据评论中给出的屏幕截图，您的实际代码使用以下内容：

```
DAY=${i:22:2}
if [ "$day" -ge "7" ] 
```

`DAY`强调和之间的大小写差异`$day`。当它运行时，它会尝试将空字符串与字符串（或通过 的“数字” `-ge`）进行比较，*这*将导致您收到错误。

尝试更新您的`if`语句以使用大写版本：

```
if [ "$DAY" -ge "7" ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:49:08.633

您似乎想删除超过 7 天的文件。该`find`命令可以为您找到这些文件，并可选择删除它们：

```
find /media/backupdrive -mtime +7         # Files that are older than 7 days
find /media/backupdrive -mtime +7 -delete # ... and delete them 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:40:59.813

使用“DAY”变量会使您面临“刚刚结束”的问题。

一些替代方案：

*   更改文件夹格式，使其更具描述性。
*   在每个文件夹中添加一个元文件，该文件提供一个更易于解析和使用的时间值。
*   具有包含所述数据的备份文件夹的索引。

我通常使用的时间格式包含以下内容：

```
 [epoch seconds]-[YYYY][MM][DD]-[HH]:[MM]:[SS] 
```

这使您可以执行诸如请求从现在起 7 天前的备份之类的操作。您将根据纪元秒数进行数学计算，这避免了天数滚动的混乱。

基本上，纪元秒是为了使时间计算更容易。其他时间戳位使其易于阅读。排序使其在文件夹列表中正确排序。

编辑：

如果您的备份路径发生变化：

```
 DAYtmp=${i: -8:5}
  DAY=${DAYtmp: -2} 
```

如果父路径的长度发生变化，这将从文件夹名称中生成 DAY。

# android - 在android中使用没有预览或表面的相机

> ID：15279911
> 
> 赞同：1
> 
> 时间：2013-03-07T19:21:57.057
> 
> 标签：android, android-camera, surfaceview

我正在寻找一种在没有表面视图或预览的情况下在 android 设备上使用相机的方法。我发现，没有那个预览是不可能拍照的。但是，我发现了一个教程，它实际上是在没有预览的情况下拍照。这是链接：[http ://www.vogella.com/articles/AndroidCamera/article.html](http://www.vogella.com/articles/AndroidCamera/article.html)

在将代码中的摄像头从正面切换到背面后，应用程序没有崩溃，但它给了我一个错误 100。所以它目前只能使用前置摄像头。

我正在使用三星 Galaxy S3(4.1.2)，我将在 Galaxy S2 和 Galaxy S3 Mini 上对其进行测试。

有人对此有很好的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:42:30.917

如果不开始预览，您将无法拍照。

虽然一些 Android 设备更灵活，允许在不运行预览的情况下调用 takePicture，但这在技术上违反了 API 规范。

它不适用于大量设备，因此请不要依赖它。该教程是错误的，并且可能仅在允许此行为的设备之一上进行了测试。

如果您不想要可见的预览，请参阅[此问题](https://stackoverflow.com/questions/10775942/android-sdk-get-raw-preview-camera-image-without-displaying-it/10776349#10776349)以了解在 Android 版本 >= 3.0 中执行此操作的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-25T07:33:50.833

实际上问答的时间间隔很大，但可能对其他人有所帮助。

您甚至可以尝试使用此库从服务中拍照：

[https://github.com/kevalpatel2106/android-hidden-camera](https://github.com/kevalpatel2106/android-hidden-camera)

它使用一项功能来绘制其他应用程序并创建假表面。希望能帮助到你。

# html - 无法从 MJPEG 服务器流式传输

> ID：15279913
> 
> 赞同：0
> 
> 时间：2013-03-07T19:22:02.453
> 
> 标签：html, webkit, video-streaming, html5-video, mjpeg

我正在尝试通过使用从 MJPEG 服务器流式传输，`<video>`但出现以下错误：

```
HTTP "Content-Type" of "multipart/x-mixed-replace" is not supported. Load of media resource http://localhost:8080/stream?topic=/gscam/image_raw?height=240?width=320 failed. 
```

使用以下 HTML 代码：

```
<video src="http://localhost:8080/stream?topic=/gscam/image_raw?height=240?width=320" id="vid"
       height="240" width="320">
</video> 
```

我在 Firefox 和 Chrome 中尝试过，但没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:19:14.880

据我所知，将 MJPEG 流嵌入 Firefox 和 Chrome 的唯一方法是使用标签。

# javascript - 双动画，.stop() 不修复它

> ID：15279918
> 
> 赞同：1
> 
> 时间：2013-03-07T19:22:23.673
> 
> 标签：javascript, jquery, animation

出于某种原因，我无法弄清楚如何在以下脚本中停止双重动画：

```
<script type="text/javascript">
    $(document).ready(function() {
        var activeNews = "01";
        $(".newsNav.forward").click(function(event) {
            event.preventDefault();
            if (activeNews == 01) {
                $(".newsItem.01").stop(true, true).fadeOut(250, function() {
                    $(".newsItem.02").stop(true, true).fadeIn(250);
                });
                activeNews = 02;
            } else if (activeNews == 02) {
                $(".newsItem.02").stop(true, true).fadeOut(250, function() {
                    $(".newsItem.03").stop(true, true).fadeIn(250);
                });
                activeNews = 03;
            } else if (activeNews == 03) {
                $(".newsItem.03").stop(true, true).fadeOut(250, function() {
                    $(".newsItem.01").stop(true, true).fadeIn(250);
                });
                activeNews = 01;
            }
        });
    });
</script> 
```

当您单击`.newsNav.forward`太快时，`.newsItems`会出现多个，而不仅仅是一个。如您所见，我知道`.stop();`应该可以解决此问题，但我不知道为什么它不起作用。

HTML（如果相关）：

```
<div id="news">
    <a class="newsNav back" href="#">&lt;</a>
    <a class="newsNav forward" href="#">&gt;</a>
    <h1>Latest News</h1>
    <div id="newsSlider">
        <p class="newsItem 01 active">First News Item</p>
        <p class="newsItem 02">Second News Item</p>
        <p class="newsItem 03">Third News Item</p>
    </div><!--/#newsSlider-->
    <div style="clear:both;"></div>
</div><!--/#news--> 
```

相关的CSS也是：

```
#contentWrapper #content #news #newsSlider p.newsItem {
        display: none;
    }

    #contentWrapper #content #news #newsSlider p.newsItem.active {
        display: block;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:29:48.720

您只是停止某些类的动画。要在动画中实现“全局”停止，您必须清除所有可能在 JS 函数中进行动画处理的元素的动画队列。

这将意味着做一些事情：

```
$(document).ready(function() {
    var activeNews = "01";
    $(".newsNav.forward").click(function(event) {
        event.preventDefault();

        // Pre-emptively stops all animation
        $(".newsItem").stop(true, true);

        // Note the removal of the .stop() method before each animation
        if (activeNews == 01) {
            $(".newsItem.01").fadeOut(250, function() {
                $(".newsItem.02").fadeIn(250);
            });
            activeNews = 02;
        } else if (activeNews == 02) {
            $(".newsItem.02").fadeOut(250, function() {
                $(".newsItem.03").fadeIn(250);
            });
            activeNews = 03;
        } else if (activeNews == 03) {
            $(".newsItem.03").fadeOut(250, function() {
                $(".newsItem.01").fadeIn(250);
            });
            activeNews = 01;
        }
    });
}); 
```

# javascript - 头部标签中的 JavaScript

> ID：15279920
> 
> 赞同：2
> 
> 时间：2013-03-07T19:22:30.227
> 
> 标签：javascript, html

我有一个看起来像这样的 html 文件。

```
<head>

    <script>
        document.onready
        {
            document.getElementById("demo").innerHTML="Works";
        }
    </script>

</head>

<body>
    <div id="demo">
    </div>
</body> 
```

当我将脚本标签放在页面底部时，一切正常。但是当我将脚本放入`<head></head`标签时，它不起作用。我猜它无法访问脚本下方的元素。

在 StackOverflow 等许多网站上，JavaScript 位于 head 标签中。那么它如何能够访问它下面的 HTML 元素呢？

我现在该怎么办？我应该把我的脚本移到底部还是有一种方法可以让 JavaScript 访问它下面的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:25:24.573

尝试使用这样的东西：

```
window.addEventListener('load', function() { document.getElementById("demo").innerHTML="Works"; }, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:25:39.560

你从哪里来`document.onready`的？那**永远行不通**。

为确保页面已加载，您可以使用`window.onload`;

```
window.onload = function () {
    document.getElementById("demo").innerHTML="Works";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:28:17.650

你的语法不正确。

```
document.ready= function () {
  //code to run when page loaded
}

window.onload = function () {
  //code to run when page AND images loaded
} 
```

# html - 导航栏在ie9中不显示

> ID：15279926
> 
> 赞同：0
> 
> 时间：2013-03-07T19:22:48.863
> 
> 标签：html, css

我无法在 ie9 浏览器中看到我的顶部导航栏......

不在这里工作

在下面提供我的代码

```
<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container" style="width: 1153px;">
          <a class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://v2.defie.co/" style="padding-top: 0px;">
            <img alt="change" class="defieLogo" src="http://www.defie.co/designerImages/defie_logo_only.png">
          </a>
          <div class="nav-collapse collapse" style="height: 0px;">
            <ul class="nav" style="padding-left: 312px;"> 

              <li class="active"><a href="http://v2.defie.co/product.html">Product</a></li>
              <li><a href="http://v2.defie.co/solution.html">Solutions</a></li>
              <li><a href="http://v2.defie.co/service.html">Services</a></li>
              <li class="iphonePartnerLink"><a href="http://v2.defie.co/partner.html">Partners</a></li>
              <li class="iphoneContactLink"><a href="http://v2.defie.co/contact.html">Contact</a></li>
            </ul>

            <ul class="nav" id="navSecond">
              <li class=""><a href="/docs/examples/partners.html">Partners</a></li>
              <li><a href="/docs/examples/contact.html">Contact</a></li>
            </ul>
            <!--<form method="post" class="navbar-form pull-right" action="http://intra.defie.co/Account/">
              <input class="span2" type="text" name="email" placeholder="Email">
              <input class="span2" type="password" name="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form>-->

             <a href="#myModal" role="button" class="btn" data-toggle="modal">Login</a>
             <a href="#myModal" role="button" class="btn" data-toggle="modal" style="margin-left: 20px;">SIGN UP</a>

          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:32:09.627

在`bootstrap.css`默认情况下您有一个 Microsoft 过滤器，您需要查看`.navbar-inner`CSS 中的选择器并删除它：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#333333',endcolorstr='#222222',GradientType=0) 
```

它在您的菜单上显示黑色渐变，只需从 bootstrap.css 文件中删除它，导航菜单就会按预期显示。

# php - 正则表达式匹配字符串的必需和可选部分

> ID：15279936
> 
> 赞同：17
> 
> 时间：2013-03-07T19:23:16.337
> 
> 标签：php, regex

我想对带有可选和必需部分的 uri 字符串进行 preg_match ，但我无法弄清楚。

匹配示例：

```
/segment/(required)/segment(/optional) 
```

我希望下面的两个字符串都与上面的匹配

```
/segment/required/segment/optional 
```

和

```
/segment/reguired/segment 
```

我知道政策是不为我写信，但我想不通，所以我想我至少会问。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-07T19:25:57.460

问号使正则表达式中的前面的标记成为可选的。例如：`colou?r`同时匹配`colour`和`color`。

您可以通过使用圆括号将它们组合在一起并将问号放在右括号之后来使多个标记成为可选。例如：`Nov(ember)?`将匹配`Nov`和`November`。

通过包含多个问号，您可以编写一个匹配许多备选方案的正则表达式。`Feb(ruary)?` `23(rd)?`匹配`February 23rd`,和. `February 23`_`Feb 23rd``Feb 23`

来源：[http ://www.regular-expressions.info/optional.html](http://www.regular-expressions.info/optional.html)

# python - 使用 PySide 从插槽接收到的不完整字符串

> ID：15279941
> 
> 赞同：1
> 
> 时间：2013-03-07T19:23:37.507
> 
> 标签：python, pyqt, pyside, pyserial

我有一个应用程序通过串行端口（使用pyserial）将数据发送到外部模块，该模块在接收时回复。我有一个线程来监视传入的数据，当有时，通过发射函数发送信号。然后，在插槽中，我根据简化的 hdlc 协议分析接收到的数据包。它工作正常，但唯一的问题是，如果帧包含零 (0x00)，则插槽接收到的字符串将被截断。所以我假设发射函数将字符串传递到'0'。这是信号和插槽的代码。

```
def ComPortThread(self):
    """Thread that handles the incoming traffic. Does the basic input
       transformation (newlines) and generates an event"""
    while self.alive.isSet():               #loop while alive event is true
        text = self.serial.read(1)          #read one, with timeout
        if text:                            #check if not timeout
            n = self.serial.inWaiting()     #look if there is more to read
            if n:
                text = text + self.serial.read(n) #get it
            self.incomingData.event.emit(text)

@QtCore.Slot(str)
def processIncoming(self, dataIn):
    """Handle input from the serial port."""
    for byte in dataIn:
        self.hexData.append(int(binascii.hexlify(byte),16))
    .... 
```

例如，如果我在 ComPortThread 中打印变量“text”的内容，我可以获得：

> 7e000a0300030005

如果我对“dataIn”做同样的事情，我会得到：

> 7e

我读过 QByteArray 会保留“0”，但我没有成功使用它（尽管我不确定我是否正确使用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:18:54.863

嗯，好吧，看看[QtSlot 装饰器](http://pythonxy.googlecode.com/hg-history/4ef4255f59b092a123a5788c821434d9fe94aee9/src/python/PyQt4/PLATLIB/PyQt4/doc/html/new_style_signals_slots.html#the-pyqtslot-decorator)，表单是：

```
PyQt4.QtCore.pyqtSlot(types[, name][, result])
Decorate a Python method to create a Qt slot.

Parameters: 
types – the types that define the C++ signature of the slot. Each type may be a Python type object or a string that is the name of a C++ type.
name – the name of the slot that will be seen by C++. If omitted the name of the Python method being decorated will be used. This may only be given as a keyword argument.
result – the type of the result and may be a Python type object or a string that specifies a C++ type. This may only be given as a keyword argument. 
```

而且看起来因为 pyserial 的读取返回一个[字节 python 类型](http://pyserial.sourceforge.net/pyserial_api.html#serial.Serial.read)：

```
read(size=1)¶
Parameters: 
size – Number of bytes to read.
Returns:    
Bytes read from the port.
Read size bytes from the serial port. If a timeout is set it may return less characters as requested. With no timeout it will block until the requested number of bytes is read.

Changed in version 2.5: Returns an instance of bytes when available (Python 2.6 and newer) and str otherwise. 
```

尽管如 2.5 版和 python 2.6 版所述。考虑到这一点，我会考虑确保您符合提到的两个版本并尝试：

```
@QtCore.Slot(bytes)
def processIncoming(self, dataIn):
    """Handle input from the serial port."""
    for byte in dataIn:
        self.hexData.append(int(binascii.hexlify(byte),16))
    .... 
```

看看这是否适合你。

# objective-c - 在 Objective C 中创建网络数据包的规范方法是什么？

> ID：15279942
> 
> 赞同：0
> 
> 时间：2013-03-07T19:23:39.383
> 
> 标签：objective-c, network-programming, packets

来自 python 我可以做这样的事情。

```
values = (1, 'ab', 2.7)
s = struct.Struct('I 2s f')
packet = s.pack(*values) 
```

我可以用 python 非常简单地将任意类型打包在一起。在 Objective C 中执行此操作的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:30:10.563

不是很清楚一个问题，但也许你正在寻找一个（打包结构）？

```
__attribute__((packed)) struct NetworkPacket {
    int integer;
    char character;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:30:21.687

使用 C 结构是正常的方法。例如：

```
typedef struct {
    int a;
    char foo[2];
    float b;
} MyPacket; 
```

将为 int、2 个字符和一个浮点数定义一个类型。然后，您可以将这些字节解释为用于写入的字节数组：

```
MyPacket p = {.a = 2, .b = 2.7};
p.foo[0] = 'a'; 
p.foo[1] = 'b';

char *toWrite = (char *)&p; // a buffer of size sizeof(p) 
```

# android - 使用带有原生 Android 界面的 cordova 插件

> ID：15279945
> 
> 赞同：0
> 
> 时间：2013-03-07T19:23:43.427
> 
> 标签：android, cordova, native, phonegap-plugins

我为 Android 编写了一个 Cordova 插件来构建一个带有 HTML5 GUI 的 phonegap 应用程序。

我现在也想拥有一个原生界面，并且想知道将我的插件重用于原生 UI 的最佳选择是什么。基本上我想要两个应用程序，一个带有 phonegap (HTML5) 界面，一个带有原生 Android 界面，它们都使用 Cordova 插件。

该插件扩展了`CordovaPlugin`该类，因此我不知道如何在不从 javascript 中调用以下方法的情况下使用它`WebView`，如此处所述[http://docs.phonegap.com/en/2.3.0/guide_plugin -development_android_index.md.html](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index.md.html)

```
exec(<successFunction>, <failFunction>, <service>, <action>, [<args>]); 
```

我只想调用插件的本机端而不通过`WebView`：

```
@Override
public boolean execute(String action, JSONArray args,
        CallbackContext callbackContext) throws JSONException { ... } 
```

假设我可以相当轻松地调整插件中的代码，我想找到一种方法使插件保持完全相同，以便更好地解耦前端/后端（我可以在一个应用程序中更改代码而无需复制它在另一个应用程序中）。

这可能吗？我知道这不是拥有 Cordova 插件的重点，但我想找到一种解决方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:30:39.623

在我看来，您需要申请`Facade pattern`：

[http://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)

只需将您的业务逻辑从 Cordova 插件提取到名为的专用类`MyFacade`并将所有业务逻辑隐藏在后面。

另一种方法是做这样的事情：

```
MyCordovaPlugin myPlugin = new MyCordovaPlugin();
myPlugin.execute("foo", new JSONArray(), new MyCallbackContext() {
    @override
    public void handlePluginResult(PluginResult pluginResult) {
        //your code for handling plugin result for Android UI
    }
} 
```

实施在哪里`MyCallbackContext`：

```
public abstract class MyCallbackContext extends CallbackContext {

    public MyCallbackContext() {
        super(null, null);
    }

    public void sendPluginResult(PluginResult pluginResult) {
        synchronized (this) {
            if (finished) {
                Log.w(LOG_TAG, "Attempted to send a second callback for ID: " + callbackId + "\nResult was: " + pluginResult.getMessage());
                return;
            } else {
                finished = !pluginResult.getKeepCallback();
            }
        }

        handlePluginResult(pluginResult);
    }

    public abstract void handlePluginResult(PluginResult pluginResult);

} 
```

第二种方式仅适用于当前版本的 Cordova，并且基于以下源代码：

[https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/api/CordovaPlugin.java](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/api/CordovaPlugin.java)

[https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/api/CallbackContext.java](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/api/CallbackContext.java)

# html - 理解使用语义 我最近与另一位使用非表格数据的开发人员进行了讨论。

| Server: | Development |

我指出 问问题

> ID：15279947
> 
> 赞同：2
> 
> 时间：2013-03-07T19:24:01.440
> 
> 标签：html, html-table

我最近与另一位使用`<table>`非表格数据的开发人员进行了讨论。

```
<table><tr><td> Server: </td><td> Development </td></tr></table> 
```

我指出[表格数据不止一维，不鼓励使用表格进行样式/展示](http://www.w3.org/TR/html5-author/the-table-element.html#the-table-element)。他回答说，仅仅因为表格是一行并不意味着数据是非表格的。

在我看来，如果“表格数据”具有多个维度，则至少需要两行和两列。但是，他指出`<table><tr><td></td></tr></table>`（以及`<table></table>`）[两者都 validate](http://validator.w3.org/)，如果他使用`<table>`不正确，W3C 就不清楚了，他们的验证器做得很差。

我认为这`<table>`应该用于表示表格*数据*，无论结果结构是否为表格，因为它们可能是警告。在上面的示例中，永远只有一台服务器，但您可能有零或多行多列数据，这些数据可能在某个日期范围内被过滤。

我的问题是谁在这里？如果我误解了规范，那我*怎么*会误解？如果您有表格*数据*但没有足够的过滤数据打印出多行（即，如果它在一个小日期范围内过滤）仅打印列标题是不正确的吗？您是否也应该打印“未找到结果”完整的 colspan 行？如果数据`<table>`必须是多维的，为什么要验证单列和/或单行表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:34:44.120

我同意其他人的观点，标记的有效性不等同于标记的语义。

*表格数据*应该有一个列标题来描述它包含的数据。所以最小的表格是，（1 列有 1 行数据，该列应该有一个标题）：

```
<table>
    <thead>
        <tr>
            <th>My Heading</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>my value</td>
        </tr>
    </tbody>
</table> 
```

如果要表示`"no results found"`它应该显示在表格之外。因为`no results found`**不是数据**。没有结果应该在表格中不显示任何内容，或者更好的是，隐藏表格并显示您的`no results found`消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:53:02.290

> 在我看来，如果“表格数据”具有多个维度，则至少需要两行和两列。但是，他指出`<table><tr><td></td></tr></table>`（以及`<table></table>`）两者都可以验证，如果他使用`<table>`不正确，W3C 就不清楚了，他们的验证器做得很差。

标记的有效性与语义绝对无关。`<p>`本身就是有效的 HTML，即使空段落在写作中没有意义。同样，以下三个表都是有效的，即使它们不包含实际数据：

```
<table></table>

<table>
  <tbody>
</table>

<table>
  <thead><tr><th>
  <tbody>
  <tfoot><tr><th>
</table> 
```

但是，正如您所观察到的，`<tr>`没有子元素的元素是无效的：

```
<table>
  <tr>
</table> 
```

[我不清楚为什么会这样，因为我在当前的 HTML 5.0 CR](http://www.w3.org/TR/html5/tabular-data.html)中找不到任何规则指出一个`<tr>`元素必须至少有一个子元素，要么是 a`<td>`要么是`<th>`元素（它只是说它可能包含[零或更多的任何一种](http://www.w3.org/TR/html5/tabular-data.html#the-tr-element)）。

无论如何，如果一张表只包含一行，那就这样吧；这仅仅意味着表中只列出了一条记录。但是表格数据语义不是这个表是否只有一行的问题，而是这个结构是否适合以*二维格式表示的任意数量的数据记录*。这就是构成表格数据的内容。

在您的示例中，“Server”是否可能有多个条目（顺便说一下，如果它是一个真正的表格标题，它应该是 a`<th>`而不是 a`<td>`并且不应该包含冒号）？如果不是，并且您要做的就是告诉用户他们在哪个服务器上，那么表格不是用于呈现此信息的最合适的元素。您可能应该使用标题或标签，以及其他一些文本容器来表示“发展”值。

> 如果您有表格*数据*但没有足够的过滤数据打印出多行（即，如果它在一个小日期范围内过滤）仅打印列标题是不正确的吗？您是否也应该打印“未找到结果”完整的 colspan 行？

是否选择显示“未找到结果”行取决于您；任何一种方式都应该是可以接受的。在这种情况下，您所拥有的只是一个旨在包含表格数据但由于某种原因没有任何数据要呈现的表格。

> 如果数据`<table>`必须是多维的，为什么要验证单列和/或单行表？

因为即使是 1x1 正方形（即 1²）网格仍然被认为是二维的，即使这个单个单元格是`<th>`没有伴随行的（同样，有效性和语义是两个非常不同的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:40:38.290

我对表格的问题——我与只知道如何使用它们的开发人员一起工作——是我不能像移动 div 标记中的数据那样容易地移动表格标记中的内容。当然，您可以将表格制作成几乎任何东西，并且几乎可以像 div 标签一样轻松地移动它，但是表格本身涉及更多开销（更多标签）。

您最终需要花费更多时间来调整填充、间距等。与使用 DIV 相比，使用表格的整体效率要低得多，并且需要更多的代码/在视觉上不易阅读的代码。我喜欢我的表格标签在整洁的单独行中，就像另一个回答者提供的代码示例一样；否则你会冒着奇怪嵌套的风险。使用 DIV 的嵌套问题要少得多。

也就是说，很多人觉得 DIV 令人困惑，不知道如何处理更灵活的标签。

所以这是个人喜好问题，真的。您知道并愿意学习的 CSS 越多，您使用 DIV 的可能性就越大。网站越简单，不了解 CSS 的开发人员越多，您希望使用的表格就越容易。在不触及 HTML 代码的情况下彻底重新格式化页面时，您只会限制您的可行性。（或生成 HTML 代码的后端服务器代码）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:28:00.783

**Valid != Semantic**，让我们从它开始。我可以`<div>`单独用 s 制作整个网页，这是否使它具有语义？不。

表格数据并不*一定*意味着它有多个维度（尽管这确实有帮助！）。表格数据的意思是“放在表格中最有意义的表格”。虽然它确实**需要是数据**，但在表格中放置导航链接根据定义是无语义的。

这取决于他在这张桌子里放了什么。可能是一张桌子很好，试着举一个他实际放在那里的例子。

# android - Android SupportMapFragment 看不到片段内的地图

> ID：15279953
> 
> 赞同：4
> 
> 时间：2013-03-07T19:24:07.950
> 
> 标签：android, google-maps-android-api-2

我试图在我的代码中将 SupportMapFragment 添加到 FrameLayout 中，但我得到一个空指针异常。

**我的代码：**

**主要片段：**

```
public class MainFragment extends FragmentActivity{

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);       
        setContentView(R.layout.activity_main);             
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft = getSupportFragmentManager().beginTransaction();
        SecondFragment second = new SecondFragment();
        ft.add(R.main_activity.frame, second);
        ft.addToBackStack(null);
        ft.commit();
    }       
} 
```

**第二片段：**

```
public class SecondFragment extends SupportMapFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.activity_map, null);       
    }
} 
```

**我的 XML：**

**活动主：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        layout="@layout/header" />

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="7.06" 
        android:id="@+main_activity/frame"
        android:background="@drawable/defaultbg"/>

    <include
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        layout="@layout/footer" />

</LinearLayout> 
```

**活动地图：**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment        
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</FrameLayout> 
```

**我的日志猫：**

```
03-07 21:20:17.160: E/AndroidRuntime(1617): FATAL EXCEPTION: main
03-07 21:20:17.160: E/AndroidRuntime(1617): java.lang.RuntimeException: Unable to resume activity {com.WhosAround/com.WhosAround.MainFragment}: java.lang.NullPointerException
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2124)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2139)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1672)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.os.Looper.loop(Looper.java:130)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread.main(ActivityThread.java:3691)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at java.lang.reflect.Method.invoke(Method.java:507)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at dalvik.system.NativeStart.main(Native Method)
03-07 21:20:17.160: E/AndroidRuntime(1617): Caused by: java.lang.NullPointerException
03-07 21:20:17.160: E/AndroidRuntime(1617):     at maps.z.r.onResume(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:115)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.os.Binder.transact(Binder.java:279)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onResume(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.maps.SupportMapFragment$a.onResume(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.internal.e$1.a(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.internal.e.a(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.internal.e.onResume(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at com.google.android.gms.maps.SupportMapFragment.onResume(Unknown Source)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.Fragment.performResume(Fragment.java:1503)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:947)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.FragmentManagerImpl.dispatchResume(FragmentManager.java:1871)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.FragmentActivity.onResumeFragments(FragmentActivity.java:455)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.support.v4.app.FragmentActivity.onPostResume(FragmentActivity.java:444)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.Activity.performResume(Activity.java:3867)
03-07 21:20:17.160: E/AndroidRuntime(1617):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2114)
03-07 21:20:17.160: E/AndroidRuntime(1617):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T19:48:51.297

您只是忘记调用`super.onCreateView();`您的`SecondFragment`.

如果您覆盖`onCreateView()`SupportMapFragment，您需要记住调用 super 方法，因为这是所有“动作”发生的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T14:40:47.410

我也有同样的问题，所以我的临时解决方案是不要使用 SupportMapFragment 来使用 MapFragment 进行更改。

希望这可以帮到你。

# c# - 通用方法无法显式转换

> ID：15279954
> 
> 赞同：0
> 
> 时间：2013-03-07T19:24:16.063
> 
> 标签：c#

```
//I know for sure that the animal being passed is a Tiger
protected virtual void Eat<AnimalType>(Animal animal)
where AnimalType : Animal
 {
   //The animal type is a Tiger type.
   //Should be equivalent to :
   //Tiger myDerivedAnimal = animal as Tiger;
   AnimalType myDerivedAnimal = animal as AnimalType;

   if (myDerivedAnimal != null)
   {
       myDerivedAnimal.eat();
   }
} 
```

当我打电话时：

```
Eat<Tiger>(anAnimalThatIsATiger); 
```

由于某种原因， as cast 正在返回我的空对象。我查看了调试器，传入参数的动物是引用老虎的动物，那么为什么这个演员无法返回我的老虎？截至目前，myDerivedAnimal 填充了默认值（0、null 等）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:25:30.910

这不是泛型的工作方式，你想要更像这样的东西：

```
protected virtual void Eat<AnimalType>(AnimalType animal)
where AnimalType : Animal 
```

约束将强制它继承`Animal`. 请注意，参数类型从更改`Animal`为`AnimalType`

但是，从代码的外观来看，您甚至不需要泛型。您可以在其根部使用继承并调用

```
animal.Eat() 
```

这可能是因为 SO 的简化，所以至少你不需要演员表，因为这是由泛型本身处理的：

```
protected virtual void Eat<AnimalType>(AnimalType animal)
    where AnimalType : Animal
 {
   if(animal == null) return;
   animal.eat();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:39:08.477

我试过这段代码：

```
class P
{
    class Animal {}
    class Tiger : Animal {}
    static void M<T> (Animal animal) where T : Animal
    {
        T t = animal as T;
        System.Console.WriteLine(t == null);
    }
    static void Main ()
    {
       Animal animal = new Tiger();
       M<Tiger>(animal);
    }
} 
```

我得到了`False`。因此，我无法重现您的问题。**提供一个小而完整的程序，它可以实际重现您所描述的行为。**要么你会通过这样做找到你的错误，要么你会给我们一些我们可以实际分析的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:45:14.467

这个对我有用：

```
 class Animal {
    public virtual void eat()
    {
      Console.WriteLine("Animal.eat()");
    }
  }

  class Tiger : Animal {
    public override void eat()
    {
      Console.WriteLine("Tiger.eat()");
    }
  }

  class SomethingElse {

    protected virtual void Eat<AnimalType>(Animal animal) 
    where AnimalType : Animal
     {
       AnimalType myDerivedAnimal = animal as AnimalType;

       if (myDerivedAnimal != null)
       {
           myDerivedAnimal.eat();
       }
    }

    public void Test()
    {
      var myTiger = new Tiger();
      Eat<Tiger>(myTiger);
    } // Test
  }

  class Program {
    static void Main(string[] args)
    {
      new SomethingElse().Test();
    }
  } 
```

当我运行它时，它会打印

```
 Tiger.eat() 
```

正如预期的那样。

# php - PHP 登录/注册错误

> ID：15279955
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:24:21.050
> 
> 标签：php, login-script

好的，我的大学讲师要求我使用 PHP 创建一个登录系统。现在我阅读了有关 PHP 的信息，因为我对它并不熟悉。我使用了这段代码并自己编写了一些代码。

```
<?php

session_start();

$username = $_POST ['username'];
$password = $_POST ['password'];

if ($username&&$password) {
    $connect = mysql_connect("localhost","root","") or die("Couldn't Connect");
    mysql_select_db("phplogin") or die ("Couldn't find Database");
    $query = mysql_query("SELECT * FROM users WHERE username='$username'")'
     $numrows = mysql_num_rows ($query);
if ($numrows!=0) {

    while ($row = mysql_fetch_assoc()) {
        $dbusername = $row['username'];
        $dbpassword = $row['password'];
    }

    if ( ($username==$dbusername) && ($password==$dbpassword) ) {
        echo "you are in,<a href ='member.php'> Click here</a> to enter member page";
        $_SESSION['username']=$dbusername;
    } else {
        echo "Incorrect password";
} else {
    die ("That user does not exist");
}
echo $numrows;

} else {
    die("Please enter a username and password")
} 
```

?>

这是我正在使用的 Index.php。我的登录页面很简单，有两个字段：用户名和密码，带有登录和注册按钮。在我从数据库中获取的字段中输入详细信息后，它会在页面的最顶部显示。

> 点击此处进入会员页面"; $_SESSION['username']=$dbusername; } else echo "密码错误"; } else die ("该用户不存在"); echo $numrows; } else die("请输入用户名和密码") ?>

我的注册页面也有问题，该页面有 4 个字段，您必须填写：用户名、电子邮件、密码和确认密码，以及用于“注册”为用户的注册按钮。

> ```
> <?php //Register process $submit = $_POST['submit']; 
> ```
> 
> //表单数据 $name = strip_tags ($_POST['name']); $username = strip_tags ($_POST['username']); $password = md5 (strip_tags ($_POST['password'])); $confirmpassword = strip_tags ($_POST['confirmpassword']); $date = date("Ymd");
> 
> 如果（$提交）{
> 
> if ($username&&$password&&$confirmpassword) { //加密密码 $password = md5 ($password); $确认密码 = md5 ($确认密码); if ($password==$confirmpassword) { //检查字符长度 if (strlen ($username) >25 || strlen ($name) >25) { echo "length of Username or Name is too long"; } else { //检查密码长度 if (strlen ($password) >20||strlen($password)<5) { echo "password must be between 5 and 20 characters"; } else { //注册用户 } } } else echo "你的密码不匹配！";
> 
> ```
>  }           else        echo "Please fill in <b>all</b> feidls!"; } ?> 
> ```
> 
> 您的全名： 选择用户名： 选择密码： 确认您的密码：

但是，即使在向字段输入详细信息之前，大量代码也会出现在页面顶部。

> 25 || strlen ($name) >25) { echo "用户名或名称的长度太长"; } else { //检查密码长度 if (strlen ($password) >20||strlen($password)<5) { echo "password must be between 5 and 20 characters"; } else { //注册用户 } } } else echo "你的密码不匹配！"; } else echo "请填写所有字段！"; } ?>

有人可以告诉我我在这里做错了什么吗？我使用 Xampp 来制作我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:30:56.597

您需要在不同的行上有内联注释和可执行代码。

你有这个：

```
//check character length            if (strlen ($username) >25 || strlen ... 
```

它正在评论该`if`声明。它需要是这样的：

```
//check character length            
if (strlen ($username) >25 || strlen ... 
```

你这样做了几次：`//Register process $submit = $_POST['submit'];`- $submit 永远不会被定义，因为它在评论中。

干得好。我心情很好。我什至添加了关闭`</td>`s 和一个`<body>`标签，因为它们也丢失了：

```
<?php

//Register process 
$submit = $_POST['submit'];

//form data 
$name            = strip_tags($_POST['name']);
$username        = strip_tags($_POST['username']);
$password        = md5(strip_tags($_POST['password']));
$confirmpassword = strip_tags($_POST['confirmpassword']);
$date            = date("Y-m-d");

if ($submit) {

    if ($username && $password && $confirmpassword) { //encrypt password
        $password        = md5($password);
        $confirmpassword = md5($confirmpassword);
        if ($password == $confirmpassword) {
            //check character length            
            if (strlen($username) > 25 || strlen($name) > 25) {
                echo  "length of Username or Name is too long";
            } else {
                //checks password length
                if (strlen($password) > 20 || strlen($password) < 5) {
                    echo "password must be between 5 and 20 characters";
                } else {
                    //registers user
                }
            }
        } else {
            echo "Your passwords to not match!";
        }

    } else {
        echo "Please fill in <b>all</b> feidls!";
    }
} // end if submit 

?>

<html>
    <body>
        <form action='register.php' method='POST'>
            <table>
                <tr>
                    <td> Your full Name:</td>
                    <td><input type='text' name='name'></td>
                </tr>
                <tr>
                    <td> Choose a Username:</td>
                    <td><input type='text' name='username'></td>
                </tr>
                <tr>
                    <td> Choose a Password:</td>
                    <td><input type='password' name='password'></td>
                </tr>
                <tr>
                    <td> Confirm your Password:</td>
                    <td><input type='password' name='confirmpassword'></td>
                </tr>
            </table>
            <p><input type="button" onclick="window.location.href='member.php'" value="Register"></p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T10:31:00.610

实际上，看起来您正在调用它以重定向到 form.html，但已经向浏览器输出了一些信息。这将导致错误。您需要在输出任何内容之前尝试重定向。所以你真的应该在输出之前调用 valid 。

# php - 在 php 脚本中未收到通过来自 android 应用程序的 http post 传递的参数

> ID：15279956
> 
> 赞同：1
> 
> 时间：2013-03-07T19:24:31.857
> 
> 标签：php, android

我尝试了不同的解决方案，这些解决方案已经在这里回答了类似的问题，但它不起作用。帮助我在下面的这些代码中找到错误。

安卓端

```
Button b2= (Button) findViewById(R.id.buttons3);
    b2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

                     //String test="hello";

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://192.168.2.1/prosample.php");

        List<NameValuePair> params = new ArrayList<NameValuePair>(2);
        params.add(new BasicNameValuePair("test", "hello"));

        try {
            httppost.setEntity(new UrlEncodedFormEntity(params, "UTF-8"));
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        //Execute and get the response.
        HttpResponse response;
        try {
            response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            if (entity != null) {

            }
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        }
    }); 
```

//php

```
 <?php
      $conn = mysql_connect("localhost","root","");
      if(!$conn) die("unable to connect to MYSQL:".mysql_error());
      else echo "connected to the server" ;
      mysql_select_db("proj",$conn);// or die("Unable to select database",mysql_error());
      $hello = $_POST['test'];
      echo $hello;  

      $query = "INSERT into pro(colmn) values ('$hello')";
      $result = mysql_query($query);
      if (!$result) die ("Database access failed: " . mysql_error());
      else echo "AWESOME!!!!";
    ?> 
```

我发现，这里的“测试”中没有收到传递的参数。. ，因为我在android中输入并通过'test'传递的字符串“hello”没有被插入到db“proj”中的表pro中。我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:38:34.187

让这个答案对可能面临这个问题的人有用。代码没有问题。问题在于在同一系统中使用 wamp 服务器和 connectify，同时在本地主机中尝试它。

# java - 为什么我的 BufferedImage 来自字节数组返回 null？

> ID：15279964
> 
> 赞同：5
> 
> 时间：2013-03-07T19:24:55.140
> 
> 标签：java, image

基本上，我正在做的是将图像转换为字节数组，对其进行处理，然后在获得字节数组后，将其转换回图像。这是我将字节数组转换为图像的方法。

```
InputStream in = new ByteArrayInputStream(result); //result is the byte array
BufferedImage bImageFromConvert;
try {
   bImageFromConvert = ImageIO.read(in);
   ImageIO.write(
      bImageFromConvert, watermark_ext, new File(extracted_name_path));
} catch (Exception e) {
   return e.getMessage();
} 
```

现在这段代码非常适用于 PNG 或 JPG 图像，但是当我将它用于 BMP 图像时，它返回一个异常，表明 bImageFromConvert 为空。谁能帮我知道为什么会这样？感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:33:18.927

答案[在 Javadoc 中](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#read%28javax.imageio.stream.ImageInputStream%29)：

> 返回一个 BufferedImage 作为使用从当前注册的那些中自动选择的 ImageReader 解码提供的 ImageInputStream 的结果。如果没有注册的 ImageReader 声称能够读取流，则返回 null。

[上一篇关于 SO](https://stackoverflow.com/questions/8220567/why-doesnt-imageio-read-a-bmp-file-until-it-is-re-saved-in-ms-paint)的文章更详细。

[javax.imageio.ImageIO.getImageReadersBySuffix()](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#getImageReadersBySuffix%28java.lang.String%29)方法可能对您有用。

# ruby - Error installing sinatra-contrib on Windows 7 with Ruby 2.0.0

> ID：15279970
> 
> 赞同：2
> 
> 时间：2013-03-07T19:25:24.973
> 
> 标签：ruby, sinatra

I am attempting to install the sinatra-contrib gem on Windows 7, and I am getting the error shown below. Any ideas?

```
U:\>gem install sinatra-contrib
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing sinatra-contrib:
        ERROR: Failed to build gem native extension.

    C:/Ruby200-x64/bin/ruby.exe extconf.rb
checking for main() in -lssl... no
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... no
checking for __NR_inotify_init in sys/syscall.h... no
checking for writev() in sys/uio.h... no
checking for rb_wait_for_single_fd()... yes
checking for rb_enable_interrupt()... no
checking for rb_time_new()... yes
checking for windows.h... yes
checking for winsock.h... yes
checking for main() in -lkernel32... yes
checking for main() in -lrpcrt4... yes
checking for main() in -lgdi32... yes
creating Makefile

make
generating rubyeventmachine-x64-mingw32.def
compiling binder.cpp
cc1plus.exe: warning: command line option '-Wdeclaration-after-statement' is valid for C/ObjC but not for C++ [enabled by defa
cc1plus.exe: warning: command line option '-Wimplicit-function-declaration' is valid for C/ObjC but not for C++ [enabled by de
In file included from binder.cpp:20:0:
project.h:26:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
In file included from project.h:149:0,
                 from binder.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
In file included from c:\rubydevkit\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/include/proce
                 from c:/Ruby200-x64/include/ruby-2.0.0/ruby/win32.h:60,
                 from c:/Ruby200-x64/include/ruby-2.0.0/ruby/defines.h:153,
                 from c:/Ruby200-x64/include/ruby-2.0.0/ruby/ruby.h:70,
                 from c:/Ruby200-x64/include/ruby-2.0.0/ruby.h:33,
                 from em.h:24,
                 from project.h:150,
                 from binder.cpp:20:
c:\rubydevkit\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/include/sys/types.h:68:16: error: c
id_t pid_t'
In file included from binder.cpp:20:0:
project.h:97:13: error: 'pid_t' has a previous declaration as 'typedef int pid_t'
In file included from project.h:150:0,
                 from binder.cpp:20:
em.h:84:47: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:85:76: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:86:56: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:88:57: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:89:60: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:90:58: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:91:36: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:93:47: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:99:42: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:116:45: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
em.h:125:36: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
In file included from project.h:151:0,
                 from binder.cpp:20:
ed.h: In member function 'void EventableDescriptor::SetSocketInvalid()':
ed.h:43:40: warning: overflow in implicit constant conversion [-Woverflow]
In file included from project.h:154:0,
                 from binder.cpp:20:
eventmachine.h: At global scope:
eventmachine.h:46:61: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:47:112: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:48:69: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:50:73: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:65:75: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:66:74: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:67:77: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:68:41: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
In file included from project.h:154:0,
                 from binder.cpp:20:
eventmachine.h:103:58: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:105:60: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
eventmachine.h:108:41: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
make: *** [binder.o] Error 1

Gem files will remain installed in C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/eventmachine-1.0.1 for inspection.
Results logged to C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/eventmachine-1.0.1/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:59:14.897

sinatra-contrib depends on EventMachine, which is currently broken for Ruby 2.0 and even more, GCC 4.7.2 used by RubyInstaller.

There is a thread at RubyInstaller group about this [here](https://groups.google.com/d/topic/rubyinstaller/EtMDMAI6g_c/discussion) and was reported to EventMachine too, as [issue #412](https://github.com/eventmachine/eventmachine/issues/412)

A request to separate sinatra-contrib from eventmachine was made too, long ago, as [issue #30](https://github.com/sinatra/sinatra-contrib/issues/30), but it never got fixed officially.

Until compilation issues with GCC 4.7.2 are solved in EventMachine, the only workaround will be ask sinatra maintainers to remove eventmachine dependency.

Hope that helps.

# iis - IIS 网站无法访问与默认网站使用的相同应用程序池的网络共享，该网站确实有效

> ID：15279972
> 
> 赞同：2
> 
> 时间：2013-03-07T19:25:32.187
> 
> 标签：iis, application-pool, remote-server, network-share, network-service

我们有一个使用 IIS 默认网站和虚拟目录的生产应用程序（经典 ASP、IIS 7.5）。应用程序从文档共享访问文档。它有效并且已经工作了很多年。

最近，我们在默认网站下添加了许多新的 Web 应用程序，我们正试图将它们分离到它们自己的 IIS 网站中。因此，我们设置了一个新的 IIS 网站并使用绑定让应用程序使用新网站，并使用指向完全相同代码的相同应用程序池。（注意：我们的应用程序使用子域来指向不同的数据库，所以我们只取了一个子域并将其绑定到新站点）。

由于某种原因，可从默认网站访问的文档在新网站中无法访问。但是鉴于两者都使用相同的应用程序池，因此共享相同的应用程序池标识，一个网站怎么可能访问共享，而另一个网站不能呢？

更多信息。我们尝试使用域用户作为应用程序池标识和 NETWORKSERVICE，这两者都在默认情况下工作，在新网站中都不起作用。另外，我们如何访问文档？我们有一个简单地使用 ADO Stream 对象的 ASP 文件，我们使用“\\docserver\documents...”引用该文件（这在两个网站中也是相同的，因为它们都在查看相同的代码。

# php - mysql_fetch_array() 警告和 mysql_num_rows() 警告

> ID：15279975
> 
> 赞同：-4
> 
> 时间：2013-03-07T19:25:39.887
> 
> 标签：php, mysql, mysql-num-rows

我是新的（从今天开始）PHP 和 MySQL 到我的一个迷你项目。我有我的数据库，我编写了一个 PHP 代码来从表中获取 user_id 和分数，但我得到了这个错误，我不知道如何解决它们：你最终可以看到我得到了我请求的响应。

> 警告：mysql_fetch_array() 期望参数 1 是资源，字符串在第 15 行的 /home/marathon/domains/marathon-il.com/public_html/Apps/million/view_all.php 中给出
> 
> 警告：mysql_num_rows() 期望参数 1 是资源，在第 18 行的 /home/marathon/domains/marathon-il.com/public_html/Apps/million/view_all.php 中给出 null {"success":0,"message" ：“新用户”}

这是我的 getinfo.php：

```
<?php

$response = array();

require_once __DIR__ . '/db_connect.php';

$db = new DB_CONNECT();

$user = $_POST['userid'];

$result = mysql_fetch_array("SELECT * FROM users WHERE user_id = '$user'");

// check for empty result
if (mysql_num_rows($result) > 0){

        $userinfo = array();
        $userinfo["user_score"] = $result["score"];
        $userinfo["user_date"] = $result["date"];

        $response['info']= $userinfo;
    $response["success"] = 1;

    echo json_encode($response);;

} 
else {
    $response["success"] = 0;
    $response["message"] = "new_user";
    echo json_encode($response);
}
?> 
```

请帮助修复它 - 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:28:05.123

mysql_fetch_array 期望来自 mysql_query 调用的结果对象

它应该是这样的 `$result = mysql_query("SELECT......."); $var = mysql_fetch_array($result);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:28:28.253

您必须首先实际执行查询。试着抬头`mysql_query`

```
$result = mysql_query("SELECT * FROM users WHERE user_id = '$user'")
$ar = mysql_fetch_array($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:29:18.697

使用 mysql_fetch_array 函数的正确方法如下。请注意，我们首先执行创建资源对象的查询。然后我们将该对象传递给 mysql_fetch_array 和 mysql_num_rows 函数：

```
$result = mysql_query("SELECT * FROM users WHERE user_id = '$user'") or die(mysql_error());
while($row=mysql_fetch_array($result)){
    $userinfo = array();
    $userinfo["user_score"] = $row["score"];
    ....
} 
```

同样，您应该使用 mysql_num_rows 如下（假设 $result 对象已经创建）：

```
$numRows = mysql_num_rows($result); 
```

请注意，您不应使用 mysql_* 函数，而应学习[mysqli](http://php.net/manual/en/book.mysqli.php)函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:36:41.200

在您当前的代码中，您从未真正对数据库运行查询。您必须先使用`mysql_query()`，然后才能使用`mysql_num_rows()`或`mysql_fetch_array()`。因为您没有将结果集资源传递给这些函数，所以您会收到错误消息。

尝试这个：

```
$sql_result = mysql_query("SELECT * FROM users WHERE user_id = '$user'");

if (false === $sql_result) {
    // query failed for some reason
    throw new Exception('Query failed with error: ' . mysql_error());
}

$rows = mysql_num_rows($sql_result);
$result = array();

if ($rows > 1) {
    // too many rows were returned
    throw new Exception('Too many rows returned');
} else if (mysql_num_rows($result) === 1){
    $result = mysql_fetch_array($result);
    // continue  with rest of your code 
```

您绝对应该考虑使用 mysqli 或 PDO 而不是 mysql 函数。我只回复了一个答案，向您展示逻辑步骤是什么（对于 mysqli 或 PDO 类似）以及您应该如何实际处理每个数据库函数的所有可能结果。确保那里有错误处理。在尝试解决查询、数据库连接等问题时，它将为您节省大量时间。

您还需要查看您的 SQL 注入漏洞，因为您根本没有转义输入。

# ssl - 如何为 HTTPS 服务器设置私钥/公钥和证书？

> ID：15279989
> 
> 赞同：0
> 
> 时间：2013-03-07T19:26:23.367
> 
> 标签：ssl, https, openssl, ssl-certificate, private-key

我正在开发将包含在我的 android 应用程序中的小型 HTTPS 服务器。客户端将是浏览器。用户可以浏览到我的 HTTPS 服务器上的包含。有人可以告诉我就证书和私钥/公钥而言，我需要什么样的设置。我打算使用 openssl 创建我的自签名证书。

仅供参考，我已经完成了初始设置。而且由于我的证书是自签名的，浏览器会显示警告以接受它，风险自负。所以我相信服务器身份验证正在工作。服务器需要什么来验证客户端？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:51:18.310

在 android 设备上托管 HTTPS 网络服务器的问题是证书是使用域名验证的。如果没有域名，客户端浏览器将显示错误，除非在本地安装并信任服务器证书。

这两个选项是：

1.  注册一个域名，使用动态 dns，然后根据该名称请求一个 ssl/tls 证书。
2.  [以编程方式安装自签名证书](https://stackoverflow.com/questions/12957731/installing-self-signed-certificate-programmatically)

有一个支持 https 的 Android 库：http: [//tjws.sourceforge.net/](http://tjws.sourceforge.net/)

# c++ - qpbo 库无法编译

> ID：15279996
> 
> 赞同：3
> 
> 时间：2013-03-07T19:27:00.900
> 
> 标签：c++, image-processing, computer-vision

我正在尝试编译 QPBO 库。图书馆，我从以下网址下载：http: [//pub.ist.ac.at/~vnk/software.html](http://pub.ist.ac.at/~vnk/software.html)

我正在使用 QPBO.h 中给出的示例进行测试。

这是我的 CMakelists.txt（我不认为这里有什么问题，但是......）

```
project(qpbo_test)

cmake_minimum_required(VERSION 2.8)

include_directories(./)

file(GLOB allsrc "QPBO_extra.cpp" "QPBO_maxflow.cpp" "QPBO_postprocessing.cpp" "QPBO.cpp")

add_library(CommonLib ${allsrc})

add_executable(qpbo main.cpp)

target_link_libraries(qpbo CommonLib) 
```

当我做 cmake 。并制作，我收到以下错误：

> ld：架构 x86_64 的 216 个重复符号

我认为问题在于我没有使用模板初始化文件instances.inc但是如何使用它？