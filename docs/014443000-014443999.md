# StackOverflow 问答 14443000-14443999

# c++ - CUDA 中的推力::device_vector

> ID：14443001
> 
> 赞同：1
> 
> 时间：2013-01-21T16:28:51.377
> 
> 标签：c++, visual-studio-2010, cuda

我是 CUDA 新手，正在尝试学习用法。有人可以帮忙吗？我在主要功能中有以下内容（我在 Visual Studio 中，我的源文件和头文件分别是 .cu 和 .cuh）

```
 thrust::device_vector<float> d_vec(100);
 kernel<<<100,1>>>(d_vec); 
```

然后在内核中我有

```
 template <typename T> __global__ kernel(thrust::device_vector<T> d_vec)
    {  int tid = threadIdx.x + blockIdx.x*blockDim.x;
       T xxx = 3.0;
       d_vec[tid] = xxx;
     } 
```

我的目标是用 float 调用内核一次，用 double 调用内核一次。另请注意，在这个简单的示例中，我有变量 xxx （在我的实际情况下，它是一些产生双精度或浮点数的计算）。

我得到两个错误：1> 不允许从函数调用`__host__`函数（运算符 =）`__global__`2> 不允许从函数调用函数`__host__`（运算符 []）`__global__`

所以我猜“d_vec[tid] = ..”中的“[]”和“=”是问题所在。但我的问题是如何访问内核中的设备向量。有人可以澄清什么是正确的程序以及我做错了什么。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:43:58.620

推力::device_vector 对象/引用不能用作内核参数。您可以使用原始指针来传递设备矢量数据。

```
thrust::device_vector<float> d_vec(100);
float* pd_vec = thrust::raw_pointer_cast(d_vec.data());
kernel<<<100,1>>>(pd_vec); 
```

这是内核的原型

```
template <typename T> __global__ kernel(T* pd_vec) 
```

优Q和这个类似。[如何将推力::device_vector<int> 转换为原始指针](https://stackoverflow.com/questions/11113485/how-to-cast-thrustdevice-vectorint-to-raw-pointer)

# php - 如何使用模式 7 找到 MySQL WEEK 函数的 PHP 等效项？

> ID：14443002
> 
> 赞同：1
> 
> 时间：2013-01-21T16:28:56.807
> 
> 标签：php, mysql, mode, week-number

使用 PHP，我如何找到周数：

*   一周的第一天是星期一，
*   第 1 周是今年第一周有星期一，
*   范围是1-53？

我正在尝试实现与 MySQL 代码等效的 PHP：

```
SELECT WEEK(date('Y-m-d'), 7); 
```

如本网站所示： http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

示例（我试图用错误的语言实现，MySQL）：

```
$dbh = new PDO("mysql:host=localhost;dbname=test", "root", "");

$stmt = $dbh->prepare("SELECT WEEK('2012-12-30', 7) as week");
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);
echo "2012-12-30 = ".$result['week']."<br />";

$stmt = $dbh->prepare("SELECT WEEK('2012-12-31', 7) as week");
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);
echo "2012-12-31 = ".$result['week']."<br />";

$stmt = $dbh->prepare("SELECT WEEK('2013-01-01', 7) as week");
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);
echo "2013-01-01 = ".$result['week']."<br />";

$stmt = $dbh->prepare("SELECT WEEK('2013-01-06', 7) as week");
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);
echo "2013-01-06 = ".$result['week']."<br />";

$stmt = $dbh->prepare("SELECT WEEK('2013-01-07', 7) as week");
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);
echo "2013-01-07 = ".$result['week']."<br />"; 
```

输出：（我正在寻找的输出）

```
2012-12-30 = 52
2012-12-31 = 53
2013-01-01 = 53
2013-01-06 = 53
2013-01-017 = 1 
```

我的尝试：（使用正确的语言 PHP，但结果错误）

```
$date = new DateTime('2012-12-30');
echo "2012-12-30 = ".$date->format('W')."<br />";
$date = new DateTime('2012-12-31');
echo "2012-12-31 = ".$date->format('W')."<br />";
$date = new DateTime('2013-01-01');
echo "2013-01-01 = ".$date->format('W')."<br />";
$date = new DateTime('2013-01-06');
echo "2013-01-06 = ".$date->format('W')."<br />";
$date = new DateTime('2013-01-07');
echo "2013-01-07 = ".$date->format('W')."<br />"; 
```

输出（错误结果）

```
2012-12-30 = 52
2012-12-31 = 01
2013-01-01 = 01
2013-01-06 = 01
2013-01-07 = 02 
```

我觉得我错过了一些相当基本的东西。对此的任何帮助将不胜感激，并在此先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:57:04.940

[`strftime`](http://pl1.php.net/manual/en/function.strftime.php)并且[`strtotime`](http://pl1.php.net/manual/en/function.strtotime.php)应该帮助你。在你的情况下，这段代码应该做你想做的事：

`strftime(%V, strtotime('2013-01-21'))`

# django - 如何使用 Django 的“额外”方法按计算属性进行过滤？

> ID：14443006
> 
> 赞同：1
> 
> 时间：2013-01-21T16:29:00.627
> 
> 标签：django, django-queryset

我的应用程序中有一个搜索功能，它接收“城市”和“持续时间”输入（两个列表）并返回按包“评级”排序的前 30 个匹配的“包”结果。

如果所有参数都是列，则很容易实现，但“持续时间”和“评级”是计算属性。这意味着我不能使用标准的 Django 查询来过滤包。看来我需要在这里[使用](https://stackoverflow.com/questions/1652577/django-ordering-queryset-by-a-calculated-field)Django 的“额外”方法，但我的 SQL 不是很好，这似乎是一个非常复杂的查询。

我应该在这里使用额外的方法吗？如果是这样，该声明会是什么样子？

适用的代码复制如下。

```
#models.py
class City(models.Model):
    ...
    city = models.CharField(max_length = 100)

class Package(models.Model):
    ....
    city = models.ManyToManyField(City, through = 'PackageCity')

    @property
    def duration(self):
        duration = len(Itinerary.objects.filter(package = self))
        return duration

    @property
    def rating(self):
        #do something to get the rating
        return unicode(rating)

class PackageCity(models.Model):
    package = models.ForeignKey(Package)
    city = models.ForeignKey(City)

class Itinerary(models.Model):
    # An Itinerary object is a day in a package, so len(Itinerary) works for the duration
    ...
    package = models.ForeignKey(Package)

#functions.py
def get_packages(city, duration):
    cities = City.objects.filter(city = city) # works fine
    duration_list = range(int(duration_array[0], 10), int(duration_array[1], 10) + 1) # works fine

    #What I want to do, but can't because duration & rating are calculated properties
    packages = Package.objects.filter(city__in = cities, duration__in = duration_array).order_by('rating')[:30] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:31:42.750

首先，不要在查询集上使用 len()，使用 count()。 [https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)

其次，假设您正在使用您的评级属性计算平均评级，您可以使用注释： [https ://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)

然后您可以执行以下操作：

```
queryset = Package.objects.annotate({'duration': Count('related-name-for-itinerary', distinct=True), 'rating': Avg('packagereview__rating')}) 
```

其中“PackageReview”是我刚刚制作的一个假模型，它有一个外键来打包，并且有一个“评级”字段。

然后，您可以按此处所述过滤带注释的查询集： [https](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#filtering-on-annotations) ://docs.djangoproject.com/en/dev/topics/db/aggregation/#filtering-on-annotations （注意注释->过滤器之间的子句顺序差异, 和过滤器 -> 注释。

属性是在运行时计算的，因此您真的不能将它们用于过滤或类似的事情。

# reporting-services - 如何防止 NULL 数据集的参数错误？

> ID：14443008
> 
> 赞同：0
> 
> 时间：2013-01-21T16:29:04.623
> 
> 标签：reporting-services, parameters, null, footer

我开发了一个 RDL 文件，其参数设置为我的一个数据集的字段值，名为“客户端”。我在页脚中使用此参数值，因为这是让客户端正确显示在页脚中的唯一方法。其他方法客户端值并不总是正确显示。

这是这个参数属性的样子： ![在此处输入图像描述](../Images/c35ef8bf9179427e3bf78559083af371.png)

因此，如果有数据，则此方法有效，但是，如果 rpt_rd_RecreationTherapy 中没有记录，则出现以下错误： ![在此处输入图像描述](../Images/a7d4c6b0052f471c67a787afc1775409.png)

在我的页脚中，我将一个文本框设置为以下内容：

```
=iif(isnothing(Parameters!new_youth.Value),"",Parameters!new_youth.Value) 
```

是的，我在参数配置中选中了“允许空白值”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:25:51.673

杰伦可能是正确的。我将使用报告管理器访问报告、参数设置并更新它以匹配 BIDS 设置。

# java - Solr 4 - 索引发布的文本文件

> ID：14443015
> 
> 赞同：1
> 
> 时间：2013-01-21T16:29:15.067
> 
> 标签：java, solr, solr4

我正在尝试创建一个名为“sku”的字段 - 它使用以下分析器进行索引：

```
<fieldType name="sku" class="solr.TextField">
   <analyzer>
  <tokenizer class="solr.PatternTokenizerFactory" pattern="(SKU|Part(\sNumber)?):?\s(\[0-9-\]+)" group="3"/>
</analyzer>
 </fieldType> 
```

这是通过阅读此处的文档[http://lucidworks.lucidimagination.com/display/solr/Tokenizers#Tokenizers-RegularExpressionPatternTokenizer](http://lucidworks.lucidimagination.com/display/solr/Tokenizers#Tokenizers-RegularExpressionPatternTokenizer)

我已经有一个成功发布到 solr 服务器的 Java 程序，但是它没有从任何文件中抓取 sku 并为它们编制索引。这是我的Java代码：

```
ContentStreamUpdateRequest up = new ContentStreamUpdateRequest(
                "/update/extract");
        up.addFile(arg0, arg0.getName());

        up.setParam("literal.id", arg0.getName());
        up.setParam("uprefix", "attr_");
        up.setParam("fmap.content", "attr_content");

        up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);

        server.request(up); 
```

任何帮助表示赞赏。

我知道我可以自己解析文本文件并提取 SKU 并将它们在参数中发布到服务器，但我认为 Solr 可以为我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:11:32.907

很难说发生了什么，因为中间有几个步骤。

例如，您的 schema.xml 定义是什么。是否肯定使用**sku**作为其类型（而不是说字符串）。那么，字段名称是什么（attr_sku？），提取处理程序映射实际上是否正确映射到它？提取处理程序通常将元数据作为单个字段发送，然后将所有文件内容作为一个大的长字段发送。sku 在元数据中的某个地方吗？

我会将 copyField 放入非处理内容中，并查看内容是否真正进入 Solr 字段。然后，我将开始对正则表达式本身进行故障排除。

# ruby - bootstrap-sass 和 simple_forms 的问题

> ID：14443020
> 
> 赞同：1
> 
> 时间：2013-01-21T16:29:24.880
> 
> 标签：ruby, ruby-on-rails-3, twitter-bootstrap, simple-form

我的应用程序中有一个错误，但我不知道去哪里找。当我使用 simple_form 格式重构我的表单时，例如：

```
<%= simple_form_for([@schedule.doctor, @schedule], :html => { :class => 'form-horizontal'}) do |f| %>

    <%= f.label :start_time %>
    <%= f.text_field :start_time %>
    <%= f.label :day %>
    <%= f.select :day, Date::DAYNAMES.zip((0..6).to_a) %>
    <%= f.label :is_available %>
    <%= f.check_box :is_available %>

    <%= f.submit %>
<% end %> 
```

这是它生成的 HTML 代码（见粗体字）

```
<form id="new_schedule" class="simple_form form-horizontal" novalidate="novalidate" method="post" action="/doctors/1/schedules" accept-charset="UTF-8">
**<div style="margin:0;padding:0;display:inline">**
<label class="time optional control-label" for="schedule_start_time">Start time</label>
<input id="schedule_start_time" class="ui-timepicker-input" type="text" size="30" name="schedule[start_time]" autocomplete="off">
<label class="integer optional control-label" for="schedule_day">Day</label>
<select id="schedule_day" name="schedule[day]">
<label class="boolean optional control-label" for="schedule_is_available">Is available</label>
<input type="hidden" value="0" name="schedule[is_available]">
<input id="schedule_is_available" type="checkbox" value="1" name="schedule[is_available]">
<input type="submit" value="Create Schedule" name="commit">
</form> 
```

知道什么可能导致这个问题吗？

我正在使用带有 simple_forms 的 bootstrap-sass

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T10:54:27.010

```
# Use this setup block to configure all options available in SimpleForm.
SimpleForm.setup do |config|
  config.wrappers :bootstrap, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
    b.use :html5
    b.use :placeholder
    b.use :label
    b.wrapper :tag => 'div', :class => 'controls' do |ba|
      ba.use :input
      ba.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
      ba.use :hint,  :wrap_with => { :tag => 'p', :class => 'help-block' }
    end
  end

  config.wrappers :prepend, :tag => 'div', :class => "control-group", :error_class => 'error' do |b|
    b.use :html5
    b.use :placeholder
    b.use :label
    b.wrapper :tag => 'div', :class => 'controls' do |input|
      input.wrapper :tag => 'div', :class => 'input-prepend' do |prepend|
        prepend.use :input
      end
      input.use :hint,  :wrap_with => { :tag => 'span', :class => 'help-block' }
      input.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
    end
  end

  config.wrappers :append, :tag => 'div', :class => "control-group", :error_class => 'error' do |b|
    b.use :html5
    b.use :placeholder
    b.use :label
    b.wrapper :tag => 'div', :class => 'controls' do |input|
      input.wrapper :tag => 'div', :class => 'input-append' do |append|
        append.use :input
      end
      input.use :hint,  :wrap_with => { :tag => 'span', :class => 'help-block' }
      input.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
    end
  end

  # Wrappers for forms and inputs using the Twitter Bootstrap toolkit.
  # Check the Bootstrap docs (http://twitter.github.com/bootstrap)
  # to learn about the different styles for forms and inputs,
  # buttons and other elements.
  config.default_wrapper = :bootstrap
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:22:40.483

解决方案：

我需要将它设置`config.default_wrapper = :bootstrap`在`simple_form.rb`文件中，并确保使用 simple_forms `tags`。

# ikimagebrowserview - IKImageBrowserView 选择问题

> ID：14443022
> 
> 赞同：1
> 
> 时间：2013-01-21T16:29:31.583
> 
> 标签：ikimagebrowserview, ikimagebrowsercell

例如，初始状态是所有图像被选中 ![在此处输入图像描述](../Images/14a0c0be82f4ada7c64059c6c8f391be.png)

当我单击一个时，我希望它未选中，但当前状态是对操作没有响应 ![在此处输入图像描述](../Images/2d968f03117bcd6dbd62878dd64afa74.png)

有一些设置吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:02:33.023

最后，我找到了解决方案。在 IKImageBrowserView 的同一文件中添加以下代码。

```
@interface IKImageBrowserView (event)

- (void)mouseDown:(NSEvent *)theEvent ;

@end

@implementation IKImageBrowserView (event)

- (void)mouseDown:(NSEvent *)theEvent
{
    NSPoint pt = [self convertPoint: theEvent.locationInWindow fromView: nil];

    NSInteger index = [self indexOfItemAtPoint:pt] ;

    if ( index != NSNotFound )
    {
    NSUInteger ge ;
    NSUInteger le ;
    NSIndexSet* set = [self selectionIndexes] ;
    NSMutableIndexSet* mutableSet = [[NSMutableIndexSet alloc] init] ;

    [mutableSet addIndexes:set] ;

    ge = [mutableSet indexGreaterThanOrEqualToIndex:index] ;
    le = [mutableSet indexLessThanOrEqualToIndex:index] ;

    if ( (ge == le) && (ge != NSNotFound) )
    {
        [mutableSet removeIndex:index] ;
    }
    else
    {
        [mutableSet addIndex:index] ;
    }

    [self setSelectionIndexes:mutableSet byExtendingSelection:NO] ;
//      [ mutableSet release ];
    }
}

@end 
```

# c# - 使用选择和参数插入

> ID：14443027
> 
> 赞同：2
> 
> 时间：2013-01-21T16:29:53.993
> 
> 标签：c#, asp.net, mysql, visual-studio-2010

首先......在有人来到这里并将其标记为“重复问题”之前，请仔细查看我的问题！

我有一个`Parameters`用来传递值的插入，但是`only`我需要一个字段来选择它的值，看：

```
INSERT INTO chamados (club, project, function, description, priority) (@club, @proj, @func, @description, @pri)"; 
```

只有`club`我需要从 SELECT 查询中获取的字段。我怎么做？

Obs：这不是一个重复的问题。我在其他线程中看到的所有内容都显示了如何`all`从选择中获取值，而我只需要一个……我通过参数/字符串传递的所有其他值。. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:32:20.610

您可以在`select`语句中混合硬编码变量和表中的值：

```
INSERT INTO chamados (club, project, function, description, priority) 
SELECT club, @proj, @func, @description, @pri
FROM YourTable 
```

# html - 显示 li 时用锚填充 li:inline

> ID：14443029
> 
> 赞同：0
> 
> 时间：2013-01-21T16:29:57.960
> 
> 标签：html, css

经过大约 15/20 分钟的研究和谷歌搜索，我还没有找到解决方案。

我正在尝试用锚填充列表项，但是 li 设置为显示内联代码：

```
#nav{
    font-family:"chaparral-pro", Georgia, "Times New Roman", serif;
    position: relative;
    background-color: #404041;
    width: 100%;
    height: 40px;
    text-align: center;
    font-size: 15px;
    margin-top: -15px;
}

#nav a{
    color: #f9a13e;
    text-decoration: none;
}

#nav a{
    display: inline-block;
    height: 100%
}

#nav a:hover{
    color: #fff;
    text-decoration: none;
}

ul#navInner{
    position: relative;
    text-align: left;
    width: 840px;
    margin: 0 auto;
    height: 40px;
    padding-top: 10px;
}

ul#navInner li{
    display: inline;
    border-right: 1px solid white;
    height: 40px;
    padding: 11px 8px 16px 8px;
}

li.noBorderR{
    border: none !important;
} 
```

HTML：

```
<div id="nav">
  <ul id="navInner">
    <li><a href="_#">Home</a></li>
    <li><a href="_#">About Us</a></li>
    <li><a href="_#">Our People</a></li>
    <li><a href="_#">How can we help</a></li>
    <li><a href="_#">Newsroom</a></li>
    <li><a href="_#">Resources</a></li>
    <li><a href="_#">Careers</a></li>
    <li><a href="_#">Contact Us</a></li>
    <li class="noBorderR"><a href="_#">Text Size</a></li>
  </ul>
</div><!-- end nav --> 
```

很抱歉在这里发布这样一个基本问题！这个我想不通！

如果我将 a{} 设置为 display: block 它会将整个 li 放在块上，而 inline-block 什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:33:42.373

您可以只使用填充和高度/宽度来填充您需要的空间吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:34:32.303

如何将高度和宽度应用于`<a>`标签并`line-height`在 css 中设置列​​表项的高度？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:43:40.860

不要在 li 上设置填充和高度，而是在 a 上设置这些并将其设置为显示块。然后将 line-height 设置为与 a 高度相同，文本将在中间垂直对齐。

如果您希望链接水平显示，请将 li 向左浮动。我总是发现，在设计导航样式时，最好从最里面的元素开始并解决。

# android - 尝试运行PhoneGap APP时出现AndroidManifest问题

> ID：14443035
> 
> 赞同：1
> 
> 时间：2013-01-21T16:30:22.373
> 
> 标签：android, xml, cordova, android-manifest

)，我尝试运行我的第一个 PhoneGap APP，并按照此页面上的步骤操作：

[http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)

看来我做的一切都很好，但是当我尝试在 Eclipse 上作为 Android 应用程序运行时，我收到以下错误：

[2013-01-21 13:13:02 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] C:\Users\Inaki\workspace\AppPrueba\AndroidManifest.xml 的解析器异常：元素提示“清单”debe ir seguido de una de estas especificaciones de atributo: ">" o "/>"。[2013-01-21 13:13:02 - AppPrueba] XML 文件中的错误：正在中止构建。

它是西班牙语，所以翻译基本上是说“清单”后面必须跟着“>”或“/>”。我做了教程中指定的清单修改，我想因为我不了解 XML，所以我一定搞砸了一些东西。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.appprueba"
android:versionCode="1"
android:versionName="1.0" 
<supports-screens                        /*this line eclipse displays the error*/
android:largeScreens="true"
android:normalScreens="true"
android:smallScreens="true"
android:resizeable="true"
android:anyDensity="true"/>
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:configChanges="orientation|keyboardHidden" 
        android:name="com.example.appprueba.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name="org.apache.cordova.DroidGap" 
        android:label="@string/app_name" 
        android:configChanges="orientation|keyboardHidden"> 
        <intent-filter></intent-filter> 
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:40:38.360

它应该如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.appprueba"
android:versionCode="1"
android:versionName="1.0" >

<supports-screens
android:largeScreens="true"
android:normalScreens="true"
android:smallScreens="true"
android:resizeable="true"
android:anyDensity="true"/>
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:configChanges="orientation|keyboardHidden" 
        android:name="com.example.appprueba.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name="org.apache.cordova.DroidGap" 
        android:label="@string/app_name" 
        android:configChanges="orientation|keyboardHidden"> 
        <intent-filter></intent-filter> 
    </activity>
</application>

</manifest> 
```

**supports-screens**应该是清单内容的一部分，而不是作为某种清单属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-29T11:09:36.620

对我来说，这是因为华为图书馆没有更新。看这里：[更新 Gradle 到 7.0.2 后，元素类型“manifest”必须后跟任一属性规范，“>” 或“/>”错误](https://stackoverflow.com/q/68575710/1363087)

# rdf - SPARQL 计数多个图中的出现次数

> ID：14443039
> 
> 赞同：4
> 
> 时间：2013-01-21T16:30:40.767
> 
> 标签：rdf, sparql

我正在尝试编写一个 SPARQL 查询来计算多个图中对象的出现次数。示例数据和预期输出如下：

命名图 g1：

```
@prefix g1: <http://example.com/g1#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
g1:ex1 rdfs:label "a" .
g1:ex2 rdfs:label "a" .
g1:ex3 rdfs:label "b" .
g1:ex3 rdfs:label "d" . 
```

命名图g2：

```
@prefix g2: <http://example.com/g2#> .    
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
g2:ex1 rdfs:label "a" .
g2:ex2 rdfs:label "b" .
g2:ex3 rdfs:label "c" . 
```

SPARQL 查询的预期输出：

```
?label ?g1count ?g2count
a      2        1
b      1        1
c      0        1
d      1        0 
```

我可以通过合并 rdfs:labels 并计算出现次数来获得两个图的总数：

```
prefix g1: <http://example.com/g1#>
prefix g2: <http://example.com/g2#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?label count(?label) as ?count
{
  {
    GRAPH g1: {
      ?s rdfs:label ?label
    }
  } UNION {
    GRAPH g2:
    {
      ?s rdfs:label ?label
    }
  }
} 
```

我认为从这里我可以使用每个 UNION 块中的子查询来获取单个计数，但是除了这种查询可能效率低下之外，我没有任何运气获得预期的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:38:35.603

从 RobV 的回答中打高尔夫球（评论太大）：

```
prefix g1: <http://example.com/g1#>
prefix g2: <http://example.com/g2#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?label (count(?s1) as ?g1count) (count(?s2) AS ?g2count)
{
  {
    GRAPH g1: {
      ?s1 rdfs:label ?label
    }
  } UNION {
    GRAPH g2: {
      ?s2 rdfs:label ?label
    }
  }
} group by ?label order by ?label 
```

结果：

```
---------------------
| label | g1c | g2c |
=====================
| "a"   | 2   | 1   |
| "b"   | 1   | 1   |
| "c"   | 0   | 1   |
| "d"   | 1   | 0   |
--------------------- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:39:51.630

您可以利用`COUNT`函数忽略未绑定值并为变量指定不同名称的事实，即

```
prefix g1: <http://example.com/g1#>
prefix g2: <http://example.com/g2#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT (COALESCE(?label, ?label2) AS ?label) (count(?label1) as ?g1count) (count(?label2) AS ?g2count)
{
  {
    GRAPH g1: {
      ?s rdfs:label ?label1
    }
  } UNION {
    GRAPH g2:
    {
      ?s rdfs:label ?label2
    }
  }
} 
```

该`COALESCE`函数用于将实际值组合到标签中成为单个变量，因为`COALESCE`从参数返回第一个非空值

# python - 使用 Python lxml 进行 XML XPath 搜索无法过滤 text() 输出

> ID：14443045
> 
> 赞同：0
> 
> 时间：2013-01-21T16:30:59.253
> 
> 标签：python, xpath, lxml, elementtree

可能遗漏了一些明显的东西——当我过滤一般的“a”节点时，我可以看到它们的文本——包括我想要的目标链接——很好：

```
ipdb> print [x.text for x in root.xpath(u".//a")]
[u'\u0391\u03c0\u03bf\u03c3\u03cd\u03bd\u03b4\u03b5\u03c3\u03b7', None, ... ] 
```

但是，当我过滤上面返回的第一个“a”元素中包含的特定文本时，我什么也得不到：

```
ipdb> print [x.text for x in root.xpath(
    u".//a[text()=" + 
    u'\u0391\u03c0\u03bf\u03c3\u03cd\u03bd\u03b4\u03b5\u03c3\u03b7' + 
    u']'  )]
[]
ipdb> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:53:12.113

这里有两种语言：Python 和 XPath。他们每个人都有引用的字符串。

在解释 Python 语法时，传递给`.xpath()`（您的 XPath 表达式）的字符串内容是这样的：`.//a[text()=Some text]`. 然而，文本的文字字符串需要在 XPath: 中引用`.//a[text()="Some text"]`。然后，您需要将其编码为 Python 字符串。在这里，您有几个选择：

```
.xpath('.//a[text()="Some text"]')
.xpath(".//a[text()=\"Some text\"]")
.xpath(""".//a[text()="Some text"]""") 
```

# jquery - 如何在动态内容上使用一种方法？(jQuery)

> ID：14443046
> 
> 赞同：0
> 
> 时间：2013-01-21T16:31:01.687
> 
> 标签：jquery, dynamic

我想检测用户何时按下了 contenteditable div 中的键。但是，div 是动态加载的，我只想抓住第一次按键。

我想要与[jquery 相同的结果只捕获第一个按键吗？](https://stackoverflow.com/questions/4891678/jquery-catch-a-first-keypress-only)但对于动态内容。

到目前为止我的代码：

```
$(document).on('keypress',"#divid",function(){}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:33:30.837

如果你只想抓住第一个按键，你可以使用[`one`](http://api.jquery.com/one/#one-events-selector-data-handlereventObject)它（是的，真的`one` - 这是一个可怕的双关语）：

```
$(document).one('keypress',"#divid",function() { }); 
```

或者在触发时显式删除处理程序（可能在检查某些条件之后）：

```
$(document).on('keypress',"#divid",handler);

function handler() {
    $(document).off('keypress',"#divid");
} 
```

（是的，上帝保佑我们，这个函数真的被调用了[`off`](http://api.jquery.com/off/)。）

# c++ - 加载位图文件 (.bmp)

> ID：14443052
> 
> 赞同：1
> 
> 时间：2013-01-21T16:31:23.720
> 
> 标签：c++, bitmap, boost-gil

我注意到 boost::gil::extension::io 只支持 png 或 jpeg 文件。虽然这通常足够了，但我想知道如何将位图 (*.bmp) 文件加载到图像中？这实际上不应该比 jpeg 等更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T05:31:28.060

希望你解决了。只需添加：在现有的 boost 上安装最新版本的 GIL，然后编译。位图文件位于新的“io_new”文件夹下。

# erlang - 遍历目录中的每个文件

> ID：14443059
> 
> 赞同：5
> 
> 时间：2013-01-21T16:31:42.247
> 
> 标签：erlang

erlang 对我来说是一门陌生的语言，这周我一直在玩多种语言，我经常来这里寻求帮助，现在我在 erlang 上，我又一次陷入困境:)

基本上我要做的就是以下但在erlang中：

```
Dim objFSO, objFile, objFolder

Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
Set objFolder = objFSO.GetFolder(currentDirectory))

For Each objFile in objFolder.Files
   do something with the file
   do something else
   do more stuff
Next 
```

我最接近的是：

```
-export([main/1]).

main([]) -> 
find:files("c:\","*.txt", fun(F) -> {
       File, c:c(File)
}end). 
```

显然，不工作，也没有像我需要的那样......但我已经尝试了很多方法并阅读了很多示例，但根本无法找到解决方案，也许语言不适合这种东西？

这需要作为 escript（erlang 脚本）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T00:10:51.837

很难准确地推荐您应该使用哪种方法，因为您的“做某事”伪代码太模糊了。

有两种主要的方法，一种是在像 Erlang 这样的函数式语言中迭代一个列表：`map`和`fold`.

最大的问题归结为：您想对这些文件做什么？您是要对文件进行汇总（即总文件大小或其他内容），还是要为每个文件存储一些值（即每个文件大小单独），还是要对文件做一些事情*，*然后您不在乎这些文件的返回值是什么（即重命名每个文件）？

我将使用从以下位置返回的文件列表快速给出每个示例`file:list_dir/1`：

```
{ok, Filenames} = file:list_dir("some_directory"), 
```

**折叠式的**

在这里，我们将使用目录中所有文件的文件大小总计`lists:foldl`（正如@legoscia 提到的，在这种情况下，`filelib:fold_files`可能是更好的选择）

```
TotalSize = lists:foldl(fun(Filename,SizeAcc) ->
                FileInfo = file:read_file_info("some_directory/" ++ Filename),
                FileSize = FileInfo#file_info.size,
                SizeAcc + FileSize
            end, 0, Filenames). 
```

**映射**

在这里，我们将获得一个文件名列表以及每个文件的文件大小，使用`lists:map`. 结果列表的格式为 = `[{"somefile.txt",452}, {"anotherfile.exe",564},...]`：

```
FileSizes = lists:map(fun(Filename) ->
                FileInfo = file:read_file_info("some_directory/" ++ Filename),
                FileSize = FileInfo#file_info.size,
                {Filename,FileSize}
            end,Filenames). 
```

**Foreach**（映射的一种变体）

仅重命名文件但不关心记录有关文件的任何数据的替代方法是演示 的使用`lists:foreach`，它通常专门用于副作用编程，其中您不关心返回值，它的工作方式类似于`lists:map`，但不返回任何有用的东西（它只返回 atom `ok`）：

在这种情况下，我将通过为每个文件名添加“.old”扩展名来重命名每个文件：

```
lists:foreach(fun(Filename) ->
                  OldFile = "some_directory/" ++ Filename,
                  NewFile = OldFile ++ ".old",
                  file:rename(OldFile, NewFile), 
              end,Filenames). 
```

**递归**

当然，所有这些的原始版本 - if `map`、`fold`、`foreach`或列表推导（我没有介绍，但基本上是`map`带有`filter`组件的另一种变体）无论出于何种原因都过于限制 - 你可以递归地做事情：

```
do_something_with_files([]) -> ok;
do_something_with_files([CurrentFile|RestOfFiles]) ->
   do_something(CurrentFile),
   do_something_with_files(RestOfFiles). 
```

使用 Erlang 有很多方法可以满足您的需求，但与 VB 等过程语言不同，您必须提前考虑要跟踪或执行的操作，以确定*您希望**如何*迭代列表，因为你受到 Erlang 中不可变变量的限制。

**注意：**为了使用`#file_info`记录，您需要在模块顶部包含 file.hrl 文件：

```
-include_lib("kernel/include/file.hrl"). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T07:03:45.837

我最近写了一个文件系统索引器，在下面，我为您提供了一个模块，它可以遍历一个目录，并让您使用它找到的文件或它找到的文件夹来满足您的任何需求。它的作用是`spawn`处理任何内部目录的新进程。您将提供两个`Functional Objects`，一个处理目录，另一个处理文件。

```
%% @doc 这个模块提供了用于读取、写入、
%% 在目录中搜索、加入和移动。
％％ @结尾

-模块（file_scavenger_utilities）。
%%% -------- 出口 ---------------------------------------- --------------------------------------
-编译（export_all）。
%%% -------- 包括 ---------------------------------------- --------------------------------------
%%% -------- 宏 -------------------------- --------------------------------------
-定义（IS_FOLDER（X），文件库：is_dir（X））。
-定义（IS_FILE（X），文件库：is_file（X））。
-定义（FAILED_TO_LIST_DIR（X），
            error_logger:error_report([" * File Scavenger Utilities Error *** ",
             {error,"无法列出目录"},{directory,X}]))。
-定义（NOT_DIR（X），
            error_logger:error_report([" * File Scavenger Utilities Error *** ",
              {error,"不是目录"},{alleged,X}]))。
-定义（NOT_FILE（X），
            error_logger:error_report([" * File Scavenger Utilities Error *** ",
            {错误，“不是文件”}，{被指控，X}]））。
%%%--------- 类型 ------------------------- ------------------------------------------

%% @type dir() = string().
%% 必须包含正斜杠，而不是反斜杠。不能以斜线结尾
%% 在确切目录之后。例如这是错误的：“C:/Program Files/SomeDirectory/”
%% 但这是正确的：“C:/Program Files/SomeDirectory”
%% @type 文件路径（） = 字符串（）。
%% 必须包含正斜杠，而不是反斜杠。
%% 还应包括文件扩展名，例如“C:/Program Files/SomeFile.pdf”
%%------------------------------------------------ ----------------------------------------------------------- 
%% @ doc 进入一个目录并为它找到的每个文件执行有趣的 ForEachFileFound/2
%% 如果它找到一个目录，它会执行有趣的 %% ForEachDirFound/2。
%% 上面的两个函数都将父目录作为第一个参数。然后，它会产生一个
%% erlang 进程也会以与父目录相同的方式传播找到的目录
%% 被传播。传播过程一直持续到每个文件（无论是在嵌套
%% Directory) 通过其完整路径注册。
％％ @结尾
%%
%% @spec new_user(dir(),function(),function())-> 好的。spread_directory（目录，Top_Directory，ForEachFileFound，ForEachDirFound）
            当 is_function(ForEachFileFound),is_function(ForEachDirFound) ->
    案例 ?IS_FOLDER(Dir) 的
        假-> ?NOT_DIR(Dir);
        真->
            F = 乐趣（X）->
                    FileOrDir = 文件名:absname_join(Dir,X),
                    案例 ?IS_FOLDER(FileOrDir) 的
                        真->
                            (catch ForEachDirFound(Top_Directory,FileOrDir)),
                            产卵（乐趣（）->
                                    ?MODULE:spread_directory(FileOrDir,Top_Directory,ForEachFileFound,ForEachDirFound)
                             结尾）;
                        假->
                            案例 ?IS_FILE(FileOrDir) 的
                                假-> {错误，not_a_file，FileOrDir}；
                                true -> (catch ForEachFileFound(Top_Directory,FileOrDir))
                            结尾
                    结尾
                结尾，
            案例文件：list_dir(Dir) of 
                {error,_} -> ?FAILED_TO_LIST_DIR(Dir);
                {ok,List} -> 列表：foreach(F,List)
            结尾
    结尾。

```

为了测试它，下面是用法：

```
E:\应用程序>erl
Eshell V5.9（使用 ^G 中止）
1> 目录 =“E:/露丝”。
“E：/露丝”
2> TopDir =“E：/露丝”。
“E：/露丝”
3> Folder = fun(Parent,F) -> io:format("\n\t~p contains Folder: ~p~n",[Parent,F]) end.
#Fun<erl_eval.12.111823515>
4> File = fun(Parent,F) -> io:format("\n\t~p contains File: ~p~n",[Parent,F]) end.
#Fun<erl_eval.12.111823515>
5> file_scavenger_utilities:spread_directory(Dir,TopDir,File,Folder)。

```
 "E:/Ruth" contains File: "e:/Ruth/Thumbs.db"        

    "E:/Ruth" contains File: "e:/Ruth/Robert Passport.pdf"

    "E:/Ruth" contains File: "e:/Ruth/new mixtape.mp3"

    "E:/Ruth" contains File: "e:/Ruth/Manning - Java 3d Programming.pdf"

    "E:/Ruth" contains File: "e:/Ruth/jcrea350.zip"

    "E:/Ruth" contains Folder: "e:/Ruth/java-e books"

    "E:/Ruth" contains File: "e:/Ruth/Java Programming Unleashed.pdf"        

    "E:/Ruth" contains File: "e:/Ruth/Java Programming Language Basics.pdf"

    "E:/Ruth" contains File: "e:/Ruth/java-e books/vb blackbook.pdf.pdf" 
```

```

# java - OOP 建议 - 我应该更改程序的运行方式吗？

> ID：14443068
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:32:05.030
> 
> 标签：java, oop

下面我有一个我写的小程序来计算形状的面积......

我的问题是这样做的正确方法，一个朋友做了类似的事情并且有多个从主要形状继承的形状。哎呀？我的可以吗，因为我只会问形状的面积而不会更多？我将如何改变它以使其更加面向对象？

主程序 /////

```
package areaprog;

import java.util.Scanner;
import java.util.InputMismatchException;

public class Mainprog {

    public static void main (String [] args){

        //Area Menu Selection
        System.out.println("What shape do you need to know the area of?\n" +
        "1: Square?\n" +
        "2: Rectangle?\n" +
        "3: Triangle?\n" +
        "4: Circle? \n" +
        "5: Exit\n"     
        );

        //User input for menu

        Scanner reader = new Scanner(System.in);
        System.out.println("Number: ");

        //Menu syntax checking
        while (!reader.hasNextDouble())
        {
            System.out.println("Thats not a number you tool.\n");
            System.out.println("Now pick again\n" +
                    "1: Square?\n" +
                    "2: Rectangle?\n" +
                    "3: Triangle?\n" +
                    "4: Circle? \n" +
                    "5: Exit\n"     
                    );

            reader.next(); //ask for next token     
        }               
            double input = reader.nextDouble();
            reader.nextLine();

        //Depending on user selection, depends on what method is called using  switch.
    Scanner scan = new Scanner(System.in);

        //Square selection and InputMismatch Exception

    try {

        if (input == 1){
            System.out.println("What is a length of 1 side of the Square?\n");
                double s1 = scan.nextDouble();
                double SqAns = AreaCalculator.getSquareArea(s1);
                System.out.println("The area of you square is: " + SqAns);

                       }    
        }           
    catch (InputMismatchException e)
       {
        System.out.println("Why are you trying to be clever? use an interger");

       }

        //Rectangle selection    
            if (input == 2){
            System.out.println("What is the width of your rectangle?.\n");
                double r1 = scan.nextDouble();
            System.out.println("What is the height of your rectangle?\n");
                double r2 = scan.nextDouble();
                double RecAns = AreaCalculator.getRectArea(r1, r2);
            System.out.println("The area of your rectangle is: " + RecAns);    
            }
        //Triangle selection
        if (input == 3){
            System.out.println("What is the base length of the triangle?.");
                double t1 = scan.nextDouble();
            System.out.println("What is the height of your triangle?");
                double t2 = scan.nextDouble();
                double TriAns = AreaCalculator.getTriArea(t1, t2);
            System.out.println("The area of your triangle is " + TriAns);
        }
        //Circle selection
        if (input == 4){
            System.out.println("What is the radius of your circle?.");
                double c1 = scan.nextDouble();
                double CircAns = AreaCalculator.getCircleArea(c1);
            System.out.println("The area of your circle is " + CircAns);    

        }
        //Exit application
        if (input == 5){
            System.out.println("Goodbye.");

        }

    }

} 
```

面积计算器.java ////

```
 package areaprog;

public class AreaCalculator {

    public static double getRectArea(double width, double height) {
        double aValue = width * height;

        return aValue;

    }

    public static double getCircleArea(double radius){
        double PI = Math.PI;
        double aValue = PI * Math.pow(radius, 2);

        return aValue;

    }

    public static double getSquareArea(double side) {
        double aValue = Math.pow(side, 2);

        return aValue;

    }

    public static double getTriArea(double base , double height) {
        double aValue = (base/2)* height;

        return aValue;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:34:33.473

从单个基类或接口继承多个类绝对是一个更好的设计。使用类来封装给定的功能或对象（在这种情况下`triangle`等）`square`。此外，当您有多个共享某些功能的类时，最好将其提取为通用接口以实现更好的抽象级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:40:13.587

简单的答案是使用这样的“形状”界面

```
interface Shape {

double[] dimensions;
double calcArea();
} 
```

并让你所有的形状都实现这个接口。

说

```
class Circle implements Shape {
...
} 
```

并为每个形状实现不同的 calcArea() 方法

在你的跑步者中，你初始化一个圆圈、盒子等......

当你需要 area 时，你不必关心它后面实际上是哪个形状，只需调用 shape.calcArea() 方法，它就会找到正确的那个。

# jquery - 其他功能运行时启动/停止 jquery

> ID：14443080
> 
> 赞同：0
> 
> 时间：2013-01-21T16:32:21.813
> 
> 标签：jquery, function

我在悬停时显示的页面上运行了一个页面帮助工具提示。在一个单独的函数下运行我使用相同的工具提示工具来运行一个教程，该教程通过步骤（一系列 12 个工具提示，每个由上一个/下一个按钮激活）如果您在教程中间并将鼠标悬停在其中一个教程中未包含的项目会杀死教程，然后您必须重新开始。当为教程运行 jquery 时，我想禁用页面帮助工具提示并在退出教程时重新启用它。

我尝试添加一些不起作用的不同的东西......

```
window.addBlockMouseEvent = function () { return false; }; 
```

并且...

```
function stopAddBlockMouseEvent() {
return false;
}; 
```

两者都没有达到预期的结果。在这方面仍然很新，任何帮助表示赞赏，这个问题之前已经关闭，我不知道如何更清楚地解释我需要什么。

找到的解决方案：或者如果出于某种原因我们只想隐藏工具提示的子集，我们可以定义它们共同的父级

```
$('.selector').qtip({
content: {
    text: 'I hide other tooltips when I'm shown... booya!'
},
show: {
    solo: $('.qtips') // Hide tooltips within the .qtips      element when shown
}
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:53:47.750

我会建议你两种方法

1.  使用不同的类名，它们特别适用于您的帮助工具提示和教程工具提示。然后在您想要运行教程工具提示时删除帮助工具提示的类。

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

1.  我建议您查看 jQuery UI Modals。他们最终会隐藏页面的背景，以便您的教程独立于页面工具提示工作。

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

我希望我能正确理解你的问题。

# azure - Azure 表存储事务限制

> ID：14443081
> 
> 赞同：7
> 
> 时间：2013-01-21T16:32:28.007
> 
> 标签：azure, storage, azure-table-storage

我正在针对 ATS 运行性能测试，当对同一个表/存储帐户使用多个虚拟机时，它的行为有点奇怪。

整个管道是非阻塞的（等待/异步）并使用 TPL 进行并发和并行执行。

首先，非常奇怪的是，通过这种设置，我只能获得大约 1200 次插入。这是在 L VM 机器上运行的，即 4 核 + 800mbps。

我正在插入 100.000 行具有唯一 PK 和唯一 RK 的行，这应该利用最终分布。

以下是更具确定性的行为。

当我运行 1 个 VM 时，我每秒获得大约 1200 次插入。当我运行 3 个 VM 时，我每秒每次插入大约 730 个。

阅读他们指定目标的博客文章非常幽默。 [https://azure.microsoft.com/en-gb/blog/windows-azures-flat-network-storage-and-2012-scalability-targets/](https://azure.microsoft.com/en-gb/blog/windows-azures-flat-network-storage-and-2012-scalability-targets/)

> 单表分区——表分区是表中具有相同分区键值的所有实体，通常表有很多分区。单个表分区的吞吐量目标是：
> 
> 每秒最多 2,000 个实体
> 
> 请注意，这是针对单个分区，而不是单个表。因此，具有良好分区的表最多可以处理 20,000 个实体/秒，这就是上面描述的整体帐户目标。

我应该怎么做才能利用每秒 20k 的速度，如何才能在每个 VM 上执行超过 1,2k 的速度？

--

更新：

我现在还尝试为每个单独的节点使用 3 个存储帐户，并且仍然获得性能/节流行为。我找不到合乎逻辑的理由。

--

更新 2：

我已经进一步优化了代码，现在我可以执行大约 1550。

--

更新 3：

我现在也在美国西部尝试过。那里的表现更差。降低约 33%。

--

更新 4：

我尝试从 XL 机器上执行代码。这是 8 个核心而不是 4 个核心，内存和带宽增加了一倍，性能提高了 2%，所以很明显这个问题不在我这边。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:54:51.017

几点评论：

1.  您提到您正在使用独特的 PK/RK 来获得最终分布，但您必须记住，PK 平衡不是立即的。首次创建表时，整个表将由 1 个分区服务器提供服务。因此，如果您要跨多个不同的 PK 进行插入，它们仍将转到一个分区服务器，并且会受到单个分区的可伸缩性目标的瓶颈。分区主服务器只有在识别出热分区服务器后才会开始在多个分区服务器之间拆分您的分区。在您的 <2 分钟测试中，您不会看到多个分区服务器或 PK 的好处。文章中的吞吐量针对的是分布良好的 PK 方案，数据访问频繁，导致数据在多个分区服务器之间划分。

2.  您的 VM 大小不是问题，因为您不会在 CPU、内存或带宽上被阻止。您可以从较小的 VM 大小获得完整的存储性能。

3.  查看 [http://research.microsoft.com/en-us/downloads/5c8189b9-53aa-4d6a-a086-013d927e15a7/default.aspx](http://research.microsoft.com/en-us/downloads/5c8189b9-53aa-4d6a-a086-013d927e15a7/default.aspx)。我刚刚在与我的存储帐户在同一数据中心的 WebRole VM 中使用该工具进行了快速测试，并且我从单个 VM 上的单个工具实例中实现了每秒上传约 2800 个项目和每秒约 7300 个项目下载。这是使用 1024 字节实体、10 个线程和 100 个批量大小。我不知道这个工具的效率如何，或者它是否禁用了 Nagles 算法，因为我无法使用 1 的批量大小获得很好的结果（我得到了 ~1000/秒），但至少在 100 批量大小的情况下它表明你可以达到高项目/秒。这是在美国西部完成的。

4.  您使用的是存储客户端库 1.7 (Microsoft.Azure.StorageClient.dll) 还是 2.0 (Microsoft.Azure.Storage.dll)？2.0 库有一些性能改进，应该会产生更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:57:08.233

我倾向于相信最大吞吐量是为了优化负载。例如，我敢打赌，使用批处理请求可以获得比现在执行的单个请求更高的性能。当然，如果您在 PK 中使用 GUID，则无法在当前测试中进行批处理。

那么，如果您将测试更改为以 100 个为一组（每批最多）批量插入实体，仍然使用 GUID，但其中 100 个实体将具有相同的 PK，该怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:22:09.233

计算实例和存储帐户是否在同一个关联组中？亲和组确保服务之间的网络接近度是最佳的，并且应该导致网络级别的延迟更低。

您可以在网络选项卡下找到关联组配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T21:23:59.953

我怀疑这可能与 TCP Nagle 有关。请参阅[此 MSDN 文章](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx)和[此博客文章](http://robertgreiner.com/2012/06/why-is-azure-table-storage-so-slow/)。

从本质上讲，TCP Nagle 是一种协议级别的优化，可以批量处理小请求。由于您发送大量小请求，这可能会对您的性能产​​生负面影响。

您可以通过在启动应用程序时执行此代码来禁用 TCP Nagle

```
ServicePointManager.UseNagleAlgorithm = false; 
```

# java - JSONObject.append - 结果是嵌套数组？

> ID：14443083
> 
> 赞同：0
> 
> 时间：2013-01-21T16:32:28.880
> 
> 标签：java, json

我已经看到[了这个问题](https://stackoverflow.com/questions/11297200/jsonobject-append-into-object-result-is-nested-array)并理解了答案，但无法在我的场景中使用它。

我的场景：我通过`JPA`mysql 数据库检索数据，并希望将这些数据放入`JSONObject`这样的

```
{
  "A":["1","2","3"], 
  "B":["1","2","3","4"], 
  "C":["1","2"]
} 
```

问题是我不知道我将检索多少个数组。它可能是 1 也可能是 200，具体取决于数据库中的数据。

如果我`append`把数据变成`JSONObject`这样：

```
import org.apache.tapestry5.json.JSONObject 
// ...
JSONObject data = new JSONObject();
for (Value val : values) data.append(val.getName(), val.getValue()); 
```

我去拿

```
{"val_name": [[["1"],"2"],"3"], ...} 
```

有没有一种方法可以在`JSONOBject.append` *不*创建 JSONArrays 并将`put`它们放入 的情况下使用`JSONObject`，这将导致嵌套`JSONObject`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:48:13.863

JSON 对象是一个“字典”——名称和值之间的映射。JSON 数组是值的顺序列表，只有值的序数位置标识它。“附加”到对象是没有意义的——你向它添加新的名称/值对（尽管他们显然称它为附加，只是为了让你感到困惑）。如果在一个对象中，你想要类似的东西，`"A":["1","2","3"]`那么你必须*将*一个数组（作为名称/值对的值）插入到对象中。

但请注意，在将数组插入对象之前或之后可以将其他值附加到数组中。您只需要获取/保存对数组的引用。

在上面的示例中，您犯了附加到对象而不是数组的错误。

# sql-server - 相关表的问题取决于类型

> ID：14443084
> 
> 赞同：2
> 
> 时间：2013-01-21T16:32:32.603
> 
> 标签：sql-server, er-modeling

我正在为一家公司的假设车队开发数据库模型。有 4 种车辆（汽车、卡车、半卡车和公共汽车）和 2 种驾驶员。两种类型一次只能驾驶一辆车，类型 1 只驾驶汽车，类型 2 每天可以驾驶任何一辆车。

我的 ER 模型设置为类型 1 和类型 2 是从 Driver 表继承的，而 4 种车辆类型是从 Vehicle 表继承的。我的问题在于我可以根据司机的类型将司机连接到他们的特定车辆表的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:28:09.177

设置`VehicleTypes`和`Vehicles`：

```
CREATE TABLE VehicleType
( VehicleTypeID CHAR(1) NOT NULL
, VehicleTypeName VARCHAR(20) NOT NULL
, PRIMARY KEY (VehicleTypeID)
, UNIQUE (VehicleTypeName)
) ;

INSERT INTO VehicleType
  (VehicleTypeID, VehicleTypeName)
VALUES
  ('C', 'Car'),
  ('T', 'Truck'),
  ('S', 'Semi-truck'),
  ('B', 'Bus') ;

CREATE TABLE Vehicle
( VehicleID INT IDENTITY(1,1)
, VehicleTypeID CHAR(1) NOT NULL
, LicencePlate VARCHAR(20) NOT NULL
--- other stuff about a vehicle
, PRIMARY KEY (VehicleTypeId, VehicleID)
, UNIQUE (LicencePlate) 
, FOREIGN KEY (VehicleTypeId)
    REFERENCES VehicleType (VehicleTypeId)
) ; 
```

`DriverTypes`和`Drivers`：_

```
CREATE TABLE DriverType
( DriverTypeID INT NOT NULL
, DriverTypeTitle VARCHAR(20) NOT NULL
, PRIMARY KEY (DriverTypeID)
, UNIQUE (DriverTypeTitle)
) ;

INSERT INTO DriverType
  (DriverTypeID, DriverTypeTitle)
VALUES
  (1, 'Driver-Type-1'),
  (2, 'Driver-Type-2') ;

CREATE TABLE Driver
( DriverID INT IDENTITY(1,1) NOT NULL
, DriverTypeID INT NOT NULL
, FullName VARCHAR(40) NOT NULL
--- other stuff about a driver
, PRIMARY KEY (DriverTypeID, DriverID)
, FOREIGN KEY (DriverTypeID)
    REFERENCES DriverType (DriverTypeID)
) ; 
```

最后是各种类型的司机可以驾驶的车辆类型：

```
CREATE TABLE Driver_Vehicle_Combinations
( DriverTypeID INT NOT NULL
, VehicleTypeID CHAR(1) NOT NULL
, PRIMARY KEY (DriverTypeID, VehicleTypeID)
, FOREIGN KEY (DriverTypeID)
    REFERENCES DriverType (DriverTypeID)
, FOREIGN KEY (VehicleTypeId)
    REFERENCES VehicleType (VehicleTypeId)
) ;

INSERT INTO Driver_Vehicle_Combinations
  (DriverTypeID, VehicleTypeID)
VALUES
  (1, 'C'),
  (2, 'C'),
  (2, 'T'),
  (2, 'S'),
  (2, 'B') ; 
```

如果您还想存储在特定日期实际驾驶哪辆车的人：

```
CREATE TABLE Driver_Schedule
( DriverID INT NOT NULL
, DriverTypeID INT NOT NULL
, ScheduleDate DATE NOT NULL
, VehicleID INT NOT NULL
, VehicleTypeID CHAR(1) NOT NULL
, PRIMARY KEY (DriverID, ScheduleDate)
, UNIQUE (VehicleID, ScheduleDate)         --- If a vehicle is allowed to be
                                           --- driven by only one driver each day
, FOREIGN KEY (DriverTypeID, DriverID)
    REFERENCES Driver (DriverTypeID, DriverID)
, FOREIGN KEY (VehicleTypeId, VehicleID)
    REFERENCES Vehicle (VehicleTypeId, VehicleID)
, FOREIGN KEY (DriverTypeID, VehicleTypeId)      --- this ensures than no driver
    REFERENCES Driver_Vehicle_Combinations       --- gets to drive a vehicle that
              (DriverTypeID, VehicleTypeId)      --- is not allowed to
) ; 
```

您可以在**[SQL-Fiddle](http://sqlfiddle.com/#!6/07052)**测试代码。ER 图如下所示：

![ER图](../Images/3387c678e7bb65f3db696112af9ed8fb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:37:12.247

看起来您正在考虑 OOP 而不是关系数据库。关系数据库并不真正支持面向对象的概念，例如继承。我会为司机准备一张桌子，为车辆准备一张桌子。关于哪些司机可以驾驶哪些车辆的规则是业务逻辑，应该在代码中定义。

拥有多个车辆表和多个驾驶员表将使使用数据库变得非常困难。

# list - 如何将 List 转换为 ListBuffer？

> ID：14443085
> 
> 赞同：27
> 
> 时间：2013-01-21T16:32:35.067
> 
> 标签：list, scala, listbuffer

有没有办法有效地做到这一点，也许是通过 toBuffer 或 to 方法？我真正的问题是我正在从解析器中构建一个列表，如下所示：

```
lazy val nodes: Parser[List[Node]] = phrase(( nodeA | nodeB | nodeC).*) 
```

但是在构建它之后，我希望它成为一个缓冲区 - 我只是不确定如何直接从解析器构建一个缓冲区。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-21T16:37:03.030

`to`确实可以解决问题，而且使用起来非常简单：

```
scala> val l = List(1,2,3)
l: List[Int] = List(1, 2, 3)
scala> l.to[ListBuffer]
res1: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 2, 3) 
```

在 scala 2.10.x 中工作

对于 scala 2.9.x，您可以执行以下操作：

```
scala> ListBuffer.empty ++= l
res1: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 2, 3) 
```

# jsf - 使用 JSF 1.2 显示像 Google 图片搜索这样的图片

> ID：14443088
> 
> 赞同：0
> 
> 时间：2013-01-21T16:32:57.140
> 
> 标签：jsf, panel, jsf-1.2

我想使用 JSF 1.2 显示像谷歌图像搜索这样的图像。我尝试`<h:dataTable />`在另一个内部使用`<h:dataTable />`但不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:39:08.913

尝试[Richfaces DataGrid](http://livedemo.exadel.com/richfaces-demo/richfaces/dataGrid.jsf?c=dataGrid&tab=usage)[`<a4j:mediaOutput/>`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_mediaOutput.html) ，如果您在本地服务器中有图像，则结合显示图像，或者`<img/>`如果您想从 Internet 链接它们，请使用 html 的标准标记。

# playframework-2.0 - 在 playframework 中，我如何将 io 线程优先于 akka 演员？

> ID：14443090
> 
> 赞同：5
> 
> 时间：2013-01-21T16:33:09.363
> 
> 标签：playframework-2.0, akka

我正在 play 2.0 框架上编写应用程序。这个应用程序的目的是处理图像上传并在后台调整它们的大小。

上传是通过将文件保存到文件系统的标准后处理程序来处理的。现在这只是在事件或 IO 线程上完成的。成功保存文件后，会向 AKKA 演员发送一条消息，将原始图像的大小调整为多种不同的尺寸（目前为 4 种）。这些调整大小操作对 CPU 要求很高，并且需要一些时间。

这一切都很好，直到我在一些负载下测试应用程序。在负载下，调整大小操作实际上消耗了所有可用的 CPU 时间，因此传入的 HTTP 请求在某种程度上缺乏 CPU 时间，我们看到这些请求积压到最终请求开始超时的程度。

所以问题是，我如何配置系统（或重写它）以赋予传入的 HTTP 请求比调整大小请求更高的优先级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:15:18.687

您应该调查[Akka 中的调度程序](http://doc.akka.io/docs/akka/2.0.1/scala/dispatchers.html)。基本上，它们抽象了每个参与者用于处理的线程/工作池。您可以定义一个全局调度程序或拥有多个调度程序。

定义只有有限数量的线程（1 或 2）的调度程序：

```
resizing-thread-pool-dispatcher {
  type = Dispatcher
  executor = "thread-pool-executor"
  thread-pool-executor {
    core-pool-size-max = 1
  }
} 
```

并将其与您调整大小的演员相关联：

```
context.
  actorOf(
    Props[ResizingActor].withDispatcher("resizing-thread-pool-dispatcher"), 
    "resizingActor"
  ) 
```

当然，这个想法是您`resizing-thread-pool-dispatcher`使用的线程少于可用内核，因此您的 HTTP 线程仍然是响应式的。

# c# - 可以通过 HTTP 设置的站点范围的全局标志

> ID：14443091
> 
> 赞同：0
> 
> 时间：2013-01-21T16:33:10.690
> 
> 标签：c#, asp.net, configuration

我有一些配置标志，我希望能够通过 http 调用（类似于 REST 调用）设置开/关。

通常，您将配置设置存储在 web.config 中，或者您将我们的内容从文件中提取到一个类中，您在整个应用程序代码中使用的这个配置类就像一个单例类或常量一样使用。

我希望能够在运行时修改一个属性，这是一个全局变量。任何修改都将由单个用户或线程完成，并且很少发生。

我应该如何设计这个，我应该把它存放在哪里？

我的应用程序代码调用 Twitter API，但是如果我应该调用 twitter API（它可能已关闭），我希望能够打开/关闭，我应该在哪里存储这个 on/off 属性知道我希望能够更新这个字段？

```
if(SomeClass.TwitterApiEnabled) 
{
   // call twitter api
} 
```

我可以使用以下方法打开/关闭 TwitterApiEnabled 属性：

```
http://www.example.com/api/twitter/enable=no&auth_token=123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:46:35.013

我认为存储它的唯一明智方法是以某种方式将其存储到数据库/文件中，因为将其存储在内存中意味着重新启动时设置会丢失。

为什么不保存一个名为 TwitterDisabled 的文件，并且当它存在时，twitter 被禁用。不应该真正影响您缓存每个用户会话的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:49:03.420

1) 应用程序变量——这些是存储在键/值对中的全局变量 Application["TwitterIsUp"] = isTwitterUp;

您需要将其投射出来才能将其取出...

返回（布尔）应用程序[“TwitterIsUp”]；

2) 静态场

# c++ - 如何为孩子中的函数指定模板参数？

> ID：14443092
> 
> 赞同：1
> 
> 时间：2013-01-21T16:33:11.370
> 
> 标签：c++, templates, inheritance, virtual-functions, function-templates

所以我尝试：

```
class data_ppp {
public:
    template <class T>
    virtual boost::shared_ptr<T> getData()
    {
        return boost::shared_ptr<T>(new T());
    }
};

class data_child : public data_ppp {
public:
    template<>
    getData<std::vector<int>>();
}; 
```

但无法获得预期的效果 - 我想在类 data_child getData 函数中只返回`boost::shared_ptr<std::vector<int>>`。怎么做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:51:03.143

我现在看到的解决您的问题的唯一方法是：

```
class data_ppp
{
public:
    template<class T>
    std::shared_ptr<T> getData()
    { return std::shared_ptr<T>(new T()); }
};

class data_child : public data_ppp
{
public:
    std::shared_ptr<int> getData() 
    { return data_ppp::getData<int>(); }
}; 
```

用法：

```
data_child dc;
dc.getData();
//dc.getData<float>(); // compilation error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:40:34.650

根据你的描述。您想要具有不同签名的新功能。因此，您将在子类中将此 getdata 视为其非常不同的函数，因为返回类型不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:55:34.067

成员函数模板（如您的`getData()`）不能是虚拟的。但是，您可以拥有一个带有虚拟成员函数的类模板：

```
template <class T>
class data_ppp {
public:        
    virtual boost::shared_ptr<T> getData()
    {
        return boost::shared_ptr<T>(new T());
    }
}; 
```

这允许相当多的定制。

**1）**你可以定义一个类`data_ppp< std::vector<int> >`。如果该类需要表现得像一个泛型`T`，那么你就完成了。

**2)**如果您想要覆盖特定数据用途但所有类型的行为`T`并且想要动态使用新功能，您可以从`data_ppp<T>`

```
template <class T>
class data_child: public data_ppp<T> {
public:       
    virtual boost::shared_ptr<T> getData()
    {
        // add logging, printing or whatever you want
        return boost::shared_ptr<T>(new T());
    }
}; 
```

**3）**如果你只想重新定义`getData()`等于`T`，`std::vector<int>`你只需要专门化`data_ppp`

```
template <>
class data_ppp< std::vector<int> > { 
    typedef std::vector<int> T;   
public:       
    virtual boost::shared_ptr< T > getData()
    {
        // add logging, printing or whatever you want
        return boost::shared_ptr<T>(new T());
    }
}; 
```

# r - 如何使用 plot.xts 在蜡烛图中设置蜡烛的宽度？

> ID：14443093
> 
> 赞同：6
> 
> 时间：2013-01-21T16:33:18.973
> 
> 标签：r, xts

我有简单的 OHLC 数据和 XTS

```
SF <- structure(c(1.064, 1.07, 1.071, 1.08, 1.08, 1.076, 1.078, 1.08,
1.08, 1.082, 1.081, 1.082, 1.074, 1.07, 1.073, 1.075, 1.081,
1.084, 1.092, 1.091, 1.097, 1.095, 1.099, 1.094, 1.096, 1.097,
1.096, 1.096, 1.097, 1.091, 1.078, 1.083, 1.088, 1.084, 1.081,
1.095, 1.096, 1.085, 1.074, 1.075, 1.073, 1.07, 1.068, 1.072,
1.084, 1.08, 1.081, 1.077, 1.081, 1.083, 1.084, 1.083, 1.082,
1.082, 1.075, 1.074, 1.075, 1.092, 1.086, 1.092, 1.093, 1.098,
1.102, 1.103, 1.099, 1.098, 1.1, 1.101, 1.098, 1.098, 1.1, 1.092,
1.084, 1.087, 1.088, 1.084, 1.096, 1.099, 1.097, 1.086, 1.078,
1.076, 1.076, 1.073, 1.064, 1.069, 1.071, 1.077, 1.075, 1.074,
1.078, 1.078, 1.08, 1.079, 1.078, 1.073, 1.068, 1.07, 1.069,
1.074, 1.08, 1.083, 1.089, 1.09, 1.096, 1.094, 1.092, 1.092,
1.094, 1.094, 1.09, 1.092, 1.088, 1.08, 1.076, 1.078, 1.081,
1.079, 1.08, 1.09, 1.084, 1.072, 1.073, 1.069, 1.066, 1.07, 1.067,
1.072, 1.08, 1.079, 1.076, 1.077, 1.08, 1.08, 1.082, 1.081, 1.081,
1.074, 1.072, 1.073, 1.074, 1.081, 1.084, 1.091, 1.092, 1.097,
1.097, 1.099, 1.095, 1.095, 1.097, 1.097, 1.096, 1.094, 1.091,
1.08, 1.083, 1.086, 1.083, 1.082, 1.095, 1.096, 1.086, 1.074,
1.075, 1.073, 1.071, 1.072), .Dim = c(42L, 4L), .Dimnames = list(
NULL, c("Open", "High", "Low", "Close")), index = structure(c(1353427200,
1353513600, 1353600000, 1353859200, 1353945600, 1354032000, 1354118400,
1354204800, 1354464000, 1354550400, 1354636800, 1354723200, 1354809600,
1355068800, 1355155200, 1355241600, 1355328000, 1355414400, 1355673600,
1355760000, 1355846400, 1355932800, 1356019200, 1356278400, 1356451200,
1356537600, 1356624000, 1356883200, 1357056000, 1357142400, 1357228800,
1357488000, 1357574400, 1357660800, 1357747200, 1357833600, 1358092800,
1358179200, 1358265600, 1358352000, 1358438400, 1358697600), tzone = "", tclass = c("POSIXct",
"POSIXt")), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct",
"POSIXt"), .indexTZ = "", tzone = "", class = c("xts", "zoo"))

plot.xts(SF, type='candles') 
```

蜡烛出来的很细。如何使它们更宽？

通过查看 plot.xts 的源代码，我看到调用了 xts 内部函数 plot.ohlc.candles 以将 OHLC 数据绘制为蜡烛，其中 ... 被传递。H

```
plot.ohlc.candles(x, bar.col = bar.col, candle.col = candle.col, 
            ...) 
```

但是，如果我尝试在我的 plot.xts 函数调用中设置参数 width=0.5，我会收到宽度不是图形参数的警告

```
Warning messages:
1: In plot.window(...) : "width" is not a graphical parameter
2: In plot.xy(xy, type, ...) : "width" is not a graphical parameter
3: In axis(1, at = xycoords$x, labels = FALSE, col = "#BBBBBB", ...) :
  "width" is not a graphical parameter
4: In axis(1, at = xycoords$x[ep], labels = names(ep), las = 1, lwd = 1,  :
  "width" is not a graphical parameter
5: In axis(2, ...) : "width" is not a graphical parameter
6: In title(width = 0.5) : "width" is not a graphical parameter
There were 12 warnings (use warnings() to see them)
> warnings()
Warning messages:
1: "width" is not a graphical parameter
2: "width" is not a graphical parameter
3: "width" is not a graphical parameter
4: "width" is not a graphical parameter
5: "width" is not a graphical parameter
6: "width" is not a graphical parameter
7: "width" is not a graphical parameter
8: "width" is not a graphical parameter
9: "width" is not a graphical parameter
10: "width" is not a graphical parameter
11: "width" is not a graphical parameter
12: "width" is not a graphical parameter 
```

我无法使用 quantmod 或 xtsExtra，因为我试图并排绘制两个不同的图（一个时间序列和其他正常的 XY 线图）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T17:29:55.350

您可以忽略警告，但您需要设置`width`为非常大的值。查看`plot.ohlc.candles`，可以看到`width`是基于 xts 对象的索引，以秒为单位。

```
R> xts:::plot.ohlc.candles
function (x, width = 0.2, order = 1:4, bar.col = "grey", candle.col = "white", 
    ...) 
{
    segments(.index(x), x[, order[2]], .index(x), x[, order[3]], 
        col = bar.col, ...)
    rect(.index(x) - width, x[, order[1]], .index(x) + width, 
        x[, order[4]], col = candle.col, ...)
}
<environment: namespace:xts> 
```

这会将宽度设置为 1/4 天：

```
plot.xts(SF, type='candles', width=60*60*24*0.25) 
```

![1/4 天蜡烛图](../Images/03f1bbc79cbe038106944e026779c8c4.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T17:41:23.063

正如约书亚所说，这是我为获得正确图表所做的

```
candlecolors <- ifelse(SF[,'Close'] > SF[,'Open'], 'RED', 'GREEN')
plot.xts(SF, type='candles',  width=25000, candle.col=candlecolors, bar.col='BLACK') 
```

这给了我下面的图表。

![顺丰](../Images/f1641e37208bf283b838a36a09942b6f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:46:07.027

由于蜡烛只是线条，您可以使用该`lwd`参数来增加线条宽度。不幸的是，如果您直接使用它会出现错误：

```
plot.xts(SF, type='candles',lwd=2)
Error in axis(1, at = xycoords$x[ep], labels = names(ep), las = 1, lwd = 1,  : 
  formal argument "lwd" matched by multiple actual arguments 
```

这看起来像是`plot.xts`包装器如何工作的问题。

您可以通过使用以下方式设置它来使其工作`par`：

```
opar <- par(lwd=2)
plot.xts(SF, type='candles')
par(opar) # reset to original parameters 
```

虽然这也会影响网格线和图表边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T08:21:14.480

那么缩放包呢？然后你可以放大和缩小，但是你想通过“绘图”代码末尾的 zm()

```
plot(datax)
lines(datay)
zm() 
```

?

# matlab - 以透明度渲染时不能使用裁剪选项

> ID：14443094
> 
> 赞同：2
> 
> 时间：2013-01-21T16:33:22.527
> 
> 标签：matlab

我目前正在使用 MATLAB 中的注释图像。为了沿轴标记一个特定点，我正在绘制带有剪裁的点，以便能够在轴限制之外绘制。但是，如果我包含一个补丁对象并使其透明，也就是说，我将渲染器从“画家”隐式更改为“OpenGL”，则通过裁剪绘制的对象将从图中消失。

请参阅下面的示例代码和图像。

关于解决方法或更好的实现的任何想法？我想要两全其美！

```
f1 = figure(1);clf
set(f1,'RendererMode','auto')   %# Make sure renderer can change

%Plot objects
pLine = plot(0:0.1:1,0:0.1:1);hold on;
pointInside = plot(0.5,0.5,'v');
pointOutside=plot(0.5,1.01,'v','clipping','off'); %# Visible outside axes by clipping off.
patchHandle =patch([0.2;0.8;0.8;0.2],[0.2;0.2;0.8;0.8],ones(4,1));
patchHandle2 = patch([0.1;0.3;0.3;0.1],[0.7;0.7;0.9;0.9],zeros(4,1)); 
uistack(patchHandle2,'bottom')

axis([0 1 0 1])
colormap(summer)

%# Point outside now visible.

disp(get(f1,'renderer'))

%Make patch semi transparent
uistack(patchHandle,'top')          %# Patch goes over line and point
set(patchHandle,'facealpha',0.7);   %# Point and line visible again due to alpha

disp(get(f1,'renderer'))

%# Renderer has now changed and point outside no longer visible 
```

![在此处输入图像描述](../Images/fccf53a8ad8d7ab1976054c0524a4f09.png)

![在此处输入图像描述](../Images/e29c5f65ea9f2073a6c279a0de7a7962.png)

# binding - knockoutjs 'foreach' 绑定无法获取定义为类的属性？

> ID：14443095
> 
> 赞同：1
> 
> 时间：2013-01-21T16:33:28.060
> 
> 标签：binding, foreach, knockout.js

我是使用 Knockoutjs 的新手

我有一个 viewModel 定义如下：

```
// this is a subclass
var Order = {
        selfdata: {
            id : ko.observable(),
            goodsName : ko.observable(''),
            color : ko.observable(''),
            size : ko.observable(''),
            count: ko.observable(''),
            orderDate: ko.observable(''),
            remarks: ko.observable('')
        },
    }
   // this is a viewModel
   function ShoppingCar() {
        var self = this;
        self.orders = ko.observableArray([]);
        self.show = function (msg) {
            return msg.id;
        }

        //init
        $.get('/Shopping/GetOrders', null, function (data) {
            var items = $.map(data, function (item) { return Order.init(item) });// I write a init function to init order
            self.orders(items);
        });
    }
//then I use Knockoutjs foreach binding as below:
<ul data-role="listview" data-theme="e" data-divider-theme="d">
 <!-- ko foreach: orders -->
     <li data-role="list-divider" data-bind="text: $data.selfdata.id">//!I get null value here</li>

     <li><a href="#">
        <h3 data-bind="text: $data.isValid"></h3>
        <p><strong data-bind="text: $data.selfdata.color">//! here has null value too!</strong></p>
        <p class="ui-li-aside"><strong>12:14</strong>PM</p>
        </a></li>
 <!-- /ko --> 
```

所以，我的问题是，如何`order.selfdata`在 ko 的 foreach 中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:39:01.327

你试过把：

```
selfdata.id 
```

此外，您是否已调试并确保您实际上正确填充了 Orders 对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:48:49.967

你需要关闭你的强标签。它被评论抹去

```
<p><strong data-bind="text: $data.selfdata.color">//! here has null value too!</strong></p> 
```

应该

```
<p><strong data-bind="text: $data.selfdata.color"></strong></p> 
```

您也不需要 $data。selfdata.color 应该可以正常工作，假设数据实际上被正确地传递到 observable 中。

如果修复注释和删除 $data 不起作用，我将使用浏览器调试器检查并查看可观察对象中实际包含哪些数据。

# c# - C# 中的 AutoResetEvent.WaitOne() 方法返回值

> ID：14443100
> 
> 赞同：1
> 
> 时间：2013-01-21T16:33:41.273
> 
> 标签：c#, multithreading

我有以下代码：

```
class Program
    {
        static AutoResetEvent objAuto = new AutoResetEvent(false);
        static void Main(string[] args)
        {
            ThreadPool.QueueUserWorkItem(new WaitCallback(SetState));
            Console.ReadLine();
            objAuto.Set();
        }
        static void SetState(object rsevent)
        {
            Console.WriteLine("Starting....");
            bool result = objAuto.WaitOne(10000); // 10 seconds
            Console.WriteLine("Finishing..." + result);
        }
    } 
```

当我运行此代码并`Enter` 在 10 秒内点击时，我会`true`在变量中获得值，`result`否则`false`。

这个布尔值在每种情况下表示什么......我还需要知道另一个重载的含义/使用，`WaitOne`它的`boolean`参数如下......

```
objAuto.WaitOne(10000,false) 
```

第二个参数是`exitContext`what is this `context`this exit 是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:35:41.147

如果它返回 true 则事件被触发，如果它返回 false 则方法结束是因为达到了超时，而不是因为事件被触发了。该[方法的文档中对此](http://msdn.microsoft.com/en-us/library/kzy257t0.aspx)进行了说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:36:33.547

返回值指示事件是否在您指定的超时时间内发出信号。如果返回值为真，则事件已发出信号；如果为假，则超时已过期。

for 的布尔参数`exitContext`指示是否释放调用此方法的同步上下文。[在 MSDN 上](http://msdn.microsoft.com/en-us/library/kzy257t0.aspx)查看更多信息。

> 除非从非默认托管上下文中调用该方法，否则该`exitContext`参数无效。`WaitOne`如果您的线程在对从`ContextBoundObject`. 即使您当前正在对不从 派生的类执行方法`ContextBoundObject`，例如，如果 a在当前应用程序域的堆栈中`String`，您也可以处于非默认上下文中。`ContextBoundObject`
> 
> 当您的代码在非默认上下文中执行时，指定 true for会导致线程在执行方法`exitContext`之前退出非默认托管上下文（即转换到默认上下文） 。`WaitOne`在方法调用完成后，线程返回到原始的非默认上下文`WaitOne`。

# javascript - 从另一个页面使用 JavaScript

> ID：14443102
> 
> 赞同：0
> 
> 时间：2013-01-21T16:33:46.023
> 
> 标签：javascript, html

我发现下面的 Javascript 效果很有趣，想在我的网页上使用它作为背景。

[http://www.chiptune.com/starfield/starfield.html](http://www.chiptune.com/starfield/starfield.html)

我将 html 页面保存到我的计算机上并尝试在本地运行它，但它呈现的只是一个空白的黑色页面。

该页面似乎没有使用除 adsense .js'es 之外的任何外部文件。那为什么在我的浏览器上直接从他们的网站运行，而不是从我的计算机本地运行。

注意 - 我将它作为 file:///home/anirudh/fest/stars/Starfield.html 运行，而不是从本地服务器运行。这就是它不运行的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:38:31.533

因为本地运行时缺少2个adsense js文件，所以剩下的javascript没有执行。

删除对 2 个 js 文件的引用解决了我刚才测试的问题:)

# c# - WP7 的当前上下文中不存在名称“xxx”

> ID：14443103
> 
> 赞同：0
> 
> 时间：2013-01-21T16:33:48.407
> 
> 标签：c#, xaml, windows-phone-7, datacontext

这是我的 xaml 代码：

```
<TextBox x:Name="name_box_det" Text="{Binding Name}" Height="65" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667"/> 
```

这是 C# 代码，用于获取文本值：

```
var name_text_det = name_box_det.Text; 
```

我得到了这个例外：

```
The name 'name_box_det' does not exist in the current context 
```

Xaml 代码是从另一个 xaml 复制的，但我尝试编写全新的代码，但没有帮助。你知道错误在哪里吗？

* * *

这是完整的 XAML 代码：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
<Image Margin="0" Grid.Row="1" Source="devdesk.png" Stretch="Fill"/>
<StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,45,12,12"Orientation="Horizontal">
<ListBox x:Name="listBox1">
<ListBox.ItemTemplate>
<DataTemplate>
<StackPanel>
<TextBlock Height="27" Margin="0,0,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Record index:" VerticalAlignment="Top" Foreground="#FF6C6C6C"/>
<TextBox Text="{Binding Index}" x:Name="index_box_det" Height="65" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667"/>

                        <TextBlock Name="record_name" Height="27" Margin="0,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Record name:" VerticalAlignment="Top" Foreground="#FF6C6C6C"/>
                        <TextBox x:Name="name_box_det" Text="{Binding Name}" Height="65" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667"/>
                    <TextBlock Height="27" Margin="0,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Beneficiary:" VerticalAlignment="Top" Foreground="#FF6C6C6C"/>
                        <TextBox x:Name="beneficiary_box_det" Text="{Binding Beneficiary}" Height="65" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667"/>
                    <TextBlock Height="27" Margin="0,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Price:" VerticalAlignment="Top" Foreground="#FF6C6C6C"/>
                        <TextBox x:Name="price_box_det" Height="65" Text="{Binding Price}" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667"/>
                    <TextBlock Margin="0,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Deadline:" Foreground="#FF6C6C6C"/>
                        <TextBox x:Name="deadline_box_det" Text="{Binding Deadline}" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667"/>
                    <TextBlock Margin="0,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Description:" Foreground="#FF6C6C6C" Height="27" VerticalAlignment="Bottom"/>
                        <TextBox x:Name="description_box_det" Text="{Binding Description}" Margin="-12,-10,0,0" Grid.Row="1" TextWrapping="Wrap" Foreground="#FF40AA2F" HorizontalAlignment="Left" Width="467" SelectionBackground="#FF40AA2F" SelectionForeground="White" BorderBrush="#FF3FA92E" FontSize="18.667" Height="285" VerticalAlignment="Bottom"/>
                    <Button Width="375" x:Name="edtbtn" Content="Edit this record" Click="edtbtn_Click" Height="88" Margin="-12,-10,0,0" Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Left" BorderThickness="3" Foreground="#FF40AA2F" BorderBrush="#FF40AA2F" Background="{x:Null}"/>
                        <Button Width="100" x:Name="dltbtn" Click="dltbtn_Click" Height="88" Margin="-12,-98,0,0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Bottom" BorderThickness="3" Foreground="#FF40AA2F" BorderBrush="#FF40AA2F" Background="{x:Null}">
                            <StackPanel>
                                <Image Source="delete.png"/>
                            </StackPanel>
                        </Button>

    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
    </ListBox>

    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:00:07.293

`name_box_det`存在于 ListBox 的 ItemTemplate 中。这是与您的页面不同的上下文，因此是错误。因为集合中的每个项目都将存在此 TextBlock 的实例，所以您无法知道您在后面的代码中指的是哪一个。

我猜你正在删除按钮单击事件处理程序中执行此操作。由于您没有提供您正在做的事情的完整重现，这里有一个如何完成的示例。

假设 UI 包含：

```
<ListBox ItemsSource="{Binding}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Name}" />
                <Button Content="delete" Grid.Column="1" Click="DeleteClicked"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

和 DataContext 是这样的：

```
this.DataContext = new[]
                        {
                            new SimpleViewModel { Name = "one" },
                            new SimpleViewModel { Name = "two" },
                            new SimpleViewModel { Name = "three" },
                        }; 
```

然后单击事件处理程序可能如下所示：

```
private void DeleteClicked(object sender, RoutedEventArgs e)
{
    MessageBox.Show(
        "You're trying to delete " + 
        ((sender as FrameworkElement).DataContext as SimpleViewModel).Name);
} 
```

# python - re.sub 贪心字符

> ID：14443104
> 
> 赞同：1
> 
> 时间：2013-01-21T16:33:52.393
> 
> 标签：python, regex, string

我想从以 开头的字符串中删除文本`"\"`，例如：

```
 \xf, \africa\87, \ckat\x70, ... 
```

有没有办法使用贪婪的字符来做到这一点`re.sub`？

例如：

```
line = re.sub("[\.*]", "", line) 
```

谢谢！

编辑：输入示例：

```
" lorem ipsum \xe2\x80\x9csianhill7 lorem ipsum" 
```

输出：

```
" lorem ipsum lorem ipsum" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:01:14.993

如果我正确理解你的问题，你想从你的句子中删除所有非 ascii 前缀词

您可以通过`single pass LC`使用`ordinal match`和`filter`不使用来轻松地做到这一点`regex`

```
>>> data = " lorem ipsum \xe2\x80\x9csianhill7 lorem ipsum"
>>> ' '.join(e for e in data.split() if 31 < ord(e[0]) < 127)
'lorem ipsum lorem ipsum' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:39:03.230

要匹配的表达式是：

```
[\b\\][\w]+,? 
```

并且使用您输入的 lorem ipsum 文本，上面的表达式只匹配您要删除的内部单词:)

[示例红字](http://rubular.com/r/MUtEt8fabw)

我`,`在字符串中添加了一些其他正则表达式来匹配，并`*`在之后用于 0 或更多`\`

```
[\b\\][\w.,]* 
```

[另一个例子](http://rubular.com/r/BdGSw5qwxP)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:58:19.167

```
regex = re.compile(r"""
                    \\\S+\s*
                    """, re.VERBOSE)
line = r" lorem ipsum \xe2\x80\x9csianhill7 lorem ipsum"
replaced = regex.sub("", line) 
```

请注意，您需要告诉 python 将 '\' 视为常规字符而不是转义字符。这是通过在字符串前面添加 r 来完成的。

我还假设您要删除以 '\' 开头的所有文本，直到并包括下一个空白字符。

# django - Django 使用表单输入来查询数据——应该很简单，不是（对我来说）

> ID：14443107
> 
> 赞同：4
> 
> 时间：2013-01-21T16:34:03.387
> 
> 标签：django, forms, views, django-class-based-views

我有一个看起来像这样的表格：

```
class AddressSearchForm(forms.Form):
    """
        A form that allows a user to enter an address to be geocoded
    """
    address = forms.CharField() 
```

我没有存储这个值，但是，我正在对地址进行地理编码并检查以确保它有效：

```
def clean_address(self):
    address = self.cleaned_data["address"]
    return geocode_address(address, True) 
```

地理编码函数如下所示：

```
def geocode_address(address, return_text = False):
    """ returns GeoDjango Point object for given address
        if return_text is true, it'll return a dictionary: {text, coord}
        otherwise it returns {coord}
    """ 
    g = geocoders.Google()
    try:
        #TODO: not really replace, geocode should use unicode strings
        address = address.encode('ascii', 'replace')            
        text, (lat,lon) = g.geocode(address)
        point = Point(lon,lat)
   except (GQueryError):
       raise forms.ValidationError('Please enter a valid address')
    except (GeocoderResultError, GBadKeyError, GTooManyQueriesError):
    raise forms.ValidationError('There was an error geocoding your address. Please try again')
    except:
        raise forms.ValidationError('An unknown error occured. Please try again')

    if return_text:
         address = {'text':text, 'coord':point}
    else:
        address = {'coord':point}

    return address 
```

我现在需要做的是创建一个视图，该视图将使用地址数据查询模型以过滤结果。我很难弄清楚如何做到这一点。如果可能的话，我想使用 CBV。我可以使用FormView来显示表单，使用ListView来显示查询结果，但是如何在两者之间传递表单数据呢？

提前致谢。

更新：我知道如何查询我的模型来过滤结果。我只是不知道如何正确组合使用基于表单和类的视图，以便我可以访问我的过滤器的cleaned_data。例如：

流程应该是：

1) 在 get 上显示表单 2) 在 post 上提交表单并验证（地理编码地址） 3) 运行查询并显示结果

```
address = form.cleaned_data['address']
point = address['coord']
qs = model.objects.filter(point__distance_lte=(point, distance) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:59:34.517

好的，这是基于 psjinx 方向最终工作的通用版本：

```
from django.views.generic.base import TemplateResponseMixin, View
from django.views.generic.edit import FormMixin
from django.views.generic.list import MultipleObjectMixin

class SearchView(FormMixin, MultipleObjectMixin, TemplateResponseMixin, View):
    """
     A View which takes a queryset and filters it via a validated form submission
    """
    queryset = {{ initial queryset }} # you can use a model here too eg model=foo
    form_class = {{ form }}

    def get(self, request, *args, **kwargs):
        form_class = self.get_form_class()
        form = self.get_form(form_class)
        return self.render_to_response(self.get_context_data(form=form))

    def post(self, request, *args, **kwargs):
        form_class = self.get_form_class()
        form = self.get_form(form_class)
        if form.is_valid():
            return self.form_valid(form)
        else:
            return self.form_invalid(form)    

    def form_valid(self, form):
        queryset = self.get_queryset()
        search_param = form.cleaned_data['{{ form field }}']
        object_list = queryset.filter({{ filter operation }}=search_param)
        context = self.get_context_data(object_list=object_list, form=form, search_param=search_param)
        return self.render_to_response(context) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:32:10.033

这类似于此处提出的问题，或者我会说两个问题的组合。

1.  [Django：基于类的 ListView 中的搜索表单](https://stackoverflow.com/questions/13416502/django-search-form-in-class-based-listview)
2.  [在没有第三方应用程序的情况下搜索 django 模型的多个字段](https://stackoverflow.com/questions/4487054/search-multiple-fields-of-django-model-without-3rd-party-app)
3.  [django 简单的多字段搜索方法](https://stackoverflow.com/questions/2726686/django-simple-approach-to-multi-field-search)（如果您的模型类似于此问题中提到的模型）

请查看上述问题及其答案，如果您仍有任何问题，请在评论中回复此答案。

* * *

## 更新 1

```
from django.views.generic.base import TemplateResponseMixin, View
from django.views.generic.edit import FormMixin
from django.views.generic.list import MultipleObjectMixin

class SearchView(FormMixin, MultipleObjectMixin, TemplateResponseMixin, View):
    model = SomeModel
    form_class = AddressSearchForm
    template = "search.html"

    def get_queryset():
        ## Override it here
        pass

    def post():
        ## If your form is invalid then request won't reach here
        ## because FormMixin is in left most position
        ## do something
        ## call self.render_to_response()

    def form_valid():
        ## Your form is valid do something
        ## if form is invalid then next method will be called
        pass

    def form_invalid(self):
        ## form is not valid
        ## render to some template 
```

### 有用的链接：

1.  [https://github.com/django/django/blob/1.4.3/django/views/generic/base.py](https://github.com/django/django/blob/1.4.3/django/views/generic/base.py)
2.  [https://github.com/django/django/blob/1.4.3/django/views/generic/edit.py](https://github.com/django/django/blob/1.4.3/django/views/generic/edit.py)
3.  [https://github.com/django/django/blob/1.4.3/django/views/generic/list.py](https://github.com/django/django/blob/1.4.3/django/views/generic/list.py)

### 相关问题：

1.  [Django - 混合 ListView 和 CreateView](https://stackoverflow.com/questions/9338181/django-mixing-listview-and-createview)

# dart - 使用 Dart 轻松访问 Google Drive

> ID：14443108
> 
> 赞同：2
> 
> 时间：2013-01-21T16:34:04.050
> 
> 标签：dart, google-drive-api

我正在尝试使用 Dart 从谷歌驱动器读取基本文本文件（无需授权）。下面的代码返回 400 错误。如果 API_KEY 被删除，则会出现 403 错误。我可以将文件 ID 输入到 Google 获取文件参考页面，它会正确返回元数据。

任何想法都会很棒。谢谢

```
final url = "https://www.googleapis.com/drive/v2/files/FILE?key={API_KEY}";

  var request = new HttpRequest();

  request.on.loadEnd.add( (Event e) 
  {
    if (request.status == 200) 
    {
      var data = JSON.parse(request.responseText);
      query("#file").text = data;
    } 
    else 
    {
      query("#file").text = "Error ${request.status}: ${request.statusText}";
    }
  });

  request.open("GET", url);
  request.send(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T19:27:44.577

您最好的选择是使用 drive_v2_api_client。

这可以通过使用以下设置设置您的 google 控制台 API 来完成，以便使用 DartEditor 进行 localhost 测试

```
Redirect URIs:  http://127.0.0.1:3030/oauth2callback
JavaScript origins: http://127.0.0.1:3030 
```

然后通过将以下依赖项放入 pubspec.yaml 文件中来使用 dart 驱动包 drive_v2_api_client。

```
dependencies:
  drive_v2_api_client:
    git: git://github.com/Scarygami/dart_drive_v2_api_client.git 
```

此示例允许客户端在客户端使用客户端 ID 进行身份验证后获取文件 ID。

```
import 'dart:html';
import 'dart:json';
import "package:drive_v2_api_client/drive_v2_api_client.dart" as drivelib;
import "package:google_oauth2_client/google_oauth2_client.dart";

final CLIENT_ID = "<YOUR CLIENT ID FROM CONSOLE API>";
final SCOPES = [drivelib.Drive.DRIVE_FILE_SCOPE];

void main() {
  var fileid = "1B_cGCNFjnK3dDriTMLsSS_zExfGFkQeewb3dcP4xSPg";
  var auth = new OAuth2(CLIENT_ID, SCOPES);
  var drive = new drivelib.Drive(auth);
  drive.makeAuthRequests = true;
  var loginButton = query("#login");
  var output = query("#text");

  loginButton.on.click.add((Event e) {
    auth.login().then((token) {
      output.appendHtml("Got Token ${token.type} ${token.data}<br><br>");

      drive.files.get(fileid)
      ..then((data) {
        output.appendHtml(data.toString());
      });

    });
  });
} 
```

您可以在此处找到工作示例的所有源代码[https://gist.github.com/4588427](https://gist.github.com/4588427)

# jquery - jQuery通过索引查找元素并在其后插入节点

> ID：14443110
> 
> 赞同：2
> 
> 时间：2013-01-21T16:34:13.253
> 
> 标签：jquery

任何人都可以帮助我解决这个小难题，我已经尝试过尽可能用最短的时间完成它，但我不确定 insertAfter 是否以这种方式工作。

任何人都可以建议这样做的工作方式。

我已经解决了我的问题。

[http://jsfiddle.net/GzHnj/3/](http://jsfiddle.net/GzHnj/3/)

我只是想`li`在 5th 之后插入另一个自定义`li`。但试图以最有效的方式做到这一点。

```
$('<li style="background: red"></li>').insertAfter( $('li').index(4) ); 
```

谁能帮我解决这个问题，谢谢。

乔什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:35:29.567

您可能[`.index()`](http://api.jquery.com/index/)对[`.eq()`](http://api.jquery.com/eq/). 用这个

**[现场演示](http://jsfiddle.net/rajaadil/GzHnj/4/)**

```
$('<li style="background: red"></li>').insertAfter( $('li:eq(4)') ); 
```

# java - 使用输出流显示来自服务器的图像

> ID：14443125
> 
> 赞同：0
> 
> 时间：2013-01-21T16:34:53.360
> 
> 标签：java, ajax, jsp, servlets

我正在尝试在浏览器中显示来自服务器的图像。我正在关注此链接 [http://balusc.blogspot.in/2007/04/imageservlet.html](http://balusc.blogspot.in/2007/04/imageservlet.html)。我必须说这是很好的书面和记录。我试过了，一切正常。

当我使用 ajax 显示此图像时，问题就出现了。整个图像似乎分解成 div 内的一些代码。

我知道代码中使用的输出流直接写入页面。但是真的不可能处理该输出流以某种方式在 jsp 的图像标记中显示图像而无需创建不同的 servlet。

感谢您阅读

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:42:56.200

您不需要通过 AJAX 请求图像数据然后自己操作它，以便显示它。只需使用`<img>`标签！

如果`/my_url`是您的图像的位置，那么

```
<img src="/my-url" alt="Appropriate description"/> 
```

会做的。注意：`/my-url`不必是*实际*图像。它可以是返回具有适当 MIME 类型集的图像数据的任何资源（包括 servlet）。

如果你想动态创建标签，你可以使用你喜欢的库，或者使用原生 JS：

```
var oImg=document.createElement("img");
oImg.setAttribute('src', '/my-url');
oImg.setAttribute('alt', 'Appropriate description');
oImg.setAttribute('height', imgHeight);
oImg.setAttribute('width', imgWidth);
document.body.appendChild(oImg); 
```

## 编辑

如果你想做这个服务器端（如果是的话，这真的是 AJAX 吗？），那么你可能想看看[data uri scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)。

使用此方案，您可以直接向图像标签提供数据，而无需为其提供 HTTP 资源。要使用它，请将输出流转换为 base64 并使用以下内容：

```
<img src="data:image/png;base64,converted-data-stream-goes-here..." alt="Who needs HTTP?"/> 
```

`image/png`会根据源数据的 MIME 类型而改变。

阅读链接的 Wikipedia 页面以充分了解此处的权衡取舍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:52:16.030

只需添加我如何实现它的解决方案。我通过 ajax 引用了一个新页面（来自我提交表单的页面），在新页面中我使用了一个图像，并通过它的 src 属性我调用了 servlet 方法，该方法通过其输出流写入图像。

这样，servlet 将我的图像写入我可以放置在任何地方的新文件。

# c# - 如何将 MemoryStream 写入字节 []

> ID：14443131
> 
> 赞同：54
> 
> 时间：2013-01-21T16:35:10.440
> 
> 标签：c#, stream

> **可能重复：**
> [从流中创建字节数组](https://stackoverflow.com/questions/221925/creating-a-byte-array-from-a-stream)

我正在尝试在内存中创建文本文件并写入它`byte[]`。我怎样才能做到这一点？

```
public byte[] GetBytes()
{
    MemoryStream fs = new MemoryStream();
    TextWriter tx = new StreamWriter(fs);

    tx.WriteLine("1111");
    tx.WriteLine("2222");
    tx.WriteLine("3333");

    tx.Flush();
    fs.Flush();

    byte[] bytes = new byte[fs.Length];
    fs.Read(bytes,0,fs.Length);

    return bytes;
} 
```

但由于数据长度，它不起作用

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-21T16:37:38.190

怎么样：

```
byte[] bytes = fs.ToArray(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T16:39:51.137

试试下面的代码：

```
public byte[] GetBytes()
{
MemoryStream fs = new MemoryStream();
TextWriter tx = new StreamWriter(fs);

tx.WriteLine("1111");
tx.WriteLine("2222");
tx.WriteLine("3333");

tx.Flush();
fs.Flush();
byte[] bytes = fs.ToArray();
return bytes;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T16:38:21.890

```
byte[] ObjectToByteArray(Object obj)
{
    using (MemoryStream ms = new MemoryStream())
    {
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(ms, obj);
        return ms.ToArray();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T16:46:40.893

```
 public byte[] GetBytes()
    {
        MemoryStream fs = new MemoryStream();
        TextWriter tx = new StreamWriter(fs);

        tx.WriteLine("1111");
        tx.WriteLine("2222");
        tx.WriteLine("3333");

        tx.Flush();
        fs.Flush();

        fs.Position = 0;

        byte[] bytes = new byte[fs.Length];
        fs.Read(bytes, 0, bytes.Length);

        return bytes;
    } 
```

# hadoop - Apache Pig：在 foreach 引用顶级字段中应用 LIMIT

> ID：14443135
> 
> 赞同：0
> 
> 时间：2013-01-21T16:35:32.363
> 
> 标签：hadoop, apache-pig

我在引用 a 中的“父”字段时遇到问题`foreach`：

```
grunt> describe METRICS_SOURCE_WITH_CNT
METRICS_SOURCE_WITH_CNT: 
{group: (hostname: chararray,site_guid: chararray,timestamp: long),
JOIN_FIELDS_ONLY: {(timestamp: long, unique_pageviews: long)},cnt: long 
```

请注意，这`cnt`是元组的总数。

```
METRICS_SOURCE_TOP3 = foreach METRICS_SOURCE_WITH_CNT {

    SORTED = ORDER JOIN_FIELDS_ONLY by unique_pageviews DESC;
    TOPK = LIMIT SORTED 10;

    REVSORTED = ORDER JOIN_FIELDS_ONLY by unique_pageviews ASC;
    BOTTOMK = LIMIT REVSORTED cnt;

    generate TOPK, BOTTOMK;
} 
```

但似乎当我应用第二个时`LIMIT`，Pig 认为该`cnt`字段在 within `REVSORTED`，但它实际上是一个“父”字段。

```
Invalid field projection. Projected field [cnt] does not exist in schema: timestamp:long,.... 
```

我试过按数字引用字段，`$x`但它不起作用。Pig 总是认为被引用的字段在被`LIMIT`'d的关系内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:57:13.063

您需要使用 Pig 的[取消引用运算符](http://pig.apache.org/docs/r0.10.0/basic.html#deref)，它允许您使用`.`. 对于您的示例：

```
METRICS_SOURCE_TOP3 = foreach METRICS_SOURCE_WITH_CNT {

    SORTED = ORDER JOIN_FIELDS_ONLY by unique_pageviews DESC;
    TOPK = LIMIT SORTED 10;

    REVSORTED = ORDER JOIN_FIELDS_ONLY by unique_pageviews ASC;
    BOTTOMK = LIMIT REVSORTED METRICS_SOURCE_WITH_CNT.cnt;

    generate TOPK, BOTTOMK;
} 
```

另外有趣的是，在 0.10 之前，Pig 不支持语句中的标量`LIMIT`，所以这种语句会失败。

# asp.net-mvc - 在 Asp.net MVC 中通过代码限制 IP

> ID：14443138
> 
> 赞同：2
> 
> 时间：2013-01-21T16:35:45.970
> 
> 标签：asp.net-mvc, ddos

我的服务器受到 DDoS 攻击，所以我想限制 IP。我知道如何在 ASP.NET MVC 中检测 DDoS（在 ApplicationBeginRequest 方法中），但是还有一种方法（在 ASP.NET 中）可以对 NIC、Windows 防火墙或 IIS 施加限制吗？

有任何想法吗？

如果我可以通过代码限制 NIC 级别的 ip，我将是一个非常快乐的人 :)

# .net - 创建集合 使用反射

> ID：14443139
> 
> 赞同：0
> 
> 时间：2013-01-21T16:35:47.037
> 
> 标签：.net, c#-4.0, reflection

我需要将一个`Collection<T>`类型传递`SharpSvn.SvnListEventArgs`给该 `svnClient.GetList`方法。`T`需要在运行时解析类型，因为这在 MSBuild 内联任务中使用。方法调用将`GetList`运行时错误抛出为

> ' ' 的最佳重载方法匹配`SharpSvn.SvnClient.GetList(SharpSvn.SvnTarget, out System.Collections.ObjectModel.Collection<SharpSvn.SvnListEventArgs>)`有一些无效参数

下面是我尝试过的代码片段。我该如何解决这个问题？

```
 System.Type t = svntask.GetType("SharpSvn.SvnListEventArgs");
    //System.Collections.ObjectModel.Collection<System.EventArgs> branchfolderlist = new System.Collections.ObjectModel.Collection<System.EventArgs>();

    System.Type genericType = typeof(System.Collections.ObjectModel.Collection<>);
    System.Type constructedType = genericType.MakeGenericType(t);

    var branchfolderlist = System.Activator.CreateInstance(constructedType);

    //branchfolderlist = svntask.GetType("SharpSvn.SvnListEventArgs")branchfolderlist;
    //System.Collections.ObjectModel.Collection<System.Object> branchfolderlist;

    dynamic svnTarget = svntask.GetType("SharpSvn.SvnTarget").GetMethod("FromUri").Invoke(null, new object[] { new System.Uri(destinationBranch) });

    //svntask.GetType("SharpSvn.SvnClient").GetMethod("GetList").Invoke(null, System.Reflection.BindingFlags.InvokeMethod, null, new object[] { svnTarget, branchfolderlist }, null);

    svnClient.GetList(svnTarget, out branchfolderlist);

    return true; 
```

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:43:25.467

问题是声明的类型`branchfolderlist`是`object`。将其更改为`dynamic`应该可以解决问题。

# activeadmin - 使语义错误呈现确切的错误消息

> ID：14443140
> 
> 赞同：4
> 
> 时间：2013-01-21T16:35:51.317
> 
> 标签：activeadmin, formtastic

我有一个`Camping`模型`has_many` `Images`。露营至少需要一张图片：

```
class Camping < ActiveRecord::Base
  attr_accessible :images_attributes
  has_many :images
  validates_presence_of :images, :message => "At least one image is required"
  accepts_nested_attributes_for :images, :allow_destroy => true
 end 
```

然后，在使用[formtastic的](http://github.com/justinfrench/formtastic)[active_admin](http://activeadmin.info/docs/5-forms.html)中，我呈现错误消息**At least one image is required**，其中：**`f.semantic_errors`**

 **```
ActiveAdmin.register Camping do
  form :html => { :multipart => true } do |f|
     f.semantic_errors :images
     #....
     f.inputs "Images" do
      f.has_many :images do |img|
        #....
      end
    end
    #....
  end
end 
```

这呈现为：

![错误输出示例](../Images/8f10e554d4848ecbb280dbc29c2a087e.png)

**图片 至少需要一张图片**。

如何使其渲染：**至少需要一张图像**？

将 in 更改`f.semantic_errors :images`为 ' `f.semantic_errors`（删除 :images）使其不渲染；完全没有错误。

注意：[API 文档](http://rdoc.info/github/justinfrench/formtastic/Formtastic/Helpers/ErrorsHelper:semantic_errors)似乎暗示 Formtastic 总是将`:attribute`名称添加到错误中；但我不完全确定这段代码是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:24:13.273

如果您想使用此类自定义消息，您可以添加与整个对象状态相关的错误消息，而不是与特定属性相关

改变这个

```
validates_presence_of :images, :message => "At least one image is required" 
```

类似于

```
 validate :should_have_images
   def should_have_images
       errors.add(:base, "At least one image is required") if images.blank?
   end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T12:16:01.780

如果你想使用这样的自定义消息，你可以添加新方法`Formtastic::Helpers::ErrorsHelper`如下

在创建新文件`config/initializers/errors_helper.rb`

将以下代码放入文件

```
module Formtastic
  module Helpers
    module ErrorsHelper
      def custom_errors(*args)
        return nil if @object.errors.blank?
        messages = @object.errors.messages.values.flatten.reject(&:blank?)
        html_options = args.extract_options!
        html_options[:class] ||= 'errors'
        template.content_tag(:ul, html_options) do
          messages.map do |message|
            template.content_tag(:li, message)
          end.join.html_safe
        end
      end
    end
  end
end 
```

在 activeadmin 表单中使用 `f.custom_errors`而不是`f.semantic_errors *f.object.errors.keys`**

# ftp - 错误：无法为标准输入打开 /dev/null：没有这样的文件或目录

> ID：14443144
> 
> 赞同：1
> 
> 时间：2013-01-21T16:36:07.770
> 
> 标签：ftp, proftpd

我无法在`proftpd`工作中获得简单的触发。这是我所做的：

```
 <IfModule mod_exec.c>
  ExecEngine on
  ExecOptions logStderr logStdout
  ExecLog /var/log/proftpd/exec.log
  ExecOnCommand APPE,STOR /usr/local/bin/proftptest.sh %u %f
 </IfModule> 
```

但是它不断失败：

```
Jan 21 17:31:07 mod_exec/0.9.9[22514]: already saw this Exec, skipping
Jan 21 17:31:07 mod_exec/0.9.9[22514]: already saw this Exec, skipping
Jan 21 17:31:07 mod_exec/0.9.9[22514]: preparing to execute '/usr/local/bin/proftptest.sh' with uid 117 (euid 117), gid 65534 (egid 65534)
Jan 21 17:31:07 mod_exec/0.9.9[22514]:  + '/usr/local/bin/proftptest.sh': argv[1] = ftp
Jan 21 17:31:07 mod_exec/0.9.9[22514]:  + '/usr/local/bin/proftptest.sh': argv[2] = /home/ftp/incoming/Examples.txt
Jan 21 17:31:07 mod_exec/0.9.9[22514]: error: unable to open /dev/null for stdin: No such file or directory
Jan 21 17:31:07 mod_exec/0.9.9[22514]: STOR ExecOnCommand '/usr/local/bin/proftptest.sh' failed: No such file or directory
Jan 21 17:31:07 mod_exec/0.9.9[22514]: already saw this Exec, skipping
Jan 21 17:31:07 mod_exec/0.9.9[22514]: already saw this Exec, skipping 
```

但是脚本看起来不错（从我的用户会话运行，默认环境）：

```
$ ls -al /usr/local/bin/proftptest.sh
-rwxr-xr-x 1 root root 97 Jan 21 17:25 /usr/local/bin/proftptest.sh 
```

我没有使用 DefaultRoot：

```
$ grep Default /etc/proftpd/proftpd.conf
DefaultServer           on
# DefaultRoot           ~ 
```

我可能会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:24:28.913

如文档中所述：

[http://www.castaglia.org/proftpd/modules/mod_exec.html#Usage](http://www.castaglia.org/proftpd/modules/mod_exec.html#Usage)

> 此模块不适用于`<Anonymous`> 登录

本文档描述了症状，但并没有解决真正的问题，因此请转到不同的 ftp 服务器...

# java - 如果我使用 MultipartConfig 注释 servlet，则无法使用 ApacheCommons 进行文件上传

> ID：14443148
> 
> 赞同：0
> 
> 时间：2013-01-21T16:36:19.850
> 
> 标签：java, jakarta-ee, servlets, upload, apache-commons

如果我用 注释以下 servlet `@MultipartConfig`，我将无法使用`Apache common upload`.

```
@MultipartConfig

public class SendTheFileName extends HttpServlet {
  // something
  protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
           moveToSharedDirectory(request,path); // call to upload
  }
} 
```

例如 ：

```
public boolean moveToSharedDirectory(HttpServletRequest request,String path) {
    System.out.println("1\. OUTSIDE THE TRY BLOCK OF UPLOAD CLASS");
    try {
       System.out.println("2\. IN THE TRY BLOCK OF UPLOAD CLASS");
       boolean isMultipart = ServletFileUpload.isMultipartContent(request);
       System.out.println("3\. AFTER THE BOOLEAN STATEMENT " + isMultipart);
       if(!isMultipart) {
           // Error:File cannot be uploaded
           System.out.println("Message : IS NOT MULTIPART");
       } else {
           DiskFileItemFactory dfif = new DiskFileItemFactory();
           ServletFileUpload fileUpload = new ServletFileUpload(dfif);
           List list = null;
           list = fileUpload.parseRequest(request); // returns a list of FileItem instances parsed from the request
           Iterator iterator = list.iterator();
           System.out.println("4\. JUST BEFORE ENTERING THE WHILE LOOP");
           System.out.println("5\. CHECKING IF THE ITERATION HAS ANY ELEMENT : " + iterator.hasNext());

           // ... some more here {-}
         }
    } // close catch
} 
```

上面代码段中的语句：

```
System.out.println("5\. CHECKING IF THE ITERATION HAS ANY ELEMENT : " + iterator.hasNext()); 
```

打印`false`！这是为什么 ？

如果我删除我得到的注释`true`并且能够上传文件。

*对应的HTML：*

```
<form method="post" action="SendTheFileName" enctype="multipart/form-data">
                <div id="Files_to_be_shared"> 
                      <input type="file" id="File" name="FileTag" />
                      <input type="submit" value="Share" /> 
                    </div>
 </form> 
```

*注意：由于某种原因，我不得不使用 apache commons 来上传文件。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:05:32.383

在调用servlet 之前`@MultipartConfig`触发 Servlet 3.0 内置请求正文解析。因此，当轮到 Apache Commons FileUpload 解析请求时，它将面临一个空的请求正文。换句话说，你不能混合它们。将它们混合起来也没有任何意义，因为它们都在幕后做着完全相同的工作。`multipart/form-data``service()`

您有 2 个选项：

1.  删除`@MultipartConfig`并保留 Apache Commons FileUpload。

2.  或者，保留`@MultipartConfig`并删除 Apache Commons FileUpload。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)- 展示如何使用 Servlet 3.0 获取部件

# git - 我可以推送到 git 并强制设置最大包大小吗？

> ID：14443151
> 
> 赞同：8
> 
> 时间：2013-01-21T16:36:36.090
> 
> 标签：git, github

我正在将一个非常大的存储库推送到 GitHub，我收到一条错误消息，指出包超过了允许的最大大小：

```
git push
Counting objects: 2072164, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (731293/731293), done.
fatal: pack exceeds maximum allowed size2.00 GiB | 118 KiB/s      
error: pack-objects died of signal 13 
```

有没有办法在推送时强制设置最大包装尺寸？`git repack --max-pack-size=1g -d -f -F -a`推前我试过了。我也试过了`git config pack.packSizeLimit 1g`。还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T06:46:26.363

不可以。您不能直接更改推送的包大小。

请参阅我对[这个问题](https://stackoverflow.com/questions/15125862/github-remote-push-pack-size-exceeded)的回答以获得解释。

# ruby-on-rails - 如何在 gem 的模块中覆盖类方法？

> ID：14443153
> 
> 赞同：2
> 
> 时间：2013-01-21T16:36:39.413
> 
> 标签：ruby-on-rails, module, omniauth, saml

我正在尝试将救援语句添加到否则失败的 gem。问题是我没有正确地覆盖原始 gem 的方法。我怎样才能做到这一点？

**原始宝石**

```
module OmniAuth
  class Configuration
    include Singleton
      def add_camelization(name, camelized)
        self.camelizations[name.to_s] = camelized.to_s
      end 
```

**初始化程序/omniauth.rb**

```
module OmniAuth
  class Configuration
    def add_camelization(name, camelized)
      begin
        self.camelizations[name.to_s] = camelized.to_s
      rescue
        puts "No camelization for #{camelized}"
      end
      # ^ This rescue statement is not being called to replace the original gem's method.
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T17:04:28.497

尝试

```
OmniAuth::Configuration.class_eval do
    def add_camelization(name, camelized)
        ...
    end
end 
```

# visual-studio - Visual Studio 2012 奇怪的信号图标

> ID：14443154
> 
> 赞同：3
> 
> 时间：2013-01-21T16:36:47.727
> 
> 标签：visual-studio, visual-studio-2012, icons, resharper, resharper-7.1

我在 VS 2012 项目中有一个类，其信号图标是黑色菱形（下图）。

![未知信号图标-黑钻石](../Images/fc95131e07a89207eb6e66a4cf28683f.png)

我不熟悉这个图标，它没有列在 msdn 上的[VS 2012 类视图和对象浏览器图标](http://msdn.microsoft.com/en-us/library/y47ychfe%28v=vs.110%29.aspx)页面中。有人知道这个图标是什么意思吗？

我最初在类解析不正确时遇到了一些问题，并给出了我已经解决的构建错误......我最初认为这是某种错误信号，但是在我成功构建项目后图标仍然存在。

我还在 2012-11-14T00:34:00 使用 JetBrains ReSharper 7.1 C# Edition Build 7.1.25.234，但我在他们的网站上也找不到任何注入的图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:20:57.483

带有黑色菱形的图标表示这是一个*静态*类（以下屏幕显示静态类`System.Linq.Enumerable`）。

顺便说一句，...带有“A”的图标表示这是一个*抽象*类。

![可枚举代码完成 (IntelliSense)](../Images/f9eb77115620c09691f8798830af79d8.png)

# c# - 带有对 Linq 或 Criteria C# 的子查询的 SQL

> ID：14443155
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:36:48.647
> 
> 标签：c#, sql, linq, linq-to-sql, criteria

我正在尝试在 sql 中执行以下查询：

```
select r.*, 
   (select SUM(c.quantidade - c.quantidadeproduzida) 
      from pcp_trabalho c 
     where c.id_recurso = r.id_recurso
       and c.st_trabalho = 1) alocado,
   (select SUM(c.quantidade - c.quantidadeproduzida) 
      from pcp_trabalho c 
     where c.id_recurso = r.id_recurso
       and c.st_trabalho = 2) programado
from pcp_recurso r 
```

st_trabalho 是我项目中的一个枚举。

我试过了：

```
rv = (from r in SessionManager.GetSession().Query<RecursoCorteCircuito>()

                      select new RecursoView
                          (
                              r,
                              SessionManager.GetSession().Query<TrabalhoCorteCircuito>().Where(t => t.Recurso.Id == r.Id && t.Status == TrabalhoStatus.Alocado).Sum(t => t.Quantidade - t.QuantidadeProduzida),
                              SessionManager.GetSession().Query<TrabalhoCorteCircuito>().Where(t => t.Recurso.Id == r.Id && t.Status == TrabalhoStatus.Programado).Sum(t => t.Quantidade - t.QuantidadeProduzida)
                          )).ToList(); 
```

但是，例如，如果`SessionManager.GetSession().Query<TrabalhoCorteCircuito>().Where(t => t.Recurso.Id == r.Id && t.Status == TrabalhoStatus.Alocado)`返回`nothing`，表示没有状态为“Alocados”的“Trabalhos”，则查询返回 NullException，因此无法执行 sum(t => t.Quantidade - t.QuantidadeProduzida)。

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:27:04.227

我设法解决了我的问题。我是这样做的：

```
SessionManager.GetSession().Query<TrabalhoCorteCircuito>().Where(t => t.Recurso.Id == r.Id && t.Status == TrabalhoStatus.Alocado).Sum((int?)t => t.Quantidade - t.QuantidadeProduzida) ?? 0,
SessionManager.GetSession().Query<TrabalhoCorteCircuito>().Where(t => t.Recurso.Id == r.Id && t.Status == TrabalhoStatus.Programado).Sum((int?)t => t.Quantidade - t.QuantidadeProduzida)?? 0 
```

简要说明：

```
Sum((int?)t => t.Quantidade - t.QuantidadeProduzida) ?? 0 
```

当我输入 时`(int?)`，编译器让我们将总和设为空值，这`?? 0`意味着，如果总和返回 null，则我们将值设为 0。

谢谢你们 ！

# java - 打包 Java 应用程序

> ID：14443161
> 
> 赞同：0
> 
> 时间：2013-01-21T16:37:04.077
> 
> 标签：java, deployment

我已经构建了一个相当大的 java 应用程序，我想将它作为桌面应用程序运行。它还有其他几个需要工作的目录，以及包含类的 bin 文件夹，如图像文件夹、第 3 方 api、如数据库 jar 等。我有一个 build.xml 来创建 jar，但是jar 不运行。找不到其中一个 api 似乎是一个错误。

这是错误：

 `````
Exception in thread "main" java.lang.NoClassDefFoundError: bibliothek/gui/dock/c
ommon/CContentArea
        at pos.main.POSsystem.<init>(Unknown Source)
        at pos.main.POSsystem.main(Unknown Source)
Caused by: java.lang.ClassNotFoundException: bibliothek.gui.dock.common.CContent
Area
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 2 more 
````  `如果您对 build.xml 文件感到好奇，这里是：

 `````
<?xml version="1.0"?>

<project name="POSsystem" default="main" basedir=".">
    <!-- Sets variables which can later be used. -->
    <!-- The value of a property is accessed via ${} -->
    <property name="src.dir" location="src" />
    <property name="build.dir" location="bin" />        <!--the default bin eclipse folder-->
    <property name="shipping.dir" location="shipping" />
    <property name="doc.dir" location="doc" />
    <property name="main-class" value="pos.main.POSsystem" />
    <property name="splash-screen" value="images/splash.png" />
    <property name = "jars.dir" value="libs" />

    <property environment="env"/>
    <property name="ECLIPSE_HOME" value="C:\eclipse"/>
    <property name="debuglevel" value="source,lines,vars"/>
    <property name="target" value="1.7"/>
    <property name="source" value="1.7"/>

    <path id= "jars.path">
        <fileset dir="${jars.dir}" includes="**/*.jar" />
    </path>

    <path id="pos.classpath">
        <pathelement location="bin"/>
        <pathelement location="${jars.dir}/docking-frames-common.jar"/>
        <pathelement location="${jars.dir}/docking-frames-core.jar"/>
        <pathelement location="${jars.dir}/hsqldb.jar"/>
    </path>

    <!--THIS IS THE ADDED CODE FOR THE CLASSPATH-->
    <pathconvert property="manifest.classpath" pathsep=" ">
      <path refid="pos.classpath"/>
      <mapper>
        <chainedmapper>
           <flattenmapper/>
           <globmapper from="*.jar" to="libs/*.jar"/>
        </chainedmapper>
      </mapper>
    </pathconvert>

    <!-- Deletes the existing build, doc and shipping directory-->
    <target name="clean">
        <echo>"Cleaning..."</echo>
        <delete dir="${build.dir}" />
        <delete dir="${shipping.dir}" />
        <delete dir="${doc.dir}" />
        <echo>"Done Cleaning..."</echo>
    </target>

    <!-- Creates the  build, doc and shipping directory-->
    <target name="makedir" depends="clean">
        <echo>"Making Directories..."</echo>
        <mkdir dir="${build.dir}" />
        <mkdir dir="${doc.dir}" />
        <mkdir dir="${shipping.dir}" />
    </target>

    <!-- Compiles the java code -->
        <target name="compile" depends="makedir"> <!--depends="doc"> CHANGE BACK WHEN YOU RE-IMPLEMENT DOC-->
            <echo>"Compiling..."</echo>
            <javac srcdir="${src.dir}" destdir="${build.dir}"  includeantruntime = "false" classpathref="jars.path" />
        </target>

    <!--Creates the deployable jar file  -->
    <target name="jar" depends="compile">
        <echo>"Making Jar..."</echo>
        <jar destfile="${shipping.dir}\POSsystem.jar" basedir="${build.dir}">
            <manifest>
                <attribute name="Built-By" value="${user.name}"/>
                <attribute name="Main-Class" value="${main-class}" />
                <attribute name="Class-Path" value="${manifest.classpath}" />
                <attribute name = "SplashScreen-Image" value="${splash-screen}" />
            </manifest>
        </jar>
    </target>

    <target name="main" depends="jar"><!--depends="run">  CHANGE BACK WHEN YOU RE-IMPLEMENT RUN-->
        <description>Main target</description>
        <echo>Main...</echo>

        <!--run it here for now instead of from the jar-->
        <java classname="pos.main.POSsystem" failonerror="true" fork="yes">
            <jvmarg line="-splash:images/splash.png"/>
            <classpath refid="pos.classpath"/>
        </java>

    </target>

</project> 
````  `如果我将 build.xml 作为 ant 构建运行，它会全部编译，并且通过构建也将运行应用程序，但 jar 不会。

如果我缺少任何有用的信息，请告诉我。我已经阅读了很多关于使用 java 创建桌面应用程序的教程，但似乎无法做到这一点。

更新/编辑通过 Jayan 下面的评论，我认为我的问题确实不包括正确的类路径。所以我更新了我的 build.xml 文件以包含一个路径转换属性并将属性类路径添加到 jar 目标。但是，我仍然得到与上面发布的完全相同的错误。````

# iphone - 如何在 iPhone 中静音 MPMoviePlayerController 声音

> ID：14443163
> 
> 赞同：2
> 
> 时间：2013-01-21T16:37:07.823
> 
> 标签：iphone, session, audio, mpmovieplayercontroller, mute

我有两种媒体，

*   有声视频
*   录制的语音音频

我想用视频播放录制的语音音频，但要静音视频声音。

为了播放这些媒体，我使用 MPMoviePlayerController 播放视频，使用 AQPlayer 录制音频。

可能吗？如果是这样，任何人有一个想法，拜托？

# java - 服务器上文件的 java 路径必须加倍反斜杠

> ID：14443165
> 
> 赞同：0
> 
> 时间：2013-01-21T16:37:16.867
> 
> 标签：java, jfilechooser, backslash, unc, pathname

我有一个 Java GUI。用户使用 JFileChooser 对话框选择一个文件，包括文件的路径。路径显示在文本框中，例如

```
\\developDB\directory\subdirectory\file.info 
```

当我使用用户选择的路径（并显示在文本框中）通过 InputStream 访问文件时，它找不到文件。哎呀。

现在我将文本框中的所有反斜杠加倍。IE

```
\\developDB\\directory\\subdirectory\\file.info 
```

并使用文本框中的路径再次使用 InputStream 读取，现在找到该文件。又来了。

您可能认为这样做的原因可能是反斜杠必须用另一个反斜杠转义，但这不是这里的原因。在内部，Java 再次将反斜杠加倍以进行转义。

此外，当我尝试通过网络浏览器访问文件时，反斜杠必须加倍。

我在想这可能与两个原因有关：

*   JFileChooser 出于某种原因正在“吃掉”反斜杠。如何避免这种情况？
*   JFileChooser 工作正常，但存储文件的服务器的服务器管理员为路径名设置了一些命名约定。如果是这样，我如何才能了解 Java 程序中的这些标准，以便我可以通过编程方式将反斜杠加倍。

希望我没有让你太困惑;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:48:11.417

如果您使用 Java 标准 IO 库（java.io.FileInputStream 等），您只能使用正斜杠，Java 将在运行平台上翻译挂起。

# iphone - 如何在uitableview的自定义单元格中禁用uiswitch

> ID：14443167
> 
> 赞同：1
> 
> 时间：2013-01-21T16:37:19.063
> 
> 标签：iphone, ios, objective-c, uitableview, uiswitch

嗨，我正在研究 UITableView 和 UISwitch。我有包含 UISwitches 的自定义单元格。一开始 UISwitch 是关闭的，我打开它。当我在另一个单元格中打开 UISwitch 时，一开始打开的 UISwitch 应该关闭。我在 cellForRowAtIndexPath 中实现这个。

我正在检查是否为特定症状选择了remediateID。如果选择打开，则应关闭休息。我什至在重新引导数据。

```
cell.remedyID=[[[remedyArray objectAtIndex:indexPath.row] 
                              objectForKey:@"RemedyID"]intValue];

cell.symptomIDNo =[[[remedyArray objectAtIndex:indexPath.row]
                                  objectForKey:@"SymptomID"]intValue];

int checkValue = [[activeNotificationDictionary objectForKey:
                   [[remedyArray objectAtIndex:indexPath.row] 
                          objectForKey:@"SymptomID"]]intValue];

if (cell.remedyID == checkValue){

    objdb.notifyMe.on = YES;
} else {

    objdb.notifyMe.on = NO;
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{

    if (buttonIndex != [alertView cancelButtonIndex]){

        [activeNotificationDictionary setObject:
          [NSNumber numberWithInt:selectedRemedyID] forKey:
                             [NSNumber numberWithInt:iPath]];

        [remedyTableView reloadData];
     }    
} 
```

因此，如果有人可以帮助我..那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:25:19.470

我会在你的数据数组中使用一个布尔值，它为 uiTable 提供检查的内容，天气开关是打开还是关闭。

当您触发一个开关时，您将索引保存在作为 tableview 委托的类的全局变量中。然后在警报视图中，您可以使用保存的索引来操作数据数组中开关状态的布尔值。之后，您重新加载表。

当然，您必须以`cellForRowAtIndexPath`这种方式进行更改，即开关的状态取自布尔值，而不是默认为关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:05:43.123

我认为您的remediateArray 包含补救对象。这些对象应该有一个布尔属性并使用该属性来打开和关闭它。当你打开一个去迭代并关闭其他的。如果您无法将 BOOL 属性添加到补救类，请考虑创建一个继承类或类扩展。现在这是一种方式。如果您太担心内存，请使用实例变量来存储已打开的行的索引路径。并使用该变量显示单元格相应地意味着打开或关闭。When a new switch is selected simply call the reload data and the table should draw properly.

# google-app-engine - Google 帐户 user_id() 是否始终唯一？（即从未重复使用）

> ID：14443174
> 
> 赞同：6
> 
> 时间：2013-01-21T16:37:37.787
> 
> 标签：google-app-engine, email, google-account

是`user_id()`独一无二的吗？

也就是说，即使 a`Google Account`被删除了`user_id()`，那个被删除帐户的 也永远不会再出现在任何其他帐户中`user_id`，对吧？

我们从 [http://code.google.com/appengine/docs/python/users/userclass.html#User_user_id澄清我们对本声明的理解](http://code.google.com/appengine/docs/python/users/userclass.html#User_user_id)

> 用户身份（）
> 
> 如果电子邮件地址与 a 关联`Google account`，则`user_id` 返回用户的唯一永久 ID，一个字符串。无论用户是否更改`email` 地址，此 ID 对于用户始终是相同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:50:23.450

是的。它是一串数字，对您的电子邮件更改等是不可变的。其他属性，如电子邮件、昵称和其他属性是可变的。

**编辑**

它是独一无二的！

来自[https://developers.google.com/appengine/docs/python/users/userobjects](https://developers.google.com/appengine/docs/python/users/userobjects)

> 有效用户的 User 对象可以为用户提供一个**唯一的 ID**值，即使用户更改了她的电子邮件地址，该 ID 值也保持不变。user_id() 方法返回这个 ID，一个 str 值。
> 
> 无论您的应用程序使用哪种身份验证方法，用户对象都具有相同的形式。如果您将身份验证选项从 Google 帐户切换到 OpenID，则数据存储区中的现有用户对象仍然有效。

还要小心，因为 UserProperty 是可变的以及[讨论](https://stackoverflow.com/questions/13999106/avoid-using-db-userproperty-when-storing-user-objects)的。

# sql - 从 VB 导出为 xml

> ID：14443175
> 
> 赞同：0
> 
> 时间：2013-01-21T16:37:37.587
> 
> 标签：sql, xml, vb.net

我有以下代码：

```
Public Class Form1
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles     Button1.Click
        Dim cnn As New SqlConnection("Server=test;uid=sa;pwd=1234;database=empatic")
        Dim da As New SqlDataAdapter("select * from producte for xml path('producte'), root('Productes')", cnn)
        Dim ds As New DataSet
        da.Fill(ds)
        DataGridView1.DataSource = ds.Tables(0)
        Dim a As String = ds.Tables(0).Rows(0).Item(0).ToString
        Dim x = XDocument.Parse(a)
        Dim s = x.ToString()
        TextBoxXml.Text = s
    End Sub
End Class 
```

这段代码在 Frame 中显示 SQL 文本的内容是什么？我现在想要的是创建另一个按钮，然后在我生成一个包含框架文本中列出的内容的 XML 文件时单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:40:30.700

`System.IO.File.WriteAllText("c:\temp\someXml.xml", TextBoxXml.Text)`

# android - 从android中的服务器下载许多图片

> ID：14443180
> 
> 赞同：0
> 
> 时间：2013-01-21T16:38:00.050
> 
> 标签：android, android-asynctask, android-image

我不知道如何从 URL 中获取多个图像。

这些图像以位图的形式出现；我需要将它们转换为可绘制的，但我不知道如何。

> 可绘制图标 = getResources().getDrawable(R.drawable.icon);

我是在正确调用`url(images)`，还是有更好的方法来做到这一点？

* * *

**这是我获取图像的异步任务**

```
 private class BajarImagenTask extends AsyncTask<String, Void, Bitmap> {
        @Override
        protected Bitmap doInBackground(String... urls) {

         return BajarImagen(urls[0]);
        }

         protected void onPostExecute(Bitmap result){       

         Drawable icon = getResources().getDrawable(R.drawable.icon);

                point.setImage(d);

         }
     } 
```

这是连接：

```
 private Bitmap BajarImagen (String URL)
        {

         Bitmap bitmap  = null;
         InputStream in = null;
         try {
             in=OpenHttpConnection(URL);
             bitmap=BitmapFactory.decodeStream(in);
             in.close();
         }
         catch (IOException e1) {

         }

         return bitmap;
        } 
```

**这是内部带有“FOR”的方法，用于获取多个 URL 并多次调用 asynctask**

```
 public void datosDesdeElXML(String[][] datos) {

    for(int i = 0; i < moteles.length;i++){

        String motel[] = moteles[i];

        double lat = Double.valueOf(motel[0].trim());
        double lng = Double.valueOf(motel[1].trim());

        String name = motel[2].trim();
        String address = motel[3].trim();
        **String urldefotoglobo = motel[4].trim();**
      // here i get url from server in a xml format

        String aidis = motel[5].trim();

        **new BajarImagenTask().execute(urldefotoglobo);**
         // Here i call the asynctask 
          }
      } 
```

# mysql - 如何从数据库中获取唯一记录？

> ID：14443181
> 
> 赞同：1
> 
> 时间：2013-01-21T16:38:01.877
> 
> 标签：mysql

这是我的表结构

```
album
id ---- albumname
1   General
3   Sports
9   Activities
gallery
id --- ablumid--- image_thumb  --              image_full
1   1   uploads/1358401616.jpg  uploads/thumbs/thumb_1358401616.jpg
2   1   uploads/1358401641.jpg  uploads/thumbs/thumb_1358401641.jpg
3   1   uploads/1358402071.jpg  uploads/thumbs/thumb_1358402071.jpg
4   3   uploads/1358402334.jpg  uploads/thumbs/thumb_1358402334.jpg 
```

问题是我有太多图像无法用于单个画廊。

这是我的mysql查询

```
SELECT DISTINCT gl.catid as gallery_cat_id, ab.albumname,gl.imagest 
FROM albums as ab 
INNER JOIN gallery as gl  ON ab.id=gl.catid 
order by ab.albumname ASC 
```

这是结果

```
gallery_id  albumname   image_full
38      Activities       uploads/thumbs/thumb_1358424428.jpg
41      Activities       uploads/thumbs/thumb_1358424483.jpg
40      Activities       uploads/thumbs/thumb_1358424468.jpg
39      Activities       uploads/thumbs/thumb_1358424446.jpg 
```

查询显示来自画廊表的所有记录，我在查询中添加了 DISTINCT，但它不起作用。谁能告诉我我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:58:53.630

如果您只需要为每个专辑提供一张图片（无论如何），您可以使用 GROUP BY 子句，按专辑 ID 分组：

```
SELECT gl.catid as gallery_cat_id, ab.albumname, gl.imagest 
FROM
  albums as ab 
  INNER JOIN gallery as gl
  ON ab.id=gl.catid 
GROUP BY ab.id
order by ab.albumname ASC 
```

# parsing - YML 解析错误 - symfony 文档

> ID：14443182
> 
> 赞同：0
> 
> 时间：2013-01-21T16:38:06.647
> 
> 标签：parsing, symfony, yaml

为了允许用户在我的网站上上传文档，我正在尝试在 symfony2 应用程序上添加表单验证。根据这个文档：[http](http://symfony.com/doc/current/reference/constraints/File.html) ://symfony.com/doc/current/reference/constraints/File.html ，我应该用这个语法创建一个validation.yml文件：

```
# src/Acme/BlogBundle/Resources/config/validation.yml
Acme\BlogBundle\Entity\Author
    properties:
        bioFile:
            - File:
                maxSize: 1024k
                mimeTypes: [application/pdf, application/x-pdf]
                mimeTypesMessage: Please upload a valid PDF 
```

我尝试以多种方式键入/编辑此文件，但执行文件时总是出现解析错误：

```
 Unable to parse in "\/***\/***\/dev\/***\/src\/***\/***Bundle\/Resources\/config\/validation.yml" at line 1 (near "***\***\Entity\Author"). 
```

我尝试使用此在线 YML 解析工具测试此代码：http: [//yaml-online-parser.appspot.com/](http://yaml-online-parser.appspot.com/)，它说“属性”之后的第 3 行冒号是错误的：

```
Output
ERROR:
mapping values are not allowed here
  in "<unicode string>", line 3, column 13:
      properties:
                ^ 
```

我在这里想念什么？为什么这个在线解析器不接受 symfony 文档中使用的 YML 语法？请注意，我知道 .yml 文件的制表符缩进与空格缩进。

# php - 无法将数据添加到数据库中的现有条目

> ID：14443184
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:38:10.970
> 
> 标签：php, mysql

如果我尝试这是行不通的：

```
<?php
include ($_SERVER['DOCUMENT_ROOT'] . '/contact/config.inc.php');

$hash = hash('md5', $_POST["password"]);

$connection = mysql_connect($host, $user, $password);

mysql_select_db($database, $connection);

mysql_query("UPDATE data
SET password=" . $hash . 
"WHERE id=" . $_POST["id"]);

mysql_close($connection);
?> 
```

数据只是不会显示在数据库中。我尝试将哈希和 id 设置为固定值，但仍然无效。我确信数据库连接可以正常工作，因为它可以在其他脚本中工作。并且所有变量都正确显示`echo`。

我是 PHP 和 MySQL 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:40:05.583

尝试添加`quotes`周围的值，

```
mysql_query("UPDATE data SET password='" . $hash . "' WHERE id='" . $_POST["id"] . "'") ; 
```

**注意：**不推荐使用 Mysql 扩展。请使用 Mysqli_* 或 PDO 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:45:25.007

原因是因为您错误地转义了查询，您缺少变量周围的引号。

改变这个：

```
mysql_query("UPDATE data
SET password=" . $hash . 
"WHERE id=" . $_POST["id"]); 
```

对此：

```
mysql_query("UPDATE data
SET password='" . $hash . 
"' WHERE id='" . $_POST["id"] ."'"); 
```

在输入此内容时，我注意到您没有返回查询以关闭您的逃生通道。

请注意，我添加了引号并返回查询以关闭引号。

# sharepoint-2010 - SharePoint 2010 Foundation 网站读取权限列表项贡献权限不起作用

> ID：14443186
> 
> 赞同：0
> 
> 时间：2013-01-21T16:38:13.357
> 
> 标签：sharepoint-2010, sharepoint-2007

我已将 SharePoint WSS 3.0 场升级到 SharePoint 2010 Foundation。

现在我在修改和创建内容库文件的 Web 部件中遇到了一个奇怪的问题。

如果用户在站点级别也获得了贡献/完全访问权限，则仅允许用户修改文件（可能足以在列表/库上拥有这些权限，但我没有尝试过）。用户已经获得了对父文件夹和文件（继承）的贡献权限。

同一站点上的另一个问题，但在不同的库上。站点上的所有用户都可以读取此库中的所有文件，但是当我尝试使用以下代码将文件从一个列表复制到另一个列表时，执行 OpenBinaryStream 时访问被拒绝。

```
SPFile newFile = SPContext.Current.Web.Lists["ToLibrary"].RootFolder.Files.Add(folder + "/default.aspx", oldFile.OpenBinaryStream()); 
```

这两个问题只发生在升级的场上，并且在 WSS 3.0 场上运行良好。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:34:26.333

我有一个类似的问题，原来是列表/库的设置。在列表/库的高级设置中，有一个标记为“项目级别权限”的部分 - 此设置可用于拒绝对项目没有完全控制权限的任何人的访问。除非有特殊需要，否则应将读取权限设置为读取所有项目，并将创建和编辑权限设置为创建和编辑所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T06:00:57.700

我遇到了同样的问题，并通过转到站点设置 > 编辑权限级别 > 并赋予“贡献”权限级别以“打开项目 - 使用服务器端文件处理程序查看文档源”的能力来解决它

# sql - 两个表之间的日期差异

> ID：14443191
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:38:33.430
> 
> 标签：sql, sql-server, tsql

我有那两张桌子

1-添加到队列表

```
TransID , ADD date 
10 , 10/10/2012
11 , 14/10/2012
11 , 18/11/2012
11 , 25/12/2012
12 , 1/1/2013 
```

2-从队列表中删除

```
TransID , Removed Date 
10 , 15/1/2013
11 , 12/12/2012
11 , 13/1/2013
11 , 20/1/2013 
```

TansID 是两个表之间的键，我不能修改那些表，我想要的是查询每个事务在队列中花费的时间量

当每个表中有一个项目时很容易，但是当项目多次排队时，我该如何计算呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:04:15.857

假设 TransID 输入到 Add 表的顺序与删除它们的顺序相同，您可以使用以下命令：

```
WITH OrderedAdds AS
(   SELECT  TransID,
            AddDate,
            [RowNumber] = ROW_NUMBER() OVER(PARTITION BY TransID ORDER BY AddDate)
    FROM    AddTable
), OrderedRemoves AS
(   SELECT  TransID,
            RemovedDate,
            [RowNumber] = ROW_NUMBER() OVER(PARTITION BY TransID ORDER BY RemovedDate)
    FROM    RemoveTable
)
SELECT  OrderedAdds.TransID,
        OrderedAdds.AddDate,
        OrderedRemoves.RemovedDate,
        [DaysInQueue] = DATEDIFF(DAY, OrderedAdds.AddDate, ISNULL(OrderedRemoves.RemovedDate, CURRENT_TIMESTAMP))
FROM    OrderedAdds
        LEFT JOIN OrderedRemoves
            ON OrderedAdds.TransID = OrderedRemoves.TransID
            AND OrderedAdds.RowNumber = OrderedRemoves.RowNumber; 
```

关键部分是每条记录都会根据事务 id 和输入日期获得一个行号，然后您可以同时加入行号和 transID 以停止任何交叉加入。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/a1f72/5)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:49:25.797

答案2：在您发表评论之后。（作为旁注，您的某些日期`15/1/2013`不代表`13/1/2013`正确的日期格式）

```
select transId, sum(numberOfDays) totalQueueTime
from (
    select a.transId,
       datediff(day,a.addDate,isnull(r.removeDate,a.addDate)) numberOfDays
    from AddTable a left join RemoveTable r on a.transId = r.transId
    order by a.transId, a.addDate, r.removeDate
) X
group by transId 
```

答案1：在您发表评论之前

假设除非将其删除，否则不会添加新记录。另请注意以下查询将带来`numberOfDays as zero for unremoved records`；

```
select a.transId, a.addDate, r.removeDate,
       datediff(day,a.addDate,isnull(r.removeDate,a.addDate)) numberOfDays
from AddTable a left join RemoveTable r on a.transId = r.transId
order by a.transId, a.addDate, r.removeDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:15:21.750

免责声明：这可能有问题，但我希望向您发送一个可能的方向。确保预期问题。

您可以尝试以下方向（根据您的系统、版本等可能会以某种方式起作用）：

```
SELECT transId, (sum(add_date_sum) - sum(remove_date_sum)) / (1000*60*60*24)
FROM
(
    SELECT transId, (SUM(UNIX_TIMESTAMP(add_date)) as add_date_sum, 0 as remove_date_sum
    FROM add_to_queue 
    GROUP BY transId

    UNION ALL

    SELECT transId, 0 as add_date_sum, (SUM(UNIX_TIMESTAMP(remove_date)) as remove_date_sum
    FROM remove_from_queue 
    GROUP BY transId
)
GROUP BY transId; 
```

一点解释：据我所知，您不能对日期求和，但您可以将它们转换为某种时间戳。检查 UNIX_TIMESTAMPS 是否适合您，或者找出其他方法。然后你可以在每个表中求和，通过方便地将另一个表保留为 zeto 然后减去联合查询来创建联合。

至于在第一个 SELECT 结束时的那个定义，UNIT_TIMESTAMP 会抛出毫秒，你需要花费几天 - 或者你想要的任何东西。

这一切都说 - 我可能会使用存储过程或一些客户端脚本来解决这个问题。SQL 并不是每场战斗的武器。进行两个单独的查询会简单得多。

# java - 为什么 LinkedHashSet 上的迭代时间不依赖于它的容量？

> ID：14443192
> 
> 赞同：0
> 
> 时间：2013-01-21T16:38:35.757
> 
> 标签：java, collections, linkedhashset

来自LinkedHashSet(LHS)类的[Java 文档：](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)

> LinkedHashSet 的迭代需要的时间与集合的大小成正比，无论其容量如何。HashSet 的迭代可能会更昂贵，需要的时间与其容量成正比。

我的问题是为什么 LHS 上的迭代时间与集合的容量无关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:40:13.697

因为 LinkedHashSet 内部包含 LinkedList 和 Set。迭代时，您迭代的是（我相信是双重的）LinkedList，而不是 HashSet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:55:59.057

创建一个容量为 1MB 的常规 HashSet (new HashSet(1024 * 1024)，添加 1 个元素并尝试迭代。虽然 HashSet 只有 1 个元素，但迭代器必须遍历底层 hastable 的所有 1MB 桶。但是如果它是一个 LinkedHashSet，迭代器不会遍历哈希表（该哈希表仅用于 get() 和 contains()），但会遍历 LinkedList（并行结构），其中只有一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:59:50.130

遍历您需要（几乎）的 HashSet 遍历包含元素的桶，然后消除空值，这需要额外的时间。简而言之 - 有一些与将空元素排序相关的开销。

链接集合的本质是每个元素都指向下一个元素。所以，你从第一个开始，然后毫无问题地拉下一个，依此类推——这样你就可以轻松地迭代它们。

# c++ - 将 BSTR 转换为 char * 的问题

> ID：14443193
> 
> 赞同：1
> 
> 时间：2013-01-21T16:38:36.153
> 
> 标签：c++, character-encoding, bstr

我们有一个使用 WinHttp.WinHttpRequest.5.1 调用第三方 Web 服务的旧 C++ 应用程序。

我不会列出调用序列的所有细节，因为我认为它与问题无关，但我们通过调用结束`hr = pIWinHttpRequest->get_ResponseText(&bstrResponse);`，其中`bstrResponse`是 BSTR 类型。

调用代码不适用于 BSTR，它适用于标准 C/C++ `char *`，因此代码将 BSTR 转换为 a `char *`：

```
_bstr_t b(bstrResponse);
const char *c = static_cast<char *>(b); 
```

对于我们使用此代码访问的所有先前的 Web 服务，这已经奏效了。但对于这个新的，它不是。

我们返回的数据应该是 XML，但是对于这个 web 服务，看起来我们遇到了一些字符代码转换问题。我们得到的字符串以;`"?&lt;?xml version="1.0" encoding="utf-8"?&gt;..."`

`?`注意开头的额外内容。在调试器中遍历此内容时，我们在的显示值`bstrResponse`中看不到它，在 的显示值中`b`也看不到它，但在 的显示值中确实看到了它`c`。

关于可能发生什么的任何想法？

已编辑

我知道BSTR是多字节类型，但是这个字符串中的所有字符都是纯ASCII，调用这个函数的代码没有一个可以处理多字节字符。浏览网页，我看到经常推荐这种特定机制，但在这种情况下，它不起作用。

我需要将此字符串从 BSTR 转换为单字节字符数组。即使这意味着去除无法转换的多字节字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:49:10.320

在您的代码中使用`static_cast`on a 的`_bstr_t`转换正确地转换为 ANSI。`?`编码转换中出现表示字符转换失败。最可能的原因是`bstrResponse`包含您的 ANSI 代码页中不存在的字符。我希望您应该转换为 UTF-8 而不是 ANSI，但我当然没有您拥有的所有信息。

底线是`?`表示源字符串包含无法在目标字符集中编码的字符。

**更新**

您的回答进一步证明您应该转换为 UTF-8。只有你能确定，但​​你提供的证据与这个结论是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:55:11.420

原来有两个问题。首先，上面描述的转换过程没有去掉字节顺序标记，在我看来它应该这样做，其次，我们使用的旧 C++ XML 解析器在 8 位 ASCII 字符上阻塞，并且这个 web 服务正在发送我们在他们的文本中使用版权符号，ASCII '\xA9'。

剥离 BOM 并用空格替换高位字符后，解析器工作正常。

# c - 如何使用在 ubuntu 12.04 上运行的 netbeans 修复 Openmpi 的 C 程序错误

> ID：14443194
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:38:36.600
> 
> 标签：c, netbeans-7, openmpi

我正在尝试使用 C 语言运行 MPI 程序。我已经安装了 GCC 编译器和 openmpi 库。我正在运行 ubuntu Linux 和 Netbeans IDE。我的挑战是，在我的头文件中包含“mpi.h”并编译应用程序后，我仍然收到“致命错误：找不到文件 mpi.c”。我在 home/user/lib/openmpi/include 中有文件，但我不能让它工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:59:26.060

您可以尝试将编译器更改为`/path/mpicc`并将调试器更改为`mpirun`. 这应该可以工作，虽然我没有测试它，但编译 MPI 代码的最佳方法可能是通过终端。

如果您真的依赖 IDE，您可以尝试用它编写代码（以利用自动完成等功能）并在终端中编译它并`mpicc -o main.exe main.cpp [other .cpp files]`使用`mpirun -np number_of_processes_to_use ./main.exe [args]`. 您可以编写一个小脚本或 Makefile 以在一个命令中完成所有操作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:13:18.530

为了让自己保持清醒，我建议打开一个终端并从那里开始（至少在你弄清楚是什么之前）。

此外，使用 mpi 编译器来做事会简化你的生活。（并且可能会自动解决缺少源的问题，因为它应该知道默认情况下它们在哪里）。

如果您在编译期间仍然找不到它们，那么我会考虑将 mpi.c 和 mpi.h 所在的位置添加到您的 C 包含路径： [如何在 linux 中为 gcc 添加默认包含路径？](https://stackoverflow.com/questions/558803/how-to-add-a-default-include-path-for-gcc-in-linux)

# c# - 运行时类型与编译时类型方法调用

> ID：14443202
> 
> 赞同：8
> 
> 时间：2013-01-21T16:39:10.670
> 
> 标签：c#, language-specifications

C# 4.0 规范如下：

> 调用虚拟方法时，发生该调用的实例的运行时类型决定了要调用的实际方法实现。在非虚拟方法调用中，实例的编译时类型是决定因素。

起初，我认为这与初始化有关。例如，给定两个初始化：

`BaseClass bcDerived = new Derived();`对比`BaseClass bcBase = new BaseClass();`

以及辅助类中的重载：

```
public virtual void Method(Derived d)
{
     Console.WriteLine("Result = derived called");
}

public virtual void Method(BaseClass d)
{
     Console.WriteLine("Result = base called");
} 
```

`Method`在这种情况下，调用不受`virtual`关键字的影响。不管是否有标记`virtual`，都会调用派生最少的重载。只有在`override`派生类中，方法调用才会改变。

那么，“运行时类型”和“编译时类型”是什么意思呢？它们如何影响方法调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:43:20.427

这更多是虚拟与非虚拟方法的问题，以及调用如何发生。您引用的规范部分涉及对变量调用的方法调用`bcDerived.SomeMethod()`，而不是调用`foo.SomeMethod(bcDerived)`。

您引用的规范是指您有非虚拟方法的情况：

```
public class A
{
    public void Foo() { Console.WriteLine("A.Foo"); }
    public virtual void Bar() { Console.WriteLine("A.Bar"); }
}
public class B : A
{
    public new void Foo() { Console.WriteLine("B.Foo"); }
    public override void Bar() { Console.WriteLine("B.Bar"); }
} 
```

然后调用的方法将由*编译器*在编译时确定，这样做：

```
A someInst = new B();
someInst.Foo(); 
```

将导致 this 调用`A.Foo()`，*无论 A 的哪个子类被 引用`someInst`*，因为这是一个非虚拟方法。

但是，如果您有虚拟方法，则`callvirt`指令由编译器指定，这会将决定移至运行时。这意味着：

```
 someInst.Bar(); 
```

会打电话`B.Bar()`，不会`A.Bar()`。

在您的情况下，您不是在调用虚拟方法（在规范所指的意义上），而是在执行标准方法解析。C# Spec 的 7.5.3 详细处理了重载解决方案。在您的情况下，编译器会检查参数 list ( `bcDerived`) ，并将其定义为 type `BaseClass`。对此的“最佳匹配”将是`public virtual void Method(BaseClass d)`参数列表直接匹配参数列表，因此在编译时使用。

如果您查看规范，方法重载决议不会直接使虚拟方法调用生效 - 它只查看类型之间的隐式转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:41:07.800

在这种情况下，参数的编译时类型将始终用于确定要调用哪个重载。虚拟分派取决于正在调用该方法的对象的运行时类型。

编译时类型是由编译器确定的对象类型，运行时类型是代码执行时的实际类型。要使用您的示例：

```
BaseClass bcDerived = new Derived() 
```

编译时类型是`BaseClass`，而运行时类型是`Derived`.

为了理解我们需要稍微扩展你的类的含义：

```
class BaseClass 
{ 
  public virtual void SomeMethod() 
  {
    Console.WriteLine("In base class");
  }
}

class Derived : BaseClass
{ 
  public override void SomeMethod() 
  {
    Console.WriteLine("In derived class");
  }
} 
```

现在调用`bcDerived.SomeMethod()`将取决于是调用实现还是调用实现`bcDerived`的运行时类型。`BaseClass``Derived`

Eric Lippert 在 .Net 中写了一个非常好的关于虚拟调度的三部分系列（其中[第一部分在这里](http://blogs.msdn.com/b/ericlippert/archive/2011/03/17/implementing-the-virtual-method-pattern-in-c-part-one.aspx)），我强烈建议您阅读它们以更全面地理解该主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:45:49.627

```
Using these two classes as examples:

public class Parent
{
    public void NonVirtual()
    {
        Console.WriteLine("Nonvirtual - Parent");
    }
    public virtual void Virtual()
    {
        Console.WriteLine("Virtual - Parent");
    }
}

public class Child : Parent
{
    public override void Virtual()
    {
        Console.WriteLine("Virtual - Child");
    }

    public void NonVirtual()
    {
        Console.WriteLine("Nonvirtual - Child");
    }
} 
```

通过这段代码可以最清楚地看到虚拟和非虚拟之间的区别：

```
Parent childAsParent = new Child();
childAsParent.Virtual();
childAsParent.NonVirtual(); 
```

这打印：

```
虚拟 - 孩子
非虚拟 - 父级
```

在虚拟方法的情况下，它在运行时看到 的类型`childAsParent`是孩子，因此执行孩子的定义`Virtual`。对于非虚方法，它看到变量的编译时类型是`Parent`，并忽略实际实例是 a`Child`并使用父级实现的事实。

`virtual`不用于根据参数的类型确定使用方法的哪个重载。确定要调用的方法的哪个重载总是在编译时（不使用时）完成，而不是在运行时完成，因此在您的示例`dynamic`中，它将始终根据变量的*编译时类型选择 的重载。*`Method`

# android - Android Maps api v2 奇怪现象

> ID：14443206
> 
> 赞同：3
> 
> 时间：2013-01-21T16:39:24.133
> 
> 标签：android, keyboard, android-maps-v2

我在我的应用程序中集成了一个地图片段（Android Maps Api V2），如图所示：

![在此处输入图像描述](../Images/8d92c60b8848166d1f7f9ceef7a0b8ae.png)

但是当显示软键盘时，地图会滑到顶部并变为空白，如下图所示：

![在此处输入图像描述](../Images/a55b376562f49588b997d83603d989b6.png)

我还必须说，这种现象发生在星系 S（2.3.3）上，不在星系 SIII 中，甚至不在星系 Y 中，是性能问题还是错误，还是我遗漏了什么？

如果您遇到过这个问题，请帮助..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T13:51:20.417

你可以试试这个：

```
public class MyMapFragment extends SupportMapFragment() {
 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
  View view = super.onCreateView(inflater, container, savedInstanceState);
  setMapTransparent((ViewGroup) view);
  return view;
 };

 private void setMapTransparent(ViewGroup group) {
  int childCount = group.getChildCount();
  for (int i = 0; i < childCount; i++) {
   View child = group.getChildAt(i);
   if (child instanceof ViewGroup) {
    setMapTransparent((ViewGroup) child);
   } else if (child instanceof SurfaceView) {
    child.setBackgroundColor(0x00000000);
   }
  }
 }
 // ...
}; 
```

而不是使用google提供的mapFragment，使用这个。它为我解决了同样的问题，但它是在滑动菜单上进行的。

归功于：[https ://github.com/jfeinstein10/SlidingMenu/issues/168#issuecomment-11834105](https://github.com/jfeinstein10/SlidingMenu/issues/168#issuecomment-11834105)

# mysql - mysql INTERSECT 的替代品

> ID：14443213
> 
> 赞同：4
> 
> 时间：2013-01-21T16:39:43.040
> 
> 标签：mysql, sql, intersect

我一直在尝试删除相交，因为 mysql 不支持它。如果有人可以提供一些指示，那将非常有帮助。

```
SELECT *, DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(dob, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(dob, '00-%m-%d')) AS age 
FROM user U, user_utilisation UU 
WHERE U.id_user = UU.id_user AND cp >= 1 AND cp <= 3000 AND sexe = 'M' AND UU.id_mailing = 6 
GROUP BY U.id_user 
HAVING age >= 1 AND age <= 100 
ORDER BY nom, prenom

INTERSECT 

SELECT *, DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(dob, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(dob, '00-%m-%d')) AS age 
FROM user U, user_utilisation UU 
WHERE U.id_user = UU.id_user AND cp >= 1 AND cp <= 3000 AND sexe = 'M' AND UU.id_mailing = 7 
GROUP BY U.id_user 
HAVING age >= 1 AND age <= 100 
ORDER BY nom, prenom 
```

我尝试使用`JOIN`（s），但这是我现在所拥有的：

```
SELECT *, DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(naissance, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(naissance, '00-%m-%d')) AS age 
FROM user U, user_utilisation UU 
WHERE U.id_user = UU.id_user AND cp >= 1 AND cp <= 3000 AND sexe = 'M' 
    AND UU.id_user IN (select id_user from user_utilisation where id_mailing = 6 OR id_mailing = 7) 
HAVING age >= 1 AND age <= 100 
ORDER BY nom, prenom 
```

但是通过删除`GROUP BY`我看到查询选择了 2 条记录 where `id_mailing = 1`，而`GROUP BY`隐藏了错误的记录。我很确定这可能会导致问题...

`user_utilisation`只有三个字段`id_user`,`id_mailing`和`date`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:04:42.357

解释您的查询，在我看来：

1.  您希望获得所有参与 mailing_id 6 和 7 的用户（这就是您这样做的原因`INTERSECT`，对吗？）。
2.  您希望按条件限制这些用户并执行年龄计算。

如果我对您的意图的解释是正确的（完全不确定是这种情况！），您根本不需要`INTERSECT`，您应该能够根据您想要的标准简单地选择您想要的用户，并限制参与这两者通过以下方式邮寄 6 和 7 `JOIN`：

```
SELECT *, DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(dob, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(dob, '00-%m-%d')) AS age 
FROM user U
INNER JOIN user_utilisation UU on U.id_user = UU.id_user and UU.mailing_id = 6
INNER JOIN user_utilisation UU2 on U.id_user = UU2.id_user and UU2.mailing_id = 7
WHERE cp >= 1 AND cp <= 3000 AND sexe = 'M' 
HAVING age >= 1 AND age <= 100 
ORDER BY nom, prenom 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:57:09.937

您可以尝试以下方法：

```
SELECT *
  FROM
      (SELECT *
            , DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(dob, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(dob, '00-%m-%d')) AS age 
        FROM user U
             INNER JOIN user_utilisation UU 
                     ON U.id_user = UU.id_user
        WHERE cp >= 1 AND cp <= 3000 
              AND sexe = 'M'
              AND UU.id_mailing = 6 
        GROUP BY U.id_user 
        HAVING age >= 1 AND age <= 100) QUERY1
 WHERE EXISTS(SELECT *
            , DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(dob, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(dob, '00-%m-%d')) AS age 
        FROM user U
             INNER JOIN user_utilisation UU 
                     ON U.id_user = UU.id_user
        WHERE cp >= 1 AND cp <= 3000 
              AND sexe = 'M'
              AND UU.id_mailing = 7
              AND U.id_user = QUERY1.id_user
        GROUP BY U.id_user 
        )
ORDER BY nom, prenom 
```

上面查询中的技巧是 WHERE EXISTS( ... ) 子句充当过滤器，类似于您之前使用的 INTERSECT。这个想法是，您将只想从查询 QUERY1 中选择满足条件的记录，即 EXITS 子句中的查询中至少有一条记录，其条件是 id_user 与 QUERY1 查询中的 id_user 相同..我希望这有点道理..

如果您提供 User 表的结构，我可能会为您稍微调整一下。顺便说一句，使用那些笼统的 SELECT * 语句不是一个好主意..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:19:21.360

我认为您可以简化查询。它有几个好奇心。首先，查询没有使用正确的连接语法。其次，查询使用该`having`子句只是为了过滤来自`select`. 在这种情况下，我建议使用子查询。

看起来您正在尝试获取两个“组”中的用户，这些用户由两个非常相似的查询定义（只有`where`子句不同）。以下可能是您正在寻找的内容：

```
select t.*
from (SELECT *, DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(dob, '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(dob, '00-%m-%d')) AS age,
             (case when cp >= 1 AND cp <= 3000 AND sexe = 'M' AND UU.id_mailing = 6 then 'FirstGroup'
                   when cp >= 1 AND cp <= 3000 AND sexe = 'M' AND UU.id_mailing = 7 then 'SecondGroup'
              end) as thegroup
      FROM user U join user_utilisation UU 
           on U.id_user = UU.id_user
     ) t
where thegroup is not null and age between 1 and 100
GROUP BY U.id_user
having max(thegroup) <> min(thegroup)
ORDER BY nom, prenom 
```

该`having`子句是表示用户在两个组中的简写方式。

# ios - iOS Core Data - 如何为数组中的每个对象请求实体？

> ID：14443219
> 
> 赞同：1
> 
> 时间：2013-01-21T16:39:53.197
> 
> 标签：ios, core-data, nsfetchrequest

不知道你有没有收到我的问题，这里举个例子。

我有一个包含 50 个产品 ID 的数组，我想检查 Core Data 中是否存在所有 ID。如果没有循环并发出 50 个请求，我将如何做到这一点？一定有比我想的更有效的方法。

在我的模型中，我有一个只有 Name 和 Id 属性的实体 Product。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:53:04.543

您可以使用...

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat: @"productid IN[c] %@", ids]]; 
```

其中 ids 是一个 NSStrings 数组，而 fetchRequest 是您在具有 productid 属性的实体上的 NSFetchRequest。

您也可以对其他对象类型和关系执行此操作。

IE

```
NSArray *requiredChildren = //some array of coredata objects

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"child IN %@", requiredChildren]; 
```

# javascript - javascript 在表格的同一单元格中获取对控件的引用

> ID：14443222
> 
> 赞同：0
> 
> 时间：2013-01-21T16:40:05.037
> 
> 标签：javascript

我有一个从数据库中的数据生成的表。它可能有 3 行和 2 个单元格。

每个单元格中都有一个复选框和 2 个隐藏的表单字段。

因此，典型的行可能如下所示：

```
<tr>
<td>
<input type="checkbox" id="Assign" onclick="setchanged(this);">
<input type="hidden" id="hfChanged" value="0">
<input type="hidden" id="hfAgentID value="272">
</td>
<td>
<input type="checkbox" id="Assign" onclick="setchanged(this);">
<input type="hidden" id="hfChanged" value="0">
<input type="hidden" id="hfAgentID value="324">
</td>
</tr> 
```

要求是 - 单击复选框时，应将同一单元格中的 hfChanged 隐藏字段的值设置为 1。

这适用于 Internet Explorer：

```
function setchanged(me)
{
me.parentElement.all("hfChanged").value = 1;
} 
```

如何在 Firefox 或 Chrome 等符合标准的浏览器中设置 hfChanged 的​​值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:48:09.110

使用重复类而不是 ID

```
<tr>
    <td>
    <input type="checkbox" class="Assign" onclick="setchanged(this);">
    <input type="hidden" class="hfChanged" value="0">
    <input type="hidden" class="hfAgentID value="272">
    </td>
    <td>
    <input type="checkbox" class="Assign" onclick="setchanged(this);">
    <input type="hidden" class="hfChanged" value="0">
    <input type="hidden" class="hfAgentID value="324">
    </td>
</tr> 
```

然后将您的函数更改为按类名选择，并迭代结果。

```
function setchanged(me) {
    var changed = me.parentNode.querySelectorAll(".hfChanged");

    for (var i = 0; i < changed.length; i++) {
        changed[i].value = 1;
    }
} 
```

如果这对您很重要，该`.querySelectorAll`方法在 IE6/7 中将不起作用。如果是这样，不难调整一点以获得更大的兼容性。

* * *

我现在看到同一个牢房里只有一个。在这种情况下，您可以改为这样做。

```
function setchanged(me) {
    me.parentNode.querySelector(".hfChanged").value = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:46:26.250

此代码未经测试，但可以为您提供一个起点。

```
$("input[type=checkbox]").change(function(){
     $(this).siblings(".hfChanged").prop("value", this.checked ? 1 : 0);
}); 
```

**注意：将 id 更改为 class。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:55:16.603

您可以使用以下函数找出[此答案中给出的下一个元素](https://stackoverflow.com/questions/868407/hide-an-elements-next-sibling-with-javascript#answer-868418)

```
function next(elem) {
    do {
        elem = elem.nextSibling;
    } while (elem && elem.nodeType != 1);
    return elem;        
} 
```

[工作演示在这里](http://jsfiddle.net/arunpjohny/AWdAx/)。

代码：

```
function setchanged(me){
    next(me).value = me.checked == true ? 1 : 0;
}

function next(elem) {
    do {
        elem = elem.nextSibling;
    } while (elem && elem.nodeType != 1);
    return elem;        
} 
```

# objective-c - 在键盘上方显示 UITextField

> ID：14443227
> 
> 赞同：2
> 
> 时间：2013-01-21T16:40:15.740
> 
> 标签：objective-c, cocoa-touch, ios6, uitextfield

我一直在使用以下教程在键盘上方显示 uitextfield：http: [//mobile.tutsplus.com/tutorials/iphone/ios-sdk-keeping-content-from-underneath-the-keyboard/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-keeping-content-from-underneath-the-keyboard/)

但问题是，如果用户开始在该字段中输入，则 uitextfield 只会显示在键盘上方，但如果光标位于文本字段中则不会。

一旦光标位于 UITextField 中，如何更改它以便 uitextfield 显示在键盘上方？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:15:58.083

我下载了示例代码，对我来说工作得很好。我认为您可能会误解的唯一一件事是键盘已经位于文本字段下方的情况下，在这些情况下视图将不会滚动。

我希望这有帮助。如果这不是你想要的，请告诉我更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:57:18.530

检查`UITextFieldDelegate`并选择适当的方法。

在本教程中，他们使用`textFieldDidBeginEditing`方法来分配活动文本字段。从方法名称中可以清楚地看出，它在有人开始在文本字段中输入时执行。

# android - ListView 未触发 OnClick 事件

> ID：14443235
> 
> 赞同：0
> 
> 时间：2013-01-21T16:40:42.110
> 
> 标签：android, android-listview

`ListView`不调用`onClick`事件。

我想有人一定对我做错了什么有一个公平的想法。以及制作`listView`.

```
public class CardapioCategoriaSection extends BaseSection implements ListAdapter {  

    public int getCount() {
        return result.size();
    }

    public Object getItem(int position) {
        return result.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public int getItemViewType(int position) {
        return 1;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        if (convertView == null) 
        {
            convertView = l_Inflater.inflate(R.layout.cardapio_categorias_cell_section, null);
            holder = new ViewHolder();
            holder.txt_itemName = (TextView) convertView.findViewById(R.id.title);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txt_itemName.setText(result.get(position).get("title"));
        return convertView;
    }

    static class ViewHolder {
        TextView txt_itemName;
        TextView txt_itemDescription;
        TextView txt_itemPrice;
        ImageView itemImage;
    }

    public int getViewTypeCount() {
        return 1;
    }

    public boolean hasStableIds() {return false;}

    public boolean isEmpty() {return false; }

    public void registerDataSetObserver(DataSetObserver observer) { }

    public void unregisterDataSetObserver(DataSetObserver observer) {}

    public boolean areAllItemsEnabled() {return false;}

    public boolean isEnabled(int position) {return false;}

    //METHOD CONSTRUCTOR
    public CardapioCategoriaSection( Context context, AttributeSet attrs, int defStyle )
    {
        super( context, attrs, defStyle );
    }

    public CardapioCategoriaSection( Context context, AttributeSet attrs )
    {
        super( context, attrs );
    }

    public CardapioCategoriaSection( Context context )
    {
        super( context );
    }

    private static EasyDBLines result;

    private LayoutInflater l_Inflater;

    @Override
    protected void onFinishInflate() {
        // TODO Auto-generated method stub
        super.onFinishInflate();

        /*
        Typeface tf = Typeface.createFromAsset(getAssets(),
                                "fonts/BPreplay.otf");
                        TextView tv = (TextView) findViewById(R.id.CustomFontText);
                        tv.setTypeface(tf);
        */
        result = AppContent.getInstance().selectCardapioCategorias();

        l_Inflater = LayoutInflater.from(MainPhone.getContext());   

        final ListView listViewCategoria = (ListView) findViewById(R.id.listV_main);     

        listViewCategoria.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a , View v, int position, long id) {
            System.out.print("Now it works");
            }
        });

        listViewCategoria.setAdapter( this);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:11:43.220

如果您使`isEnabled`方法返回`false`，则适配器将禁用所有行并且`OnItemClickListener`不会触发。

此外，您不应该在自定义视图中插入适配器的逻辑，使适配器成为一个单独的类并扩展一个具体的类（如`BaseAdapter`等`ArrayAdapter`）而不是实现`ListAdapter`接口。

# php - 如何在插入时检查数据库中的重复记录

> ID：14443236
> 
> 赞同：0
> 
> 时间：2013-01-21T16:40:47.627
> 
> 标签：php, database, insert

> **可能重复：**
> [在 MySQL 中插入和更新单行表的最佳方法是什么？](https://stackoverflow.com/questions/294661/what-is-the-best-way-to-insert-into-and-update-a-single-row-table-in-mysql)
> [处理mysql Insert语句中的重复记录](https://stackoverflow.com/questions/10162868/handling-duplicate-records-in-mysql-insert-statement)

我有一个 php web 表单，当单击“提交”按钮时，它会在我的数据库中插入一条记录。但是，我希望如果数据库中已经存在具有相同主键（itemID）的记录，则插入操作将被中止并提醒用户。

我的“插入”代码：

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
$editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
$insertSQL = sprintf("INSERT INTO inventory (itemID, name, itemcategory, qis, reorderlevel, unitcost, sellingprice,
supplier, specifications) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)",
 GetSQLValueString($_POST['itemID'], "text"),
 GetSQLValueString($_POST['name'], "text"),
 GetSQLValueString($_POST['itemcategory'], "text"),
 GetSQLValueString($_POST['qis'], "double"),
 GetSQLValueString($_POST['reorderlevel'], "int"),
 GetSQLValueString($_POST['unitcost'], "double"),
 GetSQLValueString($_POST['sellingprice'], "double"),
 GetSQLValueString($_POST['supplier'], "text"),
 GetSQLValueString($_POST['specifications'], "text"));

mysql_select_db($database_con1, $con1);
$Result1 = mysql_query($insertSQL, $con1) or die(mysql_error());

$insertGoTo = "insertsuccess.php";
if (isset($_SERVER['QUERY_STRING'])) {
$insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
$insertGoTo .= $_SERVER['QUERY_STRING'];}

header(sprintf("Location: %s", $insertGoTo));} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:46:47.927

如果您使用的是 MySQL，则有[INSERT ... ON DUPLICATE KEY UPDATE](https://stackoverflow.com/questions/294661/what-is-the-best-way-to-insert-into-and-update-a-single-row-table-in-mysql#294671)结构。

在你的情况下：

```
 INSERT INTO inventory (itemID, name, itemcategory, qis, reorderlevel, unitcost, sellingprice,supplier, specifications) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s) ON DUPLICATE KEY UPDATE name = %s, itemcategory = %s, ....) 
```

这需要在表中将 itemId 定义为唯一键。根据您的问题，无论如何您都想要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:49:14.757

如果您`ItemID`在表定义中将列定义为主键，则查询将在键的情况下为您提供错误`duplicate`。您可以在错误捕获部分提醒用户。

**注意：**不推荐使用 Mysql 扩展，请改用 MYSQLi_* 或 PDO 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:53:23.423

您可以使用“INSERT IGNORE”语句，并检查 LAST_INSERT_ID()。如果 LAST_INSERT_ID() 返回 0，则表示它是重复条目，您可以提醒用户。

# android - 发送消息未到达活动中的处理程序

> ID：14443247
> 
> 赞同：0
> 
> 时间：2013-01-21T16:41:09.827
> 
> 标签：android

我正在享受服务和活动。在服务内部，我正在发送消息。我试图在主要活动中抓住它。但是消息没有到达活动中的处理程序。

请看下面的代码。

服务：

```
Handler handler = new Handler(Looper.getMainLooper());
    handler.sendEmptyMessage(112345); 
```

主要活动：

```
handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            Toast.makeText(MainActivity.this, "handled message successfully", Toast.LENGTH_SHORT).show();
            if ( msg.what == 1234 ) {
                Toast.makeText(MainActivity.this, "handled message successfully", Toast.LENGTH_SHORT).show();
            }
        }
    }; 
```

谁能告诉我为什么它没有到达活动中的处理程序。我所知道的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:31:58.193

您发送的所有消息都`Handler.sendMessageXXX`将由同一个`Handler`对象处理。所以你必须通过`Handler`from `Activity`to `Service`。可以使用`Messenger`类来完成。

活动：

```
public class MyActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                Toast.makeText(MyActivity.this, "handleMessage " + msg.what, Toast.LENGTH_SHORT).show();
            }
        };

        final Intent intent = new Intent(this, MyService.class);
        final Messenger messenger = new Messenger(handler);

        intent.putExtra("messenger", messenger);
        startService(intent);
    }
} 
```

服务：

```
public class MyService extends IntentService {
    public MyService() {
        super("");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        final Messenger messenger = (Messenger) intent.getParcelableExtra("messenger");
        final Message message = Message.obtain(null, 1234);

        try {
            messenger.send(message);
        } catch (RemoteException exception) {
            exception.printStackTrace();
        }
    }
} 
```

# functional-programming - SML 中的 map 函数有多少个参数？

> ID：14443248
> 
> 赞同：2
> 
> 时间：2013-01-21T16:41:17.780
> 
> 标签：functional-programming, sml, ml

我正在尝试学习 SML，我的一些教授笔记谈到了`map`“类型为 ('a -> 'b) -> ('a list -> 'b list)”的函数。他继续解释说，这意味着“你给我一个函数，将 'as 转换为 'b s...”。

但是，他的实现看起来像：

```
fun map f [] = []
  | map f (a::l) = (f a)::(map f l) 
```

在我看来，这相当于 2 个参数（我知道 sml 中的所有内容在技术上只需要一个参数，但使用元组或柯里化它看起来像 2）。看来它正在使用一个函数和一个列表。但是，上面的解释听起来好像它只是一个函数。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:26:59.467

正如您自己所说，SML 并没有真正的多元函数，它只模拟使用元组或柯里化。在这种情况下`map`是一个柯里化函数。您的教授声明有意义的原因是，柯里化函数只是一个接受一个参数并返回一个接受下一个参数的函数的函数。

看到这一点的一种方法是`fun`根据`val`. 一般`fun f x y = bla`相当于`val rec f = fn x => fn y => bla`。所以 的定义`map`等价地可以写成这样：

```
val rec map = fn f => fn as => case as of
    [] => []
  | (a::l) => (f a)::(map f l) 
```

查看该定义很明显，第一个`fn`创建了一个返回另一个函数的函数（第二个`fn`）。

`map`我们还可以通过观察只使用一个参数调用是合法的并且结果是一个函数来看到这种情况：

```
val my_map = map my_function
val mapped_list = my_map my_list 
```

在上面`my_map my_list`等价于`map my_function my_list`。这向我们展示了调用`map my_function my_list`（`(map my_function) my_list`由于函数应用程序是左关联的）只是简单地`map`使用参数`my_function`调用，然后调用由`map`with`my_list`作为其参数重新调整的函数。

这就是柯里化的全部意义所在。

# jquery - Firefox中页面加载的Css隐藏div

> ID：14443254
> 
> 赞同：0
> 
> 时间：2013-01-21T16:41:38.870
> 
> 标签：jquery, css, firefox, youtube-api

我正在尝试使用 youtube api 显示两个 youtube 视频。当第一个视频结束时，第二个视频来了。我通过更改 div 样式隐藏了第二个视频。

此代码适用于 chrome，因为 chrome 在页面加载时会加载隐藏的 div。但是firefox并没有这样做，它会在有 $("#player").show("fast"); 时尝试加载 div；jQuery 代码。有没有其他方法可以做到这一点。我真的需要在 Firefox 的页面加载时加载这个 div 内容。

```
<div id="jingle"></div>
    <script >
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag2 = document.createElement('script');
      tag2.src = "//www.youtube.com/iframe_api";
      var firstScriptTag2 = document.getElementsByTagName('script')[0];
      firstScriptTag2.parentNode.insertBefore(tag2, firstScriptTag2);
      // 3\. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var jingle;
      function onYouTubeIframeAPIReady() {
        jingle = new YT.Player('jingle', {
          height: '450',
        width: '720',
        videoId: 'lupOKaNHPAA',
           videoId: 'lupOKaNHPAA',
        playerVars: {'wmode':'opaque', 'showinfo':0, 'autoplay': 1, 'rel': 0, 'controls': 0, 'theme': 'light', 'color': 'white', 'modestbranding':1},
          events: {
            'onReady': onPlayerReady1,
            'onStateChange': onPlayerStateChange1
          }
        });
      }

      function onPlayerReady1(event) {
       // event.target.playVideo();

      }

      function onPlayerStateChange1(event) {

       if(jingle.getPlayerState()==0)
        {
            ytplayer.playVideo();
            $("#jingle").hide("fast");
            $("#player").show("fast");

        }
      }

    </script>

<div id="player" style="display:"></div>

<script>

        var tag = document.createElement('script');

        tag.src = 'http://www.youtube.com/player_api';

        var firstScriptTag = document.getElementsByTagName('script')[0];

        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var ytplayer;

        var interval;

        var stoptime=<?php echo $time;?>;

        var sayi=1;

        var zaman;

        var options = {

            'target': 'player',

            'width': 720,

            'height': 450,

            'videoId': '<?PHP echo $embed;?>',

            'suggestedQuality': 'medium',

            'playerVars': {'wmode':'opaque', 'showinfo':0, 'autoplay': 1, 'cc_load_policy':1, 'cc_lang_pref': <?php if($toplam_dil>=1){echo "'tr'";} else{echo "'en'";} ?>, 'rel': 0, 'controls': 1, 'theme': 'light', 'color': 'white','start': <?PHP echo $s;?>},

            'events': {

                'onStateChange': function(e) {

                    checkTime();

                    showgrade();

                }

            }

        }

        }

        function onYouTubePlayerAPIReady() {

            ytplayer = new YT.Player(options.target, options);

        }

    </script>

<div id="time" style="display:none">0</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:45:48.660

尝试在 CSS 中使用 display:none 和 display:block。使用这些属性将确保元素在 DOM 中。

# image-processing - 傅里叶变换 - 图像局部补丁

> ID：14443257
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:41:47.657
> 
> 标签：image-processing, fft, wavelet

我仍然不清楚傅立叶变换。我知道它代表图像的频率信息，我可以使用傅里叶变换重建图像。

比如说，我有一个图像 I(x,y)。其傅立叶变换为 F(I)。我想重建从 (x1,y1) 到 (x2,y2) 结束的图像中的一个小矩形区域，而不重建整个图像。

是否可以仅从 F(I) 重建一个小块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:42:15.607

要回答您的问题，是的，这是可能的；做一个逆FFT，然后正常裁剪图像。如果这看起来像是一种逃避，那是因为您正在尝试在频域中执行时域任务，这不会很自然。

如果您坚持在频域中进行计算，我认为您应该能够将图像移相到原点 (x1 + y1)，然后逆 FFT 并丢弃外部样本 (x2 - x1, y2 - y1)。

基本问题是，在频域中，每个 bin（或 2D FFT 的像素）代表时域中*整个图像的频率和相位。*丢弃频域中的单个像素会导致整个图像的频率信息丢失并且无法定位。

# java - 一个动作监听器，两个 JButton

> ID：14443259
> 
> 赞同：5
> 
> 时间：2013-01-21T16:41:54.630
> 
> 标签：java, swing, awt, jbutton, actionlistener

我有两个`JButtons`叫做“左”和“右”。“左”按钮将矩形对象向左移动，“右”按钮将其向右移动。我`ActionListener`在类中有一个充当单击任一按钮时的侦听器。但是，我希望在单击每个操作时发生不同的操作。我怎样才能区分，在`ActionListener`哪个被点击？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T16:49:48.297

将[actionCommand](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/AbstractButton.html#setActionCommand%28java.lang.String%29)设置为每个按钮。

// 将操作命令设置为两个按钮。

```
 btnOne.setActionCommand("1");
 btnTwo.setActionCommand("2");

public void actionPerformed(ActionEvent e) {
 int action = Integer.parseInt(e.getActionCommand());

 switch(action) {
 case 1:
         //doSomething
         break;
 case 2: 
         // doSomething;
         break;
 }
} 
```

**更新：**

```
public class JBtnExample {
    public static void main(String[] args) {
        JButton btnOne = new JButton();
        JButton btnTwo = new JButton();

        ActionClass actionEvent = new ActionClass();

        btnOne.addActionListener(actionEvent);
                btnTwo.addActionListener(actionEvent);

        btnOne.setActionCommand("1");
        btnTwo.setActionCommand("2");
    }
} 

class ActionClass implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        int action = Integer.parseInt(e.getActionCommand());
        switch (action) {
        case 1:
            // DOSomething
            break;
        case 2:
            // DOSomething
            break;                          
        default:
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T16:43:31.667

`getSource()`使用以下方法非常容易`ActionEvent`：

```
JButton leftButton, rightButton;

public void actionPerformed(ActionEvent e) {
  Object src = e.getSource();

  if (src == leftButton) {

  }
  else if (src == rightButton) {

  }
} 
```

# angularjs - AngularJS 将模块链接到来自 JSON 的数据

> ID：14443260
> 
> 赞同：0
> 
> 时间：2013-01-21T16:41:56.517
> 
> 标签：angularjs

所以我正在用 AngularJS 构建一个应用程序。

我从 JSON 获取数据。JSON 来自具有标签、x 坐标、y 坐标和宽度/高度的数据。

`controller.js`我在我的文件中使用以下代码执行此操作：

```
function locationController( $scope, $http, getCss) {
    $http.get('file.json').success(function(data) {
        $scope.locations = data;
    });
} 
```

我在我的 HTML 中输出它，如下所示：

```
<section ng-controller="locationController">
    <ul>
        <div ng-repeat="location in locations" ng-style="location.css()" >
            <p>{{location.label}}</p>
        </div>
    </ul>
</section> 
```

现在我想做一个服务，为我重复的 div 生成 CSS。它基于我从 JSON 获得的位置的宽度/高度 x en y 坐标。

这是代码：

```
var app = angular.module('myApp', []);
app.factory('getCss', function() {
  return {
    css : function(x , y , value) {
      return {
                backgroundColor: "#333",
                x: (x - value) + 'px',
                y: (y - value) + 'px',
                width: (value * 2) + 'px',
                height: (value * 2) + 'px',
                color: "#FFF"
             }
    }
  }
}); 
```

但是如何将此服务链接到每个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:06:11.307

`getCss`在控制器上公开服务，如下所示：

```
function locationController( $scope, $http, getCss) {
  $http.get('file.json').success(function(data) {
   $scope.locations = data;
 });
  $scope.css = function(location) {
   return getCss.css(location.x, location.y, location.value);
  }
} 
```

在 HTML 上：

```
<div ng-repeat="location in locations" ng-style="css(location)" >
    <p>{{location.label}}</p>
</div> 
```

# css - 跨浏览器 nowrap textarea

> ID：14443262
> 
> 赞同：9
> 
> 时间：2013-01-21T16:41:59.513
> 
> 标签：css, html, cross-browser, textarea

我正在寻找一种可以制作 textarea 的跨浏览器解决方案：

*   **仅**在输入时换行
*   滚动条都隐藏，直到文本溢出

我已经尝试了几乎所有可以在SO中找到的东西......

失败#1：

```
textarea{
  white-space:nowrap;
  overflow: auto;
} 
```

在 FF 中不起作用

失败#2：

```
textarea{
  white-space:nowrap;
  overflow: auto; // or scroll
}
+WRAP=OFF attribute 
```

在这里我不能在 IE ( [jsFiddle](http://jsfiddle.net/GqsTL/) )中输入

失败#3：

```
textarea{
  white-space:pre;
  overflow: auto;
}
+WRAP=OFF attribute 
```

如果我到达末尾，则在 IE 中自动换行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T13:52:08.320

我所做的只是删除你的`white-space: nowrap;`，它可以工作:)。

```
textarea{
overflow: auto;
}
```

```
<textarea wrap="off">
Lorem asldm,és améld masémd éasmdá qw3őri2ő3pjm powemfnsd f
dsf lsdmflkms dlkfmsldk mflksdmfk lmsklf
</textarea>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-11T02:05:08.163

```
<textarea wrap="off"><textarea> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-01T08:47:02.290

你应该试试`white-space: pre;`

```
textarea{
  white-space: pre;
  width: 200px;
  height: 200px
}
```

```
<textarea>
Hello World!
Happy New Year Stack Overflow!!
    With Indent
</textarea>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-21T23:21:38.710

```
overflow-wrap: normal; 
```

只需将 wrap 的溢出参数更改为正常即可。

# excel - 使用 VBA 将单元格格式化为任意货币，无论语言环境如何

> ID：14443263
> 
> 赞同：5
> 
> 时间：2013-01-21T16:42:04.987
> 
> 标签：excel, vba, number-formatting

这真的让我很烦，因为它的工作方式似乎很不合逻辑。

我有一个宏来使用一些代码将单元格格式化为货币来获取货币符号。

这是涉及的代码：

```
Dim sym As String
sym = reportConstants(ISOcode)
    'Just use the ISO code if there isn't a symbol available
    If sym = "" Then
    sym = ISOcode
    End If
With range(.Offset(0, 3), .Offset(3, 3))
.NumberFormat = sym & "#,##0;(" & sym & "#,##0)"
Debug.Print sym & "#,##0;(" & sym & "#,##0)"
End With 
```

`reportConstants`是一个字典对象，其货币符号定义为字符串。例如`reportConstants("USD") = "$"`。这是在前面的宏中定义的。

当宏运行时，它会获取 ISO 代码，然后应该使用相应的货币符号格式化单元格。

当我在一个实例中运行它时，ISO 代码是“USD” - 所以`sym`定义为`"$"`- 但它仍然用井号 (£) 格式化单元格。当我`debug.print`格式化单元格字符串时`$#,##0;($#,##0)`，只要我的语法正确，它就应该在单元格中使用美元符号。但它使用 £ 符号代替。（我正在运行英国版的 excel，所以它可能默认为 £-sign，但为什么呢？）

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T09:55:37.193

我刚刚录制了一个宏来将格式设置为 $xx.xx 并创建了这个：`[$$-409]#,##0.00`. 看起来 -409 将货币本地化到特定国家；没有它也可以工作-尝试将您的更改为`.NumberFormat = "[$" & sym & "]#,##0.00"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:54:11.633

顺便说一句，我在发布后读到了你的问题；) Excel 受计算机的货币、语言、日期的区域设置的影响很大......使用 numberformat 可以强制它保持你需要的符号。如果是四舍五入的问题，您可以尝试：在 Excel 2010 上，转到文件 - 选项 - 高级并向下滚动到“计算此工作簿时”，然后单击“设置显示的精度”并确定。 

试试这个：假设你的值是数字/整数/小数......

`Range("a2").Style = "Currency"`

或者你可以使用格式：

`Format(value, "Currency")`

`Format(Range(a2).value, "Currency")`

参考：

[http://www.mrexcel.com/forum/excel-questions/439331-displaying-currency-based-regional-settings.html](http://www.mrexcel.com/forum/excel-questions/439331-displaying-currency-based-regional-settings.html)

[http://www.addictivetips.com/microsoft-office/excel-2010-currency-values/](http://www.addictivetips.com/microsoft-office/excel-2010-currency-values/)

（PS：我在手机上，你可以试试这两个链接）

# c# - 如何处理对具有相同导出的程序集的两个引用？

> ID：14443264
> 
> 赞同：2
> 
> 时间：2013-01-21T16:42:08.660
> 
> 标签：c#, unit-testing, datacontractserializer

我刚刚了解了通过 DataContract 支持序列化中的往返。因为我确信我会在这个机制上出错，所以我想在 Visual Studio 中建立一个单元测试来测试我的文件的新版本是否正常。

为了实现这一目标，我想

1.  在单元测试中创建最新版本的文档对象
2.  然后将此对象序列化为 MemoryStream
3.  使用我的应用程序的旧版本反序列化此对象
4.  将此旧对象序列化到 MemoryStream
5.  使用当前版本反序列化此对象
6.  检查第一个对象和最后一个对象的属性是否相同

这听起来很简单（或者可能不是？），我现在的问题是单元测试需要同时引用我的应用程序的当前版本和旧版本的应用程序。

因此，如果我现在尝试创建此对象，则会收到一条错误消息，指出此类型是在两个程序集中定义的。

所以我的问题是，如何处理对具有相同导出的程序集的两个引用。

我可以做类似的事情吗

```
OldAssembly.MyClass old;
CurrentAssembly.MyClass new; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:09:59.023

```
 > how can I handle two references to assemblies that have the same exports. 
```

您可以为每个引用的程序集声明一个[外部别名。](http://msdn.microsoft.com/en-us/library/ms173212%28v=vs.80%29.aspx)此别名通常是`global`，但您可以将自己的别名声明为编译器的命令行参数，或在 Visual Studio 中的 ReferencedAssemlys/{MyAssemly}/Properties/Aliase 下。

在您的程序中，您可以使用

```
old::My.NameSpace.MyClass old;
global::My.NameSpace.MyClass new; 
```

# sql - Sql添加字符串和数字并将其显示为单列

> ID：14443266
> 
> 赞同：4
> 
> 时间：2013-01-21T16:42:16.063
> 
> 标签：sql, oracle

我正在尝试获取一个存储站点上网页的 id # 的列，并将其与完整的 url 一起存储。

如果文章 ID 是 5。我希望它存储返回类似这样的内容

```
<a href="http://website.com/5">5</a> 
```

我想要做的是将搜索中的字符串和数字组合起来为该列创建一个 URL。我知道这种语法不正确，但无论如何我都找不到如何去做。

```
SELECT
CASE                                                                        
WHEN m_tableFoo.articleId = '0' THEN                                
    'Not Applicable'                                                    
ELSE '<a href="http://website.com/'+m_tableFoo.articleId+'/">'+m_tableFoo.articleId+'</a>' 
END AS articleID
from m_tableFoo 
```

我曾尝试搜索网络和 Stack Overflow，但我不确定我的搜索措辞是否不正确或我的描述。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T16:46:34.900

oracle`||`用于连接，而不是`+`. 您可能还需要`TO_CHAR`文章 ID

# c# - 实体框架中的反向导航属性

> ID：14443271
> 
> 赞同：0
> 
> 时间：2013-01-21T16:42:43.877
> 
> 标签：c#, asp.net-mvc-4, json.net, entity-framework-5

我使用现有数据库创建了 EF 模型，如下所示。一个基本的主从模型，数据库名称是 Sheet 和 SheetDetail。

[为什么我的超级简单的 ASP.NET Web API (mvc4)+Entity Framework 5 不起作用？](https://stackoverflow.com/questions/13060609/why-my-super-simple-asp-net-web-api-mvc4entity-framework-5-doesnt-work)

上一个答案解决了递归导航属性问题，但我的新问题是 **如何进行反向查询？**

我之前的查询是：

```
var result = db.Sheet.Include("SheetDetails").FirstOrDefault(s => s.Id == id); 
```

我的新查询必须是：

```
var result = db.SheetDetail.Include("Sheet").FirstOrDefault(d => d.Id == id); 
```

但正如你想象的那样，它做不到。我添加了另一个导航属性，但没有运气。

如何实现上述查询？ **请注意，json.NET 在序列化过程中会导致错误。**

# angularjs - AngularJs 可调整大小的边框布局

> ID：14443275
> 
> 赞同：4
> 
> 时间：2013-01-21T16:42:56.437
> 
> 标签：angularjs

在我的应用程序中，将有一个页面占据整个窗口（即您不能向任何方向滚动，页面会根据窗口大小自行调整大小）。我确信我可以做一些 CSS 技巧来实现这一点，但是这个页面也将包含一些可调整大小的区域。基本上会有一个侧边栏，用户可以使其更宽（在最小-最大范围内）。

[如果您在 Basic Layouts 下选择“Border”，](http://dev.sencha.com/deploy/ext-4.0.0/examples/layout-browser/layout-browser.html)基本上我想要做的是重新创建此页面。我对如何做到这一点有点茫然。我应该尝试引入一些 jQuery UI，还是有一个纯粹的 AngularJS 来做呢？

我知道我没有提供任何代码，所以我不希望任何人给我完整的工作代码。但是朝着正确的方向轻推会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:04:35.653

不，没有一种“纯粹的”AngularJS 方法可以做到这一点，而无需编写一些新代码或添加一个框架，例如您提到的。我建议看看更流行的 UI 框架，看看它们是如何适应的（可能是 jQueryUI，甚至是 Sencha）。

此外，您应该/可以编写一个指令来包装您对组件的使用，使其更加黑盒化，并本着 AngularJS 的精神（&这样您将来可以更轻松地替换它）。

鉴于创建跨浏览器的功能类型可能有点棘手（取决于支持的浏览器），最好留给其他做过的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T08:27:10.700

有点晚了，但猜这是你想要的[AngularJS UI 布局](https://github.com/angular-ui/ui-layout)

带有 AngularJS 的边框布局或拆分器布局插件。

# batch-file - 更新文件夹中的现有文件及其来自另一个文件夹的子文件夹

> ID：14443276
> 
> 赞同：0
> 
> 时间：2013-01-21T16:43:01.587
> 
> 标签：batch-file, directory, xcopy

我有两个文件夹，A 和 B。A 包含我要复制到 B 的文件，前提是它们已经存在于 B 中。

两者都有相似的结构，但是 A 比 B 有更多的文件和目录，但我不知道如何只保持相对于每个目录内部的路径完好无损。

所以如果我有

```
C:\FolderA\file1.txt
C:\FolderA\file2.txt
C:\FolderA\subfolder\text1.txt
C:\FolderA\subfolder\text2.txt

C:\FolderB\file2.txt
C:\FolderB\file3.txt
C:\FolderB\subfolder\text2.txt 
```

它只会复制 file2.txt 和 subfolder\text2.txt。一种“仅更新”命令。

我来到这里，从 FolderB 执行：

```
FOR /R %%i IN (*) DO COPY /Y "%%~nxi" "%%i" 
```

不幸的是`%%~nxi`，我只得到了文件，没有内部目录结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:51:17.157

您想`xcopy`与开关一起使用`/u`。

```
Copy only files that already exist in destination. 
```

# c++ - 如何获得 Ogre SceneNode Axis Oriented BoundingBox？

> ID：14443277
> 
> 赞同：2
> 
> 时间：2013-01-21T16:43:08.460
> 
> 标签：c++, axis, bounding-box, ogre

是否有任何 Ogre 函数可以获取 SceneNode Axis Oriented BoundingBox ？

我发现 ：

```
SceneNode::_getWorldAABB()
MovableObject::getBoundingBox()
MovableObject::getWorldBoundingBox() 
```

但似乎没有一个是好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:59:26.513

如果我理解你的问题，答案是否定的。`Ogre3D`仅支持轴对齐的边界框 ( `AABB`)。

如果您需要您的 bbox 与对象局部轴对齐，您需要自己实现该功能。

# entity-framework - 与级联给出错误的一对多关系

> ID：14443278
> 
> 赞同：0
> 
> 时间：2013-01-21T16:43:11.070
> 
> 标签：entity-framework, ef-code-first, entity-relationship, cascading-deletes, entity-framework-migrations

我正在通过迁移学习 EF Code First，我有 3 个实体：

```
[User] 1--->* [Call] 1--->* [ETA] 
```

代码 ：

**用户.cs**

```
public class User
{
    [Key]
    public int Id { get; set; }

    public Guid LongId { get; set; }

    [Required]
    public string Name { get; set; }

    public virtual ICollection<Call> Calls { get; set; } // many calls

    public User()
    {
        LongId = Guid.NewGuid();
    }
} 
```

**调用.cs**

```
public class Call
{
    [Key]
    public int Id { get; set; }

    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
    public string BreakdownNo { get; private set; }

    [Required,MaxLength(32)]
    public string Customer { get; set; }

    [Required,MaxLength(32)]
    public string TrailerNo { get; set; }

    [Required, MaxLength(32)]
    public string DepotContact { get; set; }

    [Required, MaxLength(48), RegularExpression(@"^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$")]
    public string DepotEmail { get; set; }

    [Required, MinLength(9), MaxLength(32)]
    public string DepotPhone { get; set; }

    [Required, MaxLength(32)]
    public string DriverContact { get; set; }

    [Required, MinLength(9), MaxLength(32), RegularExpression(@"^(7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3}$")]
    public string DriverPhone { get; set; }

    [Required, MaxLength(256)]
    public string LocatedAtFreeText { get; set; }

    [Required, MaxLength(8), RegularExpression(@"^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {0,1}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$")]
    public string LocatedAtPostCode { get; set; }

    [Required, MaxLength(16)]
    public string StartupNo { get; set; }

    [Required]
    public bool IsLoaded { get; set; }

    [Required, MaxLength(256)]
    public string FaultDescription { get; set; }

    [Required]
    public DateTime StartTime { get; set; }

    public DateTime? EndTime { get; set; }
    public string Status { get; set; }

    public virtual User Controller { get; set; } // 1 controller
    public virtual ICollection<ETA> ETAs { get; set; } // many ETAs

    public Call()
    {
        StartTime = DateTime.Now;
        ETAs = new List<ETA> { new ETA() };
        Status = "Logged";
    }
} 
```

**ETA.c**

```
public class ETA
{
    [Key]
    public int Id { get; set; }

    [Required]
    public TimeSpan Value { get; set; }

    public int CallId { get; set; }

    public ETA()
    {
        Value = TimeSpan.FromMinutes(90);
    }
} 
```

我想要它，所以当我删除`User`它时，它会删除所有`Calls`for the `User`，这反过来又会删除所有`ETAs`for those `Calls`。

当我从数据库中删除用户行（使用数据库资源管理器）时，它给了我一个错误：

**没有删除任何行。尝试删除第 201 行时出现问题。错误来源：.Net SqlClient 数据提供程序。错误消息：DELETE 语句与 REFERENCE 约束“FK_dbo.Calls_dbo.Users_Controller_Id”冲突。冲突发生在数据库“BreakdownDb”、表“dbo.Calls”、列“Controller_Id”中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:54:13.770

您可以在实体框架中打开级联删除选项，在这里您可以找到更多信息：http: [//blogs.msdn.com/b/alexj/archive/2009/08/19/tip-33-how-cascade-delete -really-works-in-ef.aspx](http://blogs.msdn.com/b/alexj/archive/2009/08/19/tip-33-how-cascade-delete-really-works-in-ef.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:52:14.303

解决方案是将`OnModelCreating`方法添加到我的`DbContext`班级：

```
public class BreakdownDb : DbContext
{
    public DbSet<Call> Calls { get; set; }
    public DbSet<User> Users { get; set; }

    public BreakdownDb(): base("name=DefaultConnection") {}

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().HasMany(x => x.Calls).WithRequired();
        modelBuilder.Entity<Call>().HasMany(x => x.ETAs).WithRequired();
    }
} 
```

# ios - iOS：Storyboard Segue 在类方法调用之前加载

> ID：14443279
> 
> 赞同：1
> 
> 时间：2013-01-21T16:43:12.240
> 
> 标签：ios, xcode

我有两个场景。一个常规的全屏 iPad 视图和另一个弹出视图。点击一个按钮可以毫无问题地加载弹出视图。在弹出视图中，我有一个按钮，它将执行一些操作，并且还链接到情节提要模式转换。

这个想法是从弹出视图中按下按钮将保存用户的选择状态并将该数据发送到主视图。我对数据保存没有任何问题，效果很好。

我遇到的问题是，当我从弹出视图中按下按钮时，主视图的`viewDidLoad`方法实际上在弹出视图的`IBAction`方法完成之前完成。所以主视图获取数据，但由于视图已经加载，它无法及时更新标签。

我尝试创建多个弹出视图场景，并在主视图中添加了多个按钮，这些按钮将链接到这些新场景。奇怪的是，其中一些工作得很好。其中一些将执行该`IBAction`方法，然后通过模态转换转换回主视图。似乎没有押韵或理由为什么一个在另一个之前加载。

我想一个可能的解决方案是`IBAction`在弹出视图的方法中手动执行转换。我对此绝对是新手，所以我可能缺少一些关于过渡的基本知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:00:39.830

在按钮所在的视图的视图控制器中......何时执行segue。你可以传入数据

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"YOUR_SEGUE_NAME_HERE"])
    {
        // Get reference to the destination view controller
        YourViewController *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
        [vc setMyObjectHere:object];
    }
} 
```

在加载视图之前调用此方法..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:01:55.753

如果您正在调用弹出框，那么主屏幕不应调用 viewDidLoad 方法，因为主视图仍在后面。它应该调用 viewWillAppear 和 viewDidApper 方法。

你能检查一下吗？我认为您应该在调用这两种方法之一后刷新主屏幕。

试一试，告诉我结果。

# xcode - [xcode]程序中出现意外的'@'

> ID：14443282
> 
> 赞同：1
> 
> 时间：2013-01-21T16:43:23.813
> 
> 标签：xcode

我有这样的代码

```
Initialize List View Controller
MTListViewController *listViewController = [[MTListViewController alloc] init];
// Initialize Navigation Controller
UINavigationController *listNavigationController = [[UINavigationController alloc]        initWithRootViewController:listViewController];
// Initialize Tab Bar Controller
UITabBarController *tabBarController = [[UITabBarController alloc] init];
// Configure Tab Bar Controller
[tabBarController setViewControllers:@[listNavigationController]]; 
```

我在最后一行收到错误“程序中出现意外的'@'”。那怎么了？？我的 xcode 版本是 4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:46:44.570

> 我的 xcode 版本是 4.2

直到 Xcode 4.4 才支持新的数组字面量。您需要使用等效的旧语法：

```
[tabBarController setViewControllers:[NSArray arrayWithObject:listNavigationController]]; 
```

# android - 在片段内使用多个自定义 ListView 适配器

> ID：14443286
> 
> 赞同：0
> 
> 时间：2013-01-21T16:43:37.357
> 
> 标签：android, android-listview, android-fragments

我有一个包含三个列表视图的片段，每个视图都连接到不同的自定义适配器。

这是我的代码：

片段类：

```
package com.example.buffy;

import java.util.ArrayList;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.app.ListFragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

public class UserInfoFragment extends ListFragment 
{
 ListView LST_userDetail;
 ListView LST_communicationDetail;
 ListView LST_generalDetail;

 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
 {
        super.onCreate(savedInstanceState);
        View view = inflater.inflate(R.layout.afragment, container, false);
        Activity a = getActivity();
        LST_userDetail=(ListView)view.findViewById(R.id.LST_userDetailList);
        LST_communicationDetail=(ListView)view.findViewById(R.id.LST_communicationDetailList);
        LST_generalDetail = (ListView)view.findViewById(R.id.LST_generalDetailList);

        /*
         *  כאן נצטרך לחבר את המאגר המידע ולשאוב ממנו מידע, כרגע אני מכניס נתונים שרירותית
         *  מכין את האדפטור של המידע על המשתמש
         */
        ArrayList<UserInfo> userInfoData = new ArrayList<UserInfo>();
        userInfoData.add(new UserInfo("אלפסי עומר", "שם לקוח"));
        userInfoData.add(new UserInfo("301541541", "ת.ז"));
        userInfoData.add(new UserInfo("26/03/1988", "ת.לידה"));
        UserDetailAdapter uAdapter = new UserDetailAdapter(getActivity(), R.layout.user_detail_row, userInfoData);
        LST_userDetail.setAdapter(uAdapter);

        /*
         *  כאן נצטרך לחבר את המאגר המידע ולשאוב ממנו מידע, כרגע אני מכניס נתונים שרירותית
         *  מכין את האדפטור של המידע על פרטי התקשרות
         */

        ArrayList<CommunicationInfo> comInfoData = new ArrayList<CommunicationInfo>();
        comInfoData.add(new CommunicationInfo(R.drawable.telephone, "טל. בית", "04985349334"));
        comInfoData.add(new CommunicationInfo(R.drawable.telephone, "טל. נייד", "05434983933"));
        comInfoData.add(new CommunicationInfo(R.drawable.fax, "פקס עבודה", "07435325233"));
        comInfoData.add(new CommunicationInfo(R.drawable.mail, "דוא''ל עיקרי ", "omer@b-com.co.il"));
        CommunicationUserAdaptor cAdaptor = new CommunicationUserAdaptor(getActivity(), R.layout.communitcation_detail_row, comInfoData);
        LST_communicationDetail.setAdapter(cAdaptor);

        /*
         *  כאן נצטרך לחבר את המאגר המידע ולשאוב ממנו מידע, כרגע אני מכניס נתונים שרירותית
         *  מכין את האדפטור של המידע על פרטים כללים
         */

        ArrayList<UserInfo> genInfoDate = new ArrayList<UserInfo>();
        genInfoDate.add(new UserInfo("סוכן", "סוכן לדוגמה"));
        genInfoDate.add(new UserInfo("בי-קום פתרונות תוכנה בע''מ", "מעסיק"));
        GeneralInfoAdapter gAdaptor = new GeneralInfoAdapter(getActivity(), R.layout.user_detail_row, genInfoDate);
        LST_generalDetail.setAdapter(gAdaptor);

        return inflater.inflate(R.layout.afragment, container, false);

    }

} 
```

问题是它永远不会响应自定义适配器类中的 getView 方法。并且列表视图永远不会被填充。

有人有什么想法吗？

请不要介意有趣的角色

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:55:30.810

您正在返回一个新膨胀的视图，

`return view`改为使用

# tfs - 如何在 TFS 2012 中将“已完成工作”字段添加到任务模板

> ID：14443289
> 
> 赞同：1
> 
> 时间：2013-01-21T16:43:54.813
> 
> 标签：tfs, azure-devops

我使用 TFS2012 使用站点[https://myproject.visualstudio.com/](https://myproject.visualstudio.com/)

在任务模板中我只看到剩余工作字段，如何添加“已完成工作”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:11:17.530

目前这是不可能的（有另一个答案链接到博客文章，关于如何为较旧的本地 TFS、VSTS 和较新的工作项表单添加它应该可以通过 Web UI 添加），请参阅[此MSDN 论坛上的线程](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/9c5c669d-2b4f-4450-aff1-a457d3279b39)以获取详细信息，它还涵盖了您的问题。

本段解释了省略原始估计和已完成工作的原因：

> 使用 Scrum 模板，我们特意尝试保持我们认为与 Scrum 方法相匹配并确保某些核心 TFS 功能正确运行所需的最少字段集。我们一直都明白，会有一些客户想要在工作项中获取额外的信息。在这种情况下，定制工作项类型以满足您的需求是预期的方法。
> 
> 我了解目前您在托管 TFS 中没有此功能，但希望我们将来能够解决这个问题。
> 
> 关于在不添加额外字段的情况下分析团队效率的问题，我有几个建议：
> 
> 1.利用带有 ASOF 子句的工作项查询的历史查询功能，允许您查询在给定时间点出现的工作项。这应该可用于针对托管 TFS 团队项目执行，但确实需要您通过 TFS OM 运行查询，因为目前在 Visual Studio 或 Web 访问客户端中不支持 ASOF 子句。
> 
> 2.对于非托管环境，TFS Warehouse and Analysis Services 多维数据集提供丰富的历史数据。我意识到这目前不适用于托管服务，但它可以帮助其他用户寻找类似的数据。
> 
> -菲尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-04T12:20:46.293

[https://blogs.msdn.microsoft.com/visualstudiouk/2013/04/17/adding-completed-work-to-task-work-items-in-the-scrum-2-x-template-include-reporting/](https://blogs.msdn.microsoft.com/visualstudiouk/2013/04/17/adding-completed-work-to-task-work-items-in-the-scrum-2-x-template-including-reporting/)

按照上面网址中的步骤操作

1 下载 tfs powertool

2 添加字段（原始估计，完成的单词）

# c++ - 避免在 Xcode 中跳入 C++ STL 代码

> ID：14443292
> 
> 赞同：0
> 
> 时间：2013-01-21T16:43:59.000
> 
> 标签：c++, xcode, debugging

我目前正在调试一个我正在使用 Objective-C 和 C++ 代码的项目。

我遇到的问题是，每当我试图跨过包含某种 STL 容器调用的行时，Xcode 总是会进入 C++ STL 代码。

这真的很烦人！例如，我需要 4 个“Step Over”才能越过这条线：

```
medianVec.assign(greenPlane[0], greenPlane[(width*height)-1]); 
```

我也不明白 Xcode 这样做的意义所在。无法想象这些信息对大多数开发人员来说如此有用。

感谢您的帮助！提前致谢，

弗洛

# r - R函数返回数据框（额外列）

> ID：14443293
> 
> 赞同：0
> 
> 时间：2013-01-21T16:44:07.227
> 
> 标签：r, function, dataframe

我是 R 编程的初学者（使用它进行数据分析）

我有以下数据。（精简版）

```
state   storeid sales
CA  1   40,000  
CA  2   44,000  
CA  3   38000   
MN  1   26000   
MN  2   25500 
```

我需要一个返回表现最佳/表现不佳的商店的函数。

我写了以下函数。

```
storeinfo<-function(num="top") {

  df<-read.csv("store.csv")

  bestVal <- 1;
  if (!missing(num)) {
    if(is.numeric(num)){
      bestVal =  as.numeric(num);
    }
    if(num=="top"){
      bestVal <-1
    }
    if ( num=="poor"){
      bestVal<-0
    }
  }
  print(bestVal)
    data2<-subset(df[,c(1,2,3)])
    data2<-data2[order(as.numeric( data2$sales), data2$storeid,na.last=TRUE,decreasing=TRUE), ]
    idx<-tapply(1:NROW(data2),data2$state,"[",bestVal)
    idx1<-tapply(1:NROW(data2),data2$state,"[",1)

    return (data.frame(data2[idx1,1],data2[idx,2:3]))

} 
```

当我执行上述功能时，我看到以下内容

```
> head(storeinfo(1))
[1] 1
  data2.idx1..1\. storeid  sales
2             CA       2 44,000
4             MN       1  26000 
```

a）如何抑制第一列 2,4 等？（索引） b）如何找到销售额低的商店？c) 如何为返回的数据框设置不同的列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:31:11.003

做这个

```
min_max_sales = c(which.min(df$sales), which.max(df$sales)) # return row numbers
df[min_max_sales,] 
```

更新。

如果您需要对数据框进行排序并获得销售额排名第 n 的商店，这是使用`plyr`包的更好方法

```
plyr::arrange(df, sales)[n,] 
```

# html - 如何使 postMessage 适用于所有子域

> ID：14443294
> 
> 赞同：20
> 
> 时间：2013-01-21T16:44:10.547
> 
> 标签：html, postmessage

在`window.postMessage`第二个属性中指定我的消息可以发送到的域。有没有办法指定它适用于所有子域。

尝试的事情：

```
iframe.contentWindow.postMessage('The message to send.','http://*.wordpress.com');
iframe.contentWindow.postMessage('The message to send.','http://wordpress.com'); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-02-02T17:08:11.130

在不知道所有域名的情况下是可能的。只需获取一个引荐来源网址，您实际上就可以从中获得来源：

```
var parentOrigin = document.referrer.match(/^.+:\/\/[^\/]+/)[0]; 
```

现在，唯一要做的就是检查 URL 是否符合条件（以 结尾`wordpress.com`），如果是，则允许将消息发送到此特定域。

仅在用户在 iframe 内导航到其他地方之前有效：引荐来源网址已更改。但是，引荐来源网址可以保存在 iframe 中，`localStorage`因此您有一个可能的域列表，并且可以将消息发送到[Ivan Zuzak建议的列表中的每个域](https://stackoverflow.com/a/14518856/1990451)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T09:27:40.813

不，不可能。

您可以帮助自己的唯一情况是，如果您知道目标 iframe 来自已知的有限来源集（例如“http://a.wordpress.com”、“http://b.wordpress.com ”和“http://c.wordpress.com”）。在这种情况下，只需为每个源发出 postMessage 请求，因为只有一个会成功，而其他会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T16:17:29.313

您可以只解析和询问`src`iframe 的属性以确定它是否属于正确的域并相应地设置 targetOrigin。

```
yourIframe.onload = function() {
  var a = document.createElement('a');
  a.href = yourIframe.src;

  if (a.host.endsWith('yourdomain.com')) {
    var targetOrigin = a.protocol + '//' + a.host;

    yourIframe.contentWindow.postMessage(yourMessage, targetOrigin);
  }
}; 
```

# c# - WPF Richtextbox 以纯文本形式打开 RTF 文件

> ID：14443295
> 
> 赞同：3
> 
> 时间：2013-01-21T16:44:14.827
> 
> 标签：c#, wpf, richtextbox, openfiledialog

我正在尝试打开一个文件以`RichTextbox`在`Button`单击时将内容作为纯文本查看。似乎没有什么工作正常。

```
private void loadFile_Click(object sender, RoutedEventArgs e)
{
    OpenFileDialog openFile1 = new OpenFileDialog();
    openFile1.FileName = "Document"; 
    openFile1.DefaultExt = "*.*";
    openFile1.Filter = "All Files|*.*|Rich Text Format|*.rtf|Word Document|*.docx|Word 97-2003 Document|*.doc";

    if (openFile1.ShowDialog() == System.Windows.Forms.DialogResult.OK && openFile1.FileName.Length > 0)
    {
        //richTextbox1.Document.ContentStart = File.ReadAllText(openFile1.FileName);
    }
} 
```

我正在使用 WPF，并且 LoadFile 方法不起作用。我希望能够从中选择一个文件`OpenFileDialog`并将其作为纯文本加载到`RichTextbox`. 没有从文件格式中看到添加的代码。

我想要的行为类似于打开 .rtf、选择所有文本并将结果粘贴到 .rtf 文件中`RichTextbox`。如何通过单击按钮来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:56:00.233

使用`TextRange`和`FileStream`

```
if (openFile1.ShowDialog() == System.Windows.Forms.DialogResult.OK )
{             
  TextRange range;
  System.IO.FileStream fStream;

  if (System.IO.File.Exists(openFile1.FileName))
  {
      range = new TextRange(RichTextBox1.Document.ContentStart, RichTextBox1.Document.ContentEnd);
      fStream = new System.IO.FileStream(openFile1.FileName, System.IO.FileMode.OpenOrCreate);
      range.Load(fStream, System.Windows.DataFormats.Rtf );

      fStream.Close();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:52:37.043

你试过使用`richTextbox1.AppendText(File.ReadAllText(openFile1.FileName))`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:01:50.350

与@AbZy 类似，您需要先清除格式：

```
 private void loadFile_Click(object sender, RoutedEventArgs routedEventArgs)
    {
        OpenFileDialog openFile1 = new OpenFileDialog();
        openFile1.FileName = "Document";
        openFile1.DefaultExt = "*.*";
        openFile1.Filter = "All Files|*.*|Rich Text Format|*.rtf|Word Document|*.docx|Word 97-2003 Document|*.doc";

        if (openFile1.ShowDialog() == true)
        {
            var range = new TextRange(rtf.Document.ContentStart, rtf.Document.ContentEnd);

            using (var fStream = new FileStream(openFile1.FileName, FileMode.OpenOrCreate))
            {
                // load as RTF, text is formatted
                range.Load(fStream, DataFormats.Rtf);
                fStream.Close();
            }
            // clear the formatting, turning into plain text
            range.ClearAllProperties();
        }
    } 
```

# colors - 从 Kinect 深度流中获取像素颜色

> ID：14443302
> 
> 赞同：2
> 
> 时间：2013-01-21T16:44:33.023
> 
> 标签：colors, kinect, pixels, kinect-sdk

我目前在尝试从 Kinect 深度流中找到特定像素的颜色时遇到了一些困难。下面的代码是我用来计算 (100, 100) 处像素颜色的代码。

我感觉我的逻辑在某处有缺陷（也许在将索引计算为我想要的 colorPixels 时）

colorPixels 和 depthPixels 声明如下：

```
colorFrame.CopyPixelDataTo(colorPixels); //colorPixels is a byte[]
depthFrame.CopyDepthImagePixelDataTo(depthPixels); //depthPixels is a DepthImagePixel[] 
```

我计算深度流中100,100处像素的rgb值如下：

```
DepthImagePoint ballDepthPoint = new DepthImagePoint();
int ballPosX = 100;
int ballPosY = 100;
int blueTotal = 0, greenTotal = 0, redTotal = 0;

ColorImagePoint ballColorPoint;

//build a depth point to translate to a color point
ballDepthPoint.X = ballPosX;
ballDepthPoint.Y = ballPosY;
ballDepthPoint.Depth = this.depthPixels[ballDepthPoint.X * ballDepthPoint.Y].Depth;

//work out the point on the color image from this depth point
ballColorPoint = this.sensor.CoordinateMapper.MapDepthPointToColorPoint(this.sensor.DepthStream.Format, ballDepthPoint, this.sensor.ColorStream.Format);

//extract the rgb values form the color pixels array
blueTotal += (int)colorPixels[(ballColorPoint.X * ballColorPoint.Y * colorFrame.BytesPerPixel)];
greenTotal += (int)colorPixels[(ballColorPoint.X * ballColorPoint.Y * colorFrame.BytesPerPixel) + 1];
redTotal += (int)colorPixels[(ballColorPoint.X * ballColorPoint.Y * colorFrame.BytesPerPixel) + 2];

System.Console.WriteLine("The ball found is " + redTotal + "," + blueTotal + "," + greenTotal + " which is " + Helper.ColorChooser(redTotal, greenTotal, blueTotal)); 
```

ColorChooser 方法如下：

```
public static String ColorChooser(int r, int g, int b)
    {

        if (r >= g && r >= b)
        {
            return "RED";
        }
        else if (b >= g && b >= r)
        {
            return "BLUE";
        }
        else
            return "GREEN";
    } 
```

如果您需要更多信息/代码，请告诉我。

非常感谢，

戴夫·麦克布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:09:18.253

到了最后，在彩色像素中索引像素的正确方法似乎是：

```
colorPixels[(ballColorPoint.X * colorFrame.BytesPerPixel) + (ballColorPoint.Y * stride)]; 
```

在哪里：

```
int stride = colorFrame.BytesPerPixel * colorFrame.Width; 
```

# jquery - Jquery 动画在加载回调时停止

> ID：14443304
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:44:37.853
> 
> 标签：jquery, animation, load

我想做一些有点棘手的事情：

我有 2 个非嵌套 div，我们称它为“文本”和“内容”。我想：在用户点击时：

1.  淡出“文本”中的实际文本
2.  淡入加载文本并开始使用 .load 加载页面

在 .load 指令的末尾：

1.  淡出加载文本
2.  将内容 div 的 html 更改为加载的页面
3.  slideDown 我刚刚加载的内容 div

这是我的代码：

```
$("#text").click(function () {
            console.log("click!");
            $('#content').fadeOut(400, function () {
                console.log("first Fade out complete!");
                $('#content').text('Loading..').fadeIn(400, function () {
                    console.log("first Fade in complete!");
                    $('#text').load('imageMenu.aspx', function () {
                        console.log("Load complete!");
                        $('#content').fadeOut(400, function () {
                            console.log("Second fadeout complete!");
                            $('#text').slideDown();
                        });
                    });
                });
            }); 
```

但它不起作用，在我的控制台中我有：

> 点击！
> 
> 首先淡出完成！
> 
> 首先淡入完成！
> 
> 加载完成！

加载完成后，我加载的内容没有任何动画！我做错了什么？看起来加载回调没有被调用也没有被执行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:22:11.950

你会添加你的 HTML 代码来测试它吗？

你为什么不使用 $.ajax() 方法

类似的东西：

```
 $('#content').fadeOut(400, function() {
            $.ajax({
                url: 'imageMenu.aspx',
                success: function(result) {
                    console.log("Load complete!");
                    $('#content').fadeOut(400, function() {
                        console.log("Second fadeout complete!");
                        $('#text').slideDown();
                    });

                }
            });
        }); 
```

# html - HTML 正文高度 100% - 仍然以百分比表示的高度不起作用

> ID：14443307
> 
> 赞同：4
> 
> 时间：2013-01-21T16:44:42.720
> 
> 标签：html, css, height

我知道这是一个愚蠢的..但是将 html 和 body 标签的高度设置为 100% 并将填充和边距调整为 0 并没有解决它！

Divs 仍然没有显示正确的高度..而只是其内容的高度。

这是我的代码：

HTML

```
<!DOCTYPE html>
<html lang="e">
<head>
    <meta charset="utf-8" />

    <title>Musterportfoliovergleich</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="stylesheets/index.css" type="text/css">
    <!--<link rel="stylesheet" href="stylesheets/jquery.mobile.css" type="text/css">-->

    <script type="text/javascript" src="javascripts/jquery.js"></script>
    <script type="text/javascript" src="javascripts/jquery.mobile.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            console.log("Hello");
        });
    </script>
</head>

<body>
    <div id="pieChartCont1" class="container">
        Pie Chart Container 1
    </div>

    <div id="barChartCont1" class="container">
        <div id="barChartCont">
            Bar Chart Container
        </div>

        <div id="recBut">
            recBut
        </div>
    </div>

    <div id="pieChartCont2" class="container">
        Pie Chart Container 2
    </div>

    <div id="recCont" class="container">
        Recomendations Container
    </div>

    <div id="barChartCont2" class="container">
        Bar Chart Container 2
    </div>
</body>
</html> 
```

CSS

```
html, body{
width:100%;
height:100%;
margin:0;
}

#pieChartCont1{background-color:red}
#barChartCont{background-color:green}
#recBut{background-color:blue}
#pieChartCont2{background-color:yellow}
#recCont{background-color:purple}
#barChartCont2{background-color:orange}

@media
only screen and (orientation:portrait){
.container{
    width:100%
}
#pieChartCont1{
    height:45%
}
#barChartCont1{
    height:10%
}
    #barChartCont{
        width:80%;
        height:100%;
        float:left;
    }
    #recBut{
        width:20%;
        height:100%;
        float:left
    }
#pieChartCont2{
    height:45%
}
#recCont{display:none}
#barChartCont2{display:none}
}

@media
only screen and (orientation:landscape) and (max-device-width:700px){
.container{
    height:100%;
    float:left;
}
#pieChartCont1{
    width:45%
}
#barChartCont1{
    width:10%
}
    #barChartCont{
        width:100%;
        height:80%
    }
    #recBut{
        width:100%;
        height:20%
    }
#pieChartCont2{
    width:45%
}
#recCont{display:none}
#barChartCont2{display:none}
}

@media 
only screen and (orientation:landscape) and (min-device-width:701px){
.container{
    width:50%;
    height:50%;
    float:left;
}
/*#pieChartCont1{}*/
/*#pieChartCont2{}*/
#recCont{
    clear:both
}
/*#barChartCont2{}*/
#barChartCont1{display:none}
} 
```

* * *

我想到了！jQuery Mobile 脚本只是弄乱了视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:50:39.483

设置百分比充其量是不确定的。根据我的经验，我更喜欢只使用 JavaScript 函数来获取页面宽度和高度，并将 div 尺寸设置为像素，而不是百分比。将 id 设置为您想要格式化并用于`document.getElementById`调整它们大小的 HTML 元素。

```
var container = document.getElementById("container");
var barChartCont = document.getElementById("barChartCont");
//...and so on...

var viewportwidth;
var viewportheight;

function resize() {
    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

    if (typeof window.innerWidth != 'undefined') {
        viewportwidth = window.innerWidth,
        viewportheight = window.innerHeight
    }

    // IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

    else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
        viewportwidth = document.documentElement.clientWidth,
        viewportheight = document.documentElement.clientHeight
    }

    // older versions of IE

    else {
        viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
        viewportheight = document.getElementsByTagName('body')[0].clientHeight
    }

container.style.height = viewportheight+"px";
barChartCont.style.height = (0.8*viewportheight)+"px";
//and so on...
} 
```

该函数将获取浏览器的高度和宽度。将您的标签替换为

```
<body onload="resize()" onresize="resize()"> 
```

并且该函数将在页面加载时调用，并在每次调整页面大小时再次调用（以更新`<div>`您正在使用的 HTML 标签或任何 HTML 标签的尺寸。）这样，您将获得尺寸的实际像素，而不是百分比。

试试看，如果你有问题，请告诉我。在我的编码历史中，我多次使用过这个脚本，它已成为我的最爱和最常用的脚本之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:27:28.777

看看[灵活的盒子布局](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)。如果您尝试在某个高度的特定百分比处使用面板来布局应用程序，那么它应该会更好地为您工作。

# solr - Solr 4 空间查询过滤器仍然返回超出范围的文档

> ID：14443309
> 
> 赞同：0
> 
> 时间：2013-01-21T16:44:44.157
> 
> 标签：solr, geospatial, spatial, spatial-query, solr4

目标是按分数然后距离执行多重排序，并将半径限制为 0.14 度，我执行以下查询：

```
localhost:8983/solr/coll1/select?sortsq={! score=distance}locations:"Intersects(Circle(34.0031792,-118.3082034 d=0.14))"&fl=score,distdeg:query($sortsq),*&facet=true&sort=score desc,query($sortsq) asc&indent=on&wt=xml&version=2.2&rows=10&start=0&q=text:*&facet.field=xxxxx&fq=fieldname:"filterValue" 
```

返回所有匹配查询的文档，无论是否在圆圈内，但0.14度以内的返回距离（distdeg），其他不返回该字段。

如何省略不相交的文档？

位置字段声明：

```
<fieldType name="geo_field"   class="solr.SpatialRecursivePrefixTreeFieldType"
               spatialContextFactory="com.spatial4j.core.context.jts.JtsSpatialContextFactory"
               distErrPct="0.025"
               maxDistErr="0.000009"
               units="degrees"
 /> 
```

**更新：** 查询的工作版本

```
http://localhost:8983/solr/coll1/select?getDist={! score=distance}locations:"Intersects(Circle(34.0031792,-118.3082034 d=0.14))"&fl=score,distdeg:query($getDist),*&facet=true&sort=score desc&indent=on&wt=xml&version=2.2&rows=10&start=0&q=*:*&boost=query({! score=distdeg filter=false v=$getDist)&fq=locations:"Intersects(Circle(34.0031792,-118.3082034 d=0.14))",states:"CA" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:18:47.447

您实际上根本没有进行空间过滤。solr 搜索基于“q”（来自用户的查询字符串；它评分）和“fq”（过滤查询，不评分）匹配文档，仅此而已。您的“q”和“fq”都不是指您放入 sortsq 参数的空间过滤器。请参阅文档：[http ://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4#Search](http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4#Search)

你的 q=text:* 很奇怪；你有什么打算？所有文档？该查询可能看起来有效，但不要这样做，因为它没有做你认为它在做的事情；它正在查找在该字段中具有任何值的所有文档（计算速度不快），这不是所有文档所必需的。最佳实践是 defType=edismax 和 q.alt=*:* 和 qf=text （假设这是您的文本搜索字段）如果您没有要提供的查询字符串，它将匹配所有文档。

顺便说一句，将分数排序与其他任何东西一起进行是没有任何意义的。浮点值种类繁多，因此很少会参考距离。您可能希望通过距离来提高分数。下面是一个示例： &boost=query({! score=recipDistance filter=false v=$spatialfilter}) （将具有空间搜索的参数名称替换为 spatialFilter）。

# matlab - 使用圆形邻域法matlab求分支度

> ID：14443311
> 
> 赞同：0
> 
> 时间：2013-01-21T16:44:51.427
> 
> 标签：matlab

我有一个骨架图像。如以下链接所示。

[http://www.flickr.com/photos/92388309@N03/8397759970/in/photostream/](http://www.flickr.com/photos/92388309@N03/8397759970/in/photostream/)

我已经检测到分支点和端点并标记了图像。现在我在每个分支上画一个圆圈，我正在使用以下代码在每个分支上画一个圆圈。

```
mn=bwmorph(y,'branchpoints');
[row column] = find(mn);
branchPts    = [row column];
endImg    = bwmorph(y, 'endpoints');
[row column] = find(endImg);
endPts       = [row column];
figure;imshow(y);
hold on ; 
plot(branchPts(:,2),branchPts(:,1),'rx');
hold on; plot(endPts(:,2),endPts(:,1),'*');
% Labeling the Branches
branches = (y & ~mn); % set branch points to zero
figure; imshow(branches);
branchesLabeled = bwlabel( branches); % label connected components
vislabels(branchesLabeled)
% Calculation of Length of Branches and Circular Neighbourhood Method for
% for detection of normal and abnormal branches.
sts = regionprops( branchesLabeled,'Area', 'Perimeter','MajorAxisLength','Centroid' );
% extract properties
% Loop for circles
for i=1:size(sts)
r= sts(i).MajorAxisLength/2 ; %desired radius
centerx = sts(i).Centroid(1);  
centery = sts(i).Centroid(2);
th = 0:pi/50:2*pi;
xunit = r * cos(th) + centerx;
yunit = r * sin(th) + centery;
figure; imshow(branchesLabeled);hold on;h = plot(xunit, yunit);
end 
```

这段代码我有几个问题。

1.  圆圈画在骨架的中心线上（不是分支，是骨架的中心线） [http://www.flickr.com/photos/92388309@N03/8402753918/in/photostream](http://www.flickr.com/photos/92388309@N03/8402753918/in/photostream)

2.  这段代码给了我一些图像（每个分支一个）。我想在同一图像上的每个分支上画圈。

我想通过使用圆形邻域法（通过在每个分支上绘制圆圈并检查圆圈中有多少背景像素）来找到分支度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:46:35.903

对于问题 1，您正在为`sts`结构中的所有内容绘制圆圈。您需要弄清楚如何仅获取`sts`.

对于问题 2，您需要`figure`在循环之外调用并绘制图像。然后`plot`在循环中调用以绘制每个圆圈。像这样的东西：

```
figure
imshow(branchesLabeled)
hold on
for i=1:size(sts)
    % your other code here...
    plot(xunit, yunit);
end 
```

# android - android 不断给我的应用程序这个错误：addView(View, LayoutParams) is not supported

> ID：14443313
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:44:57.073
> 
> 标签：android, compiler-errors, adapter

我的应用程序不断出现此错误：AdapterView 不支持 addView(View, LayoutParams)

然后我将适配器从简单更改为自定义，因为我搜索了解决方案。然后我做了我的自定义适配器，但我不断收到这个错误，我不知道为什么。我该如何解决这个问题？

```
public class Main_activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.custom_list_view);

    ListView mListView = (ListView)findViewById(R.id.mylist);

    ArrayList<String> listIds =  new ArrayList<String>();
    listIds.add("txtname");
    listIds.add("btnnum");
    listIds.add("txtTran");
    mAdapter = new CustomAdapter(this,listIds);
    mListView.setAdapter(mAdapter);

    populateList();
}

static final ArrayList<HashMap<String,String>> list = 
    new ArrayList<HashMap<String,String>>(); 

private void populateList() {
    if(!list.isEmpty())
        list.clear();

    HashMap<String,String> temp1 = new HashMap<String,String>();
    temp1.put("txtname","test1");
    temp1.put("btnnum", "1");
    temp1.put("txtTran", "4x");

    list.add(temp1);
    HashMap<String,String> temp2 = new HashMap<String,String>();
    temp2.put("txtname","test2");
    temp2.put("btnnum", "2");
    temp2.put("txtTran", "3.5x");

    list.add(temp2);
    HashMap<String,String> temp3 = new HashMap<String,String>();
    temp3.put("txtname","test3");
    temp3.put("btnnum", "3");
    temp3.put("txtTran", "3.2x");

    list.add(temp3);
    HashMap<String,String> temp4 = new HashMap<String,String>();
    temp4.put("txtname","test4");
    temp4.put("btnnum", "4");
    temp4.put("txtTran", "2.4x");

    list.add(temp4);

}
protected CustomAdapter mAdapter;
private class CustomAdapter extends ArrayAdapter<String> {

    protected Context mContext;
    protected ArrayList<String> mItems;
    protected LayoutInflater mInflater;
    public CustomAdapter(Context context, ArrayList<String> items) {
        super(context, R.layout.custom_row_view, items); // Use a custom layout file
        mContext = context;
        mItems = items;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        System.out.println("enters");
        if(convertView == null){

            convertView = mInflater.inflate(R.layout.custom_row_view,null);
        }

      ((TextView) convertView.findViewById(R.id.nametxt)).setText(list.get(position).get("txtname"));
      ((Button) convertView.findViewById(R.id.btnnum)).setText(list.get(position).get("btnnum"));
      ((TextView) convertView.findViewById(R.id.transtxt)).setText(list.get(position).get("txtTran"));

        return convertView;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:44:51.763

好的，所以我解决了这个问题。问题是因为我在我的布局中添加了一个框架布局，但忘记提供有关它的详细信息，我有这样的：

```
 <FramLayout android:id="@+id/f1"> 
```

布局给出了问题，我认为它来自活动。

# xcode - Xcode 不会打开整个项目

> ID：14443314
> 
> 赞同：1
> 
> 时间：2013-01-21T16:45:00.603
> 
> 标签：xcode, xcode4, xcode4.5

我已经在这个 Xcode 4.5 ios 项目上工作了几天，但是今天突然当我试图打开这个项目时它没有出现！！只有这个观点：

![在此处输入图像描述](../Images/378e67a75b16c82e2fa0b9276d718c9e.png)

我希望显示孔项目窗口，如下所示：

![在此处输入图像描述](../Images/3c7a6974ce674a9c318971e93cc64830.png)

PS：这张图片来自另一个项目，它以我想要的方式打开。

我要怎么做才能打开孔工程编辑器窗口才能正常编辑工程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:02:05.967

进入 XCode 的 View 菜单---> Show Tool Bars。

然后，按 cmd+1（显示导航器（左窗格））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:55:58.923

将拆分视图分隔线向右移动？

![在此处输入图像描述](../Images/4e2a1cb317d4450f29b31e458ba24f3e.png)

# jquery - jQuery循环插件交错/增量

> ID：14443316
> 
> 赞同：4
> 
> 时间：2013-01-21T16:45:10.593
> 
> 标签：jquery

我目前正在使用 jquery 循环插件。我有 3 个不同的幻灯片，它们彼此相邻并同时循环播放。我想做的是先关闭第一个幻灯片，然后是第二个，然后是第三个。无论如何我可以通过增量或超时来做到这一点吗？

```
<div class="cycle" id="one">
   <img src="one.jpg" alt="" />
   <img src="two.jpg" alt="" />
   <img src="three.jpg" alt="" />
</div>
<div class="cycle" id="two">
   <img src="two.jpg" alt="" />
   <img src="three.jpg" alt="" />
   <img src="one.jpg" alt="" />
</div>
<div class="cycle" id="three">
   <img src="three.jpg" alt="" />
   <img src="one.jpg" alt="" />
   <img src="two.jpg" alt="" />
</div>

$('.cycle').cycle({
   fx:'fade',
   speed:1000
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:48:36.037

```
var timeout = 0;

$(".cycle").each(function () {
   var $this = $(this);
   setTimeout(function () {
      $this.cycle({
         fx: "fade", speed: 1000
      });
   }, timeout);

   timeout += 2000;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:48:43.733

```
var i = 1;
var x = $(".cycle").length;
var w = setInterval( function() {
if(i==x) {
window.clearInterval(w);
}
else {
$(".cycle:nth-child('+i+')").cycle({
   fx:"fade",
   speed:1000
});
i++;
}
}, 3000); 
```

# jquery-ui - ember.js 和 jQuery-UI 多选小部件

> ID：14443317
> 
> 赞同：1
> 
> 时间：2013-01-21T16:45:16.063
> 
> 标签：jquery-ui, ember.js

我的 ember 应用程序需要一个高级多选元素（具有搜索功能）。

我喜欢[这个](https://github.com/ehynds/jquery-ui-multiselect-widget)jQuery-UI Multiselect 小部件并从以下代码开始：

```
// app.js
...
App.MultiSelectView = Em.View.extend({
  didInsertElement: function() {
    this._super();
    console.log("Creating multiSelect element");
    $("#mselect").multiselect().multiselectfilter();
  },
});
App.multiSelectView = App.MultiSelectView.create();
...

// index.html
...
<script type="text/x-handlebars" data-template-name="mulselect">
  <select id="mselect" multiple="multiple">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
  </select>
  {{view App.multiSelectView}}
</script>
... 
```

此代码有效并显示小部件。但我不知道如何将值/名称绑定到 ember 控制器/对象。

[这篇](http://www.lukemelia.com/blog/archives/2012/03/10/using-ember-js-with-jquery-ui/)博文似乎指向了正确的方向，但正如我所说，我还没有找到解决方案，因为我是 ember（和 javascript）的新手。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:36:19.553

如果您不熟悉 ember 和 javascript，我强烈建议您不要尝试集成 JQUI 和 ember。JQUI 组件倾向于对 HTML 的外观做出很多假设——任何在意想不到的地方添加标签的框架都会破坏大多数 JQUI 组件。同样，ember 的数据绑定功能无法在由 3rd 方库呈现的 DOM 的一部分上工作。

也就是说，我试了一下。您可以通过使用 unbound helper 来非常接近，如下所示：

```
<select id="mselect" multiple="multiple">
  {{each option in controller}}
    <option>{{unbound option.txt}}</option>
  {{/each}}
</select> 
```

我在这里发布了部分解决方案：http: [//jsbin.com/uxarij/13/edit](http://jsbin.com/uxarij/13/edit)

# java - Java如何在运行时动态添加类字段

> ID：14443321
> 
> 赞同：3
> 
> 时间：2013-01-21T16:45:27.297
> 
> 标签：java

> **可能重复：**
> [如何将属性动态添加到类](https://stackoverflow.com/questions/14442998/how-to-dynamically-add-properties-to-class)

我想知道他们是否有任何方法可以动态地将字段添加到我的 Java 实体类中，或者他们是否有任何替代方法？我们正在开发一个框架，我们现有的产品有这个要求。

例子：

```
class Entity1 {
    String name;
    String age;

    // Getters/setters;
} 
```

假设我想在我的`Entity1`类中添加另一个字段（例如：）`designation`，他们有什么方法可以动态/在运行时添加它，这样如果我的客户要求我添加任何其他属性，我可以用更少的代码更改来做到这一点？

等待你的回复。欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:54:31.200

您可以使用 javaassist 来执行此操作 - hibernate 将其用于许多很酷的功能。

[这](http://www.javassist.org/tutorial/tutorial2.html#add)应该可以帮助您入门。

您甚至可以使用 groovy 来实现这一点，因此这取决于您的偏好以及您可能从问题中省略的任何细节。

# ios - 如何将plist项目输出到数组中

> ID：14443322
> 
> 赞同：1
> 
> 时间：2013-01-21T16:45:46.243
> 
> 标签：ios, objective-c, plist

我正在尝试从以下 plist 输出结果，其中检查为 1（检查为来自 plist 的 BOOL）。我遇到的问题是，当我尝试将文本输出到 providersArray 中时，它会一个接一个地输出它们，而不是像“text1，text2，text3”这样的一个数组......

我的语法导致了我的问题。任何帮助都会很棒。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Providers" ofType:@"plist"];
dataArray = [NSMutableArray arrayWithContentsOfFile:path];
for (NSDictionary *dictionary in dataArray)
{
    text = [dictionary valueForKey:@"text"];
    checked = [dictionary valueForKey:@"checked"];
    NSLog(@"%@ checked value is: %@", text, checked);

    if ([checked boolValue]) {
        NSString *providers = [NSString stringWithFormat:@"%@",text ];
        NSLog(@"providers are %@", providers);

       NSArray *providersArray = [text componentsSeparatedByString:@","];

      NSLog(@"providersArray are %@", providersArray);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:49:57.807

放置`NSArray *providersArray`在循环之外。

为防止它一次又一次地被初始化并丢失其先前的值，请使用`addObject:`它。

# xslt - xslt 排列添加逗号和“和”

> ID：14443329
> 
> 赞同：0
> 
> 时间：2013-01-21T16:46:08.477
> 
> 标签：xslt, permutation, combinations

我将重新表述整个问题，因为我几乎有了解决方案，而且我的问题构建得很糟糕：

我有代码：

```
<xsl:for-each select="documentarycredits/documentarycreditdata">
    <xsl:if test="tradetypes/option[@id='tradefinguar']='selected'">Trade Finance Guarantee</xsl:if>
    <xsl:if test="tradetypes/option[@id='tradefinstand']='selected'">Trade Finance Standby Letters of Credit serving as Financial Guarantees</xsl:if>
    <xsl:if test="tradetypes/option[@id='tradefindoc']='selected'">Trade Finance Documentary Credits</xsl:if>
    <xsl:if test="position()!=last()">
    <xsl:text>, </xsl:text>
    </xsl:if>
    <xsl:if test="position()=last()-1">
        <xsl:text> and </xsl:text>
    </xsl:if>
    <xsl:if test="position()=last()">
        <xsl:text></xsl:text>
    </xsl:if>
 </xsl:for-each> 
```

除了具有 ', and' 例如 'A, and B' 之外，它似乎运作良好。

理想情况下，我想要 A 和 B，其他任何东西都可以有 EG A、B、C 和 F

即使我有 20 个值的下拉列表，我也想应用相同的值。

谢谢

编辑评论 JLRish & Tim C 答案：

```
 <tradetypes>
            <option id="tradefinguar">selected</option>
            <option id="tradefinstand"/>
            <option id="tradefindoc"/>
        </tradetypes> 
```

有许多单独的 xslt 屏幕，因此可以选择上述三个以上的屏幕，这将导致倍数，例如 A、A、B、C、A 和 B，但理想情况下我希望它知道是否有被选中已经只生产一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:23:40.183

你可以做的是让我们进行模板匹配。首先选择已选择的**选项元素**

```
<xsl:apply-templates select="tradetypes/option[. = 'selected']"/> 
```

然后你有一个匹配**选项**元素的模板，你首先根据位置输出逗号或“和”

```
 <xsl:choose>
     <xsl:when test="position() &gt; 1 and position() = last()"> and </xsl:when>
     <xsl:when test="position() &gt; 1">,</xsl:when>
  </xsl:choose> 
```

什么时候，你有一个简单的**xsl：选择**输出 A、B 或 C

```
 <xsl:choose>
     <xsl:when test="@id='tradefinguar'">A</xsl:when>
     <xsl:when test="@id='tradefinstand'">B</xsl:when>
     <xsl:when test="@id='tradefindoc'">C</xsl:when>
  </xsl:choose> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <xsl:apply-templates select="tradetypes/option[. = 'selected']"/>
   </xsl:template>

   <xsl:template match="option">
      <xsl:choose>
         <xsl:when test="position() &gt; 1 and position() = last()"> and </xsl:when>
         <xsl:when test="position() &gt; 1">,</xsl:when>
      </xsl:choose>
      <xsl:choose>
         <xsl:when test="@id='tradefinguar'">A</xsl:when>
         <xsl:when test="@id='tradefinstand'">B</xsl:when>
         <xsl:when test="@id='tradefindoc'">C</xsl:when>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

在以下 XML 上使用时，输出为`A`

```
<tradetypes>
   <option id="tradefinguar">selected</option>
   <option id="tradefinstand"/>
   <option id="tradefindoc"/>
</tradetypes> 
```

在以下 XML 上使用时，输出为`A and B`

```
<tradetypes>
   <option id="tradefinguar">selected</option>
   <option id="tradefinstand">selected</option>
   <option id="tradefindoc"/>
</tradetypes> 
```

在以下 XML 上使用时，输出为`A, B and C`

```
<tradetypes>
   <option id="tradefinguar">selected</option>
   <option id="tradefinstand">selected</option>
   <option id="tradefindoc">selected</option>
</tradetypes> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:52:11.507

离开您更新的 XSLT，我认为以下更改会做到这一点：

```
 <xsl:for-each select="documentarycredits/documentarycreditdata">
    <xsl:for-each select="tradetypes/option[. = 'selected']">
      <xsl:if test="@id='tradefinguar'">Trade Finance Guarantee</xsl:if>
      <xsl:if test="@id='tradefinstand'">Trade Finance Standby Letters of Credit serving as Financial Guarantees</xsl:if>
      <xsl:if test="@id='tradefindoc'">Trade Finance Documentary Credits</xsl:if>
      <xsl:choose>
        <xsl:when test="position() + 1 = last()">
          <xsl:text> and </xsl:text>
        </xsl:when>
        <xsl:when test="last() > 1 and position() != last()">
          <xsl:text>, </xsl:text>
        </xsl:when>
      </xsl:choose>
    </xsl:for-each>
  </xsl:for-each> 
```

# java - 获取 MongoDB 当前集合名称

> ID：14443331
> 
> 赞同：2
> 
> 时间：2013-01-21T16:46:18.533
> 
> 标签：java, spring, mongodb, spring-data, nosql

我正在使用 mongoDB + Java + SpringData。是否可以获得当前收藏，没有它的名字？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:21:23.697

这是我的解决方案（Java + SpringData）。

```
@Autowired
    private MongoTemplate mongoTemplate;    
DBCollection collection = mongoTemplate.getCollection(mongoTemplate.getCollectionName(MyDocument.class))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:22:19.093

如果您想`DBCollection`直接与您交互，您应该通过`CollectionCallback<T>`界面进行交互并像这样使用它：

```
mongoTemplate.execute(new CollectionCallback<Void>() {
  public Void doInCollection(DBCollection collection) throws MongoException {
    // Implement your code here
  }
}); 
```

使用回调的好处是，您`MongoException`可能会从您自己的代码中抛出 s，并将其转换为 Spring 的`DataAccessException`层次结构。

# android - 我必须在 onStop() 触发时保留活动数据吗？

> ID：14443332
> 
> 赞同：2
> 
> 时间：2013-01-21T16:46:21.577
> 
> 标签：android, android-activity, android-lifecycle

我发现有关[Activity 生命周期](http://developer.android.com/training/basics/activity-lifecycle/stopping.html)的官方文档不清楚。它充满了诸如*应该*和*可能*之类的词，这让我想知道我*必须*做什么。当谈到 onStop() 方法时，文档说明如下：

> 注意：由于系统在停止时会将您的 Activity 实例保留在系统内存中，因此您可能根本不需要实现 onStop() 和 onRestart()（甚至 onStart() 方法。

有*可能*吗？我是还是不是？假设我有一些自定义组件，它们依赖于在 Activity 类中定义为私有变量的一些标准 Java 对象。我是否需要在 onStop 方法中保留这些对象？当 onRestart() 触发时，我可以*保证*这些变量具有相同的内容吗？

编辑：[链接到](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)答案中提到的表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:51:52.613

对于您的具体问题，您需要考虑概览表中的可*杀死列。*在调用 onPause() 之后，Android（Honeycomb 之前）认为您的 Activity 可终止。因此，如果您需要下一次调用的持久性，并且您想在 Activity 级别上处理它，那么您可以在此处保存您的 Activity 状态。

# c++ - 释放指针后赋值

> ID：14443333
> 
> 赞同：5
> 
> 时间：2013-01-21T16:46:22.280
> 
> 标签：c++, c, pointers

我正在查看“Programming Interviews Exposed”一书中的以下代码：

```
bool deleteStack( Element **stack ){
      Element *next;
      while( *stack ){
            next = (*stack)->next;
            free( *stack );
            *stack = next;
      }
      return true;
} 
```

我对 C++ 或 C 不是很熟悉，所以这可能是一个愚蠢的问题，但是在释放指针后不会给指针赋值会导致问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T16:47:26.630

在您的示例中，`*stack`是一个指针。释放它指向的内存然后将指针分配给一个新变量是非常安全的。

唯一不安全的就是`*stack`在释放它之后取消引用。

```
free( *stack );
next = (*stack)->next; 
```

将是不正确的，因为调用后指向的内存`*stack`具有不可预测的内容（甚至可能不再可供您的进程访问）`free`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:49:11.250

没关系。您实际上并没有“释放指针”这样做：

```
 free( *stack ); 
```

但是您释放了指针指向的一些动态分配的内存`*stack`。当你这样做时：

```
*stack = next; 
```

您使指针指向不同的内存块，仅此而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:56:56.813

这样做是安全的。当你看到类似的东西时，`(*stack)`你可以把它想象成“堆栈指向”。由于`free`期望指向内存位置的指针，因此您正在从进程虚拟内存中释放堆栈指向的“内存插槽”。这意味着内存地址（即指针）的空间仍然可用，您可以重新使用它。
另外，我认为这可能很有用，当您使用箭头符号时，`->`您在 C/C++ 中使用了两种不同的符号，简化了它的常用用途。所以，这：`stack->next`与此相同：`(*stack).next` 祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:24:03.403

释放后分配`NULL`给指针变量只是为了在代码中保留一个提示，以识别释放的地址是否发生取消引用。

如果我们不将 NULL 分配给已释放的指针，则如果我们取消对已释放指针变量的引用，则行为是未定义的（崩溃的 50% 机会和堆损坏的剩余机会）。但是如果`NULL`设置它肯定会崩溃。如果堆损坏，则很难识别错误而不是在一个地方崩溃。

请不要认为释放的指针永远不会在您的代码中被取消。如果一个项目维护了很长时间，那么就有可能错误地添加（或修改）代码。

# c++ - 如何将 pragma weak 与命名空间函数一起使用？

> ID：14443336
> 
> 赞同：1
> 
> 时间：2013-01-21T16:46:33.887
> 
> 标签：c++, gcc, pragma

这有效：

`test1.h`

```
namespace funcs {
  extern "C" {
    void a();
    void b();
    void c();
  }
} 
```

`test1.cpp`

```
namespace funcs {
  void (*all[])() = {a, b, c};
}
extern "C" void hang() {
  while (true);
}

#pragma weak a = hang
#pragma weak b = hang
#pragma weak c = hang 
```

* * *

但这不会：

`test1.h`

```
namespace funcs {
    void a();
    void b();
    void c();
} 
```

`test1.cpp`

```
namespace funcs {
  void (*all[])() = {a, b, c};
}
void hang() {
  while (true);
}

#pragma weak funcs::a = hang
#pragma weak funcs::b = hang
#pragma weak funcs::c = hang 
```

我认为这是由于`#pragma weak`需要损坏的名称。有什么办法可以让编译器（GCC 4.7.3）为我发出损坏的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:17:33.353

在 g++ 中没有稳定的解构方法，原因是，即使在不同的 g++ 版本之间，修饰规则也不能移植。

此外，`#pragma weak`是 C 扩展名（在`gcc/c-family/c-pragma.c`文件中声明）并且通常不适用于 C++

在 GCC 开发方面，正确的解决方案是为类似的东西提供代码`#pragma cpp-weak`并提交给 gcc，但这似乎是一个相当复杂的任务。您可以在 GCC bugzilla 中提出改进请求，可能有人会提供帮助。

您可能还想自己为 C++ 函数声明汇编器标签，并为它们进行弱引用，例如：

```
namespace funcs {
    void a()  __asm__("mya");
    void b()  __asm__("myb");
    void c()  __asm__("myc");
}

namespace funcs {
  void (*all[])() = {a, b, c};
}

extern void hang() __asm__("myhang");
void hang() {
  while (true);
}

#pragma weak mya = myhang
#pragma weak myb = myhang
#pragma weak myc = myhang 
```

但我不确定它对你来说更好，然后是“extern C”规范。

# asp.net - ASP.Net 会话状态的 AppFabric 缓存提供程序是否允许后备存储？

> ID：14443344
> 
> 赞同：0
> 
> 时间：2013-01-21T16:46:52.013
> 
> 标签：asp.net, .net, appfabric-cache

如果缓存集群节点存在 RAM 压力，或者集群未处于高可用性模式并且节点丢失（例如失败或重新启动），AppFabric 缓存可能会丢失会话状态。

通常，在这些情况下将使用后备存储以允许在缓存未命中的情况下重新创建缓存条目（毕竟它是缓存）。AppFabric Cache ASP.NET 会话状态提供程序是否允许后备存储，例如通过在传统会话状态提供程序之一之上形成一个层？（例如 ASP.NET 状态服务或基于 SQL Server 的提供程序）。

笔记。

配置文档中没有提到这样的事情：

*   [配置 ASP.NET 会话状态提供程序（Windows Server AppFabric 缓存）](http://msdn.microsoft.com/en-us/library/ee790859%28v=azure.10%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:07:11.280

正如您所说，AppFabric 会话提供者不知道这个概念，因为 AppFabric 基本上是一个分布式内存缓存集群。您可以通过 Read-Through 和 Write-Behind 实现持久性，但不能用于会话。

您最好的选择是正确[规划](http://msdn.microsoft.com/en-us/library/hh334304%28v=azure.10%29.aspx)您的缓存使用情况并主动[监控](http://msdn.microsoft.com/en-us/library/ff921021.aspx)集群。

# java - 从数据库中删除特定值

> ID：14443353
> 
> 赞同：0
> 
> 时间：2013-01-21T16:47:24.680
> 
> 标签：java, sql, jdbc

我正在尝试从我的数据库中删除一些数据，我需要有关我的 SQL 的帮助。基本上这是我想在我的 Java 代码中得到的结果：

```
DELETE FROM Table1 WHERE name = '***specific value from combobox***' 
```

使用 INSERT 我这样做了：

```
String sql = "INSERT INTO Table2 (name) values (?)";
pst = conn.prepareStatement(sql);
String name = ComboBox.getSelectedItem().toString();
pst.setString(1, name); 
```

现在我想使用 DELETE 而不是插入，如下所示：

```
String sql = "DELETE FROM Table1 WHERE name =  values (?)";
pst = conn.prepareStatement(sql);
String name = ComboBox.getSelectedItem().toString();
pst.setString(1, name); 
```

我需要有关 SQL 字符串的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:49:17.690

您需要更新此行。

```
String sql = "DELETE FROM Table1 WHERE name = ?"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:49:38.627

尝试将删除 SQL 更改为：

```
String sql = "DELETE FROM Table1 WHERE name = ?"; 
```

“值”`INSERT`仅是语句的一部分，您在其中声明将插入的行的值。`DELETE`语句中不需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:50:08.537

```
 String sql = "DELETE FROM Table1 WHERE name = ?"; 
```

# ruby-on-rails - 在 Rails 命名空间控制器中调用 form_for 时无法解决“ArgumentError: Missing block”

> ID：14443356
> 
> 赞同：4
> 
> 时间：2013-01-21T16:47:48.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, actionview

在应用程序的管理面板中，应该引入了一个新表单。我想使用[RoR Guide](http://guides.rubyonrails.org/form_helpers.html#relying-on-record-identification)中描述的*2.3 Relying on Record Identification*，但是如果我说

```
form_for(@product) 
```

或者

```
form_for [:backend, @product] 
```

它抛出一个`ArgumentError: Missing block`. 这是用于后端新功能，控制器`controller/backend/product_controller`通过

```
 def new
   @product = Product.new
end 
```

我做错什么了？为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:50:48.440

您需要将 do 块传递给 form_for：（请参阅文档：[http](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html) ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html ）

例如：

```
<%= form_for(@product) do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  <%= f.submit %>
<% end %> 
```

# javascript - Javascript中的原始类型/引用类型

> ID：14443357
> 
> 赞同：12
> 
> 时间：2013-01-21T16:48:07.643
> 
> 标签：javascript

我一直假设 Javascript 中有原始类型和引用类型。在日常的基础上，我从来没有对我产生过这种影响，但我刚刚开始使用更多的 JS，并想更新我的“想法”。换句话说，我会下注 20 美元，以下将返回 68

```
var my_obj = {};
var tmp_obj = {};

tmp_obj.my_int = 38;
my_obj.tmp_val = tmp_obj.my_int;
tmp_obj.my_int = 68;

alert('68 means reference, 38 means primitve: ' + my_obj.tmp_val); 
```

但它返回 38。

![在此处输入图像描述](../Images/746c176f64a8ba0ff199b8e2c0e6e9a6.png)

即使数字类型的所有实例都存在于引用类型的上下文中，它们是否都是原始类型？如果是的话，我真的很惊讶并发现这种奇怪的行为（并且会损失 20 美元）。还是我的例子没有展示我的想法？

提前谢谢

**更新#1**

哇，谢谢所有的答案。这是一个微小的变化，对我理解有很大帮助：

```
var my_obj={};
var tmp_obj={};
var my_obj_2=tmp_obj;
tmp_obj.my_int=38;
my_obj.tmp_val=tmp_obj.my_int;
tmp_obj.my_int=68
alert('68 means reference, 38 means primitve: ' + my_obj.tmp_val);   // 38
alert('68 means reference, 38 means primitve: ' + my_obj_2.my_int);  // 68
my_obj_2.my_int=78;
alert(tmp_obj.my_int); // tmp_obj is now 78 ie two way 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:55:57.067

如果您有，您的示例将按预期工作

```
 my_obj = tmp_obj; 
```

然后，所有属性都将指向同一个引用，因为只有一个对象。

但是当你写

```
 my_obj.tmp_val = tmp_obj.my_int; 
```

然后`my_obj.tmp_val`将采用存储在`tmp_obj.my_int`其中但不会在 2 个对象之间创建新引用的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T16:56:23.077

如果我可以使用类似 Java 的语法，您似乎希望代码表现得像这样，其中有一个整数对象的值发生了变异。

```
tmp_obj.my_int = new Integer(38);
my_obj.tmp_val = tmp_obj.my_int;
tmp_obj.my_int.setValue(68); 
```

由于它不打印，因此`68`您得出结论整数必须是原始类型而不是引用类型。不过，这不一定遵循。考虑这种替代解释：

```
tmp_obj.my_int = new Integer(38);
my_obj.tmp_val = tmp_obj.my_int;
tmp_obj.my_int = new Integer(68); 
```

这里整数是引用类型，但`my_obj.tmp_val`仍将包含 value `38`，因为分配给整数意味着覆盖引用。

您可以将整数视为不可变对象。JavaScript 在呈现统一的“一切皆为对象”视图方面做得非常好，因此这比“整数是原始类型”更好地解释了结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T17:00:25.130

是的，像数字和字符串这样的值就像原始值一样工作。它们是不可变的。为变量分配新值会替换旧值，它不会更改那里的值。

例子：

```
var x = 42;
var y = x; // y == 42
x = 1337; // this puts a new value in x, it doesn't change 42 to be 1337
alert(y); // it's still 42 
```

同样适用于字符串：

```
var x = "42";
var y = x; // y == "42"
x = "1337"; // this puts a new string in x, it doesn't change "42" to be "1337"
alert(y); // it's still "42" 
```

另外，如果您使用对象属性；

```
var o = {};
o.x = 42;
o.y = o.x; // o.y == 42
o.x = 1337; // this puts a new value in o.x, it doesn't change 42 to be 1337
alert(o.y); // it's still 42 
```

值的行为方式仅取决于其类型，而不是存储在常规变量中还是对象的属性中。

即使字符串在内部实现为对象，它也是不可变的并且作为值工作。复制字符串可能会复制对对象的引用，但效果是您获得了单独的副本，因为没有任何东西可以更改字符串值本身。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T16:56:10.543

> 我一直假设 Javascript 中有原始类型和引用类型。

确实如此。但是，唯一的参考值是对象；原始值是不可变的。

> 即使数字类型的所有实例都存在于引用类型的上下文中，它们是否都是原始类型？

是的。他们的背景是不相关的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T17:04:10.313

我相信这里有两个关键的事情要理解：

1.  原始值永远不是引用
2.  JavaScript 引用永远不能被分配，只能被复制。

考虑这段代码来演示第一点：

```
var a = 10,
    b = a,
    c = {foo : 20}
    d = c.foo;

b = 20;
d = 30;
a;     // 10;
c.foo; // 20; 
```

所以，你有“槽”（变量或属性）保存原始值，而不是引用。更改其中一个插槽中的值不会影响其他插槽。

考虑第二点：

```
var a = {foo: true},
    b = a;
b.foo; // true
b.foo = false;
a.foo; // false;
b = {bar: false};
a;     // {foo: false} 
```

变量`a`包含一个对象，并且`b`最初是*对同一对象*的引用。分配给`b.foo`影响`a`，因为`b`和`a`指向完全相同的对象。但是，这些引用就像存储在给定插槽中的任何其他值一样：当您将其他内容分配给插槽时，引用只是被替换为不同的值。所以分配给`b`不会影响`a`.

# c# - 如何在 HTMLTEXTWRITER 中使用 .Net 控件

> ID：14443363
> 
> 赞同：1
> 
> 时间：2013-01-21T16:48:25.743
> 
> 标签：c#, asp.net, sharepoint-2010, htmltextwriter

下面提到的代码是我在 sharepoint 2010 上的 webpart 的一部分。

```
public class class1 : System.Web.UI.WebControls.WebParts.WebPart
    { 
protected override void Render(HtmlTextWriter writer)
        {
            string s1 = "first";
            string s2 = "second";
            string s3 = "third";

            slist.Add("first");
            slist.Add("second");
            LinkButton b;

            writer.Write("<div id='tblSegment' ><table >");
            foreach (string s in slist)
            {
                //b = new LinkButton();
                //b.Text = s;
                //b.Click += (sender1, e1) => { b_Click(sender, e, s1, s2, s3); };
                writer.Write("<tr><td >");
                writer.Write("<a href=''  >");
                writer.Write(s + "</a>");
                writer.Write("</td></tr>");
            }
            writer.Write("</table></div>");
        }
        void b_Click(object sender, EventArgs e, string s1, string s2, string s3)
        {
            UpdateList(s1,s2,s3);
        }
    public void UpdateList(string ID, string column, string value)
        {
            using (SPSite oSPsite = new SPSite("http://server"))
            {
                using (SPWeb oSPWeb = oSPsite.OpenWeb())
                {
                    oSPWeb.AllowUnsafeUpdates = true;
                    // Fetch the List
                    SPList list = oSPWeb.Lists["UserProfiles"];
                    //create Query
                    SPQuery query = new SPQuery();
                    query.Query = string.Concat(
                                   "<Where><Eq>",
                                      "<FieldRef Name='ID'/>",
                                      "<Value Type='String'>" + ID + "</Value>",
                                   "</Eq></Where>");
                    //get List Item
                    SPListItemCollection listItems = list.GetItems(query);
                    SPListItem item = listItems[0];

                    //update List Item
                    item[column] = value;
                    item.Update();
                    oSPWeb.AllowUnsafeUpdates = false;
                }
            }
        }
} 
```

我有点卡在这里，我需要做的是根据一些值（s1，s2，s3）更新共享点列表项，为此我创建了方法 UpdateList。每当单击任何超链接时，我都需要调用 UpdateList 方法。我尝试使用链接按钮，但正如预期的那样，它们无法与 htmltextwriter 一起使用（已评论），因此我添加了两个简单的锚标记。但是现在如何触发点击事件。

我阅读了有关 system.web.services 的信息，但无法使其正常工作。我现在能想到的唯一选择是创建一个单独的 Web 服务，其中包含`UpdateList`某种方法，并对其进行 ajax 调用。

任何人都可以提出其他建议吗，或者是否可以将 ASP.Net colrols（例如 LinkBut​​ton）与`Htmltextwriter`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:54:01.040

好的，首先使用 OnLoad 事件而不是 Render。

您需要做的是将 LinkBut​​ton 添加到 Controls 属性。

您会发现很难让您的超链接直接调用 updatelist 而无需手动编码回发事件。

编辑这对我有用：

```
List<string> slist = new List<string>();
        protected void Page_Load(object sender, EventArgs e)
        {
            string s1 = "first";
            string s2 = "second";
            string s3 = "third";

            slist.Add("first");
            slist.Add("second");
            LinkButton b;

            foreach (string s in slist)
            {
                b = new LinkButton();
                b.Text = s;
                b.Click += (sender1, e1) => { b_Click(sender, e, s1, s2, s3); };

                this.Form.Controls.Add(b);
                this.Form.Controls.Add(new LiteralControl("<br/>"));
            }
        }

        void b_Click(object sender, EventArgs e, string s1, string s2, string s3)
        {
            UpdateList(s1, s2, s3);
        }

        public void UpdateList(string ID, string column, string value)
        {
            // ... enter code here

        }
    } 
```

将 Page_Load 替换为您的控件的加载事件，您需要将 this.Form.Controls 替换为 this.controls。您也可以使用文字控件来代替在链接之间留出空格而不是换行符。

# android - 无法获取要在 MonoDroid 中调用的 listView.ItemClick

> ID：14443364
> 
> 赞同：1
> 
> 时间：2013-01-21T16:48:30.210
> 
> 标签：android, mono, android-listview, xamarin.android

我有以下代码：

```
protected override void OnCreate (Bundle bundle)
{
    progress = ProgressDialog.Show(this, "", "Loading...");
    progress.SetProgressStyle(ProgressDialogStyle.Spinner);

    base.OnCreate (bundle);

    //Set the Activity's view to our list layout        
    SetContentView(Resource.Layout.LawsAndRegsList);

    new Thread(new ThreadStart(() => {
        //Create our adapter
        listAdapter = new LawsAndRegsListAdapter(this);
        this.RunOnUiThread ( () => {
            //Find the listview reference
            listView = FindViewById<ListView>(Resource.Id.listView);

            //Hook up our adapter to our ListView
            listView.Adapter = listAdapter;

            //Wire up the click event
            //listView.ItemClick += new EventHandler<ListView.ItemClickEventArgs>(listView_ItemClick);
            listView.ItemClick += listView_ItemClick;

            listAdapter.NotifyDataSetChanged(); 

            progress.Dismiss();
        });
    })).Start();
}

void listView_ItemClick(object sender, AdapterView.ItemClickEventArgs e)
{
    //Get our item from the list adapter
    var item = this.listAdapter.GetItemAtPosition(e.Position);

    //Make a toast with the item name just to show it was clicked
    Toast.MakeText(this, item.Name + " Clicked!", ToastLength.Short).Show();
} 
```

谁能告诉我为什么 ItemClick 不会被调用？

它看起来像我读过的和我看过的例子，所以我做错了什么？谢谢您的帮助。

更新：

这是我的两种布局：

法律和法规清单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget28"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/topLevelMenuBackground"
        android:orientation="horizontal">
        <Button
            android:id="@+id/btnAddExpense"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/ButtonHome"
            android:layout_centerVertical="true" />
        <TextView
            android:id="@+id/lblExpenseCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="15dp"
            android:text="@string/LawsAndRegs"
            android:textColor="#ffffffff"
            android:textSize="20sp"
            android:layout_centerVertical="true" />
    </RelativeLayout>
    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

LawsAndRegsListItem：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget28"
    android:layout_width="fill_parent"
    android:background="@drawable/topLevelMenuCellBackground"
    android:layout_height="40px">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <ImageView
            android:id="@+id/imageItem"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_centerVertical="true"
            android:layout_gravity="center_vertical" />
        <TextView
            android:id="@+id/textTop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:textColor="#111479"
            android:text="hello"
            android:layout_toRightOf="@+id/imageItem"
            android:textStyle="bold"
            android:layout_marginLeft="10dp" />
        <ImageButton
            android:src="@drawable/OrangeAccessoryButton"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="15dp"
            android:layout_centerVertical="true"
            android:id="@+id/imageButton1"
            android:background="@android:color/transparent" />
    </RelativeLayout>
</LinearLayout> 
```

更新#2：

添加了我的 LIstAdapter 代码：

公共类 LawsAndRegsListAdapter : BaseAdapter { 活动上下文；

```
public List<LawsAndRegs> items;

public LawsAndRegsListAdapter (Activity context) //We need a context to inflate our row view from
{
    this.context = context;

    MY_SEB_SERVICE_ContentWS.ContentWS contentWS = new MY_WEB_SERVICE_ContentWS.ContentWS ();
    string sMenu = contentWS.GetMenuXML (146, 1, "", 0, 1033);

    XmlRootAttribute r = new XmlRootAttribute ("Item");
    var ser = new XmlSerializer (typeof(Item), r);
    StringReader stringReader;
    stringReader = new StringReader (sMenu);
    Item obj = (Item)ser.Deserialize (stringReader);
    ItemMenuItem[] m = obj.Menu.Item;
    ItemMenuItem larMenu = null;
    foreach (ItemMenuItem mnu in m)
    {
        if (mnu.ItemID == 155)
        {
            if (this.items == null)
                this.items = new List<LawsAndRegs> ();
            larMenu = mnu;
            break;
        }
    }

    if (larMenu != null)
    {
        foreach (ItemMenuItemMenuItem imimi in larMenu.Menu.Item)
        {
            LawsAndRegs lar = new LawsAndRegs();
            lar.Name = (string)imimi.Items[2];
            lar.Image = (string)imimi.Items[3];
            this.items.Add (lar);
        }
    }
}

public override int Count
{
    get { return items.Count; }
}

public override Java.Lang.Object GetItem(int position)
{
    return position;
}

public override long GetItemId(int position)
{
    return position;
}

public LawsAndRegs GetItemAtPosition(int position)
{
    return items[position];
}

public override View GetView(int position, View convertView, ViewGroup parent)
{
    //Get our object for this position
    var item = items[position];         

    //Try to reuse convertView if it's not  null, otherwise inflate it from our item layout
    // This gives us some performance gains by not always inflating a new view
    // This will sound familiar to MonoTouch developers with UITableViewCell.DequeueReusableCell()
    var view = (convertView ?? context.LayoutInflater.Inflate(Resource.Layout.LawsAndRegsListItem, parent, false)) as LinearLayout;

    //Find references to each subview in the list item's view
    ImageView imgView = (ImageView)view.FindViewById(Resource.Id.imageItem);
    imgView.Clickable = true;
    TextView textTop = (TextView)view.FindViewById(Resource.Id.textTop);
    textTop.Clickable = true;

    var bm = BitmapFactory.DecodeStream(
        new Java.Net.URL("http://www.SOME_SITE.com/" + item.Image).OpenStream());
    imgView.SetImageBitmap(bm);

    //Assign this item's values to the various subviews
    textTop.SetText(item.Name, TextView.BufferType.Normal);

    view.Clickable = true;

    //Finally return the view
    return view;
} 
```

}

我添加了 view.clickable 代码以尝试使其正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T17:09:49.827

最后！！我发现了我的问题......原来问题是我在 ListView 中的 ImageButton。它正在窃取焦点并消耗触摸事件。因此，在我的自定义适配器中，在 GetView 中，我需要执行以下操作：

```
var imageButton = view.FindViewById<ImageButton>(Resource.Id.imageButton1);
imageButton.Focusable = false;
imageButton.FocusableInTouchMode = false;
imageButton.Clickable = true;

imageButton.Click += (sender, args) => Console.WriteLine("ImageButton {0} clicked", position); 
```

这会从图像按钮中移除焦点。解决方案在这里给了我：[http ://forums.xamarin.com/discussion/871/how-do-i-get-itemclick-of-a-listview-to-get-called-not-sure-what-错误](http://forums.xamarin.com/discussion/871/how-do-i-get-itemclick-of-a-listview-to-get-called-not-sure-what-have-wrong#latest)的#latest by Cheesebaron。谢谢芝士男爵！！！

我希望这可以帮助另一个有类似问题的新手！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T19:26:44.187

放入`android:descendantFocusability="blocksDescendants"`您的 LawsAndRegsListItem 线性布局，因为 Android 不允许任何项目在列表视图中成为焦点。与其将列表视图中的每个控件设置为`android:focusable="false"`，最简单的方法是将其根设置`ViewGroup`为`android:descendantFocusability="blocksDescendants"`，因此它将阻止它的每个控件获得焦点。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget28"
    android:layout_width="fill_parent"
    android:background="@drawable/topLevelMenuCellBackground"
    android:layout_height="40px"
    android:descendantFocusability="blocksDescendants">
    ...
</LinearLayout> 
```

另外，不要将`LinearLayout`'s设置`Clickable`为`true`. 如果是这样，即使它的孩子不会获得焦点，它也会获得焦点，因此列表视图将阻止任何点击事件。

参考：

[ListView 提示和技巧#4：添加几个可点击区域](http://android.cyrilmottier.com/?p=525)

[关于descendantFocusability 的Android 文档](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android:descendantFocusability)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T15:25:48.770

我还设法通过在 adapter::GetView 函数中设置“view.Click”处理程序来解决这个问题。似乎也可以。

```
public class TaskListAdapter : BaseAdapter<Task> {
    Activity context = null;
    IList<Task> tasks = new List<Task>();

    public TaskListAdapter (Activity context, IList<Task> tasks) : base ()
    {
        this.context = context;
        this.tasks = tasks;
    }

    [...]

    public override Android.Views.View GetView (int position, Android.Views.View convertView, Android.Views.ViewGroup parent)
    {

        var view = (convertView ??
            context.LayoutInflater.Inflate(...));
        view.FindViewById<..>(Resource.Id.NameText).SetText ("...", TextView.BufferType.Normal);

        view.Click += (sender, e) => 
        {
            int a=0;
            a++; //breakpoint location is being hit.

        };
        return view;
    }
}
} 
```

# android - 使我的按钮样式像 AlertDialog 按钮样式

> ID：14443373
> 
> 赞同：14
> 
> 时间：2013-01-21T16:49:00.777
> 
> 标签：android

我想让我的按钮样式如下 ![在此处输入图像描述](../Images/17c9626ef1deffbea336a1f0faa18bbe.png)

我想用我的自定义视图来实现这些按钮，我的意思是不使用 AlertDialog

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-08-19T21:19:58.557

如果您更喜欢使用标准的 android 属性，请[在此处](https://stackoverflow.com/questions/5735423/alertdialog-style-buttons-for-an-activity/18321501#18321501)查看我的答案。

简而言之，为您的按钮设置`style="?android:attr/buttonBarButtonStyle"`并将它们放在一个`LinearLayout`具有`style="?android:attr/buttonBarStyle"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:44:28.593

您可以使用 xml 来执行此操作，如下所示：

把它放在 drawable/border.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#000000" />
   <stroke android:width="1dip" android:color="#333333"/>
</shape> 
```

然后在您的布局文件中：

```
<Button
    ...
    android:background="@drawable/border"
    android:textColor="#ffffff"
    android:textSize="13sp"
    ... /> 
```

然后你可以设置你的宽度和高度，让它看起来很棒！:)

编辑：我建议使用[这个](https://stackoverflow.com/questions/5735423/alertdialog-style-buttons-for-an-activity/18321501#18321501)答案，而不是使用内置的 Android 资源更好。

# android - Android TranslateAnimation 以像素为单位的特定位置

> ID：14443375
> 
> 赞同：3
> 
> 时间：2013-01-21T16:49:00.800
> 
> 标签：android, animation, view

我想要做的是在 PIXELS 中将多个视图设置为特定位置的动画！我为此使用了 TranslateAnimation。我想从显示器的左上角动画，我相信 x: 0 和 y:0 到一个可变位置。

```
 private void drawGameField() {

            TextView [] tvs = new TextView[10];

            for(int i = 0; i < tvs.length; i++) {

                tvs[i] = new TextView(this);
                tvs[i].setX(i * 50);
                tvs[i].setY(i * 50);
                tvs[i].setText(i + "");

                gamelayout.addView(tvs[i]); // relativelayout that is created in the onCreate method
                animateObject(1000, tvs[i], 0, (int) tvs[i].getX(), 0, (int) tvs[i].getY());                
            }
        }

        private void animateObject(int time, TextView tv, int fromDeltaX, int toDeltaX, int fromDeltaY, int toDeltaY) {

            Log.i("Animation", "Animating to: x: " + toDeltaX + ", y: " + toDeltaY);
            TranslateAnimation t = new TranslateAnimation(fromDeltaX, toDeltaX, 
                                                            fromDeltaY, toDeltaY);

            t.setDuration(time);
            tv.startAnimation(t);   
        } 
```

**我的问题是，动画只是没有做它应该做的事情（动画动画的像素与我的输入不匹配），为什么？我究竟做错了什么？**

如您在 animateObject 方法中所见，我的 Logcat 输出完全正确，像素符合我的要求。

LogCat 输出如下：

```
Animation  Animating to: x: 0, y: 0 
Animation  Animating to: x: 50, y: 50 
Animation  Animating to: x: 100, y: 100 
Animation  Animating to: x: 150, y: 150 
Animation  Animating to: x: 200, y: 200 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T16:31:04.220

我通过使用**ViewPropertyAnimator**解决了这个问题。

**translationX(...) 和 translationY(...)**方法完全符合我的愿望。

# php - Silverstripe 限制上传

> ID：14443384
> 
> 赞同：2
> 
> 时间：2013-01-21T16:49:11.070
> 
> 标签：php, image, silverstripe

我正在使用 ImageDataObjectManager 来处理上传我的图像。我想限制上传多个图像的能力。目前我有：

```
$bannerManager = new ImageDataObjectManager(
    $this,
    'CustomBanner',
    'CustomBanner',
    'Banner', 
    array(
    ),
    'getCMSFields_forPopup'
);

$bannerManager->setUploadLimit(1); 
```

这会限制上传，直到我保存页面。然后它允许我添加另一个我不喜欢的图像。

任何人都可以帮忙吗？

编辑：我设法从弹出窗口中删除了上传者：

```
 if($this->CustomBanners()->Count() >= 1){
        $bannerManager->removePermission('add');
    }
    else{
        $bannerManager->addPermission('add');
    } 
```

但是，这不会隐藏添加按钮。有谁知道如何使添加按钮也隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:33:50.700

尝试使用`FileDataObjectManager`而不是`ImageDataObjectManager`：

```
$bannerManager = new FileDataObjectManager(
    $this,
    'CustomBanner',
    'CustomBanner',
    'Banner', 
    array(
    ),
    'getCMSFields_forPopup'
);

$bannerManager->setUploadLimit(1);

if($this->CustomBanners()->Count() >= 1){
    $bannerManager->removePermission('add');
} 
```

# wpf - WCF 服务中的 CommunicationObjectAbortedException 和 CommunicationObjectFaultedException

> ID：14443390
> 
> 赞同：10
> 
> 时间：2013-01-21T16:49:19.680
> 
> 标签：wpf, wcf, exception, service

我正在开发一个基于发布者订阅者模式的系统。我有一个在 WPF 应用程序中运行的 WCF 服务。有许多客户端连接到该服务。客户端也是WPF。我在下面附上了我的系统的代码片段：

**服务：**

```
[ServiceContract(Namespace = "http://AutoFXProfitsServer", SessionMode = SessionMode.Required, CallbackContract = typeof(ITradeMirrorClientContract))]
    public interface ITradeMirror
    {
        [OperationContract]
        string Subscribe(string userName, string password, int accountID);

        [OperationContract]
        bool Unsubscribe(string userName, string password, int accountID);

        [OperationContract]
        void PublishNewSignal(string signalInformation);
    }

    public interface ITradeMirrorClientContract
    {
        [OperationContract(IsOneWay = true)]
        void NewSignal(string signalInformation);
    }

    public class NewSignalEventArgs : EventArgs
    {
        public string SignalInformation;
    }
.
.
.
.
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, AutomaticSessionShutdown = false)]
public class TradeMirrorService : DependencyObject, ITradeMirror
{
.
.
.
.

public string Subscribe(string userName, string password, int accountID)
    {
        try
        {
            if (AuthenticationSuccessful)
            {
                _callback = OperationContext.Current.GetCallbackChannel<ITradeMirrorClientContract>();
                _newSignalHandler = new NewSignalEventHandler(NewSignalHandler);
                NewSignalEvent -= _newSignalHandler;
                NewSignalEvent += _newSignalHandler;

                string suffixes = GetSuffixes();
                return suffixes;
            }
            else
            {
                return "FAILED";
            }
        }
        catch (Exception exception)
        {
            return "FAILED";
        }
    }

public bool Unsubscribe(string userName, string password, int accountID)
    {
        try
        {
            if (SearchHelper.UnAuthenticateUserCredentials(userName, password, accountID, _helper))
            {
                _callback = OperationContext.Current.GetCallbackChannel<ITradeMirrorClientContract>();
                _newSignalHandler = new NewSignalEventHandler(NewSignalHandler);
                NewSignalEvent -= _newSignalHandler;
                return true;
            }
            else
            {
                return false;
            }
        }
        catch (Exception exception)
        {
            return false;
        }
    }

public void PublishNewSignal(string signalInformation)
    {
        try
        {
            if (HeartBeatMessage())
            {

            }
            else
            {
                _systemOrderID++;

                signalInformation = TransformSignalInformation(signalInformation, _systemOrderID);
            }

            var e = new NewSignalEventArgs {SignalInformation = signalInformation};
            NewSignalEvent(this, e);
        }
        catch (Exception exception)
        {
        }
    } 
```

**还有我的 app.config：**

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding closeTimeout="23:59:59" openTimeout="23:59:59"     receiveTimeout="23:59:59" sendTimeout="23:59:59" transactionFlow="false" transferMode="Buffered" 
             transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="1000" maxBufferPoolSize="524288" maxBufferSize="65536" 
             maxConnections="1000" maxReceivedMessageSize="65536">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          <reliableSession ordered="true" inactivityTimeout="23:59:59" enabled="false"/>
          <security mode="None"/>
        </binding>
      </netTcpBinding>
    </bindings>
    <!--For debugging purposes set the includeExceptionDetailInFaults attribute to true-->
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="false" httpGetUrl="http://95.138.188.232/autofxprofits/service"/>
         <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
  </system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>    </configuration> 
```

该系统可以长时间完美运行，没有任何问题。发生的情况是，由于某种原因（我不确定），服务有时会崩溃，但有以下异常：

CommunicationObjectAbortedException 或 CommunicationObjectFaultedException

```
System.ServiceModel.CommunicationObjectAbortedException: The communication object,  System.ServiceModel.Channels.ServiceChannel, cannot be used for communication because it has  been Aborted.

Server stack trace: 
   at System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrNotOpen()
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at AutoFXProfitsServer.ITradeMirrorClientContract.NewSignal(String signalInformation)
   at AutoFXProfitsServer.TradeMirrorService.NewSignalHandler(Object sender, NewSignalEventArgs e) in D:\Work\Trade Mirror - Kumar\AutoFXToolsTradeMirror\AutoFXProfitsServer\Service.cs:line 232
   at AutoFXProfitsServer.TradeMirrorService.PublishNewSignal(String signalInformation) in D:\Work\Trade Mirror - Kumar\AutoFXToolsTradeMirror\AutoFXProfitsServer\Service.cs:line 171 
```

**或者，**

```
System.ServiceModel.CommunicationObjectFaultedException: The communication object,     System.ServiceModel.Channels.ServiceChannel, cannot be used for communication because it is in the Faulted state.

Server stack trace: 
   at System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrNotOpen()
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at AutoFXProfitsServer.ITradeMirrorClientContract.NewSignal(String signalInformation)
   at AutoFXProfitsServer.TradeMirrorService.NewSignalHandler(Object sender, NewSignalEventArgs e) in D:\Work\Trade Mirror - Kumar\AutoFXToolsTradeMirror\AutoFXProfitsServer\Service.cs:line 235
   at AutoFXProfitsServer.TradeMirrorService.NewSignalEventHandler.Invoke(Object sender, NewSignalEventArgs e)
   at AutoFXProfitsServer.TradeMirrorService.PublishNewSignal(String signalInformation) in D:\Work\Trade Mirror - Kumar\AutoFXToolsTradeMirror\AutoFXProfitsServer\Service.cs:line 174 
```

重申一下，这些异常发生在 PublishNewSignal 方法中。我从所有测试中得出的一个原因是，当客户端异常关闭时会发生这种情况。例如，客户端进程从任务管理器等中关闭。

但是这个问题是一个很大的痛苦，如果不解决这个稳定性问题，我们就无法前进。有没有人知道为什么通信对象出现故障并且服务崩溃？

希望能得到一些积极的反馈。

谢谢。乌梅尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T11:21:08.580

经过一番研究，我自己解决了这个问题。问题是，每当我的客户端在没有正确取消订阅的情况下意外断开连接，并且该服务没有正确处理掉线的客户端。因此，通信对象出现故障。[李对](https://stackoverflow.com/users/152602/lee)[这个问题](https://stackoverflow.com/questions/1427926/detecting-client-death-in-wcf-duplex-contracts)的回答确实帮助我朝着正确的方向思考。然后经过更多研究，我发现[这个讨论](https://stackoverflow.com/questions/4572864/handling-dropped-clients-in-a-duplex-binding-wcf-application)对于解决问题非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T21:01:25.000

根据您所显示的内容，您似乎在启动应用程序时打开了 WCF 通道（创建客户端），然后在应用程序关闭之前不要关闭它。

这种方法有几个问题。您遇到的问题是网络或服务器上的任何中断都会导致通道无法使用。

这样做的方法是，每次您需要进行 WCF 调用时，您打开通道，进行调用，然后关闭通道。

这种方法既提供了更强大的解决方案，也提供了更可扩展的解决方案。

# css - 如何将图像放置在表格顶部，距离表格左边缘-10px？

> ID：14443393
> 
> 赞同：2
> 
> 时间：2013-01-21T16:49:30.497
> 
> 标签：css, image

我想要一种方法来放置一张图片，它在任何浏览器、任何屏幕尺寸上都将显示相同。我需要将图片定位在灰色桌子的顶部，但稍微向左偏移。如果我将图片从左侧偏移一定数量的像素，它会在一个浏览器中正确显示，而不是在另一个浏览器中。请参阅下面的代码。谢谢！

```
<style type="text/css">
<!-- table, td, th {
    padding: 5px;
}
div.table-foreground {
    position:relative;
}
div.table-foreground img {
    position:absolute;
    top:50%;
}
.table1 {
    background-color:white;
    background-repeat:no-repeat;
    color:black;
    text-align: center;
    margin: auto;
    font-family:sans-serif;
    table-layout:fixed;
    width: 960px;
}
.table2 {
    background-color:#daf3fb;
    color:black;
    text-align: left;
    margin:auto;
    font-family:sans-serif;
    table-layout:fixed;
    width: 475px;
}
.table3 {
    background-color:#e8ebed;
    color:black;
    text-align: left;
    margin:auto;
    font-family:Helvetica, sans-serif;
    border: solid 2px white;
    outline: solid 1px gray;
    table-layout:fixed;
    width: 375px;
    height:300px;
}
-->
</style>
<body>
<div class="table-foreground">
    <!--img set to relative.-->
    <img id="img1"
src="http://msadesign.net/sitebuilder/images/Gold_Horizontal_Rectangle3-600x185.jpg"
    style="left:520px;top:100px;" />
</div>
<table class="table1">
    <tr>
        <td>Text 2</td>
        <td>Text 3</td>
    </tr>
    <tr>
        <td>
            <table class="table2">
                <tr>
                    <td>Text 4</td>
                </tr>
                <tr>
                    <td>Text 5</td>
                </tr>
                <tr>
                    <td>Text 6</td>
                </tr>
                <tr>
                    <td>Text 7</td>
                </tr>
            </table>
        </td>
        <td>
            <table class="table3">
                <tr>
                    <td>Text 8</td>
                </tr>
                <tr>
                    <td>Text 9</td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:26:10.857

如果您需要将 img 相对于灰色表格（table3）进行绝对定位，则需要将 img 和表格放在相对定位的 div 中：

演示：http: [//jsfiddle.net/qeB2t/](http://jsfiddle.net/qeB2t/)

```
<table class="table1">
    <tr>
        <td>Text 2</td>
        <td>Text 3</td>
    </tr>
    <tr>
        <td>
            <table class="table2">
                <tr>
                    <td>Text 4</td>
                </tr>
                <tr>
                    <td>Text 5</td>
                </tr>
                <tr>
                    <td>Text 6</td>
                </tr>
                <tr>
                    <td>Text 7</td>
                </tr>
            </table>
        </td>
        <td>
            <div class="table-foreground">
            <img id="img1"
src="http://msadesign.net/sitebuilder/images/Gold_Horizontal_Rectangle3-600x185.jpg"
             />
            <table class="table3">
                <tr>
                    <td>Text 8</td>
                </tr>
                <tr>
                    <td>Text 9</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table> 
```

CSS

```
div.table-foreground img {
    position:absolute;
    top:50px;
    left: 30px;
} 
```

# javascript - 如何使用 RequireJS 确定系统环境变量

> ID：14443395
> 
> 赞同：3
> 
> 时间：2013-01-21T16:49:38.313
> 
> 标签：javascript, requirejs

在过去开发客户端应用程序时，我总是使用某种服务器端应用程序来打包和提供 JavaScript。这使我能够将环境变量传递给在生产环境和开发环境之间变化的客户端。

我正在使用 RequireJS 开发一个纯客户端应用程序，并使用静态 Web 服务器为其提供服务。某些配置会根据应用程序是在本地开发还是在生产中运行（即，它将向其发出 AJAX 请求的服务器的 URL）而有所不同。

使用 RequireJS 确定当前环境的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:01:55.083

我发现的另一种方法是直接使用 RequireJS 配置。从 RequireJS 1.1 开始，可以包含任意配置值。在我的主要配置中，我设置`env: 'development`了 ' 并在构建期间（使用 r.js）我将值设置为`'production'`.

我创建了一个`config`包含两个文件的目录：`development.js`和`production.js`. 加载正确的文件可以使用 Require 插件（我们称之为`env`）：

```
define(function() {

    return {
        load: function(name, req, load, config) {
            if (!config.env || config.isBuild) {
                config.env = 'production';
            }

            var path = name + '/' + config.env;
            req([path], function(mod) {
                load(mod);
            });
        }
    };

}); 
```

这是我如何使用它：

```
var config = require('env!config'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:44:04.293

```
// you can store two configs in two separate files
// FILE NAME: config-development.json:
// FILE CONTENT: {"url":"http://localhost:8000"}
// FILE NAME: config-production.json:
// FILE CONTENT: {"url":"http://google.com"}

// then load correct one and save it to variable
var config = getConfig();

function getConfig() {
  // if you pass ?dev=true to your url address default config that will be used is `config-development`
  // otherwise - `config-production`
  var configName = getParameterByName('dev', false) ? 'config-development' : 'config-production';

  window._config || (window._config = {});

  // for production version you should concat your config with main script or put it above main script
  // inside global `_config` variable for example
  if (window._config[configName]) return window._config[configName];

  // for development version you can just make an ajax call to get the config
  $.ajax({
    url : 'app/' + configName + '.json',
    async : false,
    success : function(response) {
      window._config[configName] = response;
    }
  });
  return window._config[configName];
}

// helper
function getParameterByName(name, defaults, location) {
  location = location || window.location.href;
  name = name.replace(/[\[]/,'\\\[').replace(/[\]]/,'\\\]');
  var result = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(location);
  return result === null ? defaults : decodeURIComponent(result[1].replace(/\+/g, ' '));
}

// usage
console.log(config.url); // `http://localhost:8000` for development env
                         // `http://google.` for production env 
```

# sql-server-2008 - SQL Server 如何告诉数据库正在恢复或处于未恢复状态

> ID：14443396
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:49:38.010
> 
> 标签：sql-server-2008, restore

在 SQL Server 中，Restore 有三种状态，Recovery、Unrecovery 和 Standby，它们决定了处理“未提交事务”的方式。

但是，如果要恢复的备份绝对没有明确的未提交事务怎么办？

我很确定 Recovery 仍然不同于 Unrecovery。在 Recovery 状态下无法恢复日志备份，在 Unrecovery 状态下无法读取数据。

但是 SQL Server 怎么知道呢？是否有任何隐含的标志或后台事务？

感谢所有的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:39:15.987

SQL Server 还原经历三个阶段：

1.  加载数据
2.  重新应用未完全写入磁盘的已提交事务。
3.  撤消进行中但未提交的事务。

前两个在每次还原时执行。仅当您指定`RECOVERY`选项时才进入 UNDO 阶段。这允许 SQL Server 将日志备份的还原应用到此数据库，该数据库可能包含`COMMIT`一个或多个正在进行的事务。

如果发生 UNDO 阶段的信息与进一步操作所需的 lsn 编号一起存储在数据库中。

您可以在此处阅读有关所有这些的详细信息：http: [//msdn.microsoft.com/en-us/library/ms191455 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191455(v=sql.105).aspx)

您可以使用此查询查看数据库的当前状态：

```
SELECT name,state_desc FROM sys.databases; 
```

# r - 将随机效应附加到数据

> ID：14443404
> 
> 赞同：1
> 
> 时间：2013-01-21T16:50:02.613
> 
> 标签：r

请考虑以下代码：

```
dt <- sleepstudy
fm <- lmer(Reaction ~ Days + (1|Subject), data=dt)
re <- lme4::ranef(fm) 
```

所以我们有

```
> head(dt)
  Reaction Days Subject
1 249.5600    0     308
2 258.7047    1     308
3 250.8006    2     308
4 321.4398    3     308
5 356.8519    4     308
6 414.6901    5     308

> head(re[[1]])
    (Intercept)
308   40.787403
309  -77.856603
310  -63.114282
330    4.406841
331   10.217114
332    8.221982 
```

将随机效应附加到数据的最佳方法是什么，最终得到

```
 Reaction Days Subject    re
1 249.5600    0     308    40.787403
2 258.7047    1     308    40.787403
3 250.8006    2     308    40.787403
4 321.4398    3     308    40.787403
5 356.8519    4     308    40.787403
6 414.6901    5     308    40.787403
etc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:55:00.483

你想用`merge`..

```
merge(dt, re, by.x= "Subject", by.y = "row.names" ) 
```

你也可以使用`match`

```
dt$re <- re[ match(dt$Subject, rownames(re) ) , "(Intercept)" ]
# the "(Intercept)" is whatever your column 
#                                        in re with the random effect is called 
```

# java - 在 Windows 服务模式下启用 systemtrayIcon

> ID：14443408
> 
> 赞同：2
> 
> 时间：2013-01-21T16:50:13.000
> 
> 标签：java, windows, windows-services, trayicon

> **可能重复：**
> [如何将 Windows GUI 应用程序作为服务运行？](https://stackoverflow.com/questions/53232/how-can-i-run-a-windows-gui-application-on-as-a-service)

我为 Windows 7 添加了启用 SystemTrayIcon 的代码。它在 NetBeans 应用程序模式下运行良好，而我在 Windows 服务模式下执行应用程序时它不起作用。请找到以下代码供您参考。

```
if (!java.awt.SystemTray.isSupported()) {    
                    System.out.println("SystemTray is not supported");    
                return;    
            }    
                final PopupMenu popup = new PopupMenu();    
            Image img1 = new ImageIcon(DataReporter.class.getResource("/lookandfeel/data/xear_appIcon_16.png")).getImage();    
            ImageIcon icon = new ImageIcon(img1);    
                final TrayIcon trayIcon = new TrayIcon(icon.getImage());    
                trayIcon.setToolTip(DataReporterProps.softwareDescriptionText);
                final java.awt.SystemTray tray = java.awt.SystemTray.getSystemTray();    
                MenuItem aboutItem = new MenuItem("About");    
                popup.add(aboutItem);
                trayIcon.setPopupMenu(popup);    
                try {    
                tray.add(trayIcon);    
            } catch (AWTException e) {    
                System.out.println("Cannot add the TrayIcon!");    

            } 
```

请让我知道是否要添加任何代码以在 Windows 服务模式下触发。

# apache - 如果我输入 www.mydomain.com 会显示页面，如果我输入 IP XXX.XX.XXX.XX，我会得到 apache 的默认页面

> ID：14443411
> 
> 赞同：1
> 
> 时间：2013-01-21T16:50:18.203
> 
> 标签：apache, virtualhost

抱歉标题太长了，但我不知道还能放什么。我的问题正是如此。如果我输入 www.mydomain.com 会显示正确的页面，如果我输入 IP XXX.XX.XXX.XX，我会得到 apache 的默认页面。

我的虚拟主机文件是：

```
 NameVirtualHost *:443

    <VirtualHost *:443>

    ServerAdmin myname@mydomain.com
    DocumentRoot /home/user/site/rails-webpage/public

    SSLEngine on
    SSLCertificateFile /home/user/doc/www_desmangeo_it.crt
    SSLCertificateKeyFile /home/user/doc/desmangeo.key
    SSLCertificateChainFile /home/user/doc/AddTrustExternalCARoot.crt

    <Directory /home/user/site/rails-webpage/public>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.

    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    </VirtualHost> 
```

感谢 Ray 的评论，我注意到如果我使用 https 发出 IP 请求，我会进入正确的页面。所以看来我不是“重定向端口 80 的视图”。我的意思是，当我尝试使用端口 80 执行此操作时，我收到了 SSL 错误。所以我需要使用443端口。如何告诉服务器“切换”到443端口？

[编辑] 所以我加载了重写模块使用

```
 sudo a2enmod rewrite 
```

并添加

```
 RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

在我的虚拟主机所在文件的开头。没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:41:26.680

您的虚拟主机文件只在端口 443--https 上寻找匹配。您需要创建第二个监听 80 后的消息。第二个将具有所有相同的信息，只是声明中的端口 443（或任何证书详细信息）没有。

apache 的默认配置是捕获所有端口 80 请求。

这是您需要更改的声明块：

```
 <VirtualHost *:80>

      #.... details here

    </VirtualHost> 
```

[编辑] 这有效：

```
 <VirtualHost xxx.xx.xx.xxx:80>
            redirect / www.mysite.com
    </VirtualHost> 
```

# android - 添加选项卡时出错

> ID：14443418
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:50:45.580
> 
> 标签：android, uitableview, nullpointerexception

我正在尝试在 oncreate 中使用此代码制作垂直选项卡

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     tabHost = (TabHost)findViewById(android.R.id.tabhost);

     TabSpec firstTabSpec = tabHost.newTabSpec("tid1");
     TabSpec secondTabSpec = tabHost.newTabSpec("tid2");
    firstTabSpec.setIndicator("First Tab Name").setContent(new         Intent(this,PageOne.class));
     secondTabSpec.setIndicator("Second Tab Name").setContent(new Intent(this,PageTwo.class));
    tabHost.addTab(firstTabSpec);
    tabHost.addTab(secondTabSpec);
}
public void tabHandler(View target){
    //artistButton.setSelected(false);
   // albumButton.setSelected(false);
    //songButton.setSelected(false);
    if(target.getId() == R.id.artist_id){
        tabHost.setCurrentTab(0);

       // artistButton.setSelected(true);
    } else if(target.getId() == R.id.album_id){
       tabHost.setCurrentTab(1);
       // albumButton.setSelected(true);
    } else if(target.getId() == R.id.song_id){
      tabHost.setCurrentTab(2);
       // songButton.setSelected(true);
    }
} 
```

这是 main.xml

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@android:id/tabhost" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout android:orientation="horizontal" 
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <FrameLayout android:layout_width="0dip" 
        android:layout_height="fill_parent" android:layout_weight="0.2">
    <TabWidget android:id="@android:id/tabs" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:visibility="gone"/>
        <LinearLayout android:layout_width="fill_parent"  
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <Button android:layout_height="0dip" 
                android:layout_width="fill_parent" 
                android:layout_weight="1.0"

                android:id="@+id/artist_id" 
                android:onClick="tabHandler"/>
            <Button android:layout_height="0dip" 
                android:layout_width="fill_parent" 
                android:layout_weight="1.0"

                android:id="@+id/album_id" 
                android:onClick="tabHandler"/>
            <Button android:layout_height="0dip" 
                android:layout_width="fill_parent" 
                android:layout_weight="1.0"

                android:id="@+id/song_id" 
                android:onClick="tabHandler"/>
    </LinearLayout> 
</FrameLayout>       
<FrameLayout android:id="@android:id/tabcontent" 
    android:layout_width="0dip" 
    android:layout_height="fill_parent" android:layout_weight="0.8"/> 
```

但它在运行时抛出此异常

```
01-21 19:01:03.655: E/AndroidRuntime(1101): FATAL EXCEPTION: main
01-21 19:01:03.655: E/AndroidRuntime(1101): java.lang.RuntimeException: Unable to start activity      ComponentInfo{com.exampleexample.   .MainActivity}: java.lang.NullPointerException 
```

添加这两行时： tabHost.addTab(firstTabSpec); tabHost.addTab(secondTabSpec);

但我不知道为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:41:04.877

问题是扩展活动而不是扩展 TabActivity

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:58:42.050

在此处输入代码您似乎正在使用 android.R 而不仅仅是 R 来访问您的资源。`android.R`访问不特定于您的应用程序的 android 资源，我假设您想要访问`TabHost`您创建的那个 xml 文件的内部。

```
tabHost = (TabHost)findViewById(android.R.id.tabhost); 
```

应改为：

```
tabHost = (TabHost)findViewById(R.id.tabhost); 
```

# asp.net-mvc - 用 lambda 表达式计算记录数

> ID：14443421
> 
> 赞同：0
> 
> 时间：2013-01-21T16:50:55.927
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4

我有一个带有实体框架的 ASP.NET MVC4 项目。

如何**计算**（使用 lambda 表达式）相关 MaterialPackingID = 123 的请求数？

这是我的课程：

```
public class Request
{
    [Key]
    public virtual int RequestID { get; set; }
    public virtual ICollection<TransportedMaterial> TransportedMaterials { get; set; }
}

public class TransportedMaterial
{
    [Key]
    public int TransportedMaterialID { get; set; }                
    public MaterialPacking MaterialPacking { get; set; }
}

public class MaterialPacking
{
    public int MaterialPackingID { get; set; }
    public string DescriptionFr { get; set; }
    public string DescriptionNl { get; set; }
} 
```

所以：

*   1 请求可能包含几个 TransportedMaterial

*   1 个 TransportedMaterial 包含 1 个 MaterialPacking

这是我尝试的：

```
 public int CountExistingRequestsFilterByMaterialPacking(int id)
    {
        using (var unitOfWork = UnitOfWorkFactory.Create())
        {
            var requestRepository = unitOfWork.Create<Request>();
            var materialPackingRepository = unitOfWork.Create<MaterialPacking>();
            var materialPacking = materialPackingRepository.SingleOrDefault(x => x.MaterialPackingID == id);

            if (materialPacking == null)
                throw new FaultException("Packing not found");

            return requestRepository.GetAll().Where(x => x..... == materialPacking.MaterialPackingID).Count();
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:27:43.770

这样的事情有用吗？

```
return requestRepository.GetAll().Count(req => 
    req.TransportedMaterials.Any(tm => 
        tm.MaterialPacking.MaterialPackingID == materialPacking.MaterialPackingID)
    ); 
```

假设：您需要包含一个或多个 TransportedMaterial 对象的请求计数，这些对象的 MaterialPackingID 与您感兴趣的对象相匹配。

# javascript - JavaScript 参数语法，例如 {video: true}

> ID：14443422
> 
> 赞同：0
> 
> 时间：2013-01-21T16:51:02.283
> 
> 标签：javascript

从这篇[文章中](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)，我发现了一种将参数传递为的奇怪语法`navigator.getUserMedia({video: true, audio: true}, ...)`。这种传递参数的语法是什么`{video: true, audio: true}`？

虽然这种语法`navigator.getUserMedia("audio, video", ...)`也有效，但我们应该更喜欢哪一种？

我[在 StackOverflow 上找到了这个问题，](https://stackoverflow.com/questions/7891202/what-is-this-javascript-parameter-syntax-called)但那里接受的答案说它是一种 ActionScript 语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:53:47.307

语法`{...}`是创建一个对象字面量。在这种情况下，他们碰巧将对象字面量构造为参数。

这类似于执行一个函数并将其返回值作为参数传递：

```
navigator.getUserMedia(foo(), ...)

var foo = function () {
    var someObj = {video: true, audio: true};

    return someObj;
}; 
```

传递对象字面量的好处是它允许您将多个逻辑相关的参数作为一个形式参数一起传递。这允许动态参数，这也可以通过使用[`arguments`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)来实现，尽管大多数人更喜欢传递对象，因为它更容易理解和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:53:56.297

这个：

```
{video: true, audio: true} 
```

是一个 JavaScript 对象字面量。主要用途之一是将选项列表传递给函数。

至于使用这两个选项中的哪一个，我更喜欢对象文字语法，因为它是两者中更直观的：您可以看到它们都将设置为 true。

# c++ - 如何让 this_thread::sleep_for(a while)？

> ID：14443427
> 
> 赞同：0
> 
> 时间：2013-01-21T16:51:13.653
> 
> 标签：c++, c++11, sleep, stdthread

> **可能重复：**
> [std::this_thread::sleep_for() 和 GCC](https://stackoverflow.com/questions/4438084/stdthis-threadsleep-for-and-gcc)

尝试编写一个简单的计时器和一些代码来测试它，让程序休眠一段时间：

```
#include <chrono>
#include <thread>

Aux::Timer timer;
timer.start();
std::this_thread::sleep_for(std::chrono::milliseconds(1000));
timer.stop();
std::chrono::duration<int64_t, std::milli> t = timer.elapsed(); 
```

这给了我一个编译器错误：

```
17:45:28 **** Incremental Build of configuration EnsembleClustering-DPar for project EnsembleClustering ****
make all 
Building file: ../src/aux/test/AuxGTest.cpp
Invoking: GCC C++ Compiler
/usr/local/bin/g++-4.7 -I/usr/local/Cellar/gcc/4.7.2/gcc/include/c++/4.7.2 -I/Users/cls/workspace/gtest/include -I/usr/local/Cellar/log4cxx/0.10.0/include -I/Users/cls/workspace/STINGER/include -O0 -g3 -D_GLIBCXX_DEBUG -p -pg -Wall -c -fmessage-length=0 -std=c++11 -g -pg -fopenmp -MMD -MP -MF"src/aux/test/AuxGTest.d" -MT"src/aux/test/AuxGTest.d" -o "src/aux/test/AuxGTest.o" "../src/aux/test/AuxGTest.cpp"
../src/aux/test/AuxGTest.cpp: In member function 'virtual void AuxGTest_testTimer_Test::TestBody()':
../src/aux/test/AuxGTest.cpp:72:2: error: 'sleep_for' is not a member of 'std::this_thread'
make: *** [src/aux/test/AuxGTest.o] Error 1 
```

我以前没用过`<thread>`图书馆。你能建议一个快速修复吗？我也很高兴有一个替代方法来测试计时器的正确性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:35:40.607

修复了此处描述的问题：[std::this_thread::sleep_for() 和 GCC](https://stackoverflow.com/questions/4438084/stdthis-threadsleep-for-and-gcc)

`#define _GLIBCXX_USE_NANOSLEEP 1`在文件的开头有一个。

# google-chrome - 某些网站如何禁止更改字体大小？

> ID：14443430
> 
> 赞同：3
> 
> 时间：2013-01-21T16:51:17.170
> 
> 标签：google-chrome, accessibility

我几乎总是使用比默认字体大得多的字体浏览网页。使它更容易阅读。

但偶尔我注意到有些网站不允许放大字体，至少在 Chrome 上是这样。比如这个网站：

[http://en.support.wordpress.com/domains/map-existing-domain/](http://en.support.wordpress.com/domains/map-existing-domain/)

我很好奇（a）为什么 Chrome 允许网站这样做，以及（b）如何做到这一点。

有人可以解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:12:44.893

a) 天知道，因为浏览器供应商喜欢实现必然会被滥用的东西？

b) `-webkit-text-size-adjust`是罪魁祸首。另请参阅[MDN](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)和[上一个问题](https://stackoverflow.com/questions/11694767/android-chrome-ignoring-webkit-text-size-adjustnone-property-text-is-being-sc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:27:40.333

这是一个 WebKit 错误。

`-webkit-text-size-adjust` *应该*只对移动浏览器有影响。

但如果您设置`-webkit-text-size-adjust`为`none`，它（错误地）也会影响桌面 WebKit 浏览器（如 Chromium/Chrome 和 Safari）。

这是**错误报告**：[https ://bugs.webkit.org/show_bug.cgi?id=56543](https://bugs.webkit.org/show_bug.cgi?id=56543)

# c - “文件数据”和“文件大小”是一起还是分别提交到磁盘

> ID：14443431
> 
> 赞同：2
> 
> 时间：2013-01-21T16:51:18.993
> 
> 标签：c, file-io, synchronization, filesize, robustness

考虑这个例子：

```
FILE* stream = fopen("my_file", "w");
fputs("hello", stream); 
```

如果在执行 fputs() 期间断电会发生什么？

之后，我能找到大小非零但第一个字节不是“h”的“my_file”吗？如果是，它是否保证为零，或者它是否可以包含任意值？

当然，假设没有其他人接触我们的文件。

编辑：还假设目标磁盘驱动器/设备的类型能够保持足够长的功率以写入它在内部缓冲的所有数据。

POSIX 对此有什么要说的吗？有Linux吗？有窗户吗？

编辑：我不打算关注如何实现 STDIO 流 API 的细节。假设 POSIX，这就是我真正的意思：

```
int fd = open("my_file", O_WRONLY|O_CREAT|O_TRUNC, S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);
write(fd, "hello", 5); 
```

编辑：POSIX 将大小视为文件的元数据，因此问题可能改写为：由于上述代码，文件数据和该文件的元数据是否可以分阶段提交到磁盘？

编辑：在[http://www.sqlite.org/atomiccommit.html](http://www.sqlite.org/atomiccommit.html)找到这个：

> 7.5 具有安全附加语义的文件系统
> 
> SQLite 3.5.0 版中引入的另一个优化利用了底层磁盘的“安全附加”行为。回想一下，SQLite 假设当数据被附加到文件（特别是回滚日志）时，首先增加文件的大小，然后再写入内容。因此，如果在文件大小增加后但在写入内容之前断电，则文件将包含无效的“垃圾”数据。然而，VFS 的 xDeviceCharacteristics 方法可能表明文件系统实现了“安全附加”语义。这意味着内容是在文件大小增加之前写入的，因此不可能通过断电或系统崩溃将垃圾引入回滚日志。

这似乎至少提供了部分答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:02:43.010

关于`linux`，您写入缓冲区的内容不能保证立即写入磁盘。

将`kernel`复制`data`到 a`buffer`中，然后在后台，内核收集所有的 ，对`dirty buffers`它们进行最佳排序并将它们写到`disk`. 这称为`writeback`. 这允许写入调用以闪电般的速度发生，几乎立即返回。它还允许内核进行`defer writes`更多`idle periods`和批量处理`writes together`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:35:25.577

这在很大程度上取决于正在使用的文件系统 ( `ext3`, `ext4`, `xfs`, ....) 和为其提供的挂载时间选项，因此没有一个简单的万能答案。也许如果您向我们展示您的`/etc/fstab`并告诉我们您想了解哪个文件系统，可以给出更好的答案......

# nginx - nginx phpmyadmin 403 禁止 index.php

> ID：14443432
> 
> 赞同：0
> 
> 时间：2013-01-21T16:51:24.877
> 
> 标签：nginx, phpmyadmin

我放弃了...当我输入 url localhost/pma/ 时，如何配置 nginx 在 html/pma 文件夹中打开 inedx.php？

当我输入 localhost/pma/index.php 它的工作。我在窗户上工作。

我的 nginx 配置：

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;

index  index.html index.htm index.php;

        location / {
            root   html;
            index  index.html index.htm index.php;
        }

        location /pma/ {
            root   html/pma;
            index  index.html index.htm index.php;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        location ~ \.php$ {
            include fastcgi.conf;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            include fastcgi_params;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:21:10.687

通过 irc 上的 Ray`n 解决：root 必须在服务器中，而不是位置。

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;

index  index.html index.htm index.php;
root html

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        location ~ \.php$ {
            include fastcgi.conf;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            include fastcgi_params;
        }

    }
} 
```

# windows - 20 秒后停止执行批处理文件并转到下一步

> ID：14443433
> 
> 赞同：1
> 
> 时间：2013-01-21T16:51:28.460
> 
> 标签：windows, batch-file, command

我有一个从网上得到的小脚本。该脚本基本上从文件中读取信息（IP 地址）并对其进行 ping 操作，然后将结果插入到文本文件中。这个脚本完全符合我的需要，但问题是我需要“pathping”而不是 ping，我可以在脚本中更改它。问题是，在路径处理期间，如果有延迟，脚本会停留 3 分钟或 5 分钟，具体取决于移动到下一个 IP 地址之前的响应。

我想要的只是某种超时，基本上可能是 20 秒，然后移动到下一条记录，不管响应是什么。有人可以修改下面的脚本，以便路径命令等待 30 秒，然后移动到下一行信息（与响应无关）。任何提示或方向将不胜感激......谢谢。

我检查了超时 -w 或 -p 选项不起作用。

```
@echo off
cls
echo PathPing test in progress...

for /F %%i in (iplist.txt) do pathping %%i >> result.txt

echo .
echo .
echo Result is ready. 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-23T16:58:05.883

我知道这是一个旧帖子，但我希望将来可以帮助其他人。下面的脚本将从`iplist.txt`文件中获取每个地址，并且`pathping`每个地址仅持续 20 秒。然后将每个结果输出到`result.txt`文件中。

现在由于`pathping`命令的工作方式，“停止”它的唯一方法是终止它自己的 CMD 窗口。由于批处理代码的方式（例如与 C++ 不同），您不能同时运行两行代码（例如，与 C++ 不同），我们可以使用`start "" cmd /C ""`命令调用两个新窗口。

对于每个地址，我们召唤一个`pathping`窗口和一个`taskkill`窗口。taskill 窗口将使用`PID #`pathping 窗口的 Task 并等待 20 秒后终止它。

同时，核心批处理文件将等待 40 秒，让所有文件都完成并关闭。然后它将所有数据合并到`result.txt`文件中。

```
@ECHO OFF
@SETLOCAL enableextensions enabledelayedexpansion
@TITLE PathPing from textfile, cancel request for each x after 20s.
@GOTO :Start

:Start

echo WARN: Starting PathPing Script...
echo WARN: This may take some time...
goto :PathPing

:PathPing

:: Large number is for token gathering
set /a number=123456789
for /f "delims== tokens=1,2" %%G in (iplist.txt) do (

    :: Start The pathping's for each %%G
    start "!number!" cmd /C "pathping "%%G" >> "!number!.outputfile""

    :: Start Kill Window (Let process live for 20 seconds)
    FOR /F "tokens=2" %%# in ('tasklist /v ^| find "!number!" ^| find "Console"') do set PID=%%#
    start "" cmd /C "(PING localhost -n 20 >nul) & (taskkill /pid !PID! /t /f & goto :eof)"

    set /a number+=1
)

:: End of FOR statement. Now copy .outputfile to one file.
:: Wait 60 Seconds for the FOR statement to finish copy there files.
PING localhost -n 30 >nul

:: DEL is optional, remove it if you don't with to over-wright text file.
If exist "%~dp0\result.txt" (goto :Del) ELSE (goto :Skip)

:Del
Del /Q "%~dp0\result.txt"
Goto :Skip

:Skip
For %%A In (*.outputfile) DO (for /f "delims== tokens=1,2" %%G in (%%A) do echo %%G >> result.txt)

:: Clean up all .outputfile files.
For %%A In (*.outputfile) DO (DEL /Q "%~dp0\%%A")
Goto :Finish

:Finish
cls
echo WARN: Result is ready.
echo(
pause
goto :eof 
```

# jsp - web.xml 中不允许多次出现 jsp-config 元素 || 网络逻辑服务器

> ID：14443436
> 
> 赞同：0
> 
> 时间：2013-01-21T16:51:40.827
> 
> 标签：jsp, weblogic

我的 weblogic 服务器出现以下错误。

```
<Error> <HTTP> <BEA-101064> <[WebAppModule(*******Application:/)] Error parsing 
    descriptor in Web appplication "********************webApp\WebContent"
    weblogic.descriptor.DescriptorValidateException: The following failures occurred:
    -- Multiple occurrences of jsp-config element are not allowed in web.xml 
```

在 web.xml 中添加以下行之后。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>
---------------------------------------------
<jsp-config>
  <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <trim-directive-whitespaces>true</trim-directive-whitespaces>
  </jsp-property-group>
</jsp-config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-17T12:32:35.500

@Kevin Seifert 是正确的：

servlet 2.3 web.xml 版本没有：jsp-config、message-destination、message-destination-ref 和 service-ref

# android - 关闭 AlertDialog 时生成 NPE

> ID：14443438
> 
> 赞同：0
> 
> 时间：2013-01-21T16:51:46.403
> 
> 标签：android, nullpointerexception, android-edittext, android-alertdialog

当我的活动开始时，我会弹出一个警报框。它显示一个由 2 个文本框和 2 个编辑文本视图组成的自定义视图。出于某种原因，当我单击确认关闭对话框并使用在这些字段中输入的值创建一个新对象时，我得到一个 NPE。我不确定为什么。下面是我创建对话框的方法：

```
 public Dialog createDialog(){
    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);

    View v = getLayoutInflater().inflate(R.layout.order_dialog, null);
    builder.setView(v);

    final EditText tableNum = (EditText)MainActivity.this.findViewById(R.id.numberEntry);
    final EditText coverNum = (EditText)MainActivity.this.findViewById(R.id.coversEntry);

    builder.setMessage("Order Information");
    builder.setPositiveButton("Confirm", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {
            //Create order object in here
            table = Integer.parseInt(tableNum.getText().toString());
            covers = Integer.parseInt(coverNum.getText().toString());
            order = new Order(covers,table);
            Toast.makeText(MainActivity.this, "order created!", Toast.LENGTH_SHORT).show();
            Toast.makeText(MainActivity.this, "order: " + "table: " + order.getTable() + " covers: " + order.getCovers(), Toast.LENGTH_SHORT).show();
        }
    });

    return builder.create();
} 
```

这是我得到的错误。错误：

**com.example.waitron5.MainActivity$2.onClick(MainActivity.java:90) 处的 java.lang.NullPointerException**

日志猫：

```
FATAL EXCEPTION: main
01-21 16:46:31.583: E/AndroidRuntime(11983): java.lang.NullPointerException
01-21 16:46:31.583: E/AndroidRuntime(11983):    at com.example.waitron5.MainActivity$2.onClick(MainActivity.java:87)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at android.os.Looper.loop(Looper.java:137)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at java.lang.reflect.Method.invokeNative(Native Method)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at java.lang.reflect.Method.invoke(Method.java:511)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-21 16:46:31.583: E/AndroidRuntime(11983):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 order_dialog.xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

    <!-- Table Number -->

    <TextView
        android:id="@+id/tablelabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Table Number: " />

    <EditText
        android:id="@+id/numberEntry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:width="40dp" >
    </EditText>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

    <!-- Covers -->

    <TextView
        android:id="@+id/coverslabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Covers: " />

    <EditText
        android:id="@+id/coversEntry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:width="40dp" />
</LinearLayout> 
```

第 89 行出现错误：

```
table = Integer.parseInt(tableNum.getText().toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:54:32.277

只需替换`MainActivity.this.findViewById`它`v.findViewById`，它应该可以正常工作

# ios - ios在应用内购买优惠券

> ID：14443439
> 
> 赞同：0
> 
> 时间：2013-01-21T16:51:50.757
> 
> 标签：ios, in-app-purchase

我正在创建一个为其他公司销售优惠券的应用程序。对于我出售的每张优惠券，我可以获得大约 10% 的佣金。我的问题是：使用苹果**应用内购买**迫使我支付通过我的应用进行的每次购买的 30%。但是我卖的每张优惠券都把大部分钱付给了真正的公司，而我只得到 10%，而苹果得到 30%。我希望苹果只获得我 30% 的份额——我也认为这更有意义。我应该怎么办？我可以改用其他服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:10:05.417

上面的答案是错误的。Apple 仅考虑升级应用程序或其使用需要应用程序内购买。未安装在应用程序中的商品的销售非常好，但您必须使用外部支付系统或提供自己的（如果您收钱）。例如，销售沙发或出租酒店房间的应用程序不是您需要从 Apple 购买的应用程序内的东西。您的 Farmville 农场的虚拟沙发需要应用内购买支持并给予 Apple 30%。请注意，如果您提供优惠券并将其放入 Passbook，这并不能增强应用程序本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:22:18.220

开发者*程序许可协议*禁止您使用“其他服务”：

> **3.3.3**未经 Apple 事先书面批准或第 3.3.23 条（在应用程序购买 API）允许的情况下，应用程序不得通过 App Store 以外的分发机制提供、解锁或启用其他特性或功能。

如果您要通过应用销售产品，则需要通过应用内购买来完成。

但是*In App Purchase API 的附加使用条款*（附件 2）几乎禁止您使用 In App Purchase 出售诸如优惠券之类的外部物品：

> **1.1**您只能使用 In App Purchase API 使最终用户能够购买您在您的应用程序中提供的内容、功能或服务（例如，数字书籍、附加游戏关卡、访问路线图服务） . 您不得使用 InApp Purchase API 来提供在您的应用程序之外使用的商品或服务。

因此，您的应用不太可能首先获得批准。但如果是这样，您仍然需要向 Apple 支付*产品价格*（不是您的份额）的 30%。

# android - Android：AlarmManager用来调用一个Service来通知用户

> ID：14443448
> 
> 赞同：3
> 
> 时间：2013-01-21T16:52:26.863
> 
> 标签：android, android-service, alarmmanager, android-notifications

**编辑**在我的清单中添加这一行解决了我的问题（`Service`创建得很好）。

```
<service android:name=".TimersService" > 
```

**邮政**

我目前正在尝试实现警报以通知用户倒计时已完成。我有一种方法`createAlarm()`可以通过`AlarmManager`. 此方法当前在 Fragment 内部调用。它看起来像这样：

```
private final void createAlarm(String name, long milliInFuture) {

        Intent myIntent = new Intent(getActivity().getApplication(),
                TimersService.class);

        AlarmManager alarmManager = (AlarmManager) getActivity()
                .getSystemService(Context.ALARM_SERVICE);

        PendingIntent pendingIntent = PendingIntent.getService(getActivity()
                .getApplication(), 0, myIntent, PendingIntent.FLAG_CANCEL_CURRENT);

        alarmManager.set(AlarmManager.RTC_WAKEUP,
                milliInFuture, pendingIntent); 

    } 
```

我希望这种方法能够添加警报。即使设备处于睡眠模式，也应该调用警报。应该在某个时间`milliInFuture`（即`System.currentTimeMillis()`+ 某个时间）调用它。当警报响起时，它应该启动一个服务。服务如下。这`Service`应该只做一件事：通知用户警报已经结束。我的`Service`班级如下：

```
public class TimersService extends Service {

    private NotificationManager mNM;
    private int NOTIFICATION = 3456;

    public class LocalBinder extends Binder {
        TimersService getService() {
            return TimersService.this;
        }
    }

    @Override
    public void onCreate() {
        mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        showNotification();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("LocalService", "Received start id " + startId + ": " + intent);
            return START_NOT_STICKY;
    }

    @Override
    public void onDestroy() {
        mNM.cancel(NOTIFICATION);
        Toast.makeText(this, "Alarm", Toast.LENGTH_SHORT).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

        private final IBinder mBinder = new LocalBinder();

    private void showNotification() {

        final NotificationCompat.Builder builder = new NotificationCompat.Builder(getBaseContext());
        builder.setSmallIcon(R.drawable.clock_alarm);
        builder.setContentTitle("Time is up");
        builder.setContentText("SLIMS");
        builder.setVibrate(new long[] { 0, 200, 100, 200 });
        final Notification notification = builder.build(); 

        mNM.notify(NOTIFICATION, notification);
        NOTIFICATION += 1;
    }

} 
```

当我运行我的代码时，我的方法 createAlarm 被调用。但是我的服务永远不会被创建。我根据 Alexander's Fragotsis's one found [here](https://stackoverflow.com/questions/8281075/set-notification-to-specific-time)编写了这段代码。我的`Service`课程灵感来自[Service 类](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)的 Android 参考资料。

知道为什么我`Service`没有被调用吗？`Manifest`关于警报、服务或通知，我应该写些什么吗？

感谢您的帮助

何和我将不胜感激有关我的代码的任何建议。如果您知道在固定时间后通知用户的更简单方法，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:51:57.803

由于您所做的只是通知您的用户一次，因此服务并不是最好的方法。服务旨在在后台工作。通知并不是真正适合服务的工作类型——它太短了。因此，我建议您改用 BroadcastReceiver。

类应该是这样的：

```
public class TimerReceiver extends BroadcastReceiver {
  private static final int NOTIFICATION = 3456; 

/*since you're always doing a 1-time notification, we can make this final and static, the number
 won't change. If you want it to change, consider using SharedPreferences or similar to keep track 
 of the number. You would have the same issue with a Service since you call stopself() and so,
 you would delete the object every time.*/

  @Override
  public void onReceive(Context context,Intent intent) {

    final NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
    builder.setSmallIcon(R.drawable.clock_alarm);
    builder.setContentTitle("Time is up");
    builder.setContentText("SLIMS");
    builder.setVibrate(new long[] { 0, 200, 100, 200 });
    final Notification notification = builder.build(); 

    mNM.notify(NOTIFICATION, notification);
  } 
```

要调用接收器，您需要将 Intent 更改为指向新类，并且`getService()`需要将`getBroadcast()`. 因此这

```
Intent myIntent = new Intent(getActivity().getApplication(),
                TimersService.class);

PendingIntent pendingIntent = PendingIntent.getService(getActivity()
                .getApplication(), 0, myIntent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

需要是

```
Intent myIntent = new Intent(getActivity().getApplication(),
                TimerReceiver.class);

PendingIntent pendingIntent = PendingIntent.getBroadcast(getActivity()
                .getApplication(), 0, myIntent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

此外，您应该能够安全地更改`getActivity().getApplication()`为`getActivity()`

最后你需要一个清单声明：

```
<receiver android:name=".TimerReceiver" ></receiver> 
```

# html - 即使我只有 1 个，IE8 和更早的 CSS 背景也不起作用？

> ID：14443452
> 
> 赞同：1
> 
> 时间：2013-01-21T16:52:41.307
> 
> 标签：html, css, internet-explorer-8, background-image, background-color

如果我不在 1 个元素上使用多个背景，我不确定为什么它不会加载我的背景颜色或图像。（“IE8 及更早版本不支持一个元素上的多个背景图像。”）

```
#header1 {
  background: #191919 url(Site-in-development.png) left no-repeat;
  padding-top:15px;
  border-bottom: 1px solid white;} 
```

即使我删除了 img 并只留下它不会显示的颜色。有任何想法吗？

[http://www.nobodyfilm.org/overview-and-production.html](http://www.nobodyfilm.org/overview-and-production.html) （如果您有 IE9，请按 F12，您可以将其更改为 IE8 或 7。）谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:57:59.443

IE8[无法识别](http://caniuse.com/#feat=html5semantic)该`<header>`元素（或任何其他 HTML5 元素）。IE8 根本看不到该元素，无论其样式如何。您需要使用[html5shiv 之](http://code.google.com/p/html5shiv/)类的东西来让 IE8 伪装成现代浏览器。

在页面中包含 html5shiv JavaScript 文件可以这样实现：

```
<!--[if lt IE 9]>
<script src="html5shiv.js"></script>
<![endif]--> 
```

另请参阅[http://blog.whatwg.org/supporting-new-elements-in-ie](http://blog.whatwg.org/supporting-new-elements-in-ie)了解更多关于 shiv 的背景（没有双关语）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:58:28.240

根据[**文档**](http://reference.sitepoint.com/css/background)，它应该是

```
background: { 
   background-color 
   background-image 
   background-repeat
   background-attachment 
   background-position | inherit 
} ; 
```

尝试将您的代码更改为：

```
background: #191919 url(Site-in-development.png) no-repeat scroll left; 
```

在链接的文档中，在**兼容性**部分下，您可以看到 IE 从 IE6 到 IE8（以及 Safari 到 2.0）执行的与该`background`属性相关的大量错误行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:02:00.433

采用

```
#header1 {
background-image: url(Site-in-development.png);
background-color: #191919;
background-position:left;
background-repeat:no-repeat;
padding-top:15px;
border-bottom: 1px solid white;} 
```

# ruby-on-rails - 如何操作 form_for 以更改将 params[] 发送到控制器的方式？

> ID：14443453
> 
> 赞同：1
> 
> 时间：2013-01-21T16:52:45.883
> 
> 标签：ruby-on-rails

我想知道如何操作 form_for 以更改将 params[] 发送到我的控制器的方式。

我正在使用此表单向 Registration#create 控制器发布：

```
<%= form_for @registration, method: :post do |form| %>
    <div class="form form-actions">
      <%= form.hidden_field :occurrence_id, :value => @occurrence.id %>
      <%= submit_tag "Yes, register", class: 'btn btn-primary' %>
      <%=  link_to "Cancel", root_path, class: 'btn' %>
    </div>
<% end %> 
```

这是 Registration#create 控制器：

```
def create
  if params[:occurrence_id]
    @occurrence = Occurrence.find(params[:occurrence_id])
    @registration = Registration.new(registration_date: Date.today, user: current_user, occurrence: @occurrence)
    if @registration.save
      flash[:success] = "Course registration saved with success."
    else
      flash[:error] = "There was a problem saving the registration."
    end
    redirect_to occurrence_path(@occurrence)
  else
    flash[:error] = "Occurrence missing"
    redirect_to root_path
  end
end 
```

现在我的 params[:occurrence_id] 没有被评估，因为表单正在发送隐藏字段，如下所示：

```
{"utf8"=>"✓",
 "authenticity_token"=>"5RFiAq3DiqauNzSpnXIcPzWEl9UuGqoXfYAvRiB6GKk=",
 "registration"=>{"occurrence_id"=>"2"},
 "commit"=>"Yes,
 register"} 
```

我“期待”这个（我对 RoR 的了解有限）

```
{"utf8"=>"✓",
 "authenticity_token"=>"5RFiAq3DiqauNzSpnXIcPzWEl9UuGqoXfYAvRiB6GKk=",
 "occurrence_id"=> "2",
 "commit"=>"Yes,
 register"} 
```

那么如何更改我的表单以便发送 params[:occurrence_id] 而不是 params[:registration][:occurrence_id]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:56:11.777

更改`if params[:occurrence_id]`到`if params[:registration][:occurrence_id]`

这就是 Rails 设法处理属于 html 文档中特定对象的属性的方式。

There might be other inputs in the form or multiple objects on a document, this how they will get organized.

If you intentioally want mentioned behaviour then you must use the [`form_tag`](http://guides.rubyonrails.org/form_helpers.html) instead of form_for.

# javascript - 寻找解决方法，因为 radiobutton.click() 挂起 Safari 但在 Chrome 中有效

> ID：14443454
> 
> 赞同：3
> 
> 时间：2013-01-21T16:52:48.483
> 
> 标签：javascript, jquery, safari

我有一个带有一些复选框的表格，并且我添加了此代码，以便当您单击特定表格单元格的任何部分时，复选框被选中。当一个复选框被选中时，我需要`disabled`从一个按钮中删除一个类，以允许用户移动到下一步。

`$('input:radio', $parent).click()`此代码在 Chrome 中运行良好，但在 Safari 中，它会在调用时立即挂起窗口。

有没有更正确的方法来做到这一点？

```
$('td.info, td.control').click(function() {
  var $parent;
  $parent = $(this).parent();
  $('input:radio', $parent).attr('checked', true);
  return $('input:radio', $parent).click();
});
$("input[name='package[order_option_id]']").click(function() {
  return ($("#select-interaction-link")).removeClass('disabled');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:58:15.260

我认为挂起的原因是你导致了一个无限循环。当代码单击单选按钮时，单击会冒泡到包含`td`，这会导致您的`click()`处理程序再次运行。

我认为您可以通过以下方式解决此问题：

```
$("td.info input:radio, td.control input.radio").click(function(e) {
    e.stopPropagation();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:58:19.573

尝试不使用上下文：

```
$('td.info, td.control').click(function() {
    return $(this).parent().find('input[type=radio]').attr('checked', true).click();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:01:10.593

我不知道这是否会影响 Safari，但如果您想查看收音机，请更改此设置

```
$('input:radio', $parent).attr('checked', true); 
```

对此

```
$('input:radio', $parent).prop('checked', true); // Uses the js property value 
```

或者

```
$('input:radio', $parent).attr('checked', 'checked'); // Uses the attribute 
```

还要记住事件冒泡......不确定是否可以通过在此处显式调用收音机上的点击函数来创建某种循环，但我会使用 Safari 逐步完成它并确保不会发生这种情况。只是妄想症。

# java - RMI 调用未添加回调侦听器

> ID：14443460
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:53:27.913
> 
> 标签：java, multithreading, rmi

我在理解我正在制作的程序的内部运作时遇到问题。该程序应该是一个与服务器联系并自行注册的 RMI 客户端。然后，服务器应该循环调用客户端上的方法。但是，未添加侦听器。

注意输出。在服务器上添加监听器后，该方法打印出正确的大小，但运行服务器的线程没有，因为列表仍然是空的。为什么哦，为什么会这样？

客户

```
public class GameClient extends Thread implements Remote, Client, ModelChangeListener<Client>{
private static final long serialVersionUID = -394039736555035873L;
protected Queue<GameModelEvent> queue = new ConcurrentLinkedQueue<GameModelEvent>(); 

public GameClient(){

}

public static void main(String[] args){
    GameClient client = new GameClient();
    client.start();
}

protected void bind(){
    System.setProperty("java.rmi.server.codebase","file:bin/");
    try {
        Registry registry = LocateRegistry.getRegistry();
        Client c = (Client)UnicastRemoteObject.exportObject(this, 10999);
        Server stub = (Server) registry.lookup("Server");
        stub.registerClient(c);
    } catch (RemoteException | NotBoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void run() {
    super.run();
    bind();
    while(!Thread.interrupted()){
        System.out.print(".");
        GameModelEvent event = queue.poll();
        while(event != null){

            System.out.println(event);

            event = queue.poll();
        }

        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            return;
        }
    }

}

   .....
} 
```

服务器

```
public class GameServer extends Thread implements ModelChangeListener<GameServer>, Server{
protected Queue<GameModelEvent> queue = new ConcurrentLinkedQueue<GameModelEvent>(); 
List<Client> clients = Collections.synchronizedList(new ArrayList<Client>());

public static void main(String[] args){
    GameServer server = new GameServer();
    server.start();
}

protected void bind(){
    System.setProperty("java.security.policy","file:policy.policy");
    System.setProperty("java.rmi.server.codebase","file:bin/");

    if (System.getSecurityManager() == null) {
        System.setSecurityManager(new SecurityManager());
    }
    try {
        String name = "Server";
        Server engine = new GameServer();
        Server stub =
            (Server) UnicastRemoteObject.exportObject(engine, 0);
        Registry registry = LocateRegistry.getRegistry();
        registry.rebind(name, stub);
        System.out.println("ComputeEngine bound");
    } catch (Exception e) {
        System.err.println("GameServer exception:");
        e.printStackTrace();
        System.exit(1);
    }
}

public void run() {
    super.run();
    bind();
    while(!Thread.interrupted()){
        System.out.print(clients.size()+ " ");

            try {
                for(Client c : clients)
                c.modifyConnection(null);
            } catch (RemoteException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        GameModelEvent event = queue.poll();
        while(event != null){

            System.out.println(event);

            event = queue.poll();
        }

        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            return;
        }
    }

}
@Override
public void registerClient(Client client) {
    System.out.println("\nAdded client "+client);
    clients.add(client);
    System.out.println("clients size "+clients.size());     
}
 ...
 } 
```

输出

```
ComputeEngine bound
0 0 0 0 
Added client Proxy[Client,RemoteObjectInvocationHandler[UnicastRef [liveRef: [endpoint:[10.117.2.88:10999](remote),objID:[5c30c56:13c5dfe5faf:-7fff, 1084850783049542281]]]]]
clients size 1
0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:57:15.533

您正在绑定的实例`GameServer`与您在 main 方法中创建的实例不同。

它是接收 RMI 调用的绑定实例，而它是线程将使用的主方法实例 - 因此您有两个不同的客户端列表。

在`GameServer`替换行中：

```
UnicastRemoteObject.exportObject(engine, 0); 
```

和 ：

```
UnicastRemoteObject.exportObject(this, 0); 
```

# windows-phone-7 - Windows Phone - 截至 2013 年 1 月的最低目标版本

> ID：14443461
> 
> 赞同：3
> 
> 时间：2013-01-21T16:53:31.020
> 
> 标签：windows-phone-7, mobile, windows-phone-8, windows-phone

我们目前正在考虑将 iOS 应用程序移植到 Windows 手机上。但是，如果我们继续这样做，我们会有点困惑于哪个版本作为最低目标。

我想目前有一个“更大”的 Windows Phone 7 受众，但由于它从未真正大规模起飞，最好从 8 开始，并专注于加快其库等的速度? （据推测，Windows Phone 的未来版本更有可能是 8 的演变，而不是从 7 到 8 的跳跃？）

非常感谢任何提示、用户群统计数据等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:22:54.400

这取决于您在应用程序中需要具备的功能。如果您不需要 Windows Phone 8 附带的任何高级功能，请考虑以 7.1 版本为目标。您甚至可以从 WP7 应用程序检测您是否在 Windows Phone 8 操作系统上运行，并为此使用 WP8 操作系统上可用的功能。考虑检查一下[mangopollo](http://mangopollo.codeplex.com/)。

Windows Phone 7 仍在销售中，如果您为他们提供应用程序，所有使用它的用户将不胜感激。记在脑子里。

# sql-server - 实体框架代码优先与 SQL Server 同义词

> ID：14443463
> 
> 赞同：12
> 
> 时间：2013-01-21T16:53:35.740
> 
> 标签：sql-server, entity-framework, code-first, synonym

我有这样的情况，我将有多家公司访问我的应用程序的一个实例，但我需要隔离他们的数据以避免意外加载另一家公司的数据，并简化每个公司的数据库备份。

理想情况下，我想将数据分成不同的数据库，如下所示：

*   **一个 SQL Server 数据库，用于列出所有用户，以及所有用户/公司通用**的任何表

***   **N 个公司特定数据库**，每个数据库具有相同的架构，但每个公司的数据不同。登录时，我会为特定用户的公司动态选择数据库** 

 **我希望能够查询公司特定的数据表，但是对共享数据库执行连接（例如，我可以在公司数据库表中存储一个外键，它连接到共享表的主键另一个数据库）。

我发现了看起来可以完成这项工作的 SQL Server 同义词，而且似乎我可以通过使用 SQL Server Management Studio 中的查询成功地连接两个数据库。

**是否可以在 Entity Framework Code First 中使用同义词表，如果可以，我的 POCO 类/DbContext 需要是什么样的？**

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-24T06:21:11.287

*如果我理解正确，您有一个**SharedServer**和一些**LocalServers**（特定于公司），它们希望将两者的所有对象（一个共享，一个特定于公司）放在一个上下文中。*

我给你两个场景：

1.  **多对多**：在这种情况下，有关系的表在**sharedDB**中，但加入它们的第三个表在**公司特定的 DB**中。
2.  **Single-to-Many**：其中一张表在**SharedDB**中，另一张在**公司特定 DB**中。

# 多对多

## 1\. 在 SQL 端创建你的同义词

首先，您必须在本地（或公司特定）数据库中创建同义词：

```
CREATE SYNONYM [dbo].[StudentCources] FOR [SharedServer].[SharedDB].[dbo].[StudentCources] 
```

假设您的共享表有两列（无关紧要），名为`studentID`和`courseID`。

## 2\. 创建 POCO

假设我们在本地数据库中有两个表，它们之间具有多对多关系。让我们假设第三个连接器表（包含键）位于共享数据库中！（我认为这是最糟糕的方式）。所以你的 POCO 看起来像这样：

```
Public Class Student
    Public Property studentID as Integer
    Public Property Name as String
    Public Property Courses as ICollection(Of Course)
End Class 
```

和

```
Public Class Course
    Public Property courseID as Integer
    Public Property Name as String
    Public Property Students as ICollection(Of Student)
End Class 
```

和**共享**的：

```
Public Class StudentCources
    Public Property courseID as Integer
    Public Property studentID as Integer
End Class 
```

和上下文看起来像：

```
Partial Public Class LocalContext
    Inherits DbContext

    Public Sub New()
        MyBase.New("name=LocalContext")        
    End Sub

    Public Overridable Property Students As DbSet(Of Student)
    Public Overridable Property Courses As DbSet(Of Course)

    Protected Overrides Sub OnModelCreating(ByVal modelBuilder As DbModelBuilder)
        modelBuilder.Entity(Of Student).HasMany(Function(e) e.Courses).WithMany(Function(e) e.Students).Map(Sub(e)
            e.MapLeftKey("studentID")
            e.MapRightKey("courseID")
            e.ToTable("StudentCources", "dbo")
    End Sub)

    End Sub
End Class 
```

中的代码`OnModelCreating`告诉模型构建器关系表是同义词（不是直接的）。我们知道同义词在**SharedDB**中。

# 一对多

没有步骤！只需修改`OnModelCreating`为：

```
modelBuilder.Entity(Of Student).ToTable("Students", "dbo") 
```

并注意在这种情况下`Students`是一个**Synonym**。然后创建关系:)**

# iphone - 使用 AVFoundation 时添加/更改视频记录的按钮覆盖

> ID：14443464
> 
> 赞同：1
> 
> 时间：2013-01-21T16:53:34.910
> 
> 标签：iphone, ios, overlay, avfoundation, video-recording

我目前正在将视频功能实现到 iPhone 应用程序中，该应用程序要求用户能够使用 AVFoundation API 来“选择和播放”视频以及“录制和播放”视频。类似于[此处](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)教程中显示的内容。

到目前为止实现该功能没有问题，但是我现在需要更改显示的按钮，例如录制视频 - 从而创建自定义覆盖。例如，需要更改记录按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:40:30.283

我之前这样做的方法是禁用 MPMovePlayerController 中的控件，然后将带有控件的 UIImageView 放在顶部，然后将带有 UITapGestureRecognizer 的 UIView 放在其顶部以检测何时按下控件。

禁用控件：

```
[_videoPlayer setControlStyle:MPMovieControlStyleNone]; 
```

手势识别器：

```
touchLayer = [[UIView alloc] initWithFrame:self.frame];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTapVideoControlOverlay:)];
[tapRecognizer setNumberOfTapsRequired:1];

[touchLayer addGestureRecognizer:tapRecognizer]; 
```

# c# - 使用哪个 OData 提供程序

> ID：14443465
> 
> 赞同：1
> 
> 时间：2013-01-21T16:53:46.250
> 
> 标签：c#, sharepoint-2010, asp.net-web-api, odata

我过去曾成功使用过[WCF 数据服务工具包](http://wcfdstoolkit.codeplex.com/)，但我意识到它可能是一个死项目（对 Codeplex 的最后一次修改是 2011 年 5 月）。

继任者似乎是[Microsoft ASP.NET Web API OData](http://www.nuget.org/packages/microsoft.aspnet.webapi.odata)提供程序，它正在作为更广泛的 Web API 工作的一部分进行开发。

我需要将自定义 OData 服务作为 SharePoint 解决方案的一部分公开，因此**在 WSP 中轻松打包**会更可取。我曾尝试公开 WCF DST，但尚未成功。

Web API OData 提供程序是否**已准备好用于生产（几个月后）？**

是否有任何指向资源的指针显示如何将 Web API OData 端点安装为 SharePoint WSP 的一部分？

**注意：** SharePoint 2010（我们当前的生产目标）是在 .NET 3.5 中构建的，这可能会阻止使用 Web API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:00:11.870

绝对`Microsoft ASP.NET Web API OData`- 它目前在 Nuget 上的 RC，但您可以从夜间构建提要中获取最新信息 - 夜间构建已经包含更成熟的版本。

Nuget 每晚构建提要是[http://www.myget.org/F/aspnetwebstacknightly/](http://www.myget.org/F/aspnetwebstacknightly/)

正式版本将很快发布 - （尚未确定确切日期）但团队的目标是 2 月中旬。

# git - 使用 Git 进行原子网站更新

> ID：14443472
> 
> 赞同：16
> 
> 时间：2013-01-21T16:53:59.060
> 
> 标签：git, atomic, web-deployment

我想以原子方式更新实时网站。如果我们对页面、图像和 javascript 进行了多项更改，则所有更改都应该同时出现，不会出现停机、不一致或 404 错误。

如果我只是将更改的文件复制到网站目录中，那么至少有几个请求会看到不一致的站点。如果我将新站点复制到一个单独的目录，然后重命名旧目录以使其退出生产并重命名新目录以使其生效，那么我们将在短时间内得到 404。

我真的有两个问题：

如何以原子方式更新文件目录？

我该如何与 Git 协调呢？我们想使用 git pull（或可能 push）进行部署。git repo 中的站点路径与服务器上的路径不同，因此需要使用 git 命令或 OS 命令进行一些移动/重命名。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-21T17:14:43.627

您可以使用符号链接做您想象的事情。将一个符号链接移到另一个符号链接上是一种原子操作，因此您应该能够避免任何 404 错误。

您的钩子会将[您的站点部署到一个目录，该目录可能以](https://stackoverflow.com/questions/160608/how-to-do-a-git-export-like-svn-export)[提交哈希](https://stackoverflow.com/questions/949314/how-to-retrieve-the-hash-for-the-current-commit-in-git)命名。然后它会为此建立一个符号链接，也许称为登台。然后它将该符号链接移动到生产符号链接上。

```
hash=`git rev-parse HEAD`
git checkout-index -a -f --prefix=/srv/www/$hash/
ln -s /srv/www/$hash /srv/www/staging
mv -T /srv/www/staging /srv/www/production 
```

该`-T`参数是 GNU 的缩写形式`--no-target-directory`，它是[GNU`mv`](https://www.gnu.org/software/coreutils/manual/html_node/mv-invocation.html)的一部分，可防止其将源移动到目标。阅读有关[目标目录](https://www.gnu.org/software/coreutils/manual/html_node/Target-directory.html)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:58:55.300

我对此并不完全确定，但是您可以为 git 创建 post push hook，它会创建新目录，或者复制现有目录，拉取或克隆您的项目并将链接从您的项目更改为新目录。您的项目目录只是链接到已部署的目录之一。

但我的方法听起来像是解决方法。

# c# - 应用程序中包含的 VPN 连接

> ID：14443475
> 
> 赞同：5
> 
> 时间：2013-01-21T16:54:02.757
> 
> 标签：c#, .net, networking, vpn, cisco

是否有可能建立一个 VPN 连接但 VPN 仅包含在应用程序中的程序？

示例：应用程序建立 VPN 连接以通过 VPN 从另一台服务器检索数据，而不影响机器的网络连接 - 机器保持在网络/互联网上，就好像没有建立 VPN 连接一样。

理想情况下，我想在 C# 中执行此操作。

此外，我目前使用具有“组身份验证”以及个人用户名和密码的 Cisco VPN 客户端。我见过的 C# VPN 代码似乎只使用标准的用户名和密码，所以有谁知道这种“组身份验证”功能是否可以在 C# 中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:51:14.847

我认为您的应用程序创建自己的非共享 VPN 连接以隧道传输数据在技术上并非不可能，但这肯定不是 VPN 的常见用例。快速的 Google 搜索没有找到任何您可能使用的库，但您应该联系供应商以查看他们是否有任何建议。

# php - 从 mongoDb 文档中删除子字段

> ID：14443478
> 
> 赞同：1
> 
> 时间：2013-01-21T16:54:09.790
> 
> 标签：php, mongodb

我有这样的文件

```
{
   "_id": ObjectId("4ffa96436ccc195553000055"),
   "on": {
     "4e8614f66ccc19aa490006e3": {
       "hid": ObjectId("4e8614f66ccc19aa490006e3"),
       "mts": NumberInt(1352979215)
    },
     "4e8614f06ccc19d9340003e8": {
       "hid": ObjectId("4e8614f06ccc19d9340003e8"),
       "mts": NumberInt(1352979216)
    },
     "4e8614346ccc19aa490006df": {
       "hid": ObjectId("4e8614346ccc19aa490006df"),
       "mts": NumberInt(1352979218)
    },
     "505af2e66ccc19541d0005a9": {
       "hid": ObjectId("505af2e66ccc19541d0005a9"),
       "mts": NumberInt(1352979220)
    },
     "505af2d76ccc19f11300109a": {
       "hid": ObjectId("505af2d76ccc19f11300109a"),
       "mts": NumberInt(1352979221)
    }
  }
} 
```

有时我需要从“on”字段中删除子字段。我这样做：

```
 $this->collection->update(
        array(
            '_id'  => new MongoId('4ffa96436ccc195553000055'),
            "on.4e8614f66ccc19aa490006e3" => array('$exists' => true),
        ),
        array(
            '$unset'  => array(
                "on.4e8614f66ccc19aa490006e3" => 1
            )
        )
    ); 
```

但是字段不要删除。我究竟做错了什么？

PS我在发送查询后检查了错误，我得到了这个错误 **修饰符和非修饰符不能混合代码：10154**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:40:09.140

感谢所有帮助我解决这个问题的人。我发现了问题。当我写问题时，我使用了简单版本的更新查询。这是完整版

```
 c($this->table)->update(
        array(
            '_id'  => new MongoId($uid),
            "on.{$strHid}" => array('$exists' => true),
        ),
        array(
            'mts' => time()
            '$unset'    => array(
                "on.{$strHid}" => 1
            )
        )
    ); 
```

我的麻烦在于这部分代码。这里我使用修饰符和非修饰符。

```
 array(
            'mts' => time()
            '$unset'    => array(
                "on.{$strHid}" => 1
            )
        ) 
```

我像这样重写了它，一切都好

```
 array(
            '$set'      => array(
                'mts' => time()
            ),
            '$unset'    => array(
                "on.{$strHid}" => 1
            )
        ) 
```

# php - Apache2 错误日志 [info] [client] 请求正文读取超时

> ID：14443481
> 
> 赞同：1
> 
> 时间：2013-01-21T16:54:17.517
> 
> 标签：php, ajax, apache, curl, runtime-error

我有一个将 url 发送到 php 页面的 .ajax 请求。php 页面使用 CURL 请求从网站上抓取内容并寻找指向我们页面的反向链接。

这是 CRUL 电话

```
$ch = curl_init();

curl_setopt_array($ch, array(CURLOPT_USERAGENT => "Mozilla/5.0 (Windows NT 6.1; rv:9.0.1) Gecko/20100101 Firefox/9.0.1", // Pretend were FireFox
CURLOPT_URL => $row['page_href'], // Backlink
CURLOPT_HEADER => FALSE, // don't return headers
CURLOPT_RETURNTRANSFER => TRUE, // return web page
CURLOPT_FOLLOWLOCATION => FALSE, // dont follow redirects
CURLOPT_CONNECTTIMEOUT => $connectionTimeout, // seconds to wait while trying to connect
CURLOPT_TIMEOUT => $curlTimeout, // seconds for everything to complete
CURLOPT_ENCODING => 'gzip,deflate'));

$htmlContent = curl_exec($ch);
$info = curl_getinfo($ch);
$response = $info['http_code'];
curl_close($ch); 
```

然后我寻找反向链接并返回结果。

每次此 ajax 调用完成时，Apache 2 错误日志都会打印：

```
[Mon Jan 21 16:48:51 2013] [info] [client IP.ADDRESS] Request body read timeout 
```

谁能指出我正确的方向。我不知道 100% 是 curl 调用，这就是这里的问题。我只知道当 JQuery .ajax() 完成时（或者在循环中的某个时间点，因为它发生得很快）我在错误日志中得到另一行。

**更新：**

我现在也看到了这个错误。它看似随机发生，但并不经常发生。

```
[info] [client IP.ADD] (32)Broken pipe: core_output_filter: writing data to the network 
```

# c# - 如何将已添加到 datagridview 的行存储到 C# 中的 datarow 数组中？

> ID：14443489
> 
> 赞同：0
> 
> 时间：2013-01-21T16:54:42.043
> 
> 标签：c#, database, ado.net, datatable, dataset

我正在使用以下代码用数据表中的行填充 datagridview。私人无效 FillEmpEmer() { int emerNo;

```
 empEmerDT.Columns.Add("Emergency Number", typeof(string));
        empEmerDT.Columns.Add("Emergency Address", typeof(string));

        empEmerRows = EmpInfoDS.Tables["EmpEmer"].Select("EmpID='" + txt_EmpID.Text + "'");
        foreach (DataRow dR in empEmerRows)
        {
            emerNo = Convert.ToInt32(dR[1]);
            emerRows = EmpInfoDS.Tables["Emer"].Select("EmerNo='" + emerNo + "'");

            empEmerDT.Rows.Add(emerNo, emerRows[0][1]);
        }

          dataGrid_Emer.DataSource = null;
          dataGrid_Emer.DataSource = empEmerDT.DefaultView;
    } 
```

如何将已添加到 datagridview 的新行存储到新的 DATAROW 数组中？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:59:25.787

您可以利用 DataTable 的 GetChanges 方法来获取对已添加的 DataRows 的引用。

就像这样：

```
DataTable changeTable = table.GetChanges(DataRowState.Added); 
```

# vmware - VMDK 描述符文件格式

> ID：14443498
> 
> 赞同：0
> 
> 时间：2013-01-21T16:55:12.567
> 
> 标签：vmware, virtual-disk

我想为 dd 映像创建一个 VMDK 描述符文件，以便该映像文件可以用作 VMDK 并附加到 VM。

我可以找到类似[http://justaskweg.com/?p=959](http://justaskweg.com/?p=959)和[http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1002511](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1002511)的文章。但是我找不到可以准确描述文件格式的东西，以便我可以放心地创建文件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:21:57.350

我想我已经找到了自己问题的答案[http://www.vmware.com/support/developer/vddk/vmdk_50_technote.pdf](http://www.vmware.com/support/developer/vddk/vmdk_50_technote.pdf)

这个也有帮助[http://sanbarrow.com/vmdk-basics.html#cidchain](http://sanbarrow.com/vmdk-basics.html#cidchain)

# javascript - 如何仅在字段焦点上显示日期选择器？

> ID：14443502
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:55:20.777
> 
> 标签：javascript, jquery, jquery-mobile, calendar, jquery-ui-datepicker

我正在添加[jquery 移动日期选择器](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)，但它默认显示日期选择器。相反，我希望它只显示在焦点上，并在字段失去焦点时隐藏起来......知道怎么做吗？

在我添加的页眉中

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet"  href="/css/jquery.ui.datepicker.mobile.css" /> 
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
  //reset type=date inputs to text
  $( document ).bind( "mobileinit", function(){
    $.mobile.page.prototype.options.degradeInputs.date = true;
  });   
</script>   
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="/js/jQuery.ui.datepicker.js"></script>
<script src="/js/jquery.ui.datepicker.mobile.js"></script> 
```

以及正文中的日期字段以使其工作：

```
<label for="date">Date Input:</label>
<input type="date" name="date" id="date" value=""  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:45:14.157

不幸的是，除非您愿意自己实施，否则目前无法完成。jQuery Mobile datepicker 从来没有打算作为一个小部件正式发布（也许有一天，但它从未正式宣布）。可用代码只不过是 jQuery UI 日期选择器的包装器。

你可以自己检查一下，这是一个代码片段，它在 pagecreate 事件中显示了一个日期选择器：

```
$( ".ui-page" ).live( "pagecreate", function(){     
    $( "input[type='date'], input:jqmData(type='date')" ).each(function(){
        $(this).after( $( "<div />" ).datepicker({ altField: "#" + $(this).attr( "id" ), showOtherMonths: true }) );
    }); 
}); 
```

你可以自己改变它，但有什么意义。如果您没有时间进行自定义实现，请查看这些 3rd 方 jQuery Mobile 日期选择器：

1.  第一个是 Mobi Pick： http: [//mobipick.sustainablepace.net/demo.html](http://mobipick.sustainablepace.net/demo.html)。简单、容易且坚固。正是您需要的那个。我的最爱。

2.  可能最好的一个是： http: [//mobiscroll.com/](http://mobiscroll.com/)。它曾经是我最喜欢的（如果我需要好的 UI 仍然是）。主要是因为它具有出色的 UI 功能。

3.  Datebox 也是一个很好的选择：http: [//dev.jtsage.com/jQM-DateBox2/](http://dev.jtsage.com/jQM-DateBox2/)。也很强大，但小车。

还可以看看我的另一篇类似文章：[https ://stackoverflow.com/a/13779992/1848600](https://stackoverflow.com/a/13779992/1848600)

# jquery - 是否可以用图像替换锚标记的值？

> ID：14443505
> 
> 赞同：0
> 
> 时间：2013-01-21T16:55:33.837
> 
> 标签：jquery

我想用图像替换锚文本，我试过：

```
$('a.next').text('<img src="images/slider_arrowr.png">'); 
```

但那只是印`<img ...`在屏幕上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:56:39.990

使用`.html`，而不是`.text`。

# css - 如何正确居中对齐 Magento 中的横幅滑块？

> ID：14443507
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:55:55.987
> 
> 标签：css, magento, slider, banner

我正在尝试将横幅滑块居中对齐，但它没有正确居中。如果我更改 margin-left 属性以匹配我的屏幕分辨率，它只会在我的屏幕上居中。但它并没有集中在更宽的屏幕上。我的网站是 myusedwheel.com，这是我的代码：

```
<style type="text/css">
#slider{
    margin-left: 195px !important;
    overflow: hidden;
    position: absolute;
    top: 192px;
    width:960px!important;
    height:173px !important;
 }

#navigation{
    position:relative; z-index:999;
 }

 .header-container{
    height:385px;
 }

#controls{
    display:none;
 }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:51:51.527

首先，您没有理由在滑块上使用绝对定位。如果您将滑块移到代码层次结构的顶部，它将位于内容上方。

话虽如此，要使用您当前的代码结构修复它，您可以执行以下操作。

1.  添加`position: relative`到你`.page`的`line 200``styles.css`

2.  更改`margin-left`为`20px`_`#slider`

这应该将您的滑块正确定位在页面的中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:57:07.763

用类似的东西包裹滑块`<div class='slide-container'>`并使用：

```
.slide-container {
    position: relative;
    width: 1200px;
    height: 400px;
    left: 50%;
    margin-left: -600px;
} 
```

有时`margin: 0 auto;`就足够了，但我发现使用`left: 50%;`等于元素宽度一半的负左边距效果最好。

# javascript - 使用 HTML 5 的 QR 码阅读器出现问题

> ID：14443525
> 
> 赞同：1
> 
> 时间：2013-01-21T16:56:43.330
> 
> 标签：javascript, html, qr-code, zxing

我正在尝试开发一个在线二维码扫描仪，就像这样：

[http://webqr.com/](http://webqr.com/)

我想做的是，我想从网页激活相机，并且必须能够从那里扫描二维码。（当我们点击上述网站上的相机图像时也会发生同样的事情）。

他们提供了上述网站的代码：

[https://github.com/LazarSoft/jsqrcode](https://github.com/LazarSoft/jsqrcode)

但是当我尝试从下载的文件中运行“test.html”文件时，我无法查看相机的输出。我只能看到该网页上名为“捕获”的按钮。我按下了这个按钮，没有任何反应。我对 java 脚本和 HTML 5 没有太多经验。如果可能，请帮助我修改下载的代码并帮助我获得所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T20:09:26.173

自述文件说“对于网络摄像头 qrcode 解码（包含在 test.html 中），您将需要来自[http://www.taboca.com/p/camcanvas/](http://www.taboca.com/p/camcanvas/)的 camcanvas.swf ”，因此他们的 test.html 文件将不起作用开箱即用的网络摄像头。

但是，作为中途步骤，**您可以非常轻松地解码 QR 文件的图片**：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>QR Decoder Demo</title>
<!-- Include scripts as instructed in README -->
<script type="text/javascript" src="grid.js"></script>
<script type="text/javascript" src="version.js"></script>
<script type="text/javascript" src="detector.js"></script>
<script type="text/javascript" src="formatinf.js"></script>
<script type="text/javascript" src="errorlevel.js"></script>
<script type="text/javascript" src="bitmat.js"></script>
<script type="text/javascript" src="datablock.js"></script>
<script type="text/javascript" src="bmparser.js"></script>
<script type="text/javascript" src="datamask.js"></script>
<script type="text/javascript" src="rsdecoder.js"></script>
<script type="text/javascript" src="gf256poly.js"></script>
<script type="text/javascript" src="gf256.js"></script>
<script type="text/javascript" src="decoder.js"></script>
<script type="text/javascript" src="qrcode.js"></script>
<script type="text/javascript" src="findpat.js"></script>
<script type="text/javascript" src="alignpat.js"></script>
<script type="text/javascript" src="databr.js"></script>

<script type="text/javascript">
/*<![CDATA[*/

// tell application what to do when a QR code is decoded 
qrcode.callback = function(data){
  alert("Decoded URL: "+data);
}

// decode a QR code for http://bbc.co.uk/programmes
qrcode.decode("http://2d-code.co.uk/images/bbc-logo-in-qr-code.gif");

/*]]>*/
</script>

</head>
<body></body>
</html> 
```

![英国广播公司二维码](../Images/38a7231ac193de7ad425686084a44e51.png)

# php - 有没有比使用 jQuery 和时间戳更新表更好的方法？

> ID：14443526
> 
> 赞同：0
> 
> 时间：2013-01-21T16:56:47.297
> 
> 标签：php, jquery, html-table, timestamping

以下“位”代码创建了一个带有简单表格的标准 html 页面，显示消息及其时间戳（可能会更好地呈现，但 atm 没关系。

PHP 首先检索所有消息（从特定更新的时间戳开始，如果提供）。它使用[PDO 来检索记录（出于 DB 抽象原因）](http://gr2.php.net/manual/en/pdo.prepare.php)。如果提供了时间戳，它会将内容编码为 json，然后返回并终止（啊，谋杀语义）。如果没有，它将继续并返回一个完整的 html 页面，其中所有记录都显示在一个表中，以及一个按钮，当按下该按钮时，它将调用具有时间戳的相同 PHP 脚本，以检索自同时，并更新相关的表格行单元格。

我认为，虽然很基本，但效果很好。它很好地使用 jQuery 来更新任何相关的更新，我猜一些非常相似的东西可以很好地用于一个小的 html 聊天，其中 table_update 函数每两秒调用一次，或者时间呈指数递增。

**问题**：是否有任何良好的编码实践可以使这变得更好？

例如，我想知道给 TR 任何 id 是否是一个好主意；PDO 代码块有点混杂，我非常喜欢看到 DIE() 函数以一种高效的方式使用，而通常我只看到它用于后期错误处理、安全检查失败或虚假脚本包括。

那里有任何优秀的开发人员，他们曾经这样做过，现在正在使用更好的方法吗？

我不想要框架，我想要一些相对简单的东西，例如。闪页。

```
<?php
$sql = 'SELECT id, message, timestamp
    FROM messages
    WHERE id_user = :id_user';
if(isset($_REQUEST["timestamp"]))
{
 $sql .= ' && timestamp >= :timestamp';
}
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':id_user' => $id_user, ':timestamp' => $_REQUEST["timestamp"]));
$data = $sth->fetchAll();

if(isset($_REQUEST["timestamp"]))
{
 echo json_encode($data);
 die();
}

?>
<html>
 <head>...</head>
<body>
<input id='button_check' value='Update this table' type='button' />
<table id="table_check">
    <tr>
        <th>Message</th>
        <th>Time</th>
    </tr>
<?php foreach($data as $record) { ?>
    <tr id="tr_<?php echo $record["id"] ?>">
        <td><?php echo $record["strNumber"] ?></td>
        <td><?php echo $record["strFullName"] ?></td>
    </tr>
<?php } ?>
</table>

<script type="text/javascript">
var intLastUpdate = <?php echo time() ?>;
$(document).ready(function() {
 $('#button_check').click(update_table());
});

function update_table()
{
 $.getJSON("this_page.php?timestamp=" + intLastUpdate, function(data) {
        $.each(data, function(index, record) {
            $('#tr_' + record.id).find("td").eq(0).html(record.message);
            $('#tr_' + record.timestamp).find("td").eq(1).html(record.timestamp);
            if(intLastUpdate < record.timestamp) {
                intLastUpdate = record.timestamp;
            }
        });
    });
}
</script>

<body>
</html> 
```

# c# - GridView 的 DataSource 在 Code Behind

> ID：14443531
> 
> 赞同：0
> 
> 时间：2013-01-21T16:57:09.970
> 
> 标签：c#, asp.net, visual-studio-2010, gridview

我已经有了一个`GridView`完美的工作，但现在我需要设置一些`parameters`. 我正在填充`gridview`in `HTML page`。这是我的`FULL GridView HTML code` 希望你们不要将其视为垃圾邮件，因为它是一个巨大的代码。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" style="font-family: Verdana, Arial, Sans-Serif" 
            DataKeyNames="id"
            CssClass="gridview" DataSourceID="MyDataSource"
            AllowSorting ="True" AllowPaging="True" BackColor="#CCCCCC" 
            BorderStyle="Inset" BorderWidth="2px" BorderColor="GrayText"
            CellPadding="1"
            CellSpacing="5"
            HeaderStyle-HorizontalAlign="Center"
            OnRowDataBound="GridView1_RowDataBound" 
            ForeColor = "Black" RowStyle-CssClass="gridview" 
            onrowcommand="GridView1_RowCommand">            
            <AlternatingRowStyle BackColor="#CCCCCC" />
                <columns>

                    <asp:BoundField HeaderText="ID" DataField="id"  />
                    <asp:BoundField HeaderText="PRIORIDADE" DataField="prioridade" SortExpression="prioridade" ItemStyle-HorizontalAlign="Center" />
                    <asp:BoundField  HeaderText="SITUAÇÃO"  DataField="situacao" SortExpression="situacao" ItemStyle-HorizontalAlign="Center" >
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="RESPONSAVEL" DataField="responsavel" SortExpression="responsavel" HeaderStyle-Width="65px" ItemStyle-HorizontalAlign="Center">
                    <HeaderStyle Width="65px" />
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="DATA DE CADASTRO" DataField="dt_cadastro" DataFormatString="{0:dd/MM/yyyy}" HeaderStyle-Width="60px"
                    SortExpression="dt_cadastro" ItemStyle-HorizontalAlign="Center" >
                    <HeaderStyle Width="60px" />
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="PREVISÃO DE TÉRMINO" DataField="previsao_termino" DataFormatString="{0:dd/MM/yyyy}" HeaderStyle-Width="60px"
                    SortExpression="previsao_termino" ItemStyle-HorizontalAlign="Center">
                    <HeaderStyle Width="60px" />
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="PROJETO" DataField="projeto"  ItemStyle-HorizontalAlign="Center"></asp:BoundField>
                    <asp:BoundField HeaderText="FUNCIONALIDADE" DataField="funcionalidade" ItemStyle-HorizontalAlign="Center" />
                    <asp:BoundField HeaderText="CLUBE" DataField="clube" SortExpression="clube" ItemStyle-HorizontalAlign="Center" />

                    <asp:TemplateField HeaderStyle-Width="70px" HeaderText="VISUALIZAR" >
                        <ItemTemplate>
                            <asp:Button ID="Btn_Visualizar" runat="server" Text="VISUALIZAR" CssClass="Btn_Grid"  Font-Size="7pt" Font-Names="Verdana, Arial"
                            CommandName="visualizar" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />                            
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderStyle-Width="66px" HeaderText="ALTERAR">
                        <ItemTemplate>
                            <asp:Button ID="Btn_Alterar" runat="server" Text="ALTERAR" CssClass="Btn_Grid" Font-Size="7pt" Font-Names="Verdana, Arial"
                            CommandName="editar" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />
                        </ItemTemplate>
                    </asp:TemplateField>

                </columns>
            <EditRowStyle ForeColor="Black" CssClass="GridViewEditRow" />
            <FooterStyle BackColor="#CCCCCC" />
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" BorderColor="White" BorderStyle="Solid" BorderWidth="1px" />
            <PagerStyle BackColor="#CCCCCC" ForeColor="Black" HorizontalAlign="Left" />
            <RowStyle BackColor="White" />
            <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />      
            </asp:GridView>           

            <asp:SqlDataSource ID="MyDataSource" runat="server"
               ConnectionString="server=localhost;User Id=xx;password=xxxx;database=xxxx"
               ProviderName ="MySql.Data.MySqlClient"

               SelectCommand="SELECT ch.id, sit.descricao as situacao, resp.responsavel, ch.dt_cadastro, ch.previsao_termino, func.descricao as funcionalidade, 
                              proj.descricao as projeto ,pr.id as prid, pr.prioridade, clb.clube
                              FROM chamados AS ch  
                              INNER JOIN prioridades as pr  ON ch.prioridade = pr.id
                              INNER JOIN clubes as clb ON ch.clube = clb.id 
                              INNER JOIN responsaveis as resp ON ch.responsavel = resp.id
                              INNER JOIN situacoes as sit ON ch.situacao = sit.id 
                              INNER JOIN projetos as proj ON ch.projeto = proj.id
                              INNER JOIN funcionalidades as func ON ch.funcionalidade = func.id WHERE situacao != 3"

               UpdateCommand="Update chamados SET status = @status , responsavel = @responsavel, 
               previsao_termino = @previsao_termino, titulo = @titulo WHERE id = @id"

               DeleteCommand="Delete FROM chamados WHERE id = @id">
               <DeleteParameters>
                            <asp:Parameter Name="id" Type="Int32" />

               </DeleteParameters>

               <UpdateParameters>
                            <asp:Parameter Name="status" Type="String" />
                            <asp:Parameter Name="responsavel" Type="String" />
                            <asp:Parameter Name="previsao_termino" Type="DateTime" />
                            <asp:Parameter Name="titulo" Type="String" />
                            <asp:Parameter Name="id" Type="Int32" />
               </UpdateParameters>
            </asp:SqlDataSource> 
```

如何在`Aspx.cs`文件中执行所有这些操作，是否创建 DataSet 并将其设置为 DataSource 到 GridView ，以及如何将值设置为列？谢谢 ！Obs：我在单元格上也有两个按钮。[评论] - 其他解决方案是在下面的代码中传递 a `parameter`，可能吗？我需要传递 a 的值`Session`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:04:36.303

[我终于从这里](https://stackoverflow.com/a/6832607/1919644 "堆栈溢出")找到了答案！

我的`aspx`代码：这是我的 Select 命令和我的参数`@club`

```
 SelectCommand="SELECT ch.id, sit.descricao as situacao, resp.responsavel, ch.dt_cadastro, ch.previsao_termino, func.descricao as funcionalidade, 
                              proj.descricao as projeto ,pr.id as prid, pr.prioridade, clb.clube
                              FROM chamados AS ch  
                              INNER JOIN prioridades as pr  ON ch.prioridade = pr.id
                              INNER JOIN clubes as clb ON ch.clube = clb.id 
                              INNER JOIN responsaveis as resp ON ch.responsavel = resp.id
                              INNER JOIN situacoes as sit ON ch.situacao = sit.id 
                              INNER JOIN projetos as proj ON ch.projeto = proj.id
                              INNER JOIN funcionalidades as func ON ch.funcionalidade = func.id WHERE situacao != 3 AND ch.clube = @club"

<SelectParameters>
                    <asp:Parameter Name="club" Type="String" />
               </SelectParameters> 
```

然后这是我的`aspx.cs`代码：在这里我设置了参数的值，就像在 aspx.cs 中一样，你可以做任何你想做的事情来设置值......

```
MyDataSource.SelectParameters["club"] = new Parameter()
            {
                Name = "club",
                DefaultValue = "2" }; 
```

工作得刚刚好 xD 希望它可以帮助别人......再见，伙计们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T05:59:47.720

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Drawing;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

getGrid();

    }
    public string GetCon()
    {
        return System.Configuration.ConfigurationManager.ConnectionStrings["conStr"].ConnectionString.ToString();
    }

    public void getGrid()
    {

        GridView grd = new GridView();        
        Page.Controls.Add(grd);
        form1.Controls.Add(grd);

        grd.ControlStyle.Font.Size = 9;

        SqlConnection conn = new SqlConnection(GetCon());
        conn1.Open();
        SqlCommand cmd4grid = new SqlCommand("Select * from tblCustomers", conn);
        SqlDataAdapter dad = new SqlDataAdapter(cmd4grid);
        DataTable dt = new DataTable();
        dad.Fill(dt);
        grd.DataSource = dt;
        grd.DataBind();
    }
}

**strong text** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:10:14.580

您也可以在 Code behind page 中完成所有这些任务。请参阅以下链接以获取更多参考。

[http://www.codeproject.com/Articles/24085/Insert-Update-Delete-with-Gridview-Simple-Way](http://www.codeproject.com/Articles/24085/Insert-Update-Delete-with-Gridview-Simple-Way)

# javascript - 在逐行单击时突出显示和取消突出显示表格行

> ID：14443533
> 
> 赞同：6
> 
> 时间：2013-01-21T16:57:18.463
> 
> 标签：javascript, html

我一直在这个问题上一段时间没有运气。

请注意。没有 jquery =/

我拥有的JS代码如下

```
function highlight(){
 var table = document.getElementById('dataTable');
 for (var i=0;i < table.rows.length;i++){
  table.rows[i].onclick= function () {
   if(!this.hilite){
    this.origColor=this.style.backgroundColor;
    this.style.backgroundColor='#BCD4EC';
    this.hilite = true;
   }
   else{
    this.style.backgroundColor=this.origColor;
    this.hilite = false;
   }
    }
 }
} 
```

HTML如下

```
<table id="dataTable">
  <tr onclick="highlight()"><td>Data1</td><td>Data2</td></tr>
  <tr onclick="highlight()"><td>Data1</td><td>Data2</td></tr>
  <tr onclick="highlight()"><td>Data1</td><td>Data2</td></tr>
</table> 
```

目前，当我单击它时，它会改变颜色，但是当我单击第二行时，第一行仍然突出显示。您能在没有 jquery 的情况下帮助我完成这项任务吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-07T12:28:34.330

我在[JSFiddle上创建了以下工作示例](http://jsfiddle.net/osewq1rq/4/)

Javascript：

```
function toggleClass(el, className) {
    if (el.className.indexOf(className) >= 0) {
        el.className = el.className.replace(className,"");
    }
    else {
        el.className  += className;
    }
} 
```

HTML：

```
<table class="gridview">
   <tr onclick="toggleClass(this,'selected');"><td></td><td></td></tr>
   <tr onclick="toggleClass(this,'selected');"><td></td><td></td></tr>
   <tr onclick="toggleClass(this,'selected');"><td></td><td></td></tr>
</table> 
```

CSS：

```
.gridview .selected, .gridview tbody .selected {
    background-color: #6ccbfb;
    color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-01T22:33:07.680

我最近遇到了同样的问题，只是使用纯 JS 解决了它这是我的版本 [https://jsfiddle.net/armaandhir/Lgt1j68s/](https://jsfiddle.net/armaandhir/Lgt1j68s/)

```
function highlight_row() {
    var table = document.getElementById('display-table');
    var cells = table.getElementsByTagName('td');

    for (var i = 0; i < cells.length; i++) {
        // Take each cell
        var cell = cells[i];
        // do something on onclick event for cell
        cell.onclick = function () {
            // Get the row id where the cell exists
            var rowId = this.parentNode.rowIndex;

            var rowsNotSelected = table.getElementsByTagName('tr');
            for (var row = 0; row < rowsNotSelected.length; row++) {
                rowsNotSelected[row].style.backgroundColor = "";
                rowsNotSelected[row].classList.remove('selected');
            }
            var rowSelected = table.getElementsByTagName('tr')[rowId];
            rowSelected.style.backgroundColor = "yellow";
            rowSelected.className += " selected";

            msg = 'The ID of the company is: ';
            msg += rowSelected.cells[0].innerHTML;
            msg += '\nThe cell value is: ' + this.innerHTML;
            alert(msg);
        }
    }

} //end of function

window.onload = highlight_row; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T17:03:22.857

您需要取消突出显示其他行，因为现在您只是更改单击的行。

```
function highlight(){
 var table = document.getElementById('dataTable');
 for (var i=0;i < table.rows.length;i++){
  table.rows[i].onclick= function () {
   if(!this.hilite){
    unhighlight();
    this.origColor=this.style.backgroundColor;
    this.style.backgroundColor='#BCD4EC';
    this.hilite = true;
   }
   else{
    this.style.backgroundColor=this.origColor;
    this.hilite = false;
   }
    }
 }
}

function unhighlight(){
 var table = document.getElementById('dataTable');
 for (var i=0;i < table.rows.length;i++){
   var row = table.rows[i];
   row.style.backgroundColor=this.origColor;
   row.hilite = false;
 }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T11:42:39.717

取消选择时无法取消突出显示行

```
 <script type="text/javascript">

  function highlight(){
  var hilite;  
 var table = document.getElementById('dataTable');
 for (var i=0;i < table.rows.length;i++){
  table.rows[i].onclick= function () {
   if(!this.hilite){
    unhighlight();
    this.origColor=this.style.backgroundColor;
    this.style.backgroundColor='#fdee9a';
    this.hilite = true;
   }
   else{
    this.style.backgroundColor=this.origColor;
    this.hilite = false;
   }
    }
 }
}

function unhighlight(){
  var hilite;
 var table = document.getElementById('dataTable');
 for (var i=0;i < table.rows.length;i++){
   var row = table.rows[i];
   row.style.backgroundColor=this.origColor;
   row.hilite = false;
 }
}

  </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-11T15:07:08.193

此演示表行选择具有以下功能：

*   选择单击的行，并取消选择任何先前选择的行
*   如果单击已选择的行，则未选中

注意：这是基于@Richard YS 发布的答案

HTML：

```
 <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Country</th>
      </tr>
    </thead>
    <tbody>
      <tr onclick="selectRow(this,'selected');">
        <td>Maria Anders</td>
        <td>Germany</td>
      </tr>
      <tr onclick="selectRow(this,'selected');">
        <td>Francisco Chang</td>
        <td>Mexico</td>
      </tr>
      <tr onclick="selectRow(this,'selected');">
        <td>John Doe</td>
        <td>USA</td>
      </tr>
      <tr onclick="selectRow(this,'selected');">
        <td>Shankra Pillai</td>
        <td>India</td>
      </tr>
    </tbody>
  </table> 
```

Java 脚本：

```
 let prevIx
    let prevTr

    function selectRow(tr, className) {

        let ix = tr.rowIndex

        if (ix === prevIx) { // row already selected, so unselect
          tr.className = tr.className.replace(className,"")
          prevIx = null
          prevTr = null
        }
        else { // no selected rows

          if (prevTr) {
            // unselect previously selected row
            prevTr.className = prevTr.className.replace(className,"")
          }

          // select current row
          tr.className += className
          prevIx = ix
          prevTr = tr
        }
    } 
```

CSS：

```
table .selected {
    background-color: #6ccbfb;
    color: #fff;
} 
```

# c# - 字典 -> PresentationFramework.dll 中出现“System.Windows.Markup.XamlParseException”类型的未处理异常

> ID：14443534
> 
> 赞同：1
> 
> 时间：2013-01-21T16:57:18.953
> 
> 标签：c#, dictionary

我创建并初始化了一个相当大的字典，并在启动应用程序时出现此错误：

```
An unhandled exception of type 'System.Windows.Markup.XamlParseException' occurred in      PresentationFramework.dll

Additional information: Zeilennummer "3" und Zeilenposition "9" von "Durch den Aufruf des     
Konstruktors für Typ "AbiZeitung.MainWindow", der den angegebenen Bindungseinschränkungen 
entspricht,    wurde eine Ausnahme ausgelöst.".

If there is a handler for this exception, the program may be safely continued. 
```

这是字典的一部分：

```
Dictionary<string, string> teacherList = new Dictionary<string, string>()
    {
        {"Mr", "M"},
        {"Mr", "D"},
        {"Mr", "S"},
        {"Mr", "W"}
    }; 
```

任何猜测为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:00:14.570

A`Dictionary<T,U>`需要有*唯一的键*。现在，您的集合初始化程序`ArgumentException`在尝试添加时会引发异常 () `{"Mr","D"}`，因为“Mr”已经是一个键。

有关详细信息，请参阅[Dictionary.Add](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)，在例外情况下：

> ArgumentException：字典中已存在具有相同键的元素。

如果您的视图创建了这个字典，即使是间接的（即：它在从 xaml 生成的 ViewModel 中），您会得到一个异常，这反过来会导致`XamlParseException`发生。

如果您需要这样的集合，我建议制作一个`ObservableCollection<T>`（或者`List<T>`如果这不会改变）包含两个字符串的自定义类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:00:12.277

我不知道异常说明了什么，但您不能多次使用同一个密钥[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

> 表示键和值的集合。

在您的代码`"Mr"`中是您的关键。所有对都必须有*唯一的密钥*。

> 只要一个对象被用作字典中的键，它就不能以任何影响其哈希值的方式发生变化。根据字典的相等比较器，字典中的每个键都必须是唯一的。如果值类型 TValue 是引用类型，则键不能为空，但值可以为空。

# android - Android：DownloadManager - 通知贴

> ID：14443536
> 
> 赞同：5
> 
> 时间：2013-01-21T16:57:28.377
> 
> 标签：android, android-download-manager

我正在使用`Download Manager`.

它可以很好地下载文件并将其放在我想要的位置。但由于某种原因，**通知仍然存在，我似乎无法将**其删除。下载管理器的代码如下：

```
mDownloadManager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
registerReceiver(onComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));

Uri uri = Uri.parse("URL"));

long enqueue = mDownloadManager.enqueue(new DownloadManager.Request(uri)
            .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI)
            .setAllowedOverRoaming(false)
            .setTitle("Title")
            .setDescription("File description")
            .setDestinationInExternalPublicDir("Folder", "Filename")
            .setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE));

BroadcastReceiver onComplete = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
        Toast.makeText(getApplicationContext(), "Download Completed", Toast.LENGTH_SHORT).show();
    }
 }; 
```

**下载后如何删除通知？**.

我尝试设置所有不同的通知可见性模式，但没有成功。完成后，我可以从 BroadcastReceiver 做些什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T10:01:42.840

我设法解决了我的问题。在`BroadcastReceiver`我必须从意图中获取下载 id 并将其从`DownloadManager`.

```
BroadcastReceiver onComplete = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
        Toast.makeText(getApplicationContext(), "Download Completed", Toast.LENGTH_SHORT).show();

        // Get the download_id of the completed download.
        long download_id = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -1);

        // Remove the completed download from the DownloadManager
        mDownloadManager.remove(download_id);
    }
 }; 
```

我还想注意，这样做`mDownloadManager.remove(download_id)`会从内存中删除文件。我必须添加额外的代码才能将文件永久保存在我希望它最初保存的位置。

# php - 在 smarty 中取消会话

> ID：14443538
> 
> 赞同：3
> 
> 时间：2013-01-21T16:57:32.670
> 
> 标签：php, session, smarty, unset

将数据插入数据库后，我将设置一个会话，然后将页面重定向到另一个页面，在另一个页面上，如果在 smarty 中设置了会话，我将显示一条消息，一切正常。

```
{if $smarty.session.insert===true}
      Thanks
{/if} 
```

现在我如何在打印我的消息后取消设置会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T11:21:41.113

您不应该在模板中这样做，而 smarty 对此不起作用。但是，如果你真的必须这样做，我看到的唯一方法可能是：

```
{php}
    unset($_SESSION['insert']);
{/php} 
```

你放在 {php} 标签之间的任何东西都将由 smarty 作为常规 php 脚本运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:03:55.690

Smarty 是一个模板引擎。它**不**应该处理会话变量。您必须`unset($_SESSION['...'])`在 Smarty 之外的 PHP 脚本中进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:11:44.470

您真的不应该从模板中执行此操作，请在 PHP 中执行此操作，如下所示。

```
unset($_SESSION['session_var_name']); 
```

如果您真的想以智能方式进行操作，您是否尝试过`{$smarty.session.message|unset}` 我不知道它是否有效，但它可能值得研究。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T06:12:41.393

在显示 smarty 模板的 php 文件中，在显示功能后取消设置。

```
if(isset($_POST['postdata'])) {
  $_SESSION['insert'] = 'success';
}

$smarty->display('test.html');
unset($_SESSION['insert']); 
```

在您的模板文件中

```
{if isset($smarty.session.insert)}
  {$smarty.session.insert}
{/if} 
```

# facebook - 有没有办法给相册贴标签并根据标签查询这些相册？

> ID：14443541
> 
> 赞同：0
> 
> 时间：2013-01-21T16:57:43.983
> 
> 标签：facebook, facebook-graph-api

我要做的是查询所有标记或组合在一起的专辑。所以我的第一个问题是，有没有办法对一组专辑进行分组或标记？其次，有没有办法查询所有标记或组合在一起的专辑？对此的任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:05:40.713

您可以给专辑的唯一标签是它的名称，并且无法将专辑“分组”在一起。

将专辑组合在一起的唯一真正方法是查看类型 -

```
/USER_ID/albums/?fields=type 
```

这将告诉你它是否是

*   墙相册 - 包含您在时间轴上上传和发布的照片​​的相册
*   移动相册 - 从移动设备上传的照片相册
*   个人资料相册 - 个人资料图片相册
*   普通相册 - 由用户手动创建的相册

可能有更多类型但不在我的帐户中：P 所以我目前无法检查。该[文档](https://developers.facebook.com/docs/reference/api/album/)指定了个人资料、移动设备、墙壁、普通或专辑......不太确定专辑类型的专辑是什么......但它就在那里！

# iphone - 视图更改后动画不会重新启动

> ID：14443555
> 
> 赞同：2
> 
> 时间：2013-01-21T16:58:15.803
> 
> 标签：iphone, ios, objective-c

第一次加载视图时应用动画，但之后加载视图时 - 没有任何反应。

应该是直截了当的-但是...

编码：

```
- (void)viewDidAppear:(BOOL)animated{    
[self animateLabel];    
}

- (void)viewWillDisappear:(BOOL)animated{
[self.labelMarkTheSpot.layer removeAllAnimations];  
}

- (void)animateLabel{

UIViewAnimationOptions options = (UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat | UIViewAnimationOptionBeginFromCurrentState);

CGAffineTransform scaleFactor = CGAffineTransformMakeScale(1.1, 1.1);
[UIView animateWithDuration:0.2 delay:0 options:options animations:^{
    self.labelMarkTheSpot.transform = scaleFactor;        
}
completion:nil];
} 
```

（在 viewWillAppear 中启动动画没有区别）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:05:30.710

在 的开头添加一行以`animateLabel`将视图重置为动画之前的比例：

```
self.labelMarkTheSpot.transform = CGAffineTransformMakeScale(1.0, 1.0); 
```

发生的事情是一旦动画到 1.1、1.1；它保持这种状态，并且视图重新出现时的动画不会做任何事情（1.1 到 1.1）。通过将其重置为 1.0（或您想要的任何初始值，作为动画的起点），它将始终从 1.0 变为 1.1。

# datepicker - Sonata Admin Bundle：DatePicker 范围

> ID：14443558
> 
> 赞同：25
> 
> 时间：2013-01-21T16:58:20.443
> 
> 标签：datepicker, symfony-2.1, jquery-ui-datepicker, symfony-sonata, sonata-admin

如何`doctrine_orm_datetime_range`在使用 jQuery UI 日期选择器的 Sonata Admin Bundle 中创建过滤器？

我尝试了以下方法，但它不起作用：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper
        ->add('datumUitgevoerd', 'doctrine_orm_datetime', array('widget' => 'single_text'), null, array('required' => false,  'attr' => array('class' => 'datepicker')))
    ;
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-16T11:07:00.773

不再需要使用自定义日期选择器。Sonata 包含本机日期时间选择器，可以很好地与 Twitter Boostrap 配合使用。

要激活日期时间选择器表单字段，您必须启用加载包含相关代码的树枝模板。

## 配置

对于**Symfony 4**：

```
# config/packages/twig.yaml
twig:
    # ...
    form_themes:
        - '@SonataCore/Form/datepicker.html.twig' 
```

对于**Symfony 3**：

```
# app/config/config.yml
twig:
    # ...
    form_themes:
        - 'SonataCoreBundle:Form:datepicker.html.twig' 
```

对于**Symfony 2**：

```
# app/config.yml:
twig:
    # ...
    form:
        resources:
            - 'SonataCoreBundle:Form:datepicker.html.twig' 
```

## 用法

您可以在表单定义中使用选择器：

```
 use Sonata\CoreBundle\Form\Type\DatePickerType;

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('createdAt', DatePickerType::class);
    } 
```

在日期时间过滤器中：

```
 use Sonata\CoreBundle\Form\Type\DatePickerType;

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
                ->add('createdAt', 'doctrine_orm_datetime', ['field_type'=> DatePickerType::class]);
    } 
```

或作为日期时间范围过滤器：

```
 use Sonata\CoreBundle\Form\Type\DateTimeRangePickerType;

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
                ->add('createdAt', 'doctrine_orm_datetime_range', ['field_type'=> DateTimeRangePickerType::class]);
    } 
```

# 旧答案

要使用 datePicker`doctrine_orm_datetime`使用此代码：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper->add('datumUitgevoerd', 'doctrine_orm_datetime', array(), null, array('widget' => 'single_text', 'required' => false,  'attr' => array('class' => 'datepicker')));
} 
```

或者在代码中使用 datePicker`doctrine_orm_datetime_range`应该如下所示：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper->add('datumUitgevoerd', 'doctrine_orm_datetime_range', array(), null, array('widget' => 'single_text', 'required' => false,  'attr' => array('class' => 'datepicker')));
} 
```

你应该重载主模板来添加你的自定义 javascript 文件来初始化 DatePicker。

```
#File app/config.yml
sonata_admin:
    title:      Admin
    title_logo: /logo_admin.png
    templates:
        layout: AcmeDemoBundle::standard_layout.html.twig  
 #...another Sonata and Symfony settings... 
```

```
{# File src/Acme/Bundle/DemoBundle/Resources/views/standard_layout.html.twig #}
{% extends 'SonataAdminBundle::standard_layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/acmedemo/js/jquery_admin.js') }}" type="text/javascript"></script>
 {% endblock %} 
```

```
 //File web\bundles\acmedemo\js\jquery_admin.js
 jQuery(document).ready(function(){
      jQuery.datepicker.setDefaults( jQuery.datepicker.regional[ "" ] );
      jQuery(".datepicker").datepicker( jQuery.datepicker.regional[ "en" ]);
 }); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-06T15:41:26.560

我知道这是个老话题，但无论如何它对我有点帮助，所以也许它会在未来帮助别人。

我找到了一种为 datepicker 设置日期格式的方法：

```
$datagridMapper->add('createdAt', 'doctrine_orm_date_range', [
    'field_type'=>'sonata_type_date_range_picker',
    'field_options' => [
        'field_options' => [
            'format' => 'yyyy-MM-dd'
        ]
    ]
]); 
```

默认情况下，格式参数设置在 Sonata\CoreBundle\Form\Type\DatePickerType 中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-20T11:53:50.450

如果您需要 Symfony 4 中的日期时间范围过滤器

[![在此处输入图像描述](../Images/d0d1791a8585e975f9b528afa74eac99.png)](https://i.stack.imgur.com/8nkNG.png)

您可以使用：

```
# config/packages/twig.yml
twig:
    form_themes:
        - '@SonataCore/Form/datepicker.html.twig' 
```

**注意**：对于**奏鸣曲 3**，您必须使用：

```
# config/packages/twig.yml
twig:
    form_themes:
        - '@SonataForm/Form/datepicker.html.twig' 
```

管理类：

```
use Sonata\CoreBundle\Form\Type\DateTimeRangePickerType;

protected function configureDatagridFilters(DatagridMapper $datagridMapper): void
{
    $datagridMapper->add(
        'createdAt', 
        'doctrine_orm_datetime_range', [
        'field_type'=> DateTimeRangePickerType::class,
    ]);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-08-13T12:48:33.060

对于**奏鸣曲 3**，您必须使用 @SonataForm 而不是 @SonataCore：

```
# config/packages/twig.yml
twig:
    form_themes:
        - '@SonataForm/Form/datepicker.html.twig' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-18T09:36:09.063

在 Symfony 4 中，我必须对日期时间过滤器执行以下操作：

```
# config/packages/twig.yml
twig:
    form_themes:
        - '@SonataCore/Form/datepicker.html.twig' 
```

在我的管理类中，我必须像这样配置过滤器：

```
use Sonata\CoreBundle\Form\Type\DateTimePickerType;

...

protected function configureDatagridFilters(DatagridMapper $datagridMapper): void
{
    $datagridMapper->add('createdAt', 'doctrine_orm_datetime', [
        'field_type'=> DateTimePickerType::class,
    ]);
} 
```

# css - CSS Div / Box 字体问题

> ID：14443560
> 
> 赞同：0
> 
> 时间：2013-01-21T16:58:27.827
> 
> 标签：css, fonts, html

在 CSS 框中有一个奇怪的错误。我的段落标签之间的间距很大：

![](../Images/36886cbb97c75a6ed7f465da4d72ea88.png)

如您所见，标题和段落之间存在多行间距

HTML 看起来像这样：

```
<div class="exampleboxshadowf">
<span class="examplelabelboxshadow">

<h1>Introduction</h1>
<p>Some info</p>
<h1><em>Location, Location</em></1>
<p>More Info</p> 
```

盒子的 CSS 是：

```
div.exampleboxshadowf {
background-color: #eee;
position:fixed;
top:30px;
left:100px;
float:none;
margin-top: auto;
margin-right: auto;
height: 575px;
width:840px;
text-align: center;
-moz-box-shadow: 0 0 5px 5px #888;
-webkit-box-shadow: 0 0 5px 5px#888;
box-shadow: 0 0 5px 5px #888;
 overflow: scroll;
} 
```

我已经设置了字体和 p, h 标签，例如：

```
h1 {
font-size: 16px;
font-family: 'Noticia Text';
}

h2 {
font-size: 18px;
 font-family: 'Noticia Text';

}

p {
font-size: 15px;
  font-family: 'Noticia Text';

}

body, span {
margin:0;
padding:0;

} 
```

Noticia Text 是一种导入的 Google 字体，我可以确认它工作正常。

知道是什么导致了这种奇怪的间距吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:00:19.420

指定`h1`和`h2`以及 的边距`<p>`。另请注意，当您拥有 时`position: fixed`，您不需要边距。这是代码：

```
div.exampleboxshadowf {
     background-color: #eee;
     position:fixed;
     top:30px;
     left:100px;
     overflow: scroll;
     height: 575px;
     width: 840px;
     text-align: center;
     -webkit-box-shadow: 0 0 5px 5px #888;
        -moz-box-shadow: 0 0 5px 5px #888;
             box-shadow: 0 0 5px 5px #888
}
div.exampleboxshadowf h1 {
     font-size: 16px;
     font-family: 'Noticia Text';
     margin: 5px auto
}
div.exampleboxshadowf h2 {
     font-size: 18px;
     font-family: 'Noticia Text';
     margin: 5px auto
}
div.exampleboxshadowf p{
     margin: 5px
} 
```

# java - OpenOffice 电子表格监听器

> ID：14443565
> 
> 赞同：1
> 
> 时间：2013-01-21T16:58:46.283
> 
> 标签：java, openoffice.org, openoffice-calc, libreoffice, uno

我想用 Java 跟踪用户对 LibreOffice / OpenOffice 电子表格的输入。目前，我从[第一个 LibreOffice 示例](http://api.libreoffice.org/examples/DevelopersGuide/examples.html#FirstSteps)开始，并想附上类似于

*   `com.sun.star.chart.XChartDataChangeEventListener`（如此处所示[）](http://wiki.openoffice.org/wiki/Documentation/DevGuide/Charts/Data_Access)，也许是
*   `com.sun.star.container.XContainerListener`到电子表格。

尝试将 XSpreadsheetDocument 转换为 XContainer 时收到 NullPointerException。我发现 API 文档非常难以浏览，并且非常感谢您提供以下提示：

*   找出 XSpreadsheetDocument 的类型层次结构，
*   将哪个侦听器附加到哪个接口，以及
*   该接口的工厂链

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:50:34.980

通过猜测，我发现`XComponent`加载的 from`private:factory/scalc`属于一个可以强制转换为 interface 的服务`com.sun.star.util.XModifyBroadcaster`，这反过来又允许安装一个`com.sun.star.util.XModifyListener`.

这是一个工作示例：

```
import com.sun.star.beans.PropertyValue;
import com.sun.star.comp.helper.Bootstrap;
import com.sun.star.comp.helper.BootstrapException;
import com.sun.star.frame.XComponentLoader;
import com.sun.star.lang.EventObject;
import com.sun.star.lang.XComponent;
import com.sun.star.lang.XMultiComponentFactory;
import com.sun.star.sheet.XSpreadsheetDocument;
import com.sun.star.uno.Exception;
import com.sun.star.uno.UnoRuntime;
import com.sun.star.uno.XComponentContext;
import com.sun.star.util.XModifyBroadcaster;

public class CalcListener {
    public static void main( String[] args) {
        try {
            // Lots of verbose code to get a Document instance
            final XComponentContext xRemoteContext = Bootstrap.bootstrap();
            if( xRemoteContext == null ) {
                System.err.println("ERROR: Could not bootstrap default Office.");
                return;
            }
            final XMultiComponentFactory xRemoteServiceManager = xRemoteContext.getServiceManager();
            final Object desktop = xRemoteServiceManager.createInstanceWithContext( "com.sun.star.frame.Desktop", xRemoteContext );
            final XComponentLoader xComponentLoader = (XComponentLoader) UnoRuntime.queryInterface(XComponentLoader.class, desktop);

            final PropertyValue[] loadProps = new PropertyValue[0];
            final XComponent xSpreadsheetComponent = xComponentLoader.loadComponentFromURL("private:factory/scalc", "_blank", 0, loadProps);

            // Cast to interface Document, to do anything useful later
            final XSpreadsheetDocument xSpreadsheetDocument = (XSpreadsheetDocument) UnoRuntime.queryInterface(XSpreadsheetDocument.class, xSpreadsheetComponent);

            // Cast to interface XModifyBroadcaster to attach listener
            final XModifyBroadcaster messageHost = (XModifyBroadcaster) UnoRuntime.queryInterface(XModifyBroadcaster.class, xSpreadsheetDocument );
            messageHost.addModifyListener( new XModifyListener()
            {
                public void modified(EventObject eo) {
                    System.out.println("modified:"+eo.Source);
                }

                public void disposing(EventObject eo) {
                    System.out.println("disposing:"+eo);
                }
            });

            // Do possibly useful stuff
            // ...

        } catch (BootstrapException | Exception ex) {
            System.err.println("bad things happened:"+ex);
        }
    }
} 
```

# linux - 如何创建一个基本的 NASM 汇编 (Linux) 计算器来添加两个整数？

> ID：14443566
> 
> 赞同：1
> 
> 时间：2013-01-21T16:58:46.983
> 
> 标签：linux, assembly, x86, nasm

我尝试了一下，并尝试了：

```
section .data
promptmsg: db 'Enter integer: '
msgsize: equ $-promptmsg

section .bss       ;creating variables to store input
firstnum: resb 6
secondnum: resb 6

section .text
global _start

_start:

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

mov eax, 4          ;system call to write
mov ebx, 1
mov ecx, promptmsg
mov edx, msgsize
int 80h

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

mov eax, 3               ;system call to read
mov ebx, 0
mov ecx, firstnum
mov edx, 6
int 80h

push firstnum

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

mov eax, 4              ;system call to write
mov ebx, 1
mov ecx, promptmsg
mov edx, msgsize
int 80h

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

mov eax, 3                ;system call to read
mov ebx, 0
mov ecx, secondnum
mov edx, 6
int 80h

push secondnum

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

pop eax
pop ebx
add eax, ebx         ;attempt to add firstnum and secondnum and store in EAX

push eax

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

mov eax, 4          ;once again a system call to write
mov ebx, 1
pop ecx
mov edx, 7
int 80h

xor eax, eax
xor ebx, ebx
xor ecx, ecx
xor edx, edx

mov eax, 1             ;exit safely and return 0
mov ebx, 0
int 80h 
```

对所有 XOR 指令感到抱歉，我只是想确保在将寄存器用于系统调用之前清除它们，我仍在学习汇编，不确定哪些指令会使寄存器为空。

当我编译、链接和运行它时，只有包含 ENTER 字符，即换行符，我才能输入两个整数。不能将整数添加到其中，因此这已经引起了问题。因此，当我同时输入它们时，程序的屏幕上没有进一步的输出，它就结束了。

我该如何纠正？

（在这种情况下，不能选择将 C 或 C++ 与 ASM 结合使用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:28:40.570

这不是关于“纠正”你的代码，因为它是关于编写它的缺失部分。

您必须解析整数，忽略分隔空格。添加它们，然后将结果转换为字符串。然后输出这个字符串。调用`scanf`or `strtol`or`printf`可能对您来说是不可接受的，因为它使用的是标准 C 库。

# iphone - 写入 UITextView

> ID：14443576
> 
> 赞同：1
> 
> 时间：2013-01-21T16:59:16.557
> 
> 标签：iphone, ios, objective-c

我需要使用预定义的“Office”位置字符串从所有日历中检索所有 iOS 事件，然后将结果写入 NSLog 和 UITextView。

到目前为止，这是我的代码：

```
 #import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController

    @synthesize eventStore = _eventStore;
    @synthesize events     = _events;
    @synthesize eventTextView;

    - (void)viewDidLoad
    {

        // Store a reference to the event store
        EKEventStore *eventStore = [[EKEventStore alloc] init];

       [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted,            
    NSError *error) {
                // handle access here
            if (granted)
                NSLog (@"Access granted");
        }];
        self.eventStore = eventStore;

        // Define a range of event dates we want to display

        NSDate *startDate = [NSDate dateWithTimeIntervalSinceNow:(-1*60*60)]; // 1 hour in  

    the past
        NSDate *endDate   = [NSDate dateWithTimeIntervalSinceNow:(60*60*24*365)]; // 1 year  

    from now

        // Create a predicate to search all celndars with our date range

        NSPredicate *predicate = [self.eventStore predicateForEventsWithStartDate:startDate
        endDate:endDate calendars:nil];

        // Query the event store using the predicate.

        NSArray *results       = [self.eventStore eventsMatchingPredicate:predicate];

        //Convert the results to a mutable array and store so we can implement swipe to 

    delete

        NSMutableArray *events = [[NSMutableArray alloc] initWithArray:results];
        self.events = events;

        // Load the events from the event store
        //[self reloadEvents:nil];

        [super viewDidLoad];
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    - (void) reloadEvents:(id)sender
    {
   }

    - (IBAction)getEvents:(id)sender {

        int i;
        int eventCount;

        eventCount = [self.events count];

        for (i = 0; i < eventCount; i++){

            self.eventTextView.text = [[self.events objectAtIndex: i]title], [[self.events 

    objectAtIndex: i]startDate], [[self.events objectAtIndex: i]endDate], [[self.events     

    objectAtIndex: i]location];

            NSLog (@"Event Title: %@, Event Start Date: %@, Event End Date: %@, Event 

    Location: %@",[[self.events objectAtIndex: i]title],
                [[self.events objectAtIndex: i]startDate],
                [[self.events objectAtIndex: i]endDate],
                [[self.events objectAtIndex: i]location]);
        }

    }
    @end 
```

**UITextView“eventTextView”中的结果是，我只得到了我的最后一个事件标题，没有别的，但在我的控制台中，我得到了我所要求的一切。我会以正确的方式解决这个问题吗？**

另外，我收集到您可以订阅事件存储以获取日历的通知/更改？在上述情况下，这将如何工作？我假设这将取代按钮操作，特别是如果应用程序设置为进入后台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:09:57.063

问题在这里：

```
self.eventTextView.text = [[self.events objectAtIndex: i]title], [[self.events 
objectAtIndex: i]startDate], [[self.events objectAtIndex: i]endDate], [[self.events     
objectAtIndex: i]location]; 
```

请注意，您在循环的每次迭代中都*替换*了 UITextView 的内容。你想要的是连接，在 Objective-C 中最好通过创建一个`NSMutableString`并调用`appendString`它的方法来处理。

循环外：

```
NSMutableString *textVal = [[NSMutableString alloc] init]; 
```

在你的循环内：

```
[textVal appendString:[[self.events objectAtIndex: i]title], [[self.events 
objectAtIndex: i]startDate], [[self.events objectAtIndex: i]endDate], [[self.events     
objectAtIndex: i]location]]; 
```

循环后：

```
self.eventTextView.text = [NSString stringWithString:textVal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:11:03.837

我怀疑你在 for 循环的每个循环中都覆盖了 UITextfield 中的文本，因此你只得到最后一个。

此外，只有事件标题显示为字符串，其余的我怀疑不是字符串（是 NSDates 等的混合），需要转换为字符串以在 UITextfield 中显示。

# internet-explorer - 哪些 plupload 运行时适用于 IE？

> ID：14443577
> 
> 赞同：3
> 
> 时间：2013-01-21T16:59:18.827
> 
> 标签：internet-explorer, cross-browser, plupload

[plupload](http://www.plupload.com/)允许不同的运行时技术进行文件上传。

尽管它列出了一些与 HTML 5 不兼容的浏览器，但它似乎根本没有回答哪个浏览器具有此运行时可用的基本问题。

哪些浏览器不支持 plupload 的 HTML 5 运行时？

`plupload`允许您自定义运行时列表以及尝试它们的顺序。我想确保，鉴于我需要支持的有限浏览器列表，我可以依赖运行时的一个子集。例如，支持 Flash 可能很困难，所以我想知道是否需要包含它并支持它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-05T15:19:56.670

一个基本的答案和相对主观的答案是：

我不再考虑运行`gears`时`silverlight`和`browserplus`.

在功能方面，`HTML5`> `Flash`> `HTML4`。

最后：

*   IE 10 支持 HTML5
*   IE 8/9 支持 Flash（如果已安装），否则基本分母是 HTML4。

这意味着我必须测试五个场景。

我发现对所有这些运行时的支持都是近似的，以防元素以不同的方式被隐藏或移动。例如，在一种情况下，`plupload`早期初始化适用于 IE 10/HTML5 和 IE 8/9/HTML4，但不适用于 Flash，而后期初始化仅适用于 IE 8/9/Flash，而在其他情况下无效。基本情况很难隔离，只能开[这个issue](https://github.com/moxiecode/plupload/issues/788)。

我还没有在任何其他浏览器的任何运行时遇到任何此类问题。

希望这可以帮助某人。

# jquery-ui - jqueryui 可调整大小的句柄不随非 jqueryui-resizable-resize 上的元素移动

> ID：14443580
> 
> 赞同：0
> 
> 时间：2013-01-21T16:59:28.887
> 
> 标签：jquery-ui, jquery-ui-resizable

如果我使用 jqueryui 使一个元素可调整大小并且我在不使用 jqueryui 可调整大小的情况下更改此元素的大小，但例如通过 jquery.css('width')，则 jqueryui 可调整大小的句柄不会随元素移动。

HTML：

```
<img id="image" src="http://www.google.com.br/images/srpr/logo3w.png"/>
<input id="resizeImage" type="button" value="Resize Image" /> 
```

脚本：

```
var image = $('#image');
image.resizable();
$('#resizeImage').on('mouseup', function () {
  image.css('width', parseInt(image.width() - 1, 10) + 'px');
}); 
```

[例子](http://jsfiddle.net/Mghhf/2/)

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:42:32.827

通过破坏和重新初始化可调整大小的方法，它可以工作，但这对我来说似乎有点矫枉过正......

```
var image = $('#image');
image.resizable();
$('#resizeImage').on('mouseup', function () {
image.resizable('destroy')
  .css('width', parseInt(image.width() - 1, 10) + 'px')
  .resizable();
}); 
```

[http://jsfiddle.net/Mghhf/3/](http://jsfiddle.net/Mghhf/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:49:03.150

当您使用`.resizable()`时，它会将该元素包装在`<div class="ui-wrapper"></div>`. 我建议执行以下操作：

```
var image = $('#image');
image.resizable();
$('#resizeImage').on('mouseup', function () {
     image.css('width', parseInt(image.width() - 1, 10) + 'px');
     $('.ui-wrapper').css('width', parseInt(image.width() - 1, 10) + 'px');
}); 
```

演示：http: [//jsfiddle.net/Mghhf/5/](http://jsfiddle.net/Mghhf/5/)

希望这可以帮助！

# python - 使用 ctypes 将 pcap_stat 结构传递给 python 中的 pcap_stats

> ID：14443595
> 
> 赞同：0
> 
> 时间：2013-01-21T17:00:23.367
> 
> 标签：python, struct, ctypes, pcap

我在 python 中通过 ctypes 使用 libpcap。我写了一个小包装器，所以我可以更方便地访问 pcap 函数。例如 pcap_geterr 它看起来像

```
# char  *pcap_geterr(pcap_t *p);
geterr = _pcap.pcap_geterr
geterr.argtypes = [ctypes.c_void_p]
geterr.restype = ctypes.c_char_p 
```

但是现在我需要使用 pcap_stats 并且在将 pcap_stat 结构传递给函数时遇到了麻烦。

代码看起来像

```
class pcap_stat(ctypes.Structure):
    '''
    struct pcap_stat {
        u_int ps_recv;        /* number of packets received */
        u_int ps_drop;        /* number of packets dropped */
        u_int ps_ifdrop;    /* drops by interface, not yet supported */
        #ifdef WIN32
        u_int bs_capt;        /* number of packets that reach the application */
        #endif /* WIN32 */
    };
    '''
    _fields_ = [("ps_recv", ctypes.c_uint), ("ps_drop", ctypes.c_uint), ("ps_ifdrop", ctypes.c_uint)]

# int   pcap_stats(pcap_t *p, struct pcap_stat *ps);
stats = _pcap.pcap_stats
stats.argtypes = [ctypes.c_void_p, ctypes.c_void_p] # is the second argument right?
stats.restype = ctypes.c_uint 
```

我不确定 stats 的第二个参数类型是否正确，然后如何将 C 结构传递给 python 中的函数。在 C 中，它可能看起来像

```
struct pcap_stat stat;
pcap_stats(handle, &stat); 
```

但是在 python 中到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:19:18.670

您需要声明任何指针参数的正确类型；显着`struct pcap_stat *ps`变为`ctypes.POINTER(pcap_stat)`.

然后：`s = pcap_stat(); pcap_stats(handle, ctypes.byref(s))`。

另请参阅[http://cffi.readthedocs.org](http://cffi.readthedocs.org)以了解可能比 ctypes 更易于使用的不同界面。

# c++ - 如何在 C++ 中添加非标准库？

> ID：14443597
> 
> 赞同：0
> 
> 时间：2013-01-21T17:00:26.317
> 
> 标签：c++, ubuntu, shared-libraries, static-libraries

如何在 C++ 中添加非标准库，以便我可以像标准库一样添加它，而无需在我的 makefile 中链接 -I 选项？

出现问题是因为我在多台服务器上使用不同的绝对路径目录开发代码。我正在使用 Eigen C++ 库，并且可以在生成文件“-I /usr/local/include/eigen/ -c norm.cpp constants.cpp”中调用以下命令时使其工作。当我传输服务器时出现问题，绝对路径不一样，每次编译时都必须更改它。我知道我可以给它一个绝对路径，但由于我经常使用这个库，我不想创建奇怪的相对路径名。

我正在使用 gcc 并尝试将 eigen 文件夹放在 /usr/include/c++/4.5、/usr/include/c++/4.5.2 和 /usr/local/include/ 中，但它仍然不起作用。我目前使用的是 Ubuntu 11.04。

如何找到 gcc 搜索的标准库以及如何添加非标准库以便可以像“#include”一样包含它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:09:18.783

默认情况下，GCC 会在以下目录中查找：

```
/usr/local/include/
/usr/include/ 
```

您可以通过编辑以下 shell 变量来控制 gcc 搜索路径：

```
$ C_INCLUDE_PATH=/the/new/include/path 
$ export C_INCLUDE_PATH 
```

对于 C++：

```
$ CPLUS_INCLUDE_PATH=/the/path/to/search 
$ export CPLUS_INCLUDE_PATH 
```

您可以对库路径执行相同的操作：

```
$ LIBRARY_PATH=/the/path/whatever
$ export LIBRARY_PATH 
```

我希望这能给你答案。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:11:20.180

看看[ranlib](http://unixhelp.ed.ac.uk/CGI/man-cgi?ranlib)和[libtool](http://www.gnu.org/software/libtool/)。

# javascript - 使用 javascript、jquery 突出显示菜单链接

> ID：14443605
> 
> 赞同：-1
> 
> 时间：2013-01-21T17:00:53.403
> 
> 标签：javascript, jquery, html, css

我正在使用以下脚本进行主菜单突​​出显示（menu1）

HTML

*   菜单1
*   菜单2

脚本

```
var link = document.location.href.split('/').slice(-1);   // retrieve page name
$('nav#test1 li a.active').removeClass('active');        // remove class 'active'
$('nav#test1 li a[href$="'+link+'"]').addClass('active'); 
```

例如：www.example.com/content/menu1

菜单1 菜单2 菜单3...

但是，如果 URL 是

www.example.com/content/menu1/story.html

如果标题/页面通过 jquery 或 javascript 附加 menu1，我如何突出显示 menu1。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:07:22.027

```
var link = document.location.href.split('/')[4]; 
```

应该能解决你的问题

# android - ViewPager 出现 NullPointerException 错误

> ID：14443607
> 
> 赞同：0
> 
> 时间：2013-01-21T17:01:12.873
> 
> 标签：android, nullpointerexception, android-viewpager, onclicklistener, android-button

我一直在收到 NullPointerException 错误`addSiteButton.setOnClickListener(new View.OnClickListener(){`

我一直在想办法解决这个问题，但我做不到。我基本上想要做的是单击特定按钮并让它滚动动画到所需的页面。

```
public class fieldsActivity extends Activity {

Button addSiteButton;
Button cancelButton;
Button signInButton;

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // to create a custom title bar for activity window
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.fields);
    // use custom layout title bar
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.topbar);

    Pager adapter = new Pager();
    final ViewPager mPager = (ViewPager) findViewById(R.id.fieldspager);
    mPager.setAdapter(adapter);
    mPager.setCurrentItem(1);

    addSiteButton = (Button) findViewById(R.id.addSiteButton);

    //Error is happening on the line below.
    addSiteButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            mPager.setCurrentItem(2, true);

        }
    });

    cancelButton = (Button) findViewById(R.id.cancel_button);
    signInButton = (Button) findViewById(R.id.sign_in_button);

}

 private class Pager extends PagerAdapter {

    public int getCount() {
        return 3;

    }

    @Override
    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;
        switch (position) {
            case 0:
                resId = R.layout.field01;
                break;
            case 1:
                resId = R.layout.add_site;

                break;
            case 2:
                resId = R.layout.main;
                break;

        }

        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeViewAt(arg1);
    }
    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }
    @Override
    public Parcelable saveState() {
        return null;
    }

}

} 
```

这是 ViewPager 所在的 XML 布局。

字段.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

<android.support.v4.view.ViewPager
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/fieldspager" />

</RelativeLayout> 
```

这是按钮所在位置的布局。

add_site.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:focusableInTouchMode="false"
            android:background="@drawable/bg"
            android:visibility="visible"
            android:focusable="false"
            android:gravity="center_horizontal">

<Button style="@style/addWebSiteButton"
        android:id="@+id/addSiteButton"
        android:text="Add Website"
        android:layout_marginTop="20dp"
        android:textStyle="normal"
        android:visibility="visible"
        android:singleLine="true"
        android:layout_alignParentTop="false"
        android:layout_alignParentLeft="false"
        android:layout_alignParentRight="false"
        android:clickable="true"
        android:enabled="true"
        android:layout_marginBottom="20dp"
        android:layout_centerHorizontal="true"
        />

<ImageView
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:id="@+id/imageView"
        android:layout_below="@+id/addSiteButton"
        android:background="@drawable/line_dividers"
        android:layout_centerHorizontal="true"/>

<ListView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/listView"
        android:layout_below="@+id/imageView"/>

</RelativeLayout> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:09:10.280

您正在尝试从 fields.xml 获取 Button 的 id，但在 add_site.xml 中声明。这就是你得到空指针异常的原因。

# verilog - 在verilog中为模块实例中的寄存器赋值

> ID：14443608
> 
> 赞同：0
> 
> 时间：2013-01-21T17:01:12.997
> 
> 标签：verilog

我是verilog的初学者。我试图执行此代码以将值存储在另一个模块实例中的寄存器中。这是两个模块。

```
module main;
reg [15:0] A;
wire [15:0] B;
initial
begin
    A = 16'h1212;
end
copy a(B,A);
endmodule  

module copy(B,A);
input [15:0] A;
output reg [15:0] B;
initial
   B=A;
endmodule 
```

代码编译得很好，但在执行时 B 的值是“未知的”。如果无法进行这样的分配，是否有任何其他方法可以将值分配给模块实例中的寄存器（从输入到该实例）？

我正在使用 ModelSim Altera 网络版 6.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:34:22.807

在您的`copy`模块中，更改：

```
initial 
   B=A; 
```

到：

```
assign B = A; 
```

`initial`语句仅在仿真开始时评估一次，并且通常不可综合，尽管一些 FPGA 工具可能会支持它们。

你想要的是一个连续的分配，这就是什么`assign`。

这应该使您达到 B 是您期望的值的程度。虽然我应该补充一点，这并不意味着您正在分配一个实际的硬件寄存器。

编辑：您还需要删除复制模块上`reg`的声明部分。`outout reg [15:0] B`您不能对`reg`类型进行连续分配。

编辑：要在评论中回答您的问题，如果您想分配 a`reg`您需要在程序块中这样做，例如`always`对输入敏感的块。

```
always @(A) begin
  B = A;   // B is declared as a reg
end 
```

**仅仅因为 B 被声明为一种`reg`类型并不意味着它是一个物理寄存器。** 这里的两个例子是等价的，都描述了组合逻辑。如果你真的想要一个触发器，你需要添加一个时钟。

# nginx - 在 OS X Mountain Lion 上使用 nginx 安装乘客时出错

> ID：14443616
> 
> 赞同：2
> 
> 时间：2013-01-21T17:01:39.720
> 
> 标签：nginx, rvm, passenger, homebrew, failed-installation

所以我正在关注本[教程](http://shapeshed.com/installing-passenger-3-with-rvm-and-nginx-on-osx/)，大约在编译 nginx 的一半时，“看起来好像出了点问题”。

所以，我已经安装了 RVM 并且可以正常工作，并且还安装了Passenger gem。我还使用 Homebrew 安装了 nginx，它也可以。

那么，我尝试：

```
rvmsudo `which passenger-install-nginx-module` 
```

我在[这里](https://stackoverflow.com/a/13540132/962144)找到的。

当提示我是否要安装新版本的 nginx，或者重新编译支持乘客的 Homebrew 时，我选择选项 2。当它询问源代码在哪里时，输入：

```
/Library/Caches/Homebrew/nginx-1.2.6 
```

（我对下载进行了 tar 处理，并检查了该目录中的所有内容是否存在且正确。）

然后，当它问我在哪里安装新的重新编译的 nginx 时，我说和旧的目录相同：

```
/usr/local/Cellar/nginx/1.2.6/sbin 
```

我将多余的参数留空，然后按 Enter 两次。

它运行了几分钟，开始编译和安装 nginx，但随后失败。这是最后几行：

```
objs/ngx_modules.o \
    /Users/alex/.rvm/gems/ruby-1.9.3-p374/gems/passenger-3.0.19/ext/nginx/../common/libpassenger_common.a /Users/alex/.rvm/gems/ruby-1.9.3-p374/gems/passenger-3.0.19/ext/nginx/../common/libboost_oxt.a -lstdc++ -lpthread -lm -lpcre -lssl -lcrypto -lz
Undefined symbols for architecture x86_64:
  "_pcre_free_study", referenced from:
      _ngx_pcre_free_studies in ngx_regex.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make[1]: *** [objs/nginx] Error 1
make: *** [build] Error 2
--------------------------------------------

It looks like something went wrong

Please read our Users guide for troubleshooting tips:

   /Users/alex/.rvm/gems/ruby-1.9.3-p374/gems/passenger-3.0.19/doc/Users guide Nginx.html

If that doesn't help, please use our support facilities at:

   https://www.phusionpassenger.com

We'll do our best to help you. 
```

我检查了 nginx 没有运行，我还尝试卸载 Homebrew 版本的 nginx，使用默认值重新运行脚本，但它仍然失败。

我安装了最新版本的 XCode 和命令行实用程序的 Mountain Lion。有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:47:43.330

它最终成为一个问题`pcre`。我只是跑

```
brew update pcre 
```

并使用与以前相同的选项再次运行安装程序，并且成功了。

# javascript - 你会如何编写这个计算器？

> ID：14443619
> 
> 赞同：-3
> 
> 时间：2013-01-21T17:01:52.557
> 
> 标签：javascript, css, html5-canvas, calculator

我需要制作一个带有 5 个数字输入的网络计算器，结果应该如附图所示。红色和蓝色区域应根据输入值更改其大小。使用静态背景是行不通的，它必须像第二张图像一样在某些输入值上进行缩放。

你会用什么？CSS&javascript？我试图将图像转换为 carnvas 没有运气，我得到了 4 兆字节的代码，将它转换为 svg 也没有用，我只得到了红色的 poligon。

![在此处输入图像描述](../Images/d622da52ca85ec5cda15293275b617af.png) ![在此处输入图像描述](../Images/752546ab12c905e037c9a5c9026f07bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:07:26.410

您可以使用 Javascript 轻松绘制此图。下面的链接应该可以帮助您入门。

[如何在 HTML5 画布上绘制多边形](https://stackoverflow.com/questions/4839993/how-to-draw-polygons-on-an-html5-canvas)

# jquery - 鼠标位置交互图

> ID：14443623
> 
> 赞同：0
> 
> 时间：2013-01-21T17:02:02.013
> 
> 标签：jquery

我目前有一个根据鼠标位置更新的图像。查看 [http://www.fore6.com/?p=533][1]

[1]：[http](http://www.fore6.com/?p=533) ://www.fore6.com/?p=533让您了解我的意思。

问题是我需要将其应用到多个图像，并且每个图像都需要独立于另一个进行动画处理。目前他们都同时动画，即; 他们需要独立制作动画，因为每个图像的鼠标位置都不同！

我可以通过为每个图像重复该函数并更改变量来使其工作，但这是非常多的代码。我怎样才能在一个函数中做到这一点？

我猜我可能需要将每个图像放入一个数组或使用 $(this)，但似乎无法弄清楚如何实现它。

任何帮助将不胜感激。我正在使用的代码如下：

```
var imageX = null;
var imageY = null;

imageX = $('.anim-photo').offset().left;
imageY = $('.anim-photo').offset().top;

$(document).mousemove(function(event) {
    var mousePos = new Array(event.pageX, event.pageY);
    interact(mousePos, ["0px", "-288px", "-576px"]);
})

function interact(mouseCord, aniCord) {
    if (mouseCord[0] < imageX && mouseCord[1] < imageY){ // Box-1
    $(".anim-photo").css("background-position", aniCord[0]+" 0px");

} else if (mouseCord[0] > imageX && mouseCord[0] < imageX+285 && mouseCord[1] < imageY){ // Box-2
    $(".anim-photo").css("background-position", aniCord[1]+" 0px");

} else if (mouseCord[0] > imageX+285 && mouseCord[1] < imageY){ // Box-3
    $(".anim-photo").css("background-position", aniCord[2]+" 0px");

} else if (mouseCord[0] < imageX && mouseCord[1] > imageY && mouseCord[1] < imageY+357){ // Box-4
    $(".anim-photo").css("background-position", aniCord[0]+" -360px");

} else if (mouseCord[0] > imageX && mouseCord[0] < imageX+285 && mouseCord[1] > imageY && mouseCord[1] < imageY+357){ // Box-5
    $(".anim-photo").css("background-position", aniCord[1]+" -360px");

}else if (mouseCord[0] > imageX+285 && mouseCord[1] > imageY && mouseCord[1] < imageY+357){ // Box-6
    $(".anim-photo").css("background-position", aniCord[2]+" -360px");

} else if (mouseCord[0] < imageX && mouseCord[1] > imageY+357){ // Box-7
    $(".anim-photo").css("background-position", aniCord[0]+" -720px");

} else if (mouseCord[0] > imageX && mouseCord[0] < imageX+285 && mouseCord[1] > imageY+357){ // Box-8
    $(".anim-photo").css("background-position", aniCord[1]+" -720px");

} else if (mouseCord[0] > imageX+285 && mouseCord[1] > imageY+357){ // Box-9
    $(".anim-photo").css("background-position", aniCord[2]+" -720px");
}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T11:25:06.323

你只需要一个像这样的图像元素：

```
<img id="face" src="face-follower/0.jpg" alt="face"> 
```

假设我们有一组名称为：000.jpg 、 001.jpg 和 ... 其中的图像：

1.  第一个 num 表示如果为 1，鼠标位置在中间以上，如果为 0，则在中间以下。
2.  第二个 num 如果为 0，则显示鼠标在中间的左侧，如果为 1，则显示鼠标的右侧。
3.  第三个数字将页面的每个四分之一分为 4 个部分，角度为 22.5 度

获取图像的中心并检查光标的位置与图像的中心。然后根据位置创建图像的名称：

```
var element = $('#face');
var top = element.offset().top + element.height()/2;
var left = element.offset().left + element.width()/2;

var a = 0
, b = 0 
, c = 0;
$('body').mousemove(function()
{
var x=Math.floor(event.clientX - left);
var y=Math.floor(event.clientY - top);
if(x > 0)
  a = 1;
else if(x < 0)
  a = 0;
if(y > 0)
  b = 0;
else if(y < 0)
  b = 1;
if(Math.abs(x) > Math.abs(y))
{
  c = 2;
  if(Math.abs(x)>Math.abs(y)*2.4)
    c = 3;

}
else if(Math.abs(y) > Math.abs(x))
{
  c = 1;
  if (Math.abs(y)>Math.abs(x)*2.4)
    c = 0;
} 
```

现在你已经有了完整的 3 个字符的图像名称，改变它的来源 element.attr('src','face-follower/'+a+b+c+'.jpg'); });
[工作样本](https://github.com/ussr1287/alihaghighatkhah/tree/master)

# java - 从字符串转换为日期后如何获得正确的日期

> ID：14443625
> 
> 赞同：0
> 
> 时间：2013-01-21T17:02:10.223
> 
> 标签：java, date, simpledateformat

我正在使用 SimpleDateFormat 将 Date 从 String 类型 Date 转换为 Date 类型 Date，但是我得到的结果日期正在发生变化。谁能告诉我为什么它会发生变化 另外我应该使用什么来从 String而不是**获取正确的 Date 类型日期**我到这里时换了一个。

```
 Date d = null;
    String startTime="2012-03-17 16:00:00 PM";
    DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss a");
    try {
          d=  sdf.parse(startTime);
         } catch (ParseException e) {}

System.out.println("DD="+d) //printing Sun Mar 18 04:00:00 IST 2012 ? why this 
   //Date enterd was 17 Mar 2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:06:10.897

如果您将 24 小时时钟和 AM/PM 标记结合起来，则会产生歧义。在您的情况下，您应该使用“HH”（大写 H）来解析 0-23 范围内的小时字段并忽略 AM/PM 后缀，或者使用带有适当 AM/PM 后缀的 12 小时制（在您的情况下为“04 :00:00 PM”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-03T15:59:39.070

## 您输入的日期时间字符串错误。

AM/PM 标记不适用于 24 小时格式的时间。它应该是 `2012-03-17 04:00:00 PM`或`2012-03-17 16:00:00`。

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

另外，下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

**使用`java.time`现代日期时间 API 的解决方案：**

让我们首先尝试按照您的方式进行操作：

```
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        String startDateTime = "2012-03-17 16:00:00 PM";
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("uuuu-MM-dd hh:mm:ss a", Locale.ENGLISH);
        LocalDateTime ldt = LocalDateTime.parse(startDateTime, dtf);
        System.out.println(ldt);
    }
} 
```

**输出：**

> 线程“main”java.time.format.DateTimeParseException 中的异常：无法解析文本“2012-03-17 16:00:00 PM”：ClockHourOfAmPm 的值无效（有效值 1 - 12）：16

如您所见，`java.time`API 正确地引发了一个异常，通知您该问题。`SimpleDateFormat`，另一方面，错误地解析输入字符串。

现在，让我们看看如何正确解析它。为了正确解析它，我们将使用：

1.  格式，`uuuu-MM-dd HH:mm:ss`其中`H`指定 24 小时格式。对于您的日期时间字符串，您可以使用`y`而不是，`u`但[我更`u`喜欢`y`](https://stackoverflow.com/a/65928023/10819573).
2.  函数，[`DateTimeFormatter#parse(CharSequence, ParsePosition)`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#parse-java.lang.CharSequence-java.text.ParsePosition-)索引`ParsePosition`设置为`0`.

**演示：**

```
import java.text.ParsePosition;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        String startDateTime = "2012-03-17 16:00:00 PM";
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("uuuu-MM-dd HH:mm:ss", Locale.ENGLISH);
        ParsePosition pp = new ParsePosition(0);
        LocalDateTime ldt = LocalDateTime.from(dtf.parse(startDateTime, pp));
        System.out.println(ldt);
    }
} 
```

**输出：**

```
2012-03-17T16:00 
```

[`ONLINE DEMO`](https://ideone.com/vq0SDI)

**注意：** [切勿在没有 Locale 的情况下使用 SimpleDateFormat 或 DateTimeFormatter](https://stackoverflow.com/a/65544056/10819573)。

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T17:05:13.663

`16:00:00 PM`不是有效时间，`SimpleDateFormat`将在凌晨 4:00 将其转换为第二天。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T17:07:30.607

您正在使用`hh`格式字符串，它是 12 小时格式。这是有道理的，因为你也有一个 AM/PM 指示符 ( `a`) ......但它对于 16 的值*没有*意义。

我怀疑“下午 16 点”正在转换为第二天凌晨 4 点，因此出现了问题。（奇怪的是，使用`setLenient(false)` *并没有*发现这个错误。）

*要么*使用格式`"yyyy-MM-dd HH:mm:ss"`并确保最后没有“PM”，*要么*使用现有格式但给它合理的值（04 而不是 16）。

另外，我建议：

*   对于 Java 中的日期/时间工作，使用[Joda Time](http://joda-time.sf.net)通常是一个好主意
*   *不要这样*吞下去`ParseException`。空的 catch 块是一个非常糟糕的主意。
*   当您调用时`Date.toString()`，始终使用默认时区，并且您无法更改输出格式。有时这没关系，用于快速诊断，但它可能会给人一种误导性的印象，即`Date`实际上有时区信息，而实际上没有时区信息。**

# php - 数字资产管理框架

> ID：14443628
> 
> 赞同：-1
> 
> 时间：2013-01-21T17:02:22.667
> 
> 标签：php, .net, maxscript, dam

我打算为 3ds max 制作一个非常简单的资产管理系统。

这就是我计划制作的方式。

我将在本地网络机器上制作一个网络服务器。将制作一个数据库，该数据库存储对系统上存储的文件的所有引用。我将从数据库中填充所有列表，然后将下载和导入应用程序中的文件。

我计划使用 maxscript（3dsmax 的脚本语言）和 dotnet 制作 UI 和中间层。在服务器端，我将使用 MySQL 和 php。

我是在正确的道路上还是我需要找到不同的方式。

谁能帮我这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:07:55.507

MySQL/PHP 是一个很好的组合，我已经使用了很多年。

照这样说。

3dsMax 已构建对 .NET 的支持，而 C# 将更适合您的后端服务器。您可以使用 C# 和随附的 MVC 框架构建网站。

还有一些关于如何在 3dsMax 中运行 C# 的教程。这将允许您使用 C# 连接到服务器，发送一个序列化的 C# 对象并做出相应的响应。

我认为在两者之间拥有一致框架的便利将减少开发时间。

# java - 来自 json-lib 的不想要的输出，字符串似乎是一个数组

> ID：14443631
> 
> 赞同：1
> 
> 时间：2013-01-21T17:02:33.563
> 
> 标签：java, json, json-lib

我的代码看起来像这样：

```
import net.sf.json.*;--just so you know what the library is
...
JSONArray a = new JSONArray();
JSONObject p = new JSONObject();
p.put("some_attribute1","some normal string");
p.put("some_attribute2","[3something]");
p.put("some_attribute3","[something3]");
a.add(p);
System.out.println(a.toString()); 
```

这会产生：

```
[
    {
        "some_attribute1":"some normal string",
        "some_attribute2":["3something"],
        "some_attribute3":"[something3]"
    }
] 
```

而不是期望的结果：

```
[
    {
        "some_attribute1":"some normal string",
        "some_attribute2":"[3something]",
        "some_attribute3":"[something3]"
    }
] 
```

请注意“some_attribute2”作为实际输出中的数组与所需输出中的字符串之间的区别。谁能解释这是为什么？另外，如果有一个术语可以更好地对我的问题进行分类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:24:56.540

这实际上是一个已经报告的错误。这是链接： http: [//sourceforge.net/tracker/ ?func=detail&aid=3201838&group_id=171425&atid=857928](http://sourceforge.net/tracker/?func=detail&aid=3201838&group_id=171425&atid=857928)

...看起来不再支持此库，该问题自 2011 年中期以来就存在...

我们被不再官方支持的 json-lib 库推迟了，并决定切换到 gson。这个问题可能是由于我们的代码中有太多地方没有任何好的修复或解决方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T17:56:57.080

看起来很奇怪，但是如果`put`尝试将值转换为 JSONObject 并且我正确解释了[文档](http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONObject.html)，则似乎您需要引用一些字符串：

> 如果字符串不以引号或单引号开头，并且不包含前导或尾随空格，并且不包含任何这些字符，则字符串根本不需要引用：`{ } [ ] / \ : , = ; #`并且它们看起来不像数字，如果它们不是保留字`true`,`false`或`null`.

这意味着如果你想要一个字符串，你应该使用：

```
p.put("some_attribute2","'[3something]'"); 
```

# c# - 从类型中动态获取类属性值

> ID：14443633
> 
> 赞同：11
> 
> 时间：2013-01-21T17:02:41.653
> 
> 标签：c#, reflection, custom-attributes, linq-expressions

我正在尝试编写一种方法来查找具有特定自定义属性的程序集中的所有类型。我还需要能够提供一个字符串值来匹配。需要注意的是，我希望能够在任何类上运行它并返回任何值。

例如：我想执行这样的调用

```
Type tTest = TypeFinder.GetTypesWithAttributeValue(Assembly.Load("MyAssembly"), typeof(DiagnosticTestAttribute), "TestName", "EmailTest"); 
```

到目前为止，我的方法如下所示：

```
public static Type GetTypesWithAttributeValue(Assembly aAssembly, Type tAttribute, string sPropertyName, object oValue)
{
    object oReturn = null;
    foreach (Type type in aAssembly.GetTypes())
    {
        foreach (object oTemp in type.GetCustomAttributes(tAttribute, true))
        {
            //if the attribute we are looking for matches
            //the value we are looking for, return the current type.
        }
    }
    return typeof(string); //otherwise return a string type
} 
```

我的属性如下所示：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Struct)]
public class DiagnosticTestAttribute : Attribute
{
    private string _sTestName = string.Empty;

    public string TestName
    {
        get { return _sTestName; }
    }
    public DiagnosticTest(string sTestName)
    {
        _sTestName = sTestName;
    }
} 
```

对于那些熟悉表达式的人，我真的很想能够拨打这样的电话：

```
TypeFinder.GetTypesWithAttributeValue<DiagnosticTestAttribute>(Assembly.Load("MyAssembly"), x=> x.TestName, "EmailTest"); 
```

表达式使用我的泛型类型来选择我正在寻找的属性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T17:18:00.903

这应该有效：

```
public static Type GetTypeWithAttributeValue<TAttribute>(Assembly aAssembly, Func<TAttribute, object> pred, object oValue) {
  foreach (Type type in aAssembly.GetTypes()) {
    foreach (TAttribute oTemp in type.GetCustomAttributes(typeof(TAttribute), true)) {
      if (Equals(pred(oTemp), oValue)) {
        return type;
      }
    }
  }
  return typeof(string); //otherwise return a string type
} 
```

甚至更好：

```
public static Type GetTypeWithAttributeValue<TAttribute>(Assembly aAssembly, Predicate<TAttribute> pred) {
  foreach (Type type in aAssembly.GetTypes()) {
    foreach (TAttribute oTemp in type.GetCustomAttributes(typeof(TAttribute), true)) {
      if (pred(oTemp)) {
        return type;
      }
    }
  }
  return typeof(string); //otherwise return a string type
} 
```

这是调用的样子：

```
 GetTypeWithAttributeValue<DefaultValueAttribute>(Assembly.GetCallingAssembly(), attribute => attribute.Value,
                                                    "string"); 
```

和这个分别：

```
 GetTypeWithAttributeValue<DefaultValueAttribute>(Assembly.GetCallingAssembly(),
                                                    attribute => attribute.Value == "string"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:13:03.773

很久以前，我开发了一些辅助方法来从表达式中提取属性名称，

我认为这对你有用。

```
public static string Item<TItem, TMember>(this TItem obj, Expression<Func<TItem, TMember>> expression)
{
    if (expression.Body is MemberExpression)
    {
        return ((MemberExpression)(expression.Body)).Member.Name;
    }
    if (expression.Body is UnaryExpression)
    {
        return ((MemberExpression)((UnaryExpression)(expression.Body)).Operand).Member.Name;
    }
    if (expression.Body is ParameterExpression)
    {
        return expression.Body.Type.Name;
    }
    throw new InvalidOperationException();
} 
```

查看[此文件](https://github.com/jzinedine/Cedar/blob/master/Cedar.WebPortal.Common/ObjectExtensions.cs)了解更多信息。

# html - 当在 GWT 和 GWTP 上调用新的 Presenter 时，它有一些方法可以在 html 加载完成后调用？

> ID：14443639
> 
> 赞同：5
> 
> 时间：2013-01-21T17:03:18.720
> 
> 标签：html, gwt, gwt-platform

我需要对 div css 进行一些调整。但我不能在方法 onBind() 或 onReveal() 上执行此操作，因为调用这两个方法时未加载 html。

所以我想知道在修改我的html时自动调用方法的一些方法（当调用Presenter时，html必须修改，因为将添加新的小部件）加载。

这是我必须调用的方法：

```
private void hidePopup(){
  $(".olLayerGooglePoweredBy, .olLayerGoogleV3, .gmnoprint").
    css(CSS.VISIBILITY.with
      (com.google.gwt.dom.client.Style.Visibility.HIDDEN));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:08:58.567

我不确定我是否完全理解您的问题，但在我看来，您正在寻找一种方法来了解何时将小部件添加到 DOM。

如果是这种情况，我认为 onLoad() 方法可能是您正在寻找的：http: [//google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/客户端/ui/Widget.html#onLoad%28%29](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/Widget.html#onLoad%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:19:18.860

EntryPoint 方法`onModuleLoad()`就是那个方法——这将在页面的其余部分加载后调用。GWT 不像大多数 JS 框架那样启动，您可以在页面仍在加载时编写 JS。相反，可以假设当`onModuleLoad`被调用时，页面的其余部分已经准备就绪。

# javascript - 无法清除计时器数组中的计时器

> ID：14443645
> 
> 赞同：0
> 
> 时间：2013-01-21T17:03:58.093
> 
> 标签：javascript, jquery

我在使用 Javascript 计时器时遇到问题。基本上，我有这两个页面元素：

```
<input type="checkbox" id="chk" />
<input type="button id="clearAll" value="Clear Timers" /> 
```

以及以下管理它们的 Javascript：

```
// store all page timers here
var timers = new Array(); 

// clears all page timers
function clearTimers () {
    console.log("Clearing all timers.")
    for (var i = 0; i< timers.length; i++)
            clearTimeout (timers[i]);
}

// does stuff
function foo (whichTimer, interval) {
    console.log("I am timer " + whichTimer + " running once every " + interval);
}

// document load
$(document).ready(function () {

$("#clearAll").click(clearTimers);

// check status at document load
if ( $("input#chk").is(':checked') )
{
        console.log("Input checked at start. Creating refresh.")
        t1 = setInterval("foo(1, 2000)", 2000);
        timers.push(t1); // add our timer to array
        console.log("Index of t1 is: " + timers.indexOf(t1));
}
else
{
    console.log("Input not checked at start.");
    clearTimeout(t1); //optional
}

// refresh toggle click handler
$("input#chk").click( function() {
    if ( $(this).is(':checked') )
    {
        console.log("Input got checked.");
        if (!t1) {
            console.log("We don't have a t1 yet. Creating.")
            t1 = setInterval("foo(1, 2000)", 2000);
            timers.push(t1); // add our timer to array
            console.log("Index of t1 is: " + timers.indexOf(t1));
        }
        else {
            console.log("t1 already exists and is clear. Setting new timeout.");
            t1 = setInterval("foo(1,2000)", 2000);
            console.log("Index of t1 is: " + timers.indexOf(t1));
        }
    }
    else
    {
        console.log ("Input got unchecked. Clearing t1.");
        clearTimeout(t1);
        console.log("Index of t1 is: " + timers.indexOf(t1));
    }
});

} 
```

我有一个内容动态变化的网页（包括主页内容），因此在更改内容时必须消除任何旧计时器。所以我采用了旧的计时器数组技巧来做到这一点。

此示例显示了一个切换页面自动刷新的复选框，并且在独立使用时似乎可以正常工作。

`t1`我遇到的唯一问题是，一旦刷新处于活动状态（即`setInterval`生效），该`clearTimers()`函数无法停止活动计时器。

这是一个示例控制台输出，可以查看我在说什么：

```
Input not checked at start.
Input got checked.
We don't have a t1 yet. Creating.
Index of t1 is: 0
I am timer 1 running once every 2000
I am timer 1 running once every 2000
Input got unchecked. Clearing t1.
Index of t1 is: 0
Input got checked.
t1 already exists and is clear. Setting new timeout.
Index of t1 is: 0
I am timer 1 running once every 2000
I am timer 1 running once every 2000
Input got unchecked. Clearing t1.
Index of t1 is: -1 <--------------- This is what starts to worry me
Input got checked.
t1 already exists and is clear. Setting new timeout.
Index of t1 is: -1
I am timer 1 running once every 2000
I am timer 1 running once every 2000
I am timer 1 running once every 2000
Clearing all timers.
I am timer 1 running once every 2000
I am timer 1 running once every 2000
I am timer 1 running once every 2000
I am timer 1 running once every 2000
Input got unchecked. Clearing t1\. <------- Need to uncheck the box to stop the timer
Index of t1 is: -1 
```

还要注意`Array.indexOf(t1)`在同一组操作之后如何首先返回 0，然后返回 -1。话虽如此：

问题1：为什么会这样？

问题 2：我该怎么做才能让我的代码正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:06:28.203

您正在使用`setInterval()`然后尝试`clearTimeout()`

如果要清除间隔，请使用`clearInterval()`

```
var i = setInterval(foo, 1000);
clearInterval(i);

var t = setTimeout(foo, 1000);
clearTimeout(t); 
```

# jquery - 我只想显示许多相同课程的一个下拉列表，但都显示

> ID：14443646
> 
> 赞同：0
> 
> 时间：2013-01-21T17:03:58.050
> 
> 标签：jquery, drop-down-menu

我有一个下拉导航，我试图在点击时显示下拉菜单。到目前为止，当我单击任何顶部导航链接时，都会出现所有下拉菜单。

我只想显示我单击的链接的下拉菜单。

这是 HTML 的一部分：

```
<div class="group group-primary">
<div class="wrapper contain">
<ul class="nav push-left">

<li class="dropdown-control">
<a href="/top link">Top Link 1</a>
<div class="dropdown">
<div class="primary">
<ul>
<li>
<a href="/link">
<span>link one</span>
</a>    </li>
<li>
<a href="/link2">
<span>link2</span>
</a>    </li>
</ul>
</div>
</div>
</li>

<li class="dropdown-control">
<a href="/top link">Top Link 2</a>
<div class="dropdown">
<div class="primary">
<ul>
<li>
<a href="/link">
<span>link one</span>
</a>    </li>
<li>
<a href="/link2">
 <span>link2</span>
 </a>   </li>
 </ul>
 </div>
 </div>
 </li>

 </ul>
 </div>
 </div> 
```

这是我必须选择下拉列表并使其显示的代码。

```
<script>
$("li.dropdown-control > a").click( function () {
     this.dropdown = $(".dropdown")
       $(this.dropdown).toggleClass("dropped");  
 });
</script> 
```

由于有许多“下拉”类 div，我如何只获得我点击显示的链接的一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:10:53.607

您需要确保元素之间存在关系，以便您可以判断它们是否匹配。例如：

```
<ul>
    <li class="nav">Main Item
        <ul>
            <li>Drop Down Item</li>
            <li>Drop Down Item</li>
            <li>Drop Down Item</li>
        </ul>
    </li>
    <li class="nav">Main Item
        <ul>
            <li>Drop Down Item</li>
            <li>Drop Down Item</li>
            <li>Drop Down Item</li>
        </ul>
    </li>
</ul> 
```

然后你可以使用关系来显示相关信息：

```
$(".nav").click( function () {
    $("ul", this).toggle();
}); 
```

这是一个[非常简单的演示](http://jsfiddle.net/3Z27A/)。

作为脚注，您可以仅使用 CSS 实现类似的效果：

```
li.nav {
    display: inline-block;
}

li.nav ul {
    position: absolute;
    display: none;
}

li.nav:hover ul {
    position: absolute;
    display: block;
} 
```

# javascript - 从javascript中的对象数组填充数组

> ID：14443648
> 
> 赞同：2
> 
> 时间：2013-01-21T17:04:14.857
> 
> 标签：javascript

我在一个变量上有以下对象，它是一个对象数组（一个对象数组）：

变量：myVar1

在 fireBug 上，当我调用 myVar1 时，我得到以下几行：

```
[Object { myId= "1", myName= "Name1" }, Object { myId= "2", myName= "Name2" }, Object { myId= "3", myName= "Name3" }] 
```

我也需要这些数据采用以下格式存储在变量中：

```
myVar2 = [
[1, 'Name1'],
[2, 'Name2'],
[3, 'Name3']
] 
```

我已经尝试了很多东西，比如使用 for 循环和 js 函数，但无法让它工作。我想这很容易。任何人都可以尝试解释该过程。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:06:56.910

支持以下浏览器的解决方案[`Array.map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
var result = arr.map(function(o) { return [+o.myId, o.myName]; }); 
```

为了兼容性，您可以使用**MDN**提供的[shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:07:43.343

以下应该可以解决问题：

```
var myVar2 = [];
for (var i = 0; i < myVar1; i++) {
  myVar2.push([myVar1[i].myId, myVar1[i].myName]);
} 
```**

# java - 我的对数螺旋函数计算不正确

> ID：14443651
> 
> 赞同：0
> 
> 时间：2013-01-21T17:04:28.040
> 
> 标签：java, formula, logarithm, spiral

我不太确定在哪里问这个问题（在数学和这里之间）

我尝试使用此公式绘制对数螺旋

![在此处输入图像描述](../Images/34e44e51d60e81a51ab35e38973b25f3.png)

它可以工作（它在屏幕上显示一个螺旋），但是当我改变螺距（a）时，螺旋不会改变他的螺距，只有旋转和大小（并且将 a 设置为 1 应该形成一个圆圈，但它不会）

我试过那些：

```
double step = (end - start) / sample;
        for (int i = 1;i <= sample;i++) {
            double t = start+i*step;
            coordinates[i-1][0] =  a * Math.pow(Math.E,b*t) * Math.cos(t);
            coordinates[i-1][1] = a * Math.pow(Math.E,b*t) * Math.sin(t);
} 
```

（a 和 b 是常数，开始 = -4*PI，结束 = 4*PI）

和

```
 double step = (end - start) / sample;
        for (int i = 1;i <= sample;i++) {
            double r = start+i*step;
        double t = (1/b)*Math.log(r/a);
            coordinates[i-1][0] = r* Math.cos(t);
            coordinates[i-1][1] = r* Math.sin(t);
} 
```

（a 和 b 是常数，开始 = 0，结束 = 10）

我猜我在公式中犯了一个大错误，但我没有看到其中一个。如果有帮助，我可以提供输出图片，但我不知道如何

编辑：我确实成功地使用 r = a exp(θ cot b) 使它工作

```
 double r = Math.pow(a,t*(1/Math.tan(b))); 
```

但我仍然不明白为什么其他公式没有成功，这就是我编辑这个问题而不是回答它的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:17:28.190

我的猜测是有一个四舍五入的问题。我假设'a'和'b'都是双打......我不得不问，因为它没有写在代码中，但假设是这种情况。如果不是那将是问题:)

接下来，我将查看 i*step 并确保这是您所期望的...我原以为这没问题，但是您没有将 int 'i' 转换为 double ，因此如果您重新洗牌，则会提出问题.

啊，实际上我想看的是“样本”。如果这是我所期望的 int，那么这会给您错误的 step 结果，因为您要除以一个 int ，我希望它会给出一个 int 返回值......实际上我的 1p 赌注是在它的样本上声明为诠释。

如果这不能解决问题，您可以打印出步长值并确保它是您所期望的，如果不是这个示例问题，还检查“t”是否正确计算。

# java - Java中的流式背包

> ID：14443654
> 
> 赞同：1
> 
> 时间：2013-01-21T17:04:37.297
> 
> 标签：java, algorithm, optimization

我想在java中有效地实现“流式背包”问题。

问题是我有一个连续输入的整数数据流，例如 -1、2、9、5、5、11、1 -3、...

问题是找到它们的总和为“n>0”的前“k”个元素。例如 k=3 和 n=12，则解为：...,2,...,5, 5。

它的有效算法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:08:18.163

保留到目前为止您遇到的最高值整数的反向排序[PriorityQueue 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html)`k-1`每次输入一个新整数时，检查它和那些 k-1 个数字的总和是否大于 n。如果是 - 返回您找到的集合。否则检查这个数字是否大于最小的`k-1`数字（这就是为什么你需要对优先级队列进行反向排序）。如果是，则提取最小元素并将新元素推入队列。如果不是简单地转到流中的下一个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:47:52.970

[我在http://programmingpraxis.com/2012/05/15/streaming-knapsack/2/](http://programmingpraxis.com/2012/05/15/streaming-knapsack/2/)中找到了答案 ：（主要用于正整数值）

这是动态规划的问题。构造一个矩阵，其中 k 行编号为 0 到 k-1，n 列编号为 1 到 n。矩阵的所有单元格最初都是空的，除了第 0 行中的每个单元格都包含空列表（必须与空单元格区分开来）。然后按顺序读取输入流的各项。对于每个项目 x，如果单元格 (k-1,n-x) 非空，则找到解决方案并停止处理；解决方案是单元格 (k−1,n−x) 中的项目列表加上项目 x。否则，对于矩阵中的每个非空单元格 (r,c)，如果 r+1

由于矩阵是稀疏的，我们将使用以 (r,c) 为键的哈希表而不是矩阵，为了演示，我们将使用随机数生成器来提供正整数流：

```
(define (streaming-knapsack k n)
  (define (hash rc) (+ (car rc) (* n (cdr rc))))
  (let ((table (make-hash hash equal? #f 997)))
    (let loop ((x (+ (randint n) 1)))
      (display x) (newline)
      (cond ((table 'lookup (cons (- k 1) (- n x))) =>
              (lambda (xs) (cons x xs)))
      (else (let loop ((xs (table 'enlist)))
              (when (pair? xs)
                (let* ((rcs (car xs)) (r (caar rcs)) (c (cdar rcs))
                       (s (cdr rcs)) (r1 (+ r 1)) (cx (+ c x)))
                  (when (and (< r1 k) (< cx n)
                             (not (table 'lookup (cons r1 cx))))
                    (table 'insert (cons r1 cx) (cons x s))))
                (loop (cdr xs))))
            (when (not (table 'lookup (cons 1 x)))
              (table 'insert (cons 1 x) (list x)))
            (loop (+ (randint n) 1))))))) 
```

外循环对输入流中的每个项目运行一次；因为我们正在动态生成输入流，它会在每个流元素通过时显示它。cond 的第一个子句在哈希表中查找 (r-1, c-x) 项，如果存在则返回结果。如果不是，则 cond 的 else 子句循环遍历哈希表中的所有项目，如果所有测试都通过，则添加一个新表项，如果不存在则添加一个 (1 x) 表项，然后循环到下一个输入流中的元素。

在实践中，您应该将出现两次的表达式 (+ (randint n) 1) 替换为从输入流中获取下一项的函数，并将该函数作为参数传递给 streaming-knapsack。

我们使用了来自 Standard Prelude 的哈希表和随机数生成器。您可以在[http://programmingpraxis.codepad.org/WHdBXcyr](http://programmingpraxis.codepad.org/WHdBXcyr)上运行该程序。

# jquery - 使用 Jquery 移动列表项以创建嵌套列表

> ID：14443657
> 
> 赞同：0
> 
> 时间：2013-01-21T17:04:46.653
> 
> 标签：jquery, html, html-lists

我们的 CMS 以以下格式输出一些列表项：

```
<ul class="tocList">
  <li><a href="#s6855">a list item</a></li>

  <li class="indent"><a href="#s4671">a list item</a></li>

  <li class="indent"><a href="#s6824">a list item</a></li>

  <li><a href="#s6856">a list item</a></li>

  <li class="indent"><a href="#s4672">a list item</a></li>

  <li class="indent"><a href="#s4673">a list item</a></li>

  <li class="indent"><a href="#s4674">a list item</a></li>
</ul> 
```

我需要更改结构以包含正确结构化的嵌套列表：

```
<ul class="tocList">
  <li><a href="#s6855">a list item</a>
    <ul>
      <li class="indent"><a href="#s4671">a list item</a></li>

      <li class="indent"><a href="#s6824">a list item</a></li>
    </ul>
  </li>
  <li><a href="#s6856">a list item</a>
    <ul>
      <li class="indent"><a href="#s4672">a list item</a></li>

      <li class="indent"><a href="#s4673">a list item</a></li>

      <li class="indent"><a href="#s4674">a list item</a></li>
    </ul>
  </li>
</ul> 
```

更改 CMS 逻辑会太痛苦，也会导致我们的编辑工作量太大。我想用 JQuery 来实现这一点。我一直在尝试各种 JQuery `.wrap()`，`.each()`没有任何乐趣的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:17:10.187

```
$(".tocList li:not(.indent)").each(function() {
    $(this).nextUntil("li:not(.indent)").wrapAll("<ul/>");
    $(this).next("ul").detach().appendTo($(this));
}); 
```

[小提琴](http://jsfiddle.net/barmar/RswN6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:20:52.240

```
$('ul.tocList > li > a').each(function(i,v){
    var li = $(v).parent();
    li.nextUntil('li:not(.indent)').wrapAll('<ul></ul>');
    li.next('ul').detach().appendTo(li)
}); 
```

应该这样做。

[工作演示](http://jsfiddle.net/arunpjohny/v6DUh/)

# java - ViewPart 的 Java 关闭侦听器

> ID：14443661
> 
> 赞同：5
> 
> 时间：2013-01-21T17:05:01.113
> 
> 标签：java, eclipse, view, rcp

我正在使用带有视图的 Eclipse RCP，并且我想在应用程序关闭时在控制台上打印一些东西。

这就是我所做的，但它不起作用；

```
public void createPartControl(final Composite parent){
   parent.getShell().addListener(SWT.CLOSE, new Listener() {

      @Override
      public void handleEvent(Event event) {
         System.out.println("NOW !");
      }
   });
} 
```

**编辑：** 我找到了一个解决方案，我需要添加一个 DisposeListener：

```
parent.addDisposeListener(new DisposeListener() {

            @Override
            public void widgetDisposed(DisposeEvent e) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:12:09.890

您想使用`SWT.Close`事件而不是`SWT.CLOSE`. 来自[SWT Javadoc](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/SWT.html)：

> SWT.Close - 关闭事件类型（值为 21）。
> 
> SWT.CLOSE - 关闭框修剪的样式常量（值是 1<<6，因为我们不区分 CLOSE 样式和 MENU 样式）。

# java - PrintWriter 将文本添加到文件

> ID：14443662
> 
> 赞同：3
> 
> 时间：2013-01-21T17:05:12.697
> 
> 标签：java, file-io, java-io, printwriter

在我的在线计算机科学课程中，我必须编写一个程序来确定太阳系中每个行星的表面重力。我已经得到了它的几乎所有方面的工作，除了一个。我需要使用单独的方法将表面重力写入文件。这是我目前的方法：

```
public static void writeResultsToFile(double g) throws IOException{

    PrintWriter outFile = new PrintWriter(new File("planetaryData.txt"));

    outFile.printf("%.2f%n", g);
    outFile.close();
} 
```

我的问题是，当我将它写入文件时，它会覆盖以前的值。我如何得到它包括所有的值。如果有帮助，这是我的全部代码：

```
import java.util.Scanner;
import java.io.PrintWriter;
import java.io.IOException;
import java.io.File;

public class gravityV1 {

    /**
     * @param args
     */

    public static double calculateSurfaceGravity(double d, double M){
        double G = 6.67 * Math.pow(10, -11);
        double r = d;
        double g;

        g = G * M/Math.pow(r/2*1000, 2);

        return g;
    }

    public static void printResultsToScreen(String planetName, double diameterKm, double massKg, double g){

        System.out.printf("%-15s%-17.0f%-17.2e%.2f%n", planetName, diameterKm, massKg, g);

    }

    public static void writeResultsToFile(double g) throws IOException{

        PrintWriter outFile = new PrintWriter(new File("planetaryData.txt"));

        outFile.printf("%.2f%n", g);
        outFile.close();
    }

    public static void main(String[] args) throws IOException {
        // Variables
        String [] planetName = new String[8];
        planetName[0] = "Mercury";
        planetName[1] = "Venus  ";
        planetName[2] = "Earth  ";
        planetName[3] = "Mars   ";
        planetName[4] = "Jupiter";
        planetName[5] = "Saturn ";
        planetName[6] = "Uranus ";
        planetName[7] = "Neptune";
        double [] diameterKm = new double[8];
        diameterKm[0] = 4880;
        diameterKm[1] = 12103.6;
        diameterKm[2] = 12756;
        diameterKm[3] = 6794;
        diameterKm[4] = 142984;
        diameterKm[5] = 120536;
        diameterKm[6] = 51118;
        diameterKm[7] = 49532;
        double [] massKg = new double[8];
        massKg[0] = 3.30 * Math.pow(10, 23);
        massKg[1] = 4.869 * Math.pow(10, 24);
        massKg[2] = 5.97 * Math.pow(10, 24);
        massKg[3] = 6.4219 * Math.pow(10, 23);
        massKg[4] = 1.900 * Math.pow(10, 27);
        massKg[5] = 5.68 * Math.pow(10, 26);
        massKg[6] = 8.683 * Math.pow(10, 25);
        massKg[7] = 1.0247 * Math.pow(10, 26);
        double [] g = new double[8];
        int array = 0;

        //code

        System.out.printf("%s%20s%15s%15s%n", "Planet", "Diameter (km)", "Mass (kg)", "g (m/s^2)");

        for(double d : diameterKm){
            g[array] = calculateSurfaceGravity(d, massKg[array]);
            printResultsToScreen(planetName[array], d, massKg[array], g[array]);
            writeResultsToFile(g[array]);
            array++;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T17:09:50.483

这样做是为了创建一个`PrinterWriter`使用`FileWriter`附加模式的工作：

```
PrintWriter outFile = new PrintWriter(new FileWriter("planetaryData.txt", true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:11:32.037

来自[Mkyong 的教程](http://www.mkyong.com/java/how-to-append-content-to-file-in-java/)：

> FileWriter，将字符写入文件的字符流。默认情况下，它将用新内容替换所有现有内容，但是，当您在 FileWriter 构造函数中指定 true（布尔值）作为第二个参数时，它将保留现有内容并将新内容附加到文件末尾.

你可以使用类似的东西 -

```
 PrintWriter outputFile = new PrintWriter(new FileWriter(file, true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:15:57.473

两个问题：

1）您每次都在覆盖文件。 `printResultsToFile`应该取整个数组，而不仅仅是一个数据。从循环外部调用它。

2) 为简洁起见，考虑将浮点数输入为 2.08e24。

```
private void printResultsToFile(double result[]) {
  PrintWriter pw = new PrintWriter(new FileWriter("planetaryData.txt"));
  for (int i=0; i< result.length; i++) {
    pw.printf("%.2f%n", result[i]);
  }
  pw.close();
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-07-09T13:24:41.173

以下代码也可用于打开文件名 planetaryData.txt。

```
PrintWriter outFile = new PrintWriter("planetaryData.txt"); 
```

# javascript - Twitter引导选项卡未出现

> ID：14443669
> 
> 赞同：0
> 
> 时间：2013-01-21T17:06:07.917
> 
> 标签：javascript, twitter-bootstrap

我在尝试让标签在 twitter 引导程序中工作时遇到了一些困难，并且对文档试图说的内容有些困惑。我有一个包含三个选项卡的小页面。我出现了第一个选项卡，但我似乎无法在其他两个选项卡之间切换。

根据[Twitter Bootstrap 文档](http://twitter.github.com/bootstrap/javascript.html#tabs)，我需要激活每个选项卡，我已经使用其中一个选项卡完成了

```
 $('#tabBar a[href="#Sewer"]').tab('show'); 
```

但是每当我尝试单击该选项卡时，它似乎并没有切换到该选项卡。这是我到目前为止所得到的小提琴：[Tab Fiddle](http://jsfiddle.net/cbredlow/LBWHJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:09:25.973

引导插件需要 jQuery 才能使用 将 jQuery 包含到您的页面中

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

[更新的演示](http://jsfiddle.net/arunpjohny/LBWHJ/1/)

# eclipse - 使用 Nsight Eclipse 版时如何使用 gcc 进行编译？

> ID：14443670
> 
> 赞同：1
> 
> 时间：2013-01-21T17:06:08.037
> 
> 标签：eclipse, cuda, nsight

我在 Nvidia 的 Nsight 中有一个小项目，它为我创建了 makefile。我想使用一些 SSE 指令，并想用 gcc 而不是 nvcc 编译项目中的 cpp 文件。

有没有办法配置 Nsight 来做到这一点，还是我必须手动编写 Makefile？

编辑： .cu 文件当然应该用 nvcc 编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:00:03.137

要在 Nsight 中使用 gcc，您必须创建 makefile 项目并手动编写 makefile。

或者，你可以使用 nvcc 来编译你的 .cpp/.c 文件。要添加 nvcc 无法识别的额外编译器选项（仅由 gcc 识别），`-Xcompiler`应在 nvcc 选项前面加上前缀。

使用 nvcc 的副作用之一是您的 .cpp 程序将需要 libcudart.so 才能运行，即使它并不真正需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:54:57.777

您应该能够在 CU 文件中使用 GCC SSE 指令 - NVCC 使用您的平台编译器编译所有主机代码。

如果您仍想使用 GCC，您有两种选择：

1.  创建两个项目 - 一个是使用 NVCC 编译的静态库项目，另一个是使用 GCC 编译的常规可执行项目。然后您可以设置 Nsight 以将可执行文件与您的库链接。（您也可以将 NVCC 用于可执行文件，将 GCC 用于库）
2.  正如@Eric 提到的，您可以创建一个“Makefile 项目”并手动编写makefile。

# c# - SharePoint GetGroupCollectionFromUser Web 服务返回“HTTP 请求被禁止”错误

> ID：14443671
> 
> 赞同：0
> 
> 时间：2013-01-21T17:06:10.040
> 
> 标签：c#, .net-4.0, sharepoint-2007, console-application, wss

我想使用控制台应用程序获取用户在 SharePoint 中所属的所有组的列表。我是 SharePoint 开发新手，所以这是我公认的业余尝试。

```
 private static string GetUserGroupCollection(string LoginName)
    {

        UserGroupSoapClient ug = new UserGroupSoapClient();
        ug.ClientCredentials.Windows.ClientCredential.UserName = "myusername";
        ug.ClientCredentials.Windows.ClientCredential.Password = "mypassword";
        return ( ug.GetGroupCollectionFromUser(LoginName)).ToString();
    } 
```

我已在我的 SP Web 服务中包含“服务参考”，网址为 `http://server02/aaa/DOCS/_vti_bin/usergroup.asmx`

当我尝试上面的代码时，我得到`The HTTP request was forbidden with client authentication scheme 'Anonymous'.`

你能告诉我一个如何做到这一点的基本例子吗？请注意，我不想将引用作为“Web 引用”。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T06:43:53.823

如果您的 SharePoint WebServices Web 应用程序使用 NTLM 身份验证，您可以试试这个

```
ug.ClientCredentials.Windows.ClientCredential = new NetworkCredential("myusername", "mypassword"); 
```

在你的`app.config`

```
<security mode="Transport">
    <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
    <message clientCredentialType="UserName" algorithmSuite="Default" />
</security> 
```

编辑：

由于在您的 Web 应用程序中禁用 NTLM 身份验证以访问 Web 服务，您必须首先使用 Authentication.asmx Web 服务登录并检索身份验证 cookie 并将其与其他 Web 服务调用一起发送，如下所示：

```
 string cookie = "";
        LoginResult loginResult;
        string result;

        AuthenticationSoapClient authentication = new AuthenticationSoapClient();
        UserGroupSoapClient ug = new UserGroupSoapClient();

        using(OperationContextScope scope = new OperationContextScope(authentication.InnerChannel))
        {
            loginResult = authentication.Login("user", "pass");
            if (loginResult.ErrorCode == LoginErrorCode.NoError)
            {
                MessageProperties props = OperationContext.Current.IncomingMessageProperties;
                HttpResponseMessageProperty prop = props[HttpResponseMessageProperty.Name] as HttpResponseMessageProperty;
                string cookies = prop.Headers["Set-Cookie"];
                // You must search cookies to find cookie named loginResult.CookieName and set its value to cookie variable;
                cookie = cookies.Split(';').SingleOrDefault(c => c.StartsWith(loginResult.CookieName));
            }
        }

        HttpRequestMessageProperty httpRequestProperty = new HttpRequestMessageProperty();
        httpRequestProperty.Headers.Add(System.Net.HttpRequestHeader.Cookie, cookie);
        using (new OperationContextScope(ug.InnerChannel))
        {
            OperationContext.Current.OutgoingMessageProperties.Add(HttpRequestMessageProperty.Name, httpRequestProperty);
            result = ug.GetGroupCollectionFromUser(LoginName).ToString();
        } 
```

并确保 app.config 中所有绑定的 allowCookies 属性为 false。

```
<basicHttpBinding>
   <binding name="AuthenticationSoap" allowCookies="false"/>
   <binding name="UserGroupSoap" allowCookies="false"/>
</basicHttpBinding> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:10:52.393

类似以下的内容应该有效：（取自/编辑自[http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/b17ae5c8-f845-4cee-8298-c4f7b5c52b57](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/b17ae5c8-f845-4cee-8298-c4f7b5c52b57)）

我认为您应该使用 SPGroup 从站点获取所有组并在所有组中找到用户：

对于单个用户，如果您知道组名，那么您可以尝试使用以下代码：

```
SPWeb site = SPContext.Current.Web;
SPGroup groupToQuery = site.Groups["Project"];
bool istrue = site.IsCurrentUserMemberOfGroup(groupToQuery); 
```

如果您不知道组名，请尝试使用以下代码（我没有测试过）

```
using (SPWeb rootWeb = topLevelSite.OpenWeb())
{
    foreach (SPGroup group in rootWeb.Groups)
    {
        bool isUserInGroup = IsUserInGroup(group, currentUser.LoginName);
    }
}

private Boolean IsUserInGroup(SPGroup group, string userLoginName)
{
    bool userIsInGroup = false;

    try
    {
        SPUser x = group.Users[userLoginName];
        userIsInGroup = true;
    }
    catch (SPException)
    {
        userIsInGroup = false;
    }

    return userIsInGroup;
} 
```

# zend-form - Zend Framework 2：相同的验证器

> ID：14443676
> 
> 赞同：1
> 
> 时间：2013-01-21T17:06:12.753
> 
> 标签：zend-form, zend-framework2

我对 ZF2 中的 Identical 验证器有疑问。我创建了以下方法：

```
public function getInputFilter()
    {
        if(!$this->inputFilter){
            $inputFilter = new InputFilter();
            $factory = new InputFactory();

            $inputFilter->add($factory->createInput(array(
                'name' => 'id',
                'required' => true,
                'filters' => array(
                    array('name' => 'Int'),
                ),
            )));

            $inputFilter->add($factory->createInput(array(
                'name' => 'username',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim')
                ),
                'validators' => array(
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 3,
                            'max' => 32
                        )
                    )
                )
            )));

            $inputFilter->add($factory->createInput(array(
                'name' => 'password',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim')
                ),
                'validators' => array(
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 3,
                            'max' => 32
                        )
                    )
                )
            )));

            $inputFilter->add($factory->createInput(array(
                'name' => 'retype-password',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim')
                ),
                'validators' => array(
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 3,
                            'max' => 32
                        ),
                    array(
                        'name' => 'Identical',
                        'options' => array(
                            'token' => 'password' //I have tried $_POST['password'], but it doesnt work either
                        )
                    )
                    )
                )
            )));

            $this->inputFilter = $inputFilter;
        }

        return $this->inputFilter;
    } 
```

一切正常，除了不显示任何内容的相同验证器（没有消息，没有错误）。欢迎提示，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:32:17.303

实际上，您的数组语法似乎放错了位置。这应该为您解决它：

```
public function getInputFilter()
{
    if(!$this->inputFilter){
        $inputFilter = new InputFilter();
        $factory = new InputFactory();

        $inputFilter->add($factory->createInput(array(
            'name' => 'id',
            'required' => true,
            'filters' => array(
                array('name' => 'Int'),
            ),
        )));

        $inputFilter->add($factory->createInput(array(
            'name' => 'username',
            'required' => true,
            'filters' => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim')
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 3,
                        'max' => 32
                    )
                )
            )
        )));

        $inputFilter->add($factory->createInput(array(
            'name' => 'password',
            'required' => true,
            'filters' => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim')
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 3,
                        'max' => 32
                    )
                )
            )
        )));

        $inputFilter->add($factory->createInput(array(
            'name' => 'retype-password',
            'required' => true,
            'filters' => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim')
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 3,
                        'max' => 32
                    ),
                ),
                array(
                    'name' => 'Identical',
                    'options' => array(
                        'token' => 'password' //I have tried $_POST['password'], but it doesnt work either
                    )
                )
            )
        )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

# mysql - MYSQL auto_increment 依赖于另一个表

> ID：14443683
> 
> 赞同：0
> 
> 时间：2013-01-21T17:06:59.570
> 
> 标签：mysql, database, auto-increment

我的 mysql 数据库中有一个消息表。我想设置 auto_increment 依赖于另一行，如下所示：

**对话ID** | **message_id** | **内容**
123                         **a_i** : 1 bla
123                          **a_i** : 2 bla
123                          **a_i** : 3 bla
1234                        **a_i** : 1 bla

你知道吗？谢谢，凯文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:09:42.607

是的，这在 MySQL 中是不可能的，至少在 InnoDB 中是不可能的。您可以改为：

1.  手动计算值
2.  使用触发器计算和设置值

它在 ISAM 中可用，但有一些条件（您需要复合主键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:21:48.420

该功能仅适用于 MyISAM，不适用于 InnoDB。

<剪辑>

对于 MyISAM 表，您可以在多列索引中的辅助列上指定 AUTO_INCREMENT。在这种情况下，AUTO_INCREMENT 列的生成值计算为 MAX(auto_increment_column) + 1 WHERE prefix=given-prefix。当您要将数据放入有序组时，这很有用。

</snip>

[http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

同样，这仅在表使用 MyISAM 引擎时才有效。您需要确保没有以 message_id 作为前导列的索引，并确保您有一个索引：

```
ON mytable (conversation_id, message_id) 
```

# function - 月份名称不起作用

> ID：14443684
> 
> 赞同：1
> 
> 时间：2013-01-21T17:07:01.613
> 
> 标签：function, asp-classic

当我在asp文件中编写我的代码时，

response.write MonthName(8,true)

它显示：

8��

代替 ：

八月

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:27:24.467

[Session.LCID](http://msdn.microsoft.com/en-us/library/ms525071%28v=vs.90%29.aspx)影响着各种事物，日期/时间显示就是其中之一。

如果不知何故默认 LCID 是错误的，您可以在需要它的任何页面上通过代码覆盖它：

```
Session.LCID = 1033 'just example for English, US 
```

可以在[此处](http://msdn.microsoft.com/en-gb/goglobal/bb964664.aspx)找到完整的值列表，我也会将其复制到此处。（微软移动/删除页面有时因此不能被信任为可靠的代码主机）

```
语言 - 国家/地区 LCID 十六进制 LCID 十二月
南非荷兰语 - 南非 0436 1078
阿尔巴尼亚语 - 阿尔巴尼亚 041c 1052
阿尔萨斯语 0484 1156
阿姆哈拉语 - 埃塞俄比亚 045e 1118
阿拉伯语 - 沙特阿拉伯 0401 1025
阿拉伯语 - 阿尔及利亚 1401 5121
阿拉伯语 - 巴林 3c01 15361
阿拉伯语 - 埃及 0c01 3073
阿拉伯语 - 伊拉克 0801 2049
阿拉伯语 - 约旦 2c01 11265
阿拉伯语 - 科威特 3401 13313
阿拉伯语 - 黎巴嫩 3001 12289
阿拉伯语 - 利比亚 1001 4097
阿拉伯语 - 摩洛哥 1801 6145
阿拉伯语 - 阿曼 2001 8193
阿拉伯语 - 卡塔尔 4001 16385
阿拉伯语 - 叙利亚 2801 10241
阿拉伯语 - 突尼斯 1c01 7169
阿拉伯语 - 阿联酋 3801 14337
阿拉伯语 - 也门 2401 9217
亚美尼亚 - 亚美尼亚 042b 1067
阿萨姆语 044d 1101
阿塞拜疆语（西里尔文）082c 2092
阿塞拜疆语（拉丁语）042c 1068
巴什基尔 046d 1133
巴斯克语 042d 1069
白俄罗斯语 0423 1059
孟加拉语（印度）0445 1093
孟加拉语（孟加拉国）0845 2117
波斯尼亚语（波斯尼亚/黑塞哥维那）141A 5146
布列塔尼 047e 1150
保加利亚语 0402 1026
缅甸语 0455 1109
加泰罗尼亚语 0403 1027
切诺基 - 美国 045c 1116
中文 - 中华人民共和国 0804 2052
华人 - 新加坡 1004 4100
中国 - 台湾 0404 1028
中文 - 香港特别行政区 0c04 3076
中文 - 澳门特别行政区 1404 5124
科西嘉岛 0483 1155
克罗地亚语 041a 1050
克罗地亚语（波斯尼亚/黑塞哥维那）101a 4122
捷克 0405 1029
丹麦语 0406 1030
达里语 048c 1164
迪维希 0465 1125
荷兰语 - 荷兰 0413 1043
荷兰语 - 比利时 0813 2067
江户 0466 1126
英语 - 美国 0409 1033
英语 - 英国 0809 2057
英语 - 澳大利亚 0c09 3081
英语 - 伯利兹 2809 10249
英语 - 加拿大 1009 4105
英语 - 加勒比 2409 9225
英语 - 香港特别行政区 3c09 15369
英语 - 印度 4009 16393
英语 - 印度尼西亚 3809 14345
英语 - 爱尔兰 1809 6153
英语 - 牙买加 2009 8201
英语 - 马来西亚 4409 17417
英语 - 新西兰 1409 5129
英语 - 菲律宾 3409 13321
英语 - 新加坡 4809 18441
英语 - 南非 1c09 7177
英语 - 特立尼达 2c09 11273
英语 - 津巴布韦 3009 12297
爱沙尼亚语 0425 1061
法罗语 0438 1080
波斯语 0429 1065
菲律宾语 0464 1124
芬兰语 040b 1035
法国 - 法国 040c 1036
法国 - 比利时 080c 2060
法语 - 喀麦隆 2c0c 11276
法语 - 加拿大 0c0c 3084
法国 - 刚果民主共和国 240c 9228
法国 - 科特迪瓦 300c 12300
法语 - 海地 3c0c 15372
法国 - 卢森堡 140c 5132
法语 - 马里 340c 13324
法国 - 摩纳哥 180c 6156
法国 - 摩洛哥 380c 14348
法语 - 北非 e40c 58380
法语 - 留尼汪 200c 8204
法语 - 塞内加尔 280c 10252
法国 - 瑞士 100c 4108
法语 - 西印度群岛 1c0c 7180
弗里斯兰语 - 荷兰 0462 1122
Fulfulde - 尼日利亚 0467 1127
FYRO 马其顿 042f 1071
加利西亚 0456 1110
格鲁吉亚语 0437 1079
德语 - 德国 0407 1031
德国 - 奥地利 0c07 3079
德国 - 列支敦士登 1407 5127
德语 - 卢森堡 1007 4103
德国 - 瑞士 0807 2055
希腊语 0408 1032
格陵兰 046f 1135
瓜拉尼 - 巴拉圭 0474 1140
古吉拉特语 0447 1095
豪萨 - 尼日利亚 0468 1128
夏威夷 - 美国 0475 1141
希伯来语 040d 1037
印地语 0439 1081
匈牙利语 040e 1038
伊比奥 - 尼日利亚 0469 1129
冰岛语 040f 1039
伊博语 - 尼日利亚 0470 1136
印尼语 0421 1057
因纽特人 045d 1117
爱尔兰语 083c 2108
意大利语 - 意大利 0410 1040
意大利语 - 瑞士 0810 2064
日语 0411 1041
基切 0486 1158
卡纳达语 044b 1099
卡努里 - 尼日利亚 0471 1137
克什米尔 0860 2144
克什米尔语（阿拉伯语） 0460 1120
哈萨克语 043f 1087
高棉 0453 1107
基尼亚卢旺达 0487 1159
康卡尼 0457 1111
韩语 0412 1042
吉尔吉斯语（西里尔文）0440 1088
老挝 0454 1108
拉丁语 0476 1142
拉脱维亚语 0426 1062
立陶宛语 0427 1063
卢森堡语 046e 1134
马来语 - 马来西亚 043e 1086
马来语 - 文莱达鲁萨兰国 083e 2110
马拉雅拉姆语 044c 1100
马耳他语 043a 1082
曼尼普尔邦 0458 1112
毛利人 - 新西兰 0481 1153
马普顿贡 0471 1146
马拉地语 044e 1102
莫霍克 047c 1148
蒙古语（西里尔文）0450 1104
蒙古语（蒙古语） 0850 2128
尼泊尔语 0461 1121
尼泊尔语 - 印度 0861 2145
挪威语（博克马尔）0414 1044
挪威语（尼诺斯克）0814 2068
奥克西坦 0482 1154
奥里亚语 0448 1096
奥罗莫 0472 1138
帕皮阿门图 0479 1145
普什图语 0463 1123
波兰语 0415 1045
葡萄牙语 - 巴西 0416 1046
葡萄牙语 - 葡萄牙 0816 2070
旁遮普语 0446 1094
旁遮普语（巴基斯坦）0846 2118
Quecha - 玻利维亚 046B 1131
克查 - 厄瓜多尔 086B 2155
Quecha - 秘鲁 0C6B 3179
浪漫主义 0417 1047
罗马尼亚语 0418 1048
罗马尼亚语 - 摩尔达瓦 0818 2072
俄罗斯 0419 1049
俄语 - 摩尔达瓦 0819 2073
萨米语（拉普兰语）043b 1083
梵文 044f 1103
苏格兰盖尔语 043c 1084
塞佩迪 046c 1132
塞尔维亚语（西里尔文）0c1a 3098
塞尔维亚语（拉丁语）081a 2074
信德 - 印度 0459 1113
信德 - 巴基斯坦 0859 2137
僧伽罗语 - 斯里兰卡 045b 1115
斯洛伐克语 041b 1051
斯洛文尼亚语 0424 1060
索马里语 0477 1143
索布文 042e 1070
西班牙语 - 西班牙（现代排序）0c0a 3082
西班牙语 - 西班牙（传统排序）040a 1034
西班牙语 - 阿根廷 2c0a 11274
西班牙语 - 玻利维亚 400a 16394
西班牙语 - 智利 340a 13322
西班牙语 - 哥伦比亚 240a 9226
西班牙语 - 哥斯达黎加 140a 5130
西班牙语 - 多米尼加共和国 1c0a 7178
西班牙语 - 厄瓜多尔 300a 12298
西班牙语 - 萨尔瓦多 440a 17418
西班牙语 - 危地马拉 100a 4106
西班牙语 - 洪都拉斯 480a 18442
西班牙语 - 拉丁美洲 580a 22538
西班牙语 - 墨西哥 080a 2058
西班牙语 - 尼加拉瓜 4c0a 19466
西班牙语 - 巴拿马 180a 6154
西班牙语 - 巴拉圭 3c0a 15370
西班牙语 - 秘鲁 280a 10250
西班牙语 - 波多黎各 500a 20490
西班牙语 - 美国 540a 21514
西班牙语 - 乌拉圭 380a 14346
西班牙语 - 委内瑞拉 200a 8202
苏图 0430 1072
斯瓦希里语 0441 1089
瑞典语 041d 1053
瑞典语 - 芬兰 081d 2077
叙利亚语 045a 1114
塔吉克斯坦 0428 1064
Tamazight (阿拉伯语) 045f 1119
Tamazight（拉丁文）085f 2143
泰米尔语 0449 1097
鞑靼人 0444 1092
泰卢固语 044a 1098
泰语 041e 1054
藏语 - 不丹 0851 2129
藏族 - 中华人民共和国 0451 1105
提格里尼亚 - 厄立特里亚 0873 2163
提格里尼亚 - 埃塞俄比亚 0473 1139
特松加 0431 1073
茨瓦纳 0432 1074
土耳其语 041f 1055
土库曼 0442 1090
维吾尔语 - 中国 0480 1152
乌克兰语 0422 1058
乌尔都语 0420 1056
乌尔都语 - 印度 0820 2080
乌兹别克语（西里尔文）0843 2115
乌兹别克语（拉丁语）0443 1091
文达 0433 1075
越南语 042a 1066
威尔士语 0452 1106
沃尔夫 0488 1160
科萨语 0434 1076
雅库特 0485 1157
易 0478 1144
意第绪语 043d 1085
约鲁巴 046a 1130
祖鲁语 0435 1077
HID（人机接口设备）04ff 1279

```

# debugging - 如何确定代码是作为脚本还是函数执行？

> ID：14443685
> 
> 赞同：11
> 
> 时间：2013-01-21T17:07:07.290
> 
> 标签：debugging, matlab

您能否在运行时确定执行的代码是作为函数还是脚本运行？如果是，推荐的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T17:56:18.340

还有另一种方法。`nargin(...)`如果在脚本上调用它会给出错误。因此，以下简短功能应该可以满足您的要求：

```
function result = isFunction(functionHandle)
%
% functionHandle:   Can be a handle or string.
% result:           Returns true or false.

% Try nargin() to determine if handle is a script:
try    
    nargin(functionHandle);
    result = true;
catch exception
    % If exception is as below, it is a script.
    if (strcmp(exception.identifier, 'MATLAB:nargin:isScript'))    
        result = false;
    else
       % Else re-throw error:
       throw(exception);
    end
end 
```

这可能不是最漂亮的方式，但它确实有效。

问候

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T17:26:01.513

+1 一个非常有趣的问题。

我可以想出一种方法来确定这一点。解析执行的 m 文件本身并检查第一个重要的非注释行中的第一个单词。如果是`function`关键字，它就是一个函数文件。如果不是，那就是脚本。这是一个整洁的单行：

```
strcmp(textread([mfilename '.m'], '%s', 1, 'commentstyle', 'matlab'), 'function') 
```

如果是函数文件，结果值应该是 1，如果是脚本，结果值应该是 0。

请记住，此代码需要从有问题的 m 文件运行，而不是从单独的函数文件运行，当然。如果您想从中创建一个通用函数（*即*测试任何 m 文件的函数），只需将所需的文件名字符串传递给`textread`，如下所示：

```
function y = isfunction(x)
    y = strcmp(textread([x '.m'], '%s', 1, 'commentstyle', 'matlab'), 'function') 
```

为了使这个函数更健壮，您还可以添加错误处理代码，在尝试之前验证 m 文件是否确实存在`textread`。

# ipv6 - getaddrinfo 用于 ipv6 链接本地

> ID：14443686
> 
> 赞同：3
> 
> 时间：2013-01-21T17:07:12.657
> 
> 标签：ipv6, getaddrinfo

我试图将地址信息放入 structred addrinfo **result 。

但我收到以下代码错误

**getaddrinfo 中的错误：不支持主机名的地址族**

代码

```
error = getaddrinfo("fe80::4e80:93ff:fe33:13ff%wlan0", NULL, NULL, &result);
if (error != 0)
{
    fprintf(stderr, "error in getaddrinfo: %s\n", gai_strerror(error));
    exit(EXIT_FAILURE);
} 
```

我可以 ping 这个地址 $ping6 fe80::4e80:93ff:fe33:13ff%wlan0

这是 ifconfig 详细信息

```
wlan0     Link encap:Ethernet  HWaddr 4c:80:93:33:13:ff  
          inet addr:192.168.43.188  Bcast:192.168.43.255  Mask:255.255.255.0
          inet6 addr: fe80::4e80:93ff:fe33:13ff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1985 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2748 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:950126 (950.1 KB)  TX bytes:684317 (684.3 K 
```

这在我尝试 IPv4 时有效，但我需要获取 ipv6 的 getaddrinfo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:33:22.123

当您提供`NULL`提示时，getaddrinfo 将自动使用`AI_ADDRCONFIG`. 通常您希望设置该标志，但是当连接到链接时，本地地址是您不想要的一种情况。

我猜你没有配置全局 IPv6 地址，`AI_ADDRCONFIG`因此只选择 IPv4，而不是 IPv6。提供适当的提示是避免这种情况的方法。

# jquery - 使用 jquery/javascript 更改隐藏输入的值

> ID：14443687
> 
> 赞同：1
> 
> 时间：2013-01-21T17:07:18.113
> 
> 标签：jquery, input, hidden, required

我有一些隐藏的输入值，一旦用户单击链接，我希望将其更改为某个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:01:03.597

```
$('.someLink').click(function(){
    $('.someHiddenInput').val('new value');
}); 
```

我想这就是你的意思。

HTML 看起来像：

```
<a href="#" class="someLink">click me to change value</a>
<input type="hidden" name="hiddenVal" class="someHiddenInput" value="old value" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T21:36:45.603

```
<input type="hidden" id="txtTextHdn" name="txtTextHdn" value="Y" />
<a href="#" id="testLink">Click Me!</a>

$("#testLink").click(function () {
    alert($("#txtTextHdn").val());
    $("#txtTextHdn").val('X');
    alert($("#txtTextHdn").val());
}) 
```

这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:02:26.727

做这样的事情：

JAVASCRIPT：

```
$(*link selector*).click(function(){
    $(*hidden selector*).val();
}); 
```

这是一个演示：http: [//jsfiddle.net/UbScn/](http://jsfiddle.net/UbScn/)

# html - Sass::SyntaxError in Static_pages#home - Invalid CSS After "": 尝试将代码添加到 CSS 文件时出错

> ID：14443688
> 
> 赞同：3
> 
> 时间：2013-01-21T17:07:21.330
> 
> 标签：html, css, twitter-bootstrap, sass

每当我将代码添加到我的 CSS 文件时，我都会在使用 Bootstrap 时收到此错误。

```
 Invalid CSS after "": expected selector or at-rule, was "<!DOCTYPE html>" (in /users/app_project/app/assests/stylesheets/custom.css.scss)

    Extracted source (around line #4):

    1: <!DOCTYPE html>
    2: <html>
    3:     <head>
    4:      <%= stylesheet_link_tag    "application", :media => "all" %>
    5:      <%= javascript_include_tag "application" %>
    6:      <%= csrf_meta_tags %>
    7:     </head> 
```

我以前能够在没有任何错误的情况下向它添加代码，但在某些时候我必须在某个地方进行了更改，从而导致了这个问题。

这是我正在使用的原始 CSS，没有导致错误

```
 @import "bootstrap";

     /*universal*/

     html {
    overflow-y: scroll;
     }

    body {
    padding-top: 60px;
    }

    section {
    overflow: auto;
    }

    textarea {
    resize: vertical;
    }

    .center {
    text-align: center;
    }

    .center h1 {
    margin-bottom: 10px;
    }

    .container-fluid {
    background-color: #eee;
    }

    /* typography */

    h1, h2, h3, h4, h5, h6 {
    line-height: 1;
    }

    h1 {
    font-size: 3em;
    letter-spacing: -2px;
    margin-bottom: 30px;
    text-align: center;
    }

    h2 {
    font-size: 1.7em;
    letter-spacing: -1px;
    margin-bottom: 30px;
    text-align: left;
    font-weight: normal;
    color: black;
    }

    p {
    font-size: 1.1em;
    line-height: 1.7em;
    }

    #logo {
    float: left;
    margin-right: 10px;
    font-size: 1.7em;
    color: #d81010;
    text-transform: uppercase;
    letter-spacing: -1px;
    padding-top: 9px;
    font-weight: bold;
    line-height: 1;
    }

    #logo:hover {
    color: black;
    text-decoration: none;
    }

    li {
    text-align: left;
    }

    h1#class {
    color:#ff5a28;
    }

    .nav-center {
    color: blue;
    } 
```

这是我尝试添加的一些导致错误的代码。

```
 * {
    margin: 0;
    }

    html, bodY {
    height: 100%;
    }

    .wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -4em;
    }

    .footer, .push {
    height: 4em;
    }

    footer {
    background-color: #70ff00;
    } 
```

不仅仅是上面的代码会导致错误。任何额外的 CSS 都会导致我收到错误消息。

我究竟做错了什么？如果需要，我也可以发布我正在使用的 html 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T10:29:57.190

我在使用 Middleman 时遇到了同样的问题。似乎构建过程试图将特定布局应用于源文件夹中的所有文件。稍微搜索一下，我就可以推断出该布局甚至被应用到了 bower 组件中存在的完整 HTML 测试文件。结果，测试文件中的标签嵌套在我的布局中的标签中。我通过在 config.rb 中指定布局仅应用于特定 HTML 文件的正则表达式解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T05:15:17.580

检查你的代码。你有

```
html, bodY {
height: 100%;
} 
```

在 sass 文件中。将此代码转换为

```
html, body {
height: 100%;
} 
```

你有错误的 CSS 正文标签。这导致错误。

# jquery - JQuery：如果至少有一个字段正在使用，则尝试禁用按钮

> ID：14443692
> 
> 赞同：0
> 
> 时间：2013-01-21T17:07:26.150
> 
> 标签：jquery, ajax, validation, disabled-input

我正在创建一个注册表单，我想在它允许用户提交表单之前对其进行验证并检查用户名和电子邮件的可用性，这样我就不需要一个单独的页面来告诉他们错误并让他们重新开始。

检查可用性的代码是：

```
function checkUsername() {
$.post('php/availability.php',{username: $('#username').val()}, function(usernamedata){
if(usernamedata.exists){
    $("#username").css('background-image','url(images/in-use.png)');
    $("#username-use").val("inuse");
}else{
    $("#username").css('background-image','none');
    $("#username-use").val("free");
} }, 'JSON'); } 
```

检查电子邮件的代码完全相同，除了明显的差异。它检查数据库中匹配的用户名/电子邮件，并根据结果设置隐藏字段的值。默认情况下，隐藏字段都设置为“免费”。

如果用户名或电子邮件设置为“使用”，则该代码应该禁用注册按钮。但是，它似乎有自己的想法，我无法弄清楚它是如何达到最终结果的。

```
function buttonCheck() {
var username = $("#username-use").val();
var email = $("#email-use").val();
if(username == "free" && email == "free") {
    $("#registration-send").attr('disabled','disabled');
} 
else {
    $("#registration-send").removeAttr('disabled');
} } 
```

它的工作似乎倒退了，当某物“使用”时启用按钮。我尝试过交换东西，但它并没有改变任何东西。

checkUsername()/checkEmail() 和 buttonCheck() 都在其关联输入的 onChange 中一起调用：

```
<input id="username" name="username" type="text" autocomplete="off" maxlength="100" class="req-string" onChange="checkUsername(); buttonCheck()"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:12:18.643

免费提示：拥抱回调函数

```
function checkUsername() {
$.post('php/availability.php',{username: $('#username').val()}, function(usernamedata){
if(usernamedata.exists){
    $("#username").css('background-image','url(images/in-use.png)');
    $("#registration-send").attr('disabled','disabled');
}else{
    $("#username").css('background-image','none');
    $("#registration-send").removeAttr('disabled');
} }, 'JSON'); } 
```

您不需要设置一些隐藏字段。最好的方法是在你的成功回调本身中处理它。

您也可以编写类似的代码来检查电子邮件地址的原子性。

更新：：

```
var correctUsername=0,correctEmail=0;

function checkUsername() {
$.post('php/availability.php',{username: $('#username').val()}, function(usernamedata){
if(usernamedata.exists){
    $("#username").css('background-image','url(images/in-use.png)');
    $("#registration-send").attr('disabled','disabled');
    correctUsername=0;
}else{
    $("#username").css('background-image','none');
    correctUsername=1;
    if(correctEmail==1){
        $("#registration-send").removeAttr('disabled');
    }
} }, 'JSON'); } 
```

对您将设置的电子邮件重复类似的代码`correctEmail=1`，`removeAttr`如果`correctUsername==1`

# javascript - jQuery 中的全宽画廊

> ID：14443703
> 
> 赞同：0
> 
> 时间：2013-01-21T17:07:56.493
> 
> 标签：javascript, jquery, css

我的页面中有一个 jQuery 画廊，我想让它在所有分辨率和屏幕上都是全宽的。

[这页纸](http://www.tranceil.co.il/comp/)

jQuery：

```
$('#grid1').dynamicGallery({
                    src : 'gallery.xml',
                    height : 400,
                    width : 1350,
                    cols : 5,
                    min_rows : 1,
                    max_rows : 2,
                    random_heights : false,
                    padding: 1,
                    interval : 2000,
                    speed : 1000,
                    easing : 'easeOutQuad',
                    scale_images : true,
                    center_images : true,
                    click_action : 'lightbox',
                    show_title_in_lightbox : true
                }); 
```

*   如您所见，我尝试给它更大的宽度，但它会移到页面的右侧，当使用 css 将 div 居中时，它在其他屏幕上的显示仍然不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:12:49.540

**更新：**

两个问题。

1.  我从来没有定义`viewportwidth`和`viewportheight`。必须这样做。

2.  你不需要一个函数。只需定义两个变量，然后将不带函数的代码放在`<head>`页面部分。然后，当然，删除`<body onload="resize()">`并放`<body>`。

完毕。最终代码如下所示：

```
<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8" />

    <title>Dynamic Grid</title>

    <meta name="description" content="" />
    <meta name="keywords" value="" />

    <link rel="stylesheet" href="http://www.tranceil.co.il/comp/css/layout.css" type="text/css" />
    <link rel="stylesheet" href="http://www.tranceil.co.il/comp/css/dynamic.grid.css" type="text/css" />
    <style>
        .shell > div {
            margin: 0px;
        }
    </style>
</head>
<body>
    <div class="shell" style="width: 100%; margin: 0 auto;">
        <div id="grid1"></div>
    </div>

    <script src="http://www.tranceil.co.il/comp/js/jquery.min.js"></script>
    <script src="http://www.tranceil.co.il/comp/js/dynamic.grid.gallery.js"></script>

    <script>
        var viewportwidth;
    var viewportheight;

    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

if (typeof window.innerWidth != 'undefined') {
    viewportwidth = window.innerWidth,
    viewportheight = window.innerHeight
}

// IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
    viewportwidth = document.documentElement.clientWidth,
    viewportheight = document.documentElement.clientHeight
}

// older versions of IE

else {
    viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
    viewportheight = document.getElementsByTagName('body')[0].clientHeight
}

        (function($, undefined) {
            $(document).ready(function() {

                $('#grid1').dynamicGallery({
                    src : 'http://www.tranceil.co.il/comp/gallery.xml',
                    height : viewportheight,
                    width : viewportwidth,
                    cols : 5,
                    min_rows : 1,
                    max_rows : 2,
                    random_heights : false,
                    padding: 1,
                    interval : 2000,
                    speed : 1000,
                    easing : 'easeOutQuad',
                    scale_images : true,
                    center_images : true,
                    click_action : 'lightbox',
                    show_title_in_lightbox : true
                });

                $('#grid2').dynamicGallery({
                    src : 'http://www.tranceil.co.il/comp/gallery.xml',
                    height : 400,
                    width : 1350,
                    cols : 5,
                    min_rows : 1,
                    max_rows : 4,
                    random_heights : false,

            padding: 1,
                interval : 2000,
                speed : 1000,
                easing : 'easeOutQuad',
                scale_images : true,
                center_images : true,
                click_action : 'lightbox',
                show_title_in_lightbox : true
            });

        });
    })(jQuery);
</script> 
```

**原帖：**

尚未针对您的情况专门测试此代码，但我认为它应该可以工作。

```
function resize() {
    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

if (typeof window.innerWidth != 'undefined') {
    viewportwidth = window.innerWidth,
    viewportheight = window.innerHeight
}

// IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
    viewportwidth = document.documentElement.clientWidth,
    viewportheight = document.documentElement.clientHeight
}

// older versions of IE

else {
    viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
    viewportheight = document.getElementsByTagName('body')[0].clientHeight
}

} 
```

该函数将获取浏览器的高度和宽度。将您的`<body>`标签替换为

```
<body onload="resize()"> 
```

然后，对于您的画廊：

```
$('#grid1').dynamicGallery({
                    src : 'gallery.xml',
                    height : viewportheight,
                    width : viewportwidth,
                    cols : 5,
                    min_rows : 1,
                    max_rows : 2,
                    random_heights : false,
                    padding: 1,
                    interval : 2000,
                    speed : 1000,
                    easing : 'easeOutQuad',
                    scale_images : true,
                    center_images : true,
                    click_action : 'lightbox',
                    show_title_in_lightbox : true
                }); 
```

这应该将画廊的高度和宽度设置为与视口相同，从而填充 100% 的屏幕。

测试一下，如果你有问题，请告诉我。

# javascript - 如何添加一个jquery参数

> ID：14443704
> 
> 赞同：0
> 
> 时间：2013-01-21T17:08:00.170
> 
> 标签：javascript, jquery, jquery-isotope

我有这个 javascript 来用 jquery isotope 显示我的 div

```
<script type="text/javascript">
            $(document).ready(function(){
var $container = $('#box-content');
$container.isotope({
    filter: '*', 
    animationOptions: {
        duration: 750,
        easing: 'linear',
        queue: false,
    }
});
</script> 
```

而且我需要添加这个参数，但我不知道如何，因为我不知道javascript。

```
sortBy : 'random' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:10:25.557

见[http://isotope.metafizzy.co/docs/sorting.html](http://isotope.metafizzy.co/docs/sorting.html)

```
 <script type="text/javascript">
                $(document).ready(function(){
    var $container = $('#box-content');
    $container.isotope({
        filter: '*', 
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
        },
        sortBy: 'random'
    });
    </script> 
```

# c - 如果我们在 RTOS 设备中使用 gcc 的 msse 和 msse2 选项会好吗

> ID：14443705
> 
> 赞同：1
> 
> 时间：2013-01-21T17:08:02.017
> 
> 标签：c, performance, gcc

根据我的知识`msse`和`msse2`选项，`gcc`将通过更快地执行算术运算来提高性能。而且我还读到了一些它会使用更多资源的地方，比如寄存器、高速缓存。

如果我们在 RTOS 设备（如 vxworks 板）上使用这些选项生成的可执行文件，性能会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:07:05.313

操作系统必须支持 SSE(2) 指令，您的应用程序才能正常工作。从谷歌搜索来看，VcWorks 似乎支持这一点（这并不难，所需要的只是操作系统每个使用 SSE/SSE2 的任务都有一个 512 字节的保存区域——在适当的情况下，它可以被分配按需，但将其分配给所有任务通常更容易]。保存/恢复 SSE 寄存器是“按需”完成的，也就是说，只有当与使用 SSE 的前一个任务不同的任务使用 SSE 指令时，它是保存寄存器是必要的。操作系统将使用一个特殊的中断（陷阱）来指示“一个新任务正在尝试使用 SSE 指令。

所以，只要处理器支持它，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:58:56.337

我可能无法直接回答您的问题，但这里有几件事我知道可能有用：

*   SSE、SSE2 等必须由处理器支持/实施，以便它们首先产生任何影响。
*   您可以调用一些特定函数，将这些扩展指令用于数学运算。这些函数对更广泛的数据类型进行操作或有效地对集合执行操作。
*   启用 GCC 中的选项可能会自动使用以前的 APIs/builtins。这是我不确定的部分。

# java - 将 java 对象数组转换为 JavaScript 数组

> ID：14443706
> 
> 赞同：0
> 
> 时间：2013-01-21T17:08:08.547
> 
> 标签：java, gwt, jsni

我正在编写一个 GWT 应用程序，我需要将一个 java 对象数组传递给 JavaScript（或将这样的数组转换为 JS 数组），我对 JSNI 很陌生，想知道是否可以这样做。例如 ：

```
public class EntityBase {

    private String id;

    private String name;

    public EntityBase(int id) {
        this.id = id;
    }
} 
```

我有一个这样的对象数组......我可以正确传递它们吗？如果没有，你会建议我做什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:30:27.960

您可以使用[GSON](http://code.google.com/p/google-gson/)对对象进行编码和解码。

作为替代方案，您可以使用[AutoBeans](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)。

我使用 AutoBean，但 GSON 对您的开销可能会更少。您可能需要添加默认构造函数（不带参数）和获取/设置方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:45:10.580

您可以尝试将**GWT Overlay 概念**与**轻量级集合一起使用**

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)

示例 - [http://googlewebtoolkit.blogspot.in/2008/08/getting-to-really-know-gwt-part-2.html](http://googlewebtoolkit.blogspot.in/2008/08/getting-to-really-know-gwt-part-2.html)

# facebook-like - Facebook 新的赞框 - 缺少翻译

> ID：14443708
> 
> 赞同：1
> 
> 时间：2013-01-21T17:08:28.377
> 
> 标签：facebook-like, translation

抱歉打扰各位了。我有一个包含 Facebook Like Box (www.iskio.ca) 的双语网站。根据语言，我将使用正确的语言环境（fr_CA 或 en_US）构建 FB 小部件

即： src="http://connect.facebook.net/'.$lang.'/all.js#xfbml=1" 其中 $lang 是 fr_CA 或 en_US

一切正常，除了最近似乎 FB 对 Like Box 进行了更改，特别是通过删除缩略图下的名称，并添加了文本**'You and xxx others like yyy'**。

此文本**未在 fr_CA locale 中翻译**，它似乎确实在 fr_FR 中翻译。

**问：**是否有表格可以让我们将此类错误通知 FB 或提交翻译？（我总是被重定向到有些无用的帮助页面）。有没有办法“强制”我们自己翻译的字符串（我不这么认为）。

从 fr_CA 切换到 fr_FR 不是一种选择。谢谢！

# c# - C# Windows Store App - 使用 async/await 的文件 IO 导致超时和 InvalidOperationException

> ID：14443710
> 
> 赞同：2
> 
> 时间：2013-01-21T17:08:33.557
> 
> 标签：c#, windows-runtime, winrt-async

这是我在该网站上的第一篇文章，我进行了广泛搜索以使我的代码正常工作。正如标题所说，它是一个 WinRT 应用程序，我在使用文件 IO 时遇到了困难。我想要做的是读取存储在应用程序安装目录内的文件夹中的文本文件，其中包含我将提供给 List<> 的数据行。

```
public static async void GetStations()
    {
        try
        {
            using (var stream = await Windows.Storage.ApplicationData.Current.LocalFolder.OpenStreamForReadAsync(@"MyApp\Data\file.txt"))
            {
                using (var streamReader = new StreamReader(stream))
                {
                    while (streamReader.Peek() >= 0)
                    {
                        string line = await streamReader.ReadLineAsync();
                        //do something with 
                    }
                }

            }
        }
        catch (Exception e)
        {
            ...
        }
        finally
        {
            ...
        }
    } 
```

问题是我在尝试运行它时遇到文件未找到错误。任何人都可以帮忙吗？如果您需要我发布更多信息，我可以...提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:29:53.797

如果您将文件作为应用程序包的一部分进行分发，那么`Package.Current.InstalledLocation`就是正确的位置。`ApplicationData.Current.LocalFolder`仅包含您的应用程序已放置在那里的文件。

正确的代码是：

```
public static async void GetStations()
{
    try
    {
        using (var stream = await Windows.ApplicationModel.Package.Current.InstalledLocation.OpenStreamForReadAsync(@"Data\file.txt"))
        {
            using (var streamReader = new StreamReader(stream))
            {
                while (streamReader.Peek() >= 0)
                {
                    string line = await streamReader.ReadLineAsync();
                    //do something with 
                }
            }

        }
    }
    catch (Exception e)
    {
        //...
    }
    finally
    {
        //...
    }
} 
```

该文件必须包含在您的项目`Data`文件夹中并`Build Action`设置为`Content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:11:41.693

而不是从打开`ApplicationData`，您可能需要：

```
Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync 
```

这将在包的安装文件夹中获取文件，而不是在应用程序的*数据*文件夹中。

# java - 在 Java 中使用 .NET Web 服务

> ID：14443713
> 
> 赞同：0
> 
> 时间：2013-01-21T17:08:37.813
> 
> 标签：java, web-services

我已经创建了 .NET Web 服务。我想在远程服务器上运行它并让 Java 应用程序（客户端）与服务器联系以获取数据。我应该如何实现服务器以便客户端可以使用该`org.apache.xmlrpc.client.XmlRpcClient`包？

我只希望客户端生成数据请求并且不希望有任何其他依赖项。

这是一个关于为此目的使用 eclipse 的好材料：[http ://wso2.org/library/tutorials/creating-web-service-client-3-steps-using-eclipse](http://wso2.org/library/tutorials/creating-web-service-client-3-steps-using-eclipse)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:12:53.470

如果您在 .NET 端有 Web 服务，则必须有 Web 服务描述语言 (WSDL)（如果您不是在谈论 REST），您可以轻松创建客户端类以使用 IDE 使用此 Web 服务，检查这个链接在这里： http: [//netbeans.org/kb/docs/websvc/client.html](http://netbeans.org/kb/docs/websvc/client.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:21:33.477

如果您使用的是 Eclipse，我建议您使用[本](http://www.eclipse.org/webtools/jst/components/ws/1.5/tutorials/WebServiceClient/WebServiceClient.html)教程来构建一个简单的 WS 客户端。

您可以根据您的实际需要调整此示例应用程序。

**注意**该示例使用的是旧版本的 Eclipse，但该向导在新版本中也非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:44:50.630

尽管两者都被正确地称为“Web 服务”，但通常在 .net 中创建的基于 SOAP 的 Web 服务与遵循旧[XML-RPC 标准](http://xmlrpc.scripting.com/spec.html)的 Web 服务不兼容。

在我看来，您可以按照 2 条路线来解决您的问题：

*   要么你走 Java 下的 SOAP 路线，为此目的最常见的 API 之一就是[jax-ws -](http://jax-ws.java.net/)[在 Pascal Thivent 的回答中，这里](https://stackoverflow.com/questions/3588616/java-webservice-client-best-way)有一些很好的教程指针
*   或者您使用[xml-rpc.net将您的 .net webservices 转换为 XMl-RPC](http://xml-rpc.net/)

两种路线都有优点和缺点，如果不了解您的项目，很难为您做出选择。先验选择 SOAP 路由可能看起来“更安全”，因为整个通信将基于标准组件。

# shopify - 如何获取 Shopify 商店的所有产品？

> ID：14443714
> 
> 赞同：4
> 
> 时间：2013-01-21T17:08:43.167
> 
> 标签：shopify, liquid

在我的主题开发中，我没有找到获得我商店所有产品的方法。虽然，我可以使用变量集合检索所有集合（例如：）`{% for c in collections %}`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:04:33.440

检查此网址：[https ://help.shopify.com/en/themes/customization/collections/change-catalog-page](https://help.shopify.com/en/themes/customization/collections/change-catalog-page)

就像魔术一样……你所有的产品……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T03:40:31.343

一次获取所有产品或为 shopify 商店中的所有产品运行查询（API 请求）：使用此应用程序更受管理 -> [https://github.com/phpish/shopify_private_app-skeleton](https://github.com/phpish/shopify_private_app-skeleton)所以，我下面的解决方案基于这个应用程序，或者您也可以将解决方案与您的解决方案联系起来

```
<?php

session_start();

require __DIR__.'/vendor/autoload.php';
use phpish\shopify;
require __DIR__.'/conf.php';

$shopify = shopify\client(SHOPIFY_SHOP, SHOPIFY_APP_API_KEY, SHOPIFY_APP_PASSWORD, true);

try
{
    $products = $shopify('GET /admin/products/count.json', array('published_status'=>'published'));

    $totalproducts = $shopify('GET /admin/products/count.json', array('published_status'=>'published'));
    $limit = 50;
    $totalpage = ceil($totalproducts/$limit);
    for($i=1; $i<=$totalpage; $i++){
        $products = $shopify('GET /admin/products.json?'.$limit.'=50&page='.$i, array('published_status'=>'published'));
        foreach($products as $product){
          //do anything at once for all the products in store
        }
     }
  }
  catch (shopify\ApiException $e)
  {
    //
  } 
```

摘要：想法是使用 page=x 作为参数进行检索。在计算了我们将具有指定限制的页面数之后，即一次获取 50 个。

# nhibernate - 具有不可为空键列的 HasMany 映射

> ID：14443719
> 
> 赞同：4
> 
> 时间：2013-01-21T17:09:08.473
> 
> 标签：nhibernate, fluent-nhibernate

我正在尝试`HasMany`使用不可为空的键列实现映射。

我的映射如下所示：

```
public void Override(AutoMapping<DataExportTable> mapping)
{
    mapping.Table("data_export_tables");
    mapping.Id(x => x.Id).Column("data_export_tables_id")
           .GeneratedBy.Sequence("SQ_DATA_EXPORT_TABLES_ID");
    mapping.HasMany(x => x.Columns)
           .KeyColumn("table_id")
           .Not.KeyNullable()
           .Not.KeyUpdate()
           .Cascade.AllDeleteOrphan();
} 
```

保存实体的代码如下所示：

```
var table = new DataExportTable("table_name");
table.Columns.Add(new DataExportColumn("column_name"));
session.Save(table);
transaction.Commit(); 
```

这会引发异常：

> NHibernate.Exceptions.GenericADOException：无法执行批处理命令。[SQL：SQL 不可用] ---> Oracle.DataAccess.Client.Orac leException：ORA-01400：无法将 NULL 插入（“MYSCHEMA”。“DATA_EXPORT_COLUMNS”。” TABLE_ID")

现在，我阅读了很多关于这个主题的帖子，普遍接受的解决方案似乎是使引用双向，即添加一个`Table`属性`DataExportColumn`并设置它。
另一个“hack”是使外键列可以为空。那不是我想要的。我希望 NHibernate 直接在 INSERT 语句中插入 ID。
根据日志文件，NHibernate 在执行 INSERT 语句时肯定知道 ID：

> NHibernate：从双
> NHibernate 中选择 SQ_DATA_EXPORT_TABLES_ID.nextval：批处理命令：
> 命令 0:INSERT INTO data_export_tables (NAME, data_export_tables_id) VALUES (:p0, :p1);:p0 = 'table_name' [Type: String (0)], :p1 = 93 [类型：Int32 (0)]
> 
> NHibernate：批处理命令：
> 命令 0:INSERT INTO data_export_columns (NAME, data_export_columns_id) VALUES (:p0, :p1);:p0 = 'column_name' [Type: String (0)], :p1 = 1228 [Type: Int32 (0 )]

如您所见，NHibernate 只是省略了该`table_id`列，尽管 ID 是众所周知的 - NHibernate 将其作为参数传递给第一个插入语句......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:57:55.263

您没有提及您使用的是哪个版本的 NHibernate - 但我会注意到，根据[这个 jira 问题](https://nhibernate.jira.com/browse/NH-941)，这似乎已在 3.2.0 版本中得到修复。

如果您坚持使用另一个版本的 NHibernate，我建议您将关系设为双向，因为在我看来，它是使用可为空的 FK 的更好选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:28:23.260

如此接近，您需要`Not.Inverse()`按照[此答案](https://stackoverflow.com/a/7601312/12752)进行设置。

```
mapping.HasMany(x => x.Columns)
       .KeyColumn("table_id")
       .Not.Inverse()
       .Not.KeyNullable()
       .Not.KeyUpdate()
       .Cascade.AllDeleteOrphan(); 
```

我不认为将关系设为双向是一种黑客行为，并且通常需要进行查询。

# datatable - jsf 1.2 中的面板网格对齐

> ID：14443723
> 
> 赞同：0
> 
> 时间：2013-01-21T17:09:22.213
> 
> 标签：datatable, panel, vertical-alignment, jsf-1.2

我在对齐面板网格内的数据表时遇到问题。始终数据表在中心而不是顶部对齐。'垂直对齐：文本顶部；' CSS类也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:50:44.227

你得到的答案`.panelColumns td { vertical-align: top; }`是工作正常。:-)

# animation - 禁用所有 D3 动画（用于测试）

> ID：14443724
> 
> 赞同：22
> 
> 时间：2013-01-21T17:09:23.033
> 
> 标签：animation, d3.js

我正在寻找与[`jQuery.fx.off = true`](http://api.jquery.com/jQuery.fx.off/).

假设您正在为使用 D3 的应用程序编写测试（使用 Mocha、QUnit 等）。该应用程序有一些 D3 动画（带有`.transition()`）。

动画对于测试来说真的很糟糕：

首先，它们很慢。

其次，由于它们是异步的，它们很容易导致闪烁测试。理想情况下，您希望避免对`setTimeout`/ `setInterval`/的任何调用`requestAnimationFrame`。

有没有办法禁用所有 D3 动画，以便它们立即（理想情况下，同步地）跳转到结束状态？（也许如果没有选项，我们可以挂钩[timer.js](https://github.com/mbostock/d3/blob/master/src/core/timer.js)？）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-21T07:10:05.727

模拟转换的另一种方法是直接同步执行它们到最终状态。

使用 D3.js v4，使用：

```
function flushAllD3Transitions() {
    var now = performance.now;
    performance.now = function() { return Infinity; };
    d3.timerFlush();
    performance.now = now;
 } 
```

使用 D3.js v3 及之前的版本，请执行以下操作：

```
function flushAllD3Transitions() {
    var now = Date.now;
    Date.now = function() { return Infinity; };
    d3.timer.flush();
    Date.now = now;
 } 
```

另见[d3 问题 1789](https://github.com/mbostock/d3/issues/1789)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T14:22:52.450

我不知道在 d3 中执行此操作的本地方式。但是您可以通过扩充 d3 原型轻松修改 d3 选择器 API 以跳过动画：

要动画的 HTML 代码：

```
<svg width="200" height="200">
    <rect x="1" y="1" width="0" height="100" />
</svg> 
```

动画和 D3 增强代码：

```
function animate(color){
    d3.selectAll("rect")
    .attr("width", 0).attr("fill", "white")
    .transition().duration(1000)
    .attr("width", 100).attr("fill", color)
}

function augment(){
    // add a duration function to the selection prototype
    d3.selection.prototype.duration   = function(){ return this }
    // hack the transition function of d3's select API
    d3.selection.prototype.transition = function(){ return this }
}

animate("red")
console.log("normal animation done")
setTimeout( function(){
        augment()
        console.log("d3 hacked!")
        animate("green")
        console.log("animation skipped")
}, 1200 ) 
```

**注意力！**此 hack 可能无法为您提供完整的解决方案。您可能希望使用您在应用程序`transition().*`中不可用的其他功能来扩展此解决方案。`d3.selection.prototype`您还可以考虑 d3 支持的其他形式的动画。也许还有更多`<selection>.transition()`我不知道的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-07T20:16:20.470

好像你可以模拟 d3.timer 功能：

```
var d3timer = d3.timer;

d3.timer = function(callback, delay, then) {
    d3timer(callback, 0, 0);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-09T18:53:27.093

您可以采取的一种方法是在您的测试套件中使用假计时器，例如[Sinon](http://sinonjs.org/docs/#clock)，它与 Mocha 或 QUnit 一起使用。Jasmine 还[内置](http://pivotal.github.io/jasmine/#section-Mocking_the_JavaScript_Clock)了一个模拟计时器。我认为这是一种更好的方法，因为它意味着您正在测试的代码更接近正在运行的代码（而不是破坏转换函数）。

# mercurial - hg pull abort unknown parent

> ID：14443728
> 
> 赞同：0
> 
> 时间：2013-01-21T17:09:37.663
> 
> 标签：mercurial, mozilla

我正在尝试从 hg repo 中提取，但似乎收到以下错误：

```
pulling from http://hg.mozilla.org/qa/mozmill-tests
searching for changes
adding changesets
adding manifests
adding file changes
transaction abort!
rollback completed
abort: data/tests/endurance/testBookmarks_AddAndRemoveBookmarkViaAwesomeBar/test1.js.i@2daf2ef33d4b: unknown parent! 
```

而 hg verify 似乎又回来了

```
759 files, 2820 changesets, 5082 total revisions
2688 integrity errors encountered!
(first damaged changeset appears to be 54) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:55:51.487

我已经克隆了这个 repo，它工作正常。您的克隆中有任何本地修改吗？如果没有，您可以重新克隆回购。否则我建议你参考[关于 repo corruption 的 wiki 页面](https://www.mercurial-scm.org/wiki/RepositoryCorruption)。

# restlet-2.0 - 使用 Restlet 2.1.1 处理 URI 参数中的斜杠

> ID：14443735
> 
> 赞同：1
> 
> 时间：2013-01-21T17:09:53.663
> 
> 标签：restlet-2.0

我有一个这样的URI： `http://localhost:8111/myService/{Param1}/{Param2}/Param3`

Param1、Param2、Param3 可能包含也可能不包含特殊字符，例如#、&、@、/

我让客户对这些特殊字符进行编码，例如将 %2F 用于 /

在 restlet 方面，我使用字符串替换来解码这些字符。 `param2.replaceAll("%2F", "/")`

有没有更好的方法来自动解释这些编码字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:34:51.447

以下似乎已经为我照顾好了......

`(Reference.decode((String)request.getAttributes().get("Param2")))`

# c# - 正则表达式作为后台进程

> ID：14443741
> 
> 赞同：-3
> 
> 时间：2013-01-21T17:10:18.030
> 
> 标签：c#, regex, multithreading

我是 C# 的初学者，我正在使用**HttpWebRequest**来获取网页源。好吧，我正在使用正则表达式来扫描 html 元素内内容的源代码**. 基本上，正则表达式在 C# 中看起来像这样。**

 **```
Match m = Regex.Match(result, @"^(.*?<form .*?>(.*?)</form>.*?)+$", RegexOptions.Singleline); 
```

我面临的唯一问题是，在此过程完成之前，我的应用程序会冻结。后台线程对我有帮助吗？如果是这样，请您帮我提供一个实现它的片段吗？.. 如果我可以为用户显示进度条或其他内容，那就太好了。

```
private void button1_Click(object sender, EventArgs e) 
        {

            Thread backgroundThread = new Thread(
                new ThreadStart(() =>
                {
                    Match m = Regex.Match(result, @"^(.*?<form .*?>(.*?)</form>.*?)+$", RegexOptions.Singleline);

                    foreach (var capture in m.Groups[2].Captures)
                    {
                        forms.Add(capture.ToString());
                    }

                    MessageBox.Show("Thread completed!");

                    if (progressBar.InvokeRequired)
                        progressBar.BeginInvoke(new Action(() => progressBar1.Value = 0));
                }
            ));

            backgroundThread.Start();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:25:31.683

[这是一些使用System.Threading.Tasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)的演示线程代码；

```
Task<string> GetContent(string rawContent)
{
    var task = Task<string>.Factory.StartNew(ProcessContent, rawContent);
    return task;
}

string ProcessContent(object source)
{
    var input = (string)source;
    var match = Regex.Match(input, @"^(.*?<form .*?>(.*?)</form>.*?)+$", RegexOptions.Singleline);
    return match.Success ? match.Value : string.Empty;
} 
```

替代语法：

```
Task<string> GetContent(string rawContent)
{
    var rc = rawContent;
    var task = Task<string>.Factory.StartNew(() => 
    {
        var match = Regex.Match(rc, @"^(.*?<form .*?>(.*?)</form>.*?)+$", RegexOptions.Singleline);
        return match.Success ? match.Value : string.Empty;
    });
    return task;
} 
```

用法：

```
var content = await GetContent(myContent); // Where myContent is your content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:44:13.063

永远不要在 UI 线程上执行耗时的进程。您还应该异步检索网页源。有很多方法可以实现这一点，但最简单的方法之一可能是`BackgroundWorker`. 它包括一种将进度报告回 UI 线程的便捷方法。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

如果您使用的是 .NET Framework 4.5，则应考虑使用`async`and `await`。

[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)**

# jquery - jQuery 动画停止/恢复技术或模式

> ID：14443746
> 
> 赞同：0
> 
> 时间：2013-01-21T17:10:26.983
> 
> 标签：jquery, animation, hover, onhover, queuing

我看过其他一些半相关的帖子，但没有什么能真正 100% 回答我的问题。

无论如何，我想做的是 pause+fadeIn onHover，pause+fadeOut onHoverOut，这样动画不会完成，除非用户保持悬停或悬停。如果用户做了一堆快速悬停和悬停，我不希望它排队一堆连续的动画。我已经使用 stop() 和 clearQueue() 接近了，但是有问题。

如果我快速悬停、悬停并再次悬停，动画会暂停但不会过渡到下一个动画。事实上，足够的 hover 和 hoverOuts 会导致动画完全停止在我的计算机上发生。

查看下面的示例页面和附加的脚本。也许这个特定问题有一个共同的模式或方法？我在网上看到很多类似的事情，有时使用淡入淡出动画，有时使用运动动画等。

在示例中，我有意使用缓慢的动画时间，以便您有足够的时间来回悬停。

演示： http: [//ficreates.com/_SiteDemos/lwv2/](http://ficreates.com/_SiteDemos/lwv2/)

脚本： http: [//ficreates.com/_SiteDemos/lwv2/scripts/carNav.js](http://ficreates.com/_SiteDemos/lwv2/scripts/carNav.js)

无论如何，提前感谢您可以给我的任何帮助:)我当然需要它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:13:50.527

这是你想要的？

```
 function carNav() {
        var $navBox = $("#nav_buttons li");

        $navBox.hover(
            function() {
                var $navCar = $(this).find(".nav_car");
                $navCar.fadeIn(2000);
            },
            function() {
                var $navCar = $(this).find(".nav_car");                 
                $navCar.stop().fadeOut(2000);
            }
        );
    }

    $(document).ready(carNav); 
```

**演示** [http://jsfiddle.net/m2pF5/](http://jsfiddle.net/m2pF5/)

或者您可以完全使用 css 来完成，（需要 ie 的后备）

**CSS 演示** [http://jsfiddle.net/eNJ6x/1/](http://jsfiddle.net/eNJ6x/1/)

# android - 片段上的 ActionBar Sherlock ViewPager

> ID：14443747
> 
> 赞同：0
> 
> 时间：2013-01-21T17:10:26.677
> 
> 标签：android, actionbarsherlock, fragment

当我向上选择选项卡时，它可以工作，但是当我返回时，内容变为白色。LogCat 显示：

> 致命异常：main java.lang.IllegalArgumentException：找不到 id 0x7f040070 的视图（com *..*:id/list_news_frame_*) 为片段 FeedPlayerNews*Fragment{4055c188 #4 id=0x7f040070} 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903) 在 android.support.v4.app.FragmentManagerImpl.moveToState (FragmentManager.java:1088) 在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682) 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444) 在 android.support。 v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461) 在 android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141) 在 android.support.v4.view.ViewPager.populate(ViewPager.java: 1012) 在 android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.setCurrentItemInternal(ViewPager.java:523)java:495) 在 android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:476) 在 com。*.*.viewpager.TabsAdapter.onTabSelected(TabsAdapter.java:76) 在 com.actionbarsherlock.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:526) 在 com.actionbarsherlock.internal.app.ActionBarImpl$TabImpl.select(ActionBarImpl.java :907) 在 com.actionbarsherlock.internal.widget.ScrollingTabContainerView$TabClickListener.onClick(ScrollingTabContainerView.java:504) 在 android.view.View.performClick(View.java:2506) 在 android.view.View$PerformClick.run( View.java:9112) 在 android.os.Handler.handleCallback(Handler.java:587) 在 android.os.Handler.dispatchMessage(Handler.java:92) 在 android.os.Looper.loop(Looper.java:130) ) 在 android.app.ActivityThread.main(ActivityThread.java:3835) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com。 android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622) 在 dalvik.system.NativeStart.main(Native Method)

我的课：

```
public class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    ProgressDialog dialog;

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    public int getCount() {
        return mTabs.size();
    }

    public SherlockFragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return (SherlockFragment) Fragment.instantiate(mContext,
                info.clss.getName(), info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

} 
```

更新：

持有 viewpager 的方法：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ConnectionChangeReceiver cm = new ConnectionChangeReceiver();
        cm.onReceive(this, getIntent());

        mViewPager = new ViewPager(this);
        mViewPager.setId(R.id.viewpager);
        setContentView(mViewPager);

        RssReaderTask.setRssUrl(this,
                "http://url?type=rss");
        SchedulerManager.getInstance().saveTask(this, "0 9-20 * * 1,2,3,4,5",
                RssReaderTask.class);
        SchedulerManager.getInstance().restart(this, RssReaderTask.class);

        NotifyClass.getInstance().setSlideCreate(true);

        if (!isOnline()) {
            showDialog(DIALOG_ERROR_CONNECTION);
            Log.d("TAG", "TRUE");
        }

        if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_LARGE) {
            // do nothing
        } else {
            this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }
        globalvar = new GlobalVariable();
        globalvar.set_radio_encours_global(false);
        globalvar.setOnHold_global(false);

        mTabsAdapter = new TabsAdapter(this, mViewPager);

        bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayShowTitleEnabled(false);
        bar.setDisplayShowHomeEnabled(false);

        mTabsAdapter.addTab(bar.newTab().setText("Tab1"),
                Tab1.class, null);
        mTabsAdapter.addTab(bar.newTab().setText("Tab2"), Tab2.class,
                null);
        mTabsAdapter.addTab(bar.newTab().setText("Tab3 "),
                Tab3.class, null);
        mTabsAdapter.addTab(bar.newTab().setText("Tab4"),
                Tab4.class, null);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:22:55.060

你的课没问题，它应该可以工作，我正在使用相同的并且它可以工作......我认为你的活动/片段中存在问题，它包含 viewpager，所以我建议检查你的 onCreate/onCreateView 方法。
如果找不到任何内容，请发布此方法的代码或类的代码（如果命名方法不是错误的原因）。

# sbcl - 运行程序以在 sbcl 中启动 alsaplayer

> ID：14443748
> 
> 赞同：1
> 
> 时间：2013-01-21T17:10:45.770
> 
> 标签：sbcl

`sbcl`说明： `(run-program "/bin/ls" '() :output *standard-output*)` 在我的盒子上工作正常：*squeeze* _Debian_。但是我无法运行：

`(run-program "/usr/bin/alsaplayer CD.cdda" '() :output :stream)`

我认为该`:out :stream`选项不适合这种情况，但是有人可以告诉我什么是好的选项吗？

提前致谢。

热拉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:27:25.017

如果您对输出不感兴趣，请尝试

```
(run-program "/usr/bin/alsaplayer" '("CD.cdda")) 
```

或者，如果您在播放音乐时仍想使用 lisp repl，

```
(run-program "/usr/bin/alsaplayer" '("CD.cdda") :wait nil) 
```

参见[SBCL 手册部分。7.4.3 运行外部程序](http://www.sbcl.org/manual/#Running-external-programs)。

此外，包括一些输出/错误消息，以便人们可以更好地诊断问题。

# java - 防止在 ElementListUnion 中包含空元素列表的空标记

> ID：14443749
> 
> 赞同：3
> 
> 时间：2013-01-21T17:10:50.420
> 
> 标签：java, simple-framework

我的一门课程中有以下代码：

```
@Text(required=false)
@ElementListUnion({
    @ElementList(required = false, inline = true, type = com.company.Child.class, entry="values")
})
public List<Object> valueUnion; 
```

请注意，这似乎是让框架处理包含子元素和文本的元素的唯一方法。当存在文本并且元素列表也包含元素时，这非常有用，并生成以下 xml：

```
<parent>
    <values>val 1</values>
    <values>val 2</values>
    some text
</parent> 
```

但是，有时元素列表不包含任何元素，只有文本存在（意味着 valueUnion 列表仅包含一个元素，即文本字符串）。但是，这会产生以下 XML：

```
<parent>
    <values />
    some text
</parent> 
```

这就是问题所在，因为这会导致服务器阻塞空`<values />`标签。不幸的是，我无法控制服务器上的代码，如果元素列表不包含任何元素，我正在寻找一种强制 Simple 忽略空标记的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:21:43.433

我有一个解决方法给你。它并不漂亮，但这个概念可以帮助你。您可以使用序列化对象
的自定义来代替元素注释。`Converter`

*   **`Example`班级：**

*（包含您需要的列表、文本和其他元素）*

```
@Root(name="parent")
@Convert(ExampleConverter.class)
public class Example
{
    private String text; // Save the text you want to set ('some text' in your code)
    private List<Object> valueUnion;

    // Constructor + getter / setter
} 
```

实际上你只需要这里的`@Convert(ExampleConverter.class)`和`@Root`注解，因为序列化是在你自己的转换器（`ExampleConverter`）中完成的。

*   **`ExampleConverter`班级：**

*（在此处序列化/反序列化您的对象）*

```
public class ExampleConverter implements Converter
{
    @Override
    public Object read(InputNode node) throws Exception
    {
        /* TODO: Deserialize your class here (if required). */
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void write(OutputNode node, Object value) throws Exception
    {
        final Example val = (Example) value;
        final List<Object> l = val.getValueUnion();

        if( !l.isEmpty() ) // if there are elements, insert their nodes
        {
            for( Object obj : l )
            {
                node.getChild("values").setValue(obj.toString());
            }
        }
        else
        {
            node.getChild("values").setValue(""); // this creates <values></values> if list is empty
        }
        node.setValue(val.getText()); // Set the text (1)
    } 
} 
```

*(1)*：即使有其他元素，这也会设置您的文本。但是，此解决方案可能会破坏您的格式；文本和结束标签将在同一行。您可以通过插入*新行*来解决此问题。

*   **用法：**

创建一个序列化程序，设置您的策略并写入/读取

```
Serializer ser = new Persister(new AnnotationStrategy()); // 'AnnotationStrategy is important here!
ser.write(...); // write / read 
```

*   **例子：**

**使用列表中的元素：**

```
Example t = new Example();
t.setText("abc"); // Set the text
t.getValueUnion().add("value1"); // Add some elements to list
t.getValueUnion().add("value2");

Serializer ser = new Persister(new AnnotationStrategy());
ser.write(t, f); // 'f' is the file to write 
```

*输出：*

```
<parent>
   <values>value1</values>
   <values>value2</values>abc</parent> 
```

**列表中没有元素：**

```
Example t = new Example();
t.setText("abc"); // Set the text

Serializer ser = new Persister(new AnnotationStrategy());
ser.write(t, f); // 'f' is the file to write 
```

*输出：*

```
<parent>
   <values></values>abc</parent> 
```

*请注意前面所说的格式化“问题”！*

# ios - 在 monotouch 代码中从 AssetURL 创建 UIImage 的异常

> ID：14443750
> 
> 赞同：2
> 
> 时间：2013-01-21T17:10:51.793
> 
> 标签：ios, xamarin.ios

我在这里的第二行代码出现异常。我从 ViewDidLoad 中调用此代码。_assetURLs[page]（在这种情况下 page 为 0），正在返回一个存在且已被检索到的 assetsURL。

```
UIImage img;
img = new UIImage(new MonoTouch.CoreImage.CIImage(_assetURLs[page])); 
```

有任何想法吗？

这是异常：（异常发生是因为 --> new UIImage(...) 而不是因为 new MonoTouch.CoreImage.CIImage(_assetURLs[page])

{MonoTouch.Foundation.MonoTouchException：Objective-C 异常抛出。名称：NSInvalidArgumentException 原因：-[UIImage initWithCIImage]：无法识别的选择器在 MonoTouch.ObjCRuntime.Messaging:IntPtr_objc_msgSend_IntPtr (intptr,intptr,intptr) at MonoTouch.UIKit.UIImage..ctor ( MonoTouch.CoreImage.CIImage ciImage) [0x00027] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIImage.g.cs:376 at ScrollViewPageViewExample.Viewer.LoadPageContent (Int32 page) [0x0002e] in /Users/user1/ Dropbox/Dev/ScrollViewPageViewExample/ScrollViewPageViewExample/Viewer.cs:148 }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:07:30.390

MonoTouch 中的一个（[已修复](https://stackoverflow.com/q/13755014/220643)，但尚未发布）错误。

您可以使用接受 float 和 an`UIImageOrientation`作为解决方法的重载构造函数。

```
UIImage img = new UIImage (your_ciimage, 1.0f, UIImageOrientation.Up); 
```

# php - jsTree 多树 MySQL/PHP 实现 - 嵌套集

> ID：14443753
> 
> 赞同：4
> 
> 时间：2013-01-21T17:10:57.103
> 
> 标签：php, jquery, mysql, jstree, nested-sets

我已经在我的网站上实现了 jsTree，并带有一个用于树存储和检索的 php/MySQL 后端。我使用了 jsTree 下载附带的 php/MySQL 演示作为基本基础架构，然后根据我的需要进行了修改。

我进行了修改，以便可以将多棵树存储在同一个数据库中，并添加了一个新的“owner_id”列，用于存储创建该特定树的人的用户 ID。

创建新分支或移动分支的 php 代码无法正常工作，因为它没有考虑到数据库中有多个树。

jsTree 使用嵌套集模型，脚本正在调整数据库中所有树的左右值，而不仅仅是添加了新分支的树。这正在慢慢破坏整个数据库。

以下代码显示了进行调整的函数，有人可以尝试为我修改代码，以便它使用“owner_id”字段仅对特定树进行更改吗？

```
function _create($parent, $position) {
    return $this->_move(0, $parent, $position);
} 
```

进而...

```
function _move($id, $ref_id, $position = 0, $is_copy = false) {
    $hbhbhbh = fSession::get('nodes_allowed[nodes_access]');
    if ($hbhbhbh == "0" || $hbhbhbh == "2" || $hbhbhbh == "3") {
    if((int)$ref_id === 0 || (int)$id === 1) { return false; }
    $sql        = array();                      // Queries executed at the end
    $node       = $this->_get_node_ifuueuwyhddd($id);       // Node data
    $nchildren  = $this->_get_children($id);    // Node children
    $ref_node   = $this->_get_node_ifuueuwyhddd($ref_id);   // Ref node data
    $rchildren  = $this->_get_children($ref_id);// Ref node children

    $ndif = 2;
    $node_ids = array(-1);
    if($node !== false) {
        $node_ids = array_keys($this->_get_children($id, true));
        // TODO: should be !$is_copy && , but if copied to self - screws some right indexes
        if(in_array($ref_id, $node_ids)) return false;
        $ndif = $node[$this->fields["right"]] - $node[$this->fields["left"]] + 1;
    }
    if($position >= count($rchildren)) {
        $position = count($rchildren);
    }

    // Not creating or copying - old parent is cleaned
    if($node !== false && $is_copy == false) {
        $sql[] = "" . 
            "UPDATE `".$this->table."` " . 
                "SET `".$this->fields["position"]."` = `".$this->fields["position"]."` - 1 " . 
            "WHERE " . 
                "`".$this->fields["parent_id"]."` = ".$node[$this->fields["parent_id"]]." AND " . 
                "`".$this->fields["position"]."` > ".$node[$this->fields["position"]];
        $sql[] = "" . 
            "UPDATE `".$this->table."` " . 
                "SET `".$this->fields["left"]."` = `".$this->fields["left"]."` - ".$ndif." " . 
            "WHERE `".$this->fields["left"]."` > ".$node[$this->fields["right"]];
        $sql[] = "" . 
            "UPDATE `".$this->table."` " . 
                "SET `".$this->fields["right"]."` = `".$this->fields["right"]."` - ".$ndif." " . 
            "WHERE " . 
                "`".$this->fields["right"]."` > ".$node[$this->fields["left"]]." AND " . 
                "`".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ";
    }
    // Preparing new parent
    $sql[] = "" . 
        "UPDATE `".$this->table."` " . 
            "SET `".$this->fields["position"]."` = `".$this->fields["position"]."` + 1 " . 
        "WHERE " . 
            "`".$this->fields["parent_id"]."` = ".$ref_id." AND " . 
            "`".$this->fields["position"]."` >= ".$position." " . 
            ( $is_copy ? "" : " AND `".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ");

    $ref_ind = $ref_id === 0 ? (int)$rchildren[count($rchildren) - 1][$this->fields["right"]] + 1 : (int)$ref_node[$this->fields["right"]];
    $ref_ind = max($ref_ind, 1);

    $self = ($node !== false && !$is_copy && (int)$node[$this->fields["parent_id"]] == $ref_id && $position > $node[$this->fields["position"]]) ? 1 : 0;
    foreach($rchildren as $k => $v) {
        if($v[$this->fields["position"]] - $self == $position) {
            $ref_ind = (int)$v[$this->fields["left"]];
            break;
        }
    }
    if($node !== false && !$is_copy && $node[$this->fields["left"]] < $ref_ind) {
        $ref_ind -= $ndif;
    }

    $sql[] = "" . 
        "UPDATE `".$this->table."` " . 
            "SET `".$this->fields["left"]."` = `".$this->fields["left"]."` + ".$ndif." " . 
        "WHERE " . 
            "`".$this->fields["left"]."` >= ".$ref_ind." " . 
            ( $is_copy ? "" : " AND `".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ");
    $sql[] = "" . 
        "UPDATE `".$this->table."` " . 
            "SET `".$this->fields["right"]."` = `".$this->fields["right"]."` + ".$ndif." " . 
        "WHERE " . 
            "`".$this->fields["right"]."` >= ".$ref_ind." " . 
            ( $is_copy ? "" : " AND `".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ");

    $ldif = $ref_id == 0 ? 0 : $ref_node[$this->fields["level"]] + 1;
    $idif = $ref_ind;
    if($node !== false) {
        $ldif = $node[$this->fields["level"]] - ($ref_node[$this->fields["level"]] + 1);
        $idif = $node[$this->fields["left"]] - $ref_ind;
        if($is_copy) {
            $sql[] = "" . 
                "INSERT INTO `".$this->table."` (" .
                    "`".$this->fields["parent_id"]."`, " . 
                    "`".$this->fields["position"]."`, " . 
                    "`".$this->fields["left"]."`, " . 
                    "`".$this->fields["right"]."`, " . 
                    "`".$this->fields["level"]."`" . 
                ") " . 
                    "SELECT " .
                        "".$ref_id.", " . 
                        "`".$this->fields["position"]."`, " . 
                        "`".$this->fields["left"]."` - (".($idif + ($node[$this->fields["left"]] >= $ref_ind ? $ndif : 0))."), " . 
                        "`".$this->fields["right"]."` - (".($idif + ($node[$this->fields["left"]] >= $ref_ind ? $ndif : 0))."), " . 
                        "`".$this->fields["level"]."` - (".$ldif.") " . 
                    "FROM `".$this->table."` " . 
                    "WHERE " . 
                        "`".$this->fields["id"]."` IN (".implode(",", $node_ids).") " . 
                    "ORDER BY `".$this->fields["level"]."` ASC";
        }
        else {
            $sql[] = "" . 
                "UPDATE `".$this->table."` SET " . 
                    "`".$this->fields["parent_id"]."` = ".$ref_id.", " . 
                    "`".$this->fields["position"]."` = ".$position." " . 
                "WHERE " . 
                    "`".$this->fields["id"]."` = ".$id;
            $sql[] = "" . 
                "UPDATE `".$this->table."` SET " . 
                    "`".$this->fields["left"]."` = `".$this->fields["left"]."` - (".$idif."), " . 
                    "`".$this->fields["right"]."` = `".$this->fields["right"]."` - (".$idif."), " . 
                    "`".$this->fields["level"]."` = `".$this->fields["level"]."` - (".$ldif.") " . 
                "WHERE " . 
                    "`".$this->fields["id"]."` IN (".implode(",", $node_ids).") ";
        }
    }
    else {
        $ewre = fSession::get('user[user_id]');
        $sql[] = "" . 
            "INSERT INTO `".$this->table."` (" .
                "`".$this->fields["owner"]."`, " . 
                "`".$this->fields["parent_id"]."`, " . 
                "`".$this->fields["position"]."`, " . 
                "`".$this->fields["left"]."`, " . 
                "`".$this->fields["right"]."`, " . 
                "`".$this->fields["level"]."` " . 
                ") " . 
            "VALUES (" .
                $ewre.", " .
                $ref_id.", " . 
                $position.", " . 
                $idif.", " . 
                ($idif + 1).", " . 
                $ldif. 
            ")";
    }
    foreach($sql as $q) { $this->db->query($q); }
    $ind = $this->db->insert_id();
    if($is_copy) $this->_fix_copy($ind, $position);
    return $node === false || $is_copy ? $ind : true;
    }
} 
```

任何帮助都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:13:04.687

对于其他任何人，这可能会有所帮助，这是我对创建/移动节点所做的更改后的代码，仅适用于相关的特定树。

`owner_id`在`where`子句中添加实际上确实解决了这个问题。我只需要将它添加到某些查询中：

```
function _move($id, $ref_id, $position = 0, $is_copy = false) {
    $hbhbhbh = fSession::get('nodes_allowed[nodes_access]');
    if ($hbhbhbh == "0" || $hbhbhbh == "2" || $hbhbhbh == "3") {
    if((int)$ref_id === 0 || (int)$id === 1) { return false; }
    $sql        = array();                      // Queries executed at the end
    $node       = $this->_get_node_ifuueuwyhddd($id);       // Node data
    $nchildren  = $this->_get_children($id);    // Node children
    $ref_node   = $this->_get_node_ifuueuwyhddd($ref_id);   // Ref node data
    $rchildren  = $this->_get_children($ref_id);// Ref node children

    $ndif = 2;
    $node_ids = array(-1);

    if($node !== false) {

        $node_ids = array_keys($this->_get_children($id, true));
        // TODO: should be !$is_copy && , but if copied to self - screws some right indexes
        if(in_array($ref_id, $node_ids)) return false;
        $ndif = $node[$this->fields["right"]] - $node[$this->fields["left"]] + 1;
    }

    if($position >= count($rchildren)) {        

        $position = count($rchildren);
    }

    // Not creating or copying - old parent is cleaned
    if($node !== false && $is_copy == false) {

        $sql[] = "" . 
            "UPDATE `".$this->table."` " . 
                "SET `".$this->fields["position"]."` = `".$this->fields["position"]."` - 1 " . 
            "WHERE " .
                "`".$this->fields["owner"]."` = ".(int) $node[$this->fields["owner"]]." AND " .
                "`".$this->fields["parent_id"]."` = ".$node[$this->fields["parent_id"]]." AND " . 
                "`".$this->fields["position"]."` > ".$node[$this->fields["position"]];
        $sql[] = "" . 
            "UPDATE `".$this->table."` " . 
                "SET `".$this->fields["left"]."` = `".$this->fields["left"]."` - ".$ndif." " . 
            "WHERE `".$this->fields["left"]."` > ".$node[$this->fields["right"]]." AND " .
                "`".$this->fields["owner"]."` = ".(int) $node[$this->fields["owner"]];
        $sql[] = "" . 
            "UPDATE `".$this->table."` " . 
                "SET `".$this->fields["right"]."` = `".$this->fields["right"]."` - ".$ndif." " . 
            "WHERE " .
                "`".$this->fields["owner"]."` = ".(int) $node[$this->fields["owner"]]." AND " .
                "`".$this->fields["right"]."` > ".$node[$this->fields["left"]]." AND " . 
                "`".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ";
    }

    $sql[] = "" . 
        "UPDATE `".$this->table."` " . 
            "SET `".$this->fields["position"]."` = `".$this->fields["position"]."` + 1 " . 
        "WHERE " . 
            "`".$this->fields["parent_id"]."` = ".$ref_id." AND " . 
            "`".$this->fields["position"]."` >= ".$position." " . 
            ( $is_copy ? "" : " AND `".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ");

    $ref_ind = $ref_id === 0 ? (int)$rchildren[count($rchildren) - 1][$this->fields["right"]] + 1 : (int)$ref_node[$this->fields["right"]];
    $ref_ind = max($ref_ind, 1); 

    $self = ($node !== false && !$is_copy && (int)$node[$this->fields["parent_id"]] == $ref_id && $position > $node[$this->fields["position"]]) ? 1 : 0;

    foreach($rchildren as $k => $v) {

        if($v[$this->fields["position"]] - $self == $position) {
            $ref_ind = (int)$v[$this->fields["left"]];
            break;
        }
    }

    if($node !== false && !$is_copy && $node[$this->fields["left"]] < $ref_ind) {

        $ref_ind -= $ndif;
    }

    $sql[] = "" . 
        "UPDATE `".$this->table."` " . 
            "SET `".$this->fields["left"]."` = `".$this->fields["left"]."` + ".$ndif." " . 
        "WHERE " . 
            "`".$this->fields["owner"]."` = ".(int) $ref_node[$this->fields["owner"]]." AND `".$this->fields["left"]."` >= ".$ref_ind." " . 
            ( $is_copy ? "" : " AND `".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ");
    $sql[] = "" . 
        "UPDATE `".$this->table."` " . 
            "SET `".$this->fields["right"]."` = `".$this->fields["right"]."` + ".$ndif." " . 
        "WHERE " . 
            "`".$this->fields["owner"]."` = ".(int) $ref_node[$this->fields["owner"]]." AND `".$this->fields["right"]."` >= ".$ref_ind." " . 
            ( $is_copy ? "" : " AND `".$this->fields["id"]."` NOT IN (".implode(",", $node_ids).") ");

    $ldif = $ref_id == 0 ? 0 : $ref_node[$this->fields["level"]] + 1;
    $idif = $ref_ind;

    if($node !== false) {

        $ldif = $node[$this->fields["level"]] - ($ref_node[$this->fields["level"]] + 1);
        $idif = $node[$this->fields["left"]] - $ref_ind;
        if($is_copy) {

            $sql[] = "" . 
                "INSERT INTO `".$this->table."` (" .
                    "`".$this->fields["parent_id"]."`, " . 
                    "`".$this->fields["position"]."`, " . 
                    "`".$this->fields["left"]."`, " . 
                    "`".$this->fields["right"]."`, " . 
                    "`".$this->fields["level"]."`" . 
                ") " . 
                    "SELECT " .
                        "".$ref_id.", " . 
                        "`".$this->fields["position"]."`, " . 
                        "`".$this->fields["left"]."` - (".($idif + ($node[$this->fields["left"]] >= $ref_ind ? $ndif : 0))."), " . 
                        "`".$this->fields["right"]."` - (".($idif + ($node[$this->fields["left"]] >= $ref_ind ? $ndif : 0))."), " . 
                        "`".$this->fields["level"]."` - (".$ldif.") " . 
                    "FROM `".$this->table."` " . 
                    "WHERE " . 
                        "`".$this->fields["id"]."` IN (".implode(",", $node_ids).") " . 
                    "ORDER BY `".$this->fields["level"]."` ASC";
        }
        else {
            $sql[] = "" . 
                "UPDATE `".$this->table."` SET " . 
                    "`".$this->fields["parent_id"]."` = ".$ref_id.", " . 
                    "`".$this->fields["position"]."` = ".$position." " . 
                "WHERE " . 
                    "`".$this->fields["id"]."` = ".$id;
            $sql[] = "" . 
                "UPDATE `".$this->table."` SET " . 
                    "`".$this->fields["left"]."` = `".$this->fields["left"]."` - (".$idif."), " . 
                    "`".$this->fields["right"]."` = `".$this->fields["right"]."` - (".$idif."), " . 
                    "`".$this->fields["level"]."` = `".$this->fields["level"]."` - (".$ldif.") " . 
                "WHERE " . 
                    "`".$this->fields["id"]."` IN (".implode(",", $node_ids).") ";
        }

    } else {

        $ewre = fSession::get('user[user_id]');
        $sql[] = "" . 
            "INSERT INTO `".$this->table."` (" .
                "`".$this->fields["owner"]."`, " . 
                "`".$this->fields["parent_id"]."`, " . 
                "`".$this->fields["position"]."`, " . 
                "`".$this->fields["left"]."`, " . 
                "`".$this->fields["right"]."`, " . 
                "`".$this->fields["level"]."` " . 
                ") " . 
            "VALUES (" .
                $ewre.", " .
                $ref_id.", " . 
                $position.", " . 
                $idif.", " . 
                ($idif + 1).", " . 
                $ldif. 
            ")";
    }

    foreach($sql as $q) { $this->db->query($q); }
    $ind = $this->db->insert_id();
    if($is_copy) $this->_fix_copy($ind, $position);
    return $node === false || $is_copy ? $ind : true;
    }
} 
```

希望它可以帮助某人...

# android - AlarmManager 每 60 秒重复一次

> ID：14443756
> 
> 赞同：0
> 
> 时间：2013-01-21T17:11:02.697
> 
> 标签：android

```
Intent intent = new Intent(this, Passive.class);
        PendingIntent pendingIntent = PendingIntent.getService(this, 50000,
                intent, 0);
        AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        am.setRepeating(AlarmManager.RTC_WAKEUP,
                System.currentTimeMillis() + 1000, 3600000, pendingIntent); 
```

那是我正在使用的代码，它最初是从共享设置中获得重复时间的，但即使我硬编码它仍然每 60 秒重复一次，而不是指定时间。

值得一提的是，我的平板电脑没有遇到这个问题，只是我的 HTC One X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:54:24.163

在设置闹钟之前使用这个——

```
 PendingIntent pendingIntent = PendingIntent.getService(this, 50000,
            intent, PendingIntent.FLAG_NO_CREATE);

   //Cancelling the PendingIntent in the AlarmManager If it is already exist

   if(pendingIntent != null) {
       am.cancel(pendingIntent);
      pendingIntent.cancel();  
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:36:40.663

手机需要完全卸载并重新安装应用程序，现在显示了正确的行为。

# python - Python 将 latin1 转换为 UTF8

> ID：14443760
> 
> 赞同：13
> 
> 时间：2013-01-21T17:11:07.377
> 
> 标签：python, encoding, utf-8, python-2.7, latin1

在 Python 2.7 中，如何将 latin1 字符串转换为 UTF-8。

例如，我正在尝试将 é 转换为 utf-8。

```
>>> "é"
'\xe9'
>>> u"é"
u'\xe9'
>>> u"é".encode('utf-8')
'\xc3\xa9'
>>> print u"é".encode('utf-8')
Ã© 
```

字母是é，它是拉丁小写字母E WITH ACUTE (U+00E9) UTF-8 字节编码为：c3a9
拉丁字节编码为：e9

如何获得拉丁字符串的 UTF-8 编码版本？有人可以举一个如何转换é的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T17:13:41.660

要将字节序列从 latin 1 解码为 Unicode，请使用以下[`.decode()`方法](http://docs.python.org/2/library/stdtypes.html#str.decode)：

```
>>> '\xe9'.decode('latin1')
u'\xe9' 
```

Python`\xab`对下面的 unicode 代码点使用转义`\u00ff`。

```
>>> '\xe9'.decode('latin1') == u'\u00e9'
True 
```

上面的 Latin-1 字符可以编码为 UTF-8 为：

```
>>> '\xe9'.decode('latin1').encode('utf8')
'\xc3\xa9' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T17:16:20.327

```
>>> u"é".encode('utf-8')
'\xc3\xa9' 
```

你有一个 UTF-8 编码的字节序列。不要尝试直接打印编码字节。要打印它们，您需要将编码字节解码回 Unicode 字符串。

```
>>> u"é".encode('utf-8').decode('utf-8')
u'\xe9'
>>> print u"é".encode('utf-8').decode('utf-8')
é 
```

请注意，编码和解码是相反的操作，可以有效地抵消。`u"é"`尽管 Python 将其打印为等效的`u'\xe9'`.

```
>>> u"é" == u'\xe9'
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T18:15:19.490

> 概念 = concept.encode('ascii', 'ignore') 概念 = MySQLdb.escape_string(concept.decode('latin1').encode('utf8').rstrip())

我这样做，我不确定这是否是一个好方法，但它每次都有效！

# asp.net - 单独服务器上的会话存储

> ID：14443761
> 
> 赞同：1
> 
> 时间：2013-01-21T17:11:16.897
> 
> 标签：asp.net, session, load-balancing, session-cookies

我通过“[亚马逊平衡器](http://aws.amazon.com/elasticloadbalancing/)”使用 3 个服务器。在每台服务器上安装 2 个 (asp.net) Web 应用程序（网站、移动站点）。“ [Balancer-Amazan](http://aws.amazon.com/elasticloadbalancing/) ”- 如此构成，每 3 小时在服务器之间产生负载转移，所有会话都将崩溃并创建一个新的（用户注销）建议问题的可能解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T09:47:23.653

如果您有可用的 SQL Server，您可以将会话状态存储在：

> [如何：配置 SQL Server 以存储 ASP.NET 会话状态](http://support.microsoft.com/kb/317604)

如果 SQL Server 不可用，您甚至可以实现自己的：

> [http://msdn.microsoft.com/en-us/library/ms178588.aspx](http://msdn.microsoft.com/en-us/library/ms178588.aspx) [如何：示例会话状态存储提供程序](http://msdn.microsoft.com/en-us/library/ms178589.aspx)

唯一需要注意的是，您只能在商店中存储可序列化的对象，例如，如果不将`System.Xml.XmlDocument`对象的表示转换为可以序列化的东西（即表示 XML 的字符串），您将无法存储该对象。

我写了另一个可能有用/提供进一步阅读的答案：

> [ASP.NET 会话大小限制](https://stackoverflow.com/a/6719133/419)

# windows-phone-7 - 如何在 Windows Phone 之外存储位置数据？

> ID：14443774
> 
> 赞同：0
> 
> 时间：2013-01-21T17:12:09.420
> 
> 标签：windows-phone-7, azure, cloud, windows-phone-7.1

我正在开发一个 Windows Phone 应用程序，它将跟踪用户的移动并收集一些统计数据。我想将此信息存储在某个地方（如果用户允许并且此数据不会与任何人共享），以便我可以再次读取该数据。

关于如何在 Windows Phone 中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:26:09.103

你有三个选择

1 ) 如果您想在本地存储它，请使用：IsolatedStorage for Windows Phone。2）如果您希望它位于您的设备之外的某个地方：编写您自己的服务代码并将其连接到数据库（一端）并从您的 Windows 设备（另一端）调用它

服务不一定必须是 Azure ...您可以编写任何服务将其连接到您的数据库并将值存储在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:24:22.890

一种方法是使用[Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/#)将数据存储到云中。这里有一个适用于 Windows 8 的[教程](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-wp8/)。看起来你已经用 Windows Phone 7 标记了这个问题，但是移动服务包不可用（据我所知）。在这种情况下，您可以创建一个 Web 服务，您的手机应用程序可以将数据发送到该 Web 服务，然后它可以将其存储在任何地方 - 数据库、Azure 表存储或任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:24:09.410

你基本上需要一个网络服务。您可以使用自己托管的 Azure 移动服务或 Azure Web 服务。或者您可以使用任何其他数量的服务，例如 Buddy 或 Parse。您可以根据每项服务的定价和功能来决定。

# javascript - 选择脚本标签之前的元素

> ID：14443778
> 
> 赞同：18
> 
> 时间：2013-01-21T17:12:20.540
> 
> 标签：javascript, jquery, jquery-selectors

如何`input`在不编辑 DOM 的情况下选择下面代码中的第一个（如果需要，使用 jQuery）？

```
<input type="text"/> <!-- The element I want to select -->
<script>
    // Select the input above
</script>
<input type="text"/> 
```

请注意，在此代码示例之前和之后有未知数量的输入和脚本标签，因此类似的解决方案`$("input:eq(1)")`将不起作用。

棘手的部分是在执行当前 JavaScript 的标记之前选择`input`放置的位置。`script`

也无需问我*为什么*要这样做，这纯粹是为了美观，如果可能的话，我想这样做而不必在我的输入中添加随机 id。

**编辑**
这就是为什么大多数答案都不起作用的原因：http: [//jsfiddle.net/2WqfP/](http://jsfiddle.net/2WqfP/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T17:16:32.677

脚本总是在加载时运行，所以`<script>`运行的标签总是页面上的最后一个。使用纯 JS，您可以像这样得到它：

```
var scripts = document.getElementsByTagName('script'),
    currentScript = scripts[scripts.length - 1]; 
```

**编辑：**我之前弄错了。要获取此时的输入，您需要获取前面的兄弟，因此您将使用[previousSibling](https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling)。此外，请参阅下面关于文本节点和潜在解决方案的系统评论。

```
var scripts = document.getElementsByTagName('script'),
    currentScript = scripts[scripts.length - 1],
    input = currentScript.previousSibling; 
```

你也可以使用 jQuery：

```
var currentScript = $('script').last(); 
```

一旦你有了脚本，你可以很容易地得到前面的输入：

```
var input = $('script').last().prev(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T17:15:49.830

这是一个[显示我的解决方案的 jsfiddle](http://jsfiddle.net/LS52K/1/)。

```
$("input:last").val("test"); 
```

这是因为当到达脚本时，紧接在其前面的输入是要创建的最后一个输入 - 以下`<input>`' 尚未添加到 DOM 中。如果您在页面加载后运行代码（即在`onload`偶数处理程序中），这将不起作用。

值得注意的是，我个人更喜欢 id，这样您就不必依赖内联 JavaScript（这通常是个坏主意）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-18T06:05:04.900

内联脚本总是在解析时运行，并且 <script> 标签只看到他上面的内容。纯 JS 的最佳解决方案：

```
<input type="text"/> <!-- The element I want to select -->
<script>
    var inputs = document.querySelectorAll('input');
    var above_input = inputs[inputs.length - 1];
</script>
<input type="text"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T17:14:12.547

尝试这个：

```
$("script").prev("input"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-21T17:15:33.123

你有没有尝试过这样的事情？

```
var input = $('script').prev(); 
```

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-21T17:17:42.953

原生 DOM 解决方案：

```
var all = document.getElementsByTagName("*");
var input = all[all.length - 2]; 
```

将`script`是页面运行时的最后一个元素，因此`input`将是倒数第二个。

# android - 带有 Jedis 的 Android 应用程序

> ID：14443781
> 
> 赞同：1
> 
> 时间：2013-01-21T17:12:33.520
> 
> 标签：android, redis, jedis

我不知道我的问题是否有意义。但这是我所做的。Java 应用程序的第一次试用： - 我创建了示例 Java 项目。- 向其中添加了 jedis jar 文件。- 建立了一个连接，例如，

```
Jedis jedis = new Jedis("my IP address");
    jedis.connect();
    String value = jedis.get("foo"); //I have set the value for "foo" in redis
    System.out.println(value); //successfully prints foo in console when ran as Java application 
```

现在我在 Android 应用程序中尝试了同样的事情，但它失败了

```
setContentView(R.layout.activity_main_activity_jedis);
    Jedis jedis = new Jedis("my IP address");
    jedis.connect();
    String value = jedis.get("foo");
    TextView tv = (TextView)findViewById(R.id.text);
    tv.setText(value); 
```

我的目标是从 Redis 获取数据并将其显示在我的 Android 应用程序中。请帮忙 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:07:18.370

这个问题得到了解决。我在清单文件中添加了 INTERNET 的用户权限。它现在工作正常。谢谢大家 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:26:47.023

您是否将其导入到 Eclipse 项目中？

在项目中右键单击 > 属性 > Java 构建路径 > 库 > 添加外部 JAR 或您想要的其他类型...并将其激活到“订购和导出”选项卡中...

# unix - 在科学 linux (pcre) 中编译程序

> ID：14443787
> 
> 赞同：1
> 
> 时间：2013-01-21T17:12:57.290
> 
> 标签：unix, compilation, pcre

我目前正在尝试在科学 linux 上安装 gtk3（它在官方存储库中不可用）我已经习惯了 yum、apt、pacman 等，但在编译时我有点迷失了......

要安装 gtk3，我需要 glib，要安装 glib，我需要 pcre 8.32。

因此，我从他们的网站下载了压缩包。一旦“解压”，我就按照该链接上的内容进行操作： [http ://www.linuxfromscratch.org/blfs/view/svn/general/pcre.html](http://www.linuxfromscratch.org/blfs/view/svn/general/pcre.html)

但是一旦我用它的选项'./configure'，'make'，然后'make install' glib 并没有更好地配置......它说我的版本仍然是旧版本

配置：错误：未满足软件包要求（libpcre >= 8.13）：请求的“libpcre >= 8.13”但 libpcre 的版本是 7.8

这些文件似乎编译得很好，但没有“正确移动到正确的位置”......我错过了什么吗？顺便说一句，转移到另一个发行版不是一种选择：P

# c++ - boost::lambda : _1 不是类或命名空间

> ID：14443793
> 
> 赞同：0
> 
> 时间：2013-01-21T17:13:19.923
> 
> 标签：c++, boost, stl, lambda

我想从具有此类字符串作为属性的类列表中填充一组字符串（可用的公共 getter）。

我想使用 lambda 表达式和 std::for_each 来实现。

我在想类似的事情：

```
class Foo
{
    const std::string& getMe() const;
}

...
std::list<Foo> foos; // Let's image the list is not empty
std::set<std::string> strings; // The set to be filled

using namespace boost::lambda;
std::for_each(foos.begin(), foos.end(), bind(
    std::set<std::string>::insert, &strings, _1::getMe())); 
```

但是，我在编译时收到此错误：

> _1 不是类或命名空间

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:20:52.273

正确的方法是：

```
class Foo
{
public:
    const void* getMe() const
    {
        return this;
    }
};

int main()
{
    std::list<Foo> foos(10);
    std::set<const void*> addresses; // The set to be filled

    using boost::bind;
    std::for_each(foos.begin(), foos.end(), bind(
        &std::set<const void*>::insert, &addresses, bind(&Foo::getMe, _1)));

    return 0;
} 
```

# jquery - keyup 事件侦听器时上下文菜单不起作用

> ID：14443798
> 
> 赞同：1
> 
> 时间：2013-01-21T17:13:40.770
> 
> 标签：jquery, html

我有这些事件监听器（片段）：

```
...
else if($(domElement).is(':text')){
    $(domElement).focus( function () {
        $(domElement).keyup( function () {
            methods['dataUnsaved'].apply( this, []);
        });
      }); 
      $(domElement).blur( function () {
          $(domElement).unbind('keyup');
      }); 
... 
```

它们按预期工作，但由于某种原因，我无法右键单击以查看上下文菜单。我尝试返回 false 和 preventDefault()，但没有成功。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:09:00.187

我现在发现还有另一个插件，事件监听器连接到输入。（输入限制插件，在这种情况下只有数字。）

感谢您的关注。

# python - 如何正确引用 Python 类？

> ID：14443801
> 
> 赞同：1
> 
> 时间：2013-01-21T17:13:52.723
> 
> 标签：python, class, module

我正在编写我的第一个 Python 类。作为我的 java 程序员，我有这样的事情：

```
#class1.py
class class1:
    def __init__(self):
         #Do stuff here 
```

在我当前的脚本中：

```
import class1
object = class1() 
```

我得到一个`Name Error: name 'class1' is not defined`

我也试过这个，没有运气：

```
import class1
object = class1.class1() 
```

我在这里得到的错误是`AttributeError: 'module' object has no attribute 'class1'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:16:19.787

Python 导入是按模块，然后是模块的内容，因此对于您的 class1.py，它变为：

```
from class1 import class1 
```

[Python 模块文档](http://docs.python.org/2/tutorial/modules.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T17:20:29.847

在 Python 中，您导入模块。对于 class1.py 文件，您可以使用：

```
from class1 import class1 
```

或者如果你有不止一个......

```
from class1 import * 
```

# jquery - 我尝试使用 jQuery css 函数来改变元素的宽度，我使用的是正确的函数吗？

> ID：14443802
> 
> 赞同：0
> 
> 时间：2013-01-21T17:13:56.657
> 
> 标签：jquery, css

是否可以使用jQuery更改下面的宽度值

```
 <div style="width:75%" id="twitter" class="bar"></div>
 <div style="width:75%" id="other2" class="bar"></div>
 <div style="width:75%" id="something" class="bar"></div> 
```

我努力了

```
jQuery(document).ready(function($) {
   $('#twitter').css({
   "width":"5%",
   });
)}; 
```

这是我的jsfiddle

```
http://jsfiddle.net/LSwwB/1/ 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:16:13.923

您的代码中有几个错误。[已在http://jsfiddle.net/LSwwB/3/](http://jsfiddle.net/LSwwB/3/)上修复。

第 3 行：最后一个属性后没有逗号。
第 5 行：`)};`应该是`});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:15:32.500

那应该可以正常工作（使用其他人发布的语法修复）。稍微简单的是 jQuery 的 Width 函数：[http ://api.jquery.com/width/#width2](http://api.jquery.com/width/#width2)

```
$('#twitter').width('5%'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:17:01.630

```
 jQuery(function($) {
        $('#twitter').css({width:"5%"}); // <-- extra ','
   });  // <-- instead of mustache add a beard to that fella 
```

# session - Tomcat会话超时响应？

> ID：14443806
> 
> 赞同：0
> 
> 时间：2013-01-21T17:14:13.000
> 
> 标签：session, tomcat, struts2, timeout, interceptor

我在tomcat上有应用程序。应用程序是在 Struts2 中构建的。

当会话不包含用户对象（会话过期、用户注销等）时，我有拦截器将用户重定向到`loginPage`.

这在我发送标准时工作正常`HttpRequest`（调试器在我的拦截器上中断）。

但是当会话过期时（我在 web.xml 中为测试设置了 1 分钟）并且我发送 ajax 请求 tomcat 响应是错误页面（HttpRequest 将用户重定向到登录页面）。

当我的应用程序的用户执行一些 ajax 请求时，他们会出现错误页面

会话过期时tomcat会检查请求头的类型吗？

# java - Java 反射 API：调用不带参数的方法

> ID：14443808
> 
> 赞同：23
> 
> 时间：2013-01-21T17:14:16.830
> 
> 标签：java, reflection

我要调用的方法（我知道它是公开的，但我需要使用反射）：

```
public byte[] myMethod() 
```

我得到这样的`Method`对象并`m`包含`myMethod()`（我用调试器检查过）

```
Method m = Class.forName(MyClass.class.getName()).getDeclaredMethod("myMethod"); 
```

最后我需要调用 m 并将结果传递给一个对象：

```
byte[] myBytes = null;
m.invoke(myBytes); 
```

没有抛出异常但`myBytes`保持为空......我也尝试了以下但没有更多成功：

```
m.invoke(myBytes, (Object[])null); 
```

如何获得对 myBytes 的调用结果？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-21T17:16:56.880

> 没有抛出异常，但 myBytes 保持为空

正确，你想要的是：

```
byte[] myBytes = (byte[])m.invoke(yourInstance); 
```

更多在[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)中。笔记：

*   方法的返回值是 的返回值`invoke`。
*   的第一个参数`invoke`是调用该方法的实例（因为您列出了一个实例方法，而不是静态方法；如果它是静态的，第一个参数将是`null`）。您没有在任何地方显示引用实例的变量，所以我`yourInstance`在上面调用了它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-21T17:17:29.887

您当前正在将值传递给`myBytes` *方法*- 就好像它是您要调用它的目标对象一样。这是*返回*值。

你要：

```
byte[] myBytes = (byte[]) m.invoke(target); 
```

`target`您要调用它的实例在哪里（因为它是实例方法）。

如果您没有实例，则该方法必须是静态方法，此时您将调用更改为：

```
byte[] myBytes = (byte[]) m.invoke(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-30T16:39:02.570

`invoke`方法将第一个参数作为方法的实例对象，然后是参数。这里方法签名是`public byte[] myMethod()`

要调用的代码`myMethod`：

```
byte[] returnVal = (byte[]) m.invoke(MyClass.newInstance()); 
```

# php - xcode mysql php错误

> ID：14443809
> 
> 赞同：1
> 
> 时间：2013-01-21T17:14:21.253
> 
> 标签：php, iphone, mysql, ios, xcode

对不起，这是我在这里的第一个问题。我正在做一个制作应用程序的学校项目，并且在使用 sql php 连接时遇到了困难。

它将空白张贴到数据库中。

我很抱歉格式。我没有包含整个代码，只包含我认为会影响我的结果的区域。

这是我的代码：

预订.h

```
#define kPostURL @"http://XXX/app/quickbooking.php"
#define kFirstname @"firstname"
#define kLastname @"lastname"
#define kContactno @"contactno"
#define kEmail @"email"
#define kClub @"club"
#define kDatetime @"datetime"

@interface TellUs : UIViewController <UINavigationControllerDelegate, UIActionSheetDelegate, UITextFieldDelegate,UIPickerViewDataSource, UIPickerViewDelegate,UITextFieldDelegate, SKPSMTPMessageDelegate>{

IBOutlet UITextField *messageText;
IBOutlet UITextField *messageTextName;
IBOutlet UITextField *messageTextLastName;
IBOutlet UITextField *messageTextEmail;
IBOutlet UIButton *doneEditingButton;
IBOutlet UIButton *sendMail;
IBOutlet UILabel *feedbackMsg;
IBOutlet UIDatePicker *myDatePicker;
IBOutlet UITextField *yourTextField;
IBOutlet UIToolbar  *toolBar;
IBOutlet UIBarButtonItem *barButton;
IBOutlet UISegmentedControl *segmentedControl;
IBOutlet UILabel *myDatePickerLabel;
IBOutlet UILabel *myPickerLabel;
IBOutlet UIPickerView *myPicker;
IBOutlet UITextField *yourTextFieldPicker;
IBOutlet UIButton *tellUsWhatYouThink;
NSArray *dataSource;
NSArray *fieldsArray;
CGFloat             animatedDistance;

IBOutlet UIButton *postBooking;
NSURLConnection *postConnection;

}

@property (nonatomic, retain) UITextField *messageText;
@property (nonatomic, retain) UITextField *messageTextName;
@property (nonatomic, retain) UITextField *messageTextLastName;
@property (nonatomic, retain) UITextField *messageTextEmail;
@property (nonatomic, retain) UIButton *doneEditingButton;
@property (nonatomic, retain) UIButton *sendMail;
@property (nonatomic, retain) UILabel *feedbackMsg;
@property (nonatomic, retain) UISegmentedControl *segmentedControl;
@property (nonatomic, retain) UIButton *tellUsWhatYouThink;
@property (nonatomic, retain) UIDatePicker *myDatePicker;
@property (nonatomic, retain) UITextField *yourTextField;
@property (nonatomic, retain) UILabel *myDatePickerLabel;
@property (nonatomic, retain) UILabel *myPickerLabel;
@property (nonatomic, retain) UIPickerView *myPicker;
@property (nonatomic, retain) NSArray *dataSource;
@property (nonatomic, retain) UITextField *yourTextFieldPicker;
@property (nonatomic, retain) IBOutlet UITextView *textView;

@property (nonatomic, retain) UIButton *postBooking;

-(void) postFirstname:(NSString *)firstname withLastname:(NSString *)lastname withContactno:(NSString *)contactno withEmail:(NSString *)email withClub:(NSString *)club withDatetime:(NSString *)datetime;

- (IBAction)postBooking:(id)sender;

@end 
```

预订.m

```
@synthesize feedbackMsg;
@synthesize tellUsWhatYouThink;
@synthesize sendMail;
@synthesize doneEditingButton;
@synthesize messageText;
@synthesize messageTextName;
@synthesize messageTextLastName;
@synthesize messageTextEmail;
@synthesize myDatePicker, yourTextField, segmentedControl;
@synthesize myDatePickerLabel;
@synthesize myPickerLabel, myPicker, dataSource;
@synthesize yourTextFieldPicker;
@synthesize textView;

@synthesize postBooking;

-(void) postFirstname:(NSString *)firstname withLastname:(NSString *)lastname withContactno:(NSString *)contactno withEmail:(NSString *)email withClub:(NSString *)club withDatetime:(NSString *)datetime {

if (firstname != nil && lastname != nil && contactno != nil
    && email != nil && club != nil && datetime != nil){

    NSMutableString *postString = [NSMutableString stringWithString:kPostURL];
    [postString appendString:[NSString stringWithFormat:@"?%@=%@", kFirstname, firstname]];        
    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kLastname, lastname]];        
    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kContactno, contactno]];        
    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kEmail, email]];        
    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kClub, club]];        
    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kDatetime, datetime]];        
    [postString setString:[postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];
    [request setHTTPMethod:@"POST"];        
    postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

     }
}

-(IBAction)postBooking:(id)sender{

[self postFirstname: messageTextName.text withLastname: messageTextLastName.text withContactno: messageText.text withEmail: messageTextEmail.text withClub: myPickerLabel.text withDatetime: myDatePickerLabel.text];

[messageTextName resignFirstResponder];

messageTextName.text = nil;
messageTextLastName.text = nil;
messageText.text = nil;
messageTextEmail.text = nil;
myPickerLabel.text = nil;
myDatePickerLabel.text = nil;

[self.navigationController popViewControllerAnimated:YES];

}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];

}

- (void)viewDidUnload {

}

- (void)dealloc {

[segmentedControl release];
[myDatePickerLabel release];
[myPickerLabel release];
[myPicker release];
[dataSource release];   
[super dealloc];
[sendMail release]; 
[messageText release];  
[doneEditingButton release];
[fieldsArray release];
[feedbackMsg release];
[tellUsWhatYouThink release];
[messageTextName release];
[messageTextLastName release];
[messageTextEmail release];
[yourTextField release];
[yourTextFieldPicker release];

[postBooking release];

}

@end 
```

PHP 文件：

```
<?php 
session_start();
include("connectdb.php");
$first_name = $_GET['messageTextName'];
$last_name = $_GET['messageTextLastName'];
$contactno = $_GET['messageText'];
$email = $_GET['messageTextEmail'];
$club = $_GET['myPickerLabel'];
$date_time = $_GET['myDatePickerLabel'];
$query = "INSERT INTO booking VALUES ('', '$first_name', '$last_name', '$contactno', '$email', '$club', '$date_time')";
mysql_query($query) or die (mysql_error("ERROR"));
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:29:12.070

在服务器端（PHP）您使用`$_GET`全局变量，但在`xcode`您设置 POST 方法

```
[request setHTTPMethod:@"POST"]; 
```

更改php文件

```
$_GET to $_POST or to $_REQUEST. 
```

# java - 通过 Java 通过 SSL 在 IE8 中下载 PDF 会导致浏览器窗口保持打开状态。

> ID：14443815
> 
> 赞同：1
> 
> 时间：2013-01-21T17:14:42.220
> 
> 标签：java, internet-explorer-8

我们的应用程序允许用户下载 PDF 文件。在 SSL 环境中，在后台打开的 IE8 保持打开状态。

如果用户单击 5 个不同的 PDF 文件链接，这将成为一个问题，这意味着将打开 5 个空的 IE 浏览器。

在非 SSL 环境中，IE8 浏览器将关闭。

相关代码：

```
BufferedReader br = new BufferedReader(new InputStreamReader(pdfFile));
String fileData = getStringFromStream(br);
res.setHeader("Expires", ""); 
res.setHeader("Cache-Control", "");
res.setHeader("Pragma", "");
res.setContentType("application/pdf; name=" + sFileName); 
res.addHeader("Content-Disposition", "attachment;filename=" + sFileName);
   //res.addHeader("Content-Disposition", "inline; filename=" + sFileName);
res.setContentLength(fileData.length());
ServletOutputStream outStream = res.getOutputStream();
outStream.write(fileData.getBytes());
outStream.flush();
outStream.close(); 
```

# csh - 如何使用csh从XML中提取“/>”之前的字符串？

> ID：14443822
> 
> 赞同：0
> 
> 时间：2013-01-21T17:15:06.927
> 
> 标签：csh

我正在尝试使用 csh 脚本提取符号“/>”第一次出现之前存在的所有文本。我尝试了以下代码

设置产品3 =`echo "$product1" | sed 's/\/>$//'`

bt 我得到的输出是字符串在最后一次出现“/>”之前存在

请帮忙 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:02:03.640

你的`sed`替换只是一点点：

```
% echo "<<one/><two/>/>" | sed 's/\/>.*$//'
<<one 
```

使用`.*`将导致 sed 贪婪地消耗从第一个匹配到字符串结尾的所有字符，我认为这就是你想要的。

# c# - 如何用条件替换此文本？

> ID：14443823
> 
> 赞同：0
> 
> 时间：2013-01-21T17:15:07.353
> 
> 标签：c#, regex, string, replace

请看下一个代码。

```
<p>
<img src="http://jdjd" alt="" /><br />
Hola mama<br />
fdffdfdfdfd <img src="http://jdjd" alt="" /><br />
<img src="http://jdjd" alt="" /><br />
<span>Hola</span>
</p> 
```

然后，下面画出来

![在此处输入图像描述](../Images/c26982f4d5bbe2155be8bc81ab5b29cf.png)

请注意，我插入了三个`<img>`，其中两个是一行中唯一的元素，另一个在文本旁边（fdffd.. + img）。

我不知道如何解决这个问题，但我想当 a`<img>`不是一行中唯一的元素时，插入一个名为`center`. 所以结果将是下一个：

```
<p>
<img class="center" src="http://jdjd" alt="" /><br />
Hola mama<br />
fdffdfdfdfd <img src="http://jdjd" alt="" /><br />
<img class="center" src="http://jdjd" alt="" /><br />
<span>Hola</span>
</p> 
```

我想这可以使用正则表达式解决，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:44:47.963

使用正则表达式：

`(</?(?:p|br|span)(?: */)?>\s*<img )([^>]*>\s*</?(?:p|br|span)(?: */)?>)`

使用替换字符串：

`"$1class='center' $2"`

**解释：**

```
(                                 (Begin Group 1)
    </?(?:p|br|span)(?: */)?>     Find an opening or closing p, br or span tag
    \s*<img[ ]                    Followed by the start of a img tag
)                                 (End Group 1)
(                                 (Begin Group 2)
    [^>]*>                        Followed by the rest of the img tag
    \s*</?(?:p|br|span)(?: */)?>  Followed by an opening or closing p, br or span tag
)                                 (End Group 2) 
```

# windows - 当我尝试拖放一个包含 git 存储库（目前是一个子模块）的文件夹时，它显示“不能在此处放置文件夹......”

> ID：14443826
> 
> 赞同：4
> 
> 时间：2013-01-21T17:15:15.727
> 
> 标签：windows, git

在 git-windows-interface 中，当我拖放一个存储库时，它说：“无法删除文件夹，此时您只能使用应用程序删除一个没有 git 存储库的文件夹。删除单个文件夹将允许您创建一个新的该位置的 Git 存储库..."。

我应该如何将 git 存储库添加到 git-windows-interface？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:39:55.143

我遇到了同样的错误。我一直试图拖入隐藏的 .Git 文件夹。相反，拖入上面的文件夹，其中包含 .Git 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T01:27:15.673

这对我有用：

1.  将“.git”文件夹重命名为“.git_back”
2.  在同一文件夹中创建一个新的 git repo，以便新的“.git”文件夹与旧文件夹位于同一文件夹中。
3.  关闭 github for windows，删除新的 .git 文件夹并将旧文件夹重命名为“.git”
4.  再次打开 github for windows，它会看到旧的“.git”文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:27:30.373

您可以尝试通过修改它扫描的本地路径，让[GitHub for Windows检测您的存储库。](http://windows.github.com/help.html)
这样可以避免尝试在您的情况下可能不起作用的“拖放功能”（作为子模块，本质上是*嵌套*的git repo）。

如果无法更改该路径，至少尝试将该存储库复制到`%HOME%\My Documents`（HOME 由 GitHub for Windows、`C:\User\login`W7+、`C:\Document and Settings\Login`WXp 中的便携式 git 设置）。
然后本地扫描将检测到它。

# kendo-ui - 如何更改 Kendo ui 网格中按钮和文本的大小？

> ID：14443829
> 
> 赞同：1
> 
> 时间：2013-01-21T17:15:28.820
> 
> 标签：kendo-ui, kendo-grid

如何更改 Kendo ui 网格中按钮和文本（或样式）的大小？我想将它们用于响应式网页（移动和桌面）。

更改行的文本大小很容易：

```
columns: [
   {
      field: "Title",
      width: 100,
      attributes: {
            "class": "myClass",
            style: "font-size:20px;"
      }
   } 
] 
```

但我不知道如何改变列和按钮标题的大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:24:12.157

在[本](http://docs.kendoui.com/api/web/grid)节中，您可以了解如何更改 Grid 使用的消息或按钮的文本。使用 ctrl+f 并搜索“消息”和“文本”。

自定义按钮样式不是一个好主意（imo）。但是，您可以只使用带有“更强”选择器的 CSS 类。

# web-services - 有没有办法在 WSO2 DSS 上克隆已部署的数据服务

> ID：14443833
> 
> 赞同：1
> 
> 时间：2013-01-21T17:15:40.237
> 
> 标签：web-services, clone, wso2, dataservice

我在 WSO2 数据服务服务器上创建了一个数据 Web 服务，现在我想将其用作模板，以便可以从中创建更多服务。有没有办法将服务 XML 复制/粘贴到新的？我想跳过向导模式的创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:35:32.460

转到服务仪表板，您可以使用“编辑数据服务（xml 编辑）”选项。可以重复使用它来创建类似的服务。使用该 xml 内容创建一个 .dbs 文件，并通过管理控制台中的上传数据服务选项进行部署（更改数据服务的名称）。以下链接会很有用。

[1] [http://docs.wso2.org/wiki/display/DSS301/Work-In-Progress+Service](http://docs.wso2.org/wiki/display/DSS301/Work-In-Progress+Service)

# c# - 查找和读取本地存储的文件

> ID：14443835
> 
> 赞同：1
> 
> 时间：2013-01-21T17:15:47.700
> 
> 标签：c#, .net, windows-8, microsoft-metro

我有一个 Metro 应用程序，并且已将现有文件添加到解决方案资源管理器内的文件夹中。我已阅读 msdn 上的资源文档，但无法弄清楚。

![在此处输入图像描述](../Images/bcec574d2d1844c6deb34f2deb61524d.png)

我的声音文件位于 中`Assets\SFX\Standard.wav`，那么如何`MediaElement`在我的应用程序中从代码隐藏中找到并播放该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:18:47.947

我不知道你为什么要使用`MediaElement`，也许你可以试试`SoundPlayer`？

```
System.Media.SoundPlayer player = new System.Media.SoundPlayer();

player.SoundLocation = "\Assets\SFX\Standard.wav";
player.Play(); 
```

使用 MediaElement 进行编辑：

```
<MediaElement Name="TehSoundz" IsLooping="False" AutoPlay="False" Height="0" Width="0" Source="\Assets\SFX\Standard.wav" /> 
```

代码隐藏：

```
TehSoundz.Play();
TehSoundz.Stop(); 
```

# qt - 如何将 QTableWidgetItem 表示法更改为 standardNotation

> ID：14443838
> 
> 赞同：0
> 
> 时间：2013-01-21T17:15:53.850
> 
> 标签：qt, qt4, qtablewidget, qt4.8, qtablewidgetitem

我有 3 列的 QTableWidget。我将第一列和第二列中的数字相乘，并将结果写入第三列。数字是双倍的。问题是：结果是科学记数法，如“1.4e+3”。如何将符号更改为标准符号？我使用 Qt 4.8 和 Ubuntu 12.10。

我填充前两列：

```
QTableWidgetItem *itm0=new QTableWidgetItem("12345.6781");
ui->tableWidget->setItem(0,0,itm0);
QTableWidgetItem *itm1=new QTableWidgetItem("223.132");
ui->tableWidget->setItem(0,1,itm1); 
```

我将数字相乘并写出结果

```
double num0=ui->tableWidget->item(0,0)->text().toDouble();
double num1=ui->tableWidget->item(0,1)->text().toDouble();
double result=num0*num1;

QTableWidgetItem *itm2=new QTableWidgetItem(QString::number(result));
ui->tableWidget->setItem(0,2,itm2); 
```

结果是 2.75472e+06，但实际结果是 2754715,8458092

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:45:23.387

我想你正在使用`QString::number`function 。您可以使用此函数的第二个参数来指定如何完成从 double 到 QString 的转换。以下是输出：

```
double num = 1234.4565;
qDebug()<< QString::number(num);//"1234.46" 
qDebug()<< QString::number(num, 'e');//"1.234457e+03" 
qDebug()<< QString::number(num, 'f');//"1234.456500" 
```

**使用**
**'e'**格式为 [-]9.9e[+|-]999
**'E'**格式为 [-]9.9E[+|-]999
**'f'**格式为 [-]9.9
**'g'**使用 e 或 f 格式，最简洁
**的'G'**使用E或f格式，最简洁的
助手是我最好的朋友;）

# flash - 哪些版本的 Flash 版本会受到 Flash cookie 错误的影响？

> ID：14443850
> 
> 赞同：1
> 
> 时间：2013-01-21T17:16:27.897
> 
> 标签：flash, cookies, compatibility

哪些版本的 Flash 会受到[flash cookie 错误](http://ellislab.com/forums/viewthread/77044/)的影响？

# maven - SolrJ 与 Maven

> ID：14443862
> 
> 赞同：2
> 
> 时间：2013-01-21T17:17:10.973
> 
> 标签：maven, solr, solrj

我是 Solr 和 maven 的新手，我想制作一个小型应用程序，通过 SolrJ 索引我的所有数据库表。
为此，我查看了他们使用 MAVEN的本[教程。](http://wiki.apache.org/solr/Solrj)
我安装了库和罐子（Maven除外），但我有这个例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/http/HttpRequestInterceptor 
```

我查看了教程，发现要解决此问题，我们需要将其添加到我的 Maven 配置中：

> org.slf4j slf4j-simple 1.5.6

无论如何，没有maven可以做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T21:44:10.017

使用行家。即使有了它，我也花了相当多的时间来获得正确的依赖关系。教程都有些欠缺。下面是我的 pom.xml 以及我在 Maven 中引入的相关依赖项。也许它会对你有所帮助。

```
<dependency>
    <groupId>org.apache.solr</groupId>
    <artifactId>solr-core</artifactId>
    <version>4.3.0</version>
</dependency>
<dependency>
    <artifactId>solr-solrj</artifactId>
    <groupId>org.apache.solr</groupId>
    <version>4.3.0</version>
    <type>jar</type>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:46:34.950

Maven 是[Solrj](http://wiki.apache.org/solr/Solrj)的建议构建技术，因为它可以自动管理 3rd 方依赖项。如果没有依赖管理，破译这些关系是一件非常痛苦的事情（[Jar hell](http://en.wikipedia.org/wiki/Java_Classloader)）。

我可以建议使用 ivy，它具有[命令行模式](http://ant.apache.org/ivy/history/latest-milestone/standalone.html)。

首先下载 ivy jar

*   [http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar](http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar)

要检索以下 Maven 模块及其所有依赖项：

```
 <dependency>
           <artifactId>solr-solrj</artifactId>
           <groupId>org.apache.solr</groupId>
           <version>1.4.0</version>
           <type>jar</type>
           <scope>compile</scope>
    </dependency> 
```

然后按如下方式运行：

```
 java -jar ivy.jar \
      -dependency org.apache.solr solr-solrj 1.4.0 \
      -retrieve "lib/[artifact]-[revision](-[classifier]).[ext]" \
      -confs default 
```

检索到 lib 目录：

```
lib/commons-httpclient-3.1.jar
lib/wstx-asl-3.2.7.jar
lib/slf4j-api-1.5.5.jar
lib/commons-codec-1.3.jar
lib/stax-api-1.0.1.jar
lib/geronimo-stax-api_1.0_spec-1.0.1.jar
lib/commons-logging-1.0.4.jar
lib/solr-solrj-1.4.0.jar
lib/commons-io-1.4.jar
lib/commons-fileupload-1.2.1.jar 
```

# 更新

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/http/HttpRequestInterceptor 
```

这是由于缺少 httpcore.jar 文件。我通过浏览 Maven Central 发现了这一点：

*   [http://search.maven.org/#search|ga|1|fc%3A%22org.apache.http.HttpRequestInterceptor%22](http://search.maven.org/#search|ga|1|fc%3A%22org.apache.http.HttpRequestInterceptor%22)

使用“slf4j-simple”的建议是提供一种日志实现，以防您的应用程序没有日志实现。

最后......这证明了我想说的。在没有依赖管理工具（[ivy](http://ant.apache.org/ivy/)、[groovy](http://groovy.codehaus.org/Grape)、[Maven](http://maven.apache.org/)）的情况下，您只能靠自己来破译第 3 方 jar 依赖项。

# forms - Microsoft Access - 更新给定日期的总字段的表单

> ID：14443863
> 
> 赞同：0
> 
> 时间：2013-01-21T17:17:11.250
> 
> 标签：forms, ms-access, vba

我正在尝试创建一个用于跟踪/跟踪货物的表格。主要关注的是运送的样品数量和运送的大米袋数量。用户在表单中要求了几个字段，显示给定日期每个字段的总数。给定日期通常有 6 条左右的记录。

我目前有一个选择查询，可以生成这些总数，按日期分组。我似乎无法正确组合事件或按钮来工作。我也尝试过各种形式的事件。

总而言之，我想要一个表单中的字段，以保持给定日期的样本总数。我一直遇到的问题是，这似乎总是以它在表中遇到的第一个日期结束。例如，2012 年 19 月 11 日有 388 个样本，这最终出现在表单中所有记录的“样本总数”字段中。

例子：

```
 Private Sub Samples_AfterUpdate()
    Forms![2013_Assay_Tracking]![Total Samples] = DLookup("[Total_Samples]", "Assay Tracking Totals", "Date_Shipped='" & [Forms]![2013_Assay_Tracking]![Date_Shipped] & "'")
End Sub 
```

这可行，但会在表单中填充第一个发货日期的样本总数。目前有 4 个不同的日期。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:21:22.600

如果发货日期是日期，请使用#，此外，您似乎可能需要DSum：

```
Private Sub Samples_AfterUpdate()
    Forms![2013_Assay_Tracking]![Total Samples] = _
       DSum("[Total_Samples]", "Assay Tracking Totals", "Date_Shipped=#" _
       & [Forms]![2013_Assay_Tracking]![Date_Shipped] & "#")
End Sub 
```

您可以通过将表单引用放在引号内来简化语言环境问题：

```
DSum("[Total_Samples]", "Assay Tracking Totals", _
        "Date_Shipped=[Forms]![2013_Assay_Tracking]![Date_Shipped]") 
```

最后，从上面看来，您使用的是连续表格，因此对表格的引用将仅包括当前记录。如果是这种情况，您可能希望将文本框设置为：

```
=DSum("[Total_Samples]","Assay Tracking Totals","Date_Shipped=#" & [Date_Shipped] & "#") 
```

# android - 奇怪的 Android 服务没有启动

> ID：14443864
> 
> 赞同：0
> 
> 时间：2013-01-21T17:17:27.397
> 
> 标签：android, android-service

我的服务没有启动有一个奇怪的问题。我有我的清单文件和服务，并调用了它。但它仍然没有打开。

```
<service
android:name=".com.taxeeta.ForHire"
android:enabled="true" /> 
```

调用意图

```
Intent serviceIntent = new Intent();
serviceIntent.setAction("com.taxeeta.ForHire");
startService(serviceIntent); 
```

服务

```
public class ForHire extends Service 
```

我想知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:18:20.980

改变

```
android:name=".com.taxeeta.ForHire" 
```

和

```
android:name="com.taxeeta.ForHire" 
```

或者如果服务在根包上

```
android:name=".ForHire" 
```

此外，您应该使用[Intent.setClass( )](http://developer.android.com/reference/android/content/Intent.html#setClass%28android.content.Context,%20java.lang.Class%3C?%3E%29)而不是 setAction，因为您没有为您的服务声明 IntentFilter 并且您很可能尝试使用显式意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:24:31.017

当您在 Manifest 文件中声明**服务时，请像这样使用。**

```
<service android:name=".ForHire">
<intent-filter>
     <action android:name="com.taxeeta.ForHire" />
</intent-filter>
</service> 
```

& 呼叫服务 像这样。

```
Intent serviceIntent = new Intent();
serviceIntent.setAction("com.taxeeta.ForHire");
startService(serviceIntent); 
```

有关**服务**的更多信息，请参阅此文档 [http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T17:51:11.433

只需调用**startService(new Intent(getApplicationContext(),ForHire.class));**

你的清单中的每件事都很好。

无需根据您的清单设置操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T17:24:26.863

您的清单中的服务声明有问题。将其更改为：

```
<service android:name="com.taxeeta.ForHire" /> 
```

（注意`.`[dot] 已移除）。还要确保`service`是您元素的子元素`application`，这是 Android 操作系统识别服务所必需的。

# java - 始终运行相同的 Tab Android

> ID：14443870
> 
> 赞同：0
> 
> 时间：2013-01-21T17:17:37.503
> 
> 标签：java, android

我有一堂课，我在其中创建了三个选项卡 Tab。

代码如下

```
public class Tab extends TabActivity{
    public void onCreate (Bundle savedinstanceState){
        super.onCreate(savedinstanceState);
        setContentView(R.layout.tab);

        Bundle bundle = getIntent().getExtras();
        String idReunion = bundle.getString("idReunion");
        String nombreProyecto = bundle.getString("nombre_proyecto");

        TabHost tabHost = getTabHost();
        TabHost.TabSpec spec;
        Intent intent;
        Resources res = getResources();

        intent = new Intent();

        intent.putExtra("idReunion", idReunion);
        intent.putExtra("nombre_proyecto",nombreProyecto);

        intent.setClass(this, PestanaSinAsignar.class);
        spec = tabHost.newTabSpec("Pestaña 1").setIndicator("Sin asignar").setContent(intent);
        tabHost.addTab(spec);

        intent.putExtra("idReunion", idReunion);
        intent.putExtra("nombre_proyecto",nombreProyecto);

        intent.setClass(this, PestanaAsignadas.class);
        spec = tabHost.newTabSpec("Pestaña 2").setIndicator("Asignadas").setContent(intent);
        tabHost.addTab(spec);

        intent.putExtra("idReunion", idReunion);
        intent.putExtra("nombre_proyecto",nombreProyecto);

        intent.setClass(this, PestanaAsignadaOtros.class);
        spec = tabHost.newTabSpec("Pestaña 3").setIndicator("AsignadasUsuarios").setContent(intent);
        tabHost.addTab(spec);
    }
} 
```

问题是，当我单击选项卡二或三时，总是执行代码 PestanaAsignadaOtros 类，这是与选项卡三关联的类。

当您按下选项卡 2 运行 PestanaAsignadas 类代码时，如果我单击选项卡 3 运行类代码 AsignadaOtros Pestana，这将是合乎逻辑的。

为什么总是运行 PestanaAsignadaOtros 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:28:36.307

您需要为每个选项卡创建不同的意图，目前您正尝试将相同的意图用于三种不同的目的：

```
TabHost tabHost = getTabHost();

// First Tab
TabSpec firstspec = tabHost.newTabSpec("List");
// setting Title for the Tab
listspec.setIndicator("List View");

Intent firstIntent = new Intent(this, AddressActivity.class);
firstIntent.putExtra("Position", position);
firstspec.setContent(firstIntent );

// Second Tab
TabSpec secondspec = tabHost.newTabSpec("Map");
secondspec.setIndicator("Map View");

Intent secondIntent = new Intent(this, MapActivity.class);
secondIntent.putExtra("Position", position);
secondspec.setContent(secondIntent );

TabSpec thirdspec = tabHost.newTabSpec("Third");
thirdspec.setIndicator("Third View");

Intent thirdIntent = new Intent(this, ThirdActivity.class);
thirdIntent.putExtra("Position", position);
thirdspec.setContent(thirdIntent );

// Adding all TabSpec to TabHost
tabHost.addTab(firstspec); // First tab
tabHost.addTab(secondspec); // Second tab
tabHost.addTab(thirdspec); // Third Tab 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:28:17.107

您对所有 3 个选项卡使用相同的意图。您在调用 setContent 后对意图所做的更改仍然会发生。相反，您应该创建 3 个意图，像上面一样设置它们的属性，然后使用 setContent 添加它们。

# macos - 悬停时未打开 StatusItem 菜单

> ID：14443874
> 
> 赞同：1
> 
> 时间：2013-01-21T17:17:46.893
> 
> 标签：macos, cocoa

我有一个带有菜单的 NSStatusItem。我的问题是，当您单击例如 wifi 图标时，会出现菜单。当我向右移动时（在我的 Mac 上，电池状态项在那里）电池菜单会自动出现。这就是我所说的“悬停”。这种行为几乎在所有状态项和/或菜单中都实现了。但是我的 NSStatusItem 没有实现这种行为。我在 IB 中没有看到“分配”这种行为的选项，所以我开始在网上搜索，我能想到的只是：

[悬停时不打开状态项菜单](http://www.cocoabuilder.com/archive/cocoa/220094-status-item-menus-don-open-on-hover.html)

这里的“答案”是一切，但令人满意。所以我的问题是：这是真的吗？没有任何方法可以在不使用私有 API 的情况下创建这种行为吗？

非常感谢，弗兰斯

# objective-c - 什么是 CGContextRef？

> ID：14443875
> 
> 赞同：0
> 
> 时间：2013-01-21T17:17:53.883
> 
> 标签：objective-c, cocoa, core-graphics

我一直在搜索核心图形框架的文档，并在 CGContext 参考中遇到了这个

```
typedef struct CGContext * CGContextRef; 
```

这实际上意味着什么？它是指向 CGContext 的指针吗？另外，当我查看 CGColor 时，CGColorRef 是这样的：

```
typedef struct CGColor *CGColorRef; 
```

两者有什么区别？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:19:43.137

是的，它们只是表示指向 CGContext 或 CGColor 的指针的快捷方式。

所以你可以写

CGColorRef 我的参考；

而不是

CGColor *myreference;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:20:24.697

`CGContext`并且`CGColor`是两个结构；另外两个，`CGContextRef`并且`CGColorRef`是它们各自的指针类型。

就像是`typedef int* myIntegerPointer;`

只需比较：`typedef CGContext* CGContextRef;`

编辑：

`int* a, b`与 相同`int *a, b`。

* 仅与 a 相关联，而不与 b 相关联。所以在这种情况下，空间不会播放任何东西。

# spring - 我如何将spring项目转换为liferay？

> ID：14443879
> 
> 赞同：0
> 
> 时间：2013-01-21T17:18:11.057
> 
> 标签：spring, hibernate, liferay, liferay-6, liferay-ide

我开发了一个应用程序（spring，hibernate），我必须将它转换为 liferay 项目

我该怎么做？

请你帮我谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:08:18.010

一种解决方案是使用[Spring Portlet MVC](http://static.springsource.org/spring/docs/2.0.x/reference/portlet.html)（Spring MVC 的 Portlet 版本）构建您的应用程序。然后，您将能够将您的应用程序部署为 Liferay 上的 Portlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:22:00.400

Spring hibernate 和 liferay 没有任何共同之处。

Spring 和 hibernate 是框架：一个用于管理 bean，另一个用于数据库映射（orm）。

Liferay 是一个门户。

因此，您无法将项目自动迁移到 liferay。

但是你可以 ：

*   使用社交小部件将您的项目集成到 liferay 门户中
*   如果您的项目有一些标准的 portlet，那么在 liferay 环境中复制它们应该没有问题
*   对于其他情况，您需要重写代码以适应 liferay api

# c# - WPF 模板表单

> ID：14443882
> 
> 赞同：1
> 
> 时间：2013-01-21T17:18:20.907
> 
> 标签：c#, c++, .net, wpf, flowdocument

我想创建一个食谱应用程序。我希望输入看起来和感觉就像您正在编辑文档。如果我在 word 中执行此操作，我会创建一个模板表单供用户用于输入。

表单将类似于：

* * *

```
{Categoty} {Title}
{Image} {yield / nutrition info}

Ingredients
{bulleted list goes here}

Directions
{Numbered list goes here}

Notes / Comments
{Free form text goes here} 
```

* * *

我尝试使用嵌入在 RichTextBox 中的 FlowDocument 来执行此操作，但无法弄清楚。我可以很容易地存储信息并填充 FlowDocument 部分，但我无法弄清楚如何控制编辑以在某些地方强制使用项目符号或编号/防止用户更改格式等。

这可以在 FlowDocument 中完成吗？如果没有，我如何创建项目符号/编号列表区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:59:34.743

只要您使用 RichTextBox 而不是 Page，流文档就可以编辑。

你可能想看看[这个](http://www.codeproject.com/Articles/37368/WPF-Flow-Document-For-Beginners)或[这个](http://michaelsync.net/2009/06/09/bindable-wpf-richtext-editor-with-xamlhtml-convertor)甚至[这个](http://www.drdobbs.com/windows/embed-custom-guis-in-wpf/209800469)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:03:39.273

我最终为列表创建了自定义控件（自​​定义网格支持项目符号或编号的可编辑列表，并为各种文档部分使用其他控件来给我想要的控件 - 我使用 XML 文件来存储文档的各个部分以及如何生成 FlowDocument（我希望当我被要求添加新内容时，这能让我轻松更新模板）......我只生成一个 FlowDocument 用于打印目的。

我没有得到我想要的所有功能，但我让它工作了。现在我的下一个项目..

# xaml - VisualState 名称和组名，WinRT WinPRT

> ID：14443884
> 
> 赞同：0
> 
> 时间：2013-01-21T17:18:25.177
> 
> 标签：xaml, windows-runtime, visualstatemanager, winprt

我正在尝试设置多个项目（如 Button、GridViewItem 和 ListBoxItem）的自定义视觉状态。好像我错过了一些州。我搜索了 stackoverflow 和 msdn，但找不到可能的视觉状态列表，因此我可以验证我是否全部覆盖了它们。有谁知道在哪里可以找到 VisualState 名称和 GroupNames 的列表？

更新：您可以在 Visual Studio 中检查 Button 的模板，但不能检查那些无法通过工具箱添加的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:36:29.883

找到它们的地方之一是控件模板本身。右键单击设计器视图中的控件并提取模板以查看它响应的视觉状态。

# php - 发送450封邮件，需要多少时间？还有其他可用的解决方案吗？

> ID：14443890
> 
> 赞同：0
> 
> 时间：2013-01-21T17:18:58.817
> 
> 标签：php, phpmailer

我正在通过网页发送大量电子邮件（如时事通讯）。这是秘书按下“插入并通过电子邮件发送”时应该发送的消息。

因为服务器不支持 chronjobs 或类似的东西，我将电子邮件发送分成一个“刷新”页面，每次刷新发送 5 封电子邮件，以避免垃圾邮件过滤器并根据客户端请求发送电子邮件。

现在，我正在使用一个 phpmailer 脚本（请注意，我编写的代码已经很老了，就像 4-5 年前一样），它使用 smtp 服务器发送电子邮件。

发送所有 450 封电子邮件大约需要多少时间？我计算出每封电子邮件大约需要 5 秒，因此应该需要大约 35 分钟。由于“刷新页面”，我对 php 的 time_limit 没有任何问题。

我错了吗？PHPMailer 是否应该更快地发送电子邮件？

我正在考虑建议我的客户购买邮件列表服务，但最大的问题是邮件列表应该通过我的 php 代码构建，因为它从数据库中获取大量数据并从那里收集用户。

有哪些可用的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:27:18.053

出于这些目的使用 mailgun.com、postageapp.com、mailchimp.com 或 postmarkapp.com 等服务怎么样？他们都有一个很好的文档化 PHP API。

# sed - 如果部分单词匹配，则 sed 替换

> ID：14443891
> 
> 赞同：0
> 
> 时间：2013-01-21T17:19:02.087
> 
> 标签：sed

我的文字如下所示：

> 猫抓 猫
> 鼠
> 一斤

我想用“狗”代替“猫”。
当我做

> sed "s/猫/狗/"

我的结果是：

> 狗
> 抓
> 猫鼠
> 一斤

如果只有部分单词匹配，如何用 sed 替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:19:44.613

有一个错误：你缺少`g`修饰符

```
sed 's/cat/dog/g' 
```

> G
> 
> ```
> Apply the replacement to all matches to the regexp, not just the first. 
> ```

看

*   [http://www.gnu.org/software/sed/manual/html_node/The-_0022s_0022-Command.html](http://www.gnu.org/software/sed/manual/html_node/The-_0022s_0022-Command.html)
*   [http://sed.sourceforge.net/sedfaq3.html#s3.1.3](http://sed.sourceforge.net/sedfaq3.html#s3.1.3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:41:38.280

如果您只想在部分单词匹配的情况下仅用*狗替换**猫：*

 *```
$ perl -pe 's/cat(?=.)/dog/' file.txt
cat
dogch
dog_mouse
dogty 
```

我使用正面环视，请参阅[http://www.perlmonks.org/?node_id=518444](http://www.perlmonks.org/?node_id=518444)

如果你真的想要 sed ：

```
sed '/^cat$/!s/cat/dog/' file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T05:06:32.073

```
bash-3.00$ cat t
cat
catch
cat_mouse
catty 
```

`cat`仅当它是字符串的一部分时才替换

```
bash-3.00$ sed 's/cat\([^$]\)/dog\1/' t
cat
dogch
dog_mouse
dogty 
```

替换所有出现的`cat`：

```
bash-3.00$ sed 's/cat/dog/' t
dog
dogch
dog_mouse
dogty 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T02:56:50.640

awk 解决方案

`awk '{gsub("cat","dog",$0); print}' temp.txt`*

# django - Django 模板中的 if 语句

> ID：14443895
> 
> 赞同：0
> 
> 时间：2013-01-21T17:19:25.743
> 
> 标签：django, if-statement, django-templates

```
def func_view(request,id):
    post = get_object_or_404(Post, pk=id, user=request.user)

    return render_to_response('post.html',
                              {'post': post},
                              RequestContext(request)) 
```

在我的模板中：

```
 <div id="post-data">
                {{ post.name }} 

                {{ post.date }}
                {{ post.extra }}

            </div> 
```

如何创建这样的东西：如果我`{{ post.extra }}`在数据库中为空 -> 显示信息“额外为空”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:26:52.807

或使用使用过滤器[`default`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#default)：

```
{{ post.extra|default:"Extra is empty" }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T17:23:44.003

您可以使用[内置助手](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#if)：

```
{% if post.extra %}
  {{ post.extra }}
{% else %}
  Extra is empty
{% endif %} 
```

# css - 在css中制作一个固定的标题？

> ID：14443897
> 
> 赞同：1
> 
> 时间：2013-01-21T17:19:28.100
> 
> 标签：css

我`ListBoxes`在 Asp.net 中有 3 个

在选择第一个`listbox`时，第二个和第三个被填充，每个都有一个标题

![在此处输入图像描述](../Images/cdac80d015dd25308e9856f1cbd43183.png)

有时第二个 Listbox 可能不存在，这是 CSS 被破坏的时候

![在此处输入图像描述](../Images/eeab37041c7c84363623a29724b1dc10.png)

**我的 CSS**

```
 .GroupHeader
{
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: Maroon;
    margin:0px;
    background-color: #EBEBEB;
    padding:4px 0px 4px 5px;
    line-height:20px;
    letter-spacing:1px;
    font-weight:bolder;
    width:240px;

} 
```

**HTML**

**我的 p 在表分区内**

```
 <td valign="top" width="236px">
   <p class="GroupHeader" >
  &nbsp;&nbsp;Root Categories</p> 
```

**完成：**只需要使用此代码

```
 <td valign="top" width="236px">
   <p class="GroupHeader" style="width:236px;" >
  &nbsp;&nbsp;Root Categories</p> 
```

# windows - TerminateProcess() 不会立即关闭打开的窗口

> ID：14443899
> 
> 赞同：0
> 
> 时间：2013-01-21T17:19:34.910
> 
> 标签：windows, createprocess

我正在使用带有**CREATE_NEW_CONSOLE选项的***CreateProcess* API ，因为我希望在新窗口中打开应用程序。当我调用*TerminateProcess*时，它不会立即关闭窗口，而是延迟关闭。是否有可能以某种方式强制它立即关闭窗口？

 ***我目前在 Windows7 64bit 上运行，但我正在处理的程序不应该依赖于 WIN 版本。

我想使用**CREATE_NEW_CONSOLE**以便主窗口不会被新应用程序劫持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:49:24.833

我试图用`CREATE_NEW_CONSOLE`标志重现这个问题。

```
STARTUPINFO si;
PROCESS_INFORMATION pi;
ZeroMemory( &si, sizeof(si) );
si.cb = sizeof(si);
ZeroMemory( &pi, sizeof(pi) );
TCHAR szCommand[MAX_PATH];
_sntprintf_s(szCommand, MAX_PATH, _T("%s"), _T("c:\\windows\\system32\\cmd.exe"));
DWORD res = CreateProcess(NULL, szCommand, NULL, NULL, FALSE, 
                          CREATE_NEW_CONSOLE, 
                          NULL, NULL, &si, &pi);
TerminateProcess(pi.hProcess, NULL); 
```

终止过程没有延迟。

![在此处输入图像描述](../Images/8f80ddef0224f111ffd0ffa2cd6a481b.png)

尝试使用[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)找出您的案例中发生延迟的位置。***

# php - PHP 多个下拉列表，不将数组传递给 foreach() PHP 新手

> ID：14443900
> 
> 赞同：0
> 
> 时间：2013-01-21T17:19:35.143
> 
> 标签：php, windows

```
services = $row['services_provided'];//services is in the projects table,  cmt_services

<select name="services" multiple> <?php
dbConnect();
$result=mysql_query("SELECT * FROM cmt_services order servicesid");
while ($result2=mysql_fetch_array($result)) {
$Selectedservice="";
if (is_array($s_p)){
foreach ($services as $key=> $value) {
if ($result2['servicesid']==$value) 
{
    $Selectedservice = "selected";}
}
echo '<option value="'.$result2['servicesid'].'"'.$SelectedBus.'>'.$result2['service_name'].'    '.$SelectedBus.'</option>';
        }
}?>
</select>    
// 
```

下拉列表使用存储在项目表中的 cmt_services 中的数据进行填充，servicesid 为 1、2、3。如何在 1、2、3、4、5、6 中显示 1、2、3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:20:58.890

PHP 中有一个小技巧，您可以使用方括号告诉 PHP 期待一个数组：

```
<select name="services[]" multiple> 
```

您现在应该会发现您的请求中自动获得了一个数组。

```
$services = $_POST['services']; // this is an array 
```

# cuda - 多个块和线程可以写入同一个输出吗？

> ID：14443904
> 
> 赞同：1
> 
> 时间：2013-01-21T17:19:45.767
> 
> 标签：cuda

我有以下计算两个数组的平方和误差的 CUDA 内核代码。

```
__global__ void kSquaredError(double* data, double* recon, double* error, 
                               unsigned int num_elements)
{
    const unsigned int idx = blockIdx.x * blockDim.x + threadIdx.x;

    for (unsigned int i = idx; i < num_elements; i += blockDim.x * gridDim.x) {
        *error += pow(data[i] - recon[i], 2);
    }
} 
```

我需要一个标量输出（错误）。在这种情况下，似乎所有线程都在同时写入错误。有什么方法需要同步吗？

目前我的结果很糟糕，所以我猜有一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:56:58.933

由于所有线程都尝试同时更新相同的全局内存地址，您现在正在执行的实现会受到竞争条件的影响。您可以轻松地放置一个`atomicAdd`函数，`*error += pow...`但由于每次更新都会对其进行序列化，因此会出现性能问题。

相反，您应该尝试使用共享内存进行减少，如下所示：

```
_global__ void kSquaredError(double* data, double* recon, double* error, unsigned int num_elements) {
    const unsigned int idx = blockIdx.x * blockDim.x + threadIdx.x;
    const unsigned int tid = threadIdx.x;
    __shared__ double serror[blockDim.x];//temporary storage of each threads error

    for (unsigned int i = idx; i < num_elements; i += blockDim.x * gridDim.x) {
        serror[tid] += pow(data[i] - recon[i], 2);//put each threads value in shared memory
    }

    __syncthreads();

    int i = blockDim.x >> 1; //halve the threads
    for(;i>0;i>>=1) {//reduction in shared memory
            if(tid<i) {
                serror[tid] += serror[tid+i];
                __syncthreads();//make shure all threads are at the same state and have written to shared memory
            }
    }

    if(tid == 0) {//thread 0 updates the value in global memory
        atomicAdd(error,serror[tid]);// same as *error += serror[tid]; but atomic
    }
} 
```

它的工作原理如下，每个线程都有自己的临时变量，它计算所有输入的错误总和，当它完成时，所有线程都聚集在`__syncthreads`指令处，以确保所有数据都是完整的。

现在，块中所有线程的一半将从对应的另一半中获取一个值，将其添加到自己的值中，再次一半的线程并再次执行，直到剩下一个线程（线程 0），该线程将具有总和.

现在线程 0 将使用 atomicAdd 函数更新全局内存，以避免与其他块（如果有的话）发生争用情况。

如果我们只使用第一个示例并在每个分配上使用 atomicAdd 。您将拥有`gridDim.x*blockDim.x*num_elements`可以序列化的原子函数，现在我们只有`gridDim.x`原子函数，数量要少得多。

请参阅[优化 CUDA 中的并行缩减](http://people.maths.ox.ac.uk/gilesm/cuda/prac4/reduction.pdf)以进一步了解如何使用 cuda 进行缩减。

## 编辑

在减少 for 循环中添加了 if 语句，忘记了。

# javascript - 如何以编程方式删除

> ID：14443911
> 
> 赞同：1
> 
> 时间：2013-01-21T17:20:21.047
> 
> 标签：javascript, macos, cocoa, webview, html-heading

我目前正在开发一个使用可编辑 WebView 的 OSX 应用程序。
我用一个

```
[webView stringByEvaluatingJavaScriptFromString:@"document.execCommand(\"FormatBlock\", false, \"<H1>\")"]; 
```

命令给选定的段落（或光标所在的段落）一个 H1 标签。
有没有办法删除 < H1 >~< H6 > （如果可能的话 < Blockquote >）标签？
更好的是，有没有办法将标签改为 < div > 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:32:45.297

[我刚刚在JavaScript document.execCommand remove formatBlock formatting?](https://stackoverflow.com/questions/10810940/javascript-document-execcommand-remove-formatblock-formatting)发现了一个类似的问题？

我需要做的就是

```
[webView stringByEvaluatingJavaScriptFromString:@"document.execCommand(\"FormatBlock\", false, \"<div>\")"]; 
```

# g++ - g++：如何禁用特定的“不推荐使用或过时的标头”？

> ID：14443914
> 
> 赞同：6
> 
> 时间：2013-01-21T17:20:25.940
> 
> 标签：g++, warnings, deprecated

我们正在使用 g++ 4.4.3，我们的第三方库之一导致了这个可爱的错误

/usr/include/c++/4.4/backward/backward_warning.h:28:2: 警告：#warning 此文件包含至少一个已弃用或过时的标头，将来可能会在不另行通知的情况下将其删除。请改用具有等效功能的非弃用接口。有关替换标头和接口的列表，请参阅文件 backward_warning.h。要禁用此警告，请使用 -Wno-deprecated。

由于它是第三方库，我无法修复问题，所以我只想告诉编译器对导致问题的一个 H 文件抑制此警告。

我尝试了一些东西

```
#pragma GCC diagnostic ignored "-Wdeprecated" 
```

但我找不到要指定的警告（没有“-Wdeprecated”）。

那么有什么方法可以仅针对一个有问题的 H 文件来抑制此警告吗？我希望做这样的事情：

```
// Turn off the warning
#pragma GCC diagnostic ignored "-Wdeprecated"
#include "BadFile.h"
// Turn the warning back on
#pragma GCC diagnostic warning "-Wdeprecated" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:21:49.273

我无法想出使用编译指示的方法，只能通过在命令行上传递 -Wno-deprecated 。因此，如果您感到绝望，可以尝试：

```
#undef __DEPRECATED

// include offensive headers here...

#define __DEPRECATED 
```

但请注意，我绝对不会容忍 undef'ing 系统级别 #defines :-P

# c++ - 静态库的链接器错误

> ID：14443924
> 
> 赞同：0
> 
> 时间：2013-01-21T17:20:59.080
> 
> 标签：c++, g++, static-libraries, linker-errors, header-files

我已经成功编译了我的拼写检查程序和 libspellcheck 库。现在我的问题是允许其他开发人员使用我的 libspellcheck。我创建了一个简单的测试程序：

```
#include <spellcheck.h>
#include <iostream>

using namespace std;

int main(void)
{

    bool spell_result = check_spelling("english.dict", "abed");

    if(spell_result == true)
    {
        cout << "your dictionary / libspellcheck works!" << endl;
    }
    else
    {
        cout << "problem with your dictionary / libspellcheck" << endl;
    }

    return 0;
} 
```

如果一切正常，程序将输出：

你的字典 / libspellcheck 有效

但是，这个程序甚至不会编译。我用了：

g++ -lspellcheck -o 测试 test.cpp

它没有用。我相信这是头文件的问题，因为编译器给了我这个：

```
test.cpp: In function ‘int main()’:
test.cpp:9:59: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
test.cpp:9:59: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
/tmp/ccIz3ivT.o: In function `main':
test.cpp:(.text+0x19): undefined reference to `check_spelling(char*, char*)'
collect2: ld returned 1 exit status 
```

唯一的问题是，spellcheck.h 位于 /usr/include 中，我认为它应该在其中。我的问题是，我该如何解决这个错误，是我的头文件有问题还是我的 libspellcheck 有问题。如果您需要查看其他代码，我很乐意提供，因为拼写检查和 libspellcheck 是在 GPL 下获得许可的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:24:02.983

假设您`check_spelling`在标题中的声明是正确的，试试这个：

```
g++ -o test test.cpp -lspellcheck 
```

（`-l`应该*在*对象之后，具体取决于命令行中的库）。从头文件开始，确实找到并使用了它*，*否则您会从编译器而不是链接器收到错误。

# c# - Winforms：循环期间刷新

> ID：14443925
> 
> 赞同：1
> 
> 时间：2013-01-21T17:21:04.407
> 
> 标签：c#, winforms, multithreading, loops

我正在循环通过从包含 X 记录的 excel 文件读取的 c# 中的数据集。出于测试目的，我使用 Thread.Sleep() 在读取每条记录后暂停输出一秒钟。我的理解是他们以我编写循环的方式，它应该暂停 1 秒，然后显示 1 行输出（1 条记录），暂停 1 秒，显示 1 行，等等......但是，当我执行我得到的代码时一个 X 秒的长时间停顿，然后所有记录立即输出到屏幕上。有谁知道为什么会这样？我插入了一个断点并单步执行，一切似乎都运行良好（没有错误或任何东西）。抱歉，如果这是一个基本问题，但我是一个绿色程序员。

```
private void ReadExcelFile()
    {
        string fileAndPath = fileTextBox.Text;
        string fileName = Path.GetFileName(fileAndPath);
        string directoryPath = Path.GetDirectoryName(fileAndPath);

        var connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileAndPath + ";Extended Properties=\"Excel 12.0;IMEX=1;HDR=NO;TypeGuessRows=0;ImportMixedTypes=Text\""; ;
        using (var conn = new OleDbConnection(connectionString))
        {
            conn.Open();

            var sheets = conn.GetOleDbSchemaTable(System.Data.OleDb.OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
            using (var cmd = conn.CreateCommand())
            {
                cmd.CommandText = "SELECT * FROM [" + sheets.Rows[0]["TABLE_NAME"].ToString() + "] ";

                var adapter = new OleDbDataAdapter(cmd);
                var ds = new DataSet();
                adapter.Fill(ds);

                foreach (DataRow row in ds.Tables[0].Rows)
                {
                    user = row.ItemArray[0].ToString();
                    email = row.ItemArray[1].ToString();
                    password = row.ItemArray[2].ToString();
                    Thread.Sleep(1000);                   

                    excelTextBox.Text += user + "     " + email + "     " + password + "     " + Environment.NewLine;
                }                    
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:23:39.503

由于您在主线程（UI 线程）上运行此方法，因此该线程不可用于处理事件（例如显示更新）。

您可以执行与此类似的操作来处理 UI 消息： [https ://stackoverflow.com/a/3121934/38368](https://stackoverflow.com/a/3121934/38368)

或者，更好的是，重新设计您的代码。例如，使用单独的线程。例如[https://stackoverflow.com/a/1216799/38368](https://stackoverflow.com/a/1216799/38368)

# java - Glassfish 3：Web 应用程序部署找不到库

> ID：14443926
> 
> 赞同：1
> 
> 时间：2013-01-21T17:21:10.250
> 
> 标签：java, glassfish, glassfish-3, war

我已从 Glassfish v2.1 迁移到 Glasfiss 3.1.2.2。我在 Glassfish v2.1 中部署并运行了几个 Web 应用程序 (WAR)，但在 Glassfish v3.1.2.2 中部署其中一些应用程序时遇到了问题。

当我尝试在 Gfv3 中部署 WAR 文件时，我总是得到一个与 web.xml 描述符中定义的库相关的 ClassNotFoundException，例如：

```
<listener>
    <listener-class>org.directwebremoting.servlet.DwrListener
    </listener-class>
</listener> 
```

或者

```
 <init-param>
        <param-name>javax.xml.parsers.DocumentBuilderFactory</param-name>
        <param-value> com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl
        </param-value>
    </init-param> 
```

这些库包含在 web-app WEB-INF/lib 目录中。如果我将它们复制到 Glassfish 安装中的 domain/domain1/lib 文件夹，问题就会消失，我可以正确部署网络应用程序。但我不能使用这种方法，我需要每个网络应用程序使用自己的库。

有谁知道可能是什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:06:01.097

问题是我的 Web 应用程序有 2 个描述符文件：一个 web.xml 和一个 sun-web.xml（用于兼容性问题）。

我删除了 sun-web.xml 并且问题消失了。我可以在没有相关问题的情况下部署 WAR。

感谢您的回答。

# debugging - 是否可以仅在条件下中断 GDB，而不与行、函数等相关联？

> ID：14443931
> 
> 赞同：0
> 
> 时间：2013-01-21T17:21:40.467
> 
> 标签：debugging, gdb

> **可能重复：**
> [GDB：如果变量相等则中断](https://stackoverflow.com/questions/14390256/gdb-break-if-variable-equal-value)

是否可以仅在条件下中断 GDB，而不与行、函数等相关联？

如果我们这样做就可以了： `break 1699 if m_foo != 0` m_foo 将仅在第 1699 行进行评估。

但如果我们这样做： `break ... if m_foo != 0`

如何在执行期间评估属性的值，如果 cond 为真，则无论它在哪里，都将中断。

# c# - C# 对象继承

> ID：14443933
> 
> 赞同：3
> 
> 时间：2013-01-21T17:21:48.420
> 
> 标签：c#, inheritance, base-class

我正在尝试在 c# 中创建一个可以扩展到子类的基类。

例如：

```
public class ObjectsInTheSky 
{
    public string Size, Shape;
    public float Mass;
    public int DistanceFromEarth;
    public bool hasAtmosphere, hasLife;
    public enum ObjectTypes {Planets,Stars,Moons}

    public ObjectsInTheSky( int id ) 
    {
        this.Load( id );
    }
    public void Load( int id) 
    {
        DataTable table = Get.DataTable.From.DataBase(id);

        System.Reflection.PropertyInfo[] propInfo = this.GetType().GetProperties();
        Type tp = this.GetType();
        foreach (System.Reflection.PropertyInfo info in propInfo)
        {
            PropertyInfo p = tp.GetProperty(info.Name);
            try
            {
                if (info.PropertyType.Name == "String")
                {
                    p.SetValue(this, table.Rows[0][info.Name].ToString(), null);
                }
                else if (info.PropertyType.Name == "DateTime")
                {
                    p.SetValue(this, (DateTime)table.Rows[0][info.Name], null);
                }
                else
                {
                    p.SetValue(this, Convert.ToInt32(table.Rows[0][info.Name]), null);
                }
            }
            catch (Exception e) 
            {
                Console.Write(e.ToString());
            }
        }
    }
}

public class Planets : ObjectsInTheSky 
{
    public Moons[] moons;
}

public class Moons : ObjectsInTheSky 
{

}

public class Stars : ObjectsInTheSky 
{
    public StarTypes type;
    public enum StarTypes {Binary,Pulsar,RedGiant}
} 
```

我的问题是当我尝试使用一个对象时：

```
Stars star = new Stars(142); 
```

star.type 不存在并且是star 的属性，它作为star.star.type 存在但完全无法访问，或者我不知道如何访问它。

我不知道我是否正确扩展了 ObjectsInTheSky 属性。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:25:04.217

看起来好像您正在尝试使用未在子类`Stars`或基类上定义的构造函数。

```
Stars star = new Stars(142); 
```

如果您尝试使用该`.Load(int)`方法，那么您需要这样做：

```
Stars star = new Stars();
star.Load(142); 
```

或者，如果您尝试使用基本构造函数，则需要在子类中定义它：

```
public class Stars : ObjectsInTheSky 
{
    public Stars(int id) : base(id) // base class's constructor passing in the id value
    {
    }

    public Stars()  // in order to not break the code above
    {
    }

    public StarTypes type;
    public enum StarTypes {Binary,Pulsar,RedGiant}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:27:12.977

C# 中的构造函数不被继承。您需要向每个基类添加额外的构造函数重载：

```
public class Stars : ObjectsInTheSky 
{
    public Stars(int id) : base(id) { }

    public StarTypes type;
    public enum StarTypes {Binary,Pulsar,RedGiant}
} 
```

这将创建一个构造函数，它只为您调用基类的构造函数。

# opengl - OpenGL 使用每个模型的特定纹理

> ID：14443934
> 
> 赞同：1
> 
> 时间：2013-01-21T17:21:49.553
> 
> 标签：opengl, textures, lwjgl

我问的最后一个问题是关于如何在 OpenGL 中绘制不同的模型。我得到了覆盖，但现在我被困在做纹理。再一次，只要我只使用**一种**纹理，我就可以轻松地使用纹理。

加载纹理的类：

```
public class Textures
{

    public static int tex, tex2;

    public static void load() throws IOException
    {
        tex = glGenTextures();
        tex2 = glGenTextures();

        load(tex2, "moreModels/robot.jpg", "jpg");
        load(tex, "moreModels/sample.jpg", "jpg");
    }

    public static void load(int tex, String name, String type) throws IOException
    {
        glBindTexture(GL43.GL_TEXTURE_2D, tex);

        glTexParameterIi(GL43.GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
        glTexParameterIi(GL43.GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

        glGenerateMipmap(GL43.GL_TEXTURE_2D);

        glTexParameterIi(GL43.GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
        glTexParameterIi(GL43.GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR);

        Texture texture = TextureLoader.getTexture(type, ResourceLoader.getResourceAsStream(name));

        byte[] pixels = texture.getTextureData();

        ByteBuffer buffer = BufferUtils.createByteBuffer(pixels.length);
        buffer.put(pixels);
        buffer.flip();
        glTexImage2D(GL43.GL_TEXTURE_2D, 0, GL_BGR, texture.getImageWidth(), texture.getImageHeight(), 0, GL_BGR, GL_BYTE, buffer);
    }
} 
```

现在，我认为简单地调用**glBindTexture(GL43.GL_TEXTURE_2D, textureID)**会改变纹理，但不会。如果我在任何时候调用 glBindTexture 方法，一切都会被渲染为黑色。

Is it the same as before, where I have to do the entire load method every time I need to change the texture? (Perhaps saving the Texture object, so I don't have to load it over and over again). And if so, what's the point of having glGenTextures() when it aparently forgets everything about it when changed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:11:41.793

I think you have a little bit wrong understanding of OpenGL [texture](http://www.opengl.org/wiki/Texture).You must remember:every time you load a new image you have to create a new texture object using the routine you have shown in your question.Additionally , if you want just to update (replace the pixels) of the existing texture , you should use [glTexSubImage2D](http://www.opengl.org/sdk/docs/man/xhtml/glTexSubImage2D.xml) .This way you don't create new texture object but update the data in the existing one.

Now , if you want to have several textures ,let's say, one as a color map and another as normal map, then you have to create 2 textures from scratch which will be accessed by your fragment shader samplers.

Based on your code it is hard to see how you do the whole setup (rendering loop ,shaders).If you supply more info then it will be possible to assist you further.

# python - 使用 Python 的正则表达式搜索替换目录中的多个文件

> ID：14443935
> 
> 赞同：0
> 
> 时间：2013-01-21T17:21:51.863
> 
> 标签：python, regex

我哪里错了？？

```
import os, os.path, re

path = "D:\python-test"
myfiles = os.listdir(path)

REGEXES = [(re.compile(r'dog'), 'cat'),
           (re.compile(r'123'), '789')]
for f in myfiles:

    file_name, file_extension = os.path.splitext(f)

    if file_extension in ('.txt', '.doc', '.odt', '.htm', '.html', '.java'):

        input_file = os.path.join(path, f)

        with open(input_file, "w") as fi:
            for line in fi:
                for search, replace in REGEXES:
                    line = search.sub(replace, line)
                fi.write(line) 
```

不知何故，它不起作用。我想在当前文件而不是新文件中进行替换。

**更新：**如何从 A.java 创建 A_reg.java。将 A.java 移动到单独的本地文件夹，然后将 A_reg.java 重命名回 A.java 。可能的 ？如果是，请帮助我提供代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:23:24.100

这是完全正常的：您自己覆盖了文件。写入*新*文件，然后重命名。

此外，打开截断文件的方式：

```
$ cat t.txt 
foo
$ python
>>> f = open("t.txt", "w")
>>> f.close()
>>> exit()
$ cat t.txt
# file is empty!!
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:00:31.570

基于 Fge 的输入。我可以通过使用使它工作

```
from shutil import move

move(output_file, input_file) 
```

因此**工作代码**将是

```
import os, os.path, re
from shutil import move

path = "D:\python-test"
myfiles = os.listdir(path)

REGEXES = [(re.compile(r'dog'), 'cat'),
           (re.compile(r'123'), '789')]
for f in myfiles:

file_name, file_extension = os.path.splitext(f)
generated_output_file = file_name + "_regex" + file_extension

if file_extension in ('.txt', '.doc', '.odt', '.htm', '.html', '.java'):

    input_file = os.path.join(path, f)
    output_file = os.path.join(path, generated_output_file)

    with open(input_file, "r") as fi, open(output_file, "w") as fo:
        for line in fi:
            for search, replace in REGEXES:
                line = search.sub(replace, line)
            fo.write(line)

move(output_file, input_file) 
```

# php - 添加到愿望清单按钮仅在 magento 中仅显示可下载产品

> ID：14443937
> 
> 赞同：0
> 
> 时间：2013-01-21T17:21:56.303
> 
> 标签：php, magento

我已删除`add to wish list`产品视图页面上的按钮，但它仍然显示可**下载**产品。

谁能告诉我如何从可下载的**产品**中删除它？

看看这两个链接

*   [http://www.debreiboerderij.nl/gratis-patronen/de-breiboerderij-sneeuwkol-roma-big-gratis-patronen.html](http://www.debreiboerderij.nl/gratis-patronen/de-breiboerderij-sneeuwkol-roma-big-gratis-patroon.html)
*   [http://www.debreiboerderij.nl/scheepjes-softfun-2423-turkoois.html](http://www.debreiboerderij.nl/scheepjes-softfun-2423-turkoois.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:38:36.380

我想你可以看看以下文件（默认主题）：app/design/frontend/base/default/layout/downloadable.xml

在标签的第217行，它会添加一个名为links.phtml的模板文件，它属于可下载的模块。

您可能会注意到，在修改与可下载产品相关的功能时，请始终注意以下文件

应用程序/设计/前端/基础/默认/模板/可下载

, 因为 Mage_Downloadable 模块有一些自定义

# vhdl - 为什么我们在 VHDL 中使用函数

> ID：14443940
> 
> 赞同：8
> 
> 时间：2013-01-21T17:22:07.280
> 
> 标签：vhdl

函数显然不如实体那么冗长。但这意味着许多缺点，包括：

*   没有等效的通用关键字
*   只能输出一种

似乎可以递归调用函数。实体可能不是这样吗？如果是这样，除了审美目的之外，还有什么好的理由使用函数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:49:45.303

函数不能直接创建硬件——它们必须存在于架构中才能这样做。没有什么可以阻止您将所有功能放入`function`(or `procedure`) 中，然后在其中调用它`process`。

关于您的其他一些观点：

*   使用过程*可以*有多个`inout`或`out`参数。

*   实体*可以*递归......考虑：

    ```
    entity recurse is
        generic (
            depth : integer := 1;
            param : integer := 3);
        port (
            a : in  integer;
            b : out integer);
    end entity recurse;

    architecture a1 of recurse is   
        signal c : integer;
    begin
        c <= a + 1;
        bottom: if depth = param generate
            b <= a + 1;
        end generate bottom;

        mid:if depth /= param generate
            recurse_1: entity work.recurse
                generic map (
                    param => param,
                    depth => depth+1)
                port map (
                    a     => c,
                    b     => b);
        end generate mid;
    end architecture a1; 
    ```

不是很有用，但它可以很好地合成和模拟。

*   最后，当然，您仅将函数用于美学目的（假设您将可维护性和可读性包含在美学的定义中，根据我的经验，大多数编程类型都会这样做）。您仅将枚举类型、实体、记录和一大堆其他语言特征用于“审美目的”。即使是汇编助记符也很美观！也许应该回到切换 DIP 开关 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T10:16:33.853

我明白你为什么感到困惑，另一个好问题是为什么会有*procedure*和*function*。（VHDL 有时看起来很不优雅！）

话虽如此，我一直都在使用过程和函数，尽管主要是在测试平台中。例如，对于我不久前制作的防火墙系统的测试平台，我编写了一个名为`pd_tb_send_udp_packet()`我在主进程中重复使用的程序，例如，

```
pd_tb_send_udp_packet("10.10.10.2", 1234, false);
pd_tb_send_udp_packet("10.10.10.1", 1234, true);
pd_tb_send_udp_packet("10.10.10.1", 1235, false);
pd_tb_send_udp_packet("ff02:100::1", 1234, false);
pd_tb_send_udp_packet("ff02:101::1", 1234, true); 
```

此过程生成具有给定地址/端口的随机 UDP 数据包并将其发送到防火墙系统，然后根据最终的布尔参数测试它是否被转发。这是它的第一行，我在其中使用库中的函数：

```
if f_atvtb_is_ipv6_addr(dest_ip_addr) then
  v_ipv6 := true;
  v_ipv6_addr := f_atvtb_ipv6_addr(dest_ip_addr);
else
  v_ipv6 := false;
  v_ipv4_addr := f_atvtb_ip_addr(dest_ip_addr);
end if; 
```

后两者分别从字符串输入返回 128 位和 32 位 std_logic_vector。

虽然我可以在不使用过程和函数的情况下完成所有这些工作，但肯定会更加混乱。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T17:28:47.967

vhdl 中的函数使代码易于维护和阅读。通常架构非常大，在调试时，如果某些东西不起作用，您可以轻松找到有问题的功能并纠正它，而无需分析整个架构主体。

在小代码的情况下它是无用的，但在更大的机器上，如果你认为它功能明智，它会让你更好地理解。

对此没有规定，因此欢迎所有评论。

简而言之：功能的优点是

*   重载
*   运营商定义
*   因此运算符重载
*   更好的代码结构

# mplayer - mplayer slave：在开始播放之前设置音量

> ID：14443942
> 
> 赞同：4
> 
> 时间：2013-01-21T17:22:11.253
> 
> 标签：mplayer

我知道这是关于一个特定的程序（mplayer 后端）；但是它将用于对前端进行编程，所以我希望它仍然被认为是 Stack Overflow 上的主题。

我想运行两个 mplayer 从属实例，它们将用于在不同的音频流之间淡入淡出（webradio；平滑地改变频道）。为此，我设置了 mplayer 的“软件音量”，这样它就不会影响声卡的 PCM 输出通道，而是插入了一个软件音量混合器来调节音量。

但是，我遇到以下问题。

我使用以下命令启动 mplayer（可以在命令行上测试）：

```
mplayer -slave -idle -softvol 
```

并向 mplayer 发送以下命令：

```
loadfile <url>
set volume 0 
```

它开始（短时间）以 100% 的音量播放文件，然后跳到 0% 的音量。如果我交换这两个命令，mplayer 会告诉我无法调节音量：

```
Failed to set property 'volume' to '0'.
ANS_ERROR=PROPERTY_UNAVAILABLE 
```

显然，尚未加载音频过滤器/尚未设置音频输出或类似的东西，因此 mplayer 无法更改不存在的音频输出的音量。

我可以强制 mplayer 提前初始化所有内容，以便我可以将音量设置为 0%，加载文件，然后增加音量以淡入播放吗？

我已经检查了我是否可以在播放某些文件（例如静音虚拟文件）*后设置音量；*mplayer 抱怨同样的错误。目前，我能想到的唯一选择是启动这样一个虚拟文件，调整音量，停止虚拟文件，加载正确的文件来播放，它会以刚刚设置的音量开始。但我不敢相信这是最好的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:30:01.550

我自己解决了这个问题：虽然我尝试遵循[本指南](http://www.mplayerhq.hu/DOCS/HTML/en/advaudio-volume.html)，`-af volume=0`但没有帮助。但是，还有一个`-volume 0`命令行选项对我有用：

```
mplayer -slave -idle -softvol -volume 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-14T05:09:06.670

我发现这很完美@我的家庭播放器

重要的是，音量设置：'echo "volume $i 1"' 中的 1 否则 vol 没有变化。

mkfifo /tmp/mi1 和 /tmp/mi2 并在此之前将 $url1 和 $url2 设置为您的 radiostreamurls

```
mplayer -softvol -slave -input file=/tmp/mi1 $url1 &>/dev/null &  mplayer -softvol -slave -input file=/tmp/mi2 $url2 &  for ((i=1; i<=100; i+=1)); do sleep 0.25; echo "volume $(( 100 - $i )) 1 ">/tmp/mi1; sleep 0.25 ; echo "volume $i 1 ">/tmp/mi2  ; done ;  (sleep 5 ; echo quit >/tmp/mi1 ;echo quit >/tmp/mi2)& 
```

快乐聆听

# maven - Maven 站点生命周期

> ID：14443944
> 
> 赞同：1
> 
> 时间：2013-01-21T17:22:16.543
> 
> 标签：maven

因此，我能够找到[的关于 Maven 及其生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)的所有文档都表明该站点只有 4 个阶段：

```
pre-site
site
post-site
site-deploy 
```

但是，在我的 pom.xml 中，我有一个在验证阶段运行的 ant 脚本。根据“站点生命周期”，验证不是一个阶段，但我的 ant 脚本会运行......两次！不仅如此，它还编译我的源代码并运行测试（这需要永远）。

什么给了，Maven？您的文档与您的运行时行为不匹配。

帮助？

**编辑：**

一个插件，解释它。谢谢，我正在使用这个报告插件：

```
<reporting>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-report-plugin</artifactId>
      <version>2.13</version>
    </plugin>
  </plugins>
</reporting> 
```

我发现[这个关于surefire报告插件的文档](http://maven.apache.org/surefire/maven-surefire-report-plugin/)很有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:26:30.457

一些 Maven 插件（例如 javadoc）声明了一个“分叉的生命周期”。因此，最有可能的是，您的报告配置中有一个插件，该插件需要一个包括验证的生命周期。如果您使用的是 Maven (3.0.4) 的最新副本，则 -X 选项将在数千行无用的内容中包含此分叉活动的可读指示。

# php - 将普通日期转换为时间戳

> ID：14443946
> 
> 赞同：-7
> 
> 时间：2013-01-21T17:22:24.960
> 
> 标签：php, sql, forms, timestamp

我将如何转换此用户输入：

> 2013 年 1 月 22 日下午 2:33

使用 PHP 转换成正常的 SQL 时间戳格式？

> 2013-01-22 14:33:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:24:41.750

使用[`DateTime`](http://php.net/manual/en/class.datetime.php)的[`createFromFormat`](http://php.net/manual/en/datetime.createfromformat.php)

```
$datetime = DateTime::createFromFormat('m/d/Y g:i a', '01/22/2013 2:33 pm');
echo $datetime->format('Y-m-d H:i:s'); 
```

# c# - 生成的模型对象不显示

> ID：14443948
> 
> 赞同：1
> 
> 时间：2013-01-21T17:22:39.297
> 
> 标签：c#, asp.net, visual-studio-2010, entity-framework-5

我正在使用数据库优先方法。

在 VB.NET Web 项目中，我使用生成`EF 5.x DBcontext`器模板生成模型对象类，解决方案资源管理器添加了`Model.Context.tt`和`Model.tt`文件，但没有添加任何文件，`POCO's`如下所示：

![在此处输入图像描述](../Images/f8ef334d5ecb8a118fa90f3712e8baa5.png)

然而，不知何故，项目仍然知道这些类，并且它们确实存在于文件系统中。

如果我在 C# web 项目中执行完全相同的过程，它会完美运行，如下所示：

![在此处输入图像描述](../Images/2a01e197eeebf86cbad4e5d91004265b.png)

我究竟做错了什么？

编辑：“显示所有文件”确实会导致这些文件出现在解决方案资源管理器中。但是，此功能旨在使解决方案资源管理器显示文件系统中未包含在项目中的任何文件。我的问题是，如果这些文件已经是项目的一部分（它们似乎是！），为什么不显示在解决方案资源管理器中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:55:57.893

解决方案资源管理器工具栏中应该有一个图标，显示“显示所有文件”。您需要单击它，因为对于 VB 项目，默认情况下它是关闭的。

# jquery - jQuery CSS 图像文件夹

> ID：14443952
> 
> 赞同：1
> 
> 时间：2013-01-21T17:22:55.543
> 
> 标签：jquery, css

我下载了 jQuery，将 CSS 放入它自己的文件夹中，相对于该文件夹，图像文件夹必须位于何处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:23:45.817

简单回答你的问题::把它放在你的css文件夹中

```
css/images 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:29:47.027

如果是，则应将图像放置在`images`相对于 css 文件位置的文件夹中。

即：如果 css 文件保存在名为的文件夹中，`css`则图像应保存在`css/images`

# html - HTML 表格样式

> ID：14443956
> 
> 赞同：1
> 
> 时间：2013-01-21T17:23:14.647
> 
> 标签：html, css, html-table, width

在为动态生成的表格设置样式时遇到问题。用户可以选择必须有多少列，其中一些具有固定长度。我怎样才能让另一个给出剩余空间的百分比，而不必每次都指定列的确切宽度，并且不会以不同的数据/不同的浏览器结束不同的列宽？

例子：

```
<style type="text/css">
table{
    width:800px;
    border:1px solid #CCCCCC;
   /* table-layout: fixed; */
}

table td {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    border:1px solid #EEEEEE;
}

table tbody td.active{
    text-align:center;
    width:100px; /* fixed */
}

table tbody td.option{
    width:100px; /* fixed */
}

table tbody td.nonfixed{
    width:auto;
}
</style>
<table>
    <thead>
        <tr>
            <td>Name</td>
            <td>Description</td>
            <td>Active</td>
            <td colspan="2">Options</td>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="5"><a href="">+ Add new row</a><td>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <td class="nonfixed">[Name 1]</td>
            <td class="nonfixed">[Description 1]</td>
            <td class="active">[X]</td>
            <td class="option">Edit</td>
            <td class="option">Delete</td>
        </tr>
        <tr>
            <td class="nonfixed">[Name 2]</td>
            <td class="nonfixed">[Description 2]</td>
            <td class="active">[0]</td>
            <td class="option">Edit</td>
            <td class="option">Delete</td>
        </tr>
    </tbody>
</table> 
```

在示例中，两个“非固定”列应具有完全相同的宽度。当用户添加非固定列或将第一列与最后一列等切换时，这也应该起作用。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:29:06.123

我看到了两种可能的方法......要么使用脚本来计算灵活宽度列的宽度并将它们平均，要么使用嵌套表将两个 flex cols 拆分为 50%：

```
<table>
  <tr>
    <td class="fixed"></td>
    <td class="fixed"></td>
    <td class="fixed"></td>

    <td class="flex-wrapper">
      <table width="100%">
        <tr>
          <td width="50%"></td>
          <td width="50%"></td>
        </tr>
      </table>
    </td>
  </tr>
</table> 
```

# javascript - javascript用子匹配替换为数组索引

> ID：14443957
> 
> 赞同：1
> 
> 时间：2013-01-21T17:23:15.480
> 
> 标签：javascript

使用模板：

```
<div id="temp" style="display:none;">
    <h3>{title}</h3>
    <p>{body}</p>
</div> 
```

和脚本（jquery 版本）：

```
var html = $('#temp').html();
var vals = {"title":"Hello","body":"Good bye!"};
html = html.replace(/{(.+?)}/g, vals["$1"]); // this works if replaced with code below 
```

我的替代品未定义

下面的代码有效，但似乎它应该与上面尝试的一行一起工作

```
matches = html.match(/{(.+?)}/g);  
for(m=0;m<matches.length;m++){
    var match=matches[m].replace("{","").replace("}", "");
    html = html.replace(matches[m],vals[match])
} 
```

这可以根据需要简化吗？

这对于模板引擎来说太简单了，所以不需要去那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:25:53.737

你可以使用回调作为第二个参数[`String.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
var result = html.replace(/{(.+?)}/g, function(c, m) { return vals[m]; }); 
```

# vba - 在单元格中插入公式；修改我的代码

> ID：14443960
> 
> 赞同：0
> 
> 时间：2013-01-21T17:23:26.833
> 
> 标签：vba, excel

我目前有这段代码来插入一个新行，对行中的第二个单元格使用验证：

```
Sub RICH()
'
' Macro3 Macro
   Dim ws As Worksheet
   Dim fnd As Range
   Dim fndstr As String

   fndstr = "Targeted Premium Ads"
   Set ws = Worksheets("Inputsheet")

        Set fnd = ws.Columns(2).Find(what:=fndstr, After:=ws.Range("B11"), _
        LookIn:=xlValues, lookat:=xlPart, searchorder:=xlByColumns, _
        searchdirection:=xlNext, MatchCase:=False)

        If Not fnd Is Nothing Then

            Rows(fnd.Row - 1).Select
            Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
            Range("B" & fnd.Row - 2).Select
            With Selection.Validation
                .Delete
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:="=Suppliers!$B$2:$B$178"
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True

            End With
        End If
End Sub 
```

但是，我现在想将两个函数，例如：=sum(A$4,B$5) 和 =sum(A$9,C$3) 分别插入这个新输出行的 N、O 列。什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:30:30.357

怎么样：

```
Range("N" & fnd.Row - 2).Formula = "=SUM(A$4,B$5)"
Range("O" & fnd.Row - 2).Formula = "=SUM(A$9,C$3)" 
```

（假设`fnd.Row - 2`是您要放置公式的行）。

# java - 来自 Java 中的 Map 的 ResorceBundle

> ID：14443966
> 
> 赞同：-1
> 
> 时间：2013-01-21T17:23:43.693
> 
> 标签：java, map, resourcebundle

我正在尝试自己实现 ResourceBundle。我想从数据库中加载文本。我被某事困住了。

如何从 Map 对象以编程方式创建 ResourceBundle ？地图对象将具有基于区域设置的国际化文本。

谢谢，戴比斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:48:47.707

这很简单：

```
public class MapResourceBundle extends ResourceBundle {

    Map<String, Object> map;

    public MapResourceBundle(Map<String, Object> map) {
        this.map = map;
    }

    @Override
    protected Object handleGetObject(String key) {
        return map.get(key);
    }

    @Override
    public Enumeration<String> getKeys() {
        return Collections.enumeration(map.keySet());
    }

} 
```

在此之后，您可以使用`MapResourceBundle`（当然，在您初始化之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:47:23.353

一定要`ResourceBundle`具体吗？Spring 提供了[`MessageSource`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/MessageSource.html)具有各种实现的抽象。标准实现由 a 支持，`ResourceBundle`但也有替代方案，包括`StaticMessageSource`您可以从地图中填充的 a，以及由数据库支持的第三方实现[，例如这个](https://github.com/synyx/messagesource)。

# vagrant - 内置端口转发 > Vagrant 包找不到 Vagrantfile.pkg

> ID：14443974
> 
> 赞同：1
> 
> 时间：2013-01-21T17:24:10.017
> 
> 标签：vagrant, virtualbox, puppet, virtualization

[在此处](http://docs.vagrantup.com/v1/docs/getting-started/packaging.html)遵循 vagrant vbox 打包的文档。我正在尝试通过包含一个辅助流浪文件 Vagrantfile.pkg 来打包一个具有端口转发自动配置的虚拟盒：

`vagrant package dev --output mybox.box --vagrantfile Vagrantfile.pkg`

我收到以下错误：

`Package include file doesn't exist: Vagrantfile.pkg`

我试过把它放在项目根目录（主要的 vagrantfile 所在的位置）、VM 共享文件夹和其他几个地方，都出现相同的错误。

我的主机环境是 Windows 7，我怀疑这是这个问题的根源。

有没有人成功地为此目的打包一个流浪文件？

这里是 Vagrantfile.pkg 的内容供参考，并不是说它应该影响这个 bug。

```
Vagrant::Config.run do |config|
  config.vm.host_name = 'dev.local'
  config.vm.network :hostonly, '192.168.33.35'
  config.vm.forward_port 80, 8080
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:26:45.700

猜测一下，以下似乎有效：

`vagrant package dev --output mybox.box --vagrantfile ../Vagrantfile.pkg`

# php - 使文本框像下拉框一样工作

> ID：14443978
> 
> 赞同：0
> 
> 时间：2013-01-21T17:24:16.580
> 
> 标签：php, javascript

我正在尝试复制我在下拉框中的功能，该下拉框允许用户选择标签，然后返回与该术语相关的文章。

文本框需要接受搜索词并以相同的方式工作。我已经尝试了我能想到的一切，但我得到的结果为零。

要复制该行为，请从下拉框中选择一个项目，它将返回文章。然后尝试在搜索框中输入相同的词，它不会返回任何文章。

知道为什么吗？这是网站：

[http://www.api.jonathanlyon.com/getpocket/view.html](http://www.api.jonathanlyon.com/getpocket/view.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:05:01.953

一种解决方案是将您的搜索框代码更改为以下内容：

```
<form name="searchform" >
    <input type="text" name="searchterm">
    <input type="button" value="search" onclick="validateForm()">
</form> 
```

由于您并没有真正提交表单并且不想重新加载页面，因此您可以只使用`click`来自 a`button`的事件而不是`submit`来自`form`.

如果你想让它在点击`Enter`按钮时获取文章，这是一种方法（可能有更好的方法，我现在只是没有想到......）。您可以使用该`keydown`事件来运行将测试`Enter`按钮的函数。当它找到它时，它会调用`validateForm`. 将此函数添加到您的脚本中：

```
function init(){
    document.getElementById("searchterm").addEventListener(
       "keydown", keydown
    );
    function keydown(e){

       if(e.keyIdentifier == "Enter"){
          validateForm();
       }
    }
} 
```

并将您的身体标签更改为：

```
<body onload="init();"> 
```

将`keydown`事件侦听器附加到`textbox`页面加载后。

一个警告说明：我正在运行 Chrome 的 Linux 笔记本电脑上对此进行测试。我不知道Mac是否调用`Enter`密钥`Return`，也不知道是否`.keyIdentifier`跨浏览器兼容。这是你需要研究的东西，但这应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:09:22.657

我推荐使用 jQuery UI 组合框。它允许您键入值、自动完成并具有下拉功能。熟悉 jQuery UI 需要一些时间，但它很健壮，几乎适用于所有关于用户交互的解决方案：

[jQuery UI 组合框演示](http://jqueryui.com/autocomplete/#combobox)

# android - 在调用 notifyDataSetChanged 后更新适配器内的数据

> ID：14443982
> 
> 赞同：0
> 
> 时间：2013-01-21T17:24:25.063
> 
> 标签：android, android-listview

我正在使用 BaseAdapter 填充列表视图。我正在初始化适配器构造函数中的内容变量。内容是一个单例实例。构造函数是我设置内容变量的唯一地方。一旦我调用 notifyDataSetChanged()，新数据将如何填充到变量中。据我所知，构造函数只会在创建对象时调用一次。然后我需要在每次调用 getView() 期间获取数据。一旦调用 notifyDataSetChanged，基本上如何更新适配器内的数据？我可以在适配器中有一些公共方法，如 setData(Content)。但我正在寻找 BaseAdapter 将提供的一些方法，我可以覆盖这些方法来设置内容。

```
MyAdapter extends BaseAdapter {

List<ContentItems> mContent;
public myAdapter() {
  mContent = Content.getInstance().getContent();       
}

public View getView(int position, View convertView, ViewGroup parent) {
  mContent.get(position)
  //using the content create view and return
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:29:17.043

我想说你有你需要的一切，当你调用**notifyDataSetChanged**时， mContent 应该会自动更新，并且在 getView 方法中你可以用数据填充你的视图。
当你调用 notifyDataSetChanged 时，getView 会被自动调用，如果你正确地实现它，它将把新数据放到你的视图中。

PS：我不知道这对你是否重要，但 getView 只会在适合屏幕的位置被调用。如果您获得了更多数据然后最初可见，getView 将在保存数据的视图变得可见时呈现其他数据（例如，当您有一个 ListView 并开始向下滚动时）。

# css - IE 7浮动问题不忽略内容

> ID：14443984
> 
> 赞同：0
> 
> 时间：2013-01-21T17:24:28.817
> 
> 标签：css, internet-explorer, internet-explorer-7, css-float

我在 IE7 中遇到问题。我创建了以下 html 来演示可能的“问题”。

HTML：

```
<div id="container">
    <div id="head">
    </div>
    <div id="left">
    </div>
    <div id="right">
    </div>
    <div id="no-float">
    </div>
</div> 
```

CSS：

```
#container {
    width:200px;
    height:200px;
    margin: 0 auto;
    background-color:#555555;
}
#head {
    width:200px;
    height:20px;
    background-color:black;
    float:left;
}
#left {
    width:100px;
    height:40px;
    background-color:blue;
    float:left;
}
#right {
    width:100px;
    height:40px;
    background-color:red;
    float:left;
}

#no-float {
    width:20px;
    height:20px;
    position:relative;
    background-color:green;
} 
```

现在我希望绿色的无浮动 div 位于容器的最左上角，因为据我了解，正常内容应该完全忽略浮动内容。这在我测试过的所有浏览器中都可以正常工作，而不是在 IE7 中。这是我对浮点数的理解有问题还是 IE7 中的错误？如果这是一个错误，谁能指出我正确的方向来修复它？这是问题的一个jsfiddle。

[JSFiddle](http://jsfiddle.net/vQhAN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:40:28.917

IE7的浮动模型是可怕的。[请参阅此处](http://www.brunildo.org/test/IEWflm.html)了解与您的问题相关的问题，以及为什么仅使用浮点数无法解决问题。如果您想将元素保持在您拥有的源顺序中，您将不得不求助于绝对定位。这可以有条件地提供给 IE7，或者它可以像所有现代浏览器一样工作。

## [这是小提琴。](http://jsfiddle.net/vQhAN/14/)

添加`position: relative`到`#container`，然后

```
#no-float {
    width: 20px;
    height: 20px;
    position:absolute;
    background-color:green;
    top: 0;
    left: 0;
} 
```

# java - 如何模拟 HttpServletRequest、HttpServletResponse 和 ServletContext？

> ID：14443990
> 
> 赞同：0
> 
> 时间：2013-01-21T17:24:35.837
> 
> 标签：java, jsp

我有一个使用`HttpServletRequest`,`HttpServletResponse`和的方法`ServletContext`。这是我的代码：

```
public String processarModelo(MyObject ou, Map<String, Object> attrs,
            Map<String, Object> params) throws Exception {

        ServletContext sc = com.opensymphony.webwork.ServletActionContext.getServletContext();
        HttpServletResponse r = com.opensymphony.webwork.ServletActionContext.getResponse();
        MyHttpRequest rw = new MyHttpRequest(com.opensymphony.webwork.ServletActionContext.getRequest());
        rw.clearAttributes();

        for (String s : attrs.keySet()) {
            rw.setAttribute(s, attrs.get(s));
        }

        Map<String, String> p = rw.getParameterMap();
        p.clear();
        for (String s : params.keySet()) {
            p.put(s, (String) params.get(s));
        }

        ByteArrayOutputStream bout = new ByteArrayOutputStream();
        Writer w = new OutputStreamWriter(bout);
        SwallowingHttpServletResponse r2 = new SwallowingHttpServletResponse(r, w, "iso-8859-1");

        javax.servlet.RequestDispatcher dispatcher = sc.getRequestDispatcher("/paginas/expediente/processa_modelo.jsp");

        dispatcher.include(rw, r2);
        w.flush();
        String s = bout.toString();

        return s;
    } 
```

当我从浏览器调用它时它正在工作。本周我构建了一个必须调用相同方法的 Web 服务。然而，在 webservice 方法中，我没有`ServletContext`，`HttpServletResponse`并且`HttpServletRequest`在手边。

如何模拟它们来呈现我的 JSP 并获取生成的 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:49:08.003

好吧，搜索@Context注解，我找到了这个用于webservice的：

```
@Resource
private WebServiceContext context; 
```

有了这个，我可以得到我需要的一切：

```
HttpServletRequest request = (HttpServletRequest)context.getMessageContext().get(MessageContext.SERVLET_REQUEST);
        ServletContext servletContext = (ServletContext) context.getMessageContext().get(MessageContext.SERVLET_CONTEXT);
        HttpServletResponse response = (HttpServletResponse) context.getMessageContext().get(MessageContext.SERVLET_RESPONSE); 
```

谢谢大家帮忙！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:30:46.247

您确定要让您的网络服务调用它吗？它将被重定向到其他页面....

对我来说，这似乎是一个设计问题。您应该从此处提取实际功能并将其放置在一些通用代码中。然后以这样一种方式调用它，即 Web 服务请求和 servlet 请求将有足够的信息来调用该功能。

也不鼓励使用一个字母的变量名；）

如果要调用网页存储 HTML，则应在 webservice 方法本身中发出 HTTP 请求并存储数据。您可以使用 HTTPClient (http://hc.apache.org/httpcomponents-client-ga/) 之类的东西来执行此操作。

尝试自己构建 HTTPRequest 不是一个好方法。

# magento - 在什么情况下从 Magento 的索引表中读取产品价格？

> ID：14443991
> 
> 赞同：8
> 
> 时间：2013-01-21T17:24:35.993
> 
> 标签：magento

我正在学习 Magento 认证考试，并试图确定在什么情况下从 Magento 的索引表中读取产品价格。
我正在尝试遵循 Magento 的方法流程，但是在遵循了几条兔子足迹后我就卡住了。
也许有人在过去的任何时候发现过它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T18:11:06.427

仅当您使用产品集合时，即当您一次处理多个产品时，才会从索引表中读取产品价格。当您获得单个产品时，例如在产品视图页面上，价格会即时生成。

现在解释一些代码参考：

当您考虑 时`Mage_Catalog_Model_Product`，您会看到该方法`getFinalPrice()`调用`$this->getPriceModel()->getFinalPrice($qty, $this);` 反过来，默认价格模型 ( `Mage_Catalog_Model_Product_Type_Price`) 计算方法中的价格，`getFinalPrice()`并触发某些模块使用的事件 catalog_product_get_final_price（我认为是目录或购物车价格规则）调整价格。此方法是“即时”计算，因此没有索引。

在集合 ( `Mage_Catalog_Model_Resource_Product_Collection`) 中，价格索引器用于减少计算每种产品价格的复杂过程。它定义了一个映射来将字段分配给适当的索引字段：

```
protected $_map = array('fields' => array(
    'price'         => 'price_index.price',
    'final_price'   => 'price_index.final_price',
    'min_price'     => 'price_index.min_price',
    'max_price'     => 'price_index.max_price',
    'tier_price'    => 'price_index.tier_price',
    'special_price' => 'price_index.special_price',
)); 
```

做这项工作的索引器是类`Mage_Catalog_Model_Product_Indexer_Price`。

# mysql - 将字符串添加到 group_concat mysql

> ID：14443995
> 
> 赞同：2
> 
> 时间：2013-01-21T17:24:47.037
> 
> 标签：mysql, concat, group-concat

这个说法...

```
GROUP_CONCAT(
  DISTINCT  c_style.clrdesc
  ORDER BY  c_style.clrdesc DESC
  SEPARATOR '|'
) AS Attributes 
```

拿这张桌子...

```
样式 CLRDESC
1058黑色
1058 蓝色
1058 红

```

并返回...

```
风格属性
1058黑|蓝|红

```

我想更进一步，在`ATTRIBUTES`列中的颜色值之前添加一个固定字符串...

```
风格属性
1058 字符串|黑色|蓝色|红色

```

我尝试使用嵌套语句，`CONCAT`但收到错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:29:33.893

```
CONCAT_WS('|', 'string of text', GROUP_CONCAT(
  DISTINCT  c_style.clrdesc
  ORDER BY  c_style.clrdesc DESC
  SEPARATOR '|'
)) AS Attributes 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b71e0/1/0)上查看。

# meteor - 如何在 Windows 7 上安装和运行 Telescope（即 http://telesc.pe）

> ID：14443996
> 
> 赞同：1
> 
> 时间：2013-01-21T17:24:56.093
> 
> 标签：meteor

我无法在 Windows 7 上运行Meteorite 和[Telescope ，有什么](http://telesc.pe)**想法我们应该怎么做**？

* * *

这是我尝试过的：

*   使用 win.meteor.com 在 win7 上安装 Meteor
*   尝试安装 Meteorite（按照其 Github 页面上的说明），但它抛出了几个错误（尽管它完成了安装）：

> C:\Users\Daler\AppData\Roaming\npm\node_modules\meteorite\node_modules\ddp\node_modules\ws\build\bufferutil.vcxproj(18,3)：错误 MSB4019：导入的项目“C:\Microsoft.Cpp.未找到默认的.props”。确认声明中的路径正确，并且该文件存在于磁盘上。
> 
> C:\Users\Daler\AppData\Roaming\npm\node_modules\meteorite\node_modules\ddp\node_modules\ws\build\validation.vcxproj(18,3)：错误 MSB4019：导入的项目“C:\Microsoft.Cpp.未找到默认的.props”。确认声明中的路径正确，并且该文件存在于磁盘上。

*   克隆 Telescope，然后`mrt`从其文件夹中运行它，但收到有关缺少 Meteorite 依赖项的错误。[按照此处](https://github.com/oortcloud/meteorite/issues/65#issuecomment-11428236)的建议，手动将“路由器”和“page-js”包复制到“Meteor/packages” ：

但是，运行`mrt`或`mrt run`退出没有错误。但是，使用`meteor`命令运行有时会在 localhost 上启动服务器，然后由于缺少文件而失败，有时无法找到/启动 MongoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:51:51.897

Installing [Microsoft Visual C++ 2010 Service Pack 1 Compiler Update for the Windows SDK 7.1](http://www.microsoft.com/en-us/download/details.aspx?id=4422) (as suggested by [https://github.com/TooTallNate/node-gyp](https://github.com/TooTallNate/node-gyp)) fixed the `MSB4019` error for me doing `npm install xxx` on Windows7 x64.

The readme of that update states that the recommended order is

1.  Visual Studio 2010
2.  Windows SDK 7.1
3.  Visual Studio 2010 SP1
4.  Visual C++ 2010 SP1 Compiler Update for the Windows SDK 7.1

# java - 如何查找jsp是否更改或刷新

> ID：14443999
> 
> 赞同：1
> 
> 时间：2013-01-21T17:25:06.147
> 
> 标签：java, javascript, html, jsp, html4

在 JSP 中，我有一个会话 bean，它在内部启动一个线程来轮询 JSP 上的数据。当我更改 URL 或刷新页面时，线程继续运行。我的要求是在我离开线程时停止线程。但是当 url 发生更改或 JSP 被卸载或刷新时，我想停止线程。

我能为此做些什么？