# StackOverflow 问答 12635000-12635999

# iphone - 如何在 iPhone 的任何数据库中保存 NSMutable Array 详细信息

> ID：12635001
> 
> 赞同：0
> 
> 时间：2012-09-28T06:52:37.390
> 
> 标签：iphone, nsmutablearray

我已经在我的应用程序中成功实现了 SQLite，它工作得非常好，检索和存储数据正在工作，但是我有一个问题，在我的一个类中有近 9 个数组，它们存储来自 Web 服务的数据并显示在UITableView，我需要在数据库中存储该数组，我尝试过使用 SQLite 但它不起作用，因为数组不能存储在其中。请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:07:28.867

在考虑将大量数据保存到 plist 之前检查一下：[我应该保存在 plist 还是 Core Data 中？](https://stackoverflow.com/questions/4964408/should-i-save-in-plist-or-core-data)

除了将其存储在 plist 中之外，您基本上还有两种选择。

您需要将它们一一写入 SQLite DB 中的单独条目中，或者将它们与核心数据一一存储。

您可以查看此以获取更多核心数据详细信息[最佳实践？- 数组/字典作为核心数据实体属性](https://stackoverflow.com/questions/1562676/best-practice-array-dictionary-as-a-core-data-entity-attribute)

有关相关主题，请参见将[NSMutable Array 存储到 sqlite 数据库中](https://stackoverflow.com/questions/5391820/store-nsmutable-array-into-sqlite-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:01:41.067

尝试将其保存在项目的documentsDirectory中的**plist**中，因为plist支持数组，字典等数据类型

# css - CSS中float和align属性的区别

> ID：12635007
> 
> 赞同：32
> 
> 时间：2012-09-28T06:53:05.780
> 
> 标签：css

我正在为我的客户设计一个网站，但在网页设计和 CSS 方面没有太多经验。我也想以标准的 CSS 方式设计它。

问题是我对 CSS align 属性和 float 属性感到很困惑。我知道这两个属性之间存在很大差异，但是在开发时我仍然无法正确处理它。

谁能向我解释这两个属性之间的确切区别？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-28T06:55:17.690

“text-align”适用于盒子的*内容*，而“float”适用于盒子本身。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-28T12:46:20.213

对齐 - 您使用对齐来对齐文本和其他项目，而不是左对齐、右对齐、居中对齐或对齐。对齐不会从文档流中删除项目。

浮动 - 将对象向左或向右浮动并将其从文档流中移除。（即带有段落文本的缩略图图像——您通常需要在图像上设置一些边距以使其看起来正确）。

您很可能会使用浮动来布局页面。我建议使用网格系统。这是迄今为止我所知道的最简单、最兼容的网格系统。[http://webdesignerwall.com/trends/960-grid-system-is-getting-old](http://webdesignerwall.com/trends/960-grid-system-is-getting-old)

此外，您还需要了解“首先”使用类的内容以及 CSS clearfix 的作用。您还需要了解生成基线网格（垂直网格，而不仅仅是水平网格），以便所有元素不仅从左到右排列，而且也上下排列。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-28T07:02:03.760

首先，我建议您参考 O'Reilly 出版物的 Head First 系列 CSS 和 HTML。对于刚接触设计的人来说，这是一本必读的书。

因此，float 属性用于移动很多块（例如您的侧边栏、您的内容区域等）以及您所说的 HTML 对齐，您可以通过这种方式在 CSS 中做同样的事情。

```
.test{
text-align: right; 
} 
```

上面提到的代码将是 CSS 和等效的 HTML 代码。

```
<div class="test"> This text will be aligned from right </div> 
```

暂时先参考 O'Reilly head first with HTML AND CSS，会对你有很大帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T06:57:19.493

如果你给`float`子 div 那么父 div 变得独立于子 div 的尺寸，即父 div 不会自动增加它的宽度和高度。（如果你没有给父 div 任何尺寸，那么它继承`width:0 and height:0`）

许多设计师面临的问题是`float`因为它对布局不友好，但它非常有用。我们可以`float`通过使用 css 选择器使布局更友好**`:after`**。

而如果我们给`Text-align`子 div ，父 div 不会受到影响。

这就是我所知道的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T07:15:42.667

align 是对齐表格、文本、跨度等单个元素的属性

float 是一种对齐块级元素（如侧边栏、div 等）的属性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-04T20:05:46.677

`text-align`适用于容器中的文本，而 float 适用于容器本身。例子：

```
div {
  width: 100px;
  height: 100px;
  background-color: lightblue;
}

.textAlign {
  text-align: right;
}

.float {
  float: right;
}
```

```
<div class="textAlign">text align example</div>
<br>
<div class="float">float example</div>
```

# jquery - 将参数传递给从 aspx 到 jquery 的事件处理程序

> ID：12635008
> 
> 赞同：0
> 
> 时间：2012-09-28T06:53:06.563
> 
> 标签：jquery, asp.net, parameters

我有一个文本框；

`<input runat="server" type="hidden" value="0" id="input1" name="input1_name">`

我有一个 div；

```
<div id="div1"> some content </div> 
```

我有一个单独的 .js 文件，其中有一个在页面加载时加载的函数。在那个功能中，我有：

`$("#div1").click(function(e){ definition; });`

我想将上述输入控件的客户端 ID 传递给上述场景中的点击处理程序。我无法在上述 javascript 文件上使用属性 ClientID。休息一切正常。

请告知我如何将参数传递给aspx页面上控件的单击处理程序到javascript文件（以某种方式获取ClientID）。

这是在 .NET 上。

请让我知道，以防我需要在此处发布更多详细信息，如果任何看起来模棱两可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:01:38.680

根据您使用的 ASP.NET 版本，您有几个选项。

在 ASP.NET 4.0 之前，您可以执行以下操作：

```
<script type="text/javascript">
    function DoSomething(){
        alert('<%= Control.ClientID %>');
    }
</script> 
```

在 ASP.NET 4.0 中引入了一个新特性`ClientIDMode`：

```
<asp:TextBox ID="myCustomId" runat="server" Width="65%" ClientIDMode="Static" /> 
```

将输出：

```
<input id="myCustomId" style="width: 65%" name="ctl00$MasterPageBody$ctl00$txtEcho2" /> 
```

如果您使用静态`ClientIDMode`，您可以在 JavaScript 中使用 Id 而不会出现任何问题。

这是一个很好的博客，解释了不同的选项：[ASP.NET 4.0 ClientID Overview](http://weblogs.asp.net/asptest/archive/2009/01/06/asp-net-4-0-clientid-overview.aspx)

# c# - 为什么 msft 将 Interlocked.Increment(ref uniqueId) 与零进行比较？

> ID：12635009
> 
> 赞同：1
> 
> 时间：2012-09-28T06:53:19.143
> 
> 标签：c#, multithreading, task-parallel-library

我正在查看 .NET 4.0 的 System.Threading.Tasks.TaskScheduler.Id 实现，并查看以下代码：

```
[__DynamicallyInvokable]
public int Id
{
    [__DynamicallyInvokable]
    get
    {
        if (this.m_taskSchedulerId == 0)
        {
            int num = 0;
            do
            {
                num = Interlocked.Increment(ref s_taskSchedulerIdCounter);
            }
            while (num == 0);
            Interlocked.CompareExchange(ref this.m_taskSchedulerId, num, 0);
        }
        return this.m_taskSchedulerId;
    }
} 
```

为什么msft在联锁后比较num==0？**Interlocked.Increment()**的实现表示它返回递增的值（在递增之后），因此检查零似乎是不必要的（除非您的计数器环绕，但如果发生这种情况，您会有更大的问题在这里也没有解决。

如果我要这样做，我会这样做：

```
public int Id
        {
            get
            {
                if(m_taskSchedulerId==0)
                {
                    var result = Interlocked.Increment(ref s_taskSchedulerIdCounter);
                    Interlocked.CompareExchange(ref m_taskSchedulerId, result, 0);
                }
                return m_taskSchedulerId;
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T07:06:27.050

> 但如果发生这种情况，你会有更大的问题

不，这就是他们这样做的确切原因。从[参考来源](http://referencesource.microsoft.com/netframework.aspx)：

```
public Int32 Id
{
    get
    {
        if (m_taskSchedulerId == 0)
        {
            int newId = 0;

            // We need to repeat if Interlocked.Increment wraps around and returns 0.
            // Otherwise next time this scheduler's Id is queried it will get a new value
            do
            {
                newId = Interlocked.Increment(ref s_taskSchedulerIdCounter);
            } while (newId == 0);

            Interlocked.CompareExchange(ref m_taskSchedulerId, newId, 0);
        }

        return m_taskSchedulerId;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:08:18.880

不变量是`Id`永远不会返回 0，因为 0 用于内部用于指示值应该被初始化。如果`Id`曾经是 0，那么下次您查询它时，它将是一个不同的值。

# android - Android上的drawTextOnPath非常慢

> ID：12635014
> 
> 赞同：-1
> 
> 时间：2012-09-28T06:53:43.013
> 
> 标签：android, performance, canvas

我画了很多形状和文字。我可以通过屏幕触摸来移动这幅画，所有的移动都非常流畅。直到我用 drawTextOnPath 在路径上绘制文本。“drawTextOnPath”减慢绘图速度。

有没有人建议如何加快我的情况？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:58:37.183

对不起。这是我的错。

我用了一个很大的字符串，我没有看到文字，因为路径太短了。使用文字时，它再次绘制得非常流畅。

# extjs - ExtJS 3.4 获取组合的displatField的值

> ID：12635016
> 
> 赞同：0
> 
> 时间：2012-09-28T06:53:47.780
> 
> 标签：extjs, combobox

我有 'n' 个具有相同 ID 的字段集。每个字段集有大约 4 个组合（带有 itemId、displayField 和 valueField 属性）。我需要获取每个字段集中所有组合的 displayField 值。我尝试了以下，

```
var fieldSets = Ext.query('#fieldsetid');
for (i = 0, maxi = fieldSets.length; i < fieldSets.length; i ++) {
  var form = new Ext.form.BasicForm(fieldSets[i].parentNode);
  var values = form.getValues(); //This line returns valueField value
} 
```

使用上面的代码，我可以获得组合的 valueField 的值。如何获得组合的 displayText？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:17:25.563

我得到了自己..从问题中的上述代码中获取 valueFields。使用它迭代适当的商店以获取 displayLabel 为

```
for (var key in values) {
   var keyValue = values[key];
   store.each(function(record) {
     if (record.get(your valueField) == keyValue) {
       values[key] = record.get( your display name);
     }
   });
} 
```

# sql - 如何将这两个 SELECT 语句连接在一起以返回结果？

> ID：12635019
> 
> 赞同：4
> 
> 时间：2012-09-28T06:53:54.207
> 
> 标签：sql

列出与客户 1007 之前购买的图书属于同一类别的所有图书的标题。不包括此客户已购买的图书。（子查询）

这是我到目前为止所拥有的：

```
SELECT title, customer#, category
FROM orders JOIN orderitems USING (order#)
        JOIN books USING (isbn)
WHERE isbn <> (SELECT customer#, isbn
        FROM orders o JOIN orderitems oi 
        ON o.order#=oi.order#
        where o.order#=oi.order# and o.customer#=1007); 
```

第一个选择返回所有书名，第二个选择返回同一客户购买的所有书籍。我尝试使用`NOT IN ()`，但得到的结果与使用 <>、=any、

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:57:23.770

小变化。

```
SELECT title, customer#, category
FROM orders JOIN orderitems USING (order#)
        JOIN books USING (isbn)
WHERE isbn NOT IN (SELECT isbn
        FROM orders o JOIN orderitems oi 
        ON o.order#=oi.order#
        where o.order#=oi.order# and o.customer#=1007); 
```

我知道您已经尝试过`NOT IN`，但是子选择应该只返回一列，在这种情况下，`isbn`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-07-09T19:00:36.463

```
SELECT title, category 
FROM books WHERE category IN
 (SELECT category FROM books JOIN orderitems USING (isbn) 
   JOIN orders USING (order#) WHERE customer# = 1007)
 AND isbn NOT IN (SELECT isbn FROM orders JOIN orderitems USING (order#)
WHERE customer# = 1007); 
```

# java - 这个示例程序中的静态是如何工作的？

> ID：12635021
> 
> 赞同：0
> 
> 时间：2012-09-28T06:54:02.980
> 
> 标签：java, static

```
 import java.util.*;
 import net.rim.vm.*;

 public class AddressBook {

   static Vector addresses;
   static PersistentObject persist;

   static {
     // Hash of "net.rim.sample.AddressBook".
     long KEY =  0xa3b3159378f59a29L;
     persist = PersistentStore.getPersistentObject( KEY );
     if( persist.getContents() == null ) {
        persist.setContents( new Vector() );
        persist.commit();
     }
        addresses = (Vector)persist.getContents();
     }
   }

   void add( Address a ) {
     addresses.addElement( a );
     persist.commit();
   }
 } 
```

[资源](http://www.blackberry.com/developers/docs/3.6api/net/rim/device/api/system/PersistentStore.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:56:51.253

这`static {....}`称为静态块。这些用于初始化您的静态成员。当类被加载/初始化时，静态块被执行。

在您的示例中，您正在使用静态块初始化地址和向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:58:13.187

1.  该类已加载
2.  静态实例变量被初始化

    `static Vector addresses;`

    `static PersistentObject persist;`

3.  然后执行[静态块](http://isagoksu.com/2009/development/java/understanding-static-blocks/)。

    `static{....}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T06:58:20.137

当类第一次由`ClassLoader`. 这发生在第一次实例化该类的对象时，或者第一次访问该类的静态成员时。

静态块初始化器可以作为实例字段的*构造器。*构造函数使用适当的值初始化实例变量，其中静态块初始化程序将适当的值分配给`static`变量。

当您想通过执行代码（例如函数调用和循环）来初始化静态字段时，静态块很有用，这些代码不能放在简单的赋值语句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:00:10.937

无需为类创建对象即可使用这些静态变量

静态向量地址；静态 PersistentObject 持久化；

如果我们使用静态{---}之类的东西。它被称为静态初始化器。它在创建对象之前被初始化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T07:05:49.657

先初始化静态变量，再初始化静态块

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T06:56:21.127

那是一个[静态初始化](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)器，假设您只有一个类加载器，它将确保该代码将只执行一次（或 N 次对于 N 个类加载器）。

静态初始化器通常用于初始化[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)对象的字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T06:58:14.920

静态块将在此类（AddressBook）首次加载到 JVM 时执行。加载程序后，您的变量将可供使用。

# listview - ListView 上的 onClickListener 没有响应

> ID：12635027
> 
> 赞同：0
> 
> 时间：2012-09-28T06:54:43.303
> 
> 标签：listview, android-listview, listadapter, onclicklistener

在我的 Android 项目中，我创建了一个`ListView`并且`onClickListener`还添加了一个，但是在运行我的项目时，`ListView`它没有响应我对它的点击。

**代码**

```
public class MyDayListActivity extends ListActivity {

    // JSON Node names
                private static final String TAG_RESULTS = "results";
                private static final String TAG_ID = "id";
                private static final String TAG_NAME = "name";
                private static final String TAG_RATING = "rating";
                private static final String TAG_REFERENCE = "reference";
                private static final String TAG_ICON = "icon";

    // contacts JSONArray
    JSONArray result = null;
    String url,reference;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         Intent in = getIntent();
         String location = in.getStringExtra("TAG_LOCATION");
         String type = in.getStringExtra("TAG_TYPE");

        // url to make request
        url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query="+type+"+in+"+location+"&sensor=true&key=AIzaSyD38pak_katUfSR92WE2_O2b9y0JSp5htA";
    new LoadData().execute();

    }
class LoadData extends AsyncTask<String, String, String>
    { 
    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    protected String doInBackground(String... args) {

    // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

    // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Results
            result = json.getJSONArray(TAG_RESULTS);

            // looping through All Contacts
            for(int i = 0; i < result.length(); i++){

                JSONObject c = result.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String icon = c.getString(TAG_ICON);
                reference  = c.getString(TAG_REFERENCE);
                String rating = c.getString(TAG_RATING);

                // creating new HashMap
                HashMap<String, String> map2 = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map2.put(TAG_ID, id);
                map2.put(TAG_NAME, name);
                map2.put(TAG_ICON, icon);
                map2.put(TAG_RATING, rating);
                map2.put(TAG_REFERENCE, reference);

                // adding HashList to ArrayList
                contactList.add(map2);

                }
        } 
        catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
            }    
        protected void onPostExecute(String file_url) {

         // Updating parsed JSON data into ListView
        ListAdapter adapter1 = new SimpleAdapter(MyDayListActivity.this, contactList,R.layout.listview_item_row,
                new String[] {TAG_NAME}, new int[] {
                        R.id.txtTitle});

        setListAdapter(adapter1);

        // selecting single ListView item

            // Launching new screen on Selecting Single ListItem
        ListView lv1 = getListView(); 

         lv1.setOnItemClickListener(new OnItemClickListener() 
            {

                    public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), ProfileViewActivity.class);
                in.putExtra(TAG_REFERENCE, reference);
                startActivity(in);

            }
        });
        }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:02:34.603

getListView().setOnItemLongClickListener(this); public boolean onItemLongClick(final AdapterView myadapter, View arg1, final int arg2, long arg3) {

返回假；}

# input - Python 3 - 过滤数字输入的问题

> ID：12635030
> 
> 赞同：0
> 
> 时间：2012-09-28T06:54:52.810
> 
> 标签：input, python-3.x, numerical

我试图控制输入以仅允许大于 0 的数字，但在测试此文本块时，如果我先输入非法字符（字符串、0 或负数），则接收错误输出，然后输入有效值，它返回我输入的第一个值，而不是刚刚输入的有效值（这会导致我的脚本的其余部分由于类型不匹配或不合逻辑的值而失败）。我试过移动“return x”，但它~~无论哪种方式都做同样的事情。~~在第二种情况下说“分配前引用的变量 x”。

```
def getPrice():
    try:
        x = float(input("What is the before-tax price of the item?\n"))
        if x <= 0:
            print("Price cannot be less than or equal to zero.")
            getPrice()
        return x
    except ValueError:
        print("Price must be numeric.")
        getPrice() 
```

和

```
def getPrice():
    try:
        x = float(input("What is the before-tax price of the item?\n"))
        if x <= 0:
            print("Price cannot be less than or equal to zero.")
            getPrice()
    except ValueError:
        print("Price must be numeric.")
        getPrice()
    return x 
```

我怎样才能解决这个问题？

另外，如果您好奇，这是为了学校作业，我自己完成了整个程序，但我不知道如何调试它。

编辑：

我现在有一个工作方法：

```
def getPrice():
    while True:
        try:
            x = float(input("What is the before-tax price of the item?\n"))
        except ValueError:
            print("Price must be numeric.")
            continue
        if x <= 0:
            print("Price cannot be less than or equal to zero.")
        else:
            return x
            break 
```

并修复了原始代码块（但它仍然使用递归）：

```
def getPrice():
        try:
            x = float(input("What is the before-tax price of the item?\n"))
            if x <= 0:
                print("Price cannot be less than or equal to zero.")
                x = getPrice()
        except ValueError:
            print("Price must be numeric.")
            x = getPrice()
        return x 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:24:05.780

由于这是家庭作业，我不会详细说明答案，但我会为您指明正确的方向。首先，我建议使用 while 循环而不是递归。

代码可能类似于：

```
while True:
    try:
        x = <get input>
        if input is good:
            break
        else:
            <print error>
    except badstuff:
        <Print error>
        next #redundant in this case as we'd do this anyways 
```

其次，您现在遇到的问题与变量范围有关。当错误的输入发生时，您再次调用该函数，但对输出不做任何事情。

请记住，第一个函数调用中的 x 与第二个函数调用中的 x 完全分开。

因此，如果您打算使用递归，则需要弄清楚如何将 x 值“向后传递”。

# javascript - 用于 ipad 的快速 js 数据网格

> ID：12635043
> 
> 赞同：3
> 
> 时间：2012-09-28T06:55:57.580
> 
> 标签：javascript, ipad, datagrid

我正在寻找支持此功能的 ipad js 数据网格库：

*   冻结的列和标题
*   大约 15 列和 100 行的响应式滚动

我已经测试了一些 js 库，例如[SlickGrid](https://github.com/mleibman/SlickGrid)和[Datatables](http://datatables.net/)，但它们在 ipad 上的性能非常差，因为它们被用于桌面使用。

什么 javascript datagrid 适合在 ipad 上使用？

# html - html5中no-js类是什么意思

> ID：12635044
> 
> 赞同：10
> 
> 时间：2012-09-28T06:56:05.777
> 
> 标签：html, css

我看到很多网站都有 ie6、ie7、ie8 的特定代码。

```
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]--> 
```

我似乎 html 有这样的特定类

```
<html class=" js no-flexbox flexbox-legacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"> 
```

任何人都只是告诉这个代码有什么用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-19T08:26:29.870

这是对 Moderniz 的说明。如果您的浏览器中启用了 JavaScript，Modernizr 会更改`no-js`为`js`类，因此您可以为启用 JavaScript 的浏览器和禁用 JavaScript 的浏览器定义 CSS 样式

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T07:03:48.923

它放在那里，如果有***Javascript***支持，那么您可以使用 JS 删除`no-js`该类。

`no-js`如果您通常需要 JS 来使您的网站正常运行，则可以使用该类来为您的网页设置 CSS 样式。如果您想提供足够的 HTML 和足够的表单以使页面在没有 JS 的情况下工作，那么这提供了一种降级但功能强大的格式，但随后隐藏 ghetto-version 并用闪亮和花哨的东西替换它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T07:03:58.460

`<!--[if IE]><![endif]-->`是微软的[有条件评论](http://msdn.microsoft.com/en-us/library/ms537512%28VS.85%29.aspx)。

因此对于 IE 版本 < 7 ( `[if lt IE 7]`)，`<html lang="en" class="no-js ie6">`使用；

对于 IE 版本 7 ( `[if IE 7]`)，`<html lang="en" class="no-js ie7">`使用；

等等。

最后，对于 IE 版本 > 9( `[if gt IE 9]`)，`<html lang="en" class="no-js">`使用。

而且由于是微软特有的注释，所有非IE浏览器都会把它当作普通注释，所以只使用`<html lang="en" class="no-js">`（唯一未注释的部分）。

# c - 临界区中的函数会在 OpenMP 中产生数据竞争

> ID：12635045
> 
> 赞同：2
> 
> 时间：2012-09-28T06:56:09.853
> 
> 标签：c, parallel-processing, openmp

关于在并行区域内使用关键的 OpenMP，我似乎严重缺乏了解。我的问题很简单：为什么下面的代码会产生带有 valgrind drd 的警告？

```
#include <stdio.h>
#include <unistd.h>

void A(int* a)
{
   printf("a++\n");
   (*a)++;
}

void B(int* a)
{
   printf("a--\n");
   (*a)--;
}

void f(int* a)
{
#pragma omp critical
   A(a);

   sleep(1); /* work done here */

#pragma omp critical
   B(a);
}

int main(int argc, char** argv)
{
   int i;
   int a = 0;

#pragma omp parallel for
   for(i = 0; i < 4; ++i)
   {
      f(&a);
   }

   return 0;
} 
```

它是用以下方式编译的：

```
gcc -fopenmp -g -o omptest omptest.c 
```

valgrind 调用是

```
valgrind --tool=drd  --check-stack-var=yes ./omptest 
```

我的理解是关键部分应该保护我免受我收到的警告的影响。我现在花了 2 天时间试图找出错误，但我没有找到它。如果有人能给我一个关于我到底不明白的东西的提示，那就太好了。

任何帮助表示赞赏。

**编辑：** 我的 2 CPU 机器上的（重复）警告是：

```
Thread 2:
Conflicting load by thread 2 at 0x7fefffecc size 4
   at 0x4007DE: A (omptest.c:7)
   by 0x40082E: f (omptest.c:19)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x4E45EE9: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
   by 0x4C2D9E1: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
   by 0x5053E99: start_thread (pthread_create.c:308)
   by 0x535B39C: clone (clone.S:112)
Allocation context: unknown.
Other segment start (thread 1)
   at 0x4C2DF29: pthread_create@* (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
   by 0x4E4631B: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
   by 0x400889: main (omptest.c:32)
Other segment end (thread 1)
   at 0x5326F1D: ??? (syscall-template.S:82)
   by 0x5326DBB: sleep (sleep.c:138)
   by 0x40083D: f (omptest.c:21)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x400895: main (omptest.c:32)

Conflicting store by thread 2 at 0x7fefffecc size 4
   at 0x4007E7: A (omptest.c:7)
   by 0x40082E: f (omptest.c:19)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x4E45EE9: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
   by 0x4C2D9E1: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
   by 0x5053E99: start_thread (pthread_create.c:308)
   by 0x535B39C: clone (clone.S:112)
Allocation context: unknown.
Other segment start (thread 1)
   at 0x4C2DF29: pthread_create@* (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
   by 0x4E4631B: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
   by 0x400889: main (omptest.c:32)
Other segment end (thread 1)
   at 0x5326F1D: ??? (syscall-template.S:82)
   by 0x5326DBB: sleep (sleep.c:138)
   by 0x40083D: f (omptest.c:21)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x400895: main (omptest.c:32)

Thread 1:
Conflicting load by thread 1 at 0x7fefffecc size 4
   at 0x400805: B (omptest.c:13)
   by 0x40084E: f (omptest.c:24)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x400895: main (omptest.c:32)
Allocation context: unknown.
Other segment start (thread 2)
   at 0x535B361: clone (clone.S:84)
Other segment end (thread 2)
   at 0x5326F1D: ??? (syscall-template.S:82)
   by 0x5326DBB: sleep (sleep.c:138)
   by 0x40083D: f (omptest.c:21)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x4E45EE9: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
   by 0x4C2D9E1: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
   by 0x5053E99: start_thread (pthread_create.c:308)
   by 0x535B39C: clone (clone.S:112)

Conflicting store by thread 1 at 0x7fefffecc size 4
   at 0x40080E: B (omptest.c:13)
   by 0x40084E: f (omptest.c:24)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x400895: main (omptest.c:32)
Allocation context: unknown.
Other segment start (thread 2)
   at 0x535B361: clone (clone.S:84)
Other segment end (thread 2)
   at 0x5326F1D: ??? (syscall-template.S:82)
   by 0x5326DBB: sleep (sleep.c:138)
   by 0x40083D: f (omptest.c:21)
   by 0x400902: main._omp_fn.0 (omptest.c:35)
   by 0x4E45EE9: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
   by 0x4C2D9E1: ??? (in /usr/lib/valgrind/vgpreload_drd-amd64-linux.so)
   by 0x5053E99: start_thread (pthread_create.c:308)
   by 0x535B39C: clone (clone.S:112) 
```

我将警告理解为 a 上的数据竞争，第 7 行和第 13 行是 (*a)-- 和 (*a)++ 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:32:25.567

我只是在阅读 drd 的[文档](http://valgrind.org/docs/manual/drd-manual.html)，特别是第 8.2.8 节：

> DRD 支持由 GCC 生成的 OpenMP 共享内存程序。GCC 从 4.2.0 版开始支持 OpenMP。GCC 对 OpenMP 程序的运行时支持由一个名为 libgomp 的库提供。此库中实现的同步原语直接使用 Linux 的 futex 系统调用，除非该库已配置 --disable-linux-futex 选项。DRD 仅支持已使用此选项配置且存在符号信息的 libgomp 库。对于大多数 Linux 发行版，这意味着您必须重新编译 GCC。另请参阅 Valgrind 源代码树中的脚本 drd/scripts/download-and-build-gcc 以获取如何编译 GCC 的示例。您还必须确保在启动 OpenMP 程序时加载了新编译的 libgomp.so 库。

如果您没有重新编译`libgomp`，这可能是您遇到的奇怪行为的可能解释。

# svn - SVN中标签有什么用？

> ID：12635046
> 
> 赞同：0
> 
> 时间：2012-09-28T06:56:13.637
> 
> 标签：svn

> **可能重复：**
> [无论如何，您使用 svn tags 目录做什么？](https://stackoverflow.com/questions/941646/what-do-you-use-the-svn-tags-directory-for-anyways)

在 SVN 中，我了解存储库中“主干和分支”的使用，但我仍然无法理解 SVN 存储库中“标签”的使用。请解释清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:00:05.563

标签通常用于标记开发中的重要阶段，例如，如果您发布软件版本，您可能会选择标记构成该版本的版本。这种做法可以帮助跟踪错误和功能 - 如果您想知道某个特定错误是否在您的应用程序的 v3.2.1 中得到修复，您只需检查您为该版本制作的标签并查看当时发布的代码时间。

# actionscript-3 - 您如何在 Flash Builder 项目上进行协作？

> ID：12635047
> 
> 赞同：5
> 
> 时间：2012-09-28T06:56:14.487
> 
> 标签：actionscript-3, flash, adobe, flash-builder

即使文件被复制，例如通过 git 或 svn 等版本控制，Flash builder 项目文件也无法在另一台计算机上打开。

导入和导出 fxp 项目是不可能的，因为我们不想不必要地覆盖 git 或 svn 的文件。

人们如何在 Flash Builder 项目上进行协作，而无需在 Flash Builder 中创建新项目，并且不必为多个协作者一次又一次地设置项目的所有设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:51:10.570

如果您按照@Sean Fujiwara 的回答使用其文件夹位置导入项目，则：

在 Flash Builder 项目中进行协作的一种有用方法是利用环境变量。您可以使用 - 访问这些`Window > Preferences > General > Workspace > Linked Resources`：

![在此处输入图像描述](../Images/a5cd6f314f88a6c83a30f850afb31d51.png)

从这里您可以添加一个新变量或编辑一个现有变量，从上面的示例中您可以看到我们使用了一个`FRAMEWORK_SOURCE`指向我们共享框架代码的源的变量，我们使用了一个 swc，但这对于调试错误很方便。

我们还有另一个名为的变量`OUTPUT_FOLDER`，在我们的例子中，它指向一个文件夹，我们在该文件夹中通过 localhost 运行我们的项目，请参见下面的示例，要在项目中使用它，您可以在`right click project name > Properties > ActionScript Build Path`此处输入要在`OUTPUT_FOLDER`指向的文件夹中创建的文件夹名称到：

![在此处输入图像描述](../Images/d86ed71a6560cb7f3dacecca376b7807.png)

当您`Project > Clean`从菜单中执行操作时，您`html-template`文件夹中的所有资源都将被复制到该文件夹​​，并且应该在浏览器中打开。

现在我们已经能够在 SVN 中签入我们的`.project`和`.actionScriptProperities`文件，并且几乎没有问题。当项目的新手检查他们时，他们会在问题面板中看到一个错误，告诉他们他们没有例如 - `OUTPUT_FOLDER\MyProjectName`，因此项目负责人应该有一个文档，列出要在您的环境中设置的所有必需变量。

您可以共享的其他内容是原始字体文件的路径等。

我使用这种方法遇到的唯一问题是，如果它与您的位置不同，有时它会询问 SDK 的路径，但还没有机会弄清楚这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:09:06.863

> 即使文件被复制，例如通过 git 或 svn 等版本控制，Flash builder 项目文件也无法在另一台计算机上打开。

Flash builder 项目可以像其他 Eclipse 项目一样导入到工作区中。

将它们复制到另一台计算机后：

1.  右键单击包资源管理器并转到`Import...`.
2.  选择`General/Existing Projects into Workspace`。
3.  选择包含该`.project`目录的文件夹。

如果确定`Copy projects into workspaces`已取消选择，则可以直接从签出代码的任何位置提交文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T10:48:03.860

现在在 Flash Builder 4.7 中解决了这个问题，您可以在其中实际导入项目文件夹。

# jsp - 添加数据时 Liferay Portlet 中的 NoSuchMethodException

> ID：12635058
> 
> 赞同：0
> 
> 时间：2012-09-28T06:56:58.227
> 
> 标签：jsp, model-view-controller, liferay, liferay-6, portlet

我正在使用liferay，并且我创建了自己的portlet，它刚刚添加了功能。但是我在添加书籍时遇到了一些错误

这是我的 view.jsp

```
<%@ include file="/init.jsp"%>

<%
    Restaurant resto = (Restaurant) request.getAttribute("Restaurant");
    if (resto == null) {
        resto = new RestaurantImpl();

        resto.setTable_Count(1);
    }
%>
<liferay-portlet:actionURL name="addreRestaurant" var="addreRestaurantURL"></liferay-portlet:actionURL>

<aui:form action="<%=addreRestaurantURL.toString() %>" method="post" name="fm">

    <aui:fieldset>
        <%-- <liferay-ui:error key="title-required" message="title-required" /> --%>
        <p>
            <aui:input name="Name" label="Name" type="text"
                value="<%=resto.getName()%>"></aui:input>
        </p>
        <%-- <liferay-ui:error key="author-required" message="author-required" /> --%>
        <p>
            <aui:input name="Location" label="Location" type="text"
                value="<%=resto.getLocation() %>"></aui:input>
        </p>
        <%-- <liferay-ui:error key="pages-required" message="pages-required" />
        <liferay-ui:error key="pages-cannot-be-zero"
            message="pages-cannot-be-zero" /> --%>
        <p>
            <aui:input name="table_count" label="Table_count" type="text"
                value="<%=String.valueOf(resto.getTable_Count()) %>"></aui:input>
        </p>
        <p>
            <aui:input name="room_count" label="Room_count" type="text"
                value="<%=String.valueOf(resto.getRoom_Count()) %>"></aui:input>

        </p>
        <p>
            <aui:input name="reseller_ID" label="Reseller_ID" type="text"
                value="<%=String.valueOf(resto.getReseller_ID()) %>"></aui:input>

        </p>

        <p>
                <aui:button class="aui-button-input" type="submit" value="Submit" />
                <aui:button class="aui-button-input" type="reset" value="Reset" />
            </p>

            </aui:fieldset>
</aui:form>

<liferay-ui:search-container emptyResultsMessage="no-restaurant" delta="5">
</liferay-ui:search-container> 
```

以下是我的服务实现类

```
/**
 * Copyright (c) 2000-2012 Liferay, Inc. All rights reserved.
 *
 * This library is free software; you can redistribute it and/or modify it under
 * the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation; either version 2.1 of the License, or (at your option)
 * any later version.
 *
 * This library is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 */

package com.test.service.impl;

import java.util.Collections;
import java.util.List;

import com.test.model.Restaurant;

import com.liferay.portal.kernel.exception.PortalException;
import com.liferay.portal.kernel.exception.SystemException;

import com.test.service.base.RestaurantServiceBaseImpl;

/**
 * The implementation of the restaurant remote service.
 *
 * <p>
 * All custom service methods should be put in this class. Whenever methods are added, rerun ServiceBuilder to copy their definitions into the {@link com.test.service.RestaurantService} interface.
 *
 * <p>
 * This is a remote service. Methods of this service are expected to have security checks based on the propagated JAAS credentials because this service can be accessed remotely.
 * </p>
 *
 * @author bhavik.kama
 * @see com.test.service.base.RestaurantServiceBaseImpl
 * @see com.test.service.RestaurantServiceUtil
 */
public class RestaurantServiceImpl extends RestaurantServiceBaseImpl {
    public Restaurant addreRestaurant(Restaurant restoParam) {
        Restaurant restoVar;

        try {
            restoVar = restaurantPersistence.create((int) counterLocalService
                    .increment(Restaurant.class.toString()));
        } catch (SystemException e) {
            e.printStackTrace();
            return restoVar = null;
        }

        try {
            resourceLocalService.addResources(restoParam.getCompanyId(),
                    restoParam.getGroupId(), restoParam.getUserId(),
                    Restaurant.class.getName(), restoParam.getPrimaryKey(),false,
                    true, true);
        } catch (PortalException e) {
            e.printStackTrace();
            return restoVar = null;
        } catch (SystemException e) {
            e.printStackTrace();
            return restoVar = null;
        }

        restoVar.setLocation(restoParam.getLocation());
        restoVar.setCompanyId(restoParam.getCompanyId());
        restoVar.setResto_ID(restoParam.getResto_ID());
        restoVar.setUserId(restoParam.getUserId());
        restoVar.setGroupId(restoParam.getGroupId());
        restoVar.setName(restoParam.getName());
        restoVar.setRoom_Count(restoParam.getRoom_Count());
        restoVar.setTable_Count(restoParam.getRoom_Count());
        restoVar.setUserId(restoParam.getUserId());

        try {
            return restaurantPersistence.update(restoVar, false);
        } catch (SystemException e) {
            e.printStackTrace();
            return restoVar = null;
        }
    }
    public List<Restaurant> getAllerRestaurants() {
        try {
            return restaurantPersistence.findAll();
        } catch (SystemException e) {
            e.printStackTrace();
            return Collections.emptyList();
        }
    }

    public List<Restaurant> getAllreRestaurants(long groupId, String title) {
        try {
            return restaurantPersistence.findByGroupId(groupId);
        } catch (SystemException e) {
            e.printStackTrace();
            return Collections.emptyList();
        }
    }
} 
```

在出现错误之后，我面临着它无法找到 addreRestaurant 方法的问题，但我有那个方法。那么我在哪里做错了？

错误如下：

```
SEVERE: Servlet.service() for servlet TabsTest Servlet threw exception
java.lang.NoSuchMethodException: com.liferay.util.bridges.mvc.MVCPortlet.addreRestaurant(javax.portlet.ActionRequest, javax.portlet.ActionResponse)
    at java.lang.Class.getMethod(Class.java:1605)..... 
```

如下是我添加餐厅的 Portlet 类方法。

```
package com.test.portlet;

import java.util.ArrayList;
import java.util.List;

import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import com.test.model.Restaurant;
import com.test.service.RestaurantServiceUtil;
import com.test.util.RestaurantActionUtil;
import com.test.util.RestaurantValidator;
import com.liferay.portal.kernel.exception.SystemException;
import com.liferay.portal.kernel.servlet.SessionErrors;
import com.liferay.portal.kernel.servlet.SessionMessages;
import com.liferay.portal.kernel.util.ParamUtil;
import com.liferay.portal.kernel.util.Validator;
import com.liferay.portal.kernel.util.WebKeys;
import com.liferay.portal.theme.ThemeDisplay;
import com.liferay.util.bridges.mvc.MVCPortlet;

/**
 * Portlet implementation class BooksPortlet
 */
public class RestaurantPortlet extends MVCPortlet {

    private static Log log = LogFactory.getLog(RestaurantPortlet.class);
    private static String errorJSP="/jsps/error.jsp" ;

    public void addRestaurant(ActionRequest request, ActionResponse response) {

        log.info("Inside addRegistration");
        List<String> errors=new ArrayList<String>();
        Restaurant resto=RestaurantActionUtil.getRestaurantFromRequest(request);
        boolean bookValid=RestaurantValidator.validateBook(resto, errors);
        if(bookValid) {
            log.info(resto);
            Restaurant test=RestaurantServiceUtil.addreRestaurant(resto);
            if(test==null) {
                log.error("REsto was Found Null");
                //response.setRenderParameter("jspPage", errorJSP);
                return ;
            }
            SessionMessages.add(request,"book-added");
            return ;
        }
        else {
             for (String error : errors) {
                    SessionErrors.add(request, error);
                }
                SessionErrors.add(request, "error-while-adding");
                request.setAttribute("Restaurant",resto);
                return ;
        }

    }

    /*
    public void deleteBooks(ActionRequest request, ActionResponse response) {

        long bookId = ParamUtil.getLong(request, "bookId");
        ThemeDisplay themeDisplay = (ThemeDisplay) request.getAttribute(
                WebKeys.THEME_DISPLAY);

        if (Validator.isNotNull(bookId)) {
            BooksLocalServiceUtil.deleteBooks(bookId, themeDisplay.getCompanyId());
            SessionMessages.add(request, "book-deleted");

        } else {
            SessionErrors.add(request, "error-deleting");

        }

    }

*/
} 
```

这是我的新错误跟踪...

```
14:16:50,870 INFO  [RestaurantPortlet:35] Inside addRegistration
14:16:50,872 INFO  [RestaurantPortlet:40] {Resto_ID=0, Name=dasd, Location=ads, Room_Count=2, Table_Count=1, userId=10196, companyId=10154, groupId=10180, Reseller_ID=55}
com.liferay.portal.ResourceActionsException: There are no actions associated with the resource com.test.model.Restaurant
    at com.liferay.portal.service.impl.ResourceLocalServiceImpl.validate(ResourceLocalServiceImpl.java:1348)
    at com.liferay.portal.service.impl.ResourceLocalServiceImpl.addResources(ResourceLocalServiceImpl.java:845)
    at com.liferay.portal.service.impl.ResourceLocalServiceImpl.addResources(ResourceLocalServiceImpl.java:147)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

...................... 14:16:50,878 错误 [RestaurantPortlet:43] REsto 被发现为空

我的动作资源映射 xml..

```
<?xml version="1.0" encoding="UTF-8"?>

<resource-action-mapping>

    <portlet-resource>
        <portlet-name>RestaurantPortlet</portlet-name>
        <permissions>
            <supports>
                <action-key>addRestaurant</action-key>
                <action-key>VIEW</action-key>
            </supports>
            <community-defaults>
                <action-key>VIEW</action-key>
            </community-defaults>
            <guest-defaults>
                <action-key>VIEW</action-key>
            </guest-defaults>

            <guest-unsupported>
                <action-key>addRestaurant</action-key>
            </guest-unsupported>
        </permissions>
    </portlet-resource>

    <model-resource>
        <model-name>com.test.Restaurant</model-name>
        <portlet-ref>
            <portlet-name>RestaurantPortlet</portlet-name>
        </portlet-ref>
        <permissions>
            <supports>
                <action-key>addRestaurant</action-key>

                <action-key>VIEW</action-key>
            </supports>
            <community-defaults>
                <action-key>VIEW</action-key>
            </community-defaults>
            <guest-defaults>
                <action-key>VIEW</action-key>
            </guest-defaults>
            <guest-unsupported>

            </guest-unsupported>
        </permissions>
    </model-resource>

</resource-action-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:00:30.420

您的方法：`public Restaurant addreRestaurant(Restaurant restoParam)`
portlet 所需的方法：`addreRestaurant(javax.portlet.ActionRequest,javax.portlet.ActionResponse)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:16:10.373

您的 mvc 类方法名称是**addRestaurant** ()，而您的 jsp 需要：

名称=“**地址餐厅**”

方法名称不同:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T15:04:21.670

您的新堆栈跟踪与另一个错误有关。问题出在 RestauranteServiceImpl.addreRestaurant() 内部，更具体地说是代码段：

```
resourceLocalService.addResources(restoParam.getCompanyId(),
                    restoParam.getGroupId(), restoParam.getUserId(),
                    Restaurant.class.getName(), restoParam.getPrimaryKey(),false,
                    true, true); 
```

这意味着您没有与您的类或 portlet 相关的资源操作。您是否定义了资源操作映射？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T17:30:36.427

我终于把事情做好了……在数据库中，在 actionresources 表中没有关于我的 addRestaurant 操作的条目。

经过大量的研发发现......我必须在该表中手动添加 addRestaurant 条目，它就可以工作。

我现在将搜索它如何不自动将条目添加到资源操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T10:47:22.510

跑步

> 服务建设者

为我解决了这个问题。

# facebook - 如何将我们自己的链接放在 Facebook 墙消息中

> ID：12635060
> 
> 赞同：0
> 
> 时间：2012-09-28T06:57:14.363
> 
> 标签：facebook, facebook-graph-api

我正在构建一个 facebook 应用程序，其中我正在使用 facebook 图形 api 编写用户墙。

现在我想在消息中包含 1 个以上的链接。有可能吗，我该怎么做。

这是我的代码

```
$facebook->api('/'.$uid.'/feed', 'post', array(
            'message' => 'Dear friend, I have given '.$input['rate']." to the movie". $moviedetails['ftitle']. "from ReelReview",
            'name' => $moviedetails['ftitle'],
            'description' => $moviedetails['description'],
            'caption' => 'ReelReview - the best movie review app',
            'picture' => 'http://site.com/Movie.jpg',
            'link' => 'http://mysite.com'
        )); 
```

现在我正在尝试在消息和描述中包含一些链接，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:22:32.127

每个墙帖只能有一个“链接”，但您可以在描述中包含多个链接。不同之处在于“链接”属性将是 facebook 扫描信息并显示图像等的链接。描述中的链接将与普通消息中的链接相似。

# c++ - 动态分配二维数组而不使用任何循环？

> ID：12635066
> 
> 赞同：1
> 
> 时间：2012-09-28T06:57:32.303
> 
> 标签：c++, c, dynamic, allocation, multidimensional-array

我们可以在不使用任何 for 循环或 while 循环的情况下动态分配二维数组吗？我在c c++中有任何直接命令或函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:17:40.157

如果不使用循环，您将在 ISO c++ 中有一个限制，即必须在编译时确定一维的大小。然后可以在单个语句中完成此分配，如下所示：

```
#define COLUMN_SIZE 10 // this has to be determined at compile time
int main()
{
    int (* arr)[COLUMN_SIZE];
    int rows = 20; // this is dynamic and can be input from user at run time
    arr = new int[rows][COLUMN_SIZE];
    arr[3][4] = 10;
    cout << arr[3][4] << endl;
    return 0;
} 
```

需要释放**新**分配的内存。此外，如果我们将其扩展到 n 个维度，则在运行时只能确定*其中一个维度。**原因是编译器必须知道每一行的大小才能创建一行连续的内存*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:04:33.590

尽管您应该避免使用原始指针，但这应该可以工作->

```
int *myArray = new int[R*C]; 
```

这里R是行数，C是列数。虽然它实际上是一维数组，但您可以将其作为二维数组进行操作。例如，`myArray[i][j]`可以读作->

```
myArray[i*C + j] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:17:23.333

使用 out 循环的唯一方法是分配一个伪 2D 数组，因此：

```
int *ary = new int[sizeX * sizeY]; 
```

但随后访问它是非标准的，坦率地说很难看：

```
ary[y*sizeX + x] 
```

如果您想要一个“真实的”二维数组，那么您将陷入循环初始化：

```
int **ary = new int*[sizeY];
for(int i = 0; i < sizeY; ++i) {
    ary[i] = new int[sizeX];
} 
```

但是你必须小心清理：

```
for(int i = 0; i < sizeY; ++i) {
    delete [] ary[i];
}
delete [] ary; 
```

所以在我看来

```
std::vector<std::vector < int> > 
```

可能是在现实世界应用程序中最简单和最安全的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:20:26.270

以 arr[..][..] 格式访问的替代方法。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{
    int COL ;
    int ROW ;
    COL = 8;
    ROW = 12;
    int (*p)[COL];
    int *mem = (int*)malloc(sizeof(int)*COL*ROW);
    memset(mem,0,sizeof(int)*COL*ROW);
    p = (int (*)[10])mem;

    printf("0x%p\n", p);
    printf("0x%p %d\n", p+1, (((int)(p+1))-((int)p))/sizeof(int));

    mem[2*COL+0] = 1;
    printf("%d\n", p[2][0]);
    mem[2*COL+5] = 2;
    printf("%d\n", p[2][5]);
    mem[6*COL+7] = 3;
    printf("%d\n", p[6][7]);

    p[1][2] = 4;
    printf("%d\n", mem[1*COL+2]);

    free(p);

    return 0;
} 
```

当然也可以`int (*p)[COL] = (int (*)[COL]) malloc(sizeof(int)*COL*ROW);`直接做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-28T06:59:31.020

尝试通过递归替换循环

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-28T07:06:59.767

A`std::map<TypeDim1, std::map<TypeDim2, TypeContent> >`可能是一个动态分配的选择来表示一个二维数组。

```
#include <map>
typedef std::map<int, std::map<int, std::string> > array2dstring;

int main(int argc, char *argv[])
{
   array2dstring l_myarray2d;
   l_myarray2d[10][20] = "Anything"; 
} 
```

# c# - Int 作为数组表示

> ID：12635067
> 
> 赞同：1
> 
> 时间：2012-09-28T06:57:35.173
> 
> 标签：c#

我需要一个 int 数组，来自一个 int 值。

> int 值 123456 转换为 int[] {1,2,3,4,5,6}。

有没有比这更好的解决方案：

```
using System.Diagnostics;

namespace test
{
#if DEBUG
    [DebuggerDisplay("{GetDebuggerDisplay()}")]
#endif
    public class IntArray
    {

#if DEBUG
        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
#endif
        private int _value;
#if DEBUG
        [DebuggerBrowsableAttribute(DebuggerBrowsableState.Never)] 
#endif
        private int[] _valueArray;

        public IntArray(int intValue)
        {
            Value = intValue;
        }

        public int Value
        {
            get { return _value; }
            set
            {
                _value = value;
                _valueArray = null;
                _valueArray = CreateIntArray(value);
            }
        }

        public int[] Array
        {
            get { return _valueArray; }
        }

        private string GetDebuggerDisplay()
        {
            return string.Format("Value = {0}", Value);
        }

        private static int[] CreateIntArray(int value)
        {
            string s = value.ToString();
            var intArray = new int[s.Length];

            for (int i = 0; i < s.Length; i++)
                intArray[i] = int.Parse(s[i].ToString());

            return intArray;
        }
    }
} 
```

任何帮助和批评将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:00:13.390

您可以使用 Linq 执行以下操作。这只是从 int 值制作数组。

```
var arrayOfInts = myint.ToString().Select(i => int.Parse(i.ToString())).ToArray(); 
```

编辑：如果你想经常使用它，这也可以作为 int 的[扩展方法。](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

```
public static class IntExtensions
{
    public static int[] ToArray(this int i)
    {
        return i.ToString().Select(c => int.Parse(c.ToString())).ToArray();
    }
} 
```

然后你可以通过这样做来使用这个扩展：

```
var myArray = 123456.ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:00:25.577

您可以转换为`int`，`String`稍后您可以使用 LINQ 将每个字符转换为整数，然后使用返回一个整数数组`.ToArray()`

```
int a = 123456;
string tempA = a.ToString();
int[] temp = tempA.Select(r => Convert.ToInt32(r.ToString())).ToArray(); 
```

编辑：根据 Styxxy 评论：

```
 int a = 123456;
    int[] array = new int[a.ToString().Length];
    int i = array.Length - 1;
    while (a > 0)
    {
        array[i--] = a % 10;
        a = a / 10;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:03:35.607

```
var res = 123456.ToString().Select(c => Int32.Parse(c.ToString())).ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T07:05:40.263

另一种使用方式[`char.GetNumericValue`](http://msdn.microsoft.com/en-us/library/system.char.getnumericvalue.aspx)：

```
int[] ints = 123456.ToString().Select(c => (int)char.GetNumericValue(c)).ToArray(); 
```

或没有 Linq：

```
var chars = 123456.ToString();
int[] ints = new int[chars.Length];
for (int i = 0; i < chars.Length; i++)
    ints[i] = (int)char.GetNumericValue(chars[i]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T07:07:29.873

另一种方法：

```
 public static int[] GetInts(this int value)
    {            
        if (value == 0)
            return new int[] { 0 };
        else
        {
            int val = value;

            List<int> values = new List<int>();
            while (Math.Abs(val) >= 1)
            {
                values.Add(Math.Abs(val % 10));
                val = val / 10;
            }

            values.Reverse();
            return values.ToArray();
        }
    } 
```

并使用它：

```
 int value = 123456;
    int[] values = value.GetInts(); 
```

*编辑：改进为使用负数和零*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T16:44:42.460

正如评论中所说，最好使用基本的算术运算，而不是转换为字符串，循环字符串并将字符串解析为整数。

这是一个例子（我为整数做了一个扩展方法）：

```
static class IntegerExtensions
{
    public static int[] ToCypherArray(this int value)
    {
        var cyphers = new List<int>();
        do
        {
            cyphers.Add(value % 10);
            value = value / 10;
        } while (value != 0);
        cyphers.Reverse();

        return cyphers.ToArray();
    }
}

class Program
{
    static void Main(string[] args)
    {
        int myNumber = 123456789;
        int[] cypherArray = myNumber.ToCypherArray();

        Array.ForEach(cypherArray, (i) => Console.WriteLine(i));

        Console.ReadLine();
    }
} 
```

# android - 访问obb扩展文件中的文件

> ID：12635069
> 
> 赞同：5
> 
> 时间：2012-09-28T06:57:37.217
> 
> 标签：android, expansion-files, apk-expansion-files

我正在关注所有官方扩展文件指南，但我找不到它。我无法访问我需要的包含的 obb 文件。

我需要 6 个音频文件 (80Mb)，我将它们“存储”（未压缩）在一个 zip 文件中并重命名为“main.2001.test.expansion.proj.obb”并存储在“/mnt/sdcard/Android/obb/test”中.expansion.proj/'

我会尝试访问文件

```
String mainFileName = Helpers.getExpansionAPKFileName(this,true,2001);
if(!Helpers.doesFileExist(this, mainFileName, 27959282L, false))
{
    //download
} else {
    Log.d("test_file","file exist");
}

ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(this,2001,2001);
if(expansionFile!=null)
{
    ZipEntryRO[] ziro = expansionFile.getAllEntries();
    for (ZipEntryRO entry : ziro) {
        Log.d("test_files_zip", "fileZip filename: "+entry.getZipFileName());
        try{
            AssetFileDescriptor ro = entry.getAssetFileDescriptor();
            Log.d("test_files_zip", "--fileZip getfiledescriptor.tostring: "+ro.getFileDescriptor().toString());
            Log.d("test_files_zip", "--fileZip createinputstring.tostring: "+ro.createInputStream().toString());

            AssetFileDescriptor assetFileDescriptor = expansionFile.getAssetFileDescriptor(entry.getZipFileName()+"/audio02.mp3");
            if(assetFileDescriptor!=null) {
                Log.d("test_files_mp3", "length: "+assetFileDescriptor.getLength()); //checking it exists
            }
        }catch (IOException e){ Log.e("test_exp","IoExcp: "+e.getMessage()); }
    }
} 
```

在->assetFileDescriptor = 扩展文件.getAssetFileDescriptor(.....); 我已经尝试了我在不同地方找到的所有东西，但我无法获取文件。如果文件在 zip 中，有什么方法可以从文件名中获取文件？

应用程序应该以特定顺序播放这些文件，我们不想解压缩文件并使它们“公开”。

* * *

已编辑。回答我自己

发现，这是我第一次阅读时不明白的一行，或者我只是想念它。

```
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(this,2001,2001);
if(expansionFile!=null){
        FileDescriptor fd = expansionFile.getAssetFileDescriptor("audio_01.mp3");
        //or
        InputStream is = expansionFile.getInputStream("audio_01.mp3");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:57:58.563

正如 Aarolama Bluenk 建议的那样，这是答案代码（重复）

发现，这是我第一次阅读时不明白的一行，或者我只是想念它。

```
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(this,2001,2001);
if(expansionFile!=null){
        FileDescriptor fd = expansionFile.getAssetFileDescriptor("audio_01.mp3");
        //or
        InputStream is = expansionFile.getInputStream("audio_01.mp3");
} 
```

# java - 遍历结果集

> ID：12635074
> 
> 赞同：0
> 
> 时间：2012-09-28T06:57:52.163
> 
> 标签：java, jdbc

> **可能重复：**
> [在程序中获得意外输出](https://stackoverflow.com/questions/12622718/getting-unexpected-output-in-program)

坦率地说，这个问题问起来可能很傻，但我是 Java 新手。
这是我的表`emp(name,id,address,date)`。

*现在我要匹配某个员工的相应密码。*

```
String sql = "select emp_id,password from regid";
ResultSet rs = st.executeQuery(sql);

while(rs.next()){
 // here will be iterate function using resultset,i guess
 // what should be the best logic to check the name and password...any inputs
 //in terms of code

if(if (employee.equals(rs.getString("emp_id")) && password.equals(rs.getString("password")))){
You are Mr. emp // in terms of code
}

else{
Who are You ?? //in terms of code
}
} 
```

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:02:19.193

您正在为*所有*员工选择数据并在它们中查找匹配项。

让数据库过滤它要好得多：

```
select count(*)  from regid where emp_id = ? and password = ? 
```

然后你只需要检查这是否返回 0 或 1。

此外，`password`希望只是一个密码哈希。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:02:35.710

使用[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)创建查询。*因此，您对PreparedStatement*的参数化查询将如下所示：

```
SELECT * from regid WHERE emp_id = ? AND password = ? 
```

插入参数值并执行您的语句。所以它会是这样的：

```
PreparedStatement ps = null;
ResultSet rs = null;
boolean validUser = false;

try{
    ps = connection.prepareStatement("SELECT * from regid WHERE emp_id = ? AND password = ?");
    ps.setString(1, [user_id_input]);
    ps.setString(2, [user_pw_input]);
    rs = ps.executeQuery();

    validUser = rs.next();
}finally{
    //Release your resources
}

if(validUser){
    //user is validated
} 
```

作为旁注，我还建议在将其提供给您的查询之前验证用户的输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T07:16:30.343

从数据库中获取所有数据会使您的应用程序性能变慢，因此触发以下查询检索一条记录。

```
boolean status = false;
String emp_name = "";
String emp_password = "";
String sql = "select * from regid where emp_id='"+emp_id+"' AND password='"+password+"'";
ResultSet rs = st.executeQuery(sql);
while(rs.next()){
    if(emp_id.equals(rs.getString("emp_id")) && password.equals(rs.getString("password")))
    {
            // fetch employee data
            status = true;
    }
}
if(status)
{
        // login correct
}
else
{
        // login incorrect
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T07:02:51.940

查询您的数据库`"select emp_id,password,... from regid where emp_id=? and password=?"`

创建 PreparedStatement 并设置 emp_id 和密码。如果 emp_id 和密码匹配，它将返回 1 行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T07:03:08.073

您实际上不应该匹配结果集中的密码。您的 sql 查询应该类似于

```
select emp_id from regid where password='userpassword' 
```

其中 userpassword 是您从使用的屏幕上获得的密码

# css - 取决于文本的 CSS 表达式

> ID：12635077
> 
> 赞同：1
> 
> 时间：2012-09-28T06:58:10.913
> 
> 标签：css, colors

我有这样一段

```
<p> Lorem ipsum dolor sit amet, /* consectetur adipiscing elit. */ </p> 
```

我想要一个 CSS 类，它之间的文本有不同的字体颜色，`/*`谢谢`*/` 你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:00:03.737

你不能`Expressions`用来做这个。

### CSS/HTML 的方式，通过在里面插入一个元素。

你可以这样使用：

```
<p> Lorem ipsum dolor sit amet, <span class="comment">/* consectetur adipiscing elit. */</span> </p> 
```

### CSS：

```
p span.comment {color: #999;} 
```

### 演示：http: [//jsfiddle.net/jNvSw/](http://jsfiddle.net/jNvSw/)

### 或者，如果您想以 JavaScript 方式执行（使用 jQuery，但也可以使用纯 JavaScript 完成）：

```
​$(document)​.ready(function(){
    $("p").html($("p").html().replace('/*', '<span class="comment">/*'));
    $("p").html($("p").html().replace('*/', '*/</span>'));
});​ 
```

### 演示：http: [//jsfiddle.net/jNvSw/1/](http://jsfiddle.net/jNvSw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:00:59.627

```
<p> Lorem ipsum dolor sit amet, <label class="classA"> /* consectetur adipiscing elit. */ </label></p>

<style>
.classA
{
font-size:12px;
font-family:Arial;
color:blue;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:01:17.553

如果可能的话，用标签替换你的标记（/**/）`<span>`，然后为它们分配适当颜色的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:02:03.077

假设有换行符，您可以使用`:first-line`伪元素破解它：

```
<p> Lorem ipsum dolor sit amet, /* consectetur adipiscing elit. */ </p>

p { color: grey;
p:first-line { color: black; } 
```

请注意，不要认真对待这个答案。

# android - Android自定义字体未正确映射

> ID：12635080
> 
> 赞同：2
> 
> 时间：2012-09-28T06:58:14.750
> 
> 标签：android, fonts, mapping, custom-font

我必须`Nepali Font`在我的应用程序上实现，为此我使用了名为 的 unicode 字体`DroidSansDevanagari-Regular.ttf`。我使用这种字体的原因是在我的应用程序上`Rooted Galaxy S2 I900`，我已经安装 了正确`Resurrection Remix 3.06 JB(AOKP)`渲染的字体。`Nepali Font`在`system/fonts`文件夹下我找到了这个`DroidSansDevanagari-Regular.ttf`字体，它负责显示`Nepali Font`。

此外，我使用了使用自定义字体的正确方法

```
 Typeface font =     
              Typeface.createFromAsset(context.getAssets(),
                                       "fonts/DroidSansDevanagari- Regular.ttf");                 
   someTextView.setTypeface(font); 
```

虽然我的应用程序显示`Nepali Font`它没有正确映射字体。使用相同的字体我在`Rooted Galaxy S2`手机上得到正确的映射，但我无法在其他手机上得到正确的映射。让我用图片来说明这一点

正确映射

![正确映射](../Images/e480e2d52537084542045793ada7ae0c.png)

不正确的映射

![在此处输入图像描述](../Images/a69403e1d508f3bde954c385a99e31c2.png)

所以，我的问题是如何以我的方式正确映射字体`Rooted Galaxy S2 phone`。为此，我必须查看`AOKP`项目并查看`EditText`或`Typeface`类。请为我提供有关如何在每个设备上正确映射字体的指导

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:19:30.510

对于正确的字体映射，[indic 文本渲染器](http://code.google.com/p/indic-text-renderer/)是我迄今为止找到的最佳解决方案。但是在实现这个库之前，请查看在这个[问题](http://code.google.com/p/indic-text-renderer/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=4)上解释的解决方案，以便渲染具有长文本且单词之间没有任何行间距的字体

# c++ - 将数组复制到未按预期发生的向量中

> ID：12635082
> 
> 赞同：1
> 
> 时间：2012-09-28T06:58:18.327
> 
> 标签：c++, vector

我正在尝试将数组复制到向量。

```
int A[1000]; //This array is filled by some function
vector<int> vec;

//some position from which I want to write the contents of the array into vector
int x = some_position;

vec.resize(sizeof(A)+x);
vec.insert(vec.begin()+x, A, A+sizeof(A)); 
```

问题是每四个元素都没有正确复制。其余元素被正确复制。即 vec[x+3] != A[x+3] for x=0,1,2,3....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:07:52.200

首先，您需要检查您对`sizeof`. 它返回整体所需的字节数`A`，而不是 A 中的项目数，因为您需要`sizeof(A)/sizeof(*A)`。

```
int A[1000];
vector<int> vec;

int x = 5;

vec.resize(x + sizeof(A) / sizeof(*A));
vec.insert(vec.begin()+x, A, A + sizeof(A) / sizeof(*A)); 
```

还值得注意的是，“插入”可能不是您想要的。如果您的目标是将向量视为数组并覆盖向量的 1000 元素长部分，那么您应该使用 std::copy 代替。插入将进一步调整数组的大小，因此如果调整大小将使向量长度为​​ 1005 个元素，并且您从位置 5 开始插入它们，那么最终向量的长度将是 2005 个元素，其中 A 的内容从 5 到 1004。

您可以改为使用以下代码替换该`insert`行：

```
std::copy(A, A + sizeof(A) / sizeof(*A), vec.begin() + x); 
```

这将覆盖从位置 5 开始的向量的内容，并将向量的大小保留为 1005。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:05:07.240

将数组复制到向量的更好方法：

```
vec.resize(1000+some_position);//if needed
std::copy(A,A+1000,vec.begin()+some_position); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:44:46.237

Your use of `sizeof` is wrong. `sizeof` is a very primitive operator, which returns the number of *bytes* in the shallow image of the object or type. This is totally useless except for very low level programming. If you need to deal with C style arrays, there functions `std::begin()` and `std::end()` in C++11; in earlier versions of C++, we just wrote them ourselves. (I usually also wrote a `size()` function, which basically returned the number of elements.) And `std::vector` works in number of elements, not number of bytes. So your last two lines of code should be:

```
vec.resize( x );
vec.insert( vec.end(), std::begin( A ), std::end( A ) ); 
```

At least, that's what I think you're trying to do, based on the comments: create an `std::vector<int>` with `x` elements initialized to 0, followed by the contents of `A`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T07:07:45.047

您似乎认为 sizeof() 给出了元素的数量

例如

```
vec.resize(sizeof(A)+x); 
```

但事实并非如此。它给出了字节数。

正确的调整大小应该是

```
vec.resize(sizeof(A)/sizeof(int)+x); 
```

紧随其后的是

```
vec.insert(vec.begin()+x, A, A+sizeof(A)/sizeof(int)); 
```

尽管我同意 Sergey 的观点，即 copy() 是更好（更优雅）的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T07:11:18.747

替换`sizeof(A)`为`sizeof(A) / sizeof(A[0])`，它将起作用。

正如@Sergey 指出的那样，`vec.resize();`在这种情况下`insert()`也不需要调整`vector`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T09:11:58.783

**不要** *将数组复制到向量*中。使用 C++ 可以完全避免这种情况。代替

```
void fill_array(int*, size_t);
int A[1000];
fill_array(A,1000);
std::vector<int> vec;
my_copy(vec,A); 
```

简单地做

```
std::vector<int> vec;
vec.resize(1000);    // or whatever
fill_array(vec.data(),vec.size());  // std::vector::data() is C++11 
```

在 C++（也是 C++11 之前）中，您实际上会更像这样：

```
template<typename iterator> fill_data(iterator begin, iterator end);
std::vector<int> vec;
vec.resize(n);    // make space (otherwise fill_data cannot fill in anything)
fill_data(vec.begin(), vec.end()); 
```

那么您`fill_data`的通用性足以重复用于任何类型的容器。

# c++ - 将向量从堆栈复制到堆上

> ID：12635087
> 
> 赞同：2
> 
> 时间：2012-09-28T06:58:40.127
> 
> 标签：c++, heap-memory, stack-memory

我有一个接受 const 向量引用的方法。我想将向量的可变版本放在堆上并返回它

这可以编译，但我不确定它是否真的按照我的想法做。我不确定我是否对这里的记忆感到幸运：

```
vector<Type> *vect = new vector<Type>;
*vect = vectReference; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:05:02.980

没关系，您制作了动态分配的`vector`副本。但同样可以使用复制构造函数而不是默认构造函数和赋值运算符以更短的方式完成：

```
vector<Type> *vect = new vector<Type>(vectReference); 
```

还想建议使用智能指针而不是原始指针：`std::unique_ptr`或者`std::shared_ptr`- 取决于您的代码语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:01:44.717

据我了解，你做对了。在第二行，您将向量从 vectReference 复制到堆上分配的 vect 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:04:44.530

此代码工作正常。

但是，您需要确保“vect”分配空间，稍后应释放该空间，因此您可能希望使用 std::auto_ptr 来确保对象被销毁：

```
std::auto_ptr<std::vector<Type> > vect(new std::vector<Type>);
*vect = vectReference; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T07:04:48.317

这将完全执行您想要的。您甚至可以通过以下方式缩短它：

```
vector<Type> *vect = new vector<Type>(vectReference); 
```

调用复制构造函数而不是赋值运算符。

# c# - Linq 中的条件 Where 语句

> ID：12635089
> 
> 赞同：0
> 
> 时间：2012-09-28T06:58:53.473
> 
> 标签：c#, linq

我的 Linq 语句出错。现在的问题是我在一个使用自定义构建的数据层的项目中，所以我不知道我是在创建错误的 Linq 语句还是数据层无法处理它。

所以这是声明：

```
IQueryable<Affiliate> temp;

Func<RolePersonRole, bool> func;
if (roleMustBePrimary)
{
    func  = role => role.RolePersonRoleIsPrimary.Value == true;    
}
else
{
    func = role => role.RoleId == role.RoleId;

}
temp = (from affiliate in DataFacade.Instance().Tables(SessionTicket).Affiliates()
        join role in DataFacade.Instance().Tables(SessionTicket).RolePersonRoles().Where(func) on affiliate.PersonId
            equals role.PersonId
        where role.RoleId == roleId
                && affiliate.AffiliateAssuranceLevel == assuranceLevelEnum
        select affiliate); 
```

意思是如果 bool`roleMustBePrimary`为真，则应添加 where 语句，如果为假，则不应添加（因此使用`role => role.RoleId == role.RoleId`）。

我得到的错误是：

> 'System.Collections.Generic.IEnumerable`1[SkillsNG.Modules.RolePersons.Entities.RolePersonRole]' 类型的表达式不是序列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:37:22.770

正如 Wouter 所说，您不需要`.Where()`，您可以更清楚地表达它：

```
var temp = 
    from affiliate in DataFacade.Instance().Tables(SessionTicket).Affiliates()
    join role in 
        from r in DataFacade.Instance().Tables(SessionTicket).RolePersonRoles()
        where roleMustBePrimary && r.RolePersonRoleIsPrimary.Value 
              || !roleMustBePrimary
        select r
    on affiliate.PersonId equals role.PersonId
    where role.RoleId == roleId
          && affiliate.AffiliateAssuranceLevel == assuranceLevelEnum
    select affiliate; 
```

# active-directory - ldap 嵌套组（在解析组成员身份时查看的属性）

> ID：12635090
> 
> 赞同：0
> 
> 时间：2012-09-28T06:58:56.370
> 
> 标签：active-directory, nested

要检索属于所有用户的组，我使用以下过滤器：

```
(&(objectclass=*)(member:1.2.840.113556.1.4.1941:=cn=sam,DC=aaaldap,DC=com)) 
```

而且，我能够检索多个 DN 条目，例如：

```
1\. GOT ENTRY: DN => CN=group1,CN=Users,DC=aaaldap,DC=com
 LDAP: Attribute                Length    Valueldap_get_dn
 1d21h: LDAP: cn                  6         group1

2\. LDAP: GOT ENTRY: DN => CN=group2,CN=Users,DC=aaaldap,DC=com
 LDAP: Attribute                Length    Valueldap_get_dn
 1d21h: LDAP: cn                  6         group2 
```

我感兴趣的是组成员身份，所以我想解析条目中收到的属性 CN，并希望将其假设为一个组。

有人可以建议这是否是解析 CN 属性并将其值标记为它所属的“组”成员身份的有效假设吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:15:46.153

您应该指定一个 real`objectClass`而不是 just `*`，以将搜索限制为您用于组的任何对象类。那么你得到的任何东西都必须是一个组。搜索也可能运行得更快。

# c# - 启动 Windows 服务后 Windows Server 性能下降。

> ID：12635091
> 
> 赞同：-1
> 
> 时间：2012-09-28T06:58:58.517
> 
> 标签：c#, windows-services, windows-server-2008

我正在使用内置 C-sharp 代码的 Windows 服务，它处理 txt 文件并将其内容加载到 oracle 11g 数据库。我已将它安装在 Windows Server 2008 中。启动该服务后，我面临服务器性能缓慢的问题。每次我开始服务时，服务器性能都会变慢。实际原因可能是什么...请帮助，因为我处于客户端服务器中服务部署的最后阶段。我不希望我的 WinService 损害任何客户端服务器。欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:18:11.930

在服务器上安装[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653)并检查 Windows 服务以确定是什么降低了服务器的速度。

# c# - 如何从具有 html 标签的 xml 文件和 xslt 生成 RTF 内容

> ID：12635094
> 
> 赞同：0
> 
> 时间：2012-09-28T06:59:21.080
> 
> 标签：c#, xml, xslt, xsd

我有使用 html 格式化的 xml 文件和 xslt，是否有任何工具或渲染器可以接受这两者作为输入并使用 C# 输出等效的 rtf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:33:08.620

我不能 100% 确定您的输入是什么 - HTML 还是某种 XML？

如果您需要将 HTML 转换为 RTF，我的建议是使用 Word - 它可以从 C# 轻松控制，它可以打开 HTML 并保存 RTF。这在客户端上可以正常工作，但在服务器上会变得很棘手。

如果您的输入是一些简单/标准的 HTML（例如，以常规方式仅使用一组受限制的标签且没有 CSS），您可以使用 XSLT 直接将其转换为一些简单的 RTF

# c# - Visual Studio 2008 中缺少 Crystal Reports 模板

> ID：12635104
> 
> 赞同：1
> 
> 时间：2012-09-28T06:59:51.177
> 
> 标签：c#, visual-studio-2008, crystal-reports

我在 Visual Studio 2008 中找不到用于创建 Crystal Report 的 Crystal Reports 模板。

因此，在谷歌搜索后，我发现在安装时我应该启用 Crystal Report 基本选项。我也这样做了，但是在添加新项目时找不到 Crystal Reports 模板，而在 Reporting 选项卡下的 ToolBox 中，它显示`CrystalReportViewer`和`CrystalReportDocument`控制。

`CrystalReport`添加模板或添加模板有什么区别`CrystalReportViewer`？表单上的控件是否`CrystalReportDocument`相同？

我是 Crystal Reports 概念和用法的新手。您能帮我在项目中添加新项目时显示 Crystal Reports 模板吗？

Visual Studio 版本为 2008 专业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:22:07.013

[这篇博](http://chiragrdarji.wordpress.com/2008/05/06/missing-templates-in-visual-studio-installed-templates/)文似乎有一些帮助——尤其是在评论中。

# php - 如何使我的 id 从 12-09CB1 自动递增到 12-09CB0001？

> ID：12635108
> 
> 赞同：1
> 
> 时间：2012-09-28T07:00:02.217
> 
> 标签：php, phpmyadmin

嗨，我使用了以下代码

```
$last_id=mysql_query("select * from complaint_list order by complaint_id Desc Limit 1");
$complaint_last=mysql_fetch_array($last_id);

$complaintid=$complaint_last['complaint_id'];
$complaintid = str_pad($id, 4, '0');
$year = substr($get[0],2,2);
$complaint_number=$year."-".$get[1]."CB".$complaintid;

mysql_query("insert into complaint_list(complaint_number, sap_number, complaint_type, circle_id) values('" . $complaint_number . "','" . $_POST['sap_number'] . "', 'DU', " . $_POST['circle'].")"); 
```

它一直显示为 12-09CB0000。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:20:57.877

嗨，我解决了这个问题，

只需替换此代码

```
$last_id=mysql_query("select *,lpad(complaint_id,4,'0') as cid from complaint_list order by complaint_id Desc Limit 1");
    $complaint_last=mysql_fetch_array($last_id);
    $complaintid=$complaint_last['cid'];
    $complaintid = str_pad($complaintid, 4, '0');
    $year = substr($get[0],2,2);
    $complaint_number=$year."-".$get[1]."CB".$complaintid; 
```

# python - QueryFrame 是如何工作的？

> ID：12635112
> 
> 赞同：3
> 
> 时间：2012-09-28T07:00:05.403
> 
> 标签：python, opencv

```
import cv

# create a window
winname = "myWindow"
win = cv.NamedWindow(winname, cv.CV_WINDOW_AUTOSIZE)

# load video file
invideo = cv.CaptureFromFile("video.avi")

# interval between frame in ms.
fps = cv.GetCaptureProperty(invid, cv.CV_CAP_PROP_FPS)
interval = int(1000.0 / fps)   

# play video
while (True):
    im = cv.QueryFrame(invideo)
    cv.ShowImage(winname, im)
    if cv.WaitKey(interval) == 27: # ASCII 27 is the ESC key
        break

del invideo
cv.DestroyWindow(winname) 
```

以上是使用opencv libraray播放视频文件的简单python代码。

我唯一不明白的部分是`im = cv.QueryFrame(invideo)`

根据**[opencv api](http://opencv.willowgarage.com/documentation/python/highgui_reading_and_writing_images_and_video.html?highlight=queryframe#QueryFrame)**，“`QueryFrame`从相机或视频文件中抓取一帧，解压缩并返回它。”

据我了解，它只返回一个`iplimage`单帧格式的图像，但**它如何知道它返回的是哪一帧？**唯一`QueryFrame`需要的参数是视频捕获，但没有索引告诉它我需要检索的视频帧的帧数。如果我需要从中间部分开始播放视频怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:50:22.787

您必须使用`cv.GetCaptureProperty`CV_CAP_PROP_FRAME_COUNT 来获取视频的帧数。将其除以 2 以找到中间值。使用`QueryFrame`直到达到这个值。

# php - 在测试服务器上的 php 文件中出现错误，但在 localhost 中没有错误

> ID：12635117
> 
> 赞同：0
> 
> 时间：2012-09-28T07:00:16.637
> 
> 标签：php, mysql, localhost

```
$sql = mysql_query("SELECT id, username, firstname,lastname, country, trade FROM myMembers WHERE email_activated='1' ORDER BY id ASC"); 
$sql2 = mysql_query("SELECT id, username, firstname,lastname, country, trade FROM mymembers WHERE email_activated='1' ORDER BY id DESC $limit"); 
$paginationDisplay = ""; 
if ($lastPage != "1"){
$paginationDisplay .= 'Page <strong>' . $pn . '</strong> of ' . $lastPage. '<img      src="images/clearImage.gif" width="48" height="1" alt="Spacer" />';
if ($pn != 1) {
$previous = $pn - 1;
$paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> Back</a> ';
} 
$paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>';
if ($pn != $lastPage) {
$nextPage = $pn + 1;
$paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' .$nextPage    . '"> Next</a> ';} }
$outputList = '';
while($row = mysql_fetch_array($sql2)) { $id = $row["id"];
$username = $row["username"];
$firstname = $row["firstname"];
$lastname = $row["lastname"];
$country = $row["country"];
$trade=$row["trade"];
$check_pic = "members/$id/image01.jpg";
$default_pic = "members/0/image02.jpg";
if (file_exists($check_pic)) {
$user_pic = "<img src="$check_pic" width="150px"; height="150px";  />";     } else {
$user_pic = "<img src="$default_pic" width="150px" height="150px";  />"; // forces    default picture to be 120px wide and no more}
$name=$firstname.' '.$lastname; 
$outputList .= '<div id="content" class="clearfix"><section id="left"><div       id="userStats class="clearfix"><div class="pic">
<a href="profile.php?id=' . $id . '" target="_self">' . $user_pic . '</a></div><div   class="data">
<h1><a href="profile.php?id=' . $id . '" target="_self">' . $name. '</a></h1>
<h3>From: ' . $country .'<h3>
<h3>Trade: ' . $trade .'<h3>
<h3>Username: ' . $username .'</h3>
<div class="sep"></div>
<ul class="numbers clearfix">
<li><a href="profile.php?id=' . $id . '" target="_self">Full Profile</a></li>
<li><a href="info.php?id=' . $id . '" target="_self">About</a></li>
<li><a href="blab.php?id=' . $id . '" target="_self">WhiteBoard</a></li>
</ul></div></div></section></div><br>';} 
```

此代码在 localhost 中有效，但在已部署的服务器中无效。

这是用户登录后被引导的页面。服务器上的错误是：Parse error: syntax error, unexpected T_VARIABLE in /home/u576778821/public_html/interact/index.php on line 119

119 线在哪里

```
 $user_pic = "<img src="$check_pic" width="150px"; height="150px";  />"; 
```

现在我正在使用免费的 azuka.biz 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:03:35.357

试试这个，

```
$user_pic = "<img src='".$check_pic."' width="150px" height="150px"  />"; 
```

或者

```
$user_pic = '<img src="'.$check_pic.'" width="150px" height="150px" >'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:04:04.087

观看应该是的报价

```
$user_pic = "<img src=\"$check_pic\" width=\"150px\" height=\"150px\"  />"; 
```

或者

```
$user_pic = "<img src='".$check_pic."' width='150px' height='150px'  />"; 
```

编辑，

**注意宽度和高度后的分号。他们不应该在那里**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:03:50.093

将您的第 119 行转换为：

```
$user_pic = "<img src='".$check_pic."' width='150px' height='150px' />"; 
```

$check_pic 前后的点 (.) 表示您执行字符串连接。

# c# - 使用 LINQ2XML 计数记录

> ID：12635121
> 
> 赞同：-2
> 
> 时间：2012-09-28T07:00:29.097
> 
> 标签：c#, xml, razor, linq-to-xml

我需要分别获取`inbound`交易和`outbound`交易的计数。我已经尝试了我所知道的一切，但没有任何效果。这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<records>
    <inbound>
        <transaction>
            <customerID>0002</customerID>
            <customerName>bob</customerName>
        </transaction>
        <transaction>
            <customerID>0003</customerID>
            <customerName>harry</customerName>
        </transaction>
            .
            .
            .
        <transaction>
            <customerID>0250</customerID>
            <customerName>joe</customerName>
        </transaction>
    </inbound>
    <outbound>
        <transaction>
            <customerID>0002</customerID>
            <customerName>bob</customerName>
        </transaction>
        <transaction>
            <customerID>0003</customerID>
            <customerName>harry</customerName>
        </transaction>
            .
            .
            .
        <transaction>
            <customerID>0175</customerID>
            <customerName>frank</customerName>
        </transaction>
    </outbound>
</records> 
```

这需要在 C# 和 LINQ 中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:05:26.240

以下是获取入站事务数的方法：

```
var xdoc = XDocument.Parse(xml);
var c = xdoc.Descendants("inbound").Descendants("transaction").Count(); 
```

# android - 如何在 webview 中获取页面状态

> ID：12635129
> 
> 赞同：0
> 
> 时间：2012-09-28T07:00:55.390
> 
> 标签：android, webview, status

在我的 Android 应用程序中，我需要使用从我的服务器获取的 URL 在 WebView 中显示一个网页。但是，它有时会显示 OK，但有时会显示错误页面（.NET 样式的黄页，说明“/Web 应用程序中的服务器错误”）。

我想在我的应用程序中做一些事情来识别该错误并重定向到另一个页面，但我如何识别错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:51:30.140

请参阅[如何从 WebView 中检索 HTML 内容（作为字符串）](https://stackoverflow.com/questions/5264162/how-to-retrieve-html-content-from-webview-as-a-string)

检查[HttpResponse 代码](http://cdrussell.blogspot.com/2011/12/android-get-body-of-http-response-as.html)，看看是否返回错误。

注意注释以避免消耗双倍所需的带宽，如果没有错误，请发出 HttpRequest 并将其加载到 WebView 中。

# html - 为什么我的缓存清单仍然不起作用？

> ID：12635132
> 
> 赞同：0
> 
> 时间：2012-09-28T07:01:09.103
> 
> 标签：html, offline, html5-appcache, application-cache

我在 chorme 的控制台中观看，没有任何输出，也没有应用程序缓存，为什么会发生这种情况？谢谢

![我的服务器支持它](../Images/bfeb1d4c3f2538c5a2a18bd40536fc02.png)

这是我的html：

```
<html manifest="http://www.test.com/test.manifest"> 
```

这是 test.manifest 文件的内容：

```
CACHE MANIFEST       
# VERSION v1.0.120927-1430
CACHE:
http://www.test.info/js/smiles.js
# pic
http://www.test.info/imgs/user_32.gif
http://www.test.info/imgs/user_48.gif
http://www.test.info/smiles/christree.gif
http://www.test.info/smiles/horse2.gif
NETWORK: 
* 
```

这是我打印日志的 js 代码：

```
function logEvent(a) {
    console.log(a.type);
    if (a.type == "updateready" || a.type == "cached") {
        applicationCache.swapCache();
    }
    if (a.lengthComputable) {
        console.log("total:" + a.total + "  loaded:" + a.loaded);
    }
    if (a.type == "error") {
        applicationCache.update();
    }
}
if(window.applicationCache){
    window.applicationCache.addEventListener("checking", logEvent, false);
    window.applicationCache.addEventListener("noupdate", logEvent, false);
    window.applicationCache.addEventListener("progress", logEvent, false);
    window.applicationCache.addEventListener("downloading", logEvent, false);
    window.applicationCache.addEventListener("cached", logEvent, false);
    window.applicationCache.addEventListener("updateready", logEvent, false);
    window.applicationCache.addEventListener("obsolete", logEvent, false);
    window.applicationCache.addEventListener("error", logEvent, false);
} 
```

我在 chorme 的控制台中观看，没有任何输出，也没有应用程序缓存，为什么会发生这种情况？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:32:10.437

您的屏幕截图显示`www.mmbang.com`，但您的 HTML 和清单涉及`www.test.com`。如果那是您的原始配置，这将永远无法工作，因为清单必须与网站具有相同的来源。

# android - 可在 Facebook 上分享的第三方 Android 应用

> ID：12635133
> 
> 赞同：1
> 
> 时间：2012-09-28T07:01:12.830
> 
> 标签：android, facebook

我正在开发（实际上已经完成，只是缺少 Facebook 和 Hyves 的共享）Android 移动应用程序，它应该与 Face 和 Hyves 共享图像。

There are couple of problems that I do not understand, so I need (urgent) help.

My idea was to save user/pass on device, and to check during the input if these details are correct. Then I wanted to somehow use API's to share image on the wall, preferably without any additional apps created, just share photo like you would share it from gallery.

Now I'm reading Facebook Developers guide, and it advises to create facebook app with domanin / e-mail, but this is not my app and I do not have authority to create anything in the name of third party.

So, what is the proper way to share photo to Social Networks, without creating "apps" and getting apps ID and stuff.

It seems that I can't find that kind of info on FB Developers page, and I'm afraid how will I get proper information for hyves (Dutch social network, and I do not speek dutch).

# java - Java - Linked List with Decisions

> ID：12635136
> 
> 赞同：0
> 
> 时间：2012-09-28T07:01:20.143
> 
> 标签：java, data-structures, linked-list

I'm trying to find a data-structure to help me model this scenario...

I have a set of expressions that have two types: 1\. Expressions that have a calculations that should be executed and return a true or false outcome 2\. Expressions that print out information and have no return value The expressions have a sequential order that depends on the outcome of their calculation.

The expressions are stored in the database and at runtime will be loaded into a data structure which will need to retain the order of the expressions and the decisions that should be followed depending on an expression's outcome.

Let me illustrate this with a simple example where there are 4 expressions and the first two are rules that when carried out have a true or false return value but the final 2 are just informational so after being executed the flow would continue to the next expression.

```
Expression 1: "5+5=10" If True then go to Expression 2 If False then go to Expression 4 
Expression 2: "6+1=7" If True then go to Expression 4 If False then go to Expression 3
Expression 3: "print hello" 
Expression 4: "print goodbye" 
```

My immediate thought is that the data structure could be some sort of linked list that would need to have not only a next() method to point to the next expression but also true() and false() methods to point to the appropriate nodes in the case that the expression has a return value.

Is there any established way to model this type of relationship?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:05:44.617

您可以简单地使用二叉树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:13:26.443

伪代码：

```
LinkedList <Map <Integer><Decision>> 
```

在哪里：

`Integer`- 决定编号

`Decision`- 你的功能

您可以定义`Logic`结构，例如：

```
input  1 2 3 4 5 6
true   2 
false  4 
```

这意味着 if `1 ret true`then `ret 2`else ret`4`

# android - 为什么我们必须重建应用程序才能看到设备的一些变化？

> ID：12635140
> 
> 赞同：1
> 
> 时间：2012-09-28T07:01:43.500
> 
> 标签：android, apk, titanium-mobile

但是对于模拟器我们不需要重新构建，它会在不重新构建应用程序的情况下反映更改。只需转到最后一页，然后来到更改的页面，您就可以看到所做的更改。我的问题是模拟器和设备使用不同的 apk 文件吗？如果不是，那么为什么我们需要重建应用程序以部署在设备中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:24:19.767

这是因为 FastDev。结合 Android 模拟器 Titanium 为 Android 开发也会启动一个 FastDev 服务器。

### 什么是 FastDev？

好吧，简而言之，FastDev 允许动态替换应用程序的资源。如果您更改 *.js-File 并单击运行，则用于模拟器的文件将简单地替换为您更改的文件。这是可能的，因为在模拟器上钛被及时解释。

> Fastdev 服务器使 Titanium 开发人员能够编写 Android 应用程序来快速测试并查看他们对代码所做的更改。应用程序不会在更改后重新部署应用程序，而是从 Fastdev 服务器请求资源下所需的任何内容。换句话说，当 Fastdev 正在运行并且您的应用程序请求 app.js（或资源下的任何内容）时，您的开发机器上的最新版本的 app.js 将提供给应用程序 - 不需要完整构建- 和 - 发布过程。
> 
> 目前，Fastdev 仅支持 Android Emulator，但在即将发布的版本中也将支持设备。

不幸的是，FastDev 直到今天还不能用于设备。

详细信息请访问[http://docs.appcelerator.com/titanium/latest/#!/guide/Fastdev_Reference_for_Android](http://docs.appcelerator.com/titanium/latest/#!/guide/Fastdev_Reference_for_Android)

# javascript - evt = (evt) 的含义？evt：window.event

> ID：12635142
> 
> 赞同：3
> 
> 时间：2012-09-28T07:01:52.357
> 
> 标签：javascript, javascript-events

嗨，这个 javascript 片段是什么意思。（evt）部分太令人困惑了。evt 不是布尔值。这个怎么运作？

```
function checkIt(evt) {
        evt = (evt) ? evt : window.event
        var charCode = (evt.which) ? evt.which : evt.keyCode

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T07:04:13.120

`evt = (evt) ? evt : window.event`只是[内联`if`语法](http://en.wikipedia.org/wiki/?%3a)。它等效于以下代码：

```
if (evt) {
    evt = evt;
} else {
    evt = window.event;
} 
```

如果`evt`是真的，`evt`将被单独留下。如果`evt`不是真的，它将被替换为`window.event`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:15:32.350

它适用于事件侦听器。

IE6-IE8 使用了与 W3C 标准完全不同的事件方法。

当事件触发时，W3C 标准浏览器将在回调中传递一个事件对象：

```
function keyPressed (e) { /* do stuff with e */ } 
```

在您的情况下，它是`keydown`（或其他使用`keyCode`）。
IE 不支持这一点，而是`window.event`每次发生事件时都会更新它。

所以你的函数正在检查是否有一个对象被传递给它：

```
evt = (evt) ? evt : window.event;
// does `evt` exist, and is it anything but '', 0, false, null, undefined, NaN
// yes: evt = itself (W3C)
// no: evt = window.event (IE6-8) 
```

然后代码询问是否`evt.which`存在，试图找出从哪里获取 keyCode。 在 和 的情况下，`evt.keyCode`您应该在现代浏览器中使用它。`keydown``keyup`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:04:48.287

像这样的赋值表达式是*从右到左*求值的，所以这意味着：

*   如果`evt`有一个*真实*值，则将此值分配回`evt`
*   如果不是，则`window.event`无论其内容如何，​​都将值分配给`evt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T07:05:35.773

这意味着：如果`evt`参数有值，则保留该值，如果它没有值，则`window.event`改用。

和`?`':' 符号是三元 if 运算符的一部分：

```
var w = x ? y : z; 
```

所以上面你分配`y`或`z`分配`w`取决于是否`x`被认为是一个真值或假值。

如果在`checkIt`没有传入`evt`参数的情况下调用函数，即`checkIt()`在函数内部，`evt`变量的值将`undefined`被视为`false`在 if 条件内。

# mysql - what is the use of the pool option in database.yml

> ID：12635152
> 
> 赞同：41
> 
> 时间：2012-09-28T07:02:32.810
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, connection-pooling

Most widely used options in database.yml are of following :

```
adapter
encoding
database
pool
username
password
socket
host
port
timeout 
```

I know the use of the most of the above but pool. So i want to know what is the use of the pool option in database.yml or there is any other parameter which we need to set for the application having very heavy traffic.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-28T15:48:24.613

它设置每个 ruby​​ 进程可能的连接数量。因此，如果您正在线程化您的 Rails 应用程序，或者您过度使用事务。此处的限制取决于您的设置。考虑一下：

*   50 个红宝石工艺
*   每个有 100 个线程
*   一个设置为 1000 个同时连接的 mysql

因此，每个进程在给定时间最多可以打开 20 个连接（50 * 20 == 1000）是有道理的。因此，您可以将该`pool`值设置为 20 或更少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-06T21:39:02.240

对于其他正在寻找这个问题的答案的人来说，基本的想法似乎是一个数据库只能支持这么多的同时连接，所以需要一种方法来限制打开的连接。该`pool`属性指定在给定时间可以打开的最大连接数。

有关这方面的更多信息，请参阅[http://guides.rubyonrails.org/configuring.html#database-pooling](http://guides.rubyonrails.org/configuring.html#database-pooling)。该指南没有明确说池是应用程序的总连接数，但这是我阅读后的感觉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:06:52.107

`pool`是连接池大小的配置，默认为5。

[http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)

# qemu - qemu-dm processes info on Dom0 (xen server)

> ID：12635153
> 
> 赞同：1
> 
> 时间：2012-09-28T07:02:33.390
> 
> 标签：qemu, xen

On my Dom0, I have some guests running. For each of them, I can see a qemu process:

```
# ps -eaf | grep qemu
root      8936  3879  0 Sep13 ?        00:12:42 /usr/lib/xen/bin/qemu-dm -d 419 -serial pty -domain-name my_pv_huest -videoram 4 -vnc 0.0.0.0:0 -vncunused -M xenpv
root     18117  3879  0 Sep18 ?        00:10:00 /usr/lib/xen/bin/qemu-dm -d 430 -domain-name my_pvhvm_guest -videoram 4 -k en-us -vnc 0.0.0.0:0 -vncunused -vcpus 2 -vcpu_avail 0x3 -boot c -serial pty -acpi -net none -M xenfv
root     31709  3879  0 Sep18 ?        00:09:37 /usr/lib/xen/bin/qemu-dm -d 429 -domain-name my_hvm_guest -videoram 4 -k en-us -vnc 0.0.0.0:0 -vncunused -vcpus 1 -vcpu_avail 0x1 -boot c -serial pty -acpi -net nic,vlan=1,macaddr=00:16:3e:40:94:4f,model=rtl8139 -net tap,vlan=1,ifname=tap429.0,bridge=br0 -M xenfv 
```

* * *

The first, second and third lines of output correspond to pvm, pvhvm and hvm guests, respectively.

These are my questions:

1.  As far as I know , use of `qemu-dm` tool is only for the access of network and disk for HVM guests as it will not have front end drivers. Then why PVM runs as qemu-dm? Or is the process just named as qemu-dm and not related to what qemu-dm really does?
2.  From where can I get more info about these running processes, at least how to understand the detailed meaning of the process information and options?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T18:48:01.577

QEMU is used for surprising things e.g. running VNC server, providing I/O when you use files for VM filesystems. When you don't run any guest VMs you will still have QEMU for dom0\.

# java - 无法加载 JavaFX 运行时？

> ID：12635161
> 
> 赞同：1
> 
> 时间：2012-09-28T07:03:08.587
> 
> 标签：java, javafx-2, software-distribution

我使用 netbeans 7.2 使用 JavaFX 制作了示例应用程序。当我从 netbeans 运行应用程序时，它工作正常。现在我想将此应用程序作为独立应用程序分发。

所以我试图从由netbeans本身在dist文件夹中创建的可执行jar文件打开这个应用程序。但我收到错误：**`Unable to Load JavaFX runtime`**

![在此处输入图像描述](../Images/17bb1a9bf961b9fa62d5da80544dd9a7.png)

如何解决这个问题？？

我还想知道将此应用程序作为桌面独立应用程序分发的最佳方式？意味着我想知道最终的分发包是可执行的 jar 文件吗？

对于这个最终包（*针对上述问题建议*） ，应用程序在 Windows 环境中运行是否有任何**先决条件？**:***这很重要，因为我们的最终环境非常有限。它甚至没有安装java。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:30:25.617

我不知道为什么启动 NetBeans 创建的可执行 jar 对您不起作用。

您可以通过将应用程序打包为 [自包含应用](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)程序来解决此问题。这样的包在您的应用程序中包含 java 和 javafx 运行时，因此您无需担心将这些东西分发和安装到您的客户端。无论如何，听起来这样的包非常适合您的应用程序。

> 自包含应用程序是 JavaFX 应用程序的包装器，使其独立于用户可能安装的内容。

# c# - 如何将从套接字接收的字节数组转换为 C# 结构

> ID：12635170
> 
> 赞同：4
> 
> 时间：2012-09-28T07:03:54.407
> 
> 标签：c#, .net, delphi

我必须开发一个服务（C#），它通过 TCP 套接字从网络设备读取数据并将其转换为 C# 结构。

我基于现有的旧 Delphi 应用程序，它正在做所有这些事情，我必须在 C# 中迁移逻辑。

已编辑：我从原始数据结构的 C 源获得了快照：

```
struct _RequestMsgStruct
{
    UCHAR           request_ver; //In DELPHI it is represented as Byte
    USHORT          mac_addr[3];    /* MAC Address */
    UINT            product_type; //In DELPHI - Cardinal
    UCHAR           supply_type; //In DELPHI - Byte
    short           reserved0; //In DELPHI - SmallInt
    UCHAR           oper_ver[4]; //In DELPHI - CARDINAL !!!
    USHORT          brd_id; //In DELPHI - WORD
    unsigned short  exp_id1; //In DELPHI - WORD

    //In DELPHI - string[15]; //Array [0..15] of char;
    UCHAR           serial_no[16]; /* Serial Number. 16th char have to be NULL */ 
    UCHAR           _name[32]; /* Name */ //Length of payload may vary //In DELPHI - string[31]

    float           data_avg; //In DELPHI - Single
    ULONG           key[5]; //In DELPHI - array [0..19] of Byte
}__attribute__ ((packed)); 
```

有超过 200 个不同类型字段的 Delphi Packed 记录......它看起来大致如下：

```
 TREC_DATA = packed record
      ID            : Byte;
      MAC_ADDRESS   : array [0..5] of Byte;
      fieldCard     : cardinal;
      fieldSI       : SmallInt; 
      fieldW        : WORD;
      SERIAL_NUMBER : string[15]; //Array [0..15] of char;
      fieldSingle   : Single;
      fieldArrOfB   : array [0..19] of Byte;
    end; 
```

要将字节数组移动到 Delphi 中的结构，有以下代码：

```
Move(inBytesArr[StartIdx], DelphiStruct, aMsgSize) 
```

要转换字符串文件（例如 SERIAL_NUMBER），还有这样的代码：

```
var
  pc: Pchar;
...
pc := @inBytesArr[StartIdx + SerialN_Pos_Idx];
DelphiStruct.SERIAL_NUMBER := pc; 
```

我第一次处理这种转换，我不知道从哪里开始：

*   如何将此结构转换为c#？-- 我应该使用`LayoutKind.Sequential`or `LayoutKind.Explicit`, with or wiyhout`[FieldOffset(N)]`属性吗？-- 我必须如何在目标 c# 结构中声明字节数组：作为`fixed`缓冲区还是使用`[MarshalAs(UnmanagedType.ByValArray...)]`属性？

*   将输入字节数组编组为最终 C# 结构的更好方法是：使用`Marshal.PtrToStructure`或 GCHandle.Alloc(bytes, GCHandleType.Pinned) + `AddrOfPinnedObject`？

请至少帮助我了解我需要从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:18:46.067

默认情况下，Delphi 的打包记录按单字节边界对齐字段。
因此，你应该使用这样的东西：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
struct TREC_DATA
{
      public byte ID;
      [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)]
      public byte[] MAC_ADDRESS;
      public uint fieldCard;
      public short fieldSI;
      public ushort fieldW;
      [MarshalAs(UnmanagedType.ByValArray, SizeConst = 16)]
      public byte[] SERIAL_NUMBER;
      public float fieldSingle;
      [MarshalAs(UnmanagedType.ByValArray, SizeConst = 10)]
      public byte[] fieldArrOfB;    
} 
```

~~我唯一不确定（如果没有 Deplhi 现在无法测试）是 SERIAL_NUMBER 字段。~~

更新后：在原始版本中，SERIAL_NUMBER 只是一个以空字符结尾的字符串。

# .net - 我可以在 webconfig 中设置应用程序池吗？

> ID：12635177
> 
> 赞同：4
> 
> 时间：2012-09-28T07:04:28.690
> 
> 标签：.net, web-applications, iis-7, application-pool

我使用 IIS 7.0，我想知道如何在 Web 配置文件中设置应用程序池。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T07:22:33.097

我不认为这是可能的。为您的应用程序选择应用程序池是一个“设置”问题，而不是“配置”问题。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-12T11:41:53.853

`Pooling=False;`在您的连接字符串中使用以禁用应用程序中的池。如果你想配置它，你可以添加这样的东西`Max pool size=200; Min poolsize=0`。

[有关池的更多信息，您可以在此处找到...](http://beyondrelational.com/modules/2/blogs/61/posts/11202/connection-pooling-in-adonet.aspx)

# matlab - 3d 矩阵中周围单元格的索引和值

> ID：12635183
> 
> 赞同：5
> 
> 时间：2012-09-28T07:04:48.783
> 
> 标签：matlab, matrix

我想返回 3d 矩阵中一个单元格周围的 8 个单元格的索引和值。

```
mat = rand(5,5,5);

% Cell of interest
pos = [3 3 3]
pos_val = mat(pos(1), pos(2), pos(3))

% Surrounding cells
surrounding_pos = [pos(1)-1:pos(1)+1; pos(2)-1:pos(2)+1; pos(2)-1:pos(2)+1]
surrounding_val = mat(surrounding_pos(1,:), surrounding_pos(2,:), surrounding_pos(3,:)) 
```

这适用于矩阵中心的值，但如果 pos 在边缘，它会中断。（例如，如果 pos 是`[3,4,5]`，则around_pos 将包括`[3,4,6]`，这是超出范围的）

显然我可以删除around_pos 值<0 或>size(mat)，但这似乎不是一个非常好的MATLAB 方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T07:37:56.250

[与此处](https://stackoverflow.com/questions/12419772/finding-neighborhood-in-a-specific-location/12419908#12419908)讨论的解决方案相同，但扩展到多个（任何）维度：

```
mat = randi(10,5,5,5);
siz = size(mat );
N = numel(siz); % number of dimensions
M = 1; % surrounding region size

pos = [3 3 3];
pos_val = mat(pos(1), pos(2), pos(3));

surrounding_pos = cell(N,1);
for ii=1:N
    surrounding_pos{ii} = max(1,pos(ii)-M):min(siz(ii),pos(ii)+M);
end
surrounding_val2 = mat(surrounding_pos{:}); 
```

重要的部分是最后四行，它避免了每个维度的 c/p 最大值，最小值。

或者，如果您喜欢短代码，则循环更改为`arrayfun`：

```
surrounding_pos = arrayfun(@(ii) max(1,pos(ii)-M):min(siz(ii),pos(ii)+M), 1:N,'uni',false);
surrounding_val2 = mat(surrounding_pos{:}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T07:10:41.333

这是一个整理后的版本。干杯。

```
mat = rand(5,5,5);
N = size(mat)
if length(N) < 3 || length(N) > 3; error('Input must be 3 dimensional'); end;
pos = [1 3 5]
surrounding_val = mat(max(pos(1)-1, 1):min(pos(1)+1, N(1)), max(pos(2)-1, 1):min(pos(2)+1, N(2)), max(pos(3)-1, 1):min(pos(3)+1, N(3))) 
```

**编辑**：添加了错误陷阱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T14:54:10.010

我发现这篇文章是因为我需要获取矩阵中选定点的周围索引。似乎这里的答案正在返回一个周围值的矩阵，但问题也对周围的索引感兴趣。我可以使用“try/catch”语句来做到这一点，我以前不知道 MATLAB 中存在这种语句。对于二维矩阵，Z：

```
%Select a node in the matrix
Current = Start_Node;

%Grab its x, y, values (these feel reversed for me...)
C_x = rem(Start_Node, length(Z));
if C_x ==0
    C_x =length(Z);
end
C_y = ceil(Start_Node/length(Z));
C_C = [C_x, C_y];

%Grab the node's surrounding nodes.
try
    TRY = Z(C_x - 1, C_y);
    Top = Current -1;
catch
    Top = Inf;
end
try
    TRY = Z(C_x + 1, C_y);
    Bottom = Current +1;
catch
    Bottom = Inf;
end
try
    TRY = Z(C_x, C_y + 1);
    Right = Current + length(Z);
catch
    Right = Inf;
end
try
    TRY = Z(C_x, C_y - 1);
    Left = Current - length(Z);
catch
    Left = Inf;
end

surround = [Top, Bottom, Left, Right];
m = numel(surround == inf);
k = 1;
%Eliminate infinites.

surround(surround==inf) =[]; 
```

我希望有人发现这些信息是相关的。

# c++ - 我们在 C++ 中有闭包吗？

> ID：12635184
> 
> 赞同：60
> 
> 时间：2012-09-28T07:05:02.543
> 
> 标签：c++, closures, lexical-closures

我正在阅读有关网络关闭的信息。我想知道 C++ 是否有内置的闭包工具，或者是否有任何方法可以在 C++ 中实现闭包？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-28T07:08:24.700

最新的 C++ 标准[C++11](http://en.wikipedia.org/wiki/C++11)具有闭包。

[http://en.wikipedia.org/wiki/C%2B%2B11#Lambda_functions_and_expressions](http://en.wikipedia.org/wiki/C%2B%2B11#Lambda_functions_and_expressions)

[http://www.cprogramming.com/c++11/c++11-lambda-closures.html](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-19T09:18:55.523

如果您将闭包理解为对具有嵌入式、持久性、隐藏和不可分离上下文（内存、状态）的函数的引用，那么是的：

```
class add_offset {
private:
    int offset;
public:
    add_offset(int _offset) : offset(_offset) {}
    int operator () (int x) { return x + offset; }
}

// make a closure
add_offset my_add_3_closure(3);

// use closure
int x = 4;
int y = my_add_3_closure(x);
std::cout << y << std::endl; 
```

下一个修改它的状态：

```
class summer
{
private:
    int sum;
public:
    summer() : sum(0) {}
    int operator () (int x) { return sum += x; }
}

// make a closure
summer adder;
// use closure
adder(3);
adder(4);
std::cout << adder(0) << std::endl; 
```

不能从外部引用（访问）内部状态。

根据你的定义，一个闭包可以包含对多个函数的引用，或者两个闭包可以共享相同的上下文，即两个函数可以共享相同的持久状态。

闭包意味着不包含自由变量——它与只有私有属性和只有公共方法的类相当。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-11-11T14:39:29.877

是的，这显示了如何在不使用仿函数的情况下实现具有状态的函数。

```
#include <iostream>
#include <functional>

std::function<int()> make_my_closure(int x){
    return [x]() mutable {   
        ++x;
        return x;   
    };
}

int main()
{
    auto my_f = make_my_closure(10);

    std::cout << my_f() << std::endl; // 11
    std::cout << my_f() << std::endl; // 12
    std::cout << my_f() << std::endl; // 13

     auto my_f1 = make_my_closure(1);

    std::cout << my_f1() << std::endl; // 2
    std::cout << my_f1() << std::endl; // 3
    std::cout << my_f1() << std::endl; // 4

    std::cout << my_f() << std::endl; // 14
} 
```

我忘记了引入未定义行为的 mutable 关键字（clang 版本正在返回垃圾值）。实施后，关闭工作正常（在 GCC 和 clang 上）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-28T07:29:54.833

我怀疑这取决于你所说的关闭是什么意思。我一直使用的含义意味着某种垃圾收集（尽管我认为它可以使用引用计数来实现）；与其他语言中的 lambdas 捕获引用并使被引用对象保持活动状态不同，C++ lambdas 要么捕获一个值，要么所引用的对象 *不*保持活动状态（并且引用很容易悬空）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-28T07:10:29.407

是的，C++11 有名为[lambdas](http://en.cppreference.com/w/cpp/language/lambda)的闭包。

在 C++03 中没有对 lambdas 的内置支持，但是有[Boost.Lambda](http://www.boost.org/doc/libs/release/libs/lambda/)实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-12T16:02:18.780

严格来讲。“关闭”只是 LISP。使用 Let 返回 lambda 作为最后一个命令。'让拉姆达'。这仅适用于 LISP，因为具有词法作用域的无限范围。在知道之前，我不知道有任何其他语言本机支持这一点。

```
(defun my-closure ()
   (let ((cnt 0))
      (lambda () 
         (format t "called : ~A times" (incf cnt))))) 
```

# javascript - 如何从javascript onkeydown中排除组件

> ID：12635188
> 
> 赞同：0
> 
> 时间：2012-09-28T07:05:12.487
> 
> 标签：javascript, html

有可能吗？

在我的页面中，我得到了

`<body onload="debug()" id="content" onkeydown="checkKey()" >`

和

```
function checkKey() {
    if ((window.event.keyCode > 9) || (window.event.keyCode < 9)) {
        document.actionForm.saveStatus.value = "Not saved";
    }
} 
```

但我不希望当用户只是转到页面并使用搜索表单提交搜索时发生这种情况，除非首先保存会话数据，所以我想从搜索框中排除 checkkey() 的事件：

```
<input onkeypress="javascript:searchWithEnter('Oversikt','fastsearch')" title="Nummerformat:

PCT/SE2009/123456
PCTSE2009123456
PSE09123456

ITS/SE09/12345
ITSSE0912345
ISE0912345

1234567-8
12345678" type="text" size="40" name="fastsearch">
    <input type="button" value="Sök" onclick="javascript:doSubmitFastSearch('Oversikt','fastsearch')"> 
```

我是否应该从 body 标记中删除 onkeypress 并将 checkkey() 设置为从单个组件中调用？你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:17:45.653

您可以使用[`event.stopPropagation`](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)来阻止事件冒泡到`<body/>`.

```
var stop = function(e) {
  e.stopPropagation();
};
var $el = document.getElementsByName("fastsearch")[0];
$el.onkeydown = stop; 
```

但是，除非绝对必要，否则您应该考虑不要将如此鲁莽的事件绑定到`<body/>`.

# javascript - CKEditor 外部文件浏览器

> ID：12635191
> 
> 赞同：0
> 
> 时间：2012-09-28T07:05:32.280
> 
> 标签：javascript, ckeditor, file-browser

我正在尝试将文件 url 从外部文件浏览器返回到 CKEditor，但我收到错误消息：

```
[09:02:18.038] TypeError: A._.filebrowserSe is undefined @ http://www.xxx.pl/yyy/js/ckeditor/ckeditor.js:56 
```

我正在使用这段代码：

```
window.parent.opener.CKEDITOR.tools.callFunction(number,url); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:40:02.753

这是一个答案：[如何将自定义文件浏览器/上传器与 CKEditor 集成？](https://stackoverflow.com/questions/1498628/how-can-you-integrate-a-custom-file-browser-uploader-with-ckeditor)

您应该接收名为 CKEditorFuncNum 的 GET 参数。

我在 php 中以这种方式使用它：

```
window.parent.CKEDITOR.tools.callFunction(<?=intval($_REQUEST['CKEditorFuncNum'])?>, url, message); 
```

# php - 在php中使用mysql从两个表中删除

> ID：12635193
> 
> 赞同：0
> 
> 时间：2012-09-28T07:05:36.920
> 
> 标签：php, mysql

我有两个表类别和子类别我正在尝试使用`mysql`查询从该表中删除记录

查询是=

```
$sql="Delete t1, t2 From category as t1 
       INNER JOIN  subcategory as t2 on t1.c_id = t2.c_id
       WHERE t1.c_id='$del_c_id' "; 
```

此查询仅从 category(t1) 中删除其主键用于 subcategory(t2) 表的行。

不从子类别（t2）中未使用主键的类别（t1）中删除行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:10:18.740

在 mysql 中尝试[CASCADE选项。](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)如果您删除类别，子类别将被自动删除。您需要使用 InnoDB 存储引擎才能使用此功能。

[这](https://stackoverflow.com/questions/5342852/how-to-use-delete-cascade-on-mysql-myisam-storage-engine)是公认的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:12:15.660

您需要使用 LEFT JOIN 而不是 INNER JOIN。根据定义，LEFT JOIN 返回 t1 中的所有结果，即使它们在 t2 中没有匹配项。

有关连接类型的更多信息，请参阅此链接：http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# sql-server-2005 - 推进，有带空格的字段

> ID：12635196
> 
> 赞同：1
> 
> 时间：2012-09-28T07:05:46.980
> 
> 标签：sql-server-2005, propel

在 schema.xml 中定义的字段名称中是否可以有空格？

*设计数据库的闪亮火花*，使用了像'POST CODE'和'CURRENT'这样的字段名称

有没有解决的办法？还是我被困住了？

> 该数据库是一个现有的 MSSQL 2005 数据库，连接着*未知* 数量的系统。所以无法更改。
> 
> 我正在使用反向命令生成 schema.xml
> 
> ```
> propel-gen . reverse 
> ```

推进 1.6.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:24:15.567

我发现的唯一解决方法是删除 schema.xml 中的空格，然后手动更改每个 Base*Peer 文件。

例如改变

```
const POSTCODE = 'Customer.POSTCODE';
const POSTCODE = 'Customer.CURRENT'; 
```

到

```
const POSTCODE = 'Customer.[POST CODE]';
const POSTCODE = 'Customer.[CURRENT]'; 
```

## 更新：

我认为我只需要在`CustomerPeer.php`not中添加 2 行`BaseCustomerPeer.php`，这样下次构建推进器时我不需要记住它。

# forms - 单击“登录”按钮时无法通过 sencha 应用程序登录 Web 应用程序

> ID：12635199
> 
> 赞同：0
> 
> 时间：2012-09-28T07:06:13.777
> 
> 标签：forms, model-view-controller, mobile, login, sencha-touch-2

这是我的看法

```
Ext.define("TimeSheet.view.Tracktime", {
extend: "Ext.form.Panel",
requires: ["Ext.form.FieldSet", "Ext.field.Text", "Ext.Button","Ext.Label", "Ext.field.Email", "Ext.field.Password","Ext.MessageBox", "Ext.Img"],
alias: "widget.tracktimeview",

config:{
    id: 'entrypage',
    fullscreen: true,
    url: 'timesheet.ajatus.in/check.php',
    //standardSubmit: false,
    method: 'GET',
    layout: {
        centered: true,
    },
    defaults: {
        styleHtmlContent: true,
        //cls: 'backfield'
    },

    cls: 'panelBackground',
    items: [{
        xtype: 'fieldset',
        id: 'loginfield',
        autoComplete: true,
        scrollable: false,
        cls: 'formfield',
        items: [{
                xtype: 'image',
                src: 'tracktime.png',
                height: '60px',
                cls: 'track'

            },
            {
                xtype: 'textfield',
                name : 'name',
                label: 'tracktime/'

            },
            {
                xtype: 'textfield',
                name : 'uname',
                allowBlank:false, 
                placeHolder: "User name"
            },
            {
                xtype: 'passwordfield',
                name : 'password',
                allowBlank:false, 
                placeHolder: 'Password'
            }
        ]
    },{
        xtype: 'button',
        id: 'loginbtn',
        cls: 'enter',
        text: 'Sign in',
        ui: 'confirm',
        height: "50px",

     }],

    control: ({

        '#loginbtn': {
            tap: function() {

            }
        }
    }),
},}); 
```

**这是控制器**

```
Ext.define("TimeSheet.controller.Track", {
extend: "Ext.app.Controller",

config: {
    refs: {
        trackTimeView: "tracktimeview",
        selector: '#tracktimeview',

        addentryView: "addentryview",
        selector: '#addentryview',

        entryPage: '#entrypage',

        loginBtn: '#loginbtn'

    },
    control:{
        loginBtn: {
            tap: "onLoginBtn"
        },

        onloginbtn: {
            tap: function(btn) {
                var form = Ext.getCmp('entry');
                //var values = entry.getValues();
                entry.submit({
                    method:'POST',
                    url: 'xxxxxxxx/check.php',
                    params: values,

                    success: function(response){
                      var text = response.responseText;
                      Ext.Msg.alert('Success', text);
                 },

                    failure : function(response) {
                       Ext.Msg.alert('Error','Error while submitting the form');
                       console.log(response.responseText);
                 }
                });
            }
        },

    }
},

onLoginBtn: function() {
    console.log("onLoginBtn");
    var values = TimeSheet.views.tracktimeview.entrypage.getValues();
    TryLogin(values['uname'], values['password']);
},

launch: function () {
    this.callParent(arguments);
    console.log("launch");
},
init: function () {
    this.callParent(arguments);
    console.log("init");
}}); 
```

# python-2.7 - 如何从python 2.7中的函数中提取变量

> ID：12635200
> 
> 赞同：0
> 
> 时间：2012-09-28T07:06:14.120
> 
> 标签：python-2.7, user-defined-functions

我在 Python2.7.3 中编写了一些代码，并且在某些时候我希望在函数中生成的某个变量被提取并稍后在我的程序中使用。我已经为变量分配了*全局*定义，但仍然没有运气。这是代码：

```
def target_fileopen():
     dirname = ' ' 
     dlg = wx.FileDialog(None, "Select file", dirname, "", "*.txt", wx.OPEN)
     if dlg.ShowModal() == wx.ID_OK:
         filename = dlg.GetFilename()
         dirname = dlg.GetDirectory()
         coordfile = open(os.path.join(dirname, filename), 'r')
         dlg.Destroy()

     global path
     path = str(dirname + "\\" + filename)
     return target_calc(coordfile)
     return(path)
print(path) 
```

我得到的错误*是未定义全局名称“路径”*

这只是一个示例，我并不想在现实中打印路径，只是希望将其作为静态文本放置在应用程序的 GUI 部分中。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:18:30.267

在我的电脑上没问题。我可以访问函数中定义的全局变量。在访问变量之前调用方法吗？

# java - 如何为 JAXB 编组和 XML 处理构建 Spring 代码

> ID：12635203
> 
> 赞同：1
> 
> 时间：2012-09-28T07:06:22.013
> 
> 标签：java, xml, spring, jaxb

**问题**

我是 Java 和 spring 的新手，我想知道如何构造从 XML 编组不同对象然后处理它们的代码。我正在将一些代码 JAVA 代码转换为使用 spring 之前的代码。我知道我处理这个问题的方式可能是错误的，但是如果有人可以提供一些关于如何重组事物的“Spring 方式”的建议，这将有很大帮助。我已经阅读了很多 Spring 文档，但我发现很难将其中的内容应用到我的代码中。

**情况**

我不会发布整个代码树，因为即使是简单的示例也有很多代码（这是问题所在）。所以我只描述方法。

我有两个类 CLASSA 和 CLASSB 的 XML 和模式。我已经使用 xjc 生成了 JAVA 包装器。我有一个 JAVA 类，它是 JAXB 编组器的包装器。需要为包装器提供类名和要在构造时编组的类的包名。

```
public JaxbWrapper(String ClassName, String packageName) throws ClassNotFoundException, InstantiationException,
        IllegalAccessException, JAXBException
{

    this.packageName = packageName;

            // set the context is the expensive operation
    setJAXBContext(Class.forName(fullJaxbClassName(ClassName)).newInstance());

            // get the schma from preset schema dir
    schemaFileName = findSchema(ClassName); 
    myMarsheller = jc.createMarshaller(); 
    myMarsheller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
} 
```

然后，我为 ClassA 和 ClassB 的每个 JaxBWrapper 实例获得了一个 bean。它们几乎相同，因此只显示了 A 类的一个。

```
<bean id="jaxbParser_CLASSA" class="org.test.JAXB.JaxbWrapper"
    lazy-init="true" scope="prototype">
    <constructor-arg index="0" type="java.lang.String"
        value="CLASSA" />
    <constructor-arg index="1" type="java.lang.String"
        ref="testPackage" />
    <property name="encoding" ref="xmlEncoding" />
</bean> 
```

毫无帮助的是，我必须处理的 XML 文件一次交付*一个*文件，具有固定名称和滚动计数器（我无法更改）。所以我无法从文件名中判断文件中的对象是什么。我有一个很小的实用程序函数，可以检查我正在尝试处理的文件中的对象类型。

然后我有以下功能：

```
public static Object loadXML(String xmlFile, String fileName) throws Exception
{
    InputStream iStream = XmlUtils.openFile(xmlFile);
    String xmlObjectType = XmlUtils.getObjectTypeFromXML(xmlFile);
            // get the right JAXB processor
    JaxbWrapper jaxB = myContext.getBean("jaxbParser_" + xmlObjectType , JaxbWrapper.class);
    Object  obj = jaxB.objectFromXML(iStream, xmlObjectType , fileName);
    return obj;
} 
```

所以我正在获取对象名称并从上下文中获取正确的 bean。这意味着我可以使用诸如 Spring 的对象池之类的东西来为不同的对象保存许多 JaxbWrapper。然而，我实现这一点的方式对我来说是错误的。我不喜欢获取 JaxbWrapper bean 的 myContext.getBean("jaxbParser_" + xmlObjectType 方法。

*所以我的问题是：有没有更好的方法来构建这段代码？一些简单的指针将不胜感激。*

**额外的复杂性**

这就是目前事情变得非常难以管理的地方。一旦编组阶段完成，我就有了一个后处理阶段，其中*每*种类类型都有几个不同的后处理器。我为每一个都有 Spring bean，我使用以下方法从应用程序上下文中获取它们：

```
myContext.getBean(xmlObjectType + "_" + processorType + "_" + xmlObjectType); 
```

在哪里：

*   xmlObjectType 是一个字符串 CLASSA 或 CLASSB，通过从文件中读取对象类型来设置（如上）。
*   processorType 是从命令行设置的字符串。

要设置 proceesorType，我在应用程序启动时执行以下操作。

```
 if (line.hasOption("file"))
    {
        processorType = "FileProcessor";
    }
    if (line.hasOption("print"))
    {
        processorType = "PrintProcessor";
    } 
```

再说一次，我不认为这是做事的正确方法，但这是我目前最好的:-(。

**我想更普遍的问题是 JAXB 和 Spring 如何协同工作？在现实世界中，我有很多非常大且复杂的 CLASSA 和 CLASSB。我有这些由 xjc 生成的 java 类。当我使用 xjc 时，我必须使用 jaxb（我猜）。问题是如何在 Spring 世界中做到这一点。**

**或者我可以摆脱 JAXB 并使用弹簧组件。我需要使用其他东西来生成除 xjc 之外的所有类。但我找不到任何可以执行该任务的东西**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:36:10.467

这里发生了很多事情，我必须同意@BlaiseDoughan 你应该能够在 Spring 之外做到这一点。

尽管 Spring 确实进行了对象池 (aop) 并且对丢弃的对象进行了一些管理，但您不应该将其用于此类。基本上任何时候你`getBean`在运行时都在做，除非你知道你做错了什么。

**Spring 用于管理基于行为的单例。**

因此，您想要做的是考虑如何制作一个执行该行为的单例......在您的情况下，您想要制作一个工厂`JaxbWrapper.class`（我不是指 Spring 的特殊 bean 工厂）。

所以像：

```
public class JaxbWrapperFactory {
    Map<String, JaxbWrapper> pool = new ConcurrentHashMap(); // recommend Guava's Cache

    public JaxbWrapper create(String ClassName, String packageName) throws ClassNotFoundException, InstantiationException { }

    public Object loadXML(String xmlFile, String fileName) throws Exception {
     /// use create from above
    }

} 
```

现在在 Spring 中，您只能使用 wire `JaxbWrapperFactory`。

如果您想根据输入 xml 制定不同的策略来创建 JaxbWrapper，您可以在实现中创建某种策略接口和连线。但我认为你不需要那种复杂性。

基本上把它归结为这些提示：

*   请注意，单例和大多数 Spring 托管 bean 必须是线程安全的。
*   只为实用程序保留`public static`方法，因为这会导致邪恶的单例。
*   通常，创建对象时最好创建自己的工厂模式。
*   您可能想看看[JAXB 的工厂支持](http://jaxb.java.net/nonav/2.1/docs/api/javax/xml/bind/annotation/XmlType.html#factoryMethod%28%29)。

# spring - 独立应用程序中的 Spring JPA/Hibernate

> ID：12635205
> 
> 赞同：1
> 
> 时间：2012-09-28T07:06:28.080
> 
> 标签：spring, hibernate, jpa

我在非 Web 应用程序中使用 spring，我正在使用 hibernate 来处理 DB。我遇到的问题是“registerShutdownHook();” 确实关闭了 spring 上下文容器，它没有正确关闭和关闭 JPA 的资源，因此我与 DB 的连接被最大化。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="pu" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="false" />
            <property name="showSql" value="false" />
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
        </bean>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/> 
```

我使用上面介绍的配置来启动 JPA 层并使用“@Transactional”注释将 EM 注入 DAO。

也许有人可以帮助我解决我错过了什么或者我应该如何在独立环境中正确关闭 JPA 会话？

谢谢，

PS我得到的异常是：java.net.SocketException：没有可用的缓冲区空间（达到最大连接数？）：连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:14:49.620

这是使用 JPA 的应用程序 Context.xml 的另一个示例。这对我来说可以。

```
 <context:property-placeholder location=”classpath:jdbc.properties”/>

      <!– Connection Pool –&gt;

      <bean id=”dataSource” destroy-method=”close”&gt;

        <property name=”driverClass” value=”${jdbc.driverClass}”/>

        <property name=”jdbcUrl” value=”${jdbc.url}”/>

        <property name=”user” value=”${jdbc.username}”/>

        <property name=”password” value=”${jdbc.password}”/>

    </bean>

      <!– JPA EntityManagerFactory –&gt;

      <bean id=”entityManagerFactory”

                  p:dataSource-ref=”dataSource”&gt;

            <property name=”jpaVendorAdapter”&gt;

                  <bean>

                          <property name=”database” value=”${jdbc.database}”/>

                              <property name=”showSql” value=”${jdbc.showSql}”/>                       

            </bean>          

            </property>

      </bean>

      <!– Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) –&gt;
      <bean id=”transactionManager”

                  p:entityManagerFactory-ref=”entityManagerFactory”/>

      <!– Activates various annotations to be detected in bean classes for eg @Autowired–&gt;

      <context:annotation-config/>

        <!– enable the configuration of transactional behavior based on annotations  –&gt;

        <tx:annotation-driven transaction-manager=”transactionManager”/>

      <!– Property Configurator –&gt;

    <bean id=”propertyConfigurer”&gt;

            <property name=”location” value=”jdbc.properties”/>

      </bean>

    <context:component-scan base-package=”com.test.dao”/>

</beans> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:37:09.673

1.创建事务管理器如下：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >  
    <property name="persistenceUnitName" value="persistanceUnit"/>  
    <property name="dataSource" ref="dataSource"/>  
    <property name="persistenceXmlLocation" value="classpath:persistence.xml"/> 
    <property name="jpaVendorAdapter">  
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="${db.orm.showsql}" />              
            <property name="generateDdl" value="${db.orm.generateDdl}" />               
            <property name="database" value="${db.type}"/>  
            <property name="databasePlatform" value="${db.orm.dialect}" />
        </bean>
    </property>  
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean> 
```

2.使用persistance.xml（应该在类路径中）

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="persistanceUnit" transaction-type="RESOURCE_LOCAL">
    <description>Oracle db Persistence Unit</description>   
    <class>com.company.YourModelClass</class>
    <properties/>
  </persistence-unit>
</persistence> 
```

3.在applicationContext.xml中添加如下注解

```
<context:component-scan base-package="com.yourcompany.basepackage" /> 
```

4.annoatate你的Entitymanager服务类如：

```
 @PersistenceContext
 private EntityManager em = null; 
```

5.注入 TrasnsactionManager 到：

```
private PlatformTransactionManager platformTransactionManager = null; 
```

6.persist对象，如：

```
platformTransactionManager .persist(obj); 
```

# html - 将ol列表编号排列到左侧

> ID：12635206
> 
> 赞同：2
> 
> 时间：2012-09-28T07:06:39.250
> 
> 标签：html, css, html-lists

是否可以从左侧开始排列 ol 列表编号（2 位数字）。

通常它是这样的

```
1
2
.
.
10
12 
```

但我需要这样显示

![在此处输入图像描述](../Images/c23d61dce2929d91b33fc851af4ad21d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:19:05.943

可能您可以为此使用**counter-increment**。像这样写：

```
ul{    counter-reset: chapter 0;  }
li:before{    
    counter-increment: chapter;    
    content:counter(chapter) ". ";
    width:20px;
    display: inline-block;
    text-align: right;   
} 
```

检查这个[http://jsfiddle.net/upc6b/](http://jsfiddle.net/upc6b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:16:17.487

您可以使用 CSS 计数器：

**CSS**：

```
ol {
    padding-left: 40px;
    list-style: none;
    counter-reset: number;
}

ol li:before {
    display: inline-block;

    content: counter(number) '.';
    counter-increment: number;

    width: 30px;
} 
```

这种方式唯一的问题是数字区域的宽度是固定的，所以不会随着元素数量的增加而扩大。

**演示：http: [//jsfiddle.net/Blender/UG5Y4/2/](http://jsfiddle.net/Blender/UG5Y4/2/)**

# android - 无法将值从 Web 服务传递到条形图以在 android 中创建条形图

> ID：12635210
> 
> 赞同：1
> 
> 时间：2012-09-28T07:07:00.943
> 
> 标签：android, web-services, bar-chart

实际上我正在尝试创建一个条形图。但是我通过使用它从 Web 服务获取 x 和 y 轴值。

从 Web 服务获取值没有问题，但我只是怀疑将这些值传递给条形图以创建条形图。

因为，在我的模拟器运行后，我提供了正确的输入，如果我尝试调用“调用”按钮，它只显示空白屏幕..但我需要绘制一个条形图。如何做到这一点?

请给点建议......

感谢您宝贵的时间！..

**请找到我的参考资料**

**图表.java**

```
public class Chart extends Activity 
{
EditText edt1, edt2;
TextView txtv1;
Button btn;

int orderNo = 0;
int freightRate = 0;
int marginPercent;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText) findViewById(R.id.editText1);
    edt2 = (EditText) findViewById(R.id.editText2);

    btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) 
        {
            getTMSChart(edt1.getText().toString(), edt2.getText().toString());

            Intent intnt = new Intent(v.getContext(), BarGraphActivity.class);

            intnt.putExtra("orderNo", orderNo); 
            intnt.putExtra("freightRate", freightRate);
            //intnt.putExtra("marginPercent", marginPercent);

            startActivity(intnt);
        }
    });
}

public void getTMSChart(String FromDate, String ToDate)
{
    System.setProperty("http.keepAlive", "false");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet = true;

    String METHOD = "GetTMSChart";
    String NAMESPACE = "http://tempuri.org/";
    String SOAP_ACTION = "http://tempuri.org/GetTMSChart";
    String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";

    SoapObject request = new SoapObject(NAMESPACE, METHOD);

    request.addProperty("FromDate", FromDate);
    request.addProperty("ToDate", ToDate);

    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try 
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject result = (SoapObject) envelope.bodyIn;
        SoapObject root = (SoapObject) ((SoapObject) (result).getProperty(0)).getProperty("NewDataSet");
        int tablesCount = root.getPropertyCount();

for (int i = 0; i < tablesCount; i++) 
{
    SoapObject table = (SoapObject) root.getProperty(i);
    int propertyCount = table.getPropertyCount();

    for (int j = 0; j < propertyCount; j++) 
    {
    // String ord = table.getPropertyAsString("");

orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
//marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));

Log.i("Order Number Check : ", ""+orderNo);
                Log.i("Freight Rate Check : ", ""+freightRate);

            }
        }
    } catch (Exception e) 
      {
        }
}} 
```

**条形图活动.java**

```
 public class BarGraphActivity extends Chart 
 {

int[] x_axis;
int[] y_axis;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    x_axis = new int[1];
    y_axis = new int[1];

    x_axis[0] = getIntent().getIntExtra("orderNo", 0);
    y_axis[0] = getIntent().getIntExtra("freightRate", 0);

    DrawGraph();
}

public void DrawGraph() 
{

    String[] titles = new String[] { " Barcharts", "" };

    List<int[]> values = new ArrayList<int[]>();
    values.add(x_axis);
    values.add(y_axis);

    int[] colors = new int[] { Color.WHITE, Color.BLACK };

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

setChartSettings(renderer, "some texts", " ", " ", 0, x_axis, 0, y_axis, Color.GRAY, Color.LTGRAY);
    renderer.setXLabels(1);

    renderer.addXTextLabel(2, "orderNo");
    renderer.addYTextLabel(2, "freight");

    renderer.setPanEnabled(true, false);

    int length = renderer.getSeriesRendererCount();
    for (int i = 0; i < length; i++) 
    {
SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
seriesRenderer.setDisplayChartValues(true);
    }

ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer, Type.DEFAULT);
}

public XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{
 // creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(15);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    int length = colors.length;
    for (int i = 0; i < length; i++) 
    {
        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
        r.setColor(colors[i]);
        renderer.addSeriesRenderer(r);
    }

    return renderer;
}

public void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle, String yTitle,
int xMin, int[] x_axis, int yMin, int[] y_axis, int axesColor, int labelsColor) 
{
    // sets lots of default values for this renderer

    renderer.setChartTitle(title);

    renderer.setXTitle(xTitle);
    renderer.setYTitle(yTitle);

    renderer.setXAxisMin(xMin);

    renderer.setYAxisMin(yMin);
    renderer.setAxesColor(axesColor);
    renderer.setLabelsColor(labelsColor);

    renderer.setApplyBackgroundColor(true);
    renderer.setBackgroundColor(Color.GRAY);
}

public XYMultipleSeriesDataset buildBarDataset(String[] titles, List<int[]> values) 
{
    // adds the axis titles and values into the dataset

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    int length = titles.length;

    for (int i = 0; i < length; i++) 
    {
        CategorySeries series = new CategorySeries(titles[i]);
        int[] v = values.get(i);
        int seriesLength = v.length;

        for (int k = 0; k < seriesLength; k++) 
        {
            series.add(v[k]);
        }
        dataset.addSeries(series.toXYSeries());
    }
    return dataset;
}
} 
```

# javascript - ext.js 组合框没有值

> ID：12635216
> 
> 赞同：2
> 
> 时间：2012-09-28T07:07:27.133
> 
> 标签：javascript, extjs, combobox

我试图在 ext.js 中使用静态值定义一个组合框，但显示的组合框除了 3 个空选项外什么都不显示。

这是代码：

```
xtype:"combo",
id: "user_flag",
fieldLabel: "Status",
labelStyle: "width:100px",
store: new Ext.data.SimpleStore({
            fields: ["value", "name"],
            data: [
                  ["-1","Banned"], ["0", "Inactive"], ["1", "Active"]
                  ]
            }),
disaplayField: "name",
valueField: "value",
selectOnFocus: true,
mode: 'local',
editable: false,
triggerAction: "all" 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:57:08.333

请按照下一个链接的示例

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox)

```
 // The data store containing the list of states
var states = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],
    data : [
        {"abbr":"AL", "name":"Alabama"},
        {"abbr":"AK", "name":"Alaska"},
        {"abbr":"AZ", "name":"Arizona"}
        //...
    ]
});

// Create the combo box, attached to the states data store
Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,
    queryMode: 'local',
    displayField: 'name',
    valueField: 'abbr',
    renderTo: Ext.getBody()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T08:59:22.863

试试这个：

```
xtype:"combo",
id: "user_flag",
fieldLabel: "Status",
labelStyle: "width:100px",
store: new Ext.data.SimpleStore({
            fields: ["value", "name"],
            data: [
                  ["value":"-1","name":"Banned"], ["value":"0","name":"Inactive"], ["value":"1", "name":"Active"]
              ]
            }),
disaplayField: "name",
valueField: "value",
selectOnFocus: true,
mode: 'local',
editable: false,
triggerAction: "all" 
```

# php - facebook上的点击事件多个like按钮

> ID：12635228
> 
> 赞同：0
> 
> 时间：2012-09-28T07:08:35.257
> 
> 标签：php, facebook, facebook-graph-api

我在同一页面上有多个喜欢按钮用于不同的添加。当用户单击任何喜欢的按钮时，我必须给他奖励。我正在为点击事件使用以下代码，但它只在页面上工作一次。

```
<script>
            FB.Event.subscribe('edge.create', function(href, widget) {
          alert('You just liked '+href);
        });

      </script> 
```

有没有办法在同一页面上捕获多个喜欢按钮？喜欢按钮代码：`<fb:like href="mysitename.com/adds/ads-id"; layout="button_count" show_faces="false" action="like" colorscheme="light"></fb:like><br />`

# java - com.ctc.wstx.exc.WstxIOException：尝试在关闭的流上读取

> ID：12635233
> 
> 赞同：3
> 
> 时间：2012-09-28T07:08:52.307
> 
> 标签：java, soap, header

我试过这样：这里soap请求标头显示正确。但是当我尝试soap响应headres没有显示时，我收到此错误：com.ctc.wstx.exc.WstxIOException：尝试在关闭的流上读取。请帮助我任何人提前谢谢。

```
class ap{
public static void main(String[] args) throws RemoteException {

  TestStub stub = new TestStub();

 AddTwoNumbers re=new AddTwoNumbers();

 re.setFirstNumber(1);
 re.setSecondNumber(5);
 AddTwoNumbersResponse res=stub.addTwoNumbers(re);
 System.out.println(res.get_return());

 try{
 OperationContext operationContext = stub._getServiceClient().getLastOperationContext();
 operationContext.cleanup();
 if (operationContext != null) {
     MessageContext outMessageContext = operationContext.getMessageContext("Out");

     if (outMessageContext != null) {
         System.out.println("OUT SOAP: "+outMessageContext.getEnvelope().toString());

     }

     stub.cleanup();
     MessageContext inMessageContext = operationContext.getMessageContext("In");
     if (inMessageContext != null) {

         System.out.println("IN SOAP: "+ inMessageContext.getEnvelope().toString());
         //inMessageContext.build(); 
     }
 }
} catch(Throwable e) {
 System.out.println("Cannot log soap messages: "+e.getMessage());
} 
```

# iphone - 将日文文本加载到 UIWebView

> ID：12635234
> 
> 赞同：3
> 
> 时间：2012-09-28T07:08:57.707
> 
> 标签：iphone, uiwebview, epub

我正在制作一个用日语阅读 epub 书的应用程序。一般来说，网络视图将从html加载文本并从左到右和从上到下显示在网络视图中，但是我的应用程序要求在网络视图中显示文本从上到下然后从左到右跟随文本，所以有在 UIWebView 中显示文本的任何解决方案都遵循上述格式，感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:44:32.177

您正在寻找 CSS 属性`writing-mode: vertical-rl`。

然而，这是一个广泛的话题。您可能需要调整其他属性，例如`text-orientation`（必要时将非 CJK 字形竖直放置）、`text-combine`（将两个数字水平分组到单个字符“单元格”中，等等。

无论如何，请注意，您现在处于另一个宇宙中，诸如“左”之类的基本概念现在正在改变它们对您的含义。

# ruby - payroll_items_controller_spec.rb:18:in `block (2 level) 显示在 Rspec 控制器代码中

> ID：12635236
> 
> 赞同：0
> 
> 时间：2012-09-28T07:09:04.433
> 
> 标签：ruby, rspec, controllers

下面是主项目的 rspec 中的控制器代码。

坦率地说，我对 Ruby 很陌生，对编码有一点了解。

```
require 'spec_helper'

describe PayrollItemsController , "with valid params" do
  before(:each) do
    @payroll_item = mock_model(PayrollItem, :update_attributes => true)
    PayrollItem.stub!(:find).with("1").and_return(@payroll_item)
  end

  it "should find PayrollItem and return object" do
    PayrollItem.should_receive(:find).with("0").and_return(@payroll_item)
  end

  it "should update the PayrollItem object's attributes" do
    @payroll_item.should_receive(:update_attributes).and_return(true)
  end
end 
```

当我运行控制器代码时，显示以下错误：

```
(Mock "PayrollItem_1001").update_attributes(any args)
    expected: 1 time
    received: 0 times
./payroll_items_controller_spec.rb:18:in `block (2 levels) in ' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:16:51.923

您必须实际向控制器发出请求（`get`,`post`等`put`），以便模拟可以检查任何内容。

例如：

```
it "should find PayrollItem and return object" do
  PayrollItem.should_receive(:find).with("0").and_return(@payroll_item)
  put :update, :id => "0"
end 
```

除此之外，查看您的代码，您的返回值存在一些不一致：在您的块中，您使用 id`before`存根来返回某些东西，然后在您的第一个规范中，您使用 id 来模拟它返回相同的东西。`PayrollItem.find``1``0`

存根和模拟相同的方法很好，因为它们实现不同的功能：存根确保代码顺利运行，而模拟实际上检查期望。但是，您应该为相同的参数存根/模拟它，以便使用此`before`块的所有规范都在测试相同的东西。

# android - 如何使用 Twitter4j 从 Android 应用程序在 Twitter 上发布图片

> ID：12635242
> 
> 赞同：0
> 
> 时间：2012-09-28T07:09:52.633
> 
> 标签：android, twitter, twitter4j, image-upload

对于同一类型的问题，我已经看到[了这个答案。](https://stackoverflow.com/questions/9693586/how-to-post-picture-to-twitter-using-twitter4j-library-in-android/9693725#9693725)当我使用代码时，它总是抛出一个`Twitter Exception`。我像这样称呼它`upload_twic_pic(new File("my_image_path"));`

并获得关注`Exception`

```
W/System.err(2195): Connection reset by peerRelevant discussions can be on the Internet at:
W/System.err(2195):     http://www.google.co.jp/search?q=ea09dc6d or
W/System.err(2195):     http://www.google.co.jp/search?q=050d9b43
W/System.err(2195): TwitterException{exceptionCode=[ea09dc6d-050d9b43 0237e8c8-9ca5c8e4], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.3}
W/System.err(2195):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:204) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:05:45.800

[在这里](https://stackoverflow.com/questions/12661118/android-twitter4j-upload-image/12740436#12740436)找到了像魅力一样工作的答案。只需复制并过去答案中提供的代码并使用旧的 jar 文件，我按照答案中的说明将其替换为最新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T06:44:15.680

[使用SocialAuth Android 库](http://code.google.com/p/socialauth-android/)在 Twitter/Facebbok 上上传图片非常简单

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-17T13:38:48.327

```
public class MainActivity extends Activity {
    // Constants
    /**
     * Register your here app https://dev.twitter.com/apps/new and get your
     * consumer key and secret
     * */
    static String TWITTER_CONSUMER_KEY = "uTMokDQHlUP8rjl6LEmgjg"; // place your cosumer key here
    static String TWITTER_CONSUMER_SECRET = "xrI8yw6QBKa0ny7N4Nru01JiX4sIThsxzGV4MJ3YOUY"; // place your consumer secret here

    // Preference Constants
    static String PREFERENCE_NAME = "twitter_oauth";
    static final String PREF_KEY_OAUTH_TOKEN = "oauth_token";
    static final String PREF_KEY_OAUTH_SECRET = "oauth_token_secret";
    static final String PREF_KEY_TWITTER_LOGIN = "isTwitterLogedIn";

    static final String TWITTER_CALLBACK_URL = "hello://sample";

    // Twitter oauth urls
    static final String URL_TWITTER_AUTH = "auth_url";
    static final String URL_TWITTER_OAUTH_VERIFIER = "oauth_verifier";
    static final String URL_TWITTER_OAUTH_TOKEN = "oauth_token";

    // Login button
    Button btnLoginTwitter;

    // Progress dialog
    ProgressDialog pDialog;

    // Twitter
    private static Twitter twitter;
    private static RequestToken requestToken;

    // Shared Preferences
    private static SharedPreferences mSharedPreferences;

    // Alert Dialog Manager
    AlertDialogManager alert = new AlertDialogManager();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        cd = new ConnectionDetector(getApplicationContext());

        // All UI elements
        btnLoginTwitter = (Button) findViewById(R.id.btnLoginTwitter);

        // Shared Preferences
        mSharedPreferences = getApplicationContext().getSharedPreferences(
                "MyPref", 0);

        /**
         * Twitter login button click event will call loginToTwitter() function
         * */
        btnLoginTwitter.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // Call login twitter function
                loginToTwitter();
            }
        });

        if (!isTwitterLoggedInAlready()) {
            Uri uri = getIntent().getData();
            if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
                // oAuth verifier
                String verifier = uri
                        .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

                try {
                    // Get the access token
                    AccessToken accessToken = twitter.getOAuthAccessToken(
                            requestToken, verifier);

                    // Shared Preferences
                    Editor e = mSharedPreferences.edit();

                    // After getting access token, access token secret
                    // store them in application preferences
                    e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                    e.putString(PREF_KEY_OAUTH_SECRET,
                            accessToken.getTokenSecret());
                    // Store login status - true
                    e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                    e.commit(); // save changes

                    Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                    // Getting user details from twitter
                    // For now i am getting his name only
                    long userID = accessToken.getUserId();
                    User user = twitter.showUser(userID);
                    String username = user.getName();

                } catch (Exception e) {
                    // Check log for login errors
                    Log.e("Twitter Login Error", "> " + e.getMessage());
                }
            }
        }

    }

    /**
     * Function to login twitter
     * */
    private void loginToTwitter() {
        // Check if already logged in
        if (!isTwitterLoggedInAlready()) {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
            Configuration configuration = builder.build();

            TwitterFactory factory = new TwitterFactory(configuration);
            twitter = factory.getInstance();

            try {
                requestToken = twitter
                        .getOAuthRequestToken(TWITTER_CALLBACK_URL);
                this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                        .parse(requestToken.getAuthenticationURL())));
            } catch (TwitterException e) {
                e.printStackTrace();
            }
        } else {

            new updateTwitterStatus().execute("helloooo");

        }
    }

    /**
     * Function to update status
     * */
    class updateTwitterStatus extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Updating to twitter...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Places JSON
         * */
        protected String doInBackground(String... args) {
            //Log.d("Tweet Text", "> " + args[0]);
            String status = args[0];
            try {
                ConfigurationBuilder builder = new ConfigurationBuilder();
                builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
                builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

                // Access Token 
                String access_token = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
                // Access Token Secret
                String access_token_secret = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");

                AccessToken accessToken = new AccessToken(access_token, access_token_secret);

                Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

                // Update status

                StatusUpdate ad=new StatusUpdate("RaagFm");

                // The InputStream opens the resourceId and sends it to the buffer
                InputStream is = getResources().openRawResource(R.raw.icon);

                ad.setMedia("RaagFm",is);

                twitter4j.Status response = twitter.updateStatus(ad);

                Log.d("Status", "> " + response.getText());
            } catch (TwitterException e) {
                // Error in updating status
                Log.d("Twitter Update Error", e.getMessage());
            }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog and show
         * the data in UI Always use runOnUiThread(new Runnable()) to update UI
         * from background thread, otherwise you will get error
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(getApplicationContext(),
                            "Status tweeted successfully", Toast.LENGTH_SHORT)
                            .show();

                }
            });
        }

    }

    private boolean isTwitterLoggedInAlready() {
        // return twitter login status from Shared Preferences
        return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
    }

    protected void onResume() {
        super.onResume();
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-11T06:32:45.340

这对我来说就像一个魅力..用于发布带有文本的图像..希望这会对某人有所帮助 [https://github.com/learnNcode/DemoTwitterImagePost](https://github.com/learnNcode/DemoTwitterImagePost) 谢谢

# android - 1.8 和 2.0 之间电话间隙的首选版本

> ID：12635245
> 
> 赞同：0
> 
> 时间：2012-09-28T07:10:08.643
> 
> 标签：android, ios, cordova

我想知道我应该使用哪个最新版本的 phone-gap（使用 IOS 5.0 和 android 2.2），它现在可靠且无错误。phone-gap 版本应该具有备份存储在 /Cache 中的数据的内置功能（因为这是 phonegap 默认尝试查找 db 的地方），即。每当 IOS 由于内存不足而从 Cache 中删除文件时的 localstorage。

任何建议都非常受欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:16:02.533

phonegap 2.1.0 是最新的，到目前为止我没有任何问题，我在 android 和 ios 上都使用 ot :)

[下载](http://phonegap.com/download)

# iphone - 从服务器下载文件时如何创建进度条

> ID：12635246
> 
> 赞同：-2
> 
> 时间：2012-09-28T07:10:08.593
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

如何在 iPhone 中从服务器下载文件时创建**进度条。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:13:05.227

以下代码用于下载进度条显示

# 导入“UIDownloadBar.h”

```
@interface yourClassViewCtr : UIViewController <uidownloadbardelegate ,UIAlertViewDelegate> {
    UIDownloadBar *bar;
    UILabel *lblForDisplay;
    UIAlertView *alert;
} 
```

委托方法代码

```
#pragma mark - UIDownloadBar Delegate Methods

- (void)downloadBar:(UIDownloadBar *)downloadBar didFinishWithData:(NSData *)fileData suggestedFilename:(NSString *)filename {
//  NSLog(@"%@", filename);
//    NSLog(@"%@",fileData);

    UIImage *img=[UIImage imageWithData:fileData];
    UIImageView *imgVctr=[[UIImageView alloc]initWithFrame:CGRectMake(40, 25, 200, 100)];
    imgVctr.image=img;

    //store locally data into the resource folder. 
    [self.view addSubview:imgVctr];
    [alert dismissWithClickedButtonIndex:0 animated:YES];
}

- (void)downloadBar:(UIDownloadBar *)downloadBar didFailWithError:(NSError *)error {
    NSLog(@"%@", error);
}

- (void)downloadBarUpdated:(UIDownloadBar *)downloadBar {
} 
```

[有关更多详细信息，请访问以下教程。](http://goo.gl/1Ap8B)

这可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:35:46.220

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    [self setBackgroundColor:[UIColor colorWithWhite:0 alpha:0.8]];
    [self setAutoresizesSubviews:YES];

    self.downloadMessage=[[[UILabel alloc] initWithFrame:CGRectMake(40, 0, frame.size.width-80, frame.size.height/2)] autorelease];

    [self.downloadMessage setTextAlignment:UITextAlignmentCenter];
    [self.downloadMessage setFont:[UIFont boldSystemFontOfSize:11]];
    [self.downloadMessage setAutoresizingMask:UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleLeftMargin];
    [self.downloadMessage setText:@"Downloading Assets..."];
    [self.downloadMessage setBackgroundColor:[UIColor clearColor]];
    [self addSubview:self.downloadMessage];
    [self.downloadMessage setTextColor:[UIColor whiteColor]];

    float offset=(frame.size.width-200)/2;
    self.progressiveView=[[[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault] autorelease];

    [self.progressiveView setFrame:CGRectMake(offset, frame.size.height/2, 200, frame.size.height/2)];
    [self.progressiveView setAutoresizingMask:UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleLeftMargin];
    [self addSubview:self.progressiveView];
}
return self;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse*)response{

expectedLength+=response.expectedContentLength;
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{  

@try{

int index=[self.urlConnections indexOfObject:connection];
progressValue+=((float)((float)data.length/(float)expectedLength))*0.9;
[self.progressiveView setProgress:progressValue];
[[self.preCacheDatas objectAtIndex:index] appendData:data];
}
@catch (NSException *exception){
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:11:55.880

使用[下载助手类](https://github.com/erica/iOS-5-Cookbook/tree/master/C15/03-Download%20Helper)下载文件，它也显示进度条指示..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:13:19.503

您的 UI 的主线程中不应该有进度条。

最好的方法是创建另一个线程并将进度条放在那里。您可以向此线程发送一些更新信息，例如百分比，以便它以您喜欢的速度更新。

完成下载后，线程可以被杀死 - 或者将其留在后台进行后续下载。

# visual-studio-2012 - 无法识别的标签前缀或设备过滤器“sc”（在 VS2012 中）

> ID：12635255
> 
> 赞同：3
> 
> 时间：2012-09-28T07:10:47.287
> 
> 标签：visual-studio-2012, sitecore, tagprefix

我无法让 Visual Studio 2012 识别 'sc' tagPrefix。我的 web.config 包含通常的行：

```
<add tagPrefix="sc" namespace="Sitecore.Web.UI.WebControls"
     assembly="Sitecore.Kernel"/> 
```

但是`Unrecognized tag prefix or device filter 'sc'`当我尝试将`<sc />`标签添加到我的页面或用户控件时，我不断收到消息。

如果我在 Visual Studio 2010 中打开相同的解决方案，它可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T09:22:00.687

我终于找到了。Sitecore 提供的 Web.Config 包含以下部分：

```
<pages validateRequest="false">
  <controls>
    <add tagPrefix="sc" namespace="Sitecore.Web.UI.WebControls" assembly="Sitecore.Kernel" />
    <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add tagPrefix="sc" namespace="Sitecore.Web.UI.WebControls" assembly="Sitecore.Analytics" />
  </controls>
</pages> 
```

对于 VS2012，您需要删除**asp** tagprefixes，因此该部分最终为：

```
<pages validateRequest="false">
  <controls>
    <add tagPrefix="sc" namespace="Sitecore.Web.UI.WebControls" assembly="Sitecore.Kernel" />
    <add tagPrefix="sc" namespace="Sitecore.Web.UI.WebControls" assembly="Sitecore.Analytics" />
  </controls>
</pages> 
```

不知道为什么，但这为我解决了问题！

小旁注：在此更改之后，它将不再在 VS2010 中工作..（也不`<sc: />`是`<asp: />`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:32:38.893

如果您安装了 .net 4.5，它会覆盖 4.0，并且您还会遇到其他问题（取决于您运行的特定站点核心版本......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T10:34:27.630

**在 aspx 文件的顶部添加以下标记。**

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

**在 web.config 文件中添加以下标签**

```
<pages>
    <controls>
        <add namespace="AjaxControlToolkit" assembly="AjaxControlToolkit" tagPrefix="ajaxToolkit"/>
    </controls>
</pages> 
```

在工具菜单上，单击选择工具箱项。如果没有 AjaxControlToolkit.dll 文件，请添加它们。单击浏览，然后出现打开对话框。在“我的位置”栏中，选择“我的电脑”以浏览计算机上安装的项目。

# iphone - 如何有效地迭代 NSSet (Objective-C) - Core Data 中的多对多关系表示？

> ID：12635256
> 
> 赞同：23
> 
> 时间：2012-09-28T07:10:51.687
> 
> 标签：iphone, objective-c, ios, cocoa, operating-system

Core Data 中的多对多关系由 NSSet 表示（使用编辑器自动生成...创建 NSManagedObject 子类...菜单。

迭代 NSSet* 最有效的方法是什么？

```
NSSet* groups = [contact groups];
for(Group* group in groups) {
    NSString* groupName = [group name];
} 
```

或者

```
NSSet* groups2 = [contact groups];
NSArray* groupsArray = [groups2 allObjects];
for(Group* group in groupsArray) {
    NSString* groupName = [group name];
} 
```

或其他方式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T07:15:48.617

第一个可能更有效。如果后者更有效，那么 Apple 将简单地使用该路线来实施前者。

话虽这么说，如果您之所以问，是因为性能似乎是一个问题，那么您可能更多的是花费大量时间在核心数据的故障对象上。明智的做法是`self in %@`使用`groups`; 将获取请求设置`returnsObjectsAsFaults`为 NO 并确保`relationshipKeyPathsForPrefetching`指定任何适当的。这样做的最终结果是，您将要迭代的所有数据都是在一次到后备存储的行程中获取的，而不是在大量单独的行程中按需获取其中的每个单独的部分。

# php - 如何在 PHP Dom 中追加和替换子项？

> ID：12635263
> 
> 赞同：0
> 
> 时间：2012-09-28T07:11:12.217
> 
> 标签：php, dom, domdocument

我们正在做一个项目，我们需要在 PHP DOM 中附加Child 和 ReplaceChild，然后保存文件。

PHP 代码

```
<?php 
$string = '<u>technical/u>';
?>
<html><head></head>
<body>
<div>Stack Overflow is great website for technical professionals.
<p>checking all of the websites</p>
</div>
<h1>Looking something new for a technical professional</h1>
</body>
</html> 
```

我们只想用重复的词替换 $string ，比如 and 中使用了“technical”。

最终的 HTML 代码将是

```
<html><head></head>
<body>
<div>Stack Overflow is great website for <u>technical</u> professionals.
<p>checking all of the websites</p>
</div>
<h1>Looking something new for a <u>technical</u> professional</h1>
</body>
</html> 
```

# asp.net - SQL Reporting Services Javascript 更改报告查看器页面

> ID：12635265
> 
> 赞同：1
> 
> 时间：2012-09-28T07:11:26.880
> 
> 标签：asp.net, reporting-services, ssrs-2008, reportingservices-2005

我在 WebForm 中使用 ReportViewer 控件。我从下面的链接中看到，有一个用于与之交互的 JavaScript API，因此您可以创建自己的 UI 而不是默认工具栏：

[http://msdn.microsoft.com/en-us/library/dd756405.aspx](http://msdn.microsoft.com/en-us/library/dd756405.aspx)

无论如何，我没有看到将报告的当前页面设置为实现 (first, prev, next, last) 命令。

如何在 JavaScript 中做到这一点？我目前正在使用 VS 2012。

# grails - 将 big grails 项目迁移到 Intellij

> ID：12635268
> 
> 赞同：0
> 
> 时间：2012-09-28T07:11:37.023
> 
> 标签：grails, build, intellij-idea, grails-plugin, sts-springsourcetoolsuite

我正在接管一个相当大的 grails 项目的开发。开发最初是在 STS 中完成的，但我想转移到 IntelliJ Idea。

最初我认为这将是小菜一碟，因为“integrate-with --intellij”命令。然而，这不是故事:(

该项目由多个 grails-plugin 项目（请不要问我为什么以这种方式开发）和其中一些带有 web 描述符的项目组成。我首先迁移其中一个，因为这是“主要”项目之一 (X)。

X 作为 Intellij 依赖项的每个开发插件都创建为“YinplacePlugin”模块，其中 Y 是插件名称。这就是乐趣的开始！为 Y 项目创建的“YinplacePlugin”模块当然有很多依赖。如果我查看 STS，这些是在 $USERHOME$/.grails/project/Y/plugins/xxxx 中引用的，并且此路径包含在构建路径中的 STS 中。

但是这些依赖在想法上失败了。我可以在项目中使用“grails compile”选项，但是 IntelliJ“Make Project”或“Make Module”由于缺少引用而失败。见下文：

![失败的参考](../Images/12798ae325d47fa196cc01f7ceaa2aa1.png)

![STS 参考](../Images/1ea91934e451bb5265cea2adbb73268a.png)

第一张图片显示了失败的参考。第二个 STS 如何在构建路径上有这个。

那么为什么不直接将库添加到构建路径中呢？有人可能会问。嗯，我试过了。结果之一：

```
IDEA hook: Grails not found!
| Error java.lang.NullPointerException
| Error     at org.jetbrains.groovy.grails.rt.Agent$2.run(Agent.java:99)
| Error     at java.lang.Thread.run(Thread.java:662) 
```

我没主意了。任何想法如何使用“Idea Make Project”来构建它？我想要的只是一个没有“红线”的 IDE，所以开发会很顺利！

# linux - 在 Linux 上安装 Qt（Debian 发行版）

> ID：12635279
> 
> 赞同：1
> 
> 时间：2012-09-28T07:12:21.087
> 
> 标签：linux, qt

我在 Debian 上有 Qt 4.6.3。我需要版本 4.8.1。

为了安装它，我从 Qt 站点下载了**Qt SDK 1.2.1**，据说它包含版本 4.8.1 安装后我检查了 Qt 版本，它是 4.6.3 而不是预期的 4.8.1。

我做错了什么？以及如何安装 4.8.1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:44:36.460

首先，我建议通过将测试（wheezy）存储库添加到您的软件包管理器来获得“官方”Debian Qt 升级，这样您系统上的所有内容都将在几次点击中无缝更新。

如果你不能这样做，那么：

*   使用您的包管理器卸载现有的 Qt 安装（即运行时库、插件和 Qt Creator）。
*   将 SDK 安装在您喜欢的任何位置，无论如何它都安装在一个文件夹下。
*   更新您的目录以使用,等`$PATH`来指向目录，有很多方法可以做到这一点，最简单的是将更新的内容导出到您的. （并且可以选择为您的 DE 制作一些不错的快捷方式）。`qtcreator``qmake``$PATH``.bashrc`
*   `/usr/lib`在（或）中创建符号链接`/usr/lib64`以指向 SDK 提供的 Qt 库，或者在您的目录中添加`qt.conf`包含路径的文件并以 root 身份运行。`/etc/ld.conf.so.d/``ldconfig`

我自己是一个 openSUSE 用户，所以上面的一些内容在 Debian 上可能会略有不同，如果我不正确，希望有 Debian 经验的人可以加入。

# android - 在 android 中使 TextView 的特定文本可链接

> ID：12635281
> 
> 赞同：0
> 
> 时间：2012-09-28T07:12:21.527
> 
> 标签：android, hyperlink, textview

> **可能重复：**
> [Android 中的超链接](https://stackoverflow.com/questions/3204036/hyperlink-in-android)

我想在 Textview 的特定文本上建立一个链接。在android中怎么可能？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:14:33.053

是的，它的可能。`Spannable String`与`Clickable Span.` 参考此[链接](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)一起使用。. 这是一个很好的例子`clickable Span`。

# iphone - AdMob 因 [GADObjectPrivate changeState:] 崩溃：无法识别的选择器

> ID：12635283
> 
> 赞同：51
> 
> 时间：2012-09-28T07:12:28.500
> 
> 标签：iphone, objective-c, admob

我已经安装了 AdMob SDK 6.2.0（Xcode 4.5 (4G182)，我正在 iPhone 4S 和模拟器上进行测试）。我按照教程操作，只想让 AdMob 显示一次横幅。但它在最后一行崩溃：

```
self.bannerView = [[GADBannerView alloc]
               initWithFrame:CGRectMake(0.0,
                                        self.view.frame.size.height -
                                        GAD_SIZE_320x50.height,
                                        GAD_SIZE_320x50.width,
                                        GAD_SIZE_320x50.height)];

self.bannerView.delegate = self;
self.bannerView.adUnitID = @"xREMOVEDBYMEx";
self.bannerView.rootViewController = self;
[self.view addSubview:self.bannerView];
GADRequest * request = [GADRequest request];
request.testing = YES;
[self.bannerView loadRequest:request]; 
```

崩溃是

> 2012-09-28 09:03:58.268 NewProject[1467:c07]-[GADObjectPrivate changeState:]: 无法识别的选择器发送到实例 0x95c17d0 2012-09-28 09:03:58.276 NewProject[1467:c07] ***由于应用程序终止未捕获的异常“NSInvalidArgumentException”，原因：“-[GADObjectPrivate changeState:]：无法识别的选择器发送到实例 0x95c17d0”

对我来说，这看起来像是图书馆中的一个错误，但我认为这不太可能。有什么想法吗？

编辑：完全相同的代码在示例项目中工作。我的项目文件有什么问题会导致该错误吗？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-09-28T11:19:35.277

您需要添加`-ObjC`到应用程序目标的构建设置的*其他链接器标志：*

1.  单击 XCode 中的蓝色顶级项目图标
2.  选择您的目标并转到*构建设置*
3.  在*Other Linker Flags*`-ObjC`下为*Release*和*Debug*添加

 *来源：[https ://developers.google.com/mobile-ads-sdk/docs/admob/mediation#ios-linker](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation#ios-linker)

还要确保进行清洁和重建

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-30T18:01:25.553

对我来说最好的解决方案是使用 -force_load 标志而不是 -ObjC ![在此处输入图像描述](../Images/883c1ef7f9d3cce3bfad813caea2eb62.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-14T22:03:18.547

如果你们仍然有问题，请确保它是 -ObjC 而不是 -Objc。天哪，花了数周时间试图找出原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T01:44:22.137

对于那些尝试添加 Obj-c 链接器标志并且在尝试加载广告时仍然遇到相同的“无法识别的选择器发送到实例”错误的人，我找到了修复方法。这是最新的 XCode（8.1 版）。

以供参考：

*   我使用 cocoapods 添加了 Google AdMob。
*   我使用情节提要与我的视图控制器建立出口连接，而 GADBannerView**不能**作为一个类使用，所以我像大多数人一样编写它。
*   在我看到横幅视图的自定义类被设置为 GADBannerView 的一个 stackoverflow 答案中，如果添加插座时它是下拉列表中的一个选项，我认为它会自动发生。对我来说，这不是因为我必须自己输入。

[![没有自定义类指定screengrab](../Images/edf0fd7241e602556999c68a103efb7c.png)](https://i.stack.imgur.com/8Hrxf.png)

**查看下拉列表，我看到 GADBannerView 作为一个选项提供并选择了它。**

[![GADBannerView 类可用](../Images/ab58695e1682fc0cfcc54d5d324b093b.png)](https://i.stack.imgur.com/mSnIX.png)

选择它后，应用程序运行顺利，无需添加链接器标志（我的默认情况下为空白）或任何东西。

希望这对其他人有帮助！*

# java - 如何在 Java 中捕获标准视频输出

> ID：12635286
> 
> 赞同：0
> 
> 时间：2012-09-28T07:12:54.737
> 
> 标签：java, coordinates, screenshot, video-capture, monitor

我想捕捉系统的标准输出，这就是我们在监视器上可以看到的所有内容，从`0,0`坐标到`x,y`. 我尝试`50`使用该方法每秒进行屏幕捕获`Robot.createScreenCapture(Rectangle rectangle))`，但它使用大量内存和 CPU。相反，如果我可以捕获标准输出并在视频播放器中重现它（例如），我认为它应该使用更少的内存和 cpu。谁能指出我的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:47:33.490

录制屏幕是一项非常特定于操作系统环境的任务。例如，在 Linux 上，可以通过直接使用 XLib 或类似库与 X 服务器对话来进行屏幕截图。

如果你很幸运，有人用 Java 创建了一个库来抽象这项工作（比如 Robot 类），但如果你找不到这样的库，那么你将不得不自己为每个平台进行实现。

不幸的是，您可能必须使用 Java 以外的另一种语言进行一些工作，因为可能不存在用于您必须进行的操作系统特定调用的 Java 绑定。

一个好的起点是查看现有项目。对于 Linux，这可能是 RecordMyDesktop： [http: //recordmydesktop.sourceforge.net/development.php](http://recordmydesktop.sourceforge.net/development.php)

对于 Windows，您可以查看：[http ://taksi.sourceforge.net/](http://taksi.sourceforge.net/)

所以总结一下：Java 可能不是正确的“锤子”任务。

# wordpress - 如何在 Wordpress 中将我的样式添加到我的插件中？

> ID：12635288
> 
> 赞同：0
> 
> 时间：2012-09-28T07:13:08.907
> 
> 标签：wordpress, plugins

我用了：

```
 wp_register_style("jquery.myplugin-1.0.css", "http://wordpress.loc/wp-content/plugins/myplugin/css" , "jquery.myplugin-1.0.css" , array(), "1.0");
        wp_enqueue_style( 'jquery.myplugin-1.0.css'); 
```

但它得到

```
http://wordpress.loc/wp-content/plugins/myplugin/css?ver=3.4.2 
```

我在做什么可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:31:39.640

这有效

```
wp_register_style("jquery.myplugin-1.0.css", "http://wordpress.loc/wp-content/plugins/myplugin/css/jquery.myplugin-1.0.css");
wp_enqueue_style( 'jquery.myplugin-1.0.css'); 
```

但这更好：

```
wp_enqueue_style( 'jquery.myplugin-1.0.css', plugins_url( '/css/jquery.myplugin-1.0.css' , __FILE__ )); 
```

如果您同时注册和入队，都可以使用[wp_enqueu_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)完成，它具有相同的参数。

其次，您使用硬编码的网址。在我的第二个示例中，插件 url 将是动态的，因此它可以在每个 WordPress 上运行而无需更改 url。

# android - 如何在android中实现捏缩放

> ID：12635294
> 
> 赞同：2
> 
> 时间：2012-09-28T07:13:35.223
> 
> 标签：android, pinchzoom

有人可以帮我在android的布局内实现多个图像的捏缩放。我已经在这段代码中完成了边界限制的拖动。现在我想缩放图像。我在这里分享我的代码，用于拖动具有边界限制的多个图像

```
TouchActivity extends Activity{
 /** Called when the activity is first created. */
    ImageView robot=null,bird=null;
    AbsoluteLayout aLayout,aLayout1;
    int status=0,status1=0;
    // We can be in one of these 3 states
    static final int           NONE                    = 0;
    static final int           DRAG                    = 1;
    static final int           ZOOM                    = 2;
    int                        mode                    = NONE;

    int                        displayHeight, displayWidth;
    Matrix                     matrix                  = new Matrix();
    Matrix                     savedMatrix             = new Matrix();
    Matrix                     matrixForView1          = new Matrix();
    Matrix                     matrixForView2          = new Matrix();
    PointF                     start                   = new PointF();
    PointF                     mid                     = new PointF();
    float                      oldDist                 = 1f;

    @Override    
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        aLayout= (AbsoluteLayout)findViewById(R.id.absLayout);
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics( metrics );
        displayHeight = metrics.heightPixels;
        displayWidth = metrics.widthPixels;

        robot=(ImageView)findViewById(R.id.robot);
        bird=(ImageView)findViewById(R.id.bird);

        bird.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                status1=1;
                Log.i("Touched BIRD ImageStatus1",""+status1);
                //robot.setBackgroundColor(Color.WHITE);

                return false;
            }
        });
        robot.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                status=1;
                Log.i("Touched ROBOT ImageStatus",""+status);
                //robot.setBackgroundColor(Color.WHITE);

                return false;
            }
        });

        aLayout.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                Log.i("touch",""+event);
                LayoutParams lp;
                if((event.getX()>0&&event.getX()<320)&&(event.getY()>0 && event.getY()<480))
                {
                if(status==1) // any event from down and move
                {
                    lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,(int)event.getX()-robot.getWidth()/2,(int)event.getY()-robot.getHeight()/2);
                    robot.setLayoutParams(lp);

                }
                if(status1==1) // any event from down and move
                {
                    Log.e("event.getX()", String.valueOf(event.getX()));
                    Log.e("event.getY()", String.valueOf(event.getY()));

                    lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,(int)event.getX()-bird.getWidth()/2,(int)event.getY()-bird.getHeight()/2);
                    bird.setLayoutParams(lp);

                }
                }
                else
                {
                    Log.e("image outside boundary","image outside boundary");
                }

                if(event.getAction()==MotionEvent.ACTION_UP){

                    if(status==1)
                    {
                    status=0;

                    robot.setBackgroundColor(Color.TRANSPARENT);
                    }
                    if(status1==1)
                    {    status1=0;

                    bird.setBackgroundColor(Color.TRANSPARENT);

                    }
                                }
                return true;

            }

        });

    }

} 
```

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

         <AbsoluteLayout
        android:id="@+id/absLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/robot"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher"
            android:scaleType="matrix"
           />

        <ImageView
            android:id="@+id/bird"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/white_bird"
           android:scaleType="matrix"

            android:layout_x="200dp"
           />

    </AbsoluteLayout>

</LinearLayout> 
```

可以在这段代码中做到这一点吗？矩阵方法对我有用吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:32:31.513

您可以`WebView`为此使用：

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setBuiltInZoomControls(true);
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
String imagePath = "file:/"+ base + "/test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadData(html, "text/html","utf-8"); 
```

# c#-3.0 - LinQ : 何时执行查询

> ID：12635295
> 
> 赞同：0
> 
> 时间：2012-09-28T07:13:53.587
> 
> 标签：c#-3.0

根据此链接：http://msdn.microsoft.com/en-us/library/bb397906.aspx

```
namespace Linq
{
    class IntroToLINQ
    {
        static void Main()
        {
            // The Three Parts of a LINQ Query: 
            //  1\. Data source. 
            int[] numbers = new int[7] { 0, 1, 2, 3, 4, 5, 6 };

            // 2\. Query creation. 
            // numQuery is an IEnumerable<int> 
            var numQuery =
                from num in numbers
                where (num % 2) == 0
                select num;

            // 3\. Query execution. 
            foreach (int num in numQuery)
            {
                Console.Write("{0,1} ", num);
            }
        }
    }

} 
```

它声明不会执行查询，直到数据通过 foreach 迭代。但是当我调试时， var(resultviews) 的数据成员包含执行 foreach 之前的结果值。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:16:54.993

当您使用调试器查看变量时，Visual Studio 正在执行迭代器。这就是你看到结果的原因。

出于同样的原因，您不应将`i++`其放入监视窗口，因为代码实际上已被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:18:56.270

因为您的调试器正在为您执行查询。

Linq 正在使用一种称为延迟执行的东西。这是一篇很好的博客文章来解释它：[LINQ and Deferred Execution](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)。

当您第一次执行迭代器时，会处理并执行查询（在内存中、到数据库或以其他方式）。您的调试器将为您执行此操作。

以以下代码为例（您可以将其粘贴到控制台应用程序中）：

```
using System;
using System.Diagnostics;
using System.Linq;

namespace Stackoverflow
{
    class Program
    {
        static void Main()
        {
            var numbers = Enumerable.Range(0, 100).ToList();

            var filteredNumbers = from n in numbers
                                  where n > 50
                                  select n;

            Debugger.Break();

            foreach(int f in filteredNumbers)
            {
                Console.WriteLine(f);
            }

        }
    }
} 
```

当您查看`filteredNumbers`Debugger.Break() 语句时，您将看到以下内容：

![Linq Enumerable 的调试视图](../Images/30d60bee68242781f6479ee5625eb8e6.png)

结果视图选项的值是：“扩展结果视图将枚举 IEnumerable”。这就是调试器中发生的事情。

# html - 视频无法在 Firefox 中运行

> ID：12635297
> 
> 赞同：0
> 
> 时间：2012-09-28T07:14:01.443
> 
> 标签：html, css, youtube

请找到下面的链接，我已将 youtube 视频嵌入到标题部分，它在 Chrome、IE9 中运行，但在 Firefox 中不运行

[http://demo.rimits.com/rpl/index.html](http://demo.rimits.com/rpl/index.html)

你能帮忙吗？

问候乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:17:01.400

我已经在 Firefox 15 中打开了链接，它可以正常播放：-？

# jsp - 格式化 DisplayTag 列

> ID：12635304
> 
> 赞同：0
> 
> 时间：2012-09-28T07:14:38.093
> 
> 标签：jsp, displaytag

我想要如果值是`1.50`，它应该显示`1.50`但它显示`1.5`。它截断`0`

我尝试了下面的代码但没有运气

```
<display:column title="MTD" sortable="true" property="mtd"  format="{0,number,#.##}"></display:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:19:37.433

看看这里的例子：http: [//demo.displaytag.org/displaytag-examples-1.1/example-format.jsp](http://demo.displaytag.org/displaytag-examples-1.1/example-format.jsp) 这种格式可以帮助你：`format="{0,number,0,000.00} $"`

# wpf - 如何在 wpf 按钮（如 google 按钮）周围创建阴影效果

> ID：12635307
> 
> 赞同：14
> 
> 时间：2012-09-28T07:14:55.617
> 
> 标签：wpf, button, styles, shadow

我正在尝试在 wpf 中创建一个谷歌按钮。我找到了以下链接，该链接指定了 google 的按钮 css 样式

[谷歌按钮 CSS 样式](http://liljosh.com/css3-google-buttons/)

现在我也在网上搜了一下，发现这个样式很像google的按钮

```
<Style x:Key="GoogleGreyButton" TargetType="{x:Type Button}">
    <Setter Property="Background" Value="#FFF5F5F5"/>
    <Setter Property="BorderBrush" Value="#FFDCDCDC"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Foreground" Value="#FF666666"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="FontSize" Value="11"/>
    <Setter Property="FontFamily" Value="Arial"/>
    <Setter Property="HorizontalContentAlignment" Value="Center"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Padding" Value="8,7"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="border" 
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Padding="{TemplateBinding Padding}" 
                    BorderBrush="{TemplateBinding BorderBrush}" 
                    CornerRadius="1" 
                    Background="{TemplateBinding Background}">
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>

                </Border>

                <ControlTemplate.Triggers>
                    <!--TODO: Set the right colors-->
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="border" Property="BorderBrush" Value="#FFC6C6C4" />
                        <Setter Property="Foreground" Value="#FF020202" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                       ` <!--Some setters here--> `

                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="#ADADAD"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

`<Trigger Property="IsPressed" Value="True">`[我需要像上面的Google 按钮 css 样式](http://liljosh.com/css3-google-buttons/)那样产生一些阴影效果，我可以知道我该如何实现吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-28T07:46:32.557

您可以通过更改 BorderThickness 一些来产生阴影效果。尝试这样的事情：

```
<Trigger Property="IsMouseOver" Value="True">
    <Setter TargetName="border" Property="BorderBrush" Value="DarkGray" />
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="BorderThickness" Value="1,1,2,2" />
</Trigger> 
```

请注意，这样做可能会使您的布局有些混乱，因为它会改变按钮的总宽度和高度，因此当悬停按钮时，它周围的其他控件可能会“颠簸”一点。

如果您想使用适当的投影，可以像这样向按钮添加投影：

```
<Button>
    <Button.BitmapEffect>
        <DropShadowBitmapEffect Color="Black" Direction="320" Softness="1" ShadowDepth="10" Opacity="0.5" />
    </Button.BitmapEffect>
</Button> 
```

**编辑：**

正如 MrDosu 评论的那样，[BitMapEffect](http://msdn.microsoft.com/en-us/library/ms588667%28v=vs.100%29.aspx)已被弃用，因此您可能应该改用[Effect](http://msdn.microsoft.com/en-us/library/Cc489982%28v=vs.100%29.aspx)。

这是使用效果的示例：

```
<Trigger Property="IsMouseOver" Value="True">
    <Setter TargetName="border" Property="BorderBrush" Value="DarkGray" />
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="Button.Effect">
        <Setter.Value>
            <DropShadowEffect Color="Black" Direction="320" ShadowDepth="3" BlurRadius="5" Opacity="0.5" />
        </Setter.Value>
    </Setter>
</Trigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-28T11:34:52.397

过去，我实现了这样的材质提升：

```
public static class UI
{
    private static readonly DropShadowEffect[] sShadows = new[]
    {
        new DropShadowEffect()
        {
            BlurRadius = 5,
            ShadowDepth = 1
        },
        new DropShadowEffect()
        {
            BlurRadius = 8,
            ShadowDepth = 1.5
        },
        new DropShadowEffect()
        {
            BlurRadius = 14,
            ShadowDepth = 4.5
        },
        new DropShadowEffect()
        {
            BlurRadius = 25,
            ShadowDepth = 8
        },
        new DropShadowEffect()
        {
            BlurRadius = 35,
            ShadowDepth = 13
        }
    };

    public static readonly DependencyProperty ElevationProperty = DependencyProperty.RegisterAttached("Elevation", typeof(double), typeof(UI), new FrameworkPropertyMetadata(default(double), FrameworkPropertyMetadataOptions.AffectsRender, null, OnElevationChanged));

    public static double GetElevation(this UIElement element) => element.GetValue(ElevationProperty) as double? ?? default;

    public static void SetElevation(this UIElement element, double elevation) => element.SetValue(ElevationProperty, elevation);

    private static object OnElevationChanged(DependencyObject dependencyObject, object value)
    {
        if (dependencyObject is UIElement element && value is double elevation)
        {
            if (elevation == 0)
            {
                element.Effect = null;
            }
            else
            {
                var effect = CreateElevation(elevation, element.Effect);

                if (effect != null)
                    element.Effect = effect;
            }
        }

        return value;
    }

    private static void MixShadows(DropShadowEffect target, DropShadowEffect other, double balance)
    {
        target.BlurRadius = target.BlurRadius * (1 - balance) + other.BlurRadius * balance;
        target.ShadowDepth = target.ShadowDepth * (1 - balance) + other.ShadowDepth * balance;
    }

    private static Effect CreateElevation(double elevation, Effect source)
    {
        if (elevation < 0 || elevation > 12)
            throw new ArgumentOutOfRangeException("Elevation must be between 0 and 12.", nameof(elevation));

        elevation = Math.Max(0, elevation / 12 * shadows.Length - 1);

        var shadows = sShadows;
        var prevIndex = (int)Math.Floor(elevation);
        var index = (int)elevation;
        var nextIndex = (int)Math.Ceiling(elevation);
        var approx = elevation - index;
        var shadow = shadows[index];
        var modify = false;

        if (approx != 0)
            MixShadows(shadow, approx < 0 ? shadows[prevIndex] : shadows[nextIndex], Math.Abs(approx));

        if (source is DropShadowEffect sourceShadow)
        {
            sourceShadow.BlurRadius = shadow.BlurRadius;
            sourceShadow.ShadowDepth = shadow.ShadowDepth;
            shadow = sourceShadow;
            modify = true;
        }

        shadow.Direction = 270;
        shadow.Color = Color.FromArgb(0xAA, 0, 0, 0);
        shadow.Opacity = .42;
        shadow.RenderingBias = RenderingBias.Performance;

        return modify ? null : shadow;
    }
} 
```

然后，

```
<Button local:Elevation="2">Elevated button</Button> 
```

2 到 12 之间的任何值都可以设置为 any 的高程`UIElement`。

# java - 使用 SimapleDateFormat 解析时间

> ID：12635309
> 
> 赞同：1
> 
> 时间：2012-09-28T07:15:02.617
> 
> 标签：java, date, time, simpledateformat

我正在尝试像这样解析日期：Tue Aug 28 21:16:23 +0000 2012 使用以下代码：

```
SimpleDateFormat format = new SimpleDateFormat("E M dd HH:mm:ssZ yyyy", Locale.ENGLISH);
String d = object.getString("created_at"); // d = Tue Aug 28 21:16:23 +0000 2012;
date = format.parse(d); 
```

但也有例外：

```
09-28 11:10:24.471: W/System.err(10388): java.text.ParseException: Unparseable date: "Fri Sep 28 07:09:09 +0000 2012" (at offset 4) 
```

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:20:19.820

试试这个

```
SimpleDateFormat format = new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy", Locale.ENGLISH); 
```

`MMM`用于表示短月份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:24:39.310

您需要 MMM 来表示 8 月的月份。

```
SimpleDateFormat format = new SimpleDateFormat("E MMM dd HH:mm:ssZ yyyy", Locale.ENGLISH);
        String d = "Tue Aug 28 21:16:23 +0000 2012"; // d =;
        Date date = format.parse(d);
                System.out.println(date); 
```

输出：2012 年 8 月 28 日星期二 22:16:23 BST

查看[SimpleDateFormat 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)可能会有所帮助，有一些有用的模式字符串示例。

# android - 下载管理器请求状态更改通知

> ID：12635310
> 
> 赞同：1
> 
> 时间：2012-09-28T07:15:07.140
> 
> 标签：android, download-manager

我还没有找到任何关于那个的信息。是否有可能监听下载管理器请求状态的变化？我排队下载几个文件，并以下载状态将其显示在列表中。我只在 DownloadManager.ACTION_DOWNLOAD_COMPLETE 上接收广播，但我想接收一些通知或设置一些侦听器，以便能够跟踪下载请求的更改。我想要显示状态 - 添加到队列、下载、下载...

我看到的唯一方法是查询下载管理器并检查有关状态的每个请求，但我需要在 listadapter getview 方法中执行此操作，并且效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:16:52.703

根据官方文档，没有这样做的好方法。 [http://developer.android.com/reference/android/app/DownloadManager.html](http://developer.android.com/reference/android/app/DownloadManager.html)

我建议要么启动一项服务，要么启动某种后台线程，每隔几秒钟查询一次下载的状态。（在 long[] 中跟踪他们的 id，因为 setFilterById 需要 long[]）

```
long[] ids = new long[MyDownloadQueue.length];
// Look at all these requests I'm building!
ids[i++] = dm.enqueue(request);

Cursor cursor = dm.query(new DownloadManager.Query().setFilterById(ids));
while (cursor.moveToNext()) {
  int columnIndex = cursor.getColumnIndex(DownloadManager.COLUMN_STATUS);
  int status = cursor.getInt(columnIndex);
  int columnReason = cursor.getColumnIndex(DownloadManager.COLUMN_REASON);
  int reason = cursor.getInt(columnReason);
  // your stuff here, recording the status and reason to some in memory map
} 
```

这样，您的列表视图就不必做任何工作，并且 UI 将保持流畅。但是，我知道没有更好的方法，抱歉，我无法提供不涉及查询的答案。

# php - Little Active 记录视图更新

> ID：12635314
> 
> 赞同：0
> 
> 时间：2012-09-28T07:15:28.220
> 
> 标签：php, mysql, activerecord

我需要很少的活动记录帮助。我正在尝试更新我存储在数据库中的页面视图。每次 post() 函数运行时，添加 +1 。这是我的代码：

```
 public function post($id) {
 if($id == NULL){
 redirect('blog');
  }

 else{

 $this->db->where('entry_id',$id);
 $this->db->set('views','views+1');
 $this->db->update('entry'); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:23:45.653

更正您的代码，例如：

```
public function post($id) {
 if(!isset($id) || (int) $id<=0){
 header('Location: /blog');
  }

 else{

 $this->db->where('entry_id',$id);
 $this->db->set('views','views+1');
 $this->db->update('entry');
} 
```

标记`header('Location: /blog')`- 你应该把你博客的真实服务器路径放在这里。如果您使用自定义重定向功能，例如您的`redirect()`then 在调用她之前检查是否是输出。仅当在调用浏览器之前没有将其他输出发送到浏览器时，标头重定向才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:39:41.213

```
 public function post($id) {
 if($id == NULL){
 redirect('blog');
 }

 else{

 $this->db->where('entry_id',$id);
 $this->db->set('views','views+1',FALSE);
 $this->db->update('entry'); 
```

FALSE 关闭活动记录转义，默认情况下它忽略 +1。

# android - Android：反向地理编码不起作用

> ID：12635324
> 
> 赞同：1
> 
> 时间：2012-09-28T07:15:52.903
> 
> 标签：android, gps, reverse-geocoding

显然，我可以获得纬度和经度，但是当我下面的这部分代码用于反向地理编码时，它显示为“服务不可用”。这是什么意思？我在 Android 清单文件中添加了 INTERNET、FINE 和 COARSE 位置的用户权限。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:24:38.773

当您在模拟器上运行应用程序时会出现这种情况，请尝试在实际设备上运行。我认为它会在设备上正常工作。

# java - 当文本从右到左时，确定 JTextArea 区域中存在什么文本

> ID：12635326
> 
> 赞同：3
> 
> 时间：2012-09-28T07:15:56.473
> 
> 标签：java, swing, jtextarea, right-to-left

我有一些代码试图确定文本区域的给定垂直切片内的文本，其中垂直切片被指定为 Y 坐标而不是线条。

顺便说一句，转换为使用线数学是解决这个问题的一个很好的解决方法，所以这就是我要解决的问题，但我可以设想你可能只有一个 Y 坐标的情况，而且看起来像这样的事情会出现，所以无论如何我都会问它。

我将我的问题简化为一个相当简约的（lol Java）示例。我们显示一个带有一些文本的框架，然后尝试确定最接近文本区域开头的文本的字符偏移量。我们从常识中知道它将为 0，但以编程方式解决这个问题是问题所在。

```
public static void main(String[] args) throws Exception {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new RtlTest().run();
        }
    });
}

JFrame frame;
JTextArea textArea;

public void run() {
    textArea = new JTextArea(
        "\u05D4\u05D5\u05D3\u05E2\u05EA \u05D8\u05D9\u05D9\u05D2\u05E8 " +
        "\u05D8\u05E7\u05E1\u05D8 \u05D1\u05E2\u05D1\u05E8\u05D9\u05EA");

    frame = new JFrame();
    frame.setLayout(new BorderLayout());
    frame.add(new JScrollPane(textArea), BorderLayout.CENTER);
    frame.setSize(400, 300);
    frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    frame.setVisible(true);
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            measure();
        }
    });
}

public void measure() {
    try {
        System.out.println("Either the line is left to right or it's right to left " +
                           "(or a mix), so one of these two values should be 0:");
        System.out.println(textArea.viewToModel(new Point(0, 0)));
        System.out.println(textArea.viewToModel(new Point(textArea.getWidth() - 1, 0)));

        Rectangle firstLetterView = textArea.modelToView(0);
        System.out.println("This one should definitely be 0, right? " +
                           "I mean, we got the coordinates from Swing itself:");
        System.out.println(textArea.viewToModel(new Point(firstLetterView.x,
                                                          firstLetterView.y)));

        frame.dispose();
    } catch (BadLocationException e) {
        throw new IllegalStateException(e);
    }
} 
```

输出相当令人惊讶：

```
Either the line is left to right or it's right to left (or a mix),
    so one of these two values should be 0:
23
23
This one should definitely be 0, right? I mean, we got the coordinates from Swing itself:
24 
```

惊喜点：

1.  最靠近左上角的字符不是字符 0。
2.  最靠近右上角的字符不是字符 0。
3.  离字符 0 位置最近的字符不是字符 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:34:55.853

在您的代码中添加以下行：

```
textArea.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); 
```

您的输出数字会改变 - 但您的文本将从文本区域的右侧显示。我希望这是你想要的。

编辑：

根据[这个](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/ComponentOrientation.html)希伯来语和阿拉伯语应该在 RT 方向。

# java - 使用 getCurrentSession 在 jboss 上部署

> ID：12635327
> 
> 赞同：1
> 
> 时间：2012-09-28T07:15:59.423
> 
> 标签：java, hibernate, jboss

我已经在 HibernateDAOFactory 类中实现了基于[Link](https://community.jboss.org/wiki/GenericDataAccessObjects)的 DAO ，有一个方法

```
protected Session getCurrentSession() {
     return HibernateUtil.getSessionFactory().getCurrentSession();
} 
```

为了实现相同的功能，我对 hibernate.cfg.xml 进行了更改，如下面的文章中所述[此处 1](http://docs.jboss.org/hibernate/orm/3.3/reference/en/htmlarchitecture.html#architecture-current-session) [HERE 2](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-j2ee-currentsession)

```
 <property name="transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property><br/>
    <property name="transaction.manager_lookup_class">org.hibernate.transaction.JBossTransactionManagerLookup</property>
    <property name="hibernate.current_session_context_class">thread</property> 
```

在 jboss 上部署时出现以下错误

```
org.hibernate.TransactionException: could not register synchronization 
```

我什至设置了属性

```
<property name="hibernate.current_session_context_class">jta</property> 
```

但我收到以下错误。

```
 Caused by: org.hibernate.HibernateException: Unable to locate current JTA transaction

 at org.hibernate.context.JTASessionContext.currentSession(JTASessionContext.java:88)

 at org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:574) 
```

我在这里错过了什么吗？我的 jboss 版本是 4.2.3，hibernate 版本是 3.3.1，使用 Java 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:53:42.000

对于基于线程的会话管理，我从 hibernate.cfg.xml 中删除了`transaction.factory_class`and`manager_lookup_class`属性，它就像一个魅力。
但是对于基于 jta 的会话管理，我仍然遇到同样的错误。

# javascript - 使用在 IE 8 和 7 中不起作用的类获取标签

> ID：12635330
> 
> 赞同：0
> 
> 时间：2012-09-28T07:16:08.860
> 
> 标签：javascript

我的脚本

```
var cwidth   = document.getElementById('contentarea').clientWidth;
var elements = document.getElementsByClassName("shadow");

for(var i=0; i<elements.length; i++) {
   elements[i].style.width = cwidth+"px";
   var anc = elements[i].getElementsByTagName("a"); // not working in IE 7 & 8
   anc[0].style.width = cwidth+"px";
} 
```

此脚本在除 IE 7 和 8 之外的所有浏览器中运行良好

任何人请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:21:16.873

`getElementsByClassName`IE<9 不支持。

在 IE8 中，您可以使用：

```
var elements = document.querySelectorAll(".shadow"); 
```

但请记住，它不像您使用的*那样*是实时收藏`getElementsByClassName`。如果要查找具有多个类的元素，则必须执行`document.querySelectorAll(".first.second");`.

至于 IE7，你必须依赖其他东西，比如众所周知的框架（比如 jQuery 或只是 Sizzle），或者像这样的函数：

```
var getElementsByClassName = (function(all) {
    return function (cls) {
        var a = [], i = 0;
        for (; i < all.length; i++)
            if ((" " + all[i].className + " ").indexOf(" " + cls + " ") !== -1)
                a.push(all[i]);
        return a;
    };
})(document.all); 
```

这也不是实时集合，而且您将无法搜索具有多个类的元素。也就是说，除非他们在他们的`className`财产中按照您想要的方式订购，但您不能依赖它。你将不得不做一些更复杂的事情，当你在 Javascript 方面有更多经验时，我会把它留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:20:52.183

IE7 和 8 没有函数“getElementsByClassName”，你可以像 jQuery 一样自己构建这个函数。

# android - android - 即使应用程序关闭，如何在不使用数据库的情况下备份数据

> ID：12635331
> 
> 赞同：0
> 
> 时间：2012-09-28T07:16:09.343
> 
> 标签：android

在我的应用程序中，即使应用程序关闭，我也想在不使用本地数据库的情况下维护数据。为此，我在我的应用程序中创建了一个类，因为我创建了静态变量，因此我们可以在应用程序的任何位置访问它们。但是这里有时数据消失了，我不知道为什么会这样。这个过程是好的还是有更好的？在某处我读到共享首选项很有用，但我不知道。请任何人分享您的想法。

```
public class AJ_Constant {

    //New Food Item
    public static String strEntrySavedFoodItem = "";
    public static String strReportsSavedFoodItem = "";
    public static ArrayList<String> arrFoodItems = new ArrayList<String>();
}

public class ReportsContentActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        View contentView = LayoutInflater.from(getParent()).inflate(R.layout.reports_content, null);  
        setContentView(contentView); 
       AJ_Constant.arrFoodItems.add("Sample");      }} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:20:39.400

访问[http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html) 您可以通过创建共享偏好来保存数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:20:49.437

你可以看看[这里](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)。有示例如何使用 SharedPreferences

# c# - MAC OS X Mono 错误：未安装框架“.NETFramework 4.0 客户端配置文件”

> ID：12635335
> 
> 赞同：0
> 
> 时间：2012-09-28T07:16:30.417
> 
> 标签：c#, macos, monodevelop

我使用 Mac OS X 10.8 和 MonoDevelop 3.0.4.7 来编写 C# 项目。我该如何解决这个错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:30:39.617

搜索功能是你的朋友，看看这个： [错误：没有安装框架'.NETFramework 4.0 Client Profile'。对于 MonoDevelop 2.8.1](https://stackoverflow.com/questions/8181081/error-framework-netframework-4-0-client-profile-not-installed-for-monodevel)

Mono 不附带 .NET 中使用的所有配置文件尝试使用 .NET 4.0 完整配置文件

# php - 简短的 URL 个人资料页面

> ID：12635336
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:16:30.590
> 
> 标签：php

我想问你关于 twitter/facebook 的个人资料页面 url。例子 ：

```
twitter.com/stackoverflow 

facebook.com/stackoverflow 
```

现在我想在我的网页中设置，例如：

```
abc.com/nagabotak 
```

我试图在stackoverflow中搜索教程，但我错过了一些我不理解这个概念的东西。

我有一个profiles.php 页面。当前如果我想打开个人资料页面，我必须使用`abc.com/profile.php?user=nagabotak`

所以我想做的是缩短网址`abc.com/nagabotak`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:20:26.960

它调用 URL 重写。

检查更多信息：

[http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/](http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/) http://httpd.apache.org/docs/current/mod/ mod_rewrite.html

使用重写规则创建一个 htaccess，阅读链接，您会发现如何修复它 =)

编辑

这是我的重写规则，我重写到 index.php

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

如果您使用 nginx，请不要忘记，nginx 不使用 .htaccess。

如果你这样做了，你必须创建你想要的路线，比如配置文件/名称

# symfony - 表单事件监听器（如 TrimListener）如何“绑定”到 Symfony 中的表单选项？

> ID：12635338
> 
> 赞同：2
> 
> 时间：2012-09-28T07:16:46.270
> 
> 标签：symfony, symfony-forms

Symfony 中的文本字段类型有一个[修剪选项](http://symfony.com/doc/2.0/reference/forms/types/text.html#trim)。我很确定该`trim()`操作是由[`Form\Extension\Core\EventListener\TrimListener`](https://github.com/symfony/Form/blob/master/Extension/Core/EventListener/TrimListener.php)班级进行的。它是事件的侦听器`PRE_BIND`并调用：

```
$event->setData(trim($event->getData())); 
```

我想提供我自己的`"normalize_spaces"`选择：

```
$builder->add('last_name', 'text', array(
    'label'           => 'Last name',
    'normlize_spaces' => true
)); 
```

我怎样才能提供这个选项与我的`NormalizeSpacesListener`？

```
class NormalizeSpacesListener implements EventSubscriberInterface
{
    public function preBind(FormEvent $event)
    {
        $data = $event->getData();

        if (is_string($data)) {
            $event->setData(preg_replace('/[ ]{2,}/', ' ', $data));
        }
    }

    public static function getSubscribedEvents()
    {
        return array(FormEvents::PRE_BIND => 'preBind');
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T07:20:34.310

我认为您可能会覆盖 Symfony 核心 FormType 类，尤其是 buildForm 方法： [https ://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/FormType.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/FormType.php)

并为该选项添加您的测试，就像他们为修剪选项所做的那样。就像是：

```
Class MyFormType Extends FormType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
         parent::buildForm($builder, $options);

         if ($options['normalize_spaces']) {
             $builder->addEventSubscriber(new NormalizeSpacesListener());
         }
     }
 } 
```

要覆盖该类并让系统使用它而不是默认的核心类，您可以使用服务容器并更改服务 form.type.form 的类

看看它是如何在这里声明的：[https ://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Resources/config/form.xml](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Resources/config/form.xml)

并阅读本文以了解如何实际告诉服务容器使用您自己的类而不是默认类：

[如何覆盖捆绑包的任何部分](http://symfony.com/doc/2.0/cookbook/bundles/override.html#services-configuration)

**注意：**这就是我尝试这样做的方式，但我没有测试我刚刚写的内容

另一种选择是将您的侦听器附加到您构建的每个表单，而不是使其成为默认选项。我认为这也可以。

# winforms - 为 Windows 创建音频图形均衡器

> ID：12635346
> 
> 赞同：1
> 
> 时间：2012-09-28T07:17:15.693
> 
> 标签：winforms, winapi, audio, signal-processing

我需要为Windows 中的应用程序创建一个带有常用**预设的****音频图形均衡器。**我需要在 Windows 中的所有应用程序中**全局应用均衡效果（例如 DFX 音频增强器 v11.1 在系统级别应用效果）。**

 ****目前，我可以使用 Microsoft 提供的 sAPO 示例获取系统音频的帧。但我需要对此应用图形均衡。

Microsoft 是否提供**任何 API 或示例代码**用于在 Windows 中创建图形均衡器？

如果有任何**其他库或开源**项目可以用于此目的，请通知我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T20:59:59.270

您没有说您的关键点是创建音频过滤器还是将您的音频注入系统的音频流。我只能提供一些关于过滤部分的见解。

在抽象意义上，图形均衡器是一组陷波滤波器，每个滤波器都调谐到特定的频率。将您的 EQ 以 1KHz (1000 Hz) 为中心，并以 2 的倍数上下移动。例如：31、62、125、250、500、1000、2000、4000、8000、16000

最好的 eq 系统是一组参数 eq。参数均衡器可以让您设置每个滤波器的特定频率，一个好的参数均衡器插件可以让您根据需要设置尽可能多或尽可能少的滤波器。

因此，您需要构建一个可编程陷波滤波器，然后将它们堆叠起来以获得您需要的尽可能多的频段。

我将首先查看开源程序的功能：[Audacity](http://audacity.sourceforge.net/ "大胆")就是其中之一：您可以探索均衡和音频过滤器插件，看看它们是否满足您的要求。

一些谷歌搜索也发现了这个资源： http: [//music.columbia.edu/cmc/music-dsp/](http://music.columbia.edu/cmc/music-dsp/)

我希望这可以帮助您入门（至少在过滤部分。）如果您知道如何编写一个可以直接将自身注入 Windows 声音架构的实时过滤器，请告诉我们。****

# php - 电子邮件表单超过 20 个值

> ID：12635347
> 
> 赞同：-2
> 
> 时间：2012-09-28T07:17:18.133
> 
> 标签：php, email

我有一个包含 20 多个输入字段的表单。PHP`mail`函数不起作用，因为它只能接受 5 个参数。如何将这些值发送到我的电子邮件地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:26:01.443

```
$to = 'myemail@mydomain.com';
$subject = 'form values';
$message = '';

foreach( $_POST as $key => $ value ) {
  $message .= $key . ' => ' . $value  . '<br>';
}

mail( $to, $subject, $message); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:30:09.270

PHP mail() 函数中的参数有不同的含义。它们不是发送给用户的数据。尝试使用以下脚本，如果可行 - 格式化`$message`以符合您的要求。

```
$email = 'rec@example.com';
$subject = 'Subject';
$message = print_r($_POST,true);
mail($email,$subject,$message); 
```

更多信息可以在@http: [//php.net/manual/en/function.mail.php找到](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:31:27.977

嗯，我不知道你有什么样的输入字段，但它们都可以在“主题”字段中传递。但是，如果您有足够复杂的电子邮件要发送，并且您确实需要自己编写所有内容，则应该查看[PEAR](http://pear.php.net/package/Mail/docs)。

因此，要么将 20 个输入字段添加到主题`$subject .= 20things`中，要么使用本质上安全的工具，而无需记住转义输入并使用正则表达式进行验证。

# php - 为什么浮动！=浮动

> ID：12635354
> 
> 赞同：2
> 
> 时间：2012-09-28T07:17:35.437
> 
> 标签：php, floating-point

```
$a     = 100;
$b     = 3;
$test1 = $a/ $b;
$test2 = 33.333333333333;  // $test2 == $test1

var_dump(($test1 * $b));   // float(100)
var_dump(($test2 * $b));   // float(99.999999999999) 
```

对此有何解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T07:18:54.383

`100/3`结果`33.3-repeating`。

没有小数点值会显示它。在数学中，这样的数字通常由重复值上方的一个小点表示。（虽然我不知道如何在这个代码框中显示）。

请参阅此[wiki 文章](http://en.wikipedia.org/wiki/Repeating_decimal)以了解它们在各个地方的表示方式以及我在此处给出的更详细的解释。

但是，这里的文章是摘要的片段：

> 在算术中，重复小数是表示有理数的一种方式。因此，如果一个数字的十进制表示在某个点变成周期性的，即如果存在无限重复的某些有限的数字序列，则称为重复小数（或循环小数）。例如，1/3 = 0.3333333… 或 0.3 的十进制表示（称为“0.3 重复”或“0.3 重复”）在小数点后变为周期性，无限重复个位数序列“3”。一个稍微复杂一点的例子是 3227/555 = 5.8144144144...，其中十进制表示在小数点后的第二个数字处变为周期性，无限地重复数字序列“144”。

现在，这是您问题的症结所在，但也要记住（正如其他两个答案所指出的那样），浮点数在计算和比较方面非常不*准确*。快速搜索该站点会发现一小群人对浮点的内部表示存在问题 - 主要是在进行比较时导致意外行为。

仔细阅读关于[浮点数据类型](http://php.net/manual/en/language.types.float.php)的 PHP 警告- 我再次在这里复制了重要的部分：

> 此外，可以精确表示为以 10 为底的浮点数的有理数，如 0.1 或 0.7，没有精确表示为以 2 为底的浮点数，无论尾数大小如何，它都在内部使用。因此，它们不能被转换成它们内部的二进制对应物，而不会有小的精度损失。这可能会导致令人困惑的结果：例如， floor((0.1+0.7)*10) 通常会返回 7 而不是预期的 8，因为内部表示将类似于 7.9999999999999991118...。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:20:22.683

并非所有`float`s 都可以由处理器精确表示。`$a/$b`是其中之一。

所以，`$test1 != $test2`是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:24:29.330

来自**[PHP的信息](http://php.net/manual/en/language.types.float.php)**

> **警告**
> 
> **浮点精度**
> 
> 浮点数的精度有限。尽管取决于系统，但 PHP 通常使用 IEEE 754 双精度格式，由于在 1.11e-16 的数量级四舍五入，这将给出最大的相对误差。非初等算术运算可能会产生更大的误差，当然，当多个运算复合时，必须考虑误差传播。
> 
> 此外，可以精确表示为以 10 为底的浮点数的有理数，如 0.1 或 0.7，没有精确表示为以 2 为底的浮点数，无论尾数大小如何，它都在内部使用。因此，它们不能被转换成它们内部的二进制对应物，而不会有小的精度损失。这可能会导致令人困惑的结果：例如， floor((0.1+0.7)*10) 通常会返回 7 而不是预期的 8，因为内部表示将类似于 7.9999999999999991118...。
> 
> 所以永远不要相信浮点数结果到最后一位，也不要直接比较浮点数是否相等。如果需要更高的精度，可以使用任意精度的数学函数和 gmp 函数。

As noted in the warning above, testing floating point values for equality is problematic, due to the way that they are represented internally. However, there are ways to make comparisons of floating point values that work around these limitations.

To test floating point values for equality, an upper bound on the relative error due to rounding is used. This value is known as the [**machine epsilon**](http://en.wikipedia.org/wiki/Machine_epsilon), or unit roundoff, and is the smallest acceptable difference in calculations.

**Many thanks to all who took the time to answer my question**

# android - 选择联系人姓名和电子邮件（如果存在）

> ID：12635357
> 
> 赞同：0
> 
> 时间：2012-09-28T07:18:02.273
> 
> 标签：android, android-contacts

用户从他们的联系人中选择一个联系人，这是回调函数（我正在跳过`onActivityResult(...)`代码，它工作正常）：

```
private User addUserFromContactData(Intent data) {
    Uri contactData = data.getData();

    // Cursor loader to query contact information
    CursorLoader cl = new CursorLoader(this);
    String[] projection = { ContactsContract.Contacts.DISPLAY_NAME,
        ContactsContract.CommonDataKinds.Email.DATA };
    cl.setProjection(projection);
    cl.setUri(ContactsContract.CommonDataKinds.Email.CONTENT_URI);
    cl.setSelection(ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?");
    cl.setSelectionArgs(new String[] { contactData.getLastPathSegment() });

    // Execute query and get results from cursor
    Cursor c = cl.loadInBackground();
    final int nameIndex = c.getColumnIndex(projection[0]);
    final int emailIndex = c.getColumnIndex(projection[1]);

    User user = null;
    if (c.moveToFirst()) {
        user = new User();
        user.setName(c.getString(nameIndex));
        user.setEmail(c.getString(emailIndex));
    }

    c.close();
    return user;
} 
```

此方法适用于具有电子邮件地址的联系人。但是当我选择一个没有它的联系人时，找不到任何结果。电子邮件对我来说是可选的，所以如果没有电子邮件，我只会使用联系人姓名。好像我只选择带有电子邮件地址的联系人。

谁能帮我？也许我需要查询两次，第一次获取姓名，第二次获取可选电子邮件？

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:55:08.110

解决了。为此，需要两个查询（如果我只能用一个查询，请纠正我）：

```
private User addUserFromContactData(Intent data) {
    Uri contactData = data.getData();

    // Cursor loader to query contact name
    CursorLoader clName = new CursorLoader(this);
    clName.setProjection(new String[] { ContactsContract.Contacts.DISPLAY_NAME });
    clName.setUri(ContactsContract.Contacts.CONTENT_URI);
    clName.setSelection(ContactsContract.Contacts._ID + " = ?");
    clName.setSelectionArgs(new String[] { contactData.getLastPathSegment() });

    // Cursor loader to query optional contact email
    CursorLoader clEmail = new CursorLoader(this);
    clEmail.setProjection(new String[] { ContactsContract.CommonDataKinds.Email.DATA });
    clEmail.setUri(ContactsContract.CommonDataKinds.Email.CONTENT_URI);
    clEmail.setSelection(ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?");
    clEmail.setSelectionArgs(new String[] { contactData.getLastPathSegment() });

    // Execute queries and get results from cursors
    Cursor cName = clName.loadInBackground();
    Cursor cEmail = clEmail.loadInBackground();
    final int nameIndex = cName.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
    final int emailIndex = cEmail.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA);

    User user = null;
    if (cName.moveToFirst()) {
        user = new User();
        user.setName(cName.getString(nameIndex));
    }

    // This only could be true if selected contact has at least one email
    if (cEmail.moveToFirst() && user != null) {
        user.setEmail(cEmail.getString(emailIndex));
    }

    cName.close();
    cEmail.close();
    return user;
} 
```

Thanks for the clue [@Luksprog](https://stackoverflow.com/users/493939)! In previous code I was only querying contacts with email, because `CursorLoader`'s `Uri` was `ContactsContract.CommonDataKinds.Email.CONTENT_URI`.

# android - 调用 removeDialog 后进度对话框未关闭

> ID：12635359
> 
> 赞同：0
> 
> 时间：2012-09-28T07:18:04.673
> 
> 标签：android, progressdialog

我正在使用进度对话框来显示活动的进度。它开始运行，但即使在调用 removeDialog() 后它也不会关闭。这是代码：

```
public class MainActivity extends Activity {
    static final int PROGRESS_DIALOG = 0;
    ProgressDialog progressDialog = null;
    ProgressBar progressBar;
    MagickImage img = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        // InputStream stream = getResources().openRawResource(R.raw.app_notes);

        try {
            img = new MagickImage(new ImageInfo("/mnt/sdcard/image_background.jpg"));

//          setContentView(R.layout.main);
            Spinner s = (Spinner) findViewById(R.id.spinner);
            progressBar = (ProgressBar) findViewById(R.id.progressBar);

            ArrayAdapter adapter = ArrayAdapter.createFromResource(MainActivity.this,R.array.effects, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            s.setAdapter(adapter);

            s.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> parent, View view,
                       int pos, long id) {
                    ProgressThread t = new ProgressThread(img, pos);
                    t.run();
                 //   progressDialog.dismiss();;

                }

                public void onNothingSelected(AdapterView<?> parent) {
                    // D       o nothing.
                }
            });

            ImageView iv = (ImageView) findViewById(R.id.imageView);
            iv.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
            iv.setAdjustViewBounds(true);
            BitmapFactory.Options options=new BitmapFactory.Options();
            options.inSampleSize=8; //try to decrease decoded image
            options.inPurgeable=true; //if necessary purge pixels into disk
            options.inScaled=true; //scale down image to actual device density
            iv.setImageBitmap(MagickBitmap.ToBitmap(img));
        } catch (MagickApiException e) {
            e.printStackTrace();
        } catch (MagickException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        /*
         * TextView tv = new TextView(this);
         * tv.setText(DisplayImageMetaData.displayMagickImage(img));
         * setContentView(tv);
         */
    }

    protected Dialog onCreateDialog(int id, Bundle bundle) {
        switch (id) {
        case PROGRESS_DIALOG:
            /*
             * ProgressDialog dialog =
             * ProgressDialog.show(AndroidMagickActivity.this, "",
             * "Loading. Please wait...", true);
             */
            progressDialog = new ProgressDialog(MainActivity.this);
            progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressDialog.setMessage("Loading...");
            progressDialog.show(MainActivity.this,"", "Loading... Please Wait", true);
            return progressDialog;
            // return dialog;
        default:
            return null;
        }
    }

    /** Nested class that performs progress calculations (counting) */
    private class ProgressThread extends Thread {

        MagickImage img;
        int pos;

        ProgressThread(MagickImage image, int pos) {
            this.img = image;
            this.pos = pos;
        }

        public void run() {

            int effect = 0;
            MainActivity.this.showDialog(PROGRESS_DIALOG);
            new BackgroundAsyncTask().execute();
            switch (pos) {
            case 1:
                effect = NoiseType.UndefinedNoise;
                break;
            case 2:
                effect = NoiseType.UniformNoise;
                break;
            case 3:
                effect = NoiseType.GaussianNoise;
                break;
            case 4:
                effect = NoiseType.MultiplicativeGaussianNoise;
                break;
            case 5:
                effect = NoiseType.ImpulseNoise;
                break;
            case 6:
                effect = NoiseType.LaplacianNoise;
                break;
            case 7:
                effect = NoiseType.PoissonNoise;
                break;
            }
            Bitmap bitmap = null;
            try {
                ImageView iv = (ImageView) findViewById(R.id.imageView);

                MagickImage image = null;
                if (pos < 8)
                    image = img.addNoiseImage(effect);
                else if (pos == 9)
                    image = img.blurImage(5, 1);
                else if (pos == 10)
                    image = img.charcoalImage(5, 1);
                else if (pos == 11)
                    image = img.edgeImage(0);
                if (image != null) {
                      iv.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
                      iv.setAdjustViewBounds(true);
                      BitmapFactory.Options options=new BitmapFactory.Options();
                      options.inSampleSize=8; //try to decrease decoded image
                      options.inPurgeable=true; //if necessary purge pixels into disk
                      options.inScaled=true; //scale down image to actual device density
                      bitmap = MagickBitmap.ToBitmap(image);
                      iv.setImageBitmap(bitmap);
                }

                MainActivity.this.removeDialog(PROGRESS_DIALOG);
            } catch (MagickException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally
            {
                MainActivity.this.removeDialog(PROGRESS_DIALOG);
            }
        }
    }    
} 
```

我不知道我在犯哪个错误。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:20:26.250

尝试：

```
ProgressDialog.dismiss(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:19:37.557

您可以使用：

```
progressDialog.dismiss(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:21:09.810

您可以尝试保留对对话框的引用，然后调用`progressDialog.dismiss()`. 我不确定为什么你的不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:03:55.537

如果（ProgressDialog.isShowing（））{

ProgressDialog.dismiss();

}

# c# - 与继续使用 .NET Remoting 相比，将我们的应用程序迁移到 WCF 有什么好处？

> ID：12635360
> 
> 赞同：9
> 
> 时间：2012-09-28T07:18:06.363
> 
> 标签：c#, wcf, c#-4.0, remoting, .net-remoting

好的，所以我在 StackOverflow 上问了几个关于 .NET Remoting 的问题，并且总是至少有一个人不得不插话，“.NET Remoting 已被弃用，请改用 WCF。” 我了解它已被弃用，并且不保证将来支持新版本的 .NET Framework。但是我们想要转移到 WCF 的其他一些好的理由是什么？我已经看到了 .NET Remoting 的一些小问题，但是，这还不足以改变那些坚信“如果它没有损坏，就不要修复它”的权力的想法。目前，态度会改变的唯一原因是如果 .NET Remoting 从未来版本的 .NET Framework 中删除，那么谁知道这会持续多久？

有没有人知道为什么 WCF 比 .NET Remoting“更好”，或者为什么 Remoting 不如 WCF？每种技术的优缺点是什么？您是否可以使用 WCF 而不是 Remoting 执行其他操作？

我的意思是，如果我能说服他们让我们将软件迁移到 WCF 只是为了允许在客户端设置可配置的 TcpChannel 超时（无论采取什么步骤，这似乎已经中断了一段时间）或故障排除我尝试），当这种情况发生时，它使我们的软件看起来像绝对的垃圾。

提前感谢您帮助阐明这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T07:36:00.620

有很多理由放弃远程处理；一些可能包括：

*   缺乏运输灵活性
*   版本控制要求是巨大的痛苦
*   平台相关（跨平台使用的可能性不大）
*   没有机会从不断增长的移动市场中使用
*   缺乏未来的发展：你想添加的任何功能 - 它不会是

但是，我不同意 WCF 是自动替换；WCF 本身是一个非常通用的工具，但可能非常复杂，并且有其自身的限制。我自己没有使用过它，但我看到***很多***对[Service Stack](http://www.servicestack.net/)的赞誉，基本上用户将其描述为“WCF 做得对”，即 WCF 的优点，没有痛点。但是，还有很多其他选择。不过，Service Stack 的一个优点是它的迭代速度非常快，如果它缺少你想要的东西，*你可以改变它*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T07:37:28.160

.NET Remoting 现在是一项遗留技术，引用自 MSDN：

> 本主题特定于为与现有应用程序向后兼容而保留的遗留技术，不建议用于新开发。现在应该使用 Windows Communication Foundation (WCF) 开发分布式应用程序。

这是 2007 年完成的 WCF 和 .NET Remoting 之间的性能比较：http: [//msdn.microsoft.com/en-us/library/bb310550.aspx](http://msdn.microsoft.com/en-us/library/bb310550.aspx)

> 总结结果，**WCF**比 ASP.NET Web 服务快 25%—50%，比**.NET Remoting快大约****25%**。

 **所以我想速度是放弃 .NET Remoting 的一个很好的理由。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T00:05:04.717

虽然给定的原因可能是驱动因素，但还有其他重要的原因：

*   运输独立
*   IDE工具
*   易于测试
*   可维护性

当您使用 WCF 时，您只需编辑配置文件即可更改传输。当某些不诚实的系统管理员不会打开端口并且您需要在端口 80 上使用 HTTP 以通过公司防火墙时，这可能非常方便。

Visual Studio 中的 WCF 工具非常出色。最困难的部分是找出您需要的 URL。之后，只需点击即可生成代码。集合序列化有一两个陷阱，但从广义上讲，如果你告诉两端都使用数组，它就可以正常工作。如果您在目的地需要一个集合，您总是可以围绕接收到的数组构造一个集合，并且由于 LINQ 很乐意对数组进行操作，您可以将其折叠到其他转换中。

我不确定 Stephan P 所说的痛点是什么意思。编辑配置可能很棘手，但 Microsoft 提供了一个出色的 GUI 工具，它通过提供完整的选项树并生成稀疏配置文件来消除所有猜测。

WCF 服务易于测试，因为它们具有一个已发布的接口，您可以将测试工具连接到该接口。总的来说，这更像是 SoA 的优点，而不是 WCF 的优点，但它仍然是可取的。

WCF 使我的代码中的事情变得更加简单，因为应用程序和服务都没有被“路由”代码污染（以确定应该处理消息内容的内容）；它看起来像简单的方法调用或实现。我主要使用 WCF 作为 MSMQ 的包装器，传输选择的唯一可见结果是这些方法调用必须都是 void 函数，因为它是 OneWay 传输。但是当重点是持续排队时，这并不奇怪。

这一切都说明了可维护性。即使对于内部应用程序，维护也是主要成本，当您在客户站点支持您的软件时，可维护性差可能会造成严重后果。

然后是与其他不兼容平台的互操作性。在这种情况下，我正在考虑使用 HTTP/XML 或 HTTP/JSON 为用（例如）PHP 编写的 Web 应用程序提供服务。

走另一条路不是那么容易，但它相当简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T10:57:24.897

我在日志记录和安全性方面为 WCF 打分。

**日志记录** WCF 具有集成的日志记录机制，可帮助您记录在维护期间成为福音的跟踪。在其他技术中，开发人员必须做一些工作来实现这一点，但在 WCF 中，我们所要做的就是通过更改配置文件来启用跟踪，然后 WCF 开始为您提供跟踪。

**从实现者的角度来看，WCF 中的安全** 机制相当简单且开箱即用，但非常健壮且高度安全。最好的部分是，对于高度使用和推荐的绑定，WCF 提供了可以信任核心的默认安全性。WSHTTPbinding 上的消息安全性就是这些行中的一个示例。

默认情况下，.NET Framework 远程处理不进行身份验证或加密。因此，建议您在与客户端或服务器进行远程交互之前采取所有必要的步骤来确定它们的身份

此外，WCF 是一个在微软平台下开发面向服务的应用程序的框架，混合了消息和 rpc 编程风格。哪个不在远程处理中。远程处理基本上只面向 rpc。**

# html - 在图片下方显示链接

> ID：12635363
> 
> 赞同：1
> 
> 时间：2012-09-28T07:18:19.157
> 
> 标签：html, css

我在这样的网页上显示一组带有链接的缩略图

![在此处输入图像描述](../Images/28486bab05a89bf1f1bb43f37dcf366a.png)

这是HTML

```
<div id="newsletters-and-journals">
    <p id="pubs-caption">Publications</p>
    <ul>
        <li class="pubs">
            <img class="pub-cover" src="images/CXuyv.png" />
            <span><a href="#">Journal - January 2012</a></span>
        </li>
        <li class="pubs">
            <img class="pub-cover" src="images/vER9H.png" />
            <span><a href="#">Newsletter - May 2012</a></span>
        </li>
    </ul>
</div>​ 
```

和 CSS

```
#newsletters-and-journals ul { position:relative; top:12px; left:30px; }
.pubs { display:inline; margin-right:60px; }
.pub-cover { width:120px; height:140px; }​ 
```

也是一个小提琴[http://jsfiddle.net/nK0de/3jeVF/2/](http://jsfiddle.net/nK0de/3jeVF/2/)

如何在每个相应图像**下显示链接？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:29:41.023

它也有效：

```
.pubs {
  display: inline-block;
  margin-right: 60px;
  width: 120px;
} 
```

`width`是你的图像的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:24:29.917

您可以制作`<img>`或制作`<span>``display:block`

[http://jsfiddle.net/3jeVF/6/](http://jsfiddle.net/3jeVF/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:36:27.240

要解决您的问题，只需在 img 和 span 标签之间添加一个 br 标签。

# symfony-1.2 - 创建symfony1.2现有项目新模块？

> ID：12635366
> 
> 赞同：0
> 
> 时间：2012-09-28T07:18:26.937
> 
> 标签：symfony-1.2

如果我在现有项目中创建新模块，则不会创建表并在
命令行中显示应用程序前端不存在消息显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:37:20.970

不确定我是否正确理解您的问题；创建模块时，它不会创建表（即数据库表）；它只会在您的应用程序的 modules/ 文件夹中创建一个目录（例如 frontend/modules）；在这个目录中，它创建了一个包含 actions.class.php 文件的操作文件夹，以及一个模板模块。

当您想要更改数据库时，这取决于您使用的是推进还是教义。

例如，使用 Propel，你要做的是：

*   您更新 config/schema.yml 中的表和列定义；
*   您运行以下脚本：
    *   symfony propel:build-model（创建类）；
    *   symfony propel:build-forms（创建相关的表单）；
    *   symfony propel:build-filters（创建过滤器）；
    *   symfony propel:build-sql（使用新表创建新的完整 SQL 文件）；
    *   symfony propel:insert-sql（处理数据库中的 SQL 文件——注意它会覆盖您的实际数据库；如果您已经有要保存的数据，我建议您在数据库中手动添加表）。

# jquery - 修复页面显示区域的上下文菜单

> ID：12635368
> 
> 赞同：1
> 
> 时间：2012-09-28T07:18:30.510
> 
> 标签：jquery, contextmenu

我正在使用[这个上下文菜单](http://www.abeautifulsite.net/blog/2008/09/jquery-context-menu-plugin/)。它与奇怪的行为完美结合。
上下文菜单的左上角始终出现在鼠标指针的位置。
因此，当用户在页面的几乎底部单击鼠标右键时，上下文菜单会隐藏在页面下方并向页面添加滚动条。要查看此隐藏菜单，用户需要向下滚动页面。它在取消选择上下文菜单后重置滚动条。

更多说明：
**这是一个普通的窗口：**
![普通窗口](../Images/c708c8abb25d3d0e0bdbb19d946dfbac.png)

**右键单击第 5 项后：**
![带有上下文菜单](../Images/4b7a6d1e9c2a80e28f56cec058f42966.png)

无论用户点击哪里，我怎样才能避免这种情况并强制上下文菜单留在页面上？

# ruby-on-rails - Hartl 的教程 - 第 5.3 章布局链接

> ID：12635369
> 
> 赞同：2
> 
> 时间：2012-09-28T07:18:35.787
> 
> 标签：ruby-on-rails, ruby, rspec, routes, railstutorial.org

好的......在发布这个问题时有点犹豫，但这里是：

它实际上很像这个[问题](https://stackoverflow.com/questions/12240868/undefined-local-variable-or-method-root-path-hartls-tutorial-chapter-5-3-2)。

我的规范测试也失败了......但我不太关心那个 b/c 它只涉及所有页面的标题......（我可以很容易地修复）

我真正想知道的是路线问题。

在遵循[第 5.3.2 节铁路路线](http://ruby.railstutorial.org/chapters/filling-in-the-layout.html#sec-rails_routes)中的所有 hartl 指示之后，这就是我得到的：

```
No route matches [GET] "/static_pages/about"
No route matches [GET] "/static_pages/home"
No route matches [GET] "/static_pages/help"
No route matches [GET] "/static_pages/contact" 
```

**config/routes.rb 设置**

```
SampleApp::Application.routes.draw do
   root to: 'static_pages#home'
   match '/help',    to: 'static_pages#help'
   match '/about',   to: 'static_pages#about'
   match '/contact', to: 'static_pages#contact' 
```

我可以通过在“/help”、“/about”和“/contact”前面加上“static_pages”来修复上面的三个页面......

它仍然没有解决主页问题。

将此添加到 spec_helper.rb 没有帮助（来自链接）

```
config.include Rails.application.routes.url_helpers 
```

我在这里遗漏了什么，我需要添加哪些其他信息才能使问题更清楚？

测试由以下语句完成： bundle exec rspec spec/requests/static_pages_spec.rb

**这是运行语句后的终端**

```
Failures:

1) Static pages About page should have the h1 'About Us'
 Failure/Error: visit '/static_pages/about'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/about"
 # ./spec/requests/static_pages_spec.rb:46:in `block (3 levels) in <top (required)>'

 2) Static pages About page should not have a custom page title
 Failure/Error: visit '/static_pages/about'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/about"
 # ./spec/requests/static_pages_spec.rb:57:in `block (3 levels) in <top (required)>'

 3) Static pages About page should have the base title
 Failure/Error: visit '/static_pages/about'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/about"
 # ./spec/requests/static_pages_spec.rb:51:in `block (3 levels) in <top (required)>'

 4) Static pages Home page should have the h1 'Sample App'
 Failure/Error: visit '/static_pages/home'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/home"
 # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

 5) Static pages Home page should not have a custom page title
 Failure/Error: visit '/static_pages/home'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/home"
 # ./spec/requests/static_pages_spec.rb:19:in `block (3 levels) in <top (required)>'

 6) Static pages Home page should have the base title
 Failure/Error: visit '/static_pages/home'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/home"
 # ./spec/requests/static_pages_spec.rb:13:in `block (3 levels) in <top (required)>'

 7) Static pages Help page should have the h1 'Help'
 Failure/Error: visit '/static_pages/help'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/help"
 # ./spec/requests/static_pages_spec.rb:27:in `block (3 levels) in <top (required)>'

 8) Static pages Help page should not have a custom page title
 Failure/Error: visit '/static_pages/help'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/help"
 # ./spec/requests/static_pages_spec.rb:38:in `block (3 levels) in <top (required)>'

 9) Static pages Help page should have the base title
 Failure/Error: visit '/static_pages/help'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/help"
 # ./spec/requests/static_pages_spec.rb:32:in `block (3 levels) in <top (required)>'

 10) Static pages Contact page should have the h1 'Contact'
 Failure/Error: visit '/static_pages/contact'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/contact"
 # ./spec/requests/static_pages_spec.rb:65:in `block (3 levels) in <top (required)>'

 11) Static pages Contact page should have the title 'Contact'
 Failure/Error: visit '/static_pages/contact'
 ActionController::RoutingError:
   No route matches [GET] "/static_pages/contact"
 # ./spec/requests/static_pages_spec.rb:70:in `block (3 levels) in <top (required)>'

 Finished in 0.14305 seconds
 11 examples, 11 failures

 Failed examples:

 rspec ./spec/requests/static_pages_spec.rb:45 # Static pages About page should have the h1 'About Us'
 rspec ./spec/requests/static_pages_spec.rb:56 # Static pages About page should not have a custom page title
 rspec ./spec/requests/static_pages_spec.rb:50 # Static pages About page should have the base title
 rspec ./spec/requests/static_pages_spec.rb:7 # Static pages Home page should have the h1 'Sample App'
 rspec ./spec/requests/static_pages_spec.rb:18 # Static pages Home page should not have a custom page title
 rspec ./spec/requests/static_pages_spec.rb:12 # Static pages Home page should have the base title
 rspec ./spec/requests/static_pages_spec.rb:26 # Static pages Help page should have the h1 'Help'
 rspec ./spec/requests/static_pages_spec.rb:37 # Static pages Help page should not have a custom page title
 rspec ./spec/requests/static_pages_spec.rb:31 # Static pages Help page should have the base title
 rspec ./spec/requests/static_pages_spec.rb:64 # Static pages Contact page should have the h1 'Contact'
  rspec ./spec/requests/static_pages_spec.rb:69 # Static pages Contact page should have the title 'Contact' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:24:47.737

尽管您有一个根映射，它将“/”请求路由到 StaticPagesController 主页操作，但您没有路由的映射`static_pages/home`。要添加它：

```
 match 'static_pages/home',    to: 'static_pages#home' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T07:04:17.403

在您的计算机上使用旧版本的 Rails 时，您可能正在使用 Hartl 书籍的 Rails 4 版本。试试 Hartl 书的 Rails 3.2 版本： [http ://ruby.railstutorial.org/chapters/filling-in-the-layout?version=3.2#sec-rails_routes](http://ruby.railstutorial.org/chapters/filling-in-the-layout?version=3.2#sec-rails_routes)

# delphi - 如何在 Firemonkey 中创建径向渐变

> ID：12635372
> 
> 赞同：5
> 
> 时间：2012-09-28T07:18:43.153
> 
> 标签：delphi, firemonkey

我在表单的 OnPaint 事件上有一个带有以下代码的 FireMonkey 表单。我期待一个带有径向渐变的球，但我只得到一个红球，没有渐变。问题是我做错了什么。在 XE3 上运行它。如果我将渐变样式更改为 gsLinear，我会得到一个线性渐变。还有什么我必须指定才能显示径向渐变吗？

```
 procedure TForm2.FormPaint(Sender: TObject; Canvas: TCanvas; const ARect: TRectF);
 var MyRect : TRectF;
 begin
   MyRect.Create (85, 85, 115, 115);

   Canvas.Fill.Gradient.Style := TGradientStyle.gsRadial;
   Canvas.Fill.Gradient.Color := claRed;
   Canvas.Fill.Gradient.Color1 := claBlue;
   Canvas.Fill.Kind := TBrushKind.bkGradient;
   Canvas.FillEllipse (MyRect, 100);
 end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:09:00.040

FireMonkey 中似乎有一个错误。如果在 0,0 处绘制椭圆，则径向渐变是可见的。当椭圆在其他地方绘制时，渐变原点不会移动，而是停留在原点（尽管现在不可见）。该错误显然已于今天被报告，何时修复它是另一回事。解决方法是修补 FMX 源代码（但我没有修补程序）或使用 TEllipse 组件。

# javascript - 有没有办法在 Javascript 中进行函数重载？

> ID：12635373
> 
> 赞同：1
> 
> 时间：2012-09-28T07:18:44.653
> 
> 标签：javascript, jquery

我的代码如下所示：

```
function getTopicOptions(accountID, showTitles, showSelectGroup) {
    "use strict";

    var accountID = store.getItem('AccountID');  
    showTitles = (showTitles !== 'undefined') ? showTitles : 'Y';
    showSelectGroup = (showSelectGroup !== 'undefined') ? showSelectGroup : 'Y'; 
```

这个想法是，如果未提供 showTitle 和 showSelectGroup，那么它们将获得默认值“Y”。

有没有办法通过函数重载或检查函数参数的方法（jslint？）或在没有未定义检查的情况下简化我需要做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:21:53.977

你可以这样做：

```
showTitles = showTitles || 'Y'; 
```

或者这也可以，但更冗长

```
showTitles = showTitles ? showTitles : 'Y'; 
```

我不确定你的问题在哪里出现函数重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:28:35.443

有一个流行的默认参数技巧：

```
var showSelectGroup = showSelectGroup || false; 
```

但它取决于参数，如果它`bool`（`''`等`0`）并且看起来`showSelectGroup || true`你无法设置`false`

还请看：

*   [为 JavaScript 函数设置默认参数值 [关闭]](https://stackoverflow.com/questions/894860/set-a-default-parameter-value-for-a-javascript-function)
*   [有没有更好的方法在 Javascript 中执行可选函数参数？](https://stackoverflow.com/questions/148901/is-there-a-better-way-to-do-optional-function-parameters-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:22:13.943

**编辑**

以下是可能的

```
var functionTest = function(argu) {
        argu = argu || 'my argument';//ifargu not passed than 'my argument'
        return argu;
};

alert(functionTest());
// browser alerts "my argument" 
```

* * *

javascript中没有函数重载的方法，

但是如果你没有在函数中传递 vlaue，它就变成了 undefined vlaue，这意味着你可以像这样调用函数

这个函数

```
getTopicOptions(accountID, showTitles, showSelectGroup) 
```

可以称为

```
getTopicOptions(1); 
```

其他两个值变得未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:26:15.560

有一个`arguments`对象（或多或少）是所有提供的参数的数组。你可以遍历这些。

请参阅[http://javascriptweblog.wordpress.com/2011/01/18/javascripts-arguments-object-and-beyond/](http://javascriptweblog.wordpress.com/2011/01/18/javascripts-arguments-object-and-beyond/)

# php - 如何在调用 exec() 后强制 PHP 脚本继续执行脚本？

> ID：12635375
> 
> 赞同：2
> 
> 时间：2012-09-28T07:18:44.653
> 
> 标签：php, exec

我正在使用`exec`PHP 中的函数来运行命令。我正在运行的命令通常会花费相当多的时间，而且我不需要阅读它的输出。`exec`有没有一种简单的方法告诉 PHP在继续执行脚本的其余部分之前不要等待命令完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:44:53.417

```
// nohup_test.php:

// a very long running process
$command = 'tail -f /dev/null';
exec("nohup $command >/dev/null 2>/dev/null &"); // here we go
printf('run command: %s'.PHP_EOL, $command);
echo 'Continuing to execute the rest of this script instructions'.PHP_EOL;

for ($x=1000000;$x-->0;) {
  for ($y=1000000;$y-->0;) {
    //this is so long, so I can do ps auwx | grep php while it's running and see whether $command run in separate process
  }
} 
```

运行 nohup_test.php：

```
$ php nohup_test.php
run command: tail -f /dev/null
Continuing to execute the rest of this script instructions 
```

让我们找出进程的 pid：

```
$ ps auwx | grep tail
nemoden   3397  0.0  0.0   3252   636 pts/8    S+   18:41   0:00 tail -f /dev/null
$ ps auwx | grep php
nemoden   3394 82.0  0.2  31208  6804 pts/8    R+   18:41   0:04 php nohup_test.php 
```

如您所见， pid 是不同的，我的脚本正在运行而无需等待`tail -f /dev/null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:33:45.623

这是我使用的（您可以使用 exec 或 system 代替 paasthru）：

```
passthru("/path/to/program args >> /path/to/logfile 2>&1 &"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:35:58.023

您要查找的内容称为异步调用，如下所示：

[PHP中的异步shell exec](https://stackoverflow.com/questions/222414/asynchronous-shell-exec-in-php)

[php执行一个后台进程](https://stackoverflow.com/questions/45953/php-execute-a-background-process#45966)

[PHP exec() 作为后台进程（Windows Wampserver 环境）](https://stackoverflow.com/questions/5367261/php-exec-as-background-process-windows-wampserver-environment)

# php - 使用 JQuery 显示单选框值

> ID：12635379
> 
> 赞同：0
> 
> 时间：2012-09-28T07:19:03.780
> 
> 标签：php, jquery

我的 HTML 和 JQuery 代码如下：

```
<form  action="" method="post" id="myform">
  <table border="0" class="table table-striped">
    <tr>
      <td colspan="7"><div class="title">CONNAISSANCE ET EXPERIENCE (O/E/AM/Cadres)</div></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
    </tr>

    <tr>
      <td>
        <ul type="circle">
          <li>1\. Des techniques et pratiques du métier</li>
        </ul>
      </td>
      <td></td>
      <td><input  type="radio" class="validate[required] radio" name="number1" id="number1" value="1"></td>
      <td><input name="number1" class="validate[required] radio" type="radio" id="number1" value="2"></td>
      <td><input name="number1" class="validate[required] radio" type="radio" id="number1" value="3"></td>
      <td><input name="number1" class="validate[required] radio" type="radio" id="number1" value="4"></td>
      <td><input name="number1" class="validate[required] radio" type="radio"  id="number1" value="5"></td>
    </tr>

    <tr>
      <td>
        <ul type="circle">
          <li>2\. Capacité d’apprentissage et d’adaptation</li>
        </ul>
      </td>
      <td></td>
      <td><input class="validate[required] radio" type="radio" name="number2" value="1"></td>
      <td><input class="validate[required] radio" name="number2" type="radio" value="2"></td>
      <td><input class="validate[required] radio" name="number2" type="radio" value="3"></td>
      <td><input class="validate[required] radio" name="number2" type="radio" value="4"></td>
      <td><input class="validate[required] radio" name="number2" type="radio" value="5"></td>
    </tr>
    <tr>
      <td><ul type="circle">
          <li>3\. Productivité/Rendement</li>
        </ul></td>
      <td></td>
      <td><input class="validate[required] radio" type="radio" name="number3" value="1"></td>
      <td><input class="validate[required] radio" name="number3" type="radio" value="2"></td>
      <td><input class="validate[required] radio" name="number3" type="radio" value="3"></td>
      <td><input class="validate[required] radio" name="number3" type="radio" value="4"></td>
      <td><input class="validate[required] radio" name="number3" type="radio" value="5" /></td>
    </tr>
    <tr>
      <td><ul type="circle">
          <li>4\. Polyvalenc</li>
        </ul></td>
      <td></td>
      <td><input class="validate[required] radio" type="radio" name="number4" value="1"></td>
      <td><input class="validate[required] radio" name="number4" type="radio" value="2"></td>
      <td><input class="validate[required] radio" name="number4" type="radio" value="3"></td>
      <td><input class="validate[required] radio" name="number4" type="radio" value="4"></td>
      <td><input class="validate[required] radio" name="number4" type="radio" value="5"></td>
    </tr>

    <tr>
      <td colspan="7">
          <script>
                 $(document).ready(function(){
                    $("#test").click(function(){
                        var number1 = $('input[name=number1]:checked', '#myform').val();
                        var number2 = $('input[name=number2]:checked', '#myform').val();
                        var number3 = $('input[name=number3]:checked', '#myform').val();
                        var number4 = $('input[name=number4]:checked', '#myform').val();
                        var t1 = parseInt(number1);
                        var t2 = parseInt(number2);
                        var t3 = parseInt(number3);
                        var t4 = parseInt(number4);
                        var total = t1+t2+t3+t4;
                        alert (total);
                });
            });
          </script>

      <button name="btn" id="test">test</button>

      </td>
    </tr>

</table>
<form> 
```

**我需要：** 当我点击每个单选框然后我点击按钮提交时，它将汇总单选框的所有值并显示它。

**问题** 我只能提醒总和值，但无法正常显示。示例：当我想显示我总是使用的值时的 PHP 代码，`echo`但对于 JQuery 我还不知道。所以请任何人帮助我。给我一些想法，我应该使用像这样的 JQuery 还是比在这种情况下更好的 PHP。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:24:30.857

如果你想在当前页面显示表单的结果，你可以使用`'append'`, `'appendTo'`, `'html'`,`'text'`

1.  [http://api.jquery.com/append/](http://api.jquery.com/append/)
2.  [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)
3.  [http://api.jquery.com/html/](http://api.jquery.com/html/)
4.  [http://api.jquery.com/text/](http://api.jquery.com/text/) //**注意：在这种情况下，html 将被添加为平面文本**

为了找到检查值，您可以使用此脚本。

```
 $(document).ready(function() {
                $('#test').on('click',function(){
                    var $rez = $(".result");
                    $rez.html('')

                    $('#myform').find('input[type="radio"]').each(function(){
                        if($(this).attr('checked')=='checked')
                        {
                            $rez.append("class:"+$(this).attr('class'))
                            $rez.append("|name:"+$(this).attr('name'))
                            $rez.append("|value:"+$(this).attr('value'))

                                $rez.append("</br>")
                        }

                    });

                    return false;
             });
        });​ 
```

演示：***[jsfiddle](http://jsfiddle.net/74rSh/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:24:19.357

像这样使用来显示数据

```
$('#id_to_display').html(total); 
```

这将帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:25:58.763

它适合你...

```
 $("<div/>").html(total).appendTo('body'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:29:16.807

**在 jQuery 中的警报之后或之前添加以下行。**

```
$('#mytotal').html(total); 
```

**并在测试按钮之前添加以下行。**

```
<div id="mytotal"></div> 
```

然后尝试一下，如果不起作用，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T07:32:57.630

您可以使用隐藏字段代替 alert() 并将值推送到该字段，然后单击按钮，您将在 php 页面中获得该值。

把它放在表单内的 html 部分中

```
<input type="hidden" name="hid_total" id="hid_total" /> 
```

然后代替 alert() 使用下面的代码。

```
jQuery("hid_total").val(total); 
```

如果您需要在 html 中显示值，您可以选择文本类型而不是隐藏

# c - MD5( libcrypto ) 是否可以处理中间包含 null 的字符串？

> ID：12635381
> 
> 赞同：0
> 
> 时间：2012-09-28T07:19:08.597
> 
> 标签：c, encryption, md5

我有两个字符串如下 Str1: 1234\099 Str2: 123499

如果我使用 unsigned char *MD5(const unsigned char *d, unsigned long n, unsigned char *md); 在这些字符串上计算 MD5

函数 MD5 是否会计算 Str1 的前 4 个字节的哈希值，还是会采用完整的字符串“1234\099”。

Str1和Str2的MD5是一样还是不一样？？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:28:55.470

这完全取决于您为`n`参数传递的值。

如果您使用`strlen()`to calculate `n`，则该`MD5()`函数将处理数据直到但不包括 null （因为您实际上告诉了它）。

如果您传入正确的长度 for `n`（我假设是`7`for `Str1`），那么`MD5()`将包括散列中的所有数据，包括空字节和空值之后的数据。

`Str1`和的哈希值`Str2`会有所不同（假设您传递的值大于 3 for `n`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:43:56.227

Yes, Michael is right. I executed the below program and it seems that MD5 calculation takes place on second argument irrespective of what is in the string.

```
#include <stdio.h>
#include <openssl/md5.h>

int main() { <br>
    char *p = NULL;<br>
    char *c = NULL;<br>
    char *q = NULL;<br>

    p = malloc(10*(sizeof(char)));
    strncpy(p, "ABCDEDFGO", 9);
    c = malloc(200*(sizeof(char)));
    memset(c,0, 200);

    p[3] = '\0';

    q = MD5(p, 9, c);
    printf("\n For 9 bytes hash %x", *c);
    q = MD5(p, 4, c);
    printf("\n For 4 bytes hash %x", *c);
    q = MD5(p, 3, c);
    printf("\n For 3 bytes hash %x", *c);

    free(c);
    return (0);
} 
```

For 9 bytes hash ffffffc9
For 4 bytes hash ffffffe5
For 3 bytes hash ffffff90

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:26:48.470

`const unsigned char *d`它是数组的第一个元素，而不是 C 风格的字符串。

所以指定适当的长度（7个元素）`(const unsigned char *)"1234\099"`你会得到它的MD5到`md`.

# android - 如何将 SIP 集成到 Android 中？

> ID：12635382
> 
> 赞同：7
> 
> 时间：2012-09-28T07:19:10.773
> 
> 标签：android, sip, voip, rtp, sdp

如何在 Android 中实现 SIP 协议？是否有任何 SDK 或库可用于轻松将其实现到 Android 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T05:24:50.647

[这](https://github.com/DoubangoTelecom/imsdroid)是带有示例代码的第三方库。你可以用这个，我用过，效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:24:49.467

**Android 2.3**或更高版本为 SIP 提供 API。

请参阅此链接以了解[Android 中的 SIP](http://developer.android.com/guide/topics/connectivity/sip.html)

[您还可以从Sample](http://developer.android.com/tools/samples/index.html)中查看 SIP 的 DEMO 项目

**更新：**
github 上的 Android SDK 示例。
[小口演示1](https://github.com/Miserlou/Android-SDK-Samples/tree/master/SipDemo) ,[小口演示2](https://github.com/aosp-mirror/platform_development/tree/master/samples/SipDemo)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:56:22.257

android 4.0.3 SDK版本（API级别-15）的示例中搜索SipDemo项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-17T03:48:16.763

我已经对这类问题进行了很长时间的调查，发现[SipManager](https://developer.android.com/reference/android/net/sip/SipManager)和[SipProfile](https://developer.android.com/reference/android/net/sip/SipProfile)很不幸，而且非常糟糕。

所以我找到了一个***Linphone***库。他们的 wiki有一个[链接](https://wiki.linphone.org/xwiki/wiki/public/view/Lib/Getting%20started/Android/)。*我使用maven*在我的项目中实现了它：

```
repositories {
    ...
    maven { "https://linphone.org/maven_repository/"}
} 
```

还有一个在 gitlab 上使用它的示例：[link here](https://gitlab.linphone.org/BC/public/linphone-android/tree/11b223c0dcbdb2f7bc8fad3f94005a0c29aa33e9/sample)，它很新鲜，现在:)

如果链接崩溃，我只需复制/粘贴如何使用***linphone***核心的最重要部分：

```
public class LinphoneService extends Service {
    private static final String START_LINPHONE_LOGS = " ==== Device information dump ====";
    // Keep a static reference to the Service so we can access it from anywhere in the app
    private static LinphoneService sInstance;

    private Handler mHandler;
    private Timer mTimer;

    private Core mCore;
    private CoreListenerStub mCoreListener;

    public static boolean isReady() {
        return sInstance != null;
    }

    public static LinphoneService getInstance() {
        return sInstance;
    }

    public static Core getCore() {
        return sInstance.mCore;
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        // The first call to liblinphone SDK MUST BE to a Factory method
        // So let's enable the library debug logs & log collection
        String basePath = getFilesDir().getAbsolutePath();
        Factory.instance().setLogCollectionPath(basePath);
        Factory.instance().enableLogCollection(LogCollectionState.Enabled);
        Factory.instance().setDebugMode(true, getString(R.string.app_name));

        // Dump some useful information about the device we're running on
        Log.i(START_LINPHONE_LOGS);
        dumpDeviceInformation();
        dumpInstalledLinphoneInformation();

        mHandler = new Handler();
        // This will be our main Core listener, it will change activities depending on events
        mCoreListener = new CoreListenerStub() {
            @Override
            public void onCallStateChanged(Core core, Call call, Call.State state, String message) {
                Toast.makeText(LinphoneService.this, message, Toast.LENGTH_SHORT).show();

                if (state == Call.State.IncomingReceived) {
                    Toast.makeText(LinphoneService.this, "Incoming call received, answering it automatically", Toast.LENGTH_LONG).show();
                    // For this sample we will automatically answer incoming calls
                    CallParams params = getCore().createCallParams(call);
                    params.enableVideo(true);
                    call.acceptWithParams(params);
                } else if (state == Call.State.Connected) {
                    // This stats means the call has been established, let's start the call activity
                    Intent intent = new Intent(LinphoneService.this, CallActivity.class);
                    // As it is the Service that is starting the activity, we have to give this flag
                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                }
            }
        };

        try {
            // Let's copy some RAW resources to the device
            // The default config file must only be installed once (the first time)
            copyIfNotExist(R.raw.linphonerc_default, basePath + "/.linphonerc");
            // The factory config is used to override any other setting, let's copy it each time
            copyFromPackage(R.raw.linphonerc_factory, "linphonerc");
        } catch (IOException ioe) {
            Log.e(ioe);
        }

        // Create the Core and add our listener
        mCore = Factory.instance()
                .createCore(basePath + "/.linphonerc", basePath + "/linphonerc", this);
        mCore.addListener(mCoreListener);
        // Core is ready to be configured
        configureCore();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);

        // If our Service is already running, no need to continue
        if (sInstance != null) {
            return START_STICKY;
        }

        // Our Service has been started, we can keep our reference on it
        // From now one the Launcher will be able to call onServiceReady()
        sInstance = this;

        // Core must be started after being created and configured
        mCore.start();
        // We also MUST call the iterate() method of the Core on a regular basis
        TimerTask lTask =
                new TimerTask() {
                    @Override
                    public void run() {
                        mHandler.post(
                                new Runnable() {
                                    @Override
                                    public void run() {
                                        if (mCore != null) {
                                            mCore.iterate();
                                        }
                                    }
                                });
                    }
                };
        mTimer = new Timer("Linphone scheduler");
        mTimer.schedule(lTask, 0, 20);

        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        mCore.removeListener(mCoreListener);
        mTimer.cancel();
        mCore.stop();
        // A stopped Core can be started again
        // To ensure resources are freed, we must ensure it will be garbage collected
        mCore = null;
        // Don't forget to free the singleton as well
        sInstance = null;

        super.onDestroy();
    }

    @Override
    public void onTaskRemoved(Intent rootIntent) {
        // For this sample we will kill the Service at the same time we kill the app
        stopSelf();

        super.onTaskRemoved(rootIntent);
    }

    private void configureCore() {
        // We will create a directory for user signed certificates if needed
        String basePath = getFilesDir().getAbsolutePath();
        String userCerts = basePath + "/user-certs";
        File f = new File(userCerts);
        if (!f.exists()) {
            if (!f.mkdir()) {
                Log.e(userCerts + " can't be created.");
            }
        }
        mCore.setUserCertificatesPath(userCerts);
    }

    private void dumpDeviceInformation() {
        StringBuilder sb = new StringBuilder();
        sb.append("DEVICE=").append(Build.DEVICE).append("\n");
        sb.append("MODEL=").append(Build.MODEL).append("\n");
        sb.append("MANUFACTURER=").append(Build.MANUFACTURER).append("\n");
        sb.append("SDK=").append(Build.VERSION.SDK_INT).append("\n");
        sb.append("Supported ABIs=");
        for (String abi : Version.getCpuAbis()) {
            sb.append(abi).append(", ");
        }
        sb.append("\n");
        Log.i(sb.toString());
    }

    private void dumpInstalledLinphoneInformation() {
        PackageInfo info = null;
        try {
            info = getPackageManager().getPackageInfo(getPackageName(), 0);
        } catch (PackageManager.NameNotFoundException nnfe) {
            Log.e(nnfe);
        }

        if (info != null) {
            Log.i(
                    "[Service] Linphone version is ",
                    info.versionName + " (" + info.versionCode + ")");
        } else {
            Log.i("[Service] Linphone version is unknown");
        }
    }

    private void copyIfNotExist(int ressourceId, String target) throws IOException {
        File lFileToCopy = new File(target);
        if (!lFileToCopy.exists()) {
            copyFromPackage(ressourceId, lFileToCopy.getName());
        }
    }

    private void copyFromPackage(int ressourceId, String target) throws IOException {
        FileOutputStream lOutputStream = openFileOutput(target, 0);
        InputStream lInputStream = getResources().openRawResource(ressourceId);
        int readByte;
        byte[] buff = new byte[8048];
        while ((readByte = lInputStream.read(buff)) != -1) {
            lOutputStream.write(buff, 0, readByte);
        }
        lOutputStream.flush();
        lOutputStream.close();
        lInputStream.close();
    }
} 
```

我希望这会对某人有所帮助，因为我花了很多时间试图找到它！

# jqgrid - 如何将输入限制为两位小数？

> ID：12635387
> 
> 赞同：2
> 
> 时间：2012-09-28T07:19:38.143
> 
> 标签：jqgrid

> 我正在使用内联网格，用户可以在其中添加和编辑行。我想限制用户输入文本字段，其中用户不能输入超过两位小数的数字。任何人都可以有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T13:39:29.213

像这样的东西，

```
 number : {decimalSeparator:".", decimalPlaces: 2, defaultValue: '0.00'}, 
```

参考[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3Apredefined_formatter)

# c++ - OpenCV：将 cvGoodFeaturesToTrack 与 C++ mat 变量一起使用

> ID：12635390
> 
> 赞同：0
> 
> 时间：2012-09-28T07:20:02.263
> 
> 标签：c++, opencv, vision

我正在尝试`cvGoodFeatureToTrack`在 Visual Studio 2010 中使用图像类型为`Mat`. 我见过的大多数示例都使用`IplImage`指针。现在我有这个：

```
int w, h; // video frame size

Mat grayFrame;
Mat eigImage;
Mat tempImage;
const int MAX_CORNERS = 10;
CvPoint2D32f corners[MAX_CORNERS] = {0};
int corner_count = MAX_CORNERS;
double quality_level = 0.1;
double min_distance = 10;
int eig_block_size = 3;
int use_harris = false;

w = CurrFrame.size().width;
h = CurrFrame.size().height;
cvtColor(CurrFrame, grayFrame, CV_BGR2GRAY);
cvGoodFeaturesToTrack(&grayFrame,
                      &eigImage,
                      &tempImage,
                      corners,
                      &corner_count,
                      quality_level,
                      min_distance,
                      NULL,
                      eig_block_size,
                      use_harris); 
```

它编译但给我一个内存访问冲突。帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T08:13:52.947

作为一个起点，如果仍然使用 C++（就像你使用`cv::Mat`和`cv::cvtColor`建议的那样），那么为什么不使用 C++ 接口呢？

这将意味着使用[`cv::goodFeaturesToTrack`](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html#void%20goodFeaturesToTrack%28InputArray%20image,%20OutputArray%20corners,%20int%20maxCorners,%20double%20qualityLevel,%20double%20minDistance,%20InputArray%20mask,%20int%20blockSize,%20bool%20useHarrisDetector,%20double%20k%29)or a [`cv::GoodFeaturesToTrackDetector`](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_feature_detectors.html#goodfeaturestotrackdetector)，它们可以在和朋友上工作，而不是从to`cv::Mat`进行不必要的强制转换。`cv::Mat``IplImage*`

```
cv::Mat grayFrame;
std::vector<cv::Point2f> corners;
double quality_level = 0.1;
double min_distance = 10;
int eig_block_size = 3;
int use_harris = false;

const int MAX_CORNERS = 10;
cv::cvtColor(CurrFrame, grayFrame, CV_BGR2GRAY);
cv::goodFeaturesToTrack(grayFrame,
                        corners,
                        MAX_CORNERS,
                        quality_level,
                        min_distance,
                        cv::noArray(), 
                        eig_block_size,
                        use_harris); 
```

# javascript - getElementsByTagName IE 问题

> ID：12635391
> 
> 赞同：0
> 
> 时间：2012-09-28T07:20:05.613
> 
> 标签：javascript, getelementsbyname

此代码适用于除 Internet Explorer（Opera、Firefox、Crome..）以外的所有主要浏览器

每秒的 js 问题都与 IE 有关。提前致谢。

```
<script type="text/javascript">
function myFunction(nesto,param)
{
var str = nesto;
    if (param == "latin")
    {
    str = str.replace(/Џ/g,"DŽ");
    str = str.replace(/Љ/g,"LJ");
    }
    if (param == "cirilic")
    {
    str = str.replace(/DŽ/g,"Џ");
    str = str.replace(/LJ/g,"Љ");
    }
return str;
}
function konvertor(param) {
 for (i=0;i<document.getElementsByName("jezik").length; i++) {
document.getElementsByName("jezik").item(i).innerHTML = myFunction(document.getElementsByName("jezik").item(i).innerHTML,param);
 }
}
</script>
<button onclick="konvertor('latin')">latinica</button>
<button onclick="konvertor('cirilic')">cirilica</button>
<div name="jezik">DŽ LJ</div>
<div name="jezik">DŽ LJ</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:23:34.017

```
function konvertor(param) {
    var len=document.getElementsByName("jezik").length;
    for (i=0;i<len; i++) {
        // use array access instead of item()
        document.getElementsByName("jezik")[i].innerHTML = myFunction(document.getElementsByName("jezik")[i].innerHTML,param);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:35:41.123

getElementsByName 仅在它们`have a name-attribute(following the specification/DTD). Those are e.g. form-elements and images, but not <div>`-elements 时按名称获取元素。

您可以使用[querySelectorAll()](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)代替：

```
document.querySelectorAll("*[name='jezik']") 
```

# javascript - Javascript：|| 而不是 IF 语句 - 这合法且跨浏览器有效吗？

> ID：12635401
> 
> 赞同：33
> 
> 时间：2012-09-28T07:20:28.673
> 
> 标签：javascript

看起来：

```
if (typeof a == 'undefined') {
    a = 0;
} 
```

和

```
(typeof a != 'undefined') || (a = 0) 
```

在 Javascript 中具有相同的效果。

我真的很喜欢第二个，因为它很短，只有一行代码，但这合法且跨浏览器有效吗？我的意思是，jslint 说它有错误。我应该毫无顾虑地使用它吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-28T07:23:05.560

恕我直言`|| (a = 0)`，太相似了`|| (a == 0)`，因此令人困惑。有一天，过分热心的开发人员只会“*修复它*”，从而改变代码的含义。每个其他开发人员都必须坐一会儿才能弄清楚这是您的意图还是只是一个简单的错误。

这实际上就是[JSLint](http://www.jslint.com/)想要表达的意思：

> 需要一个条件表达式，而是看到一个赋值。

我避免使用令人困惑的结构，因为它们会损害可读性。`a = a || 0;`是更容易识别和含义相似的方式。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-28T07:29:02.237

为什么不做一些更简单的事情，比如：

```
a = a || 0; 
```

或者

```
a = a ? a : 0; 
```

在这两种情况下，您还可以清楚地看到某些内容被分配给`a`，就在行的开头，而无需阅读整个内容，并确定其中是否发生了任何改变游戏规则的函数调用左侧或右侧......或弄清楚双方通常会做什么，以决定可能有多少潜在的程序范围内的变化。

如果您需要包括整个类型检查，它仍然不是那么大。

```
a = (typeof a !== "undefined") ? a : 0;  // [parentheses are there for clarity] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-28T12:19:12.423

> 这是合法的，跨浏览器有效吗？

是的，它适用于所有 EcmaScript 引擎。但是，（ab）使用短路评估作为 if 语句是非常罕见的。

> 我的意思是，jslint 说它有错误。我应该毫无顾虑地使用它吗？

不，JsLint 是对的。这是不寻常且令人困惑的，至少对其他开发人员而言。它看起来太像 OR 条件了——但它没有“主体”。如果你做赋值，变量应该在语句的开头，而不是在某个表达式中。

> 我真的很喜欢第二个，因为它很短，只有一行代码

然后使用

```
if (typeof a == 'undefined') a = 0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T09:25:12.057

您可以使用：

```
a = typeof(a) !== "undefined" ? a : 0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T09:59:16.693

从风格上讲，设置默认值 like`a || a=default`是进入函数时的常见习惯用法，因为 javascript 不强制参数的数量。

如果在其他情况下使用此构造，则可读性将受到影响，您真正的意思是 if/else。

过去不同风格之间的性能有所不同，但在今天的快速测试中，if/else 和逻辑运算符的速度相同，但三元运算速度较慢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T16:06:23.807

请问你为什么更喜欢一行代码？

作为人类，我更喜欢可读的代码。我的机器更喜欢简短快速的代码（易于加载和执行）。

今天像 UglifyJS 这样的缩小器知道如何缩短代码，所以你可以两者兼得，而且你不需要担心这个级别的细节。我将您的代码提供给 UglifyJS，这是输出：

```
typeof a=="undefined"&&(a=0) 
```

你可以在这里试试：

[http://marijnhaverbeke.nl/uglifyjs](http://marijnhaverbeke.nl/uglifyjs)

[更新] 我个人的偏好（再次考虑到可读性）是在有选择时使用，并且 || 对于后备。您的具体示例似乎是一个后备（如果 a 不存在或未定义，则分配给 a 值 0），所以我会使用 ||。正如我在评论中所说， (var a=0) 在尚未声明变量 a 的情况下（我不知道您的上下文）对我来说更有意义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T13:34:28.087

我认为使用这样的结构很糟糕。它可以工作，但代码不可读。如果您想编写单行条件，您可以开始使用 CoffeeScript 并编写：

```
a = 0 if (typeof a == 'undefined'); 
```

在您的情况下，当您在条件和赋值中有一个变量时，请使用单行 javascript 三元运算符：

```
a = (typeof a == 'undefined') ? 0 : a; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-11T22:08:49.123

```
(typeof a != 'undefined') || (a = 0) 
```

是一个表达式。但它的子表达式之一

```
(a = 0) 
```

是一个任务。所以本质上，这是一个有副作用的表达式。具有副作用的语句（尤其是那些是表达式的语句）通常是您在介绍性编码课程中首先学会**不做的事情之一。**那么为什么仅仅因为它只需要一条线就这样做呢？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-05T14:26:27.927

多年来，我讨厌“|| 而不是 IF”。

我终于习惯了，现在我喜欢它。

我也喜欢以同样的方式使用 &&。

我发现如果你自己采用简洁的做法，阅读其他简洁的代码会容易得多。

完全了解其他人的来源。我自己去过那里。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-05T17:40:30.933

此外，我认为它会影响性能，因为

```
(typeof a != 'undefined') || (a = 0) 
```

由两个测试组成（即使我们不关心第二个）。

然而

```
if (typeof a == 'undefined') {
    a = 0;
} 
```

仅包含一项测试

# hibernate - 属性不在的休眠条件（子查询）

> ID：12635404
> 
> 赞同：4
> 
> 时间：2012-09-28T07:20:32.713
> 
> 标签：hibernate, subquery, hibernate-criteria

我想执行类似的查询

```
Select id, name from information where name not in (select firstname from contact where id  = 1)

Information
Id Name
1  Test

Contact
id firstname
1  name
2  Test 
```

如果我使用 neProperty() 函数，它将返回记录为`name != Test.`

如何使用休眠标准实现？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T09:23:42.123

您可以使用 DetachedCriteria 来构建子查询。

```
// This corresponds to (select firstname from contact where id  = 1)
DetachedCriteria subquery = DetachedCriteria.forClass(Contact.class)
    .add(Restrictions.eq("id", 1))
    .setProjection(Projections.property("name"))

// This corresponds to (select information where name not in (subquery))
ICriteria criteria = session
    .createCriteria(Information.class)
    .add(Subqueries.notIn("name", subquery)); 
```

您可以使用 session.get 加载联系人，而不是使用子查询，从而有机会命中缓存：

```
Contact contact = session.Get<Contact>(1);

ICriteria criteria = session
    .createCriteria(Information.class)
    .add(Property.ne("name", contact.getName())); 
```

免责声明：我 a) 不是 java 程序员，b) 可能犯了错误，所以它可能无法编译。该代码更多地粗略地展示了这个想法，并且希望无论如何都会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T09:20:39.530

创建全选条件：

```
Criteria cr = session.createCriteria(Your.class); 
List list = cr.list(); 
```

然后你可以给它添加限制，即第 1 列 = 8 等，如下所示：

```
cr.add(Restrictions.eq("YourCondition", YourCondition)); 
```

最后，您可以像这样提供 not in 子句：

```
cr.add(Restrictions.not(Restrictions.in("YourNotInCondition", YourNotInCondition))); 
```

# sql - 递归选择类别

> ID：12635405
> 
> 赞同：4
> 
> 时间：2012-09-28T07:20:36.083
> 
> 标签：sql, postgresql, recursion

在我的数据库中，我有下表：

```
Category: {[Name: VarChar, TopCategory: VarChar]} 
```

该表有以下内容：

![表格内容](../Images/a9f4177ca0eb3c451f5955e536b30d9a.png)

`Computer Science`现在我需要使用`with-clause`递归语句从该类别的所有子类别中获取所有名称。这必须使用 SQL，而不是 PHP 或其他编程语言来完成。

所有子类别不仅意味着直接后裔，而且在这种情况下`C++`，`Java` 我该怎么做？

到目前为止我所做的：

```
SELECT name FROM category WHERE (topcategory = 'Computer Science') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:31:04.050

开始了：

```
WITH RECURSIVE cte_t1 (name, topcategory, Level)
AS
(
SELECT name, topcategory, 0 AS Level
FROM Category
WHERE topcategory = N'ComputerScience'
UNION ALL
SELECT t1.name, t1.topcategory, Level + 1
FROM Category t1, cte_t1 ctet1
WHERE ctet1.name= t1.topcategory
)
SELECT Level, topcategory, name
FROM cte_t1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:37:48.000

如果你的数据库是 oracle，你可以试试（[sql fiddle](http://sqlfiddle.com/#!4/13c64/11)）：

```
select * from category 
  start with name = 'Computer Science'
connect by prior name = top_category 
```

# android - 简单的自定义视图不起作用

> ID：12635418
> 
> 赞同：0
> 
> 时间：2012-09-28T07:21:12.727
> 
> 标签：android

我正在尝试制作一个不起作用的简单自定义视图。我从布局资源文件中引用了自定义视图类。但它不起作用。谁能告诉我问题出在哪里。

```
public class WriteOnScreenActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

}

public class CustomView extends View {

    private Paint paint;

    public TouchEventView(Context context) {
        super(context);

        paint = new Paint();
        paint.setColor(Color.RED);
        paint.setTextSize(25);
        paint.setAntiAlias(true);
    }

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    canvas.drawText("Hello World", 5, 30, paint);   
    }

}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

       <com.example.touch.CustomView
           android:id="@+id/TouchEventView"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:32:38.287

将类 TouchEventView 的定义移动到一个新文件中。

这是解决方法。

```
public class TouchEventView extends View {

    private Paint paint;

    public TouchEventView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setup(context, attrs, defStyle);
    }

    public TouchEventView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setup(context, attrs, 0);
    }

    public TouchEventView(Context context) {
        super(context);

      setup(context, null, 0);

    }

    private void setup(Context context, AttributeSet attrs, int defStyle)
    {

            paint = new Paint();
            paint.setColor(Color.RED);
            paint.setTextSize(25);
            paint.setAntiAlias(true);
    }

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    canvas.drawText("Hello World", 5, 30, paint);   
    }

} 
```

# drupal - 将类别添加到 Drupal

> ID：12635423
> 
> 赞同：0
> 
> 时间：2012-09-28T07:21:37.923
> 
> 标签：drupal

我是drupal的新手，我必须在drupal中开发一个网站，我想在其中添加三个类别的内容我希望这些类别在主菜单Recipes，News和Studys的顶部，这是三个类别。

现在，当用户想要发布一篇文章时，会向他询问一个类别，当他添加文章时，这些​​类别将显示在相应的页面上。

谁能告诉我如何在drupal中做到这一点

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:27:21.363

您可以使用**分类模块**来定义类别。你可以参考[这个](http://drupal.org/documentation/modules/taxonomy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:05:46.663

I guess you could also make 3 different content types which allows different fields etc. Read more [here](http://drupal.org/node/21947). If you just want tagging Taxonomy will be great though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T16:27:25.577

查看分类模块，它是 Drupal 核心的一部分。Drupal 对通常所说的“标签”或“类别”的名称是“术语”，而“术语”被组织成“分类法”。

因此，您需要创建一个名为“Categories”的“分类法”并将您的 3 个“术语”加载到其中，最终组织如下：

*   类别（分类）
    *   食谱（学期）
    *   新闻（学期）
    *   研究（学期）

您甚至可以多次撕裂以在您的条款中添加额外的组织层，例如：

*   类别
    *   食谱
        *   早餐
        *   午餐
        *   晚餐
        *   甜点
    *   消息
    *   学习

# asp.net - 使用 Nhibernet Flush 方法时出现内存不足异常

> ID：12635431
> 
> 赞同：1
> 
> 时间：2012-09-28T07:22:31.873
> 
> 标签：asp.net, oracle

尝试通过 NHibernet 2.1 将大文件上传到 oracle 数据库时出现内存不足异常。当我调用 flush 方法时出现此错误。我正在使用“从不”模式来刷新数据。NHibernet 有什么限制吗？我可以跟踪错误-> 当 NHibernet 尝试将数据加载到 StringBuilder 时，会生成错误，但它似乎是一个内置功能。对此有什么帮助吗？...

DB 列类型为 binaryblob

# php - 将变量从 codeigniter 视图传递到外部核心 php 页面

> ID：12635438
> 
> 赞同：1
> 
> 时间：2012-09-28T07:23:13.267
> 
> 标签：php, codeigniter

如何将变量从 codeigniter 视图传递到包含在该视图中的外部核心 php 页面？

例如，codeigniter 视图名称是“login”，我已经包含了一个外部 php 文件名“logininner.php”，我想将一个变量从“login”传递给“logininner.php”。

谁能告诉我一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:26:42.650

您可以`$this->load->view();`像在控制器函数中一样调用。所以在你看来，你可以做这样的事情

```
<?php $this->load->view('logininner', array('variable1' => 'value')); ?> 
```

然后，`logininner.php`您将`$variable1`设置为 string `value`。

# asp.net-mvc-3 - mvc 3 应用程序中的 Orchard cms 如何删除不需要的 url 内容

> ID：12635440
> 
> 赞同：0
> 
> 时间：2012-09-28T07:23:14.660
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, orchardcms

MVC3 应用程序中的果园 CMS。

如何删除不需要的“url”内容？

示例：[http :](http://www.xxxxxx.com/) **//www.xxxxxx.com/HotelsOnly/HotelList** /Region?region=2114&total=848

```
 In routes {area,” HotelsOnly”} ,{controller,”HotelList”} 
```

Url 如何更改或删除此（/HotelsOnly/HotelList）

示例：[http ://www.xxxxxx.com](http://www.xxxxxx.com) **/Region** ?region=2114&total=848

说明如何删除？请显示任何示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:58:47.033

```
new RouteDescriptor {
    Route = new Route(
        "Region",
        new RouteValueDictionary {
            {"area", "HotelsOnly"},
            {"controller", "HotelList"},
            {"action", "Index"}
        },
        new RouteValueDictionary(),
        new RouteValueDictionary {
            {"area", "HotelsOnly"}
        },
        new MvcRouteHandler())
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:22:52.703

我认为你使用这种类型的 rout url 它是打击

```
routes.MapRoute(
              "Regis", // Route nameRegister
              "Test/Artical/Show/{id}", // URL with parameters
              new { controller = "Artical", action = "Show", id = UrlParameter.Optional } 
```

在我的项目中，我像这样使用 rout 它在下面

```
@Html.RouteLink("click", "Regis", 1); 
```

1 例如，我设置了一个默认值。所以我的网址看起来像这样

```
http://localhost:xxxx/Test/Artical/Show/1 
```

我从我的网址中删除测试，如下所示

你会像这样改变你的路线

```
routes.MapRoute(
              "Regis", // Route nameRegister
              "Test/Artical/Show/{id}", // URL with parameters
              new { controller = "Artical", action = "Show", id = UrlParameter.Optional } 
          ); 
```

在更改溃败之后，我的网址看起来像这样

```
http://localhost:xxxx/Artical/Show/1 
```

我想这会对你有所帮助

# asp.net-mvc - 如何从 MVC 中的 2 个实体获取数据？

> ID：12635444
> 
> 赞同：0
> 
> 时间：2012-09-28T07:23:37.127
> 
> 标签：asp.net-mvc

我正在开发 MVC 应用程序并使用剃刀语法。我使用了模型优先方法。

我有两个实体，客户和潜在客户。Lead 继承自 Customer。

当 IsActive 属性为 true 时，将 Customer 视为潜在客户，否则将是客户。

请检查 edmx 文件图像。

![在此处输入图像描述](../Images/e94e1d3ec17437f855d8a73ef500df85.png)

现在，在常规实体中，我们只处理单个实体和单个表。在这种情况下，我该如何处理、保存和加载过程。因为我必须从 2 个数据库表中存储和加载记录。常规索引视图可以在这里工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:30:40.493

在实体框架中使用继承时，您将有一个单一`DbSet`的`DbContext`暴露层次结构。在您的数据库中，您有几个用于配置表结构的选项。例如，您可以使用：

*   每个层次结构的表
*   每个类型的表
*   每个混凝土类型的表

（请参阅此博客以获得很好的解释：[实体框架中的继承](http://blogs.msdn.com/b/adonet/archive/2007/03/15/inheritance-in-the-entity-framework.aspx)。

但是，在您的查询中，您不必考虑这一点。您的查询将具有以下结构：

```
var leads = from l in dbcontext.Leads.OfType<Customer>()
            select l; 
```

[OfType()](http://msdn.microsoft.com/en-us/library/bb360913.aspx)将您的集合过滤为层次结构中的子类型。如果您跳过，`OfType`您将在结果查询中同时获得客户和潜在客户。

# iphone - 访问 iOS 6 用于相机曝光和快门速度的新 API

> ID：12635446
> 
> 赞同：11
> 
> 时间：2012-09-28T07:23:40.717
> 
> 标签：iphone, ios, camera, avcapturedevice

在 Apple 的[iOS 6.0 功能页面上](https://developer.apple.com/technologies/ios6/)，它曾经说

> 利用内置摄像头的高级功能。新的 API 让您可以控制焦点、曝光和感兴趣区域。您还可以使用人脸检测 API 访问和显示人脸，并利用支持硬件的视频稳定功能。

此文本已被删除，我在 API 中找不到用于控制曝光的新方法。在“曝光设置”下的课堂`AVCaptureDevice`中，iOS 6.0 没有新的属性/方法。你知道我在哪里可以找到 API 中的新功能吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T17:30:09.933

确实有一个`-exposureMode`属性 on `AVCaptureDevice`，但这仅用于设置模式（关闭/自动/连续），而不是实际的 f-stop、SS 或 ISO。提供“曝光”控制的相机应用似乎都是通过后期处理完成的。

但是，似乎框架中有未记录的 API 可以执行此操作。查看（通过[class-dump ）的](http://www.codethecode.com/projects/class-dump/)[完整标题`AVCaptureDevice.h`](https://github.com/nst/iOS-Runtime-Headers/blob/master/Frameworks/AVFoundation.framework/AVCaptureDevice.h)并注意以下方法：

```
- (void)setManualExposureSupportEnabled:(BOOL)arg1;
- (BOOL)isManualExposureSupportEnabled;

- (void)setExposureGain:(float)arg1;
- (float)exposureGain;

- (void)setExposureDuration:(struct { long long x1; int x2; unsigned int x3; long long x4; })arg1;
- (struct { long long x1; int x2; unsigned int x3; long long x4; })exposureDuration;

- (void)setExposureMode:(int)arg1;
- (int)exposureMode;

- (BOOL)isExposureModeSupported:(int)arg1; 
```

我的猜测是`gain`等效的 f-stop（固定光圈），并且`duration`是快门速度。我想知道这些是否用于 iPhone 5 的[低光增强模式](http://blog.crushapps.com/2012/09/the-iphone-5s-low-light-boost-mode/)。

您也可以使用[`otool`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)四处寻找并尝试将符号拼凑在一起。`exposureMode`启用手动控制可能有一个新常量，并且`exposureDuration`似乎也有标志。调用这些时，请确保使用 new`-isExposureModeSupported:`并调用`-respondsToSelector:`以检查兼容性。

与往常一样，Apple 不赞成使用私有 API，这也是 App Store 拒绝的原因。可能有解决这个问题的方法，例如使用`-performSelector:`或[`obc_msgsend`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_msgSend)使用 rot13 字符串或其他东西隐藏调用，因为我很确定它们只对应用程序二进制文件进行静态分析。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-18T14:36:30.963

我已经设法“欺骗”相机运行更短的曝光时间，但我怀疑它只会对那些进行类似（宏观）图像采集的人有用。我首先将 AVCaptureDevice 设置为使用 AVCaptureExposureModeContinuousAutoExposure 并将闪光灯设置为 TorchMode。然后我 UnlockForConfiguration 并设置一个键值观察器来观察调整曝光的完成。然后我重新锁定设备，翻转到 AVCaptureExposureModeLocked，然后关闭 Torch。这具有蛮力设置比相机在未照明场景中选择的快门速度更短的效果。通过使用手电筒级别，我可以设置我想要的任何相对快门速度值（当然最好让手电筒保持打开状态，但在我的应用程序中它会在主体上产生眩光）。同样，这仅在您的物距非常近（小于 6 英寸）时才真正起作用，但它使我能够消除特写图像中的手抖动模糊。不利的一面是图像更暗，因为我没有办法欺骗相机增益，但在我的特定应用程序中不是问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T05:06:30.947

It looks like they've updated that linked text—there's no mention of new APIs for exposure:

> Use powerful new features of the built-in camera. New APIs support real-time video stabilization, an improved LED flash, and face detection and display. You can get reports of dropped frames during capture and leverage new utilities to map UI touches to focus and exposure commands. And apps that support iPhone 5 can take advantage of low light boost mode.

There *is* an opt-in low-light boost mode for iPhone 5, detailed [here by Jim Rhoades](http://blog.crushapps.com/2012/09/the-iphone-5s-low-light-boost-mode/) (and in [this developer forum post](https://devforums.apple.com/message/736678), log-in required).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-29T21:33:31.447

作为 Michael Grinich 优秀资料的后续，我发现私有 API 中的一些调用存在顺序依赖关系。要使用“手动”曝光控制，您必须在设置模式*之前启用它们，如下所示：*

```
#define AVCaptureExposureModeManual     3
NSError*    error = nil;
if ([captureDevice lockForConfiguration:&error]) {
    captureDevice.manualExposureSupportEnabled = YES;
    if ([captureDevice isExposureModeSupported:AVCaptureExposureModeManual]) {
        captureDevice.exposureMode = AVCaptureExposureModeManual;
        captureDevice.exposureGain = ...;
        captureDevice.exposureDuration = {...};
    }
    [captureDevice unlockForConfiguration];
} 
```

所有这些都在[iOS-ManualCamera](https://github.com/brettonw/iOS-ManualCamera)中得到了展示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-15T16:24:35.610

从 iOS 8.0 开始，这终于成为可能。

请参阅Apple 文档中的[setExposureModeCustomWithDuration](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureDevice_Class/index.html#//apple_ref/occ/instm/AVCaptureDevice/setExposureModeCustomWithDuration:ISO:completionHandler:)等。

[这是一篇讨论如何使用 API 的文章。](http://jamesonquave.com/blog/taking-control-of-the-iphone-camera-in-ios-8-with-swift-part-2/)

# ruby - 是否有任何适用于 sinatra 的 RSpec HTML 标签匹配器扩展？

> ID：12635449
> 
> 赞同：3
> 
> 时间：2012-09-28T07:23:57.737
> 
> 标签：ruby, rspec, sinatra, rspec2

我一直在使用 Rails 应用程序，我一直在维护 hpricot_matchers 和最近的 rspec_tag_matchers 作为匹配器实现，以测试带有嵌套标签的字符串（例如，HTML 或 XML）。特别是最后一个非常好，因为它使用了Nokogiri。

最近我开始在 Sinatra 中进行开发，当然，我在其中捆绑了 rspec。一切都很好，很整洁，直到我发现我没有某些可用的匹配器，比如 have_tag （检查标签和属性值）。好吧，这在 Sinatra 中真的很棒，而且上面提到的 gem 不可用，因为它们有一个 rspec-rails 依赖项，它有一个 rails 依赖项。

所以问题是：是否有任何可用于 Sinatra 的工具来完成相同的任务？有没有公​​开的 Sinatra 匹配器？但是，找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:15:52.980

实际上发现了一个可以完成这项工作的扩展......

[https://github.com/kucaahbe/rspec-html-matchers](https://github.com/kucaahbe/rspec-html-matchers)

应该看起来多一点。我还没有检查它是否涵盖了 rails rspec 匹配器助手所做的所有事情，但大多数重要的都在那里，包括非常有价值的 have_tag。但有一件事：当涉及到子标签中的嵌套条件时，两者的规范有点不同：

rspec_tag_matchers(rails3):

```
text.should have_tag("p") do |paragraph|
  paragraph.should have_tag("strong")
end 
```

rspec_html_matchers(sinatra/...):

```
text.should have_tag("p") do 
  with_tag("strong")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:47:22.337

我想你正在寻找这个...

[Rspec 匹配器的代码示例](http://www.ruby-doc.org/gems/docs/s/sinatra-tests-0.1.6/Sinatra/Tests/RSpec/Matchers.html)

那里的代码看起来像这样......

```
 # File lib/sinatra/tests/rspec/matchers.rb, line 52
def have_a_page_header(expected, tag = 'h2') 
  simple_matcher("have an '#{tag}' page header with [#{expected.inspect}]") do |given, matcher|
    given.should have_tag(tag, expected, :count => 1)
  end
end 
```

关键是：**您始终可以创建自己的匹配器。**

希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T14:52:27.810

在测试 sinatra 应用程序（或任何机架应用程序，就此而言）时，您可以使用[Capybara 。](http://jnicklas.github.com/capybara/)Capybara 包括几个可能会满足您需求的匹配器：

*   `have_selector('table tr')`
*   `have_xpath('//table/tr')`
*   `have_css('table tr.foo')`

# performance - 我可以使用什么工具来测试 WinCE 设备上的 .NET 应用程序性能？

> ID：12635451
> 
> 赞同：0
> 
> 时间：2012-09-28T07:24:11.837
> 
> 标签：performance, testing, compact-framework, windows-ce, performance-testing

我搜索了一些用于测试部署在 WinCe 设备上的 .net cf 2.0 应用程序的工具。我想要类似 jetbrains 点跟踪性能的东西。我尝试使用 Visual Studio Profiler，但它们仅显示有关描述符、内存和进程使用的统计信息。我想看看什么功能，运行，他们工作了多少时间，什么工作太长了。但是我在 VS profiler 中没有看到所有这些信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:12:30.947

尝试使用 EQATEC 分析器。这个分析器在我们紧凑的框架应用程序上工作得很好。

[http://eqatec.com/Profiler/](http://eqatec.com/Profiler/)

# android - HLS 流在 Android 中的 #EXT-X-DISCONTINUITY 标记之前跳过了一些帧

> ID：12635453
> 
> 赞同：2
> 
> 时间：2012-09-28T07:24:16.503
> 
> 标签：android, android-mediaplayer, http-live-streaming

我在 4.0.3 操作系统中使用 Android VideoView 播放 HLS 流。

播放了流，但我观察到某些帧在不连续标记之前被跳过。#EXT-X-DISCONTINUITY 标记之前的片段在最后被某些帧跳过。我也尝试过使用 Mediaplayer 播放流，结果是一样的。

你们有没有遇到过类似的问题？如果是，请提出解决方案！

# c# - 从互联网播放广播流

> ID：12635457
> 
> 赞同：1
> 
> 时间：2012-09-28T07:24:28.673
> 
> 标签：c#, stream, radio, playlist, naudio

我正在尝试从流中播放音频。它是互联网上的广播。为此，我使用了 WMPLib（Windows 媒体播放器库）。

它适用于某些格式，但不是全部。

例如，对于这种格式，它可以工作：

[http://www.qmusic.nl/live/qmusic_itunes.m3u](http://www.qmusic.nl/live/qmusic_itunes.m3u)

但是这个没有被播放：

[http://www.radioveronica.nl/player/radioveronica.pls](http://www.radioveronica.nl/player/radioveronica.pls)

您可以在 windows 媒体播放器本身中尝试这两个链接。

我的问题是，哪个库能够支持至少两种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:17:48.780

第二个不是流。如果您使用的是 Firefox，请安装 Firebug 并检查该站点执行的 http 请求。这样，您可以获得在网站上播放的实际流的 URL，并且应该可以工作。

# arrays - Fortran 90 阵列 - 菱形

> ID：12635461
> 
> 赞同：0
> 
> 时间：2012-09-28T07:24:34.953
> 
> 标签：arrays, fortran

我有一个数据集，它看起来像这样。

```
1  2  3  4  5  
2  3  4  5  6  
3  4  5  6  7  
4  5  6  7  8  
5  6  7  8  9 
```

这是所需的输出：（没有记录 X 值）。

```
X  X  3  X  X  
X  3  4  5  X  
3  4  5  6  7  
X  5  6  7  X  
X  X  7  X  X 
```

当它写入时，我应该得到“ `3, 3, 4, 5, 3, 4, 5, 6, 7, 5, 6, 7, 7`”作为输出。

到目前为止，我已经尝试了很多想法，目前似乎没有任何效果。我的`do`循环最终会创建大量输出和/或读取错误的值。我什至尝试过使用不同的存储模式，但似乎没有什么适用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:38:50.620

如果你有远见像这样声明你的数组

```
integer, dimension(-2:2,-2:2) :: my-array 
```

也就是说，中心元素具有索引 (0,0) 那么我认为这个嵌套循环将按照您需要的顺序输出元素：

```
do row = -2,2
    do col = -2+abs(row), 2-abs(row)
        write(*,*) my_array(row, col)
    end do
end do 
```

如果您没有先见之明以这种方式声明您的数组，那么算术会更加繁琐（但不会比这更糟），所以我将其留给您。对于生产代码，您需要将所有这些s 替换为参数或对or`2`的调用。`ubound``lbound`

# perl - 遍历数组hash的hash

> ID：12635464
> 
> 赞同：0
> 
> 时间：2012-09-28T07:24:41.117
> 
> 标签：perl

这是代码：

```
#!/usr/bin/perl -w
use strict;
use Data::Dumper;

my $var = { 
    Cars => {
        cars_name => [
            "GT500", 
            "Beetle",
            "P1800"
        ]
    },           
    Bikes => {
        Bikes_name => [
            "Pulsar",
            "Discover",
            "CBR"
        ]
    }
};

#Traversing the hash of hash of array
print "$var\n";
foreach my $k1 (keys %{$var}) {

    print "$k1\n";
    print $var->$k1;
    #foreach my $k2 (keys %{$var->$k1}) {

         #print"$k2\n";
    #}   
} 
```

每当我尝试打印 cars_name 和 Bikes_name 时，我都会收到一条**错误消息，指出 Can't call method Cars on Unblessed reference。**我无法弄清楚我在哪里做错了。好吧，根据我的理解`print $var->$k1`；线创建一个概率。所以请任何机构都可以帮助我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:26:10.873

```
 print $var->$k1; 
```

即调用对象的方法。你想访问一个哈希：

```
 print $var->{$k1}; 
```

# php - 限制 PHP foreach 结果

> ID：12635473
> 
> 赞同：1
> 
> 时间：2012-09-28T07:25:38.360
> 
> 标签：php, foreach

我的页脚中有一个脚本部分，我正在尝试自定义它并显示网站类别。

目前，结果限制为每列 9 个结果，并继续到 x 数量的列。我需要能够停在 2 列。

这是我的代码

```
<div class="left">
    <h3 style="padding-top:15px;"><?php echo BROWSE_CATEGORIES; ?></h3>
    <?php $footer_category= $this->home_model->get_category(); ?>
    <?php if($footer_category) { $ftr_cnt=1; ?>
    <ul>
        <?php foreach($footer_category as $cat) { 
            echo '<li>'.anchor('search/category/'.$cat->project_category_id,substr($cat->project_category_name,0,30)).'</li>'; 

            if($ftr_cnt>9) { $ftr_cnt=1; echo "</ul><ul>";  }
                $ftr_cnt++;
            }
        } ?>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:30:34.460

`break`达到时使用 a `9 * 2`，其中 2 是您想要的列数。

```
$ftr_cnt = 1;
foreach($footer_category as $cat) 
{ 
    echo '<li>'.anchor('search/category/'.$cat->project_category_id,substr($cat->project_category_name,0,30)).'</li>'; 
    if($ftr_cnt == 9) 
    { 
        echo "</ul><ul>";  
    } 

    $ftr_cnt++;

    if($ftr_cnt >= (9 * 2))
    {
        echo "</ul>";
        break;
    }
} 
```

# c# - 如何引发弹出窗口中按钮的单击事件？

> ID：12635474
> 
> 赞同：0
> 
> 时间：2012-09-28T07:25:41.730
> 
> 标签：c#, wpf

Usercontrol的模板如下。

```
 <ControlTemplate x:Key="MarkerTemplate"  >
        <ToggleButton x:Name="btnMarkerPin" Click="btnMarkerPin_Click" >
            <ToggleButton.Template>
                <ControlTemplate >
                    <Grid>
                    <Grid>
                        <Ellipse Fill="Green" Width="25" Height="25" VerticalAlignment="Center" HorizontalAlignment="Center" ToolTip="{Binding}" />
        </Grid>
                    <Popup x:Name="pop" PlacementTarget="{Binding ElementName=pin}" StaysOpen="True" Placement="Top" VerticalOffset="-4" HorizontalOffset="-4" IsOpen="False" Margin="30,-50,0,0" AllowsTransparency="True" >
                        <Border Opacity=".7" CornerRadius="5" BorderBrush="Red" BorderThickness="2" Background="Yellow">
                            <Grid Margin="10">
                                    <Button x:Name="btnLinkMarker" Style="{StaticResource LinkButton}"  FontWeight="Bold" Content="{Binding}" />
                                </Grid>
                        </Border>
                    </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="ToggleButton.IsChecked" Value="True">
                            <Setter TargetName="pop" Property="IsOpen" Value="true"></Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </ToggleButton.Template>               
        </ToggleButton>
    </ControlTemplate> 
```

点击应该发生在弹出窗口中的 btnLinkMarker 上。如果我引发事件，我会得到一个未设置的异常对象引用。任何人都可以帮忙。我如何提出这个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:28:25.933

将[命令](http://www.codeproject.com/Articles/22270/WPF-Commands)分配给按钮并调用**命令**，而*不是*`UI`在控件（工件）上引发事件。

在 WPF中，**始终**`UI`尽可能避免直接作用于. 在这里，至少在提供的问题上下文中，这是可以轻松实现的。

[什么是命令](http://msdn.microsoft.com/en-us/library/ms752308.aspx)

# excel - 从 Lotus 导出到 MS EXCEL

> ID：12635477
> 
> 赞同：0
> 
> 时间：2012-09-28T07:25:53.613
> 
> 标签：lotus, excel, ssjs, excel, lotus-domino, csv, excel, xpages, lotus-domino, lotus, xpages-ssjs

我必须将大量数据（> 100000 个文档）从[lotus](/questions/tagged/lotus "显示标记为“莲花”的问题")导出到[excel](/questions/tagged/excel "显示标记为“excel”的问题")。我为此功能使用 java **[apache poi](http://poi.apache.org/spreadsheet/index.html)**和[ssjs](/questions/tagged/ssjs "显示标记为“ssjs”的问题")，但是服务器在 4-5000 次后崩溃。
[excel](/questions/tagged/excel "显示标记为“excel”的问题")无法安装在[lotus-domino](/questions/tagged/lotus-domino "显示标记为“莲花-多米诺骨牌”的问题")服务器上。
[csv](/questions/tagged/csv "显示标记为“csv”的问题")格式不是一个选项。
创建更多具有预定义的有限记录数的文件不是一种选择。
在视图中导出所有文档中的每个字段的正确方法/技术是什么？

* * *

var maxDocs：整数=6001；

```
function ExcExp(docIDArray:Array, sVieNam:String, proFie, filTip:String,logEve:String){
var sUzenet='xpExcel ExcExp ';
var bRetVal=false;
var docId:String;
var doc:NotesDocument=null;
var tmpDoc:NotesDocument=null;
var aIteNam:array=new Array();
var aIteLab:array=new Array();
var aIteHin:array=new Array();
var sIteNam:String;
var category:String;
var y=0;
aIteNam=@Explode(proFie.getString('fieNam'),'~');
aIteLab=@Explode(proFie.getString('fieLab'),'~');
aIteHin=@Explode(proFie.getString('fieHin'),'~');
var rowInd=new java.lang.Integer(0);
var rowInd1=new java.lang.Integer(3);
try{
var fileName='c:\\Temp\\'+renFile('_'+filTip+'_','xls');    
var fileOut = new java.io.FileOutputStream(fileName);
var wb = new org.apache.poi.hssf.usermodel.HSSFWorkbook();
var sheet=wb.createSheet('CRM'+filTip+'Export');
var createHelper = wb.getCreationHelper();
var drawing = sheet.createDrawingPatriarch();
var anchor = createHelper.createClientAnchor();
var row=sheet.createRow(rowInd);        
for (x=0;x<aIteNam.length;x++){
cellInd=new java.lang.Integer(x);
colInd1=new java.lang.Integer(x);
colInd2=new java.lang.Integer(x+5);
var cell=row.createCell(cellInd);
cell.setCellValue(aIteNam[cellInd]);
anchor.setCol1(colInd1);
anchor.setCol2(colInd2);
anchor.setRow1(rowInd);
anchor.setRow2(rowInd1);
var comment = drawing.createCellComment(anchor);
var str = createHelper.createRichTextString(aIteLab[cellInd]+": "+fieldHint.getString(aIteHin[cellInd]));
comment.setString(str);
comment.setAuthor(@Name('[Abbreviate]',@UserName()));
cell.setCellComment(comment);           
}
for (x=0;x<aIteNam.length;x++){
cellInd=new java.lang.Integer(x);
sheet.autoSizeColumn(cellInd);          
}
if (docIDArray.length>0){
for(y=0;y<docIDArray.length;y++){
docId=docIDArray[y];
doc=database.getDocumentByID(docId);
if (doc!=null){                         
bRetVal=false;
rowInd=new java.lang.Integer(y+1);
row=sheet.createRow(rowInd);    
for (x=0;x<aIteNam.length;x++){
cellInd=new java.lang.Integer(x);                       
cell=row.createCell(cellInd);
sIteNam=aIteNam[cellInd];
if (doc.hasItem(sIteNam)){
if (doc.getFirstItem(sIteNam).getType()!=1){
cell.setCellValue(doc.getItemValueString(sIteNam));
}else{
cell.setCellValue(doc.getFirstItem(sIteNam).getFormattedText(true, 0,0));
}
}else{
cell.setCellValue('');
}
}
bRetVal=true;       
if (bRetVal){       
}
}
for (x=0;x<aIteNam.length;x++){
cellInd=new java.lang.Integer(x);
sheet.autoSizeColumn(cellInd);          
}
wb.write(fileOut);            
}else{
if (viewScope.query && viewScope.query.length>0){
bRetVal=false;
var vView=database.getView(sVieNam);
if (vView.FTSearch(viewScope.query,maxDocs)>0){             
doc=vView.getFirstDocument();
y=1;
while (doc!=null && y<maxDocs){                 
tmpDoc=vView.getNextDocument(doc);
rowInd=new java.lang.Integer(y);
row=sheet.createRow(rowInd);
for (x=0;x<aIteNam.length;x++){                         
cellInd=new java.lang.Integer(x);                       
cell=row.createCell(cellInd);
sIteNam=aIteNam[cellInd];
if (doc.hasItem(sIteNam)){
cell.setCellValue(doc.getItemValueString(sIteNam));
}else{
cell.setCellValue('');
}
}
bRetVal=true;       
doc.recycle();
doc=tmpDoc;
y=y+1;
}
}               
for (x=0;x<aIteNam.length;x++){
cellInd=new java.lang.Integer(x);
sheet.autoSizeColumn(cellInd);          
}
wb.write(fileOut);  
}else{
bRetVal=false;
var vView=database.getView(sVieNam);
doc=vView.getFirstDocument();
var y=1;
while (doc!=null && y<maxDocs){                 
tmpDoc=vView.getNextDocument(doc);
rowInd=new java.lang.Integer(y);
row=sheet.createRow(rowInd);
for (x=0;x<aIteNam.length;x++){                         
cellInd=new java.lang.Integer(x);                       
cell=row.createCell(cellInd);
sIteNam=aIteNam[cellInd];
if (doc.hasItem(sIteNam)){
cell.setCellValue(doc.getItemValueString(sIteNam));
}else{
cell.setCellValue('');
}
}

bRetVal=true;       
doc.recycle();
doc=tmpDoc;
y=y+1;
}               
for (x=0;x<aIteNam.length;x++){
cellInd=new java.lang.Integer(x);
sheet.autoSizeColumn(cellInd);          
}
wb.write(fileOut);  
}
}       
fileOut.close();
if (y>0){
doc=database.createDocument();
doc.replaceItemValue('Form','ExcelExport');
doc.replaceItemValue('From',@Name('[Abbreviate]',@UserName()));
doc.replaceItemValue('Subject',logEve+' Export');
doc.replaceItemValue('Records',y);      
doc.replaceItemValue('categories',logEve);
var rtitem:NotesRichTextItem = doc.createRichTextItem('Body');
rtitem.embedObject(NotesEmbeddedObject.EMBED_ATTACHMENT, fileName,fileName, null);    doc.replaceItemValue('fileSize',doc.getFirstItem('Body').getEmbeddedObjects()[0].getFileSize()/1000);
doc.save();
}
delFile(fileName);
}catch(e){
fileOut.close();
delFile(fileName);
bRetVal=false;      
sUzenet+=' hiba: '+e;
msgVScope(sUzenet);
}finally{       
return bRetVal;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:34:32.203

正如评论中所建议的：

*   将所有代码移动到托管 bean。我建议您将 profileDocument、数据库、会话和 OutputStream 传递给呈现电子表格的函数。通过这种方式，您可以从命令行、代理使用类或直接在浏览器响应（XAgent 样式）中传回工作表，命令行实际上对于调试非常宝贵。
*   注意你的变量并正确回收所有东西（检查 OpenNTF 上的 shred(base ... moreturi) 函数。
*   除非您真的想在浏览器中传回电子表格......使用代理（使用 bean 方法，您可以随时改变主意）

让我们知道怎么回事

# android - Eclipse 花费大量时间来构建 Android 项目

> ID：12635478
> 
> 赞同：0
> 
> 时间：2012-09-28T07:25:54.490
> 
> 标签：android, eclipse

我看到 Eclipse 花费大量时间来构建项目。有什么方法可以加快构建过程吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T07:27:43.477

伙计们找到了解决方案，Chainfire 开发了一个工具.. [FAAPT](http://forum.xda-developers.com/showthread.php?t=1907281) 下载 zip，用这个替换你平台工具中的 aapt 文件.. 它超级快.. 我可以在 2 -3 秒内构建项目.. :)

# c# - 一遍又一遍地获取 FormatException

> ID：12635483
> 
> 赞同：0
> 
> 时间：2012-09-28T07:26:06.753
> 
> 标签：c#, formatexception

我正在尝试计算不同物体的面积。所有这些对象都有自己的`WinForm.`我想在一个`CalculationBase`类中进行计算，但是当我尝试这样做时，我不断收到一条消息，`FormatException.`这是我的代码：

在我`Program.cs`的中，我创建了对要计算的表格的引用。

```
static class Program
    {
        public static frmRectangle formRect;
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            formRect = new frmRectangle();

            Application.Run(new frmMain());
        }
    } 
```

在`CalculationBase`类中，我将变量声明为`double breadth, height;`并输入以下代码进行计算：

```
private void Calculations()
        {
            FormCheck();
            if (rect)
            {

                Debug.WriteLine("Rectangular is open");

                // Area
                Program.formRect.txtFormArea.Text = string.Format("A = {0} * {1}", b, h);
                if (millimeters)
                    i = (int)Math.Pow(10, 2);
                else if (centimeters)
                    i = (int)Math.Pow(10, 4);

                areaPrimair = Math.Round((b * h), 4);
                areaSecundair = Math.Round((areaPrimair / i), 4);

                Program.formRect.txtAreaPrimair.Text = areaPrimair.ToString();
                Program.formRect.txtAreaSecundair.Text = areaSecundair.ToString();
            }
        } 
```

此函数在 ClickEvent 中调用：

```
private void btnCalculate_Click(object sender, EventArgs e)
        {
                try
                {
                    breadth = double.Parse(Program.formRect.txtBreadthInput.Text);
                    height = double.Parse(Program.formRect.txtHeightInput.Text);

                    Calculations();
                }
                catch(FormatException)
                {
                    MessageBox.Show("Some values are invalid. Please check your input.", "Invalid value");
                }
            }
        } 
```

如前所述，我的程序继续显示 FormatException 的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:33:30.163

当您将空字符串或非数字字符串传递给 时 `Double.Parse("")`，您会得到格式异常。在点击按钮之前，请确保您输入的是双字符串

# c#-4.0 - 重置 ldap 用户密码（错误：服务器无法处理目录请求。）

> ID：12635484
> 
> 赞同：0
> 
> 时间：2012-09-28T07:26:09.640
> 
> 标签：c#-4.0, openldap

我正在使用这段代码：

```
LdapConnection connection = new LdapConnection(new LdapDirectoryIdentifier("DOMAIN",636));

connection.SessionOptions.VerifyServerCertificate =
            new VerifyServerCertificateCallback((con, cer) => true);
connection.SessionOptions.ProtocolVersion = 3;
connection.AuthType = AuthType.Basic;
connection.Credential = new NetworkCredential("CN=user,CN=Users,DC=DOMAIN","password!");

connection.SessionOptions.SecureSocketLayer=true;

using(connection)
{
  connection.Bind();

  SearchRequest request = new SearchRequest("CN=Users,DC=DOMAIN", "CN=mayank",    System.DirectoryServices.Protocols.SearchScope.Subtree);

  SearchResponse response = (SearchResponse)connection.SendRequest(request);

  SearchResultEntry entry = response.Entries[0];

  DirectoryAttributeModification modifyUserPassword = new DirectoryAttributeModification();
        modifyUserPassword.Operation = DirectoryAttributeOperation.Replace;
        modifyUserPassword.Name = "unicodePwd";
        modifyUserPassword.Add(GetPasswordData("admin1234!"));

        ModifyRequest modifyRequest = new ModifyRequest(entry.DistinguishedName, modifyUserPassword);
        DirectoryResponse dirResponse = connection.SendRequest(modifyRequest); 
```

}

这成功连接到 LDAP，但是当尝试更改密码时，它会引发错误，指出“服务器无法处理目录请求”。

# javascript - 如何使用 javascript 验证文本区域

> ID：12635489
> 
> 赞同：3
> 
> 时间：2012-09-28T07:26:35.123
> 
> 标签：javascript

我想检查一个 textarea 是否为空。为此，我编写了以下代码：

```
function validateForm(theForm) {
    var problem_desc = document.getElementById("problem_desc");

    if (problem_desc.value == '') {
        alert("Please Write Problem Description");
        return false;
    } else {
        return true;
    }
}​ 
```

第一次它工作正常。但是，如果我从文本区域中删除文本，则上述函数将返回真值，即假设我已在文本框中输入了先前的文本。谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:32:11.130

我得到了正确的。这就是我所做的。

1.  点击验证，它说`Please Write Problem Description`。
2.  写点东西然后点击。没啥事儿。
3.  删除文本。点击验证，它说`Please Write Problem Description`。

注意：使用`trim`函数来消除空格。

### 代码：

```
function validateForm(theForm) {
    var problem_desc = document.getElementById("problem_desc");

    if ($.trim(problem_desc.value) == '') {
        alert("Please Write Problem Description");
        return false;
    } else {
        return true;
    }
} 
```

### 演示： http: [//jsfiddle.net/TZGPM/1/](http://jsfiddle.net/TZGPM/1/) *（也检查空格！）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:30:07.423

像这样检查值中的空格

```
if (problem_desc.value.match (/\S/)) { ... } 
```

或其他方式检查长度

```
 problem_desc.value.length == 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T15:38:48.603

删除空格并计算 value 属性的长度。

```
function validateForm(theForm) {
    var problem_desc = document.getElementById("problem_desc");

    if (problem_desc.value.replace(/ /g,'').length) {
       return true;
    } else {
       alert("Please Write Problem Description");
       return false;
    }
}
```

```
<textarea id="problem_desc"></textarea>
<button onclick="validateForm()">Validate</button>
```

# java - 如何在java中从浏览器获取地理位置

> ID：12635494
> 
> 赞同：0
> 
> 时间：2012-09-28T07:26:50.340
> 
> 标签：java, geolocation

我正在开发示例应用程序，它需要将地理位置放在日志中。是否有任何 API 或方法可以用于从 Java 中的浏览器获取地理位置。

有的话请指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:48:06.963

有两种方法可以做到这一点。这两个都基于您知道远程客户端 IP 地址这一事实。

1.  将地理位置数据库下载到本地，并根据收到的客户端的 IP 地址进行查询。[Geolite](http://www.maxmind.com/en/geolite)就是这样一个数据库，它会定期更新。
2.  订阅一些在线服务，例如[GeoLoc](http://www.ipaddresslabs.com/)，它会根据传递的 IP 地址以 XML 格式返回位置。

# perl - 我应该将“eval”放在子程序中还是将子程序放在“eval”中？

> ID：12635495
> 
> 赞同：1
> 
> 时间：2012-09-28T07:26:53.530
> 
> 标签：perl, error-handling, eval

是否必须首选这两种方法中的一种，还是只是口味问题？

```
#!/usr/bin/env perl
use warnings;
use strict;
use DBI;

my $db = 'sqlite_db';

####################   A   ####################

sub get_database_handle {
    my ( $db ) = @_;
    my $dbh;
    eval {
        $dbh = DBI->connect( "DBI:SQLite:$db", '', '', {...} )
        or die DBI->errstr;
    };
    if ( $@ ) {
        print $@;
        return;
    }
    return $dbh;
}

DATABASES: while ( 1 ) {
    # choose a database from a list of databases
    # ...
    my $dbh = get_database_handle( $db );
    next DATABASES if not defined $dbh;
    # ...
    # do something with the database
}

####################   B   ####################

sub get_database_handle {
    my ( $db ) = @_;
    my $dbh = DBI->connect( "DBI:SQLite:$db", '', '', {...} ) 
    or die DBI->errstr;
    return $dbh;
}

DATABASES: while ( 1 ) {
    # choose a database from a list of databases
    # ...
    my $dbh;
    eval { $dbh = get_database_handle( $db ); };
    if ( $@ ) {
        print $@;
        next DATABASES;
    }
    # ...
    # do something with the database
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:30:00.837

为什么要评估？当您无法获得数据库句柄时，您会怎么做？

至少，子例程应该返回一个数据库句柄或者死掉，所以那里没有 eval。

如果在出现数据库错误时您确实有工作要做，那么在子例程之外进行 eval 。不需要仅围绕子例程，可以根据您的错误处理逻辑进行更广泛的范围。

但是，如果您只想终止程序并打印错误，那么就让异常冒泡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:08:35.757

这取决于在项目的其余部分中处理错误的首选方式。

*   如果您打算使用异常，请让您的函数抛出它们。

*   如果您要通过条件手动处理错误，请不要抛出（eval inside）。

我自己*更喜欢*例外。它们很响亮（你知道有些东西坏了！），加上通过`Carp::confess`/的堆栈跟踪，`Carp::longmess`并且`$SIG{__DIE__}`在大型代码库的情况下是一个很好的奖励。

*这是一个（不）成功的故事。一两个月前，我们推出了损坏的代码，由于未经检查的 DB 处理函数的返回值而默默地损坏了数据。它生产了一天。恢复数据是一个痛苦的世界。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:13:52.437

`RaiseError => 1`如果您的代码看起来像那样，那么使用它真的没有任何意义。如果您想保留该代码布局，请`RaiseError => 0`改用。（您以后可以随时使用 $dbh->{RaiseError} = 1;` 打开它。）

```
sub get_database_handle {
    my ( $db ) = @_;
    return DBI->connect("DBI:SQLite:$db", '', '', {
        ...
        RaiseError => 0,
        PrintError => 1,
    });
}

for my $db ( ... ) {
    my $dbh = get_database_handle( $db )
       or next;

    ...
} 
```

也就是说，我建议您继续使用`RaiseError => 1`，但改为更改代码布局。具体来说，您应该扩大评估的范围。

```
sub get_database_handle {
    my ( $db ) = @_;
    return DBI->connect("DBI:SQLite:$db", '', '', {
        ...
        RaiseError => 1,
        PrintError => 0,
    });
}

for my $db ( ... ) {
    if (!eval {    
        my $dbh = get_database_handle( $db );

        ...

        1  # No exception
    }) {
        warn("Error processing database $db: $@");
    }
} 
```

这将捕获任何错误，而不仅仅是数据库连接错误。

# perl - 如何设置跨平台解释器路径？

> ID：12635497
> 
> 赞同：1
> 
> 时间：2012-09-28T07:27:16.753
> 
> 标签：perl

我希望我的脚本在 Windows 和 UNIX 系统上工作，所以我想要一些代码作为自爆（只是一个示例，不工作）

```
if $^O eq 'MSWin32' {
#!/c:/perl/bin/perl.exe
}
else { / non-windows system
#!/usr/local/bin/perl
} 
```

有没有办法在 perl 中做到这一点？看来#! line 必须是 perl 脚本的第一行，所以这是不可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:31:36.013

shebang ( `#!/path/to/interpreter`) 仅用于类 unix 系统。它必须是第一行。在 Windows 系统上，不使用 shebang，而是可以使用文件结尾关联：您可以将`.pl`文件结尾与 perl 解释器相关联。

shebang 中的命令行开关将由 perl 解释器解释，与平台无关。

在所有平台上启动 perl 脚本的安全方法是实际使用该`perl`命令。如果 Perl 安装成功，它将可用。例如`perl myscript.pl`，而不是`./myscript.pl`. 第二个选项要求文件在 *nix 系统上设置为“可执行”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T08:02:17.357

`#!`必须是文件的前两个字符，因为这是内核在尝试启动文件时查找它们的位置。它们是操作系统指令的一部分（称为 shebang 行），而操作系统对 Perl 一无所知。

如果您使用标准的 Perl 安装程序（例如 ExtUtils::MakeMaker）来安装您的脚本，只需使用`#!perl`，安装程序就会为您的系统调整任何现有的`#!`行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T07:30:39.780

这是不可能的。这 ”＃！” 由 exec*() 系列 Unix 函数查看，以确定如何运行文件。所以你不能在那里做任何脚本。

无论如何，它并不是那么有用，因为 Windows 命令提示符（或 CreateProc() 函数，但我不确定它是否可用于启动批处理文件）不查找 #!。

# asp.net-mvc - 在 Razor 视图中使用 asp.net mvc4 ActionLink 生成语义 URL

> ID：12635498
> 
> 赞同：1
> 
> 时间：2012-09-28T07:27:18.267
> 
> 标签：asp.net-mvc, url, asp.net-mvc-4, asp.net-mvc-routing, actionlink

我在面向公众的网页的控制器中有以下设置

`Company -> About -> Partners`（我希望以**Company/About/Partners**的身份访问） 操作方法

```
public about(string category)
{
  ViewBag.Category = category;
  return View();
} 
```

链接的生成如下完成，这给了我错误的 URL

```
@Html.ActionLink("Partners & Investors", "About", "Company",new { Category = "Partners" },null) 
```

**错误的网址**

`Company/About?Category=Partners%20and%20Investors`

所以问题是如何生成我想要的正确网址。我该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:41:43.523

`automatically`当您创建新`route`的并将其放在正确的位置时，将生成 URL 。

**添加**

像这样的东西：

```
routes.MapRoute(
    "Category",
    "Company/About/{category}",
    new { controller = "Company", action = "About", category = "default" }
);

// default
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

另请查看此链接：[高级路由](http://ofps.oreilly.com/titles/9781449320317/ch_Routing.html)

# data-structures - 多次具有相同键的红黑树：将集合存储在节点中还是将它们存储为多个节点？

> ID：12635502
> 
> 赞同：4
> 
> 时间：2012-09-28T07:27:28.920
> 
> 标签：data-structures, binary-search-tree, multimap, red-black-tree, multiset

显然你可以做任何一个，但前者更常见。

你为什么会选择后者，它是如何工作的？

我读到这个：[http](http://www.drdobbs.com/cpp/stls-red-black-trees/184410531) ://www.drdobbs.com/cpp/stls-red-black-trees/184410531 ；这让我觉得他们做到了。它说：

> insert_always 是一个状态变量，它告诉 rb_tree 是否允许同一键值的多个实例。此变量由构造函数设置，并由 STL 用于区分 set 和 multiset 以及 map 和 multimap。set 和 map 只能出现一次特定键，而 multiset 和 multimap 可以出现多次。

虽然现在我认为这并不一定意味着。他们可能仍在使用容器。

我认为具有相同键的所有节点都必须排成一行，因为您必须将所有具有相同键的节点存储在右侧或左侧。因此，如果您将相等的节点存储在右侧并插入 1000 个 1 和一个 2，那么您基本上会有一个链表，这会破坏红黑树的属性。

为什么我找不到太多关于它的原因是它只是一个坏主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:37:37.733

商店的下侧作为多个节点：

1.  扩大树的大小，使搜索变慢。

2.  如果要检索键 K 的所有值，则需要 M*log(N) 时间，其中 N 是总节点数，M 是键 K 的值数，除非您引入额外的代码（这会使数据结构复杂化）为这些值实现链表。（如果存储集合，时间复杂度只取log(N)，实现简单）

3.  删除成本更高。使用多节点方法，您需要在每次删除时删除节点，但使用集合存储，您只需要在删除键 K 的最后一个值时删除节点 K。

想不出多节点方法有什么好的方面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T17:11:59.333

根据定义，二叉搜索树不能包含重复项。如果您使用它们来生成排序列表，则丢弃重复项会产生不正确的结果。当我遇到重复问题时，我正在用 PHP 实现红黑树。我们将使用树进行排序和搜索。我正在考虑向节点数据类型添加一个出现值。当遇到重复时，只需增加出现次数。当遍历树以产生输出时，只需按出现次数重复该值。我想我仍然会有一个有效的 BST 并避免拥有一整串重复值来保留最佳搜索时间。

# f# - 针对有界随机数的详尽“匹配”

> ID：12635505
> 
> 赞同：1
> 
> 时间：2012-09-28T07:28:25.423
> 
> 标签：f#

```
open System

let random_number_generator = System.Random(int System.DateTime.Now.Ticks) in
let random_number_below n = random_number_generator.Next(n) in
match random_number_below 3 with
| 0 -> "Zero!"
| 1 -> "One!"
| 2 -> "Two!"
;; 
```

根据编译器的说法，上面的 match 语句并不详尽。这是完全合法的，因为 F# 没有可以保证随机数范围的语法信息。

```
Incomplete pattern matches on this expression. For example, the value '3' may indicate a case not covered by the pattern(s). 
```

与随机数匹配（或者只是 if-else'ing）的惯用 F# 方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T08:37:13.247

如评论中所述，解决此问题通常需要解决[停机问题](https://en.wikipedia.org/wiki/Halting_problem)。因此，最好的办法可能是

```
|_ -> failwith "broken RNG" 
```

# ios - 多个 NSURLConnections 会创建多个 NSThreads 吗？

> ID：12635511
> 
> 赞同：1
> 
> 时间：2012-09-28T07:28:49.147
> 
> 标签：ios, nsurlconnection, nsthread, nsurlconnectiondelegate

*NSURLConnection 的*文档说*NSURLConnection*在单独的线程上运行，并且委托方法在启动连接的线程上调用。

我有多个*NSURLConnection*对象包含在我并行运行的“ *URLDownload < NSURLConnectionDelegate > ”对象中。*

在暂停我的程序（有时我在其中设置断点）并查看 Debug Navigator 时，我只看到一个**com.apple.NSURLConnectionLoader**线程。

以下是我认为这是如何工作的：

1.  我创建了 5 个*URLDownload*对象（每个对象都有自己的*NSURLConnection*）
2.  创建了 5 个线程（每个*NSURLConnection*一个）
3.  每个*NSURLConnection*在启动它们的线程上调用它的委托方法。

因此有 5 个线程（每个*NSURLConnection*一个），但它们的数据（*didReceiveData...*方法和其他）在单个线程上处理。

我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:17:21.663

异步 NSURLConnection 会在主线程上工作，这就是你需要知道的。

相对于网络连接的工作量而言，线程使用大量资源，因此 1 个异步 NSURLConnection 可能使用 1 个后台线程，2 个异步 NSURLConnections 可能使用 2 个后台线程，但 100 个异步 NSURLConnections 可能不会使用 100 个后台线程。

NSURLConnection 是一个黑匣子，可以为您管理最佳数量。这可能取决于您拥有多少个处理器、您的网络速度等（注意，我并不是说我知道它在后台是如何工作的，只是您不需要知道 - 它会做正确的事情。一个每个连接的线程将是一种非常可怕的方法）。

委托方法（didReceiveData 等）在启动连接的线程上被调用，因此这与在单个线程上调用它们不同。如果您在五个不同的线程上启动 5 个连接，您将在五个不同的线程上获得回调。

# android - 如何在android应用程序中获取当前温度？

> ID：12635513
> 
> 赞同：0
> 
> 时间：2012-09-28T07:28:54.457
> 
> 标签：android, widget

我正在开发一个安卓应用程序。我想在其中显示当前温度。我怎样才能做到这一点？我正在使用 AVD 进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:49:56.210

如果您正在寻找一种显示环境温度的方法，恐怕没有内置温度计是不可能的。而且我从未听说过具有该功能的设备。但即使有一个，你肯定不能用 AVD 做到这一点。

另一方面，您可以使用基于位置的天气 API 来获取您所在城镇/城市的大致温度。

[Wunderground Weather API](http://www.wunderground.com/weather/api/) 免费 500 次呼叫/天 - 10 次呼叫/分钟（或支付更多费用）

[雅虎天气 API](http://developer.yahoo.com/weather/)

[世界天气在线免费 API](http://www.worldweatheronline.com/free-weather.aspx)

[世界天气在线付费 API](http://www.worldweatheronline.com/premium-weather.aspx)

# java - 在jsp页面中调用java方法时，显示servlet.service异常nosuchmethod

> ID：12635515
> 
> 赞同：0
> 
> 时间：2012-09-28T07:29:00.197
> 
> 标签：java, jsp

我在显示 servlet.service 异常 nosuch 方法异常或类的 jsp 页面中调用 java 方法

```
<%@page import="java.util.ArrayList"%>
<%@page import="Model.Validation"%>
<%
String username=request.getParameter("uname");
String password=request.getParameter("password");
System.out.print(username+"\nhellloo\n"+password+"\n re\n");
ArrayList<String> names=Validation.validateuname(username,password);
String name=(String)names.get(0);
String role=(String)names.get(1);
 if(role.equals("Administrator"))
 {
out.print("{success:true,errors:{reason:'Administrator'},uname:{name:'"+name+"'}}");

}else if(role.equals("User"))
 {
out.print("{success:true,errors:{reason:'User'}}");

}else
 {
 out.print("{success:false,errors:{reason:'User name or Password is wrong, please try              again'}}");

  }

%> 
```

> 严重：servlet jsp 的 Servlet.service() 抛出异常 java.lang.NoSuchMethodError: Model.Validation.validateuname(Ljava/lang/String;Ljava/lang/String;)Ljava/util/ArrayList; 在 org.apache.jsp.check_005flogin_jsp._jspService(check_005flogin_jsp.java:61) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java :717) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) 在 org.apache.jasper.servlet 的 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)。 JspServlet.service(JspServlet.java:260) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:31:51.777

StackTrace 告诉你没有方法

```
public class Validation {
    public static ArrayList<String> validateuname(String, String) {
        ArrayList<String> ls = new ArrayList<String>();
        //a nice implementation goes here!
        return ls; 
    }
} 
```

检查这是否是有效的方法。如果您的方法正确，则重新编译您的代码并再次部署您的 Web 应用程序。

* * *

你的代码有一个大问题，你不能使用scriptlet（`<% ... %>`你的jsps里面的Java代码）。对此问题和解决方案有进一步的解释：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/a/3180202/1065197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:35:15.373

在这条线上抛出异常

```
ArrayList<String> names=Validation.validateuname(username,password); 
```

验证是引用吗？，如果它是对对象的引用，请检查该类中的 validatename() 方法。从您的代码中，我可以说它不是您尝试使用类名调用 valudatename() 的参考。尝试这个：

```
 ArrayList<String> names=new Validation().validateuname(username,password); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:55:04.047

1.  确保您的方法`validateuname`存在于您的 Validation 类中。

2.  确保您已编译该类，将其保存到服务器中正确的项目目录（似乎您正在使用**Tomcat**），并且您已重新启动服务器。请注意，在每个新方法声明中，您都需要重新启动服务器。

# emacs - 组织模式下的多个段落脚注

> ID：12635519
> 
> 赞同：4
> 
> 时间：2012-09-28T07:29:11.227
> 
> 标签：emacs, org-mode, footnotes

我有一个带有脚注的 org-mode 文档：

```
This some text[fn:1]. This is another text[fn:2].

* Footnotes

[fn:1] This is footnote's first line.

This is footnote's second line.

[fn:2] Another footnote 
```

`C-u C-c C-x f S`然后我通过按-`org-footnote-action`执行`(org-footnote-renumber-fn:N)`和重新编号脚注并重新编号`(org-footnote-normalize 'sort)`。结果是：

```
This some text[fn:1]. This is another text[fn:2].

* Footnotes

[fn:1] This is footnote's first line.

[fn:2] Another footnote 
```

脚注的第二段丢失了。这使得在 org 模式下无法使用多个段落脚注。一个半解决方案是为每个段落制作一个单独的脚注，但我不希望这样。

是否有可能保留脚注中的结构？我应该怎么做才能使 org-mode 不删除脚注中的文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T07:45:21.260

According to the [org mode manual](http://orgmode.org/manual/Footnotes.html):

> If you need a paragraph break inside a footnote, use the LaTeX idiom ‘\par’.

It worked for me:

```
This some text[fn:1]. This is another text[fn:2].

* Footnotes

[fn:1] This is footnote's first line.\par
\par
This is footnote's second line.

[fn:2] Another footnote 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-02T21:20:21.043

对于通过谷歌访问的人或多年后访问的人（就像我一样）：现在不同了。多个段落很容易实现，因为脚注仅在两个连续的空行之后结束。

请参阅[https://orgmode.org/org.html#Creating-Footnotes](https://orgmode.org/org.html#Creating-Footnotes)：

> 它在下一个脚注定义、标题或两个连续的空行之后结束

# java - 更改浏览器选项卡时，从 Applet 打开的模型对话框位于 Applet 后面

> ID：12635531
> 
> 赞同：1
> 
> 时间：2012-09-28T07:30:15.663
> 
> 标签：java, linux, firefox, applet, modal-dialog

该小程序由以下代码组成：

```
public class TestApplet extends Applet {
public TestApplet() {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            JDialog dialog = new JDialog();
            dialog.setContentPane(new JLabel("Hello"));
            dialog.setSize(new Dimension(300, 200));
            dialog.setModal(true);
            dialog.setVisible(true);
        }
    });
}} 
```

当我在 Windows 7 上运行的 InternetExplorer 上打开它时，它可以工作：我更改浏览器选项卡，对话框始终位于前面。

当我在 Red Hat Enterprise Linux Server Release 6.3、Java 1.7.0_07-b10 上运行的 Firefox ESR 10.0.5 上打开它时，它会立即移到浏览器窗口后面，我必须最小化浏览器才能再次找到它。

我该怎么做才能使模态对话框始终停留在 Applet 前面？

更新：

将 JDialog 的创建更改为

```
JDialog dialog = new JDialog(javax.swing.SwingUtilities.getWindowAncestor(TestApplet.this)); 
```

没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:13:51.507

最后，在尝试了很多事情之后，我想出了以下解决方法：

```
public class ModalDialog extends JDialog {

    private boolean isClosing = false;

    protected synchronized boolean isClosing() {
        return isClosing;
    }

    protected synchronized void setClosing(boolean isClosing) {
        this.isClosing = isClosing;
    }

    public ModalDialog() {
        setSize(200, 300);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);

        addFocusListener(new FocusAdapter() {
            public void focusLost(FocusEvent arg0) {
                if (isClosing()) {
                    System.out.println("Returned because dialog is already closing");
                    return;
                }
                EventQueue.invokeLater(new Runnable() {
                    public void run() {
                        ModalDialog.this.setVisible(false);
                        ModalDialog.this.setVisible(true);
                    }
                });
            }
        });
        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.out.println("Dialog is closing");
                setClosing(true);

            }
        });
    }
} 
```

# android - Android：如何将 ConnectionTimeOut 值设置为 HttpClient

> ID：12635535
> 
> 赞同：0
> 
> 时间：2012-09-28T07:30:28.880
> 
> 标签：android, httpclient

我将 HttpParameters 设置为 HttpClient。

现在我想测试它们是否设置正确。其实我是这样做的：

```
public class MyHttpClient extends DefaultHttpClient {

    public MyHttpClient(int tc, int ts) {

        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds until a connection is established.
        int timeoutConnection = tc;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT) 
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = ts;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
        ClientConnectionManager mgr = this.getConnectionManager();
        this.setParams(httpParameters);
    }
} 
```

并像这样创建它的实例：

```
public static MyHttpClient httpclient = new MyHttpClient(5000, 5000); 
```

如何知道这是否真的有效。

我试过这个：

httpclient.getParams().toString();

我得到了这个作为输出：

```
org.apache.http.params.BasicHttpParams@40520f20 
```

似乎是我设置的`Default Params`但不是我设置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:33:45.003

使用这些代码行

```
HttpParams httpParameters = new BasicHttpParams();
    int timeoutConnection = 120000;
            HttpConnectionParams.getConnectionTimeout(httpParameters)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:34:13.087

我用了：

```
HttpParams params = new BasicHttpParams();
params.setParameter(HttpProtocolParams.USE_EXPECT_CONTINUE, false);
HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
params.setIntParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, CONNECTION_TIMEOUT);
params.setIntParameter(CoreConnectionPNames.SO_TIMEOUT, CONNECTION_TIMEOUT);
params.setLongParameter(ConnManagerPNames.TIMEOUT, CONNECTION_TIMEOUT);
HttpClient httpClient = new DefaultHttpClient(params); 
```

# c++ - C 浮点精度

> ID：12635537
> 
> 赞同：4
> 
> 时间：2012-09-28T07:30:38.420
> 
> 标签：c++, c, floating-point, floating-point-conversion

> **可能重复：**
> [浮点比较](https://stackoverflow.com/questions/7011184/floating-point-comparison)

我对 C/C++ 中浮点数的准确性有疑问。当我执行下面的程序时：

```
#include <stdio.h>

int main (void) {
    float a = 101.1;
    double b = 101.1;
    printf ("a: %f\n", a);
    printf ("b: %lf\n", b);
    return 0;
} 
```

结果：

```
a: 101.099998
b: 101.100000 
```

我相信 float 应该有 32 位所以应该足以存储 101.1 为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T07:38:41.213

您只能在 IEEE754 中精确地表示数字（至少对于单精度和双精度二进制格式），如果它们可以通过将两个的倒幂（即，如、、等）相加来构造，则取决于可用的位数为了精确。`2^(-n)``1``1/2``1/4``1/65536`

*在浮点数（23 位精度）或*双精度数（52 位精度）提供的缩放比例范围内，没有两个的倒幂组合可以让您精确到 101.1 。

如果您想要快速教程了解这种倒置的二次幂的工作原理，请参阅[此答案](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal/3448855#3448855)。

将该答案中的知识应用于您的`101.1`数字（作为单精度浮点数）：

```
s eeeeeeee mmmmmmmmmmmmmmmmmmmmmmm    1/n
0 10000101 10010100011001100110011
           |  | |   ||  ||  ||  |+- 8388608
           |  | |   ||  ||  ||  +-- 4194304
           |  | |   ||  ||  |+-----  524288
           |  | |   ||  ||  +------  262144
           |  | |   ||  |+---------   32768
           |  | |   ||  +----------   16384
           |  | |   |+-------------    2048
           |  | |   +--------------    1024
           |  | +------------------      64
           |  +--------------------      16
           +-----------------------       2 
```

其中的尾数部分实际上会永远持续下去`101.1`：

```
mmmmmmmmm mmmm mmmm mmmm mm
100101000 1100 1100 1100 11|00 1100 (and so on). 
```

因此，这不是精度问题，没有多少有限位可以准确地以 IEEE754 格式表示该数字。

使用这些位计算*实际*数字（最接近的近似值），符号为正。指数为 128+4+1 = 133 - 127 偏差 = 6，因此乘数为 2 ⁶或 64。

尾数由 1（隐式基数）加上（对于所有这些位，每个位值 1/(2 ^n )，因为 n 从 1 开始并向右增加）`{1/2, 1/16, 1/64, 1/1024, 1/2048, 1/16384, 1/32768, 1/262144, 1/524288, 1/4194304, 1/8388608}`，。

当你把所有这些加起来时，你得到`1.57968747615814208984375`.

当您将其乘以先前计算的乘数时`64`，您会得到`101.09999847412109375`。

所有数字均`bc`使用 100 位十进制数字的比例计算，导致大量尾随零，因此数字*应该*非常准确。双重如此，因为我检查了结果：

```
#include <stdio.h>
int main (void) {
    float f = 101.1f;
    printf ("%.50f\n", f);
    return 0;
} 
```

这*也*给了我`101.09999847412109375000...`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T07:33:53.603

您需要阅读有关[浮点数如何工作的](http://en.wikipedia.org/wiki/Floating_point)更多信息，尤其是关于可[表示数字](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)的部分。

对于为什么您认为“32 位对于 101.1 应该足够”，您没有给出太多解释，因此很难反驳。

二进制浮点数不适用于所有十进制数，因为它们基本上存储数字，等待它，以 2 为底。就像二进制一样。

这是一个众所周知的事实，这就是为什么永远不应该用浮点数处理货币的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T07:39:15.697

您在 base 中的号码`101.1`在base`10`中。该部分正在重复。因此，无论您有多少位数，数字都无法在计算机中准确表示。`1100101.0(0011)``2``0011`

查看[IEE754](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)浮点标准，您会发现为什么该`double`版本似乎完全显示了它。

PS： in base 的推导`101.1`是`10`在`1100101.0(0011)`base `2`：

```
101 = 64 + 32 + 4 + 1
101 -> 1100101

.1 * 2 =  .2 -> 0
.2 * 2 =  .4 -> 0
.4 * 2 =  .8 -> 0
.8 * 2 = 1.6 -> 1
.6 * 2 = 1.2 -> 1
.2 * 2 =  .4 -> 0
.4 * 2 =  .8 -> 0
.8 * 2 = 1.6 -> 1
.6 * 2 = 1.2 -> 1
.2 * 2 =  .4 -> 0
.4 * 2 =  .8 -> 0
.8 * 2 = 1.6 -> 1
.6 * 2 = 1.2 -> 1
.2 * 2 =  .4 -> 0
.4 * 2 =  .8 -> 0
.8 * 2 = 1.6 -> 1
.6 * 2 = 1.2 -> 1
.2 * 2 =  .4 -> 0
.4 * 2 =  .8 -> 0
.8 * 2 = 1.6 -> 1
.6 * 2 = 1.2 -> 1
.2 * 2.... 
```

PPS：如果您想准确存储`1/3`in base的结果，也是一样的`10`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T07:34:01.047

如果您的打印有更多数字，`double`您会发现甚至`double`无法准确表示：

```
 printf ("b: %.16f\n", b);

 b: 101.0999999999999943 
```

事情是`float`并且`double`正在使用二进制格式，并不是所有的浮点数都可以用二进制格式精确表示。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-28T07:40:04.913

您在这里看到的是两个因素的组合：

*   IEEE754 浮点表示不能准确表示一整类有理数和所有无理数
*   在`printf`. 也就是说，使用 a 时的错误`double`发生在第 6 个 DP 的右侧某处。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T07:37:24.400

不幸的是，大多数十进制浮点数不能用（机器）浮点精确表示。这就是事情的运作方式。

例如，二进制中的数字 101.1 将表示为`1100101.0(0011)`（该`0011`部分将永远重复），因此无论您必须存储多少字节，它都不会变得准确。[这](http://kipirvine.com/asm/workbook/floating_tut.htm)是一篇关于浮点数的二进制表示的小文章，[在这里](http://sandbox.mc.edu/~bennet/cs110/flt/dtof.html)您可以找到一些将浮点数转换为二进制的示例。

如果您想了解有关此主题的更多信息，我可以向您推荐[这篇文章](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，尽管它很长而且不太容易阅读。

# ios - NSOperation 内部的异步操作

> ID：12635540
> 
> 赞同：1
> 
> 时间：2012-09-28T07:30:48.733
> 
> 标签：ios, multithreading, networking, nsoperation, wsdl2objc

我有一个网络服务，我用它来将图像上传到服务器。我在`NSOperation`. 当我同步调用服务的方法时，一切正常，但是当我异步调用方法时，Web服务器永远不会收到请求。我能想到发生这种情况的唯一原因是线程被杀死，即使在 Web 服务异步调用内部有一个循环保持当前的 runloop 处于活动状态，直到收到响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:36:27.493

查看文档`NSOperation`，您将了解如何实现并发`NSOperations`。简而言之，不是实现`main`，而是实现`start`、`isConcurrent`、`isExecuting`和`isFinished`。所以通常你会返回`YES`，`isConcurrent`在方法中开始你的请求`start`并设置`isExecuting`为 YES，当你的请求完成时设置`isFinished`为 YES。有关更多详细信息，请参阅官方 Apple NSOperation 类文档。

# windows - 批量获取当前日期月份和年份的安全方法

> ID：12635541
> 
> 赞同：7
> 
> 时间：2012-09-28T07:30:51.453
> 
> 标签：windows, date, batch-file

我正在尝试编写一个批处理脚本，它将以安全的方式（即独立于日期格式）获取当前的日期、月份和年份。不幸的是，我发现的所有互联网资源都提出了类似的建议：

```
 SET CURRENT_DATE=%DATE: =0%
   SET YEAR=%DATE:~-4%
   SET MONTH=%DATE:~3,2%
   SET DAY=%DATE:~5,2% 
```

如果我的日期格式为 yyyy/mm/dd 或 yyyy-mm-dd，这将有效，但如果它的格式为 yy-mm-dd 或其他格式，则无效。有没有一种安全的方法来获取年、月和日？

还有一个问题 - 是否有可能知道日期分隔符是什么（`/`在第一种情况下和`-`在其他情况下）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-30T14:50:30.433

此代码的前四行将为您提供 XP Pro 及更高版本中可靠的 YY DD MM YYYY HH Min Sec 变量。

```
@echo off
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value') do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%"

set "datestamp=%YYYY%%MM%%DD%" & set "timestamp=%HH%%Min%%Sec%"
set "fullstamp=%YYYY%-%MM%-%DD%_%HH%-%Min%-%Sec%"
echo datestamp: "%datestamp%"
echo timestamp: "%timestamp%"
echo fullstamp: "%fullstamp%"
pause 
```

这是一个VBS解决方案：

```
 :: date time using WSH/VBS
  :: datetime.bat V4.2
  ::::::::::::::::::::::::::::::::::::::::::::::::::::::::
  ::
  :: This uses Windows Scripting Host to set variables to
  :: the current date/time/day/day_number/week_of_year etc
  :: for Win9x/ME/NT/W2K/XP/Vista/Win7/Win8 etc
  :: Thanks go to Todd Vargo for his scripting
  ::
  ::::::::::::::::::::::::::::::::::::::::::::::::::::::::
  @echo off
  set TmpFile="%temp%.\tmp.vbs"
  echo> %TmpFile% n=Now
  echo>>%TmpFile% With WScript
  echo>>%TmpFile% .Echo "set m1="   + monthname(month(n), true)
  echo>>%TmpFile% .Echo "set m2="   + monthname(month(n), false)
  echo>>%TmpFile% .Echo "set woy="  + CStr(datepart("ww", n))
  echo>>%TmpFile% .Echo "set year=" + CStr(Year(n))
  echo>>%TmpFile% .Echo "set yr="   + Right(Year(n),2)
  echo>>%TmpFile% .Echo "set month="+ Right(100+Month(n),2)
  echo>>%TmpFile% .Echo "set day="  + Right(100+Day(n),2)
  echo>>%TmpFile% .Echo "set hour=" + Right(100+Hour(n),2)
  echo>>%TmpFile% .Echo "set min="  + Right(100+Minute(n),2)
  echo>>%TmpFile% .Echo "set sec="  + Right(100+Second(n),2)
  echo>>%TmpFile% .Echo "set dow="  + WeekDayName(Weekday(n),1)
  echo>>%TmpFile% .Echo "set dow2=" + WeekDayName(Weekday(n))
  echo>>%TmpFile% .Echo "set iso="  + CStr(1 + Int(n-2) mod 7)
  echo>>%TmpFile% .Echo "set iso2=" + CStr(Weekday(n,2))
  echo>>%TmpFile% End With
  cscript //nologo "%temp%.\tmp.vbs" > "%temp%.\tmp.bat"
  call "%temp%.\tmp.bat"
  del  "%temp%.\tmp.bat"
  del  %TmpFile%
  set TmpFile=
  set stamp=%year%-%month%-%day%.%hour%_%min%_%sec%

  if not "%~1"=="" goto :EOF

  echo The year  is "%year%" or "%yr%"
  echo The month is "%month%" "%m1%" "%m2%"
  echo The day   is "%day%" "%dow%" "%dow2%"
  echo.
  echo ISO8601 Day-Of-Week number is "%iso%" and week of year is: "%woy%"

  echo.
  echo The time in hh:mm:ss is "%hour%:%min%:%sec%"
  echo The hour   is "%hour%"
  echo The minute is "%min%"
  echo The second is "%sec%"
  echo.

  echo The date and time stamp is "%stamp%"
  echo.
  echo date A yyyymmdd "%year%%month%%day%"
  echo date B mmddyyyy "%month%%day%%year%"
  echo date C ddmmyyyy "%day%%month%%year%"
  echo date D yymmdd   "%yr%%month%%day%"
  echo date E mmddyy   "%month%%day%%yr%"
  echo date F ddmmyy   "%day%%month%%yr%"
  pause
  :: datetime.bat
  :::::::::::::::::::::::::::::::::::::::::::::::::::::::::: 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-28T09:32:33.290

首先，您可以从注册表（某处）检索当前设置。
格式和分隔符。

但是它更容易使用`wmic`，它始终具有相同的格式，唯一的缺点是，每次启动它都需要一些时间。

来自 SO 的修改示例[：记录日期/时间](https://stackoverflow.com/a/7730453/463115)

```
@echo off
setlocal EnableDelayedExpansion
FOR /F "skip=1 tokens=1-6" %%A IN ('WMIC Path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') DO (
    if "%%B" NEQ "" (
        SET /A FDATE=%%F*10000+%%D*100+%%A
        SET /A FTIME=%%B*10000+%%C*100+%%E
    )
)
ECHO !FDATE! - !FTIME! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-17T15:41:21.627

**提取日、月和年（与语言环境无关）**

我不会使用 WMIC，因为它的资源非常高并且需要一段时间才能完成，尤其是在速度较慢的计算机上。以下脚本从注册表中获取用户的本地化信息，该注册表与语言环境无关。据我所知，是唯一有效的批处理解决方案。当然，您也可以使用对 VBScript 的调用，但对我来说这是题外话。

```
@echo off

::: Begin set date
setlocal EnableExtensions EnableDelayedExpansion

:: Determine short date format (independent from localization) from registry
for /f "skip=1 tokens=3-5 delims=- " %%L in ( '2^>nul reg query "HKCU\Control Panel\International" /v "sShortDate"' ) do ( 

    :: Since we can have multiple (short) date formats we only use the first char from the format in a new variable
    set "_L=%%L" && set "_L=!_L:~0,1!" && set "_M=%%M" && set "_M=!_M:~0,1!" && set "_N=%%N" && set "_N=!_N:~0,1!"

    :: Now assign the date values to the new vars
    for /f "tokens=2-4 delims=/-. " %%D in ( "%date%" ) do ( set "!_L!=%%D" && set "!_M!=%%E" && set "!_N!=%%F" )
)

:: Print the values as is
echo.
echo This is the original date string --^> %date%
echo These are the splitted values    --^> Day: %d%, Month:%m%, Year: %y%.
echo.

endlocal 
```

**仅提取年份**

对于我编写的脚本，我只想提取年份（与语言环境无关），所以我想出了这个 oneliner，因为我找不到任何解决方案。它使用“DATE”变量、多个分隔符并检查大于 31 的数字。那将是当前年份。与其他一些解决方案相比，它的资源不足。

```
@echo off

setlocal EnableExtensions

for /f " tokens=2-4 delims=-./ " %%D in ( "%date%" ) do ( if %%D gtr 31 ( set "_YEAR=%%D" ) else ( if %%E gtr 31 ( set "_YEAR=%%E" ) else ( if %%F gtr 31 ( set "_YEAR=%%F" ) ) ) )

echo And the year is... %_YEAR%.
echo.

endlocal 
```

# windows - 如何获取已在批处理文件中添加/修改的文件

> ID：12635544
> 
> 赞同：1
> 
> 时间：2012-09-27T19:27:40.500
> 
> 标签：windows, shell, command-line

我有以下批处理文件，它连接文件夹中以 .sql 结尾的所有文件。

```
set func=%~dp0%Stored Procedures\*.sql
for %%i in (%func%) do type "%%i" >>InstallScript.sql 
```

我们使用 SVN 作为我们的存储库，并且我们正在使用分支。目前，该脚本连接所有 .sql 文件，即使是那些没有更改的文件。我想更改它，使其仅连接在创建分支后已修改和/或创建的文件。我们可以通过查看每个文件夹中 .svn 文件夹上的日期时间来做到这一点（有一个存储过程、视图、函数子文件夹）。但我不知道如何处理批处理文件。

理想情况下是这样的（伪代码）：

```
set func=%~dp0%Stored Procedures\*.sql
set branchDateTime=GetDateTime(%~dp0%.svn)  <- Gets the datetime when the .svn folder was created

for %%i in (%func%)
{
  if(%%i.LastModifiedOrCreated > branchDateTime)
   do type "%%i" >> InstallScript.sql
} 
```

感谢布朗博士，我最终得到了这个（对于任何需要类似东西的人）：

```
@echo off
cls

echo --Install Script Generated For MMH Database %DATE% %TIME% > InstallScript.sql

set branch=%~dp0.svn
for %%i in (%branch%) do set SvnFileDate=%%~ti
set year=%SvnFileDate:~8,2%
set month=%SvnFileDate:~0,2%
set day=%SvnFileDate:~3,2%
set hours=%SvnFileDate:~11,2%
set minutes=%SvnFileDate:~14,2%
set datetime=%year%%month%%day%%hours%%minutes%

:: Folder for Functions
set func=%~dp0%Functions\*.sql

setlocal enableextensions enabledelayedexpansion

@for %%i in (%func%) do set FuncFileDate=%%~ti& ^
set year2=!FuncFileDate:~8,2!& ^
set month2=!FuncFileDate:~0,2!& ^
set day2=!FuncFileDate:~3,2!& ^
set hours2=!FuncFileDate:~11,2!& ^
set minutes2=!FuncFileDate:~14,2!& ^
set datetime2=!year2!!month2!!day2!!hours2!!minutes2!& ^

if "!datetime!" LSS "!datetime2!" type "%%i" >> InstallScript.sql

:: I would add similiar code for each folder, one for Views, Stored Procs, etc...

endlocal

pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:49:45.533

第一步，获取 .svn 文件夹的日期时间是这样的：

```
for %%i in (.svn) do set FileDate=%%~ti 
```

您可能必须将该行的结果重新排序为可比较的日期时间格式：

```
for %%i in (.svn) do set FileDate=%%~ti
set year=%FileDate:~6,4%
set month=%FileDate:~3,2%
set day=%FileDate:~0,2%
set hours=%FileDate:~11,2%
set minutes=%FileDate:~14,2%
set datetime=%year%%month%%day%%hours%%minutes%
echo %datetime% 
```

第二部分稍微复杂一点，你需要多行命令、延迟扩展和比较：

```
setlocal enabledelayedexpansion

@for %%i in (*.sql) do set FileDate=%%~ti& ^
set year2=!FileDate:~6,4!& ^
set month2=!FileDate:~3,2!& ^
set day2=!FileDate:~0,2!& ^
set hours2=!FileDate:~11,2!& ^
set minutes2=!FileDate:~14,2!& ^
set datetime2=!year2!!month2!!day2!!hours2!!minutes2!& ^
if "!datetime!" LSS "!datetime2!" type "%%i" >> InstallScript.sql 
```

确保不要在多行部分输入任何额外的空格。希望这可以帮助。

# php - 想从 MySQL 表中创建比较矩阵

> ID：12635552
> 
> 赞同：2
> 
> 时间：2012-09-28T07:32:00.903
> 
> 标签：php, mysql

谁能帮我从 mySQL 表创建比较矩阵。
我有下表。

```
MRP | Brand | USAGE
10 | ABC | 200 MB
10 | XYZ | 300 MB
20 | ABC | 500 MB
30 | XYZ | 600 MB 
```

我想要一个给出以下结果的查询。

```
MRP | ABC | XYZ
10 | 200 MB | 300 MB
20 | 500 MB |-----------
30 | -----------| 600 MB 
```

我可以使用 PHP 实现这一点吗？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:35:23.193

尝试，

```
SELECT  MRP,
        MAX(CASE WHEN BRAND = 'ABC' THEN `USAGE` ELSE NULL END) 'ABC',
        MAX(CASE WHEN BRAND = 'XYZ' THEN `USAGE` ELSE NULL END) 'XYZ'
FROM tableName
GROUP BY MRP 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f4776/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:36:06.490

您需要所谓的数据透视表。

就像是：

```
SELECT MRP,
    MAX(IF(Brand='ABC', USAGE,0)) as 'ABC',
    MAX(IF(Brand='XYZ', USAGE,0)) as 'XYZ'
FROM table
GROUP BY MRP; 
```

有关更多信息，请参阅本文： [http ://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:43:27.267

尝试使用如下语句[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)来实现此目的的函数：[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/case.html)

```
SELECT MRP
     ,GROUP_CONCAT(CASE Brand WHEN 'ABC' THEN `USAGE` ELSE NULL END) AS ABC
     ,GROUP_CONCAT(CASE Brand WHEN 'XYZ' THEN `USAGE` ELSE NULL END) AS XYZ
FROM myTable GROUP BY MRP; 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!2/47eae/5)

# wpf - 列表框用完屏幕

> ID：12635560
> 
> 赞同：0
> 
> 时间：2012-09-28T07:32:35.937
> 
> 标签：wpf, listbox, bounds

我在我的项目中使用 ListBox。

当显示的项目数量超过可用区域时 - 它会超出屏幕。

我的意思是 - 没有滚动控制元素，根本没有滚动。

我做错了什么？

# c# - 如何处理来自特定数据库错误的异常

> ID：12635563
> 
> 赞同：4
> 
> 时间：2012-09-28T07:32:38.120
> 
> 标签：c#, asp.net, sql, entity-framework

我正在尝试创建这样的交易：

```
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required,
      options))
{
    try
    {
        dbContext.MyTable.PartnerId = someGuid;
        dbContext.SaveChanges();
        scope.Complete();
        dbContext.AcceptAllChanges()
    }
    catch (Exception ex)
    {
        log.LogMessageToFile("Exception - ExceptionType: " + 
        ex.GetType().ToString() + "Exception Messsage: " + ex.Message);              
    }
} 
```

我知道如果我尝试在 sql 中手动插入一个项目，并且在特定列中有重复项，我会从 sql 中收到以下错误：

> 无法在具有唯一索引“idx_PartnerId_notnull”的对象“dbo.MyTable”中插入重复的键行。重复键值为 (7b072640-ca81-4513-a425-02bb3394dfad)。

如何以编程方式专门捕获此异常，以便对其采取行动。

这是我对专栏的约束：

```
CREATE UNIQUE NONCLUSTERED INDEX idx_yourcolumn_notnull
ON YourTable(yourcolumn)
WHERE yourcolumn IS NOT NULL; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T07:39:27.320

试试这个：

```
try {
}
catch (SqlException sqlEx) {
}
catch (Exception ex) {
} 
```

发生在服务器端的 SQL 错误和警告会在此异常中捕获。在这里阅读：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception(v=vs.110).aspx)

上面的答案将允许您捕获 SqlException，但如果您只想通知用户特定错误，则需要进一步改进“SqlException”捕获块中的处理。SqlException 类具有“ErrorCode”属性，您可以从中派生服务器产生的实际错误。尝试执行以下操作：

```
try 
{
}
catch (SqlException sqlEx) 
{
   if(sqlEx.ErrorCode == 2601)
   {
      handleDuplicateKeyException();
   }
} 
```

2601 是 SQL Server 为您的特定错误生成的实际错误代码。要获得完整列表，只需运行 SQL：

`SELECT * FROM sys.messages`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:46:43.507

使用 SqlException 的 number 属性。

对于重复错误，编号为 2601。

```
catch (SqlException e) 
{ 
   switch (e.Number) 
   { 
      case 2601: 
         // Do something. 
         break; 
      default: 
         throw; 
   } 
 } 
```

错误代码列表

```
 SELECT * FROM sysmessages 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:35:28.640

您可以按其类型捕获它：

```
 try
        {
            // ...
        }
        catch (SpecialException ex)
        {
        }
        catch (Exception ex)
        {
        } 
```

编辑：根据 Ivan G 的回答，你会得到一个，它有一个可能是特定`SqlException`的错误[ErrorCode属性。](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.externalexception.errorcode.aspx)因此，您必须检查此类错误的错误代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:51:19.400

您可以在抛出异常文本或其他参数时检查它，这样您就可以有条件地表现得像您一样

像 ：

```
catch(SqlException ex)
{
    if(ex.Message.Contains("Cannot insert duplicate key row in object"))
   {

   } 
} 
```

或异常编号，例如

```
catch(SqlException ex)
{
switch (ex.Number)
{
case : someNumber:
{
//..do something
break...;
}
}
} 
```

# mysql - 在 mysql 查询中创建的对象数组内排序

> ID：12635570
> 
> 赞同：0
> 
> 时间：2012-09-28T07:33:00.527
> 
> 标签：mysql, arrays, sorting

我正在尝试创建一个查询，该查询将产生一个图像列表（来自图像表），并且对于每个图像，一个对象数组（这是用户在图像上发布的评论） - 来自评论表。

结果中的每一行都应该是这样的（用 JSON 编码）：

```
{"image_id":"100","name":"dog","comments":[{"userId":"eyal","comment":"nice picture","timestamp":"xxxxxx"},{"userId":"dan","comment":"i like the picture","timestamp":"xxxxxx"}]} 
```

问题是我想按时间戳（评论表中的一个字段）对评论进行排序，但是因为我正在按图像进行分组，所以我无法在分组之前排序。

基本上，我需要一种在将评论表加入图像表之前对其进行排序的方法。

那是我的查询不起作用（除了排序之外一切正常）

```
$sql = "select images.id,images.name, CONCAT('[', GROUP_CONCAT(DISTINCT CONCAT('{\"userId\":\"',comm_sorted.uid,'\",\"comment\":\"',comm_sorted.comment,'\",\"timeStamp\":\"',comm_sorted.timestamp,'\"}') separator ','),']')  as comments FROM images  LEFT JOIN (select * from comments order by timestamp DESC) as comm_sorted on images.id=comm_sorted.id group by images.id order by images.Timestamp DESC, comm_sorted.timestamp DESC LIMIT $offset, $limit"; 
```

帮助将不胜感激

埃亚尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:47:05.730

您可以在函数中添加一个`ORDER BY comm_sorted.timestamp`选项。`GROUP_CONCAT()`

# arrays - 如何从 perl 中的数组中过滤出空哈希？

> ID：12635574
> 
> 赞同：2
> 
> 时间：2012-09-28T07:33:28.980
> 
> 标签：arrays, perl, hash, grep

我有一个像这样的哈希数组：

```
my @array = [
             {1 => "Test1"},
             {},
             {1 => "Test2"},
            ]; 
```

我尝试从该数组中过滤掉 {}，以便最终结果是一个没有任何 {} 的数组，如下所示：

```
my @array = [
             {1 => "Test1"},
             {1 => "Test2"},
            ]; 
```

我尝试使用这样的东西，但它不起作用：

```
my @new_array = grep(!/{}/, @array); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T07:40:15.823

该`grep`命令可以将正则表达式作为参数，也可以是任意代码块。请不要尝试将 Perl 代码与正则表达式匹配，这是行不通的。

相反，我们要求匿名哈希中的键数：

```
my @new_array = grep { keys %$_ } @array; 
```

`@array`这将选择键数不为零的所有散列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T07:41:38.797

1）小修正：

```
my @array = [
    {1 => "Test1"},
    {},
    {1 => "Test2"},
]; 
```

实际上是一个 1 元素数组，里面有数组 ref。你可能需要

```
my @array = (
    {1 => "Test1"},
    {},
    {1 => "Test2"},
); 
```

2) grep 表达式：

```
my @new_array = grep { scalar %$_ } @array; 
```

如果 Hash 为空，则在标量上下文中返回 0，否则返回类似于 "17/32" 的值。所以`grep`只会选择非空数组。

**更新：**正如@raina77ow 所建议的，标量可以省略！所以它甚至更短（尽管我仍然更喜欢`scalar`在*我的*代码中明确表达）。

```
my @new_array = grep { %$_ } @array; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:36:47.113

你需要这样的东西：

```
my @new_array = grep(keys %$_, @array); 
```

您的`/.../`代码中的 是正则表达式。它检查数组中的每个元素是否包含某些字符。但是，您的数组包含对哈希的引用，因此您需要取消对每个元素的引用，然后查看它是否为空。

此外，此声明不正确：

```
my @array = [
             {1 => "Test1"},
             {},
             {1 => "Test2"},
            ]; 
```

括号创建一个数组引用，而您只需要一个数组。只需使用括号代替：

```
my @array = (
             {1 => "Test1"},
             {},
             {1 => "Test2"},
            ); 
```

# android - 清单中的 Android 权限

> ID：12635575
> 
> 赞同：4
> 
> 时间：2012-09-28T07:33:30.600
> 
> 标签：android, android-manifest, android-service

我写了 2 个应用程序。

第一个应用程序只有服务，第二个应用程序有一个活动。我正在从第二个应用程序中的活动开始在第一个应用程序中的服务。在服务中，我正在修改音频设置，所以我需要`android.permission.MODIFY_AUDIO_SETTINGS`在清单中。

我的问题是**我必须在哪个清单文件中添加此权限**。为什么我要问，因为如果我在服务应用程序清单中添加此权限，我会收到警告**导出服务不需要权限**。

如果有人知道，请发布解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:15:07.483

您需要将此权限添加到**应用程序**，而不是服务。服务的权限是让您限制谁可以访问它们，这是不同的。您需要添加

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

到您的清单，`<application>`在音频设置更改的应用程序块上方。

# javascript - 检测 HTML 何时在页面上完成加载和呈现

> ID：12635577
> 
> 赞同：13
> 
> 时间：2012-09-28T07:33:35.503
> 
> 标签：javascript, jquery

是否可以检测 HTML 何时在页面上完成加载和呈现？如果是这样，怎么做？

该页面由 HTML、ajax 调用、从 ajax 调用接收数据、大量 javascript 内容和一些图像组成。我想检测一切何时完成。我不能做的是在最后加上一个函数调用，因为我不知道什么时候结束。

例如，页面有很多用户可以选择的ajax 样式元素，即用户1 的元素数量可能与用户2 不同，甚至顺序也不同。

所以我不能用last函数来模拟HTML渲染的结束，因为我不知道哪个函数会是最后一个函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T07:52:10.510

回答您的问题的问题在于最后几句话，您说由于用户选择，您不知道终点在哪里。您可以将 JavaScript 绑定到两个自动事件。jQuery 调用`$(document).ready()`的内容意味着 DOM 已准备好进行操作（在加载图像之前以及加载外部脚本和 CSS 之后）以及更常见的称为 body `onload`（在 jQuery 中可以写为`$(window).load()`) 在获取所有静态资产后运行。至少在 DOM 准备好之后，您的 Ajax 调用将全部触发，并且没有定义所有事件之后发生的事件。为此，您需要自己跟踪它们。您可以使用“最后一匹马走出谷仓”的方法。在 Ajax 调用的末尾添加一点逻辑，看看它是否是最后一个并引发一个名为“reallyAllDone”的自定义事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:36:13.793

是[的](http://www.w3schools.com/jsref/event_onload.asp)

```
<body onload="load()"> 
```

这将检测何时加载正文的内容。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-28T07:36:25.930

**$(文档).ready**

将帮助您了解 dom 何时完成其事件并准备就绪

# android - android 3.0 中的日历视图

> ID：12635578
> 
> 赞同：0
> 
> 时间：2012-09-28T07:33:37.503
> 
> 标签：android, calendar

我正在尝试将默认日历的视图引入我的应用程序，我发现它可以使用它

```
 CalendarView calander = new CalendarView(this);
        setContentView(calander); 
```

这以月份模式显示日历。是否可以`CalendarView`在每小时模式下显示日历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:58:17.193

我认为您需要为此编写自定义实现？

# javascript - jQuery console.log() 与 alert()

> ID：12635582
> 
> 赞同：3
> 
> 时间：2012-09-28T07:33:50.583
> 
> 标签：javascript, jquery, javascript-events

jQuery代码：

```
$(document).bind('click', function(e) {
    console.log(e.target);
    alert(e.target);
}); 
```

`e.target`包含正在单击的对象的名称。出于演示目的，如果我单击输入元素，上面的代码将打印以下内容：
对于`console.log()`：

```
<input class="buton" type="submit" value="Send" name="Send"> 
```

对于`alert()`：

```
[object HTMLInputElement] 
```

但是，如果我替换`console.log(e.target)`为`console.log(e.target.toString())`，它会打印与 相同的内容`alert()`，意思是：

```
[object HTMLInputElement] 
```

我的范围是将返回的 HTML 代码存储`console.log()`到一个变量中，但我无法理解这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:39:25.450

在事件处理程序中，`e.target`是单击源自的元素。大多数浏览器控制台将其显示为代表元素的 html 字符串。

当您使用`alert`时，提供的参数将转换为字符串，因此您会看到`[object HTMLInputElement]`.

要获取元素的 HTML，请使用：

```
alert(e.target.outerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:38:36.167

`console.log`当您想查看对象的属性时很有用，但`alert()`只显示对象的类型，如果您想查看元素的真实 html，可以使用`outerHTML`DOM Element 对象的属性：

```
alert(e.target.outerHTML); 
```

[http://jsfiddle.net/phLVu/](http://jsfiddle.net/phLVu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:39:09.427

请参阅[另一个 SO 问题](https://stackoverflow.com/questions/3535284/full-html-of-object-returned-by-jquery-selector)：

您必须使用该`outerHTML`属性。

```
$(document).bind('click', function(e) {
    alert(e.target.outerHTML);
}); 
```

在这里查看 jsFiddle：http: [//jsfiddle.net/xhHPb/](http://jsfiddle.net/xhHPb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:35:39.710

控制台工具以设计者认为有用的方式显示对象，它不只是调用`toString()`对象的方法，与`alert`.

如果您想获取目标的 HTML 代码，只需执行

```
var html = e.target.outerHTML; 
```

# java - Java 迷宫求解器

> ID：12635589
> 
> 赞同：0
> 
> 时间：2012-09-28T07:34:42.317
> 
> 标签：java, algorithm, recursion, enums, maze

我在尝试将提示给我们的算法转换为可用代码时遇到了困难。我们得到一个 Direction 枚举，它有 8 个坐标（N、NE、NW、S、SE.SW.E、W）以及出口 HERE。

这是暗示的算法：

```
getPathToExit(row, col):
  if (row, col) is outside of the map:
    return an empty list
  else if (row, col) is an obstacle:
    return an empty list
  else if (row, col) is marked as visited or as deadend:
   return an emtpy list
  else if (row, col) is the exit:
    //optional: mark exit as visited
   return a list containing Direction.HERE
  else:
   //try to find a path from current square to exit:
    mark current square as visited (that is, part of path)
      for each neighbor of current square:
        path = path from neighbor to exit
          if path is not empty:
             add (direction to neighbor) to start of path
               return path
   //after for loop: no path exists from this square to exit
   mark current square as deadend
     return empty list 
```

这是我已经研究了一段时间的代码：

```
public java.util.ArrayList<Direction> getPathToExit(){

for (int x=0; x<map.length; x++){
    for (int y=0; y<map[x].length; y++){
        if (map[x][y]=='S'){
            this.startRow=x;
            this.startCol=y;
        }
    }
}
System.out.println("start "+startRow+", "+startCol);
return getPathToExit(this.startRow, this.startCol);
}

private java.util.ArrayList<Direction> getPathToExit(int row, int col){

  Direction [] dirs = Direction.values();
  ArrayList<Direction> path = new ArrayList<Direction>();

getPathToExit(row, col);

    if (row < 0 || col < 0 || row > map.length || col > map[row].length){
        return null;
    }
    else if (map[row][col] != ' '){
        return null;
    }
    else if (map[row][col] == 'E'){
        path.add(Direction.HERE);
        return path;
    }
    else {
        for (int x=0; x<dirs.length-1; x++){
            int nextRow = row + dirs[x].getRowModifier();
            int nextCol = col + dirs[x].getColModifier();
            path = getPathToExit(nextRow, nextCol);
        }
    }
return path;
} 
```

这是枚举类：

```
public enum Direction {
   N, NE, E, SE, S, SW, W, NW, HERE;

 /**
 * Returns the X/column change on the screen that is associated with
 * this direction: -1 for W, 0 for N/S, and +1 for E.
 */
  public int getColModifier() {
    int mod;
    switch (this) {
     case NW:
     case W:
     case SW:
     mod = -1;
    break;
  case NE:
  case E:
  case SE:
    mod = +1;
    break;
  default:
    mod = 0;
    break;
  }
return mod;
}

/**
 * Returns the Y/row change on the screen that is associated with
 * this direction: -1 for N, 0 for E/W, and +1 for south.
 */
public int getRowModifier() {
 int mod;
 switch (this) {
   case N:
   case NE:
   case NW:
    mod = -1;
    break;
  case S:
  case SE:
  case SW:
    mod = +1;
    break;
  default:
    mod = 0;
    break;
  }
return mod;
}

/** As {@link #getColModifier()} */
public int getXModifier() {
 return this.getColModifier();
}

 /** As {@link #getRowModifier()} */
public int getYModifier() {
  return this.getRowModifier();
}

/**
 * Returns the direction that is the opposite of this one.
 * For example, <code>Direction.NE.reverse() == Direction.SW</code>.
 * (The opposite of HERE is still HERE though.)
 */
public Direction reverse() {
  if (this == HERE) {
    return this;
  }else {
    int reversed = (this.ordinal() + 4) % 8;
   Direction[] dirs = Direction.values();
    return dirs[reversed];
  }
}

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:31:19.130

代码中有两个问题：

(1) 在主 for 循环中：

```
for (int x=0; x<dirs.length-1; x++){
      int nextRow = row + dirs[x].getRowModifier();
      int nextCol = col + dirs[x].getColModifier();
      path = getPathToExit(nextRow, nextCol);
} 
```

您需要检查递归调用是否`getPathToExit()`返回了一个非空列表。如果有，你应该`break`循环并将相关方向推到它的开始。您已经找到了一条路径——不要继续检查其余部分！

* * *

(2) 为了使您的算法完整（如果存在则找到解决方案），您需要维护一个`visited`集合，并避免重新访问已经访问过的节点。
看看下面的例子：

```
-------
|S |x1|
-------
|x2|E |
------- 
```

其中所有都是有效的正方形（没有障碍物），S 是开始，E 是结束。

现在，假设方向的顺序是`right,left, ...`。

代码（未`visited`设置）将执行以下操作：

```
go right (to x1).
go right - out of maze, go back.
go left (to S).
go right (to x1).
go right - out of maze, go back.
go left (to S)
.... 
```

你在一个无限循环中！（DFS
的一个已知缺点） StackOverflowError 通常表明这是问题所在，所有递归调用的调用堆栈已满 - 并引发错误。

要修复它，您需要维护一个`visited`集合，并避免重新访问已经访问过的节点。有了这个集合，上面的迷宫（方向顺序是`right, left, down, ...`）会发生什么：

```
go right (to x1)
go right - out of maze, go back.
go left (to S) - already visitted, go back.
go down (to E) - found target, return it. 
```

一个更高级的替代方法是使用[迭代深化 DFS](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search) - 这基本上意味着，您正在限制路径的长度`l`，并迭代地增加它`l`。这次我会忽略这个替代方案，它更高级一些。

* * *

作为旁注，您的算法是[DFS](http://en.wikipedia.org/wiki/Depth-first_search)的实现，它具有访问集和有限图（如果存在，则始终找到解决方案），但不是最优的（不保证找到最短路径）。要找到最短路径，您可能需要改用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)。

**另外**：我假设方法第三行中的递归调用是用于调试的剩余部分。它不应该在那里。

# c# - TagBuilder.MergeAttributes 无法按预期工作

> ID：12635590
> 
> 赞同：11
> 
> 时间：2012-09-28T07:34:52.283
> 
> 标签：c#, asp.net-mvc, html-helper, mvchtmlstring

我正在尝试制作一个 HtmlHelper，我需要允许用户将自己的自定义属性添加到 html 标记中。

我尝试使用 TagBuilder 类来执行此操作，但似乎不是合并属性，而是替换它们。

这就是我在 C# 中所做的：

```
public static MvcHtmlString List(HtmlHelper helper, object htmlAttributes)
{
    var attributes = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes);

    var tag = new TagBuilder("div");
    tag.AddCssClass("myClass");
    tag.MergeAttributes(attributes, false);

    // tag class property has value "myClass", not "myClass testClass"

    return new MvcHtmlString("<div>");
} 
```

这是我的看法：

```
@Html.List(new { @class = "testClass" }) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-08T11:42:59.623

MergeAttributes 覆盖标签上已有的属性，AddCssClass 将名称附加到类值中。

所以只需切换它，它就会工作；

```
 tag.MergeAttributes(attributes, false);
    tag.AddCssClass("myClass"); 
```

AddCssClass 将附加到合并在它上面的类名。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-28T08:52:27.187

该`TagBuilder.MergeAttributes`方法无法按照您的预期工作。这是此方法的确切代码：

```
 public void MergeAttributes<TKey, TValue>(IDictionary<TKey, TValue> attributes, bool replaceExisting)
    {
        if (attributes != null)
        {
            foreach (var entry in attributes)
            {
                string key = Convert.ToString(entry.Key, CultureInfo.InvariantCulture);
                string value = Convert.ToString(entry.Value, CultureInfo.InvariantCulture);
                MergeAttribute(key, value, replaceExisting);
            }
        }
    }

    public void MergeAttribute(string key, string value, bool replaceExisting)
    {
        if (String.IsNullOrEmpty(key))
        {
            throw new ArgumentException(CommonResources.Argument_Cannot_Be_Null_Or_Empty, "key");
        }

        if (replaceExisting || !Attributes.ContainsKey(key))
        {
            Attributes[key] = value;
        }
    } 
```

如您所见，它仅向集合添加新属性（如果`replaceExisting`设置为 true，它也会替换集合中已有的属性）。它不执行和属性值合并逻辑。如果你想合并值，你需要自己做：

```
public static MvcHtmlString List(this HtmlHelperhelper, object htmlAttributes)
{
    var attributes = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes);        
    if (attributes.ContainsKey("class"))
        attributes["class"] = "myclass " + attributes["class"];
    else
        attributes.Add("class", "myClass");

    var tag = new TagBuilder("div");
    tag.MergeAttributes(attributes, false);

    return new MvcHtmlString(tag.ToString(TagRenderMode.Normal));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-05T21:00:18.810

我需要合并其他属性（除了类），所以 AddCssClass() 是不够的。我写了一个扩展方法来做我认为 MergeAttributes 应该做的事情：

```
public static class TagBuilderExtensions
{
    public static void TrueMergeAttributes(this TagBuilder tagBuilder, IDictionary<string, object> attributes)
    {
        foreach (var attribute in attributes)
        {
            string currentValue;
            string newValue = attribute.Value.ToString();

            if (tagBuilder.Attributes.TryGetValue(attribute.Key, out currentValue))
            {
                newValue = currentValue + " " + newValue;
            }

            tagBuilder.Attributes[attribute.Key] = newValue;
        }
    }
} 
```

# android - 为什么网格仅在 Android 4.0 中不显示 TextView 的文本？

> ID：12635592
> 
> 赞同：0
> 
> 时间：2012-09-28T07:35:06.007
> 
> 标签：android, textview, android-4.0-ice-cream-sandwich

```
 // programmatically creating grid on run time
        int z=0;
        if(Integer.valueOf(sing.questionsObjectArr[index].noOfcolumns) > Integer.valueOf(
                sing.questionsObjectArr[index].noOfrows)){
            while(z < Integer.valueOf(sing.questionsObjectArr[index].noOfcolumns)){
                gridEdittext.add(new ArrayList<TextView>());
                z++;
            }
        }
        else{
            while(z < Integer.valueOf(sing.questionsObjectArr[index].noOfrows)){
                gridEdittext.add(new ArrayList<TextView>());
                z++;
            }
        }

        for(int x = 0; x < Integer.valueOf(sing.questionsObjectArr[index].noOfrows); x++){

                this.ll = new LinearLayout(this);
                this.ll.setLayoutParams(new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.WRAP_CONTENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT));
                this.ll.setOrientation(0);

            for(int y = 0; y < Integer.valueOf(sing.questionsObjectArr[index].noOfcolumns); y++){

                if(y==0){
                    this.gridEdittext.get(y).add(new TextView(this));
                    this.gridEdittext.get(y).get(x).setId(y);
                    this.gridEdittext.get(y).get(x).setTextColor(Color.BLACK);
                    if(x!=0){
                        this.gridEdittext.get(y).get(x).setText(
                                sing.questionsObjectArr[index].columnData.get(x-1).toString());
                    }
                    else{
                        this.gridEdittext.get(y).get(x).setText(
                                sing.questionsObjectArr[index].rowData.get(x).toString());
                    }
                    LinearLayout.LayoutParams colparams = new LinearLayout.LayoutParams(60, 60);
                    colparams.setMargins(20, 0, 20, 0);
                    this.gridEdittext.get(y).get(x).setLayoutParams(colparams);
                    this.ll.addView(this.gridEdittext.get(y).get(x));
                    y++;
                }
                if(x==0){
                    this.gridEdittext.get(y).add(new TextView(this));
                    this.gridEdittext.get(y).get(x).setTextColor(Color.BLACK);
                    this.gridEdittext.get(y).get(x).setId(y);
                    this.gridEdittext.get(y).get(x).setText(
                            sing.questionsObjectArr[index].rowData.get(y).toString());
                    LinearLayout.LayoutParams colparam = new LinearLayout.LayoutParams(60, 60);
                    colparam.setMargins(0, 0, 20, 0);
                    this.gridEdittext.get(y).get(x).setLayoutParams(colparam);
                    this.ll.addView(this.gridEdittext.get(y).get(x));
                }
                else{
                    this.gridEdittext.get(y).add(new EditText(this));
                    this.gridEdittext.get(y).get(x).setId(y);
                    this.gridEdittext.get(y).get(x).setText("");
                    this.gridEdittext.get(y).get(x).setLayoutParams(new LinearLayout.LayoutParams(80, 80));
                    this.ll.addView(this.gridEdittext.get(y).get(x));
                }
            }
            tlayout.addView(this.ll);
            tlayout.setBackgroundResource(R.drawable.roundshape);
        } 
```

我正在创建动态网格，`EditText`其中包含可以接受数据的表格，表格被 TextView 包围。问题是 TextView 的文本在 Android 2.3 中完美显示，但在 Android 4.0 中却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:46:56.347

我正在使用 SAX 解析，它运行良好，但在 Android 4.0 中，文本未显示在来自 Internet 服务器的标签上。然后我将解析技术更改为 DOM 解析问题得到解决。

# javascript - 使用 JavaScript 显示标记名内的所有节点

> ID：12635596
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:35:10.667
> 
> 标签：javascript, html, xml

我正在尝试使用 loadXMLDoc() JavaScript 函数从 XML 文档加载数据，并在单击按钮时将其显示在页面的 DIV 上。到目前为止，我无法在我的 DIV 中获取任何内容，我想加载特定标记名中的所有元素。

这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Fruits>
  <Cell>Apples</Cell>
  <Cell>Bananas</Cell>
  <Cell>Strawberries</Cell>
</Fruits>
<Vegetables>
  <Cell>Lettuce</Cell>
   <Cell>Tomatoes</Cell>
  <Cell>Carrots</Cell> 
</Vegetables> 
```

这是JavaScript：

```
function fruits()  
{
    var  
    xmlhttp;  
    if (window.XMLHttpRequest)

    {// code for IE7+, Firefox, Chrome, Opera, Safari  
        xmlhttp=new XMLHttpRequest();  
    }  
    else  
    {// code for IE6, IE5  
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  
    }  
    xmlhttp.onreadystatechange=function()  
    {  
        if (xmlhttp.readyState==4 && xmlhttp.status==200)  
        {  
            xmlDoc = xmlhttp.responseXML;
            document.getElementById("food").innerHTML=xmlDoc.getElementsByTagName("fruits"); 
        }  
        xmlhttp.open("GET","document.xml", true);  
        xmlhttp.send();  
    }

    function vegetables()  
    {
        var  
        xmlhttp;  
        if (window.XMLHttpRequest)

        {// code for IE7+, Firefox, Chrome, Opera, Safari  
            xmlhttp=new XMLHttpRequest();  
        }  
        else  
        {// code for IE6, IE5  
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  
        }  
        xmlhttp.onreadystatechange=function()  
        {  
        if (xmlhttp.readyState==4 && xmlhttp.status==200)  
        {  
            xmlDoc = xmlhttp.responseXML;
            document.getElementById("food").innerHTML=xmlDoc.getElementsByTagName("vegetables"); 
        }  
        xmlhttp.open("GET","document.xml", true);  
        xmlhttp.send();  
    } 
```

这是HTML：

```
<button type="button" onclick="fruits()">Fruits</button>
<button type="button" onclick="vegetables()">Vegetables</button>
<div id="food">Please select your favorite</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:40:35.873

您的功能`fruits()`未正确关闭，您的功能`vegetables()`已在功能内结束`fruits()`，

定义函数也是如此`xmlhttp.onreadystatechange=function()`

`fruits()`所以这些函数在被调用之前甚至都不可用。

您的代码应如下所示：

```
function fruits()  
    {
        var  
        xmlhttp;  
        if (window.XMLHttpRequest)

        {// code for IE7+, Firefox, Chrome, Opera, Safari  
            xmlhttp=new XMLHttpRequest();  
        }  
        else  
        {// code for IE6, IE5  
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  
        }  
        xmlhttp.onreadystatechange=function()  
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)  
            {  
                xmlDoc = xmlhttp.responseXML;
                document.getElementById("food").innerHTML=xmlDoc.getElementsByTagName("fruits"); 
            }
        }

        //something went wrong here : this code ended up in the function that was to be called when xmlhttp was done with its GET operation.
        //consequently it was never called
        xmlhttp.open("GET","document.xml", true);  
        xmlhttp.send();  
    } // <-- this here bracket was missing

    function vegetables()  
    {
        var  
        xmlhttp;  
        if (window.XMLHttpRequest)
        {
            // code for IE7+, Firefox, Chrome, Opera, Safari  
            xmlhttp=new XMLHttpRequest();  
        }  
        else  
        {
            // code for IE6, IE5  
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  
        }
        xmlhttp.onreadystatechange=function()  
        {  
            if (xmlhttp.readyState==4 && xmlhttp.status==200)  
            {  
                xmlDoc = xmlhttp.responseXML;
                document.getElementById("food").innerHTML=xmlDoc.getElementsByTagName("vegetables"); 
            }  
        }

        //the same thing happened here

        xmlhttp.open("GET","document.xml", true);  
        xmlhttp.send();  
    } 
```

# html - 在有序列表中缩进文本

> ID：12635598
> 
> 赞同：0
> 
> 时间：2012-09-28T07:35:19.007
> 
> 标签：html, css

我想显示我的文本内容，如下图所示。怎么做？我试过[这个](https://stackoverflow.com/questions/9980379/custom-list-styles-for-ordered-lists)，但它没有从第二行缩进。我还尝试将该内容放在 <table> 中，其中包含 2 行和 2 列，但问题是我无法按我的意愿为 <table> 设置边距。<table> 有很多margin 和padding 问题。

![在此处输入图像描述](../Images/c2092b09dd4f5e6a5612f89ac96e4d09.png)

更新：

代码缩进正确，但问题是我不能像我想要的那样对表格进行边距。

```
<table>
    <tr>
        <td>(1) </td> 
        <td>zzzzzzzzzzzzzzzzzzz</td>
    </tr>

    <tr>
        <td>(2) </td> 
        <td>zzzzzzzzzzzzzzzzzzz</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:05:10.400

我想你正在寻找这个[小提琴](http://jsfiddle.net/8Bdpz/7/)。

这是使用普通列表和[CSS 计数器](http://www.w3schools.com/cssref/pr_gen_counter-increment.asp)来创建列表编号。它将重新设置`ol`从头开始。

资料来源：[StackOverflow：如何自定义有序列表中的数字？](https://stackoverflow.com/questions/10877/how-can-you-customize-the-numbers-in-an-ordered-list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:42:02.610

你的意思是[这样](http://jsfiddle.net/venkateshwar/8Bdpz/)的吗？

```
<ol>
<li>content heerrrrrrrrrrrrere content heerrrrrrrrrrrrere content heerrrrrrrrrrrrere</li>
<li>content heerrrrrrrrrrrrere content heerrrrrrrrrrrrere content heerrrrrrrrrrrrere</li>
</ol>​ 
```

* * *

```
ol{padding-left:80px;list-style-type:decimal;}

li{
    width:100px;
    word-wrap:break-word;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:42:32.437

**[**](http://tinkerbin.com/nY5vYBcG)***[*[演示][1]*](http://tinkerbin.com/nY5vYBcG)*****

 **HI 现在习惯于在 css3 中重置此计数器

像这样

**CSS**

```
body {counter-reset:section;}
h1 {counter-reset:subsection;}
h1:before
{
counter-increment:section;
content:"Section " counter(section) ". ";
}
h2:before 
{
counter-increment:subsection;
content:counter(section) "." counter(subsection) " ";
} 
```

**HTML**

```
<h1>HTML tutorials</h1>
<h2>HTML Tutorial</h2>
<h2>XHTML Tutorial</h2>
<h2>CSS Tutorial</h2>

<h1>Scripting tutorials</h1>
<h2>JavaScript</h2>
<h2>VBScript</h2>

<h1>XML tutorials</h1>
<h2>XML</h2>
<h2>XSL</h2> 
```

[***[演示][2]***](http://tinkerbin.com/nY5vYBcG)

* * *

更新***[的演示](http://tinkerbin.com/mtOgW1fG)***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:01:59.247

**[演示](http://jsfiddle.net/gionaf/4ffT9/)**

CSS

```
ul {
    counter-reset:myCounter;
    list-style:none;
    padding:0;
    margin:0;
}    
ul li {
    padding-left:30px; /* adjust it to your custom font needings */
    position:relative;
    counter-increment:myCounter;
}
ul li:before {
    content:"("counter(myCounter)") ";
    position:absolute;
    left:5px;
}​ 
```

HTML

```
<ul>
<li>Content here<br>and here<br>and here</li>
<li>Some more content here<br>and here<br>and here</li>
</ul>​ 
```**

# java - 如何在 java 中使用 DOM Parser 更新标签？

> ID：12635599
> 
> 赞同：0
> 
> 时间：2012-09-28T07:35:20.967
> 
> 标签：java, xml, parsing, dom

```
<root>
<title>Title<id>244</id></title>
<value>sample</value>
</root> 
```

在上面的 xml 中，我必须用另一个值“Hello”更新标题标签的内容。这样我的 XML 就变成了

```
<root>
<title>Hello<id>244</id></title>
<value>sample</value>
</root> 
```

但我不会通过在 Java 中使用 DOM Parser 来达到同样的目的。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-28T07:51:08.943

因此，当您获得字符串标签时，只需交换主字符串，您就可以像这样解析： String stringToParseXML = oldString.replace("Title244","Hello244");

# dynamics-crm - 包含来自多对多关系的数据的 FetchXML

> ID：12635600
> 
> 赞同：1
> 
> 时间：2012-09-28T07:35:22.410
> 
> 标签：dynamics-crm

我的解决方案存在一个严重的缺陷，即它对 CRM 进行了很多较小的调用。相反，我想制作一个（或至少只有几个）并允许冗余。

我想获取包含任何营销列表中的所有联系人以及这些列表名称的信息。也可以将其视为列出所有营销列表及其成员。如果一个联系人出现在多个营销列表中，我希望它被多次列出，列表中的每个成员一次。

为了避免冗余，我[在这里](https://stackoverflow.com/questions/12620358/fetching-irregular-data-from-crm-dynamics)问了另一个问题，但我的理解是这是不可能的。完美的**输出**数据将等同于此。

```
<allLists>
  <list name="hazaa">
    <contact name="Donald Duck" />
    <contact name="Speedy Gonzalez" />
  </list>
  <list name="shazoo">
    <contact name="Donald Duck" />
    <contact name="Kermit Frog" />
  </list>
<allLists> 
```

显然，通过 fetchXML 获得它并不像人们希望的那么容易，所以我不再接受以下冗余数据集。

```
<contact name="Donald Duck" list="hazaa" />
<contact name="Speedy Gonzalez" list="hazaa" />
<contact name="Donald Duck" list="shazoo" />
<contact name="Kermit Frog" list="shazoo" /> 
```

不过，我不知道如何到达那里。我曾尝试使用 FetchXML 向导，但一个邪恶的 404 错误阻止了这个想法（谁知道呢，也许它无论如何也无济于事，哈哈）。建议？

恐怕我得到的只是一个到[这里](https://stackoverflow.com/questions/2874860/can-you-write-a-single-fetchxml-query-to-get-1many-relationship)的链接，告诉我忘记它。真的是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:13:11.843

所以首先，最后一个链接[你能写一个 FetchXML 查询来获得 1:many 关系吗？](https://stackoverflow.com/questions/2874860/can-you-write-a-single-fetchxml-query-to-get-1many-relationship)似乎没有正确回答我。我添加了我认为是正确答案的内容。

就使用 stunnware 的 FetchXml 向导而言，作者似乎处于移动站点之间。但是，您仍然可以从以下链接获取工具：http: [//www.stunnware.com/products/tools4/download.htm](http://www.stunnware.com/products/tools4/download.htm)（谷歌救援）。

我建议使用它，我相信它会帮助您在创建 FetchXml 方面取得很大进展。

就结果集中的“数据冗余”而言，我认为您无法避免（或实际上需要）。

实际上，您正在运行 sql 查询，带有连接的 sql 查询也将返回“冗余数据”或重复数据。我认为您只需要接受数据的返回方式并将其解析为您需要的格式即可。

话虽如此，这让我想到了第二点，那就是；你考虑过动态列表吗？

crm 中的营销列表可以是静态的或动态的。静态是一个记录与另一个记录相关联的简单案例 - 易于查询。动态基于查询（在 UI 中定义，实际上是 FetchXml）。我的意思是我不确定您的 FetchXml 查询是否会检索这些动态成员 - （我怀疑它不会，但我不确定，我自己从未尝试过）。

所以，我不认为 FetchXml 是这个问题的正确解决方案，幸运的是还有其他选项 - 在任何情况下实际上看起来更容易实现。我建议您查看下面的链接，以确保您正在实施正确的解决方案。

1.  [在 CRM 2011 中检索营销列表成员](http://www.magnetism.co.nz/blog/11-07-01/Retrieving_Marketing_List_Members_in_CRM_2011.aspx)- 静态和动态之间的区别
2.  [动态营销列表的列表成员在哪里？](http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2011/11/28/where-are-the-list-members-of-a-dynamic-marketing-list.aspx)- 获取动态成员
3.  [检索营销列表成员](http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2009/05/04/retrieve-marketing-list-members.aspx)- 获取静态成员

# php - 从 php 连接到 mysql

> ID：12635602
> 
> 赞同：0
> 
> 时间：2012-09-28T07:35:22.697
> 
> 标签：php, mysql, connection

我试图连接到我的数据库并关注一本书。我写了第一组代码，它没有工作。所以经过一番谷歌搜索后，我找到了第二个代码块。它工作正常，但我很想知道区别，因为我看不到它。

```
 <?php
try
{ 
    $huh = new PDO('mysql:host=localhost;dbname=ijdb', 'ijdbuser', 'test');
    $huh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $huh->exec("SET CHARATER SET utf8");
} catch (PDOException $e) {
    $ouput = 'Unable to connect to the database server. ' . $e->getMessage();
    include 'output.php';
}
    $output = 'Database connection established. ' . $e->getMessage();
    include 'ouput.php';
?>

<?php
try {
    $dbh = new PDO('mysql:host=localhost;dbname=ijdb', 'ijdbuser', 'test');
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $dbh->exec("SET CHARACTER SET utf8");
} catch (PDOException $e) {
    $output = "Error! " . $e->getMessage();
    include 'output.php';
}
    $output = 'Success!';
    include 'output.php'
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:25:16.347

第一个代码块中有三个错误：

1.  $huh->exec("SET CHARATER SET utf8"); 应该是 $huh->exec("SET CHARACTER SET utf8"); （缺少 C）

2.  $output = '建立数据库连接。' . $e->getMessage(); 应该是 $output = '建立数据库连接。'; 因为您只能在 Catch "trap" 内捕获异常

3.  包括“输出.php”；应该包括'output.php'；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:37:49.797

`include 'ouput.php';`在第一个中，而不是`include 'output.php';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:38:01.783

您的 sql 语法有错误

```
$huh->exec("SET CHARATER SET utf8"); // Note: Charater written instead of Character 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:38:10.740

第一个代码块有语句

```
$output = 'Database connection established. ' . $e->getMessage(); 
```

**在 catch 语句之外**。变量 $e 仅在 catch 语句中定义。

# java - 防止数字在excel中以指数格式出现

> ID：12635604
> 
> 赞同：1
> 
> 时间：2012-09-28T07:35:36.820
> 
> 标签：java, excel, csv

我在我的 java 类中使用以下地图

```
Map<String,String> fieldNameMap=new LinkedHashMap<String,String>();
     fieldNameMap.put("provLocation", "Location");
     fieldNameMap.put("deviceOwnerTn","Owner Telephone Number"); 
```

我将其作为 csv 下载提供。但是，在第二项的情况下，当数字超过 5 或 6 位时，它会以指数格式显示在 Excel 中（例如 1.235E+09）。我想避免这种情况。一种可能的解决方案是将其括在单引号中。（例如'1234567890'）。但是我该怎么做呢？请帮忙！

注意：对于 fieldNameMap，第一个参数是要填充的值，第二个参数是列标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:58:38.697

据我了解，CSV 中的输出是您想要的方式（没有指数），但 Excel 以您不想要的格式显示它。

问题是 Excel 试图变得聪明并猜测字段的类型，并且所有数字字段都是“数字”，默认情况下它以指数（科学）格式显示。

请参阅[Excel CSV - Number Cell Format](https://stackoverflow.com/questions/137359/excel-csv-number-cell-format)，有一些非常好的答案。

# c# - ToolStripMenuItem 的 ContextMenuStrip 快捷键是如何工作的

> ID：12635607
> 
> 赞同：1
> 
> 时间：2012-09-28T07:35:39.813
> 
> 标签：c#, winforms, contextmenustrip, keyboard-shortcuts

我有一个带有 ContextMenuStrip（通过右键单击打开）ToolStripMenuItems 的 TreeView，其快捷键如“Ctrl+C、Ctrl+V 等”。

问题是 ToolStripMenuItem.Click 的 Action 仅在打开 ContextMenuStrip 时才会通过快捷方式触发。

我认为当 ContextMenuStip 被隐藏时，快捷方式也必须起作用。

我做错了什么或者快捷方式不是全局的，我需要分配 TreeView 的 KeyPress 事件并在此处复制快捷方式的逻辑？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-31T16:43:35.783

我有同样的问题，不想重新编程`ContextMenuStrip`已经提供给我的访问功能。

最大的问题是，当我扩展或更改`ContextMenuStrip`项目时，我必须更改或更改我自己的键事件。我的目标是绕过这个并将全局快捷键重定向`ContextMenuStrip`到执行代码点击。

首先，我构建了一种方法，可以递归地获取所有`ToolStripMenuItems`列表`ContextMenuStrip`：

```
 private List<ToolStripMenuItem> getContextMenuItems(ToolStripItemCollection items)
    {
        List<ToolStripMenuItem> result = new List<ToolStripMenuItem>();
        foreach (ToolStripMenuItem item in items)
        {
            result.Add(item);
            if (item.HasDropDownItems)
            {
                result.AddRange(this.getContextMenuItems(item.DropDownItems));
            }
        }
        return result;
    } 
```

然后我设置 KeyUp 事件以在包装控件上捕获我的键。`this.cmsCellRightClick`是我的`ContextMenuStrip`：

```
 private void xxxxx_KeyUp(object sender, KeyEventArgs e)
    {
        Keys pressed = e.KeyCode;
        if (e.Control) pressed = pressed | Keys.Control;
        if (e.Shift) pressed = pressed | Keys.Shift;
        if (e.Alt) pressed = pressed | Keys.Alt;

        ToolStripMenuItem actionItem = this.getContextMenuItems(this.cmsCellRightClick.Items)
            .Where(x => x.ShortcutKeys == pressed).FirstOrDefault();
        if (actionItem != null)
        {
            actionItem.PerformClick();
        }
        e.SuppressKeyPress = true;
    } 
```

结果是它会捕获我的击键并将它们发送给我`ContextMenuStrip`并执行点击，即使`ContextMenuStrip`是隐藏/未打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:30:12.677

是的，您需要为 Treeview 编写代码，也可能是 Key Press 或 Key Down 根据您的要求。

# sql-server-2008 - 我们可以获得插入的记录 ID 吗？

> ID：12635611
> 
> 赞同：1
> 
> 时间：2012-09-28T07:35:52.327
> 
> 标签：sql-server-2008, c#-4.0, dataset

我有一个问题，比如检索插入的记录标识值。这里我使用 DatSet 插入记录。假设我有一个表 GAME，我已经删除了所有记录，并且我正在使用数据集插入记录，如下所示

```
SqlDataAdapter sqlAdapter = new SqlDataAdapter("select * from GAME", sqlCon);
            DataSet ds = new DataSet();
            DataRow dr;
            sqlAdapter.FillSchema(ds, SchemaType.Source, "GAME");
            sqlAdapter.Fill(ds, "GAME");
            dr = ds.Tables["GAME"].NewRow();
            SqlCommandBuilder objSqlcmdBuilder = new SqlCommandBuilder(sqlAdapter);
            dr["NAME"] = "TABLE TENNIS";
            dr["PlayedDate"] = "01/02/2010";
            ds.Tables["GAME"].Rows.Add(dr);
            sqlAdapter.Update(ds, "GAME");
            MessageBox.Show(Convert.ToString(dr["GameId"]), "DataSet Demo"); 
```

在这里，我总是将 GameId 设为“0”。但是我需要获取插入的记录标识值。有没有可能使用 DataSet 的方法？我知道使用 @@Identity 等获取插入记录 ID 值的过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:49:16.197

使用[OUTPUT 子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)，例如 Output.Inserted、Output.Updated、Output.Deleted。我本可以为你做一个小例子，但我发现它已经存在[[SQL SERVER – 2005 – OUTPUT Clause Example and Explanation with INSERT, UPDATE, DELETE]](http://blog.sqlauthority.com/2007/10/01/sql-server-2005-output-clause-example-and-explanation-with-insert-update-delete/)。希望这会有所帮助。

# openssl - OpenSSL 证书错误

> ID：12635626
> 
> 赞同：1
> 
> 时间：2012-09-28T07:36:38.223
> 
> 标签：openssl, ssl-certificate

我正在使用 OpenSSL 库编写一个程序，以与其他服务器（例如 Gmail）建立 SSL POP 连接。为此，我使用 OpenSSL 生成了一个自签名证书并对其进行了验证。

```
./openssl verify -CAfile /home/melluru/openssl/ssl/certs/cert.pem
           /home/melluru/openssl/ssl/certs/cert.pem
>/home/melluru/openssl/ssl/certs/cert.pem: OK 
```

OpenSSL 工具的验证选项给出“OK”结果。但是当我在我的程序中使用以下内容来加载证书并验证结果时，我收到了错误

```
/** to add the cert file**/  
if(!(SSL_CTX_use_certificate_file(ctx,"/home/melluru/openssl/ssl/certs/cert.pem",
                             SSL_FILETYPE_PEM)))
    printf("Cant read certificate file\n");
/** to add the private key ***/
if(!(SSL_CTX_use_PrivateKey_file(ctx,"/home/melluru/openssl/ssl/certs/cert.pem",
                           SSL_FILETYPE_PEM)))
    printf("Cant read keyfile\n");
/** to cadd the trusted cert **/   
if(SSL_CTX_load_verify_locations(ctx,"/home/melluru/openssl/ssl/certs/cert.pem",
                             NULL) != 1) {
    printf("loading trust certificate failed\n");
    SSL_CTX_free(ctx);
    return 0;
}

/*** BIO code to connect to gmail server *****/

printf("ssl verify error is %d\n",SSL_get_verify_result(ssl)); 
```

我收到错误 20 `X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY`。
任何人都可以帮忙吗？我还有什么需要补充的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:46:38.427

`openssl verify`由于您的证书是自签名的，因此您可以使用它来检查其签名，就像您使用命令行所做的那样。

但是，当您尝试建立 SSL 连接时，您要验证的不是您的证书，而是您从服务器（或客户端）收到的证书。

在该行`SSL_CTX_load_verify_locations`中，您必须指向您将信任的证书链。正是这个链​​将根据您通过握手协议接收的证书进行检查。

我从来没有使用过像你描述的那样的环境，但是你说你想连接到 gmail，所以它必须是 gmail 的证书链在行`SSL_CTX_load_verify_locations`

这就是您收到错误“X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY”的原因。OpenSSL 无法在本地（在您通过方法放入的链中`SSL_CTX_load_verify_locations`）找到您收到的证书的颁发者证书。

# c# - C# - Magento：按 category_ids 过滤产品

> ID：12635632
> 
> 赞同：2
> 
> 时间：2012-09-28T07:36:56.853
> 
> 标签：c#, magento, filter

我正在.net 中使用 Magento api v2，我正在尝试从给定的类别 ID 中获取产品列表。我已经设置了一个复杂的过滤器。但是，我不知道我的 associativeEntity 的值应该是什么。（category_ids 是一个字符串数组）

有谁知道价值应该是什么？我的过滤器的代码片段发布在下面。

```
 filters f = new filters();
        f.complex_filter = new complexFilter[]
        {
            new complexFilter()
            {
                key = "category_ids",
                value = new associativeEntity
                {
                    key = "in",
                    value = " "
                }
            }
        };

        catalogProductEntity[] result;

        result = this.client.catalogProductList(this.sessionId, f, "default"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:24:44.950

了解如何在不使用复杂过滤器的情况下执行此操作。（并且仍然做过滤服务器端）

有一个方法叫做：catalogCategoryAssignedProducts(string session_id, int category_id)

此方法返回给定类别 id 的产品数组。返回的数组类型为：catalogAssignedProduct

# javascript - jQuery 更改 DIV 的 HTML 不起作用

> ID：12635633
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:37:03.670
> 
> 标签：javascript, jquery, html

我在页面底部有一个 div：

```
<div id="stickyplayer">Loading..</div> 
```

在同一页面的其他地方：

```
<a onclick="$('#stickyplayer').html('Foobar')" href="javascript:void(0);">Select</a> 
```

点击链接什么都不做。一个

```
$(document).ready(function() {
    $('#stickyplayer').html('Foobar');
}); 
```

也不起作用。

jQuery 确实包含在页面中。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:44:16.613

It works fine:

```
<div id="stickyplayer">Loading..</div>

<a onclick="$('#stickyplayer').html('Foobar')" 
href="javascript:void(0);">Select</a> 
```

You may be missing the reference of the `js` file:

```
<script
src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"
type="text/javascript"></script> 
```

You can check here **[JSFiddle](http://jsfiddle.net/cxgus/4/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:47:47.287

我已经测试了您的代码并使用

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
```

正常工作...

确实与

```
$(document).ready(function() {
    $('#stickyplayer').html('Foobar');
}); 
```

页面准备就绪时也更改了 div 的值

希望你能找到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:01:58.537

该代码有效。也许您将项目放置在错误的位置或与其他代码有任何干扰。

# plugins - 在 Sublime Text 2 插件中移动光标/点

> ID：12635644
> 
> 赞同：3
> 
> 时间：2012-09-28T07:37:43.813
> 
> 标签：plugins, sublimetext2, sublimetext

我正在为 Sublime Text 编写一个插件，其中包括将光标移动到文档的开头。

复古模式对这类事情有一个键绑定：

```
{ "keys": ["g", "g"], "command": "set_motion", "args": {
    "motion": "vi_goto_line",
    "motion_args": {"repeat": 1, "explicit_repeat": true, "extend": true,
                    "ending": "bof" },
    "linewise": true },
    "context": [{"key": "setting.command_mode"}]
} 
```

如何实现相同的效果或从插件调用相同的命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T08:10:02.567

在默认的 plugins 文件夹中有一个名为 goto_line.py 的插件，它几乎可以做到这一点。

```
import sublime, sublime_plugin

class PromptGotoLineCommand(sublime_plugin.WindowCommand):

    def run(self):
        self.window.show_input_panel("Goto Line:", "", self.on_done, None, None)
        pass

    def on_done(self, text):
        try:
            line = int(text)
            if self.window.active_view():
                self.window.active_view().run_command("goto_line", {"line": line} )
        except ValueError:
            pass

class GotoLineCommand(sublime_plugin.TextCommand):

    def run(self, edit, line):
        # Convert from 1 based to a 0 based line number
        line = int(line) - 1

        # Negative line numbers count from the end of the buffer
        if line < 0:
            lines, _ = self.view.rowcol(self.view.size())
            line = lines + line + 1

        pt = self.view.text_point(line, 0)

        self.view.sel().clear()
        self.view.sel().add(sublime.Region(pt))

        self.view.show(pt) 
```

# ruby-on-rails - Rails 3 真的非常非常奇怪的行为 flash 变量

> ID：12635645
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:37:44.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

ruby-1.9.3-p194
导轨 3.0.9

我遇到了这么多奇怪的**flash**变量行为。

**我的控制器**

```
class AdviceController < ApplicationController
    # POST /advice/save.js
    def save
        t = Logger.new(STDOUT)

        t.debug '+============================================'
        t.debug flash['advice-saving-error-msg']
        t.debug '+============================================'

        flash['advice-saving-error-msg'] = 'strange string'

        t.debug '============================================'
        t.debug flash['advice-saving-error-msg']
        t.debug '============================================'
    end
end 
```

**当我第一次**询问**保存**操作时，我在调试中看到：

 **```
+============================================
nil
+============================================
============================================
strange string
============================================ 
```

当我**下次**在调试中看到 **保存**操作时询问！！！！！！！！！！！！：

 **```
+============================================
strange string
+============================================
============================================
strange string
============================================ 
```

它让我发疯！为什么！！！

我希望得到：

```
+============================================
nil
+============================================
============================================
strange string
============================================ 
```

看起来 Rails 通过动作调用保存了 flash 变量。
任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:49:14.880

使用[`Flash.now`](http://guides.rubyonrails.org/action_controller_overview.html#flash-now). 基本闪存将其保存以供下一步操作。****

# yii - 登录模块错误 - Yii

> ID：12635647
> 
> 赞同：0
> 
> 时间：2012-09-28T07:37:47.260
> 
> 标签：yii

我正在尝试在 Yi 中创建一个登录模块，但是我遇到了这个错误，我真的不明白这是什么，因为我完全是 Yii 的初学者。请告诉我这是什么问题以及该问题的解决方案。

**未定义属性“UserIdentity.Email”。**

```
C:\wamp\www\topicoll\protected\components\UserIdentity.php(21)

09 {
10     /**
11      * Authenticates a user.
12      * The example implementation makes sure if the username and password
13      * are both 'demo'.
14      * In practical applications, this should be changed to authenticate
15      * against some persistent user identity storage (e.g. database).
16      * @return boolean whether authentication succeeds.
17      */
18     public function authenticate()
19     {
20             
21                 $users = TblUser::model()->find('Email=?',array($this->Email));
22     //    $user= TblUser::User::model()->find('LOWER(Email)=?',array(strtolower($this->Email)));
23         if($users===null)
24             $this->errorCode=self::ERROR_USERNAME_INVALID;
25         else if(!$users->validatePassword($this->password))
26             $this->errorCode=self::ERROR_PASSWORD_INVALID;
27         else
28         {
29             $this->_id=$users->id;
30             $this->Email=$users->Email;
31             $this->errorCode=self::ERROR_NONE;
32         }
33         return $this->errorCode==self::ERROR_NONE;
Stack Trace
#0  
–  C:\wamp\www\topicoll\protected\components\UserIdentity.php(21): CComponent->__get("Email")
16      * @return boolean whether authentication succeeds.
17      */
18     public function authenticate()
19     {
20             
21                 $users = TblUser::model()->find('Email=?',array($this->Email));
22     //    $user= TblUser::User::model()->find('LOWER(Email)=?',array(strtolower($this->Email)));
23         if($users===null)
24             $this->errorCode=self::ERROR_USERNAME_INVALID;
25         else if(!$users->validatePassword($this->password))
26             $this->errorCode=self::ERROR_PASSWORD_INVALID;
#1  
–  C:\wamp\www\topicoll\protected\models\LoginForm.php(45): UserIdentity->authenticate()
40      * This is the 'authenticate' validator as declared in rules().
41      */
42     public function authenticate($attribute, $params) {
43         if (!$this->hasErrors()) {
44             $this->_identity = new UserIdentity($this->Email, $this->password);
45             if (!$this->_identity->authenticate())
46                 $this->addError('password', 'Incorrect username or password.');
47         }
48     }
49 
50     /**
#2  
+  C:\wamp\www\yii\framework\validators\CInlineValidator.php(43): LoginForm->authenticate("password", array())
#3  
+  C:\wamp\www\yii\framework\validators\CValidator.php(197): CInlineValidator->validateAttribute(LoginForm, "password")
#4  
+  C:\wamp\www\yii\framework\base\CModel.php(158): CValidator->validate(LoginForm, null)
#5  
–  C:\wamp\www\topicoll\protected\controllers\SiteController.php(110): CModel->validate()
105         {
106             $model->attributes=$_POST['LoginForm'];
107                         
108 //                        var_dump($model);
109             // validate user input and redirect to the previous page if valid
110             if($model->validate() && $model->login())
111                         {
112                             $this->redirect(array('site/login', 'email'=>$model->Email));
113                             
114                             echo $model->Email;
115                            
#6  
+  C:\wamp\www\yii\framework\web\actions\CInlineAction.php(50): SiteController->actionLogin()
#7  
+  C:\wamp\www\yii\framework\web\CController.php(309): CInlineAction->runWithParams(array("r" => "site/login"))
#8  
+  C:\wamp\www\yii\framework\web\CController.php(287): CController->runAction(CInlineAction)
#9  
+  C:\wamp\www\yii\framework\web\CController.php(266): CController->runActionWithFilters(CInlineAction, array())
#10 
+  C:\wamp\www\yii\framework\web\CWebApplication.php(276): CController->run("login")
#11 
+  C:\wamp\www\yii\framework\web\CWebApplication.php(135): CWebApplication->runController("site/login")
#12 
+  C:\wamp\www\yii\framework\base\CApplication.php(162): CWebApplication->processRequest()
#13 
+  C:\wamp\www\topicoll\index.php(13): CApplication->run()
2012-09-28 07:22:44 Apache/2.2.21 (Win32) PHP/5.3.8 Yii Framework/1.1.10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:02:56.243

在您的 UserIdentity.php 中将**$this->Email**替换 为**$this->username**

# wpf - 移除带有动画的 ObservableCollection 项目

> ID：12635650
> 
> 赞同：1
> 
> 时间：2012-09-28T07:37:50.193
> 
> 标签：wpf, animation, storyboard, observablecollection

> **可能重复：**
> [如何实现添加/删除列表项的淡入和淡出](https://stackoverflow.com/questions/4171829/how-can-i-implement-fading-in-and-out-of-added-removed-listitems)

`LayoutStates`当我删除我的项目时，我尝试`FrameworkElement.Unloaded`制作动画，但它不起作用。

我认为该项目在执行动画之前已被删除！

有谁知道解决方案？

```
<EventTrigger RoutedEvent="FrameworkElement.Unloaded">
    <BeginStoryboard>
        <Storyboard>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="grid">
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0.6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1.6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="grid">
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0.6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1.6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

# php - PHP 安全电子邮件阻止虚假电子邮件，但让注册通过

> ID：12635651
> 
> 赞同：1
> 
> 时间：2012-09-28T07:37:52.913
> 
> 标签：php, forms, security, email, spam

我正在尝试制作一个不受垃圾邮件影响的表单，并向注册的人发送一封简单的电子邮件。

我对 PHP 很陌生，我面临的问题是，当在电子邮件字段中使用虚假电子邮件地址提交表单时，它会显示错误消息，指出电子邮件无效，但仍然让注册通过将其添加到数据库。

这是代码

```
function spamcheck($field) {
    // filter_var() sanitizes the e-mail
    // address using FILTER_SANITIZE_EMAIL
    $field = filter_var($field, FILTER_SANITIZE_EMAIL);

    // filter_var() validates the e-mail
    // address using FILTER_VALIDATE_EMAIL
    if(filter_var($field, FILTER_VALIDATE_EMAIL)) {
        return TRUE;
    }
    else {
        return FALSE;
    }
}

if(isset($_REQUEST['email'])) {
    // if "email" is filled out, proceed
    // check if the email address is invalid
    $mailcheck = spamcheck($_REQUEST['email']);
    if ($mailcheck==FALSE) {
        die("<font color='red'>Your email address is invalid, please try again.</font><br/><br/><form><INPUT TYPE='button' VALUE='Back' onClick='history.go(-1);return true;'></form>");
    }
    else {//send email
        $to = "$email";
        $from = "name@mywebsite.com";
        $message = "Just a message";
        $subject = "Subject";

        mail($to, $message, $subject, "From: $from", "-f$from");
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:54:15.543

首先，打印 Mailcheck 看看它的意思。

die('邮件检查：' . $mailcheck);

如果它没有设置它等于 ===

如果（$mailcheck === 假）{

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:54:23.553

也许这里的问题是，您的检查功能首先清理电子邮件地址，然后验证清理后的电子邮件。这意味着，检查功能会检查已清理的电子邮件，但在功能之外，您仍在使用无效电子邮件。

因此，要么在检查功能之外进行清理，或者在我看来更好，只验证输入而不进行清理（最好让用户意识到他输入的内容不正确，而不是尝试修复它）。

```
function checkEmail($input)
{
  return filter_var($input, FILTER_VALIDATE_EMAIL);
} 
```

编辑：

其实肯定还有一个问题，因为当代码`die(...Your email address is invalid...)`执行的时候，页面的处理就停止了。我们需要查看写入数据库的代码部分。

# javascript - 在 javascript 中生成安全密码

> ID：12635652
> 
> 赞同：10
> 
> 时间：2012-09-28T07:37:55.480
> 
> 标签：javascript, passwords

在 javascript 中生成安全密码的最快方法是什么？

我希望它至少包含 1 个特殊字符和 2 个混合大小写。长度必须至少为 6 个字符。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-28T07:55:50.713

以下是一些有用的`String`功能：

```
String.prototype.pick = function(min, max) {
    var n, chars = '';

    if (typeof max === 'undefined') {
        n = min;
    } else {
        n = min + Math.floor(Math.random() * (max - min + 1));
    }

    for (var i = 0; i < n; i++) {
        chars += this.charAt(Math.floor(Math.random() * this.length));
    }

    return chars;
};

// Credit to @Christoph: http://stackoverflow.com/a/962890/464744
String.prototype.shuffle = function() {
    var array = this.split('');
    var tmp, current, top = array.length;

    if (top) while (--top) {
        current = Math.floor(Math.random() * (top + 1));
        tmp = array[current];
        array[current] = array[top];
        array[top] = tmp;
    }

    return array.join('');
}; 
```

您的密码如下所示：

```
var specials = '!@#$%^&*()_+{}:"<>?\|[];\',./`~';
var lowercase = 'abcdefghijklmnopqrstuvwxyz';
var uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
var numbers = '0123456789';

var all = specials + lowercase + uppercase + numbers;

var password = '';
password += specials.pick(1);
password += lowercase.pick(1);
password += uppercase.pick(1);
password += all.pick(3, 10);
password = password.shuffle(); 
```

**演示：http: [//jsfiddle.net/Blender/ERCsD/6/](http://jsfiddle.net/Blender/ERCsD/6/)**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-12T09:12:21.160

我现在才收到帖子。如果您可以花几分钟看[这篇文章](http://ifsec.blogspot.fr/2012/05/cross-domain-mathrandom-prediction.html)，那么使用 Math.random() 是个坏主意。

实际上，较新的浏览器中有加密 API，您必须在开始接触加密时立即使用它。

这就是为什么我建议使用使用著名加密 API 的[我的库。](https://www.github.com/mykiimike/jen)它适用于服务器端和客户端（nodejs 和浏览器）。

MK-

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-04T21:45:19.677

我修改了@Blender 的答案以使其更安全，并且也没有改变 String.prototype。

```
// Copy-pasted from:
// https://stackoverflow.com/questions/12635652/generate-a-secure-password-in-javascript
// and modified for Auth0.
//
// Auth0 requirements:
// https://auth0.com/docs/connections/database/password-strength
//
// "at least 10 characters including at least 3 of the following 4 types of characters:
// a lower-case letter, an upper-case letter, a number, a special character (such as !@#$%^&*).
// Not more than 2 identical characters in a row (such as 111 is not allowed)".

const specials = '!@#$%^&*()_+{}:"<>?\|[];\',./`~';
const lowercase = 'abcdefghijklmnopqrstuvwxyz';
const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
const numbers = '0123456789';

const all = specials + lowercase + uppercase + numbers;

export default function generatePassword() {
  let password = '';

  password += pick(password, specials, 1, 3);
  password += pick(password, lowercase, 1, 3);
  password += pick(password, uppercase, 1, 3);
  password += pick(password, all, 10);

  return shuffle(password);
}

function pick(exclusions, string, min, max) {
  var n, chars = '';

  if (max === undefined) {
    n = min;
  } else {
    n = min + Math.floor(Math.random() * (max - min + 1));
  }

  var i = 0;
  while (i < n) {
    const character = string.charAt(Math.floor(Math.random() * string.length));
    if (exclusions.indexOf(character) < 0 && chars.indexOf(character) < 0) {
      chars += character;
      i++;
    }
  }

  return chars;
}

// Credit to @Christoph: http://stackoverflow.com/a/962890/464744
function shuffle(string) {
  var array = string.split('');
  var tmp, current, top = array.length;

  if (top) while (--top) {
    current = Math.floor(Math.random() * (top + 1));
    tmp = array[current];
    array[current] = array[top];
    array[top] = tmp;
  }

  return array.join('');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-28T07:45:44.230

将此代码用于强密码：D

```
const generatePassword = (
  passwordLength = 8,
) => {
  const lowerCase = 'abcdefghijklmnopqrstuvwxyz'
  const upperCase = lowerCase.toUpperCase()
  const numberChars = '0123456789'
  const specialChars = '!"@$%+-_?^&*()'

  let generatedPassword = ''
  let restPassword = ''

  const restLength = passwordLength % 4 
  const usableLength = passwordLength - restLength
  const generateLength = usableLength / 4

  const randomString = (char) => {
    return char[Math.floor(Math.random() * (char.length))]
  }
  for (let i = 0; i <= generateLength - 1; i++) {
    generatedPassword += `${randomString(lowerCase)}${randomString(upperCase)}${randomString(numberChars)}${randomString(specialChars)}`
  }

  for (let i = 0; i <= restLength - 1; i++) {
    restPassword += randomString([...lowerCase, ...upperCase, ...numberChars, ...specialChars])
  }

  return generatedPassword + restPassword
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-21T12:52:22.880

这不是安全的方式。如果仅依赖于数学函数（种子），则可以模拟密码生成。如果您尝试将生成与跟踪鼠标位置等用户事件相关联（因此根据用户操作使用不同的种子），这将更加安全。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-08T03:17:27.250

```
 You could do some thing like below to generate password with following Requirements
    * At least One Special Character
    * At Least on Digit
    * At least on Upper Case
    * At least One Lower Case

function generatePassword(passwordLength) {
      var numberChars = "0123456789";
      var upperChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      var lowerChars = "abcdefghijklmnopqrstuvwxyz";
      var specialChars = "#?!@$%^&*-";
      var allChars = numberChars + upperChars + lowerChars + specialChars;
      var randPasswordArray = Array(passwordLength);
      randPasswordArray[0] = numberChars;
      randPasswordArray[1] = upperChars;
      randPasswordArray[2] = lowerChars;
      randPasswordArray[3] = specialChars;
      randPasswordArray = randPasswordArray.fill(allChars, 4);
      return shuffleArray(randPasswordArray.map(function(x) { return x[Math.floor(Math.random() * x.length)] })).join('');
    }

    function shuffleArray(array) {
      for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }
      return array;
    }

    //Change length accordingly
    alert(generatePassword(12)); 
```

# javascript - 插入行后 WebSQLDatabase 几秒钟没有响应

> ID：12635661
> 
> 赞同：1
> 
> 时间：2012-09-28T07:38:10.427
> 
> 标签：javascript, performance, html, web-sql

这里的情况是我有一个包含 8 个表的 web sql 数据库，每个表有 2 个索引。启动 Web 应用程序后，我会将所有数据加载（ajax 调用）到表中，每个表中大约有 200 行。

插入后，我在其中一个表上进行了选择（从汽车中选择 *），但问题是选择查询在 chrome 中需要 4 秒，在我的 htc 渴望 android 手机上需要 30 秒（在执行之前进行了一些日志记录并在成功回调）。

第二次只需要几毫秒就可以执行选择查询，其他表也是如此。

它可能是什么，似乎数据库在那些初始插入之后还没有准备好并且做了一些神奇的东西来设置或缓存或将数据库写入磁盘或其他东西？

有任何想法吗？

**编辑**

找到了解决方案..只需在一个事务中插入所有项目！我认为初学者的错误；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:02:03.227

必须在一次交易中添加所有项目。为每一行创建事务非常慢！

# wpf - 如何在 WPF 中使用动画缩放图像时将图像放在前面？

> ID：12635662
> 
> 赞同：1
> 
> 时间：2012-09-28T07:38:17.083
> 
> 标签：wpf, silverlight, user-controls, wpf-controls, expression-blend

我正在使用混合，我陷入了在缩放图像时必须将图像放在前面的情况。

设想：

我在`ScrollViewer`里面有一个 main`Grid`包含其他各种控件，如,`ListBox`等。在底部的屏幕中，我有一个包含 a ，在里面，我有一些图像`Grid``StackPanel``Grid``StackPanel``StackPanel`

我的要求是当用户点击底部的图像时，图像应该放大并且必须像我们在任何照片查看器中一样放置在屏幕的中心和所有控件的顶部。我创建了一个`StoryBoard`并使用`Render`和`Scale`变换将图像置于中心并增加其大小，但是当我缩放图像时，一半的图像在屏幕上的另一个控件后面。我尝试使用`ZIndex`，但它不起作用。

我希望当图像缩放时它应该保持在所有控件的顶部，在缩放时不应该落后于任何控件。

我希望我能清楚地说明我的问题，以防有人不明白请发表评论。

有人可以告诉我如何在使用情节提要进行缩放时将图像置于顶部！下面是我的屏幕截图，您可以在其他控件下方看到一半图像：

![截屏](../Images/a4724f95f300981e9eeb25efb53c15f9.png)

# iphone - 在 Core Data 中使用 id 获取

> ID：12635663
> 
> 赞同：0
> 
> 时间：2012-09-28T07:38:18.030
> 
> 标签：iphone, objective-c, ios, core-data, entities

我的应用程序中有一个核心数据。实体之一是`Details`。`Details`有 2 个名为的属性`guid`，另一个是`details`. 这两个属性都包含很多值。在获取时，我必须采取`details`相应的`guid`. 我可以使用 guid 获取保存在其他属性中的值吗？如何连接这两个属性？这就是我将值保存到 2 个属性的方式。

```
ReaderAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [appDelegate managedObjectContext];

NSManagedObject *object;
object = [NSEntityDescription insertNewObjectForEntityForName:@"Details" inManagedObjectContext:context];

[object setValue: [[activity objectForKey:@"category_guid"]stringValue]forKey:@"guid"];
[object setValue:[activity objectForKey:@"details"] forKey:@"details"];

NSError *error;            
if (![context save:&error]) {

    NSLog(@"Error save base");
}
else {

    NSLog(@"saved");                
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:18:45.080

我不确定我是否理解您的问题，但如果您想`Details`根据 a 选择特定对象，您可以使用以下内容`guid`创建 a ：`NSFetchRequest``NSPredicate`

```
NSFetchRequest* request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Details" inManagedObjectContext:moc]];
[request setPredicate:[NSPredicate predicateWithFormat:@"guid == %@", yourGuid]];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:request error:&error];
if([results count] > 0) {

    // the object you are looking for
    NSManagedObject* grabbedDetail = [results objectAtIndex:0];

    NSString* grabbedDetails = [grabbedDetail valueForKey:@"details"];

    // here you have grabbed details attribute
    // I suppose it's of type NSSString... 
}

// [request release]; if you don't use ARC 
```

现在关于你的问题，你能试着解释一下这些是什么意思吗？

> 我可以使用 guid 获取保存在其他属性中的值吗？如何连接这两个属性？

希望有帮助。

编辑：

如果`results`为零，您可以首先检索没有谓词的对象。因此，请执行以下操作：

```
NSFetchRequest* request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Details" inManagedObjectContext:moc]];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:request error:&error];
if([results count] > 0) {

    for(NSManagedObject* obj in results) {

        NSLog(@"obj -> %@", obj)
    }
}

// [request release]; if you don't use ARC 
```

如果您没有日志，则意味着您没有数据！相反，使用硬编码`guid`值设置谓词，例如：

```
[request setPredicate:[NSPredicate predicateWithFormat:@"guid == %@", @"12345"]]; 
```

**您需要确保`guid`存在。**

我不知道问题是什么，但我使用的查询是正确的，没有详细信息，我无法理解发生了什么。

干杯。

# android - 印度的Android语音识别

> ID：12635667
> 
> 赞同：2
> 
> 时间：2012-09-28T07:38:43.640
> 
> 标签：android, voice-recognition

我正在尝试开发一个具有基于 VR 的模块的应用程序。我来自印度。谷歌搜索在 Android 驱动的 LG Optimus 设备上正确识别或显示的单词更像是美国口音。除了美式口音，它还有什么方法可以识别口音吗？是的，VR 引擎在印度能用吗……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T16:37:21.213

一种可能的方法是使用 Pocketsphinx 语音识别引擎

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

作为开源，这个引擎是高度可配置的，可以适应您的需求。例如，可以调整英语模型以非常准确地识别印度英语。有关更多详细信息，请参阅

[http://cmusphinx.sourceforge.net/wiki/tutorialadapt](http://cmusphinx.sourceforge.net/wiki/tutorialadapt)

印度英语的模型可在 CMUSphinx 下载中获得

[https://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/Indian%20English/](https://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/Indian%20English/)

但是，在 2019 年的这些日子里，我建议您使用 Kaldi，它更准确。见[https://github.com/alphacep/kaldi-android-demo](https://github.com/alphacep/kaldi-android-demo)

# wordpress - 有什么方法可以检测广告是否损坏？

> ID：12635670
> 
> 赞同：1
> 
> 时间：2012-09-28T07:38:49.293
> 
> 标签：wordpress, web, adsense, ads

所以我有这个网站，我使用各种广告：横幅等。其中一些已经坏了，当我插入代码时它什么也没显示。有什么方法可以自动解决这个问题吗？想发现哪些代码不起作用并改用另一个代码？

谢谢。

# javascript - 无平移副作用的 SVG 倾斜

> ID：12635689
> 
> 赞同：2
> 
> 时间：2012-09-28T07:40:10.450
> 
> 标签：javascript, html, svg, transformation

我正在尝试使用 HTML5 倾斜 javascript 中的 svg 元素，例如：

```
<svg>
<g transform="skewX(20)>
<rect width="50" height="35" fill="red"></rect>
</g>
</svg> 
```

元素内的矩形`<g>`倾斜好了，但是矩形元素也向右移动（不需要），我尝试使用 transform="translate(-20)" 手动设置位置，但测量不正确，

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:48:07.157

你是这个意思吗？

```
<svg>
<g transform="skewX(20) translate(-20, 0)">
<rect width="50" height="35" fill="red"></rect>
</g>
</svg> 
```

# jquery - 如何使用 jQuery 从选择中删除选项？

> ID：12635692
> 
> 赞同：0
> 
> 时间：2012-09-28T07:40:28.067
> 
> 标签：jquery

有人可以告诉我我在这里做错了什么：

```
function onAjaxDone(data) {
    var topicID;

    $('#TopicID')
        .html(data);

    topicID = store.getItem('TopicID');
    if (topicID) {
        $("#TopicID")
            .val(topicID);
        $('option[value="88"]', this).remove();
        $('option[value="99"]', this).remove();
    }
} 
```

我收到一条错误消息，提示“严格失败”并指向带有“this”的行。我想要做的是为 id 为 TopicID 的选择元素删除值为 88 和 99 的选项行。我编码错了吗？这是给我的一个例子，但我不确定为什么这两行都有“this”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:46:32.663

这应该这样做：

```
function onAjaxDone(data) {
    var topicID, selTopic;

    selTopic = $('#TopicID');
    selTopic.html(data);

    topicID = store.getItem('TopicID');
    if (topicID) {
        selTopic.val(topicID);
        $('option[value="88"]', selTopic).remove();
        $('option[value="99"]', selTopic).remove();
        //or
        //selTopic.val(topicID)
        //.find('option[value="88"]').remove().end()
        //.find('option[value="99"]').remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:48:40.623

这取自 jQuery 文档

```
jQuery( selector [, context] )
  selector: A string containing a selector expression
  context: A DOM Element, Document, or jQuery to use as context 
```

这意味着您使用的*this*应该指向其子元素是两个选项的 DOM 元素之一，但显然它没有。

你应该把它改成类似

```
$('option[value="88"]', el).remove();
$('option[value="99"]', el).remove(); 
```

其中*el*是表单或选择或任何父元素

```
<option value='88'></option>
<option value='89'></option> 
```

或者，如果您确定在整个网页中**只有**两个具有这些值的选项，那么您可以这样做

```
$('option[value="88"]').remove();
$('option[value="99"]').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:42:15.600

```
$("#TopicID option[value='88']").remove();
$("#TopicID option[value='89']").remove(); 
```

# javascript - 如何在 JavaScript 中匹配 0 和一个空字符串，而不是 0 和 undefined，而不是 0 和 null？

> ID：12635694
> 
> 赞同：0
> 
> 时间：2012-09-28T07:40:37.290
> 
> 标签：javascript, equality

所以基本上，我想让程序`true`在放置一个相等测试`0`和一个空字符串（“”）时返回。然后，我可以使用以下内容而不会出现任何错误：

```
0 == ""; // true 
```

但我不想匹配：

```
0 == null
0 == undefined
"" == null
"" == undefined 
```

我希望他们都回来`false`。这怎么可能？我不认为有一个运营商，所以有没有办法我可以改变他们的价值观，以某种方式使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:44:24.403

```
function Equals(a,b) {

   if(a===b || (a===0 && b === "") || (a==="" && b === 0)) return true;
    return false;

} 
```

您可以查看[jsfiddle](http://jsfiddle.net/4p5Ek/)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:44:42.887

```
function eq(value) {
    return (value === 0 || value === "");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:46:04.020

答案是“不是真的”。

你不能像那样把它们放在一起，并期望它起作用。
使用`||`和 使用两个语句，但使用`===`, 而不是`==`.

双重运算符将尝试转换为不同的类型。
三元运算符要求它们是同一类型。

```
0 == "" // true
0 === "" // false

(testValue === 0 || testValue === "") // will return false for undefined/null/NaN/false 
```

# scala - Scala 中的柯里化函数背后的基本原理是什么？

> ID：12635695
> 
> 赞同：3
> 
> 时间：2012-09-28T07:40:38.010
> 
> 标签：scala, currying

我只是 Scala 的新手，为什么 Scala 提供“咖喱函数”让我有点困惑，例如：

```
//curried function
def add(lhs: Int)(rhs: Int) = lhs + rhs
//so we can do partially binding like
val add1 = add(1)_ 
```

它令人困惑，因为 Scala 已经为普通函数提供了“部分应用程序”，例如，

```
//normal function
def add(lhs: Int, rhs: Int) = lhs + rhs
//also supports partially application
val add1 = add(1, _: Int) 
```

所以我的问题是：除了部分应用程序之外，在 Scala 中使用 curried 函数而不是普通函数还有其他意义吗？

EDT1：感谢您的回复。我想我从以下所有答案中学到了新东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T07:52:13.520

抛开理论动机（参见：与Wikipedia 中的*偏*[*函数应用对比*](http://en.wikipedia.org/wiki/Currying#Contrast_with_partial_function_application)），有一个实际含义。当最后一个参数是代码块时，语法更简单，更易读。

 *比较以下方法：

```
def test1(name: String, callback: => Unit) {}
def test2(name: String)(callback: => Unit) {} 
```

第二个方法调用看起来好多了，比较：

```
test("abc", {
    //some code
})

test2("abc") {
    //some code
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T07:51:39.710

*   更好的语法： add(1) 而不是 add(1,_)
*   类型推断从左到右的参数列表。例如，这用于集合的折叠方法。
*   隐式参数列表也需要它们。

当然，您可以争辩说最后两个可能以不同的方式实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T07:53:13.953

我不熟悉 currying 背后的理论（到目前为止），但我知道至少一种具体情况，currying 效果更好：调用带有一对花括号而不是括号的函数仅适用于单参数函数。因此，您可以为具有两个参数列表且每个参数列表的柯里化函数执行此操作，但不适用于已部分应用于一个参数的普通函数。

这在实现控制结构或 DSL 时特别有用，其中函数的某些参数本身就是匿名函数。这方面的一个例子来自*Programming in Scala*，第 9.4 节：

```
val file = new File("date.txt")

withPrintWriter(file) {
  writer => writer.println(new java.util.Date)
} 
```*

# android - 无法验证 tumblr

> ID：12635698
> 
> 赞同：0
> 
> 时间：2012-09-28T07:40:45.863
> 
> 标签：android, authentication, authorization, tumblr

[我使用了链接https://github.com/FredrikL/android-ttTumblr](https://github.com/FredrikL/android-ttTumblr)中提到的代码。当我使用此代码时，我无法验证用户名和密码。任何人都可以帮助我请..以下代码用于验证tumblr

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "http://www.tumblr.com/api/authenticate");

        try {
            System.out.println("user name : "+Username);
            System.out.println("password : "+Password);
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("email", Username));
            nameValuePairs.add(new BasicNameValuePair("password", Password));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);
            System.out.println("response value : "+ response.toString());
            System.out.println("response entity : "+response.getStatusLine().toString());
            System.out.println(response.getStatusLine().getStatusCode());
            if (response.getStatusLine().getStatusCode() != 200) {
                return false;
            }
            // Save our list of available blogs.
            SharedPreferences blogs = this.context.getSharedPreferences(BLOGS_PREFS,
                    0);
            Log.d("ttT", "attempting blog list extraction");
            saveBlogList(response, blogs);
            return true;

        } catch (ClientProtocolException e) {
            Log.d(TAG, "client proto exception", e);
        } catch (IOException e) {
            Log.d(TAG, "io exception", e);
        }
        return false; 
```

在这个我得到“response.getStatusLine().getStatusCode() 值为 404”。请任何人帮助我对其进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:43:47.023

[http://www.tumblr.com/api/authenticate](http://www.tumblr.com/api/authenticate) does not exist. Therefore you get an HTTP404.

See this

[http://www.tumblr.com/docs/en/api/v2](http://www.tumblr.com/docs/en/api/v2)

# c# - C# (AOP) 方法拦截器

> ID：12635704
> 
> 赞同：0
> 
> 时间：2012-09-28T07:41:33.710
> 
> 标签：c#, function, methods, aop, interceptor

我有很多 Web 服务方法，我想在一个函数中验证所有这些方法。例如;

```
[Intercept]
public string Method1(POS pos, int param1, string param2)
{
    return String.Format("{0}: {1}", param1,param2);
}

[Intercept]
public int Method2(POS pos, int param3)
{
    return param3 * 2;
}

public void OnPreProcessing(...)
{
     // Before Mothod1 and Method2 called, It should enter here
     // I want to be able to cancel method execution and return another value.
     // I want to get the method name, parameter names and values         
} 
```

现在我正在使用 ContextBoundObject 和 IMessageSink 来执行此操作。我可以获取方法名称、参数和值，但我无法取消方法执行并返回另一个值。我正在使用类似下面的东西。

```
public IMessage SyncProcessMessage(IMessage msg)
{
    var mcm = msg as IMethodCallMessage;
    OnPreProcessing(ref mcm);
    var retMsg = _NextSink.SyncProcessMessage(msg) as IMethodReturnMessage;
    OnPostProcessing(mcm, ref retMsg);
    return retMsg;
} 
```

如何取消方法执行并返回另一个值？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-07T11:27:10.700

只需放置取消检测即可忽略呼叫。

```
[Intercept]
public string Method1(POS pos, int param1, string param2)
{
    return String.Format("{0}: {1}", param1,param2);
}

[Intercept]
public int Method2(POS pos, int param3)
{
    return param3 * 2;
}

public bool OnPreProcessing(...)
{
     // Before Mothod1 and Method2 called, It should enter here
     // I want to be able to cancel method execution and return another value.
     // I want to get the method name, parameter names and values         
} 
```

例如， OnPreProcessing 返回一个布尔值，如果您需要取消调用，则为真......

```
public IMessage SyncProcessMessage(IMessage msg)
{
    var mcm = msg as IMethodCallMessage;
    var cancel = OnPreProcessing(ref mcm);
    var retMsg = cancel ? /*IMethodReturnMessage for cancelation*/ : _NextSink.SyncProcessMessage(msg) as IMethodReturnMessage;
    OnPostProcessing(mcm, ref retMsg);
    return retMsg;
} 
```

# php - PHP / MySQL：连接三个表并合并结果

> ID：12635714
> 
> 赞同：7
> 
> 时间：2012-09-28T07:42:14.980
> 
> 标签：php, mysql, sql, join

> **可能重复：**
> [我可以将多个 MySQL 行连接到一个字段中吗？](https://stackoverflow.com/questions/276927/can-i-concatenate-multiple-mysql-rows-into-one-field)

我有三张桌子：

表格1：`teacher`

```
id
firstname
surname 
```

表#2：`course`

```
id
name 
```

表3：`courses_has_teachers`

```
course_id
teacher_id 
```

我想要得到的是带有老师信息的课程信息。我已经用这个查询试过了：

```
SELECT * FROM 
teacher, course, courses_has_teachers
WHERE
courses_has_teachers.teacher_id = teacher.id
AND
course.id = courses_has_teachers.course.id 
```

我得到了我想要的，但是：如果一门课程有不止一位老师，我想结合结果。而不是具有相同课程信息的多行，我想获得一个包含课程信息和教师列表的简单行。

**不像这样：**

```
Name      | Teacher
--------------------
Course 1  | Person 1
Course 1  | Person 2 
```

**但是这个：**

```
Name      | Teacher
------------------------------
Course 1  | Person 1, Person 2 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T07:45:56.317

使用`GROUP_CONCAT`. 试试这个，

```
SELECT  a.name, GROUP_CONCAT(CONCAT(firstname, ' ', surname))
FROM    course a
        INNER JOIN courses_has_teachers b
            ON a.id = b.course_id
        INNER JOIN teacher c
            ON b.teacher_id = c.iD
GROUP BY a.name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:44:02.977

您想使用名为 group_concat 的 mysql 函数来实现此目的。您的查询将类似于以下内容：

```
SELECT courseName, group_concat(teacherName) FROM 
teacher, course, courses_has_teachers
WHERE
courses_has_teachers.teacher_id = teacher.id
AND
course.id = courses_has_teachers.course.id
GROUP BY courseName 
```

我以 ANSI-92 格式重新编写了这个查询，您可能不熟悉，但它可以使具有多个连接的查询*更*易于阅读：

```
SELECT 
    courseName, 
    group_concat(teacherName) 
FROM 
    teacher
        join course
            on courses_has_teachers.teacher_id = teacher.id
        join courses_has_teachers
            on course.id = courses_has_teachers.course.id
WHERE
    // Any conditions you want on the query
GROUP BY
    courseName 
```

此外，您可能想阅读我写的[冗长的问答](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)，您可能会觉得这很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T07:43:43.730

尝试使用**[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)**和**[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)**。

# c++ - c++ 错误的参数类型 - 函数指针

> ID：12635716
> 
> 赞同：1
> 
> 时间：2012-09-28T07:42:22.213
> 
> 标签：c++, pointers, types, compiler-errors, function-pointers

我有一个函数，它以函数指针为参数：

```
void MySolver::set_pt2func(double(*pt2function)(double*))
{
    pt2Function = pt2function;
} 
```

在另一个类中，某些方法想要使用以下代码初始化实例 my_solver：

```
double (MyClass::*pt2apply)(double* parameter) = NULL; 
pt2apply = &MyClass::apply_func;

my_solver->set_pt2func(pt2apply); 
```

最后一行显示编译错误：

```
error: double (MyClass::*pt2apply)(double*)

argument of type  (MyClass::* )(double*) is not compatible 
with argument of type double(*)(double*) 
```

怎么修？

谢谢！

编辑

我用这个技巧

[http://www.parashift.com/c++-faq/memfnptr-to-const-memfn.html](http://www.parashift.com/c++-faq/memfnptr-to-const-memfn.html)

我设置了typedef：

```
typedef  double (MyClass::*Pt2apply_func)(double*) const; 
```

在我的方法中，我试试这个：

```
Pt2apply_func pt2apply = &MyClass::apply_func;

my_solver->set_pt2func(pt2apply); 
```

并且编译错误显示为`&MyClass`, 再次兼容类型。其他方式来处理我的问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T07:52:03.860

您需要一个指向函数的指针：

```
double(*)(double*) 
```

你所拥有的是一个指向成员函数的指针：

```
double (MyClass::*)(double*) 
```

这些不是一回事。甚至所有类似的。第一个可以直接调用；第二个只能通过对象调用，使用`->*`or`.*`运算符。

这不仅仅是编译器对类型的挑剔。指向成员函数的指针甚至不是一个指针（或至少*不仅仅是*一个指针）。它需要更多信息才能处理动态绑定。

有关详细信息，请参阅[http://www.parashift.com/c++-faq/pointers-to-members.html 。](http://www.parashift.com/c++-faq/pointers-to-members.html)

在 C 风格 API 中使用指向成员函数的指针的“经典”方法是编写一个`MyClass*`从其他地方获取 a 的包装函数（通常是与函数指针一起传递的“userinfo”、“thunk”等） ) 并用它调用`myobj->*pmf(args)`。然后，您可以将指针传递给该包装器，因为它只是一个普通函数。更智能的现代方法包括`bind`lambdas。

让我们先处理现代方式，因为它更简单，如果可以的话，这是你应该做的。首先，如果你有 C++11，你可以使用`std::bind`, 或`std::mem_fn`, 或者只写一个 lambda：

```
auto pt2apply = [&](double *parameter) { return my_solver->pt2apply(parameter); } 
```

现在，这东西的类型不是`double(*)(double*)`。事实上，它是一种未指明的东西，而且可能是难以形容的丑陋。这里我们只是用来`auto`避免处理它，但我们必须将它传递给`set_pt2func`，然后该方法必须将它存储在成员变量中，因此我们需要某种可以键入的类型。答案是`std::function<double(double *)>`。这是一个对象，可以存储任何可以用 a 调用`double *`并返回 a的副本`double`。所以：

```
void MySolver::set_pt2func(std::function<double(double*)> pt2function)
{
    pt2Function = pt2function;
} 
```

就是这样。

现在，这需要 C++11。如果您使用的是 C++98，则可以使用`boost::lambda`C++11 的 lambda 代替（丑得多，但基本思想相同）。或者您可以使用（几乎与基于 Boost 库的`boost::bind`C++11 相同）或具有类似功能的许多其他库之一。`std::bind`并存储仿函数`boost::function`（同样，几乎与 C++11 相同`std::function`，尽管有时效率较低）。（如果你有带有 TR1 的 C++03，你可能在`std`or中有一些 C++11 的特性`std::tr1`，但是不同的编译器制造商直到 C++11 几乎完成之前都没有理顺细节，所以最简单的使用方法是通过`boost::tr1`，如果你有 Boost，你不妨直接使用它。）

如果由于某种原因你被 C++98 卡住并且没有 Boost，你可以使用`std::mem_fn`, 并将结果存储在`std::binary_function`. 这更难看，所以我不会在这里给出完整的细节。

现在让我们看看经典的解决方案。只有当您有一个现有的 API 使用函数指针（例如，回调）并且您无法更改它时，才真正值得这样做。我建议寻找使用 C 函数的示例代码，例如`qsort_r`，因为这个想法几乎相同：您将函数指针与“thunk”一起传递，并且它们两者总是一起旅行。（现代解决方案基本上都是关于将这两个东西绑定到一个对象中，您可以调用该对象而无需跟踪 thunk，以使您的代码更易于阅读和编写，并使编译器更容易捕获错误。 )

这里的关键是您需要一个包装函数，一个可以获取函数指针的普通 C 风格函数。您的 thunk 将是指向您的`MyClass`对象的指针。在我的示例中，我将把 thunk 作为 a 传递，`void *`因为尽管这显然是次要的（要编写更多代码，编译器捕获错误的机会更少），但这是您最常看到的您需要处理的通用 C API。

所以，把它们放在一起：

```
void MySolver::set_pt2func(double(*pt2function)(double*, void *), void *userinfo)
{
    pt2Function = pt2function;
    userInfo = userinfo;
}

double wrapMyClassPt2Apply(double *parameter, void *userinfo)
{
    return ((MyClass*)userinfo)->apply_func(parameter);
}

my_solver->set_pt2func(wrapMyClassPt2Apply, (void *)my_solver); 
```

请注意，如果您使用的是`pt2apply`指向成员函数的指针，您将`->*`在包装器中调用它。但我们不再需要`pt2apply`了；包装器可以只调用`apply_func`成员`->`。

然后，当 MySolver 想要调用该函数时，它会执行以下操作：

```
pt2Function(parameter, userInfo); 
```

最后一件事： wrapMyClassPt2Apply 不能是成员函数，否则您会遇到与开始时相同的问题；指向它的指针将是指向成员函数的指针，而不是指针。所以，你有两个选择：

1.  使其成为免费功能。这是一件完全合理的事情。自由函数可以是类接口的一部分。或者，它们甚至可以比私有方法更好地隐藏（通过将它们放在 .cpp 文件中而不在 .h 文件中提及它们）。

2.  使其成为静态方法。有些人更喜欢这个，但实际上，唯一有用的时候是 MyClass.cpp 之外的人将进行`set_pt2func`调用，并且已经是 的朋友（或子类）`MyClass`，因为这样您可以将方法设为私有（或受保护）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:46:50.357

没有简单的解决方案。指向成员函数的指针是不同的，因为它们需要调用一个对象。将如何`MySolver`提供`MyClass`？基本上，一旦你有了这个答案，根本问题就基本消失了。两种常见的解决方案是`MySolver`知道`MyClass`，在这种情况下，您可以修复 set_pt2func 的签名，或者您`MySolver`提供`std::bind(pt2apply, SomeObj, _1)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:46:16.643

指向成员函数的指针与常规函数指针（c 样式函数指针）不兼容。`this`这是因为成员采用不属于签名的隐式参数。如果您想实现类似的行为，请查看 boost::bind。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T08:20:39.613

使用 C++11 而不是 C。这意味着：使用`std::function`和`std:mem_fn`绑定成员函数。

# android - 从 Android 中的 sd 卡读取 xml 文件不起作用

> ID：12635722
> 
> 赞同：0
> 
> 时间：2012-09-28T07:43:21.157
> 
> 标签：android, xml, xml-parsing, sax, android-sdcard

我正在尝试从 URL 下载 xml 文件，将其保存到内部 sd 卡并解析 xml。这是我的下载功能：

```
private static String Name = project_name.getText().toString();
private static String URL = url.getText().toString();

//Download XML file from URL 
DownloadManager.Request request = new DownloadManager.Request(Uri.parse(URL));
request.setTitle("Download von "+Name+".xml");
request.setDestinationInExternalPublicDir("/", Name+".xml");
// get download service and enqueue file
DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
manager.enqueue(request);  
private static ArrayList<Datapoint> itemsList = parseXML(); 
```

这是解析器函数：

```
private ArrayList<Datapoint> parseXML() {

        try {

            Log.w("AndroidParseXMLActivity", "Start");
            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            File file = new File(Environment.getExternalStorageDirectory()+"/"+ Name+ ".xml");

            XMLContentHandler myXMLHandler = new XMLContentHandler();
            xr.setContentHandler(myXMLHandler);

          xr.parse(new InputSource(new InputStreamReader(new FileInputStream(file)))); 

            itemsList = myXMLHandler.getItemsList();

            Log.w("AndroidParseXMLActivity", "Done");
        }
        catch (Exception e) {
            Log.w("AndroidParseXMLActivity",e );
        }
        return itemsList ;
    } 
```

但我收到以下 Logcat 错误：

```
09-28 09:30:36.500: W/AndroidParseXMLActivity(7881): Start
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881): java.io.FileNotFoundException: /mnt/sdcard/mich.xml: open failed: ENOENT (No such file or directory)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at libcore.io.IoBridge.open(IoBridge.java:406)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at java.io.FileInputStream.<init>(FileInputStream.java:78)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at de.myapp.CreateProject.parseXML(CreateProject.java:348)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at de.myapp.CreateProject.save_project(CreateProject.java:298)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at de.myapp.CreateProject.onOptionsItemSelected(CreateProject.java:115)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.app.Activity.onMenuItemSelected(Activity.java:2564)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:984)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:613)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:121)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.view.View.performClick(View.java:3644)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.view.View$PerformClick.run(View.java:14313)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.os.Handler.handleCallback(Handler.java:605)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.os.Looper.loop(Looper.java:137)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at android.app.ActivityThread.main(ActivityThread.java:4517)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at java.lang.reflect.Method.invokeNative(Native Method)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at java.lang.reflect.Method.invoke(Method.java:511)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at dalvik.system.NativeStart.main(Native Method)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at libcore.io.Posix.open(Native Method)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    at libcore.io.IoBridge.open(IoBridge.java:390)
09-28 09:30:36.540: W/AndroidParseXMLActivity(7881):    ... 22 more
09-28 09:30:36.590: E/SKIA(7881): FimgApiStretch:stretch failed
09-28 09:30:39.350: D/AbsListView(7881): Get MotionRecognitionManager
09-28 09:30:39.435: D/dalvikvm(7881): GC_CONCURRENT freed 238K, 5% free 15465K/16135K, paused 1ms+4ms
09-28 09:30:39.440: D/AbsListView(7881): [unregisterDoubleTapMotionListener]
09-28 09:30:39.440: I/MotionRecognitionManager(7881):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@41a3a5e0
09-28 09:30:40.675: D/FILESTREAM(7881): Filepath:/data/data/de.myapp/files/mich
09-28 09:30:40.675: D/AndroidRuntime(7881): Shutting down VM
09-28 09:30:40.675: W/dalvikvm(7881): threadid=1: thread exiting with uncaught exception (group=0x40c621f8)
09-28 09:30:40.680: E/AndroidRuntime(7881): FATAL EXCEPTION: main
09-28 09:30:40.680: E/AndroidRuntime(7881): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.myapp/myapp.ProjectView}: java.lang.NullPointerException
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.os.Looper.loop(Looper.java:137)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.ActivityThread.main(ActivityThread.java:4517)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at java.lang.reflect.Method.invokeNative(Native Method)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at java.lang.reflect.Method.invoke(Method.java:511)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at dalvik.system.NativeStart.main(Native Method)
09-28 09:30:40.680: E/AndroidRuntime(7881): Caused by: java.lang.NullPointerException
09-28 09:30:40.680: E/AndroidRuntime(7881):     at de.myapp.ProjectView.setup(ProjectView.java:148)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at de.myapp.ProjectView.onCreate(ProjectView.java:62)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.Activity.performCreate(Activity.java:4533)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-28 09:30:40.680: E/AndroidRuntime(7881):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-28 09:30:40.680: E/AndroidRuntime(7881):     ... 11 more 
```

我还在我的 AndroidManifest.xml 中设置了此权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
</uses-permission> 
```

xml 已下载并保存到 sd 卡，因为我可以使用 Windows 资源管理器查看并打开它。

任何人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:48:58.837

尝试使用此代码，

```
public void DownloadFromUrl(String DownloadUrl, String fileName) {

   try {
           File root = android.os.Environment.getExternalStorageDirectory();               

           File dir = new File (root.getAbsolutePath() + "/xmls");
           if(dir.exists()==false) {
                dir.mkdirs();
           }

           URL url = new URL(DownloadUrl); //you can write here any link
           File file = new File(dir, fileName);

           long startTime = System.currentTimeMillis();
           Log.d("DownloadManager", "download begining");
           Log.d("DownloadManager", "download url:" + url);
           Log.d("DownloadManager", "downloaded file name:" + fileName);

           /* Open a connection to that URL. */
           URLConnection ucon = url.openConnection();

           /*
            * Define InputStreams to read from the URLConnection.
            */
           InputStream is = ucon.getInputStream();
           BufferedInputStream bis = new BufferedInputStream(is);

           /*
            * Read bytes to the Buffer until there is nothing more to read(-1).
            */
           ByteArrayBuffer baf = new ByteArrayBuffer(5000);
           int current = 0;
           while ((current = bis.read()) != -1) {
              baf.append((byte) current);
           }

           /* Convert the Bytes read to a String. */
           FileOutputStream fos = new FileOutputStream(file);
           fos.write(baf.toByteArray());
           fos.flush();
           fos.close();
           Log.d("DownloadManager", "download ready in" + ((System.currentTimeMillis() - startTime) / 1000) + " sec");

   } catch (IOException e) {
       Log.d("DownloadManager", "Error: " + e);
   }

} 
```

# javascript - dynamically set anchor reference will not show but download

> ID：12635724
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:43:22.560
> 
> 标签：javascript, html, pdf, anchor, overwrite

I am facing a roblem where html page anchor href set in html opens a pdf in the same window BUT when href is set in javascript it just downloads the document. I need to open the dynamically-set doc in current browser window. Page uses java query 1 7 1 js. The href is tried and true.

forcing target="_self" does not help, it is default anyways any function of onclick applied to the anchor tag fires but is ignored. tried regular js as well as jquery happens in IE, Safari, Chrome, did not try others but not interested for now

I am open to try any suggestions.

not moodyfying the above to be honest in respect to the kind person who answered first.

here is what I found thanks to the answer: It doesn't matter if the link is set dynamically, nothing wrong with the pdf document, problem seems to be the location of the doc. When I reference that doc in one domain it opens in current browser just fine, only the new domain location creates this problem ( I copied the old document there ).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:47:07.333

> *我需要在当前浏览器窗口中打开动态设置的文档。*

在浏览器中打开 PDF 是一个依赖于浏览器的功能。默认情况下，Google Chrome 会执行此操作，而 Firefox 需要安装 Adob​​e Reader。

> *强制* `target="_self"` *没有帮助，无论如何它都是默认的，任何应用于锚标记的 onclick 功能都会触发但被忽略。*

如果您不提供任何内容，默认情况下，浏览器会在同一窗口中打开。如果它下载，请检查响应标头`Content-disposition: attachment;`并使用支持打开 PDF 的浏览器进行检查。

# iphone - How to prevent data changes in array which is available in appdelegate in iphone

> ID：12635725
> 
> 赞同：0
> 
> 时间：2012-09-28T07:43:25.487
> 
> 标签：iphone

Hi in my application i am getting the data from server and storing that data in a array and that array i am adding to another array(This array i declared in appdelegate file ). In this manner i am adding so many arrays in appdelegates array. At first it is good and each array count which are available in appdelegate array is expecting result only, but after some time the array's count is changing which are available in this appdelegate array. why it is happening i don't have any idea. if any one have any idea please let me know. Otherwise please suggest any other procedure to store data in this manner like plist or sqlite like that.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:44:08.430

你究竟为什么要以这种方式存储数据，为什么要使用这么多的服务器调用？有没有办法只接收来自服务器的结构化文件（例如 xml），它可以为您提供来自不同调用的所有结果？这将使整个过程变得更加容易，因为数据可以在一次调用中解析，并且可以放在一个整洁的核心数据/plist 结构中。

# html - 使用 CSS 背景阴影/图像打印 HTML 页面

> ID：12635730
> 
> 赞同：0
> 
> 时间：2012-09-28T07:43:51.417
> 
> 标签：html, css

我有一个在线订票系统，客户可以使用浏览器的打印命令直接从网页打印票。

但是，我面临一个问题，即使用 css 背景的背景阴影/图像不会出现在票的硬拷贝上，尽管它在网页上完美显示。好的，我可以使用标签，但是背景阴影和水印图像呢？

谢谢！提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:48:16.033

这通常是浏览器本身的问题。某些浏览器（例如 IE 8）默认不会打印背景，必须打开该选项。

请参阅[如何打印带有背景图像的网页？](https://stackoverflow.com/questions/5064904/how-to-print-webpage-with-background-image)了解更多信息。

有一些解决方法，例如实际使用图像而不是背景，但通常它们并不漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:49:48.607

您可以尝试在 print.css 文件中定义规则（将媒体设置为“打印”，而不是像常规 css 文件那样的“屏幕”）。或者，您可以使用将页面转换为 pdf 的工具，然后打印。如果您朝那个方向发展，我建议您研究 wkhtmltopdf。实施起来非常简单。

# json - 应该遵循什么方法来获取 html 内容以及 drupal 视图

> ID：12635732
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:43:55.587
> 
> 标签：json, drupal-7, views

我正在使用 drupal 7**视图**。我创建了一个简单的**CCK**，其中包含一个 title 和一个 body 。我将 HTML 内容添加到 body 并选择 Formater 到**Full html**。内容样本：

```
<html>
<body>
<div>
  <p> This is a sample Text.</p>
  <p> To test the content </p>
</div>
</body>
</html> 
```

我还创建了一个**VIEW（JSON 文档）**，以便内容可以显示在我的 iphone 或 android 设备上。

问题是当我在手机上显示数据时，它只是显示

```
This is a sample Text. /n To test the cotent 
```

现在，是否可以获得与输入内容正文的文本相同的数据？

就像我也应该显示**html 标签**一样！这样我就可以在我的设备上的 Web 视图中显示结果（没有其他`/n`东西）。 ![在此处输入图像描述](../Images/1da38aa850c8e962e8acab1fb18420ba.png) 请帮忙 ！！

谢谢

这是视图设置的屏幕截图。

![在此处输入图像描述](../Images/27d5367ec0d16c8cfb9ba1906551d3ee.png)

![在此处输入图像描述](../Images/72a467ae086b3570073a84ad3248e13f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:21:45.533

*OP发布截图后编辑*

因此，您的 HTML 标签被自然剥离有几个原因。

*   这里的一个问题是您选择了 JSON 数据作为您的格式类型。JSON 数据文档自然不是用户友好的，因为它们的目的只是提供数据以供其他视图使用。尝试将您的格式更改为供最终用户使用的其他内容。我非常喜欢[语义视图](http://drupal.org/project/semanticviews)。
    *   **编辑：**如果您坚持使用 JSON 数据，请单击“格式”部分下的“设置”，并确保未选中“纯文本输出”和“删除换行符”复选框。
*   其次，您确实需要确保各个视图字段格式化程序设置与您的 CCK 字段格式化程序设置相匹配。要查看我所指的内容，请单击“字段”部分下的“内容：正文”。您将看到 Formatter 下拉菜单，该下拉菜单很可能设置为默认设置，而不是“完整 HTML”。

如果你改变这些东西，你应该很高兴。

# javascript - jQuery AJAX loop doesn't finish before 'done'

> ID：12635739
> 
> 赞同：0
> 
> 时间：2012-09-28T07:44:07.937
> 
> 标签：javascript, jquery, ajax

I have a photo gallery that can be updated via an looped ajax call. The problem is, it only updates about 6 images before the "done" gets fired and the page changes. How can I make the script wait until the entire loop is finished before it executes 'done'?

```
$('#selectAlbum').change(function() {
  var thisAlbID = $(this).children(":selected").attr("id");
  var thisAlbURL = $(this).val();
  $('.medSelectHighlight').each(function() {
     jQuery.ajax({
       url:'system/move-media.php',
       data:{photo_id:$(this).attr('id'),album_id:thisAlbID},
       dataType: 'json',
       type:'POST'
    }).done(function() {
       document.location.href='../media/'+thisAlbURL;
    });
}); 

}); 
```

I should also add that I have tried `async false` and it worked - however I have read that it should be avoided...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:54:08.357

我注意到`done`每次触发 ajax 时都会执行。你的`done`放置正确吗？我的意思是，它应该在`each`右括号的末尾，不是吗？尝试这个：

```
$('.medSelectHighlight').each(function() 
  {
        jQuery.ajax
        ({
            url:'system/move-media.php',
            data:{photo_id:$(this).attr('id'),album_id:thisAlbID},
            dataType: 'json',
            type:'POST'
         });
   }).done(function() 
         {
               document.location.href='../media/'+thisAlbURL;
         }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:40:27.287

在 DPP 的帮助下，我最终使用了`ajaxStop`它，它就像一个魅力。代码如下，适用于有相同问题的人...

```
$('#selectAlbum').change(function() {
  $('body').css('cursor', 'progress');
  var thisAlbID = $(this).children(":selected").attr("id");
  var thisAlbURL = $(this).val();
     $('.medSelectHighlight').each(function() {
        jQuery.ajax({
        url:'system/move-media.php',
        data:{photo_id:$(this).attr('id'),album_id:thisAlbID},
        dataType: 'json',
        type:'POST'
        });
     }).ajaxStop(function() {
     document.location.href='media/'+thisAlbURL;
     });

}); 
```

# selenium - 使用 fireevent() 函数的 Onclick 事件在 selenium IDE 中不起作用

> ID：12635740
> 
> 赞同：2
> 
> 时间：2012-09-28T07:44:08.300
> 
> 标签：selenium, selenium-ide

```
<div id="member_sel_div" style="">
    <table class="dataTable" width="100%" cellspacing="0" cellpadding="0" border="0" summary="">
        <tbody>
               <tr class="heding">
                   <tr class="odd">
                           <td valign="top" width="4%">

                               <input id="mgrp_-1" class="reset" type="checkbox" onclick="showMembers(-1, 0)" value="-1" name="member_group_id[]" style="position: absolute; z-index: -1; visibility: hidden;"/>

                               <span class="jquery-checkbox jquery-checkbox-checked" style="-moz-user-select: none;">

                              <span class="mark jquery-checkbox-hover">

                              <img width="24" height="24" src="/purebenefits/dev/images/empty.png"/>

                             </span>
                         </span>
                    </td>

                   <td valign="top" style="padding-left:0;">NO GROUP</td>

            </tr> 
```

我正在处理一个测试用例，其中将出现多个复选框，单击每个复选框将调用函数 showMembers(checkbox value, 0)

在我的测试用例中，我首先计算了复选框的数量，然后使用循环我也可以单击每个复选框，但是在单击复选框时，它的 onclick 功能没有触发，这就是我无法继续的原因。我也使用了fireevent函数，但结果是一样的

我正在使用 selenium IDE，上面给出了该部分的 html 代码，下面给出了我为 selenium ide 编写的代码

```
<tr>
    <td>assertTextPresent</td>
    <td>New Quote</td>
    <td></td>
</tr>
<tr>
    <td>select</td>
    <td>name=insurance_type_id</td>
    <td>label=Group Life Assurance</td>
</tr>
<tr>
    <td>verifyTextPresent</td>
    <td>Policy Features </td>
    <td></td>
</tr>
<tr>
    <td>assertTextPresent</td>
    <td>Bronze</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>//div[@id='product_list_div']/table[@class='priceTable']/tbody/tr/th[4]/label/input[@id='prodid_6']</td>
    <td></td>
</tr>
<tr>
    <td>storeXpathCount</td>
    <td>//div[@id='member_sel_div']/table[@class='dataTable']/tbody/tr[@class='odd']/td/input[@type='checkbox']/</td>
    <td>count</td>
</tr>
<tr>
    <td>echo</td>
    <td>${count}</td>
    <td></td>
</tr>
<tr>
    <td>getEval</td>
    <td>alert(&quot;Number of Group : ${count}&quot;)</td>
    <td></td>
</tr>
<tr>
    <td>store</td>
    <td>1</td>
    <td>j</td>
</tr>
<tr>
    <td>store</td>
    <td>1</td>
    <td>i</td>
</tr>
<tr>
    <td>store</td>
    <td>javascript{storedVars.count;}</td>
    <td></td>
</tr>
<tr>
    <td>while</td>
    <td>storedVars.i&lt;=${count}</td>
    <td></td>
</tr>
<tr>
    <td>echo</td>
    <td>${i}</td>
    <td></td>
</tr>
<tr>
    <td>echo</td>
    <td>${j}</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>${i}-${j}</td>
    <td>k</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>window.document.getElementsByName('member_group_id[]')[${k}].value</td>
    <td>abc</td>
</tr>
<tr>
    <td>echo</td>
    <td>${abc}</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>//div[@id='member_sel_div']/table[@class='dataTable']/tbody/tr[@class='odd']/td/input[@value='${abc}']/</td>
    <td></td>
</tr>
<tr>
    <td>fireEvent</td>
    <td>//div[@id='member_sel_div']/table[@class='dataTable']/tbody/tr[@class='odd']/td/input[@value='${abc}']</td>
    <td>&quot;click&quot;</td>
</tr>
<tr>
    <td>store</td>
    <td>javascript{storedVars.i++;}</td>
    <td></td>
</tr>
<tr>
    <td>endWhile</td>
    <td></td>
    <td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:01:24.687

在应用 fireEvent 之前，您是否尝试过专注于该元素？这可能是一个案例。

# javascript - Getting coordinates of a map's corners

> ID：12635749
> 
> 赞同：0
> 
> 时间：2012-09-28T07:44:41.103
> 
> 标签：javascript, google-maps-api-3

I want to get coordinates of map's corners like shown in the image

![enter image description here](../Images/c5becc28d40a855dc0474f9ce0b9ab6e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:11:00.773

使用`map.getBounds()`. 这将返回一个 LatLngBounds 对象。然后，您可以从中使用`getNorthEast()`并`getSouthWest()`获得这些角落。这些不是你想要的，所以你必须做一些逻辑来弄清楚西北和东南部分。即使用`lat()`NorthEast 角的 和`lon()`SouthWest 角的 用于 NorthWest 坐标，`lon()`NorthEast 角的 与`lat()`SouthWest 角的 用于 SouthEast 坐标。

# javascript - e.parentNode.parentNode.childNodes[i].innerText 的 Jquery 等效/浏览器兼容性；

> ID：12635751
> 
> 赞同：0
> 
> 时间：2012-09-28T07:44:42.790
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我正在使用以下代码段来更新表中的一些文本框值。

```
<table>
  <tr>
    <td>ProjectName</td>
    <td>Block</td>
    <td>.WorkProgressMilestone</td>
    <td>Completion</td>
    <td>
       <span class="sep">
       <img height="15px" width="20px" src="@Url.Content("~/Content/themes/base/images/Edit.png")" />
       </span>
       <a href="#" onclick="EditWorkDetails(this);" style="text-decoration: none">Edit</a>
       <input id="WorkProgressEditID" name="WorkProgressEditID" type="hidden" value="@v.WorkProgressID" />
     </td>
   </tr>
   <tr>..</tr>
 </table>

function EditWorkDetails(e) {
document.getElementById("txtCompletion").value = e.parentNode.parentNode.childNodes[3].innerText;
} 
```

它在 IE 中对我来说很好，但在其他浏览器（Chrome）中不起作用。值得注意的是，表 'td' 和 'tr' 没有 Id 属性来区分彼此。所以我不能在这里使用jquery。我可以遵循什么替代方案使其在所有浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:56:24.733

试试这个：

```
document.getElementById("txtCompletion").value = $(this).parent().parent().children()[3].html(); 
```

或者

```
$("txtCompletion").val($(this).parent().parent().children()[3].html()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:45:25.373

你有两个问题：

1.  `innerText`不被普遍支持。
2.  除了 IE < 9（和兼容模式下的 IE 9）之外的所有浏览器都在`childNodes`. IE 没有，因此`tr.childNodes[3]`如果`<td>`元素之间有空格，则将引用不同的节点。

我推荐的修复：

1.  使用`element.textContent || elem.innerText`. 这[并不完美](https://stackoverflow.com/a/1359822/96100)，但在大多数情况下都可以正常工作。
2.  看起来您正在尝试获取表格单元格的文本内容。如果是这样，您可以使用`cells`table 的属性，它普遍支持回到 IE 4。

具有两个修复的示例代码：

```
var td = e.parentNode.parentNode.cells[3];
var tdText = td.textContent || td.innerText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:54:08.090

并非所有浏览器都支持 innerText，您可以尝试使用 jquery 或

根据浏览器版本使用 .textContent 和 .innerText

# javascript - 如何在 javascript 中创建具有长度属性的自定义对象并添加和删除函数

> ID：12635752
> 
> 赞同：0
> 
> 时间：2012-09-28T07:44:43.350
> 
> 标签：javascript, jquery, arrays, class, object

我想要一个 javascript 中的对象类，它将写在一个单独的 js 文件中。

这个对象类将被称为**Pages**。

这个对象类的目的是让我操作 html5 中的 files 属性，它是纯只读的。

见[http://help.dottoro.com/ljslrhdh.php](http://help.dottoro.com/ljslrhdh.php)

我想要页面中的以下属性/功能

*   Pages.length : 是一个只读属性。
*   Pages.add( *key* , *value* ) ：是一个像关联数组一样进行添加的函数
*   Pages.getByKey( *key* ) ：是一个函数，将返回与键关联的值
*   Pages.getByIndex( *index* ) ：是一个函数，将返回与索引关联的值
*   Pages.removeAll() ：是一个将删除所有键值对的函数，因此长度为零。
*   Pages.removeByKey( *key* ) : 是一个会移除对应键值对的函数
*   Pages.removeByIndex( *index* ) : 是一个会移除对应键值对的函数
*   构造函数
*   Pages.createFrom( *files* ) ：返回 Pages 对象的一个​​实例，该实例将根据上面链接中所述的 files 对象自动创建。
*   Pages.indexExists( *index* ) ：如果存在这样的索引，则返回布尔值
*   Pages.keyExists( *key* ) ：如果存在这样的键值对，则返回 bookean

最重要的特点是：

1.  每当我添加新的键值对时，它都会被附加到 Pages 对象的末尾。
2.  键值对可以通过使用 .getByKey( *key* ) 或 .getByIndex( *index* ) 的键访问，例如，第一个键值对可以通过索引 0 访问。
3.  每当删除或添加任何现有的键值对时，**都会更新长度属性并更新索引。**例如，如果有 5 个键值对并且我删除了第二个，那么现在可以使用索引 1 访问第三个键值对，依此类推。

我不需要各种功能的代码。

**我只需要在javascript中创建上述自定义对象类的骨架结构**

我阅读[了 JavaScript 对象的 Set length 属性，](https://stackoverflow.com/questions/6412589/set-length-property-of-javascript-object)并认为我需要将它作为一个函数来执行。

但是后来我看到了一些答案，这些答案暗示了有关使用 Object.create 的各种改进，例如[https://stackoverflow.com/a/6412732/80353](https://stackoverflow.com/a/6412732/80353)和[https://stackoverflow.com/a/6412869/80353](https://stackoverflow.com/a/6412869/80353)

所以我要求最好的***模板***，以便我可以在需要时添加新功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:46:04.420

这是我以前使用过的结构的准系统，我只在最新的浏览器上对此进行了测试——但是它没有使用任何会导致问题的技术。唯一可能的争用是使用 Array 对对象进行原型设计。但我不明白为什么这在旧浏览器中不起作用：

```
<script>
  "use strict";

  var ArrayLike = (function(){
    /// create a static reference to our constructor so that we can
    /// add methods to ArrayLike... if we like.
    var _static = function(){
      /// store some "private" values, and arrayify our arguments
      var _args = Array.prototype.slice.call( arguments ),
          _private = { byKey:{}, byIndex:{} }, 
          _public = this;
      /// make sure the user used the 'new' keyword.
      if ( _public instanceof _static ) {
        /// if we have arguments then push them onto ourselves
        if ( _args.length ) {
          _public.splice.apply(_public,[0,0].concat(_args));
        }
        /// Now that a new instance has been created, switch in an array 
        /// prototype ready for the next instance.
        _static.prototype = new Array();
        /// start adding our methods, bare in mind if you wish to
        /// stop any of the native array methods from working you'll 
        /// have to override them here.
        _public.add = function( key, value ){
          /// store the keys and indexes as references to themselves.
          _private.byKey[key] = _public.length;
          _private.byIndex[_public.length] = key;
          /// use the inherited push function from the array.
          _public.push( value );
        }
        /// an example function to show how get by key would work.
        _public.getByKey = function(key){
          if ( (key = _private.byKey[key]) || key === 0 ) {
            return _public[key] ? _public[key] : null;
          }
        }
        /// easy removeAll thanks to the array prototype.
        _public.removeAll = function(){
          _public.length = 0;
        }
        /// here I leave you to flesh out the methods that you 'want'.
        _public.removeByKey = function(){

        }
        /// I'll give you a clue that keeping your array index in order
        /// is going to be a manual process, so whenever you delete you
        /// will have to reindex.
        _private.reIndex = function(){

        }
      }
    }
    /// set-up the prototype as an array ready for creation
    _static.prototype = new Array();
    /// return the function that will be our constructor
    return _static;
  })();

</script> 
```

从普通构造函数的角度来看，上述内容有点奇怪，因为它不断修改其原型，这意味着以下内容无法按预期工作：

```
var a = new ArrayLike(1,2,3);
alert( a instanceof ArrayLike ); /// alerts FALSE 
```

从数组扩展的好处是非常明显的，因为您现在可以`a`像对待任何数组一样对待 - 所以您的一些工作是由核心 JS 代码为您完成的。但是，当您正在实现一个使用键的系统时，最好覆盖大多数正常的数组操作，以便您可以正确跟踪结构中正在使用的键。

无论如何希望它有所帮助，我已经让您解决重新索引数组的稍微棘手的元素，因为它应该与上述设置方式直接相关。

## 其他增强功能

关于将某些属性设置为只读，这只有在 JavaScript 1.8+ 中才能真正实现——因此它不会向后兼容旧版浏览器。`Object.defineProperty(obj, prop, descriptor)`您可以使用Felix Kling 的评论中提到的方法来实现这一点。使用它应该可以影响诸如`.length`并使它们只读之类的东西。但是，您对代码的锁定越多，它的灵活性和可扩展性就越差。

# r - 从包 geosphere 中了解 `areaPolygon()` 的输出

> ID：12635761
> 
> 赞同：3
> 
> 时间：2012-09-28T07:45:08.610
> 
> 标签：r, geosphere

从[这个问题](https://stackoverflow.com/questions/12623577/converting-area-within-a-polygon-of-coordinates-to-metres)中，我获得了一个很棒的功能`areaPolygon()`，它给了我一个坐标多边形内的区域。但是，当我尝试使用该函数时，计算似乎很奇怪：

**我首先创建一组两个点**

```
 require(fields)
 coords <- c(11.3697193956209, 47.233380520521, 11.3723606043791, 
 47.235179479479)
 coords <- matrix(coords, nrow=2, ncol=2, byrow=TRUE) 
```

**然后我检查这两者之间的距离：**

```
 rdist.earth(coords,coords,miles=FALSE)[1,2] 
```

获得：0.2827821 公里（这将是矩形的对角线）

**我继续创建一个矩形**

```
 polygon <- matrix(coords, nrow=2, ncol=2)
 polygon <- rbind(polygon, polygon)
 polygon[4,2] <- polygon[1,2]
 polygon[4,1] <- polygon[2,1]
 polygon[3,2] <- polygon[2,2]
 polygon[3,1] <- polygon[1,1]
 polygon <- rbind(polygon, polygon[1,]) 
```

看看这看起来是否不错：`plot(polygon)`

**第四步：我计算多边形内的面积。**

```
geosphere::areaPolygon(polygon)
[1] 31.99288 #from the help file I know this ought to be square metres. 
```

但是，我会预料`200*200=40000 m²`到，因为我的斜角的边是 200 x 200 米。这可以通过

```
rdist.earth(polygon,coords,miles=FALSE)

           [,1]         [,2]
 [1,] 0.0000000 2.827821e-01
 [2,] 0.2827821 9.504539e-05
 [3,] 0.2002671 1.996434e-01
 [4,] 0.1996501 2.002671e-01 
```

所以现在来回答我的问题（最后）我做错了什么？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:11:33.663

你做了一个无效的多边形！如果你用它来绘制它，`type="l"`你会看到一个蝴蝶结：

```
> plot(polygon,type="l") 
```

一半的领结将有一个负面积，另一半是正面积，所以你的结果是两半尺寸的差异。它们不会完全一样，因为地球是球形的...

您只需要在 中重新排序您的积分`polygon`。

# python - Could a C extension for multithreaded Python boost performance?

> ID：12635762
> 
> 赞同：7
> 
> 时间：2012-09-28T07:45:10.643
> 
> 标签：python, multithreading, gil

I have heard of Python's GIL problem, which states that there can only be one Python thread executing the Python bytecode at one time in a multicore machine. So a multithreaded Python program is not a good idea.

I am wondering if I can write a C extension that uses `pthread` to potentially boost the performance of my program. I'd like to create a thread in my C extension and make it runs in parallel with Python's main thread.

My assumption is that the Python main thread will do things more related to IO, while the `pthread` in my C extension will spend most of its time doing computation. The Python main thread communicates with the thread in the C extension using a queue (like a producer consumer model).

**Is there any difference between multithread with Python and C extension?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:22:06.440

要回答您的原始问题：

是的，C 扩展可以不受 GIL 的影响，*前提*是它们不会在没有 GIL 的情况下调用任何 Python API 函数。因此，如果您需要与 Python 应用程序通信，则需要获得 GIL 才能这样做。如果您不想让 C API 太脏，您可以使用`ctypes`调用 C 库（可以`pthreads`照常使用），或 Cython 以类似 Python 的语法编写您的 C 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:19:31.093

Python 解释器不会以任何方式知道 C 启动的线程，因此它们可以愉快地搅动自己的 CPU 时间。

但是我怀疑这是解决您的性能问题的正确解决方案。首先尝试将多进程与多进程模块一起使用。如果在此之后进程间 IO 过多，您可能会导致像 C 线程这样的诡计。这将使您的程序复杂一个数量级，因此请尽可能避免使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:34:24.353

如果一个线程运行 CPU 绑定，而另一个运行 IO 绑定，我看不出有问题。

IO 绑定线程将调用 IO 例程，这些例程通常在执行其工作时释放 GIL，从而有效地允许其他线程运行。

因此，请尝试“简单”解决方案，仅当它确实无法按照您想要的方式工作时才进行切换。

# file-comparison - 比较服务器上的文件？

> ID：12635763
> 
> 赞同：1
> 
> 时间：2012-09-28T07:45:14.450
> 
> 标签：file-comparison

所以我的网站被黑了，我以为我设法修复了所有文件并进行了备份。然而，黑客设法留下了某种后门，我的网站又被黑了。我的网站是用 wordpress 构建的，所以我想比较干净的 wordpress 文件和我的 wordpress 文件。我知道这在 linux 中很容易完成，但我在 windows 上，所以这可能吗？

**而且我无权访问服务器命令行或配置文件，因为我是托管的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:48:24.880

我在 Windows 上使用[KDiff3](http://kdiff3.sourceforge.net/)来比较 XML 文件。它可能适用于您的要求。

（我假设您具有 FTP 访问权限或类似权限来检索文件）

# c# - How to test the ASP.NET (with MVC 3) application after implemented the OutputCache?

> ID：12635764
> 
> 赞同：0
> 
> 时间：2012-09-28T07:45:17.397
> 
> 标签：c#, asp.net-mvc-3, performance-testing

I have implemented recently into my ASP.NET application the OutputCache.

I want to test this application by accessing 100-200 times simultaneously to see if the cache make good job.

I have installed [RedGate .NET Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/) and [ANTS Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/) to see what's happens with cache. I see that cache occupies some size in memory and page loads faster than before implementing cache (that's normal).

Can you tell me what tools I need to test my ASP.NET MVC3 application by being accessed 100-200 times simultaneously ? Something like `server stress test`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:57:44.243

如果我理解您的问题，您想对您的网站进行压力测试吗？您可以查看[Web 容量分析工具 (WCAT)](http://support.microsoft.com/kb/231282)

也看看这个网站[http://blogs.msdn.com/b/alikl/archive/2008/05/05/asp-net-performance-engineering-stress-test-your-architecture-design-and-code .aspx](http://blogs.msdn.com/b/alikl/archive/2008/05/05/asp-net-performance-engineering-stress-test-your-architecture-design-and-code.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:37:15.777

看看[Apache JMeter](http://jmeter.apache.org/)。这是一个很好的压力工具，我们用它来测试我们在 Windows Azure 上的 .Net 应用程序的性能。JMeter 是目前最流行的压力测试工具之一。

您可以编写导航到某些页面的脚本，并进行身份验证和发布帖子等。因此，您可以模拟到页面站点的 200 个连接并查看对内存使用等的影响。显然，一旦您编写了脚本，就很容易重新-run 所以它会给你一个基线以进行一致的分析。您可以保留历史日志并查看您的更改是否正在改善加载时间等。

它可以启动许多连接，然后还为您提供有关加载时间的详细性能报告。这是非常容易使用。

我有一个关于性能测试的问题[here](https://stackoverflow.com/questions/8234907/finding-web-application-average-load-times)

# python - Unbound method in python file

> ID：12635766
> 
> 赞同：0
> 
> 时间：2012-09-28T07:45:23.857
> 
> 标签：python

I've trying to figure out why my python code is giving me the following error (I read other post here, but I cannot find the issue). The error is the following:

```
"test_block/top_block.py", line 33, in __init__
    0, 0, 0, 0, 0, 1, 1, 1)
TypeError: unbound method make() must be called with my_block instance as first argument (got int instance instead)" 
```

My code is the following:

```
class top_block(grc_wxgui.top_block_gui):

    def __init__(self):
        grc_wxgui.top_block_gui.__init__(self, title="Top Block")
        _icon_path = "/usr/share/icons/hicolor/32x32/apps/gnuradio-grc.png"
        self.SetIcon(wx.Icon(_icon_path, wx.BITMAP_TYPE_ANY))

        self.samp_rate = samp_rate = 32000

        self.extras_my_block_0 = gr_extras.my_block(2, 29, 10, 0, -0.1, 0.1, -0.01,
          0, 0, 0, 0, 0, 1, 1, 1)

        self.extras_message_dumper_0 = gr_extras.message_dumper()

        self.connect((self.extras_my_block_0, 0), (self.extras_message_dumper_0, 0))

    def get_samp_rate(self):
        return self.samp_rate

    def set_samp_rate(self, samp_rate):
        self.samp_rate = samp_rate

if __name__ == '__main__':
  parser = OptionParser(option_class=eng_option, usage="%prog: [options]")
  (options, args) = parser.parse_args()
  tb = top_block()
  tb.Run(True) 
```

Thanks for your help,

Jose

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:23:12.980

此代码重现您的错误：

```
class gr_extras(object):
    def my_block(self, *args):
        return args

class top_block(object):
    def __init__(self):
        gr_extras.my_block(1, 2)

v = top_block() 
```

执行时：

```
TypeError: unbound method my_block() must be called with gr_extras
    instance as first argument (got int instance instead) 
```

您在没有实例化的情况下在其他类中调用方法。这有效：

```
class top_block(object):
    def __init__(self):
        gr = gr_extras()
        gr.my_block(1, 2) 
```

# c# - "Promote" generic type to Nullable in C#?

> ID：12635774
> 
> 赞同：8
> 
> 时间：2012-09-28T07:46:09.207
> 
> 标签：c#, generics, metaprogramming, nullable, typetraits

Given a generic type `T` in C#, I wonder how to acquire type `Q`, which is equal to `T?` for non-nullable `T`, and `T` for already nullable `T`.

The question arose from real code. I want to unify access to parameters passed through query string in my ASP.NET application. And I want to specify a default value of the same type, but ensure `null` can be passed as a default value.

```
public static T FetchValue<T>(
   string name, 
   <T? for non-nullable, T otherwise> default_value = null)  // How to write this?
{
  var page = HttpContext.Current.Handler as Page;

  string str = page.Request.QueryString[name];

  if (str == null)
  {
    if (default_value == null)
    {
      throw new HttpRequestValidationException("A " + name + " must be specified.");
    }
    else
    {
      return default_value;
    }
  }

  return (T)Convert.ChangeType(str, typeof(T));
} 
```

Currently I'm forced having two overloads of the `FetchValue` - one without default value, and one with it:

```
public static T FetchValue<T>(string name);
public static T FetchValue<T>(string name, T default_value); 
```

It works fine, but I wonder whether it is possible to merge both functions like this.

In C++ I would use type-traits, like `PromoteNullable<T>::type` with two specializations of `PromoteNullable` for both nullable and non-nullable types. But what about C#?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:22:11.167

没有直接回答提出的问题，但我会写这个：

```
 public static T FetchValue<T>(string name)
    {
        T value;
        if (TryFetchValue(name, out value))
            return value;
        throw new HttpRequestValidationException("A " + name + " must be specified.");
    }

    public static T FetchValue<T>(string name, T default_value)
    {
        T value;
        if (TryFetchValue(name, out value))
            return value;
        return default_value;
    }

    private static bool TryFetchValue<T>(
         string name,
         out T value)
    {
        var page = HttpContext.Current.Handler as Page;

        string str = page.Request.QueryString[name];

        if (str == null)
        {
            value = default(T);
            return false;
        }

        value = (T)Convert.ChangeType(str, typeof(T));
        return true;
    } 
```

所以大部分代码只存在一次——如果它选择的话，你甚至现在实际上可以选择调用代码`null`作为默认值。

* * *

即使您可以创建所需的参数声明，这行仍然是一个问题：

```
return default_value; 
```

如果结果`default_value`是 a`T?`而不是 a `T`，那么上面的代码就不起作用了。即使您进行演员表：

```
return (T)default_value; 
```

还有一个问题——要转换 from `T?`to `T`，编译器实际上必须插入一个调用来获取`Value`可为空的属性。`default_value`但是，如果类型只是，那么该调用将无效`T`。

在 C# 泛型中，编译器必须为方法创建一段 IL。没有办法插入一段*可以*访问的可选代码`Value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:14:07.480

有我的例子：

```
//Page extension
static class PageExtensions
{
    private static T FetchValue<T>(this Page page, string name, object defaultValue)
    {
        string str = page.Request.QueryString[name];
        if (string.IsNullOrEmpty(str))
        {
            if (defaultValue != null)
                return (T)defaultValue;

            throw new HttpRequestValidationException("A " + name + " must be specified.");
        }

        //not the best way
        return (T)Convert.ChangeType(str, typeof(T));
    }

    public static T FetchValueFromCurrentPage<T>(string name, T defaultValue)
    { 
      var page = HttpContext.Current.Handler as Page;
      if(page == null)
        throw new InvalidOperationException("Current handler is not Page");
      return page.FetchValue<T>(name, defaultValue);
    }

    public static T FetchValueFromCurrentPage<T>(string name) where T : class
    {   
        return FetchValueFromCurrentPage(name, (T)null);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T08:47:43.190

由于您的返回类型是`T`，`T`并且是值类型，因此它不能为空。所以你总是必须传递一个可为空的类型，因为你想要一个空返回，对吧？

试试这个，它允许你传递一个可以为空的值类型（`i`）和一个普通的引用类型（`o`）：

```
static void Main(string[] args)
{
    int? i = 5;
    object x = new object();

    object o = FetchValue("x", i);
    o = FetchValue("x", x);
}

private static T? FetchValue<T>(string name, T? p) where T : struct
{
    T? result = (T?)FetchValue(name, (object)p);
    return result;
}

private static T FetchValue<T>(string name,
    T default_value = default (T)) // default(T) where T is a reference type will always be null!
    where T : class
{
    // do whatever you want
    var page = HttpContext.Current.Handler as Page;

    string str = page.Request.QueryString[name];

    if (str == null)
    {
        if (default_value == null)
        {
            throw new HttpRequestValidationException("A " + name + " must be specified.");
        }
        else
        {
            return default_value;
        }
    }

    return (T)Convert.ChangeType(str, typeof(T));
} 
```

请记住，这都是 foo 语法，因为`object`无论如何你最终都会得到 T 的类型。然而，这是必需的，因为只有`object`'s 可以为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:27:50.727

您可以指定*类*约束以确保调用者传入引用类型（可以为空）：

```
public static T FetchValue<T>(
   string name, 
   T default_value = null) where T : class //!
{
  var page = HttpContext.Current.Handler as Page;

  string str = page.Request.QueryString[name];

  if (str == null)
  {
    if (default_value == null)
    {
      throw new HttpRequestValidationException("A " + name + " must be specified.");
    }
    else
    {
      return default_value;
    }
  }

  return (T)Convert.ChangeType(str, typeof(T));
} 
```

在这种情况下，您将转换 T 的责任委托给 T？必要时给呼叫者，这无论如何都很好：他可能知道得更好！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T08:16:10.173

尝试以下操作：

```
private static T FetchValue<T>(string name, Nullable<T> default_value = null) where T : struct
{
    var page = HttpContext.Current.Handler as Page;

    string str = page.Request.QueryString[name];

    if (str == null)
    {
        if (default_value == null)
        {
            throw new Exception("A " + name + " must be specified.");
        }
        else
        {
            return (T)Convert.ChangeType(default_value, typeof(T));
        }
    }

    return default(T);
} 
```

可空类型必须是值类型，因此您必须将约束设置为`struct`。如果有一个值，则您将类型声明`T`为并转换类型，否则您返回的类型在这种情况下为空。调用此方法时，您还必须像这样显式设置类型：`Nullable``default``T`

```
int? val = FetchValue<int>("name"); 
```

**返回一个字符串**

由于 a`string`是可为空的引用类型，因此您正确地说它不能与此函数一起使用。在那种情况下，我会创建一个新的`struct`，并且对于字符串使用它来代替。

```
struct NullableString
{
    public string Value;
} 
```

像这样调用函数。

```
var val = FetchValue<NullableString>("blah", new NullableString() { Value = "default" }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T08:49:03.860

你可以用这种简单的方式做你想做的事：

```
public static T FetchValue<T>(string name, T defaultValue = null) where T : class { }
public static T? FetchValue<T>(string name, T? defaultValue = null) where T : struct { } 
```

# c# - Some properties/enums are ignored when using code first migration

> ID：12635775
> 
> 赞同：1
> 
> 时间：2012-09-28T07:46:09.420
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

I'd like to add some properties to a entity to a model, but that property doesn't make any changes in the database nor in a migration script.

When I add this:

```
 public test test1 { get; set; }

    public enum test { asasas, asdasdasd }; 
```

I get an empty migration

```
 public override void Up()
    {
    }

    public override void Down()
    {
    } 
```

But when i add:

```
 public String test1 { get; set; }

    public enum test { asasas, asdasdasd }; 
```

I get the expected migration

```
 public override void Up()
    {
        AddColumn("dbo.SpiderBatches", "test1", c => c.String());
    }

    public override void Down()
    {
        DropColumn("dbo.SpiderBatches", "test1");
    } 
```

Because the second change does make a correct migration I can assume that the class/context are correctly setup and are working. So the error must be in the enum.

Can anyone help me further?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:25:26.720

仅当您面向 .NET 4.5 时才支持枚举，4.0 不支持它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T13:44:59.883

上面对于 .net 4.5 的答案很好，但是如果您需要像我一样支持 .net 4.0，那么您可以将要在模型上表示的枚举属性包含为 int。

两件事情 -

1，按照下面对您的值进行硬编码，以避免在 .cs 文件中更改它们的顺序而破坏您的参照完整性

```
public enum MyEnum
{
    FirstProperty = 1,
    AskUser = 2,
    IgnoreLine = 3,
    ImportPrice = 4,
    Undecided = 5
} 
```

2 - 当您保存回数据库时，您需要在保存之前将枚举转换为 int，例如

```
MyEntity.PsuedoEnumProperty = (int)FirstProperty 
```

# c++ - Strange error for copying data

> ID：12635779
> 
> 赞同：0
> 
> 时间：2012-09-28T07:46:21.980
> 
> 标签：c++, opencv, matrix, copy

I am trying to read video frames in OpenCV, then copy the data into my another C++ code to perform something else. My code is as follows:

```
cv::Mat capturedFrame; 
int newData[600][800];
std::cout<<"Debug1 " << std::endl;
memcpy((char*)newData, (char*)capturedFrame.data, 600*800*sizeof(int) );
std::cout<<"Debug2 " << std::endl;
mycode.setData ( newData );
std::cout<<"Debug3 " << std::endl; 
```

Then the class "setData" was defined as follows:

```
char data [600][800];
void mycode::setData ( char newData[600][800] )
{
  for ( int m=0; m < 600; m ++ )
  {
      for ( int n = 0; n < 800; n ++ )
      {
          data[i][j] = newData[i][j]; 
      }
  }
} 
```

But the code stops when it comes to the line:

```
 mycode.setData ( newData ); 
```

What confuses me is, if I delete this code, then I can see "Debug1" to "Debug3" on the screen, which is normal. But if I use this code, the program stops even without printing out "Debug1" and "Debug2" on the screen. This is really strange. I also tried to comment out all the lines in the "setData" class to make it be an empty class, but the error still is the same. So I believe it was not about the "setData" class. I also know that the "capturedFrame.data" was correct, because I performed some other filters on it, and the result was good. Can someone explain the error here?

Edit:

I used a debugger, but there was no error message but the program just stopped responding. Also, I changed the data type into "char".

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:57:17.500

这个数组：

```
int newData[600][800]; 
```

大于 1 MB。如果这是一个局部变量，那么您可能会破坏堆栈。

数组可能也是`data`如此，但由于您的代码片段的上下文很少，因此很难知道什么是静态分配的还是自动分配的。

我认为您应该考虑动态分配这些大型数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:55:37.297

如果你注释掉

```
mycode.setData ( newData ); 
```

编译优化器可能知道`newData`没有使用，所以

```
memcpy((int*)newData, (int*)capturedFrame.data, 600*800*sizeof(int) ); 
```

也可能被消除，因此它可能没有被执行。

问题可能存在于`memcpy`方法中，甚至其他地方。

根据您提供的有限信息，很难调查真正的原因，但我建议您可以深入研究其他代码。

# jquery - IE中的代码行为不端

> ID：12635780
> 
> 赞同：0
> 
> 时间：2012-09-28T07:46:24.637
> 
> 标签：jquery, html, css

我必须在我的网页中创建标签，为此我使用了此链接中的代码： [http ://www.mkyong.com/jquery/how-to-use-css-and-jquery-to-hide-and-显示标签内容/](http://www.mkyong.com/jquery/how-to-use-css-and-jquery-to-hide-and-show-tab-content/)

现在这段代码在 Firefox 和 Chrome 中运行良好，但在 IE8 中无法正常运行。它显示两个分区中的数据，而不是显示所选选项卡的数据并隐藏另一个。我在下面制作了一个基于粗略文本的示例。希望能帮助到你。

```
Tab1 | Tab2 |
--------------------------------------
            Page Heading

Content of tab 1

Content of tab 2

-------------------------------------- 
```

希望收到您的宝贵意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:49:40.333

好吧，这一切都解决了。我只需要用 div 标签替换我的 HTML 代码中的部分标签。这是因为 HTML 4 不支持部分标签。

# iphone - 设置框架（大小） UITableViewController

> ID：12635784
> 
> 赞同：-2
> 
> 时间：2012-09-28T07:46:45.823
> 
> 标签：iphone, objective-c, xcode, ios4

我的主屏幕有：（ `UITabViewController`内容 3 UIViewController）。每个`UIViewController`都有一个 UITableViewController。现在我想设置框架`UITableViewController`。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:51:30.197

无法设置 UITableViewController 的框架...如果您想在 UIViewController 中放置一个表格，请在您的 UIViewController 中添加一个 tableView.. 然后您可以设置您的 tableView 的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:54:05.623

由于没有实例`UIViewController`具有框架属性，因此您的问题在技术上毫无意义。请花更多时间阅读 Apple 的文档，您所需要的一切都在那里并且尽早开始。注意`UIView`和`UIViewController`。[这](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)是一个很好的起点。我们都必须从那里开始。

# c# - 在文档库中自定义或捕获 SharePoint 功能区操作“新建文档”

> ID：12635787
> 
> 赞同：2
> 
> 时间：2012-09-28T07:47:02.593
> 
> 标签：c#, events, sharepoint, sharepoint-2010, ribbon

我想知道当您在文档库中创建新文档时，是否可以在功能区中捕获或自定义“新建文档”操作。

原因如下：我想在文档在 Word 中打开之前将一些数据填充到文档中（实际上是通过属性）。这样就为用户填写了一些默认数据。填写什么数据取决于站点名称。这将代表一个项目编号，用于从列表或数据库中获取特定数据。

我想出了一些其他的解决方案，基本上是填充数据，但在文档过程的另一个点：

1.  使用工作流和通过 InfoPath 填写数据的组合。这适用于只有 1 种内容类型（默认）的库。一旦我们想要使用多种内容类型，就几乎不可能获得站点名称，因为 InfoPath 无法使用函数 SPContext.Current.Web.Title。
2.  为了解决内容类型问题，我使用了事件接收器“ItemAdding”。这样，在添加文档时会添加数据。这样做的缺点是，如果用户第二次打开它，数据只会在文档中可见，这对用户来说并不友好。

因此，为了优化用户体验和可用性，我想在 Word 文档打开之前添加数据。但有可能吗？

我正在使用 SharePoint 2010 Server、Office 2010 Professional 和 Visual Studio 2010 Ultimate。

提前致谢， Oxillery

# python - 如何将文本转换为音频文件并通过 python/django 在浏览器中播放？

> ID：12635791
> 
> 赞同：2
> 
> 时间：2012-09-28T07:47:07.017
> 
> 标签：python, django, django-views, text-to-speech

如何将文本转换为可以通过 python/django 视图在浏览器中播放的音频文件？如何在 python 中进行文本到语音的转换？我想将字符串转换为 .wav 文件，该文件将通过 python/django 视图在浏览器中播放。

例如：

```
text = "how are you?"
convert text to audio file (text.wav)
open text.wav file & play in browser via django view. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:47:31.753

正如[Tichodroma](https://stackoverflow.com/users/647772/tichodroma)所说，在再次提问之前，您应该始终查看是否有人已经问过您的问题。谷歌搜索`python text to speech`返回[http://code.google.com/p/pyspeech/](http://code.google.com/p/pyspeech/)和[How to make Python speak](https://stackoverflow.com/questions/1614059/how-tomake-python-speak)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:21:03.980

我试图按照以下方式做，它对我有用。谢谢。

```
#Write text to file
text_file_path = '/user/share/project/test.txt'
audio_file_path = '/user/share/project/test.wav'
text_file = open(text_file_path, "w")
text_file.write('How are you?')
text_file.close()

#Convert file
conv = 'flite -f "%s" -o "%s"' % (text_file_path, audio_file_path)
response = commands.getoutput(conv)

if os.path.isfile(audio_file_path):
    response = HttpResponse()
    f = open(audio_file_path, 'rb')
    response['Content-Type'] = 'audio/x-wav'
    response.write(f.read())
    f.close()
    return response 
```

# php - 在网页执行之前创建一个强制选择弹出窗口

> ID：12635792
> 
> 赞同：2
> 
> 时间：2012-09-28T07:47:08.437
> 
> 标签：php, javascript, html

他们的方式是，当打开特定网页时会出现一个弹出窗口，直到我从该弹出窗口中选择一些值，我才能在后台网页中做蚂蚁的事情，并且该网页的执行会暂停，直到弹出是他们的。我找到了这个 ：

```
win2 = window.open("popup_choose_template.html", "Window2", "width=310,height=600,scrollbars=yes"); 
```

但它就像另一个可以关闭或忽略的网页。
什么应该是更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:51:02.597

您可以将[jQueryUI 与 Modal Dialog 一起](http://jqueryui.com/demos/dialog/#modal-confirmation)使用：

例如：

```
$( "#dialog-confirm" ).dialog({
    height:140,
    modal: true,
    buttons: {
        "Ok": function() {
            $( this ).dialog( "close" );
        },
        Cancel: function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

它禁用所有背景页面并强制用户做某事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:51:11.927

最简单的方法可能是使用 JQuery UI 并使用 Dialog 控件并将模式设置为 true。这将显示一个背景变暗并禁用的弹出窗口。

[http://jqueryui.com/demos/dialog/#option-modal](http://jqueryui.com/demos/dialog/#option-modal)

否则，如果你想手动完成，你添加一个 100% 宽度和高度的 div，绝对定位为黑色背景色，部分透明度和比页面其余部分更高的 z-index。将此 div 附加到正文，并确保您的弹出窗口具有比停电 div 更高的 z-index

**编辑**

你需要一个固定位置的 div 不是绝对的......像这样：

```
<div id="blackout" style="position:fixed; width:100%; height:100%; z-index:100; background-color:black; opacity:0.5;"></div> 
```

这假设您所有的普通页面元素的 z-index 都低于 100，并且您为弹出窗口提供了高于 100 的 z-index。使用 js 弹出功能附加到正文，然后在满意的选择后删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:51:23.143

您可以使用模态面板之类的东西。

像[jQuery 对话框](http://jqueryui.com/demos/dialog/#modal)

# go - Goroutine 睡眠和代码中的死锁。如何解决？

> ID：12635793
> 
> 赞同：1
> 
> 时间：2012-09-28T07:47:08.207
> 
> 标签：go

[http://play.golang.org/p/r92-KtQEGl](http://play.golang.org/p/r92-KtQEGl)

我正在尝试执行此代码。它会引发死锁错误。

我错过了什么？

```
package main

import "tour/tree"
import "fmt"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int){
    var temp chan int
    ch <- t.Value
    if t.Left!=nil{go Walk(t.Left,temp)}
    if t.Right!=nil{go Walk(t.Right,temp)}
    for i := range temp{
        ch <- i
    }
    close(ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:57:32.007

所以我通过向 Walk 函数发送一个标志来做到这一点。这样它就知道何时可以关闭通道。我也认为以正确的顺序左节点、值、右节点遍历树很重要。

```
package main

import (
  "fmt"
  "tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, c chan int, d bool) {
  if t.Left != nil {
    Walk(t.Left, c, false)
  } 
  c <- t.Value

  if t.Right != nil {
    Walk(t.Right, c, false)
  }
  if d {
    close(c)
  }
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
  ch1 := make(chan int)
  ch2 := make(chan int)
  go Walk(t1, ch1, true)
  go Walk(t2, ch2, true)
  for {
    v1, ok1 := <-ch1
    v2, ok2 := <-ch2

    if v1 != v2 {
      return false
    }
    if ok1 != ok2 {
      return false
    } 
    if !ok1 && !ok2 {
      return true
    }
  }
  return false
}
func main() {
  ch := make(chan int)
  go Walk(tree.New(1), ch, true)

  for i := range ch {
    fmt.Println(i)
  } 

  test1 := Same(tree.New(1), tree.New(1))
  test2 := Same(tree.New(1), tree.New(2))

  fmt.Println(test1, test2)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:55:25.697

您至少需要初始化您的频道（如果频道为零，则范围将永远阻塞）

```
 var temp chan int = make(chan int)
  var ch chan int = make(chan int) 
```

见[http://play.golang.org/p/Gh8MZlyd3B](http://play.golang.org/p/Gh8MZlyd3B)（仍然死锁但至少显示结果）

这个版本，使用*两个*临时通道，不会死锁：[http ://play.golang.org/p/KsnmKTgZ83](http://play.golang.org/p/KsnmKTgZ83)

```
package main

import "tour/tree"
import "fmt"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    var temp1 chan int = make(chan int)
    var temp2 chan int = make(chan int)
    ch <- t.Value
    if t.Left != nil {
        go Walk(t.Left, temp1)
    }
    if t.Right != nil {
        go Walk(t.Right, temp2)
    }
    if t.Left != nil {
        for i := range temp1 {
            ch <- i
        }
    }
    if t.Right != nil {
        for i := range temp2 {
            ch <- i
        }
    }
    close(ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool

func main() {
    var ch chan int = make(chan int)
    go Walk(tree.New(1), ch)
    for i := range ch {
        fmt.Println(i)
    }
} 
```

# android - 在动态列表视图中添加图像

> ID：12635795
> 
> 赞同：1
> 
> 时间：2012-09-28T07:47:15.120
> 
> 标签：android, android-listview, android-imageview

我将以下代码用于动态 ListView。我需要在 ListView 的文本中添加一些图像

```
ListView listView = (ListView) menu.findViewById(R.id.list);
initListView(this, listView, "", 5, android.R.layout.simple_list_item_1);

public  void initListView(Context context, ListView listView, String prefix, int numItems, int layout) {
    // By using setAdpater method in listview we an add string array in list.
    String[] arr ={"A","B","C","D","E"};

    listView.setAdapter(new ArrayAdapter<String>(context, layout, arr));
    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        }
    });
} 
```

请让我知道如何在我的代码中添加图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:54:54.720

你可以使用这种适配器：

```
public class CustomAdapter extends BaseAdapter{

String[] arr ={"A","B","C","D","E"};
Context context;

public CustomAdapter(Context context){
    this.context = context;
}

@Override
public int getCount() {
    return arr.length;
}

@Override
public String getItem(int arg0) {
    return arr[arg0];
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
    LinearLayout layout = new LinearLayout(context);
    layout.setOrientation(LinearLayout.HORIZONTAL);

    TextView text = new TextView(context);
    text.setText(getItem(arg0));

    ImageView image = new ImageView(context);
    image.setImageResource(android.R.drawable.ic_menu_gallery);
    layout.addView(image);
    layout.addView(text);

    return layout;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:53:51.253

通过使用自定义适配器，您可以将图像添加到列表视图项目中查看本教程它将帮助您
1.[在 Android 中使用自定义 ListAdapter 的 ListView](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

2\. [Android 自定义 ListView 带图片和文字](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T07:57:21.540

正如已经建议的那样，您需要使用其他适配器，例如`SimpleCursorAdapter`

如果您还想从 url 加载图像，则包含图像的列表可能会非常复杂

我强烈建议你看看这段代码，它完全实现了`ListView`带有 LazyLoading 的图像

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T14:20:06.097

这是 LazyList 项目的修改版本，添加了很多内容：[https](https://github.com/nostra13/Android-Universal-Image-Loader) ://github.com/nostra13/Android-Universal-Image-Loader我在一些项目中使用它，它非常好！

# extjs4 - ExtJs3.4.0 到 ExtJs4.1.1 升级问题

> ID：12635798
> 
> 赞同：0
> 
> 时间：2012-09-28T07:47:25.847
> 
> 标签：extjs4

ExtJS4：我在将我的应用程序 ExtJs 版本从 3.4.0 升级到 4.1.1a 时遇到问题。

我的 3.4.0 版本代码：

```
 this.jsonStore = new Ext.data.JsonStore({
       proxy    : new Ext.data.HttpProxy({
        url: 'rs/environments',
        disableCaching: true
        }),
    restful : true,
    storeId : 'Environments',
    idProperty: 'env',
    fields  : [
         'ConnectionName', 'Type'
    ]
});

this.colmodel = new Ext.grid.ColumnModel({
    defaults: {
        align: 'center'
    },
    columns: [{
                    header: Accero.Locale.text.adminlogin.connectionsHeading,
                    width   : 140,
                    dataIndex: 'ConnectionName'
            },
            {
                    header: Accero.Locale.text.adminlogin.connectionTypeHeader,
                    width   : 120,
                    dataIndex: 'Type'
            }]
});

config = Ext.apply({
    enableHdMenu: false,
    border      : true,
    stripeRows  : true,
    store       : this.jsonStore,
    view        : new Ext.grid.GridView(),
    header      : false,
    colModel    : this.colmodel,
    sm          : new Ext.grid.RowSelectionModel({singleSelect: true}),
    loadMask: {
            msg: Accero.Locale.text.adminlogin.loadingmask
            }
}, config); 
```

我进行了以下更改以使应用程序与 ExtJs4.1.1 一起工作：

```
var sm = new Ext.selection.CheckboxModel( { 
        listeners:{ 
            selectionchange: function(selectionModel, selected, options){ 
                // Must refresh the view after every selection 
                myGrid.getView().refresh(); 
                // other code for this listener 
            } 
        } 
    }); 

    var getSelectedSumFn = function(column){ 
        return function(){ 
            var records = myGrid.getSelectionModel().getSelection(), 
            result  = 0; 
            Ext.each(records, function(record){ 
                result += record.get(column) * 1; 
            }); 
            return result; 
        }; 
    } 

    var config = Ext.create('Ext.grid.Panel', { 
        autoScroll:true, 
        features: [{ 
            ftype: 'summary' 
        }], 
        store: this.jsonStore, 
        defaults: {               // defaults are applied to items, not the container 
            sortable:true 
        }, 
        selModel: sm, 
        columns: [ 
            {header: Accero.Locale.text.adminlogin.connectionsHeading, width: 140, dataIndex: 'ConnectionName'}, 
            {header: Accero.Locale.text.adminlogin.connectionTypeHeader, width: 120, dataIndex: 'Type'} 
        ], 
        loadMask: {
            msg: Accero.Locale.text.adminlogin.loadingmask
            },
        viewConfig: { 
            stripeRows: true 
        } 
    }, config); 
```

通过这些更改，我在本地文件“ext-override.js”中收到错误消息，提示“this.el is not defined”。

调试代码发现，在当前对象this中，没有el对象。

ext-override.js 代码：

```
(function() {
    var originalInitValue = Ext.form.TextField.prototype.initValue;
    Ext.override(Ext.form.TextField, { 
            initValue: function() {
                originalInitValue.apply( this, arguments );
                if (!isNaN(this.maxLength) && (this.maxLength *1) > 0 && (this.maxLength != Number.MAX_VALUE)) {
                    this.el.dom.maxLength = this.maxLength *1;
                }
            }
        }
    );
})(); 
```

请建议我哪里出错了？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:17:24.263

说真的，使用更多的惰性初始化！你的代码是一堆对象，都是非结构化的。

首先，您可以使用类似的方法更轻松地覆盖和使用被覆盖的方法（从 4.1 开始）

```
Ext.override('My.Override.for.TextField', {
  override : 'Ext.form.TextField',
  initValue: function() {
    this.callOverridden(arguments);
    if (!isNaN(this.maxLength) && (this.maxLength *1) > 0 && (this.maxLength != Number.MAX_VALUE)) {
      this.el.dom.maxLength = this.maxLength *1;
    }
  }
}); 
```

**但是：**方法*initValue*在*initField*（和 this 在*initComponent*）中被调用，因此您无法引用*this.me*因为组件实际上没有（完全）呈现。

所以，这应该有帮助（未经测试）：

```
Ext.override('My.Override.for.TextField', {
  override : 'Ext.form.TextField',
  afterRender: function() {
    this.callOverridden(arguments);
    if (!isNaN(this.maxLength) && (this.maxLength *1) > 0 && (this.maxLength != Number.MAX_VALUE)) {
      this.el.dom.maxLength = this.maxLength *1;
    }
  }
}); 
```

但我**强烈建议不要**在覆盖中使用这些东西。制作可以提高代码可读性的专用组件。

# c++ - 挑战时间的倒数

> ID：12635814
> 
> 赞同：-4
> 
> 时间：2012-09-28T07:48:27.810
> 
> 标签：c++, inverse

我被分配创建一个程序的逆我编写了一个程序，当我输入小时分钟和秒（例如）1hr28m42s=5322seconds 时，它给了我总秒数 - 现在我需要这样做，以便当我输入在几秒钟内它告诉我时间，(ex)9999seconds=2h46m39s

我试图用谷歌搜索数字的倒数，但是很多结果只是提出了点或矩阵的倒数，我尝试使用标签倒数在 stackoverflow 上进行搜索，但我不知道如果你们看到了我这样做是否正确问题已经问了对不起，请重定向我！

到目前为止，我只为第二次覆盖分配了变量，而不是分钟和小时，但即使这样也不好，我可以发布我的其他代码，以便我第一次询问将时间转换为秒（如果有的话）

如何在某个点限制整数，以便之后重置？（示例）如果 x 超过 60，它会回到 1？多谢你们

到目前为止的代码：

```
//Assigned variables to distinguish time
int second = 1;
int minute = second + 59;
int hour = minute * 60;

int x; // x tells you the time

//Enters the seconds for conversion
System.out.println ("Enter the seconds to be converted: ");
second = scan.nextInt();

//This print tells you the above information in terms 
//of total seconds capping off at 60
x = second + (second /60) + (second/60/60);
System.out.println ("The total time in seconds is " +x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:00:09.180

您想以不同的方式处理它（至少使用大多数编程语言）。

您已经知道，从 2 小时 12 分 5 秒开始，您需要 2 小时的秒数，加上 12 分钟的秒数，然后加上最后的 5 秒。

相反，你这样做。

你从 7925 秒开始。

1.  检查此间隔（2 小时）适合多少整小时。
2.  计算剩余的秒数（725）。
3.  从剩余的秒数中，检查有多少整分钟适合此间隔 (12)。
4.  计算剩余秒数 (5)。

现在你完成了，还有 2 小时 12 分 5 秒。

# android - 什么是 Android 中的 BIOS

> ID：12635820
> 
> 赞同：11
> 
> 时间：2012-09-28T07:48:50.717
> 
> 标签：android, bios

在 PC 机器中，我们有 BIOS 来识别音频、CPU、HDD 等硬件，但在 Android 设备中，什么是 BIOS 的替代品，因为我们只有 Kernel、ROM 和 ClockWorkMod。

那么 BIOS 是嵌入在内核中的，还是其他的？

# html - 用 div 做一个圆圈的替代方法

> ID：12635825
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:49:41.850
> 
> 标签：html, css

我有一个使用 css 3 的 div，我正在放置一个圆圈，但是当我放置对象时，它超出了圆圈，因为 div 仍然存在并且它是矩形的。

我可以用一些东西代替 div 并制作圆圈吗？我的目标是我需要一个圆圈，当我放置物体时，它不应该移出圆圈。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:59:26.980

没有使元素圆形的实际方法。您可以使用众所周知的“技巧”使其**看起来是圆形的。**`border-radius`

要创建文本/内容`div`仅在圆圈边界内的效果，您可以确保它填充在圆圈中最大的正方形内，使用`padding`. 这是一个视觉插图：

![圆圈中最大的正方形](../Images/acc2006df9b187364650f6139a077fb1.png)

这是一个演示：[小链接](http://jsfiddle.net/glee/WaTHz/)。

HTML：

```
<div>
   Glee is awesome! Glee!
</div> 
```

CSS：

```
div {
    border: 1px solid black;
    -webkit-border-radius: 50px;
    border-radius: 50px;
    padding: 15px;
    height: 70px;
    width: 70px;
    overflow: hidden;
} 
```

**编辑：**对于图像，您有两种情况：

*   你希望`div`有一个圆形的背景。在这种情况下，请使用该`background-clip: padding-box;`属性（您需要供应商前缀的版本才能使用）。这是一个演示：[小链接](http://jsfiddle.net/glee/3FSqs/)。

*   您的内部有一个`img`标签`div`- 您可以使用先前的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:54:14.453

如果您创建一个边界半径等于它的边的 div，那么您应该拥有您正在寻找的东西。

[为兼容 CSS3 的浏览器创建圆形 div](http://anvilstudios.co.za/blog/css/creating-circular-for-css3-compatible-browsers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:56:11.900

在 HTML5 中有一个叫做 canvas 的元素。它可用于绘制、使用 javascript，因此也可用于动画。如果您只想画画，这可能会对您有所帮助。否则，您可以使用 css 中的 z-index 属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T07:59:17.493

创建一个 div 并给它边界半径

```
 width: 230px;
   height: 230px;
   border-radius: 165px;
   -webkit-border-radius: 165px;
   -moz-border-radius: 165px; 
```

# sqlite - sqlite数据库的远程存储

> ID：12635829
> 
> 赞同：1
> 
> 时间：2012-09-28T07:49:52.507
> 
> 标签：sqlite, remote-access, cloud-hosting

我想将我的`SQLite`数据库上传到某个远程存储，以便以编程方式从各种计算机和移动设备访问我的数据库。

有没有一种解决方案可以实现安全的解决方案（数据不会被盗），具有良好的信息隐私和一些针对各种语言的编程接口？（例如，Android 中的 Python、C、Java 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:59:50.687

SQLite 是一个嵌入式数据库，它必须存储在客户端应用程序可访问的文件系统上。SQLite 不支持多个并发客户端、远程访问、访问控制或加密（本机）。您列出的要求由*更*传统的数据库服务器（如 MySQL 或 PostgreSQL）更好地满足。您可以轻松导出 SQLite 数据并将其导入这些数据库之一。

如果您不喜欢使用 SQLite，您可以尝试将数据库存储在共享的远程文件系统上，例如 Dropbox。您仍然需要担心并发访问，并且会失去使用 SQLite 的许多速度优势，但可以从多台机器访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:37:09.803

SQLite 有一个[加密扩展（SEE）](http://www.hwaci.com/sw/sqlite/see.html)。

> SQLite 加密扩展 (SEE) 是 SQLite 公共域版本的附加组件，它允许应用程序读取和写入加密的数据库文件。

它是一个商业产品，而不是像 SQLite 那样的公共领域。

# wordpress - 带有参数的wordpress页面中的掩码url

> ID：12635831
> 
> 赞同：0
> 
> 时间：2012-09-28T07:50:06.250
> 
> 标签：wordpress, url, mask, params

我正在运行一个 wordpress 网站。我的数据库中还有一个自定义表，其中包含歌曲和作者列表以及其他信息。

我创建了一个自定义模板，该模板调用一个函数来显示记录的详细信息，只需传递记录的 id。

所以我的 wordpress 网址可能是：

```
mywordpress.xxx/my-custom-page/?id=120 
```

它就像一个魅力。

现在我想以类似的方式更改网址

```
mywordpress.xxx/my-custom-page/title-of-mysong 
```

有什么方法可以在页面中传递参数并屏蔽 url？干杯

# delphi - Delphi 显示客户端数据集打开的进度

> ID：12635838
> 
> 赞同：1
> 
> 时间：2012-09-28T07:51:05.570
> 
> 标签：delphi, progress-bar

我当前的代码

```
 Screen.Cursor := crSQLWait;
   ProgressDlg := TProgressDlg.Create(Application);
   try
      ProgressDlg.ProgressLabel.Caption := 'Loading data. Please wait...';
      ProgressDlg.Show;
      Application.ProcessMessages;
      if MainCDS.RemoteServer <> nil then
      begin
         MainCDS.Active := false;
         MainCDS.Active := true; 
      end;
   finally
      FreeAndNil(ProgressDlg);
      Screen.Cursor := crDefault;
   end; 
```

如何在 MainCDS 打开时移动 ProgressDlg 上的选框进度条，因为现在 MainsCDS 打开时进度条被冻结。希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:10:59.813

您需要在不同的线程中运行数据库访问和进度对话框。这是唯一的选择，因为数据库访问代码是同步的，没有回调。好吧，我假设您的数据库层不提供可用于保持 UI 活动的常规回调。是这样吗？

如果您不能将数据库代码放在后台线程中，那么您就处于绑定状态。进度对话框的 GUI 代码希望位于主线程中。如果将其移至后台线程，则无法使用 VCL，因为它与主 GUI 线程相关联。因此，您可能需要求助于原始 Win32 API 调用。

# jquery - jQuery Flowslider，几个问题

> ID：12635846
> 
> 赞同：0
> 
> 时间：2012-09-28T07:51:41.567
> 
> 标签：jquery, slider, flow

我在搜索适用于桌面和触摸设备的 jquery 滚动脚本时遇到了 Flow Slider。这真的很棒，但我有几个问题。

首先，我需要脚本能够拖动和触摸——我想我做得对——然后我需要从 div 的开头而不是从默认位置（中心）开始。

其次，当我单击图像并尝试滚动时，它会选择所有图像并且不拖动而只是在悬停时滚动（流滑块的默认功能）。如果我在图像空间内单击它可以工作，但这是不对的。这是脚本的演示，以了解我的意思：

[http://www.cre8.gr/gallery/drag.html](http://www.cre8.gr/gallery/drag.html)

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:57:44.280

没关系使用另一个系统，因为不存在对这个插件的支持！

# java - Java：字符串引用获得意外输出

> ID：12635847
> 
> 赞同：0
> 
> 时间：2012-09-28T07:51:42.017
> 
> 标签：java, string

我的代码是：

```
String str = "Hello";
String str1;
str1 = str;
str1 = str1 + " World";
System.out.println(str1);
System.out.println(str); 
```

我得到的输出是：

```
Hello World
Hello 
```

我期望的输出`Hello World`适用于这两种情况，因为根据我的理解，在`str1 = str`两个对象都引用相同的位置之后，所以如果我更改一个对象的内容，其他对象也会受到影响。

那么，是`str1 = str1 + " World";`在不同的内存位置创建一个新的字符串对象吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T07:55:35.530

字符串是不可变的。当你这样做时`str1 = str1 + " World";`，你正在创建一个全新的 String 并更新`str1`对它的引用。你永远不会重新分配`str`，所以这是预期的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T07:56:15.420

关键是该`+`运算符创建了一个新的 String 对象，有效地连接了操作数。它不修改对象`str`。

您可能想阅读[http://javarevisited.blogspot.co.at/2010/10/why-string-is-immutable-in-java.html](http://javarevisited.blogspot.co.at/2010/10/why-string-is-immutable-in-java.html)，它很好地解释了不可变字符串的概念。

该类`StringBuffer`也可能值得注意，它针对长的级联连接进行了优化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T07:55:12.273

在 Java 中，字符串是不可变的。

`str1 = str1 + " World";`它将创建一个新实例并分配给 str1。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T07:57:30.860

java.lang.String 是不可变的

```
str1 = str1 + " World"; 
```

此代码将使 str1 引用新创建的 String 对象`"Hello World"`，而 str 仍然引用该`"Hello"`对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-28T07:58:21.253

对原始日期类型的引用总是会创建一个新对象

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T07:57:41.457

不，这是你初始化字符串的代码中的正确输出

```
String str = "Hello";
 String str1; 
```

然后你说

```
str1 = str; 
```

这意味着`str1`包含“你好”

```
str1 = str1 + " World"; 
```

上面的行将打印“Hello World”，因为`str1`那里有“Hello”和“World”作为新字符串

当您打印时`str`，它包含“你好”这个词

```
System.out.println(str); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T08:36:06.450

String 在这里有什么特别之处，这是所有人的共同行为。这是关于赋值运算符（在第 4 行中，您再次分配它）。您的代码类似于下面。

```
Person p1 = new Person("Stack");
Person p2;
p2 = p1;
p1 = new Person("OverFlow"); 
```

这会打印什么？两者都会打印“溢出”吗？

从你的话。

> 对于这两种情况，我期望的输出都是 Hello World，因为根据我的理解，在**str1 = str 之后，两个对象都引用了相同的位置**，所以如果我更改一个对象的内容，其他对象也会受到影响。

```
Line 3: str1 = str; 
```

根据第 3 行，您是正确的。

```
Line 4: str1 = str1 + " World"; 
```

但是在第 4 行中，您没有更改内容，而是将 str1 重新分配给不同的对象。

这里 str、str1 和 p1 是对象引用。不是真实的物体。如果您更改对象，您将获得相同的内容。像

p1 = p1.setName("溢出");

# mvc-mini-profiler - Mini-Profiler 添加外部时序

> ID：12635848
> 
> 赞同：2
> 
> 时间：2012-09-28T07:51:45.223
> 
> 标签：mvc-mini-profiler

我正在使用一个 MVC 3 应用程序，它使用包含响应中计时的业务逻辑。现在我想将这些时间添加到我的 MVC3 应用程序中的 Mini-Profiler 中的特定级别。

我试过这样：

```
profiler.StepStart("key", "value");
var response = GetXXXResponse(request);
if (response != null && response.Timings)
{
    foreach (var child in response.Timings)
    {
         var profiler = new MiniProfiler(child.Name, _profilerService.Profiler.Level;
          profiler.ClientTimings = new ClientTimings { Timings = new List<ClientTimings.ClientTiming> { new ClientTimings.ClientTiming { Duration = child.ResponseTime, Name = child.Name, Start = 0 } } };
           _profilerService.Profiler.AddProfilerResults(profiler);
     }
}
profiler.StepStop("key"); 
```

我使用的是 Mini-Profiler 2.0.2 版，在 UI 中我看到了正在添加的步骤，但时间不正确。如何在 MVC 中分析特定功能并为无法更改的外部进程提供的该块添加额外的计时信息？

# jquery - jquery：给出现的fancybox一个id

> ID：12635851
> 
> 赞同：1
> 
> 时间：2012-09-28T07:51:50.847
> 
> 标签：jquery, events, fancybox

下面的代码工作正常。花式框出现在准备好的文档上。

```
jQuery(document).ready(function() {
    $.fancybox(
        '<h2>Hi!</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque</p>',
        {
                'autoDimensions'    : false,
            'width'                 : 350,
            'height'                : 'auto',
            'transitionIn'      : 'none',
            'transitionOut'     : 'none'
        }
    );
}); 
```

它看起来像它应该出现的那样。稍后在某些事件中，我需要用它`$.fancybox.close();`来关闭这个fancybox，而不是任何一个。如何准确触发这个fancybox？我想我需要在其中添加广告 ID。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:14:18.220

首先在 HTML 中创建一个 div，然后在 Javascript 中将其定义为 fancybox

```
<div style="display:none">
    <div id="myFancyBox">
         <h2>Hi!</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque</p>
    </div>
</div> 
```

JavaScript：

```
<script type="text/javascript">
    $("#fancyBoxLink").fancybox({
        'href'   : '#myFancyBox',
        'autoDimensions'    : false,
        'width'                 : 350,
        'height'                : 'auto',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'

    });
</script> 
```

# android - 输入类型=数字键盘在 Galaxy Tab 中禁用了点

> ID：12635858
> 
> 赞同：9
> 
> 时间：2012-09-28T07:52:24.483
> 
> 标签：android, html, android-softkeyboard, galaxy-tab

我知道有很多关于这个问题的问题已经回答了，但是给出的解决方案都没有对我有用。

我正在为使用三星 Galaxy Tab 的企业开发网站。有很多输入内容是十进制数。所以我尝试了`<input type="number" />`. 但是导航器显示一个禁用点和逗号的键盘。不仅如此，还会从值中删除 onfocus、点或逗号分隔符。

我已经尝试设置像“0,1”、“0,01”、“0.1”、“0.01”、“any”等这样的步骤，尝试使用与十进制数字匹配的正则表达式的 min、max、模式...... stackoverflow 中没有可供尝试的建议，这太糟糕了哈哈。

我正在使用带有默认浏览器的三星 Galaxy Tab 10.1，但我没有找到任何文档谈论它的 html5 实现的任何限制。所以现在我不知道我是否遗漏了什么，是否有什么我可以尝试的，或者是否知道这是 Galaxy Tab 的错，所以我对此无能为力。

提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-01T05:46:33.263

您需要扩展您的 webview 类并像这样使用它的对象

```
public class WebViewExtended extends WebView{

    public WebViewExtended(Context context) {
        super(context);
    }

    public WebViewExtended(Context context, AttributeSet attrs) {
        super(context, attrs);    
    }

    public WebViewExtended(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
        InputConnection connection = super.onCreateInputConnection(outAttrs);
        if ((outAttrs.inputType & InputType.TYPE_CLASS_NUMBER) == InputType.TYPE_CLASS_NUMBER)
        {
            outAttrs.inputType |= InputType.TYPE_NUMBER_FLAG_DECIMAL;
        }

        return connection;
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T08:59:04.400

在 android 命名空间中，您可以使用：

```
 android:inputType="numberDecimal" 
```

这使您可以输入“。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:22:05.240

[数字类型输入](http://dev.w3.org/html5/spec/single-page.html#number-state-%28type=number%29)的HTML5 规范规定，任何可以被解析为[有效浮点数](http://dev.w3.org/html5/spec/single-page.html#valid-floating-point-number)的字符串都应该被允许。这具体包括`.`以及`-`和`+`。`e`

所以在三星 Galaxy Tab 10.1 上的实现是无效的。

如果您需要支持此设备，您可能必须使用`type="text"`并验证该字符串。这不会在具有软件键盘的设备上自动弹出正确的键盘。

```
<input type="text" pattern="^-?(?:[0-9]+|[0-9]*\.[0-9]+)$" name="NumberInput"> 
```

# nsformatter - nsformatter 和十进制数

> ID：12635859
> 
> 赞同：0
> 
> 时间：2012-09-28T07:52:42.143
> 
> 标签：nsformatter

我将 nSformatter 用于计算器应用程序。例如，当计算 : 6 除以 10 时，nsformatter 给我 : .6 而不是非常需要的 0.6 。对于小于 1 的十进制数，NS 格式化程序会省略 0。当然，我写了几行来将结果字符串附加一个 0 但我的问题是： Nsformatter 中是否有一个选项来实现所需的结果？

不再是 0.6 而是 0.6 ？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:01:13.757

OK 似乎找​​到了一个简单的解决方案，添加了这个

[格式化程序 setNumberStyle:NSNumberFormatterDecimalStyle];

现在工作正常。

再见

# c - Xcode 4.5 字符未显示在控制台框中，使用 C 语言中的 scanf()

> ID：12635860
> 
> 赞同：2
> 
> 时间：2012-09-28T07:52:46.013
> 
> 标签：c, xcode, scanf, xcode4.5

自从更新到 Xcode 4.5 后，我遇到了这个问题。

我输入`4555`了控制台框，但它只显示`4`在控制台框中。

我尝试了不同的输入参数，例如`%d`、和，都有相同的问题。`%f``%c``%s`

我不明白。如何解决？

我的源代码是

```
#include <stdio.h>

int main()
{
    int input;
    // insert code here...

    printf("Hello, World!\n");
    printf("Please Enter Number : ");
    scanf("%d",&input);
    getchar();
    printf("Input is : %d",input);
    return 0;
} 
```

和控制台显示：

```
>Hello, World!

>Please Enter Number : 4

>Input is : 4555 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:03:30.783

看来这是 Xcode 4.5 的错误。看：

*   [xCode 4.5 控制台输入 - Apple 支持社区](https://discussions.apple.com/message/19701332?tstart=0#19701332?tstart=0)

> Apple 的付费开发者论坛上对此问题进行了讨论。这是 Xcode 4.5 中的一个错误。苹果的工程师正在调查这个问题，但还没有解决办法。
> 
> 有两种解决方法。第一个解决方法是从终端运行命令行应用程序。在 Xcode 项目导航器中，从 Products 文件夹中选择您的可执行文件。右键单击并选择在 Finder 中显示。双击 Finder 中的可执行文件以在终端中启动它。
> 
> 第二种解决方法是安装 Xcode 4.4。选择 Xcode > Open Developer Tool > More Developer Tools 以访问 Apple 的开发者下载站点。

*   [回复：来自控制台的标准输入在 Xcode 4.5 中不起作用](http://prod.lists.apple.com/archives/xcode-users/2012/Sep/msg00228.html)

> 是的，这是 4.4 的确认回归，我们正在内部跟踪它。这真的很不幸，但我们会尽快修复它。

# c# - 加载数据时应用程序挂起

> ID：12635861
> 
> 赞同：-1
> 
> 时间：2012-09-28T07:52:45.827
> 
> 标签：c#, winforms

在我的 C# 桌面应用程序中，我想在 datagridview 中显示所有临时文件，但是当 datagridview 加载时，我的程序挂起并且在 datagridview 完全加载之前没有响应。

我怎样才能使我的应用程序在执行仍在进行时仍然存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:54:33.773

看看使用

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

> BackgroundWorker 类允许您在单独的专用线程上运行操作。下载和数据库事务等耗时的操作可能会导致您的用户界面 (UI) 在运行时似乎停止响应。当您需要响应式 UI 并且面临与此类操作相关的长时间延迟时，BackgroundWorker 类提供了一种方便的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:55:15.123

使用[BackGroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)加载网格。它是一个单独的`dedicated thread`. 在实施之前阅读这些文章

[http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)

[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

# iphone - 将低于最新版本的 IOS 版本安装到设备上

> ID：12635862
> 
> 赞同：8
> 
> 时间：2012-09-28T07:52:51.690
> 
> 标签：iphone, ios, installation, itunes, jailbreak

我知道可以通过创建自定义固件通过各种工具将较低版本的 IOS 安装到越狱设备上。问题是我们公司有一些测试设备，我们希望有一台设备与 IOS 4.3 一起使用。它不会降级，因为设备本身安装了 IO 4.2.1。是否有记录的方式来激活它，最重要的是我在哪里可以找到旧的 IOS 版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T08:05:33.317

编辑：编辑，因为这不再有效，并且被没有阅读评论的人否决。

苹果要我们用最新的版本，为最新的版本开发，没办法再降级**了**。

旧答案：您可以在此处为任何 iOS 设备下载任何固件

[iOS 下载](http://www.getios.com/)

要安装它，您必须转到 iTunes 并按下**alt**键单击更新，然后您可以选择`.ipsw`包含所需固件的文件。

对于“此设备无法识别...”消息，请尝试[此操作](http://leimobile.com/this-device-isnt-eligible-for-the-requested-build/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:35:04.223

Apple 不希望您安装任何可用的 iOS 最新版本，因此每次安装固件都会通过 Apple 的服务器进行检查。

使用TinyUmbrella等工具可以保存其他固件的授权，但只能保存当前允许版本的授权；因此，如果您在 2 年前 iOS 4 是最新版本时没有使用 TinyUmbrella，则无法降级您的设备。

# maven - 如何使用 / 在 maven-remote-resources-plugin 中

> ID：12635863
> 
> 赞同：2
> 
> 时间：2012-09-28T07:52:52.150
> 
> 标签：maven, filtering, maven-resources-plugin

我正在尝试按照[此](http://maven.apache.org/plugins/maven-remote-resources-plugin/examples/sharing-resources.html)示例使用 maven-remote-resources-plugin 在多个 maven 模块之间选择性地共享公共资源，并且我在选择性导入资源时遇到了很多困难。

我正在尝试使用`<includes>`和`<excludes>`元素，如下所示。我没有在任何地方看到 doco 中提到的插件，但是 eclipse 在命令完成中将它们作为有效选项提供，并且在运行 pom.xml 时我没有收到任何错误。到目前为止，我还无法获得`<includes>`或`<excludes>`对导入的资源产生任何影响

我的pom的相关部分是；

共享资源

```
<build>
  <plugins>
    <plugin>
       <artifactId>maven-remote-resources-plugin</artifactId>
       <executions>
         <execution>
           <goals>
             <goal>bundle</goal>
           </goals>
         </execution>
       </executions>
       <configuration>
         <includes>
           <include>**/*</include>
         </includes>
       </configuration>
     </plugin>
  </plugins>
</build>

<dependencies>
  <dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-remote-resources-plugin</artifactId>
    <version>1.3</version>
  </dependency>
</dependencies> 
```

资源消费者

```
<build>
 ...
  <plugins>
    <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-remote-resources-plugin</artifactId>
       <version>1.3</version>
       <configuration>
         <resourceBunldes>
           <resourceBundle>myApp:myApp_sharedresources:${project.version}</resourceBundle>
         </resourceBundles>
         <outputDirectory>${project.build.outputDirectory}</outputDirectory>
         <includes>
           <include>theOnlyResourceIWant.properties</include>
         </includes>
       </configuration>
       <executions>
         <execution>
           <goals>
             <goal>process</goal>
           </goals>
           <phase>generate-resources</phase>
         </execution>
       </executions>
     </plugin>
  </plugins>
</build>

<dependencies>
  <dependency>
    <groupId>myApp</groupId>
    <artifactId>myApp_sharedresources</artifactId>
    <version>1.0</version>
  </dependency>
</dependencies> 
```

我已经尝试了很多组合，`<includes>`但`<excludes>`到目前为止都没有任何影响。

那么，是

```
<includes></includes> 
```

和

```
<excludes></excludes> 
```

maven-remote-resources-plugin 配置的有效元素，以及如何使用它们？我可以合理地将资源分离到单独的 maven 模块中，但这可能会创建大量的单文件 maven 模块并添加大量额外的 xml，所以如果可能的话我想避免它。

我真的不想开始浏览插件源代码，但这是下一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:40:48.000

我为要导入的共享资源使用临时目录并对其进行过滤。

远程资源插件配置如下。这会将所有共享资源复制到项目中的临时目录中。设置`attached`为 false 意味着它们不包含在您的最终项目工件中，这使您有机会使用 Maven 的正常资源处理来选择要包含的那些。

```
<plugin>
<artifactId>maven-remote-resources-plugin</artifactId>
<configuration>
  <resourceBundles>
    <resourceBundle>myApp:myApp_sharedresources:${project.version}</resourceBundle>
  </resourceBundles>
  <attached>false</attached>
  <outputDirectory>${project.build.directory}/shared-resources</outputDirectory>
</configuration>
<executions>
   <execution>
     <goals>
       <goal>process</goal>
     </goals>
     <phase>generate-resources</phase>
   </execution>
 </executions>
</plugin> 
```

资源定义。当`maven-resource-plugin`运行时（它默认绑定到 jars/wars/ears 的生命周期），它将使用共享资源目录以及普通`src/main/resources`目录。您需要同时定义两者。（如果需要，您也可以启用资源过滤。）

```
<resources>
  <resource>
     <directory>${project.build.directory}/shared-resources</directory>
     <includes>
       <include>theOnlyResourceIWant.properties</include>
     </includes>
  </resource>
  <resource>
     <directory>${basedir}/src/main/resources</directory>
  </resource>
</resources> 
```

我建议将共享目录设为 的子目录`${project.build.directory}`，因此`clean`生命周期无需更改即可工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:57:27.510

要启用格式“#{expr}”（Ruby 风格）的过滤分隔符，请将以下内容添加到您的插件配置中：

```
<plugin>
    <artifactId>maven-remote-resources-plugin</artifactId>
    <version>1.3</version>
    <executions>
      <execution>
        <id>process-remote-resources</id>
        <goals>
          <goal>process</goal>
        </goals>
        <configuration>
          <filterDelimiters>
            <filterDelimiter>#{*}</filterDelimiter>
          </filterDelimiters>
          [...]
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

检查[此链接](http://maven.apache.org/plugins/maven-remote-resources-plugin/usage.html)以供参考

# android - 如何处理 ListView 中的 ImageView？

> ID：12635864
> 
> 赞同：0
> 
> 时间：2012-09-28T07:52:55.677
> 
> 标签：android, android-layout, android-listview, android-imageview, android-scroll

我在 Activity 中有一个 ListView ，它的每个项目都被定制为有一些**TextViews**以及一个**DropDownList**项目和一个**ImageView**。在**OnScrollListener()**实现中，listView 的每个项目都使用 ArrayAdapter 填充文本视图，该文本视图的值取自 arrayList 和 ImageView 以及存储在 SD 卡上的**.jpeg文件。**以下是 listView Item 的 screenSHot ![列表视图项目](../Images/e0e6f5addbd39c747cf9ad8df9f01c4f.png)

当 sdCard 中的 .jpeg 文件转换为位图（即**BitmapFactory.decodeFile(fileName)**）然后使用**setImageBitmap(Bitmap bmp)分配给图像视图时，就会出现问题**. 由于将位图图像设置为图像视图是一个漫长的过程，因此它无法跟上滚动侦听器实现的步伐，并且不同 ListView 行的 ImageView 会填充它分配给上面任何行的图像。任何人都可以建议一些锻炼来解决这个问题，特别是将图像从 SD 卡分配到 imageView。它不像我的 listView 项目过度加载控件，这就是我面临这个问题的原因。我也尝试过在每行内使用单个 ImageView 项目，它的行为方式相同。欢迎您提出即兴创作的建议，并且肯定会有很大帮助。谢谢 ：-）

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;
    AssetDetailHolder assetDetailholder = null;

    try {

        if (row == null) {

            LayoutInflater inflator = ((Activity) context)
                    .getLayoutInflater();
            row = inflator.inflate(layoutResourceID, parent, false);

            assetDetailholder = new AssetDetailHolder();

            assetDetailholder.itemPosition = position;

            assetDetailholder.txtVwlineCOde = (TextView) row
                    .findViewById(R.id.lineCodeValue_ad);
            assetDetailholder.txtvwLocation = (TextView) row
                    .findViewById(R.id.locationValue_ad);
            assetDetailholder.txtvwLocationDetail = (TextView) row
                    .findViewById(R.id.detailLocationValue_ad);
            assetDetailholder.txtvwInventoryNo = (TextView) row
                    .findViewById(R.id.InventoryNoValue_ad);
            assetDetailholder.spnrconditionCode = (Spinner) row
                    .findViewById(R.id.spinner_ad);
            assetDetailholder.txtvwAssetName = (TextView) row
                    .findViewById(R.id.AssetNameValue_ad);
            assetDetailholder.subNoThumbnail = (ImageView) row
                    .findViewById(R.id.IV_subNoThumbnail);

            row.setTag(assetDetailholder);
        } else {
            assetDetailholder = (AssetDetailHolder) row.getTag();
            assetDetailholder.itemPosition = position;
        }

        AssetDetail assetDetail = assetsDetailList[position];

        new ThumbnailTask(position, assetDetailholder, assetDetail, context)
                .execute();

        if (assetDetail.assetLineCodeDesc.equals("")) {
            assetDetailholder.txtVwlineCOde
                    .setText(assetDetail.strLineCOde);
        } else {
            assetDetailholder.txtVwlineCOde.setText(assetDetail.strLineCOde
                    + "(" + assetDetail.assetLineCodeDesc + ")");
        }

        if (assetDetail.assetLocationNameDesc.equals("")) {
            assetDetailholder.txtvwLocation
                    .setText(assetDetail.strLocationName);
        } else {
            assetDetailholder.txtvwLocation
                    .setText(assetDetail.strLocationName + "("
                            + assetDetail.assetLocationNameDesc + ")");
        }

        assetDetailholder.txtvwLocationDetail
                .setText(assetDetail.strLocationDetail);

        if (assetDetail.strInventoryNumber.contains("-")) {
            assetDetailholder.txtvwInventoryNo
                    .setText(assetDetail.strInventoryNumber.split("-")[0]);
        } else {
            assetDetailholder.txtvwInventoryNo
                    .setText(assetDetail.strInventoryNumber);
        }
        assetDetailholder.txtvwAssetName.setText(assetDetail.assetName);

        String conditionCodeString = assetDetail.assetConditionCode;

        if (conditionCodeString != "" || conditionCodeString != null) {
            try {
                int conditionCodeInteger = Integer
                        .parseInt(conditionCodeString);
                assetDetailholder.spnrconditionCode
                        .setSelection(conditionCodeInteger);
            } catch (Exception e) {
                assetDetailholder.spnrconditionCode.setSelection(0);
            }
        } else {
            assetDetailholder.spnrconditionCode.setSelection(0);
        }

        // String thumbnailDir = Common
        // .getSubNoDirectory(context, assetDetail);

        // if (new File(thumbnailDir).isDirectory()) {
        //
        // File thumbnailFile = new File(Common.getSubNoImgFilePath(
        // thumbnailDir, assetDetail, SubNo_ImageSample.A));
        //
        // if (thumbnailFile.exists()) {
        // assetDetailholder.subNoThumbnail
        // .setImageBitmap(BitmapFactory
        // .decodeFile(thumbnailFile.getAbsolutePath()));
        // }
        // }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return row;
}

static class AssetDetailHolder {
    TextView txtVwlineCOde;
    TextView txtvwLocation;
    TextView txtvwLocationDetail;
    TextView txtvwInventoryNo;
    TextView txtvwAssetName;
    Spinner spnrconditionCode;
    ImageView subNoThumbnail;
    public int itemPosition;
}

private static class ThumbnailTask extends AsyncTask<Void, Void, Void> {

    private int mPosition;
    private AssetDetailHolder mHolder;
    private Context cntxt;
    private AssetDetail assetItem;

    private Bitmap thumbnailBmp;

    public ThumbnailTask(int position, AssetDetailHolder holder,
            AssetDetail asset, Context context) {
        mPosition = position;
        mHolder = holder;
        assetItem = asset;
        cntxt = context;
    }

    @Override
    protected Void doInBackground(Void... params) {

        String thumbnailDir = Common.getSubNoDirectory(cntxt, assetItem);

        if (new File(thumbnailDir).isDirectory()) {

            File thumbnailFile = new File(Common.getSubNoImgFilePath(
                    thumbnailDir, assetItem, SubNo_ImageSample.A));

            if (thumbnailFile.exists()) {

                thumbnailBmp = BitmapFactory.decodeFile(thumbnailFile
                        .getAbsolutePath());
            }
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        if (mHolder.itemPosition == mPosition && thumbnailBmp != null) {
            mHolder.subNoThumbnail.setImageBitmap(thumbnailBmp);
        }
        // super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:13:54.677

[http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

这对你很有希望：P

# version-control - TFS 2012 .gitignore .hgignore 等效

> ID：12635865
> 
> 赞同：11
> 
> 时间：2012-09-28T07:52:57.153
> 
> 标签：version-control, tfs

在 TFS 2012 中，有一种新的本地工作模式，*本地工作区*。

这是个好消息：

*   没有“签出”文件
*   处理来自 VS 以外的程序的文件时，不再有只读文件和问题。
*   没有更多的“获取最新”实际上不是最新的

但这也意味着我需要一种方法来告诉 TFS 在监视文件系统的更改时要忽略哪些文件。这在 TFS2012 中是如何处理的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T08:31:28.273

通过在 TFS ui 中捣乱，我自己找到了答案。答案是它由放置在分支根目录中的文件“.tfignore”处理。

在“待定更改”中，有一条通知说我有未版本化的文件。这导致我进入一个对话框，我可以在其中忽略文件名、扩展名、文件夹名称等内容。在此处添加一些规则会在分支根目录中创建 .tfignore 并使该文件成为待处理的更改。换句话说，它的工作方式与大多数其他版本控制系统完全相同。

# php - Firefox 更改表格布局

> ID：12635874
> 
> 赞同：0
> 
> 时间：2012-09-28T07:53:40.840
> 
> 标签：php, html-table, smarty

我在修复Firefox中视频类别的布局时遇到问题它在谷歌浏览器中正常工作但在Firefox中对齐中心的表格离开它的位置并制作水平滚动条使其需要一些专家参与smarty我正在展示smarty编码请大家帮帮我哟，伙计们也可以检查[Firefox Givin Prob 的页面。](http://www.boysjoys.com/phpd/phpd/categories.php?pt=categories)

在 Google Chrome 和 Firefox 中检查此页面，它在 Chrome 中运行良好，但在 Firefox 中运行良好，请帮助我

```
<div align="center">
<table border="0" align="center">
{section name=i loop=$cat step=4 max=6} <!--ROWS EG change max=???-->
    <tr> 
{section name=cat loop=$cat start=$smarty.section.i.index max=4}<!-- COLUMNS EG change max=??? to the ammount and step=??? to the same ammount-->
    <td align="center"><a href="index.php?cat={$cat[cat].id}"><b>{$cat[cat].name}</b><br /><img border="0" width="153" height="120" src="{$cat[cat].picture}" {if $firefox eq "1"}class="reflect" alt="No Image Yet"{/if} /></a></td>
    {/section}
    </tr>
{/section}
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:09:06.420

将`br`作为第一个元素放入您的`div`：

```
<div align="center">
   <br/>
   <table border="0" align="center">
   .
   . 
```

或者您可以在搜索部分之后添加更清晰的内容：

```
.
.
</div>

<div style="clear:both"></div>

<div align="center">
.
. 
```

出现问题的原因是您的搜索部分`div`向左浮动，与您的第二个部分重叠`div`并推动了`table`. 添加一个清除器后，第一个`div`有东西要推动而不是你的桌子。

# android - 如何使用 RTP 发送和接收语音流

> ID：12635875
> 
> 赞同：9
> 
> 时间：2012-09-28T07:53:45.737
> 
> 标签：android, sip, voip, rtp, jain-sip

我是使用 RTP 进行 SIP 呼叫的新手，现在我正在尝试使用 RTP 发送和接收语音流进行 sip 呼叫。我完成了连接两个模拟器的工作，并且能够使用 jain sip 发送 INVITE 和 INVITE-ACK。

收到 Ack 后，我想为媒体流启动 RTP，我使用 RtpPacket 函数发送和接收

我`RtpFunction`用来发送带有所有 RTP 标头的媒体，如下所示：

```
byte Version;
boolean Padding;
boolean Extension;
byte CC;
boolean Marker;
byte PayloadType;
short SequenceNumber;
int TimeStamp; 
```

请提供一些想法和实际链接，我可以在其中找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-28T18:28:07.153

这可以以更简单的方式实现

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
audio.setMode(AudioManager.MODE_IN_COMMUNICATION);

audioGroup = new AudioGroup();
audioGroup.setMode(AudioGroup.MODE_ECHO_SUPPRESSION);

audioStream = new AudioStream(InetAddress.getByAddress(getLocalIPAddress()));
audioStream.setCodec(AudioCodec.PCMU);
audioStream.setMode(RtpStream.MODE_NORMAL);
audioStream.associate(InetAddress.getByName(SipStackAndroid.getRemoteIp()), REMOTE_PORT);
audioStream.join(audioGroup); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:06:32.627

我们使用 RTPpacket 发送和接收 RTP 数据。

```
 import javax.media.rtp.*;
  import javax.media.rtp.rtcp.*;
  import javax.media.rtp.event.*;
  import javax.media.*;
  import javax.media.protocol.*;
  import java.net.InetAddress;
  import javax.media.format.AudioFormat;
  import com.sun.media.ui.*;
  import java.util.Vector;
  public class RTPSourceStream < RTPPlayerWindow > implements ReceiveStreamListener,
      ControllerListener {
          @SuppressWarnings("rawtypes")
          Vector playerlist = new Vector();
          @SuppressWarnings("deprecation")
          SessionManager mgr = null;
          boolean terminatedbyClose = false;

          @SuppressWarnings("deprecation")
          public SessionManager createManager(String address,
              String sport,
              String sttl,
              boolean listener,
              boolean sendlistener) {
              return createManager(address,
                  new Integer(sport).intValue(),
                  new Integer(sttl).intValue(),
                  listener,
                  sendlistener);
          }
          @SuppressWarnings("deprecation")
          public SessionManager createManager(String address,
              int port,
              int ttl,
              boolean listener,
              boolean sendlistener) {
              mgr = (SessionManager) new com.sun.media.rtp.RTPSessionMgr();
              if (mgr == null) return null;
              mgr.addFormat(new AudioFormat(AudioFormat.DVI_RTP, 44100, 4, 1), 18);
              if (listener) mgr.addReceiveStreamListener(this);
              //  if (sendlistener) new RTPSendStreamWindow(mgr);
              // ask RTPSM to generate the local participants CNAME
              String cname = mgr.generateCNAME();
              String username = null;
              try {
                  username = System.getProperty("user.name");
              } catch (SecurityException e) {
                  username = "jmf-user";
              }
              // create our local Session Address
              SessionAddress localaddr = new SessionAddress();
              try {
                  InetAddress destaddr = InetAddress.getByName(address);
                  SessionAddress sessaddr = new SessionAddress(destaddr,
                      port,
                      destaddr,
                      port + 1);
                  SourceDescription[] userdesclist = new SourceDescription[] {
                      new SourceDescription(SourceDescription
                              .SOURCE_DESC_EMAIL,
                              "jmf-user@sun.com",
                              1,
                              false),
                          new SourceDescription(SourceDescription
                              .SOURCE_DESC_CNAME,
                              cname,
                              1,
                              false),
                          new
                      SourceDescription(SourceDescription.SOURCE_DESC_TOOL, "JMF RTP Player v2.0",
                          1,
                          false)
                  };
                  mgr.initSession(localaddr,
                      userdesclist,
                      0.05,
                      0.25);
                  mgr.startSession(sessaddr, ttl, null);
              } catch (Exception e) {
                  System.err.println(e.getMessage());
                  return null;
              }
              return mgr;
          }
          public void update(ReceiveStreamEvent event) {
              Player newplayer = null;
              RTPPacket playerWindow = null;
              // find the sourceRTPSM for this event
              SessionManager source = (SessionManager) event.getSource();
              // create a new player if a new recvstream is detected
              if (event instanceof NewReceiveStreamEvent) {
                  String cname = "Java Media Player";
                  ReceiveStream stream = null;
                  try {
                      // get a handle over the ReceiveStream
                      stream = ((NewReceiveStreamEvent) event)
                          .getReceiveStream();
                      Participant part = stream.getParticipant();
                      if (part != null) cname = part.getCNAME();
                      // get a handle over the ReceiveStream datasource
                      DataSource dsource = stream.getDataSource();
                      // create a player by passing datasource to the 
                      // Media Manager
                      newplayer = Manager.createPlayer(dsource);
                      System.out.println("created player " + newplayer);
                  } catch (Exception e) {
                      System.err.println("NewReceiveStreamEvent exception " +
                          e.getMessage());
                      return;
                  }
                  if (newplayer == null) return;
                  playerlist.addElement(newplayer);
                  newplayer.addControllerListener(this);
                  // send this player to player GUI
                  playerWindow = new RTPPacket(newplayer, cname);
              }
          }
          public void controllerUpdate(ControllerEvent evt) {
              // get a handle over controller, remove it from the player
              // list.
              // if player list is empty, close the sesssion manager.
              if ((evt instanceof ControllerClosedEvent) ||
                  (evt instanceof ControllerErrorEvent) ||
                  (evt instanceof DeallocateEvent)) {
                  Player p = (Player) evt.getSourceController();
                  if (!terminatedbyClose) {
                      if (playerlist.contains(p))
                          playerlist.removeElement(p);
                      if ((playerlist.size() == 0) && (mgr != null))
                          mgr.closeSession("All players are closed");
                  }
              }
          }
          public void closeManager() {
              terminatedbyClose = true;
              // first close all the players
              for (int i = 0; i < playerlist.size(); i++) {
                  ((Player) playerlist.elementAt(i)).close();
              }
              if (mgr != null) {
                  mgr.closeSession("RTP Session Terminated");
                  mgr = null;
              }
          }
          class RTPPacket extends RTPSourceStream {
              public RTPPacket(Player newplayer, String cname) {
                  // TODO Auto-generated constructor stub
              }
          }
      } 
```

# vb.net - 如何创建显示绑定到对象列表的百分比的条形图？

> ID：12635877
> 
> 赞同：6
> 
> 时间：2012-09-28T07:53:49.797
> 
> 标签：vb.net, winforms, mschart, charts

使用 DataVisualization.Charting.Chart 控件，我需要创建一个条形图（可能是堆积条形图），以显示每个人为该人预订的小时数以及这些小时占总小时数的百分比。到目前为止，我对要在这个野兽上设置的集合和属性的数量有点不知所措，所以我很感激在第一次制作图表时能得到一些帮助，然后我会自己探索更多。

我需要将图表绑定到以下对象的列表：

```
Public Class DOHoursChartItem

    Public Property Name As String
    Public Property Hours As Double
    Public Property Percent As Double

End Class 
```

我不确定我是否需要在此处使用百分比属性，以支持以某种方式让图表控件处理此问题并为其提供`Hours`每点的值和总小时值，但这就是我要问的原因：我该如何设置我在上面描述的图表？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T10:51:20.803

我的VB不是很好，所以我将开始用C#发布一个例子（如果你真的需要我可以尝试翻译它）。

以下是可用于将项目绑定到 mschart 并获取柱形图的三个方法示例：

## 示例 1：单个区域和并排列

```
private void FillChartSingleArea()
{
    // this set the datasource
    this.chart1.DataSource = GetItems();

    // clear all the (possible) existing series
    this.chart1.Series.Clear();

    // add the hours series
    var hoursSeries = this.chart1.Series.Add("Hours");
    hoursSeries.XValueMember = "Name";
    hoursSeries.YValueMembers = "Hours";
    hoursSeries.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;

    // add the percentages series
    var percSeries = this.chart1.Series.Add("Percentages");
    percSeries.XValueMember = "Name";
    percSeries.YValueMembers = "Percent";
    percSeries.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;
} 
```

![列并排](../Images/cdd6c75d5231769ac0d28b7112dd90e5.png)

## 示例 2：一张一张的两张图表

```
private void FillChartDoubleArea()
{
    // this set the datasource
    this.chart1.DataSource = GetItems();

    // clear all the (possible) existing series
    this.chart1.Series.Clear();

    // clear all the existing areas and add 2 new areas
    this.chart1.ChartAreas.Clear();
    this.chart1.ChartAreas.Add("Area1");
    this.chart1.ChartAreas.Add("Area2");

    // add the hours series
    var hoursSeries = this.chart1.Series.Add("Hours");
    hoursSeries.ChartArea = "Area1";
    hoursSeries.XValueMember = "Name";
    hoursSeries.YValueMembers = "Hours";
    hoursSeries.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;

    // add the percentages series
    var percSeries = this.chart1.Series.Add("Percentages");
    hoursSeries.ChartArea = "Area2";
    percSeries.XValueMember = "Name";
    percSeries.YValueMembers = "Percent";
    percSeries.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;
} 
```

![2 个图表堆叠](../Images/27cdabef51e7ae5027b3f3756b925921.png)

## 示例 3：单个区域和堆叠列

```
private void FillStackedChartSingleArea()
{
    // this set the datasource
    this.chart1.DataSource = GetItems();

    // clear all the (possible) existing series
    this.chart1.Series.Clear();

    // add the hours series
    var hoursSeries = this.chart1.Series.Add("Hours");
    hoursSeries.XValueMember = "Name";
    hoursSeries.YValueMembers = "Hours";
    hoursSeries.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.StackedColumn;

    // add the percentages series
    var percSeries = this.chart1.Series.Add("Percentages");
    percSeries.XValueMember = "Name";
    percSeries.YValueMembers = "Percent";
    percSeries.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.StackedColumn;
} 
```

![堆积柱形图](../Images/21973eefbef3c95c5fdc0abbb424870b.png)

* * *

其中`GetItems`方法定义如下（对于所有示例）：

```
private List<DOHoursChartItem> GetItems()
{
    var items = new List<DOHoursChartItem>()
    {
        new DOHoursChartItem("John", 120),
        new DOHoursChartItem("Amanda", 40),
        new DOHoursChartItem("David", 70),
        new DOHoursChartItem("Rachel", 10),
    };
    // compute the percentages
    var totalHours = items.Sum(x => x.Hours);
    foreach (var item in items)
        item.Percent = (item.Hours * 100.0) / totalHours;
    return items;
} 
```

并`DOHoursChartItem`作为：

```
 class DOHoursChartItem
    {
        public String Name { get; set; }
        public double Hours { get; set; }
        public double Percent { get; set; }
        public DOHoursChartItem(string name, double hours)
        {
            this.Name = name;
            this.Hours = hours;
        }
    } 
```

注意

这些实际上是柱形图；通过将 ChartType 设置为`Bar`(或`StackedBar`)，您将获得相同的结果，但条形图将具有水平方向。

# c++ - 如何关闭多线程gdb执行

> ID：12635881
> 
> 赞同：2
> 
> 时间：2012-09-28T07:53:56.143
> 
> 标签：c++, multithreading, gdb, cygwin

我真的很喜欢在 Borland C++ 中使用一些简单的界面，因此我在笔记本电脑上安装了 cygwin 和 gcc/gdb/vim 等（不幸的是，我不能在这里安装 Linux :(）

我遇到的问题如下：当我尝试调试非并行程序时，fe：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
  int i = argc;
    fprintf(stdout, "Hello World %d\n", i);
  return 0;
} 
```

我的 gdb 挂起：

```
$ gdb a.exe
GNU gdb (GDB) 7.3.50.20111026-cvs (cygwin-special)
...
Reading symbols from /cygdrive/c/programming/temp/a.exe...done.
(gdb) b main
Breakpoint 1 at 0x401179: file helloworld.cpp, line 4.
(gdb) r
Starting program: /cygdrive/c/programming/temp/a.exe
**[New Thread 12132.0x11a4]
[New Thread 12132.0x32ac]**

Breakpoint 1, main (argc=1, argv=0x28ac60) at helloworld.cpp:4
4       int main(int argc, char **argv) {
(gdb) n
5         int i = argc;
(gdb)
6           fprintf(stdout, "Hello World %d\n", i);
(gdb) p i
$1 = 1
(gdb) n
.......... nothing here 
```

我无法通过 CC、CZ 或杀戮来终止此调试。我认为 gdb 挂起，因为它尝试使用 2 个线程并且出现问题。这是信息线程：

```
(gdb) info threads
  Id   Target Id         Frame
  2    Thread 10160.0x31e8 0x775cf8e5 in ntdll!RtlUpdateClonedSRWLock () from /cygdrive/c/Windows/system32/ntdll.dll
* 1    Thread 10160.0x15a8 main (argc=1, argv=0x28ac60) at helloworld.cpp:4 
```

对我来说，这很奇怪，1 线程程序在 2 个线程上执行。我在 Linux 上检查了 gdb，并且 gdb 使用 1 个线程。

我的问题是：我可以对 gdb 说无论如何只使用 1 个线程吗？

顺便说一句，在我更新笔记本电脑和 cygwin 之前，我没有遇到同样的问题。我试图回滚 gdb（7.3.50 实际上是 cygwin 建议的最旧的），但它没有帮助。

谢谢

# php - png 和 gif 的图像重采样脚本

> ID：12635891
> 
> 赞同：0
> 
> 时间：2012-09-28T07:54:24.407
> 
> 标签：php, image-processing

我有这个接收上传图像的 PHP 脚本。上传的图像保存在临时文件夹中，然后此脚本重新采样图像并将其保存到正确的文件夹中。用户可以上传 JPG、PNG 或 GIF 文件。该脚本仅适用于 JPG 文件。

我将如何修改此脚本以调整 PNG 和 GIF 的大小而不会失去透明度？

```
$targ_w = $targ_h = 150;
$jpeg_quality = 90;

$src = $_POST['n'];
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

$new_src = str_replace('/temp','',$_POST['n']);

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

imagejpeg($dst_r,$new_src,$jpeg_quality); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:02:28.620

JPEG 图像不能有透明背景。

相反，您可以根据以下内容制作图像`imagesavealpha()`：

```
$targ_w = $targ_h = 150;
$newImage = imagecreatetruecolor($targ_w, $targ_h);
imagealphablending($newImage, false);
imagesavealpha($newImage, true);
$transparent = imagecolorallocatealpha($newImage, 255, 255, 255, 127);
imagefilledrectangle($newImage, 0, 0, $targ_w, $targ_h, $transparent);

$src = $_POST['n'];
$img_r = imagecreatefromstring(file_get_contents($src));
$img_r_size = getimagesize($src);

$width_r = $img_r_size[0];
$height_r = $img_r_size[1];
if($width_r > $height_r){
    $width_ratio = $targ_w / $width_r;
    $new_width   = $targ_w;
    $new_height  = $height_r * $width_ratio;
} else {
    $height_ratio = $targ_h / $height_r;
    $new_width    = $width_r * $height_ratio;
    $new_height   = $targ_h;
}

imagecopyresampled($newImage, $img_r, 0, 0, 0, 0, $new_width, $new_height, $width_r, $height_r);

$new_src = str_replace('/temp','',$_POST['n']);
imagepng($newImage, $new_src); 
```

它将从 PNG 和 GIF 制作一个 PNG（具有透明背景，并调整为 150x150。

这只是一个示例，因为它不限制比例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:03:13.413

几个月前我遇到了这个问题，并通过使用以下代码解决了这个问题：

```
imagealphablending($target_image, false);
imagesavealpha($target_image, true); 
```

# android - Android 方向 phonegap 版本

> ID：12635894
> 
> 赞同：1
> 
> 时间：2012-09-28T07:54:37.057
> 
> 标签：android, cordova, orientation

我正在使用 Eclipse、phonegap（2.1.0 版）和 html5 制作一个 Android 应用程序。

我遇到了应用程序方向的问题。当我在横向模式下旋转手机时，应用程序崩溃了。我查看了其他帖子并应用了似乎对其他人有用的方法（例如 android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"），但应用程序继续崩溃。

当我尝试这个： android:configChanges="orientation|keyboardHidden" 时，应用程序不会在横向模式下崩溃，但不会回到纵向模式！

我的最低要求版本是应用程序的 android 2.3.3。

有没有人已经遇到过这个问题并为 Android 2.3.3 解决了这个问题？我有点迷茫，不知道要测试什么其他解决方案。

谢谢

海妖

更新：我忘了说的是我只在模拟器上工作。我没有带有 android 2.3.3 的设备，因此我可以测试我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:13:35.480

确保为您的所有活动设置至少以下代码：

您是否有可能没有它的启动画面或 admob 或其他广告视图？

```
<activity android:name="main" android:launchMode="standard" android:configChanges="orientation|keyboardHidden"></activity> 
```

还要确保在 webview 中旋转时保存实例，如本文所述：[Android WebView：处理方向更改](https://stackoverflow.com/questions/1002085/android-webview-handling-orientation-changes)

如果它仍然崩溃，请提供一些日志文件来显示它所遇到的错误。

# django - *.tar.gz 文件下载使用 apache2 网络服务器

> ID：12635896
> 
> 赞同：0
> 
> 时间：2012-09-28T07:54:40.957
> 
> 标签：django, apache, gzip

我想实现一个用户可以上传/下载文件的功能。但是当用户上传 *tar.gz 文件并下载时，似乎文件已更改，文件的 md5sum 已更改并且文件大小已更改。Productions env 使用 apache 网络服务器。webframework是django，django的develop webserver上传/下载*tar.gz文件好像没问题（文件不会变）。与apache服务器有关吗？有什么建议么？

# php - 如何解决“未定义索引”错误？

> ID：12635898
> 
> 赞同：0
> 
> 时间：2012-09-28T07:54:49.667
> 
> 标签：php

以下是我的代码。`undefined index error`当验证完成并即将填充“成功”消息时，我得到一个消息。

我已经挖掘并确定了问题所在（`<td><?= $errors['fname'] ?></td>`），但我不明白定义导致错误的索引的正确方法是什么。有人可以强调我哪里出错了吗？谢谢。

```
 <?php
        function VerifyForm(&$values, &$errors)
        {
        if($values['fname'] == "")
        {$errors['fname'] = 'empty';} 
        }
        function DisplayForm($values, $errors)
        {
        ?>
        <html>
        <head>
        <title>Register</title>
        </head>
        <body>
        <form action="<?= $_SERVER['PHP_SELF'] ?>" method="POST">
        <table border="1">
        <tr>
        <td>First Name :</td>
        <td><input type="text" name="fname" value="<?= htmlentities($values['fname']) ?>"/>
        <td><?= $errors['fname'] ?></td>
        </tr>
        <tr><td colspan="2" align="center"><input type="submit" value="Submit"></td></tr>
        </table>
        </form>
        </body>
        </html>
        <?php
        }
        function ProcessForm($values)
        {
        echo ("<p>Your record has been successfully added!</p>");
        }
        if ($_SERVER['REQUEST_METHOD'] == 'POST')
        {
        $formValues = $_POST;
        $formErrors = array();

        if (!VerifyForm($formValues, $formErrors))
        DisplayForm($formValues, $formErrors);
        else
        ProcessForm($formValues);
        }
        else
        DisplayForm(null, null);
        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:57:50.383

您将表单错误设置为空数组：

```
$formValues = $_POST;
$formErrors = array();
// Did you mean to assign it some values before using it?

if (!VerifyForm($formValues, $formErrors)) 
```

所以它没有称为 的元素`['fname']`。

进一步阅读您的代码，正在发生以下情况：

您正在向函数发送一个空数组（这很好），但如果有错误，您只会用信息填充它 - 到目前为止一切都很好。但是，在您的 HTML 代码中，您不会检查它是否包含任何内容（如果所有信息都已发布，则将一无所有），但您仍然尝试访问其中的任何错误。

您可能想要更改这行代码：

```
<td><?= $errors['fname'] ?></td> 
```

对于这样的事情：

```
if(!empty($errors))
{
    foreach($errors as $key => $val)
    {
        echo "<td>".$key." - ".$val."</td>";
    }
} 
```

这将遍历您的错误数组并`<td>`为您遇到的每个错误打印一个 - 如果需要，您可以修改它以显示每个错误的一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:10:22.940

改变这个：

```
<td><?= $errors['fname'] ?></td> 
```

至 ：

```
<td>
    <?php 
        if(isset($errors['fname'])){ 
            echo $errors['fname']; 
        } 
    ?>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:58:10.147

用于`isset`此

```
<?php if(isset($errors['fname'])) { echo $errors['fname']; } ?> 
```

这将解决您的问题

# apache-flex - flex 中的数学：如何添加数字并将结果显示为标签？

> ID：12635899
> 
> 赞同：0
> 
> 时间：2012-09-28T07:54:51.613
> 
> 标签：apache-flex, adobe, flex4.5, flexbuilder

感谢您的时间。

我有 2 个带有数值的标签，我想将它们加在一起。

```
<s:Label id="cost_1" x="261" y="138" text="150" />
<s:Label id="cost_2" x="280" y="138" text="220"/>
<s:Label id="totals" x="291" y="138" text=""/> 
```

我需要第三个标签（id="totals"）来直观地显示前两个标签的总和。（150+220=总数.文本）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:04:54.997

有很多方法可以做到这一点；但是给定您的代码，最简单的方法是这样的：

```
<s:Label id="totals" x="291" y="138" text="{int(cost_1.text) + int(cost_2.text)}" /> 
```

虽然标签可能会显示数值；它们实际上是字符串值；所以这段代码将它们转换为整数。从那里开始，这只是一个简单的算术运算。

# github - GitHub fork 项目：拥有自己的 gh-pages 的正确方法

> ID：12635909
> 
> 赞同：2
> 
> 时间：2012-09-28T07:55:29.400
> 
> 标签：github, git-fork, github-pages

当一个 github 项目被分叉时，与初始项目相关的 gh-pages。我可以在 gh-pages 中进行修改并且不将其与父项目同步吗？同样的问题适用于 fork 主分支中的琐碎 README。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:54:09.323

您可以将每个分支的修改分开：

*   一个用于修改的分支，您可能希望通过拉取请求推回
*   一个用于私有修改的分支（广告您会定期将第一个分支合并到第二个分支，以将*所有*组合演变保持在一个 - 私有 - 分支中）

# assembly - 为什么我们使用 sub $0x18, %rsp？

> ID：12635910
> 
> 赞同：6
> 
> 时间：2012-09-28T07:55:29.597
> 
> 标签：assembly, x86-64

我研究了 32 位机器，我知道 sub $12, %esp 与 pop %eax 和 mov $0, %eax 上的三次相同。

但我不知道为什么我们在 x86-64 机器上使用 add $18, %rsp with start procedure call 或 sub $18, %rsp start with procedure call。

为什么编译器使用此规则进行过程调用？论证规则？

```
0x0000000000400df3 <main+191>:  mov    $0x402227,%edi
0x0000000000400df8 <main+196>:  callq  0x400ab8 <puts@plt>
0x0000000000400dfd <main+201>:  callq  0x4014c0 <read_line>
0x0000000000400e02 <main+206>:  mov    %rax,%rdi
0x0000000000400e05 <main+209>:  callq  0x401139 <phase_3>

-----------------------------------------------------------------------
example:

0x0000000000401139 <example+0>: sub    $0x18,%rsp
0x000000000040113d <example+4>: lea    0x8(%rsp),%rcx
0x0000000000401142 <example+9>: lea    0xc(%rsp),%rdx
0x0000000000401147 <example+14>:        mov    $0x40248a,%esi
0x000000000040114c <example+19>:        mov    $0x0,%eax
0x0000000000401151 <example+24>:        callq  0x400ac8 <__isoc99_sscanf@plt>
0x0000000000401156 <example+29>:        cmp    $0x1,%eax 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T08:03:05.807

“我知道和`sub $12, %esp`三次一样。” 你知道错了。不会改变，既不是通过弹出也不是通过将 0 移入其中。`pop %eax``mov $0, %eax``sub $12, %esp``eax`

使用类似的主要/直接原因`sub $12, %esp`是在堆栈上保留一些空间。这可以用来给子程序的局部变量一些空间。如果出于性能或其他原因需要，也可以使用它来对齐堆栈指针。

`add $18, %rsp`反之亦然，它释放先前在堆栈上分配的空间。这可用于释放局部变量或先前已传递给另一个子例程且不再需要在堆栈上的参数占用的空间。

# c++ - 在 Qtreeview 中从父母那里获取孩子

> ID：12635911
> 
> 赞同：0
> 
> 时间：2012-09-28T07:55:30.407
> 
> 标签：c++, qt, indexing, parent-child, qtreeview

我正在使用 QTreeView 和 QFileSystemModel 开发一个 Qt 应用程序。我可以让父母的孩子达到一级，但我无法获得父母的孩子的孩子。例如：

C是B的孩子，

B 是 A 的孩子

我可以得到 B 作为 A 的孩子，但我也希望 C 作为 A 的孩子。我想要这样的C->B->A。

有人可以就此提供一些意见并帮助我。提前致谢。

```
//QItemSelectionModel *sel = ui->dir_tree->selectionModel();
QStringList strings = extractStringsFromModel(ui->dir_tree->model(), ui->dir_tree->rootIndex());

QFileSystemModel* model = (QFileSystemModel*)ui->dir_tree->model();
QModelIndexList indexlist = ui->dir_tree->selectionModel()->selectedIndexes();
QVariant data;

//QList<QModelIndex> modelindex(indexlist);

int row = -1;

for(int i=0; i<indexlist.size();i=i+4)
{
    QModelIndex mi=indexlist.at(i);
    info1 = model->fileInfo(mi);
    QString childstr = info1.filePath();
    QString childname = info1.fileName();

    QModelIndex mi2= indexlist.at(i).parent();
    info = model->fileInfo(mi2);
    QString parentstr = info.filePath();
    QString parentname = info.fileName();
    QStringList childlist;
    for(int j=0;j<model->rowCount(indexlist.at(i));j++)
    {
        QModelIndex mi3 = indexlist.at(i).child(j, 0);
        info2 = model->fileInfo(mi3);
        QString childrenstr = info2.filePath();
        childlist << childrenstr;
        qDebug()<<"parents' children"<<childrenstr<<j;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-11T18:33:01.847

我喜欢对这种事情使用递归：

```
void MyTreeView::GetAllChildren(QModelIndex &index, QModelIndexList &indicies)
{
    indicies.push_back(index);
    for (int i = 0; i != model()->rowCount(index); ++i)
        GetAllChildren(index.child(i,0), indicies);
} 
```

用法（从树视图内的某处）：

```
QModelIndexList list;
GetAllChildren(model()->index(0,0), list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:35:07.257

让所有孩子广度优先：

```
QModelIndexList children;

//  Get top-level first.
for ( int i = 0; i < model->rowCount(); ++i ) {
    children << model->index( i, 0 );  //  Use whatever column you are interested in.
}

// Now descend through the generations.
for ( int i = 0; i < children.size(); ++i ) {
    for ( int j = 0; j < model->rowCount( children[i] ); ++j ) {
        children << children[i].child( j, 0 );
    }
} 
```

从孩子那里获得所有父母：

```
QModelIndexList parents;
parents << child.parent();
while ( parents.last().isValid() ) {
    parents << parents.last().parent();
} 
```

请注意，我没有尝试过这些样品！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T03:44:59.240

```
//Delete
    QList<QTreeWidgetItem *> selected = ui->twg->selectedItems();
    QTreeWidgetItem *item = selected.first();
    QTreeWidgetItem *parent = item->parent();
    if(parent) {
        int index = parent->indexOfChild(item);
        delete parent->takeChild(index);
    }

//Add
QList<QTreeWidgetItem *> selected = ui->twg->selectedItems();
QTreeWidgetItem *item = selected.first();
QTreeWidgetItem *parent = item->parent();
if(parent) {
    QTreeWidgetItem *tmp = new QTreeWidgetItem(parent);
    tmp->setText(0, "Dude");
    parent->addChild(tmp);
} 
```

# javascript - 添加新行后拖放不起作用

> ID：12635915
> 
> 赞同：1
> 
> 时间：2012-09-28T07:55:34.637
> 
> 标签：javascript, jquery, drag-and-drop

我`jquery.tablednd.0.7.min.js`用来拖放表格行。当我在表中动态添加新行（即使用 javascript 添加行）时，新行没有拖放。可以拖动表格中已经存在的其他行。

我认为这个新行没有与 jQuery 拖放代码同步。

我正在添加这样的新[行](http://www.imrantariq.com/blog/?p=581)。

[这](http://code.google.com/p/jrlives/source/browse/trunk/goods/webapp/js/admin/jquery.tablednd.0.7.min.js?r=220)是 jquery dragnDrop 文件代码。

在页面加载时，我正在使用此代码将此功能分配给表

```
$(document).ready(function() {
    $("#tableId").tableDnD({
        onDragClass : "myDragClass",
        onDrop : function(table, row) {

        },
        onDragStart : function(table, row) {
            console.log("drag start");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-10T22:01:42.510

只需使用`$("#tableId").tableDnDUpdate()`

从文档：

`Will update all the matching tables, that is it will reapply the mousedown method to the rows (or handle cells). This is useful if you have updated the table rows using Ajax and you want to make the table draggable again. The table maintains the original configuration (so you don't have to specify it again).`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T08:13:07.360

您还没有显示执行附加行的代码，这是您需要重新绑定`tableDnD`相关事件的地方，但它看起来像这样：

```
$(document).ready(function() {
    //on load
    addTableDnD();

    //appending a row
    $(".add-row").click(function() {
        $("<tr />").appendTo("#tableId");
        addTableDnD(); // re-attach events to pick up the new row.
    });
});

function addTableDnD() {
    $("#tableId").tableDnD({
        onDragClass : "myDragClass",
        onDrop : function(table, row) {

        },
        onDragStart : function(table, row) {
            console.log("drag start");
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-27T19:04:39.483

很简单：

```
$("#tableId").tableDnDUpdate() 
```

添加新行后。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T08:22:51.997

请试试这个：

```
function sample()
{
        $("#tableId").tableDnD({
            onDragClass : "myDragClass",
            onDrop : function(table, row) {

            },
            onDragStart : function(table, row) {
                console.log("drag start");
            }
        });

} 
```

在正文 onload 中调用 sample() 函数，并在每个新行条目时间再次调用 sample() 函数。

**注意：为避免出现两次问题，请尝试在 jquery 中使用“live”功能**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T23:26:29.247

如果新添加的行 tr 与现有行具有相同的 id，tablednd 可能无法使其可拖动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-16T14:20:02.173

```
$("#table_id").tableDnDUpdate(); 
```

我用这个解决了同样的问题

# android - Android：Thread.sleep 没有结束

> ID：12635922
> 
> 赞同：3
> 
> 时间：2012-09-28T07:56:17.137
> 
> 标签：android, multithreading, sleep

我有一个带有 httprequest 的应用程序。我想为该请求设置超时，并且由于我无法控制 de DNS 超时，stackoverflow 中的用户建议创建一个带有计时器的线程，以便在一定时间后取消请求，这就是我正在做的。

在我的新线程中，我使用 Thread.sleep 等待 30 秒，当该时间结束时，如果请求尚未结束，则取消请求，但我的线程永远不会醒来。这是我的代码：

```
private Thread timeout_request = new Thread(new Runnable() {
    public void run() {
        try{
            Log.d(TAG, "Thread start");
            Thread.sleep(30000);
            Log.d(TAG, "Thread awake");
            if(!httprequest_finished){
                request_aborted = true;
                mHttpClient.getConnectionManager().shutdown();
            }
        }catch(Exception e){
            e.printStackTrace();
        }
    }
});

public String sendData(String token){
    ...
    timeout_request.start();
    Log.i(TAG, "Sending request");
    final HttpResponse resp = httpClient.execute(post);
    Log.i(TAG, "Execute finished");
    if(request_aborted) return null;
    httprequest_finished = true;
    ...
} 
```

如果我在没有互联网连接的情况下执行 sendData 函数，日志会显示“发送请求”和“线程启动”，但不会显示“线程唤醒”或“执行完成”（我已经等了 5 分钟）。这是为什么？

- - - 编辑 - - -

顺便说一句，我不知道这是否重要，但我在连接中使用了 ThreadSafeClientConnManager。

我测试了一些东西：

1- 将 HttpResponse resp = httpClient.execute(post) 替换为 while(!request_aborted)。线程唤醒（它工作）。

2- 使用 mHandler.postDelayed(r, 30000) 而不是线程。我仍在执行 httpClient.execute(post)。结果：Runnable 未启动。

```
private Handler mHandler = new Handler();
private Runnable r = new Runnable() {
    public void run() {
        Log.d(TAG, "Runnable()");
        if(!httprequest_finished){
            request_aborted = true;
            mHttpClient.getConnectionManager().shutdown();
        }
    }
}; 
```

3- 使用 mHandler.postDelayed(r, 30000) 而不是线程。将 HttpResponse resp = httpClient.execute(post) 替换为 while(!request_aborted)。结果：Runnable 未启动。

因此，如果我不执行 http 请求，线程就可以工作，但处理程序永远不会工作。我在日志中注意到这些行：

```
threadid=3: reacting to signal 3
Wrote stack traces to '/data/anr/traces.txt'
threadid=3: reacting to signal 3
Wrote stack traces to '/data/anr/traces.txt' 
```

这会在执行线程或设置处理程序后 6 或 7 秒出现。我试过使用：

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
        public void uncaughtException(Thread paramThread, Throwable paramThrowable) {
            Log.e("Alert","Lets See if it Works !!!");
        }
    }); 
```

但是日志从不显示“让我们看看它是否有效！！！”。我查看了 traces.txt 文件，但我不明白它在说什么-.-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:22:37.020

我已经测试了以下代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;

/**
 *
 * @author paro
 */
public class JavaApplication1 {

    public boolean req_aborted = false;
    public Thread timeout_request = new Thread(new Runnable() {
    public void run() {
        try{
            System.out.println("start");
            Thread.sleep(30000);
            System.out.println("awake");
            if(req_aborted ==false)
            {
                req_aborted = true;
                System.out.println("flag change");
            }
        }catch(Exception e){
            e.printStackTrace();
        }
    }
});
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        JavaApplication1 jap = new JavaApplication1();
        jap.timeout_request.start();
        System.out.println("requset started");
        if(jap.req_aborted)
        {
            System.out.println("flag is true now");
        }
    }
} 
```

输出是

```
requset started
start
awake
flag change 
```

您的代码中与线程相关的部分似乎没有问题。

并且您的代码逻辑表明它应该打印“唤醒”。似乎您对以下语句有问题

```
final HttpResponse resp = httpClient.execute(post); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:00:09.897

而不是使用`Thread.sleep`我认为你应该使用`Handler.postDelayed`. 看看[文档](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)。

就像是：

```
Handler mHandler = new Handler();
...
mhandler.postDelayed(new Runnable() {
    public void run() {
        if(!httprequest_finished){
            request_aborted = true;
            mHttpClient.getConnectionManager().shutdown();
        }
    }
}, 30000); 
```

`Runnable`这将在指定的延迟后执行传入的。

# jquery - 通过 JQuery 从 cshtml 调用 Controller 中的 Action 并返回一个值

> ID：12635928
> 
> 赞同：4
> 
> 时间：2012-09-28T07:56:55.263
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, c#-4.0, razor

我有一个 cshtml 页面，有 3 个文本框和 3 个下拉菜单。

我的想法是让用户对第一个问题下拉列表（是/否）做出决定，并根据此答案填充第二个文本框，并启用第二个下拉列表（是/否），第三个相同的过程文本框。

我目前有以下内容：-

```
<script type="text/javascript">
$(document).ready(function () {

    //disable the textboxes 
    $("#T_FirstQuestion").attr('disabled', true);
    $("#T_SecondQuestion").attr('disabled', true);
    $("#T_ThirdQuestion").attr('disabled', true);

    //and the dropdowns intially
    $("#SecondQuestYesNo").attr('disabled', true);
    $("#ThirdQuestYesNo").attr('disabled', true);

    $("#FirstQuestYesNo").change(function () {
        val = $("#FirstQuestYesNo").val();
        PostValue(val);

    });

    function PostValue(val) {
        var url = "/Home/DecisionFirstQuest";
        $("#T_SecondQuestion").attr('enabled', true);
        $.ajax({
            type: "POST",
            url: url,
            data: { value: val }
        }).done(function (msg) {
            alert("Data Saved: " + msg);
        });
    }

});

</script>

@using (Html.BeginForm("Decision", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))

{
<table>
    <tr>
        <td> <font face="Arial" size="2"><b>1</b></font>
        </td>
        <td>
           @Html.TextBox("T_FirstQuestion", ViewData["T_FirstQuestion"], new { @class = "NormalTextBox" })
        </td>
        <td>
           @Html.DropDownList("FirstQuestYesNo", ViewData["FirstQuestYesNoData"] as SelectList, new { @class = "normalDropdowns" })
        </td>
    </tr>
    <tr>
        <td> <font face="Arial" size="2"><b>1</b></font>
        </td>
        <td>
           @Html.TextBox("T_SecondQuestion", ViewData["T_SecondQuestion"], new { @class = "NormalTextBox" })
        </td>
        <td>
           @Html.DropDownList("SecondQuestYesNo", ViewData["SecondQuestYesNoData"] as SelectList, new { @class = "normalDropdowns" })
        </td>
    </tr>
    <tr>
        <td> <font face="Arial" size="2"><b>1</b></font>
        </td>
        <td>
           @Html.TextBox("T_ThirdQuestion", ViewData["T_ThirdQuestion"], new { @class = "NormalTextBox" })
        </td>
        <td>
           @Html.DropDownList("ThirdQuestYesNo", ViewData["ThirdQuestYesNoData"] as SelectList, new { @class = "normalDropdowns" })
        </td>
    </tr>
</table>
} 
```

我的控制器如下：-

```
 public ActionResult DecisionFirstQuest(string value)
    {
        string strMessage = "";

        if (value == "Yes")
        {
            strMessage = "You have chosen YES!";
        }
        else
        {
            strMessage = "You have chosen NO!";
        }

        ViewData["T_SecondQuestion"] = strMessage;

        return RedirectToAction("Decision");
    }

    public ActionResult DecisionSecondQuest(string value)
    {
        string strMessage = "";

        if (value == "Yes")
        {
            strMessage = "You have chosen YES!";
        }
        else
        {
            strMessage = "You have chosen NO!";
        }

        ViewData["T_ThirdQuestion"] = strMessage;

        return RedirectToAction("Decision");
    }

    public ActionResult Decision()
    {

        string FirstQuestYesNo = HttpContext.Request["FirstQuestYesNo"];

        ViewData["T_FirstQuestion"] = "First Question Text";

        var ddlYesNoData = new SelectList(new[]
                                      {
                                          new {ID="",Name="Please Select"},
                                          new {ID="Yes",Name="Yes"},
                                          new{ID="No",Name="No"},
                                      },
                        "ID", "Name", 1);

        if (!String.IsNullOrEmpty(FirstQuestYesNo))
            ViewData["FirstQuestYesNoData"] = FirstQuestYesNo;
        else
            ViewData["FirstQuestYesNoData"] = "Yes";

        ViewData["FirstQuestYesNoData"] = ddlYesNoData;
        ViewData["SecondQuestYesNoData"] = ddlYesNoData;
        ViewData["ThirdQuestYesNoData"] = ddlYesNoData;

        return View();
    } 
```

我设法获得第一个下拉列表的值，并重定向到决策操作，但是我没有填满第二个问题文本框。我也越来越像一个带有一些 HTML 代码的弹出窗口，我想避免这种情况。

所以基本上我的问题是，我怎样才能填写第二个文本框，在用户选择（是/否）之后，然后填写第三个文本框。

另外，我是在使用正确的方法还是使用 MVC 有更好的方法来做到这一点？

感谢您的帮助和时间！

- - - - - - - - - -更新 - - - - - - - - - - - - - - - -------------- 我决定找一个更简单的例子

```
<script type="text/javascript">
$(document).ready(function () {

    $("#YesNo").change(function () {
        val = $("#YesNo").val();
        var url = "../Home/Decision";
        $.post(url, { value: val});

    });

});

</script>

@using (Html.BeginForm("Decision", "Home", FormMethod.Post, new { enctype = "multipart/form-data", id="Decision" }))
{

@Html.DropDownList("YesNo", new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Select", Value = "" }, 
                        new SelectListItem{ Text="Yes", Value = "Yes" },
                        new SelectListItem{ Text="No", Value = "No" }
                     })

string FirstQuestText = ViewBag.FirstQuestData;

 @Html.TextBox("T_FirstQuestion", FirstQuestText, new { @class = "NormalTextBox" })   
} 
```

和控制器动作： -

```
 [HttpPost]
    public ActionResult Decision(string value)
    {
        string strMessage = "";
        if (value == "Yes")
        {
            strMessage = "This is the Second Yes Question";
        }
        else
        {
            strMessage = "This is the Second No Question";
        }

        ViewBag.FirstQuestData = strMessage;
        return View();
    } 
```

现在的问题是我正在正确填充 ViewBag.FirstQuestData，但是它没有显示在 @Html.TextBox

-----------------------------------JSON 更新-------------- -------------------------- cshtml

```
 $("#YesNoQuest1").change(function () {
        alert('change');
        val = $("#YesNoQuest1").val();
        var url = "../Home/Decisions1";
        $.getJSON(url, function(data) {
             alert(data.message);
        }); 
```

控制器

```
 [HttpPost]
    public JsonResult Decisions1(string value)
    {
        string strMessage = "";
        if (value == "Yes")
        {
            strMessage = "This is the Second Yes Question";
        }
        else
        {
            strMessage = "This is the Second No Question";
        }

        return Json(new { message = strMessage }, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T07:38:01.603

尝试返回基于字符串的数据而不是重定向到操作，如下所示：

```
[HttpPost]
public ActionResult Decision(string value)
{
    string strMessage = "";
    if (value == "Yes")
    {
        strMessage = "This is the Second Yes Question";
    }
    else
    {
        strMessage = "This is the Second No Question";
    }

    ViewBag.FirstQuestData = strMessage;
    return Content(strMessage); //No need to return complete View
} 
```

您可以在 Ajax post call 中收到此消息，如下所示：

```
 $("#YesNo").change(function () {
            val = $("#YesNo").val();
            var url = "../Home/Decision";
            $.post(url, { value: val},function(data){ 
                         alert(data);
                        //Here you can right your logic to manipulate data
           });
    }); 
```

希望这可以帮助：

------- 更新以使用 JSON 数据 ------------------- 这是返回 Json 的控制器：

```
[HttpGet]
public ActionResult YourController() 
{ 
  //Do your Logic
  return Json(new { message = "Data" }, JsonRequestBehavior.AllowGet);
}

$.getJSON("../YourController", function(data) {
     alert(data.foo);
     alert(data.baz);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T06:34:31.363

如果您使用“Json 结果”从 Controller 向 View 返回响应，请在 Ajax 设置中将数据类型称为“json”

```
function PostValue(val) {
        var url = "/Home/DecisionFirstQuest";
        $("#T_SecondQuestion").attr('enabled', true);
        $.ajax({
            type: "POST",
            url: url,
            dataType:'json',
            data: { value: val }
        }).done(function (msg) {
            alert("Data Saved: " + msg);
        });
} 
```

你可以在你的'msg'对象中获取结果。

注意：不要使用 getJSON()，因为它会缓存响应，这可能会导致您的数据与存储库不同步。但是您仍然可以通过 settinb cache = FALSE 在 ajax 设置中使用它，如下所示：

$.ajaxSetup({cache:false});

此行应在您的 ajax 调用之前。

谢谢

# ruby - 如何在 rails_admin 中添加将数据从一个 table_column 复制到另一个 table_column 的操作？

> ID：12635929
> 
> 赞同：0
> 
> 时间：2012-09-28T07:57:04.660
> 
> 标签：ruby, ruby-on-rails-3, custom-action, rails-admin

我正在使用 rails_admin 0.0.5 并想添加一个功能（如果不存在）。

我想将数据从一个表复制到另一个。我有两个数据库表，都可以从 rails_admin 访问。如何将一个属性从一个表复制到另一个。

例如。requests_table => 电子邮件|request_approve

批准表 => 电子邮件|已发送确认

我想将邮件从approval_table 复制到approval_table 中的邮件。

这个我没看懂，请不要参考。[https://github.com/sferik/rails_admin/wiki/Custom-action](https://github.com/sferik/rails_admin/wiki/Custom-action)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:54:46.040

此方法将复制所有请求并将其保存在批准表中。我会`copied`在请求表中添加另一个名为的属性。这将指示那些已被复制的请求，并避免在批准表中重复。

```
def copy_table
  @requests = Request.find_all_by_copied(false)
  @requests.each do |r|
    @approval = Approval.new
    @approval.email = r.email
    @approval.sent_confirmation = r.request_approve
    @approval.save
    @requests.update_attributes(:copied => false)
  end
end 
```

# eclipse - 应用程序服务器中不存在最后的代码更改

> ID：12635935
> 
> 赞同：0
> 
> 时间：2012-09-28T07:57:22.430
> 
> 标签：eclipse, gwt, maven, jonas

在 Eclipse（使用 Maven 和 GWT）下，我有 4 个项目。

我在我的 Java 代码源中进行了修改。为了将我的修改放在应用程序服务器（Jonas 服务器）中，
我对所有项目进行了自动清理/构建，
然后对包含入口点的项目进行了 GWT 编译。
最后是包含入口点的该项目的导出 WAR。
当我将此 WAR 放在应用程序服务器 (Jonas) 上并停止并重新启动服务器时，
**我最后的更改不存在于服务器中！！！**

但是，当我在本地 (localhost:8080) 运行我的 GWT 应用程序时，我最后的更改是存在的。

**你遇到过这样的情况吗？有什么可以解释的？**
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:13:21.563

如果您对子项目进行了修改，但没有增加版本号，您可能会继续使用过时的版本。

这取决于您所说的“我对所有项目进行了清理/自动构建”，

我建议您在升级时更新项目的版本号，和/或使用 -U 参数构建 (mvn clean install -U)

# android - 我们如何为各种密度的各种平板电脑开发软件

> ID：12635938
> 
> 赞同：-3
> 
> 时间：2012-09-28T07:57:31.857
> 
> 标签：android, android-layout, android-emulator, android-widget

我正在为 Android 4.0 平板电脑开发软件。但这里有各种尺寸（7 英寸/10 英寸）的平板电脑和各种密度（800X480、1280X800）的平板电脑在市场上销售。

我如何在 XML 文件中设计适合所有这些类型的平板电脑的布局。

帮助我以单一方式为所有这些类型的平板电脑开发高度丰富的设计软件。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:00:53.193

谷歌在这里描述了它的最佳实践：http: [//developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html) 这应该给你很好的起点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:03:25.330

您可以在 android developer 中访问以下页面以接收示例代码

```
http://developer.android.com/training/multiscreen/screensizes.html
http://developer.android.com/training/multiscreen/index.html
http://developer.android.com/guide/practices/screens_support.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:55:10.563

对于这个问题，我查找了以下 URL，它将有助于不同的屏幕尺寸和密度。

http://developer.android.com/training/basics/supporting-devices/screens.html

# eclipse - Eclipse：jaxws-maven-plugin:2.2:wsimport 错误

> ID：12635943
> 
> 赞同：1
> 
> 时间：2012-09-28T07:57:51.683
> 
> 标签：eclipse, maven, plugins, jax-ws

我在 Eclipse 中使用 Maven Integration for WTP 插件。当我尝试导入包含在 pom 中的 Maven 项目时：

```
...
<plugin>
<groupId>org.jvnet.jax-ws-commons</groupId>
<artifactId>jaxws-maven-plugin</artifactId>
<version>2.2</version>
</plugin>
... 
```

我收到错误消息：

```
No marketplace entries found to handle jaxws-maven-plugin:2.2:wsimport in Eclipse.
Please see Help for more information. 
```

我用谷歌搜索并发现类似的情况没有答案：

*   [http://forums.dcm4che.org/jiveforums/thread.jspa?threadID=4344&tstart=0](http://forums.dcm4che.org/jiveforums/thread.jspa?threadID=4344&tstart=0)
*   [http://wiki.javaforum.hu/display/ANDROIDSOAP/Home](http://wiki.javaforum.hu/display/ANDROIDSOAP/Home)（在页面末尾）

你知道如何解决这个问题吗？

我的环境是：

```
Eclipse:
Eclipse Java EE IDE for Web Developers.
Version: Indigo Service Release 2

Eclipse maven plugin:
Maven Integration for WTP
Version:   Maven Integration for WTP 0.15.3.20120830-0850
org.maven.ide.eclipse.wtp.feature.feature.group JBoss by Red Hat 
```

# azure-storage - 对 EndUploadFromStream 感到困惑

> ID：12635949
> 
> 赞同：0
> 
> 时间：2012-09-28T07:58:30.453
> 
> 标签：azure-storage, azure-blob-storage, blobstorage

我对异步上传 blob 的问题感到困惑，希望在这里找到答案。

请先看看我的代码片段，

```
public void UploadMultipleBlobs(List<string> filelocations, string containerName, AsyncCallback callback = null, string path = null)
    {
                    try
        {

            Parallel.ForEach(filelocations, fileLocation =>
                {

                    //File to Stream
                    MemoryStream str = new MemoryStream();
                    byte[] file = File.ReadAllBytes(fileLocation);
                    str.Write(file, 0, file.Length);
                    str.Seek(0, SeekOrigin.Begin);

                    //Operations
                    if (callback == null)
                        callback = new AsyncCallback(OnUploadCompleted);
                    BlobRequestOptions blobRequestOptions = new BlobRequestOptions();
                    blobRequestOptions.Timeout = new TimeSpan(1, 0, 0);
                    blobRequestOptions.RetryPolicy = retry;

                    CloudBlob currentBlob = container.GetBlobReference(blobName);
                    var result = currentBlob.BeginUploadFromStream(str, blobRequestOptions, callback, new Object[] { currentBlob, str });

                    currentBlob.EndUploadFromStream(result);
                });

        }
        catch
        {
            throw;
        }

    }

private void OnUploadCompleted(IAsyncResult result)
    {
        try
        {
            // Get array passed to callback
            Object[] states = (Object[])result.AsyncState;

            var blob = (CloudBlob)states[0];
            var stream = (MemoryStream)states[1];

            // End the operation
            //blob.EndUploadFromStream(result);

            // Close the stream
            stream.Close();
        }
        catch
        {
            throw;
        }
    } 
```

我需要将 mutil 文件上传到 Azure blob，文件数可能为 10-50,000 个，每个文件约为 10KB-50KB。代码片段目前对我来说很好。但是，如果我在回调中调用 EndUploadFromStream，它在上传超过 2,000 个文件时总是会抛出异常。我的意思是，如果我在上传方法中删除 EndUploadFromStream 并在回调（OnUploadCompleted 方法）中调用 EndUploadFromStream，则会发生异常。异常信息如下：

无法从传输连接读取数据：连接已关闭。，StackTrace：在 Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()

在 Microsoft.WindowsAzure.StorageClient.CloudBlob.EndUploadFromStream（IAsyncResult asyncResult）

我不知道为什么会这样......希望得到你们的答案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:33:08.223

The Begin/End code looks OK. I notice that you're not doing anything to wait for the asynchronous operations to complete, so the problem may be related to that. eg, if you're running this from a console application then the application may exit before all the uploads have completed and then give you those errors. That would not be a problem if the `EndUploadFromStream()` call is inside the `Parallel.ForEach()` because it will cause the `Parallel.ForEach()` call to block until all the uploads have completed.

So try adding code to wait for all the uploads to complete and see if that fixes it. A simple way would be a counter that is initialized to the total number of uploads, and then decremented (using `Interlocked.Decremement()` for thread safety) inside of the callback. Another options would be use `Task.FromAsync()` to get an array of Task objects, then using `Task.WaitAll()` to wait for them to complete.

As an aside, using both `Parallel.ForEach()` and Begin/End methods at the same time is usually redundant - Begin/End is asynchronous already so there's usually no point using multiple threads to invoke it. Since you have such a big list of items it *might* make some difference in this case, but probably not much. You're probably better off using a simple `foreach` loop instead of `Parallel.ForEach()` unless you've actually measured a significant difference.

# java - JSF 日期格式

> ID：12635957
> 
> 赞同：2
> 
> 时间：2012-09-28T07:59:24.227
> 
> 标签：java, jsf

我想显示日期`Monday, 2012-09-24`。JSF 中将使用哪种日期格式模式？我是否需要编写自定义转换器才能获得这种格式。

```
<h:outputText value="#{date}">
    <f:convertDateTime type="date" pattern="??, yyyy-mm-dd"/>
</h:outputText> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:01:59.090

使用这种格式`EEEE, yyyy-MM-dd`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:11:58.370

看一下[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)类，它定义了要在`f:convertDateTime`.

# objective-c - 有时不调用 NSUbiquitousKeyValueStoreDidChangeExternallyNotification

> ID：12635960
> 
> 赞同：3
> 
> 时间：2012-09-28T07:59:35.003
> 
> 标签：objective-c, ios, icloud

我为 iCloud 键值存储写了代码

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyValueStoreChanged:)
                                                 name:NSUbiquitousKeyValueStoreDidChangeExternallyNotification
                                               object:nil];
    LOG(@"sync");
    [[NSUbiquitousKeyValueStore defaultStore] synchronize]; 
```

当我删除应用程序并重新安装它时，通常会调用观察者方法，但有时不会调用。

为什么？只是网络问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:10:13.463

我有一个类似的问题，无论我等了多长时间，NSUbiquitousKeyValueStoreDidChangeExternallyNotification 都没有在安装后的第一次启动时触发。在 NSUBiquitousKeyValueStore 中设置一个初始键似乎可以解决这个问题。

在将观察者添加到默认存储后，我立即调用：

```
[[NSUbiquitousKeyValueStore defaultStore] setString:@"testValue" forKey:@"testKey"];
[[NSUbiquitousKeyValueStore defaultStore] synchronize]; 
```

我对要同步的实际数据使用不同的键（即不是*testKey ）。*

# android - 如何使用来自 url 的外部 xml 文件在 Listview 中创建 Listview

> ID：12635962
> 
> 赞同：0
> 
> 时间：2012-09-28T07:59:53.957
> 
> 标签：android, xml, listview, xml-parsing, listactivity

目前，我已经使用来自 url 的 xml 文件完成了我的 CustomizedListViewActivity 以获取我的数据。但是，我在尝试将我想单击的项目链接到另一个项目时遇到问题`ListView`。我想要的是：

**自定义列表活动：**
- A
- B
- C

当点击 A 将给出：

**列表视图A：**
-1
-2
-3

当点击 B 将给出：

**列表视图B：**
-4
-5
-6

当点击 C 将给出：

**列表视图C：**
-7
-8
-9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:04:43.050

试试可扩展的 ListView

看看这里

[http://developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

或者

[http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html)

这可能会对您有所帮助。

# javascript - 将路径作为参数传递给 JS 函数

> ID：12635963
> 
> 赞同：1
> 
> 时间：2012-09-28T07:59:54.897
> 
> 标签：javascript

这段代码是一个简单的函数调用：

```
<input type="submit" name="_eventId_load" onclick="toLoad('2012\9\27\15\2012-09-27T15-05-59-512.00638.eml');" value="Load"/> 
```

这是我在 js 函数中收到的：

```
 function toLoad(path) {
    document.getElementById("emailPath").value = escapepath);
} 
```

通过萤火虫，我看到参数`path`包含：`201292-09-27T15-05-59-512.00638.eml`
在 scape 函数之后：`20129%17%0D%812-09-27T15-05-59-512.00638.eml`

价值观完全不同。`\`在将其发送到 js 函数之前，我该如何工作/编辑 te ？

提前致谢。

**编辑**

这是解决方案：

```
<input id="filePath-${status.index}" type="hidden" value="${file.path}"/>
<input type="submit" onclick="toLoad('${status.index}'" value="Load"/> 
```

这些输入在一个表单中，每个元素都是一个文件。我需要`${status.index}`知道我要加载哪个文件。`${file.path}`包含我要替换的路径。

```
function toLoad(index) {
    var emailPath = document.getElementById("filePath-" + index).value.replace(/\\/g,"\\\\");
    document.getElementById("emailPath").value = emailPath;
} 
```

正确的输入将包含在 div 中，因此我可以将其用于最终功能。

感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:02:37.137

是`\`一个转义字符，因此需要复制才能成为文字`\`，即用替换所有`\`符号`\\`并重试。

请参阅[Javascript - 替换字符串文字中的转义字符](https://stackoverflow.com/questions/1376440/javascript-replacing-the-escape-character-in-a-string-literal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:03:12.317

`\`在 Javascript 中被保留为特殊字符的转义字符。

[http://www.javascriptkit.com/jsref/escapesequence.shtml](http://www.javascriptkit.com/jsref/escapesequence.shtml)

逃脱`\`本身发生在两个`\\`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:03:13.427

使用 escape 和 unescape 函数 unescape() 函数对编码的字符串进行解码。 [http://www.w3schools.com/jsref/jsref_unescape.asp](http://www.w3schools.com/jsref/jsref_unescape.asp)

# asp.net - 将视频显示到 html 页面

> ID：12635968
> 
> 赞同：0
> 
> 时间：2012-09-28T08:00:38.450
> 
> 标签：asp.net, visual-studio-2010, html, video

我有一个应用程序，我在其中浏览视频并将其存储在文件夹中并将路径保存到数据库。

路径是这样的：

```
http://dc620x_abcd/DesktopModules/DNNCentric-VC_ManageLessions/rq/ref/1.mp4 
```

在下一页上，我想在 html 页面中显示相同的视频。我尝试使用`iFrame`Html 作为

```
 <iframe id="frame1" runat="server" visible="false" style="height: 222px; width: 482px;">
                </iframe>

Finalpath = filepath + filename;
                frame1.Visible = true;
                frame1.Attributes.Add("embed src", Finalpath); 
```

但它没有提供太多帮助，因为它不提供嵌入 iFrame 中的视频（而不是在 iframe 中播放视频，它要求下载）。我可以让视频以一种`iframe`或其他方式播放相同的任务吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:02:51.610

您可以使用 html5 视频标签：

```
<video width="320" height="240" controls="controls">
  <source src="http://dc620x_abcd/DesktopModules/DNNCentric-VC_ManageLessions/rq/ref/1.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:03:16.140

您应该使用视频标签[http://www.w3schools.com/html5/tag_video.asp](http://www.w3schools.com/html5/tag_video.asp) 或一些视频播放器[http://videojs.com/](http://videojs.com/)

# dynamics-crm-2011 - 在 CRM 2011 中隐藏选项列表中的项目

> ID：12635971
> 
> 赞同：2
> 
> 时间：2012-09-28T08:01:04.813
> 
> 标签：dynamics-crm-2011, jscript

在我的实体中，我使用了两个选项集...选项集一个（名称---> new_location）包含海得拉巴，孟买等项目

选项集二（名称---> new_places）包含 Hussainsagar、Tank Bund、Imax、Bandra-Worli Sea Link、Marine Drive、Mount Mary Church 等项目。

如果我在选项集中选择海得拉巴，则选项集二显示前 3 个项目，即 Hussainsagar、Tank Bund、Imax 如果我选择 Mumbai 选项集二显示剩余项目...

何可能..??

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:31:14.000

这是执行此操作的示例代码：

```
optionSetChanged = function () {
var optionsetControl = Xrm.Page.ui.controls.get("new_places");
var options = optionsetControl.getAttribute().getOptions();

 var value = Xrm.Page.getAttribute("new_location").getValue();
// first option is selected
if (value == 1) {
    optionsetControl.clearOptions();
    for (var i = 0; i < options.length - 1; i++) {
        if (i == 0 || i == 1) {
            optionsetControl.addOption(options[i]);
        }
    }
}
// else is second option is selected
else if (value == 2) {
    optionsetControl.clearOptions();
    for (var i = 0; i < options.length - 1; i++) {
        if (i == 2 || i == 3 || i == 4) {
            optionsetControl.addOption(options[i]);
        }

    }
  }
} 
```

希望清楚！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:24:00.817

这对于非常短的集合来说是可以的，但很快就会变得难以管理并且脚本变得非常大。考虑改为使用两个自定义实体 - 一个用于城市，一个用于区域/区域/地点（无论您想如何称呼它）

从 Account 中添加与这些中的每一个的关系（因此 Account N:1 city / place）并在 Account 表单中添加这些新的查找字段

在区域实体上添加对其所在城市的查找并将其设为必填字段。

现在，您无需脚本即可轻松地根据城市过滤地点 - 编辑帐户表单上的地点字段，并在“显示”选项卡上查找“相关记录过滤”。过滤地点，使其仅显示已在帐户中选择的城市中的地点。

您可以使用普通数据导入方法轻松导入城市及其地点（而不是手动构建选项集）。您还可以控制哪些用户可以添加新城市或地点（即使用查找中的“新建”按钮），而无需任何管理员访问权限，因此经理可以添加新城市，而其他员工可能只能在现有的城市。

您可以使用这些相同的实体来查找客户、联系人、潜在客户 - 真正想要的任何地方！

不要忘记用户都需要对新实体的一些权限，特别是“读取”和“附加到”权限。

# sql - 列出发货延迟最长的订单的发货城市和州

> ID：12635972
> 
> 赞同：-3
> 
> 时间：2012-09-28T08:01:04.910
> 
> 标签：sql

列出发货延迟最长的订单的发货城市和州

我尝试了以下但无法显示：

```
TRENTON         NJ              4 
```

作为查询需要返回的唯一结果。

```
select shipcity, shipstate, shipdate-orderdate "Shipping Delay"
from orders
having max(shipdate-orderdate) >any (select shipdate-orderdate
                from orders
                where shipdate is not null)
group by shipcity, shipstate, shipdate-orderdate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:09:39.583

假设 MySQL：

```
select shipcity, shipstate, (shipdate - orderdate) AS "Shipping Delay"
from orders
order by "Shipping Delay" desc
limit 1 
```

如果您真的坚持使用子查询，但上述方法当然有效：

```
select shipcity, shipstate, (shipdate - orderdate) AS Shipping_Delay
from orders
where shipdate-orderdate = (SELECT MAX(shipdate-orderdate) FROM orders) 
```

# php - PHP 短 rawurlencode

> ID：12635973
> 
> 赞同：1
> 
> 时间：2012-09-28T08:01:09.120
> 
> 标签：php, url

有没有办法缩短 php 的[rawurlencode](http://php.net/manual/en/function.rawurlencode.php)的结果 放置在链接中时相当长，例如 website.php?='rawurlencoderesult' 我希望能够缩短链接，但仍保留完整的解码结果。编码很长，因为它包含一个加密值。

有没有办法在 PHP 中本地执行此操作。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:21:41.090

我猜你的加密算法会生成很多在 URL 中被禁止的字符（也就是说，它输出一个二进制字符串）。在对它们进行 URL 编码之后，它们的大小基本上是原来的三倍，因为每个非法字符都被替换为`%xx`代码。

为避免这种情况，您需要先将加密的值字符串转换为 URL 允许的字符范围，即`0123456789abcdefghijklmnopqrstuvwxyz-_.~`.

做到这一点的一种方法 - 尽管效率低下 - 是使用[`bin2hex()`](http://php.net/manual/en/function.bin2hex.php)（并`hex2bin()`转换回来）。最好使用使用上述所有字符的转换函数，但目前我无法为您指出一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:18:03.097

您可以通过以下方式回答您的第一个问题：

“编码很长，因为它包含一个加密值。”

有很多半复杂的方式来保持这个服务器端，它有点取决于你的链接的使用。就我个人而言，我会保持原样，或者通过 AJAX 将“rawurlencoderesult”的值存储在变量中，然后将其保存在会话变量中或数据库中。

# java - entityManager.persist(object) NullPointerException

> ID：12635975
> 
> 赞同：0
> 
> 时间：2012-09-28T08:01:17.420
> 
> 标签：java, spring, hibernate, glassfish-3, entitymanager

我整个星期都在努力学习 Java EE。我正在通过 Netbeans 7.2 使用 Restlet 2.0、Spring、Hibernate 和 Maven 构建 REST api。现在，每当我进行尝试将数据持久保存到数据库的服务调用时，以下方法都会抛出一个`NullPointerException`

```
@Override
public void save(T object) {
    entityManager.persist(object);
} 
```

通过查看代码，以下部分应该注入`entityManager`

```
protected EntityManager entityManager;

@PersistenceContext
public void setEngityManager(EntityManager entityManger) {
    this.entityManager = entityManager;
} 
```

我在 NullPointerException 中找到了链接[EntityManager injection results](https://stackoverflow.com/questions/2108446/entitymanager-injection-results-in-nullpointerexception)。但是我太新了，无法理解如何在我的代码中实现它。另外，我使用的是 Glassfish 3.1.2。

有人可以帮忙提供一些代码示例吗？

编辑/更新：

下面是我正在使用的 persistence.xml 文件。我正在运行 MySQL 和 Glassfish。我应该将它保存在`WEB-INF`哪个是哪里`persistence-context.xml`还是在`src/main/resource`哪个是哪里`hibernate.cfg.xml`？

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence-unit name="pu1" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.mysite.restapi.RestletChildApplication</class>
    <properties>
            <property name="hibernate.connection.driver_class"
                    value="com.mysql.jdbc.Driver" />
            <property name="hibernate.connection.url"
                    value="jdbc:mysql://localhost:3306/mydatabase" />
            <property name="hibernate.connection.username" value="myname"/>
            <property name="hibernate.connection.password" value="mypassword"/>
            <property name="show_sql" value="true" />
            <property name="dialect" value="org.hibernate.dialect.MySQLDialect" />
    </properties>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:27:17.040

在 Java EE 5 中，`@PersistenceContext(unitName="your_unit_name")`只能使用容器管理的对象，如 EJB 或 Servlet。

如果您想在非容器托管对象（如普通 java 类）中创建 EntityManager 对象，请参考以下示例。

```
private EntityManagerFactory emf;

public static EntityManagerFactory getEntityManagerFactory() {
    if (emf == null) {
        emf = Persistence.createEntityManagerFactory("your_unit_name");
    }
    return emf;
}

public static EntityManager getEntityManager() {
    EntityManager entityManager = null;
    if (null != emf)
           entityManager = emf.createEntityManager();

    return entityManager;
} 
```

在 Java EE 6 的情况下，您可以参考 CDI - Context and Dependency injection 关于如何注入 EntityManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:04:45.030

```
setEntityManager 
```

代替

```
setEngityManager 
```

你有错字。

创建持久性单元，如这里
[java.net](http://glassfish.java.net/javaee5/persistence/persistence-example.html#Using_Netbeans_Java_SE_Example)

并通过持久化单元的名称注入 EntityManager

```
@PersistenceContext(unitName="your_unit_name")
private EntityManager em; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T13:31:59.193

上面的答案很有用。非常短的版本很可能是您的 EntityManager 为空。调用本身不应引发空指针异常。

# c++ - 从 cv::Mat 初始化的 IplImage 的内存释放

> ID：12635978
> 
> 赞同：2
> 
> 时间：2012-09-28T08:01:26.033
> 
> 标签：c++, memory-management, opencv, memory-leaks, computer-vision

我正在使用 cvBlobs 来跟踪视频中的一些对象。cvBlobs 使用具有 IplImage、cvMat、.. 等类型的旧 C 接口，而我使用的是使用 cv::Mat 的 C++ 接口。

所以我必须在这两种类型之间进行转换才能使用该库。这可行，但我无法释放内存。我的程序使用的内存不断增长。

这是我的代码，在底部您可以看到我尝试释放内存（编译器错误）。

```
void Tracker::LabelConnectedComponents(Mat& Frame, Mat& Foreground)
{
    // Convert to old format, this is the method used in the opencv cheatsheet
    IplImage IplFrame = Frame;
    IplImage IplForeground = Foreground;

    IplImage *LabelImg = cvCreateImage(cvGetSize(&IplFrame), IPL_DEPTH_LABEL, 1);

    // Make blobs (IplForeground is the segmented frame, 1 is foreground, 0 background)
    unsigned int result = cvLabel(&IplForeground, LabelImg, Blobs);

    // Remove small blobs
    cvFilterByArea(Blobs, 500, 1000000);

    // Draw bounding box
    cvRenderBlobs(LabelImg, Blobs, &IplFrame, &IplFrame, CV_BLOB_RENDER_BOUNDING_BOX | CV_BLOB_RENDER_CENTROID);

    // Convert back to c++ format
    Frame = cvarrToMat(&IplFrame);

    // Here are the problems
    cvReleaseImage(&IplFrame); // error
    cvReleaseImage(&IplForeground); // error
    cvReleaseImage(&LabelImg); // ok
} 
```

cvReleaseImage 有一个 IplImage** 类型作为参数，这是编译器错误：

```
tracker.cpp|35 col 33 error| cannot convert ‘IplImage* {aka _IplImage*}’ to ‘IplImage** {aka _IplImage**}’ for argument ‘1’ to ‘void cvReleaseImage(IplImage**)’ 
```

我知道 &IplFrame 不是正确的论点，但 &&IplFrame 不起作用。我怎样才能释放这 2 个 IplImages？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:22:00.093

问题是您在这里创建了对象的副本：

```
IplImage IplFrame = Frame;
IplImage IplForeground = Foreground; 
```

因此，这些调用：

```
cvReleaseImage(IplFrame); 
cvReleaseImage(IplForeground); 
```

即使可以编译，也不会发布原始图像。如果您已经在删除对象（即更改它们），为什么要将它们作为引用而不是指针发送给方法？我有点困惑，因为您似乎正在做这样的事情：

```
Mat frame = ...
Mat fg = ...
LabelConnectedComponents(frame, fg); // function releases the frame/fg memory
// at this point you are left with invalid frame/fg 
```

我检查了文档，上面写着`Mat::operator IplImage() doesn't copy data`，这意味着 IplFrame 不拥有内存，因此释放它是不正确的。

我认为这取决于`Mat`实例是如何创建的——如果它是从set to创建`IplImage*`的，那么你需要释放原始实例。如果它是使用set to创建的，那么instance 会自动处理它（除非您明确地使用）`copyData``false``IplImage``copyData``true``Mat``Mat::release`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:44:26.857

您不需要取消分配从 Mat 对象构造的 IplImages。这些是瘦包装器，不会复制数据，因此您不需要释放任何东西。

而且因为 cv::Mat 有一个自动内存管理，你不需要释放任何东西。

并且，作为完成，要调用 cvReleaseImage，您需要发送一个指向指针的指针：

```
IplImage* pimg= cvLoadImage();
...
cvReleaseImage(pimg); 
```

构造

```
IplImage img;
... 
cvReleaseImage(&&img); 
```

不起作用，因为 &img 是一个地址（内存地址），但不表示变量。因此，下一次评估 &(&img) 将给出编译器错误，因为 &img 是一个值。该值不能有地址，但它是一个简单的数字。

# uiscrollview - 界面生成器（xcode 4.5）中的 UIScrollView 不滚动

> ID：12635979
> 
> 赞同：1
> 
> 时间：2012-09-28T08:01:29.957
> 
> 标签：uiscrollview, interface-builder, ios6, xcode4.5

我将垂直和水平反弹设置为是。滚动启用当然设置为是。我已经检查了所有解决这个问题的简单方法。我也尝试过以编程方式创建 UIScrollView，但它在 ios < 6.0 上也不起作用。它不适用于模拟器（5.0、5.1）和设备（5.1.1）。在 ios 6.0 模拟器中它可以工作，但滚动条不显示。UITableView 也有同样的问题。

我从 xcode 4.4 添加的元素工作正常。但是我想添加的所有新元素都会出现这个问题。我试图创建新项目并检查这种行为，它是一样的。

**UPD**：还有一个问题。-touchesBegan:witEvent: 如果我点击 scrollView 没有响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:51:35.040

我不知道为什么，但 IB 中的“Bounce Verticaly”复选框仅适用于 iOS 6 或更高版本。

所以你应该在代码中做这样的事情：

```
[scrollView setContentSize:CGSizeMake(0, 1)]; 
```

或者：

```
[scrollView setAlwaysBounceVertical:YES]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T08:32:04.673

当 View 启动时，您可以在代码中为 UIScrollView 设置所有必要的设置。

# javascript - 使用 Javascript 从 HTML 中提取标签

> ID：12635980
> 
> 赞同：0
> 
> 时间：2012-09-28T08:01:32.350
> 
> 标签：javascript, html

我有一个包含许多元素（表、div 等）的 html 页面，我将它们作为字符串获取，我想`<img src="(whatever char).jpg" (whatever char)>`从字符串中提取这种格式，我尝试了正则表达式教程，但无法做任何事情，因为它对我来说很复杂。我只需要第一次出现，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:04:34.627

我不认为正则表达式是解决这个问题的正确方法：

```
var all_images = document.getElementsByTagName('img');
var filtered_images = [];

for (var i = 0; i < all_images.length; i++) {
    var image = all_images[i];

    if (image.hasAttribute('src')) {
        filtered_images.push(image);
    }
} 
```

如果您使用的是[jQuery](http://jquery.com/)，代码会简单得多：

```
var images = $('img[src]'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:09:22.300

~~这是你的需要吗？~~

~~`"<img src=\"aaa.jpg\" (whatever char)>".match(/src="([^"]*)"/)[1]`~~

同意 Blender，改用 dom，正则表达式不是一个好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:10:05.430

强制链接到为什么你应该三思而后行关于使用正则表达式解析 HTML 的答案： [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

话虽如此，我想知道为什么您将网站 HTML 代码作为字符串而不是 DOM 树，并且需要在 javascript 中对其进行操作。这看起来是一个非常罕见的用例。当您的脚本在您要解析的网站上运行时，您可以使用 document.getElementsByTagName("img") 来获取网站上所有图像 DOM 节点的数组。但是当你真的有另一个网站的源代码作为一个字符串并且想要解析它时，试试这个正则表达式。

```
<img.*?src="(.*?)" 
```

# android - 操作栏下拉点击事件

> ID：12635982
> 
> 赞同：10
> 
> 时间：2012-09-28T08:01:38.763
> 
> 标签：android, drop-down-menu, android-actionbar

我在操作栏中有下拉列表作为导航列表。使用**ActionBar.OnNavigationListener**和**onNavigationItemSelected**来检测用户何时单击了操作栏下拉导航列表中的项目并且工作正常。

但是，如果用户单击了与下拉列表中当前选择的项目相同的项目，则**不会调用****onNavigationItemSelected ！**（我需要这种确切的功能行为才能使应用程序正常工作）

 **那么有什么方法可以检测点击操作栏中下拉列表的任何部分吗？

有没有办法以某种方式引用操作栏中的下拉视图，然后在操作栏中的该下拉对象上设置 onclicklistner。就像我们在标准布局中使用下拉列表一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:55:02.113

这里的问题与任何其他 Spinner 相同。此处清楚地描述了此问题的工作原理：[Spinner : onItemSelected not called when selected item保持不变](https://stackoverflow.com/questions/10854329/spinner-onitemselected-not-called-when-selected-item-remains-the-same)

但是，对于 ActionBar，解决方案可能有点棘手（除非您使用*ActionBarSherlock*并且可能会显式弄乱它的代码）**

# zend-framework - Zend 视图渲染器路径附加 /script

> ID：12635986
> 
> 赞同：0
> 
> 时间：2012-09-28T08:01:48.273
> 
> 标签：zend-framework, view, path

我正在学习 Zend。我想学习如何将它用作一组独立的类，所以我的引导程序如下。我没有 config.ini 从这个配置 - 我假设路径是视图脚本

/controllers/:action.:suffix

但是我收到以下文件不存在的错误

/controllers/scripts/:action.:suffix

目录 /scripts 附加在哪里？

我已经查看了所有可以使用的路径方法，并且我也设置了 Nover/No 控制器。

```
set_include_path('library');
require ('library/Zend/Loader/Autoloader.php');
$loader = Zend_Loader_Autoloader::getInstance();

$front_controller = Zend_Controller_Front::getInstance();
$front_controller->setControllerDirectory('controllers');

$View = new Zend_View();

$Renderer = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer');
$Renderer->setView($View);
$Renderer->setViewSuffix("php");
$Renderer->setNeverController(true);
$Renderer->setViewBasePathSpec('/controllers');
$Renderer->setViewScriptPathNoControllerSpec(':action.:suffix');

echo $Renderer->getViewBasePathSpec();
echo $Renderer->getViewScriptPathNoControllerSpec();

$front_controller->dispatch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:22:25.223

它不在您的控制器文件夹中。它在视图控制器中。/application/views/scripts/ACTION.phtml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:43:58.133

当使用 Zend 作为一组单独的类时，viewRender 类仍然希望您的文件夹设置为

随便/脚本随便/帮手

等等

因此，您无法控制视图文件夹的绝对路径。因此 Zend 最好默认用作完整的 MVC 堆栈。

但是，如果您不需要路由和视图等 - 它的松散耦合性质提供了一组很棒的实用程序。

# java - 使用 @Scheduled 暂停/终止 Spring @Component

> ID：12635999
> 
> 赞同：2
> 
> 时间：2012-09-28T08:02:41.310
> 
> 标签：java, spring, scheduled-tasks

我有一个用例，其中我有一个带有 @Scheduled(fixedDelay = 1000) 的类在一个方法上（比如 run()）。

我希望能够：

1.  在运行时使用不同的 bean 名称启动此类（具有单例范围）的新实例。
2.  在运行时选择性地终止实例（基于 bean 名称）。
3.  暂停实例的执行（基于 bean 名称）。
4.  恢复执行之前暂停的实例（基于 bean 名称）。

为了启动/终止这样的单例，我可以分别使用 BeanDefinitionRegistry 的 registerBeanDefinition 和 removeBeanDefinition 方法。

问题：

1.  registerBeanDefinition之后，注册的bean会运行@Scheduled注解标记的方法吗？
2.  removeBeanDefinition 之后，被移除的实例会停止执行带有@Scheduled 注解的方法吗？
3.  暂停和恢复使用@Scheduled 注释标记的方法的最佳执行方式是什么。我总是可以公开一个将标志设置为 true 和忙等待暂停的方法，但是我可以使用容器提供的优雅方式或某些功能吗？