# StackOverflow 问答 12845000-12845999

# python - Django admin - 存储小块数据

> ID：12845000
> 
> 赞同：0
> 
> 时间：2012-10-11T17:15:42.740
> 
> 标签：python, django, django-admin

我对 Django 很陌生。

我有一个问题要解决。

我的网站有几个地方我想放置一些由管理面板管理的内容（静态文本）。我知道有 django flatpage 或像 django-chunk 这样的项目。Flatpage 只有几个字段，django-chunk 都在一个地方（键值）。

我想仅使用编辑视图将新位置添加到面板管理员，用户可以在其中填写几个文本字段。保存后数据存储在文件（或数据库）中。

一般来说，我想存储小块文本，如电话号码、地址、一些位于几页上的标语。并且没有必要使用完整的 CRUD 创建模型。

我怎样才能做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:41:59.943

您提到创建模型是不必要的，但不是为什么。我认为这是正确的方法。

```
class Snippet(models.Model):
    name = models.CharField(max_length=24)
    body = models.TextField() 
```

向管理员注册它，并根据需要创建尽可能多的片段。如果您只希望您的用户能够编辑您指定的权限，您可以禁用添加和删除权限。

将它们添加到模板上下文中：

```
def get_context_data(self, request, *args, **kwargs):
    data = super(MyView, self).get_context_data(request, *args, **kwargs)
    data['snippet1'] = Snippet.objects.get(name='snippet1').body
    data['snippet2'] = Snippet.objects.get(name='snippet2').body
    return data 
```

然后在模板中打印它们：

```
...
Contact us at {{ snippet1 }}!
... 
```

这有点简化。您可能想要一个视图 mixin，它根据名称的声明性列表添加您需要的所有片段，您可能想要优化查询，这样您就不会在每个请求中循环访问数据库 10 次，但这是一个好的开始到一个简单的解决方案。

# php - 动态字符串中的数组查找值

> ID：12845003
> 
> 赞同：0
> 
> 时间：2012-10-11T17:16:08.163
> 
> 标签：php, arrays, dynamic

我正在尝试构建一个动态关联数组值查找函数（在一个类中）：

```
class Family
{
    public static $members = array(
        'one' => array(
            'child' => 0,
            'children' => 5
            ),
        'two' => array(
            'child' => 2,
            'children' => null
            )
    );

    public static function resolveMemberValue()
    {
        $chain = func_get_args();
        $lookup = 'members' . '[\'' . implode('\'][\'', $chain) . '\']';

        var_dump( $lookup );

        return static::$$lookup;
    }
}

Family::resolveMemberValue('one', 'child'); 
```

但这会导致：

> string(23) "members['one']['child']"
> 致命错误：访问未声明的静态属性：Family::$members['one']['child'] in /family.php on line 23
> PHP致命错误：访问未声明的静态属性：第 23 行 /family.php 中的 Family::$members['one']['child']

但是，复制转储值并粘贴到脚本中+附加美元符号，它会返回预期的内容：

```
var_dump( Family::$members['one']['child'] ); 
```

> 整数（0）

我需要这个的原因是，因为它将与多个变量一起使用，并从生成器函数中调用。

片段有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:21:45.050

变量 variables 仅在字符串中替换变量的名称。它无法评估该字符串的内容（在本例中为 string `members['one']['child']`）

您的代码正在寻找一个名为`$members['one']['child']`not an element of the static array的静态属性`$members`。

试试这个：

```
$member = static::$members[$chain[0]];
return $member[$chain[1]]; 
```

另外，我建议不要使用`func_get_args()`，而是在方法声明中明确命名您的参数。PHP 的一些特性最好留下来......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:59:30.827

哦，只需要稍微修改一下——设法制作了一个辅助函数。

该函数替换`implode()`和 显式键定义。

```
function array_lookup()
{
    $chain = func_get_args();
    $array = array_shift($chain);

    foreach ($chain as $key) $array = $array[$key];

    return $array;
}

$test = array(
    'one' => array(
        'child' => 0,
        'children' => 5
        ),
    'two' => array(
        'child' => 2,
        'children' => null
        )
    );

var_dump($test, 'one', 'child'); // int(0) 
```

对于这个示例，我省略了任何类型的错误检查，但它确实符合我的要求。

是的，就我的例子来说，[它很准确](http://codepad.viper-7.com/6pqY1v)。

# jsf - 使用 OmniFaces 时出现 NullPointerException：printStackTrace

> ID：12845004
> 
> 赞同：1
> 
> 时间：2012-10-11T17:16:09.223
> 
> 标签：jsf, omnifaces

我正在使用 OmniFaces 显示一个漂亮而详细的错误页面，就像展示中的[这个](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)页面一样。

这是我的错误页面：

```
<ui:composition template="#{erroMB.layout}">
    <ui:define name="conteudo">
        <p:panel collapsed="true" toggleable="true"
            header="Desculpe-nos, um erro ocorreu.">
            <ul style="font-size: 1em; margin-left: 10px;">
                <li>Date/time: #{of:formatDate(now, 'yyyy-MM-dd HH:mm:ss')}</li>
                <li>User agent: #{header['user-agent']}</li>
                <li>User IP: #{request.remoteAddr}</li>
                <li>Request URI: #requestScope['javax.servlet.error.request_uri']}</li>
                <li>Ajax request: #{facesContext.partialViewContext.ajaxRequest ? 'Sim' : 'Não'}</li>
                <li>Status code: #{requestScope['javax.servlet.error.status_code']}</li>
                <li>Exception type: #{requestScope['javax.servlet.error.exception_type']}</li>
                <li>Exception message: #{requestScope['javax.servlet.error.message']}</li>
                <li>Stack trace: <pre>#{of:printStackTrace(requestScope['javax.servlet.error.exception'])}</pre>
                </li>
            </ul>
        </p:panel>
        <h:outputScript rendered="#{facesContext.partialViewContext.ajaxRequest}">scrollTo(0, 0);</h:outputScript>

        <br />
        <h:form>
            <p:commandButton value="Voltar para Início"
                action="#{navegacaoPesquisaMB.irPesquisa()}" ajax="false"
                style="width: 100%;" />
        </h:form>
    </ui:define>
</ui:composition> 
```

页面渲染得很好，但是当我单击`p:commandButton`页面末尾的 时，我在`of:printStackTrace`. 我不明白为什么会发生这种情况，因为该函数已经被调用并打印了它的结果。*当我单击另一个*表单内的按钮时，我不明白为什么 JSF 会再次尝试调用该函数，甚至更奇怪。

单击命令按钮时的完整堆栈跟踪：

```
14:00:57,404 SEVERE [javax.enterprise.resource.webcontainer.jsf.application] (http--0.0.0.0-8080-4) Error Rendering View[/erro.xhtml]: javax.el.ELException: /erro.xhtml: Problems calling function 'of:printStackTrace'
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:88) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:52) [primefaces-3.4.jar:]
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:198) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:115) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55) [primefaces-3.4.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79) [primefaces-3.4.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at br.ind.seat.pso.filtros.FiltroUrlPattern.doFilter(FiltroUrlPattern.java:50) [classes:]
    at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75) [omnifaces-1.1.jar:1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at br.ind.seat.pso.filtros.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:22) [classes:]
    at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75) [omnifaces-1.1.jar:1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_07]
Caused by: java.lang.NullPointerException
    at org.omnifaces.el.functions.Converters.printStackTrace(Converters.java:97) [omnifaces-1.1.jar:1.1]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at org.apache.el.parser.AstFunction.getValue(AstFunction.java:112) [jbossweb-7.0.13.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:227) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    ... 51 more

14:00:57,410 WARN  [org.jboss.solder.exception.control.log] (http--0.0.0.0-8080-4) No handlers found for exception javax.el.ELException: /erro.xhtml: Problems calling function 'of:printStackTrace'
14:00:57,411 WARN  [org.jboss.solder.exception.control.log] (http--0.0.0.0-8080-4) No handlers found for exception javax.servlet.ServletException
14:00:57,412 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/pso].[Faces Servlet]] (http--0.0.0.0-8080-4) Servlet.service() for servlet Faces Servlet threw exception: javax.enterprise.event.ObserverException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.7.0_07]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) [rt.jar:1.7.0_07]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) [rt.jar:1.7.0_07]
    at java.lang.reflect.Constructor.newInstance(Unknown Source) [rt.jar:1.7.0_07]
    at java.lang.Class.newInstance0(Unknown Source) [rt.jar:1.7.0_07]
    at java.lang.Class.newInstance(Unknown Source) [rt.jar:1.7.0_07]
    at org.jboss.weld.util.reflection.SecureReflections$16.work(SecureReflections.java:343) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:173) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:340) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:33) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:73) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:162) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:241) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:229) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:207) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:569) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:559) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:554) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:74) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at br.ind.seat.pso.filtros.FiltroUrlPattern.doFilter(FiltroUrlPattern.java:50) [classes:]
    at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75) [omnifaces-1.1.jar:1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at br.ind.seat.pso.filtros.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:22) [classes:]
    at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75) [omnifaces-1.1.jar:1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_07]
Caused by: javax.servlet.ServletException
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:606) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79) [primefaces-3.4.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
    ... 24 more
Caused by: java.lang.NullPointerException
    at org.omnifaces.el.functions.Converters.printStackTrace(Converters.java:97) [omnifaces-1.1.jar:1.1]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at org.apache.el.parser.AstFunction.getValue(AstFunction.java:112) [jbossweb-7.0.13.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:227) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:52) [primefaces-3.4.jar:]
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:198) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:115) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55) [primefaces-3.4.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    ... 33 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:56:15.080

根据堆栈跟踪，表单显然是在同步提交给自己，所以页面被重新显示，所以所有的 EL 表达式都被重新评估，但范围内的异常不再可用。

也许您只想删除`ajax="false"`和更新真正需要更新的部分，或者您实际上应该导航到目标页面？

```
<p:button value="Voltar para Início" outcome="/pesquisa.xhtml" style="width: 100%;" /> 
```

反过来`NullPointerException`确实是`of:printStackTrace()`. 自 OmniFaces 版本 1.2 起已修复。

# c# - 建设更好的工厂

> ID：12845005
> 
> 赞同：3
> 
> 时间：2012-10-11T17:16:12.847
> 
> 标签：c#, factory-pattern

所以我正在做一个项目，我从数据库中获取一些数据 - 有两个数据使这个项目很好，一个我有类型（他们称它们为事件，但它本质上只是转换为我创建的 .NET 类型) 然后我有了 XML，我设计了对象，所以它们可以很好地反序列化。这一切都很棒，经过单元测试，所有的类和方法都遵循单一职责原则。

当我创建工厂以构建业务逻辑以处理我从 XML 创建的 .NET 对象时，我的架构技能变得模糊。

基本上这就是我所拥有的。

```
 public class EventProcessorFactory : IEventProcessorFactory
    {
        private readonly List<IEventProcessor> _eventProcessors;

        public EventProcessorFactory()
        {
            _eventProcessors = new List<IEventProcessor>();
        }

        public IEventProcessor GetProcessor(Type eventType)
        {
            var typeOfEventProcessor = GetProcessorFromEventType(eventType);
            if (_eventProcessors.Any(x => x.GetType() == typeOfEventProcessor))
                return _eventProcessors.Single(x => x.GetType() == typeOfEventProcessor);
            var processor = BuildProcessorFromType(typeOfEventProcessor);
            _eventProcessors.Add(processor);
            return processor;
        }

        private static Type GetProcessorFromEventType(Type eventType)
        {
            if (eventType == typeof(EnrollmentEventType))
                return typeof(EnrollmentEventProcessor);
            if (eventType == typeof(ClaimantAccountInfoEventType))
                return typeof(ClaimantAccountInfoEventProcessor);
            if (eventType == typeof(PhoneUpdateEventType))
                return typeof(PhoneUpdateEventProcessor);
            if (eventType == typeof(AddressUpdateEventType))
                return typeof(AddressUpdateEventProcessor);
            if (eventType == typeof(ClientAccountInfoEventType))
                return typeof(ClientAccountInfoEventProcessor);
            return null;
        }

        private IEventProcessor BuildProcessorFromType(Type typeOfEventProcessor)
        {
            return ((IEventProcessor)Activator.CreateInstance(typeOfEventProcessor));
        }
    } 
```

所以这行得通，但它看起来很笨重。我已经阅读了一些关于使用工厂的文章，但要么我没有阅读正确的文章，要么我没有得到它。上面的代码有两个问题。

1）如果您添加了一个新事件，您需要对其进行修改，我希望以后的开发人员能够只删除“MyCoolNewEventType”和“MyCoolNewEventProcessor”，而不必修改将事件匹配到处理器的方法。

2）我现在在创建实例时可以调用 .CreateInstance(); 这很好，因为我没有任何依赖关系，但“事件处理器”可能至少会依赖数据库。我不是 100% 确定如何处理，我不想随机调用 Container.Resolve()。

如果有人能指出正确的方向，那将是巨大的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:22:01.650

您正在寻找的是可配置的工厂。它可以使用依赖注入框架或最简单的方法来完成 - 外部配置（想到 xml 文件），它将存储您可能实现的列表，并将按需加载/修改。

使用此解决方案，您将拥有类似的东西

```
<Processors>
  <Processor dllname='' classname=''>
   ....
</Processors> 
```

并且您必须通过使用反射/.net 为您提供的任何 xml 读取技术来加载它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T17:35:49.433

您可以使用[反射](http://msdn.microsoft.com/en-us/library/system.componentmodel.typedescriptor.getattributes.aspx)并在这些属性中设置处理器类型。

```
[ProcessorType(typeof(EnrollmentEventProcessor)]
class EnrollmentEvent { ... } 
```

简单干净的解决方案。对于创建的类型，我建议使用 a`Dictionary<Type, Object>`来加快访问速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T02:11:20.820

这有点取决于您要存储映射的位置，但您可以编写自定义配置部分：

```
public class EventProcessorMapping : ConfigurationElement
{

    [ConfigurationProperty("event", IsRequired = true)]
    public string Event
    {
        get
        {
            return this["event"] as string;
        }
    }

    [ConfigurationProperty("processor", IsRequired = true)]
    public string Processor
    {
        get
        {
            return this["processor"] as string;
        }
    }
}

[ConfigurationCollection(typeof(EventProcessorMapping), CollectionType = ConfigurationElementCollectionType.AddRemoveClearMap)]
public class EventProcessors : ConfigurationElementCollection
{
    public EventProcessorMapping this[int index]
    {
        get
        {
            return BaseGet(index) as EventProcessorMapping;
        }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new EventProcessorMapping();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((EventProcessorMapping)element).Event;
    }
}

public class RegisterEventProcessorsConfig : ConfigurationSection
{

    public static RegisterEventProcessorsConfig GetConfig()
    {
        return (RegisterEventProcessorsConfig)ConfigurationManager.GetSection("RegisterEventProcessors") ?? new RegisterEventProcessorsConfig();
    }

    [ConfigurationProperty("EventProcessors")]
    public EventProcessors EventProcessors
    {
        get
        {
            var o = this["EventProcessors"];
            return o as EventProcessors;
        }
    }

} 
```

然后在你的`App.config`你可以有：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="RegisterEventProcessors" type="UnitTestProject1.RegisterEventProcessorsConfig, UnitTestProject1"></section>
  </configSections>

  <RegisterEventProcessors>
    <EventProcessors>
      <add event="UnitTestProject1.ClaimantAccountInfoEventType, UnitTestProject1" processor="UnitTestProject1.ClaimantAccountInfoEventProcessor, UnitTestProject1" />
      <add event="UnitTestProject1.EnrollmentEventType, UnitTestProject1" processor="UnitTestProject1.EnrollmentEventProcessor, UnitTestProject1" />
    </EventProcessors>
  </RegisterEventProcessors>
</configuration> 
```

因此，这至少重新定位了映射配置。至于工厂，如果您不介意在制造工厂时实例化处理器类，您可以这样做：

```
public class EventProcessorFactory : IEventProcessorFactory
{
    private readonly Dictionary<Type, IEventProcessor> _eventProcessors;

    public EventProcessorFactory(IEnumerable<EventProcessorMapping> eventProcessorMappings)
    {
        _eventProcessors = new Dictionary<Type, IEventProcessor>();
        foreach (var mapping in eventProcessorMappings)
        {
            AddMapping(Type.GetType(mapping.Event), Type.GetType(mapping.Processor));
        }
    }

    public IEventProcessor GetProcessor<T>() where T : IEventType
    {
        return _eventProcessors[typeof(T)];
    }

    private void AddMapping(Type eventType, Type processorType)
    {
        var processor = (IEventProcessor)Activator.CreateInstance(processorType);
        _eventProcessors[eventType] = processor;
    }
} 
```

在构造函数中，我们传入映射配置元素的集合，然后立即创建处理器并将其存储在私有集合中。然后从工厂获取处理器基本上只是一个字典查找。

这两部分像这样结合在一起：

```
[TestMethod]
public void TestFactory()
{
    var config = RegisterEventProcessorsConfig.GetConfig();
    var factory = new EventProcessorFactory(config.EventProcessors.Cast<EventProcessorMapping>());

    var processor = factory.GetProcessor<EnrollmentEventType>();
    Assert.IsInstanceOfType(processor, typeof(EnrollmentEventProcessor));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T07:37:07.887

对于这种情况，我肯定会在 DI 中使用命名工厂，但我没有 Unity 经验（我自己是 Autofac 人）。但我有点惊讶没有人提出命名约定方法：让 EventType 的名称决定使用什么处理器。这将不需要额外的代码，因为添加了新的事件类型和处理器，只要处理器的名称遵循约定。

```
private static Type GetProcessorFromEventType(Type eventType)
{
    // Assuming phrase "Type" only is present at the end of the EventType name
    var processorName = eventType.Name.Replace("Type", "Processor");
    var processorType = Type.GetType(processorName);
    return processorType;
} 
```

如果类型和处理器位于不同的程序集中，则从名称中获取解析类型的`Type.GetType`方法会变得更加困难，这就是我为此使用 DI 的主要原因。

# javascript - Buttons that move a DIV left or right

> ID：12845015
> 
> 赞同：2
> 
> 时间：2012-10-11T17:16:43.237
> 
> 标签：javascript, jquery, animation

I am attempting to make a div scroll left or right either with a mouseover effect or on-click. However, I am at a loss as to what is going wrong.

Here was my attempt to do this simply:

```
 <head>
    <style>
    #innerscroll{
    margin-right:0px;
    }
    </style>
</head>
<body>
<div id="innerscroll"></div>
<img src="right.jpg" 
onmouseover="document.getElementById('innerscroll').style.marginRight = setInterval(('value' + 1), 100);" />
</body> 
```

Now, trying this, I'm wondering why it doesn't work. What am I doing wrong?

I also tried a more complex approach that also failed. Here's the code for that:

```
 $('.nav-next').click(function(e) {
        e.preventDefault();
        $('#innerscroll').animate({
            'margin-right' : '100px'    
        });                 
    });
    $('.nav-previous').click(function(e) {
        e.preventDefault();
        $('#innerscroll').animate({
            'margin-right' : '-100px'
        });                 
    }); 
```

My last question was closed because I guess I was not specific enough. Whatever details you need please ask for and I'll edit the question!

Edit: I have the option of using jQuery but I would rather not.

Edit2: I am using setInterval to time the mouseover effect. I am thinking that it will move via mouseover or it will move via a click event.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:24:59.490

您应该使用`.style.paddingRight`而不是`.style.padding-right`. [jsfiddle](http://jsfiddle.net/vqzrY/14/)

修改后的代码：

```
<img src="right.jpg" 
onmouseover="onmouseoveronImge();" /> 
```

由于您使用的是 jQuery，因此您可以附加鼠标悬停事件，如下所示

```
<script>
  $('.nav-next').click(function(e) {
    e.preventDefault();
    $('#innerscroll').animate({
        'margin-left' : '+=100px'    
    });                 
});
$('.nav-previous').click(function(e) {
    e.preventDefault();
    $('#innerscroll').animate({
        'margin-left' : '-=100px'
    });                 
});
 function onmouseoveronImge(){
       $('#innerscroll').animate({
          'margin-left': '+=100px'    
      });
}
</script> 
```

注意：我认为您不想使用 setInterval 的值返回。你应该在你的问题中解释你为什么使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:25:53.277

我的解决方案也使用 jquery，如下所示：

使用 2 个按钮，一个用于左移，另一个用于右移

```
$('#innerscroll').animate({
'marginLeft' : "+=50px"
}); 
```

和

```
$('#innerscroll').animate({
    'marginLeft' : "-=50px"
}); 
```

您可以创建一个函数并将值传递给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:27:21.050

填充不能为负值。改为动画边距。所以你的代码应该是这样的：

```
 $('.nav-next').click(function(e) {
    e.preventDefault();
    $('#innerscroll').animate({
        'margin-left' : '100px'    
    });                 
});
$('.nav-previous').click(function(e) {
    e.preventDefault();
    $('#innerscroll').animate({
        'margin-left' : '-100px'
    });                 
});​ 
```

在这里工作 jsfiddle：http: [//jsfiddle.net/vqzrY/](http://jsfiddle.net/vqzrY/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:29:15.760

如果您有如下标记：

```
<div id="container">
    <div id="content">
    </div>
</div> 
```

设置`padding`打开`#container`或`#content`不会使内部`div`移动。您想`margin`在内部设置`div`以使其水平滚动，并`overlay:hidden`在外部设置`div`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T17:30:02.177

首先，您使用的是 jQuery UI 库吗？您的第二个示例看起来可能。

试试这个，它做的事情与你想要完成的事情相似吗？

```
<div id="innerscroll">
  Some Content...
</div>

<div class="nav-next>
  Next
</div>

<div class="nav-previous">
  Previous
</div>

<script type="text/javascript">
  $('.nav-next').click(function(e) {
      $('#innerscroll').animate({
          right: 100    
      });                 
  });

  $('.nav-previous').click(function(e) {
      $('#innerscroll').animate({
          left: 100
      });                 
  });
</script> 
```

如果没有，您的示例看起来像您正在做几件事：

*   使用 CSS 设置填充
*   *在*鼠标悬停时设置填充

那是你想做的吗？

# json - Kendo UI - InvalidOperationException：在序列化类型对象时检测到循环引用

> ID：12845016
> 
> 赞同：1
> 
> 时间：2012-10-11T17:16:45.573
> 
> 标签：json, asp.net-mvc-3, kendo-ui

3 小时前发布（固定链接）

将我的模型绑定到剑道网格时出现以下错误。

*序列化类型为 [my type] 的对象时检测到循环引用*

奇怪的是，导致循环引用的对象类型与该页面的模型对象类型不同......即：

```
@model IEnumerable<Models.Type> 
```

与导致此错误的类型不同。可能是什么问题呢？

这是生成此异常的代码：

```
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.Name).Groupable(false);
    })
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()  
    .DataSource(dataSource => dataSource      
        .Ajax()
        .ServerOperation(false)      
     )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:01:58.537

一个已知的例外。在这里查看：[https ://docs.telerik.com/aspnet-mvc/helpers/grid/troubleshoot/known-exceptions#circular-reference-detected-while-serializing-an-object-of-type](https://docs.telerik.com/aspnet-mvc/helpers/grid/troubleshoot/known-exceptions#circular-reference-detected-while-serializing-an-object-of-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:28:23.473

这个问题是N1启动问题，很多论坛都讨论过。我建议您从[文档故障排除主题](http://docs.kendoui.com/documentation/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting#a-circular-reference-was-detected-while-serializing-an-object-of-type)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:48:18.937

您想将所需的唯一属性选择到匿名类型中，或者选择仅包含您需要定义的属性的类。

它试图序列化对作为模型一部分的其他表的引用。

# imagemagick - ImageMagick 输出的页码

> ID：12845019
> 
> 赞同：3
> 
> 时间：2012-10-11T17:17:04.827
> 
> 标签：imagemagick, command-prompt

所以我必须将多页 pdf 转换为单页 tiff 文件。使用 ImageMagick 是我目前所拥有的

```
convert -density 300 input.pdf -compress group4  output-%d.tiff 
```

输出文件的名称以 output-0.tiff 开头有没有办法让它以 output-1.tiff 开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:24:54.553

如果您坚持使用 ImageMagick 进行 PDF->TIFF 转换，您将无法得到您想要的。

此外，*甚至不是 ImageMagick 自己进行转换*，因为 IM 无法直接处理 PDF。它必须调用 Ghostscript 作为其*“代表”*来阅读 PDF。`-verbose`（如果您将作为第一个参数添加到您使用的命令行中，这可以向您显示）。

另外，转换会很慢：因为 ImageMagick 没有以导致*直接*PDF->TIFF 转换的方式调用 Ghostscript，但它首先调用 Ghostscript 进行 PDF->PNG 转换（在**72dpi**！！），然后是 ImageMagick本身会进行 PNG->TIFF 转换（300 dpi）...

如果您接受我对 PDF->TIFF 转换的建议——直接使用 Ghostscript——您将获得两全其美：

*   您可以将第一个输出页面命名为`output-1.tiff`（或`output-0001.tiff`），
*   并且您也可以进行更快的转换。

我的 Ghostscript 命令行是：

```
gs                    \
  -o output-%03d.tiff \
  -sDEVICE=tiffg4     \
   input.pdf 
```

Ghostscript的`tiffg4`输出设备默认使用 204x196 dpi 的分辨率——这是传真 G4 文件的标准。要*真正*将输出的质量和分辨率提高到*真正的*300 dpi，请使用

```
gs                    \
  -o output-%03d.tiff \
  -sDEVICE=tiffg4     \
  -r300x300           \
   input.pdf 
```

甚至

```
gs                      \
  -o output2-%03d.tiff  \
  -dAlignToPixels=0     \
  -dGridFitTT=2         \
  -dTextAlphaBits=4     \
  -dGraphicsAlphaBits=4 \
  -sDEVICE=tiffg4       \
  -r300x300             \
   input.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:38:09.893

您可以使用`-scene`起始编号，例如：

`convert -density 300 input.pdf -compress group4 -scene 1 output-%d.tiff`

这产生输出：

`output-1.tiff output-2.tiff ... etc`

# redis - Memory allocation in redis

> ID：12845020
> 
> 赞同：2
> 
> 时间：2012-10-11T17:17:05.137
> 
> 标签：redis

After browsing some of the code of Redis, I notice that the "robj" creation is done by calling "createObject" function, which in turn calls "malloc" to alloc memory. So whenever a request comes(e.g. SET uid 1234), there will be a memory allocation process.

My question is, why not pre-allocate the space to reduce memory allocation cost? because of different object size?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T05:56:23.257

> > 我的问题是，为什么不预先分配空间以降低内存分配成本？因为不同的物体大小？

您描述的是内存分配器的工作。在 Redis 中构建这种逻辑并非易事。

默认情况下，Redis 在 Linux 上使用[jemalloc](http://www.canonware.com/jemalloc/)内存分配器。

Jemalloc 有几个优化来减少内存分配开销。阅读以下链接以了解 jemalloc 如何提供帮助 -

1.  [Jemalloc 上的 Facebook 工程博客](http://www.facebook.com/notes/facebook-engineering/scalable-memory-allocation-using-jemalloc/480222803919)
2.  [2006 年的 Jemalloc 纸](http://people.freebsd.org/~jasone/jemalloc/bsdcan2006/jemalloc.pdf)

当 Redis 引入 Jemalloc 时，很多内存管理问题就消失了。这是[antirez（redis 的作者）](http://antirez.com/post/everything-about-redis-24.html)对引入 jemalloc 的看法：

> [snip] 分配器是一件严肃的事情。由于我们引入了特殊编码的数据类型，Redis 开始遭受碎片化的困扰。我们尝试了不同的方法来解决这个问题，但基本上 glibc 中的 Linux 默认分配器真的很糟糕。
> 
> 在 Redis 中包含 jemalloc 是一个巨大的胜利。此更改修复了现实世界系统中的每个碎片案例，并且使用的内存量也有所下降。

PS 您可能会在 redis-db 邮件列表中获得更好、更明智的答案

# javascript - Javascript "member not found"

> ID：12845022
> 
> 赞同：1
> 
> 时间：2012-10-11T17:17:16.717
> 
> 标签：javascript

I have a web page that has some links to pdf files that open in a new scrren. If I click one of the links the new page opens fine. If I click on another link while that page is open it replaces the page with the new page which is fine, however it throws a JS erre saying "member not found"

HTML:

```
helpMenu.add( new AnchorMenuItem("User Guide", "javascript:openHelpWindow('../html/help/user_guide.html');") );
helpMenu.add( new AnchorMenuItem("FAQ", "javascript:openHelpWindow('../html/help/faq.html');") );
helpMenu.add( new AnchorMenuItem("Features", "javascript:openHelpWindow('../html/help/features.html');") );
helpMenu.add( new AnchorMenuItem("Overview", "javascript:openHelpWindow('../doc/Overview.pdf');") );
helpMenu.add( new AnchorMenuItem("Actual Info Guide", "javascript:openHelpWindow('../doc/ActualInfoGuide.pdf');") ); 
```

JS

```
/**
* Function to open the pop-up windows that the radio button
 * or select box options will be chosen from.
 */
function openHelpWindow(url)
{
    var w;
    if (isBrowserNetscape)
    {
        // Netscape
        w = window.open(url, "MSSTHelp", "resizable=yes, scrollbars=yes, menubar=no, location=no, toolbar=no, height=700, width=900, screenX=100, screenY=100");
    }
    else
    {
        // IE
        w = window.open(url, "MSSTHelp", "resizable=yes, scrollbars=yes, menubar=no, location=no, toolbar=no, height=700, width=900, left=100, top=100");
    }
    w.focus();
} 
```

The error is at `w.focus();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:33:17.293

可怕的旧代码。由于参数中的空格，它会在为其编写的浏览器中失败。这是文档[window.open 最佳实践](https://developer.mozilla.org/en-US/docs/DOM/window.open#Best_practices) 无需区分顶部/左侧和 screenX,screenY - 后者是 Netscape 4 和更早版本，如果您希望其他浏览器也可以指定，因为它们会忽略参数他们不需要。可以删除任何 parm=no，并且可以将任何 parm=yes 设置为只是 parm：

**简单版：**

```
function openHelpWindow(url) {
   var w = window.open(url, "MSSTHelp", 
       "resizable,scrollbars,height=700,width=900,screenX=100,screenY=100,left=100,top=100");
   if (w) w.focus();
} 
```

* * *

**根据上述文档**重用已经打开的窗口****

 **```
var w; // global var
function openHelpWindow(url) {
   if (!w || w.closed) {
     w = window.open(url, "MSSTHelp",
        "resizable,scrollbars,height=700,width=900,screenX=100,screenY=100,left=100,top=100");
   }
   else {
     w.location=url; // OR window.open(url, "MSSTHelp"); 
   }
   if (w) w.focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:39:17.090

这是因为您的“w”变量的范围在您声明它的函数内。

为了使其在下一次调用时可以访问，您需要在函数外部声明您的 w var。当您调用该函数时，它会在 /inside/ 函数中创建一个名为“w”的新框，它将引用粘贴到您使用 window.open() 创建的窗口。然后，当函数完成执行时，它会将“w”扔掉。在函数范围之外声明“w”是 /better/，但仍然可能有问题（因为现在您处于全局范围内）。

```
var w = null;
/**
* Function to open the pop-up windows that the radio button
* or select box options will be chosen from.
*/
function openHelpWindow(url)
{
    if (isBrowserNetscape)
    {
        // Netscape
        w = window.open(url, "MSSTHelp", "resizable=yes, scrollbars=yes, menubar=no, location=no, toolbar=no, height=700, width=900, screenX=100, screenY=100");
    }
    else
    {
        // IE
        w = window.open(url, "MSSTHelp", "resizable=yes, scrollbars=yes, menubar=no, location=no, toolbar=no, height=700, width=900, left=100, top=100");
    }
    w.focus();
} 
```

即使这也不是非常有效，就好像窗口仍然打开一样，当您可以简单地告诉您首先打开的窗口转到新的 url 时，您会为每次调用强制重建整个窗口。

```
var w = null;
/**
* Function to open the pop-up windows that the radio button
* or select box options will be chosen from.
*/
function openHelpWindow(url)
{
    if(w == null){
        if (isBrowserNetscape)
        {
            // Netscape
            w = window.open(url, "MSSTHelp", "resizable=yes, scrollbars=yes, menubar=no, location=no, toolbar=no, height=700, width=900, screenX=100, screenY=100");
        }
        else
        {
            // IE
            w = window.open(url, "MSSTHelp", "resizable=yes, scrollbars=yes, menubar=no, location=no, toolbar=no, height=700, width=900, left=100, top=100");
        }
    } else {
        w.document.location(url);
        w.focus();
    }
} 
```

仍然没有效率！看看所有的代码重复！

```
var w = null;
/**
* Function to open the pop-up windows that the radio button
* or select box options will be chosen from.
*/
function openHelpWindow(url)
{
    if(w == null){
        var winSpecs = "resizable=yes,scrollbars=yes,menubar=no," 
                     + "location=no,toolbar=no,height=700,width=900,"
                     + (isBrowserNetscape) ? "screenX=100,screenY=100" : "left=100,top=100";
        w = window.open(url, "MSSTHelp", winSpecs);
    } else {
        w.location(url);
        w.focus();
    }
} 
```

现在，请注意，即使在这个重构的代码中，我们也有一个问题......你确定除了 Netscape 之外的所有浏览器在打开这样的窗口时都使用“left”和“top”吗？除此之外，甚至还有可用性问题和基于浏览器的弹出窗口阻止程序，这可能会干扰您的代码功能。**

# android - How mantain images in my .apk

> ID：12845024
> 
> 赞同：0
> 
> 时间：2012-10-11T17:17:30.937
> 
> 标签：android, apk, android-install-apk

I I'm developing an Android application. When I run the application from Eclipse development enviroment it works good, but, if I install manually the .apk generate in \bin folder, I lost all images that I put in \res folder (drawable-hdpi, drawable-hdpi, etc). Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:19:09.303

在**res中创建一个****可绘制**的新文件夹并尝试将图像放入该文件夹

# php - Passing PHP Session from Page 1 to Page 2

> ID：12845026
> 
> 赞同：0
> 
> 时间：2012-10-11T17:17:39.850
> 
> 标签：php, session, session-variables

I have at the top of my Page1.php the following.

```
<?php
    session_start();
    $_SESSION['ALL_YEAR'] = $_POST['ALL_YEAR'];
?> 
```

I am trying to capture the form selection for a select called ALL_YEAR when this button is pushed:

```
<button type="button" value="Send" id="avgSubmitXLEW_1_12_3" onClick="location.href=this.value">Configure</button> 
```

on Page2.php I have this at the top:

```
<?php
    session_start();
    $home = $_REQUEST['ALL_YEAR'];
?> 
```

Farther down in the body of the page I have this:

```
<? echo $_session['home'];?> 
```

The value is not showing up in the echo? What am I doing wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T17:19:15.700

代替 ：

```
$home = $_REQUEST['ALL_YEAR'];
...
<? echo $_session['home']; ?> 
```

你应该做 ：

```
$home = $_SESSION['ALL_YEAR'];
...
<?php echo $home; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:21:35.103

PHP 变量名区分大小写：

```
 <? echo $_session['home'];?> 
```

应该

```
 <? echo $_SESSION['home'];?> 
```

# time-complexity - way to estimate time complexity which is based on step count

> ID：12845037
> 
> 赞同：1
> 
> 时间：2012-10-11T17:18:20.410
> 
> 标签：time-complexity

I want to ask a question about time complexity.

```
Sum (array,n)
{
1.1 total_sum = 0;
1.2 for (i=0;i<n;i++)
1.2.1 total_sum = total_sum +array[i];
1.3 return total_sum;
} 
```

the total steps for 1.2 statement is 2(n+1).. could anyone tell me that why it is 2(n+1) ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:26:36.587

说，i=n-1。它增加，循环返回；再进行一次比较，这次它的计算结果为假（因为 i 现在等于 n）。总而言之，你运行这个 0, 1, ... ,n 次，每次执行两个操作 - 一起 2(n+1)。请注意，i++ 语句仅被计算 n 次，但在循环开始时您有一个额外的语句 (i=0)。

# android - SQLite with ArrayList and ArrayAdapter

> ID：12845039
> 
> 赞同：1
> 
> 时间：2012-10-11T17:18:29.290
> 
> 标签：android, sqlite, arraylist, android-arrayadapter

Could you please tell me what's wrong with this code. It runs but results are not listed. I just want a simple SQLiteDB running test to finalize my another project. I assume that something wrong with ArrayList use.

```
public class MainActivity extends Activity {

String names;
ListView lvMain;
ArrayList<String> values;
ArrayAdapter<String> adapter;

DBHelper dbHelper;
EditText et;
Button btnAdd;
Button btnRead;
Button btnClear;
Button btnShow;

Cursor c;
int nameColIndex;
int idColIndex;

/**
 * Called when the activity is first created.
 */
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnAdd = (Button) findViewById(R.id.btnAdd);
    btnRead = (Button) findViewById(R.id.btnRead);
    btnClear = (Button) findViewById(R.id.btnClear);
    btnShow = (Button) findViewById(R.id.btnShow);

    dbHelper = new DBHelper(this);
    lvMain = (ListView) findViewById(R.id.lvMain);
    values = new ArrayList<String>();

}

public void onButtonClick(View v) {

    ContentValues cv = new ContentValues();
    String name = et.getText().toString();
    SQLiteDatabase db = dbHelper.getWritableDatabase();

    switch (v.getId()) {

        case R.id.btnAdd:
            cv.put("name", name);

            // вставляем запись и получаем ее ID
            long rowID = db.insert("mytable", null, cv);

            break;

        case R.id.btnRead:

            // делаем запрос всех данных из таблицы mytable, получаем Cursor 
            c = db.query("mytable", null, null, null, null, null, null);

            // ставим позицию курсора на первую строку выборки
            // если в выборке нет строк, вернется false
            if (c.moveToFirst()) {

                // определяем номера столбцов по имени в выборке
                idColIndex = c.getColumnIndex("id");
                nameColIndex = c.getColumnIndex("name");

                do {
                    // получаем значения по номерам столбцов

                    c.getInt(idColIndex);

                names = c.getString(nameColIndex);

                values.add(names);

                    // переход на следующую строку 
                    // а если следующей нет (текущая - последняя), то false - выходим из цикла
                } while (c.moveToNext());

            } else {
                c.close();
            }

            break;

        case R.id.btnClear:

            // удаляем все записи
            int clearCount = db.delete("mytable", null, null);

            break;

        case R.id.btnShow:
            break;
    }

// закрываем подключение к БД

    adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, values);

    lvMain.setAdapter(adapter);

    dbHelper.close();     

    adapter.notifyDataSetChanged();

}

 class DBHelper extends SQLiteOpenHelper {

public DBHelper(Context context) {
  // конструктор суперкласса
  super(context, "myDB", null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) {

  // создаем таблицу с полями
  db.execSQL("create table mytable ("
      + "id integer primary key autoincrement," 
      + "name text,"
      + "email text" + ");");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

} }

```
Here is main, may be I am missing something?

    `<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Name"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp">
            </TextView>
            <EditText
                android:id="@+id/et"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1">
                <requestFocus>
                </requestFocus>
            </EditText>
        </LinearLayout>
        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
            <Button
                android:id="@+id/btnAdd"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="onButtonClick"
                android:text="Add">
            </Button>
            <Button
                android:id="@+id/btnRead"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="onButtonClick"
                android:text="Read">
            </Button>
            <Button
                android:id="@+id/btnClear"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="onButtonClick"
                android:text="Clear">
            </Button>
            <Button
                android:id="@+id/btnShow"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="onButtonClick"
                android:text="Show">
            </Button>
        </LinearLayout>
         <ListView
            android:id="@+id/lvMain"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        </ListView>
    </LinearLayout>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:06:27.440

```
values = new ArrayList<String>(); 
```

`values`是`null`。

改变：

```
dbHelper = new DBHelper(this);
           lvMain = (ListView) findViewById(R.id.lvMain);
           values = new ArrayList<String>();

    }

    public void onButtonClick(View v) {

        ContentValues cv = new ContentValues();
        String name = et.getText().toString();
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        switch (v.getId()) {
            case R.id.btnAdd:
                cv.put("name", name);
                long rowID = db.insert("mytable", null, cv);
                break;

            case R.id.btnRead:
                c = db.query("mytable", null, null, null, null, null, null);
                if (c.moveToFirst()) {
                    idColIndex = c.getColumnIndex("id");
                    nameColIndex = c.getColumnIndex("name");

                    do {
                        c.getInt(idColIndex);
                    names = c.getString(nameColIndex);
                    values.add(names);
                    } while (c.moveToNext());
                } else {
                    c.close();
                }
                break;

            case R.id.btnClear:
                int clearCount = db.delete("mytable", null, null);
                break;

            case R.id.btnShow:
                break;
        }
adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, values);
        lvMain.setAdapter(adapter);
    dbHelper.close();     
    adapter.notifyDataSetChanged(); 

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:25:54.047

尝试调用[`ArrayAdapter.notifyDataSetChanged()`](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29). 这告诉`ListView`底层数据已经改变，它应该失效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:28:29.470

在 onClick() 方法的最后尝试调用`adapter.notifyDataSetChanged();`这会刷新所有使用适配器为视图设置值的视图。

# .net - ICorDebug::CreateProcess crash on Windows 8 in .Net 4.5?

> ID：12845040
> 
> 赞同：1
> 
> 时间：2012-10-11T17:18:31.960
> 
> 标签：.net, com, windows-8

I have a program in .Net 4.5 using `ICorDebug::CreateProcess` ([http://msdn.microsoft.com/en-us/library/vstudio/ms232508.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms232508.aspx)). It work on Windows XP, Vista, 7, but not on Windows 8 : my program stop without any message, even in debug mode. But, the same program, in .Net 4.0, work correctly on Windows 8.

Any idea about this?

Thank in advance :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:35:39.350

我不确定这是否有助于诊断这个问题，但我在 Windows 8 上也发生了类似的事情。

我们有一些旧版 VB6 应用程序正在尝试在 Win 8 上进行测试。

一些应用程序使用 CreateProcessA 运行其他 VB6 应用程序。有些带参数，有些不带参数 - 通常命令行参数指向在 %temp% 中创建的参数文件。

其中大多数运行良好。但是，其中一些根本不会运行。CreateProcessA 返回零。

但是，如果我在 VB 中检查 err.LastDLLError，它会返回 740，这意味着“进程需要提升”。

如果我使用 ShellExecute，它可以正常工作 - 而且 UAC 不会要求提升！

我不知道为什么这几个程序会有这样的行为，因为，正如我所提到的，我认为同样复杂的其他程序可以使用 CreateProcessA 运行得很好。

顺便说一句 - 这些程序在打开或关闭 UAC 的 XP、Vista 和 Win 7 下完美运行。并且它们中的任何一个都不需要升高。

但是 - 底线是 ShellExecute 似乎运行正常，所以我建议发帖者尝试它而不是 CreateProcess。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:31:05.937

正如承诺的那样，我将在私人电子邮件中回复 Etienne（感谢 Etienne 提供复制信息）

> 我相信您在 64 位 Windows 8 机器中运行，并且默认情况下 Visual Studio 将托管进程构建和运行为 64 位进程，除非另有说明。为 x86 平台构建和运行示例不会导致静默崩溃，而是会引发一个错误对话框。
> 
> 在 __CreateProcess 定义中，您使用 uint 作为参数类型。当作为 64 位进程运行时，地址字段是 64 位的，并且在使用 uint 时会被截断。这会导致访问冲突和应用程序失败。您应该使用 IntPtr ，它应该适用于两种位数。
> 
> ```
> [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
> void __CreateProcess(
>      [In, MarshalAs(UnmanagedType.LPWStr)] string lpApplicationName, 
>      [In, MarshalAs(UnmanagedType.LPWStr)] string lpCommandLine, 
>      [In] ref _SECURITY_ATTRIBUTES lpProcessAttributes, 
>      [In] ref _SECURITY_ATTRIBUTES lpThreadAttributes, 
>      [In] int bInheritHandles, [In] uint dwCreationFlags, 
>      [In] IntPtr lpEnvironment, 
>      [In, MarshalAs(UnmanagedType.LPWStr)] string lpCurrentDirectory, 
>      [In, ComAliasName("Debugger.Interop.CorDebug.ULONG_PTR")] uint lpStartupInfo, 
>      [In, ComAliasName("Debugger.Interop.CorDebug.ULONG_PTR")] uint lpProcessInformation, 
>      [In] CorDebugCreateProcessFlags debuggingFlags, 
>      [MarshalAs(UnmanagedType.Interface)] out ICorDebugProcess ppProcess); 
> ```
> 
> API CreateDebuggingInterfaceFromVersion 也已过时，您希望使用 ICLRRuntimeInfo::GetInterface 来创建 ICorDebug 接口。您可以参考 CLR 托管调试器示例以获取代码示例。
> 
> 如果这不能解决您的问题，请告诉我们。

结论：这是与 .NET4 或 .NET4.5 无关的内存损坏。失败是随机的。由于内存损坏，您的应用程序可能在 .NET4 上随机失败，只是碰巧您在 .NET4.5 中更早看到了失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:34:53.437

谢谢大家的帮助。问题已解决：ICorDebug 中我的 CreateProcess 函数及其派生函数的参数存在问题。只是为了测试我是否会遇到与 user1748224 相同的问题，我已经更改了清单：如果我的项目没有管理员权限，我会收到与您相同的消息 user1748224。我不知道它在 VB6 中是如何工作的，但是在 .Net 中，为了避免这个问题，我们只需要更改主应用程序的清单即可。

再次感谢:)

# backbone.js - fetch() method send the default values instead the new ones

> ID：12845043
> 
> 赞同：0
> 
> 时间：2012-10-11T17:18:36.760
> 
> 标签：backbone.js

I have an issue with a model, i instanciate it up with some default values, i am using the `set()` method to change it, and when i use the `fetch()` méthod, i get the defaults values instead the new ones, i tried to log `myModel.toJSON()` in the console and i see the new values, i launch `myModel.fetch()` i get the defaults values on the server side, crazy no ?

Here is the model prototype:

```
window.User = Backbone.Model.extend({
    defaults : {
        id : "1",
        username : "anonymous",
        facebook_id : "1235486421",
        facebook_token : "AEZH93FZFEFSFSFS4545154sfsfSF"
    },
    urlRoot: 'http:/localhost:3000/user',
    initialize : function() {
        console.log('User Constructor...');
        this.url = "http://localhost:3000/user/"+this.get('username')+'/'+this.get('facebook_id')+'/'+this.get('facebook_token');
    }
}); 
```

Here is the chunck of code where i use `fetch()`:

```
 fetch_user: function(){
    var CurrentUser = new User();
    FB.login(function(response) {
        if (response.authResponse) {
            var access_token = response.authResponse.accessToken;
            FB.api('/me', function(response) {
                console.log('Good to see you, ' + response.name + ', id: '+response.id+', token: '+access_token);
                CurrentUser.set('username', response.name);
                CurrentUser.set('facebook_id', response.id);
                CurrentUser.set('facebook_token', access_token);
                console.log('Current user is:  ' + CurrentUser.toJSON());
                CurrentUser.fetch({
                    success: function(_model){
                        console.log('User fetched successfully');
                    },
                    error: function(_model, error){
                        console.log('User fetched unsuccessfully');
                    }
                });
            });
        }
        else {
            console.log('User cancelled login or did not fully authorize.');
        }
    }, {scope: 'email'});
}, 
```

Thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:04:51.957

由于您的 URL 方案不是默认的“/object/id”，因此您应该更新 URL：

```
window.User = Backbone.Model.extend({
    defaults : {
        id : "1",
        username : "anonymous",
        facebook_id : "1235486421",
        facebook_token : "AEZH93FZFEFSFSFS4545154sfsfSF"
    }, events {
        "change" : "updateUrl"
    },
    initialize : function() {
        console.log('User Constructor...');
        this.updateUrl();
    },
    updateUrl : function() {
        this.url = "http://localhost:3000/user/" +
                   this.get('username') +
                   '/'+this.get('facebook_id') + 
                   '/'+this.get('facebook_token');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:18:13.617

我浪费了差不多一个小时。您需要注意的是模型在获取成功方法之后得到更新，

```
 CurrentUser.fetch({
                success: function(_model){
                  console.log(_model);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:52:05.467

Backbone 根据设置为模型的 id 属性的任何内容进行获取。当您实例化新用户时，id 默认设置为 1。当您调用 fetch 时，Backbone 会尝试根据 urlRoot 进行获取（因为它不是集合的一部分），而不是 URL：http:/localhost:3000/user/1

[http://backbonejs.org/#Model-url](http://backbonejs.org/#Model-url)

[http://backbonejs.org/#Model-urlRoot](http://backbonejs.org/#Model-urlRoot)

如果您希望基于某些非 id 属性进行获取，您可能需要考虑覆盖 Backbone 的获取。

# javascript - Flot：标记 - 线条笔划的大小

> ID：12845057
> 
> 赞同：4
> 
> 时间：2012-10-11T17:19:56.830
> 
> 标签：javascript, flot

是否可以更改标记的线条笔画？我已经知道可以改变它的颜色：

```
markings: [ { yaxis: { from: 0, to: 0 }, color: "#000"},
            { xaxis: { from: 0, to: 0 }, color: "#000" }], 
```

我已经使用此解决方案使我的轴没有背景网格线： [display-x-axis-and-y-axis-lines-with-out-the-grid-lines-using-flot](https://stackoverflow.com/questions/7433154/display-x-axis-and-y-axis-lines-with-out-the-grid-lines-using-flot)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T18:10:43.570

只需添加选项：

```
 markings: [ { yaxis: { from: 0, to: 0 }, color: "#000"},
                    { xaxis: { from: 0, to: 0 }, color: "#000" }],
        markingsLineWidth: 2.5, //number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-03T15:58:37.400

除了`markingsLineWidth`适用于所有标记的选项外，您还可以定义`lineWidth`每个标记：

```
markings: [ { yaxis: { from: 0, to: 0 }, color: "#000", lineWidth: 5},  // speficic value
            { xaxis: { from: 0, to: 0 }, color: "#000" }],
markingsLineWidth: 2.5, // default value 
```

源代码链接：
默认值： 每个标记值：[`markingsLineWidth: 2`](https://github.com/flot/flot/blob/master/jquery.flot.js#L605)
[`var lineWidth = m.lineWidth || options.grid.markingsLineWidth;`](https://github.com/flot/flot/blob/master/jquery.flot.js#L2003)

# silverlight-4.0 - 如何最好地等待 Silverlight 4 异步调用

> ID：12845059
> 
> 赞同：0
> 
> 时间：2012-10-11T17:20:11.000
> 
> 标签：silverlight-4.0

我正在努力获取 Silverlight 4 应用程序的数据。我的视图需要获取一些信息，因此它会调用我的 DataProvider。我的 DataProvider 调用 Oracle。这是一个需要回调的异步调用，所以我的 DataProvider 方法需要等待它。但是，如果我在异步调用之后在我的 DataProvider 方法中放置一个 Thread.Sleep 循环，则回调永远不会命中。如果我删除 Thread.Sleep 循环，回调会命中，但到那时我的 DataProvider 方法已经完成，没有任何东西可以返回。

异步性对 View 没有价值；它此时必须拥有这些数据才能继续前进。我希望能够弄清楚的是，如何让 DataProvider 类进行多次数据库调用以响应来自视图的一个请求，并且在它准备好之前不返回。在这种情况下，我不介意视图没有响应；但我这样做的方式是完全锁定应用程序。

这就是我所拥有的：

该视图进行此调用：

```
m_Data = m_DataProvider.GetMyStuffData( some parameters to filter the data ); 
```

DataProvider 识别参数并开始构建 m_Data 对象。这需要多次调用，其中一个如下所示：

```
public override List<MyStuff> GetMyStuff( DateTime _startDay, DateTime _endDay )
{
    var rc = new List<MyStuff>( );
    m_WaitingForData = true;
    var query = MyQueryString;
    var parameters = new string[ ] { "My Parameter" };
    getOracleData(parameters, query, "My Query ID");
    while (m_WaitingForData)
    {
        Thread.Sleep( 20 );
    }
    // process Data which asynchronous call put into a member variable.
    return rc;
} 
```

getOracleData 进行异步调用，将回调连接到 GetTable。

回调方法 GetTable 将数据提取到 GetMyStuff 期望的成员变量中，关闭 m_WaitingForData，然后退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T14:41:25.283

我最终开发了这个小类：

```
using System;
using System.Linq;
using System.Windows;
using System.Collections.Generic;

namespace MyNamespace
{
    public class AsyncDataManager
    {
        // This dictionary will help handle waiting for asynchronous data callbacks.
        private Dictionary<string, int[ ]> m_ExpectedData;
        private Action m_FinalProcess;
        private object m_Locker = new object( );
    public AsyncDataManager( Action _finalProcess )
    {
        m_ExpectedData = new Dictionary<string, int[ ]>( );
        m_FinalProcess = _finalProcess;
    }

    public void SetExpectation( string _key, int _occurrances = 1 )
    {
        m_ExpectedData[ _key ] = new[ ] { _occurrances, 0 };
    }

    public void ManageCallbacks( string _key, Action _action = null )
    {
        lock ( m_Locker )
        {
            m_ExpectedData[ _key ][ 1 ]++;
            if ( _action != null )
            {
                _action( );
            }
            // Once all the expected callbacks have been handled, using a 
            // Dispatcher gets us back onto the UI thread and out of the scope of the lock.
            if ( !m_ExpectedData.Values.Any( v => v[ 0 ] != v[ 1 ] ) )
            {
                Deployment.Current.Dispatcher.BeginInvoke( m_FinalProcess );
            }
        }
    }

    // Without requiring that all expected async calls are complete, we can check for a certain set.
    public bool TestForSubsetComplete( params string[ ] _items )
    {
        return ( !m_ExpectedData.Keys.ToList( )
            .Where( k => _items.Contains( k ) )
            .Any( v => m_ExpectedData[ v ][ 0 ] != m_ExpectedData[ v ][ 1 ] ) );
    }
} 
```

}

我有两个电话要打的一个例子：

```
var asyncMgr = new AsyncDataManager( ( ) =>
{
    // Code to run after all the async processes are complete
} );
asyncMgr.SetExpectation( "Data1" );
asyncMgr.SetExpectation( "Data2" );
m_DataProvider.GetData1( /* arguments for the call */, ( results ) =>
{
    // store the results, then tell asyncMgr that this process is complete
    asyncMgr.ManageCallbacks( "Data1" );
} );
m_DataProvider.GetData2( /* arguments for the call */, ( results ) =>
{
    // store the results, then tell asyncMgr that this process is complete
    asyncMgr.ManageCallbacks( "Data2" );
} ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T13:19:19.603

您应该使用异步回调

[http://www.enterpriseetc.com/post/Three-Ways-to-Handle-Silverlight-Asynchronous-Service-Calls.aspx](http://www.enterpriseetc.com/post/Three-Ways-to-Handle-Silverlight-Asynchronous-Service-Calls.aspx)

然后当工作完成时，它会触发你告诉它的下一段代码

# iphone - 如何将 iPhone 从 iOS 4.2 更新到 4.3 以进行测试？

> ID：12845060
> 
> 赞同：0
> 
> 时间：2012-10-11T17:20:10.933
> 
> 标签：iphone, xcode, cocoa-touch, ipad, xcode4.5

我想知道如何将我的设备从 iOS 4.2 更新到 4.3 以使用 XCode 4.5 对其进行测试，因为该版本的 XCode 不允许在 4.3 中进行测试？如果不可能，是否有任何解决方案可以在 iOS 4.3 上进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:22:28.003

我很遗憾地说您无法将您的设备升级到较旧的固件版本，例如 Apple 不再提供签名的 shsh blob 的 iOS 4.3。您唯一的机会是使用模拟器。

对于未来的项目，您可能会考虑使用 TinyUmbrella 之类的工具来为您的设备/iOS 提取 shsh blob，只要苹果提供它们（目前仅适用于 iOS6）。然后，您将安全地存放它们以备将来使用。

一旦 Apple 停止签署给定的 iOS 版本，安装该版本在概念上与降级相同，因此您可能会发现[这篇文章](http://www.iclarified.com/entry/index.php?enid=16496)很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:22:58.363

如果你的iphone已经越狱并且备份了你的iOS4.3的ssh，那就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:42:21.393

升级到 4.3 将是一个问题。但是，如果您设法使用 iOS 4.3 上的设备，您可以通过创建 Ad Hoc 分发版本并通过 iTunes 或 iPhone 配置实用程序将其同步到手机来在该设备上进行测试。只需确保构建的部署目标设置为 4.3 或更低。

# java - Java中的共享集合锁定

> ID：12845061
> 
> 赞同：4
> 
> 时间：2012-10-11T17:20:14.473
> 
> 标签：java, object, locking, shared

我有一个类，其中包含两个带有一些数据的哈希图。我想每晚更新/重新加载地图中的数据（使用 Quartz 作业），并希望在数据刷新过程中锁定所有其他线程以防止读取。

```
 public class A {

    private Map<String, Object> someMap1 = new ConcurrentHashMap<String, Object>();
    private Map<String, Object> someMap2 = new ConcurrentHashMap<String, Object>();

    public void reloadData() {
        someMap1.clear();
        someMap2.clear();

        // read new data here and re-fill the maps
        ...
    }

    public Object getDataFromMap(String key) {
        // do some logic here and return data from map
        return someObj;
    }
 } 
```

getDataFromMap() 方法应该可供所有“读取器”线程访问，而不会在数据刷新未进行时出现任何阻塞。

另一方面，reloadData() 方法应该等待所有“读取器”完成，然后阻止地图读取并重新加载数据。

reloadData() 的“同步”修饰符不是解决方案，因为它会阻止所有类和所有“阅读器”（如果它们在 getDataFromMap() 逻辑中正在进行）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T17:31:10.613

您的要求完全适合[ReentrantReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)

```
 private Map<String, Object> someMap1 = new ConcurrentHashMap<String, Object>();
    private Map<String, Object> someMap2 = new ConcurrentHashMap<String, Object>();
    private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();
    private final Lock r = rwl.readLock();
    private final Lock w = rwl.writeLock();

    public Object getDataFromMap(String key) {
        r.lock();
        try {
            // do some logic here and return data from map
            return someObj;
        } finally {
            r.unlock();
        }
    }

    public void reloadData() {
        w.lock();
        try {
            someMap1.clear();
            someMap2.clear();
            // read new data here and re-fill the maps
        } finally {
            w.unlock();
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T17:23:03.730

在java中使用并发包中的[Lock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)类。它有 ReenterantReadWriteLock。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T17:55:51.173

与其那样做，不如：

```
public class A {
    private volatile Map<String, Object> someMap1 = new HashMap<String, Object>();
    private volatile Map<String, Object> someMap2 = new HashMap<String, Object>();

    public void reloadData() {
        Map<String, Object> newMap1 = new HashMap<String, Object>();
        Map<String, Object> newMap2 = new HashMap<String, Object>();

        // read new data here and fill the new maps

        someMap1 = newMap1;
        someMap2 = newMap2;
    }

    public Object getDataFromMap(String key) {
        // do some logic here and return data from map
        return someObj;
    }
} 
```

这样，在重新加载期间无需阻止阅读器。缺点是在重新加载期间，您将同时在内存中拥有地图的旧副本和新副本，这将增加您的最大内存消耗。

我上面给出的实现也可能包含一个微妙的竞争条件，因为这两个映射不是原子更新的，所以读者可以看到旧版本`someMap2`但新版本的`someMap1`. 如果这是一个问题，可以通过多种方式相当容易地解决。

# spring - 用于处理 CSV 文件的 Spring Batch

> ID：12845066
> 
> 赞同：0
> 
> 时间：2012-10-11T17:20:41.010
> 
> 标签：spring, batch-processing, spring-batch

我正在寻找用于处理用户上传的 CSV 文件的 Spring Batch (2.1.9)。我需要支持的流程包括许多文件格式的两个主要作业模板。

*   验证上传的文件，包括：
    *   解析和验证每条记录的所有提供字段的格式（使用正则表达式）
    *   映射对象的业务验证
    *   生成详细报告，提供总记录数、无效记录数和错误详细信息（行号和其中发现的所有错误）

只有没有错误的文件才能在上传它的用户触发的第二个作业中得到完全处理：

*   处理文件：
    *   解析文件
    *   将记录存储到数据库（使用服务调用）
    *   提交上传文件中的所有记录，如果有错误则回滚
    *   提供有关处理的反馈（成功或失败）

我查看了各种示例，但找不到以下好的示例：

*   为 ItemReader 中的字段定义正则表达式
*   收集错误并生成文件处理报告。
*   提交或回滚整个作业（无提交间隔）
*   使用单个作业定义并在运行时传递（参考？）到 CSV 字段、正则表达式、业务验证服务和处理服务（基于文件类型）

我将不胜感激任何指向解决这些问题的示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:55:08.770

[自己下载并运行示例。](http://static.springsource.org/spring-batch/spring-batch-samples/index.html)

# asp.net - 在没有可用 API 的情况下在 iOS 上编写 HTTP POST 请求？

> ID：12845067
> 
> 赞同：1
> 
> 时间：2012-10-11T17:20:45.073
> 
> 标签：asp.net, ios, http, post, http-post

我正在开发一个 iOS 应用程序，该应用程序将从书中获取 ISBN，并在专门针对我孩子的学校工作的网站上查找它。该网站没有我可以找到的 API，因此我尝试向他们的 .aspx 表单提交 HTTP POST 请求并获得回复，然后可以将其剥离并存储在 iOS 表格视图中。

我有 UIwebview 设置并尝试编写各种 POST 请求，但我总是返回默认页面。我对 http 请求或 aspx 页面知之甚少，不知道我正在尝试做的事情是否可能。

它看起来也像是在您第一次访问时根据您的用户类型设置了一个 cookie。我只是选择父母，然后进行高级搜索。我已经查看了其他 iOS 库来帮助实现 POST，但我认为我已经挂断了基本格式/现在是否有可能。

该网站是[http://www.arbookfind.com/advanced.aspx](http://www.arbookfind.com/advanced.aspx)

我尝试了很多方法来发送我的请求 - 这是一个例子：

```
NSString *post = @"__LASTFOCUS:\r\n__EVENTTARGET:\r\n__EVENTARGUMENT:\r\nctl00$txtKeycode:\r\nKeyCodeSubmitField:\r\nctl00$ContentPlaceHolder1$radlstFulltextSearchType:ALLWORDS\r\nctl00$ContentPlaceHolder1$txtTitle:\r\nctl00$ContentPlaceHolder1$txtAuthor:\r\nctl00$ContentPlaceHolder1$txtISBN:1452102953\r\nctl00$ContentPlaceHolder1$lstQuizReleasedInLastHowManyDays:0\r\nctl00$ContentPlaceHolder1$lstQuizType:Any\r\nctl00$ContentPlaceHolder1$lstInterestLevel:Any\r\nctl00$ContentPlaceHolder1$txtBLMin:\r\nctl00$ContentPlaceHolder1$txtBLMax:\r\nctl00$ContentPlaceHolder1$lstTopics:0\r\nctl00$ContentPlaceHolder1$lstSubTopics:0\r\nctl00$ContentPlaceHolder1$lstFictionNonFiction:2\r\nctl00$ContentPlaceHolder1$lstLanguage:2\r\nctl00$ContentPlaceHolder1$lstSort:0\r\nctl00$ContentPlaceHolder1$btnDoIt:Go";

 NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
 NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]]; 
```

我感谢帮助、指示、反馈等。

# javascript - 使用 Gloda GlodaIndexer 手动或显式索引 Thunderbird 中的文件夹

> ID：12845070
> 
> 赞同：1
> 
> 时间：2012-10-11T17:20:52.330
> 
> 标签：javascript, html, indexing, thunderbird-addon

1) 打开一个新标签页

```
document.getElementById("tabmail").openTab("chromeTab", {
    chromePage: “indexWithGloda.html”,
}); 
```

2）该文件`indexWithGloda.html`有一个带有onlick的按钮，即使它应该开始索引。

```
function onClickStartIndexingWithGloda()
{
    var inboxFolder = getInboxFolder(); // Find the inbox folder
    GlodaMsgIndexer.indexFolder(inboxFolder, ["force"]);
    var job = GlodaIndexer._indexQueue.pop();
    GlodaMsgIndexer._worker_folderIndex(job);
}

// Adding a messenger lazy getter to the MailServices even though it's not a service
XPCOMUtils.defineLazyGetter(MailServices, "messenger", function () {
    return Cc["@mozilla.org/messenger;1"].createInstance(Ci.nsIMessenger);
});

function getInboxFolder() {
    var inbox = null;
    var accounts = [x for each (x in fixIterator(MailServices.accounts.accounts, Ci.nsIMsgAccount))].filter(function (x) x.incomingServer);

    var server = accounts[0].incomingServer;
    var folder = server.rootFolder;

    var searchForInbox = function(folder) {
        var isInbox = folder.getFlag(Ci.nsMsgFolderFlags.Inbox);
        if (isInbox) {
            inbox = folder;
        }
        else if (folder.hasSubFolders) {
            for each (var subFolder in fixIterator(folder.subFolders, Ci.nsIMsgFolder))
                searchForInbox(subFolder);
        }
    }
    searchForInbox(folder);
    return inbox;
} 
```

问题是`GlodaMsgIndexer._worker_folderIndex(job);`函数调用`onClickStartIndexingWithGloda()`并没有真正开始索引。我想它应该以某种异步方式调用，但我不知道如何异步启动它。我非常感谢这里的任何帮助。还有一个问题，如果文件夹已经被索引，这种方法会起作用吗？如果没有，需要做什么来重新索引一个已经建立索引的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:26:00.550

文件夹是否被索引取决于：

*   用户的全局首选项（mailnews.database.global.indexer.enabled）
*   通过右键单击文件夹，然后点击属性，然后选择“在全局搜索结果中包含此文件夹”可以访问每个文件夹的首选项。

所以我不认为你应该强迫 Gloda 索引一个文件夹：Gloda 能够自动计算何时将消息添加到文件夹，并相应地索引它们。

你能告诉我更多关于你想要实现的目标吗？

*编辑*：您正在寻找的链接可能是

*   [http://mxr.mozilla.org/comm-central/source/mailnews/db/gloda/test/unit/test_index_sweep_folder.js](http://mxr.mozilla.org/comm-central/source/mailnews/db/gloda/test/unit/test_index_sweep_folder.js)
*   [https://mxr.mozilla.org/comm-central/source/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js](https://mxr.mozilla.org/comm-central/source/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js)

# sql - 数据库 - 表之间的关系

> ID：12845071
> 
> 赞同：2
> 
> 时间：2012-10-11T17:20:53.157
> 
> 标签：sql, database, database-design

我是数据库的新手，所以理解某些事情有点困难。

我的主要怀疑是关于一种情况。

一个（愚蠢的）例子：

我有一张总统桌和另一张选举桌。

**总统：** PresidentID Name DateOfBirt ...

**选举：** ElectionID DateOfElection ...

一位总统可以参加多次选举，只要他们来自不同的国家。

我必须制作的新桌子的设计是什么？

对不起，如果这很简单，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:22:27.040

```
ElectionPresident
------------------
PresidentID <--PK, FK to President
ElectionID <-- PK, FK to Election 
```

要解决国家/地区问题，您可以这样做：

```
ElectionPresident
------------------
PresidentID <--PK, FK to President
ElectionID  <-- PK, FK to Election 
CountryID   <-- FK to Country 
```

并有一个唯一的索引`(PresidentID, CountryID)`

# javascript - 尝试将多个图像文件从 nodejs 提供给浏览器 IMG 标签

> ID：12845081
> 
> 赞同：0
> 
> 时间：2012-10-11T17:21:21.983
> 
> 标签：javascript, node.js

在一个名为“assets”的目录中大约有 10 个文件，这些文件是浏览器主布局中各种 img 标签所需的。

发送 10 个单独的请求以获取单独的小图像文件。（最终我会优化这个，只发送一个请求来加载一个包含所有图像的单个图像表）

但有时无法加载所有这些，因此浏览器会显示旋转/加载图标很长时间，直到它超时或加载它们但它们是错误的顺序/匹配（img 标签将显示错误的图像）或它只是不加载图像，每次我刷新页面时它的行为都不同

```
//first request gzips and loads the main layout, subsequent requests loads images

require('fs').readFile('assets/'+params.file, function(err, data) {
  if(err) throw err;
  if(params.file == 'layout.html') {
  require('zlib').gzip(data, function(err, buffer) {
    if(err) throw err;
    output(buffer, params);        
   });
  } else output(data, params);
});

function output(data, params){ 
  switch(params.file.substring(params.file.length-3)) {
    case 'tml': params.headers = {'Content-Encoding': 'gzip'};break;
    case 'ico': params.headers = {'Content-Type': 'image/x-icon'};break;
    case 'ttf': params.headers = {'Content-Type': 'application/x-font-ttf' }; break;
    case 'otf': params.headers = {'Content-Type':'font/opentype'};break;
    case 'png': params.headers = {'Content-Type':'image/png'};break;
    case 'gif': params.headers = {'Content-Type':'image/gif'};break;
    case 'peg':
    case 'jpg': params.headers = {'Content-Type':'image/jpeg'};break;
    default: params.headers = {};
  }
  params.headers['Set-Cookie'] =  '';       
  params.responseOutput(data, params);
} 
```

这感觉有点像那些讨厌的“关闭”问题，但这里没有 forloops 并且来自浏览器的每个图像请求都不应该干扰另一个（..然而它是）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:01:23.530

某些请求有时会提供错误文件的事实表明您确实存在关闭问题，很可能涉及在or回调执行`params`之前进行更改。它的范围是什么，你如何构造它（另一种可能性是它本身的范围是正确的，但它包含对不是的东西的引用）？`readfile``gzip``params`

# c - C funcName(void * self)

> ID：12845082
> 
> 赞同：0
> 
> 时间：2012-10-11T17:21:23.903
> 
> 标签：c, terminology, self, void

我从来没有用 C 编程过，所以请谁能告诉我这个结构是做什么的：

```
void funcName(void * self)
{ ... } 
```

据我了解，funcName 接收到指向未知数据的指针，而这个函数什么也没收到

但是为什么会有一个 void * self

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:24:04.627

这是一个接受 void 指针的函数 - 一个没有特定类型的指针。void 指针类型允许您将指向任何数据类型的指针传递给这样声明的函数。该函数必须在从中读取/写入数据之前将指针转换为适当的类型，或者将指针传递给其他接受`void*`.

任何指针都可以`void*`隐式或显式强制转换为 。例如，您可以`funcName`这样调用：

```
int *ptr = malloc(100*sizeof(int));
funcName(ptr); // No error 
```

然后，您可以使用不同的指针类型调用相同的函数：

```
struct mystruct_t *ptr = malloc(100*sizeof(mystruct_t));
funcName(ptr); // Again, no error 
```

从指针的名称来看`self`，很可能该函数正在尝试使用 C 中可用的构造来模拟面向对象的编程风格。这种风格不是像成员函数那样隐式传递指向数据的指针，而是传递一个明确指向数据的指针。指针通常称为`this`or `self`。

# eclipse - Eclipse 4 e4 - 关于对话框

> ID：12845083
> 
> 赞同：1
> 
> 时间：2012-10-11T17:21:27.730
> 
> 标签：eclipse, rcp, e4

我正在构建一个 Eclipse 4 应用程序，并且我想创建一个从 Eclipse 3 已知的关于对话框。我使用了 Menu Spy 并学习了以下内容：

活跃的贡献位置 URI：

```
menu:help?after=about 
```

活动动作定义标识符：

```
org.eclipse.ui.help.aboutAction 
```

活跃贡献项目类：

```
ActionFactory$WorkbenchCommandAction 
```

贡献插件：

```
org.eclipse.ui.workbench 
```

**问题：** 我能否以某种方式使用此操作在我的应用程序中打开或扩展关于对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:59:51.237

在 e4 中没有像预先实现的“关于”对话框这样的东西。旧的关于对话框依赖于“org.eclipse.ui.IWorkbench”，它在新的 e4 应用程序模型中为空。

所以关于对话框必须从头开始实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T02:55:18.077

这些组件尚未迁移到 Eclipse 4。我为此问题创建了一个[错误报告。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392715)如果您认为解决此问题很重要，请考虑对此报告进行投票。

# c - C中的信号量锁解决方案

> ID：12845094
> 
> 赞同：-1
> 
> 时间：2012-10-11T17:22:15.993
> 
> 标签：c, synchronization, semaphore, locks

**如何解决以下实现信号量同步的问题...**

出于这个问题的目的，我们将对交叉路口进行建模，如上所示，将其划分为四分之一，并确定每个四分之一车道通过该部分进入交叉路口。（澄清一下：我们在道路的右侧行驶。）转弯表示通过交叉路口的一个、两个或三个部分的进展（为简单起见，假设在交叉路口不发生 U 形转弯） . 因此，如果一辆车从北方接近，根据它的去向，它会按如下方式通过十字路口：

```
 | ! + ^ |                   
        | ! + ! |
        | v + ! |
 --------------------------
   <----|NW + NE|  <----
        |   +   |
 ++++++++++++++++++++++++++                 
        |   +   |
  ----> |SW + SE| ---->
 --------------------------
        | ! + ^ |
        | ! + ! |
        | v + ! |

Right: NW
Straight: NW-SW
Left: NW-SW-SE 
```

谁先到达路口，谁先行。

没有两辆车可以同时在交叉路口的同一部分。不要彼此通过相同的方式。如果两辆车从同一个方向接近并朝同一个方向行驶，那么最先到达交叉路口的汽车应该是最先到达目的地的汽车。同样，汽车不应该在十字路口相互“跳跃”。例如，假设一辆车进入十字路口并直行。然后另一辆车从同一方向进入交叉路口并向左行驶。第二辆车应该在第一辆车之后离开路口。然而，假设一辆车进入交叉路口并且向左行驶。如果另一辆车从同一方向进入交叉路口并向右行驶，那么它可能会更早离开交叉路口，因为第一辆车，即使它领先于第二辆车，可能还不能左转。每辆车在接近交叉口（接近）时应打印一条消息，进入交叉口的一个或多个区域（（区域1），区域2和区域3），离开交叉口（离开），指示车号，接近方向和目的地方向。

从给定方向接近交叉路口的汽车应以相同的顺序进入交叉路口。请注意，在汽车接近交叉路口以减速之前不应进行同步。换句话说，不要在进入交叉路口的区域1之前简单地打印接近，例如，两个事件之间应该有一个同步原语。没有其他订购要求。例如，对于从不同方向接近的汽车，没有订购要求。我应该允许两辆或更多辆汽车同时进入十字路口，而不允许来自任何方向的交通使来自任何其他方向的交通饿死。

createcars 创建 20 辆汽车并将它们传递到接近交叉路口，为每辆汽车分配一个随机方向。我需要为他们分配一个随机的转弯方向；我也可以在接近交叉路口执行此操作。

其他例程 gostraight、turnright 和 turnleft 可能有助于或可能不会有助于实施此解决方案。我可以使用它们或丢弃它们。

这是一辆车（8 号车）从东方到达并朝西方行驶的示例输出。请注意，区域（例如，区域 1）是相对于每辆汽车定义的。向右行驶的汽车将输出 region1。直线行驶的汽车将输出 region1 和 region2。向左行驶的汽车将输出 region1、region2 和 region3。

```
approaching: car =  8, direction = E, destination = W
region1:     car =  8, direction = E, destination = W
region2:     car =  8, direction = E, destination = W
leaving:     car =  8, direction = E, destination = W 
```

以下是我的例程..

```
 #include <types.h>
    #include <lib.h>
    #include <test.h>
    #include <thread.h>

    /*
    * Number of cars created.
    */

    #define NCARS 20

    /*
    *
    * Function Definitions
    *
    */

    static const char *directions[] = { "N", "E", "S", "W" };

    static const char *msgs[] = {
        "approaching:",
        "region1:    ",
        "region2:    ",
        "region3:    ",
        "leaving:    "
    };

    /* use these constants for the first parameter of message */
    enum { APPROACHING, REGION1, REGION2, REGION3, LEAVING };

    static void
    message(int msg_nr, int carnumber, int cardirection, int destdirection)
    {
        kprintf("%s car = %2d, direction = %s, destination = %s\n",
                msgs[msg_nr], carnumber,
                directions[cardirection], directions[destdirection]);
    }

    /*
    * gostraight()
    *
    * Arguments:
    *      unsigned long cardirection: the direction from which the car
    *              approaches the intersection.
    *      unsigned long carnumber: the car id number for printing purposes.
    *
    * Returns:
    *      nothing.
    *
    * Notes:
    *      This function should implement passing straight through the
    *      intersection from any direction.
    *      Write and comment this function.
    */

    static void gostraight(unsigned long cardirection, unsigned long carnumber)
    {
        /*
         * Avoid unused variable warnings.
         */

        (void) cardirection;
        (void) carnumber;
    }

    /*
    * turnleft()
    *
    * Arguments:
    *      unsigned long cardirection: the direction from which the car
    *              approaches the intersection.
    *      unsigned long carnumber: the car id number for printing purposes.
    *
    * Returns:
    *      nothing.
    *
    * Notes:
    *      This function should implement making a left turn through the 
    *      intersection from any direction.
    *      Write and comment this function.
    */

    static void turnleft(unsigned long cardirection, unsigned long carnumber)
    {
        /*
         * Avoid unused variable warnings.
         */

        (void) cardirection;
        (void) carnumber;
    }

    /*
    * turnright()
    *
    * Arguments:
    *      unsigned long cardirection: the direction from which the car
    *              approaches the intersection.
    *      unsigned long carnumber: the car id number for printing purposes.
    *
    * Returns:
    *      nothing.
    *
    * Notes:
    *      This function should implement making a right turn through the 
    *      intersection from any direction.
    *      Write and comment this function.
    */

    static void turnright(unsigned long cardirection, unsigned long carnumber)
    {
        /*
         * Avoid unused variable warnings.
         */

        (void) cardirection;
        (void) carnumber;
    }

    /*
    * approachintersection()
    *
    * Arguments: 
    *      void * unusedpointer: currently unused.
    *      unsigned long carnumber: holds car id number.
    *
    * Returns:
    *      nothing.
    *
    * Notes:
    *      I need to change this function to implement sempahore synchronization. These
    *      threads are created by createcars().  Each one must choose a direction
    *      randomly, approach the intersection, choose a turn randomly, and then
    *      complete that turn.  The code to choose a direction randomly is
    *      provided, the rest is left to you to implement.  Making a turn
    *      or going straight should be done by calling one of the functions
    *      above.
    */

    static void approachintersection(void * unusedpointer, unsigned long carnumber)
    {
        int cardirection;

        /*
         * Avoid unused variable and function warnings.
         */

        (void) unusedpointer;
        (void) carnumber;
    (void) gostraight;
    (void) turnleft;
    (void) turnright;

        /*
         * cardirection is set randomly.
         */

        cardirection = random() % 4;
    }

    /*
    * createcars()
    *
    * Arguments:
    *      int nargs: unused.
    *      char ** args: unused.
    *
    * Returns:
    *      0 on success.
    *
    * Notes:
    *       Driver code to start up the approachintersection() threads.
    *      I can modify this code as well for my solution..
    */

    int createcars(int nargs, char ** args)
    {
        int index, error;

        /*
         * Avoid unused variable warnings.
         */

        (void) nargs;
        (void) args;

        /*
         * Start NCARS approachintersection() threads.
         */

        for (index = 0; index < NCARS; index++) {

                error = thread_fork("approachintersection thread",
                                    NULL,
                                    index,
                                    approachintersection,
                                    NULL
                                    );

                /*
                 * panic() on error.
                 */

                if (error) {

                        panic("approachintersection: thread_fork failed: %s\n",
                              strerror(error)
                              );
                }
        }

        return 0;
    }

  [1]: http://i.stack.imgur.com/1389H.gif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:55:32.263

考虑到您的十字路口只有四个区域可供汽车占用，您需要四个信号量和四个线程来解决您的问题。让我们将所有到达路口的汽车放入单个 FIFO 队列中，而不管汽车前进的方向。这将确保汽车按到达顺序通过过境点。然后每个线程从队列中挑选一辆汽车，确定一条路径并等待路径中的第一个信号量。在获取信号量后，它会检查这是否是路径中的最后一个区域，然后在汽车到达交叉口的目的地边界时释放一个信号量。否则，线程将在其路径中的下一个信号量上挂起。在获取下一个信号量后，它会释放先前占用区域的信号量。

几个笔记。这种方法甚至适用于 U 形转弯。当我们在十字路口有 4 辆车并且每辆车都在等待下一个区域空闲时，就像在现实生活中一样，“交通堵塞”是可能的。您可以通过将线程数限制为三个来避免卡纸

# javascript - 如何在javascript中获取月份中的日期？

> ID：12845096
> 
> 赞同：82
> 
> 时间：2012-10-11T17:22:18.073
> 
> 标签：javascript

我需要从 Date 对象中获取月份中的某一天，但该`getDay()`方法似乎返回了星期几。有没有返回月份日期的函数？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-10-11T17:22:55.747

用于`date_object`[`.getDate()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDate)获取月份日期。

从 MDN 文档链接：

> *“根据本地时间返回指定日期的月份日期。”*

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-11T17:23:27.040

尝试[getDate()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)代替。令人困惑的命名，但这就是生活......

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-11T17:24:22.657

```
var date = new Date().getDate(); 
```

来自 Mozilla 开发者网络：

> Date.prototype.getDate() getDate() 方法根据本地时间返回指定日期的月份日期。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getDate](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getDate)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-12-02T22:43:46.787

```
const date = new Date();

const day = date.getDate();
const month = date.getMonth() + 1;
const year = date.getFullYear(); 
```

# java - 在 Tomcat 5.5 上部署应用程序时出现 Struts 错误

> ID：12845103
> 
> 赞同：0
> 
> 时间：2012-10-11T17:22:33.857
> 
> 标签：java, jakarta-ee, struts

我要问一个查询，该查询与出现[以下 struts tile 错误](https://stackoverflow.com/questions/12670222/getting-following-struts-tile-error)重复，因此对此深表歉意，我在 tomcat 5.5 上部署我的应用程序时遇到以下错误，请告知如何克服此问题..

```
 SEVERE: Error configuring application listener of class org.apache.struts2.tiles.StrutsTilesListener
java.lang.ClassNotFoundException: org.apache.struts2.tiles.StrutsTilesListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3743)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:736)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:448)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433)
Oct 1, 2012 2:26:51 PM org.apache.catalina.core.StandardContext listenerStart 
```

问题是，在我的项目类路径中，jar 是 struts2-tiles-plugin-2.0.9.jar 我应该使用新的 struts2-tiles-plugin-2.2.1 这将解决我的问题吗在 tomcat 5.5 上部署我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:55:45.310

将所有需要的 tile jar 文件放在项目 lib 文件夹中。请参阅下图以供参考。

[http://img.viralpatel.net/2009/12/struts2-tiles-jar-files.png](http://img.viralpatel.net/2009/12/struts2-tiles-jar-files.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:43:39.727

按照此链接中的说明，复制您的 tomcat 文件夹中的所有 jar 文件。eclipse tomcat 插件在 conf/Catalina/localhost 中将一些配置（用于 Eclipse WTP）包括类路径定义放入我的 webapp 上下文的 tomcat 中。这是自动的。类路径包括大多数 jar，但不是全部。 [http://struts.1045723.n5.nabble.com/ClassNotFoundException-StrutsTilesListener-td3553672.html](http://struts.1045723.n5.nabble.com/ClassNotFoundException-StrutsTilesListener-td3553672.html)

# c# - 正确处理成员 TcpClient

> ID：12845105
> 
> 赞同：1
> 
> 时间：2012-10-11T17:22:53.860
> 
> 标签：c#, idisposable, tcpclient

我有一个有 TcpClient 成员的类。例如：

```
class CustomNetClient
{
    TcpClient tcp;
    NetworkStream ns;
    //...
} 
```

我想确保它正确关闭。如此实施`IDisposable`：

```
class CustomNetClient
{
    TcpClient tcp;
    NetworkStream ns;

    public CustomNetClient()
    {
        tcp = new TcpClient("1.1.1.1",80);
        ns = tcp.GetNetworkStream();
    }

    public void Dispose()
    {
        tcp.Close();
        ns.Close();
    }

    //...
} 
```

在应用程序中，我调用`CustomNetClient`with `using`。

```
//...
using(CustomNetClient nc=new CustomNetClient)
{
     // This will be a long long process, connection will stay open
} 
```

这是一个很好且足够的做法，还是您有任何建议/疑虑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:37:11.803

如果您可以更早地释放 tcpClient 对象，您应该这样做。也就是说，如果 CustemNetClient 的生命周期与您不再需要 tcpClient 的时间不同，您应该提前释放 tcpClient。但是，如果在您不再需要 tcpClient 的同时 CustomNetClient 将不复存在，那么您的代码就可以了

当您想知道是否应该在 dispose 方法中释放成员的资源时，您需要问自己的主要问题是，`"Can I release them correctly any earlier"`如果答案是肯定的，那么您应该提前释放，如果不是，那么 dispose 方法是适当的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:37:37.827

我建议实现终结器方法和 IDisposable 接口实现。如果由于某种原因未使用 using 语句，GC 将调用终结器，终结器将释放资源。这基本上是一种故障安全机制。

# c - C: char 大于一个字节？

> ID：12845111
> 
> 赞同：3
> 
> 时间：2012-10-11T17:23:00.273
> 
> 标签：c, char

我正在`char`从这样的微控制器设备中读取类型的缓冲区：

```
char data_buffer[DATA_LEN];
FILE *aq_dev = fopen(argv[1], "r");

fread(data_buffer, 1, DATA_LEN, aq_dev);

fclose(aq_dev); 
```

在这个缓冲区 blob 中有无符号的 16 位整数，每个整数分布在缓冲区中的两个条目上。例如有

```
data_buffer[10] = 0x07
data_buffer[11] = 0xc3 
```

我想读出`0x07c3`它等于 1987。尽管我最初认为我可以用`uint16_t`指针访问缓冲区并直接读取值，但我必须做一些奇怪的位掩码：

```
int value = (buffer[10] << 8) + buffer[11]; 
```

给出超过 35000 的**错误值**，而看似无用的位掩码如

```
int value = ((buffer[10] & 0xff) << 8) + (buffer[11] & 0xff); 
```

返回**正确的值**。

**数组的条目如何`char`大于一个字节？** 根据我的`limits.h`(Linux, x86_64) 有`#define CHAR_BIT 8`.

有人可以告诉我我的代码有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T17:29:31.877

您的问题是`char`在您的平台上签名。因此，如果`buffer[11]`设置了的高位，它将是一个负值，并且当您在表达式中使用它时，它将首先被提升为（负）整数，从而有效地将高位传播`char`到所有高位位置。

```
buffer[11]   (char)                0xc3 -61
             (int)           0xffffffc3 -61      // sign-extended 
```

`&`-ing with `0xff`works的原因是在执行操作之前将`char`值提升到：`int``&`

```
buffer[11]   (char)                0xc3 -61
             (int)           0xffffffc3 -61      // sign-extended
    & 0xff   (int)           0x000000c3 195 
```

修复是`unsigned char`在执行位操作之前强制转换：

```
int value = (((unsigned char) buffer[10]) << 8) | ((unsigned char) buffer[11]);

buffer[11]   (char)                0xc3 -61
             (unsigned char)       0xc3 195
             (int)           0x000000c3 195 
```

`buffer`制作一个数组可能更容易`unsigned char`。

# python - Python：使数组的最后一项成为第一项

> ID：12845112
> 
> 赞同：7
> 
> 时间：2012-10-11T17:23:00.800
> 
> 标签：python, list

这是一个非常简单的问题，但我似乎无法为它找到一个满意的答案。

在 Python 中，最好的方法是使列表的最后一项成为第一个“推动”列表其余部分的项。

做的事情：

```
>>> a=[1,2,3,4]
>>> a[?????]
[4, 1, 2, 3] 
```

我知道我总是可以玩`len`，列表连接......

```
>>> a=[1,2,3,4]
>>> [a[len(a)-1]] + a[0:len(a)-1]
[4, 1, 2, 3] 
```

但这看起来不对……“ *Pythonic* ”，如果可以的话

先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T17:23:44.687

切片比这更聪明一点；您可以使用*负*索引从末尾开始计数：

```
a[-1:] + a[:-1] 
```

演示：

```
>>> a=[1,2,3,4]
>>> a[-1:] + a[:-1]
[4, 1, 2, 3] 
```

这适用于要移动到前面的任意数量的元素：

```
>>> a[-2:] + a[:-2]
[3, 4, 1, 2] 
```

像这样使用切片在速度上与使用`.insert()`+相当`.pop()`（在一个简短的列表中）：

```
>>> timeit.timeit('a[-1:] + a[:-1]', 'a=[1,2,3,4]')
0.59950494766235352
>>> timeit.timeit('a.insert(0,a.pop(-1))', 'a=[1,2,3,4]')
0.52790379524230957 
```

但是如果您需要移动多个元素，则可以胜出：

```
>>> timeit.timeit('a[-2:] + a[:-2]', 'a=[1,2,3,4]')
0.58687901496887207
>>> timeit.timeit('a.insert(0,a.pop(-1));a.insert(0,a.pop(-1))', 'a=[1,2,3,4]')
1.0615170001983643 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T17:36:24.027

你可能想看看[deque](http://docs.python.org/library/collections.html#collections.deque)，如果你做了很多这样的事情，它们已经过优化（内存方面）来做你所要求的。

```
from collections import deque

>>> a = deque([1,2,3,4])
>>> a.rotate(1)
... deque([4, 1, 2, 3]) 
```

因为我们要`timeit`比较...

```
>>> setup = """from collections import deque
               a = deque([1,2,3,4])"""
>>> print timeit.timeit('a.rotate(1)', setup=setup)
... 0.219103839131 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T17:24:11.577

```
In [103]: a=[1,2,3,4]

In [104]: a.insert(0,a.pop(-1)) # pop(-1) removes the last element 
                                # and use insert() to insert the popped
                                #  element at 0th endex

In [105]: a
Out[105]: [4, 1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T19:15:30.370

如果您只需要转储任意访问的列表，正如您在@kreativitea 的评论中提到的那样，甚至可能不需要重新排序，您可以设计一个任意访问生成器：

```
size = 10
l = range(size)

# use a generator expression to yield slices of the list according 
# to your own order.
# note that no error checking is enforced, and that overlapping 
# and invalid accessRanges will work, so depending on the usage
# you have for this function, you might want to add some 
# sanity checks, like ensuring no overlap between accessRanges
# and that each item is accessed only once.
def ArbitraryListAccessor(listObj, accessRanges):
    for ar in accessRanges:
        for item in listObj[ar[0]:ar[1]]:
            yield item

# to dump the access-ordered list generator as a real list, you need to
# iterate over it, for example, with a list comprehension:
[i for i in ArbitraryListAccessor(l, ((-1,None), (0,-1)))]
# [9, 0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

它比双端队列慢，但比创建新列表快。对于多次迭代，它的速度大约是双端队列的两倍，但是对于单次运行（例如，只需以任意顺序读取列表一次），它是相当的（例如微秒级）。

这里的好处是您可以定义要使用的任何随机访问范围。您还可以用对象替换函数中的范围`Slice`并将其实现为常规列表切片（但是您已经提供了切片元组或切片对象。）

# ruby - 使用 WHERE 过滤数据库结果

> ID：12845114
> 
> 赞同：2
> 
> 时间：2012-10-11T17:23:06.603
> 
> 标签：ruby, database, search, conditional-statements, where

我有一个包含 URL 路径的数组，我希望能够在我的数据库中的一个表中搜索数组中指定的 URL 的字段之一（标记为“URL”）。

所以我有一个我想要实现的简化版本。

```
urls = ["url1", "url2", "url3", "url4", ... ]
urlsInDB = []
results = Link.all
urls.each() do |url|
 if not results.where(:url=>url).blank?
   urlsInDB << url
 end
end 
```

但是我知道您不能对“.all”获得的一组结果调用“.where”。我想这样做，以便数据库只查询一次，而不是针对***urls***中的每个 URL，因为它可以有长度***n***并且需要***n 个***查询。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:26:10.287

在 SQL 中，您可以这样说：

```
SELECT * FROM links WHERE url IN ('url1', 'url2', 'url3'); 
```

您可以通过以下方式使用 ActiveRecord 执行此操作：

```
Link.where(:url => ['url1', 'url2', 'url3']) 
```

如果您只想获取匹配的 URL 数组，请说：

```
Link.select(:url).where(:url => ['url1', 'url2', 'url3']).map(&:url)
# SQL: SELECT url FROM links WHERE url IN ('url1', 'url2', 'url3')
# => ['url1', 'url2'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:26:54.403

这是简化版本，假设您使用的是 activerecord 并且在最新的 rails 版本上。确保使用`pluck`，因为它比使用迭代两次更好`map`

```
urls = ["url1", "url2", "url3", "url4", ... ]
urlsInDB = Link.where(:url => urls).pluck(:url) 
```

# wicket - 控制器内的页面导航

> ID：12845126
> 
> 赞同：3
> 
> 时间：2012-10-11T17:24:07.697
> 
> 标签：wicket

在 Wicket“控制器”中进行页面导航的方法是什么？我想转到另一个内部页面并根据页面内的数据传入参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:36:06.567

我找到了一个很好的页面导航方法：

```
public void onSubmit() {
        PageParameters params = new PageParameters();
        params.add("param1", "value1");
        setResponsePage(ListContacts.class, params);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:33:58.700

这不仅仅是一种好方法，它还是显示可收藏页面的方法。

如果你想显示一个不可加入书签的页面（或一个不可加入书签的页面），你可以像这样实例化你的页面类：

```
setResponsePage( new ListContacts( param1, param2...) ); 
```

（注意这里的参数不需要是字符串，类型安全是 Wicket 的一大优势。）

忠告，了解Wicket 中[可收藏和不可收藏页面之间的区别非常重要。](https://cwiki.apache.org/confluence/display/WICKET/Bookmarkable+pages+and+links)

# java - 抽象不同数据库的数据类型异质性

> ID：12845128
> 
> 赞同：0
> 
> 时间：2012-10-11T17:24:10.983
> 
> 标签：java, database, wsdl

在我目前的项目中，我需要抽象不同数据库之间的数据类型异质性。

例如，我在 MySQL 数据库中有一个表。表名是`FIRSTTABLE(badgeID *Integer* , pref INT)`。

我在 Apache-Derby 数据库中有一个表。表名是`FIRSTTABLE (badgeID *varchar(12)*, pref INT)`。

现在，查询组件同时查询 MySQL 数据库和 Apache Derby 数据库，badgeID 为“double”。

我的要求是查询组件不应该知道底层数据库（MySQL 或 Apache Derby）。它的查询应该独立于数据库的类型。

我该如何解决这个问题？我的研究问题不仅限于 MySQL 或 Apache-Derby。为清楚起见，我以 Apache-Derby 和 MySQL 为例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:35:27.793

你必须写一个适配器。您的适配器可以是一个 Java 类或多个 Java 类。

根据您的示例，它看起来像这样。

```
public class DatabaseAdapter {

    private DatabaseType type;

    public DatabaseAdapter(DatabaseType type) {
        this.type = type;
    }

    public ResultSet selectFirstTable(double badgeID) {
        if (type == DatabaseType.Derby) {
            String s = Double.toString(badgeID);
            return derbySelectFirstTable(s);
        } else if (type == DatabaseType.MySQL) {
            int i = (int) badgeID;
            return mysqlSelectFirstTable(i);
        } else {
            return null;
        }
    }

}

public enum DatabaseType {
    MySQL, Derby
} 
```

另一种更好的编码方式是使用接口。同样，使用您的示例，代码看起来像这样。

```
public interface Database {
    public ResultSet selectFirstTable(double badgeID);
}

public class MySQLDatabase implements Database {

    public ResultSet selectFirstTable(double badgeID) {
         int i = (int) badgeID;
         // code to select first table in MySQL
    }

}

public class DerbyDatabase implements Database {

    public ResultSet selectFirstTable(double badgeID) {
        String s = Double.toString(badgeID);
        // code to select first table in Derby
    }

} 
```

在您的代码中的某处，您将使用正确的数据库类型初始化数据库接口。

```
Database database = null;
if (type == DatabaseType.MySQL) {
    database = new MySQLDatabase();
} else if (type == DatabaseType.Derby) {
    database = new DerbyDatabase();
} 
```

# sql - t-sql：学术，寻找更高效/更好的查询方式

> ID：12845132
> 
> 赞同：0
> 
> 时间：2012-10-11T17:24:39.447
> 
> 标签：sql, group-by, union

这段代码有效，但看起来非常“老派”。有没有人有更好的方法在单个查询中选择和分组？基本上，这只是一个通用设置，只有一个标题表、一个用于接送的子标题表、一个用于下车的子标题表和每个的详细信息表。

```
 select h.id
  ,h.col1 as Customer
  ,h.col2 as Req
  ,d.subid as DropId
  ,d.col1 as DropCity
  ,d.col2 as DropLoc
  ,dd.detid as DropDetailId
  ,dd.col1 as DropSpot
  ,dd.col2 as DropAWBorPackage
  ,NULL as PickupId
  ,NULL as PickUpCity
  ,NULL as PickUpLoc
  ,NULL as PickupDetailId
  ,NULL as PickupLoc
  ,NULL as PickupAWBorPackage
 from [scratch].GenericHeader h
   inner join [scratch].GenericSubHeader d on d.id = h.id
   inner join [scratch].GenericDetail dd on dd.id = h.id
     and dd.id = d.id
     and dd.subid = d.subid
 UNION ALL   
  select h.id
   ,h.col1 as Customer
   ,h.col2 as Req
   ,NULL as DropId
   ,NULL as DropCity
   ,NULL as DropLoc
   ,NULL as DropDetailId
   ,NULL as DropSpot
   ,NULL as AWBorPackage
   ,p.sub2id as PickupId
   ,p.col1 as PickUpCity
   ,p.col2 as PickUpLoc
   ,pp.det2id as PickupDetailId
   ,pp.col1 as PickupLoc
   ,pp.col2 as PickupAWBorPackage
  from  [scratch].GenericHeader h
    inner join [scratch].GenericSubHeader2 p on p.id = h.id
    inner join [scratch].GenericDetail2 pp on pp.id = h.id
      and pp.id = p.id
      and pp.sub2id = p.sub2id
  order by Req,DropId,DropDetailId,PickupId,PickupDetailId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:40:55.027

我认为没有办法在一条 SQL 语句中获取相同的数据。您可能想要进行两个 SQL 查询，一个用于下车数据，另一个用于取货数据。

# c - 互质数小于某个其他数

> ID：12845133
> 
> 赞同：-1
> 
> 时间：2012-10-11T17:24:42.220
> 
> 标签：c

我想编写一个函数来查找小于数字 M 的数字 N 的互质数，使得 M

为此，我参考了此链接[修改 Euler Totient Function](https://stackoverflow.com/questions/12709813/modifying-euler-totient-function)

我写了以下递归代码。

```
int f(int *factors, int start, int nf, int m) //nf=no. of factors, start=0, m=M
{
    if(start == nf-1) 
        return (m / factors[start]);

    return (m / factors[start]) + f(factors, (start + 1), nf, m) - ((f(factors, (start + 1), nf, m)) / factors[start]);
} 
```

但是，我得到了错误的答案。

我想解决这个问题[http://www.spoj.pl/problems/HNUMBERS/](http://www.spoj.pl/problems/HNUMBERS/)

我的代码为给定的测试用例给出了正确的答案，但对其他一些用例却失败了（因为他们向我展示了错误的答案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:14:02.760

您的函数`f`（您也许应该选择一个更具描述性的名称）似乎是为了返回不超过`m`可被数组中任何素数整除的数字计数`factors`，从索引`start`开始。

```
int f(int *factors, int start, int nf, int m) //nf=no. of factors, start=0, m=M
{
    if(start == nf-1) 
        return (m / factors[start]);

    return (m / factors[start]) + f(factors, (start + 1), nf, m)
              - ((f(factors, (start + 1), nf, m)) / factors[start]);
} 
```

显然，只有一个素数`p`，计数是`m / p`。到目前为止，一切都很好。现在，另一部分的想法是，不超过`m`可被`p`或后来的素数之一整除的数的计数是

```
count_multiples_of_p + count_multiples_of_other - count_multiples_of_p_and_other 
```

到目前为止是正确的。但是你的实现假设

```
count_multiples_of_p_and_other = count_multiples_of_other / p 
```

这只是渐近正确的。例如考虑三个素数`[2, 3, 5]`和`m = 20`。

你的函数返回

```
F([2,3,5], 20) = 20/2 + F([3,5], 20) - F([3,5], 20)/2
    -- F([3,5], 20) = 20/3 + 20/5 - (20/5)/3 = 6 + 4 - 1 = 9
               = 10 + 9 - (9/2) = 10 + 9 - 4 = 15 
```

但是如果你数一下，有六个数`<= 20`不能被三个素数中的任何一个整除`1, 7, 11, 13, 17, 19`，所以只有 14 是三个素数中的任何一个的倍数。

解释 的倍数`p`和任何后续素数的正确方法是计算任何不超过 的后续素数的倍数`m/p`，因为如果`k`是 的倍数`p`以及至少一个后续素数，那么`k/p`就是倍数不超过的后期素数之一`m/p`。

所以修复你的函数只需要移动一个括号（好吧，两个，因为你有这么多），

```
int f(int *factors, int start, int nf, int m) //nf=no. of factors, start=0, m=M
{
    if(start == nf-1) 
        return (m / factors[start]);

    return (m / factors[start]) + f(factors, (start + 1), nf, m)
              - ((f(factors, (start + 1), nf, m /* )) */ / factors[start]) ));
    //                                          ^^^^^^^^                   ^^
} 
```

（并且您有几对多余的括号，您可以考虑删除其中的一些）。

# html - 如何使用 CSS3 让我的链接在 :hover 上发光？

> ID：12845134
> 
> 赞同：4
> 
> 时间：2012-10-11T17:24:41.597
> 
> 标签：html, css, glow

> **可能重复：**
> [发光文本 (HTML CSS)](https://stackoverflow.com/questions/5201949/glowing-text-html-css)

所以我正在寻找一个 100% css 的文本发光效果解决方案。**我尝试了 text-shadow**但我无法让它看起来像我想要的那样。我能够使用 box-shadow 实现效果。但是，这只在元素边缘的外部发光，而内部则为空白。这是一张图片：

![在此处输入图像描述](../Images/17e79cd167e9800c123672848c7911ce.png)

如何在没有空白的情况下获得像上面那样漂亮的外发光？

我的代码很简单`<li><a></a></li>`，在 li 和标签上都有悬停 css。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T17:27:35.650

```
a:hover { text-shadow: 0 0 5px #ff0000; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:29:01.410

悬停时的文本阴影怎么样

像这样

```
<li>
  <a></a>
</li> 
```

css

```
li a:hover {
  text-shadow: 2px 2px 10px #000000;

  filter: dropshadow(color=#000000, offx=2, offy=2);
} 
```

**[在这里提琴](http://jsfiddle.net/wRhUa/2/)**

**[在此处](http://css3generator.com/)**生成您的 css 3 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:14:08.697

你可以用一个额外的元素来做到这一点

[jsfiddle 示例](http://jsfiddle.net/Pj94p/)（或[全屏](http://jsfiddle.net/Pj94p/show)）

HTML

```
<ul id="nav">
    <li><span></span><a href="#">Home</a></li>
    <li><span></span><a href="#">Products</a></li>
    <li><span></span><a href="#">Really Long Nav Item</a></li>
</ul> 
```

CSS

```
#nav {background-color:#000;overflow:hidden;}
#nav li {float:left;position:relative;}
#nav a {display:block;background:transparent;color:#fff;font-weight:bold;text-decoration:none;padding:20px;position:relative;}

#nav li:hover span {
    position:absolute;
    left:50%;top:50%;
    margin-left:-35%;
    width:70%;height:0px;
    box-shadow:0 0 20px 12px rgba(150, 180, 200, .6);
    border-radius:10px 6px;
} 
```

您可能会跳过额外的`<span>`元素，并使用`:before`锚点或列表项上的伪元素来执行此操作​</p>

# asp.net - ASP.NET - 解除标签文本以传递变量

> ID：12845136
> 
> 赞同：0
> 
> 时间：2012-10-11T17:24:52.737
> 
> 标签：asp.net

我是 ASP.NET 的新手

我尝试做的是在 lblProposedID 字段中捕获唯一 ID (ProposedID)，并将其传递到另一个页面。

GridView 中的标签

```
<asp:TemplateField HeaderText="ID" 
    SortExpression="ID" ItemStyle-Width="5%">
    <ItemTemplate>
    <asp:Label ID="lblProposedID" runat="server" 
        Text='<%#Eval("ProposedID") %>'>
    </asp:Label>
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:TemplateField> 
```

代码背后

```
private void GridView1_RowCreated(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
{
    String rColor;
    System.Drawing.ColorConverter colConvert = new ColorConverter();

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        int RowNum = e.Row.RowIndex;
        if (RowNum % 2 == 1)
        {
            rColor = "#FFFFFF";
            //e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#DDDDDD'");
        }
        else
        {
            rColor = "#F5F5F5";
            //e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='" ++ "'");
        }

        e.Row.BackColor = (System.Drawing.Color)colConvert.ConvertFromString(rColor);
        e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='" + rColor + "'");
        e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='#00FFFF'");
        e.Row.Attributes.Add("onclick", "window.open('popup.aspx?ProposedID=" + (Label)  e.Row.FindControl("lblProposedID") + 
        "','cal','width=600,height=300,left=270,top=180')"); 
        //e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
    }
} 
```

这是我无法让它工作的线路。

```
e.Row.Attributes.Add("onclick", "window.open('popup.aspx?textbox={0}" + (Label)e.Row.FindControl("lblProposedID") + 
"','cal','width=600,height=300,left=270,top=180')"); 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:28:47.040

您需要将 js 行的一部分更改为：

`((Label)e.Row.FindControl("lblProposedID")).Text`

这将从标签中获取实际文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:55:49.000

改为使用`OnRowDataBound`。该事件中的文本始终为空，但是当我将其更改为 RowDataBound 时，它选择了 ID

**添加 RowDataBound 事件**

```
<asp:GridView runat="server" ID="GridView1" 
AutoGenerateColumns="false" OnRowDataBound="GridView1_RowCreated"> 
```

**代码隐藏**

```
 protected void GridView1_RowDataBound(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
    {
        String rColor;

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int RowNum = e.Row.RowIndex;
            if (RowNum % 2 == 1)
            {
                rColor = "#FFFFFF";
                //e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#DDDDDD'");
            }
            else
            {
                rColor = "#F5F5F5";
                //e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='" ++ "'");
            }

            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='" + rColor + "'");
            e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='#00FFFF'");
            e.Row.Attributes.Add("onclick", "window.open('popup.aspx?ProposedID=" + ((Label)e.Row.FindControl("lblProposedID")).Text +
            "','cal','width=600,height=300,left=270,top=180')");
            //e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
        }
    } 
```

# c - 如何完成c编程中的倒计时挑战

> ID：12845141
> 
> 赞同：-1
> 
> 时间：2012-10-11T17:25:02.720
> 
> 标签：c, xcode4

有人可以帮我解决这个问题。我快到了，我只需要一点推力。我应该将输出从 99 倒数并倒数 3（我正确地解决了这个问题），但如果遇到可被 5 整除的数字，我还需要输出打印“找到一个”！我需要帮助。继承人我到目前为止。请注意，即使我有解决股息的正确功能，代码也不会打印“找到一个”。

```
#include <objc/objc.h>
#include <stdio.h>

int main(int argc, const char * argv[])
{
    int i = 99;
    while (i > -1) {
        printf("%d\n", i);
        i = i-3;
    }
{
if (i%5==0) printf("found one\n");
}
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:27:18.960

您正在寻找模运算符

```
if (i % 5 == 0) // The number is divisible by 5 
```

模运算符计算除法后的余数。如果余数为零，则整数可以被模操作数整除，在本例中为 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:27:58.473

我给你一个提示。模数 (%) 运算符返回整数除法后的余数。所以 11 % 10 = 1 和 15 % 5 = 0。给定您的代码，您应该可以从那里开始！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:31:04.337

改为使用`if(i%5 == 0)`。这会检查它是否除以 5 - 没有余数。

# perl - Perl 和 Data::Dumper::HTML + cgi

> ID：12845142
> 
> 赞同：0
> 
> 时间：2012-10-11T17:25:17.043
> 
> 标签：perl, data-dumper

首先我的英语不是最好的，谢谢你的理解。

部分代码主体 index.cgi

```
my ($url, $params) = split(/\?/, $ENV{'REQUEST_URI'}); 
my @pairs = split(/&/, $params);

foreach $pair (@pairs) {

    my ($name, $value) = split(/=/, $pair);
    $value =~ tr/+/ /;
    $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
    $PARAM{$name} = $value;
}
my $consulta = $PARAM{'buscar'};

print CGI::header();
print qq{<div style="font-family: monospace">\n};
$mysqltest->buscar($consulta);
print "\n<br /><br />\n";
print "\n</div>\n"; 
```

模块搜索和结果在 cgi -> index.cgi 中打印

```
sub buscar{
    my $self = shift;
    my $keyword = shift;

    die "not work" if not $self->{mysqlopen};

    my $queryKeyword = $self->{connect}->prepare("SELECT * FROM savebookmarks WHERE MATCH (url,descripcion) AGAINST ('$keyword');");
    $queryKeyword->execute();

    while (my $resultKeyword = $queryKeyword->fetchrow_hashref()) {

        print dumper_html("$resultKeyword->{id} $resultKeyword->{descripcion} $resultKeyword->{url}");
    }
    $queryKeyword->finish();
    return;
} 
```

index.cgi 中的结果打印输出

```
...
$VAR1 = 'The Python Standard Library â€” Python v2.7.2 documentation http://docs.python.org/library/';
$VAR1 = 'python-nmap : using nmap from python http://xael.org/norman/python/python-nmap/';
$VAR1 = 'Manejo de Excepciones en Python Â« Tutorial Python http://tutorial-python.com.ar/?p=193';
$VAR1 = 'FAQ\'s de Python - Foros del Web http://www.forosdelweb.com/f130/faqs-python-591053/#post2533652';
... 
```

我遇到或无法解决的问题是，查询的印象添加了' **$ VAR1 ='（它不应该）**影响结果，有人修复它吗？

* * *

这是我需要的完美输出。->

```
...
'The Python Standard Library â€” Python v2.7.2 documentation http://docs.python.org/library/';
'python-nmap : using nmap from python http://xael.org/norman/python/python-nmap/';
'Manejo de Excepciones en Python Â« Tutorial Python http://tutorial-python.com.ar/?p=193';
'FAQ\'s de Python - Foros del Web http://www.forosdelweb.com/f130/faqs-python-591053/#post2533652';
 ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:29:57.300

添加

```
local $Data::Dumper::Indent = 0;
local $Data::Dumper::Terse  = 1; 
```

in `buscar`，最好在该`dump_html`行之前。注意 Data::Dumper::HTML 是一个调试工具。

# android - 果冻豆不振动

> ID：12845152
> 
> 赞同：0
> 
> 时间：2012-10-11T17:26:03.297
> 
> 标签：android, android-4.2-jelly-bean, vibration

我正在尝试通过代码将我的 Galaxy Nexus 设置为无振动响铃。我已经尝试了一百种方法，但没有得到它。我用这个：

```
Settings.System.putInt(getContentResolver(), "vibrate_when_ringing", 0);
audiomanager.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_OFF);
setRingerMode... 
```

但是没有办法。好像如果我有通话音量，那么它必须振动！

我只是希望它设置为接收听到声音但没有任何振动的电话。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:02:32.053

看看这个：[链接](https://stackoverflow.com/questions/12311373/how-can-i-know-if-the-vibrator-is-working)

也许你在振动器对象上取得了成功。

编辑：也许 [这里](https://android.googlesource.com/platform/packages/apps/Settings/+/c86755bfd56ff620e740e7a99303b54350ebf164/src/com/android/settings/SoundSettings.java) 的方法有`setPhoneVibrateSettingValue`帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T14:32:39.083

我在另一个帖子中回复了，但也想在这里说一下。您的代码适用于 >4.1。只需确保添加权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

我正在搜索线程并想出了将权限放入和 BAM 的解决方案，它奏效了！

# c# - 如何自动提高 c# 控制流复杂度？

> ID：12845155
> 
> 赞同：1
> 
> 时间：2012-10-11T17:26:13.047
> 
> 标签：c#, refactoring, cyclomatic-complexity

我搜索了一种自动工具来重构和重新排列 c# 代码块以提高控制流的复杂性。我有一个凌乱的 C# 代码，它使用“GOTO”和“switch”而不是“while & for”循环：

```
 public double GetMaximumRange(long startPoint, long endPoint)
    {
        double range;
        double variable1 = _priceArray[(int) startPoint];
        double variable2 = _priceArray[(int) startPoint];
        var variable3 = (int) endPoint;
        var index = (int) (startPoint + 1L);
        Label_002F:
        if (index > variable3)
        {
            goto Label_0083;
        }
        if (_priceArray[index] <= variable1)
        {
            goto Label_0059;
        }
        variable1 = _priceArray[index];
        goto Label_0078;
        Label_0059:
        if (_priceArray[index] >= variable2)
        {
            goto Label_0078;
        }
        variable2 = _priceArray[index];
        Label_0078:
        index++;
        goto Label_002F;
        Label_0083:
        range = variable1 - variable2;
        return range;
    } 
```

这是非常复杂的自动生成的意大利面条 C# 代码。我尝试通过 Re-sharper & VS 手动改进它，并用“For”循环替换“GOTO”循环并重新排列代码块，我得到了这个代码：

```
 public double GetMaximumRange(long startPtr, long endPtr)
    {
        double maximum = _priceArray[startPtr];
        double minimum = _priceArray[startPtr];

        for (long i = (startPtr + 1L); i <= endPtr; i++)
        {
            if((_priceArray[i] <= maximum))
            {
                if (_priceArray[i] < minimum)
                {
                    minimum = _priceArray[i];
                }
            }
            else
            {
                maximum = _priceArray[i];
            }
        }

        double range = maximum - minimum;
        return range;
    } 
```

我想让代码更具可读性和格式。但是手动更改非常困难且耗时。**那么是否有任何工具可以分析逻辑并自动执行此过程？**

谢谢

# objective-c - NSStream 不发送所有数据

> ID：12845158
> 
> 赞同：4
> 
> 时间：2012-10-11T17:26:30.957
> 
> 标签：objective-c, ftp, nsstream

我的情况很奇怪：我实际上使用了示例“SimpleFTPSample”（[self.networkStream setProperty: (id) kCFBooleanFalse forKey: (NSString *) kCFStreamPropertyFTPAttemptPersistentConnection]; 类型的一些小变体；以避免保持连接活动 WiFi/3G）执行传输操作 FTP 文件，但尽管没有任何类型的错误，但如果您使用 ftp 站点，您下载的文件已损坏：要解决此问题，只需添加睡眠 (3)！此功能（睡眠）必须在 [self.networkStream close] 之​​前执行；警告：如果我更改 ftp 站点，没有“sleep (3)”没有问题！

我什么都不懂...感谢任何类型的帮助

我附上我的示例代码。

```
- (void)_startSend
{
BOOL                success;
NSURL *             url;
CFWriteStreamRef        ftpStream;

assert(self.networkStream == nil);      // don't tap receive twice in a row!
assert(self.fileStream == nil);         // ditto
assert(self.filePath == nil);           // self.filePath rappresenta il percorso del file da inviare

self.attendere.hidden = FALSE;

// First get and check the URL.
defaults = [NSUserDefaults standardUserDefaults];

NSString * Cartella_ZIP = [[defaults objectForKey:kIndirizzoIpUploadKey] 
                            stringByAppendingString:self.Nome_File_da_Inviare];

url = [[iSalesAgentAppDelegate sharedAppDelegate] smartURLForString:Cartella_ZIP];
success = (url != nil);

// If the URL is bogus, let the user know.  Otherwise kick off the connection.

if ( ! success) {
    self.statuslabel.text = @"Indirizzo FTP non valido!";
} else {
    NSLog(@"nome file %@",self.Nome_File_da_Inviare);
    self.filePath = [self.Cartella_Lavoro stringByAppendingPathComponent:self.Nome_File_da_Inviare];
    assert(self.filePath != nil);

    self.fileStream = [NSInputStream inputStreamWithFileAtPath:self.filePath];
    assert(self.fileStream != nil);

    [self.fileStream open];

    // Open a CFFTPStream for the URL.
    ftpStream = CFWriteStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) url);
    assert(ftpStream != NULL);

    self.networkStream = (__bridge NSOutputStream *) ftpStream;   
    success = [self.networkStream setProperty:[defaults objectForKey:kUsernameFtpKey] forKey:(id)kCFStreamPropertyFTPUserName];
    assert(success);
    success = [self.networkStream setProperty:[defaults objectForKey:kPasswordFtpKey] forKey:(id)kCFStreamPropertyFTPPassword];
    assert(success);

    [self.networkStream setProperty:(id)kCFBooleanFalse forKey:(NSString *)kCFStreamPropertyFTPAttemptPersistentConnection];

    self.networkStream.delegate = self;
    [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [self.networkStream open];

    CFRelease(ftpStream);

    [self _sendDidStart];        
   }
 }
- (void)_stopSendWithStatus:(NSString *)statusString {
if (self.networkStream != nil) {
    [self.networkStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    self.networkStream.delegate = nil;
    [self.networkStream close];
    self.networkStream = nil;
}

if (self.fileStream != nil) {
    [self.fileStream close];
    self.fileStream = nil;
}
[self _sendDidStopWithStatus:statusString];
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
assert(aStream == self.networkStream);
NSString * stringa_byte_letti =nil;
NSString * stringa_filesize =nil;
NSNumber * number = nil; 

self.filesize = [[[NSFileManager defaultManager] attributesOfItemAtPath:self.filePath error:nil] fileSize];

NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init]; 
[numberFormatter setNumberStyle:kCFNumberFormatterDecimalStyle]; 
[numberFormatter setGroupingSeparator:@"."];     

switch (eventCode) {
    case NSStreamEventOpenCompleted: {
        // Added: Finally get filesize
        [self _updateStatus:@"Aperta Connessione"];
        filesize = 0; byte_scritti = 0;
    } break;
    case NSStreamEventHasBytesAvailable: {
        [self _stopSendWithStatus:@"Network write error"];
        assert(NO);     // should never happen for the output stream
    } break;
    case NSStreamEventHasSpaceAvailable: {
        [self _updateStatus:@"Invio Ordine..."];

        if (self.bufferOffset == self.bufferLimit) {
            NSInteger   bytesRead;
            bytesRead = [self.fileStream read:self.buffer maxLength:kSendBufferSize];

            if (bytesRead == -1) {
                [self _stopSendWithStatus:@"File read error"];
            } else if (bytesRead == 0) {
                sleep(3);
                [self _stopSendWithStatus:nil];
            } else {
                self.bufferOffset = 0;
                self.bufferLimit  = bytesRead;
            }
        }

        // If we're not out of data completely, send the next chunk.

        if (self.bufferOffset != self.bufferLimit) {
            NSInteger   bytesWritten;
            bytesWritten = [self.networkStream write:&self.buffer[self.bufferOffset] maxLength:self.bufferLimit - self.bufferOffset];
            assert(bytesWritten != 0);
            byte_scritti += bytesWritten;
            if (bytesWritten == -1) {
                [self _stopSendWithStatus:@"Network write error"];
            } else {
                self.bufferOffset += bytesWritten;
            }
        }

        number = [NSNumber numberWithDouble:byte_scritti]; 
        stringa_byte_letti = [numberFormatter stringForObjectValue:number]; 
        number = [NSNumber numberWithInteger:self.filesize]; 
        stringa_filesize = [numberFormatter stringForObjectValue:number]; 
        [self _updateStatus:[NSString stringWithFormat:@"Invio File nr. %i di %i: Totale byte %@ - byte scritti : %@", [self.numero_file_da_inviare intValue]+1 ,[Array_FileZip count],stringa_filesize,stringa_byte_letti ]];

        // Pull some data off the network.
        NSNumber * percentuale_progress = [NSNumber numberWithFloat: (float)byte_scritti / (float)self.filesize];
        [self performSelectorOnMainThread:@selector(Aggiorna_ProgressBar:) withObject:percentuale_progress waitUntilDone:YES];        

    } break;
    case NSStreamEventErrorOccurred: {
        [self _stopSendWithStatus:@"File Dati non trovato!"];
    } break;
    case NSStreamEventEndEncountered: {
        // evento ignorato
    } break;
    default: {
        [self _stopSendWithStatus:@"Network write error"];
        assert(NO);
    } break;
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:31:30.010

同样的问题。据我了解，问题在于，当您在没有持久连接的情况下工作时，当您调用“关闭”时，与 FTP 服务器的连接会立即关闭（在最后一块数据有效传输之前）。问题是关闭不执行数据的“刷新”。我也被这个问题困住了。

# python - 如何遍历 urlparse.urlsplit() 结果 Python

> ID：12845161
> 
> 赞同：4
> 
> 时间：2012-10-11T17:26:36.887
> 
> 标签：python, url, urllib

假设我有这个代码：

```
>>> import urlparse
>>> url = "http://google.com"
>>> s = urlparse.urlsplit(url)
>>> print s
SplitResult(scheme='http', netloc='google.com', path='', query='', fragment='')
>>> print 'scheme ',s.scheme    
scheme  http
>>> print 'netloc ',s.netloc
netloc  google.com 
```

如您所见，我可以手动迭代这些项目，但如何自动执行此操作？我想做这样的事情：

```
# This doesn't work:
for k,v in s.items():
    print '%s : %s'%(k,v) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T17:33:45.830

您可以使用内部`_asdict`方法：

```
>>> import urlparse
>>> url = "http://google.com"
>>> s = urlparse.urlsplit(url)
>>> s
SplitResult(scheme='http', netloc='google.com', path='', query='', fragment='')
>>> s._asdict()
OrderedDict([('scheme', 'http'), ('netloc', 'google.com'), ('path', ''), ('query', ''), ('fragment', '')])
>>> d = s._asdict()
>>> for k,v in d.items():
...     print k, repr(v)
... 
scheme 'http'
netloc 'google.com'
path ''
query ''
fragment '' 
```

为了澄清评论中提出的一点，尽管前缀`_`通常表示方法不是公共接口的一部分，但该方法是公共方法。`namedtuple`正如文档解释的那样，它被赋予了前缀以避免名称冲突[[link]](http://docs.python.org/py3k/library/collections.html?highlight=namedtuple#namedtuple-factory-function-for-tuples-with-named-fields)：

> 为防止与字段名称冲突，方法和属性名称以下划线开头。

在 Python 3 中，由于实现更改，这要容易得多：

```
>>> vars(urllib.parse.urlsplit("http://www.google.ca"))
OrderedDict([('scheme', 'http'), ('netloc', 'www.google.ca'), ('path', ''), ('query', ''), ('fragment', '')]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:38:56.497

```
>>> url = "http://google.com"
>>> s = urlparse.urlsplit(url)
>>> scheme, netloc, path, query, fragment = s
>>> scheme
'http'
>>> netloc
'google.com'
>>> path
''
>>> query
''
>>> fragment
'' 
```

如上所示，SplitResult 确实是一个花哨的元组，因此您也可以使用标准分配。

```
>>> scheme, netloc, _, _, _ = s # I only want the scheme and netloc 
```

享受。

# ios - 打开新的视图控制器

> ID：12845165
> 
> 赞同：2
> 
> 时间：2012-10-11T17:27:01.750
> 
> 标签：ios, xcode, uiviewcontroller

我编写和 IOS 应用程序与 Google 连接以识别新用户（registrationviewcontroller）。因此，该应用程序打开一个网络导航器以完成识别过程。当识别过程完成并通过我自己的 URL 方案返回应用程序时，我想打开一个新视图而不是注册视图控制器。

首先，调用新视图控制器的最佳位置在哪里？在APPdelegate的方法applicationDidBecomeActive中？还是在注册视图控制器的加载方法中？

其次，我怎样才能午餐新的 ViewController？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:10:57.500

如果我理解正确，该应用程序将通过自定义 URL 方案打开。所以

```
-(BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url { 
```

将在您的应用重新打开时调用，您可以轻松地在那里显示视图控制器，例如：

```
SampleViewController *viewController=[[SampleViewController alloc] init];
[self presentModalViewController:navController animated:YES]; 
```

顺便说一句：我建议您以模态方式显示registrationViewController，如果您还没有，这样您可以简单地在handleOpenURL 中将其关闭，并且不需要上面清单中的代码。例如：

```
[SampleSuperViewController dismissModalViewControllerAnimated:YES]; 
```

# c++ - 类的数据结构

> ID：12845169
> 
> 赞同：-6
> 
> 时间：2012-10-11T17:27:15.230
> 
> 标签：c++, assembly, data-structures, computer-science

C++类的数据结构是什么？它在装配级别如何工作？

IF语句是代码行的比较+条件跳转。

数组和字符串是数据的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:37:32.413

编译器为所有成员分配偏移量，并在成员的所有加载/存储操作中包括这些：

```
struct foo {
    uint32_t bar;
    uint32_t baz;

    uint32_t get_baz() { return baz; }
};

uint32_t get_baz_from_foo(foo *f) { return f->baz; } 
```

变为（为简单起见使用 ARM 汇编代码）：

```
foo__get_baz:
    ; calling convention: this pointer in r3
    ; load 32 bit value from r3 + 4 bytes into r0
    ldr r0, [r3, #4];
    ; calling convention: return value in r0
    ; return from subroutine
    b lr

get_baz_from_foo:
    ; calling convention: first parameter in r0
    ; load 32 bit value from r0 + 4 bytes into r0
    ldr r0, [r0, #4]
    ; calling convention: return value in r0
    ; return from subroutine
    b lr 
```

由于编译后`struct`各自`class`的布局并没有改变，所以这里的 4 被硬编码到指令流中。

创建实例的工作方式是分配内存，并将分配函数中的指针传递给每个期望指向结构的指针的人：

```
new__foo:
    ; two 32 bit integers need 8 bytes
    ; calling convention: first parameter in r0
    mov r0, #8
    ; call allocator, which will then return to the function invoking new
    bra malloc 
```

如果有构造函数

```
struct foo2 {
    foo2() : bar(5), baz(7) { }
    uint32_t bar;
    uint32_t baz;
    uint32_t get_baz() { return baz; }
}; 
```

我们最终得到了一种稍微复杂的方法来创建对象（你应该能够在没有注释的情况下弄清楚）：

```
new__foo2:
    strdb lr, ![sp]
    mov r0, #8
    bl malloc
    mov r1, #5
    str r1, [r0]
    mov r1, #7
    str r1, [r0, #4]
    ldaia lr, ![sp]
    b lr 
```

`get_baz`实现与类相同`foo`。

现在，如果我构造这样一个对象并获得 baz 值：

```
 bl new__foo2
    ; remember: the this pointer goes to r3
    mov r3, r0
    bl foo2__get_baz 
```

我最终`r0`包含了 value `7`。

对于`virtual`方法，会创建一个隐藏数据成员，它是指向函数表的指针：

```
struct base {
    virtual uint32_t get_baz() = 0;
};

struct derived : base {
    derived() : baz(5) { }
    virtual uint32_t get_baz();
    uint32_t bar;
    uint32_t baz;
}; 
```

变成

```
new__derived:
    strdb lr, ![sp]
    mov r0, #12
    bl malloc
    mov r1, #5
    str r1, [r0, #8]
    ; get the address of the vtable
    ldr r1, =vtable__derived
    ; vtable typically goes to the end of the class defining it
    ; as this is the base class, it goes before derived's data members
    str r1, [r0]
    ldria lr, ![sp]
    b lr

vtable__derived:
    ; pointer to function
    dw derived__get_baz

derived__get_baz:
    ldr r0, [r3, #8]
    b lr 
```

调用此函数是间接完成的：

```
 ; construct normally
    bl new__derived
    ; here, we forget that this is a "derived" object
    ; this pointer to r3
    mov r3, r0
    ; get vtable ptr
    ldr r0, [r3]
    ; get function ptr from vtable
    ldr r0, [r0]
    ; call function
    bl r0 
```

这里`r0`是 now `5`，因为这是构造函数存储在那里的内容。

# cassandra - 关于 cassandra 中的 memtable：哈希表或排序数组

> ID：12845170
> 
> 赞同：2
> 
> 时间：2012-10-11T17:27:16.443
> 
> 标签：cassandra, nosql

我读过一些关于 cassandra 的文章和原始论文。现在我对内存表感到困惑：

1.  有些文章说memtable中的行是按行键排序的，但有些文章说它就像一个哈希表，对吗？

2.  关于分区器：由于cassandra中基本上有两个分区器：RandomPartitioner和ByteOrderedPartitioner，memtable中的行顺序与我选择的分区器有关吗？（例如，如果我选择 RP，那么行会像哈希表一样存储，如果我选择 BOP，那么行是按键排序的吗？）

3.  如果行是按键排序的，memtable 如何处理插入？（插入会导致行移动吗？）

4.  cassandra隐式维护的主索引（行键索引）有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T01:36:28.223

以后，请尽量将自己限制在每个问题一个问题上。几乎所有这些都可以作为一个问题独立存在。

1.  有些文章说memtable中的行是按行键排序的，但有些文章说它就像一个哈希表，对吗？

Cassandra 将其数据存储在（Strickland，2014）“分布式哈希表数据结构”中。这允许数据在集群中均匀地存储和分布，但仍然可以快速查询。行键（又名分区键）的值使用称为[Consitent Hashing](http://www.datastax.com/documentation/cassandra/2.1/cassandra/architecture/architectureDataDistributeHashing_c.html)的过程进行散列。然后将数据存储在集群中，无论哪个节点负责包含密钥散列值的令牌范围。当您在不指定子句的情况下运行 CQL 查询时，您可以通过使用该函数`WHERE`看到结果集的顺序受散列行键值的影响。`token()`

```
> SELECT userid, token(userid), posttime FROM postsbyuser;

 userid | token(userid)        | posttime 
--------+----------------------+-------------------------- 
      1 | -4069959284402364209 | 2015-01-25 13:25:00-0600 
      1 | -4069959284402364209 | 2015-01-25 13:22:00-0600 
      0 | -3485513579396041028 | 2015-01-25 13:21:00-0600 
      2 | -3248873570005575792 | 2015-01-25 13:28:00-0600 
      2 | -3248873570005575792 | 2015-01-25 13:27:00-0600 
      2 | -3248873570005575792 | 2015-01-25 13:26:00-0600 
```

2.  关于分区器：由于cassandra中基本上有两个分区器：RandomPartitioner和ByteOrderedPartitioner，memtable中的行顺序与我选择的分区器有关吗？（例如，如果我选择 RP，那么行会像哈希表一样存储，如果我选择 BOP，那么行是按键排序的吗？）

最终，是的，Random partitioner 和 Byte Ordered partitioner 将以不同的方式在环上分布数据。实际上，您缺少默认的分区器，即 Murmur3Partitioner。Murmur3 分区器与 Random 分区器具有相同的目标，即确保数据分布均匀。在一个新的集群中，你应该使用 Murmur3 分区器，这里已经回答了两者的区别：[哪个是更好的分区器。cassandra中的随机或Murmur3在吞吐量方面有什么区别？](https://stackoverflow.com/questions/25346597/which-is-better-partioner-random-or-murmur3-in-cassandra-in-termo-of-throughput)

出于向后兼容性的原因，BOP 仍然包含在内，并且真的不应该再使用了。还详细讨论了应避免 BOP 的原因：[Cassandra ByteOrderedPartitioner](https://stackoverflow.com/questions/27939234/cassandra-byteorderedpartitioner/27944273#27944273)

3.  如果行是按键排序的，memtable 如何处理插入？（插入会导致行移动吗？）

摘自 DataStax 文档[The Write Path of an Update](http://www.datastax.com/documentation/cassandra/2.1/cassandra/dml/dml_write_update_c.html)很好地解释了这一点。并且不要介意标题...插入和更新与 Cassandra 基本相同。

> 更新使用顺序 I/O 流式传输到磁盘并存储在新的 SSTable 中。在更新期间，Cassandra 使用写入路径标记列并将列写入磁盘。在更新过程中，如果 memtable 中存在多个版本的列，Cassandra 仅将较新版本的列刷新到磁盘

[文档The Write Path to Compaction](http://www.datastax.com/documentation/cassandra/2.1/cassandra/dml/dml_write_path_c.html)的最后一段摘录回答了这个问题的最后一部分：

> 为了刷新数据，Cassandra 按令牌对内存表进行排序，然后按顺序将数据写入磁盘。

4.  cassandra隐式维护的主索引（行键索引）有什么关系吗？

如果我理解这个问题，这个 Cassandra 1.1 文档（[关于 Cassandra 中的索引](http://www.datastax.com/docs/1.1/ddl/indexes)）可能有点过时，但通过比较它的 RDBMS 对应物来解释这一点：

> 在 Cassandra 中，列族的主索引是其行键的索引。每个节点都为其管理的数据维护此索引。
> 
> 行由集群配置的分区器和键空间配置的副本放置策略分配给节点。Cassandra 中的主索引允许通过行键查找行。由于每个节点都知道每个节点管理的键范围，因此可以通过仅扫描相关副本上的行索引来有效地定位请求的行。

希望这能回答你的问题。

参考：

斯特里克兰河 (2014)。 [卡桑德拉高可用性](https://rads.stackoverflow.com/amzn/click/com/1783989122)。Packt Publishing Ltd. 英国伯明翰。（第 19-24 页）。

# c# - C# 中的读取文件（）

> ID：12845174
> 
> 赞同：0
> 
> 时间：2012-10-11T17:27:38.477
> 
> 标签：c#

我想从外部芯片读取字节数据。我正在使用`Readfile()`功能。

```
GENERIC_READ = 0x80000000;
uint GENERIC_WRITE = 0x40000000; 
FILE_SHARE_READ = 0x00000001;
FILE_SHARE_WRITE = 0x00000003; 
FILE_FLAG_NO_BUFFERING = 0x20000000; 
ReadHandle, ReadHandle = CreateFile(Devicepath, GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, FILE_FLAG_NO_BUFFERING); 
```

所有这些常量都被定义为公共常量。我正在从

```
HidP_GetCaps. int myPtrToPreparsedData = -1; 
int reportLength = myHIDP_CAPS.InputReportByteLength 
```

当执行到这条线时，系统会挂起，它会走得更远。

```
(ReadFile(ReadHandle, LBytes, IRBLength, ref BRead, 0)) 
```

`ReadHandle`是有效的，它是来自 createFile 函数的 +ve 数字和`LBytes =[256],IRBLength=256,ref BRead =0`. 任何建议为什么它在这部分代码处挂起。

# ruby-on-rails-3 - Rails3 has_many belongs_to 范围连接合并不起作用

> ID：12845178
> 
> 赞同：2
> 
> 时间：2012-10-11T17:27:46.257
> 
> 标签：ruby-on-rails-3, join, merge, scope, rspec2

我在 Rails 3.2、Ruby 1.9.2 我正在尝试使用范围连接/合并语法来保持我的模型逻辑干燥。我在测试这个时遇到了麻烦，我不知道为什么。

产品.rb：

```
belongs_to :product_status

scope :sellable, -> {joins(:product_status).where('products.quantity_available > 0').merge(ProductStatus.sellable)} 
```

产品状态.rb：

```
has_many :products

scope :sellable, -> {where("product_statuses.name in ('Active','Deactivated')")} 
```

在我的测试中，测试产品状态通过：

```
it "should return 0 count without a valid member" do
  FactoryGirl.create(:product_status)
  ProductStatus.sellable.count.should == 0
end

it "should return 1 count with a valid member" do
  FactoryGirl.create(:active_product_status)
  ProductStatus.sellable.count.should == 1
end 
```

但我无法让我的产品测试通过：

```
it "should return 1 count with a valid member" do
  active_product_status = FactoryGirl.create(:active_product_status)
  FactoryGirl.create(:product, :product_status => active_product_status)
  Product.sellable.count.should == 1
end 
```

产品的数量设置为超过 0。我写了一个不同的范围来测试该部分，它没有问题通过。

调用创建的 SQL 在我看来是正确的，但也许它会向更擅长这种事情的人展示问题：

```
SELECT COUNT(*) FROM `products` INNER JOIN `product_statuses` ON `product_statuses`.`id` = `products`.`product_status_id` WHERE products.quantity_available > 0 AND (product_statuses.name in ('Active','Deactivated')) 
```

我将此添加到测试中以确保 active_product_status 实际上是可销售的

```
it "should return 1 count with a valid member" do
  active_product_status = FactoryGirl.create(:active_product_status)
  product = FactoryGirl.create(:product, :product_status => active_product_status)
  ProductStatus.sellable.all.include?(product.product_status).should == true
  Product.sellable.count.should == 1
end 
```

并且 ProductStatus 测试通过了，只是没有通过 Product 一。

我以前从未使用过连接/合并语法，所以我不确定我是否遗漏了什么。如果我从以下位置调用它，我可以让它工作：

```
ProductStatus.sellable.joins(:products).merge(Product.sellable) 
```

但我需要能够从产品模型中进行此调用。任何帮助将不胜感激。

# jquery-mobile - 用于在 jquery 中搜索的 concat 值

> ID：12845183
> 
> 赞同：0
> 
> 时间：2012-10-11T17:27:59.990
> 
> 标签：jquery-mobile

因一时的失误而受苦......

使用 jquery，我需要在从 ajax 调用填写的页面上进行搜索（查找）。这些新项目填充了一个可折叠的 jquerymobile 控件。输入的每个项目都带有名称和从数据库返回的 ID。

因此，如果从数据库返回 50 个项目，它们的 id 将是 slm1, slm2... slm50

现在我需要对项目执行更新 - 稍后在页面生命周期中。

所以现在，我需要更新这些项目的值，所以使用 jquery，有没有办法可以使用连接值在页面上进行查找？

```
$('body').find("#slm35").each(function () {
              alert("test");
            }); 
```

（更新值的）外循环将遍历 1 到 50 个项目，因此在上面的代码中，#slm35 需要为 #slm1、#slm2、#slm3...#slm50

我在想这个……

```
$('body').find("#slm" + id).each(function () {
              alert("test");
            }); 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:45:30.567

您可以选择 id 以“slm”开头的元素，如下所示：

```
$('[id^="slm"]).each(function(){
    alert('test');
}); 
```

这应该给你一个包含所有项目的 jQuery 集合。如果你也喜欢，你也可以从元素中找出数字 id：

```
$('[id^="slm"]).each(function(){
    var id = parseInt($(this).attr('id').substring(3), 10);
}); 
```

我不确定这是否比遍历 ids 元素并单独选择元素更快或更慢。听起来像是[http://jsperf.com/的工作](http://jsperf.com/)

# string - 在 Excel 2010 中，如何使用宏删除单元格中的部分字符串？

> ID：12845185
> 
> 赞同：-1
> 
> 时间：2012-10-11T17:28:01.720
> 
> 标签：string, excel, split, excel-2010, vba

我正在尝试为一个 Excel 文件创建一个宏，该文件有一列（我们称之为 A 列）单元格，每个单元格包含 4 到 5 个项目可交付成果和工作产品，以逗号分隔，并由标签标识“ DEL”表示可交付成果，“WKP”表示工作产品。

我希望通过宏来完成以下任务：

1.  我想保持 A 列不变。
2.  为 Deliverables 创建 B 列，需要从 Col A 中的单元格中提取
3.  同样，为工作产品创建一个列 C，需要从列 A 中的单元格中提取

让我举个例子吧：

假设单元格 A1 包含

```
DEL1：DEL 1 项目流程，DEL2：DEL 2 项目进度表，WKP1：WKP 1 工作产品文档
```

这是我希望 Cell B1 的样子：

```
DEL1：DEL 1 项目流程，DEL2：DEL 2 项目进度表
```

单元格 C1 看起来像这样：

```
WKP1：WKP1 工作产品文档
```

请注意，并非 Col A 中的所有单元格的字符长度都与单元格 A1 完全相同。但它们将包含 DEL 和 WKP。

鉴于可交付成果和工作产品的名称长度不同，我不能简单地复制 Col A 并运行 TextToColumn 来拆分它。

到目前为止，我想出的方法是将 Col A 复制到 Col B，保留可交付成果并尝试删除工作产品。

如您所见，这需要删除字符串中以“WKP”前面的逗号（“，”）和空格（“”）开头并以相关工作产品的最后一个字符（在这种情况将是整个字符串本身的最后一个字符，因为似乎在 DEL 之后提到了 WKP）。

虽然我可以编写一个宏，可以在每个单元格范围内找到文本“WKP”并将其删除，但我无法删除紧随其后的内容。换句话说，我只能为 Cell B1 制作这个：

```
DEL1：DEL 1 项目流程，DEL2：DEL 2 项目进度表，1:1 工作产品文档
```

有人可以帮我编写宏来做到这一点吗？如果还解释了语法，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:15:45.017

如果数据的布局使得`DEL`（可交付成果）始终列在`WKP`（工作产品）之前，则不需要 VBA。

这是非vba解决方案：

假设数据是A列，把这个公式放在B1

```
=LEFT(A1,FIND(", WKP1",A1)-1) 
```

而这在 C1

```
=RIGHT(A1,LEN(A1)-FIND(", WKP1",A1)-1) 
```

然后向下拖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:11:00.060

这应该可以完成这项工作。`=WKP_DEL(A1,"DEL")`在 B1 和`=WKP_DEL(A1,"WKP")`C1中调用它。

```
Function WKP_DEL(str As String, DelOrWkp As String) As String

Dim V() As String
Dim SubStr As Variant
Dim WKPs As String
Dim DELs As String
    WKP_DEL = ""
    ' Split the string into an array
    V = Split(str, ",")
    ' Loop through the array adding WKPs to the WKPs string and DELs to the DELs string
    For Each SubStr In V
        If InStr(SubStr, "WKP") > 0 Then
            WKPs = WKPs & Trim(SubStr) & ", "
        End If
        If InStr(SubStr, "DEL") > 0 Then
            DELs = DELs & Trim(SubStr) & ", "
        End If
    Next
    ' Remove the trailing ", " and return the required string
    If DelOrWkp = "DEL" Then WKP_DEL = Left(DELs, Len(DELs) - 2)
    If DelOrWkp = "WKP" Then WKP_DEL = Left(WKPs, Len(WKPs) - 2)
End Function 
```

# jquery - jquery试图通过将3个变量加在一起来动画一个新的高度

> ID：12845188
> 
> 赞同：0
> 
> 时间：2012-10-11T17:28:08.913
> 
> 标签：jquery, variables, add

我有一个 div，我试图通过将其他 3 个 div 的高度相加来将其动画到一个新的高度。我不确定他们为什么不加在一起，但我可以为此提供一些帮助，在此先感谢您的任何建议。

```
var staff_CONTAINER_850_ht = $('#staff_CONTAINER_850').height();
var profile_850_BIO_ht = $('#profile_850_BIO').height();
var profile_850_EDU_ht = $('#profile_850_EDU').height();
var profile_850_CONTACT_ht = $('#profile_850_CONTACT').height();

var profile_TOTAL_ht = profile_850_BIO_ht + profile_850_EDU_ht +    
profile_850_CONTACT_ht;

$("#launcher").click(function() {

$("#staff_CONTAINER_850").animate({
    height: profile_TOTAL_ht
}, 300);
$("#staff_CONTAINER_850").animate({
    marginTop: staff_CONTAINER_850_ht* -1
}, 300);

$("#profile_850_HEADER").animate({
    marginTop: 45
}, 300);
$("#profile_850_BIO").delay(120).animate({
    marginTop: 10
}, 450);
$("#profile_850_EDU").delay(220).animate({
    marginTop: 10
}, 450);
$("#profile_850_CONTACT").delay(320).animate({
    marginTop: 10
}, 450);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:37:58.620

确保您在 document.ready 上运行代码：

```
$(function(){
    var staff_CONTAINER_850_ht = $('#staff_CONTAINER_850').height();
    var profile_850_BIO_ht = $('#profile_850_BIO').height();
    var profile_850_EDU_ht = $('#profile_850_EDU').height();
    var profile_850_CONTACT_ht = $('#profile_850_CONTACT').height();

    var profile_TOTAL_ht = profile_850_BIO_ht + profile_850_EDU_ht +    
    // ECT....
}); 
```

如果您不这样做，那么高度将全部为`null`，并且您将尝试在不存在的元素上设置高度。

# bash - 创建和复制目录

> ID：12845189
> 
> 赞同：1
> 
> 时间：2012-10-11T17:28:13.133
> 
> 标签：bash

我正在尝试编写一个带有目录的脚本，将其所有文件复制到我创建的新目录中。所以脚本有两个参数。第一个是现有目录，第二个是创建的目录。

这是我到目前为止所拥有的：

```
dir1=$1
dir2=$2

mkdir $2
cp $1/. $2 
```

然而我的新目录总是空的。是语法错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:30:25.210

```
cp -r $1/. $2 
```

是否需要添加递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:43:24.793

如果你告诉它 copy `.`，你实际上是在告诉它复制目录（`.`链接到它所在的目录，所以`cd ././././././././`在同一个目录上循环）。

你可以这样做：

```
cp $1/* $2 
```

将所有文件从“$1”复制到“$2”，但不复制子目录

```
cp $1/. -r $2 
```

递归复制所有文件和子目录，并将特殊文件视为常规文件（即，如果找到管道，则从管道读取并写入常规文件）。

```
cp $1/. -R $2 
```

递归复制所有文件和子目录，并保留特殊文件

```
cp $1/. -a $2 
```

复制所有内容，并保留链接、组权限和特殊文件。

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:38:45.730

`cp $1/. $2`我认为您需要使用通配符而不是点 `cp $1/* $2`

另一种方法是使用递归复制

```
cp -r $1/* $2 # copy the whole directory into the second one recursively (e.i. including subdirectories)
cp -ar $1/* $2 # this will keep the sym links intact (not trying to replace them with the file they point) 
```

# sql - SQL：条件与在哪里

> ID：12845191
> 
> 赞同：6
> 
> 时间：2012-10-11T17:28:14.590
> 
> 标签：sql, sql-server, where

我正在尝试创建一个允许省略参数的存储过程，但如果提供了参数，则进行 ANDed：

```
CREATE PROCEDURE 
    MyProcedure

    @LastName Varchar(30) = NULL,
    @FirstName Varchar(30) = NULL,
    @SSN INT = NULL
AS

SELECT LastName, FirstName, RIGHT(SSN,4) as SSN
FROM Employees
WHERE 
    (
        (LastName like '%' + ISNULL(@LastName, '') + '%')
            AND 
        (FirstName like '%' + ISNULL(@FirstName, '') + '%')
    )
AND
    (SSN = @SSN) 
```

如果提供了@SSN，我只想执行 AND。还是有其他方法可以做到这一点？

如果提供了 SSN，则查询的 LastName/FirstName 部分将返回所有记录。如果只提供了姓/名，则 AND 会使其不会返回任何记录，因为 SSN 不会验证。

想法？

* * *

附加说明

假设一个基本记录集：

```
First          Last          SSN  
Mike           Smith         123456789  
Tom            Jones         987654321 
```

如果我们改变上面的过程，使它不包括这个块：

```
AND
    (SSN = @SSN) 
```

然后一切正常，只要我们传递了名字或姓氏。但如果提供了 SSN，我希望能够包含 SSN。

如果我将 AND 更改为 OR，那么我会得到一个错误的结果集，因为查询的 FirstName/LastName 部分计算为：

```
WHERE (LastName like '%%' and FirstName like '%%') 
```

（当然，这将返回所有记录）

* * *

如果我不能有条件地中止 AND，我希望得到类似的东西：

```
AND
    (SSN like ISNULL(@SSN, '%')) 
```

:-)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T17:29:56.260

改变：

```
AND (SSN = @SSN) 
```

到：

```
AND (SSN = @SSN or @SSN is null) 
```

如果`SSN`从不为空，您还可以执行以下操作：

```
AND SSN = ISNULL(@SSN, SSN) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:32:08.213

你也可以试试：

```
(ISNULL(SSN, @SSN) = @SSN) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:32:34.817

您可以将这两个版本的语句放在一个 if 块中。

```
 AS
 IF @SSN IS NULL
      /*regular statement*/
 ELSE
      /*Statement with @SSN*/ 
```

或者

```
 AND
      SSN = ISNULL(@SSN, SSN) 
```

我从未使用过第二个选项，但我知道它存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:46:21.403

[这是关于 SQL Server 中动态搜索参数的圣经](http://www.sommarskog.se/dynamic_sql.html)。你应该这样写

```
SELECT LastName, FirstName, RIGHT(SSN,4) as SSN
FROM Employees
WHERE (NULLIF(@LastName,'') IS NULL OR LastName LIKE '%' + @LastName + '%')
  AND (NULLIF(@FirstName,'') IS NULL OR FirstName LIKE '%' + @FirstName + '%')
  AND (@SSN is null or SSN = @SSN)
   -- or if not provided means blank, then
   -- (@SSN = '' or SSN = @SSN)
OPTION (RECOMPILE) 
```

顺便说一句，SQL Server 中没有短路布尔值这样的东西。是的，它确实在第一个结论处停止，但不能保证左边的条件在右边之前处理。例如，此代码**不安全**。我正在使用“ABC.123”，但这也可以是一列。

```
WHERE ISNUMERIC('ABC.123') = 1 OR CAST('ABC.123' AS INT) > 10 
```

为了说明该`AND (@SSN is null or SSN = @SSN)`子句，当没有提供@SSN 时，即NULL

```
 AND (@SSN is null or SSN = NULL)
=> AND (NULL IS NULL or SSN = NULL)
=> AND (TRUE or SSN = NULL)
=> AND (TRUE)

-- In other words, this filter is "dissolved" and appears as if it never existed.
-- (in the scheme of a series of AND conditions) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T19:02:55.707

```
CREATE PROCEDURE 
    MyProcedure

    @LastName Varchar(30) = NULL,
    @FirstName Varchar(30) = NULL,
    @SSN INT = -1
AS

SELECT LastName, FirstName, RIGHT(SSN,4) as SSN
FROM Employees
WHERE 
    (
        (LastName like '%' + ISNULL(@LastName, '') + '%')
            AND 
        (FirstName like '%' + ISNULL(@FirstName, '') + '%')
    )
AND
    (SSN = @SSN or @SSN = -1) 
```

只需给 @SSN 一个默认值，您就可以一直使用 AND 并担心它。

# language-agnostic - 一个人如何写一种语言？

> ID：12845200
> 
> 赞同：-2
> 
> 时间：2012-10-11T17:28:52.517
> 
> 标签：language-agnostic, compiler-construction, programming-languages

一个人如何写一种语言？我真的无法想象这是怎么做到的。你必须写一些二进制代码吗？我认为我远不能编写真正的编程语言——我是一个业余程序员——但我只想了解它是如何工作的。
我不要求“工作演示”（因为我认为那将是一个十页长的演示），但是一个必须采取的一般步骤，你必须写什么以及你必须写什么做，你推荐什么语言（我认为我没有能力并不意味着我不想尝试）。

**编辑：**
那么我的假设是，人们会用任意语言编写一些代码，将其翻译成已经存在的语言并将其编译为机器代码吗？

PS我不小心投票重新打开了我自己的问题，但我认为关闭它是合理的，那么我该如何撤消呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:33:47.913

首先编写描述您的语言功能的规范和语法。

然后，编写一个解析器和编译器，将您的语言转换为更简单的语言，例如 C 或 MSIL 或 Javascript。

最后，为该语言运行现有的编译器。

您可能想研究 LLVM。

# javascript - 杀死“无响应脚本”上的标签

> ID：12845203
> 
> 赞同：7
> 
> 时间：2012-10-11T17:29:04.600
> 
> 标签：javascript, xulrunner

请原谅我的无知，与 XULRunner 合作相对较新。

我正在尝试调试 XULRunner 应用程序的问题并且遇到了问题。我们正在使用该应用程序来加载某些网站并检索布局信息。刮完之后，我们关闭页面已经加载进去的标签页。有时候，标签页的数量会不断增长，直到内存耗尽。我们的理论是浏览器正在访问一个无响应的脚本，该脚本会无限期地阻止执行。

**是否有可以设置的首选项或会自动杀死点击无响应脚本的选项卡的东西？**

我已经用谷歌搜索了，我唯一能找到的是

> dom.max_script_run_time

它只允许您指定在弹出“无响应脚本”对话框之前等待多长时间，但实际上并没有杀死选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T15:44:11.590

我不确定我是否理解，但这是我的想法：您可以在单独的进程中运行脚本，然后如果花费太长时间，则终止该进程。或者你可以让脚本不断地检查它已经运行了很长时间，然后如果它需要太长时间就杀死它自己。除此之外，我不知道你还能做什么。

# linux - 使用 ssh 检查远程主机上是否存在文件

> ID：12845206
> 
> 赞同：43
> 
> 时间：2012-10-11T17:29:15.483
> 
> 标签：linux, bash, shell, ssh

我想检查远程主机上是否存在某个文件。我试过这个：

```
$ if [ ssh user@localhost -p 19999 -e /home/user/Dropbox/path/Research_and_Development/Puffer_and_Traps/Repeaters_Network/UBC_LOGS/log1349544129.tar.bz2 ] then echo "okidoke"; else "not okay!" fi
-sh: syntax error: unexpected "else" (expecting "then") 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-08-17T15:22:17.277

除了上面的答案之外，还有一种速记方法：

```
ssh -q $HOST [[ -f $FILE_PATH ]] && echo "File exists" || echo "File does not exist"; 
```

`-q`是安静模式，它将抑制警告和消息。

正如@Mat 所提到的，像这样进行测试的一个优点是您可以轻松地将 替换`-f`为您喜欢的任何测试运算符：`-nt`,`-d`等`-s`...

**测试运算符： http:** [//tldp.org/LDP/abs/html/fto.html](http://tldp.org/LDP/abs/html/fto.html)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-10-11T17:31:51.723

这是一个简单的方法：

```
#!/bin/bash
USE_IP='-o StrictHostKeyChecking=no username@192.168.1.2'

FILE_NAME=/home/user/file.txt

SSH_PASS='sshpass -p password-for-remote-machine'

if $SSH_PASS ssh $USE_IP stat $FILE_NAME \> /dev/null 2\>\&1
            then
                    echo "File exists"
            else
                    echo "File does not exist"

fi 
```

您需要在您的机器上安装[sshpass](https://linux.die.net/man/1/sshpass)才能使用它。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-04-15T01:15:40.050

没有比这更简单的了:)

```
ssh host "test -e /path/to/file"
if [ $? -eq 0 ]; then
    # your file exists
fi 
```

正如 dimo414 所建议的，这可以折叠为：

```
if ssh host "test -e /path/to/file"; then
    # your file exists
fi 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-08-28T12:19:58.587

一行，正确引用

```
ssh remote_host test -f "/path/to/file" && echo found || echo not found 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-11T17:31:48.157

你缺少`;`s。如果将它们全部放在一行中，则一般语法是：

```
if thing ; then ... ; else ... ; fi 
```

`thing`几乎可以是任何返回退出代码的东西。如果返回 0，则执行`then`分支，否则执行分支。`thing``else`

`[`不是语法，而是`test`程序（检查一下`ls /bin/[`，它确实存在，`man test`用于文档——尽管也可以有一个具有不同/附加功能的内置版本。）它用于测试文件和变量的各种常见条件。（请注意，`[[`另一方面*是*语法，如果支持，则由您的 shell 处理）。

对于你的情况，你不想`test`直接使用，你想在远程主机上测试一些东西。所以尝试类似：

```
if ssh user@host test -e "$file" ; then ... ; else ... ; fi 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-04T04:00:19.770

```
ssh -q $HOST [[ -f $FILE_PATH ]] && echo "File exists" 
```

以上将在您运行 ssh 命令的机器上运行 echo 命令。要让远程服务器运行命令：

```
ssh -q $HOST "[[ ! -f $FILE_PATH ]] && touch $FILE_PATH" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-02-06T04:40:39.560

测试文件是否存在：

```
HOST="example.com"
FILE="/path/to/file"

if ssh $HOST "test -e $FILE"; then
    echo "File exists."
else
    echo "File does not exist."
fi 
```

相反，测试文件是否不存在：

```
HOST="example.com"
FILE="/path/to/file"

if ! ssh $HOST "test -e $FILE"; then
    echo "File does not exist."
else
    echo "File exists."
fi 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-09T16:28:45.237

您可以指定远程主机在本地使用的 shell。

```
echo 'echo "Bash version: ${BASH_VERSION}"' | ssh -q localhost bash 
```

并注意（单）引用您希望由远程主机扩展的变量；否则变量扩展将由您的本地 shell 完成！

```
# example for local / remote variable expansion
{
echo "[[ $- == *i* ]] && echo 'Interactive' || echo 'Not interactive'" | 
    ssh -q localhost bash
echo '[[ $- == *i* ]] && echo "Interactive" || echo "Not interactive"' | 
    ssh -q localhost bash
} 
```

因此，要检查远程主机上是否存在某个文件，您可以执行以下操作：

```
host='localhost'  # localhost as test case
file='~/.bash_history'
if `echo 'test -f '"${file}"' && exit 0 || exit 1' | ssh -q "${host}" sh`; then
#if `echo '[[ -f '"${file}"' ]] && exit 0 || exit 1' | ssh -q "${host}" bash`; then
   echo exists
else
   echo does not exist
fi 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-20T14:44:20.587

静默检查文件是否存在，如果不存在则执行

```
if ! ssh $USER@$HOST "test -e file.txt" 2> /dev/null; then
  echo "File not exist"
fi 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-12T11:40:33.747

我还想检查远程文件是否存在但使用 RSH。我已经尝试过以前的解决方案，但它们不适用于 RSH。

最后，我做了简短的功能，效果很好：

```
function existRemoteFile ()
{
REMOTE=$1
FILE=$2
RESULT=$(rsh -l user $REMOTE  "test -e $FILE && echo \"0\" || echo \"1\"")
if [ $RESULT -eq 0 ]
then
    return 0
else
    return 1
fi
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-29T13:38:20.880

在 CentOS 机器上，对我有用的 oneliner bash 是：

```
if ssh <servername> "stat <filename> > /dev/null 2>&1"; then echo "file exists"; else echo "file doesnt exits"; fi 
```

它需要 I/O 重定向（作为最佳答案）以及要在远程运行的命令周围的引号。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-09-11T11:24:50.587

**这也有效：**

```
if ssh user@ip "[ -s /path/file_name ]" ;then 
  status=RECEIVED ; 
 else 
  status=MISSING ; 
 fi 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-03-31T14:47:26.533

```
#its simple

if [[ "`ssh -q user@hostname ls /dir/filename.abc 2>dev/null`" == "/dir/filename.abc" ]]
then
    echo "file exists"
else
    echo "file not exists"
fi 
```

# java - 如何像表格一样打印二维数组

> ID：12845208
> 
> 赞同：17
> 
> 时间：2012-10-11T17:29:29.610
> 
> 标签：java, arrays, text, format

我遇到了二维数组的问题。我有这样的显示：

```
1 2 3 4 5 6 7 9 10 11 12 13 14 15 16 . . . etc 
```

基本上我想要的是将其显示为：

```
1 2 3 4 5 6     7  
8 9 10 11 12 13 14  
15 16 17 18 19 20  
21 22 23 24 ... etc 
```

这是我的代码：

```
 int twoDm[][]= new int[7][5];
    int i,j,k=1;

        for(i=0;i<7;i++){
            for(j=0;j<5;j++) {
             twoDm[i][j]=k;
                k++;}
        }

        for(i=0;i<7;i++){
            for(j=0;j<5;j++) {
                System.out.print(twoDm[i][j]+" ");
                System.out.print("");}
        } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-02T10:38:37.493

如果您不介意逗号和括号，您可以简单地使用：

```
System.out.println(Arrays.deepToString(twoDm).replace("], ", "]\n")); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-11T17:30:34.417

您需要在每一行之后打印一个新行... `System.out.print("\n")`，或使用等。`println`就目前而言，您只是不打印任何内容 - `System.out.print("")`，替换`print`为`println`或`""`。`"\n"`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-11T18:03:49.473

```
public class FormattedTablePrint {

    public static void printRow(int[] row) {
        for (int i : row) {
            System.out.print(i);
            System.out.print("\t");
        }
        System.out.println();
    }

    public static void main(String[] args) {
        int twoDm[][]= new int[7][5];
        int i,j,k=1;

        for(i=0;i<7;i++) {
            for(j=0;j<5;j++) {
                twoDm[i][j]=k;
                k++;
            }
        }

        for(int[] row : twoDm) {
            printRow(row);
        }
    }
} 
```

## 输出

```
1   2   3   4   5   
6   7   8   9   10  
11  12  13  14  15  
16  17  18  19  20  
21  22  23  24  25  
26  27  28  29  30  
31  32  33  34  35 
```

当然，您可以交换其他答案中提到的 7 和 5，以获得每行 7 个。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-11T17:33:48.483

您可以编写一个方法来打印这样的二维数组：

```
//Displays a 2d array in the console, one line per row.
static void printMatrix(int[][] grid) {
    for(int r=0; r<grid.length; r++) {
       for(int c=0; c<grid[r].length; c++)
           System.out.print(grid[r][c] + " ");
       System.out.println();
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-11T17:31:42.577

**@djechlin**回答的一部分，您应该更改行和列。由于您被视为 7 行和 5 列，但实际上您想要的是 7 列和 5 行。

这样做： -

```
int twoDm[][]= new int[5][7];

for(i=0;i<5;i++){
    for(j=0;j<7;j++) {
        System.out.print(twoDm[i][j]+" ");
    }
    System.out.println("");
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-11T18:05:55.603

除了代码之外，我将发布一个更详细的解决方案，因为最初的错误和注释中已经证明的后续错误是此类字符串连接问题中的常见错误。

从最初的问题开始，正如@djechlin 充分解释的那样，我们看到需要在表格的每一行完成后打印一个新行。所以，我们需要这样的声明：

```
System.out.println(); 
```

但是，在第一个 print 语句之后立即打印会产生错误的结果。是什么赋予了？

```
1 
2 
...
n 
```

这是范围的问题。请注意，有两个循环是有原因的——一个循环处理行，而另一个处理列。您的内部循环“j”循环遍历给定“i”的每个数组元素“j”。因此，在 j 循环结束时，您应该只有一行。您可以将此“j”循环的每次迭代视为构建表的“列”。由于内部循环构建了我们的列，我们不想在那里打印我们的行——它会为每个元素创建一个新行！

退出 j 循环后，您需要在继续下一个“i”迭代之前终止该行。这是处理新行的正确位置，因为它是表格行的“范围”，而不是表格的列。

```
for(i=0;i<7;i++){
    for(j=0;j<5;j++) {
        System.out.print(twoDm[i][j]+" ");  
    }
    System.out.println();
} 
```

您可以看到这条新行将成立，即使您通过更改“i”和“j”循环的最终值来更改表格的尺寸。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-15T19:12:55.183

以格式化方式打印二维数组的更**有效和简单的方法：**

试试这个：

```
public static void print(int[][] puzzle) {
        for (int[] row : puzzle) {
            for (int elem : row) {
                System.out.printf("%4d", elem);
            }
            System.out.println();
        }
        System.out.println();
    } 
```

**样本输出：**

```
 0   1   2   3
   4   5   6   7
   8   9  10  11
  12  13  14  15 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-09-30T15:12:32.580

仅作记录，Java 8 提供了一个更好的选择。

```
int[][] table = new int[][]{{2,4,5},{6,34,7},{23,57,2}};

System.out.println(Stream.of(table)
    .map(rowParts -> Stream.of(rowParts
    .map(element -> ((Integer)element).toString())
        .collect(Collectors.joining("\t")))
    .collect(Collectors.joining("\n"))); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-14T10:55:52.693

您可以创建一个将矩阵打印为表格的方法：

注意：这不适用于具有多位数字的矩阵和非方阵。

```
 public static void printMatrix(int size,int row,int[][] matrix){

            for(int i = 0;i <  7 * size ;i++){ 
                  System.out.print("-");    
            }
                 System.out.println("-");

            for(int i = 1;i <= matrix[row].length;i++){
               System.out.printf("| %4d ",matrix[row][i - 1]);
             }
               System.out.println("|");

                 if(row == size -  1){

             // when we reach the last row,
             // print bottom line "---------"

                    for(int i = 0;i <  7 * size ;i++){ 
                          System.out.print("-");
                     }
                          System.out.println("-");

                  }
   }

  public static void main(String[] args){

     int[][] matrix = {

              {1,2,3,4},
              {5,6,7,8},
              {9,10,11,12},
              {13,14,15,16}

      };

       // print the elements of each row:

     int rowsLength = matrix.length;

          for(int k = 0; k < rowsLength; k++){

              printMatrix(rowsLength,k,matrix);
          }

  } 
```

输出 ：

```
---------------------
|  1 |  2 |  3 |  4 |
---------------------
|  5 |  6 |  7 |  8 |
---------------------
|  9 | 10 | 11 | 12 |
---------------------
| 13 | 14 | 15 | 16 |
--------------------- 
```

我在练习循环和数组时创建了这个方法，我宁愿使用：

`System.out.println(Arrays.deepToString(matrix).replace("], ", "]\n")));`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-24T06:40:58.103

伊利亚，

对此感到抱歉。

你的代码是工作。但它对数组行和列有一些问题

在这里我更正了你的代码这工作正常，你可以试试这个..

```
public static void printMatrix(int size, int row, int[][] matrix) {

    for (int i = 0; i < 7 * matrix[row].length; i++) {
        System.out.print("-");
    }
    System.out.println("-");

    for (int i = 1; i <= matrix[row].length; i++) {
        System.out.printf("| %4d ", matrix[row][i - 1]);
    }
    System.out.println("|");

    if (row == size - 1) {

        // when we reach the last row,
        // print bottom line "---------"

        for (int i = 0; i < 7 * matrix[row].length; i++) {
            System.out.print("-");
        }
        System.out.println("-");

    }
}

public static void length(int[][] matrix) {

    int rowsLength = matrix.length;

    for (int k = 0; k < rowsLength; k++) {

        printMatrix(rowsLength, k, matrix);

    }

}

public static void main(String[] args) {

    int[][] matrix = { { 1, 2, 5 }, { 3, 4, 6 }, { 7, 8, 9 }

    };

    length(matrix);

} 
```

和输出看起来像

```
----------------------
|    1 |    2 |    5 |
----------------------
|    3 |    4 |    6 |
----------------------
|    7 |    8 |    9 |
---------------------- 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-07T11:51:19.160

声明了一个与您的类似的 7 x 5 数组，其中包含一些虚拟数据。下面应该做。

```
 int[][] array = {{21, 12, 32, 14, 52}, {43, 43, 55, 66, 72}, {57, 64, 52, 57, 88},{52, 33, 54, 37, 82},{55, 62, 35, 17, 28},{55, 66, 58, 72, 28}}; 

    for (int i = 0; i < array.length; i++) {
        for (int j = 0; j < array[i].length; j++) {
            System.out.print(array[i][j] + " ");
        }
        System.out.println(); // the trick is here, print a new line after iterating first row.
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-08-26T09:47:10.903

这可能会迟到，但是这种方法可以完美地满足您的要求，它甚至可以“表格”样式显示元素，这对于初学者真正了解多维数组的外观非常有用。

```
public static void display(int x[][])   // So we allow the method to take as input Multidimensional arrays
    {
        //Here we use 2 loops, the first one is for the rows and the second one inside of the rows is for the columns
        for(int rreshti = 0; rreshti < x.length; rreshti++)     // Loop for the rows
        {
            for(int kolona = 0; kolona < x[rreshti].length;kolona++)        // Loop for the columns
            {
                System.out.print(x[rreshti][kolona] + "\t");            // the \t simply spaces out the elements for a clear view   
            }
            System.out.println();   // And this empty outputprint, simply makes sure each row (the groups we wrote in the beggining in seperate {}), is written in a new line, to make it much clear and give it a table-like look 
        }
    } 
```

完成创建此方法后，您只需将其放入您的 main 方法中：

```
display(*arrayName*); // So we call the method by its name, which can be anything, does not matter, and give that method an input (the Array's name) 
```

笔记。由于我们制作了该方法，因此它需要多维数组作为输入，因此它不适用于一维数组（无论如何这都没有意义）

来源：[在此处输入链接描述](https://www.youtube.com/watch?v=hbot9MQVHOM)

PS。由于我使用我的语言来命名元素/变量，但是 CBA 来翻译它们，抱歉，这可能有点令人困惑。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-10-29T07:36:01.117

```
public static void main(String[] args) {
    int[][] matrix = { 
                       { 1, 2, 5 }, 
                       { 3, 4, 6 },
                       { 7, 8, 9 } 
                     };

    System.out.println(" ** Matrix ** ");

    for (int rows = 0; rows < 3; rows++) {
        System.out.println("\n");
        for (int columns = 0; columns < matrix[rows].length; columns++) {
            System.out.print(matrix[rows][columns] + "\t");
        }
    }
} 
```

这有效，在该行的 for 循环中添加一个新行。当第一行打印完成时，代码将跳转到新行。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-01-13T17:28:01.773

```
For traversing through a 2D array, I think the following for loop can be used.

        for(int a[]: twoDm)
        {
            System.out.println(Arrays.toString(a));
        }
if you don't want the commas you can string replace
if you want this to be performant you should loop through a[] and then print it. 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2016-11-16T03:30:41.760

你们所有人都请掠夺它我很惊讶它只需要很少的智商就可以通过 arr[0].length 获得长度并解决问题

```
 for (int i = 0; i < test.length; i++) {
        for (int j = 0; j < test[0].length; j++) {

        System.out.print(test[i][j]);
    }
        System.out.println();
    } 
```

# git - 如果带有更改的文件的路径在分支之间发生了更改，如何向后移植更改？

> ID：12845217
> 
> 赞同：1
> 
> 时间：2012-10-11T17:29:59.770
> 
> 标签：git

我想将一个特定的提交从项目的主分支反向移植到某个从它分支出来的旧分支。例如，在“branchA”下，/my/nice/path/MyClass.java”应该接收“master”下的特定提交对“/my/nice/refactored/file/path/MyClass.java”所做的更改。如何做我实现了这个“正确的方式”？（例如，我可以手动复制更改并将“branchA”中的更改视为常规编辑，但这似乎不正确）

实际上，我可以以允许我指定两条路径（包括分支）的方式进行集成；什么是 git 等价物？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:43:28.907

我想你正在寻找[`git cherry-pick`](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)：

> 给定一个或多个现有提交，应用每个引入的更改，并为每个提交记录一个新的提交。

这就是“正确的方式”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:43:50.357

我最终做了这样的事情（不处理新文件）

```
COMMIT_TO_PORT=(commit hash)
for f in `git show --pretty="format:" --name-only ${COMMIT_TO_PORT}`
do
PATH_UNDER_MASTER=$f
PATH_UNDER_BRANCHA=(make branchA path out of $f)
FILEID=(optional - extract file name or some other ID to preserve new-old files for reference if auto-generated conflicts are not clear)
git show "${COMMIT_TO_PORT}:{$PATH_UNDER_MASTER}" > "new_${FILEID}"
git show "${COMMIT_TO_PORT}~1:{$PATH_UNDER_MASTER}" > "old_${FILEID}"
git merge-file $PATH_UNDER_BRANCHA "old_${FILEID}" "new_${FILEID}"
# optional - open $PATH_UNDER_BRANCHA 
unset FILEID PATH_UNDER_MASTER PATH_UNDER_BRANCHA
done
unset COMMIT_TO_PORT 
```

# android - 在三星设备上安装应用程序时出现“无法在 USB 存储或 SD 卡上安装”错误

> ID：12845218
> 
> 赞同：11
> 
> 时间：2012-10-11T17:30:00.763
> 
> 标签：android, installation, sd-card

问题是我开始收到我的应用程序用户的抱怨，他们未能在他们的设备上安装我们的客户端。

大多数设备都是带有 OS 2.2 和 2.3 的三星

他们在安装过程完成（或几乎完成）后看到的错误是：“无法在 USB 存储或 SD 卡上安装”

我已经检查并确认有足够的空间在这些设备上安装应用程序。

自然地，我尝试删除 SD 卡功能（从 AndroidManifest.xml 文件中删除了“android:installLocation="preferExternal"”行，但此更改导致所有有问题的设备在安装完成后自行重启（设备只是在安装即将完成）。

不用说，我无法调试它，因为我们的应用程序代码还没有开始运行。

我发现了一些关于这个问题的帖子： [http ://code.google.com/p/android/issues/detail?id=9593](http://code.google.com/p/android/issues/detail?id=9593) [http://technology-headlines.com/2011/05/12/installation-error-% E2%80%9Ccouldnt-install-on-usb-storage-or-sd-card%E2%80%9D-solution-for-android/](http://technology-headlines.com/2011/05/12/installation-error-%E2%80%9Ccouldnt-install-on-usb-storage-or-sd-card%E2%80%9D-solution-for-android/) [http://www.androidpolice.com/2011/04/19/fixing- the-couldnt-install-on-usb-storage-or-sd-card-problem-on-android/](http://www.androidpolice.com/2011/04/19/fixing-the-couldnt-install-on-usb-storage-or-sd-card-problem-on-android/)

所有这些都是用户删除“/mnt/secure/asec/smdl2tmp1.asec”文件的说明。这适用于大多数有问题的设备，但我不能指望我的用户以这种方式去删除临时文件，他们可能会放弃。

另一个重要的一点是，我回到我的历史版本，发现旧版本（8 个多月前发布）在这些设备上运行良好，但这些版本不支持 SD 卡安装以及它们与当前代码之间的差距基数如此之大，以至于制作差异和分析消除过程中的变化将花费很长时间。

我很乐意收到有关此问题的任何提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T01:51:19.453

尝试

```
android:installLocation="auto" 
```

在清单标签内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T01:58:58.057

我遇到了同样的问题..我找到了一个简单的解决方案，我只是

....""闪存到库存固件""............这个问题得到了永久解决......现在我可以直接从 Play 商店安装应用程序......

如何在此处通过 odin 刷新库存固件： [http ://www.androidtipsandtricks.com/2013/12/how-to-flash-stock-firmware-on-samsung.html](http://www.androidtipsandtricks.com/2013/12/how-to-flash-stock-firmware-on-samsung.html)

# windows-8 - Win8 桌面与 Win8RT

> ID：12845223
> 
> 赞同：0
> 
> 时间：2012-10-11T17:30:09.890
> 
> 标签：windows-8, windows-runtime, tablet

我们正在开发一个灯开关应用程序，该应用程序将有一个 Silverlight 插件控制器，允许手写识别和翻译。我们想专门在 win8 平板电脑上使用它。我们知道它必须在平板电脑的桌面端使用。我们也知道 win8rt 端可以使用不同的工具来进行手写识别。（InkManager 类） - 有没有办法从 win8 平板电脑的桌面端访问这些必要的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:20:15.010

Scott Hanselman 的[这篇文章可能会对您有所帮助。](http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx)

引用：

> 我试图访问运行 Windows 8 的英特尔超极本中内置的一些传感器。但是，虽然 Windows 7 及更高版本的 .NET 4 库中内置了对位置传感器的支持，但我想访问完整的传感器和Windows 8 本身内置的定位平台。这些 API 可以通过 COM 获得，我可以通过 COM 调用它们，但是通过 WinRT 层调用它们要好得多。另外，这就是 WinRT 存在的原因。

[TheCodeProject](http://www.codeproject.com/Articles/457335/How-to-call-WinRT-APIs-from-NET-desktop-apps)上还有一个使用 VB.NET 的示例

# php - 在 Android 和 PHP 中使用 Facebook Graph Api

> ID：12845224
> 
> 赞同：0
> 
> 时间：2012-10-11T17:30:09.707
> 
> 标签：php, android, facebook-graph-api

我正在开发一个客户端是 Android 的项目，在后端，我使用 PHP 为他们提供数据。

我必须使用 Facebook Graph Api 才能获取用户的 fb 数据。

服务器将向客户端提供此 url：

```
$dialog_url = 'https://www.facebook.com/dialog/oauth?client_id='. $app_id . '&redirect_uri=' . urlencode($my_url) ;
echo($dialog_url); 
```

其中 redirect_uri 是服务器 php 页面之一。

因此，如果设备点击此 url，我是否能够访问服务器页面上收到的**access_token**和**代码..？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:23:03.403

我还在使用带有 Facebook Open Graph 的 Android，我发现最好的解决方案是使用[Facebook SDK for Android](https://developers.facebook.com/docs/mobile/android/build/)通过 Facebook 进行身份验证并检索 access_token。Facebook SDK 足够智能，可以使用来自 Facebook 应用程序或浏览器 cookie 的经过身份验证的会话，因此他们不必输入他们的 Facebook 凭据。

然后，我使用 access_token 和 Facebook SDK for Android 来检索我在自己的登录/创建配置文件 api 调用中使用的用户信息（姓名、电子邮件）。您可以使用此 SDK 执行所有打开图形操作，但我将 access_token 发送到我可以执行所有 Facebook Open Graph 操作（创建操作等）的服务器，而不会在客户端上浪费时间。

# php - 存储为类参数或普通 php 变量

> ID：12845226
> 
> 赞同：0
> 
> 时间：2012-10-11T17:30:19.523
> 
> 标签：php, class

我是 PHP 中 OO 概念的新手。我有一个名为 MY_ 控制器的类，它是我的基类。所有类都扩展了这个类。我正在使用 MVC 架构。我现在在我的系统中使用缓存。所以我在我的基类的构造函数中加载缓存变量。我`$cacheVariable`在我的函数中使用普通的 php 变量来存储缓存中的值。我想知道如果我将它存储为类参数并使用它是否会提供任何帮助`$this->cacheVariable`？在每个函数中，我都会获得缓存值`$this->cache->get('cacheVariable');`，如果我从中获得值会有帮助吗`$this->cacheVariable`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:37:24.007

如果您希望能够在除构造函数之外的其他任何地方使用 $cacheVariable，您将需要使用 $this

```
public function __construct() {
    //...
    $this->cacheVariable = $this->cache->get('cacheVariable');
    //...
} 
```

另请记住，如果您希望您的子类从您的基类继承此变量，您需要将其设置为公共或受保护。如果它是私有的，孩子将不会继承它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:41:30.600

当您说“类变量”时，我假设您指的是属性（实例的属性=。请注意区别：

如果你有一个类，比如 MyClassA，那么在你的脚本中你将使用操作符 new 来实例化这个类（根据你的 PHP 版本，你可以使用自 PHP-5.3.0 以来改变的不同的[构造函数语法）：](http://www.php.net/manual/en/language.oop5.decon.php)

```
<?php
class MY_controller{
  public $cacheVariable;

  // constructor
  function MY_controller($aValue){
     // constructor code which loads cacheVariable, for example with parameter
     $this->cacheVariable = $aValue;
  }

  public function someFunction(){
    //... some code, then access the property
    $cv = $this->cacheVariable;
  }
}

$aController = new MY_controller(42);
?> 
```

当您从 MY_controller 继承时，该类的每个**实例**都可以通过`$this->cacheVariable`.

我想澄清的重要一点是它是一个**实例**属性，而不是一个类。有关 PHP 中 OOP 的进一步参考，请参阅[PHP 的 OOP 手册中的属性部分](http://www.php.net/manual/en/language.oop5.properties.php)和[继承部分](http://www.php.net/manual/en/language.oop5.inheritance.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:42:35.480

当您仅实例化控制器的一个实例（从主控制器派生）时，这是一个可以想象的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:44:52.467

在我看来，更好的想法是直接从缓存服务中获取变量，而不是将其保留为类属性。原因很简单：假设缓存中的某个键的值将在您的班级以外的其他地方更改（或过期）。如果您将此值作为类属性，则每次访问此值时都需要密切关注它，但如果您从缓存中检索它，您就不会关心（因为缓存会关心某个键的值是否未更改或过期）。

# visual-studio-2010 - 生成引导程序时出错：无法开始更新 bin\Debug\app.publish\setup.exe 的资源

> ID：12845229
> 
> 赞同：0
> 
> 时间：2012-10-11T17:30:27.040
> 
> 标签：visual-studio-2010, setup-deployment

这是一个 winForm 应用程序使用 VS2010 和 .net4.0，发布时出现此错误并选择了先决条件。如果我取消选中“创建安装程序以安装 preq 组件”，错误就会消失

我尝试从另一台机器复制引导程序包，没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:52:31.747

我删除了先决条件包，我已经解决了问题......

# php - 为什么图像目录不能保存在 MYSQL 中

> ID：12845245
> 
> 赞同：0
> 
> 时间：2012-10-11T17:31:32.737
> 
> 标签：php

该脚本似乎将图像上传到一个文件夹，这是有效的。但它应该将图像上传到会话名称匹配的行。

相反，我返回了“0”的值。我不知道为什么？这与我的查询有关吗？

```
 <? 
error_reporting(E_ERROR | E_PARSE);

  $name = $fgmembersite->UserFullName(); 
   if (!$name) {
    echo "Boo!";
}
 if ($_POST['submit']) {
    //get file attributes

    $Name = $_FILES['myfile']['name'];
    $tmp_name = $_FILES['myfile']['tmp_name'];
    error_reporting(E_ERROR | E_PARSE);

    if ($Name) {            
    $location = "avatars/$Name";    
    move_uploaded_file($tmp_name, $location ) or die('Failed to upload picture');
    $query = mysql_query("UPDATE fgusers3 SET imagelocation='$location' WHERE name='$name'");      die("Your profile image has been uploaded!");
    if (!$query) {
        die("Did not upload correctly");
    }
        }}

 error_reporting(E_ERROR | E_PARSE);

echo "Upload your image below:
  <form action='profilepic.php' method='POST' enctype='multipart/form-data'>
   Profile Picture: <input type='file' name='myfile'> <input type='submit' name='submit' value='upload'>
   </form>
";

    ?> 
```

# mysql - 在mysql中使用select语句插入表

> ID：12845260
> 
> 赞同：1
> 
> 时间：2012-10-11T17:32:10.923
> 
> 标签：mysql, insert

我有一张表，其中包含多年来已被许多不同用户修改的培训历史。这导致相同的训练记录被输入两次。我想创建一个复制主表并插入所有重复记录的表。

如果employee_id、course_code 和completion_date 全部匹配，则构成重复记录。

我可以创建重复表，并且我有一个似乎可以提取重复项的 select 语句，但它只提取其中一个，我需要它来提取它们中的两个（或更多）。这是因为一个人可能使用不同的课程名称输入了培训记录，但 id、代码和日期相同，因此它是重复条目。因此，通过提取所有重复项，我可以验证情况是否如此。

这是我的 SELECT 语句：

```
SELECT * 
FROM 
    training_table p1
JOIN 
    training_table p2 ON (
        p1.employee_id = p2.employee_id
        AND p1.course_code = p2.course_code
        AND p1.completion.date = p2.completion_date)
GROUP BY p1.ssn; 
```

查询运行并返回看似唯一的行。我想要所有的副本。每当我尝试将其插入到相同的表中时，我都会收到一条错误消息，指出我的列数与我的值数不匹配。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:07:18.483

谢谢您的帮助。我在发布问题后不久就发现了答案（即使我已经寻找了一个多小时的答案:)）这是我使用的：

```
 SELECT  *
    FROM    training_table mto
    WHERE   EXISTS
            (
    SELECT  1
    FROM    training_table mti

    WHERE   mti.employee_id = mto.employee_ie
    AND mti.course_code = mto.course_code
    AND mti.completion_date = mto.completion_date
            LIMIT 1, 1
            ) 
```

我刚刚添加了 INSERT 语句，它起作用了。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:43:55.523

这将选择任何重复的行插入到您的新表中。

```
SELECT p1.* 

FROM   training_table p1

JOIN   
       (SELECT employee_id, course_code, completion_date
        FROM   training_table 
        GROUP BY employee_id, course_code, completion_date
        HAVING COUNT(*) > 1
       ) dups 
        ON  p1.employee_id = dups.employee_id
        AND p1.course_code = dups.course_code
        AND p1.completion_date = dups.completion_date
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:49:48.167

尝试仅使用 CROSS JOIN（笛卡尔积连接）而不是 JOIN。对于插入尝试 INSERT INTO TABLE (column1, column2, column3) SELECT column1, column2, column3 FROM TABLE; 以相同的顺序。

# c# - 将扩展器和列表视图绑定到嵌套字典

> ID：12845261
> 
> 赞同：1
> 
> 时间：2012-10-11T17:32:12.430
> 
> 标签：c#, wpf, data-binding

我有一个看起来像这样的集合：

```
ObservableDictionary<string, ObservableDictionary<string, SystemStatusItem>> ObservableColoServerStatus 
```

我正在创建一个我想绑定的用户控件，如下所示：

*   外部字典中的每个键（字符串）键都应动态创建一个扩展器。
*   在该扩展器内部是一个 ListView/DataGrid/一些用于显示信息集合的控件
*   ListView/DataGrid 中的每一行或任何内容都将由（字符串）键和内部字典的（对象）值的属性的组合组成。

理想情况下，它应该看起来和操作类似于 TreeView，但是扩展器已通过我们的 UI 广泛使用，因此我想坚持这一点以保持一致性。

我是 WPF 的新手，之前做过一些基本的数据绑定，但是这种嵌套关系的性质让我很难理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:08:58.573

好的，首先让我们假设您 ObservableDictionary 是具有 Key 属性和 Value 属性的项目的集合。您可以使用数据模板在 wpf 中完成您想要的操作，请查看此代码，尝试以这种方式进行操作：

```
<ListBox ItemsSource="{Binding ObservableColoServerStatus}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Expander Header="{Binding Key}">
                    <ListBox ItemsSource="{Binding Value}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Key}"/>
                                    <TextBlock Text="{Binding Value}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Expander>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

它是一个列表框，将您的 ObservableDictionary 作为 ItemsSource，然后在项目模板属性中设置将用于表示所有项目的模板。在这种情况下，扩展器在标题中具有一个列表框，该列表框从第一个字典的值中获取元素，然后您再次设置了模板。这是相似的。希望对你有帮助...

# jquery - addClass removeClass jQuery 问题与sliderhow

> ID：12845262
> 
> 赞同：0
> 
> 时间：2012-10-11T17:32:12.743
> 
> 标签：jquery, addclass, next

这是[JSfiddle](http://jsfiddle.net/Erw8y/18/)的链接。

Javascript：

```
var headerCount;
var timeDelay;
$(document).ready(function () {
  headerCount = $('.headerlink').length;
  timeDelay = $('.current').attr('ref');
  if (undefined != timeDelay) {
    timeDelay = "5000"
  }
  setTimeout("advance()", timeDelay);
});

function advance() {
  $('.current').next('.headerlink').addClass('current2');
  $('.current').removeClass("current");
  $('.current2').addClass('current').removeClass('current2');
  if (headerCount == $(".current").index('.headerlink')) {
    $('.current').removeClass('current');
    $('.headerlink:nth-child(1)').addClass('current');
  }
  timeDelay = $('.current').attr('ref');
  if (undefined != timeDelay) {
    timeDelay = "5000"
  }
  setTimeout("advance()", timeDelay);
}​ 
```

HTML：

```
<a ref="5000" class="headerlink current" href="http://www.raceramps.com/12-4thqtr-twenty-five-dollar-rebate.aspx"> <img class="headerimg" src="http://www.raceramps.com/images/promos/4thQTR[25_rebateCheck].jpg" /> </a>

<a class="headerlink" href="http://www.raceramps.com/2012-3rdqtr-25-visa.aspx"> <img class="headerimg" src="http://www.raceramps.com/images/promos/3rdQTR[25VISA_rebate].jpg" /> </a>

<a class="headerlink" href="http://www.raceramps.com/12-4thqtr-twenty-five-dollar-rebate.aspx"> <img class="headerimg" src="http://www.raceramps.com/images/promos/4thQTR[25_rebateCheck].jpg" /> </a>

<a class="headerlink" href="http://www.raceramps.com/12-4thqtr-twenty-five-dollar-rebate.aspx"> <img class="headerimg" src="http://www.raceramps.com/images/promos/4thQTR[25_rebateCheck].jpg" /> </a> 
```

**问题：**目标是将代码添加`.current`到 中`next('.headerlink')`，然后`.current`从原始中删除。但由于某种原因，它只是删除`.current`（它似乎非常快速地添加/删除所有匹配的元素）。

我错过了什么？​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:37:47.977

我相信你的意思是：

```
undefined == timeDelay 
```

而不是`!=`。

您正在传递使其立即执行`undefined`的持续时间。`setTimeout`

* * *

您还可以简化代码并消除对`current2`所有代码的需求。

```
var $current = $('.current');
var $newCurrent = $current.next('.headerlink').addClass('current');

$current.removeClass('current'); // This still only has the first element even though you added .current to another 
```

诀窍是该变量`$current`包含在创建时与其选择器匹配的元素。对 DOM 的后续更改不会影响`$current`.

[此处](http://jsfiddle.net/Erw8y/28/)包含一些额外清理的完整示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:44:07.240

这可以完成工作：

[http://jsfiddle.net/carlosmartinezt/Erw8y/29/](http://jsfiddle.net/carlosmartinezt/Erw8y/29/)

代码如下：

```
$(document).ready(function () {
  setTimeout("advance()", $('.current').attr('ref') || 1000);
});

function advance() {
  var nextHeaderLink = $('.current').removeClass("current").next('.headerlink');

  if( nextHeaderLink.length == 0 )
      nextHeaderLink = $('.headerlink:first-child');

  nextHeaderLink.addClass('current');

  setTimeout("advance()", nextHeaderLink.attr('ref') || 1000);
}​ 
```

它是一个简化版本，删除了不相关的代码行。

# pyrocms - PyroCMS 使用 2.0 升级后注册新用户的问题仍然存在

> ID：12845265
> 
> 赞同：0
> 
> 时间：2012-10-11T17:32:20.957
> 
> 标签：pyrocms

注册新用户时出现以下错误（不是来自管理员端） ![PyroCMS 数据库错误](../Images/13f2d98770a66df1ba92e573e392b8f0.png)

作为修复，我尝试更新到 2.1，但没有解决它.. 值得注意的是，注册表单仅显示 3 个字段：

电子邮件、密码和名字..

我意识到这与某个地方的设置有关，但我希望有任何建议可以帮助我节省一些时间。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:48:28.267

*   运行此查询：

    ```
    ALTER TABLE `default_profiles` CHANGE `last_name` `last_name` VARCHAR( 50 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '' 
    ```

*   或在控制面板上转到设置-> 用户并尝试更改“需要姓氏”

您是否更改了可用的个人资料字段？

您是在运行 2.1 的全新安装还是升级？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:25:50.983

只需为“Default_profiles”表中的姓氏字段设置默认值。然后它会正常工作。

# php - 如何使用数据库中的名称从多个复选框更新 MySQL？

> ID：12845266
> 
> 赞同：1
> 
> 时间：2012-10-11T17:32:22.670
> 
> 标签：php, mysql, input, sql-update, checkbox

我有一个来自 MySQL 的语言表，在数据库中有一行“启用”，其值为 1 或 0。1 表示启用的语言，0 表示禁用。我想用我的 html/php 表中的复选框更改这些值。

我遇到的问题是输入名称，因为它们是来自数据库的变量+选中复选框的值。

我的代码如下所示：

```
require_once ('../mysqli_connect.php'); // Connect to the db.

if(isset($_POST['submit']))
{
$lang_q="SELECT * FROM language";
$lang_r = @mysqli_query ($dbc, $lang_q); // Run the query.
while($lang_row = mysqli_fetch_array($lang_r, MYSQLI_ASSOC)){
    $lang_code2[]=$lang_row['lang_code'];
    $language[]=$lang_row['language'];
    $langid2[]=$lang_row['lang_id'];
    $lang_active2[]=$lang_row['enabled'];
}
$language2=$_POST[$language];
$lang_active=$_POST[$lang_active2];
$langid=$_POST[$langid2];
$m="test";
if(isset($language2)){
    foreach ($lang_active as $key => $value) {
        $value="1";
    }
    //$lang_active='1';
    $m.="-uspjeh";
}

$q="UPDATE language SET enabled='$lang_active' where lang_id='$langid' ";
$r = @mysqli_query($dbc, $q); // Run the query.
if($r){
    $success=true;
    require_once ('includes/login_functions.inc.php');
    $url = absolute_url();
    $url = absolute_url("language-manager.php?success=update");
    header("Location: $url");
    $m.="-da";
}   
else{
    $s ="<br />GREŠKA UPDATE";
    echo mysqli_error($r);
    $m.="-ne";
}
}
$page_title = PAGE_TITLE84;
include_once('includes/header.php');?>
<?php

$lang_q="SELECT * FROM language";
$lang_r = @mysqli_query ($dbc, $lang_q); // Run the query.
echo $m.'-dadda';
echo '
<form action="language-manager.php" method="POST" name="language-manager">
    <table class="languages">
    <tr>
        <td>'.LANGUAGE_R.'</td>
        <td>'.ACTIVE_R.'</td>
    </tr>
    ';
    while($lang_row = mysqli_fetch_array($lang_r, MYSQLI_ASSOC)){
        $lang_code2=$lang_row['lang_code'];
        $language=$lang_row['language'];
        $lang_active=$lang_row['enabled'];
        $langid=$lang_row['lang_id'];
        echo '<tr>
            <td class="lang"><img src="../flags/'.$lang_code2.'.png" />'.$language.'</td>
            <td>
                <input type="checkbox" name="'.$language.'" id="'.$langid.'" value="'.$lang_active.'"';
                    if($lang_active=='1'){
                        echo ' checked="checked"';
                    }
                echo '>
            </td>
        </tr>';
    }
    echo '</table>
    <input type="submit" name="submit" value="Update" >
</form>
</div>';

mysqli_close($dbc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:45:38.273

HTML 表单中的一系列复选框都应具有相同的输入名称。服务器端接收该名称的数组。您需要首先使它们都具有相同的名称。假设您将其称为“enabledLanguages[]”。'[]' 很重要，因为这是使值作为数组发送的原因。所以你想要更像这样的东西：

```
<input type="checkbox" name="enabledLanguages[]" id="'.$langid.'" value="'.$lang_active.'"';
                    if($lang_active=='1'){
                        echo ' checked="checked"';
                    }
                echo '> 
```

然后将每个语言的值设为语言 ID。更改此查询：

```
$q="UPDATE language SET enabled='$lang_active' where lang_id='$langid' "; 
```

所以它更像是这样的：

```
$langids = implode(',', $_POST['enabledLanguages']);
// sets each row in this table to 0 (false) if the lang_id isn't IN the $langids list
// and sets to 1 (true) if it is IN the $langids list
$q="UPDATE language SET enabled= lang_id IN($langids) > 0"; 
```

# java - 接口指定方法

> ID：12845267
> 
> 赞同：0
> 
> 时间：2012-10-11T17:32:24.730
> 
> 标签：java, methods, interface

编写一个名为 Nameable 的接口，指定以下方法：

```
public void setName(String n)
public String getName() 
```

这就是我得到的：

```
 public interface Nameable{     
     public void setName(String n){         
                n =name;     }    
        public String getName() {
                  return n;    } } 
```

这是正确的还是有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T17:32:55.573

接口没有指定实现，所以不，这是不正确的。

您必须将可用方法（接口）和实现（类）的定义分开：

```
public interface Nameable{     
     public void setName(String n); 
     public String getName();
}

public class Named implements Nameable {
      private String name;
      public void setName(String n){         
          this.name = n;
     }    
     public String getName() {
        return this.name;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:33:06.003

不，您没有在界面中定义方法，您只需声明它们。稍后实现该接口的类提供该方法的实现。

> 这是正确的还是有更好的方法？

更好的方法？是的。复制此代码并粘贴到您喜欢的 IDE 中。它会告诉你你错在哪里，有这么多`Red-Marks`。

如果您创建这样的界面， IDE 之类的`Eclipse`突然开始尖叫，您可以告诉它为您更正它。然后你就可以看到魔法了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T05:04:26.777

您的代码将为您提供`Abstract methods do not specify a body`.

接口的所有方法都是默认`abstract`的，抽象方法没有主体，看这里[抽象](http://en.wikibooks.org/wiki/Java_Programming/Keywords/abstract)

An`interface`是一组具有**空主体**的相关方法，但是在您的代码中，所有具有主体的方法都不会编译，请查看[接口如何工作](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)

更多关于[维基](http://en.wikipedia.org/wiki/Interface_%28Java%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:37:25.253

您必须记住，接口只提供方法声明，不提供实现。这取决于实现的类。

```
public interface Nameable
{  
     public void setName(String n);
     public String getName();
}
public class NameableImplmentation implments Nameable
{
     public void setName(String n)
     {         
         //insert code    
     }    
     public String getName() 
     {
         //insert code
     } 
} 
```

# django-templates - 带有动态 LESS 文件的 Django Compressor 引发 FilterError(err)

> ID：12845275
> 
> 赞同：1
> 
> 时间：2012-10-11T17:33:01.973
> 
> 标签：django-templates, less, django-compressor

我必须想出一个相当复杂的设置来为用户启用基于数据库的样式选项。用户在 django 管理后端输入样式（如背景颜色、字体等）。

我通过将模板视图呈现为纯文本视图来创建动态 LESS 文件，如下所示：

**视图.py：**

```
class PlainTextView(TemplateView):
    """
    Write customized settings into a special less file to overwrite the standard styling
    """
    template_name = 'custom_stylesheet.txt'

    def get_context_data(self, **kwargs):
        context = super(PlainTextView, self).get_context_data(**kwargs)
        try:
            #get the newest PlatformCustomizations dataset which is also activated
            platform_customizations = PlatformCustomizations.objects.filter(apply_customizations=True).order_by('-updated_at')[0]
        except IndexError:
            platform_customizations = ''

        context.update({
            'platform_customizations': platform_customizations,
        })
        return context

    def render_to_response(self, context):
        return super(PlainTextView, self).render_to_response(context, content_type='plain/text') 
```

模板**custom_stylesheet.txt**看起来有点像这样。它采用用户在管理后端输入的数据库样式条目：

```
@CIBaseColor: {{ dynamic_styles.ci_base_color }};
@CIBaseFont: {{ dynamic_styles.ci_base_font }};
...etc... 
```

现在，我在 main.less 文件中包含这个动态的 less 文件和其他普通的静态 LESS 文件。像这样：

**main.less:**

```
@import "bootstrap_variables.less";

//this is the dynamicly created custom stylesheet out of the dynamic_styles app
@import url(http://127.0.0.1:8000/dynamic_styles/custom_stylesheet.less);

//Other styles
@import "my_styles.less"; 
```

此设置工作正常。我数据库中的动态变量被渲染到模板中，LESS 将我所有的 less 文件一起编译。

将代码推送到我的生产设置时遇到问题，我在其中编译 LESS 服务器端并使用 django-compressor 对其进行压缩。

我收到以下错误：

```
FilterError: [31mFileError: 'http://127.0.0.1:8000/dynamic_styles/custom_stylesheet.less' wasn't found.
[39m[31m in [39m/home/application/***/media/static-collected/styles/less/main.less[90m:13:0[39m
[90m12 //this is the dynamicly created custom stylesheet out of the dynamic_styles app[39m
13 [7m[31m[1m@[22mimport url(http://127.0.0.1:8000/dynamic_styles/custom_stylesheet.less);[39m[27m
[90m14 [39m[0m 
```

有没有人遇到过这样的 django 压缩器问题？像这样动态创建的文件有问题吗？绝对网址可能有问题吗？

你能想到另一种解决方案，使用 django 压缩器动态生成更少的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:01:44.967

我猜 Django-Compressor 无法读取动态创建的较少文件，这些文件只有在您点击 url 时才“即时”可用。至少我没有让它工作。该文件还需要在`COMPRESS_ROOT`.

现在，每次保存模型时，我都会将 less 文件物理写入磁盘。这是代码。它仍然需要一些改进，例如 try except 等。但它有效：

```
 def save(self, *args, **kwargs):

    #todo add try except
    less_file = open(os.path.join(settings.PROJECT_ROOT, 'media', 'static', "styles", "less", "custom_stylesheet.less"), "w")
    less_file.write(render_to_string('template/custom_stylesheet.txt', {'platform_customizations': self}))
    less_file.close()

    super(PlatformCustomizations, self).save(*args, **kwargs) 
```

# .net - 通过 .NET DirectoryEntry 进行 LDAP 绑定始终成功

> ID：12845277
> 
> 赞同：0
> 
> 时间：2012-10-11T17:33:13.927
> 
> 标签：.net, ldap

我正在使用用户的电子邮件地址作为密钥在基于表单的 C# 登录场景中查找任意 Windows 帐户。定位用户工作正常，我得到了我的衍生`UserPrincipalEx`罚款。

但是，当我尝试使用 Bind 验证登录时，它总是成功：

```
// we can't use ValidateCredentials because it's too broken - multiple attempts each time,
// can't always negotiate properly, etc.
//if (!_principalContext.ValidateCredentials(userPrincipal.UserPrincipalName, password)) {
//    return LoginValidationResults.ValidationFailed;
//}
try {
    using (var directoryEntry = new DirectoryEntry("LDAP://" + _domain + "/" + _principalContext.Container,
        userPrincipal.UserPrincipalName, password, AuthenticationTypes.FastBind)) {
        var forceBind = directoryEntry.NativeObject;
        Log.DebugFormat("Validation successful ({0}).", forceBind);
        return LoginValidationResults.Valid;
    }                    
}
catch (COMException ex) {
    if (ex.ErrorCode != -2147023570) {
        Log.DebugFormat("Validation exception: {0}", ex.ToString());
        throw;
    }
    Log.Debug("Validation failed.");
    return LoginValidationResults.ValidationFailed;
} 
```

在某些情况下——我还不知道它们是什么——无论我给什么密码，该帐户总是能成功绑定。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:33:13.927

因此，我使用一些数据包捕获进行了调查，发现所有后续绑定都使用空白用户名。

果然，有问题的用户有一个空白（实际上`null`- 未设置）UPN。这不应该在我们的场景中发生，但它确实发生了。因为它是一个损坏的用户案例，所以我只是检测到它并抛出异常。

# sql-server - SQL Delete 清除表而不是出错

> ID：12845281
> 
> 赞同：5
> 
> 时间：2012-10-11T17:33:21.160
> 
> 标签：sql-server, sql-server-2008, tsql, correlated-subquery

我有一段 SQL（你会认为）不会编译，而是从目标表中删除所有行。

考虑这个设置：

```
create table TableA (ColumnA varchar(200));
create table TableB (ColumnB varchar(200));

insert TableA values ('A'),('B'),('C');
insert TableB values ('A'); 
```

然后是下面的sql：

```
--Returns all rows from TableA
select * from TableA;

--Does not error (ColumnA does not exist on TableB)
delete TableA where ColumnA in (select ColumnA from TableB)

--No Rows are returned
select * from TableA; 
```

上面的 delete 语句会导致从 中删除所有行`TableA`，而不是在`ColumnA`中不存在的错误`TableB`

这里有一个 SQL Fiddle 证明了这一点：[http ://www.sqlfiddle.com/#!3/9d883/6](http://www.sqlfiddle.com/#!3/9d883/6)

似乎正在接收`ColumnA`来自，但预计它会“超出范围”。`TableA`

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:36:26.877

由于内部查询中的 ColumnA 与外部查询之间的相关性，这可以按预期工作。

这种常用的相关查询模式是有效的

```
DELETE TableA WHERE NOT EXISTS (select * from TableB where TableB.ID=TableA.ID) 
```

它会删除在 TableB 中没有相关记录的 TableA 条目。

它表明您可以在相关查询中引用 TableA 列。在您的查询中

```
delete TableA where ColumnA in (select ColumnA from TableB) 
```

内部查询正在产生

*   TableB 中的每条记录一行
*   每行一列，其值为来自外部查询的 ColumnA

所以 DELETE 通过

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T17:39:29.427

虽然我理解这种困惑，但它的行为应该如此。ColumnA 仍在“范围内”。事实上，如果你愿意，你可以在你的子查询中加入它。括号不限制范围，但从可读性的角度来看，我可以看到它造成的混乱。

这是另一个示例，说明为什么总是在列名前加上表名（或别名）是个好主意。

# linux - 小写到大写的转换

> ID：12845283
> 
> 赞同：0
> 
> 时间：2012-10-11T17:33:24.350
> 
> 标签：linux, bash

我找到了解决方案，但它不起作用[http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/](http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/)

```
[root@mg0016 tmp]# y="this Is A test"
[root@mg0016 tmp]# echo "${y^^}"
-bash: ${y^^}: bad substitution 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:49:43.997

您可以使用以下任一代码：

```
$ tr '[:lower:]' '[:upper:]' < input.txt > output.txt 
```

或者

```
$  sed -e 's/\(.*\)/\U\1/' input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:38:43.867

我找到了以下一个！它有效！

```
[spatel@mg0016 ~]$ echo "lower" | awk '{print toupper($0)}'
LOWER 
```

谢谢大家的回复。

# ios - 使用 OpenGL ES 1.1 IOS 取消绘图

> ID：12845284
> 
> 赞同：0
> 
> 时间：2012-10-11T17:33:27.273
> 
> 标签：ios, opengl-es

> **可能重复：**
> [如何在 iPhone 上的 OpenGL ES 绘画应用程序中实现撤消？](https://stackoverflow.com/questions/3474252/how-would-i-implement-undo-in-an-opengl-es-painting-application-on-the-iphone)

所以我有下一个问题。我用触摸代表的点画线。但是当我抓住：

```
-(void) touchesCancelled: (NSSet*)touches withEvent: (UIEvent*)event 
```

我需要将我的图片恢复为默认状态。我怎样才能做到这一点？？需要创建几个缓冲区或其他东西吗？也许你能给我一些在OpenGL中恢复功能的例子吗？谢谢！

# python - ASCII IP 到主机字节顺序长

> ID：12845285
> 
> 赞同：2
> 
> 时间：2012-10-11T17:33:30.153
> 
> 标签：python, ip

我需要将 ASCII IP 转换`192.168.1.1`为主机字节顺序。我尝试使用以下功能但没有成功。

```
import socket
socket.ntohl(socket.inet_aton('192.168.1.1')) 
```

然而，ntohl 函数抛出一个错误，说它不能接受字符串，但需要一个 int/long。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:42:54.153

该`.inet_anon()`函数返回一个压缩的 32 位二进制值；您可以使用该[`struct`模块](http://docs.python.org/library/struct.html)将其转换为整数：

```
import struct
import socket

socket.ntohl(struct.unpack('I', socket.inet_aton('192.168.1.1'))[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:45:42.563

```
>>> socket.inet_aton.__doc__
'inet_aton(string) -> packed 32-bit IP representation\n\nConvert an IP address in string format (123.45.67.89) to the 32-bit packed\nbinary format used in low-level network functions.'

import struct
struct.unpack('>L', socket.inet_aton('192.168.1.1'))[0] 
```

# java - OOP 如何判断从实现的接口调用了哪个类方法

> ID：12845287
> 
> 赞同：1
> 
> 时间：2012-10-11T17:33:31.773
> 
> 标签：java, spring, oop

如果你有一个名为 A 的接口，它有一个名为 print 的方法签名；现在，如果您有 3 个实现 A 的类并调用 A.print，您如何知道调用了哪个类方法。没有新的对象

```
public interface A()
{
  public void print(){}
}
@Component
public class B implements A
{
 public void print()
 {
   system.out.print("B");
 }
}
@Component
public class c implements A
{
 public void print()
 {
   system.out.print("C");
 }
}
@Component
public class d implements A
{
 public void print()
 {
   system.out.print("d");
 }
}

public class runner()
{
    @Autowired
    private A aThing_;

    aThing_.print();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:37:35.713

接口定义了交互契约，或者换句话说，定义了实现该接口的每个类都应提供的一组方法。

Oracle 对[什么是接口？](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)是：

> 正如您已经了解到的，对象通过它们公开的方法来定义它们与外部世界的交互。方法形成对象与外界的接口；例如，电视机前面的按钮是您与其塑料外壳另一侧的电线之间的接口。您按下“电源”按钮来打开和关闭电视。

调用取决于实现接口的对象的类型。

```
A interface = new B(); 
```

您将为接口中定义的方法调用`B`'s`print`方法的实现。`print``A`

*编辑：*接口的重点是定义与对象的交互，而不管其实际类型如何。该代码似乎是对同一接口后面的一组组件的自动扫描，以表明您可以定义一组不同的组件，以便在给定上下文的情况下以不同的方式处理相同的情况。

AFAIK 自动装配默认为字段的名称。您可以使用注释定义要注入的接口实现`@Qualifier("CLASS_NAME_HERE")`以及`@Autowire`.

你可能想检查[一下](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:34:28.193

它将从对象调用它的类中调用方法版本

```
A ob = new B(); 
ob.print()// will invoke method from B

A ob = new C(); 
ob.print()// will invoke method from C 
```

* * *

**看**

*   [Java 多态性](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:34:56.283

取决于你如何实例化这样的对象：

例如

`private A aThing = new C();`

将调用`C`打印方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:42:14.797

如果我正确理解了我们的示例，您有一个 Runner 类，对实现 A 的对象的引用是自动装配的。

接口的重点是多态性。换句话说，在这个设计中使用接口 A 的目的是让 Runner 不需要知道正在使用哪个实现——所有 Runner 关心的是在 A 上定义的方法是否可用。

您可以在 A 上设置一个属性，该属性返回某种类型的信息，但是（我相信有一些例外）这会破坏部分目的。

# python - 对列表元素进行 Grep

> ID：12845288
> 
> 赞同：39
> 
> 时间：2012-10-11T17:33:40.630
> 
> 标签：python, list, grep

我有一个文件名列表：

```
names = ['aet2000','ppt2000', 'aet2001', 'ppt2001'] 
```

虽然我找到了一些可以对字符串进行 grep 的函数，但我还没有弄清楚如何对列表的所有元素进行 grep。

例如我想：

```
grep(names,'aet') 
```

并得到：

```
['aet2000','aet2001'] 
```

当然它不是太难，但我是 Python 新手

* * *

**更新** 上面的问题显然不够准确。下面的所有答案都适用于示例，但不适用于我的实际数据。这是我制作文件名列表的代码：

```
years = range(2000,2011)
months = ["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]
variables = ["cwd","ppt","aet","pet","tmn","tmx"]     #  *variable name*  with wildcards   
tifnames = list(range(0,(len(years)*len(months)*len(variables)+1)  ))
i = 0
for variable in variables:
   for year in years:
      for month in months:
         fullname = str(variable)+str(year)+str(month)+".tif"
         tifnames[i] = fullname
         i = i+1 
```

运行 filter(lambda x:'aet' in x,tifnames) 或其他答案返回：

```
Traceback (most recent call last):
  File "<pyshell#89>", line 1, in <module>
    func(tifnames,'aet')
  File "<pyshell#88>", line 2, in func
    return [i for i in l if s in i]
TypeError: argument of type 'int' is not iterable 
```

尽管 tifnames 是一个字符串列表：

```
type(tifnames[1])
<type 'str'> 
```

你们看到这里发生了什么吗？再次感谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-11T17:37:04.393

使用`filter()`：

```
>>> names = ['aet2000','ppt2000', 'aet2001', 'ppt2001']
>>> filter(lambda x:'aet' in x, names)
['aet2000', 'aet2001'] 
```

与`regex`：

```
>>> import re
>>> filter(lambda x: re.search(r'aet', x), names)
['aet2000', 'aet2001'] 
```

* * *

在 Python 3 中，过滤器返回一个迭代器，因此可以对其进行列表调用`list()`。

```
>>> list(filter(lambda x:'aet' in x, names))
['aet2000', 'aet2001'] 
```

否则使用列表理解（它将在 Python 2 和 3 中工作：

```
>>> [name for name in names if 'aet' in name]
['aet2000', 'aet2001'] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-11T17:42:43.483

试试这个。它可能不是所有显示的代码中“最短”的，但对于尝试学习 python 的人来说，我认为它教的更多

```
names = ['aet2000','ppt2000', 'aet2001', 'ppt2001']
found = []
for name in names:
    if 'aet' in name:
       found.append(name)
print found 
```

输出

```
['aet2000', 'aet2001'] 
```

编辑：更改为生产列表。

也可以看看：

> [如何使用 Python 找出列表中以元音开头的单词？](https://stackoverflow.com/questions/12833512/how-to-use-python-to-find-out-the-words-begin-with-vowels-in-a-list)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T17:37:01.223

```
>>> names = ['aet2000', 'ppt2000', 'aet2001', 'ppt2001']
>>> def grep(l, s):
...     return [i for i in l if s in i]
... 
>>> grep(names, 'aet')
['aet2000', 'aet2001'] 
```

正则表达式版本，更接近 grep，但在这种情况下不需要：

```
>>> def func(l, s):
...     return [i for i in l if re.search(s, i)]
... 
>>> func(names, r'aet')
['aet2000', 'aet2001'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-11T17:37:14.373

您应该尝试查看名为[re](http://docs.python.org/library/re.html)的 pythong 模块。Bellow我在python中有一个使用re的grep函数实现。它将帮助您了解 re 的工作原理（当然只有在您阅读了 re 之后）

```
def grep(pattern,word_list):
    expr = re.compile(pattern)
    return [elem for elem in word_list if expr.match(elem)] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-11T18:18:04.483

您不需要预先分配列表`tifnames`或使用计数器来放入元素。只需将数据附加到生成的列表中或使用列表推导即可。

即，只需这样做：

```
import re

years = ['2000','2011']
months = ["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]
variables = ["cwd","ppt","aet","pet","tmn","tmx"]     #  *variable name*  with wildcards   
tifnames = []
for variable in variables:
   for year in years:
      for month in months:
         fullname = variable+year+month+".tif"
         tifnames.append(fullname)

print tifnames
print '==='
print filter(lambda x: re.search(r'aet',x),tifnames) 
```

印刷：

```
['cwd2000jan.tif', 'cwd2000feb.tif', 'cwd2000mar.tif', 'cwd2000apr.tif', 'cwd2000may.tif', 'cwd2000jun.tif', 'cwd2000jul.tif', 'cwd2000aug.tif', 'cwd2000sep.tif', 'cwd2000oct.tif', 'cwd2000nov.tif', 'cwd2000dec.tif', 'cwd2011jan.tif', 'cwd2011feb.tif', 'cwd2011mar.tif', 'cwd2011apr.tif', 'cwd2011may.tif', 'cwd2011jun.tif', 'cwd2011jul.tif', 'cwd2011aug.tif', 'cwd2011sep.tif', 'cwd2011oct.tif', 'cwd2011nov.tif', 'cwd2011dec.tif', 'ppt2000jan.tif', 'ppt2000feb.tif', 'ppt2000mar.tif', 'ppt2000apr.tif', 'ppt2000may.tif', 'ppt2000jun.tif', 'ppt2000jul.tif', 'ppt2000aug.tif', 'ppt2000sep.tif', 'ppt2000oct.tif', 'ppt2000nov.tif', 'ppt2000dec.tif', 'ppt2011jan.tif', 'ppt2011feb.tif', 'ppt2011mar.tif', 'ppt2011apr.tif', 'ppt2011may.tif', 'ppt2011jun.tif', 'ppt2011jul.tif', 'ppt2011aug.tif', 'ppt2011sep.tif', 'ppt2011oct.tif', 'ppt2011nov.tif', 'ppt2011dec.tif', 'aet2000jan.tif', 'aet2000feb.tif', 'aet2000mar.tif', 'aet2000apr.tif', 'aet2000may.tif', 'aet2000jun.tif', 'aet2000jul.tif', 'aet2000aug.tif', 'aet2000sep.tif', 'aet2000oct.tif', 'aet2000nov.tif', 'aet2000dec.tif', 'aet2011jan.tif', 'aet2011feb.tif', 'aet2011mar.tif', 'aet2011apr.tif', 'aet2011may.tif', 'aet2011jun.tif', 'aet2011jul.tif', 'aet2011aug.tif', 'aet2011sep.tif', 'aet2011oct.tif', 'aet2011nov.tif', 'aet2011dec.tif', 'pet2000jan.tif', 'pet2000feb.tif', 'pet2000mar.tif', 'pet2000apr.tif', 'pet2000may.tif', 'pet2000jun.tif', 'pet2000jul.tif', 'pet2000aug.tif', 'pet2000sep.tif', 'pet2000oct.tif', 'pet2000nov.tif', 'pet2000dec.tif', 'pet2011jan.tif', 'pet2011feb.tif', 'pet2011mar.tif', 'pet2011apr.tif', 'pet2011may.tif', 'pet2011jun.tif', 'pet2011jul.tif', 'pet2011aug.tif', 'pet2011sep.tif', 'pet2011oct.tif', 'pet2011nov.tif', 'pet2011dec.tif', 'tmn2000jan.tif', 'tmn2000feb.tif', 'tmn2000mar.tif', 'tmn2000apr.tif', 'tmn2000may.tif', 'tmn2000jun.tif', 'tmn2000jul.tif', 'tmn2000aug.tif', 'tmn2000sep.tif', 'tmn2000oct.tif', 'tmn2000nov.tif', 'tmn2000dec.tif', 'tmn2011jan.tif', 'tmn2011feb.tif', 'tmn2011mar.tif', 'tmn2011apr.tif', 'tmn2011may.tif', 'tmn2011jun.tif', 'tmn2011jul.tif', 'tmn2011aug.tif', 'tmn2011sep.tif', 'tmn2011oct.tif', 'tmn2011nov.tif', 'tmn2011dec.tif', 'tmx2000jan.tif', 'tmx2000feb.tif', 'tmx2000mar.tif', 'tmx2000apr.tif', 'tmx2000may.tif', 'tmx2000jun.tif', 'tmx2000jul.tif', 'tmx2000aug.tif', 'tmx2000sep.tif', 'tmx2000oct.tif', 'tmx2000nov.tif', 'tmx2000dec.tif', 'tmx2011jan.tif', 'tmx2011feb.tif', 'tmx2011mar.tif', 'tmx2011apr.tif', 'tmx2011may.tif', 'tmx2011jun.tif', 'tmx2011jul.tif', 'tmx2011aug.tif', 'tmx2011sep.tif', 'tmx2011oct.tif', 'tmx2011nov.tif', 'tmx2011dec.tif']
===
['aet2000jan.tif', 'aet2000feb.tif', 'aet2000mar.tif', 'aet2000apr.tif', 'aet2000may.tif', 'aet2000jun.tif', 'aet2000jul.tif', 'aet2000aug.tif', 'aet2000sep.tif', 'aet2000oct.tif', 'aet2000nov.tif', 'aet2000dec.tif', 'aet2011jan.tif', 'aet2011feb.tif', 'aet2011mar.tif', 'aet2011apr.tif', 'aet2011may.tif', 'aet2011jun.tif', 'aet2011jul.tif', 'aet2011aug.tif', 'aet2011sep.tif', 'aet2011oct.tif', 'aet2011nov.tif', 'aet2011dec.tif'] 
```

而且，根据您是否觉得这更具可读性，Python 会更惯用：

```
years = ['2000','2011']
months = ["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]
vars = ["cwd","ppt","aet","pet","tmn","tmx"]        
tifnames = [v+y+m+".tif" for y in years for m in months for v in vars]
print tifnames
print '==='
print [e for e in tifnames if re.search(r'aet',e)] 
```

...相同的输出

# php - 如何阅读 Facebook 活动的墙？

> ID：12845294
> 
> 赞同：2
> 
> 时间：2012-10-11T17:34:01.453
> 
> 标签：php, facebook, events, sdk

我有一个成功通过身份验证的用户通过 facebook 登录到我的应用程序，我想阅读用户创建的事件的墙/信息。我的代码返回一个只有 [data] => () 的空数组。事件 ID 取自事件的 URL 是有效的。非常感谢任何关于在哪里可以找到相关文档的链接。登录时是否需要向用户请求任何额外权限？

```
 <?php
    require 'facebook.php';

    $facebook = new Facebook(array(
      'appId'  => 'XXXXXXXX',
      'secret' => 'XXXXXXXX',
      'cookie' => true
    ));

    $user = $facebook->getUser();

    $page_id = 'XXXXXXXX';
    $pageFeed = $facebook->api('/'.$page_id.'/feed');

    print_r($pageFeed);

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:43:37.943

检查您是否拥有`user_events` [权限](https://developers.facebook.com/docs/authentication/permissions/)- 这是访问用户事件和/或这些事件的提要所必需的

# php - 无法使用已知 CA 证书对 dropbox SDK php 进行身份验证

> ID：12845295
> 
> 赞同：1
> 
> 时间：2012-10-11T17:34:25.247
> 
> 标签：php, oauth, ssl-certificate, dropbox

我正在尝试使用 php dropbox sdk，但我收到了这些错误

```
Uncaught exception 'OAuthException' with message 'making the request failed (Peer certificate cannot be authenticated with known CA certificates)' in C:\xampp\htdocs\mydropbox\Dropbox\OAuth\PHP.php:126 Stack trace: #0 C:\xampp\htdocs\mydropbox\Dropbox\OAuth\PHP.php(126): OAuth->getRequestToken('https://api.dro...') #1 C:\xampp\htdocs\mydropbox\index.php(18): Dropbox_OAuth_PHP->getRequestToken() #2 {main} Next exception 'Dropbox_Exception_RequestToken' with message 'We were unable to fetch request tokens. This likely means that your consumer key and/or secret are incorrect.' in C:\xampp\htdocs\mydropbox\Dropbox\OAuth\PHP.php:132 Stack trace: #0 C:\xampp\htdocs\mydropbox\index.php(18): Dropbox_OAuth_PHP->getRequestToken() #1 {main} thrown in C:\xampp\htdocs\mydropbox\Dropbox\OAuth\PHP.php on line 132 
```

我确实尝试了很多次，使用 OpenSSL 生成新的并按照所有说明进行操作，但它仍然给我这个错误。

参考来源：http://help.discretelogix.com/miscellaneous/installing-self-signed-ssl-certificate-on-wamp-server.htm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:59:08.260

我找到了一个不使用CA认证的github，或者它可能已经照顾了我。

[https://github.com/BenTheDesigner/Dropbox](https://github.com/BenTheDesigner/Dropbox)

它对我来说效果很好。

# windows-8 - 如何在windows store app中实现消耗品？

> ID：12845304
> 
> 赞同：4
> 
> 时间：2012-10-11T17:35:16.933
> 
> 标签：windows-8, in-app-purchase, windows-store-apps, windows-store

是否可以通过应用内购买销售消耗品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-01T11:20:48.330

只需将我的 2 美分添加到答案中：

1.  Windows 8 上的 IAP 数量有[限制，为 200](http://blog.kulman.sk/windows-store-limits-the-number-of-in-app-purchases-for-an-app/)（但[已在 Windows 8.1 中删除](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Dn532256(v=win.10).aspx)）。这似乎很多，但一个应用程序可以轻松拥有 10 或 20 个不同的 IAP，这会将这个数字分成 24 小时内的 10 次购买，这似乎是一些用户很可能很快就会达到的限制。要为此添加两个更复杂的解决方案：

    *   您可以使用分析来获取用户在 24 小时窗口内购买的每个应用内商品的最大数量，并相应地调整每个应用内商品的每个 IAP 产品的数量，即为最常用的应用内商品分配更多 IAP 产品，以及少到 24 小时内没有多次购买的物品。
    *   您可以将 IAP 产品分配到价格层，即以 1.49 美元的应用内商品价格定义 50 种产品，以 1.99 美元定义 25 种产品，依此类推。

2.  为了完整起见，我想引用@Chris Bowen 对解决方法辩论的链接：

> 如果游戏启用了 XBL，他们将不得不使用内置的耗材解决方案。

不过，根据我的经验，Xbox Live 是一个非常封闭的程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-14T20:26:38.967

这看起来在 Windows 8.1 中已修复。[http://msdn.microsoft.com/en-us/library/windows/apps/bg182887.aspx#two](http://msdn.microsoft.com/en-us/library/windows/apps/bg182887.aspx#two)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T19:15:18.973

答案是否定的，但它也是肯定的。

不支持消耗品。这是您可以一次又一次地进行的任何应用内购买。它们不受支持。

但是，耐用品（您可以一次性购买）可以设置为在一天内到期。许多开发商创造了多种耐用品，允许它们在一天内被购买，在某处保留他们购买的中央记录，并让它们过期，以便用户明天可以再次购买它们。

所以，不，你不能设置消耗品。

而且，是的，您可以设置过期耐用品并像日常消耗品一样行事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T20:50:20.417

Windows Store 应用程序不直接支持消耗品（例如，为您的角色购买一包金币，并允许用户多次购买该包）（尽管 Windows Phone SDK 有[ProductLicense.IsConsumable](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.applicationmodel.store.productlicense.isconsumable)），但有一种可能对您有所帮助的[解决方法](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/07222726-3adc-4d49-91d7-ed64381b8057)，具体取决于具体情况。

但是，支持多种*不同*产品的应用内购买实现起来相对简单，如本文和示例所示：

*   [如何支持应用内购买](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067)
*   [试用应用和应用内购买示例](http://code.msdn.microsoft.com/windowsapps/Licensing-API-Sample-19712f1a)

# visual-studio - 如何让 Visual Studio 性能工具为“System.Core.ni.dll”加载符号

> ID：12845306
> 
> 赞同：24
> 
> 时间：2012-10-11T17:35:19.740
> 
> 标签：visual-studio

我正在使用 Visual Studio 11 的分析器（采样），并且无法让报告显示我需要的代码。问题是一些程序集不会加载，因为它们是“本机图像”。我关心的第一个是“System.Core.ni.dll”。因为那个符号没有加载，当我去查看报告时，我看不出为什么我的表达式很慢。相反，它只是将与表达式相关的所有示例捆绑到一行读取“System.Core.ni.dll”的行中。

如果我查看输出窗口，我会看到以下两行：

无法为 C:\Windows\assembly\NativeImages_v4.0.30319_64\System.Core\713a8c0e41e664d349efcc0cec7f5e86\System.Core.ni.dll 加载符号为 C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\ 加载符号v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll

注意第一个符号如何不加载？

我有哪些选择？我可以停止使用本机图像吗？我可以加载原生图像的符号吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-01T21:20:19.093

I had a similar problem on Windows 8 and found a post [here](http://blogs.msdn.com/b/visualstudioalm/archive/2012/12/10/creating-ngen-pdbs-for-profiling-reports.aspx) that helped me solve the problem. Don't know if it will solve the OP's issue but it worked for me.

# vim - 在 VIM 中替换从 = 到行尾的所有内容

> ID：12845307
> 
> 赞同：2
> 
> 时间：2012-10-11T17:35:21.890
> 
> 标签：vim, replace, substitution

假设我有几行，例如：

```
$repeat_on =  $_REQUEST['repeat_on'];    
$opt_days = $_REQUEST['opt_day'];  
$opt_days = explode(",", $opt_days); 
```

... 等等。

假设我使用可视模式选择所有行：如何替换从`=`行尾到行尾的所有内容，如下所示：

```
$repeat_on = NULL;    
$opt_days =  NULL;
$opt_days =  NULL; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T17:37:41.630

选择块后，使用此替代项：

```
s/=.*$/= NULL; 
```

`=`替换正则表达式通过将行之间和行尾之间的任何内容（包括 , `=`）替换为 来更改每一行`= NULL;`。

命令的第一部分是匹配要替换的正则表达式：`=.*$`.

*   `=`是从字面上理解的。
*   点`.`表示*任何字符*。
*   所以`.*`意味着：*0 个或多个任意字符*。
*   这由`$`for *end of line*终止，但这实际上在这里不是必需的：也可以不带`$`.

因此，正则表达式将匹配`=`每行中第一个之后的区域，并将该区域替换为替换区域，即`= NULL;`. 我们需要`=`在替换中包含 以将其添加回来，因为它是要替换的匹配的一部分。

当您选择了一个块并点击`:`输入命令时，命令行将自动以如下所示的视觉选择范围为前缀：

```
:'<,'> 
```

继续输入上面的命令，你的命令行将是：

```
:'<,'>s/=.*$/= NULL; 
```

这会将替换应用到选定的视觉块。

如果您需要在一行中有多个替换，则需要添加`g`标志：

```
:'<,'>s/=.*$/= NULL;/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:24:34.657

一些替代方案：

## 视觉块（快速）

在第一行/字符做...`Wl<C-v>jjCNULL;<Esc>bi<Space><Esc>`

## 微距（更快）

在第一行/字符做...`qqWllCNULL;<esc>+q2@q`

## :norm（最快）

在第一行做...`3:no<S-tab> WllCNULL;<Enter>`

或者，如果您在视觉上选择了这些行，则将 3 留在开头。

# codeigniter - codeigniter 更新数据库，选中项目为“TRUE”，其余未选中项目为“FALSE”

> ID：12845308
> 
> 赞同：1
> 
> 时间：2012-10-11T17:35:22.577
> 
> 标签：codeigniter

我是 php/codeignitor 的新手，并试图将表单复选框的更改发布到我的数据库。要修改的行由下面的 gl_id 分配。我不知道如何在模型中使用我的 update_checked 函数将 TRUE 发布到 gl_id =x 和 FALSE 的每个字段，用于不在数组中的其余字段。我可以在控制器中使用 $_POST['checked'] 创建和查看检查值数组并将其传递给模型。现在我需要使用这个数组发布到数据库，其中 gl_id = 视图中表单的值。

在视图中

```
 <h1>Update GL id <?php echo $gl_field['gl_id'];?></h1>
        <label>Stat</label>
            <input type="checkbox" <?php if ($gl_field['stat'] == "TRUE") {echo "checked = checked";} ?>   
            name = "checked[]" id="stat" value= "stat"  /><BR CLEAR="all">
        <label>Exclude</label>
            <input type="checkbox" <?php if ($gl_field['exclude'] == "TRUE") {echo "checked = checked";} ?>  
            name="checked[]" id="exclude" value= "exclude"><BR CLEAR="all">
        <label>Override</label>
            <input type="checkbox" <?php if ($gl_field['override'] == "TRUE") {echo "checked = checked";} ?>          
            name= "checked[]" id= "override" value = "override"/><BR CLEAR="all"> 
```

在控制器中

```
 public function update_table(){
               $this->load->helper('form');
               $this->page_nav_model->update_table();
               $checked_array = $_POST['checked'];
               $this->page_nav_model->update_checked($checked_array);
               $this->load->view('pages/success');
            } 
```

在模型中

```
 foreach($checked_array as $true){
            echo $true;                             
        } 
```

为了澄清当我将信息拉入上述示例中的表单时，数据库中的所有复选框都设置为“TRUE”，因此它们被选中。如果我取消选中 stat 并单击提交，我可以看到一个包含值的数组（排除、覆盖）。

我感谢任何使我朝着正确方向前进的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:36:56.257

如果未选中 HTML 中的复选框，则不会通过 $_POST 发送该值。这在 CodeIgniter 中没有考虑。这就是我处理这个问题的方式。在控制器中：

```
/**
 * Set post values for unchecked boxes.
 *
 * @access private
 * @return void
 */
private function _section_checkboxes()
{
    if (!$this->input->post('is_active')) {$_POST['is_active'] = 0;}
    // other checkboxes here...
}

/**
 * if form validation passes, run this to edit a section
 *
 * @access public
 * @return void
 */
public function do_edit_section()
{
    $this->_section_checkboxes();
    if ($this->section_model->edit_section($this->input->post()))
    {
        redirect('success_page');
    }
} 
```

在模型中：

```
/**
 * updates a section with active record, returns success.
 * 
 * @access public
 * @param array $data
 * @return bool
 */
public function edit_section(array $data)
{
    $this->db->where('id', $data['id']);
    return $this->db->update('sections', $data);
} 
```

在视图中，使用表单助手：

```
<?=form_checkbox(array('name' => 'is_active', 'id' => 'is_active_field', 'value' => '1', 'checked' => (bool)$item->is_active))?> 
```

现在，您未选中的复选框在未选中时设置为 0，在选中时设置为 1。我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:05:28.420

所以我仍然需要帮助来对整个项目进行最后的润色，所以我想在这里为任何像我希望控制来自 db 的复选框和来自复选框的 db 的绿色的人发布最终结果。

控制器：

```
 [function from Tayler and]
    $all_checkbox_fields = array('stat','exclude','override');  
        $checked_array = $_POST['checkbox'];
        $data['checkbox'] = $this->add_values($all_checkbox_fields, $checked_array); 
        $data['gl_id'] = $this->input->post('gl_id');
        $this->page_nav_model->update_checked($data); 
        $this->load->view('pages/success'); 
```

模型：

```
 public function update_checked($data){
        $this->default_db->where('gl_id', $data['gl_id']); 
        $this->default_db->update('oracle_table', $data['checkbox']); 
    } 
```

看法：

```
 <label>Stat</label>
        <input type="checkbox" <?php if ($gl_field['stat'] == "1") {echo "checked = checked";} ?>   
        name = "checkbox[]" id="stat" value= "stat"/><BR>
    <label>Exclude</label>
        <input type="checkbox" <?php if ($gl_field['exclude'] == "1") {echo "checked = checked";} ?>  
        name="checkbox[]" id="exclude" value= "exclude"/><BR>
    <label>Override</label>
        <input type="checkbox" <?php if ($gl_field['override'] == "1") {echo "checked = checked";} ?>          
        name= "checkbox[]" id= "override" value = "override" ><BR> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:39:26.987

要一次使用 CI 更新您的表，您需要一个这样的数组：

```
 $data = array(
        'column_1_name' => 'value_to_insert'
        'column_2_name' => 'value_to_insert'
        'column_2_name' => 'value_to_insert'
    ); 
```

现在，你有一个像这样的数组 $checked_array = ('stat', 'exclude', 'override') - 有更多或更少的成员。

要创建可以在更新语句中使用的数组（如上面的 $data），您需要做的是创建另一个数组，其中每个列的名称和值等于 1 如果它在 $checked_array 或 0 如果它不在 $checked 数组中。

下面的函数 add_values() 可以为您做到这一点。您必须提供两个参数：

1.  $all_possibilities 是您想要更新为 1 或 0 的每个列名的数组。在这种情况下，它应该看起来像 $all_possibilities = array('stat', 'exclude', 'override');
2.  $selected：这是一个包含实际选中框名称的数组 - 它是 $all_possibilities 的子集（或者如果所有框都被选中，则它是相同的）。

此功能在您的控制器中。

```
 function add_values($all_possibilities, $selected) {

        $array_for_query = array();
        // this goes through each possible box that can be checked to see if that possibility was actually selected
        foreach($all_possibilities as $array_member) {
            // this checks to see if the current member of $all_possibilities is found in the $selected array
            if (in_array($array_member, $selected)) {
                    // if it is, it adds that as a member of a new query $array_for_query and gives it a value of 1 (true)
                    $array_for_query[$array_member] = 1;
                } else {
                    // if it is not, same as above, but gives it a value of 0
                    $array_for_query[$array_member] = 0;        
                }
        }

        // once all the possibilities have been checked and added to the query array, that array is returned
        return $array_for_query;
    } 
```

现在您可以调用该函数并将两个参数传入。返回的数组分配给 $checked_and_unchecked。

```
 $data['checked_and_unchecked'] = add_values($possibilities, $checked_array); 
```

确保您还从表单中获取 gl_id。您可以使用视图中的隐藏字段来执行此操作：

```
 <input type="hidden" name="gl_id" value="<?php echo $gl_field['gl_id'];?>" /> 
```

在控制器中，使用

```
 $data['gl_id'] = $this->input->post('gl_id'); 
```

然后您可以将信息传递给您的模型并更新您的表，并传入表的名称和您创建的数组。

```
 $this->model_name->model_method($data); 
```

然后这将进入模型：

```
 $this->db->update('table_name', $checked_and_unchecked);
    $this->db->where('gl_id', $gl_id); 
```

# c# - 文件加密 C#

> ID：12845310
> 
> 赞同：-2
> 
> 时间：2012-10-11T17:35:27.437
> 
> 标签：c#, encryption

我在网上找到了这段代码我想知道在这个程序中传递了什么这个输出和输入字符串是什么？我将输入作为文件名传递，并将输出作为路径传递，但它给出了错误。

```
private void EncryptFile(string inputFile, string outputFile)
{
    try
    {
        string password = @"myKey123"; // Your Key Here
        UnicodeEncoding UE = new UnicodeEncoding();
        byte[] key = UE.GetBytes(password);

        string cryptFile = outputFile;
        FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

        RijndaelManaged RMCrypto = new RijndaelManaged();

        CryptoStream cs = new CryptoStream(fsCrypt,RMCrypto.CreateEncryptor(key, key),CryptoStreamMode.Write);

        FileStream fsIn = new FileStream(inputFile, FileMode.Open);

        int data;
        while ((data = fsIn.ReadByte()) != -1)
            cs.WriteByte((byte)data);

        fsIn.Close();
        cs.Close();
        fsCrypt.Close();
    }
    catch
    {
        MessageBox.Show("Encryption failed!", "Error");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:41:54.093

该`outputFile`参数不是路径，而是需要写入的完全限定文件名。调用此代码的示例方法是：

`EncryptFile(@"c:\temp\unencryptedfile.txt", @"c:\temp\encryptedfile.txt");`

除此之外，将`catch`代码替换为以下内容：

```
catch(Exception ex) {
  MessageBox.Show(ex.Message); // will show the top exception
  if (ex.InnerException != null) {
    MessageBox.Show(ex.InnerException.Message); // will show additional details if present
  }
} 
```

* * *

**旁注**：您知道，您拥有的代码会泄漏内存。您可能想要调查该`using`子句并查找您正在使用哪些类 implement `IDisposable`。

# javascript - 如何纠正从 jsFiddle 到 HTML 的 no wrap(head) JavaScript 以使其正常工作

> ID：12845313
> 
> 赞同：1
> 
> 时间：2012-10-11T17:35:39.420
> 
> 标签：javascript, html, css, slide

几天前，我发布了一个关于幻灯片概念的查询。
在这里偶然发现了这个确切的概念。
[http://jsfiddle.net/JCQ6Q/15/](http://jsfiddle.net/JCQ6Q/15/)

但是，我面临一个问题。
在 Js Fiddle 中，一切似乎都很好。
但是当我在本地主机上的 HTML 编辑器软件上编译它时，它没有运行 :(
图像堆叠在一起并且出现滚动条。

可能是因为在 JsFiddle 上，框架*没有被放置 wrap(head)*
如果它被放置到默认的*onLoad*，同样的事情发生在我的 HTML 中

关于我如何正确地将 javascript 放在 HTML 上的任何输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:39:56.810

控制台中的错误是这样的：

```
Uncaught TypeError: Object [object Object] has no method 'anythingSlider' 
```

您的插件脚本包含得太晚（`.ready()`之前执行`.load()`）。确保你的 HTML 结构是这样的：

```
<script src="plugin.js"></script>
<script>
    $(function () {
        $('#slider').anythingSlider({
            autoPlay: true,
            autoPlayLocked: true,
            buildStartStop: false
        })
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:40:40.087

你测试过：

```
$(document).ready(function() {
  // your code
}); 
```

似乎它适用于jsfiddle[链接](http://jsfiddle.net/JCQ6Q/17/)

# animation - cocos2d中的图像大小

> ID：12845316
> 
> 赞同：0
> 
> 时间：2012-10-11T17:35:44.687
> 
> 标签：animation, cocos2d-iphone, kobold2d

我正在播放大约 90 张图像 @ 480x320 的动画，我想知道图像不是 2 的幂，这会对性能造成很大的影响吗？我正在为 iphone 3Gs 编程。我也在使用 cocs2d。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:11:40.763

假设您在开始时加载所有这些图像并且它们是 16 位图像。

那么你将有 512x512x90 = 23,592,960 像素 16 位图像，即 377,487,360 位。377,487,360 位 = **45 MB** RAM。

所以是的，这是一个很大的性能打击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:17:02.207

让我们来看看...

480x320 图像将创建 512x512 的纹理（下一个最接近的 2 次方）。512x512 乘以 32 位颜色深度（4 字节）等于 1 兆字节。90 乘以 1 兆字节等于 90 兆字节。

您最大的问题将是分配这么多内存并对其进行缓存。如果不缓存动画图像，则每次动画帧更改时都必须加载每个图像。从闪存加载 1 兆字节非常慢，我猜 > 100 毫秒。因此，每次帧发生变化时，您的应用都会停止几分之一秒。如果您使用 Retina 图像（每个 960x640 图像需要 4 MB 纹理内存），这将是 3GS 和 Retina 设备上的问题。

您只能通过使用 PVR 压缩图像（使用 TexturePacker）来改善这一点。即使将纹理大小减半到 16 位也可能不足以制作流畅的动画。

# linux - 有序模式与回写模式

> ID：12845319
> 
> 赞同：1
> 
> 时间：2012-10-11T17:35:50.240
> 
> 标签：linux, filesystems, journaling

> > 在*Writeback 模式下*，只有 inode 数据写入日志，并且无法控制何时写入文件数据。

这一行让我想到了在正常情况下何时将数据写入设备以及何时丢失数据。

在*写回模式下*，是否有任何选项可以在日志记录后立即将数据强制写入设备，从而保证与*有序模式*提供的相同安全性？

另外，*Writeback 模式*和*Ordered 模式*是否仅基于此进行区分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:11:35.997

如果我们不详细说明，那么查询的答案是肯定的（至少在像 ext3 这样的文件系统中）。在这两种模式下，只有文件系统元数据被写入日志。回写模式和有序模式之间的区别在于，在有序模式下，文件系统对元数据和相关数据块进行分组，以便在记录元数据之前将数据块写入磁盘，而在有序模式中只记录元数据（并且数据块不会在全部）。

ii. 从实现的角度来看（就 ext3 而言），在有序模式下，对页面中的每个数据缓冲区调用一个附加函数 journal_dirty_data()，以将缓冲区插入到活动事务的适当列表中。JBD 层确保此列表中的所有缓冲区在事务的元数据缓冲区之前写入磁盘。在调用 generic_commit_write( ) 函数之后，该函数将数据缓冲区插入所有者 inode 的脏缓冲区列表中。在回写模式下，不会在数据缓冲区上调用类似 journal_dirty_data( ) 的函数，而只会调用 generic_commit_write( )。

# c# - 如何从控制器操作重定向/返回 aspx 页面？

> ID：12845322
> 
> 赞同：0
> 
> 时间：2012-10-11T17:35:57.077
> 
> 标签：c#, html, asp.net-mvc

如何通过控制器操作的路径返回特定的 aspx 页面？

这是我从控制器操作重定向的方式：

```
Response.Redirect("_PDFLoader.aspx?Path=" + FilePath  +  id + ".pdf"); 
```

甚至尝试了以下方法：

```
return Redirect("_PDFLoader.aspx?Path=" + FilePath + id + ".pdf"); 
```

这是我的 _PDFLOader.aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="_PDFLoader.aspx.cs" Inherits="Proj._PDFLoader" %> 
```

这是我的代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

namespace Proj
{
    public partial class _PDFLoader : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string OutfilePath = Request.QueryString["Path"].ToString();
            FileStream objfilestream = new FileStream(OutfilePath, FileMode.Open, FileAccess.Read);
            int len = (int)objfilestream.Length;
            Byte[] documentcontents = new Byte[len];
            objfilestream.Read(documentcontents, 0, len);
            objfilestream.Close();

            if (File.Exists(OutfilePath)) File.Delete(OutfilePath);       

            Response.ContentType = "application/pdf";
            Response.AddHeader("content-length", documentcontents.Length.ToString());
            Response.BinaryWrite(documentcontents);

        }
    }
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:44:57.497

以下应该有效：

```
public class SomeController: Controller
{
    public ActionResult SomeAction() 
    {
        return Redirect("~/_PDFLoader.aspx?Path=" + Url.Encode(FilePath + id) + ".pdf"");
    }
} 
```

但据我所知，这个`_PDFLoader.aspx`WebFrom 所做的只是提供文件然后删除它。您可以直接从控制器操作中执行此操作：

```
public class SomeController: Controller
{
    public ActionResult SomeAction() 
    {
        string path = FilePath + id + ".pdf";
        if (!File.Exists(path))
        {
            return HttpNotFound();
        }
        byte[] pdf = System.IO.File.ReadAllBytes(path);
        System.IO.File.Delete(path);
        return File(pdf, "application/pdf", Path.GetFileName(path));
    }
} 
```

如果您希望文件内联显示而不是下载它：

```
return File(pdf, "application/pdf"); 
```

# java - 正则表达式检查中间 3 个字符

> ID：12845324
> 
> 赞同：0
> 
> 时间：2012-10-11T17:36:00.767
> 
> 标签：java, regex

我遇到了一个问题，我需要查看提供的字符串是否包含我正在寻找的中间 3 个字符。

例如。我们总是会得到 9 个字符串，其中我想比较中间的 3 个字符，例如“abc”。如果条件匹配，那么我想应用一些逻辑。谁能给我举个例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:46:16.803

我想这就是你想要的

```
^.{3}abc.{3}$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:46:19.667

`^.*abc.*$`

你也可以使用类似的东西`^.{3}abc.{3}$`来匹配中间的三个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:46:05.920

`substring`使用and可能更有意义`equals`：

```
if(s.substring(3, 6).equals("abc"))
    // ... 
```

但是如果你真的想要一个正则表达式，你可以写：

```
if(Pattern.compile("...abc...", Pattern.DOTALL).matcher(s).matches())
    // ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T18:00:22.047

```
int mid = (test.length()/2);
string = string.substring(mid-1, mid+2);
if (string.equals("abc"))
{
   do stuff
} 
```

这是一个使用子字符串获取中间三个字符的示例。您可能需要添加一个检查，以防字符串长度少于 3 个字符以防止错误。将 abc 更改为您要检查的任何内容。

# sql - DB2 - 获取字符串中字符多个位置的方法

> ID：12845328
> 
> 赞同：2
> 
> 时间：2012-10-11T17:36:19.863
> 
> 标签：sql, db2

因此，我很高兴使用一个非常古老的数据库，该数据库显然是在规范化发明之前设置的。我被要求看看我是否能想出一个让它正常工作的方法。

第一个表实际上有一个真正的主键。例子：

```
ID, Reason
--- ----------
 1, Write off
 2, Overage
 3, OLH 
```

问题是另一张桌子...

```
CustomerNum, JobNum, Reasons
------------ ------- ---------------------
      42351,     46, X
      32313,    456,    X
      85472,     13,   X    X 
```

这些表是如何连接到他们的系统中的？是的，X 在行中的位置。因此，如果 X 在第一个位置，则为原因 1，第二个位置，原因 2，依此类推。它本质上是一个平面阵列。如果他们将其限制为每行 1 X，那实际上并不会太糟糕......（`LOCATE('X', REASONS) as XINDEX`）但事实并非如此。理论上，每行可以检查 21 个可能的 X。

所以我必须给他们一个关于如何让它发挥作用的建议。
我的第一个建议是创建一个单独的表并规范化这些表，但是我不知道这将如何进行，或者他们是否愿意更改他们的系统。
所以，我还想建议一个类似于存储过程的东西，它能够遍历每一行并返回索引，就好像它们在一个单独的表中一样。

我不知道这是否可能，但我充满希望。

**编辑**

所以，是的，我*真的*要推动链接表。
这是我从建议中得到的替代方案：

```
Select tblCustomers.*, 
CASE WHEN SUBSTRING(Reasons,1,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 1)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,2,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 2)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,3,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 3)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,4,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 4)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,5,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 5)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,6,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 6)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,7,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 7)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,8,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 8)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,9,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 9)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,10,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 10)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,11,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 11)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,12,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 12)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,13,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 13)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,14,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 14)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,15,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 15)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,16,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 16)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,17,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 17)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,18,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 18)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,19,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 19)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,20,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 20)) || ', ' ELSE '' END 
|| CASE WHEN SUBSTRING(Reasons,21,1) = 'X' THEN RTRIM((SELECT Reason FROM tblReasons WHERE ID = 21)) || ', ' ELSE '' END AS XPOS 
From tblCustomers 
```

我将不得不稍微考虑一下 Marlin 的建议，看看它简化了多少，但我喜欢这个查询的一件事是它显示了他们当前的布局是多么荒谬，以及他们为什么应该改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:45:39.847

我要做的第一件事是为 X 的每个可能位置创建一个新列（所以如果有 10 个位置 -> 10 个新列）并为这些列赋予有意义的名称。那么您可以更轻松地编写查询...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:57:28.000

我真的会推销新的链接表，但这里要么是存储过程的核心，要么是填充链接表的方式：

```
SELECT Customers.CustomerNum, Reasons.ID
FROM Customers, Reasons
WHERE SUBSTR(Customers.Reasons, Reasons.ID, 1) = 'X' 
```

# c - 在 Linux 中使用 makefile 将源文件更新到不同的文件夹

> ID：12845337
> 
> 赞同：0
> 
> 时间：2012-10-11T17:36:54.343
> 
> 标签：c, linux, compilation, makefile, gnu

我有一个 Linux GNU C 项目，它需要为两个不同的硬件设备构建输出，使用一个通用的 C 源代码库，但使用不同的 makefile。目前我在同一个文件夹中有两个makefile，每个设备一个，当我对代码进行更改时，我必须先“make clean”来制作第一个模型，然后“make clean”来制作第二个模型. 这是因为它们使用不同的编译器和处理器。即使代码文件没有更改，我也必须为其他设备重新编译它。

我想做的是为第二个模型使用不同的文件夹，因此它存储 *.d 和 *.o 文件的单独副本。我不必“清理”，只需重新编译更改的源。我看过 makefile 语法，并且是 Linux 的新手，只能对这些东西的神秘性质摸不着头脑。

我正在考虑的一种方法是将 .c 和 .h 文件从 model_1 文件夹更新到 model_2 文件夹。有人可以为我提供一个简单的生成文件，它只会将较新的 *.c 和 *.h 文件从一个文件夹复制到另一个文件夹吗？

或者，必须有一种方法可以拥有一个公共源文件夹和单独的输出文件夹，因此不需要重复的源文件。任何帮助实现这一目标表示赞赏。如果您想查看它们，我可以提供 makefile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:15:30.913

这可以通过[makepp](http://makepp.sourceforge.net/)的存储库机制轻松实现。如果你调用`makepp -R../src ARCH=whatever`那么它将符号链接`../src`当前目录下的所有部分并在这里编译。

您甚至可以创建一个文件`.makepprc`并放入特定于该架构的任何选项，因此您永远不会混淆在哪里调用哪个命令。

如果您的不同架构具有相同的生成文件（如生成的源文件），您甚至可以构建，`../src`而其他架构将选择不依赖于您当前编译选项的所有内容。

*makepp 还有很多。除了做 GNU make 能做的几乎所有事情，还有很多有用的东西，你甚至可以用一些 Perl 编程来扩展你的 makefile。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:03:54.243

您希望在编译时将生成的文件（对象和依赖项）放入每个构建类型的单独文件夹中。这是我所做的可能对你有用的事情：

```
$(PRODUCT1_OBJDIR)/%.o $(PRODUCT1_OBJDIR)/%.d: %.cpp
        @mkdir -p $(@D)
        $(CXX) $(PRODUCT1_DEPSFLAGS) $(CXXFLAGS) $(INCLUDE_DIR) $< -o $(PRODUCT1_OBJDIR)/$*.o

$(PRODUCT2_OBJDIR)/%.o $(PRODUCT2_OBJDIR)/%.d: %.cpp
        @mkdir -p $(@D)
        $(CXX) $(PRODUCT2_DEPSFLAGS) $(CXXFLAGS) $(INCLUDE_DIR) $< -o $(PRODUCT2_OBJDIR)/$*.o 
```

$PRODUCT1_OBJDIR 和 $PRODUCT2_OBJDIR 是您希望存储生成文件的目录的变量名称。这将检查依赖项的更改并在需要时重新编译。

如果您仍然有问题，请回复反馈，将尝试解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:42:18.850

您可以将源文件编译为不同目录中的目标文件（“文件夹”在 Unix 上并不是真正合适的词）。你只需要设置适当的`make`规则。您可能会使用其他构建器，例如[omake](http://omake.metaprl.org/i) , `scons`, ...

你可以使用[remake](http://bashdb.sourceforge.net/remake/)来调试你的 GNU `Makefile`-s。你可以有这样的规则

```
$(OBJDIR)/%.o: $(SRCDIR)/%.c
         $(COMPILE.c) -c $^ -o $@ 
```

你可以设置（在你的早期`Makefile`）变量，例如

```
OBJDIR:=obj-$(shell uname -m) 
```

或者更好的东西

我建议阅读 GNU make 的[手册](http://www.gnu.org/software/make/manual/make.html)；它介绍了makefile。

# dynamic - 必须单击在 div 内创建的动态元素

> ID：12845338
> 
> 赞同：1
> 
> 时间：2012-10-11T17:36:57.213
> 
> 标签：dynamic, click, element, bind, any

我需要在 div 中获取我的动态创建元素的 id。我正在寻找一种方法来通过单击它来获取它的 id。例子：

```
$("#div").on("click", '*', function () {
    alert($(this).id);
}); 
```

元素可以是图像、链接、按钮等...我需要动态绑定点击它，并在被点击时获取 id。

我使用 append 将子元素添加到 div。

```
$("#div").append(element); 
```

元素显示正确，但我无法检索 ID。

有没有办法得到它？

jsfiddle 中的示例：http: [//jsfiddle.net/StTvn](http://jsfiddle.net/StTvn)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:29:28.237

[http://jsfiddle.net/StTvn/2/](http://jsfiddle.net/StTvn/2/)

更改了侦听器选择器并且它可以工作

```
 $("#myDiv").on("click", "*", function () {
     txt = $(this).attr('id');
     alert(txt);
 }); 
```

作为旁注，以数字开头的 id 不是有效的 html - 您可能希望更改生成它们的方式，如下所示：

```
el.id=  "img" + i.toString(); 
```

# installation - NSIS 中的 MUI 页面顺序

> ID：12845339
> 
> 赞同：0
> 
> 时间：2012-10-11T17:37:00.620
> 
> 标签：installation, nsis, uninstallation

如何根据某些条款更改页面顺序？例如，自定义页面上有 2 个单选按钮 - “修复程序”和“卸载程序”。当我选择“修复程序”时，下一个应该显示 5 页，当我选择另一个单选按钮时应该显示 2 页。是否可以在卸载程序安装页面中使用，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:00:10.297

MUI_UNPAGE_CONFIRM 在安装程序中没有真正意义，除了您可以在安装程序和卸载程序中使用所有页面类型。

要跳过页面，您必须调用`Abort`该页面的预回调函数。您也可以[直接跳转到特定页面](http://nsis.sourceforge.net/Go_to_a_NSIS_page)。

```
!include MUI2.nsh
!include LogicLib.nsh

Var pagemode
Function selectpagemode
MessageBox MB_YESNO "Mode A?" IDNO nope
    StrCpy $pagemode "A"
    Return
    nope:
    StrCpy $pagemode "B"
FunctionEnd

Function onlymodeA
${IfThen} $pagemode != "A" ${|} Abort ${|}
FunctionEnd
Function onlymodeB
${IfThen} $pagemode == "A" ${|} Abort ${|}
FunctionEnd

!define MUI_PAGE_CUSTOMFUNCTION_LEAVE selectpagemode
!insertmacro MUI_PAGE_WELCOME 

;Mode A
!define MUI_PAGE_CUSTOMFUNCTION_PRE onlymodeA
!insertmacro MUI_PAGE_LICENSE "${__FILE__}"
!define MUI_PAGE_CUSTOMFUNCTION_PRE onlymodeA
!insertmacro MUI_PAGE_COMPONENTS

;Mode B
!define MUI_PAGE_CUSTOMFUNCTION_PRE onlymodeB
!insertmacro MUI_PAGE_COMPONENTS
!define MUI_PAGE_CUSTOMFUNCTION_PRE onlymodeB
!insertmacro MUI_PAGE_LICENSE "${__FILE__}"

!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE English 
```

# c# - 比较字符串时避免调用 mscorlib？

> ID：12845347
> 
> 赞同：-2
> 
> 时间：2012-10-11T17:37:27.620
> 
> 标签：c#, mscorlib

有没有一种可能的方法让我在不调用 op_Equality 函数的情况下比较字符串是 mscorlib？例如：

```
string s1 = "hi";
if(s1 == "bye")
{
Console.Writeline("foo");
} 
```

编译为：

```
IL_0003: call bool [mscorlib]System.String::op_Equality(string, string) 
```

从 GAC 查看 mscorlib 中的 op_Equality 它调用了另一个方法 Equals(string, string) 代码：

```
public static bool Equals(string a, string b)
{
   return a == b || (a != null && b != null && string.EqualsHelper(a, b));
} 
```

它使用操作码 bne.une.s 来比较这些字符串。

现在回到我的问题，如何在不调用 mscorlib 中的任何函数的情况下比较 2 个字符串，就像 Equals 方法所做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:40:41.563

> 现在回到我的问题，如何在不调用 mscorlib 中的任何函数的情况下比较 2 个字符串，就像 Equals 方法所做的那样。

你不能——至少不能从头开始编写自己的字符串比较方法。

在某些时候，您必须至少调用`String.Equals(a,b)`（为了调用私有`EqualsHelper`方法，该方法进行实际比较），这也在`mscorlib`.

`Equals`如果您希望避免接线员呼叫，您可以直接呼叫，但是：

```
string s1 = "hi";
if (string.Equals(s1, "bye"))
{
    Console.WriteLine("foo");
} 
```

这将避免调用`op_Equality`，绕过它并`Equals`直接调用。

话虽这么说，确实没有理由首先避免调用`op_Equality`字符串......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:47:32.217

似乎您在要求字符串比较功能。字符串基本上是可以以类似方式索引的字符数组。这是一个简单的字符串比较算法。

```
public static bool Equals(string left, string right)
{
    if (ReferenceEquals(left, null)) return ReferenceEquals(right, null);
    if (left.Length != right.Length) return false;
    for (int i = 0; i < left.Length; i++)
    {
        if (left[i] != right[i])
            return false;
    }
    return true;
} 
```

已经向您展示了这一点，没有理由避免使用 mscorlib 实现，因为我的示例多次调用 mscorlib。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:46:03.213

这是另一种比较方式：

```
 string s1 = "Hello";

        bool same = s1.CompareTo("Hello") == 0;
        bool different = s1.CompareTo("GoodBye") != 0;

        Console.WriteLine(same);
        Console.WriteLine(different); 
```

在这种情况下，两者都应该向控制台报告“True”。

其他方式：

```
 private static bool CheckEqual(string s1, string s2)
    {
        char[] c1 = (s1 == null) ? new char[0] : s1.ToCharArray();
        char[] c2 = (s2 == null) ? new char[0] : s2.ToCharArray();

        if (c1.Length != c2.Length) { return false; }

        for (int i = 0; i < c1.Length; i++)
        {
            if (!c1[i].Equals(c2[i])) { return false; }
        }

        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:53:10.470

鉴于`String`该类是由 提供的`mscorlib`，因此绝对无法在不使用 的情况下比较两个字符串`mscorlib`。即使只是使用索引器将每个字符调用到`mscorlib`.

避免的唯一方法`mscorlib`是不使用 .Net 运行时，但如果您想使用 C#，那将非常困难。

# c# - 如何访问 Razor 引擎视图文件中的 C# 类属性？

> ID：12845349
> 
> 赞同：3
> 
> 时间：2012-10-11T17:37:31.843
> 
> 标签：c#, .net, asp.net-mvc, razor, attributes

如何访问 Razor 引擎视图文件中的 C# 类属性？

C#类：

```
[Name="Test"]
public class OrderProgressPage
{
    bool isComplete();
} 
```

剃刀视图：

```
@model ViewModels.OrderProgressPage
<ul>
    <li>@GETAttribute(Name,Model)</li>
<ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:41:12.373

一种干净的方法是在 Razor 文件中使用本地函数

```
@functions
{
    private Test GetTestAttribute(object obj)
    {
        // TODO: This returns null if TestAttribute was not on the class
        TestAttribute myAttribute =
            Attribute.GetCustomAttribute(obj, typeof (TestAttribute)) as TestAttribute;
    }
}

<li>@GetTestAttribute(myClassInstance)</li> 
```

参考：http: [//msdn.microsoft.com/en-us/library/71s1zwct.aspx](http://msdn.microsoft.com/en-us/library/71s1zwct.aspx)

如果需要传入一个属性名来检查，可以使用

```
Type.GetType(string typeName) 
```

根据您在做什么，您还可以将 GetTestAttribute 更改为具有如下签名的通用函数

```
private T GetAttribute<T>(object obj) 
```

# objective-c - 应用程序中的 Safari 样式“共享”弹出视图

> ID：12845353
> 
> 赞同：1
> 
> 时间：2012-10-11T17:37:36.527
> 
> 标签：objective-c

我想知道是否有任何内置控件可以让您弹出类似于 Safari 中的共享选项的视图。

它似乎使用自定义按钮，而不是标准操作表。

此功能是否可用于标准 UIWebview？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:45:05.353

它是 iOS 6 中的新功能，称为 UIActivityViewController。请参阅其[类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html)和相关的[HI 指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW121)。

# objective-c - 如何在输入视图移动时使 VoiceOver 工作

> ID：12845366
> 
> 赞同：2
> 
> 时间：2012-10-11T17:38:20.493
> 
> 标签：objective-c, ios, cocoa-touch, ipad, voiceover

我有一个 iPad 应用程序，当点击按钮时，它会在 UIPopover 内显示一个 UITextField。此按钮位于屏幕底部附近。因此，用户点击按钮，弹出框出现并成为第一响应者，这导致键盘出现。反过来，这会导致弹出框在键盘滑入时向上移动。这很好用，除了 VoiceOver。

VoiceOver 似乎被移动的视图弄糊涂了。它开始描述新的文本字段，但一旦开始移动就停止中间词。

有谁知道一个好的解决方法。到目前为止，我想出的最好方法是听 UIKeyboardDidShowNotification，然后找到一些方法让 VoiceOver 再次说话，尽管我不确定如何让 VoiceOver 生效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:10:09.123

您可以使用辅助功能通知通知 VoiceOver 屏幕布局的更改 - UIAccessibilityLayoutChangedNotification 或 UIAcessibilityScreenChangedNotification 将是很好的候选者。

# c# - 如何将 WPF TextBox 绑定到作为应用程序主窗口成员的属性

> ID：12845376
> 
> 赞同：2
> 
> 时间：2012-10-11T17:39:11.033
> 
> 标签：c#, .net, wpf, xaml, binding

我有一个私人领域

```
private static Double myValue; 
```

在应用程序 MainWindow 类中。在那里（在 MainWindow 类中）我定义了一个属性

```
public static Double MytValue
{
    get { return myValue; }
} 
```

在 MainWindow 类的结构中，我有一个 TextBox。我需要将它绑定到 MytValue 属性。在 XAML 中我写：

```
<TextBox Name="tbxMyValue" Grid.Row="1" Grid.Column="2" TextAlignment="Center"
         Text="{Binding Path=MyValue}" Width="Auto" Margin="10,0,10,15" IsEnabled="True" /> 
```

但它没有效果。当 myValue 变量有值时，我在 TextBox 中什么也看不到。为什么？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T20:47:08.363

我喜欢在 Window 部分设置 DataContext

```
<Window x:Class="Gabe3a.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Gabe3a"
        xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        DataContext="{Binding RelativeSource={RelativeSource self}}"
        Title="Gabriel Main Ver 3a01" Icon="faviconw.ico" Height="600" Width="800"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T17:48:31.507

您需要`DataContext`在 Window 后面设置该绑定才能工作

使用 WPF 的应用程序有两层：UI 层和数据层。

应用程序的数据层以 开头`null`，您可以使用`DataContext`属性对其进行设置。

每当您在 WPF 中进行基本绑定时，都会绑定到`DataContext`. `Text="{Binding Path=MyValue}"`实际上就是说“从当前获取属性`MyValue`” `DataContext`。

你可以简单地`DataContext`在你的代码中设置：

```
MyWindow.DataContext = this; 
```

或者您可以使用`RelativeSource`绑定来告诉 WPF`MyValue`从其他地方获取属性，例如告诉它从它在向上导航时找到的最近的 Window 获取它`VisualTree`：

```
Text="{Binding Path=MyValue, RelativeSource={
    RelativeSource AncestorType={x:Type Window}}}" 
```

实际上，我的博客上有一篇文章，`DataContext`如果您是 WPF 新手，我建议您阅读这篇文章`DataContext`：[您所说的“DataContext”是什么？](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:45:47.960

这不是它的工作方式。绑定到静态属性；{绑定源={x:静态本地:Application.MyValue}}

请注意，您的字段需要是财产和公共的。如果您想使用您的解决方案，您需要将 DataContext 设置为 {RelativeSource Self}。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:47:26.940

在构造函数的文件 MainWindow.xaml.cs 中添加以下行：

```
DataContext = this; 
```

后`InitializeComponent();`

# php - Codeigniter 2 中的服务层与 Doctrine 2

> ID：12845378
> 
> 赞同：4
> 
> 时间：2012-10-11T17:39:20.550
> 
> 标签：php, codeigniter, doctrine, doctrine-orm, codeigniter-2

希望你们中的一些人能帮我解决这个问题。

我在一个使用 Codeigniter 2 和 Doctrine 2 的项目中工作，一切正常，但我有一些我想解决的“理智”问题。

我现在遇到的主要问题是持久化实体。在普通的 MVC 中，持久性应该在模型中，但是现在我只有实体和存储库，而且我没有所谓的“模型”，我将所有这些代码放在控制器中，使它们变得巨大而令人生畏:(

我在一些地方读到过，最好的方法是在控制器和实体之间有一个“服务”层，但是由于经典的 MVC 模式很难，我还没有在 Codeigniter 中找到一个好的方法。

所以我就如何解决这个问题寻求一些建议。你们中有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:28:23.650

我找到了解决我的问题的方法，希望它对你们中的一些人有用。

我正在使用 Joel 的 Codeigniter 2 和 Doctrine 2 的 Verhagen 集成，您可以阅读他的文章了解更多详细信息“ [http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine -2-正确的方式/](http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/) “

简而言之，我正在做的是使用 Codeigniter 的模型即服务层。这是我能找到的最干净的方法，主要是因为所有“接线”都已经由 Codeigniter 完成，所以我不需要做任何其他事情：D。

我不得不对 Joel 实现的文件夹结构进行一些修改，这样我就可以使用 CI 的模型并仍然使用他的 Doctrine 代码。所以我将所有内容从“models”文件夹中移动到一个名为“entities”的新文件夹中（我知道这可能不是最好的名称，但它可以工作：P）。然后我更改了对新文件夹的所有引用并检查了一切是否正常。

就是这样，现在我有了我的“服务层”workign，我的代码更干净了。

如果你们中的一些人需要这方面的帮助，请随时问我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:10:18.907

不久前在同一条船上。最终没有使用 Doctrine 的 ORM，但基本上你是对的——你需要一个“服务层”来处理任何不是通过 Doctrine 的实体和存储库直接建模的东西。

我这样做的方式是在 /application/ 中为我的项目代码创建一个命名空间文件夹。然后我使用 Doctrine Common 的类加载器将该文件夹识别为命名空间。例如 /application/Acme/Authentication.php 包含：

```
namespace Acme;
class Authentication {
   //Do Doctrine queries in various methods here
} 
```

Doctrine 的类加载器在内部使用 SPL（spl_autoload_register 或其他东西）。这意味着您可以完全使用 PHP 5.3 命名空间。然后，您将经历依赖注入的所有有趣试验和磨难，以访问此服务层内的教义 dbal。然后，您的控制器将直接使用此“服务层”。就像我说的，就我而言，我决定不使用 Doctrine 的 ORM - 所以我在我的“服务层”中使用 CodeIgniters ActiveRecord 数据库类。而不是使用 $this->CI =& get_instance() ...我使用 DI 容器提供对构造函数的数据库访问。

例如，在我的身份验证/登录控制器操作中，我可能有

```
function login() {
   $user = $_POST['u'];
   $pass = $_POST['p'];

   $auth = new Acme\Authentication($this->db); //or use a DI container
   $user = $auth->authenticate($user, $pass);

   ....
} 
```

# jms - 使用骆驼指定从activemq队列读取消息的超时

> ID：12845381
> 
> 赞同：2
> 
> 时间：2012-10-11T17:39:24.610
> 
> 标签：jms, activemq, apache-camel

我正在使用骆驼从 activemq 队列中读取消息，对其进行处理并将其发布到另一个队列。路线如下所示：

```
from("jms:incoming.queue")
.process(new MyProcessor())
.to("jms:outgoing.queue"); 
```

我需要指定一个超时，这样如果“incoming.queue”中没有消息超过 3 分钟，我想停止路由。我可以使用 OnCompletion() 但在每条消息之后都会调用它。我可以指定将消息发送到“outgoing.queue”的超时时间。有没有办法可以指定超时，如果“incoming.queue”中没有消息超过 3 分钟，我可以停止路由？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:40:56.807

我能想到的两个选择...

1.  使用[CronScheduledRoutePolicy](http://camel.apache.org/cronscheduledroutepolicy.html)在指定时间自动启动/停止您的路线...

    ```
    CronScheduledRoutePolicy myPolicy = new CronScheduledRoutePolicy();
    myPolicy.setRouteStartTime("0 20 * * * ?");
    myPolicy.setRouteStopTime("0 0 * * * ?");

    from("jms:incoming.queue")
        .routePolicy(myPolicy).noAutoStartup()
        .process(new MyProcessor())
        .to("jms:outgoing.queue"); 
    ```

2.  使用骆驼石英路由和[轮询消费者](http://camel.apache.org/polling-consumer.html)按计划排空队列

    ```
    MyCoolBean cool = new MyCoolBean();
    cool.setProducer(template); 
    cool.setConsumer(consumer);

    from("quartz://myGroup/myTimerName?cron=0+20+*+*+*+?")
        .bean(cool);

    //MyCoolBean snippet 
    while (true) {
        // receive the message from the queue, wait at most 60s
        Object msg = consumer.receiveBody("jms:incoming.queue", 60000);
        if (msg == null) {
            break;
        }
        producer.sendBody("jms:outgoing.queue", msg);
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:54:01.910

根据您上面的评论，您似乎只是希望按计划开始和停止路线。您可以使用石英作业来调用 jms 路由上的 start 和 stop 方法。如果您愿意，您甚至可以使用石英端点使石英逻辑成为一条路线。

# java - Duke 快速重复数据删除：java.lang.UnsupportedOperationException：还不支持操作？

> ID：12845385
> 
> 赞同：1
> 
> 时间：2012-10-11T17:39:43.480
> 
> 标签：java, lucene, jdbc-odbc, record-linkage, duke

我正在尝试使用[Duke Fast Deduplication Engine](http://code.google.com/p/duke/)在我工作的公司的数据库中搜索一些重复记录。

我像这样从命令行运行它：

```
java -cp "C:\utils\duke-0.6\duke-0.6.jar;C:\utils\duke-0.6\lucene-core-3.6.1.jar" no.priv.garshol.duke.Duke --showmatches --verbose .\config.xml 
```

但我收到一个错误：

```
Exception in thread "main" java.lang.UnsupportedOperationException: Operation no
t yet supported
        at sun.jdbc.odbc.JdbcOdbcResultSet.isClosed(Unknown Source)
        at no.priv.garshol.duke.datasources.JDBCDataSource$JDBCIterator.close(JD
BCDataSource.java:115)
        at no.priv.garshol.duke.Processor.deduplicate(Processor.java:152)
        at no.priv.garshol.duke.Duke.main_(Duke.java:135)
        at no.priv.garshol.duke.Duke.main(Duke.java:38) 
```

我的配置文件如下所示：

```
<duke>
   <schema>
         <threshold>0.82</threshold>
         <maybe-threshold>0.80</maybe-threshold>
         <path>test</path>

         <property type="id">
              <name>ID</name>
         </property>

         <property>
             <name>LNAME</name>
             <comparator>no.priv.garshol.duke.comparators.ExactComparator</comparator>
             <low>0.6</low>
             <high>0.8</high>
         </property>

         <property>
             <name>FNAME</name>
             <comparator>no.priv.garshol.duke.comparators.ExactComparator</comparator>
             <low>0.6</low>
             <high>0.8</high>
         </property>

         <property>
             <name>MNAME</name>
             <comparator>no.priv.garshol.duke.comparators.ExactComparator</comparator>
             <low>0.3</low>
             <high>0.5</high>
         </property>

         <property>
             <name>SSN</name>
             <comparator>no.priv.garshol.duke.comparators.ExactComparator</comparator>
             <low>0.0</low>
             <high>1.0</high>
         </property>

   </schema>
   <jdbc>
          <param name="driver-class" value="sun.jdbc.odbc.JdbcOdbcDriver" />
          <param name="connection-string" value="jdbc:odbc:VT_DeDupe" />
          <param name="user-name" value="aleer" />
          <param name="password" value="**" />
          <param name="query" value="select SocialSecurityNumber, LastName, FirstName, MiddleName, empssn from T_Employees" />

          <column name="SocialSecurityNumber" property="ID" />
          <column name="LastName" property="LNAME" />
          <column name="FirstName" property="FNAME" />
          <column name="MiddleName" property="MNAME" />
          <column name="empssn" property="SSN" />
   </jdbc>
</duke> 
```

它并没有真正告诉我什么是不受支持的......我只是在尝试，配置还没有什么严重的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T06:27:54.367

正如 mbonaci 所说，问题在于 JDBC 驱动程序的 isClosed() 方法没有实现。即使实现它并不比简单地写“return closed”更难。

我现在为这个问题添加了一个丑陋的解决方法。请做一个“hg pull”然后再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:33:06.397

您使用的是哪个 Java 版本？
sun.jdbc.odbc.JdbcOdbcResultSet.isClosed 最早出现在 Java 1.6 中。它在 v1.7 中仍然看起来像这样（我还没有在 Java 8 中检查）：

```
public boolean isClosed() throws SQLException {
    throw new UnsupportedOperationException("Operation not yet supported");
} 
```

所以干脆不要调用那个方法。使用其他方法检查结果集是否已关闭。

或者，如果您无法更改代码，请向项目作者寻求帮助（我看到在关闭 RS 时[努力解决异常）。](http://code.google.com/p/duke/source/diff?spec=svn43d635cf515ab379859789cabcbdb3cefd833e3d&r=30a12f2fb61c38e60a2f89d9be1f123582b65993&format=side&path=/src/main/java/no/priv/garshol/duke/datasources/JDBCDataSource.java&old_path=/src/main/java/no/priv/garshol/duke/datasources/JDBCDataSource.java&old=1771c00eac5c1eca0767715c48b36acc0f115e35)

# php - API 获取标题 php

> ID：12845386
> 
> 赞同：1
> 
> 时间：2012-10-11T17:39:45.997
> 
> 标签：php, api

我正在使用 Tumblr API 试图获取博客的标题。我找到的代码对我不起作用。

```
$result = json_decode(file_get_contents('http://example.tumblr.com/api/read/json?num=0'));
$print_r($result); 
echo $result[1]; 
```

我试图回应，`Ex-Sample`但它给了我空白的结果。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:49:36.423

试试这个。（已测试）

```
$result = str_replace(array('var tumblr_api_read = ', '};'), array('', '}'), file_get_contents('http://example.tumblr.com/api/read/json?num=0'));
$data   = json_decode($result);
echo $data->tumblelog->title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:44:39.113

```
$print_r($result); 
^---you do not have a `$print_r` variable, so you're trying to execute a non-existent function. 
```

json_decode 也返回解码的数据。你的代码应该是

```
$json = file_get_contents(...);
$data = json_decode($json);
echo $data['whatever']; 
```

# python - shufler() 正好采用 1 个位置参数（给定 2 个）

> ID：12845389
> 
> 赞同：4
> 
> 时间：2012-10-11T17:39:57.823
> 
> 标签：python, python-3.x

下面是我的代码。

```
def __init__(self):
    self.node=[]
    self.fronts=[]
    self.GoalNode=['1','2','3','4','5','6','7','8','0']
    self.StartNode=['1','2','3','4','5','6','7','8','0']
    self.PreviousNode=[]
    self.prePreviousNode=[]
    self.PreviousCount=1

def Solve(self):
    self.shufler(10)
    ......

def shufler(self):

        while True:
            node=self.StartNode 
```

以下是我收到的错误消息：

```
File "E:\Zoe's file\CMPT 310\Assign 2\astart8puzzle\AI8puzzle\py8puzzel.py", line 18, in Solve
    self.shufler(10)
TypeError: shufler() takes exactly 1 positional argument (2 given) 
```

我不明白我在哪里给出了 2 个论点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T17:42:44.517

```
self.shufler(10) 
```

这调用`shufler`了两个参数， (1)`self`和 (2) `10`。左侧的对象`.`用作第一个参数。

要处理`10`参数，请在`shufler`的定义中添加第二个参数：

```
def shufler(self, count): 
```

# loops - 如何为 .jpg 名称创建一个带有通配符值的循环脚本，该脚本使用基本 url 下载一组图像？

> ID：12845390
> 
> 赞同：1
> 
> 时间：2012-10-11T17:39:58.183
> 
> 标签：loops, download, wildcard, imacros

我正在尝试从服务器下载一组图像（需要一次登录才能访问该组），我可以一次查看一个图像。我想通过 iMacro 或任何其他方法（我在 64 位 win7 上使用 firefox）做的是有一个脚本，其中有我的基本 url；

```
http://blah.blah.com/x/00000/content/image/0.jpg?width=2560 
```

例如，我想下载 0.jpg 图像，然后让脚本将“0”视为通配符并添加 1，然后继续下载该图像。本质上，我想创建一个循环脚本，允许我下载该集合中的所有 540 个图像，只能访问基本 url，以便 0.jpg.....540.jpg 之间的所有图像都以 width=2560 下载.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:01:36.000

所有你需要的是：

```
http://blah.blah.com/x/00000/content/image/{{!loop}}.jpg?width=2560 
```

并使用播放（循环）按钮运行脚本，说明要保存在 imacros 面板的 Max 文本框中的图像数量

# amazon-s3 - Chrome 和 Safari 中的 THREE.js 和 S3 出现 CORS 错误

> ID：12845392
> 
> 赞同：3
> 
> 时间：2012-10-11T17:40:05.907
> 
> 标签：amazon-s3, three.js, cors

我在将 S3 托管的 JPG 作为纹理加载到我的 three.js 模型中时遇到问题。我在 Chrome 中遇到了 CORS 错误，意识到 S3 支持 CORS，并在开发过程中采用了非常宽松的政策来检查它（我以前从未遇到过 CORS）。Firefox 很好，但 Chrome 和 Safari 仍然出错。

JPG 通过 THREE.ImageUtils.loadTexture() 加载到纹理中，然后将该纹理应用于材质。

我尝试在加载之前将以下内容添加到图像中，但它似乎不起作用：

```
img.crossOrigin = ''; 
```

我目前的 CORS 政策是开放的：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>HEAD</AllowedMethod>
        <AllowedMethod>DELETE</AllowedMethod>
    </CORSRule>
</CORSConfiguration> 
```

Chrome的错误是

```
38 Cross-origin image load denied by Cross-Origin Resource Sharing policy. 
```

任何人都可以给我任何提示吗？

**更新：**

所以事实证明，我只是没有足够早地在代码中设置 img.crossOrigin 以使其有用。愚蠢的错误:(

AllowHeader 提示很有用，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:00:59.363

尝试在标题中添加 Content- 。

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
  <CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedHeader>Content-*</AllowedHeader>
    <AllowedHeader>Host</AllowedHeader>
  </CORSRule>
</CORSConfiguration> 
```

# .net - 无法执行测试

> ID：12845394
> 
> 赞同：1
> 
> 时间：2012-10-11T17:40:17.027
> 
> 标签：.net, visual-studio-2010, unit-testing, mstest

任何人都对发生的事情有任何想法。Visual Studio 不执行我的测试，测试运行器只是坐在那里。请参见下图，我在其中创建了一个新项目，一个带有单个测试的新测试项目。

![试运行截图](../Images/4caa09fc3c7321ac912d4697c862b27a.png)

# ruby-on-rails - Heroku 错误 - 很抱歉，但出了点问题

> ID：12845398
> 
> 赞同：0
> 
> 时间：2012-10-11T17:40:32.847
> 
> 标签：ruby-on-rails, heroku

我在rails 3.2.7上运行。我在已部署的应用程序上收到以下消息： **我们很抱歉，但出了点问题。**

我真的不知道是什么导致了这个错误。

这是我的heroku日志。

```
2012-10-10T20:24:01+00:00 heroku[web.1]: State changed from starting to up
2012-10-10T21:28:17+00:00 heroku[web.1]: Idling
2012-10-10T21:28:20+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-10T21:28:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-10T21:28:21+00:00 app[web.1]: [2012-10-10 21:28:21] ERROR SignalException: SIGTERM
2012-10-10T21:28:31+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-10-10T21:28:31+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-10-10T21:28:33+00:00 heroku[web.1]: Process exited with status 137
2012-10-10T21:28:33+00:00 heroku[web.1]: State changed from up to down
2012-10-11T17:24:11+00:00 heroku[web.1]: Unidling
2012-10-11T17:24:11+00:00 heroku[web.1]: State changed from down to starting
2012-10-11T17:24:26+00:00 heroku[web.1]: State changed from starting to up
2012-10-11T17:24:28+00:00 heroku[router]: GET mighty-earth-4316.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=14ms status=304 bytes=0
pj@ubuntu:~/Documents/demotywatory$ rails -v
Rails 3.2.7 
```

和宝石文件

# 宝石文件.rb

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'haml'
  gem 'nifty-generators'
  gem 'simple_form'
  gem 'twitter-bootstrap-rails'
  gem "bootstrap-will_paginate"
end

gem 'carrierwave'
gem 'rmagick'

gem 'jquery-rails'
gem 'thumbs_up'
gem 'devise'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'
gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem "mocha", :group => :test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T04:00:06.913

尝试从资产组中取出haml。在试图找出我的数据库出了什么问题之后，从我的 gemfile 中的资产组中取出 haml 为我修复了它。

# android - 调用 JavaScript 函数并获取返回值

> ID：12845399
> 
> 赞同：0
> 
> 时间：2012-10-11T17:40:32.660
> 
> 标签：android, android-webview, webviewclient

我在开发一个应该封装 Web 应用程序的 Android 应用程序时遇到了很大的麻烦，我认为 StackOverflow 是我现在唯一的希望。

第一个问题如下：我需要拦截单击“关于”链接以使用我们所有应用程序的标准关于视图启动一个活动。不幸的是，当我单击页面上的链接时，内容由 AJAX 加载并且`shouldOverrideUrlLoading(String url)`永远不会被调用。

我的解决方法是使用 Android 的 JavaScript 接口将对象传递给 JS，以便将加载 URL 放置到该对象，如下所示：

```
private class JavaScriptInterface {

    @SuppressWarnings("unused")
    public boolean shouldOverrideUrlLoading(String url) {
        if (url.endsWith("about")) {
            startActivity(new Intent("foo.bar.ABOUT"));
            return true;
        }
        return false;
    }
} 
```

这是完美的工作，它看起来根本不像一个非常丑陋的解决方法。

第二个问题是，在 Android 2.1（手机和模拟器）中，WebView 不会在历史记录中存储 AJAX 加载的 URL，因此即使使用以下代码覆盖后退按键，按下后退总是会退出应用程序：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

奇怪的是，这在所有版本的 Android >2.1 中都能完美运行。有没有可能的解决方法？

我们正在考虑调用一个 JS 函数来知道我是否可以回到历史，但是我如何从 Android 调用一个 JS 函数并获取它的布尔返回值？

首先十分感谢。

# python - 排除文件导致 GAE 服务器重启

> ID：12845400
> 
> 赞同：0
> 
> 时间：2012-10-11T17:40:32.860
> 
> 标签：python, google-app-engine, go

当我的应用程序根目录中的文件发生更改时，有没有办法避免 GAE 服务器重新启动。我使用 Go（GAE 服务器是基于 python 的）运行时。

目的不是在我的某些文件（html、css、js 文件；位于 /static 文件夹下）发生更改时重新加载服务器。这是为了避免开发过程中的启动时间。任何将它们从文件监视中排除的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:26:50.600

如果您更改了构成应用程序的文件，则需要重新启动应用程序才能提供新文件。

如果这对您来说是一个真正的症结所在，我建议将文件托管在其他地方，例如 CDN。你的应用程序和它使用的静态资源不需要都在同一个地方。

# c - 指针 + int 与点 - int

> ID：12845407
> 
> 赞同：0
> 
> 时间：2012-10-11T17:40:54.313
> 
> 标签：c, memory, pointers

我有一些内存，我尝试将它分成几部分。所以我有一个链表。每个节点跟踪分配的内存块的大小和下一个节点。

当我将指针返回给请求者时，我会在该节点结束后立即返回一个指针（比如 return newNode + sizeOf(node)），因为请求者只需要使用内存。

问题是当我尝试通过更改节点来释放它时。当使用指针调用 myFree 并且我执行指针 - sizeOf(node) 以到达节点时，它不起作用。

我究竟做错了什么？

我认为它没有用，但这里有一些代码：

```
#define HEADER(24)
printf("Original pointer %-10p\n", pointer);
head *toUse = pointer + HEADER;
printf("Pointer to memory to be used %-10p\n", toUse);
printf("Trying to read the header again %-10p\n", toUse - HEADER); 
```

第一个和第三个 printf 给了我不同的地址。那就是问题所在。

至于测试，我一开始只分配了一块内存，还是不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:59:08.523

你没有给我们足够的代码来解决这个问题。不过，我可以猜测一下。

向我们展示`pointer`. 我猜它*不是* `head *pointer;`。指针算术将指针的类型考虑在内。

当您（例如）添加`1`一个指针时，`int`该指针按`1 * sizeof int`字节递增。如果类型是，`short`那么它将按`1 * sizeof short`字节递增。不一定是同一件事。

因此，如果`pointer`is（再次，例如）声明为`char *pointer`then 添加`HEADER`它会使指针增加`HEADER`( `24`) 个字节（因为`sizeof char`始终是`1`）。但是，当您稍后从类型中减去`HEADER`时，它会按字节递减。再次，不是同一件事。`toUse``head*``HEADER * sizeof head`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:46:25.177

在 C 中，`(pointer + n)`等价于`&pointer[n]`...，即索引计算指针指向的项目，而不是字节。如果您想要一个字节偏移量，请使用`((char*)pointer + n)`. 但是在您的情况下，您不需要字节偏移量；代替

```
return newNode + sizeof(node); 
```

你可以做

```
return newNode + 1; 
```

或者

```
return &newNode[1]; 
```

`(void*)`尽管如果您要返回指向调用者可以用作任何类型的东西的指针，您可能希望将它们转换为。要从`(void*)`指针返回原始节点，请使用`(node*)vp - 1`或`(node*)((char*)vp - sizeof(node))`。

还，

```
#define HEADER(24) 
```

不会编译，因为它类似于类似函数的宏；您需要在宏名称和左括号之间至少有一个空格（或省略括号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T19:24:04.643

可以在这里使用更多代码来确定......但我将把它扔给你。你说：

`have some memory and I try to allocate it in several pieces. So I have a linked list. Each node keeps track of the size the allocated piece of memory is and the next node.`

所以我猜你正在创建节点，并`malloc()`给它们一些内存，然后尝试做一些类似的事情：

```
ptr_to_next_node = ptr_to_current_node+sizeof(node); 
```

好吧，那是行不通的。您不能对链表进行指针运算，因为它不是连续的内存。指针运算适用于数组的原因是因为您获得的内存将是连续的：

```
 char array [0][1][2][3]
             ^  ^  ^  ^
             |  |  |  +----------0x86C00004
             |  |  +-------------0x86C00003
             |  +----------------0x86C00002              
             +-------------------0x86C00001

 linked_list 

    +-------+        +-------+        +-------+
    | node1 |        | node2 |        | node3 |
    | next---------->| next---------->| next---------->NULL
    +-------+        +-------+        +-------+
    (0x86C0001)      (0x86C000A)      (0x86C00BC) 
```

好的，所以内存中的值可能不是最有意义的，但你可以看到我在这里试图说明的点。数组彼此`sizeof(type)`分开，您分配给节点的内存几乎可以在任何地方，我们不能只添加偏移量，这就是为什么它们有指向`next`.

如果您希望能够来回跳转，则需要添加指针 forward`next`和 backwards `prev`。

# sublimetext2 - Sublime 的 TypeScript 插件

> ID：12845412
> 
> 赞同：10
> 
> 时间：2012-10-11T17:41:01.693
> 
> 标签：sublimetext2, typescript

所以微软为 ST2 提供了语法高亮，但仅此而已。

构建一个可以复制大量 IDE 功能的插件会有多难。我想如果他们可以在 JS 中（在操场上）复制它，作为 ST2 插件应该不会那么难。我只是不确定从哪里开始...我知道如何构建 ST2 插件...但我对编译器、解析器等一无所知...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T18:28:47.670

**[编辑]**这是一个已启动的 TS 插件列表，我会尽量保持最新：

*   [T3S](https://github.com/Railk/T3S) - 新，截至 2013 年 12 月
*   [sublime-typescript](https://github.com/raph-amiard/sublime-typescript) - 新的，截至 2013 年 1 月（不再开发）
*   [github.com/stoffera/sublimetext2-typescript-plugin](https://github.com/stoffera/sublimetext2-typescript-plugin/)（不再开发）

**[/编辑]**

[我们已经为SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)添加了基本的 TypeScript 支持，请参阅[这个拉取请求](https://github.com/SublimeLinter/SublimeLinter/pull/259)。这至少会显示 Sublime 中的 TypeScript 错误。它可以工作，但对于大型项目来说会很慢，因为所有引用的文件都将在每个 lint 上进行解析。这需要在未来解决。

由于 TypeScript 及其服务是用 TypeScript 本身编写的，它们转换为 JS，因此可以从 nodejs 使用，因此可以从 Sublime 使用（正如 Christopher Pappas 建议的那样）。这正是 SublimeLinter 中 TypeScript 支持的工作原理。

如果你想创建一个功能齐全的 Sublime 插件，我建议你看看 TypeScript[服务](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#src/services/typescriptServices.ts)，它提供了自动完成等所有必要的功能。[languageService.ts](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#src/services/languageService.ts)应该是您正在寻找的。此外，您应该查看 TypeScript [Playground](http://www.typescriptlang.org/Playground/)的源代码，因为它们通过 Web 上的 JS 提供自动完成功能。不幸的是，您必须自己取消缩小源代码，因为游乐场没有官方源代码。

无论如何，如果您真的对创建 Sublime TypeScript 插件感兴趣，我很乐意提供帮助！

[编辑]

您还应该查看 Sublime 文档以获取有关添加[完成](http://docs.sublimetext.info/en/latest/extensibility/completions.html)的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-13T11:41:04.427

Microsoft 为 Sublime Text 提供了新的 TypeScript 插件：[https ://github.com/Microsoft/TypeScript-Sublime-Plugin](https://github.com/Microsoft/TypeScript-Sublime-Plugin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T22:46:41.647

我会看看这些其他*可能的*解决方案，特别是 Node，然后从那里开始：

[从节点使用 TypeScript 编译器](https://stackoverflow.com/questions/12729779/use-typescript-compiler-from-node)

[TypeScript 是否为 NodeJS 模块访问提供了明确的公共 API？](https://stackoverflow.com/questions/12717309/does-typescript-provide-an-explicit-public-api-for-nodejs-module-access)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-18T05:45:27.553

用于 Sublime 文本的 TypeScript 插件

*   选择

    ```
    Preferences --> Setting - User 
    ```

*   添加这一行

    ```
    "typescript_tsdk": "<path to your folder>/node_modules/typescript/lib" 
    ```

*   Mac 和 Ubuntu：

    cd ~/"库/应用程序支持/Sublime Text 3/Packages"

    ```
    git clone --depth 1 https://github.com/Microsoft/TypeScript-Sublime-Plugin.git TypeScript 
    ```

*   在 Windows 上：

    cd "%APPDATA%\Sublime Text 3\Packages"

    ```
    git clone --depth 1 https://github.com/Microsoft/TypeScript-Sublime-Plugin.git TypeScript 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-09T05:45:47.463

TypeScript 不仅仅是一种语言和编译器。它提供了一个可以通过第三方插件扩展的服务器。我们作为用户设计和实现我们自己的扩展，例如：

*   重构建议
*   自动完成
*   文件/模块自定义分辨率
*   编译器诊断
*   等等等等

好的部分是，**如果您使用此基础架构实现您的解决方案，每个主要编辑器都会开箱即用地支持它**:) 我知道至少 vscode、atom webstorm 和 sublime 具有仅与 tsserver（TypeScript 语言服务器）通信的插件和使用它提供的所有功能。

我刚刚进入这个奇妙的世界，但不幸的是文档很差，但我还是取得了一些进展。如果您打算从这里开始，这些是我的建议：

从这里开始：

*   [https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API)
*   [https://github.com/Microsoft/TypeScript/wiki/Writing-a-Language-Service-Plugin](https://github.com/Microsoft/TypeScript/wiki/Writing-a-Language-Service-Plugin)

这是我收集的小插件（我才刚刚开始，WIP 也是如此）[https://github.com/cancerberoSgx/typescript-plugins-of-mine](https://github.com/cancerberoSgx/typescript-plugins-of-mine) 特别推荐你从教程开始：[https:// cancerberosgx.github.io/typescript-plugins-of-mine/sample-ts-plugin1/src/](https://cancerberosgx.github.io/typescript-plugins-of-mine/sample-ts-plugin1/src/)

非常欢迎反馈，谢谢！

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-11T17:47:12.450

如果您需要有关最佳实践算法的全面参考，我建议您看一下[Let's build a compiler](http://compilers.iecc.com/crenshaw/)或《[Language Implementation Patterns 》这本书。](https://rads.stackoverflow.com/amzn/click/com/193435645X)

# machine-learning - 练习线性或逻辑回归的工具或框架

> ID：12845414
> 
> 赞同：2
> 
> 时间：2012-10-11T17:41:15.047
> 
> 标签：machine-learning, data-mining, regression

我正在寻找一个可以让我实现线性和逻辑回归的工具框架。我还想添加正则化并使用梯度下降调整参数。

是否有任何框架或工具可以让我做到这些？

我想基本上练习这两种机器学习模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:08:24.243

如果你的目标是学习，你应该尝试用你最喜欢的语言自己实现它们！它们实现起来并不难，你会通过这样做来学习堆:)，它们显然不会像好的 C 或 Python 实现那样快，所以不要将它们用于任何生产代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:00:19.050

这只是我的建议。[您可以在https://class.coursera.org/ml](https://class.coursera.org/ml)注册 Andrew Ng 的在线课程。

前两个作业正是你想要练习的，它们是线性回归、逻辑回归和正则化技术。

-- 抱歉，我刚刚注意到当前 ml 课程的注册已关闭。下一个可能会在 2012 年底或 2013 年初开放。:(

# android-screen-support - 在android中支持多个设备

> ID：12845418
> 
> 赞同：2
> 
> 时间：2012-10-11T17:41:32.740
> 
> 标签：android-screen-support

我是android开发的新手。我希望我的应用程序以多种分辨率运行。我浏览了文档，一些stackoverflow帖子。我最终创建了多个布局。我在我的项目中所做的。这是我的布局结构：

*   布局-正常-mdpi
*   布局-正常-hdpi
*   布局-正常-xhdpi
*   布局-大-mdpi
*   布局-大-hdpi
*   布局-大-xhdpi

我的可绘制文件夹结构是

*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的 xhdpi

我添加了

```
 <supports-screens 
              android:smallScreens="true" 
              android:normalScreens="true"
              android:largeScreens="true" 
              android:xlargeScreens="true"/> 
```

在我的清单文件中。它在 mdpi 设备上看起来不错（未在所有设备上测试）在 Htc-epxlorer Sony-experia Tipo 上测试。我在 Sony xperia arc s hdpi 设备和 htc one v 上对其进行了测试，它看起来不错。但是当谈到 Samasung Galaxy Note 和 Note 2 时，它完全搞砸了！我最终得到了创建布局文件夹的解决方案，例如 layout-large-port-xhdpi-1280x800。哪个有效，但我觉得不是一个好习惯。我有分辨率图像（端口模式）

*   对于 mdpi：480X320
*   对于 hdpi：800X480
*   对于 xhdpi：1280X800

即使使用 Galaxy nexsus 4.65in(720p)。给人不一样的感觉。基本上我想知道的是不同密度的图像分辨率应该是多少？不同设备的布局文件夹结构应该是什么？。因为它在不同英寸的设备上给出了不同的外观，就像我在 4in nexsus 和 4.6in nexsus 上所说的那样，当我添加图像时它看起来不同。甚至平板电脑的分辨率为 1280X800。为什么即使分辨率相同但屏幕尺寸发生变化也会出现问题？注意：我使用 RelativeLayout 作为布局，没有硬编码的像素值，一切都在 dp 中。任何帮助将不胜感激。提前致谢。

# ios - 使用 performselector - 两次用于相同的方法

> ID：12845419
> 
> 赞同：0
> 
> 时间：2012-10-11T17:41:32.707
> 
> 标签：ios, xcode, performselector

我尝试使用执行选择器两次调用此方法

```
-(void)time:(UILabel *)label{

  float duration = (label.frame.size.width + self.view.frame.size.width)/111;
  [UIView beginAnimations:nil context:nil];
  [UIView setAnimationDuration:duration];
  [UIView setAnimationCurve:UIViewAnimationCurveLinear];
  [UIView setAnimationRepeatCount:1e100f];
  label.center = CGPointMake(label.center.x , label.center.y +700);
  [UIView commitAnimations]; 
```

}

使用执行选择器，但仅在调用一次。

```
[self performSelector:@selector(time:) withObject:testLabel afterDelay:0];

[self performSelector:@selector(time:) withObject:testLabel1 afterDelay:5]; 
```

只有第一个被调用。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:44:34.437

在 2 次使定时器无效后使用定时器 2 调用函数两次

# node.js - node.js 错误：uv_signal_start EINVA

> ID：12845426
> 
> 赞同：0
> 
> 时间：2012-10-11T17:41:49.600
> 
> 标签：node.js, opa

我在 32 位 Debian linux 上从源代码构建了 opa（uname 说它是 i686），当我在命令行上发出“opa create example”时，我收到了以下错误消息：

```
node.js:593
          throw errnoException(errno, 'uv_signal_start');
                ^
Error: uv_signal_start EINVAL
    at errnoException (node.js:388:13)
    at process.on.process.addListener (node.js:593:17)
    at Object.<anonymous> (/usr/local/lib/opa/stdlib/server.opp/serverNodeJsPackage.js:12:16)
    at Module._compile (module.js:454:26)
    at Object.Module._extensions..js (module.js:472:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/local/lib/opa/stdlib/stdlib.qmljs/stdlib.core.web.resource.opx/a.js:4:20) 
```

Node.js 版本是 v0.9.3-pre 并且它可以工作（用一个简单的 hello world javascript 检查它）。Opa 版本说：Opa 编译器 (c) MLstate -- 版本 1.0.7 -- build 3524。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:12:55.650

安装 v0.8.12 node.js 版本解决了我的问题。

# c# - Foreach 计算多个数组

> ID：12845433
> 
> 赞同：1
> 
> 时间：2012-10-11T17:42:10.443
> 
> 标签：c#, arrays, foreach

我遇到了一个我试图通过计算多个数组来解决的问题。

这是场景...

用户将输入他们的卡号，即 1234，然后我需要将每个数字以 1、2、1、2 的顺序存储在另一个数组中。

所以它会根据 1 * 1、2 * 2、3 * 1、4 * 2 等计算。

我已经尝试了一些不同的方法来在单个 foreach 循环中计算两者，但是我没有这样的运气，因为我正在返回重复项，所以我正在看看是否有一种方法可以将两个数组组合成一个 foreach环形？

我能够打印数据，所以现在我只是看看如何将它们组合在一起。这是我到目前为止所拥有的...

```
class Program
{
    static void Main(string[] args)
    {
       Console.WriteLine("Enter your Card Number");
       char[] card = Console.ReadLine().ToCharArray();
       int[] card_m = { 1,2,1,2 };

       foreach (char c in card)
       {
           int number = (int)char.GetNumericValue(c);
           Console.WriteLine("Converted Number: {0}", number);
       }

       foreach (int m in card_m)
           Console.WriteLine("Card Number Multiplier: {0}", m);

       Console.Read();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:08:17.753

对于任何长度的卡号，您可以只使用`Aggregate()`计算每个数字的值，并将它们相加。

```
int coefficient = 2;
chksum =  input.Aggregate(0, (sum, ch) => sum + (ch - '0') * (coefficient ^= 3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:45:39.283

对于你的例子，

```
var multiplied = card.Select(char.GetNumericValue).Zip(card_m, (a,b) => a*b); 
```

`card_m.Length != card.Length`如果因为它只会“压缩”到最短列表的末尾，这将是无效的。

[MSDN Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx) --*使用指定的谓词函数合并两个序列。*

您可以在下面添加扩展方法并运行此代码以重复`card_m`：

```
var multiplied = card.Select(char.GetNumericValue)
                     .Zip(card_m.Indefinite(), (a,b) => a*b);

public static class Extensions
{
    public static IEnumerable<int> Indefinite(this int[] source)
    {
        int i = 0;

        while (true)
            yield return source[i++ % source.Length];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T17:49:20.660

不确定您在做什么，您的 card 和 card_m 总是相同的长度吗？

如果是这样，你可以做类似的事情（你必须先确保）

```
for(int i =0;i<card.Length;i++)
{
   Console.WriteLine("Result: {0}", ((int)char.GetNumericValue(card[i]))*card_m[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:44:42.347

您不能在一个`foreach`循环中迭代两个数组。在这种情况下，您必须使用普通的旧`for`循环。[Rosetta Code](http://rosettacode.org/wiki/Loop_over_multiple_arrays_simultaneously#C.23)有一个例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T17:46:07.730

```
card.Select(char.GetNumericValue).Zip(card_m, (c, n) => c*n); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T17:47:52.057

您可以使用

```
for (int i = 0; i < card.Length; i++)
{
  var result = (int)char.GetNumericValue( card[i]) * (int)char.GetNumericValue(m_card[i]);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T17:50:11.493

假设数组的长度可能不同，请使用模运算符在乘数数组上循环：

```
 static void Main(string[] args) {
        Console.WriteLine("Enter your Card Number");

        char[] card = Console.ReadLine().ToCharArray();

        int[] card_m = { 1, 2 };

        for (int idx = 0; idx < card.Length; idx++) {
            int number = (int) char.GetNumericValue(card[idx]);
            Console.WriteLine("Converted Number: {0}", number);

            // pull the multiplier from the card_m array
            int m = card_m[idx % card_m.Length];

            Console.WriteLine("Card Number Multiplier: {0}", m);
        }

        Console.Read();
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-11T17:50:51.837

假设您的卡号中可能有超过 4 位数字，也许您可​​以尝试一下

```
 Console.WriteLine("Enter your Card Number");
            char[] card = Console.ReadLine().ToCharArray();
            int[] card_m = { 1, 2, 1, 2 };
            int counter = 0;
            foreach (char c in card)
            {
                int value = (int)char.GetNumericValue(c) * card_m[counter++%card_m.Length];
                Console.WriteLine("Converted Number: {0}", value);
            } 
```

# foursquare - 场地 API - HereNow 不再通过签到

> ID：12845441
> 
> 赞同：1
> 
> 时间：2012-10-11T17:42:40.413
> 
> 标签：foursquare

这段代码昨天还在工作

```
var token = "<?php echo $token; ?>";
var venueId = "4bf42ccfe5eba593ba581f90";
var hereNowUrl = "https://api.foursquare.com/v2/venues/"+venueId+"/herenow?oauth_token="+token+"&limit=11&v=20121011";
$.getJSON(hereNowUrl, {format: "json"}, function(data) {
        $(".who").empty();
        $.each(data.response.hereNow.items, function(i,hereNow){
         $(".who").append('<img src="'+hereNow.user.photo+'" alt="" class="userphoto" />');
        });
    }); 
```

但现在它只是返回一个 200 错误（折旧），现在在 hereNow 项目中签入。我们被认证为管理我们正在查询的场所的页面，因此我们可以看到所有签到，而不仅仅是认证者的朋友，我们已经完成了这项工作，现在我们的板上没有出现任何面孔，也没有任何结果API。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:43:35.510

好的，终于明白了。照片的工作方式发生了变化，所以你需要前缀 + 照片的大小 + 后缀，所以这是我的最终代码，现在又可以工作了！！！

```
function getFourSquare(){
$.getJSON(hereNowUrl, {format: "json"}, function(data) {
    $(".who").empty();
    $.each(data.response.hereNow.items, function(i,hereNow){
     $(".who").append('<img src="'+hereNow.user.photo.prefix+"100x100"+hereNow.user.photo.suffix+'" alt="" class="userphoto" />');
    });
}); 
```

}

# html - 使用不同的用户代理加载 iframe 内容

> ID：12845445
> 
> 赞同：20
> 
> 时间：2012-10-11T17:42:45.900
> 
> 标签：html, browser, popup

是否可以使用不同的用户代理加载 iframe ？为 iframe 使用移动用户代理将帮助我的应用程序将移动网站显示为悬停弹出窗口。

例如，只有当用户代理来自移动端时，Google 才会显示移动端搜索结果页面。

是否有任何替代解决方案，或者这个想法是否涉及任何安全风险？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-27T13:26:42.190

首先，您必须创建一个函数来更改用户代理字符串：

```
function setUserAgent(window, userAgent) {
  if (window.navigator.userAgent != userAgent) {
    var userAgentProp = {
      get: function() {
        return userAgent;
      }
    };
    try {
      Object.defineProperty(window.navigator, 'userAgent', userAgentProp);
    } catch (e) {
      window.navigator = Object.create(navigator, {
        userAgent: userAgentProp
      });
    }
  }
} 
```

然后你需要定位 iframe 元素：

```
setUserAgent(
    document.querySelector('iframe').contentWindow, 
    'Aakash Chakravarthy Mobile Agent'
); 
```

您还可以为 iframe 设置一个 ID，并以 ID 为目标，而不是页面上的所有 iframe 元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T17:46:35.513

你可以用 JavaScript 做到这一点：

```
navigator.__defineGetter__('userAgent', function(){
    return 'foo' // customized user agent
});

navigator.userAgent; // 'foo' 
```

但是，这仅适用于选定数量的浏览器。

看到这个问题：[Mocking a useragent in javascript?](https://stackoverflow.com/questions/1307013/mocking-a-useragent-in-javascript)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-11T17:45:29.023

您可以创建一个使用不同用户代理发出请求的代理，然后通过代理加载 iframe 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T17:49:03.660

据我所知，您有两种解决方案：

*   大多数网站不会按用户代理呈现，它们只是识别用户代理并将用户重定向到移动视图，可以在不同的域（例如 http://m.youtube.com/）或其他一些域下访问网址段。您只需检查他们的文档，获取他们的移动 URL 并将其加载到 iframe 中。

*   另一种解决方案是将 iframe 指向您的应用程序，然后从后端获取文档。然后您可以更改请求用户代理。

从 HTML 是不可能影响请求标头的。但是你可以用javascript来做到这一点。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-03-19T03:14:57.153

我猜可能只会更改整个浏览器窗口或选项卡的用户代理信息。通过在不同时间加载 iframe，可以在加载之间更改用户代理，以在一个页面上获得两个不同的 iframe，其中包含不同的用户代理相关内容。我用一个简单的示例页面对此进行了测试：

```
<!DOCTYPE html> <html> <body>
<iframe src="http://whatsmyuseragent.com/" name="mobile" width="60%" height="400px"></iframe>
<a href="http://whatsmyuseragent.com/" target="mobile">Mobile Spoof</a>
<iframe src="http://whatsmyuseragent.com/" name="pc" width="60%" height="400px" ></iframe>
</body> </html> 
```

在 Firefox 36.0.1 中加载此页面后，我使用 User Agent Switcher 扩展程序[https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)选择 iPhone 3.0，然后单击“Mobile Spoof”链接以重新加载该帧。那时我看到同一个页面在每个 iframe 中显示不同的用户代理。我确信页面加载或重新加载时间可以通过 setTimeout() 方法自动进行，或者通过事件处理程序进行。我不确定如何自动化用户代理切换。我尝试了 Aero Windwalker 建议的 setUserAgent 函数，但无法让它在 Firefox 36 或 Chrome 41 中工作。我还想创建一个可以很好地完成此操作的页面。

# c# - 如何根据点击的数据行重定向到其他页面。

> ID：12845449
> 
> 赞同：0
> 
> 时间：2012-10-11T17:42:56.603
> 
> 标签：c#, asp.net, sql-server

我有一个问题需要解释一下，所以我会尽量说清楚。我正在处理一些网页。一个 (CustomerListPage) 我通过 GridView 拉出一个客户列表。我使这些行可点击，以便选择客户本身就是到下一页的链接。一旦用户点击了一个客户，它会将他们带到下一页（CustomerUsePage）。此页面假设显示在我创建的其中一个标签中单击的客户姓名，以及其余标签中的一些其他信息（客户 ID、街道、城市等）。这是我的 CustomerListPage 上的代码：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
   GridViewRow row = GridView1.SelectedRow;

   if (GridView1.SelectedRow.RowIndex == 0)
   {
       //string selectedUser = GridView1.SelectedRow.Cells[0].ToString();
       Response.Redirect("CustomerUsePage.aspx?Customer_ID=" );
       BindGridview();
   }

   if (GridView1.SelectedRow.RowIndex == 3)
   {
       //string selectedUser = GridView1.SelectedRow.Cells[0].ToString();
       Response.Redirect("CustomerUsePage.aspx?Customer_ID=");
       BindGridview();
   }

} 
```

这是 CustomerUsePage 上的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    string v = Request.QueryString["Customer_ID"];
    Response.Write(v);

    if (!IsPostBack)
    {
        BindControlvalues();    
    }
}

private void BindControlvalues()
{        
    con.Open();
    SqlCommand cmd = new SqlCommand(" sql query ", con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    con.Close();
    DataSet ds = new DataSet();
    da.Fill(ds);
    Label5.Text = ds.Tables[0].Rows[3][8].ToString();
    Label4.Text = ds.Tables[0].Rows[3][0].ToString();
    Label1.Text = ds.Tables[0].Rows[3][1].ToString();
    Label2.Text = ds.Tables[0].Rows[3][3].ToString();
    Label3.Text = ds.Tables[0].Rows[3][5].ToString();          
} 
```

正如所见，我通过索引这些数据来用从我的查询中收到的数据填充我的标签。我想摆脱这种情况并使用更有效的方法，但它现在有效。更重要的是，有没有办法根据我点击的客户来填充我的标签？现在点击任何客户都会产生相同的结果。我在想一些类似的东西：“如果选定的行索引 = 0”，但我知道这不起作用，因为此页面不存在 GridView。但是，逻辑是我想要的。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:58:02.827

我建议你使用`RowCommand event`

```
void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    if(e.CommandName=="Select")
    {
            var label = (Label)e.Item.FindControl("YourLabelId");
            var value = label.Text;
            Response.Redirect("CustomerUsePage.aspx?Customer_ID=" +value);

    }
  } 
```

象素

```
<asp:gridview onrowcommand="GridView_RowCommand"/> 
```

并添加引发事件的专栏

```
<columns>
                <asp:buttonfield buttontype="Link" 
                  commandname="Select" 
                  text="Select"/>

               <asp:templatefield headertext="Author Name">
                 <itemtemplate>
                     <asp:label id="YourLabelId" Text= '<%# Eval("Customer_ID") %>' runat="server"/>
                 </itemtemplate>
                </asp:templatefield>
</columns> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:10:28.723

我使用 itemtemplates 和超链接对象。如果您需要更多，请告诉我。

这是一个[示例。](http://forums.asp.net/t/1055737.aspx/1)

该网站的粘贴如下：

**回传方式：**

```
<asp:TemplateField HeaderText="The Column header ">
    <ItemTemplate>
        <asp:HyperLink runat="server" id="MyLink"   
            Text="<%# Eval("ProjectName") %>"  
            NavigateUrl='Project.aspx?ProjectID=<%# Eval("DatasourceField") %>'>
        </asp:HyperLink>
    </ItemTemplate>
</asp:TemplateField> 
```

**非回发：**

```
<asp:TemplateField HeaderText="The Column header ">
    <ItemTemplate>
        <a href='Project.aspx?ProjectID=<%# Eval("DatasourceField") %>'>
            <%# Eval("ProjectName") %> 
        </a>
    </ItemTemplate>
</asp:TemplateField> 
```

# javascript - Salesforce - 如何将 apex:repeat 中的特定值传递给 javascript 函数？

> ID：12845450
> 
> 赞同：1
> 
> 时间：2012-10-11T17:43:07.163
> 
> 标签：javascript, salesforce, parameter-passing, visualforce, repeat

是否有客户端方式将值从 apex:repeat 传递到 javascript 函数？

基本上，我的列表是迭代的，每个唯一的 itemLat / itemLon，我需要将特定的纬度/经度传递回 javascript 函数进行一些处理。关于如何解决这个问题的任何想法？

我想这样做的原因是因为我有一个单独的 JS 函数来执行一些 JS 远程处理，所以理想情况下，我只想将新参数传递给该函数，以便它可以在控制器中工作，但是以新的纬度/经度作为起始参数。

```
 <apex:repeat var="frm" id="searchResult" value="{!newSearchList}">
     <div id="search-item">
       <p style="font-size:12px">
         <apex:outputLink value="javascript:void(0)" onclick="setCoords(itemLat, itemLon);" id="itemLink">
         <b>{!frm.Customer_gne__r.Name}</b>
           <apex:param name="itemLat" value="{!frm.Test_Lat__c}"/>
           <apex:param name="itemLon" value="{!frm.Test_Lon__c}"/>
         </apex:outputLink><br/>
         {!frm.Primary_Address_gne__r.Name}, {!frm.Primary_Address_gne__r.City_vod__c}<br/>
         {!frm.Primary_Address_gne__r.Phone_vod__c}<br/>
       </p>
     </div>
   </apex:repeat>

  function setCoords(passedLat,passedLon) {
    alert("testing the alert!" + passedLat + "    " + passedLon);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:46:47.310

你为什么不使用正常的方式：

`onclick="setCoords('{!frm.Test_Lat__c}', '{!frm.Test_Lon__c}');"`

# spring - Spring Roo - 基于 json 控制器创建 Web 脚手架？

> ID：12845451
> 
> 赞同：0
> 
> 时间：2012-10-11T17:43:13.903
> 
> 标签：spring, spring-roo

似乎构建默认 Web 脚手架的唯一方法是使用基于表单的标准 Web mvc 控制器。是否可以自动创建使用 mvc json 控制器的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:19:06.457

在 Roo 项目中使用 JSON 文档序列化和反序列化有多种方法：

*   选项 1：[在域层管理的内置 JSON 处理](http://static.springsource.org/spring-roo/reference/html/base-json.html)（在本节中讨论）。这提供了可定制的 FlexJson 集成。
*   选项 2：Spring MVC 检测应用程序类路径中的 Jackson 库
    *   只需在控制器中使用 Spring 的 @RequestBody 和 @ResponseBody 注释，或者
    *   利用 Spring 的 ContentNegotiatingViewResolver

# .net - 为什么这个 DateTime.Parse() 调用会抛出 .NET 4 而不是 .NET 2？

> ID：12845460
> 
> 赞同：2
> 
> 时间：2012-10-11T17:43:51.863
> 
> 标签：.net, .net-4.0, .net-2.0

我有一个在 .NET 2.0 和 4.0 中表现不同的小应用程序。

`DateTime.Parse()`.NET 2 和 .NET 4 之间有什么变化吗？以下代码段在每个上的行为不同。

```
// when targeted for .NET 2.0, this prints out: 21/03/2012...,
// which is correct presentation for my regional settings
//
// however, when compiled for .NET 4.0, this throws a FormatException
// {"String was not recognized as a valid DateTime."}

var it = CultureInfo.CreateSpecificCulture("it-It");
Console.WriteLine(DateTime.Parse("21-mar-2012", it)); 
```

编辑：

我正在对这些类型的问题的代码库进行一些清理。我试图引发失败，但我惊讶地发现我的测试应用程序（.NET 4）抛出，但实际应用程序（.NET 2）工作正常。

# php - 从多个 MySQL 表中快速获取结果

> ID：12845464
> 
> 赞同：0
> 
> 时间：2012-10-11T17:43:58.970
> 
> 标签：php, mysql, optimization

我正在为使用 PHP、MySQL 的客户在酒店预订网站上工作，哪些酒店将登录并管理他们的房价、特价、最低住宿预订、最后一分钟优惠等……我已经完成了，但面临问题从数据库中快速获取费率，因为我必须在下表和后续流程中获取费率。当用户选择日期时，我在存储日期和编号的表 tbl_availability 中进行搜索。可用房间，然后在特价表中，我存储选定日期的可用报价以检查用户是否有资格获得任何特价，然后我检查最短停留时间表以检查酒店是否在用户选择的日期添加了任何最低停留时间限制，并且最后我检查日期是否有任何最后一分钟的交易可用。我需要搜索所有酒店，然后将结果显示给用户。

我认为会有所帮助的一件事是，我将运行 cron 并将所有内容存储在一张表中以供未来 1 年使用，并在每次预订或每次酒店更改任何内容时更新该表。

以前有没有人处理过类似的情况并找到了一种从数据库中快速获取结果的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:59:02.807

为了提高查询的性能，请尝试使用[http://memcached.org/](http://memcached.org/)将缓存存储在内存中。

# performance - 为什么经典的 asp 脚本或请求为每个客户端按顺序运行

> ID：12845478
> 
> 赞同：4
> 
> 时间：2012-10-11T17:45:05.030
> 
> 标签：performance, iis, asp-classic, parallel-processing

我已经注意到很多次了，我不知道为什么它会这样 ![萤火虫捕获](../Images/52bb00488970a1ee38a992bd823d13d2.png)

对于这个例子：它都是用 asp 写的，缓冲在 IIS 7 上，运营商级服务器，充满了 RAM 和 CPU

正如您在捕获时看到的，首先执行主页，然后使用 Jquery 调用 3 个 ajax 脚本。

我必须在 document.ready 事件之前调用第一个，以使其在其他 2 个之前回答。

否则，如果同时调用 3 个，则在最慢的一个完成执行之前，它们不会得到响应。2 个鞋楦在 document.ready 中调用。我们清楚地看到，当最慢的一个执行结束时，2 开始响应。但是最轻的一个会非常快，一些毫秒。

当我从应用程序下载一些文件时也会发生这种情况。该应用程序使用 bynarystream 方法发送文件。从浏览器客户端下载文件时，应用程序不会响应任何其他浏览器请求（例如，我的意思是在另一个选项卡中），直到下载完成。

奇怪的是，您可以打开另一个浏览器（IE、Chrome...），服务器会立即响应任何请求，但对这个新浏览器的行为相同。来自此浏览器的任何请求都不能并行运行。

我知道 ASP 是一个古老的东西，但有人能告诉我为什么它会这样工作吗？

是因为浏览器限制还是技术？由于会话机制？由于 IIS？由于数据库访问（我相信不会，因为下载不涉及流式传输内容时的数据库访问）？它会以另一种方式适用于其他语言和环境吗？

我可以改变这种行为吗？如何 ？

干杯

弗雷德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T20:10:22.380

尝试禁用 GetListeDossier.asp 的会话，我希望您的其他请求将与此页面同时运行...

会话是单线程的，因此使用会话的页面只能按顺序处理。

# java - 回调函数时的多线程

> ID：12845484
> 
> 赞同：0
> 
> 时间：2012-10-11T17:45:29.507
> 
> 标签：java, multithreading

好的，这可能是一个非常大的问题。

我有一项服务（例如通知程序），并且该服务的一种方法 [例如 notifyTransaction(Transaction trans) ] 可远程用于回调。

现在还有其他服务说（transactionsReader），它不断读取传入的事务并调用通知程序的远程方法，即`notifyTransaction(Transaction trans).`

现在向您解释这个问题，我想补充一点，我的交易包含多个操作。对于治疗手术，我有一个功能说`processOperation(Operation op).`

这`processOperation(Operation op)`实际上对数据库进行了一些更新。

有什么问题 ？服务 transactionsReader 正在以非常快的速度读取传入的事务，并`notifyTransactions()`以比方法处理操作的速度快得多的速度调用事务`processOperation(Operation op)`。

我想做的事 ？我想使用 multithreadint`notifyTransactions()`以便我有多个线程来处理每个事务。

为了开始，我 `ExecutorService executor = Executors.newFixedThreadPool(2);` 在方法中使用`notifyTransactions()`并创建了我的方法 processOperation(Operation op) 的任务。但这会为每次调用创建一个不同的池，`notifyTransactions()`所以我在几秒钟内就有了大约 3000 个池。最后它内存不足。

还有什么其他可能的解决方案？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:47:46.323

> 开始我使用 ExecutorService executor = Executors.newFixedThreadPool(2); 在方法 notifyTransactions()

这是您需要`ExecutorService`实例在两者中通用的问题。如果您开始调用每个操作，那么它将创建大量线程。你应该在里面调用`submit`任务`notifyTransactions()`

You should use a producer consumer approach using [BlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html) which is bounded. So if queue is full producer will stop if queue is empty consumers will stop. So in your case `processOperation(Operation op)` is a producer which will process operation and put it in BlockingQueue and inside `notifyTransactions()` you will dequeue it and process accordingly.

# multithreading - 如何在不立即运行的情况下创建线程？

> ID：12845498
> 
> 赞同：1
> 
> 时间：2012-10-11T17:45:47.920
> 
> 标签：multithreading, perl

考虑以下代码：

```
for (my $i = 0; $i < $threadCount; $i++) {

    if($isResumed) {

        # TODO: load stats from DB      
    }
    else {

        $stats->{workers}->{$i}        = &share({});            
        $stats->{workers}->{$i}->{tid} = undef; 
        $stats->{workers}->{$i}->{foo} = "bar";
        $stats->{workers}->{$i}->{abc} = 123;                               
    }

    # create the worker thread
    my $thr = threads->create(\&worker);    
    # TODO: find a way to store the TID in the $i slot. why have two differetn IDs? 
    $stats->{workers}->{$i}->{tid} = $thr->tid();
} 
```

我正在使用 $stats 哈希来保存应该在线程之间共享的数据，以及有关每个线程正在做什么的数据。我遇到的问题是我想根据 TID 引用此哈希中的线程数据，而不是循环中 $i 分配的任意值。

当我创建线程时，工作立即开始，但在设置哈希值之前它无法开始工作。所以，如果我这样做：

```
$thr = threads->create(\&worker);
$stats->{workers}->{$thr->tid()} = &share({}); 
```

它不起作用，因为尚未设置所需的所有数据。

所以基本上，有没有办法让我创建一个线程，但推迟它运行它的代码，直到我明确告诉它？就像是：

```
$thr = threads->create(\&worker);
$stats->{workers}->{$thr->tid()} = &share({});
$thr->start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:58:52.370

强烈建议使用[Thread::Queue](http://perldoc.perl.org/Thread/Queue.html)来处理这样的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:42:39.667

最后，在查看了我的代码之后；我意识到我过于复杂了，并不真正需要知道 TID。

我最终只是在创建语句期间将相关数据传递给工作子例程。

尽管如此，遇到这个问题的人应该看看让的答案，因为它似乎是我原来问题的一个有希望的解决方案。

# wordpress - WordPress 类参考问题

> ID：12845501
> 
> 赞同：0
> 
> 时间：2012-10-11T17:46:00.650
> 
> 标签：wordpress, list, navigation

我似乎无法弄清楚如何在我的导航菜单中为标签调用一个类...我正在使用 wp_nav_array 参考，但它似乎不起作用。这是标记：

HTML

```
<div class="navigation_bar">
    <ul class="navigation">
        <li><a href="index.html">Home</a></li>
        <li class="active"><a href="about.html">About</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="contact.html">Contact</a></li>
    </ul>
</div> 
```

Header.php 文件

```
 <?php wp_nav_menu(array( 'menu_class' => 'navigation_bar navigation', 'sort_column' => 'menu_order', 'theme_location'  => 'header-menu') ); ?> 
```

它在浏览器中的显示方式

```
<div class="navigation_bar">
    <ul>
       <li class="page_item page-item-6"><a href="http://localhost/?page_id=6">Home</a></li>
       <li class="page_item page-item-12 current_page_item"><a href="http://localhost/?page_id=12">About</a></li>
    </ul>
</div> 
```

我如何**需要**它在浏览器中显示

```
<div class="navigation_bar">
    <ul class="navigation">
       <li class="page_item page-item-6"><a href="http://localhost/?page_id=6">Home</a></li>
       <li class="page_item page-item-12 current_page_item"><a href="http://localhost/?page_id=12">About</a></li>
    </ul>
</div> 
```

我感谢所有建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:59:26.163

这应该可以解决问题：

```
<?php wp_nav_menu(array('menu_class' => 'navigation_bar', 'container_class' => 'navigation', 'sort_column' => 'menu_order', 'theme_location' => 'header-menu') ); ?> 
```

更多关于调用[WP Nav Menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

**更新：**

仔细查看后，我意识到 wp_nav_menu 没有可用的 'sort_column' 选项。像这样称呼它：

```
<?php wp_nav_menu(array('menu_class' => 'navigation_bar', 'container_class' => 'navigation', 'theme_location' => 'header-menu') ); ?> 
```

# git - Git混淆 - 如何将本地更改恢复为最新的远程推送？

> ID：12845507
> 
> 赞同：38
> 
> 时间：2012-10-11T17:46:11.713
> 
> 标签：git, git-revert

我有一个本地 git 存储库，但事情变得错误和复杂，我只想用远程存储库上的最新版本覆盖本地目录中的所有文件。这就像一个克隆，但是对于已经设置好的本地 git 存储库。

例如：如果使用`git pull`，那么我不会从远程获取本地删除的文件夹。

是`checkout`我必须使用的吗？但是如何告诉它从远程（而不是从舞台）检索文件并覆盖所有文件？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-11T17:48:04.113

您可能想使用`git reset`. 假设您`git fetch`最近做了一个，以下将丢弃您本地的所有内容并将其重置为您指定为最终参数的点（在本例中为`origin/master`远程跟踪分支的当前 HEAD）：

```
$ git reset --hard origin/master 
```

# filter - SPARQL 检查多个值中是否存在单个值

> ID：12845508
> 
> 赞同：1
> 
> 时间：2012-10-11T17:46:14.247
> 
> 标签：filter, rdf, sparql

我有一个 ttl 文件，如下所示：

`<http://www.foo.com/subject1> <http://www.foo.com/tag> "disabled", "my-tag1" . <http://www.foo.com/subject2> <http://www.foo.com/tag> "my-tag2" . <http://www.foo.com/subject3> <http://www.foo.com/tag> "my-tag3" .`

如何形成查询以删除具有“已禁用”标签的主题？主题可以有零个或多个标签。我试过了，

```
SELECT ?subject
WHERE
{
    OPTIONAL { ?subject <http://www.foo.com/tag> ?tagValue . }
    FILTER (!BOUND(?tagValue) || (str(?tagValue) != 'disabled'))
} 
```

但是当我们为一个主题有多个标签时，这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:57:47.070

查询：

```
select distinct ?s where { ?s <http://www.foo.com/tag> "disabled". } 
```

将抓取标签值为“已禁用”的所有资源。然后，您可以以适合您的应用程序的任何方式删除您的资源列表。

# c++ - 让 qmake 正确运行我的代码生成器

> ID：12845513
> 
> 赞同：4
> 
> 时间：2012-10-11T17:46:26.850
> 
> 标签：c++, qt, code-generation, qmake

这是我的情况：

我有一个使用 qmake（.pro 文件）构建的典型 Qt C++ 项目。

我还有一个生成一些代码的 python 脚本。python脚本（我们称之为update.py）生成三个文件，我们称之为gen.h、gen.cpp、gen.qml。

现在我正在做的是手动运行 update.py 以生成这些文件。然后我可以运行 make 并且一切正常。gen.h 和 gen.cpp 只是我的 .pro 文件中的“常规”文件，它们被检入 SVN。

相反，我想要的是制作它，以便在我运行 make 时，update.py 将运行并生成这些文件，然后它们将与项目一起构建。这样我就可以将它们从 SVN 中删除并避免额外的手动步骤。

仅供参考：我已经将 update.py 设置为仅在需要时重新生成这些文件，因此如果您多次运行 update.py，它不会盲目地更改 gen.h、gen.cpp 等。

我花了很多时间试图完成这项工作（实际上有点尴尬）。我一直在搞乱 QMAKE_EXTRA_TARGETS、QMAKE_EXTRA_COMPILERS、PRE_TARGETDEPS 等，但似乎没有什么能像我想要的那样工作。

哦，还有更多信息：gen.cpp 和 gen.h 有基于 QObject 的类，所以我需要在 MOC 运行之前生成它们。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T19:30:11.753

如果我理解这将满足您的需求：

```
mytarget.target = .buildfile
mytarget.commands = ./update.py
QMAKE_EXTRA_TARGETS += mytarget
PRE_TARGETDEPS += .buildfile 
```

第一条语句定义了一个名为“buildfile”的新 Makefile 目标，第二条语句定义了 buildfile 目标的功能（它调用了生成代码的 update.py），第三条语句将 mytarget 定义为新的 qmake 目标，最后一个添加buildfile 目标到 qmake 的目标列表。

哦，我忘了。我在 qmake 的手册中找到了这个：http: [//qt-project.org/doc/qt-4.8/qmake-environment-reference.html](http://qt-project.org/doc/qt-4.8/qmake-environment-reference.html)在本节。也许它有用;）

对于 moc 你可以定义这些：

```
new_moc.output  = moc_${QMAKE_FILE_BASE}.cpp
new_moc.commands = moc ${QMAKE_FILE_NAME} -o ${QMAKE_FILE_OUT}
new_moc.depend_command = g++ -E -M ${QMAKE_FILE_NAME} | sed "s,^.*: ,,"
new_moc.input = NEW_HEADERS
QMAKE_EXTRA_COMPILERS += new_moc 
```

我做了一些测试。这对我有用：

```
//.pro file:
QT       += core gui

TARGET = test
TEMPLATE = app

SOURCES += main.cpp \
           widget.cpp

HEADERS  += widget.h

FORMS    += widget.ui

mytarget.target = .buildfile
mytarget.commands = ./update.py
QMAKE_EXTRA_TARGETS += mytarget
PRE_TARGETDEPS += .buildfile

new_moc.target         = .mymoc
new_moc.output         = moc_widget.cpp
new_moc.commands       = moc widget.cpp -o moc_widget.o
new_moc.depend_command = g++ -E -M widget | sed "s,^.*: ,,"
new_moc.input          = moc_widget.h

QMAKE_EXTRA_COMPILERS += new_moc

//update.py:
#!c:/Python/python.exe -u

fd=open("widget.h",'w')
fd.write("#ifndef WIDGET_H\n")
fd.write("#define WIDGET_H\n")
fd.write("#include <QWidget>\n")
fd.write("namespace Ui {\n")
fd.write("class Widget;\n")
fd.write("}\n")
fd.write("class Widget : public QWidget\n")
fd.write("{\n")
fd.write("    Q_OBJECT\n")
fd.write("public:\n")
fd.write("    explicit Widget(QWidget *parent = 0);\n")
fd.write("    ~Widget();\n")
fd.write("private:\n")
fd.write("    Ui::Widget *ui;\n")
fd.write("};\n")
fd.write("#endif // WIDGET_H\n")
fd.close()

fd=open("widget.cpp",'w')
fd.write("#include \"widget.h\"\n")
fd.write("#include \"ui_widget.h\"\n")
fd.write("Widget::Widget(QWidget *parent) :\n")
fd.write("    QWidget(parent),\n")
fd.write("    ui(new Ui::Widget)\n")
fd.write("{\n")
fd.write("    ui->setupUi(this);\n")
fd.write("}\n")
fd.write("\n")
fd.write("Widget::~Widget()\n")
fd.write("{\n")
fd.write("    delete ui;\n")
fd.write("}\n")
fd.close() 
```

# unix - 使用 SED 脚本添加行、前导空格和字符串的 Unix 语法问题

> ID：12845514
> 
> 赞同：1
> 
> 时间：2012-10-11T17:46:31.847
> 
> 标签：unix, sed

Unix 菜鸟在这里。我正在开发一个执行简单查找/替换的 unix 脚本。该脚本旨在找到以“_development”结尾的行，然后添加一个包含字符串“password:test”的新行。

```
#!/bin/sh

sed -e 's/$"_development"/ a\  password: test/'  original_file > new_file 
```

运行它时我没有收到任何错误，但它实际上并没有满足我的需要。它添加新行，但不添加字符串。我认为这种语法应该有效。我在 Mac 上启动它是否重要。最重要的是，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:55:32.077

如果您使用的是 Mac，很可能您需要在 sed 命令中使用文字换行符：

```
sed -e '/_development$/a\
   password: test/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:32:53.590

这对我有用：

```
sed -e 's/.*_development.$/password: test/' original_file > new_file 
```

假设您想用“结尾的_development”替换该行。如果您想在匹配的行之后附加新的新行，请使用

```
sed -e 's/.*_development.$/\0\npassword: test/' test.txt > new_file.txt 
```

正如亚当所建议的那样，这将添加`\0\n`替换为匹配的行并附加新的行。

但是，我自己没有 Mac，我不能肯定地说这些对你有用。这是一篇文章，可能会提供有关在 mac 上使用 sed 换行的更多信息：http: [//cafenate.wordpress.com/2010/12/05/newlines-in-sed-on-mac/](http://cafenate.wordpress.com/2010/12/05/newlines-in-sed-on-mac/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T17:54:01.983

您的搜索模式是`$"_development"`，它在行尾查找空字符串，后跟文字`"_development"`。一行结束后不可能有任何东西——你真的应该写`"_development"$`。`$`总是走到最后。

假设您使用的是可以插入换行符的 sed 版本（例如 GNU sed），这样的东西应该可以工作：

```
sed -e 's/"_development"$/\0\n  password: test/' original_file > new_file 
```

表示使用整个匹配的`\0`模式（这样我们就不会删除该`"_development"`部分），然后`\n`插入换行符。

# java - Google App Engine Java 低级数据存储区 API

> ID：12845516
> 
> 赞同：0
> 
> 时间：2012-10-11T17:46:38.117
> 
> 标签：java, google-app-engine, datastore

Python 的低级 Datastore API 提供了设置类型属性的可能性。（如“setStringProperty”。

Java 低级 Datastore API 是否也提供类型化属性？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:52:16.700

一个简短的回答是否定的。[setProperty](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/PropertyContainer#setProperty%28java.lang.String,%20java.lang.Object%29)方法将 Object 值作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:51:15.213

我想，我只是将 setProperty 与类型化参数一起使用（其中之一：[https](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types) ://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types ）...

# c# - 在 C# 中使用时间戳来测试方法长度

> ID：12845518
> 
> 赞同：1
> 
> 时间：2012-10-11T17:46:46.687
> 
> 标签：c#, .net, timestamp

我想测试一个方法运行需要多长时间，我想知道时间跨度是否是最好的方法？我不想记录方法的开始和结束，因为我听说记录不会给出准确的时间读数，因为创建和更新现有日志文件需要时间。如果时间跨度不是最好的方法，关于什么是这样做的好方法有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T17:49:25.340

最好使用专为此类事情设计的 Stopwatch 类。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

```
Stopwatch stopWatch = new Stopwatch();
stopWatch.Start();
DoSomething();
stopWatch.Stop();
// Get the elapsed time as a TimeSpan value.
TimeSpan ts = stopWatch.Elapsed; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T17:52:24.540

```
var duration = Measure(() => YourFunction(param1));

long Measure(Action action)
{
    Stopwatch sw = Stopwatch.StartNew();
    action();
    return sw.ElapsedMilliseconds;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T17:48:56.137

我`Stopwatch`用来计时我的代码。

```
 var sw = new Stopwatch();
 sw.Start()
 //code to time here
 sw.Stop();
 Console.WriteLine("Time taken in milliseconds: " + sw.ElapsedMilliseconds); 
```

您可以使用秒表对您的时间安排非常感兴趣。我用它来测试嵌套执行，以及平均多个循环迭代所花费的时间。

要测试多次迭代，请执行以下操作：

```
var sw = new Stopwatch();
List<long> totalTime = new List<long>();

for (var u = 0; u < 100000; u++)
{
    sw.Start();
    //logic here
    sw.Stop();
    totalTime.Add(sw.ElapsedMilliseconds);
    sw.Reset();
}
Console.WriteLine("Average time in Milliseconds: {0}", totalTime.Average()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T17:49:20.980

您想使用 Stopwatch 类。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-11T17:50:29.597

你应该使用这个[`Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类：

```
public void Foo()
{
    var sw = Stopwatch.StartNew();
    // Do work...
    var totalTime = sw.Elapsed;
} 
```

我经常让自己成为一个实用的方法来处理这个问题：

```
public static void ComputeTimings(Action method, string methodName)
{
    var sw = Stopwatch.StartNew();
    method();
    sw.Stop();
    Debug.WriteLine("Method {0} took {1}", methodName, sw.Elapsed);
} 
```

这可以称为：

```
ComputeTimings(() => Foo(bar), "Foo"); 
```

这很好，因为您可以将时间“注入”到您的代码中并根据需要将其删除，而无需更改您的实际方法主体。

另请注意，对于非常准确的计时，您通常需要至少执行该方法*两次*。方法第一次运行时，由于 JIT 编译器的原因，计时可能会关闭。如果您选择，您可以将其构建到上述方法中，即：

```
public static void ComputeTimings(Action method, string methodName, bool executeOnceFirst = true)
{
    if (executeOnceFirst) 
        method();

    var sw = Stopwatch.StartNew();
    method();
    sw.Stop();
    Debug.WriteLine("Method {0} took {1}", methodName, sw.Elapsed);
} 
```

# mysql - 最多选择 2 行，其中一列具有相同的值

> ID：12845519
> 
> 赞同：5
> 
> 时间：2012-10-11T17:46:59.923
> 
> 标签：mysql, sql

我正在尝试选择最多 2 行，其中一列具有相同的值。IE：

```
id  title   accountid   date
1   job 1       1      Oct. 1
2   job 2       1      Oct. 1
3   job 3       1      Oct. 1
4   job 1       2      Oct. 2
5   job a       3      Oct. 2
6   job z       4      Oct. 3
7   job 2       2      Oct. 3
8   job 3       2      Oct. 8 
```

我要选择

```
 1   job 1       1      Oct. 1
    2   job 2       1      Oct. 1
                                   <----- Skip this row because we already 
                                          have 2 from account 1
    4   job 1       2      Oct. 2
    5   job a       3      Oct. 2
    6   job z       4      Oct. 3
    7   job 2       2      Oct. 3 
```

我现在用来选择的是这样的：

```
SELECT * 
FROM table 
ORDER BY date DESC, RAND() 
```

我已经研究了一下使用`HAVING COUNT(accountid) <= 2`，但这只会导致混乱。我对使用 sql 很陌生。

谢谢你的帮助！

更新：

嗨，感谢所有快速回复。我已经尝试了它们中的每一个，但似乎无法让它们工作。我想出了一种使用 php 限制每个帐户 ID 的作业的方法。再次感谢您为帮助我解决此问题所付出的时间和努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:59:03.653

```
set @id := 0, @acid := 0;
select t.id, title, accountid, `date`
from 
    t
    inner join (
        select 
            id, 
            if(@acid = accountid, @i := @i + 1, @i := 1) as i,
            @acid := accountid as acid
        from t
        order by accountid, `date` desc
    ) s on t.id = s.id
where s.i <= 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:07:30.750

嗨，这会解决你的问题，但我不知道这个查询有多快。

**[SQLFIDDLE 示例](http://sqlfiddle.com/#!9/08950/39)**

询问：

```
SELECT
id, 
title,
accountid,
date
FROM
    (SELECT
     IF(@prev != a.accountid, @rownum:=1, @rownum:=@rownum+1) as rownumber, 
     @prev:=a.accountid, 
     a.*
     FROM (
           SELECT 
           t1.id, 
           t1.title,
           t1.accountid,
           t1.date
           FROM tbl t1,
           (SELECT @rownum := 0, @prev:='') sq
              ORDER BY  accountid, id) a
    )b
WHERE b.rownumber<3
ORDER BY b.id 
```

结果：

```
| ID | TITLE | ACCOUNTID |   DATE |
-----------------------------------
|  1 | job 1 |         1 | Oct. 1 |
|  2 | job 2 |         1 | Oct. 1 |
|  4 | job 1 |         2 | Oct. 2 |
|  5 | job a |         3 | Oct. 2 |
|  6 | job z |         4 | Oct. 3 |
|  7 | job 2 |         2 | Oct. 3 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:04:55.730

```
SELECT tab.id, tab.title, tab.accountid, tab.date
FROM table tab INNER JOIN table count_tab ON tab.id = count_tab.id
WHERE count_tab.id <= tab.id
GROUP BY tab.id, tab.title, tab.accountid, tab.date
HAVING count(count_tab.id) <= 2 
```

# asp.net - File.Move() 访问被拒绝 ASP.NET

> ID：12845520
> 
> 赞同：1
> 
> 时间：2012-10-11T17:47:00.723
> 
> 标签：asp.net, .net, vb.net, file, access-denied

在我的 Web 应用程序中，我必须将文件从用户计算机移动到服务器。我必须使用 ascx 组件来执行此操作。

这是代码：

```
Private Function FileReplciate(ByRef FilePath As String)
     'FilePath  is the full file path e.g C:/Program Files/file.txt

      ' Create an id to hide the original file name (for security)

       Dim id = New Guid;

      Try

      'Here I move the file using File.Move()  here is the error
       File.Move(FilePath, Server.MapPath("temp\" & id.ToString))

      Catch ex As exception

      End Try

End Function 
```

因此，当源文件位于“MyDocuments”或“MyPictures”之类的文件夹或“User”文件夹内的任何子文件夹中时，我收到拒绝访问错误。

当源文件位于“C:\”或“C:\ProgramFiles”等文件夹中时，我不会收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:51:07.617

通常你会在 ASP.NET 中遇到错误，因为运行你的应用程序的帐户没有适当的权限。

但是您所描述的是文件上传。服务器端代码无法访问客户端机器文件系统，这是不可能的。客户必须从它希望的位置上传它。`<asp:FileUpload>`为此目的使用控制。

# c# - 字段名称不在数据集中

> ID：12845530
> 
> 赞同：0
> 
> 时间：2012-10-11T17:47:23.297
> 
> 标签：c#, sql-server, tsql, ado.net, dataset

编辑：1）名称！=名称，这不是问题。该代码在 99.9999% 的时间内都可以工作，并且偶尔会在生产中失败（从不在实验室条件下>_<）我们正在部署调试代码，它应该可以解释正在发生的事情，但是在我们能够做到之前，只是寻找是否有人看过任何类似的东西。

编辑：2）仅供参考。为了测试，我运行了以下代码

```
...
var name = row["Name"].ToString().ToLower();
var name2 = row["name"].ToString().ToLower();
... 
```

这实际上工作得很好，这表明至少在框架 4 中， row[xx] 不区分大小写。无论哪种方式，这都不是我不幸看到的问题。希望是:)

这是一个简单的代码片段，它给我们带来了问题。不仅仅是这段代码，实际上是任何看起来像这样的代码。共同的部分是 row["name"] 抛出一个异常，声称 "name" 不是表 Table 的列。

```
var command = new SqlCommand("SELECT Name FROM Table1");
DataSet result = helper.ExecuteQuery(command); 
if (result == null || result.Tables.Count != 1)
{
    return;
}
foreach (DataRow row in result.Tables[0].Rows)
{
    var name = row["Name"].ToString().ToLower();                
} 
```

helper.ExecuteQuery 返回一个数据集，

如您所见，我们知道结果是一个数据集，即它不为空并且包含一个表。

我们知道它有行，因为我们在 foreach 循环中。我们知道 Name 作为列存在，因为运行的 sql 语句总是被硬编码到那里，没有歧义或聪明。

有什么想法（与问题有关吗？）有一些解决方法，使用 int 索引器，这些查询中的大多数只返回一或两列。首先检查列，诸如此类的事情，但是我记得这么多年了，我从来没有遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:28:56.703

你可以试试`name in lower`

```
 var name = row["name"].ToString().ToLower(); //name in lower 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:39:08.093

当通过列名引用时，大小写确实很重要。

`row["Name"]`不同于`row["name"]`

# jquery - jQuery .text() 不显示 HTML

> ID：12845535
> 
> 赞同：-2
> 
> 时间：2012-10-11T17:47:44.687
> 
> 标签：jquery, ajax

> **可能重复：**
> [jquery .text 不会将 HTML 元素呈现到 DOM 中](https://stackoverflow.com/questions/1764049/jquery-text-doesnt-render-html-elements-into-the-dom)

我有一个 AJAX 函数`<img>`从服务器中提取标签。我的问题是，当我将页面上`.text()`的 a 属性设置为该标签时，不会呈现 HTML。相反，它只是将标签显示为文本。`span``<img>`

这是我的代码：

```
// jQuery
$.ajax({
  url: 'forms/scripts/getStatus.php',
  dataType: 'json',
  type: 'POST',
  data: {
      subfolderID:rowID
  },
  async: false,
  success: function(data){
      if(data.errorsExist == "Y"){
          alert(data.appError);
      }
      else{
          $("#trackStatus").text(data.status);    
      } 
  },
  error: function(){
      alert("Error! Could not retrieve tracking status");
  }
}); 
```

我的 HTML：

```
<td><span id="trackStatus"></span></td> 
```

如何让`img`标签呈现为 HTML？也许我不应该使用 a `span`with`.text()`方法...？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T17:48:36.983

使用 `.html()`而不是`.text()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:49:01.120

`.text()`转义 HTML。`.html()`没有，所以使用`.html()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T17:48:47.833

这就是[text](http://api.jquery.com/text)函数的目的：

> 我们需要注意，此方法会根据需要对提供的字符串进行转义，以便在 HTML 中正确呈现。

改用[html](http://api.jquery.com/html/)函数：

```
$("#trackStatus").html(data.status); 
```

# javascript - 显示 Twitter 提要停止工作

> ID：12845545
> 
> 赞同：11
> 
> 时间：2012-10-11T17:48:36.857
> 
> 标签：javascript, html, twitter, feed

显示 twitter 提要的默认方式已停止工作。这是一个示例代码：

```
<html>
    <head>
        <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
    </head>
    <body>
        The feed should display below:
        <div id="twitter_update_list"> </div>
        <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/stackoverflow.json?callback=twitterCallback2&amp;count=4">
    </body>
</html> 
```

**为什么这不起作用？**我怀疑问题出在 Twitter 上，但这已经有一段时间没有起作用了。如果您想玩，我创建了一个小提琴：http: [//jsfiddle.net/9EvXn/](http://jsfiddle.net/9EvXn/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T17:25:11.800

您需要将代码更新为 Twitter 的新 API。此代码将起作用：

```
<html>
    <head>
        <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
    </head>
    <body>
 <div id="twitter_update_list"></div>
            <script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline.json?screen_name=stackoverflow&include_rts=true&count=4&callback=twitterCallback2"></script>
</div>
    </body>
</html> 
```

注意更新的这行代码：

```
http://api.twitter.com/1/statuses/user_timeline.json?screen_name=stackoverflow&include_rts=true&count=4&callback=twitterCallback2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T17:53:28.347

最近有人在我的博客上写了这个（作为对显示 Twitter 提要的文章的评论）：

> 请注意，如果您使用此代码，我注意到它最近停止工作。我相信这是由于 Twitter 的新 API。罪魁祸首是获取推文的网址。这是一个似乎可以解决问题的更新网址： `var url = 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=' + username + '&count=' + limit + '&callback=?';`

所以也许只是在“twitter.com”前面拍“api”。我假设的 /1/ 是一个版本号。

编辑：显然这是正确的：P

```
<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
<div id="twitter_update_list"></div>
<script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline.json?screen_name=stackoverflow&include_rts=true&count=4&callback=twitterCallback2"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:24:08.763

在我看来还可以。

在这里，我创建了一个 jsfiddle 来测试：http: [//jsfiddle.net/RASG/ULZBB/](http://jsfiddle.net/RASG/ULZBB/)

尝试编辑我的 jsfiddle，看看它是否可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:18:13.093

这是之前宣布的 Twitter 最新 API 更新的一部分（参见[https://dev.twitter.com/blog/api-housekeeping](https://dev.twitter.com/blog/api-housekeeping)和[https://dev.twitter.com/docs/deprecations/spring-2012](https://dev.twitter.com/docs/deprecations/spring-2012)）。

现在必须通过 API.twitter.com 进行所有调用并使用版本化端点（理想情况下是 /1.1，或 /1 直到 2012 年 3 月）。

# android - 浏览器中的 Android 模拟器

> ID：12845546
> 
> 赞同：2
> 
> 时间：2012-10-11T17:48:44.713
> 
> 标签：android, android-emulator, cloud, virtual

我想向客户展示我的 android 应用程序。我想将它们发送给他们，以便他们可以在浏览器中使用它并告知更改。

那么，为了实现这一点，可以在浏览器中模拟 Android 的 VNC 会话吗？如果是这样，这可以在 node.js 的帮助下仅使用 javascript 来完成，还是我需要使用 java servlet 来做到这一点？

我想知道可能性以及如何做到这一点。

**编辑1：**

经过一番谷歌搜索后，我发现这个网站正是我所需要的。在浏览了它的源代码后，我认为它完全是浏览器中 VNC 实例的仿真。所以看看它，请告诉我。

这是该网站的链接[http://www.manymo.com/](http://www.manymo.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:59:56.300

您也可以尝试 noVNC：[https](https://github.com/kanaka/noVNC) ://github.com/kanaka/noVNC - 我相信它完全支持 NodeJS 并轻松集成到现有站点中。

这种方法的问题是模拟器真的很慢。我不会冒险向非技术客户展示进展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:06:58.690

不久前我问了一个[类似的问题](https://stackoverflow.com/questions/3492683/can-you-deploy-an-android-application-onto-google-app-engine)，关于将应用程序部署到 Google App Engine 以创建基于浏览器的演示，从那时起，关于可行的解决方案似乎并没有出现太多，但是你发布的链接看起来很有趣。

您最好的选择是：

1.  购买（便宜的）手机，加载您的应用程序，然后在客户面前进行演示。
2.  向他们发送 APK，以便他们可以在自己的设备上试用
3.  使用应用程序如何工作的屏幕截图制作一些视频或故事板（不是很好，但它会让您了解您可以做什么）

没有什么能替代在真实设备上进行演示：

*   他们实际上可以将应用程序放在手中的物理设备上，他们走了很长一段路……
*   如果您有复杂的用例，他们可以利用您可能难以模拟的设备 API
*   他们可以在他们可能打算使用的特定设备上运行它

# c# - 带阈值条的边缘

> ID：12845547
> 
> 赞同：0
> 
> 时间：2012-10-11T17:48:46.307
> 
> 标签：c#, visual-studio-2010, edge-detection, trackbar

我目前正在创建一个程序来操作和更改黑白图像中的像素值。我正在使用 Microsoft Visual Studio 2010。

到目前为止，我已经使用 roberts 梯度创建了边缘检测，首先我创建了这个没有用于更改阈值级别的跟踪栏。

当我在轨迹栏中添加以更改阈值时，原始图像会从屏幕上消失。这个想法是将原始图像和处理后的图像并排放置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:46:08.600

我认为你应该只更新 Form1_Paint 方法。您永远不会在其中绘制 proc_image 。任何重绘都会消除它。

```
 public void Form1_Paint(object sender, PaintEventArgs e)
    {
        if (original_image != null)
        {
            Graphics g = e.Graphics;
            Rectangle r = new Rectangle(10, 50, original_image.Width, original_image.Height);
            g.DrawImage(original_image, r);

        }
        if(proc_image != null)
        {
            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            e.Graphics.DrawImage(proc_image, r);
        }
    } 
```

# c# - 在 C# 中读取枚举的值

> ID：12845550
> 
> 赞同：3
> 
> 时间：2012-10-11T17:48:50.657
> 
> 标签：c#, enums

我目前正在使用 C# 中的 Enums，但遇到了一个无法解决的问题。我试图“谷歌”周围，但我没有找到任何可靠和快速的东西。

我有一个枚举，它看起来像这样：

```
public enum Test {
   Hello = 1234,
   AnotherValue = 382
} 
```

到目前为止看起来合法。现在出于测试目的，我尝试了以下操作：

```
int ToCheck = 382;
if(ToCheck == Test.Hello) { ... } // <-- that is the part which won't work. 
```

它如何看起来正确？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T17:49:44.840

```
if(ToCheck == (int)Test.Hello) 
```

或者

```
if((Test)ToCheck == Test.Hello) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:50:29.113

我正在浏览更多内容，发现它的强制转换 (int) 有效。所以解决方案是：

```
if(ToCheck == (int) Test.Hello) { ... } 
```

对不起！我希望这可以帮助任何人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T17:51:13.020

你可以试试

```
if(ToCheck == (int)Test.Hello) { ... } 
```

# mongodb - Mongodb 可伸缩集合

> ID：12845552
> 
> 赞同：2
> 
> 时间：2012-10-11T17:48:50.910
> 
> 标签：mongodb, collections, scalability

创建可扩展且具有最佳读取性能的 MongDB 集合的最佳方法是什么？以下是假设

*   一个用户每天有 100 个条目。条目对用户是私有的。
*   我们可能有 200,000 个用户。因此，每天几乎有 200 * 200,000 = 2000 万个条目。
*   用户喜欢在插入条目后立即查看条目。
*   用户喜欢搜索自己的条目，即使数据是 3 个月大。在 3 个月内，20M* 90 = 180M 条目。
*   没有更新。只插入和删除。

我们心中的选择。

*   基于用户名的分片。A .. D 在一个分片中等等。但仍然很难扩展。
*   为每个用户创建一个集合。我们知道这是一种激进的方法，但为什么不呢。我们不会对用户数据进行聚合。MongoDB中集合数量的任何限制

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:23:52.623

不幸的是，由于您可以拥有的命名空间数量（24,000） 的[限制，每个用户只能收集一个集合。](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)

我认为有几个好的方向可以走。您肯定会想要使用均匀分布的分片键 - 用户名会很好。您对其可扩展性有何担忧？

您可能需要查看[TTL](http://docs.mongodb.org/manual/tutorial/expire-data/)（生存时间）集合，以及[读取首选项](http://docs.mongodb.org/manual/applications/replication/#read-preference)以让您的应用程序从辅助节点中读取。这可以通过分配工作负载来加快查询时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:14:59.980

在 MongoDB 世界中，没有一种最好的模式设计。在 MongoDB 中，模式设计取决于应用程序将如何访问数据。

为了为 MongoDB 设计一个好的模式，您需要回答以下关键问题：

*   你有多少数据？
*   你最常见的操作是什么？您主要是插入新数据、更新现有数据还是进行查询？
*   您最常见的查询是什么？
*   您最常见的更新是什么？
*   您期望每秒执行多少次 I/O 操作？

在 MongoDB 中，您有多种选择：可以嵌入数据，可以创建链接关系，可以复制和非规范化数据，或者可以使用混合方法。

@Shelman 已经提到了“阅读偏好”，就利用辅助节点而言，这是值得一看的。

就横向扩展而言，分片似乎适合您。关于分片的[MongoDB 手册](http://docs.mongodb.org/manual/sharding/)非常广泛，涵盖了架构、基础、部署、管理和内部（如果你特别热衷的话）。我强烈推荐阅读它。但是，正如@Shelman 所说，您需要明智地选择分片键。[StackOverflow 和MongoDB Google 用户组](https://groups.google.com/forum/?fromgroups#!forum/mongodb-user)上广泛讨论了这个主题。

避免使用顺序分片键的原因之一是它会在插入时创建热点：在任何给定时间，单个分片将承担所有插入负载。您可能想要选择复合分片键。在 Google Group 上有一些很好的讨论：

*   [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/yolfc6B3JL8](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/yolfc6B3JL8)

如果您选择 { username : 1 , timestamp : 1 } 之类的东西，那么如果需要，用户的数据将被分成许多块并分布在服务器上。

这是关于选择分片键的文档的[确切链接。](http://docs.mongodb.org/manual/core/sharding-internals/#sharding-internals-shard-keys)

==============================

以下是有关 MongoDB 模式设计的一些很好的通用参考资料。

MongoDB 演示文稿：

*   [http://www.10gen.com/presentations/mongosf2011/schemabasics](http://www.10gen.com/presentations/mongosf2011/schemabasics)
*   [http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example](http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example)
*   [http://www.10gen.com/presentations/mongosf2011/schemascale](http://www.10gen.com/presentations/mongosf2011/schemascale)
*   [http://www.10gen.com/presentations/MongoNYC-2012/Building-a-MongoDB-Power-Chat-Server](http://www.10gen.com/presentations/MongoNYC-2012/Building-a-MongoDB-Power-Chat-Server)

这是一本关于 MongoDB 模式设计的书，我认为您会发现它很有用：

*   [http://www.manning.com/banker/（MongoDB](http://www.manning.com/banker/)在行动）

以下是一些示例架构设计：

*   [http://docs.mongodb.org/manual/use-cases/](http://docs.mongodb.org/manual/use-cases/)
*   [https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures](https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures)

==============================

以下是在 MongoDB 模式设计中使用“分桶”方法的一些示例：

*   [https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures](https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures)
*   [http://docs.mongodb.org/manual/use-cases/storing-comments/#hybrid-schema-design](http://docs.mongodb.org/manual/use-cases/storing-comments/#hybrid-schema-design)
*   [http://www.10gen.com/presentations/MongoNYC-2012/Building-a-MongoDB-Power-Chat-Server](http://www.10gen.com/presentations/MongoNYC-2012/Building-a-MongoDB-Power-Chat-Server) （视频 3）

==============================

最后是 MongoNYC 最近的一些分片演示：

*   [http://www.10gen.com/presentations/MongoNYC-2012/sharding-overview](http://www.10gen.com/presentations/MongoNYC-2012/sharding-overview)
*   [http://www.10gen.com/presentations/MongoNYC-2012/Sharding-Best-Practices-Advanced](http://www.10gen.com/presentations/MongoNYC-2012/Sharding-Best-Practices-Advanced)

# .net - 我可以将值从 settings.settings 文件移动到 web.config 文件吗？

> ID：12845557
> 
> 赞同：1
> 
> 时间：2012-10-11T17:49:00.037
> 
> 标签：.net, visual-studio, web-services, asmx

当我向我的 Web 项目添加对 ASMX Web 服务的 Web 引用时，它创建了一个代理，但在 settings.setting 文件中有一些设置。有没有办法将它们移动到 web.config 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:58:18.983

如果需要，您可以删除默认设置并创建一些自定义设置（也可以使用 appSettings）。这是我的一篇关于如何在 web.config 中创建自定义设置的帖子：

[C# WCF System.Configuration.ConfigurationErrorsException：无法识别的元素“ManagedService”](https://stackoverflow.com/questions/12824301/c-sharp-wcf-system-configuration-configurationerrorsexception-unrecognized-elem/12824424#12824424)

但是您必须使用代码设置服务客户端属性（读取自定义设置，设置客户端属性）。

希望这能回答你的问题。

# facebook - facebook 社交插件 - 电脑上的 chrome 浏览器问题

> ID：12845559
> 
> 赞同：0
> 
> 时间：2012-10-11T17:49:00.953
> 
> 标签：facebook, google-chrome

我正在从 facebook 实现社交插件，它似乎适用于**除 PC 上的 chrome 之外**的所有浏览器。
我使用了[来自 facebooks 网站的代码](https://developers.facebook.com/docs/reference/plugins/send/)
我也添加了这个`<html xmlns:fb="http://www.facebook.com/2008/fbml">`并添加了`window.onload = function() { FB.xfbml.parse(); }`

这是我所拥有的：

```
<!DOCTYPE HTML>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div id="fb-root"></div>
<script>
(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=306********4607";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

window.onload = function() {
        FB.xfbml.parse();
    }
</script>

<div class="fb-send" data-href="http://example.com"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:57:59.753

发现了问题。通过禁用我的扩展[断开](https://chrome.google.com/webstore/detail/disconnect/jeoacafpbcihiomhlakheieifhpjdfeo)所有社交插件现在显示没有错误

# c - 如何在 Eclipse 中显示每行字符

> ID：12845561
> 
> 赞同：1
> 
> 时间：2012-10-11T17:49:15.607
> 
> 标签：c, eclipse, coding-style, ide

Eclipse 或 CDT 中是否有显示每行代码中的字符数或突出显示超过特定长度的代码行的选项？

我在 Eclipse 3.7 上用 C 语言编程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:31:01.850

我找到了。转到 Windows -> 首选项。在对话框中选择文本编辑器，然后选中“显示打印边距”选项。这将在给定的列号处显示一个标记，可以让作者避免超过特定的行长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T19:46:04.697

在 Eclipse 中，在 IDE 的底部栏中，有一个数字，例如：1:1、19:20、50:100... 这意味着**"line:charactersInLine"**。

为了补充不超过太多行中的字符数是一个很好的做法。我在过去用很少的显示器进行编程，分辨率为 800x600，80 个字符的数量是一个不错的选择。但是现在宽屏显示器的字符数符合许多程序员的要求是每行 120 个字符。

补充@David Kaczynski 的答案：

> 我找到了。转到 Windows -> 首选项。在对话框中选择文本编辑器，然后选中“显示打印边距”选项。这将在给定的列号处显示一个标记，可以让作者避免超过特定的行长。

激活**显示行数的显示打印边距**后，您可以配置为：

```
Print margin column: 120 
```

# c# - .net 的 Phalanger 和 php 库

> ID：12845562
> 
> 赞同：3
> 
> 时间：2012-10-11T17:49:17.193
> 
> 标签：c#, php, .net, phalanger

我尝试在我的 .net 应用程序中使用三个 php 类。我使用 Phalanger 来获取这三个类并使用以下命令创建一个 .dll 文件：

```
phpc /target:dll Client.php Crypt.php Exception.php 
```

其中当然输出了 Client.dll 以及 Client.pdb 文件。

从那里我去了 VS2012 并创建了一个新的 asp.net 应用程序并添加了 Client.dll 作为参考。但是，我没有看到任何类的公共方法，并且对象浏览器窗口显示：

> Client>Client>Base Types>Object（所以我只有 Object 类型的方法）

我已经尝试过[这种](http://tomasp.net/blog/ducktyping-in-phalaner.aspx)方法/教程来使其工作，这涉及将自定义接口投射到您的对象上，但是我收到错误：

> 找不到类型或命名空间名称 ScriptContext

这当然意味着它不知道 ScriptContext 是什么或在哪里。但是本教程是从 2007 年开始的，所以我不知道它是否已经过时或者我应该从哪里获得该课程？

我发现的[另一个教程](http://www.codeproject.com/Articles/17311/Phalanger-PHP-for-NET-Introduction-for-NET-develop#5_1)同样古老。它说：

> 如果你想使用现有的 PHP 源代码（为标准解释器开发）而不需要修改，你必须使用 legacy 模式，但是当你想开发新的 PHP 项目时，你可以考虑使用 pure 模式

但是我在文档中找不到遗留模式的步骤，并且更喜欢尝试“纯”模式（这样我就不必更改/编辑我现有的 php 代码）。我确实尝试过（纯模式）但是它不会用上面的命令编译（phalanger compile）（将 DynamicObject.php 类添加到命令中）。

如何在 php 类中访问我的公共方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:39:34.333

```
phpc /target:dll Client.php Crypt.php Exception.php 
```

以传统（标准）模式创建 DLL。此 DLL 包含与 PHP 语义兼容所需的“奇怪”名称空间。（这些命名空间将代码与不同的脚本文件分开）。[Phalanger 3.0 博客文章的 .NET 互操作性概述](http://www.php-compiler.net/blog/2012/net-interoperability-overview-of-phalanger-3-0)描述了如何使用在标准模式下编译的脚本。

命令行选项`/pure+`告诉编译器创建所谓的纯模式程序集。在这种模式下，编译器连接所有源文件并将它们编译为一个（就像 C# 所做的那样），没有任何奇怪的命名空间。如果您`[\Export]`在 PHP 类声明上方指定属性，生成的 DLL 将看起来像是从 C# 代码编译的，您将能够引用它并正常使用它的类。

# objective-c - 将 CAGradient 蒙版层应用于 UITextView

> ID：12845590
> 
> 赞同：4
> 
> 时间：2012-10-11T17:50:43.280
> 
> 标签：objective-c, uitextview, cagradientlayer

我有一个 UITextView，带有可滚动的文本。我正在尝试对其应用渐变层，因此可见文本的底部总是略微淡出。

这是我的代码：

```
CAGradientLayer *maskLayer = [CAGradientLayer layer];

maskLayer.colors = [NSArray arrayWithObjects:(id)[[UIColor clearColor] CGColor], (id)[[UIColor yellowColor] CGColor], nil];
maskLayer.locations = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0],
                       [NSNumber numberWithFloat:0.2],
                       [NSNumber numberWithFloat:0.8],
                       [NSNumber numberWithFloat:1.0], nil];
maskLayer.bounds = clueTextView.bounds;
myUITextView.layer.mask = maskLayer; 
```

现在，这导致 UITextViewLayer 完全透明 - 我看到 UITextViewLayer 作为子视图的 UIView 的背景颜色。我看不到其中包含的任何文本，尽管我可以选择并复制文本以粘贴到笔记程序中。

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T18:39:49.230

你有几个问题。

渐变层的`colors`属性需要与其`locations`属性具有相同的计数。您提供 4 个位置，但仅提供 2 种颜色。

您正在设置渐变层的边界，`clueTextView`但您将其设置为`myUITextView`.

您正在设置`bounds`渐变层的 ，但不是它的`position`。默认`position`值为 0,0，表示渐变层的中心位于 的左上角`myUITextView`。`frame`将渐变层的设置`bounds`为文本视图更简单。

如果你解决了所有这些问题，你可能会得到你想要的效果。

```
- (void)initTextViewMask {
    CAGradientLayer *maskLayer = [CAGradientLayer layer];
    maskLayer.colors = @[
        (id)[UIColor whiteColor].CGColor,
        (id)[UIColor whiteColor].CGColor,
        (id)[UIColor clearColor].CGColor];
    maskLayer.locations = @[ @0.0f, @0.8f, @1.0f ];
    maskLayer.frame = textView_.bounds;
    textView_.layer.mask = maskLayer;
} 
```

但是，您可能会发现新的问题。

如果用户可以滚动文本视图，你会发现渐变随着文本视图移动，这可能不是你想要的。解决此问题的最简单方法是将文本视图嵌入到容器中`UIView`，并在容器视图上设置掩码。

如果文本视图可以改变大小（可能是由于设备旋转），遮罩不会自动改变大小。您需要更新掩码的`frame`, in`layoutSubviews`或`viewDidLayoutSubviews`.

# sql - SQL：使用断言强制基数

> ID：12845592
> 
> 赞同：5
> 
> 时间：2012-10-11T17:50:49.320
> 
> 标签：sql, constraints, assertion, cardinality

来解释图。

两个实体：E1 和 E2

基数：

- 从 E1 到 E2（通过关系 R）：（6,50）

- 从 E2 到 E1（通过关系 R）：（3,5）

```
 ______               ^              ______
|  E1  |___(6,50)____/R\____(3,5)___|  E2  |
|______|             \ /            |______|
                      v 
```

我应该强制执行基数，但本书并没有深入探讨断言细节。这是执行上述基数的正确方法吗？

```
CREATE ASSERTION assert
CHECK ( (SELECT COUNT(E1.ID) FROM E1) >= 6  AND 
        (SELECT COUNT(E1.ID) FROM E1) <= 60 AND 
        (SELECT COUNT(E2.ID) FROM E2) >= 3  AND 
        (SELECT COUNT(E2.ID) FROM E2) <= 5 ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:16:33.703

我不知道任何已实现断言的 DBMS。可以在[Mimer 在线 SQL-92 语法验证器](http://developer.mimer.com/validator/parser92/index.tml)中检查语法：

```
CREATE ASSERTION assertion_R
  CHECK ( NOT EXISTS
            ( SELECT * 
              FROM E1 
                LEFT JOIN R
                  ON R.e1_id = E1.id
              GROUP BY E1.id
              HAVING COUNT(R.e1_id) NOT BETWEEN 6 AND 60
            )
       AND NOT EXISTS
            ( SELECT * 
              FROM E2 
                LEFT JOIN R
                  ON R.e2_id = E2.id
              GROUP BY E2.id
              HAVING COUNT(R.e2_id) NOT BETWEEN 3 AND 5
            ) 
        ) ; 
```

# jquery - 如何在jQuery中选择包含调用而不是另一个的元素

> ID：12845594
> 
> 赞同：-1
> 
> 时间：2012-10-11T17:50:52.217
> 
> 标签：jquery

Ilets 假设我有以下 HTML

```
<a class='x y'>A</a>
<a class='x '>B</a>
<a class='x '>C</a>
<a class='x y'>D</a> 
```

如何在不使用循环迭代排除它们的情况下选择所有`<a>`具有类`x => jQuery('a.x')`而不是类的对象？`y`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:52:12.000

使用[`:not`](http://api.jquery.com/not-selector/)选择器或[`.not()`](http://api.jquery.com/not/)方法：

```
var elems = $("a.x:not(.y)");

//or

var elems = $("a.x").not(".y"); 
```

这是一个[工作示例](http://jsfiddle.net/CcpeC/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:54:48.393

```
var e = $("a.x").not(".y"); 
```

或者

```
 var e = $("a.x").filter(function(){

        return !$(this).hasClass("y");
  }); 
```

[jsfiddle](http://jsfiddle.net/6J5Rf/)

# linux - SSH隧道到远程服务器的问题

> ID：12845595
> 
> 赞同：3
> 
> 时间：2012-10-11T17:51:06.973
> 
> 标签：linux, ssh, ssh-tunnel

我正在尝试从我的本地计算机访问被 IP 锁定的远程供应商网站（我们的公司服务器被允许访问）。我通过从可以毫无问题地访问 API 的服务器建立隧道来做到这一点，但是，当我设置 SSH 隧道并转到供应商网站上的 URL 时，我收到 404 Not Found 错误。这是我正在使用的：

```
ssh -f -N user@example.com -L 7777:vendorhostexample.com:80 
```

一切都表明隧道设置正确，但是如果我尝试使用诸如“http://localhost:7777/foobar”之类的 URL，则会收到 404 错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:34:11.553

您的问题是您正在发送 http 标头“位置：localhost”，这意味着如果目标网络服务器使用虚拟主机，它将尝试查找网站“localhost”而不是网站“vendorhostexample.com”

一种方法是 Ryan 指出修改您的主机文件并告诉您的机器 vendorhostexample.com 它位于 127.0.0.1 上，这样当您在浏览器中键入它时，您将通过带有正确“主机：”http 标头的隧道放。

另一种方法是为您的浏览器安装扩展程序以更改 Host 标头，例如用于 Firefox的[此标头。](https://addons.mozilla.org/en-US/firefox/addon/modify-headers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:06:06.080

其他人都已经提到了域名匹配错误虚拟主机的问题。另一种解决方案是使用动态隧道。

如果您使用该`-D 8080`标志打开连接，SSH 将打开一个动态隧道，并在端口 8080 上公开一个 SOCKS 代理。如果您随后将浏览器（或您选择的应用程序）设置为在 localhost:8080 上使用 SOCKS 代理，您可以将所有流量通过隧道传输到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T08:57:27.667

您可以编辑本地主机（Linux 的 /etc/hosts）文件，并添加如下行：

```
127.0.0.1 vendorhostexample.com 
```

然后再试一次。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-11T17:54:47.603

你用这个打破了HTTP。您的浏览器在 HTTP 标头中发送主机名`localhost`，这意味着您正在请求`localhost`供应商网站的网站。他们几乎可以肯定不会`localhost`在他们的服务器上托管网站，所以你得到了 404。

你不能以你现在的方式隧道 HTTP。您需要在公司服务器上设置适当的 HTTP 代理。

# objective-c - 是否有任何适用于使用 IDFA 而不是 UDID 的 iPhone 的 Admob 下载跟踪代码？

> ID：12845597
> 
> 赞同：2
> 
> 时间：2012-10-11T17:51:09.470
> 
> 标签：objective-c, admob, udid

Admob 提供了一些跟踪代码来跟踪通过广告发送的 iPhone 应用程序的下载量。

[https://support.google.com/admob/bin/answer.py?hl=en&answer=1704628&topic=1623717&ctx=topic](https://support.google.com/admob/bin/answer.py?hl=en&answer=1704628&topic=1623717&ctx=topic)

但是，它使用 UDID 进行跟踪。有什么方法可以使用 IDFA（iOS 6 UDID 替换）而不是 UDID（因为编译器会抛出警告说 UDID 已被弃用）？

# css - 如何将 2 行与用 CSS 缩进的 2 行对齐？

> ID：12845598
> 
> 赞同：0
> 
> 时间：2012-10-11T17:51:11.460
> 
> 标签：css

假设我有两条这样的线。

```
Some Label: First element
            Second element 
```

第二行缩进，以便与第一个元素对齐。

这可以通过表格轻松完成。

```
<table>
  <tr>
    <td rowspan="2">Some Label:</td>
  </tr>
  <tr>
    <td>First element</td>
    <td>Second element</td>
  </tr>
</table> 
```

但我不想用于对齐。

```
<div>
  <span>Some Label:</span>
  First element
</div>
<div>
  Second element
</div> 
```

限制：Some Label 的长度未知。所以我不能使用硬编码宽度。

谢谢。

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:57:38.300

如果您将 HTML 更改为以下内容：

```
<div class="row">
    <div class="header">Some Label:</div>
    <div class="labels">
        <div>First element</div>
        <div>Second element</div>
        <div>Third element</div>
    </div>
</div>​ 
```

这个 CSS 可以正常工作：

```
.row {
    display: inline-block;
}

.header {
    float: left;
    margin-right: 5px;
}

.labels {
    float: right;
} 
```

**演示：http: [//jsfiddle.net/Ludww/1/](http://jsfiddle.net/Ludww/1/)**

# c# - 如何在 WebClient.DownloadFile 期间解决 C# 中的路径太长异常

> ID：12845605
> 
> 赞同：2
> 
> 时间：2012-10-11T17:51:43.217
> 
> 标签：c#, exception, webclient

当我尝试使用`webClient.DowloadFile`.

```
WebClient webClient = new WebClient();
Uri downloadUri = new Uri("http://ia.mediaimdb.com/images/M/MV5BMjA5MTE1MjQyNV5BMl5BanBnXkFtZTcwODI4NDMwNw@@._V1._SY0.jpg");            
string posterFilePath = 
           "D:\Visual Studio Projects\Projects\TFS Source Control\" +
           "MyMovieManager\MyMoviesManager\MyMoviesManager\bin\Debug\" +
           "MoviesDB\Journey.2.The.Mysterious.Island.2012.DVDRip.XviD-DEPRiVED[ExtraTorrent]\" +
           "Journey.2.The.Mysterious.Island.2012.DVDRip.XviD-DEPRiVED[ExtraTorrent].png";
webClient.DownloadFile(downloadUri, posterFilePath); 
```

我发现了其他引发此异常的情况，*我的解决方案是使用 kernel32 中的函数*并编写其他函数来替换 File 和 Path 函数。

我可以对 DownloadFile 功能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:00:13.480

您可以使用[BCL 项目中的 LongPathFile 类](http://bcl.codeplex.com/wikipage?title=Long%20Path&referringTitle=Home)，并手动写入结果流。这将需要使用[DownloadData](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)而不是`DownloadFile`，并管理自己编写的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:33:56.087

您可以将 webclient.DownloadFile 用于临时文件，即 C:\Temp\myDownload.png ，然后将其移动到您想要的路径。您将需要检查 c:\Temp 文件夹是否存在。如果没有，请创建它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-01T18:26:42.787

需要注意的一点是，如果文件的地址（第一个参数）太长，如果您使用接受 2 个字符串的函数版本，也会引发此异常。自然，解决方案是将其转换为`Uri`using `new Uri(address)`。

# python - 用于信号处理和用户管理的 Python Unix/Windows 抽象层

> ID：12845606
> 
> 赞同：4
> 
> 时间：2012-10-11T17:51:44.123
> 
> 标签：python, windows, unix, user-management, signal-handling

我想问一个问题，我广泛的网络搜索表明答案是否定的，但也许我忽略了一些东西......

是否有 Python 抽象层位于 Unix 和 Windows 信号处理（用于衍生的独立进程）和用户管理（获取用户和组条目、比较它们等）之上？

是的，我知道 Windows 和 Unix 在这两个方面根本不同，但操作系统特定的方法确实完成了类似的任务。所以创建一个抽象层似乎不是一个坏主意。

我发现最接近我正在寻找的东西，至少对于子流程管理（并且在一定程度上“发信号”那些子流程），是 python-multiprocessing，即[http://docs.python。 org/dev/library/multiprocessing.html](http://docs.python.org/dev/library/multiprocessing.html) - 这是我正在寻找的那种抽象，但它并不完全符合我的要求。

任何指向这个方向的指针？

使 Windows 上的信号处理/用户管理看起来像 Unix 或反之亦然的模块也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T17:55:02.177

Python 确实已经有一种用于信号处理的抽象，但在 Windows 上，您仅限于：

只能使用 SIGABRT、SIGFPE、SIGILL、SIGINT、SIGSEGV 或 SIGTERM 调用 signal()。在任何其他情况下都会引发 ValueError 。

用户管理是完全不同的动物：如果你想在两个平台上进行类似的处理，你必须自己编写一个包装器：

对于 Windows，请查看 win32api（例如[http://timgolden.me.uk/python/win32_how_do_i/check-a-users-credentials.html](http://timgolden.me.uk/python/win32_how_do_i/check-a-users-credentials.html)）

在 Linux/Windows 上，也没有太多用于此目的，实际上取决于身份验证方式（本地 PAM、NIS 等）有 Debian 使用的 libuser 和衍生工具，但我自己从未使用过它。（[http://linuxsoft.cern.ch/cern/slc6X/x86_64/yum/updates/repoview/libuser-python.html](http://linuxsoft.cern.ch/cern/slc6X/x86_64/yum/updates/repoview/libuser-python.html)）

# javascript - FancyBox 实现问题

> ID：12845615
> 
> 赞同：0
> 
> 时间：2012-10-11T17:52:25.883
> 
> 标签：javascript, jquery, exception-handling, fancybox

我在让 FancyBox 工作时遇到了一些问题……我认为它非常简单，但我仍然是网页设计的初学者，这个过程现在让我有点困惑。这是我到目前为止所拥有的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <!-- ******************* CSS ******************* -->
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />

    <!-- ******************* Javascript ******************* -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="./fancybox/jquery.fancybox.pack-1.3.4.js"></script>
    <script type="text/javascript" src="./fancybox/jquery.fancybox.pack-1.3.4.pack.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("a.iframe").fancybox();
        });
    </script>
</head>
<body>
    <a class="iframe" href="./iFrameFancy.html">Test FancyBox Here!</a>
</body> 
```

我得到的错误在 SO 上很受欢迎，但我已经查找了所有提到的修复程序，但还没有任何效果。这就是我得到的：

```
Uncaught TypeError: Object #<Object> has no method 'fancybox' 
```

对此的任何帮助将不胜感激！谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:56:29.163

您正在加载 fancybox 两次（正常源一个和打包一个）。还要从您的 src 属性中删除点，并确保文件在您所说的位置

所以改变这个

```
<script type="text/javascript" src="./fancybox/jquery.fancybox.pack-1.3.4.js"></script>
<script type="text/javascript" src="./fancybox/jquery.fancybox.pack-1.3.4.pack.js"></script> 
```

对此

```
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack-1.3.4.js"></script> 
```

或者只有这个

```
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack-1.3.4.pack.js"></script> 
```

但不是两者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:55:53.387

尽量不要在同一页面上包含两次 fancybox js 文件。

# php - 将照片上传到服务器/机架空间云文件 - php/codeigniter

> ID：12845616
> 
> 赞同：3
> 
> 时间：2012-10-11T17:52:26.623
> 
> 标签：php, codeigniter, rackspace-cloud

我正在使用此[存储库](https://bitbucket.org/modomg/codeigniter-rackspace-cloudfiles)将照片从我的计算机上传到服务器。当我尝试上传名为 mylogo.jpg 的文件时，我收到一条错误消息：

**无法打开文件进行阅读：/tmp/php0d4X5Ny/mylogo.jpg**

我需要弄清楚为什么我会收到这个错误。

这是我的**控制器**代码（cloudfiles.php）：

```
 public function add_local_file()
        {
                $file_location = $_FILES['userfile']['tmp_name'].'/';
                $file_name = $_FILES['userfile']['name'];

                $this->cfiles->do_object('a', $file_name, $file_location);

                $this->_show_errors('Image Added!');
        } 
```

do_object[函数在这里](https://bitbucket.org/modomg/codeigniter-rackspace-cloudfiles/src/94aca4a67aa3ed8d5f4f92d1fd104574fab22e76/application/libraries/cf/cfiles.php?at=default)（第 151 行）。这是上传**视图**：

```
<?php echo form_open_multipart('cloudfiles/add_local_file'); ?>

<input type="file" name="userfile" size="20" />

<input type="submit" value="upload" />

<?php echo form_close(); ?> 
```

我搜索了cloudfiles库，发现“could not open file for reading”错误是这个函数的异常：

```
function load_from_filename($filename, $verify=true)
    {
        $fp = @fopen($filename, "r");
        if (!$fp) {
            throw new IOException("Could not open file for reading: ".$filename);
        }

        clearstatcache();

        $size = (float) sprintf("%u", filesize($filename));
        if ($size > MAX_OBJECT_SIZE) {
            throw new SyntaxException("File size exceeds maximum object size.");
        }

        $this->_guess_content_type($filename);

        $this->write($fp, $size, $verify);
        fclose($fp);
        return True;
    } 
```

我已经看了几个小时，看不出哪里出了问题。顺便说一句，没有看到任何 php 错误，只是上面提到的一个错误。Stack Overflow 的新手（常用浏览器、新帐户），因此在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T18:06:30.063

我认为您不了解`$_FILES`数组的工作原理。文件上传后，它位于`$_FILES['userfile']['tmp_name']`并且没有它的原始名称。

如果要使用原始名称上传文件，则需要执行以下操作：

```
public function add_local_file()
{
    $file_location = '/tmp/';
    $file_name     = $_FILES['userfile']['name'];

    if(move_uploaded_file($_FILES['userfile']['tmp_name'], $file_location . $file_name)){

        $this->cfiles->do_object('a', $file_name, $file_location);

    }

    $this->_show_errors('Image Added!');
} 
```

# asp.net-mvc - 并发请求：从单个请求中删除会话 ID 后会话丢失

> ID：12845620
> 
> 赞同：0
> 
> 时间：2012-10-11T17:52:48.800
> 
> 标签：asp.net-mvc, session, web-applications, asp.net-mvc-2, session-timeout

在我的 ASP .NET MVC 2 - 应用程序中，有几个控制器需要会话状态。但是，在某些情况下，我的控制器之一运行时间很长，客户端应该能够停止它。

这是长时间运行的控制器：

```
 [SessionExpireFilter]
    [NoAsyncTimeout]
    public void ComputeAsync(...) //needs the session
    {
    }

    public ActionResult ComputeCompleted(...)
    {

    } 
```

这是停止请求的控制器：

```
 public ActionResult Stop()
    {
      ...
    } 
```

不幸的是，在 ASP .NET MVC 2 中，同一用户不可能同时请求，因此我的 Stop-Request 必须等到长时间运行的操作完成。因此，我尝试了[本文](http://weblogs.asp.net/imranbaloch/archive/2010/07/10/concurrent-requests-in-asp-net-mvc.aspx)中描述的技巧，并将以下处理程序添加到 Global.asax.cs：

```
 protected void Application_BeginRequest()
    {
        if (Request.Url.AbsoluteUri.Contains("Stop") && Request.Cookies["ASP.NET_SessionId"] != null)
        {
            var session_id = Request.Cookies["ASP.NET_SessionId"].Value;

            Request.Cookies.Remove("ASP.NET_SessionId");
            ...
        }
    } 
```

这只是从停止请求中删除会话 ID。乍一看，这很好用 - 停止请求通过并停止操作。**但是，在那之后，具有长时间运行请求的用户会话似乎已被终止。**

我使用自己的**SessionExpireFilter**来识别会话超时：

```
 public class SessionExpireFilterAttribute : ActionFilterAttribute
 {
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        HttpContext ctx = HttpContext.Current;

        // check if session is supported
        if (ctx.Session != null)
        {
            // check if a new session id was generated
            if (ctx.Session.IsNewSession)
            {

                // If it says it is a new session, but an existing cookie exists, then it must
                // have timed out
                string sessionCookie = ctx.Request.Headers["Cookie"];
                if ((null != sessionCookie) && (sessionCookie.IndexOf("ASP.NET_SessionId") >= 0))
                {

                    filterContext.Result = new JsonResult() { Data = new { success = false, timeout = true }, JsonRequestBehavior = JsonRequestBehavior.AllowGet };
                }
            }
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

调用 Stop-Request 后 ctx.Session.IsNewSession 始终为真，但我不知道为什么。有谁知道为什么会话丢失？Stop-Controller的实现是否有任何错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:01:05.167

会话丢失，因为您删除了会话 cookie。我不知道为什么这看起来不合逻辑。每个新页面请求都将 cookie 提供给 asp.net，如果没有 cookie，它会生成一个新的。

您可以使用一个选项来使用无 cookie 会话，它将向查询字符串添加一个令牌。您需要做的就是为每次登录或类似的操作生成一个新会话。

但这是不鼓励使用会话变量的原因之一。您可以更改代码以使用页内变量，或将变量存储在数据库中吗？

# ios - iOS 开发者版本无法安装在一部 iphone 4S 上

> ID：12845624
> 
> 赞同：0
> 
> 时间：2012-10-11T17:53:05.557
> 
> 标签：ios

我有一个开发人员构建，使用 iOS 6 库制作，针对 iOS 4+ 设备，它可以在 4 部不同的 iphone 和 2 部 ipad 上安装和运行。但由于某种原因，在其中一台装有 iOS 5.1.1 的 iPhone 4S 上，应用程序开始安装并卡在进度条的 50% 左右。运营商是Verizon，这款手机是今年买的。

任何人有任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:11:00.480

我建议在 XCode Organizer 屏幕中观看设备控制台。您将能够在安装过程中看到任何错误消息并确定问题所在。即使您通过 TestFlight 或其他一些机制安装，您也可以观看控制台。

如果设备在数千英里之外 :) 那么您可以让用户通过[iPhone 配置实用程序](http://support.apple.com/kb/DL1465)为您收集控制台日志。 [根据 Apple 文档](http://developer.apple.com/library/ios/#qa/qa1747/_index.html)：

> 在没有 Xcode 的情况下获得控制台输出 有时您可能必须在“现场”调试问题，或者告诉测试人员如何收集更多信息并将其发送给您。如果不能选择安装 Xcode，请下载 iPhone 配置实用程序以保存控制台输出。它适用于 Mac OS X 和 Windows。
> 
> 1) 插入设备并打开 iPhone 配置实用程序
> 
> 2）在左侧栏中选择设备下的设备
> 
> 3) 选择控制台选项卡
> 
> 4) 按窗口右下方的“将控制台另存为...”按钮导出控制台日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:54:49.440

设备的 UDID 可能不在您签名的配置文件中。

# iphone - UITableView tableView：cellForRowAtIndexPath：没有被调用

> ID：12845628
> 
> 赞同：0
> 
> 时间：2012-10-11T17:53:21.220
> 
> 标签：iphone, objective-c, ios, uitableview, ios4

我在一个视图中有 3 个表视图，我想知道为什么`tableView:cellForRowAtIndexPath:`没有被调用。

```
 #pragma mark -
 #pragma mark <UITableViewDelegate>
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
    if (tableView == self.mainVoucherTableViewController)
       [self setSelectedIndex:indexPath.row];
 }

 - (NSInteger)tableView:(UITableView *)tableView
   numberOfRowsInSection:(NSInteger)section
 {
    if (tableView == self.mainVoucherTableViewController){
  return 10;
     }
 }

- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
    if (tableView == self.mainVoucherTableViewController){
    static NSString *MyIdentifier = @"MyReuseIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:MyIdentifier];
    }

    cell.textLabel.text = @"THISTEXT";
    return cell;
   }
}

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

 if (tableView == self.mainVoucherTableViewController)
     return 1;
 }

 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
// The header for the section is the region name -- get this from the region at the section index.
if (tableView == self.mainVoucherTableViewController){
    NSString * myString = [NSString stringWithFormat:@"HELLLO WORLD"];
    return myString;
  }
} 
```

有人知道这是为什么吗？基本上这不会创建任何单元格或显示单元格。它只显示表格视图。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:45:00.200

只是为了巩固上面的一些事情：

1.  根据您的命名，您的 tableView 称为 mainVoucherTableViewController - 只是想确认这确实是 UITableView 而不是 UITableViewController？如果它是 UITableViewController，那么由于明显的原因（或不那么明显 - 让我知道并可以进一步解释），其余部分将不起作用

2.  确保您已将当前 viewController 设置为 tableView 的委托和数据源，如果您使用的是 XIB，则使用下面的代码或在 Interface Builder 中

    ```
    self.mainVoucherTableViewController.delegate = self;
    self.mainVoucherTableViewController.dataSource = self; 
    ```

3.  确保您的 numberOfRowsInSection 函数被调用并且您返回非零（放入 NSLogs 等）并对 numberOfSections 执行相同操作（实际上，如果您只使用 1 个部分，则不需要 numberOfSections） - 请参阅UITableViewDataSource 协议参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

4.  根据上一篇文章，在开始时记录您的 cellForRow （如果点 #1-3 已检查并正常工作）以确保它已被触发，并且在返回之前。还要对您返回的单元格进行 NSLog 以确保它不是零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:18:34.280

首先登录你的`tableView:cellForRowAtIndexPath:`方法，看看它是否在你的 if 语句之外以及内部被调用，以帮助缩小问题。

也尝试而不是比较您的：

```
tableView == self.mainVoucherTableViewController 
```

将 tableViews 设置为具有标记值。然后你可以这样做：

```
if(tableView.tag == 100){ // tag number we assigned self.mainVoucherTableViewController via IB
    //do your stuff here
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-29T10:44:24.620

实例声明的顺序确实很重要。例如，如果您有一个名为的 ivar `tableView`：

**错误的**

```
self.tableView.delegate = self;
self.tableView = [UITableView alloc] init]; 
```

**正确的**

```
self.tableView = [UITableView alloc] init];
self.tableView.delegate = self; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T11:48:12.243

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
     if (tableView == self.mainVoucherTableViewController)
    {
       return 10;
     }
      else
     {retun 5;
     }
   } 
```

它在第一个表中显示 10 行，第二个表显示 5 行。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-04-29T06:22:26.267

检查 UITableView 对象帧大小。也许帧大小不足以绘制单元格。

# c# - 为什么我在连接到网络的流上使用读取功能得到不一致的结果？

> ID：12845630
> 
> 赞同：1
> 
> 时间：2012-10-11T17:53:22.113
> 
> 标签：c#, networking, stream

我正在使用一个简单的功能：-

```
while((br.Read(downbuffer, 0, downbuffer.Length)>0)
{
    //Write the data in downbuffer to a file.
} 
```

虽然它适用于文件（在 zip 文件下载中多次测试 - [http://citylan.dl.sourceforge.net/project/cric-scoreslive/v8.5-Live%20Cricket%20Scores%20Desktop%20App.zip](http://citylan.dl.sourceforge.net/project/cric-scoreslive/v8.5-Live%20Cricket%20Scores%20Desktop%20App.zip) )，当链接指向 HTML 文件时它不起作用（在[http://www.mediafire.com/?rc3kj22p1tb4vi9](http://www.mediafire.com/?rc3kj22p1tb4vi9)上测试）。使用后面的链接，它只下载和写入大约 1 KB 的数据，而页面约为 60 KB。如果它与没有被刷新或任何事情有关，想知道它是如何处理文件下载的？相关代码是这样的：-（在单独的线程中运行）-

```
wreq = (HttpWebRequest)WebRequest.Create(uri);
wres = wreq.GetResponse();
fs = new FileStream(totalpath, FileMode.Create);
bw = new BinaryWriter(fs);
br = new BinaryReader(wres.GetResponseStream());
while((onecount=br.Read(downbuffer, 0, downbuffer.Length)>0)
{
    bw.Write(downbuffer, 0, onecount);
    totalcount += onecount;
} 
```

totalpath 指向一个文件，没什么特别的。下缓冲大小为 20 KB，我的网速约为 60 kBps(512kbps)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:00:31.373

您可以通过避免它来解决整个问题：

```
using (var client = new WebClient())
{
    client.DownloadFile(uri, totalpath);
} 
```

# node.js - Node.js 加密签名者不会生成签名

> ID：12845633
> 
> 赞同：2
> 
> 时间：2012-10-11T17:53:34.213
> 
> 标签：node.js, cryptography

我有以下代码：

```
var crypto = require("crypto");
var fs = require("fs");
var path = require("path");

var signer = crypto.createSign("sha1");
signer.update("abc123");
var key = fs.readFileSync(path.join(__dirname,"sign.key"),"utf8");
var sig = signer.sign(key,"hex"); 
```

我尝试过使用“sha1”、“sha”、“sha256”（这是我想要的）和“RSA-SHA256”。无论我做什么，“signer.sign”调用总是返回一个空字符串。

我还在 2 台不同的机器（OSX 和 Linux）上尝试了所有这些

私钥的格式为： -----BEGIN RSA PRIVATE KEY----- -----END RSA PRIVATE KEY----- 我知道这是正确的，因为我已经成功测试了另一个系统

关于我可能做错的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:11:14.460

好的，我找到了答案，所以我将在这里回答自己以防万一有人看到它。

似乎**证书**文件**必须****保存**为**ASCII**。_

即使您将 ascii 指定为编码，它仍然不起作用。

我不确定这是为什么，因为我希望 V8 将所有字符串标准化为相同的编码（UTF-8？），但显然不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T17:28:53.110

我认为你可以这样做：

```
var key = fs.readFileSync(path.join(__dirname,"sign.key"),"binary"); 
```

希望它有效。

# java - StringBuilder ArrayIndexOutOfBoundsException

> ID：12845634
> 
> 赞同：0
> 
> 时间：2012-10-11T17:53:38.600
> 
> 标签：java, logging, stringbuilder

```
public class Log {

    private static StringBuilder log = new StringBuilder();

    private static StringBuilder getLog() {

        return log;

    }

    public static void addToLog(String id, String name, String field, String operator, String value, String bValue) {

        Calendar calendar = Calendar.getInstance();
        String currentTime = formatter.format(calendar.getTime());
        getLog().append(currentTime); // line 114

    }

} 
```

堆栈跟踪：

```
[java] Exception in thread "Thread-5" java.lang.ArrayIndexOutOfBoundsException 
[java]     at java.lang.String.getChars(String.java:863) 
[java]     at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:416) 
[java]     at java.lang.StringBuilder.append(StringBuilder.java:132) 
[java]     at com.retroficiency.system.Log.addToMatchingLog(Log.java:114) 
```

这种方法通常可以正常工作，但我们遇到了这个随机错误，我不知道为什么。有一个单独的方法可以将日志刷新到文件并使用以下命令清除它：

```
getLog().delete(0, getMatchingLog().length()); 
```

我不认为这是一个Java错误？是不是太长了？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T17:55:37.800

StringBuilder 不是线程安全的。在这种情况下，您应该使用 StringBuffer。

您可以在其他 SO 线程中找到更多信息：

[StringBuilder 和 StringBuffer 的区别](https://stackoverflow.com/questions/355089/stringbuilder-and-stringbuffer-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T17:56:04.717

没有理由会发生这种情况，除非您从不同的线程访问此方法：`StringBuilder`不是线程安全的。您可以使用`StringBuffer`线程安全的 a 或添加某种形式的同步。

[爪哇文档](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)：

> StringBuilder 的实例对于多线程使用是不安全的。如果需要这种同步，则建议使用 StringBuffer。

# javascript - jQuery getJSON 语法错误

> ID：12845635
> 
> 赞同：0
> 
> 时间：2012-10-11T17:53:46.367
> 
> 标签：javascript, ajax, jquery

我正在尝试使用 jQuery 的`$.getJSON()`函数进行服务器端 AJAX 调用：

```
$.getJSON() {
    url: "/my-server/some-url",
    success: function() {
        alert("Success!");
    }
} 
```

Firebug 将此显示为 JavaScript 错误：

```
SyntaxError: missing ; before statement
[Break On This Error]   

$.getJSON() { 
```

在阅读本[教程](http://api.jquery.com/jQuery.getJSON/)时，我似乎正确地使用了它，传入了一个 URL，然后是一个成功回调。这个特定的 URL 不需要任何数据参数，所以我省略了它们。谁能发现我要去哪里？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T17:55:18.600

你想调用一个函数，使用[getJSON 参数](http://api.jquery.com/jQuery.getJSON/)：

```
$.getJSON("/my-server/some-url", function(data) {
        alert("Success!");
}); 
```

或者使用[$.ajax](http://api.jquery.com/jQuery.ajax/)传递一个对象：

```
$.ajax({
    url : "/my-server/some-url",
    dataType : 'json',
    success : function(data) {
            alert("Success!");
    }
}); 
```

要传递数据（例如`{ dog: 1, cat: 4 }`将转换为 URL 参数），您可以将对象直接传递给这两个函数：

```
$.getJSON("/my-server/some-url", { dog : 1, cat : 4 }, function(data) {
        alert("Success!");
});
// Or
$.ajax({
    url : "/my-server/some-url",
    dataType : 'json',
    data : { dog : 1, cat : 4 },
    success : function(data) {
            alert("Success!");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:57:16.753

你的代码是错误的。试试这个：

```
$.getJSON("/my-server/some-url",function() {
         alert("Success!");
     }
}); 
```

您的代码更接近该`$.ajax`方法。

```
$.ajax({
    url: "/my-server/some-url",
    success: function() {
        alert("Success!");
    }
}); 
```

**编辑：**

您还可以使用参数传递 URL`data`参数。

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

> 发送到服务器的数据作为查询字符串附加到 URL。如果 data 参数的值是一个对象（地图），它会在附加到 URL 之前转换为字符串并进行 url 编码。

```
$.getJSON("/my-server/some-url",{ dog: 1, cat: 4 },function() {
         alert("Success!");
     }
});

// Requests: "/my-server/some-url?dog=1&cat=4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:00:16.660

您没有使用正确的语法。$.getJSON 是一个带参数的函数。第一个参数是强制性的，它是一个包含 url 的字符串。

```
$.getJSON(
    "/my-server/some-url", 
    data,
    function(callback) { 
        alert('success')
    }
); 
```

$.getJSON 是 $.ajax 的快捷方式，与您编写的类似。$.ajax 将单个对象作为参数..

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

来源：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:57:34.807

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

```
$.getJson('url', function(data) {
   //do stuff with data
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T17:58:40.893

[`.getJSON`](http://api.jquery.com/jQuery.getJSON/)函数是函数[`.ajax`](http://api.jquery.com/jQuery.ajax/)的简写

> jQuery.getJSON( url [, data] [, success(data, textStatus, jqXHR)] )

```
$.getJSON("/my-server/some-url", function() {
  //Success
  alert("success");
}); 
```

# delphi - Borland Teamsource - 打破管理员锁定

> ID：12845636
> 
> 赞同：0
> 
> 时间：2012-10-11T17:53:51.983
> 
> 标签：delphi

我在一家使用 Delphi 进行胖客户端开发的商店工作，并使用 Borland 的 Teamsource 产品来管理源代码等。我们有几个例子，开发人员对 Teamsource 项目进行了管理锁定（从而阻止其他任何人只要锁存在就检查更改）然后离开公司去更环保（希望更现代）的气候，留下管理员锁。我们处理这个问题的方法是创建一个新项目，复制适当的文件，然后继续，但我希望那里有人可以提出一种清除管理员锁定的方法。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-27T01:24:31.813

这个问题很老了，但没有人回答，你可能仍然被恐龙困住，我正在介入。解决方案非常简单。只需在打开项目之前删除锁定文件，TeamSource 将愉快地重新创建一个新的锁定文件，没有任何限制。在项目文件夹中查找 Locks\lockinfo.dat。

# bash - 如何更改 bash 中 printf 命令中的小数点分隔符？

> ID：12845638
> 
> 赞同：24
> 
> 时间：2012-10-11T17:53:54.980
> 
> 标签：bash, printf, locale

我使用 Cygwin 的意大利语本地化，因此我的 printf 命令使用逗号分隔浮点数，并且无法理解点分隔的浮点数

```
$ printf "%f" 3.1415
-bash: printf: 3.1415: invalid number
0,000000

$ printf "%f" 3,1415
3,141500 
```

这引起了几个问题，因为基本上其他所有内容都使用点来分隔十进制数字。

如何将小数点分隔符从逗号更改为点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-11T17:53:54.980

有几个局部变量可以控制 Cygwin（或任何 bash shell）的本地化。`locale`您可以使用该命令查看它们及其值。您应该看到如下内容：

```
$ locale
LANG=it_IT.UTF-8
LC_CTYPE="it_IT.UTF-8"
LC_NUMERIC="it_IT.UTF-8"
LC_TIME="it_IT.UTF-8"
LC_COLLATE="it_IT.UTF-8"
LC_MONETARY="it_IT.UTF-8"
LC_MESSAGES="it_IT.UTF-8"
LC_ALL= 
```

您可以使用 来查看变量的可能值`locale -va`。它们都被格式化为`<language>_<nation>.UTF-8`. 该`UTF-8`部分是可选的。

为了切换到“北美”浮动分离样式，只需设置`LC_NUMERIC`其美国值：

```
$ export LC_NUMERIC="en_US.UTF-8" 
```

简单地将变量设置`LC_NUMERIC`为常规变量是行不通的。您需要使用导出命令。

`~/.bashrc`您可以将其放在脚本的标题中，也可以通过将其添加到您或您的`~/.bash_profile`文件中来使其永久化。

希望这有帮助！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-12T11:22:18.173

如果您不想弄乱系统配置，您可以尊重您的语言环境，但请确保您的脚本使用点作为小数：

```
$ printf "%f" 3.5
-bash: printf: 3,5: invalid number
0.000000

$ LANG=C printf "%f" 3.5
3.500000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-24T09:55:01.563

采用：

```
$ VAR=3,1415
$ echo ${VAR/,/.}

3.1415 
```

或者

```
$ VAR=${VAR/,/.}
$ echo $VAR

3.1415 
```

另一个例子：

```
VAR=$(echo "scale=1; $NUMBER/60" | bc)
VAR=${VAR/./,}

$ VAR=$(echo "scale=1; 150/60" | bc);echo $VAR

2.5

$ VAR=$(echo "scale=1; 150/60" | bc); VAR=${VAR/./,};echo $VAR

2,5 
```

# database - 在 R 中访问 SQLite 数据库

> ID：12845639
> 
> 赞同：-1
> 
> 时间：2012-10-11T17:53:57.570
> 
> 标签：database, r, sqlite

我想在 R 中访问和操作一个大型数据集。由于它是一个大型 CSV 文件（~0.5 GB），我计划将它导入
SQLite，然后从 R 中访问它。我知道`sqldf`和`RSQLite`包可以做到这一点，但我去了他们的手册，他们没有帮助。成为 SQL 的新手也无济于事。

我想知道我是否必须将 R 目录设置为 SQLite，然后从那里开始？那么我如何在 R 中读取数据库？哎呀，如果您知道如何在不使用 SQL 的情况下从 R 访问数据库，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T18:03:30.567

这真的很简单——sqlite db 文件的路径和文件名作为“数据库”参数传递。这是蔓越莓所做的：

```
databasefile <- "/home/edd/cranberries/cranberries.sqlite"

## ...

## main worker function
dailyUpdate <- function() {
    stopifnot(all.equal(system("fping cran.r-project.org", intern=TRUE), 
                        "cran.r-project.org is alive"))
    setwd("/home/edd/cranberries")
    dbcon <- dbConnect(dbDriver("SQLite"), dbname = databasefile)
    repos <- dbGetQuery(dbcon, 
                        paste("select max(id) as id, desc, url ",
                              "from repos where desc!='omegahat' group by desc")
    # ... 
```

这就是全部。当然，后面还有其他疑问……

在从 R 尝试或直接从 R 尝试之前，您可以轻松地在 sqlite 客户端中测试所有 SQL 查询。

***编辑：***由于上面显然太简洁了，这里是一个直接来自文档的例子：

```
con <- dbConnect(SQLite(), ":memory:")         ## in-memory, replace with file
data(USArrests)
dbWriteTable(con, "arrests", USArrests)

res <- dbSendQuery(con, "SELECT * from arrests")
data <- fetch(res, n = 2)
data

dbClearResult(res)
dbGetQuery(con, "SELECT * from arrests limit 3") 
```

# java - java.lang.NullPointerException 第 53 行

> ID：12845645
> 
> 赞同：0
> 
> 时间：2012-10-11T17:54:02.763
> 
> 标签：java, android, eclipse, nullpointerexception

我不断收到空指针异常错误，但我不确定如何修复它。下面是我的日志猫。我认为错误在 Second.java 的第 53 行。日志猫信息下方是我的 Second.java 文件中的代码。感谢任何人在修复此错误时提供的任何帮助。

```
10-11 13:39:10.340: E/AndroidRuntime(7905): FATAL EXCEPTION: main
10-11 13:39:10.340: E/AndroidRuntime(7905): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ebonybutler.cammct/com.ebonybutler.cammct.Second}: java.lang.NullPointerException
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1702)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1722)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.ActivityThread.access$1500(ActivityThread.java:124)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:974)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.os.Looper.loop(Looper.java:130)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.ActivityThread.main(ActivityThread.java:3821)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at java.lang.reflect.Method.invokeNative(Native Method)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at java.lang.reflect.Method.invoke(Method.java:507)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at dalvik.system.NativeStart.main(Native Method)
10-11 13:39:10.340: E/AndroidRuntime(7905): Caused by: java.lang.NullPointerException
10-11 13:39:10.340: E/AndroidRuntime(7905):     at com.ebonybutler.cammct.Second.onCreate(Second.java:53)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-11 13:39:10.340: E/AndroidRuntime(7905):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1666)
10-11 13:39:10.340: E/AndroidRuntime(7905):     ... 11 more 
```

这是我的代码：

```
package com.ebonybutler.cammct;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.res.TypedArray;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.net.Uri;
import android.provider.MediaStore;

public class Second extends Activity {

//variable for selection intent
private final int PICKER = 1;
//variable to store the currently selected image
private int currentPic = 0;
//adapter for gallery view
private PicAdapter imgAdapt;     
//gallery object
private Gallery picGallery;
//image view for larger display
private ImageView picView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //get the large image view
    picView = (ImageView) findViewById(R.id.picture);

    //get the gallery view
    picGallery = (Gallery) findViewById(R.id.gallery);

    //create a new adapter
    imgAdapt = new PicAdapter(this);
    //set the gallery adapter
    picGallery.setAdapter(imgAdapt);

    //set long click listener for each gallery thumbnail item
    picGallery.setOnItemLongClickListener(new OnItemLongClickListener()
    {
        //handle long clicks
        public boolean onItemLongClick(AdapterView<?> parent, View v,
                int position, long id) {
            //update the currently selected position so that we assign the imported bitmap to correct item
            currentPic = position;
            //take the user to their chosen image selection app (gallery or file manager)
            Intent pickIntent = new Intent();
            pickIntent.setType("image/*");
            pickIntent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(pickIntent, "Select Picture"), PICKER);
            return true;
        }
    });

    //set the click listener for each item in the thumbnail gallery
    picGallery.setOnItemClickListener(new OnItemClickListener() {
        //handles clicks
        public void onItemClick(AdapterView<?> parent, View v, int
                position, long id) {
            //set the larger image view to display the chosen bitmap calling method of adapter class
            picView.setImageBitmap(imgAdapt.getPic(position));
        }
    });
}

    //Base Adapter subclass creates Gallery view

        public class PicAdapter extends BaseAdapter {

            //use the default gallery background image
            int defaultItemBackground;
            //gallery context
            private Context galleryContext;
            //array to store bitmaps to display
            private Bitmap[] imageBitmaps;
            //place holder bitmap for empty spaces in gallery
            Bitmap placeholder;

            //constructor
            public PicAdapter(Context c){
                //instantiate context
                galleryContext = c;
                //create bitmap array
                imageBitmaps = new Bitmap[10];
                //decode the place holder image
                placeholder = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
                //more processing

                //set place holder as all thumb nail images in the gallery initially
                for(int i=0; i<imageBitmaps.length; i++)
                    imageBitmaps[i]= placeholder;

                //get the styling attributes - use default Android system resources
                TypedArray styleAttrs = galleryContext.obtainStyledAttributes(R.styleable.PicGallery);
                //get the background resource
                defaultItemBackground = styleAttrs.getResourceId(R.styleable.PicGallery_android_galleryItemBackground, 0);
                //recycle attributes
                styleAttrs.recycle();

            }

            //BaseAdapter methods

        //return number of data items i.e. bitmap images
        public int getCount() {
        return imageBitmaps.length;
        }
        //return item t specified position
        public Object getItem(int position) {
            return position;
        }

        //return item ID at specified position
        public long getItemId(int position) {
            return position;
        }

        //get view specifies layout and display options for each thumb nail in the gallery
        public View getView(int position, View convertView, ViewGroup parent) {
            //create the view
            ImageView imageView = new ImageView(galleryContext);
            //specify the bitmap at this position in the array
            imageView.setImageBitmap(imageBitmaps[position]);
            //set layout options
            imageView.setLayoutParams(new Gallery.LayoutParams(300, 200));
            //scale type within view area
            imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            //set default gallery item background
            imageView.setBackgroundResource(defaultItemBackground);
            //return the view
            return imageView;
        }

        //custom methods for this app
        //helper method to add a bitmap to the gallery when the user choose one

        public void addPic(Bitmap newPic)
        {
            //set at currently selected index
            imageBitmaps[currentPic] = newPic;
        }

        //return bitmap at specified position for larger display
        public Bitmap getPic(int posn)
        {
            //return bitmap at posn index
            return imageBitmaps[posn];
        }
        }
        //Handle returning from gallery or file manager image selection

        protected void onActivityResult(int requestCode, int resultCode, Intent data) {

            if(resultCode == RESULT_OK) {
                //check if we are returning from picture selection
                if(requestCode == PICKER) {

                    //the returned picture URI
                    Uri pickedUri = data.getData();

                    //declare the bitmap
                    Bitmap pic = null;
                    //declare the path string
                    String imgPath = "";

                    //retrieve the string using media data
                    String[] medData = { MediaStore.Images.Media.DATA };
                    //query the data
                    Cursor picCursor = managedQuery(pickedUri, medData, null, null, null);
                    if(picCursor!=null)
                    {
                        //get the path string
                        int index = picCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                        picCursor.moveToFirst();
                        imgPath = picCursor.getString(index);
                    }
                    else
                        imgPath = pickedUri.getPath();

                    //if and ese handle both choosing from gallery and from file manager

                    //if we have a new URI attempt to decode the image itmap
                    if(pickedUri!=null) {

                        //set the width and height we want to use as maximum display
                        int targetWidth = 600;
                        int targetHeight = 400;

                        //sample the incoming image to save on memory resources

                        //create bitmap options to calculate and use sample size
                        BitmapFactory.Options bmpOptions = new BitmapFactory.Options();

                        //first decode image dimensions only - not the image bitmap itself
                        bmpOptions.inJustDecodeBounds = true;
                        BitmapFactory.decodeFile(imgPath, bmpOptions);

                        //work out what the sample size should be

                        //image width and height before sampling
                        int currHeight = bmpOptions.outHeight;
                        int currWidth = bmpOptions.outWidth;

                        //variable to store new sample size
                        int sampleSize = 1;

                        //calculate the sample size if the existing size is larger than target size

                        if (currHeight>targetHeight || currWidth>targetWidth)
                        {
                            //use either width of height
                            if (currWidth>currHeight)
                                sampleSize = Math.round((float)currHeight/(float)targetHeight);
                                else
                                    sampleSize = Math.round((float)currWidth/(float)targetWidth);

                        }
                        //use the new sample size
                        bmpOptions.inSampleSize = sampleSize;

                        //now decode the bitmap using sample options
                        bmpOptions.inJustDecodeBounds = false;

                        //get the file as a bitmap
                        pic = BitmapFactory.decodeFile(imgPath, bmpOptions);

                        //pass bitmap to ImageAdapter to add to array
                        imgAdapt.addPic(pic);
                        //redraw the gallery thumbnails to reflect the new addition
                        picGallery.setAdapter(imgAdapt);

                        //display the newly selected image at larger size
                        picView.setImageBitmap(pic);
                        //scale options
                        picView.setScaleType(ImageView.ScaleType.FIT_CENTER);

                    }
                }
            }
            //superclass method
            super.onActivityResult(requestCode, resultCode, data);
        }
} 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" 
 android:orientation="vertical">

<TextView android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:padding="5dp"
   android:text="@string/select_intro"
   android:gravity="center"
   android:textStyle="bold"/>

<Gallery
   android:id="@+id/gallery"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" />

<TextView android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:gravity="center"
   android:padding="5dp"
   android:textStyle="italic"
   android:text="@string/show_intro"/>

<ImageView 
   android:id="@+id/picture"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:contentDescription="@string/picture"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:57:33.590

第 53 行是：

```
picGallery.setAdapter(imgAdapt); 
```

所以检查返回的内容

```
picGallery = (Gallery) findViewById(R.id.gallery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:02:36.950

您是否尝试调试它？在 Eclipse 中尝试调试模式并在第 53 行放置一个断点。

在第 53 行，您似乎有：

```
picGallery.setAdapter(imgAdapt); 
```

现在，如果 picGallery 为空，则无法调用 set 操作。所以你可能想检查一下。

```
if (picGallery == null) {
// do something useful, perhaps set it? I'm not familiar with android
} 
```

现在从外观上看 picGallery 应该更早设置。

```
picGallery = (Gallery) findViewById(R.id.gallery); 
```

可能想看看为什么 findViewById 返回 null。

# ruby-on-rails - # 未定义的方法 `to_f'

> ID：12845647
> 
> 赞同：0
> 
> 时间：2012-10-11T17:54:28.363
> 
> 标签：ruby-on-rails, ruby

我正在尝试构建一个呼叫跟踪应用程序作为学习 rails 和 twilio 的一种方式。现在，我想做的是制作一个图表，显示特定电话每天接到的电话数量。

我的数据结构的设置方式是电话模型 has_many 调用。

在我的手机模型中，我有

```
def total_on(date)
  self.calls.where("placed_at >= ? AND placed_at <= ?", date.beginning_of_day, date.end_of_day)
end 
```

在我看来，我有以下 javascript ：

```
<script type="text/javascript" charset="utf-8">
  $(function () {
    new Highcharts.Chart({
      chart: { renderTo: 'calls_chart' },
      title: { text: 'Calls Per Day' },
      xAxis: { type: 'datetime' },
      yAxis: {
        title: { text: ' Calls'}
      },
      series: [{
        name: "<%= @phone.name %>",
        pointInterval: <%= 6.days * 1000 %>,
        pointStart: <%= 1.month.ago.at_midnight.to_i * 1000 %>,
        data: <%= (1.month.ago.to_date..Date.today).map { |date| @phone.total_on(date).to_f}.inspect %>
      }]
    });
  }); 
```

重要的部分是数据：

```
<%= (1.month.ago.to_date..Date.today).map { |date| @phone.total_on(date).to_f}.inspect %> 
```

当我尝试每天为通话放置数据时，出现错误

```
undefined method `to_f' for #<ActiveRecord::Relation:0x472d0a0> 
```

老实说，我不确定我是否在这里做任何事情。一个 stackoverflower 同事帮助我制作了上面提到的实例方法，所以我假设这比我写的要好得多。

那么，我需要进行哪些更改才能在视图中调用特定日期拨打的电话数量？

**更新**

在 Zack 的回答之后，我现在得到了错误

```
SQLite3::SQLException: no such column: calls.placed_at: SELECT COUNT(*) FROM "calls"  WHERE "calls"."phone_id" = 44 AND ("calls"."placed_at" BETWEEN '2012-09-11 00:00:00.000000' AND '2012-09-11 23:59:59.999999') 
```

可能我混淆了我所拥有的联想或其他东西。以下是具有数据结构的模型，如果它们有帮助的话——

手机型号

```
# == Schema Information
#
# Table name: phones
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  twilio_number   :integer
#  original_number :integer
#  user_id         :integer
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#

class Phone < ActiveRecord::Base

  attr_accessible :original_number, :user_id, :name, :twilio_number
  belongs_to :user
  has_many :calls, dependent: :destroy

  validates :name, presence: true
  validates :twilio_number, presence: true
  validates :original_number, presence: true
  validates :user_id, presence: true

  default_scope order: 'phones.created_at DESC'

  validate :check_phone_limit, :on => :create

  def check_phone_limit
    if User.find(self.user_id).at_max_phone_limit?
      self.errors[:base] << "Cannot add any more phones"
    end
  end

  def original_number=(value)
    num = value.to_s.gsub(/[^0-9+]/, "")
    write_attribute(:original_number, num.to_i)
  end

def total_on(date)
  self.calls.where(placed_at: date.beginning_of_day..date.end_of_day).count
end

end 
```

调用模型

```
# == Schema Information
#
# Table name: calls
#
#  id               :integer          not null, primary key
#  AccountSid       :string(255)
#  From             :string(255)
#  To               :string(255)
#  CallStatus       :string(255)
#  ApiVersion       :string(255)
#  Direction        :string(255)
#  FromCity         :string(255)
#  FromState        :string(255)
#  FromZip          :string(255)
#  FromCountry      :string(255)
#  ToCity           :string(255)
#  ToState          :string(255)
#  ToZip            :string(255)
#  ToCountry        :string(255)
#  CallSid          :string(255)
#  DialCallSid      :string(255)
#  DialCallDuration :string(255)
#  DialCallStatus   :string(255)
#  RecordingUrl     :string(255)
#  phone_id         :integer
#  DialCallMinutes  :integer
#  created_at       :datetime
#  updated_at       :datetime
#

class Call < ActiveRecord::Base
  attr_accessible :AccountSid, :From, :To, :CallStatus, :ApiVersion, :Direction, :FromCity, :FromState, :FromZip, :FromCountry, :ToCity, :ToState, :ToZip, :ToCountry, :CallSid, :DialCallSid, :DialCallDuration, :DialCallStatus, :RecordingUrl, :DialCallMinutes
  belongs_to :phone

  def self.create_from_incoming_call(params)

   user_phone = Phone.find_by_twilio_number(params['To']) #Finds the phone number in the database based on what phone Twilio is calling

    twilio_request_params = {
      :CallSid => params['CallSid'],
      :AccountSid => params['AccountSid'],
      :From => params['From'],
      :To => params['To'],
      :CallStatus => params['CallStatus'],
      :ApiVersion => params['ApiVersion'],
      :Direction => params['Direction'],
        :FromCity => params['FromCity'],
        :FromState => params['FromState'],
      :FromZip => params['FromZip'],
      :FromCountry => params['FromCountry'],
      :ToCity => params['ToCity'],
      :ToState => params['ToState'],
      :ToZip => params['ToZip'],
      :ToCountry => params['ToCountry']

    }

    call = Call.new(twilio_request_params)
    call.save  
    return call

  end

  def Call.update_dial_call(params)

    twilio_request_params = {
        :DialCallSid => params['DialCallSid'],
        :DialCallDuration => params['DialCallDuration'],
        :DialCallStatus => params['DialCallStatus'],
        :RecordingUrl => params['RecordingUrl'],
      :DialCallMinutes => (params['DialCallDuration'].to_f/60.to_f).ceil
    }

    call = Call.where( :CallSid => params['CallSid'] ).first
    call.update_attributes twilio_request_params
    call.save

  end

end 
```

电话秀动作

```
 def show
  @user = current_user
  @phone = Phone.find_by_id(params[:id])
  @calls = @phone.calls.paginate(page: params[:page])
  end 
```

并且，视图中的 javascript（为了便于阅读而重复）

```
<script type="text/javascript" charset="utf-8">
  $(function () {
    new Highcharts.Chart({
      chart: { renderTo: 'calls_chart' },
      title: { text: 'Calls Per Day' },
      xAxis: { type: 'datetime' },
      yAxis: {
        title: { text: ' Calls'}
      },
      series: [{
        name: "<%= @phone.name %>",
        pointInterval: <%= 6.days * 1000 %>,
        pointStart: <%= 1.month.ago.at_midnight.to_i * 1000 %>,
        data: <%= (1.month.ago.to_date..Date.today).map { |date| @phone.total_on(date).to_f}.inspect %>
      }]
    });
  });
</script 
```

>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:00:03.123

您的`total_on`方法返回的是关联，而不是数字。

尝试附加`.count`：

```
def total_on(date)
  calls.where("placed_at >= ? AND placed_at <= ?", date.beginning_of_day, date.end_of_day).count
end 
```

您还可以给它一个日期范围以稍微缩短方法（实际上相同，但更易于阅读）：

```
def total_on(date)
  calls.where(placed_at: date.beginning_of_day..date.end_of_day).count
end 
```

**更新：**

原始的“placed_at”查询是否有效，或者因为`NoMethodError`?

您的模型中似乎没有`placed_at`列，但我认为您也可以使用`created_at`。

如果你想使用`placed_at`，你可以定义这个方法（我把名字改成了`placed_on`for style）：

```
class Call < ActiveRecord::Base

  def self.placed_on(date)
    where(created_at: date.beginning_of_day..date.end_of_day)
  end

end 
```

您可以将其链接到您的`total_on`方法中：

```
class Phone < ActiveRecord::Base

  def total_on(date)
    calls.placed_on(date).count
  end

end 
```

# php - 替换出现在第 2 次和第 3 次破折号之后的字符

> ID：12845653
> 
> 赞同：1
> 
> 时间：2012-10-11T17:54:48.877
> 
> 标签：php, string

我有以下模式的字符串。

```
A-B-C-D
A-AB-C-DP
AQ-B-MN-QD 
```

等等。该模式遵循相同的规则，每个字符串都有 4 组字母，由破折号分隔。但是字符串可能有一个组，上面有一个或两个字母的任意组合。

现在我想做的是替换第二个和第三个破折号之后的字母。

如果组中的字母一致，我会更容易使用`strpos`和`substr`功能来做到这一点。但是这里的字母在一个组中并不一致。在这种情况下如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:57:57.677

我会将字符串分解为一个数组，对其进行处理并内爆回一个字符串：

```
$a = explode('-', $string);
// do stuf on element 2 and 3
$string = implode('-', $a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T17:59:46.813

$字符串 = abcd;

list($a,$b,$c,$d) = explode("-",$string);

然后，您可以从那里连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:06:22.597

正则表达式的方式。尝试用你`$2`的`$3`价值替换

```
# replace $2, $3 with the value that you want
echo preg_replace('#([^-]+)\-([^-]+)\-([^-]+)\-([A-Z]+)#', '$1-$2-$3-$4', 'AQ-B-MN-QD'); 
```

# c# - 无法通过 TCP 发送或接收消息

> ID：12845657
> 
> 赞同：1
> 
> 时间：2012-10-11T17:54:58.800
> 
> 标签：c#, .net, tcp

我不断得到：

> System.dll System.Net.Sockets.SocketException (0x80004005) 中出现“System.Net.Sockets.SocketException”类型的第一次机会异常：无法建立连接，因为目标机器主动拒绝它 911.00.00.666:13000

即使我允许该应用程序通过 Windows 防火墙。我也试过端口 80、8080 和 13000。

为什么这总是发生？我如何解决它？

我正在关注本教程： http: [//msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient (v=vs.110).aspx#Y2523](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient(v=vs.110).aspx#Y2523)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Sockets;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace TCPTestClient
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        String msgToSend = "Hello, dude.";

        private void button_Click_1(object sender, RoutedEventArgs e)
        {
            try
            {
                Int32 port = 13000;

                TcpClient client = new TcpClient("localhost", port);

                Byte[] data = System.Text.Encoding.ASCII.GetBytes(msgToSend);

                NetworkStream stream = client.GetStream();
                stream.Write(data, 0, data.Length);

                Console.WriteLine("Send: {0}", msgToSend);

                data = new Byte[256];

                String response = String.Empty;

                Int32 bytes = stream.Read(data, 0, data.Length);
                response = System.Text.Encoding.ASCII.GetString(data, 0, bytes);
                Console.WriteLine("Received: {0}", response);

                title.Text = response;

                stream.Close();
                client.Close();
            }
            catch (ArgumentNullException ex)
            {
                Console.WriteLine(ex);
            }
            catch (SocketException s)
            {
                Console.WriteLine(s);
            }

            Console.WriteLine("Done");
            // All done.
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:04:40.913

链接的文档假设有一个服务器正在运行并接受相关端口上的连接。您的代码只是一个客户端。它需要一个服务器来连接。

[`Socket`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)有关如何运行服务器的信息，请参阅课程。

# c++ - 逐字比较字符串 C++

> ID：12845658
> 
> 赞同：0
> 
> 时间：2012-10-11T17:55:02.377
> 
> 标签：c++, string, vector, compare

我有两个包含字符串的向量。我想将 vector1 的每个字符串与 vector2 的每个字符串进行比较，并检查两个字符串中有多少个单词是相同的。我的代码只有在两个字符串完全相似的情况下才有效：

```
Compare::Compare(vector<string> text1, vector<string> text2, int ratio)
{
    text1Size_ = text1.size();
    text2Size_ = text2.size();

    if(text1Size_ > text2Size_)
    {
        totalWords_ = text1Size_;
    }
    else
    {
        totalWords_ = text2Size_;
    }

    it = text1.begin();

    for(int i = 0; i < text1Size_; i++)
    {
        it2 = text2.begin();

        for(int i = 0; i < text2Size_; i++)
        {
            if(*it == *it2)
            {
                cout << "Perfect match";
            }
            it2++;
        }
        it++;
    }
} 
```

如果它们至少具有相似词的比率，我需要返回每个相似的字符串。

有没有比解析每个字符串、将每个单词放在一个数组中并比较它们更简单的方法？

-编辑-

我所说的单词是指像“鸟”这样的书面单词。我举个例子。

假设我每个向量只有一个字符串，并且我需要 70% 的相似率：

```
string1 : The blue bird.
string2 : The bird. 
```

我要做的是检查两个句子中是否有至少 60% 的书面单词匹配。

在这里，我有匹配的“The”和“Bird”。所以我有 2/3 的相似词（66.666%）。所以这些字符串将被接受。

-编辑2-

我不认为我可以在这里使用“.compare()”，因为它会检查每个字符而不是每个书面单词......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:49:56.893

使用字符串流将字符串拆分为单词：

```
#include <sstream>

bool is_similar(string str1, string str2)
{
    vector<string> words1, words2;
    string temp;

    // Convert the first string to a list of words
    std::stringstream stringstream1(str1);
    while (stringstream1 >> temp)
        words1.push_back(temp);

    // Convert the second string to a list of words
    std::stringstream stringstream2(str2);
    while (stringstream2 >> temp)
        words2.push_back(temp);

    int num_of_identical_words = 0;
    // Now, use the code you already have to count identical words
    ...

    double ratio = (double)num_of_identical_words / words2.size();
    return ratio > 0.6;
} 
```

# iphone - 以编程方式打开 iPhone 相机胶卷应用

> ID：12845661
> 
> 赞同：1
> 
> 时间：2012-10-11T17:55:28.740
> 
> 标签：iphone, objective-c, ios, cocoa-touch

有很多关于如何使用选择器视图访问相机胶卷的教程，但是关闭应用程序并加载相机胶卷怎么样？完全离开应用程序以访问相机胶卷。

这可能吗？

# emacs - 如何让 Emacs 在计算列宽时知道字体大小发生了变化？

> ID：12845663
> 
> 赞同：3
> 
> 时间：2012-10-11T17:55:27.707
> 
> 标签：emacs

我正在尝试编写一个基于 Emacs 当前窗口宽度的函数。问题是，Emacs 对列的宽度感到困惑。它似乎是根据原始字体大小而不是我的自定义设置来计算的。这是一个截图来说明：

![说明问题的屏幕截图](../Images/b804a88960781a5348e9c95a91ee255a.png)

当我删除我的自定义字体设置时，它似乎可以正常工作，所以我认为它一定不是在切换到新字体后更新它认为一列的大小。

这是我的视觉配置的相关部分：

```
(setq default-frame-alist
  '(
    (font . "-apple-Ubuntu_Mono-medium-normal-normal-*-17-*-*-*-p-0-iso10646-1")
    (width . 130)
    (height . 45))) 
```

（很明显，框架的大小是从我在图片中的默认值调整的，但这是我设置字体的地方，所以看起来很相关）

这是我用来确定计算出的当前宽度的函数：

```
(defun get-window-size ()
  (interactive)
  (message "The width is %d." (window-body-width))) 
```

根据文档，window-body-width 函数应该只返回编辑区域，因此应该消除列号和总帧大小之间的任何差异......

如何让 Emacs 在更改字体后更新其对列宽的理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:07:41.493

指示的“行和列”位置基于字符数（有些字符可以计为 2 列或更多，TAB 是一个常见示例）而不是基于它们的视觉显示大小。不同的行可以使用不同大小的字体，因此不同的行将在不同的“列”处到达右边距。相比之下，窗口大小计入“标准大小字符单元的数量”，其中该标准字符单元的大小取决于用于该框架的默认面（即您在 default-frame-alist 中指定的字体） .

在您的屏幕截图中，我没有看到任何明显解释差异的内容，但是：您似乎使用的是普通等宽字体，所有文本都使用相同的字体，而且您似乎没有使用类似的东西`text-scale-increase`，所以我不是确切地知道为什么你会看到你所看到的。

# php - HTML 表单帖子或 Ajax 帖子

> ID：12845673
> 
> 赞同：1
> 
> 时间：2012-10-11T17:55:59.457
> 
> 标签：php, ajax, post

我有一个表格，它有很多输入，需要分解并发送到不同的数据库。执行此操作的更有效方法是什么，将常规 HTML 发布到 PHP 函数或发布到 AJAX（或 JQUERY？）函数。我不太了解可用于发布和处理数据的所有选项，但如果需要澄清，请询问。（如果重要，我的项目是用 PHP 编写的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:06:13.357

如果您的 HTML 包含输入，使得这些值彼此独立，那么发送单独的请求是不错的选择，否则 AJAX 是不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T18:05:28.713

如果您有一个大而全面的表单，更好的方法是将其划分为小部分并编写代码逐步提交表单。在这种情况下，您可以使用简单的 PHP 请求存储数据，但使用 AJAX 验证验证表单字段输入。

# iphone - 为iphone设计网页，你能改变html吗？

> ID：12845674
> 
> 赞同：0
> 
> 时间：2012-10-11T17:56:02.060
> 
> 标签：iphone, html, css, mobile

我正在链接到 iphone 的备用 .css，但是否可以链接到备用 .html？我并不太热衷于浏览原始 html，尽管如果我必须这样做的话。

谢谢你的帮助，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:13:45.780

[在 jquery 中](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)使用这个检测手持设备， 您将能够知道哪种手持设备正在加载您的页面，并且您可以将用户重定向到您的新 html 页面。就像是：

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) )
{
    location.href = "new-page.html";
} 
```

# java - 检查文件是否属于某种类型

> ID：12845675
> 
> 赞同：5
> 
> 时间：2012-10-11T17:56:02.827
> 
> 标签：java, image, jpeg, file-extension, file-exists

我想验证目录中的所有文件是否都属于某种类型。到目前为止我所做的是。

```
private static final String[] IMAGE_EXTS = { "jpg", "jpeg" };

private void validateFolderPath(String folderPath, final String[] ext) {

        File dir = new File(folderPath);

        int totalFiles = dir.listFiles().length;

        // Filter the files with JPEG or JPG extensions.
        File[] matchingFiles = dir.listFiles(new FileFilter() {
            public boolean accept(File pathname) {
                return pathname.getName().endsWith(ext[0])
                        || pathname.getName().endsWith(ext[1]);
            }
        });

        // Check if all the files have JPEG or JPG extensions
        // Terminate if validation fails.
        if (matchingFiles.length != totalFiles) {
            System.out.println("All the tiles should be of type " + ext[0]
                    + " or " + ext[1]);
            System.exit(0);
        } else {
            return;
        }

    } 
```

如果文件名具有像 {file.jpeg, file.jpg} 这样的扩展名，这将正常工作如果文件没有扩展名 {file1 file2}，则此操作将失败。当我在终端中执行以下操作时，我得到：

```
$ file folder/file1 
folder/file1: JPEG image data, JFIF standard 1.01 
```

**更新1：**

我试图获取文件的幻数以检查它是否为 JPEG：

```
for (int i = 0; i < totalFiles; i++) {
            DataInputStream input = new DataInputStream(
                    new BufferedInputStream(new FileInputStream(
                            dir.listFiles()[i])));

            if (input.readInt() == 0xffd8ffe0) {
                isJPEGFlag = true;
            } else {
                isJPEGFlag = false;
                try {
                    input.close();
                } catch (IOException ignore) {
                }
                System.out.println("File not JPEG");
                System.exit(0);
            }
        } 
```

我遇到了另一个问题。我的文件夹中有一些**.DS_Store**文件。知道如何忽略它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:05:34.900

首先，文件扩展名不是强制性的，没有扩展名的文件很可能是有效的 JPEG 文件。

检查 JPEG 格式的 RFC，文件格式通常以一些固定的字节序列开头，以识别文件的格式。这绝对不是直截了当的，但我不确定是否有更好的方法。

简而言之，您必须打开每个文件，根据文件格式读取前 n 个字节，检查它们是否与您期望的文件格式匹配。如果他们这样做，即使它具有 exe 扩展名或即使它没有任何扩展名，它也是一个有效的 JPEG 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T18:08:18.280

对于 JPEG，您可以在文件的标题中执行幻数检查：

```
static bool HasJpegHeader(string filename)
{
    using (BinaryReader br = new BinaryReader(File.Open(filename, FileMode.Open)))
    {
        UInt16 soi = br.ReadUInt16();
        UInt16 jfif = br.ReadUInt16();      
        return soi == 0xd8ff && jfif == 0xe0ff;
    }
} 
```

这里更完整的方法也涵盖了 EXIFF：[C# How can I test a file is a jpeg?](https://stackoverflow.com/questions/772388/c-sharp-how-can-i-test-a-file-is-a-jpeg/8755028#8755028)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T18:39:32.143

对 J2SE 理解的图像的有效性进行的一种很好的（虽然昂贵的）检查是尝试`ImageIO.read(File)`它。如果在提供的文件中找不到图像，该方法会引发一些非常有用的异常。

# php - preg_match 以特定单词开头，然后是后面的任何内容

> ID：12845679
> 
> 赞同：0
> 
> 时间：2012-10-11T17:56:21.793
> 
> 标签：php, validation, preg-match

我正在尝试过滤一些结果，以便显示的结果必须以特定单词“ `skin_`”开头，然后可以包含其后的任何字符。

到目前为止，我有以下内容：

```
preg_match('/^skin_/s', $file) 
```

但我不确定这是否允许特定单词后面的任何字符。

有人可以让我知道这是否正确，否则有助于确保允许任何字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:00:43.307

您现有的正则表达式是正确的。它试图检查的只是是否`$file`以字符串开头，`skin_`这实际上意味着它后面可以跟任何东西。

# javascript - 如何通过单击页面运行 JavaScript 函数？

> ID：12845680
> 
> 赞同：4
> 
> 时间：2012-10-11T17:56:27.163
> 
> 标签：javascript, html

现在我正在使用`<body onload="function">`，它会根据关注的元素更改页面上的一些文本。它工作正常，但我需要我的网站在每次焦点更改时运行该功能（或者更好的是，每次单击页面的任何部分时）。

目前代码如下所示：

```
<body onload="changeText()">
<script>
function changeText(){
     function here;
}
</script>
<p>This is where text changes based on the function</p> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T17:58:55.197

您可以在文档上附加 onclick 事件。[jsfiddle](http://jsfiddle.net/NmHuZ/3/)

```
​document.onclick = function(){
 // your code
 //alert("clicked");
}​ 
```

如果你想改变焦点然后使用

```
window.onfocus = function(){

   // your code
     //alert("focus");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-22T09:27:06.487

```
window.onclick = function () {
  //do some stuff
  document.body.style.backgroundColor = "red";
}
```

```
<p>text text text</p>
<button>it does not matters if you press me or any where else</button>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:01:27.640

尝试这个：

```
<!-- language: lang-html -->
<body onload="changeText()">
<script>
function changeText(){
    function here;
}
document.onclick=function(){changeText();};
</script>
<p>This is where text changes based on the function</p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T18:09:46.007

jQuery 不受禁用点击问题的影响

```
$(document).click(function(e){
                //Blah
            }) 
```

# spring - 将 spring 控制器与域匹配

> ID：12845685
> 
> 赞同：0
> 
> 时间：2012-10-11T17:56:53.057
> 
> 标签：spring, servlets, spring-mvc

我不知道如何用更好的方式来描述它，就像标题一样，因为我真的不知道我真正在寻找什么。

我有我的 spring 应用程序，主 Servlet 与根目录匹配。这是使用的 servlet 映射：

```
<servlet-mapping>
    <servlet-name>shop</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

并且它自己的应用程序被部署为根应用程序。

所以现在的问题是，当我尝试通过 example.com 访问域时，它不起作用，并且出现 404 not found 错误。只有当我使用以下网址时：example.com/ ... tara ... 它才能按预期工作。

我知道这是一个非常基本的问题，但因为我不知道我必须搜索什么。我找不到任何东西来解决这个问题。

感谢您提供任何解决此问题的解决方案。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:06:31.023

不要将应用程序上下文根与 URL 根混淆。请记住，Java Web 容器与 HTTP 服务器不同。

如果您使用诸如 Tomcat 之类的容器来部署应用程序并希望应用程序绑定到根 URL，那么您将不得不使用诸如 Apache HTTP 之类的 http 服务器来设置虚拟主机。

将开始阅读此文档：

[http://httpd.apache.org/docs/2.2/mod/core.html](http://httpd.apache.org/docs/2.2/mod/core.html)

如果您想为您的 Web 应用程序设置虚拟主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:57:37.533

谢谢你的回答。我知道这个问题有点老了，但对于所有遇到同样问题的人来说。

在这里您可以找到 xml 和 java 配置的解决方案：http: [//static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler)

如果您添加此 xml 标记或覆盖它工作的 java config 方法，您的 Web 应用程序可以响应 '/' url :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:43:38.647

/ 是一个特殊的 url 匹配模式，意思是“默认”servlet。如果您希望您的 servlet 服务于所有请求，请使用 /*. 当没有找到其他匹配项来提供静态内容和列表文件夹时，将调用默认 servlet，这可能不是您想要的。不确定，但默认 servlet 可能需要前导斜杠。

# jpql - 从聚合函数中获取值 - JPQL

> ID：12845686
> 
> 赞同：0
> 
> 时间：2012-10-11T17:56:57.740
> 
> 标签：jpql

我正在尝试使用命名查询，但它不起作用：

```
 @NamedQuery(name = "Uscensuspopulationdata.fetchmostpopstate", query = "SELECT MAX(u.pop2010) FROM Uscensuspopulationdata where u.pop2010 <> 0") 
```

Uscensuspopulationdata 是一个实体。我在做什么错？这是错误：

FailedPredicateException(arithmeticPrimary,{ aggregatesAllowed() }?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:23:59.500

该异常的描述性不是很好，但您似乎没有在您显示的查询中定义“u”是什么。尝试“..Uscensuspopulationdata u where..”或其他 JPA 提供程序，看看您是否可以获得可能提供更多详细信息的异常，以帮助您指明正确的方向。

# c++ - 函数不能嵌套，那么如何在 C++ 中做到这一点？

> ID：12845687
> 
> 赞同：-6
> 
> 时间：2012-10-11T17:56:58.687
> 
> 标签：c++, c, visual-studio-2010, visual-c++

这是我的程序

```
#define WIN32_LEAN_AND_MEAN
#include <stdlib.h>
#include <stdio.h>
#include <string.h> 
#include <process.h> 
#include<atlstr.h>
#include<Windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
using namespace std; 
#define DEFAULT_PORT "100"
 class Base
{
public     :    
    struct addrinfo    addr_;   
    unsigned short          port_;      
    CString                  hostname_;    
    CRITICAL_SECTION        sect_;       
    HANDLE                  threadHandle_;    
        HANDLE                  threadHandle1_;  
    bool                    connected_;

public  :       
    SOCKET          sock_; 
    A()
    {

    }

public:
    virtual int ConnectToMachine(void)=0;  //This will make socket connection with the machine.
    virtual int SendRequest(SOCKET sock)=0;      //This will send the request to the machine.
    virtual char* ReceiveResponse(SOCKET sock)=0;  //This will receive the response from the machine that is binary data.

static DWORD WINAPI ServerConnectThread(Base *my);
static UINT ThreadFunc(LPVOID param) ;
static  UINT receive();
static DWORD WINAPI startReceive(LPVOID param){
            Base *_this=(Base*)param;
            _this->receive();
            return 0;
        }
};

 #define DEFAULT_BUFLEN 512
 class Derived :public Base
{
public:
int ConnectToMachine(void)
    {
        int conResult,iResult;
        struct addrinfo           *result = NULL,*ptr = NULL;

        u_long iMode = 0;
        DWORD nTimeout = 5000; // 5 seconds
        int port=22;
        WSADATA wsaData;

        // Initialize Winsock

        iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
        if (iResult != 0) 
        {
            printf("WSAStartup failed with error: %d\n", iResult);

        }

        ZeroMemory( &addr_, sizeof(addr_) );
        addr_.ai_family = AF_UNSPEC;
        addr_.ai_socktype = SOCK_STREAM;
        addr_.ai_protocol = IPPROTO_TCP;

        // Resolve the server address and port
        conResult = getaddrinfo("192.168.1.7", DEFAULT_PORT, &addr_, &result);
        if ( conResult != 0 ) {
            printf("getaddrinfo failed with error: %d\n", conResult);
            WSACleanup();
            return 1;
        }

        // Attempt to connect to an address until one succeeds
        for(ptr=result; ptr != NULL ;ptr=ptr->ai_next) {

            // Create a SOCKET for connecting to server
            sock_ = socket(ptr->ai_family, ptr->ai_socktype, 
                ptr->ai_protocol);
            if (sock_ == INVALID_SOCKET) {
                printf("socket failed with error: %ld\n", WSAGetLastError());
                WSACleanup();
                return 1;
            }

            conResult = ioctlsocket(sock_, FIONBIO, &iMode);
            if (conResult != NO_ERROR)
                printf("ioctlsocket failed with error: %ld\n", conResult);

            conResult = setsockopt(sock_, SOL_SOCKET, SO_RCVTIMEO, (const char*)&nTimeout, sizeof(DWORD));
            if (conResult != NO_ERROR)
            {
                printf("\nSetsocopt fail with error :%d\n",WSAGetLastError());

                return 0;
            }

            // Connect to server.
            conResult = connect(sock_, ptr->ai_addr, (int)ptr->ai_addrlen);
            if (conResult == SOCKET_ERROR) {
                closesocket(sock_);
                sock_ = INVALID_SOCKET;
                continue;
            }
            break;
        }

        freeaddrinfo(result);

        if (sock_ == INVALID_SOCKET) {
            printf("Unable to connect to server!\n");
            WSACleanup();
            return 1;
        }
        DWORD dwThreadId;

            threadHandle_=CreateThread(NULL,0,(LPTHREAD_START_ROUTINE)ThreadFunc,this,0,&dwThreadId);

    }

    int SendRequest(SOCKET sock)
    {
        int sendResult;
        char data[6]="CM00";
        data[4]=0x0F;
        data[5]=0x0D;
        sendResult = send( sock, data, (int)strlen(data), 0 );
        if (sendResult == SOCKET_ERROR)
        {
            printf("send failed with error: %d\n", WSAGetLastError());
            closesocket(sock);
            WSACleanup();
            return 1;
        }

        printf("Bytes Sent: %ld\n",sendResult);
    }

    char* ReceiveResponse(SOCKET sock )
    {
        int recvResult;
        char recvBuf[1024];
        char common[138];
        int j;
        int w =0;
        int recvbuflen = DEFAULT_BUFLEN;

        do {

            recvResult = recv(sock, recvBuf, recvbuflen, 0);
            if ( recvResult > 0 )
            {   

                //wLog->WriteErrorLog(recvbuf);
                for(j=0;j<=recvResult;j++)
                {
                    common[w] = recvBuf[j];
                    w++;

                }

                printf("Bytes received: %d\n",recvResult);
                memset(recvBuf, 0, sizeof(recvBuf));

            }
            else if ( recvResult == 0 )
                printf("Connection closed\n");
            else
                printf("recv failed with error: %d\n", WSAGetLastError());

        } while( recvResult> 0 );

        return common;
    }

    static UINT Derived::receive(void)
    {
        while(1)
        {
            SendRequest(sock_);
            ReceiveResponse(sock_);
            Sleep(10000);
        }
    }

    DWORD WINAPI Base::ServerConnectThread(LPVOID lpdwThreadParam)
    {
        SOCKET ThreadSocket = INVALID_SOCKET;
        ThreadSocket=(SOCKET)lpdwThreadParam;
        while(1)
        {
            SendRequest(ThreadSocket);
            ReceiveResponse(ThreadSocket);
            Sleep(10000);
        }

    }
     static UINT ThreadFunc(LPVOID param) {   
         Base* obj = (Base*)param;   

         obj->ServerConnectThread(); //how to pass socket
     } 
}; 
```

我必须将我在连接函数中创建的套接字传递给服务器连接线程，你能指导我怎么做吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:15:21.780

TL;博士

使用成员变量：

```
class Base
{
    ...
public:
    int the_socket_that_i_created_in_connect_function;
}; 
```

# php - AS3 从 PHP 接收数据

> ID：12845689
> 
> 赞同：4
> 
> 时间：2012-10-11T17:57:06.913
> 
> 标签：php, actionscript-3

我似乎无法接受可变数据，在查阅 Adob​​e AS3 参考资料时，我似乎做的一切都是正确的，我相信这是 PHP 的问题，但不确定。

PHP - 此文件与 AS3 文档位于同一目录中

```
<?php

$testData = 4;

echo "testData=" . $testData

?> 
```

AS3

```
public function URLLoaderDataFormatExample()
{
    var request:URLRequest = new URLRequest("PHPTest.php");
    var variables:URLLoader = new URLLoader();
    variables.dataFormat = URLLoaderDataFormat.VARIABLES;
    variables.addEventListener(Event.COMPLETE, completeHandler);
    try
    {
        variables.load(request);
    } 
    catch (error:Error)
    {
        trace("Unable to load URL: " + error);
    }
}
private function completeHandler(event:Event):void
{
    var loader:URLLoader = URLLoader(event.target);
    trace(event.target.data.testData)
} 
```

跟踪语句应该打印 4。但是，它只是打印未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:57:46.347

Actionscript 代码看起来没问题。

Flash 对变量之前/之后的空格非常敏感。请注意，如果您在 之后`?>`或 之前有换行符`<?php`，它将作为响应的一部分给出。

为确保 PHP 是问题所在，请将 .php 文件替换为简单的 .txt 文件，仅使用 text `testData=4`，没有额外的换行符或空格，然后尝试加载它。

如果加载正确，则问题出在 PHP 文件上 -`PHPTest.php`在浏览器中导航到并检查是否额外插入了某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:45:25.090

如果我没记错的话，我也已经不得不自己面对这个问题了。

我发现有时（没有找到实际原因）PHP 发送的第一个值会被无效甚至根本不发送。

我已经习惯在回声的开头添加一个不重要的值，例如：

```
echo 'unimportantvar=nothing&myXML='.$xml; 
```

似乎总能解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:46:33.327

像这样的事情应该这样做。

```
private function completeHandler(event:Event):void{
    var loader:URLLoader = URLLoader(event.target);
    var urlVars:URLVariables = new URLVariables(loader.data);
    trace(urlVars.testData)
} 
```

# xml - 使用 NSIS 从 XML 文件中提取多个数据

> ID：12845692
> 
> 赞同：0
> 
> 时间：2012-10-11T17:57:19.220
> 
> 标签：xml, extract, nsis

如何使用 NSIS 从 XML 文件中提取多个数据？我使用 UpdateXml 下载 XML 并多次从中提取一个值。是否可以使用 UpdateXml 从 XML 文件中提取多个值，或者我应该使用另一个命令/插件来获取所需的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:36:43.380

使用[XML 插件](http://nsis.sourceforge.net/XML_plug-in)解析 XML 文档并构建可以在脚本中使用的 DOM 结构。如果 XML 在本地不可用，请使用[NSISSdl 插件](http://nsis.sourceforge.net/NSISdl_plug-in)下载。

# c# - 如何侦听所有可能的类未实现的事件？

> ID：12845695
> 
> 赞同：0
> 
> 时间：2012-10-11T17:57:27.720
> 
> 标签：c#, events, inheritance

在我基于 MEF 的应用程序中，有些模块使用表单，但有些不使用。

我希望能够响应这些表单的关闭，但似乎无法弄清楚如何做到这一点。模块类型基于接口，使用表单的模块类型继承一个基类，该基类继承自`Windows.Forms.Form`.

例如

```
public partial class SwatchForm : ModuleForm, IAcquisition 
```

在哪里

```
public partial class ModuleForm : Form 
```

由于并非所有继承`IAcquisition`（或我的其他模块接口）的东西都继承自`ModuleForm`，我尝试了这个：

```
if (this.AcquisitionModule.GetType().IsSubclassOf(typeof(ModuleForm)))
{
    (ModuleForm)(this.AcquisitionModule).ModuleFormClosed += whatever....
} 
```

但它仍然抱怨`IAcquisition`没有什么叫`ModuleFormClosed`。

我考虑过使用异常，但这感觉有点像黑客。有没有办法使用事件来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:01:38.940

`.`具有比强制转换更高的优先级，因此您需要以不同的方式放置括号。此外，您可以以更简单的方式检查类型。尝试

```
if (this.AcquisitionModule is ModuleForm) {
    ((ModuleForm) this.AcquisitionModule).ModuleFormClosed += ...
} 
```

另一种方法是

```
var moduleForm = this.AcquisitionModule as ModuleForm;
if (moduleForm != null) {
    moduleForm.ModuleFormClosed += ...
} 
```

# java - catch Fildnot found exception e 和 try 方法

> ID：12845696
> 
> 赞同：-4
> 
> 时间：2012-10-11T17:57:30.203
> 
> 标签：java, exception, generics

那么我有这个问题，我不知道编码有什么问题，

```
 catch (FilenotFoundException e){
        system.out.println("File not found");

        }
        try
        {
            FileReader freader = new FileReader("MyFile.txt");
        }
} 
```

它询问错误是什么？我认为这可能是 e 没有大写是这个原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:58:26.643

**try{}**块后面应该跟着一个catch **{}**块或**finally{}**块，`you have reversed it.`

像这样使用：-

```
 try {
        FileReader freader = new FileReader("MyFile.txt");

    } catch (FileNotFoundException e){

        System.out.println("File not found");
    } 
```

**根据 Java 命名约定：-**

*   类名以大写字母开头，所有后续单词也以大写字母开头。所以，`FilenotFoundException`应该是`FileNotFoundException`

*   而且，`system`应该是 -> `System`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:59:58.877

一个`catch{}`块跟随一个`try{}`块，而不是相反。

另外，`FilenotFoundException`应该是`FileNotFoundException`。我怀疑它会与替代拼写一起编译。正如@Rohit Jain 的回答所示，与`system`vs.也是如此。`System`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:00:56.820

从 Java 7 开始：

```
try( FileReader freader = new FileReader("MyFile.txt"))
{ 
```

*使用阅读器*

```
}// try
catch( IOException e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T17:59:15.570

应该是其他的。`try`其次是`catch`。

```
 try
    {
        FileReader freader = new FileReader("MyFile.txt");
    }catch (FileNotFoundException e){
    System.out.println("File not found");

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T18:04:51.390

catch 块应该跟随 try

```
try {
  //code that exception might occur
 }
 catch(Exception ex) {
   //catch the exception here.
  } 
```

您的 try 块应该紧跟 catch 或 finally。

```
try {
  //code that exception might occur
 }
 finally {
  //close your resources here
 } 
```

# android - 代码在 2.3.3 上工作，但在 4.0.3 上崩溃

> ID：12845712
> 
> 赞同：0
> 
> 时间：2012-10-11T17:58:06.977
> 
> 标签：android, sftp, jsch, android-sdk-2.3

我开发了一个 android 项目。它是关于 JSCH。我设置了一个服务器，我想连接 android 代码。我找到了所需的代码，但它适用于 android 2.3.3，我需要代码或修改 4.0.3。代码适用于 2.3 .3 但它在 4.0.3 崩溃。请帮助我

```
JSch jsch = new JSch();
        Session session = null;
            session = jsch.getSession("******", "*********",22);
            session.setConfig("StrictHostKeyChecking", "no");     
            session.setPassword("******");
            session.connect();
            Channel channel = session.openChannel("sftp");
            channel.connect();
            ChannelSftp sftpChannel = (ChannelSftp) channel;     
            sftpChannel.exit();
            session.disconnect(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:01:19.490

由于您没有向我们提供堆栈跟踪，因此我在给出这个答案时有点猜测。

我的猜测是你得到一个[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html). 此异常发生在 Android 3.0 及更高版本上，当您尝试在主 UI 线程上使用网络时。这也解释了为什么您在 Gingerbread 上看不到异常。

要解决此问题，请将所有网络代码移动到[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。

# sas - 您如何判断 SAS proc sql 中使用的是什么索引？有没有等价的解释？

> ID：12845714
> 
> 赞同：1
> 
> 时间：2012-10-11T17:58:25.480
> 
> 标签：sas

SAS Proc SQL 中是否有与 EXPLAIN 等效的内容？从我所做的谷歌搜索来看，它看起来不像。

实际上，我真正需要知道的是如何判断在 JOIN 期间是否使用了索引或查询最终使用了哪个索引。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:09:29.783

`OPTIONS MSGLEVEL=I;` 将告诉您何时使用索引（以及使用哪个索引），用于 SQL 或数据步骤。

例子：

```
data class(index=(sex));
set sashelp.class;
run;
options msglevel=i;
proc sql feedback;
select * from class where sex='M';
quit; 
```

FEEDBACK 和 STIMER 是有用的 PROC SQL 选项，它们还将为您提供有关您编写的查询的更多信息（[http://support.sas.com/documentation/cdl/en/sqlproc/62086/HTML/default/viewer.htm#a001360938 .htm](http://support.sas.com/documentation/cdl/en/sqlproc/62086/HTML/default/viewer.htm#a001360938.htm) )

编辑： [https ://communities.sas.com/thread/14072?start=0&tstart=0](https://communities.sas.com/thread/14072?start=0&tstart=0)

显然有一个解释选项，尽管它没有记录并且仍在进行中。请参阅链接查看更多细节。

# php - Facebook 应用：服务器端访问令牌验证

> ID：12845720
> 
> 赞同：3
> 
> 时间：2012-10-11T17:58:40.047
> 
> 标签：php, facebook, authentication

简单的 facebook 应用程序与数据库服务器（使用包装器）进行通信。出于安全原因，需要检查请求服务器执行某些操作的用户是否真的是其 id 的所有者（在请求中发送）。

为此，对服务器的请求包含来自基于 javascript SDK 的 Web 应用程序的 access_token 和用户 ID。我想检查访问令牌所有者的 ID 和用户 ID 是否相同。第一步是从 Facebook 获取访问令牌所有者的 ID。使用代码：

```
class SessionValidator {
    private $userId;            //id of user
    private $accessToken;       //facebook user's access token
    private $fb;
    public function __construct($userId, $accessToken){
        $this->userId = $userId;
        $this->accessToken = $accessToken;
        $app_id = @appId; 
        $app_secret = @secret;

        $fb = new Facebook(array('appId' => $app_id, 'secret' => $app_secret));
        $fb->setAccessToken($accessToken);

        $this->fb = $fb;
    }
    public function authUserSession(){
        $url = 'https://graph.facebook.com/';
        $data['fields'] = $this->userId;
        $data['access_token'] = $this->accessToken;

        $response = $this->post_request($url, $data);

        return $response;
    }
    private function post_request($url, $data){
        return $this->fb->api('/me', 'POST', $data);
    }
} 
```

Facebook一直在回应：

> Uncaught OAuthException: (#10) 应用程序没有此操作的权限

如果我删除了 line: ，也会有同样的反应`$fb->setAccessToken($accessToken);`。我确定 appId 和 appSecure 是正确的。客户端应用程序和服务器端应用程序放置在不同的主机上，但两个域都作为应用程序域添加到 facebook 开发人员网站上。知道为什么我收到此错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T18:21:43.200

问题在于你在那里打的电话！

你应该做一个`GET`请求而不是`POST`请求。

此外，您的`fields`密钥应该是`id`它的值，而不是用户的 ID。

这是一个固定版本：

```
class SessionValidator {
private $userId;            //id of user
private $accessToken;       //facebook user's access token
private $fb;
public function __construct($userId, $accessToken){
    $this->userId = $userId;
    $this->accessToken = $accessToken;
    $app_id = @appId; 
    $app_secret = @secret;

    $fb = new Facebook(array('appId' => $app_id, 'secret' => $app_secret));
    $fb->setAccessToken($accessToken);

    $this->fb = $fb;
}
public function authUserSession(){
    $url = 'https://graph.facebook.com/';
    $data['fields'] = 'id';
    $data['access_token'] = $this->accessToken;

    $response = $this->get_request($url, $data);

    return $response;
}
private function get_request($url, $data){
    return $this->fb->api('/me', 'GET', $data);
}
} 
```

如果您以ie为值进行`GET`请求，那么它将返回错误消息：`fields``User's ID``$this->userId`

> (#100) 未知字段：[您传递的用户 ID]

**编辑：**这是您可以用来验证用户 ID 的另一个版本。如果用户 id 与 facebook 返回的用户 id 匹配，则该方法将返回 true 或 false。如果您正在对返回的响应执行其他操作，那么这可能不是适合您的版本，您可以使用上述版本。

```
class SessionValidator {
    private $userId;            //id of user
    private $accessToken;       //facebook user's access token
    private $fb;
    public function __construct($userId, $accessToken){
        $this->userId = $userId;
        $this->accessToken = $accessToken;
        $app_id = @appId; 
        $app_secret = @secret;

        $fb = new Facebook(array('appId' => $app_id, 'secret' => $app_secret));
        $fb->setAccessToken($accessToken);

        $this->fb = $fb;
    }

    public function authUserSession(){
        $url = 'https://graph.facebook.com/';
        $data['fields'] = 'id';
        $data['access_token'] = $this->accessToken;

        $response = $this->get_request($url, $data);

        if($this->userId == $response['id']) {
            return true;
        }
        return false;
    }

    private function get_request($url, $data){
        return $this->fb->api('/me', 'GET', $data);
    }
} 
```

# antlr - 为什么我的树语法不明确？

> ID：12845736
> 
> 赞同：1
> 
> 时间：2012-10-11T17:59:25.637
> 
> 标签：antlr, antlrworks

我有点困惑。我有一个很好用的语法，可以按照我的意愿与我的语言相匹配。最近，我在语法中添加了一些规则，在将新语法规则转换为树语法的过程中，我遇到了一些奇怪的错误。我得到的第一个错误是树语法不明确。

我收到的错误是：

```
[10:53:16] warning(200): ShiroDefinitionPass.g:129:17: 
Decision can match input such as "'subjunctive node'" using multiple alternatives: 5, 6

As a result, alternative(s) 6 were disabled for that input
[10:53:16] warning(200): ShiroDefinitionPass.g:129:17: 
Decision can match input such as "PORT_ASSIGNMENT" using multiple alternatives: 2, 6 
```

还有大约 10 个类似的错误。

我不知道为什么树语法是模棱两可的。在我添加 sNode、subjunctDeclNodeProd、subjunctDecl 和 subjunctSelector 规则之前很好。

我的语法是：

```
grammar Shiro;

options{
    language = Java;
    ASTLabelType=CommonTree;
    output=AST;
}

tokens{
    NEGATION;
    STATE_DECL;
    PORT_DECL;
    PORT_INIT;
    PORT_ASSIGNMENT;
    PORT_TAG;
    PATH;
    PORT_INDEX;
    EVAL_SELECT;
    SUBJ_SELECT;
    SUBJ_NODE_PROD;
    ACTIVATION;
    ACTIVATION_LIST;
    PRODUCES;
}

shiro   :   statement+
    ;   

statement
    :   nodestmt
    |   sNode 
    |   graphDecl
    |   statestmt
    |   collection
    |   view
    |   NEWLINE!
    ;

view    :   'view' IDENT mfName IDENT -> ^('view' IDENT mfName IDENT)
    ;

collection
    :   'collection' IDENT orderingFunc path 'begin' NEWLINE
            (collItem)+ NEWLINE?
        'end'
        -> ^('collection' IDENT orderingFunc path collItem+)
    ;

collItem:   IDENT -> IDENT
    ;

orderingFunc
    :   IDENT -> IDENT
    ;

statestmt
    :   'state' stateName 'begin' NEWLINE
        stateHeader
        'end' -> ^(STATE_DECL stateName stateHeader)
    ;

stateHeader
    :   (stateTimeStmt | stateCommentStmt | stateParentStmt | stateGraphStmt | activationPath | NEWLINE!)+  
    ;

stateTimeStmt
    :   'Time' time -> ^('Time' time)
    ;

stateCommentStmt
    :   'Comment' comment -> ^('Comment' comment)   
    ;

stateParentStmt
    :   'Parent' stateParent -> ^('Parent' stateParent)
    ;

stateGraphStmt
    :   'Graph' stateGraph -> ^('Graph' stateGraph)
    ;

stateName
    :   IDENT
    ;

time    :   STRING_LITERAL  
    ;

comment :   STRING_LITERAL
    ;

stateParent
    :   IDENT
    ;

stateGraph
    :   IDENT
    ;

activationPath
    :   l=activation ('.'^ (r=activation | activationList))*
    ;

activationList
    :   '<' activation (',' activation)* '>' -> ^(ACTIVATION_LIST activation+)
    ;

activation
    :   c=IDENT ('[' v=IDENT ']')? -> ^(ACTIVATION $c ($v)?)
    ;

graphDecl
    :   'graph' IDENT 'begin' NEWLINE
        graphLine+
        'end'
        -> ^('graph' IDENT graphLine+)
    ;

graphLine
    :   nodeProduction | portAssignment | NEWLINE!
    ;

nodeInternal
    :   (nodeProduction 
        | portAssignment 
        | portstmt 
        | nodestmt 
        | sNode 
        | NEWLINE!)+
    ;

nodestmt 
    :   'node'^ IDENT ('['! activeSelector ']'!)? 'begin'! NEWLINE!
        nodeInternal
        'end'!
    ;

sNode
:   'subjunctive node'^ IDENT '['! subjunctSelector ']'! 'begin'! NEWLINE!
        (subjunctDeclNodeProd | subjunctDecl | NEWLINE!)+
        'end'!
    ;

subjunctDeclNodeProd
    :   l=IDENT '->' r=IDENT 'begin' NEWLINE
        nodeInternal
        'end' -> ^(SUBJ_NODE_PROD $l $r nodeInternal )
    ;

subjunctDecl
    :   'subjunct'^ IDENT ('['! activeSelector ']'!)? 'begin'! NEWLINE!
        nodeInternal
        'end'!
    ;

subjunctSelector
    :   IDENT -> ^(SUBJ_SELECT IDENT)
    ;

activeSelector  
    :   IDENT -> ^(EVAL_SELECT IDENT)
    ;

nodeProduction
    :   path ('->'^ activationPath )+ NEWLINE!
    ;

portAssignment
    :   path '(' mfparams ')' NEWLINE -> ^(PORT_ASSIGNMENT path mfparams)
    ;   

portDecl
    :   portType portName mfName -> ^(PORT_DECL ^(PORT_TAG portType) portName mfName)
    ;

portDeclInit
    :   portType portName mfCall -> ^(PORT_INIT ^(PORT_TAG portType) portName mfCall)
    ;

portstmt    
    :   (portDecl | portDeclInit ) NEWLINE!
    ;   

portName 
    :   IDENT
    ;

portType:   'port'
    |   'eval'
    ;

mfCall  :   mfName '(' mfparams ')' -> ^(mfName mfparams)
    ;

mfName  :   IDENT
    ;

mfparams:   expression(',' expression)* -> expression+
    ;

// Path
path    :   (IDENT)('.' IDENT)*('[' pathIndex ']')? -> ^(PATH IDENT+ pathIndex?)
    ;

pathIndex
    :   portIndex -> ^(PORT_INDEX portIndex)
    ;

portIndex
    :   ( NUMBER |STRING_LITERAL )
    ;

// Expressions
term    :   path
    |   '(' expression ')' -> expression
    |   NUMBER
    |   STRING_LITERAL
    ;

unary   :   ('+'^ | '-'^)* term

    ;

mult    :   unary (('*'^ | '/'^ | '%'^) unary)*
    ;

add     
    :   mult (( '+'^ | '-'^ ) mult)*
    ;

expression
    :   add (( '|'^ ) add)*
    ;

// LEXEMES
STRING_LITERAL
    :   '"' .* '"'
    ;

NUMBER  :   DIGIT+ ('.'DIGIT+)?
    ;

IDENT   :   (LCLETTER | UCLETTER | DIGIT)(LCLETTER | UCLETTER | DIGIT|'_')*
    ;

COMMENT
        :       '//' ~('\n'|'\r')*  {$channel=HIDDEN;}
    |   '/*' ( options {greedy=false;} : . )* '*/' NEWLINE?{$channel=HIDDEN;}
        ;

WS
    :   (' ' | '\t' | '\f')+ {$channel = HIDDEN;}
    ;

NEWLINE :   '\r'? '\n'
    ;

fragment
LCLETTER 
    :   'a'..'z'
    ;

fragment
UCLETTER:   'A'..'Z'
    ;   

fragment
DIGIT   :   '0'..'9'
    ; 
```

我对该部分的树语法如下所示：

```
tree grammar ShiroDefinitionPass;

options{
    tokenVocab=Shiro;
    ASTLabelType=CommonTree;
}

shiro
    :   statement+

    ;   

statement   
    :   nodestmt
    |   sNode
    |   graphDecl
    |   statestmt
    |   collection
    |   view
    ;

view    :   ^('view' IDENT mfName IDENT)
    ;

collection
    :   ^('collection' IDENT orderingFunc path collItem+)
    ;

collItem:   IDENT
    ;

orderingFunc
    :   IDENT
    ;

statestmt
    :   ^(STATE_DECL stateHeader)
    ;

stateHeader
    :   (stateTimeStmt | stateCommentStmt | stateParentStmt| stateGraphStmt | activation )+     
    ;

stateTimeStmt
    :   ^('Time' time)
    ;

stateCommentStmt
    :   ^('Comment' comment)    
    ;

stateParentStmt
    :   ^('Parent' stateParent)
    ;

stateGraphStmt
    :   ^('Graph' stateGraph)
    ;

stateName
    :   IDENT
    ;

time    :   STRING_LITERAL  
    ;

comment :   STRING_LITERAL
    ;

stateParent
    :   IDENT
    ;

stateGraph
    :   IDENT
    ;

activationPath
    :   l=activation ('.' (r=activation | activationList))*
    ;

activationList
    :   ^(ACTIVATION_LIST activation+)
    ;

activation
    :   ^(ACTIVATION IDENT IDENT?)
    ;

// Graph Declarations
graphDecl
    :   ^('graph' IDENT graphLine+)
    ;

graphLine
    :   nodeProduction
    |   portAssignmen
    ;
// End Graph declaration

nodeInternal
    :   (nodeProduction
        |portAssignment
        |portstmt
        |nodestmt
        |sNode )+
    ;

nodestmt
    :   ^('node' IDENT activeSelector? nodeInternal)    
    ;

sNode
    :   ^('subjunctive node' IDENT subjunctSelector (subjunctDeclNodeProd | subjunctDecl)*)
    ;

subjunctDeclNodeProd
    :   ^(SUBJ_NODE_PROD IDENT IDENT nodeInternal+ )
    ;

subjunctDecl
    :   ^('subjunct' IDENT activeSelector? nodeInternal )
    ;

subjunctSelector
    :   ^(SUBJ_SELECT IDENT)
    ;

activeSelector returns 
    :   ^(EVAL_SELECT IDENT)
    ;

nodeProduction
    :   ^('->' nodeProduction)
    |   path 
    ;

portAssignment
    :   ^(PORT_ASSIGNMENT path)  
    ;   

// Port Statement
portDecl
    :   ^(PORT_DECL ^(PORT_TAG portType) portName mfName) 
    ;

portDeclInit
    :   ^(PORT_INIT ^(PORT_TAG portType) portName mfCall)
    ;

portstmt    
    :   (portDecl | portDeclInit)
    ;   

portName
    :   IDENT 
    ;

portType returns 
    :   'port' | 'eval'
    ;

mfCall
    :   ^(mfName mfparams) 
    ;

mfName
    :   IDENT
    ;

mfparams  
    :   (exps=expression)+
    ;   

// Path
path
    :   ^(PATH (id=IDENT)+ (pathIndex)? )
    ;

pathIndex 
    :   ^(PORT_INDEX portIndex)
    ;

portIndex
    :   ( NUMBER 
        |STRING_LITERAL
        )
    ;

// Expressions
expression
    :   ^('+' op1=expression op2=expression) 
    |   ^('-' op1=expression op2=expression) 
    |   ^('*' op1=expression op2=expression) 
    |   ^('/' op1=expression op2=expression)
    |   ^('%' op1=expression op2=expression) 
    |   ^('|' op1=expression op2=expression)
    |   NUMBER 
    |   path
    ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:25:07.010

在您的树语法中，这是 rule 的声明`nodeInternal`：

```
 nodeInternal
    :  (nodeProduction
       |portAssignment
       |portstmt
       |nodestmt
       |sNode)+
    ; 
```

这是您的规则声明`subjunctDeclNodeProd`：

```
 subjunctDeclNodeProd
    :   ^(SUBJ_NODE_PROD IDENT IDENT nodeInternal+ )
    ; 
```

处理时`subjunctDeclNodeProd`，ANTLR 不知道如何处理这样的输入，有两个`PATH`孩子：

```
^(SUBJ_NODE_PROD IDENT IDENT ^(PATH IDENT) ^(PATH IDENT)) 
```

它应该遵循一次规则`nodeInternal`并处理`nodeProduction, nodeProduction`还是应该遵循`nodeInternal`两次并`nodeProduction`每次处理？

`subjunctDeclNodeProd`考虑在没有 的情况下重写`+`：

```
 subjunctDeclNodeProd
    :   ^(SUBJ_NODE_PROD IDENT IDENT nodeInternal)
    ; 
```

我认为这将解决问题。

# c# - 使用带有套接字和 html 页面（客户端）的 c# 控制台服务器从中获取信息

> ID：12845739
> 
> 赞同：4
> 
> 时间：2012-10-11T17:59:41.997
> 
> 标签：c#

> 我正在写 ac# 更改密码页面。我没有做过太多的 Socket 编程，我不确定最好的方法。

必须有控制台应用程序（服务器）和带有以下文本框的 html 页面（客户端）：

```
Username [_______]
Old password [______]
New password [______]
       [Submit] 
```

然后当用户单击提交时，将创建一个新线程，我正在检查信息是否良好并且将执行一些功能。

这应该在定义的端口上接受来自多个客户端的连接。

我怎样才能做到这一点？

到目前为止我所做的是：

```
 public static TcpListener Listener;
    public static int Port = 8080;
static void Main(string[] args)  
   {
        IniFile FPth = new IniFile(@"D:\ServerInfo.ini");
        ServerPort = int.Parse(FPth.IniReadValue("ConnectionINFO", "ServerPort"));
        Listener = new TcpListener(IPAddress.Any, Port);
        Listener.Start();
        Thread NewThread = new Thread(new ThreadStart(ChangingINFO));
        ChangingINFO();
        Console.WriteLine("Server is ONLINE.");
   }

static ChangingINFO()
{
         while (true)
            {
                Socket Sockt = Listener.AcceptSocket();
                try
                {
                    if (Sockt.Connected)
                    {
                     //Here I should get the information from the client on submit.
                     //But I don't know how
                    }
} 
```

但我不知道如何制作将信息发送到服务器并与它们一起工作的 html 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:03:14.547

在原始套接字之上实现您自己的 HTTP 协议将是一项相当大的工作。您可以使用 Mono XSP 将可以为 ASP.NET 页面提供服务的 Web 服务器嵌入到您的应用程序中，或者您可以使用 HttpListener 代替：

[http://msdn.microsoft.com/en-us/library/system.net.httplistener(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.net.httplistener(v=vs.100).aspx)

# node.js - NodeJS、OpenCV 和使用 Net Socket 流式传输图像

> ID：12845742
> 
> 赞同：5
> 
> 时间：2012-10-11T17:59:48.970
> 
> 标签：node.js, sockets, opencv, video-streaming, base64

我的最终目标是将视频从我的笔记本电脑流式传输到服务器。我试图通过在笔记本电脑和服务器上使用 NodeJs 来实现这一点。我使用 OpenCV 库捕获笔记本电脑上的视频并将其保存为 jpg 文件。然后我读取文件并将其转换为 base64，以便我可以使用 Node.js 中的 Net.socket 模块传输它。这是一个持续的过程：捕获、编码和发送。

以下是仅传输一个 jpg 文件的服务器代码：

```
var cv = require('opencv');
var fs = require('fs');
var net = require('net');
var camera = new cv.VideoCapture(0);
var server = net.createServer();
server.listen('50007', '127.0.0.1');

server.on('connection', function(socket){
    camera.read(function(image){
        image.save('original.jpg');

        fs.readFile('original.jpg', 'base64', function(err, image){
            socket.write(image, 'base64', function(){
                socket.end();
            });
        });
    });
}); 
```

在客户端我循环直到从服务器收到 FIN。这是客户端代码：

```
var net = require('net');
var fs = require('fs');
var client = new net.Socket();
var buffer ='';
client.setEncoding('base64');

client.connect('50007', '127.0.0.1', function(){
    console.log('Connecting to server...');
});

client.on('data', function(data){
    buffer += data;
});

client.on('end', function(){
    var dataBuffer = new Buffer(buffer, 'base64');
    fs.writeFile('copy.jpg', dataBuffer, function(err){
        if(err){
            console.log(err);
        }
    });
}); 
```

问题是整个图像实际上并没有被发送。当我打开收到的文件 copy.jpg 时，底部总是缺少一个块。

在最终版本中，目标是一个接一个地发送一个 jpg，并通过诸如“EndOfFile”之类的关键字来分隔每个“jpg”的结尾。我试图通过在发送之前将关键字“EndOfFile”附加到我的base64编码图像来做到这一点，但在接收端确实搞砸了。

高级服务器示例：

```
fs.readFile('original.jpg', 'base64', function(err, image){
    image += 'EndOfFile';
    socket.write(image, 'base64');
}); 
```

一个客户端，循环将检查关键字的每个数据块，如果找到它，则缓冲区中的任何内容都将写入文件并重置缓冲区，为下一个文件做好准备。

高级客户端示例

```
client.on('data', function(data){
    if(data.indexOf('EndOfFile') > 0){
        buffer += data.substr(0, data.indexOf('EndOfLine'));
        var dataBuffer = new Buffer(buffer, 'base64');

        fs.writeFile('copy.jpg', dataBuffer, function(err){
            if(err){
                console.log(err);
            }
        });

        buffer = '';
    } else {
        buffer += data;
    }
}); 
```

我已经让它在 Python 中工作，所以我认为我的逻辑是正确的，但我在 NodeJS 中并不那么舒服。

如果有人能告诉我这是否是一种理智的方法，我可能在哪里出错了。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T09:44:52.637

我怀疑您在`end`最后一点数据仍在缓冲时看到了事件。

尝试等待`close`事件而不是`end`事件。我不确定套接字，但在其他 Node API`spawn`中，`end`事件会在相关流被刷新之前提前触发，因此可能仍有缓冲数据在等待。

您可以通过管道避免自己管理。使用`fs.createWriteStream()`和`.pipe()`套接字流到文件。

# iphone - 在 IOS 6 中投射 MKAnnotationView 失败

> ID：12845745
> 
> 赞同：0
> 
> 时间：2012-10-11T17:59:53.343
> 
> 标签：iphone, ios, cocoa-touch, ios6

我将 MKAnnotationView 子类化以使用其他内容更改默认注释图像。这在 IOS4 中运行良好，但现在我尝试为 IOS6 编译和运行它，我收到以下错误消息：

[MKPinAnnotationView setImageForAnnotationWithType:]：无法识别的选择器发送到实例 0x25936400

setImageForAnnotationWithType 当然是定义的。对我来说，它似乎无法正确转换 annotationView 对象。

我使用此行获取注释对象：

```
LAnnotationView *anotationView = [_mapView viewForAnnotation:anotation]; 
```

此行调用以下方法，我在其中转换并返回对象：

```
-  (LAnnotationView *) viewForAnnotation:(Annotation *)annotation
{
    LAnnotationView *resultView = (LAnnotationView *) [_mapView viewForAnnotation:annotation];
    return resultView;
} 
```

返回对象后，我调用失败的实际方法：

```
[anotationView setImageForAnnotationWithType:LMapAnnotationGreenArrow]; 
```

我尝试使用 isKindOfClass 来检查类类型，但它也失败了。任何线索这里可能有什么问题？如前所述，它在以前版本的 IOS 中运行良好。

# r - 为什么惰性求值在这个 R 函数中不起作用？

> ID：12845747
> 
> 赞同：9
> 
> 时间：2012-10-11T17:59:57.097
> 
> 标签：r, lazy-evaluation, ellipsis

> **可能重复：**
> [如何编写一个 R 函数来评估数据框中的表达式](https://stackoverflow.com/questions/4682709/how-to-write-an-r-function-that-evaluates-an-expression-within-a-data-frame)

我想编写一个对 data.frame 进行排序的函数——而不是使用繁琐的 order()。鉴于类似

```
> x=data.frame(a=c(5,6,7),b=c(3,5,1))
> x
  a b
1 5 3
2 6 5
3 7 1 
```

我想说的是：

```
sort.df(x,b) 
```

所以这是我的功能：

```
sort.df <- function(df, ...) {
  with(df, df[order(...),])
} 
```

我为此感到非常自豪。鉴于 R 的惰性求值，我认为 ... 参数只会在需要时进行求值 - 到那时，由于“with”，它将在范围内。

如果我直接运行“with”行，它可以工作。但功能没有。

```
> with(x,x[order(b),])
  a b
3 7 1
1 5 3
2 6 5
> sort.df(x,b)
Error in order(...) : object 'b' not found 
```

出了什么问题以及如何解决？例如，我经常在像 plyr 这样的包中看到这种“魔法”。有什么诀窍？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T18:17:16.727

这将做你想要的：

```
sort.df <- function(df, ...) {
  dots <- as.list(substitute(list(...)))[-1]
  ord <- with(df, do.call(order, dots))
  df[ord,]
}

## Try it out
x <- data.frame(a=1:10, b=rep(1:2, length=10), c=rep(1:3, length=10))
sort.df(x, b, c) 
```

这也将是：

```
sort.df2 <- function(df, ...) {
    cl <- substitute(list(...))
    cl[[1]] <- as.symbol("order")
    df[eval(cl, envir=df),]
}
 sort.df2(x, b, c) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T18:17:18.163

这是因为当你传递 b 你实际上并没有传递一个对象。在你的函数里面放一个`browser`，你就会明白我的意思了。我从某处的某个互联网机器人那里偷了这个：

```
x=data.frame(a=c(5,6,7),b=c(3,5,1))

sort.df <- function(df, ..., drop = TRUE){
    ord <- eval(substitute(order(...)), envir = df, enclos = parent.frame())
    return(df[ord, , drop = drop])
}

sort.df(x, b) 
```

将工作。

如果您正在寻找一种在应用意义上做到这一点的好方法，那么也会：

```
library(taRifx)
sort(x, f=~b) 
```

# blackberry-simulator - 黑莓 10 开发者设备“错误：设备”

> ID：12845752
> 
> 赞同：1
> 
> 时间：2012-10-11T18:00:18.830
> 
> 标签：blackberry-simulator, blackberry-10

我在黑莓 10 开发人员设备上收到错误“错误：设备”。将未签名的 .bar 文件安装到设备时出现此错误。

它早些时候工作正常，但突然开始显示此错误。我试图重新启动设备，但仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:22:25.603

您使用哪个开发环境/SDK 出现此错误？本机/WebWorks/Air/Android。

请根据 SDK 标记您的问题，以确保您得到及时响应。示例（黑莓网络工程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T01:19:26.887

必须在 USB 模式下禁用自动才能从 linux 主机部署...

# java - 如何停止导出空的 .ear 文件？

> ID：12845753
> 
> 赞同：0
> 
> 时间：2012-10-11T18:00:18.097
> 
> 标签：java, eclipse, maven, ear

对于我的 Maven 项目，我可以`.jar`通过`mvn compile`.

但是，在 Eclipse 中导入项目后，默认`Export`操作变为导出`.ear`文件，该文件始终导出（并由更高级别的项目自动构建）为空，只有 Manifest 文件，尽管我仍然可以手动导出到正常运行的 .罐。

我怎样才能解决这个问题，通过导出一个`.jar`或一个包含类和东西的东西`.ear`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:09:38.357

检查项目的 pom 文件是否将编译后的工件类型指定为 jar，如下所示：

```
<packaging>jar</packaging> 
```

如果是这种情况，则查找对另一个 .pom 的“父”项目引用，这可能是决定 Eclipse 如何编译项目的那个。

例如。

```
 <parent>
    <groupId>com.mycompany.app</groupId>
    <artifactId>my-app</artifactId>
    <version>1</version>
  </parent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:05:42.500

我建议您使用[Maven EAR 插件](http://maven.apache.org/plugins/maven-ear-plugin/)。

这是一个关于如何使用 maven-ear-plugin的[好文档。](http://antoniogoncalves.org/2009/10/23/because-i-always-forget-how-to-use-maven-ear-plugin/)

# php - PHP MySQL文件上传只是偶尔工作

> ID：12845754
> 
> 赞同：2
> 
> 时间：2012-10-11T18:00:19.030
> 
> 标签：php, mysql

基本上我已经编写了一个脚本来允许后端的用户为画廊上传图片。该脚本应该将文件上传到服务器，然后将文件名和信息发布到数据库中。

它总是将文件上传到服务器而不会失败，但是由于某种原因，它只是偶尔将其发布到数据库中。有时它工作正常，但 10 次中有 8 次上传文件，仅此而已，脚本如下。

```
<?php  

 //This is the directory where images will be saved  
 $target = "images/";  
 $target = $target . basename( $_FILES['photo']['name']);  

 //This gets all the other information from the form  
 $name=$_POST['name'];  
 $caption=$_POST['caption'];  
 $pic=($_FILES['photo']['name']);  
 $live=$_POST['live']; 

 //Connecting to the database 
 require_once('../Connections/tim.php');  

 //Writes the information to the database  
 mysql_query("INSERT INTO `gallery` VALUES ('$name', '$caption', '$pic', '$live')") ;  

 //Writes the photo to the server  
 if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))  
 {  

 //Tells you if its all ok  
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded successfully, press back to upload more";  
 }  
 else {  

 //Gives and error if its not  
 echo "Sorry, there was a problem uploading your file.";  
 }  
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:04:53.020

这可能是因为您有 sql 注入漏洞：如果标题（或任何其他发布的字段）包含例如 a `'`，它将破坏您的查询。

您应该转储`mysql_*`函数并使用 PDO 或 mysqli 切换到准备好的语句。并始终添加错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:09:37.643

您确实应该阅读有关[SQL Injection](http://php.net/manual/en/security.database.sql-injection.php)的内容，并且您**应该使用建议的 PDO 或 mysqli**（如[jeroen](https://stackoverflow.com/a/12845830/1149736)）。

但是可以通过以下方式在您的情况下进行调试：

```
mysql_query("INSERT INTO `gallery` VALUES ('$name', '$caption', '$pic', '$live')") ;  
if( mysql_errno() != 0){
     // mysql error
     // note: message like this should never appear to user, should be only stored in log
     echo "Mysql error: " . htmlspecialchars( mysql_error());
     die();
} 
```

而且您必须至少将数据库输入转义[`mysql_real_escape_string()`](http://www.php.net/manual/en/function.mysql-real-escape-string.php).

# vim - 在 VIM 中在行首和行尾添加单词

> ID：12845758
> 
> 赞同：1
> 
> 时间：2012-10-11T18:00:33.277
> 
> 标签：vim, replace, substitution

> **可能重复：**
> [在 vi/vim 中保留某些“单词”的同时替换](https://stackoverflow.com/questions/11624166/replace-while-keeping-certain-words-in-vi-vim)

假设我有几行像

```
 $adv_id;
            $am_name; 
            $campaign_ids;
            $repeat_on;
            $opt_days;
            $opt_time;
            $am_or_pm; 
```

假设我使用可视模式选择所有行..如何在每行的开头和结尾添加字符，使其看起来像

```
 $_REQUEST($adv_id);
        $_REQUEST($am_name; 
        $_REQUEST($campaign_ids);
        $_REQUEST($repeat_on;
        $_REQUEST($opt_days);
        $_REQUEST($opt_time);
        $_REQUEST($am_or_pm); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:03:50.240

[与您的其他问题](https://stackoverflow.com/q/12845307/275567)非常相似，因此那里的解释应该可以帮助您理解这个替代品。将线条选为可视块，使用以下替代命令：

```
:'<,'>s/\$\(.*\);/$_REQUEST(\1); 
```

和以前一样，`'<,'>`如果您有视觉选择，则会在命令行中为您自动填充。

这里的不同之处在于我们使用`\(\)`了一个*捕获组*，它将捕获部分正则表达式，并在替换中再次使用它， using`\1`指的是*第一个*捕获组。

此外，由于此正则表达式使用`$`字面来定位替换，因此需要对其进行转义：`\$`，因为它在正则表达式中具有特殊含义：*end of line*。

如果您需要在一行中有*多个*`g`替换，则需要添加标志，并且您可能需要删除分号：

```
:'<,'>s/\$\(.*\);/$_REQUEST(\1)/g 
```

反向正则表达式，例如用 替换`$_REQUEST($adv_id);`，`$adv_id;`非常相似：

```
:'<,'>s/\$_REQUEST(\(.*\))/\1 
```

在这里，我们在捕获组中捕获 a 中括号之间的所有内容`$_REQUEST(...);`，并且该捕获组是整个替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:04:24.457

在可视模式下，`:`在命令行中点击并使用它：

```
:'<,'>s/^\(.*\);$/$_REQUEST(\1);/g 
```

`\(`并捕获该`\)`行的匹配表达式，并`\1`在替换中调用捕获的组。

使用`:'<,'>`告诉 Vim 通过以下命令（`s`在本例中）过滤当前选择。

# android - Android：防止活动被多次实例化

> ID：12845761
> 
> 赞同：3
> 
> 时间：2012-10-11T18:00:48.367
> 
> 标签：android, android-intent

我正在浏览 Android [Task 和 Back Stack 文档](http://developer.android.com/guide/components/tasks-and-back-stack.html)，有一次他们提到了这一点：

> 如果您的应用程序允许用户从多个活动启动特定活动，则会创建该活动的一个新实例并将其推送到堆栈上（而不是将任何先前的活动实例置于顶部）。因此，您的应用程序中的一个 Activity 可能会被多次实例化（甚至来自不同的任务），如图 3 所示。因此，如果用户使用“后退”按钮向后导航，则该 Activity 的每个实例都会按照它们的顺序显示已打开（每个都有自己的 UI 状态）

举个例子：

我有 Activity A 启动 Activity B 启动 Activity C 启动 D。

**堆栈是 A->B->C->D**现在可以从 D 开始 C 所以当我们从 D 开始 C 堆栈将是

**A->B->C->D->C**

现在，我希望 Activity 在 Back Stack 中只有 1 个实例或只有 1 个条目，而不是这种标准行为。“SingleTop”将不起作用，因为当我们从 D 启动 Activity C 时它不在顶部。

我可能会遗漏一些东西，但有什么办法可以确保活动只有 1 个 backstack 条目？

谢谢普拉内

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T18:04:31.183

使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`，例如：

```
 Intent intent = new Intent(context, <your_activity_here>);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    context.startActivity(intent); 
```

因此，活动 C 之后堆栈中的所有活动都将自动完成。如果您使用指定的标志

**A->B->C->D**

会变成

**A->B->C**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T18:11:46.500

你也可以使用`android:launchMode="singleInstance" in your activity tag in manifest`

# google-app-engine - 标签的全文 API

> ID：12845778
> 
> 赞同：0
> 
> 时间：2012-10-11T18:01:49.750
> 
> 标签：google-app-engine

我开始使用全文 API。我使用的是索引模式，建议我使用全文 API 来防止索引爆炸。我需要概念化方面的帮助。

我的应用是 CRM - 列表。它有联系人，每个联系人可以有 5-10 个标签和创建日期。

我知道我可以对各个字段进行 AND 或 OR 操作，但我不确定如何设置文档以搜索类似以下内容

使用 Tag1 和 Tag2 但不使用 Tag3 搜索所有联系人

我应该使用 atom 还是在文档中创建多个与标签同名的字段。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:20:16.267

为什么没有一个标签字段作为 TextField：

```
search.TextField(name='tags', value='tag1 tag2') 
```

和查询：

```
tags:(tag1 AND tag2) AND (NOT tags:tag3) 
```

# php - php mysql - 如果不为空，则搜索字段和类别

> ID：12845782
> 
> 赞同：0
> 
> 时间：2012-10-11T18:01:59.887
> 
> 标签：php, mysql, if-statement, full-text-search

我有一个简单的 php mysql 搜索来搜索数据库，但是，我似乎无法让它从搜索字段和类别中搜索文本，但我只希望它在选择时搜索类别，

这是我尝试过的代码：

```
if ($search !== null){

    $sql = "SELECT * FROM people WHERE MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE) ORDER BY price ".$price." LIMIT ".$start.", ".$limit;

    $q   = $conn->prepare($sql) or die("failed!");
    // Bind the params to the placeholders
    $q->bindParam(':search', $search, PDO::PARAM_STR);
    $q->execute();
}

if ($search !== null && $category !== null){

    $sql = "SELECT * FROM people WHERE MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE) and category=:category ORDER BY price ".$price." LIMIT ".$start.", ".$limit;

    $q   = $conn->prepare($sql) or die("failed!");
    // Bind the params to the placeholders
    $q->bindParam(':search', $search, PDO::PARAM_STR);
    $q->bindParam(':category', $category, PDO::PARAM_STR);
    $q->execute();
} 
```

但是，如果选中，这仍然会忽略类别字段选项！有任何想法吗？

它们的设置如下：

```
 // Check and set category
$category = (!empty($_GET['category']) ? $_GET['category'] : null);

// Check and set search
if(!empty($_GET['search'])){
    $search = $_GET['search'];
}else{
    $search = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:10:50.220

做一些调试以确保`$search`并`$category`正在设置。这很可能是你的问题。从它的外观来看，`$category`应该设置（因为你说它来自查询字符串），但只需检查两者以确定。就像是：

```
if($category !== null)
    die("category = $category");
else {
    die("no category");
}
//do same test for $search 
```

如果用户从链接 ( `<a href="search.php?category=Books">Books?</a>`) 访问此页面，我看不出如何`$_GET['search']`设置。

我建议您更改您的`if`语句以提高效率（只有 1 应该执行）：

```
if ($search !== null){
    if($category !== null){
        //query with category
    }
    else {
        //query w/o category
    }
} 
```

另外，我会`isset()`用来检查这些变量是否被实例化而不是`empty()`.

# css - 随页面宽度调整的可滚动 DIV

> ID：12845784
> 
> 赞同：0
> 
> 时间：2012-10-11T18:02:15.440
> 
> 标签：css, html, position

我有一个想要滚动的 DIV，但问题是我正在使用 position: fixed; 并且 DIV 不会与页面的其余部分一起调整它的位置；因此在小分辨率上消失。任何建议都会很棒。

这是当前的 DIV：

```
<div style="
display: block; 
top: 200px; 
left: 1500px; 
width: 130px; 
position: fixed; 
border: 1px solid rgb(136, 136, 136); 
padding: 10px; 
text-align: center; 
font-weight: bold; 
color: rgb(255, 255, 255); 
background-color:#FFFFFF;
"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:05:52.890

而不是使用像素的顶部和左侧属性使用百分比。例如：`top:20%`而不是`top:1200px`. 在较小的分辨率下，您的左上角值会使您的 div 离开屏幕。试试这个

```
display: block; 
top: xx%; 
left: nn%; 
width: mm%; 
position: fixed; 
border: 1px solid rgb(136, 136, 136); 
padding: 10px; 
text-align: center; 
font-weight: bold; 
color: rgb(255, 255, 255); 
background-color:#FFFFFF; 
```

根据您的潜水大小调整您的百分比值。附注如果您的目标是移动设备，您也可以使用媒体查询，例如。

```
@media all and (max-width: 699px) and (min-width: 520px), (min-width: 1151px) {
  #myDivId{
   width: 100px; /* or width:10%; */
  }
} 
```

# jquery - jqGrid setSelection 到分页行

> ID：12845786
> 
> 赞同：1
> 
> 时间：2012-10-11T18:02:18.937
> 
> 标签：jquery, jqgrid

我有一个 jqGrid 用于显示相对论的大量行，所以我启用了分页，一次只能获取 100 行。我还具有允许用户向网格添加新行的功能。有一个要求是，在添加一行之后，该行应该被选中并在网格中可见。

我目前正在使用 setSelection 按 id 选择行，如果该行位于当前页面上，则此方法有效。但是，如果该行不在当前页面上，则不会发生任何事情。有人对我如何实现此功能有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:43:50.027

jqGrid 仅加载当前页面的行数据。有关更多背景信息，请参阅[此问题。](https://stackoverflow.com/questions/12408427/jqgrid-select-particular-row-which-may-or-may-not-be-visible)

一种可能的解决方案是添加行，然后向服务器发出请求以计算行的页面。然后，您可以使用[此答案](https://stackoverflow.com/questions/1349216/how-to-programmatically-page-to-next-prev-page-in-jqgrid)中的代码转到该页面并选择该行。您的代码可能类似于：

```
grid = $("#grid");
grid.setGridParam({page: myPage});
grid.trigger("reloadGrid");
grid.setSelection(myRow); 
```

这有帮助吗？

# ios - 将 SQL 存储添加到 NSPersistentStoreCoordinator 时，如何调试/处理间歇性“授权被拒绝”和“磁盘 i/o”错误？

> ID：12845790
> 
> 赞同：22
> 
> 时间：2012-10-11T18:02:35.743
> 
> 标签：ios, core-data, nspersistentstore

我在应用商店中有一个应用，并且正在使用日志服务来获取崩溃日志和相关的日志数据。我看到了间歇性崩溃（受影响的用户数量少，每个用户的崩溃数量少），但这让我感到困惑。

这些崩溃中发生的情况如下：

1.  应用程序启动并初始化核心数据堆栈

2.  应用程序尝试使用以下代码将 SQL 存储添加到 NSPersistentStoreCoordinator（`storeURL`有效）：

    ```
    NSDictionary *options = @{
        NSMigratePersistentStoresAutomaticallyOption : @(YES),
        NSInferMappingModelAutomaticallyOption : @(YES)
    };

    sqlStore = [_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                         configuration:nil
                                                                   URL:storeURL
                                                               options:options
                                                             error:&error]; 
    ```

3.  添加此商店时出现以下错误之一：

> NS错误：
> 
> > Domain=NSCocoaErrorDomain
> > Code=256 “操作无法完成。（Cocoa 错误 256。）”
> > UserInfo=0x1dd946a0 {NSUnderlyingException=授权被拒绝，NSSQLiteErrorDomain=23}

或者

> NS错误：
> 
> > Domain=NSCocoaErrorDomain
> > Code=256 “操作无法完成。（Cocoa 错误 256。）”
> > UserInfo=0xc6525d0 {NSUnderlyingException=磁盘 I/O 错误，NSSQLiteErrorDomain=10}

在这种情况下，应用程序将崩溃，因为应用程序需要 SQL 存储才能运行。我可以尝试通过尝试新的 storeURL 来优雅地处理此失败，但我不希望用户丢失现有数据。此外，我从未亲自重现过此问题，并且基于受影响的用户数量和崩溃日志的数量较少，我认为这是一个影响较小的问题，并且不会在后续应用启动时再次出现。

我希望有一位 Core Data 大师就如何调试和预防/处理这些情况提出一些建议。我的核心数据堆栈初始化代码直接来自 xcode 项目生成器，并且我已经排除了任何并发问题，因为持久存储协调器仅初始化一次（在启动时）并且此错误发生在此初始化中。

如果相关，很高兴提供更多代码/信息。

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-27T07:15:59.677

看起来像 XJones，我已经能够找到造成这种情况的原因。它似乎是一个 iOS 边缘案例错误或未记录的行为。我已在 Apple 错误 ID 12935031 下提交了此文件。

有一个下落不明的场景，即使用 Core Location 重大位置更改或区域监控的应用程序可能无法正确启动（或产生其他意外后果），因为从 iOS 5 开始，Core Data 存储使用数据保护（加密）默认。

重现步骤：

1) 在设备上开启密码保护

2) 创建一个启动重要位置监控或区域监控的应用程序，即使在后台也能保持启动。IE。使用后台重大位置更改或区域监控的应用程序。

3）等待设备上的电池耗尽（也可能有其他原因）

4) 设备将关闭

5) 将设备连接到 Mac

6) 充电充足后，设备将启动。重要提示：此时不要解锁设备。

7) 退出或进入监控范围或导致位置发生重大变化。该设备现在将自动重新启动应用程序，因为它已注册重要位置监控或区域监控

8) 但是，由于用户尚未解锁设备（尚未输入密码），应用程序将无法读取任何受保护的数据文件。在 Core Data 应用程序中，这将导致持久存储协调器无法将持久存储文件添加到托管对象上下文。这将导致应用程序崩溃或根据开发人员使用的代码甚至尝试重置数据库。在其他应用程序中，它可能会由于其他原因导致崩溃，因为这是 iOS 5 及更高版本中默认为 Core Data 存储打开的数据保护功能的意外、未记录的副作用。

在 Apple 纠正此问题或至少记录它之前，解决方案或解决方法是确保您的应用程序停止监视 applicationWillTerminate 中的重大位置更改/区域，或者~~通过为选项字典中的 NSFileProtectionKey 键设置 NSFileProtectionNone 来关闭默认数据保护功能将 Core Data 存储添加到持久存储协调器。~~使用 while() 循环等待文件存储可用，该循环检查受保护的数据是否可用。使用 KVO 可能还有其他方法可以做到这一点，但这种方法工作可靠，并且最容易插入到现有代码中，而无需重新设计整个应用程序启动过程。

~~更新：如果商店中的数据保护已经处于活动状态，看起来仅仅设置该密钥是不够的。您必须手动设置它：~~

 ~~`~~```
[[NSFileManager defaultManager] setAttributes:[NSDictionary dictionaryWithObject:NSFileProtectionNone forKey:NSFileProtectionKey] ofItemAtPath:storePath error:nil]; 
```~~`  ~~这是需要后台位置监控的应用程序的修复，这要归功于来自 XJones 的更多输入以及对 Apple 分散文档的更多研究：

 `````
while(![[UIApplication sharedApplication] isProtectedDataAvailable]) {
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.5f]];
} 
````  `此代码在您尝试将存储数据文件添加到持久存储协调器之前进入。

**2015 年更新：**您还可以将 NSPersistentStoreFileProtectionKey 设置为 NSFileProtectionNone。这将正确禁用文件保护（如果您不需要它）并且无需任何变通方法即可正常工作。它在以前的尝试中不起作用的原因是因为我正在测试的字典键不正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T01:50:08.033

`UIApplication`我刚刚注意到文档中的以下通知：

`UIApplicationProtectedDataDidBecomeAvailable` `UIApplicationProtectedDataWillBecomeUnavailable`

这些在 iOS 4.0 及更高版本中可用。@lupinglade，我认为您需要观察这些通知，并且只有在收到`UIApplicationProtectedDataDidBecomeAvailable`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-15T12:27:29.800

解决方案@lupinglade 在我的情况下非常有效（VoIP 应用程序在重新启动时启动），但我还想指出，当受保护的数据可用时调用 AppDelegate 的委托函数：

```
applicationProtectedDataDidBecomeAvailable: 
```

这使得在我的案例中实施解决方案变得更加容易。

根据头文件，它可以从 iOS 4 开始使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T20:12:33.150

同样的问题在这里，仍然无法找到解决方案。我发现这似乎与在设备上设置了锁码有关。如果没有锁定代码，我永远无法重现错误，现在我已经能够重现很多次了。控制台日志是：

错误是：错误域 = NSCocoaErrorDomain 代码 = 256 “操作无法完成。（可可错误 256。）” UserInfo = 0x1fd80110 {NSUnderlyingException = 授权被拒绝，NSSQLiteErrorDomain = 23}

文件确实存在且未使用任何加密。``~~~~

# git - 创建 git 分支并提交到单独的分支

> ID：12845794
> 
> 赞同：1
> 
> 时间：2012-10-11T18:02:46.610
> 
> 标签：git, git-branch

noob to git：稍微
扩展一下[这个问题](https://stackoverflow.com/questions/2489559/git-can-i-commit-my-working-directory-to-a-new-branch-without-commiting-it-to-a)

我创建了一个存储库并将我的提交`README.md`到`master`分支。
我的本地文件夹结构是：

```
projectName  
 --README.md  
 -- + part1  
 -- -- README.md  
 -- -- + src  
 -- + part2  
 -- + ... 
```

`git init`我在文件夹中初始化`projectName`并能够提交。

然后我做`git checkout -b part1`。
`cd .\part1`和`git add .\README.md .\src`

当我提交并推送`git push -u origin part1`并检查我的存储库时，我的主分支包含所有文件，`part1`并且该`part1`分支具有正确的文件，但它包含`README.md`来自主分支的文件。

在我“删除”主 README.md 之后，我想从分支 part1 提交本地 part1 文件夹中的文件/文件夹。我遇到的问题是当我提交实际文件夹 part1 时出现在 part1 分支中。我只想显示内容。

**EDIT_1**
我想创建多个分支。提交到`master`分支后，我这样做：
`git checkout -b part1`
当我提交时，`part1`我不希望 README.md 随之而来`master`。这样做`git rm README.md`会从我的本地目录中删除文件。

**更新**
我对自己问题的第二部分感到困惑。@willoller 澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:59:04.770

使用以下命令`git checkout -b new_branch`从*当前*分支创建一个新分支。

因此，您创建了`part1`from`master`并且您的 README.md 是从`master`.

“-u”创建与远程分支的关系。

如果你想将你的分支推送到远程主机，你可以使用`git push origin my_branch`.

要从分支使用中删除文件`git rm`并在之后提交更改。

我希望我有所帮助。

# php - MySQL定时器和删除功能

> ID：12845800
> 
> 赞同：1
> 
> 时间：2012-10-11T18:03:02.000
> 
> 标签：php, mysql, file-upload, timer

我正在尝试实施一种解决方案，该解决方案允许用户上传文件，但不会让他们在这样做后的 24 小时内再上传另一个文件。我想象一个 MySQL 表条目在用户提交文件时被标记，然后 24 小时后我需要将标记改回以允许再次上传。

此外，我想让它这样当用户上传文件时，它被 MySQL 表引用和存储，允许用户查看他们上传的文件并在他们想要的时候将其删除。这还需要从共享目录中删除上传的文件。

有人可以为此指出正确的方向吗？我不是要求为我完成工作，只是好奇我会使用什么方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:11:58.627

如果您的数据库中有两个表 - 一个用于用户，另一个用于捕获用户上传的文件，请在后一个表中保留一个 datetime_uploaded 列。当用户登陆允许他们上传文件的页面时，执行返回他们上传的最新文件的查询。

如果日期和时间小于 24 小时前，请不要向用户提供表单。否则允许上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:07:22.867

您可以使用`before-insert`触发器并检查最后插入的日期。如果插入太早，则抛出异常。

# java - 在哪里保存一个正在扩展到 Java 中的另一个类的类？

> ID：12845801
> 
> 赞同：1
> 
> 时间：2012-10-11T18:03:10.210
> 
> 标签：java

```
public class Lab5 extends Lab4 implements ActionListner 
```

Lab5 是我现在正在做的项目，我需要在我的 Lab5 中扩展 Lab4 类。我的问题是我需要在哪里保存 Lab4 类，以便 Lab5 可以访问它。这就是我需要转移的所有东西，Lab4.class，还是我还需要在 Lab5 中放入其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:05:19.973

如果这些类是相同的`package`并且你有`Lab4`( `Lab4.java`) 的来源，只需将它们一起编译（编译器会找到`Lab4.java`）：

```
$ javac Lab5.java 
```

如果您已经编译了`Lab4.class`文件，请在编译期间将其包含在 CLASSPATH 中：

```
$ javac -cp Lab4.class Lab5.java 
```

如果您想在 IDE 中访问此类，则必须将此类/JAR 添加为依赖项/库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:07:11.250

你的 Lab4.class 在哪里？如果它在同一个包中，则无需执行任何操作。如果它在其他包中，请`import package.Lab4;`在顶部添加.`package``Lab4.class`

# javascript - Ajax 调用不断给我“内部服务器错误 500”

> ID：12845802
> 
> 赞同：0
> 
> 时间：2012-10-11T18:03:22.170
> 
> 标签：javascript, jquery, asp.net, ajax, stored-procedures

我对 ajax 不是很好，但是如果存储过程没有返回数据或返回数据，并且如果它正在返回数据，那么我试图在后面的代码中调用一个方法来 cehck，如果它正在返回数据，那么让该方法返回一个 bool 评估真的。我正在将一个 id 列表传递给该方法。但是我的 ajax 调用可能是错误的。

这是我的ajax：

```
var hasExhibitLinked = false;
            var selectedTasksList = getSelectedTaskIDs();

            $.ajax({
                type: "POST",
                url: '<%=ResolveUrl("~/Tasks/ViewTasks.aspx/HasExhibitLinked")%>',
                data: "{'taskID':['" + selectedTasksList.join(',') + "']}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    arr = data.d;

                    hasExhibitLinked = arr[0];
                },
                error: function (data) {
                }
            });

            if (hasExhibitLinked) {
                showMessage("There is an Exhibit linked.");

            }
            else {
                showMessage("Not exhibits linked");

            } 
```

如果需要更多信息，这是我的代码：编辑：

```
[WebMethod]
public static bool[] HasExhibitLinked(String[] taskID)
{
    bool hasLink = false;
    var conn = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
    var cmd = new SqlCommand("p_Link_List", conn);
        cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@Taskid", SqlDbType.Int));

    foreach (var id in taskID)
    {
        cmd.Parameters["@Taskid"].Value = taskID;
        try
        {
            conn.Open();
            String s = (String)cmd.ExecuteScalar();
            if (s != null)
                hasLink = true;
        }
        catch (SqlException sql)
        {
            ErrorLogger.Log(sql.Number, sql.Source, sql.Message);
        }
        catch (Exception ex)
        {
            ErrorLogger.Log(ex);
        }
        finally
        {
            if (conn.State == ConnectionState.Open)
                conn.Close();
        }
    }
    return new bool[] { hasLink };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:04:58.797

taskID`int`在后面的代码和`Array`JavaScript 中是一个。

```
data: "{'taskID':['" + selectedTasksList.join(',') + "']}", 
```

需要一个方法签名，如：

```
public static bool[] HasExhibitLinked(List<int> taskID) 
```

* * *

评论中的问题二：这是 ajax 的常见错误。该代码是异步的。因此，当您尝试访问它时，该变量不存在。这就是为什么你会看到很多“回调”函数的原因。

```
 var hasExhibitLinked = false;
        var selectedTasksList = getSelectedTaskIDs();

        $.ajax({
            type: "POST",
            url: '<%=ResolveUrl("~/Tasks/ViewTasks.aspx/HasExhibitLinked")%>',
            data: "{'taskID':['" + selectedTasksList.join(',') + "']}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                arr = data.d;

                hasExhibitLinked = arr[0];
                // Now it exists and is ready
                if (hasExhibitLinked) {
                    showMessage("There is an Exhibit linked.");
                } else {
                    showMessage("Not exhibits linked");
                }
            },
            error: function (data) {
            }
        }); 
```

# c# - Web 部件中的 NullReferenceException

> ID：12845807
> 
> 赞同：2
> 
> 时间：2012-10-11T18:03:41.230
> 
> 标签：c#, asp.net, .net, sharepoint, sharepoint-2010

我创建了一个 Web 部件，有五种配置：在 usercontrol.ascx 中，我通过以下代码获取值：

```
namespace tasks_email.tasks_email_webpart
{
    public partial class tasks_email_webpartUserControl : UserControl
    {

        public tasks_email_webpart WebPart { get; set; }

        protected void Page_Load(object sender, EventArgs e)
        {
        }
 protected void btn_send_id_Click(object sender, EventArgs e)
        {

            string subject = " ";
            subject = this.WebPart.SUBJECT as string;
            string emailAddrS = " ";
            emailAddrS = this.WebPart.EMAILADDR as string;
            string checkout_changes = " ";
            checkout_changes = this.WebPart.CHECKOUTLISTSNAMES as string;
            SendCheckout("bo.wang@us.bnpparibas.com", subject, "this is a project test"); 
```

但是当我点击按钮时，它说：空引用异常，无论我编辑配置什么东西，变量都无法获取 SUBJECT 值

任何机构都可以告诉我如何处理吗？

*我检查了 webpart.cs，我确实写过：

```
 namespace tasks_email.tasks_email_webpart
{
    [ToolboxItemAttribute(false)]
    public class tasks_email_webpart : Microsoft.SharePoint.WebPartPages.WebPart
    {

        [WebBrowsable(true), Category("Configurations"), Personalizable(PersonalizationScope.Shared), WebDisplayName("Subject")]
        public string SUBJECT { get; set; } 
```

在 ascx 中，我使用以下方法创建了一个按钮：

```
<asp:Button ID="btn_send_id" runat="server" Text=" Email_changes " 
onclick="btn_send_id_Click" CssClass="Search_Submit" onclientclick="return checkna()" 
    /> 
```

错误报告：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   tasks_email.tasks_email_webpart.tasks_email_webpartUserControl.btn_send_id_Click(Object sender, EventArgs e) +375
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +114
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +139
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +28
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2980 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:16:03.797

当您开发 SP2010 可视化 Web 部件时，您应该始终从 Microsoft.SharePoint.WebPartPages.WebPart 继承，因此您的部件看起来像这样：

```
[ToolboxItemAttribute(false)]
public class MyWebPart : Microsoft.SharePoint.WebPartPages.WebPart
{

    [Personalizable(), WebBrowsable, Category("GPWF Settings")]
    public string WebClientUrl { get; set; }

} 
```

因为您是从 UserControl 继承的，所以您总是在属性上获得空引用。

所以如果你不先设置你的道具，你应该像这样修改你的代码：

```
 string subject = this.WebPart.SUBJECT as string;
    string emailAddrS = this.WebPart.EMAILADDR as string;
    string checkout_changes = this.WebPart.CHECKOUTLISTSNAMES as string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:12:12.967

更好的方法是在用户控件中添加 SUBJECT、EMAILADDR 和 CHECKOUTLISTSNAMES 作为公共属性，如下所示：

```
public string Subject {get;set;} 
```

在您实例化用户控件的 Web 部件中，您编写：

```
protected override void CreateChildControls()
{
    var control = (tasks_email_webpartUserControl) Page.LoadControl(_ascxPath);
    control.Subject = this.SUBJECT;
} 
```

通过这样做，您仍将主题设置为 Web 部件属性，但您将数据传递*给*用户控件，而不是尝试*从*用户控件获取数据。

# c++ - 当下一行出现总线错误时，对 cout 感到好奇

> ID：12845809
> 
> 赞同：2
> 
> 时间：2012-10-11T18:03:46.510
> 
> 标签：c++, cout, bus-error

我很好奇 cout 如何处理总线/分段错误。我在下面粘贴了两个示例。因为我不知道如何复制您必须采取的总线错误，如果从我这里 grid.DoMovement，在这个例子中，抛出一个总线错误。当我在总线错误行之前计算某些内容时，我注意到如果我在其中放置一个 endline，它会很好地打印出来，但如果我不放一个 endl，它就不会。底部的例子说明了我的意思。
为什么如果你没有在 cout 中放置一个结束行并且你在后面的一行中有一个总线错误，它不会打印出“示例 2”？

示例 1：

```
std::cout << "example 1" << endl;
grid.DoMovement(); 
```

输出是

```
works
bus error 
```

示例 2：

```
std::out << "example 2";
grid.DoMovement(); 
```

输出是

```
bus error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:07:36.773

`std::endl`不仅向流中添加新行，还刷新输出流的当前缓冲区。如果在输出流缓冲区中有一些数据时出现总线错误，您将看不到数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T18:47:08.937

默认情况下 IOStreams 被缓冲。仅写入缓冲区的任何内容都不会显示。当您使用`std::endl`流时，会添加换行符并刷新流。请注意，通常您**不**希望刷新流：频繁刷新飞行流会显着降低性能！`std::endl`因此，`'\n'`如果您想要换行符，最好不要使用。如果你真的想刷新一个流，你可以显式地使用`std::flush`它来刷新流。

在调试期间，让所有输出在写入后立即显示可能会有所帮助，这样崩溃不会阻止输出显示。如果您遵循上述建议并且不经常刷新，很多输出可能会被缓冲。对此的简单补救措施是使用`std::unitbuf`：此操纵器打开标志`std::ios_base::unitbuf`导致每次插入后刷新输出流。您可以再次关闭该标志，`std::nounitbuf`以避免在已知可以工作的代码部分中减慢速度（或者，至少，已知不会以过于戏剧性的方式失败）：

```
std::cout << std::unitbuf;   // turn on automatic flushing
problematic_code();
std::cout << std::nounitbuf; // turn off automatic flushing 
```

的默认设置是和`std::ios_base::unitbuf`之间的区别：两者都流写入标准错误流（在 UNIX 文件描述符 2 上），但在每次写入后刷新其缓冲区，而没有。`std::cerr``std::clog``std::cerr``std::clog`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:07:33.437

`std::cout`不是时被缓冲`std::cerr`。如果您使用`std::cerr`、 或不使用进行测试`std::endl`，您将看到您的消息。

[http://www.cplusplus.com/reference/iostream/manipulators/endl](http://www.cplusplus.com/reference/iostream/manipulators/endl)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T18:08:11.080

`endl`是一个“神奇”的操纵器，它输出换行符并刷新输出缓冲区。

程序结束时缓冲区通常也会被刷新，因此您通常看不到`endl`. 但是，如果您的程序此后不久崩溃，则不会刷新缓冲区，并且不会出现输出。

您可以将第二个示例更改为

```
std::out << "example 2" << flush; 
```

看看冲洗的效果。

# typescript - 多个文件中的 TypeScript 模块命名空间

> ID：12845810
> 
> 赞同：24
> 
> 时间：2012-10-11T18:03:48.997
> 
> 标签：typescript

我试图在 Typescript 中模仿 C# 的一个特性。

假设我有这个文件夹结构

```
App.ts
Models/
    Person.ts
    Message.ts 
```

然后我`App.ts`想要这个：

```
module MyAppNamespace {
    export class ChatApp {
        User: Models.Person;
        constructor () => {
            this.User = new Models.Person("John");
            this.User.Message = new Models.Message("Hello World");
        }
    }
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-11T18:42:19.350

这是我的建议。我认为您想要做的是定义一个扩展多个源文件的模块。为此，您需要使用如下**内部**模块：

**模特/人物.ts**

```
module Model {

  export class Person {
      name: string;
      Message : Message;
      constructor(name: string) {
          this.name = name;
      }   
  }
} 
```

**模型/消息.ts**

```
module Model {
   export class Message {
       message: string;
       constructor(message: string) {
          this.message = message;
       }   
   }
} 
```

**应用程序.ts**

```
///<reference path='Models/Person.ts'/>
///<reference path='Models/Message.ts'/>
module MyAppNamespace {
    export class ChatApp {
        User: Model.Person;
        constructor () => {
            this.User = new Model.Person("John");
            this.User.Message = new Model.Message("Hello World");
        }   
    }   
} 
```

如果你编译这个

```
tsc App.ts 
```

那么一切都应该工作。注意模块`outer`是如何在两个源文件中声明的。由于这是一个**内部**模块，我们必须通过添加`///<reference path='foo.ts'/>`语句告诉编译器将它们放入我们的范围内。

# excel - Excel VBA：复制/粘贴给定工作簿参考的行

> ID：12845815
> 
> 赞同：0
> 
> 时间：2012-10-11T18:04:08.333
> 
> 标签：excel, vba

这真让我抓狂。

我有一个通过 xlWBk.Sheets(1) 引用的工作簿/工作表

我想基本上做到以下几点：

```
xlWBk.Sheets(1).The sixth row.Copy Everything (text, format, etc)
xlWBk.Sheets(1).Arbitrary row.Paste Everything (text, format, etc) 
```

有没有一种快速/干净的方法来做到这一点？我已经尝试了很多行/范围粘贴命令的组合，但它没有粘贴任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:08:03.287

是的，试试这个：

```
xlWBk.Sheets(1).Range("A6").EntireRow.Copy xlWBk.Sheets(1).Range("A7") 
```

这会将整个 6 行复制到第 7 行。

**编辑**

谢谢胡说，我忘了量化答案中的粘贴书/表。伟大的收获！上面的代码更新了。

# iphone - 使用 iPhone 的日/周和月视图构建日历

> ID：12845816
> 
> 赞同：3
> 
> 时间：2012-10-11T18:04:08.457
> 
> 标签：iphone, ios, calendar

我需要在我的应用程序中添加一个日历（带有日/周/月视图），它尝试[了tapku](http://tapku.com/)，但它只有月视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:09:15.480

你检查过[iPhone 日日历视图吗？](https://stackoverflow.com/questions/9019214/iphone-day-calendar-view) 或[如何获取 UI 日历？](https://stackoverflow.com/questions/6423218/how-can-i-get-the-ui-calendar)

不同的选择是，

1.  [ios 日历视图](http://www.e-string.com/content/ios-calendar-views)

2.  [GCC日历](https://github.com/guicocoa/calendar)

3.  [muhku](https://github.com/muhku/calendar-ui)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T01:39:53.857

你可以试试[JTCalendar](https://github.com/jonathantribouharet/JTCalendar)你有月视图和周视图，它是开源的，适用于 iOS 7 和 8。

# asp.net-mvc - Asp.net MVC 设置验证日期格式在 Chrome 上失败

> ID：12845817
> 
> 赞同：8
> 
> 时间：2012-10-11T18:04:09.737
> 
> 标签：asp.net-mvc

我在 asp.net mvc 中设置验证日期格式 Chrome 时遇到问题，对于 IE 等其他浏览器，Firefox 可以正常工作。

我在我的模型中定义了日期，如下一个代码：

```
[Required]
[Display(Name = "Data fi publicació")]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime PublishingEndDate { get; set; } 
```

在我看来：

```
@Html.TextBoxFor(model => model.PublishingEndDate)
@Html.ValidationMessageFor(model => model.PublishingEndDate) 
```

问题似乎，`@Html.ValidationMessageFor`用格式验证日期`MM/dd/yyyy`，但我想要的是用欧洲格式验证`dd/MM/yyyy`。如何将默认文化验证格式日期更改为`dd/MM/yyyy`？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-17T19:25:15.120

最后我发现这个问题只影响 Chrome，用 IE，Firexfox 可以完美运行，似乎是一个 chrome 错误，我在[http://forums.asp.net/t/1729179.aspx/1找到了解决方案](http://forums.asp.net/t/1729179.aspx/1)

必须使用以下代码覆盖 jquery 的验证器方法：

```
$(document).ready(function () {
    $('.calendarPicker').datepicker({ dateFormat: "dd/mm/yy" });

$.validator.addMethod('date',
    function (value, element, params) {
        if (this.optional(element)) {
            return true;
        }

        var ok = true;
        try {
            $.datepicker.parseDate('dd/mm/yy', value);
        }
        catch (err) {
            ok = false;
        }
        return ok;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:11:32.450

确保你已经在 web.config 中设置了你的文化。这将为所选的文化使用适当的日期和数字格式。

[http://msdn.microsoft.com/en-us/library/bz9tc508(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bz9tc508(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T08:35:01.183

这帮助了我：

```
$(function() {
            $(".datepicker").datepicker({
                todayBtn: true,
                language: "en-GB",
                format: "dd/mm/yyyy",
                clearBtn: true,
                pickTime: false
            });

            $.validator.addMethod("date",
                function(value, element) {
                    return this.optional(element) || parseDate(value, "dd-MM-yyyy") !== null;
                });
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T14:01:23.877

为避免客户端验证，您不希望任何与输入关联的 data-val 属性。所以我所做的是写下纯 HTML，而不是使用 TextFor 或 EditorFor 等......

```
<input type="text" class="datepicker form-control"> 
```

对我来说很好...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-08T16:01:08.510

如果您不想使用日期时间选择器：

客户端验证问题可能是由于*jquery.validate.unobtrusive.min.js*中的 MVC 错误（即使在 MVC 5 中），它**不接受任何日期/日期时间格式**。不幸的是，您必须手动解决它。

**我最终的工作解决方案：**

您必须在之前包括：

```
@Scripts.Render("~/Scripts/jquery-3.1.1.js")
@Scripts.Render("~/Scripts/jquery.validate.min.js")
@Scripts.Render("~/Scripts/jquery.validate.unobtrusive.min.js")
@Scripts.Render("~/Scripts/moment.js") 
```

您可以使用以下方法安装 moment.js：

```
Install-Package Moment.js 
```

然后你终于可以为日期格式解析器添加修复：

```
$(function () {
    $.validator.methods.date = function (value, element) {
        return this.optional(element) || moment(value, "DD.MM.YYYY", true).isValid();
    }
}); 
```

# c# - 使用 C# 读取 XML（使用速记标签）

> ID：12845819
> 
> 赞同：1
> 
> 时间：2012-10-11T18:04:17.030
> 
> 标签：c#, xml, visual-studio

> **可能重复：**
> [XmlReader - 自关闭元素不会触发 EndElement 事件？](https://stackoverflow.com/questions/241336/xmlreader-self-closing-element-does-not-fire-a-endelement-event)

我们中的一群人正忙着为 C# 编写大学作品集……我们必须编写的应用程序之一是天气应用程序……它必须从网站获取 XML 编码，然后显示必要的天气信息，例如降水，温度等

我们在网上找到了多种方法，但找不到处理速记标签的方法。我们必须使用的网站有以下xml编码：

```
<symbol var="01d" name="Fair" number="1"/> <precipitation value="0"/> 
<!-- Valid at 2012-10-10T14:00:00 -->
<windDirection name="South" code="S" deg="182.4"/> 
<windSpeed name="Moderate breeze"     mps="5.9"/> 
<temperature value="17" unit="celsius"/>     
<pressure value="1021.3" unit="hPa"/> 
```

即它通常使用标签的简写方法....

任何人都可以帮助我们使用可以识别标签元素并从中收集属性信息的 C# 代码吗？

我们最接近的是：

```
 XmlTextReader reader = new XmlTextReader("weather.xml");
            while (reader.Read())
            {
                switch (reader.NodeType)
                {
                    case XmlNodeType.Element: // The node is an element.
                        Console.Write("<" + reader.Name);
                        Console.WriteLine(">");
                        break;

                    case XmlNodeType.Text: //Display the text in each element.
                        Console.WriteLine(reader.Value);
                        break;

                    case XmlNodeType.EndElement: //Display the end of the element.
                        Console.Write("</" + reader.Name);
                        Console.WriteLine(">");
                        break;
                } 
```

但这仅适用于带有手写标签的 XML.... 任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:12:52.157

您可以使用（来自 msdn）从标签中读取属性：

```
 while (reader.Read())
            {
...
                if (reader.HasAttributes)
                {
                    Console.WriteLine("Attributes of <" + reader.Name + ">");
                    while (reader.MoveToNextAttribute())
                    {
                        Console.WriteLine(" {0}={1}", reader.Name, reader.Value);
                    }
                    // Move the reader back to the element node.
                    reader.MoveToElement();
                }
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:20:42.360

~~您描述的“速记”通常称为 XML 属性。~~不要使用 XmlReader。有更好的工具来完成这项工作。假设结构更像：

```
<someRoot>
    <symbol var="01d" name="Fair" number="1"/> <precipitation value="0"/> 
    <!-- Valid at 2012-10-10T14:00:00 -->
    <windDirection name="South" code="S" deg="182.4"/> 
    <windSpeed name="Moderate breeze"     mps="5.9"/> 
    <temperature value="17" unit="celsius"/>     
    <pressure value="1021.3" unit="hPa"/>
</someRoot> 
```

您可以轻松地从中解析出属性，如下所示：

```
XDocument doc = XDocument.Parse(someXmlString);
string someAttrValue = doc.Root.Element("symbol").Attribute("var").Value; 
```

# xsd - 验证 XSD 中多个属性值的唯一性

> ID：12845822
> 
> 赞同：0
> 
> 时间：2012-10-11T18:04:25.087
> 
> 标签：xsd, xsd-validation

用下面的 XML 片段更容易说明我的问题：

```
<Hosts>
  <Host Ip1="1.2.3.4" Ip2="1.2.3.5" />
  <Host Ip1="1.2.3.6" Ip2="1.2.3.4" />
  ...
<Hosts> 
```

有没有办法使用 XSD 验证 Ip1 和 Ip2 属性的所有实例的值是唯一的？例如，上面的第二个元素将无法通过验证，因为它的 Ip2 值是第一个元素的 Ip1 值的副本。

谢谢！派鸿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:41:40.537

该`xsd:unique`约束旨在提供这种功能，但它受到特定方式的约束，因此很难看出如何表达您心中的特定约束。（也就是说，可能可以表达您心中的约束，但我自己看不到方法。）

为了其他阅读本文的人的利益，可能值得详细说明这个问题。约束的明显表述是这样的：

```
<!--* Not conformant *-->
<xs:unique name="hostip">
  <xs:selector xpath="Host/@Ip1 | Host/@Ip2"/>
  <xs:field xpath="."/>
</xs:unique> 
```

但是，这不是一个一致的唯一性约束，因为管理选择器的临时约束不允许属性轴。（定义这些约束是为了确保验证器不必将整个文档保存在内存中并涵盖人们认为他们需要的情况。显然没有人认为他们需要检查属性节点值的唯一性，因此定义了 XPath 的子集for selectors 只能选择元素节点。考虑到 XSD 1.0 的设计者试图将元素和属性放在相似的基础上的长度，这看起来是一个显着的设计错误。）

一些读者可能会想到另一种表述，即：

```
<xs:selector xpath="Host"/>
<xs:field xpath="@Ip1|@Ip2"/> 
```

这也是不一致的，因为对于任何选择器，每个字段表达式必须最多返回一个值。

如果您可以重新格式化 XML 以采用以下形式

```
<Hosts>
  <Host>
    <Ip>1.2.3.4</Ip>
    <Ip>1.2.3.5</Ip>
  <Host>
  <Host>
    <Ip>1.2.3.6</Ip>
    <Ip>1.2.3.4</Ip>
  <Host>
  ...
</Hosts> 
```

`xs:unique`然后您可以通过将以下元素添加到元素声明中来强制执行您想到的唯一性约束`Hosts`：

```
<xs:unique name="hostip">
  <xs:selector xpath="Host/Ip"/>
  <xs:field xpath="."/>
</xs:unique> 
```

它具有将 1.2.3.4 的重复标记为 IP 值的预期效果。

# rdf - 如何将 OWL 本体注册到 Jade 代理中？

> ID：12845824
> 
> 赞同：2
> 
> 时间：2012-10-11T18:04:30.050
> 
> 标签：rdf, jena, owl, agents-jade

[我使用Jade](http://jade.tilab.com/)创建代理，并使用 OWL 和 Jena 进行本体开发。我想在`ServiceDescription`. 我怎样才能做到这一点？我应该使用 OWL 类还是 Jena 模型？我不知道如何设置`sd.setOwnership()`和`sd.addOntologies()`。我的代码：

```
DFAgentDescription dfd = new DFAgentDescription();
ServiceDescription sd = new ServiceDescription();
sd.setType(agentType);
sd.setName(a.getName());
sd.setOwnership(???);
sd.addOntologies(???);
dfd.setName(a.getAID());
dfd.addServices(sd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T03:36:33.563

我没有使用过 Jade，但文档[`addOntologies`](http://jade.tilab.com/doc/api/jade/domain/FIPAAgentManagement/ServiceDescription.html#addOntologies%28java.lang.String%29)并[`setOwnership`](http://jade.tilab.com/doc/api/jade/domain/FIPAAgentManagement/ServiceDescription.html#setOwnership%28java.lang.String%29)说这些方法中的每一个都采用一个`String`，所以没有人期望 OWL 类或 Jena 模型。

Jade 似乎有自己的[`Ontology`](http://jade.tilab.com/doc/api/jade/content/onto/Ontology.html)类，因此 OWL 本体和 Jade 本体之间可能存在脱节（尽管我不确定）。似乎本体与名称相关联，我希望那些注册的名称是该`addOntologies`方法所期望的。

# php - 在while循环中将值添加到数组中，覆盖旧值

> ID：12845825
> 
> 赞同：1
> 
> 时间：2012-10-11T18:04:31.657
> 
> 标签：php, arrays, while-loop

这是我的代码：

```
if ( 0 < $matches->total() ) {
    while ( $matches->fetch() ) {
        ?>
            <?php $ma1_winner      = $matches->display( 'winner' ); ?>
            <?php $ma1_team_1      = $matches->display( 'team_1' ); ?> 
            <?php $matches_array_1['winner'] = $ma1_winner; ?>
                <?php $matches_array_1['team1'] = $ma1_team_1; ?>
            <?php
                    } // end of while loop
            } // end of if any exists
            ?>

            <?php var_dump($matches_array_1); ?>
            <?php die(); ?> 
```

但它在 var_dump 中仅输出一个获胜者，而不是我数据库中的 15 个团队。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:07:31.283

对于每次迭代，附加一个新数组，其中`winner`和`team`作为其键。结果将是一个包含所有值的二维数组。

```
while ($matches->fetch() {
  // Append a new array via [] = array()
  // for every loop iteration
  $matches_array_1[] = array(
     'winner'=>$matches->display('winner'), 
     'team'=>$matches->display('team')
  );
}
var_dump($matches_array_1); 
```

否则，您只是在每次迭代`winner`中覆盖相同的两个键。`team`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:11:04.400

构建数组时，您需要为每个匹配项提供某种唯一匹配标识符。就像是：

```
<?
if ( 0 < $matches->total() ) 
{
    while ( $matches->fetch() ) 
    {
        $matches_array_1[$matches->display('match_id')]['winner'] = $matches->display( 'winner' );
        $matches_array_1[$matches->display('match_id')]['team1']  = $matches->display( 'team_1' );
    } // end of while loop
} // end of if any exists
var_dump($matches_array_1); 
die();
?> 
```

# loops - 在所有工作表中循环简单函数

> ID：12845827
> 
> 赞同：0
> 
> 时间：2012-10-11T18:04:43.700
> 
> 标签：loops, excel, excel-2007, vba

我正在尝试创建一个宏，它在工作簿中的每个工作表上执行以下操作。

```
Range("U10").Select
    FormulaR1C1 = "=R3C2"
    Range("U10").Select
    Selection.AutoFill Destination:=Range("U10:U19"), Type:=xlFillDefault
    Range("U10:U19").Select
    Selection.Copy
    Range("V10").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("V10:V19").Select
        Selection.Copy
    Range("U10").Select
    ActiveSheet.Paste
    Range("V9:V19").Select
    Selection.ClearContents
    Range("A16").Select
    Selection.ClearContents 
```

我试过了：

```
Sub parse()

    Dim ws As Worksheet
            For Each ws In ThisWorkbook.Worksheets

   'The above code

        Next ws

End Sub 
```

不幸的是，这似乎只是将此宏应用于当前活动工作表。

我觉得这与我没有正确引用范围有关（我是 VBA 的新手，所以任何解释都会真正帮助我找到解决方案！）。IE。它应该像 ws.Range... 等等 还是我应该做一些完全不同的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T18:15:04.257

你很接近

```
Sub parse()

Dim ws As Worksheet
    For Each ws In ThisWorkbook.Worksheets

        ws.Range("U10:U19").FormulaR1C1 = "=R3C2"
        ws.Range("U10:U19").Value=ws.Range("U10:U19").value
        ws.Range("A16").ClearContents

    Next ws

End Sub 
```

正如 Tim 和 Gimp 所说，您可以压缩的代码越多，就越高效且易于维护。这包括避免`.Select`语句、不需要的操作（例如来回粘贴值）等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:16:02.863

你需要像这样组合它们：

```
Dim ws As Worksheet
    For Each ws In ThisWorkbook.Worksheets
        With ws
            .Range("U10").Select
            FormulaR1C1 = "=R3C2"
            .Range("U10").Select
            Selection.AutoFill Destination:=.Range("U10:U19"), Type:=xlFillDefault
            .Range("U10:U19").Select
            Selection.Copy
            .Range("V10").Select
            Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                :=False, Transpose:=False
            .Range("V10:V19").Select
            Selection.Copy
            .Range("U10").Select
            ActiveSheet.Paste
            .Range("V9:V19").Select
            Selection.ClearContents
            .Range("A16").Select
            Selection.ClearContents
        End With
    Next ws 
```

原因是您需要在每个范围引用前加上它应该使用范围的工作表。你可以通过使用来做到这一点`ws.Range().select each time`，或者像我上面做的那样把它全部屏蔽起来..

话虽如此，你也可以在 yoru 代码中删除很多不必要的行，它看起来像这样......

```
Sub parse()

Dim ws As Worksheet
    For Each ws In ThisWorkbook.Worksheets
        With ws
            .Range("U10").FormulaR1C1 = "=R3C2"
            .Range("U10").AutoFill Destination:=.Range("U10:U19"), Type:=xlFillDefault
            .Range("U10:U19").Copy
            .Range("V10").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                :=False, Transpose:=False
            .Range("V10:V19").Copy
            .Range("U10").Paste
            .Range("V9:V19").ClearContents
            .Range("A16").ClearContents
        End With
    Next ws
End Sub 
```

# objective-c - NSFetchedResultsController 未对加密属性进行排序

> ID：12845831
> 
> 赞同：3
> 
> 时间：2012-10-11T18:04:53.700
> 
> 标签：objective-c, ios, xcode, sqlite, core-data

我正在尝试使用可转换类型来加密我的核心数据模型中的属性，但是一旦数据被持久化到 sqlite db，尝试取回结果时遇到了很多问题。我的核心数据的主要应用程序是存储一些与用户相关的数据并按名字、姓氏等排序再次将其取回，然后使用名字/姓氏的第一个字母作为部分标题将其显示在表格视图中。似乎加密干扰了结果，因为当我尝试使用 NSFetchedResultsController 使用 lastName 作为排序描述符来获取请求时，我什么也没得到。我收到以下错误：

```
CoreData: error: (NSFetchedResultsController) The fetched object at index X has an out of order section name 'S. Objects must be sorted by section name' 
```

我花了很多时间调查这个问题无济于事。有谁知道问题可能是什么以及如何解决它？变压器解密数据后，是否有办法对数据库进行排序？或者有没有办法可以取回原始数据，然后在我将数据放在 NSFetchedResultsController 的实例中之后对其进行排序？

我使用[这个](http://blog.artlogic.com/2012/07/30/securing-your-core-data-with-transformable-attributes/)源来加密核心数据属性：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:40:28.097

《Core Data Programming Guide》中有一些相关信息。

*   [获取托管对象](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW3)：

> 您不能使用基于瞬态属性的谓词进行获取（尽管您可以使用瞬态属性自己在内存中进行过滤）。...总而言之，如果您直接执行 fetch，则通常不应将基于 Objective-C 的谓词或排序描述符添加到 fetch 请求中。相反，您应该将这些应用于获取的结果。

*   [获取谓词和排序描述符](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875-SW11)：

> 获取和存储类型之间存在一些交互。...另一方面，SQL 存储将谓词和排序描述符编译为 SQL，并在数据库本身中评估结果。这样做主要是为了性能，但这意味着评估发生在非 Cocoa 环境中，因此依赖 Cocoa 的排序描述符（或谓词）无法工作。

*由于转换器是在从 SQLite 存储中获取数据后*应用于数据的，因此使用转换后的属性作为排序键将不会产生所需的结果。

您的核心数据错误可能是由于这些部分是使用加密数据排序的，但是`sectionNameKeyPath`FRC 的（可以是临时属性）给出了未加密的数据，这当然是不一致的。

我能想象的唯一解决方案是存储一个额外的未加密属性，该属性有足够的信息用作排序键（例如人的首字母）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:06:23.170

您描述的错误发生是因为排序发生在数据库中的加密数据上，但`NSFetchedResultsController`后者适用于未加密的数据，并抱怨因为数据未针对部分名称正确排序。

要在数据库中排序，您必须提供足够的未加密信息进行排序，并保持该信息是最新的。

例如，对于按名字排序，您可以存储一个`firstNameSection`包含 的第一个字母的未加密属性`firstName`，以及一个`firstNameSortInfo`包含每个索引的名称位置的属性（例如“Aaron”=0，“Abby”=1 ， ETC。

然后你可以使用`firstNameSection`and`firstNameSortInfo`进行排序，而`firstNameSection`as `sectionNameKeyPath`。这种方法（至少）有两个缺点：

1.  您必须保持`firstNameSortInfo`最新，这将需要比您想要的更多的写入，并且`firstNameSortInfo`必须在内存中进行排序（因为它是在未加密的数据上完成的）。
2.  潜在攻击者可能知道有关加密数据的一些信息，这可能会削弱加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T19:20:35.860

据我所知，NSFetchRequest（当您通过 CoreData 使用 sqlite 时）生成 sql，在 sqlite 上使用它并返回结果。因此，虽然 sqlite 对 CoreData 进行的解密一无所知，但不可能使用 NSFetchRequest 使用解密的数据对结果进行排序。

可能的解决方案是将 NSFetchRequest 的结果复制到 NSArray 并手动对加密字段进行排序。另一种解决方案是在每次插入或修改时对数据进行排序，并将顺序写入特定的整数字段，然后在对该字段进行排序时（如果您执行插入和修改的频率低于获取频率，它将节省您的性能）。

# sharethis - 如何使用 jQuery 触发 ShareThis 弹出窗口？

> ID：12845841
> 
> 赞同：-1
> 
> 时间：2012-10-11T18:05:09.377
> 
> 标签：sharethis

我们使用的 ShareThis 代码基于将鼠标悬停在电子邮件按钮 (.st_email) 上激活弹出窗口，但我似乎无法使用 jQuery 自动激活弹出窗口。

我试过了..

```
$(".st_email").mouseover();
$(".st_email").click(); 
```

有任何想法吗？

这是嵌入的 ShareThis 代码：

```
<!-- ShareThis Code -->
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "########"}); </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:40:55.857

像这样试试

```
<script type="text/javascript">stLight.options({publisher: "########",onhover: false}); </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:07:26.117

您的示例假设您有一个*类*st_email 的元素（这就是 st_email 前面的 . 的含义）。

该选择器将*选择*该元素，但您必须在事件处理程序中*做一些事情：*

```
$(".st_email").mouseover(function(e) { /* Write code to show your popup */ }); 
```

如果不了解您的弹出窗口的更多信息，我无法填写评论部分。

如果使用*mouseover*执行此操作，则需要正确处理接收多个*mouseover*事件的可能性。

如果您的情况可以接受，那么在这方面使用*点击*处理会更容易。这是显示如何对点击事件做出反应的代码：

```
$(".st_email").click(function(e) { alert('put code here to open popup'); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T10:42:21.013

您可以尝试单击 shareThis 按钮容器中的 div：

*   $(".st_email > div").mouseover();
*   $(".st_email > div").click();

# perl - perl http请求，如何截断输出

> ID：12845842
> 
> 赞同：-1
> 
> 时间：2012-10-11T18:05:13.560
> 
> 标签：perl, http, get, request, truncate

我正在尝试使用 perl 来在线读取文本文件，使用如下调用：

```
$output = $ua->request($req)->as_string; 
```

问题是输出中有很多我不想要的垃圾，例如

```
HTTP/1.1 200 OK
Connection: close
Date: 
etc... 
```

有没有办法截断输出，所以我只得到文件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:19:45.420

问题是您只是从中获取响应对象`LWP::UserAgent`并将其作为字符串转储。如果您只想获取内容：

```
# Get the response
$response = $ua->request($req);
# Get the content portion of the response
$output = $response->content;
```

一切都是黑白的：[https ://metacpan.org/pod/HTTP::Request](https://metacpan.org/pod/HTTP::Request)

# c# - 输入值时出现 NullReferenceException

> ID：12845845
> 
> 赞同：0
> 
> 时间：2012-10-11T18:05:29.410
> 
> 标签：c#, wpf, textbox, nullreferenceexception

这是我的整个代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    private void sldChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        double red, green, blue;
        red = sldRed.Value;
        green = sldGreen.Value;
        blue = sldBlue.Value;
        changeColors(red, green, blue);
    }

    private void inputChanged(object sender, TextChangedEventArgs e)
    {
        double red, green, blue;
        red = Convert.ToDouble(txtRed.Text);
        green = Convert.ToDouble(txtGreen.Text);
        blue = Convert.ToDouble(txtBlue.Text);
        sldRed.Value = red;
        sldGreen.Value = green;
        sldBlue.Value = blue;
        changeColors(red, green, blue);
    }

    void changeColors(double red, double green, double blue)
    {

    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        txtRed.Text = Convert.ToString(sldRed.Value);
        txtGreen.Text = Convert.ToString(sldGreen.Value);
        txtBlue.Text = Convert.ToString(sldBlue.Value);
    }
} 
```

这是我的整个 .xaml 代码。

```
<Grid x:Name="frmGrid" Margin="0,0,2,0">
    <Slider x:Name="sldRed" HorizontalAlignment="Left" Margin="57,10,0,0" VerticalAlignment="Top" Width="757" ValueChanged="sldChanged" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" SmallChange="1" Value="1"/>
    <Slider x:Name="sldBlue" HorizontalAlignment="Left" Margin="57,76,0,0" VerticalAlignment="Top" Width="757" ValueChanged="sldChanged" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" SmallChange="1" Value="1"/>
    <Slider x:Name="sldGreen" HorizontalAlignment="Left" Margin="57,45,0,0" VerticalAlignment="Top" Width="757" ValueChanged="sldChanged" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" SmallChange="1" Value="1"/>
    <Label Content="Red" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"/>
    <Label Content="Blue" HorizontalAlignment="Left" Margin="10,72,0,0" VerticalAlignment="Top"/>
    <Label Content="Green" HorizontalAlignment="Left" Margin="10,41,0,0" VerticalAlignment="Top"/>
    <TextBox x:Name="txtRed" HorizontalAlignment="Left" Height="23" Margin="819,9,0,0" TextWrapping="Wrap" Text="1" VerticalAlignment="Top" Width="41" TextChanged="inputChanged"/>
    <TextBox x:Name="txtBlue" HorizontalAlignment="Left" Height="23" Margin="819,74,0,0" TextWrapping="Wrap" Text="1" VerticalAlignment="Top" Width="41" TextChanged="inputChanged"/>
    <TextBox x:Name="txtGreen" HorizontalAlignment="Left" Height="23" Margin="819,41,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="41" TextChanged="inputChanged" Text="1"/>

</Grid> 
```

您可以看到我已经为这些文本框分配了一个值以用于测试目的。

出于某种原因，我不断收到此错误 ![在此处输入图像描述](../Images/fbb6888ea022181feef78765c34e0ff4.png)

其中指的是这两行。

```
green = Convert.ToDouble(txtGreen.Text);
blue = Convert.ToDouble(txtBlue.Text); 
```

请注意它上面的类似行如何完美地工作

```
red = Convert.ToDouble(txtRed.Text); 
```

我还没有 C# 方面的经验，也没有阅读此类错误的经验。如果您对我收到此错误的原因有任何想法，并可能为我提供可能的解决方案，我们将不胜感激。

PS：我刚刚认为可能对您有用的东西，我什至在程序启动之前就收到了这个错误。

这是 2 个屏幕截图，其中 1 个根本没有加载，而第 2 个可以完美加载并且可以正常工作。 ![在此处输入图像描述](../Images/b5dfa2aef3364a5e9cbe09cb8e596abd.png) ![在此处输入图像描述](../Images/c446cc5fc9a190eea4bed778b9dff308.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:12:27.720

`txtRed and txtBlue`不包含值。但 txtRed 包含值

您可以添加验证脚本以确保您的控件不为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:29:10.813

当输入更改时，事件处理程序会触发。如果您在任何一个框中按退格键，您的 Text 现在是一个空字符串或 null。你不能把它们变成双打。尝试使用 Double.TryParse() 而不是 Convert.ToDouble() 来确定它是否实际上是可解析的输入，如下所示：

```
private void inputChanged(object sender, TextChangedEventArgs e)
{
    double red, green, blue;

    if(Double.TryParse(txtRed.Text, out red) &&
        Double.TryParse(txtGreen.Text, out green) &&
        Double.TryParse(txtBlue.Text, out blue)) 
    {
        sldRed.Value = red;
        sldGreen.Value = green;
        sldBlue.Value = blue;
        changeColors(red, green, blue);
    }
} 
```

如果 RGB 文本框中的所有值都有效，则 if 语句将为 true，并且红色、绿色和蓝色将被正确设置。

这当然是假设 sldGreen 和 sldBlue 不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:13:28.393

失败的原因是，当您最初在 xaml 中创建滑块并包含以下内容时会调用 valuechanged 事件：Value="1"。该事件在创建其他控件之前引发，因此是空异常。

WPF 在很大程度上建立在绑定的概念之上，你应该尽可能多地利用它，因为它会让你的生活变得更轻松。我更改了您的代码以向您展示如何使用绑定来执行此操作。

xml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        x:Name="TheMainWindow">
    <Grid x:Name="frmGrid" Margin="0,0,2,0">
        <Slider x:Name="sldRed" HorizontalAlignment="Left" Margin="57,10,0,0" VerticalAlignment="Top" Width="757" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" 
                SmallChange="1" Value="{Binding Path=Red, ElementName=TheMainWindow, Mode=TwoWay}"/>
        <Slider x:Name="sldBlue" HorizontalAlignment="Left" Margin="57,76,0,0" VerticalAlignment="Top" Width="757" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" 
                SmallChange="1" Value="{Binding Path=Blue, ElementName=TheMainWindow, Mode=TwoWay}"/>
        <Slider x:Name="sldGreen" HorizontalAlignment="Left" Margin="57,45,0,0" VerticalAlignment="Top" Width="757" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True"
                SmallChange="1" Value="{Binding Path=Green, ElementName=TheMainWindow, Mode=TwoWay}"/>
        <Label Content="Red" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"/>
        <Label Content="Blue" HorizontalAlignment="Left" Margin="10,72,0,0" VerticalAlignment="Top"/>
        <Label Content="Green" HorizontalAlignment="Left" Margin="10,41,0,0" VerticalAlignment="Top"/>
        <TextBox x:Name="txtRed" HorizontalAlignment="Left" Height="23" Margin="819,9,0,0" TextWrapping="Wrap" Text="{Binding Path=Red, ElementName=TheMainWindow}" VerticalAlignment="Top" Width="41"/>
        <TextBox x:Name="txtBlue" HorizontalAlignment="Left" Height="23" Margin="819,74,0,0" TextWrapping="Wrap" Text="{Binding Path=Blue, ElementName=TheMainWindow}" VerticalAlignment="Top" Width="41" />
        <TextBox x:Name="txtGreen" HorizontalAlignment="Left" Height="23" Margin="819,41,0,0" TextWrapping="Wrap" VerticalAlignment="Top"  Text="{Binding Path=Green, ElementName=TheMainWindow}" Width="41" />
    </Grid>
</Window> 
```

代码

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private double _red = 1;
    public double Red
    {
        get { return _red; }
        set
        {
            _red = value;
            OnPropertyChanged("Red");
        }
    }

    private double _green = 1;
    public double Green
    {
        get { return _green; }
        set
        {
            _green = value;
            OnPropertyChanged("Green");
        }
    }

    private double _blue = 1;
    public double Blue
    {
        get { return _blue; }
        set
        {
            _blue = value;
            OnPropertyChanged("Blue");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:19:07.870

我认为问题在于您的`Window_Loaded_1`它会更改文本框的文本值，从而导致`inputChanged`调用该方法。尝试注释掉代码`Window_Loaded_1`，看看异常是否仍然发生。

解决此问题的一种方法是使用绑定将滑块和文本框的值连接在一起。您的 xaml 应如下所示：

```
<Grid x:Name="frmGrid" Margin="0,0,2,0">
    <Slider x:Name="sldRed" HorizontalAlignment="Left" Margin="57,10,0,0" VerticalAlignment="Top" Width="757" ValueChanged="sldChanged" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" SmallChange="1" Value="1"/>
    <Slider x:Name="sldBlue" HorizontalAlignment="Left" Margin="57,76,0,0" VerticalAlignment="Top" Width="757" ValueChanged="sldChanged" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" SmallChange="1" Value="1"/>
    <Slider x:Name="sldGreen" HorizontalAlignment="Left" Margin="57,45,0,0" VerticalAlignment="Top" Width="757" ValueChanged="sldChanged" ClipToBounds="True" Maximum="255" TickPlacement="BottomRight" IsSnapToTickEnabled="True" SmallChange="1" Value="1"/>
    <Label Content="Red" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"/>
    <Label Content="Blue" HorizontalAlignment="Left" Margin="10,72,0,0" VerticalAlignment="Top"/>
    <Label Content="Green" HorizontalAlignment="Left" Margin="10,41,0,0" VerticalAlignment="Top"/>

    <TextBox x:Name="txtRed" HorizontalAlignment="Left" Height="23" Margin="819,9,0,0" TextWrapping="Wrap" Text="{Binding ElementName=sldRed, Path=Value, Mode=TwoWay}" VerticalAlignment="Top" Width="41"/>

    <TextBox x:Name="txtBlue" HorizontalAlignment="Left" Height="23" Margin="819,74,0,0" TextWrapping="Wrap" Text="{Binding ElementName=sldBlue, Path=Value, Mode=TwoWay}" VerticalAlignment="Top" Width="41"/>

    <TextBox x:Name="txtGreen" HorizontalAlignment="Left" Height="23" Margin="819,41,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="41" Text="{Binding ElementName=sldGreen, Path=Value, Mode=TwoWay}"/>

</Grid> 
```

你的代码应该是这样的：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void sldChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        red = sldRed.Value;
        green = sldGreen.Value;
        blue = sldBlue.Value;
        changeColors(red, green, blue);
    }

    void changeColors(double red, double green, double blue)
    {

    }
} 
```

您可以摆脱`inputChanged`并仅响应滑块更改

# php - 在 PHP 中绑定 PDO 查询时出错

> ID：12845846
> 
> 赞同：0
> 
> 时间：2012-10-11T18:05:32.407
> 
> 标签：php, mysql, pdo

我在将值与 PDO 和 PHP 绑定时遇到了一些问题。当我用变量替换值时，脚本会返回正确的结果，但由于某种原因，我无法让它工作。

```
// Connect to database in function on different page
function db1() {
    try {
        $pdo = new PDO("mysql:host=localhost;dbname=**********", '**********', '**********');
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
        return $pdo;
        $pdo = null;
    } catch (PDOException $e) {
        die($e->getMessage());
    }
}

// Scrit with problems
$db = db1();
$query = $db->prepare("SELECT column1, column2, column3, column4 FROM table_name WHERE (column4=2 OR column4=3) AND column5=:col1 AND column6=:col2"); // Prepare the statement to prevent any SQL injection
    $query->bindValue(':col1', $var1, PDO::PARAM_INT);
    $query->bindValue(':col2', $var2, PDO::PARAM_STR);
    $query->execute();
// I also tried the following.
// $query->execute(array(':col1' => $var1, ':col2' => $var2));

// Fetch result row
$row = $query->fetch(PDO::FETCH_ASSOC); 
```

有任何想法吗？

* * *

UPDATE 查询前后是否有 var_dump。var1 = string(1) "2" 和 var2 = string(1) "1"

删除 $pdo = null;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:09:31.577

除了`$pdo = null`在 a 之后`return`因此从未执行的行，以及`$db = $db1()`函数用作变量的地方，代码没有任何明显错误。既然你说**用变量替换绑定是有效**的，我认为最后一个是错字。

所以我建议你尝试一下脚本中那个点的和`var_dump`的值是什么。`$var1``$var2`

**更新**

我已经复制了这样的设置

```
<?php

    $db = new PDO("mysql:host=localhost;dbname=test");
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $var1 = 1; // See answer text below
    $var2 = 2;

    $query = $db->prepare("SELECT * FROM test WHERE column5=:col1 AND column6=:col2");
    $query->bindValue(':col1', $var1, PDO::PARAM_INT);
    $query->bindValue(':col2', $var2, PDO::PARAM_STR);
    $query->execute();
    $row = $query->fetch(PDO::FETCH_ASSOC);
    print_r($row);
?> 
```

然后我创建了这样的第一个表

```
CREATE TABLE test ( column5 INTEGER, column6 INTEGER ); 
```

然后像这样

```
CREATE TABLE test ( column5 varchar(5), column6 varchar(5) ); 
```

我尝试将`$var1`and定义`$var2`为 1,2（整数）和“1”，“2”（字符串）。

它总是有效的，即我希望得到一行作为输出，我做到了：

```
Array
(
   [column5] => 1
   [column6] => 2
) 
```

在这一点上，我认为唯一的可能是**数据库内容中出现了一些奇怪的东西**。

因此，我还希望下面的测试在您的系统**上不起作用**，即不返回所需的行：

```
$query = $db->prepare("SELECT column1, column2, column3, column4 FROM table_name WHERE (column4=2 OR column4=3) AND column5=2 AND column6='1'");
$query->execute();
$row = $query->fetch(PDO::FETCH_ASSOC);
var_dump($row); 
```

# javascript - 使用 JavaScript 打开和关闭 CKEditor 4 内联编辑

> ID：12845850
> 
> 赞同：8
> 
> 时间：2012-10-11T18:05:49.270
> 
> 标签：javascript, jquery, ckeditor

我需要能够使用按钮打开/关闭内联编辑。有关内联编辑的示例，请参见此处：http: [//nightly-v4.ckeditor.com/3559/samples/inlineall.html](http://nightly-v4.ckeditor.com/3559/samples/inlineall.html)

我的标记是这样的：

```
<div contenteditable='true'>Mycontent</div> 
```

使用 jQuery 我希望能够打开/关闭编辑器。

我试过设置`contenteditable`为false，但这不起作用。`contenteditable`切换设置时，编辑器不会加载回页面。

附录：我还需要在单击按钮时销毁所有 CKEditor 内联实例。我是这样做的：

```
 //kill all ckeditors
        for(k in CKEDITOR.instances){
            var instance = CKEDITOR.instances[k];
            instance.destroy();
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T20:12:26.903

jQuery 不会帮助你。使用 CKEditor 的 API。例如，您可以在每次想要关闭编辑器时销毁编辑器（请参阅[http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.editor-method-destroy](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.editor-method-destroy)）并再次初始化以将其打开。可能还有其他方法可以“关闭编辑器”，但您必须更准确地说这对您意味着什么。

# node.js - 如何控制 node express.js 应用程序中排队请求的最大数量？

> ID：12845855
> 
> 赞同：4
> 
> 时间：2012-10-11T18:06:03.403
> 
> 标签：node.js, express

我写了一个单一路线的快递应用程序。处理程序将传入请求的主体保存到 couchdb 数据库。

我编写了一个 C# 客户端应用程序，它使用线程异步发送 10000 个小请求。一些请求失败并显示此异常消息“无法建立连接，因为目标计算机主动拒绝了它”。

我想这是因为节点进程达到了最大排队连接数。那正确吗？

这个应用程序是一个概念验证，我不会在我的真实应用程序中承受这么大的负载，但我想测试这些限制并了解它们是如何工作的。

我有两个问题：

*   有没有办法控制排队请求的最大数量？我可以将其设置为“无限”吗？如果没有，最大值是多少，为什么有最大值？

*   在我的节点应用程序中，有没有办法让我捕获并记录那些丢弃的请求？在生产应用程序中，我想知道我的服务器已达到最大请求数。

更多信息：

*   我在 Windows 上运行它
*   我试过 app.listen(3001, 'localhost', 10000) 来设置 backlog 参数。结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:36:49.370

我认为您正在寻找积压设置。默认为 511。 [http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_listeninglistener](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_listeninglistener)

# javascript - 然后在jquery中按顺序在多行中淡出

> ID：12845858
> 
> 赞同：0
> 
> 时间：2012-10-11T18:06:23.563
> 
> 标签：javascript, jquery, fadein, fade, fadeout

我希望淡出一个元素，然后淡出系列中的下一个元素。

有人可以评论为什么这段代码不起作用吗？它淡出第一个元素，然后同时淡入接下来的 3 个元素。

```
<p id="ptag1">
        Display this first    
</p>
<p id="ptag2" style="display:none;">
    Display this second
</p>

<p id="ptag3" style="display:none;">
    Display this third
</p>

<p id="ptag4" style="display:none;">
    Display this fourth
</p>

<script language="JavaScript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript">

    var numberoflines = 5;
    var o;

    $(document).ready(function () {

        for (i=1; i < numberoflines; i++)
        {
            fadeoutelement(i);
            o = i + 1
            fadeinelement(o);
        }

    });

    function fadeoutelement(i) {
       setTimeout("$('#ptag" + i + "').fadeOut(500)", 700); 
    }

    function fadeinelement(o) {
       setTimeout("$('#ptag" + o + "').fadeIn(500)", 1200);
    }

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:11:58.270

如果您希望第二个元素在第一个元素淡入之前等待它淡出，听起来您会从使用具有多个元素的队列中受益。查看 FxQueues jQuery 插件[https://github.com/lucianopanaro/jQuery-FxQueues](https://github.com/lucianopanaro/jQuery-FxQueues)

查看他们的使用示例代码：[https ://github.com/lucianopanaro/jQuery-FxQueues/blob/master/example.html](https://github.com/lucianopanaro/jQuery-FxQueues/blob/master/example.html)

```
$("#1").animate({marginTop: "100px"}, {duration: 100, queue: "global"});
$("#2").animate({marginTop: "100px"}, {duration: 100, queue: "global"});
$("#3").animate({marginTop: "100px"}, {duration: 100, queue: "global"}); 
```

或者你的情况

```
 $("ptag1").fadeOut({duration: 500, queue: "global"});
 $("ptag2").fadeIn({duration: 500, queue: "global"});
 $("ptag2").fadeOut({duration: 500, queue: "global"});
 $("ptag3").fadeIn({duration: 500, queue: "global"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T18:21:44.060

考虑到您的文档在时间 T=0 时准备就绪，因此您的`for`循环被调用。由于`for`循环本身的执行时间可以忽略不计，我们可以假设在整个`for`循环执行期间 T=0 是固定的。现在它又安排`fadeoutelement()`在 T=0+700 执行，并`fadeinelement()`在 T=0+1200 执行 3 个实例。因此，后 3 个函数调用基本上是同时的。

你想要的是类似于以下内容（工作代码）：

```
var numberoflines = 5;
$(document).ready(function () {
    var time = 0;
    for (i=1; i < numberoflines; i++){
        setTimeout("$('#ptag" + i + "').fadeOut(500)", time+700); 
        setTimeout("$('#ptag" + (i+1) + "').fadeIn(500)", time+1200);
        time += 1200; 
    }
}); 
```

# jquery - jQuery .click 功能不起作用

> ID：12845862
> 
> 赞同：0
> 
> 时间：2012-10-11T18:06:29.927
> 
> 标签：jquery

我有一个 HTML 片段，当单击链接时，div 内容成为链接的 div 内容。第一个功能工作正常。这是jQuery 似乎没有响应的第二次点击#hidelink。我在这里想念什么？

```
<div id="right">
    <div id='titletext'><p>||||||||||||||</p></div>
    <div id='presentation'></div>

    <div class='hidethisdiv'>
        <div id ="years">
            <h4><a id='resourceslink' href='#resources'>2010 Presentations</a></h4>
        </div>
        <div id='resources'>    
            <h4><a id='resourceslink' href='#resources'>2010 Presentations</a></h4>
            <p><a id='hidelink' href='#years'>&laquo;--back</a></p>
        </div>
    </div>
</div>

<script type="text/javascript">// <![CDATA[
  $('#mainmenu').fadeIn(2000, function() {
    // Animation complete.
  });

$('#presentation').html($('#years').html());

$( function() {
  $("#resourceslink").click(
    function () {
    $('#presentation').html($('#resources').html());
    }
   );

  $("#hidelink").click(
  function (){
    $('#presentation').html($('#years').html());
  }
  );
  //just add more divs like resources and a hidelink for new conferences
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:38:20.200

您也可以使用 jquery 隐藏和显示，如下所示。

```
$("#hidelink").live('click',function () {

$('#resources').hide();

$('#years').show();

}); 
```

如果您使用 firefox 作为浏览器，您可以使用作为插件的 firebug。通过在脚本上放置断点，使用 firebug 可以让您了解哪里出了问题。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:01:48.443

首先，ID 是唯一的。它必须只存在一次！在您的示例中，有 2 个资源链接。

如果您有多个要分组的元素，请使用类。提醒：每个元素可以有多个类！例如

```
<a href="#hey" class="testing hello">heyhey</a> 
```

你可以用

```
$(".testing") - or - $(".testing.hello")  - or - $(".hello") 
```

并像这样附加事件侦听器

```
$(".testing").on("click", function() { 
    doThis();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:12:14.010

在您显示的代码中，您在 id 和 value 之间有一个空格；) 此外，id 是唯一的，因此必须使用 id="resourceslink" 是不好的做法:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T18:12:41.610

使用`$('#resources').html()`元素转换为html。您稍后将其读入。问题是您将 click 事件绑定到`#hidelink`解析 html 之前。该事件被链接到隐藏元素。

一种解决方案是在将内容添加到`#presentation`. 另一个问题是`#hidelink`在将 html 添加到`#presentation`.

更好的解决方案是不使用`.html()`. 将所有元素添加到`#presentation`并用`display: none`. 然后绑定点击事件并使用`.show()`and`.hide()`来显示`#years`或`#resources`

例子：

```
<div id="right">
    <div id='presentation'>
        <div id ="years">
            <h4><a id='resourceslink' href='#resources'>2010 Presentations</a></h4>
        </div>
        <div id='resources' style="dislay: none">    
            <h4><a id='resourceslink' href='#resources'>2010 Presentations</a></h4>
            <p><a id='hidelink' href='#years'>&laquo;--back</a></p>
        </div>
    </div>
</div>

$("#resourceslink").click(function () {
    $('#resources').show();
    $('#years').hide();
});

$("#hidelink").click(function () {
    $('#resources').hide();
    $('#years').show();
}); 
```

# jquery - jquery，乘法选择器和 OR 函数

> ID：12845866
> 
> 赞同：1
> 
> 时间：2012-10-11T18:06:38.357
> 
> 标签：jquery, function, animation, click, jquery-animate

大家好，我有这个代码：

```
$('#riscButton, #eneButton, #giardButton').one("click", function(){
                $('.content').animate(
                    {"height":"+=620px"},
                    500,
                    'easeOutBounce');
                $('#eneButton').animate(
                    { "top":"+=310px"},
                    1500,
                    'easeInOutExpo');
                $('#eneButton').animate(
                    {"left":"-=310px"},
                    1500,
                    'easeOutBounce')
                $('#giardButton').animate(
                    {"top":"+=620px"},
                    2000,
                    'easeInOutExpo')
                }); 
```

如您所见，如果有人单击按钮，则必须发生动画，而单击哪个按钮具有相同的动画并不重要。使用 one() 我对必须单击一次的按钮说，这就是问题所在，我怎么能对脚本说如果你按下一个按钮，甚至其他按钮也必须在之后被禁用？现在，例如，如果我单击第一个按钮，动画就发生了，如果我重新单击同一个按钮，什么都没有发生，但是如果我单击第二个或第三个按钮，动画就会再次开始。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:12:58.220

您必须从*所有*元素中取消绑定事件，而不仅仅是您单击的元素：

```
$('#a, #b, #c').click(function() {
    alert('clicked');

    $('#a, #b, #c').off('click');
});​ 
```

**演示：http: [//jsfiddle.net/peFff/3/](http://jsfiddle.net/peFff/3/)**

* * *

更好的解决方案是使用类：

```
$('.clickable').click(function() {
    alert('clicked');

    $('.clickable').off('click');
});​ 
```

**演示：http: [//jsfiddle.net/peFff/5/](http://jsfiddle.net/peFff/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:09:30.680

使用选择器。例如：`$('#riscButton, #eneButton, #giardButton').attr('disabled','disabled')`在你的函数中。该选择器为您返回一个包含所有按钮的数组...然后您应该取消绑定按钮...通过执行`$('#riscButton, #eneButton, #giardButton').off('click.button')`

将 .button 添加到您的事件名称以[命名](http://api.jquery.com/event.namespace/)它并使其更容易找到（它还将避免取消绑定不需要的事件处理程序）。

最后一点：最后，如果你必须做`$('#a,#b,#c')`一个选择器之类的事情，你应该考虑使用一个类来代替（只是让代码更好）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:12:32.280

在第一次单击时，您可以简单地将一个类添加到您的容器标记中，说明一个按钮已被单击。在随后的点击中，在调用动画之前检查容器是否具有该类。

# ios - NSMutableArray 遇到 __NSArrayI removeObjectAtIndex:] 的问题：无法识别的选择器

> ID：12845867
> 
> 赞同：0
> 
> 时间：2012-10-11T18:06:53.713
> 
> 标签：ios, nsmutablearray, nsarray, variable-assignment, retain

我已经查看了其他 SO 讨论，但似乎找不到答案。在基本上以下代码之后，我得到了这个答案：

1) 在拥有 AwesomeMenu 的类中，我正在制作 AwesomeMenuItems 的 NSMutableArray，这是初始化 AwesomeMenu 所必需的：

```
NSMutableArray *menus = [[[NSMutableArray alloc] init] autorelease];
[menus addObject:starMenuItem1];
[menus addObject:starMenuItem2];
[menus addObject:starMenuItem3];
[menus addObject:starMenuItem4];
[menus addObject:starMenuItem5];

AwesomeMenu *menu = [[[AwesomeMenu alloc] initWithFrame:self.view.bounds menus:menus view:self.view] autorelease]; 
```

2）在 AwesomeMenu.h 中，我在接口中声明了数组，如下所示：

```
NSMutableArray *_menusArray; 
```

我为数组创建了一个属性：

```
@property (nonatomic, retain) NSMutableArray *menusArray; 
```

它是合成的：

```
@synthesize menusArray = _menusArray; 
```

3）在 initWithFrame: menus: view: 中，我像这样分配 menus 参数：

```
- (id)initWithFrame:(CGRect)frame menus:(NSMutableArray *)aMenusArray view:(UIView*)gView
{
    self = [super initWithFrame:frame];
    // ... some code
    self.menusArray = aMenusArray; // BREAKPOINT HERE.
    // ... some more code
} 
```

4）我在作业中设置了一个断点，这就是发生的事情。在该行运行之前，我检查了我的 self.menusArray，它是： (NSMutableArray *)0x00000000 0 Objects

我越过这条线，它变成： (__NSArrayI *) 0x06045070 5 个对象。

虽然这是正确数量的对象，但它不再是 NSMutableArray ，这让我以后遇到问题！

正在发生什么，我怎样才能阻止它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:10:06.720

__NSArrayI 它是不可变数组，您传递给 initWithFrame 方法 NSArray，而不是 NSMutable 数组

解决方案：

```
self.menusArray = [NSMutableArray arrayWithArray:aMenusArray]; // BREAKPOINT HERE. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:16:04.590

检查`AwesomeMenu.h`文件中以下内容的声明。确保您也将 the 更改`NSArray`为`NSMutableArray`那里。这也可能导致这个问题。

```
- (id)initWithFrame:(CGRect)frame menus:(NSMutableArray *)aMenusArray view:(UIView*)gView; 
```

**更新：** 只是一个注释。在 init 方法中，在为 self 分配内存后总是使用以下内容。

```
if (self) {
   //code goes here
} 
```

**更新2：** 也`self.menusArray = aMenusArray;`改为`_menusArray = [aMenusArray retain]`

根据苹果文档，您不应该使用`self.param`in `init`and`dealloc`方法，因为它处于内存分配/销毁过程中，尚未完成。

# c# - DataGrid PreviewTextInput 事件从输入中删除控制字符

> ID：12845870
> 
> 赞同：5
> 
> 时间：2012-10-11T18:07:00.463
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个带有数据网格的 WPF 窗口。我试图从符号扫描仪中捕获通过虚拟楔形发送的字符串。对于应用程序，它看起来像是输入了字符。此字符串以 ASCII 1 (SOH) 开头。

当窗口具有焦点时，窗口的 PreviewTextInput 会接收 SOH 以及所有其他人类可读和非人类可读的值。 **但是，当数据网格具有焦点时，非人类可读的字符将被剥离。**

如果我在窗口上有一个 PreviewKeyDown 或 PreviewKeyUp ，那么无论什么有焦点，字符都会正确显示。因此，数据网格在某处将其剥离。不幸的是，因为 KeyDown/KeyUp 不显示 ASCII 字符，所以我不能使用这些事件，而不必编写某种解析算法。

谁能告诉我我能做些什么来让那些非人类可读的控制字符总是被发送到 PreviewTextInput？或者如何解析 PreviewKeyDown 中的所有字符？

**编辑：**

当窗口有焦点时：

```
Window PreviewKeyDown - LeftCtrl
Window PreviewKeyDown - A
Window PreviewTextInput - <SOH>
Window PreviewKeyDown - Oem6
Window PreviewTextInput - ]
Window PreviewKeyDown - LeftShift
Window PreviewKeyDown - C
Window PreviewTextInput - C 
```

当数据网格具有焦点时：

```
Window PreviewKeyDown - LeftCtrl
DataGrid PreviewKeyDown - LeftCtrl
Window PreviewKeyDown - A
DataGrid PreviewKeyDown - A
Window PreviewKeyDown - Oem6
DataGrid PreviewKeyDown - Oem6
Window PreviewTextInput - ]
Window PreviewKeyDown - LeftShift
DataGrid PreviewKeyDown - LeftShift
Window PreviewKeyDown - C
DataGrid PreviewKeyDown - C
Window PreviewTextInput - C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:21:05.127

好吧，我知道这可能不是您所期望的，但我有一些为某些 Symbol 条形码扫描仪编写软件的经验。在一个应用程序中，我们让用户扫描他们的徽章以验证自己以覆盖某些条件。我们希望用户“扫描”他们的徽章，而不能用键盘输入数字。我记得我们花了很长时间试图弄清楚如何使输入不像键盘输入那样输入。我相信我们能够扫描 Symbol 条码扫描仪手册中的一些配置代码，将其配置为 USB 设备，我们可以根据需要打开并处理其输入。这种方法对我们来说要好得多。

你有没有考虑过尝试这样的事情？

MSDN 论坛上的这篇文章似乎是相关的（[将密钥转换为 ASCII](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/21d70620-8049-45b7-a093-86042b9fb86f)

> 条码阅读器通常可以在两种模式下运行。一种是它充当键盘楔子，就像用户键入代码一样生成击键。另一种是应用程序直接接收扫描的代码，通常是通过串行端口。您已将阅读器切换到一种模式，它会生成适合后一种方式的代码。Ctrl+B 是一个控制代码，SOH (Start Of Header)。它用于使程序与阅读器同步，SOH 表示扫描的开始，您将使用它来重置缓冲区索引。
> 
> 您需要将阅读器配置为不会生成控制字符的键盘楔形模式。如果需要，您仍然可以通过编写一个 KeyDown 事件处理程序来检测 SOH 和一个 KeyPressed 事件处理程序来检测扫描代码，从而使其工作。避免尝试将您在 KeyDown 中看到的击键转换为字符，KeyPressed 已经为您完成了这项工作。

我相信这可能对您转换为 ASCII 有用：

```
[DllImport("user32.dll")]
    static extern int ToAsciiEx(uint uVirtKey, uint uScanCode, byte[] lpKeyState, byte[] arr, uint uFlags, IntPtr hkl);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool GetKeyboardState(byte[] lpKeyState);

    private void Window_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        byte[] keyboardState = new byte[256];
        int keyCode = KeyInterop.VirtualKeyFromKey(e.Key);
        byte[] arr = new byte[4];
        GetKeyboardState(keyboardState );
        Debug.WriteLineIf(ToAsciiEx((uint)keyCode, 0, keyboardState, arr, 0, IntPtr.Zero) > 0, ASCIIEncoding.ASCII.GetString(arr));
    } 
```

# typo3 - 将 url 呈现为链接，并将 url 本身作为打字稿中的链接文本

> ID：12845871
> 
> 赞同：2
> 
> 时间：2012-10-11T18:07:01.797
> 
> 标签：typo3, typoscript, templavoila

如何将 url 呈现为带有打字稿的超链接？

排版：

```
 20 = TEXT
    20.field = email
    20.Wrap = <span><a href="mailto: | " >Link text</a></span> 
```

上面的打字稿给了我 HTML 输出

```
 <a href="mailto:email" >Link text</a> 
```

我想用电子邮件自己代替链接文本。如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T05:04:47.837

问题自己解决了... :)

```
 20 = TEXT
    20.dataWrap = <span><a href="mailto:{field:email}" >{field:email}</a></span> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T10:27:25.253

```
20 = TEXT
20.typolink.parameter.field = email 
```

此代码将使用标准的[typolink 函数](http://wiki.typo3.org/TSref/typolink)包装您的字段。如果找到“@”，typo3 会将其包装为电子邮件地址。

此解决方案将使用有用的[typo3垃圾邮件保护解析您的地址](http://buzz.typo3.org/people/ron-hall/article/spam-protecting-your-typo3-e-mail-addresses-with-a-special-twist/)

# android - 如何动态更改 MenuItem 的可见性？

> ID：12845872
> 
> 赞同：3
> 
> 时间：2012-10-11T18:07:07.813
> 
> 标签：android

我正在开发一些 Android 应用程序，并且我有带有 2 个选项卡的 ActionBar。当用户选择第二个选项卡时，我需要在 ActionBar 上显示 2 个图标。我有以下代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    mOptionsMenu=menu;
    menu.getItem(0).setVisible(false);
    menu.getItem(1).setVisible(false);
    return true;
} 

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        mViewPager.setCurrentItem(tab.getPosition());
        if (tab.getPosition()==1) {
        mOptionsMenu.getItem(0).setVisible(true);
        mOptionsMenu.getItem(1).setVisible(true);
}
    } 
```

但是这段代码不起作用。请告诉我，我怎样才能满足我的需求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T20:06:42.557

您需要将菜单设置为在`onPrepareOptionsMenu()`. 您可以按如下方式更改代码：

```
private boolean menuShow = false;

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) { 
    mViewPager.setCurrentItem(tab.getPosition()); 
    if (tab.getPosition()==1) { 
      menuShow = true;
    } 
}

public boolean onPrepareOptionsMenu(Menu menu) {
  if(menuShow){
    mOptionsMenu.getItem(0).setVisible(true);    
    mOptionsMenu.getItem(1).setVisible(true);
  }
  return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:55:02.693

看来您必须更改`onPrepareOptionsMenu()`.

看到这个答案：[在菜单中以编程方式设置可见性android](https://stackoverflow.com/questions/9030268/set-visibility-in-menu-programatically-android)

# javascript - 引导弹出窗口不起作用

> ID：12845876
> 
> 赞同：0
> 
> 时间：2012-10-11T18:07:30.487
> 
> 标签：javascript, twitter-bootstrap

我正在尝试在网站上实现引导弹出窗口，但由于某种原因它不起作用。

控制台没有输出任何错误，我也发出了警报，只是为了检查 JS 是否正常工作。

我的代码是：

**头**：

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="js/bootstrap.js" type="text/javascript"></script>

  <script type='text/javascript'>
     $(document).ready(function () {
      alert("Aaaa");
       $('#example').tooltip();
     });
  </script> 
```

**HTML**

```
<a href="#" rel="tooltip" data-placement="right" 
   data-original-title="Tooltip on right" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:13:19.573

> 出于性能原因，选择加入 Tooltip 和 Popover data-apis。如果您想使用它们，只需指定一个选择器选项。

--[引导文档](http://twitter.github.com/bootstrap/javascript.html#tooltips)

但是，如果您已经涵盖了这一点，那么您似乎需要为您添加一个 id attr 标记：

```
<a href="#" rel="tooltip" data-placement="right" data-original-title="Tooltip on right">Stuff</a> 
```

[例子](http://jsfiddle.net/q9qfv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:30:29.603

这同时适用于所有元素。

```
$("[rel='tooltip']").tooltip(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:15:00.137

[编辑] 先尝试另一个答案。

我认为您需要在 html 中选择一个 id 以在您的 JS 中引用

另外，请尝试在正文脚本中不使用 type='text/javascript' 。

从

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="js/bootstrap.js" type="text/javascript"></script>

  <script type='text/javascript'>
     $(document).ready(function () {
      alert("Aaaa");
       $('#example').tooltip();
     });
  </script> 
```

至-

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="js/bootstrap.js" type="text/javascript"></script>

  <script>
     $(document).ready(function () {
      alert("Aaaa");
       $('#example').tooltip();
     });
  </script> 
```

# java - Java - 将工作拆分到多个线程

> ID：12845881
> 
> 赞同：12
> 
> 时间：2012-10-11T18:07:51.297
> 
> 标签：java, multithreading, executorservice

我遇到了以下问题：出于性能原因，我需要将工作拆分到多个线程，但我不确定要采取什么方法。

首先，我将提供的任务应该返回一个值并接受一个参数。此外，main 方法（做主要工作，不是`static main()`）已经在单独的线程上运行，并且会定期调用。此外，此方法必须在某个时候等待所有线程完成然后继续。

一种方法（对我来说最明显）是将每个作业安排在单独的线程上并将结果存储在类变量中：

```
public Object result1, result2;

public void mainMethod() throws InterruptedException {
    final Thread thread = new Thread(new Runnable() {
        @Override
        public void run() {
            result1 = expensiveMethod("param1");
        }
    });

    final Thread thread1 = new Thread(new Runnable() {
        @Override
        public void run() {
            result2 = expensiveMethod("param2");
        }
    });

    thread1.join();
    thread.join();

    //Do rest of work
}

private Object expensiveMethod(Object param){
    // Do work and return result
} 
```

这有点丑陋且不理想，因为正如我所说，mainMethod 被多次调用，并且我不希望在设置结果变量时出现任何竞争条件。理想情况下，我想让它们成为局部变量，但我不能让它们从 run 方法中访问，除非它们是最终的，然后我不能给它们赋值......

我想做的另一种方法是：

```
public void mainMethod() throws InterruptedException, ExecutionException {
    String obj1, obj2;

    final ExecutorService executorService = Executors.newFixedThreadPool(16);
    final Future<String> res1 = executorService.submit(new Callable<String>() {
        @Override
        public String call() throws Exception {
            return expensiveMethod("param1");
        }
    });
    final Future<String> res2 = executorService.submit(new Callable<String>() {
        @Override
        public String call() throws Exception {
            return expensiveMethod("param2");
        }
    });

    obj1 = res1.get();
    obj2 = res2.get();

}

private String expensiveMethod(String param) {
    // Do work and return result
} 
```

这会自动等待来自 main 方法的这两个计算，并允许我将结果存储在本地。你们怎么看？还有其他方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T18:13:17.583

你的方法`ExecutorService`几乎是最现代和最安全的方法。建议将您`Callable`的 s 提取到单独的类中：

```
public class ExpensiveTask implements Callable<String> {

    private final String param;

    public ExpensiveTask(String param) {
        this.param = param;
    }

    @Override
    public String call() throws Exception {
        return expensiveMethod(param);
    }

} 
```

这将使您的代码更干净：

```
final ExecutorService executorService = Executors.newFixedThreadPool(16);
final Future<String> res1 = executorService.submit(new ExpensiveTask("param1"));
final Future<String> res2 = executorService.submit(new ExpensiveTask("param2"));
String obj1 = res1.get();
String obj2 = res2.get(); 
```

几点注意事项：

*   如果您只想同时处理两个任务，那么 16 个线程太多了 - 或者您想从多个客户端线程重用该池？

*   记得关闭游泳池

*   使用轻量级[`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)等待完成的第一个任务，不一定等待提交的第一个任务。

如果您需要完全不同的设计理念，请查看[akka](/questions/tagged/akka "显示标记为“akka”的问题")及其基于 actor 的并发模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T18:39:57.473

稍微不同的方法是：

*   创建一个 LinkedBlockingQueue

*   将其传递给每个任务。任务可以是线程，也可以是 jucExecutor 上的 Runnables。

*   每个任务将其结果添加到队列中

*   主线程在循环中使用 queue.take() 读取结果

这种方式结果在计算后立即处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T17:28:38.007

您想使用[CompletionService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CompletionService.html)并跟踪提交的任务。
然后在你的循环中，当你完成所有任务时，你 take() 并退出循环。
规模非常好，您稍后会添加更多任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T18:17:57.833

首先，您可能希望`ExecutorService`从您的创建外部化`mainMethod()`如果这被频繁调用，您可能会创建很多线程。

`Future`方法更好，因为这正是 Futures 的用途。此外，它使阅读代码更容易。

稍微轻松一点，尽管您可能必须将对象定义为 final，但无论您的引用是否为 final，您始终可以在对象上使用 setter 方法，这可能允许您更改 final 对象的值。（引用是最终对象不是！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T18:35:36.537

我将添加一个在我看来比为您的参数化创建一个全新的类更优雅的建议`Callable`。我的解决方案是一个返回`Callable`实例的方法：

```
Callable<String> expensive(final String param) {
  return new Callable<String>() { public String call() { 
    return expensiveMethod(param);
  }};
} 
```

这甚至使客户端代码更可口：

```
final Future<String> f1 = executor.submit(expensive("param1")); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-01T05:00:34.113

```
private static final ExecutorService threadpool = Executors.newFixedThreadPool(3);

    ArrayList<Future<List<Data>>> futures = new ArrayList<Future<List<Data>>>();
    for (ArrayList<Data> data : map.values()) {
        final Future<List<Data>> future = threadpool.submit(new ValidationTaskExecutor(data));
        futures.add(future);
    }
    List<List<Data>> res = new ArrayList<List<Data>>();
    for (Future<List<Data>> future : futures) {
        allValidRequest.addAll(future.get());

    } 
```

# php - 当用户不在线时运行 PHP 文件

> ID：12845884
> 
> 赞同：0
> 
> 时间：2012-10-11T18:08:10.090
> 
> 标签：php

我有一个 php 文件，例如`http://domain.com/user?id=uniquetoken`，当用户使用唯一令牌访问该 url 时，它会使用 javascript 和 php 做很多事情，完成某项任务至少需要 2 分钟。如果用户没有耐心并关闭该任务的窗口根本不执行，我需要的是当用户刚刚访问时`http://domain.com/user?id=token`，任务必须在后台完成。所以即使用户关闭窗口，任务也应该由后端的 php 完成，

我有一些想法，例如 file_get_contents，这会完全完成任务吗？有什么想法或建议吗？

编辑：有人告诉我`file_get_contents(http://domain.com/user?id=token)`，另一个 php 文件是否有效？即使他们立即关闭它？我已启用 `ignore_user_abort().`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:13:17.887

您可以将所有这些 url 保存在某个地方、文件或数据库中，并使用 cron 运行所有这些链接。如果用户没有退出页面并且任务完成 - 从存储中删除链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:14:31.573

当用户访问时，只需在要运行的 php 脚本上`http://domain.com/user?id=token`调用一个。`exec()`

如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。一旦`exec()`启动输出重定向，即使用户关闭浏览器，它也会继续在服务器中执行。

# javascript - 如何使用 jquery 或 javascript 在文本框中只允许阿拉伯文、数字和特殊字符？

> ID：12845891
> 
> 赞同：0
> 
> 时间：2012-10-11T18:08:36.150
> 
> 标签：javascript, jquery, textbox

> **可能重复：**
> [Jquery 过滤器文本框（防止用户插入某些字符）](https://stackoverflow.com/questions/994904/jquery-filter-text-boxes-preventing-user-from-inserting-certain-characters)

我想只允许在我的网页中输入阿拉伯语、数字和特殊字符。我想使用 jquery 或 javascript 应用这个东西。我能怎么做？请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:13:00.283

使用 jquery 验证插件。建立一个规则，将字符限制为您想要的字符（或者，可能已经有一个），将其应用于一个类，并将该类应用于您的所有输入字段。请注意，这不会阻止那些打算让你生病的人提交其他东西 - jquery validate 位于表单的顶部，并且可以通过一些hackery来提交它下面的东西 - 但它会确保每个人都试图做正确的事被引导到正确的道路上。

# iphone - iOS 溢出-x（或绝对位置）使滚动不连贯？

> ID：12845892
> 
> 赞同：32
> 
> 时间：2012-10-11T18:08:47.617
> 
> 标签：iphone, ios, css, scroll

我希望我的网页只能垂直滚动。所以我设置`overflow-x:hidden;`了我的`.page-wrapper`. My`.page-wrapper`将两个绝对定位的图层叠加在一起。当点击一个按钮时，顶层会滑到一边（如前所述`position:absolute;`），并使网站实际上比 100% 视口宽度更宽 - 所以它可以水平滚动。

为了防止我设置`overflow-x:hidden`为我的水平滚动`.page-wrapper`。

如果我这样做，我的正常内容的垂直滚动确实是错误的并且不能正常工作。

任何想法如何解决这个问题？

**更新**

`-webkit-overflow-scrolling: touch;`只要没有javascript改变任何高度，似乎就可以正常工作。请参阅以下示例。我在这里所做的是将主体的高度更新为第二层的内容高度 - 因此，一旦上层向左滑动，就没有空白的滚动空间。当将上层向后滑动时，我`style`从身体上移除了属性（设置高度）。在这样做之后，卷轴再次波涛汹涌。

```
function showInfos(show) {

    if ( show ) {
        $('#videos').addClass('slid');
        $('body').height($('#infos > .content').height());
        $('#page-wrap').addClass('no-overflow');
    } else if ( !show ) {
        $('#videos').removeClass('slid');
        $('#page-wrap').removeClass('no-overflow');
        $('body').removeAttr('style');
    }
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-06-29T13:41:50.437

尝试将其应用于每个元素：

```
* {
  -webkit-overflow-scrolling: touch;
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-11T19:36:07.853

您可以尝试设置`width:100%`on`.page-wrapper`并将其设置为`overflow:hidden`and `position:relative`。这可能会阻止水平滚动。

### 2012 年 10 月 12 日更新

感谢您的代码示例。它确实帮助我更清楚地了解了您的意图和滚动问题。看起来您需要[-webkit-overflow-scrolling](http://johanbrook.com/browsers/native-momentum-scrolling-ios-5/)。添加`-webkit-overflow-scrolling: touch;`到`page-wrapper`. 这是应用了该规则的 [更新的测试页面]。您可以在我下面的评论中与测试页面进行比较，以查看差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-08T16:14:36.553

这为我完成了工作，因此在任何页面上都不是问题：

```
html {
  -webkit-overflow-scrolling: touch;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-11T02:52:09.293

所以我在 Bootstrap 4.5 模板上遇到了这个问题：每当我添加 'overflow-x:hidden;' 到 .page-wrapper，iPhone 上的滚动不再流畅，而是断断续续。

但是当我删除 'overflow-x:hidden;' 从 .page-wrapper 开始，在 iPad 上，用户可以水平移动页面，这是不希望的。

Tim 的解决方案是一个很好的方向，对我来说最小的解决方案是在我的 CSS 文件中添加这两个部分：

**在 CSS 的顶部：**

```
html, body {width:100%; height:100%;} 
```

**在 CSS 中：**

```
.page-wrapper { 
/** overflow-x: hidden; GIVES ISSUES WITH IPHONE!!! **/

    width:100%; 
    height:100%;

    position:relative; 
    overflow-x:hidden; 
    -webkit-overflow-scrolling:touch;
} 
```

**不要忘记放入 index.html：**

```
<META name='viewport' content='width=device-width, initial-scale=1.0, shrink-to-fit=no'> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-10-07T19:57:47.413

TLDR；适用`transform: translate3d(0px,0px,0px)`于元素和包装器。

在我的例子中，一个绝对或固定位置的元素通过较小的 z-index 隐藏在主页后面。结果是，当包装器移开以使元素陶醉，然后移回时，在 iOS 上，尝试滚动该元素所在的位置时会出现延迟。我*可以*滚动，但我必须按住大约一秒钟。

这里描述的解决方案对我有用： [https ://css-tricks.com/forums/topic/mobile-safari-iphone-issue-with-position-fixed-content-running-over-the-top/](https://css-tricks.com/forums/topic/mobile-safari-iphone-issue-with-position-fixed-content-running-over-the-top/)

基本上，元素和元素的包装器都需要`transform: translate3d(0px,0px,0px)`应用样式，然后滚动顺利进行。对我来说，如果不将它应用于元素和包装器，修复就不起作用。

# iphone - 在 UIViewController 之间传递数据时获取（null）

> ID：12845893
> 
> 赞同：1
> 
> 时间：2012-10-11T18:09:04.557
> 
> 标签：iphone, objective-c, ios

我很困惑。我有一个 UITableView，当我单击一行时，它会执行一个带有新 UIViewController 的 pushViewController。我想将数据传递给这个新的视图控制器，但我的对象为空。这是我使用的代码：

```
//TableViewController.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    MyObject *myObject = [myArray objectAtIndex:indexPath.row];
    SecondViewController *vc = [[SecondViewController alloc] init];
    vc.newObject = myObject;
    [self.navigationController pushViewController:vc animated:YES];
}

//SecondViewController.h
@property (nonatomic, strong) MyObject *newObject;

//SecondViewController.m
@implementation SecondViewController
@synthesize newObject = _newObject;

- (void)viewDidLoad {
   NSLog(@"%@", _newObject);   // nil
} 
```

这很奇怪，因为我一直都是这样做的，而且以前总是这样，我不明白为什么返回的值为 null。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:55:34.757

检查您是否正在重置`newObject`其他地方，例如`init`方法左右。也将其更改`NSLog`为`NSLog(@"%@", self.newObject);`并重试。

# bash - bash 中的备份文件循环

> ID：12845894
> 
> 赞同：0
> 
> 时间：2012-10-11T18:09:06.627
> 
> 标签：bash, loops

我正在编写一个脚本，该脚本需要一个目录，将其中的所有文件复制到一个新目录，然后重命名新目录中的所有文件，以在其名称中包含 -BACKUP 在扩展名之前。

到目前为止，我有：

```
dir1=$1
dir2=$2

mkdir $dir2
cp -r $dir1/. $dir2

for i in $dir2
do
file=$(basename "$i")
b=${file%.*}
c=${file#"$stub"}
d=-BACKUP
e=$b$d$c
mv $i $e

done 
```

尽管这只会更改目录的名称，而不是目录中的所有文件。

我做错了什么，您将如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:14:26.437

您需要进行一些全局操作：

```
for i in "$dir2"/* 
```

（请注意，这不会捕获`.dotfiles`，并且会枚举文件和目录，因此如果其中任何一个有问题，您可能需要更多的逻辑。）

如果您希望`$dir2`在复制后可能为空，请添加：

```
shopt -s nullglob 
```

在`for`这种情况下，循环根本不会运行。（否则你会得到`$dir2/*`字面上`$i`是不受欢迎的。）

```
mv $i $e 
```

将不起作用，因为`$e`它不包含您构建它的方式的路径。尝试：

```
mv "$i" "$dir2/$e" 
```

（如果您希望文件名称中包含空格，则应引用所有这些变量。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:18:59.053

我会在支持它的系统上使用`find`和：`rename`

```
cp -R "$dir1" "$dir2"
find "$dir2" | xargs rename 's/$/-BACKUP/' 
```

# meteor - 如何“如果检查”模板助手并在模板中使用它的返回值

> ID：12845897
> 
> 赞同：0
> 
> 时间：2012-10-11T18:09:21.000
> 
> 标签：meteor

基本上这是我的代码，它被重复了。`have_last_attr`如果我使用2 次（如果在内部），它不起作用。我怎么能管理它？

```
# .html
{{#if have_last_attr}}
    <h3>Last attribute was {{last_attr}}</h3>
{{/if}}

# .js
Template.game.have_last_attr = function(){
    var game_id = Session.get('current_game'),
        game = Games.findOne(game_id),
        attr = game['last_attr'];

    return TRANSLATE[attr];
};

Template.game.last_attr = function(){
    var game_id = Session.get('current_game'),
        game = Games.findOne(game_id),
        attr = game['last_attr'];

    return TRANSLATE[attr];
}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:10:02.047

您可以使用该`{{#with ...}}`语句（[车把文档](http://handlebarsjs.com/#with)）。至少如果我不想做两次事情，我会这样做......

```
{{#with last_attr}}
   {{#if this}}
       <h3>Last attribute was {{this}}</h3>
   {{/if}}
{{/with}} 
```

# memory-management - 使用 scipy.ndimage 的内存高效高斯模糊

> ID：12845904
> 
> 赞同：3
> 
> 时间：2012-10-11T18:09:39.720
> 
> 标签：memory-management, scipy, gis, gaussian

我正在尝试对大型 GIS 数据集（10000 x 10000 数组）进行高斯平滑处理。我目前的方法是将整个数组加载到内存中，对其进行平滑处理，然后将其写回。它看起来像这样：

```
big_array = band_on_disk.ReadAsArray()
scipy.ndimage.gaussian_filter(big_array, sigma, output=smoothed_array)
output_band.WriteArray(smoothed_array) 
```

对于大型栅格，我得到一个`MemoryError`，所以我想加载该数组的子块，但我不确定如何处理影响相邻子块的区域的高斯平滑。

关于如何修复上述算法的任何建议，以便它在更小的内存占用上工作，同时仍然正确地平滑整个数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T18:29:24.967

尝试使用[内存映射](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)文件。

## 适度的内存使用和可忍受的快速

如果您负担得起将*其中一个*数组存储在内存中，那么这将是可以忍受的快：

```
import numpy as np
from scipy.ndimage import gaussian_filter

# create some fake data, save it to disk, and free up its memory
shape = (10000,10000)
orig = np.random.random_sample(shape)
orig.tofile('orig.dat')
print 'saved original'
del orig

# allocate memory for the smoothed data
smoothed = np.zeros((10000,10000))

# memory-map the original data, so it isn't read into memory all at once
orig = np.memmap('orig.dat', np.float64, 'r', shape=shape)
print 'memmapped'

sigma = 10 # I have no idea what a reasonable value is here
gaussian_filter(orig, sigma, output = smoothed)
# save the smoothed data to disk
smoothed.tofile('smoothed.dat') 
```

## 内存使用率低且非常慢

如果您不能一次将任一数组都放在内存中，则可以对原始数组和平滑数组进行内存映射。至少在我的机器上，这具有非常低的内存使用率，但速度非常慢。

您必须忽略此代码的第一部分，因为它会欺骗并立即创建原始数组，然后将其保存到磁盘。您可以将其替换为代码以加载您在磁盘上增量构建的数据。

```
import numpy as np
from scipy.ndimage import gaussian_filter

# create some fake data, save it to disk, and free up its memory
shape = (10000,10000)
orig = np.random.random_sample(shape)
orig.tofile('orig.dat')
print 'saved original'
del orig

# memory-map the original data, so it isn't read into memory all at once
orig = np.memmap('orig.dat', np.float64, 'r', shape=shape)
# create a memory mapped array for the smoothed data
smoothed = np.memmap('smoothed.dat', np.float64, 'w+', shape = shape)
print 'memmapped'

sigma = 10 # I have no idea what a reasonable value is here
gaussian_filter(orig, sigma, output = smoothed) 
```

# objective-c - 此类与键 PerformRotate 的键值编码不兼容

> ID：12845905
> 
> 赞同：2
> 
> 时间：2012-10-11T18:09:42.030
> 
> 标签：objective-c, ios, xcode, key

我对编程比较陌生，我正在使用 Xcode 编写一个非常简单的动画。

这是我的*BuildingViewController.h*：

```
#import <UIKit/UIKit.h>

@interface BuildingViewController : UIViewController {

}
@property (nonatomic, retain) IBOutlet UIButton * buttonTarget;

- (IBAction)performRotate:(id)sender;
//- (void)setValue:(id)value forKey:(NSString *)performRotate;

@end 
```

这是我的 BuildingViewController.m

```
import "BuildingViewController.h"

@interface BuildingViewController ()

@end

@implementation BuildingViewController

//@synthesize image;

- (void)viewDidLoad
{
//    [image setAlpha:0];
//  [self startAnimation];
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}
- (IBAction)performRotate:(id)sender {

    [UIView animateWithDuration:1.0 animations:^{
    CGAffineTransform previousTransformation = self.buttonTarget.transform;
    CGAffineTransform newRotationTransformation = CGAffineTransformMakeRotation(90.0f * (M_PI / 180.0f));
    CGAffineTransform newTransformation = CGAffineTransformConcat(previousTransformation, newRotationTransformation);
    self.buttonTarget.transform = newTransformation;
}];

}

@end 
```

我得到的错误如下所示：

2012-10-11 10:08:47.676 graphics1[27608:c07] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码的键 PerformRotate 。*** First throw call stack: (0x1c8e012 0x10cbe7e 0x1d16fb1 0xb78711 0xaf9ec8 0xaf99b7 0xb24428 0x2300cc 0x10df663 0x1c8945a 0x22ebcf 0xf3e37 0xf4418 0xf4648 0xf4882 0x43a25 0x43dbf 0x43f55 0x4cf67 0x10fcc 0x11fab 0x23315 0x2424b 0x15cf8 0x1be9df9 0x1be9ad0 0x1c03bf5 0x1c03962 0x1c34bb6 0x1c33f44 0x1c33e1b 0x117da 0x1365c 0x259d 0x24c5) libc++abi.dylib:终止称为抛出异常

我是否必须篡改*BuildingAppDelegate.h*或*.m*？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T18:13:18.603

检查您的 XIB/故事板。很有可能您的`- (IBAction)performRotate:(id)sender`方法最初是命名`- (IBAction)PerformRotate:(id)sender`的，而后一种方法是在 IB 中连接的。当您更改方法名称时，您必须在 XIB/Storyboard 中重新连接它，否则它将调用您不再存在的旧方法。

# satellite - 地球卫星的地平线

> ID：12845908
> 
> 赞同：2
> 
> 时间：2012-10-11T18:09:50.073
> 
> 标签：satellite, pyephem

调整观察者水平属性似乎对地球卫星的上升/设定时间没有影响。此外，我在 libastro 代码中发现了这一点：

```
/* we don't implement a minimum horizon altitude cutoff
    SiteMinElev = 0;
*/ 
```

没有实施地平线截止是否有原因？例如，这对于进行卫星高程掩蔽很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:02:49.070

好消息：卫星升起和设置不是该工作的工作，`earthsat.c`因此您在作者的源代码中找到的评论`libastro`并不表明 PyEphem 缺乏调整其用于地球卫星的地平线的能力。`riset_cir.c`如果您对它们的工作原理感到好奇，可以在他的文件中找到上升和设置例程。

坏消息：您看到的行为是 PyEphem 中的一个错误！事实上，虽然 PyEphem 确实在运行地球卫星升降计算时尝试使用观察者的视界设置，但它会将视界从错误的位置拉出。（有关详细信息，请参阅中的`_next_pass()`函数`_libastro.c`。）它不使用观察者的地平线，而是使用您上次调用`compute()`卫星时的地平线值。

我将把这个 bug 添加到 PyEphem 待办事项列表中。同时，你可以强制你的卫星“看到”你希望它使用的地平线值，方法是`sat.compute(observer)`先调用，然后再询问它的下一次通过开销。这是一个例子：

```
import ephem
iss = ephem.readtle(
    'ISS (ZARYA)',
    '1 25544U 98067A   12286.88755895  .00013766  00000-0  24141-3 0  4559',
    '2 25544  51.6478 256.6034 0017425 159.6565 253.2565 15.50708155796305',
    )
boston = ephem.city('Boston')

rising_time = boston.next_pass(iss)[0]
print 'Horizon =  0 rising:', rising_time

boston.horizon = '-5'
iss.compute(boston)

rising_time = boston.next_pass(iss)[0]
print 'Horizon = -5 rising:', rising_time 
```

这个脚本应该向你展示一个更早的上升时间，因为我们已经将地平线推到了纯几何地平线之下，我确实得到了答案；如果你也这样做，请告诉我！

```
Horizon =  0 rising: 2012/10/13 05:14:28
Horizon = -5 rising: 2012/10/13 05:12:58 
```

# jquery - jquery sortable 组合两个列表行

> ID：12845912
> 
> 赞同：1
> 
> 时间：2012-10-11T18:10:11.000
> 
> 标签：jquery, list, line, connect, jquery-ui-sortable

我希望能够通过一条线直观地将两个单独列表中的项目组合起来，以表示它们是连接的。这是否可以使用 jquery 或其他方式来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:12:24.727

您正在寻找[jquery UI 可排序连接列表](http://jqueryui.com/sortable/#connect-lists)

# java - 如何轻松地将我的 POJO 转换为 JSON 数据？

> ID：12845914
> 
> 赞同：0
> 
> 时间：2012-10-11T18:10:18.850
> 
> 标签：java, json, pojo

我怎样才能使它在我们的 DAO 对象中更可重用？

```
List<User> list = userService.getAll();

JSONObject json = new JSONObject();
JSONArray jsonArray = new JSONArray();

for(User user : list) {
    JSONObject userJson = new JSONObject();
    userJson.put("id", user.getId());
    userJson.put("FirstName", user.getFirstName());
    ....
    jsonArray.add(userJson);
}

json.put("results", jsonArray);

return json.toJsonString(); 
```

无论如何，这是记忆中的代码，但你明白了。必须有一个更简单的方法。此外，我们并不总是希望返回 POJO 的每个属性。在某些情况下，我们可能只需要`FirstName`and`LastName`而在其他情况下，我们会添加`PhoneNumber`等。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:42:01.717

您也可以尝试 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。

它具有完整的数据绑定支持，但也有一个低级别的流 api。它易于使用，根据用户反馈，它会比杰克逊更容易使用。它有几个特性是唯一提供的，例如使用带有任何附加注释的构造函数对对象进行反序列化。

要开始，您可以查看 wiki [http://code.google.com/p/genson/wiki/GettingStarted](http://code.google.com/p/genson/wiki/GettingStarted)它应该有助于快速开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:21:30.607

我会使用 Google [Gson](http://code.google.com/p/google-gson/)
非常好用

# java - Red5视频流录制正在中断

> ID：12845920
> 
> 赞同：2
> 
> 时间：2012-10-11T18:10:33.933
> 
> 标签：java, video, stream, red5

最后，我创建了一个流式视频录像机 Flash 应用程序及其简单的 Red5 后端，但 Red5 当然又在开玩笑了。大多数情况下，录制的视频已损坏，如果不随机停止-恢复、挂出播放器.. 以及我，就无法播放它们。为什么要这样做？

我研究了互联网，发现了这个问题，但没有解决方案！我尝试不录制视频，而是将其切换为直播并附加一个 ffmpeg 来完成这项肮脏的工作，但自然 ffmpeg 无法连接到 red5 输出上的以下错误消息：

> 执行调用时出错：服务：null 方法：play Num Params：1 0：my_little_stream ... blabla bla

在我尝试集成[Xuggler](http://www.xuggle.com/xuggler "许格勒")的东西之前，我真的不想问你，该怎么做，我可以以某种方式附加 ffmpeg 还是 red5 服务器中的配置我应该更改.. 或任何东西！谢谢！

**编辑**：我正在使用 Red5 1.0 RC2

**编辑#2**：我用 red5 1.0.0rc2 服务器文件从主干源编译了 oflaDemo 应用程序，然后用一个简单的 flex 应用程序创建了一个实时流，只是为了尝试 ffmpeg 记录器是否工作。现在它可以连接到red5，但结果是一样的！视频好像有问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:00:16.740

*但是我应该在 packetReceived() 函数中添加什么？*

我将其添加到单独的答案中以正确突出显示：

要将数据包写入磁盘，您需要：1）数据包，2）将数据包转换为 ITag 3）获取 ITagWriter 的实例

1) 第 50 行左右的数据包数据[http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/StreamVideoListener.java?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/StreamVideoListener.java?view=markup)

```
public void packetReceived(IBroadcastStream broadcastStream,
  IStreamPacket streampacket) {

} 
```

streampacket => 要写入磁盘的数据包。

2) 通过将数据包转换为 ITag 来写入数据包

[http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/async/StreamVideoWriter.java?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/async/StreamVideoWriter.java?view=markup) 90ff 行左右

```
 IoBuffer data = streampacket.getData().asReadOnlyBuffer();

        if (data.limit() == 0) {
            return;
        }

        if (startTimeStamp == -1) {
            // That will be not bigger then long value
            startTimeStamp = streampacket.getTimestamp();
        }

        timeStamp -= startTimeStamp;

        ITag tag = new Tag();
        tag.setDataType(streampacket.getDataType());

        // log.debug("data.limit() :: "+data.limit());
        tag.setBodySize(data.limit());
        tag.setTimestamp(timeStamp);
        tag.setBody(data);

        writer.writeTag(tag); 
```

3) 获取一个Writer实例

[http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/async/BaseStreamWriter.java?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/async/BaseStreamWriter.java?view=markup) 90ff 行附近

```
protected ITagWriter writer = null;

private void init() throws IOException {
    file = new File(OmFileHelper.getStreamsSubDir(this.scope.getName()), this.streamName + ".flv");

    IStreamableFileFactory factory = (IStreamableFileFactory) ScopeUtils
            .getScopeService(this.scope, IStreamableFileFactory.class,
                    StreamableFileFactory.class);

    if (!this.file.isFile()) {
        // Maybe the (previously existing) file has been deleted
        this.file.createNewFile();

    } else if (!file.canWrite()) {
        throw new IOException("The file is read-only");
    }

    IStreamableFileService service = factory.getService(this.file);
    IStreamableFile flv = service.getStreamableFile(this.file);
    this.writer = flv.getWriter();

} 
```

所以这是一个艰难的过程。从这个意义上说，您可以继续前进。

[http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/async/BaseStreamWriter.java?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/data/flvrecord/listener/async/BaseStreamWriter.java?view=markup) _

类还包含一个队列来收集数据包。

IStreamPacket.getType == 9 是视频，我认为 8 是音频（但您需要验证）。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:24:42.133

你现在用什么录音方法？Red5 中实际上有 2 种记录方法：1) NetStream.record => 这很简单 2) 您执行 NetStream “实时”，但您有一个服务器端 StreamListener，您将其附加到流上，然后将流写入光盘。

我已在以下位置成功实施了这两种解决方案：http: [//incubator.apache.org/openmeetings/](http://incubator.apache.org/openmeetings/) 没有断断续续的视频或随机停止/暂停。

无需集成 FFMPEG 或 Xuggler 即可使用 Red5 进行简单的录制！如果您想修改生成的视频并添加水印，FFMPEG 可能会很有用。对于音频编辑，您可以使用 SoX 等工具。然而......只是简单的记录和播放根本不需要这些工具！

塞巴斯蒂安

# javascript - Highcharts，高亮点，不使用点击事件？

> ID：12845921
> 
> 赞同：0
> 
> 时间：2012-10-11T18:10:40.140
> 
> 标签：javascript, charts, highcharts

我需要在条形图中突出显示一列。我找到了这个例子[http://jsfiddle.net/shawson/CkkbF/8/](http://jsfiddle.net/shawson/CkkbF/8/)

他们`this.update({ color: '#f00' }, true, false)` 在点击事件中使用。

我的问题是，如何在`this`没有点击事件的情况下更改颜色？是什么`this`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:52:10.410

看看[这个小提琴](http://jsfiddle.net/CkkbF/23/)。您可以在创建数据时将颜色添加到数据中，如下所示：

```
data: [29.9, {y: 34.4, color: 'red'}, {y: 176.0, color: '#aaff99'}, 135.6 ...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:41:40.503

如果您查看[参考资料](http://api.highcharts.com/highstock#series.data.color)，您会发现每个点都可以是`number`、`array`of`numbers`或`object`。
当它是一个时，`object`您可以设置`color`, `dataLabels`, `events`, `id`, `marker`, `name`,`x`和`y`.
因此，在这种情况下，您必须将 an 传递`object`给`point`您要设置的`color`.

**`this` 指点击的点，而不是`chart`.** [参考](http://api.highcharts.com/highcharts/plotOptions.series.point.events.click)

如果你登录`this`，你会看到。[**演示**](http://jsfiddle.net/FQGBv/)

当您将事件绑定到 时`point`，`this`指的是`point`.
当您将事件绑定到 时`serie`，`this`指的是`serie`.
当您将事件绑定到 时`chart`，`this`指的是`chart`.

# c - 如何找到几个字符之一的第一次出现（使用正则表达式除外）

> ID：12845923
> 
> 赞同：4
> 
> 时间：2012-10-11T18:10:45.820
> 
> 标签：c, regex, strstr

在经历了一堆线程之后，我知道我需要使用 regex.h 在 C & C++ 中使用正则表达式。

但我想知道，有没有更简单的方法来搜索字符串中出现的“/”或“\”。

```
// I have a strstr statement like this -
str = strstr(s, "/"); 
```

我想知道是否可以更改它，以便我可以在对 strstr 的单个调用中搜索 a `/` **或的第一次出现。** `\`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T18:14:19.330

尝试[strcspn](http://www.cplusplus.com/reference/clibrary/cstring/strcspn/)：

> **Get span until character in string**
> 扫描 str1 中第一次出现的任何属于 str2 的字符，返回在第一次出现之前读取的 str1 的字符数。
> 
> 搜索包括终止空字符。因此，如果在 str1 中没有找到 str2 的字符，该函数将返回 str1 的长度。

例子：

```
#include <stdio.h>
#include <string.h>

const char* findany(const char* s, const char* keys)
{
    const char* tmp;
    tmp = s + strcspn(s,keys);
    return *tmp == '\0' ? NULL : tmp;
}

int main ()
{
  char str1[] = "abc\\123";
  char str2[] = "abc/123";
  char str3[] = "abc123";
  char keys[] = "/\\";
  printf("1: %s\n",findany(str1,keys));
  printf("2: %s\n",findany(str2,keys));
  printf("3: %s\n",findany(str3,keys));
  return 0;
} 
```

**编辑**：`strpbrk`做和上面一样的事情`findany`。没看到这个功能：

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str1[] = "abc\\123";
  char str2[] = "abc/123";
  char str3[] = "abc123";
  char keys[] = "/\\";
  printf("1: %s\n",strpbrk(str1,keys));
  printf("2: %s\n",strpbrk(str2,keys));
  printf("3: %s\n",strpbrk(str3,keys));
  return 0;
} 
```

输出（两者）：

```
1: \123
2: /123
3: (null) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T20:47:24.533

有一个 C 函数可以做到这一点 - [strpbrk()](http://linux.die.net/man/3/strpbrk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:14:26.303

> 我想知道是否可以更改它，以便我可以在一次调用 strstr 时搜索第一次出现的“/”或“\”

您可以使用`strtok`，它修改源字符串（或参见`strtok_r`）。或者您可以使用`strcspn`：

```
The strcspn() function shall compute the length (in bytes) of the maximum
initial segment of the string pointed to  by  s1  which consists entirely
of bytes not from the string pointed to by s2. 
```

所以

```
p = s + strcspn(s, "/\\"); 
```

将返回指向 /、\ 或最终 NUL 字符的指针（如果既未找到 \ 也未找到 //）。

当然，你也可以运行`strchr`两次，看看哪一个是第一个（如果不是 NULL）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T18:13:51.693

您可以尝试使用 strchr 函数来查找第一次出现的字符：

```
pos_of_first_slash=strchr(s, '/'); 
```

返回指向 C 字符串 str 中第一次出现的字符的指针。

> 终止的空字符被认为是 C 字符串的一部分。因此，也可以定位它以检索指向字符串末尾的指针。
> 
> 返回指向 str 中第一次出现的字符的指针。如果未找到该字符，则该函数返回一个空指针。

# android - 读取 AssetFileDescriptor 时出现 IOException

> ID：12845925
> 
> 赞同：2
> 
> 时间：2012-10-11T18:10:52.110
> 
> 标签：android, android-resources, android-assets

我正在尝试`/assets`使用以下代码从 Android 文件夹中读取位图：

```
AssetFileDescriptor fd = getAssets().openFd("pic1.jpg")
Bitmap bitmap = BitmapFactory.decodeFileDescriptor(fd.getFileDescriptor()); 
```

我得到的异常表明文件权限错误：

```
java.io.IOException: read failed: EBADF (Bad file number)
    at libcore.io.IoBridge.read(IoBridge.java:432)
    at java.io.FileInputStream.read(FileInputStream.java:179)
    at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:168)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:309)
    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
    at android.graphics.BitmapFactory.decodeFileDescriptor(BitmapFactory.java:670)
    at android.graphics.BitmapFactory.decodeFileDescriptor(BitmapFactory.java:688) 
```

尝试从输入流中读取它会产生类似的异常：

```
AssetFileDescriptor fd = getAssets().openFd("pic1.jpg");
FileInputStream is = fd.createInputStream();
Bitmap bitmap = BitmapFactory.decodeStream(is); 
```

例外：

```
java.io.IOException: lseek failed: EBADF (Bad file number)
Stack trace:
  at java.io.FileInputStream.skip(FileInputStream.java:197)
  at android.content.res.AssetFileDescriptor$AutoCloseInputStream.<init>(AssetFileDescriptor.java:173)
  at android.content.res.AssetFileDescriptor.createInputStream(AssetFileDescriptor.java:138) 
```

直接从输入流中读取给出了另一个例外：

```
InputStream is = getAssets().open("pic1.jpg");
Bitmap bitmap = BitmapFactory.decodeStream(is); 
```

例外：

```
java.lang.NullPointerException: asset
  at android.content.res.AssetManager.seekAsset(Native Method)
  at android.content.res.AssetManager.access$600(AssetManager.java:35)
  at android.content.res.AssetManager$AssetInputStream.mark(AssetManager.java:567)
  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:572)
  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:643) 
```

读取资产的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T00:56:53.153

问题是我没有从主线程中读取资产。在我正在开发的应用程序中，两个列表项可以同时加载相同的、相当大的资产。

简而言之，如果在另一个线程尝试访问该文件时仍在读取该文件，`IOException`则会抛出“lseek failed: EBADF (Bad file number)”。

# c# - 将一个对象嵌入到另一个对象中

> ID：12845926
> 
> 赞同：0
> 
> 时间：2012-10-11T18:10:53.327
> 
> 标签：c#, asp.net-mvc-3

我正在尝试复制一个复杂的对象。原始对象就像

```
 Note note = db.Notes.FirstorDefault(n............); 
```

当我将鼠标悬停在 Note 对象上时，会看到这个 stuctor

注意 | 数据.模型.注释

如果向下钻取，我会看到

Base Data.Model.AnalyNote

如果再次向下钻取，我会看到

基础数据.模型 CPObject

如果查看变量“note”，我会在第一层看到这个

> ```
>  +base Data.Model.Note
>          +AnalyNotes
>           FisYear
>           Quarter
>           QReport 
> ```

如果我看第二层

> ```
>  +base Data.Model.AnalyNote
>          +Attachments
>          +Classify
>           Headline
>           IsDraft 
> ```

如果我去第三层

> ```
>  +Data.Model.CPObject
>           EntryId
>          +EntryDate
>           Id 
> ```

其中每一个（Note、AnalyNote、CPObject）都是单独的模型。我可以创建单独的模型，但不明白如何嵌入它们以复制原始 Note 模型。我创建了三个使用

```
 var NNotes = new Notes()
         {
            data.....
         }

         var AAnote = new AnalyNote()
         {
            data......
         }

         var CPONote = new CPObject()
         {
            data.....
         } 
```

这是我所得到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:19:13.250

这里有两件事：

1.  从您的向下钻取来看，Data.Model.Note 似乎继承自 Data.Model.AnalyNote，后者继承自 Data.Model.CPObject（我假设您在 CPObject 的命名空间之外留下了一个句点）。因此，您不需要创建所有三个，只需创建 Data.Model.Note。MVC 应该为您处理建模工作。
2.  如果您从实现[iCloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)的东西中获取 Note ，您的工作可能很简单

    `Note note = db.Notes.FirstorDefault(n............); Note duplicate = note.Clone();`

* * *

从您下面的评论中，听起来您正在尝试对您的 Note 模型进行子类化。听起来您的模型还没有任何数据，因此代码优先的方法可能会很好。你可能会像这样制作一个新模型

```
class Data.Model.NewerNote : Data.Model.Note
{
// the new fields ("variables") would go here.
     public int NoteFoo {get; set;}
     public DateTime NoteFrob {get; set;}
// and so on.
} 
```

您可以在此处找到参考书，例如[Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do)或[Programming ASP.NET MVC 4](http://shop.oreilly.com/product/0636920024040.do)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:36:40.823

尽管我认为 Reacher Gilts 的回答正确地分析了您的情况，但如果您想“将一个对象嵌入另一个对象”，这被称为组合，它就像声明一个新类一样简单，该类的成员是其他三个类的实例。

```
public class OuterNote
{
    NNote nNote;
    AAnote aaNote;
    CPONote cpoNote;

   public OuterNote()
   {
       nNote = new NNote();
       aaNote = new AANote();
       cpoNote = new CPONote();
   }

   // add other constructors or initializers to this class and the others needed
} 
```

# c - c语言变量是如何存储的（在堆栈，列表，树中？）它们存储在哪里？（在ram / hdd中）？

> ID：12845937
> 
> 赞同：-3
> 
> 时间：2012-10-11T18:11:36.280
> 
> 标签：c, memory

我有点困惑存储在计算机内存中的 c 变量如何
解释它们的存储位置以及它们以什么数据结构形式存储？

```
 #include<stdio.h>
 #include<conio.h>
 int main(void)
 {
  int r;
  int a,b,c;
  a=10;
  b=20;
   c=30;
 char e=3;
 int f[10]={1,2,3};

  printf("the value of pointers is\n %d\n %d\n %d\n %d\n %d\n %d\n",&a,&b,&c,&e,&f,&r);
  getch();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:14:03.363

中有不同的存储类`c`，您的示例中的存储类存储在堆栈中。

您可能应该`c`先阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:17:18.563

一般来说（我是认真的，因为对于我将在这里写的每个句子都可以找到一个反例），您可以定义的所有 C 变量都将存储在内存 (RAM) 中。不同类型的变量可以保存在不同类型（*段*）的内存中。

您编译的 C 程序位于代码段中。您在函数中定义的常用变量在程序的*堆栈*（也是内存）上定义。您使用 malloc() 等分配的变量。位于*堆上*（同样是内存）。除非您写入某个文件，否则磁盘上不会存储任何内容。

现在，我说的对吗？不完全是。操作系统通过*分页*机制决定哪些内容存储在 RAM 中，哪些内容存储在磁盘上。内存是按*页*管理的。如果操作系统认为应该将每个页面*换出到硬盘驱动器，那么您的所有变量都可以在该页面中，这意味着它们将存储在磁盘上。*如果稍后需要此内存，操作系统将*在此页面中交换*回内存。

同样，这是一般情况。您的操作系统可以禁用分页，在这种情况下，所有内容都将始终在内存中。您还可以将内存的某些部分映射为磁盘驱动器，在这种情况下，写入该磁盘的所有内容仍保留在内存中。

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:04:17.333

变量存储的位置和方式的确切细节取决于实现。语言定义仅指定变量的可见性和生命周期，而不是存储它们的机制。

我们将看一个特定的实现——Red Hat 7.2 上的 gcc 2.96。

这是一个简单的源文件：

```
#include <stdio.h>

int gvar = 1;            // file scope, static extent

int main(void)
{
  static int svar = 2;  // block scope, static keyword => static extent
  int avar = 3;         // block scope, auto extent

  do {
    int avar2 = 4;      // block scope, auto extent
    printf("gvar   = %d (%p)\nsvar   = %d (%p)\navar   = %d (%p)\navar2  = %d (%p)\n", 
    gvar, (void *) &gvar,
    svar, (void *) &svar,
    avar, (void *) &avar,
    avar2, (void *) &avar2);
  } while (0);

  return 0;
} 
```

使用关键字`static`或在文件范围（任何函数之外）声明的变量具有 storage class `static`，这意味着这些变量的内存在程序启动时分配并保留到程序退出。在块中声明且没有`static`关键字的变量具有存储类`auto`，这意味着它们只存在于该块中¹。 `avar2`不能被`do`循环外的名字引用，也不能保证在循环退出后保持它的值。

我们编译程序

```
gcc -o storage -g storage.c -ansi -pedantic -Wall -Werror -Wa,-aldh=storage.lst.redhat 
```

将`-Wa,-alhd=...`生成的机器代码列表写入指定文件。由于我们添加了`-g`调试标志，原始 C 源代码将与机器代码交错。

这是程序的输出：

```
gvar = 1 (0x80495b0)
svar = 2 (0x80495b4)
avar = 3 (0xbfffe4e4)
avar2 = 4 (0xbffffe4e0)

```

显然，在这个实现中，具有静态范围的变量`gvar`和`avar`存储的变量与具有自动范围的变量完全不同，比如`avar`和`x`。

这是生成的汇编代码的列表（减去一些分页符）：

```
   1 .文件“storage.c”
   2.版本“01.01”
   5.文本
   6.Ltext0：
 第165章
 第166章
 第168章 4
 171 克瓦尔：
 172 0000 01000000 .long 1
 第173章 4
 176 变量.0：
 177 0004 02000000 .long 2
 第178章
 第179章 32
 180 .LC0：
 181 0000 67766172 .string "gvar = %d (%p)\nsvar = %d (%p)\nvar = %d (%p)\navar2 = %d (%p)\n"
 181 2020203D
 181 20256420
 181 28257029
 181 0A737661
 182 0044 00000000 .文本
 182 00000000
 182 00000000
 182 00000000
 182 00000000
 第183章 4
 第185章
 187主线：
   1:storage.c **** #include
   2：存储.c ****
   3:storage.c **** int gvar = 1;
   4：存储.c ****
   5:storage.c **** int main(void)
   6：存储.c **** {
 189 .LM1：
 190.LBB2：
 191 0000 55 推升 %ebp
 192 0001 89E5 移动 %esp, %ebp
 193 0003 83EC08 subl $8, %esp
   7:storage.c **** 静态 int svar = 2;
   8:storage.c **** int avar = 3;
 195 .LM2：
 196 0006 C745FC03 移动 $3, -4(%ebp)
 196 000000
   9：存储.c ****
  10:storage.c **** 做{
  11:storage.c **** int avar2 = 4;
 198 .LM3：
 199 .LBB3：
 200 000d C745F804 movl $4, -8(%ebp)
 200 000000
  12:storage.c **** printf("gvar = %d (%p)\nsvar = %d (%p)\nvar = %d (%p)\navar2 = %d (%p)\n" ,
 202 .LM4：
 203 0014 83EC0C subl $12, %esp
 204 0017 8D45F8 leal -8(%ebp), %eax
 205 001a 50 推力 %eax
 206 001b FF75F8 pushl -8(%ebp)
 207 001e 8D45FC leal -4(%ebp), %eax
 208 0021 50 推力 %eax
 209 0022 FF75FC pushl -4(%ebp)
 210 0025 68040000 pushl $svar.0
 210 00
 211 002a FF350400 pushl svar.0
 211 0000
 212 0030 68000000 推力 $gvar
 212 00
 213 0035 FF350000 pushl gvar
 213 0000
 214 003b 68000000 推力 $.LC0
 214 00
 215 0040 E8FCFFFF 调用 printf
 215 法郎
 216 0045 83C430 加价 48 美元，%esp
  13:storage.c **** gvar, (void *) &gvar,
  14:storage.c **** svar, (void *) &svar,
  15:storage.c **** avar, (void *) &avar,
  16:storage.c **** avar2, (void *) &avar2);
  17:storage.c **** } while (0);
 218 .LM5：
 219 .LBE3：
  18：存储.c ****
  19:storage.c **** 返回 0；
 221 .LM6：
 222 0048 B8000000 移动 $0, %eax
 222 00
  20:storage.c **** }
 224 .LM7：
 225 .LBE2：
 226 004d C9 离开
 227 004e C3 RET
 第228章
 第237章
 第239章
 241\. 正文：
 242 004f 90 .ident“GCC：（GNU）2.96 20000731（Red Hat Linux 7.2 2.96-112.7.2）”

```

有很多东西要费力，但它告诉我们为什么我们在内存地址上会出现如此大的差异。

线条

```
   5.文本
   6.Ltext0：
 第165章
 第166章
 第168章 4
 171 克瓦尔：
 172 0000 01000000 .long 1
 第173章 4
 176 变量.0：
 177 0004 02000000 .long 2

```

告诉我们 和 的内存`gvar`位于`svar`程序`.text`映像的部分，即程序代码所在的位置。

相比之下，线条

```
195 .LM2：
 196 0006 C745FC03 移动 $3, -4(%ebp)
 196 000000
...
 198 .LM3：
 199 .LBB3：
 200 000d C745F804 movl $4, -8(%ebp)
 200 000000

```

告诉我们 和 的内存`avar`相`avar2`对于当前帧指针（存储在 中`%ebp`）；`avar`从帧指针偏移 4 个字节存储，而`avar2`从帧指针偏移 8 个字节存储。

同样，这就是*一个操作系统上的一个编译器的一个版本*是如何做到的；不同操作系统上的不同编译器可能使用不同的结构（尽管这种方法*很*常见）。

如果你真的很想知道确切的细节，你会想要了解更多关于你的架构（x86 vs. Power vs. MIPS vs...），并且你会想做一些汇编编程。

* * *

^(1.注意，这并不一定意味着每次进入和退出块时都会分配和释放内存；通常，相同的内存位置将被重用，但您不能保证它们具有与退出块时相同的值。)

# mongodb - 我可以更改现有索引的名称吗？

> ID：12845946
> 
> 赞同：4
> 
> 时间：2012-10-11T18:12:05.320
> 
> 标签：mongodb

我正在努力为我们的 MongoDB 部署生成删除/创建脚本。我们希望在我们的开发、测试和生产环境中，所有 MongoDB 数据库/集合在结构上都是相同的。为此，我们决定在 ensureIndex 时间命名索引。问题是，如何更新已经存在的索引的名称？我所知道的行不通的只是使用指定的“名称”重新运行 ensureIndex，例如....

```
// existing indexes, note its name is "groups_1"...
dmReplSet:PRIMARY> db.system.indexes.find();
{ "v" : 1, "key" : { "groups" : 1 }, "ns" : "test.config", "name" : "groups_1" }
...

// attempt to change its name by re-issue ensureIndex command...
dmReplSet:PRIMARY> db.config.ensureIndex( { "groups" : 1 }, { "name" : "config_groups_ix" } );

// Nope, name is still "groups_1"...
dmReplSet:PRIMARY> db.system.indexes.find();
{ "v" : 1, "key" : { "groups" : 1 }, "ns" : "test.config", "name" : "groups_1" }
... 
```

如何更新已经存在的 mongo 索引的名称？这样做有什么风险吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-15T09:37:10.557

可悲的是，这在 MongoDB 3.0.3 中是不可能的。[官方文档](http://docs.mongodb.org/manual/tutorial/modify-an-index/)建议删除并重新创建索引

# ios - UIPopoverController 允许的箭头方向问题

> ID：12845950
> 
> 赞同：0
> 
> 时间：2012-10-11T18:12:20.353
> 
> 标签：ios, uipopovercontroller

我有一个 UIPopoverController 必须以向上的箭头方向显示，但是当我尝试在视图底部显示 popover 时，我看到了这个：

![在此处输入图像描述](../Images/ae5f9793ea885dc75e4b0bc94a2db328.png)

```
[popoverController presentPopoverFromRect:[sender frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T18:28:04.993

你需要`UIPopoverArrowDirectionDown`在这种情况下使用。由于按钮位于视图的底部区域，如果您想在按钮下方显示弹出框（这是`UIPopoverArrowDirectionUp`隐含的建议），它没有任何空间来显示弹出框。

如果你使用`UIPopoverArrowDirectionAny`，那么 iOS 会自动计算出它可以扩展的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-02T16:56:02.557

不知道这是不是新的，但允许的箭头方向是一个位域，可以组合。所以你可以写`UIPopoverArrowDirectionDown | UIPopoverArrowDirectionUp`，它会选择它有空间的两者中的任何一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-03T14:15:03.787

正如**uliwitness**对于多个方向所说，但已针对 Swift 4 进行了更新。请尝试以下代码：

```
popover.permittedArrowDirections = [.up, .down] 
```

# android - 蓝牙连接 - startActivityResult() 中的空指针异常

> ID：12845953
> 
> 赞同：0
> 
> 时间：2012-10-11T18:12:29.543
> 
> 标签：android, bluetooth

我正在尝试通过我的应用程序通过蓝牙连接两部手机。我正在使用本教程： http: [//developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)，但我必须做错事，因为它不起作用。我想显示“启用蓝牙对话框”：

```
private static final int REQUEST_ENABLE_BT = 1; 
```

[...]

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
        Log.v("BC", "Your device don't have bt");
    }

    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
    } 
```

并且有一个错误：

> 10-11 20:03:48.640: E/AndroidRuntime(32041): 致命异常: Thread-3652 10-11 20:03:48.640: E/AndroidRuntime(32041): java.lang.NullPointerException 10-11 20:03: 48.640: E/AndroidRuntime(32041): 在 android.app.Activity.startActivityForResult(Activity.java:3190) 10-11 20:03:48.640: E/AndroidRuntime(32041): 在 pl.piotrek.panitball.BluetoothConnection.uruchamianie (BluetoothConnection.java:24) 10-11 20:03:48.640: E/AndroidRuntime(32041): 在 pl.piotrek.panitball.MainClass.doDraw(MainClass.java:86) 10-11 20:03:48.640: E /AndroidRuntime(32041): 在 pl.piotrek.panitball.ViewThread.run(ViewThread.java:32) 块引用

怎么了？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:28:45.357

看起来您是从以下位置拨打电话`startActivityForResult`的：

> pl.piotrek.panitball.MainClass.doDraw(MainClass.java:86) 10-11 20:03:48.640: E/AndroidRuntime(32041): 在 pl.piotrek.panitball.ViewThread.run(ViewThread.java:32)

工作线程？也许从 GUI 线程尝试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:40:37.233

不要忘记配置权限

```
<manifest ... >
  <uses-permission android:name="android.permission.BLUETOOTH" />
  ...
</manifest> 
```

# c# - 视觉继承，对扩展自定义控件的设计时支持

> ID：12845959
> 
> 赞同：1
> 
> 时间：2012-10-11T18:12:49.707
> 
> 标签：c#, .net, winforms

我正在扩展我自己的自定义控件，它扩展了 UserControl 类。

我可以在扩展类的设计器中看到所有元素都很好，但是扩展自定义控件的所有属性都显示为禁用，并且在使用鼠标选择其元素时会出现“锁定”图标。

我该如何解决？我希望能够从设计器中修改这些属性。

编辑：自定义控件的定义，它从 UserControl 扩展而来。

```
namespace Wizard
{
    [Designer(typeof(Wizard.StepDesigner))]
    [DefaultProperty("TitlePanel, NavigationPanel")]
    public partial class Step : UserControl
    {
         public Step()
         {
            InitializeComponent();
         }

         [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
         public Title TitlePanel
         {
              get
              {
                    return this.title1;
              }
              set
              {
                   this.title1 = value;
              }
          }

        [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
        public Panel ContentPanel
        {
            get
            {
                 return this.contentPanel;
            }
        }

        [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
        public Navigation NavigationPanel
        { 
             get
             {
                 return this.navigation1;
             }
         }
     }

     internal class StepDesigner : ParentControlDesigner
     {
         public override void Initialize(System.ComponentModel.IComponent component)
         {
            base.Initialize(component);

            if (this.Control is Step)
            {
                 Step control = (Step)this.Control;
                 this.EnableDesignMode(control.TitlePanel, "TitlePanel");
                 this.EnableDesignMode(control.ContentPanel, "ContentPanel");
                 this.EnableDesignMode(control.NavigationPanel, "NavigationPanel");
             }
         }  
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:42:27.783

正如我在评论中已经指出的那样，属性的修饰符都设置为私有并将它们更改为受保护并重建解决方案解决了“问题”。

# c++ - C++ 类中的运算符

> ID：12845961
> 
> 赞同：0
> 
> 时间：2012-10-11T18:12:57.553
> 
> 标签：c++, class, operators

我有以下代码，它一直给我错误，我不确定该怎么做，因为我已经声明了运算符。

```
#ifndef BOOK_H
#define BOOK_H
#include<vector>
#include<string>
using namespace std;
class Book {
public:
    Book();
    Book(vector<string>*, string, int);
    Book(const Book&);
    ~Book();
    Book& operator=(const Book&);
    void update(vector<string>*);
    void update(string); 
    void update(int); 
    int getYear() const{
        return year;
    };
    string getTitle() const{
        return title;
    };
    bool operator==(const Book&);
    bool operator!=(const Book&);
    friend ostream& operator<<(ostream&, const Book&);
    void getAuthors();
private:
    vector<string>* authors;
    string title;
    int year;
};

#endif

#include "Book.h"
#include <vector>
#include <string>
#include <cstdlib>
using namespace std;
Book::Book():year(0), title(NULL), authors(NULL){}
Book::Book(vector<string>* bookauthors,string booktitle, int bookyear ){
    authors = bookauthors;
    title = booktitle;
    year = bookyear;
}
Book::Book(const Book& aBook){
    authors = aBook.authors;
    title = aBook.title;
    year = aBook.year;
}
bool Book::operator==(const Book &aBook){
    if(getYear() == aBook.getYear() && getTitle() == aBook.getTitle())
        return true;
    else return false;
}
bool Book::operator != (const Book &aBook){
    if(getYear() != aBook.getYear() && getTitle() == aBook.getTitle())
        return true;
    else return false;
}
Book& Book::operator =(const Book& rhs){
    if(this != rhs){
        authors = rhs.authors;
        title = rhs.title;
        year = rhs.year;
    }
    return *this;
}
void Book::update(int newyear){
    year = newyear;
}
void Book::update(string newtitle){
    title = newtitle;    
}
void Book::update(vector<string>* newauthors){
    authors = newauthors;
}
ostream& operator<<(ostream& os, const Book& b){
    os<<b.getTitle()<<"/"<<b.getYear();
    return os;
} 
```

我不断收到这个错误，我不知道如何解决它。

```
Book.cc: In member function 'Book& Book::operator=(const Book&)':
Book.cc:28: error: no match for 'operator!=' in 'this != rhs'
Book.cc: In function 'std::ostream& operator<<(std::ostream&, const Book&)':
Book.cc:45: error: no match for 'operator<<' in 'std::operator<< [with _CharT = char,   _Traits = std::char_traits<char>, _Alloc = std::allocator<char>](((std::basic_ostream<char,   std::char_traits<char> >&)((std::basic_ostream<char, std::char_traits<char> >*)os)), ((const  std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)((const std::basic_string<char, std::char_traits<char>, std::allocator<char> >*)(& Book::getTitle()  const())))) << "/"'
Book.cc:44: note: candidates are: std::ostream& operator<<(std::ostream&, const Book&) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:31:33.527

代替

```
bool operator==(const Book&);
bool operator!=(const Book&);
friend ostream& operator<<(ostream&, const Book&); 
```

经过

```
bool operator==(const Book&) const;
bool operator!=(const Book&) const;
friend std::ostream& operator<<(std::ostream&, const Book&); 
```

在检查是否相等时，请尝试

```
if (this != &rhs) 
```

或者

```
if (*this != rhs) 
```

取决于您是要进行深度比较还是浅度比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:21:42.043

对于第一个错误，您正在将`this`作为`Book`指针的 与`Book`引用进行比较。您需要比较`this`参数的地址，即比较指针：

```
if(this != &rhs){ .... } 
```

关于第二个错误，我在您发布的代码中没有发现任何问题。但是，您不需要将`ostream& <<`运算符声明为友元，因为它只访问公共方法。

您还应该使用比较运算符`==`and `!=` `const`，尽管这与您报告的错误无关。

# asp.net - XSLT 更改是否需要编译？

> ID：12845969
> 
> 赞同：1
> 
> 时间：2012-10-11T18:13:22.733
> 
> 标签：asp.net, xslt

我无法在此在线或 StackOverflow 网站上找到任何主题。我特别要求 ASP.Net 应用程序，但它是否需要编译任何语言的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:16:01.123

这取决于您如何使用 XSLT。

如果应用程序从外部读取文件，则不需要重新编译（如果将它们缓存到 XSLT，则很可能需要重新启动，但不需要重新编译）。

如果文件是嵌入式资源或已编译的 XSLT，那么您将需要重新编译更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:15:19.933

如果您在页面中修复路径，则不需要编译文件 XSLT，但如果在这种情况下您的文件嵌入了资源，则需要编译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:21:41.560

如果您将 XSL 文件保存为单独的 .xsl 文件，则更改后无需再次编译它们，但需要将新的 XSL 文件*重新加载到转换器。*

为此，您需要创建一个 Templates 对象，例如：

```
TransformerFactory factory = TransformerFactory.newInstance();
factory.setErrorListener(new ErrorListener( ... ));
xslTemplate = factory.newTemplates(new StreamSource( ... )); 
```

并使用模板让变压器来完成工作：

```
Transformer transformer = xslTemplate.newTransformer(); 
```

根据 XSL 库，您的使用可能会有所不同

# c# - 带有 ComboBox、CollectionViewSource 和实体框架的 WPF 4 数据网格

> ID：12845975
> 
> 赞同：1
> 
> 时间：2012-10-11T18:13:50.063
> 
> 标签：c#, wpf, entity-framework-4, wpfdatagrid

我的 SQL Server 2008 数据库中有一个非常简单的表，只有两个字段：

```
Table Name: Administrators
     Field: Id (PK with AutoIncrement)
     Field: UserLogin (nvarchar) 
```

我要做的是创建一个 DataGrid，它允许我添加、删除或编辑该表中的数据，使用 Entity Framework 连接到数据库。

我想要的是 DataGrid 在编辑表时显示一个 ComboBox（特别是对于 UserLogin 字段），并且我希望这个 ComboBox 填充有将从我公司的 Active Directory 中检索到的用户列表。

代码的 Active Directory 部分已完成并且已经开始工作。

我遇到的问题是，即使我设法让组合框显示我的 AD 中的用户列表，每当用户按下“Enter”或单击另一个单元格以提交编辑时，组合框上选择的值（或用户键入的值，因为在组合框中启用了文本编辑）没有正确设置回我的 EntitySet，因此当单元格离开编辑模式时，显示的值是一个空字符串（创建实体时的默认值）。

只是为了向您展示一些我的代码，我有两个“CollectionViewSource”对象，一个用于 Administrators 表，一个用于“ActiveDirectoryUser”对象列表。“ActiveDirectoryUser”是我编写的一个类，其中包含来自每个 AD 用户的一些信息。

这是我设置 CollectionViewSource.Source 属性的代码：

```
// Global variable declaration
public List<ActiveDirectoryUser> adUsers = new List<ActiveDirectoryUsers>();

// The method below is called in the Window_Loaded() event
private void SetUpCollectionViewSourceBindings()
{
    adUsers = GetListOfADUsers(); // No need to show the code for the GetListOfADUsers() method

    CollectionViewSource adViewSource = (CollectionViewSource)FindResource("ADUsersSource");
    adViewSource.Source = adUsers;

    CollectionViewSource adminViewSource = (CollectionViewSource)FindResource("AdministratorsSource");
    ObjectQuery<Administrators> adminQuery = GetAdministrators();
    adminViewSource.Source = adminQuery.Execute(MergeOption.OverwriteChanges);
}

private ObjectQuery<Administrators> GetAdministrators()
{
    var adminQuery = (from admin in dbEntities.Administrators
                      select admin);
    return adminQuery as ObjectQuery<Administrators>;
} 
```

我的 ActiveDirectoryUser 类只有五个属性：

```
public class ActiveDirectoryUser
{
    public string FirstName { get; private set; }
    public string LastName { get; private set; }
    public string SAMAccountName { get; private set; } // User login information
    public string UserPrincipalName { get; private set; }
    public string FullName { get { return string.Format("{0} {1}", FirstName, LastName); } }
} 
```

在 MainWindow.xaml 文件的 XAML 中，我将以下 CollectionViewSources 添加到资源中：

```
<Window.Resources>
    <CollectionViewSource x:Key="AdministratorsSource" />
    <CollectionViewSource x:Key="ADUsersSource" />
</Window.Resources> 
```

然后，我添加了以下 DataGrid，其绑定如下所示：

```
<DataGrid x:Name="dgAdministrators"
          DataContext="{Binding Source={StaticResource AdministratorsSource}}"
          ItemsSource="{Binding}"
          AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="User Login">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=UserLogin, ValidatesOnDataErrors=True}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <ComboBox IsReadOnly="False"
                              IsEditable="True"
                              IsTextSearchCaseSensitive="False"
                              IsTextSearchEnabled="True"
                              ItemsSource="{Binding Source={StaticResource ADUsersSource}}"
                              DisplayMemberPath="FullName"
                              SelectedValuePath="SAMAccountName"
                              SelectedValue="{Binding DataContext.UserLogin, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}"
                              SelectedItem="{Binding UserLogin}"
                              />
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我使用的是 .NET 4.0，我使用的是这个版本的 .NET 附带的 DataGrid，而不是 WPFToolkit 版本。

谁能帮我找出为什么在组合框中键入的值（或在组合框的下拉列表中选择的值）没有提交回我的 DataGrid 的 DataContext？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T01:55:10.927

我认为您必须将 TwoWay 绑定添加到 ItemsSource 属性中。我认为默认情况下它是 OneWay

# iis - SignalR - 适用于 Cassini 和 IIS Express，但不适用于带有 IIS 7.0 的 Windows 2008

> ID：12845985
> 
> 赞同：0
> 
> 时间：2012-10-11T18:14:19.347
> 
> 标签：iis, iis-7, signalr

我们让 SignalR 在 Silverlight 5 客户端上运行。它在 cassini 和 IIS Express 下在我们的本地计算机上运行，​​但是当我们将应用程序部署到运行 Windows 2008 Server 和 IIS 7.0 的开发服务器时，我们没有在日志中看到任何错误，只是通知未通过客户端。

有任何想法吗？我们重新运行了 aspnet_regiis 工具，并添加了其他帖子中推荐的 thr web.config 设置，但均未成功。

谢谢。

# android - 在 android 应用程序的 surfaceView 上显示图像，但在 surfaceview 的特定位置上显示图像

> ID：12845986
> 
> 赞同：0
> 
> 时间：2012-10-11T18:14:19.893
> 
> 标签：android, surfaceview

真的需要这个问题的答案。所以我有一个相对的观点和一个表面的观点。我设法在我的活动中获得了相机的预览。但是现在我想要在surfaceview的不同位置/地方的surfaceview上的一些小图像，并且图像的位置将在surfacechanged上不断变化。所以问题：

如何在我的表面视图上获取特定位置的图像。好的drawable，从res中获取图像但是在那之后呢？如果发生这种情况，那么我可以从 surfacechanged 调用它，它会更新，但我对上述问题使用什么函数

# tridion - 页面的复制/粘贴不会在同一个 SG 中启动工作流，在其他 SG 中启动工作流

> ID：12845989
> 
> 赞同：1
> 
> 时间：2012-10-11T18:14:26.903
> 
> 标签：tridion

我对最近出现这种行为的用户感到困惑。假设所有 SG 都设置了工作流。

在 SG A 中复制页面 X，粘贴到相同的 SG A。页面 Y 已创建，但未启动工作流。在 SG A 中复制页面 X，粘贴到其他 SG B。创建页面 Z 并启动工作流程。

现在，当努诺在现场时，我与他确认的第一个场景。我们同意商界人士的意见，我们可以忍受这种行为。但是，我很好奇为什么第二种情况会按原样发生。如果 #1 不启动工作流程，为什么要 #2？谁能解释为什么？有什么方法可以以编程方式使场景 #1 启动工作流（因为业务希望发生这种情况）？或者，最坏的情况是从 #2 禁用它。它应该是一致的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:02:13.597

但在实际情况下，我真的会质疑工作流程是否需要在您复制同一结构组中的页面时立即启动。

当您复制同一结构组中的页面时，它将创建一个带有标题的页面，`Copy of original page name`CMS 用户显然希望/需要编辑具有正确页面名称的页面。一旦他们保存页面工作流程就会启动。此外，CMS 用户可能还希望更改页面上的某些组件演示。

当您在不同的结构组上复制它时，您正在创建一个在其他结构组中具有名称的页面，因此工作流启动，因为它不是同一结构组中的相同副本。

我认为这是一个不错的功能:) :)。

但是，正如尼克建议的那样，我也建议您提交支持票。

如果您想为您的场景 #1 考虑一种编程方法，您可以实现 EventSystem 以通过简单地使用创建它的同一用户再次保存页面来强制启动工作流。您需要捕获`CopyEvent`.

如果您想走这条路线（未测试），请使用 EventSystem 存根示例：

```
private void Subscribe()
{
     EventSystem.Subscribe<Page, CopyEventArgs>(PostCopyActivity, EventPhases.Processed);
}

private static void PostCopyActivity(Page page, CopyEventArgs args, EventPhases phase) 
{
    // do your logic to save page..
       string sourceId = args.CopiedObject.OrganizationalItem.Id;
       string destinationId = args.Destination.ToString();
       if (sourceId.Equals(destinationId))
       {
          // copying to the same location .. so now get the User Session and Update the page to force workflow

       }
} 
```

希望这些信息有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:52:06.477

我继续在我的系统上尝试了这个，它在任何情况下都不会启动工作流（复制/粘贴到相同的结构组或不同的结构组）。

您是否在粘贴时触发了事件？

# php - 如何使用 PHP 和 MYSQL 格式化 CSV 文件

> ID：12845991
> 
> 赞同：0
> 
> 时间：2012-10-11T18:14:30.383
> 
> 标签：php, mysql, excel, format

目前，我可以使用 PHP 查询 MYSQL 数据库，并且我的数据可以毫无问题地导入 CSV。但是，我需要获取第一行的列数据，并将其放在左侧的行中，并且我需要每列下的数据与正确的行相关联。所以基本上，我需要PHP来转置excel中的数据，就像excel中的转置工具一样。

**这是我当前的代码：**

```
ExportMysqlToCsv($tablename);

function exportMysqlToCsv($tablename,$filename = 'Results.csv')
{
    $csv_terminated = "\n";
    $csv_separator = ",";
    $csv_enclosed = '"';
    $csv_escaped = "\\";
    $sql_query = "select * from $tablename where id=2";

    // Gets the data from the database
    $result = mysql_query($sql_query);
    $fields_cnt = mysql_num_fields($result);

    $schema_insert = '';

    for ($i = 0; $i < $fields_cnt; $i++)
    {
        $l = $csv_enclosed . str_replace($csv_enclosed, $csv_escaped . $csv_enclosed,
            stripslashes(mysql_field_name($result, $i))) . $csv_enclosed;
        $schema_insert .= $l;
        $schema_insert .= $csv_separator;
    } // end for

    $out = trim(substr($schema_insert, 0, -1));
    $out .= $csv_terminated;

    // Format the data
    while ($row = mysql_fetch_array($result))
    {
        $schema_insert = '';
        for ($j = 0; $j < $fields_cnt; $j++)
        {
            if ($row[$j] == '0' || $row[$j] != '')
            {

                if ($csv_enclosed == '')
                {
                    $schema_insert .= $row[$j];
                } else
                {
                    $schema_insert .= $csv_enclosed . 
                    str_replace($csv_enclosed, $csv_escaped . $csv_enclosed, $row[$j]) . $csv_enclosed;
                }
            } else
            {
                $schema_insert .= '';
            }

            if ($j < $fields_cnt - 1)
            {
                $schema_insert .= $csv_separator;
            }
        } // end for

        $out .= $schema_insert;
        $out .= $csv_terminated;
    } // end while

    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Length: " . strlen($out));

 // Output to browser with appropriate mime type, you choose ;)
    header("Content-type: text/x-csv");
    header("Content-type: text/csv");
    header("Content-type: application/csv");
    header("Content-Disposition: attachment; filename=$filename");
    echo $out;
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:28:43.013

首先，这将大大简化您的代码：

```
function exportMysqlToCsv($tablename,$filename = 'Results.csv')
{
    $sql_query = "select * from $tablename where id=2";

    // Gets the data from the database
    $result = mysql_query($sql_query);

    $f = fopen('php://temp', 'wt');
    $first = true;
    while ($row = mysql_fetch_assoc($result)) {
        if ($first) {
            fputcsv($f, array_keys($row));
            $first = false;
        }
        fputcsv($f, $row);
    } // end while

    $size = ftell($f);
    rewind($f);

    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Length: $size");

 // Output to browser with appropriate mime type, you choose ;)
    header("Content-type: text/x-csv");
    header("Content-type: text/csv");
    header("Content-type: application/csv");
    header("Content-Disposition: attachment; filename=$filename");
    fpassthru($f);
    exit;
} 
```

您所追求的是枢轴操作；不幸的是，如果不将所有行读入内存然后应用转换，您将无法做到这一点。

请参阅[此处](http://gonzalo123.com/2010/01/24/pivot-tables-in-php/)以获取一些灵感。

# ironpython - DapperDotNet w/IronPython：如何处理返回的结果集？

> ID：12845992
> 
> 赞同：2
> 
> 时间：2012-10-11T18:14:34.783
> 
> 标签：ironpython, dapper, dynamic-language-runtime

今天早上试图一起举一个简单的例子，但我遇到了障碍。当我想对返回的结果集做某事时，一切正常。Dapper 正在返回 System.Collections.Generic.List'1 的结果集。IronPython 可以处理使用 expando 对象的通用集合吗？

相关代码的要点在这里： [https ://gist.github.com/3873014](https://gist.github.com/3873014)

编辑：好的，我终于注意到我从来没有告诉查询扩展一个类型。现在正在努力...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:17:04.533

在给 Query 扩展一个类型之后，我就可以让它工作了。为了测试这一点，我最终只是将结果作为一个简单的 System.Object 返回：

`data = cn.Query[object](procName, params,commandType=CommandType.StoredProcedure)[0]`

转换为类型为字典： `customer = clr.Convert(data, IDictionary[System.String, System.Object])`

并且能够从那里得到我需要的东西。所以，...

`>>>print customer.CustomerID`

...返回“ALKFI”。程序员错误 FTW！

# android - 在windows上查看android的root访问文件/文件夹

> ID：12845993
> 
> 赞同：12
> 
> 时间：2012-10-11T18:14:40.810
> 
> 标签：android, root, file-transfer

我正在尝试使用 USB 调试模式和窗口在 android 设备上查看根级别的文件和文件夹。这可能吗？手机已root。

我已经下载了一个文件浏览器应用程序，它允许我在手机上查看它。

我的主要目标是从手机中复制 mmssms.db。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-01T18:55:43.973

**机器人资源管理器** [http://de.codeplex.com/releases/view/612392](http://de.codeplex.com/releases/view/612392)

**窗口应用程序：** ![窗户](../Images/ff69166b6e92770dd7b9dc95386524da.png)

**探险家：** ![探险家](../Images/19c72ca2a02746c9a062186fb8bc50b8.png)

**SQLite 管理器：** ![方镁石](../Images/4511e6d8054f5ce656d5cb6d0942aadd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-26T03:00:57.300

我一直在努力寻找解决这个问题的方法，我发现最好的方法是手机上的根 FTP 服务器，您可以在 Windows 上使用 FileZilla 等 FTP 客户端连接到该服务器，当然在同一个 WiFi 网络上。

我最终使用的根 FTP 服务器应用程序是[FTP Droid](https://play.google.com/store/apps/details?id=berserker.android.apps.ftpdroid&hl=en)。我尝试了许多其他下载数量更大的 FTP 应用程序，但无论出于何种原因，它们都没有为我工作。所以安装这个应用程序并将用户设置为 / 或任何你想要的地方。

**2021 年编辑**：FTP Droid 没有更新，也不适用于现代 Android 版本，现在我使用Github 上开源的[原始 FTPd](https://play.google.com/store/apps/details?id=org.primftpd)

然后记下手机 IP 并连接 FileZilla，您应该可以访问手机的根目录。我发现的最大好处是我可以下载整个文件夹，而 FTP 只会将它排队并处理它。因此，当我在寻找应用程序并可以在我的 PC 上搜索时，我下载了所有 /data/data/ 文件夹。非常便利。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T18:20:07.273

您可以使用 Eclipse DDMS 透视图查看连接的设备并浏览文件，还可以将文件拉取和推送到设备。您还可以使用 DDMS 做很多事情，这个[链接](http://developer.android.com/intl/es/tools/debugging/ddms.html)解释了更多 DDMS 的使用。

编辑：

如果您只想复制一个数据库，您可以在 Eclipse DDMS 文件资源管理器中找到该数据库，选择它，然后将数据库从设备拉到您的计算机上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T11:13:54.737

**显然**，你需要一个有根的安卓设备。然后设置**FTP**服务器并传输文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-19T02:24:23.027

如果您有安卓，您可以在手机上安装免费应用程序（Wifi 文件传输）并启用 ssl、端口和其他选项来双向访问和发送数据，只需启动应用程序并在 pc 浏览器中写入手机 ip 和端口即可。请享用！

# bash - 脚本中的 printf 命令返回“无效数字”

> ID：12845997
> 
> 赞同：20
> 
> 时间：2012-10-11T18:14:51.720
> 
> 标签：bash, printf

我无法`printf`在 bash 脚本中使用 %e 描述符打印变量。它只会说

```
#!/bin/bash
a=14.9
printf %e 14.9; 
```

我知道这可能是一个非常简单的问题，但我对 bash 还很陌生，而且总是使用`echo`. 另外，我在任何地方都找不到答案。

* * *

跑步时我得到

```
$ ./test.text
./test.text: line 3: printf: 14.9: invalid number
0,000000 
```

因此我的问题是语言环境变量 LC_NUMERIC：设置它以便我使用逗号作为小数分隔符。事实上，它被设置为欧洲本地化：

```
$ locale | grep NUM
LC_NUMERIC="it_IT.UTF-8" 
```

我以为我将它设置为 en_US.UTF-8，但显然我没有。现在问题切换到如何设置我的语言环境变量。只需使用

```
$ LC_NUMERIC="en_US.UTF-8" 
```

不会工作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-11T18:50:19.000

这：

```
LC_NUMERIC="en_US.UTF-8" printf %e 14.9 
```

`$LC_NUMERIC`仅在该命令的持续时间内设置。

这：

```
export LC_NUMERIC="en_US.UTF-8" 
```

`$LC_NUMERIC`仅在当前 shell 进程期间设置。

如果你添加

```
export LC_NUMERIC="en_US.UTF-8" 
```

对于您的`$HOME/.bashrc`or `$HOME/.bash_profile`，它将`$LC_NUMERIC`为您启动的所有 bash shell 设置。

`$LC_NUMERIC`查找在您`.bashrc`或其他 shell 启动文件中设置的现有代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T18:24:10.360

您可能遇到了语言环境问题，并且预计不会有一段时间。尝试：

```
LC_NUMERIC="en_US.UTF-8" printf %e 14.9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-09T19:26:39.597

我遇到了这个错误并找到了这个页面。就我而言，这是 100% 的飞行员错误。

```
month=2
printf "%02d" month 
```

它应该是

```
printf "%02d" "${month}" 
```

或更简单地说

```
printf "%02d" $month 
```

# objective-c - 如何知道 2012 年 10 月在目标 c 中从星期一开始

> ID：12845999
> 
> 赞同：-2
> 
> 时间：2012-10-11T18:14:56.083
> 
> 标签：objective-c

我是这个目标 C 的新手。我正在尝试做一个日历应用程序。

谁能告诉我如何知道一个月从哪一天开始？（例如，假设 2012 年 10 月从星期一开始，2012 年 11 月从星期四开始。这样如何知道 2014 年 9 月的开始日期？）。

另外请让我知道如何根据月份获取月份的开始日期（星期一或星期二...）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:40:59.497

你可以试试这个

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];

//-- get our date from a string representation
NSDate *date2 = [formatter dateFromString:@"2014-09-01 00:00:00"];

//-- convert it so to extract the full day name
[formatter setDateFormat:@"cccc"];
NSString *result = [formatter stringFromDate:date2]; 
```