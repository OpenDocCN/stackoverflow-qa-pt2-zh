# StackOverflow 问答 13862000-13862999

# c++ - InitUndistortRectifyMap 和重映射

> ID：13862001
> 
> 赞同：7
> 
> 时间：2012-12-13T14:31:21.493
> 
> 标签：c++, opencv, camera

我目前正在为一对立体相机编写一个 openCV 程序。相机校准以及立体校准已完成。

下一步是从我得到的 2 张图像中找到一个特征在空间中的位置。这就是为什么我必须对图像进行立体校正并在之后进行计算。

我面临的问题`initUndistortRectifyMap`如下：

`stereoRectify()`- 如果我通过计算得到的R1 或 R2`initUndistortRectifyMap()`在重新映射后得到黑色图像。

- 如果我将 r （一个空矩阵）传递给`initUndistortRectifyMap()`我在重新映射后得到未校正的图像。我得到的图像有点失真。

我需要通过 R1 和 R2 来`initUndistortRectifyMap()`校正 2 个摄像头，否则在通过空矩阵时，立体磁头不会旋转到同一平面上。

以下是我的代码：

```
stereoRectify(intrinsic[0], distCoeffs[0], intrinsic[1], distCoeffs[1], imageSize, 
    R, T_Stereo, R1, R2, newP1, newP2, Q, CV_CALIB_ZERO_DISPARITY, -1, imageSize);

if (x_Cam.GetSerial()=="4002678487")
{
    initUndistortRectifyMap(intrinsic[0], distCoeffs[0], R1, newP1, imageSize,        
        CV_16SC2 , mapx1,  mapy1);
    remap(x_Image, imageRectified[0],mapx1, mapy1, INTER_LINEAR);

    return imageRectified[0];
}   

if (x_Cam.GetSerial()=="4002702131")
{
    //flip(in, in, -1);
    initUndistortRectifyMap(intrinsic[1], distCoeffs[1], R2, newP2, imageSize, 
        CV_16SC2 , mapx2,  mapy2);
    remap(x_Image, imageRectified[1],mapx2, mapy2, INTER_LINEAR, BORDER_CONSTANT, 0);

    return imageRectified[1];
} 
```

我检查了所有进入的矩阵值`stereoRectify()`，它们是正确的。旋转矩阵 R1 和 R2 似乎也是正确的。我只是得到黑色图像作为输出。

我尝试将垃圾值传递`InitUndistortRectifyMap()`给 R1 和 R2（例如 R1*R2）以简单地查看效果，我确实得到了奇怪的结果，但没有得到黑色图像。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T14:02:33.380

好吧，我有点绕过这个问题，并认为我会分享解决方案，以防任何人都可以使用它。

InitUndistortRectifyMap 在使用 StereoRectify 生成的旋转矩阵 R1 和 R2 时确实输出了空白图像。

因此，我尝试使用 StereoRectifyUncalibrated，它产生 2 个 Homography 矩阵 H1 和 H2，并且我根据 OpenCV 文档计算了旋转：

R1 = inv(CamMatrix1)*H1*CamMatrix1 R2 = inv(CamMatrix2)*H2*CamMatrix2

我将新的 R1 和 R2 传递给 InitUndistortRectifyMap 并重新映射，结果令人满意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-21T17:04:57.107

我要挖掘这篇旧帖子，因为我最近在研究这个问题上付出了一些努力。也就是说，我遇到了同样的问题——经过适当的立体校准和校正（所有opencv都提供立体视觉机器），最后“扭曲”的图像是黑色的。让我解释一下为什么会这样。

首先，*remap(src,dst,mapX, mapY)*是如何工作的。如果你去[文档](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#remap)，你可以看到

![在此处输入图像描述](../Images/3cbe234931d4c92f1eaef89461a24eb8.png)

如果值 mapX(x,y) 或 mapY(x,y) 之一在 src 之外，则 dst(x,y) = 0（黑色！）。这意味着，所有对 (x,y) 在 mapX 或 mapY 中都有无效值。例如，就我而言，由于我无法解释的原因，我在 mapY 中的所有值都是负数。

但这样做的原因是，这只发生在特定的立体视觉配置中。我做了几个例子，相机以这样的方式对齐，它们之间的旋转角度很小（最多几度）。在这种情况下，opencv 程序运行良好。当两个欧拉角相同且一个角度（围绕 Y 旋转）为 17 度时，我遇到的“黑色”输出问题。在那种情况下，我做了一些实验——我用以下方式翻译了 mapX 和 mapY：

```
for(int i=0;i<_imageSize.width;i++)
        for(int j=0;j<_imageSize.height;j++) {
            _mapXA.at<float>(j, i) -= 1200;
            _mapYA.at<float>(j, i) -= 1200;
            _mapXB.at<float>(j, i) += 2500;
            _mapYB.at<float>(j, i) += 2500;
        } 
```

（因为我看到 _mapXA*太大*而 _mapYB 的负值约为 -1500）。*令人惊讶的是， remap()*之后的输出不是黑色的。图像看起来完全像旋转了某个角度（可能是 17，我没有准确检查），但它根本没有被纠正。

opencv 可能无法很好地处理立体视觉中的非平行相机。我的意思是，它适用于某些示例，而对于某些示例则无效——但这意味着这种方法是不可行的。此外，您还可以找到 Gary Bradski 和 Adrian Kaehler *学习 OpenCV*的此类信息：

*再一次，这就是为什么如果您将相机布置得尽可能接近正面平行（至少在您成为立体视觉专家之前），您往往会获得更好的结果的原因之一*

# c# - 如何使用特定的调度程序（例如 GUI）启动任务

> ID：13862004
> 
> 赞同：0
> 
> 时间：2012-12-13T14:31:28.280
> 
> 标签：c#, task-parallel-library, scheduler, synchronizationcontext

我正在尝试`Task`使用 TPL 创建一个。例如：

```
Task.Factory.StartNew(() => DoSomething()); 
```

这工作正常，但现在我想在 gui 线程上启动它。

我可以使用以下命令缓存 gui 调度程序：

```
_uiScheduler = TaskScheduler.FromCurrentSynchronizationContext(); 
```

但我看不到如何使用此调度程序启动新任务。一旦初始任务完成，我可以找到的所有示例都`Task.ContinueWith()`用于安排第二个任务`_uiScheduler`，但我想使用此调度程序创建初始任务。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:35:26.870

有大量的重载[`StartNew`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.startnew.aspx)。[其中一个](http://msdn.microsoft.com/en-us/library/dd781658.aspx)接受调度程序。只需传递`None`其他参数：

```
Task.Factory.StartNew(() => DoSomething(), CancellationToken.None,
                      TaskCreationOptions.None, _uiScheduler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:36:06.350

简单 - 有一些重载（例如[这个](http://msdn.microsoft.com/en-us/library/dd781658.aspx)）[`TaskFactory.StartNew`](http://msdn.microsoft.com/en-us/library/dd321421.aspx)将调度程序作为参数之一。

```
Task.Factory.StartNew(() => DoSomething(), CancellationToken.None,
                      TaskCreationOptions.None, _uiScheduler); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:36:09.513

试试这个：

```
TaskFactory factory = new TaskFactory(TaskScheduler.FromCurrentSynchronizationContext());
factory.StartNew(() => DoSomething()); 
```

# javascript - 为控件创建 javascript 对象

> ID：13862009
> 
> 赞同：0
> 
> 时间：2012-12-13T14:31:44.313
> 
> 标签：javascript, asp.net, ajax

我正在开发具有一些 AJAX 功能的 WebControl。

我有一个派生自 的控件`System.Web.UI.WebControls`，该控件将控件的 javascript 注册到`ClientScript.RegisterClientScriptResource`. 当在页面上使用控件时，我应该如何实际获取实例化的 javascript 对象，以及如何将初始数据获取到对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:57:04.000

从听起来你想要实现的效果来看，我强烈建议使用[ASP.NET AJAX 框架](http://www.asp.net/ajax/documentation/live/tutorials/CreatingCustomClientControlsTutorial.aspx)来创建这些控件，因为它们已经构建了你建议的体系结构。

我写了一个关于使用框架的系列文章，可以在这里找到：

*   [第1部分](http://dotnetslackers.com/articles/ajax/ASP-NET-AJAX-Development-Approach-Part-1.aspx)
*   [第2部分](http://dotnetslackers.com/articles/ajax/ASP-NET-AJAX-Development-Approach-Part-2.aspx)
*   [第 3 部分](http://dotnetslackers.com/articles/ajax/ASP-NET-AJAX-Development-Approach-Part-3.aspx)
*   [第 4 部分](http://dotnetslackers.com/articles/ajax/ASP-NET-AJAX-Development-Approach-Part-4.aspx)
*   [第 5 部分](http://dotnetslackers.com/articles/ajax/ASP-NET-AJAX-Development-Approach-Part-5.aspx)
*   [AJAX 控制工具包示例](http://www.devproconnections.com/article/aspnet2/reuse-recycle-extend)
*   [JQuery 和 AJAX](http://www.devproconnections.com/article/aspnet2/building-a-custom-ajax-control-with-the-help-of-jquery)

# jquery - jquery FancyBox“父”参数不起作用

> ID：13862010
> 
> 赞同：0
> 
> 时间：2012-12-13T14:31:49.827
> 
> 标签：jquery, fancybox-2

我尝试通过以下方式应用fancybox“父”参数（如此处所述[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)）：

```
$.fancybox.open({ 
  autoSize: false, 
  width: 300, 
  height: 500, 
  content: $("#is-edit-div"), 
  parent: '.is-panel-edit-profile'
}); 
```

但它仍然添加到正文的末尾，

```
$.fancybox.open({ 
  autoSize: false, 
  width: 300, 
  height: 500, 
  content: $("#is-edit-div"), 
  parent: "form:first" 
}); 
```

也不工作。
有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:22:51.793

我通过编辑fancybox的.js文件解决了这个问题。我向fancybox 开发人员指出了这个问题，希望他们能在未来的版本中修复它。

我将使用版本 2.1.3的文件
jquery.fancybox.js解释你必须修改的地方

转到第 1713 行，看起来像

```
this.overlay = $('<div class="fancybox-overlay"></div>').appendTo( 'body' ); 
```

这在 Overlay helpers 部分中，在“create”公共方法中更具体。

改变这条线看起来像

```
this.overlay = $('<div class="fancybox-overlay"></div>').appendTo(F.coming.parent || 'body' ); 
```

对我来说，我选择将它添加到表单中：首先，这在叠加灯箱中添加了一个滚动条。然后，您需要更改 CSS 类 .fancybox-overlay 以使属性 overflaw-y: 隐藏。

如果你想使用缩小版
jquery.fancybox.pack.js
你可以从上面打包/缩小长版。 或者只是通过搜索代码来
修改他们的打包版本

```
<div class="fancybox-overlay"> 
```

而不是添加代码

```
F.coming.parent || 
```

添加类似的东西

```
b.coming.parent || 
```

请注意：写下当前fancybox文档[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)
中给出的父选项的值

```
$(".fancybox").fancybox({  
    parent: "form:first" // jQuery selector  
}); 
```

不要使用我在其他网站上找到的语法
[https://github.com/fancyapps/fancyBox/issues/283](https://github.com/fancyapps/fancyBox/issues/283)
他们写 $('form:first')

因此，您的上述任何代码都应该可以正常工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T21:35:21.973

Fancybox 2 现在支持该`parent`参数（至少在 2.1.5 中）。请参阅下面 Fancyapps 的屏幕截图

* * *

![Fancybox 2 API 文档的屏幕截图](../Images/3a70790d75ecc48cd9bb1b341aefc8cc.png)

# colorbox - 打开 Colorbox 后，Div 切换不起作用

> ID：13862012
> 
> 赞同：1
> 
> 时间：2012-12-13T14:32:03.610
> 
> 标签：colorbox, jquery

我自己无法找到这个答案，如果我的搜索不够深入，我深表歉意。

在我潜伏在 stackoverflow 中这么久之后，我终于有机会提出自己的问题（实际上这让我很伤心，因为我很高兴向任何人展示我是多么愚蠢。）

我正在这个网站上工作[http://italianliving.fi](http://italianliving.fi)（选择英语），到目前为止，我需要的一切都在按我认为的那样工作。我的问题来自目录页面，在我打开一个颜色框以显示一些外部内容后，我的页脚似乎无法正常工作。右下角有一个 [ + ] 应该打开/关闭页脚；它运行良好，直到我调用任何颜色框，在调用之后它就搞砸了，它向上滑动页脚，但只要它打开它，它也会关闭它。我的代码是：

```
$('#footer_toggle').click(function(){
        if ($(this).text()== "[ + ]")
        {
            $(this).text("[ - ]");
            $('#footer').animate({ 'height': '240px' }, 400);           
        } else {
            $(this).text("[ + ]");
            $('#footer').animate({ 'height': '20px' }, 400);
        }
        return false;
    }); 
```

但我相当确定问题出在 Colorbox 本身。关于如何进行的任何提示？还有其他方法可以切换页脚吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:50:10.723

您的卡片（即[http://italianliving.fi/pages/info_card.php?b=verysofa&lang=en](http://italianliving.fi/pages/info_card.php?b=verysofa&lang=en)）包含 code.js 文件，但不包含 colorbox 插件。这会发出错误。

我不知道这是否是页脚问题的根源，但请先尝试修复它。

**编辑**：似乎您附加了两次点击处理程序。当颜色框子页面打开时，它会再次触发 code.js，它将第二个点击处理程序附加到#footer_toggle。

# asp.net-mvc - EntityType 'Category' 没有定义键。定义此 EntityType 的键

> ID：13862013
> 
> 赞同：37
> 
> 时间：2012-12-13T14:32:05.887
> 
> 标签：asp.net-mvc, entity-framework

开发一个基本的 ASP.net MVC 4 应用程序。它是一个简单的产品目录应用程序，其中我有 2 个数据库表（“类别”和“产品”）

'Products'表中有'Category id'（Category 表中的主键）的外键引用。

当我运行应用程序时，我收到错误消息（如下所列）。

```
System.Data.Entity.Edm.EdmEntityType: : EntityType 'Category' has no key defined. Define the key for this EntityType.

System.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Category' is based on type 'Category' that has no keys defined 
```

这对于新手来说似乎是一个常见错误，我确实检查了“实体键”的所有相关解决方案没有定义键。但我的问题仍然没有解决，请帮助我理解这个问题以及这个问题的正确解决方案是什么。

以下是我的模型类

**类别.cs**

```
namespace ChemicalStore.Models
{
    public partial class Category
    {
        public int CatId { get; set; }
        public string CatName { get; set; }
        public string CatDescription { get; set; }
        public List<Product> Product { get; set; }
    }     
} 
```

**产品.cs**

```
namespace ChemicalStore.Models
{
    public class Product
    {
        public int ProductId { get; set; }
        public int CatId { get; set; }
        public string ProductTitle { get; set; }
        public string ProductPrice { get; set; }
        public string ProductDescription { get; set; }
        public string ProductPackage { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-13T14:35:22.097

您应该在属性 CatId 之前添加属性 [Key]：

```
 using System.ComponentModel.DataAnnotations;

        public partial class Category
        {
            [Key]
            public int CatId { get; set; }
            public string CatName { get; set; }
            public string CatDescription { get; set; }
            public List<Product> Product { get; set; }
        } 
```

问题是 EF 只有在知道表的主键时才能工作。默认情况下，EF 将其识别为名称为 Id 的主键属性。如果您的表有另一个主键，您可以使用属性 [Key] 标记它或使用流利的配置设置 Key。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-13T14:37:07.380

Entity Framework 使用主键字段在生成的表上创建主键列。

它使用约定来获得具有一些变化的此列：

*   如果该字段被调用`id`或任何大小写差异；
*   如果该字段被称为`ClassNameId`任何大小写差异；

我可能会遗漏一些约定，但这些是最常见的情况。

如果您没有任何具有此约定的字段，则需要使用属性标记所需的主键`[Key]`：

```
[Key]
public int CatId { get; set; } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-03T18:05:12.527

我可以通过向我的 key 属性添加一个 setter 来解决这个问题；我以前只有一个吸气剂。

```
public int Id { get; set; } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-23T02:50:59.410

只需将 [key] 属性放在上面的 id ..

```
[Table("employee")]

public class Employee
{ 

    [Key]

    public int Empno { set; get; }

    public string Empname { set; get; }      
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-17T14:31:09.703

实体类是自动生成的..

***如果重新生成代码，对这些文件的手动更改将被覆盖。***

您需要使用所有元数据创建一个部分类

```
 [MetadataType(typeof(Category.CategoryMetadata))]
    public partial class Category
    {
        internal sealed class CategoryMetadata
        {
            [Key]
            public int CatId { get; set; }
            [Required]
            public string CatName { get; set; }
            public string CatDescription { get; set; }
            public List<Product> Product { get; set; }
        }
    } 
```

[在MSDN](https://msdn.microsoft.com/en-us/library/ee707339%28v=vs.91%29.aspx)上阅读更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-26T13:30:20.953

嗨，如果您遇到错误。""在模型生成过程中检测到一个或多个验证错误：

Checking.Models.Employee: : EntityType 'Employee' 没有定义键。定义此 EntityType 的键。"" 只需检查您的表列名称和定义的属性名称是否相同。如果不是，则更正它问题已解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-24T20:21:04.377

就我而言，我解决了这个问题，在 web.config/app.config 文件中添加了正确的 connectionString。

我忘记添加它并且 DBContext 无法与数据库通信。

希望能帮助到你

# android - Android 如何在 GridView 中模拟 @android:id/empty 的行为？

> ID：13862023
> 
> 赞同：9
> 
> 时间：2012-12-13T14:32:45.880
> 
> 标签：android, android-gridview

我有一个由从 SQLITE 数据库获取数据的游标填充的网格视图。有时，没有要显示的数据。这显示了一个空白活动。

我之前使用过列表视图，我可以使用@android:id/empty 设置一个emptyView，比如“找不到数据”。

我可以使用 GridView 的任何类似功能吗？

请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T14:47:07.370

ListActivity 并`ListFragment`简单地搜索具有该 ID 的视图并调用

```
listView.setEmptyView(emptyView); 
```

你可以在你的`GridView`..

```
TextView emptyView = (TextView)findViewById(android.R.id.empty);
gridView.setEmptyView(emptyView); 
```

请注意，您不需要将空视图的 ID 设置为`@android:id/empty`. 只要您在代码中设置它，它就可以是您想要的任何东西。

[链接到 GridView setEmptyView 文档](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView%28android.view.View%29)

# c# - 使用 Web 服务发送大对象（例如图像位图）

> ID：13862026
> 
> 赞同：0
> 
> 时间：2012-12-13T14:33:00.967
> 
> 标签：c#, web-services

我正在尝试在 C# 中使用 WCF Web 服务将图像的位图数据发送到客户端，我打算将其作为对象发送。我想了解网络服务的本质。

我的问题是这如何处理大文件？比如10MB？Web 服务是否在一个请求/响应中工作以发送所有 10MB 的位图数据？如果发生网络错误怎么办？客户是否必须重新发出请求？

我问这个的原因是我一直在使用 Socket，并且经常在涉及大文件时，我将其分解为可管理大小（例如 4kb）的主干，然后发送它，如果一个成功，那么我将发送下一个4kb，直到所有数据都传输完毕。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:37:01.057

同样的原理也可以应用在这里。您可以分块发送。您可能会发现有用的相关帖子 - [wcf 使用 Windows 服务分块上传/下载大文件（即 Img、mp3）](https://stackoverflow.com/questions/6723976/wcf-upload-download-large-files-i-e-img-mp3-in-chunks-with-windows-service)

# actionscript-3 - 在 AS3 中，您如何检测是否有人将相机从 USB 端口中拔出？

> ID：13862028
> 
> 赞同：1
> 
> 时间：2012-12-13T14:33:05.967
> 
> 标签：actionscript-3, apache-flex, air, flash

在 AS3 中，如果 SWF 成功控制了某人的相机并且他们开始流式传输视频以及所有内容，但是在中途，他们要么不小心将相机从 USB 端口中扭出，要么相机发生故障，或者其他什么否则，你怎么能从那个用户那里检测到它？我尝试过使用事件侦听器并每五秒轮询一次不同的变量，但都没有奏效；当这样的事情发生时，Camera 或其事件的任何公共属性似乎都没有表现得好笑。显然，您不能只是继续扫描计算机以查找设备（我猜是有充分理由的）。

我在这里缺少什么吗？有没有办法从用户的 SWF（FP 或 AIR，但更重要的是 FP）副本中检测到他们的相机是否由于出现问题而有效停止，例如他们错误地将其从计算机中摆动出来？如果有怎么办？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:54:34.660

虽然您可能难以检测相机/麦克风何时停止工作或停用，但如果您将视频/音频发布到带有`NetStream`.

有`NetStream`一个[info](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#info)属性，它是一个`NetStreamInfo`对象。它将为您提供运行的总字节数以及`NetStream`发送到服务器的数据的字节/秒速率。

*   运行总计：[byteCount](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStreamInfo.html#byteCount)，[audioByteCount](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStreamInfo.html#audioByteCount)，[videoByteCount](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStreamInfo.html#videoByteCount)
*   当前速率（以字节/秒为单位）：[currentBytesPerSecond](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStreamInfo.html#currentBytesPerSecond)、[audioBytesPerSecond](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStreamInfo.html#audioBytesPerSecond)、[videoBytesPerSecond](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStreamInfo.html#videoBytesPerSecond)

如果您使用运行总计，则需要定期检查`byteCount`并计算您自己的费率。或者，您可以让 Flash Player 完成所有工作并使用它计算的速率。在录制的情况下，这些值可以指示`NetStream`从摄像头/麦克风接收到的数据量（并将发送到服务器）。

我们发现，当速率低于 5 千比特/秒时，我们可以可靠地确定客户端出现问题。我们也在 FMS 服务器（带有自定义服务器端 Actionscript）上使用了相同的阈值和类似的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:32:32.750

我不记得您可以按需进行适当的“获取相机状态”调用，但您可以尝试侦听[状态事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#event%3astatus)并希望在断开连接时触发。

如果您还没有这样做，请在 5 秒内检查尝试：`if(myCameraObject == null)`假设`var myCameraObject = Camera.GetCamera();`

如果您找不到更好的解决方案，请考虑在相机源后面放置一个“检测相机”按钮。如果相机断开连接，那么用户将看到该按钮并可以单击它以重新连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T04:38:07.153

您可以按照@ToddBFisher 的建议检查相机对象是否为空，检查 Camera.names.length>0 或相机实例的其他一些属性（请参阅下面的链接）。但是在它们中的每一个中，您都需要定期检查它。

[使用相机](http://help.adobe.com/en_US/as3/dev/WSfffb011ac560372f3fa68e8912e3ab6b8cb-8000.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7d2c)

[监控摄像机状态](http://help.adobe.com/en_US/as3/dev/WSfffb011ac560372f3fa68e8912e3ab6b8cb-8000.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7d2c)

# javascript - (#200) 用户未授权应用程序执行此操作

> ID：13862030
> 
> 赞同：2
> 
> 时间：2012-12-13T14:33:08.407
> 
> 标签：javascript, facebook, facebook-graph-api

我正在尝试使用他们提供的 Js 文件构建一个 Facebook 应用程序。

我可以让用户注册我的应用程序，但我必须在他们的墙上发布提要（我也不希望用户批准的预先确认消息，用户应该只登录他/她的帐户）。

以下是代码：

```
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>

FB.init({ appId: '<%: Facebook.FacebookApplication.Current.AppId %>', status: true, cookie: true, xfbml: true });
    var userName;

    FB.login(function (response) {
        //alert('1');
        if (response.authResponse) {
            var access_token = FB.getAuthResponse()['accessToken'];
            //alert('Access Token = ' + access_token);
            FB.api('/me', function (response) {
                alert('Good to see you, ' + response.name + '.');
                userName = response.name;
                document.getElementById('btnPostFeed').style.display = 'block';

            });
        } else {
            document.getElementById('btnPostFeed').style.display = 'none';
            //console.log('User cancelled login or did not fully authorize.');
        }
    }, { scope: '' });    

 function SubmitPost(msg) {
try {
    if (userName != null || typeof userName != 'undefined') {
        var wallPost = {
            message: msg + " By : " + userName,
            picture: '',
            link: '',
            name: 'test app posted in your wall',
            caption: '',
            description: ('Test description')
        };
        FB.api('/me/feed', 'post', wallPost, function (response) {
            if (!response || response.error) {
                /*action*/
                alert('Message could not be Posted.');
                alert(response.error.message);
            } else {
                /*action*/
                alert('Message Posted successfully.');
            }
        });
    }
    else {
        alert('Please wait while User Info is Loaded..');
    }
}
catch (err) { alert('SubmitPost: ' + err); } 
```

**我的主要问题是：** 我得到**(#200) 用户尚未授权应用程序执行此操作**

以下是应用注册的屏幕截图： ![在此处输入图像描述](../Images/74ac46c938ac587e721242946b166f0f.png)

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T23:02:01.987

您的范围在此行中完全为空

`}, { scope: '' });`

如果您没有请求正确的许可，您将不会被授权。

> 但是我必须在他们的墙上发布提要（我也不希望用户批准的预确认消息，用户应该只登录他/她的帐户）。

这是没有意义的，您的用户需要批准您发布到他们的墙上。如果他们只登录，他们只会授予您最基本的权限，不包括在他们的墙上发帖。

# jsp - 更改 IntelliJ 12 中的默认 Web 应用程序目录

> ID：13862032
> 
> 赞同：3
> 
> 时间：2012-12-13T14:33:13.307
> 
> 标签：jsp, web-applications, intellij-idea, tomcat7

从输出中，我得到；

信息：部署 Web 应用程序目录 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\manager

我需要它来部署的是“root”，而不是“manager”。在研究了该主题并查看了 IntelliJ 的教程之后，我似乎无法弄清楚如何完成此操作。这是我第一次尝试网络应用程序，所以如果我忽略了一些琐碎的事情，我深表歉意。

我也使用 Tomcat 7 作为我的应用程序服务器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T14:50:45.750

此消息与您的工件部署无关，请参阅[此答案](https://stackoverflow.com/a/7702077/104891)。

Web 应用程序直接从设置为[您的工件的输出目录的](http://www.jetbrains.com/idea/webhelp/configuring-artifacts.html)目录部署。

您可以将工件输出更改为`TOMCAT\webapps\ROOT`，但通常不需要。

**更新**：

检查您的`Run`配置`Deployment`选项卡，您是否指定了要部署的工件及其上下文？上下文是否设置为“/”（ROOT）？您可能还需要禁用已在此 Tomcat 实例中配置的部署应用程序，以下是相关设置：

![1](../Images/2c4ef28143a72a10340bf6dd0cae577e.png)

![2](../Images/c17447973151290a1f9b41f4c6216282.png)

# c++ - C++ 构建工件管理

> ID：13862033
> 
> 赞同：3
> 
> 时间：2012-12-13T14:33:19.657
> 
> 标签：c++, jenkins, continuous-integration, artifacts

我们正在将我们的构建和测试系统转移到 Jenkins，并且正在寻找一种简单的方法（我们不必自己编写所有逻辑代码）来管理构建工件。

基本上，我们需要一种有组织的方式来按构建的类型、构建它的用户等顺序存储它们，例如：

```
johnd/nightly/r543241/win32/program.zip
johnd/nightly/trunk/lin64/program.tar.gz
master/release/2.1/win32/program.zip 
```

这样我们可以在构建完成时上传，并在测试阶段轻松检索所需的工件。

到目前为止，我们只是将文件存储在 NFS 上的目录中，但最近开始考虑使用工件管理器。我看过 Artifcatory、Archiva 和 Nexus。但是所有看起来都非常以 Java 为中心，或者至少需要 maven 才能使用。由于我不想引入更多复杂性（我们主要使用 python，scons 是我们的构建工具）并且我不想将 maven 引入混合，我正在寻找具有简单命令行的东西（或更好的 REST/Python 接口）来上传、下载、管理工件。

如果您不使用工件管理器，而是使用其他一些聪明的方法来管理您的 C++ 工件以满足发布/测试需求，我也会很高兴听到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:26:08.000

我有完全相同的问题。我没有成功整合神器，所以我忘记了。

目前我使用 copy artefact 插件通过 scp 将文件复制到 NFS 共享。但这不是一个好的解决方案，因为共享可能在两台机器上以不同的方式安装，并且 windows 无法直接访问它们。

但是对于我们的项目来说，真正的工件管理器会是一件好事。

在我之前的工作中，我使用的是提供良好服务的文档 CMS (LiveLink)： - 自组织文件夹。- 持久 url（我们可以移动、重命名文件夹和文件，给定文件的公共 URL 永远不会改变，这太棒了：“http://server/go/123456789123456789”总是指向同一个文件。所以你刚刚有了将此 url 提供给 wget 并获得文件 - 文件版本控制。 - 元数据，高级搜索

我仍在开源软件中寻找这样的解决方案，但没有找到。

在您只需要在两个作业之间共享工件时，只需使用“为另一个构建复制工件”插件即可。我用它把我的工作分成一个构建工作和一个测试工作（实际上有 3 个测试工作，每次提交后完成一个非常快的工作，每天完成一个非常慢的工作，每个周末完成一个非常慢的工作）。

# wpf - IsMouseOver 仅临时触发背景颜色更改

> ID：13862036
> 
> 赞同：1
> 
> 时间：2012-12-13T14:33:33.500
> 
> 标签：wpf, xaml, triggers

我是这方面的初学者，并试图了解 WPF 和 XAML 的工作原理。以下片段是来自 Nathans Unleashed 4.0 书的（一个微不足道的修改）。我将它插入到 Ok 按钮中：

```
<Button.Style>
 <Style TargetType=”{x:Type Button}”&gt;
  <Style.Triggers>
   <Trigger Property=”IsMouseOver” Value=”True”&gt;
    <Setter Property=”Background” Value=”Yellow”/>
   </Trigger>
  </Style.Triggers>
 </Style>
</Button.Style> 
```

当我在 XAML crunsher 中运行它并将鼠标移到 Ok 按钮上时，该按钮确实将其背景颜色更改为黄色（很好），但立即将颜色重置为其原始值，即使鼠标停留在按钮上 - 为什么这是？我希望它保持黄色，直到鼠标从按钮上移开。这是 XAML 粉碎机的问题，还是我的期望错误？

**编辑**（回复评论）：这是完整的窗口，也来自 Nathan 的书：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="About WPF Unleashed" SizeToContent="WidthAndHeight"
    Background="OrangeRed">
  <StackPanel>
   <Label FontWeight="Bold" FontSize="20" Foreground="White">
    WPF Unleashed (Version 3.0)
   </Label>
   <Label>© 2006 SAMS Publishing</Label>
   <Label>Installed Chapters:</Label>
   <ListBox>
    <ListBoxItem>Chapter 1</ListBoxItem>
    <ListBoxItem>Chapter 2</ListBoxItem>
   </ListBox>
   <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
   <Button MinWidth="75" Margin="10">Help</Button>
   <Button MinWidth="75" Margin="10">
    <Button.Style>
     <Style TargetType="{x:Type Button}">
      <Style.Triggers>
       <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Background" Value="Yellow"/>
       </Trigger>
      </Style.Triggers>
     </Style>
     </Button.Style>
     OK
     </Button>
    </StackPanel>
   <StatusBar>You have successfully registered this product.</StatusBar>
  </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:05:09.360

不幸的是，Button 内置了花哨的悬停动画，您必须重写 ControlTemplate 以阻止这种情况发生。

```
 <Button MinWidth="75" Margin="10" FocusVisualStyle="{x:Null}" Content="OK">
            <Button.Style>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Border Name="border" BorderThickness="1" Padding="4,2" BorderBrush="DarkGray" CornerRadius="3" Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="content"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="Yellow"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:25:13.327

我将您的代码复制到一个新的 Visual Studio 2010 项目中并成功运行它（.NET 4.0）。

我相信问题是 XAML Cruncher 的错误。

# php - 如何使用 preg_match 在数组中获取字符串格式链接 url .html？

> ID：13862039
> 
> 赞同：0
> 
> 时间：2012-12-13T14:33:34.593
> 
> 标签：php

我有一个示例代码：

```
$array = array(
   1 => "tag/gomobi.html", 
   2 => "game.html", 
   3 => "game.php", 
   4 => "game.html", 
   5 => "game/game-mobile/feed.html"
);
foreach ($array as $url) {
   if(preg_match('/^((.*)\.html)(.*?)$/', $url, $matches)) {
       echo $matches[1].'<br />';    
   } 
} 
```

但结果不能删除相同的值（game.html）

```
tag/gomobi.html
game.html
game.html
game/game-mobile/feed.html 
```

如何修复它，结果是：

```
tag/gomobi.html
game.html
game/game-mobile/feed.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:35:15.933

尝试：

```
$array = array(
   1 => "tag/gomobi.html", 
   2 => "game.html", 
   3 => "game.php", 
   4 => "game.html", 
   5 => "game/game-mobile/feed.html"
);

print_r (array_unique($array)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:35:04.103

使用[`array_unique();`](http://php.net/manual/en/function.array-unique.php). 它从数组中删除重复值

`print_r(array_unique($array));`

# iphone - UISearchBar 文本字段中的自定义清除按钮

> ID：13862050
> 
> 赞同：6
> 
> 时间：2012-12-13T14:34:09.360
> 
> 标签：iphone, ios, ipad, uitextfield, uisearchbar

我试过了：

```
UITextField *searchtextfield = [searchBar.subviews objectAtIndex:1];
    UIButton *cButton = [UIButton buttonWithType:UIButtonTypeCustom];
    cButton.frame = CGRectMake(0, 0, 20 , 20);
    cButton.backgroundColor = [UIColor clearColor];
    [cButton setImage:[UIImage imageNamed:@"x-button"] forState:UIControlStateNormal];//your button image.
    cButton.contentMode = UIViewContentModeScaleToFill;
    [cButton addTarget:self action:@selector(xButtonPressed) forControlEvents:UIControlEventTouchUpInside];//This is the custom event
    [searchtextfield setRightView:cButton];
    [searchtextfield setRightViewMode:UITextFieldViewModeWhileEditing]; 
```

但它不能很好地工作......它显示自定义按钮，但是当你输入一些东西时，旧的又回来了......

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-17T22:01:40.257

如果您想在 UISearchBar 中设置自定义清除按钮，请尝试以下操作：

```
[[UISearchBar appearance] setImage:[UIImage imageNamed:@"MyClearButton.png"] forSearchBarIcon:UISearchBarIconClear state:UIControlStateNormal]; 
```

不要忘记设置图像`UIControlStateHighlighted`

```
[[UISearchBar appearance] setImage:[UIImage imageNamed:@"HighlightedClearButton.png"] forSearchBarIcon:UISearchBarIconClear state:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-17T08:53:44.470

你需要以下

```
[searchBar setImage:[UIImage imageNamed:@"image1"] forSearchBarIcon:UISearchBarIconClear state:UIControlStateHighlighted];
[searchBar setImage:[UIImage imageNamed:@"image2"] forSearchBarIcon:UISearchBarIconClear state:UIControlStateNormal]; 
```

如果您想使用相同的图像，强烈建议从*UIControlStateHighlighted开始按此顺序放置字符串：image1=image2=image。*

在 iOS7 中，这很奇怪，但 UIControlStateNormal 和 UIControlStateHighlighted 的直接顺序不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:21:25.167

你可以隐藏你的取消按钮`searchBarTextDidBeginEditing`

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [searchBar setShowsCancelButton:NO animated:YES];
} 
```

最神奇的是，您还可以通过以下方式隐藏您的清除按钮

```
UITextField *textField=(UITextField*)[[searchBar subviews]objectAtIndex:1];
textField.clearButtonMode=UITextFieldViewModeNever; 
```

按照我的回答敌人更多信息[链接](https://stackoverflow.com/questions/13799074/how-to-override-the-cancel-button-in-the-uisearchbar/13799144#13799144)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:22:28.133

设置`clearButtonMode`为 `UITextFieldViewModeNever`和`rightViewMode`_`UITextFieldViewModeAlways`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-20T09:56:42.657

在 swift 2.2 中，以下代码对我有用

```
 [UISearchBar .appearance().setImage(UIImage(named: "search_clear_icon"), forSearchBarIcon: .Clear, state: .Normal)]

    [UISearchBar .appearance().setImage(UIImage(named: "search_clear_icon"), forSearchBarIcon: .Clear, state: .Highlighted)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-15T13:32:45.220

`Swift` **4.2、4.1+**的[malex](https://stackoverflow.com/users/2066428/malex)答案，

```
UISearchBar.appearance().setImage(UIImage(named: "image1"), for: .clear, state: .normal)
UISearchBar.appearance().setImage(UIImage(named: "image2"), for: .clear, state: .highlighted) 
```

我也在[这里](https://stackoverflow.com/questions/51345642)`clear button` `tintColor`回答了这个问题，以便与定制一起设置`results button`。

# ruby-on-rails - 如何将 rails_admin 安装到我的应用程序中

> ID：13862054
> 
> 赞同：0
> 
> 时间：2012-12-13T14:34:18.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

我有一个带有自定义布局的 rails3 应用程序。我将 rails_admin 集成到我的应用程序中。在 config/routes.rb 中，我将我的应用程序安装在 RailsAdmin::Engine 上。现在我的应用程序采用 rails_admin 布局。但我的意图是仅将 rails_admin 仪表板表视图放入我的布局中。而且我不想包括侧面导航栏。如何配置 rails_admin 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:48:10.680

我通过将布局文件添加到 app/views/rails_admin 中解决了这个问题。现在我得到了预期的布局。

# php - 我得到一个 PHP 意外的 T_DOUBLE_ARROW

> ID：13862056
> 
> 赞同：0
> 
> 时间：2012-12-13T14:34:24.777
> 
> 标签：php

它是 PHP 自动生成的提要的一部分，我只知道 PHP 的点点滴滴，所以请对我保持冷静，但我得到了：

> 解析错误：语法错误，第 68 行 /home/u664558657/public_html/feed/example_rss2.php 中的意外 T_DOUBLE_ARROW

```
 switch($monitor->$newItem=>addElementArray(array('title'=>getStatus())
    {
        case STATUS_ONLINE :
            p('<h2 class="online">Online</h2>');
            break;
        case STATUS_OFFLINE :
            p('<h2 class="offline">Offline</h2>');
            break;
        case STATUS_PAUSED :
            p('<h2 class="waiting">Paused</h2>');
            break;
        case STATUS_DOWNTIME :
            p('<h2 class="waiting">Scheduled Downtime</h2>');
            break;
        case STATUS_UNPOLLED :
            p('<h2 class="waiting">Unpolled</h2>');
            break;
    }', 'link'=>'http://feed.vipo.ca/', 'description'=>'test description'));

    $TestFeed->addItem($newItem); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:37:22.813

```
switch($monitor->$newItem=>addElementArray(array('title'=>getStatus()) 
```

应该：

```
switch($monitor->$newItem->addElementArray(array('title'=>getStatus()) 
```

看看`=>`并将其更改为`->`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T14:36:39.960

`T_DOUBLE_ARROW`是 的令牌`=>`。所以错误是针对`$newItem=>addElementArray`. 它应该是

```
$newItem->addElementArray 
```

之后还应该有两个括号 `array('title'=>getStatus())`。喜欢

```
array('title'=>getStatus()))) 
```

即使在那之后，这部分**也没有意义**

```
', 'link'=>'http://feed.vipo.ca/', 'description'=>'test description')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:36:38.673

试试下面的代码

```
switch($monitor->$newItem->addElementArray(array('title'=>getStatus())))
{
    case STATUS_ONLINE :
        p('<h2 class="online">Online</h2>');
        break;
    case STATUS_OFFLINE :
        p('<h2 class="offline">Offline</h2>');
        break;
    case STATUS_PAUSED :
        p('<h2 class="waiting">Paused</h2>');
        break;
    case STATUS_DOWNTIME :
        p('<h2 class="waiting">Scheduled Downtime</h2>');
        break;
    case STATUS_UNPOLLED :
        p('<h2 class="waiting">Unpolled</h2>');
        break;
} 
```

# sql - 将两行合二为一

> ID：13862062
> 
> 赞同：0
> 
> 时间：2012-12-13T14:34:54.130
> 
> 标签：sql, sql-server, tsql

我们有一个审计系统，它记录所有系统表中发生的所有更改。基本上，这就是 AuditLog 表的样子：

![在此处输入图像描述](../Images/fe5be1d06429bd5ca401cb1e54103fcb.png)

目前我正在创建几个 sql 视图来查询不同类型的信息。一切都很好，除了一点。如果您再次查看该图像，您会看到我有一个 SubscriptionMetadata 表，它是一个键值对表，具有 2 个字段（MetaName 和 MetaValue）。图像显示的是订阅有一个新的水印，其值为“许可副本：全名、公司、V...”。

在我看来，我需要的是将这两行转换为以下形式：

```
41 - Insert - SubscriptionMetadata - 2012-10-19 - 53DA4XXXXXX - Watermark -  Licensed copy: Fullname, Company, V... 
```

我真的无法想象我怎么能做到或搜索它。

还有另一个问题（我认为），这些行总是按这个顺序出现：首先是 MetaName，然后是 MetaValue。这是知道它们相关的唯一方法。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:44:47.147

虽然我看不到您的完整表结构，但您可以通过以下方式转换数据。这两种解决方案都将数据放在单独的列中：

```
;with data(id, [action], [type], [date], [col], metatype, value) as
(
    select 41, 'Insert', 'SubscriptionMetaData', '2012-10-19', '53DA4XXX','Metaname', 'Watermark'
    union all
    select 41, 'Insert', 'SubscriptionMetaData', '2012-10-19', '53DA4XXX','MetaValue', 'Licensed copy: Fullname, Company'
) 
select id, action, type, date, col,
    MAX(case when metatype = 'Metaname' then value end) Name,
    MAX(case when metatype = 'MetaValue' then value end) Value
from data
group by id, action, type, date, col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/7129)

或者您可以`PIVOT`在数据上使用 a 来获得相同的结果：

```
;with data(id, [action], [type], [date], [col], metatype, value) as
(
    select 41, 'Insert', 'SubscriptionMetaData', '2012-10-19', '53DA4XXX','Metaname', 'Watermark'
    union all
    select 41, 'Insert', 'SubscriptionMetaData', '2012-10-19', '53DA4XXX','MetaValue', 'Licensed copy: Fullname, Company'
) 
select *
from
(
    select id, [action], [type], [date], [col], metatype, value
    from data
) src
pivot
(
    max(value)
    for metatype in (Metaname, MetaValue)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/7130)

两者都产生相同的结果：

```
| ID | ACTION |                 TYPE |       DATE |      COL |      NAME |                            VALUE |
-------------------------------------------------------------------------------------------------------------
| 41 | Insert | SubscriptionMetaData | 2012-10-19 | 53DA4XXX | Watermark | Licensed copy: Fullname, Company | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:48:21.393

您可以使用 coalesce 函数通过存储过程或标量值函数执行此操作，如下所示：

```
DECLARE @Results NVARCHAR(MAX);
DECLARE @Token NVARCHAR(5) = '-'; -- separator token
SELECT @Results = coalesce(@Results + @Token,'') + t.MetaValue from (select * from TableName where MetaName = 'SubscriptionMetadata') t;
RETURN @Results; -- variable containing the concatenated values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:49:16.330

[这是一个工作示例。](http://sqlfiddle.com/#!3/b9327/9)请根据需要替换列名。`Col3 = your string concatenating column`.

```
SELECT t1.col1,t1.col2,
       NameValue =REPLACE( (SELECT col3 AS [data()]
           FROM mytable t2
           WHERE t2.col1 = t1.col1
           ORDER BY t2.col1
           FOR XML PATH('')
           ), ' ', ' : ')
FROM mytable t1
GROUP BY col1,col2 ;

--DATA
1 |  X |  Name
1 |  X |  Value

--RESULTS
1 |  X |  Name:Value --Name Value pair here 
```

**编辑：如果您不需要连接** *（根据您的评论）*

```
SELECT t1.col1, t1.col2, t1.col3 NameColumn, t2.col3 ValueColumn
FROM (SELECT * FROM myTable WHERE col3 = 'Watermark') t1 JOIN 
     (SELECT * FROM myTable WHERE NOT (col3 = 'Watermark')) t2 
     ON t1.col1 = t2.col1 
```

# ms-access - MS Access 更新表中的所有日期

> ID：13862064
> 
> 赞同：2
> 
> 时间：2012-12-13T14:35:06.370
> 
> 标签：ms-access, vba

我在 Access 中有一个表格，我试图将所有日期更新到比表格显示的日期早一个月。如果表格显示 2012/11，它应该更新为 2012/10 等。我假设最好的方法是在 VBA 中？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:41:32.557

```
Update TABLE Set [dateColumn] = DateAdd("m", -1, [dateColumn]) 
```

# symfony - Symfony2 中的自定义用户提供程序

> ID：13862076
> 
> 赞同：0
> 
> 时间：2012-12-13T14:35:55.427
> 
> 标签：symfony

我正在尝试在 synfony 2 中配置自定义用户提供程序，以创建使用数据库作为存储系统的登录机制。正如教程所说，我已将此定义添加到我的 security.xml

```
 <provider name="in_db">
     <entity class="Nourdine\BusinessBundle\Entity\AuthenticatedUser" property="username" />
  </provider> 
```

不幸的是，这打破了一切，我很讨厌：

> InvalidConfigurationException：“security.providers.in_db”下无法识别的选项“entity”

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:45:35.667

你在关注哪个教程？

推荐官方cookbook： http: [//symfony.com/doc/current/cookbook/security/custom_provider.html](http://symfony.com/doc/current/cookbook/security/custom_provider.html)

在您的安全配置中，您将 User 类作为提供者。巨大差距。

您的 UserProvider 需要是一项服务。然后，您在提供者下提供它的服务 ID。

除非您尝试使用 AuthenticatedUser 的存储库？

# android - 在android中运行测试用例的视频

> ID：13862081
> 
> 赞同：0
> 
> 时间：2012-12-13T14:36:12.010
> 
> 标签：android

我正在使用 Eclipse 中的 AndroidTestCase 类运行测试用例。我想通过这个测试用例运行一个视频。

```
 MediaPlayer mediaPlayer = new MediaPlayer();
 mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        try {

            file = Environment.getExternalStorageDirectory();
            Log.v("tarun", file.getPath());
            mediaPlayer.setDataSource(getContext(),
                    Uri.parse(file.getPath() + "/DCIM/Camera/arun.mp4"));
            mediaPlayer.setAIAContext(false);
            mediaPlayer.prepare();
        } 
catch (Exception e) {
            fail("Failed due to I/O exception");
        }
        mediaPlayer.start();

 Thread.sleep(5000); 
```

现在，当测试用例运行时，只有声音来了，没有视频显示，但我想在这里显示一段指定时间的视频。我只知道我在这里需要一个视频视图，但我无法实现它。所以请在这里给我一些指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:39:05.273

我的视频已成功播放。

我建议您使用以下代码，其中我正在成功运行我的应用程序

代码如下：

**XML 文件：**

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#f0f0f0" >

    <Button
        android:id="@+id/btnVideoGallery"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:text="@string/gallery" />

    <Button
        android:id="@+id/btnCancel"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnVideoGallery"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="22dp"
        android:text="@string/cancel" />

    <TextView
        android:id="@+id/lblDisplayImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnCancel"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/below_this_text_video_will_be_displayed"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#000000"
        android:textSize="13dp" />

    <VideoView
        android:id="@+id/vvDisplayVideo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lblDisplayImage"
        android:layout_marginTop="15dp" />

</RelativeLayout> 
```

**Java 文件：**

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.MediaController;
import android.widget.VideoView;

public class VideoActivity extends Activity {

    private Button btnVideoGallery,btnCancel;
    private VideoView vvDisplayVideo;
    /** The Constant PICK_VIDEO. */
    private static final int PICK_VIDEO=1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video_options);

        btnVideoGallery=(Button)findViewById(R.id.btnVideoGallery);
        vvDisplayVideo=(VideoView)findViewById(R.id.vvDisplayVideo);
        btnCancel=(Button)findViewById(R.id.btnCancel);
        vvDisplayVideo.setVisibility(View.GONE);

        btnVideoGallery.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent video=new Intent();
                video.setAction(Intent.ACTION_PICK);
                video.setType("video/*");
                startActivityForResult(video, PICK_VIDEO);

            }
        });

        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent goStartUp=new Intent(VideoActivity.this, StartUpActivity.class);
                goStartUp.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(goStartUp);
                finish();
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if (resultCode==Activity.RESULT_OK && requestCode == PICK_VIDEO) {

            vvDisplayVideo.setVisibility(View.VISIBLE);
            vvDisplayVideo.setVideoURI(data.getData());
            vvDisplayVideo.setFocusable(true);
            MediaController mc=new MediaController(this);
            vvDisplayVideo.setMediaController(mc);
            Log.i("True", "Executed");
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub

        Intent goStartUp=new Intent(VideoActivity.this, StartUpActivity.class);
        goStartUp.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(goStartUp);
        finish();
        return super.onKeyDown(keyCode, event);
    }
} 
```

您还可以根据您的使用修改清单文件：

```
<manifest ...
<uses-sdk...  />
<uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />

<application .....
</application>

</manifest> 
```

# php - 如何将foreach中的字符串组合成单个字符串PHP

> ID：13862083
> 
> 赞同：8
> 
> 时间：2012-12-13T14:36:20.597
> 
> 标签：php, string, foreach

我有这样的代码

```
$word = 'foo';
$char_buff = str_split($word);

foreach ($char_buff as $chars){
    echo var_dump($chars);
} 
```

输出是

```
string(1) "f" 
string(1) "o" 
string(1) "o" 
```

由于某些原因，我想让输出变成这样的只有 1 个字符串：

```
string(3) "foo" 
```

我试过这个

```
$char.=$chars;
echo var_dump($char); 
```

但它显示错误`Undefined variable: char`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T14:40:31.167

我将假设您有充分的理由将其拆分，只是将其重新组合在一起：

```
$word = 'foo';
$result = "";
$char_buff = str_split($word);

foreach ($char_buff as $char){
    $result .= $char;
}

echo var_dump($result); 
```

输出以下内容：

```
string(3) "foo" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:40:51.543

[`str_split()`](http://php.net/manual/en/function.str-split.php)将字符串转换为数组。如果要保留整个单词，则无需使用此功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:47:13.260

我只会使用内爆，就像这样： `$string = implode('', $char_buff);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:40:59.030

那么，为什么要拆分它只是为了让它再次成为一个字符串？

```
$word='foo'
$char_buff = str_split($word);

$final = array();
foreach ($char_buff as $chars){
    $final[] = $chars;
}

var_dump( implode('', $final) ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T14:40:39.827

听起来你正在寻找 implode() [http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

至于您发布的代码 $chars .= $char; 可能是你想要做的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T14:41:36.860

拆分字符串，然后再次将其粘合在一起有点奇怪，但这里是：

```
$word='foo'
$char_buff = str_split($word);

// this is what is missing, you have to define a variable first
$newword = "";

foreach ($char_buff as $chars){
     $newword .= $chars;
}

echo var_dump($newword); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T14:48:40.257

```
<?php
$word = 'foo';
$char_buff = str_split($word);

// here is the trick
$length = count($char_buff);
$char_buff[$length] = $word;

foreach ($char_buff as $chars)
{
    echo var_dump($chars);
}
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-18T04:59:56.693

也许你们中的一些人正在寻找这个答案。我认为这个问题不再需要 var_dump() 。

```
<?php 
    if(isset($_POST['test'])){
        $result = '';
        for($x=1;$x<=4;$x++){
            $ans = $_POST['ans'.$x];
            $result .= $ans;
        } 
    echo $result; 
    }
?> 
```

这是HTML

```
<form role="form" method="post" action="<?php echo $url;?>">
	<input type="checkbox" name="ans1" value="A">A 
	<input type="checkbox" name="ans2" value="B">B 
	<input type="checkbox" name="ans3" value="C">C 
	<input type="checkbox" name="ans4" value="D">D 
	<input type="submit" name="test" value="Submit Answer">
</form>
```

# xml - 使用 XSLT 从 XML 创建 SVG 条形图

> ID：13862085
> 
> 赞同：2
> 
> 时间：2012-12-13T14:36:26.440
> 
> 标签：xml, xslt, svg

我正在使用 XSLT 将 XML 转换为 SVG。我想创建水平条形图，左侧有一个值，右侧有一个条形图值。XML 如下所示：

```
<value1 name="something">
  <value2>13</value2>
</value1>
<value1 name="something else">
  <value2>45</value2>
</value1> 
```

这就是我到目前为止所得到的，从 value2 创建水平条形图。

```
<xsl:template match="/" mode="svg">
    <svg width="500px" height="500px" xmlns="http://www.w3.org/2000/svg">
      <g id="bar" transform="translate(50,50) rotate(90 90 90)">
        <xsl:for-each select=".../value1">
        <xsl:variable name="val" select="value2"/>
      <rect x="{position()*25}" y="-{$val*1.5}" height="{$val*1.5}" width="15" style="fill:{@fill};"/>
      <text x="{position()*25 + 7.5}" y="0" style="font-family:arial;text-anchor:middle;baseline-shift:-15;">
      </text>
    </xsl:for-each>
  </g>
</svg> 
```

我遇到的问题是将文本和图表放在一起。我想错了吗？我希望输出看起来像这样：

```
value1     bar chart  value2
value1     longer bar chart  value2 
```

我真的被困住了，所以任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T19:12:41.250

使用 XSLT 实用程序模板生成 SVG 条形图，如下所示：

*   [XSLT 手册示例](http://examples.oreilly.com/9780596003722/)
*   [使用 XSLT 生成简单的 SVG 图表](http://fgeorges.blogspot.com/2008/04/simple-svg-chart-generation-with-xslt.html)
*   [使用 XSLT 生成 SVG](http://etutorials.org/XML/xml+hacks/Chapter+3.+Transforming+XML+Documents/Hack+54+Generate+SVG+with+XSLT/)
*   [XSLT 图形工具](http://surguy.net/examples/dinosaurs/graphtools.xsl)
*   [使用 XSLT 生成 SVG 内容](http://www.carto.net/svg/samples/xslt/)
*   [SVG坐标变换](http://msdn.microsoft.com/en-us/library/ie/hh535760)

# email - 在 Cygwin 中使用“电子邮件”命令

> ID：13862088
> 
> 赞同：3
> 
> 时间：2012-12-13T14:36:37.977
> 
> 标签：email, command-line, cygwin

我正在尝试使用 Cygwin 从命令行发送电子邮件。这就是我要输入的内容：

```
email -f myaddress@blah.com -s "This is a test" -b toaddress@blah.com 
```

我收到此错误消息：

```
/bin/sh: /usr/lib/sendmail: No such file or directory 
```

我在 /usr/lib 中创建了一个名为“sendmail”的文件夹，现在我得到了这个：

```
/bin/sh: /usr/lib/sendmail: is a directory 
```

有人可以一步一步告诉我如何从 Cygwin 发送电子邮件吗？喜欢如何设置它和一切？我到处看了看，我正准备把头发扯下来。

编辑：谢谢你们的回复。这就是我最终让它工作的方式。

```
bash.exe -c "echo  -e 'To: thepeopleimsendingitto@blah.com\nSubject: mySQL Upload\nSQL files from machines uploaded to log table successfully.' | sendmail -f me@blah.com otherpeople@blah.com" 
```

即使 Cygwin 在我的 Windows 路径中，它也无法识别它，所以我不得不直接运行 bash.exe 并说“将此命令作为 Linux 命令执行”。回声是构建电子邮件本身的内容。\n 字符将其分为“收件人”、“主题”和正文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T18:13:38.240

显然，`email`是一个让您提交电子邮件消息（[邮件提交代理](http://en.wikipedia.org/wiki/Mail_submission_agent)）的程序，该程序依赖于另一个程序来实际发送邮件（[邮件传输代理](http://en.wikipedia.org/wiki/Mail_transfer_agent)）。

我上周在我的 Cygwin 安装中启用了这个。我没有使用，`email`但是`mutt`Cygwin 提供的替代方案之一（请参阅它的[包列表）](http://cygwin.com/packages/)。我`mutt`不仅用于提交要发送的邮件，还用于阅读；它是一个[邮件用户代理](http://en.wikipedia.org/wiki/Mail_user_agent)（见一些[截图](http://www.mutt.org/screenshots/)）。

就像`email`，`mutt`依靠邮件传输代理来发送邮件，所以我不得不安装一个。在 Linux 上，流行的选择是`sendmail` and `postfix`; 但它们所做的远远超出了您的需要，并且 Cygwin 不将它们作为软件包提供。它确实提供`exim`和`ssmtp`。

我安装了`ssmtp`软件包并运行了该`ssmtp-config`实用程序。你必须在这里做出一些决定。您必须知道可以使用哪个 SMTP 服务器以及是否需要任何特殊配置才能与其通信。

顺便说一句，`ssmtp`确实安装了一个名为 的可执行文件`sendmail`，它不是原始的`sendmail`，但出于您需要的目的，它的行为与它相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:50:42.723

好的所以我第一次尝试时不够清楚......我想这是我的错，我会尽量让这一点更清楚。

在邮件配置中，它会询问 sendmail 二进制文件。听起来应该是这样的：

`Please enter the sendmail command line [/usr/sbin/sendmail -t -i]:`

这基本上是在询问 sendmail 二进制文件安装在哪里以及我应该传递什么参数来发送邮件。您的 sendmail 二进制文件要么未安装，要么未安装在您指定的位置。

要查看您是否安装了 sendmail，请尝试

```
%sendmail; 
```

如果可行，请尝试查找该二进制文件的路径

```
%which sendmail; 
```

如果这不起作用，则说明 sendmail 未安装，或者 sendmail 的位置需要附加到 env 路径变量中。关于如何进行设置没有正确答案，但完成这项工作的最低要求是在当前机器上安装 sendmail，对其进行配置并将正确的绝对路径传递给 mail-config 中的邮件程序。

# mysql - 任何方式来做这样的选择

> ID：13862089
> 
> 赞同：0
> 
> 时间：2012-12-13T14:36:38.863
> 
> 标签：mysql, sql, select

好的，这是我的 mysql 查询

```
SELECT GROUP_CONCAT(CallCenterID) FROM tbl_mytable WHERE USER=1; 
```

所以这个查询给了我所有的那些查询`user=1`。有没有办法让所有的查询`CallCenterID`都使用一个选择查询。`user!=1``user=1`

我想要的是一些东西`GroupConcat(CallCenterIds_not_in_user=1),GroupConcat(CallCenterIds_in_user=1)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:41:26.300

尝试这个：

```
 SELECT USER=1, GROUP_CONCAT(CallCenterID) FROM tbl_mytable GROUP BY USER=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:01:03.887

是的，有一种方法可以进行这样的选择。实际查询实际上取决于您想要返回的结果集。你想要一排还是两排分开的？CallCenterId 是否应该在列表中重复？如果 CallCenterId 出现在 user=1 的列表中，您是否希望将 CallCenterId 从 user!=1 的列表中排除？所有这些都是可能的。

* * *

# [SQL小提琴在这里](http://sqlfiddle.com/#!2/540d7/5)

* * *

测试用例：

```
CREATE TABLE tbl_mytable( `user` INT UNSIGNED, CallCenterId VARCHAR(2));
INSERT INTO tbl_mytable 
 VALUES (1,'a'),(1,'b'),(2,'a'),(2,'c'),(2,'a'),(2,'d'),(NULL,'x'); 
```

* * *

对规范的一种可能解释是，您想要 user=1 的所有 CallCenterId 的列表，并且您想要出现在表中但未出现在 user=1 的列表中的 ALL CallCenterId 的另一个列表。基本上，您希望 CallCenterId 出现在一个列表或另一个列表中，但不能同时出现。在测试用例中，这意味着您希望返回如下内容：

```
user=1  NOT user=1  
------  ----------
a,b     c,d,x 
```

该结果集可以通过如下查询返回：

```
SELECT GROUP_CONCAT(IF(user_one,t.CallCenterId,NULL) 
       ORDER BY t.CallCenterId
       ) AS `user=1`
     , GROUP_CONCAT(IF(user_one,NULL,t.CallCenterId)
       ORDER BY t.CallCenterId
       ) AS `NOT user=1`
  FROM ( 
         SELECT u.CallCenterId
              , MAX(IF(u.user=1,1,0)) AS user_one
           FROM tbl_mytable u
          GROUP BY u.CallCenterId
       ) t 
```

* * *

另一种可能的解释是，您希望在同一行返回两个 CallCenterID 列表，一个列表包含 user=1 的 CallCenterId，另一个列表包含除 user=1 以外的所有用户的所有 CallCenterId，这意味着相同的 CallCenterId 可以出现在两个列表中。在这种情况下，这样的事情会起作用：

```
SELECT GROUP_CONCAT(DISTINCT IF(t.`user`=1,t.CallCenterID,NULL)
       ORDER BY t.CallCenterId
       ) AS `user=1`
     , GROUP_CONCAT(DISTINCT IF(t.`user`!=1,t.CallCenterID,NULL)
       ORDER BY t.CallCenterId
       ) AS `user!=1`
  FROM tbl_mytable t 
```

返回：

```
user=1  user!=1  
------  ---------
a,b     a,c,d 
```

* * *

如果这对您更有效，也可以将这些列表作为两个单独的行返回。

```
SELECT IF(t.`user`=1,'user=1','user!=1') AS `which_users`
     , GROUP_CONCAT(t.CallCenterID ORDER BY t.CallCenterId) AS `call_centers`
  FROM tbl_mytable t
 GROUP BY which_users
 ORDER BY which_users DESC 
```

（注意：'user!=1' 的 call_centers 列表还将包括列为`user`NULL 的行的值；这些行可以通过稍微调整来排除。）

```
which_users  call_centers  
-----------  --------------
user=1       a,b           
user!=1      a,a,c,d,x 
```

* * *

稍微不同的查询将消除列表中的重复项（使用 DISTINCT 关键字），并消除列为`user`NULL 的任何行（添加 WHERE 子句）：

```
SELECT IF(t.`user`=1,'user=1','user!=1') AS `which_users`
     , GROUP_CONCAT(t.CallCenterID ORDER BY t.CallCenterId) AS `call_centers`
  FROM tbl_mytable t
 WHERE t.user IS NOT NULL 
 GROUP BY which_users
 ORDER BY which_users DESC 
```

返回：

```
which_users  call_centers
-----------  ------------
user=1       a,b
user!=1      a,c,d 
```

* * *

如果这些都不是您想要的，您需要更清楚地指定您想要返回的结果集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:43:06.240

Hello try this out? Are you referring to something like this? You may replace `name` with `callerid` and `someid` with `userid`. The userid I have used is just the unique key for the table, it doesn't refer to the `userid` as per yours :)

[REference SQLFIDDLE](http://sqlfiddle.com/#!2/a0912/2)

Query

```
select group_concat(name)
from mytable
where someid = 1
group by someid
; 
```

Results:

```
GROUP_CONCAT(NAME)
tim,ron,kate,pete 
```

*   [**SQLFIDDLE REFERENCE for further queries**](http://sqlfiddle.com/#!2/a0912/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:39:11.243

我想你想要所有这些，所以没有条件：

```
SELECT USER, GROUP_CONCAT(CallCenterID) FROM tbl_mytable ORDER BY USER 
```

这意味着它甚至不会检查该`user`列。`ORDER BY`会将具有相似`USER`值的记录分组在一起。

# c# - 创建应用程序包时出现 Visual Studio W8 中性语言错误

> ID：13862090
> 
> 赞同：0
> 
> 时间：2012-12-13T14:36:38.550
> 
> 标签：c#, visual-studio, windows-8

我只用西班牙语为 W8 创建一个应用程序。已将 AssambleyInfo.cs 上的 NeutralResourcesLanguageAttribute 设置为“es”。

使用“创建应用程序包”时，默认语言仅更改为英语。我检查了一个 resources.pri 是否已创建。

创建应用程序包时，如何将应用程序语言仅设置为西班牙语？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:12:23.023

你有没有在 中声明你的语言`Package/Resources`？

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh694075.aspx)：

> 必须包含应用支持的每种语言的 Resource 元素。有关应用必须支持才能在 Windows 应用商店中列出的语言列表，请参阅选择您的语言。在您将应用程序提交到 Windows 应用商店之前，语言属性并不重要。

# jsp - 跨站脚本问题

> ID：13862098
> 
> 赞同：0
> 
> 时间：2012-12-13T14:36:48.500
> 
> 标签：jsp, jstl, xss

为了解决跨站脚本问题，我使用以下代码来转义特殊字符：

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
    <c:set var="linkParam" value="${fn:escapeXml(linkParam)}" /> 
```

当运行代码时，我可以看到页面源中的特殊字符被转义：

```
 <a href='/result.jsp?name=O&#39;Neil'>O'Neil</a> 
```

但是当点击链接时，浏览器仍然在地址栏中显示“/result.jsp?name=O'Neil'，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:38:06.887

此行为是设计使然。
浏览器将在导航到链接时解码属性值。

但是，您仍然需要对链接值进行**URL** -parameter-encode，以防它包含类似`%`or的字符`&`。

# sql - Magento SQL 查询：获取所有“单独不可见”的简单产品

> ID：13862099
> 
> 赞同：1
> 
> 时间：2012-12-13T14:36:56.807
> 
> 标签：sql, magento, magento-1.7, entity-attribute-value

我希望直接在 Magento 数据库上编写一个 SQL 查询，以获取所有具有“单独不可见”可见性属性的简单产品，我相信其值为 1。

有人能帮忙吗？到目前为止，我发现表中设置了可见性值

> catalog_product_entity_int

但一直无法进一步进步。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:50:05.683

没有 ORM有很多理由*不*这样做，所有这些都可能（或可能不）适用于您的需求（存储过滤器、从正确的表中读取数据等）。至少，您可以使用产品集合对象来构建您将运行的查询：

```
$coll = Mage::getModel('catalog/product')->getCollection();
$coll->addAttributeToFilter('visibility' , Mage_Catalog_Model_Product_Visibility::VISIBILITY_NOT_VISIBLE);
echo $coll->getSelect(); 
```

结果查询将如下所示：

```
SELECT `e`.*, IF(at_visibility.value_id > 0, at_visibility.value, at_visibility_default.value) AS `visibility`
FROM `catalog_product_entity` AS `e`
INNER JOIN `catalog_product_entity_int` AS `at_visibility_default`
    ON (`at_visibility_default`.`entity_id` = `e`.`entity_id`)
    AND (`at_visibility_default`.`attribute_id` = '526')
    AND `at_visibility_default`.`store_id` = 0
LEFT JOIN `catalog_product_entity_int` AS `at_visibility` ON (`at_visibility`.`entity_id` = `e`.`entity_id`)
    AND (`at_visibility`.`attribute_id` = '526')
    AND (`at_visibility`.`store_id` = 1)
WHERE (IF(at_visibility.value_id > 0, at_visibility.value, at_visibility_default.value) = '1') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:56:30.347

我希望这可能未经测试。

```
$sql = "SELECT * FROM catalog_product_entity_int WHERE visibility=1";
$connection = Mage::getSingleton('core/resource')->getConnection('core_read');
foreach ($connection->fetchAll($sql) as $arraytest) {
    echo $arraytest['name'];
} 
```

# asp.net-mvc - ASP MVC 4 在控制器中管理对象状态

> ID：13862101
> 
> 赞同：0
> 
> 时间：2012-12-13T14:37:01.440
> 
> 标签：asp.net-mvc, asp.net-mvc-4, session-state

我是 MVC 的新手，并且在状态和对象持久性方面存在概念问题，希望有人可以整理我的想法。

我有一个远程网络服务，它提供了管理订单的方法。如您所料，订单由标题和行组成。线路可以有额外的要求。

我创建了我的域对象（使用 webservice 模式中的 xsd2code），webservice 调用和对象序列化都工作正常。我已经构建了 DAL/BLL 层，并且一切正常 - 使用 WinForms 测试平台应用程序前端进行了测试。

我有使用 Automapper 从域对象映射的视图模型对象。由于订单是从带有行等的单个 web 服务方法返回的，所以我有一个 OrderViewModel，如下所示

```
 public class OrderViewModel
{
    public OrderHeaderViewModel OrderHeader { set; get; }
    public List<OrderLineViewModel> OrderLines { set; get; }
    public List<OrderLineAdditionalViewModel> OrderLineAdditional { set; get; }
    public List<OrderJustificationViewModel> OrderJustifications { set; get; }

} 
```

首先，我想知道我是否应该放弃 OrderViewModel，就好像我将它作为模型传递给我传递的数据比我需要的多得多的视图一样。视图只需要 OrderHeader 或 OrderLines 等 - 而不是整个订单。

现在我的概念问题在于控制器、视图和对象持久性。

My Order 控制器有一个 Detail Action，它执行从 web 服务加载订单并将 Domain 对象映射到 OrderViewModel 对象。

```
 public ActionResult Details(string orderNumber)
    {

        OrderViewModel viewModel = new OrderViewModel();
        var order = WebServiceAccess.LoadOrderByOrderNumber(orderNumber,"OBOS_WS");

        viewModel = AutoMapper.Mapper.Map<BusinessEntities.Order, ViewModels.OrderViewModel>(order);

        return View(viewModel);
    } 
```

但是 Order/Details.cshtml 只有页面布局和对标题和行的两个部分页面的调用（我使用 Ajax 将 Headerview 交换为 HeaderEdit，LinesView 相同）

```
@{ Html.RenderPartial("DetailsHeaderViewPartial", Model);}
@{ Html.RenderPartial("DetailsLinesViewPartial", Model);} 
```

目前我将模型传递到主细节容器页面，然后传递到 RenderPartials，但是我不认为模型应该传递到主细节页面，因为它不需要它 - 模型是仅在 DetailsHeaderViewPartial、DetailsLinesViewPartial 中需要，所以我最好在此处使用 @RenderAction 并将模型传递到 Header/Lines 视图中。

但是，订单是从 ActionResult Details() 中的 web 服务中检索到的，我怎样才能使检索到的 OrderViewModel 对象在控制器的 ActionResult HeaderDetails() / LineDetails() 方法中可用，以作为模型在 return PartialView(... ，模型） ？

我是否应该使用用户会话来存储 Order ViewModel，以便它可以在控制器中的操作中使用。

从这个阶段开始，用户将能够维护订单（添加/删除行 - 编辑标题等）。由于保存订单的 web 服务调用可能需要几秒钟才能完成，我宁愿只在用户完成订单后调用 save 方法。因此，我想在处理过程中将正在进行的订单保留在本地某个地方。用户会话？

非常感谢您的任何建议。一旦我了解了 ViewModel 的状态管理，我就可以停止阅读一百万篇博客文章并实际编写这个东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:15:34.113

您实际上在这里有几个问题，所以我会尽力解决它们。

1）免除视图模型：我会说不。视图模型表示填充视图所需的数据。您似乎将视图模型用作与域模型对象相同的容器。因此，您在问是否应该放弃它并将域模型传递给视图，而您最初担心的是您传递的数据比您真正需要的数据更多？

与其放弃视图模型，不如重新审视您在视图模型上的属性。仅使用您需要的属性并创建映射逻辑（使用自动映射器或您自己）以获取复杂的域对象并填充视图模型上的属性。

总结：将视图模型构建为视图需要的东西，并编写映射逻辑来填充该视图模型。

2）在我分解您的具体情况之前，这只是最佳实践的陈述。

您将您的架构描述为具有 BLL 和 DAL。如果是这种情况，那么您不应该从控制器中保留任何对象。即使存在，控制器也不应该对数据库有任何了解，并且控制器中使用的对象应该不知道如何保存自己。在您的控制器和 Web 服务之间传递的对象严格来说应该是数据传输对象 (DTO)。如果您不熟悉 DTO 的构成，那么我强烈建议您进行一些研究并尝试将它们构建到您的解决方案中。它将帮助您从概念上了解视图模型对象、域对象和数据传输对象之间的区别。

3）我不会尝试在会话中存储订单对象。我将重新分析您如何分解视图中的部分视图，以便您可以以您需要的方式调用以 ordersviewmodel 为参数的操作。听起来您不必要地将视图分解为部分视图。

4) 你不应该关心视图模型对象的状态管理。您的视图（可以由许多局部视图组成）根据视图模型提供的属性进行填充。用户可以使用您开发的 UI 进行更改。由于您表示希望仅在他们完成所有更改以优化对 Web 服务的调用后才保存，因此您只需在单击提交时重新填充视图模型的字段。现在您有一个代表用户更改的 orderviewmodel 的“状态”。您可以在转换回 DTO（如果您按照我上面所说的）或将其映射到域对象后将此对象发送到 Web 服务。

1 最后注。您正在使用 automapper 将您的域映射到视图模型。我假设您的视图模型太复杂并且包含您不需要的东西，因为您构建了视图模型来模拟域对象，以便自动映射器可以通过命名约定进行映射。Automapper 有一个 api 用于执行不属于标准同名属性的复杂（自定义）映射。不要让自动映射器限制您以某种方式构建视图模型。

希望这可以帮助

# wcf - 工作流中这种情况的最佳实践是什么？

> ID：13862109
> 
> 赞同：1
> 
> 时间：2012-12-13T14:37:40.373
> 
> 标签：wcf, android-activity, workflow, operationcontract

我有一个工作流，它为我的图书馆管理应用程序中的某些操作调用 WCF 服务。现在的一个操作是——在图书馆中添加一本新书。但是如果数据库中不存在作者，那么它将首先在数据库中添加作者，然后添加新书。目前我已经在单个 WCF 操作（方法）中编写了它们，并从工作流活动中调用它。但是，我想知道这是否是最佳做法？或者如果我需要将此任务分为同一工作流下的两个活动

# android - WiFi 是否支持 UDP 和 TCP（Android 设备）

> ID：13862110
> 
> 赞同：0
> 
> 时间：2012-12-13T14:37:43.037
> 
> 标签：android, networking, tcp, udp

我一直在环顾四周，我发现有证据表明Android可以使用UDP和它的WiFi，但是可以使用TCP吗？我知道它可能可以，但我似乎找不到任何证据，查看[http://developer.android.com/guide/topics/connectivity/wifip2p.html](http://developer.android.com/guide/topics/connectivity/wifip2p.html)它没有说明它可以使用的协议,

有没有人有一个网站说明可以使用哪些协议，而且，我正在为 android 创建一个应用程序，多个用户可以连接到一个 WiFI 热点设备，他们都可以一起玩并且是实时网络，我觉得 UDP 会最好，你同意吗？

帆布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:52:26.507

我肯定知道 TCP 是可能的，因为我已经使用过它。

话虽这么说，我没有任何链接到说明如此多的资源。

我可以告诉你，为了在 Android 上实现它，我使用了这个`Socket`类以及一些输入/输出流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:41:37.563

UDP、TCP 和更多网络内容位于 java.net 位置，可以在此处找到

[android api中的java.net](http://developer.android.com/reference/java/net/package-summary.html)

# java - 比较android中的两个双值

> ID：13862111
> 
> 赞同：4
> 
> 时间：2012-12-13T14:37:52.347
> 
> 标签：java, android

我正在尝试比较两个双精度值：

```
for(int i=0;i<count;i++){
    Double i1=Double.parseDouble(pref.getString("longitude"+i, null));
    Double i2=Double.parseDouble(pref.getString("latitude"+i,null));
    Log.i("Longitude", i1+"");
    Log.i("Latitude",i2+"");
    Log.i("Longitude1",longitude+"");
    Log.i("Latitude1", latitude+"");
    Log.i("note",pref.getString("note"+i, null));

    if(longitude==i1&&latitude==i2) {
        String note=pref.getString("note"+i, null);
        txt.setText(note);
    }
} 
```

共享偏好中有一种组合与经度和纬度相匹配，但是如果我比较它时没有为 textview txt 分配任何值。但是在日志中，纬度和纬度有相同的值。谁能告诉我这有什么问题比较为什么它不执行 txt.settext 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:54:30.977

我认为存在准确性问题 - 浮点或双炮等类型绝对严格地表示。当我需要比较两个双打时，我会使用这样的东西

```
double doubleToCompare1 = some double value;
double doubleToCompare2 = another double value;
double EPS = 0.00001;

if(Math.abs(doubleToCompare1-doubleToCompare2)<EPS){
   // assuming doubles are equals
} 
```

EPS 值取决于您需要的准确性。对于坐标，我记得它是逗号后的 6 或 7 符号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T14:43:22.183

假设`latitude`并且`longitude`也是`Double`，尝试调用`doubleValue`两者：

```
if(longitude.doubleValue() == i1.doubleValue() && latitude.doubleValue() == i2.doubleValue()) 
```

或者只是使用`equals`

```
if(longitude.equals(i1) && latitude.equals(i2)) 
```

它来自第一行，在引擎盖下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:43:35.983

如果纬度和经度也是`Double`s，您需要运行比较`equals`而不是`==`：

```
(longitude.equals(i1) && latitude.equals(i2)) 
```

如果它们是`double`s（即原语），则没有必要，问题出在其他地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:54:03.513

只需使用**双**原语而不是**双**类。

```
for(int i=0;i<count;i++){
    double i1=Double.parseDouble(pref.getString("longitude"+i, null));
    double i2=Double.parseDouble(pref.getString("latitude"+i,null));
    Log.i("Longitude", i1+"");
    Log.i("Latitude",i2+"");
    Log.i("Longitude1",longitude+"");
    Log.i("Latitude1", latitude+"");
    Log.i("note",pref.getString("note"+i, null));

    if(longitude==i1&&latitude==i2) {
        String note=pref.getString("note"+i, null);
        txt.setText(note);
    }
} 
```

我不知道您的经度和纬度变量是什么类型。如果它们是原始（双），则不应做任何事情。如果它们是 Double 对象，请将它们更改为基元，或提取 double 值`logitude.doubleValue()`

# java - charAt 与前 2 个数字循环不能循环它

> ID：13862119
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:38:20.180
> 
> 标签：java, string, char

```
import cs1.Keyboard;

public class charAT {
    public static void main(String[] args) {
        String s;

        //The telephone number should be 79575757
        System.out.println("Enter your telephone number");
        s = Keyboard.readString();

        int index1 = s.charAt(0); 
```

这部分不起作用：

```
 if((char)index1 == 7){
            System.out.println("The second number is "+(char)index1);
        }
        else {
            System.out.println("This number is invalid");
        }
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:45:48.660

您的第一个问题是您正在根据整数值 7 检查 index1。将其更改为

```
char index1 = s.charAt(0);
if(index1 == '7'){ 
```

接下来，我假设您想获得第二个数字，而不仅仅是再次显示相同的数字，所以

```
 index1 = s.charAt(1); //get the second character
    System.out.println("The second number is "+ index1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:57:39.287

首先，charAt() 方法返回`char`，所以你的代码应该是这样的：

```
char ch = s.charAt(0); 
```

我将变量名从 更改`index1`为`ch`。charAt() 方法返回`char`指定位置的 ，而不是索引。

其次，您应该比较`char`：

```
if (ch == '7') { 
```

最后，您可以`String`像`char`这样连接：

```
System.out.println("The second number is "+ ch); 
```

# java - Android Wifi Manager 连接不正确

> ID：13862120
> 
> 赞同：0
> 
> 时间：2012-12-13T14:38:35.913
> 
> 标签：java, android, wifi, nfc

我设法制作了一个 NFC 应用程序，当扫描特定标签时，手机将自动与一个特定的 Wi-Fi 建立连接。（即使 Wi-Fi 已关闭）我已经在代码（标签）中包含了 SSID 和密码，因此用户只需扫描标签即可连接。但是，我注意到在我第一次点击时，Wi-Fi 已启用（如果禁用）但它不会连接到 Wi-Fi。只有在第二次点击时，它才会连接到指定的 Wi-Fi。为什么会这样？

我的代码：

```
 @Override
    protected void onNewIntent(Intent intent) {

        String result2="";
        String resultid="";
        String resultpw="";

        super.onNewIntent(intent);      
        SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
        int storedPreference = preferences.getInt("storedInt", 0);

        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
            NdefMessage[] messages = null;
            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
            if (rawMsgs != null) {
                messages = new NdefMessage[rawMsgs.length];
                for (int i = 0; i < rawMsgs.length; i++) {
                    messages[i] = (NdefMessage) rawMsgs[i];
                }
            }
            if(messages[0] != null) {
                /*
                String result="";
                byte[] payload = messages[0].getRecords()[0].getPayload();
                // this assumes that we get back am SOH followed by host/code
                for (int b = 0; b<payload.length; b++) { // skip SOH
                    result += (char) payload[b];
                }
                */

                try{
                //grabbing 2nd payload

                byte[] payload2 = messages[0].getRecords()[1].getPayload();
                for (int test = 0; test<payload2.length; test++) { // skip SOH
                    result2 += (char) payload2[test];
                    //Toast.makeText(this,result2,Toast.LENGTH_SHORT).show();  
                    }
                }
                catch(ArrayIndexOutOfBoundsException e){
                    Toast.makeText(getApplicationContext(), "Wrong tag detected. Try again!", Toast.LENGTH_SHORT).show();
                }

                //grab ssid
                try{

                    byte[] payload3 = messages[0].getRecords()[2].getPayload();
                    for (int test = 0; test<payload3.length; test++) { // skip SOH
                        resultid += (char) payload3[test];
                        //Toast.makeText(this,result2,Toast.LENGTH_SHORT).show();  
                        }
                    }
                    catch(ArrayIndexOutOfBoundsException e){

                    }

                //grab ssid_pw
                try{

                    byte[] payload4 = messages[0].getRecords()[3].getPayload();
                    for (int test = 0; test<payload4.length; test++) { // skip SOH
                        resultpw += (char) payload4[test];
                        //Toast.makeText(this,result2,Toast.LENGTH_SHORT).show();  
                        }
                    }
                    catch(ArrayIndexOutOfBoundsException e){

                    }   

                if (result2.contains("StarbucksBestCoffee"))
                    {
                    final ImageView img = (ImageView)findViewById(R.id.imageView1);

                    /* Call to convert bytes to hex .
                     * 
                    String uid = toHex(intent.getByteArrayExtra(NfcAdapter.EXTRA_ID));
                      Toast.makeText(this, uid, Toast.LENGTH_LONG).show();*/

                    /*if (storedPreference!=10)
                    {
                        Toast.makeText(getApplicationContext(), "Coupon collected!", Toast.LENGTH_SHORT).show();
                        storedPreference++;
                        SharedPreferences.Editor editor = preferences.edit();
                        editor.putInt("storedInt", storedPreference);
                        img.setImageResource(images[storedPreference]);
                        img.invalidate();
                    }*/
                        if (storedPreference==10)
                        {
                            AlertDialog.Builder builder = new AlertDialog.Builder(this);
                            builder.setCancelable(false);
                            builder.setTitle("Redeem Your Coupon?");
                            builder.setInverseBackgroundForced(true);
                            builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which)
                                {
                                    dialog.dismiss();
                                    SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                                    SharedPreferences.Editor editor = preferences.edit();
                                    editor.putInt("storedInt", 0); // value to store
                                    editor.commit();    
                                    img.setImageResource(images[0]);
                                    img.invalidate();
                                }
                            });
                            builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                    dialog.dismiss();
                                    img.setImageResource(images[10]);
                                    img.invalidate();
                                }
                            });
                            builder.show();
                        }
                    else
                    {
                        Toast.makeText(getApplicationContext(), "Coupon collected!", Toast.LENGTH_SHORT).show();
                        storedPreference++;
                        SharedPreferences.Editor editor = preferences.edit();
                        editor.putInt("storedInt", storedPreference);
                        editor.commit();
                        img.setImageResource(images[storedPreference]);
                        img.invalidate();
                    }
                        if (resultid!=null&&resultpw!=null)
                        {
                         //Wi-Fi Manager auto-connect

                         WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
                         WifiConfiguration wc = new WifiConfiguration();
                         wc.SSID = "\"" + resultid + "\"";
                         wc.preSharedKey  = "\"" + resultpw + "\"";
                         wc.hiddenSSID = true;
                         wc.status = WifiConfiguration.Status.ENABLED;        
                         wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
                         wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
                         wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
                         wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
                         wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
                         wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
                         int res = wifi.addNetwork(wc);
                         Log.d("WifiPreference", "add Network returned " + res );
                         boolean b = wifi.enableNetwork(res, true);        
                         Log.d("WifiPreference", "enableNetwork returned " + b );
                         wifi.setWifiEnabled(true);
                        }

                    }
                else 
                {
                    Toast.makeText(getApplicationContext(), "Wrong tag detected!", Toast.LENGTH_SHORT).show();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:04:05.887

尝试这个：

*   处理“onResume”中的 NDEF 消息，以及
*   启用wifi时添加Wifi

换句话说，如果没有启用wifi，

*   存储 wifi 凭据，
*   收听 Wifi 广播直到启用，然后
*   添加网络

此外，您的 NDEF 解析是一个真正的 hack。尝试使用[它](http://code.google.com/p/ndef-tools-for-android/)进行解析是否有效。

# php - FuelPHP：尝试实现搜索。路线不起作用

> ID：13862122
> 
> 赞同：2
> 
> 时间：2012-12-13T14:38:41.833
> 
> 标签：php, frameworks, url-routing, fuelphp

伙计们。我有点卡在路线上

顶部导航中有一个搜索表单。

```
<form action="/search/" class="navbar-search pull-right">
    <input type="text" name="q" id="search-query" class="search-query span3" placeholder="Go for it...">
</form> 
```

所以如果我提出请求，URL 看起来像

```
fuelphp.dev/search/?q=qwerty 
```

这很好。使用该 URL，用户应该获得由他/她提供的请求的结果`action_index()`

**但是**如果用户去`fuelphp.dev/search/`（没有任何参数），他/她应该看到由提供的“高级搜索表单”`action_advanced()`

我已经创建了一个 Controller_Search

**类/控制器/search.php（控制器）**

```
class Controller_Search extends Controller_Hybrid
{
    public function action_index() {

        $this->template->title = 'Results for &raquo; '.Input::get('q');
        $this->template->content = View::forge('search/index.twig');
    }

    public function action_advanced()
    {
        $this->template->title = 'Search &raquo; Advanced Search';
        $this->template->content = View::forge('search/index.twig', array(
            'advancedForm' => true
        ));
    }
} 
```

**视图/搜索/index.twig（视图）**

```
{% if advancedForm %}
    {% include 'advancedSearchForm.twig' %}
{% endif %}
<h4>Hello Template nesting :) </h4> 
```

问题是 - 我不知道如何（重新）为此编写路线。

如果我添加`'search' => 'search/advanced'`到 routes.php 它不能正常工作。

Requestin也`fuelphp.dev/search/?q=qwerty`触发`action_advanced()`了`Controller_Search`，而它应该触发`action_index()`

我应该如何重写我的路由（或者可能是控制器逻辑）以使其正常工作？

**更新：**

**解决方案**找到了！无需路由配置！

```
public function action_index() {
    if (Input::get('q')) {
        $viewTitle = 'Results for &raquo; '.Input::get('q');
        $viewData = null;
    }else{
        $viewTitle = 'Search &raquo; Advanced Search';
        $viewData = Array('advancedForm' => true);
    }

    $this->template->title = $viewTitle;
    $this->template->content = View::forge('search/index.twig', $viewData);
} 
```

但是如果你们中的一个人有一个“更好”的方式，我会很高兴看到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:24:01.737

尝试使用**命名参数添加****2 条路线**：

 **```
'search' => 'search/advanced',
'search/:q' => 'search/index/' 
```

因此，当它有一些参数`search/index`与给定参数一起使用时，但如果你没有参数，它会路由到`search/advanced`

然后`search/index`你可以得到搜索参数（`q`）`$this->param('q')`**

# c# - 无法为 web.config 创建自定义部分

> ID：13862125
> 
> 赞同：0
> 
> 时间：2012-12-13T14:38:53.790
> 
> 标签：c#, configuration, web-config, app-config, configuration-files

我在 web.config 文件中创建了一个自定义部分，但它无法加载我将管理该部分的自定义类型。

以下是定义：

```
<configSections>
<section
        name="MembershipProviders"
        type="MyApp.BusinessObjects.MembershipProviderFactory.MembershipProvidersSection"
        allowLocation="true"
        allowDefinition="Everywhere"
      />
</configSections>

namespace MyApp.BusinessObjects
{
    public class MembershipProviderFactory
    {
        internal virtual IMembershipProvider Create()
        {
        }

        public class MembershipProvidersSection : ConfigurationSection
        {
            public class AddElement: ConfigurationElement
            {
                [ConfigurationProperty("name", IsKey  = true, IsRequired = true)]
                public string Name
                {
                    get
                    {
                        return this["name"].ToString();
                    }
                    set
                    {
                        this["name"] = value;
                    }
                }

                [ConfigurationProperty("type", IsRequired = true)]
                public string FullyQualifiedTypeName
                {
                    get
                    {
                        return this["type"].ToString();
                    }
                    set
                    {
                        this["type"] = value;
                    }
                }
            }

            public class AddElementCollection : ConfigurationElementCollection
            {
                protected override ConfigurationElement CreateNewElement()
                {
                    return new AddElement();
                }

                protected override object GetElementKey(ConfigurationElement element)
                {
                    return ((AddElement)element).Name;
                }
            }

            [ConfigurationProperty("currentProvider", IsRequired = false)]
            public string CurrentProvider
            {
                get
                {
                    return this["currentProvider"].ToString();
                }
                set
                {
                    this["currentProvider"] = value;
                }
            }

            [ConfigurationProperty("add", IsRequired = true, IsDefaultCollection = true)]
            public AddElementCollection Instances
            {
                get { return (AddElementCollection)this["add"]; }
                set { this["add"] = value; }
            }
        }
    }
} 
```

我得到一个运行时异常，它说：

*为 MembershipProviders 创建配置节处理程序时出错：无法加载类型“MyApp.BusinessObjects.MembershipProviderFactory.MembershipProvidersSection”。*

**更新**

我还在配置文件中包含了实际部分，如下所示：

```
<MembershipProviders currentProvider ="DefaultMembershipProvider" /> 
```

我仍然得到同样的例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:01:47.907

您需要将程序集名称指定为`type`属性的一部分：

```
<section
    name="MembershipProviders"
    type="Namespace.TheCustomSection, TheAssemblyNameGoesHere"
    allowLocation="true"
    allowDefinition="Everywhere"
/> 
```

**编辑**
我没有注意到`MembershipProvidersSection`该类是*嵌套*类。
类型名称应为：

```
MyApp.BusinessObjects.MembershipProviderFactory+MembershipProvidersSection 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:03:49.383

您在声明类型的地方缺少程序集名称：

```
MyApp.BusinessObjects.MembershipProviderFactory.MembershipProvidersSection,? 
```

看看我关于自定义配置的一篇文章： [C# WCF System.Configuration.ConfigurationErrorsException: Unrecognized element 'ManagedService'](https://stackoverflow.com/questions/12824301/c-sharp-wcf-system-configuration-configurationerrorsexception-unrecognized-elem/12824424#12824424)

# php - php中的时间比较

> ID：13862130
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:39:12.927
> 
> 标签：php, time, gmt

> **可能重复：**
> [strtotime date 奇怪的结果](https://stackoverflow.com/questions/7281571/strtotime-date-weird-result)

我试图比较考勤系统的两次，我试图获得美国阿肯色州的准确时间，但我无法获得正确的时间。如果我做错了什么，请引导我朝着正确的方向前进，这是我的代码的一部分：

```
$curTime =DATE("H:i A", strtotime('GMT-6'));

foreach($res as $r)
{
    $crs_id =$r['course_id']; 
    $query1 = "select * from tbl_course_time where course_id='$crs_id'";

     $res1 = $obj->querySelect($query1);

     $start_time  = DATE("H:i", STRTOTIME($res1[0]['start_time']));
     $end_time = DATE("H:i", STRTOTIME($res1[0]['end_time']));

    if ($curTime > $start_time && $curTime < $end_time) 
    {

      $qry="insert into tbl_attendance set         stud_id='$id',attd_date='$curDateForDB',attd_time='$curTimeForDB',course_id='$attd_courseId'";

    $res=$obj->queryInsert($qry);

    $result1 = "taken";
   }
} 
```

它给了我不正确的时间是格林威治标准时间我弄错了还是其他任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:42:36.317

Don't use `strtotime('GMT-6')` because `GMT-6` is not a time; it's a time zone.

```
// gets the UTC time using gmdate() instead of date()
$utc_str = gmdate("M d Y H:i:s", time());

// get the UTC timestamp, should you need it
$utc = strtotime($utc_str); 
```

If you're in PHP 5, the DateTime class is a very clean way to get times and also deal with time zone conversions.

Also, I encourage you to set your database up using UTC time, and convert the output to the user's time zone.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:44:39.770

You're doing the gmt-6 business wrong. The following is on a server that's in GMT-6 already:

```
echo date('r');                     // Thu, 13 Dec 2012 02:40:00 -0600
echo date('r', strtotime('gmt-6')); // Thu, 13 Dec 2012 08:40:17 -0600 
```

Note the 6 hour difference (and 17 seconds while I was typing up the strtotime bits). Doing the gmt-6 bit in strtotime forces PHP to apply a 6 hour difference to a string that's already in some timezone already.

# ruby-on-rails - Hash.delete_if 返回删除的元素？

> ID：13862136
> 
> 赞同：1
> 
> 时间：2012-12-13T14:39:57.157
> 
> 标签：ruby-on-rails, ruby, hash

从 Hash`relations`我想删除一些条目并将我删除的条目保留在另一个 Hash`obj`中。

我发现`Hash.delete_if`并做到了：

```
obj = relations.delete_if{|k,v| v[:value] == 1} 
```

但是，它不是返回已删除的，而是返回*未*删除的。

有没有一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:53:19.113

您可以使用以下[`partition`方法](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-partition)：

```
{x: 1, y: 0, z: 2, t: 1}.partition {|k, v| v == 1}
# => [[[:x, 1], [:t, 1]], [[:y, 0], [:z, 2]]] 
```

然后，您必须将结果转换回哈希值，您可以使用以下[`Hash[]`方法](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)：

```
{x: 1, y: 0, z: 2, t: 1}.partition{|k, v| v == 1}.map{|h| Hash[h]}
# => [{:x => 1, :t => 1}, {:y => 0, :z => 2}] 
```

所以要做你问的：

```
obj, relations = relations.partition{|k, v| v[:value] == 1}.map{|h| Hash[h]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:56:57.087

试试这个：

```
another_hash = {}
relations.delete_if{|k,v| v == 1 ? another_hash[k] = v; true : false} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:46:38.533

我不知道执行此操作的内置方法，但自己构建方法很简单。

```
def delete_and_return relations, &block
  [relations.reject(&block), relations.select(&block)]
end

relations = {
  a: {value: 1},
  b: {value: 2},
  c: {value: 1},
}

kept, deleted = delete_and_return(relations) {|k,v| v[:value] == 1}

kept # => {:b=>{:value=>2}}
deleted # => {:a=>{:value=>1}, :c=>{:value=>1}} 
```

您甚至可以打开`Hash`课程并将方法放在那里。

# php - 致命错误：第 14 行的 G:\xampp\htdocs\pattern.php 中不支持的操作数类型

> ID：13862147
> 
> 赞同：0
> 
> 时间：2012-12-13T14:40:45.927
> 
> 标签：php

我不断收到以下错误，我想知道如何解决？

这是我第二次遇到此错误，我第一次修复了它，但由于某种原因，我第二次无法修复它。

```
Fatal error: Unsupported operand types on line 14 
```

这是第 14 行

```
$sub=$a-$b; 
```

这是下面的完整代码。

```
<?php

$x=array(2,10);
$y=array(3,5);
$z=D($x,$y);

echo ('sum is :'.$z);

/** compute Euclidean distance http://en.wikipedia.org/wiki/Euclidean_distance */
 function D ($a,  $b)
{
    $sub=$a-$b;
    return pow($sub,2);
}
function distance_betwen($p,$q)
{
    $nu_argu=func_num_args();
    if( $nu_argu!=2)
    {
        echo 'please enter a valid 2 coordinates like this (1,2)';
    }
    else if (sizeof($p)!=sizeof($q))
    {
        echo 'values of each pair must have the same dimention';
    }
    else
    {
        $c=array_map("D",$p,$q);
        return pow(array_sum($c),0.5);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:42:19.593

您的`$z=D($x,$y);` `$x and $y is array`

你不能用两个做减法`array` `$sub=$a-$b;`

# c# - 未找到 WCF 服务类型

> ID：13862158
> 
> 赞同：1
> 
> 时间：2012-12-13T14:41:25.397
> 
> 标签：c#, wcf

我收到以下错误：

```
The type 'Drive_Service.DriveSessionsController', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found. 
```

我知道如果服务名称和命名空间不一样，这可能会被抛出，但我已经检查了大概 50 次，对我来说看起来一样。我不确定为什么会收到此错误。

网页配置

```
<?xml version="1.0"?>
<configuration>
 <system.web>
<compilation debug="true" targetFramework="4.0"/>
<pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
</system.web>
<system.serviceModel>
<protocolMapping>
  <add scheme="http" binding="wsDualHttpBinding"/>
</protocolMapping>
<services>
  <service name="Drive_Service.DriveSessionsController">
    <endpoint address="DriveSessionsController" binding="wsDualHttpBinding" contract="Drive_Service.ISessionController"/>
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:55534"/>
      </baseAddresses>
    </host>
  </service>
  <service name="Drive_Service.ServiceWithCallback">
    <endpoint address="ServiceWithCallback" binding="wsDualHttpBinding" contract="Drive_Service.IServiceWithCallback"/>
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:55534"/>
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

SVC 标记

```
<%@ ServiceHost Language="C#" Debug="true" Service="Drive_Service.DriveSessionsController" CodeBehind="DriveSessionsController.svc.cs" %> 
```

SVC 代码

```
namespace Drive_Service
{
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]
public class DriveSessionsController : ISessionController
{
    #region Fields
    private Object syncRoot = new Object();
    private Timer timer = new Timer();
    #endregion

    #region Properties
    /// <summary>
    /// Gets and sets the flag indicating to use the .NET 2 runtime in conjunction
    /// with the assembly .NET runtime.
    /// </summary>
    public static bool LegacyV2RuntimeEnabledSuccessfully { get; private set; }
    #endregion

    #region Constructors
    /// <summary>
    /// Constructor.
    /// </summary>
    public DriveSessionsController()
    {
        ICLRRuntimeInfo clrRuntimeInfo = (ICLRRuntimeInfo)RuntimeEnvironment.GetRuntimeInterfaceAsObject(Guid.Empty, typeof(ICLRRuntimeInfo).GUID);

        try
        {
            clrRuntimeInfo.BindAsLegacyV2Runtime();
            LegacyV2RuntimeEnabledSuccessfully = true;
        }
        catch (COMException)
        {
            LegacyV2RuntimeEnabledSuccessfully = false;
        }

        timer.Elapsed += new ElapsedEventHandler(this.ProcessUpdate);
        timer.Interval = 5000;
        timer.Enabled = true;
        timer.Start();
    }
    #endregion

    #region Internal Members
    /// <summary>
    /// Interface to the common language runtime information.
    /// </summary>
    [ComImport]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    [Guid("BD39D1D2-BA2F-486A-89B0-B4B0CB466891")]
    private interface ICLRRuntimeInfo
    {
        void xGetVersionString();
        void xGetRuntimeDirectory();
        void xIsLoaded();
        void xIsLoadable();
        void xLoadErrorString();
        void xLoadLibrary();
        void xGetProcAddress();
        void xGetInterface();
        void xSetDefaultStartupFlags();
        void xGetDefaultStartupFlags();

        [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
        void BindAsLegacyV2Runtime();
    }

    /// <summary>
    /// Disconnect the client.
    /// </summary>
    /// <param name="sessionID">The session id.</param>
    private void ClientDisconnect(string sessionID)
    {
        lock (syncRoot)
        {
            if (SessionManager.IsClientConnected(sessionID))
            {
                SessionManager.DeleteClient(sessionID);
            }
        }
    }

    /// <summary>
    /// Generate the client data for the service.
    /// </summary>
    /// <returns></returns>
    private ClientData GenerateClientData()
    {
        DataTranslator translator = new DataTranslator();
        SystemData systemData = translator.GetSystemData;
        ClientData data = new ClientData();

        data.UpdatedData = new List<DataValue>();
        data.DriveStatusExchange = DriveStatusExchange.ERROR;

        foreach (DriveStatusExchange status in DriveStatusExchange.GetValues())
        {
            if (status.Value == systemData.Status.ToString())
            {
                data.DriveStatusExchange = status;
                break;
            }
        }

        data.UpdatedData.Add(new DataValue() { Symbol = data.DriveStatusExchange.Value, Value = 0 });

        return data;
    }
    #endregion

    #region External Members
    /// <summary>
    /// Executed when client is subscribed to notifications from server.
    /// </summary>
    /// <param name="clientGuid"></param>
    public void SubscribeToNotifications(string clientGuid)
    {
        ISessionCallbackContract ch = OperationContext.Current.GetCallbackChannel<ISessionCallbackContract>();

        lock (syncRoot)
        {
            SessionManager.BrowserValue = clientGuid;

            if (!SessionManager.IsClientConnected(clientGuid))
            {
                SessionManager.AddCallbackChannel(clientGuid, ch);

                OperationContext.Current.Channel.Closing += new EventHandler(Channel_Closing);
                OperationContext.Current.Channel.Faulted += new EventHandler(Channel_Faulted);                    
            }
        }
    }

    /// <summary>
    /// Executed when client is unsubscribed to notifications from server.
    /// </summary>
    public void UnsubscribeToNotifications()
    {
        ClientDisconnect(OperationContext.Current.Channel.SessionId);
    }
    #endregion

    #region Events
    /// <summary>
    /// Process updating for each client.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void ProcessUpdate(object sender, EventArgs e)
    {
        ClientData data = GenerateClientData();

        if (SessionManager.GetCallbackChannels().Count() > 0)
        {
            lock (syncRoot)
            {
                IEnumerable<ISessionCallbackContract> allChannels = SessionManager.GetCallbackChannels();
                allChannels.ToList().ForEach(c => c.SendNotificationToClients(data));
            }
        }
    }

    /// <summary>
    /// Handle closing the channel.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void Channel_Closing(object sender, EventArgs e)
    {
        IContextChannel channel = (IContextChannel)sender;
        ClientDisconnect(channel.SessionId);
    }

    /// <summary>
    /// Handle a faulted channel.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void Channel_Faulted(object sender, EventArgs e)
    {
        IContextChannel channel = (IContextChannel)sender;
        ClientDisconnect(channel.SessionId);
    }
    #endregion
} 
```

}

有人看到我缺少的东西吗？

干杯。

# jquery - 取消绑定窗口滚动上的所有鼠标悬停事件

> ID：13862169
> 
> 赞同：1
> 
> 时间：2012-12-13T14:41:51.713
> 
> 标签：jquery, scroll, bind, unbind

我试过这段代码：

```
$(function(){
    $('.media-in').bind('mouseover',function(){
        $(this).children('.media-options').show();
    });
    $('.media-in').bind('mouseout',function(){
        $(this).children('.media-options').hide();
    });
    $(window).on('scroll',function(){
        $('.media-in').unbind('mouseover');
    });
}); 
```

它没有按预期工作。我想在滚动页面时`unbind`发生事件，`mouseover`我该怎么做？

另外，有没有办法`unbind`通过数组滚动页面上的事件？就像是：

```
$(window).scroll(function(){ 
    $(this).unbind(['mouseover','click','mouseout']);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:45:32.203

从 jQuery 1.7 开始，它是绑定[`off()`](http://api.jquery.com/off/)和[`on()`](http://api.jquery.com/on/)取消绑定事件处理程序的首选方法。

因此，要从元素中删除所有处理程序，请使用以下命令：

```
$('.media-in').off(); 
```

或对于特定的处理程序：

```
$('.media-in').off('mouseover mouseout click'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:45:43.777

您可以使用`on()`and `off()`，但是一旦事件处理程序被删除，一旦您停止滚动，它就不会神奇地返回，您必须使用 重新绑定它`on()`。

```
$(function(){
    var timer;
    media_bind();

    $(window).on('scroll', function(){
         clearTimeout(timer);
         $('.media-in').off('mouseover mouseout');
         timer = setTimeout(media_bind, 500);
    });

    function media_bind() {
         $('.media-in').on(
             mouseover: function() {
                 $(this).children('.media-options').show();
             },
             mouseout: function() {
                 $(this).children('.media-options').hide();
             }
         });
    }  
}); 
```

# c++ - C++ 终端在输入时关闭

> ID：13862172
> 
> 赞同：0
> 
> 时间：2012-12-13T14:41:58.797
> 
> 标签：c++, terminal

> **可能重复：**
> [如何阻止 C++ 控制台应用程序立即退出？](https://stackoverflow.com/questions/2529617/how-to-stop-c-console-application-from-exiting-immediately)

请原谅我在 C++ 领域相当极端的新手，但这里是这样。:)

例如，当我在终端中运行此代码时：

```
int g;
cout << "Please enter an integer value: ";
cin >> g;
cout << "The value you entered is " << g; 
```

...对于那里的 C++ 专家来说，显然这接受来自用户输入的值，然后显示在输出中。但是，在我“提交”我的输入并单击 Enter 之后，我只看到了几毫秒的输出，然后终端就关闭了。无论如何，我可以阻止终端关闭，这样我实际上可以有机会看到结果？

我在 Windows 7 上使用 Visual Studio。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:50:48.140

如果你在 Windows 上工作，你可以添加行 system("pause"); 在程序结束时。或者 cin.get() 如果在 Linux 上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:53:24.363

取决于你使用的是什么。对于 Windows，通常使用断点 ( `__debugbreak`)，但对于 Unix，人们通常只在现有终端中运行它，而该终端不会关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:52:41.833

不知道你用的是什么操作系统，但是功能差不多

在 Linux 中启动终端或在 Windows 中启动命令行。使用命令“cd”切换到程序所在的目录。

Linux：

./myProgram

视窗

我的程序

您启动的终端不会关闭；）

# batch-file - 如何使用批处理文件复制特定数据？

> ID：13862173
> 
> 赞同：0
> 
> 时间：2012-12-13T14:41:58.200
> 
> 标签：batch-file, batch-processing

这是数据。

```
mean MP2  rms         :  0.287070 m 
```

我只想`0.287070`

我怎样才能做到这一点？

我尝试了很多命令，但都失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:01:56.737

如果您的数据是由空格分隔的 6 个字段并且没有奇怪的字符，则可以使用以下命令：

```
@echo off
for /f "usebackq tokens=1,2,3,4,5,6 delims= " %%a in ("data.txt") do (
    echo %%e
) 
```

在循环中，每个字段都从`%%a`through中获取一个字母`%%f`。 `%%e`是你想要的数据。例子：

```
C:\batch>get_data.cmd
0.287070
0.387070
0.487070
0.587070 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T14:51:59.823

如果您的所有数据都具有 1 位、1 个点、6 位的模式，您可以 sed ：

```
sed -r 's/.*([0-9]\.[0-9]{6}).*/\1/' file 
```

如果您只想在包含 "mean MP2 rms" 的行中使用此模式：

```
sed -r 's/mean MP2  rms.*([0-9]\.[0-9]{6}).*/\1/' file 
```

# c# - 如何使用 2 构造函数？

> ID：13862174
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:41:58.233
> 
> 标签：c#, class, constructor

我有以下课程：

```
public class STElement
{
  public int _value;
  public STElement _next;
  public int _index;

  public STElement()
  {
    _value = 0;
    _next = null;
    _index = 0;
  }
} 
```

在程序的运行时，我想创建一些像这样的对象：

```
_rootStack1 = new STElement();
_rootStack2 = new STElement();
_rootStack3 = new STElement(); 
```

但我只希望**_rootStack1**有**_index = 0;**

那么我该怎么做，三个对象中只有一个获得_index？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:45:01.333

您可以创建一个构造函数，该构造函数获取索引的值并将其分配给变量。

```
public STElement(int index)
{
  _value = 0;
  _next = null;
  _index = index;
} 
```

这不会强制对象是唯一具有此类`0`索引的对象 - 这不是对象可以直接执行的操作。

`public`注意样式 - 拥有字段不是好习惯。您应该使用属性来公开它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:44:23.733

```
public class STElement
{
  public int _value;
  public STElement _next;
  public int _index;

  public STElement()
  {
    _value = 0;
    _next = null;
    _index = 0;
  }
  public STElement(int index)
      : this()
  {
     _index = index;
  }
}

_rootStack1 = new STElement(1);
_rootStack2 = new STElement(2);
_rootStack3 = new STElement(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:44:56.897

STElement st1 = 新 STElement(1);

```
public class STElement
{
  public int _value;
  public STElement _next;
  public int _index;

  public STElement()
  {
    _value = 0;
    _next = null;
    _index = 0;
  }
  public STElement(int index)
  {
    _value = 0;
    _next = null;
    _index = index;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:46:25.407

为什么不将所需的索引传递给构造函数？

您可以使用默认参数创建构造函数，而不必像这样更改对其进行的其他调用：

```
public STElement(int index = 0)
{
  _value = 0;
  _next = null;
  _index = index;
} 
```

这样，所有未传递索引的实例都将获得默认值，而对于其他实例，您可以指定所需的某个索引。或者你可以反过来做，将默认值设置为不同于 0 的值，并且只有你想要的，你可以调用 index = 0 的构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T14:45:43.910

你可以像方法一样重载构造函数。类似这样：

```
 public STElement()
  {
    _value = 0;
    _next = null;
    _index = 0;
  }

 public STElement(int param1)
  {
    _value = param1;
    _next = null;
    _index = 0;
  }

 public STElement(int param1, int param2):this()
  {
    _value = param1;
    _next = null;
    _index = param2;
  } 
```

...

# sql-server-2008 - Converting Ms -Sql db from Ascii to unicode

> ID：13862184
> 
> 赞同：0
> 
> 时间：2012-12-13T14:42:23.380
> 
> 标签：sql-server-2008, unicode, ascii, type-conversion

My SQL Server 2008 R2 database has string columns (`nvarchar`). And some of the old data is showing Ascii. I need to show it to the user in my site and I prefer to convert the data in the database to Unicode. Is there a quick way to do this? are there downsides that I should be aware of?

Examples to my issue:

*   In the database, I see special chars instead of regulars chars. I have a name of a user which is supposed to be `Amédée`, and instead it shows `Am?d??`.

*   In other cases I see `&#x22;` instead of Quotation mark (`"`), or the chars `&#` instead of the word "and".

# php - SQL DISTINCT 加计数

> ID：13862186
> 
> 赞同：4
> 
> 时间：2012-12-13T14:42:28.503
> 
> 标签：php, sql

我目前有一张表，其中包含专辑名称、艺术家和标题（用于 Mp3）。在左侧的网页上，我目前使用以下方式显示所有专辑名称：

```
SELEC DISTINCT `album` FROM `mp3` 
```

但我想在旁边显示每张专辑的数量，例如：

```
A Very Good Album (3) 
```

表示该记录中有 3 个整数。我可以用 SQL 做到这一点吗？选择 Distinct，但还要找出该专辑有多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:46:25.010

试试这个：

```
SELECT `album`, COUNT(*) FROM `mp3` GROUP BY `album` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:44:07.740

而不是`DISTINCT`，这实际上是一个由 分组的基本[`COUNT()`聚合](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)`album`。

```
SELECT
  album,
  COUNT(*) AS num_records
FROM 
  mp3
GROUP BY album 
```

如果您希望它在*SQL 查询内*的括号中，请使用`CONCAT()`. 不过，这可能最好留给您的应用程序显示。

```
SELECT
  /* The album title, and count in () as one column as a single string */
  /* like "A Very Good Album (3)" */
  CONCAT(album, ' (', COUNT(*), ')') AS album 
FROM
  mp3
GROUP BY album 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:44:07.257

你想要一个`group by`：

```
select album, count(*)
from mp3
group by album 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:45:28.237

使用 group by 并像这样连接字符串

```
SELECT
    CONCAT(`album`, ' (', COUNT(*), ')') as album
FROM `mp3`
GROUP BY `album` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T14:44:17.973

看看[`Count()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_count)和[`Group By`](http://dev.mysql.com/doc/refman/5.5/en/group-by-modifiers.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T14:46:45.760

```
SELECT DISTINCT CONCAT(album, ' (', COUNT(DISTINCT album), ')') AS album
FROM            mp3
GROUP BY        album 
```

# kohana - Kohana 3.3 多语言

> ID：13862191
> 
> 赞同：0
> 
> 时间：2012-12-13T14:42:53.430
> 
> 标签：kohana, multilingual

按照教程@ [http://kerkness.ca/kowiki/doku.php?id=example_of_a_multi-language_website](http://kerkness.ca/kowiki/doku.php?id=example_of_a_multi-language_website)

我需要重写 Request 类，但没有实例方法。

我需要改变什么才能让它在 kohana v3.3 中工作？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:58:52.113

从 Kohana 3.2 开始，Request::instance() 的使用被 Request::$current 取代，因此您应该在 Request 类的顶部编写以下代码：

```
 class Request extends Kohana_Request {

  public static function current( & $uri = TRUE)
  {
     ... 
```

# wpf - WPF DataGridTemplateColumn, bind to generic CellTemplate

> ID：13862193
> 
> 赞同：2
> 
> 时间：2012-12-13T14:42:57.253
> 
> 标签：wpf, datagrid, datatemplate, datagridtemplatecolumn

I'm very new to WPF so sorry if this is obvious but I can't seem to find any decent examples on the internet showing how it's done.

I have a DataGrid which is bound to a collection of DataItem called MyCollection. I want to create a generic DataTemplate that I can use for multiple columns in the grid (and elsewhere in the application should I need it).

E.g.

```
<DataGrid ItemsSource="{Binding MyCollection}" AutoGenerateColumns="False" SelectionUnit="Cell" EnableColumnVirtualization="True">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="File path" CellTemplate="{StaticResource FileSelectorEditorTemplate}" CellEditingTemplate="{StaticResource FileSelectorEditorTemplate}" />
            <DataGridTemplateColumn Header="File path2" CellTemplate="{StaticResource FileSelectorEditorTemplate}" CellEditingTemplate="{StaticResource FileSelectorEditorTemplate}" />
            <DataGridTemplateColumn Header="File path3" CellTemplate="{StaticResource FileSelectorEditorTemplate}" CellEditingTemplate="{StaticResource FileSelectorEditorTemplate}" />
... 
```

My DataTemplate is defined at the moment in my Application resources as

```
<DataTemplate x:Key="FileSelectorEditorTemplate">
        <Grid>
            <TextBox Text="{Binding FilePath.PhysicalPath}" HorizontalAlignment="Stretch" Margin="0,0,35,0" />
            <Button Content="..." Height="25" Width="25" Margin="0,0,5,0" HorizontalAlignment="Right" Click="FileOpen_Click" />
        </Grid>
    </DataTemplate> 
```

Now the problem is that the binding is specified in the DataTemplate, whereas I need to apply a different binding for each of the properties FilePath, FilePath2, FilePath3 on the view model. I don't seem to be able to specify the Binding on the DataGridTemplateColumn though?

I'd appreciate any pointers in the right direction,

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T10:33:21.103

如果您不能使用 Jesper Gaarsdal 的选项，您也可以使用 CellStyle 并在列声明中定义绑定。

例如，请参阅此 SO：[如何重用 WPF DataGridTemplateColumn（包括绑定）](https://stackoverflow.com/questions/11849460/how-to-reuse-wpf-datagridtemplatecolumn-including-binding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:51:10.767

上的绑定`DataGridTemplateColumn`在其`CellTemplate`. 如果您想要三列的不同绑定，我会说您必须`DataTemplate`为每一列设置不同的绑定。可能有一些解决方法，但我怀疑它会很漂亮。

编辑：拥有不同的模板，您可以使用 a`DataTemplateSelector`为当前对象选择正确的模板。

使用 IValueConverter（只是一个简单的草图，但应该可以工作）：

```
<DataTemplate x:Key="GenericTemplate" >
        <TextBlock FontSize="14" >
            <TextBlock.Text>
                <Binding Converter="{StaticResource NewValue}" Path="Me" />
            </TextBlock.Text>
        </TextBlock>
</DataTemplate>

public class NewValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        someContainer obj = value as someContainer;
        if (obj.type == MyType.First)
             return (string)(obj.val1);
        else
             return (string)(obj.val2);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

public enum MyType
{
    First,
    Second
}

public class someContainer
{
    public someContainer Me { get; set; }
    public string val1 { get; set; }
    public string val2 { get; set; }
    public MyType type;

    public someContainer()
    {
        Me = this;
        val1 = "string1";
        val2 = "string2";
    }     
}

...
public ObservableCollection<someContainer> myList {get; set;}
...

<StackPanel Margin="0,10,0,0" Orientation="Vertical" Grid.Column="2">
        <ItemsControl ItemsSource="{Binding MyList}" ItemTemplate="{StaticResource GenericTemplate}" />
    </StackPanel> 
```

# matlab - 向量化日期数组计算

> ID：13862195
> 
> 赞同：3
> 
> 时间：2012-12-13T14:43:04.003
> 
> 标签：matlab, date

我只是想生成一系列距今天 1 年的日期。

我试过这个

```
CurveLength=30;
t=zeros(CurveLength);

t(1)=datestr(today);

x=2:CurveLength-1;
t=addtodate(t(1),x,'year'); 
```

到目前为止我收到两个错误？

？？？在赋值 A(I) = B 中，B 和我猜测的元素数量与日期是字符串这一事实有关，但是当我将字符串修改为与日期 dd-mmm 相同的长度时-yyyy 即 11 个字母我仍然得到同样的错误。

我得到了错误

？？？在 45 处使用 ==> addtodate 时出错 数量必须是数字标量。

这似乎表明该函数不能被矢量化？如果这是真的，是否可以提前告知哪些函数可以向量化，哪些不能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:03:01.713

要将`n`年份添加到 date `x`，请执行以下操作：

```
y = addtodate(x, n, 'year'); 
```

但是，[`addtodate`](http://www.mathworks.com/help/matlab/ref/addtodate.html)需要以下内容：

1.  `x`必须是标量数字，而不是字符串。
2.  `n`必须是标量数，而不是向量。

因此你得到的错误。

我建议您使用循环来执行此操作：

```
CurveLength = 30;
t = zeros(CurveLength, 1);
t(1) = today; % # Whatever today equals to...
for ii = 2:CurveLength
    t(ii) = addtodate(t(1), ii - 1, 'year');
end 
```

现在您已经拥有了所有日期值，您可以使用以下命令将其转换为字符串：

```
datestr(t); 
```

这是一个简洁的单线使用[`arrayfun`](http://www.mathworks.com/help/matlab/ref/addtodate.html);

```
datestr(arrayfun(@(n)addtodate(today, n, 'year'), 0:CurveLength)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:40:21.017

如果您的序列有一个恒定的已知开始，您可以通过以下方式使用 datenum：

```
t = datenum( startYear:endYear, 1, 1) 
```

只要序列不遇到负数（如 1:-1:-10），这也适用于月、日、小时等。然后几个月和几天以非标准方式表现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T11:59:42.747

这是一个没有循环的解决方案（可能更快）：

```
CurveLength=30;
t=datevec(repmat(now(),CurveLength,1));
x=[0:CurveLength-1]';
t(:,1)=t(:,1)+x;
t=datestr(t) 
```

datevec 将日期分成六列 [年、月、日、小时、分钟、秒]。因此，如果您想更改例如年份，您可以添加或减去它。

如果您想更改月份，只需添加到 t(:,2)。您甚至可以将 > 12 的数字添加到月份，如果您将其转移回 datenum 或 datestr，它将正确增加年份和月份。

# python - XML data retrieved from urlopen replaces "<" and ">" with ";"

> ID：13862197
> 
> 赞同：0
> 
> 时间：2012-12-13T14:43:05.927
> 
> 标签：python, xml

I am retrieving data from a url as:

`data = urllib2.urlopen(url).read()`

However, I noticed that there are no tags. This was because the "<" and ">" were replaced by ";" character. Everything else is intact. So:

`<foo>bar</foo>` is changed to `;foo;bar;/foo;`

How can I fix this and why is it happening?

[EDIT]: I found out how to fix it. Apparently, it was replacing '<' with '&lt' and '>' with '&gt'. I guess the short forms of the signs. I still don't know why this is happening. I guess some bug in the webservice/API.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:00:08.160

我刚刚跑了这个：

```
 import urllib2

    url='http://www.google.com'
    data = urllib2.urlopen(url).read()
    print data 
```

我得到很多 < 和 >，包括最后一行`</script></body></html>`

您能否发布更多详细信息，例如您尝试访问的 url 和 的值`data`？

# salesforce - Salesforce：如何使用 java 为 Goelocation 数据类型字段插入值？

> ID：13862200
> 
> 赞同：1
> 
> 时间：2012-12-13T14:43:09.697
> 
> 标签：salesforce, force.com

我正在使用 REST API 将对象插入 Salesforce。我有一个具有地理位置数据类型的字段。如何使用 java 向该字段插入值？我的示例代码如下。

parishud.put("gps__c",?????);

有两个字段要插入（gps（纬度）gps（经度））但在API中我发现只有一个名称为gps__c的字段

```
 HttpClient client = new httpclient.HttpClient();
  JSONObject parishud = new JSONObject();
  try {
      parishud.put("Name","ParishudhTest4");
      parishud.put("entitled__c","Yes");

      parishud.put("Comments__c","Comments");
      parishud.put("fallill_count_after__c","5");
      parishud.put("fallill_count_before__c","7");
      parishud.put("influencedcount__c","8");
      parishud.put("toiletusaseperday__c","3");
      parishud.put("parishudhid__c","002");
      parishud.put("Received_NBA_Incentive__c","Yes");
      parishud.put("Received_NREGA_Incentive__c","Yes");

      //parishud.put("gps__c",?????);

    PostMethod postaccount = new PostMethod("https://ap1.salesforce.com/services/data/v20.0/sobjects/Parishudh__c/");
    postaccount.setRequestHeader("Authorization", "OAuth " + accessToken);
    postaccount.setRequestEntity(new StringRequestEntity(parishud.toString(),"application/json", null));
    client.executeMethod(postaccount); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:20:52.910

Geolocation 字段实际上由 3 个字段组成，其中 2 个可供我们访问。

如果您的字段名称是，`gps`那么您可以将数据存储在`gps__Latitude__s`and中`gps__Longitude__s`（注意开头的双下划线，就像它是一个托管包，结尾是“s”，而不是“c”）。

确保您为 Java 集成用户设置了配置文件级别的安全性，以便能够访问此字段。

如果您需要代码示例 - 您可以查看我的答案[如何将 Salesforce 与 Google 地图集成？](https://stackoverflow.com/q/3122038/313628)或例如[http://blog.internetcreations.com/2012/09/creating-a-geolocation-trigger-in-salesforce-winter-13/](http://blog.internetcreations.com/2012/09/creating-a-geolocation-trigger-in-salesforce-winter-13/)

# mysql - Index setup for Search Attribute table in MySQL database

> ID：13862202
> 
> 赞同：0
> 
> 时间：2012-12-13T14:43:14.843
> 
> 标签：mysql, indexing

I have a database that has many tables. In this database, there are a subset of tables that store information for similar (but distinct) rows of data, and one table that contains common search attributes that can be applied to each table.

There are 18 columns of searchable variables, and I'm not sure which is the best way to set up the indexes. Do I create a single `Index` for all the pertinent columns, or one `Index` for each one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:04:29.210

因为你不能使用 SOLR 或类似的。
您需要使用 MySQL 来模拟这一点。
为此，您创建一个表，您将所有其他表反规范化到其中。请注意，此表不会替换其他表。把它当作一个视图。
举个简单的例子。我有一个产品，该产品可以有多种颜色代码。
规范化要求我有 3 个表。一张用于产品，一张用于颜色（名称|代码），一张用于链接它们的表格。

将其非规范化为一张表：产品代码（pk）|名称| 颜色代码 1|颜色名称 1| 颜色代码 2 | 颜色名称 2 ..... 不，我相信您很容易决定索引什么（实际上基于您在该表上执行的查询）。

显然它不是最佳的，但是，你需要玩你拥有的玩具。

其他需要考虑的**非常**相似的东西是使用星型模式

# database - 为什么要在数据库中拥有多个表？

> ID：13862205
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:43:23.383
> 
> 标签：database, database-design

我有一个公平的理解，但我想从有更多经验的人那里听到。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:56:14.827

我给你一个简单的例子，假设你有如下员工表 EmpId Name Adress 1 A1 Olaf Vei 2 A2 Rosenhoff 3 A3 Olaf vei

现在emp 1 和3 具有相同的地址。假设如果您觉得地址错误并且想要更新地址，那么您必须使用 update 语句来更改这些 emp 的地址。相反，如果您有地址的外键，那么您可以只记录该记录，并将自动为两名员工完成。

拥有关系数据库让生活更轻松。希望你满意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:45:59.193

[在此处](http://en.wikipedia.org/wiki/Relational_database)阅读有关关系数据库模型的概念。

[或者简而言之](http://databasemanagement.wikia.com/wiki/Relational_Database_Model)...

关系数据库允许定义数据结构、存储和检索操作以及完整性约束。在这样的数据库中，数据和它们之间的关系被组织成表格。表是记录的集合，表中的每条记录都包含相同的字段。[1](http://en.wikipedia.org/wiki/Relational_database) 表格的内容可以永久保存以备将来使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:46:31.543

拥有关系数据库真的很有帮助。如果您只有一张表，那么插入记录将非常困难。尽管如果您只有 1 个表，搜索会更快，因为这样您就可以避免连接。这取决于您的数据库结构有多复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:49:27.563

以可扩展、可维护、结构化的方式存储数据。

看这个：[普通英语的标准化](https://stackoverflow.com/questions/2331838/normalization-in-plain-english)

而且，我相信如果您知道为什么 RDBMS 比平面文件更受欢迎。同样的答案也适用于您的问题。

[数据库与平面文件](https://stackoverflow.com/questions/2356851/database-vs-flat-files)

# javascript - 随机选择所有表单字段值并填写表单 - JS 或 jQuery - 不确定哪个

> ID：13862209
> 
> 赞同：1
> 
> 时间：2012-12-13T14:43:33.027
> 
> 标签：javascript, jquery, forms, random

我有一个表格，为了测试，我想要一个按钮来自动填写每个组中的所有字段，对于复选框和收音机，只需从每个组类型交易中随机选择一个。大多数表格都非常大，出于测试目的，一直选择项目变得很痛苦。

表格的一个例子是：

```
<div class="rows"><b>Education</b><br>
<select name="edu" id="edu" validate="required:true"><option value="">Select One</option>
<option value="Some High School">Some High School</option>
<option value="High School graduate">High School graduate</option>
<option value="Some college">Some college</option>
<option value="College graduate">College graduate</option>
<option value="Master’s degree">Master’s degree</option>
<option value="Doctorate">Doctorate</option>
</select></div>

<div class="rows"><b>Payor status</b><br>
<select name="payor" id="payor" validate="required:true"><option value="">Select One</option>
<option value="Medicare/Medicaid">Medicare/Medicaid</option>
<option value="Insurance">Insurance</option>
<option value="Self Pay">Self Pay</option>
</select></div><br>

<div class="rows"><b>I am a physician.</b><br>
<input type="hidden" name="type33-8" value="YN">
<label><input type="radio" name="33-8" id="33Y" value="Yes" validate="required:true"> Yes</label> 
<label><input type="radio" name="33-8" id="33N" value="No"> No</label><br>
<label for="33-8" class="error">Please select an option</label></div><b>This doctor:</b><br>
<input type="hidden" name="type34" value="6PMultiple">

<div class="rows"><label>1\.     Appears sincere.</label><br>
<input type="hidden" name="type34-247" value="6PMultiple">
<label><input type="radio" name="34-247" id="341" value="1" validate="required:true" > 1 - Very Strongly Disagree</label> 
<label><input type="radio" name="34-247" id="342" value="2" > 2 -  Strongly Disagree</label> 
<label><input type="radio" name="34-247" id="343" value="3" > 3 -  Disagree</label> 
<label><input type="radio" name="34-247" id="344" value="4" > 4 -  Agree</label> 
<label><input type="radio" name="34-247" id="345" value="5" > 5 -  Strongly Agree</label> 
<label><input type="radio" name="34-247" id="346" value="6" > 6 -  Very Strongly Agree</label></div>

<div class="rows"><label>2\.     Is professional.</label><br>
<input type="hidden" name="type34-248" value="6PMultiple">
<label><input type="radio" name="34-248" id="341" value="1" validate="required:true" > 1 - Very Strongly Disagree</label> 
<label><input type="radio" name="34-248" id="342" value="2" > 2 -  Strongly Disagree</label> 
<label><input type="radio" name="34-248" id="343" value="3" > 3 -  Disagree</label> 
<label><input type="radio" name="34-248" id="344" value="4" > 4 -  Agree</label> 
<label><input type="radio" name="34-248" id="345" value="5" > 5 -  Strongly Agree</label> 
<label><input type="radio" name="34-248" id="346" value="6" > 6 -  Very Strongly Agree</label></div>

<div class="rows"><label>3\.     Speaks clearly.</label><br>
<input type="hidden" name="type34-249" value="6PMultiple">
<label><input type="radio" name="34-249" id="341" value="1" validate="required:true" > 1 - Very Strongly Disagree</label> 
<label><input type="radio" name="34-249" id="342" value="2" > 2 -  Strongly Disagree</label> 
<label><input type="radio" name="34-249" id="343" value="3" > 3 -  Disagree</label> 
<label><input type="radio" name="34-249" id="344" value="4" > 4 -  Agree</label> 
<label><input type="radio" name="34-249" id="345" value="5" > 5 -  Strongly Agree</label> 
<label><input type="radio" name="34-249" id="346" value="6" > 6 -  Very Strongly Agree</label></div> 
```

我曾想过遍历所有表单元素：

```
for ( var i=0; i < document.form1.elements.length; i++ ) {
    if ( document.form1.elements[i].type == "radio" ) {
        //Something
    }
} 
```

我的问题是遍历每个元素，这将适用于选择下拉菜单（尽管不确定如何在那里随机选择一个下拉菜单选项），但这不适用于收音机的名称组。

我曾认为，为了选择下拉选项，我可以运行这个：

```
Math.random() * (max - min) + min 
```

在获得选项计数以使用返回的整数随机选择一个之后，我不知道这是否可行，因为我没有测试它，因为我被困在无线电问题上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:56:25.673

对于单选按钮，您可以遍历“行”div并从那里获取子单选按钮：

```
$("div.rows").each(function () {
    var radios = $(this).find("input[type=radio]");
    if (radios.length > 0) {
        var randomnumber = Math.floor(Math.random() * radios.length);
        radios[randomnumber].checked = true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:07:56.477

不幸的是，jQuery 免费版本要复杂一些。例如，您可以将所有收音机组合在一起，然后从它们中随机选择。[查看我在 JSFiddle 上的示例](http://jsfiddle.net/8ZubK/)

这也是一个比 Reinder 更通用的版本。它适用于任何类型的 HTML。

JS代码：

```
var radios = {};
var radionames = [];

var tmpname;
for ( var i=0; i < document.form1.elements.length; i++ ) {
    if ( document.form1.elements[i].type == "radio" ) {
        tmpname = document.form1.elements[i].name;
        if (! radios[tmpname]) {
            radios[tmpname] = [];
            radionames.push(tmpname);
        }
        radios[tmpname].push(i);
    }
}

var idx; 
for (var i=0; i < radionames.length; i++) {
    tmpname = radionames[i];
    idx = Math.floor(Math.random()*(radios[tmpname].length - 1));
    document.form1.elements[radios[tmpname][idx]].checked=true;
} 
```

​附带说明，您的 HTML 无效，元素 ID 必须始终是唯一标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:06:47.570

这是我为你想出的一些 jQuery：

```
$(function() {
    var radio_questions = $('div.rows');
    radio_questions.each(function() {
        var num_choices = $(this).find('input').length;
        var rand = getRandomIndex(1, num_choices - 1);
        $(this).find('input[value="' + rand + '"]').attr('checked', 'checked');
    });
});

function getRandomIndex(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

示例：http: [//jsfiddle.net/w3GdT/7/](http://jsfiddle.net/w3GdT/7/)

# spring-aop - 使用 Spring @Configuration 和 MethodInterceptor 拦截带注释的方法

> ID：13862216
> 
> 赞同：5
> 
> 时间：2012-12-13T14:43:52.997
> 
> 标签：spring-aop, aopalliance

我需要使用 spring-aop 拦截带注释的方法。我已经有了拦截器，它实现了 AOP 联盟的 MethodInterceptor。

这是代码：

```
@Configuration
public class MyConfiguration {

    // ...

    @Bean
    public MyInterceptor myInterceptor() {
      return new MyInterceptor();
    }
} 
```

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
    // ...
} 
```

```
public class MyInterceptor implements MethodInterceptor {

    // ...

    @Override
    public Object invoke(final MethodInvocation invocation) throws Throwable {
        //does some stuff
    }
} 
```

从我一直在阅读的内容来看，我可以使用@SpringAdvice 注释来指定拦截器何时应该拦截某些东西，但它不再存在。

谁能帮我？

非常感谢！

卢卡斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-19T06:11:07.007

`MethodInterceptor`可以通过注册一个`Advisor`bean来调用，如下所示。

```
@Configurable
@ComponentScan("com.package.to.scan")
public class AopAllianceApplicationContext {    

    @Bean
    public Advisor advisor() {
       AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();    
       pointcut.setExpression("@annotation(com.package.annotation.MyAnnotation)");
       return new DefaultPointcutAdvisor(pointcut, new MyInterceptor());
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:59:33.720

万一有人对此感兴趣……显然这是做不到的。为了单独使用 Java（而不是 XML 类），您需要使用带有 @aspect 注释的 AspectJ 和 Spring。

代码是这样结束的：

```
@Aspect
public class MyInterceptor {

    @Pointcut(value = "execution(* *(..))")
    public void anyMethod() {
       // Pointcut for intercepting ANY method.
    }

    @Around("anyMethod() && @annotation(myAnnotation)")
    public Object invoke(final ProceedingJoinPoint pjp, final MyAnnotation myAnnotation) throws Throwable {
        //does some stuff
        ...
    }
} 
```

如果其他人发现了不同的东西，请随时发布！

问候，

卢卡斯

# c# - asp.net, use a server cert to make httpwebrequest C#

> ID：13862222
> 
> 赞同：2
> 
> 时间：2012-12-13T14:44:10.010
> 
> 标签：c#, asp.net, https, iis-6, certificate

Sorry this is my first post and I'll try and be as descriptive as possible...

I am having an issue converting an HTTPWebRequest to reach an HTTPS website that requires a certificate. On my local dev machine I can create the web request to the site by using my client certificate from my CAC card using a CAC card reader. My problem arises when I have to push this code to our dev/prod server to access this site. I cant read my CAC card when I am on the server but I do have a server cert that I can use that is on our IIS 6.0.

Can you get the client's CAC card cert on the server? Is there a store to look from? Or is there a server store to look from?

I dont know the steps to using this server cert, whether I have to code this or work with my IIS Server Manager to enable it. This is my code on my local dev machine that is working. I added the ServerCertficateValidationCallback to test on the dev server.

```
 protected void Page_Load(object sender, EventArgs e)
   { 
        ServicePointManager.ServerCertificateValidationCallback += new System.Net.Security.RemoteCertificateValidationCallback(ValidateServerCertificate);

        ServicePointManager.MaxServicePointIdleTime = 300000;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://url");
        request.Accept = "text/xml, */*";
        request.Method = "GET";
        request.Headers.Add(HttpRequestHeader.AcceptLanguage, "en-us");
        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; .NET CLR 3.5.30729;)";
        request.AutomaticDecompression = DecompressionMethods.Deflate | DecompressionMethods.GZip;
        request.Credentials = CredentialCache.DefaultCredentials;
        request.KeepAlive = false;

        X509Certificate myCert = null;
        X509Store store = new X509Store("My");

        store.Open(OpenFlags.ReadOnly);

        int i = 0;
        foreach (X509Certificate2 m in store.Certificates)
        {
             if (i == 0)
                myCert = m;
             i++;
        }

        if (myCert != null)
        {
             request.ClientCertificates.Add(myCert);
        }

        //take the response and create the xml document to parse
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string str = reader.ReadToEnd();

        ...
        }

        public static bool ValidateServerCertificate(object sender, X509Certificate certificate,X509Chain chain, SslPolicyErrors sslPolicyErrors)
        {
            //certificate is in here
            if (sslPolicyErrors == SslPolicyErrors.None)
               return true;

            sslPE = "SSLPolicyErros: " + sslPolicyErrors;

            return false;
        } 
```

Is anyone familiar with the process, for deployment, to use that server cert that is trusted by the web site im sending a request to? I want all users who access this site from our site ( our site requires CAC authentication ) to use the server cert. Unless someone has a better idea of using the users client certificate from their CAC card. I am having trouble putting this all together and any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T21:07:04.317

您的 (CAC) 证书的根 ca（颁发者）必须受您的服务器信任。将根 ca 证书添加到服务器的 windows 证书存储的受信任的根证书颁发机构部分，然后重新启动 iis。

# dynamics-crm - MS CRM showModalDialog Access denied

> ID：13862232
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:44:32.027
> 
> 标签：dynamics-crm, lookup

i have a website. If i click a button, a crm lookup should be opened. This works very well for my testuser, but if i login to another user, i get a "Access denied" error.

Does anyone have an idea?

best regards alex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:49:12.720

好的，我修好了。解决方案：

我在 crm 和 showmodaldialog 中单击按钮打开我的自定义网站。现在我将 crm 的文档对象作为 ShowModalDialog 的参数。

在我的自定义网站中，我打开查找

```
window.dialogArguments.parentWindow.LookupObjects(null, "single", 8, 0, null, "", null, null, null, null, null, null, id); 
```

现在它可以在没有访问被拒绝错误的情况下工作

# opengl - 使用 gluLookAt() 的 OpenGL FPS 相机

> ID：13862246
> 
> 赞同：3
> 
> 时间：2012-12-13T14:45:10.507
> 
> 标签：opengl, camera, glut, glulookat

所以，我正在尝试创建一个 FPS 风格的相机来探索我的场景，它似乎工作正常。目前无法改变摄像机的俯仰角。我正在尝试创建一个函数，允许我将相机设置为一些预定义的视点，但是在使用 setPosition() 函数将相机设置为新视点后尝试旋转相机时，我遇到的不是位置而是方向的跳跃第一次按下旋转按钮时。

这是我的相机类实现。

```
Camera::Camera(void)
{
    angleX = 0.0;
    angleY = 0.0;
    directionX = 0.0;
    directionZ = -5.0;
    directionY = 0.0;
    xPos = 0.0;
    zPos = 1.0;
    yPos = 2.0;
}

void Camera::setPosition(float xDir, float yDir, float zDir, float posX, float posZ, float posY)
{
    directionX = xDir;
    directionZ = zDir;
    directionY = yDir;
    xPos = posX;
    zPos = posZ;
    yPos = posY;
}

Camera::~Camera(void)
{
} 
```

以下是我的特殊按键回调函数，省略了相机移动以外的功能。

```
void specialKeys(int key, int xx, int yy)
{
    float fraction = 0.3f;

    switch(key)
    {
        // Camera Controls
        case GLUT_KEY_LEFT:
            camera.angleY -= 0.05f;
            camera.directionX = sin(camera.angleY);
            camera.directionZ = -cos(camera.angleY);
            break;
        case GLUT_KEY_RIGHT:
            camera.angleY += 0.05f;
            camera.directionX = sin(camera.angleY);
            camera.directionZ = -cos(camera.angleY);
            break;
        case GLUT_KEY_UP:
            camera.xPos += camera.directionX * fraction;
            camera.zPos += camera.directionZ * fraction;
            camera.yPos += camera.directionY * fraction;
            break;
        case GLUT_KEY_DOWN:
            camera.xPos -= camera.directionX * fraction;
            camera.zPos -= camera.directionZ * fraction;
            camera.yPos -= camera.directionY * fraction;
            break;
       }
} 
```

然后显示回调函数使用 gluLookAt 具有以下代码：

```
glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(camera.xPos, camera.yPos, camera.zPos, camera.xPos+camera.directionX, camera.yPos+camera.directionY, camera.zPos+camera.directionZ, 0, 1, 0); 
```

我不明白为什么我会遇到这个问题。我相信这与设置相机和用于旋转它的数学之间的相互作用有关。谁能看到如何防止这种方向跳跃？

我在一个键盘回调函数中设置相机位置，代码如下：

```
 if(key == '1') // Default View
        camera = Camera();
    if(key == '2') // Ferris Wheel View
        camera.setPosition(-0.8, 0.0, -0.6, 3.6, 3.6, 6.5);
    if(key == '3') // Fountain Water View
        camera.setPosition(0.9, 0.0, -0.4, -0.59, -6.4, 0.6); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:27:28.660

跳转是因为您如何初始化 directionZ 变量，请查看：

```
 angleX = 0.0;
   angleY = 0.0;
   directionX = 0.0;
   directionZ = -5.0;
   directionY = 0.0; 
```

但稍后您将 directionX 和 directionZ 定义为：

```
camera.directionX = sin(camera.angleY);
camera.directionZ = -cos(camera.angleY); 
```

cos 以区间 [-1, 1] 为界，由于 angleY 为 0.0f，directionZ 将设置为 -1。如果您将初始化代码更改为设置`directionZ = -1.0;`，您应该摆脱跳转。

不要明确设定方向。这是一个设置角度并从该角度计算方向的示例：

```
void Camera::setPosition(float angle, float posX, float posZ, float posY)
{
    xPos = posX;
    zPos = posZ;
    yPos = posY;

    //compute instead of set based on angle
    angleY = angle;
    camera.directionX = sin(angleY);
    camera.directionZ = -cos(angleY);
} 
```

# openerp - OpenERP Jasper 报告

> ID：13862249
> 
> 赞同：3
> 
> 时间：2012-12-13T14:45:43.610
> 
> 标签：openerp

放弃 Syleam 的 openerp jasper 模块后，我正在努力使用 Nan Tic 的 jasper_reports 模块。

它一直给我一个错误：

```
File "C:\Program Files (x86)\OpenERP 6.1\Source\openerp-6.1-latest\openerp-6.1-20121113-003313\openerp\addons\jasper_reports\jasper_report.py", line 39, in <module>

from JasperReports import *

ImportError: No module named JasperReports 
```

我假设它正在寻找这个名称的 java 库。我下载了java文件夹下的所有文件并设置了CLASSPATH。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:48:27.420

我怀疑您要么没有所有文件，要么没有将它们放在正确的位置。查看代码存储库，我看到了几个文件夹，其中之一是 JasperReports。这似乎是您的安装中缺少的内容。

从[网页](http://bazaar.launchpad.net/~jasper-reports-commiters/openobject-jasper-reports/jasper-reports-6.1/files/head:/jasper_reports/)：

```
-- jasper_reports
 |
 +-- 自定义报告
 |
 +-- 演示
 |
 +-- 文档
 |
 +-- i18n
 |
 +-- 贾斯珀报告
 | |
 | |-- __init__.py
 | |
 | |-- 抽象数据生成器.py
 | |
 | |-- 浏览数据生成器.py
 | |
 | |-- 贾斯珀报告.py
 | |
 | |-- 贾斯珀服务器.py
 | |
 | |-- 记录数据生成器.py
 |
 +-- 爪哇
 |
 +-- 报告
 |
 +-- 安全
 |
 +-- 向导
 |
 |-- __init__.py
 |
 |-- __openerp__.py
 |
 |-- http_server.py
 |
 |-- jasper_demo.xml
 |
 |-- jasper_report.py
 |
 |-- jasper_wizard.xml
 |
 |-- 报告xml.py
 |
 |-- report_xml_view.xml

```

如您所见，下面的第五个文件夹是`JasperReports`，这似乎是您的安装中缺少的。

# javascript - 单击子关闭按钮时在父窗口中调用函数

> ID：13862255
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:45:49.243
> 
> 标签：javascript, jquery

我有一个要求，当单击子窗口关闭按钮时，我需要调用父页面函数。

如何在 jQuery 或 JavaScript 中做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:24:59.250

我发现这样做的唯一可靠的跨浏览器跨域解决方案是从父级轮询子级的 window.close 属性：

```
setTimeout(function() {  
    if(child.closed)
    { 
        functionToBeCalledWhenClosed();
        return;
    }
    setTimeout(arguments.callee, 0);
}, 0); 
```

您可以在应用程序中使用您可以接受的任何间隔，而不是 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:09:34.367

您可能必须使用[onunload](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)功能。像这样

`window.onunload = function (e) { window.parent.functonToCallonThisWindowCloses(); };`.

所以当子窗口关闭时调用父函数。

# java - Java让一个线程更新一个变量

> ID：13862256
> 
> 赞同：0
> 
> 时间：2012-12-13T14:45:50.690
> 
> 标签：java, multithreading

我想要一个线程来更新其他类中的变量。

说，我有一个整数和一个线程类，它有一个 Socket 获取一个值，我希望将该值设置为我的整数。

我有一个名为 direction 的枚举，它的值是 UP,DOWN 我有一个主类，它有一个方向变量在那个主类中，我正在启动一个线程，其中有一个套接字，线程看起来像：

```
import java.io.DataInputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class Server extends Thread {
    private ServerSocket serverSocket;
    DataInputStream in;
    volatile direction dir;
    public Server(int port,direction d) throws IOException {
        serverSocket = new ServerSocket(port);
        Socket server = serverSocket.accept();
        in = new DataInputStream(server.getInputStream());
        dir=d;
    }
    public void run() {
        int recieved;
        while (true) {
            try {
                recieved = in.readInt();
                while (recieved != -1) {
                    dir = direction.fromInt(recieved);
                    recieved = in.readInt();
                    System.out.println(dir);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    public direction getDirection() {
        return dir;
    }

} 
```

我希望主类中的方向变量从线程类更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:47:34.767

```
Socket socket = new Socket("myhost", myport);
DataInputStream dis = new DataInputStream(socket.getInputStream());
// read your value
int val = dis.readInt();
myClass.setValue(val); 
```

在您的班级中，使用易失整数。

```
private volatile int value;

public void setValue(int val)
{
    value = val;
} 
```

确保线程具有指向您的类实例的指针。例如，使用构造函数执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:06:55.130

根据您发布的代码，您实际上不需要做任何事情，只需读取变量（因为它在服务器中是易失的）：

```
Server server = new Server(...);
server.start();

//when you need it:

Direction dir = server.getDirection(); 
```

* * *

现在，如果您的问题是：我可以主要获取`dir`Server 对象的各种值，您可以使用`BlockingQueue`例如来处理通信。在您的 Server 类中，声明队列（并删除`dir`成员）：

```
private BlockingQueue<Direction> queue = new LinkedBlockingQueue<Direction> (); 
```

然后在你的运行方法中：

```
Direction dir = Direction.fromInt(recieved);
queue.put(dir); 
```

并且您的`getDirection`方法可以重命名`getNextDirection`：

```
public Direction getNextDirection() throws InterruptedException {
    queue.take();
} 
```

你的主要可能看起来像这样：

```
while (true) {
    Direction nextDirection = server.getNextDirection()
    //do something with the new direction
} 
```

注意：我已重命名您的枚举`Direction`，而不是`direction`尊重 Java 命名约定。

# ruby-on-rails - Wordpress 可以被 Django 或 Ruby on Rails 之类的框架取代吗？

> ID：13862257
> 
> 赞同：61
> 
> 时间：2012-12-13T14:45:53.343
> 
> 标签：ruby-on-rails, django, wordpress, frameworks, wordpress-theming

我认为自己是一名训练有素的 WordPress 模板开发人员，最近我开始阅读有关 Web 应用程序框架的书籍和文档，尤其是 Django 和 Ruby on Rails。我不知道这两种语言中的任何一种，但学习另外一两种语言我没有问题。我真的没有得到使用框架的真正好处，因为我对 WordPress 的力量非常有信心。那么，谁能告诉我使用框架的真正好处？例如，Pinterest 是使用 Django 制作的，但我认为我可以通过使用 Javascript 和 CSS3 的 WordPress 模板实现相同的结果。谁能告诉我在这种特殊情况下使用框架的区别/好处？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-12-13T14:56:04.777

您可以使用 Wordpress 实现相同的前端，但您无法实现的是基于更面向应用程序架构的应用程序的速度和规模——最重要的是可维护性。

Wordpress 非常灵活，但速度也很慢，并且需要大量的 TLC 才能在任何类型的显着规模上运行。它的设计允许对行为进行非常灵活的运行时修改，但这也有点像潘多拉魔盒，因为这意味着代码最终可以在任何给定页面的任何地方运行，这使得维护成为一场噩梦。

Wordpress 非常擅长成为 CMS，但是一旦你开始将它推到这些界限之外，你就会遇到麻烦，并且发现自己必须编写自己的更抽象的框架，在 Wordpress 的上下文中运行才能实现您的应用程序的需求。

也就是说，如果您有一个可以在 Wordpress 上下文中构建的应用程序，我会说去吧！Wordpress 可以成为构建概念验证或 MVP 的绝佳工具。如果它能让你启动并运行，那么它可能是编写完整应用程序的正确选择。但是，请注意，随着产品设计的成熟和受众的增长，您将遇到一些困难，除非您的应用程序符合相当狭窄的设计要求，所以从长远来看，您可能会发现自己不得不搬家到自定义应用程序。

凭据：在过去的几年里，我一直在维护一个每月提供超过 2500 万个独立用户的 Wordpress 安装，我们必须非常聪明地保持它的运行。此后，我们将其替换为 Rails 应用程序，该应用程序为页面提供大约 10 到 30 倍的速度，并且作为应用程序的可扩展性显着提高，使我们能够开始探索 Wordpress 真正无法获得的应用程序潜力。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-04-05T16:13:50.277

我曾经在一些初创公司工作时做出决定，选择**WordPress**作为一个先进的电子商务、社区驱动的市场。

**这是一个糟糕的决定**

这就是我的感受：

[![在此处输入图像描述](../Images/46f07a49574174de738b85b96c843fbd.png)](https://i.stack.imgur.com/AF1uk.jpg)

一开始，它看起来不错——你有一个很棒的社区，所有东西都有插件等等。但迟早我碰壁了——**从根本上说——WordPress 是一个博客平台**！

*   从技术上讲，每条内容都是`post`.
*   建立高级物品关系真的很难
*   功能不一致。有些功能以一种方式工作，而另一些看起来非常相似的功能却以不同的方式工作。有时你需要一些奇怪的技巧来完成看似简单的任务。它使您经常阅读文档以了解您第 1000 次使用的功能是如何工作的。（不过，老实说，我不得不说 WordPress 文档很棒！）

WordPress 社区做得很好，但与任何常规框架相比，有一个主要区别 -**框架只是框架**- 它们是**一组工具**，这些工具可以帮助您完成**项目**。WordPress 已经在尝试成为您可能会改变的东西。

我永远不会再将 WordPress 用于任何需要有组织的自定义功能的东西。

实际上，人们使用 wordpress 创建的东西给我留下了深刻的印象 - 所以如果你愿意，这是可能的，祝你好运！

然而，这通常感觉就像买一辆卡车并将其重建为一所房子。有更好的方法来建造房子。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-25T19:43:58.107

即使我赞成最高答案，我也想提出不同意见。

**Rails 真的很特别吗？**

Rails 由 David Hansson 创建，他从 Basecamp 中提取了它，该软件在免费的 Wordpress 插件[WP Project Manager](http://wordpress.org/plugins/wedevs-project-manager/)中复制。我认为这是一个很好的指标，表明 Rails 开发人员低估了 PHP 和 Wordpress。

**MVC 和 WP**

没错，它不遵循 MVC 模式。但是，如果您使用[hooks](http://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters)，将逻辑（在插件中）与视图（在模板中）分开，那么您将有很好的代码分离。（另外提示：自定义帖子类型就像模型。）

**框架与应用程序**

如您所见，Wordpress 可以被视为应用程序或框架。它是一个应用程序，包含您希望在框架中找到的所有组件。开箱即用，您拥有安全性、身份验证和可扩展性。它的目的是扩展。

**缩放**

WP 为 18% 的互联网网站提供支持，包括 TechCrunch、Smashing Magazine 和（部分）CNN。似乎有办法使 WP 规模化。 *免责声明：我没有在这样的大型网站上工作的经验，所以我只是提供猜测。*

**WP未来**

WP 社区目前的目标是将 WP 从 CMS 转变为框架。考虑到所有部件都已到位，我认为这是一个自然的进展。WordPress 社区正在变得强大。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-13T14:52:52.133

不是真正的答案，而是提示：

[http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks)

好像你可以完全替换它......我认为这主要是一个逻辑流程的问题。这取决于您打算执行多少命令式（Ruby on Rails）与描述性（WordPress）编程。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-13T14:56:28.053

我不认为 wordpress 可以取代 rails，因为当你将它与 RoR 进行比较时，wordpress 的 API 和支持集是有限的。虽然 wordpress 是博客应用程序的强大工具，但使用 Radiant CMS、Refinery CMS、Locomotive 等 gem 可以使用 rails 来实现相同的效果。添加 ttd 之类的功能可以通过 rails 轻松完成，但使用 wordpress 非常困难。

与 devise 和 cancan 等身份验证和授权机制相同。使用 wordpress 做同样的事情没有简单的选择。

Rails 使程序员的生活更轻松。对于整个 web 应用程序，我总是更喜欢使用 rails。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-29T05:21:18.263

Wordpress 无法替代 X 框架，但两者当然可以相得益彰。

例如，提供具有吸引力主题的 CMS 内容的 WP 前端很难被击败；代理到后端服务器以获取自定义内容，瞧，两全其美。否则，WP 将不可避免地无法满足所有要求，您会发现自己掉进了方钉圆孔兔子洞，真是一个痛苦的地方；这就是 X 框架的用武之地，填补了 WP 的空白。

WP 无法扩展的概念可能有一定的道理，但对于一般情况下，95% 的情况下，它会处理你扔给它的任何东西，特别是使用 WP Cache 或其他混合缓存插件。

有人可能会说，好吧，您可以使用 Django 或 RoR 构建 WP！嘿嘿，你先;-)

FWIW，我避免使用动态语言框架来支持静态/强类型的对应物。使用 WP 进行炫耀，使用静态 X 框架来提高速度/可扩展性/安全性。当然，这是一个偏好问题，显然有些人更喜欢运行时灵活性而不是编译时安全性。这些天我完全在后一个阵营......

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-01-14T19:07:41.427

用最简单的话来说，我总是想这样说……

您可以使用框架使 WordPress 变得更好，但您不能使用 WordPress 来制作框架

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2020-04-28T10:16:14.153

无论如何，Wordpress 都是一个很棒的 CMS **优点** 1\. 我们可以使用免费的主题和插件轻松建立一个网站 2\. 有许多插件可以扩展我们的网站功能 3\. 出色的社区支持 4\. CMS 使用 PHP 和 MySQL，在某种程度上容易倾斜

**缺点** 1\. 定期更新插件和主题。2.速度慢 3.恶意文件很容易被注入。

# scala - 如何使用一些额外的方法扩展类的实例（例如 List[Int]）？

> ID：13862259
> 
> 赞同：1
> 
> 时间：2012-12-13T14:46:02.830
> 
> 标签：scala

> **可能重复：**
> [scala：向列表添加方法？](https://stackoverflow.com/questions/6975754/scala-adding-a-method-to-list)

我很难制定我想要做的事情，但代码示例应该非常简单。如果有人知道更好的表达方式，您可以自由编辑标题。:)

```
trait DiceThrow {
  list: List[Int] =>   // something like this??
  def yatzee = list.filter(_ == list.head).length >= 5
}

object Main extends App {
  val aThrow = List(4,4,4,4,4) with DiceThrow
  aThrow.yatzee  // => true    is what I want
} 
```

所以我希望`aThrow: List[Int]`有一些额外的方法，比如知道它是否是`yatzee`。这只是我编造的一个例子，在其中添加一些额外的方法到例如 a`List`可能是有用的。

这有可能吗？还是有另一种更像*scala方式的方法*？我相信*隐式转换*是可能的（？）（它们对我来说仍然很“神奇”），但这似乎不必要地弄脏了这个用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:54:05.657

您可以使用*丰富（皮条客）我的图书馆*模式：

```
class DiceList(list: List[Int]) {
  def yatzee = list.filter(_ == list.head).length >= 5
}

implicit def list2DiceList(list: List[Int]) = new DiceList(list) 
```

在 scala 2.10 中，可以使用[隐式类](http://docs.scala-lang.org/sips/pending/implicit-classes.html)对其进行简化：

```
implicit class DiceList(list: List[Int]) {
  def yatzee = list.filter(_ == list.head).length >= 5
} 
```

然后你可以像这样使用它：

```
object Main extends App {
  val aThrow = List(4,4,4,4,4)
  aThrow.yatzee  // => true
} 
```

# bash - bash脚本中的Grep没有结果

> ID：13862267
> 
> 赞同：1
> 
> 时间：2012-12-13T14:46:37.583
> 
> 标签：bash, grep

我想制作一个小脚本来节省我的打字时间，但不幸的是我没有得到任何输出：

```
#!/bin/bash
grep  -Hnr \"$1\" --include \"*cpp\" --include \"*h\" $2 
```

我玩了很多`echo`和不同的引号用法，并说服自己这行真的扩展成我想要的，但我真正能得到任何输出的唯一方法是这样：

```
#!/bin/bash
GREP="grep  -Hnr \"$1\" --include \"*cpp\" --include \"*h\" $2"
echo $GREP | bash 
```

一个示例用法是：

```
srcgrep "dynamic_cast" src 
```

我已经在一个简单的示例目录中尝试了这个，以排除链接、权限等任何奇怪的东西。所以，我当然可以只使用第二个，但知道第一种情况有什么问题吗？谢谢。

```
$ grep -V
grep (GNU grep) 2.5.1
...

$ bash --version
GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:51:39.870

为什么不只是：

```
#!/bin/bash
grep  -Hnr "$1" --include "*cpp" --include "*h" $2 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:27:04.590

因此，GNU 或其他人找到了一种用完全不合适的选项来搞砸 grep 的方法。惊人的。他们真的应该考虑“做一件事，做好”的 UNIX 哲学。grep 用于在文件中搜索文本，而不是用于查找文件。有一个非常好的命令，其名称有点明显，用于查找文件。

```
find "$2" -name '*cpp' -o -name '*h' -exec grep -Hnr "$1" {} \; 
```

假设您发布的示例中的“$2”是目录名而不是文件名，因为您希望 grep 可以处理。

# python - 从文本中缩短工作日

> ID：13862270
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:46:43.620
> 
> 标签：python, regex, datetime, formatting, python-2.7

我正在编写一个 python 库，它采用由不同类型的小时格式组成的段落。段落实际上取自不同的餐厅网站，每个网站都有不同格式的营业时间。因此，我决定编写一个采用任何格式的库（例如：M-Fri 10am-12pm、M、Tue、Wed 00:00-18:00 等）。我的决定是编写不同的正则表达式集，它接受一个字符串，如果它与我的任何模式匹配则继续。

我选择了 RegEx 模式匹配，因为不是为每个模式编写自己的逻辑并仅使用 str.replace 替换可能需要很多时间。但我坚持使用正则表达式，因为我是新手。所以你们中的任何人都可以建议我如何完成以下任务？

作为第一步，我想将所有工作日格式缩短为 3 个字母，缩短工作日如下所示。示例：“**周一 09:00 AM - 5:00 PM，周二 09:00 AM - 5:00 PM，周三 09:00 AM - 5:00 PM，周四 09:00 AM - 5:00 PM，周五 09： 00 AM - 5:00 PM，周六休息，周日休息**“

输出应为“**周一**09:00 AM - 5:00 PM，**周二**09:00 AM - 5:00 PM，**周三**09:00 AM - 5:00 PM，**周四**09:00 AM - 5:00 PM，**周五**09 :00 AM - 5:00 PM，**周六**闭馆，**周日**闭馆”

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:51:00.820

似乎一个简单的[`str.replace`](http://docs.python.org/2/library/stdtypes.html#str.replace)应该在这里工作：

```
new_paragraph = paragraph.replace('Monday','Mon') 
```

您甚至可以使用该[`calendar`](http://docs.python.org/2/library/calendar.html#calendar.day_name)模块来简化此操作：

```
import calendar

for day,abbr in zip(calendar.day_name,calendar.day_abbr):
    paragraph = paragraph.replace(day,abbr) 
```

* * *

对于*非常*大的段落，切换到正则表达式可能是值得的：

```
import re
import calendar

regex = re.compile('|'.join(calendar.day_name))
sub_dict = dict(zip(calendar.day_name,calendar.day_abbr))
new_paragraph = regex.sub(lambda match: sub_dict[match.group(0)],paragraph) 
```

当然，对于日历，缩写/等取决于语言环境（但无论如何这也许是可取的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:56:11.477

试试这个模式： ([a-zA-Z]{3})[a-zA-Z]+( [0-9]| Closed) 和这个替换： $1$2

# java - Java/Hibernate：解压缩压缩结果

> ID：13862272
> 
> 赞同：3
> 
> 时间：2012-12-13T14:46:45.600
> 
> 标签：java, mysql, hibernate, compression

我正在尝试解压缩 MySQL 的 COMPRESS 函数返回的值：

```
SQLQuery query = session
            .createSQLQuery("SELECT ID, COMPRESS(TEXT_COL) AS TEXT_COL FROM TABLE WHERE ID IN (1,2,3,...);")
            .addScalar("ID", Hibernate.INTEGER)
            .addScalar("TEXT_COL", Hibernate.TEXT);
List<Object[]> list = query.list();
for (Object[] result : list) {
   String text = decompress(((String) result[1]).getBytes());
}

(...)
private String decompress(byte[] bs) {
    InputStream in = new InflaterInputStream(new ByteArrayInputStream(bs));
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        byte[] buffer = new byte[8192];
        int len;
        while((len = in.read(buffer))>0)
            baos.write(buffer, 0, len);
        return new String(baos.toByteArray(), "UTF-8");
    } catch (IOException e) {
        throw new AssertionError(e);
    }
} 
```

我得到 java.lang.AssertionError: java.util.zip.ZipException:**不正确的标头检查**

解压这种mysql结果的方法是什么或我的代码有什么问题？

在此先感谢，迭戈。

**编辑：** 感谢 Joni 的建议，我终于将代码更改为

```
SQLQuery query = session
            .createSQLQuery("SELECT ID, COMPRESS(TEXT_COL) AS TEXT_COL FROM TABLE WHERE ID IN (1,2,3,...);")
            .addScalar("ID", Hibernate.INTEGER)
            .addScalar("TEXT_COL", Hibernate.BINARY);
List<Object[]> list = query.list();
for (Object[] result : list) {
   String text = decompress(((byte[]) result[1]));
}

(...)
private String decompress(byte[] bs) {
    InputStream in = new InflaterInputStream(new ByteArrayInputStream(bs, 4, bs.length-4));
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        byte[] buffer = new byte[8192];
        int len;
        while((len = in.read(buffer))>0)
            baos.write(buffer, 0, len);
        return new String(baos.toByteArray(), "UTF-8");
    } catch (IOException e) {
        throw new AssertionError(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:13:27.297

您必须在流的开头跳过 4 个字节：

```
InputStream in = new InflaterInputStream(
                     new ByteArrayInputStream(bs, 4, bs.length-4)); 
```

这是因为该[`COMPRESS`](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_compress)函数返回一个字符串，其中前四个字节给出了压缩数据的长度，后面的字节是实际的压缩数据。

此外，您应该尝试找到一种直接以字节形式获取结果的方法。压缩结果是二进制数据，可能无法安全地转换为字符串。

# c++ - 从 DLL 字符串表中获取字符串

> ID：13862278
> 
> 赞同：0
> 
> 时间：2012-12-13T14:47:13.820
> 
> 标签：c++, messagebox

```
HMODULE m_LangDll;  

wchar_t* GetString(const int StringID)
{
    wchar_t* nn = {0};
    if (m_LangDll)
    {
        wchar_t temp[2048];
        if(::LoadString(m_LangDll, StringID, temp, 2048))
        {
            MessageBox(0, L"string found", 0, 0);
            nn = temp;
            return nn;
        }
    }

    //assert(s.length() && _T("String not found!"));
    return 0;
} 
```

这段代码工作得很好。它返回我想要没问题的字符串。

如果我删除 MessageBox(0, L"String Not Found", 0, 0) 它不会。它返回一个随机字符。我显然做错了什么。我只是不明白对 MessageBox(0,0,0,0) 的看似无关的调用有何影响。

我尝试用其他代码替换 MessageBox 调用。就像分配更多 wchar_t* 但它似乎与调用 MessageBox 有关。

我一直在打电话给GetString...

```
MessageBox(0, GetString(101),L"HHHHH", 0); 
```

当我这样称呼它时，我得到了一堆不同的胡言乱语

```
wchar_t* tempString = GetString(101);
MessageBox(0, tempString, 0, 0); 
```

但是只要我不在 GetString 中注释掉 MessageBox() 这两种方式都有效

[编辑]

感谢您的回复，他们都非常有帮助。

我的代码现在是

```
wchar_t* GetString(const int StringID)
{
    wchar_t* nn = new wchar_t[2048];
    if (m_LangDll)
    {
        if(::LoadString(m_LangDll, StringID, nn, 2048))
        {       
        return nn;
        }
    }
    delete [] nn;
    //assert(s.length() && _T("String not found!"));
    return 0;
} 
```

特别感谢 neagoegab。

还有一个问题。为什么 MessageBox() 会使代码工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:50:31.360

您正在从函数返回局部变量的地址，导致未定义的行为：

```
nn = temp; // when the function returns temp is out of scope
return nn; // and n is pointing at temp. 
```

`std::wstring`而是返回 a并用于`c_str()`访问`const wchar_t*`表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:53:21.443

您的临时变量在堆栈上...在堆上分配它：

```
HMODULE m_LangDll;  

wchar_t* GetString(const int StringID)
{
    wchar_t* nn = new wchar_t[2048];
    if (m_LangDll)
    {
        if(::LoadString(m_LangDll, StringID, nn, 2048))
        {
            MessageBox(0, L"string found", 0, 0);
            nn = temp;
            return nn;
        }
    }

    delete [] nn;
    //assert(s.length() && _T("String not found!"));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:54:07.430

也许，一个问题是 GetString() 返回一个指向位于堆栈上的缓冲区的指针（'temp' 局部变量）。从技术上讲，缓冲区在返回后无效

# spring - struts2中没有配置spring bean？

> ID：13862280
> 
> 赞同：0
> 
> 时间：2012-12-13T14:47:18.517
> 
> 标签：spring, struts2, struts-config

我正在使用 struts2、spring 和 hibernate 做一个项目。我在 struts.xml 文件中遇到了一个问题，即它没有采用在 applictioncontext.xml 中声明的 bean。我的 applicationcontext.xml 看起来像这样

```
 <bean id="dvdDAO" class="com.ideas2it.dvdstruts.DvdDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>
<bean id="userDetailDAO" class="com.ideas2it.dvdstruts.UserDetailDAO">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="hibernatetransactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean name="DvdAction" class="com.ideas2it.dvdstruts.DvdAction" >
<property name="dvdDAO" ref="dvdDAO"/>
<property name="userDetailDAO" ref="userDetailDAO"/>
</bean>
<bean name="LoginAction" class="com.ideas2it.dvdstruts.LoginAction" >
<property name="userDetailDAO" ref="userDetailDAO"/>
</bean>

<bean name="AccountCreationAction" class="com.ideas2it.dvdstruts.AccountCreationAction" >
<property name="userDetailDAO" ref="userDetailDAO"/> 
```

我的 struts.xml

```
<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.enable.SlashesInActionNames" value="true"/>
    <constant name="struts.objectFactory" value="spring"/>
    <package name="basicstruts2" namespace="/" extends="struts-default">
        <action name="register" class="AccountCreationAction" method="register" >
            <result name="success">Login.jsp</result>
            <result name="input">failure.jsp</result>
        </action>
        <action name="login" class="LoginAction" method="loginProcess" >
            <result name="success" type="redirectAction"> 
            <param name="actionName">display</param> 
            <param name="userDetail">${userDetail}</param>
            </result>
            <result name="input">failure.jsp</result>
        </action>
        <action name="insert" class="DvdAction" method="insertDvd">
            <result type="redirectAction">
            <param name="actionName">display</param>
            </result>
        </action>

        <action name="delete" class="DvdAction" method="deleteDvd">
            <result type="redirectAction">
            <param name="actionName">display</param>
            </result>
        </action>

        <action name="update" class="DvdAction" method="updateDvd">
            <result type="redirectAction">
            <param name="actionName">display</param>
            </result>
        </action>

        <action name="display" class="DvdAction" method="displayDvd">
            <result name="success">Dvd.jsp</result>
        </action>

    </package>
</struts> 
```

此处未提及的 applicationcontext.xml 中的 bean。我在日志中收到错误，例如日志中的错误：

```
 INFO: Starting Servlet Engine: Apache Tomcat/6.0.20
    2012-12-14 10:22:09,821 INFO  org.springframework.web.context.ContextLoader.initWebApplicationContext:187 - Root WebApplicationContext: initialization started
    2012-12-14 10:22:09,901 INFO  org.springframework.web.context.support.XmlWebApplicationContext.prepareRefresh:456 - Refreshing Root WebApplicationContext: startup date [Fri Dec 14 10:22:09 IST 2012]; root of context hierarchy
    2012-12-14 10:22:09,999 INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:315 - Loading XML bean definitions from ServletContext resource [/WEB-INF/config/dvdstruts-context.xml]
    2012-12-14 10:22:10,173 INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:315 - Loading XML bean definitions from ServletContext resource [/WEB-INF/classes/struts.xml]
    2012-12-14 10:22:11,644 INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons:555 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6dbdc9: defining beans [dataSource,sessionFactory,dvdDAO,userDetailDAO,hibernatetransactionManager,DvdAction,LoginAction,AccountCreationAction]; root of factory hierarchy

    .........//hibernate mapping some log file info
 2012-12-14 10:22:22,825 DEBUG com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.debug:57 - Loaded [BUILDER] {PackageConfig Name:convention-default namespace: parents:[{PackageConfig Name:struts-default namespace: parents:[]}]}
2012-12-14 10:22:22,825 DEBUG com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.debug:57 - Loaded [BUILDER] {PackageConfig Name:hibernate-default namespace: parents:[{PackageConfig Name:struts-default namespace: parents:[]}]}
2012-12-14 10:22:22,826 DEBUG com.opensymphony.xwork2.interceptor.I18nInterceptor.debug:57 - new I18nInterceptor()
2012-12-14 10:22:22,843 DEBUG com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.debug:57 - Loaded [BUILDER] {PackageConfig Name:hibernateManager namespace:/hibernateManager parents:[{PackageConfig Name:struts-default namespace: parents:[]}]}
2012-12-14 10:22:22,850 DEBUG com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.debug:57 - Loaded /hibernateManager/* in 'hibernateManager' package:{ActionConfig * (.{1}()) - action - jar:file:/home/saranya/Desktop/apache-tomcat-6.0.20/webapps/dvd_struts/WEB-INF/lib/struts2-fullhibernatecore-plugin-1.4-GA.jar!/struts-plugin.xml:74:36}
2012-12-14 10:22:22,850 DEBUG com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.debug:57 - Loaded [BUILDER] {PackageConfig Name:basicstruts2 namespace:/ parents:[{PackageConfig Name:struts-default namespace: parents:[]}]}
Dec 14, 2012 10:22:22 AM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Dec 14, 2012 10:22:22 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [/dvd_struts] startup failed due to previous errors
2012-12-14 10:22:22,885 INFO  org.springframework.web.context.support.XmlWebApplicationContext.doClose:1002 - Closing Root WebApplicationContext: startup date [Fri Dec 14 10:22:09 IST 2012]; root of context hierarchy
2012-12-14 10:22:22,886 INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons:422 - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6dbdc9: defining beans [dataSource,sessionFactory,dvdDAO,userDetailDAO,hibernatetransactionManager,DvdAction,LoginAction,AccountCreationAction]; root of factory hierarchy
2012-12-14 10:22:22,887 INFO  org.springframework.orm.hibernate3.LocalSessionFactoryBean.destroy:246 - Closing Hibernate SessionFactory
2012-12-14 10:22:22,887 INFO  org.hibernate.impl.SessionFactoryImpl.close:805 - closing
log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository. 
```

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd" >
<web-app>
<display-name>Struts 2 Dvd Application</display-name>

    <filter>
        <filter-name>Spring_struts</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>

        <load-on-startup>1</load-on-startup>
    </filter>
     <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/config/dvdstruts-context.xml,/WEB-INF/classes/struts.xml</param-value>

      </context-param>

    <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>

    <filter-mapping>
        <filter-name>Spring_struts</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
     <welcome-file-list>
            <welcome-file>Login.jsp</welcome-file>
        </welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:41:42.173

我通过替换jar版本解决了这个问题。谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:24:44.467

尝试添加`<beans default-autowire="autodetect">`，`applicationContext.xml`并检查您的库的版本和数量。

# android - 如何在 android 2.2 通知中添加换行符

> ID：13862281
> 
> 赞同：2
> 
> 时间：2012-12-13T14:47:24.187
> 
> 标签：android

我想在通知的长文本中包含换行符。\n 不起作用。

```
notification.setLatestEventInfo(context, title, message+"\r\n"+"test",intent); 
```

android2.2 通知中换行符的代码是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:08:10.593

我认为您可能必须创建一个带有两个文本视图的自定义通知布局，每个视图用于一行。

这是通知的官方教程，但我不确定其中有多少适用于 2.2。 [http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

以下链接也可能有用： [自定义通知布局和文本颜色](https://stackoverflow.com/questions/4867338/custom-notification-layouts-and-text-colors)

# compiler-construction - Ocaml - 编译器和手册之间的区别

> ID：13862282
> 
> 赞同：1
> 
> 时间：2012-12-13T14:47:29.407
> 
> 标签：compiler-construction, ocaml

所以我正在阅读[http://www.podval.org/~sds/ocaml-sucks.html](http://www.podval.org/~sds/ocaml-sucks.html)，其中包括这句话（在 ocaml 问题的背景下）：

> 实际上有三种略有不同的语法：
> 
> *   官方在手册中有描述
> *   编译器 ocamlc 接受其超集
> *   预处理器 Camlp4 接受类似的东西（但略有不同）（例如，它接受 List.map [1;2;3] ~f:fun x -> x，它也被顶层接受，但是不是编译器）

ocamlc 接受但与手册不符的 ocaml 代码片段示例有哪些？

PS - 我主要对 OCaml 4.00.1 感兴趣，但以前的版本也很有趣......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:18:53.430

一个有趣的例子，仅出于好奇：

```
 OCaml version 4.00.0

# type 'a weird_list =
    | ()
    | :: of 'a * 'a weird_list;;
type 'a weird_list = () | :: of 'a * 'a weird_list
# 1::2::3::();;
- : int weird_list = :: (1, :: (2, :: (3, ()))) 
```

Camlp4 和 OCaml 编译器之间的差异有时是错误，但最常见的解释是解析器技术的差异：如果你为同一种语言编写惯用的 LR 解析器和 LL 解析器，但语法上的细微之处有点烦人，你不应该期望两者都完美匹配。我认为这在实践中不是问题（但实际上大多数人不使用 Camlp4）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:31:06.900

这个页面很旧，不确定，对于所有点来说仍然是正确的。

考虑到 ocaml 4.00 toplevel，第三项是错误的（也考虑到 List.map 的参数顺序是错误的......）：

```
 $ List.map  ~f:fun x -> x [1;2;3];;
 Error: Syntax error        
 $ List.map ~f:(fun x -> x) [1;2;3];;
 File "", line 1, characters  12-24:
 Error: The function applied to this argument has type 'a list -> 'b list 
 This argument cannot be applied with label ~f 
```

AFAIK，顶层使用与 ocaml 相同的代码来解析代码......

# c# - 如何创建一个名为“checked”的属性？

> ID：13862283
> 
> 赞同：3
> 
> 时间：2012-12-13T14:47:30.653
> 
> 标签：c#, jquery, asp.net-mvc, jquery-easyui

我想使用[EasyUI jquery tree](http://www.jeasyui.com/documentation/index.php#)。所以我创建了一个与这个 jquery 树一起使用的类。

**Jquery 树数据格式示例**

```
[{  
    "id":1,  
    "text":"Folder1",  
    "iconCls":"icon-save",  
    "children":[{  
        "text":"File1",  
        "checked":true  
    },{  
        "text":"Books",  
        "state":"open",  
        "attributes":{  
            "url":"/demo/book/abc",  
            "price":100  
        },  
        "children":[{  
            "text":"PhotoShop",  
            "checked":true  
        },{  
            "id": 8,  
            "text":"Sub Bookds",  
            "state":"closed"  
        }]  
    }]  
    },{  
    "text":"Languages",  
    "state":"closed",  
    "children":[{  
        "text":"Java"  
    },{  
        "text":"C#"  
    }]  
}] 
```

**我的模特**

```
public class MetersTreeNode
{
    public int id { get; set; }
    public string text { get; set; }
    public string state { get; set; }
    public bool checked { get; set; } //I cant define.
    public string attributes { get; set; }
    public ICollection<MetersTreeNode> children { get; set; }
} 
```

**控制器**（也许这不是必需的）

```
public ActionResult GetDemoTree()
{

    var result = new[]
    {
        new MetersTreeNode{
            id = 0,
            text = "level 1",
            state = "open",
            attributes = "",
            children = new[]{
                new MetersTreeNode{
                    id=1,
                    text="level 2",
                    state="open",
                    attributes=""
                },
                new MetersTreeNode{
                    id=2,
                    text="level 2",
                    state="open",
                    attributes="",
                    children = new []{
                        new MetersTreeNode{
                            id=5,
                            text="level 3",
                            state="open",
                            attributes=""
                        }
                    }
                },
                new MetersTreeNode{
                    id=3,
                    text="level 2",
                    state="open",
                    attributes=""
                },
                new MetersTreeNode{
                    id=4,
                    text="level 2",
                    state="open",
                    attributes=""
                }
            }
        }
    };

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

使用`checked`参数。我应该在我的模型中定义它。但我无法定义它。`(Error :"invalid token 'checked' in class struct or interface member declaration")`. 我怎样才能做到这一点。或者，如果不可能，另一种方式来实现我想要的。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T14:49:27.767

请用：

```
public bool @checked { get; set; } 
```

[checked](http://msdn.microsoft.com/en-us/library/74b4xzyw%28v=vs.71%29.aspx)是保留的 C# 关键字。

# javascript - 搜索/替换循环出错

> ID：13862284
> 
> 赞同：0
> 
> 时间：2012-12-13T14:47:31.597
> 
> 标签：javascript, datetime, date-formatting

我们有一个课程表，在东部时间看起来如下（前 4 行）。

```
Sat 12/08/2012  1:00-3:30 PM
Mon 12/10/2012  9:30-12:00 AM
Wed 12/12/2012  9:30-12:00 AM
Sat 12/15/2012  1:00-3:30 PM 
```

您可以选中单选按钮并选择不同的时区。例如，如果您选择中央时间，您应该会在更改时看到：

```
Sat 12/08/2012  12:00-2:30 PM
Mon 12/10/2012  8:30-11:00 AM
Wed 12/12/2012  8:30-11:00 AM
Sat 12/15/2012  12:00-2:30 PM 
```

相反，您会看到：

```
Wed 30/05/2012  8:09 am-11:09 pm
Sat 00/08/2012  12:09-2:09 pm
Mon 30/10/2012  8:09 am-11:09 pm
Wed 30/12/2012  8:09 am-11:09 pm 
```

部分原因可能是日期格式问题，但该格式在其他地方可以正常工作。我认为主要问题在于更改循环（每个），它抓取每行的三个部分（0 = 日期，1 = 日期，2 = 时间（实际上被拆分为 0 和 1 的子数组用于开始和结束时间，午夜有一个特殊情况））应用新时区的时移，并构建新的行内容。我找不到出了什么问题。任何想法表示赞赏。（init vars 和其他最重要的东西被省略了）：

```
$('.timezoneSel').click(function (evtObj) {
    _curevtObj = evtObj;
    _prevtmzObj = _curtmzObj;
    $('input.timezoneSel[value="' + _curevtObj.target.value + '"]').each(function () {
        $(this).attr('checked', true);
    });
    for (var x = 0; x < timezoneset.length; x++) if (timezoneset[x].abbr == _curevtObj.target.value) _curtmzObj = timezoneset[x];
    $('table.TPR_tblcoursedetails').each(function (i, val) {
        $(this).contents().find('tr').each(function (irow, vrow) {
            isEvening = false;
            $(this).contents().find('span').each(function (icol, vcol) {
                switch (icol) {
                    case 0:
                        rowwday = vcol.innerHTML;
                        break;
                    case 1:
                        rowdate = vcol.innerHTML;
                        break;
                    case 2:
                        rowtime = vcol.innerHTML;
                        break;
                }
            });
            isEvening = ((rowtime.indexOf(" PM") > -1) ? true : false);
            rowtimearr = rowtime.split("-");
            if (rowtimearr[0] == MidNiteStr) rowtimearr[0] = "12:00 AM";
            if (rowtimearr[1] == MidNiteStr) rowtimearr[1] = "12:00 AM";
            if (rowtimearr[0].indexOf(" AM") < 0 && rowtimearr[0].indexOf(" PM") < 0) rowtimearr[0] += isEvening ? " PM" : " AM";
            newStartDate = new Date(rowdate + ' ' + rowtimearr[0]);
            newEndDate = new Date(rowdate + ' ' + rowtimearr[1]);
            newStartDateMsec = newStartDate.getTime() + ((_curtmzObj.offset - _prevtmzObj.offset) * msecPerHour);
            newEndDateMsec = newEndDate.getTime() + ((_curtmzObj.offset - _prevtmzObj.offset) * msecPerHour);
            newStartDate = new Date(newStartDateMsec);
            console.log(newStartDate);
            newEndDate = new Date(newEndDateMsec);
            $(this).contents().find('span').each(function (icol2, vcol2) {
                adjStartTimeTT = newStartDate.format('tt');
                adjEndTimeTT = newEndDate.format('tt');
                console.log(adjStartTimeTT, adjEndTimeTT);
                switch (icol2) {
                    case 0:
                        vcol2.innerHTML = newStartDate.format("ddd");
                        break;
                    case 1:
                        vcol2.innerHTML = newStartDate.format("MM/dd/yyyy");
                        break;
                    case 2:
                        vcol2.innerHTML = ((adjStartTimeTT == adjEndTimeTT) ? newStartDate.format("h:mm") : newStartDate.format("h:mm tt")) + "-" + ((useMidNite && newEndDate.format("h:mm tt") == "12:00 AM") ? MidNiteStr : newEndDate.format("h:mm tt"));
                        break;
                }
            });
        });
        filledonce = false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:17:40.373

好的，结果是这一行：

```
$('.TPR_tblcoursedetails').html($('.TPR_tblcoursedetails').html().replace(/ EST/g, "")); 
```

它位于主循环之上，本身并没有循环。它只是抓取了一次 EST 并在整个过程中替换它，但它也使它下面的大循环做同样的事情，所以交互不正确。我们将其更改为：

```
$('.TPR_tblcoursedetails').each(function(iobj,vobj){
                vobj.innerHTML.replace(/ EST/g, "");
            }); 
```

# mysql - 如何在报表查询向导中将参数与其他值连接起来

> ID：13862285
> 
> 赞同：0
> 
> 时间：2012-12-13T14:47:32.003
> 
> 标签：mysql, ireport

我在 iReport 的报表查询向导中有以下查询

```
select docid_fname_pemid.*, MONTHNAME(b.ServicePeriodDate) as month_name,YEAR(b.ServicePeriodDate) as year_name , b.NonLTCMaximumSpecialPayment, b.NonLTCEnrolledPatientOutsideUseTotal, b.NonLTCAccessBonus
from (
select docid_pemid.PEMID, docid_pemid.DoctorID, b.$P{transparency_check})
from (
select DoctorID,PEMID from DoctorPEMMap where PEMID in ($P{PEMID_input}) and StartDate >= $P{StartDate}  and (EndDate <= $P{EndDate} or EndDate <= '0000-00-00') group by PEMID order by PEMID
)docid_pemid   left join  Doctors b on docid_pemid.DoctorID=b.DoctorID
) docid_fname_pemid
left  join DoctorPayments b on docid_fname_pemid.DoctorID=b.DoctorID 
```

&参数，按顺序（参数类，提示是/否，默认值表达式）

1) `PEMID_input`--> 字符串，提示是，否

2) `month_year`--> .String，提示是，否

3) `transparency_input`--> 字符串，提示是，否

4) `transparency_check`-->字符串，无提示，`($P{transparency_input}=="yes" ) ? ("FirstName") : ("AliasFirstName")`

5) `StartDate`-->字符串，无提示，`$P{month_year}.split("-")[0]=="April" ? $P{month_year}.split("-")[1].concat("-04-01") : $P{month_year}.split("-")[1].concat("-10-01")`

6) `EndDate`-->字符串，无提示，`$P{month_year}.split("-")[0]=="April" ? $P{month_year}.split("-")[1].concat("-09-30") : $P{month_year}.split("-")[1].concat("-03-31")`

当我运行报告时，给出以下错误

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to use near ''FirstName' 
from (     select DoctorID,PEMID from DoctorPEMMap where PEMID in ('21' at line 3 
```

在

我认为查询没有得到`'b.FirstName'`。所以我使用 concat 函数 as `concat('b.',$P{transparency_check})`，但它不起作用。

我最终想要`b.FirstName`或`b.AliasFirstName`像在 mysql 查询中一样。当我手动给出这些术语中的任何一个时，查询运行良好。

我该怎么走？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:05:14.117

您遇到的问题与 Jasper 插入参数值的方式有关。如果你只使用 $P{PARAMETER NAME}，那么我相信它会在编译 SQL 后填充参数。如果使用 $P!{PARAMETER NAME}，参数将被视为文字并在编译 SQL 之前填充。这就是当您仅使用 $P 时，Jasper 似乎在参数值周围插入单引号的原因。

所以尝试改变这个：

```
b.$P{transparency_check} 
```

对此：

```
b.$P!{transparency_check} 
```

并删除透明度检查后的额外括号。

检查此链接。我认为它比我能解释得更好。

[http://community.jaspersoft.com/wiki/using-report-parameters](http://community.jaspersoft.com/wiki/using-report-parameters)

这是整个代码的样子。我对其进行了格式化以使其更易于阅读。

```
SELECT  docid_fname_pemid.*, 
        MONTHNAME(b.ServicePeriodDate) as month_name,
        YEAR(b.ServicePeriodDate) as year_name , 
        b.NonLTCMaximumSpecialPayment, 
        b.NonLTCEnrolledPatientOutsideUseTotal, 
        b.NonLTCAccessBonus

FROM 

(
    SELECT docid_pemid.PEMID, docid_pemid.DoctorID, b.$P!{transparency_check}

    FROM
    (
        SELECT  DoctorID,
                PEMID 
        FROM    DoctorPEMMap 
        WHERE   PEMID IN ($P{PEMID_input}) 
                AND StartDate >= $P{StartDate}
                AND (EndDate <= $P{EndDate} or EndDate <= '0000-00-00') 
        GROUP BY PEMID 
        ORDER BY PEMID
    ) docid_pemid   

    left join  Doctors b on docid_pemid.DoctorID=b.DoctorID

) docid_fname_pemid

left  join DoctorPayments b on docid_fname_pemid.DoctorID=b.DoctorID 
```

# php - 使用 PDO 插入查询中的“名称必须是字符串”错误

> ID：13862290
> 
> 赞同：1
> 
> 时间：2012-12-13T14:47:36.693
> 
> 标签：php, sql, pdo

我在这个块中有一个奇怪的错误：

```
 public static function saveUser($form)
{

    $connexion = new PDO("mysql:host=localhost;dbname=cdiscodb", 'root', 'rthr'); // connexion à la BDD
    $connexion->setAttribute  (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "INSERT INTO ope_tartine_nl(first_name,last_name,email,created_date,updated_date) VALUES (?,?,?,?,?)";
    $cmd = $connexion->prepare($sql);
    $result = $connexion->exec(array($form['name'], $form['lastname'], $form['email'], date("Y-m-d H:i:s"), date("Y-m-d H:i:s")));
} 
```

错误是：

> 致命错误：函数名称必须是字符串

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:53:38.117

```
$sql = "INSERT INTO ope_tartine_nl(first_name,last_name,email,created_date,updated_date) VALUES (?,?,?,?,?)";
$cmd = $connexion->prepare($sql);
$result = $cmd->execute(array($form['name'], $form['lastname'], $form['email'], date("Y-m-d H:i:s"), date("Y-m-d H:i:s")));
} 
```

你已经给了，`$connexion->exec`而它应该是`$cmd->exec(......)`

并使用`$cmd->execute`而不是`$cmd->exec`.

# iphone - 如何压缩和上传高质量的视频到服务器

> ID：13862297
> 
> 赞同：0
> 
> 时间：2012-12-13T14:48:01.707
> 
> 标签：iphone, ios, xcode, ipad

使用 ASIFormDataRequest 将 HDvideo 上传到服务器。但是上传需要很长时间。

我的代码是

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

if (movieUrl != Nil) {
NSData *videoData = [NSData dataWithContentsOfURL:movieUrl];
[request addData:videoData withFileName:[movieUrl lastPathComponent] andContentType:@"audio/mp4" forKey:@"video"];
[request setRequestMethod:@"POST"];
//
[request setTimeOutSeconds:600];

[request setDelegate:self];
//
[request setUploadProgressDelegate:progressView];

[request startSynchronous]; 
```

其中movieurl是从imagepickerdidfinish返回的url

```
 movieUrl = (NSURL*)[info objectForKey:UIImagePickerControllerMediaURL]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:24:25.157

好吧，您正在同步执行所有这些操作，这意味着您的界面被阻止并且似乎没有响应。我建议使用响应速度更快的异步连接，在单独的线程上执行而不阻塞主线程。利用：

```
[request startAsynchronous] 
```

# php - 无法使用 Twitter API 1.1 和 PHP 获取最新推文

> ID：13862299
> 
> 赞同：1
> 
> 时间：2012-12-13T14:48:09.570
> 
> 标签：php, curl, twitter, twitter-oauth

我正在尝试使用 PHP 和 CURL 以及新的 1.1 API 从特定用户那里获取最新的推文，我在 twitter 网站上创建了我的新应用程序并转到 OAuth 工具选项卡以生成签名并根据它生成的页面以下卷曲命令：

```
curl --get 'https://api.twitter.com/1.1/statuses/user_timeline.json?count=2&screen_name=twitter' --header 'Authorization: OAuth oauth_consumer_key="Waqd223QDuge6l9UboBldg", oauth_nonce="8a9beae863838b0ba2bc6ac03bc9757e", oauth_signature="u2PrZ5g14HGb39pHoYl9azHp6vg%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1355408402", oauth_token="171967067-lyLujNed9QyVBfmlfAkFXiUt5KIQkqrCMwg6utFc", oauth_version="1.0"' 
```

这在我的终端上运行良好，但是当我尝试在 PHP 中复制它时，我得到一个“无法验证你”的错误，这就是我目前所拥有的：

```
$options = array(
    URLOPT_HTTPHEADER      => array('Authorization: OAuth oauth_consumer_key="Waqd223QDuge6l9UboBldg", oauth_nonce="8a9beae863838b0ba2bc6ac03bc9757e", oauth_signature="toLnir5cHUUvEj8X29SdzjlOTXc%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="' . time() . '", oauth_token="171967067-lyLujNed9QyVBfmlfAkFXiUt5KIQkqrCMwg6utFc", oauth_version="1.0"'),
    CURLOPT_HEADER         => false,
    CURLOPT_URL            => 'https://api.twitter.com/1.1/statuses/user_timeline.json?count=2&screen_name=twitter',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_SSL_VERIFYPEER => false
);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json);

var_dump($twitter_data); 
```

我唯一要更改的是`oauth_timestamp`我使用该`time()`函数获取当前时间的位置，我认为我必须将错误的选项传递给 curl 函数，但我无法弄清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T23:33:54.267

在这里您可以找到使用 twitter api 1.1 和 curl 获取推文的示例

[使用 Twitter API 1.1 版检索 user_timeline 的最简单 PHP 示例](https://stackoverflow.com/questions/12916539/simplest-php-example-retrieving-user-timeline-with-twitter-api-version-1-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T09:25:34.627

我花了一段时间才开始工作，但我终于做到了，并将一个独立的课程和演示推送到 GitHub，应该很容易理解。

[https://github.com/skaterdav85/twitter-library](https://github.com/skaterdav85/twitter-library)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-03T15:55:28.713

Twitter 1.1 rest api 的非常简单的 php 包装器

[https://github.com/vojant/Twitter-php](https://github.com/vojant/Twitter-php)

# python - 防止修改python中返回的列表

> ID：13862300
> 
> 赞同：3
> 
> 时间：2012-12-13T14:48:13.510
> 
> 标签：python, list

我正在使用我的 python 技能并尝试创建一些类。由于 python 是基于引用的，因此类方法返回的任何列表都可以由调用者修改，然后调用者会反映在类中（正如我所拥有的那样）。避免这种情况的正确方法是什么？我在考虑将嵌套列表转换为嵌套元组还是进行深层复制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:57:56.613

返回元组是返回不可变列表的一种相当标准的方法。另一种选择是返回列表的不可变“视图”。我认为 stdlib 目前不包含这样的类，所以你可能不得不自己动手，但这会相当简单。基本上，该类将包含一个私有实例变量（底层列表）；并且只实现读取操作（`__getitem__`,`__len__`等）并将它们委托给实例变量（根据需要将任何子项包装在“视图”对象中）。

# function - 访问：ConcatRelated 适用于表，但不适用于查询

> ID：13862302
> 
> 赞同：1
> 
> 时间：2012-12-13T14:48:20.350
> 
> 标签：function, vba, ms-access, concatenation

我一直在使用[Allen Browne 的 ConcatRelated](http://allenbrowne.com/func-concat.html)函数，虽然当数据来自表时它工作正常，但当数据来自查询时它不起作用。

绿色的“正在运行的查询”栏会出现几秒钟，但是当它尝试显示数据时，它只显示第一行中的一个字段，运行速度非常慢，可能需要几分钟才能显示第一屏记录。我没有设法让它足够长的时间来完成结果集，必须使用任务管理器关闭 Access。

每次调用函数时都会运行查询吗？这可以解释为什么需要这么长时间但似乎不太可能。

这是函数的问题，是调用函数的查询，还是源数据来自的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:14:51.287

这是在立即窗口中使用该功能的示例。

```
CompanyID = 7
? ConcatRelated("OrderDate", "tblOrders", "CompanyID = " & CompanyID)
12/11/2012, 12/12/2012, 12/13/2012 
```

功能 ...

1.  创建此 SQL 语句

    从 tblOrders 中选择 OrderDate，其中 CompanyID = 7

2.  `Recordset`根据该语句打开一个

3.  循环`Recordset`将每个`OrderDate`值添加到其输出字符串

IOW，`ConcatRelated()`每次调用它时都会执行相当多的工作。当您在查询中将其作为字段表达式调用时，它必须为查询结果集的每一行再次执行所有这些工作。

除了“固定开销”之外，`ConcatRelated()`可能会导致额外的性能成本：如果没有索引 on `CompanyID`，数据库引擎将不得不使用全表扫描`tblOrders`来查找满足该`WHERE`子句的行。

您的问题询问使用查询而不是带有`ConcatRelated()`. 那么函数的内部 SQL 语句将是：

```
SELECT OrderDate FROM YourQuery WHERE CompanyID  = 7 
```

除了`ConCatRelated()`使用表带来的性能挑战之外，您还面临 2 个以上的风险，这可能会显着增加工作量。

1.  如果`YourQuery`db 引擎需要付出很多努力，它必须付出努力来创建父查询结果集的每一行。
2.  您增加了 db 引擎无法为`WHERE`函数内部 SQL 语句中的子句使用索引的可能性。即使`CompanyID`在 的基础表源中有索引`YourQuery`，数据库引擎也可能看不到使用它的足够好处。

因此，虽然`ConCatRelated()`有用，但使用它是昂贵的。这不是因为函数中的任何设计错误。相反，无论您使用什么方法来完成任务，任务的性质都是如此昂贵。并且要求该函数使用查询而不是表可能会增加成本。

# r - r 复选框 {manipulate} 打开和关闭数据系列

> ID：13862310
> 
> 赞同：0
> 
> 时间：2012-12-13T14:48:39.950
> 
> 标签：r, checkbox, ggplot2

我正在尝试使用 ggplot 绘制一个包含三条线的图表。但后来我希望能够打开或关闭这些线，这样当我看到一个过于拥挤的图时，我可以隐藏一些数据系列。我似乎无法弄清楚如何使用 rstudio 的包含复选框的操作包来做到这一点（或者即使它可能）。有人可以告诉我如何使用这个包或其他包吗？谢谢

代码：

```
manipulate((ggplot(MeanFrameMelt, aes(x=variable, y=value, 
           color=id))+ geom_point()), 
           id = checkbox(FALSE, "File1")) 
```

MeanFrameMelt（数据）：

```
id  variable    value
1   file1   V1  0.04114207
2   file2   V1  0.31830645
3   file3   V1  0.05797068
4   file1   V2  0.04138554
5   file2   V2  0.31510753
6   file3   V2  0.05830449
7   file1   V3  0.04157882
8   file2   V3  0.31220430
9   file3   V3  0.05865419
10  file1   V4  0.04177334
11  file2   V4  0.31117608
12  file3   V4  0.05900918 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:11:09.440

This is not really a manipulate question, but rather a question of you have 3 Boolean values to use when creating your plot expression. How to do it? The `checkbox` call creates these. The following doesn't exactly answer your specific question, but shows how to make this less confusing -- just add the lines one by one at the expense of being elegant. This could be done with RStudio, but I'm using a version of manipulate that works without RStudio:

```
require(gWidgets2) ## from github
options(guiToolkit="Qt") ## other choices too
source(system.file("examples", "manipulate.R", package="gWidgets2"))

manipulate({
  plot(mpg ~ wt, mtcars)
  if(do_lm)
    abline(lm(mpg ~ wt, mtcars))
  if(do_loess)
    with(mtcars, lines(lowess(wt, mpg)))
  ## ...
},
           do_lm=checkbox("Add regression line"),
           do_loess = checkbox("Add lowess fit")
           ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:00:37.787

这是一种使用`tkexamp`TeachingDemos 包中的函数的方法，而不是`manipulate`：

```
library(TeachingDemos)
tklist <- rep( list(list('checkbox',init="T")), 3 )
names(tklist) <- levels( MeanFrameMelt$id )

tkfun <- function(...) {
    w <- c(...)
    w2 <- names(w)[w]
    df <- MeanFrameMelt[ MeanFrameMelt$id %in% w2, ]
    print(ggplot(df, aes(x=variable, y=value,
                  color=id)) + geom_point() )
}

tkexamp( tkfun, tklist ) 
```

或者如果最后一行是：

```
tkexamp( tkfun, list(id=tklist), plotloc='left' ) 
```

其他更熟悉 ggplot2 的人需要插话如何修改它，以使颜色保持不变，并且可选地 y 限制保持不变。

**编辑**

这是一个版本的函数，即使不显示某些值，也可以保持颜色和 y 限制相同：

```
tkfun <- function(...) {
  w <- c(...)
  w2 <- names(w)[w]
  df <- MeanFrameMelt[ MeanFrameMelt$id %in% w2, ]
  print(ggplot(df, aes(x=variable, y=value, colour=id)) + geom_point() +
    scale_colour_discrete(drop=FALSE) + 
    ylim(range(MeanFrameMelt$value))
  )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:19:08.017

这是我根据 Rstudio 的示例条形图得出的一件事：

```
manipulate(
   barplot(as.matrix(longley[,factor]), 
           beside = TRUE, main = factor),
   factor = picker(1,2,2:3)) 
```

如果您选择第三个选项 ，`2:3`它将绘制两组数据。据推测，同样的诡计可以用于其他情节类型。我很想看看其他人能想出什么。

更新：以下工作，虽然有点笨拙：

```
manipulate(matplot(foo[,1],foo[,c(which(c(fp2,fp3)==1))],t='l'), 
           fp2 = checkbox(TRUE,'col2') ,
           fp3 = checkbox(TRUE,'col3')) 
```

`fp4`如果您希望每个评论有 3 个复选框，则 需要一行。

注意——我在 Rstudio 的论坛上发布了一个问题，因为我在尝试将复选框输出分配给向量时收到错误消息，即`fpick[4]=checkbox(TRUE,'col4')`

# mysql - SQL 计数多列？

> ID：13862312
> 
> 赞同：0
> 
> 时间：2012-12-13T14:48:44.750
> 
> 标签：mysql, sql

如果我的表中有两列，`first_name`并且`last_name`我想知道有多少人使用相同的名字，例如：

```
Name Count | Name
-------------------------
 12        | John Smith
  8        | Bill Gates
  4        | Steve Jobs 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:53:57.387

按两列分组 - 例如：

```
select firstname, lastname, count(*) as `Name Count`
from table
group by firstname, lastname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:55:06.297

由于名称可以有不同的大小写（即“John”和“john”），并且数据库中可能有多余的空格，所以首先使用一个子查询来清理并连接名字和姓氏，然后使用`COUNT`and `GROUP BY`：

```
SELECT COUNT(*) AS `name_count`
FROM (
    SELECT CONCAT(LOWER(TRIM(`first_name`)), ' ', LOWER(TRIM(`last_name`))) AS `full_name`
    FROM `table`
) AS `table_with_concat_names`
GROUP BY `full_name`
ORDER BY `name_count` DESC; 
```

你会注意到我同时申请`LOWER(TRIM())`了名字和姓氏。这样，它们都用 LOWER() 全部小写，这样 'John Smith' 和 'john smith' 在比较时是同一个人，而且我使用 TRIM() 删除多余的空格，所以 'John Smith' （空格后) 和“约翰·史密斯”也是同一个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:51:19.990

使用 group by 子句

```
select (firstname + ' ' + lastname) as Name, count(*) as 'Name Count'
from table
group by (firstname + lastname) 
```

# c++ - 无法转换双新运算符

> ID：13862314
> 
> 赞同：0
> 
> 时间：2012-12-13T14:48:51.800
> 
> 标签：c++, arrays, memory-management

我遇到了一段代码的问题。我在 C 程序中有这一行：

```
mel[i] = malloc(sizeof(double)*mellength[i]); 
```

在哪里：

```
double *mel[16];
int mellength[16]; 
```

我需要在 C++ 中执行此操作，但是我使用的是“new”运算符：

```
mel[i] = new double(sizeof(double)*mellength[i]); 
```

在哪里：

```
int *mellength = new int[16];
double *mel = new double[16]; 
```

我收到以下错误：

> 错误：无法在赋值中将 'double*' 转换为 'double'

完整功能：

```
void setup_Mel(int fft_size, int sample_rate, int *melstart, int *mellength, double *mel)
{

double fmax;
double dphi;
double fsample;
double freq;
double temp[fft_size/2];

fmax=2595*log10(8000.0f/700+1);
dphi = fmax/17;
freq = (double)sample_rate/fft_size;

for(int i=0; (i < 13); i++)
{
    melstart[i] = fft_size/2;
    mellength[i] = 0;

    memset(temp, 0, sizeof(double)*fft_size/2);
    for(int j=0; (j < fft_size/2); j++)
    {
        fsample = 2595*log10(freq*j/700 + 1);

        if((dphi * i <= fsample) && (fsample < dphi*(i+1)))
        {
            temp[j] = (fsample-dphi*i)/(dphi*(i+1)-dphi*i);
        }

        if ((dphi*(i+1) <= fsample) && (fsample < dphi*(i+2))) 
        {
            temp[j] = (fsample-dphi*(i+2))/(dphi*(i+1)-dphi*(i+2));
        }

        if ((temp[j] != 0) && (melstart[i] > j))
        {
            melstart[i] = j;
        }

        if (temp[j] != 0) mellength[i]++;
    }

   mel[i] = new double(sizeof(double)*mellength[i]);

}
} 
```

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:52:13.770

```
mel[i] = new double(sizeof(double)*mellength[i]); 
```

不会像你想的那样 - 它分配一个带有 value**的 double**`sizeof(double)*mellength[i]`。

要分配一个数组，你需要

```
mel[i] = new double[mellength[i]]; 
```

[样本](http://ideone.com/xDY6y4)

这两个版本不等价：

```
double *mel = new double[16]; 
```

在 C++ 中声明一个数组`double`，而

```
double *mel[16]; 
```

声明一个指向 的指针数组`double`。当您尝试取消引用 C++ 变量时，您会返回 a `double`，因此您当然不能将其分配给 a 的返回值`new`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:52:53.793

你正在寻找的是

```
mel[i] = new double[mellength[i]]; 
```

您最初的使用`new`将尝试分配一个单`double`并给它括号中的值。

# java - JUnit4 TestCases 和 TestSuite 的执行问题

> ID：13862315
> 
> 赞同：1
> 
> 时间：2012-12-13T14:48:59.587
> 
> 标签：java, junit, junit4, system-properties

> **可能重复：**
> [@parameters 方法在 @beforeclass 方法之前执行](https://stackoverflow.com/questions/11430859/parameters-method-is-executed-before-beforeclass-method)

我在使用 JUnit 4 TestsUites 和参数化测试时遇到了一些麻烦。

在我的套件中，我想像这样设置 SystemProperty：

```
@RunWith(Suite.class)
@SuiteClasses({ParameterizedTestCase.class })
public class TestSuite {

     @BeforeClass
     public static void setUpSuite() {
        System.out.println("suite");
        System.setProperty("propertyToSet", "propertyToSet");
     }

} 
```

在 ParameterizedTestCase 我声明了 generateParams() 来打印属性，如下所示：

```
@RunWith(Parameterized.class)
public class ParameterizedTestCase{
     @Parameters
     public static Collection<Object[]> generateParams() {
     System.out.println("Parameter: " + System.getProperty("propertyToSet"));
     }

    @Test
    public void testSomething() {
        //doSometing
    }
} 
```

我得到的输出如下：

```
Parameter: null
suite 
```

所以方法以错误的顺序被调用。我想，套件的 BeforeClass 在所有 TestClasses 之前被调用。

我该如何解决这个问题。我需要在套件中设置一个参数，它将被多个测试用例使用。但是 TestCases 不知道它们是从哪个套件调用的。所以我更喜欢 Systemproperty 之类的东西。

感谢您的帮助

基尔施米歇尔

# javascript - 使用get参数检测ajax请求的原因

> ID：13862317
> 
> 赞同：0
> 
> 时间：2012-12-13T14:49:15.067
> 
> 标签：javascript, ajax, xmlhttprequest

是否有任何理由使用附加的 GET 参数（如“ajax=1”）检测 ajax 请求，而不是仅检查服务器端的“X-Requested-With”标头？

如果我们不确定客户端使用的 JS 框架是否传播标头，这可能是有道理的，但是如果我们知道这样做有什么好处吗？有什么情况可以派上用场吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:14:56.470

实际上，AJAX 请求或浏览器向服务器发送的典型页面刷新之间没有区别。

如果你愿意，你可以尝试像 Fiddler 这样的工具，那么你会发现这两个请求是相似的。

如果您真的想检测请求是否作为 AJAX 请求发出，唯一可靠的方法是显式地为请求添加一些值。它可以像您所说的那样添加到 url 中，也可以添加到`ajax=1`自定义 HTTP 标头中，或者在 POST 请求的情况下添加到请求正文中。

# javascript - 获取在 HTML 表格中按下按钮的行

> ID：13862320
> 
> 赞同：1
> 
> 时间：2012-12-13T14:49:17.157
> 
> 标签：javascript, html-table

我有一张如下表

```
<table>
<tr>
<td>Item1</td><td>Price-100</td><td>1</td><td><input type="button" value="add one"/>
</tr>
<tr>
<td>Item2</td><td>Price-120</td><td>4</td><td><input type="button" value="add one"/>
</tr>
<tr>
<td>Item3</td><td>Price-90</td><td>2</td><td><input type="button" value="add one"/>
</tr>
</table> 
```

当我单击一个按钮时，我想将行的第 3 个单元格的值增加 1。如何获取单击按钮所在行中的那个单元格的值。

我尝试使用带有`<tr>`表标签的 id 属性创建。

```
var tableRow = $('#tr1').find('td');
var origVal = parseInt($(tableRow[2]).text());
origVal+=1;
$(tableRow[2]).text(origVal); 
```

但是是否可以在不向表记录添加 id 的情况下获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:57:57.583

```
<script>
function inc()
{
  var val = parseInt(document.getElementById('myid').value);
  val++;
  document.getElementById('myid').value =val;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:57:19.510

如果你可以使用[jQuery](http://jquery.com/)

```
$('table input[type="button"]').click(function() {
        cell = $(this).parent().prev();
        cell.text(parseInt(cell.text()) + 1);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:05:15.693

这里是完整的解决方案，除了JS函数你还需要修改你的HTML。

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function increment(row)
    {
        var row = row -1;
        var existing_value = Number($('#mytable tr:eq('+row+') > td:eq(2)').text());
        $('#mytable tr:eq('+row+') > td:eq(2)').text(existing_value+1)
    }
</script>

<table id="mytable">
    <tr>
        <td>Item1</td><td>Price-100</td><td>1</td><td><input type="button" value="add one" onClick="increment(1);" />
    </tr>
    <tr>
        <td>Item2</td><td>Price-120</td><td>4</td><td><input type="button" value="add one" onClick="increment(2);" />
    </tr>
    <tr>
        <td>Item3</td><td>Price-90</td><td>2</td><td><input type="button" value="add one" onClick="increment(3);" />
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:52:44.887

使用 jQuery，您可以：

```
<script>
    $('table button').click(function() {
        var $td = $(this).parent().prev();
        var val = parseInt($td.text(), 10) + 1;
        $td.text(val);
    });
</script> 
```

# asp.net-mvc - 在 MVC4 中动态/编程添加区域注册

> ID：13862321
> 
> 赞同：0
> 
> 时间：2012-12-13T14:49:21.260
> 
> 标签：asp.net-mvc

有人知道如何以动态/编程方式添加 AreaRegistrations 吗？

我希望能够编写一些选择 AreaRegistrations 的逻辑。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:33:05.997

这篇文章似乎比您所要求的更广泛，但它确实处理了一种动态添加 AreaRegistrations 的方法。

[动态扩展应用程序的功能？](https://stackoverflow.com/questions/11023748/dynamically-extending-features-of-an-application)

希望有帮助。

# symfony - 如何禁用将数据插入数据库（FR3DLdapBundle）？

> ID：13862322
> 
> 赞同：1
> 
> 时间：2012-12-13T14:49:24.897
> 
> 标签：symfony, fr3dldapbundle

如果 ldap 认证成功，FR3DLdapBundle 会将数据插入 DB，但 DB 中不存在数据。

我该如何禁用它？

我已经有一个包含许多用户名和角色的用户表，我不想在其中插入更多数据抛出 LdapBundle。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:35:44.100

我从**Maks3w**得到了答案 更多细节见这里：[https ://github.com/Maks3w/FR3DLdapBundle/issues/19](https://github.com/Maks3w/FR3DLdapBundle/issues/19)

# c# - 从 linq 查询对象列表中更新列表对象

> ID：13862330
> 
> 赞同：0
> 
> 时间：2012-12-13T14:49:43.097
> 
> 标签：c#, asp.net, linq, list, gridview

我有一个 GridView 数据源，它是对会话中列表的 linq 查询。

```
List<Invoice> returnInvoices = (List<Invoice>)Session["Invoices"];

    var partInvoices = from i in returnInvoices
                       where i.PartNo == partNo
                       select new
                       {
                           i.InvoiceID,
                           i.InvoiceNo,
                           i.InvoiceLine,
                           i.InvoiceDate,
                           i.OrderNo,
                           i.OrderLine,
                           i.OrderRel,
                           i.OrderLineItem,
                           i.OrderLineQty,
                           i.CustomerPO,
                           i.Serialized
                       };

    GridView3.DataSource = partInvoices;
    GridView3.DataBind(); 
```

当我从 GridView 中选择一行时，我需要更新原始会话列表中的相关对象，其中包含的对象比 GridView 更多。（即，所有部分的发票，而不仅仅是 linq 查询中的部分）

我的问题是，如何将 GridView 中的选定对象与原始列表相关联？我想使用 GridView.SelectedIndex 但这不起作用，因为 GridView 上的 0 很可能是原始列表上的 382！

我有点卡住了，不知道该怎么做，任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:57:30.467

您必须使用 invoiceid 在会话中找到对象并更新通过网格更新的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:57:46.330

只是不要在查询中创建新对象（匿名类型），而是绑定到实际对象。

```
List<Invoice> returnInvoices = (List<Invoice>)Session["Invoices"];

var partInvoices = returnInvoices
                       .Where(invoice => invoice.PartNo == partNo)
                       .ToList();

GridView3.DataSource = partInvoices;
GridView3.DataBind(); 
```

如果由于某些原因无法做到这一点，事情就会开始变得有点混乱。您可以将实际对象和在 LINQ 查询中创建的对象之间的映射存储在字典或类似的东西中，但最佳解决方案实际上取决于您的需求。

# web-services - 了解 SOA 架构

> ID：13862333
> 
> 赞同：0
> 
> 时间：2012-12-13T14:49:57.780
> 
> 标签：web-services, soap, wsdl, soa, uddi

我正在开发一个基于 SOAP 的 SOA 项目。好吧，我在网上看了很多教程，但我仍然有同样的问题，所有文章和博客，甚至eclipse的官方文档都告诉你如何使用IDE助手或这样的API和框架（例如：JAX-WS， CXF）创建一个 Web 服务并为您提供一些 SOAP、WSDL 和 UDDI 的定义作为奖励，但它们都没有解释 SOA 是如何工作的、发布和部署 WS 的过程是如何完成的以及 C/S req/resp 是如何完成的调用远程 Web 服务的过程是使用所有这些实体 SOAP、WSDL 和 UDDI 以及 SOA 项目中存在的其他文件（XML 文件和 java 文件）来完成的。我读过很多电子书，但仍然不明白 SOA 是如何工作的。pliiiz 我需要你们的帮助，我真的很不安和困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T15:56:55.343

不要太拘泥于面向服务的架构 ( [SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture) ) 这个术语，因为它实际上更像是一个营销术语，它描述了一种众所周知且实践过的软件开发方法，该方法将程序制作成可以在广泛的范围内重用的专用组件应用程序。它还可以描述将这种软件开发方法应用于业务流程建模，其中业务单元和工作流被模块化并被视为单独的服务，而不是存在于泡沫中的单一流程，有些人称之为[面向服务建模](http://en.wikipedia.org/wiki/Service-oriented_modeling)概念的不同但相关的应用.

虽然 SOA 与模块化有很多共同点，但它也增加了这样的要求，即您的单独代码模块不仅可以相互操作和集成（即可以很好地协同工作），而且还可能与世界上其他所有人的代码相互协作，并且它们可以通过一些定义明确的机制获得。

SOA“纯粹主义者”可能会告诉您，要使您的软件“符合 SOA”（注意：这不是真实的，因为没有单一的规则集或服务管理机构），您需要将其编写为[SOAP](http://en.wikipedia.org/wiki/SOAP) Web服务、发布和维护一个 WSDL，它可以充当您与任何实施方之间的合同，并遵循相关的[WS-* 规范](http://www.servicetechspecs.com/ws)。然而，实际上[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)和其他轻量级模块化/集成/可重用性方法与 SOA 的概念一样多。

如果您确实想成为 SOA 的“专家”，那么请仔细阅读以下规范的每一个字：

> **发现**
> 
> *   [UDDI](http://uddi.org/pubs/uddi_v3.htm)
> *   [RDDL](http://www.rddl.org/)
> *   [XRI](http://docs.oasis-open.org/xri/2.0/specs/xri-resolution-V2.0.html)
>     *   [XRDS](http://docs.oasis-open.org/xri/xrd/v1.0/xrd-1.0.html)
> 
> **消息传递**
> 
> *   [肥皂 1.1](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/)
> *   [肥皂 1.2](http://www.w3.org/TR/soap12/)
>     *   [SOAP over JMS](http://www.w3.org/TR/soapjms/)
>     *   [MTOM](http://www.w3.org/TR/soap12-mtom/) (Msg Trans 优化机制)
> *   [WS-寻址](http://www.w3.org/Submission/ws-addressing/)
> 
> **元数据**
> 
> *   [WSBPEL](http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.0-OS.html)
> *   [WSDL 1.1](http://www.w3.org/TR/wsdl)
> *   [WSDL 2.0](http://www.w3.org/TR/wsdl20/)
> *   [WADL](http://www.w3.org/Submission/wadl/)
> *   [WSFL](http://itee.uq.edu.au/~infs7201/Assessments/Assignment%201%20Material/WSFL.pdf)
> *   [WS-策略](http://www.w3.org/TR/ws-policy/)
> *   [WS-PolicyAssertions](http://www.w3.org/TR/ws-policy-guidelines/)
> *   [WS-PolicyAttachment](http://www.w3.org/TR/ws-policy-attach/)
> *   [WS-元数据交换](http://www.w3.org/TR/ws-metadata-exchange/)(WS-MEX)
> 
> **安全**
> 
> *   [WS-SecurityPolicy](http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.2/ws-securitypolicy.html)
>     *   [WS-安全](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=wss)
> *   [WS-Trust](http://docs.oasis-open.org/ws-sx/ws-trust/v1.4/ws-trust.html)
>     *   [WS-SecureConversation](http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.3/ws-secureconversation.html)
> 
> **服务质量**
> 
> *   [WS-ReliableMessaging](http://msdn.microsoft.com/en-us/library/ms951271.aspx) (WS-RM)
>     *   [WS-协调](http://docs.oasis-open.org/ws-tx/wscoor/2006/06)
>     *   [WS-AtomicTransactions](http://docs.oasis-open.org/ws-tx/wstx-wsat-1.2-spec.html)
>     *   [WS-TX](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=ws-tx)

（这些只是一些最重要的 WS-* 规范，[请参阅此处的完整列表](http://en.wikipedia.org/wiki/List_of_web_service_specifications)）

然后阅读以下基本 SOA 书籍的每一页：

*   [面向服务的架构——概念、技术和设计](http://servicetechbooks.com/ctd)
*   [企业集成模式](http://en.wikipedia.org/wiki/Enterprise_Integration_Patterns)
*   [RESTful Web 服务](http://www.crummy.com/writing/RESTful-Web-Services/)

但是，我实际上并不建议这样做，因为阅读材料太多了。不过我的建议是，当您按照 SOA 方法编写自己的程序时，将它们用作参考，并注意在特定领域，关于下一步做什么的参考手册会派上用场。熟能生巧，与阅读书籍和学习有关标准和理论的一切知识相比，您将真正从处理现实世界的例子中学到更多。正如您所提到的，从使用 NetBeans 或 Eclipse 等 IDE 开箱即用的过于简单的 JAX-WS 和 JAX-RS Web 服务示例开始，然后尝试使用流行的 SOA 框架（如[CXF](http://cxf.apache.org/docs/sample-projects.html)、[Axis2](http://axis.apache.org/axis2/java/core/docs/userguide-samples.html#clients) ）附带的一些示例或[RESTlet](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet/303-restlet.html)。

一般来说，当您编写代码时，会不断问自己您的代码是否是：

1.  可在其他应用程序或域中重用
2.  使其核心功能在内部可扩展并可从外部访问（尤其是通过网络连接，即[HTTP](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)）
3.  以易于解析/处理（并因此集成）的格式提供输出数据或元数据，例如[XML](http://www.w3.org/XML/)、[JSON](http://www.json.org/)或许多相关数据语言和子语言中的一种
4.  能够按需提供元数据来描述其内部工作，从而使其集成自动化成为可能
5.  尽可能专业化和模块化；同时，如果已经存在其他类似的专用[API](http://en.wikipedia.org/wiki/Application_programming_interface)或 Web 服务，最好使用它们而不是重新发明轮子

人们可能会使用许多其他问题和标准，但恕我直言，这些是最重要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T05:59:35.767

将 SOA 视为一组这样或那样的技术是错误的。我也不同意 SOA 只是一个营销术语，尽管它确实名声不好，并且被营销和炒作弄糊涂了。

面向服务的架构是一种架构风格。就像在一个架构的蓝图中一样，它对服务应该如何以及应该是什么服务设置了约束，并定义了一组组件并定义了它们的交互。下图显示了 SOA 与 REST，您可以看到它们源自一些常见的样式（例如，它们都构建在客户端/服务器上），但也来自不同的样式，其中 SOA 构建在[管道和过滤器](http://www.cs.olemiss.edu/~hcc/csci581oo/notes/pipes.html)上，而 REST 没有（您可以构建 RESTful SOA 但你必须更加努力:)) ![在此处输入图像描述](../Images/bdbaf8a774a4f84df3727a0ea01a36b0.png)

SOA 非常重视接口。因此，与 OO 不同，例如，您有 4 个不同的组件来定义一个接口。消息、捆绑消息的合同、交付合同的端点以及管理合同交付方式/时间的策略。

![在此处输入图像描述](../Images/6ec370ad4963ffd1d84c34c34ad1917d.png)

构建具有明确边界和良好粒度的服务（这是棘手的部分）可以让您以灵活的方式组合服务，从而让您更快地实现业务功能。请原谅我敲自己的鼓，但您可以在我的 SOA 模式一书的[第 1 章和第 10 章](http://www.manning.com/rotem/SOAp_SampleCh01.pdf)中[阅读更多关于什么是 SOA 和 REST 与 SOA 的内容](http://www.manning.com/rotem/SOAp_SampleCh10.pdf)

# sql - 如何将列表视图中的选定项目插入数据库

> ID：13862334
> 
> 赞同：1
> 
> 时间：2012-12-13T14:49:57.223
> 
> 标签：sql, vb.net

我有许多文本框和 4 个列表视图。每个列表视图都包含许多选项。用户在文本框中输入一些数据并从列表视图中选择任意数量的选项。然后将所有这些插入到数据库中的一行中。目前，我正在从每个列表视图中收集所有选定的选项，并将它们连接到一个字符串中，每个列表一个字符串并插入连接的字符串。

```
 'retrieve reference type 1s selected
    For i = 0 To listRef3.CheckedItems.Count - 1
        selectedRef3.Add(listRef3.CheckedItems(i).Text)
    Next
    'join array contents into one delimited string to be added to the database
    refType3 = String.Join(",", selectedRef3.ToArray()) 
```

然而，这使得从列表视图中检索单个选择变得棘手，因为我希望能够在以后根据选择过滤不同的数据库。

是否可以创建一个插入语句，将每个列表视图选择动态添加到数据库中的特定列，因为用户可以从列表中选择任意数量的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:43:02.420

您应该能够通过在现有连接语句的基础上构建一点点来构建所需的语句（我假设您从检查项目中获得的文本类似于“ref1”等。我理解正确了吗？）。

```
Dim cols, vals, insertStatement As String

cols = String.Join(", ", selectedRef3.ToArray())
vals = "@" & String.Join(", @", selectedRef3.ToArray())

insertStatement = "insert into ListTable (" & cols & ") VALUES (" & vals & ")" 
```

如有错误请见谅；我的 VB 有点生疏了。

# zend-framework2 - 在 ZF2 中注册视图助手路径

> ID：13862335
> 
> 赞同：1
> 
> 时间：2012-12-13T14:49:59.663
> 
> 标签：zend-framework2, view-helpers

我正在从 Zend Framework 1.12 迁移到 2.0。到目前为止，我已经学会了如何注册单独的自定义视图助手。是否也可以为（多个）视图助手注册路径？

在 ZF1 中，我通过将以下内容放入 application.ini 来完成此操作：

```
resources.view.helperPath.Application_View_Helper = APPLICATION_PATH "/views/helpers" 
```

结果是：

`$this->myHelper1`（以及 ...2、...3 等）

会自动加载：

```
MyApp/module/Application/src/Application/View/Helper/MyHelper1.php 
```

如何在 ZF2 中实现类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:14:04.943

您需要在配置中注册所有自定义助手，如下所示：

```
'view_helpers' => array(
    'invokables' => array(
        'myHelper1' => 'Application\View\Helper\MyHelper1',
        'myHelper2' => 'Application\View\Helper\MyHelper2',
    ),  
), 
```

因为所有助手调用都来自 Zend\View\Renderer\PhpRenderer 魔术方法 __call()，所以我认为可以通过扩展原始 PhpRenderer 并覆盖 plugin() 或 __call() 方法来注册路径。

但不推荐通过路径注册助手。ZF2 是一个基于 Service 的框架，包括 Helpers/Plugins/Controllers 在内的一切都应该是预先建立的服务，需要在配置中定义，这对性能和安全性都有好处。

# javascript - 使用 JavaScript 将数据发布到 iFrame

> ID：13862337
> 
> 赞同：0
> 
> 时间：2012-12-13T14:50:02.357
> 
> 标签：javascript, http, post, iframe, get

我目前正在编写一个任何人都可以放在他们网站上的小部件。

目前，当单击按钮时，会打开一个带有长 url（带有加密数据）的 iFrame。但是，如果要加密的数据量很大，可能会出现问题，因为在 IE8 中 URL 长度只能是 2k。

我想要做的（没有 jQuery）是将此数据发布到 iFrame 而不是使用 GET。

我已经看到了使用 来创建隐藏表单的方法`target="iframename"`，但这并没有真正的帮助，因为我不想在另一个不属于我的网站上创建表单。

是否有另一种无需生成表单即可发布到 iFrame 的解决方案。

Targetet 浏览器是 IE8+（和 chrome/ff/safari 等）。我们的小部件不支持 IE7&6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:20:29.487

> 我已经看到了使用 target="iframename" 创建隐藏表单的方法，但这并没有真正的帮助，因为我不想在另一个不属于我的网站上创建表单。

这实际上没问题，您可以使用 Javascript 写入您的 iFrame，因此您可以在您身边创建表单，然后 .submit() iframe 内的表单以获取您的网站。

查看[使用 Javascript 或 jQuery 将元素写入子 iframe](https://stackoverflow.com/questions/997986/write-elements-into-a-child-iframe-using-javascript-or-jquery)

# jtextpane - 如何使文本在 Jtextpane 中可点击？

> ID：13862338
> 
> 赞同：1
> 
> 时间：2012-12-13T14:50:01.977
> 
> 标签：jtextpane, clickable

基本上我正在本体中实现搜索功能。所以当我输入关键字进行搜索时，在本体中进行搜索，并在JTextpane中显示相应的结果。现在我想要的是当用户单击该结果中的某些术语时，它应该再次对该术语执行与关键字相同的搜索功能并将其显示在 JTextpane 中。那么如何使 JTextpane 中的一些文本可点击并实现点击它的功能呢？例如：

对于关键字白内障，它显示类似这样的内容
//description
白内障是一种眼科疾病
//description

所以当我点击 Opthalmology 时，我应该能够再次实现对 Opthalmology 的搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:31:12.383

为可点击关键字添加自定义属性（或通过点击检测关键字，`viewToModel`将点击点转换为`Document's`偏移量）。

然后进行搜索并插入内容。

也许您可以提供一个[SSCCE](http://sscce.org)来展示您拥有的东西并说出您想要实现的目标。

# javascript - “不安全的 JavaScript 尝试使用 URL 访问框架”错误导致 JavaScript 翻转失败

> ID：13862339
> 
> 赞同：3
> 
> 时间：2012-12-13T14:50:05.437
> 
> 标签：javascript, iframe, youtube, embed, unsafe

我正在尝试在 XSL 页面中嵌入 YouTube 视频，但不断收到以下错误：

```
Unsafe JavaScript attempt to access frame with URL [URL removed] from frame with URL http://www.youtube.com/embed/[video code removed]?showinfo=0&rel=0&fs=1\. Domains, protocols and ports must match. 
```

使用以下简单的 iframe。

```
<iframe width="663" height="373" src="http://www.youtube.com/embed/[video code removed]?showinfo=0&amp;rel=0&amp;fs=1" frameborder="0"></iframe> 
```

从查找此问题的研究来看，该错误通常不会影响页面上已经存在的 JavaScript。然而，在我们的例子中，它对我拥有的任何悬停效果都有相当糟糕的影响。我尝试了许多不同的修复方法，包括通过 Javascript 实例化视频，但无济于事。希望有大神知道答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T12:43:29.300

我认为问题在于 YouTube 出于某种原因试图联系调用者框架并且它被禁用，因为这将是一个跨域调用。

也许这篇文章可以帮助制定政策： [HTML5，沙盒 iframe](http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/)

此外，您可以根据 Google 的文档指定“origin”参数：

> 作为一项额外的安全措施，您还应该在 URL 中包含 origin 参数，指定 URL 方案（http:// 或 https://）和主机页面的完整域作为参数值。虽然来源是可选的，但它可以防止恶意第三方 JavaScript 被注入您的页面并劫持您的 YouTube 播放器的控制权。

目前我能想到的就只有这些了。希望能帮助到你。

# java - Maven Unicode 编码构建失败

> ID：13862343
> 
> 赞同：0
> 
> 时间：2012-12-13T14:50:33.347
> 
> 标签：java, eclipse, maven, unicode, utf-8

我有一个测试通过 Eclipse 但由于 unicode 问题在 Maven 中失败。测试使用这个字符：ä - 测试检查字符的长度，在 eclipse 中它是一个但 maven 将它转换为 2 个字符：├ñ。有谁知道我怎样才能让 maven 表现得与 eclipse 一样？

到目前为止，我已经尝试添加

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

到根目录和测试所在项目的 pom 中。另外，我尝试直接添加到 pom 的 maven 插件部分，如下所示：

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-jar-plugin</artifactId>
    <!-- <version>2.1</version>-->
<configuration>
  <outputEncoding>UTF-8</outputEncoding>
</configuration> 
```

Eclipse 设置为使用 UTF-8。我没有想法了。如果我有什么明显做错的事情，请告诉我。

为什么这在 Eclipse 中运行良好但在 Maven 中运行良好？！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:54:38.850

尝试在插件的配置中进行设置：

```
<plugin>
    ...
    <configuration>
        ...
        <encoding>UTF-8</encoding>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:02:44.377

最好的办法是避免在源文件中使用 unicode 字符。相反，使用 unicode 转义语法，即`"\u00E4"`.

# ms-access - 当列数据是动态的时，如何对交叉表查询中的列进行排序？

> ID：13862344
> 
> 赞同：8
> 
> 时间：2012-12-13T14:50:34.920
> 
> 标签：ms-access, sorting, ms-access-2010, crosstab

我一直在对这个主题进行一些研究，但似乎找不到可行的解决方案，或者一个解释得足够好让我实施的解决方案。

如果您曾经在 Access 中创建过交叉表查询，您就会知道默认情况下 Access 按字母顺序对列进行排序。您可以通过转到“**属性**”对话框并按照您喜欢的顺序输入**列标题来更改此顺序。**这是一个真正的痛苦，但正如另一个网站上的一位回答者所说，“这只是一次痛苦*！* ”

好吧...如果您的列是动态的，则情况并非如此。就我而言，我在表格中有第二列，其中包含我想使用该字段进行排序的列标题。我想我可以将排序列的详细信息附加到描述列的前面（在其他地方已经建议），但我不认为这是解决问题的最优雅的方法。这尤其是一个问题，因为排序信息是系统数据，对交叉表的最终用户无用。

有谁知道这个问题的解决方案？如果是这样，您能否详细说明对交叉表查询的动态列进行排序的步骤？

我认为这个问题在所有常用的 Access 版本（Access 2003+）中都存在，但为了以防万一，我使用的是 Access 2010。

* * *

**更新**

这是一些非常简单的示例数据，有助于表达问题。在我的现场场景周围还有一些其他的复杂性，但这个数据集肯定能说明问题。

**表#1** 这是标题的来源。`Key`是列顺序的排序，是`Descriptions`交叉表中的输出标题。

```
+---------+---------------------------------------+
| Key     | Descriptions                          |
+---------+---------------------------------------+
| Kfsg2E  | Hey, this is accounting code X!       |
+---------+---------------------------------------+
| abR3    | This is yet another accounting code!  |
+---------+---------------------------------------+
| Gruu!   | Yet another accounting code           |
+---------+---------------------------------------+ 
```

**表#2**这是数据的存储 `P_Key + F_Key`是唯一的，这两个是表上的主键。

```
+---------+---------+-------+
| P_Key   | F_Key   | Value |
+---------+---------+-------+
| 1001    |Kfsg2E   | 1.0   |
+---------+---------+-------+
| 1001    |abR3     | 1.1   |
+---------+---------+-------+
| 1001    |Gruu!    | 1.2   |
+---------+---------+-------+
| 1002    |Kfsg2E   | 2.0   |
+---------+---------+-------+
| 1002    |abR3     | 2.1   |
+---------+---------+-------+
| 1002    |Gruu!    | 2.2   |
+---------+---------+-------+
| 2001    |Kfsg2E   | 3.0   |
+---------+---------+-------+
| 2001    |abR3     | 3.1   |
+---------+---------+-------+
| 2001    |Gruu!    | 3.2   |
+---------+---------+-------+ 
```

**交叉表结果** 这些被导出到 Excel 供用户更新。

```
+---------+---------------------------------+--------------------------------------+-----------------------------+
| P_Key   | Hey, this is accounting code X! | This is yet another accounting code! | Yet another accounting code |
+---------+---------------------------------+--------------------------------------+-----------------------------+
| 1001    | 1.0                             | 1.1                                  | 1.2                         |
+---------+---------------------------------+--------------------------------------+-----------------------------+
| 1001    | 2.0                             | 2.1                                  | 2.2                         |
+---------+---------------------------------+--------------------------------------+-----------------------------+
| 1001    | 3.0                             | 3.1                                  | 3.2                         |
+---------+---------------------------------+--------------------------------------+-----------------------------+ 
```

这就是 Access 对这些列进行排序的方式。但是，我需要它看起来像下表，它是根据 中的键排序的`Table #1`，而不是`Description`.

```
+---------+--------------------------------------+-----------------------------+---------------------------------+
| P_Key   | This is yet another accounting code! | Yet another accounting code | Hey, this is accounting code X! |
+---------+--------------------------------------+-----------------------------+---------------------------------+
| 1001    | 1.1                                  | 1.2                         | 1.0                             |
+---------+--------------------------------------+-----------------------------+---------------------------------+
| 1001    | 2.1                                  | 2.2                         | 2.0                             |
+---------+--------------------------------------+-----------------------------+---------------------------------+
| 1001    | 3.1                                  | 3.2                         | 3.0                             |
+---------+--------------------------------------+-----------------------------+---------------------------------+ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T19:48:33.773

多次遇到相同的场景后，我准备了一种可重复的方式来将 In 列表添加到 PIVOT 子句的末尾。这样做将按照*数据透视字段*In 列表中元素的顺序对交叉表查询中的列进行排序。 [此构造的文档可从 MSDN 获得](http://msdn.microsoft.com/en-us/library/office/ff192901.aspx)。解决方案是需要由表单或其他事件上的命令按钮触发的过程。请查看 Sub 下方的屏幕截图。

```
Public Sub SortPivotColumns(querynameSource As String, queryname As String, SortName As String, SortColumnNameField As String, SortIndexName As String, NonPivotFieldCount As Integer, ParamArray ParamArr() As Variant)

' This sub goes through several steps to effectively adds an In list that sorts the 'Columns' of a crosstab query in MS Access
' 13 November 2012
' E Easterly
'
' This technique uses several components.
' 1) The original unmodified cross tab query (querynameSource)
' 2) The resulting, columns-have-been-sorted query (query)
' 3) An index table which has two columns, a numeric index used for sorting and the column name
' 4) A table or query that can be joined on the column names of the cross tab query to update the index table
'    The name of the table or query would be 'SortName'
'    The field in 'SortName' that the crosstab query columns are joined against is the 'SortColumnNameField'
'    The field in 'SortName' that has the desired order is the SortIndexName
' 5) A number which specifies the count of non-pivot/row heading columns (NonPivotFieldCount)
' 6) An optional array that contains any parameters needed for the query
'
'
'   USE:
'
'   SortPivotColumns "qryCrosstab_Initial", _
'                 "qryCrosstab_Sorted", _
'                 "tblKeyDescriptions", _
'                 "Descriptions", _
'                 "NumericIndexForSorting", _
'                  1
'
'
'
'
Dim rs As DAO.Recordset
Dim db As Database
Dim fld As DAO.Field
Dim sql As String
Dim ColumnHeading As Variant
Dim qdf As QueryDef
Dim qdfSRC As QueryDef
Dim UpdateIndexSQL As Variant

DoCmd.SetWarnings False 'Turn off warnings

Set db = CurrentDb

Set qdfSRC = db.QueryDefs(querynameSource)
Set qdf = db.QueryDefs(queryname)
qdf.sql = qdfSRC.sql

If Not (IsEmpty(ParamArr)) Then
    Dim i As Integer
    For i = 0 To UBound(ParamArr)
        qdf.Parameters(i) = ParamArr(i)
    Next
End If

' First, get the list of fields from the query

Set rs = qdf.OpenRecordset

' Then, create a temporary indexing table
If Not IsNull(DLookup("Name", "MSysObjects", "Name='ttblSortCrosstabColumns' And Type In (1,4,6)")) Then
    db.Execute "DROP TABLE ttblSortCrosstabColumns"
End If

db.Execute "CREATE TABLE ttblSortCrosstabColumns (FieldIndex INTEGER , ColumnName TEXT(250))"

' And populate it with the current index and column names from queryname
  For Each fld In rs.Fields
    If fld.OrdinalPosition > (NonPivotFieldCount - 1) Then
        DoCmd.RunSQL "Insert into ttblSortCrosstabColumns VALUES(" & fld.OrdinalPosition & ", """ & fld.Name & """)"
    End If
  Next fld
  Set fld = Nothing
  rs.Close
  Set rs = Nothing

' Now, the temporary table is joined with the sort table/query and the indexes are updated
UpdateIndexSQL = ("  UPDATE ttblSortCrosstabColumns " & _
                  "  INNER JOIN " & SortName & " ON ttblSortCrosstabColumns.ColumnName=" & SortName & "." & SortColumnNameField & _
                  "  Set ttblSortCrosstabColumns.FieldIndex = [" & SortIndexName & "]")
DoCmd.RunSQL (UpdateIndexSQL)

' Then, the column headings are added to a string to prepare the In list
sql = "SELECT ttblSortCrosstabColumns.ColumnName FROM ttblSortCrosstabColumns ORDER BY ttblSortCrosstabColumns.FieldIndex"
Set rs = db.OpenRecordset(sql)
    rs.MoveFirst
    ColumnHeading = "'" & rs.Fields(0).Value & "'"
    rs.MoveNext

    Do While Not rs.EOF
    ColumnHeading = ColumnHeading & ", '" & rs.Fields(0).Value & "'"
    rs.MoveNext
    Loop

rs.Close
Set rs = Nothing
' db.Execute "DROP TABLE ttblSortCrosstabColumns"

Dim cs As Variant

' Set qdf = db.QueryDefs(queryname)   ' may not need this

' The query is updated with the In list
cs = Left$(qdf.sql, Len(qdf.sql) - 3) & " In(" & ColumnHeading & ");"

qdf.sql = cs

' Take a look at the resulting query sql by uncommenting the below section
' Debug.Print cs

DoCmd.SetWarnings True  'Turn warnings back on

End Sub 
```

在下面的屏幕截图中，请注意 tblKeyDescriptions 和 tblPFValues。这些来自问题。qryCrosstab_Initial 类似于上述问题中提供的查询。表单用于运行过程并打开前后查询。

![屏幕截图 交叉表排序](../Images/d1d86c9940366591540e4adf660f2c6a.png)

一个整数字段 (NumericIndexForSorting) 被添加到 tblKeyDescriptions，因为 sub 需要一个数字索引来对列名进行排序。

![带有数字索引的键描述表](../Images/94ba27a658c7f420fbc9350c3f521095.png)

现在，检查在初始查询和排序查询的 SQL 视图中突出显示的 In 列表。

![PIVOT 子句中显示的 SQL 差异](../Images/d428b8e9dfc715304c6ae82b12cff98a.png)

这就是对交叉表查询中的列进行排序所需的全部内容。动态生成 In 列表是 sub 的目的。

注意：每次运行查询时都需要运行子程序，因此使用诸如命令按钮 On Click 事件之类的事件将序列绑定在一起会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:22:36.880

这是使用一些 Access 和 Excel的***不太完美的解决方案：***

1.  制作交叉表时，对列使用 Table1.Key。
2.  在 Excel 文件中的新选项卡（称为“查找”？）上，制作 Table#1
3.  在 Excel 文件的主选项卡的第一行（即粘贴数据集的位置），创建一堆 Vlookup() 公式来查看第 2 行并从查找表中提取正确的描述。
4.  将数据集粘贴到第 2 行。结果将如下表所示，其中第一行实际上是一堆 Vlookup，它们提取了正确的列描述。
5.  要求用户忽略或删除第 2 行。

我不知道你的脚本有多复杂，但如果这些数据是通过自动化粘贴到 Excel 文件中的，那么你可以隐藏第 2 行并跳过第 6 步。

| P_Key | 这又是一个会计代码！ | 另一个会计代码 | 嘿，这是会计代码X！ |
| --- | --- | --- | --- |
| 粘贴到这里 | abR3 | 咕噜！ | Kfsg2E |
| 1001 | 1.1 | 1.2 | 1.0 |
| 1001 | 2.1 | 2.2 | 2.0 |
| 1001 | 3.1 | 3.2 | 3.0 |

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-28T15:53:10.870

如果您知道查询的预期结果并且可以预测列数，那么对交叉表查询的结果进行排序的最简单方法是在属性表的列标题字段中指定正确的顺序。

![访问列标题属性表](../Images/1a06cc11e2b6f8891fcd3f610079391d.png)

# php - 用于在多个页面上进行用户身份验证的 PHP 会话变量

> ID：13862345
> 
> 赞同：3
> 
> 时间：2012-12-13T14:50:34.687
> 
> 标签：php, mysql, database, session-variables

我正在创建一个在后端带有登录页面的内容管理网站。

我为内容管理系统的主菜单创建了一个工作登录页面。

下图显示了我的代码。

**第一步 - 用户访问内容管理系统主菜单的 URL：代码如下所示**。

```
<?php
session_start();

echo $_SESSION['valid_user'];

if(!isset($_SESSION['valid_user']))
{
$URL="error.php";
header("Location: $URL");
}
  ?> 
```

**可能会发生两件事。1 如果他们在被引导到错误页面之前没有登录。** 然后他们可以选择访问登录页面并使用他们的用户名和 pswd 登录。

我已经声明了 ?php start_session();? 在顶部

```
<?php

$login = $_POST['name'];
$loginpass =$_POST['password'];

 if((isset($login)) || (isset($loginpass))){

    //echo "<p> form has been submitted</p>";

    include("connect.php");

    $query = "select * from logins where 
        username='$login' and pswd=MD5('$loginpass')";
      $result = mysql_query($query) or die($query."<br/><br/>".mysql_error());

    $count=mysql_num_rows($result);
    echo $count;

if($count > 0){

   echo "<p>you are logged in as $login please 
   go to <a href='home2.php'>edt     home</a>.</p>";
    echo "<p><a href='logout.php'>log out</a> $login?</p>";
    $_SESSION['valid_user'] = $login;

}else{

    echo "<p>sorry login failed</p>";

}

  }else{

    //echo "<p> form  hasn't been submitted</p>";
    //Visitor needs to enter a name and password                
    echo "<h1>Please Log In</h1> <form method='post' action='index2.php'>";
    echo "<p>Username: <input type='text'name='name'></p>";
    echo "<p>Password: <input type='password' name='password'></p>";
    echo "<p><input type='submit' name='submit' value='Log In'></p></form>";        
 }

 ?> 
```

到目前为止，所有这些功能对我来说都很好。

但是，我想确保如果用户绕过主页 url 并决定直接跳转到编辑菜单中的某个部分，他们将被强制登录（如果他们尚未登录），或者 php 将检查他们的凭据如果他们已经登录。

这是我想要放置验证的页面顶部的代码示例。我不确定顶部是否已经有数据库表连接会影响会话变量。

```
 <?php

include("connect.php");
//echo "all good here";

//grab the data from the table 'designs'
$query ="SELECT * FROM designs ORDER BY id";

//send SQL statement to MySQL server
$display = mysql_query($query);
$num = mysql_numrows($display);

 mysql_close();
 ?> 
```

我知道我想在所有检查“vaild_user”会话变量的php页面上放置php脚本，并且还让用户能够通过指向logout.php文件来注销。我只是不知道在这一点上如何去做。

我对这一切都很陌生，并且通常会遵循清晰的指南，就像我确定的大多数人一样。

任何人都可以提供的任何帮助将不胜感激

再次感谢！。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:55:47.830

基本上，您的每个“受保护”页面上都会有类似这样的片段：

```
<?php

session_start();
if (!isset($_SESSION['valid_user'])) {
   header("Location: login.php");
   exit();
}
?>
<a href="logout.php">Logout</a> 
```

如果他们已登录，他们将获得一个注销链接和页面的其余部分。如果他们还没有登录，他们会被重定向到登录页面。

会话不受数据库连接或任何其他代码的影响。它们**会**受到在您开始会话之前执行输出或尝试进行重定向的影响。这将触发“无法修改标头 - 输出从第 XXX 行开始”警告并禁用重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:55:56.603

您只需要在用户将信息提交到登录页面后验证用户的凭据。然后您可以设置一个会话变量（这里似乎您正在使用`$valid_user`，如果该变量存在，那么他们已经通过身份验证。

实际上，出于安全原因，您永远不应该将他们的密码存储在系统的任何位置。您应该在登录页面上散列他们的密码输入，然后将其与散列的数据库值进行比较。

您可以让用户多次登录以增加安全性（例如，当您从注册用户内容移动到管理员内容时，phpbb 会这样做），尽管这对于通用安全性而言不是必需的。

这是否回答你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:01:33.730

在 session_start() 之后使用每个页面顶部的全局变量

```
$_SESSION['username']; 
```

# node.js - 在 WebStorm 中为通过 npm 安装的 node.js 模块启用自动完成

> ID：13862347
> 
> 赞同：11
> 
> 时间：2012-12-13T14:50:40.697
> 
> 标签：node.js, intellij-idea, webstorm

我正在使用 WebStorm 5.0.4 开发 node.js 应用程序。

我使用全局安装了几个节点模块

```
npm install -g 模块名称
```

并使用将它们链接到项目中

```
npm 链接模块名称
```

自动补全不适用于任何 npm 安装的模块。它仅适用于核心模块（例如`http`or `path`）。

此外，对于我从 npm 安装的模块调用的任何函数，WebStorm 都会给出警告“未解析的函数或方法 xyz”。

如何使 WebStorm 自动完成并通常了解我安装的模块`require`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T01:15:15.987

我不确定这是否说明了您的特殊情况，但是我在 WebStorm 5.0.4 中遇到了类似的问题，而所需的任何内容都不会自动完成。我可以通过进入我的项目设置，导航到 JavaScript | 来解决这个问题。库，检查“Node.js 核心模块”和“Node.js 全局”，然后单击应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T09:06:53.513

我的答案仅适用于 WebStorm 7 及以后的版本：

1.  打开设置对话框（文件 | 默认设置）并选择 JavaScript | 节点.js。

    1.  指定 Node.js 解释器的路径，Node.js 版本将自动确定。

    2.  单击配置，然后单击“下载和配置”按钮将 Node.js 源下载到 IntelliJ 系统本地文件夹。将从提取的核心模块源文件中创建一个名为“Node.js v. Core Library”的 JavaScript 库。

    3.  最后为刚刚创建的 JavaScript 库定义一个使用范围。默认情况下，整个项目将被添加到使用范围。如果这对您不起作用，您可以通过单击“编辑使用范围”超链接来调整使用范围。

如果您需要更多信息，请阅读 JetBrain 的官方博客关于[附加 Node.js 核心模块的源代码](http://blog.jetbrains.com/webide/2012/03/attaching-the-sources-of-node-js-core-modules/)，这应该可以理想地解决您的问题，至少它实际上对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T15:01:17.870

根据我在评论中发布的链接，您需要使用
Preferences -> Directories添加全局 npm 目录

您可以通过运行以下命令找出您的全局目录在哪里：

```
> npm ls -g 
```

来源：http: [//youtrack.jetbrains.com/issue/WEB-1880](http://youtrack.jetbrains.com/issue/WEB-1880)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T03:49:44.613

当您使用逗号声明多个模块时会发生这种情况，例如：

```
var sys = require("sys"),
    http= require("http"); 
```

在上面的示例中，sys 只会将导出作为自动完成选项，而 http 可以正常工作。如果你这样做：

```
var sys = require("sys");
var http= require("http"); 
```

sys 和 http 都可以正常工作。

# jquery - 在 ASP.NET 用户控件上使用 JQuery？

> ID：13862352
> 
> 赞同：2
> 
> 时间：2012-12-13T14:50:48.347
> 
> 标签：jquery, asp.net, user-controls

我已经查看了在 asp.net 用户控件中使用 JQuery 的示例，当我尝试论坛中表达的示例时，我仍然没有得到 JQuery 的任何响应。
任何人都可以帮我解决这个问题吗？整个控件标记如下所示。
以防万一不是很明显，我想实现一个接受到 txtNoteText 文本框中的字符的过滤器。

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="NotesEdit.ascx.cs" Inherits="InstallationProjectManager.Restricted.NotesEdit" %>
<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI, Version=2011.2.915.40, Culture=neutral, PublicKeyToken=121fae78165ba3d4" %>
<script src="<%# ResolveUrl("~/javascript/jquery-1.8.3.min.js") %>" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('<%= txtNoteText.ClientID %>').bind('keypress', function(event) {
            var regex = new RegExp("^[a-zA-Z0-9]+$");
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (!regex.test(key)) {
                event.preventDefault();
                return false;
            }
        });
    });
</script>
<table id="tblNotesEdit" style="border-collapse: collapse; border-spacing: 2px; border: 15px; padding: 1px; width: 100%;">
    <tr>
        <td>
            <table style="margin-left: 10px; width: 100%;">
                <tr><td><asp:HiddenField runat="server" ID="hfNoteID" Value='<%# DataBinder.Eval(Container, "DataItem.ID") %>'/></td></tr>
                <tr><td colspan="2"><h2 class="headerMajor">Add/Edit Job Notes</h2></td></tr>
                <tr>
                    <td class="verticleTableStyle">Note Type:</td>
                    <td>
                        <telerik:RadComboBox ID="cbxNoteType" Runat="server" Enabled='<%# (DataItem is GridInsertionObject) %>' SelectedValue='<%# DataBinder.Eval(Container, "DataItem.NoteTypeID") %>' DataSourceID="dsNoteTypes" DataTextField="Description" DataValueField="ID" Skin="Simple" />
                        <asp:SqlDataSource ID="dsNoteTypes" runat="server" ConnectionString="<%$ ConnectionStrings:InstallationProjectManager.Properties.Settings.conDB %>" SelectCommand="SELECT [ID], [Description] FROM [NoteTypeEnumeration]"></asp:SqlDataSource>
                        <asp:RequiredFieldValidator runat="server" ID="rfvCBXNoteType" EnableClientScript="True" ControlToValidate="cbxNoteType" ErrorMessage="Note type is required to create a note record." InitialValue="Pick One" Display="None" />
                        <ajaxToolkit:ValidatorCalloutExtender ID="vceRFVCBXNoteType" runat="server" TargetControlID="rfvCBXNoteType"/>
                    </td>
                </tr>

                <tr><td class="verticleTableStyle">Note Text:</td><td><telerik:RadTextBox ID="txtNoteText" runat="server" SkinID="LongTextBox" Culture="en-US" Text='<%# DataBinder.Eval(Container, "DataItem.Message") %>' EmptyMessage="Notes" Skin="Simple" Rows="20" Width="90%" Height="50%" TextMode="MultiLine" /></td></tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
                <tr>
                    <td colspan="2">
                        <telerik:RadButton ID="btnUpdate" Text="Update" runat="server" Skin="Telerik" CommandName="Update" Visible='<%# !(DataItem is GridInsertionObject) %>'><Icon PrimaryIconUrl="../Images/saveHS.png" /></telerik:RadButton>
                        <telerik:RadButton ID="btnInsert" Text="Insert" runat="server" Skin="Telerik" CommandName="PerformInsert" Visible='<%# DataItem is GridInsertionObject %>'><Icon PrimaryIconUrl="../Images/saveHS.png" /></telerik:RadButton>
                        &nbsp;
                        <telerik:RadButton ID="btnCancel" Text="Cancel" runat="server" Skin="Telerik" CommandName="Cancel" CausesValidation="False"><Icon PrimaryIconUrl="../Images/305_Close_16x16_72.png" /></telerik:RadButton>
                    </td>
                </tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
                <tr><td></td></tr>
            </table>            
        </td>
    </tr>
</table> 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:55:17.083

您需要在 jquery 选择器中为 DOM 元素 ID 加上 # 前缀：

```
$('#<%= txtNoteText.ClientID %>').bind(... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:57:21.330

改变`#`

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#<%= txtNoteText.ClientID %>').bind('keypress', function(event) {
            var regex = new RegExp("^[a-zA-Z0-9]+$");
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (!regex.test(key)) {
                event.preventDefault();
                return false;
            }
        });
    });
</script> 
```

# android - Android 铃声播放在 4.2 上崩溃

> ID：13862353
> 
> 赞同：3
> 
> 时间：2012-12-13T14:50:56.533
> 
> 标签：android, android-4.2-jelly-bean, ringtone

我在运行 Android 4.2 的 Nexus 4 上播放铃声时遇到问题。

当我尝试播放铃声时，我看到以下异常：

```
java.lang.NullPointerException at android.media.Ringtone.play(Ringtone.java:228) 
```

我的代码如下：

```
RingtoneManager ringtoneManager = new RingtoneManager(context);
ringtoneManager.setType(AudioManager.STREAM_NOTIFICATION);
Ringtone ringtone = ringtoneManager.getRingtone(index);
Ringtone ringtone.setStreamType(AudioManager.STREAM_NOTIFICATION);

if (ringtone != null)
{
    ringtone.play();
} 
```

索引值根据用户选择传递到我的方法中（我向他们展示了要选择的铃声列表）。在任何情况下，我将其设置为行为都没有区别。

此代码在运行 2.3 和 4.0.4 的另外两台设备上运行时完美运行。

当我调试时，我可以看到铃声管理器返回的铃声中的 uri 为空（并且在我的其他设备上设置为有效值）。

我做错了什么还是这可能是 4.2 中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:23:43.907

我想您需要先检查该位置是否存在铃声。所以试试

**编辑：**试试这个。

```
RingtoneManager ringtoneManager = new RingtoneManager(ActivityName.this);
ringtoneManager.setType(AudioManager.STREAM_NOTIFICATION);
Cursor c = ringtoneManager.getCursor();
Ringtone ringtone = ringtoneManager.getRingtone(index);
ringtone.setStreamType(AudioManager.STREAM_NOTIFICATION);
if(ringtone != null && ringtoneManager.getRingtoneUri(position) != null){    
    ringtone.play();
} 
```

# objective-c - obj-c for iOS 中日期格式模式的综合列表

> ID：13862356
> 
> 赞同：15
> 
> 时间：2012-12-13T14:51:08.070
> 
> 标签：objective-c, ios, ios6, nsdateformatter, date-formatting

是否有支持的日期格式模式/令牌的实际、全面列表？我一直在查看[API 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDateFormatter)，他们提到了其中的一些，例如`MM`，但是其余的在哪里？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T14:58:54.063

Apple 导入了 Unicode 标准，因此[此处](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)提供了总结日期格式字段的附录。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-13T15:49:05.823

如果您点击“[数据格式化指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)”的链接，您将看到以下信息：

> 格式字符串使用 Unicode 技术标准 #35 中的格式模式。标准的版本随操作系统的发布而变化：
> 
> *   iOS 5.0-5.1 中的格式化程序使用版本[tr35-19](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)。
> *   iOS 4.0-4.2 中的格式化程序使用版本[tr35-15](http://www.unicode.org/reports/tr35/tr35-15.html#Date_Format_Patterns)。
> *   iOS 3.2 中的格式化程序使用版本[tr35-12](http://www.unicode.org/reports/tr35/tr35-12.html#Date_Format_Patterns)。
> *   OS X v10.8 和 iOS 6.0 中的格式化程序使用版本[tr35-25](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)。
> *   OS X v10.7 和 iOS 4.3 中的格式化程序使用版本[tr35-17](http://www.unicode.org/reports/tr35/tr35-17.html#Date_Format_Patterns)。
> *   OS X v10.6 和 iOS 3.0-3.1 中的格式化程序使用版本[tr35-10](http://www.unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)。

# android - 使用 ORMLite 从 DAOObject 获取 Android 光标的问题

> ID：13862360
> 
> 赞同：0
> 
> 时间：2012-12-13T14:51:26.687
> 
> 标签：android, ormlite, android-cursor

我正在尝试从 ORMLite PreparedQuery 中检索游标。我的目标是只对我的结果查询进行分页，这样设备内存就不会太过载。我已经阅读了 Gray 关于如何将 QueryBuilder 对象[Android Cursor 与 ORMLite 一起用于 CursorAdapter](https://stackoverflow.com/questions/7159816/android-cursor-with-ormlite-to-use-in-cursoradapter)的指南。这也是[Android 中带有 CursorAdapter 的 ORMLite](https://stackoverflow.com/questions/12416964/ormlite-with-cursoradapter-in-android)。但是当我尝试这样做时：“iterator.getRawResults();” 好吧，迭代器类无法识别 getRawResults 方法。它只支持常用方法close()、getEquals()、next()等...

我可以从我的查询中成功检索对象列表，所以这不是一个空查询问题......

我错过了什么吗？我的 pom.xml 已附上。

这是带有对象列表的测试

```
public List<Produto> getProdutoDecricao2(String padrao) throws SQLException {

    List<Produto> listaProduto = null;
    QueryBuilder<Produto, String> queryBuilder = produtoDao.queryBuilder();
    Where<Produto, String> where = queryBuilder.where();
    SelectArg selectArg = new SelectArg();
    selectArg.setValue('%'+padrao+'%');
    where.like("descricao", selectArg);

    PreparedQuery<Produto> preparedQuery = queryBuilder.prepare();      
    listaProduto = produtoDao.query(preparedQuery);

    return listaProduto;

} 
```

我的游标尝试失败...

```
//creation of DAO
private Dao<Produto,String> produtoDao;

public Cursor getProdutoDecricao(String padrao)  {
    List<Produto> listaProduto = null;
    QueryBuilder<Produto, String> queryBuilder = produtoDao.queryBuilder();
    Where<Produto, String> where = queryBuilder.where();
    SelectArg selectArg = new SelectArg();
    selectArg.setValue('%'+padrao+'%');
    where.like("descricao", selectArg);

// when you are done, prepare your query and build an iterator
    PreparedQuery<Produto> preparedQuery =  queryBuilder.prepare();
    CloseableIterator<Produto> iterator = produtoDao.iterator(preparedQuery);

    AndroidDatabaseResults results = (AndroidDatabaseResults)iterator.getRawResults();
    Cursor cursor = results.getRawCursor();

    iterator.close();

    return cursor;

    } 
```

这是项目 pom.xml

```
<properties>
    <android-platform>8</android-platform>
    <android-maven-plugin-version>3.4.0</android-maven-plugin-version>
    <maven-compiler-plugin-version>2.3.2</maven-compiler-plugin-version>
    <java-version>1.6</java-version>
    <maven-eclipse-plugin-version>2.8</maven-eclipse-plugin-version>
    <org.codehaus.jackson-version>1.9.7</org.codehaus.jackson-version>
</properties>

<repositories>         
    <repository>
        <id>org.springframework.maven.snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <url>http://maven.springframework.org/snapshot</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>         <!-- For developing against latest Spring milestones -->
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>

</repositories>
<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>${android-maven-plugin-version}</version>
            <configuration>
                <sdk>
                    <platform>${android-platform}</platform>
                    <path>/Users/rav/Documents/Android/android-sdk-macosx</path>
                </sdk>
                <emulator>
                    <avd>Android4.1</avd>
                </emulator>
                <deleteConflictingFiles>true</deleteConflictingFiles>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>${maven-compiler-plugin-version}</version>
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>${maven-eclipse-plugin-version}</version>
            <configuration>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>true</downloadJavadocs>
            </configuration>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                                    <artifactId>android-maven-plugin</artifactId>
                                    <versionRange>[3.1.1,)</versionRange>
                                    <goals>
                                        <goal>proguard</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>2.2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.android</groupId>
        <artifactId>spring-android-rest-template</artifactId>
        <version>1.0.0.RELEASE</version>
    </dependency> 
    <dependency>
        <groupId>com.j256.ormlite</groupId>
        <artifactId>ormlite-android</artifactId>
        <version>4.9</version>
    </dependency>
     <dependency>
            <groupId>com.j256.ormlite</groupId>
            <artifactId>ormlite-android</artifactId>
            <version>4.9</version>
            <exclusions>
                <exclusion>
                    <groupId>com.j256.ormlite</groupId>
                    <artifactId>ormlite-core</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
    <dependency>
        <groupId>org.roboguice</groupId>
        <artifactId>roboguice</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.findbugs</groupId>
        <artifactId>jsr305</artifactId>
        <version>1.3.9</version>
     </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
        <version>r6</version>
    </dependency>
    <dependency>
        <groupId>jgilfelt.android-viewbadger</groupId>
        <artifactId>android-viewbadger</artifactId>
        <version>1</version>
    </dependency>
    <dependency>
        <!-- Using Jackson for JSON marshaling -->
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>${org.codehaus.jackson-version}</version>
    </dependency>
</dependencies> 
```

**编辑好吧，首先我使用的 ORMLite 4.9 版本并不是真正的官方版本，并且没有我想要使用的方法。在我将 pom.xml 更改为使用 android-4.42 和 core-4.42 之后，尽管我尝试解决此问题，但 Maven 并没有让我编译程序，给出了 Dalvik 错误（“Conversion to Dalvik format failed with error 1”） ，我做不到。

我在没有 Maven 的新工作区中创建了一个新项目并手动添加了库，现在一切正常。这似乎是一个 Maven 问题。我希望它可以帮助某人。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:16:00.917

> 当我尝试这样做时：“iterator.getRawResults();” 好吧，迭代器类无法识别 getRawResults 方法。

我对此感到困惑。 [`CloseableIterator`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/CloseableIterator.html#getRawResults%28%29)从 4.30 版本开始支持此方法。您可能需要升级到更新的版本。

```
AndroidDatabaseResults results =
    (AndroidDatabaseResults)iterator.getRawResults();
Cursor cursor = results.getRawCursor(); 
```

您说这是一次失败的尝试，但代码是正确的。请让我知道您遇到什么异常或遇到什么问题，我可以解决它们。

# android - Android - 将图像下载到 byte[] 并在 ImageView 中将其显示为 Drawable

> ID：13862361
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:51:27.093
> 
> 标签：android, image, download, android-asynctask, byte

我正在尝试将图像从 URL 下载到字节 []，然后将其显示为 imageView 中的可绘制对象。我使用 AsyncTask 下载该方法，然后使用 onPostExecute() 显示它，但它似乎不起作用，我没有收到任何错误。

[固定的]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:00:10.740

尝试像这样在 WebView 中显示图像

```
 byte[] imageRaw = yourImage;
  String image64 = Base64.encodeToString(imageRaw, Base64.DEFAULT);
  String pageData = "<img src=\"data:image/jpeg;base64," + image64 + "\" />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:02:16.157

不知道这是否有帮助，但在一个类似的应用程序中，我`Bitmap`也使用了创建了一个`BitmapFactory`并更新了一个`ImageView`using `setImageBitmap`，后跟`refreshDrawableState`.

# windows - 如何将 FTP 重定向到 HTTP

> ID：13862364
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:51:45.160
> 
> 标签：windows, http, ftp

我已经用谷歌搜索了一段时间，我发现的只是从 HTTP 重定向到 FTP 的方法。但是我需要从 FTP 重定向到 HTTP 是否可能？

这是上下文。我们通过向客户发送一个从 FTP 获取文件的 exe 将我们的应用程序分发给我们的客户。我们使用的应用程序是 wyUpdate。我们发送一个带有该 exe 的客户端文件，告诉安装程序从哪里下载应用程序。每次他们启动应用程序时，exe 都会检查客户端文件中指定站点的更新。我们遇到了 FTP 问题，现在我们正在迁移到 HTTP。由于我们在客户端文件中进行了更改，因此对于新客户来说这不是问题，但是对于旧客户，他们需要从我们这里重新下载客户端文件。这意味着将新客户发送给我们所有的客户。有没有办法将 FTP 服务器重定向到我们的新 HTTP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:00:21.223

您需要考虑设置支持 WebDAV 的 HTTP 服务器。我推荐 Nginx 或 Apache。我相信 WebDAV 支持 FTP 协议，因此尽管您无法重定向用户，但您将能够通过 HTTP 服务器而不是 FTP 服务器为他们提供文件。

# c# - 如何通过连接从 linq 结果中获取所有列

> ID：13862365
> 
> 赞同：6
> 
> 时间：2012-12-13T14:51:46.607
> 
> 标签：c#, linq, dynamic, join

我有一些不同类型的列表，我想加入并获得动态结果。

假设 list1 是基本列表。清单 2 和 3 是带有额外信息的清单。有时我想要这些信息，而在其他运行中我不需要它们（其中之一）。

如果我需要额外的信息，我知道我想要获得哪些列。

```
public struct DateAndValue1
{
   public uint DBDate { get; set; }
   public double Value1 { get; set; }
}

public struct DateAndValue2
{
   public uint DBDate { get; set; }
   public double Value1 { get; set; }
   public bool myBool { get; set; }
   public int someInt { get; set; }
}

List<DateAndValue1> list1,list2;
List<DateAndValue2> list3;

bool addList2, addList3;
list1 = new List<DateAndValue1>();
list1.Add(new DateAndValue1 { DBDate = 1, Value1 = 10 });
list1.Add(new DateAndValue1 { DBDate = 2, Value1 = 20 });
list1.Add(new DateAndValue1 { DBDate = 3, Value1 = 30 });
list1.Add(new DateAndValue1 { DBDate = 4, Value1 = 40 });
list1.Add(new DateAndValue1 { DBDate = 5, Value1 = 50 });
list1.Add(new DateAndValue1 { DBDate = 6, Value1 = 60 });

list2 = new List<DateAndValue1>();
list2.Add(new DateAndValue1 { DBDate = 1, Value1 = 100 });
list2.Add(new DateAndValue1 { DBDate = 1, Value1 = 200 });
list2.Add(new DateAndValue1 { DBDate = 3, Value1 = 300 });
list2.Add(new DateAndValue1 { DBDate = 4, Value1 = 400 });
list2.Add(new DateAndValue1 { DBDate = 5, Value1 = 500 });
list2.Add(new DateAndValue1 { DBDate = 5, Value1 = 600 });

list3 = new List<DateAndValue2>();
list3.Add(new DateAndValue2 { DBDate = 1, Value1 = 1000, myBool = true });
list3.Add(new DateAndValue2 { DBDate = 2, Value1 = 2000, myBool = true });
list3.Add(new DateAndValue2 { DBDate = 2, Value1 = 3000, myBool = true });
list3.Add(new DateAndValue2 { DBDate = 4, Value1 = 4000, myBool = true });
list3.Add(new DateAndValue2 { DBDate = 6, Value1 = 5000, myBool = true });
list3.Add(new DateAndValue2 { DBDate = 6, Value1 = 6000, myBool = true }); 
```

假设需要列表 1 和 2 的信息：

```
List<dynamic> result = (from a in list1
                        join b in list2
                        on a.DBDate equals b.DBDate
                        select new { DBDate = a.DBDate, Result_A1 = a.Value1, Result_B1 = b.Value1 }).ToList<dynamic>(); 
```

有时需要列表 3 中的信息（现在为 true，它将始终添加到结果中）：

```
if(true)
{
    result = (from so_far in result
              join c in list3
              on so_far.a.DBDate equals c.DBDate
              select new {so_far, Result_C1 = c.Value1,Result_C2=c.myBool }).ToList<dynamic>();
} 
```

这确实有效，但 a 和 b 的结果合并在一列中。由于我将使用大约 10 个可能联合或不联合的列表（也具有不同的类型），因此很难知道最终结果，因此制作如下内容：

```
result = (from so_far in result
        join c in list3
        on so_far.a.DBDate equals c.DBDate
        select new {DBDate= so_far.DBDate, Result_A1=so_far.Result_A1,Result_B1=so_far.Result_B1 , Result_C1 = c.Value1,Result_C2=c.myBool }).ToList<dynamic>(); 
```

如何动态获取不同列中可用的所有结果，最好跳过所有连接列表的 DBDDate，以便 DBDate 仅在一列中。问候，

马蒂斯

==================================================== ==========

额外信息（代码）我试图让结果可读：

```
public DataTable LINQToDataTable<T>(IEnumerable<T> varlist)
    {
            DataTable dtReturn = new DataTable();

            PropertyInfo[] columnNames = null;

            if(varlist == null)
                return dtReturn;

            try
            {
                foreach(T rec in varlist)
                {
                    if(columnNames == null)
                    {
                        columnNames = ((Type)rec.GetType()).GetProperties();
                        foreach(PropertyInfo pi in columnNames)
                        {
                            Type colType = pi.PropertyType;

                            if((colType.IsGenericType) && (colType.GetGenericTypeDefinition() == typeof(Nullable<>)))
                            {
                                colType = colType.GetGenericArguments()[0];
                            }

                            dtReturn.Columns.Add(new DataColumn(pi.Name, colType));
                        }
                    }

                    DataRow dr = dtReturn.NewRow();

                    foreach(PropertyInfo pi in columnNames)
                    {
                        dr[pi.Name] = pi.GetValue(rec, null) == null ? DBNull.Value : pi.GetValue
                        (rec, null);
                    }

                    dtReturn.Rows.Add(dr);
                }
            }
            catch
            {
                return dtReturn;
            }
            return dtReturn;
    } 
```

并尝试了这个：

```
 private class NestedPropertyInfo
    {
        public PropertyInfo Parent { get; set; }
        public PropertyInfo Child { get; set; }
        public string Name { get { return Parent.Name + "_" + Child.Name; } }
    }

    public DataTable LINQMultipleSelectToDataTable<T>(IEnumerable<T> varlist)
    {
        DataTable dtReturn = new DataTable();
        NestedPropertyInfo[] columns = null;

        if(varlist == null)
            return dtReturn;

        foreach(T rec in varlist)
        {
            if(columns == null)
            {
                columns = (
                    from p1 in rec.GetType().GetProperties()
                    from p2 in p1.PropertyType.GetProperties()
                    select new NestedPropertyInfo { Parent = p1, Child = p2 }
                    ).ToArray();

                foreach(var column in columns)
                {
                    var colType = column.Child.PropertyType;

                    if((colType.IsGenericType) && (colType.GetGenericTypeDefinition() == typeof(Nullable<>)))
                    {
                        colType = colType.GetGenericArguments()[0];
                    }

                    dtReturn.Columns.Add(new DataColumn(column.Name, colType));
                }
            }

            DataRow dr = dtReturn.NewRow();

            foreach(var column in columns)
            {
                var parentValue = column.Parent.GetValue(rec, null);
                var childValue = parentValue == null ? null : column.Child.GetValue(parentValue, null);
                dr[column.Name] = childValue ?? DBNull.Value;
            }

            dtReturn.Rows.Add(dr);
        }

        return dtReturn;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:01:50.047

没有简单的方法可以做到这一点。

因为`dynamic`无论如何你都可以将它`ExpandoObject`与一些辅助方法一起使用。

您将需要以下助手：

```
public dynamic GetFlatExpando(object o)
{
    IDictionary<string, object> result = new ExpandoObject();

    foreach(var property in o.GetType().GetProperties())
    {
        var value = property.GetValue(o, null);
        var expando = value as ExpandoObject;
        if(expando == null)
            result[property.Name] = value;
        else
            expando.CopyInto(result);
    }

    return result;
}

public static class Extensions
{
    public static void CopyInto(this IDictionary<string, object> source,
                                IDictionary<string, object> target)
    {
        foreach(var member in source)
        {
            target[member.Key] = member.Value;
        }
    }
} 
```

而且，只需在所有查询`.Select(GetFlatExpando)`中调用之前使用：`ToList`

```
List<dynamic> result = (from a in list1
                        join b in list2
                        on a.DBDate equals b.DBDate
                        select new { DBDate = a.DBDate, Result_A1 = a.Value1,
                                     Result_B1 = b.Value1 })
                        .Select(GetFlatExpando)
                        .ToList<dynamic>();

if(true)
{
    result = (from so_far in result
              join c in list3
              on so_far.DBDate equals c.DBDate
              select new {so_far, Result_C1 = c.Value1,Result_C2=c.myBool })
              .Select(GetFlatExpando)
              .ToList<dynamic>();
} 
```

这段代码有一个很好的副作用，`DBDate`它只存在一次。

要使绑定到数据网格起作用，您需要另一个扩展方法（将其放入`Extensions`上面的类中）：

```
public static DataTable ToDataTable(this IEnumerable<IDictionary<string, object>> source)
{
    var result = new DataTable();

    foreach(var rowData in source)
    {
        var row = result.NewRow();

        if(result.Columns.Count == 0)
        {
            foreach(var columnData in rowData)
            {
                var column = new DataColumn(columnData.Key,
                                            columnData.Value.GetType())
                result.Columns.Add(column);
            }
        }

        foreach(var columnData in rowData)
            row[columnData.Key] = columnData.Value;
        result.Rows.Add(row);
    }

    return result;
} 
```

像这样使用它：

```
var dataTable = result.Cast<IDictionary<string, object>>()
                      .ToDataTable(); 
```

# coldfusion - Coldfusion 分页 - 固定页码数

> ID：13862368
> 
> 赞同：2
> 
> 时间：2012-12-13T14:51:50.863
> 
> 标签：coldfusion, pagination, cfc

我正在使用[dopefly 的 Pagination.cfc](http://www.dopefly.com/projects/pagination/)在我正在构建的网站上创建分页，但是我无法让它具体地做出我想要的反应。

我试图得到它，所以它开始这样

```
*1* 2 3 4 ... x        
1 *2* 3 4 ... x        
1 2 *3* 4 ... x         
1 2 3 *4* ... x         
1 ... 4 *5* 6 7 ... x 
```

因此，它将始终在中间显示 4，在适当的时候将第一页和最后一页显示在末尾。

然而，目前它正在

```
*1* 2 3 4 ... x
1 *2* 3 4 5 ... x
1 2 *3* 4 5 6 ... x
1 2 3 4 *5* 6 7 ... x
1 2 3 4 5 *6* 7 8 ... x
1 ... 3 4 5 6 *7* 8 9 ... x
1 ... 4 5 6 7 *8* 9 10 ... x 
```

所以它会一直运行，直到显示 8 个，然后它会开始在中间保持 7，而不是停留在 4，然后当我们点击第 5 页时，始终在中间显示 4，第一个/最后一个在结尾。

**e：**我尝试过使用文档中定义的`setNumericEndBufferCount()`和`setNumericDistanceFromCurrentPageVisible()`变量，但是我对 cfc 及其行为方式的了解不足以修改实际值`cfc`（如下面的[邓肯](https://stackoverflow.com/questions/13862368/coldfusion-pagination-fixed-number-of-page-numbers/13862878#13862878)建议）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:56:29.350

Joshua，感谢您使用我的分页库！抱歉，它的行为与您希望的不完全一样。您的问题看起来类似于最近发布的功能请求，请求[setFixedMaximumNumbersShown](http://paginationcfc.riaforge.org/index.cfm?event=page.issue&issueid=528D04E8-95D1-4C79-00B755FED626EE78)选项，但具有某种弹性计数和某种弹性，有点像亚马逊的分页，但正如您所注意到的，它只会随着您对记录的分页而增长。您可以自己解决此问题，但您将不得不稍微扩展您对 CFC 的使用限制。

`bouncyPagination.cfc`解决方案是创建一个扩展我的组件的组件（我们称之为`Pagination.cfc`. 您将需要覆盖至少一种方法来完成您的任务。您可以先阅读[有关 Extending Pagination.cfc 的文档](http://www.dopefly.com/projects/pagination/pagination_cfc_documentation.cfm#Section6)，它可能会有所帮助。您的代码将如下所示。

```
<cfcomponent extends="Pagination">
    <cffunction name="renderNumericLinksHTML">
        <!--- Your improved bouncy numeric links HTML generation here --->
        <!--- Start by copying & pasting code from the matching --->
        <!--- renderNumericLinksHTML method in Pagination.cfc --->
    </cffunction>
</cfcomponent> 
```

查看`Pagination.cfc`renderNumericLinksHTML 函数中的代码。从复制和粘贴开始，然后`BouncyPagination.cfc`根据您想要的任何逻辑重写这些数字链接的写入方式。您甚至可以添加一些方法来获取和设置数字的边界，在您的示例中，`4`就是幻数。我想你会在你的组件中添加这样的东西。

```
<!--- Set your new parameter's default by overriding the init method --->
<cffunction name="init">
    <cfset variables.my.BouncyBounds = 4 />
    <return super.init() />
</cffunction>

<!--- Create getter/setter. Note the rendered=false is a flag to force HTML recomposition when a UI option changes. --->
<cffunction name="getBouncyBounds">
    <cfreturn variables.my.bouncyBounds />
</cffunction>
<cffunction name="setBouncyBounds">
    <cfargument name="_BouncyBounds" type="string" />
    <cfset variables.my.BouncyBounds = arguments._BouncyBounds/>
    <cfset variables.my.rendered = false />
</cffunction> 
```

您的新`renderNumericLinksHTML`方法将调用`getBouncyBounds()`以编程方式更改较新的弹性分页方法的边界。

我希望这对你有所帮助——这就是我在没有为你做作业的情况下所做的。如果您编写了适合您的东西，并且您可以使用 BSD 许可证共享，请将代码发送给我，我将在下一个版本中包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:18:24.960

从[文档](http://www.dopefly.com/projects/pagination/pagination_cfc_documentation.cfm)看来，您可以通过使用`NumericDistanceFromCurrentPageVisible`. 问题在于指出了当前链接的任一侧要使用多少个链接。因此，您可以将其设置为 2，它将在当前的任一侧显示 2 个链接，即 5 个组。要实现 4 个组，您必须在之前显示 1 个链接，之后显示 2 个链接（反之亦然）.. . 或 3 个链接在链接列表的开头或结尾处之后或之前。

建议你深入研究 CFC 本身，看看它如何处理 NumericDistanceFromCurrentPageVisible，看看你是否可以扩展它以获取 2 个参数来显示之前/之后的链接数量。或者，修改它以使用该参数作为在组中总共显示多少链接的基础。

# javascript - 填写时自动提交单个表单输入框

> ID：13862371
> 
> 赞同：0
> 
> 时间：2012-12-13T14:52:02.270
> 
> 标签：javascript

我被要求做一个非常简短的简单项目，以允许读取 ID 卡的磁条，并显示数据库中是否已支付或未支付会费的结果。

我已经完成了所有这些工作，并且正在尝试消除一些烦人的行为。磁条信息以具有单个输入文本字段的形式捕获。用户必须单击提交才能进入第二个隐藏页面，我在其中解析信息并分配给变量，为数据库搜索做准备。

我想删除用户必须按下提交按钮的要求。看来我应该能够触发输入变量的长度大于 0。

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%> 
```

. .

```
<body onload = document.get_id.fID_Num.focus();> 
```

. .

```
<form id="get_id" name="get_id" method="post" action="card_swipe_process.asp">
  <table width="100%" border="5" cellpadding="2">
      <tr>
          <td width="45%" class="PIN_LABEL">Swipe ID Card</td>
          <td width="10%">&nbsp;</td>
          <td width="45%"><label for="fID_Num"></label>
          <input name="fID_Num" type="text" id="fID_Num" maxlength="15" /></td>
      </tr>
      <tr>
          <td class="PIN_LABEL">&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
      </tr>
      <tr>
          <td class="PIN_LABEL">&nbsp;</td>
          <td>&nbsp;</td>
          <td><input type="submit" name="ID_NUM_ENTER" id="ID_NUM_ENTER"              value="Submit" /></td>
      </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:58:45.027

我假设您在某处有读取卡号并将其放入框中的代码。只需添加`document.getElementById('get_id').submit()`到该代码。这样，用户仍然可以在需要时输入数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:58:59.507

对于充当“键盘楔”的条形码阅读器，我遇到了完全相同的问题。

启动一个 300 毫秒的计时器。每次“击键”清除并重新启动计时器后。计时器超时后，提交表单。

请参阅：[一个人停止打字后如何调用函数？](https://stackoverflow.com/questions/11172816/how-can-i-call-a-function-after-a-person-stops-typing)

```
var timer;

function onKeyUpHandler(e){
    timer = setTimeout(function() {document.get_id.submit()}, 300)    
}

function onKeyDownHandler(e) {
    clearTimeout(timer);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:12:55.033

```
<script>
function sub(){
var id = document.getElementById('ID_NUM_ENTER').value;
if(id.length >= 0)
document.getElementByTagName('form').submit();
</script> 
```

这必须工作，我建议在处理数据库时使用 ajax，它工作得更快。

# silverlight - 将折线点绑定到 ObservableCollection 不起作用

> ID：13862375
> 
> 赞同：3
> 
> 时间：2012-12-13T14:52:05.593
> 
> 标签：silverlight, binding, collections, points, polyline

我坚持将折线的点绑定到 ObservableCollection(Of Point)：

```
<UserControl
x:Class="GL.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="640" d:DesignWidth="840">
<Grid x:Name="LayoutRoot" Background="#ff444444">
    <Canvas Background="#333333" Width="800" Height="600">
        <Polyline x:Name="Linie" Stroke="Yellow" StrokeThickness="2" Canvas.Left="0" Canvas.Top="0" Width="800" Height="600" Fill="Gray" Points="{Binding Punkte}">
        </Polyline>
    </Canvas>
    <TextBlock Height="55" Name="tb" Foreground="White" FontSize="{Binding Path=TS}" Text="JUST A TEST!" />
    <Button Content="Add Point" Height="23" HorizontalAlignment="Left" Margin="745,617,0,0" Name="Button1" VerticalAlignment="Top" Width="75" />
</Grid> 
```

这是后面的代码：

```
Imports System.Windows
Imports System.Windows.Media
Imports System.Collections.ObjectModel

Partial Public Class MainPage
    Inherits UserControl

    Dim r As New Random(345)
    Private _punkte As New ObservableCollection(Of Point)
    Public Property Punkte As ObservableCollection(Of Point)
        Get
            Return _punkte
        End Get
        Set(value As ObservableCollection(Of Point))
            _punkte = value
            SetValue(Punkte_DP, _punkte)
        End Set
    End Property

    Private _ts As Integer
    Public Property TS As Integer
        Get
            Return _ts
        End Get
        Set(value As Integer)
            _ts = value
            SetValue(TS_DP, _ts)
        End Set
    End Property

    Public Punkte_DP As DependencyProperty = DependencyProperty.Register("Punkte", GetType(ObservableCollection(Of Point)), GetType(MainPage), New PropertyMetadata(New ObservableCollection(Of Point)))
    Public TS_DP As DependencyProperty = DependencyProperty.Register("TS", GetType(Integer), GetType(MainPage), New PropertyMetadata(New Integer))

    Public Sub New()

        Me.DataContext = Me
        InitializeComponent()

        Linie.DataContext = Me.Punkte
        Punkte.Add(New Point(100, 100))
        Punkte.Add(New Point(700, 300))

        TS = 25
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
        Punkte.Add(New Point(r.Next(0, 600), r.Next(0, 600)))
    End Sub
End Class 
```

当我运行它时，FontSize 得到更新，但没有一个点响应。正在绘制的线。每次单击按钮时集合都会变大，但没有任何反应。

我到底在这里想念什么？谢谢你的帮助！

问候， 罗伯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T15:07:23.123

多边形中的点未更新的原因是该[`Polygon.Points`](http://msdn.microsoft.com/en-us/library/system.windows.shapes.polygon.points(v=vs.95).aspx)属性采用 type 的值[`PointCollection`](http://msdn.microsoft.com/en-us/library/system.windows.media.pointcollection(v=vs.95).aspx)，并且 Silverlight 无法将 a 转换`ObservableCollection<Point>`为 a`PointCollection`本身。

您需要做的是添加一个从[转换](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.95).aspx)`ObservableCollection<Point>`为 的转换器`PointCollection`。应该执行以下操作：

```
public class ObservableCollectionToPointCollectionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var points = value as ObservableCollection<Point>;
        if (points == null)
        {
            return null;
        }

        var collection = new PointCollection();
        foreach (Point point in points)
        {
            collection.Add(point);
        }

        return collection;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // Not needed for one-way bindings.
        throw new NotImplementedException();
    }
} 
```

作为练习，我将把它留给您将其转换为 VB.NET。

要连接此转换器，请添加命名空间声明，例如

```
xmlns:myns="clr-namespace:YourNamespaceContainingTheConverter" 
```

到根`<UserControl>`标签，添加

```
<UserControl.Resources>
    <myns:ObservableCollectionToPointCollectionConverter x:Key="converter" />
</UserControl.Resources> 
```

在此标记结束之后但之前`<Grid>`，并修改`Points`您的绑定`Polygon`到

```
Points="{Binding Punkte, Converter={StaticResource converter}}" 
```

但是，我在使用您的代码时遇到了其他一些问题。

首先，当我第一次运行您的代码时，出现了一些“值不在预期范围内”的错误。原来这是因为[TextBlock.FontSize](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.fontsize(v=vs.95).aspx)必须有一个正值。`TS`我在分配到之前将初始化移动到`Me.DataContext`并且这些错误消失了。

其次，线路`Linie.DataContext = Me.Punkte`错了。这会将 的 DataContext 设置`Polygon`为您`ObservableCollection`的`Point`s。`{Binding Punkte}`Polygon 属性中的绑定`Points`告诉Silverlight 在以`Punkte`数据上下文命名的属性（即s`ObservableCollection`的属性）中查找集合。`Point`这将失败，因为`ObservableCollection`该类没有名为 的属性`Punkte`。`Punkte`此行应该被删除 - Polygon 将从其父级继承其数据上下文，该数据上下文确实具有名为 的属性。

第三，我用“普通”CLR 属性替换了您在 MainPage.xaml.vb 中使用的依赖属性，并`MainPage`实现了[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged(v=vs.95).aspx)。然后属性如下所示：

```
 public ObservableCollection<Point> Punkte
    {
        get { return _punkte; }
        set
        {
            _punkte = value;
            FirePropertyChanged("Punkte");
        }
    }

    public double TS
    {
        get { return _ts; }
        set
        {
            _ts = value;
            FirePropertyChanged("TS");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void FirePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

同样，请随意将其转换为 VB.NET。

我所做的最后一个更改是添加`FirePropertyChanged("Punkte")`对`Button1_Click`事件处理程序的调用。这让 Silverlight 知道可观察的点集合（以及转换后的 PointCollection）已更改，并且必须由 UI 更新。

通常，`ObservableCollection`在视图模型中对集合使用 s 足以使更改通知正常工作。但是，在这种情况下，它并不能很好地工作，因为在`ObservableCollection`传递给 UI 层之前，它正在被转换为另一个对象。因此，不会监听`CollectionChanged`由 触发的事件。`ObservableCollection`这不是您的代码本身的问题，它更多的是框架的限制。我确实看过是否可以编写一个`PointCollection`也实现的子类`INotifyCollectionChanged`，但这是不可能的，因为`PointCollection`is `sealed`。

与其只为`Add`s 触发此事件，不如在您的类中处理`ObservableCollection`'事件，并让此事件处理程序调用。这样，多边形将与集合的所有更改保持同步。`CollectionChanged``MainPage``FirePropertyChanged("Punkte")`

# java-me - 如何在 Ticker 中同步时间？

> ID：13862382
> 
> 赞同：1
> 
> 时间：2012-12-13T14:52:20.087
> 
> 标签：java-me, ticker

```
Date d = new Date();
Calendar c = Calendar.getInstance();
c.setTime(d);
String datum = c.get(Calendar.HOUR_OF_DAY)+":"+c.get(Calendar.MINUTE)+"h "+
c.get(Calendar.DAY_OF_MONTH)+"."+(c.get(Calendar.MONTH)+1)+"."+c.get(Calendar.YEAR);
//String Dateinstring = new String(datum.toString());
Ticker t = new Ticker (datum.toString());
joro.removeCommand(show);
joro.addCommand(back);
joro.setTicker(t);
String label = command.getLabel(); 
```

上面的代码仍然有价值并通过滚动重复它。它如何与实时同步？（时间可能会抖动到 1 分钟）。

# python - 将项目添加到其他服务器上的 python 脚本中的列表

> ID：13862383
> 
> 赞同：1
> 
> 时间：2012-12-13T14:52:24.793
> 
> 标签：python, list, networking

如何在服务器 A 上运行 python 脚本，该脚本可以将条目添加到服务器 B 上另一个 python 脚本中的列表项？（需要超高效。）

是否有任何简单的解决方案（或模块）可以帮助解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:01:33.227

我使用 xmlrpclib 远程调用函数。创建一个将值附加到全局数组的函数，然后使用 xmlrpclib 注册该函数并从机器 B 调用它。

它很容易使用。这是一个很好的起点：[http ://docs.python.org/2/library/xmlrpclib.html#boolean-objects](http://docs.python.org/2/library/xmlrpclib.html#boolean-objects)

做了一个例子：

```
#!/usr/bin/python
from SimpleXMLRPCServer import SimpleXMLRPCServer
import xmlrpclib

arrayToAppend = []

def appendArray(value):
    global arrayToAppend
    arrayToAppend.append(value)
    return 1

def valueOfArray():
    return arrayToAppend

server = SimpleXMLRPCServer(("localhost", 8000))
print "Listening on port 8000..."
server.register_function(appendArray, "appendArray")
server.register_function(valueOfArray, "valueOfArray")
server.serve_forever() 
```

然后像这样测试/使用它

```
>>> import xmlrpclib
>>> p = xmlrpclib.Server("http://localhost:8000")
>>> p.appendArray("test1")
1
>>> p.valueOfArray()
['test1']
>>> p.appendArray("test2")
1
>>> p.valueOfArray()
['test1','test2']
>>> 
```

# unicode - 你如何调用转义的十六进制代码表示法

> ID：13862385
> 
> 赞同：0
> 
> 时间：2012-12-13T14:52:27.227
> 
> 标签：unicode, ascii

字符的转义十六进制代码。

你有 \x ，然后是 ascii 字符的十六进制代码。像'\x48'

你怎么称呼它？

是否有将其转换为文本的在线工具？

例如通过使用python：

```
s = '\x48\x49'
s
'HI' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:58:38.747

如果您使用的是 firefox 或 chrome，如果您只需将字符串复制粘贴`'\x48\x49'`到他们的控制台，他们就可以将其转换为文本。但你也可以使用这个[http://jsfiddle.net/HHfdp/show/](http://jsfiddle.net/HHfdp/show/)

它们被称为十六进制转义序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:59:01.750

它可能有几个名字，但“十六进制转义”很好。

[您可以在String Literals](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)的 Python 文档中找到有关这些的更多信息。

# android - 在移动 HTC hd2 上运行 android 项目

> ID：13862386
> 
> 赞同：1
> 
> 时间：2012-12-13T14:52:30.833
> 
> 标签：android, mobile, dimensions

我创建了一个具有以下尺寸的项目：wsvga（平板电脑），7“，1024 x 600。有没有办法在我的手机上运行这个项目，htc h2d而不改变尺寸。我手机上的android版本是android jelly -豆4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:25:31.770

我猜你已经创建了一个 wsvga 分辨率的 avd 而不是项目

您始终可以在任何分辨率下运行项目，但如果未优化，用户界面可能无法正确显示。

# oracle - 在哪里调用 apex api 程序

> ID：13862387
> 
> 赞同：0
> 
> 时间：2012-12-13T14:52:33.193
> 
> 标签：oracle, api

我现在正在学习[Apex Api Reference](http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/toc.htm)。但我不明白我可以在哪里运行这个程序进行测试。我只发现 Apex_Item 包中的程序，我可以在选择查询中从标准 Sql 编辑器运行。对我来说，看起来 Apex_Instance_Admin 的程序应该从管理面板运行，但我找不到任何编辑器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:21:23.563

您应该能够从 SQL 编辑器或 SQL*Plus（如果您使用具有 APEX_ADMINISTRATOR_ROLE 的用户登录）运行任何 API 包。

# themes - Netbeans 7.2 深色主题未正确突出显示类变量

> ID：13862389
> 
> 赞同：0
> 
> 时间：2012-12-13T14:52:38.927
> 
> 标签：themes, netbeans-7

我最喜欢的 Netbeans 主题是今日挪威。与默认的白色主题一样，它用于将全局变量和类变量突出显示为绿色。现在没有了。默认主题仍然可以正常工作。我在我的两台电脑上都试过这个。我还有另一台装有 NB 7.0 的计算机，它可以正确突出显示。这是屏幕截图

默认主题

![在此处输入图像描述](../Images/9eec454b58d73e258441ad3bf402e62d.png)

今日挪威

![在此处输入图像描述](../Images/0c7a2e61bcd097ac3ad5bc5f3b74f08b.png)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:20:31.193

您可以随时自定义它。

去`Tools -> Options -> Fonts & Colors`。

然后选择“今日挪威”主题并在语言部分选择 Java。

在类别部分中查找字段声明和字段使用，并将当前前景值更改为您喜欢的颜色。我建议使用 RGB: 0, 153, 0 给它一个漂亮的绿色触感。

今日挪威也是我最喜欢的主题，我仍然想知道他们为什么改变它。

**编辑：**

另一种选择可能是从 NB 7.0 导出主题并将其导入 NB 7.2，但是我没有尝试过这种方法。

# sql-server - （定期）将 5 - 25K 记录从 Access DB 上传到（慢速）SQL Server 的替代方法

> ID：13862402
> 
> 赞同：0
> 
> 时间：2012-12-13T14:53:06.797
> 
> 标签：sql-server, ms-access, ms-access-2010

到目前为止，我一直从 Access DB 将 5K 和 15K 记录分别上传到本地托管的 SQL Server（同一建筑物），它们分别花费了大约 30 和 60 秒。

现在，我被踢出本地服务器（<5ms ping）并被迫迁移到美国的一台，它有 160ms 的 ping 时间。

上传现在需要 30 分钟和 90 分钟以上。我正在使用带有链接表的非常标准的 INSERT INTO 运行。提供一些快速的上下文。我收到一个批量文件，我必须对其进行过滤、选择特定列，然后复制/粘贴到 Access DB（所有文本（255））中，然后使用记录集将它们复制到具有特定数据类型字段和约束的类似表中以更改/清理一些领域等...

我需要回到更合理的上传时间，分别不超过 5 分钟和 10 分钟。使用服务器当前的 ping 时间，我看不到 INSERT INTO 语句会发生这种情况，因为我猜测延迟会影响每条记录的上传，因此寻找一种批量上传的方法或您可以建议的任何其他方式可能会改善这些时候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:27:20.470

由于您使用的是 SQL Server，您是否尝试过 IMPORT 功能而不是使用链接表？我认为您将获得严重的性能改进。

在 SSMS 中，右键单击数据库名称，转到 TASKS / IMPORT

这使用 SSIS 而不是链接表。

如果您喜欢导入显示的速度（而且我发现它非常快），那么您可以创建一个 SSIS 包并使用它来上传数据，并从命令提示符处执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:36:22.530

如果您不介意使用 C#/VB.NET，可以将 Access 数据加载到 DataTable，然后使用 SqlBulkCopy 将数据上传到 SQL Server。

1.  通过 OleDb 打开与 Access DB 的连接。[MSDN 有一个例子](http://msdn.microsoft.com/en-us/library/ms971485.aspx)。您可以跳过加载后的所有内容。

2.  设置表映射，然后上传数据。MSDN 有一个很好的、简洁的[例子](http://msdn.microsoft.com/en-us/library/ex21zs8x.aspx)。

这种方法**非常**快 - 我有一个批量上传过程，可以在 3 秒内上传 100k 行。我的行相当小，数据/服务器在同一台机器上，所以它处于最佳状态，但在大多数情况下我发现它非常快。**见下面的注释**

如果您遇到问题，我可以绘制一个快速的代码示例。

埃里克

**编辑**

性能来自[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)的使用。在程序中使用它是我的偏好，但您可以在 SQL 中使用它。它具有批量插入和传统插入的属性。它出现在 2008 年后的所有 SQL 版本中。

# oracle - Oracle：按具有保留名称的列排序

> ID：13862408
> 
> 赞同：0
> 
> 时间：2012-12-13T14:53:33.597
> 
> 标签：oracle, oracle11g, sql-order-by

如何按保留字的列名排序？例如：

```
select * from some_table t1 order by t1.mode; 
```

`mode`是我们的保留字。它无法更改，而且我需要 select 与 identifier 一起使用`t1`。到目前为止，我已经尝试过：

```
order by t1."mode", "t1.mode", t1.'mode', 't1.mode' 
```

没有任何运气

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:59:33.330

正确的方法是使用双引号。但是如果使用双引号，列名就会区分大小写。所以大概是

```
ORDER BY t1."MODE" 
```

# asp.net - 如何在不更改页面的情况下触发控制器上的操作

> ID：13862415
> 
> 赞同：0
> 
> 时间：2012-12-13T14:53:54.437
> 
> 标签：asp.net, razor

我的主视图中有一个部分视图，其中列出了许多项目。Razor 已经为我正确地生成了这个局部视图，并插入了指向控制器上的动作并发送正确 id 的动作链接（使用 @Html.ActionLink 命令）。所有这些都有效，但我希望它保持这种状态，而不必返回任何东西！

现在我被迫发回一些改变主视图的东西（内容、视图、重定向等），我不希望这样。

我想要做的就是在服务器上采取行动并将其保留在那里。我还可以做些什么？

谢谢

```
@model IEnumerable<PopupForm.Models.BOExplorerItem>

<h3>Explorer (partial)<br />
    There are @Model.Count() explorer items.
</h3>

<ul class="ulexplorer">

    @foreach (var item in Model)
    {
        <li>
            <div class="boitem">
                <h5>@item.FullName [<i> @item.Code </i>]</h5>
                <span>Level: @item.Level</span>
                @Html.ActionLink("Select", "SelectEntity", "Explorer", new { code = @item.Code }, null)
            </div>
        </li>
    }

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:09:09.687

您可以做的是监听链接的点击事件并进行 ajax 调用，而不是正常的重定向行为。让 ajax 调用启动您想要执行的代码。

因此，像这样更改您的链接以将 css 类应用于我们的链接，以便我们可以将其用作我们的 jQuery 元素选择器。

```
@Html.ActionLink("Select", "SelectEntity", "Explorer",
                            new { code = @item.Code }, new { @class="ajaxLink"}) 
```

现在一些 javascript 绕过点击事件

```
$(function(){
  $("a.ajaxLink").click(function(e){
    var _item=$(this);
    e.preventDefault();  //prevent default behaviour
    $.get(_item.attr("href");
  });
}); 
```

如果您希望您的 Action 方法在正常的非 ajax 化请求上执行正常（返回视图/其他内容），您可以添加一个 if 条件检查以查看请求是否为 ajax

```
public ActionResult SelectEntity()
{
  if (Request.IsAjaxRequest())
  {
    //Execute your method and return a Json result to keep the compiler happy.
    return Json(new {Status="Success"},JsonRequestBehavior.AllowGet);
  }
  else
  {
     //Return the normal view,
     return View();
  } 
} 
```

# java - 如何将 javawebstart.version 属性与 Java 版本匹配？

> ID：13862420
> 
> 赞同：2
> 
> 时间：2012-12-13T14:54:08.743
> 
> 标签：java, java-web-start, jnlp

我们的应用程序关注 Java Web Start 上的 Oracle 错误，该错误从 Java 6u17 到 Java 7u10 发生（错误 ID [6957028](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6957028)）。这就是为什么我想警告我的用户，如果他们使用的版本会给他们带来麻烦。

所以我使用下面的代码来获取 Java Web Start 版本：

```
String jws_version = System.getProperty("javawebstart.version"); 
```

问题是，生成的字符串对于 Java 6 是有意义的，例如对于 Java 6u07 是返回`javaws-1.6.0_07`，但不知何故，对于 Java 7，它就不再有意义了。例如，使用新的 Java 7u10，我得到以下版本：`javaws-10.10.2.18`.

如何将此字符串与标准 Java 版本匹配？它找不到任何关于它的文档。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T12:29:24.203

所以我想我明白了，但这纯粹是经验性的！

对于 Java **1.7.0_25-b17**，关联的 Java Web Start 版本是**10.25.2.17**

所以 Java Web Start 版本是这样构建的，对于*Java 7*：

*   10
*   版本号
*   2
*   内部编号

# r - R可以读取grib文件（当它不是光栅时）并将其转换为ASCII文件吗？

> ID：13862422
> 
> 赞同：1
> 
> 时间：2012-12-13T14:54:17.303
> 
> 标签：r, gdal, grib

我正在尝试读取此 grib 文件，但出现错误。有什么方法可以解决此问题

```
 grib <- readGDAL("C:\\file.grib") 

Error in .local(.Object, ...) : 
  grib is a grib file, but no raster dataset was successfully identified. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:53:29.853

这不是 R 问题。

使用gdal，我有这个：

```
gdalinfo --debug on H14_2011010400.grib 

GRIB: Undefined parameter table (center 98-0 table 228).
GRIB: Undefined parameter table (center 98-0 table 228).
GRIB: Undefined parameter table (center 98-0 table 228).
GRIB: Undefined parameter table (center 98-0 table 228).
GRIB: Problems with ReadGrib1Record called by ReadGrib2Record
Inside ReadGrib1Record
GRIB1 GDS: Expect PV = 255 != 33

ERROR 4: H14_2011010400.grib is a grib file, but no raster dataset was successfully identified.
gdalinfo failed - unable to open 'H14_2011010400.grib'. 
```

我认为您的 grib 文件**编码错误**，请尝试安装 wgrib 以获取更多信息。

# hibernate - Hibernate 一对多级联保存空指针异常

> ID：13862423
> 
> 赞同：1
> 
> 时间：2012-12-13T14:54:17.697
> 
> 标签：hibernate, nullpointerexception, save, one-to-many, cascade

我有一对多的关系，如以下两个类中所述

```
 @Entity
    @Table(name="version_mst")
    public class Version {

    private Long   id;
    private String versionName;
    private String releaseName;
    private Set<VersionReleaseComponents> versionReleaseComponents; 

    @Id
    @GeneratedValue
    @Column(name="id")
    public Long  getId() {
        return id;
    }
    public void setId(Long  id) {
        this.id = id;
    }

    @Column(name="versionName")
    public String getVersionName() {
        return versionName;
    }
    public void setVersionName(String versionName) {
        this.versionName = versionName;
    }

    @Column(name="releaseName")
    public String getReleaseName() {
        return releaseName;
    }
    public void setReleaseName(String releaseName) {
        this.releaseName = releaseName;
    }

    @OneToMany(mappedBy="version",cascade = { javax.persistence.CascadeType.ALL },fetch = FetchType.EAGER,targetEntity=VersionReleaseComponents.class)
    public Set<VersionReleaseComponents> getVersionReleaseComponents() {
        return versionReleaseComponents;
    }
    public void setVersionReleaseComponents(
            Set<VersionReleaseComponents> versionReleaseComponents) {
        this.versionReleaseComponents = versionReleaseComponents;
    }

      } 
```

一个版本有多个版本发布组件

```
 @Entity
     @Table(name="version_release_components")
     public class VersionReleaseComponents {

    private Long id;

    @Id
    @GeneratedValue
    @Column(name="id")
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(name = "versionId")
    private Long versionId;
    public Long getVersionId() {
        return versionId;
    }
    public void setVersionId(Long versionId) {
        this.versionId = versionId;
    }
    private Version version;
    private String componentName;
    private String versionNumber;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name="versionId", referencedColumnName="id", insertable = false, updatable = false)
    public Version getVersion() {
        return version;
    }
    public void setVersion(Version version) {
        this.version = version;
    }

    @Column(name="componentName")
    public String getComponentName() {
        return componentName;
    }
    public void setComponentName(String componentName) {
        this.componentName = componentName;
    }

    @Column(name="versionNumber")
    public String getVersionNumber() {
        return versionNumber;
    }
    public void setVersionNumber(String versionNumber) {
        this.versionNumber = versionNumber;
    }

        } 
```

当我尝试执行以下

```
 Version v = new Version();
        v.setReleaseName("RN1");
        v.setVersionName("VName1");

        VersionReleaseComponents vrc = new VersionReleaseComponents();
        vrc.setComponentName("cn1");
        vrc.setVersionNumber("VNum1");
        vrc.setVersion(v);

        v.getVersionReleaseComponents().add(vrc); // null pointer error on here
        session.saveOrUpdate(v); 
```

获取集合时出现空指针异常。请指导我。

创建查询如下

```
 CREATE TABLE `version_mst` (
      `id` int(10) NOT NULL AUTO_INCREMENT,
      `versionName` varchar(20) NOT NULL,
      `releaseName` varchar(20) NOT NULL,
      `last_modified_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
      PRIMARY KEY (`ID`),
      UNIQUE KEY `VERSION_MAPPING_MST_UNIQUE` (`versionName`,`releaseName`)
    ) ENGINE=InnoDB DEFAULT CHARSET=latin1;

    CREATE TABLE `version_release_components` (
      `id` int(10) NOT NULL AUTO_INCREMENT,
      `versionId` int(10) NOT NULL ,
      `componentName` varchar(20) NOT NULL,
      `versionNumber` varchar(20) NOT NULL,
      `last_modified_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
      PRIMARY KEY (`ID`),
      CONSTRAINT `FK_VERSION` FOREIGN KEY (`versionId`) REFERENCES `version_mst` (`id`),
      UNIQUE KEY `VERSION_RELEASE_UNIQUE` (`componentName`,`versionNumber`)
    ) ENGINE=InnoDB   DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:00:16.600

在`Version`你还没有实例化：

```
private Set<VersionReleaseComponents> versionReleaseComponents; 
```

所以你正在添加`VersionReleaseComponents`一个未初始化的`Set`

要修复，请设置：

```
private Set<VersionReleaseComponents> versionReleaseComponents = new HashSet<VersionReleaseComponents>(); 
```

或任何`Set`你需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-18T03:29:34.640

很可能是因为您尚未初始化`Set`变量。在构造函数或字段声明中对其进行初始化。

当我运行您的代码时，我遇到了同样的异常，然后在我将变量初始化为：

```
private Set<VersionReleaseComponents> versionReleaseComponents = new HashSet<>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T06:42:21.890

更改了以下内容：删除了 VersionReleaseComponents 中的声明

```
 @Column(name = "versionId")
    private Long versionId;
    public Long getVersionId() {
        return versionId;
    }
    public void setVersionId(Long versionId) {
        this.versionId = versionId;
    } 
```

将 VersionReleaseComponents 声明更改为

```
 @JoinColumn(name="versionId") 
```

和版本声明是

```
@OneToMany(mappedBy="id",cascade = { javax.persistence.CascadeType.ALL },fetch =  FetchType.LAZY) 
```

上述更改奏效。由于某些其他原因，我已更改为 FetchType.LAZY，尽管它不是解决方案的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:29:46.160

尝试更换

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name="versionId", referencedColumnName="id", insertable = false, updatable = false)
public Version getVersion() {
  return version;
} 
```

为了这：

```
 @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name="versionReleaseComponents")
   public Version getVersion() {
      return version;
    } 
```

并使用@user1393563 的推荐：

```
private Set<VersionReleaseComponents> versionReleaseComponents = new HashSet<VersionReleaseComponents>(); 
```

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:02:22.280

我认为您正在尝试向 Set 添加一个为 NULL 的项目。

尝试这个 ：

```
 Version v = new Version();
    v.setReleaseName("RN1");
    v.setVersionName("VName1");

    VersionReleaseComponents vrc = new VersionReleaseComponents();
    vrc.setComponentName("cn1");
    vrc.setVersionNumber("VNum1");
    vrc.setVersion(v);

    Set<VersionReleaseComponents> vrcs = new HashSet<VersionReleaseComponents>();
    vrcs.add(vrc);
    v.setVersionReleaseComponents(vrcs);

    session.saveOrUpdate(v); 
```

# linux - VxWorks 终端连续读取变量

> ID：13862427
> 
> 赞同：1
> 
> 时间：2012-12-13T14:54:33.613
> 
> 标签：linux, unix, vxworks

在 VxWorks 中，我需要读取内存地址中的内容更改，我想我可以使用某种 Unix 语法来读取它。

在 Unix 中，我会使用

```
tail -f < outputfile 
```

所以在 VxWorks 中，我需要以同样的方式阅读

```
d 0x22221212 
```

我怎么能这样做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:11:28.957

最简单的可能就是使用 period 函数：

```
period 1, d, 0x22221212 
```

然后每一秒都会以地址 0x22221212 作为参数调用 d 函数。

[http://www.vxdev.com/docs/vx55man/vxworks/ref/usrLib.html#period](http://www.vxdev.com/docs/vx55man/vxworks/ref/usrLib.html#period)

# rsync - iSCSI 磁盘上的 rsync 故障

> ID：13862428
> 
> 赞同：0
> 
> 时间：2012-12-13T14:54:36.417
> 
> 标签：rsync, iscsi

```
[root@localhost ~]# rsync -aHXA /mnt/capture-tmp/source/ /mnt/capture-tmp/dest
rsync: writefd_unbuffered failed to write 4092 bytes to socket [sender]: Broken pipe (32)
rsync: write failed on "/mnt/capture-tmp/dest/opt/StorageManager/jre/lib/i386/server/libjvm.so": Read-only file system (30)
rsync error: error in file IO (code 11) at receiver.c(302) [receiver=3.0.7]
rsync: connection unexpectedly closed (135188 bytes received so far) [sender]
rsync error: error in rsync protocol data stream (code 12) at io.c(601) [sender=3.0.7] 
```

“dest”是iscsi磁盘。我无法推断出失败的原因？？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:56:50.687

似乎很明显：

```
rsync: write failed on "[...snip...]/libjvm.so": Read-only file system (30)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

将其重新安装为读/写，然后重试。

# javascript - 为什么会跳过一些 jQuery/javascript 代码？

> ID：13862429
> 
> 赞同：1
> 
> 时间：2012-12-13T14:54:45.383
> 
> 标签：javascript, jquery, ajax

我目前正在使用 jquery 编写一个即时聊天框，它将在顶部显示最新的聊天（当用户通过发布请求发送数据时刷新）并将最旧的聊天向下推送并将其删除。

问题是，如果检索到多个最新聊天（例如，2 个），则会在前面添加两个新 div，但只删除一个最旧的 div 而不是两个...我尝试超时，但它也没有工作..

下面是我认为有问题的代码片段。

```
function showData(currentchatstyle, data, final){
   var newchatstyle;
    if (currentchatstyle == "chatone") {
        newchatstyle = "chattwo";
    }
    else {
        newchatstyle = "chatone";
    }

    $('div[class^="chat"]:first').before('<div class="' + newchatstyle + '" style="display:none;">' + data + ' </div>');
    $('div[class^="chat"]:first').slideDown(500,"swing", function(){
        $('div[class^="chat"]').last().fadeOut(500, function() {
            $(this).remove(); 
        });
    });

    return newchatstyle;
}

$('input[name="content"]').keyup(function(key) {
    if (key.which==13) {

        var author = $('input[name="author"]').val();
        var content = $('input[name="content"]').val();
        var lastnum = $('postn:first').text();
        var chatstyle = $('div[class^="chat"]:first').attr("class");

        $.post(
            "chatajax.php",
            { "author": author, "content": content, "lastnum": lastnum }, 
            function(data) {
                var msg = data.split("|~|");
                for (var i = 0; i < msg.length; i++) {
                    chatstyle = showData(chatstyle, msg[i], true);
                }
            }
        ); 
    }
}); 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:43:18.000

问题是您确实选择了当前淡出的 div `$('div[class^="chat"]').last()`，因为您不是`remove`立即选择它们，而是在动画回调中。例如，您可能会立即删除`chat`该类，以便在下次调用时不会选择它`showData`。

此外，对于类似的 div，您应该只使用一个类“聊天”，而对于斑马风格，则应为它们提供独立的类。

```
var chatstyle = "one";
function showData(data, final){
    chatstyle = chatstyle=="one" ? "two" : "one";
    var newDiv = $('<div class="chat '+chatstyle+'" style="display:none;">'+data+'</div>');
    $('div.chat:first').before(newDiv);
    newDiv.slideDown(500, "swing", function(){
        $('div.chat:last').removeClass('chat').fadeOut(500, function() {
//                        ^^^^^^^^^^^^^^^^^^^^
            $(this).remove(); 
        });
    });
}
function post(data) {
    return $.post(
        "chatajax.php",
        data,
        function(data) {
            var msg = data.split("|~|");
            for (var i = 0; i < msg.length; i++)
                showData(msg[i], true); // what's "final"?
        }
    );
}

$('input[name="content"]').keyup(function(key) {
    if (key.which==13)
       post({
           "author": $('input[name="author"]').val(),
           "content": $('input[name="content"]').val(),
           "lastnum": $('postn:first').text() // I'm sure this should not be extracted from the DOM
       });
}); 
```

# java - 在Java中生成范围内的非重复随机数

> ID：13862430
> 
> 赞同：5
> 
> 时间：2012-12-13T14:54:48.150
> 
> 标签：java, random, non-repetitive

我想生成 1 到 4、4 范围内的随机数，包括。
这是我的代码：

```
int num = r.nextInt(4) + 1;  //r is instance of Random. 
```

但是，我在循环中运行上面的代码并且不想重复随机数。现在发生的事情通常是我得到的：
`1,1,1,2,3,1,4,2,2,1,4,2,4,4,2,1,4,3,3,1,4,2,4,1`作为我的输出。

在这里，虽然数字在范围（1-4）内是随机的，但在前 3 次迭代中经常像数字“1”一样重复。

我正在寻找的是一种在循环中获取非重复随机数的方法。我知道的一种简单方法是在当前迭代和比较之前保留最后一个随机数，但我确信必须有更好的解决方案。
提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T14:58:58.223

使用`random.nextInt(range-1)`排除前一个数字的函数将该数字映射到输出数字：

```
public class Test {
  private final Random random = new Random();
  private final int range;
  private int previous;

  Test(int range) { this.range = range; }

  int nextRnd() {
    if (previous == 0) return previous = random.nextInt(range) + 1;
    final int rnd = random.nextInt(range-1) + 1;
    return previous = (rnd < previous? rnd : rnd + 1);
  }

  public static void main(String[] args) {
    final Test t = new Test(4);
    for (int i = 0; i < 100; i++) System.out.println(t.nextRnd());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:00:45.750

由于您拥有的数字多于您必须选择的数字，因此您必须重复一些数字。您所能做的就是尽量减少立即重复的次数。

一种方法是使用 Collections.shuffle ，它允许您以随机顺序获得数字，而无需重复，并且每次都这样做。您可以防止重复最后一个 N 值。

要停止连续重复数字，您可以减小范围并使用模数。

```
int n = 0, max = 4;
Random rand = new Random();

for(int i = 0; i < numbers; i++) {
   n = (n + rand.nextInt(max-1)) % max;
   int numToUse = n + 1;
   // use this number.
} 
```

这项工作实际上只有`max-1`可能的值，因为您排除了最后使用的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:01:03.760

没有“更好”的答案。你得到一个*随机*数。检查这一行：

```
1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 
```

这*可能*是完全随机的。所以我建议你描述一个更好的要求。您是否总是想要一个与前一个不同的下一个数字？你想在一个特殊的范围内有最多的重复吗？假设在 6 个连续数字内，每个数字都允许出现两次？

如果您提出这样的要求，我们或许可以为您提供帮助。否则我们只能说：你看到的真的是随机的 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:19:55.187

这是一个算法：

```
用数字 1-4 初始化数组 A[4]
设置一个计数器Acnt，A的有效大小。初始化为4
for i in 1 to length(输出序列)
   选择一个从 0 到 Acnt -1 的随机整数 X
   将 A[X] 保存到您的输出序列
   交换（A[X]，A[Acnt - 1]）
   帐户--
   如果（Acnt == 0）Acnt = 长度（A）

```

想象 A 是一袋数字 1-4 的球。循环的每次迭代，您都会移除一个球。您只需将球隐藏在数组的末尾，而不是实际从数组中删除，这很昂贵。当您减少袋子中的球数（Acnt）时，您选择的下一个球来自非隐藏球。

当您没有更多球可供选择时，您可以通过将球包中的球数重置为完整计数来取消隐藏球。

这基本上是标准的洗牌算法。

**编辑：**重新阅读问题，我现在看到他只允许在 1 个数字而不是整个序列之后重复，在这种情况下，您需要做的就是修改 if (Acnt == 0) 到 if(Acnt == length (A) - 1)。

# sql - 累积汇总列

> ID：13862432
> 
> 赞同：6
> 
> 时间：2012-12-13T14:54:53.233
> 
> 标签：sql

我可能需要一些关于 SQL 语句的帮助。所以我有一个看起来像这样的表格“cont”：

```
cont_id     name       weight
----------- ---------- -----------
1           1          10
2           1          20
3           2          40
4           2          15
5           2          20
6           3          15
7           3          40
8           4          60
9           5          10
10          6          5 
```

然后我总结了权重列并按名称对其进行分组：

```
name       wsum
---------- -----------
2          75
4          60
3          55
1          30
5          10
6          5 
```

结果应该有一个累积列，应该如下所示：

```
name       wsum        acc_wsum
---------- ----------- ------------
2          75          75
4          60          135
3          55          190
1          30          220
5          10          230
6          5           235 
```

但我没有设法让最后一条语句起作用..

编辑：这个声明做到了（感谢戈登）

```
select t.*,
    (select sum(wsum) from (select name, SUM(weight) wsum
    from cont
    group by name)
    t2 where t2.wsum > t.wsum or (t2.wsum = t.wsum and t2.name <= t.name)) as acc_wsum
from (select name, SUM(weight) wsum
from cont
group by name) t
order by wsum desc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:18:37.967

因此，最好的方法是使用累积和：

```
select t.*,
       sum(wsum) over (order by wsum desc) as acc_wsum
from (<your summarized query>) t 
```

该`order by`条款使这种累积。

如果您没有该功能（在 SQL Server 2012 和 Oracle 中），则关联子查询是一种简单的方法，假设总权重是不同的值：

```
select t.*,
       (select sum(wsum) from (<your summarized query>) t2 where t2.wsum >= t.wsum) as acc_wsum
from (<your summarized query>) t 
```

这应该适用于所有 SQL 方言。要处理累积权重可能重复的情况：

```
select t.*,
       (select sum(wsum) from (<your summarized query>) t2 where t2.wsum > t.wsum or (t2.wsum = t.wsum and t2.name <= t.name) as acc_wsum
from (<your summarized query>) t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:57:39.630

尝试这个

```
;WITH CTE
AS
(
 SELECT *,
ROW_NUMBER() OVER(ORDER BY wsum) rownum
FROM @table1
 ) 
 SELECT 
 c1.name, 
 c1.wsum,
 acc_wsum= (SELECT SUM(c2.wsum) 
                   FROM cte c2
                   WHERE c2.rownum <= c1.rownum)
 FROM CTE c1; 
```

或者您可以加入而不是使用子查询

```
;WITH CTE
AS
(
 SELECT *,
ROW_NUMBER() OVER(ORDER BY usercount) rownum
 FROM @table1
) 
 SELECT 
 c1.name, 
 c1.wsum,
 acc_wsum= SUM(c2.wsum) 
 FROM CTE c1
 INNER JOIN CTE c2 ON c2.rownum <= c1.rownum
 GROUP BY c1.name, c1.wsum; 
```

# authentication - 与 JBoss 4.2.3 的远程连接中的身份验证

> ID：13862435
> 
> 赞同：3
> 
> 时间：2012-12-13T14:55:10.800
> 
> 标签：authentication, jboss, jmx

我正在尝试连接到 JBoss MBean，但由于身份验证失败而被阻止。

```
 Hashtable<String, String> env = new Hashtable<String, String>();
        env.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
        env.put(Context.PROVIDER_URL, "jnp://"+testIP+":"+testPort);
        env.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");

        env.put(Context.SECURITY_PRINCIPAL, "admin");
        env.put(Context.SECURITY_CREDENTIALS, "admin");

        InitialContext ic = new InitialContext(env);
        RMIAdaptor server = (RMIAdaptor) ic.lookup("jmx/invoker/RMIAdaptor");
        // Get the MBeanInfo for the JNDIView MBean
        ObjectName name = new ObjectName("my.service:service=MyBean");
        MBeanInfo info = server.getMBeanInfo(name); 
```

就连接而言，一切似乎都表现良好，直到我得到最后一行：

```
java.lang.SecurityException: Failed to authenticate principal=null, securityDomain=jmx-console
at org.jboss.jmx.connector.invoker.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:97)
at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
at org.jboss.invocation.jrmp.server.JRMPProxyFactory.invoke(JRMPProxyFactory.java:179)
:
: 
```

安全域配置为使用 JAAS（在 jmx-invoker-service.xml 中）：

```
<interceptor code="org.jboss.jmx.connector.invoker.AuthenticationInterceptor"
                 securityDomain="java:/jaas/jmx-console"/> 
```

并且用户在 jmx-console-users.properties 中正确定义。

在我看来，校长根本没有被正确阅读。JBoss 是否使用 Context.SECURITY_PRINCIPAL/CREDENTIALS 以外的其他东西？从[他们的命名文档](http://docs.jboss.org/jbossas/jboss4guide/r5/html/ch3.chapter.html)中可以看出他们没有，但是为什么这会失败呢？

非常感谢，

-C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:24:04.390

尝试像这样设置您的初始上下文工厂：

```
env.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.security.jndi.LoginInitialContextFactory"); 
```

# paypal - PayPal 付款撤销被 IPN 标记为“完成”，

> ID：13862436
> 
> 赞同：0
> 
> 时间：2012-12-13T14:55:12.903
> 
> 标签：paypal, paypal-ipn

我本来预计付款撤销会以“REVERSED”的形式出现。

这两个 IPN 通知几乎相同，我真的很困惑我应该如何处理这两个非常不同且影响深远的案例。

我没有看到任何迹象表明一个是成功付款，一个是取消（撤销）该付款..

这里是支付*成功*

```
{
    "transaction": ["USD 107.75"],
    "payment_request_date": "Thu Dec 13 06:36:41 PST 2012",
    "return_url": "http:\\/\\/dev.something.com\\/paypal\\/callback\\/success",
    "fees_payer": "EACHRECEIVER",
    "ipn_notification_url": "http:\\/\\/dev.something.com\\/paypal\\/ipn_pay",
    "sender_email": "buyer_1345686673_per@something.ch",
    "verify_sign": "APXJM61hjKwY87DLzueyb5wEw.d6A-0.-hTUGwmFgZwciame2x1SEpe1",
    "test_ipn": "1",
    "cancel_url": "http:\\/\\/dev.something.com\\/paypal\\/callback\\/cancel",
    "pay_key": "AP-4AC54963BJ135581V",
    "action_type": "PAY",
    "memo": "MEMO",
    "transaction_type": "Adaptive Payment PAY",
    "tracking_id": "pay_50c9e7f8658ae",
    "status": "COMPLETED",
    "log_default_shipping_address_in_transaction": "false",
    "charset": "windows-1252",
    "notify_version": "UNVERSIONED",
    "reverse_all_parallel_payments_on_error": "false"
} 
```

这是付款审核后撤消的相同付款

```
{
    "transaction": ["USD 107.75"],
    "payment_request_date": "Thu Dec 13 06:36:41 PST 2012",
    "return_url": "http:\\/\\/dev.something.com\\/paypal\\/callback\\/success",
    "fees_payer": "EACHRECEIVER",
    "ipn_notification_url": "http:\\/\\/dev.something.com\\/paypal\\/ipn_pay",
    "sender_email": "buyer_1345686673_per@something.ch",
    "verify_sign": "Am2jFc4B6hWjlKD0-6LqtZwFoCEPACrjGEsaP1pg3GsZN5Q33vlx.AO1",
    "test_ipn": "1",
    "cancel_url": "http:\\/\\/dev.something.com\\/paypal\\/callback\\/cancel",
    "reason_code": "Unknown",
    "pay_key": "AP-4AC54963BJ135581V",
    "action_type": "PAY",
    "memo": "MEMO",
    "expiration_date": "Thu Dec 13 06:40:07 PST 2012",
    "transaction_type": "Adjustment",
    "tracking_id": "pay_50c9e7f8658ae",
    "status": "COMPLETED",
    "log_default_shipping_address_in_transaction": "false",
    "charset": "windows-1252",
    "notify_version": "UNVERSIONED",
    "reverse_all_parallel_payments_on_error": "false"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:20:37.643

这里的区别是“Adaptive Payment Pay”与“Adjustment”的transaction_type。

不过要记住的一件事是，这些 IPN 是针对您的自适应支付应用程序的，并且是针对与卖方相反的应用程序所有者的。

实际涉及的卖家账户将从系统中获取自己的 IPN，其中包含有关付款本身的更多详细信息。

# sockets - 带有 PSH 消息的客户端垃圾邮件服务器

> ID：13862438
> 
> 赞同：0
> 
> 时间：2012-12-13T14:55:18.680
> 
> 标签：sockets, tcp

我正在使用 unix 套接字在 C++ 中开发一个简单的服务器/客户端聊天应用程序，有一件事情困扰着我。

如果我在终端中运行聊天客户端（我使用的是 Mac）并使用 CTRL + C 关闭客户端，则完成四次握手并正确关闭连接。

如果我选择关闭正在运行客户端的终端窗口，则客户端会向服务器发送一堆数据包。

使用 CTRL + C 关闭客户端：

![在此处输入图像描述](../Images/db0e27abcccc893164b0f7f8355341ab.png)

通过关闭终端窗口关闭客户端：

![在此处输入图像描述](../Images/8a08d4599ebca27ef1675df846bc1ba2.png)

如果有人可以向我解释发生了什么，那就太好了。

客户端代码：

```
 void writeString(int FD, const char* data, size_t n){
   size_t bytesLeft = n;
   ssize_t bytesWritten = 0;
   const char *cBuffer = (char*) data;
   while ((bytesWritten = write(FD, cBuffer, bytesLeft)) > 0) {
    bytesLeft -= bytesWritten;
    cBuffer += bytesWritten;
   }
 }

 bool writeInt(int FD, int intToWrite){
   intToWrite = htonl(intToWrite);
   write(FD, &intToWrite, sizeof(intToWrite));
 }  

void writeMessage(int FD, int type, int ID, string message){
  if(type == 1){
    int messageSize = (int) message.length();
    writeInt(FD, type);
    writeInt(FD, ID);
    writeInt(FD, messageSize);
    writeString(FD, message.c_str(), messageSize);
  }
}

while (!connectionClosed) {
FD_SET(socketFD, &rset);
FD_SET(0, &rset);
int maxfd = max(0, socketFD) + 1;

select(maxfd, &rset, NULL, NULL, NULL);

if(FD_ISSET(0, &rset)){
  getline(cin, input);
  writeMessage(socketFD, 1, ID, input);
}else if(FD_ISSET(socketFD, &rset)){
  int type = 0;
  if(readInt(socketFD, type) == 0)
    connectionClosed = true;
  readMessage(socketFD, type, ID);
}
}

close(socketFD); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:12:46.390

我的猜测是，当您使用关闭按钮关闭终端时，它会发送一些标准终端命令来结束与 PTY 的会话。由于您的聊天应用程序正在运行，因此命令会被您的聊天应用程序拦截并转发到服务器。

例如，telnet 协议包括很多事情的控制代码，包括中断和中止正在运行的进程。

您是否查看过正在发送的实际数据包内容？

关于 PSH（推送），这里解释得很好，例如： http:
[//packetlife.net/blog/2011/mar/2/tcp-flags-psh-and-urg/](http://packetlife.net/blog/2011/mar/2/tcp-flags-psh-and-urg/)

您可能还想在客户端应用程序中将日志记录添加到磁盘，以便稍后在关闭终端窗口时检查发生的情况。

甚至可以从另一个终端窗口将调试会话附加到正在运行的客户端。

# redis - 未使用 Redis MQ 调用的第一个订阅者

> ID：13862440
> 
> 赞同：1
> 
> 时间：2012-12-13T14:55:27.557
> 
> 标签：redis, servicestack

我正在使用来自 ServiceStack 可重用用例项目的解决方案。

在此解决方案中，我添加了一个新的控制台应用程序，其中包含以下代码。

在最初的可重用性用例项目中，当一个 EmailMessage 发布时，它由发送电子邮件的订阅者处理（即 SMessageService.Any(EmailMessage 请求）。

当我运行控制台应用程序时，这意味着我有两个订阅 EmailMessage 的应用程序，只有新的控制台应用程序会收到消息。

我有以下内容：

我的控制台应用程序是：

```
class Program
{
    static void Main(string[] args)
    {
        var subscriberHost = new SubscriberHost();
        subscriberHost.Init();

        Console.WriteLine("Waiting of publishing 
                to happen on EmailMessage as we are subscribing to it...");
        Console.ReadLine();
    }
}

public class SubscriberHost : AppHostHttpListenerBase
{
    private RedisMqServer mqHost;

    public SubscriberHost() 
      :base("Subscriber console",typeof(EmailMessageEventHandler).Assembly)
    {

    }

    public override void Configure(Container container)
    {
        var redisFactory = new PooledRedisClientManager("localhost:6379");
        mqHost = new RedisMqServer(redisFactory, retryCount:2);

        mqHost.RegisterHandler<EmailMessage>((message) =>
                           {
                                 var emailMessage = message.GetBody();
                                 Console.WriteLine(emailMessage.To);
                                 Console.WriteLine(emailMessage.Subject);
                                 Console.WriteLine(emailMessage.Body);
                                 return new SMessageReceipt {
                                           Type = "not used",
                                           To = "test",
                                           From = "Reusability",
                                           RefId = "1,"
                                   };
                                                                      });
   // mqHost.RegisterHandler<EmailMessage>(ServiceController.ExecuteMessage);
   mqHost.Start();
    }
} 
```

我希望两个订阅者都能收到 EmailMessage，但只有新的控制台应用程序正在接收它。为什么其他订阅者没有收到消息？

执行发布的客户端代码尚未修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:17:11.477

我上面展示的是使用 Redis MQ，对于我正在测试的多订阅者问题，我需要 Redis Pub/Sub。

对于 MQ，订阅者将消息从队列中取出以进行处理。处理后，就是这样。

对于 Pub/Sub，可能有许多订阅者，每个订阅者都会收到一份消息副本。

我希望这对其他人有帮助。

# c++ - 删除分配的两个 d 数组

> ID：13862441
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:55:33.557
> 
> 标签：c++, arrays, memory-management, segmentation-fault

我试图在运行时分配二维数组。数组的大小为 N*N，其中 N 由用户输入。最后，我正在删除分配的内存。但是我遇到了分段错误。我知道当我尝试访问不是由我分配的内存时会发生分段错误。请帮助代码如下：

```
#include<iostream>
using namespace std;
#include <stdio.h>

int main ()
{
    int t,n;
    int **judge;
    int **result;
    int i,j,l;
    int high;
    float count;
    int item;
    cin>>t;
    while(t-->0)
    {
        cin>>n;
        judge=new int*[n];result=new int*[n];
        for(i=0;i<n;i++)
        {
            judge[i]=new int[n];
            result[i]=new int[n];
        }

        for(i=0;i<n;i++)
        {
            for(j=0;j<n;j++)
            {
                cin>>judge[i][j];
            }
        }
        count=0;
        result[0][0]=0;
        for(i=0;i<n;i++)
        {
            for(j=0;j<n;j++)
            {
                item=0;
                if(j>0&&i>0)
                {
                if(item<result[i][j-1])
                    item=result[i][j-1];
                else if(item<result[i-1][j])
                    item=result[i-1][j];
                }
                else if(i==0)
                {
                    if(item<result[i][j-1])
                        item=result[i][j-1];
                }
                else if(j==0)
                {
                    if(item<result[i-1][j])
                        item=result[i-1][j];
                }

                result[i][j]=judge[i][j]+item;
            }
        }

        if(result[n-1][n-1]<0.0)
            cout<<"Bad Judges"<<endl;
        else
        {
            count=(result[n-1][n-1]/(float)n);
            cout<<count<<endl;
        }

        for( i = 0 ; i < n  ; ++i)
        {
            delete[] result[i] ;
        }
        delete[] result;
        for(i = 0 ; i < n ; ++i)
        {
            delete[] judge[i] ;
        }
        delete[] judge;
        /* for(i=0;i<n;i++)
        {
            delete[] judge[i];
            delete[] result[i];       
        }*/
        // delete[] judge;
        //delete[] result;
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:59:16.290

你循环`judge`直到`n+2`你没有分配那么多。

在这三行中：

```
for(int i = 0 ; i < n + 2 ; ++i)
{
   delete[] judge[i] ;
} 
```

顺便说一句，这不是您访问尚未分配的内存的唯一时间：

```
for(i=1;i<n+1;i++)
{
   for(j=1;j<n+1;j++)
   {
     cin>>judge[i][j];
   }
} 
```

在这里`i`并且`j`可能达到`n`，而您的分配允许值高达`n -1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:03:38.903

有许多循环，例如

```
for(i=1;i<n+1;i++) 
```

在 C++ 中，数组从 0 开始索引，因此您应该使用 [0..n) 代替

```
for(i=0;i<n;i++) 
```

# extjs4 - 分机编辑职位问题

> ID：13862442
> 
> 赞同：0
> 
> 时间：2012-12-13T14:55:37.000
> 
> 标签：extjs4, extjs4.1

我正在使用编辑器进行内联编辑树节点值，当大文本的位置发生变化时？以下是我为测试此场景而编写的代码。

```
var store = Ext.create('Ext.data.TreeStore', {
                root: {
                    expanded: true,
                    children: [
                        { text: "ong label for testing long options test field.50", leaf: true },
                        { text: "long label for testing long options test field.50 long label for testing log option test field. 100", leaf: true },
                        { text: "option4", leaf: true }
                    ]
                }
            });

            Ext.create('Ext.tree.Panel', {
                title: 'Simple Tree',
                width: 300,
                height: 250,
                store: store,
                rootVisible: false,
                defaultRootId: 0,
                renderTo: Ext.getBody(),
                listeners: {
                    itemdblclick: function (View, record, item, index, e, eOpts) {
                        var editor = new Ext.Editor({
                            ignoreNoChange: true,
                            revertInvalid: true,
                            width: 235,
                            shadow: false,
                            //offsets: [-150, 0],
                            hideEl: false,
                            field: {
                                xtype: 'textfield',
                                maxLength: 500,
                                enforceMaxLength: true,
                                allowBlank: false
                            }
                        });

                        editor.startEdit(item, record.get('text'));

                        editor.on('complete', function (me, value) {
                            if (value.replace(/^[\s]+/, '').replace(/[\s]+$/, '').replace(/[\s]{2,}/, ' ') != "") {
                                record.set('text', value);
                            }
                        }, item, { single: true });
                    }
                }

            }); 
```

我用的是Extjs4.1版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:47:18.143

首先，您应该将`alingment`编辑器更改为`tl`（左上角）。然后它应该始终与节点的左侧对齐。如果要将编辑器与节点中的文本对齐，则还应调整偏移量。

例子：

```
itemdblclick: function (View, record, item, index, e, eOpts) {
    var item = Ext.get(item);
    var images = item.down('td').query('.x-tree-elbow, .x-tree-elbow-empty, .x-tree-elbow-end, .x-tree-elbow-line');
    var x = 0;

    for (var i = 0, ilen = images.length; i < ilen; ++i) {
        x += Ext.get(images[i]).getWidth();
    }

    var editor = new Ext.Editor({
        alignment: 'tl',
        ignoreNoChange: true,
        revertInvalid: true,
        width: 235 - x,
        shadow: false,
        offsets: [x, 0],
        hideEl: false,
        field: {
            xtype: 'textfield',
            maxLength: 500,
            enforceMaxLength: true,
            allowBlank: false
        }
    });

    editor.startEdit(item, record.get('text'));

    editor.on('complete', function (me, value) {
        if (value.replace(/^[\s]+/, '').replace(/[\s]+$/, '').replace(/[\s]{2,}/, ' ') != "") {
            record.set('text', value);
        }
    }, item, { single: true });
} 
```

# parameters - 将组合框参数添加到 iReport 的报告中

> ID：13862459
> 
> 赞同：1
> 
> 时间：2012-12-13T14:56:11.967
> 
> 标签：parameters, jasper-reports, ireport, jasperserver

在*iReport 4.8.0*中，我想让用户从组合框/列表/下拉列表/集合中选择一个参数值（无论您选择什么），他选择的值将被插入到查询中。

我已经创建了一个字符串参数，当我预览报表并将字符串插入到查询中时会提示。它工作得很好，但现在我需要定义一个组合框。

我需要提供城市名称，所以我的查询是：

```
SELECT
  COUNT(leads.`status`) AS Number_Of_Status,
  leads.`status` AS leads_status,
  leads.`primary_address_city` AS leads_primary_address_city,
  leads.id AS lead_id
FROM
      `leads` leads
 WHERE
      leads.`primary_address_city` = $P{city_combobox}
 GROUP BY
      leads.`status` 
```

我试图使`city_combobox`参数 a`java.util.List`但我得到`Parameter type not supported`错误，我也不知道在哪里将字符串加载到其中。

*我对JasperReports Server*一无所知，我没有安装它，只安装了*iReport*并且知道我用它做了一切。

因此，我正在寻找一种仅在*iReport中执行此操作的方法，而无需**JR Server*的输入控件。对我来说，只需为报表提供手动插入的值到组合框中就足够了，它甚至不必是查询。例如，将“NY”、“Miami”、“Washington”插入到列表参数中，但我该如何以及在哪里执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:04:03.277

我解决了这个问题。事实证明 zuckerreport 基于 jasperreport 服务器，因此也可以添加输入控件。

解决方案是将“city_combobox”参数创建为字符串参数并保持查询不变，就像我上面给出的示例一样。这就是 IReport 的内容。

在 zuckerreport 中，添加一个名为 city_combobox 的“默认参数名称”参数。

对于下拉参数，选择“用户定义的查询”类型的参数，并用一个查询填充“参数设置”和“用户定义的查询”字段，该查询将用值列表填充下拉列表，例如：

选择 DISTINCT 线索.primary_address_city AS 线索_primary_address_city FROM 线索

如果您看不到“参数设置”和“用户定义查询”字段（在新版本的 zuckerreport 中它们是隐藏的），那么

此代码需要在zuckerreport的editview代码中手动添加。在 modules/zr2_ReportParameter/metadata/editviewdefs.php 添加此代码：

5 => 数组 ( 0 => 'range_options', ),

现在重建，然后你会看到隐藏的字段。

使用菜单上的“jasperReports Template”新建一个模板，模板其实就是报表：

一种。为模板选择一个名称并选择报告的 jrxml 文件。湾。选择 PDF、Excel 和 HTML。C。节省

在报表和参数之间创建一个新的参数绑定： a. 按“创建” b. 参数名称必须是 IReport 中的确切参数名称。C。选择报表和参数，无需选择“绑定到模块”</p>

将报告的 .jasper 文件复制到 SugarCRM 中的 custom/zuckerreports2/resources 中。转到“按需报告”，选择报告和应该显示的参数。

给你！:)

# node.js - 在 Emacs 中使用带有 JS-comint 的 Node.js

> ID：13862471
> 
> 赞同：14
> 
> 时间：2012-12-13T14:56:45.813
> 
> 标签：node.js, emacs, read-eval-print-loop, js2-mode

我使用 Emacs 24.2。我已经安装`js-comint`并`js-mode`从[MELPA](http://melpa.milkbox.net/)执行`run-js`，现在在 REPL 而不是`>`sign 我有这个胡言乱语：

```
^[[1G> ^[[0K^[[3G 
```

在 Inferior Javascript 模式下的 REPL 本身工作得很好，只是`>`符号被改变了。如果您输入未完成的表达式，它甚至会打印`^[[1G... ^[[0K^[[5G`. 这些`^[`是系统字符，不是通过复制粘贴复制的，我添加它们以供您参考。

在我的初始化文件中：

```
(require 'js-comint)
(setq inferior-js-program-command "nodejs") 
```

在终端调用`nodejs`产生工作 REPL。

为什么prompt会有这种行为？我应该怎么做才能纠正这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-19T08:07:27.963

只需在 .emacs 中添加一行：

```
(setenv "NODE_NO_READLINE" "1") 
```

答案来自这篇文章： [Node.js prompt '>' can not show in eshell](https://stackoverflow.com/questions/9390770/node-js-prompt-can-not-show-in-eshell)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-13T15:19:24.477

```
(setq inferior-js-mode-hook
      (lambda ()
        ;; We like nice colors
        (ansi-color-for-comint-mode-on)
        ;; Deal with some prompt nonsense
        (add-to-list
         'comint-preoutput-filter-functions
         (lambda (output)
           (replace-regexp-in-string "\033\\[[0-9]+[GK]" "" output))))) 
```

`\033`是它打印为的转义字符`^[`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-15T21:25:43.653

不确定最近的时间，但现在可以下载和使用`nodejs-repl`.

# sql - SQL Server 2008 事务复制'缺少结束注释标记'*/''

> ID：13862472
> 
> 赞同：9
> 
> 时间：2012-12-13T14:56:49.020
> 
> 标签：sql, sql-server-2008-r2, comments, replication, transactional

我正在尝试在 SQL Server 2008 R2 SP1 上的 Dynamics NAV 数据库上设置事务复制。

使用相同的服务器，我已经能够在不同的数据库上成功设置复制。

我能够创建发布、订阅和快照，但是当我查看事件日志时，我看到以下错误：

> *复制-复制分发子系统：代理 [代理名称] 失败。缺少结束注释标记“* /”。*

复制不工作，并且复制监视器在询问此数据库时有效地挂起。

谷歌搜索返回这个页面：[MS Connect](http://connect.microsoft.com/SQLServer/feedback/details/432461/snapshot-replication-missing-end-comment-mark-error)但我很难找到他们引用的系统生成的存储过程所在的位置。我尝试在 Profiler 应用程序中使用各种过滤器对其进行搜索，但找到它并没有太多乐趣。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-16T17:03:38.283

我注意到，正如 Loic 所承认的那样，Martin 的评论（也是最受好评的）解决了这个问题。由于[Martin](https://stackoverflow.com/users/73226/martin-smith)的所有学分。

> 从连接项看来，当您在注释中有一个带有 GO 的存储过程时，就会发生故障。我想您可以使用 SELECT * FROM sys.sql_modules where definition LIKE '%/ *%GO%* /%' 找到它，然后更改评论。–[马丁·史密斯](https://stackoverflow.com/users/73226/martin-smith)2012 年 12 月 13 日 15:11
> 
> 谢谢，马丁。这似乎已经成功了！– [Loic 2012](https://stackoverflow.com/users/1900873/loic)年 12 月 20 日 8:56

# java - 在方法中使用变量的问题

> ID：13862484
> 
> 赞同：1
> 
> 时间：2012-12-13T14:57:33.053
> 
> 标签：java

我在尝试获取 If else if 语句中的变量时遇到错误，任何帮助都可以，谢谢这里是程序

```
public class Info {

    public static void main(String [] args){

        char f,F,c,C,h,H;

        Scanner input=new Scanner(System.in);
        System.out.print("Enter employee num");
        int e_num=input.nextInt();
        System.out.print("Enter employee first name");
        String e_fname=input.next();
        System.out.print("Enter employee surname");
        String e_sname=input.next();
        System.out.print("Enter employee code C or c,H or h and F or f");
        char e_code = input.next().charAt(0);

        if(e_code=='f' || e_code=='F') {
        System.out.print("Enter employee salary: ");
        double salary=input.nextDouble();
             e_code=calGrossF();
        }

            else if(e_code=='c'||e_code=='C'){
            e_code=calGrossC();
            }

            else if(e_code=='h'|| e_code=='H'){
                e_code=calGrossH();
            }

       }//end of main 

    public static void calGrossF(int f, int F){

    }//end of Gross(F)
    public static char calGrossC(){

    }// end of Gross(C)

    public static char calGrossH();{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:11:26.293

您的代码当前有几个语法错误。

*   您的方法`calGrossC()`并且必须根据声明`calGrossH()`返回 a 。`char`目前他们什么都不返回。
*   此代码也`e_code=calGrossF();`期望`calGrossF()`返回 a `char`。目前它被宣布返回`void`。
*   您没有导入该类`Scanner`（可能只是不在代码示例中）。
*   `callGross()`需要两个`int`参数。你什么也没给`e_code=calGrossF();`。

Java 编译器会指出所有这些错误。只需一一查看您的错误消息并相应地更正代码。

不是真正的语法，但想在这里注意它：

*   您在开头 ( ) 声明了一堆变量`f,F,c,C,h,H`，但从不使用它们。

这是一个更正的代码（在几个场合只是占位符）：

```
import java.util.Scanner;

public class Info {
  public static void main(String [] args){

    Scanner input=new Scanner(System.in);
    System.out.print("Enter employee num");
    int e_num=input.nextInt();
    System.out.print("Enter employee first name");
    String e_fname=input.next();
    System.out.print("Enter employee surname");
    String e_sname=input.next();
    System.out.print("Enter employee code C or c,H or h and F or f");
    char e_code = input.next().charAt(0);

    if(e_code=='f' || e_code=='F') {
      System.out.print("Enter employee salary: ");
      double salary=input.nextDouble();
      e_code=calGrossF( 0, 0 );
    }

    else if(e_code=='c'||e_code=='C'){
      e_code=calGrossC();
    }

    else if(e_code=='h'|| e_code=='H'){
      e_code=calGrossH();
    }
  }//end of main 

  public static char calGrossF(int f, int F){
      return 'F';
  }//end of Gross(F)

  public static char calGrossC(){
      return 'C';
  }// end of Gross(C)

  public static char calGrossH(){
      return 'H';
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T15:58:52.293

```
//Method Statement
public char calGrossF(String name, int emp_num, double gross_sal, double fix_sal, double   
                      ded, double net_pay, double highest_sal, double lowest_sal, 
                      char ch)
{ 
    //return statement
    return calGrossF(name, emp_num, gross_sal, fix_sal, ded, net_pay, highest_sal, lowest_sal, ch);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:07:40.157

首先，您将 public static void calGrossF(int f, int F) 作为“void”
，并且您将其值存储在 e_code 中
，并且在调用中也没有传递任何参数

# java - 如何从jsp错误页面获取原始页面参数？

> ID：13862486
> 
> 赞同：0
> 
> 时间：2012-12-13T14:57:34.920
> 
> 标签：java, jsp, parameters, error-handling

我在 tompcat 上有一个 jsp/servlet webapp，每次出现意外错误时我都需要类似崩溃报告之类的东西我定义了一个错误页面并添加了 errorpage 指令

```
<%@page errorPage="./erropage.jsp" %> 
```

到我的 edit.jsp 文件（只是一个例子）。对 edit.jsp 的请求是通过 post 请求发出的（实际上是一个 ajax 请求，但这并不重要）。我需要一个解决方案来从错误页面读取原始参数（发送到 edit.jsp 页面）以构建崩溃报告。

```
request.getAttribute("javax.servlet.error.request_uri") 
```

没有帮助我，因为这将包括实际的 url（获取参数）。

此外，从edit.jsp 中的请求参数构建字符串并将该字符串设置为会话不是一个选项，因为女巫中有很多文件我需要实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:13:53.197

实际上它看起来像

```
request.getParamter() 
```

在 errorpage.jsp 中给出来自 edit.jsp 请求的参数！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:46:08.047

我对 cookie 有类似的问题，我发布了一个关于它的问题。
现在，我相信（我有一些检查要做）错误机制正在使用 REDIRECT 方案（而不是 FORWARD），因此创建了一个新的请求对象。
. 你可以验证这个假设

# cakephp - 在 CakePHP 中对搜索结果进行分页

> ID：13862495
> 
> 赞同：5
> 
> 时间：2012-12-13T14:57:59.923
> 
> 标签：cakephp, pagination

我在我的 CakePHP 项目上设置了一个简单的搜索引擎，如下所示：

```
<?php 
    echo $this->Form->create("Post", array(
        "action" => "search", 
        "id" => "searchForm"
    ));
    echo $this->Form->input("keyword", array(
        "label" => "",
        "type" => "search",
        "placeholder" => "Recherche..."
    ));
    echo $this->Form->end(); 
?> 
```

这是控制器：

```
function search() {
    $keyword = $this->request->data;
    $keyword = $keyword["Post"]["keyword"];
    $cond = array("OR" => array(
        "Post.title LIKE '%$keyword%'",
        "Post.description LIKE '%$keyword%'"
    ));
    $posts = $this->Post->find("all", array("conditions" => $cond));
    $this->set(compact("posts", "keyword"));
} 
```

而且效果很好。唯一的问题是当我想对结果进行分页时。我只是添加：

```
$posts = $this->paginate(); 
```

这就是问题所在。当我添加这个时，CakePHP 会给我所有的帖子，而不仅仅是那些与关键字匹配的帖子。

因此，如果您有解决方案，那就太好了:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T15:04:24.217

根据 CakePHP book 你应该可以做到

```
$this->paginate('Post', array(
    'OR' => array(
        'Post.title LIKE' => "%$keyword%",
        'Post.description LIKE' => "%$keyword%"
    )

)); 
```

或者你可以这样做（来自 cakephp 站点）。

```
public function list_recipes() {
    $this->paginate = array(
        'conditions' => array('Recipe.title LIKE' => 'a%'),
        'limit' => 10
    );
    $data = $this->paginate('Recipe');
    $this->set(compact('data'));
); 
```

来源： [http ://book.cakephp.org/2.0/en/core-libraries/components/pagination.html](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:05:22.720

Paginate 对我相信的数据进行自己的查找。您之前调用的`find`对 没有影响`paginate`。

试试这个：

```
$this->paginate = array( 'conditions' => $cond, )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T07:56:23.450

您可以首先使用 Session 来存储条件
，当您提交表单时，您将条件存储到 Session
中，然后（分页）您可以从 Session 中读取条件

```
example i want to search the products:
Products/search.ctp
<?php
    echo $this->Form->create('Product');
    echo $this->Form->input('keyword');
    echo $this->Form->end(__('Search'));
?>
ProductsController.php
<?php 
class ProductsController extends AppController{

public function search() {
        if ($this->request->is('post')) {
            $keyword = $this->request->data['Product']['keyword'];
            $this->paginate = array(
                'fields' => array('Product.name', 'Product.price', 'Product.created'),
                'order' => array('Product.created' => 'DESC', 'Product.price' => 'DESC'),
                'limit' => 30,
                'conditions' => array('Product.name LIKE' => '%' . $keyword . '%')
            );
            // store array $this->paginate into Session
            $this->Session->write('paginate', $this->paginate);
        }
        $this->paginate = $this->Session->read('paginate');
        $this->set('products', $this->paginate('Product'));
    }
} 
```

# java - 防止调度程序在 Java 中进行上下文切换

> ID：13862496
> 
> 赞同：0
> 
> 时间：2012-12-13T14:58:00.143
> 
> 标签：java, ubuntu, scheduler

在 Java 中：是否可以阻止调度程序（Ubuntu）对线程代码的特定部分进行上下文切换。

如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:05:57.450

你应该去一个实时线程：

[http://jrate.sourceforge.net/api/stable/javax/realtime/RealtimeThread.html](http://jrate.sourceforge.net/api/stable/javax/realtime/RealtimeThread.html)

并将其优先级设置为最高级别：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#setPriority%28int%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#setPriority%28int%29)

这样，一旦实时线程启动，它就不会再释放处理器了。

此外，应该要求调度程序表现得像（实时）FIFO调度程序。

你有一个 setScheduler() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:30:26.373

我为避免上下文切换所做的是使用线程亲和性、忙于等待和隔离 CPU（如果操作系统支持）Java 并不能很好地支持这些，但在一点 JNI/JNA 的帮助下可以完成。

[Java的线程亲和库](http://vanillajava.blogspot.co.uk/2011/12/thread-affinity-library-for-java.html)

注意：有些 NMI 中断无法避免，但通常不会产生太大影响。

# c# - c#有没有类似c++的复制控制的概念

> ID：13862498
> 
> 赞同：3
> 
> 时间：2012-12-13T14:58:10.333
> 
> 标签：c#, c++, constructor

其中`C++`，我们有**Copy Constructor**、**Destructors**、**重载=**，它们一起被称为**复制控制**。

我的问题是：

1.  `copy constructor`用于在传递给函数时初始化对象 as`C#`或**when** `argument` **(**不`initializing`分配**)**或**当**来自`returning`a 的对象`function` **时** `C++`？

2.  **当我们将任何对象分配** （**而不是**初始化）相同类型的另一个对象时，是否`=`会调用隐式重载的运算符函数？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:01:21.837

在 C# 中，您不能重载赋值运算符。

析构函数在托管内存世界中（大多数时候）没有真正意义。实际上有一个等价物（终结器），但您应该很少需要使用它们。

复制构造函数是为某些类创建的，但它不像在 C++ 中那样频繁。它永远不会被语言隐式调用，它只会在你手动调用它时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:02:22.913

1.  否：引用对象是按引用传递的，而值对象是逐字节复制的。您可以制作自己的“复制构造函数”，但您将负责显式调用它们。
2.  您不能重载赋值运算符

对 C# 公平地说，由于底层的垃圾收集内存模型，C++ 复制控制的复杂性都不是必需的。例如，复制对象时不需要控制动态分配对象的所有权，因为您可以随意拥有对动态对象的任意数量的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:03:05.787

不，如果你想提供复制机制，你可以通过实现 ICloneable 接口来做到这一点：http: [//msdn.microsoft.com/en-us/library/system.icloneable.aspx](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T15:06:52.513

C# 没有复制构造函数的概念，也没有重载的概念`operator=`。在 C# 中，对象只是存在，您在代码中使用它们的句柄。句柄可以“按值”复制以在整个代码中使用，但这是所谓的“浅”复制，对象本身仍然相同，它们都指向相同的内存（间接地）。

复制构造函数类似于托管世界中的深度复制，您可以通过`ICloneable`. 您也可以通过序列化（`boost`方式）或通过任何方式的间接方式来实现它。

最后一点，由于对象的生命周期是不确定的（当 GC 任意决定它们应该死亡时它们就会死亡），所以也不存在析构函数之类的东西。最接近的是终结器（当您的对象被收集时被称为非确定性的）和`IDisposable`模式（与 一起`using`），它使您可以控制终结器。不用说它们很少使用。

编辑：我应该指出，虽然复制构造函数没有等价物，但您*确实*有“类型转换”构造函数`implicit`，确切的名称目前让我无法理解。****

# android - 使用适配器内存不足

> ID：13862500
> 
> 赞同：0
> 
> 时间：2012-12-13T14:58:12.787
> 
> 标签：android, memory-leaks, android-context

我遇到内存不足错误。我检查了 DDMS，发现我分配更多内存的地方在我的适配器的 getView() 方法中。以这种方式创建对象对我来说是否更好：

```
view=new ImageView(myContext); 
```

这是我的 getView() 方法的一个示例：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView==null){
        view=new ImageView(myContext);
        view.setLayoutParams( new AbsListView.LayoutParams(columnWidth,columnWidth));
        view.setBackgroundColor(Color.GRAY);
    }else{
        view=convertView;
        convertView.setBackgroundColor(Color.GRAY);
    }
    return view;
} 
```

我在 c'tor 中得到上下文：

```
public emptySquaresAdapter( Context myContext,) {
    super();
    this.myContext=myContext;
} 
```

我读到了上下文泄漏，是这样吗？

编辑：

在这种情况下，我一次在屏幕上显示所有视图，因此从不使用转换后的视图（我不需要滚动以显示更多视图）。

此适配器在屏幕上显示 12 个方块。方法 getView 被调用 12 次，位置为 0（我猜是为了测量所有孩子的 vie），然后才继续定位 1,2,3... 为什么会发生这种情况？这会导致OOM问题吗？我从另一个适配器调用这个适配器，我猜是什么让一切变得复杂。

我还在 onDestroy 处取消绑定所有可绘制对象，并将 imageView.getDrawable().setCallback(null) 设置为所有 imageViews 它仍然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:11:48.343

您发布的代码是可以的。问题可能出在其他地方。

PS 为什么要存储上下文对象？您可以随时通过调用 parent.getContext() 在 getView() 方法中获取它

根据我的经验，只要你不坚持（你实际上在做什么），你传递什么样的上下文并不重要。

但是，如果您的适配器本身没有存储在某个地方并且只是活动的一部分，那么它应该没问题，因为适配器只会被活动 gc'ed。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:08:39.830

您应该确保传递`Application`上下文（`getApplicationContext()`）而不是活动上下文（`this`例如），因为使用`Activity`上下文可能会导致内存泄漏，因为它们绑定到的对象（`view`在您的实现中）不会被垃圾收集导致内存泄漏和 OutOfMemory例外。

您应该避免的另一件事是`View`每次`getView()`调用时都创建一个新的。`convertView`是一个循环视图（滚动时弹出的视图），将用作`View`滚动后出现的行的新视图。使用它而不是每次调用都创建`view`对象（如果 GC 收集它不会导致 Outofmemory 异常，但可能会在 GC 运行时导致滚动缓慢）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:05:41.867

`convertView`你从来没有在第一个实例中分配。所以，每次`getView()`调用你都会创建一个新的`ImageView`

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView==null){
        convertView=new ImageView(myContext);
        convertView.setLayoutParams( new AbsListView.LayoutParams(columnWidth,columnWidth));
        convertView.setBackgroundColor(Color.GRAY);
    }else{

        convertView.setBackgroundColor(Color.GRAY);
    }
    return convertView;
} 
```

# visual-studio-2010 - TFS - 查找已知变更集 ID 的详细信息

> ID：13862501
> 
> 赞同：15
> 
> 时间：2012-12-13T14:58:15.230
> 
> 标签：visual-studio-2010, tfs, changeset

我知道我有兴趣查看其详细信息的变更集的 ID。是否有任何地方可以输入变更集的 ID，以便查看提交中包含哪些更改，而无需知道更改是在哪个分支中进行的？

我正在使用 VS2010 / TFS2010。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T15:06:16.990

将焦点设置在 VS 中的 SourceControlExplorer 上，然后按 CTRL+G

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T15:05:26.853

在 VS2010 的源代码管理资源管理器中，单击工具栏上的“查找变更集”图标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:55:56.163

您可以从命令行使用“tf.exe 变更集 ID”。

请注意，您的当前目录需要是您尝试查找变更集的服务器上的映射工作区。否则你需要指定 /s:servername (eg /s:http://tfsserver:8080/tfs

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-08T10:16:24.483

扩展 Rassi 的答案以在命令提示符下获取所有内容

从命令行您可以使用`tf.exe changeset <<changeset ID>> /noprompt`

[微软链接](http://msdn.microsoft.com/en-us/library/w51xa47k%28v=vs.100%29.aspx)

# windows - 如何从 MSI 包安装 Windows 更新

> ID：13862502
> 
> 赞同：3
> 
> 时间：2012-12-13T14:58:24.660
> 
> 标签：windows, wix, windows-installer, installation, wix3.5

有没有办法从 MSI 包安装中安装 Windows 更新？

我在 WiX 中创作了一个 MSI 包，它需要在机器中安装一些 Windows 更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:55:11.853

Windows Installer was intended for the installation of Windows applications, rather than Windows updates or service packs. Your setup application may be able to invoke the [Windows Update Stand-alone Installer](http://support.microsoft.com/kb/934307) (Wusa.exe) and the [Windows Update Agent (WUA) API](http://msdn.microsoft.com/en-us/library/aa387292.aspx). However, the package developer would need to consider what their users would think of package that updates the system.

# google-app-engine - 在 Appengine 上配置 JDO 时，DatastoreJDOPersistenceManagerFactory 类未找到异常

> ID：13862507
> 
> 赞同：1
> 
> 时间：2012-12-13T14:58:38.717
> 
> 标签：google-app-engine, jdo, google-plugin-eclipse

我正在尝试在 Appengine 上配置 JDO，但是每次尝试持久化某些内容时，我都会收到 java.lang.ClassNotFoundException: org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory 搜索此错误，但我发现我可能在我的 jdoconfig.xml 但是我明确声明我想使用我的 jdoconfig.xml 这个类，我在下面发布了它。

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig">
  <persistence-manager-factory name="transactions-optional">
    <property name="javax.jdo.PersistenceManagerFactoryClass"
            value="org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory"/>
        <property name="javax.jdo.option.ConnectionURL" value="appengine"/>
        <property name="javax.jdo.option.NontransactionalRead" value="true"/>
        <property name="javax.jdo.option.NontransactionalWrite" value="true"/>
        <property name="javax.jdo.option.RetainValues" value="true"/>
        <property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true"/>
  </persistence-manager-factory>
</jdoconfig> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:23:45.253

决定您使用的是 GAE JDO 插件 v1.0 (JDO2.x) 还是 GAE JDO 插件 v2.0 (JDO3.0)，这决定了您在类路径中有哪些 jar，因此您在*jdoconfig.xml中放置了哪些条目*

# tags - Github for Windows - 添加标签

> ID：13862517
> 
> 赞同：14
> 
> 时间：2012-12-13T14:59:02.233
> 
> 标签：tags, github-for-windows

有没有办法在 Github 的 Windows 客户端中管理存储库标签？

（如果没有，我怎么能这样做？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T15:12:26.237

您仍然需要从“GitHub for Windows”GUI 打开一个 bash 并使用 CLI。

```
git push --tags
git fetch --tags
git tag -a ... 
```

（见[`git tag`手册页](http://git-scm.com/docs/git-tag)）

[GitHub for Mac](https://superuser.com/questions/308585/how-can-i-create-a-tag-with-github-for-mac)也有类似的问题，在这两种情况下， `refs/tags`GUI 都没有考虑标签命名空间 ( )。

* * *

自 2020 年 5 月起，7 年后：

“[在最新的 GitHub Desktop 2.5 版本中创建和推送标签](https://github.blog/2020-05-12-create-and-push-tags-in-the-latest-github-desktop-2-5-release/)”

> 在今天的 2.5 版本中，您可以直接从 GitHub Desktop 创建和查看标签。现在，当您推送到 GitHub.com 时，会自动包含在 Desktop 中创建的任何标签。GitHub Desktop 还会在您创建标签但尚未推送标签时通知您，因此您不要忘记与团队其他成员分享您的最新标签。

[![https://i1.wp.com/user-images.githubusercontent.com/10404068/81434697-70277500-911b-11ea-9b30-d5da8a80a664.gif?ssl=1](../Images/02d115431248a5b3d992d75ccdfc83bb.png)](https://i.stack.imgur.com/kQNTb.gif)

# breeze - Breeze.js - + 访问服务元数据时面临问题

> ID：13862521
> 
> 赞同：0
> 
> 时间：2012-12-13T14:59:14.350
> 
> 标签：breeze

Breeze.js - + 访问服务元数据时遇到问题。

元数据请求发送至 `http://mylocalmachine:4625/WcfDataService1.svc/Metadata`

但元数据正在发布`http://mylocalmachine:4625/WcfDataService1.svc/$Metadata`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:21:25.060

您的 Breeze 客户端必须配置为与您的远程服务进行通信。当我阅读您的问题时，您似乎正在尝试访问其数据服务名称为“ *http://mylocalmachine:4625/WcfDataService1.svc ”的***OData**数据源。

 *如果是这样，您必须告诉 Breeze 从其*默认的* **Web Api dataService 适配器**切换到**OData dataService 适配器**。在您的应用程序引导期间使用以下行执行此操作：

```
微风.config.initializeAdapterInstance("dataService", "OData");

```

现在，当您运行您的应用程序并查看网络流量时，您应该会看到 Breeze 请求元数据，例如

```
http://mylocalmachine:4625/WcfDataService1.svc/$Metadata

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:53:57.367

为了使用 OData 适配器，您需要在页面中包含一个必备的 JavaScript 库。

它在文档中提到：- [dataJS](http://datajs.codeplex.com/)。

希望这可以帮助。*

# database-design - JPA 实现了可扩展性 - 实体关系映射与 ID 映射（int、longs）

> ID：13862523
> 
> 赞同：1
> 
> 时间：2012-12-13T14:59:24.833
> 
> 标签：database-design, jpa

为了在关系数据库中实现更好的可伸缩性，您是否认为有时最好通过仅使用 ID 集合来描述它们来避免引用键约束（通过 JPA 的 ORM 注释公开）。

例如，两个实体之间的下一个关系

```
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(
    name = "ContactGroup_User", 
    joinColumns = @JoinColumn(name = COLUMN_NAME_GROUP_PK), 
    inverseJoinColumns = @JoinColumn(name = COLUMN_NAME_USER_PK)
)
private List<User> users; 
```

也可以这样描述：

```
private List<Long> userIds; 
```

这是为了在某一天扩展您的（例如垂直扩展）数据库并且没有引用键和约束以某种方式阻止您并让您成为可能。当需要用户数据时，这可以通过关联的 JPA 查询来完成。

所有相关评论都可能有用！

谢谢，西蒙

# php - phpwhois 不能在 Godaddy 上工作

> ID：13862528
> 
> 赞同：1
> 
> 时间：2012-12-13T14:59:41.827
> 
> 标签：php

我从 go-daddy 在我的共享托管服务器上安装了这个脚本[PHPwhois 。](http://sourceforge.net/projects/phpwhois/)我没有得到 Whois 信息。在我的本地主机上这项工作没有任何问题。

这是我的脚本

```
<?php

include_once('whois/whois.main.php');

    $whois = new Whois();
    $allowproxy = false;
    $whois->non_icann = true;
    $result = $whois->Lookup("facebook.com"); 

echo "<pre>";
print_r($result);  
echo "</pre>";  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:46:54.073

从 godaddy 服务器执行外部连接时，您只能使用端口 80 (http) 或 443 (https)。如果您指定了任何其他端口，它将被阻止。

见这里，[http://support.godaddy.com/help/article/287/do-you-support-fsockopen](http://support.godaddy.com/help/article/287/do-you-support-fsockopen)

# oracle - 时间戳甲骨文

> ID：13862529
> 
> 赞同：0
> 
> 时间：2012-12-13T14:59:43.617
> 
> 标签：oracle, plsql

如何在 oracle 查询中转换时间 16:00:00 或 08:00:00 HH12:MI AM 格式

我尝试 `TO_CHAR ('16:00:00', 'HH12:MI AM')` 但它显示没有 AM / PM 。

请检查

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:09:56.580

好吧，它工作正常：

```
select to_char(to_date('16:00:00', 'hh24:mi:ss'), 'hh12:mi am') from dual; 
```

结果是：

```
04:00 pm 
```

这不是你想要的吗？

# java - 使用 Hibernate 加载整个数据库

> ID：13862531
> 
> 赞同：0
> 
> 时间：2012-12-13T14:59:45.950
> 
> 标签：java, hibernate, memory, sqlite, eager

我在 Java 中使用 SQLite3 和 Hibernate。我可以以某种方式将整个数据库加载到内存中或从数据库中获取所有数据，以便我可以最快地访问映射对象吗？例如，如果我们有一个 Company 和 Employee 类，并且在 Company 中，我们将Employees 映射为 company.getEmployees()。我想从数据库中获取所有公司，稍后当我调用此方法时，我想立即获取员工。那么有没有办法预加载它们？此外，如果员工被映射到其他对象，我也可以预加载它们吗？总而言之，我想加载整个数据库并使用 ORM 来访问数据。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:42:09.060

如果您的目标只是出色的性能，您有多种选择：

*   配置 Hibernate 二级[缓存](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-cache)
*   除了前面一点，如果您的数据没有太大变化，请配置[查询缓存。](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-querycache)
*   代替 SQLite 在嵌入式模式下使用[HSQLDB](http://hsqldb.org/)或[H2](http://www.h2database.com)内存 SQL 数据库
*   将[ObjectDB](http://www.objectdb.com/)与大型共享[缓存](http://www.objectdb.com/java/jpa/persistence/cache)一起使用。符合 JPA 的 OODB。
*   使用 MongoDB。一个非常快速的内存 NoSQL 解决方案

如果您不需要使用 SQL，我建议使用 ObjectDB。

（编辑：删除急切获取，添加查询缓存。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:05:21.387

将实体类中的所有关系设置为渴望。如果您使用 JPA 注释：

```
public class Company{

private List<Employee> employeeList;

@ManyToMany(fetch = FetchType.EAGER)
public List<Employee> getEmployeeList() {
        return employeeList;
    }
} 
```

当您从数据库中检索公司时，这将自动获取所有员工。请注意，这可能会显着影响性能。

# ios - 通过 RESTful-Http 与 iPhone 应用程序中的 Web 服务进行通信的最佳方式是什么

> ID：13862533
> 
> 赞同：1
> 
> 时间：2012-12-13T14:59:49.433
> 
> 标签：ios, rest, restkit, afnetworking

我的 iphone 应用程序应该能够通过 RESTful HTTP 与 Web 服务器通信。所以现在我想弄清楚这样做的最佳方法是什么。有没有提供我想要的功能的轻量级框架？我的意思是功能：用几行代码做简单的http请求。我在我的项目中阅读了很多关于 RESTkit 和 testet 的内容，但是在升级到 0.20 之后，一切都让我感到非常困惑。

所以我的问题是：通过 RESTFul Http 从 iPhone 与 Web 服务进行通信的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:24:42.800

如果您只需要与 Web 服务通信以完成没有本地缓存​​的简单任务（即离线访问数据），只需使用[AFNetworking 即可](https://github.com/AFNetworking/AFNetworking)。

如果您需要与 Web 服务通信，并且还需要映射到应用程序中的对象和缓存到核心数据，相信我，从长远来看，[Restkit](https://github.com/RestKit/RestKit)将为您节省大量时间。我的应用程序是围绕 Web 服务构建的，一旦配置正确，使用起来很愉快，尤其是新版本 (0.2.x)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:22:12.903

就个人而言，我的方法是使用 NSURLConnection、Grand Central Dispatch 和 NSJSONSerialization。我为每个项目编写了一个 Web 服务类，其中包含反映每个单独应用程序需求的简单便利功能。我当然会跨项目重用一些代码，但我并没有刻意地努力编写可重用的代码。

我也尝试过 RESTKit，发现它使用起来太混乱/复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:28:11.967

我个人只使用来自 iOS 标准 SDK 的 NSURLConnection。它没有比我需要的更少或更多。

# python - 在 python 2.7 中使用 tkinter 动态添加复选框

> ID：13862535
> 
> 赞同：4
> 
> 时间：2012-12-13T14:59:57.500
> 
> 标签：python, user-interface, tkinter, tk

我想通过预制列表将复选框动态添加到我的 gui。如何使用列表中的名称填充 GUI？它们都具有相同类型的功能，因此这应该不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:42:13.843

如果您想在启动时使用预制列表填充您的 GUI：

```
from Tkinter import *

root = Tk()

premadeList = ["foo", "bar", "baz"]

for checkBoxName in premadeList:
    c = Checkbutton(root, text=checkBoxName)
    c.pack()

root.mainloop() 
```

如果您想在运行时使用复选框动态填充 GUI：

```
import random
import string
from Tkinter import *

root = Tk()

def addCheckBox():
    checkBoxName = "".join(random.choice(string.letters) for _ in range(10))
    c = Checkbutton(root, text=checkBoxName)
    c.pack()

b = Button(root, text="Add a checkbox", command=addCheckBox)
b.pack()

root.mainloop() 
```

当然，你可以同时做到：

```
import random
import string
from Tkinter import *

root = Tk()

def addCheckBox():
    checkBoxName = "".join(random.choice(string.letters) for _ in range(10))
    c = Checkbutton(root, text=checkBoxName)
    c.pack()

b = Button(root, text="Add a checkbox", command=addCheckBox)
b.pack()

premadeList = ["foo", "bar", "baz"]

for checkBoxName in premadeList:
    c = Checkbutton(root, text=checkBoxName)
    c.pack()

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:26:28.560

使用带有复选框的树视图。

![带复选框的树视图](../Images/5f962c0fa1331cf91d18360a50e72575.png)

[如何在 Python 中创建带有复选框的树视图](https://stackoverflow.com/questions/5104330/how-to-create-a-tree-view-with-checkboxes-in-python)

# python - 在 Python 2.7 的 Igraph 0.6 中按大小/长度绘制边（不适用于 R）

> ID：13862536
> 
> 赞同：0
> 
> 时间：2012-12-13T14:59:58.913
> 
> 标签：python, plot, igraph, edges

看来我找不到以下问题的解决方案：

我想按大小（长度，而不是宽度）绘制边缘。

我的意思是，如果 V1 和 V2 顶点之间的边的值等于 20，我想将该边精确地绘制为 20 像素。

如果 V2 和 V3 之间的另一条边为 60，则该边在图中将更长。

我找不到如何指定边缘大小或长度。也许像其他绘图属性（顶点大小、颜色、宽度等）一样简单的代码线是不可能的。Igraph 教程没有给出答案。恐怕很难。

即使我猜固定边会给出一个恒定的形状，图形的形状方向也不重要。

该图是无向的，但有许多顶点和边序列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:48:56.713

igraph 中没有边缘属性可以让您直接控制边缘的长度。主要原因是完全满足所有长度约束是不可能的，除非您的图形具有非常稀疏的结构和/或长度非常具体。

我唯一想到的是一种称为[多维缩放](http://en.wikipedia.org/wiki/Multidimensional_scaling)（MDS）的技术。在不深入细节的情况下，MDS 的输入是一个*n* x *n*矩阵（其中*n*是图中的顶点数），并且矩阵单元包含所需的点之间的距离。MDS 的输出是一些低维空间（通常是 2D 平面）中的顶点排列，其中实际距离和所需距离之间的总平方差被最小化。特别是，如果在 2D 空间中可以完全满足所需的距离，MDS 会为您找到该配置。`layout_mds`igraph 在对象方法中包含 MDS 作为布局算法`Graph`。

现在，问题来了。我提到距离矩阵的大小为*n* x *n*。问题在于，这意味着您必须为*每个*顶点对指定距离，而不仅仅是连接的顶点对。我的印象是，您的问题并非如此（即您只有连接的顶点对的距离），在这种情况下，MDS 是无用的，除非您可以以某种方式“近似”断开的顶点对的距离 - 但在这种情况下布局也只是一个近似值。

另一种选择是 Kamada-Kawai 布局（参见 Kamada, T. & Kawai, S. (1989)。绘制一般无向图的算法。*信息处理快报*，**31**, 7-15)，其中边缘被建模为弹簧，每个弹簧具有规定的平衡长度。布局将尝试稳定在接近物理平衡的配置中（在这种情况下，所有弹簧长度都接近其平衡长度，因此它们不会在其端点（即顶点）上施加力）。这里的问题是 igraph 中的 Kamada-Kawai 布局没有准备好处理弹簧的不同平衡长度，即假设每个链接都具有相同的“所需”长度。如果您愿意用 Python 从头开始​​自己实现 Kamada-Kawai 布局，那么这可能是另一种可能性。

# java - 排除maven中的嵌套传递依赖

> ID：13862540
> 
> 赞同：6
> 
> 时间：2012-12-13T15:00:09.453
> 
> 标签：java, maven, dependencies

我的项目依赖`jparsec`，哪个依赖`cglib`，哪个依赖`asm`。我的项目也直接依赖于`asm`，但比那个更新的版本`cglib`依赖于：

![在此处输入图像描述](../Images/73f522bf11af42ef08b5d9965ea6bd9d.png)

看来我不能排除`asm`我的`jparsec`依赖。当我尝试用 Eclipse 排除它时，它对我的​​ pom.xml 没有任何改变。如果我手动排除它，它没有效果。

我在这里唯一的选择是排除`cglib`然后`jparsec`手动添加对排除的依赖项`cglib`吗`asm`？这对我来说似乎有点令人费解，但它确实有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:19:17.580

我原以为如果您在 POM 中放入`asm`之前`jparsec`，则不需要排除。Maven [“最近定义”](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)行为将启动以确保仅`4.1`使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T15:18:57.733

根据我的评论，您有 2 个选项来解决此问题：

1.  您建议的那个，例如排除`cglib`和添加`jparsec`排除。`cglib``asm`
2.  `asm`在依赖项上方找到您的`jparsec`依赖项。

# sql-server-2008 - 如何在不使用光标的情况下替换列中的不同字符？

> ID：13862548
> 
> 赞同：0
> 
> 时间：2012-12-13T15:00:16.303
> 
> 标签：sql-server-2008, tsql

```
Sample items in table1 

table1.productname 
Moshi Monsters 7-in-1 Accessory Pack - Poppet 
Mario vs. Donkey Kong Mini-Land Mayhem! 
```

我想`replace`'-。！从所有`productname`但使用

```
select case
        when CHARINDEX ('-',[productname])>0 then REPLACE (ProductName ,'-',' ')
        when CHARINDEX ('!',[productname])>0 then REPLACE (ProductName ,'!','') 
        when CHARINDEX ('.',[productname])>0 then REPLACE (ProductName ,'.','') 
       else productname
       end as productname 
   from table1 
```

似乎只替换`-`

```
output

Moshi Monsters 7 in 1 Accessory Pack   Poppet 
Mario vs. Donkey Kong Mini-Land Mayhem 

expected output 
Moshi Monsters 7 in 1 Accessory Pack   Poppet 
Mario vs Donkey Kong MiniLand Mayhem 
```

我该如何解决这个问题，我在产品名称中有多个字符要替换，例如示例等，并且该列大约 5k 大。实际上，我想用更改后的名称更新 table1，但想查看哪些已更改以及如何更新。这种`replace`说法似乎无法满足所有要求。似乎可以通过更新中的多次迭代来完成，但不知道如何在更新中使用迭代。我该如何提前处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:04:34.357

您始终使用相同的源进行字符串替换：原始`ProductName`字段，不会更改。您需要链接替换：

```
REPLACE(REPLACE(REPLACE(ProductName, '.', ''), '!', ''), '-', '') 
```

这变得非常丑陋。你最好在你的客户中这样做。

# asp.net - 服务器超时错误

> ID：13862549
> 
> 赞同：0
> 
> 时间：2012-12-13T15:00:16.587
> 
> 标签：asp.net, sql, sql-server, timeoutexception

**我在通过 ASP.NET 站点到 SQL Server 执行计算过程时遇到问题。我知道没有太多细节，但希望这里有人可以提供帮助。该程序在某些情况下有效，而在某些情况下则无效。这是计算炸弹时的错误消息....**

## “/”应用程序中的服务器错误。

超时已过。在操作完成之前超时时间已过或服务器没有响应。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[SqlException (0x80131904): 超时。操作完成前超时时间已过或服务器没有响应。] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +1948826 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +4844747 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194 System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2392 System.Data。 SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +204 System.Data.SqlClient.SqlCommand。

* * *

版本信息：Microsoft .NET Framework 版本：2.0.50727.3053；ASP.NET 版本：2.0.50727.3053

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:41:24.070

您可以尝试的事情很少

1.  增加**[SQLCommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)**
2.  如果您的查询花费的时间超过请求默认时间，请在 web.config 文件中增加**[HttpRuntime 的 Execution Time out 属性](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.executiontimeout.aspx)**
3.  增加**[ScriptTimeout](http://msdn.microsoft.com/en-us/library/ms524831%28v=vs.90%29.aspx)**属性
4.  运行 SQL Proffiler 并优化 SQL 过程，如果需要更多时间（在查询分析器和数据库优化顾问 (DTA) 的帮助下）

# wpf - 拖动图钉时禁用平移

> ID：13862553
> 
> 赞同：0
> 
> 时间：2012-12-13T15:00:57.077
> 
> 标签：wpf, drag-and-drop, bing-maps, pushpin, panning

我试图阻止 WPF Bing Maps 控件在用户拖动图钉时平移。我所做的是，当用户选择带有 MouseLeftButtonDown 的图钉时，从地图 ViewChangeStart、ViewChangeOnFrame 中接管事件并将 e.Handled 属性设置为 true。

我所期待的是，如果我将该属性设置为 true，则事件将被取消并禁用平移。但是地图仍在平移。

我尝试的另一种方法是将属性 SupportedManipulations 设置为 None。这两个选项都没有预期的结果。

下面是我用于 DraggablePushpin 的代码

```
 public class DraggablePushpin : Pushpin
    {
        private bool isDragging = false;

        protected override void OnPreviewMouseLeftButtonDown(System.Windows.Input.MouseButtonEventArgs e)
        {
            var parentLayer = this.Parent as MapLayer;
            if (parentLayer != null)
            {
                Map parentMap = parentLayer.Tag as Map;
                if (parentMap != null)
                {
                    parentMap.ViewChangeStart += parentMap_ViewChangeStart;
                    parentMap.MouseLeftButtonUp += parentMap_MouseLeftButtonUp;
                    parentMap.MouseMove += parentMap_MouseMove;

                    parentMap.SupportedManipulations = System.Windows.Input.Manipulations.Manipulations2D.None;
                }
            }

            this.isDragging = true;

            base.OnPreviewMouseLeftButtonDown(e);
        }

        protected override void OnMouseLeftButtonDown(System.Windows.Input.MouseButtonEventArgs e)
        {
            base.OnMouseLeftButtonDown(e);
        }

        void parentMap_MouseMove(object sender, System.Windows.Input.MouseEventArgs e)
        {
            var map = sender as Map;
            // Check if the user is currently dragging the Pushpin
            if (this.isDragging)
            {
                // If so, the Move the Pushpin to where the Mouse is.
                var mouseMapPosition = e.GetPosition(map);
                var mouseGeocode = map.ViewportPointToLocation(mouseMapPosition);
                this.Location = mouseGeocode;
            }
        }

        void parentMap_MouseLeftButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            (sender as Map).SupportedManipulations = System.Windows.Input.Manipulations.Manipulations2D.All;
        }

        protected override void OnMouseLeftButtonUp(System.Windows.Input.MouseButtonEventArgs e)
        {
            var parentLayer = this.Parent as MapLayer;
            if (parentLayer != null)
            {
                Map parentMap = parentLayer.Tag as Map;
                if (parentMap != null)
                {
                    parentMap.SupportedManipulations = System.Windows.Input.Manipulations.Manipulations2D.All;
                }
            }
        }

        void parentMap_ViewChangeStart(object sender, MapEventArgs e)
        {
            if (this.isDragging)
            {
                e.Handled = true;
            }
        }

    } 
```

# ruby - 如何将测试报告日志文件转换为 Jenkins Junit XML 文件格式？

> ID：13862554
> 
> 赞同：2
> 
> 时间：2012-12-13T15:00:57.303
> 
> 标签：ruby, xml, jenkins

我被分配了一项与 Ruby 相关的任务，但由于我是新手，所以我正在互联网上搜索合适的解决方案来解决它：

1.  我在网页中有一个日志文件报告列表，实际上分为通过或失败。
2.  我需要获取日志文件并将它们转换为与 Jenkins Junit XML 文件格式兼容的格式。
3.  一切，从日志到 XML 的通道都必须用 Ruby 编写。

有任何想法吗？！

我查看了整个互联网并找到了信息，但仍然没有明确的想法如何解决这个问题。

是否有任何 Ruby 库可以使这更容易？有没有人处理过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:26:24.000

你没有显示你需要的格式，我也不知道 Jenkins 需要什么，但是创建 XML 很容易。不幸的是，您想要的将是一本书或几篇文章，这超出了 Stack Overflow 的范围。虽然基本上...

您可以使用模板系统，例如[ERB](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)，您可以在其中为整个 XML 文档创建模板，或者[Nokogiri::Builder](http://nokogiri.org/Nokogiri/XML/Builder.html)可用于生成 XML，或者您可以使用老式的方法并使用简单的字符串插值来创建 XML。

系统日志文件通常结构良好，至少对于前几个字段，然后是作为各种命令输出的自由格式文本。来自 Apache 的日志文件与此类似，包含文本列，后跟一些自由格式但易于解析的文本。这里和那里都有宝石，还有关于如何解析日志的教程，所以到处搜索，你会发现一些东西。这个想法是您希望将读取的每一行分解为可以分配给 XML 节点的文本。

一旦你有了你的字段，你可以将它们替换到模板中，或者让 Ruby 将变量插入到字符串中，或​​者使用 Builder 在标签之间添加文本。

这并不难，但需要完成几个小任务。

使用字符串插值，如果你想要 XML 像：

```
<xml>
  <tag1>
    <tag2>some text</tag2>
    <tag2>some more text</tag2>
  </tag1>
</xml> 
```

您可以像这样创建它：

```
var1 = "some text"
var2 = "some more text"
xml = %Q{
<xml>
  <tag1>
    <tag2>#{var1}</tag2>
    <tag2>#{var2}</tag2>
  </tag1>
</xml>
}
puts xml 
```

同样，如果你想使用 ERB：

```
require 'erb'

var1 = "some text"
var2 = "some more text"

template = ERB.new <<-EOF
<xml>
  <tag1>
    <tag2><%= var1 %></tag2>
    <tag2><%= var2 %></tag2>
  </tag1>
</xml>
EOF
puts template.result(binding) 
```

哪个输出：

```
<xml>
  <tag1>
    <tag2>some text</tag2>
    <tag2>some more text</tag2>
  </tag1>
</xml> 
```

或者，使用 Nokogiri::Builder：

```
require 'nokogiri'

var1 = "some text"
var2 = "some more text"
builder = Nokogiri::XML::Builder.new do |node|
  node.xml {
    node.tag1 {
      [var1, var2].each do |t|
        node.tag2(t)
      end
    }
  }
end
puts builder.to_xml 
```

哪个输出：

```
<?xml version="1.0"?>
<xml>
  <tag1>
    <tag2>some text</tag2>
    <tag2>some more text</tag2>
  </tag1>
</xml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T15:38:07.570

在此链接下有一个小解释可能会有所帮助 [https://pzolee.blogs.balabit.com/2012/11/jenkins-vs-junit-xml-format/](https://pzolee.blogs.balabit.com/2012/11/jenkins-vs-junit-xml-format/)

基本上，您只需使用[https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin) 来导入遵循 Junit 模式的 XML。您可以将 XML 转换为具有该方案的 Junit 格式。可以在以下位置找到对 Junit 格式的一个很好的描述：llg.cubic.org/docs/junit/

# php - 将 sum() sql 与 php ActiveRecord 一起使用

> ID：13862559
> 
> 赞同：1
> 
> 时间：2012-12-13T15:01:06.830
> 
> 标签：php, phpactiverecord

我在我的应用程序中使用[ActiveRecord](http://phpactiverecord.org/)。我需要按属性添加许多对象。目前我这样做如下：

```
foreach($objects as $object):
    $result += $object->value;
endforeach; 
```

但这很慢。我想我可以通过 sql sum() 得到相同的结果，但效率更高，所以问题是 ActiveRecord 可以返回 sum() 结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:49:25.437

模型中已经实现的唯一聚合函数是`count()`. 对于`sum()`，您必须使用 SQL 查询。您可以使用不同的类（ 或 ）来做到`Connection`这`Table`一点`Model`。

这是使用`find_by_sql()`（`Model`返回模型数组）：

```
$result = FooModel::find_by_sql('SELECT SUM(`value`) AS sum FROM `foo_table`')[0]->sum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-21T10:33:36.717

将自定义模型添加到您的 lib/Model.php 文件中

```
public static function sum($args) {
    $args = func_get_args();
    $options = static::extract_and_validate_options($args);
    $options['select'] = 'SUM('.$args[0]["sum"].')';
    if (!empty($args) && !is_null($args[0]) && !empty($args[0]))
    {
        if (is_hash($args[0]))
            $options['conditions'] = (isset($args[0]["conditions"]) ? $args[0]["conditions"] : array());
        else
            $options['conditions'] = call_user_func_array('static::pk_conditions',$args);
    }
    $table = static::table();
    $sql = $table->options_to_sql($options);
    $values = $sql->get_where_values();
    return static::connection()->query_and_fetch_one($sql->to_s(),$values); 
} 
```

然后调用它：

YourModel::sum(array('conditions' => 'userid = 3', 'sum' => 'your_column'));

或者

YourModel::sum(array('sum' => 'your_column'));

# python - 尝试冻结 python 应用程序时未找到 Google 协议缓冲区

> ID：13862562
> 
> 赞同：4
> 
> 时间：2012-12-13T15:01:18.543
> 
> 标签：python, py2exe, pyinstaller, cx-freeze

当尝试使用 cx_freeze、bbfreeze、pyinstaller 或 py2exe 中的任何一个冻结 python (2.7) 应用程序时，被冻结的应用程序找不到 google.protobuf。

在冻结过程的日志中，通常会出现“找不到谷歌”之类的信息。所以谷歌包没有找到也没有打包，虽然它在python的站点包中并且非冻结版本工作得很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:11:56.853

我在写这个问题时已经有了一个解决方案——我把它放在这里是因为其他人很可能会在这里很容易地找到它。

`__init__.py`解决方案：在你的 python 安装目录中创建一个空`Lib/site-packages/google`的，并以某种方式编译它（`import google`例如在交互式 python 会话中）。当`__init__.pyc`包目录中有时，冻结工具开始工作。

# html - HTML5 Canvas 轮盘赌

> ID：13862564
> 
> 赞同：0
> 
> 时间：2012-12-13T15:01:21.307
> 
> 标签：html, canvas

我在画布和 JS 中构建了一个轮盘赌。轮子有 12 段，宽 30 度。

我想要这样当轮子旋转经过轮段时，会播放声音。我尝试使用模数，但无法正常工作。任何提示或建议？

```
if (rotation % 30 == 0) {
    playSound();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:03:08.933

假设你的旋转是度数，你可能想要

```
if (((rotation+360)%360)<30) { 
```

首先计算 0 到 360 之间的角度。

如果你的角度是弧度，这是画布的原生单位，你可能会这样做

```
 if (((rotation+2*Math.PI)%(2*Math.PI))<Math.PI/6) { 
```

# asp.net - 对 ASP.NET 字典进行排序

> ID：13862566
> 
> 赞同：1
> 
> 时间：2012-12-13T15:01:26.457
> 
> 标签：asp.net, vb.net, dictionary

我想将字典绑定到 DropDownList。但在绑定之前，我想按字母顺序对它进行排序 - 通过键或值。

我怎样才能得到它？是否有某种内置排序功能或技巧？

这是我的代码：

```
 Dim Dic1 As New Dictionary(Of String, String)

      Dic1.Add("1", "pear")
      Dic1.Add("2", "apple")
      Dic1.Add("3", "juice")
      Dic1.Add("4", "milk")
      Dic1.Add("5", "cornflakes")

    drpProduct.DataSource = Dic1
    drpProduct.DataTextField = "Value"
    drpProduct.DataValueField = "Key"
    drpProduct.DataBind() 
```

在此先感谢，最好的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:02:36.580

您可以自己对其进行排序，但最好的方法可能是使用[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:04:55.040

这可以在 LINQ 中通过以下方式实现（例如，按字母顺序对键进行排序，C# 语法）：

```
drpProduct.DataSource = Dic1.OrderBy(kvp => kvp.Key); 
```

（VB.Net，类似`... = Dic1.OrderBy(Function(kvp) kvp.Key)`）

这本身并不强制对您的字典进行排序，但它在绑定到下拉列表时专门提供了排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:12:59.077

您可以使用 Linq：

```
drpProduct.DataSource = From kv In Dic1 Order By kv.Value
drpProduct.DataTextField = "Value"
drpProduct.DataValueField = "Key"
drpProduct.DataBind() 
```

如果您`Order By kv.Value`想`Order By kv.Key`通过钥匙订购，请改为。

但是正如 Adi 已经提到的那样，最好[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)从一开始就使用 a 。

# grails - STS 中的 JBoss 服务器和 Grails 2.1.0

> ID：13862567
> 
> 赞同：0
> 
> 时间：2012-12-13T15:01:29.753
> 
> 标签：grails, jboss, eclipse-plugin

在过去的几个月里，我一直在 STS 中处理一个 grails 1.3.7 项目。我们的测试和生产环境使用 JBoss 5.1。

我最近将我们的 grails 应用程序升级到了 2.1.0，并且在本地运行正常。当我将它部署到我们的测试环境时出现了主要问题（Jboss 问题）。

因此，为了避免这种情况，我也想在本地使用 JBoss 进行开发。

有没有我可以使用的 Eclipse/STS 插件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:29:29.530

不要以为 jboss 有专门的插件

如果您需要坚持使用“run-app”命令，您现在唯一的选择似乎是 tomcat 和 jetty

如果您可以放弃调试控制台并在浏览器中检查您的测试信息，那么您可能可以编写一个小脚本来自动部署到本地 jboss 服务器，您可以通过 eclipse 工作区进行设置

# scala - 在 Scala 中初始化二维（多维）数组

> ID：13862568
> 
> 赞同：26
> 
> 时间：2012-12-13T15:01:29.713
> 
> 标签：scala, multidimensional-array, initialization

在 Java 中很容易初始化一个二维数组（或者，事实上，任何多维数组），通过这样的方式：

```
int[][] x = new int[][] {
        { 3, 5, 7, },
        { 0, 4, 9, },
        { 1, 8, 6, },
}; 
```

它易于阅读，类似于 2D 矩阵等。

但是我如何在 Scala 中做到这一点？

我能想到的最好的外观，好吧，简洁得多：

```
val x = Array(
    Array(3, 5, 7),
    Array(0, 4, 9),
    Array(1, 8, 6)
) 
```

我在这里看到的问题：

*   它一遍又一遍地重复“数组”（就像除了 之外可能还有其他东西`Array`）
*   它需要`,`在每个 Array 调用中省略尾随
*   如果我搞砸了并`Array()`在数组中间插入了一些东西，编译器就可以了，但是 type of`x`会默默地`Array[Any]`变成`Array[Array[Int]]`：

    ```
    val x = Array(
        Array(3, 5, 7),
        Array(0, 4), 9, // <= OK with compiler, silently ruins x
        Array(1, 8, 6)
    ) 
    ```

    有一个防范措施，直接指定类型，但它看起来比在 Java 中更加矫枉过正：

    ```
    val x: Array[Array[Int]] = Array(
        Array(3, 5, 7),
        Array(0, 4), 9, // <= this one would trigger a compiler error
        Array(1, 8, 6)
    ) 
    ```

    最后一个例子需要`Array`的甚至比我`int[][]`在 Java 中所说的还要多 3 倍。

有什么明确的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T03:25:13.397

为了清楚起见，我个人会把它吸起来并输入（或剪切和粘贴）“数组”几次。当然，为了安全起见，请包含类型注释。但是如果你真的用完了电子墨水，一个快速简单的破解方法就是简单地为 提供一个别名`Array`，例如：

```
val > = Array

val x: Array[Array[Int]] = >(
  >(3, 5, 7),
  >(0, 4, 9),
  >(1, 8, 6)
) 
```

`Array`如果要缩短注释，还可以提供类型别名：

```
type >[T] = Array[T]

val x: >[>[Int]] = ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-13T21:05:03.700

我建议使用 Scala 2.10 和宏：

```
object MatrixMacro {

  import language.experimental.macros

  import scala.reflect.macros.Context
  import scala.util.Try

  implicit class MatrixContext(sc: StringContext) {
    def matrix(): Array[Array[Int]] = macro matrixImpl
  }

  def matrixImpl(c: Context)(): c.Expr[Array[Array[Int]]] = {
    import c.universe.{ Try => _, _ }

    val matrix = Try {
      c.prefix.tree match {
        case Apply(_, List(Apply(_, List(Literal(Constant(raw: String)))))) =>

          def toArrayAST(c: List[TermTree]) =
            Apply(Select(Select(Ident("scala"), newTermName("Array")), newTermName("apply")), c)

          val matrix = raw split "\n" map (_.trim) filter (_.nonEmpty) map {
            _ split "," map (_.trim.toInt)
          }
          if (matrix.map(_.length).distinct.size != 1)
            c.abort(c.enclosingPosition, "rows of matrix do not have the same length")

          val matrixAST = matrix map (_ map (i => Literal(Constant(i)))) map (i => toArrayAST(i.toList))

          toArrayAST(matrixAST.toList)
      }
    }

    c.Expr(matrix getOrElse c.abort(c.enclosingPosition, "not a matrix of Int"))
  }

} 
```

用法与：

```
scala> import MatrixMacro._
import MatrixMacro._

scala> matrix"1"
res86: Array[Array[Int]] = Array(Array(1))

scala> matrix"1,2,3"
res87: Array[Array[Int]] = Array(Array(1, 2, 3))

scala> matrix"""
     |   1, 2, 3
     |   4, 5, 6
     |   7, 8, 9
     | """
res88: Array[Array[Int]] = Array(Array(1, 2, 3), Array(4, 5, 6), Array(7, 8, 9))

scala> matrix"""
     |   1, 2
     |   1
     | """
<console>:57: error: rows of matrix do not have the same length
matrix"""
^

scala> matrix"a"
<console>:57: error: not a matrix of Int
              matrix"a"
              ^ 
```

我不认为你会缩短它。;)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T15:54:35.277

如果仅使用`List`of `List`（它本身不能保证每个子列表的大小相同）对您来说不是问题，并且您只关心简单的语法并在创建时避免错误，那么 scala 有很多创建方法不错的语法结构。

一种这样的可能性是一个简单的助手：

```
object Matrix {
  def apply[X]( elements: Tuple3[X, X, X]* ): List[List[X]] = {
    elements.toList.map(_.productIterator.toList.asInstanceOf[List[X]] )
  }
  // Here you might add other overloads for Tuple4, Tuple5 etc if you need "matrixes" of those sizes
}

val x = Matrix(
  (3, 5, 7),
  (0, 4, 9),
  (1, 8, 6)
) 
```

关于您的顾虑：

> 它一遍又一遍地重复“列表”（就像除了列表之外可能还有其他东西）

不是这里的情况。

> 它需要在每个 List 调用中省略 trailing

不幸的是，这里仍然如此，鉴于 scala 的句法规则，您无能为力。

> 如果我搞砸并在数组中间插入除 List() 之外的其他内容，编译器会正常运行，但 x 的类型会默默地变为 List[Any] 而不是 List[List[Int]]：

```
val x = List(
  List(3, 5, 7),
  List(0, 4), 9, // <= OK with compiler, silently ruins x
  List(1, 8, 6)
) 
```

等效代码现在无法编译：

```
scala> val x = Matrix(
     |   (3, 5, 7),
     |   (0, 4), 9,
     |   (1, 8, 6)
     | )
<console>:10: error: type mismatch;
 found   : (Int, Int)
 required: (?, ?, ?)
         (0, 4), 9, 
```

最后，如果你想明确指定元素的类型（比如你想防止无意中混合`Int`s 和`Double`s 的可能性），你只需要指定`Matrix[Int]`而不是丑陋的`List[List[Int]]`：

```
val x = Matrix[Int](
  (3, 5, 7),
  (0, 4, 9),
  (1, 8, 6)
) 
```

编辑：我看到你在你的问题中替换`List`为。`Array`要使用数组，您只需在上面的代码中替换`List`为`Array`和。`toList``toArray`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-14T08:23:52.810

由于我也对这个尾随逗号问题感到厌恶（即，我不能简单地将最后一行与任何其他行交换）我有时使用流畅的 API 或构造函数语法技巧来获得我喜欢的语法。使用构造函数语法的示例是：

```
trait Matrix {
  // ... and the beast
  private val buffer = ArrayBuffer[Array[Int]]()
  def >(vals: Int*) = buffer += vals.toArray
  def build: Array[Array[Int]] = buffer.toArray
} 
```

这使得：

```
// beauty ... 
val m = new Matrix {
  >(1, 2, 3)
  >(4, 5, 6)
  >(7, 8, 9)
} build 
```

不幸的是，这依赖于可变数据，尽管它只是在构建过程中临时使用。在我想要构造语法的最大美感的情况下，我更喜欢这个解决方案。

如果`build`太长/冗长，您可能希望用空的应用函数替换它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T16:52:45.107

我不知道这是否是简单的方法，但我在下面包含了一些代码，用于将嵌套元组转换为“2D”数组。

首先，您需要一些样板来获取元组的大小以及将元组转换为`[Array[Array[Double]]`. 我使用的一系列步骤是：

1.  找出元组中的行数和列数
2.  将嵌套元组变成单行数组
3.  根据原始元组的大小重塑数组。

代码是：

```
object Matrix {

    /**
     * Returns the size of a series of nested tuples. 
     */
    def productSize(t: Product): (Int, Int) = {
        val a = t.productArity
        val one = t.productElement(0)
        if (one.isInstanceOf[Product]) {
            val b = one.asInstanceOf[Product].productArity
            (a,  b)
        }
        else {
            (1, a)
        }
    }

    /**
     * Flattens out a nested tuple and returns the contents as an iterator. 
     */
    def flattenProduct(t: Product): Iterator[Any] = t.productIterator.flatMap {
        case p: Product => flattenProduct(p)
        case x => Iterator(x)
    }

    /**
     * Convert a nested tuple to a flattened row-oriented array.
     * Usage is:
     * {{{
     *  val t = ((1, 2, 3), (4, 5, 6))
     *  val a = Matrix.toArray(t)
     *  // a: Array[Double] = Array(1, 2, 3, 4, 5, 6)
     * }}}
     *
     * @param t The tuple to convert to an array
     */
    def toArray(t: Product): Array[Double] = flattenProduct(t).map(v =>
        v match {
            case c: Char => c.toDouble
            case b: Byte => b.toDouble
            case sh: Short => sh.toDouble
            case i: Int => i.toDouble
            case l: Long => l.toDouble
            case f: Float => f.toDouble
            case d: Double => d
            case s: String => s.toDouble
            case _ => Double.NaN
        }

    ).toArray[Double]

    def rowArrayTo2DArray[@specialized(Int, Long, Float, Double) A: Numeric](m: Int, n: Int,
            rowArray: Array[A]) = {
        require(rowArray.size == m * n)
        val numeric = implicitly[Numeric[A]]
        val newArray = Array.ofDim[Double](m, n)
        for (i <- 0 until m; j <- 0 until n) {
            val idx = i * n + j
            newArray(i)(j) = numeric.toDouble(rowArray(idx))
        }
        newArray
    }

    /**
     * Factory method for turning tuples into 2D arrays
     */
    def apply(data: Product): Array[Array[Double]] = {
        def size = productSize(data)
        def array = toArray(data)
        rowArrayTo2DArray(size._1, size._2, array)
    }

} 
```

现在要使用它，您可以执行以下操作：

```
val a  = Matrix((1, 2, 3))
// a: Array[Array[Double]] = Array(Array(1.0, 2.0, 3.0))

val b = Matrix(((1, 2, 3), (4, 5, 6), (7, 8, 9)))
// b: Array[Array[Double]] = Array(Array(1.0, 2.0, 3.0), 
//                                 Array(4.0, 5.0, 6.0), 
//                                 Array(7.0, 8.0, 9.0))

val c = Matrix((1L, 2F, "3"))    // Correctly handles mixed types
// c: Array[Array[Double]] = Array(Array(1.0, 2.0, 3.0))

val d = Matrix((1L, 2F, new java.util.Date())) // Non-numeric types convert to NaN
// d: Array[Array[Double]] = Array(Array(1.0, 2.0, NaN)) 
```

或者，如果您可以直接使用所需数组的大小和一维值数组调用 rowArrayTo2DArray：

```
val e = Matrix.rowArrayTo2DArray(1, 3, Array(1, 2, 3))
// e: Array[Array[Double]] = Array(Array(1.0, 2.0, 3.0))

val f = Matrix.rowArrayTo2DArray(3, 1, Array(1, 2, 3))
// f: Array[Array[Double]] = Array(Array(1.0), Array(2.0), Array(3.0))

val g = Matrix.rowArrayTo2DArray(3, 3, Array(1, 2, 3, 4, 5, 6, 7, 8, 9))
// g: Array[Array[Double]] = Array(Array(1.0, 2.0, 3.0), 
//                                 Array(4.0, 5.0, 6.0), 
//                                 Array(7.0, 8.0, 9.0)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-16T12:20:38.360

浏览答案，我没有找到对我来说似乎最明显和最简单的方法。而不是`Array`，您可以使用元组。
看起来像这样：

```
scala> val x = {(
     | (3,5,7),
     | (0,4,9),
     | (1,8,6)
     | )}

x: ((Int, Int, Int), (Int, Int, Int), (Int, Int, Int)) = ((3,5,7),(0,4,9),(1,8,6)) 
```

看起来干净优雅？
我认同 ：）

# .net - 有没有办法在配置中将我的自定义部分标记为“可能存在”

> ID：13862569
> 
> 赞同：0
> 
> 时间：2012-12-13T15:01:30.323
> 
> 标签：.net, configuration, web-config, app-config, configuration-files

> **可能重复：**
> [无法为 web.config 创建自定义部分](https://stackoverflow.com/questions/13862125/unable-to-create-a-custom-section-for-web-config)

我做了一个自定义配置部分，我希望它可以选择存在。这是默认设置还是如果您定义了自定义配置部分，它*是否*必须存在于配置文件中？

换句话说，我有`configsections`这样声明的部分：

```
<configSections>
<section
        name="MembershipProviders"
        type="MyApp.BusinessObjects.MembershipProviderFactory.MembershipProvidersSection"
        allowLocation="true"
        allowDefinition="Everywhere"
      />
</configSections> 
```

但是我的 web.config 中没有与该声明相对应的任何部分。

不过，我确实有声明这些部分的类。

# regex - 请 SAS PRX 提取子字符串

> ID：13862573
> 
> 赞同：3
> 
> 时间：2012-12-13T15:01:34.377
> 
> 标签：regex, sas

我正在尝试使用 SAS PRX 函数从我的数据集中提取子字符串。但它只返回完全匹配，而我需要它更灵活并提取匹配各种条件的那些。

我在下面复制了我的数据。如您所见，我的数据中的一个变量是“brandmodel”，其中包含特定相机的品牌名称和型号。我需要为模型#s 设置一个单独的列。所以我使用 PRX 函数来提取它们，因为它们通常遵循以下模式之一：

例如：JX100 或 JX10 或 JX1（即 1-2 个字母，后跟 1-3 位数字。我的程序（复制到数据下方）可以处理。但我遇到的问题是：如何提取这些模型#是字母与数字用空格或连字符隔开的地方，我如何将它们提取到与它们完全一样的“模型”列中？另外，一些观察没有模型#s，如何我可以将它们设置为丢失而不是完全丢弃吗？

```
Brandmodel|Price

iTwist F124 Digital Camera -red|49.00
Vivitar IF045 Digital Camera -Blue|72.83
Liquid Image Underwater Camera Mask|128.00
Impact Series Video Camera MX Gogglesâ„¢|188.00
Olympus VR 340  Silver|148.00
Olympus TG820 Digital Camera Black|278.00
Olympus VR 340 16MP 10x 3.0 LCD Red|148.00
Vivitar VX137-Pur Digital Camera|39.00

Olympus SZ-12 Digital Camera -Black|198.00
Olympus VG160 Digital Camera Red|98.00
Olympus VR340   Purple|148.00
Olympus TG820 Digital Camera Silver|298.00
Olympus TG820 Digital Camera Blue|278.00
Olympus VG160 Digital Camera    Orange|98.00
Olympus TG820 Digital Camera Red|298.00
Fujifilm FinePix AX500 Red|78.63
Canon A2300 Silver|98.63
Canon A810 Red|75.00
Nikon Coolpix S2600 Digital Camera - Red|88.00
Nikon Coolpix L25 Digital Camera - Silver|82.00
Casio Exilim ZS10BK|128.00

Olympus TG-310 14 MP blue Digital Camera|148.00
Hipstreet Kidz Digital Camera - Blue|14.93
Casio Exilim ZS10PK|128.00
Olympus TG-310 14 MP Digital Camera orange|148.00 
```

SAS 程序

```
data walnov21p2; 
 length brandmodel $ 80;
 infile "G:\File2\data\store_nov21\storenv21p2.csv" firstobs=2 dlm="|" dsd;
 input brandmodel price;
 re= prxparse('/[[:alpha:]]{1,3} \d{1,4}/');
 if prxmatch(re, brandmodel) then
 do;
   model=prxposn(re, 0, brandmodel);
   output;
 end;
run; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:25:33.640

对于您的最后一个问题（将变量设置为缺失而不是放弃观察，请`output`从最后的条件中删除该语句`do`。只需将其更改为：

```
if prxmatch(re, brandmodel) then model=prxposn(re, 0, brandmodel); 
```

这将导致输出所有观察值，无论是否定义了模型。

对于您的其余问题，它实际上是关于与 Perl 正则表达式的模式匹配，而不是特定于 SAS。这也很棘手，因为某些模型中有空格。尝试发布一个不同的问题，询问与您想要的匹配的 Perl 正则表达式（带有这些标签）。

另外，发布一些您希望输出的示例。例如，您对这样的输入有何期望：

```
Olympus VR 340 16MP 10x 3.0 LCD Red|148.00 
Vivitar VX137-Pur Digital Camera|39.00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:37:30.100

您可以使用的一种方法是构建一个 Makes（Nikon、Olympus 等）字典，并使用它从字符串中删除 make；然后你有 `Olympus VR 340 16MP 10x 3.0 LCD Red`->`VR 340 16MP...`更容易解析。

但最终，这可能不是用正则表达式轻松解决的问题，因为正则表达式无法轻松解析所有可能的情况（“Nikon Coolpix”是一个品牌，还是“Coolpix S2600”模型？）。此类事情的最佳解决方案是制作“大部分时间”正则表达式，例如

```
/[a-zA-Z]{1,3}[ -]?[\d]{1,4}/ 
```

然后对不匹配的内容进行编码以转到单独的数据集，您可以在其中手动查看它们并对其进行编码（或添加到您的正则表达式中，如果有相当常见的内容）。

为此，您可以执行以下操作：

```
data walnov21p2 nomatch;
length brandmodel $ 80;
infile "G:\File2\data\store_nov21\storenv21p2.csv" firstobs=2 dlm="|" dsd;
input brandmodel price;
re= prxparse('/[[:alpha:]]{1,3} \d{1,4}/');
if prxmatch(re, brandmodel) then
do;
        model=prxposn(re, 0, brandmodel);
        output walnov21p2 ;
end;
else output nomatch;
run; 
```

然后您可以单独处理 nomatch 并在以后重新组合它们。

# java - Oracle Solaris Studio 性能分析器 12.3 用法

> ID：13862576
> 
> 赞同：2
> 
> 时间：2012-12-13T15:01:36.783
> 
> 标签：java, performance, oracle, profiling, profiler

我有一个在 linux 上运行的 java 程序，有一些锁定条件。我想使用 Oracle Solaris Studio Performance Analyzer 12.3 来诊断它。

用于`collect -j on $JAVA $JAVA_OPTS $@`收集目标机器上的配置文件数据。和 Analyzer(GUI) 来查看收集的数据，但`User Lock`在 Metrics 选项卡中找不到像这样的选项：

糟糕，无法上传图片

预计是这样的：

糟糕，无法上传图片

用`er_print`看数据

> (er_print) 指标 e%lock
> 错误：没有记录支持指标规范的数据：e%lock
> 
> 当前指标：e.user:i.user:name
> 当前排序指标：独占用户 CPU 时间 (e.user)
> 可用指标：
> 独占用户CPU 时间：e.%user
> 包含用户 CPU 时间：i.%user
> 大小：大小
> PC 地址：地址名称：名称

在非 gui 方式的可用指标中也没有锁定指标。
收集个人资料数据有什么问题吗？我怎样才能看到`User Lock`选项。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T04:27:57.207

要在性能分析器中启用**锁定配置**文件，您需要使用开关运行`collect`配置文件。`-s on`这将打开锁分析。

# python - 自动解码以 base64 格式编码的反向多行字符串

> ID：13862580
> 
> 赞同：-4
> 
> 时间：2012-12-13T15:01:44.790
> 
> 标签：python, base64, decoding

我正在对以下给定的以 base64 格式编码的反向多行字符串进行解码。

LnNlbHBtYXhlIGVzdSBvdCBlZXJmIGxlZUYgLnNldGlzYmV3IGNpZmZhcnQgaGdpaCBubyBub2l0YXNpbGFtcm9uZWQgZm8gdHBlY25vYyBlaHQgZWJpcmNzZUQgLjQ= ZWxpZiBlbm8gbmkgZWIgXYdH

```
s = 'ZWxpZiBlbm8gbmkgZWIgdHN1TSApaXYgICAg'
s = s.decode('base64', 'strict')

print s[::-1] 
```

通过上述方法，我得到了正确的字符串，但我必须手动更改字符串。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:33:23.000

从OP的评论：

```
list = ['LnNlbHBtYXhlIGVzdSBvdCBlZXJmIGxlZUYgLnNldGlzYmV3IGNpZmZhcnQgaGdpaCBubyBub2l0YXNpbGFtcm9uZWQgZm8gdHBlY25vYyBlaHQgZWJpcmNzZUQgLjQ=', 'ZWxpZiBlbm8gbmkgZWIgdHN1TSApaXYgICAg', 'c25vaXRhY2lmaWNlcHMgOC1QRVAgdGVlbSB0c3VNICl2ICAgIA==', 'Ni4yIG5vaHR5UCBodGl3IGtyb3cgdHN1TSApdmkgICAg', 'c2VsdWRvbSByZWh0byB5YiBlbGJhdHJvcG1pIGViIGRsdW9ocyBzc2FsQyApaWlpICAgIA==']
s = ''.join(list)
s = s.decode('base64', 'strict')
print (s[::-1]) 
```

该`join`操作将所有字符串连接在一起，但只翻译第一个字符串。这是因为，在解码 base 64 字符串时，字符串中前一个或两个`=`字符之后的所有内容都将被忽略。不是加入，而是迭代：

```
list = ['LnNlbHBtYXhlIGVzdSBvdCBlZXJmIGxlZUYgLnNldGlzYmV3IGNpZmZhcnQgaGdpaCBubyBub2l0YXNpbGFtcm9uZWQgZm8gdHBlY25vYyBlaHQgZWJpcmNzZUQgLjQ=', 'ZWxpZiBlbm8gbmkgZWIgdHN1TSApaXYgICAg', 'c25vaXRhY2lmaWNlcHMgOC1QRVAgdGVlbSB0c3VNICl2ICAgIA==', 'Ni4yIG5vaHR5UCBodGl3IGtyb3cgdHN1TSApdmkgICAg', 'c2VsdWRvbSByZWh0byB5YiBlbGJhdHJvcG1pIGViIGRsdW9ocyBzc2FsQyApaWlpICAgIA==']
for s in list:
    s = s.decode('base64', 'strict')
    print (s[::-1]) 
```

或者使用列表理解。

```
list = ['LnNlbHBtYXhlIGVzdSBvdCBlZXJmIGxlZUYgLnNldGlzYmV3IGNpZmZhcnQgaGdpaCBubyBub2l0YXNpbGFtcm9uZWQgZm8gdHBlY25vYyBlaHQgZWJpcmNzZUQgLjQ=', 'ZWxpZiBlbm8gbmkgZWIgdHN1TSApaXYgICAg', 'c25vaXRhY2lmaWNlcHMgOC1QRVAgdGVlbSB0c3VNICl2ICAgIA==', 'Ni4yIG5vaHR5UCBodGl3IGtyb3cgdHN1TSApdmkgICAg', 'c2VsdWRvbSByZWh0byB5YiBlbGJhdHJvcG1pIGViIGRsdW9ocyBzc2FsQyApaWlpICAgIA==']
print "\n".join(s.decode('base64')[::-1] for s in list) 
```

输出：

```
4\. Describe the concept of denormalisation on high traffic websites. Feel free to use examples.
    vi) Must be in one file
    v) Must meet PEP-8 specifications
    iv) Must work with Python 2.6
    iii) Class should be importable by other modules 
```

# mysql - MySQL - 如何改进具有 5000 万行的表？

> ID：13862586
> 
> 赞同：-1
> 
> 时间：2012-12-13T15:02:02.870
> 
> 标签：mysql

全部-

所以我有一个有 5600 万行的表，插入数据和查询它需要很长时间。我很好奇人们可能提出的任何建议。

我的服务器有 32GB 的 RAM（大部分未使用）、2X RAID SSD 和 E3-1270，所以它应该很快。

然而，一些选择查询需要超过 40 秒。我基本上在游戏世界中存储对象的位置。这是结构：

```
CREATE TABLE IF NOT EXISTS `object_positions2` (
  `entry` mediumint(9) NOT NULL,
  `type` tinyint(4) NOT NULL,
  `x_int` int(11) NOT NULL,
  `y_int` int(11) NOT NULL,
  `z_int` int(11) NOT NULL,
  `x` float NOT NULL,
  `y` float NOT NULL,
  `z` float NOT NULL,
  `continent` smallint(6) NOT NULL,
  `zone` smallint(6) NOT NULL,
  `build` float NOT NULL,
  PRIMARY KEY (`entry`,`type`,`x_int`,`y_int`,`z_int`),
  KEY `entry` (`entry`,`type`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我根据条目和类型进行查询（这就是为什么那里有一个索引），并且我在插入时将浮点 x,y,z 舍入为一个 int（如果它已经存在，作为一种更有效的不插入方法，因为浮点比较是昂贵的）。

有没有人知道为什么插入甚至查询需要这么长时间？MySQL 不支持这么多行吗？

这是示例插入语句：

```
REPLACE INTO `object_positions2` (`entry` ,`type` , `x_int` , `y_int` , `z_int`, `x` ,`y` ,`z` ,`continent` ,`zone` ,`build`) VALUES ('$entry', '$type', '" . round($x) . "', '" . round($y) . "', '" . round($z) . "', '$x', '$y', '$z', '$continent', '$zone', '$ZeBuild'); 
```

提前致谢！〜乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:05:10.233

在您的某些列上添加索引（在您在连接和 where 条件下使用它们时）将帮助您进行查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:10:59.670

如果您要存储空间数据，您可以考虑使用空间数据库。根据维基百科页面（http://en.wikipedia.org/wiki/Spatial_database），有一个可用于 mysql 的空间包，尽管我自己只使用过 oracle 和 postgis。

至少，我建议不要将顶点存储为行，而是存储由其 MBR 索引的几何图形。

如果我不得不猜测，我怀疑 entry、type、x、y 和 z 上的复合主键会减慢您的查询和更新速度，尤其是对于 5600 万行，这些值可能有很多重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:21:19.487

键是无用的`entry`，因为数据已经在您的主键中。我会为主键添加一个 autoinrement id（将当前主键更改​​为唯一索引），将表转换为 InnoDB（它提供更好的并发性）并设置足够大的 innodb_buffer_pool_size。如果您必须使用 MyISAM，请检查`key_buffer_size`设置

# python - 检查是否在 dict 或 try/except 中哪个在 python 中具有更好的性能？

> ID：13862587
> 
> 赞同：7
> 
> 时间：2012-12-13T15:02:05.673
> 
> 标签：python, dictionary

我有一些包含类似数据的字典。

大多数查询将在一个字典的一次搜索中得到解决。

那么，省略对字典中是否存在键的初步检查并尝试在异常子句中捕获键错误的下一个字典是否更好？

或者也许像

```
# d1, d2, d3 = bunch of dictionaries

value = d1.get(key, d2.get(key, d3.get(key, 0))) 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:41:58.807

似乎在几乎所有情况下，使用`get`都会更快。`try..except`这是我使用并获取的测试运行

```
>>> def foo1(n):
    spam = dict(zip(range(-99,100,n),[1]*200))
    s = 0
    for e in range(1,100):
        try:
            s += spam[e]
        except KeyError:
            try:
                s += spam[-e]
            except KeyError:
                s += 0
    return s

>>> def foo2(n):
    spam = dict(zip(range(-99,100,n),[1]*200))
    s = 0
    for e in range(1,100):
        s += spam.get(e, spam.get(-e,0))
    return s

>>> for i in range(1,201,10):
    res1 =  timeit.timeit('foo1({})'.format(i), setup = "from __main__ import foo1", number=1000)
    res2 =  timeit.timeit('foo2({})'.format(i), setup = "from __main__ import foo2", number=1000)
    print "{:^5}{:10.5}{:10.5}{:^10}{:^10}".format(i,res1,res2,foo1(i),foo2(i))

  1    0.075102  0.082862    99        99    
 11     0.25096  0.054272    9         9     
 21      0.2885  0.051398    10        10    
 31     0.26211  0.060171    7         7     
 41     0.26653  0.053595    5         5     
 51      0.2609  0.052511    4         4     
 61      0.2686  0.052792    4         4     
 71     0.26645  0.049901    3         3     
 81     0.26351  0.051275    3         3     
 91     0.26939  0.051192    3         3     
 101      0.264  0.049924    2         2     
 111     0.2648  0.049875    2         2     
 121    0.26644  0.049151    2         2     
 131    0.26417  0.048806    2         2     
 141    0.26418  0.050543    2         2     
 151    0.26585  0.049787    2         2     
 161    0.26663  0.051136    2         2     
 171    0.26549  0.048601    2         2     
 181    0.26425  0.050964    2         2     
 191     0.2648  0.048734    2         2     
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T15:09:57.593

取决于字典中的键。

如果您有信心预测缺少使用键的情况更为常见，请使用 get。

如果您有信心预测键更常见，请使用 try except。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:25:03.410

`try...except`通常比使用需要更长的时间，`get`但这取决于一些事情......

尝试使用 timeit 模块在您的特定情况下测试性能，如下所示：

```
def do_stuff():
    blah

timeit.timeit('testfunc()', 'from __main__ import do_stuff as testfunc') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T15:19:37.503

由于您说大多数查询将通过查看第一个字典来解决，因此您*最快*的解决方案是执行以下操作：

```
try:
    item = d1[key]
except KeyError:
    try:
        item = d2[key]
    except KeyError:
        ... 
```

但是，这肯定不是最可维护的解决方案，我不建议使用它。您可以创建一个函数：

```
def get_from(item,dicts):
    for d in dicts:
        try:
           return d[item]
        except KeyError:
           pass
    else:
        raise KeyError("No item in dicts") 
```

你会这样称呼：

```
get_from(key,(d1,d2,d3)) 
```

（这是@MartijnPieters 在对原始问题的评论中建议的已经非常简单的链式地图配方的简化版本，稍微不那么干净——我建议在此处发布的代码中使用它。此代码仅用于演示更简化的*概念*。）

最后，也许混合解决方案在实践中效果最好。将第一个因素`try`排除在循环之外——这有点难看，但它避免了`loop` *大部分时间*的开销。只有当第一个`try`提出 a`KeyError`时，您才会输入我在上面建议的其余 dicts 的循环类型解决方案。例如：

```
try:
   item = d1[key]
except KeyError:
   item = get_from(key,(d2,d3)) 
```

*同样，只有在您能够可靠地证明（认为`timeit`）它产生可衡量的差异时才这样做*

* * *

要知道的重要一点是，在 python 中，`try`它很便宜，但要`except`花费相当多的时间。如果您的代码预计会成功，请使用`try`- `except`。如果预计不会成功，通常最好还是使用它`try-except`，但在这种情况下，您应该评估性能是否真的是一个问题，并且只有当您能够证明这是一个问题时，您才应该诉诸“先看再跳” ”。

最后一点，如果字典是相对静态的，可能值得将它们组合成 1 `dict`：

```
d1.update(d2)
d1.update(d3) 
```

现在您可以使用`d1`- 它包含来自`d2`和的所有信息`d3`。（当然，如果字典具有相同但具有不同值的键，则更新的顺序很重要）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T15:20:24.040

你也可以

```
sentinel = object()
values = (d.get(key, sentinel) for d in (d1, d2, d3))
value = next(v for v in values if v is not sentinel) 
```

如果没有任何字典包含密钥，则会引发 a`StopIteration`而不是 a `KeyError`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T15:20:50.367

检查条件的区别

`if 'key' in a_dict` 或类似地， `if a_dct.get('key') == None`

和处理`KeyError`抛出的时间`not 'key' in a_dict`通常被认为是微不足道的，并且可能取决于您正在使用的 python 的实现。

使用条件形式无疑更符合 Python 风格，通常被认为比捕获异常更具表现力，通常会导致代码更简洁。但是，如果您的字典可能包含任意数据，并且您不知道 的值`None`或其他一些神奇值表示您的键未找到，则使用条件形式将需要两次查找，因为您首先检查键是否在字典，然后检索值。IE：

```
if 'key': in a_dict:
   val = a_dcit['key'] 
```

鉴于您描述的情况，您提供的代码是最慢的选项，因为`key`将在每个字典中查找。更快的选择是猜测它所在的字典，然后依次搜索其他字典：

```
my_val = d1.get(key,None)

if my_val == None:
    my_val = d2.get(key,None)
    if my_val == None:
        my_val = d3.get(key,None)
        if my_val == None:
            return False #handle not found in any case 
```

但是，您的特定用例听起来既有趣又奇怪。为什么有多个具有相似数据的字典？这些字典是如何存储的？如果您已经有一个列表或其他一些数据结构来保存这些字典，那么循环遍历这些字典会更有表现力。

```
dict_list = [{},{},{}] #pretend you have three dicts in a list

for d in dict_list:
   val = d.get('key',None)
   if val == None:
      break
#val is now either None, or found. 
```

# google-analytics - 谷歌分析 API V3 / OAuth 2

> ID：13862589
> 
> 赞同：8
> 
> 时间：2012-12-13T15:02:10.310
> 
> 标签：google-analytics, google-analytics-api

我拼命地试图自己解决这个问题，并且不想带着这个问题来解决这个问题，但我束手无策（不感谢 api / oauth 文档）。

我在 PHP 中工作，我试图通过在方法上使用 REST来避免使用`Google_Client`和类。`AnalyticsService``analytics.data.ga.get`

`STEP #1: Create an API Project for a Web Application`

我转到[api 控制台](https://code.google.com/apis/console/)并使用分析服务创建一个项目并获取 OAuth 客户端 ID 和机密。

我的印象是我可以为已[安装的应用程序](https://developers.google.com/accounts/docs/OAuth2#installed)或[Web 应用](https://developers.google.com/accounts/docs/OAuth2#webserver)程序创建客户端 ID，因为我正在手动进行初始令牌握手。如果我错了，请纠正我。

我为 Web 应用程序创建了一个 Client ID 并获取了我的 Client ID `xxxxxxxxxxxxxx.apps.googleusercontent.com`、 Client secret `yyyyyyyyyyyyyyy`，我的重定向 URI 是`http://localhost:9002`

`STEP #2: Request initial API access`

我进入这个链接；`https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=xxxxxxxxxxxxxx.apps.googleusercontent.com&redirect_uri=http://localhost:9002&scope=https://www.googleapis.com/auth/analytics.readonly&access_type=offline`

这`access_type=offline`是因为我使用的是 REST，并且不要指望“用户”（我自己）在每次需要刷新令牌时手动处理重定向/弹出窗口。

上述请求返回`http://localhost:9002?code=4/KModH0K_xxxxxxxxxxxxxxxxxxx9Iw.gikOaYRDWywTshQV0ieZDArCOX8XdwI`

代码`4/KModH0K_xxxxxxxxxxxxxxxxxxx9Iw.gikOaYRDWywTshQV0ieZDArCOX8XdwI`是我请求 API 令牌的权限。

`STEP #3: Request First Token`

由于我公司的 IT 问题，我被迫使用 PHP 5.2.17 并且我无法访问 PHP cURL，所以我正在使用`file_get_contents`和`stream_context_create`.

第一个令牌是用 PHP 请求的`file_get_contents()`；

```
$opts = array(
    'http' => array(
        'method' => 'POST',
        'header' => 'Content-Type: application/x-www-form-urlencoded',
        'content' => 'code=4/KModH0K_xxxxxxxxxxxxxxxxxxx9Iw.gikOaYRDWywTshQV0ieZDArCOX8XdwI&client_id=xxxxxxxxxxxxxx.apps.googleusercontent.com&client_secret=yyyyyyyyyyyyyyy&redirect_uri=http://localhost:9002&grant_type=authorization_code'
    )
);

$context = stream_context_create($opts);

$result = file_get_contents('https://accounts.google.com/o/oauth2/token', false, $context);
var_dump($result); 
```

内容参数必须在一行中。

上面的代码以 json 格式返回我的`access_token`和`refresh_token`

`string(195) "{ "access_token" : "ya29.AHES6wwwwwwwwwwwwwwwVEBXE6XRbC-Q-pP0wZWdoIm9H804ro", "token_type" : "Bearer", "expires_in" : 3600, "refresh_token" : "1/8tXvdUKcSEcaaxVqqqqqqqqqqqqqoYpj2KSS9qwWI" }"`

我必须将刷新令牌存储在安全的地方，例如数据库或受保护的 txt 文件，当我的 access_token 超时时调用它。

`STEP #4: Request Analytics Data`

现在，据我了解，我已经准备好滚动并且应该能够使用 my`access_token`向`https://www.googleapis.com/analytics/v3/data/ga`.

我通过发送此请求来做到这一点；

```
$request = 'https://www.googleapis.com/analytics/v3/data/ga' .
    '?ids=ga%3Aaaaaaaaa' .
    '&start-date=2012-12-07' .
    '&end-date=2012-12-09' .
    '&metrics=ga%3Avisits';

$opts = array(
    'http' => array(
        'method' => 'GET',
        'header' => 'Content-Type: application/x-www-form-urlencoded\r\n' .
                    'Authorization: Bearer ya29.AHES6wwwwwwwwwwwwwwwVEBXE6XRbC-Q-pP0wZWdoIm9H804ro \r\n'
        )
);

$context = stream_context_create($opts);

$result = file_get_contents($request, FALSE, $context);
var_dump($result); 
```

此请求返回`401 Unauthorized`错误。我认为这意味着我的请求已正确形成并连接到`https://www.googleapis.com/analytics/v3/data/ga`.

另外，根据这个文档[Getting Full Quota](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#quota)，我可以`access_token`像这样在 URL 中发出请求；

```
$request = 'https://www.googleapis.com/analytics/v3/data/ga' .
    '?ids=ga%3A48564799' .
    '&access_token=ya29.AHES6wwwwwwwwwwwwwwwVEBXE6XRbC-Q-pP0wZWdoIm9H804ro' .
    '&start-date=2012-12-07' .
    '&end-date=2012-12-09' .
    '&metrics=ga%3Avisits';

$result = file_get_contents($request, FALSE);

$result = json_decode($result);

var_dump($result); 
```

这次我收到`403 error`了，其中 google 包含了响应`User does not have sufficient permissions for this profile`。

`QUESTION #1`

我是否在 API 控制台或令牌获取过程中遗漏了某些内容？我假设我不是，因为我最终获得了`access_token=ya29`和刷新令牌。

`QUESTION #2` 也许我完全没有假设我可以通过简单的 https 请求来做到这一点？我必须使用`Google_Client`和`AnalyticsService`类吗？我不认为是这种情况，但也许我错了。

`QUESTION #3` 我需要在请求中使用“密钥”吗？ `&key=bbbbbbbbbbbbbbbb`

`QUESTION #4`

通过使用 PHP 5.2.17，我错过了什么吗？（除了 5.3 或 5.4 本身）

例如，在某些 PHP 版本中，在 中`stream_context_create`，标头应该是数组而不是字符串，像这样；

```
$opts = array(
    'http' => array(
        'method' => 'GET',
        'header' => array(
            'Content-Type: application/x-www-form-urlencoded',
            'Authorization: Bearer ya29.AHES6wwwwwwwwwwwwwwwVEBXE6XRbC-Q-pP0wZWdoIm9H804ro '
        )
    )
); 
```

但我不认为这对我来说是个问题。我只是好奇这些 HTTP 请求是否需要以不同的方式形成（不使用 curl）。

任何见解和想法将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T22:03:00.857

这是我愚蠢的错误，差点让我心脏病发作。

我通常在 Chrome 中进行开发工作。我的 Chrome 浏览器已登录到我的 gmail 帐户`personal@gmail.com`。但是，我的分析帐户`work@gmail.com`在 FireFox 中打开（尽量不要笑得太厉害）。

我不是 100% 确定这是正确的，但我认为这是一般流程。当我这样做时`STEP #2: Request initial API access`，我是在我的 Chrome 浏览器中进行的。端点`https://accounts.google.com/o/oauth2/auth`正在授权我的个人@gmail.com 帐户。我的第 4 步 API 请求`https://www.googleapis.com/analytics/v3/data/ga`是在我的个人@gmail.com 帐户下寻找分析配置文件。这当然不存在。

我真的在这上面浪费了 15 个小时。这比尝试对更新进行故障排除......并且忘记刷新缓存更愚蠢。

很抱歉浪费您的时间。

**编辑**刷新令牌

我再次遇到了这个 API 的问题，并发现如果太多不同的客户端使用令牌，GA 将撤销刷新令牌的艰难方式，至少我认为这是问题所在。

进一步阅读可以在[这里找到](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-03T13:51:52.053

我今天收到了 403 并找到了原因：在`get`函数中我使用了帐户 ID 而不是配置文件 ID。切换到配置文件 ID 为我修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T06:25:50.180

这可能是 CURL 请求的问题。在`GoogleAnalyticsAPI.class.php > class Http > function curl (around line 720)`添加一个选项以阻止 CURL 验证对等方的证书：

**`curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);`**

# java - JavaFX 2.2：如何将鼠标事件转发到 JLayeredPane 中 JFXPanel 下的 Swing 组件？

> ID：13862592
> 
> 赞同：5
> 
> 时间：2012-12-13T15:02:18.200
> 
> 标签：java, swing, javafx-2

在我的应用程序中，我想要一个带有 JavaFX 控制的 Swing 面板。为此，我使用了一个 JLayeredPane，我在其中插入了一个 JPanel 和一个 JFXPanel，其中的场景未填充（又名`setFill(null)`）。但是没有事件通过 JFXPanel 的透明区域传递到 Swing 面板。

这个问题有什么解决办法吗？

谢谢

这里有一个例子：

```
 public class TestJavaFX
    {
        private static JButton button;
        private static JFXPanel javafxPanel;

        public static void main(String[] args)
        {
            SwingUtilities.invokeLater(new Runnable()
            {
                @Override
                public void run()
                {
                    initAndShowGUI();
                }
            });
        }

        public static void initAndShowGUI()
        {
            JFrame frame = new JFrame("Swing application");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            javafxPanel = new JFXPanel();
            button = new JButton("Swing - Push me");

            JLayeredPane pane = new JLayeredPane();
            pane.add(button, JLayeredPane.DEFAULT_LAYER);
            pane.add(javafxPanel, JLayeredPane.PALETTE_LAYER);
            pane.addComponentListener(new ComponentListener()
            {
                @Override
                public void componentShown(ComponentEvent e)
                {
                }

                @Override
                public void componentResized(ComponentEvent e)
                {
                    button.setBounds(20, 50, 150, 30);
                    javafxPanel.setBounds(0, 0, e.getComponent().getWidth(), e.getComponent().getHeight());
                }

                @Override
                public void componentMoved(ComponentEvent e)
                {
                }

                @Override
                public void componentHidden(ComponentEvent e)
                {
                }
            });

            frame.getContentPane().add(pane, BorderLayout.CENTER);

            Platform.runLater(new Runnable()
            {
                public void run()
                {
                    createScene();
                }
            });

            // Show frame.
            frame.setSize(600, 400);
            frame.setVisible(true);
        }

        private static void createScene()
        {
             Button btn = new Button();
             btn.setText("JavaFX - Push me");

             VBox pane = new VBox();
             pane.getChildren().add(btn);
             Scene scene = new Scene(pane);
             scene.setFill(null);
             javafxPanel.setScene(scene);
        }
   } 
```

# c# - 正则表达式匹配问题

> ID：13862594
> 
> 赞同：4
> 
> 时间：2012-12-13T15:02:21.527
> 
> 标签：c#, regex

我有一个字符串

> `<a href="/makeuppro/video?st.cmd=altGroupVideoAll&amp;st.groupId=oqxdtikenuenvnwuj0rxiwhgvyuvhjhzjrd&amp;st.directLink=on&amp;st.referenceName=makeuppro&amp;st._aid=NavMenu_AltGroup_Video"`

我需要获取 groupID `oqxdtikenuenvnwuj0rxiwhgvyuvhjhzjrd`。

我试过

```
string groupId = Regex.Match(content, @"altGroupVideoAll&amp;st.groupId=(?<id>[^""]+)&amp").Groups["id"].Value; 
```

但结果是：

```
oizrximcmbsyyvjxacd0rpkkmgxwuvhinnuvczz&amp;st.directLink=on&amp;st.referenceName=makeuppro 
```

为什么，什么是正确的正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:04:45.570

您需要使用不情愿的量词在第一个停止`&amp`：-

```
@"altGroupVideoAll&amp;st.groupId=(?<id>[^""]+?)&amp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:07:18.780

试试这个：

```
groupId=(?<id>[^&]+) 
```

我怀疑 id 不会包含 & 字符。您的原始正则表达式是贪婪的，并试图匹配可能的最长字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:05:08.027

嗨@user1895750 和@Jared Harley，

您混淆了惰性和贪婪表达式，请参见下面的代码。

```
 /// <summary>
    /// Example for how to extract the group Id.
    /// </summary>
    /// <param name="xml"></param>
    /// <returns></returns>
    private static string ExtractNumber(string xml)
    {
        // Extracted number.
        string groupId = string.Empty;

        // Input text
        xml = @"<a href=""/makeuppro/video?st.cmd=altGroupVideoAll&amp;st.groupId=oqxdtikenuenvnwuj0rxiwhgvyuvhjhzjrd&amp;st.directLink=on&amp;st.referenceName=makeuppro&amp;st._aid=NavMenu_AltGroup_Video""";

        // Here is the key, you have to use "?" after "(?<id>[^\"\"]+"
        // This is called "Lazy expression", and it is different from the "Greedy expression".
        // Lazy expression uses the "?", like ".*?\r". So it will match the expression until they find the first carriage return (\r).
        // If you use ".*\r" (Greedy Expression), it will match until they find the last carriage return of the input. Thats why you matched ("&amp;st.directLink=on&amp;st.referenceName=makeuppro"), because the last "&amp" is after "makeuppro" .
        // Here the correct pattern.
        var pattern = "groupId=(?<id>[^\"\"]+?)&amp";

        // Match the desired part of the input.
        var match = Regex.Match(xml, pattern);

        // Verify the match sucess.
        if (match.Success)
        {
            // Finally, use the group value to isolate desired value.
            groupId = match.Groups["id"].Value;
        }

        return groupId;
    } 
```

我希望它对你有帮助！

真挚地，

# actionscript-3 - AS3 - 如何让鼠标光标点击按钮？

> ID：13862596
> 
> 赞同：1
> 
> 时间：2012-12-13T15:02:28.373
> 
> 标签：actionscript-3, flash

在我的应用程序中，我有一个连接到鼠标的鼠标光标。但是它不会让我点击我的应用程序中的按钮，这对我来说是一个大问题，因为按钮对于我需要做的事情是必不可少的。

我是 AS 的新手，所以任何帮助都将不胜感激！

```
stage.addEventListener(MouseEvent.MOUSE_MOVE, draw_cursor);
stage.addEventListener(Event.MOUSE_LEAVE, hide_cursor);

Mouse.hide();

function draw_cursor(event:MouseEvent):void
{
    my_cursor_mc.visible = true;
    my_cursor_mc.x = event.stageX;
    my_cursor_mc.y = event.stageY;
}

function hide_cursor(event:Event):void
{
    my_cursor_mc.visible=false;
} 
```

我尝试使用这个（下图），但非常麻烦，不得不按下按钮让光标消失然后我能够点击按钮（不是很理想）：

```
stage.addEventListener(MouseEvent.CLICK, hide_cursor); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:16:57.280

听起来您的光标可能正在窃取您的按钮的鼠标事件。在您的顶级代码（或构造函数）中尝试添加：

```
// Disable mouse events for cursor    
my_cursor_mc.mouseEnabled = false; 
```

如果您的鼠标事件有任何子对象还添加：

```
// Disable mouse events for any children of the cursor
my_cursor_mc.mouseChildren = false; 
```

# iphone - 如何将 UIlabel 中的字体大小转换为 UIwebView 中的字体大小

> ID：13862606
> 
> 赞同：1
> 
> 时间：2012-12-13T15:03:03.510
> 
> 标签：iphone, ios

我有一个`NSString`字体大小为 16 的`UIlabel`. 我想 用像 font-size = '?'这样`NSString`的语法来展示这一点 `UIWebView`在 html 中。而我想把里面的字体大小`UIWebView`对应到里面的字体大小`UIlabel`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:12:03.657

您可以创建一个包含 html 代码的 NSString，然后使用该方法从 NSString 加载 UIWebview

```
- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL 
```

在 html 中，您可以设置您想要的文本字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:13:06.970

您必须将您的字符串与设置字体大小的 html 连接起来，如下所示

```
`[yourWebView loadHTMLString:@"`<p><font size="5">put your text here</font></p>`" baseURL:nil];`
```

# objective-c - NSControl 和 NSCell：以正确的方式管理单元状态

> ID：13862610
> 
> 赞同：1
> 
> 时间：2012-12-13T15:03:10.387
> 
> 标签：objective-c, cocoa, nscell, nscontrol

我有一个完全定制`NSControl`的完全定制`NSCell`。现在我想实现一些鼠标交互。例如，当用户单击控件时，我想将控件状态更改为，`highlight`所以问题是：

1）我必须在哪里处理鼠标事件？在中`NSControl`还是直接在中`NSCell`？

目前我正在使用 NSCell 子类中的代码：

```
-(BOOL)startTrackingAt:(NSPoint)startPoint inView:(NSView *)controlView{
    [self setHighlighted:YES];

    return YES;
}

-(void)stopTracking:(NSPoint)lastPoint at:(NSPoint)stopPoint inView:(NSView *)controlView mouseIsUp:(BOOL)flag{
    [self setHighlighted:NO];
} 
```

2)`NSCell`状态是否由 ? 自动管理`NSControl`？如果我将`NSControl`stete 设置为`highlight`它将被镜像到`NSCell`?

3）那启用的属性呢？目前我在 NSControl 中写了这段代码： 而在 NSControl 中的这段代码

```
-(void)setEnabled:(BOOL)flag{
    [super setEnabled:flag];
    [[self cell]setEnabled:flag];
    [self updateCell:[self cell]];
} 
```

您是否特别建议使用自定义 NSControl+NSCell 处理鼠标事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:58:55.977

您可以执行以下操作：

创建一个 NSTrackingArea，它将检测鼠标是否进入您的 NSControl：

```
NSTrackingArea* trackingArea = [[[NSTrackingArea alloc] initWithRect:yourNSControlBoundsRect options:NSTrackingMouseEnteredAndExited | NSTrackingActiveAlways owner:yourNSControl userInfo:nil]; 
```

然后将 trackingArea 添加到 NSControl：

```
[yourNSControl addTrackingArea:trackingArea]; 
```

在您的 NSControl 子类中同时实现

```
 - (void)mouseEntered:(NSEvent *)theEvent
 - (void)mouseExited:(NSEvent *)theEvent 
```

在那里，您可以对控件中的单元格或控件本身执行某些操作。

希望有帮助

# entity-framework - 在实体框架中插入具有多对多关系的新对象

> ID：13862612
> 
> 赞同：1
> 
> 时间：2012-12-13T15:03:33.627
> 
> 标签：entity-framework

我有一个`Movies`要传递给控制器​​的 json 对象。

```
{data : [{
    Id: 12345,
    Title: 'Movie1',
    Year: 2010,
    Character: [{
        Name: 'Character1',
        Person: { Id: 1, Name: 'Person1' }
    },{
        Name: 'Character2',
        Person: { Id: 2, Name: 'Person2' }
    }]
}]} 
```

模型绑定工作正常，但我在通过 Entity Framework 5 将每个都插入数据库时​​遇到问题。当插入电影的`Movie`每个时，我遇到主键违规。`Person`

我明白为什么会这样。添加新的时，有些人已经存在于数据库中，`Movie`因此发生了违规。每个人的 ID 不是自动生成的。我正在使用从获取信息的 api 收到的 ID。

A`Movie`与 具有多对多关系`Person`，`Character`是两者之间的桥梁。

```
public class Movie {
    public int Id { get; set; }
    public string Title { get; set; }
    public int? Year { get; set; }
    public virtual ICollection<Character> Characters { get; set; } 

    public Movie() {
        Characters = new HashSet<Character>();
    }
}

public class Character {
    public string Name { get; set; }    
    public virtual Movie Movie { get; set; }    
    public virtual Person Person { get; set; }
}

public class Person {
    public int Id { get;set; }
    public string Name { get; set; }
    public virtual ICollection<Character> Characters { get; set; }

    public Person() {
        Characters = new HashSet<Character>();
    }
} 
```

我的问题是......我知道我可以循环遍历每个`Person`对象以及`Attach()`它是否存在或`Add()`不存在。**实体框架可以自动处理插入一个新的`Person`并在它已经存在的情况下忽略它吗？如果不是，此类问题的最佳实践是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:26:31.347

如果 Person 对象已经存在，我认为没有必要附加它们。

我要做的是遍历 API Person 对象并与 EF DbContext 进行比较。

```
var dbPerson = MyMovieContext.Persons.Where(x => x.ID == myPersonID).SingleOrDefault(); 
```

如果找不到匹配项，请添加。如果确实找到匹配项，则将 Character 上的引用替换为 DbContext 中的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:39:29.520

如果您使用 DbContext API，则可以使用[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/hh846520%28v=vs.103%29.aspx)扩展方法。假设您有一个列表或人员，那么您可以执行以下操作：

```
context.Persons.AddOrUpdate(persons.ToArray()); 
```

您可能会为每个模型项目（`persons`是项目的人）执行此操作，然后创建`Character`带有`Person`和`Movie`附加对象的对象。

请注意，`AddOrUpdate`仅在上下文中添加或更新。只`SaveChanges`提交到数据库。

# r - 使用 plyr 时如何避免重复代码

> ID：13862616
> 
> 赞同：3
> 
> 时间：2012-12-13T15:03:50.920
> 
> 标签：r, plyr

我想为某些数据组合生成相同类型的图表。目前，我正在使用`plyr`拆分数据并为每个组合执行一些代码。

例如，假设`dataframe`有公司、部门、地区和收入。这是我的伪代码：

```
 d_ply(dataframe, .(company),  function(df) {
      d_ply(df, .(department),  function(df) {
        d_ply(df, .(region), function(df) {
           bar_chart(df$region, df$revenue)
        })
            bar_chart(df$department, df$revenue)
      })
            bar_chart(df$company, df$revenue)
    }) 
```

在我的真实示例中，我需要做很多事情，代码是 10 行左右。除了创建一个函数并传递正确的参数之外，有没有办法避免在每个组合中重复代码？我希望有一些魔术`plyr`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:26:36.810

虚拟数据：

```
d <- data.frame(company=letters[1:26],
                department=sample(letters[1:10],26,replace=TRUE),
                region=sample(letters[1:3],26,replace=TRUE),
                revenue=round(runif(26)*10000)) 
```

### 更新

我认为有必要对您的代码进行解释：

```
d_ply(dataframe, .(company),  function(df) { # by company
      d_ply(df, .(department),  function(df) { # by department
        d_ply(df, .(region), function(df) { # by region
           bar_chart(df$region, df$revenue)
           # this part is essentially equal to
           # d_ply(df, .(company,department,region), function(df), plot(df)) 
    })
  bar_chart(df$department, df$revenue)
  # this part is essentially equal 
  # d_ply(df,.(company,department), function(df), fun(df))
  })
 bar_chart(df$company, df$revenue)
 # this part is essentially equal to 
 # d_ply(df,.(company), function(df), fun(df))
}) 
```

我发现您的代码非常难以阅读。它可以替换为：

```
some.fun <- function(df, ...) {
# ...
}

d_ply(d, .(company), function(df) some.fun(df, ...))
d_ply(d, .(company,department), function(df) some.fun(df, ...)) 
d_ply(d, .(company,department,region), function(df) some.fun(df, ...)) 
```

# neo4j - 优化密码查询

> ID：13862620
> 
> 赞同：0
> 
> 时间：2012-12-13T15:04:03.620
> 
> 标签：neo4j, cypher

如何优化此密码查询？它比使用 Gremlin 的类似查询慢 3-4 倍。

```
START movie=node:vertices(movieId="100") 
MATCH genera1<--movie<--()-[ratedRel:rated]->anotherMovie-->genera1 
WHERE ratedRel.stars > 3 
RETURN anotherMovie.title as title, anotherMovie.movieId as id, 
genera1.genera as genera, 
COUNT(anotherMovie) as count ORDER BY count(anotherMovie) DESC LIMIT 20; 
```

我只是想检索评分超过 3 星且与 START 节点具有相同属的电影：http: [//markorodriguez.files.wordpress.com/2011/09/movielens-schema.png？ w=350](http://markorodriguez.files.wordpress.com/2011/09/movielens-schema.png?w=350)

我在控制台中运行查询，我使用的是 Neo4j 1.9

Gremlin 查询：

```
m = [:];
x = [] as Set;
v = g.v(node_id);

v.out('hasGenera').aggregate(x).back(2).inE('rated').
filter{it.getProperty('stars') > 3}.outV.outE('rated').
filter{it.getProperty('stars') > 3}.
inV.filter{it != v}.
filter{it.out('hasGenera').toSet().equals(x)}.
groupCount(m){\"${it.id}:${it.title.replaceAll(',',' ')}\"}.iterate();

m.sort{a,b -> b.value <=> a.value}[0..24]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:45:37.223

```
START movie=node:vertices(movieId="100") 
MATCH movie-->genera1<-anotherMovie<-[ratedRel:rated]-user
WHERE ratedRel.stars > 3 
RETURN anotherMovie.title as title, anotherMovie.movieId as id, genera1.genera as genera, 
COUNT(ratedRel) as cnt ORDER BY cnt DESC LIMIT 20; 
```

**更新：** 根据您的 gremlin 查询，您可以试试这个吗？

```
START movie=node:vertices(movieId="100") 
MATCH movie-[:hasGenera]->genera1<-[:hasGenera]-anotherMovie<-[ratedRel:rated]-user
WITH anotherMovie,count(ratedRel) as allVotes, sum(ratedRel) as allStars,genera1
WHERE allStars/allVotes>3 
RETURN anotherMovie.title as title, anotherMovie.movieId as id, genera1.genera as genera, 
allStars ORDER BY allStars DESC LIMIT 20; 
```

关键是在路径中尽可能多地定义元素（在这种情况下，我们错过了 rels 名称）并省略了`user`我不知道如何在密码中执行此操作的节点，但它显然没有在 gremlin 中列出代码。

# mysql - 创建表时 UNIQUE KEY 的语法错误

> ID：13862622
> 
> 赞同：1
> 
> 时间：2012-12-13T15:04:11.683
> 
> 标签：mysql, create-table, unique-key

我正在尝试使用下面的代码在数据库中创建一个表。但是，它不起作用，我不知道为什么。

生成的错误是语法错误`'UNIQUE KEY ID (ID)'`，但根据我正在使用的教程（以及我可以找到的文档），这看起来不错。

我也试过`'UNIQUE ID (ID)'`and `'UNIQUE ID'`，但我仍然得到语法错误。

```
CREATE TABLE wp_offices (
    ID smallint(3) NOT NULL AUTO_INCREMENT,
    office_created_by smallint(3) DEFAULT "0",
    office_created_date datetime DEFAULT "0000-00-00 00:00:00" NOT NULL,
    office_last_edited_by smallint(3) DEFAULT "0",
    office_last_edited_date datetime DEFAULT "0000-00-00 00:00:00" NOT NULL,
    office_name tinytext COLLATE latin1_general_ci,
    address_1 tinytext COLLATE latin1_general_ci,
    address_2 tinytext COLLATE latin1_general_ci,
    town tinytext COLLATE latin1_general_ci,
    county tinytext COLLATE latin1_general_ci,
    postcode tinytext COLLATE latin1_general_ci,
    telephone tinytext COLLATE latin1_general_ci,
    fax tinytext COLLATE latin1_general_ci,
    dx tinytext COLLATE latin1_general_ci,
    email tinytext COLLATE latin1_general_ci,
    google_maps text(256) COLLATE latin1_general_ci
)
UNIQUE KEY ID (ID); 
```

谁能告诉我我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:06:57.363

它应该在大括号内

```
google_maps text(256) COLLATE latin1_general_ci,
UNIQUE KEY ID (ID)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:13:41.800

创建表的代码将是

```
 CREATE TABLE wp_offices(
    ID SMALLINT( 3 ) NOT NULL AUTO_INCREMENT ,
    office_created_by SMALLINT( 3 ) DEFAULT "0",
    office_created_date DATETIME DEFAULT "0000-00-00 00:00:00" NOT NULL ,
    office_last_edited_by SMALLINT( 3 ) DEFAULT "0",
    office_last_edited_date DATETIME DEFAULT "0000-00-00 00:00:00" NOT NULL ,
    office_name TINYTEXT COLLATE latin1_general_ci,
    address_1 TINYTEXT COLLATE latin1_general_ci,
    address_2 TINYTEXT COLLATE latin1_general_ci,
    town TINYTEXT COLLATE latin1_general_ci,
    county TINYTEXT COLLATE latin1_general_ci,
    postcode TINYTEXT COLLATE latin1_general_ci,
    telephone TINYTEXT COLLATE latin1_general_ci,
    fax TINYTEXT COLLATE latin1_general_ci,
    dx TINYTEXT COLLATE latin1_general_ci,
    email TINYTEXT COLLATE latin1_general_ci,
    google_maps TEXT( 256 ) COLLATE latin1_general_ci,
    UNIQUE KEY ID( ID )
    ); 
```

# mysql - 优化具有大文本列 (15k - 5000k) 的表的查询

> ID：13862624
> 
> 赞同：2
> 
> 时间：2012-12-13T15:04:21.910
> 
> 标签：mysql, web-crawler, large-data

我的桌子：

```
CREATE TABLE `html` (
  `html_id` int(10) unsigned NOT NULL,
  `links_id` int(10) unsigned NOT NULL,
  `url` varchar(2000) DEFAULT NULL,
  `tld` varchar(10) DEFAULT NULL,
  ....
  `html` mediumtext  
  PRIMARY KEY (`html_id`,`links_id`),
  UNIQUE KEY `links_id_url_index` (`links_id`,`url`(255))
) DEFAULT CHARSET=utf8; 
```

*   它的数据总量 > 20 GB（约 1 百万行）
*   查询主要用于统计，不需要`html`列
*   前任：`SELECT tld, MAX(URL), count(*) FROM html GROUP BY tld`

该表还必须承受来自具有`(html_id,links_id)`&`(links_id,url(255))`键检查的多线程 c++ 网络爬虫的许多插入 (>500/s)，并且在此配置中它工作正常，但通过添加其他键，我担心它会减慢它的速度。

从我所有的测试来看，大`html`列是导致查询缓慢的原因，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:12:49.663

将 html 列移动到另一个表。另外，为什么要在 varchar 列上运行 MAX() ？

# php - 电子邮件客户端换行文本

> ID：13862629
> 
> 赞同：0
> 
> 时间：2012-12-13T15:04:37.690
> 
> 标签：php, email, formatting

我正在使用 zend 库获取电子邮件的正文，但文本已被包装。在邮件客户端中查看相同的消息时，文本的格式正确。

例如原始邮件-如何ru？我很好谢谢？你在哪里？

```
 test data. testing again. 
```

收到的邮件 - 怎么样？我很好谢谢？

```
 Where are you?
            test data. testing again. 
```

在收到的邮件中，文字“你在哪里？” 被包裹，因此出现在新行中。

我需要删除我假设由于包装而由邮件客户端引入的不需要的换行符。

邮件头的详细信息： Content-Type: text/plain；字符集=UTF-8；格式=流动内容传输编码：8bit

如何使用任何 php 方法获取文本的原始格式并删除额外的换行符？邮件客户端如何正确格式化文本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:58:53.640

你应该可以用 php 的 trym 做到这一点

```
$WithoutLineBreak = trim($originalstring); 
```

# css - CSS浮动。可以断流吗？

> ID：13862641
> 
> 赞同：0
> 
> 时间：2012-12-13T15:05:20.687
> 
> 标签：css, layout, html

在我的 html 页面上，我遇到了这种情况：

`<div1><div2><div3><div4><div5><div6><div7><div8><div9`>...

只是让浮动的 div 一个接一个地显示出来。它们都有 CSS 样式**float:left**

我想达到这个结果：

```
<div1><div2>
<div3><div4><div5><div6><div7>
<div8><div9>... 
```

基本上，我想通过告诉它从新行开始来打破 div3 和 div8（或我希望的任何 div）上的流程。所有其他元素都应该在进入新行的 div 之后。我尝试在 div3 或 div8 上使用**clear:left**或**clear:left**，但它没有用。Div 将转到新行，但所有其他人将留在原处，产生不希望的结果：

```
<div1><div2><div4><div5><div6><div7><div9>
<div3>
<div8>... 
```

这里有什么好的简单的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:26:08.043

看在上帝的份上……不要`divs`在你的标记中引入任何额外的东西。`clear:left`工作，如果你的设计是正确的。（您确实知道 HTML 有一系列可供选择的块级元素）使用它们可能会使您的定位更容易一些...

CSS

```
div {
    float:left;
    margin-right:2ex;
    width:3em;
}

#div3, #div8 {
    clear:left;
} 
```

HTML

```
<div>1</div><div>2</div>
<div id="div3">3</div><div>4</div><div>5</div><div>6</div><div>7</div>
<div id="div8">8</div><div>9</div> 
```

小提琴：http: [//jsfiddle.net/d68pr/](http://jsfiddle.net/d68pr/)

**编辑** 这是一个不需要任何 ID、类或额外的`div-itus`

```
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div>
<div>5</div>
<div>6</div>
<div>7</div>
<div>8</div>
<div>9</div>

div:nth-child(3), div:nth-child(8) {
    clear:left;
} 
```

[http://jsfiddle.net/TMxSE/](http://jsfiddle.net/TMxSE/)

** 警告 **`nth-child`在某些浏览器中可能不可用。检查您的流量统计以确保 IE8 和以下是您的用户群的一小部分。或者那些用户的体验是可以接受的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:07:44.133

我会试试这个：

```
<div1><div2>
<div style="clear:both"></div>
<div3><div4><div5><div6><div7>
<div style="clear:both"></div>
<div8><div9>... 
```

或者

```
<div><div1><div2></div>
<div><div3><div4><div5><div6><div7></div>
<div><div8><div9></div>... 
```

默认情况下，将每一行放在它自己的`<div>`上面和下面都会清除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:20:41.710

您不需要额外的 div 来清除，将 clear 都放在要开始下一行的 div 上。

```
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div class="clear"></div>
<div></div>
<div></div>

.clear{clear:both;} 
```

将 5 个 div 放在第一行，然后将其余部分放到第二行。演示：http: [//jsfiddle.net/calder12/jQGdv/1/](http://jsfiddle.net/calder12/jQGdv/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:07:46.850

我认为将每一行包装在自己的行中`div`会起作用：

```
<div><div1><div2></div>
<div><div3><div4><div5><div6><div7></div>
<div><div8><div9>...</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T15:10:09.660

试试这个。我认为这会奏效

```
<div style="clear:left">
  <div1><div2>
</div>
<div style="clear:left"> 
  <div3><div4><div5><div6><div7>
</div>
<div style="clear:left">
  <div8><div9>
</div> 
```

# google-maps-api-3 - 如何使用地理编码（）

> ID：13862645
> 
> 赞同：0
> 
> 时间：2012-12-13T15:05:25.367
> 
> 标签：google-maps-api-3, reverse-geocoding

> **可能重复：**
> [Google Maps api v3 上的反向地理编码](https://stackoverflow.com/questions/10883440/reverse-geocode-on-google-maps-api-v3)

我想通过使用 lat-lang 值来查找地址，因为我正在使用新的 google.maps.Geocoder().geocode() 以下是该方法的实现

```
function checkAddress(){
  var address="";
  var amstr = new google.maps.LatLng(37.556179,-122.288219);
  address = getAddress(amstr);
  alert(address);

}

function getAddress(latLng) {
    var geocoder = new google.maps.Geocoder();
        geocoder.geocode( {'latLng': latLng},
        function(results, status) {
         if(status == google.maps.GeocoderStatus.OK) {
          if(results[0]) {            
        return results[0].formatted_address;
          }
          else {
            return "No results";
          }
        }
        else {
          return "not working";
        }
      });
    } 
```

但是在运行上面的代码之后，我得到了“未定义”的结果。请告诉我我在哪里做错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:25:51.907

`geocoder.geocode()`是异步的。它只会在其余代码完成后的某个时间调用您的回调。

您需要在回调中返回值：

```
function getAddress(latLng, callback) {
    ...
    geocoder.geocode(..., function(...) {
        ...
        callback(someValue);
    });
} 
```

# sql-server - 如何在存储过程中引发自定义错误

> ID：13862648
> 
> 赞同：1
> 
> 时间：2012-12-13T15:05:30.670
> 
> 标签：sql-server, stored-procedures

我想在缺少引用键时抛出错误，但是我不想通过完整性检查失败，而是想列出丢失的键。我已经创建了下面的作品。但是我希望有一种方法可以优化它并减少代码行数。

```
DECLARE @NonRefKeys INT

SELECT @NonRefKeys = SUM(1)
FROM staging.Sale sa
WHERE NOT EXISTS (
    SELECT cu.Customer_Shipping_ID
    FROM staging.Customer cu
    WHERE LTRIM(RTRIM(sa.Customer_Shipping_ID)) = LTRIM(RTRIM(cu.Customer_Shipping_ID)))

IF @NonRefKeys IS NOT NULL
BEGIN

IF OBJECT_ID('tempdb..#Missing_Ref') IS NOT NULL
DROP TABLE #Missing_Ref;

SELECT sa.Customer_Shipping_ID AS ID
INTO #Missing_Ref
FROM staging.Sale sa
WHERE NOT EXISTS (
        SELECT cu.Customer_Shipping_ID
        FROM staging.Customer cu
        WHERE LTRIM(RTRIM(sa.Customer_Shipping_ID)) = LTRIM(RTRIM(cu.Customer_Shipping_ID)))

DECLARE @Current_ID VARCHAR(50);
DECLARE @Missing_ID VARCHAR(MAX) = '';
DECLARE @Output_Error VARCHAR(MAX);

DECLARE id_cursor CURSOR FOR
SELECT ID
FROM #Missing_Ref;

OPEN id_cursor
FETCH NEXT FROM id_cursor INTO @Current_ID

WHILE @@FETCH_STATUS = 0
BEGIN
    IF (@Missing_ID != '')
        SET @Missing_ID = @Missing_ID + ', ';

    SET @Missing_ID = @Missing_ID + @Current_ID;

    FETCH NEXT FROM id_cursor INTO @Current_ID
END
CLOSE id_cursor
DEALLOCATE id_cursor

SET @Output_Error = 'ERROR: Key/s ' + @Missing_ID + ' for Customer Shipping ID missing from Customer table';

RAISERROR (@Output_Error,16,1)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:12:19.297

检查一下...您可以更新变量而无需创建临时表

您必须删除尾随的“，”。

```
Declare @MissingIDList VarChar (Max) = ''

DROP Table #MyTableOfMissingIds

Select *
Into #MyTableOfMissingIds
From 
(   Select 1 MissingId
    Union Select 2
    Union Select 3
    Union Select 4
    Union Select 5
    Union Select 6
) xx

Update #MyTableOfMissingIds
Set @MissingIDList = @MissingIDList + Cast (MissingId as VarChar) + ','

Declare @Output_Error VarChar (Max)
SET @Output_Error = 'ERROR: Key/s ' + @MissingIDList + ' for Customer Shipping ID missing from Customer table';

RAISERROR (@Output_Error,16,1) 
```

我的示例中的`Update`语句可以替换为您的其中一个表（OTTOMH，因此可能需要验证语法）

```
Declare @MissingIDList VarChar (Max) = ''
Declare @Output_Error VarChar (Max)

UPDATE staging.Sale SET 
Set @MissingIDList = @MissingIDList + Cast (Customer_Shipping_ID as VarChar) + ','
WHERE NOT EXISTS (
        SELECT cu.Customer_Shipping_ID
        FROM staging.Customer cu
        WHERE LTRIM(RTRIM(sa.Customer_Shipping_ID)) = LTRIM(RTRIM(cu.Customer_Shipping_ID)))

SET @Output_Error = 'ERROR: Key/s ' + @MissingIDList + ' for Customer Shipping ID missing from Customer table';

RAISERROR (@Output_Error,16,1) 
```

现在，如果您擅长使用 XML，这里有另一个很酷的方法：

```
Declare @MissingIDList VarChar (Max) = ''
Declare @Output_Error VarChar (Max)

DROP Table #MyTableOfMissingIds

Select *
Into #MyTableOfMissingIds
From 
(   Select 1 MissingId
    Union Select 2
    Union Select 3
    Union Select 4
    Union Select 5
    Union Select 6
) xx

SELECT @MissingIDList = 
    SUBSTRING(
                (   SELECT ',' + Cast (MissingId as VarChar)
                    FROM #MyTableOfMissingIds s
                    ORDER BY 1
                    FOR XML PATH('')
                )
                ,2,200000
            )

SET @Output_Error = 'ERROR: Key/s ' + @MissingIDList + ' for Customer Shipping ID missing from Customer table';

RAISERROR (@Output_Error,16,1) 
```

# hive - Hive 查询语言作为分析器组件 - WSO2 BAM 2.0 ALPHA

> ID：13862656
> 
> 赞同：1
> 
> 时间：2012-12-13T15:05:52.453
> 
> 标签：hive, wso2, alpha, analyzer, wso2bam

使用`WSO2 BAM 2.0 ALPHA`，是否有任何开箱即用的分析器组件可以编写 Hive 查询，以便在从 Cassandra 数据存储中检索数据后聚合数据，然后将其包含在分析器框架序列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:34:03.543

**自BAM 2.0 ALPHA 版本 3**起，Hive 被引入 BAM 。现在我们有了 BAM 完整的发布版本，BAM 2.0.1。

# linq - NHibernate 即时 SQL 用于包集合上的 linq 标准

> ID：13862660
> 
> 赞同：0
> 
> 时间：2012-12-13T15:06:00.903
> 
> 标签：linq, nhibernate

在 NHibernate 中是否可以过滤映射为包关联的集合属性，以便在发生延迟加载时直接在 SQL 中应用过滤器，而不是加载整个包集合然后过滤它？

仅供参考 - 我正在使用 xml 映射文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:22:31.973

是的，如果您在映射中定义过滤器：http: [//nhibernate.info/doc/nh/en/index.html#filters](http://nhibernate.info/doc/nh/en/index.html#filters)

# java - 从通配符到正则表达式

> ID：13862667
> 
> 赞同：5
> 
> 时间：2012-12-13T15:06:33.343
> 
> 标签：java, regex, string, filter, wildcard

我想允许两个主要的通配符`?`并`*`过滤我的数据。

这是我现在的做法（正如我在许多网站上看到的那样）：

```
public boolean contains(String data, String filter) {
    if(data == null || data.isEmpty()) {
        return false;
    }
    String regex = filter.replace(".", "[.]")
                         .replace("?", ".")
                         .replace("*", ".*");
    return Pattern.matches(regex, data);
} 
```

但是我们不应该转义所有其他正则表达式特殊字符，比如`|`or`(`等​​吗？而且，也许我们可以保留`?`，`*`如果它们前面有一个`\`? 例如，类似：

```
filter.replaceAll("([$|\\[\\]{}(),.+^-])", "\\\\$1") // 1\. escape regex special chars, but ?, * and \
      .replaceAll("([^\\\\]|^)\\?", "$1.")           // 2\. replace any ? that isn't preceded by a \ by .
      .replaceAll("([^\\\\]|^)\\*", "$1.*")          // 3\. replace any * that isn't preceded by a \ by .*
      .replaceAll("\\\\([^?*]|$)", "\\\\\\\\$1");    // 4\. replace any \ that isn't followed by a ? or a * (possibly due to step 2 and 3) by \\ 
```

你怎么看待这件事？如果您同意，我是否缺少任何其他正则表达式特殊字符？

* * *

**编辑#1**（在考虑了 dan1111 和 m.buettner 的建议之后）：

```
// replace any even number of backslashes by a *
regex = regex.replaceAll("(?<!\\\\)(\\\\\\\\)+(?!\\\\)", "*");
// reduce redundant wildcards that aren't preceded by a \
regex = regex.replaceAll("(?<!\\\\)[?]*[*][*?]+", "*");
// escape regexps special chars, but \, ? and *
regex = regex.replaceAll("([|\\[\\]{}(),.^$+-])", "\\\\$1");
// replace ? that aren't preceded by a \ by .
regex = regex.replaceAll("(?<!\\\\)[?]", ".");
// replace * that aren't preceded by a \ by .*
regex = regex.replaceAll("(?<!\\\\)[*]", ".*"); 
```

这个如何？

* * *

**编辑#2**（在考虑了 dan1111 的建议之后）：

```
// replace any even number of backslashes by a *
regex = regex.replaceAll("(?<!\\\\)(\\\\\\\\)+(?!\\\\)", "*");
// reduce redundant wildcards that aren't preceded by a \
regex = regex.replaceAll("(?<!\\\\)[?]*[*][*?]+", "*");
// escape regexps special chars (if not already escaped by user), but \, ? and *
regex = regex.replaceAll("(?<!\\\\)([|\\[\\]{}(),.^$+-])", "\\\\$1");
// replace ? that aren't preceded by a \ by .
regex = regex.replaceAll("(?<!\\\\)[?]", ".");
// replace * that aren't preceded by a \ by .*
regex = regex.replaceAll("(?<!\\\\)[*]", ".*"); 
```

目标在望？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:25:00.433

您不需要在替换字符串中使用 4 个反斜杠来写出一个。两个反斜杠就足够了。

您可以通过使用否定的lookbehind来避免替换字符串中的`([^\\\\]|^)`和：`$1`

```
filter.replaceAll("([$|\\[\\]{}(),.+^-])", "\\$1") // 1\. escape regex special chars, but ?, * and \
      .replaceAll("(?<!\\\\)[?]", ".")           // 2\. replace any ? that isn't preceded by a \ by .
      .replaceAll("(?<!\\\\)[*]", ".*")          // 3\. replace any * that isn't preceded by a \ by .* 
```

我真的不明白你需要最后一步做什么。这不会逃避那些逃避你的元字符的反斜杠（反过来，实际上并没有逃避它们）。我忽略了这样一个事实，即您的替换调用会写出 4 个反斜杠而不是只有两个。但是说你原来的输入有`th|is`. 然后你的第一个替换会做到这一点`th\|is`。然后最后一个替换将`th\\|is`匹配`th`-backslash*或* `is`.

您需要区分您的字符串在代码中的外观（未编译，反斜杠的数量是两倍）和它在编译后的外观（仅包含一半的反斜杠）。

您可能还想考虑限制可能的`*`. 像`.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*!`（在`!`输入中找不到）这样的正则表达式可能需要很长时间才能运行。这个问题被称为[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:57:07.790

最后是我采用的解决方案（使用[Apache Commons Lang](http://commons.apache.org/lang/)库）：

```
public static boolean isFiltered(String data, String filter) {
    // no filter: return true
    if (StringUtils.isBlank(filter)) {
        return true;
    }
    // a filter but no data: return false
    else if (StringUtils.isBlank(data)) {
        return false;
    }
    // a filter and a data:
    else {
        // case insensitive
        data = data.toLowerCase();
        filter = filter.toLowerCase();
        // .matches() auto-anchors, so add [*] (i.e. "containing")
        String regex = "*" + filter + "*";
        // replace any pair of backslashes by [*]
        regex = regex.replaceAll("(?<!\\\\)(\\\\\\\\)+(?!\\\\)", "*");
        // minimize unescaped redundant wildcards
        regex = regex.replaceAll("(?<!\\\\)[?]*[*][*?]+", "*");
        // escape unescaped regexps special chars, but [\], [?] and [*]
        regex = regex.replaceAll("(?<!\\\\)([|\\[\\]{}(),.^$+-])", "\\\\$1");
        // replace unescaped [?] by [.]
        regex = regex.replaceAll("(?<!\\\\)[?]", ".");
        // replace unescaped [*] by [.*]
        regex = regex.replaceAll("(?<!\\\\)[*]", ".*");
        // return whether data matches regex or not
        return data.matches(regex);
    }
} 
```

非常感谢@dan1111 和@m.buettner 的宝贵帮助`;)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:02:33.863

试试这个更简单的版本：

```
String regex = Pattern.quote(filter).replace("*", "\\E.*\\Q").replace("?", "\\E.\\Q"); 
```

`\Q`这用and引用了整个过滤器`\E`，然后在 and 上停止引用`*`，用它们的等效模式 ( and )`?`替换它们`.*``.`

我用它测试过

```
String simplePattern = "ab*g\\Ei\\.lmn?p";
String data = "abcdefg\\Ei\\.lmnop";
String quotedPattern = Pattern.quote(simplePattern);
System.out.println(quotedPattern);
String regex = quotedPattern.replace("*", "\\E.*\\Q").replace("?", "\\E.\\Q");
System.out.println(regex);
System.out.println(data.matches(regex)); 
```

输出：

```
\Qab*g\E\\E\Qi\.lmn?p\E
\Qab\E.*\Qg\E\\E\Qi\.lmn\E.\Qp\E
true 
```

注意这是基于Oracle的实现`Pattern.quote`，我不知道是否还有其他有效的实现。

# zend-framework - Zend 带有图像的表单按钮

> ID：13862670
> 
> 赞同：0
> 
> 时间：2012-12-13T15:06:48.647
> 
> 标签：zend-framework, button, zend-form

我开始使用 Zend 表单，我怎么能有：

```
 <button id="show" type="button">
    <img width="18" height="18" alt="Calendar" src="assets/calbtn.gif">
 </button> 
```

使用 Zend_Form_Button。

我试过了，但没有用：

```
$btn = new Zend_Form_Element_Button('show');
$btn->removeDecorator('DtDdWrapper');
$btn->setLabel(' ');
$btn->addDecorator('Label', array('HtmlTag',array('tag'=>'img','placement'=>'append','src'=> 'assets/img.gif'))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:58:11.487

您总是可以使用 css 为按钮设置背景，然后使用

```
$btn->setAttr('class', 'btn_class'); 
```

在CSS中

```
.btn_class {
    background-image: url('assets/img.gif');
} 
```

我不确定如何在不创建新的自定义 Zend_Form_Element 的情况下做你想做的事。但是还有 Zend_Form_Element_Image 可能正是你想要的。

# java - java字符串索引越界

> ID：13862676
> 
> 赞同：0
> 
> 时间：2012-12-13T15:06:56.087
> 
> 标签：java, if-statement, java-me, char

我一遍又一遍地查看了这段代码，看不到这是在哪里发生的，并不是每次都发生这种情况，只有当我通过帖子两次时才会发生这种情况，但我尝试通过将它们注释掉来依次摆脱它们​​和这仍然会给出错误，但是如果我摆脱了我的两个代码都可以正常工作，但是它们是必要的，并且它们之前确实可以工作。任何帮助表示赞赏。

```
if(lines[i].length() > 10)
{
    if(lines[i].charAt(4) == '-' && lines[i+1].charAt(4) == '-')
    {
        lines[i] = "\nComment";
    }
}
if(lines[i].length() > 10)
{
    if(lines[i].charAt(4) == '-' && lines[i+1].charAt(4) != '-' && !lines[i-1].equals("\nComment"))
    {
        lines[i] = "\nPost";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:09:47.600

您的代码未检查

*   存在`lines[i+1]`的，
*   存在`lines[i-1]`的，并且
*   的长度`lines[i+1]`至少为五。

这将在`i`为零或`lines.length-1`时中断，或者当前/下一行之一少于五个字符时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:09:04.887

in `lines[i+1].charAt(4)`: 如果`lines[i+1]`少于 5 个字符怎么办？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:09:25.573

您只测试了 的长度`lines[i]`，而您正在访问`lines[i+1].charAt(4)`，如果它的长度小于 5，这可能会给您带来这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T15:10:10.037

在使用它们之前检查所有变量的长度。你改变了索引，但你不做必要的检查（空、长度和数组索引检查）。

特别是在访问时：

```
lines[i+1] 
```

和

```
lines[i-1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T15:09:55.117

我们确定 +1 和 -1 行在 10 个字符范围内吗？

# ruby-on-rails - Rails: find 和 find_by 返回奇怪 # 在模型中，但不在 Rails 控制台中

> ID：13862678
> 
> 赞同：1
> 
> 时间：2012-12-13T15:06:59.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, rails-console, dynamic-finders

我已经坚持了几个小时的奇怪问题：

我正在使用 Rails 3 编写一个简单的用户登录，其中用户使用他们的电子邮件和密码登录。在我的用户模型中，我试图通过他们的电子邮件找到正确的用户对象，然后继续查看他们是否输入了正确的密码。

当我尝试从 rails 控制台查找用户时

```
>> User.find_by_email("test@email.com") 
```

我得到了想要的结果——返回了正确的用户对象

```
 User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'test@email.com' LIMIT 1  
=> #<User id: 21, first_name: "Test", last_name: "Man", hashed_password: "ca630762c6dce11af5a9923c7955131f8d6f7a16", cell_phone_number: nil, email: "test@email.com", created_at: "2012-12-13 14:35:38", updated_at: "2012-12-13 14:35:38", salt: nil, is_admin: false> 
```

但是当我将以下代码放入 model/user.rb 文件时，我得到了一个奇怪的结果

```
user = User.find_by_email("test@email.com")
puts "******** user = #{user}" 
```

输出以下内容：

```
******** user = #<User:0x10b7b82c8> 
```

当我尝试使用这个用户变量时，它会出错并说变量或方法“用户”是未知的

这是日志文件的输出：

```
Started POST "/users/login_attempt" for 127.0.0.1 at Thu Dec 13 08:40:47 -0600 2012
                            Processing by UsersController#login_attempt as HTML
                              Parameters: {"password"=>"[FILTERED]", "utf8"=>"", "email"=>"asdf", "authenticity_token"=>"4xeLxpSb4GidsHUIe4b55LhOVJtDEiv5UaQYU9aBv5k=", "commit"=>"Log In"}
                              User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'test@email.com' LIMIT 1 
```

这是我尝试过的一些事情......

1.  上面的mysql查询肯定有效。我已经将它复制到 mysql 中，它得到了正确的用户。

2.  我试过 find(id) 也不起作用。返回类似的用户：0x10b7b82c8

总的来说，我不明白为什么控制台会给出与模型代码本身不同的结果。

有人知道为什么我会从 find_by 得到如此奇怪的结果吗？

非常感谢！

编辑：这是附加代码，因为 Frederick 提到不足以找到问题。

来自控制器/users_controller.rb

```
class UsersController < ApplicationController

  def login
  end

  def login_attempt

    authorized_user = User.authenticate(params[:email], params[:password])

      redirect_to({:controller => 'records', :action => 'list'} )

  end

  def new
@user = User.new
  end 

  def create
@user = User.new(params[:user])

    if @user.save
      redirect_to({:controller => 'records', :action => 'list'} )

    else
      render('new')
end

end

end 
```

来自模型/user.rb

```
require 'digest/sha1'

class User < ActiveRecord::Base

attr_accessible :password, :password_confirmation, :email, :email_confirmation, :first_name, :last_name

attr_accessor :password

before_save :create_hashed_password
after_save :clear_password

# only on create, so other attributes of this user can be changed

#create method to authenticate login credentials
def self.authenticate(email,password)

  user = User.find_by_email("test@email.com")

  puts "******** user = #{user}"

end

#method to check provided password against password stored in db

 def password_match?(password="")

     newuser.hashed_password == hash_password(password)

 end

#hash_password adds salt to password and encrypts it
def self.hash_password(password="")
    salted_pw = password + PW_SALT
    hashed_pw = Digest::SHA1.hexdigest(salted_pw)       
end

  private

  def create_hashed_password
    # Whenever :password has a value hashing is needed
    unless password.blank?
     # self.hashed_password = User.hash_password(password)
     self.hashed_password = User.hash_password(password)
    end
  end

  def clear_password
    # for security and b/c hashing is not needed
    self.password = nil
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:53:10.157

方法返回其中最后一个表达式的结果。对于您的`authenticate`方法，最后一个表达式是对 的调用`puts`，它总是返回`nil`，所以

```
authorized_user = User.authenticate(params[:email], params[:password]) 
```

设置`authorized_user`为 nil 而不是从数据库中检索的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:43:13.390

如果您确实获取了一个用户实例，`user = User.find_by_email('123@example.com')`那么您将获得一个用户实例。`puts "My user: #{ user }"`将为您提供与调用相同的输出`"My user: #{ user.inspect }"`。您正在调用`inspect`实例`user`，结果看起来像`#<User:0x10b7b82c8>`.

我假设您正在尝试显示来自用户的某种信息。

```
puts "My new user: #{user.first_name} #{user.last_name}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T16:04:40.803

```
User.find_by email: 'admin@admin.com' 
```

如果您使用 Pry gem，它会整齐地组织它。

# android - 如何解决动态壁纸的延迟问题？

> ID：13862682
> 
> 赞同：0
> 
> 时间：2012-12-13T15:07:03.337
> 
> 标签：android, performance, live-wallpaper, wallpaper, lag

我正在创建我的第一个动态壁纸，其中雪将在随机位置产生并开始动画。但它滞后。这是我的代码。

代码中没有错误，但它滞后。如果我增加雪的数量，它会滞后更多。如何解决滞后？

```
public class CybWallpaper extends WallpaperService {

    @Override
    public Engine onCreateEngine() {
        return new Mywall();
    }
    public class Mywall extends Engine
    {
        int x[]=new int[30],y[]=new int[30];
        int isr=0;
        int scw,sch;
        Canvas dra;
        int temps[]=new int[30];
        boolean isft=true;

        Handler hand=new Handler();
        boolean isrun;
        Random ran=new Random();
        Runnable iterate=new Runnable()
        {
            @Override
            public void run() {
                slower();
                drawframe();
            }

        };

        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            super.onSurfaceCreated(holder);

        }

        @Override
        public void onSurfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
            // TODO Auto-generated method stub
            super.onSurfaceChanged(holder, format, width, height);
            slower();
            drawframe();
        }

        protected void drawframe() {
            // TODO Auto-generated method stub
            SurfaceHolder sh=getSurfaceHolder();

               dra = null;
               try {
                  dra = sh.lockCanvas();
                  if (dra != null) {

                        for(int i=0;i<30&&isft;i++)
                        {
                            x[i]=ran.nextInt(dra.getWidth());
                            y[i]=ran.nextInt(dra.getHeight());
                            temps[i]=30+ran.nextInt(100);

                        }
                        isft=false;
                        dra.drawARGB(255, 0,0, 0);
                        drawsnow(dra,30);

                  }
               } finally {
                  if (dra != null)
                     sh.unlockCanvasAndPost(dra);
               }
        }

        private void drawsnow(Canvas dra,int n) {
            // TODO Auto-generated method stub
            Bitmap snow=BitmapFactory.decodeResource(getResources(), R.drawable.snow80);
            Bitmap te[]=new Bitmap[30];

            for(int i=0;i<n;i++)
            {
                te[i]=Bitmap.createScaledBitmap(snow, temps[i], temps[i], false);
                dra.drawBitmap(te[i], x[i]-(te[i].getWidth()/2), y[i]-(te[i].getHeight()/2), null);
                //Snow to and fro
                if(isr==0&&x[i]!=140)
                    x[i]+=1;
                else
                    isr=1;

                if(isr==1&&x[i]!=120)
                    x[i]-=1;
                else
                    isr=0;

                if(y[i]<dra.getHeight())
                    y[i]+=6;
                else
                {
                    y[i]=0;
                    x[i]=ran.nextInt(dra.getWidth());
                    temps[i]=30+ran.nextInt(100);
                }
            }

            //Toast.makeText(getApplicationContext(), Float.toString(cx), Toast.LENGTH_SHORT).show();               

        }

        protected void slower() {
            // TODO Auto-generated method stub
            hand.removeCallbacks(iterate);
             if (isrun) {
                hand.postDelayed(iterate, 1000/30);
             }

        }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            super.onSurfaceDestroyed(holder);
            isrun=false;
            hand.removeCallbacks(iterate);
            Toast.makeText(getApplicationContext(), "Destroyed", Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onTouchEvent(MotionEvent event) {
            // TODO Auto-generated method stub
            super.onTouchEvent(event);
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            // TODO Auto-generated method stub
            super.onVisibilityChanged(visible);
            isrun=visible;
            if(isrun)
            {
                slower();
                drawframe();
            }
            else
            {
                hand.removeCallbacks(iterate);
            }
            //Toast.makeText(getApplicationContext(), "Visi", Toast.LENGTH_SHORT).show();
        }

    }

} 
```

我编码正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:15:34.067

```
 Bitmap snow=BitmapFactory.decodeResource(getResources(), R.drawable.snow80);
            Bitmap te[]=new Bitmap[30]; 
```

我认为你在这里做错了什么。您的代码不断 decodeResource ==> 浪费大量内存和 CPU ==> 使您的程序变慢，而不是这样做，您应该声明一个全局“雪”变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:16:54.157

您的滞后在于解码资源。

```
Bitmap snow=BitmapFactory.decodeResource(getResources(), R.drawable.snow80);
Bitmap te[]=new Bitmap[30]; 
```

我会将其移至`onSurfaceCreated`函数并使用成员对象。

# php - PHP 和 Mysql：将 2 个字符串分解为表上的三个不同字段

> ID：13862683
> 
> 赞同：0
> 
> 时间：2012-12-13T15:07:08.223
> 
> 标签：php, mysql, nested

嗨，我在 mysql 数据库中有 2 个字段，内容相似：

**字段 1**：`a>b>c`
**字段 2**：`1>2>3`

我希望把它们放在不同的行中，爆炸。

例子：

```
-----------------
|Field 1|Field 2|      
|----------------
|a      |1      |
|b      |2      |
|c      |3      | 
```

这是应该使工作的代码片段：

```
$result = mysql_query($insert_cat);
while ($row = mysql_fetch_assoc($result))
{
    //assegno variabili per l'array associativo
    $idcat = $row["id_categorie"];
    $descat = $row["categoria"];

    //inizio a ciclare all'interno degli array per ricavare le categorie
    $ar_id=explode('>',$idcat);
    $ar_des=explode('>',$descat);

    foreach($ar_id as $value_id)
    {

        foreach($ar_des as $value_des)
        {

        }

        echo $value_id.'|'.$value_des."\n";
    }
} 
```

问题是：我如何（用于测试）回显应该在表中插入的内容？
我试过但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:24:26.963

您是否尝试过使用该`array_combine`功能 - 请参阅有关该主题的[php 文档](http://php.net/manual/en/function.array-combine.php)。

这将合并两个数组，第一个数组作为第二个数组的键。因此，您可以`foreach`用类似这样的东西替换您的循环

```
$fullArray = array_combine($ar_id, $ar_des);
foreach($fullArray as $key_id => $val_des)
{
    echo $key_id . " | " . $val_des;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:25:49.197

强烈不推荐使用 mysql_* 函数，并且长期不推荐使用，代码容易受到 sql 注入，我的建议是使用 PHP API for MySql：mysqli 或 PDO。

[有关更多信息，请参阅此链接中的红框](http://uk.php.net/manual/en/function.mysql-query.php)

[选择 API 的帮助](http://uk.php.net/manual/en/mysqlinfo.api.choosing.php)

# sql - Oracle 调度程序将物化视图调用更改为 CTAS

> ID：13862685
> 
> 赞同：0
> 
> 时间：2012-12-13T15:07:09.703
> 
> 标签：sql, performance, oracle, scheduler, job-scheduling

我有一个具有这种结构的存储过程：

```
CREATE OR REPLACE PROCEDURE refresh_mv(p_mv_name VARCHAR2) AS
BEGIN
   EXECUTE IMMEDIATE '
      CREATE MATERIALIZED VIEW ' || dbms_assert.simple_sql_name(p_mv_name) || '
      PARALLEL
      NOLOGGING
      NEVER REFRESH
      AS
      SELECT * FROM <biq_query>';
   EXECUTE IMMEDIATE 
      'CREATE OR REPLACE VIEW outside_view AS SELECT * FROM '||p_mv_name;
   -- DROP old mv?
END; 
```

从 SQL 开发人员内部执行此操作时，OEM 会在活动中正确显示实体化视图语句。但是，当从链内的 oracle 调度程序运行相同的过程时，会生成一个 create table as select 语句。因此，我是否会受到一些性能影响，以及为什么连锁店决定使用 CTAS 而不是 MV？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:01:24.923

我将在此答案中合并我的评论。CTAS 开火的原因可能是多种原因之一——

1.  在模式级别有一个 DDL 触发器，它执行 CTAS，尽管除非自定义 DDL 触发器到位，否则不太可能。
2.  还有另一种可能性可以触发 CTAS，这是`ON PREBUILT TABLE`创建 MV 时的子句，但我没有看到它被使用。
3.  Oracle MV[先决条件](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6002.htm#i2162987)说 -

> 创建物化视图时，Oracle 数据库**会创建一个** *内部表*和至少一个索引，并且可能会创建一个视图，所有这些都在物化视图的模式中。Oracle 数据库使用这些对象来维护物化视图数据。您必须拥有创建这些对象所需的权限。

这可能可以解释 CTAS。

到目前为止，第 3 点似乎是您所看到的 CTAS 的最佳解释。

# asp.net - Request.InputStream 始终为空

> ID：13862697
> 
> 赞同：4
> 
> 时间：2012-12-13T15:07:49.293
> 
> 标签：asp.net, asp.net-mvc-3

我正在尝试发送请求的原始数据并进行了一些研究，发现`Page.Request.InputStream`我需要但当我进入我的页面时它总是空的。

我是这个概念的新手，因为我来自 C# 中的 Windows 窗体应用程序。

这是我加载的页面：

```
public override void process(NameValueCollection parametersReceived)
    {
        string urlDestination = "";
        urlDestination = parametersReceived[Includes.SUPPLIER_URL];

        Stream str; String strSoapMessage = "";
        Int32 strLen, strRead;

        str = Request.InputStream;

        strLen = Convert.ToInt32(str.Length);

        byte[] strArr = new byte[strLen];

        strRead = str.Read(strArr, 0, strLen);

        for (int i = 0; i < strLen; i++)
        {
            if (strSoapMessage.Length > 0)
                strSoapMessage += "&";
            strSoapMessage += strArr[i].ToString();
        }

        saveMyLog("DATA COMMUNICATION: \n Destination: " + urlDestination + "\n Request: " + strSoapMessage);

        HttpWebRequest webRequest = null;

        webRequest = (HttpWebRequest)WebRequest.Create(new Uri(urlDestination));
        webRequest.Method = "POST";
        webRequest.ContentType = "text/xml";
        webRequest.Headers.Add("SOAPAction", urlDestination);

        using (StreamWriter requestStream = new StreamWriter(webRequest.GetRequestStream()))
        {
            requestStream.Write(strSoapMessage);
        }

        strSoapMessage = "";
        strSoapMessage = new StreamReader(webRequest.GetResponse().GetResponseStream()).ReadToEnd();

        Response.Write(strSoapMessage);
        saveMyLog("\n Status: " + ((HttpWebResponse)webRequest.GetResponse()).StatusCode.ToString() + "\n Response: " + strSoapMessage);

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T15:11:35.723

也许有人已经阅读了 InputStream 并将其移到最后？在阅读之前尝试重置开头的位置：

```
Request.InputStream.Position = 0;
// now read from the stream
byte[] data = new byte[Request.InputStream.Length];
Request.InputStream.Read(data, 0, data.Length); 
```

# javascript - 为什么调用 preventDefault 时事件冒泡没有按预期工作？

> ID：13862700
> 
> 赞同：0
> 
> 时间：2012-12-13T15:07:59.493
> 
> 标签：javascript, jquery, jqgrid

我有一个 jqGrid，其中一列是呈现`anchor`标签的格式化列。与锚标记关联的点击处理程序调用`preventDefault()`.

我还有一个`onCellSelect`向网格注册的事件处理程序，当用户单击`anchor`呈现标记的列中的任何位置时，它会执行一些有意义的操作。

我想要做的是显示标签，但是当点击它应该触发在网格中注册`anchor`的底层处理程序。`onCellSelect`

但是，这不起作用。

[请参阅此处](http://jsfiddle.net/shardul/tcuwC/)的示例 jsFiddle

我有一个位于[此处](http://jsfiddle.net/shardul/MNLru/)的 jsFiddle ，它会触发冒泡事件。

不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:27:09.943

这有点像黑客，但它有效：

```
$("#grid").delegate(".logDetailsDialogClass",'click', 
   function(e) {
      alert('link clicked');
      e.preventDefault();
      $(this).parent().trigger("click");
   }); 
```

请注意，您可以继续使用`.live`，但我建议不要使用它。我添加的只是`$(this).parent().trigger("click");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:28:30.687

要在单击另一个事件时触发另一个事件，您可以使用 trigger 功能

```
$('.anchorClass').live('click', function(e){
     e.preventDefault();

     // get the current cell
     var $cell = $(e.target).parent('div');

     $($cell).trigger('onCellSelect');

}); 
```

看看这个[小提琴](http://jsfiddle.net/MNLru/1/)如何从另一个触发一个事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:31:43.150

您在这里混淆了几件事（您应该阅读 jQuery 文档）

`event.preventDefault()`：如果调用该方法，则不会触发事件的默认动作。 `event.stopPropagation()`: 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。
`event.stopImmediatePropagation()`: 阻止其余的处理程序被执行，并防止事件在 DOM 树中冒泡。

`.stopPropagation()`此外，您应该阅读关于和的附加说明`.stopImmediatePropagation()`：

## 补充笔记：

*   由于该`.live()`方法在事件传播到文档顶部后处理事件，因此无法停止实时事件的传播。同样，由 处理的事件`.delegate()`将传播到它们被委托的元素；在调用委托的事件处理程序时，绑定在 DOM 树中它下面的任何元素上的事件处理程序将已经被执行。因此，这些处理程序可能会阻止委托处理程序通过调用`event.stopPropagation()`或返回来触发`false`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:36:07.687

我可以建议，删除`anchors`并替换它们`spans`吗？如果你真的需要它们链接到某个地方，你可以混合使用 CSS 和 Jquery 来模拟`anchor`动作。

# arrays - 有效地合并两个数组 - 一个已排序，另一个未排序

> ID：13862701
> 
> 赞同：5
> 
> 时间：2012-12-13T15:08:01.310
> 
> 标签：arrays, algorithm, sorting, data-structures

我正在解决一个问题，该问题有一个由 n 个元素组成的排序数组，后跟一个未排序的长度数组

1.  O（登录）
2.  O(sqrt(n))

如何最有效地对整个列表进行排序？在上述两种情况下我应该使用哪种排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:11:40.660

由于将单个元素插入数组并保持排序是`O(n)`，因此您无法做得更好。

因此，对于这两种情况 - 对较小的数组进行排序然后使用`merge(part1,part2)`will be `O(n)`，因此在渐近复杂度方面是最优的。

*   排序较小的数组：`O(logn*loglog(n))`，或`O(sqrt(n)*log(sqrt(n))`分别的情况。
*   `merge(part1,part2)`:`O(n+logn)`或`O(n+sqrt(n))`,无论如何都是`O(n)`^(1 。)

因此，**两种情况的总复杂度都是`O(n)`**，这对于这个问题是最优的。

* * *

(1) 这是真的，因为对于每个，特别是对于，`log(n)^k`都渐近地小。 证明是基于双方的日志：`n^m``k>0,m>0``k=1, m=1/2`

```
log (log(n)^k) <? log(n^m) <=>
k*log(log(n)) <? m*log(n) 
```

最后一个显然是正确的（对于 large`n`和 constant `k,m>0`），因此该声明是正确的。
由此我们可以得出结论，`sqrt(n)*log(n) < sqrt(n) * n^1/2 = n`确实如此`O(n)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T15:11:53.110

您可以简单地对未排序的数组进行排序，然后对这两个排序的数组进行[合并](http://en.wikipedia.org/wiki/Merge_sort#Top-down_implementation)（如在[合并排序](http://en.wikipedia.org/wiki/Merge_sort)算法中）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T15:10:51.800

很简单，对第二部分进行排序并将其与第一部分合并（与**合并**排序相同）。两个已排序子数组的合并步骤为 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-15T10:54:13.160

分别假设`part1`和`part2`大小 r O(log n) 和 O(sqrt(n))。因此，如果您使用二分查找从 log(log n) 中选择一个元素`part2`并在其中找到位置`part1`，并递归执行直到元素`part2`不为空，则总运行时间变为 **O(sqrt(n) log(log n)**）。

# ios - 当前uiview的addSubView

> ID：13862702
> 
> 赞同：0
> 
> 时间：2012-12-13T15:08:07.763
> 
> 标签：ios, xcode, uiscrollview, addsubview

我在其他控制器中创建了一个带有一些标签的自定义 UIView。我已将 UIView 命名为“ReportsView.h”

然后回到主控制器 UIView，我希望在 UIScrollView 中添加一个子视图。使用下面的代码，添加了视图，但内容为空白。这就像添加一个纯空白的 UIView 而不是我准备好的 ReportsView。

```
ReportsView *rv = [[ReportsView alloc] init];
[rv setFrame:CGRectMake(self.scrollView.frame.size.width,0,self.scrollView.frame.size.width,600)];
[self.scrollView addSubview:rv]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:13:10.073

```
CGRectMake(self.scrollView.frame.size.width,0,self.scrollView.frame.size.width,600) 
```

被放置在屏幕外。（或滚动视图正在剪切子视图）

我相信在你的情况下，滚动视图的子视图的起源应该是 0,0

```
CGRectMake(0,0,self.scrollView.frame.size.width,600) 
```

或者

```
CGRectMake(0,0,self.scrollView.frame.size.width,self.scrollView.frame.size.height) 
```

应该管用

# php - 使用 POST 通过 PHP 将图像上传到服务器

> ID：13862709
> 
> 赞同：0
> 
> 时间：2012-12-13T15:08:57.720
> 
> 标签：php, objective-c, ios, post

我有一个 PHP 文件，它使用 post 将文件上传到服务器。最初，我使用了这段代码

```
 NSData *imageData = UIImageJPEGRepresentation([files objectAtIndex:i], 1.0);
            NSString *urlString = "myDomain";
            //[NSString stringWithFormat:@"%@test.php", delegate.dataBean.hosterURL];

            NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
            [request setURL:[NSURL URLWithString:urlString]];
            [request setHTTPMethod:@"POST"];

            NSString *boundary = @"---------------------------14737809831466499882746641449";
            NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
            [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

            NSMutableData *body = [NSMutableData data];
            [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\"; filename=\"%@\"\r\n", [names objectAtIndex:i]] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[NSData dataWithData:imageData]];
            [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
            [request setHTTPBody:body];

            NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
            NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

            NSLog([NSString stringWithFormat:@"Image Return String: %@",returnString]); 
```

还有这个 PHP。

```
<?php
    $uploaddir = './RTF/';
    $file = basename($_FILES['uploadedfile']['name']);
    $uploadfile = $uploaddir . $file;
    echo ">>$uploadfile<<\n";
    echo "file=".$file; //is empty, but shouldn't

    if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $uploadfile)) {
        echo $file;
    }
    else {
        echo "errorsjs";
    }
?> 
```

我第一次设置它没有问题。但是现在，我需要修改代码以适应这个 PHP 的要求，我认为这很容易，但我似乎根本无法得到它。

```
 //Receive the data from android
    $target_path = $_POST['pathname'];
    $new_name = $_POST['newname'];

    //$target_path  = "./RTF/";
    //$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
    $target_path = $target_path . basename($new_name);
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
        echo "The file ".  basename( $_FILES['uploadedfile']['name']).
        " has been uploaded";
    } else{
        echo "There was an error uploading the file, please try again!";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:13:34.630

```
NSString *urlstring=[appDelegate.SmartAutoString 
 stringByAppendingPathComponent:[NSString stringWithFormat:@"smartautoXml.php"]];

NSURL *nsurl =[NSURL URLWithString:urlstring];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:nsurl];
[request setHTTPMethod:@"POST"];
NSString *boundary = 
                  @"---------------------------14737809831466499882746641449";
NSString *contentType = 
      [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
NSMutableData *body = [NSMutableData data];

if (dataImage) {
    NSLog(@"imageCounter %i",imageCounter);

    [body appendData:[[NSString stringWithFormat:
              @"Content-Disposition: form-data; name=\"imgAryId\"\r\n\r\n%i",
                                                                imageCounter]
                              dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary]
                               dataUsingEncoding:NSUTF8StringEncoding]];

    img22=[UIImage imageWithData:dataImage];
    NSLog(@"dataImage %@  %@",dataImage,img22);

    NSString *temp=[NSString stringWithFormat:
                       @"Content-Disposition: form-data; name=\"img\";
                        "filename=\"image%i.jpg\"\r\n",imageCounter];
    [body appendData:[[NSString stringWithString:temp] 
                              dataUsingEncoding:NSUTF8StringEncoding]];

    NSLog(@"temp %@",temp);
    // [body appendData:[@"Content-Disposition: form-data; name=\"image\";
    //                    "filename=\"image0.jpg\"\r\n" 
    //dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" 
   dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:dataImage]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] 
   dataUsingEncoding:NSUTF8StringEncoding]];

 } 
```

# python - 如何在 Python 2.7 中处理 Httperror 303？

> ID：13862716
> 
> 赞同：3
> 
> 时间：2012-12-13T15:09:17.693
> 
> 标签：python, redirect, urllib2

当我运行以下代码时：

```
url = 'http://www.nytimes.com/2011/11/15/arts/music/new-music-from-caveman-los-campesinos-and-the-fall.html?_r=0'
try:
    handle = urllib2.urlopen(url).info()    
except urllib2.HTTPError, e:
    print(e.code) 
```

有错误并`print e.code`打印`303`。如果我使用 Chrome 或 Firefox 请求此 URL，它可以正常工作。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:16:56.213

您将需要处理重定向，因为[HTTP 303 是“查看其他”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)响应。内容所在的位置将在`Location`标题中提供给您：

```
>>> e.headers['Location']
'http://www-nc.nytimes.com/2011/11/15/arts/music/new-music-from-caveman-los-campesinos-and-the-fall.html?=_r=6&' 
```

* * *

现在，今天使用`urllib`/`urllib2`真的是自找苦吃，你真正应该做的是使用优秀的[`requests`](http://docs.python-requests.org/en/latest/)库，它会为你处理一切。

我认为我们可以说 using`requests`是在 Python 中执行 HTTP 的正确方法：

```
>>> res = requests.get(url)
<Response [200]>
>>> print res.text
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" # And so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:14:48.243

303 是重定向。您的浏览器会自动处理它，urllib2 需要一些哄骗。

看看这个有一个很好的解释：

[http://www.diveintopython.net/http_web_services/redirects.html](http://www.diveintopython.net/http_web_services/redirects.html)

# liferay - 从 portlet 生成动态下载

> ID：13862722
> 
> 赞同：0
> 
> 时间：2012-12-13T15:09:26.720
> 
> 标签：liferay, portlet

由上一个问题中的此评论引起：

[Portlet：转发 ResourceRequest 以显示完整的门户](https://stackoverflow.com/questions/5843877/portlet-forward-a-resourcerequest-to-show-the-full-portal#comment19043951_5843877)

我想知道从 portlet 生成动态下载的最佳方法（例如，动态生成的 PDF 或图像）是发出 ResourceRequest，还是有更好的替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:38:21.360

ResourceRequests 和 serveResource 方法的目的是提供一种服务资源或内容片段的方法。所以，是的，使用 ResourceRequests 是动态创建和提供 PDF 或图像等内容的有效方法。

# firebug - Firebug - 弹出窗口关闭后保持窗口打开

> ID：13862725
> 
> 赞同：4
> 
> 时间：2012-12-13T15:09:36.350
> 
> 标签：firebug

默认情况下，当新的浏览器窗口关闭时，firebug 也会这样做；但是，我正在尝试逐步完成一些事情以创建测试计划，并且需要查看 Net->Post 活动。

有没有办法保持这个开放。我试过在新窗口中打开 FireBug；但是，一旦发布活动发生，我页面上的 javascript 就会告诉浏览器关闭，因此我无法检查发布。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-10T10:12:13.793

为了检查 Firebug 中的网络活动，您需要阻止弹出窗口关闭。如果您可以控制弹出窗口中的 javascript，您可以简单地添加以下内容（适用于 FF 和 Chrome，也许还有其他）：

```
window.onbeforeunload = function() {
  return false;
} 
```

如果您没有访问权限（例如，在我的情况下，它是第三方小部件），您可以在加载弹出窗口后启动 Firebug，并在“控制台”选项卡中运行上述代码。

这会阻止窗口关闭，允许您检查“网络”选项卡等的内容。

# javascript - 让 .animate() 和 .data() 一起工作

> ID：13862727
> 
> 赞同：0
> 
> 时间：2012-12-13T15:09:43.243
> 
> 标签：javascript, jquery

我正在尝试使以下代码正常工作：

有一个奇怪的问题，当我使用 elem.data 获取值时，第二个 .animate 不起作用，而当我使用特别提到值时，`"left" : "200px"`它似乎起作用。

我已经检查了下面提到的代码之前的存在`elem.data('prevLeft')`和`elem.data('prevTop')`使用，这些值存在并且是正确的。`console.log()`

```
elem.animate({"width":"200px"},3000).animate({
    "left": elem.data('prevLeft'),
    "top": elem.data('prevTop')
 },2000); 
```

似乎是什么问题，我无法将存储在变量中的值传递给`.animate()`函数吗？

* * *

一个 Stray 函数正在重置这些值，*这*就是它不起作用的原因。我重试了所有提到的方法，所有方法都奏效了。

对不起，所有的烦恼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:14:30.290

编辑，试试这个：

```
var prevLeft = elem.data('prevLeft'),
var prevTop = elem.data('prevTop');

elem.animate({'width':'200px'},3000).animate({'top':prevTop,'left':prevLeft},2000); 
```

虽然如果 svenhesse 的回答不起作用，我不确定这会不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:15:43.413

尝试这个：

```
var conf = {
    left: elem.data('left'), 
    right: elem.data('right')
};

elem.animate(conf, 200); 
```

# c++ - c ++ boost命名空间（而不仅仅是）名称快捷方式

> ID：13862741
> 
> 赞同：1
> 
> 时间：2012-12-13T15:10:21.283
> 
> 标签：c++, boost, shortcut

我正在定义一个 boost 多索引容器：

```
namespace bmi = boost::multi_index;
struct DijkstraTriplet {
...
};

typedef multi_index_container <
  DijkstraTriplet,
  bmi::indexed_by<
    bmi::ordered_unique<bmi::member<DijkstraTriplet,size_t,&DijkstraTriplet::linkId> >,
    bmi::ordered_non_unique<bmi::identity<DijkstraTriplet> >
 >
> DijkstraTripletContainer; 
```

在某些时候，我正在用数据填充它，并想扫描它的一个索引。为此，我定义了一个迭代器：

```
DijkstraTripletContainer::nth_index<0>::type::iterator it; 
```

（使用旧的编译器）。这是令人难以置信的漫长和尴尬。为了使其更短且更具可读性，我添加了这些行：

```
#define dtt0 DijkstraTripletContainer::nth_index<0>::type
#define dtt1 DijkstraTripletContainer::nth_index<1>::type 
```

然后使用 dtt0::iterator （它很简洁，但同时也很丑，因为用#defines 表示）。有没有更优雅的方式来使用没有#defines 的快捷方式？我正在寻找优雅的东西

```
namespace bmi = boost::multi_index; 
```

评论？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:15:08.887

```
typedef DijkstraTripletContainer::nth_index<0>::type dtt0; 
```

# ios - 无法解释的帧速率仅在 iPhone 5 上下降

> ID：13862743
> 
> 赞同：2
> 
> 时间：2012-12-13T15:10:33.827
> 
> 标签：ios, iphone-5, frame-rate

我有一个 iOS 应用程序，它可以从设备相机中抓取帧，并进行一些 CPU 密集型图像处理。在 iPad 2、iPad 3 和 iPhone 4s 上，该应用程序以每秒 30 帧 (fps) 的速度运行。我最近在 iPhone 5 上对其进行了测试，大部分时间它以 30 fps 运行。有时我注意到它会下降到 15 fps 左右，这是我在其他设备（据说硬件较慢的设备）上从未体验过的。我已经努力追查这个问题，并且我学到了很多东西，但没有找到解释。以下是我的一些观察，可能会为正在发生的事情提供线索：

*   它只发生在 iPhone 5 上
*   尝试在手机上分析应用程序时无法重现问题
*   该应用程序在多个线程上运行，帧抓取并将图像转换为我需要的格式在单独的线程上运行以进行密集的图像处理。帧抓取线程永远不会低于 30fps，它只是下降的图像处理线程。这意味着我的问题不是由于某些原因（例如低光照水平）导致相机帧速率下降。
*   我倾向于通过启动应用程序、点击 iPhone 的待机按钮、点击主页按钮并返回应用程序来重现问题。如果我重复此 3-6 次，问题通常会发生（但并非总是如此）。
*   似乎与 iOS 6.0 无关，它在带有 iOS 6 的 4s 上运行良好。
*   当问题发生时，即使终止应用程序并重新启动它通常也不会恢复帧速率（表明它是与 iPhone 5 相关的我的应用程序之外的问题）。
*   将手机连接到我的电脑并重建应用程序似乎总是可以解决帧速率问题。

这很奇怪。会不会是 iPhone 5 有时会降低手机的时钟速度以延长电池寿命（iPad 和 iPhone 4s 没有这样做）？

我很想听听任何有类似经历的人。

我的应用程序在 iPhone 5 上不应该看起来更糟，它应该看起来更好！

提前谢谢了，

凯文

**更新**

我做了更多的测试，但仍然没有发现问题。这是我尝试过的。

*   我已经删除了线程
*   我删除了一些我正在使用的第三方
*   删除了所有日志记录
*   试图在仪器中重新创建并失败。该问题不会发生在仪器中

我已经没有想法了。想听听任何在 iPhone 5 上遇到过帧速率下降的人的意见吗？iPhone 5 有省电模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:36:03.583

最可能的原因是您的代码中的竞争条件只会被 iPhone 5 上的特定时间触发。我会四处寻找您有资源争用的任何地方，并确保您正确处理它们，尤其是您在任何地方执行超时（因为您没有完全死锁或崩溃）。

你提到你在多个线程上运行。您的意思是您正在使用`NSThread`、`performSelectorInBackground:`、`NSOperation`或 GCD 吗？直接使用`NSThread`是线程和资源问题的常见原因，因为使用它比使用`NSOperation`GCD 更难正确执行操作。

如果你曾经调用`performSelectorInBackground:`，我会高度怀疑那段代码，因为这个调用非常容易被错误地使用（并且几乎不应该被使用）。离开应用程序并重新启动它往往会导致问题，这一事实尤其让我怀疑您在视图控制器中手动生成线程（这是一个常见错误）。问题`performSelectorInBackground:`在于，没有简单的方法可以知道您已经*为此*生成了一个线程。所以你可能会得到比你想要的更多的线程。

与所有性能方面一样，您应该从 Instruments 开始。特别注意时间分析器和线程仪器。

此类问题的一个更常见的原因是：审核您对`NSLog`. 它非常缓慢且同步。在多个线程上运行它会显着影响性能。

# cakephp - CakePHP 2.0 ACL - 更新用户记录导致 ARO 错误

> ID：13862744
> 
> 赞同：3
> 
> 时间：2012-12-13T15:10:36.647
> 
> 标签：cakephp, acl

我在 CakePHP 2.3.0-RC1 中使用 ACL

当我更新用户字段（选择营销）时，我收到一个错误：

```
AclNode::node() - Couldn't find Aro node identified by "Array ( [Aro0.model] => User[Aro0.foreign_key] => 4 ) " 
```

我认为这与拯救用户有关。我在手册中找不到有关如何解决此问题的任何内容。

这是从控制器中截取的方法：

```
$me = $this->Session->read('Auth.User');
// don't use the session to display, because they might have subscribed/unsubscribed
$user = $this->User->find('first',array('conditions'=>array('User.id'=>$me['id'])));
$optin = ! $user['User']['optin'];
$data  = array(
                'User' => array(
                            'id'    => $me['id'],
                            'optin' => $optin
                        )
            );
if ( $this->User->save($data) ) 
{
    $this->Session->setFlash(__('Subscription status has been amended'));
} 
else 
{
     $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
}
$this->redirect(array('action'=>'account')); 
```

重定向后，我收到 ARO 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T13:02:17.207

根据评论，我只是将其写下来作为答案。

我将用户模型设置为请求者，但实际上打算在相关的“组”模型上使用基于角色的身份验证。

我设置了父节点，但忽略了从用户模型中取出 Acts As Requester。

评论这一点很有魅力——我实际上并不需要用户（只是组）的 ARO 对象，它存在只是因为 Cake 教程包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T10:59:32.013

当前教程（[http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)）说禁用请求者指令

```
public $actsAs = array('Acl' => array('type' => 'requester', 'enabled' => false)); 
```

在用户模型中，以防您打算使用仅限组的 ACL。你必须实现绑定方法：

```
public function bindNode($user) {
return array('model' => 'Group', 'foreign_key' => $user['User']['group_id']); 
```

}

这对我有用。

# java - 有没有一种简单的方法来获取 Java 中的 JavaScript 输出（使用 Eclipse）？

> ID：13862745
> 
> 赞同：5
> 
> 时间：2012-12-13T15:10:42.467
> 
> 标签：java, javascript, eclipse

我正在尝试获取我编写的 JavaScript 函数的返回值。我可以使用涉及侦听器的非常复杂的方法来做到这一点，但我想使用 Eclipse 的[Browser.evaluate](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fbrowser%2FBrowser.html)方法。

作为一个玩具问题，我在 Java 文件中有以下代码：

```
Object result = this.browser.evaluate("new String(\"Hello World\")"); 
```

this.browser`org.eclipse.ui.part.EditorPart`在覆盖函数中扩展的类中创建`createPartControl`：

```
public void createPartControl(Composite parent) {
  // Create the browser instance and have it 
  this.browser = new Browser(parent, SWT.NONE);
  this.browser.addFocusListener(new FocusAdapter() {
    @Override
    public void focusGained(FocusEvent e) {
      SomeEditor.this.getSite().getPage().activate(SomeEditor.this);
    }
  });
  new ErrorReporter(this.browser);
  this.browser.setUrl(Activator.getResourceURL("html/java-shim.html").toString());
  ...more stuff snipped...
} 
```

但是，它不是`result`内容为“Hello World”的 Java 字符串，而是`null`. 我是错误地使用了这个方法，还是它坏了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:58:07.190

您必须在 JavaScript 中返回一个值：

```
Object result = browser.evaluate("return 'Hello World'"); 
```

为我工作。

# selenium - 如何单击页面上只有“href”唯一的链接？Selenium Webdriver - Python

> ID：13862749
> 
> 赞同：1
> 
> 时间：2012-12-13T15:10:51.190
> 
> 标签：selenium, python-2.7, webdriver, selenium-webdriver

假设您有以下列表：

```
<ul>
  <li>
      <a class="sameClass" href="link1">Same Text</a>
  </li>
  <li>
      <a class="sameClass" href="link2">Same Text</a>
  </li>
  <li>
      <a class="sameClass" href="link3">Same Text</a>
  </li>    
...
</ul> 
```

我想单击 href="link1" 的“相同文本”。

注意：我已经尝试了多个 css 选择器和 xpath。他们都没有工作。我正在使用 Selenium 2.27.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T15:53:45.513

尝试使用此链接 = driver.find_elements_by_xpath("//a[contains(text(), 'Same Text')]")

其中 links 是所有元素的列表。链接[0] = 链接1 链接[1] = 链接2.. 以此类推

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:02:20.627

如果您想使用 CSS 选择器而不是 xpath，这应该可以工作。

a[href='link2'] 或 a[href*='partialLink2']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T06:40:18.643

css=a[href='link1']

css=a[href='link2']

css=a[href='link3']

以上是相同文本的唯一 CSS 选择器。

# android - 带有 android 和 windows 的本地和在线数据库

> ID：13862751
> 
> 赞同：1
> 
> 时间：2012-12-13T15:10:58.130
> 
> 标签：android, database, web-services, sqlite, android-sqlite

我希望将数据库作为文件 (.db) 我希望能够拥有该文件的在线版本，可以通过 Web 服务进行查询

MYsql 是不可能的，因为它不能在 android 或 windows 上存储为文件（需要本地服务器）

sqlite 似乎是最好的选择，但我没有看到任何“好”的 Web 服务实用程序可以通过查询在功能上执行所有基本 SQL

我是否缺少一种适用于我的多操作系统设置的数据库？我是否缺少可与 sqllite 一起使用的 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:24:44.327

如果您使用 Web 服务来查询在线数据库，那么从客户端的角度来看，您真的不关心在线数据库的格式。

因此，您可以将 MySQL DB 用于在线部分，并通过您的 web 服务公开它（因为这是一种非常常见的方法，我相信您可以在线找到一些资源来帮助您完成此任务），然后在设备上使用 SQLite在本地存储数据库。

一种看待它的方法是 MYSQL 是 SQLite 的超集，您唯一需要确保的是限制您可以通过 Web 服务在 MYSQL 数据库上执行的查询范围（这并不完全准确，而只是一种看到了）

这个[链接](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)解释了一些推荐的架构来做一些与你所建议的非常相似的事情，从 Android 方面来看

# c# - Switch 语句与 App.Config

> ID：13862758
> 
> 赞同：2
> 
> 时间：2012-12-13T15:11:30.443
> 
> 标签：c#, performance, switch-statement, config

我有一个 MVVM Xaml 应用程序，我试图从启动中挤出每一毫秒。我注意到的一件事是，从 App.Config 中提取了从代码到字符串的转换。只有5个值，所以不多。我想，我可以把它放在一个 switch 语句中，它会更快（令我惊讶的是它是同一时间）。这被多次调用，大约 80 次，可以是 5 个值中的任何一个，也可以是 5 个中的任何一个。以前只有一个字符串。IsNullOrEmpty 检查来自 ConfigurationManager.AppSettings 的值以查看它是否找到了一个值。在我的开关中，我只是放了一个默认返回“”。这些值很少会改变，如果有的话，但可能会有更多。

所以我的问题是，随着项目数量的变化，使用 switch 或 App.Config 是否有性能优势？我在 App.Config 中放置任何内容的唯一原因是用户需要在不重新构建应用程序的情况下修改某些内容。目前，由于我的测试显示时间相同，因此我倾向于将其保留在 App.Config 中，但我只想听听大家对此的想法。

谢谢， TJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:19:11.963

您在 App 配置中的参数在第一次被读取后会被缓存。初始读取可能需要一些开销，因为它需要磁盘访问。

在这种情况下，切换也会更快，我们说的是纳秒。我想一旦你的配置值第一次被实际读取，从缓存中读取它们的性能是相似的。

由于您似乎有理由允许用户更改它们，因此我将它们留在 app.config 中。

# cuda - 有关 CUDA 计算能力的信息冲突

> ID：13862759
> 
> 赞同：0
> 
> 时间：2012-12-13T15:11:30.500
> 
> 标签：cuda, hardware, gpu, nvidia

我正在寻找计算能力为 3.x 的 GPU。

不幸的是，NVIDIA 网站上关于 GTX6xx 卡的计算能力的数据相互矛盾：

[http://www.nvidia.co.uk/object/cuda_gpus_uk.html](http://www.nvidia.co.uk/object/cuda_gpus_uk.html)

[https://developer.nvidia.com/cuda-gpus](https://developer.nvidia.com/cuda-gpus)

例如，GeForce GTX650 根据第一个来源列为 3.0，根据第二个来源列为 2.1。

哪一个是正确的？

拥有 GTX650 的人可以确认它具有哪种计算能力吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:49:42.393

我认为[http://www.nvidia.co.uk/object/cuda_gpus_uk.html](http://www.nvidia.co.uk/object/cuda_gpus_uk.html)的页面有误。我认为错误的根源在于，在发布 Kepler (GTX6xx) 之后，NVIDIA 将他们的一系列旧产品重新命名为使用 6xx 代号，这对于许多客户来说肯定会产生误导，或者至少是令人困惑的。来自[维基百科](http://en.wikipedia.org/wiki/GeForce_600_Series)：

*   GeForce 605 (OEM) 卡是重新命名的 GeForce 510。
*   GeForce GT 610 卡是重新命名的 GeForce GT 520。
*   GeForce GT 620 (OEM) 卡是重新命名的 GeForce GT 520。
*   GeForce GT 620 卡是重新命名的 GeForce GT 530。
*   GeForce GT 630 (DDR3) 卡是重新命名的 GeForce GT 440 (DDR3)。
*   GeForce GT 630 (GDDR5) 卡是重新命名的 GeForce GT 540 (GDDR5)。
*   GeForce GT 640 (OEM) 卡是重新命名的 GeForce GT 545 (DDR3)。
*   GeForce GT 645 (OEM) 卡是重新命名的 GeForce GTX 560 SE。

我猜第一页的列表中关于哪些产品已更名的错误。

# php - PHP RESTful 路由

> ID：13862761
> 
> 赞同：0
> 
> 时间：2012-12-13T15:11:38.523
> 
> 标签：php, rest, mod-rewrite

我的问题很简单。我在 PHP 中实现 RESTful 服务，并且我正在使用 mod-rewrite 将干净的 URL 重定向到 index.php。例如，如果我有这个 url 来获取代码为 12345 的课程。

`http://localhost/courses/12345`我将在以下结构中将其重定向到 index.php

```
http://localhost/index.php?manager=CoursesManager&courseCode=12345 
```

在 index.php 中查找 CoursesManager.php，如果能够找到它，我会创建一个 CourseManager 对象，然后处理查询字符串并调用我需要的方法。

但是，例如，如果我想知道 Course 可以拥有的类的类型，我不知道如何重写 url。假设网址是

```
http://localhost/courses/12345/typesofclass 
```

我怎么能重写它？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:15:09.463

尝试这个

```
RewriteRule /courses/([0-9]+)/([a-zA-Z]*) /index.php?manager=CoursesManager&courseCode=$1&type=$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:18:47.970

在您的情况下，最好的方法是创建一个全面的 url 重写：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

并在数据库中创建一个特定条目：

```
+----+-----------------------------+
| id | clean_url                   |
+----+-----------------------------+
|  1 | /courses/12345              |
|  2 | /courses/12345/typesofclass |
+----+-----------------------------+ 
```

现在，您只需获取 url，查看 db 它是什么 id 并加载所需的数据/脚本。

如果需要，您还可以添加*旧*网址：

```
+----+-----------------------------+--------------------------------------------+
| id | clean_url                   | old_url                                    |
+----+-----------------------------+--------------------------------------------+
|  1 | /courses/12345              | manager=CoursesManager&courseCode=12345    |
|  2 | /courses/12345/typesofclass | manager=CoursesManager&courseCode=12345&.. |
+----+-----------------------------+--------------------------------------------+ 
```

现在，如果您仍然需要知道*旧*参数，您可以在**文件****的最顶部`index.php`**添加一个小脚本，如下所示：

```
SELECT old_url FROM ... WHERE clean_url = '{$your_url}'
$params = explode( '&', $result_of_query );
foreach ( $params as $value )
{
    $gets = explode( '=', $value );
    $_GET[$gets[0]] = $gets[1];
} 
```

这将在页面开头设置您的获取参数，并且脚本应该像以前一样工作。

# c# - 如何使用任务获取项目列表 > 任务定义？

> ID：13862769
> 
> 赞同：-1
> 
> 时间：2012-12-13T15:12:08.477
> 
> 标签：c#, task-parallel-library

我使用此代码并收到错误“方法“doSomthing1”在当前上下文中不存在”：

```
static void Main( ) {
  Stopwatch stopwatch1;
  stopwatch1 = new Stopwatch( );
  stopwatch1.Reset( );
  stopwatch1.Start( );
  Task<List<int>> myTask = Task<List<int>>.Factory.StartNew( ( ) => doSomething1( ) );
  //Task<int> myTask = Task<int>.Factory.StartNew( ( ) => doSomething2 () );

  Thread.Sleep( 500 );
  Stopwatch stopwatch2 = new Stopwatch( );
  stopwatch2.Reset( );
  stopwatch2.Start( );
  //myTask.Wait( );
  if( myTask.IsCompleted ) {
    stopwatch2.Stop( );
  }

   myTask.Result.ForEach (x => Console.WriteLine (x.ToString () ));
  stopwatch1.Stop( );
  Console.WriteLine( "Stopwatch 1 elapsed time " + stopwatch1.ElapsedMilliseconds.ToString( ) );
  Console.WriteLine( "Stopwatch 2 elapsed time " + stopwatch2.ElapsedMilliseconds.ToString( ) );
  Console.Read( );
}

static List<int> doSomething1(  ) {
  Thread.Sleep( 2000 );
  return new List<int> { 1, 2, 3, 4, 5, 6 };     
}

static int doSomething2 () {
  Thread.Sleep( 2000 );
  int k = 2 ;
  return k ;
} 
```

如果我将任务与任务定义一起使用，那么一切正常，但是当我尝试使用时`Task<List<T>>`，我会出错。

谁能解释错误的原因。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:15:13.067

区分大小写的方法名称，doh！。

# c# - C# 文件流与计时器冲突

> ID：13862770
> 
> 赞同：0
> 
> 时间：2012-12-13T15:12:13.927
> 
> 标签：c#, file, filestream, conflict, operations

我正在编写一个用于在 c# 中记录安全日志的程序。但是有几个问题。

首先，我创建一个 .txt 文件来记录日志。和：

```
FileStream fs1 = File.Create("C:\\" + filename + ".txt");
fs1.Close(); 
```

然后，**在一个循环**中，我在 txt 文件中写了一些内容：

```
TextWriter tsw1 = new StreamWriter(@"C:\\" + filename + ".txt", true);
//Writing text to the file.
tsw1.WriteLine(curLogs + " \n");
//Close the file.
tsw1.Close(); 
```

之后，我在 c# 中设置了一个计时器，并且每隔 - 例如 - 10 分钟我想重置日志文件。

```
 Timer timer = new Timer();
    timer.Tick += new EventHandler(ik.timer_Tick);   // Everytime timer ticks, timer_Tick will be called
    timer.Interval = (delay);                        // Timer will tick every 10 mins e.g
    timer.Enabled = true;                            // Enable the timer
    timer.Start();                                   // Start the timer 
```

在 timer_tick 处理程序中，我想删除旧的日志文件，并创建一个同名的新文件，然后继续记录日志。和：

```
void timer_Tick(object sender, EventArgs e)
{
    //FileStream fs = File.Delete("C:\\" + filename + ".txt");
    File.Delete("C:\\" + filename + ".txt");
    FileStream fs2 = File.Create("C:\\" + filename + ".txt");
    fs2.Close();
} 
```

从语法上讲，第一次迭代没有问题，它工作得很好，但问题是，在计时器的第一次迭代之后，log.txt 文件变空了。Filestream 不能在其中写入任何内容。我认为文件流和流写入器之间存在冲突，您能看到我看不到的任何点吗？

感谢阅读，提前感谢。

# iphone - 带有计时器的 NSOperationQueue

> ID：13862771
> 
> 赞同：3
> 
> 时间：2012-12-13T15:12:16.730
> 
> 标签：iphone, objective-c, ios, xcode, nsoperationqueue

我想使用一个`NSOperationQueue`里面有一个计时器的。例如 - 我下载 1 个元素（完成第一个`NSOperation`）然后我想等待 3 秒*，然后*编译器继续进行下一个操作。第二次`NSOperation`完成后，我希望它等待同样的 3 秒，然后开始第 3 次操作。

如何实现这种行为？我以前没有使用`NSTimer`or的经验，`NSRunLoop`我不确定是否应该使用它们。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:18:02.273

只要操作在后台线程中执行；

您可以将 maxConcurrentOperationCount 设置为 1 并在您的操作块中使用 sleep(3) 3 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:17:07.170

采用`sleep(int secondsToSleep);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T11:33:56.483

如果您只想在操作完成某些操作后等待 3 秒，则只需使用 sleep 和 maxConcurrentOperationCount 即可。

如果您需要更复杂的东西，您可以在 while 循环中使用 timeIntervalSinceDate。如果您的操作执行一些可能需要不确定时间的处理（在我的情况下，我需要运行远程创建帐户过程）并且您希望在运行下一个操作之前等待至少或最多 X 秒，这将非常有用队列。您可以使后续的 NSOperations 依赖于先前操作的完成。

使用 addDependency 对 NSOperation 进行排序以等待上一个操作完成：

```
NSOperationQueue *ftfQueue = [NSOperationQueue new];
// Does this user have an account?
// createFTFAccount is subclass of NSOperation.  
FTFCreateAccount *createFTFAccount = [[FTFCreateAccount alloc]init];
[createFTFAccount setUserid:@"a-user-id"];
[ftfQueue addOperation:createFTFAccount];
// postFTFRoute subclass NSOperation    
FTFPostRoute *postFTFRoute = [[FTFPostRoute alloc]init];
// Add postFTFRoute with a dependency on Account Creation having finished 
[postFTFRoute addDependency:createFTFAccount];
[ftfQueue addOperation:postFTFRoute]; 
```

在 NSOperation 子类主要检查操作是否已完成或是否花费太长时间

```
#import <Foundation/Foundation.h>
@interface FTFCreateAccount : NSOperation
    @property (strong,nonatomic) NSString *userid;
@end    

@implementation FTFCreateAccount
{
    NSString *_accountCreationStatus;
}

- (void)main {

    NSDate *startDate = [[NSDate alloc] init];
    float timeElapsed;
    ..... 
    .....
    .....

    // Hold it here until a reply comes back from the account creation process 
    // Or the process is taking too long
    while ((!_accountCreationStatus) && (timeElapsed < 3.0)) {
        NSDate *currentDate = [[NSDate alloc] init];            
        timeElapsed = [currentDate timeIntervalSinceDate:startDate];
    }
    // Code here to do something dependent on _accountCreationStatus value

} 
```

# iphone - 如何在同一纬度/经度上添加多个引脚

> ID：13862775
> 
> 赞同：0
> 
> 时间：2012-12-13T15:12:21.410
> 
> 标签：iphone, ios, xcode, annotations, mkannotationview

我正在尝试在同一位置添加多个引脚。

```
for (int i = 0; i < [arrListing count]; i++) {

            List *obj = [arrListing objectAtIndex:i];
            NSLog(@"Title %@",obj.Title);

            CLLocationCoordinate2D annotationCoord;

            annotationCoord.latitude = [obj.lat floatValue];
            annotationCoord.longitude = [obj.log floatValue];

            MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
            annotationPoint.coordinate = annotationCoord;
            annotationPoint.title = obj.Title;

            [mapView addAnnotation:annotationPoint];
        } 
```

上面的代码表示添加多个注释，但许多引脚位于同一位置

**所以我只能看到。最后一个和倒数第二个。** 下面是 viewForAnnotation 的代码

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{
     MKPinAnnotationView *annView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"annView"];

    if (!annView) {
        annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"annView"];
        annView.pinColor = MKPinAnnotationColorRed;
        annView.animatesDrop = YES;
        annView.canShowCallout = YES;
        NSLog(@"iRow :%d",iRow);
        annView.tag = iRow++;
        UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        annView.rightCalloutAccessoryView = rightButton;
        NSLog(@"if condition");
    }
    else
    {
        annView.annotation = annotation;
        NSLog(@"else condition");
    }
    return annView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:18:45.877

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
(id <MKAnnotation>)annotation
{
    MKPinAnnotationView *pinView = nil;
    if(annotation != map.userLocation)
    {
        static NSString *defaultPinID = @"com.invasivecode.pin";
        pinView = (MKPinAnnotationView *)[map dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) pinView = [[MKPinAnnotationView alloc]
                                         initWithAnnotation:annotation reuseIdentifier:defaultPinID];

        pinView.pinColor = MKPinAnnotationColorRed;
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;
    }
    else {
        [map.userLocation setTitle:@"I am here"];
    }
    return pinView;
} 
```

# objective-c - 嵌套的 JSON NSJSONserialization

> ID：13862780
> 
> 赞同：2
> 
> 时间：2012-12-13T15:12:31.357
> 
> 标签：objective-c, json, nsjsonserialization

我正在努力解决以下问题：

我有一个返回嵌套 JSON 片段的 API。（我使用 NSJSONSeralization 来解析它）

例如：

```
 { "thing" = 1,
   "Other thing" = 2,
   "ParentFromList": [{
   "IT" = 3,
   "SecondIT" = 4
 } 
```

我如何使用 IT 和 Second it？

我试过了：

```
 NSDictionary *thingy = [[jsonOutput objectForKey:@"ParentFromList"] ObjectForKey:@"IT"]; 
```

JsonOutput 也是一个字典。但是运行它之后，它失败了：

```
 Unrecognized Selector send to instance. 
```

我不知道如何解决这个问题，感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:17:37.577

对于您的数据，最外面的对象是一个`NSDictionary`实例。键*ParentFromList*的值是一个数组，即一个`NSArray`实例（注意括号）。数组的第一个元素包含另一个字典实例（注意花括号）。

此外，它不是`ObjectForKey:`但`objectForKey:`（案例很重要）。

所以你可能想写：

```
NSDictionary *thingy = [ [ [jsonOutput objectForKey: @"ParentFromList"]
                         objectAtIndex: 0]
                       objectForKey: @"IT"]; 
```

顺便说一句：您的示例 JSON 数据既不完整，也不采用 JSON 格式（它是 Apple 的属性列表格式）。

正确和完整的 JSON 表示将是：

```
{
    "thing": 1,
    "Other thing": 2,
    "ParentFromList": [
        {
            "IT": 3,
            "SecondIT": 4
        }
    ]
 } 
```

# c# - 为什么 System.String.EndsWith() 有一个字符重载而 System.String.StartsWith() 没有？

> ID：13862781
> 
> 赞同：4
> 
> 时间：2012-12-13T15:12:36.153
> 
> 标签：c#, .net, string, char

我正在查看`System.String`，我想知道为什么`EndsWith`and`StartsWith`方法在它们可以采用的参数方面不是对称的。

具体来说，为什么`System.String.EndsWith`支持 char 参数而不支持`System.String.StartsWith`？这是因为任何限制或设计特点吗？

```
// System.String.EndsWith method signatures
[__DynamicallyInvokable]
public bool EndsWith(string value)

[ComVisible(false)]
[SecuritySafeCritical]
[__DynamicallyInvokable]
public bool EndsWith(string value, StringComparison comparisonType)

public bool EndsWith(string value, bool ignoreCase, CultureInfo culture)

[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
internal bool EndsWith(char value)
{
  int length = this.Length;
  return length != 0 && (int) this[length - 1] == (int) value;
}

// System.String.StartsWith method signatures
[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
[__DynamicallyInvokable]
public bool StartsWith(string value)

[SecuritySafeCritical]
[ComVisible(false)]
[__DynamicallyInvokable]
public bool StartsWith(string value, StringComparison comparisonType)

public bool StartsWith(string value, bool ignoreCase, CultureInfo culture) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:21:20.563

在 ILSpy 中，这种重载似乎绝大多数在 IO 代码中被称为

```
s.EndsWith(Path.DirectorySeparatorChar) 
```

大概这只是 C# 团队认为必须避免重复代码很有用的东西。

`s[0] == c`请注意，在开始时（ vs ）进行此检查要容易得多，`s[s.Length - 1] == c`这也可以解释为什么他们不费心进行`StartsWith`重载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T15:22:45.310

这是一种内部方法，仅在以下 8 种方法中使用`mscorlib`：

*   System.Security.Util.StringExpressionSet.CanonicalizePath（字符串路径，布尔需要全路径）：字符串
*   System.IO.IsolatedStorage.IsolatedStorageFile.DirectoryExists（字符串路径）：布尔
*   System.IO.Directory.GetDemandDir(string fullPath, bool thisDirOnly):string
*   System.IO.DirectoryInfo.GetDirName(string fullPath):string
*   System.Security.Util.URLString.IsRelativeFileUrl:bool
*   System.IO.DirectoryInfo.MoveTo（字符串 destDirName）：void
*   System.IO.DirectoryInfo.Parent:DirectoryInfo
*   System.Globalization.CultureData.SENGDISPLAYNAME：字符串

可能只是为了方便和代码重用:)

# facebook - 更改应用名称并迁移用户

> ID：13862783
> 
> 赞同：0
> 
> 时间：2012-12-13T15:12:45.907
> 
> 标签：facebook, migration, facebook-apps

我们已经有一个使用特定域名、命名空间和视觉名称的 Facebook 应用程序。董事会决定更改公司名称，所以我们创建了一个带有新名称和新徽标（等）的新应用程序，如何将当前用户从旧应用程序迁移到新应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:17:39.750

您显然可以携带旧数据库并让您以前的用户知道此更改，但我相信他们在第一次重新进入时必须重新接受您的应用程序，因为 Facebook 会将他们视为首次用户。

# jsf - 在 primefaces 通知栏中读取输入

> ID：13862791
> 
> 赞同：1
> 
> 时间：2012-12-13T15:13:01.960
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试读取放置在 ap:notificationBar 中的 inputText，但我只得到 null 作为它的输入。jsf代码是：

```
 <h:form>
    <p:notificationBar position="top" 
                       effect="slide" 
                       styleClass="top" 
                       id="notificationPanel"
                       widgetVar="bar" >
            <h3>Subscribe</h3>
            Add your email adress here
            <h:panelGrid columns="3" cellspacing="20">
                Email:
                <p:inputText value="#{detailsBean.email}" />
                <p:commandButton value="Submit" action="#{detailsBean.submitEmail}" onclick="bar.hide()"/>
            </h:panelGrid>
        </p:notificationBar>  
    </h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:15:45.613

的 HTML 表示`<p:notificationBar>`将被重新定位到 HTML DOM 树中的所需位置，并且在您的特定情况下将不再以 HTML 形式结束。

您需要将 to`<h:form>`移到`<p:notificationBar>`.

```
<p:notificationBar position="top" 
                   effect="slide" 
                   styleClass="top" 
                   id="notificationPanel"
                   widgetVar="bar" >
    <h:form>
        <h3>Subscribe</h3>
        Add your email adress here
        <h:panelGrid columns="3" cellspacing="20">
            Email:
            <p:inputText value="#{detailsBean.email}" />
            <p:commandButton value="Submit" action="#{detailsBean.submitEmail}" onclick="bar.hide()"/>
        </h:panelGrid>
    </h:form>
</p:notificationBar> 
```

# api - Maps API 没有返回正确的位置（说它正在返回“近似”位置）

> ID：13862794
> 
> 赞同：2
> 
> 时间：2012-12-13T15:13:19.727
> 
> 标签：api, maps, geocode

我们正在向地图 API 传递一个邮政编码，谷歌正在计算 lat 和 lng 坐标。

但是，这些并没有返回正确的位置。

如果我在标准的谷歌地图网页 (maps.google.com) 中输入此邮政编码，则会返回正确的位置。

为什么会这样？

# jquery - 如何根据窗口宽度销毁和重新初始化 FredHQ jQuery Roundabout 插件

> ID：13862797
> 
> 赞同：0
> 
> 时间：2012-12-13T15:13:31.557
> 
> 标签：jquery, jquery-plugins, window-resize

我正在使用[**FredHQ Roundabout（jQuery 插件）**](http://fredhq.com/projects/roundabout/)并且需要在 480 像素以下禁用此插件。它被一个类调用，所以我尝试添加一个删除类：

```
<script>
$(window).resize(function() {
    if ($(this).width() > 480) {
        $('#menuSection').removeClass('roundAbout');   
    }
});

$(document).ready(function() {
    $(window).resize();
});
</script> 
```

当我删除课程时，脚本仍然处于活动状态。我需要一些帮助来停用它并即时重新激活它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:01:00.883

这家伙成功地做到了，你可以在这里下载他修改过的 Roundabout 版本， [https://github.com/mattstauffer/roundabout](https://github.com/mattstauffer/roundabout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:37:13.260

在不知道您使用的是什么插件的情况下，很难提供答案。该插件可能包含“销毁”方法。但是，可能还有另一种方式。维护环形交叉口元素的克隆，然后用克隆替换它：

## [例子](http://jsfiddle.net/SpYk3/NURcV/)

> **长答案** [*包括详细说明*
> *如果您只想要代码，请向下滚动页面*]

```
<script type="text/javascript">
    // First I establish variables for the clone and timer we will be using
    var clnRoundabout, tmrCloneReset;

    //  This is equivalent to $(document).ready
    $(function() {

        //  First things first, clone the main HTML for later use as needed
        clnRoundabout = $('#menuSection').clone();

        //  Second, establish the first on screen roundabout 
        //    (you may want to do a screen width check first)
        $('#menuSection').roundabout();

        //  Here we call the resize method on window so we know when the window size is changing
        $(window).resize(function(e) {

            //  This is simply to clear the timer so it is not run twice within too short a time period
            //  What might confuse you here is the call before its established
            // the reason is simple, if you have your mouse down on the window border,
            //  and you are constantly moving the border, thus resizing the window,
            //  then this method will be called 1000 times a second!
            //  this is why we need the timer and we need to clear it everytime this method is called.
            //  by clearing it and recalling it everytime we can assure that the method is only fired once, 
            //  depending on the TIME parameter at the end of setTimeout
            clearTimeout(tmrCloneReset);

            //  now of course we establish the timer i just spoke of,
            //  notice at the end i set the time to 250, that is .250 of a second
            //  you can try it with different times, but i have found this time to be optimal
            tmrCloneReset = setTimeout(function() {

                //  Now for your width comparison, pretty straight forward here
                if ($(this).width() < 480) {
                    //  here I create a variable of the original clone,
                    //  I know seeing me clone the clone can seem confusing, here is the reason
                    //  We only want to use ALL new HTML, thus I can't use our old clone variable
                    //  for anything other than Copying "FROM"
                    //  this way we always have fresh HTML to replace the old HTML with!
                    // Make more sense now? if not, please comment 
                    //  and I'll help you wrap your head around it with an analogy or something
                    var tmpClone = clnRoundabout.clone();
                    //  Inserts cloned version with same ID and removes original
                    //  TADA, Fresh new HTML without any of the previous classes or css changes from the plugin tied to it!
                    $('#menuSection').after(tmpClone).remove();
                }
                else {
                    //  Here i'm simply checking to see if the roundabout plugin has already been called on our HTML, 
                    //  if it has, then let's not call it again, 
                    //  remember, as mentioned before, this event can fire up to 1000x a second!
                    if (!$('#menuSection').hasClass('roundabout-holder')) {
                        //  If the class is not existant,then we know the roundabout plugin has not been called!
                        //  Let's call it!
                        $('#menuSection').roundabout(); // or whatever your roundaboutcall is
                    }
                }
            //  Here is the end of the setTimeout function
            //  This is the time I referred to earlier
            //  time here is measured in milliseconds
            //  thus 1 == .001Seconds
            //  and 1000 == 1Seconds
            //  and 10000 == 10Seconds
            }, 250); // Here i'm set to .25Seconds
        });
    })
</script> 
```

~~更多信息将有助于更好地回答这个问题~~

> **简短的回答**[*只是代码*]

```
var clnRoundabout, tmrCloneReset;
$(function() {
    clnRoundabout = $('#menuSection').clone();
    $('#menuSection').roundabout();
    $(window).resize(function(e) {
        clearTimeout(tmrCloneReset);
        tmrCloneReset = setTimeout(function() {
            if ($(this).width() < 480) {
                var tmpClone = clnRoundabout.clone();
                $('#menuSection').after(tmpClone).remove();
            }
            else {
                if (!$('#menuSection').hasClass('roundabout-holder')) {
                    $('#menuSection').roundabout();
                }
            }
        }, 250);
    });
}) 
```

# c# - 如何在不使用代码隐藏的情况下将 XDocument 对象绑定到 Treeview？

> ID：13862801
> 
> 赞同：0
> 
> 时间：2012-12-13T15:13:52.787
> 
> 标签：c#, xaml, mvvm, treeview, linq-to-xml

我尝试在不使用任何代码隐藏的情况下将 XDocument 对象绑定到树视图，因此它符合 MVVM 模式。到目前为止，我还没有想出如何做到这一点。我搜索了很多，看到了很多关于 XDocuments 和 treeviews 的问题，但没有一个真正有帮助，他们中的大多数确实有代码，或者没有（清楚地）解释如何去做。

我以为这很容易

```
<treeview ItemsSource="{Binding Path=TheXDocumentObject, Mode=TwoWay}" /> 
```

但我的树列表保持为空（我 100% 确定 XML 文件已按应有的方式加载到 XDocument 中）。我还找到了 XmlDataProvider，但它的源不允许数据绑定，因为它不是 DependencyProperty 或 DependencyObject。

所以我有点卡在这里，我需要做什么才能将 XDocument 对象绑定到树视图而没有代码隐藏？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:26:02.790

如果没有后面的代码或转换器（或视图模型中的某些代码），这将是不可能的。XDocument 用于 LINQ to Xml，在您阅读文档时没有集合属性，而不是 xmlnodes 的公共集合. 您可以使用 XmlDocumdnt 和 HierarchicalDataTemplate 来执行此操作（不使用任何 c#）

# http - firefox https重定向到http问题

> ID：13862803
> 
> 赞同：1
> 
> 时间：2012-12-13T15:14:04.893
> 
> 标签：http, firefox, https

我们试图将所有主要浏览器的 https 重定向到 http，IE 和 Chrome 工作正常，但 firefox 没有获取代码，也没有显示[http://www.company.com](http://www.company.com)或[https://www.company.com](https://www.company.com)，我们的代码如下：

```
If (Request.ServerVariables("HTTPS") = "on") Then
Response.Expires = 0
Response.Expiresabsolute = Now() - 1
Response.AddHeader "pragma","no-cache"
Response.AddHeader "cache-control","private"
Response.CacheControl = "no-cache"
Response.Status="301 Moved Permanently"
Response.AddHeader "Location", "http://www.company.com/"
Response.End
ElseIf InStr(Request.ServerVariables("SCRIPT_NAME"), "default.asp") > 0 Then
Response.Status="301 Moved Permanently"
Response.AddHeader "Location", "http://www.company.com"
Response.End
Else
Response.ContentType = "text/html"
Response.CharSet = "utf-8"
End If 
```

任何想法让Firefox工作？例如：[https](https://www.amazon.com) ://www.amazon.com和[http://www.amazon.com](http://www.amazon.com)都在 Firefox 上工作。

# asp.net - 重定向到视图文件夹内的 html 页面

> ID：13862805
> 
> 赞同：4
> 
> 时间：2012-12-13T15:14:20.240
> 
> 标签：asp.net, asp.net-mvc-3, routes

假设我们`mypage.html`在 Views 文件夹中（假设是 ASP.NET MVC 3 Web 应用程序）。

如何`mypage.html`从 Action 重定向到页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:18:02.703

您必须在路由中进行设置。

在您的路线配置中：

```
routes.MapPageRoute("HtmlRoute","MyCustomUrl","Path/To/Your/mypage.html"); 
```

MapPageRoute 与您在 MVC 中看到的常规 MapRoute 方法略有不同。它用于使用 Web 表单进行路由，并将与 MVC 路由一起使用。这将映射到特定页面。这是在命名空间`System.Web.Routing`中`System.Web.dll`

和

在您的控制器中：

```
return Redirect("MyCustomUrl"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:25:44.437

我假设您没有使用路由，因此您可以在操作结束时执行以下操作：

```
return Redirect("urlToHtmlPage"); 
```

# jquery - 通过悬停不同的元素来模拟/模拟悬停在另一个元素上/悬停 - jquery？

> ID：13862810
> 
> 赞同：0
> 
> 时间：2012-12-13T15:14:39.527
> 
> 标签：jquery

我正在尝试使用 jquery 但在另一个元素上模拟悬停。

基本上我在下面有我的幻灯片......

```
<div id="slideshow">

...

</div> 
```

我有这些设置...

```
var slider = $('#slideshow').bxSlider({
    autoHover: true 
}) 
```

这些设置只是让幻灯片在`<div id="slideshow">`悬停时暂停。幻灯片放映在您推出时开始播放。

我的问题是，是否有模拟悬停动作`<div id="slideshow">`，而是当下面的这个元素悬停在/悬停时？

```
<div id="slideshow-custom-nav">

... // When this element is hovered in/out, I need it to pause/continue the slideshow. So by simulating a hover on the #slideshow div, this should work hopefully.

</div> 
```

任何建议都是最棒的！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:20:23.087

理论上，是的。您必须使用 jQuery 的[`.trigger()`](http://api.jquery.com/trigger/)方法手动触发悬停事件。

我自己没有使用过 bxSlider，但我相信您必须查找插件是否触发了自定义事件，以便您可以在调用时指定该事件`.trigger()`

**更新**

好的，在快速浏览了 GitHub 上的 bxSlider 代码后，我发现它在整个插件代码中使用了正常的事件。正如您在[第 770 行](https://github.com/wandoledzep/bxslider-4/blob/master/jquery.bxslider.js#L770)看到的那样，插件正在为元素定义处理程序`mouseenter`和事件（在[第 90 行](https://github.com/wandoledzep/bxslider-4/blob/master/jquery.bxslider.js#L90)定义）。`mouseleave``el`

因此，作为有根据的猜测，您可能会尝试在您认为合适的地方自己触发这些事件。就像是：

```
$('#slideshow-custom-nav').on('mouseenter', function(){
    $('#slideshow').trigger('mouseenter');
}).on('mouseleave', function(){
    $('#slideshow').trigger('mouseleave');
}); 
```

# zend-framework - Zend_Navigation 带有动态 URL 参数

> ID：13862818
> 
> 赞同：3
> 
> 时间：2012-12-13T15:15:01.973
> 
> 标签：zend-framework, zend-navigation

我正在努力`Zend_Navigation`使用动态 URL 参数实现面包屑。

简单的场景：想象一个`CompanyController`从URL`viewAction()`获取`id`参数以获取有关特定公司的信息的 a。

```
URL: example.com/company/view/id/4

Desired breadcrumb: Home > Companies > [ Company name ] 
```

我在网上做了一些研究并提出了以下解决方案：在一个`predispatch()`钩子中，我从中获取`id`参数`$_SERVER['REQUEST_URI']`（我们不能为此使用请求对象，因为调度尚未开始）并从数据库中获取该记录。然后我只需将此页面添加到`Zend_Navigation`容器中的根页面。你可以在这篇文章的底部看到它的实现。

我发现这种方法的问题是它不可扩展：

1.  如果每家公司有多个行动怎么办？

    除了`view`ing 公司记录，我们可能还想`edit`( `example.com/company/edit/id/4`) 或对其执行其他操作。当然，我们可以创建一个 switch 语句来检查来自 URL 的操作，但我觉得这是不可扩展的。

2.  如果 URL 中有多个动态参数怎么办？

    对于每个`company`我们还需要管理它的`contacts`（公司所有者、财务官等），所以我们创建了一个`ContactsController`也持有一个`viewAction`和的`editAction`。由于联系人直接与公司相关联，因此我们希望在 URL 和面包屑中也反映这一点：

    ```
    URL: example.com/company/company-id/4/contacts/contact-id/2

    Desired breadcrumb: Home > Companies > [Company name] > Contacts of [Company name] > [Contact name] 
    ```

    我们可以很容易地为此设置一条路线。`id`但是现在我们必须从 URL中获取多个。随着 URL 变得更加复杂，此过程可能更容易出错。

**到目前为止，我提出了两个可行的解决方案：**

1.  拉长`Plugin_Navigation::preDispatch()`钩子

    一种可能的解决方案是使用详细的 URL 参数（如`company-id`和`contact-id`）。这样我们就可以提取名称（即`company`）并通过相应的模型类获取记录。

2.  在我们的操作方法中将页面添加到导航容器

    这将是我认为最灵活的选择，但这也意味着我们不能再从中心点管理我们的面包屑，这是一个严重的缺点。

我已经进行了大量研究，但似乎没有针对此问题的开箱即用解决方案。任何帮助将不胜感激。

**`Plugin_Navigation::preDispatch()`前面提到的钩子：**

```
class Plugin_Navigation extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch()
    {
        $view       = Zend_Controller_Action_HelperBroker::getExistingHelper('ViewRenderer')->view;
        $config     = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml','nav');
        $container  = new Zend_Navigation($config);

        $urlParts   = explode('/', ltrim($_SERVER['REQUEST_URI'], '/'));
        $pos        = array_search('id', $urlParts);

        if ($pos !== FALSE)
        {
            $id         = $urlParts[$pos + 1];

            $model      = new Model_Company();
            $company    = $model->fetchOne($id);

            $rootPage   = $container->findOneBy('controller', 'company');

            $rootPage->addPage(new Zend_Navigation_Page_Mvc(array(
                    'controller' => 'company',
                    'action'     => 'view',
                    'label'      => $company->name
                )));

            $view->navigation($container);
        }
    }
} 
```

**关于这个主题的一些参考资料：**

*   [ZF 参考指南中的 Zend_Navigation](http://framework.zend.com/manual/1.12/en/zend.navigation.html)
*   [在运行时动态添加页面到 Zend_Navigation 容器](http://www.evilprofessor.co.uk/236-dynamically-add-pages-to-zend_navigation-container-at-runtime/)
*   [使用 XML 文件将 url 参数传递给 Zend_Navigation](https://stackoverflow.com/questions/4123300/passing-url-parameters-to-zend-navigation-using-an-xml-file)
*   [Zend_Navigation 的提示和技巧](http://juriansluiman.nl/en/article/109/tips-and-trics-for-zend_navigation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:18:15.200

您可以通过在 bootstrap.php 文件中**引导前端控制器来解决这个问题**

在 bootstrap.php 文件中添加：

```
public function _initRequest()
{
    $this->bootstrap('frontController');
    $front = $this->getResource('frontController');
    $front->setRequest(new Zend_Controller_Request_Http());

    $request = $front->getRequest();
} 
```

然后在插件中通过**preDispatch**函数中的**请求对象：**

 **```
class Your_Controller_Plugin_PluginName extends Zend_Controller_Plugin_Abstract
{
     public function preDispatch(Zend_Controller_Request_Abstract $request)
     {
           $MyController =$request->getControllerName();
           $MyAction     =$request->getActionName();
           $MyParams     =$request->getParams(); 

    //now you can go ahead with implementing your breadcrumb

     }
} 
```**

# c# - 等待返回任务的方法 - 永远旋转？

> ID：13862829
> 
> 赞同：1
> 
> 时间：2012-12-13T15:15:39.977
> 
> 标签：c#, async-await, c#-5.0

我有以下 NUnit 测试类：

```
[TestFixture]
public class Tests
{
    async Task<string> GetMessageAsync()
    {
        return "Hello from GetMessageAsync!";
    }

    Task<string> GetMessageTask()
    {
        return new Task<string>(() => "Hello from GetMessageTask!");
    }

    [Test]
    public async void AwaitAsyncMethod()
    {
        Assert.AreEqual("Hello from GetMessageAsync!", await GetMessageAsync());
    }

    [Test]
    public async void AwaitTaskMethod()
    {
        Assert.AreEqual("Hello from GetMessageTask!", await GetMessageTask());
    }
} 
```

第一个测试 AwaitAsyncMethod() 在执行后立即成功完成。第二个测试 AwaitTaskMethod() 永远不会完成。但它确实编译。

为什么第二个测试永远不会完成？如果看起来它实际上不起作用，为什么我可以针对非异步方法编译等待？假设出于某种原因，我想要一个非异步方法来返回一个可以等待的任务 - 我如何更改此代码来完成它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:17:48.487

`new Task(...)`返回一个未启动的`Task`.
在你调用之前`Start()`，该任务永远不会完成，任何等待它的东西都不会运行。

相反，您可以调用`Task.Run()`，它将为您创建和启动任务。

# javascript - 为什么调用方法 stringByEvaluatingJavaScriptFromString 时以下 Objective-C 代码停止？

> ID：13862837
> 
> 赞同：1
> 
> 时间：2012-12-13T15:16:04.237
> 
> 标签：javascript, iphone, objective-c, ios

我在我的 iPhone 应用程序中使用以下 Objective-C 代码：

```
NSLog(@"Before JS string definition");
NSString* jsString = [NSString stringWithFormat:@"alert('ok');"];
NSLog(@"Before JS call");
@try {
    [self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString];
}
@catch (id theException) {
    NSLog(@"%@", theException);
}
NSLog(@"JS call string was: %@", jsString); 
```

当我运行它时，我会进入日志：

```
2012-12-13 16:10:34.743 MyApp.com[2328:907] Before JS string definition
2012-12-13 16:10:34.744 MyApp.com[2328:907] Before JS call 
```

因此，最后一次 NSLog 调用不会被执行。显然，对*stringByEvaluatingJavaScriptFromString*的调用以某种方式挂在那里。日志中没有错误消息。没有例外。没有。

这是怎么回事？我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:28:01.157

我希望 alert() 是一个同步调用，并且在用户关闭消息框之前不会返回。在 JavaScript 完成之前，评估 JavaScript 的方法不会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:32:30.697

I can't see how can you benefit from this code (don't see the purpose, you could generate your own alerts, only if you have some complex javascript logic over just a simple and straight alert();). But note that `stringByEvaluatingJavaScriptFromString` has a limitation of 10secs for execution and 10mb of ram. Maybe something here is the issue, but as far as I could remember it gives an error to the log of some kind if these restrictions met.

# c++ - 为什么我收到“不是类或命名空间”错误

> ID：13862839
> 
> 赞同：3
> 
> 时间：2012-12-13T15:16:09.247
> 
> 标签：c++, scope

我有一个生成错误的文件

```
"Block" is not a class or a namespace name 
```

在线上

```
typedef Block::point point; 
```

但是，我很肯定它是我在下面的文件中创建和#included 的一个类

'纹理.h'。

```
 #pragma once
#include "Block.h"
#include <iostream>
#include <vector>
#include <GL/glut.h>
#include "lodepng.h"

using namespace std;
typedef Block::point point;

class Texture
{

public:
    Texture(int width, int height, string filename);//initialises our texture and loads its pixeldata into a buffer
    Texture(void);
    ~Texture(void);

    void draw(point centerPoint, point dimensions);

    unsigned int w;//width of our imagefile
    unsigned int h;

    GLuint texID;//the ID we will give OGL for this particular texture.

private:
    vector<unsigned char> image;
    void texGLInit();
}; 
```

也只是为了更好地衡量，这里是有问题的 block.h 文件。

```
#pragma once
#include <GL/glut.h> 
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include "Texture.h"

class Block
{

public:
    struct point
    {
        GLfloat x, y;
    };

    enum State  {STATIC, FALLING, SELECTED};

    enum Colour {RED, BLUE, PURPLE, GREEN, YELLOW, DEAD};

    Block(void);
    ~Block(void);

    Block(int gridPosX, int gridPosY, point offset);
    point gridPos;//the blocks designated position in the 8x8 array
    point centerPos;//the blocks coordinates for the actual purpose of drawing

    State blockState;//the state of the block
    Colour blockColour;//the colour of the block

    void move();//checks whether the block is in a falling state and moves it appropriately
    void drawBlock();//no need to include the drawing coords as parameters. the block knows where it should be. The grid will simply tell it to draw itself.

private:
    void fall();//decrements the blocks position
    void assignRandomColour();//assigns a random colour to the block dependant upon its' texture
    void generateWorldPos();//gets our block a center position, for us to later to use to draw it.
    //the above function will also inherently define the size of each cell in the grid. I'm thinking each
    //cell should be 40x40\. So each cell will be offset initially by 20px by 20px. 

    point gridOffset;

}; 
```

我不知道为什么我会为一个肯定存在的类得到这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T15:20:39.467

我看到循环包含：`Block.h`包含`Texture.h`哪些包含`Block.h`。

在这个网站上搜索*“循环头依赖”*，你会看到很多关于这个的话题，你可以在其中找到解决这个难题的解决方案，最常见的是使用类的前向声明和成员数据的指针声明。类的前向声明可帮助您避免包含标题，数据的指针声明可帮助您定义封闭类。这只是一个提示，现在搜索上述主题以获得详细答案。

# sql - 标识规范为否，但错误：无法将值 NULL 插入列 '，

> ID：13862840
> 
> 赞同：1
> 
> 时间：2012-12-13T15:16:19.493
> 
> 标签：sql, insert, identity

我想将文章复制到新集合。

我尝试了一个查询，但显示了以下错误：

> “无法将值 NULL 插入列‘intArticleCollectionId’”

我在互联网上搜索了解决方案。直到现在我有以下查询：

```
DECLARE @lastID int
DECLARE @lastID = Last_ID from LastIdentifiers where Tablename ='WA_ARTICLECOLLECTIONS'

INSERT INTO WA_ARTICLECOLLECTIONS (intArticleCollectionId,intArticleId,intCollectionId,chvArticleNr,chvFabricDescription,inyActive)
SELECT 
    IDENTITY(int, @lastID , 1) AS ID, intArticleCollectionId,intArticleId,4,chvArticleNr,chvFabricDescription,inyActive 
FROM 
    WA_ARTICLECOLLECTIONS 
WHERE intCollectionId = 5 
```

这也对我没有帮助，有人可以告诉我如何改变它。

我知道解决方案是更改设计以将身份设置为 ON，但这对我们来说不是解决方案；-(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T08:00:24.480

正如评论中所说，最好的解决方案是重新设计表格以便从`IDENTITY`类型中受益。但这并不总是可能的，这是我遇到同样问题时的解决方案：

```
DECLARE @lastId   INT
DECLARE @newItems TABLE (id                   INT  IDENTITY(1,1)
                        ,articleId            INT
                        ,collectionId         INT
                        ,articleNr            VARCHAR(20)
                        ,fabricDescription    VARCHAR(256)
                        ,active               BIT)

SET @lastId = (SELECT MAX(AC.intArticleCollectionId)
               FROM WA_ARTICLECOLLECTIONS AC)

INSERT INTO @newItems(articleId, collectionId, articleNr, fabricDescription, active)
SELECT AC.intArticleId
    ,4
    ,AC.chvArticleNr
    ,AC.chvFabricDescription
    ,AC.inyActive 
FROM WA_ARTICLECOLLECTIONS AC
WHERE AC.intCollectionId = 5

INSERT INTO WA_ARTICLECOLLECTIONS (intArticleCollectionId,intArticleId,intCollectionId,chvArticleNr,chvFabricDescription,inyActive)
SELECT @lastId + I.id
    ,articleId
    ,collectionId
    ,articleNr
    ,fabricDescription
    ,active
FROM @newItems I 
```

您可能需要调整 table 的列类型`@newItems`，但目标是向您展示我解决问题的方法。

希望这将帮助您解决您的问题。

# c# - 在 DLL 中创建 BMP 图像

> ID：13862842
> 
> 赞同：0
> 
> 时间：2012-12-13T15:16:38.417
> 
> 标签：c#, image, dll

我需要在 C# 中创建一个非常简单的图表。当您将图像绘制到表单上时，执行此操作的代码非常简单，但我发现很难从我的 DLL 中弄清楚如何执行此操作。

理想情况下，我想使用 System.Drawing 命名空间和 Graphics 类，因为它非常简单，但我怀疑我不能从 C# DLL 原生地使用 System.Drawing。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:24:03.663

你当然可以！您可以像在 EXE 中一样在 DLL 中创建代码。如果需要并从 dll 中启动表单，您可以引用 System.Windows.Forms。这完全取决于您引用的资源。

如果您在表单项目中创建了代码，则可以轻松地将其移动到库项目中。最好的方法是创建一个可以执行此操作的自定义用户控件。有很多教程会告诉你已经完成了。

以下是 DLL 中自定义控件的示例：http: [//www.codeproject.com/Articles/2016/Writing-your-Custom-Control-step-by-step](http://www.codeproject.com/Articles/2016/Writing-your-Custom-Control-step-by-step)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:24:38.587

我在 DLL 中使用 System.Drawing 并且工作得很好。

我用它来绘制自定义图形并将结果保存到 jpg 图形

# php - 在用户注销时删除 PHP cookie

> ID：13862854
> 
> 赞同：1
> 
> 时间：2012-12-13T15:17:01.057
> 
> 标签：php, session, cookies

我开始创建一个登录系统，该系统利用 cookie 实现“记住我”功能。一切正常，但是我在用户注销时无法删除 cookie。

如果用户未选中“记住我”框并成功登录即未创建 cookie，则注销功能按预期工作并加载登录框。

如果他们不执行后者并且用户单击注销按钮，则 cookie 将保留并显示他们仍在登录。

如果有人能阐明为什么 cookie 不会删除，我将不胜感激。

下面是我正在使用的代码：

在用户尝试登录后运行的 PHP 代码：

```
// If the form has been submitted
if(isset($_POST['login'])):

    // Protect from unwanted code/string context
    $username = strip_tags(addslashes(trim($_POST['username'])));
    $string = strip_tags(addslashes(trim($_POST['password'])));
    $remember = strip_tags(addslashes(trim($_POST['remember'])));

    // Pass the returned variables from functions to a local versions
    $password = salting($string);   // Salt Password Preperation
    $link = db_connect();           // DB connection

    // Connect to the database and try to find a login match
    $result = mysqli_query($link,"SELECT * FROM web_users WHERE username='".$username."' AND password='".$password."'");
    $row    = mysqli_fetch_object($result);

    // Create erronous results if submitted data is invalid
    if (mysqli_num_rows($result) !== 1):
        $errmsg[0] = "Invalid Username or Password, please re-try";
    endif;

    $e_login = serialize($errmsg);

    // If validation passes then continue
    if (!$errmsg):
        // Increment the login_count field by 1
        $row->login_count++;
        $count = $row->login_count;

        // Retrieve the date for admin purposes
        $date = date('Y-m-d-h:i:s'); // Y=year (4 digits) m=month (leading zero) h=hour i=minutes s=seconds

        // Salt Password Preperation
        $string = session_id();
        $login_id = salting($string);

        // Connect to the database and update the related row
        $update = mysqli_query($link,"UPDATE web_users
                                      SET login_count='".$count."',
                                          login_last='".$date."',
                                          login_id='".$login_id."',
                                          logged='1'
                                      WHERE id='".$row->id."'")

                                      or die(mysqli_error($link));

        // Create a multi-dimensional session array
        $_SESSION['login'] = array('user'       => $row->display_name,
                                   'id'         => $row->id,
                                   'user_level' => $row->user_level);

        if($remember == 1):
            setcookie("login_user",session_id(),time() + (86400*7)); // 604800 = 1 week
        endif;

        // Free the memory and close the connection
        mysqli_free_result($result);
        mysqli_close($link);

        // Take the user to the successive page if no errors
        header("location: /");
    endif;
endif; 
```

用于创建注销元素的 HTML 代码：

```
<a href="/logout" title="Logout">
    <img src="<? echo ASSETS . IMAGES . ICONS . GENERAL; ?>logout.png" alt="User Logout">
</a> 
```

用户注销时运行的 PHP 代码：

```
function logout() {
    // Load the db connect function to pass the link var
    $link = db_connect();

    if(is_array($_SESSION['login'])):
        // Update the logged field to show user as logged out
        $update = mysqli_query($link,"UPDATE web_users SET logged='0' WHERE id='".$_SESSION['login']['id']."'") or die(mysqli_error($link));

        // Free the memory and close the connection
        mysqli_free_result($update);
        mysqli_close($link);

        // Unset all of the session variables.
        $_SESSION = array();

        // If it's desired to kill the session, also delete the session cookie.
        // Note: This will destroy the session, and not just the session data!
        if(isset($_COOKIE[session_name()])):
            setcookie(session_name(), '', time()-7000000, '/');
        endif;

        // Finally, destroy the session.
        session_destroy();

        // Take the user to the successive page if no errors
        header("location: /");
    endif;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T15:37:36.793

用户在使用记住我复选框登录到您的站点时，将拥有**两个**cookie。默认情况下会话 cookie`PHPSESSID`和记住我 cookie `login_user`。为了删除会话，您只需使用以下代码删除会话 cookie：

```
 if(isset($_COOKIE[session_name()])):
        setcookie(session_name(), '', time()-7000000, '/');
    endif; 
```

问题是，除此之外，您还需要使用以下代码取消设置记住我的 cookie。

```
 if(isset($_COOKIE['login_user'])):
        setcookie('login_user', '', time()-7000000, '/');
    endif; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:23:17.740

要删除 cookie，您应该将过期日期设置为过去：

```
setcookie('login_user', '',time() - 3600); 
```

您有此规则，但显式添加了路径参数，尽管您在设置 cookie 时没有使用路径，这可能是问题所在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:23:49.647

我会冒险猜测您的代码

```
 if(isset($_COOKIE[session_name()])):
      setcookie(session_name(),'',time()-7000000,'/');
 endif; 
```

是你的问题。很可能`isset`返回错误。如果可能，我会将其从`if`声明中删除。

此外，如下评论中所述。你用了`session_start()`吗？上面的代码中没有引用它。这将导致`session_name()`返回空。

# objective-c - 试图继承 UIApplication 并在委托中实现它，但被委托弄糊涂了

> ID：13862855
> 
> 赞同：0
> 
> 时间：2012-12-13T15:17:04.623
> 
> 标签：objective-c, ios, delegates, subclass

我正在尝试遵循[如何拦截 UITextView 中的点击链接中接受的答案中的建议？](https://stackoverflow.com/questions/2543967/how-to-intercept-click-on-link-in-uitextview)，但我设法让自己很困惑，部分原因是我不太了解委托，到现在我已经添加和删除了很多我不知道发生了什么的事情。

这是`GHFeedback.h`：

```
#import <UIKit/UIKit.h>
#import "GHApplicationSubclassed.h"

@interface GHFeedback : UIViewController <UIApplicationDelegate>

@property (nonatomic, strong) UITextView *feedbackInstructions;
@property (nonatomic, strong) GHApplicationSubclassed *ghAppSub;

@end 
```

这是`GHFeedback.m`：

```
#import "GHFeedback.h"
#import <MessageUI/MessageUI.h>
#import "GHApplicationSubclassed.h"

@interface GHFeedback () <UIApplicationDelegate, MFMailComposeViewControllerDelegate>

@end

@implementation GHFeedback

@synthesize feedbackInstructions, ghAppSub;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.ghAppSub.delegate=self;
}
return self;
}

-(void)openURL:(NSURL *)url //This is the method I'm trying to add--the text set for self.feedbackInstructions in IB contains an email address, and I want a subject line to appear automatically if the user sends an email.
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:@"feedback on Haiku"];
    [self presentViewController:mailer animated:YES completion:NULL];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

这是`GHApplicationSubclassed.h`：

```
#import <UIKit/UIKit.h>

@interface GHApplicationSubclassed : UIApplication <UIApplicationDelegate>

@property (nonatomic, strong) GHApplicationSubclassed *appli;

@end 
```

这是`GHApplicationSubclassed.m`：

```
#import "GHApplicationSubclassed.h"

@implementation GHApplicationSubclassed

@synthesize appli;

-(BOOL)openURL:(NSURL *)url
{
    if  ([self.delegate openURL:url]) //This line gets an error, "no known instance method for selector 'openURL'
        return YES;
    else
        return [super openURL:url];
}

@end 
```

我很想明确说明如何解决这个问题。（“显式”是指，与其说“然后实现委托方法”，不如说“然后将此方法添加到`GHFeedback.m`: `-(void)openURL {[actual methods, etc., etc.]}`.

非常感谢你的帮助。

**编辑：**我想要发生的是这个。

`UITextView`视图控制器中显示的内容`GHFeedback`是“如果您对应用程序有任何疑问/问题，请给我发电子邮件”，然后提供我的电子邮件地址。现在，当用户按下该电子邮件地址时，iOS 邮件程序会打开一封空的草稿电子邮件。我想提供打开自动主题行“对俳句的反馈”的电子邮件草稿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:42:07.563

```
if  ([self.delegate openURL:url]) 
```

: 的返回类型`openURL`是`void`，所以在这个 if 语句中实际上没有什么要检查的。

也许你想使用

```
if ([(GHFeedback *)self.delegate respondsToSelector:@selector(openURL:)]{
    [(GHFeedback *)self.delegate openURL:url]; 
    return YES;
} 
```

如果正确的`openURL:`仍然不会被解雇，则`self.delegate`必须为零。

# objective-c - selectedSegmentIndex 始终为 -1

> ID：13862858
> 
> 赞同：1
> 
> 时间：2012-12-13T15:17:21.480
> 
> 标签：objective-c, ios, uisegmentedcontrol

我做了一个自定义`UISegmentedControl`，我在 init 上添加了子视图按钮，并为它们`selectedSegmentIndex`在每个目标操作中设置的每个按钮添加了目标。但是当我`NSLog`设定值之后。我发现它们总是-1。有谁知道这件事。请帮忙。

这是动作函数中的代码：

```
[self setSelectedSegmentIndex:tabID];
[self sendActionsForControlEvents:UIControlEventValueChanged];
NSLog(@"selected: %d", self.selectedSegmentIndex); 
```

# button - 在 twitter bootstrap Modal 中单击主按钮时的自定义回调 url

> ID：13862860
> 
> 赞同：0
> 
> 时间：2012-12-13T15:17:22.833
> 
> 标签：button, dynamic, twitter-bootstrap, callback, modal-dialog

我有一个引导页面，其中列出了表格中的项目。每个项目都有自己的删除链接，用于启动模式。

```
<a href="#modalDel" data-idtodelete="<?php echo $value->id; ?>" class="deletelink">
Delete this item
</a>

...

jQuery("a.deletelink").click(function(event){
    var id2del = $(this).data('idtodelete');
    jQuery("#myModalLabel").html("Delete item: "+id2del); //works great
    jQuery('#modalDel').modal('show');
}); 
```

我可以轻松地将数据传递给模态，但现在我必须在模态中创建主按钮以反映动态 url 并在单击此按钮时（仅）调用它

有任何想法吗？谢谢

*PS：不能为此使用隐藏事件，因为模态也可以通过取消按钮隐藏。此外，模态应该在调用 dyn 之后/之前关闭。删除主按钮的url*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:35:14.763

我会冒险猜测一下。没有测试，因为我不太确定设置。

```
var $ = jQuery; // using as a shortcut

$('#modalDel').on('show', 
       function()  {
          // Composes delete URL with arguments
          var dynUrl = composeUrl(args); 
          // assuming the modal button is an anchor element
          $('#modalButton').attr('href', dynUrl); 

          // Also closes the modal box after being clicked
          $('#modalButton').on('click', 
              function(e) { 
                   $('#modalDel').modal('hide');
              });

       }); 
```

# c# - .NET 和 SQL Server 是否有免费的用户并发框架？

> ID：13862861
> 
> 赞同：-3
> 
> 时间：2012-12-13T15:17:27.357
> 
> 标签：c#, .net, sql-server

几天前我开始想我可以编写一个简单的工具包来锁定（限制访问）和解锁我们应用程序中的资源。因此，例如通过打开一个项目，它会以某种方式被该用户锁定，然后当下一个人来打开它时，他们将无法修改它。或者一个操作需要写入某些文件并从某些文件中读取，因此在执行操作之前它会锁定它们（在数据库中的某些元数据记录中）。

现在我已经完成了相当多的设计，很明显实际上有很多小问题：我现在处于描述我需要的功能的情况下我定义了 5 种不同类型的锁（所有者, write, read-only, delete, no-delete) 并且需要在应用于同一对象和父子层次结构的上下文中指定它们之间的关系。

这将转化为大量代码来维护和测试，鉴于此，我想知道是否有任何可用的免费 .NET 库可以开箱即用地执行此类操作（我下周圣诞节假期休息，我认为其他开发人员之一插入库而不是完成我的takelit并将其插入应用程序会更容易）。

我们正在使用 C# .NET 和 SQL Server 2008 R2。

更新：资源是指数据库中元数据引用的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:24:32.487

很有可能你过度设计了。数据库意味着可以同时访问，并使用事务进行关键相互依赖的操作。您应该重新考虑您的数据流并允许多个用户一起工作。例如，如果用户下载了他们正在处理的项目的各个部分，然后一次全部提交。当然可能需要一些合并。根据您的任务，您还可以使用版本控制系统 (SharpSVN) 代替 DB 或与 DB 一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:36:37.807

您正在描述一种悲观的锁定策略；这最好通过将您的代码加入数据库事务（也称为分布式事务）来处理，这样您的代码就可以提交/回滚事务，从而释放任何锁。这可以使用 COM+ 事务来实现。但是，使用乐观锁定策略可能会更好。有关更详细的答案，请参见[此处。](https://stackoverflow.com/questions/129329/optimistic-vs-pessimistic-locking)

# sass - 更改 SASS 的 sass-cache 位置

> ID：13862862
> 
> 赞同：8
> 
> 时间：2012-12-13T15:17:34.660
> 
> 标签：sass, zurb-foundation

[从](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#cache_location-option)我看到的文档中，您可以更改 SASS 缓存的位置。

但是，我不确定要使用的确切语法。我有一个 Zurb Foundation 项目，并附带一个`config.rb`文件。我认为这是需要更新以更改缓存文件的位置。

移动缓存需要放入此文件的正确设置是什么？我希望它驻留在`c:\temp`（我在 Windows 环境中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T19:23:03.977

只需添加此行（或添加`:cache_path`到您的实际`sass_options`）：

```
sass_options = {:cache_path => "C:/temp"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T09:04:58.360

在您的“config.rb”中添加这一行：

```
cache_path = "C:/temp/.sass-cache" 
```

如果您使用“C:/temp/”，您最终会得到几个名称基于哈希码的文件夹。如果您以后不知道它们是什么，这可能会让人感到困惑。

# iphone - 关于 AudioQueue 的 XCODE AVAudioPlayer 错误：请求从包含 1152 帧的缓冲区中修剪 0 + 1676 = 1676 帧

> ID：13862870
> 
> 赞同：3
> 
> 时间：2012-12-13T15:17:57.737
> 
> 标签：iphone, ios, xcode, avaudioplayer, audioqueue

我试图在不同的时间播放不同的声音。基于按钮按下或计时器超时等。这是代码。

播放声音功能：

```
-(void)myPlaySound:(NSString *)mySoundFile NumberOfLoops:(int)loopsCount ofType:(NSString *)fileType
{

NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                           pathForResource:mySoundFile
                                           ofType:fileType]];

myAudio  = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];

myAudio.volume = audioVolume;

myAudio.delegate = self;

myAudio.numberOfLoops = loopsCount;
[myAudio prepareToPlay];
 [myAudio play];

} 
```

停止声音：

```
 if([myAudio isPlaying]){
        [myAudio stop];
        myAudio.currentTime = 0;
    } 
```

问题：有时我收到此错误：AudioQueue: request to trim 0 + 1676 = 1676 frames from buffer contains 1152 frames

只要调用 [myAudio play]，就会​​发生错误。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:23:17.827

我遇到了这个问题，就像 Radu 说的那样，我似乎遇到的问题是试图在它已经播放的时候播放一个声音。如果声音被另一种声音取代，我认为这没什么大不了的，但请注意不要在已经播放的同时尝试播放相同的声音。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T17:44:06.427

有点晚了，但如果你还没有解决你的问题，这可能会有所帮助。

如果你`myAudio`在玩之前停下来，`myAudio`你可以消除这个问题。

所以你在哪里：

```
 myAudio.numberOfLoops = loopsCount;
    [myAudio prepareToPlay];
    [myAudio play]; 
```

尝试将其更改为：

```
 [myAudio stop];
    myAudio.numberOfLoops = loopsCount;
    [myAudio prepareToPlay];
    [myAudio play]; 
```

# iphone - Xcode在可以水平滚动的表格单元格中添加多图像

> ID：13862874
> 
> 赞同：0
> 
> 时间：2012-12-13T15:18:06.317
> 
> 标签：iphone, xcode, tableview, tableviewcell

我正在制作一个餐厅应用程序，让我可以在表格单元格中显示 1 家带有许多图像的餐厅。我知道如何自定义表格单元格。问题是我不知道如何将许多图片添加到可以水平滚动以一张一张查看图像的表格单元格中。我在表格单元格中添加了一个滚动视图，然后在滚动中添加了图像，但是当我滚动图像时它不起作用。

任何人都可以帮助给我一些提示吗？

非常感谢，广

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:24:23.827

在 UITableViewCell 上添加一个 UIScrollView，然后用图像填充滚动视图。互联网上有很多关于如何做到这一点的教程。

# wcf - FaultContract继承

> ID：13862875
> 
> 赞同：4
> 
> 时间：2012-12-13T15:18:08.093
> 
> 标签：wcf, inheritance, datacontract

我有几个 WCF 服务合同，所有这些合同都包含完全相同的方法`StopOperation`，具有相同的签名：

```
[ServiceContract]
public interface IMyServiceA
{
    [FaultContract(typeof(ServiceAError))]
    [OperationContract]
    void StopOperation(TaskInformation taskInfo);

    // other specific methods
} 
```

我希望能够做的是提取`StopOperation`到一个接口中`IStoppable`，并让我的所有服务都继承这个操作。但是，我对`FaultContract`定义有疑问，因为它定义了具体的故障类型。

是否`FaultContract`可以引用抽象`ErrorBase`类型，并以某种方式指定具体类型`KnownContract`？有一些像：

```
[ServiceContract]
public interface IStoppable
{
    [FaultContract(typeof(ErrorBase))]
    [OperationContract]
    void StopOperation(TaskInformation taskInfo);
} 
```

无论我在哪里尝试指定`KnownContract`，它似乎都没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:39:35.990

您是否尝试过使用泛型类型？

例如：

```
[ServiceContract]
public interface IStoppable<T> where T : ErrorBase
{
    [FaultContract(typeof(T))]
    [OperationContract]
    void StopOperation(TaskInformation taskInfo);
} 
```

那你会说

```
[ServiceContract]
public interface IMyServiceA : IStoppable<ServiceAError>
{
    // other specific methods
} 
```

尚未对此进行测试，但我看不出有任何理由为什么这不起作用。

# linux - 可以grep和修改/触摸文件修改日期吗？

> ID：13862876
> 
> 赞同：0
> 
> 时间：2012-12-13T15:18:17.467
> 
> 标签：linux

我正在使用以下内容在多个文件中查找字符串的所有实例并删除找到它们的行。

```
find . -maxdepth 1 -xdev -type f -exec sed -i '/teststring/Id' {} \; 
```

我不想更改文件的修改日期，因为这会影响文件在不相关应用程序中的显示顺序。所以我想我可以在执行 sed 之前获取日期，然后触摸文件并在命令末尾替换旧的修改日期。如果可能的话，我希望将所有这些都集成到一个命令中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:25:51.783

尝试以下命令：

```
find . -maxdepth 1 -xdev -type f -exec sed -i.bak '/teststring/Id' {} \; -exec touch -r {}.bak {} \; -exec rm {}.bak \; 
```

该`find`命令对找到的每个文件执行三个步骤：

1.  `sed`更改文件并创建原始文件的备份（带有`.bak`扩展名）
2.  `touch`将新文件的时间戳设置为与备份相同
3.  `rm`删除备份

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:39:52.297

```
for file in $(find . -maxdepth 1 -xdev -type f )
do
   mod_time=$(stat --format=%y $file)
   perl -wpl -i -e 's!teststring!!' $file
   touch -d ''$mod_time'' $file 
```

完毕

# xml - 在非常简单的构建结构中使用 etree 但出现属性错误

> ID：13862877
> 
> 赞同：1
> 
> 时间：2012-12-13T15:18:17.920
> 
> 标签：xml, elementtree

参考：使用[http://eli.thegreenplace.net/2012/03/15/processing-xml-in-python-with-elementtree/](http://eli.thegreenplace.net/2012/03/15/processing-xml-in-python-with-elementtree/)

错误根没有属性扩展

```
 import xml.etree.cElementTree as ET
        import sys
        a = ET.Element('quotationinput version="1.0"')
        b = ET.SubElement(a, 'authorisation')
        c = ET.SubElement(b, 'password')
        c.text = pwd
        d = ET.SubElement(a, 'productdetail')
        e = ET.SubElement(d, 'producttype')
        e.text = ""
        f = ET.SubElement(d, 'accommodationCode')
        f.text = ""
        g = ET.SubElement(d, 'startDate')
        g.text = start_date
        h = ET.SubElement(d, 'duration')
        h.text = duration
        i = ET.SubElement(d, 'unitCode')
        i.text = unit
        j = ET.SubElement(a, 'partydetail')
        k = ET.SubElement(j, 'adultCount')
        k.text = adults
        l = ET.SubElement(j, 'childCount')
        l.text = children
        m = ET.SubElement(j, 'babyCount')
        m.text = baby
        n = ET.SubElement(j, 'petCount')
        n.text = pets
        root = ET.Element('root')
        root.extend([a])
        tree = ET.ElementTree(root)
        tree.write(sys.stdout) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:10:23.013

extend 方法是 2.7 中的新方法，因此您可能使用的是旧版本的 python。请参阅[http://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)

要解决此问题，您可以使用这样的 append 方法，它也可以很好地工作：-

```
root.append(a) 
```

这是您尚未定义的变量的虚拟值的输出：-

```
% python.exe s.py
<root><quotationinput version="1.0"><authorisation><password>pwd</password></authorisation><productdetail><producttype /><accommodationCode /><startDate>start_date</startDate><duration>duration</duration><unitCode>unit</unitCode></productdetail><partydetail><adultCount>adults</adultCount><childCount>children</childCount><babyCount>baby</babyCount><petCount>pets</petCount></partydetail></quotationinput version="1.0"></root> 
```

# puppet - Vagrant puppet 更改 pp exec 中文件夹的所有者

> ID：13862879
> 
> 赞同：2
> 
> 时间：2012-12-13T15:18:36.757
> 
> 标签：puppet, vagrant, chown

我正在尝试开发一个 CakePHP 应用程序，并且我正在使用 Vagrant 来运行一个测试环境。但是，我在浏览器中收到此错误

```
Warning (2):
  session_start() [http://php.net/function.session-start]:
    open(/var/lib/php/session/sess_speva7ghaftl8n98r9id5a7434, O_RDWR) failed:
      Permission denied (13) [CORE/Cake/Model/Datasource/CakeSession.php, line 614] 
```

我可以通过 SSH 连接到 vm 并执行

```
[vagrant@myserver ~]$ sudo su -
[root@myserver ~]# chown -R vagrant. /var/lib/php/session/ 
```

我不想每次重新启动虚拟机时都必须这样做，所以我尝试将其添加到 myserver.pp

```
exec { 'chown':
  command => 'chown -R vagrant. /var/lib/php/session/',
  path => '/bin',
  user => 'root'
} 
```

但是在启动虚拟机时出现错误...

```
err:
/Stage[main]/Myserver/Exec[chown]/returns: change from notrun to 0 failed:
  chown -R vagrant. /var/lib/php/session/
  returned 1 instead of one of [0] at /tmp/vagrant-puppet/manifests/myserver.pp:35 
```

我无法`exec`在互联网上找到任何有用的使用示例，而且我之前从未使用过 Vagrant 或 Puppet，所以上面的代码只是我能想到的最好的猜测，如果这是一个简单的修复，我深表歉意让这个工作。

我已经`which chown`在 vm 中验证了路径是`/bin`，并且该命令与我自己在 vm 中运行它时的命令完全相同。我认为是用户造成了问题。我有那条线吗？甚至可以从 .pp 文件以 root 身份执行命令吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T16:22:33.753

使用 exec 时，通常必须输入所执行命令的完整路径。因此，如果您将命令更改为

```
exec { 'chown':
  command => '/bin/chown -R vagrant:vagrant /var/lib/php/session/',
  path => '/bin',
  user => 'root'
} 
```

它应该工作海事组织。

但是，这在很大程度上取决于您如何安装应用程序。如果应用的 setup/start 也是用 Puppet 管理的，你也可以用 Puppet 管理你感兴趣的目录，像这样

```
file { "/var/lib/php/session" : 
  ensure => directory,
  group => "vagrant",
  owner => "vagrant",
  recurse => true,
} 
```

在你启动你的应用程序之前。这将更像是 Puppet 方式，因为您管理资源而不是执行命令。但是，通常 /var/lib/... 不应由 root 以外的人拥有。

因此，您可能应该查看您的应用程序是如何启动的，并使其以其他用户或 root 身份启动。如果它以 exec 开头，您可以添加一个附加属性

```
user => root 
```

到它，这也应该做的伎俩。

# powershell - powershell get-adgroups 返回错误的结果

> ID：13862881
> 
> 赞同：1
> 
> 时间：2012-12-13T15:18:39.950
> 
> 标签：powershell, active-directory

此处 get-adgroups 在从脚本查询时返回 false，而在使用相同的 PowerShell ISE 窗口手动运行时返回 true。请参阅以下产生错误的代码。存在组、OU 和 DN。很可能没有错字。可以通过手动运行命令来重现（见下文），效果很好。

```
Import-Module ActiveDirectory
$Group="ProductInternalInstallProductOnNextLogin"
$BaseDN="OU=Product,DC=int,DC=Domain,DC=de"
write-host "get-adgroup -Filter DistinguishedName -eq CN=$Group,$BaseDN"
$Result=get-adgroup -Filter {(DistinguishedName -eq "CN=$Group,$BaseDN")}
if($Result)
{
    write-host "Group $Group found"
}
else
{
    write-host "Group $Group not found, trying to create $Group"
    New-ADGroup -path "$BaseDN" -GroupScope Global -name $Group
    if (!$?)
    {
        write-host "ERROR creating new group $Group"
        exit
    }
} 
```

这会产生以下输出，您可以在其中看到错误：

```
____________________________________________________________________________________________________________________________________________________________________________________________________________________
PS C:\Users\MyName.INT> G:\DevPath\Tools\PowerShell-Scripte\Unbenannt2.ps1
get-adgroup -Filter DistinguishedName -eq CN=ProductInternalInstallProductOnNextLogin,OU=Product,DC=int,DC=Domain,DC=de
Group ProductInternalInstallProductOnNextLogin not found, trying to create ProductInternalInstallProductOnNextLogin
New-ADGroup : Die angegebene Gruppe ist bereits vorhanden
Bei G:\DevPath\Tools\PowerShell-Scripte\Unbenannt2.ps1:13 Zeichen:16
+     New-ADGroup <<<<  -path "$BaseDN" -GroupScope Global -name $Group
+ CategoryInfo          : NotSpecified: (CN=ProductInte...nt,DC=Domain,DC=de:String) [New-ADGroup], ADException
+ FullyQualifiedErrorId : Die angegebene Gruppe ist bereits vorhanden,Microsoft.ActiveDirectory.Management.Commands.NewADGroup

ERROR creating new group ProductInternalInstallProductOnNextLogin

____________________________________________________________________________________________________________________________________________________________________________________________________________________ 
```

如果我只在组不存在的情况下运行它，New-ADGroup 怎么会失败？PowerShell 在此处以德语运行，因此错误消息“New-ADGroup : Die angegebene Gruppe ist bereits vorhanden”表示“该组已存在”。

为了验证这一点，我在控制台中手动运行了它，它运行良好：

```
PS C:\Users\MyName.INT> write-host "the following command was run manually from the commandline of the PowerShellISE"
$Result=get-adgroup -Filter {(DistinguishedName -eq "CN=ProductInternalInstallProductOnNextLogin,OU=Product,DC=int,DC=Domain,DC=de")}
write-host $Result 
```

产生正确的输出：

```
the following command was run manually from the commandline of the PowerShellISE
CN=ProductInternalInstallProductOnNextLogin,OU=Product,DC=int,DC=Domain,DC=de 
```

在我的挣扎中我也尝试过

```
try {get-adgroups [...]} catch {new-adgroup[...]} 
```

但这也没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:32:43.510

您是否尝试在 Get-ADGroup 命令之外为您的目标组提取字符串连接？我实际上能够从我的 PowerShell ISE 会话中复制您的问题。当我更新“过滤器”时，它清除了一切，我能够成功检索信息。

原来的：

```
$Group  = "ProductInternalInstallProductOnNextLogin"
$BaseDN = "OU=Product,DC=int,DC=Domain,DC=de"
$Result = get-adgroup -Filter {(DistinguishedName -eq "CN=$Group,$BaseDN")} 
```

修改的：

```
$Group  = "ProductInternalInstallProductOnNextLogin"
$BaseDN = "OU=Product,DC=int,DC=Domain,DC=de"
$Target = "CN=" + $Group + "," + $BaseDN
$Result = get-adgroup -Filter {DistinguishedName -eq $Target} 
```

# actionscript-3 - Flash builder / Flex 移动标签栏没有容器和自定义功能

> ID：13862883
> 
> 赞同：1
> 
> 时间：2012-12-13T15:18:44.020
> 
> 标签：actionscript-3, apache-flex, mobile, air, flex4.5

我正在将 Flash builder 4.6 中的应用程序开发为 Flex Mobile 项目。

我在 ViewNavigatorApplication 中显示了 4 个不同的视图。其中一个视图需要在屏幕底部具有选项卡式菜单栏。该标签栏需要控制列表元素的排序方法。我可以使用定制的标签栏，但我真的想要和 TabbedViewNavigator 一样的外观和感觉。做这样的标签栏我有什么选择？

我应该使用 TabbedViewNavigator 作为应用程序容器并开始根据需要为每个视图显示/隐藏选项卡栏（然后我必须覆盖选项卡按钮处理程序，以便它不会更改视图而是进行排序）还是有办法提取选项卡栏从 TabbedViewNavigator 并简单地将其添加到视图之一？

# uml - 这份合同要写什么

> ID：13862891
> 
> 赞同：2
> 
> 时间：2012-12-13T15:18:53.440
> 
> 标签：uml, ooad, contracts

我正在设计一个学术决策支持系统。我必须为该项目编写文档。我坚持的部分是写合同。

我有一个用例**Generate custom reports**。

用户将与系统进行的交互是`setParametersforReport()`。

在此函数中，他将设置属性，如`student_rollNumber`或`marks`，或`warning count`他想在报告中看到的任何其他内容。

但是我很困惑在**合同的后期条件**中写什么。

我应该提到的三件事是：

1.  创建的实例
2.  协会成立或破裂
3.  属性已更改

我不知道该写什么以及如何解释，因为实际上没有创建任何内容。我在数据库中有我想要的所有数据，并且我在没有类的情况下访问它们。我很困惑，因为无法创建数据库实例。

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:48:31.477

后置条件用于指定操作执行结束时系统的状态。在您的情况下，由于您没有修改数据库（并且您也没有存储报告实例），因此系统最后的状态看起来与开始的状态相同。因此，我看不出为此操作定义合同的意义。

# ios - 在实体错误中找不到密钥路径，但我可以插入数据存储

> ID：13862892
> 
> 赞同：1
> 
> 时间：2012-12-13T15:18:53.443
> 
> 标签：ios, core-data, runtime-error

我收到此错误：

> 核心数据数据存储丢失获取错误：'NSInvalidArgumentException'，原因：在实体 <NSSQLEntity FlowData id=1> 中找不到 keypath flowData.flowAmount

尝试将核心数据存储中的数据加载到表格视图中时。

在更改数据模型并将其还原后，从模拟器中删除应用程序后，下次运行应用程序时，将重新创建 sqlite 数据库。

我能够插入数据库。这个转储显示了我刚刚输入的记录：

```
INSERT INTO "ZFLOWDATA" 
VALUES(1,1,1,NULL,8.0,376884478.384176,376884471.83175,8.0); 
```

但是，当我尝试从数据存储中读取时，出现上述错误。

这是我尝试加载数据时的相关代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSError *error;
     if (![[self fetchedResultsController] performFetch:&error]) {
          NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
          exit(-1);  // Fail
     }
    self.title = @"Flow Data Items";
} 
```

和

```
- (NSFetchedResultsController *)fetchedResultsController {

    jhsAppDelegate *appDelegate = (jhsAppDelegate *)[[UIApplication sharedApplication]delegate];

    managedObjectContext = [appDelegate managedObjectContext];

    if (fetchedResultsController != nil) {
        return fetchedResultsController;

    }
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"FlowData" inManagedObjectContext:managedObjectContext];

    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"FlowData.flowAmount"
                                                         ascending:NO];

    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];    
    [fetchRequest setFetchBatchSize:20];
    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:managedObjectContext sectionNameKeyPath:nil
                                                   cacheName:@"Root"];

    self.fetchedResultsController = theFetchedResultsController;
    self.fetchedResultsController.delegate = self;
    return fetchedResultsController;
} 
```

这是我的数据模型：

![在此处输入图像描述](../Images/07b9e6994a0893654f4219607d16ca2e.png)

最后，这是我的实体数据模型类代码：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface FlowData : NSManagedObject

@property (nonatomic, retain) NSNumber * flowAmount;
@property (nonatomic, retain) NSDate * flowEnteredDateTime;
@property (nonatomic, retain) NSDate * flowOccurrenceDateTime;
@property (nonatomic, retain) NSNumber * flowScheduledFrequencyMinutes;
@property (nonatomic, retain) NSNumber * flowUrgency;

@end 
```

这一定与我如何尝试读取数据有关，因为我能够在另一个视图控制器上插入一行，因为我相信`FlowData.flowAmount`实体上确实存在该行，因为它被插入到实体中。

有任何想法吗？.h 文件中列出属性的顺序是否必须与实际数据模型中的顺序相匹配？我的数据类型匹配吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:34:48.237

您的 sortDescriptor 的键应该是 just `flowAmount`。
无需预先添加实体名称。

PS：类中属性的顺序无关。您的数据类型匹配 (`float`和`NSNumber`)。

# backbone.js - Backbonejs - 模型中的更改应该导致路由更改，还是所有更改都应该首先通过路由？

> ID：13862893
> 
> 赞同：1
> 
> 时间：2012-12-13T15:18:54.090
> 
> 标签：backbone.js

当模型更改时，我会更新路由（它有一个包含应用程序当前状态的 url）。

当访问一个 url（或按下返回）时，我从路由更新模型。

这给我带来了循环逻辑问题，我无法理解。事情被无缘无故地改变了两次。

将所有内容都基于路线并使用它来更新模型是否正常？有两个型号正常吗？什么是正常的？

任何帮助或建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:36:12.153

我不建议您按照您的方式使用路由器。一般来说，路由动作不应该改变模型状态。一般来说，`HTTP GET`操作不应该有副作用。

路由器应该用于在单页应用程序的不同页面之间导航。模型更改应该直接从处理用户输入的视图代码中触发。假设您有一个 model`User`和 view `UserView`，该视图可以像这样工作：

```
var UserView = Backbone.View.extend({
    events: {
        "click #save", "save"
    },

    initialize: function(options) {
        this.model = options.model;
    },

    render: function() {
        //your render code here
    },

    save: function() {
        var fields = {
            name: this.$("#name").val();
            email: this.$("#email").val();
        };

        this.model.save(fields , {
            //after save go back to users page, or whatever
            success: function() { window.location.hash = "/users"; },
            error: this.displayError
        });
    }
}); 
```

Backbone 并不是真正的 MVC 框架，因此不应将路由器视为纯控制器。即使您这样做了，更改路由操作中的状态也将等同于更改 MVC 控制器`GET`端点中的状态 - 坏主意。

如果你想坚持纯 MVC 模式，你应该实现自己的控制器层，或者看看除了 Backbone 之外的另一个层。

# android - 从微调器调用 AsyncTask

> ID：13862902
> 
> 赞同：0
> 
> 时间：2012-12-13T15:19:20.650
> 
> 标签：android, android-asynctask

我正在尝试从微调器调用 AsyncTask （取决于选择的选项将发送一些东西或其他东西），但是我在 AsyncTask 类中的方法遇到问题，不会让我正确运行它。

我收到以下错误消息：

> Conexion 类型中的方法 setOnResultsListener(OnTaskCompleted) 不适用于参数（新的 AdapterView.OnItemSelectedListener(){}）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:25:03.953

你有没有尝试过，

```
 TextView item_clicked = (TextView) v; 
     String item_name = item_clicked.getText().toString(); 
     new Connection().execute(item_name); 
```

这会将您的微调器数据传递给 AsyncTask。应该在您的 onItemSelected 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:10:45.047

在您的 AsyncTask 类中，更改此

```
public void setOnResultsListener(OnTaskCompleted listener) {
    this.listener = listener;
} 
```

对此：

```
public Conexion(OnTaskCompleted listener) {
    this.listener = listener;
} 
```

在你的 MainActivity 中，改变这个

```
Conexion conexion = new Conexion();
conexion.setOnResultsListener(this);
conexion.execute("tipo"); 
```

对此：

```
new Conexion(MainActivity.this).execute("tipo"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:15:45.007

尝试这个

```
conexion.setOnResultsListener(MainActivity.this); 
```

# c# - 如何读取上传的 CSV 文件而不将其保存到服务器？

> ID：13862907
> 
> 赞同：19
> 
> 时间：2012-12-13T15:19:35.163
> 
> 标签：c#, csv

大家好，我有这种格式的 CSV 文件：

```
**CSV Format1**

  ||OrderGUID||OrderItemID||Qty||SKUID||TrackingNumber||TotalWeight||DateShipped||DateDelivered||ShippingStatusId||OrderShippingAddressId
  ||5        ||3          ||2  ||12312||aasdasd       ||24         ||2012-12-2010||            || 10025          ||10028
  ||5        ||4          ||3  ||113123||adadasdasd   ||22         ||2012-12-2012||            ||10026           ||10028

**CSV Format2**

    ||"OrderGUID"||"OrderItemID"||"Qty"||"SKUID"||"TrackingNumber"||"TotalWeight"||"DateShipped"||"DateDelivered"||"ShippingStatusId"||"OrderShippingAddressId"||
    ||"5"        ||"3"          ||"2"  ||"12312"||"aasdasd"       ||"24"         ||"2012-12-2010"||""            || "10025"          ||"10028"||
    ||"5"        ||"4"          ||"3"  ||"113123"||"adadasdasd"   ||"22"         ||"2012-12-2012"|| "2012-12-2010" ||"10026"           ||"10028"|| 
```

我必须阅读这些文件而不将它们保存在服务器上。谁能帮我？如何读取这些文件并插入我的数据库？如何修剪文件中的特殊字符？

这就是我要为文件上传做的事情：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult ImportTrackingNumber(FormCollection form,HttpPostedFileBase UploadedFile,TrackingNumbersModel Trackingnumbers)
{
    if (UploadedFile != null)
    {
        var allowedExtensions = new[] {".xlsx", ".csv"};
        if (UploadedFile.ContentLength > 0)
        {                   
            var extension = Path.GetExtension(UploadedFile.FileName);
            if (extension == ".xlsx")
            {
                //Need To code For Excel Files Reading
            }
            else if (extension == ".csv")
            {
                //string filename = Path.GetFileName(UploadedFile.PostedFile.InputStream);
                StreamReader csvreader = new StreamReader(UploadedFile.FileName);
                DataTable dt;        
            }
        }
    }
    return View();
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-13T15:40:22.333

只是一个关于如何读取上传文件而不将其保存在服务器上的示例：

```
// Use the InputStream to get the actual stream sent.
using (StreamReader csvReader = new StreamReader(UploadedFile.InputStream)) 
{
    while (!csvReader.EndOfStream)
    {
        var line = csvReader.ReadLine();
        var values = line.Split(';');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-13T23:04:18.267

这是我的代码：

```
public static DataTable GetDataTabletFromCSVFile(HttpPostedFileBase file)
{
    DataTable csvDataTable = new DataTable();

    // Read bytes from http input stream
    var csvBody = string.Empty;

    using (BinaryReader b = new BinaryReader(file.InputStream))
    {
        byte[] binData = b.ReadBytes(file.ContentLength);
        csvBody = Encoding.UTF8.GetString(binData);
    }

    var memoryStream = new MemoryStream();
    var streamWriter = new StreamWriter(memoryStream);
    streamWriter.Write(csvBody);
    streamWriter.Flush();
    memoryStream.Position = 0;

    using (TextFieldParser csvReader = new TextFieldParser(memoryStream))
    {
        csvReader.SetDelimiters(new string[] { "," });
        csvReader.HasFieldsEnclosedInQuotes = true;
        string[] colFields = csvReader.ReadFields();
        foreach (string column in colFields)
        {
            DataColumn datecolumn = new DataColumn(column);
            datecolumn.AllowDBNull = true;
            csvDataTable.Columns.Add(datecolumn);
        }
        while (!csvReader.EndOfData)
        {
            string[] fieldData = csvReader.ReadFields();
            //Making empty value as null
            for (int i = 0; i < fieldData.Length; i++)
            {
                if (fieldData[i] == "")
                {
                    fieldData[i] = null;
                }
            }

            csvDataTable.Rows.Add(fieldData);
        }
    }

    return csvDataTable;
} 
```

# android - SSL 证书不受信任 - 仅在移动设备上

> ID：13862908
> 
> 赞同：189
> 
> 时间：2012-12-13T15:19:35.850
> 
> 标签：android, iphone, google-chrome, ssl, certificate

我的网站在我的桌面（chrome）中通过 SSL 运行良好 我在地址栏附近有一个绿色锁，上面写着“身份验证”

但是使用移动移动浏览器（Chrome/Safari）我看到以下消息 - “该网站的身份尚未验证”并且锁（在地址栏附近的 chrome 中）上有一个红色的 x 标记知道为什么发生？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-12-13T17:06:07.900

把你的域名放在这里：[https](https://www.ssllabs.com/ssltest/analyze.html) ://www.ssllabs.com/ssltest/analyze.html 你应该可以看到你的ssl证书链有没有问题。我猜你有 SSL 链问题。对该问题的简短描述是，您的服务器上实际上有一个证书列表（而不仅仅是一个），并且这些证书的顺序必须正确。如果它们在那里但顺序不正确，则该网站在桌面浏览器上会很好（我认为也是 iOs），但 android 对证书的顺序更严格，如果顺序不正确会出错。要解决此问题，您只需重新订购证书。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-13T17:13:18.453

错误的最可能原因是颁发您的 SSL 证书的证书颁发机构在您的桌面上受信任，但在您的移动设备上不受信任。

如果您是从通用证书颁发机构购买的证书，这应该不是问题 - 但如果它不太常见，则您的手机可能没有它。您可能需要接受它作为受信任的发布者（尽管如果您将网站推向公众，这并不理想，因为他们不愿意这样做。）

您可能会发现查看[适用于 Android 的受信任 CA 列表](http://www.andreabaccega.com/blog/2010/09/23/android-root-certification-authorities-list/)有助于了解您的 CA 是否存在。

# c++ - 由宏创建的单元测试方法

> ID：13862910
> 
> 赞同：0
> 
> 时间：2012-12-13T15:19:39.327
> 
> 标签：c++, unit-testing, macros, unittest++

我有一个用 C++ 编写的程序，为了确保在进行更改时不会破坏任何内容，我想添加单元测试。

在程序中，我们使用宏来创建某些经常使用的对象。这看起来像：

```
#define PROPERTY_SWITCHPOINT(var) \
private: \
   comp::SwitchPoint* m##var; \
public: \
   void set##var(bool val, unsigned short switchIdx = 0) \
   {\
      if(m##var)  m##var->setValue(val,switchIdx); \
   }\
   bool get##var() \
   {\
      return (NULL == m##var ? false : m##var->getValue()); \
   }\
   comp::SwitchPoint* get##var##Ptr() \
   {\
      return m##var; \
   } 
```

在包含切换点的类的标题中，我们调用宏

```
class Classname
{
    private:
        PROPERTY_SWITCHPOINT(SwitchpointObject)
} 
```

然后在包含开关点的类的构造函数中，我们执行以下操作：

```
Classname::Classname()
{
    mSwitchpointObject = CreateSwitchpoint("Switchpoint name", 2);
}

comp::SwitchPoint* Classname::CreateSwitchpoint(const std::string& name, unsigned short numberOfSwitches = 1)
{
    comp::SwitchPoint* sp = new comp::SwitchPoint(name, true, numberOfSwitches);
    return sp;
} 
```

现在我们可以使用`mSwitchpointObject->getValue()`来获取这个对象的值了。所有这些都有效，但我无法为它创建单元测试，我使用的是 unittest++ 框架。我用这个测试试过：

```
#include "UnitTest++.h"
#include "Classname.h"

namespace
{
    TEST(SwitchpointTest1)
    {
        PROPERTY_SWITCHPOINT(SwitchpointObject)
        mSwitchpointTestVariabele           = CreateSwitchpoint("test switchpoint", 2);
        CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), true);
        //mSwitchpointTestVariabele->setValue(false, 0);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), false);
        //mSwitchpointTestVariabele->setValue(false, 1);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), false);
        //mSwitchpointTestVariabele->setValue(true, 0);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), false);
        //mSwitchpointTestVariabele->setValue(true, 1);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), true);
    }
} 
```

但这给了我编译器错误：

```
|  |In member function 'virtual void<unnamed>::TestSwitchpointTest1::RunImpl() const':|
| 9|error: expected primary-expression before 'private'|
| 9|error: expected ';' before 'private'|
| 9|error: expected primary-expression before 'public'|
| 9|error: expected ';' before 'public'|
| 9|error: a function-definition is not allowed here before '{' token|
| 9|error: a function-definition is not allowed here before '{' token|
|10|error: 'mSwitchpointTestVariabele' was not declared in this scope|
|10|error: 'CreateSwitchpoint' was not declared in this scope|
|  |=== Build finished: 8 errors, 0 warnings ===| 
```

我猜问题是宏创建了需要测试的代码的一部分，并且在创建这部分之前执行了单元测试，但是从 Aleguna 的回复中我知道这不是问题所在。

我应该如何为这样的代码编写测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:39:46.560

我建议查看实际生成的代码，因为您有编译问题，听起来宏没有生成您期望的代码。如果您使用的是 windows/VS，您可以使用“cl.exe /E”或在 g++/gcc 中您可以使用“gcc -E source.cpp”来运行预处理器并生成将被编译的 c++ 文件。

单元测试只能在代码成功编译后运行（并且可以像单元测试任何其他代码一样进行测试）。

您的单元测试代码正在扩展为：

```
 #include "UnitTest++.h"
    #include "Classname.h"

    namespace
    {
        TEST(SwitchpointTest1)
        {
                private:
       comp::SwitchPoint* mSwitchpointObject;
    public:
       void setSwitchpointObject(bool val, unsigned short switchIdx = 0)
           {
              if(mSwitchpointObject)  mSwitchpointObject->setValue(val,switchIdx);
           }
       bool getSwitchpointObject()
       {
          return (NULL == mSwitchpointObject ? false : mSwitchpointObject->getValue()); 
       }
       comp::SwitchPoint* getSwitchpointObject##Ptr() 
       {
          return mSwitchpointObject; 
       }

 mSwitchpointTestVariabele           = CreateSwitchpoint("test switchpoint", 2);
        CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), true);
        //mSwitchpointTestVariabele->setValue(false, 0);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), false);
        //mSwitchpointTestVariabele->setValue(false, 1);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), false);
        //mSwitchpointTestVariabele->setValue(true, 0);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), false);
        //mSwitchpointTestVariabele->setValue(true, 1);
        //CHECK_EQUAL(mSwitchpointTestVariabele->getValue(), true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:43:47.640

好吧，错误很明显

```
In member function 'virtual void<unnamed>::TestSwitchpointTest1::RunImpl() const': 
```

您不能在函数体中使用`private:`and `public:`（包含在您的宏中）关键字。

# php - PHP MYSQL 查询，使用来自多个表的数据搜索多个字段/列

> ID：13862911
> 
> 赞同：4
> 
> 时间：2012-12-13T15:19:39.330
> 
> 标签：php, mysql, search, field

在这里潜伏了很长时间，多年来一直在使用这个网站的建议，现在我有一个我找不到答案的问题 - 我相信解决方案很简单！

我正在为音乐曲目建立一个标记系统。我有三张桌子

**曲目**

```
---------------
| id | name   |
---------------
| 1  | Track1 |
| 2  | Track2 |
--------------- 
```

**标签链接**

```
--------------------------
| id | tag_id | track_id |
--------------------------
| 1  | 1      | 1        | 
| 2  | 2      | 1        | 
| 3  | 2      | 2        |
-------------------------- 
```

**标签**

```
-------------------------
| id | tag      | type  |
-------------------------
| 1  | acoustic | genre | 
| 2  | anger    | mood  |
------------------------- 
```

我希望能够获取具有例如标签：声学，类型：流派和标签：愤怒，类型：情绪的曲目的曲目名称。所以在这种情况下，我想要轨道 1，因为它有两个标签。

我目前的查询是

```
SELECT tracks.name 
FROM tracks
JOIN taglinks ON tracks.id=taglinks.track_id
JOIN tags ON (tags.type='genre' AND tags.tag='acoustic') AND (tags.type='mood' AND tags.tag='anger')
WHERE taglinks.tag_id=tags.id; 
```

这不会返回任何内容，如果我删除第二个 JOIN 中的 AND 部分，那么我会按预期将所有轨道标记为声学，如果我将其更改为 OR，我会再次按预期获得两个轨道。

我如何执行 AND 并仅返回同时具有这些标签和类型的曲目？

先谢谢了

编辑：

只是为了澄清我所追求的。我希望能够检索同时具有 Acoustic 和 Anger 作为标签的曲目，但前提是这些标签也与给定类型匹配。

这是因为稍后我可能有一个名为 jazz 的类型为类型的标签，以及一个名为 jazz 的类型为风格的标签，我需要能够确保我选择了正确的标签类型以及标签本身。

这是我正在使用的 sqlfiddle 的链接 - [http://sqlfiddle.com/#!2/aad82/3](http://sqlfiddle.com/#!2/aad82/3)。

到目前为止，吉尔斯的回答似乎是一个很好的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:26:26.857

这应该没问题

```
select
t.name
from
tracks as t 
inner join taglinks as tl on t.id = tl.track_id
inner join tags as tg on tl.tag_id = tg.id
where
tg.tag = 'acoustic' and
tg.type = 'genre' and 
tg.tag = 'anger' and
tg.type = 'mood'; 
```

注意：我`as identifier`喜欢这样使用，因为它可以节省在任何地方写入表名。你不必。

**编辑**

我可能有点误解了你的问题，所以这个问题也可能有所帮助：

```
select
t.name
from
tracks as t 
inner join taglinks as tl on t.id = tl.track_id
inner join tags as tg on tl.tag_id = tg.id
where
(tg.tag = 'acoustic' and
tg.type = 'genre') or 
(tg.tag = 'anger' and
tg.type = 'mood'); 
```

这将带回具有正确类型和标签但不必拥有所有标签的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:29:33.997

```
SELECT * FROM tracks tracks
INNER JOIN
(SELECT taglinks.track_id, COUNT(*) as cnt
FROM tags tags
INNER JOIN taglinks taglinks ON taglinks.tag_id = tags.id
WHERE
    (tags.tag='ac' AND tags.type='ge')
    OR (tags.tag='an' AND tags.type='mo')
GROUP BY taglinks.track_id
)AS track_match
    ON track_match.track_id = tracks.id AND track_match.cnt = 2 
```

您将需要替换 "track_match.cnt = 2" 2=要匹配的条件数

此解决方案提供了一些灵活性：您还可以让轨道满足最少数量的条件。

例如，您可以在此处添加 track_match.cnt >= 1 以及 ORDER BY track_match.cnt DESC

获取按匹配条件数排序的曲目列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T16:37:16.080

问题是轨道应该有 2 个标签等于要求的值，所有发布的请求在这种情况下都不起作用。必须使用 INTERSECT sql 命令，但这个命令在 mysql 中不可用。

类似的东西应该可以工作：

```
SELECT tracks.id, tracks.name
FROM  `taglinks` 
LEFT JOIN tags ON tags.id = taglinks.tag_id
LEFT JOIN tracks ON tracks.id = taglinks.track_id
WHERE (
tag =  'accoustic'
AND `type` =  'genre'
)
OR (
tag =  'anger'
AND `type`=  'mood'
)
GROUP BY track_id
HAVING COUNT( * ) =2 
```

*   我选择与至少一个标签匹配的所有行
*   我计算与 a 匹配的标签数量`GROUP BY`。
*   如果我搜索两个参数（here `accoustic = 'genre'`and `anger = 'mood'`found 2 rows for this track then it matches the 2 conditions and I keep it to the final result
*   只要记住`HAVING COUNT( * ) =2`用我们要搜索的标签数来改变

# php - 有没有办法以编程方式关闭类别或产品平面？

> ID：13862913
> 
> 赞同：1
> 
> 时间：2012-12-13T15:19:42.340
> 
> 标签：php, mysql, magento, import

在激活 category_flat 设置的情况下导入产品（和相应的类别）时，我们面临完整性约束违规错误。

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`XXXXXXXXX`.`catalog_category_flat_store_1`, CONSTRAINT `FK_CAT_CTGR_FLAT_STORE_1_ENTT_ID_CAT_CTGR_ENTT_ENTT_ID` FOREIGN KEY (`entity_id`) REFERENCES `catalog_category_entity` (`entity_id`) 
```

有没有办法在导入产品之前以编程方式禁用类别平面表？导入过程后，索引正在刷新。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:22:46.920

我会试试这个：

*   [https://stackoverflow.com/a/4343900/158325](https://stackoverflow.com/a/4343900/158325)特别是“**小建议**”。

这将在导入之前禁用索引，然后重新启用。

您也可以查看配置 xpath`catalog/frontend/flat_catalog_category`

或者，如果您直接通过`.SQL`文件导入，请在文件顶部禁用外键约束`.SQL`，并在最后重新启用检查。

*   [http://www.stetsenko.net/2008/10/mysql-how-to-ignore-checking-of-foreign-key-constraints-for-innodb-tables/](http://www.stetsenko.net/2008/10/mysql-how-to-ignore-checking-of-foreign-key-constraints-for-innodb-tables/)

另请记住，您可以删除表：`catalog_category_flat_store_1`如果需要，索引进程将重新创建它。

# jquery - Jquery 代码在 IE 上工作，但在 Firefox 上不工作

> ID：13862916
> 
> 赞同：1
> 
> 时间：2012-12-13T15:19:55.397
> 
> 标签：jquery, internet-explorer, firefox

我正在使用 jQuery 在我的 jsp 中创建一个弹出工具提示。每一行都有一个带有不同超链接的表。当用户将鼠标悬停在超链接上时，我希望显示工具提示，当用户悬停时，我需要它逐渐消失。

我可以在 IE 中使用下面的代码来实现这一点，但是当在 FF 上尝试相同的页面时，它显示出不同的行为。**它实际上是在页面上的其他地方发布工具提示的内容，而不是在工具提示框内**，它应该在的地方。此外，不要在悬停时从页面中删除内容。请帮忙。

```
<style>             
#tooltip{
    position:absolute;
    border:1px solid #333;
    background:#f7f5d1;
    padding:2px 5px;
    color:#333;
    display:none;
    width: auto;
}   

/*  */
</style>            
<script type="text/javascript" language="JavaScript">            
    this.tooltip = function(){  
        /* CONFIG */        
        xOffset = 10;
        yOffset = 50;       
        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result     
        /* END CONFIG */

        $("a.tooltip").hover(function(e){
            this.t = this.title;
            this.title = "";
            $(body).append("<p id='tooltip' class='tooltip'>"+ this.t +"</p>");
            $("#tooltip")
                .css("top",(e.pageY - xOffset) + "px")
                .css("left",(e.pageX + yOffset) + "px")
                .fadeIn("slow");        
        }, function(){
            this.title = this.t;        
            $("#tooltip").remove();
        }); 

        $("a.tooltip").mousemove(function(e){
            $("#tooltip")
                .css("top",(e.pageY - xOffset) + "px")
                .css("left",(e.pageX + yOffset) + "px");
        });         
    };

    // starting the script on page load
    $(document).ready(function(){
        tooltip();
    });
</script> 
```

JSP 生成的 HTML 部分是：

```
<table width="100%" cellpadding="5px" cellspacing="5px" >
    <tr valign="top" class="h1">
        <td>Version</td><td>Price</td><td>Published</td><td>Edition</td>
    </tr>
    <tr valign="top">
        <td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781857159042" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781857159042' src='/images/jackets/s/18/1857159047.jpg' /></td><td>ISBN: 9781857159042 <br>Version: Hardback <br>Price: &pound;10.99 <br>Publication Date:24 Sep 1992 <br>Publisher: Everyman Everyman's Library</td></tr></table> ">Hardback</a></td><td>&pound;10.99</td><td width=auto align=center>1992</td><td width=auto>New edition</td>
    </tr>
    <tr valign="top">
        <td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781840119688" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781840119688' src='/images/jackets/s/18/1840119683.jpg' /></td><td>ISBN: 9781840119688 <br>Version: Hardback <br>Price: &pound;16.99 <br>Publication Date:01 Sep 2009 <br>Publisher: Templar Publishing</td></tr></table> ">Hardback</a></td><td>&pound;16.99</td><td width=auto align=center>2009</td><td width=auto></td>
    </tr>
    <tr valign="top">
        <td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781841939735" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781841939735' src='/images/jackets/s/18/1841939730.jpg' /></td><td>ISBN: 9781841939735 <br>Version: Hardback <br>Price: &pound;14.99 <br>Publication Date:01 Sep 2011 <br>Publisher: Arcturus Publishing Ltd</td></tr></table> ">Hardback</a></td><td>&pound;14.99</td><td width=auto align=center>2011</td><td width=auto></td></tr><tr valign="top"><td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781853261183" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781853261183' src='/images/jackets/s/18/1853261181.jpg' /></td><td>ISBN: 9781853261183 <br>Version: Paperback <br>Price: &pound;1.99 <br>Publication Date:01 Sep 1993 <br>Publisher: Wordsworth Editions Ltd</td></tr></table> ">Paperback</a></td><td>&pound;1.99</td><td width=auto align=center>1993</td><td width=auto>New edition</td></tr><tr valign="top"><td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781840114881" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781840114881' src='/images/jackets/s/18/1840114886.jpg' /></td><td>ISBN: 9781840114881 <br>Version: Hardback <br>Price: &pound;14.99 <br>Publication Date:01 Oct 2008 <br>Publisher: Templar Publishing</td></tr></table> ">Hardback</a></td><td>&pound;14.99</td><td width=auto align=center>2008</td><td width=auto></td></tr><tr valign="top"><td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9780141023557" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9780141023557' src='/images/jackets/s/01/0141023554.jpg' /></td><td>ISBN: 9780141023557 <br>Version: Paperback <br>Price: &pound;4.99 <br>Publication Date:26 Jan 2006 <br>Publisher: Penguin Books Ltd Penguin Classics</td></tr></table> ">Paperback</a></td><td>&pound;4.99</td><td width=auto align=center>2006</td><td width=auto>New edition</td></tr><tr valign="top"><td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781848770010" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781848770010' src='/images/jackets/s/18/1848770014.jpg' /></td><td>ISBN: 9781848770010 <br>Version: Hardback <br>Price: &pound;14.99 <br>Publication Date:01 Sep 2010 <br>Publisher: Templar Publishing</td></tr></table> ">Hardback</a></td><td>&pound;14.99</td><td width=auto align=center>2010</td><td width=auto></td></tr><tr valign="top"><td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9780956266828" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9780956266828' src='/images/jackets/s/09/0956266827.jpg' /></td><td>ISBN: 9780956266828 <br>Version: Hardback <br>Price: &pound;6.99 <br>Publication Date:28 Oct 2010 <br>Publisher: White's Books Ltd</td></tr></table> ">Hardback</a></td><td>&pound;6.99</td><td width=auto align=center>2010</td><td width=auto></td></tr><tr valign="top"><td><a href="http://botswana.blackwell.co.uk:82/jsp/display_product_info.jsp?isbn=9781906814489" class="tooltip" title="<table><tr><td><img class='jacket' width='75' border='1' alt='ISBN:9781906814489' src='/images/jackets/s/19/1906814481.jpg' /></td><td>ISBN: 9781906814489 <br>Version: Paperback <br>Price: &pound;3.50 <br>Publication Date:02 Jul 2010 <br>Publisher: Classic Comic Store Ltd</td></tr></table> ">Paperback</a></td><td>&pound;3.50</td><td width=auto align=center>2010</td><td width=auto></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:24:47.870

您在这里缺少一些引号：

```
$('body').append("<p id='tooltip' class='tooltip'>"+ this.t +"</p>"); 
```

我假设这`body`是在 IE 中默认定义的，但在 Firefox 中没有。通过将其括在括号中，您实际上会触发 jQuery 的选择器引擎来搜索元素，而不是尝试包装（不存在的）变量。

可以[在此处找到](http://jsfiddle.net/RXYc7/)一个以某种方式工作的示例。然而，您的代码似乎并没有删除“工具提示”。

# sql - SQL 函数返回的结果与普通查询不同

> ID：13862919
> 
> 赞同：0
> 
> 时间：2012-12-13T15:20:11.303
> 
> 标签：sql, count, sql-server-2008-r2, user-defined-functions

我正在使用`SQL Server 2008R2`并且我有以下脚本。

```
select * from orderSummaryTotal(@orderid,@sessionid)

select
    count(*) as Quantity,
    IsNull(Sum(VatAmount),0) As VATAmount,
    IsNull(Sum(NetAmount),0) As NetAmount,
    IsNull(Sum(GrossAmount),0) as GrossAmount
from tbOrderProduct
where
     Orderid = @orderid
 and sessionid = @sessionid 
```

当我运行第二个查询时，它会返回我的值。即数量 3

但是，当我运行第一个查询时，它返回的数量为 0。

第一个查询是表值函数这是代码。

```
ALTER FUNCTION [dbo].[OrderSummaryTotal](@orderid varchar, @sessionid uniqueidentifier)
RETURNS TABLE as
RETURN
  select
      count(*) as Quantity,
      IsNull(Sum(VatAmount),0) As VATAmount,
      IsNull(Sum(NetAmount),0) As NetAmount,
      IsNull(Sum(GrossAmount),0) as GrossAmount
  from tbOrderProduct
  where
       Orderid = @orderid
   and sessionid = @sessionid 
```

两个查询是相同的，但是为什么一个返回计数 3 而另一个不返回呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:25:58.237

原因是`varchar`您的函数定义中没有长度。

尝试将其更改为类似`varchar(8000)`或足够大以满足您的需要的数字。

# perl - 使用 TeamCity REST API 的 Perl HTTP 请求 POST 失败

> ID：13862926
> 
> 赞同：0
> 
> 时间：2012-12-13T15:20:35.530
> 
> 标签：perl, http, rest, post, teamcity

我有一个 perl 脚本通过 REST API 备份我们的 TeamCity 服务器，如下所示：

```
use strict;
use LWP::UserAgent;
use HTTP::Request::Common qw{ POST GET }

# ... code ommitted for brevity ... #

my $url = 'http://teamcity:8080/httpAuth/app/rest/server/backup';
my $req = POST( $url . '?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=' . $filename);   
$req->authorization_basic($username, $password);
my $resp = $ua->request($req); 
```

我尝试发布更符合 HTTP:Request 文档的内容，但由于某种原因它失败了，抱怨我没有指定文件名：

```
# This fails
my $req= POST( $url, [ 'includeConfigs'   => 'true',
                            'includeDatabase'  => 'true',
                            'includeBuildLogs' => 'true',
                            'fileName'         => $filename, 
                          ] ); 
```

然而，当我查看 TeamCity 的后端 REST 日志时，完整的请求似乎使其完好无损，并且与上面传递的请求相同。

命令成功日志：

```
[2012-12-13 15:02:38,574]  DEBUG [www-perl/5.805 ] - rver.server.rest.APIController - REST API request received: POST '/httpAuth/app/rest/server/backup?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=foo', from client 10.126.31.219, authenticated as jsmith 
```

失败命令的日志：

```
[2012-12-13 14:57:00,649]  DEBUG [www-perl/5.805 ] - rver.server.rest.APIController - REST API request received: POST '/httpAuth/app/rest/server/backup?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=foo', from client 10.126.31.219, authenticated as jsmith 
```

发出可能导致失败的 POST 请求的两种方法之间是否还有其他隐藏的区别？

更新：这是通过 Data::Dumper 打印时每个请求的结果

成功发布：

```
$VAR1 = bless( {
             '_content' => '',
             '_uri' => bless( do{\(my $o = 'http://teamcity:8080/httpAuth/app/rest/server/backup?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=foo')}, 'URI::http' ),
             '_headers' => bless( {
                                    'content-type' => 'application/x-www-form-urlencoded',
                                    'content-length' => 0,
                                    'authorization' => 'Basic c3lzQnVpbGRTeXN0ZW1JOnBhaWQuZmFpdGg='
                                  }, 'HTTP::Headers' ),
             '_method' => 'POST'
           }, 'HTTP::Request' ); 
```

不成功的 POST：

```
$VAR1 = bless( {
             '_content' => 'includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=foo',
             '_uri' => bless( do{\(my $o = 'http://teamcity:8080/httpAuth/app/rest/server/backup')}, 'URI::http' ),
             '_headers' => bless( {
                                    'content-type' => 'application/x-www-form-urlencoded',
                                    'content-length' => 75,
                                    'authorization' => 'Basic c3lzQnVpbGRTeXN0ZW1JOnBhaWQuZmFpdGg='
                                  }, 'HTTP::Headers' ),
             '_method' => 'POST'
           }, 'HTTP::Request' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:48:12.097

我认为您的服务器端脚本只能处理`GET`URL 中编码的参数，而不是`POST`通过标准输入传输的数据。请注意，HTTP 描述了几种不同的方法，它们是`GET`、`POST`、`HEAD`等`DELETE`。然后有两种方法可以将数据传递到服务器上的应用程序。大多数情况下，其中一种方式也被调用`GET parameters`，而另一种方式也被调用，`POST data`因为`GET parameters`它们通常与 HTTP`GET`方法一起使用，并且`POST data`通常用于 HTTP`POST`方法。但是，他们不必这样做。而且我认为您将HTTP`POST`方法与`GET parameters`成功案例和`POST data`不成功案例混为一谈。

`GET parameters`通过 URL 传递，通常是附加`?`到 URL 后跟实际的键/值组。这些可以通过某些环境变量提供给在服务器上运行的脚本。由脚本来拆分`&`，拆分键/值对上的变量`=`并撤消转义。

`POST data`环境变量`CONTENT_LENGTH`告诉脚本从其标准输入中读取多少字节。实际的键/值对通过不同的编码传输，通常作为多部分编码内容。是的，`POST`HTTP 请求（主要来自 HTML `<form>`s）也可以像 一样发送 URL 编码`GET parameters`，但是 HTTP 标准对包括所有参数的 URL 施加了长度限制。因此，通过标准输入而不是通过 URL 传输数据的方法。

现在看起来您的服务器端脚本可以评估 URL 编码参数（又名。`GET parameters`）参数，但不能评估通过标准输入发布给它的数据。即使您使用HTTP 方法/动词，在您的成功案例中，您`POST`实际上并没有通过标准输入传输值。在这种情况下，`POST data`您可以简单地交换它，它应该仍然可以工作。`POST(...)``GET(...)`

在您不成功的情况下，您使用`POST`HTTP 方法和`POST data`传输值的方式。

在某些情况下，我在这里的措辞可能是错误的，但基本面应该仍然可以。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T16:09:01.000

```
my $url= my $url = 'http://teamcity:8080/httpAuth/app/rest/server/backup';
my $req= POST( $url, { 'includeConfigs'   => 'true',
                            'includeDatabase'  => 'true',
                            'includeBuildLogs' => 'true',
                            'fileName'         => $filename, 
                          } ); 
```

注意'{}'（哈希引用，而不是数组引用）。此外，不将查询字符串 (GET) 语法与 POST 语法混用对澄清问题大有帮助。

干杯。

# python - 子图中的 matplotlib 颜色条：标签正在消失

> ID：13862929
> 
> 赞同：1
> 
> 时间：2012-12-13T15:20:46.083
> 
> 标签：python, matplotlib

我正在开发一些代码来在图形上生成任意数量的二维图（地图和简单等高线图）。matplotlib 子图例程对此非常有效。在下面的简化示例中，一切正常。然而，在我的实际应用程序中——它对子图、contourf 和颜色条使用完全相同的命令，只是这些命令分散在几个例程中——颜色条上的标签没有显示出来（虽然颜色补丁似乎没问题）。即使经过数小时的阅读文档和网络搜索，我什至不知道从哪里开始寻找问题所在。如果我有我的颜色条实例（cbar），我应该能够找出刻度标签位置是否有意义，刻度标签是否设置为可见，我的字体设置是否有意义，等等...... 但是我如何实际检查这些属性？有没有人遇到过类似的问题？（甚至更好：找到了解决方案？）哦，是的：如果我在实际的绘图例程（发出 contourf 命令的地方）中手动创建一个新的图形和轴，那么它将再次工作。但这意味着失去对图形布局等的所有控制。可能是我没有正确传递我的轴实例吗？这是我所做的：

```
fig, ax = plt.subplots(nrows, ncols)
row, col = getCurrent(...)
plotMap(x, y, data, ax=ax[row,col], ...) 
```

然后，在 plotMap 内部：

```
c = ax.contourf(x, y, data, ...)
ax.figure.colorbar(c, ax=ax, orientation="horizontal", shrink=0.8) 
```

如上所述，以下带有简化图和人工数据的示例可以正常工作：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.arange(0.,360.,5.)*np.pi/180.
y = np.arange(0.,360.,5.)*np.pi/180.
data = np.zeros((y.size, x.size))
for i in range(x.size):
    data[:,i] = np.sin(x[i]**2*y**2)
fig, ax = plt.subplots(2,1)
contour = ax[0].contourf(x, y, data)
cbar = ax[0].figure.colorbar(contour, ax=ax[0], orientation='horizontal', shrink=0.8)
contour = ax[1].contourf(x, y, data, levels=[0.01,0.05,0.1,0.05])
cbar = ax[1].figure.colorbar(contour, ax=ax[1], orientation='horizontal', shrink=0.8)
plt.show() 
```

谢谢你的帮助！

*在进一步探索之后添加：*

```
for t in cbar.ax.get_xticklabels():
    print t.get_position(), t.get_text(), t.get_visible() 
```

向我显示正确的文本和可见 = True，但所有位置都是 (0.,0.)。这会是个问题吗？

顺便说一句：轴标签有时也会丢失......我在 Windows 上使用 matplotlib 版本 1.1.1 和 python 2.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:22:03.797

好的 - 我可以追踪它：matplotlib 正在正常工作！该错误嵌入在一个实用程序中，一旦产生了给定数量的绘图面板，该程序就会为每个页面（=图）添加一些最后的润色。在这个例程中，我想隐藏空的绘图面板（即在最后一页），我这样做了

```
ax = fig.axes
for i in range(axCurrent, len(ax)):
    ax[i].set_axis_off() 
```

但是，当程序为除最后一页之外的任何页面输入此例程时，axCurrent 已经重置为零，因此图中所有轴的轴都已关闭。添加

```
if axCurrent > 0: 
```

在*for i...*解决问题之前。

对不起，如果我偷了任何人的时间。无论如何，感谢所有考虑提供帮助的人！

# android - 波斯语的sqlite数据库

> ID：13862930
> 
> 赞同：5
> 
> 时间：2012-12-13T15:20:47.823
> 
> 标签：android, sqlite, csv, arabic, farsi

我试图从 csv 文件创建一个 sqlite 数据库。我按照此页面中的说明进行操作：[在 android 中使用您自己的 sqlite db，](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)并且：[将 csv 导入到 sqlite](http://www.haakseth.com/?p=85)

但问题是当表格包含波斯语/阿拉伯语的数据时。sqlite 将该字符显示为“_”。我应该怎么办？

PS。我想在一个 android 项目中使用这个数据库。

编辑：我使用以下代码将 csv 导入到 sqlite：

```
CREATE TABLE "android_metadata"("locale" TEXT DEFAULT 'en_US');
CREATE TABLE "addresses"(_id integer PRIMARY KEY,
nametext, meaning text);
.separator ","
.import test.csv mydb 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:06:34.817

sqlite supports UTF-8, UTF-16 and this is quite enough to store arabic or persian.

Most probably you get "_" because the import tool expects different charset than the charset of your original file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:38:11.800

[直到 4.0 版的 Android 不支持波斯语/波斯语，但这里](http://www.pedramhayati.com/2011/05/15/persianfarsi-language-for-android/)列出的一些内容可能会对您有所帮助。

我还遇到了[这个关于 SQL 中波斯数字的 stackoverflow 问题](https://stackoverflow.com/questions/11205509/persian-numbers-in-sql-server-2005)，尽管我不确定这是否会有所帮助。

我发现了一个与您类似的问题：[C# - Sqlite 数据库是否支持波斯语/阿拉伯语编码？](https://stackoverflow.com/questions/6021059/does-sqlite-database-support-persian-arabic-encoding) 这似乎给出了一个不幸的否定答案：

> 简而言之：没有。
> 
> SQLite 只支持非常非常有限的编码：UTF-8 和 UTF-16（多种）。
> 
> 幸运的是，UTF-8 非常适合表达阿拉伯语或波斯语，或任何其他语言（包括克林贡语，如果你喜欢的话）。
> 
> 当然，您的工具链的某些其他部分可能会弄乱编码，请检查 C#.net SQLite 包装器的文档和您的表单代码。

# python - 查询 yum 数据库以获取软件包可用性

> ID：13862936
> 
> 赞同：1
> 
> 时间：2012-12-13T15:21:01.227
> 
> 标签：python, bash, yum, repository

我正在努力将一组 RPM 包整合到一组新的、更有条理的 Yum 存储库中。我已经手动重新打包了其中的一部分并将它们上传到存储库中，但是我有一个更大的集合，可以自动构建和打包，或者具有可从第三方来源获得的更新版本。

**我需要能够，给定一个包名称（以及可选的存储库 ID 列表），以编程方式检查它是否已经可用**，如果没有，则将其上传到存储库中。我玩过 repoquery 和 yum search，但对于我的目的来说，它们似乎都没有足够的可编写脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-27T04:34:51.533

我对我的一个脚本有类似的要求。我使用 repoquery 命令检查远程存储库中是否存在特定的包/版本。

使用以下命令，您可以轻松查看特定包（及其所有版本）是否存在。

```
repoquery --repoid=<myrepository_id> --qf="package|%{name}|%{version}|%{release}|%{arch}" <packagename_of_interest> 
```

# windows-8 - 我可以重命名我的项目并将已经绑定到另一个项目的 Windows 应用商店应用程序与其关联吗？

> ID：13862937
> 
> 赞同：0
> 
> 时间：2012-12-13T15:21:06.720
> 
> 标签：windows-8, refactoring, windows-store-apps

我有一个项目（称为 projectA），它已经与一个尚未发布的 Windows 商店应用程序相关联。我开始了第二个项目（称为 projectB），它的目的是作为测试/实验/玩耍的“沙箱”（一种流氓/影子项目 A），但事实证明项目 B 已经演变为“真实”项目。

如果我将 projectB 的名称更改为更合理的名称（现在是“MetroSandboxPlaypen”），我会不会很头疼？

在一个完美的场景中，我想更改它的名称，然后将它与我已经设置并与 projectA 连接的 Windows 商店应用程序相关联。这可能吗？如果是这样，我是否首先需要断开 projectA 和我保留的 Windows 应用商店应用程序之间的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:20:25.927

您可以将任何应用与已定义的应用商店应用相关联。您需要做的就是在 VS中使用**Store - Associate App 和 Store命令。**

这将下拉包显示名称、包名称、Pub ID 和 Pub 显示名称，并适当地配置您的包清单。

# coq - 如何在 Coq 中给出反例？

> ID：13862940
> 
> 赞同：0
> 
> 时间：2012-12-13T15:21:20.860
> 
> 标签：coq

是否可以为一般不成立的陈述提供反例？例如，所有量不分布在连接词“或”上。你会如何开始呢？

```
Parameter X : Set.
Parameter P : X -> Prop.
Parameter Q : X -> Prop.

(* This holds in general *)
Theorem forall_distributes_over_and
  : (forall x:X, P x /\ Q x) -> ((forall x:X, P x) /\ (forall x:X, Q x)).
Proof.
intro H. split. apply H. apply H.
Qed.

(* This doesn't hold in general *)
Theorem forall_doesnt_distributes_over_or
  : (forall x:X, P x \/ Q x) -> ((forall x:X, P x) \/ (forall x:X, Q x)).
Abort. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:38:23.220

这是一种快速而肮脏的方法来证明类似于您想要的东西：

```
Theorem forall_doesnt_distributes_over_or:
  ~ (forall X P Q, (forall x:X, P x \/ Q x) -> ((forall x:X, P x) \/ (forall x:X, Q x))).
Proof.
  intros H.
  assert (X : forall x : bool, x = true \/ x = false).
  destruct x; intuition.
  specialize (H _ (fun b => b = true) (fun b => b = false) X).
  destruct H as [H|H].
  now specialize (H false).
  now specialize (H true).
Qed. 
```

我必须在否定中量化 XP 和 Q 才能提供我想要的。你不能用你`Parameter`的 s 完全做到这一点，因为它们以某种方式固定了一个抽象`X`,`P`和`Q`，从而使你的定理可能为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:26:55.157

一般来说，如果你想产生一个反例，你可以陈述这个公式的否定，然后证明这个否定是成立的。

# javascript - 如何使 jQuery FullCalendar 的高度适合其内容？

> ID：13862942
> 
> 赞同：4
> 
> 时间：2012-12-13T15:21:23.520
> 
> 标签：javascript, jquery, fullcalendar

我想摆脱议程视图（周和日）中[日历](http://arshaw.com/fullcalendar/)div 中的滚动条，并且仅在日历的内容不适合浏览器视口时才使用浏览器的滚动条。

所以我相信我需要调整日历的高度以使其内容适合。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T18:53:43.890

有一个[`getView`](http://arshaw.com/fullcalendar/docs/views/getView/)返回当前活动视图的方法。这`View`有它自己的方法`setHeight`，所以你可以创建一个这样的函数：

```
function resizeCalendar(calendarView) {
    if(calendarView.name === 'agendaWeek' || calendarView.name === 'agendaDay') {
        // if height is too big for these views, then scrollbars will be hidden
        calendarView.setHeight(9999);
    }
} 
```

并在视图更改时调用它：

```
$('#calendar').fullCalendar({
    viewDisplay: resizeCalendar,
    ...
}); 
```

工作[JSFiddle](http://jsfiddle.net/5fJ37/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-19T14:23:09.680

从 2.1.0 版本开始，您可以使用`height`or`contentHeight`选项并将其值设置为`auto`.

该`height`选项是指整个日历的高度（包括标题）。该`contentHeight`选项是指日历的内容区域高度。

根据插件的[文档](https://fullcalendar.io/docs/)，值`auto`意味着视图的内容将采用自然高度并且不会使用滚动条。

初始化日历如下：

```
$('#calendar').fullCalendar({
    contentHeight: "auto",
    // .... other options here 
}); 
```

在这里摆弄： [https ://jsfiddle.net/yj90oqzf/](https://jsfiddle.net/yj90oqzf/)

更多信息在这里：

*   [https://fullcalendar.io/docs/display/height/](https://fullcalendar.io/docs/display/height/)
*   [https://fullcalendar.io/docs/display/contentHeight/](https://fullcalendar.io/docs/display/contentHeight/)

# .net - 使用 .net 的实时监控系统

> ID：13862945
> 
> 赞同：-5
> 
> 时间：2012-12-13T15:21:27.880
> 
> 标签：.net

需要知道完成这项任务的正确方法。

任务描述：

我们需要开发显示仪表板的应用程序，其中从不同的服务器获取并显示来自各种 SQL DB 的数据。现在这需要实时发生，我们可以让刷新时间说 5 分钟。

请参考这个类比，以便它帮助我走正确的道路。

这里有一些细节，仅供参考。

1) 多少台服务器？此应用程序可能支持大约 100 台服务器。

2) 管理员将使用此应用程序来查找 SQL Server DB 的运行状况。

3) 这将由 2 名开发人员在大约 3 个月的时间内完成。

4) 刷新率将可配置为管理员选项。5) 这将是一个基于 Web 的应用程序。

问候， 萨米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:27:17.057

我在几个项目中都在做同样的事情，我正在使用......

*   [ASP.NET MVC 4.5](http://www.asp.net/mvc)
*   [同位素](http://isotope.metafizzy.co/)
*   [渲染](https://github.com/BorisMoore/jsrender)
*   [引导框架](http://twitter.github.com/bootstrap/)
*   [谷歌图表](https://developers.google.com/chart/)

附加组件

*   [雅虎天气 API](http://developer.yahoo.com/weather/)
*   [类型套件](https://typekit.com/)

结果如下所示：

![在此处输入图像描述](../Images/61b64e987253959e4fed5a95cfd4d44d.png)

![在此处输入图像描述](../Images/658c78b493f50e5815f49fdc61f2d593.png)

# apache - 使用 RewriteRule [R=404] 隐藏文件夹会产生无限的重定向循环

> ID：13862949
> 
> 赞同：0
> 
> 时间：2012-12-13T15:22:00.600
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试使用这段漂亮的代码隐藏我的 wp-admin 文件夹，但问题是如果我的用户代理中没有“XYZ”，它就会陷入无限重定向循环：

```
<ifModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 # Make wp-admin folder only visible to browsers with "XYZ" in the User Agent:
 RewriteCond %{HTTP_USER_AGENT} !XYZ
 RewriteRule ^(.*)$ - [R=404,L]
</ifModule> 
```

我知道 R 标志会生成一个外部重定向，所以我尝试了这个，希望它会产生一个内部重定向，但没有运气：

```
RewriteRule ^(.*)$ 404.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:24:43.687

您必须将用户发送到当前目录之外。我将规则移动到站点的根目录，如下所示：

```
# Keep user out of your error document folder as well
RedirectMatch 404 /errordocs
<ifModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 # Make wp-admin folder only visible to browsers with "XYZ" in the User Agent:
 RewriteCond %{HTTP_USER_AGENT} !XYZ
 RewriteRule ^wp-config/(.*)$ errordocs/404.html [L]
</ifModule> 
```

这样，您可以将用户重定向到另一个文件夹。否则，当您尝试从文件夹中重定向用户时，您会遇到循环和其他问题。

# javascript - 全局 JavaScript 命名空间和 Mocha

> ID：13862954
> 
> 赞同：1
> 
> 时间：2012-12-13T15:22:12.127
> 
> 标签：javascript, tdd, mocha.js

我的任务是为大型网站上已经存在的一些 JavaScript 实现 Mocha 测试。这个网站有一个全局命名空间对象来保存它的所有函数和常用变量，以及在同一个对象中设置的每页，我试图使用 Mocha 来识别这一点，但我似乎不能。

例如：

```
//global namespace declaration in the common.js file
var ns = {};
ns.commonValue = 1;
ns.commonFunc = function () {};

//extension of the namespace on an individual page
ns.thisPage = {};
ns.thisPage.pageVal = 1; 
```

在测试单个页面 JavaScript 时，ns 是未定义的。

任何帮助都会很好。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:51:17.120

鉴于您的文件已命名

*   common.js
*   page.js

那么你应该有

```
<script src="common.js"></script>
<script src="page.js"></script>
<script src="test.page.js"></script> 
```

加载没有mocha的页面，看看inspector说什么，然后更正，然后添加mocha

# python - 在scrapy中，我如何在登录后停止重定向到主页

> ID：13862959
> 
> 赞同：0
> 
> 时间：2012-12-13T15:22:14.873
> 
> 标签：python, scrapy

我正在使用此代码登录该站点。但是成功登录后，我被重定向到主页。

但我想获得所需的网址，然后从那里开始抓取

```
 class myPySpider(InitSpider):
        name = 'MyPy'
        allowed_domains = ['example.com']
        login_page = 'https://www.example.com/login'
        start_urls = ["http://www.example.com/list.php"]

        def init_request(self):
            #"""This function is called before crawling starts."""
            return Request(url=self.login_page, callback=self.login)

        def login(self, response):
            #"""Generate a login request."""
            return FormRequest.from_response(response,
                        formdata={'session_key': 'user@email.com', 'session_password': 'somepassword'},
                        callback=self.check_login_response)

        def check_login_response(self, response):
            #"""Check the response returned by a login request to see if we aresuccessfully logged in."""
            if "Sign Out" in response.body:
                self.log("\n\n\nSuccessfully logged in. Let's start crawling!\n\n\n")
                # Now the crawling can begin..

                return self.initialized() # ****THIS LINE FIXED THE LAST PROBLEM*****

            else:
                self.log("\n\n\nFailed, Bad times :(\n\n\n")
                # Something went wrong, we couldn't log in, so nothing happens.

        def parse(self, response):
            self.log("\n\n\n We got data! \n\n\n")
            hxs = HtmlXPathSelector(response)
            sites = hxs.select('//ol[@id=\'result-set\']/li')
            items = []
            for site in sites:
                item = LinkedPyItem()
                item['title'] = site.select('h2/a/text()').extract()
                item['link'] = site.select('h2/a/@href').extract()
                items.append(item)
            return items 
```

# assembly - 为内存中的非静态位置编写汇编代码（需要绝对地址）

> ID：13862960
> 
> 赞同：1
> 
> 时间：2012-12-13T15:22:17.217
> 
> 标签：assembly, x86, code-injection, patch, memory-address

我有一些汇编代码，我想汇编它们以注入正在运行的进程中，但它并不总是位于内存中的同一位置。但是，它包含对程序中不会更改的地址的引用。我尝试使用`jmp far`and `call far`，但它给了我错误“FAR 引用的值不可重定位”。如何将其设置为在二进制代码中使用绝对地址，以便无论代码在内存中的确切位置，它都会跳转到并调用正确的地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:04:40.073

怎么样：

```
 mov    reg, <fixed_address>
         call   reg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:00:15.413

“我如何设置它以使用二进制代码中的绝对地址，”自己构造命令：EA + 6 字节用于远跳转或 E9 + 4 用于近跳转。或者：

```
call 11111111h
m1:
----
mov [m1 - 4], eax 
```

设置外壳时。

# jqgrid - jqGrid 寻呼机区域 - 使用 Font Awesome 图标

> ID：13862963
> 
> 赞同：9
> 
> 时间：2012-12-13T15:22:36.437
> 
> 标签：jqgrid, font-awesome

我想使用 Font Awesome 图标：

```
<i class="icon-edit"></i> 
```

默认情况下在 jqGrid 分页器区域而不是物理图像中。

```
.navButtonAdd('#vw_ComplaintSearchGridPager', { caption: '', buttonicon: 'ui-icon-disk', title: 'Save Grid Settings', onClickButton: function () { $(this).SaveGridSetting(); } }) 
```

有谁知道如何实现这一目标？

![在此处输入图像描述](../Images/e82c9a1e25b462939c11b61bb332566f.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T17:46:57.487

这是一个非常有趣的问题！我以前从未使用过[Font Awesome 图标](http://fortawesome.github.com/Font-Awesome/)，但这似乎是一个非常有趣的项目。

jqGrid 目前没有对 Font Awesome 图标的直接支持，但我准备[**了一个简单的演示**](http://www.ok-soft-gmbh.com/jqGrid/FortAwesome/FortAwesome.htm)，展示了如何用 Font Awesome 中的相应图标替换标准的 jQuery UI 导航器图标。

缩放页面后，可以看到与原始导航器图标的主要区别。我在以 400% 缩放显示的导航器下方包括：

使用 jQuery UI 图标的原始导航器

![在此处输入图像描述](../Images/79d079c8a72fe786fbb52329e8b4521d.png)

带有 Font Awesome 图标的导航器：

![在此处输入图像描述](../Images/8ff5074223671573b447333b6056fcbf.png)

我使用的代码非常简单。而不是使用

```
$grid.jqGrid("navGrid", "#pager", {view: true}); 
```

我用了

```
$grid.jqGrid("navGrid", "#pager", {editicon: "icon-pencil",
    addicon: "icon-plus", delicon: "icon-trash", searchicon: "icon-search",
    refreshicon: "icon-refresh", viewicon: "icon-file",view: true});

$("#pager .navtable .ui-pg-div>span").removeClass("ui-icon"); 
```

我添加了 CSS

```
.ui-jqgrid .ui-jqgrid-pager .ui-pg-div>span { margin: 0 5px; font-size: 12px; } 
```

我认为可以将更多的 jQuery UI 图标替换为 Font Awesome 图标，但这并不是很简单。我会更多地考虑这个问题，并会联系 jqGrid 的开发者（Tony Tomov）考虑让 jqGrid 对 Font Awesome 图标更友好，这样就可以非常简单地切换到 Font Awesome 图标。

**更新**：我添加了允许顶部替换寻呼机中更多图标的代码：

```
var $pager = $grid.closest(".ui-jqgrid").find(".ui-pg-table");
$pager.find(".ui-pg-button>span.ui-icon-seek-first")
    .removeClass("ui-icon ui-icon-seek-first")
    .addClass("icon-step-backward");
$pager.find(".ui-pg-button>span.ui-icon-seek-prev")
    .removeClass("ui-icon ui-icon-seek-prev")
    .addClass("icon-backward");
$pager.find(".ui-pg-button>span.ui-icon-seek-next")
    .removeClass("ui-icon ui-icon-seek-next")
    .addClass("icon-forward");
$pager.find(".ui-pg-button>span.ui-icon-seek-end")
    .removeClass("ui-icon ui-icon-seek-end")
    .addClass("icon-step-forward"); 
```

结果得到以下寻呼机：

![在此处输入图像描述](../Images/fbd1e910c83a821a694489ea14e76cf9.png)

代替

![在此处输入图像描述](../Images/f35b81fca089cca58112b3ce025ff274.png)

**更新 2**：更改最小化图标的代码看起来更完整。最初应该首先更改图标

```
$grid.closest(".ui-jqgrid")
    .find(".ui-jqgrid-titlebar>.ui-jqgrid-titlebar-close>.ui-icon-circle-triangle-n")
    .removeClass("ui-icon ui-icon-circle-triangle-n")
    .addClass("icon-circle-arrow-down"); 
```

然后在每次单击图标后更改它：

```
onHeaderClick: function (gridstate) {
    if (gridstate === "visible") {
        $(this.grid.cDiv).find(">.ui-jqgrid-titlebar-close>span")
            .removeClass("icon-circle-arrow-up ui-icon-circle-triangle-n")
            .addClass("icon-circle-arrow-down");
    } else if (gridstate === "hidden") {
        $(this.grid.cDiv).find(">.ui-jqgrid-titlebar-close>span")
            .removeClass("icon-circle-arrow-down ui-icon-circle-triangle-s")
            .addClass("icon-circle-arrow-up");
    }
} 
```

另外一个需要添加CSS

```
.ui-jqgrid .ui-jqgrid-titlebar-close>span { margin: 0 3px; font-size: 16px; }
.ui-jqgrid .ui-jqgrid-titlebar-close { text-decoration: none; } 
```

为了修复排序图标，我使用了代码

```
var $sortables = $grid.closest(".ui-jqgrid")
    .find(".ui-jqgrid-htable .ui-jqgrid-labels .ui-jqgrid-sortable span.s-ico");
$sortables.find(">span.ui-icon-triangle-1-s")
    .removeClass("ui-icon ui-icon-triangle-1-s")
    .addClass("icon-sort-down");
$sortables.find(">span.ui-icon-triangle-1-n")
    .removeClass("ui-icon ui-icon-triangle-1-n")
    .addClass("icon-sort-up"); 
```

和 CSS

```
.ui-jqgrid .ui-icon-asc { height: auto; margin-top: 0; }
.ui-jqgrid .ui-icon-asc, .ui-jqgrid .ui-icon-desc {
    height: auto; margin-top: 0; margin-left: 5px;
}
.ui-jqgrid .s-ico>.ui-state-disabled, .s-ico>.ui-state-disabled { padding: 0; } 
```

结果将得到以下结果：

![在此处输入图像描述](../Images/be5647ee164deb3fcaa6fe544b47002c.png)

**更新 3**：[在下一个演示](http://www.ok-soft-gmbh.com/jqGrid/FortAwesome/FortAwesome1.htm)中，可以找到更完整的 jQuery UI 图标替换为 Font Awesome 图标。

**更新 4**：[答案](https://stackoverflow.com/a/20165553/315935)为 Font Awesome 版本 4.x 提供了解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-01T17:35:46.477

想我会为那些感兴趣的人提供一个 CSS 替代答案。我们的一位开发人员实现了一个 JS 选项，该选项在功能上确实有效，但是，在正确呈现之前存在延迟（不理想）。

我们在分页选项中使用了很棒的字体图标，下面是我们如何实现它。

找到 jqGrid 用于我们希望自定义的分页图标的四个类，并创建以下 css 以应用基本字体真棒样式

```
.ui-icon-seek-next, .ui-icon-seek-prev, .ui-icon-seek-end, .ui-icon-seek-first
{
    display: inline-block;
    font-family: FontAwesome;
    font-style: normal;
    font-weight: normal;
    line-height: 1;
    -webkit-font-smoothing: antialiased;

} 
```

然后，只需`content`从 font-family 图标中获取并将它们用作您自己的图标即可。

```
.ui-icon-seek-next:before
{
    content: "\f105";
}
.ui-icon-seek-prev:before
{
    content: "\f104";
}
.ui-icon-seek-end:before
{
    content: "\f101";
}
.ui-icon-seek-first:before
{
    content: "\f100";
} 
```

所以整个 CSS 看起来像这样

```
.ui-icon-seek-next, .ui-icon-seek-prev, .ui-icon-seek-end, .ui-icon-seek-first
{
    display: inline-block;
    font-family: FontAwesome;
    font-style: normal;
    font-weight: normal;
    line-height: 1;
    -webkit-font-smoothing: antialiased;

}
.ui-icon-seek-next:before
{
    content: "\f105";
}
.ui-icon-seek-prev:before
{
    content: "\f104";
}
.ui-icon-seek-end:before
{
    content: "\f101";
}
.ui-icon-seek-first:before
{
    content: "\f100";
} 
```

并且我们的网格上的输出没有 JS 并且没有延迟 ![在此处输入图像描述](../Images/7e9ba8c82cca7c0b327c962e373328c0.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T05:56:27.630

通过查看上面 Oleg 的答案，我做了以下事情来简化事情。 **附加 CSS**

```
.ui-jqgrid .ui-jqgrid-pager .ui-pg-div>span.fntawsm { margin: 0 5px; font-size: 12px; padding-left:2px;padding-right:2px;} 
```

** padding-left:2px;padding-right:2px; 是可选的，这仅适用于没有标题的图标...

然后开始在 navButtonAdd 中添加 fontawesome 图标

```
caption:"", // important for above
title:"Give any",
buttonicon:"fntawsm icon-remove"
buttonicon:"fntawsm icon-eject icon-rotate-90" 
```

等等 .. 你也可以使用来自 font-awesome 的所有额外功能，比如 icon-rotate-XX。这样我就不必从跨度中删除 ui-icon 类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-28T20:30:35.393

受@afreeland 答案的启发，我在 github 上创建了一个可用的 css，它允许您将图标转换为 Font-Awesome 图标。

在我看来，与@Oleg 描述的 jquery 方法相比，它的性能优势很重要。在我看来，这也是一个非常优雅的解决方案。

欢迎您使用它：[https ://github.com/guylando/ToAF](https://github.com/guylando/ToAF)

注意：您必须将此 ToAF.css 文件样式优先于其他图标样式，以便例如通过将 css 内容复制到文档中的标签中来实现。

# c# - 如何验证 Unix 路径？

> ID：13862965
> 
> 赞同：1
> 
> 时间：2012-12-13T15:22:40.633
> 
> 标签：c#, asp.net, validation, unix

我正在尝试编写一个简单的 C# 函数来验证用户输入的 shell 脚本的完整 Unix 路径，以避免一些事情：

*   路径格式正确，没有无效符号，如空格或分号
*   没有可疑的命令，例如`rm -rf /`
*   path 代表完整路径，没有亲属关系
*   脚本是否真的存在并不重要

该函数将采用如下形式，

```
public bool IsUnixPathValid(string path)
{
    return !path.IsEmptyOrNull() 
        && path.StartsWith("/") 
        && !path.ContainsCharacters(";', \"")
} 
```

**问题：**是否存在可以执行此类操作的现有库？如果没有，最好的方法是什么，我应该注意哪些小细节（想想*安全*）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:04:13.843

如果您没有尝试验证指定路径中是​​否确实存在任何文件，那么您唯一应该做的就是检查路径是否以`/`（因为您只需要绝对路径）开头并且没有嵌入`NUL`(0) 个字节（因为 POSIX 路径不能包含那些）。而已。绝对其他任何东西都可以是有效的路径。值得注意的是，路径中允许使用空格和分号。

我想您还可以检查多个相邻的斜杠，因为它们是多余的……但是它们仍然被接受（每组多个斜杠与单个斜杠具有相同的含义），因此它们实际上并不是无效的。

检查路径中嵌入的可疑字符串（如“rm -rf /”）是个坏主意。如果您遇到由直接发送到系统命令的未引用路径引起的安全问题，那么您需要解决这些安全问题（通过适当地引用路径，或者更好的是，不将它们通过解析它们的外壳之类的东西）而不是将它们列入黑名单很少选择嵌入的字符串。如果您将其列入黑名单，那么您很可能会错过本应列入黑名单的内容，此外，您可能会拒绝那些实际上是有效的良性路径的内容。

# iphone - 使用 UIScrollView 缩放并使用 UIRotationGestureRecognizer 旋转

> ID：13862967
> 
> 赞同：2
> 
> 时间：2012-12-13T15:22:50.273
> 
> 标签：iphone, ios, ipad, uiscrollview, cgaffinetransform

我试图`UIImageView`在 a 内进行旋转，`UIScrollView`但是当我尝试缩放/取消缩放时，**我的旋转回到 0**。

这是我的轮换代码：

```
- (void)rotateImage:(UIRotationGestureRecognizer*)rotate
  {
  if ([rotate state] == UIGestureRecognizerStateEnded)
  {
    rotateAngle += [spin rotation];
    return;
  }

  myView.transform = CGAffineTransformMakerotation(rotateAngle + [rotate rotation]);
} 
```

关于`UIScrollView`，我只是返回 myView`-(UIView*)viewForZoomingInScrollView:`

最后一个信息，在我的界面生成器中，这是我的视图堆栈：

```
UIImageView
UIView (myView)
UISCrollView 
```

这意味着我在和`UIView`之间有一个`UIImageView``UIScrollView`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:08:09.243

我宁愿建议您使用捏合手势来处理缩放。它会看起来更整洁，更均匀。向视图添加捏合手势。对于缩放，在其选择器方法中添加以下代码

```
 - (void)handlePinch:(UIPinchGestureRecognizer *)recognizer
{

   myView.transform = CGAffineTransformScale(recogniser.view.transform, recognizer.scale, recognizer.scale);
recognizer.scale = 1;

} 
```

用于旋转，

```
 -(void)handleRotate:(UIRotationGestureRecognizer *)rec
{

    myView.transform = CGAffineTransformRotate(rec.view.transform, rec.rotation);
    rec.rotation = 0;
} 
```

确保将 self 声明为手势的委托并实现以下委托方法

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

从中删除 myView

```
 -(UIView*)viewForZoomingInScrollView: 
```

在实施我的解决方案之前的方法。让手势单独处理缩放而不是滚动视图。:) 祝你好运

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T10:07:27.417

捏手势使用苹果库中的代码

不要忘记添加`UIGestureRecognizerDelegate,UIScrollViewDelegate`

```
self.ScrollView= [[UIScrollView alloc]init];
self.ScrollView.frame = CGRectMake(0, 0, DEVICE_WIDTH, DEVICE_HEIGHT);
[self.view addSubview:self.ScrollView];

// for pinch Gesture
self.ScrollView.minimumZoomScale=0.5;
self.ScrollView.maximumZoomScale=6.0;
self.ScrollView.contentSize=CGSizeMake(imageView.frame.size.width, imageView.frame.size.height);
self.ScrollView.delegate = self;

[self.ScrollView addSubview:imageView];

-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{ 
    return imageView;
} 
```

对于旋转，

```
UIRotationGestureRecognizer  *rotation = [[UIRotationGestureRecognizer alloc]initWithTarget:self action:@selector(handleRotate:)];
    rotation.delegate =self;
    [self.ScrollView addGestureRecognizer:rotation];

- (IBAction)handleRotate:(UIRotationGestureRecognizer *)recognizer {

    recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
    recognizer.rotation = 0;

}
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

# silverlight - IIS Smooth Streaming 和 Windows 媒体服务的区别

> ID：13862970
> 
> 赞同：0
> 
> 时间：2012-12-13T15:22:53.433
> 
> 标签：silverlight, smooth-streaming, windows-media-encoder, windows-media-server

我正在寻找用于流式直播网络摄像头的 Windows 流媒体技术选项。我不太确定两者之间的优缺点、价格和媒体格式差异。我知道 IIS 平滑流是较新的技术，最终用户必须安装 silver light 插件才能加载视频。其他主要区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:14:49.827

我发现那里有很多令人困惑的信息，因为使用了类似的术语，并且定期发布使稍微旧的博客帖子过时了。

`"Windows Media Services"`我想你的问题是`IIS Smooth Streaming`

`Windows Media Services`是[Server 2008 的独立更新](http://www.microsoft.com/en-au/download/details.aspx?id=20424)（我不相信它可用于 Server 2012）。在安装时，您使用服务器管理器将 WMS 添加为新的服务器角色。WMS 提供点播流和直播流，我不相信它提供`adaptive bitrate streaming`

`IIS Smooth Streaming`通过此独立更新[IIS7 Media Services 4.1](http://www.microsoft.com/en-au/download/details.aspx?id=27955)在 IIS7 中可用。它在 IIS8/Server 2012 中可用，无需任何额外下载。IIS 平滑流是 Microsoft 的“按需”平滑流的产品名称。

这是一篇很好的博客文章，[解释了 IIS 平滑流](http://brandonpotter.wordpress.com/2010/01/31/demystifying-iis-smooth-streaming-live-smooth-streaming/)。

定价 - 它们都是免费的，假设您已经拥有操作系统许可证。

# iphone - 当以编程方式调用方法但在 IB 中有效时应用程序崩溃

> ID：13862973
> 
> 赞同：-1
> 
> 时间：2012-12-13T15:22:56.950
> 
> 标签：iphone, objective-c, ios, ibaction

当我从 IB 中的按钮运行此操作时，该方法被很好地调用。如果我从代码中运行它，应用程序会崩溃，并带有**无法识别的选择器发送到实例错误**

这是方法：

```
-(void)bottomCenter:(id)sender
{
    [self popover:sender];
}

-(void)popover:(id)sender
{
    //the controller we want to present as a popover
    DemoTableController *controller = [[DemoTableController alloc] initWithStyle:UITableViewStylePlain];
    controller.delegate = self;
    popover = [[FPPopoverController alloc] initWithViewController:controller];

    //popover.arrowDirection = FPPopoverArrowDirectionAny;
    popover.tint = FPPopoverDefaultTint;

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        popover.contentSize = CGSizeMake(300, 500);
    }
    else {
        popover.contentSize = CGSizeMake(200, 300);
    }

    popover.arrowDirection = FPPopoverArrowDirectionAny;

    //sender is the UIButton view
    [popover presentPopoverFromView:sender];
} 
```

这就是我从工具栏按钮调用它的方式：

```
 UIBarButtonItem *item3 = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"icons-footer-filter.png"] style:UIBarButtonItemStylePlain target:self action:@selector(bottomCenter:)]; 
```

我用 错误地称呼它`target:self action:@selector(bottomCenter:)`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:08:34.460

这解决了我的问题：[stackoverflow 链接](https://stackoverflow.com/a/12090536/388458)

问题是由于 UIBarButtonItem 不是 UIView 的子类...

# java - Android：使用 KML 文件和地理位置检测国家

> ID：13862977
> 
> 赞同：2
> 
> 时间：2012-12-13T15:23:15.127
> 
> 标签：java, android, kml, latitude-longitude

我有一个 KML 文件，其中列出了每个国家/地区的多边形坐标。我有一个纬度和经度对，我想检查该位置所在的国家/地区。我想以最有效的方式执行此操作。

我认为解析 KML 文件并逐个搜索对用户来说会很痛苦，所以我假设我应该能够将这些国家及其坐标存储在离线（我希望我的应用程序离线工作）数据库中，以便我这样做每次启动我的 Android 应用程序时都不必解析 KML 文件。

我有两个问题：

1.  存储这些坐标以便快速轻松访问的好方法是什么？
2.  关于第 1 点，确定位置所在国家/地区的好方法或算法是什么？我在谷歌上找到了一些算法来确定一个点是否在多边形中，但我想知道是否有更简单的方法。

以下是如何为单个国家/地区组织 KML 文件的示例：

```
<Placemark>
                <name>Ukraine</name>
                <description><![CDATA[<table><tr><td><FeatureID>194</FeatureID></td><td> 
 <GMI_CNTRY>UKR</GMI_CNTRY></td><td> 
 <REGION>Europe</REGION></td></tr><tr><td colspan=3>
<a href="http://www.imageshack.us"><img src="http://img317.imageshack.us/img317/3765/ukraine4gw.jpg" border="0" width="250" alt="Image Hosted by ImageShack.us" /></a><br><a href="https://www.cia.gov/library/publications/the-world-factbook/geos//up.html">CIA World Factbook: UP</a></td></tr></table>]]></description>
                <Style>
                    <PolyStyle>
                        <color>aaffffff</color>
                        <colorMode>random</colorMode>
                    </PolyStyle>
                </Style>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
23.59208488464356,51.52827835083008,0 23.64609909057617,51.52080154418946,0 23.60860061645508,51.60810089111328,0 23.66670036315918,51.64059829711914,0 23.75359916687012,51.65250015258789,0 23.89669990539552,51.63579940795899,0 23.95389938354492,51.58499908447267,0 24.04310035705567,51.61029815673829,0 24.27939987182618,51.73780059814453,0 24.31329917907715,51.8224983215332,0 24.39669990539551,51.88669967651367,0 24.88529968261721,51.89939880371094,0 25.17939949035645,51.95970153808594,0 25.24419975280762,51.95940017700195,0 25.36109924316407,51.92689895629883,0 25.54697608947754,51.92323684692384,0 25.69580078125,51.92279815673829,0 25.77580070495606,51.93920135498048,0 25.97669982910157,51.91220092773439,0 26.09219932556152,51.91749954223633,0 26.18079948425293,51.86140060424805,0 26.43689918518066,51.85689926147462,0 26.43919944763184,51.82059860229493,0 26.45719909667969,51.81280136108397,0 26.64970016479493,51.82030105590821,0 26.93330001831055,51.74969863891603,0 27.02919960021973,51.76940155029297,0 27.17970085144043,51.76279830932617,0 27.20669937133789,51.7430992126465,0 27.20000076293945,51.6702995300293,0 27.29890060424805,51.65439987182618,0 27.27939987182618,51.59780120849609,0 27.44560050964356,51.60110092163086,0 27.47170066833496,51.62939834594727,0 27.51250076293946,51.63029861450195,0 27.71969985961914,51.59249877929688,0 27.72470092773438,51.5643997192383,0 27.67110061645508,51.50669860839844,0 27.74690055847168,51.46559906005859,0 27.8174991607666,51.53060150146485,0 27.81170082092285,51.58860015869142,0 27.85140037536621,51.62030029296876,0 27.88470077514649,51.61999893188478,0 27.97529983520508,51.56779861450195,0 28.08810043334961,51.56499862670898,0 28.13500022888184,51.58029937744142,0 28.18860054016113,51.6431007385254,0 28.25860023498535,51.66109848022461,0 28.26079940795898,51.61780166625978,0 28.33609962463379,51.57690048217774,0 28.35919952392578,51.53060150146485,0 28.47559928894043,51.5797004699707,0 28.62719917297364,51.56639862060548,0 28.66060066223145,51.45190048217774,0 28.6835994720459,51.4385986328125,0 28.71920013427734,51.45220184326172,0 28.73030090332031,51.4207992553711,0 28.75250053405762,51.41109848022461,0 28.76499938964844,51.41690063476563,0 28.76609992980957,51.48469924926758,0 28.84530067443848,51.55419921875,0 28.92889976501465,51.57669830322266,0 28.99530029296875,51.57469940185548,0 29.02829933166504,51.59579849243165,0 29.04000091552734,51.62469863891603,0 29.08329963684082,51.63830184936523,0 29.18610000610352,51.61220169067384,0 29.20499992370606,51.56829833984375,0 29.24329948425293,51.53779983520508,0 29.25079917907715,51.50469970703125,0 29.23609924316407,51.46640014648438,0 29.28190040588379,51.44329833984375,0 29.31310081481934,51.38499832153321,0 29.35390090942384,51.375,0 29.40970039367677,51.40280151367189,0 29.48310089111328,51.39030075073242,0 29.52389907836914,51.45360183715821,0 29.59440040588379,51.45309829711914,0 29.62170028686523,51.4900016784668,0 29.66970062255859,51.4989013671875,0 29.71780014038086,51.49440002441406,0 29.75919914245606,51.44110107421876,0 29.85140037536621,51.43610000610352,0 29.89579963684082,51.46939849853516,0 29.93390083312989,51.45719909667969,0 29.98329925537109,51.48640060424805,0 30.17639923095703,51.49190139770508,0 30.34810066223145,51.40530014038086,0 30.35029983520508,51.3582992553711,0 30.33499908447266,51.34500122070313,0 30.3838996887207,51.30720138549805,0 30.45999908447266,51.29690170288086,0 30.47970008850098,51.27000045776369,0 30.54940032958985,51.25279998779297,0 30.57169914245606,51.27330017089844,0 30.57080078125,51.30189895629884,0 30.64419937133789,51.33280181884766,0 30.63190078735352,51.35530090332032,0 30.64360046386719,51.37080001831054,0 30.61969947814941,51.41609954833986,0 30.58169937133789,51.43030166625977,0 30.58860015869141,51.45420074462891,0 30.6156005859375,51.45830154418946,0 30.56579971313477,51.51580047607422,0 30.58219909667969,51.53670120239259,0 30.53030014038086,51.55110168457031,0 30.52219963073731,51.56689834594727,0 30.54280090332032,51.57720184326172,0 30.51749992370606,51.59780120849609,0 30.55669975280762,51.62500000000001,0 30.57390022277832,51.6974983215332,0 30.62829971313477,51.71139907836914,0 30.64559936523438,51.74860000610352,0 30.61750030517578,51.76419830322266,0 30.65690040588379,51.77439880371094,0 30.67000007629395,51.7963981628418,0 30.66220092773438,51.82389831542969,0 30.74690055847168,51.89530181884766,0 30.79640007019043,51.9028015136719,0 30.80080032348633,51.94440078735352,0 30.88220024108887,51.96559906005859,0 30.89780044555664,51.99779891967774,0 30.97170066833496,52.00640106201173,0 30.96689987182617,52.02500152587891,0 30.93140029907227,52.03329849243164,0 30.94389915466309,52.04919815063479,0 30.93580055236816,52.06389999389648,0 30.96310043334961,52.0811004638672,0 31.16169929504395,52.08330154418946,0 31.25169944763184,52.04560089111329,0 31.27969932556152,52.05469894409179,0 31.30109977722168,52.09109878540039,0 31.36190032958984,52.11669921875001,0 31.78389930725098,52.10810089111329,0 31.89780044555664,52.09609985351563,0 31.90419960021973,52.05390167236329,0 31.92639923095704,52.03670120239258,0 32.01860046386719,52.05720138549805,0 32.1244010925293,52.04389953613282,0 32.22499847412109,52.07939910888673,0 32.29919815063477,52.10940170288086,0 32.33560180664063,52.15719985961914,0 32.34059906005859,52.22140121459961,0 32.38639831542969,52.25469970703126,0 32.35829925537109,52.31000137329103,0 32.39419937133789,52.33530044555665,0 32.50279998779298,52.31420135498048,0 32.5525016784668,52.31999969482422,0 32.7317008972168,52.26139831542969,0 32.86000061035156,52.27030181884767,0 32.92359924316406,52.24720001220703,0 33.05559921264648,52.3130989074707,0 33.09579849243164,52.31000137329103,0 33.2047004699707,52.37969970703126,0 33.33639907836914,52.35689926147462,0 33.39670181274414,52.3661003112793,0 33.44889831542969,52.34360122680664,0 33.49779891967773,52.36669921875001,0 33.52719879150391,52.34749984741211,0 33.51219940185547,52.31110000610352,0 33.53530120849609,52.29330062866211,0 33.6963996887207,52.36169815063477,0 33.84170150756836,52.34329986572266,0 33.86389923095703,52.31669998168946,0 33.92359924316406,52.2942008972168,0 33.96829986572267,52.23080062866211,0 34.05670166015625,52.20140075683594,0 34.09780120849609,52.15190124511719,0 34.07580184936523,52.11690139770509,0 34.07310104370117,52.06029891967774,0 34.12810134887695,51.98970031738282,0 34.10940170288086,51.95970153808594,0 34.16939926147461,51.95999908447267,0 34.24810028076172,51.90670013427733,0 34.2578010559082,51.87939834594728,0 34.30279922485352,51.88719940185547,0 34.33499908447266,51.8577995300293,0 34.38399887084961,51.84330749511719,0 34.44060134887695,51.7672004699707,0 34.43330001831055,51.7327995300293,0 34.39080047607422,51.71500015258789,0 34.11470031738282,51.68080139160158,0 34.09920120239258,51.66609954833984,0 34.10419845581055,51.64469909667969,0 34.15969848632813,51.62860107421876,0 34.17440032958984,51.58829879760742,0 34.23419952392578,51.54669952392578,0 34.23920059204102,51.42779922485354,0 34.2036018371582,51.40670013427734,0 34.23920059204102,51.37939834594727,0 34.29859924316406,51.36890029907227,0 34.31439971923828,51.34719848632814,0 34.27970123291017,51.29190063476563,0 34.20970153808594,51.2593994140625,0 34.30530166625977,51.23080062866212,0 34.38219833374023,51.26359939575195,0 34.53749847412109,51.23419952392578,0 34.63359832763672,51.2421989440918,0 34.66999816894531,51.17940139770508,0 34.73500061035156,51.17250061035157,0 34.91780090332031,51.19720077514649,0 34.95809936523439,51.22219848632814,0 35.0269012451172,51.20719909667969,0 35.07389831542969,51.22140121459961,0 35.12060165405273,51.20169830322266,0 35.12189865112305,51.14469909667969,0 35.17079925537109,51.0546989440918,0 35.30189895629883,51.06060028076172,0 35.37469863891602,51.03860092163087,0 35.35860061645508,51.01079940795897,0 35.29719924926758,50.99969863891602,0 35.30580139160156,50.95940017700195,0 35.30559921264648,50.94440078735354,0 35.36140060424805,50.92610168457032,0 35.36059951782227,50.87220001220704,0 35.39749908447266,50.84500122070313,0 35.39780044555664,50.80310058593751,0 35.45669937133789,50.77280044555664,0 35.45830154418945,50.69419860839844,0 35.48860168457031,50.67580032348633,0 35.39360046386719,50.63809967041016,0 35.4364013671875,50.52140045166017,0 35.46720123291016,50.48030090332031,0 35.56719970703125,50.45309829711915,0 35.58919906616211,50.37779998779298,0 35.6875,50.34669876098634,0 35.72890090942383,50.35329818725587,0 35.73920059204102,50.38330078125,0 35.7942008972168,50.39419937133791,0 35.85029983520508,50.4286003112793,0 36.0078010559082,50.43920135498047,0 36.13919830322266,50.42530059814453,0 36.16059875488281,50.40029907226564,0 36.18830108642578,50.40110015869141,0 36.20529937744141,50.3661003112793,0 36.29750061035156,50.28440093994141,0 36.36059951782227,50.28939819335938,0 36.41279983520508,50.32170104980469,0 36.51279830932617,50.28110122680664,0 36.56330108642578,50.27640151977539,0 36.54669952392578,50.24670028686524,0 36.55559921264648,50.22719955444336,0 36.63000106811523,50.21220016479492,0 36.65000152587892,50.21469879150391,0 36.70109939575195,50.26689910888672,0 36.79079818725586,50.3036003112793,0 36.97330093383789,50.3488998413086,0 37.05279922485352,50.33689880371095,0 37.13059997558594,50.34830093383789,0 37.23970031738281,50.37689971923828,0 37.31579971313477,50.4281005859375,0 37.45859909057617,50.43970108032229,0 37.46310043334961,50.40000152587892,0 37.49440002441406,50.35139846801758,0 37.62360000610352,50.30530166625977,0 37.60530090332031,50.21670150756837,0 37.7047004699707,50.13359832763672,0 37.73310089111328,50.08779907226564,0 37.92530059814453,50.02470016479492,0 38.01359939575195,49.93439865112304,0 38.00970077514648,49.90390014648439,0 38.02420043945313,49.90330123901367,0 38.10359954833984,49.93859863281251,0 38.14920043945313,49.9281005859375,0 38.18529891967774,49.95109939575196,0 38.1963996887207,49.98939895629883,0 38.18420028686523,50.06560134887695,0 38.31420135498047,50.07310104370118,0 38.33720016479492,50.05920028686523,0 38.3760986328125,49.98749923706055,0 38.45420074462891,49.98419952392578,0 38.4989013671875,49.95190048217773,0 38.59529876708984,49.96580123901367,0 38.64250183105469,49.95690155029298,0 38.68669891357422,49.97890090942383,0 38.69609832763672,49.92750167846679,0 38.75920104980469,49.88719940185547,0 38.88919830322266,49.86809921264648,0 38.9453010559082,49.80749893188477,0 39.06919860839844,49.81779861450195,0 39.14500045776367,49.87609863281251,0 39.19279861450195,49.87779998779298,0 39.27360153198242,49.75189971923828,0 39.36529922485352,49.73310089111329,0 39.46419906616211,49.75830078125,0 39.52059936523438,49.73440170288086,0 39.5807991027832,49.73080062866211,0 39.63970184326172,49.6156005859375,0 39.76110076904297,49.58470153808594,0 39.82170104980469,49.54940032958984,0 39.93920135498047,49.57170104980469,0 40.00500106811523,49.61439895629883,0 40.13491439819336,49.60483932495118,0 40.14780044555664,49.56890106201173,0 40.06999969482422,49.52280044555665,0 40.0531005859375,49.47829818725586,0 40.08890151977539,49.42470169067383,0 40.17079925537109,49.35499954223633,0 40.1796989440918,49.32690048217773,0 40.16059875488282,49.28359985351563,0 40.16690063476563,49.24860000610352,0 40.11920166015625,49.2317008972168,0 40.08190155029297,49.18389892578125,0 39.96640014648438,49.1239013671875,0 39.94060134887695,49.09389877319337,0 39.93889999389648,49.05500030517578,0 39.70330047607423,49.0353012084961,0 39.69440078735353,48.97309875488281,0 39.74610137939453,48.94419860839844,0 39.7672004699707,48.90390014648438,0 39.92359924316406,48.88750076293946,0 39.97060012817383,48.86000061035157,0 40.04190063476563,48.89580154418946,0 40.07059860229492,48.8838996887207,0 40.07669830322267,48.86420059204102,0 40.03969955444336,48.82030105590821,0 39.97579956054688,48.78939819335939,0 39.85029983520508,48.8224983215332,0 39.80390167236329,48.81779861450195,0 39.75719833374023,48.76639938354493,0 39.72719955444336,48.76219940185548,0 39.70220184326172,48.71419906616212,0 39.70169830322266,48.67689895629884,0 39.65689849853516,48.61669921875,0 39.66999816894532,48.58810043334961,0 39.79890060424805,48.58309936523438,0 39.85079956054689,48.55749893188478,0 39.86690139770509,48.50030136108398,0 39.83829879760742,48.4838981628418,0 39.88830184936523,48.44309997558595,0 39.9213981628418,48.36750030517578,0 39.89360046386719,48.33779907226563,0 39.83580017089844,48.31529998779297,0 39.91279983520508,48.27780151367189,0 39.99890136718751,48.29719924926758,0 40.01029968261719,48.2592010498047,0 39.99250030517578,48.23500061035156,0 39.93280029296875,48.21329879760742,0 39.88639831542969,48.14080047607423,0 39.84830093383789,48.11309814453125,0 39.86859893798828,48.04079818725586,0 39.77610015869141,48.02640151977539,0 39.81999969482422,47.96969985961914,0 39.79610061645508,47.91669845581055,0 39.80580139160156,47.87250137329102,0 39.76810073852539,47.83140182495117,0 39.7238998413086,47.81829833984376,0 39.59920120239258,47.83940124511719,0 39.41170120239258,47.8297004699707,0 39.34529876708984,47.85309982299804,0 39.13639831542969,47.83390045166017,0 39.04087066650391,47.86660766601564,0 38.89720153808594,47.86830139160156,0 38.83829879760743,47.85279846191406,0 38.78250122070313,47.76810073852539,0 38.7505989074707,47.68389892578125,0 38.69139862060547,47.69419860839844,0 38.60580062866211,47.63809967041016,0 38.44889831542969,47.62829971313477,0 38.33940124511719,47.60139846801758,0 38.28079986572266,47.50609970092773,0 38.28559875488281,47.39609909057617,0 38.20809936523438,47.31919860839845,0 38.22779846191406,47.29690170288087,0 38.30780029296875,47.29999923706055,0 38.31919860839844,47.27830123901367,0 38.3130989074707,47.25579833984375,0 38.21609878540039,47.19469833374024,0 38.2456169128418,47.09042739868164,0 38.13610076904297,47.05942916870118,0 38.07442855834961,47.09471130371094,0 38.03194046020508,47.08026885986328,0 37.53887939453125,47.0786018371582,0 37.32387924194336,46.87165832519531,0 37.3166618347168,46.90388107299805,0 37.20526885986328,46.9286003112793,0 36.90388107299805,46.81499099731445,0 36.77415084838867,46.6402702331543,0 36.802490234375,46.7180404663086,0 36.74692916870117,46.76305007934571,0 36.61360168457031,46.77526855468751,0 36.35776901245117,46.69776916503907,0 36.26803970336914,46.60387039184571,0 36.20888137817383,46.66276931762696,0 36.06748962402344,46.67026901245117,0 35.80582046508789,46.6161003112793,0 35.64638137817383,46.49943923950196,0 35.48720932006836,46.44443893432617,0 35.28332901000977,46.25609970092774,0 35.17081832885742,46.13388061523438,0 35.00165939331055,46.07249069213867,0 34.98777008056641,46.09387969970704,0 35.19110107421875,46.17499160766602,0 35.25777053833008,46.24665832519532,0 35.30749130249023,46.33166122436525,0 35.26443099975586,46.35498809814453,0 35.28387069702148,46.43415832519531,0 35.19332122802734,46.47998809814453,0 35.16859817504883,46.48749160766602,0 35.21081924438477,46.39331817626953,0 35.11304092407227,46.29499053955079,0 34.927490234375,46.22665023803711,0 34.89693069458008,46.2552604675293,0 34.81110000610352,46.17692947387695,0 34.8266487121582,46.10359954833984,0 34.94942855834961,45.79748916625977,0 35.17610168457031,45.52499008178711,0 35.38666152954102,45.33665084838868,0 35.51749038696289,45.2883186340332,0 35.72109985351563,45.33803939819337,0 35.81998825073242,45.46664810180665,0 35.86360168457031,45.45748901367188,0 35.85665893554688,45.40916061401367,0 35.94692993164063,45.36526107788086,0 36.02164840698242,45.36193084716798,0 36.13970947265625,45.46054077148439,0 36.30553817749023,45.4669303894043,0 36.30443954467773,45.43664932250978,0 36.59859848022461,45.42359924316406,0 36.63721084594727,45.3760986328125,0 36.62554168701172,45.33359909057617,0 36.48942947387695,45.33803939819337,0 36.4286003112793,45.25915908813477,0 36.45138168334961,45.07054138183594,0 36.36582183837891,45.03998947143554,0 36.02970886230469,45.03693008422852,0 35.9911003112793,44.99526977539063,0 35.83470916748047,44.9911003112793,0 35.78582000732422,45.05305099487305,0 35.63637924194336,45.11249160766602,0 35.52388000488281,45.11832046508789,0 35.41831970214844,45.06805038452149,0 35.39416122436523,45.02637100219727,0 35.43138122558594,44.99887847900391,0 35.36193084716797,44.98582077026368,0 35.36304092407228,44.94192886352539,0 35.31943893432617,44.96416091918945,0 35.15110015869141,44.89303970336914,0 35.1008186340332,44.80276107788086,0 35.06692886352539,44.78693008422852,0 34.95442962646484,44.83832931518555,0 34.53470993041992,44.75027084350586,0 34.43555068969727,44.69916152954102,0 34.33192825317383,44.54359817504883,0 34.26776885986328,44.54220962524414,0 34.239990234375,44.49581909179688,0 34.00693893432617,44.39525985717773,0 33.84693145751953,44.39804077148438,0 33.4536018371582,44.51581954956055,0 33.36832046508789,44.58916091918945,0 33.56832122802734,44.61442947387695,0 33.51388168334961,44.64081954956055,0 33.54832077026367,44.70026016235352,0 33.51942825317383,44.77914810180665,0 33.54499053955078,44.83248901367188,0 33.60860061645508,44.86915969848633,0 33.61053848266602,44.96944046020508,0 33.55054092407227,45.10498809814454,0 33.38721084594727,45.18664932250977,0 33.29970932006836,45.16331863403321,0 32.93220901489258,45.34360122680664,0 32.8135986328125,45.35831832885742,0 32.64387893676758,45.31026077270509,0 32.5010986328125,45.34720993041992,0 32.49137878417969,45.41888046264648,0 32.57387924194336,45.48249053955078,0 32.82526016235352,45.55887985229492,0 32.83443069458008,45.60498809814454,0 33.15137100219728,45.73249053955078,0 33.25859832763672,45.74776077270508,0 33.43693923950195,45.83554077148439,0 33.69221115112305,45.86082077026367,0 33.68999099731445,45.90748977661134,0 33.75138092041016,45.91859817504884,0 33.74499130249023,45.94527053833009,0 33.62192916870117,45.94414901733398,0 33.63943099975586,46.10609817504884,0 33.58275985717773,46.15721130371094,0 33.49499130249023,46.04331970214845,0 33.32192993164063,46.11999130249024,0 33.26916122436523,46.14165115356446,0 33.21498870849609,46.12776947021484,0 33.20943832397461,46.19305038452148,0 33.11249160766602,46.12971115112305,0 33.0283203125,46.16387939453125,0 33.03110122680664,46.13137817382814,0 32.86664962768555,46.12192916870117,0 32.50942993164063,46.07498931884766,0 32.2630500793457,46.1272087097168,0 32.24332046508789,46.17303848266602,0 31.8822193145752,46.31443023681642,0 31.89055061340332,46.27970886230469,0 31.80166053771973,46.27999114990236,0 31.75943946838379,46.31082153320313,0 31.77721977233887,46.32526016235353,0 31.98415946960449,46.3527717590332,0 32.05915832519531,46.39582061767578,0 32.00387954711914,46.45109939575195,0 31.80971908569336,46.48498916625977,0 31.70332908630371,46.48971176147461,0 31.68026924133301,46.4308204650879,0 31.51082992553711,46.58137893676758,0 31.84248924255371,46.52888107299805,0 32.35665893554688,46.45888137817384,0 32.42248916625978,46.49026107788087,0 32.42164993286133,46.53693008422852,0 32.55138015747071,46.59471130371095,0 32.32582855224609,46.55609893798828,0 32.23666000366211,46.6030387878418,0 32.1391487121582,46.55915832519531,0 31.98944091796875,46.65803909301759,0 31.93638038635254,46.80553817749023,0 31.98554992675781,46.85359954833984,0 32.00859832763672,46.93276977539064,0 31.93222045898438,46.94916152954102,0 31.97805023193359,47.00999069213868,0 31.86776924133301,47.02138137817384,0 31.88916015625,47.10860061645509,0 31.74832916259766,47.22275924682618,0 31.87166976928711,47.08110046386719,0 31.83638000488281,47.01638031005858,0 31.85832977294922,46.99137878417969,0 31.94416046142578,46.99748992919923,0 31.90055084228516,46.94998931884766,0 31.90472030639648,46.92470932006836,0 31.97443962097168,46.91915893554688,0 31.93972015380859,46.85165023803711,0 31.88249969482422,46.82915115356445,0 31.86360931396485,46.78554916381836,0 31.90888023376465,46.72859954833984,0 31.90082931518555,46.64416122436523,0 31.80916023254395,46.61555099487305,0 31.62137985229493,46.65026855468751,0 31.55722045898438,46.61027145385743,0 31.47499084472657,46.64471054077149,0 31.59193992614746,46.78387069702147,0 31.60137939453125,46.82526016235352,0 31.51582908630371,46.7391586303711,0 31.46944046020509,46.76332092285156,0 31.50638008117677,46.72053909301759,0 31.46194076538086,46.66249084472656,0 31.33499908447266,46.60110092163086,0 31.18943977355957,46.62498092651367,0 30.79610061645509,46.552490234375,0 30.74805068969727,46.50555038452148,0 30.79305076599121,46.43999099731445,0 30.68888092041016,46.31692886352539,0 30.66888046264648,46.27138137817384,0 30.4447193145752,46.04803848266602,0 30.41399955749512,46.0250587463379,0 30.33193969726563,45.99776077270508,0 30.31316947937012,45.94944000244141,0 30.13842010498047,45.8173713684082,0 30.12833023071289,45.85776901245118,0 30.08999061584473,45.80998992919922,0 30.01832962036133,45.83832931518555,0 29.96471977233887,45.83554077148439,0 29.9577693939209,45.78248977661134,0 29.93444061279297,45.72332000732422,0 29.88999938964845,45.76443099975587,0 29.80443954467773,45.73693084716797,0 29.79748916625977,45.71192932128906,0 29.86360931396484,45.66915893554688,0 29.73567962646485,45.60958862304689,0 29.67943954467773,45.69804000854492,0 29.69721984863282,45.78165054321289,0 29.63721084594727,45.82276916503906,0 29.649169921875,45.78248977661134,0 29.59693908691407,45.68777084350586,0 29.59527015686035,45.55221176147462,0 29.65991020202637,45.53496932983399,0 29.600830078125,45.47499084472656,0 29.64193916320801,45.43664932250978,0 29.73443984985352,45.47166061401367,0 29.75527954101563,45.44248962402345,0 29.73055076599121,45.22470855712892,0 29.66176986694336,45.21023941040039,0 29.67082977294922,45.28749084472656,0 29.63694000244141,45.35026931762695,0 29.56193923950195,45.39525985717773,0 29.31415939331055,45.43775939941407,0 29.00444030761719,45.32109832763672,0 28.78443908691406,45.32081985473633,0 28.75694084167481,45.26554107666016,0 28.79972076416016,45.23775863647462,0 28.74860000610352,45.22497940063477,0 28.5586109161377,45.24608993530273,0 28.31665992736816,45.33749008178711,0 28.27610015869141,45.43331909179688,0 28.21201896667481,45.44820022583009,0 28.23810005187988,45.50329971313478,0 28.28389930725098,45.52529907226563,0 28.47750091552734,45.50640106201172,0 28.52280044555664,45.51779937744141,0 28.53030014038086,45.54359817504884,0 28.51140022277832,45.56919860839844,0 28.55610084533692,45.58670043945313,0 28.53359985351563,45.60720062255859,0 28.52829933166504,45.64469909667969,0 28.48940086364746,45.66500091552734,0 28.52689933776856,45.71419906616212,0 28.58250045776367,45.71969985961914,0 28.58359909057617,45.76309967041017,0 28.67530059814453,45.77529907226563,0 28.69470024108887,45.79439926147461,0 28.68889999389648,45.81890106201172,0 28.75469970703125,45.83860015869142,0 28.76889991760254,45.86690139770508,0 28.74780082702637,45.92919921875,0 28.75580024719238,45.95999908447266,0 28.97190093994141,46.00669860839844,0 28.98060035705566,46.02970123291016,0 28.95719909667969,46.10559844970703,0 29.04109954833985,46.19390106201172,0 28.94939994812012,46.27080154418946,0 28.96500015258789,46.3119010925293,0 28.93219947814941,46.42829895019531,0 29.03470039367676,46.49530029296875,0 29.20499992370606,46.54140090942384,0 29.21940040588379,46.53279876708984,0 29.22830009460449,46.48469924926758,0 29.22640037536621,46.41690063476563,0 29.2007999420166,46.38140106201172,0 29.22419929504395,46.36529922485352,0 29.26390075683594,46.39860153198242,0 29.30669975280762,46.40219879150391,0 29.30080032348633,46.44499969482422,0 29.32390022277832,46.47639846801758,0 29.34749984741211,46.47639846801758,0 29.39310073852539,46.41609954833984,0 29.39609909057617,46.4380989074707,0 29.48360061645509,46.49219894409179,0 29.50749969482422,46.48109817504883,0 29.49970054626465,46.43220138549805,0 29.57609939575195,46.41999816894531,0 29.59079933166504,46.38330078125001,0 29.62669944763184,46.36920166015625,0 29.67280006408691,46.39139938354494,0 29.66329956054688,46.4286003112793,0 29.73310089111328,46.43939971923828,0 29.7332992553711,46.47809982299805,0 29.80170059204102,46.42559814453125,0 29.83029937744141,46.38809967041016,0 29.82719993591309,46.36169815063478,0 29.84830093383789,46.3483009338379,0 29.88470077514648,46.35110092163086,0 29.93000030517579,46.38359832763673,0 30.10390090942383,46.38190078735352,0 30.13419914245606,46.41559982299805,0 30.07309913635254,46.42279815673829,0 30.00690078735352,46.45669937133789,0 30.01860046386719,46.46969985961914,0 29.99889945983887,46.49610137939454,0 29.97060012817383,46.48809814453125,0 29.9286003112793,46.50529861450195,0 29.89859962463379,46.52999877929688,0 29.89579963684082,46.55110168457031,0 29.96890068054199,46.57529830932618,0 29.94829940795898,46.63690185546875,0 29.97279930114746,46.73440170288086,0 23.67137908935547,51.43165969848634,0 23.59208488464356,51.52827835083008,0 </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:53:57.883

2\. 预先计算每个国家的边界​​框。当一个位置在边界框内时，加载该国家的多边形并执行更准确的测试。您只需要加载并检查几个多边形。然后，您甚至可以从 KML 文件按需加载多边形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:35:44.143

我认为存储这些坐标的最佳方法是为每个只有一个 2D`float`选项卡的国家/地区创建一个非常简单的类（第一个 D 用于地理点编号，第二个 D 的大小为 2 并包含纬度或经度）

使用坐标列表，您可以创建一个列表`Region`（使用`Path`and ），如果 X,Y 点在您所在的国家/地区内，则`Region.setPath(Path, Region)`调用chack。`Region.contain(X, Y)`

# ruby-on-rails - 在块中定义字段标签 - 出错时，field_with_errors div 标签不在正确位置

> ID：13862978
> 
> 赞同：0
> 
> 时间：2012-12-13T15:23:15.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, label

我`validates_acceptance_of :terms, :message => "must be accepted"`在我的`user.rb`模型中使用，并且正在使用`bootstrap-sass`.

我的复选框代码在视图中如下所示：

```
<div class="control-group">
  <%= f.label :terms, :class => "control-label" do %>
    Accept <%= link_to('Terms of Use *', "#myTOUModal", :"data-toggle" => "modal") %>
  <% end %>
  <div class="controls">
    <%= f.check_box :terms %>
  </div>
</div> 
```

出于某种原因，如果在提交表单时未选中术语复选框，则会在表单顶部显示相应的错误消息，但`field_with_errors`div 类环绕复选框标签存在问题。

呈现页面的 HTML 如下所示：

```
<div class="control-group">
  <label class="control-label" for="user_terms">
    Accept <a href="#myTOUModal" data-toggle="modal">Terms of Use *</a>
  </label>
  <div class="controls">
    <input name="user[terms]" type="hidden" value="0" />
    <div class="field_with_errors">
      <input id="user_terms" name="user[terms]" type="checkbox" value="1" />
    </div>
  </div>
</div> 
```

结果是复选框字段标签在错误时未突出显示。有没有办法强制`field_with_errors`类的 div 标签放置在标签之后显示`<div class="control-group">`？为什么使用块来定义字段标签会影响`field_with_errors`标签放置？有人对此有经验吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:49:42.517

我认为这是一个错误。问题出在块中。无阻碍地定义您的标签，一切正常。

尝试类似：

```
<% modal_html = capture do >
  Accept <%= link_to('Terms of Use *', "#myTOUModal", :"data-toggle" => "modal") %>
<% end %>

<%= f.label :terms, modal_html, :class => "control-label" %> 
```

或帮手：

```
def modal_html
  #Q{Accept #{link_to('Terms of Use *', "#myTOUModal", :"data-toggle" => "modal")} }.html_safe
end 
```

# mono - MONO 3.0.2 + Ninject + MVC4：序列不包含匹配元素

> ID：13862991
> 
> 赞同：3
> 
> 时间：2012-12-13T15:23:59.350
> 
> 标签：mono, asp.net-mvc-4, ninject, ninject.web.mvc

我正在使用 VS2012 RC 并在 .NET 4.0 模式下创建了一个 MVC4 应用程序。我使用 Ninject + Ninject.MVC3 作为 DI 容器。它适用于我在 Windows 上的开发机器和另一台安装了 .NET 4.0 的机器，但是当我将它部署在具有 Mono 3.0.2、XSP 和 fastcgi + lighttpd 的 Linux 服务器上时，我只收到一条与 Ninject 相关的错误消息：

```
System.InvalidOperationException
Sequence contains no matching element

  at System.Linq.Enumerable.Single[DataAnnotationsModelValidatorProvider] (IEnumerable`1 source, System.Func`2 predicate, Fallback fallback) [0x00000] in <filename unknown>:0 
  at System.Linq.Enumerable.Single[DataAnnotationsModelValidatorProvider] (IEnumerable`1 source) [0x00000] in <filename unknown>:0 
  at Ninject.Web.Mvc.NinjectMvcHttpApplicationPlugin.Start () [0x00000] in <filename unknown>:0 
  at Ninject.Web.Common.Bootstrapper.<Initialize>b__0 (INinjectHttpApplicationPlugin c) [0x00000] in <filename unknown>:0 
  at Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[INinjectHttpApplicationPlugin] (IEnumerable`1 series, System.Action`1 action) [0x00000] in <filename unknown>:0 
  at Ninject.Web.Common.Bootstrapper.Initialize (System.Func`1 createKernelCallback) [0x00000] in <filename unknown>:0 
  at MvcApplication1.App_Start.NinjectWebCommon.Start () [0x00000] in <filename unknown>:0 
  at MvcApplication1.MvcApplication.Application_Start () [0x00000] in <filename unknown>:0 
```

澄清一下：我必须手动调用生成的 NinjectWebCommon 类的 Start 和 Stop 方法，因为该`[assembly: WebActivator.PreApplicationStartMethod...]`属性被忽略（我首先收到有关缺少默认构造函数的错误消息，这对于 DI ed 控制器是正常的）

我也尝试子类化 NinjectHttpApplication，但我得到了同样的错误。

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:57:10.180

根据我的经验，DI 容器在 Mono 中有点不稳定。如果您没有时间深入挖掘并修复可能是 Mono 错误，我会尝试不同的 DI 容器。

# java - 保存和加载 planeStore 时出现运行时错误

> ID：13862999
> 
> 赞同：0
> 
> 时间：2012-12-13T15:24:14.733
> 
> 标签：java, file-io, hashmap

嘿，我在保存和加载我的 planeStore 时遇到了运行时错误。保存选项将存储保存到用户选择的文本文件名中，然后在用户输入文件名时加载。

这是错误：

```
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.TreeMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at FileUtility.save(FileUtility.java:27)
    at MainApp.main(MainApp.java:274) 
```

**文件实用程序类**

```
import java.io.FileInputStream; 
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

/**
  * <i>Use this class to save and load any type of object (i.e. a container class (e.g. PersonStore), an account, a task, a person)
 *   @author     NMCG
 *   @version    1.0            
*/
public class FileUtility /*serialization - step 2*/
{

    /**
     * @param fileName relative or absolute file path (e.g. "name.txt" or "c:\\temp\\name.txt"
     * @param obj      address of any object to be stored (i.e. a container class (e.g. PersonStore), an account, a task, a person)
     */

    public static void save(String fileName, Object obj)
    {
        try
        {
            FileOutputStream fos = new FileOutputStream(fileName);
            ObjectOutputStream oos = new ObjectOutputStream(fos);

            oos.writeObject(obj);
            oos.flush();
            oos.close();
            fos.close();
        }
        catch(Exception e)
        {
            System.out.println("Something bad happened during the save phase!");
            e.printStackTrace();
        }
    }

    /**
     * @param  fileName relative or absolute file path (e.g. "name.txt" or "c:\\temp\\name.txt")
     * @return Object   address of the object loaded into RAM from file
     */

    public static Object load(String fileName)  // "test.txt"
    {
        Object objectIn = null;
        try
        {
            FileInputStream fis = new FileInputStream(fileName);
            ObjectInputStream ois = new ObjectInputStream(fis);

            objectIn = ois.readObject();

            ois.close();
            fis.close();
        }
        catch(Exception e)
        {
            System.out.println("Something bad happened during the save phase!");
            e.printStackTrace();
        }
        return objectIn;
    }
} 
```

店铺

```
case 9:
                    System.out.println("Store");
                    int storeChoice;
                    storeChoice = MenuMethods.getMenuChoice(
                                                    "1.Save." +
                                                    "\n2.Load.", 2,
                                                    "Please enter your choice:", "Error [1,2] Only");
                    switch (storeChoice) 
                    {
                    case 1:
                    System.out.println("Save");
                    String inputSave;
                    System.out.println("Please enter the save name:");
                    inputSave = keyboard.next();
                    System.out.println("Saving..............");
                    PlaneStore copyMyStore = airlineMap.copy();
                    System.out.println(copyMyStore);
                    //shallow copy would look like this...
                    PlaneStore shallowCopyMyStore;
                    //both variables point to same object
                    shallowCopyMyStore = airlineMap; 
                    //lets store and re-load the mystore object
                    FileUtility.save(inputSave, airlineMap);

                        break;

                    case 2:
                        System.out.println("Load");
                        String inputLoad;
                        System.out.println("Please enter the file name you want to load:");
                        inputLoad = keyboard.next();
                        System.out.println("Loading..............");
                        PlaneStore loadedStore = (PlaneStore)FileUtility.load(inputLoad);
                        System.out.println("\n--- RELOADED STORE CONTENTS ---");
                        loadedStore.print();
                    break;
                    }
                    break; 
```

任何人都可以看到有什么问题吗？