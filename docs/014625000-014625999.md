# StackOverflow 问答 14625000-14625999

# unix - UNIX 有效密码

> ID：14625000
> 
> 赞同：2
> 
> 时间：2013-01-31T11:46:29.473
> 
> 标签：unix, if-statement, cygwin, ubuntu-10.10

为什么在 Cygwin 终端中-if 语句有效
而 ubuntu-unix-不适用
于此代码：

```
#!/bin/sh
valid_password="pass"

echo "Please enter the password:"
read password

if [ "$password" == "$valid_password" ]
then
   echo "You have access!"
else
   echo "Access denied!"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:47:58.200

因为正确的语法`[`是：

```
[ a = b ] 
```

从您的错误消息中听起来您写道：

```
if ["$password" = "$valid_password" ] 
```

将其更改为：

```
if [ "$password" = "$valid_password" ] 
```

注意后面的空格`[`。`if`只需要一个shell命令，尝试运行它，并根据程序的退出代码`0`是否运行`if`语句中的命令。

在您的终端中，编写即：

```
user@localhost$ true; echo $?
0 
```

测试你的 if 语句：

```
user@localhost$ pass=pass; valid=pass
user@localhost$ if [ "$pass" = "$valid" ]; then echo 'You have access!'; fi 
```

正如@nullrevolution 所说，`!`如果你使用双引号，它会被评估，它会尝试运行你的shell历史中的最后一个命令，在这种情况下是匹配的`u`。

```
user@localhost$ uname
Linux
user@localhost$ !u
uname
Linux
user@localhost$ echo "!"
sh: !: event not found 
```

这是因为在`!`匹配双引号之前评估了，并且运行了 echo。如果您仍想使用双引号，则必须转义`!`引号外：

```
echo "Access denied"\! 
```

@nullrevolution 还说您可以尝试 with `bash`，它具有 if 语句中的表达式的内置语法。

```
#!/bin/bash

valid_password=pass

echo "Please enter the password:"
read password

if [[ "$password" == "$valid_password" ]]; then
    echo 'You have access!'
else
    echo 'Access denied!'
fi 
```

同样在您的程序中，我猜您不想在终端中回显密码，以关闭回显临时更改：

```
read password 
```

至

```
stty -echo
read password
stty echo 
```

如果您忘记写入`stty echo`以再次打开回显，只需`reset`在终端中写入，它会将终端重置为默认设置。

可以在此处找到有关 bourn shell 脚本的有用教程：

[http://www.grymoire.com/Unix/Sh.html](http://www.grymoire.com/Unix/Sh.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:57:47.680

@emil 指出了答案：

```
if [ "$password" = "$valid_password" ] 
```

代替

```
if [ "$password" == "$valid_password" ] 
```

另外：您是否授予脚本执行权限？尝试

```
chmod +x script_name 
```

# asp.net - 使用 gmail 作为 smtp 时遇到问题

> ID：14625004
> 
> 赞同：0
> 
> 时间：2013-01-31T11:46:39.997
> 
> 标签：asp.net, smtp, gmail

**代码**

![在此处输入图像描述](../Images/4c3d09d2977e384d65d34f17fa1561de.png)

**问题** 并收到此错误 ![在此处输入图像描述](../Images/d8bccd6a2b7610544700903f8a016dd4.png)

# ios - 使用 MKNetworking 图像上传 PHP 获取内部错误 500

> ID：14625008
> 
> 赞同：4
> 
> 时间：2013-01-31T11:46:56.150
> 
> 标签：ios, objective-c, image, upload, nsurlerrordomain

我已经从使用正常上传图像的方式（当时没有它工作）切换到使用 MKNetworking 来帮助我完成上传过程，我使用这种方式是因为我发现我得到了更好的错误响应并且它有助于解决我的问题。我收到了一个 NSLog 响应，读取错误

```
2013-05-03 10:52:25.961 atmebeta[2420:907] Returning num rows
2013-05-03 10:52:25.967 atmebeta[2420:907] Returning num sections
2013-05-03 10:52:34.607 atmebeta[2420:907] -[MKNetworkEngine reachabilityChanged:] [Line 198] Server [atmeapp.com] is reachable via Wifi
2013-05-03 10:52:37.066 atmebeta[2420:907] -[MKNetworkOperation operationFailedWithError:] [Line 1345] Friday, May 3, 2013, 10:52:37 AM Pacific Daylight Time
Request
-------
curl -X POST "http://atmeapp.com/addavatar.php" -d "email=ooo@ooo.com"
--------
Response
--------
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link rel="stylesheet" type="text/css" href="css/main.css" />
<!--[if lt IE 9]>
  <link rel="stylesheet" type="text/css" href="css/ie_8.css" />
<![endif]-->
</head>
<body>
    <div id="block_error">
        <div>
            <h2>Error 500 Internal Server Error</h2>
            <p>The web server is misconfigured please contact aaron@teknologenie.com</p>
<p>Please try to access the site later.</p>
        </div>
    </div>
</body>
</html>
, [The operation couldn’t be completed. (NSURLErrorDomain error 500.)]
2013-05-03 10:52:37.072 atmebeta[2420:907] Error Domain=NSURLErrorDomain Code=500 "The operation couldn’t be completed. (NSURLErrorDomain error 500.)" UserInfo=0x1d993d40 {Accept-Ranges=bytes, Server=Apache, Content-Length=693, Content-Type=text/html, Date=Fri, 03 May 2013 17:52:34 GMT}
2013-05-03 10:52:37.102 atmebeta[2420:907] -[MKNetworkOperation operationFailedWithError:] [Line 1353] State: 0 
```

我可以通过 html 表单成功上传图像，所以我确定我的 php.ini 很好，我允许上传的方式比我要求在我的 iPhone 上上传的方式更多。

文件上传DemoViewController.h

```
//
//  fileUploadDemoViewController.h
//  fileUploader
//
//  Created by Michael Roling on 5/7/12.
//  Copyright (c) 2012 NA. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "fileUploadEngine.h"

@interface fileUploadDemoViewController : UIViewController <UIActionSheetDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate>

@property (strong, nonatomic) fileUploadEngine *flUploadEngine;
@property (strong, nonatomic) MKNetworkOperation *flOperation;

@end 
```

文件上传DemoViewController.m

```
//
//  fileUploadDemoViewController.m
//  fileUploader
//
//  Created by Michael Roling on 5/7/12.
//  Copyright (c) 2012 NA. All rights reserved.
//

#import "fileUploadDemoViewController.h"
#import "MyClass.h"

@interface fileUploadDemoViewController ()

@end

@implementation fileUploadDemoViewController

@synthesize flUploadEngine = _flUploadEngine;
@synthesize flOperation = _flOperation;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)uploadPhoto:(id)sender {
    UIActionSheet *photoSourcePicker = [[UIActionSheet alloc] initWithTitle:nil
                                        delegate:self cancelButtonTitle:@"Cancel"
                                        destructiveButtonTitle:nil
                                        otherButtonTitles:  @"Take Photo",
                                        @"Choose from Library",
                                        nil,
                                        nil];

    [photoSourcePicker showInView:self.view];   
}

- (void)actionSheet:(UIActionSheet *)modalView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (buttonIndex)
    {
        case 0:
        {
            if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
                UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
                imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;
                imagePicker.delegate = self;
                imagePicker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff;
                imagePicker.allowsEditing = YES;
                [self presentViewController:imagePicker animated:YES completion:NULL];
            }
            else {
                UIAlertView *alert;
                alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                   message:@"This device doesn't have a camera." 
                                                  delegate:self cancelButtonTitle:@"Ok" 
                                         otherButtonTitles:nil];
                [alert show];                
            }
            break;
        }            
        case 1:
        {
            if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
                UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
                imagePicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;
                imagePicker.delegate = self;
                imagePicker.allowsEditing = YES;
                [self presentViewController:imagePicker animated:YES completion:NULL];
            }
            else {
                UIAlertView *alert;
                alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                   message:@"This device doesn't support photo libraries." 
                                                  delegate:self cancelButtonTitle:@"Ok" 
                                         otherButtonTitles:nil];
                [alert show];                
            }            
            break;
        }
    }
}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissViewControllerAnimated:YES completion:NULL];

    NSData *image = UIImageJPEGRepresentation([info objectForKey:UIImagePickerControllerOriginalImage], 0.1);

    self.flUploadEngine = [[fileUploadEngine alloc] initWithHostName:@"http://www.atmeapp.com" customHeaderFields:nil];

    NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                        [MyClass str], @"email",
                                       nil];      
    self.flOperation = [self.flUploadEngine postDataToServer:postParams path:@"/addavatar.php" ];
    [self.flOperation addData:UIImageJPEGRepresentation(image, 0.5) forKey:@"userfile" mimeType:@"image/jpeg" fileName:image];

    [self.flOperation addCompletionHandler:^(MKNetworkOperation* operation) {
        NSLog(@"%@", [operation responseString]);
        /*   
            This is where you handle a successful 200 response
        */
    }     
    errorHandler:^(MKNetworkOperation *errorOp, NSError* error) {
        NSLog(@"%@", error);
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:[error localizedDescription]
                                                       delegate:nil
                                              cancelButtonTitle:@"Dismiss"
                                              otherButtonTitles:nil];
        [alert show];        
    }];

    [self.flUploadEngine enqueueOperation:self.flOperation ];  

}
@end 
```

文件上传引擎.h

```
//
//  fileUploadEngine.h
//  fileUploader
//
//  Created by Michael Roling on 5/7/12.
//  Copyright (c) 2012 NA. All rights reserved.
//

#import "MKNetworkEngine.h"

@interface fileUploadEngine : MKNetworkEngine

-(MKNetworkOperation *) postDataToServer:(NSMutableDictionary *)params path:(NSString *)path;

@end 
```

文件上传引擎.m

```
//
//  fileUploadEngine.m
//  fileUploader
//
//  Created by Michael Roling on 5/7/12.
//  Copyright (c) 2012 NA. All rights reserved.
//

#import "fileUploadEngine.h"

@implementation fileUploadEngine

-(MKNetworkOperation *) postDataToServer:(NSMutableDictionary *)params path:(NSString *)path {

    MKNetworkOperation *op = [self operationWithPath:path
                                              params:params
                                          httpMethod:@"POST"
                                                 ssl:NO];
    return op;     
}

@end 
```

最后但并非最不重要的是，我的 php

```
$mysqli = new mysqli($host, $username, $password, $database);
    if ($stmt = $mysqli->prepare("UPDATE `user` SET imagepath=? WHERE email=?")) 
    {
        $stmt->bind_param('ss', $albumname, $email);

    $email = $_POST['email'];
    $uploaddir = 'images/users/';
    $file = basename($_FILES['userfile']['name']);
    $uploadfile = $uploaddir . $file;

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {

    }
    $albumname = $uploadfile;
    $stmt->execute();
        $stmt->close(); 
        }

    else {
        printf("Prepared Statement Error: %s\n", $mysqli->error);
    }

$mysqli->close(); 
```

我在我的服务器上的 php 日志中没有收到任何错误，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:20:28.367

看起来基本正确，我只是在 php 中做了一个 MkNetworkKit / 图像上传。我在这里发现的唯一错误是这条线

```
[NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"email", [MyClass str] 
```

您可能想要切换@"email" 和 [MyClass str]，使用 dictionaryWithObjectsAndKeys 时值应该在键之前。

这是我的实现（在 MKNetworkEngine 的子类中）：

```
-(MKNetworkOperation*) uploadImage:(UIImage*)image onSuccess:(EmptyBlock)successBlock onError:(MKNKErrorBlock)errorBlock {
    NSMutableDictionary *params = [[NSDictionary dictionary]mutableCopy];
    [params setValue:@"[YOUR_VALUE]" forKey:@"[YOUR_KEY]"];
    MKNetworkOperation *op = [self operationWithPath:@"[YOUR_PATH]" params:params httpMethod:@"POST"];
    [op addData:UIImageJPEGRepresentation(image, 0.5) forKey:@"userfile" mimeType:@"image/jpeg" fileName:@"[YOUR_FILENAME]"];

    [op onCompletion:^(MKNetworkOperation *completedOperation) {
    if(successBlock) {
        successBlock();
    }
    } onError:^(NSError *error) {

        TFLog(@"RCNetworkEngine.uploadError:%@, error:%@", url, [error localizedDescription]);
        if(errorBlock)
            errorBlock(error);
    }];
    [self enqueueOperation:op];
    return op;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T01:36:55.163

我通过切换到 AFNetwork 解决了我的问题，这是我的新代码

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    image.image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [self->image setImage:image.image];
    [self  dismissViewControllerAnimated:YES completion:NULL];
    NSURL *url = [NSURL URLWithString:@"http://atmeapp.com"];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
    NSData *imageData = UIImageJPEGRepresentation(image.image, 1);
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"email", [MyClass str],
                            nil];
    NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/addavatar.php" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:imageData name:@"userfile" fileName:[MyClass str] mimeType:@"image/jpeg"];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
        NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
    }];
    [httpClient enqueueHTTPRequestOperation:operation];

} 
```

我不知道为什么它会起作用，但无论如何......非常恼火。感谢大家的时间。

# sql - 为什么我的 sql 逻辑第一次运行失败但第二次失败？

> ID：14625019
> 
> 赞同：0
> 
> 时间：2013-01-31T11:47:25.870
> 
> 标签：sql, sql-server, sql-server-2008

我有这个sql：

```
SELECT
    sa.answertext
FROM dbo.tblsurveyanswer sa
            INNER JOIN dbo.tblsurvey s
                ON s.surveyid = sa.surveyid
            INNER JOIN dbo.tblquestion q
                ON q.questionid = sa.questionid
            INNER JOIN dbo.tblshqscriteria c
                ON c.shqscriteriaid = q.shqscriteriaid
            INNER JOIN dbo.tblshqsdescription d
                ON d.shqsdescriptionid = q.shqsdescriptionid
            INNER JOIN dbo.tblrepairpercentage rp
                ON rp.repairpercentageid = sa.repairpercentageid
WHERE 
(c.shqscriteria = 'qwerty')
OR 
(c.shqscriteria = 'zxcvb' AND ISNUMERIC(sa.answertext) = 1 AND CAST(sa.answertext AS float) < 5) 
```

我第一次执行它失败，“将数据类型 varchar 转换为浮点数时出错”。第二次*我执行成功 - 因为没有 'qwerty' 或 'zxcvb' shqscriteria，所以不返回任何行

*实际上有时我必须执行多达 8 次才能失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:51:53.147

不保证在 SQL Server 中评估谓词的顺序（当然也不保证是从左到右）。

所以：

```
c.shqscriteria = 'zxcvb' AND ISNUMERIC(sa.answertext) = 1 AND CAST(sa.answertext AS float) < 5 
```

它可能会尝试对返回 0 的`CAST`值进行操作。`ISNUMERIC()`评估谓词的实际顺序可能因许多不同的原因而有所不同 - 正如您所发现的，最轻微的事情可能会改变它。

Also, `ISNUMERIC` is a mostly useless function. `CAST('£' as float)` will fail, but `ISNUMERIC('£')` is `1`. It answers the question no-one has ever asked - "Can I convert this string into even just *one* of the numeric datatypes (I don't care which one)?"

The way to resolve this kind of issue is to split your query into two parts - the first of which selects appropriate data for conversion and stores the values in a (temp table/table variable), the second part actually performs the conversion. Or if you're on SQL Server 2012 or later, look into the [`TRY_` conversion functions](http://msdn.microsoft.com/en-us/library/hh974669.aspx):

```
c.shqscriteria = 'zxcvb' AND TRY_CAST(sa.answertext AS float) < 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:25:49.660

As long as you're not using aggregates, you should be able to rely on CASE's order of execution:

```
WHERE
...
OR
(
  c.shqscriteria = 'zxcvb' 
  AND 5 > CASE WHEN ISNUMERIC(sa.answertext) = 1      
    THEN CAST(sa.answertext AS float) 
    ELSE 6 
  END
) 
```

Note however that `ISNUMERIC(col) = 1` does not always mean that `col` is eligible to be converted to a *specific* numeric type.

# c# - 什么是不一致的可访问性错误？

> ID：14625023
> 
> 赞同：1
> 
> 时间：2013-01-31T11:47:34.687
> 
> 标签：c#, asp.net, class, interface

我正在使用自定义角色提供程序，为此我创建了一个`CustomRoleProvider`类并在其中实现了一些`RoleProvider`方法，就像这样

```
 public class CustomRoleProvider: RoleProvider
 {
 public override void CreateRole(string roleName)
    {
        throw new NotImplementedException();
    }

    public override bool DeleteRole(string roleName, bool throwOnPopulatedRole)
    {
        throw new NotImplementedException();
    }
  } 
```

所有方法都是公开的。但它显示错误

> 错误 4 - 可访问性不一致：基类“RoleProviderExample.RoleProvider”的可访问性低于类“RoleProviderExample.CustomRoleProvider”。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:49:38.850

你也应该`RoleProvider`上课`public`。

```
public class RoleProvider 
{
   ...
} 
```

基类的可访问性不能低于派生类。你的`RoleProvider`班级可能[`access modifiers`](http://msdn.microsoft.com/en-us/library/wxh6fsc7.aspx)比`CustomRoleProvider`班级少。

```
 public class CustomRoleProvider : RoleProvider
    {
        public void CreateRole(string roleName)
        {
            throw new NotImplementedException();
        }

        public bool DeleteRole(string roleName, bool throwOnPopulatedRole)
        {
            throw new NotImplementedException();
        }
    }

    interface RoleProvider
    {
           void CreateRole(string roleName);

           bool DeleteRole(string roleName, bool throwOnPopulatedRole);
    } 
```

实际上，您不必`public`在接口上编写关键字。接口成员是自动的`public`。它们不能包含任何访问修饰符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T11:56:11.390

`RoleProvider`您公开的基类`CustomeRoleProvider`不是`public`.

如果您声明`RoleProvider`为`public`错误将消失。您不必提供`RoleProvider`构造`public`函数。

* * *

或者，您可以将 的可访问性降低`CustomRoleProvider`到 的可访问性`RoleProvider`。这可能是最合适的答案，你需要暴露`CustomRoleProvider`在程序集之外吗？

* * *

如果`RoleProvider`是一个接口，那么按照惯例，它是错误命名的，您可以将其重命名为`IRoleProvider`. 无论如何，那时它仍然不太容易获得`CustomRoleProvider`。

像这样公开，

```
public interface IRoleProvider
{
    void CreateRole(string roleName);

    bool DeleteRole(string roleName, bool throwOnPopulatedRole);
} 
```

如果您不指定`interface`,`class`或`struct`,的可访问性，`internal`则暗示。

`interface`成员总是`public`。`class`和`struct`成员`private`除非另有说明。

最好指定，除非接口成员总是`public`.

您的实现可能如下所示，该`override`关键字不应用于接口实现，除非它们覆盖可覆盖的基类实现。

```
public class CustomRoleProvider : IRoleProvider
{
    public void CreateRole(string roleName)
    {
        throw new NotImplementedException();
    }

    public bool DeleteRole(string roleName, bool throwOnPopulatedRole)
    {
        throw new NotImplementedException();
    }
} 
```

如果你想明确地实现接口，

```
public class CustomRoleProvider : IRoleProvider
{
    public void IRoleProvider.CreateRole(string roleName)
    {
        throw new NotImplementedException();
    }

    public bool IRoleProvider.DeleteRole(
        string roleName, 
        bool throwOnPopulatedRole)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:55:32.843

尝试将 RoleProvider 类的访问说明符更改为 public 或 internal。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:49:00.930

这意味着您已经定义`RoleProvider`了……但是要成为一个私有类（这是真的吗？）。尝试将 RoleProvider 设为`public`.

# javascript - 如何禁用 ExtJS 中文本字段的 inputEl？

> ID：14625026
> 
> 赞同：3
> 
> 时间：2013-01-31T11:47:50.487
> 
> 标签：javascript, extjs

我正在使用 ExtJS，并且我有一个文本字段组件。我只想禁用`inputEl`文本字段组件（而不是标签）。

如果我使用`setDisabled()`文本字段的方法，那么它设置禁用`inputEl`但也标签。

我也使用过该`setReadOnly()`方法，但它不会将 . 设置为灰色`inputEl`，仅设置为`ReadOnly`.

有没有办法只禁用`inputEl`一个文本字段组件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:57:06.427

您必须将自定义类设置为`disabledCls`

```
.ux-item-disabled .x-form-field, .ux-item-disabled .x-form-display-field, .ux-item-disabled .x-form-trigger {
   filter: alpha(opacity=30);
   opacity: .3;
} 
```

见**[JSFiddle](http://jsfiddle.net/sran/Sj8zM/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:53:50.997

我从 Sencha 论坛得到了另一个答案（我认为在这里发布它可能也很有趣） **解决方案**：

使用**setOpacity**方法

```
Ext.onReady(function () {
var panel =Ext.create('Ext.form.Panel', {
    title: 'Basic Form',
    renderTo: Ext.getBody(),
    bodyPadding: 5,
    width: 350,
    items: [{
        xtype: 'textfield',
        fieldLabel: 'Field',
        name: 'theField',
      disabled: true
    }]        
});

 panel.down('[xtype=textfield]').labelEl.setOpacity(1); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-09T07:47:39.640

这个如何？

```
items: [{
  xtype: 'textfield',
  name: 'item',
  itemId: 'item',
  readOnly: true,
  listeners:{
    afterrender: function(f){
      c.inputEl.addCls('x-item-disabled');
    }
}] 
```

如果你在应用类之前包含一个 if ，你甚至可以让它发生变化

# mobile - 正文溢出：隐藏在移动浏览器中不起作用

> ID：14625027
> 
> 赞同：2
> 
> 时间：2013-01-31T11:47:50.943
> 
> 标签：mobile, touch, overflow

溢出：隐藏的正文元素在桌面浏览器上运行良好。但移动浏览器/触摸屏会忽略此行为。

```
<style>
body {overflow:hidden; height:100%; width:100%;}
.content {height:2000px; width:1000px;}
</style>

<body>
    <div class="content"> long content </div>
</body> 
```

我认为问题来自于触摸！？但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T20:59:57.563

不确定它是否有帮助，但我绕过它的方法是在 body 标签内使用另一个容器，该容器包装了其他所有内容并在其上放置溢出。IE

```
.siteContainer{
    position:relative;
    overflow:hidden;
} 
```

# perl - Perl 机械化响应仅是带有 https 的“”

> ID：14625029
> 
> 赞同：3
> 
> 时间：2013-01-31T11:47:53.007
> 
> 标签：perl, https, mechanize, is-empty

我对 perl 有点陌生，甚至对 Mechanize 也很陌生。到目前为止，当我尝试通过 http 获取站点时，没问题。

现在我需要使用 https 获取一个站点。我已经`Crypt::SSLeay`通过 PPM 安装了。

但是，当我使用`$mech->get($url)`时，这是我得到的唯一响应：

```
"<HTML></HTML>" 
```

我检查了状态和成功，两者都正常（200 和 1）。

这是我的代码：

```
use strict;
use warnings;
use WWW::Mechanize;
use Crypt::SSLeay;
$ENV{HTTPS_PROXY} = 'http://username:pw@host:port';
//I have the https_proxy env variable set globally too.

my $url = 'https://google.com';
//Every https site has the same response, 
//so I don't think google would cause problems.

my $mech = WWW::Mechanize->new(noproxy => 0);
$mech->get($url) or die "Couldn't load page";

print "Content:\n".$mech->response()->content()."\n\n"; 
```

如您所见，我在代理后面。我试过设置

```
$mech->proxy($myproxy); 
```

但无济于事。我什至试图将它提取到一个文件中，但是当我检查它时，我得到了相同的响应内容。

任何形式的建议都会受到赞赏，因为我只是一个初学者，还有很多东西要学。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:41:04.040

我认为答案就在这里：[如何强制 LWP 使用 Crypt::SSLeay 进行 HTTPS 请求？](https://stackoverflow.com/questions/8026524/how-do-i-force-lwp-to-use-cryptssleay-for-https-requests)

```
 use Net::SSL (); # From Crypt-SSLeay
 BEGIN {
   $Net::HTTPS::SSL_SOCKET_CLASS = "Net::SSL"; # Force use of Net::SSL
   $ENV{HTTPS_PROXY} = 'http://10.0.3.1:3128'; #your proxy!
   $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
 } 
```

# html - 将服务器端 html 文件加载到面板的内容中

> ID：14625037
> 
> 赞同：6
> 
> 时间：2013-01-31T11:48:29.893
> 
> 标签：html, extjs, extjs4

我正在创建一个变更日志，我决定从 .html 文件加载我的变更日志

我有

```
Ext.define('MeridianCRM.dialogs.recentСhanges.recentСhanges', {
    extend  : 'Ext.window.Window',
    title   : 'Последние изменения на сайте',
    modal   : true,
    height  : 400,
    width   : 500,
    resizable : false,
    html: 'changes.html',

    buttons: [{
        text: 'Закрыть',
        handler: function() {
            this.up('window').close();
        }
    }]
}); 
```

我怎么能解决这个问题？(html: 'changes.html') 如何将 html 加载到我的窗口中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-23T09:38:57.850

有一个更好的解决方案是使用面板[`loader`配置的声明：](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.panel.Panel-cfg-loader)

```
loader: {
    url: 'changes.html',
    autoLoad: true
}, 
```

这将导致这个全局代码。

```
Ext.define('MeridianCRM.dialogs.recentСhanges.recentСhanges', {
    extend  : 'Ext.window.Window',
    title   : 'Последние изменения на сайте',
    modal   : true,
    height  : 400,
    width   : 500,
    resizable : false,
    loader: {
        url: 'changes.html',
        autoLoad: true
    },
    buttons: [{
        text: 'Закрыть',
        handler: function() {
            this.up('window').close();
        }
    }]
}); 
```

这是可取的，因为我们不需要定义 a `listener`，也不需要定义`Ext.Ajax`调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T11:56:24.840

您需要异步加载 html，然后将其注入到您的组件中。所以：

```
Ext.Ajax.request({
    url: 'changes.html',
    success: function(response){
        // response.responseText will have your html content
        // you can then feed it into your component using update()
    }
}); 
```

因此，如果您使用 id 声明组件：

```
Ext.define('MeridianCRM.dialogs.recentСhanges.recentСhanges', {
    extend  : 'Ext.window.Window',
    title   : 'Последние изменения на сайте',

    id:     : 'my-log',

    ...
}); 
```

然后你可以这样做：

```
Ext.Ajax.request({
    url: 'changes.html',
    success: function(response){
        Ext.getCmp('my-log').update( response.responseText );
    }
}); 
```

您可以像这样将它“集成”到您的面板中：

```
Ext.define('MeridianCRM.dialogs.recentСhanges.recentСhanges', {
    extend  : 'Ext.window.Window',
    title   : 'Последние изменения на сайте',

    id:     : 'my-log',

    listeners: {
        'render': function()
            {
                Ext.Ajax.request({
                    url: 'changes.html',
                    success: function(response){
                        Ext.getCmp('my-log').update( response.responseText );
                    }
                });                
            }
    }

    ...
}); 
```

但请注意，如果返回的 html 包含`<head>`标签（因为 extjs 页面已经有标签），您可能会遇到问题。

# ios - 我应该为远程应用程序使用哪种观察者模式？

> ID：14625039
> 
> 赞同：0
> 
> 时间：2013-01-31T11:48:33.453
> 
> 标签：ios, objective-c, delegates, key-value-observing, nsnotifications

我正在构建一个远程应用程序，该应用程序正在接收其附件的不同状态。它正在接收诸如：电源状态开/关、音量状态 5、均衡器设置爵士乐等内容，除了将这些状态映射到具有选定或未选定状态的 UI 并将完成的更改发送回附件之外，别无他法。

**关于应用程序架构：** 应用程序与其附件连接，如 Apples [EADemo 项目](http://developer.apple.com/library/ios/#samplecode/EADemo/Introduction/Intro.html)中所示，使用[外部附件框架](http://developer.apple.com/library/ios/#featuredarticles/ExternalAccessoryPT/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009502)。`UITableViewCell`UI 是在充满s 的非重复定制中构建`UIButton`的。启动应用程序时，数据模型类将从示例中接收所有当前状态，`EADSessionController`并且必须使用上述模式之一将这些状态传达给 UI（单元格直接而不是 UITableViewController）。这将是一个独立的单页应用程序，看起来像一个真正的遥控器。

**考虑`NSNotification`，委托和 KVO（键值观察）我想弄清楚我应该将哪些模式用于这种特殊方法？**

*任何关于为什么选择其中一个的*答案以及*关于如何实施的简要描述*将不胜感激。如果您的答案是 KVO，请提供更多见解，因为到目前为止我从未使用过这种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:05:50.203

这真的取决于。

最松耦合的一种是使用 NSNotification 和 NSNotificationCenter，因为发布通知的实例不一定知道观察者，可以有多个观察者。

委托模式更加严格，通常只有一个委托对象接收消息。如果项目中的 UITableViewController 是唯一处理消息的实例（或者它会正确地将消息传播到其他组件），它仍然可以。

KVO 模式需要更精确设计的观察关系。您将必须并且必须关注 KVO 是如何实现的。而且KVO还允许一对多的观察。KVO 的缺点是，如果观察关系是动态的和瞬态的，您必须更加注意这些对象是如何被拆除的，否则您可能会遇到很多崩溃，例如向已释放的实例发送更新等。

如果您正在开发一个将交付给第 3 方使用的库，那么 NSNotification 可能是首选。

# apache-camel - Fuse ESB 7.1.0 上的“无法在 XASession 中回滚（）”错误

> ID：14625042
> 
> 赞同：0
> 
> 时间：2013-01-31T11:48:51.280
> 
> 标签：apache-camel, activemq, apache-servicemix, fuseesb, xa

昨天我尝试将我的包从 ServiceMix 4.4.1 迁移到 Fuse ESB Enterprise 7.1.0。带有本地事务的捆绑包可以正常工作，但其他带有 XA 事务的捆绑包不能正常工作。他们将带有以下消息的连续回溯写入日志文件：

```
13:30:29,283 | WARN | cation-stageOne] | PooledSession | 139 - org.apache.activemq.activemq-spring - 5.7.0.fuse-71-047 | Caught exception trying rollback() when putting session back into the pool, will invalidate. javax.jms.TransactionInProgressException: Cannot rollback() inside an XASession
javax.jms.TransactionInProgressException: Cannot rollback() inside an XASession
at org.apache.activemq.ActiveMQXASession.rollback(ActiveMQXASession.java:76)279:org.apache.activemq.activemq-core:5.7.0.fuse-71-047
at org.apache.activemq.pool.PooledSession.close(PooledSession.java:120)139:org.apache.activemq.activemq-spring:5.7.0.fuse-71-047
at org.springframework.jms.connection.JmsResourceHolder.closeAll(JmsResourceHolder.java:193)153:org.springframework.jms:3.0.7.RELEASE
at org.springframework.jms.connection.ConnectionFactoryUtils$JmsResourceSynchronization.releaseResource(ConnectionFactoryUtils.java:412)153:org.springframework.jms:3.0.7.RELEASE
at org.springframework.jms.connection.ConnectionFactoryUtils$JmsResourceSynchronization.releaseResource(ConnectionFactoryUtils.java:1)153:org.springframework.jms:3.0.7.RELEASE
at org.springframework.transaction.support.ResourceHolderSynchronization.afterCompletion(ResourceHolderSynchronization.java:98)148:org.springframework.transaction:3.0.7.RELEASE
at org.springframework.transaction.support.TransactionSynchronizationUtils.invokeAfterCompletion(TransactionSynchronizationUtils.java:168)148:org.springframework.transaction:3.0.7.RELEASE
at org.springframework.transaction.support.AbstractPlatformTransactionManager.invokeAfterCompletion(AbstractPlatformTransactionManager.java:996)148:org.springframework.transaction:3.0.7.RELEASE
at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerAfterCompletion(AbstractPlatformTransactionManager.java:971)148:org.springframework.transaction:3.0.7.RELEASE
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:799)148:org.springframework.transaction:3.0.7.RELEASE
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)148:org.springframework.transaction:3.0.7.RELEASE
at org.apache.aries.transaction.GeronimoPlatformTransactionManager.commit(GeronimoPlatformTransactionManager.java:76)
at sun.reflect.GeneratedMethodAccessor243.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25):1.6.0_35
at java.lang.reflect.Method.invoke(Method.java:597):1.6.0_35
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:58)114:org.springframework.osgi.core:1.2.1
at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:62)114:org.springframework.osgi.core:1.2.1
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invokeUnprivileged(ServiceTCCLInterceptor.java:56)114:org.springframework.osgi.core:1.2.1
at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:39)114:org.springframework.osgi.core:1.2.1
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.osgi.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:59)114:org.springframework.osgi.core:1.2.1
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)110:org.springframework.aop:3.0.7.RELEASE
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)110:org.springframework.aop:3.0.7.RELEASE
at $Proxy178.commit(Unknown Source)[:]
at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:257)153:org.springframework.jms:3.0.7.RELEASE
at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1058)153:org.springframework.jms:3.0.7.RELEASE
at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1050)153:org.springframework.jms:3.0.7.RELEASE
at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:947)153:org.springframework.jms:3.0.7.RELEASE
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886):1.6.0_35
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908):1.6.0_35
at java.lang.Thread.run(Thread.java:662):1.6.0_35 
```

它发生在一个空队列中。

我的 activemq 端点配置如下所示：

```
<osgi:reference id="osgiPlatformTransactionManager" interface="org.springframework.transaction.PlatformTransactionManager"/>
<osgi:reference id="osgiJtaTransactionManager" interface="javax.transaction.TransactionManager"/>

<bean id="jmstx" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsTxConfig" />
</bean>

<bean id="jmsTxConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="jmsXaPoolConnectionFactory"/>
    <property name="transactionManager" ref="osgiPlatformTransactionManager"/>
    <property name="transacted" value="true"/>
    <property name="cacheLevelName" value="CACHE_NONE"/>
    <property name="concurrentConsumers" value="${jms.concurrentConsumers}" />
</bean>

<bean id="jmsXaPoolConnectionFactory" class="org.apache.activemq.pool.XaPooledConnectionFactory">
    <property name="maxConnections" value="${jms.maxConnections}" />
    <property name="connectionFactory" ref="jmsXaConnectionFactory" />
    <property name="transactionManager" ref="osgiJtaTransactionManager" />
</bean>

<bean id="jmsXaConnectionFactory" class="org.apache.activemq.ActiveMQXAConnectionFactory">
    <property name="brokerURL" value="${jms.broker.url}"/>
    <property name="redeliveryPolicy">
        <bean class="org.apache.activemq.RedeliveryPolicy">
            <property name="maximumRedeliveries" value="-1"/>
            <property name="initialRedeliveryDelay" value="2000" />
            <property name="redeliveryDelay" value="5000" />
        </bean>
    </property>
</bean> 
```

该端点在骆驼上下文中非常容易使用，如下所示：

```
<route id="route">
    <from uri="jmstx:queue:somequeue" />
    <!-- some logic here -->
</route> 
```

如果有人可以帮助我解决这个问题，我会很高兴。如有必要，我可以提供更多细节。

* * *

**编辑**

似乎问题与 JMS 连接池有关：当我将连接工厂更改为简单的 ActiveMQXAConnectionFactory 时，异常消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T02:08:22.040

这是 5.7.0 版（很可能是早期版本）的 activemq-pool 中的一个已知问题，并且已报告[http://fusesource.com/issues/browse/ENTMQ-441](http://fusesource.com/issues/browse/ENTMQ-441)。

# java - 如何通过 Java/JavaFX 中的 MediaPlayer 播放内存中的声音

> ID：14625045
> 
> 赞同：1
> 
> 时间：2013-01-31T11:48:53.887
> 
> 标签：java, media-player, javafx-2

API 参考说`javafx.scene.media`支持从 URL 播放声音。就我而言，声音文件是：

1.  完全在内存中（在字节数组中），或
2.  即时下载到内存中

它不能保存到本地文件，但我想通过`MediaPlayer`.

如何创建内存中声音字节数组的 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:53:59.073

对不起，你不能，因为：

> 仅支持 HTTP、FILE 和 JAR URL。

根据[文档](http://docs.oracle.com/javafx/2/api/javafx/scene/media/Media.html#constructor_detail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T23:34:08.883

`com.sun.media.jfxmedia.AudioClip.create()`（`javafx.scene.media.AudioClip`Oracle 的 JFX 实现内部使用的类）提供了从内存字节数组创建音频剪辑的能力。但是，就`java8-b127`它而言（以及该类包含的其他有趣方法，例如`createSegment`）抛出一个`UnsupportedOperationException`.

源代码文档参考[http://javafx-jira.kenai.com/browse/RT-27007](http://javafx-jira.kenai.com/browse/RT-27007)但是，它已从 JIRA 中删除。所以，不要屏住呼吸等待它的实施。

# ruby - Facebook 实时更新 - 获取空数据

> ID：14625049
> 
> 赞同：0
> 
> 时间：2013-01-31T11:49:11.453
> 
> 标签：ruby, facebook, sinatra

我已将我的应用程序配置为进行实时更新。

![在此处输入图像描述](../Images/fedfb88a1400738fbfe9fbadc5ea735a.png)

验证已完成，当（文本）用户上传照片时，我会收到更新。这很好。但是POST数据完全是空的，没有数据。

```
post "/fb_realtime_updates" do
  puts params[:object]
end 
```

这将打印“{}”。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:37:09.403

[http://www.sinatrarb.com/intro#Accessing%20the%20Request%20Object](http://www.sinatrarb.com/intro#Accessing%20the%20Request%20Object)建议您应该使用

```
post "/fb_realtime_updates" do
  request.body.rewind  # in case someone already read it
  data = JSON.parse request.body.read
  puts data['object']
end 
```

我没有 Ruby/Sinatra 环境来测试它。

# javascript - 如何将高度设置为 ExtJs Grid？

> ID：14625054
> 
> 赞同：1
> 
> 时间：2013-01-31T11:49:18.560
> 
> 标签：javascript, extjs

我有以下结构：

```
TabPanel->FormPanel->Grid 
```

![在此处输入图像描述](../Images/f49b23fc62fec984911b99d1fde4db3a.png)

我想将网格的高度设置为 formpanle 上的所有可用空间。如果我`layout:`在 FormPanle 第一个文本字段中说 fit`，则获取 formpanel 的所有空间。如何做我想要的？

表单面板：

```
var search = new Ext.FormPanel({
                labelAlign: 'top',
                frame:true,
                title: 'Поиск',
                //layout:'fit',
                viewConfig:{ forceFit: true },
                //bodyStyle:'padding:5px 5px 0', 
```

网格面板：

```
var searchTab = new Ext.grid.GridPanel({
    store: searchStore,
    region: 'center',
    cm: searchCm, 
    layout:'fit',
    selModel: new Ext.grid.RowSelectionModel(),
    stripeRows : true,
    height: 390,
    autoExpandColumn:'expColumn',
    loadMask: true,
    id: 'searchTab',
    title:'Найденные объекты',
    autoScroll: true, 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T12:48:15.627

用户borderLayout 并在2 Region.North 和center 中划分。在北部区域添加顶部面板内容，在中心区域添加网格。

```
layout: 'border',
        items: [{
            title: 'North Region is resizable',
            region: 'north',     // position for region
            xtype: 'panel',
            height: 100
        },{
            title: 'Center Region',
            region: 'center',     // center region is required, no width/height specified
            xtype: 'panel',
            layout: 'fit',
            items: {
                new Ext.grid.GridPanel({
                    store: searchStore,
                    region: 'center',
                    cm: searchCm, 
                    layout:'fit',
                    selModel: new Ext.grid.RowSelectionModel(),
                    stripeRows : true,
                    height: 390,
                    autoExpandColumn:'expColumn',
                    loadMask: true,
                    id: 'searchTab',
                    title:'????????? ???????',
                    autoScroll: true
                })
            }
        }] 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-31T16:04:19.540

修复文本字段的高度和网格面板的 Try height:'100%'。Sushant Jain 的解决方案很好，但如果你想让网格占据剩余区域，那么也可以考虑 height:'100%' 。region: 'center' 有助于占据北部区域的剩余区域，但如果您固定高度或宽度，即使中心区域扩展以占据剩余区域网格面板也将保持在固定高度。

# iphone - 搜索栏子视图 UITextField iphone

> ID：14625058
> 
> 赞同：0
> 
> 时间：2013-01-31T11:49:34.900
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我以编程方式使用带有 uitextField 子视图的搜索栏。我得到如下图像：

![在此处输入图像描述](../Images/3aeb4b803bc76f50a9d40bfc371f99c3.png)

这里在上面的行中有一个深色。我怎样才能避免得到一条普通的细线？

我使用这个代码：

```
searchbar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, (self.view.frame.size.height*10)/100, self.view.frame.size.width, (self.view.frame.size.height*13)/100)];
searchbar.delegate=self;

for (searchBarSubview in [searchbar subviews]) {
    if ([searchBarSubview conformsToProtocol:@protocol(UITextInputTraits)] ) {
        @try {

            [[searchbar.subviews objectAtIndex:0] removeFromSuperview];
            searchbar.backgroundColor=[UIColor clearColor];

        }
        @catch (NSException * e) {
            // ignore exception
        }
    }
} 
```

# javascript - 如何防止节点缓存

> ID：14625063
> 
> 赞同：1
> 
> 时间：2013-01-31T11:49:49.877
> 
> 标签：javascript, graph, d3.js

我使用 d3.js 创建了一个动态的力导向网络地图。地图最初获取所有网络节点并正确显示它们，网络接口显示为将节点连接在一起的线。这一切都很好。

当用户决定过滤属于特定项目的网络接口时，这就是我遇到问题的地方。我重复使用相同的 d3.layout.force 实例并运行最初创建地图的相同函数，但使用新数据。为了简单起见，我对源代码进行了很多压缩，删除了所有与问题无关的内容。

```
var _this = {
    graphLayout     : d3.layout.force(),
    node : null,
    link : null,
    selectedProject : null,

    /*****************************************************
        Initialize engine
     *****************************************************/
    render : function() {
        // Creates the SVG container, sets up markers and gradients and whatnots
        // unnecessary for me to include here I think.

        // Start simulation
        _this.update();

        // Apply event handling and set up onTick
    },

    /*****************************************************
        Perform a data update. This will read data from an
        external url, and redraw all graphics.
     *****************************************************/
    update : function(project) {
        if (project !== undefined) {
            _this.selectedProject = project;
        }

        url = 'someService'+(!project ? '/GetNodes' : '/GetNodesByProjectId?projectId='+project.ProjectNumber);
        d3.json(url, function(json) {
            // Update nodes based on data
            // Apply data to graph layout
            _this.graphLayout
                .nodes(json.nodes)
                .links(json.links)
                // Even more parameters which are unnecessary for this question
                .start();

            // Join lines config
            _this.link = d3.select(" svg > .lineContainer").selectAll("g.link").data(_this.graphLayout.links());
            var group = _this.link.enter().append("svg:g")
                // More attributes and click event handling for the lines
                .attr('id',         function(d) { return d.InterfaceNumber; });
            group.append("svg:line");
            _this.link.exit().remove();

            // Node rendering config
            _this.node = d3.select(" svg > .nodeContainer").selectAll("g.node").data(_this.graphLayout.nodes());
            group = _this.node.enter().append("svg:g")
                // More attributes and click event handling for the nodes
                .attr('id',         function(d) { return d.Id; });
            group.append("svg:path")
                .attr("d", _this.nodeSVGPath)
                .attr("fill",       function(d) { return "url(#blackGradient)"; }); 
```

这是我遇到问题的地方：

```
 // Add label to node
            group.append('svg:text').attr('class', 'label').attr('transform', 'translate(25, 30)').text(function(d,i) { return d.Name; });
            _this.node.exit().remove();
        });
    }, 
```

第二次调用 update 时，此处放置在 .text 上的函数（d，i）似乎没有运行。是在 d3 中缓存了一些东西，还是我错过了什么？

这里的问题是节点（或行）包含正确的**数据**对象，但节点上呈现的文本不匹配，这使我相信d3js完全重用了svg对象，而是与新更新的数据交换了**数据**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:10:20.013

是的，您错过了这一重要事实。enter() 函数创建一个数据的子选择，其中还没有元素。这是你应该做的：

```
// Node rendering config
_this.node = d3.select(" svg > .nodeContainer").selectAll("g.node").data(_this.graphLayout.nodes());
group = _this.node.enter().append("svg:g")
// More attributes and click event handling for the nodes
    .attr('id', function(d) { return d.Id; });
group.append("svg:path")
    .attr("d", _this.nodeSVGPath)
    .attr("fill",       function(d) { return "url(#blackGradient)"; });
    // Add label to node
group.append('svg:text').attr('class', 'label').attr('transform', 'translate(25, 30)');

// now set the text for all g.node > g > text elements, new or old
_this.node.select('g > text').text(function(d,i) { return d.Name; });

_this.node.exit().remove(); 
```

因为 group 是 _this.node 的 enter() 子选择，所以它永远不会包含在每次调用之前创建的元素。最后，在您设置文本的位置，使用 _this.node 而不是 group 选择所有新的或旧的文本节点。这有帮助吗？

# orgchart - 如何在 Google 组织结构图中选择一些默认节点

> ID：14625065
> 
> 赞同：1
> 
> 时间：2013-01-31T11:49:57.553
> 
> 标签：orgchart

我是 Google 组织结构图的新手。

很难通过代码在我的图表中选择一些默认节点。

![组织结构图](../Images/d2ceb9c4ee0a88c5b8d6a5695bdaf934.png)

就像在这种情况下，我希望自动选择“jordan”。

注意：节点选择是动态的

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:28:08.843

最后由我自己完成。

```
var data = new google.visualization.DataTable();

data.addColumn('string', 'Group');
data.addColumn('string', 'Parent');
data.addColumn('string', 'ToolTip');

var response = [
                ['Mark', '', 'Mark'],
                ['John', 'Mark', 'John'],
                ['Mary', 'Mark', 'Mary'],
                ['Jordan', 'Mary', 'Jordan'],
                ['Eli', 'Mary', 'Eli'],
                ['Ivan', 'Mary', 'Ivan'],
                ['Sarah', 'John', 'Sarah'],
                ['Mike', 'John', 'Mike']
              ];
data.addRows(response);

var chart = new google.visualization.OrgChart(document.getElementById('grouporgdiv'));
chart.draw(data, {allowHtml:true});

var selectedArray = new Array();
var counter = 0;
var commaSeperatedDefaultValues = "Jordan";
var defaultValuesArray = commaSeperatedDefaultValues.split(",");

for(i=0;i<response.length;i++) {
    chart.setSelection([{row: i}]);
    var temp = chart.getSelection()[0];
    var a = defaultValuesArray.indexOf(data.getValue(temp.row, 2));
    if(a != -1)
        selectedArray[counter++] = temp;
}

chart.setSelection(selectedArray); 
```

# java - java.lang.NoSuchMethodError: Maven 项目中的 org.w3c.tidy.Tidy.setHideComments 错误

> ID：14625067
> 
> 赞同：0
> 
> 时间：2013-01-31T11:50:04.923
> 
> 标签：java, maven, maven-2

我有一个 Maven 项目。当我运行该项目时，我遇到了错误。错误的原因是

```
Caused by: java.lang.NoSuchMethodError: org.w3c.tidy.Tidy.setHideComments(Z)V 
```

我认为 jar 可能在 Maven 存储库中丢失。但我在那个存储库中找到了这个 jar。

我有`jtidy-4aug2000r7-dev.jar at C:\.m2\repository\jtidy\jtidy\4aug2000r7-dev`

有人能说出问题的可能原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:03:52.330

我想问题可能出在`jtidy.jar`. 您提到的当前版本相当旧（2000 年 8 月 4 日）。

我搜索了版本`4aug2000r7-dev.jar`并找到了 [API](http://grepcode.com/snapshot/repo1.maven.org/maven2/jtidy/jtidy/4aug2000r7-dev)。

我在[Tidy.java 中看](http://grepcode.com/file/repo1.maven.org/maven2/jtidy/jtidy/4aug2000r7-dev/org/w3c/tidy/Tidy.java?av=f)`setHideComments()`不到方法

请检查您没有同一个 jar 的多个版本。

试试`JTidy 8.0-SNAPSHOT` [这里](http://www.soapui.org/repository/maven2/jtidy/jtidy/8.0-SNAPSHOT/)。它包含方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:05:55.267

当您加载一个A`NoSuchMethodError`类时，会发生 A 类，该类需要在 JVM 已加载的 B 版本中不存在的类 B 上的方法。在这种情况下，JVM 期望找到一个带有签名的非私有方法`void setHideComments(boolean)`……但它不存在。

常见的原因有以下三种：

*   您已经更改或删除了 B 中的方法并重新编译了 B ...但也没有重新编译 A。

*   您有一些库 JAR 文件的错误版本；例如，包含 A 的 JAR 依赖于包含 B 的 JAR 的不同版本，而不是您列为依赖项的版本。

*   前一个版本的一个变体是，不知何故，在执行类路径上您有一个或另一个 JAR 文件的两个版本。

假设您没有修改 jtidy，则第一个解释不适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:01:46.823

很可能您的 jar 文件很旧（2000 年 8 月 4 日）并且可能是这些方法是后来添加的。尝试使用这个[罐子](http://mirrors.ibiblio.org/pub/mirrors/maven2/net/java/dev/ajax4jsf/ajax4jsf/1.0.6/ajax4jsf-1.0.6.jar)

# jquery - 如何让我的跨域 Greasemonkey 脚本在 Chrome 中工作，即使它需要 jQuery 和 Greasemonkey API 函数？

> ID：14625072
> 
> 赞同：1
> 
> 时间：2013-01-31T11:50:18.840
> 
> 标签：jquery, google-chrome, cross-domain, greasemonkey, userscripts

我正在努力让用户脚本在 chrome 上工作。我知道这个问题已经被问了数百次，但我仍然无法让它发挥作用......

```
// ==UserScript==
// @name        SRH hide closed cases
// @namespace   srhhideclosed
// @description For hiding appeals and reports that have been closed
// @include     http://www.seriousroleplayinghell.com*
// @include     http://seriousroleplayinghell.com*
// @include     http://www.srh.im.com*
// @include     http://srh.im.com*
// @version     1
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js
// ==/UserScript==

// Insert GM API for chrome
if (typeof GM_deleteValue == 'undefined') {
    GM_addStyle = function(css) {
        var style = document.createElement('style');
        style.textContent = css;
        document.getElementsByTagName('head')[0].appendChild(style);
    }

    GM_deleteValue = function(name) {
        localStorage.removeItem(name);
    }

    GM_getValue = function(name, defaultValue) {
        var value = localStorage.getItem(name);
        if (!value)
            return defaultValue;
        var type = value[0];
        value = value.substring(1);
        switch (type) {
            case 'b':
                return value == 'true';
            case 'n':
                return Number(value);
            default:
                return value;
        }
    }

    GM_log = function(message) {
        console.log(message);
    }

    GM_openInTab = function(url) {
        return window.open(url, "_blank");
    }

     GM_registerMenuCommand = function(name, funk) {
    //todo
    }

    GM_setValue = function(name, value) {
        value = (typeof value)[0] + value;
        localStorage.setItem(name, value);
    }
}

function toggleHidden(){
    if(GM_getValue("SRHhidden",0) == 1){
        GM_setValue("SRHhidden", 0);
    }else{
        GM_setValue("SRHhidden", 1);
    }
    hide(1000)
}

function hide(speed){
    if(GM_getValue("SRHhidden",0) == 1){
        $('s').closest('tr').fadeIn(speed);
    }else{
        $('s').closest('tr').fadeOut(speed);
    }
}

if(document.title == "Serious Roleplaying Hell - Appeals" || document.title == "Serious Roleplaying Hell - Admin/Player Abuse Reports" ){
    var TDHeads = document.getElementsByClassName("thead");
    var Head = TDHeads[1];
    var sp1 = document.createElement("div");
    sp1.style.cssFloat = "right";
    sp1.style.margin = "0 0 0 6px";
    sp1.innerHTML = "<span class='smalltext'><strong>| <a id='hideToggle'>Hide/Show closed threads</a></strong></span>";
    Head.insertBefore(sp1, Head.firstChild);
    var toggle = document.getElementById('hideToggle');
    toggle.addEventListener('click',toggleHidden,true);
    var style = "#hideToggle:hover{cursor:pointer} #hideToggle{color:#ffffff;}"
    GM_addStyle(style);

    hide(0);
} 
```

那么它需要做什么，如果线程关闭，这个论坛会显示线程主题条纹。出于某种原因，我需要隐藏所有已关闭的线程，以便仅查看打开的线程。我在 Firefox 上运行此脚本，但`@require`Chrome 不支持。

我试过[如何在 Google Chrome 的 Greasemonkey 脚本中使用 jQuery？](https://stackoverflow.com/questions/2246901/how-can-i-use-jquery-in-greasemonkey-scripts-in-google-chrome)以及[如何很好地使用 jQuery 和 Greasemonkey](http://joanpiedra.com/jquery/greasemonkey/)。但是，我不能在 Chrome 中工作。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:18:54.757

使用 Tampermonkey 而不是将其作为扩展程序打开

# sql - 如何从不同的表中获取相同的列

> ID：14625073
> 
> 赞同：1
> 
> 时间：2013-01-31T11:50:20.330
> 
> 标签：sql, sql-server

嗨，我有如下表...

A (id,name) B(id,name) c(id,name)

现在我想获取每个表的名称，这样就不会有交叉产品表。即，总行数不会超过最大行数表。如果数据低于 exp

```
  对于表 A
身份证名称
1滴
2 阿米特
3 皮尤什
4 顶

对于表 B
身份证名称
1滴
4 顶

对于表 C
身份证名称
2 阿米特
3 皮尤什

```

然后输出应该如下所示

```
节点名_A 节点名_B 节点名_C
Dilip Dilip NULL
阿米特 NULL 阿米特
Piyush NULL Piyush
顶顶 顶顶 NULL

```

在此表中是包含 id 和节点的所有条目的基表，但其他表可能包含较少数量的条目或也可能包含重复条目。

请告诉我我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:40:59.767

在连接中使用`FULL JOIN`with `COALESCE`：

```
select nodename_A = A.name
  , nodename_B = B.name
  , nodename_C = C.name
from A
  full join B on A.id = B.id
  full join C on coalesce(A.id, B.id) = C.id
order by coalesce (A.id, B.id, C.id) 
```

您可以在此处查看运行的代码示例：

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/60517/2)。

好的，根据我现在假设的新评论：

1.  表 A 将包含**所有**名称记录。
2.  其他表中可能存在重复项。

这个新查询将适用于上述场景：

```
select nodename_A = A.name
  , nodenameB = case when exists (select 1 from B where A.id = B.id) then A.name end
  , nodenameC = case when exists (select 1 from C where A.id = C.id) then A.name end
from A 
```

[新的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/b8b88/3)，现在数据中有重复项。

希望这对你现在有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:44:17.867

我认为几个外连接应该这样做：

```
Select a.name as aName, b.name as bName, c.name as cName
From A
LEFT join B on a.id = b.id
LEFT join C on a.id = c.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:10:49.383

枢轴技巧怎么样？

只是一个不同的解决方案..

我想完整的外连接解决方​​案更容易阅读

反正..

如果您真的想要每行的所有列中的名称相同，或者如果不存在则为 null

你应该做这样的事情

```
select * 
from(   select name as row
                      ,'Table A' as [table]
                      ,name
                 from [table A]

                union all              
                select name as row
                     ,'Table B' as [table]
                     ,name
                from [Table B]      

               union all 
               select name as row
                    ,'Table C' as [table]
                    ,name
               from [Table C]       
)V
PIVOT(max(v.name) for [table] in ([Table A],[Table B],[Table C]))P
order by row 
```

结果集看起来像这样

```
Table A        Table B       Table C
Dilip           Dilip          NULL
Amit            NULL           Amit
Piyush          NULL           Piyush
Sumit           Sumit          NULL 
```

如果您只想要每个表上的名称列表，

相同的名字不需要在同一行..应该做这样的事情

```
select * 
from(   select ROW_NUMBER() over (order by name) as row
                      ,'Table A' as [table]
                      ,name
                 from [table A]

                union all              
                select ROW_NUMBER() over (order by name) as row
                     ,'Table B' as [table]
                     ,name
                from [Table B]      

               union all 
               select ROW_NUMBER() over (order by name) as row
                    ,'Table C' as [table]
                    ,name
               from [Table C]       
)V
PIVOT(max(v.name) for [table] in ([Table A],[Table B],[Table C]))P
order by row 
```

结果集看起来像这样

```
Table A        Table B       Table C
Amit            Dilip          Amit
Dilip           Sumit          Piyush
Piyush          NULL           NULL
Sumit           NULL           NULL 
```

# ios - 如何切换 UITableView 单元格选择状态

> ID：14625078
> 
> 赞同：3
> 
> 时间：2013-01-31T11:50:47.710
> 
> 标签：ios, ios5, uitableview, ios6

我有一个带有自定义单元格的 UITableView，该单元格包含一个 UIImageView 和一个 UILabel。现在，当我第一次加载表格时，它会在每个单元格上加载相同的图像和不同的标签，这些标签来自 LabelArray。

现在我说的图像是一个单选按钮，所以当用户单击单元格时，图像会发生变化。如果用户再次单击它会更改为默认状态。

为此，我使用了这个函数，并且在我的 customcell 类中声明了一个名为 selectionStatus 的 bool 变量。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell * cell = (CustomCell* )[tableView cellForRowAtIndexPath:indexPath];

    if(indexPath.row == 0)
    {
        if(cell.selectionStatus == TRUE)
        {           
            //Do your stuff
           cell.selectionStatus = FALSE;
        }
        else
        {
            //Do your stuff
            cell.selectionStatus = TRUE;
        }
    }

    if(indexPath.row == 1)
    {
        if(cell.selectionStatus == TRUE)
        {           
            //Do your stuff
           cell.selectionStatus = FALSE;
        }
        else
        {
            //Do your stuff
            cell.selectionStatus = TRUE;
        }
    }
} 
```

这很好用，（但我想知道它是否是正确的方法，或者我们可以检查 cell.selected 属性）并且我能够获得这种效果。但是现在当我关闭视图并再次打开它时

使用@Anil 根据以下评论进行编辑

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

    if([self.checkedIndexpath count]  == 0)
    {
        [tableCell.selectionImage setImage:@"xyz.png"];
    }
    else
    {        
        for (int i =0; i <[self.checkedIndexPath count]; i++)
        {
            NSIndexPath *path = [self.checkedIndexPath objectAtIndex:i];
            if ([path isEqual:indexPath])
            {               
                [tableCell.selectionImage setImage:@"abc.png"]
            }
            else
            {
                 [tableCell.selectionImage setImage:@"xyz.png"]            
             }
    }
return tableCell; 
```

问候兰吉特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-26T18:48:20.400

切换 UItableViewCells 的另一个选项...

如果单元格已被选中，在 willSelectRowAtIndexPath 中为 NSIndexPath 返回 nil，同时设置您的 _selectedIndexPath 实例变量。

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    if (cell.selected) {
        [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
        [self.tableView.delegate tableView:self.tableView didDeselectRowAtIndexPath:indexPath];
        indexPath = nil;
    }

    _selectedIndexPath = indexPath;

    return indexPath; 
} 
```

在 didSelectRowAtIndexPath 和 didDeselectRowAtIndexPath 中，根据属性 cell.selected ... 更新您的单元格

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    if (cell.selected) {
        // do stuff
    } else {
        // do stuff
    }
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    if (cell.selected) {
        // do stuff
    } else {
        // do stuff
    }; 
} 
```

最后在 viewDidLoad 中设置 clearsSelectionOnViewWillAppear 属性...

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.clearsSelectionOnViewWillAppear = NO;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:01:59.213

您必须将所选行的索引路径保存在didSelectRowAtIndexPath中并检查cellForRowAtIndexPath中的索引路径：设置相应的图像

你要多选吗？试试这个...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
CustomCell * cell = (CustomCell* )[tableView cellForRowAtIndexPath:indexPath];

if(indexPath.row == 0)
{
    if(cell.selectionStatus == YES)
    {     
      [self.checkedIndexPaths addObject:indexPath];
        //Do your stuff
       cell.selectionStatus = NO;
    }
    else
    {
        [self.checkedIndexPaths removeObject:indexPath];
        //Do your stuff
        cell.selectionStatus = YES;
    }
}
} 
```

 **像这样在 cellForIndexPath 中 **编辑****

 **```
 // Set the default image for the cell. imageXYZ   
for (NSIndexPath *path in self.checkedIndexPath) 
{
    if ([path  isEqual:indexPath])
    {
        //set the changed image for the cell. imageABC
    }
    // no need of else part
} 
```

做我们将看到的确切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:57:44.307

在您的模型类中获取一个布尔值并在 didSelectRow 方法上更新它并重新加载表。在 cellForRowAtIndexPath 中这样检查。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

 After making your cell check like that 

    ModelClass *yourModel=[self.yourArray objectAtIndex:indexPath.row];
   if(yourModel.selection)
     [cell.customImage setImage:[UIImage imageName:@"selected"]; 
  else
     [cell.customImage setImage:[UIImage imageName:@"un_selected"]; 
```

}

检查此链接 [https://github.com/adnanAhmad786/Quiz-View--TableView](https://github.com/adnanAhmad786/Quiz-View--TableView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-20T14:15:40.597

1.  首先，为了切换目的，在 tableview 单元格类中声明一个 bool 值 selectionStatus，如下所示：

    @property(nonatomic)BOOL 选择状态；

2.  声明一个 NSMutableArray 来存储选定的索引路径（用于多选目的）

    self.checkedIndexPaths = [[NSMutableArray alloc] init];

3.  在 didSelectRowAtIndexPath

    一种。如果布尔值 selectionStatus 为 No 将 indexPath 插入 NSMutableArray checkedIndexPaths 并设置 cell.selectionStatus = YES

    湾。如果布尔值 selectionStatus 为 Yes 从 NSMutableArray 中删除 indexPath 并设置 cell.selectionStatus = NO

    C。每次重新加载 tableView

找到下面的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    tableCell = [self.tableView cellForRowAtIndexPath:indexPath];

        if(cell.selectionStatus == YES)
        {
            [self.checkedIndexPaths removeObject: indexPath];
            cell.selectionStatus = NO;

        }
        else
        {

            [self.checkedIndexPaths addObject: indexPath];
            cell.selectionStatus = YES;

        }

    [self.tablee reloadData];
} 
```

4.  在 cellForRowAtIndexPath 中

    一种。首先将单元格图像设置为未选中，即此处的 xyz.png

    [tableCell.selectionImage setImage:[UIImage imageNamed:@"xyz.png"]];

    湾。将图像设置为检查 NSMutable 数组 self.checkedIndexPaths 中的所有索引路径

    ```
    for (NSIndexPath *path in self.checkedIndexPaths)
    {
        if ([path  isEqual:indexPath])
        {
            [tableCell.selectionImage setImage:[UIImage imageNamed:@"abc.png"]];
        }

    } 
    ```**

# asp.net - asp.net gridview 绑定日期格式不适用于更新

> ID：14625087
> 
> 赞同：0
> 
> 时间：2013-01-31T11:51:15.790
> 
> 标签：asp.net, datetime, gridview, date-format

我有一个带有 TemplateField 列的 GridView，它显示来自数据源的 DateTime。

```
<Columns>
    <asp:CommandField ShowEditButton="True" />

    <asp:TemplateField HeaderText="Start Date">
        <EditItemTemplate>
            <asp:TextBox ID="txtDateStart" runat="server" 
                Text='<%# Bind("dtDateStart", "{0:dd/MM/yyyy}") %>'</asp:TextBox>

        </EditItemTemplate>
        <ItemTemplate>
            <asp:Label ID="Label1" runat="server" 
                Text='<%# Bind("dtDateStart", "{0:dd/MM/yyyy}") %>'></asp:Label>
         </ItemTemplate>

    </asp:TemplateField>
</Columns> 
```

以正确的格式显示日期可以正常工作。请注意，格式以 DAY 开头，后跟 MONTH。

当我切换到编辑模式时，将 TextBox 中的日期更改为“ **31-01-2013”**​​并按 GridView 的更新链接我收到一个错误： *无法将参数“dtDateStart”的值从“System.String”转换为“System” .DateTime'* 该错误是由 GridView 生成的，而不是我自己的代码。它发生在我的 DataSource 的 UpdateMethod 被调用之前。

当我输入**“01-31-2012”**时，数据被正确处理，值被更新到数据库中。

不知何故，当显示日期时，它使用格式**dd-MM-yyyy**（就像我需要的那样）但是当它从 TextBox 中读取新值时，它使用**MM-dd-yyyy**

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:52:22.003

感谢您的回复。我不知道网站内的文化设置。我假设用日期格式证明绑定函数就足够了。

到目前为止，我已经实现了以下解决方法，希望对其他人有用：

我在我的类中添加了一个额外的属性，它是字符串类型的。这个属性我只用于绑定到gridview。

```
// Original Date property //
public DateTime dtDateStart { get; set; }

// Additional Date property of type string // 
public string sDateStart
{
    get
    {
        return dtDateStart.ToString("dd/MM/yyyy");
    }
    set
    {
        dtDateStart = DateTime.ParseExact(value, "dd/MM/yyyy", null);
    }
} 
```

我不确定这是否应该被标记为答案。但也许其他人也可以将其用作快速解决方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T07:01:21.883

我想你可以这样使用

```
 <EditItemTemplate>
            <asp:TextBox ID="txtDateStart" runat="server" 
                Text='<%# Convert.ToDateTime(Bind("dtDateStart")).ToString("dd/MM/yyyy") %>'</asp:TextBox>

        </EditItemTemplate> 
```

这会帮助你。

# java - 创建条目列表并使每个条目可点击

> ID：14625091
> 
> 赞同：3
> 
> 时间：2013-01-31T11:51:30.120
> 
> 标签：java, swing, list, jlist, jtree

我正在尝试创建一个具有两个窗格的 UI。

在左窗格中，我显示文件列表，右窗格显示内容。

现在，我希望左窗格中的文件列表看起来像一个普通列表。但是当我单击此列表中的条目时，特定文件的内容应显示在右窗格中。

如何使用 Swing 实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:28:50.720

在这里，我`JList`在左侧和`JTextArea`右侧的帮助下做了一个简短的示例。我已经习惯于`ListSelectionListener`更改项目列表。`LayoutManager`根据您的方便使用。

![在此处输入图像描述](../Images/4711c6c0327b3da9eda2d7189904e63c.png)

```
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class JListTest {

    private JList jList1;
    private JPanel jPanel1;
    private JTextArea jTextArea1;

    public JListTest() {
        initComponents();
    }

    private void initComponents() {
        JFrame f = new JFrame();
        jPanel1 = new JPanel();
        jList1 = new JList();
        jTextArea1 = new JTextArea();

        jList1.setModel(new AbstractListModel() {

            String[] strings = {"Item 1", "Item 2"};

            @Override
            public int getSize() {
                return strings.length;
            }

            @Override
            public Object getElementAt(int i) {
                return strings[i];
            }
        });
        jList1.addListSelectionListener(new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent evt) {
                jList1ValueChanged(evt);
            }
        });

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);

        jPanel1.add(jList1);
        jPanel1.add(jTextArea1);
         f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.add(jPanel1);
        f.pack();
        f.setVisible(true);
    }

    private void jList1ValueChanged(javax.swing.event.ListSelectionEvent evt) {
        //set text on right here
        String s = (String) jList1.getSelectedValue();
        if (s.equals("Item 1")) {
            jTextArea1.setText("You clicked on list 1");
        }
        if (s.equals("Item 2")) {
            jTextArea1.setText("You clicked on list 2");
        }
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JListTest();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T11:55:55.260

您可能想查看这个[JTree 示例](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#create)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T11:58:24.000

一些示例供参考：

*   [`FileBrowser`](https://codereview.stackexchange.com/q/4446/6692)在左侧使用 a`JTree`并在右侧使用嵌套的详细信息面板。

*   [`ImageDisplay`](https://stackoverflow.com/a/4054307/230513)在左侧嵌入自定义`JFileChooser`并在右侧显示可滚动的图像。

*   [`CheckTable`](https://stackoverflow.com/a/13919878/230513)`JTable`左边显示a ，右边显示a `DisplayPanel`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-31T11:58:55.710

使用`JList.addListSelectionListener(ListSelectionListener)`.

有关更多[示例](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html#eg)，请参阅[*如何编写列表选择侦听器*](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-31T11:57:39.727

首先，你还没试过，对吧？Swing 几乎完成了与听众相关的所有输入。查看鼠标监听器，或调整下面给出的 awnser

[https://stackoverflow.com/a/4344762/258418](https://stackoverflow.com/a/4344762/258418)

为了完整起见，我在这里引用它：

```
String[] items = {"A", "B", "C", "D"};
JList list = new JList(items);

list.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent evt) {
        JList list = (JList)evt.getSource();
        if (evt.getClickCount() == 2) {
            int index = list.locationToIndex(evt.getPoint());
        } else if (evt.getClickCount() == 3) {   // Triple-click
            int index = list.locationToIndex(evt.getPoint());

        }
    }
}); 
```

我相信您也可以单击一下，...如果不写评论

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-31T11:52:32.117

看看[这个教程](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。它解释了如何在 Swing 中使用列表，包括注册点击事件所必需的[事件处理程序。](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#selection)

# php - php 博客不会显示前 2 个数据库行

> ID：14625094
> 
> 赞同：0
> 
> 时间：2013-01-31T11:51:30.690
> 
> 标签：php, mysql

我正在编写自己的简单博客。到目前为止，我只剩下 1 个非常恼人的错误。如果我的数据库中有 4 行数据，则前 2 行（具有最低 ID）将不会显示。因此，如果我添加新的第三行，则只有第一行会弹出我的屏幕，并且在第三行出现之前需要 2 个新帖子。如果我翻转 ID 的序列，如果我的数据库中有 2 个无用的帖子，它确实有效。但是我当然希望更高的 id 显示在顶部。

以下是将数据库信息放在屏幕上的代码：

```
<?php
require('config.inc.php');
require('template.inc.php');
require('functions.inc.php');
include_once('insert.php');

$query="SELECT * FROM blog ORDER BY ID DESC";
$result=mysql_query($query);

$db_field = mysql_fetch_assoc( $result );
mysql_fetch_assoc( $result );

mysql_close();

htmlOpenen('ServerSideBlog');
while ($db_field = mysql_fetch_assoc($result) ) {
echo'
<span class="post">
    <h1>'.$db_field['title'].'</h1>
    <h2>'.$db_field['date'].'</h2>
    <p>'.$db_field['contents'].'</p>
    <h3>Hoogachtend, Sincerely, Aufrichtig, sinceramente,</h3>
    <h4>'.$db_field['author'].'</h4>
';
}
htmlSluiten();
?> 
```

这里是在数据库中添加帖子的代码：

```
<?php
$db_host = "db.jxxxxx.com";
$db_username = "md2xxxx230";
$db_pass = "J9xxxx58";
$db_name = "md2xxxxx230";

@mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to      mysql");
@mysql_select_db("$db_name") or die ("no database");

if ($_POST['parse_var'] == "new"){

    $title=$_POST['title'];
    $contents=$_POST['contents'];
    $author=$_POST['author'];
    $date=$_POST['date'];
    $date = strftime("%b %d, %y", strtotime($date));

    $sqlcreate = mysql_query("INSERT INTO blog (date, title, contents, author)
            VALUES(now(),'$title','$contents','$author')");
}

?> 
```

我找不到任何问题的解决方案......希望我能在这里得到一些遮阳篷:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:55:58.753

你为什么把这个放在while循环之前？

```
$db_field = mysql_fetch_assoc( $result );
mysql_fetch_assoc( $result );

mysql_close(); 
```

其次，您之前关闭了 mysql 连接 -

```
while ($db_field = mysql_fetch_assoc($result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:57:18.550

你`mysql_fetch_assoc`在三个地方打电话。`while`在进入循环之前两次。这两次返回前两行。因此，当您进入`while`循环时，您从第 3 行开始。由于显示帖子的代码在`while`循环内，显然它不会显示前两个帖子。

删除行

```
$db_field = mysql_fetch_assoc( $result ); 
```

和

```
mysql_fetch_assoc( $result ); 
```

并移动

```
mysql_close(); 
```

在你的`while`循环之后，它很可能会做你想做的事。

**边注：**

将数据添加到数据库的方式非常不安全。该行

```
 $sqlcreate = mysql_query("INSERT INTO blog (date, title, contents, author)
            VALUES(now(),'$title','$contents','$author')"); 
```

加上没有过滤插入的数据表明它非常容易受到注入攻击。可以执行任意 SQL 代码和 Javascript。

*给你一些信息：*

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

# javascript - 如何使用javascript更改功能来切换段落？

> ID：14625095
> 
> 赞同：1
> 
> 时间：2013-01-31T11:51:39.860
> 
> 标签：javascript

我想通过复选框切换输入。这是代码：

## CSS：

```
.moveaway{ position:absolute;top:-999rem;} 
```

## html

```
<p>
<label><?php _e('Setup Template')?></label>
<input class="check-toggle" name="toggle" type="checkbox" value="1" <?php echo $template ? 'checked="checked' : '';?> />
</p>
<p id="template-input" class="<?php echo $template ? '' : 'moveaway'?>">
<lable for="template-name">Template Name</lable>
<input id="template-name" type="text" name="template-name"  value="<?php echo $tamplate; ?>" />
</p> 
```

## javascript:

```
$("input.check-toggle").change(function() {
  if ($(this).is(':checked')) {
    $("p#template-input").attr('class','');
  }else{
    $("p#template-input").attr('class','moveaway');
    $("input#template-name").val(0);
  }
}); 
```

上面的代码在模板名称输入字段为空时有效。设置模板名称字段值后，包装器`p#template-input`将合并到包含检查切换输入的 p 中。

我不明白更改功能是如何做到的。我想了解如何获得可以通过复选框切换 p#template-input 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:20:52.657

我对您的代码进行了一些更改，并且可以正常工作。

看[演示](http://jsfiddle.net/U4vQr/)。

因此，首先我将 更改`<p>`为`<div>`，最好将位置从块更改为内联位置，但是您仍然可以更改它在 CSS 上的属性，以继续使用`p`or from `div`to 仍然在行中，甚至放在`p`.

然后对于我使用过的*类*`addClass`and `removeClass`，然后更改它的属性更好。

正如您在[演示](http://jsfiddle.net/U4vQr/)中看到的那样，它的工作原理是*template-input*。

就像我之前的评论一样，缓存的方法：

```
var $templateInput = $("div#template-input");
var $templateName = $("input#template-name");
$("input.check-toggle").change(function() {
  if ($(this).is(':checked')) {
    $templateInput.removeClass('moveaway');
  }else{
    $templateInput.addClass('moveaway');
    $templateName.val("0");
  }
}); 
```

会跑得更快，结果是一样的。你可以在[这里看到演示](http://jsfiddle.net/U4vQr/2/)。

# iphone - CoreData 获取具有相同值的实体

> ID：14625096
> 
> 赞同：0
> 
> 时间：2013-01-31T11:51:40.730
> 
> 标签：iphone, ios, core-data

我有一个名为 Item 的 CoreData 实体，它有两个值（嗯，两个值与这个问题相关）。

```
Item
---------------
id - NSString
name - NSString 
```

每个项目都有一个唯一的 ID，并且应该有一个唯一的名称。

（顺便说一句，该 id 不用于 CoreData，它用于与服务器通信）。

有几个项目似乎有重复的名称，我试图找到一个查询，该查询返回表中具有重复名称的项目的所有项目。

这可能吗？

如果是这样，有人可以提供一个 NSPredicate （或方法）来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:29:53.720

我认为不可能通过 Core Data 获取请求准确地获取具有重复名称的项目。（我认为前段时间在 SO 上有一个类似的问题，但我现在找不到。）

您可以获取按`name`属性排序的所有项目。然后可以通过对结果数组的单个循环找到重复项。

# php - 使用 CURL 发布多维数组并在服务器上获取结果

> ID：14625101
> 
> 赞同：9
> 
> 时间：2013-01-31T11:51:59.160
> 
> 标签：php, arrays, curl, multidimensional-array

我正在使用`CURL`. 并且数据是多维数组。

```
Array
(
[0] => stdClass Object
    (
        [id] => 1
    )
[1] => stdClass Object
    (
        [id] => 0
    )
[2] => stdClass Object
    (
        [id] => 11
    )
) 
```

我正在使用下面的代码来发送数据。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, "my_url");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $array);  // $array is my above data 
```

但是在服务器上，当我尝试将这些传入数据放入文件时，或者只是`print_r`它给了我下面的输出

```
Array
(
[0] => Array
[1] => Array
[2] => Array
) 
```

但我想要多维的输出。

我试过了，`print_r($_POST[0])`但它只给出`Array`文本。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T12:21:28.550

cURL 只能接受一个简单的键值对数组，其中值是字符串，它不能接受像你这样的数组，它是一个对象数组。但是它确实接受一个现成的 POST 数据字符串，因此您可以自己构建字符串并传递它：

```
$str = http_build_query($array);

...

curl_setopt($ch, CURLOPT_POSTFIELDS, $str); 
```

接收端的 A`print_r($_POST)`将显示：

```
Array
(
    [0] => Array
        (
            [id] => 1
        )

    [1] => Array
        (
            [id] => 0
        )

    [2] => Array
        (
            [id] => 11
        )

) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:42:47.640

我会尝试序列化和反序列化：

1）在发送您的数组之前，将其序列化（并将您的传输模式设置为二进制）：

```
(...)
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);           // need this to post serialized data
curl_setopt($ch, CURLOPT_POSTFIELDS, serialize($array));  // $array is my above data 
```

2）当您收到数据时，将其反序列化：

```
$array = unserialize($_POST); 
```

更多细节[在这里](http://theodin.co.uk/blog/development/how-to-serialize-and-unserialize-post-arrays-using-php.html)和[这里](http://dave.kinkead.com.au/post/3930771155/posting-serialized-data-with-curl-php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-24T12:59:13.103

```
$param['sub_array'] = json_encode($sub_array); 
```

而在另一边

```
$sub_array= json_decode($_POST['sub_array']); 
```

# python - 使用 Python 访问简单的 API

> ID：14625103
> 
> 赞同：2
> 
> 时间：2013-01-31T11:52:22.403
> 
> 标签：python, api, curl, urllib2, pycurl

我有一个简单的 api 端点：

```
http://example.de/create.json 
```

我需要通过 POST 发送以下内容：

-文本

-url

-用户名

此任务的 curl 命令如下所示：

```
curl --data-urlencode "text=Beispieltext" -d "url=http://google.de" -d "username=User1" http://example.de/create.json 
```

我想在我的代码中实现这一点。我想向 api 提交数据并使用 api 的答案。其实我不知道从哪里开始。我阅读并尝试了很多关于 Pycurl、urllib2 和子进程的内容，但现在我什么都不懂了：D

你会怎么做？我需要帮助，我不知道从哪里开始！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:00:45.140

很简单。应该是这样的：

```
import pycurl
import StringIO

c = pycurl.Curl()
c.setopt(c.URL, 'http://example.de/create.json')
output = StringIO.StringIO()
c.setopt(c.WRITEFUNCTION, output.write)
c.setopt(c.POSTFIELDS, 'your post data')
c.perform() 
```

结果在 output.getvalue() 中。完成后不要忘记 output.close() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T22:19:09.143

libcurl[示例](http://curl.haxx.se/libcurl/c/example.html)（请参阅右列中的示例）

# c# - Jquery验证整个表单问题

> ID：14625106
> 
> 赞同：1
> 
> 时间：2013-01-31T11:52:27.730
> 
> 标签：c#, jquery, textbox, validation

我试图在后面的代码中执行其他功能之前验证表单中的几个文本框，所以我得到了：

```
var validForm; // **If i set it there to true it will always be true**
            $('#Form :input').each(function () {
                var id = this.id;
                var value = this.value;
                var isMatch = id.substring(0, 4) == "txt_";

                if (isMatch == true) {
                    if (($.trim(value) == 0 ) {
                        alert("invalid " + id);
                        valid = false;
                    } // **if I include a else here it will not be valid as it is foreach loop**

                }
            });

            if (validForm == true) {
                $.ajax({
                    type: "POST",
                    url: "Form.aspx/Print",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",

                    success: function (msg) {
                        if (msg.d == 'Success') {
                        }
                    }

                });
            } 
```

如果我在 foreach 循环中执行 else 语句并将`validForm`变量设置为 true，它将无法正常工作，因为最后一个文本框有效且无效，那么它将我的变量设置为 true（请参阅代码注释）。

另一方面，如果我`validForm`在开始时指定一个 true ，那么它将始终为 true （参见代码注释）。

关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:36:02.757

在第 10 行，您使用了错误的变量：

```
valid = false; 
```

它应该是这样的：

```
validForm = false; 
```

# java - 在我的 hdpi 文件夹中添加新的 png 图片后，R.java 消失了

> ID：14625109
> 
> 赞同：2
> 
> 时间：2013-01-31T11:52:33.793
> 
> 标签：java, android, xml

我正在使用带有 android sdk 插件的 eclips，我的项目运行正常，没有任何错误，这是一个非常干净的项目，但是当我删除并将图片（PNG 图片）添加到我的 hdpi 文件夹时，另外我也删除了 ic_launcher，但将我的新图标重命名为“ic_launcher，但未生成 R.java，我将所有图片重命名为小写，不带空格，然后清理项目并确保 xml 中的每个链接都正确重命名，所以有没有办法重新生成 R.Java ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:56:16.710

这里有几件事要做；

1.  检查项目 --> 自动构建是否开启
2.  通过右键单击操作刷新布局文件夹
3.  清理所有项目等
4.  如果2.不起作用，重启Eclipse

在执行所有这些操作时，请注意您的控制台视图，如果您将某些资源命名为无效，它将报告错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:57:28.927

除此之外**`Project=>Clean`**，我建议你检查一下**`Windows => Show View => Error log`**。它可能会帮助你。Android Pre 编译器在那里显示错误。

![在此处输入图像描述](../Images/9f6cef4ba3932d7e1b65b709abc4ef8d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:54:44.733

只需重新加载您的项目，也许它会有所帮助（关闭并重新打开 Eclipse）

# javascript - AngularJS 主页 - 本地化示例

> ID：14625110
> 
> 赞同：0
> 
> 时间：2013-01-31T11:52:34.853
> 
> 标签：javascript, angularjs

我正在研究 AngularJS 主页底部的本地化示例。

我正在查看页面的来源，并尝试完全按照演示显示的内容进行操作。

但是，我似乎无法启动演示代码。最让我困惑的台词是：

```
 <span class="pull-right" 
    js-fiddle="tabs.html components.js beers.js" module="components"> ...
   <div app-run="tabs.html" module="components-us" class="well"> ... 
```

因为我不认识`app-run`或者`js-fiddle`是 AngularJS 语法（或者是吗？）。无论如何，演示应用程序不会启动。你能帮我看看吗？

这是我从 AngularJS 主页复制和粘贴并放入 index.html 的代码：（相应地将标头库和库更改为您的目录）

**索引.html**

```
<!doctype html>
<html ng-app>
    <head>
        <meta charset="utf-8">
        <!-- ************IMPORTANT !! change this to your directory************ -->
        <base href='http://localhost/angularjs/localization/' />
        <link rel="stylesheet" href="../bootstrap/css/bootstrap.css">
        <script src="../bootstrap/js/bootstrap.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
    </head>
    <body>

    <div class=" row example">
        <div class="span1 app-source" app-source="tabs.html components.js beers.js" annotate="tabs.annotation" module="components"></div>
        <div class="span4">
            <span hint></span>
            <span class="pull-right" js-fiddle="tabs.html components.js beers.js" module="components"></span>
            <div class="tabs-spacer"></div>
            <h4>Locale: {{ 'US' }}</h4>
            <div app-run="tabs.html" module="components-us" class="well"></div>
            <div class="tabs-spacer"></div>
            <h4>Locale: {{ 'SK' }}</h4>
            <div app-run="tabs.html" module="components-sk" class="well"></div>
        </div>
    </div>

    <script>
        angular.module('components-us', ['components', 'ngLocal.us']);
        angular.module('components-sk', ['components', 'ngLocal.sk']);
    </script>

    <script type="text/ng-template" id="tabs.html">
        <tabs>
            <pane title="Localization">
                Date: {{ '2012-04-01' | date:'fullDate' }} <br>
                Currency: {{ 123456 | currency }} <br>
                Number: {{ 98765.4321 | number }} <br>
            </pane>
            <pane title="Pluralization">
                <div ng-controller="BeerCounter">
                    <div ng-repeat="beerCount in beers">
                        <ng-pluralize count="beerCount" when="beerForms"></ng-pluralize>
                    </div>
                </div>
            </pane>
        </tabs>
    </script>

    <script id="beers.js">
        function BeerCounter($scope, $locale) {
            $scope.beers = [0, 1, 2, 3, 4, 5, 6];
            if ($locale.id == 'en-us') {
                $scope.beerForms = {
                    0: 'no beers',
                    one: '{} beer',
                    other: '{} beers'
                };
            } else {
                $scope.beerForms = {
                    0: 'žiadne pivo',
                    one: '{} pivo',
                    few: '{} pivá',
                    other: '{} pív'
                };
            }
        }
    </script>

    <script id="components.js">
        angular.module('components', []).
                directive('tabs', function() {
                    return {
                        restrict: 'E',
                        transclude: true,
                        scope: {},
                        controller: function($scope, $element) {
                            var panes = $scope.panes = [];

                            $scope.select = function(pane) {
                                angular.forEach(panes, function(pane) {
                                    pane.selected = false;
                                });
                                pane.selected = true;
                            }

                            this.addPane = function(pane) {
                                if (panes.length == 0) $scope.select(pane);
                                panes.push(pane);
                            }
                        },
                        template:
                                '<div class="tabbable">' +
                                        '<ul class="nav nav-tabs">' +
                                        '<li ng-repeat="pane in panes" ng-class="{active:pane.selected}">'+
                                        '<a href="" ng-click="select(pane)">{{pane.title}}</a>' +
                                        '</li>' +
                                        '</ul>' +
                                        '<div class="tab-content" ng-transclude></div>' +
                                        '</div>',
                        replace: true
                    };
                }).
                directive('pane', function() {
                    return {
                        require: '^tabs',
                        restrict: 'E',
                        transclude: true,
                        scope: { title: '@' },
                        link: function(scope, element, attrs, tabsCtrl) {
                            tabsCtrl.addPane(scope);
                        },
                        template:
                                '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
                                        '</div>',
                        replace: true
                    };
                })
    </script>

   </body>
</html> 
```

另外，`app-run`从哪里来`js-fiddle`？我不知道它们是属于 AngularJS 的功能还是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:15:47.190

[app-run](https://github.com/angular/angularjs.org/blob/master/js/homepage.js#L100)和[js-fiddle](https://github.com/angular/angularjs.org/blob/master/js/homepage.js#L240)是自定义的 Angular 指令——即，他们编写的用于帮助运行 AngularJS 主页的指令（因此它们位于名为 homepage.js 的文件中）。

这是演示的[工作 plnkr](http://plnkr.co/edit/C6iolSmoBmspa4xOAXgC?p=preview)。

# ios - Titanium Appcelerator：我如何定位 $(this) 元素？

> ID：14625111
> 
> 赞同：1
> 
> 时间：2013-01-31T11:52:36.343
> 
> 标签：ios, animation, appcelerator, titanium-mobile, transition

我正在使用钛应用加速器设计一个抽认卡应用程序，最终目标是使用可滚动视图来显示“包”中的每张卡片，然后点击一张卡片（即视图中的卡片），这应该围绕它的轴旋转（即翻转）以显示反面。

您可以从下图中看到我希望实现的目标。

![在此处输入图像描述](../Images/8f211f2e0295d44af2d1d513a0e22405.png)

不幸的是，当点击其中一个面板时，它不是子视图动画，而是滚动视图中的**最后一个子**动画。

我知道这与我在循环中分配变量的事实有关，但是如果有人可以查看我的代码并告诉我我做错了什么，那就太好了。

在 JQuery 中它看起来像这样

```
$(FrontView).click(function(){

$(this).parent().flip() //how do I access $(this) and $(this).parent() in Appcelerator?

}); 
```

这是我的应用加速器代码：

```
while(rows.isValidRow()){

         var FrontView = Ti.UI.createView({

          backgroundImage: '/global/card_bg.png',
          width: 295,
         height:297

    });  

         var BackView = Ti.UI.createView({

          backgroundImage: '/global/card_bg.png',
          width: 295,
          height:297

    });  

 var ControlView = Titanium.UI.createView({
 backgroundColor:"#333",
 bubbleParent : false,
 width: 295,
 height:297,
 top : 100

}); 

FrontView.addEventListener('singletap', function() {
        Ti.API.info('singletap');
        ControlView.animate({view:BackView,transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_RIGHT});

    });

BackView.addEventListener('singletap', function() {
        Ti.API.info('singletap');
ControlView.animate({view:FrontView,transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});

    });

  $.scrollable_view.addView(ControlView);
  ControlView.add(BackView);  
  ControlView.add(FrontView);  

 rows.next();

} //endwhile 
```

**有人可以帮忙吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:44:13.087

如果您在事件回调中放置一个返回变量，您可以访问点击源。试试这个，看看它是否有效：

```
FrontView.addEventListener('singletap', function(e) {
    Ti.API.info('singletap');
    e.source.animate({view:BackView,transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_RIGHT});
});

BackView.addEventListener('singletap', function(e) {
    Ti.API.info('singletap');
    e.source.animate({view:FrontView,transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:43:32.057

我发现当您在 Scrollable View 的 EventListener 中翻转卡片时它可以工作。看看这个：[https ://gist.github.com/4683264](https://gist.github.com/4683264)

# cakephp - Cakephp 2.0 $this->Auth->login() 不工作

> ID：14625118
> 
> 赞同：1
> 
> 时间：2013-01-31T11:52:59.240
> 
> 标签：cakephp, authentication, login

我正在尝试使用 Auth 中内置的 cakephp 进行用户登录。我设法验证了用户注册（与登录名位于同一视图上），但没有使登录名正常工作。

我在尝试登录时得到的只是我的“用户名或密码无效，请重试”错误。我已经阅读了博客教程，但我是 cake/php 的新手，并且只在 1.3 中处理过自己的粗略身份验证的凌乱项目。

**MarshallsController.php**

```
class MarshalsController extends AppController {
public $helpers     = array('Html', 'Form');
public $uses        = array("Marshal", "User");
public $components  = array("RequestHandler","Session", "Auth");

public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('register', 'login');
}

public function index() {
    $this->set('users', $this->User->find('all',
            array(
                'conditions'=>array(
                    'User.marshall_id'=>$Marshall['Marshall']['id']
                )
            )));
}

//Run when Marshal attempts to register for login page
public function register(){
    if ($this->request->is('post')) {
        $this->Marshal->create();
        if ($this->Marshal->save($this->request->data)) {
            //if new marshall has been saved fetch all their data
            $marshal = $this->Marshal->find('first',
                array(
                    'conditions'=>array(
                        "Marshal.email"     => $this->data['Marshal']['email'],
                    )
                )
            );
            if(!empty($marshal)){
                //set marshal session data to track logged in users and their data
                $this->Session->write("Marshal",$marshal);
            }
            $this->Session->setFlash(__('The Marshal has been saved'));
            //redirect user to logged in page
            $this->redirect(array('controller' => 'pages', 'action' => 'home'));
        } else {
            $this->Session->setFlash(__('The Marshal could not be saved. Please, try again.'));
            echo $this->render('login');
            exit();
        }
    }
    else{
        //if Marshal has not attempted to login redirect the back to the login/register page
        echo $this->render('login');
        exit();
    }
}

public function login() {

    //if user has atempted a login
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            //If login detials are correct get user data
            $marshal = $this->Marshal->find('first',
                array(
                    'conditions'=>array(
                        "Marshal.email"     => $this->data['Marshal']['email'],
                    )
                )
            );
            if(!empty($marshal)){
                //set marshal session data to track logged in users and their data
                $this->Session->write("Marshal",$marshal);
            }
            //redirect user to the logged in page
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
            debug($this->Auth->request->data);
        } 
```

**元帅模型**

```
class Marshal extends AppModel {

public function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
    return true;
}

public $hasMany = array(
    'User' => array(
        'className'     => 'User',
        'foreignKey'    => 'marshal_id',
        'conditions'    => array('User.status' => '1'),
    )
);

public $validate = array(
    'first_name' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A first name is required'
        )
    ),
    'last_name' => array(
        'required' => array(
            'rule' => array('notempty'),
            'message' => 'A last name is required'
        )
    ),
    'password' => array(
        'required' => array(
            'rule'    => array('minLength', '8'),
            'message' => 'Minimum 8 characters long'
        )
    ),
    'email' => 'email'
); 
```

}

**登录.ctp**

```
<div class="row">
<?php echo $this->Session->flash('auth'); ?>
<div class="sixcol">
    <?php
    echo $this->Form->create('Marshal', array('action' => 'login'));
    echo $this->Form->inputs(array(
        'legend' => __('Login'),
        'email',
        'password'
    ));
    echo $this->Form->end('Login');
    ?>
</div>
<div class="sixcol last">
    <?php
    echo $this->Form->create('Marshal', array('action' => 'register'));
    echo $this->Form->inputs(array(
        'legend' => __('register'),
        'first_name',
        'last_name',
        'email',
        'password'
    ));
    echo $this->Form->end('Register');
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:01:54.377

默认情况下，CakePHP 使用用户名和密码字段，但您使用的是电子邮件而不是用户名。您需要指定它：

```
public $components = array(
            'Auth' => array('authenticate' => array('Form' => array( 'userModel' => 'User',
                                    'fields' => array(
                                                        'username' => 'email',
                                                        'password' => 'password'
                                                        )
                                                )
                            ),
                    'authorize' => array('Controller'),
                    'loginAction' => array('controller' => 'users', 'action' => 'login'),
                    'loginRedirect' => array('controller' => 'home', 'action' => 'index'),
                    'logoutRedirect' => array('controller' => 'users', 'action' => 'login'),
                    'authError' => 'You don\'t have access here.',
            ),
        ); 
```

这是我的工作示例，请随时根据您的需要进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T06:29:22.137

您还可以检查安全哈希方法并与数据库中的密码进行比较：

```
Security::setHash('sha1'); 
```

（sha1 或 md5）

比较密码：

```
 Security::hash($password,"sha1", true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-28T09:17:40.160

功能登录（）{

```
//if already logged-in, redirect
// if($this->Session->check('email')){
//     $this->redirect(array('action' => ''));        
// }

// if we get the post information, try to authenticate
if ($this->request->is('post')) {
    $data = $this->request->data;

    print_r($data); die;
    if ($this->Auth->login()) {
        return $this->redirect($this->Auth->redirectUrl());
    }
    $this->Session->setFlash(__('Your username or password was incorrect.'));
}
} 
```

只有其他代码是正确的

# python - Python：UDP Socket如何等待客户端回复字节字符串

> ID：14625123
> 
> 赞同：1
> 
> 时间：2013-01-31T11:53:14.797
> 
> 标签：python, c, udp, client-server

```
import socketserver
import struct
from collections import namedtuple

class MyUDPHandler(socketserver.BaseRequestHandler):
    def handle(self):
        data = self.request[0].strip()
        socket = self.request[1]
        if len(data) >= 34:
            format_ = "6shhih50s2s"
            MyStruct = namedtuple("MyStruct", "sMark nPackLen nFlag nGisIp nPort sData sEnd")
            tuple_to_send = MyStruct(sMark="\r\n{}".format("*KW").encode("ascii"), 
                     nPackLen=struct.calcsize(format_),
                     nFlag=0x0002,
                     nGisIp=0,
                     nPort=0,
                     sData= "*KW,AA05954122,015,080756,#".encode("ascii"),
                     sEnd="\r\n".encode("ascii"))
            string_to_send = struct.pack(format_, *tuple_to_send._asdict().values())
            socket.sendto(string_to_send, self.client_address)
            print('waiting Reply Bytes String from client..') //how to get the reply bytes  string from Client side?
if __name__ == "__main__":
    HOST, PORT = "", 6903
    server = socketserver.UDPServer((HOST, PORT), MyUDPHandler)
    server.serve_forever() 
```

**第 1 步**：服务器接收 GPS 设备字节字符串，并获取动态 IP 地址
**第 2 步**：当服务器已经获取客户端动态 IP 时，服务器将向客户端（GPS 设备）发送命令。
**第 3 步**：客户端将发送回一个字节字符串，但我不知道如何在此处捕获回复字节字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:42:32.243

如果服务器回复发件人的 IP 地址和端口，您可以执行此操作

```
print('waiting Reply Bytes String from client..') //how to get the reply bytes  string from Client side?
bytes = socket.recvfrom(1024); 
```

# php - 仅为 ajax 请求保留文件

> ID：14625125
> 
> 赞同：0
> 
> 时间：2013-01-31T11:53:20.720
> 
> 标签：php, ajax, security

我的核心应用程序有大量脚本

```
 include('JS/gramp.php');
    include('JS/est.php');
    include('JS/curest.php');
    include('JS/memomarker.php');
    include('JS/local----------.php');
    include('JS/poirel.php');
    include('JS/maplayers.php');
    include('JS/trafficinc.php');
    include('JS/plannedtraffic.php');
    include('JS/transportissues.php');
    include('JS/cams_traff.php');
    include('JS/places2.php'); 
```

现在这些都被移动到动态加载中，以减少加载时应用程序的大小

```
if(button_case_curtime==true){
        $(".jsstm").load("<?php echo $core_dir; ?>JS/curresttime.php?la=<?php echo $caseset['iplat']; ?>&lo=<?php echo $caseset['iplong']; ?>&h=<?php echo $days_h; ?>");
        rendermap = true;
        } 
```

**问题！**应用程序要求这些文件是安全的，所涉及的数据要求没有人可以访问。

唯一会请求这些文件的文件是**index.php**

任何输入或想法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:56:02.253

如果不将文件也提供给用户，就无法将文件提供给浏览器。

您可以将服务器配置为仅提供给定额外 HTTP 标头（您可以使用 JS 添加）的文件，但没有什么能阻止人们手动发送该标头或只是从浏览器的调试工具中挖掘源代码。

您向其提供文件的任何用户都可以访问这些文件。如果您想限制哪些用户可以访问他们，那么您必须使用 auth/authz（您还需要将其应用于 index.php 文件，以便未经授权的用户不仅会收到 JS 错误或静默失败）状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:55:54.853

不，您尝试做的事情是不可能的。Ajax 请求并不特殊。它们只是 HTTP 请求。为 Ajax 创建的端点应该像任何其他 HTTP 请求端点一样使用身份验证/授权进行保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:57:02.437

这是一个简单的解决方案，可以中途解决您的问题。通过 POST 请求请求它们，如下所示：

```
$.post('JS/maplayers.php', {'ajax':true}, function(){}); 
```

注意 POST 变量“ajax”。在文件 maplayers.php 中，将以下代码添加到开头：

```
if((!isset($_POST['ajax']))) {
       die('Invalid request, only ajax requests are permitted');
   } 
```

# linux - Curl 无法在实时服务器上使用 http/socks 代理

> ID：14625126
> 
> 赞同：0
> 
> 时间：2013-01-31T11:53:24.777
> 
> 标签：linux, curl, libcurl, php-5.2

重复：[使用代理，使用curl，在本地主机上工作，但不在服务器上，](https://stackoverflow.com/questions/7045882/using-proxy-using-curl-working-on-localhost-but-not-on-server)但没有得到答复，我已经尝试过它所说的，没用。

我尝试通过 SSH 连接到我的专用服务器并尝试同时使用 socks/http 代理，但它们都返回错误 7。虽然相同的脚本在我的本地 XAMPP 上使用 http 和 socks 代理都可以正常工作。

我已经为服务器支持创建了一张关于它的票。但我很高兴知道背后的原因以及如果可能的话如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T11:48:46.990

我有同样的问题，在本地主机上很好，但在实时服务器上没有工作（标题 0）。

我关闭了 CSF 防火墙并且 curl 工作正常，然后我在防火墙配置中允许端口，打开防火墙，现在一切正常。

# actionscript-3 - 日期字段项渲染器

> ID：14625131
> 
> 赞同：0
> 
> 时间：2013-01-31T11:53:39.867
> 
> 标签：actionscript-3, apache-flex, flash-builder

我尝试创建一个可编辑的日期字段 itemrenderer。

如果我单击日历按钮，此 itemrenderer 工作正常。但是如果我用键盘输入数据，数据不会更新，如果字段是焦点，数据就会变空。

请参阅下面我的代码

Datagrid列是这样的

```
 <mx:DataGridColumn dataField="echDate"  
       headerText="Date" headerStyleName="dgHeader"
itemEditor="ui.itemRenderer.irDateD" editorDataField="dateModif"/> 
```

项目编辑器是

```
 <?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true">

    <fx:Script>
        <![CDATA[

            import mx.controls.dataGridClasses.DataGridListData;
            import mx.controls.listClasses.BaseListData;
            import mx.events.CalendarLayoutChangeEvent;
            import mx.events.FlexEvent;

            [Bindable] public var dateModif:String;

            override public function set data(value:Object):void{
                if(listData){
                    var newDate:Date;
                    var value1 = value.echDate;

                    if (value1 is String){
                        newDate = new DateUtility().dateStringToObject2(value1);
                        super.data = newDate;
                        dfDG.selectedDate = newDate;
                        dfDG.text = value1;

                    } 
                    else if (value1 is Date){
                        super.data = value as Date;
                        dfDG.selectedDate = value1 as Date;
                        dfDG.text = new DateUtility().DateAsToString(value1);
                    }
                }        
            }

            protected function dfDG_changeHandler(event:CalendarLayoutChangeEvent):void
            {
                dateModif=dfDG.text;
            }

        ]]>
    </fx:Script>

    <mx:DateField id="dfDG"
                  editable="true"
                  formatString="DD/MM/YYYY"
                  yearNavigationEnabled="true"
                  width="95"
                  change="dfDG_changeHandler(event)"
                  >

    </mx:DateField>
</s:MXDataGridItemRenderer> 
```

如果有人可以帮助我解决这个问题，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:34:24.037

你可以试试这个解决方案。

我已插入第二个 DG 让您查看数据是否更新。

我没有你的 DateUtility().dateStringToObject2(value1)，这就是我使用验证器的原因。

Renderer和App之间的“反向连接”是通过Binding的方式实现的。当您使用 DateUtility() 更正输入时，您可以将结果插入到 DateField 的文本属性中。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

<fx:Declarations>
    <fx:Model id="cells">
        <dataset>
            <data>
                <name>a</name>
                <echDate>14/01/2013</echDate>
            </data>
            <data>
                <name>b</name>
                <echDate>15/01/2013</echDate>
            </data>
        </dataset>
    </fx:Model>
</fx:Declarations>

<s:VGroup>

<mx:DataGrid 
    width="386" height="100" dataProvider="{cells.data}" 
    alternatingItemColors="[0xffffff]"
    horizontalGridLineColor="0x999999" 
    horizontalGridLines="true"
    verticalGridLineColor="0x999999" 
    sortableColumns="false" 
    resizableColumns="false" selectable="false">

    <mx:columns>
        <mx:DataGridColumn dataField="name" headerText="Name"/>
        <mx:DataGridColumn dataField="echDate" headerText="Date"
       itemRenderer="com.dgdatefield.irDateD"/>
    </mx:columns>
</mx:DataGrid>

<mx:DataGrid 
    width="386" height="100" 
    dataProvider="{cells.data}">

    <mx:columns>
        <mx:DataGridColumn dataField="name" headerText="Name"/>
        <mx:DataGridColumn dataField="echDate" headerText="Date"/>
    </mx:columns>

</mx:DataGrid>

</s:VGroup>

</s:Application> 
```

//渲染器

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                      xmlns:s="library://ns.adobe.com/flex/spark" 
                      xmlns:mx="library://ns.adobe.com/flex/mx" 
                      focusEnabled="true">
<fx:Declarations>
    <mx:DateValidator 
        id="dateValidator"
        source="{dfDG}" 
        property="text" 
        inputFormat="DD/MM/YYYY"
        wrongLengthError="The date format is not correct"
        allowedFormatChars="/ - ."/>
</fx:Declarations>

<fx:Binding source="dfDG.text" destination="data.echDate"/>

<s:HGroup width="100%" horizontalAlign="center">
    <mx:DateField 
          id="dfDG" text="{data.echDate}"
          editable="true"
          formatString="DD/MM/YYYY"
          yearNavigationEnabled="true"
          width="120"/>
</s:HGroup>

</s:MXDataGridItemRenderer> 
```

我希望它可以帮助你

# html - MFMailComposeViewController 找不到本地 css 文件

> ID：14625138
> 
> 赞同：1
> 
> 时间：2013-01-31T11:54:11.063
> 
> 标签：html, ios, objective-c, css, mfmailcomposeviewcontroller

我创建了一个通过 MFMailComposeViewController 作为电子邮件发送的 html 字符串。

我有 2 个 css 参考，一个本地 css 和一个服务器 css，为离线 ipad 和任何在线邮件客户端提供 css 访问。

```
NSString *html = @"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"> \n";
html = [html stringByAppendingString:@"<html> \n"];
html = [html stringByAppendingString:@"<head> \n"];

html = [html stringByAppendingFormat:@"<link rel=\"stylesheet\" type=\"text/css\" href=\"%@\"> \n", @"styles.css"];
html = [html stringByAppendingFormat:@"<link rel=\"stylesheet\" type=\"text/css\" href=\"%@\"> \n", @"http://www.mydomain.com/styles.css"];

html = [html stringByAppendingString:@"</head> \n"]; 
```

在线时，MFMailComposeViewController 正确显示电子邮件（可能使用服务器 css）。离线时，MFMailComposeViewController 没有任何 CSS，只显示纯 html 电子邮件。

我已经尝试确定本地 css 文件的路径，例如

```
NSString* cssPath = [[NSBundle mainBundle] pathForResource:@"styles"
                                                    ofType:@"css"];

html = [html stringByAppendingFormat:@"<link rel=\"stylesheet\" type=\"text/css\" href=\"%@\"> \n", cssPath]; 
```

但没有任何成功。

引用本地 css 文件的本地 html 文件在 UIWebView 中正确显示。

编辑：
html 邮件是否可以访问诸如 css 或图像之类的捆绑数据？还有我的标签

```
background-image:   url(image.png); 
```

不适用于两条路径。

# android - 用于显示视图位置的 Android 工具

> ID：14625139
> 
> 赞同：0
> 
> 时间：2013-01-31T11:54:14.610
> 
> 标签：android, android-layout

是否有任何 android 工具来检查视图在实时运行布局中的位置？我的意思是当我运行我的应用程序连接到计算机并使用 Eclipse 进行调试时。

我有一个片段，我真的不知道去哪儿了，我正试图弄清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:03:54.647

有两个非常有用的工具可以调试 UI 布局。第一个在 eclipse`Dump view hierarchy of UI`中，第二个`Developer options`在 Android 设备本身下可用（见下面的截图）

![转储 UI 的视图层次结构](../Images/b200917994712797feaeda6e2503ece7.png) ![开发人员选项](../Images/5adbacc1080a84b7267c5c87bec14637.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:05:53.043

在您的模拟器上使用层次结构查看器。它将向您显示视图层次结构和一些视图的参数。

层次结构查看器仅在模拟器上工作。但是您可以将[此类功能添加到真实设备中。](https://stackoverflow.com/questions/6011008/can-hierarchyviewer-be-used-with-a-real-device-other-than-the-nexus)

# c# - Horizo ntalAlign.Center 在 GridView 中不起作用

> ID：14625140
> 
> 赞同：7
> 
> 时间：2013-01-31T11:54:17.730
> 
> 标签：c#, asp.net, .net

我正在使用 ASP 数据网格我正在绑定数据字段，标题文本通过后面的代码（c#）动态绑定。

我还在动态设置列的样式，所有都工作正常，但是 Column Horizo​​ntal-align.Center 之一不起作用。

我检查了样式是否被覆盖，但它不是......

这是给出问题的代码块：

```
 BoundField field4 = new BoundField();
        field4.DataField = dtdata.Tables[0].Columns["data"].ToString();
        field4.HeaderText = "Percentage%";
        field4.DataFormatString = "{0:N1}%";
        field4.SortExpression = "data";
        field4.ItemStyle.HorizontalAlign = HorizontalAlign.Center;
        grdMarginGrid.Columns.Add(field4); 
```

任何人都可以帮助我认识到问题出在哪里..

在此先感谢，迪维亚。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T12:05:52.373

我认为你的其他风格会压倒你的新风格。

你可以做这样的事情

尝试从您的 ASPX 代码向您的 gridview 添加一个 CSS 类，并将以下样式分配给您的类。

```
 <asp:GridView CssClass="grid" runat="server">
    <!-- your options -->
 </asp:GridView>

.grid td, .grid th{
  text-align:center;
} 
```

您也可以从后面的代码中添加 CSS 类.. [MSDN LINK](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)

这会将所有列文本设置为网格视图的中心

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T12:39:45.250

为绑定字段或模板字段等任何字段提供 ItemStyle-Horizo​​ntalAlign="Center"。

代码：

```
<asp:TemplateField HeaderText="Something"  ItemStyle-HorizontalAlign="Center" >

 or

<asp:BoundField DataField="" HeaderText="" ItemStyle-HorizontalAlign="Center"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-19T12:38:00.180

```
The only solution that works for me :   

 <style>
     .HeaderCentered   {
            text-align: center !important;
        }
 </style> 
```

在 gridview 声明中的每个 boundField 中添加： HeaderStyle CssClass="HeaderCentered" ：

```
<asp:BoundField DataField="idLingua" HeaderText="Lingua" SortExpression="idLingua">
     <HeaderStyle CssClass="HeaderCentered" />
     <ItemStyle HorizontalAlign="Center" />
 </asp:BoundField> 
```

# intellij-idea - 如何在 IntelliJ Idea cloudbees 插件中设置默认堆栈？

> ID：14625141
> 
> 赞同：0
> 
> 时间：2013-01-31T11:54:23.673
> 
> 标签：intellij-idea, cloudbees

我有 jsf webapp。[我已使用http://blogs.jetbrains.com/idea/2012/12/deploy-web-apps-to-cloudbees-from-intellij-idea-12/](http://blogs.jetbrains.com/idea/2012/12/deploy-web-apps-to-cloudbees-from-intellij-idea-12/)中的步骤成功将其部署到 Cloudbees 。

问题是在我将 ClickStack 更改为 Web 应用程序配置文件之前，该应用程序将无法运行。默认是Tomcat。每次我从 IntelliJ Idea 部署/更新应用程序时，我的更改总是会丢失。从 PaaS 控制台部署应用程序没有问题。

是否有任何设置可以让 Idea 插件记住使用的堆栈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:20:04.093

这似乎是一个错误，[在 YouTrack](http://youtrack.jetbrains.com/issue/IDEA-100205)中报告，为问题加注星标/投票以接收通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:39:54.813

找到了解决方法。在应用程序中包含一个 jsf 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T18:07:14.463

对 ClickStacks 的支持已添加到 IDEA CB 集成中，从下一个 IDEA 13 EAP 开始，可以在“Basic Java Webapp (Tomcat)”和“Java EE 6 Web Profile (JBoss)”选项之间进行选择。

# javascript - 如何在将其放入 Array Jquery 时选中复选框？

> ID：14625143
> 
> 赞同：0
> 
> 时间：2013-01-31T11:54:33.110
> 
> 标签：javascript, jquery, asp.net, arrays

我们如何将选中的复选框放入数组中，如我的代码所示，

```
 var idArray = [];
        $("#controls input:checkbox").each(function() {
            idArray.push(this.name);
        }); 
```

希望你的建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:55:43.813

你可以用更好的方式来做...

```
var idArray = $("#controls input[type='checkbox']")
               .filter(function() { return this.checked; })
               .map(function() { return this.name; })
               .get(); 
```

我还将您的选择器换成了可以直接传递给 的选择器`document.querySelectorAll()`，这将提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:59:57.467

```
var idArray = [];
        $("#controls input:checkbox").find(":checked").each(function() {
            idArray.push(this.name);
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:00:21.853

使用这种方式：

```
var idArray = [];
    $("#controls :checked").each(function() {
        idArray.push($(this).attr('name'));
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:57:19.797

```
 var idArray = [];
    $("#controls input[type='checkbox']").each(function() {
        if($(this).attr('checked'))
        idArray.push($(this).attr('name'));
    }); 
```

**编辑：对于选中的复选框**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:57:22.343

```
 var idArray = [];
    $("#controls input:checkbox:checked").each(function() {
        idArray.push(this.name);
    }); 
```

如果您只寻找 cheched 复选框，则需要添加`:checked`选择器。

# php - #autocomplete_path 在 Drupal 6 中不起作用

> ID：14625147
> 
> 赞同：0
> 
> 时间：2013-01-31T11:54:46.880
> 
> 标签：php, drupal, drupal-6

我正在尝试为特定角色类型用户名创建一个带有自动完成文本字段的表单。但它不起作用。虽然当我使用“用户/自动完成”，这是在 drupal.org 示例中给出的默认路径时，它可以工作......

这是 hook_menu ---

```
function scout_bucks_menu(){
  $items = array();
  $items['scouts/autocomplete'] = array(
    'page callback' => 'scout_bucks_autocomplete',
    'type' => MENU_CALLBACK,
    'access arguments' => array('administer scout bucks'),
  ); 
  return $items;
} 
```

表单的这个 id --

```
function scoutbucks_add_bucks_form(&$form_state){
  $form = array();
  $form['scout_name'] = array(
    '#type' => 'textfield',
    '#title'  => t('Scout Name'),
    '#maxlength' => 60,
    '#autocomplete_path' => 'scouts/autocomplete',
    '#reguired' => TRUE,
  );
  $form['submit'] = array(
    '#type' => 'submit',
    '#title'  => t('ADD BUCKS TO SCOUT PROFILE'),
    '#prefix' => '<div class="submit-button-bucks">',
    '#suffix'   => '</div>',
  );
  return $form;
} 
```

这是自动完成的功能---

```
function scout_bucks_autocomplete($string = '') {
  $matches = array();
  $userobj = db_fetch_object(db_query("SELECT users.name, users.uid FROM {users}, {users_roles} WHERE users.uid =  users_roles.uid AND users_roles.rid = 7")); 
  while ($row = db_fetch_array($userobj)) {
    $matches[$row['users.uid']] = $row['users.name'];
  }
  drupal_json($matches);
} 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:13:54.620

在我的一个网站上工作的自动完成示例：function module_menu() {

```
 $items['app/autocomplete/%'] = array(
    'title'            => 'Some title',
    'description'      => '',
    'page callback'    => '_module_autocomplete',
    'page arguments'   => array(2),
    'type'             => MENU_CALLBACK,
  );
 }

function _module_autocomplete($param) {
    $result = db_query('SELECT id,stuff FROM {table} WHERE a=%d', $param);
    while ($row = db_fetch_object($result)) {
      $ret[$row->id] = $row->stuff;
    }

    drupal_json($ret);
} 
```

我已经尽可能地减少了，但我认为最好在菜单回调中定义 %。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:03:42.373

您需要更改`drupal_json`为[drupal_to_js](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_to_js/6)。

```
function scout_bucks_autocomplete($string = '') {
  $matches = array();
  $userobj = db_fetch_object(db_query("SELECT users.name, users.uid FROM {users}, {users_roles} WHERE users.uid =  users_roles.uid AND users_roles.rid = 7")); 
  while ($row = db_fetch_array($userobj)) {
    $matches[$row['users.uid']] = $row['users.name'];
  }
  drupal_to_js($matches); // the edited line.
} 
```

希望这有效...

# javascript - 如何提高我的 js 游戏的性能

> ID：14625152
> 
> 赞同：0
> 
> 时间：2013-01-31T11:54:55.683
> 
> 标签：javascript, performance

几天前我开始学习 javascript 并完成了 codeacadmey 的工作，并认为我会尝试制作一个简单的游戏。

所以我想出了记忆游戏，你必须找到成对的图像。

一切正常，我建立了一个评分系统，但有些人说，一旦选择了卡片以允许另一个选择，就会出现延迟，我不知道如何提高这种性能。

这是我认为导致延迟的一些代码，有没有更好的方法来产生相同的结果，对不起，在我对这一切不熟悉之前。

```
function check() {

    clearInterval(tid);

        if(people[secondchocie] === people[firstchocie]) {
            cntr++;

            (cntr === numOfMatches) {

                stop();

                score = checkScore(amountGoes); 

                $('#gameFinished').append('<p>Well done, you managed to complete the game your score is <span>' + score + '</span></p>');

                }
                turns = 0;
                return;

                } else {
                document.images[firstchocie + numOfImages].src = backcard;
                document.images[secondchocie + numOfImages].src = backcard;
                turns = 0;
                return;

                }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:05:09.380

我无法创建评论，所以我会把它放在答案中。

虽然我同意 lukas.pukenis ...

如果没有预加载，更改图像可能需要一些时间。对此进行测试：尝试在开始游戏之前通过将它们添加到页面中的其他位置（即使用 IMG 标签）将它们放入浏览器缓存中。

然后你会确定它们在缓存中。

编辑：

我最近使用了这个：

```
var cache = [];
function preLoadImages(arrImg)
    {
    var args_len = arrImg.length;
    for (var i = args_len; i--;)
        {
        var cacheImage = document.createElement('img');
        cacheImage.src = arrImg[i];
        cache.push(cacheImage);
        }
    }
preLoadImages(['images/img1.png','images/img2.png','images/img3.png',]); 
```

您可以将所需的所有图像添加到 javascript 数组中。

*如果您快速学习:) 您可以执行以下操作： 如果您的页面是由 php 生成的，您可以让 php 读取整个图像目录并将页面中的文件名写入 javascript 代码。或者您可以创建一个 ajax 请求，它返回图像的所有路径并将它们作为回调发送到预加载函数。*

# sql - 冒险工作中的过度规范化表

> ID：14625154
> 
> 赞同：2
> 
> 时间：2013-01-31T11:55:06.170
> 
> 标签：sql, sql-server, sql-server-2008, adventureworks

我刚开始使用数据库，想了解 Adventure-work-db 表设计概念的原因。为什么我们将 BusinessEntity 视为一个表，而我们没有将它放在 person 表中？这不是一种过度规范化的表吗？

![在此处输入图像描述](../Images/33395f8262a1606efe9479c625466c61.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:14:53.557

表格通常应该代表一个事物/对象/概念。如果您要在 Person 中包含 BusinessEntity 的内容，那么模型会说 Person*是*BusinessEntity，反之亦然，我猜这不是真的。尽管我接受 BusinessEntity 目前除了对 Person 的引用之外没有任何其他内容。

然而，目前的模型很容易扩展。您可能希望将来在 BusinessEntity 中添加新列（例如公司编号、税务登记代码）。这样的属性不属于一个人，因此不会真正属于 Person 表。因此，如果您的应用程序具有业务实体的概念，那么最好将其建模为您的图表中的模型。

# c# - 手动触发事件

> ID：14625155
> 
> 赞同：3
> 
> 时间：2013-01-31T11:55:06.670
> 
> 标签：c#

我的表单上有一些控件，我（通过设计器）将函数分配给 Leave 事件，如下所示：

```
textBox1.Leave += new System.EventHandler(f1);
textBox2.Leave += new System.EventHandler(f2);
textBox3.Leave += new System.EventHandler(f3); 
```

这些函数对文本框执行一些验证。**请注意，并非所有文本框都调用同一个委托。**

我现在需要的是能够在我想要的时候告诉他们“嘿，触发 Leave 事件”。就我而言，我在开始时在某处调用此函数：

```
private void validateTextBoxes()
{
    foreach (Control c in c.Controls)
    {
        TextBox tb = c as TextBox;
        if (tb != null)
        {
            // Fire the tb.Leave event to check values
        }
    }
} 
```

因此，每个文本框都使用自己的代码进行验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:59:45.150

我假设您*真的*不想触发 Leave 事件，您只想以与 leave 事件相同的方式验证文本框，为什么不通过相同的验证方法运行它们。

```
private void ValidateTextBox(TextBox textBox)
{
    //Validate your textbox here..
}

private void TextBox_Leave(object sender,EventArgs e)
{
    var textbox = sender as TextBox;
    if (textbox !=null)
    {
        ValidateTextBox(textbox);
    } 
} 
```

然后连接离开事件

```
textBox1.Leave += new System.EventHandler(TextBox_Leave);
textBox2.Leave += new System.EventHandler(TextBox_Leave);
textBox3.Leave += new System.EventHandler(TextBox_Leave); 
```

然后是您的初始验证码。

```
private void validateTextBoxes()
{
    foreach (Control c in c.Controls)
    {
        TextBox tb = c as TextBox;
        if (tb != null)
        {
            // No need to fire leave event 
            //just call ValidateTextBox with our textbox
            ValidateTextBox(tb);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:02:15.680

作为当前方法的替代方案，您可能需要考虑改用[Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件，这正是针对此类事情的。

如果您使用[Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)，则可以使用[ContainerControl.ValidateChildren()](http://msdn.microsoft.com/en-us/library/ms158374.aspx)为所有子控件执行验证逻辑。请注意，Form 类实现了 ValidateChildren()。

就个人而言，我认为这是你应该做的。

# ajax - ajax 发布到错误的控制器

> ID：14625156
> 
> 赞同：0
> 
> 时间：2013-01-31T11:55:11.000
> 
> 标签：ajax, razor, asp.net-mvc-4

我试图在片段控制器上调用动作注释，但由于某种原因，ajax 调用调用主控制器上的索引动作。

阿贾克斯调用

```
$(".test").click(function (evt) {

    var urlData = $(this).attr("href");
    var url = urlData.split("?")[0];   //URL is /snippet/comment?comID=2
    var commentID= urlData.split("=")[1] //

    $.ajax({
        Url: url,
        type: 'Get',
        date: { comID: commentID},
        success: function (data) {
            $("#Comments").html(data);
        }
    });
    evt.preventDefault();
}); 
```

路线

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id =    UrlParameter.Optional }
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:56:09.617

你有一个错字，`Url`应该以小写字母开头`u`。也`date`应该是`data`：

```
$.ajax({
    url: url,
    type: 'GET',
    data: { comID: commentID },
    success: function (data) {
        $("#Comments").html(data);
    }
}); 
```

顺便说一句，所有字符串拆分的东西可能都没用。你为什么不简单地使用你正在 AJAXifying 的锚的 url：

```
$('.test').click(function (evt) {
    $.ajax({
        url: this.href,
        type: 'GET',
        success: function (data) {
            $('#Comments').html(data);
        }
    });
    evt.preventDefault();
}); 
```

# c# - C# 中的“带分号的空行”是什么意思？

> ID：14625157
> 
> 赞同：3
> 
> 时间：2013-01-31T11:55:13.107
> 
> 标签：c#, syntax

我偶然发现了这段代码，并想知道为什么 C# 编译器没有发出警告或错误。严格来说，我想我正在尝试执行任何实际上有效的操作？（对于空行）

![空行上的分号](../Images/2767339515e2cbebb3e232f37e424e13.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:58:23.907

这是**一句空话**。它作为循环体很有用：

```
while(!Condition()) ; 
```

在循环体完全嵌入循环头的 for 循环中更常见。

让我们遍历链表的最后一个元素：

```
Node current = head;
for (; current.Next != null; current = current.Next) ;
return current; 
```

它看起来有点讨厌，通常我更喜欢写一个更长但更易读的循环。C++ 人倾向于在循环头中塞进很多东西。

我相信它也可以在代码生成场景中派上用场。

# c++ - 从控制台和 gui 应用程序的输入设计中读取值 (c++)

> ID：14625158
> 
> 赞同：0
> 
> 时间：2013-01-31T11:55:13.170
> 
> 标签：c++, user-interface, input, console

我有一个 c++ 库，其中包含一个实现自定义编程语言的虚拟机（称为“VM”）的类。这种语言有一些可以执行的不同指令，其中有“从输入读取值”指令。VM 可以以两种模式运行：逐步执行单个指令（直到机器完成）或一次执行所有指令。它还可以用于两个应用程序：控制台和 GUI 应用程序。

到目前为止，我只有一个控制台应用程序。当执行“从输入读取值”指令时，它只是使用 std::cin 读取值，所以虚拟机停止，直到输入被提交。当我尝试为 VM 创建 GUI 时会出现问题。我将使用典型的文本输入而不是`std::cin`.

问题是：**您认为**从执行指令的角度对此类问题进行建模的最佳方法是什么？执行“从输入中读取值”指令时，VM 应该如何表现？用户在点击“执行单条指令”之前不知道会是什么指令，所以在指令执行之前不能提交输入。

我正在考虑向 VM 添加一个新的状态属性：`{working|awaiting_input}`. 在“读取”指令运行时，机器应该挂起直到它得到输入。当 GUI 层从用户那里获取输入时，它会调用 VM 的`passInput(inputValue)`新方法，该方法另外唤醒 VM（以完成单个指令或全部指令）。你能想出一个更简单的解决方案（例如，不添加 state 属性）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:10:39.557

第一步是将您的“输入”从作为 VM 引擎的一个组成部分 [听起来像现在这样]，这样当您获得“从输入中读取的值”时，您只需调用“do_input” function - 在“user_interface”类中实现的虚函数 - 可以是 UI 或 iostream。

无论是单停运行还是“全速”运行都应该没有任何区别，“指令”在输入收集之前不会完成，对吧？

现在，GUI 可能相当棘手，因为它往往是事件驱动的，而输入只是另一个事件。但是，如果您将“do_input”函数实现为仅在读取输入时返回的函数，那么这并不是什么大不了的事。您只需要一些（a 的一部分）窗口作为“这是您输入输入的地方”，并且用户必须为此输入一些内容。当用户点击回车（或单击按钮等）时，您就完成了输入。

您可能还希望有一种从文件中读取输入的模式... ;)

它可能比我刚刚描述的要复杂一些，但不应该比这更多。[我之前在指令模拟器中做过类似的事情，一条指令可以有效地花费“无限”时间，因为它等待输入]。

# cordova - 将 Windows Phone 8 连接到 Weinre

> ID：14625161
> 
> 赞同：3
> 
> 时间：2013-01-31T11:55:17.147
> 
> 标签：cordova, windows-phone-8, weinre

我正在尝试将 Windows Phone 8 设备连接到本地 Weinre 服务器。我认为客户端的要求是基于 WebKit 的 Internet 浏览器，我认为 Internet Explorer 不是（？）有人可以确认是否可以将 Windows Phone 8 设备连接到 Weinre？如果是这样，那怎么办？它似乎无法通过通常的参考脚本工作。

我在这里看到了一篇文章，显示 Windows Phone 8 设备正在临时连接但掉线。我什至无法得到它！

非常感谢您能提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:50:27.933

Weinre 现在在 Windows Phone 8 上的工作方式与在 Android 或 iPhone 等其他平台上的工作方式完全相同。要运行 Weinre 客户端，请使用 Chrome 或任何其他 webkit 浏览器。我会推荐以下方法来识别问题。

1.  确保您使用的是最新版本的 Weinre

2.  检查防火墙设置（您可以暂时禁用它）。将 weinre target.js 链接到您的 html 页面时使用 ip 地址。

3.  [按照此处](https://stackoverflow.com/questions/14567491/windows-8-phone-ie10-javascript-debugging/14569780#14569780)所述添加console.log，查看在WP8设备上运行Weinre目标脚本时是否有任何错误

4.  尝试添加以下脚本而不是完整的 Weinre 本地设置。有关更多详细信息，请参阅[在 Wp8 上调试 Cordova 应用程序](http://sgrebnov.blogspot.ru/2012/12/debugging-cordova-apps-on-wp8.html)

> ```
> <script type="text/javascript">
> window.WeinreServerId = "wp_test"; // <-- your unique identifier on the server below
> window.WeinreServerURL = "http://debug.phonegap.com"; // <-- weinre server to use
> 
> // To open debugger use the following uri format - WeinreServerURL/client/#WeinreServerId
> // for example http://debug.phonegap.com/client/#wp_test
> 
> </script>
> 
> <script type="text/javascript" src="http://dl.dropbox.com/u/23085338/weinre-target-script-min.js"></script> 
> ```

# jquery - IE geJSON 不编码德语字符

> ID：14625162
> 
> 赞同：0
> 
> 时间：2013-01-31T11:55:25.600
> 
> 标签：jquery, html, asp.net-mvc, internet-explorer

当我尝试将德语字符发送到服务器时，我得到了一些正确的字符。我使用 mvc2 和 jquery 1.8.1

我尝试以这种方式发送

```
function changeFileName(value, selection, oppId, idForOkImg) {
            alert(value);
            $.getJSON('<%= Url.ActionOrm("ChangeTypeOfFile", "Opportunity")%>?fileName=' + value , null , function () {
                displayUploadedFiles(idForOkImg);

            });
        } 
```

我传递的值是单词“Prüfung”

在服务器端我收到“Pr�fung”，这个问题存在于 Internet Explorer 和 Firefox 上，在 chrom 上一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:05:07.393

像这样编码：

```
$.getJSON('<%= Url.ActionOrm("ChangeTypeOfFile", "Opportunity")%>', 
{ fileName: encodeURIComponent(value) }, 
function () {
    displayUploadedFiles(idForOkImg);
}); 
```

在 C# 中：

```
string fileName = HttpContext.Current.Request["fileName"]; //Pr%C3%BCfung
fileName = HttpUtility.UrlDecode(fileName); //Prüfung 
```

# c++ - C ++ 11 - 返回右值通过左值传递给函数？

> ID：14625167
> 
> 赞同：2
> 
> 时间：2013-01-31T11:55:54.763
> 
> 标签：c++, return, rvalue-reference, lvalue, rvalue

在**C++11**中，通常的做法是通过引用将左值传递给函数。

```
int& f(int& a){
    return a;
}

int main(void){
    auto a = 1;
    auto b = f(a);
    return 0;
} 
```

但是，是否可以通过右值引用将值传递给函数并通过左值返回该值？

```
int& f(int&& a){
    return a;
}

int main(void){
    auto b = f(1);
    return 0;
} 
```

为什么会或为什么不可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:03:20.337

这是可能的，但通常是不明智的。这段代码没问题：

```
#include <utility>
#include <iostream>

int &foo(int &&a) {
    return a;
}

int main() {
    int a = 1;
    std::cout << foo(std::move(a)) << "\n";
} 
```

这段代码也可以：

```
int main() {
    std::cout << foo(1) << "\n";
} 
```

此代码具有未定义的行为：

```
int main() {
    int &a = foo(1); // lifetime of the temporary 1 ends "at the semi-colon"
    std::cout << a << "\n";
} 
```

所以，这个功能很容易被误用`foo`。

至于它起作用的原因——这里发生的所有事情都是从右值引用到左值引用的隐式转换。如果不允许这样做会很不方便，因为这意味着例如你不能写：

```
void bar1(const int &a) {
    std::cout << (a + 1) << "\n";
}

void bar2(int &&a) {
    bar1(a);
    ... do destructive stuff with a ...
} 
```

允许隐式转换可能有更充分的理由。不知道官方的动机，这只是我第一个想到的。

即使在 C++03 中也存在相关问题。你可以写：

```
const int *baz(const int &a) { return &a; } 
```

为了获取一个指向临时/值的指针——语言阻止你直接做的事情，如果返回值超过产生它的表达式，则会导致相同的未定义行为。

您可以说禁止`&1`（使用指向文字或其他临时的指针）是 C++ 标准*不*只是假设程序员知道他们在做什么的地方。但我认为从历史上看，它背后的原因是您*必须*能够对临时对象进行 const 引用才能使运算符重载起作用。您不必能够获取指向临时对象的指针，而 C 禁止这样做，因为在 C 中，整数文字永远不需要具有内存位置。所以 C++ 继续禁止它，即使在 C++ 中，当你引用一个整数文字时，编译器可能会被迫创建一个包含该值的实际位置。Stroustrup 可能*可以*关于获取指向整数文字的指针也说过同样的话，但没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:00:22.193

如果您拥有所有权，则您应对该对象负责。如果你不把它保存在某个地方，这就像返回一个对临时的引用；当函数范围结束时，您“拥有”的对象被销毁，因此返回的引用不再有效。

# php - 从 SugarCRM 检索数据时出错

> ID：14625182
> 
> 赞同：0
> 
> 时间：2013-01-31T11:56:16.620
> 
> 标签：php, wordpress, sugarcrm

我通过 SugarCRM 检索数据，然后它显示这种类型的错误：

```
 $accountParams = array('session' => $session_id, 'module_name' => 'Leads','query' => "id like 5180dfeb-8a3f-51ca-2eaa-510921ef1da6", 'order_by' => '', 'deleted' => 0);
    $accountId = $soapclient->call('get_entry_list', $accountParams);
    var_dump($accountId);

array
  'result_count' => int -1
  'error' => 
    array
      'number' => string '40' (length=2)
      'name' => string 'Access Denied' (length=13)
      'description' => string 'You do not have access' (length=22)

array
  'id' => string 'nmrcjiso5b2aqq7htc9oski9j7' (length=26)
  'error' => 
    array
      'number' => string '0' (length=1)
      'name' => string 'No Error' (length=8)
      'description' => string 'No Error' (length=8) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:00:41.580

可能发生两件事...

1.  确保您对该记录和generak 中的Leads 模块具有权限
2.  我在你的代码中看到一个错字，改变......

    ```
    'query' => "id like 5180dfeb-8a3f-51ca-2eaa-510921ef1da6" 
    ```

……到这个

```
 'query' => "id = '5180dfeb-8a3f-51ca-2eaa-510921ef1da6'" 
```

...或者更好的是，使用 get_entry() 调用

[http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework#Call:_get_entry%28%29](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework#Call:_get_entry%28%29)

# mysql - Mysql 数据库中的多语言类别标题

> ID：14625183
> 
> 赞同：2
> 
> 时间：2013-01-31T11:56:22.343
> 
> 标签：mysql, database-design

只是在寻找一些建议。

给不想通读的人的总结：创建一个只有一个 auto_increment 列的表是一个合理的想法吗？

细节：

我通常在数据库中管理多种语言，为对象的数据及其语言描述提供单独的表。例如：

```
Table: MyObject (id auto_increment, height, width, depth. PK = id)
Table: MyObjectDescription (id, language, description. PK = id, language) 
```

这两个 id 字段对应，所以我有如下数据：

```
MyObject
+----+--------+-------+-------+
| id | height | width | depth |
+----+--------+-------+-------+
|  1 |     10 |    10 |    20 |
|  2 |      5 |     6 |     7 |
+----+--------+-------+-------+

MyObjectDescription
+----+----------+-----------------+
| id | language | description     |
+----+----------+-----------------+
|  1 | EN       | First object    |
|  1 | IT       | Primo Oggetto   |
|  2 | EN       | Second object   |
|  2 | IT       | Secondo Oggetto |
+----+----------+-----------------+ 
```

我的问题是我有某些数据库对象***除了描述之外******没有***数据。

 ***例如**；一个类别被简单地定义为一个 id 和一个文本描述。我可以使用像 MyObjectDescription 表这样的单个表，但是我必须自己生成 id，因为我无法使用 auto_increment 列。这也会增加*竞争条件错误*或*表锁定问题*的可能性。或者，我可以使用另一个像 MyObject 这样的表，它只有一个 auto_increment 列......

**我的疑问是：**使用具有单列的表只是为了模拟序列是一个合理的想法吗？或者它只是愚蠢的？另请注意，我的框架包含自动将对象表连接到描述表的逻辑。

感谢您的任何输入/想法。

加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:49:45.197

使用`MyObject (id)`.

除非您将这些对象与数据库的其余部分隔离开来，否则您将需要由`id` **单独**组成的 PK ，因此它可以被 FOREIGN KEYs 引用。

即使在孤立的情况下，密钥的强制执行也可以证明单独的表是合理的。没有它，您必须以某种方式生成一个新的`id`，同时防止并发事务`id`为不同的对象生成相同的事务。明显的方法是锁定整个表（并选择 MAX+1），但这会破坏可伸缩性。最好有一个单独的表，IMO。如果你将它[聚集](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)在 InnoDB 下，那无论如何都只是一个 B-Tree。*

# screwturn - 在Screwturn中列出页面附件

> ID：14625185
> 
> 赞同：2
> 
> 时间：2013-01-31T11:56:25.773
> 
> 标签：screwturn

有谁知道使用Screwturn在页面正文中显示页面附件列表的方法？我正在使用 3.0.4.560 并搜索了插件但找不到它。

我想要的只是输入一些 wiki 标记，所有页面附件的列表都显示在一个表格中，供用户下载它们。

我很确定它是可能的，因为每个页面已经有一个包含此信息的下拉菜单，我只想在实际页面中显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:52:19.203

我发现最简单的方法不是使用页面附件，而是使用文件链接：

1.  去`http://yourwikiname.com/Upload.aspx`
2.  使用**创建新目录**部分为您的文件创建一个文件夹（如果需要）
3.  导航到要放置文件的目录。
4.  在**上传文件**部分，逐个上传您的每个文件。
5.  返回 wiki 并编辑您想要链接的页面。
6.  有一个文件链接工具栏按钮（在蓝色页面链接按钮和地球按钮之间），您可以单击它来添加文件链接。

虽然这比附加到页面稍微复杂一些，但此方法将您的文件保存在一个中央位置，并允许您从任意数量的页面链接到文件。我发现这比将文件附加到单个页面更容易管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:30:48.863

您是否尝试过 FileListFormatter 插件？

在此处查找详细信息并下载[FileListFormatter 插件](http://www.screwturn.eu/Customize.FileListFormatter.ashx)。

# html - MediaWiki:Secure_HTML 和 Google Checkout 按钮格式

> ID：14625187
> 
> 赞同：1
> 
> 时间：2013-01-30T13:30:37.973
> 
> 标签：html, mediawiki, css, google-checkout

我正在使用[MediaWiki:Secure_HTML](https://www.mediawiki.org/wiki/Extension:Secure_HTML)扩展，并尝试呈现我生成的[Google Checkout 按钮。](https://checkout.google.com/sell2/settings?section=BuyNowButton)

按钮代码是这样的：

```
<form action="https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/XXXXXXXXX" id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" target="_top">
<table cellpadding="5" cellspacing="0" width="1%">
    <tr>
        <td align="right" width="1%">
            <select name="item_selection_1">
                <option value="1">$80.00 - Freeside Membership Dues (Standard)</option>
                <option value="2">$40.00 - Freeside Membership Dues (Starving Hacker)</option>
                <option value="3">$65.00 - Freeside Membership Dues (Joint-MIC)</option>
            </select>
            <input name="item_option_name_1" type="hidden" value="Freeside Membership Dues (Standard)"/>
            <input name="item_option_price_1" type="hidden" value="80.0"/>
            <input name="item_option_description_1" type="hidden" value=""/>
            <input name="item_option_quantity_1" type="hidden" value="1"/>
            <input name="item_option_currency_1" type="hidden" value="USD"/>
            <input name="item_option_name_2" type="hidden" value="Freeside Membership Dues (Starving Hacker)"/>
            <input name="item_option_price_2" type="hidden" value="40.0"/>
            <input name="item_option_description_2" type="hidden" value=""/>
            <input name="item_option_quantity_2" type="hidden" value="1"/>
            <input name="item_option_currency_2" type="hidden" value="USD"/>
            <input name="item_option_name_3" type="hidden" value="Freeside Membership Dues (Joint-MIC)"/>
            <input name="item_option_price_3" type="hidden" value="65.0"/>
            <input name="item_option_description_3" type="hidden" value=""/>
            <input name="item_option_quantity_3" type="hidden" value="1"/>
            <input name="item_option_currency_3" type="hidden" value="USD"/>
        </td>
        <td align="left" width="1%">
            <input alt="" src="https://checkout.google.com/buttons/buy.gif?merchant_id=XXXXXXXXX&amp;w=121&amp;h=44&amp;style=white&amp;variant=text&amp;loc=en_US" type="image"/>
        </td>
    </tr>
</table>
</form> 
```

我可以很好地让按钮显示在我的页面编辑上 - 但是，格式完全关闭。似乎`<input type="hidden">`我的每个下拉选项的项目正在呈现，这增加了很多空白。这些项目是不可见的，但在生成的安全 HTML 中，它或多或少看起来像这样：

![Secure_HTML 呈现的 HTML](../Images/907dfc269963719c33c3510188073411.png)

我希望要么使用一些 CSS 来纠正混乱，要么可能有另一个更合适或处理得更好的扩展`<input>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:54:03.747

事实证明，放入空格可能会`<pre>`通过 Markdown 生成工件标签，因此在格式化`<shtml>`. 删除由 Secure_HTML 散列的代码中的大量空白可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:45:11.497

将隐藏输入块包装在块元素中。要稍微整理一下，您可以将该块移动到表格的顶部 - 表格上方。由于输入标记仍将位于块级元素（字段集标记）内，因此它将保持有效的 XHTML。

```
<form action="https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/XXXXXXXXX" id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" target="_top">
<fieldset style=”display: none”&gt;
    <input name="item_option_name_1" type="hidden" value="Freeside Membership Dues (Standard)"/>
    <input name="item_option_price_1" type="hidden" value="80.0"/>
    <input name="item_option_description_1" type="hidden" value=""/>
    <input name="item_option_quantity_1" type="hidden" value="1"/>
    <input name="item_option_currency_1" type="hidden" value="USD"/>
    <input name="item_option_name_2" type="hidden" value="Freeside Membership Dues (Starving Hacker)"/>
    <input name="item_option_price_2" type="hidden" value="40.0"/>
    <input name="item_option_description_2" type="hidden" value=""/>
    <input name="item_option_quantity_2" type="hidden" value="1"/>
    <input name="item_option_currency_2" type="hidden" value="USD"/>
    <input name="item_option_name_3" type="hidden" value="Freeside Membership Dues (Joint-MIC)"/>
    <input name="item_option_price_3" type="hidden" value="65.0"/>
    <input name="item_option_description_3" type="hidden" value=""/>
    <input name="item_option_quantity_3" type="hidden" value="1"/>
    <input name="item_option_currency_3" type="hidden" value="USD"/>
</fieldset>
<table cellpadding="5" cellspacing="0" width="1%">
   <tr>
       <td align="right" width="1%">
           <select name="item_selection_1">
               <option value="1">$80.00 - Freeside Membership Dues (Standard)</option>
               <option value="2">$40.00 - Freeside Membership Dues (Starving Hacker)</option>
               <option value="3">$65.00 - Freeside Membership Dues (Joint-MIC)</option>
           </select>
       </td>
       <td align="left" width="1%">
           <input alt="" src="https://checkout.google.com/buttons/buy.gif?merchant_id=XXXXXXXXX&amp;w=121&amp;h=44&amp;style=white&amp;variant=text&amp;loc=en_US" type="image"/>
       </td>
   </tr>
</table> 
```

# android - 手机和平板电脑通用标识符

> ID：14625188
> 
> 赞同：4
> 
> 时间：2013-01-31T11:56:38.877
> 
> 标签：android

我正在android上开发一个应用程序，我需要获取设备的通用标识符。

我可以使用 IMEI，因为手机有 SIM 卡，但平板电脑没有。

有没有办法唯一识别平板设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:04:10.860

使用绑定到设备硬件的 ID 通常不是一个好主意。如果用户将他/她的手机卖给其他人，则设备 ID 不会更改，您可能会冒着将信息泄露给其他人的风险。由于这个和其他原因，各种平台正在弃用并从开发人员 API 中删除其设备 ID。在支持多用户的 Android 4.2 平板电脑上同样存在问题。

一种在功能上等效但不会以这种方式泄漏信息的简单方法是在您的应用程序首次启动时生成一个 GUID，将其存储在您的用户首选项中，并每次都使用该 GUID。这为您提供了该设备和应用程序安装的唯一令牌，如果您愿意，它可以在备份/恢复中幸存下来，并且如果他/她愿意，仍然允许用户擦除数据。它还有一个额外的优势，即它不需要任何外来的应用程序权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:57:46.973

您可以尝试使用无线网络控制器 (WiFi) 的唯一 MAC 地址

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:58:15.920

也许你读出了 MAC 地址，这可能会有所帮助

看看这个：[How to get the MAC address of the WIFI interface in android?](https://stackoverflow.com/questions/6276380/how-to-get-mac-address-of-the-wifi-interface-in-android)

# web-services - 这种简单的restful（ish）drupal 6用户授权方法有什么问题？

> ID：14625189
> 
> 赞同：0
> 
> 时间：2013-01-31T11:56:43.073
> 
> 标签：web-services, rest, drupal-6, authorization

这行得通......但它错了吗？特别是它本质上是不安全的吗？

我错过了什么？我真的需要服务模块来让我做一些简单的宁静（和安全）drupal<->电话应用程序通信吗？

这个想法是这些网址将通过电话应用程序发送（编辑：并且将使用 POST 而**不是**GET）

```
/**
 * Simple restish switchboard reading
 * This is not proper rest, but provide a quick and dirty framework.
 */
function _rest_go() {
  // login https://example.com/rest/go?mode=login&name=(yourusername)&pass=(yourpasword)
  // logout https://example.com/rest/go?mode=logout
  // logout https://example.com/rest/go?mode=me
  switch ($_REQUEST['mode']) {
    case 'login':
      $params = array(
          'name'   => $_REQUEST['name'],
          'pass'   => $_REQUEST['pass'],
          );
      $user = user_authenticate($params);
      $result = $user;
      break;
    case 'logout':
      require_once(drupal_get_path('module', 'user') . '/user.pages.inc');
      user_logout();
      $result = 'logged out';
      break;
    case 'me':
      $result = rest::myCiviID();
      break;
  }
  drupal_json($result);
  exit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:30:15.453

如果您在网络浏览器中尝试，这些 url 将有效，但如果 cookie 信息不可用，则可能无法通过电话应用程序。

在这种情况下，登录 api 应该在成功登录应用程序时返回用户会话 ID，并且在注销请求中，您需要传递此会话 ID 以注销该特定用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:52:20.767

一点点的偏执永远不会伤害。只要您不验证/清理您的数据，您就会面临可能的安全问题。该问题的严重程度取决于您如何使用从用户那里收到的输入。它的范围可以从您网站的一些小破坏/风格破坏到像破坏您的数据库这样的大麻烦。

经验法则是：**永远不要相信用户输入**！始终对其进行验证和消毒。PHP/Drupal 提供了许多方法来确保您操作的数据是安全的。

我建议您开始研究 PHP 在验证/卫生方面必须提供的功能。据我了解，您正在尝试构建一个轻量级的替代品来替代您认为可能是笨重的模块。通过使用 PHP，您不必引导 Drupal 就可以访问它的一些清理内容的功能（例如`check_plain`，`check_url`等等）。

所以请继续阅读：[过滤器功能](http://www.php.net/manual/en/ref.filter.php)

# r - 嵌套 lapply 性能，如何优化？

> ID：14625190
> 
> 赞同：3
> 
> 时间：2013-01-31T11:56:56.007
> 
> 标签：r, list, lapply

我有一个清单`data.frames`。在我想通过分组 ( `z`) 拆分的每个 data.frame 中运行一个函数，将结果重新组合在一起，然后将嵌套的所有结果`lapply`放在一个 data.frame 中，然后将结果列表扁平`data.frame`化为一个`data.frame`.

```
library(plyr)
df <- data.frame(x = sample(1:200, 30000, replace = TRUE), 
                y = sample(1:200, 30000, replace = TRUE), 
                z = sample(LETTERS, 30000, replace = TRUE))

alist <- list(df,df,df) # longer in real life
answer <- lapply(alist, function(q) {
    a <- split(q,q$z)
    result.1 <- lapply(a, function(w) {
        neww <- cbind(w[,1],w[,2])
        result.2 <- colSums(neww)
    })
    ldply(result.1)
})
# cor(neww) can actually be a variey of foos I just use cor() for easy reproducibility
ldply(answer) 
```

这有一些非常困难的内存使用，而且速度也很慢。感谢@Andrie，我知道如何在开始之前清理我的工作区：

```
 rm(list=setdiff(ls(), "alist")) 
```

但是有没有办法修改我的方法，比如`w`在第二个`lapply`等中进行垃圾处理，以尝试减少内存使用并加快速度？在这种情况下`foo`喜欢矩阵，所以`data.table`不会是我的答案。在其他方面`foo`，我将需要所有`w`，而班级将需要成为`data.frame`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T12:22:47.007

Try something like this:

```
ldply(alist, ddply, "z", summarize, xy.foo = foo(x, y)) 
```

If you want `x` and `y` to show up in your final data.frame, replace `summarize` with `transform`. Also, looking at your `foo` usage, you might have to replace `(x, y)` with `cbind(x, y)`.

Also, I would recommend you profile your code. In the end, `foo` might be what is slowing you down, not the split/combine part.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T12:12:59.953

你为什么不使用`ddply`and `llply`from`plyr`而只是`ldply`??

```
# Note: @Flodel has a very nice, simple one-line plyr solution
# Please use that.
out <- ldply(alist, function(q) {
    ddply(q, .(z), function(w) {
        neww <- w[, -3]
        result.2 <- colSums(neww) # dummy function
    })
}) 
```

第一个逐个`ldply`传递列表的元素。因此，`alist`每个时间都包含在 的每个元素中。然后，在此范围内，我们想拆分。由于输入是a并且输出也应该是 a我们使用第二个参数来分割 by 。在这里，您进行计算，返回您想要的任何内容（在这种情况下）。返回为.`q``data.frame``list``z``q``data.frame``data.frame``ddply``.(z)``z``colSums``ldply``data.frame`

`Data.table`解决方案：另一种*快速*`data.table`解决方案是在组合上使用 a `data.frame`，可以按如下方式实现（@Roland 在他的评论中也提到了）：

```
require(data.table)
# for creating a group 
group <- vapply(alist, nrow, integer(1))
dt <- data.table(do.call(rbind, alist))
# create group
dt[ , grp := rep(1:3, group)]
setkey(dt, "grp", "z")
# call your function (here column means)
dt[, lapply(.SD, mean), by="grp,z"]
# or if its correlation
dt[, list(cor_x_y = cor(x,y)), by="grp,z"] 
```

# mysql - 错误代码 1292 错误的日期值 mysql

> ID：14625191
> 
> 赞同：26
> 
> 时间：2013-01-31T11:56:56.370
> 
> 标签：mysql, mysql-workbench, mysql-error-1292

我有一张桌子

```
`CREATE  TABLE IF NOT EXISTS `PROGETTO`.`ALBERGO` (

`ID` INT(11) NOT NULL COMMENT 'identificativo dell\' albergo' ,
`nome` VARCHAR(45) NULL COMMENT 'Il nome dell\'albergo' ,
`viale` VARCHAR(45) NULL COMMENT 'Il viale in cui si trova  ' ,
`num_civico` VARCHAR(5) NULL COMMENT 'Il numero civico che gli appartiene' ,
`data_apertura` DATE NULL COMMENT 'Data di inizio apertura (inizio stagione)' ,
`data_chiusura` DATE NULL COMMENT 'Data di chiusura (fine stagione)' ,
`orario_apertura` TIME NULL COMMENT 'Orario di apertura' ,
`orario_chiusura` TIME NULL COMMENT 'Orario di chiusura' ,
`posti_liberi` INT(11) NULL COMMENT 'Disponiblità posti liberi ' ,
`costo_intero` FLOAT NULL COMMENT 'Costo del prezzo intero' ,
`costo_ridotto` FLOAT NULL COMMENT 'Costo del prezzo ridotto' ,
`stelle` INT(11) NULL COMMENT 'Classificazione in base al criterio delle stelle' ,
`telefono` VARCHAR(15) NULL COMMENT 'Recapito telefonico' ,
`mail` VARCHAR(100) NULL COMMENT 'Recapito e-mail' ,
`web` VARCHAR(100) NULL COMMENT 'Sito Web relativo all\'ente' ,
'Nome-paese` VARCHAR(45) NOT NULL COMMENT 'Identificativo del paese in cui si trova l\'albergo' ,
`Comune` CHAR(2) NOT NULL COMMENT 'Identificativo del comune in cui si trova l\'albergo' ,
PRIMARY KEY (`ID`) ,
INDEX `Nome-paese` (`Nome-paese` ASC) ,
INDEX `Comune` (`Comune` ASC) ,
CONSTRAINT `Nome-paese`
  FOREIGN KEY (`Nome-paese` )
  REFERENCES `PROGETTO`.`PAESE` (`Nome-paese` )
  ON DELETE NO ACTION
  ON UPDATE CASCADE,
CONSTRAINT `Comune`
  FOREIGN KEY (`Comune` )
  REFERENCES `PROGETTO`.`PAESE` (`Comune` )
  ON DELETE NO ACTION
  ON UPDATE CASCADE)
ENGINE = InnoDB 
```

当我尝试运行此查询时：

```
INSERT INTO `PROGETTO`.`ALBERGO`(`ID`, `nome`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `posti_liberi`, `costo_intero`, `costo_ridotto`, `stelle`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) 
VALUES(0, 'Hotel Centrale', 'Via Passo Rolle', '74', '01-05-2012', '31-09-2012', '06:30', '24:00', 80, 50, 25, 3, '43968083', 'info@hcentrale.it', 'http://www.hcentrale.it/', 'Trento', 'TN') 
```

***错误代码：1292。日期值不正确：第 1 行的“data_apertura”列的“01-05-2012”***

我有什么要改变的？（我尝试将格式的日期从 gg/mm/yyyy 更改为 gg-mm-yyyy，但没有任何改变）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2016-03-11T15:29:26.490

使用 mysql **5.7**，不允许使用像 0000-00-00 00:00:00 这样的日期值。

如果你想允许它，你必须更新你的**my.cnf**像：

```
sudo nano /etc/mysql/my.cnf 
```

寻找

```
[mysqld] 
```

之后添加：

```
sql_mode="NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

重启mysql服务：

```
sudo service mysql restart 
```

完毕！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-31T12:16:10.727

在以下格式`yyyy-MM-dd`示例中插入日期，

```
INSERT INTO `PROGETTO`.`ALBERGO`(`ID`, `nome`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `posti_liberi`, `costo_intero`, `costo_ridotto`, `stelle`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) 
VALUES(0, 'Hotel Centrale', 'Via Passo Rolle', '74', '2012-05-01', '2012-09-31', '06:30', '24:00', 80, 50, 25, 3, '43968083', 'info@hcentrale.it', 'http://www.hcentrale.it/', 'Trento', 'TN') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-10T10:59:41.900

我在工作台加上来自 C# 应用程序的插入查询中遇到了同样的问题。在我的情况下，使用 ISO 格式解决了这个问题

```
string value = date.ToString("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-05T23:56:33.757

我碰巧在 localhost ，在 Windows 10 中使用[WAMP](http://www.wampserver.com/en/)工作，事实证明，Wamp 有一个真正可访问的配置界面来更改 MySQL 配置。您只需要进入 Wamp 面板，然后进入 MySQL，然后进入设置并将模式更改为 sql-mode: none。（基本上禁用严格模式）下图说明了这一点。

[![在此处输入图像描述](../Images/3fc6a3190484986a08d27ff2b0d1532e.png)](https://i.stack.imgur.com/xQSbS.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T18:02:30.413

更新。“2019-08-00”形式的日期将触发相同的错误。添加行：

```
[mysqld]

sql_mode="NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

也`mysql.cnf`解决这个问题。现在插入格式错误的日期会为超出范围的值生成警告，但会插入数据。

# iphone - 在 iPhone 模拟器中运行项目后，Xcode 4.6 经常挂起

> ID：14625197
> 
> 赞同：19
> 
> 时间：2013-01-31T11:57:06.503
> 
> 标签：iphone, ios, xcode, ios-simulator, freeze

在我在 iPhone 模拟器中运行我的 iPhone 项目后，Xcode 4.6 t 每隔 2 次或第 3 次就会挂在“**在 iPhone 6.1 模拟器中运行”**阶段。是的，定期进行。

它几乎挂在我运行的每个项目和我的 2 台 Mac 机器上（Mac Mini 8GB、Core 2 Duo、SSD 驱动器和 MacBook Pro Core 2 Duo 3,1 Ghz、8BG RAM、SSD 驱动器）

这也是以前的 Xcode 中的问题，但它很少发生以至于可以容忍。

我需要重新启动我的 Xcode 和模拟器才能再次运行项目（有时甚至重新启动 OS X）。

**是什么原因造成的，除了重新启动 Xcode 来解决它，我们还能做些什么呢？** 为什么苹果这么长时间都无法解决这个问题？

**更新：**

我被标记为这个问题没有建设性，我不同意我的主要和第一个问题是：

**是什么导致这种常规挂起？** 为什么苹果这么长时间都没有解决它不是我的主要兴趣。

主要关注点仍然非常实用和技术性：这种经常性故障的**原因是什么，开发人员可以手动做些什么来帮助它？**

毕竟：Xcode 只是我们在工作中使用的工具，每一个可以提高生产力的知识都是有价值的。

**更新 2：**

** 重新安装到最新的 Mac OS X Lion（全新安装）并安装最新的 Xcode 后，iTunes、Safari、iPhone 模拟器问题仍然存在。** 这显然是 Xcode 或 iPhone 模拟器错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:53:39.027

我经历过很多次同样的事情，通常一天很多次，不一定是在崩溃之后。所以是的，这个错误存在，我已经向 Apple 报告了它，并根据数据保证继续修改报告。您应该这样做（并向 Apple 提供一个示例报告，以显示线程在每次挂起期间都在做什么）。这与 PLCrashReporter 无关；我可以在一个裸模板项目中遇到这个问题。但是，您的问题似乎没有建设性，因为无法给出有用的答案。谁能告诉你为什么苹果没有修复它？唯一能告诉你的人是苹果，你知道他们*不会*告诉你的。所以你的问题纯粹是修辞。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T01:27:37.507

我在一个类似的帖子上找到了修复。确保“127.0.0.1 localhost”在您的 etc 主机文件中。这为我解决了这个问题，我 100% 的时间都遇到了“挂在模拟器上”的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T01:36:59.957

我遇到了同样的问题，发现它与最新的 iTunes 有关，因为当我拔下我的 iPhone 目标时，色轮会消失。从那以后，我将 iTunes 降低到 10.7，问题就消失了。较新的 iTunes 似乎在查询 iPhone 时卡住了，无法进行。我在旧 iMac 上运行 Mac OS X 10.7.5。我在装有 10.8 和最新 iTunes 的 MacBook 上运行时没有这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-19T07:40:15.087

我注意到您可以通过在模拟器上运行应用程序来显着减少此错误的发生，如下所示：

*   第一次在模拟器上运行没问题，上传应用到模拟器时不会死机
*   当您想重新运行应用程序时，请确保先按停止（或键 cmd+.）停止先前的执行并等待 3-5 秒
*   运行应用程序 (cmd+r)

通过在停止应用程序后等待几秒钟，它似乎可以防止 Xcode 执行冻结。我认为调试器没有足够的时间来分离和重新连接，所以它挂起。

# css - SASS中的输入+标签语法

> ID：14625199
> 
> 赞同：1
> 
> 时间：2013-01-31T11:57:09.237
> 
> 标签：css, sass

我在谷歌上搜索，但我没有找到有关该问题的任何信息。例如，如果我有以下 CSS：

```
input[type="radio"]:checked + label {
    background: #666;
    color: c00;
    height: 500px;
    width: 500px;
} 
```

是否有一些不同的方式来使用**SASS**编写它，或者语法与用 CSS 编写的相同？像嵌套..

另一个问题是当我想要一个特定的标签时。那么，当我现在想具体说明时，如何在 SASS 中编写该`label`部分`type="one"`：

```
input[type="radio"]:checked + label[type="one"] {
    background: #666;
    color: c00;
    height: 500px;
    width: 500px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:20:27.103

使用 SASS，您可以使用与 CSS 相同的语法或根据 SASS 嵌套规则解耦选择器：例如，您也可以编写

```
input[type="radio"]:checked {

    + label {
        background: #666;
        color: c00;
        height: 500px;
        width: 500px;
    }
} 
```

同样对于第二个问题，您可以写

```
input[type="radio"]:checked {
    + label[type="one"] {
       ...
    }
    /* other rules for element next to or nested in input:radio */
} 
```

或者

```
input[type="radio"]:checked + label {
    &[type="one"] {
       ...
    }
    /* other rules for labels with different attributes or classes */
} 
```

或者也

```
input[type="radio"]:checked {
    + label {
        &[type="one"] {
            /* other rules for elements nested into the label[type="one"] */
        }
        /* other rules for labels with different attributes or classes 
         * (or nested in a generic label) */
    }
    /* other rules for element next to or nested in input:radio */
} 
```

取决于哪种形式对您更方便。编写 CSS 代码没有错误或正确的方法，就像这样可以让您更轻松地编写您需要定义的所有规则（只需编写一次选择器，您就可以在纯 CSS 中多次编写）。

# cmmi - IT 部门管理上的 ITIL 或 CMMI？

> ID：14625202
> 
> 赞同：1
> 
> 时间：2013-01-31T11:57:17.787
> 
> 标签：cmmi, itil

我想组织我们的IT部门，主要负责软件开发、系统管理和硬件维护。我认为我必须从编写流程和说明开始。由于我们从一开始就受益于标准，因此可以更好地组织 IT 部门的结构。为此，我一直试图在 Internet 上找到一些根据 ITIL 原则编写的进程。但是我还没有找到:(你认为我应该继续用CMMI搜索吗？哪一个更适合系统管理和IT部门管理？我知道CMMI与质量更相关，但我认为不是仅由质量组成。感谢您的宝贵时间...

费尔达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:56:06.260

两个命名的流程框架，即CMMI 和ITIL 都关注质量。这是我的比较：

1.  CMMI 标准和指南是免费的，但是您应该为 ITIL 文档付费。
2.  由于是免费的，有很多关于 CMMI 的论文和文章。您也无法在 ITIL 上找到此类信息。
3.  CMMI和它的前身，即CMM，可以追溯到25年前，到现在已经成熟了。但是，你在 ITIL 上找不到这样的历史。
4.  在CMMI背后，你可以发现CMU和DoD比ITIL背后的可信度更高。

提到这些项目后，我建议您使用 CMMI 而不是 ITIL。有很多类似的框架，比如 COBIT 和 TickIT，我认为 CMMI 比它们更成熟。

# ruby-on-rails - 具有范围区域设置的 rails 路线

> ID：14625205
> 
> 赞同：2
> 
> 时间：2013-01-31T11:57:21.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, locale

我在我的应用程序中添加了另一种语言。因此，我对静态页面使用以下路由：

```
scope "(:locale)", locale: /en|br/ do
  get "static_pages/about"
  match '/about', to: 'static_pages#about'
  ...
end 
```

它工作正常，结果：

```
http://localhost:3000/en/about 
```

但是，每次我在语言之间切换时，它都会返回完整路径而不是匹配：

```
http://localhost:3000/en/static_pages/about 
```

我切换语言的方式：

```
#links
<%= link_to (image_tag '/england.png'), url_for( locale: 'en' ) %>
<%= link_to (image_tag '/brazil.png'), url_for( locale: 'br' ) %>  

#application controller
before_filter :set_locale
def set_locale
  I18n.locale = params[:locale]
end

def default_url_options(options={})
  { locale: I18n.locale }
end 
```

这是一个问题，因为我在我的 CSS 文件中使用当前路径，所以每次我切换语言时都会弄乱布局：

```
<%= link_to (t 'nav.about'), about_path, class: current_p(about_path) %> 

#helper
def current_p(path)
   "current" if current_page?(path)
end 
```

**我试图找到一种`match`在切换语言时返回路线的方法。任何的想法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:32:28.693

我已经解决了结合`match`和的问题`get`。
所以，而不是：

```
scope "(:locale)", locale: /en|br/ do
  get "static_pages/about"
  match '/about', to: 'static_pages#about'
  ...
end 
```

我现在有了：

```
scope "(:locale)", locale: /en|br/ do
  match '/about', to: 'static_pages#about', via: 'get'
  ...
end 
```

**编辑**- 感谢[Sevenseacat](https://stackoverflow.com/users/560215/sevenseacat)，一个更简单，更短的解决方案：

```
scope "(:locale)", locale: /en|br/ do
  get '/about' => 'static_pages#about'
  ...
end 
```

# ruby-on-rails - 使用 Rspec 在 Rails 应用程序上测试 ruby

> ID：14625209
> 
> 赞同：1
> 
> 时间：2013-01-31T11:57:28.610
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

`rspec spec/models/contact_spec.rb`==> 在我的终端中运行此代码时，我收到以下错误消息：`uninitialized constant Factory.`

```
# spec/factories/contacts.rb
=============================================
require 'faker'

FactoryGirl.define do
  factory :contact do |f|
    f.firstname { Faker::Name.first_name }
    f.lastname { Faker::Name.last_name }
  end
end
=============================================

# spec/models/contact_spec.rb
=============================================
require 'spec_helper'
require 'factory_girl_rails'
describe Contact do
  it "has a valid factory" do
    Factory.create(:contact).should be_valid
  end
  it "is invalid without a firstname"
  it "is invalid without a lastname"
  it "returns a contact's full name as a string"
end
============================================= 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:39:53.083

尝试`FactoryGirl.create(:contact)`代替`Factory.create(:contact)`; 工厂快捷方式可能未在您的应用上配置。

# php - javascript在html文件中工作但不在php文件中

> ID：14625210
> 
> 赞同：0
> 
> 时间：2013-01-31T11:57:28.813
> 
> 标签：php, javascript, jquery, html

我为我的网站制作了一个滑块页面。插入 jquery 脚本后，代码在另存为“.html 文件”时工作得非常好，但当另存为“.php 文件”时它不起作用。我想有一些 jquery/javascript 问题。

'prev-slide' 和 'next-slide' 链接到滑块本身的 javascript 文件。它们对于“.html 文件”工作正常，但对于“.php 文件”又不行

我如何在 php 文件中调用 javascript/jquery 以便将它们包含在内？

我在这里想念什么？请帮助并详细解释，因为我是新手。谢谢

```
<div class="wrap">
<div id="slider1" class="slider">
<ul>
<a href=""><img src="img/images/logos_01.png" alt=""></a>
<a href=""><img src="img/images/logos_02.png" alt=""></a>
<a href=""><img src="img/images/logos_03.png" alt=""></a>
<a href=""><img src="img/images/logos_04.png" alt=""></a>
<a href=""><img src="img/images/logos_05.png" alt=""></a>
<a href=""><img src="img/images/logos_06.png" alt=""></a>
</ul>   
</div>
<div class="controls">

<a href="" class="prev-slide"><img src="img/images/prev.png" alt="" /></a> 
<a href="" class="next-slide"><img src="img/images/next.png" alt="" /></a> 

</div>
</div>

<style type="text/css" src="css/style.css"></style>

<script src="js/lemmon-slider.js"></script> 
<script src="js/libs/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(window).load(function(){

$( '#slider1' ).lemmonSlider({

'infinite' : true

});
alert('OK');
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:12:23.827

不确定这是否会解决它，但尝试加载 jQuery 源文件

```
<script src="js/libs/jquery.min.js" type="text/javascript"></script> 
```

在您的滑块脚本之前：

```
<script src="js/lemmon-slider.js"></script> 
```

jQuery 应始终在任何其他 JS 文件之前首先加载，因为它需要在使用 jQuery 的脚本之前读取。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:00:49.000

我觉得这有什么不对...

以下行中的`\`反斜杠`src="js/libs/jquery.min.js\"`

```
<script src="js/libs/jquery.min.js\" type="text/javascript"></script> 
```

并`*`在以下几行中

```
*<script type="text/javascript"> 
```

和

```
</script>* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:00:49.803

改变这个

```
 <script src="js/libs/jquery.min.js\" type="text/javascript"></script>
<style type="text/css" src="css/style.css"></style> 
```

到

```
<script src="js/libs/jquery.min.js" type="text/javascript"></script>
                               --^-- //her you have extra  '\' 
<link href="css/style.css" rel="stylesheet" type="text/css" /> 
```

# iphone - 解析时的内存问题

> ID：14625211
> 
> 赞同：1
> 
> 时间：2013-01-31T11:57:29.880
> 
> 标签：iphone, ios, objective-c, ipad, memory-management

下面的 xmlparser 代码显示内存警告，我暂时无法修复任何线索请帮助我

```
if  ([elementName isEqualToString:@"page_details"])
    {
        IstructPageDetails *objIstructPageDetails = [[IstructPageDetails alloc] initwithIstructPageDetails:attributeDict];
        [m_objmuteArrOutput addObject:objIstructPageDetails];
        [objIstructPageDetails release];

    }

Incorrect decrement of the reference count of an object that is not owned at this point by the caller 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:02:59.843

initwithIstructPageDetails 应该是 initWithIstructPageDetails:helps 因为分析器查看可可命名约定

由于代码看起来不错，这是我眼中唯一的可能性

# ios - 在 iOS 上观察特定实体类型的托管对象上下文更改的最有效方法是什么？

> ID：14625212
> 
> 赞同：3
> 
> 时间：2013-01-31T11:57:31.970
> 
> 标签：ios, objective-c, core-data

抱歉，如果这已在其他地方讨论到死，但我找不到直接解决我的疑问的问题。

我正在开发一个应用程序，它以 JSON 格式从远程服务器下载对象并将结果转换为核心数据对象。

一段时间以来，我一直在使用`NSFetchedResultsController`过滤器来观察特定实体类型的对象更改`NSPredicate`。此处的目的是仅在添加、修改或删除满足特定标准的管理对象时才通知更改。

我知道`NSManagedObjectContextObjectsDidChangeNotification`，`NSManagedObjectContext`但是我的理解是`-userInfo`字典包含所有对象更改，无论实体如何。

我的担心可能是没有根据的，但是由于我不习惯`NSFetchedResultsController`管理 a `UITableView`，因此我在为此目的使用该课程时是否浪费了？

当添加、修改或删除特定实体类型和属性值的对象时，是否有更好的通知方式？

非常感谢。

Ps 我知道`NSArrayController`Cocoa 中似乎包含我需要的功能的可用性，尽管我没有尝试过它。此课程不适用于 iOS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:02:07.587

```
NSManagedObjectContextObjectsDidChangeNotification 
```

每当插入/更新/删除上下文中的托管对象时，它都会提供通知。

或者

，你可以使用一个`custom NSManagedObject`子类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:53:16.110

我`NSFetchedResultsController`过去曾使用它来跟踪我感兴趣的核心数据对象的更改。没有什么说你必须将它与 UITableView 实现联系起来。

也就是说，你可能想看看这个问题：[Using NSFetchedResultsController without UITableView](https://stackoverflow.com/questions/3216685/using-nsfetchedresultscontroller-without-uitableview)

# php - php函数将数字转换为货币格式

> ID：14625220
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:57:55.967
> 
> 标签：php, html

> **可能重复：**
> [PHP number_format 是四舍五入？](https://stackoverflow.com/questions/6087628/php-number-format-is-rounding)

我需要一个 PHP 函数来将数字转换为货币格式，如下所示：

```
444 output 444.00
444.156 output 444.15
0 output 0.00 
```

**它不应四舍五入最后一位小数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:00:51.843

尝试[number_format](http://php.net/manual/en/function.number-format.php)方法。它将为您完成工作。

```
$number = 444.657;

$format_number = number_format($number, 2, '.', '');
// 444.66 
```

# 无舍入

```
substr(number_format($number, 3, '.', ''), 0, -1);
//444.65 
```

# php - 阻止访问包含文件

> ID：14625222
> 
> 赞同：0
> 
> 时间：2013-01-31T11:58:04.743
> 
> 标签：php, .htaccess

我遇到了 .htaccess 文件重写规则的问题。我想在我的根目录中有一个 .htaccess 文件，并在那里制定规则以阻止人们直接通过浏览器访问文件。所以，例如我有文件夹 blah/includes/file.php 和 .htaccess 文件在 blah/ 文件夹中，我想防止人们能够只输入浏览器 blah/includes/file.php 并获取该文件，但是我也希望我在应用程序中的功能能够使用这些文件。我知道他们几乎不可能知道我的包含文件的确切名称，但我想确定一下。提前致谢。

这是我没有响应的代码：

```
<IfModule mod_rewrite.c>
    ## Enable Mod Rewrite, this is only required once in each .htaccess file
    RewriteEngine On
    RewriteBase /
    ## Test for access to includes directory
    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /includes/ .*$ [NC]
    ## Test that file requested has php extension
    RewriteCond %{REQUEST_FILENAME} ^.+\.php$
    ## Forbid Access
    RewriteRule .* - [F,NS,L] 
</IfModule> 
```

注意：如果这可能很重要，我正在 localhost 中进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:44:21.407

问题是在第一个 RewriteCond 中 /includes/ 后面有一个空格，这会引发错误。

但是：我不会使用`%{THE_REQUEST}`，因为它包含 HTTP 请求（请参阅[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)）。改为使用`%{REQUEST_URI}`。

所以，如果你想禁止访问`/<folder>/include/*.php`，你可以使用这个代码：

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI} ^/[^/]+/includes/.*\.php$ [NC]
    RewriteRule .* - [F,NS,L]
 </IfModule> 
```

假设您的 .htaccess 位于 blah/ 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:43:39.250

最快的方法就是在您的**包含**目录中放置一个单行**.htaccess**文件：

 **`deny from all`

另一种选择是将**包含**文件夹放在 Web 可访问目录之外。

```
/home/
    /username/
        /includes/
        /public_html/
            /index.php 
```

如果您*仍*想使用 a `RewriteRule`，那么这就是您要使用的：

`RewriteRule ^includes/ - [F,L,NC]`

这将返回`401 Forbidden`尝试访问以 . 开头的 URI 的响应`includes`。**

# git - Git 分支内容

> ID：14625223
> 
> 赞同：1
> 
> 时间：2013-01-31T11:58:07.040
> 
> 标签：git, git-branch

当我创建一个新分支时，我看到的内容与“master”中的内容相同。

如何分离内容，以便分支中的任何内容仅在分支中，而主中的任何内容都保留在主中？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:01:25.923

当你分支时，你已经在分离内容。您看到的内容与 master 中的内容相同，因为您尚未提交任何更改。尝试更改文件然后提交。此新更改将保留在您的分支中，并且不会出现在您的主分支中。

[阅读](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)有关基本分支的信息。

# c# - 从 XML 文件中删除字符行

> ID：14625225
> 
> 赞同：-4
> 
> 时间：2013-01-31T11:58:08.733
> 
> 标签：c#, xml, line

我有一些 XML 文件，其中包含我想从文件中删除的带有字符串字符（垃圾）的行。我正在搜索可以做到这一点的代码，有人可以帮我吗？

```
<value key="EE_BELL_TIME">
  <val name="Siren Time" show="1" type="BYTE" size="8" poff="260" psize="8" pbitoff="0" />
  <posvalues>
    <pval name="1 minute" num="1" />
    zeqmmzv
    <pval name="3 minutes" num="3" />
    <pval name="4 minutes" num="4" />
    <pval name="8 minutes" num="8" />
    fmengu
    <pval name="10 minutes" num="10" />
    <pval name="15 minutes" num="15" />
    p
    <pval name="20 minutes" num="20" />
  </posvalues>
</value> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:31:48.057

在`C#`中，您可以使用正则表达式作为查找 XML 标记的解决方案，如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        // Open and read into a string the file containing the XML
        string s = System.IO.File.ReadAllText("file.xml");

        // You have too match (?>\<).*(?>\>), which also removes the line feeds
        var matches = Regex.Matches(s, @"(?>\<).*(?>\>)");

        // Use a StringBuilder to append the matches
        var sBuilder = new StringBuilder();

        // Loop through the matches
        foreach (Match item in matches)
        {
            sBuilder.Append(item.Value);
        }

        // Show the result
        Console.WriteLine(sBuilder.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:03:54.653

你可以用一种非常简单的方式做到这一点：

```
 string[] lines = File.ReadAllLines(xmlPath);
 File.WriteAllLines(xmlPath, lines.Where(l => l.StartsWith("<") && l.EndsWith(">"))); 
```

这只是一个非常简单的解决方案，但它应该适用于您的 xml 文件

更新代码

```
Encoding encoding = Encoding.GetEncoding(1252);
        string[] lines = File.ReadAllLines(xmlFile, encoding);
        List<string> result = lines.Select(line => line.TrimStart().TrimEnd()).Where(trim => trim.StartsWith("<") && trim.EndsWith(">")).ToList();
        File.WriteAllLines("XmlFile2.xml", result, encoding); 
```

更新为不修剪线条：

```
Encoding encoding = Encoding.GetEncoding(1252);
        string[] lines = File.ReadAllLines(xmlFile, encoding);
        List<string> result = (from line in lines let trim = line.TrimStart().TrimEnd() where trim.StartsWith("<") && trim.EndsWith(">") select line).ToList();
        File.WriteAllLines("XmlFile2.xml", result, encoding); 
```

# jquery - jquery验证位置错误标签

> ID：14625228
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:58:12.543
> 
> 标签：jquery, jquery-validate

![http://s4.postimage.org/bpmlh7b65/error.jpg](../Images/2ddf5185575c44518b34b385703dbd30.png)

这对我也不起作用，当我尝试这个时发生错误：

```
error.insertBefore(element)
error.css('float','left') 
```

或者：

```
error.attr('style','float:left') 
```

只有我可以像这样添加这些属性：

```
$(error).someproperty 
```

这是我的代码，因为我在 TFS 上工作并且不允许复制/粘贴，所以我无法复制粘贴。问题是使用此代码我无法`float left`显示错误消息。我希望该错误应出现在文本框的左侧和下方。还有一件事，我只是在测试，我把它放在`float =right`上面的图片中，所以忘了它。`float:left`也不工作。我已经检查过了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:00:30.840

[根据文档](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)，`rules('add', rules)`这只是添加您**`rules`**和他们的消息的一种方法，仅此而已。您在您的方法中*不正确地*放置`errorElement:`,`wrapper:`和。`errorPlacement:``rules('add', rules)`

`errorElement:`, `wrapper:`,`errorPlacement:`不是. **_** `rules`这些被称为**选项**，因此只能放在[`.validate(options)`](http://docs.jquery.com/Plugins/Validation/validate#options).

```
$(document).ready(function(){
    $('#myform').validate({
        errorElement: 'div',
        wrapper: 'div',
        errorPlacement: function(error, element) {
            error.insertAfter(element); // default function
        }
    });
}); 
```

否则，我不知道你在问什么，你应该把你的实际代码放在 OP 中，这样我们就不必重新输入它来回答。

# c# - 通过 WindowService 运行执行 GUI 相关任务的批处理文件

> ID：14625236
> 
> 赞同：1
> 
> 时间：2013-01-31T11:58:27.917
> 
> 标签：c#, session, powershell, batch-file, windows-services

我知道 Windows 服务无法运行与 GUI 相关的任务，因为它不在操作系统 ui 会话上运行。

我有一个执行 PowerShell 脚本的批处理文件，该脚本打开 PowerShell 控制台等。

当我尝试使用 Windows 服务运行批处理文件时，什么也没有发生。当我尝试使用 exe 运行此批处理时，它可以工作。如何让服务运行此类任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:34:39.273

要详细说明@Henrik 的建议，您可以直接从 C# 执行批处理文件中的命令，这可能会起作用。

```
Process cmd = new Process();
ProcessStartInfo info = new ProcessStartInfo();
info.FileName = "cmd.exe";
info.RedirectStandardInput = true;
info.UseShellExecute = false;
cmd.StartInfo = info;
cmd.Start();
using (StreamWriter sw = cmd.StandardInput)
{
    sw.WriteLine("echo command1");
    sw.WriteLine("echo command2");
    sw.WriteLine("echo command3");
} 
```

# javascript - 将表单值传递给 JavaScript 函数

> ID：14625244
> 
> 赞同：2
> 
> 时间：2013-01-31T11:58:52.103
> 
> 标签：javascript

我在这里和网络上阅读了很多帖子，我什至有关于这个主观的书籍，但我就是无法让它发挥作用。我只是无法让函数获取“RadioDrink”变量的值。我已经尝试了各种组合使用如下所示的 DOM 方法和此处使用集合（this）和（form），但没有运气。任何帮助，将不胜感激。

```
function ValDrink(form){
if (form.RadioDrink.value == "soup")
    {
    alert("Its soup OK!");
    return true; // OK
     } 
```

======================这是我的代码。======================

```
<html>
<head>
<title>Test</title>

<script type="text/JavaScript">
<!--
function ValDrink()
{   
    if (document.forms.Drinks.RadioDrink.value == "soup")
    {
      alert("Its soup OK!");
      return true; // soup
    }
    else
    {
      alert("OK");
      return false; // not soup
    }
}
//-->
</script>

</head>

<body>
  <form method="post" id="Drinks" name="Drinks" onsubmit="return ValDrink()">
    <input type="radio" checked name="RadioDrink" value="Tea">Tea<br>
    <input type="radio" name="RadioDrink" value="Coffee">Coffee<br>
    <input type="radio" name="RadioDrink" value="Soup">Soup<br>
    <input type="checkbox" name="CheckMilk" value="Yes">Milk
    <input type="checkbox" name="CheckSugar" value="Yes">Sugar
    <br>
    <input type="submit" name="OKButton" value="Vend">
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:13:55.100

不是获得收音机价值的正确方法。使用下面的函数，也可以查看[这个问题](https://stackoverflow.com/q/1682964/1823389)

```
function ValDrink()
{   
    var radios =document.forms.Drinks.RadioDrink;

    for (var i = 0, length = radios.length; i < length; i++) {
        if (radios[i].checked && radios[i].value==="Soup") {
            alert("Its soup OK!"); // soup
            return true;
        }
    }
    alert("OK");
    return false; // not soup
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:06:23.557

这将给出“汤”复选框的值：

```
document.forms["Drinks"]["RadioDrink"][0].checked 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:06:47.247

您需要以不同的方式执行此操作。首先，您的 DOM 显示未定义的值。您可以向单选按钮添加不同的 ID。你可以像下面那样做

```
 <html>
<head>
<title>Test</title>

<script type="text/JavaScript">
<!--
function ValDrink()
{   
    if (document.getElementById("Rsoup").checked == true)
    {
    alert("its soup");
    return true; // soup
    }
    else
    {
    alert("its not soup");
    return false; // not soup
    }
}
//-->
</script>

</head>

<body>
<form method="post" id="Drinks" name="Drinks" onsubmit="return ValDrink()">
<input type="radio" checked name="RadioDrink" value="Tea">Tea<br>
<input type="radio" name="RadioDrink" value="Coffee">Coffee<br>
<input type="radio" name="RadioDrink" id="Rsoup" value="Soup">Soup<br>
<input type="checkbox" name="CheckMilk" value="Yes">Milk
<input type="checkbox" name="CheckSugar" value="Yes">Sugar
<br>
<input type="submit" name="OKButton" value="Vend">
</form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:06:56.500

问题在于：

```
document.forms.Drinks.RadioDrink 
```

返回对具有该名称的所有三个输入的类似数组的引用，它不返回对当前选定输入的引用。所以你不能只测试`value`属性。

实现您想要做的最简单的解释方法是为单选按钮提供唯一的 id：

```
<input type="radio" checked name="RadioDrink" id="RadioDrinkTea" value="Tea">Tea<br>
<input type="radio" name="RadioDrink" id="RadioDrinkCoffee" value="Coffee">Coffee<br>
<input type="radio" name="RadioDrink" id="RadioDrinkSoup" value="Soup">Soup<br> 
```

然后直接选择你要测试的那个：

```
if (document.getElementById("RadioDrinkSoup").checked) {
    alert("It's soup OK!");
    return true; // soup
} else {
    alert("OK");
    return false; // not soup
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:11:21.827

试试你的编码如下......它会帮助你......

```
<html>
<head>
<title>Test</title>

<script type="text/JavaScript">
<!--
function ValDrink() {
    var radios = document.getElementsByName('RadioDrink');
    var radioName;

    for (var i = 0, length = radios.length; i < length; i++) {
        if (radios[i].checked) {
            radioName = radios[i].value;
        }
    }
    if (radioName.toUpperCase() == "soup".toUpperCase())
    {
    alert("Its soup OK!");
    return true; // soup
    }
    else
    {
    alert("OK");
    return false; // not soup
    }
}
//-->
</script>

</head>

<body>
<form method="post" id="Drinks" name="Drinks" onsubmit="return ValDrink()">
<input type="radio" checked name="RadioDrink" value="Tea">Tea<br>
<input type="radio" name="RadioDrink" value="Coffee">Coffee<br>
<input type="radio" name="RadioDrink" value="Soup">Soup<br>
<input type="checkbox" name="CheckMilk" value="Yes">Milk
<input type="checkbox" name="CheckSugar" value="Yes">Sugar
<br>
<input type="submit" name="OKButton" value="Vend">
</form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T12:05:42.163

您应该检查无线电组中的每个值并改用它。就像是 ：

```
function getCheckedRadio(radio_group) {
    for (var i = 0; i < radio_group.length; i++) {
        var button = radio_group[i];
        if (button.checked) {
            return button;
        }
    }
    return undefined;
} 
```

调用它以获取选定的值。所以在你的情况下：

```
getCheckedRadio(document.forms.Drinks.RadioDrink); 
```

# python - 文本编辑的 Pyside 按键事件

> ID：14625245
> 
> 赞同：0
> 
> 时间：2013-01-31T11:58:53.630
> 
> 标签：python, pyside

我有 2`QTextEdit`个小部件，我需要将第一个到第二个中输入的任何内容放在按下回车键 ( `Return`) 上。...我无法实现它，请帮忙？

我知道我需要使用`KeyPressEvent`，但我不明白如何仅将其用于`QTextEdit`??

```
self.textEdit = QtGui.QTextEdit(self.widget)
self.textEdit.setMinimumSize(QtCore.QSize(201, 291))
self.textEdit.setMaximumSize(QtCore.QSize(201, 291))
self.textEdit.setObjectName("textEdit")
self.textEdit.setReadOnly(True)
self.verticalLayout.addWidget(self.textEdit)

self.textEdit_2 = QtGui.QTextEdit(self.widget)
self.textEdit_2.setMinimumSize(QtCore.QSize(201, 41))
self.textEdit_2.setMaximumSize(QtCore.QSize(201, 41))
self.textEdit_2.setObjectName("textEdit_2")
self.textEdit_2.setFocusPolicy(Qt.StrongFocus)
self.verticalLayout.addWidget(self.textEdit_2) 
```

任何帮助表示赞赏我被卡住了.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:08:52.560

使用`viewportEvent`（继承自`QAbstractScrollArea`）

```
 self.textEdit.viewportEvent.connect(self.copy_the_text)

    def copy_the_text(self, event):
        if isinstance(event, QtGui.QKeyEvent):  # as viewportEvent gets *all* events
            if event.key() == Qt.Key_Return or event.key() == Qt.Key_Enter:
                # copy the text from textEdit to textEdit_2 
```

你可以使用`Qt.Key_Enter`，但我想你可能想要`Qt.Key_Return`

### 编辑

如果您使用的是`PySide`没有新样式信号和插槽的旧版本，则需要使用

```
self.connect(self.textEdit, SIGNAL("viewportEvent(event)"), self.copy_the_text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:34:04.443

这是一个显示`QLineEdit`及其`returnPressed`信号的小示例。按回车后，文本中的文本`QLineEdit`将附加到`QTextEdit`：

```
import sys
from PySide import QtGui

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        self.output = QtGui.QTextEdit()
        self.output.setReadOnly(True)

        self.input = QtGui.QLineEdit()
        self.input.returnPressed.connect(self.addInput)
        self.input.setPlaceholderText('input here')

        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.output)
        layout.addWidget(self.input)

    def addInput(self):
        # skip empty text
        if self.input.text():
            self.output.append(self.input.text())
        # clear the QLineEdit for new input
        self.input.clear()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    w = Window()
    w.show()

    sys.exit(app.exec_()) 
```

# c# - 使用安装在 ASP.NET MVC 4 应用程序中的 Elmah 进行异常处理

> ID：14625246
> 
> 赞同：2
> 
> 时间：2013-01-31T11:58:55.753
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, error-handling, elmah

我已经建立了一个很好的 MVC4 应用程序，决定保护它，一切都很好。下面是我用来帮助防止 XSS 攻击的过滤器作为示例。

```
public class IsPostedFromThisSiteAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        //TODO: - Possible problems in future:
        //1\. Is there a way to handle the execptions and just display a friendly error page / message.

        if (filterContext.HttpContext != null)
        {
            if (filterContext.HttpContext.Request.UrlReferrer == null)
                throw new System.Web.HttpException("Invalid Submission");

            //if (filterContext.HttpContext.Request.UrlReferrer.Host != "localhost/YeatsClinical.PatientPortal.Web")
            if (filterContext.HttpContext.Request.UrlReferrer.AbsolutePath != ConfigurationManager.AppSettings["SiteURL"])
                throw new System.Web.HttpException("This form was not submitted from this site!");
        }
    }
} 
```

我的 MVC 应用程序安装了 Elmah，它也很好用。

问题是，我知道上面的错误，我不想显示异常消息，或者记录它或类似的东西（所有这些我都可以轻松完成）。相反，我想通过向我的用户显示一条漂亮的小消息来正确处理它。如何更改上面的代码以允许它显示带有漂亮小消息的视图或部分视图，或者只是在某处输出一些文本以让用户以一种不会导致应用程序崩溃的良好方式知道出了什么问题，也许在这种特殊情况下，将他返回到正确的登录屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:03:08.480

只需在 上分配`Result`属性`filterContext`：

```
public class IsPostedFromThisSiteAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        //TODO: - Possible problems in future:
        //1\. Is there a way to handle the execptions and just display a friendly error page / message.

        if (filterContext.HttpContext != null)
        {
            if (filterContext.HttpContext.Request.UrlReferrer == null)
            {
                var viewResult = new ViewResult
                {
                    ViewName = "~/Views/Shared/Invalid.cshtml"
                };
                filterContext.Result = viewResult;
                return;
            }

            if (filterContext.HttpContext.Request.UrlReferrer.AbsolutePath != ConfigurationManager.AppSettings["SiteURL"])
            {
                var viewResult = new ViewResult
                {
                    ViewName = "~/Views/Shared/InvalidSite.cshtml"
                };
                filterContext.Result = viewResult;
                return;
            }
        }
    }
} 
```

这将阻止执行控制器操作，并立即执行`ActionResult`您分配`Result`给`filterContext`. 基本上，您正在使操作的执行短路。您可以返回任何您想要的 ActionResult：ViewResult、PartialViewResult、JsonResult、RedirectToRouteResult、...

# delphi - 无法加载 CRDE2001.DLL

> ID：14625249
> 
> 赞同：1
> 
> 时间：2013-01-31T11:59:08.460
> 
> 标签：delphi

我有一个用 Delphi 2007 编写的小项目（一个表单）。几天前我完成了一个项目，今天我试图打开一个表单，但提交的不是设计视图中的表单，而是此消息：

创建表单时出错：无法加载 CRDE2001.DLL。确保它位于应用程序的搜索路径中。

我在一个文件夹中有这个 CRDE2001.DLL，它在项目选项 - > 目录/条件的搜索路径中被引用。我不知道出了什么问题，为什么我在设计视图中看不到表单。

请帮忙，贾尼

# java - 静态类或实例作为参数？

> ID：14625250
> 
> 赞同：0
> 
> 时间：2013-01-31T11:59:15.880
> 
> 标签：java

我只是想知道最好的解决方案是什么（类框架只能存在一次，它包含配置等）

让我们假设以下（静态）：

```
public class Framework {
    private Framework() {}

    private static String something;
    private static Object somethingElse;

    public static synchronized void init() {
        something = "something";
        somethingElse = new SuperFancyObject();
    }

    public static String getSomething() { return something; }
    public static Object getSomethingElse() { return somethingElse; }
} 
```

现在我可以通过调用在任何地方使用该类中的所有方法：

```
public void invoke(Request request, Response response) {
    ...
    Framework.getSomething();
    ...
} 
```

另一个解决方案是：

```
public class Framework {
    private static String something;
    private static Object somethingElse;

    public Framework() {
        something = "something";
        somethingElse = new SuperFancyObject();
    }

    public String getSomething() { return something; }
    public Object getSomethingElse() { return somethingElse; }
} 
```

所以现在，要使用它，我必须将对象/类作为参数传递：

```
public void invoke(Framework framework, Request request, Response response) {
    ...
    framework.getSomething();
    ...
} 
```

第三种解决方案可能是静态+单例。

我现在想知道的是，哪个是更好、更干净（也许是性感）的解决方案，或者你更喜欢哪个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:03:02.980

在许多情况下，单例比静态类更可取，因为基本上，单例是**可替换**的，因此更容易进行测试。

Martin Fowler 写了一些关于它的东西：

[http://martinfowler.com/bliki/StaticSubstitution.html](http://martinfowler.com/bliki/StaticSubstitution.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:07:26.593

你可以改变你的班级：

```
public class Framework {

    private String something;

    /** Singleton instance */
    private static Framework iSingleton = new Framework();     // SINGLETON

    protected Framework(){
          //init
     }

    public static String getSomething() {
         return iSingleton.something;
    }
} 
```

在您的调用方法中，我不需要框架实例。你可以这样称呼：

```
public void invoke(Framework framework, Request request, Response response) {

    Framework.getSomething();   //Call static method.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:03:53.183

选择更具可读性的内容。例如，如果您说`Framework`可以单独存在一次，那么您需要制作`Framework`一个 Singleton。这直接表达了您的程序/对象应该做什么。

不要考虑性感，要考虑交流。例如，如果我用 15 世纪的英语对你说话，你会非常生气。你不会被铲吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T12:07:46.943

如果它有状态，请确保不使用并且不能从静态访问。

# excel - VB6 - 无法完整读取 Excel 文件

> ID：14625251
> 
> 赞同：0
> 
> 时间：2013-01-31T11:59:18.477
> 
> 标签：excel, file, vb6, xls

无论我尝试什么方法（目前我正在使用 Scripting.FileSystemObject），我都无法正确读取此 XLS 文件。这是我的代码（我不想读取单元格，我想像读取文本文件一样读取文件）

```
Dim fso As New FileSystemObject
Dim f As File
Dim fsoStream As TextStream
Dim strLine As String
Set f = fso.GetFile("C:\Users\Admin\Desktop\ara\DOSYA.xls")

Set fsoStream = f.OpenAsTextStream(ForReading)

Do While Not fsoStream.AtEndOfStream
     strLine = fsoStream.ReadLine
     Text1.Text = Text1.Text & strLine
Loop

fsoStream.Close
Set fsoStream = Nothing
Set f = Nothing
Set fso = Nothing 
```

我得到的只是文件的前 5-6 个字符，然后是更多的乱码，仅此而已。如果我在 Excel 中打开它，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:43:47.633

您想要实现的目标（来自有问题的评论）不是问题 - 下面是我快速生成的一段代码，主要使用宏记录器中的部分：

```
Sub SearchString()

Dim LookupString As String
Dim WS As Worksheet
Dim SearchResult As Range
Dim MatchString As Boolean

Dim SourceFolder As String
Dim FileName As String

SourceFolder = "D:\DOCUMENTS\" 'Trailing "\" is required
LookupString = "abc"

FileName = Dir(SourceFolder & "*.xls?") 'Extension may be set using wildcards
Do While FileName <> ""

Application.DisplayAlerts = False
Application.Workbooks.Open (SourceFolder & FileName)
Application.DisplayAlerts = True

MatchString = False

For Each WS In Workbooks(FileName).Worksheets

    Set SearchResult = WS.Cells.Find(What:=LookupString, LookIn:=xlFormulas, LookAt:= _
        xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, _
        SearchFormat:=False)
    If Not SearchResult Is Nothing Then MatchString = True

Next WS

If MatchString = True Then MsgBox "File: " & Chr(34) & FileName & Chr(34) & vbNewLine & "has " & Chr(34) & LookupString & Chr(34) & " string."

Application.DisplayAlerts = False
Workbooks(FileName).Close SaveChanges:=False
Application.DisplayAlerts = True

FileName = Dir
Loop

End Sub 
```

这将遍历放入的所有类型的 Excel 文件，`SourceFolder`并在找到定义的字符串时显示一条消息。书中的纸张数量及其隐藏/可见状态无关紧要。

共享示例文件：[https ://www.dropbox.com/s/ipmztbz6vu7y4qf/FilesLookupString.xlsm](https://www.dropbox.com/s/ipmztbz6vu7y4qf/FilesLookupString.xlsm)

我很确定您也可以将其用于 DOC 文件：只需将宏记录器用于可能不同的部分，例如搜索。祝你好运！

如果您决定将 Excel 文件内容读取为“类似二进制”的内容（但我建议不要这样做），请查看`ADODB.Stream`对象。

# windows-installer - MSI：MSI 目录表的 DefaultDir 列中的 (.) 和 (.:.) 有什么区别

> ID：14625252
> 
> 赞同：2
> 
> 时间：2013-01-31T11:59:21.327
> 
> 标签：windows-installer

在 Windows 安装程序包 (.) 的 DefaultDir 列中，指示目录应位于其父目录中，不包含子目录。冒号 (:) 用于分隔目标和源目录名称。DefaultDir 列中的单个值（不带冒号：）表示目标名称和源目录名称相同。那么默认目录列中的 (.:.) 是什么意思？(.) 和 (.:.) 有什么区别？

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:39:25.697

Rob Mensching 多年前写了许多博客文章来解释这一切。谷歌“解密 MSI 目录表”。您的具体问题可以在以下位置回答：

[解密 MSI 目录表，第 5 部分（点、冒号和管道）](http://blogs.msdn.com/b/robmen/archive/2005/11/04/deciphering-the-msi-directory-table_2c00_-part-5-_2800_the-dot_2c00_-colon-and-pipe_2900_.aspx)

# ruby-on-rails - 带有正则表达式的 gsub 删除一个字符

> ID：14625260
> 
> 赞同：0
> 
> 时间：2013-01-31T11:59:47.503
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3, gsub

我有一个文章模型（article.rb）：

```
class Article < ActiveRecord::Base
  attr_accessible :name, :content
end 
```

`gsub`我的article.rb中有这样一个：

```
self.content.gsub!(/anylink[^']/i, "<%= link_to 'anylink', 'http://website.com/anylink' %>") 
```

`"anylink"`这会将文章文本中的单词替换`"link_to 'anylink', 'http://website.com/anylink'"`为创建自动链接。当已经有 a`"link_to..."`时，它不会替代，因为我`'`在正则表达式中排除了 after anylink。

它有效，但问题是它删除了`"anylink"`. 例如它转换：

```
"Have a look at anylink and see" 
```

至

```
"Have a look at anylinkand see" 
```

`"anylink"`在第二个短语中现在是一个超链接，所以一切都很好，除了在操作过程中删除的缺失空间`gsub`。任何想法为什么以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:12:01.770

[`String#gsub`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)用你的替换替换你的模式的整个匹配部分，这里是`anylink`字符串**和**一个不是撇号的字符。

因此它将替换以下字符串，例如：

*   `anylinkA`
*   `anylink.`
*   `anylink!`

如果你想保留你的角色，你可以创建一个匹配并将其放在替换之后：

```
self.content.gsub!(/anylink([^'])/i, "<%= link_to 'anylink', 'http://website.com/anylink' %>\\1") 
```

在这里，匹配组`([^'])`将匹配字符，而转义组将`\1`在替换后放置该字符。

但我建议您使用`\b`来匹配[单词边界](http://www.regular-expressions.info/wordboundaries.html)：

```
self.content.gsub!(/\banylink\b/i, "<%= link_to 'anylink', 'http://website.com/anylink' %>") 
```

因此，使用此解决方案，单词 anylink 将被替换为，`gsub`并且它可以在任何字符之前或之后，但不能是字母数字。

如果要替换 中的所有匹配`self.content`项，请添加`g`regexp 修饰符：

```
self.content.gsub!(/\banylink\b/ig, "<%= link_to 'anylink', 'http://website.com/anylink' %>") 
```

# assembly - 编译器代码生成——我们怎么知道它是高质量的？

> ID：14625263
> 
> 赞同：3
> 
> 时间：2013-01-31T12:00:00.017
> 
> 标签：assembly, compiler-optimization

现在很普遍的口头禅是：“C/C++ 编译器生成的代码比手写汇编更好。” 或“编译器生成的代码与手工编写的代码一样好，而且通常更好。”

但是我们怎么知道这是真的呢？是否有一些关于 HLL 编译器代码质量的有价值的研究？我想阅读一些关于这个主题的作品，不仅适用于 C/C++，也适用于其他语言。

谢谢

**编辑**：我不是要求讨论这个主题，也不是个人意见或想法。我在询问有关这些主题的研究的**参考资料。**这样的研究肯定**必须**包含一些可以验证的主题的实验或理论工作。

请，如果您没有此类信息，请不要回答此问题。我已经知道你对这个主题的所有想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:45:16.043

今天的 C/C++ 编译器比 15 年或更长时间前要好得多，因为它们现在可以消耗更多的内存和 CPU 周期（仅仅是因为我们现在有更多的可用），同时越来越积极地优化代码。

相比之下，程序员在过去 15 年中几乎没有在他们的头骨中长出第二个大脑，他们的优化能力现在可能与 15 甚至 25 年前大致相同。

与此同时，CPU 变得更加复杂，并且迎合各种缓存、预测机制、更大的寄存器集、推测性和并行执行、更长的管道、资源争用等也变得更加困难。当我们的软件和我们用它解决的问题永远不会停止在规模、数量和复杂性上的增长时，照顾所有的精神负担和规模不佳的事情。然后，新版本的 CPU 通常不仅需要学习新技巧，还需要忘记旧技巧。

此外，您编写汇编代码的效率也不是很高，尤其是当您需要编写大量代码时。并且更难维护和更改汇编代码。出于经济原因，当编译器可以快速完成相当好的工作、腾出时间进行测试并加快周转速度时，您可能并不总是可以选择花费大量金钱和工时来生成高质量的优化汇编代码。

如果你考虑到这一点，如果你在这个行业已经足够长的时间，那么你不需要特别研究来看到大规模优化编译器优于制作优化的汇编代码。

然后人们应该记住，汇编只能给你带来大致线性的性能提升，可能是编译器在困难情况下可以做的 3-5 倍，而选择更具可扩展性的算法可以给你带来更好的提升。因此，对于那些投资于可扩展算法和并行/分布式系统的人来说，投资于寻找或培训汇编程序员并为他们的稀有技能支付大量资金可能要谨慎得多。

说到稀有技能……随着人们越来越多地转向比 C、C++ 和汇编语言更不原始（或者我应该说更少低级？）的语言，你越来越不可能找到能够在这些低级语言中大放异彩的程序员并击败编译器。它们仍然存在，并且总会有一些，但你不应该大规模地指望它们，这几乎只剩下无法击败编译器的程序员。

你可以把这算作一项研究。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:18:36.870

您所质疑的口头禅实际上是由 Backus 等人自己在 Fortran 的描述中引入的。

*   [FORTRAN 自动编码系统 (1957)](http://archive.computerhistory.org/resources/text/Fortran/102663113.05.01.acc.pdf)

> [程序员] 估计手动编写这项工作可能需要三天时间，加上调试它的未知时间，因此执行速度不会显着提高。

从现代的角度来看，您的问题的问题不在于评估编译器生成的代码，而是评估人类生成的代码。您很少能为足够大的程序提供完全手写的汇编代码。

然而，在人类只需要编写有限数量的代码的情况下，这样的比较是可能的。考虑例如：

*   [人与机器：比较手写和编译器生成的应用程序级检查点](http://www.cs.cornell.edu/ezick/publications/ezick03comparing/paper.pdf)

其中只有一些代码是由人类和编译器生成的。或者

*   [富士通定点数字信号处理器优化编译器的开发](http://dent.cecs.uci.edu/~papers/compendium94-03/papers/1999/codes99/pdffiles/1_1.pdf)

为 DSP 生成代码的地方。而手写代码擅长数十或数百行C代码，而800行C代码的程序被认为是大的。

此外，还有一个[Sufficiently Smart Compiler](http://c2.com/cgi/wiki?SufficientlySmartCompiler)的已知问题。虽然理论上所有需要的算法都是众所周知的，但实际上，由于多种原因，编译器或编译器开发人员无法应用它们。这里分析这个问题的一个典型例子：

*   [向量化编译器的评估](http://polaris.cs.uiuc.edu/~garzaran/doc/pact11.pdf)

编译器做得非常糟糕的一个众所周知的例子是解释器循环的核心。

*   [LuaJIT 的作者解释了为什么编译器无法击败手工编码的汇编](http://article.gmane.org/gmane.comp.lang.lua.general/75426)

在某个时候，讨论已经进入下一阶段：自动生成的代码生成器生成的代码与手写代码生成器一样好。

*   [自动生成编译器的评估](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.49.5223&rep=rep1&type=pdf)
*   [使用声明性机器描述自动生成编译器的后端](http://www.eecs.tufts.edu/~dias/dissertation/dissertation.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:42:47.123

经过一番研究，我找到了两篇文章，描述了使用不同编译器和手写代码的实验。

从形式上讲，它们并不完全是“研究”，但至少可以被视为“实验”并包含一些实验数据：

[компиляторы и SSE, или веселые микробенчмарки](http://thedeemon.livejournal.com/49226.html) - 俄语。

[FASM 论坛上的一次讨论](http://board.flatassembler.net/topic.php?t=6386)- 英语。

[Kryss Kaspersky 的Assembler vs C](http://www.insidepro.com/kk/145/145r.shtml)文章，关于不同编译器的实验。- 俄语。

# c - c - 带有大小的数组参数有什么影响？

> ID：14625264
> 
> 赞同：2
> 
> 时间：2013-01-31T12:00:02.053
> 
> 标签：c

下面的`foo`函数找到给定数字的第一次出现并返回它的索引。如果未找到该数字，则返回数组（n）的大小：

```
‪int foo(int arr[10], int num, int n)‬
{
‫;‪   int *p‬‬
‪   for (p=arr;(*p!=num) && (p<arr+n);++p);‬‬
   ‫;‪return p-arr‬‬
} 
```

我的问题是：参数`int arr[10]`是否与写作相同`int * arr`或`int arr[]`就此而言？因为当我传递一个大小为 100 的 int 数组时，我可以遍历它并且我并没有限制为只有 10 个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:05:43.417

> 我的问题是：参数`int arr[10]`是否与写作相同`int *arr`或`int arr[]`就此而言？

是的，只要它是函数参数列表声明的一部分**并且**数组是一维的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:09:56.640

是的，`int arr[10]`,`int arr[]`和`int *arr`在函数参数列表中都意味着完全相同的东西。

在 C99 中，您有一个*新*选项：`int arr[static 10]`. 这意味着您必须向函数传递一个指向至少 10 个元素的地址（在未定义行为的惩罚下）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:03:57.077

为什么您希望您的代码被“封顶”？会发生什么？

C没有“安全”的数组索引，它只会索引你告诉它的地方。不超出界限由您决定。

在我看来，最好明确地传递大小，因为这使函数更通用，并且避免了数组/指针问题的混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:05:00.350

您可以迭代，但在您的记忆区域中，您不应该这样做的干净方法是，

```
int foo(int *arr, int num, int n)‬
{
    int i;
 ‪   for (i=0;arr[i]!=num && i<n; i++);‬‬
    ‫;‪return i‬‬
} 
```

此外，由于您执行 p=arr 然后使用 p，因此您定义 arr 的方式并不重要

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:34:54.677

如果你这样做 *arr ，你基本上是在传递一个指向数组第一个元素的指针。

由于指针的行为可以作为数组使用的补充，所以完全没有问题。

当您执行 arr[1] 之类的操作时，指向第一个元素的指针 arr 会自动递增 1 并指向数组中第二个元素的地址。

# java - java - 检查字符串是否包含除空格以外的任何字符

> ID：14625265
> 
> 赞同：1
> 
> 时间：2013-01-31T12:00:12.670
> 
> 标签：java, string

我需要检查一个字符串是否包含除空格以外的任何符号。我不能检查

```
 String.length() > 0 
```

或者

```
 String.equals("") 
```

因为空格被视为字符。如何确定 java 字符串是否包含其他字符（字母、符号、数字等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:01:55.640

只是字符串（记得在对其调用方法之前[`trim()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29)检查）：`null`

> 返回字符串的副本，省略前导和尾随空格。

```
 myString != null && !myString.trim().isEmpty(); 
```

或者，如果您使用的是 Apache Commons，则可以使用[StringUtils.isBlank()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29)。你可以检查它的[实现](http://commons.apache.org/lang/api-2.5/src-html/org/apache/commons/lang/StringUtils.html#line.227)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:04:40.767

您可以使用

```
String.trim().equals("") 
```

`trim()`如果 String 仅包含空格，则在检查相等性之前将它们全部删除

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T12:01:34.540

为什么不使用`String.trim()`并检查结果长度是否大于 0 ？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T12:01:41.093

使用正则表达式，`"[^ ]"`就可以了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-31T12:02:09.527

```
String test;
//populate test

if(test.trim().length() > 0)
{
//Bingo
}else{
//Uff
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-31T12:04:06.350

删除所有空格：

```
String s = ...;
s = s.replaceAll("\\s+", ""); 
```

然后检查长度：

```
if(s.length() > 0) 
```

或检查字符串是否为空：

```
if (s.isEmpty()) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-31T12:04:19.237

使用正则表达式：

`myString.matches("[^ ]+"); // all but spaces`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-31T12:47:19.387

使用谷歌番石榴：

```
CharMatcher.WHITESPACE.negate().matchesAnyOf(str) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-31T12:01:35.843

修剪你的字符串，然后检查它是否有空字符串。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-31T12:05:17.910

你可以尝试这样的事情，删除所有的空格字符，然后测量它的长度：

```
 string.replaceAll("\\s","")
                int length=string.length(); 
```

在这种情况下，如果长度大于零，它确实包含非空格字符。

希望这可以帮助 ：）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-31T12:27:44.803

您可以使用来自 apache commons 的 StringUtils： http: [//commons.apache.org/lang/api-3.1/index.html](http://commons.apache.org/lang/api-3.1/index.html)

# zeromq - 使用 TCP 作为传输时，ZeroMQ ROUTER 套接字是否保持顺序？

> ID：14625266
> 
> 赞同：2
> 
> 时间：2013-01-31T12:00:15.027
> 
> 标签：zeromq

我浏览了一些使用 ZeroMQ 的示例，并在服务器前端使用 ROUTER 套接字找到[了这个异步消息传递示例。](https://github.com/imatix/zguide/blob/master/examples/Java/asyncsrv.java)该文档指出，在传入请求时，此套接字类型将“公平排队”传入请求。但是，如果使用 TCP，该套接字是否会维护来自同一客户端的传入请求的顺序？例如，如果客户端 A 发送消息 M1 然后 M2，套接字将在 M1 之后转发 M2 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:07:45.050

是的，您可以假设客户端ØMQ发送消息的顺序将在另一端以相同的顺序接收。从概念上讲，您将 ØMQ 套接字视为消息队列。

[http://www.aosabook.org/en/zeromq.html#fig.zeromq.arch](http://www.aosabook.org/en/zeromq.html#fig.zeromq.arch)

# asp.net - ASP.NET MVC 4：使用 $.ajax() 启用 XmlHttpRequest 发布到控制器

> ID：14625268
> 
> 赞同：3
> 
> 时间：2013-01-31T12:00:21.123
> 
> 标签：asp.net, ajax, xmlhttprequest

似乎是一件简单的事情，但我花了一整天时间浏览整个网络上的帖子，几乎没有追索权！请帮忙。我有一个简单的请求要发布到 MVC 控制器...

```
 $(document).ready(function () {
    $('#json_request').on("click", function () {
        // send request to server for menu json data
        $.ajax({
            type: "POST", 
            url: location.protocol + "//" + location.host + "/Tablet/Menu",
            data: { restaurantId: $('#restaurantId option:selected').val(), mealSessionId: $('#mealSessionId option:selected').val() },
            success: function (menuData) {alert(menuData); },
            error: function () { alert("failed"); }
        });
    });
}); 
```

请求只是不会到达控制器！当我将请求作为 Html 表单发布时，该应用程序运行良好。它也适用于 Visual Studio 开发服务器。IIS 7.0 / ASP.NET / MVC 4 出现 404 错误。可能是 contentType: application/x-www-form-urlencoded 没有通过 http-protocol 过滤器。我必须专门设置这些吗？如何？谢谢你的帮助。我没有将请求作为 json 发送，所以我没有尝试 contentType: application/json。

控制器/动作：

```
[HttpPost]
    public ActionResult Menu(short restaurantId, short mealSessionId)
    {
        try
        {
            MenuInput menuInput = new MenuInput(restaurantId, mealSessionId);
            menuInput.LoadMenu();
            if (Request.IsAjaxRequest())
            {
                MemoryStream ms = new MemoryStream();
                menuInput.AsJson(ms);
                string jsonString = Encoding.UTF8.GetString(ms.ToArray());
                JsonResult result = Json(jsonString, "text/x-json");
                ms.Close();
                return result;
            }
            else
            {
                return View("MenuInformation", menuInput);
            }
        }
        catch (Exception ex)
        {
            System.Console.Write(ex.ToString());
            return View();
        }
    } 
```

# android - Android：替代 TCP 环回套接字连接以获得更好的性能

> ID：14625273
> 
> 赞同：0
> 
> 时间：2013-01-31T12:00:32.577
> 
> 标签：android, sockets, android-ndk, loopback, unix-socket

使用Android NDK（2.3及以上）开发网络库

> **场景**

1.  第三方应用程序（基于 TCP 套接字）与我们的本地库进行通信。
2.  我们的库处理这些数据，然后使用 TCP 套接字通信与服务器进行通信。通信是双向的。

我们设计并实现了第三方应用程序和我们的 IPC 库之间的套接字通信机制。our-library 正在利用第三方应用程序端口（默认值：6700）来建立服​​务器之间的连接。

因此，它是一种环回连接，通过它我们的库和第三方应用程序之间发生通信。

```
 int on = 1;
setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on));
bind(s, (struct sockaddr *) &sin, sizeof (sin)); 
```

> **问题领域**

***一切正常，但由于它，性能被降级。如果没有网络库，则通信非常快。为了验证问题出在环回 tcp 套接字上，我们删除了库的所有内部处理。该库仅充当应用程序的伪服务器（传递）。应用程序将数据发送到 localhost 和套接字，而库只是将其按原样转发到服务器。***

**> 查询**

那么有什么方法可以提高性能吗？

1）Android上的UNIX域套接字怎么样，它们可以在应用程序和我们的库之间使用吗？

2）Binders 可以用来在用户级应用程序和原生 Android 库之间进行通信吗？

3) 或者我们是否有类似于 IOCTL SIO_LOOPBACK_FASTPATH 的东西（TCP 环回快速路径由应用于发送和接收套接字的套接字 IOCTL SIO_LOOPBACK_FASTPATH 启用。）[传输控制协议 (TCP) 环回优化](http://technet.microsoft.com/en-us/library/hh997026.aspx)

提前谢谢了

# c# - 这是对静态属性的不好使用吗？

> ID：14625278
> 
> 赞同：3
> 
> 时间：2013-01-31T12:00:46.330
> 
> 标签：c#, design-patterns, dependency-injection, static-members

如果我有一个带有服务的类，我希望所有派生类都可以访问（比如安全对象或存储库），那么我可能会执行以下操作：

```
public abstract class A
{
    static ISecurity _security;
    public ISecurity Security { get { return _security; } }

    public static void SetSecurity(ISecurity security) { _security = security; }
}

public class Bootstrapper
{
    public Bootstrapper()
    {
        A.SetSecurity(new Security());
    }
} 
```

似乎最近我看到到处都在回避静态属性，这是绝对要避免的。对我来说，这似乎比在我创建的每个派生类的构造函数中添加一个 ISecurity 参数更干净。鉴于我最近阅读的所有内容，我想知道：

这是一个可接受的依赖注入应用程序，还是我违反了一些可能会在以后困扰我的主要设计原则？此时我没有进行单元测试，所以如果我这样做的话，我可能会突然意识到我的问题的答案。老实说，虽然我可能不会改变我的设计，但如果有其他重要原因我应该改变它，那么我很可能会。

**编辑**：我第一次编写该代码时犯了几个愚蠢的错误……现在已修复。只是想我会指出这一点，以防有人碰巧注意到:)

**编辑**：SWeko 提出了一个很好的观点，即所有派生类都必须使用相同的实现。在我使用这种设计的情况下，该服务始终是单例的，因此它有效地执行了已经存在的需求。当然，如果不是这样，这将是一个糟糕的设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:58:34.993

由于几个原因，这种设计可能存在问题。

您已经提到了单元测试，这非常重要。这种静态依赖会使测试变得更加困难。当假货必须是[空对象](https://en.wikipedia.org/wiki/Null_Object_pattern)`ISecurity`实现以外的任何东西时，您会发现自己必须在测试拆除时删除假货实现。在测试拆卸过程中将其删除可防止在您忘记删除该假对象时影响其他测试。测试拆解使您的测试更加复杂。没那么复杂，但是当许多测试都拆除代码时，这会增加，当一个测试忘记运行拆除时，您将很难在测试套件中找到错误。您还必须确保已注册`ISecurity`fake 对象是线程安全的，不会影响其他可能并行运行的测试（测试框架，如 MSTest 出于明显的性能原因并行运行测试）。

将依赖项作为静态注入的另一个可能的问题是，您强制此`ISecurity`依赖项成为单例（并且可能是线程安全的）。例如，这不允许应用与单例具有不同生活方式的任何拦截器和[装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)

另一个问题是，从构造函数中删除此依赖项会禁用任何可以由 DI 框架代表您完成的分析或诊断。由于您手动设置了此依赖项，因此框架不知道此依赖项。从某种意义上说，您将管理依赖关系的责任移回应用程序逻辑，而不是让[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)控制依赖关系连接在一起的方式。现在应用程序必须知道这`ISecurity`实际上是线程安全的。这是通常属于组合根的责任。

您希望将此依赖项存储在基本类型中的事实甚至可能表明违反了一般设计原则：[单一责任原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)(SRP)。它与我过去犯的设计错误有些相似。我有一组全部继承自基类的业务操作。这个基类实现了各种行为，例如事务管理、日志记录、审计跟踪、添加容错以及....添加安全检查。这个基类变成了一个无法管理的[神物](https://en.wikipedia.org/wiki/God_object)。它难以管理，只是因为它有太多的责任；它违反了 SRP。如果你想了解更多，[这是我的故事。](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)

因此，与其在基类中实现这种安全问题（它可能是一个横切问题），不如尝试将基类全部移除并使用装饰器为这些类添加安全性。您可以用一个或多个装饰器包装每个类，每个装饰器可以处理一个特定的问题。这使得每个装饰器类都易于遵循，因为它们将遵循 SRP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:22:20.903

问题是这并不是真正的依赖注入，即使它被封装在类的定义中。诚然，

```
static Security _security; 
```

会比 更糟糕`Security`，但仍然`A`无法使用调用者传递给它们的任何安全性，它们需要*依赖*于静态属性的全局设置。

我想说的是，您的用法与以下内容没有什么不同：

```
public static class Globals
{
   public static ISecurity Security {get; set;}
} 
```

# javascript - 在 if 语句中使用“this”

> ID：14625284
> 
> 赞同：1
> 
> 时间：2013-01-31T12:00:53.990
> 
> 标签：javascript, jquery, if-statement, this

我有一个 if 语句不能正常工作，我相信这是因为使用了“this”，但我不知道如何解决它。这是代码：

```
$('.enlarge').click(function() {
    var id = $(this).find(".enlarged_txt").attr('id');
    $('#full_image').animate({
        height: "100%"
    }, 300, function() {

    if ( $(this).hasClass("v") ) {   
        $('#full_image img').attr('src','http://www.klossal.com/klossviolins/instruments/violins/full/' + id + '.jpg');
        fadeIn($('#full_image img'));
        $("#close_2").css({
            display: "block"
        });
        $("#close").css({
            display: "block"
        });            
    }

    });
});

        <div class="enlarge v" style="float:right;margin-right:70px;margin-top:5px;">
            <img class="enlarged_unselected" style="float:left;margin-top:6px;" src="http://www.klossal.com/klossviolins/elements/fullscreen_unselected.png"/>
            <img class="enlarged_selected" style="float:left;display:none;" src="http://www.klossal.com/klossviolins/elements/fullscreen_selected.png"/>
            <div id="ChasHunnicutt_1928" style="float:left;padding-left:8px;" class="enlarged_txt">Enlarge Image</div>
        </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:05:50.373

是的，这里面有问题`this`。因为第二次使用`this`你在调用里面的一个新函数中使用它`animate(`。这次您使用`this`引用`this`（[根据this jQuery doc](http://api.jquery.com/animate/)）“正在动画的DOM 元素”。

如果要引用`this`. `click(`处理程序到您的顶级函数（它引用被单击的 DOM 元素），您需要先保存它，然后用`this`保存的对原始`this`. **关键词很有趣。**

像这样：

```
$('.enlarge').click(function() {
    var jthis = this; // save the reference to the $('.enlarge') that was clicked
    var id = $(this).find(".enlarged_txt").attr('id');
    $('#full_image').animate({
        height: "100%"
    }, 300, function() {

    if ( $(jthis).hasClass("v") ) {   
        $('#full_image img').attr('src','http://www.klossal.com/klossviolins/instruments/violins/full/' + id + '.jpg');
        fadeIn($('#full_image img'));
        $("#close_2").css({
            display: "block"
        });
        $("#close").css({
            display: "block"
        });            
    }
    });
}); 
```

哪个应该解决问题`this`。

# android - Uncaught typeError cannot call method 'remove children' of undefined 和 Uncaught typeError cannot read property 'children' of undefined

> ID：14625285
> 
> 赞同：0
> 
> 时间：2013-01-31T12:00:54.470
> 
> 标签：android, html, cordova, html5-canvas, kineticjs

我正在使用 kineticjs 和 html5 在 android phonegap 应用程序中做项目我得到 3 个错误不知道确切的问题是什么

1.  未捕获的 typeError 无法在 file:///android_assest/www/index.html 处调用未定义的方法“删除子项”
2.  未捕获的 typeError 无法读取文件中未定义的属性“孩子”：///android_assest/www/index.html
3.  未捕获的 referenceError 动力学未在 file:///android_assest/www/index.html 中定义

我用谷歌搜索，但找不到答案，所以任何帮助都会非常有用

```
function clearCanvas() {
        layer.removeChildren();
        layer.draw();
        haveBackground = false;
    }

       function downloadCanvas() {
        var canvas = stage.children[0].canvas;
        var oImgPNG = Canvas2Image.saveAsPNG(canvas, true);
        document.body.appendChild(oImgPNG);
    }

<img alt="" src="res/drawable-hdpi/design15.png"  id="gabby"  onClick="addClickedImage('gabby ')"/><br /> 
```

在我收到错误的那些片段上方。提前谢谢这是我的程序的脚本

```
<script type="text/javascript" src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js"></script>
<script type="text/javascript" src="assets/www/base64.js"></script>
<script type="text/javascript" src="assets/www/canvas2image.js"></script>
<script type="text/javascript">
    debugger;
    var stage;
    var layer;
    var selected;
    var wasSelected;
    var haveBackground; // first dragged image sets stage size
    /*
    * Set up canvas stage and layer
    */
    function initCanvas(id) {
        stage = new Kinetic.Stage({
            container: id,
            width: 150,
            height: 50
        });
        layer = new Kinetic.Layer();
        stage.add(layer);
        stage.draw();
    }

    /*
    * Clear canvas, start again
    */
    function clearCanvas() {
        layer.removeChildren();
        layer.draw();
        haveBackground = false;
    }

    /*
    * Download canvas
    */
    function downloadCanvas() {
        var canvas = stage.children[0].canvas;
        var oImgPNG = Canvas2Image.saveAsPNG(canvas, true);
        document.body.appendChild(oImgPNG);
    }

    /*
    * Upload File
    */
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
       .attr('src', e.target.result)
       .width(20)
       .height(20);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
    /*
    * Resize
    */
    function resize(group, activeAnchor) {
        var tl = group.get(".tl")[0];
        var tr = group.get(".tr")[0]; group
        var br = group.get(".br")[0];
        var bl = group.get(".bl")[0];
        var handle = group.get(".handle")[0];
        var ghost = group.get(".ghost")[0];
        var flip = group.get(".flip")[0];
        var image = group.get(".image")[0];

        switch (activeAnchor.attrs.name) {
            case "tl":
                bl.setPosition(tl.attrs.x, br.attrs.y);
                tr.setPosition(br.attrs.x, tl.attrs.y);
                break;
            case "tr":
                br.setPosition(tr.attrs.x, bl.attrs.y);
                tl.setPosition(bl.attrs.x, tr.attrs.y);
                break;
            case "bl":
                br.setPosition(tr.attrs.x, bl.attrs.y);
                tl.setPosition(bl.attrs.x, tr.attrs.y);
                break;
            case "br":
                bl.setPosition(tl.attrs.x, br.attrs.y);
                tr.setPosition(br.attrs.x, tl.attrs.y);
                break;
        }

        handle.setPosition((tr.attrs.x + tl.attrs.x) / 2, tl.attrs.y - 20);
        ghost.setPosition(handle.getPosition());
        flip.setPosition((tr.attrs.x + tl.attrs.x) / 2, bl.attrs.y + 20);

        image.setPosition(tl.attrs.x, tl.attrs.y);
        image.attrs.width = tr.attrs.x - tl.attrs.x;
        image.attrs.height = bl.attrs.y - tl.attrs.y;
    }

    /*
    * Rotate
    */
    function rotate(group) {
        var c = group.getAbsolutePosition();
        var p0 = { x: c.x, y: c.y - 50 };
        var p1 = stage.getUserPosition();

        var p0c = Math.sqrt(Math.pow(c.x - p0.x, 2) + Math.pow(c.y - p0.y, 2)); // p0->c (b)   
        var p1c = Math.sqrt(Math.pow(c.x - p1.x, 2) + Math.pow(c.y - p1.y, 2)); // p1->c (a)
        var p0p1 = Math.sqrt(Math.pow(p1.x - p0.x, 2) + Math.pow(p1.y - p0.y, 2)); // p0->p1 (c)

        var deg = Math.acos((p1c * p1c + p0c * p0c - p0p1 * p0p1) / (2 * p1c * p0c));

        // fix for negative rotation
        if (p1.x < c.x) {
            deg = (360 * (Math.PI / 180)) - deg;
        }
        group.setRotation(deg);
    }

    /*
    * Flip
    */
    function flip(group) {
        group.attrs.scale.x = group.attrs.scale.x * -1;
    }

    /*
    * Fix center offset (due to resizing from a corner)
    */
    function fixCenterOffset(group) {
        var image = group.get(".image")[0]
        var currentOffset = group.getCenterOffset();
        var currentPosition = group.getPosition();
        var newOffset = { x: image.attrs.width / 2, y: image.attrs.height / 2 };
        var newPosition = {
            x: currentPosition.x - (currentOffset.x - newOffset.x),
            y: currentPosition.y - (currentOffset.y - newOffset.y)
        }

        group.setCenterOffset(newOffset);
        group.setPosition(newPosition);
        layer.draw();
    }

    /*
    * Prepare background image
    */
    function prepareBackground(img) {
        var maxWidth = 200;
        var maxHeight = 100;
        if (img.width > maxWidth) {
            img.height = (maxWidth / img.width) * img.height;
            img.width = maxWidth;
        }
        if (img.height > maxHeight) {
            img.width = (maxHeight / img.height) * img.width;
            img.height = maxHeight;
        }
        return img;
    }

    /*
    * Add an image plus anchors to the canvas using group
    */
    function initImage(img, type) {

        if (type == "background") {
            var kimggroup = initBackgroundImage(img);
        } else {
            var kimggroup = initNormalImage(img);
        }

        layer.add(kimggroup);
        stage.add(layer);

        // Draw the img
        stage.draw();
    }

    /*
    * Add background image
    */
    function initBackgroundImage(img) {

        var img = prepareBackground(img);
        stage.setSize(img.width, img.height);

        var kimggroup = new Kinetic.Group({
            x: 0,
            y: 0,
            draggable: false
        });

        // Make the img and add it to the group
        var kimg = new Kinetic.Image({
            x: 0,
            y: 0,
            image: img,
            width: img.width,
            height: img.height,
            name: "image"
        });
        kimggroup.add(kimg);

        return kimggroup;

    }

    /*
    * Add normal image
    */
    function initNormalImage(img) {

        var kimggroup = new Kinetic.Group({
            x: stage.attrs.width / 2,
            y: stage.attrs.height / 2,
            draggable: true,
            centerOffset: [img.width / 2, img.height / 2]
        });

        // Make the img and add it to the group
        var kimg = new Kinetic.Image({
            x: 0,
            y: 0,
            image: img,
            width: img.width,
            height: img.height,
            name: "image"
        });
        kimggroup.add(kimg);

        // Add anchors for resizing and rotation
        addAnchor(kimggroup, 0, 0, "tl");
        addAnchor(kimggroup, img.width, 0, "tr");
        addAnchor(kimggroup, img.width, img.height, "br");
        addAnchor(kimggroup, 0, img.height, "bl");
        addAnchor(kimggroup, img.width / 2, -20, "handle");
        addAnchor(kimggroup, img.width / 2, -20, "ghost");
        addAnchor(kimggroup, img.width / 2, img.height + 20, "flip");

        // On click make the image selected
        kimggroup.on("mousedown", function () {
            wasSelected = selected;
            selected = this;
            updateSelected();
            this.moveToTop();
            stage.draw();
        });

        kimg.on("mouseover", function () {
            document.body.style.cursor = "move";
        });

        kimg.on("mouseout", function () {
            document.body.style.cursor = "default";
        });

        // Double click to remove
        kimg.on("dblclick dbltap", function () {
            layer.remove(kimggroup);
            layer.draw();
        });

        return kimggroup;
    }

    /*
    * Create anchor and add to group
    */
    function addAnchor(group, x, y, name) {
        var config = {
            x: x,
            y: y,
            stroke: "#666",
            fill: "#ddd",
            strokeWidth: 2,
            radius: 4,
            name: name,
            draggable: true
        }
        switch (name) {
            case "handle":
                config.draggable = false;
                var anchor = addRotateAnchor(group, config);
                break;
            case "ghost":
                config.stroke = "#666";
                var anchor = addRotateGhostAnchor(group, config);
                break;
            case "flip":
                config.stroke = "#666";
                config.draggable = false;
                var anchor = addFlipAnchor(group, config);
                break;
            default:
                var anchor = addResizeAnchor(group, config);
                break;
        }
        anchor.hide();
        group.add(anchor);
    }

    /*
    * Set up resize anchor
    */
    function addResizeAnchor(group, config) {
        var anchor = new Kinetic.Circle(config);

        anchor.on("dragmove", function () {
            resize(group, this);
            layer.draw();
        });
        anchor.on("mousedown touchstart", function () {
            group.draggable(false);
            this.moveToTop();
        });
        anchor.on("dragend", function () {
            fixCenterOffset(group);
            group.draggable(true);
            layer.draw();
        });

        anchor.on("mouseover", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "pointer";
            this.setStrokeWidth(3);
            layer.draw();
        });
        anchor.on("mouseout", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "default";
            this.setStrokeWidth(2);
            layer.draw();
        });
        return anchor;
    }

    /*
    * Set up rotation anchor
    */
    function addRotateAnchor(group, config) {
        var anchor = new Kinetic.Circle(config);

        anchor.on("mouseover", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "pointer";
            this.setStrokeWidth(3);
            layer.draw();
        });
        anchor.on("mouseout", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "default";
            this.setStrokeWidth(2);
            layer.draw();
        });
        return anchor;
    }

    /*
    * Set up rotation ghost anchor
    */
    function addRotateGhostAnchor(group, config) {
        var anchor = new Kinetic.Circle(config);

        anchor.on("dragmove", function () {
            rotate(group);
            layer.draw();
        });
        anchor.on("mousedown touchstart", function () {
            group.draggable(false);
            this.moveToTop();
        });
        anchor.on("dragend", function () {
            var handle = group.get(".handle")[0];
            this.setPosition(handle.getPosition());
            group.draggable(true);
            layer.draw();
        });

        anchor.on("mouseover", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "pointer";
            this.setStrokeWidth(3);
            layer.draw();
        });
        anchor.on("mouseout", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "default";
            this.setStrokeWidth(2);
            layer.draw();
        });
        return anchor;
    }

    /*
    * Set up flip anchor
    */
    function addFlipAnchor(group, config) {
        var anchor = new Kinetic.Circle(config);

        anchor.on("mousedown touchstart", function () {
            flip(group);
            layer.draw();
        });

        anchor.on("mouseover", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "pointer";
            this.setStrokeWidth(3);
            layer.draw();
        });
        anchor.on("mouseout", function () {
            var layer = this.getLayer();
            document.body.style.cursor = "default";
            this.setStrokeWidth(2);
            layer.draw();
        });
        return anchor;
    }

    /*
    * Show anchors only when group selected
    */
    function updateSelected() {
        // Deselect the old img if there was any
        if (wasSelected) {
            wasSelected.get(".tl")[0].hide();
            wasSelected.get(".tr")[0].hide();
            wasSelected.get(".br")[0].hide();
            wasSelected.get(".bl")[0].hide();
            wasSelected.get(".handle")[0].hide();
            wasSelected.get(".ghost")[0].hide();
            wasSelected.get(".flip")[0].hide();
        }

        // Select the new image
        selected.get(".tl")[0].show();
        selected.get(".tr")[0].show();
        selected.get(".br")[0].show();
        selected.get(".bl")[0].show();
        selected.get(".handle")[0].show();
        selected.get(".ghost")[0].show();
        selected.get(".flip")[0].show();

    }

    /*
    * Add clicked images to the canvas
    */
    function addClickedImage(name) {
        var img = document.getElementById(name);
        initImage(img, "normal");
    }

    /*
    * Listen for images dragged into canvas and add them
    */
    function setupDragAndDrop() {
        stage.content.addEventListener("dragover", function (evt) {
            evt.preventDefault();
        }, false);

        // Handle dropped image file - only Firefox and Google Chrome
        stage.content.addEventListener("drop", function (evt) {
            dragImg = new Image();
            var files = evt.dataTransfer.files;
            if (files.length > 0) {
                var file = files[0];
                if (typeof FileReader !== "undefined" && file.type.indexOf("image") != -1) {
                    var reader = new FileReader();
                    reader.onload = function (evt) {
                        dragImg.src = evt.target.result;
                    };
                    reader.readAsDataURL(file);
                    dragImg.onload = function () {
                        if (!haveBackground) {
                            haveBackground = true;
                            var type = "background";
                        } else {
                            var type = "normal";
                        }
                        initImage(this, type);
                    }
                }
            }
            evt.preventDefault();
        }, false);
    }

    window.onload = function () {
        initCanvas("container");
        setupDragAndDrop();
    };

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:07:40.890

这是范围问题。

您的变量层无法从函数 clearCanvas() 访问。不理想，但它首先定义变量，然后像下面这样使用它；

```
<script>
var layer;
$( function() {
  layer = new Kinetic.Layer();
  .....
});
</script> 
```

所以这同样适用于你的变量“阶段”

---在您发表评论后编辑---

```
<script>
var layer, script, stage;
function initCanvas(id) { 
  stage = new Kinetic.Stage({ container: id, width: 150, height: 50 }); 
  layer = new Kinetic.Layer(); 
  stage.add(layer); 
  stage.draw(); 
} 
</script> 
```

如果你在函数内部定义了'stage = something'，它就像'var stage=something'一样工作。因此，如果您想在函数之外访问阶段和层，则在函数之外定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:49:25.990

更多细节：

由于您无法“删除未定义的子项”，因此您的图层未在某处定义（或被删除或覆盖）。

确保你有这个：

```
 var layer = new Kinetic.Layer(); 
```

无法访问儿童对您的舞台来说意味着相同。但简单地说，因为“动力学”没有在某个地方定义，你要么没有在你的源代码中包含 Kinetic.4.3.0.1.JS，要么你声明它不正确。

确保您在某处引用了 kinetic.js 文件，例如在 或 标签中：

```
 <script src='http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js'></script> 
```

或链接到项目中的硬拷贝

```
 <script src='../kinetic-v4.3.1.js'></script> // in this example it is located one directory up, but you could put it anywhere really. 
```

# php - PHP正则表达式删除点之间的所有空格

> ID：14625286
> 
> 赞同：-5
> 
> 时间：2013-01-31T12:01:02.373
> 
> 标签：php, regex, preg-replace

我有很长的字符串：

> $string = "这是字符串，当我需要删除点之间的所有空格时。我尝试了一些示例，但没有成功。"

我试图删除点之间的所有空格，但没有成功。

有人可以使用 php preg_replace 帮助我找到正确的解决方案吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:07:08.747

这将删除每个点之前的所有空格。

```
preg_replace('/\s+\./', '.', $string); 
```

`\s+\.`将查找一个或多个空白字符（空格、制表符、换行符...），后跟一个点。下一个参数指定将匹配的字符串替换为点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:26:59.207

I would suggest you to learn regrx rather be dependent on a single line answer. I found a [Great and Easy Tutorial](http://weblogtoolscollection.com/regex/regex.php) online which would make regrx very easy for you. So that from next time you could create your own regular expressions rather being dependent on answers

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:14:40.500

如果您需要删除任一侧或两侧的空格，您可以试试这个。

```
preg_replace("/\s*\.\s*/", ".", $string); 
```

# backbone.js - 在主干视图的数据表行中附加事件

> ID：14625288
> 
> 赞同：2
> 
> 时间：2013-01-31T12:01:05.677
> 
> 标签：backbone.js, datatable

我有这样的主干视图：

```
var newrow=Backbone.View.extend({

        el:"<table>",
        events:{
            'click .edit':'editrow',
            'click .delete':'deleterow'
            },

            render: function()
            {
                data=this.model.toJSON();
                $('table').dataTable().fnAddData([data.name,data.email,data.contact_number,'<span class="edit">Edit</span><span class="delete">Delete</span>']);
                return this;
            },

            editrow:function(){
                alert ("edit);
            },

            deleterow:function(){
            alert("delete");
            }
        }) 
```

我需要附加点击事件与 td 具有跨度与类“编辑”。我知道这不起作用，因为我正在使用数据表函数动态添加行。我正在尝试在预渲染的数据表中添加行。可能是什么解决方案。

PS 我已经在其他视图中渲染了一个空表。这可以正常工作，并且数据表会添加行。但无法弄清楚如何在元素中添加点击事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:45:21.213

在你看来，几乎没有什么事情是不对的。如果你解决了这些问题，它可能会起作用。

*   而不是`el:"<table>"`尝试`tagName:"table"`。这是为视图设置新元素的[正确方法。](http://backbonejs.org/#View-extend)

*   而不是`$('table').dataTable()`. 试试`this.$el.dataTable()`。前者对页面中的所有表格元素执行选择，后者引用视图的 ( `<table>`) 元素。

只要您添加的元素在视图`el`中，事件就应该自动连接起来。如果由于某种原因它不起作用，请`this.delegateEvents()`在插入新行后尝试调用。

# xpages - Xpage 选项卡式面板问题

> ID：14625292
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:01:32.237
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

实际上，我在名为（tabs）的面板中使用选项卡式面板。单击该菜单链接设置 viewScope 变量时有菜单。它将传递给“**默认情况下打开选项卡**”，我正在使用这样的代码 if(viewscope.varaiablename>" ") 返回 viewscope.varaiablename 否则默认选项卡

我正在打印传递的值，它显示四次打印相同的值

请解释一下它是如何工作的！[在此处输入图片描述][1]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:19:04.480

你需要使用：

```
if (viewscope.variablename != "") 
```

你的意思是还要附上图片吗？

# python - TCP 打孔使用 Java 套接字而不是 Python

> ID：14625299
> 
> 赞同：2
> 
> 时间：2013-01-31T12:01:45.573
> 
> 标签：python, sockets, tcp, network-programming, hole-punching

[我在这里](http://pdos.csail.mit.edu/papers/p2pnat.pdf)阅读了有关 TCP 打孔的论文。

为了做到这一点，必须绑定用于与远程主机建立 TCP 连接的套接字以及本地主机用来侦听与同一端口的连接的套接字。我已经能够在 Java 中执行此操作，但即使在给定套接字设置了 SO_REUSEADDR 标志时，也无法在 Python 中执行此操作。有人可以向我解释为什么吗？是因为 Python 本身就是单线程的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:01:24.007

据我测试/研究，TCP 打孔并不是一种适用于所有情况的可行技术。首先，NAT 不能很好地支持 TCP 打孔，并且它们的行为是不可预测的。

在简历中，它依赖于发送 TCP SYN 数据包并接收 TCP SYN 数据包（在正常对话中，您将使用 SYN+ACK 进行响应），以便 NAT 在两台主机之间打开连接。一些 NAT 可能会打开此连接，而另一些则不会。我知道完成**NAT Traversal**的最佳方法是使用 UDP。由于 UDP 不是面向连接的，因此您可以开始发送数据包并接收数据包，因此 NAT 会认为一个数据包是另一个数据包的回复。

请参见 [UDP 打孔](http://en.wikipedia.org/wiki/UDP_hole_punching)

此外，为了使 UDP 与 TCP 一样可靠，您可以使用 TCP over UDP 的实现。

见[UDT](http://udt.sourceforge.net/)

很抱歉我没有回答你的问题，但是为什么在 Java 中有效，为什么在 Python 中没有，很难知道，它与虚拟机实现和系统调用甚至你正在使用的 NAT 有关。

# canvas - 使用 Canvas 中的 arc() 方法产生的多余线条

> ID：14625301
> 
> 赞同：2
> 
> 时间：2013-01-31T12:01:46.477
> 
> 标签：canvas, html5-canvas

```
<html>
<head>
<script>
  function draw() {
    var canvas = document.getElementById('draw');
    if (canvas.getContext) {
      var ctx = canvas.getContext('2d');
      var ang=prompt("Degree?")
      var sin=Math.sin(ang * Math.PI/180);var cos=Math.cos(ang * Math.PI/180);var tan=Math.tan(ang * Math.PI/180);
      if (ang == 45) {tan = 1}
      ctx.beginPath()
      ctx.font = "18px Calibri";
      ctx.fillStyle = "Black";
      ctx.fillText("k", 5, 150);
      ctx.moveTo(20,20)
      ctx.lineTo(20,220)
      ctx.lineTo(20+(200*tan),220);
      ctx.closePath()
      ctx.stroke() 
      ctx.beginPath()
      ctx.moveTo(20,210)
      if (ang <= 20){
      ctx.lineTo(20+(30*tan),210)
      ctx.lineTo(20+(30*tan),220)}
      else if(ang <= 45){
      ctx.lineTo(20+(10*tan),210)
      ctx.lineTo(20+(10*tan),220)}
      else {ctx.lineTo(30,210)
      ctx.lineTo(30,220)}
      ctx.arc(20,20,30,Math.PI/2,Math.PI/2-(ang*Math.PI/180),true)
      ctx.stroke() 
      ctx.fillText(tan+"k", 47, 240);
      if (ang <= 20) {ctx.fillText(Math.sqrt(tan*tan+1)+"k",30, Math.sqrt(tan*tan+1)/2+60);}
      else if (ang <= 55) {ctx.fillText(Math.sqrt(tan*tan+1)+"k",100, Math.sqrt(tan*tan+1)/2+60)}
      else if (ang <= 77) {ctx.fillText(Math.sqrt(tan*tan+1)+"k",150, Math.sqrt(tan*tan+1)/2+40)}
      else {ctx.fillText(Math.sqrt(tan*tan+1)+"k",100, Math.sqrt(tan*tan+1)/2+20)}
      ctx.font = "14px Calibri";
  ctx.fillText(ang+"\u00B0", 10, 10);
  ctx.font = "25px Calibri";
  ctx.fillText("sin"+ang+"\u00B0 : "+sin, 20, 280);
  ctx.fillText("cos"+ang+"\u00B0 : "+cos, 20, 310);
  ctx.fillText("tan"+ang+"\u00B0 : "+tan, 20, 340);
  ctx.fillText("cosec"+ang+"\u00B0 : "+1/sin, 20, 370);
  ctx.fillText("sec"+ang+"\u00B0 : "+1/cos, 20, 400);
  ctx.fillText("cot"+ang+"\u00B0 : "+1/tan, 20, 430);
    } else {
      document.write("Hey idiot, whhich iidiot brrowserr you are using? No IE clan here!");
    }
  }
</script> 
</head>
<body onload="draw();"> 
<canvas id="draw" width="600" height="600"></canvas>
</body></html> 
```

1）为什么会出现一条额外的线[靠近k线，不直线，端点靠近角度]？我很确定这是由于`arc()`我用来显示角度的方法？如何以最简单的方式消除它？

2）首先，任何人都可以确认正在制作的三角形是正确的。其次，我遇到了一些问题，比如显示 0.999999 的 45 度……而不是 1。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:08:04.357

1.  要修复额外的行，请添加：

    ```
    ctx.moveTo(20,50); 
    ```

    前：

    ```
    ctx.arc(20,20,30,Math.PI/2,Math.PI/2-(ang*Math.PI/180),true); 
    ```

    **[工作示例](http://jsbin.com/ihudob/10/edit)**
    （您正在从“直角”符号的末端画一条线到弧的起点）

2.  三角形似乎构造正确，45 度角返回一个与宽度一样高的三角形，就像它应该的那样。我没有看到`0.9999999`你提到的。

# android - 主屏幕组件名称

> ID：14625305
> 
> 赞同：2
> 
> 时间：2013-01-31T12:01:56.073
> 
> 标签：android

我正在开发简单的主屏幕应用程序。因此，当我按下主页按钮时，我可以在本机和我的主屏幕应用程序之间进行选择。问题是：如果我在重新启动手机时将我的应用程序设置为默认主屏幕应用程序，我将无法进入本机主屏幕应用程序，因为它从未启动，因此我的应用程序位于堆栈顶部。如果我的手机是默认主屏幕应用程序，我如何在重启手机时进入本机主屏幕应用程序？我有想法：在启动时，我可以检查调用意图 - 如果它包含 Home 类别，我将调用本机主屏幕应用程序。像这样的东西：

```
 Intent creatingIntent = getIntent();
 if (creatingIntent.hasCategory(Intent.CATEGORY_HOME))
 {
     creatingIntent.setPackage("com.android.launcher");
     creatingIntent.setComponent(new ComponentName
     ("com.android.launcher",
     "com.android.launcher2.Launcher"));
     startActivity(creatingIntent);
     finish();
 } 
```

但问题是我不知道如何获取本机主屏幕应用程序的组件名称，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:14:59.403

一个家庭应用程序（=launcher）的目标是取代原生启动器，强迫2个启动器共存很奇怪。但是如果你成功地做这样的事情，当你按下主页按钮时，它也会启动 Native 启动器。

要回答您的问题，本机启动器取决于目标设备。示例：三星不使用与谷歌相同的启动器，因此组件名称会有所不同。

您是否尝试过在启动时启动您的应用程序的广播接收器？有了它，您不必将您的应用程序作为默认家庭应用程序，因此您可以在按下 Home 按钮时保留选择。但是，如果用户选择您的应用作为默认应用，这不是解决方案。

也许你可以看看这里[如何在Android中使用自定义屏幕而不是默认开始屏幕？](https://stackoverflow.com/q/14473471/1720391)

# delphi - 有没有办法通过 AggPas 在 FreePascal 或 Delphi 中呈现 PDF？

> ID：14625310
> 
> 赞同：0
> 
> 时间：2013-01-31T12:02:03.913
> 
> 标签：delphi, pdf, freepascal

有没有办法使用 AggPass 渲染现有的 PDF 文件？

例如，我有一个 PDF 文件。我可以使用 AggPass 使用 FreePascal 或 Delphi 呈现此 PDF 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:14:04.417

AggPas 无法读取 PDF 文件。

# cuda - 带有 C/C++ 编译的 CUDA 失败

> ID：14625318
> 
> 赞同：1
> 
> 时间：2013-01-31T12:02:32.820
> 
> 标签：cuda, gpu, gpgpu

我正在尝试将 CUDA 代码与我现有的 C++ 应用程序集成。按照一些网页端的指示，我需要一个“file.cu”，其中我有一个包装函数，它在 GPU 上分配内存并启动内核。我遵循了该建议，但我现在无法编译代码。

文件.cu

```
#include <cuda.h>
#include <stdio.h>

void preComputeCorrelation_gpu( int * d )
{
    //I shall write the kernel later once I am confirmed that CUDA code works
    cudaDeviceProp prop;
    cudaGetDeviceProperties( &prop, 0 );
    printf( "name = %s\n", prop.name );
} 
```

主文件

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#include <cuda.h>

#define __CUDA_SUPPORT__

#ifdef __CUDA_SUPPORT__
// Defination to be found in "cudaWrap.cu"
extern void preComputeCorrelation_gpu( int * d );
#endif

int main()
{
//code to read d from the file and other initialization
int * d;
.
.

#ifdef __CUDA_SUPPORT__ 
    fprintf( stderr, "GPU Computation starts" );
    // Defination to be found in "cudaWrap.cu"
    preComputeCorrelation_gpu( d ); 
#else
    fprintf( stderr, "CPU Computation starts" );
    preComputeCorrelation( d );
#endif

.
.
//more code

return 0 ;
} 
```

现在，我输入以下命令来编译代码

```
$ nvcc -c cudaWrap.cu <br/>
$ g++ -I /usr/local/cuda-5.0/include -L /usr/local/cuda-5.0/lib -o GA_omp GA_dev_omp.cpp main_omp.cpp data_stats.cpp cudaWrap.o 
```

编译失败，我在第二个命令后收到以下消息。虽然第一个命令有效。

```
cudaWrap.o: In function `preComputeCorrelation_gpu(DataSet*)':
tmpxft_00001061_00000000-3_cudaWrap.cudafe1.cpp:(.text+0x2f): undefined reference to `cudaGetDeviceProperties'
cudaWrap.o: In function `__cudaUnregisterBinaryUtil()':
tmpxft_00001061_00000000-3_cudaWrap.cudafe1.cpp:(.text+0x6b): undefined reference to `__cudaUnregisterFatBinary'
cudaWrap.o: In function `__sti____cudaRegisterAll_43_tmpxft_00001061_00000000_6_cudaWrap_cpp1_ii_f8a043c5()':
tmpxft_00001061_00000000-3_cudaWrap.cudafe1.cpp:(.text+0x8c): undefined reference to `__cudaRegisterFatBinary'
collect2: ld returned 1 exit status 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:03:40.857

这个问题的解决方法是普通c++代码和cuda代码的链接需要用libcudart.so

编译应该看起来像 -

```
$ nvcc -c cudaWrap.cu 
$ g++ -lcudart -I /usr/local/cuda-5.0/include -L /usr/local/cuda-5.0/lib -o GA_omp GA_dev_omp.cpp main_omp.cpp data_stats.cpp cudaWrap.o 
```

在这种情况下，cudaWrap.cu 包含 cuda 代码。main_omp.cpp 包含 main() 并且还有一些其他的应用程序文件也需要编译。

# java - 模态对话框并不总是在未装饰框架的顶部

> ID：14625319
> 
> 赞同：0
> 
> 时间：2013-01-31T12:02:35.050
> 
> 标签：java, swing, jframe, modal-dialog, joptionpane

我使用带有模态对话框的未装饰 JFrame。问题是当框架被装饰时，模态对话框总是在顶部，但在框架未装饰时，模式对话框总是在顶部。因此，当我单击我的 JFrame 时，框架显示在顶部，对话框位于下方。

我使用此代码。

```
final JFrame frame = new JFrame();
frame.setUndecorated(true);
frame.setSize(new Dimension(500, 500));
frame.setUndecorated(true);
frame.setVisible(true);
JOptionPane.showInputDialog("OYE"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:04:11.483

*   必须[为`JOptionPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features)

*   [公共 JOptionPane（对象消息，int messageType）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#JOptionPane%28java.lang.Object,%20int%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T12:06:49.420

```
JOptionPane.showInputDialog(null, "HelloWorld"); 
```

在上面的一个中，父母是`null`。在您的情况下，将 parent 设置为您的`frame`.

例子：

```
JOptionPane.showInputDialog(frame, "HelloWorld"); 
```

有关详细信息，请参阅[showInputDialog](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showInputDialog%28java.awt.Component,%20java.lang.Object%29)。

# wordpress - wordpress tinymce 插入而不是

> ID：14625322
> 
> 赞同：3
> 
> 时间：2013-01-31T12:02:49.740
> 
> 标签：wordpress, tinymce

当我在 tinymce 中编辑文本并按下`enter`它时，插入`&nbsp;`而不是`<br>`. 你能告诉我如何强制它插入新行吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-05T10:54:02.707

希望这对您有所帮助，链接位于[此处](http://wordpress.org/support/topic/cannot-force-line-breaks-in-post#post-289814)

# php - mysqli_insert_id 不工作

> ID：14625324
> 
> 赞同：3
> 
> 时间：2013-01-31T12:02:54.860
> 
> 标签：php, mysqli

我正在尝试从 INSERT/UPDATE 查询中获取最后一个自动增量 ID，我正在尝试这种方式，但它不起作用，它只是`id=0`每次都回显。

PHP

```
require_once('conn.php'); 
$temp = 'temp';

$query = "INSERT INTO temp (temp) VALUES('$temp')";
$result = mysqli_query($conn, $query) or trigger_error(mysqli_error($conn), E_USER_ERROR);

$id = mysqli_insert_id($conn);
echo 'id = '.$id; 
```

请查看并建议任何可能的方法来做到这一点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-09T01:27:04.627

尝试将查询更改为。

```
INSERT INTO `temp` (`temp`) VALUES('$temp') 
```

# c# - 如何将项目添加到包含字典的字典中

> ID：14625325
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:02:54.090
> 
> 标签：c#, .net

我想将项目添加到包含字典的字典中，请参阅下面的代码。

```
Dictionary<string, Dictionary<string, int>> dict = new Dictionary<string, Dictionary<string, int>>();
foreach (var item in TrainingCourseList)
{
    // I have to add item.ID,item.Name,item.Score something like below
    dict.Add(item.ID,item.Name,item.Score);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:07:23.430

如果要向外部字典添加条目，则必须执行类似的操作

```
Dictionary<string, Dictionary<string, int>> dict = new Dictionary<string, Dictionary<string, int>>();
    foreach (var item in TrainingCourseList)
    {
        // i have to add item.ID,item.Name,item.Score something like below
        dict.Add(item.ID,new Dictionary<string,int>{{item.Name,item.Score}};
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:10:01.450

尝试

```
Dictionary<string, Dictionary<string, int>> dict = new Dictionary<string, Dictionary<string, int>>();
foreach (var item in TrainingCourseList)
{
    // i have to add item.ID,item.Name,item.Score something like below
    dict.Add(item.ID, new Dictionary<string, int> { item.Name, item.Score });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:10:33.043

我想`Tuple<string, string, int>`这是最适合您的情况，而不是字典：

```
var list = TrainingCourseList
    .Select(item => Tuple.Create(item.ID, item.Name, item.Score)); 
```

# sql - 如何比较任意表的sqlite差异

> ID：14625326
> 
> 赞同：1
> 
> 时间：2013-01-31T12:02:55.560
> 
> 标签：sql, sqlite

**我正在尝试比较具有相同列的两个表中的数据，寻找差异。**一个表代表“实时”数据，另一个实际上是存档：

表：实时、存档

列：ID、姓名、年龄、性别

因此，例如，我们可以拥有实时数据：

```
Id Name      Age Gender
-- --------- --- ------
1  Alan      31  Male
2  Betty     22  Female 
```

档案可能是：

```
Id Name      Age Gender
-- --------- --- ------
1  Alan      30  Male
2  Lizzy     20  Female 
```

对于任何给定的 Id 值，我想要做的是找出这两个表中的数据是如何变化的。因此，如果我针对 Id=1 运行查询，理想情况下我会喜欢这样的结果：

```
Column Live    Archive
------ ------- --------
Age    31      30 
```

对于 Id=2：

```
Column Live    Archive
------ ------- --------
Name   Betty   Lizzy
Age    22      20 
```

不同的是，我想对*任意*两个表运行此查询（知道它们将具有相同的列），因此我无法命名查询中的列。

我怀疑这在*理论上*是可能实现的，因为您可以向 sqlite DB 本身询问任何给定表的列 - 或者至少您可以使用编译指示。

**我想在这里做太多了吗？**如果是这样，如果我明确命名查询中的列（例如在查询表的列名后在运行时构建查询字符串） ，**是否可以获得我正在寻找的结果类型？**

# iphone - 如何在 Facebook 上分享视频

> ID：14625329
> 
> 赞同：1
> 
> 时间：2013-01-31T12:03:01.330
> 
> 标签：iphone, facebook-graph-api, ios5

我正在开发一个我添加了视频的 iPhone 应用程序。我想在 Facebook 上分享这些视频。我添加了 FbGraphAPI。我不知道我应该如何分享视频。

我从这里添加了 FbGraphAPI [https://github.com/reallylongaddress/iPhone-Facebook-Graph-API](https://github.com/reallylongaddress/iPhone-Facebook-Graph-API)

谢谢

# c# - 如果一项操作失败则回滚

> ID：14625331
> 
> 赞同：2
> 
> 时间：2013-01-31T12:03:04.220
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework

如果一组操作中的一个操作失败，我在这里没有找到关于如何回滚 sql server 上的先前操作的具体帖子。

例如，我有一个查询来带来一些数据，我添加了一行`context.saveChanges()`，然后可能执行了第二次和第三次插入。

好的，最后一次插入失败，所以我想将 db 状态恢复到三个插入之前的状态。

我正在使用 EF4 和 SQL Server 2008 R2 + Asp Net MVC 4 / C#。

交易是唯一的方法吗？由于这些操作已被一一（以编程方式）保存，而不仅仅是一个`context.saveChange()`，我不确定如何执行回滚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:21:06.860

您可以使用 TransactionScope 执行这样的“嵌套事务”。

包装你的逻辑

```
using (var transScope = new TransactionScope())
{

    //add something
    context.SaveChanges();

    //do something else
    context.SaveChanges();

    if (foo == bar) //check that it worked fine
    {
        transScope.Commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:06:33.340

好吧，什么也不做。SaveChanges 已经在内部使用了一个事务。它是原子的——要么保存更改，要么不保存。

# c# - 应用程序要求第一次以管理员身份运行

> ID：14625332
> 
> 赞同：0
> 
> 时间：2013-01-31T12:03:04.130
> 
> 标签：c#, .net, c#-4.0, setup-deployment, windows-applications

我在 c#.net 中开发了一个应用程序。

为 Windows 7 64 位操作系统创建了一个设置。我已使用 Visual Studio 2010 创建设置。我选择了默认为 64 位操作系统设置提供的应用程序的先决条件，即 Sql Server 2008 和 .NET Framework 4.0。

安装程序安装成功。

我的问题是**我需要第一次以管理员身份运行应用程序。

创建设置时是否需要为设置设置特定属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:22:20.430

您需要在[您的应用程序中创建和嵌入应用程序清单。](http://msdn.microsoft.com/en-us/library/bb756929.aspx)看看这个链接，我希望你能得到你想要的。让您的应用程序[具有 UAC 意识](http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware)

# django - 由于对 S3 的 httplib 请求，Django-skel 速度很慢

> ID：14625333
> 
> 赞同：2
> 
> 时间：2013-01-31T12:03:06.700
> 
> 标签：django, heroku, amazon-s3

天，

我正在玩`django-skel`最近的一个项目，并使用了它的大部分默认值：`Heroku`用于托管和`S3`文件存储。`sorl`除了用于生成缩略图之外，我主要服务于静态站点，但是响应时间很可悲。

您可以访问该网站：[http ://bit.ly/XlzkXp](http://bit.ly/XlzkXp)

我的模板看起来像：[https ://gist.github.com/cd15e320be6f4454a7fb](https://gist.github.com/cd15e320be6f4454a7fb)

我使用 URL conf 中的快捷方式提供模板，根本不使用数据库：[https ://gist.github.com/f9d1a9a191959dcff1b5](https://gist.github.com/f9d1a9a191959dcff1b5)

但是，响应始终需要 15 秒以上的时间。新的遗物表明这是因为在处理视图时请求转到 S3。这对我来说没有任何意义。

新遗迹数据：http: [//i.imgur.com/vs9ZTLP.png ?1](http://i.imgur.com/vs9ZTLP.png?1)

为什么有东西`httplib`用来从 S3 请求东西？我可以看到 collectstatic 可能是如何做到的，但看不到视图本身的处理。

我对 Django-skel 和这个设置有什么不了解的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:43:57.810

有同样的问题，我的猜测是：

*   django-compress 和 django-storage 都在使用
*   这导致它需要将模板呈现到 S3 存储桶的前保存缓存
*   然后在渲染每个模板时读取它（通过网络，所以 httplib）

我的第二个猜测是，关于[django-compress 与远程存储](http://django_compressor.readthedocs.org/en/latest/remote-storages/#using-staticfiles)实现“*在本地缓存文件的 S3 存储后端*”的指令将解决这个问题。

虽然这对我来说很有意义：将缓存保存到本地和 S3 位置并首先从本地文件系统读取应该加快速度，但它以某种方式**不起作用**.. 仍然响应时间约为 8+ 秒。

通过禁用 django-compress，`COMPRESS_ENABLED = False`我设法获得了 1-1.3 秒的平均响应时间。

有任何想法吗？
*（如果有任何进展，我会更新这个答案）*

# scala - 定义案例类的好地方？

> ID：14625335
> 
> 赞同：3
> 
> 时间：2013-01-31T12:03:08.903
> 
> 标签：scala

是否有建议的最佳实践来在 Scala 中定义案例类的位置？例如，假设您有几个参与者相互发送消息，应该在哪里定义案例类？

在共享包中？在其中一位演员中-如果是的话，是哪一位？

或者在一个包对象中，例如：

```
package object mypackage {
  case object Ping
  case object Pong
  case object Stop
} 
```

如果演员在同一个包里？

只是想在这里找出最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:15:44.507

我通常将消息案例类与参与者本身放在一起，缺点是您不能以这种方式在参与者之间共享消息类，但实际上这对我来说从来都不是问题，而且在调用它们时有点冗长情商：

```
MyActor ! MyActor.MyMessage 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:16:27.033

我还没有找到解决这个问题的最佳实践，但我可以告诉你我是如何做到的。对我来说，这取决于消息的复杂性。如果我有高度分支的继承消息，我通常将它们放入一个名为“消息”的自己的包中。如果我在同一个包中只有许多 Actor 使用的一些消息，我会在包对象中定义这些消息。但是，如果有消息，仅由单个 Actor 使用（例如，如果我想模拟私有递归函数），我会使用它们在 Actor 中定义这些消息。有时混合所有这些可能是最好的方法。

# c# - itextsharp 是否支持 courier 新字体或 c# 中的任何其他注册字体

> ID：14625338
> 
> 赞同：0
> 
> 时间：2013-01-31T12:03:14.497
> 
> 标签：c#, fonts, itextsharp

我已经准备好pdf模板。在其上写入与pdf上的键匹配的值。需要根据requireemnt使用itextsharp（pdfstamper）设置不同的字体和字体大小。但我想设置各种不同的字体，如 CourierNew、Arial 和其他一些第三方注册字体。如何使用 itextsharp 使用这些不同的字体。请参考以下代码片段。以下代码片段用于在 pdf 模板上写入值来设置字体调用函数 SetPrintFont，其中定义了不同的字体和字体大小。请同样指导

```
var pdfReader = new PdfReader(filebyte);
var pdfStamper = new PdfStamper(pdfReader, new FileStream(pdfname, FileMode.Create));

AcroFields pdfFormFields = pdfStamper.AcroFields;
foreach (DictionaryEntry de in pdfReader.AcroFields.Fields)
 { 

//set the field to bold
 pdfFormFields.SetFieldProperty(de.Key.ToString(), "textfont", font.BaseFont, null);
 Regex regex = new Regex(@"^\d$");
         if (regex.IsMatch(de.Key.ToString()))
             {
                //set the text of the form field
                 pdfFormFields.SetField(de.Key.ToString(), response.ResponseValues.ToString());
             }
         else
              {
                  pdfFormFields.SetField(de.Key.ToString(), response.ResponseValues.ToString());
              }

            }
        pdfStamper.FormFlattening = false;
        pdfStamper.Close(); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:10:50.250

您可以像这样获取已注册字体的列表：

```
ICollection<string> registeredFonts = iTextSharp.text.FontFactory.RegisteredFonts; 
```

无论如何，`iTextSharp`您可以使用任何您想要的字体。如果您没有找到所需的字体，您可以`.ttf`从 Internet 下载文件并附上：

```
BaseFont baseFont = BaseFont.CreateFont(fontFolderPath + "arial.ttf", BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED)
Font font = iTextSharp.text.Font(baseFont, fontSize, iTextSharp.text.Font.BOLD); 
```

`BaseFont`是成员`iTextSharp.text.pdf`

# asp.net - 如何根据创建日期删除文件夹及其内容？例如 3 个月前创建的

> ID：14625341
> 
> 赞同：1
> 
> 时间：2013-01-31T12:03:20.960
> 
> 标签：asp.net

我想删除 3 个月前创建的文件夹及其内容............我写了一个代码......但是在给定条件时不起作用

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string NewDirectory = "C:\\New Foouterlder\\delete";

        DeleteDirectoryIfExist(NewDirectory);

    }
    private void DeleteDirectoryIfExist(string NewDirectory)
    {
        DirectoryInfo di = new DirectoryInfo("C:\\New Foouterlder\\delete");

        try
        {
            if (System.IO.Directory.Exists(NewDirectory))
                {
                    if (di.CreationTime< DateTime.Now.AddMonths(-3))
                    {

                        Response.Write(MydateTime);
                        Directory.Delete(NewDirectory, true);
                   }
           else

                    {
                       Label1.Text = "Directory Not Exist";

                   }
            }
            Response.Write(di.CreationTime);

        }
        catch (IOException _err)
        {
            Response.Write(_err.Message);
        }
    }
}
} 
```

di.CreationTime 为 1/1/1601 5:30:00 AM ....为什么

# svn - 共享空间的版本管理

> ID：14625342
> 
> 赞同：0
> 
> 时间：2013-01-31T12:03:26.257
> 
> 标签：svn

我们使用一个简单的共享虚拟主机提供商，但现在我想对上传的文件使用版本管理。

我尝试了 Tortoise SVN 和 PHProjekt，但它们都只使用离线文件 是否有一个在线工具程序可以使用 ftp 跟踪在线文件的版本历史？

不一定是免费的，但会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:17:11.240

> 我们使用一个简单的共享虚拟主机提供商，但现在我想对上传的文件使用版本管理。

如果您谈论的是*代码*，那么在共享网络空间上进行版本控制通常不是一个真正的选择，而且它也不是最好的方法。您会发现网站项目中最常用的模式是基于部署的模式，这意味着

*   人们在本地代码库上工作

*   将更改签入 SVN 存储库（本地托管或使用[Assembla](http://www.assembla.com)等在线服务）

*   更改从存储库中签出，并部署到网站，通常使用 FTP，通常使用自动化脚本

这为您节省了在线版本控制的东西的麻烦 - 在线是在 SVN 存储库中清理、定义的修订。

我曾多次尝试在共享主机上构建版本控制和部署，但我发现没有干净的方法可以做到这一点。

# c++ - 使用 SetWindowsHookEx MS-Windows API 函数的低级键盘挂钩应用程序

> ID：14625343
> 
> 赞同：0
> 
> 时间：2013-01-31T12:03:30.740
> 
> 标签：c++, setwindowshookex, wh-keyboard-ll

我目前正在开发一个挂钩应用程序。我正在使用 C++ 来实现这一点，并且我正在使用 MS-Windows 挂钩库中的函数。我的应用程序通过 .DLL 文件创建了一个全局挂钩，然后我可以向所有进程（到它们的主窗口）发送多个击键。我正在使用 SetWindowsHookEx MS-Windows API 函数，“挂钩类型”是 WH_KEYBOARD_LL。尽管它按预期工作，但在某些情况下（例如某些游戏），即使我发送“假”击键，游戏似乎也无法“理解”该击键。有没有人有类似的问题或建议？非常感谢。

# android - Android 不幸的是应用程序已停止

> ID：14625346
> 
> 赞同：0
> 
> 时间：2013-01-31T12:03:43.590
> 
> 标签：android

我收到错误：不幸的是应用程序已停止

通过使用下面的代码，我试图通过单击餐厅按钮来调用 RestaurantActivity。

AndroidDashboardDesignActivity.java：

```
public class AndroidDashboardDesignActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dashboard_layout);

        /**
         * Creating all buttons instances
         * */
        // Dashboard News feed button
        Button btn_restaurant = (Button) findViewById(R.id.btn_news_feed);

        // Dashboard Friends button
        Button btn_friends = (Button) findViewById(R.id.btn_friends);

        // Dashboard Messages button
        Button btn_messages = (Button) findViewById(R.id.btn_messages);

        // Dashboard Places button
        Button btn_places = (Button) findViewById(R.id.btn_places);

        // Dashboard Events button
        Button btn_events = (Button) findViewById(R.id.btn_events);

        // Dashboard Photos button
        Button btn_photos = (Button) findViewById(R.id.btn_photos);

        /**
         * Handling all button click events
         * */

        // Listening to News Feed button click
        btn_restaurant.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching Near Restaurant Screen
            Intent i = new Intent(AndroidDashboardDesignActivity.this, com.androidhive.googleplacesandmaps.RestaurantActivity.class);
            startActivity(i);
        }
    });

    // Listening Friends button click
    btn_friends.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(AndroidDashboardDesignActivity.this, com.androidhive.googleplacesandmaps.FriendsActivity.class);
            startActivity(i);
        }
    });

    // Listening Messages button click
    btn_messages.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(AndroidDashboardDesignActivity.this, com.androidhive.googleplacesandmaps.MessagesActivity.class);
            startActivity(i);
        }
    });

    // Listening to Places button click
    btn_places.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(AndroidDashboardDesignActivity.this, com.androidhive.googleplacesandmaps.PlacesActivity.class);
            startActivity(i);
        }
    });

    // Listening to Events button click
    btn_events.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(AndroidDashboardDesignActivity.this, com.androidhive.googleplacesandmaps.EventsActivity.class);
            startActivity(i);
        }
    });

    // Listening to Photos button click
    btn_photos.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(AndroidDashboardDesignActivity.this, com.androidhive.googleplacesandmaps.PhotosActivity.class);
            startActivity(i);
        }
    });
} 
```

仪表板布局.java：

```
 package com.androidhive.googleplacesandmaps;

 import android.content.Context;
 import android.util.AttributeSet;
 import android.view.View;
 import android.view.ViewGroup;

 /**
 * Custom layout that arranges children in a grid-like manner, 
 optimizing for even    horizontal and
 * vertical whitespace.
 */
public class DashboardLayout extends ViewGroup {

private static final int UNEVEN_GRID_PENALTY_MULTIPLIER = 10;

private int mMaxChildWidth = 0;
private int mMaxChildHeight = 0;

public DashboardLayout(Context context) {
    super(context, null);
}

public DashboardLayout(Context context, AttributeSet attrs) {
    super(context, attrs, 0);
}

public DashboardLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    mMaxChildWidth = 0;
    mMaxChildHeight = 0;

    // Measure once to find the maximum child size.

    int childWidthMeasureSpec = MeasureSpec.makeMeasureSpec(
            MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.AT_MOST);
    int childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(
            MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.AT_MOST);

    final int count = getChildCount();
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() == GONE) {
            continue;
        }

        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);

        mMaxChildWidth = Math.max(mMaxChildWidth, child.getMeasuredWidth());
        mMaxChildHeight = Math.max(mMaxChildHeight, child.getMeasuredHeight());
    }

    // Measure again for each child to be exactly the same size.

    childWidthMeasureSpec = MeasureSpec.makeMeasureSpec(
            mMaxChildWidth, MeasureSpec.EXACTLY);
    childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(
            mMaxChildHeight, MeasureSpec.EXACTLY);

    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() == GONE) {
            continue;
        }

        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);
    }

    setMeasuredDimension(
            resolveSize(mMaxChildWidth, widthMeasureSpec),
            resolveSize(mMaxChildHeight, heightMeasureSpec));
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    int width = r - l;
    int height = b - t;

    final int count = getChildCount();

    // Calculate the number of visible children.
    int visibleCount = 0;
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() == GONE) {
            continue;
        }
        ++visibleCount;
    }

    if (visibleCount == 0) {
        return;
    }

    // Calculate what number of rows and columns will optimize for even horizontal and
    // vertical whitespace between items. Start with a 1 x N grid, then try 2 x N, and so on.
    int bestSpaceDifference = Integer.MAX_VALUE;
    int spaceDifference;

    // Horizontal and vertical space between items
    int hSpace = 0;
    int vSpace = 0;

    int cols = 1;
    int rows;

    while (true) {
        rows = (visibleCount - 1) / cols + 1;

        hSpace = ((width - mMaxChildWidth * cols) / (cols + 1));
        vSpace = ((height - mMaxChildHeight * rows) / (rows + 1));

        spaceDifference = Math.abs(vSpace - hSpace);
        if (rows * cols != visibleCount) {
            spaceDifference *= UNEVEN_GRID_PENALTY_MULTIPLIER;
        }

        if (spaceDifference < bestSpaceDifference) {
            // Found a better whitespace squareness/ratio
            bestSpaceDifference = spaceDifference;

            // If we found a better whitespace squareness and there's only 1 row, this is
            // the best we can do.
            if (rows == 1) {
                break;
            }
        } else {
            // This is a worse whitespace ratio, use the previous value of cols and exit.
            --cols;
            rows = (visibleCount - 1) / cols + 1;
            hSpace = ((width - mMaxChildWidth * cols) / (cols + 1));
            vSpace = ((height - mMaxChildHeight * rows) / (rows + 1));
            break;
        }

        ++cols;
    }

    // Lay out children based on calculated best-fit number of rows and cols.

    // If we chose a layout that has negative horizontal or vertical space, force it to zero.
    hSpace = Math.max(0, hSpace);
    vSpace = Math.max(0, vSpace);

    // Re-use width/height variables to be child width/height.
    width = (width - hSpace * (cols + 1)) / cols;
    height = (height - vSpace * (rows + 1)) / rows;

    int left, top;
    int col, row;
    int visibleIndex = 0;
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() == GONE) {
            continue;
        }

        row = visibleIndex / cols;
        col = visibleIndex % cols;

        left = hSpace * (col + 1) + width * col;
        top = vSpace * (row + 1) + height * row;

        child.layout(left, top,
                (hSpace == 0 && col == cols - 1) ? r : (left + width),
                (vSpace == 0 && row == rows - 1) ? b : (top + height));
        ++visibleIndex;
    }
}
} 
```

RestaurantActivity.java：

```
 public class RestaurantActivity extends Activity {

// flag for Internet connection status
Boolean isInternetPresent = false;

// Connection detector class
ConnectionDetector cd;

// Alert Dialog Manager
AlertDialogManager alert = new AlertDialogManager();

// Google Places
GooglePlaces googlePlaces;

// Places List
PlacesList nearPlaces;

// GPS Location
GPSTracker gps;

// Button
Button btnShowOnMap;

// Progress dialog
ProgressDialog pDialog;

// Places Listview
ListView lv;

// ListItems data
ArrayList<HashMap<String, String>> placesListItems = new ArrayList<HashMap<String,String>>();

// KEY Strings
public static String KEY_REFERENCE = "reference"; // id of the place
public static String KEY_NAME = "name"; // name of the place
public static String KEY_VICINITY = "vicinity"; // Place area name

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.restaurants);

    cd = new ConnectionDetector(getApplicationContext());

    // Check if Internet present
    isInternetPresent = cd.isConnectingToInternet();
    if (!isInternetPresent) {
        // Internet Connection is not present
        alert.showAlertDialog(RestaurantActivity.this, "Internet Connection Error",
                "Please connect to working Internet connection", false);
        // stop executing code by return
        return;
    }

    // creating GPS Class object
    gps = new GPSTracker(this);

    // check if GPS location can get
    if (gps.canGetLocation()) {
        Log.d("Your Location", "latitude:" + gps.getLatitude() + ", longitude: " + gps.getLongitude());
    } else {
        // Can't get user's current location
        alert.showAlertDialog(RestaurantActivity.this, "GPS Status",
                "Couldn't get location information. Please enable GPS",
                false);
        // stop executing code by return
        return;
    }

    // Getting listview
    lv = (ListView) findViewById(R.id.list);

    // button show on map
    btnShowOnMap = (Button) findViewById(R.id.btn_show_map);

    // calling background Async task to load Google Places
    // After getting places from Google all the data is shown in listview
    new LoadPlaces().execute();

    /** Button click event for shown on map */
    btnShowOnMap.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(getApplicationContext(),
                    PlacesMapActivity.class);
            // Sending user current geo location
            i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
            i.putExtra("user_longitude", Double.toString(gps.getLongitude()));

            // passing near places to map activity
            i.putExtra("near_places", nearPlaces);
            // staring activity
            startActivity(i);
        }
    });

    /**
     * ListItem click event
     * On selecting a listitem SinglePlaceActivity is launched
     * */
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String reference = ((TextView) view.findViewById(R.id.reference)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    SinglePlaceActivity.class);

            // Sending place refrence id to single place activity
            // place refrence id used to get "Place full details"
            in.putExtra(KEY_REFERENCE, reference);
            startActivity(in);
        }
    });
}

/**
 * Background Async Task to Load Google places
 * */
class LoadPlaces extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(RestaurantActivity.this);
        pDialog.setMessage(Html.fromHtml("<b>Search</b><br/>Loading Places..."));
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Places JSON
     * */
    protected String doInBackground(String... args) {
        // creating Places class object
        googlePlaces = new GooglePlaces();

        try {
            // Separeate your place types by PIPE symbol "|"
            // If you want all types places make it as null
            // Check list of types supported by google
            // 
            String types = "cafe|restaurant"; // Listing places only cafes, restaurants

            // Radius in meters - increase this value if you don't find any places
            double radius = 1000; // 1000 meters 

            // get nearest places
            nearPlaces = googlePlaces.search(gps.getLatitude(),
                    gps.getLongitude(), radius, types);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * and show the data in UI
     * Always use runOnUiThread(new Runnable()) to update UI from background
     * thread, otherwise you will get error
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed Places into LISTVIEW
                 * */
                // Get json response status
                String status = nearPlaces.status;

                // Check for all possible status
                if(status.equals("OK")){
                    // Successfully got places details
                    if (nearPlaces.results != null) {
                        // loop through each place
                        for (Place p : nearPlaces.results) {
                            HashMap<String, String> map = new HashMap<String, String>();

                            // Place reference won't display in listview - it will be hidden
                            // Place reference is used to get "place full details"
                            map.put(KEY_REFERENCE, p.reference);

                            // Place name
                            map.put(KEY_NAME, p.name);

                            // adding HashMap to ArrayList
                            placesListItems.add(map);
                        }
                        // list adapter
                        ListAdapter adapter = new SimpleAdapter(RestaurantActivity.this, placesListItems,
                                R.layout.list_item,
                                new String[] { KEY_REFERENCE, KEY_NAME}, new int[] {
                                        R.id.reference, R.id.name });

                        // Adding data into listview
                        lv.setAdapter(adapter);
                    }
                }
                else if(status.equals("ZERO_RESULTS")){
                    // Zero results found
                    alert.showAlertDialog(RestaurantActivity.this, "Near Places",
                            "Sorry no places found. Try to change the types of places",
                            false);
                }
                else if(status.equals("UNKNOWN_ERROR"))
                {
                    alert.showAlertDialog(RestaurantActivity.this, "Places Error",
                            "Sorry unknown error occured.",
                            false);
                }
                else if(status.equals("OVER_QUERY_LIMIT"))
                {
                    alert.showAlertDialog(RestaurantActivity.this, "Places Error",
                            "Sorry query limit to google places is reached",
                            false);
                }
                else if(status.equals("REQUEST_DENIED"))
                {
                    alert.showAlertDialog(RestaurantActivity.this, "Places Error",
                            "Sorry error occured. Request is denied",
                            false);
                }
                else if(status.equals("INVALID_REQUEST"))
                {
                    alert.showAlertDialog(RestaurantActivity.this, "Places Error",
                            "Sorry error occured. Invalid Request",
                            false);
                }
                else
                {
                    alert.showAlertDialog(RestaurantActivity.this, "Places Error",
                            "Sorry error occured.",
                            false);
                }
            }
        });

    } 
```

AndroidManifest.xml：

```
 <activity
        android:name="com.androidhive.googleplacesandmaps.AndroidDashboardDesignActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- MainActivity -->
    <activity android:name="com.androidhive.googleplacesandmaps.RestaurantActivity" android:label="Nearest Places">
    </activity>

    <!-- SinglePlaceActivity -->
    <activity android:name="com.androidhive.googleplacesandmaps.SinglePlaceActivity" android:label="Place Details">
    </activity>

    <!-- PlacesMapActivity -->
    <activity android:name="com.androidhive.googleplacesandmaps.PlacesMapActivity" android:label="Near Places Map View">
    </activity> 
```

Logcat 说：

```
01-31 17:42:17.352: E/AndroidRuntime(981): FATAL EXCEPTION: main
01-31 17:42:17.352: E/AndroidRuntime(981): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.googleplacesandmaps/com.androidhive.googleplacesandmaps.AndroidDashboardDesignActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class com.androidhive.dashboard.DashboardLayout
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.os.Looper.loop(Looper.java:137)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-31 17:42:17.352: E/AndroidRuntime(981):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 17:42:17.352: E/AndroidRuntime(981):  at java.lang.reflect.Method.invoke(Method.java:511)
01-31 17:42:17.352: E/AndroidRuntime(981):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-31 17:42:17.352: E/AndroidRuntime(981):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-31 17:42:17.352: E/AndroidRuntime(981):  at dalvik.system.NativeStart.main(Native Method)
01-31 17:42:17.352: E/AndroidRuntime(981): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class com.androidhive.dashboard.DashboardLayout
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.parseInclude(LayoutInflater.java:807)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-31 17:42:17.352: E/AndroidRuntime(981):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.Activity.setContentView(Activity.java:1881)
01-31 17:42:17.352: E/AndroidRuntime(981):  at com.androidhive.googleplacesandmaps.AndroidDashboardDesignActivity.onCreate(AndroidDashboardDesignActivity.java:15)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.Activity.performCreate(Activity.java:5104)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-31 17:42:17.352: E/AndroidRuntime(981):  ... 11 more
01-31 17:42:17.352: E/AndroidRuntime(981): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.androidhive.dashboard.DashboardLayout" on path: /system/framework/com.google.android.maps.jar:/data/app/com.androidhive.googleplacesandmaps-1.apk
01-31 17:42:17.352: E/AndroidRuntime(981):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
01-31 17:42:17.352: E/AndroidRuntime(981):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-31 17:42:17.352: E/AndroidRuntime(981):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
01-31 17:42:17.352: E/AndroidRuntime(981):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
01-31 17:42:17.352: E/AndroidRuntime(981):  ... 22 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:15:41.167

尝试：

```
btn_restaurantFind.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        // Launching Near Restaurant Screen
        Intent i = new Intent(AndroidDashBoardDesignActivity.this, RestaurantActivity.class);
        startActivity(i);
    }
}); 
```

并更改`Manifest.xml`代码

```
<activity android:name="com.androidhive.googleplacesandmaps.RestaurantActivity" 
          android:label="Nearest Places">
    <intent-filter>
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:05:13.183

利用

`AndroidDashBoardDesignActivity.this`

代替

`getApplicationContext()`.

# ruby-on-rails-3 - 搜索功能结果应该在 Rails 的同一页面中

> ID：14625347
> 
> 赞同：1
> 
> 时间：2013-01-31T12:03:45.317
> 
> 标签：ruby-on-rails-3, search

我有一个包含如下搜索表单的视图：

```
 <div>
  <%= form_tag :action => 'search' do %>
   <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :class => 'nil' %>
   </p>
  <% end %>
</div> 
```

每当我单击搜索按钮时，它都会调用一个我不想要的新视图。我想在同一页面中执行一些操作并仅在那里显示结果。谁能指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:37:17.627

如果您的搜索表单在 index.html.erb 中并且您希望在同一页面上获得搜索结果，那么

**在你的控制器中**

```
def index
  if params[:search]
    # search query
  else
    # listing records
  end
end 
```

**鉴于** 更换`<%= form_tag :action => 'search', :method => :get do %>`

和`<%= form_tag :action => 'index' do %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:18:21.070

我从以下博客中找到了解决方案

[http://www.alfajango.com/blog/rails-3-remote-links-and-forms/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)

# windows-runtime - WP8 SDK 的函数 GetNumberFormatEx 和 GetCurrencyFormatEx 链接错误

> ID：14625350
> 
> 赞同：0
> 
> 时间：2013-01-31T12:03:51.863
> 
> 标签：windows-runtime, windows-phone-8

我刚刚遇到了关于这两个函数的链接问题：

*   `GetNumberFormatEx`
*   `GetCurrencyFormatEx`

以前有人提过这个问题，但没有人回答他。任何人都可以解释这个问题吗？

[http://social.msdn.microsoft.com/Forums/zh-CN/wpdevelop/thread/6973414e-f238-4ebb-9255-6c54ad2d76b6](http://social.msdn.microsoft.com/Forums/zh-CN/wpdevelop/thread/6973414e-f238-4ebb-9255-6c54ad2d76b6)

这两个功能在 MSDN 文档中是明确支持的，但是我不能用，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:47:55.187

根据开发中心论坛，他们为我提供了解决方案。查看此链接：[点击前往](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/108ea721-ce45-496c-9731-eb2b1a210325)

我所要做的就是添加`WindowsPhoneGlobalizationUtil.lib`到项目链接设置。

# jquery - 如何避免编写 jQuery 重复代码

> ID：14625358
> 
> 赞同：1
> 
> 时间：2013-01-31T12:03:57.463
> 
> 标签：jquery

我已经搜索和问题选项卡，我发现之前已经问过 jQuery 重复代码问题，但我仍然不明白如何将它应用于我的具体问题。

下面是一个简单的代码，将框中的文本更改为红色、蓝色和黑色，有 3 个这样的框。如何最小化此代码以避免重复，谢谢。

```
 $("div.box1").click(function () {
    colour=$(this).css("background-color");
    $("div.first").css("color", colour);
});

 $("div.box2").click(function () {
    colour=$(this).css("background-color");
    $("div.second").css("color", colour);
});

 $("div.box3").click(function () {
    colour=$(this).css("background-color");
    $("div.last").css("color", colour);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:08:34.003

如果没有看到您的 HTML，就很难理解这些不同元素之间的关系。

但是，您可以做的一件事是将其颜色更新为 HTML5 属性的元素的类名存储。例如：

```
<div class="box box1" data-otherdiv="first"></div>
<div class="box box2" data-otherdiv="second"></div>
<div class="box box3" data-otherdiv="third"></div> 
```

然后你可以简单地使用一个功能：

```
$("div.box").click(function () {
    var $this = $(this); //creating a local "$this" object prevents multiple $(this) calls
    $("div." + $this.data("otherdiv")).css("color", $this.css("background-color"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:32:40.083

首先定义一个具有更通用版本的功能的函数。唯一的区别是要为 div 着色的选择器，因此将其作为参数取出，您会得到

```
function setColor (divSelector) {
    var colour=$(this).css("background-color");
    $(divSelector).css("color", colour);
}); 
```

然后你会像这样使用它

```
$("div.box1").click(function () {
    setColor("div.first");
});
//...and so on for the following boxes 
```

您甚至可以比这更聪明，并根据`this`Eg 选择 divSelector 您可以使用 jQuery`.data()`连接 div。与使用`data-*`jQuerys 数据相比，旧浏览器也可以使用

这将允许您将代码更改为

```
function setColor () {
    var self = $(this);
    var colour=self.css("background-color");
    $("div." + self.data('toBeColoured')).css("color", colour);
}); 
```

或者`data-*`如果您只需要支持 HTML5 浏览器，请使用

然后就像下面这样使用它

```
$("div.box1").data('toBeColoured','first').click(setColor);
$("div.box2").data('toBeColoured','second').click(setColor);
$("div.box3").data('toBeColoured','last').click(setColor); 
```

顺便说一句，可以使用伪选择器选择第一、第二和最后一个，因此通常不需要基于排序的类

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-31T12:06:44.507

至少有两种方式：

**1）**使用选择器引擎选择多个元素并对其应用函数：

```
 $("div.box1, div.box2, div.box").click(function () {
    colour=$(this).css("background-color");
    $("div.first").css("color", colour);
}); 
```

**2）**有一个功能做的事情，不要重复自己（**干**）

```
 function applyColor() {
   colour=$(this).css("background-color");
   $("div.second").css("color", colour);
 }
 $("div.box1").click(function () {
   applyColor();
 });

 $("div.box2").click(function () {
   applyColor();
 });

 $("div.box3").click(function () {
   applyColor();
 }); 
```

# c# - 有没有进步 更新 UI 时等待/阻止

> ID：14625359
> 
> 赞同：2
> 
> 时间：2013-01-31T12:03:59.903
> 
> 标签：c#, .net-4.5, async-await, progress

所有，我有一个调用`IProgress<T>.Report();`来更新我的 UI 并进行相关数据选择的方法。后台线程随后通过与它一起工作的界面获取当前选择（在 UI 上）。因此，`IProgress<T>.Report();`在进行 UI 更新之前，调用会阻止返回，这一点很重要。[MSDN](http://msdn.microsoft.com/en-us/library/hh193864.aspx)没有提供有关该`Report();`方法这方面的信息...

***在委托完成之前，该方法是否会`Report();`阻止返回后台线程？`Report();`***

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:09:45.293

不，它没有。它[发布](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)- 而不是发送 - 到同步上下文。帖子是异步的。

请注意，这是一个实现细节。我是通过阅读代码了解到的，我不知道任何有关此的官方文档。

此外，`SynchronizationContext.Post`应该是异步的，但不能保证是异步的。例如，在 ASP.NET 中，可以直接调用委托，即同步^([参考：见图 4](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx))。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T13:33:50.043

这完全取决于`IProgress<T>`您正在使用的实现。如果您要使用内置的[`Progress<T>`](http://msdn.microsoft.com/en-us/library/hh193692.aspx)，则`Report()`不要等待委托/事件处理程序完成。

您可以创建自己的实现来执行`IProgress<T>`您想要的操作（最有可能调用[`SynchronizationContext.Send()`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)）并使用它。

但我不确定这是一个好的设计，我认为你的工作代码不应该依赖于必须在 GUI 线程上进行的计算。您可能需要考虑更改您的设计。

# rest - ExceptionStrategy 不适用于 JsonStrategy

> ID：14625360
> 
> 赞同：2
> 
> 时间：2013-01-31T12:04:04.233
> 
> 标签：rest, zend-framework2

我在这里报告了一个问题（[http://framework.zend.com/issues/browse/ZF2-379?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab#issue -标签](http://framework.zend.com/issues/browse/ZF2-379?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab#issue-tabs)）。有一个解决方案，但我不知道在哪里实施。任何人都可以帮忙吗？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:13:15.720

这是 JsonExceptionStrategy 的代码 - 把它放在某个地方，比如在一个模块中。

```
namespace YourNamespace;

use Zend\EventManager\EventManagerInterface;
use Zend\Mvc\Application;
use Zend\Mvc\View\Http\ExceptionStrategy;
use Zend\Mvc\MvcEvent;
use Zend\View\Model\JsonModel;

/**
 *
 * @since   1.0
 * @author  Tim Roediger <superdweebie@gmail.com>
 */
class JsonExceptionStrategy extends ExceptionStrategy
{

    /**
     * Attach the aggregate to the specified event manager
     *
     * @param  EventManagerInterface $events
     * @return void
     */
    public function attach(EventManagerInterface $events)
    {
        $this->listeners[] = $events->attach(MvcEvent::EVENT_DISPATCH_ERROR, array($this, 'prepareExceptionViewModel'), 100);
    }

    /**
     * Create an exception json view model, and set the HTTP status code
     *
     * @todo   dispatch.error does not halt dispatch unless a response is
     *         returned. As such, we likely need to trigger rendering as a low
     *         priority dispatch.error event (or goto a render event) to ensure
     *         rendering occurs, and that munging of view models occurs when
     *         expected.
     * @param  MvcEvent $e
     * @return void
     */
    public function prepareExceptionViewModel(MvcEvent $e)
    {
        // Do nothing if no error in the event
        $error = $e->getError();
        if (empty($error)) {
            return;
        }

        // Do nothing if the result is a response object
        $result = $e->getResult();
        if ($result instanceof Response) {
            return;
        }

        switch ($error) {
            case Application::ERROR_CONTROLLER_NOT_FOUND:
            case Application::ERROR_CONTROLLER_INVALID:
            case Application::ERROR_ROUTER_NO_MATCH:
                // Specifically not handling these
                return;

            case Application::ERROR_EXCEPTION:
            default:
                $exception = $e->getParam('exception');
                $modelData = array(
                    'message' => $exception->getMessage(),
                    'type' => get_class($exception)
                );

                if ($this->displayExceptions()){
                    $modelData['exception'] = $exception;
                }
                $e->setResult(new JsonModel($modelData));
                $e->setError(false);

                $response = $e->getResponse();
                if (!$response) {
                    $response = new HttpResponse();
                    $e->setResponse($response);
                }
                $response->setStatusCode(500);
                break;
        }
    }
} 
```

然后在 Module.php 中添加以下内容：

```
/**
 *
 * @param \Zend\EventManager\Event $event
 */
public function onBootstrap(MvcEvent $event)
{

    $application = $event->getTarget();
    $serviceManager = $application->getServiceManager();
    $config = $serviceManager->get('Config');

    // Config json enabled exceptionStrategy
    $exceptionStrategy = new JsonExceptionStrategy();

    $displayExceptions = false;

    if (isset($config['view_manager']['display_exceptions'])) {
        $displayExceptions = $config['view_manager']['display_exceptions'];
    }

    $exceptionStrategy->setDisplayExceptions($displayExceptions);
    $exceptionStrategy->attach($application->getEventManager());
} 
```

你可以走了！

# html - vimeo 视频停止播放时触发事件？

> ID：14625367
> 
> 赞同：29
> 
> 时间：2013-01-31T12:04:18.690
> 
> 标签：html, video, jquery, vimeo

我只是想知道，一旦 vimeo 视频播放完毕，是否可以触发事件？

目前，我在叠加层中嵌入了一个 Vimeo，一旦视频停止，我想将其删除。希望这是有道理的！

我真的没有任何可用的代码，但想知道您是否可以向视频添加事件侦听器，在视频完成后触发事件，以及您将如何执行此操作？

谢谢瑞恩

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-01-08T11:53:16.087

[自从 Vimeo 推出新的Video Player API](https://github.com/vimeo/player.js)以来，以前的答案现在已经过时了。

**重要提示：**请务必从 iframe 中的 URL 中删除*。*`?api=1`这是以前使用 Froogaloop 库时需要的，现在不再需要。如果你把它留在里面，'end'，'seeked' 和其他事件将永远不会触发。

包括新脚本：

```
<script src="https://player.vimeo.com/api/player.js"></script> 
```

然后使用以下示例：

```
$(document).ready(function(){

    var iframe = $('#container iframe');
    var player = new Vimeo.Player(iframe);

    player.on('ended', function() {
        console.log('Finished.');
    });

}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-10T10:13:17.047

首先，您需要在 HTML 中包含 Vimeo 的“Frogaloop 库的路径”（在您的 Jquery 包含之后）：

`<script src="https://f.vimeocdn.com/js/froogaloop2.min.js"></script>`

然后你需要嵌入你的 Vimeo 视频（同样在你的 HTML 中）：

`<iframe id="PLAYER1" src="https://player.vimeo.com/video/76979871?api=1&player_id=PLAYER1" width="630" height="354" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>`

这里 'api=1' 打开 api - 为了性能，默认情况下关闭。而且， player_id='PLAYER1' 是您的 iframe 的 id。

然后在您的 JavaScript 文件中，您需要以下内容：

```
$(function() {

    //Gets the iframe by id
    var iframe = $('#PLAYER1');
    //Creates a player var using the iframe
    var player = $f(iframe);

    // When the player is ready/loaded, add a finish event listener
    player.addEvent('ready', function() {
        //Adds an event 'finish' that executes a function 'onFinish' when the video has ended.
        player.addEvent('finish', onFinish);
    });

    //Define the onFinish function that will be called
    function onFinish(id) {
        console.log('THE VIDEO HAS FINISHED PLAYING');
    }

}); 
```

然后只需播放视频，并检查控制台输出。

[这是](https://developer.vimeo.com/player/js-api#universal-with-froogaloop)文档相应部分的链接。

感谢@Raptor 将我指向 api 文档。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T12:12:41.310

[http://developer.vimeo.com/player/js-api](http://developer.vimeo.com/player/js-api)

看看这个页面，尤其是事件监听器部分。如果您需要更多帮助，我相信我也可以在上面写一些代码？

# java - 使用带有 autocommit=true 的 jdbc 时回滚批处理执行

> ID：14625371
> 
> 赞同：2
> 
> 时间：2013-01-31T12:04:29.813
> 
> 标签：java, jdbc, prepared-statement

我使用 JDBC，自动提交 = true。在其中一项操作中，我正在使用准备好的语句进行批量插入。

```
public void executeBatchInsert(String query, List<Object[]> entityList)  {
        try {
            pstmt = conn.prepareStatement(query);
            for(int i=0; i<entityList.size(); i++) {
                int j=1;
                for(Object o: entityList.get(i)) {
                    pstmt.setObject(j++, formatColumnValue(o));
                }

                pstmt.addBatch();
                if((i+1)%1000 == 0) {
                    pstmt.executeBatch();
                }
            }
            pstmt.executeBatch();
        } catch (SQLException e) {
        }
    } 
```

如果我在执行它时遇到异常，当我关闭这个连接时，所有的锁都会被释放并发生回滚吗？

——B. Teja。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-11T01:48:42.723

你的问题的直接答案是：不。如果发生异常，您必须手动调用该`rollback`方法。在这样做之前，您`setAutoCommit`必须`false`. 默认情况下，自动提交设置为`true`. 将自动提交设置为`true`你不能做 a `rollback`，`exception`会发生告诉你这一点。

稍后不要忘记`autoCommit`返回，`true`否则您可能会使用其他方法获得不可预期的结果。

这是有关如何实现此功能的示例。这只是草图，您可能应该更多地注意如何处理`connection`,`prepared statment`等`exception`。

```
public void insertAndRollback(Connection connection) {
    try {
        final ArrayList parameters = new ArrayList();

        // Add your parameters to the arraylist
        parameters.add("John");
        parameters.add("Lee");
        parameters.add("Mary");
        parameters.add("Peter");
        parameters.add("Lewis");
        parameters.add("Patrick");

        final String parameterizedQuery = "insert into person (name) values (?)";

        final int batchSize = 5; // Set your batch size here
        int count = 0;
        int aux = 0;

        // Get the total number of '?' in the query
        int totalQueryParameters = Utils.countCharOccurrences(parameterizedQuery, '?');
        final int auxTotalQueryParameters = totalQueryParameters;

        final PreparedStatement preparedStatement = connection.prepareStatement(parameterizedQuery);

        // Auto Commit must be set to false
        connection.setAutoCommit(false);

        for(int i = 0; i < parameters.size(); i++)
        {
            Object obj = parameters.get(i);

            aux++;
            preparedStatement.setObject(aux, obj);

            if(totalQueryParameters == i + 1) { // Because the ArrayList starts from zero.
                // First query "parsed" - > Add to batch
                preparedStatement.addBatch();
                // One query has been added to the batch. Re-adapt the cycle.
                totalQueryParameters = totalQueryParameters + auxTotalQueryParameters;
                aux = 0;
            }

            if(++count % batchSize == 0) {
                preparedStatement.executeBatch();
            }
        }

        preparedStatement.executeBatch(); // insert remaining queries
        preparedStatement.close();
        connection.setAutoCommit(true); // Make it back to default.
    } catch (SQLException ex) {
        // Do the rollback
        doRollback(connection);

        try {
            // Make it back to default.
            connection.setAutoCommit(true);
        } catch (SQLException ex1) {
            ex1.printStackTrace();
        }

        // Dont forget to close the preparedStatement and the connection
        // if you don't need the connection open any more.

        ex.printStackTrace();
    }
}

private void doRollback(Connection c) {
    try {
        c.rollback();
    } catch (SQLException ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:45:11.620

事实上 PreparedStatement.executeBatch 并没有澄清这个问题，也许在其他地方，但我确信它不是原子操作，因为 SQL 没有批处理操作，所以 executeBatch 在数据库级别分别执行每个语句。我在 MySQL 上进行了测试：

t1 是具有 n1 INT(11) Not Null 列的空表，autocommit = true

```
 ResultSet rs1 = conn.createStatement().executeQuery("select count(*) from t1");
    rs1.next();
    System.out.println(rs1.getInt(1));

    String query = "insert into t1 (n1) values(?)";
    PreparedStatement ps = conn.prepareStatement(query);
    ps.setObject(1, 1);
    ps.addBatch();
    ps.setObject(1, null);
    ps.addBatch();
    try {
        ps.executeBatch();
    } catch (Exception e) {
        System.out.println(e);
    }

    ResultSet rs2 = conn.createStatement().executeQuery("select count(*) from t1");
    rs2.next();
    System.out.println(rs2.getInt(1)); 
```

它打印

```
0
java.sql.BatchUpdateException: Column 'n1' cannot be null
1 
```

也就是说，批次中有 2 个插入；第一次成功，第二次失败，仍然 t1 得到 1 行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:11:56.260

棘手的一个， `autocommit=true`强烈不推荐，执行批处理时。

话虽如此，我建议使用`getUpdateCount()`和构建逻辑来执行剩余的。

最后`commit`

# ios - ios动画延迟开始

> ID：14625388
> 
> 赞同：0
> 
> 时间：2013-01-31T12:05:13.400
> 
> 标签：ios, animation

只是想澄清一件事，在 iOS 动画中，在线程中开始，但在开始之前，它是否等待主 UI 线程完成。一旦动画开始，你可以同时在主线程中做任何事情。

```
[UIView transitionFromView:currentVisible
                                toView:reuseablView
                              duration:0.6
                               options:(UIViewAnimationOptionTransitionCurlUp|UIViewAnimationOptionShowHideTransitionViews)            
                            completion:^(BOOL finished) {
                                }
                            }];

[self callFunction1]; 
```

在这里，动画以非常小的延迟开始，我认为它等待 funcioin1 调用。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:36:50.417

当您调用 时`[self callFunction1]`，您正在阻塞主线程，因此任何动画都将停止（或者在这种情况下，尚未开始）。如果这是一个长时间运行的方法，您应该将其移至另一个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T15:02:51.027

动画应该在主线程上启动，尽管它实际上是在比您的应用程序访问的线程更高的线程上执行的，因此由于核心动画渲染服务器的工作方式，它仍然可以在阻塞时执行。确保您不要从某些网络代码中调用它。它在主线程上。如果第二种方法被阻止，动画可能会继续，但应用程序和触摸事件在被阻止时将不起作用。如果第二种方法阻塞的时间足够长，那么动画的延迟可能会导致它无法按时触发。但是一旦开始动画应该很好，即使下一个方法阻塞。我建议你不要阻塞主线程。如果您希望在动画之后调用该方法，它应该在完成块中。

最后为了证明这一点，您可以先调用动画，然后再调用睡眠。您的应用程序将无响应，但动画将继续。

# xcode - Xcode：构建失败，但没有错误消息

> ID：14625389
> 
> 赞同：195
> 
> 时间：2013-01-31T12:05:15.117
> 
> 标签：xcode, build

使用 Xcode 4.5.1。我们的项目在过去三个月一直在构建良好，但是突然，当我尝试构建时，它说“构建失败”，但在三角形感叹号选项卡上没有显示任何错误，也没有给出弹出的原因构建失败。

我们没有更改包标识符或任何其他项目属性。我尝试了干净，然后构建，但没有运气。

什么可能导致问题？

与[此问题](https://stackoverflow.com/questions/5363564/xcode-4-build-failed-no-issues)类似，但没有任何解决方案适用。

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2013-01-31T12:11:49.020

弄清楚了。在对话气泡中的三行选项卡上，它显示了构建日志。我猜我的故事板文件在最后一次 git pull 期间损坏了。

![](../Images/882473d6e2d0e34e064d6cb34577c9fa.png)

**对于 Xcode 12+** [![Xcode 12 工具栏的屏幕截图](../Images/400b070e0a0db07d8768ba94ab8be315.png)](https://i.stack.imgur.com/0cbvw.png)

* * *

## 回答 #2

> 赞同：206
> 
> 时间：2016-02-26T07:31:07.833

`Report Navigator`您可以在*导航器窗口*中查看当前失败的原因。

 **   `Hide/Show Navigator`通过按下Xcode 左上角的按钮打开 Navigator 。

[![截图 1](../Images/2444f8a78d7a8c26e80541a3edfdce37.png)](https://i.stack.imgur.com/uvmfF.png)

*   `Report Navigator`按导航器窗口中按钮列表上的最后一个按钮打开。

[![截图 2](../Images/2c7b29bc37449dee5df54c4be8e37660.png)](https://i.stack.imgur.com/eFzrx.png)

在这里您可以查看原因`By Group`或`By Time`

* * *

## 回答 #3

> 赞同：106
> 
> 时间：2016-11-17T22:05:54.023

单击 Xcode 窗口中最左侧面板顶部栏中的最后一个图标以显示秘密*存档*构建错误。

[![在此处输入图像描述](../Images/e98e509ceb9450b9dd67c6f9e84f3184.png)](https://i.stack.imgur.com/Mlo21.png)

如果您能够构建和运行应用程序，则可能与代码签名有关，但不能存档。进一步谷歌搜索你的错误消息应该可以解决这个问题，因为它已经被揭示了。

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2017-11-27T07:21:12.803

单击 Xcode 窗口中最左侧面板顶部栏中的最后一个图标，以显示“秘密”存档构建错误。我有为我解决的许可问题。

[![Xcode - 报告导航器](../Images/28903d297e6aae57f95cc52dad33f155.png)](https://i.stack.imgur.com/34aDu.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-13T23:24:35.917

如果您将构建系统更改为新系统，请更改回标准。它为我解决了。

[![构建系统](../Images/430d07d53c3ea692085ad4712dd6c1ed.png)](https://i.stack.imgur.com/eS1js.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-23T12:23:59.220

xCode 8 面临同样的问题，原因是我的 Apple Id 会话已过期，并且一旦我在偏好设置中使用我的 Apple id 登录，xCode 由于网络连接问题而无法更新它。我能够再次正常构建

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-21T15:24:33.747

可能没有剩余可用磁盘空间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-19T21:30:03.773

我同意杰森。你一定做错了什么。无法产生错误是 Xcode 的错误。只是回到你的道路上。打开您上次编辑/打开的屏幕。在我的情况下`;`，一个控制器中丢失了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-06-02T17:39:11.837

这发生在我写的`Swift 4.1`时候`XCode 9.3`。我`RxSwift`也用。在我写作的时候从来没有发生过`Objective C`。也没有任何登录`Report Navigator`。项目刚刚编译没有错误，然后失败。想不通为什么。

就我而言，我做了什么并且它有所帮助：

1.  在 Git 中提交更改，如果 XCode 在文件附近显示“M”，则丢弃更改
2.  清除派生数据：Xcode -> Preferences -> location
3.  清理构建文件夹：Shift + Cmd + Alt + K
4.  重启 XCode

在此项目尝试编译并显示错误之后。错误在这里：

```
do {
    let jsonData = try JSONSerialization.data(withJSONObject: timingsDict, options: .prettyPrinted)
    let decoder = JSONDecoder()
    let pTiming = try decoder.decode(PTiming.self, from: jsonData)
    observer.onNext(timing)
    observer.onCompleted()
} catch {
    print(error.localizedDescription)
    observer.onError(error)
} 
```

我在中传递了错误的变量名`observer.onNext(timing)`。它应该是`pTiming`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-04T20:01:27.647

其他答案帮助我找到了*报告导航器。*显示的唯一错误是：

> 构建操作失败，但未指定任何错误。个别构建任务可能因未知原因而失败。一个可能的原因是如果有太多（可能是僵尸）进程；在这种情况下，重新启动可能会解决问题。

我通过关闭模拟器解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-30T13:31:19.230

对我来说，这是我用于该方案的开发配置文件。我将其更改为发布并且它有效

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-11T21:25:35.903

如果“神奇”的 macOS 在启动后自动重启 XCode，这种情况也经常发生。该自动启动的 XCode 实例将被完全破坏。退出并重新启动。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-02T19:37:57.660

尝试下一个场景：

*   重启 Xcode
*   检查`.swift`具有测试功能的文件是否包含

```
import XCTest
class <name>Tests: XCTestCase {
    //...
} 
```

*如果您有`Cannot find viewcontroller in scope`错误 -> 从测试目标成员中删除类*

# jakarta-mail - SendMail 使用 Outlook 学分 Java

> ID：14625391
> 
> 赞同：1
> 
> 时间：2013-01-31T12:05:20.783
> 
> 标签：jakarta-mail

我想知道如何使用 Outlook Credits 发送邮件，而无需在 java 程序中输入主机、端口、用户名等其他详细信息。我使用了 desktop.mail() 但它打开了我不想打开的 mailInterface。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:33:20.773

使用类似的库

```
JWS,Jacob 
```

# c++ - 单例使用 C++

> ID：14625395
> 
> 赞同：0
> 
> 时间：2013-01-31T12:05:41.583
> 
> 标签：c++, singleton

不太确定以前是否有人问过这个问题。

语言是c++。我正在编写一个包含许多应该具有静态行为的数据项的类，例如一个 1 KB 的缓冲区，其中包含一些数据并且应该为所有对象共享。我的老板问我，你为什么不写一个单例类，把所有的数据项都放在里面呢？

我对单例有一些痛苦的经历，最近我在谷歌上搜索了“单例是邪恶的”并阅读了几篇文章。在 SO 中，我也读到了同样的内容。所以在上述情况下我有点犹豫是否使用单例，因为我相信那里并不真正需要它。所以我问我的老板，是否可以为所需的数据项设置静态数据成员，而不是使类单例？但他没有给我任何明确的答案，而是告诉我，设计模式的存在是为了让生活更轻松，那么使用它有什么问题。我不想和他争论。:)

我不是 OOP 专家。因此，如果有人可以评论谁的观点更有意义[以及两者是否都是错误的:)]，这将是有帮助的。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:15:55.360

单例本质上只是围绕全局变量的一些 OO 封装。

如果您将您的状态封装在某个类中，并将其作为静态成员添加到需要该信息的类中，那么您实际上与单例并没有太大区别，只是至少有两个缺点：

*   您排除与其他类共享该状态。
*   在简单的实现中，没有什么可以阻止任何人创建新类的另一个实例。如果这在语义上是无效的，则不应在代码中允许它，这意味着无论如何您都必须编写所有单例功能。

当然，只是在全局变量上添加一点单例魔法并不能解决全局状态的问题，从这个意义上说，单例是邪恶的™。但是在某些情况下，您的模型需要具有全局状态。在这些情况下，封装是一件好事，因为它允许您控制谁修改什么、何时以及如何修改。例如，您可以使单例工厂方法只能由某些类访问。

# python - python中的异常

> ID：14625405
> 
> 赞同：0
> 
> 时间：2013-01-31T12:06:01.370
> 
> 标签：python, exception, exception-handling, error-handling

我对python很陌生，所以我有一个非常简单的疑问。这是我的代码：

```
a=sri

try:
    print a
except Exception:
    print 'you have not put quotes for string'
else:
    print 'dont know what error it is' 
```

如何为此编写手动异常/错误处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:08:06.343

需要处理错误的代码应该写在`try`子句中。该`except`子句是您编写如何处理可能的异常的地方。

```
try:
    a=sri
    print a
except Exception:
    print 'you have not put quotes for string' 
```

更多关于[python 文档](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)`try`的声明。

> try 语句的工作方式如下。
> 
> *   首先，执行 try 子句（try 和 except 关键字之间的语句）。
> *   如果没有发生异常，则跳过 except 子句并完成 try 语句的执行。
> *   如果在 try 子句执行期间发生异常，则跳过该子句的其余部分。然后如果它的类型与以 except 关键字命名的异常匹配，则执行 except 子句，然后在 try 语句之后继续执行。
> *   如果发生与 except 子句中指定的异常不匹配的异常，则将其传递给外部 try 语句；如果没有找到处理程序，则它是一个未处理的异常，并且执行停止并显示如上所示的消息。

# javascript - keydown 事件不适用于 jquery mobile 中的输入类型搜索

> ID：14625409
> 
> 赞同：1
> 
> 时间：2013-01-31T12:06:11.740
> 
> 标签：javascript, jquery, html, jquery-mobile, keydown

我想为 jquery mobile 中的输入类型搜索调用 keydown 事件。下面是我的html代码。

```
 <!DOCTYPE html>
<html>
 <head>
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Insert title here</title>
<link rel="stylesheet" href="jquery.mobile-1.2.0.min.css">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {      
    $("#search1").keydown(function() {
        alert("keydown");           
        $("#search1").css("background-color", "yellow");
    });
    $("#search1").keyup(function() {
        alert("keyup");
        $("#search1").css("background-color", "pink");
    });
});
</script>
<script type="text/javascript" src="jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
<div data-role="page">

<div data-role="content">
<input type="search" id="search1">
<input type="text" id="text1">
</div>
</div>
</body>
</html> 
```

除了搜索类型之外，所有其他输入类型都会触发 keydown 事件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-28T12:20:12.183

## 包含 jQuery Mobile 文件

您需要做的只是在您的项目中包含一个 jQuery 文件。一个名为 jQuery.mobile.js 或任何版本的非常相似的文件（例如 jQuery.ui.js）可以为您提供帮助。

您可以从：[jQuery Mobile Official |下载。下载](https://jquerymobile.com/download/) 我建议使用

> 解析客户端网址

同时给出路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:14:10.967

从`docs`发现这个：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

`Important: Use $(document).on('pageinit'), not $(document).ready()`

```
$(document).on( 'pageinit',function(event){
    $("#search1").keydown(function() {
        alert("keydown");           
        $("#search1").css("background-color", "yellow");
    });
    $("#search1").keyup(function() {
        alert("keyup");
        $("#search1").css("background-color", "pink");
    });
}); 
```

试试这个，看看它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:14:34.113

你的代码在这里工作检查：JS Fiddle

[**小提琴**](http://jsfiddle.net/RFu3b/)

```
:) 
```

# c++ - 是否可以使 std::string 始终包含小写字符串？

> ID：14625416
> 
> 赞同：6
> 
> 时间：2013-01-31T12:06:29.673
> 
> 标签：c++, string, boost, stl

是否可以使 std::string 始终包含小写字符串？这是我将如何使用它：

```
typedef std::basic_string<...> lowercase_string;

void myfunc()
{
  lowercase_string s = "Hello World"; // notice mixed case
  printf(s.c_str());                  // prints "hello world" in lowercase
  std::string s2 = s;
  printf(s2.c_str());                 // prints "hello world" in lowercase
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T12:15:10.293

您可以编写自己的 char 特征并将其`std::basic_string`作为第二个模板参数传递。

这是一个*最小的*例子：

```
template<typename T>
struct lowercase_char_traits : std::char_traits<T>
{
    static T* copy(T* dest, const T* src, std::size_t count )
    {
         for(size_t i = 0 ; i < count ; ++i)
              dest[i] = std::tolower(src[i]);
         return dest;
    }
    static void assign(T & out, T in)
    {
       out = std::tolower(in);
    }
    //implement other overload of assign yourself

    //note that you may have to implement other functionality 
    //depending on your requirement
}; 
```

然后将 typedef 定义为：

```
typedef std::basic_string<char, lowercase_char_traits<char>> lowercase; 
```

这是一个测试程序：

```
int main() 
{
    lowercase s1 = "Hello World";
    std::cout << s1.c_str() << std::endl;

    lowercase s2 = "HELLO WORLD";
    std::cout << std::boolalpha << (s1 == s2) << std::endl;

    lowercase s3 = "HELLO";
    s3 += " WorL";
    s3.append("D");
    std::cout << std::boolalpha << (s1 == s3) << std::endl;

    std::cout << s2.c_str() << std::endl;
    std::cout << s3.c_str() << std::endl;
} 
```

输出：

```
hello world
true
true
hello world
hello world 
```

酷，不是吗？

*   [在线演示](http://stacked-crooked.com/view?id=fe8cb26feb52998e3a3ef6c8fcf2677a)

* * *

请注意，要拥有一个完全工作的小写字符串类，您*可能还*需要定义其他功能`lowercase_char_traits`，具体取决于您希望从此类中获得什么行为。

请查看 Herb Sutter 精彩文章了解详细信息和解释：

*   [所以你想要一个不区分大小写的字符串类？如果你选择接受它，你的任务就是写一个。](http://www.gotw.ca/gotw/029.htm)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:08:01.543

`std::string`本身没有。

有各种替代方案，或多或少优雅，或多或少利弊。让我试着比较一下

## 封装

可能是最干净的解决方案：创建一个包含 std::string 的类，该类可以采用执行转换的 ctor 和分配。

*   问题：std::sting 有超过一百种方法：如果您希望您的类公开所有方法...准备编写所有软管函数只是为了调用包装的函数。这是一个干净的“生产力问题”，似乎没有 OOP 狂热者照顾......可能是由键入的字符支付...... :-)
*   优点：运行时多态（std::string 不支持）不会意外工作，因此代码更安全。

## “部分”换行

和以前一样，但只涉及一些重要的方法或需要一些显式编码。

一个典型的实现可以是：

可：

```
class llstring
{
public:
    //just esplicitate a default
    llstring() :m() {}

    //this wors for all the std::string contructors but the ones specifically defined here
    template<class T, class... TT>
    llstring(T&& t, TT&&... tt) :m(std::forward<T>(t), std::forward<TT>(tt)...)
    {}

    // copy and move defaulted: just call the memebr ones
    llstring(const llstring&)=default;
    llstring(llstring&&) =default;

    //impose conversion
    llstring(const std::string& s) :m(lowercase(s)) {}
    llstring(const char* s) :m(lowercase(s)) {}

    //assign and transfer defaulted
    llstring& operator=(const llstring&)=default;
    llstring& operator=(llstring&&)=default;

    //impose conversion
    llstring& operator=(const std::sting& s) { m = lowercase(s); return *this; }
    llstring& operator=(const char* s) { m = lowercase(s); return *this; }

    //gets the "value"
    const std::string& str() const { return m; } 

private:
    std::string m;
}; 
```

此类本身无法进行任何算法和操作，但可以`std::string`通过调用`str()`. 并且可以接受任何 std::string 结果，通过转换获得。

可能是重新编码和维护风险之间的良好折衷

## 继承

std::string 作为基础，而不是成员。代码与上面类似（您必须提供一种在构造或分配上进行转换的方法）

*   优点：原始 std::string 的接口和行为是自动公开的，因此所有 std::string 方法都可以工作并且可以访问。

*   中性：从 std::string 向前（通过设计）和向后（通过基本继承）转换都有效。这可能会导致某些可能无法通过 llstring 的操作出现歧义。本身不是问题，但您必须了解函数名称解析和绑定是如何完成的。语言是明确指定的，但它是任何普通程序员并不总是知道的语言之一。

*   缺点： llstring 公开了一个关于 std::string 的多态行为，它不会在多态方面表现出 llstring 的行为（没有方法是虚拟的，包括析构函数），因此你绝不能在 std::string* 上调用 delete （它是未定义的行为，如果它指向一个'llstring`）。

考虑到`llstring`和 string 都是*值类型*，这通常不应该发生（30 年来我从未写过一个`new std::string`or `delete pstring`）。但这无论如何都会抓住 OOP 狂热者的所有咆哮，他们假装经典的 OOP 规则也适用于 string-s，即使它们不是 OOP 对象。

但是还有另一个-恕我直言更微妙的风险：在 llstring 和 string 之间的复合表达式中，所有中间结果都将是 string。并且中间操作不会在两者之间转换。所有这些都是隐含的。同样，语言规范定义明确，但控制一切可能并不容易。对尚未分配的中间结果的搜索可能会失败......因为内部意外的大写字母。

## 反向转换

不完全是你问的，但是......可能会更好地解决问题。

而不是“在返回目的地时转换”，而是“在离开源时转换”：

编写一个包装器（如上面的“部分扭曲”），它不是**从**字符串隐式转换并具有显式 str() 函数，而是从字符串显式构造（即使没有转换）并具有隐式转换**为**字符串 ( `operator std::string() { return lowercase(m); }`)

这与您所要求的相反。如果允许存在大写字符串的点的数量很少尊重程序中的总字符串（您可以假设始终为小写）并且如果您可以授予您可以实现的所有 std::string 操作，那将是很好的小写字符串值永远不会生成大写字符串。

## 编辑：char_traits 解决方案

[在Nawaz 帖子](https://stackoverflow.com/a/14625577/924727)之后添加：

该解决方案尝试通过使 char 遵守另一种语义来改变**行为**（而不是**value ）。**

*   优点：简单，不需要大包装。快速编码。
*   缺点：可能不完全符合预期：由于 std::string 函数都是可访问的，并且由于复制可能不是更改字符串内容的唯一方法，因此（在任何情况下）您都不会被授予大写字符它。除非您可以授予该副本，否则该副本将是更改字符串值的唯一方法。

注意：就像 一样`string`，也`char_traits`没有虚拟析构函数，但是，与字符串不同，没有 OOP 狂热者通常会大喊从它的继承。如果被问到，很可能会说“char_traits 上不会有动态分配”。再见连贯性。

## 综上所述

没有“低成本”的“完美解决方案”。他们都在某个阶段不完美

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:32:25.210

您可以使用私有继承。这将使您免于编写一堆包装器方法。

```
class lower_case_string : private std::string
{
    // define constructors that do the conversion to lower case
    // ...

    // expose functionality from std::string
    using std::string::size;
    using std::string::length;
    using std::string::cbegin;
    // etc.

    // Make sure NOT to expose methods that allow modification as they
    // could violate your invariant that all characters are lower case.
    // E.g., don't expose std::string::begin, instead write your own.
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:08:19.857

您必须在类周围创建一个包装器（正如 Chad 在评论中提到的那样，更好地使用组合），在其构造函数中将每个字符转换为其较低版本。不幸`std::string`的是，不能开箱即用。或者，创建您自己的函数来打印字符串，或者在打印之前将字符串转换为小写。

# android - 检测用户何时将数据输入edittext立即显示答案

> ID：14625423
> 
> 赞同：15
> 
> 时间：2013-01-31T12:06:51.057
> 
> 标签：android, android-layout, android-emulator

如何检测一个字符是否输入到 EditText 中，使其长度为 0 到 1 个字符，然后执行一些操作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T12:13:57.627

既然你有一个相当抽象的问题，让我尝试一个同样通用的答案：

在你的`onCreate()`, 声明并转换你的`EditText`

```
EditText editText = (EditText) findViewById(R.id.editText);
editText.addTextChangedListener(filterTextWatcher); 
```

然后，**在外部**，`onCreate()`设置`filterTextWatcher`如下：

```
private TextWatcher filterTextWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // DO THE CALCULATIONS HERE AND SHOW THE RESULT AS PER YOUR CALCULATIONS

        int radius = 0;
        radius = Integer.valueof(s.toString);
        double area = Math.PI * radius * radius;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}; 
```

**编辑：**

更新了可能计算的代码。（*未经测试的代码：我只是在没有测试的情况下输入了它。在必要时修改*）

在此处阅读有关[TextWatcher 的更多信息](http://developer.android.com/reference/android/text/TextWatcher.html)

这里有一些示例可以帮助您入门：

1.  [http://www.android-ever.com/2012/06/android-edittext-textwatcher-example.html](http://www.android-ever.com/2012/06/android-edittext-textwatcher-example.html)
2.  [http://www.cybernetikz.com/blog/android-textwatcher-example/](http://www.cybernetikz.com/blog/android-textwatcher-example/)
3.  [http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=22b00052-dad0-4e09-a07e-b74f115ab247](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=22b00052-dad0-4e09-a07e-b74f115ab247)
4.  [http://myandroidsolutions.blogspot.in/2012/06/android-edittext-change-listener.html](http://myandroidsolutions.blogspot.in/2012/06/android-edittext-change-listener.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T12:09:00.710

您可以在 EditText 上使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)并立即处理您想要对用户输入数据执行的任何操作。

这是用户输入数据时立即格式化的示例

```
final EditText EditTxtFinancialCode = (EditText) findViewById(R.id.edtNewCpFinancialCode);

    EditTxtFinancialCode.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            String a = "";
            boolean flag = true;
            String eachBlock[] = EditTxtFinancialCode.getText().toString().split("-");
            for (int i = 0; i < eachBlock.length; i++) {
                if (eachBlock[i].length() > 4) {
                    flag = false;
                }
            }
            if (flag) {

                EditTxtFinancialCode.setOnKeyListener(new OnKeyListener() {

                    @Override
                    public boolean onKey(View v, int keyCode, KeyEvent event) {

                        if (keyCode == KeyEvent.KEYCODE_DEL)
                            KeyDel = 1;
                        return false;
                    }

                });

                if (KeyDel == 0) {

                    if (((EditTxtFinancialCode.getText().length() + 1) % 5) == 0) {

                        if (EditTxtFinancialCode.getText().toString().split("-").length <= 2) {
                            EditTxtFinancialCode.setText(EditTxtFinancialCode.getText() + "-");
                            EditTxtFinancialCode.setSelection(EditTxtFinancialCode.getText().length());
                        }

                    }
                    a = EditTxtFinancialCode.getText().toString();
                } else {
                    a = EditTxtFinancialCode.getText().toString();
                    KeyDel = 0;
                }

            } else {
                EditTxtFinancialCode.setText(a);

            }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }
        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T12:14:37.640

[http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)

做一个听众。

```
 myTextBox.addTextChangedListener(new TextWatcher() {

   public void afterTextChanged(Editable s) {
   }

   public void beforeTextChanged(CharSequence s, int start, 
     int count, int after) {
   }

   public void onTextChanged(CharSequence s, int start, 
     int before, int count) {
   TextView myOutputBox = (TextView) findViewById(R.id.myOutputBox);
   myOutputBox.setText(s);
   }
  }); 
```

见[http://www.mysamplecode.com/2012/06/android-edittext-text-change-listener.html](http://www.mysamplecode.com/2012/06/android-edittext-text-change-listener.html)

# c# - 应用程序的 C# 时间延迟

> ID：14625427
> 
> 赞同：3
> 
> 时间：2013-01-31T12:07:06.047
> 
> 标签：c#, timer, delay

我目前正在开发一个应用程序，我想实现一个时间延迟。我不想使用 System.Threading.Thread.Sleep(x); 当我读到这个时，线程会停止（UI 冻结）

我目前写的代码是：

```
public void atimerdelay()
{
    lblStat.Text = "In the timer";
    System.Timers.Timer timedelay;
    timedelay = new System.Timers.Timer(5000);
    timedelay.Enabled = true;
    timedelay.Start();
} 
```

我知道 atimerdelay() 确实被调用（使用 lblStat），但它们没有 5 秒的延迟。我已阅读[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)但我无法弄清楚为什么上面的代码不起作用。

附加信息 - （为 Hamlet Hakobyan 添加）

该应用程序是一个“卡片检查器”应用程序（大学项目 - 没有使用或存储真实信息）。一旦用户填写了所有相关信息并单击“检查”，就会调用验证方法列表。在调用其中任何一个之前，执行 ping 以确保计算机上有实时 Internet 连接。我想在 ping 和验证开始之间添加一点延迟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T12:09:02.833

怎么样：

```
await Task.Delay(5000) 
```

? 它不会阻塞 UI 线程，看起来还不错！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:08:17.990

我永远不会忘记[这个精彩的片段](http://www.vcskicks.com/loop-time.php)。它适用于 Windows 窗体应用程序，并且比创建`Timer`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T20:09:42.043

搜索延迟功能（不使用*Sleep*）后，我发现了这个

```
public static DateTime PauseForMilliSeconds(int MilliSecondsToPauseFor)
{
    System.DateTime ThisMoment = System.DateTime.Now;
    System.TimeSpan duration = new System.TimeSpan(0, 0, 0, 0, MilliSecondsToPauseFor);
    System.DateTime AfterWards = ThisMoment.Add(duration);

    while (AfterWards >= ThisMoment)
    {
        System.Windows.Forms.Application.DoEvents();
        ThisMoment = System.DateTime.Now;
    }

    return System.DateTime.Now;
} 
```

它完美运行，经过测试`.NET 4.0`。也许这对其他人有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:11:07.990

您可以使用 a`System.Timers.Timer`在时间间隔过后触发事件。它们对于简单地延迟执行没有用。

如果您在`timedelay.Elapsed += delayedFunction;`代码中添加了：，那么 `delayedFunction`将在 5 秒后被调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:56:59.527

> 一旦用户填写了所有相关信息并单击“检查”，就会调用验证方法列表。在调用其中任何一个之前，执行 ping 以确保计算机上有实时 Internet 连接。我想在 ping 和验证开始之间添加一点延迟。

最好的做法是，您所有长时间的任务都在单独的线程中完成。如果你有`.NET 4.0+`，你可以使用`Task`（[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)）。如果您的任务与您交互，`UI`则可以使用[基于事件的异步模式（](http://msdn.microsoft.com/en-us/library/wewwczdw.aspx)如果不可`TPL`用）。

具体一下`Ping`可以用`Ping.SendAsync`。请检查[帖子](https://stackoverflow.com/questions/13458210/ping-over-a-period-of-time/13458382#13458382)以获取更多详细信息。

尝试这些并返回新的、更有趣的问题。

# security - 撤销超级用户的连接

> ID：14625430
> 
> 赞同：0
> 
> 时间：2013-01-31T12:07:18.673
> 
> 标签：security, postgresql, roles, privileges

有没有办法从服务器上定义为超级用户的角色撤销数据库的连接（或最好是所有）权限？在开发服务器上，我们有几个数据库——其中一个是共享的，但其余的应该只由一个开发人员拥有，其他人没有连接权限。目前，所有开发人员都是具有登录选项的超级用户。

```
CREATE ROLE dev_name LOGIN
  ENCRYPTED PASSWORD '...'
  SUPERUSER INHERIT CREATEDB CREATEROLE REPLICATION; 
```

我试图通过多种方式做到这一点：

```
REVOKE CONNECT ON DATABASE test_db FROM dev_name;
revoke select on all tables in schema public from dev_name; 
```

然后当我检查时：

```
SELECT * FROM has_database_privilege('dev_name', 'test_db', 'connect'); 
```

仍然返回 true。

我尝试了解决方法并将连接限制更改为另一个值，但即使我第一次登录超级用户仍然可以连接：

```
 CONNECTION LIMIT = 1; 
```

那么，也许有机会在不弄乱 pg_hba 或放弃其他开发人员的超级用户状态的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:12:57.133

不，您需要从这些开发人员那里删除超级用户身份。

手册中的相关引用：

*   [访问数据库](http://www.postgresql.org/docs/current/static/tutorial-accessdb.html)

    > 成为超级用户意味着您不受访问控制的约束

*   [创建角色](http://www.postgresql.org/docs/current/static/sql-createrole.html)

> 这些子句确定新角色是否是“超级用户”，他可以覆盖数据库内的所有访问限制

# ruby-on-rails - 允许用户评论帖子，不能批量分配帖子

> ID：14625431
> 
> 赞同：0
> 
> 时间：2013-01-31T12:07:20.250
> 
> 标签：ruby-on-rails

我是编程新手，我正在努力解决我在我的应用程序中实现的新功能。我希望用户能够评论别人的微博。

我收到错误消息：无法批量分配微帖

用户模型：

```
attr_accessible :name, :email, :password, :password_confirmation #is this secure with password there?
attr_protected :admin   #attr_protected necessary?
has_many :microposts, dependent: :destroy
has_many :comments, :through => :microposts, dependent: :destroy 
```

微贴模型：

```
attr_accessible :comment #basically the content of the post
attr_protected :user_id
has_many :comments, dependent: :destroy 
```

评论型号：

```
attr_accessible :content, :micropost
belongs_to :user
belongs_to :micropost
validates :user_id, presence: true
validates :micropost_id, presence: true
validates :content, presence: true
default_scope order: 'comments.created_at ASC'   #is this necessary? 
```

评论控制器：

```
def create
  @micropost = Micropost.find_by_id(params[:id])   #is this necessary?
  @comment = current_user.comments.create(:micropost => @micropost)
  redirect_to :back
end 
```

用户控制器：

```
def show
  @user = User.find_by_id(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
  @micropost  = current_user.microposts.build
  @comments = @micropost.comments
  @comment = current_user.comments.create(:micropost => @micropost) #build, new or create??
end 
```

View/comments/_form:(这个部分在每个微博结束时调用）

```
<span class="content"><%= @comment.content %></span>
<span class="timestamp">Said <%= time_ago_in_words(@comment.created_at) %> ago.</span
<%= form_for(@comment) do |f| %>
  <%= f.text_field :content, placeholder: "Say Something..." if signed_in? %>
<% end %> 
```

路线：

```
resources :users 
resources :microposts, only: [:create, :destroy] 
resources :comments, only: [:create, :destroy] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:11:51.507

你应该把你的属性 microposts 放在 attr_accessible

```
attr_accessible :content, :micropost 
```

默认情况下，所有属性都是不可访问的。您必须在 attr_accessible 上定义您的可访问属性。

更多信息[在这里](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-accessible_attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:28:26.177

JMarques 是正确的，但我喜欢使用`_id`on`attr_accessible`来保持它的一致性。考虑到这一点，您可以使用

```
 # comment.rb
 attr_accessible :content, :micropost_id

 # controller
 current_user.comments.create(:micropost_id => @micropost.try(:id)) 
```

只是在那里添加了一个`try`以防万一`find_by_id`退货`nil`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T08:05:13.223

根据 rails4 你可以使用强参数：

```
 def create
      @micropost = Micropost.find_by_id(micropost_params)
     ................

    end

   private
    def micropost_params
    params.require(:micropost).permit(:id)
    end 
```

# c# - 取消长时间运行的 Rx 流

> ID：14625438
> 
> 赞同：3
> 
> 时间：2013-01-31T12:07:39.113
> 
> 标签：c#, system.reactive

如果我有一个长时间运行的流，例如：

```
inputStream.Select(n => Task.Run(() =>
{
    // Long running operation
    Thread.Sleep(TimeSpan.FromSeconds(5));

    return n * n;
}).ToObservable())
.Switch()
.Subscribe(result => 
{
    // Use result in some way
    Console.WriteLine(result);
}); 
```

如何在`Task.Run`调用中获取 CancellationToken，以便在`Switch`处理飞行中计算的订阅时，它将 CancellationToken 设置为已取消，以便我知道中止计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:34:43.207

您可以使用该`Observable.StartAsync`方法，例如

```
inputStream.Select(n => Observable.StartAsync((token => Task.Run(() =>
{
    if (token.IsCancellationRequested)
    {
        // .. don't need to do anything
        return 0;
    }
    else
    {
        Thread.Sleep(TimeSpan.FromSeconds(1));
        return n * n;

    }                   
}))))
.Switch()
.Subscribe(Console.WriteLine); 
```

或者，如果您要生成多个值，则可以使用与之一起使用的`Observable.Create`重载`Task`来获取 CancellationToken。例如

```
inputStream.Select(n => Observable.Create<int>((observer, token) => Task.Run(() =>
{
    while (!token.IsCancellationRequested)
    {
        Thread.Sleep(TimeSpan.FromSeconds(1));
        observer.OnNext(n * n);
    }

    observer.OnCompleted();
})))
.Switch()
.Subscribe(Console.WriteLine); 
```

在您的任务内部，您需要调用`OnNext`以产生值。任务的返回值（如果有）将被忽略。

# javascript - jquery小滚动条显示问题

> ID：14625441
> 
> 赞同：1
> 
> 时间：2013-01-31T12:07:46.050
> 
> 标签：javascript, jquery, jquery-ui, scrollbar

我正在使用以下微型滚动条插件[http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)将滚动应用于我体内的 div。以下是html内容：

以下是html结构：

```
 <div id="scrollbar1">
    <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
  <ul>

    <li> 
           Rated
      4 hours ago 
    </li>

    <li> 
      Rated 
      6 hours ago 
    </li>

    <li> 
      upvoted 
      6 hours ago 
    </li>

  </ul>
  </div> 
```

然后javascript看起来像这样：

```
$(funciton(){
$('#scrollbar1').tinyscrollbar();
}); 
```

小提琴是[http://jsfiddle.net/sk9SE/2](http://jsfiddle.net/sk9SE/2)

问题是我没有得到想要的效果。有人可以告诉我它有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:30:10.257

您还没有包含您的视口或概览 div - 它们是滚动所必需的

这是一个固定版本：

```
<div id="scrollbar1">
<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
<div class="viewport">
    <div class="overview">
      <ul>
         <li> Rated 4 hours ago </li>
         <li> Rated 2 hours ago </li>
         <li> Rated 5 hours ago </li>
         <li> Rated 44 hours ago </li>
         <li> Rated 4665 hours ago </li>
         <li> Rated 124 hours ago </li>
         <li> Rated 124 hours ago </li>
     </ul>
    </div>
</div> 
```

**[工作演示](http://jsfiddle.net/sk9SE/4/)**

# alpha-five - MSsql的级联下拉菜单不级联

> ID：14625445
> 
> 赞同：1
> 
> 时间：2013-01-31T12:07:58.503
> 
> 标签：alpha-five

嗨，伙计们，

我正在尝试设置一些级联下拉列表来过滤 AlphaFive V11 中的数据

我有一个填充了不同类别的 SQL 表，并且没有级联：下拉列表中填充了预期的所有数据（类别、组、子组）

但是，当我勾选“级联”并设置父级时，下拉菜单无法填充，事实上，“显示未找到选择的值”文本也没有显示。

在 Chrome 的控制台中查看时，当我从第一个（非级联下拉列表）中选择一个项目时，会显示以下错误：

```
Uncaught TypeError: Cannot read property 'length' of undefined a5.js:8450 
```

奇怪的是，我在页面中尝试了一个以前工作的组件，它在该页面上给出了相同的错误，但在它最初开发的地方工作。

关于如何使这些事情发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:41:26.547

找到了问题 - 并为那些可能关注的人提供了解决方法！

当使用 ajax 下拉菜单时，Alpha 会尝试加载它自己的 jQuery 和 jQuery UI。为了克服冲突：从谷歌加载jQuery而不是内置，从而强制它以无冲突模式加载。

然后手写jQuery需要用jQuery替换$符号。

# sql - 如何从表中删除重复的添加日志？

> ID：14625446
> 
> 赞同：2
> 
> 时间：2013-01-31T12:08:00.907
> 
> 标签：sql, sql-server, tsql, duplicate-removal

我有一个日志表，其中包含多行添加状态（“ `status = 0`”表示“添加”）。

怎么去掉`status = 0`但是必须是不重复的值。例如，每个事务 id (tid) 必须只有一个带有 的值`status = 0`。

例如;

```
id tid       tblname           type     status 
1   101     x                   U              0
2   101     x                   U              0
3   102     x                   U              0
4   102     x                   U              0
5   102     x                   U              0 
```

必须返回：

```
id  tid     tblname       type           status 
1   101     x            U              0
3   102     x            U              0 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:11:04.757

使用 cte 和`ROW_NUMBER`：

```
WITH x AS (SELECT rn = Row_number() 
                       OVER( 
                         partition BY tid 
                         ORDER BY id) 
         FROM   dbo.log
         WHERE  status = 0 
                AND tblname = 'X' 
                AND type = 'U') 
DELETE FROM  x 
WHERE  rn > 1 
```

# wpf - DockPanel 子项自动宽度

> ID：14625452
> 
> 赞同：0
> 
> 时间：2013-01-31T12:08:18.293
> 
> 标签：wpf, dockpanel

我有这个 Dockpanel：

```
<DockPanel x:Name="sp_colJournees" Margin="10,110,10,10" Dock="Left" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/> 
```

我尝试添加一些孩子：

```
for (int i = 0; i < 7; i++)
{
    var a = new ColJournee(DateTimeConvert.IntToDay((int) _debutCalendar.AddDays(i).DayOfWeek), _debutCalendar.AddDays(i).ToShortDateString());
    sp_colJournees.Children.Add(a);
} 
```

输出：

![](../Images/4a2d585dfa73c0d8a39b687aff93f33b.png)

但我想要 7 个宽度相同的孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:16:37.700

您可以为此使用 ProportionalPanel。[这](http://www.alecbryte.com/post/2009/01/16/WPF-Proportional-Panel.aspx)是一个比例面板的实现。

# mysql - mysqldump 仅当数据库可用时

> ID：14625454
> 
> 赞同：0
> 
> 时间：2013-01-31T12:08:20.280
> 
> 标签：mysql, mysqldump

要从我使用的 mysql 数据库中获取转储，

```
mysqldump -u root -p my_db --databases --add-drop-database  --no-data --skip-triggers   >> ./mydump 
```

它工作正常并创建转储。但是现在我想要的是在创建转储文件之前我想检查数据库是否可用，并且只有在数据库可用时才创建转储文件。

有没有办法在创建转储之前进行检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:13:33.007

```
DBAVAILABLE="$(mysql -u root -p[pass] -Bse 'show databases like "required_db"')"

if [ "$DBAVAILABLE" == "" ]; then
    echo "Database not available locally!";
    echo
    exit
fi

mysqldump -u root -p my_db --databases --add-drop-database --no-data --skip-triggers >> ./mydump 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:00:58.700

脚步 ：

```
1\. first check u r databases files are stored in mysql folder or not...
2.get that file names using shell script
3.store the file name to array...
4.use for loop and if condition to dump db 
```

# wcf - WCF 客户端端点

> ID：14625456
> 
> 赞同：1
> 
> 时间：2013-01-31T12:08:32.053
> 
> 标签：wcf, workflow-foundation-4, endpoint

我有一个正常工作的 WCF 服务，我无法更改。但是在我的客户端（基于工作流）我希望地址是动态的，所以我所做的是创建一个新的 TestCustomEndpoint ，例如

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Configuration;
using System.ServiceModel.Description;
using System.Web;

namespace WorkflowService1
{
    public class TestEndpoints : ServiceEndpoint
    {
        public TestEndpoints(ContractDescription contract)
            : base(contract)
        {
            this.Binding = new NetTcpBinding();
            ResetBindingConfiguration(this.Binding);
            this.IsSystemEndpoint = false;
        }
        private void ResetBindingConfiguration(dynamic binding)
        {
            binding.SendTimeout = TimeSpan.FromMinutes(5);
            binding.MaxReceivedMessageSize = Int32.MaxValue;
            binding.MaxBufferSize = Int32.MaxValue;
        }
    }

    public class TestEndpointsElementCollectionElement :
            StandardEndpointCollectionElement<TestEndpoints,
              TestEndpointsElement>
    {
    }

    public class TestEndpointsElement : StandardEndpointElement
    {
        protected override ServiceEndpoint CreateServiceEndpoint(ContractDescription contractDescription)
        {
            return new ServiceEndpoint(contractDescription);
        }

        protected override Type EndpointType
        {
            get { return typeof(TestEndpoints); }
        }

        protected override void OnApplyConfiguration(ServiceEndpoint endpoint, ServiceEndpointElement serviceEndpointElement)
        {
            endpoint.Address = new System.ServiceModel.EndpointAddress("http://foo/bar/Automation.svc");
        }

        protected override void OnApplyConfiguration(ServiceEndpoint endpoint, ChannelEndpointElement channelEndpointElement)
        {
            endpoint.Address = new System.ServiceModel.EndpointAddress("http://foo/bar/Automation.svc");
        }

        protected override void OnInitializeAndValidate(ServiceEndpointElement serviceEndpointElement)
        {
        }

        protected override void OnInitializeAndValidate(ChannelEndpointElement channelEndpointElement)
        {
        }
    }
} 
```

我的 web.config 如下所示

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

    <appSettings>
        <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    </appSettings>
    <system.web>
        <compilation debug="true" strict="false" explicit="true" targetFramework="4.5" >
        </compilation>
        <httpRuntime targetFramework="4.5"/>
    </system.web>
    <system.serviceModel>
        <extensions>
            <endpointExtensions>
                <add name="TestCustomEndpoint" type="WorkflowService1.TestEndpointsElementCollectionElement,WorkflowService1" />
            </endpointExtensions>
        </extensions>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IProjectConfigurationsService" />
                <binding name="BasicHttpBinding_IAutomation"/>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint
              binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IAutomation" kind="TestCustomEndpoint"
              contract="IAutomation" name="BasicHttpBinding_IAutomation" />
        </client>
        <behaviors>
            <serviceBehaviors>
                <behavior>
                    <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
                    <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
                    <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                    <serviceDebug includeExceptionDetailInFaults="false"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <protocolMapping>
            <add binding="basicHttpsBinding" scheme="https" />
        </protocolMapping>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />

    </system.serviceModel>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>

</configuration> 
```

但是当我使用其中一项活动调用工作流模板时，出现以下错误。

```
Invalid endpoint type for endpoint extension configuration object.  This endpoint extension manages configuration of endpoint type 'WorkflowService1.TestEndpoints, WorkflowService1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' and cannot act upon type 'System.ServiceModel.Description.ServiceEndpoint, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'." (System.ArgumentException) 
```

我的问题是：是否可以覆盖端点类型以使用我的自定义端点而不更改服务端点绑定。

# php - 为什么 mySql 只返回字符串的第一个单词？

> ID：14625471
> 
> 赞同：0
> 
> 时间：2013-01-31T12:09:13.783
> 
> 标签：php, html, mysql

我有以下代码：

```
 $sql = "SELECT * FROM `galleryCategory`";
        $result = $db->query($sql);
        while($row = mysql_fetch_array($result)){
                  echo "<div title = {$row['category_title']}>";
                  echo "</div><br />";
        } 
```

输出应该是（例如）“ **bmw 3 series** ”。
**这真的让我看到了一个词“宝马”**

获取完整字符串需要什么？
谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:10:19.593

缺少标题属性的引号

```
echo '<div title = "'.$row['category_title'].'">';
echo '</div><br />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:10:08.033

问题不在于 MySQL，而在于您在 HTML 中定义属性的方式。

代替

```
echo "<div title = {$row['category_title']}>"; 
```

和

```
echo "<div title=\"{$row['category_title']}\">"; 
```

或（更具可读性）

```
echo '<div title="'.$row['category_title'].'">'; 
```

# c# - 通过 ODBC 调用存储过程而不声明参数占位符

> ID：14625472
> 
> 赞同：1
> 
> 时间：2013-01-31T12:09:20.307
> 
> 标签：c#, mysql, string, odbc, procedure

我目前正在尝试通过`ODBC`创建一个需要过程名称作为字符串以及一组键和值作为字典的函数来抽象存储过程的调用。正因为如此，我必须为它建立一个字符串`ODBC Command`……是的，很傻。

```
CALL myProcedure(?, ?, ?, ?) 
```

然后使用 ODBC 命令对象：

```
odbcCommand.Parameters.AddWithValue("key", "param"); 
```

现在为了添加参数，我可以轻松地做一个`foreach`. 甚至是带有`Select`. 但是我还必须创建`CALL`带有问号的-string，我必须小心这样的事情永远不会发生：

```
CALL myProcedure(?, ?, ?, ) 
```

所以我必须在字典中循环一次以添加参数，第二次将键和值连接到字符串（`String.Join`），或者我用`FOR`-loop 循环所有内容，并且必须检查当前`KeyValuePair`是否是最后一个以防止在字符串末尾意外逗号。

有没有一种方法可以让我声明“ `CALL myProcedure`”甚至类似的东西

```
odbcCommand.CommandType = CommandTypes.StoredProcedure;
odbcCommand.ProcedureName = "myProcedure";
[LOOP]
     - add Params damn comfortable
[/LOOP] 
```

我希望有..它会帮助我减少因为废话而需要的额外步骤！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T20:43:43.090

添加参数后，使用以下命令：

```
int paramCount = odbcCommand.Parameters.Count();
string[] placeholders = Enumerable.Repeat("?", paramCount).ToArray();
string callParams = String.Join(", ", placeholders); 
```

然后，您不再需要小心避免 CALL 字符串中引用的尾随逗号。（我意识到这并不能完全回答您消除占位符的问题。）

# bouncycastle - OpenPGP 签名是否包含签名者的用户 ID？

> ID：14625474
> 
> 赞同：1
> 
> 时间：2013-01-31T12:09:35.673
> 
> 标签：bouncycastle, openpgp

我有一个签名的公钥。我想查看这个 OpenPGP 公钥中的所有签名。

我有签名列表，当我尝试获取签名者的用户 ID 时，没有返回任何内容。

所以我怀疑 OpenPGP 签名是否包含签名者的用户 ID。

我使用 Thunderbird 查看签名，但它也显示未找到用于签名的用户 ID，当我导入与我签名的私钥对应的公钥时，它显示签名者的用户 ID。

我的结论是 OpenPGP 签名不包含签名者的用户 ID。它们仅包含密钥 ID。如果您也有签名者的公钥，那么它会尝试从该公钥中获取用户 ID 并显示给您。

注意：我使用的是充气城堡 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:15:43.430

签署另一个密钥（无论此密钥的 UID）时，从您的密钥中包含的所有内容都是密钥 ID。

Thunderbird 尝试将该密钥 ID 解析为密钥的默认 UID，但这仅在公钥位于 Thunderbird 的密钥环中时才有效。

如果要在自己的软件中解析 UID，则必须拉取密钥的 ID 并寻找匹配的公钥。

> 所以我的结论是 Pgp Signature 不包含签名者的用户 ID。它只包含keyid。如果您也有签名者的公钥，那么它会尝试从该公钥中获取用户 ID 并向您展示。

是的，这是唯一的方法。

# javascript - 我需要更改嵌套在另一个 div 中的第 n 个 div 的 css 属性

> ID：14625482
> 
> 赞同：0
> 
> 时间：2013-01-31T12:10:01.860
> 
> 标签：javascript, jquery, html, css

我需要在一个 3x3 的矩阵中排行，并且在每个包装 div 框之后我需要显示一条垂直线。如果我将我的代码放在循环的中继器控制中以从代码生成它，那么这会产生另一个问题，它会在每个框后添加垂直线。

我试图用类名隐藏第 3、6、9 个 div，`horizontal-line`这样垂直线就不会出现。

我不确定如何更改下面的脚本来更改里面的第 n 个元素

`Content-area`div 或类

`$('.content-area .horizontal-line:nth-child(6n+1)').css('display', 'none');`

我正在寻找关于[jsFiddle的 jquery 解决方案（更新）示例](http://jsfiddle.net/tkbxR/2/)

```
<div id="content-area">
    <div class="article-wrapper">
        <div id="article">
            <div id="title"></div>
           <div id="details"></div>
        </div>
    </div>
    <div class="horizontal-line"></div>  

    <div class="article-wrapper">
        <div id="article">
            <div id="title"></div>
           <div id="details"></div>
        </div>
    </div>
    <div class="horizontal-line"></div>  

    <div class="article-wrapper">
        <div id="article">
            <div id="title"></div>
           <div id="details"></div>
        </div>
    </div>
    <div class="horizontal-line"></div>  

        <div class="article-wrapper">
        <div id="article">
            <div id="title"></div>
           <div id="details"></div>
        </div>
    </div>
    <div class="horizontal-line"></div>  

    <div class="article-wrapper">
        <div id="article">
            <div id="title"></div>
           <div id="details"></div>
        </div>
    </div>
    <div class="horizontal-line"></div>  
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:14:25.013

[像这样？](http://jsfiddle.net/cjtgL)

```
.content-area .horizontal-line:nth-child(3n){
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:13:26.037

content-area 不是一个类。

利用`#content-area`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:16:14.703

```
$('#content-area .horizontal-line:nth-child(3n)') 
```

是到达那里的方法

# php - 我应该使用控制器参数还是 uri->segment？

> ID：14625486
> 
> 赞同：8
> 
> 时间：2013-01-31T12:10:24.450
> 
> 标签：php, codeigniter

应该使用控制器参数

```
function view($post_id) {
    ...
} 
```

或 uri->segment

```
function view() {
    ...
    $post_id = $this->uri->segment(3);
    ...
} 
```

仅用于简单的博客文章 ID。有区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T12:14:56.843

我会使用控制器参数。

然后，如果您不得不移动代码并将其放在子目录中，它仍然可以工作，而段方法则不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:18:15.637

**不**，在这种情况下没有区别。尽可能使用 Controll 参数。它允许您更多地处理路由并移动控制器文件。

如果您希望使用 uri，请考虑使用，`$this->uri->rsegment(3);`因为它允许您绑定路由而不影响 rsegment。

CodeIgniter 最棒的地方在于，您喜欢哪种解决方案取决于您。我更喜欢使用参数，因为它可以让我快速了解 url 中的值如何影响函数，而无需查看函数；我看到顶部的值。

如果您害怕创建错误消息，请考虑将其设置为

```
function view($post_id = NULL) {
    ...
} 
```

反而。如果您访问没有`post_id`.

# php - 从使用 elastica 进行弹性搜索的查询过滤器开始

> ID：14625491
> 
> 赞同：1
> 
> 时间：2013-01-31T12:10:51.567
> 
> 标签：php, rest, elasticsearch, elastica

我有一个适用于 web 应用程序的弹性搜索搜索实现，但我被困在最后一个细节上。我希望能够按字母顺序过滤某些字段。因此，如果我查询“d”，它应该为该字段带回所有以“d”开头的内容。目前这就是我所拥有的：

```
$elasticaQueryString = new Elastica_Query_QueryString();
$elasticaQueryString->setDefaultField('Name');
$elasticaQueryString->setQuery('d'.'*'); 
```

它适用于只有一项工作的领域，即“丹”。但是如果有多个单词，那么它会返回每个关键字的结果。即“丹瑞安”，“瑞安丹”。我也尝试了通配符和前缀查询，但它们给出了相似的结果。

我需要创建一个自定义分析器还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:30:50.400

我将首先在映射级别解决这个问题。关键字标记器将使您​​的整个字段成为单个标记，然后添加小写过滤器将使所有内容小写...使字段不区分大小写：

```
"analysis":{
    "analyzer":{
       "analyzer_firstletter":{
          "tokenizer":"keyword",
          "filter":"lowercase"
     }
 } 
```

插入一些数据后，这就是索引的内容：

```
$ curl -XGET localhost:9200/test2/tweet/_search -d '{
   "query": {
      "match_all" :{}
    }
  }' | grep title

    "title" : "river dog"
    "title" : "data"
    "title" : "drive"
    "title" : "drunk"
    "title" : "dzone" 
```

请注意条目“river dog”，这是您要避免匹配的条目。现在，如果我们使用`match_phrase_prefix`查询，您将只匹配以 'd' 开头的那些：

```
 $ curl -XGET localhost:9200/test2/tweet/_search -d '{
    "query": {
       "match_phrase_prefix": {
          "title": {
             "query": "d",
             "max_expansions": 5
          }
        }
      }
    }' | grep title

   "title" : "drive"
   "title" : "drunk"
   "title" : "dzone"
   "title" : "data" 
```

这不是 Elastica 特有的，但它应该很容易转换为适当的命令。重要的部分是`keyword`+`lowercase`分析器，然后使用`match_phrase_prefix`查询。

作为旁注，通配符非常慢，最好尽可能避免:)

# c# - Windows Phone 中的标签栏

> ID：14625499
> 
> 赞同：1
> 
> 时间：2013-01-31T12:11:22.800
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我构建了我的第一个 Windows Phone 应用程序，我在其中一个应用程序上看到了一些非常好的东西，我添加了一个屏幕截图：

![在此处输入图像描述](../Images/973f140bc2899a8d02b927bf70d958a5.png)

描述是：绿色-图标蓝色-文本框黄色-页面

它有点像全景，但这里的图标（带有文本）一直在顶部，并且，按下其中一个跳转（带有动画）到所选页面，当然如果用户滑动它移动到下一页的页面，并且图标被突出显示。

它有点像 UITabBarController，我想知道我是如何实现这个控件的？它是内置的，如果是的话，它的名字是什么？或任何好的教程如何构建它。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:15:17.800

[看起来您需要名为Pivot](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941098%28v=vs.105%29.aspx)的内置控件

您可以更改 Header 模板以在其中放置一个图标：

```
 <controls:Pivot x:Name="pivot"
                    Title="{Binding Name}"          
        <controls:Pivot.HeaderTemplate>
            <DataTemplate>
                <StackPannel>
                    <Image Source="your icon path">
                    <TextBlock Text="{Binding}" />
                </StackPannel>
            </DataTemplate>
        </controls:Pivot.HeaderTemplate> 
```

# javascript - IE 6 - PNG 修复 - 空白图像

> ID：14625500
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:24.743
> 
> 标签：javascript, jquery, internet-explorer-6, iepngfix

我正在使用以下代码来修复 IE6 的 PNG 问题（是的，我们确实有一些访问者使用 IE6 :() ... 代码似乎用空白图像替换了 .png 图像，但似乎没有运行过滤器正确...任何想法为什么它可能会失败？谢谢

```
 var blank = new Image();
         blank.src = 'img/blank.gif';
         $(document).ready(function() {
           var badBrowser = (/MSIE ((5\.5)|6)/.test(navigator.userAgent) && navigator.platform == "Win32");
           if (badBrowser) {
               //alert('bad browser');
             // get all pngs on page
             $('img[src$=".png"]').each(function() {
               if (!this.complete) {
                 this.onload = function() { fixPng(this) };
               } else {
                 fixPng(this);
               }
             });
           }
         });

         function fixPng(png) {
           // get src
           var src = png.src;
           // set width and height
           if (!png.style.width) { png.style.width = $(png).width(); }
           if (!png.style.height) { png.style.height = $(png).height(); }
           // replace by blank image
           png.onload = function() { };
           png.src = blank.src;
           // set filter (display original image)
           png.runtimeStyle.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + src + "',sizingMethod='scale')";
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:40:53.957

一个可能的实际答案给你，毕竟评论说不要打扰做任何事情：

大多数剩余的 IE6 用户都在由于某种原因无法升级的公司中。

可能无法升级，但他们中的大多数人都清楚 IE6 存在的主要安全问题，并尽可能地降低风险。

减轻 IE6 风险的一项关键措施是禁用浏览器运行 ActiveX，至少对于外部 Internet 上的站点（其内部 Intranet 站点上的 ActiveX 插件通常是它们无法升级的原因之一）。

您会注意到该`filter`样式使用 ActiveX 来发挥它的魔力。

因此，如果 ActiveX 被禁用，则意味着`filter`样式将不起作用。这会破坏你的 pngfix。（它还破坏了许多其他东西，包括大多数 Ajax 代码，因此这些用户通常会有非常糟糕的互联网体验）。

值得重申的是，对于关闭 ActiveX 的 IE6 用户，PNG 错误没有其他解决方法。如果您的用户处于这个位置，那么解决它的唯一方法就是回到 2001 年并改用 GIF。

您可以尝试其他一些 png 修复脚本 - 其中有很多，我知道有些比其他的效果更好 - 但在一天结束时，我会回到我原来的评论并建议离开IE6 用户的图形渲染中断。无论如何，他们的互联网体验将被打破，如果一个网站完全可用，那将是一个奖励；一些渲染故障不会让他们失望。

# json - Internet Explorer 中的 JQuery 表单 JSON 响应数据 NULL

> ID：14625501
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:24.360
> 
> 标签：json, internet-explorer, spring-mvc, jquery-forms-plugin

我正在使用[Malsup 的 JQuery Form 插件](http://malsup.com/jquery/form/)和 Spring MVC 来做一些 Ajax 查找。

我遇到了 IE 问题（惊喜）。

Javascript代码：

```
var options = {
    type: "POST",
    cache: false,
    success: displayList,
    error: errorList,
    url: 'test.jsp',
    dataType: 'json'
};

$('form').ajaxSubmit(options);

function displayPolicyList(responseText, statusText, xhr, $form)
{
    alert(responseText); // Works in all browsers
}

function errorList(xhr, ajaxOptions, thrownError)
{
    alert(xhr.responseText); // Fine in firefox etc, NULL in IE
} 
```

弹簧代码：

```
@ResponseBody
public ResponseEntity<Map<String, String>> erroResponse()
{
    Map<String, String> error = new TreeMap<String, String>();

    error.put("error", message);

    HttpHeaders responseHeaders = new HttpHeaders();
    responseHeaders.setContentType(MediaType.TEXT_PLAIN);

    return new ResponseEntity<Map<String, String>>(error, responseHeaders,
                                              HttpStatus.INTERNAL_SERVER_ERROR);
} 
```

成功后，所有浏览器都可以正常工作。我可以毫无问题地读取和解析 JSON 响应。当我在 JSON 响应中返回 500 和错误消息时，就会出现问题。在 firefox、chrome 等中，一切正常，errorList 可以解析 JSON 响应。

然而，在 IE 中，JSON 为空。我可以在 JQuery Form 插件中看到我收到相同的跨源错误（**无法访问响应文档：TypeError: Access is denied.** ），详细信息如下：

[访问被拒绝。关于 IE 中的 jquery.form.js](https://stackoverflow.com/questions/12933868/access-is-denied-on-jquery-form-js-in-ie)

但是，我没有访问跨域，因为它是单个应用程序。

在 JQuery Plugin 中，似乎是问题的块是：

```
function getDoc(frame) {
        var doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;
        return doc;
    } 
```

当我从控制器返回 HttpStatus.CREATED 时，它工作正常，但是来自服务器的任何失败事件都会导致上述函数抛出异常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:18:10.787

我收到了相同的错误消息，因为我的响应包含以下 http 标头：

```
X-Frame-Options: DENY 
```

删除它或将标题值更改为 SAMEORIGIN 为我解决了这个问题。

更多阅读：http: [//blog.mozilla.org/security/2010/09/08/x-frame-options/](http://blog.mozilla.org/security/2010/09/08/x-frame-options/)

# android - ACRA 在 CrashReports.csv 文件中不显示任何内容

> ID：14625503
> 
> 赞同：2
> 
> 时间：2013-01-31T12:11:29.470
> 
> 标签：android, logcat, acra

我已经在我的项目中集成了 ACRA 并遵循[了这些](http://code.google.com/p/acra/wiki/ACRAHowTo)步骤。

我正在使用 ACRA 4.4.0.jar。

按照说明，这是我的代码 ::

**MyApplication 类 ::**

```
@ReportsCrashes(formKey="XXX-XXX-XXX") 

public class MyApplication extends Application
{
    @Override
    public void onCreate() 
    {
        ACRA.init(this);
        super.onCreate();
        // The following line triggers the initialization of ACRA
        System.out.println("~~~~~~~~~~ACRA Init Called");
    }
} 
```

**MainActivity.java**

```
public class MainActivity extends Activity implements OnClickListener
{
    TextView txt_main;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //txt_main=(TextView)findViewById(R.id.txtView);
        txt_main.setOnClickListener(this);
    }
    @Override
    public void onClick(View v)
    {
        switch (v.getId()) 
        {
        case R.id.txtView:
            Toast.makeText(this,"This is test",Toast.LENGTH_SHORT).show();

        default:
            break;
        }
    }
} 
```

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.acar_demo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_LOGS" />

<application
    android:name=".MyApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

现在，当我运行项目来测试 ACRA 时，我在 logcat 中得到以下信息::

```
 01-31 17:22:02.647: D/ACRA(18067): ACRA is enabled for com.example.acar_demo, intializing...
01-31 17:22:02.667: D/ACRA(18067): Using default Report Fields
01-31 17:22:02.667: D/ACRA(18067): Looking for error files in /data/data/com.example.acar_demo/files
01-31 17:22:02.667: I/System.out(18067): ~~~~~~~~~~ACRA Init Called
01-31 17:22:02.777: D/AndroidRuntime(18067): Shutting down VM
01-31 17:22:02.777: W/dalvikvm(18067): threadid=1: thread exiting with uncaught exception (group=0x40a7e228)
01-31 17:22:02.777: E/ACRA(18067): ACRA caught a RuntimeException exception for com.example.acar_demo. Building report.
01-31 17:22:02.897: W/Settings(18067): Setting data_roaming_allowed has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:02.897: W/Settings(18067): Setting data_roaming_blocked has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:02.897: W/Settings(18067): Setting data_roaming_guard_allowed has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:02.907: W/Settings(18067): Setting data_roaming_guard_blocked has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.388: W/Settings(18067): Setting sms_roaming_guard_allowed has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.408: W/Settings(18067): Setting voice_roaming_allowed has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.408: W/Settings(18067): Setting voice_roaming_blocked has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.418: W/Settings(18067): Setting voice_roaming_guard_allowed has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.418: W/Settings(18067): Setting voice_roaming_guard_blocked has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.438: W/Settings(18067): Setting vzw_global_roaming_options has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
01-31 17:22:03.588: I/ACRA(18067): READ_LOGS granted! ACRA can include LogCat and DropBox data.
01-31 17:22:03.598: D/ACRA(18067): Retrieving logcat output...
01-31 17:22:03.688: D/ACRA(18067): Writing crash report file 1359633123000.stacktrace.
01-31 17:22:03.728: D/ACRA(18067): About to start ReportSenderWorker from #handleException
01-31 17:22:03.728: D/ACRA(18067): Mark all pending reports as approved.
01-31 17:22:03.728: D/ACRA(18067): Looking for error files in /data/data/com.example.acar_demo/files
01-31 17:22:03.728: D/ACRA(18067): #checkAndSendReports - start
01-31 17:22:03.728: D/ACRA(18067): Looking for error files in /data/data/com.example.acar_demo/files
01-31 17:22:03.728: I/ACRA(18067): Sending file 1359633123000-approved.stacktrace
01-31 17:22:03.738: D/ACRA(18067): Waiting for Toast + worker...
01-31 17:22:03.798: D/ACRA(18067): Sending report 7bdf15b3-f216-459d-9ba8-a24592514742
01-31 17:22:03.798: D/ACRA(18067): Connect to https://docs.google.com/spreadsheet/formResponse?formkey=AAAAAA
01-31 17:22:03.868: D/dalvikvm(18067): GC_CONCURRENT freed 1457K, 34% free 3113K/4707K, paused 1ms+2ms
01-31 17:22:03.888: D/ACRA(18067): Sending request to https://docs.google.com/spreadsheet/formResponse?formkey=AAAAAA
01-31 17:22:03.898: I/global(18067): In close() at SocketHttpClientConnection
01-31 17:22:09.484: W/ResponseProcessCookies(18067): Invalid cookie header: "Set-Cookie: NID=67=bIAU_L4bnC06IFZrF4dN9nx2xvdfOQOb2CdfLBJk6T6Wgu0AfrXUor9DiioPcgVnw7e8yeS-lJHJ7Wj8r1SEz0iCczKR6B6VKYmoe9AeybcHaHs1xXStcsPv6SQ0KwfG;Domain=.google.com;Path=/;Expires=Fri, 02-Aug-2013 11:50:33 GMT;HttpOnly". Unable to parse expires attribute: Fri
01-31 17:22:09.494: D/ACRA(18067): #checkAndSendReports - finish
01-31 17:22:09.574: D/ACRA(18067): Wait for Toast + worker ended. Kill Application ? true
01-31 17:22:09.574: E/AndroidRuntime(18067): FATAL EXCEPTION: main
01-31 17:22:09.574: E/AndroidRuntime(18067): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.acar_demo/com.example.acar_demo.MainActivity}: java.lang.NullPointerException
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.os.Looper.loop(Looper.java:156)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.ActivityThread.main(ActivityThread.java:4987)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at java.lang.reflect.Method.invokeNative(Native Method)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at java.lang.reflect.Method.invoke(Method.java:511)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at dalvik.system.NativeStart.main(Native Method)
01-31 17:22:09.574: E/AndroidRuntime(18067): Caused by: java.lang.NullPointerException
01-31 17:22:09.574: E/AndroidRuntime(18067):    at com.example.acar_demo.MainActivity.onCreate(MainActivity.java:19)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.Activity.performCreate(Activity.java:4538)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
01-31 17:22:09.574: E/AndroidRuntime(18067):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
01-31 17:22:09.574: E/AndroidRuntime(18067):    ... 11 more 
```

ACRA 说（在 Logcat 中） :: 发送报告**7bdf15b3-f216-459d-9ba8-a24592514742**

检查此屏幕截图，特别是最后一行 ::

![在此处输入图像描述](../Images/f4c1f6deb325e41f8ce5ae3e07d153f3.png)

根据 logcat 的说法，Google Docs 已成功收到该报告。

现在，每当我检查 CrashReport.csv 文件以检查（匹配）时，崩溃错误都会向我显示这个 ::

![在此处输入图像描述](../Images/76ab7ecd85d4387013d8d1bc61069819.png)

所以我错过了什么？

**第二个问题**如何检查单个崩溃条目？例如，如果我的谷歌文档中有 5 个崩溃条目（考虑每个条目都是针对单个崩溃错误），那么如何检查每个条目？
我认为`CrashReport.csv`包含关于最后一个条目的日志而不是整个日志。如果我错了，请纠正我:)

任何帮助/建议将不胜感激:) 提前致谢... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:43:08.693

经过多次尝试，我终于成功并得到了我想要的。最后我发现我犯了非常非常愚蠢的错误。

我该如何解决这个问题::

首先注意您的`CrashReports-Template.csv`.

现在在创建页面时，您只需像这样添加这个项目（我之前没有添加，我刚刚创建了空表单，这是我的错误）::

![在此处输入图像描述](../Images/e674c3e6e592de53fdda738b21300012.png)

最后我得到了我想要的这样的输出::

![在此处输入图像描述](../Images/cbfdeee1b1b8c75efa83d4adb147383c.png)

在这里，每个条目都已记录，我可以检查每个条目及其 logcat 和其他信息。

希望这对其他人有帮助:)

# google-maps-api-3 - 计算两点之间距离的方法

> ID：14625505
> 
> 赞同：2
> 
> 时间：2013-01-31T12:11:31.880
> 
> 标签：google-maps-api-3

> **可能重复：**
> [计算谷歌地图V3中两点之间的距离](https://stackoverflow.com/questions/1502590/calculate-distance-between-two-points-in-google-maps-v3)

哪一种是使用 Google Map V3 API 计算两点之间距离的最佳方法？

1.  使用谷歌的距离矩阵
2.  `computeDistanceBetween()`在命名空间中定义的方法`google.maps.geometry.spherical`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:53:52.157

(#2) computeDistanceBetween() 返回直线距离，要获得行驶距离，请使用 (#1) 距离矩阵或 (#3) Google Maps API v3 [Directions Service](https://developers.google.com/maps/documentation/javascript/directions)，请参阅文档以获取示例

[参考](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)

# centos - Cairo 在 Centos 上使用单一字体系列渲染文本

> ID：14625506
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:32.170
> 
> 标签：centos, cairo

作为涉及节点和节点画布的项目的一部分，必须在 Centos 6.2 上编译 cairo，绘图指令一切正常，但是当我渲染文本时，似乎只使用了一个“默认”字体系列。最初我认为它是一个节点画布问题，但后来我做了一个小 C 程序调用 cairo 指令，我仍然看到同样的问题。

我应该包括任何依赖项或编译选项吗？我尝试使用 fc-list 输出中的各种字体。

C代码：

[http://pastebin.com/FhB2UZ5j](http://pastebin.com/FhB2UZ5j)

输出：

[http://i46.tinypic.com/14d22co.png](http://i46.tinypic.com/14d22co.png)

使用的版本：

开罗：1.10.2，pixman：0.22.0

# python - Python - 在两个远程服务器之间传输文件，执行 python 脚本

> ID：14625509
> 
> 赞同：5
> 
> 时间：2013-01-31T12:11:34.477
> 
> 标签：python, paramiko

我正在尝试在两台服务器之间从 a 复制文件`localServer`，比如从`server-A`to `server-B`。我在 python 中使用 paramiko 包。

所以有三台服务器，即`localServer`、`server-A`和`server-B`。请参阅下面的代码，这是不言自明的，请让我知道我哪里出错了。

我正在使用的算法：

1.  我正在尝试`paramiko_test.py`从`localServer`.
2.  `paramiko_test.py`中执行`copy.py`文件`server-A`。
3.  `copy.py`将文件`source.txt`文件复制`server-A`到`server-B`使用 SFTP。

当我从 运行`copy.py`时`server-A`，它工作正常。但是当我`paramiko_test.py`从`localServer`（间接执行）运行`copy.py`时`server-A`，它不起作用！

从日志中，我知道从`server-A`to连接成功`server-B`，但之后 SFTP 部分无法正常工作！

**问题：**我们可以在 SFTP 客户端中调用 SFTP 客户端吗？有没有更好的方法在两台服务器之间复制文件？

请帮助我哪里出错了。

**服务器-A，文件：copy.py：**

```
import paramiko

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('<server-B-IP>', username='serverB', password='passwd')

print "connected successfully!"

sftp = ssh.open_sftp()
print sftp
sftp.put('source.txt','/home/serverB/destination.txt' )
sftp.close()
print "copied successfully!"

ssh1.close()
exit() 
```

**本地服务器，paramiko_test.py：**

```
import paramiko

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('<server-A-IP>', username='serverA', password='passwd')

print "connected successfully!"

stdin, stdout, stderr = ssh.exec_command("python /home/username/copy.py")

print stdout.readlines()

print "copied successfully!"

ssh.close()
exit() 
```

的输出`stderr.readlines()`是：

```
Traceback (most recent call last):
 File "/home/sitaram/sumanth/test_progs/copy.py", line 12, in <module>
 sftp1.put('./sumanth_temp.txt','/home/ncloudadmin/sumanth.txt' ) 
 File "/usr/lib/pymodules/python2.6/paramiko/sftp_client.py", line 558, in put
 file_size = os.stat(localpath).st_size
OSError: [Errno 2] No such file or directory: './sumanth_temp.txt' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-05T13:40:12.367

问题已经存在一年了，所以可能不再相关，但也许对其他人有用。问题出在您的 copy.py 中。

```
sftp.put('source.txt','/home/serverB/destination.txt' ) 
```

source.txt 位于哪里？提供完整路径，或者如果文件始终位于与 copy.py 相同的目录中，您可以修改 paramiko_test.py

```
ssh.exec_command("cd /home/username/; python /home/username/copy.py") 
```

# c++ - C++模板解析错误

> ID：14625510
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:34.680
> 
> 标签：c++, parsing, templates, parse-error

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我`test`在类中有一个静态模板方法，`A`它采用单个`bool`模板参数。当我尝试像这样调用函数时：

```
x = A::test<true>(...); 
```

解析器抱怨，因为它将 视为`<`小于运算符。我如何告诉编译器这是一个模板实例化而不是一个小于运算符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:13:15.757

```
A::template test<true>(...); 
```

阅读[我必须在哪里以及为什么要放置“模板”和“类型名”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:13:48.297

`template`关键字消除了歧义。

```
x = A::template test<true>(...); 
```

# javascript - 在 IE 中等待服务器端代码时加载动画

> ID：14625511
> 
> 赞同：2
> 
> 时间：2013-01-31T12:11:36.757
> 
> 标签：javascript, jquery, internet-explorer

我试图在用户等待调用服务器时显示加载动画。为此，我尝试使用 JQuery 显示一个 div，但它仅适用于 Firefox（不适用于 IE 或 Chrome）。

现在，BigSlowFuncCall 只有 ac#`System.Threading.Thread.Sleep(10000);`

JAVASCRIPT

```
function showloading() {
  $('#content').hide();
  $('#siteLoader').show();
}

function hideloading() {
  $('#content').show();
  $('#siteLoader').hide();
}

function CheckFields() {
   showloading();

   var jsHandler = new JsonHandler();
   jsHandler.BigSlowFuncCall();

   hideloading();
} 
```

HTML

```
<div id="wrapper">
    <div id="siteLoader" style="display:none;" > 
        <div id='siteDetailLoader'> 
            <img src='img/loading.gif' border='0' alt='cargando'> 
            Por favor, espera<br /> <br /> 
        </div>
    </div> 

    <div id="content">
        <form>
          <p>
              /* Stuff */
          </p>
          <p class="submit"><input type="button" id="btn" onclick="CheckFields()" class="button-link" value="Descargar"/></p>    
        </form>
</div><!-- #content-->

</div><!-- #wrapper --> 
```

这在 Firefox 上按预期工作（隐藏内容，显示加载动画，10 秒后隐藏加载动画），但在 IE 中，它仅显示我是否退出该`hideloading()`函数并且仅在退出 CheckFields 函数后显示。

这么简单的代码怎么能在 Firefox 上正常工作，但在 IE 上却不行？

编辑：我看到如果我在它`alert()`之后放置一个`showloading()`完美的作品。所以，我搜索并发现了这个：[在 javascript dom 操作后强制在 Internet Explorer 中刷新 DOM](https://stackoverflow.com/questions/1397478/forcing-a-dom-refresh-in-internet-explorer-after-javascript-dom-manipulation)。我试过这个[https://stackoverflow.com/a/4271996/1824011](https://stackoverflow.com/a/4271996/1824011)但它也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:15:59.390

也许它会帮助你；

```
function checkFileds()
{
    var overlay = jQuery('<div id="overlay" align="center"><img src="images/preloader_bajaj.gif" width="125" height="125"  style="margin-top:300px" /> </div>');
    overlay.appendTo(document.body)

.......your code.......

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:16:17.643

你错过了什么吗？隐藏函数中的 $ 符号丢失。IE 对这种类型的错误非常敏感。更正代码并尝试一下。

# jquery - Increment variable names within jQuery each

> ID：14625512
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:37.083
> 
> 标签：jquery, each

Inside "myFunction", I have an `each()` iterator which finds the height of certain elements. How can I assign each height value to an incrementally generated variable name, accessible outside the each loop?

```
function myFunction(){

    $('#div1, #div2 ... #divN').each(function(index){
        /* Increment variable name here */ = $(this).outerHeight();
    });

    // Also use those variables here

}; 
```

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:15:20.723

This task is better solved with an [array](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Predefined_Core_Objects#Array_Object), and thanks to jQuery's built-in methods, you can easily extract certain values from a set of elements to an array:

```
var heights = $('#div1, #div2 ... #divN').map(function(){
    return $(this).outerHeight();
}).get();
// `heights` is an array and
// heights[0] = height of first element in the tree
// heights[1] = height of second element in the tree
// ... 
```

I have to stress that the order of the `heights` array is not the order in which you put the elements in the selector! jQuery will always reorder the elements to how they are positioned in the DOM.

**Reference**: [`.map`](http://api.jquery.com/map/), [`.get`](http://api.jquery.com/get/)

* * *

If you want the height somehow associated to something which can identify the element, you can use an object where the keys are the element IDs and the values are the heights:

```
var heights = {};
$('#div1, #div2 ... #divN').each(function(){
    heights[this.id] = $(this).outerHeight();
});
// `heights` is an object and
// heights['div1'] = height of element with ID div1
// heights['div2'] = height of element with ID div2
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:16:02.373

You can use an array / object:

```
function myFunction(){

    var heights = [];

    $('#div1, #div2 ... #divN').each(function(index, value){
        heights[index] = $(this).outerHeight();
    });

    console.log(heights); // etc... etc...

}; 
```

You'll be able to access them like:

`heights[1]`, `heights[2]` ... etc

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T12:19:22.403

If you really want named variables created dynamically (instead of using an array, as suggested in comments), you could either do something like

```
$('#div1, #div2 ... #divN').each(function(index){
    window['myVar' + index] = $(this).outerHeight();
} 
```

which will create global variables named myVar0, myVar1...

If you don't want to pollute the global namespace like that, you could go:

```
var myVars = {};
$('#div1, #div2 ... #divN').each(function(index){
    myVars['var' + index] = $(this).outerHeight();
} 
```

and access your variables like myVars.var0, myVars.var1...

# sql - 指定的约束无效

> ID：14625513
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:37.910
> 
> 标签：sql, sql-server-ce

我有一个本地（compact 3.5）sql 数据库文件，我目前正在尝试使用名为 Compact Query 的程序进行查询。我正在尝试使用 SQL 创建两个表 - 这是代码：

```
CREATE TABLE List(
ListId int IDENTITY(1,1) NOT NULL,
ShortDesc varchar(50) NOT NULL,
ActiveInd bit NULL,
CONSTRAINT PK_List PRIMARY KEY CLUSTERED
(
ListId ASC
))

CREATE TABLE CustomerList(
CustomerListId int IDENTITY(1,1) NOT NULL,
CustomerId int NULL,
ListId int NULL,
CONSTRAINT PK_CustomerList PRIMARY KEY CLUSTERED
(
CustomerListId ASC
)) 
```

当我运行此 SQL 时，它返回以下错误：

```
The constraint specified is not valid. [0, 0, 0,,,] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:24:12.837

对于那些在谷歌上搜索这个问题以寻找答案的人 - 我自己已经弄清楚了。

如果上面的 SQL create 语句不起作用（就像它们以前在 SQL Server Management Studio 中所做的那样），那么试试这个：

```
CREATE TABLE List(
ListId int IDENTITY(1,1) NOT NULL CONSTRAINT PK_List PRIMARY KEY,
ShortDesc nvarchar(50) NOT NULL,
ActiveInd bit NULL)

CREATE TABLE CustomerList(
CustomerListId int IDENTITY(1,1) NOT NULL CONSTRAINT PK_CustomerList PRIMARY KEY,
CustomerId int NULL,
ListId int NULL) 
```

希望这对遇到同样问题的人有所帮助。

# java - 服务层API设计

> ID：14625516
> 
> 赞同：0
> 
> 时间：2013-01-31T12:11:49.250
> 
> 标签：java, api, oop, design-patterns

我是一名新手程序员，正在学习如何为我的模块设计 API。我想到了 2 种类型的服务类来提供 API 供其他类使用。

第一个例子通过参数处理逻辑，第二个例子通过对象方式处理。

对于我来说，为其他类提供业务方法以供使用，哪种方法/设计更好？

作为一般经验法则，我应该使用哪个？

示例 1 - 服务 A

```
public class ServiceA {

    private SampleDAO dao =  new SampleDAO();
    private static final String DRAFT_STATUS = "DRAFT";
    private static final String APPROVED_STATUS = "APPROVED";
    private static final String SUBMITTED_STATUS = "SUBMITTED";

    public boolean isDocumentApprove(String documentId) {
        Document doc = getDocument(documentId);

        return (APPROVED_STATUS.equals(doc.getStatus()));
    }

    public boolean isDocumentDraft(String documentId) {
        Document doc = getDocument(documentId);

        return (DRAFT_STATUS.equals(doc.getStatus()));
    }

    public boolean isDocumentSubmited(String documentId) {
        Document doc = getDocument(documentId);

        return (SUBMITTED_STATUS.equals(doc.getStatus()));
    }

    private Document getDocument(String documentId) {
        return (dao.getByDocumentId(documentId));
    }
} 
```

示例 2 - 服务 B

```
public class ServiceB {

    private SampleDAO dao =  new SampleDAO();
    private static final String DRAFT_STATUS = "DRAFT";
    private static final String APPROVED_STATUS = "APPROVED";
    private static final String SUBMITTED_STATUS = "SUBMITTED";

    public Document getDocument(String documentId) {
        return (dao.getByDocumentId(documentId));
    }

    public boolean isDocumentApprove(Document doc) {    
        return (APPROVED_STATUS.equals(doc.getStatus()));
    }

    public boolean isDocumentDraft(Document doc) {
        return (DRAFT_STATUS.equals(doc.getStatus()));
    }

    public boolean isDocumentSubmited(Document doc) {   
        return (SUBMITTED_STATUS.equals(doc.getStatus()));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:30:47.027

如果必须选择，我会选择第二个示例，因为它包含的代码重复较少。在第一个`Document doc = getDocument(documentId);`中，每个方法都有相同的语句。所以，这里的一般原则是“不要重复自己”。

此外，在第一个版本中，您可以将任何垃圾作为字符串传递给方法。虽然您也可以在第二个版本中传递 null，但检查 null 比检查无效 id 更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:07:14.680

取决于您的 API 的目标。

调用者是否*总是*有一个实例`DocumentID`而*不是*一个`Document`实例？

*   ServiceA 是要走的路（抽象`Document`实例，只返回一个状态）。

调用者有时*有*一个实例*吗*？`DocumentID`*`Document`*

 **   当您为调用者提供获取文档或获取状态的能力时，ServiceB 是一种可行的方法。
*   在这种情况下，您最好修改您的`Document`类以包含一个`getStatus()`方法。这样，如果调用者有一个`Document`实例，他们可以调用`document.getStatus()`而不是调用您的服务。*

# smalltalk - WebNonHTMLResource 中的回车

> ID：14625519
> 
> 赞同：1
> 
> 时间：2013-01-31T12:11:55.090
> 
> 标签：smalltalk, aida

我创建以下 WebElement：

```
WebNonHTMLResource forText: ('This is', Character cr asString, 'a test') 
```

但是，当它显示在浏览器中时，文本将如下所示：

> 这是一个测验

没有考虑回车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:59:33.350

如果将回车放入 HTML 中，则不会显示为换行符。您需要添加一个分页符标签：

```
'This is<br>a test' 
```

# web-config - 未使用 msbuild 应用 appSettings.config 文件转换

> ID：14625523
> 
> 赞同：1
> 
> 时间：2013-01-31T12:12:04.137
> 
> 标签：web-config, web-config-transform

我继承了一个项目，该项目在单独的文件中包含 appSettings 和 Connectionstrings。使用 SlowCheetah 我为每个环境的每个文件生成了转换。

结构如下所示 `appSettings.config` `appSettings.DEV.config` `appSettings.UAT.config` `appSettings.RELEASE.config`

`connectionStrings.config` `connectionStrings.DEV.config` `connectionStrings.UAT.config` `connectionStrings.RELEASE.config`

我使用 Visual Studio 2010 中的发布功能在本地测试了转换。一切都很好。但是，当我在 TFS 中创建构建定义并通过 msbuild 自动部署时，不会应用转换。例如，发布 appsettings 文件包含基本文件的内容。不应用任何变换。我想知道是否有其他人尝试过这个，他们是否遇到过同样的问题。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T20:27:20.143

在您的构建定义中，您可能定义了要使用的配置。其中一部分还定义了诸如 Any CPU 或 x86 之类的东西。事实证明，Platform AnyCPU 有一个空间，而在项目文件中 Platform AnyCPU 没有空间。

我发现解决这个问题的最好方法是将平台留空，只输入配置名称。VS 会弹出一个警告，让你知道有数据丢失，你可以点击 Yes 来保存它。或者，您可以只输入您的配置，如以下 |Release,|Debug。

模式为 [PlatformName]|[ConfigurationName],[PlatformName]|[ConfigurationName],...

# performance - Magento 内存性能

> ID：14625524
> 
> 赞同：0
> 
> 时间：2013-01-31T12:12:08.770
> 
> 标签：performance, magento, memory

导入约 400k 产品时，我在**Magento 1.7.0.2**中遇到了一个大问题。由于自定义界面，我创建了一个自定义产品导入，其中产品被创建，追加销售/交叉销售被保存。

伪：

```
do {
  if( $_product = Mage::getModel(catalog/product)->loadByAttribute('sku', $sku)){
     return $_product;
  }else{
     $product = $this->createProduct();
     $product->save();
  }
}while(!$end_of_import); 
```

每个处理过的产品（加载/保存...）需要约 180kb 的内存。问题：内存永远不会被释放！因此，在大约 50k-60k 的进口产品之后，允许的 10gb 内存大小已用完。

我尝试了[此处](http://blog.ewtechnologies.com/magento-2/magento-memory-leak-1-4-1-1/)或[此处](http://ringsdorff.net/2009/07/23/guest-post-fix-for-memory-leaks-in-magento/)发布的不同解决方案，但没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:04:52.233

指标怎么样？在后端界面上，索引默认设置为“保存时更新”。如果您遍历大量产品并按照您的描述保存它们，则每次保存后都会开始重新索引过程。尝试将模式更改为“手动”（系统/索引管理），然后执行导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:27:39.963

保存后调用 $product->clearInstance() ，因此不仅产品本身被删除，而且附加到它的所有其他内容都被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:21:29.313

您是否尝试过使用[unset](http://php.net/unset)？对于`$_product`和`$product`？

# c# - EF 4.1 到 EF 5.0 迁移（entity.tt 文件）

> ID：14625527
> 
> 赞同：1
> 
> 时间：2013-01-31T12:12:27.903
> 
> 标签：c#, .net, entity-framework-4.1, entity-framework-5, texttemplate

我在 4.1 中有一个项目 EF，我想迁移到 5.0。最初，实体代码生成模板包括一些`Association Fixup`功能，包括`FixupFrame`和`FixupCluster`。这些在 5.0 中仍然是必需的吗？

迁移时我还应该注意什么？

# grails - Grails 2.x - 在所有 GSP 文件中包含 Javascript/Jquery 库

> ID：14625528
> 
> 赞同：1
> 
> 时间：2013-01-31T12:12:34.557
> 
> 标签：grails, grails-2.0

我曾在 Grails 1.3.7 中工作过，我曾在 main.gsp 中包含我所有的 javascript 和 jquery 库，以便这些库将自动包含在所有其他 GSP 页面中。但 Grails 2.x 版本的行为并非如此。

所以在 grails 2.0+ 中，在哪里包含我的 javascript/jquery 库，以便它自动包含在所有 GSP 页面中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:01:33.270

只需将其包含在目录`main.gsp`下的文件中`views/layouts`（或您放置在那里的任何其他布局文件，计划用于样式等您的网站）。当您调用它们时，包含此布局的每个页面都会自动包含库、样式表等。

main.gsp（默认）：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"><!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title><g:layoutTitle default="Grails"/></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="${resource(dir: 'images', file: 'favicon.ico')}" type="image/x-icon">
    <link rel="apple-touch-icon" href="${resource(dir: 'images', file: 'apple-touch-icon.png')}">
    <link rel="apple-touch-icon" sizes="114x114" href="${resource(dir: 'images', file: 'apple-touch-icon-retina.png')}">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'main.css')}" type="text/css">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'mobile.css')}" type="text/css">
    <g:layoutHead/>
    <r:layoutResources />
</head>
<body>
    <div id="grailsLogo" role="banner"><a href="http://grails.org"><img src="${resource(dir: 'images', file: 'grails_logo.png')}" alt="Grails"/></a></div>
    <g:layoutBody/>
    <div class="footer" role="contentinfo"></div>
    <div id="spinner" class="spinner" style="display:none;"><g:message code="spinner.alt" default="Loading&hellip;"/></div>
    <g:javascript library="application"/>
    <r:layoutResources />
</body> 
```

# android - 当设备的方向改变时，带有片段的android活动退出

> ID：14625532
> 
> 赞同：1
> 
> 时间：2013-01-31T12:12:42.417
> 
> 标签：android, android-fragments

我的应用程序包含一个由两个片段组成的活动。第一个片段通过 XML 添加，第二个片段根据来自第一个片段的输入动态添加。该应用程序在模拟器上完美运行。但是，在真实设备（三星 Galaxy 选项卡）上进行测试时，应用程序会在更改设备方向时退出（不会崩溃且没有任何错误）。我使用的是安卓 4.0。我搜索了很多这个问题，并尝试了这个网站和其他网站上给出的各种解决方案，但问题仍然存在。我还想补充一点，我的应用程序不使用片段的版本在两个方向上都可以正常工作。

主布局文件 (activity_main.xml)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" 
android:orientation="vertical" >

<fragment 
android:name="androiapps.autoqos.FirstFragment"
android:id="@+id/fragment"
android:layout_weight="2"
android:layout_width="fill_parent"
android:layout_height="0dp" 
/>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_weight="1"
android:layout_height="0dp"
android:orientation="vertical"
android:id="@+id/frameLayout" >

</FrameLayout>
</LinearLayout> 
```

`MainActivity.java`

```
public class MainActivity extends FragmentActivity implements OnInputReceivedListener, MessageSendListener{
//variable declarations 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onConfirm(Bundle bundle) {
    // TODO Auto-generated method stub
    if(bundle!=null){
        //int PT = bundle.getInt("PT");
        System.out.println("Got:"+bundle.getString("ip")+bundle.getString("port")+bundle.getString("tcpip")
                +bundle.getString("tcpport")+bundle.getInt("PT",0));
        udpHost=bundle.getString("ip");
        udpPort=bundle.getString("port");
        tcpHost=bundle.getString("tcpip");
        tcpPort=bundle.getString("tcpport");
        pType=bundle.getInt("pType",0);
        FragmentManager fragmentManager = getSupportFragmentManager();
        MessageFragment fragment = new MessageFragment();
        fragment.setArguments(bundle);
        FragmentTransaction transaction = fragmentManager.beginTransaction();
        transaction.replace(R.id.frameLayout, fragment);
        transaction.commit();
    }
}

@Override
public void send(Bundle bundle) {
    // TODO Auto-generated method stub
    if(bundle==null)
        return;

    msg = bundle.getString("msg");
    delay = bundle.getInt("delay",0);
    System.out.println("Got: "+msg+delay);          
    startTransmission();
}
void startTransmission(){
    System.out.println("\nTrying to send data");
    sendFilter = new IntentFilter(UdpResponseReceiver.ACTION_RESP1);
    sendFilter.addCategory(Intent.CATEGORY_DEFAULT);
    receiver1 = new UdpResponseReceiver(); 
    receiveFilter = new IntentFilter(UdpHandlerReceiver.ACTION_RESP2);
    receiveFilter.addCategory(Intent.CATEGORY_DEFAULT);
    receiver2 = new UdpHandlerReceiver();
    registerReceiver(receiver1, sendFilter);
    registerReceiver(receiver2, receiveFilter);
    udpServiceIntent = new Intent(MainActivity.this,UdpSendService.class);
    udpReceiveIntent = new Intent(MainActivity.this,UdpReceiveService.class);
    udpServiceIntent.putExtra("host",udpHost);
    udpServiceIntent.putExtra("port", udpPort);
    udpServiceIntent.putExtra("msg",msg);
    udpServiceIntent.putExtra("delay",delay);
    udpServiceIntent.putExtra("pType",pType);
    startService(udpServiceIntent);
    udpReceiveIntent.putExtra("tcpHost", tcpHost);
    udpReceiveIntent.putExtra("tcpPort", tcpPort);
    startService(udpReceiveIntent);
}
public class UdpResponseReceiver extends BroadcastReceiver {
    public static final String ACTION_RESP1 = "com.example.udpmessageclient.intent.action.MESSAGE_PROCESSED";
    @Override
    public void onReceive(Context context, Intent intent) {

        // Update UI, new "message" processed by SimpleIntentService
        System.out.println(intent.getStringExtra(UdpSendService.PARAM_OUT_MSG));

    }      
}   
public class UdpHandlerReceiver extends BroadcastReceiver {
    public static final String ACTION_RESP2 = "com.example.udpmessageclient.intent.action.MESSAGE_RECEIVED";
    @Override
    public void onReceive(Context context, Intent intent) {

        // Update UI, new "message" processed by SimpleIntentService
        System.out.println("Received message from server: "+intent.getStringExtra(UdpReceiveService.OUT_MSG));

    }    
}

@Override
public void stop() {
    // TODO Auto-generated method stub
    endTransmission();
    Button btn = (Button)findViewById(R.id.btn_confirm);
    btn.setEnabled(true);

}
void endTransmission(){
    UdpSendService.send=false;
    if(receiver1!=null && receiver2!=null){
        unregisterReceiver(receiver1);
        unregisterReceiver(receiver2);
        receiver1=null;
        receiver2=null;
    }
    //while(stopService(udpReceiveIntent)!=true);
    if(udpReceiveIntent!=null)
        stopService(udpReceiveIntent);
    System.out.println("\nreceive service stopped");
    //while(stopService(udpServiceIntent)!=true);
    if(udpServiceIntent!=null)
        stopService(udpServiceIntent);
    System.out.println("\nsend service stopped");
    return;
}
@Override
public void onBackPressed() {
    if(UdpSendService.send)
        stop();
    finish();

}
@Override
public void onStop() {
    super.onStop();
    stop();
    finish();
}

    } 
```

`FirstFragment.java`

```
public class FirstFragment extends Fragment{
//variable declarations
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View contentView = inflater.inflate(R.layout.activity_message_form, null);
    contentView.setDrawingCacheEnabled(false);
    text1 = (EditText) contentView.findViewById(R.id.ip);
    text2 = (EditText) contentView.findViewById(R.id.port);
    text3 = (EditText) contentView.findViewById(R.id.tcpip);
    text4 = (EditText) contentView.findViewById(R.id.tcpport);
    if(onSaveInstance!=null){
        text1.setText(onSaveInstance.getString("ip"));
        text2.setText(onSaveInstance.getString("port"));
        text3.setText(onSaveInstance.getString("tcpip"));
        text4.setText(onSaveInstance.getString("tcpport"));
    }
    button= (Button) contentView.findViewById(R.id.btn_confirm);
    rb1 = (RadioButton) contentView.findViewById(R.id.rbtn_1);
    rb2 = (RadioButton) contentView.findViewById(R.id.rbtn_2);
    rb3 = (RadioButton) contentView.findViewById(R.id.rbtn_3);
    rb4 = (RadioButton) contentView.findViewById(R.id.rbtn_4);
    confirmButtonListener = new OnClickListener(){
        public void onClick(View view){
            button.setEnabled(false);
            if (rb1.isChecked())
                PT = 0;
            else if (rb2.isChecked())
                PT = 1;
            else if (rb3.isChecked())
                PT = 2;
            else if (rb4.isChecked())
                PT = 3;
            else
                PT = 0;
            ip = text1.getText().toString().trim();
            port = text2.getText().toString().trim();
            tcpip=text3.getText().toString().trim();
            tcpport=text4.getText().toString().trim();
            if(ip=="" || port=="" || tcpip == "" || tcpport ==""){
                Toast.makeText(getActivity(), "Please fill in all the fields", Toast.LENGTH_SHORT).show();
            }
            else{
                Bundle b = new Bundle();
                b.putString("ip",ip);
                b.putString("port", port);
                b.putString("tcpip",tcpip);
                b.putString("tcpport", tcpport);
                b.putInt("pType", PT);

                if ( listener != null ){
                    System.out.println("Bundle:"+ip+port+tcpip+tcpport+PT);
                    listener.onConfirm(b);
                }
            }
            }
    };
    return contentView;
}
@Override
public void onStart(){
super.onStart();
button.setOnClickListener(confirmButtonListener);
}
@Override
public void onAttach(Activity activity) {
// TODO Auto-generated method stub
super.onAttach(activity);
try {
    listener = (OnInputReceivedListener)activity;
}catch (ClassCastException e) {
    Toast.makeText( activity, "Activity must implement this interface.", Toast.LENGTH_SHORT).show();
}
}
public interface OnInputReceivedListener{
    public void onConfirm(Bundle bundle);
}
@Override
public void onPause(){
    super.onPause();
    onSaveInstance = new Bundle();
    onSaveInstance.putString("udpHost", ip);
    onSaveInstance.putString("udpPort", port);
    onSaveInstance.putString("tcpHost", tcpip);
    onSaveInstance.putString("tcpPort", tcpport);

}
@Override
public void onResume(){
    super.onResume();
    if(onSaveInstance!=null){
        text1.setText(onSaveInstance.getString("ip"));
        text2.setText(onSaveInstance.getString("port"));
        text3.setText(onSaveInstance.getString("tcpip"));
        text4.setText(onSaveInstance.getString("tcpport"));
    }
}
} 
```

`MessageFragment.java`

```
public class MessageFragment extends Fragment{
//variable declarations
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View contentView = inflater.inflate(R.layout.activity_message, null);
    contentView.setDrawingCacheEnabled(false);
    msgText = (EditText) contentView.findViewById(R.id.msg);
    sendBtn = (Button) contentView.findViewById(R.id.btn_send);
    stopBtn = (Button) contentView.findViewById(R.id.btn_stop);
    if(onSaveInstance!=null){
        msgText.setText(onSaveInstance.getString("msg"));
        delayField.setText(onSaveInstance.getInt("delay", 0));
    }
    b = getArguments();
    System.out.println("PT="+b.getInt("pType",0));
    if(b!=null){
        int pType = b.getInt("pType");
        if(pType==1 || pType== 3){
            delayField = (EditText) contentView.findViewById(R.id.delay);
            tvDelay = (TextView) contentView.findViewById(R.id.tvDelay);
            tvDelay.setVisibility(View.VISIBLE);
            delayField.setVisibility(View.VISIBLE);
        }
    }
    sendButtonListener=new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sendBtn.setEnabled(false);
            Bundle b = new Bundle();
            msg=msgText.getText().toString();
            delay=Integer.parseInt(delayField.getText().toString());
            b.putString("msg", msg);
            if(delayField!=null)
                b.putInt("delay",delay);
            if(mListener!=null)
                mListener.send(b);
        }
    };
    stopButtonListener = new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sendBtn.setEnabled(true);
            mListener.stop();
        }
    };
    return contentView;
}
@Override
public void onStart(){
    super.onStart();
    sendBtn.setOnClickListener(sendButtonListener);
    stopBtn.setOnClickListener(stopButtonListener);
}
@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
    try {
        mListener = (MessageSendListener)activity;
    }catch (ClassCastException e) {
        Toast.makeText( activity, "Activity must implement this interface.", Toast.LENGTH_SHORT).show();
    }
}
public interface MessageSendListener{
    public void send(Bundle bundle);
    public void stop();
}
@Override
public void onPause(){
    super.onPause();
    onSaveInstance = new Bundle();
    onSaveInstance.putString("msg", msg);
    onSaveInstance.putInt("delay", delay);
}
@Override
public void onResume(){
    super.onResume();
    if(onSaveInstance!=null){
        msgText.setText(onSaveInstance.getString("msg"));
        delayField.setText(onSaveInstance.getInt("delay", 0));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:19:18.957

你用过这段代码吗

```
android:configChanges="keyboard|keyboardHidden|orientation" 
```

有关更多信息，请查看此[链接](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:13:19.790

```
public void onStop() {
    super.onStop();
    stop();
    finish(); 
```

为什么要完成（）？您的应用程序正在执行您编写的代码。当方向改变时， onStop() 被调用。你然后`finish()`你的活动。

# android - 尝试将 Android 应用程序移植到 BlackBerry 10 时出现验证错误

> ID：14625533
> 
> 赞同：5
> 
> 时间：2013-01-31T12:12:44.180
> 
> 标签：android, eclipse, eclipse-plugin, blackberry-10

我正在尝试使用 Android Runtime 将现有的 Android 应用程序移植到 BlackBerry 10。首先我需要提一下，我已经成功地将一个简单的 Android 应用程序移植到了 BlackBerry 10 上，没有任何错误。我在 Eclipse 中使用了“插件重新打包工具”来完成这个过程。

在这个应用程序中，它给出了一个错误，因为***包装项目 ProjectName 被跳过，因为它有验证错误***。生成该错误后，它会在代码中显示错误。代码的错误行如下。

```
intent.addCategory(Intent.CATEGORY_HOME); 
```

以上行的完整代码块如下。

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
startActivity(intent); 
```

当我评论该代码块并尝试**为 AppWorld 运行 Sign 时**，它工作正常。

只有上面的代码片段如何影响移植和产生错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:31:38.393

Blackberry10 被设计为具有基于手势的界面。已经有一种内置方法可以离开您的应用程序并返回主屏幕，只需从屏幕底部向上滑动即可，即使对于 Android 应用程序也是如此。

在不了解您的应用程序的情况下，我不确定此功能是否对您的应用程序至关重要，但如果不是，我认为处理此问题的最佳方法是从您的应用程序中删除此“主屏幕”功能，因为它不需要，因此您可以克服此错误并发布您的应用程序。

请注意， Blackberry Android 运行时[不支持](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_app_types.html)某些类型的应用程序，包括具有多个可启动 Activity 的应用程序，特别是主屏幕应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:20:27.123

我发现[这个文档页面](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_intents.html)描述了 BlackBerry 10 不支持的 Android Intent 功能。

他们在那里提到

> 不支持启动器（主屏幕）意图

根据[此文档页面，](http://developer.android.com/guide/components/intents-filters.html) **CATEGORY_HOME**用于显示不受支持的主屏幕。这意味着现在我知道错误的原因，但遗憾的是黑莓文档没有提到如何克服这个错误或如何用工作代码替换该代码片段。如果有人对此有解决方案，请指导我。

# r - 将嵌套的 for 循环输出组合成一个向量

> ID：14625537
> 
> 赞同：1
> 
> 时间：2013-01-31T12:12:49.423
> 
> 标签：r, for-loop

我使用 3 个协变量拟合了多阶段马尔可夫 (MSM) 模型。我正在尝试应用一个函数，其主要参数适合 MSM 模型和协变量值。功能是：

```
transition<-qmatrix.msm(MSMmod,  ci="normal", covariates=list(grossTon= 10, activ=0, period=1)) 
```

该函数的输出是估计值：

```
 Owning<10 Owning10-40   Owning>40        left
Owning<10   -0.18037446  0.06140559  0.00000000 0.118968868
Owning10-40  0.01609661 -0.09027454  0.04502546 0.029152476
Owning>40    0.00000000  0.04801757 -0.05137377 0.003356196
left         0.00000000  0.00000000  0.00000000 0.000000000 
```

我只对其中一些感兴趣，所以`transition$estimates[c(5,2,10,7,13,14,15)]`我得到了；例如，该函数`qmatrix.msm`使用协变量组合 GrossTon=120、active=0 和 period=1 给出的值（见下文）。

```
[1] 0.06140559 0.01609661 0.04502546 0.04801757 0.118968868 0.029152476 0.003356196 
```

由于grossTon（12个值）和activ（4个值）的所有组合，我的函数中都有两个for循环，我期望得到48个向量（每个7个值，类似于前一个），因此最终组合所有将它们组合成一个向量（336 个值，7*12*4）。

这是我的功能：

```
transRate<-function(period){
  estim<-data.frame(matrix(rep(0,336),336,1))

  for(i in seq(10,120,by=10)){
    for(j in seq(0,3, by=1)){

    estim[c(i,j)]<-qmatrix.msm(msm.Mult4,  ci="normal", covariates=list(grossTon=i, activ=j, period=period))$estimates[c(5,2,10,7,13,14,15)]
    outp[c(i,j)]<-c(estim[c(i,j)])#Here I'm trying to get my 336 values vector
    }
  }

  grosTvect<-sort(rep(seq(10,120,by=10),28))
  rate<-rep(c("q12","q21","q23","q32","q14","q24","q34"),48)
  estimRate<-data.frame(grosTvect,rate,outp)

  return(estimRate)                     
} 
dataFrame<-transRate(period=1) 
```

我不知道如何处理 i 和 j 来生成我的向量。

我在写作时遇到以下`estim[c(i,j)]` 错误`outp[c(i,j)]<-c(estim[c(i,j)])`

```
error in `[<-.data.frame`(`*tmp*`, c(i, j), value = c(0.0614055886960195,  : 
  new columns would leave holes after existing columns 
```

还有这个当我写`estim[i,j]`和`outp<-estim[i,j`]

```
Error in `[<-.data.frame`(`*tmp*`, i, j, value = c(0.0614055886960195,  : 
  replacement has 7 rows, data has 1 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:51:10.630

您的“估计”数据框的尺寸错误，无法容纳“估计”中的长度为 7 的向量。您也没有声明“outp”，因此如果解释器代码在允许数据帧分配成功后到达那里，那将引发另一个错误。（尚不清楚为什么要采取额外的步骤来分配给“outp”。）

`c("q12","q21","q23","q32","q14","q24","q34")`用命名的列创建一个 48 行数据框并使用顺序索引分配给正确的行 = i+12*j会更容易吗？

```
 transRate<-function(period){
  estim<-data.frame(q12=1:48, q21=0, q23=0, q32=0, q14=0, q24=0, q34=0)))

  for(i in seq(1,12)){
    for(j in seq(0,3, by=1)){

    estim[ i+12*j , ] <- qmatrix.msm(cav.msm,  ci="normal", 
              covariates=list( grossTon = i*10, activ=j, period=period))$
                                                  estimates[c(5,2,10,7,13,14,15)]
       }
  }

    return(estim)                     
} 

dataFrame<-transRate(period=1) 
```

（无法弄清楚具有不同尺寸的“grosTvect”对象应该如何与“估计”结果对齐。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:51:55.483

数据框`estim`只有一列。这一列恰好是一个矩阵。当您执行类似的操作时`estim[i,j]`，您正在访问数据框的列。我相信您实际上想要访问数据框中*的矩阵。*`estim[1][,c(i,j)]`因此，如果要填充矩阵，则必须使用类似的东西。

# java - 包含库 jar 时出现 ClassNotFoundException

> ID：14625540
> 
> 赞同：6
> 
> 时间：2013-01-31T12:13:10.953
> 
> 标签：java, android, eclipse, adt

在我的 android 项目中，我在`libs`文件夹中添加了一个库 jar。
这个 jar 包含三个不同的包：

1.  谷歌 GSON (com.google.gson)
2.  jboss 网络 (org.jboss.netty)
3.  我自己开发的一个客户端应用程序使用这两个其他库。（com.example.core）

jar 使用 ant 编译/存档。

eclipse 中没有错误，但是当我尝试在设备上运行我的 android 应用程序时，我得到了这个：

```
E/AndroidRuntime(23807): FATAL EXCEPTION: main
E/AndroidRuntime(23807): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.project/com.example.project.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.example.project.MainActivity" on path: /data/app/com.example.project-1.apk
E/AndroidRuntime(23807):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
E/AndroidRuntime(23807):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/AndroidRuntime(23807):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
E/AndroidRuntime(23807):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/AndroidRuntime(23807):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(23807):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(23807):    at android.app.ActivityThread.main(ActivityThread.java:5039)
E/AndroidRuntime(23807):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(23807):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(23807):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(23807):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(23807):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(23807): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.project.MainActivity" on path: /data/app/com.example.project-1.apk
E/AndroidRuntime(23807):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
E/AndroidRuntime(23807):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(23807):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(23807):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
E/AndroidRuntime(23807):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
E/AndroidRuntime(23807):    ... 11 more 
```

这绝对是我的 jar 造成的，因为如果我从 MainActivity 中删除对它的类的引用，那么问题就解决了，应用程序在设备上运行。

使用[apktool](http://code.google.com/p/android-apktool/)我检查了进入 apk 的内容，我发现所有内容都被添加到`smali`目录中，即除了我的包（com.example.core）之外的所有内容。
所以我的 jar 中的所有 android 应用程序类 (com.example.project)、gson (com.google.gson) 和 netty (org.jboss.netty) 都在那里，但 com.example.core 不存在。

我的环境：
Eclipse 4.2.1
ADT 21.0.1
Java 7（oracle）

我测试过的设备：
三星galaxy S2
LG nexus 4

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T12:17:05.847

你得到一个`NoClassDefFoundError`因为你的 jar 文件在运行时不可用。

为了让它在运行时可用，您必须在 java 构建路径中检查 jar 文件上的复选框，如下所示：

![在此处输入图像描述](../Images/91f321c449ae6cde410f06affabc44dd.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T10:41:44.113

好的，我终于找到了问题，花了我一段时间。

我在我的机器上使用 java 7，ant builder 也使用这个默认版本，不幸的是，android 不喜欢 java 7，所以这解决了我的问题：

```
<javac srcdir="." destdir="bin/classes" source="1.6" target="1.6">
    ...
</java> 
```

或者您可以在 Eclipse 中使用这些步骤：

```
Eclipse menu: Window/Preferences/Java/Compiler
Compiler Compliance level: 1.6 
tick "use default" 
```

希望这将为面临此问题的其他人节省一些时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T12:15:12.637

（java构建路径/顺序和导出）将你的lib移到顶部并签入

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-24T09:24:19.827

对于 IntelliJ，这个设置最终让我的错误消失了：

![在此处输入图像描述](../Images/328b0a524a3e7c78a5f34a3a2f7550b5.png)

![在此处输入图像描述](../Images/1a7e3349c03846d433fedb7771db40cc.png)

# ruby - 红宝石正则表达式返回

> ID：14625543
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:13:21.903
> 
> 标签：ruby, regex, return

这是我的代码

```
pong = /return/.match(cap.array[0])
if pong == "return"
  puts "Pong"
end 
```

`cap.array[0]``/return/`正如您在我使用时看到的那样，绝对匹配`pp`：

```
#<MatchData "return"> 
```

但由于某种原因，该`if`语句没有触发。任何想法为什么它不匹配？我试过`==`并`===`认为这可能是一个类型问题，但没有快乐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:40:24.163

为什么要两次检查？？您可以通过以下简单方式进行操作：

```
if /return/ =~ cap.array[0]
  puts "pong"
end 
```

例如：

```
/return/ =~ "Functions return value" #=> 14
/return/ =~ "return" #=> 0 
```

在红宝石中：

```
puts "hello" if 0  #=> hello    # 0 is not false 
```

所以你可以避免多次检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:16:25.160

`Regex#match`返回一个`MatchData`对象。因此，它与字符串的比较失败。

```
pong = /return/.match('i shall return this')

# cast it to string
if pong.to_s == "return"

# or do this
# if pong[0] == "return"
    puts "Pong"
end 
```

# c# - List.Exists 返回错误值

> ID：14625545
> 
> 赞同：1
> 
> 时间：2013-01-31T12:13:22.790
> 
> 标签：c#

我使用列表来存储使用第三方库检索到的所有设备。我正在使用 Exist 方法来确定列表中是否存在设备。

```
bool bDeviceFound = _devicesFound.Exists(delegate(RCDevice device)
    {
        bool retVal = false;
        if (device != null)
        {
            Regex regex = new Regex(@"Floor[\d]+\/mycamera[\d]+");
            if (regex.IsMatch(device.FullName))
                retVal = true;
        }
        return retVal;
    }); 
```

问题是委托永远不会返回 true 或者执行将永远不会到达委托内部的代码。我在这里做错什么了吗？我已经验证了委托中的代码，只要找到匹配项，正则表达式就会返回 true。

device.FullName 假定 IsMatch 的值为“Floor1/mycamera1”以返回 true。

正如 LasseV.Karlsen 在下面的评论之一中所建议的那样，我尝试将委托方法移动到单独的私有静态 bool 方法中，并在那里放置一个断点。但执行从来没有打到那里。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:21:13.197

我的猜测是问题出在这一行：

```
if (regex.IsMatch(rc.FullName)) 
```

你为什么要检查`rc.FullName`？你不应该检查一下，`device.FullName`因为`device`委托中定义了什么？

作为旁注，您应该将`Regex`定义移到`Exists`调用之外以获得更好的性能。目前，它会随着循环的每次迭代而重新编译。

# java - 从命令行运行，错误名称错误

> ID：14625558
> 
> 赞同：0
> 
> 时间：2013-01-31T12:14:33.740
> 
> 标签：java, command-line, javac

我想从我开始使用批处理文件的命令行运行一个 Java 项目，但是我得到了错误的名称错误。

目录设置：

*   srcMVC
    *   bin（带有 .class 文件的文件夹）
    *   src（带有 .java 文件的文件夹）
    *   批处理文件

批处理文件：

```
set path=C:\Program Files\Java\jdk1.7.0_09\bin
javac src\model\*.java -d bin -cp src
javac src\controller\*.java -d bin -cp src
javac src\view\*.java -d bin -cp src
javac src\main\*.java -d bin -cp src
PAUSE
java bin\main.Main
PAUSE 
```

编译工作，但我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: bin\main/Main (wrong name: main/Main) 
```

有什么建议么？

* * *

```
package main;

// omitted imports

public class Main {
    // omitted variables

    public static void main(String[] args) {
        // omitted implementation   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:17:15.127

以下语句解决了我的错误：

```
java -cp bin; main.Main 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:19:31.660

`NoClassDefFoundError`当 Java 虚拟机无法在运行时找到在编译期间可用的特定类时，Java 就出现了。

例如，如果我们有一个类的方法调用或访问一个类的任何静态成员，并且该类在运行时不可用，那么 JVM 将抛出`NoClassDefFoundError`.

默认情况下，Java`CLASSPATH`指向用“.”表示的当前目录。它只会在当前目录中查找任何类。

因此，您需要`CLASSPATH`在运行时添加其他路径。阅读更多[设置类路径](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

`java -cp bin main.Main`

其中`Main.class`包含`public static void main(String []arg)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:20:15.683

你错误地执行 java bin\main.main

main() 是您的主要方法，但您应该提供`Class Name`实现 main()的 java 解释器

所以如果你的类名是 Test 并且文件名是 Test.java 它有 main() 方法

`java Test`

如果您的 Test.java/Test 类是包 my.test 例如 -`package com.my.test;`

比，`java com.my.test.Test`

希望你明白了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:20:41.003

`java bin/main.Main`是错误的，您必须`-cp`在此处指定：

```
java main.Main -cp bin 
```

这里的第一个参数是应该在类路径中找到的**类名，****而不是类文件位置**。并且`-cp`只需将逻辑路径添加到类路径。您应该使项目的根目录在类路径中可搜索。

对于那些 javac 命令，您已经指定了正确的路径，因此您不需要`-cp src`. 这里的区别是 javac 命令使用`.java`文件的逻辑路径，而使用 java 命令只能在`-cp`属性中指定路径。

如果您进入目录，您也可以`java main.Main`不执行：`-cp``bin`

```
cd bin
java main.Main 
```

由于当前路径将被 java 自动搜索为类路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:18:28.523

假设您有一个名为 Main 的类，您必须使用以下命令运行它：

```
java bin\Main 
```

它将调用您的主要方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T12:24:35.437

Java 运行时（在您的情况下为 java.exe 命令）将包含 main() 方法的类文件名作为输入。我猜你应该将它调用为“java bin\main”，假设有一个 main.class 定义了一个 public static void main (String[]) 方法。

注意：一般做法是将任何类名的第一个文字大写。

# cordova - Phonegap 应用程序部署到黑莓模拟器

> ID：14625566
> 
> 赞同：1
> 
> 时间：2013-01-31T12:14:52.053
> 
> 标签：cordova, blackberry, blackberry-webworks

我试图在 Blackberry 中创建一个 Phonegap 应用程序。[我遵循了这个Phonegap 指南](http://docs.phonegap.com/en/2.2.0/guide_getting-started_blackberry_index.md.html)中给出的每一个步骤。但是当我走到这一步时

**部署到模拟器**

`ant target load-device`

我遇到了路障。有人有想法吗？如何使用加载到设备`ant target`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:48:33.853

目标只是黑莓、playbook 或 qnx 的占位符。如果您正在部署 BB OS 5-7，请使用 blackberry，playbook 用于 Playbook，qnx 用于新的 BlackBerry 10。此外，请确保您的设备已通过 USB 连接到您的计算机。另外，如果你想部署到模拟器，你应该使用：

```
ant target load-simulator 
```

# objective-c - 提取包含关键字objective c的句子

> ID：14625567
> 
> 赞同：0
> 
> 时间：2013-01-31T12:14:52.727
> 
> 标签：objective-c, macos, cocoa, keyword

我有一段文字（如果有任何相关性，则是一篇报纸文章）想知道是否有一种方法可以提取包含 Objective-c 中特定关键字的所有句子？我一直在看 ParseKit，但运气不佳！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:25:15.717

`NSString`您可以使用这样的本机方法枚举句子...

```
NSString *string = @"your text";

NSMutableArray *sentences = [NSMutableArray array];

[string enumerateSubstringsInRange:NSMakeRange(0, string.length) 
                           options:NSStringEnumerationBySentences 
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    //check that this sentence has the string you are looking for
    NSRange range = [substring rangeOfString:@"The text you are looking for"];

    if (range.location != NSNotFound) {
        [sentences addObject:substring];
    }
}];

for (NSString *sentence in sentences) {
    NSLog(@"%@", sentence);
} 
```

最后，您将获得一系列句子，其中都包含您要查找的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:32:12.713

编辑：如评论中所述，我的解决方案存在一些继承弱点，因为它需要一个格式完美的句子，其中句点+空格仅在实际结束句子时使用......我将它留在这里，因为它对人们来说是可行的使用另一个（已知的）分隔符对文本进行排序。

这是实现您想要的另一种方法：

```
NSString *wordYouAreLookingFor = @"happy";

NSArray *arrayOfSentences = [aString componentsSeparatedByString:@". "]; // get the single sentences
NSMutableArray *sentencesWithMatchingWord = [[NSMutableArray alloc] init];

for (NSString *singleSentence in arrayOfSentences) {
    NSInteger originalSize = [singleSentence length];
    NSString *possibleNewString = [singleSentence stringByReplacingOccurrencesOfString:wordYouAreLookingFor withString:@""];

    if (originalSize != [possibleNewString length]) {
        [sentencesWithMatchingWord addObject:singleSentence];
    }
} 
```

# css - css 响应式设计 - 链接在 div 之外流动

> ID：14625569
> 
> 赞同：1
> 
> 时间：2013-01-31T12:14:53.143
> 
> 标签：css, responsive-design

我正在尝试使现有网站具有响应性。当浏览器窗口达到一定大小时，包含 div 中的链接开始在 div 之外流动，我遇到了问题。如果我删除“.main_navigation a {white-space:nowrap;}”就可以了，但我需要这个来阻止 owrd 继续换行。有什么建议么？

```
 .search {width:260px;height:30px;padding:10px 0 0 10px;text-align:left;float:left;}
    .main_navigation {width:700px;min-height:20px;padding:10px 10px 10px 0;text-align:right;float:left;}.main_navigation a {font:10px/20px Tahoma, sans-serif;padding:4px 8px;text-decoration:none;color:#999999;border-radius:5px;-moz-border-radius:5px;}.main_navigation a:hover {color:#eeeeee;background:#999999;}

@media screen and (max-width: 580px){
    .c_main {border:2px solid blue;max-width:580px}
    .search_button {padding:3px 1px;}
    .main_navigation {width:50%;}   
}

@media screen and (max-width: 980px){
    .search {width:28%;}
    .main_navigation {width:70%;padding-left:0;padding-right:0;margin-right:0;float:right;} 
    .main_navigation a {white-space:nowrap;}
}
    <div class="search">
            <form method="get"><input id="txtQuickSearch" name="txtQuickSearch" type="text" value="search"  /><input type="submit" value="search" class="search_button" /></form>
    </div>
    <a HREF="#"><span CLASS="icon-menu-2"></span></a>
    <div class="main_navigation">
            <a href="" title="Home">Home</a><a href="" >About</a><a href="">Basket</a><a href="">Contact</a><a href="">new page</a>

    <a href="" target="_blank">test external links</a><a href="" target="_blank">another link</a>

    <a href="">My Account</a><a href="">Sign In</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:21:47.813

这是缺失的：

```
.main_navigation a {
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T11:13:18.200

例如，您可以使用 2 种不同的方式并在[http://jsfiddle.net/](http://jsfiddle.net/)上对其进行测试。

第一种方法是：

```
.main_navigation a { display: block; float: left; } 
```

第二种方式是：

```
.main_navigation { overflow: hidden; white-space: nowrap; } 
```

# python - 如何在 Python 3 中用捕获组替换一些字符串？

> ID：14625570
> 
> 赞同：0
> 
> 时间：2013-01-31T12:14:54.633
> 
> 标签：python, regex

我是 Python 初学者。我想从字符串中找到 <(.+?)> ，并将其替换为 [\1]。例如，

```
string_input = '<age>'
string_output = '[age]' 
```

我试过了，

```
import re
string = '<age>'
re.sub('<.+?>, '[' + \1 + ']', string) 
```

但它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:19:34.763

您最好使用 访问捕获组`\g<>`，因此由于您只有一个捕获组，因此您使用`\g<1>`.

```
In [1]: re.sub(r'<(.+?)>', '[\g<1>]', '<age>')
Out[1]: '[age]' 
```

使用的好处`\g<>`是您还可以为捕获组命名，然后再次通过名称访问它们，例如：

```
In [2]: re.sub(r'<(?P<content>.+?)>', '[\g<content>]', '<age>')
Out[2]: '[age]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:18:46.157

```
>>> re.sub('<(.+)>', '[\\1]', '<age>')
'[age]' 
```

Double`\\`用于转义`\`，否则`\1`将被识别为`\x01`。
括号`()`用作捕获组。

您可以像这样使用多个捕获组：

```
>>> re.sub('<(.+)=+(.*)>', '[\\1: \\2]', '<age=5>')
'[age: 5]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:20:41.610

```
re.sub("<([^>]+)>", "[\g<1>]", s) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:21:38.287

正如亚历克斯 L 所说，但你不需要 ? 特点：

```
import re
re.sub('<(.+)>', '[\\1]', '<age>') 
```

# android - 锚标记不适用于 jquery 移动标签

> ID：14625573
> 
> 赞同：2
> 
> 时间：2013-01-31T12:14:59.030
> 
> 标签：android, jquery, ios, jquery-mobile, mobile

我正在使用 JQuery-mobile，但无法在实际手机上使用。

```
<label for='check'>Enjoy your Search at <a href="javascript:void(0);" onclick="window.open('http://www.google.com','','width=530, height=580');">Google</a> 
```

也就是说，当用户放大并单击链接时，它不会执行 onclick java 脚本。

锚标记来自遗留系统，因此由于支持原因我无法更改它。

以前有没有人遇到过这种问题，有人可以帮我解决这个问题吗？

我设法为此做了一个小jsfiddle。 [http://jsfiddle.net/QsCSj/](http://jsfiddle.net/QsCSj/)

谢谢，迪米尔。

# linux - ./executable 和 . 可执行的

> ID：14625580
> 
> 赞同：4
> 
> 时间：2013-01-31T12:15:20.017
> 
> 标签：linux, bash, shell, executable

在一个shell中，有什么区别？

```
. executable 
```

和

```
./executable 
```

在第一个中，点是[`source`](http://linux.about.com/library/cmd/blcmdln_source.htm)正确的快捷方式？`./executable`那么和之间有区别`source executable`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T12:28:06.757

`./executable`运行当前工作目录中的可执行文件。（`executable`如果`.`你的 没有`$PATH`，通常没有，那是不够的）。在这种情况下，`executable`可以是一个 elf 二进制文件，或者一个以 开头的脚本`#!/some/interpreter`，或者任何你可以的东西`exec`（在 Linux 上它可能是*一切*，这要归功于`binfmt`模块）。

`. executable`*将shell 脚本*源到您当前的 shell 中，无论它是否具有*执行*权限。不会创建新进程。在`bash`中，根据`$PATH`变量搜索脚本。脚本可以设置环境变量，这些变量将在*你的*shell 中保持设置，定义函数和别名等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:20:32.887

在第二个中，您给出路径：`./`是当前工作目录，因此它不会搜索`PATH`可执行文件，而是在当前目录中搜索。

`source`将可执行文件作为参数并在当前进程中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:42:08.433

> ./executable 和 source 可执行文件之间有区别吗？

基本的区别是，

```
./foo.sh      - foo.sh will be executed in a sub-shell
source foo.sh - foo.sh will be executed in current shell 
```

一些例子可以帮助解释差异：

假设我们有`foo.sh`：

```
#!/bin/bash
VAR=100 
```

来源：

```
$ source foo.sh 
$ echo $VAR
100 
```

如果你 ：

```
./foo.sh
$ echo $VAR
[empty] 
```

另一个例子，`bar.sh`

```
#!/bin/bash
echo "hello!"
exit 0 
```

如果你像这样执行它：

```
$ ./bar.sh
hello
$ 
```

但如果你采购它：

```
$ source bar.sh
<your terminal exits, because it was executed with current shell> 
```

# javascript - jQuery changeHash 和后退按钮

> ID：14625595
> 
> 赞同：2
> 
> 时间：2013-01-31T12:16:13.797
> 
> 标签：javascript, jquery, jquery-mobile, back-button

当我使用它在页面之间进行更改时，地址栏中的地址保持不变（这是必需的，这样如果用户刷新页面，他应该被引导到第一页）

```
$.mobile.changePage( "confirm.html", {
transition: "slide",
changeHash: false
}); 
```

但是现在我的后退按钮无法正常工作。如何将此行为集成到后退按钮，以便地址栏中的地址仍然保持不变，但当他们按下后退时可以返回上一页？

目前我的后退按钮是这样的；

```
data-rel="back" class="button" data-role="none" data-transition="slideLeft" 
```

# javascript - 为什么 esri.geometry.getLength 工作错误？

> ID：14625600
> 
> 赞同：2
> 
> 时间：2013-01-31T12:16:28.610
> 
> 标签：javascript, geometry, gis, arcgis

函数[http://help.arcgis.com/en/webapi/javascript/arcgis/jsapi/#namespace_geometry/esri.geometry.getLength](http://help.arcgis.com/en/webapi/javascript/arcgis/jsapi/#namespace_geometry/esri.geometry.getLength)应该计算点之间的距离。

当我试图计算它们之间有 100 米的点之间的距离时

```
p1=new esri.geometry.Point(3997030.6690969253, 7444299.320646087, new esri.SpatialReference({ wkid: 102113 }));
Object
p2=new esri.geometry.Point(3996951.455397143, 7444142.154020177, new esri.SpatialReference({ wkid: 102113 }));
Object
esri.geometry.getLength(p1, p2)
176.00045037719127 
```

我得到 176 这是错误的。投影是 Web Mercator (WKID 102113)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-22T18:43:31.207

看起来它只是在计算两点 (3997030,7444299) 和 (3996951, 7444142) 之间的简单欧几里得地图距离。

```
a^2 + b^2 = c^2 
where a = (3997031 - 3996951) and b = (7444299 - 7444142)
c = 176 
```

所以176是*地图*距离，你想要的是真实世界的*地面*距离。您可能必须使用 GeometryService 来完成此操作，我认为 Javascript 无法自行完成。这是 ESRI 的示例：[https ://developers.arcgis.com/javascript/jssamples/util_distance.html](https://developers.arcgis.com/javascript/jssamples/util_distance.html)

# shell - Dash 变量扩展在某些情况下不起作用

> ID：14625601
> 
> 赞同：3
> 
> 时间：2013-01-31T12:16:31.177
> 
> 标签：shell, scripting, dash-shell

这项工作正在测试 virtualbox 机器上完成

在我的 /root 目录中，我创建了以下内容：
“/root/foo”
“/root/bar”
“/root/i have multiple words”

这是我目前拥有的（相关）代码

```
 if [ ! -z "$BACKUP_EXCLUDE_LIST" ]
  then
    TEMPIFS=$IFS
    IFS=:
    for dir in $BACKUP_EXCLUDE_LIST
    do
      if [ -e "$3/$dir" ] # $3 is the backup source
      then
          BACKUP_EXCLUDE_PARAMS="$BACKUP_EXCLUDE_PARAMS --exclude='$dir'"
      fi    
    done
    IFS=$TEMPIFS
  fi

  tar $BACKUP_EXCLUDE_PARAMS -cpzf  $BACKUP_PATH/$BACKUP_BASENAME.tar.gz -C $BACKUP_SOURCE_DIR $BACKUP_SOURCE_TARGET 
```

这就是我使用 sh -x 运行脚本时发生的情况

```
+ IFS=:
+ [ -e /root/foo ]
+ BACKUP_EXCLUDE_PARAMS= --exclude='foo'
+ [ -e /root/bar ]
+ BACKUP_EXCLUDE_PARAMS= --exclude='foo' --exclude='bar'
+ [ -e /root/i have multiple words ]
+ BACKUP_EXCLUDE_PARAMS= --exclude='foo' --exclude='bar' --exclude='i have multiple words'
+ IFS=  

# So far so good

+ tar --exclude='foo' --exclude='bar' --exclude='i have multiple words' -cpzf /backup/root/daily/root_20130131.071056.tar.gz -C / root
tar: have: Cannot stat: No such file or directory
tar: multiple: Cannot stat: No such file or directory
tar: words': Cannot stat: No such file or directory
tar: Exiting with failure status due to previous errors

# WHY? :( 
```

检查成功完成，但`--exclude='i have multiple words'`不起作用。

请注意，当我在 shell 中手动键入它时它确实有效：

```
tar --exclude='i have multiple words' -cf /somefile.tar.gz /root 
```

我知道这在使用数组时可以在 bash 中使用，但我希望它是 POSIX。

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:32:48.313

考虑这个脚本；（'with whitespace' 和 'example.desktop' 是示例文件）

```
#!/bin/bash

arr=("with whitespace" "examples.desktop")

for file in ${arr[@]}
do
    ls $file
done 
```

这与您的输出完全相同；

```
21:06 ~ $ bash test.sh 
 ls: cannot access with: No such file or directory
 ls: cannot access whitespace: No such file or directory
 examples.desktop 
```

您可以将 IFS 设置为 '\n' 字符以转义文件名上的空格。

```
#!/bin/bash

arr=("with whitespace" "examples.desktop")

(IFS=$'\n';
    for file in ${arr[@]}
    do
        ls $file
    done
) 
```

第二个版本的输出应该是；

```
21:06 ~ $ bash test.sh 
 with whitespace
 examples.desktop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:37:10.177

[David the H. from the LinuxQuestions forums steered me in the right direction.](http://www.linuxquestions.org/questions/linux-newbie-8/dash-shell-script-variable-expansion-problems-;-4175448122/)

First of all, in my question, I did not make use IFS=: all the way through to the tar command Second of all, I included "set -f" for safety

```
BACKUP_EXCLUDE_LIST="foo:bar:i have multiple words"

# Grouping our parameters
if [ ! -z "$BACKUP_EXCLUDE_LIST" ]
then
  IFS=:         # Here we set our temp $IFS
  set -f        # Disable globbing
  for dir in $BACKUP_EXCLUDE_LIST
  do
    if [ -e "$3/$dir" ]  # $3 is the directory that contains the directories defined in $BACKUP_EXCLUDE_LIST
    then
      BACKUP_EXCLUDE_PARAMS="$BACKUP_EXCLUDE_PARAMS:--exclude=$dir"
    fi    
  done
fi

# We are ready to tar

tar $BACKUP_EXCLUDE_PARAMS \
  -cpzf  "$BACKUP_PATH/$BACKUP_BASENAME.tar.gz" \
  -C "$BACKUP_SOURCE_DIR" \
  "$BACKUP_SOURCE_TARGET"
unset IFS       # our custom IFS has done it's job. Let's unset it!
set +f          # Globbing is back on 
```

I advise against using the TEMPIFS variable, like I did, because that method does not set the IFS back correctly. It's best to unset IFS when you are done with it

# java - 打印树程序

> ID：14625603
> 
> 赞同：0
> 
> 时间：2013-01-31T12:16:32.193
> 
> 标签：java, tree, binary-tree

我需要帮助来解决以下测试问题（这不是家庭作业或作业），用户可以从控制台输入 1-9 的值，并且程序接受 3 个数字，每行一个数字。如果用户**输入**以下内容：

*   3
*   2
*   4

**输出**应该是：

```
 1
             2 2
            3 3 3
             1
            2 2
               1
              2 2
             3 3 3
            4 4 4 4 
```

我对树没有任何经验，所以请告诉我那是什么树，我可以从哪里开始完成上述程序（我需要一些提示和建议，这将有助于我制作这个程序）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:26:55.710

No tree data structure is required. The general features of your program would be the following:

*   Read the three inputs
*   For each input n, use a for loop from 1 to n to print n lines using n as the output values
*   (The bit harder part:) On each line, you will also need to generate the required spacing. This will involve a calculation on your part based on n and the max value of n. Since n is a single digit, you won't have to take into account n taking up more characters once it's >= 10.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:23:29.550

定义一个将保存数字的二维字符数组。从顶部中间开始。使用递归。

# regex - 正则表达式 Vbscript

> ID：14625604
> 
> 赞同：0
> 
> 时间：2013-01-31T12:16:35.050
> 
> 标签：regex, asp-classic, vbscript

我正在摆弄正则表达式来缩短我一直在使用的字符串拆分例程。

我的购物车有一个字符串，该字符串提交给 asp 脚本，如下所示：

```
addnothing|-1, addRST115400112*2xl|0, addnothing|-1, addnothing|-1, addRST115400115*xs|0, addnothing|-1 
```

我希望能够提取代表两个库存项目的两个条目：

```
addRST115400112*2xl|0
addRST115400115*xs|0 
```

我已经设法让这段代码工作，但我不确定我正在使用的模式：

```
add[^n](.*)\*(.*)\|[0-9], 
```

这将返回：

```
addRST115400112*2xl|0, addnothing|-1, addnothing|-1, addRST115400115*xs|0, 
```

但我只希望它返回：

```
addRST115400112*2xl|0
addRST115400115*xs|0 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:28:44.183

你**贪婪地**匹配它（`.*`尽可能多地吃，所以在你的情况下它最终会吃到最后一个`\|[0-9]`ie `|0`）

您应该使用而不是**懒惰地**匹配它`.*?``.*`

* * *

所以你的正则表达式应该是

```
add(?!nothing)(.*?)\*(.*?)\|\d 
```

`\d`类似于`[0-9]`

`(?!nothing)`只是一个检查..它不匹配或消耗任何东西..它更好`[^n]`因为它更可靠，富有表现力并且不吃任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:38:28.653

试图保持 .Pattern 简单（这是 VBScript！）并使其更容易修改（真正挑选出库存项目的内容并不明确）：

```
 Dim sInp  : sInp      = "addnothing|-1, addRST115400112*2xl|0, addnothing|-1, addnothing|-1, addRST115400115*xs|0, addnothing|-1"
  Dim reCut : Set reCut = New RegExp
  reCut.Global  = True
  reCut.Pattern = "addR[^|]+\|\d"
  Dim oMTS : Set oMTS = reCut.Execute(sInp)
  If 2 = oMTS.Count Then
     WScript.Echo "Success:", Join(Array(oMTS(0).Value, oMTS(1).Value))
  Else
     WScript.Echo "Bingo:", reCut.Pattern
  End If 
```

输出：

```
Success: addRST115400112*2xl|0 addRST115400115*xs|0 
```

# android - Google Maps APIv2：找不到 com.google.settings 的提供商信息。已设置 API 密钥和 Internet 权限

> ID：14625609
> 
> 赞同：1
> 
> 时间：2013-01-31T12:16:54.317
> 
> 标签：android, google-maps, provider, google-maps-android-api-2

我想在模拟器中显示 Google Map APIv2。在我看来，我已经按照[Google 官方教程](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)和[本教程](http://nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/)完成了所有工作。我看到“+”和“-”按钮来调整缩放，但看不到地图。我尝试重新生成密钥库并提供另一个 api 密钥，但这没有效果。我唯一的猜测是 eclipse 使用调试密钥对我的应用程序进行了签名，尽管我已经从我的密钥库完成了导出过程。

或者可能是某种jdk问题？我安装了 jdk 1.7，android 使用 1.6

以下是我得到的错误：

```
E/Trace(681): error opening trace file: No such file or directory (2)
E/ActivityThread(681): Failed to find provider info for com.google.settings
E/ActivityThread(681): Failed to find provider info for com.google.settings
E/ActivityThread(681): Failed to find provider info for com.google.android.gsf.gservices
E/ActivityThread(681): Failed to find provider info for com.google.android.gsf.gservices 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="us.irz.findme"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="17" />

    <permission
          android:name="us.irz.findme.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
    <uses-permission android:name="us.irz.findme.permission.MAPS_RECEIVE"/>

        <uses-permission android:name="android.permission.INTERNET"/>        
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="us.irz.findme.LoginActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="us.irz.findme.DeviceActivity"></activity>
        <activity android:name="us.irz.findme.MapActivity"></activity>
        <activity android:name="us.irz.findme.TabsActivity"></activity>
            <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="my_api_key"/>
    </application>
</manifest> 
```

map.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.SupportMapFragment"/> 
```

MainActivity.java

```
public class MainActivity extends FragmentActivity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
}

...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:27:48.330

如果您想在模拟器中尝试，则必须使用目标 Google Api 级别 xx 创建模拟器，而不是使用 Android 2.3（例如），有时模拟器无法加载地图，所以我建议您使用真正的 Android 设备，你的手机，平板电脑或类似的东西......太检查 api 密钥是否正确.. 如果你懂西班牙语，可以按照这个 tuto，非常好[http://www.sgoliver.net/blog /?page_id=3011](http://www.sgoliver.net/blog/?page_id=3011)，搜索“Mapas en Android (Google Maps Android API v2) – I”部分...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:24:33.723

请检查您是否`Google Play Services`在项目中添加了库。

# windows-phone-7 - 作为全景背景的布局

> ID：14625612
> 
> 赞同：1
> 
> 时间：2013-01-31T12:17:09.140
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

我想在 Windows Phone 平台上为我的全景图设置背景。背景应该是单独的布局或 UI 元素，而不是静态 JPEG 或 PNG 图像。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:03:12.947

因此，这实际上可以通过覆盖全景图的平移图层（控件对视差效果的秘诀）来实现：

```
<phone:Panorama>
    <phone:Panorama.Template>
        <ControlTemplate TargetType="phone:Panorama">
            <Grid x:Name="TemplateGrid"
                  Background="Transparent"
                  Loaded="TemplateGrid_OnLoaded">
                  <Grid.RowDefinitions>
                      <RowDefinition Height="auto" />
                      <RowDefinition Height="*" />
                  </Grid.RowDefinitions>

                  <controlsPrimitives:PanningBackgroundLayer                       
                                 x:Name="BackgroundLayer"
                                 Grid.RowSpan="2"
                                 HorizontalAlignment="Left">
                      <!-- Whatever UI elements you like -->                          
                  </controlsPrimitives:PanningBackgroundLayer>
                  <controlsPrimitives:PanningTitleLayer x:Name="TitleLayer"
                                 Grid.Row="0"
                                 HorizontalAlignment="Left"
                                 CacheMode="BitmapCache"
                                 Content="{TemplateBinding Title}"
                                 ContentTemplate="{TemplateBinding TitleTemplate}"/>
                  <controlsPrimitives:PanningLayer x:Name="ItemsLayer"
                                 Grid.Row="1"
                                 HorizontalAlignment="Left">
                      <ItemsPresenter x:Name="items" />
                  </controlsPrimitives:PanningLayer>
              </Grid>
          </ControlTemplate>
      </phone:Panorama.Template>
</Panorama> 
```

我建议您谨慎使用背景图层中的内容。形状和图像很好，但按钮和其他类似的输入控件将能够接受点击和点击，这对用户来说会很奇怪。

# html - 如何在ie7中使用html和css将IMG标签水平和垂直居中？

> ID：14625614
> 
> 赞同：0
> 
> 时间：2013-01-31T12:17:10.863
> 
> 标签：html, css, internet-explorer-7

我将“a”标签放在我的html中并添加相对于它的位置，然后在“a”标签中附加“img”标签并添加绝对位置，左0，右0，上0，下0，边距自动到“img”标签.

此代码在 ie7 中不起作用。在其他浏览器中它工作正常。

我的代码有什么问题？

我创建代码如下：

HTML：

```
<a href="#" class="img-link-wrap"><img alt="Image 1" src="img/501.jpg"></a> 
```

CSS：

```
a.img-link-wrap {
border: 1px solid #999;
display: block;
position: relative;
height: 11em;
width: 10em;
text-align: center;
}

a.img-link-wrap img {
position: absolute;
top: 0;
left: 0;
bottom: 0;
right: 0;
margin: auto;
} 
```

感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:21:50.750

不确定它是否有效，但尝试添加`overflow: hidden;`到`a`标签的样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:41:10.650

要使元素居中，请使用以下代码片段：

```
.centered {
  position: based on your choice;
  top: 50%;
  left: 50%;
  margin-top: -(element_height/2);
  margin-left: -(element_width/2);
} 
```

# git - 逐字 git 修订

> ID：14625615
> 
> 赞同：4
> 
> 时间：2013-01-31T12:17:24.227
> 
> 标签：git, text, latex

据我所知，git 通过保存更改的行来存储修订。运行文本文档，如文档或冗长的 LaTeX 文件，通常有很长的行或在 80 个字符后被强制中断。当一个词被改变时，它会导致改变的行的巨大差异，从而使 git 存储库膨胀。

是否可以通过单词而不是行使 git 工作？我知道有`git diff --color-words`哪些以更漂亮的格式输出更改的单词。但这不会影响这些更改在内部存储的方式。

我也知道重新格式化文档以使其更适合版本控制的做法，方法是在每个句子后开始一个新行。但这会严重扰乱大多数文档的格式，同时仍然只会将问题缩小到句子长度。

换句话说，我可以将 git 配置为在创建修订时考虑空格字符而不是换行符吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:48:06.313

Git 不存储差异。SVN 可以。Git 通常存储完整的 blob。它还进行打包以节省空间（在运行`git gc`或推送到远程时），但同样，这不是基于行的，因为它使用二进制增量格式。唯一令人讨厌的是您注意到差异输出。但这与 Git 存储数据的方式无关。您可能想阅读[git 二进制差异算法（增量存储）是否已标准化？](https://stackoverflow.com/questions/9478023/is-the-git-binary-diff-algorithm-delta-storage-standardized)，[包文件规范](http://www.kernel.org/pub/software/scm/git/docs/technical/pack-format.txt)和ProGit 的第[9.2](http://git-scm.com/book/en/Git-Internals-Git-Objects)和[9.4节。](http://git-scm.com/book/en/Git-Internals-Packfiles)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:20:09.300

没有比将段落分成几行更好的解决方案了。

> 我知道有 git diff --color-words 以更漂亮的格式输出更改的单词。但这不会影响这些更改在内部存储的方式。

[这个答案](https://stackoverflow.com/a/6190412/11343)对在 git 中处理 LaTeX 以及与 git 一起使用有很好[的](https://tex.stackexchange.com/questions/1325/using-latexdiff-with-git)建议`latexdiff`。

# python - 如何使用 gspread lib 从谷歌电子表格中删除/删除行。在蟒蛇？

> ID：14625617
> 
> 赞同：16
> 
> 时间：2013-01-31T12:17:41.970
> 
> 标签：python, google-sheets, gspread

我想使用[`gspread`](https://github.com/burnash/gspread)库从谷歌电子表格中删除记录。

另外，如何获取谷歌电子表格中的行数/记录数？`gspread`提供`.row_count()`，它返回总行数，包括那些空白的，但我只想计算有数据的行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-12-14T17:03:08.537

自 gspread 版本 0.5.0（2016 年 12 月）以来，您可以删除带有`delete_row()`.

例如，要删除索引为 42 的行，您可以：

```
worksheet.delete_row(42) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-25T15:03:04.127

您能否准确指定删除行/记录的方式？他们在一张纸的中间吗？底部？最佳？

我有一种情况，我想在处理完数据后擦除除标题之外的所有数据。为此，我只调整了工作表的大小两次。

```
#first row is data header to keep    
worksheet.resize(rows=1)
worksheet.resize(rows=30) 
```

这是一个简单的蛮力解决方案，用于在不删除工作表的情况下擦除整张工作表。

# 用数据计算行数

一种方法是下载 json 对象中的数据，`get_all_records()`然后检查该对象的长度。该方法返回最后一个非空白行之上的所有行。如果后面的行不是空白但不是尾随空白，它将返回空白行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:28:55.740

阅读源代码似乎没有直接删除行的方法 - 只有添加它们`.resize()`的方法或调整工作表大小的方法。在获取行号时，有一种`.row_count()`方法可以为您完成这项工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-18T03:48:31.387

添加到@AsAP_Sherb 回答：

如果要计算有多少行，请不要使用`get_all_records()`- 而是使用`worksheet.col_values(1)`，并计算其长度。（而不是得到整个表，你只得到一列）我认为这会更节省时间（并且肯定会节省内存）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-17T10:16:43.033

`worksheet.delete_row(42)`已弃用（2021 年 12 月）。现在您可以使用

```
worksheet.delete_rows(42) 
```

新功能增加了可以同时删除多行的功能

```
worksheet.delete_row(42, 3) 
```

它将删除接下来的三行，从第 42 行开始。

请注意，它从 1 开始计算行数（因此不是基于零的编号）。

# android-notifications - 如何固定一个android正在进行的通知

> ID：14625621
> 
> 赞同：0
> 
> 时间：2013-01-31T12:18:24.180
> 
> 标签：android-notifications

我想创建一个 andriod 正在进行的通知，该通知将始终位于所有其他通知的顶部，包括在显示通知后将到达的通知。

我应该怎么做才能实现这种行为？

# php - 将xml数据添加到xml文件的php表单

> ID：14625624
> 
> 赞同：0
> 
> 时间：2013-01-31T12:18:33.370
> 
> 标签：php, xml

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

我正在尝试创建一个表单，允许我使用 php 和 xml dom 在 xml 文件中添加新记录。xml 文件在服务器上，我希望客户端能够输入并添加到 xml 文件中。到目前为止，这是我的代码

```
$data = "books.xml";

$xml = simplexml_load_file($data);
$book = $xml->addChild("book");
$author = $_POST["author"];
$title = $_POST["title"];
$publisher = $_POST["publisher"];
$book->addChild("author", $author);
$book->addChild("title", $title);
$book->addChild("publisher", $publisher);

echo $xml->saveXML(); 
```

表格

```
<form action="addchild.php" method="post">
Name: <input type="text" name="author" />
Email: <input type="text" name="title" />
Comment: <input type="text" name="publisher" />
<input type="submit" />
</form> 
```

XML

```
<books>
<book>
<author>Jack Herrington</author>
<title>PHP Hacks</title>
<publisher>O'Reilly</publisher>
  </book>
<book>
<author>Jack Herrington</author>
<title>Podcasting Hacks</title>
<publisher>O'Reilly</publisher>
</book>
</books> 
```

# android - 如何使用 Web 服务在不同设备上的应用程序之间共享数据？

> ID：14625630
> 
> 赞同：0
> 
> 时间：2013-01-31T12:18:59.613
> 
> 标签：android, web-services

我有一个游戏应用程序，它显示用户完成游戏的最终得分。一次，不同设备上的任意数量的用户都可以参与游戏。现在我想要一种机制，用户可以通过该机制按照其他玩家的分数顺序查看提交时的分数。

为此，我发现需要将每个播放器的数据发送到服务器（在我的情况下为 asp Web 服务），服务器会将所有播放器的数据推送到每个设备。http post, ksoap2 中的哪种方法适用于此，我该怎么做？我在网上搜索，我知道如何使用 post 方法将数据发送到服务器，但我不知道如何在服务器上获取数据并将数据发送到应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:29:55.290

方法很简单

*   从游戏应用程序提交分数到服务器端组件（如果是 REST，则为 Restlet）
*   将此作为服务公开（使用各种选项获取/发布/更新/删除）
*   根据请求提供分数
*   有一个模块来与服务通信，Android 应用程序中的 RESTClient

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:32:20.537

要将消息从您的服务器推送到其他 android 客户端，请查看[适用于 Android 的 Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)。通过这种方式，您可以在您的服务器上发生一个事件，当其他玩家进行更改时将消息推送到客户端。

# php - 在 php/mysql 中水平显示记录

> ID：14625635
> 
> 赞同：2
> 
> 时间：2013-01-31T12:19:20.063
> 
> 标签：php, mysql

我有以下查询

```
SELECT DISTINCT * 
FROM   aa_tbl 
       LEFT JOIN bb_tbl 
              ON ( bb_uid = aa_source 
                   AND bb_date = $date 
                    OR bb_month = $month 
                       AND bb_year = $year ) 
WHERE  bb_lvl = 'User' 
```

它显示这样的数据，效果很好。

![看图](../Images/fa82ba5838eebbb22a92a2139e2da065.png)

但我希望它像这样显示。

![看图](../Images/e37f3cacfbdb8f5ae1dedcc71af2b4cd.png)

是否需要对查询进行调整以水平显示项目而不添加另一行。

**注意：**
user1 在**AA_tbl**表上，数字（句点）在**BB_tbl**表上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:51:38.477

尝试这个 ：

```
SELECT aa_tbl.*, bb_tbl.bb_date, bb_tbl.bb_month, bb_tbl.bb_year
FROM aa_tbl JOIN bb_tbl ON aa_tbl.source = bb_uid
WHERE (bb_date = $date AND bb_month = $month  AND bb_year = $year)
     AND bb_lvl = 'User'
GROUP BY bb_tbl.id  // id of bb_tbl here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:22:28.890

在用户列中尝试 GROUP BY 子句。

# sql - 如何从 vb.net 传递参数

> ID：14625640
> 
> 赞同：1
> 
> 时间：2013-01-31T12:19:37.817
> 
> 标签：sql, vb.net, parameters, stored-functions

我有一个程序，它会在每晚自动运行、运行查询并通过电子邮件发送结果。在我的程序中，我正在调用一个函数作为查询的一部分......我想要传递程序运行的日期作为参数。（@startdate 和 @enddate）@startdate 将始终是 00:00:00 的“今天”日期，而 enddate 将始终是 23:59:59 的“今天”日期。举个例子。如果该程序在今晚运行，它将通过 1/31/13 作为日期。明天，它将通过 2/1/13 作为日期，下一个日期 2/2/13 等。如果我可以在查询级别执行此操作，那也很好......下面是我的代码：

```
SELECT
  SUM(QTY) AS Discounts
FROM
  dbo.fFinancialDataFull('Date Range Report', @startdate , @enddate, '1', '1', 'ALL', 'ALL', 'ALL', 'ALL', '1', '1', '1', '1', '1') AS fFinancialDataFull_1
WHERE
  (ReportCategoryID = 62)) AS unlimitedtbl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:00:56.553

//这些是日期变量..如果你需要它们单独

```
Dim TodayDt As DateTime = DateTime.Today
Dim Tomorrow As DateTime = DateTime.Today.AddDays(1)
Dim TodayEnd as DateTime
TodayEnd = Tomorrow.AddSeconds(-1) 
```

//这是在SQL Server中执行的SQL命令

```
 SELECT
  SUM(QTY) AS Discounts
FROM
  dbo.fFinancialDataFull('Date Range Report', startdate , enddate, '1', '1', 'ALL', 'ALL', 'ALL', 'ALL', '1', '1', '1', '1', '1') AS fFinancialDataFull_1
WHERE ReportCategoryID = 62
 AND startdate = TodayDt
 AND enddate = TodayEnd AS unlimitedtbl 
```

//这是你需要编写的函数，以使相同的 SQL 在 VB 上运行

```
Public Function GetValueByDates() As String
    Dim TodayDt As DateTime = DateTime.Today
    Dim Tomorrow As DateTime = DateTime.Today.AddDays(1)
    Dim TodayEnd as DateTime
    TodayEnd = Tomorrow.AddSeconds(-1)
    Dim ReportCategoryID = 62

    Dim sql As String = "       SELECT
      SUM(QTY) AS Discounts
    FROM
      dbo.fFinancialDataFull('Date Range Report', startdate , enddate, '1', '1', 'ALL', 'ALL', 'ALL', 'ALL', '1', '1', '1', '1', '1') AS fFinancialDataFull_1
    WHERE ReportCategoryID = @ReportCategoryID
     AND startdate = @TodayDt
     AND enddate = @TodayEnd AS unlimitedtbl"

    Using cn As New SqlConnection("Your connection string here"), _
        cmd As New SqlCommand(sql, cn)

        cmd.Parameters.Add("@TodayDt", SqlDbTypes.DateTime).Value = TodayDt
        cmd.Parameters.Add("@TodayEnd", SqlDbTypes.DateTime).Value = TodayEnd
        cmd.Parameters.Add("@ReportCategoryID", SqlDbTypes.int).Value = ReportCategoryID 
     Return cmd.ExecuteScalar().ToString()
    End Using
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:34:34.483

要在 VB.Net 代码中调用此函数，应将函数调用放在存储过程中，并从 VB.NET 调用此过程，传递参数如下：

```
 Dim sqlcmd As New SqlClient.SqlCommand()
 sqlcmd.CommandType = CommandType.StoredProcedure
 sqlcmd.CommandText = "PROCEDURE_NAME"
 sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@startdate", DateTime.Now.Date))
 sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@enddate", DateTime.Now.Date.AddDays(1).AddSeconds(-1)));
 Dim obj As Object = sqlcmd.ExecuteScalar() 
```

如果您无法创建存储过程，则可以在查询级别执行：

```
declare @startdate datetime
declare @enddate datetime

set @startdate = cast(floor(cast(getdate() as float))as datetime) -- truncate the time part
set @enddate = dateadd(S, -1, dateadd(d, 1, @startdate)) -- add 1 day, subtract 1 minute from today 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:36:37.753

试试这个 ：

```
Dim StartDate as string = DateTime.Today.ToString("yyyy/MM/dd") & " 00:00:00"
Dim EndDate as string = DateTime.Today.ToString("yyyy/MM/dd") & " 23:59:59" 
```

我不知道您使用的是什么数据库服务器。如果不起作用，请尝试不同的日期格式，例如`DateTime.Today.ToString("yyyy-MM-dd")`

# json - grails中hasMany关系的选择性深度渲染

> ID：14625641
> 
> 赞同：9
> 
> 时间：2013-01-31T12:19:40.980
> 
> 标签：json, grails, grails-orm

对于以下域模型：

```
class Route {
    String  name
    static  hasMany     = [checkPoints:CheckPoint]  
    static  belongsTo   = [someBigObject:SomeBigObject]

    static mapping = {
        checkPoints lazy: false
    }
} 
```

`Route`我需要从 Web 服务返回一个特定的 JSON。我希望这个 JSON 包含所有`checkPoints`但不包含其他组合（即：）`someBigObject`。

如果我做

```
def route = Route.findById(id)
render route as JSON 
```

我得到的只是 的 id `checkPoints`，没有获取其他字段：

```
{
    "class": "com.example.Route",
    "id": 1,
    "checkPoints": [
        {
            "class": "CheckPoint",
            "id": 1
        },
        {
            "class": "CheckPoint",
            "id": 2
        },
        {
            "class": "CheckPoint",
            "id": 4
        },
        {
            "class": "CheckPoint",
            "id": 3
        }
    ],
    "someBigObject": {
        "class": "SomeBigObject",
        "id": 2
    }
} 
```

但如果我这样做

```
JSON.use('deep') {
    render route as JSON
} 
```

我得到了一切。我的意思是，几乎所有的数据库都是通过各种关系获取的。

有没有办法在不手动创建 jsonMaps 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T12:49:38.383

您可以为选定的类注册自己的 JSON 编组器并返回要呈现的属性。Map 可以通过迭代类字段来自动完成。Marshaller 可以在创建期间例如在引导程序或域类中注册。

```
JSON.registerObjectMarshaller(Route) {
    return [name:it.name, checkPoints:it.checkPoints]
} 
```

There is nice article about it under: [http://manbuildswebsite.com/2010/02/15/rendering-json-in-grails-part-3-customise-your-json-with-object-marshallers/](http://manbuildswebsite.com/2010/02/15/rendering-json-in-grails-part-3-customise-your-json-with-object-marshallers/)

Hope it helps

# android - Android 中最近设备更新的 Toast 通知问题

> ID：14625643
> 
> 赞同：5
> 
> 时间：2013-01-31T12:19:52.000
> 
> 标签：android, notifications, toast

这篇文章与现有提交的错误有关：

[https://groups.google.com/forum/#!topic/android-developers/K7pjy3Gm5Lk/discussion](https://groups.google.com/forum/#!topic/android-developers/K7pjy3Gm5Lk/discussion)

显然，在系统更新后的某些设备中，没有显示敬酒。问题发生在首选项中，对于您的应用程序，通知复选框未选中。因此，您的应用程序的所有祝酒词都将被隐藏。这发生在三星 Galaxy Tab 2 上，但也可能发生在其他设备上：

[Nexus 7 平板电脑上未显示 Toast 通知](https://stackoverflow.com/questions/12056097/toast-notifications-not-showing-up-on-nexus-7-tablet)

或在谷歌组链接上评论的 SGS3 上。

我不知道这是否发生在所有带有果冻豆的设备上。

建议的“修复”对我来说很好，但如果我的应用被一些不知道如何操作或不想激活通知的人下载了怎么办。我在应用程序中非常依赖 toasts 来通知用户一些反馈，所以我只看到一个解决方案：->实现我自己的 toast 类，与 toast 不同但具有相似的行为。

我四处搜索我还没有找到任何已经完成的东西所以我问是否有人找到任何自定义实现（在我自己开始编码之前）？

目标是：即使关闭了此应用的通知，也显示敬酒或替代品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:19:57.637

> 我不知道这是否发生在所有带有果冻豆的设备上。

AFAIK，确实如此。

> 我非常依赖应用程序中的 toasts 来通知用户一些反馈

这不是一个好主意。Toast 非常短暂，用户很容易错过它们。祝酒词适用于简单的咨询/确认消息——以及书籍示例:-)——但仅此而已。

> 目标是：即使关闭了此应用的通知，也显示敬酒或替代品。

希望您的*真正*目标是获得优质的用户体验。依靠`Toasts`被看到不会带来高质量的用户体验。

`Toasts`也因为其他原因而失宠，例如它们独立于底层活动这一事实，因此`Toast`如果用户已经在应用程序的其他地方导航，则显示可能不相关。领先的替代实现称为“crouton”，基于[Cyril Mottier 在博客文章中使用的](http://android.cyrilmottier.com/?p=773)一个术语，具有几个开源实现，例如[这个](https://github.com/keyboardsurfer/Crouton)。

# delphi - 德尔福型铸造

> ID：14625644
> 
> 赞同：11
> 
> 时间：2013-01-31T12:19:57.227
> 
> 标签：delphi, types, casting

我需要澄清一下 Delphi 类型转换
我写了一个包含两个类的示例：TClassA 和 TClassB，TClassB 派生自 TClassA。

代码如下：

```
program TEST;

{$APPTYPE CONSOLE}

uses
  System.SysUtils;

type
  TClassA = class(TObject)
  public
    Member1:Integer;
    constructor Create();
    function ToString():String; override;
  end;

type
  TClassB = class(TClassA)
  public
    Member2:Integer;
    constructor Create();
    function ToString():String; override;
    function MyToString():String;
  end;

{ TClassA }

constructor TClassA.Create;
begin
  Member1 := 0;
end;

function TClassA.ToString: String;
begin
  Result := IntToStr(Member1);
end;

{ TClassB }

constructor TClassB.Create;
begin
  Member1 := 0;
  Member2 := 10;
end;

function TClassB.MyToString: String;
begin
  Result := Format('My Values is: %u AND %u',[Member1,Member2]);
end;

function TClassB.ToString: String;
begin
  Result := IntToStr(Member1) + ' - ' + IntToStr(Member2);
end;

procedure ShowInstances();
var
  a: TClassA;
  b: TClassB;
begin
  a := TClassA.Create;
  b := TClassB(a); // Casting (B and A point to the same Memory Address)
  b.Member1 := 5;
  b.Member2 := 150; // why no error? (1)

  Writeln(Format('ToString: a = %s, a = %s',[a.ToString,b.ToString])); // (2)
  Writeln(Format('Class Name: a=%s, b=%s',[a.ClassName,b.ClassName])); // (3)
  Writeln(Format('Address: a=%p, b=%p',[@a,@b])); // (4)
  Writeln(b.MyToString); // why no error? (5)

  readln;
end;

begin
  try
    ShowInstances;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

程序输出为：

```
ToString: a = 5, a = 5
Class Name: a=TClassA, b=TClassA
Address: a=0012FF44, b=0012FF40
My Values is: 5 AND 150 
```

(1) Member2 地址是什么？这是一个可能的“访问冲突”吗？
(2) ok，ToString() 方法指向同一个地址
(3) 为什么a 和b 有相同的ClassName？
(4) 好的，a 和 b 是两个不同的变量
(5) 如果 b 是 TClassA，为什么可以使用“MyToString”方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-31T13:26:10.357

您正在对变量应用*硬类型转换。*当你这样做时，你是在告诉编译器你知道你在做什么并且编译器*信任*你。

> (1) Member2 地址是什么？这是一个可能的“访问冲突”吗？

当您为类的成员赋值时，编译器使用变量的类定义来计算该成员在内存空间中的偏移量，因此当您有这样的类声明时：

```
type
  TMyClass = class(TObject)
    Member1: Integer; //4 bytes
    Member2: Integer; //4 bytes
  end; 
```

该对象的内存表示如下所示：

```
reference (Pointer) to the object
|
|
--------> [VMT][Member1][Member 2][Monitor]
Offset     0    4        8         12 
```

当您发出这样的声明时：

```
MyObject.Member2 := 20; 
```

编译器只是使用该信息来计算要应用该分配的内存地址。在这种情况下，编译器可能会将赋值转换为

```
PInteger(NativeUInt(MyObject) + 8)^ := 20; 
```

因此，您的分配成功只是因为（默认）内存管理器的工作方式。当您尝试访问不属于您的程序的内存地址时，操作系统会产生 AV。在这种情况下，您的程序从操作系统中占用的内存超过了所需的内存。恕我直言，当您没有获得 AV 时，实际上您很不走运，因为您的程序内存现在可能会默默地损坏。碰巧位于该地址的任何其他变量都可能已更改其值（或元数据），并且会导致未定义的行为。

> (2) ToString() 方法指向同一个地址

由于 ToString() 方法是一个虚拟方法，因此该方法的地址存储在 VMT 中，并且调用是在运行时确定的。看看[TObject 包含哪些数据？](https://stackoverflow.com/questions/679022/what-data-does-a-tobject-contain)，并阅读参考书籍章节：[Delphi 对象模型](http://oreilly.com/catalog/delphi/chapter/ch02.html)。

> (3)为什么a和b有相同的ClassName？

类名也是对象运行时元数据的一部分。您将错误的模具应用于对象这一事实并不会改变对象本身。

> (4) a和b是两个不同的变量

当然，你声明了它，看看你的代码：

```
var
  a: TClassA;
  b: TClassB; 
```

嗯，两个不同的变量。在 Delphi 中，对象变量是引用，因此，在某些代码行之后，它们都引用了相同的地址，但这是另一回事。

> (5) 如果b是TClassA，为什么可以使用“MyToString”方法？

因为您告诉编译器没问题，并且如上所述，编译器信任您。它很hacky，但Delphi也是一种低级语言，如果你愿意，你可以做很多疯狂的事情，但是：

# 安全行事

如果您希望（并且您肯定希望大部分时间）安全，请不要在代码中应用这样的硬转换。使用[**as**运算符](http://docwiki.embarcadero.com/RADStudio/XE3/en/Class_References#The_as_Operator)：

> **as**运算符执行检查的类型转换。表达方式
> 
> *对象* **作为** *类*
> 
> 返回对与 object 相同的对象的引用，但具有 class 给定的类型。在运行时，object 必须是由 class 或其后代之一表示的类的实例，或者为 nil；否则会引发异常。如果声明的对象类型与类无关——也就是说，如果类型不同并且一个不是另一个的祖先——则会导致编译错误。

因此，使用 as 运算符，您在编译时和运行时都是安全的。

将您的代码更改为：

```
procedure ShowInstance(A: TClassA);
var
  b: TClassB;
begin
  b := A as TClassB; //runtime exception, the rest of the compiled code 
                     //won't be executed if a is not TClassB
  b.Member1 := 5;
  b.Member2 := 150; 

  Writeln(Format('ToString: a = %s, a = %s',[a.ToString,b.ToString])); 
  Writeln(Format('Class Name: a=%s, b=%s',[a.ClassName,b.ClassName])); 
  Writeln(Format('Address: a=%p, b=%p',[@a,@b])); 
  Writeln(b.MyToString); 

  readln;
end;

procedure ShowInstances();
begin
  ShowInstance(TClassB.Create); //success
  ShowInstance(TClassA.Create); //runtime failure, no memory corrupted.
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T12:53:21.657

1.  `Member2`具有未由内存管理器分配的地址。写入的可能结果`Member2`是堆损坏，随后在程序的完全不同部分发生访问冲突。这是一个非常讨厌的错误，编译器在这里帮不了你。在进行不安全的类型转换时，您必须知道自己在做什么。

2.  那是因为`ToString`方法是虚拟的，所以它的地址是由正在创建的类实例的实际类型决定的。如果您用静态替换虚拟方法（在您的情况下通过替换`override`指令`reintroduce`），结果会有所不同。

3.  因为`ClassName`方法也有点虚拟（不是真正的 VMT 成员，但那是微不足道的实现细节）。

4.  是的，`a`并且`b`是对同一个实例的两个引用。

5.  因为`ToMyString`方法是静态的。实例的实际类型与静态方法无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T12:31:42.470

> (1) Member2 地址是什么？这是一个可能的“访问冲突”吗？

是的。AV是可能的。在你的情况下，你很幸运:)

> ok，ToString() 方法指向同一个地址

是的，因为 VTable 在创建时涉及。

> (3)为什么a和b有相同的ClassName？

答案与（2）相同。

> (4) ok，a和b是两个不同的变量

并不真地。你从堆栈打印地址:)

> (5) 如果b是TClassA，为什么可以使用“MyToString”方法？

b 是 TClassB 但**错误地**指向 TClassA 实例。

您应该使用**as**运算符进行此类强制转换。在这种情况下，它会失败。

# asp.net - ASP.net 下拉列表意外事件触发行为

> ID：14625645
> 
> 赞同：0
> 
> 时间：2013-01-31T12:20:03.613
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit

我在使用下拉框时遇到了一些奇怪的行为，我希望有人能解释发生了什么。我有一个构建行表的数据中继器。每行在一个单元格中都有一个下拉列表（隐藏）和一个链接按钮（未隐藏）。预期的行为是，当用户单击特定单元格的链接按钮时，它会触发服务器命令。该命令做了一些事情，但也设置了 DDL 的选定值，然后将其设置为可见并将其自身（链接按钮）设置为隐藏。问题是下拉列表的事件应该在每次所选索引更改时触发。但是，最终发生的是它只在用户第一次更改 DDL 值时触发。之后，事件将停止触发。此外，所有这些都在用户控件中，所有代码都在更新面板中。正如我在代码示例中提到的，如果我不更改 ddl 值，在链接按钮事件中，此行为会停止，但 DDL 不会设置正确的值。这是我的代码：

链接按钮事件：

```
Protected Sub edit_click(ByVal sender As Object, ByVal e As EventArgs)
    Dim btn As LinkButton = CType(sender, LinkButton)
    Dim userId As String = btn.CommandArgument
    Dim ds As New List(Of myObject)
    Dim currentChoice As New myObject
    Dim parent As RepeaterItem = CType(btn.Parent, RepeaterItem)

    Dim lbl As Label = CType(parent.FindControl("userId"), Label)
    Dim ma As DropDownList = CType(parent.FindControl("ddlMustApprove"), DropDownList)
    Dim maLbl As Label = CType(parent.FindControl("mustApprove"), Label)

     'just get a list of values to chose from
    ds = Session("userNotificationDS")
    currentChoice = ds.Find(Function(p As myObject) p.User.NetworkID = userId)

    With maLbl
        .Width = 100
        .BorderColor = Drawing.Color.DarkBlue

    End With

    'if I disable this next line, everything works fine (but then the correct selection wont be chosen)
    ma.Text = currentChoice.MustApprove
    ma.CssClass = ""
    maLbl.Visible = False
End Sub 
```

DDL 更改事件：

```
Protected Sub selection_Change(ByVal sender As Object, ByVal e As EventArgs) 
    Dim cnt As DropDownList = CType(sender, DropDownList)
    Dim parent As RepeaterItem = CType(cnt.Parent, RepeaterItem)
    Dim maLbl As Label = CType(parent.FindControl("mustApprove"), Label)
    Dim userId As Label = CType(parent.FindControl("userId"), Label)
    Dim ds As New List(Of myObject)

    'just gets the value to set the DDL to
    ds = Session("userNotificationDS")

    For Each i As myObjectIn ds
        If (i.User.NetworkID = userId.Text) Then
            i.MustApprove = cnt.SelectedValue
        End If
    Next

    maLbl.Visible = True
    cnt.CssClass = "hidden"
    Session("userNotificationDS") = ds
    bindData(ds)
End Sub 
```

这是前端代码中的Datarepeater：

```
<asp:Repeater ID="dataRepeateUsers" runat="server"  EnableViewState="false" OnItemCreated="RepeaterItemCreated" >
<HeaderTemplate> 
          .... column headers
</HeaderTemplate>  
     <ItemTemplate>  
        <tr  class="listcolor">
          <td style="border:0px; border-right:1px solid  #808080  ; border-bottom:0px solid #808080;">
            <asp:DropDownList runat="server" ID="ddlMustApprove" CssClass="hidden"  OnTextChanged="selection_Change" EnableViewState="true" AutoPostBack="true" >
                <asp:ListItem Text="True" Value="True"></asp:ListItem>
                <asp:ListItem Text="False" Value="False"></asp:ListItem>
           </asp:DropDownList>
          <asp:label ID="mustApprove" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "MustApprove") %>'></asp:label>
         </td>
       </tr>
     </ItemTemplate>
     <AlternatingItemTemplate>
        <tr  class="listcolor">
          <td style="border:0px; border-right:1px solid  #808080  ; border-bottom:0px solid #808080;">
            <asp:DropDownList runat="server" ID="ddlMustApprove" CssClass="hidden"  OnTextChanged="selection_Change" EnableViewState="true" AutoPostBack="true" >
                <asp:ListItem Text="True" Value="True"></asp:ListItem>
                <asp:ListItem Text="False" Value="False"></asp:ListItem>
           </asp:DropDownList>
          <asp:label ID="mustApprove" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "MustApprove") %>'></asp:label>
         </td>
       </tr>             
     </AlternatingItemTemplate> 
 <FooterTemplate>  
</FooterTemplate>  
    </asp:Repeater> 
```

我的代码是使用 .Net 4.0 和 AjaxControlToolkit 4.1.60919 在 VS 2010 中编写的。

谢谢杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:32:48.150

```
ma.Text = currentChoice.MustApprove 
```

将此行替换为以下行。

```
if(ma.items.FindByText(currentChoice.MustApprove) != null)
{
ma.SelectedIndex = -1;
ma.items.FindByText(currentChoice.MustApprove).selected = true;
 } 
```

只需像上面一样将下拉列表的 selectedindex 设置为 -1。

# jquery - 在活动背景上添加淡入淡出效果

> ID：14625651
> 
> 赞同：1
> 
> 时间：2013-01-31T12:20:13.990
> 
> 标签：jquery, css, fade

我有一个菜单结构：

```
<ul id="nav">
    <li id="button1" class="active"><a href="#page-1" title="creative">creativ</a><
   <li id="button1"><a href="#page-1" title="creative">creativ</a></ul> 
```

我每`.active`堂课都添加背景图片：

```
#nav li.active a{cursor:default;
                 background:url(images/nav-li-a_hover.png) no-repeat bottom center;
                 padding-bottom:5px;} 
```

它正在工作。但是我想当我单击一个菜单项时，获得具有淡入淡出效果的背景图像。我如何通过 jQuery 或 CSS3 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:28:12.203

首先不要`id`在不同的对象上使用相同的，`id`'s 必须是唯一的，使用`class`来代替。还有一件事情; 不要忘记关闭 html 元素，你`li`的 s 没有关闭。

**更新：**如果你只想 bg 淡入比你应该分离元素。`s`在里面创建一个元素`a`，然后像这样操作它：

```
$('ul#nav li').click(function() {
    $(this).closest('s').hide().addClass('.active').fadeIn(500);
}); 
```

真正的html：

```
<ul id="nav">
   <li class="button1 active"><a href="#page-1" title="creative">creativ<s></s></a></li>
   <li class="button1"><a href="#page-1" title="creative">creativ<s></s></a></li>
</ul> 
```

CSS：

```
#nav li.active s {background:url(images/nav-li-a_hover.png) no-repeat bottom center;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:54:24.937

如果我理解正确，您可以执行以下操作：

```
$('.menu_item').click(function() {
  $(this).fadeIn('slow', function() {
    //completed animation 
  });
}); 
```

但是，如果您正在调用一个新页面，这将无法按您的意愿工作，因为内容将被刷新。

解决此问题的一种方法是使用 ajax 请求，成功后将更新页面的一部分，并且导航部分不会受到影响：

```
$.ajax({
    type: "GET",
    url: url,
    data: {"data":data },
    success: function(response){
        //success code
        $("#content").html(response)
    },
    error: function(response){
        //error code
    }
}); 
```

或者您可以在加载新页面时进行淡入淡出：

```
$(document).ready(function(){
   //actions
}) 
```

您将需要找出按下了哪个按钮并对其进行淡入。这取决于您使用的技术和品味，但一种方法是在带有所选菜单项的页面上放置一个 var。

# ruby - 动态类型、鸭子类型和参数多态之间有什么区别？

> ID：14625654
> 
> 赞同：3
> 
> 时间：2013-01-31T12:20:21.830
> 
> 标签：ruby, language-agnostic

动态类型、鸭子类型、多态性和参数多态性有什么区别？

我问是因为 Ruby 有这些（[根据维基百科](http://en.wikipedia.org/wiki/Ruby_%28programming_language%29)），尽管我更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:24:25.227

**动态类型**意味着您不需要定义变量的类型，语言解释器将尝试猜测该变量的类型（数字、布尔值、字符串等）。

**鸭子类型**意味着我们对对象是什么类型不感兴趣，相反我们更关心对象的功能方面：如果一个对象返回了我们感兴趣的那些方法，那么这意味着该对象满足我们的要求。因此，有一句众所周知的短语：*“如果一只鸟像鸭子一样走路，像鸭子一样游泳，像鸭子一样嘎嘎叫，那只鸟就是鸭子”*。

来自[Wikipedia](http://en.wikipedia.org/wiki/Parametric_polymorphism)： **参数多态性**是一种使语言更具表现力的方法，同时仍保持完全的静态类型安全。使用参数多态性，可以通用地编写函数或数据类型，以便它可以相同地处理值而不依赖于它们的类型。

# magento - Magento 时事通讯订阅提供 500 内部服务器错误

> ID：14625658
> 
> 赞同：0
> 
> 时间：2013-01-31T12:20:34.713
> 
> 标签：magento, magento-1.7, newsletter

有趣的错误。当我尝试订阅 magento 时事通讯时，我最终会收到内部服务器错误 500。但是通过 url 刷新时，它让我感谢您订阅并添加到数据库中！

任何人都可以对此有所了解或面临类似的问题吗？

朱利安

PS：提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:10:10.550

请查看您的网络服务器日志以了解错误。通常服务器会记录发生的 php 错误，这会导致 500 内部服务器错误。

许多事情可能会导致此错误。例如 max_execution_time 或内存溢出。

# python - 打印日期的 django 时区

> ID：14625662
> 
> 赞同：3
> 
> 时间：2013-01-31T12:20:46.133
> 
> 标签：python, django, datetime, django-timezone

我有`TIME_ZONE = 'America/Chicago'`设置在settings.py中的django项目。

我正在使用这样的日期：

```
from django.utils.dateparse import parse_datetime
import datetime
from datetime import datetime

dateobject = parse_datetime(some_string)
now = datetime.now()
if now > dateobject:
    # do something 
```

然后在模板中我使用：

```
dateobject|date:"d M Y H:i" 
```

我想在不同时区的所有模板中显示日期（例如 +6 小时）。但我希望项目时区为“美国/芝加哥”，并且 datetime.now() 返回的日期在这个时区。所以我只想将所有显示的日期更改为 +6 小时。我怎么能做到这一点？

* * *

编辑

好的，这对我有用：

```
{% load tz %}
{{ datetimevalue|timezone:"Europe/Paris" }} 
```

它以+1小时打印日期。但这不起作用：

```
{% load tz %}
{% timezone "Europe/Paris" %}
{{ datetimevalue }}
{% endtimezone %} 
```

它打印日期不变。我必须为所有模板全局设置它。我该怎么做？

我总是使用日期过滤器（`dateobject|date:"d M Y H:i"`），所以也许有什么方法可以全局“挂钩”这个过滤器以将其更改为`dateobject|timezone:"Europe/Paris"|date:"d M Y H:i"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:57:50.160

这更像是一个 python 问题，您可以使用`timedelta`变量将时间添加到`datetime`. 例如

```
import datetime
b = datetime.datetime.now() + datetime.timedelta(hours=n) 
```

或者您可以直接更改 的时区`datetime`，例如：

```
datetime.astimezone(GMT2()) 
```

或者使用函数`tzinfo`中的变量`now`：

```
datetime.datetime.now(EST()) 
```

因此，必须在将某些内容传递给模板之前完成这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:02:30.850

请参阅：[http](http://docs.djangoproject.com/en/dev/ref/settings/#time-zone) ://docs.djangoproject.com/en/dev/ref/settings/#time-zone 。

```
{% now h:ia %} 
```

试试这个…………

# iphone - UIImageView 图像相互重叠

> ID：14625666
> 
> 赞同：0
> 
> 时间：2013-01-31T12:21:02.557
> 
> 标签：iphone, ios, uiimageview, uiimage

我有一个小问题，我试图在用户单击时生成 QR 码，从 UITextField 获取字符串。一切都很好，除了一个新的 UIImageView 与另一个重叠，尽管我正在重新初始化它。

他的作用：

```
- (void)showQR
{
    if([textFieldRounded.text length] != 0 ){
        NSString* aVeryLongURL = textFieldRounded.text;
        DataMatrix* qrMatrix = [QREncoder encodeWithECLevel:QR_ECLEVEL_H version:QR_VERSION_AUTO string:aVeryLongURL];
        qrcodeImage = [QREncoder renderDataMatrix:qrMatrix imageDimension:qrcodeImageDimension];
        qrcodeImageView = [[UIImageView alloc] initWithImage:qrcodeImage];
        CGRect parentFrame = self.view.frame;
        CGRect tabBarFrame = self.tabBarController.tabBar.frame;
        CGFloat x = (parentFrame.size.width - qrcodeImageDimension) / 2.0;
        CGFloat y = (parentFrame.size.height - qrcodeImageDimension - tabBarFrame.size.height) / 2.0;
        y = y+75;
        CGRect qrcodeImageViewFrame = CGRectMake(x, y, qrcodeImageDimension, qrcodeImageDimension);
        [qrcodeImageView setFrame:qrcodeImageViewFrame];
        [self.view addSubview:qrcodeImageView];
        return;
    }
    else
    {
        UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Enter the URL" delegate:nil cancelButtonTitle: @"OK" otherButtonTitles:nil];
        [alert1 show];
        return;
    }

} 
```

每次用户单击调用此函数的提交按钮时，一个新的 QR 会与旧的 QR 重叠。

我有我声明的 .h 文件

```
@property (atomic, strong)  UIImageView *qrcodeImageView;
@property (atomic, strong)  UIImage* qrcodeImage; 
```

也在.m文件中合成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:36:10.210

这将工作，试试这个

```
- (void)showQR
{

if([textFieldRounded.text length] != 0 ){
    NSString* aVeryLongURL = textFieldRounded.text;
    DataMatrix* qrMatrix = [QREncoder encodeWithECLevel:QR_ECLEVEL_H version:QR_VERSION_AUTO string:aVeryLongURL];
    qrcodeImage = [QREncoder renderDataMatrix:qrMatrix imageDimension:qrcodeImageDimension];

    if (qrcodeImageView && [qrcodeImageView superview] && qrcodeImage!=nil ) {
        qrcodeImageView.image = qrcodeImage;
        return;
    }

    qrcodeImageView = [[UIImageView alloc] initWithImage:qrcodeImage];
    CGRect parentFrame = self.view.frame;
    CGRect tabBarFrame = self.tabBarController.tabBar.frame;
    CGFloat x = (parentFrame.size.width - qrcodeImageDimension) / 2.0;
    CGFloat y = (parentFrame.size.height - qrcodeImageDimension - tabBarFrame.size.height) / 2.0;
    y = y+75;
    CGRect qrcodeImageViewFrame = CGRectMake(x, y, qrcodeImageDimension, qrcodeImageDimension);
    [qrcodeImageView setFrame:qrcodeImageViewFrame];
    [self.view addSubview:qrcodeImageView];
    return;
}
else
{
    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Enter the URL" delegate:nil cancelButtonTitle: @"OK" otherButtonTitles:nil];
    [alert1 show];
    return;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:03:15.063

在添加新的图像视图之前，您必须删除以前的图像。像这样的东西应该工作......

```
if (self.qrcodeImageView && self.qrcodeImageView.superview)
    [self.qrcodeImageView removeFromSuperview];
self.qrcodeImageView = [[UIImageView alloc] initWithImage:qrcodeImage]; 
```

# java - java gwt画水平线

> ID：14625667
> 
> 赞同：4
> 
> 时间：2013-01-31T12:21:02.750
> 
> 标签：java, html, gwt

如何在 java gwt 中绘制一条水平线，类似于 HTML 中的“< hr >”标签？我尝试使用

```
 com.google.gwt.user.client.Element bottomLine = DOM.createDiv(); 
```

但这在IE中不起作用......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T12:45:29.873

您可以使用 HTML 小部件在页面中添加所需的任何 html

```
HTML html = new HTML("<hr  style=\"width:100%;\" />")
rootPanel.add(html); // or add it inside another widget 
```

或者您可以在 Panel 上使用 css 并定义border-bottom 属性（如果您有一个跨越整个页面的面板）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T12:38:17.373

`Document.get()`. [`createHRElement()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/Document.html#createHRElement%28%29)?

# javascript - 引用使用自定义构造函数创建的对象中的变量

> ID：14625670
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:21:07.820
> 
> 标签：javascript

试图让它在 JS 中工作：

```
var calculate = function(votesA, votesB, votesC) {

    var total = votesA + votesB + votesC;

    function Results(resultsA, resultsB, resultsC) {
        this.resultsA = resultsA;
        this.resultsB = resultsB;
        this.resultsC = resultsC;
    }

    var curResults = new Results(votesA, votesB, votesC);

    curResults.resultsA = (votesA / total) x 100;
    curResults.resultsB = (votesB / total) x 100;
    curResults.resultsC = (votesC / total) x 100;

    console.log(curResults.resultsA, curResults.resultsB, curResults.resultsC);
}

calculate(5,4,8);
calculate(5,6,8);
calculate(6,8,9); 
```

不知道为什么它不起作用，但我觉得这与我在 curResults 中引用变量的方式有关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:27:09.487

JavaScript 的乘法运算符 is `*`， not `x`。

以下`x`几行中的内容为您提供“意外标识符”错误：

```
curResults.resultsA = (votesA / total) x 100;
curResults.resultsB = (votesB / total) x 100;
curResults.resultsC = (votesC / total) x 100; 
```

所以将它们更改为：

```
curResults.resultsA = (votesA / total) * 100;
curResults.resultsB = (votesB / total) * 100;
curResults.resultsC = (votesC / total) * 100; 
```

> *不知道为什么它不起作用，但我觉得这与我如何引用变量有关* `curResults`

不，那部分很好。虽然顺便说一句，如果您立即覆盖上面三行中的这些值，那么在您的构造函数中分配`this.resultsA = resultsA;`(and `resultsB`and `C`)是没有意义的。`Results()`

# c# - 如何为使用 iTextSharp 创建 PDF 的所有页面运行时设置页眉/页脚固定高度和文本

> ID：14625671
> 
> 赞同：0
> 
> 时间：2013-01-31T12:21:11.527
> 
> 标签：c#, asp.net, pdf, pdf-generation, itextsharp

我在 asp.net c# 中使用 iTextSharp 5.3.5 版从我的 DataTable 生成 PDF。我的 DataTable 包含未知行，sp 而 PDF 生成如果它需要超过一页我需要为每页修复一些页眉和页脚

**代码**：

```
public DataTable dataTable;
protected void Page_Load(object sender, EventArgs e)
 {
        dataTable = getData();
        Document document = new Document(PageSize.A4, 10, 10, 90, 10);
        string path = Server.MapPath("PDFs");
        PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(path + "/Doc103.pdf", FileMode.Create));
        document.Open();
        CreatePages(document);
        document.Close();
 }

private void CreatePages(Document document)
    {
        document.NewPage();
        document.Add(FormatPageHeaderPhrase(dataTable.TableName));
        PdfPTable pdfTable = new PdfPTable(dataTable.Columns.Count);
        pdfTable.DefaultCell.Padding = 3;
        pdfTable.WidthPercentage = 100; // percentage
        pdfTable.DefaultCell.BorderWidth = 2;
        pdfTable.DefaultCell.HorizontalAlignment = Element.ALIGN_CENTER;

        foreach (DataColumn column in dataTable.Columns)
        {
            pdfTable.AddCell(column.ColumnName);
        }
        pdfTable.HeaderRows = 1;  
        pdfTable.DefaultCell.BorderWidth = 1;

        foreach (DataRow row in dataTable.Rows)
        {
            foreach (object cell in row.ItemArray)
            {
               pdfTable.AddCell(cell.ToString());
            }
        }

        document.Add(pdfTable);
    }

    private static Phrase FormatPageHeaderPhrase(string value)
        {
            return new Phrase(value, FontFactory.GetFont(FontFactory.TIMES, 10, Font.BOLD, new BaseColor(255, 0, 0)));
        } 
```

**PDF截图：**

![在此处输入图像描述](../Images/ddc67c6be47d5bf8d39f4a903e929835.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:31:08.500

试试下面的链接：

*   [使用 iTextSharp 创建 PDF](http://kuujinbo.info/cs/itext.aspx)

*   [使用 iTextSharp PDF 库的代码示例，作者：Massoud Mazar](http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:51:06.823

有不同的方法可以解决这个问题。

其中之一是使用页面事件。您创建一个实现 OnEndPage() 方法的页面事件。如果`writer.PageNumber > 1`，您添加一个标题，例如：

```
ColumnText.ShowTextAligned(writer.DirectContent,
    Element.ALIGN_RIGHT, "Continued from previous page", 36, 820, 0); 
```

有关页面事件的更多信息，请参阅[第 5 章](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter05/)中的示例。

解决此问题的另一种方法是引入表头：`table.HeaderRows = 1;`以便重复第一行（确保该行包含一个跨越所有列的单元格，显示“从上一页继续”）。为避免此页眉出现在第一页上，请使用`table.SkipFirstHeader = true;`

# linux - gnu make - 确定标准输出是否是终端

> ID：14625676
> 
> 赞同：4
> 
> 时间：2013-01-31T12:21:26.937
> 
> 标签：linux, bash, shell, makefile

试图做：

```
help:
    @echo "you must $(call red_text,clean)" 
```

其中 red_text 定义为

```
red_text = $(shell tput setaf 1; echo -n "$1"; tput sgr0) 
```

这将打印“您必须清洁”，其中“清洁”一词以红色打印。

问题是当 make 的输出被管道传输时（例如到更少）。在这种情况下，我不应该使用颜色，而是打印 $1。

我需要更新`red_text`以处理此案。为此，我认为我可以使用类似的东西，`$(shell [ -t 1 ] ..)`但问题是*标准输出*`$(shell)`永远不是终端。

*当stdout*不是终端时，如何更改`red`以处理这种情况？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:51:17.890

```
if test -t 1
then
    echo terminal
else
    echo file
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:43:17.587

本着**完美的精神，不是没有什么可添加的，而是没有什么可带走的（Antoine de Saint Exupery） ，***首先不使用颜色来*解决问题！真的。它~~很烂~~有固有的问题。你对终端做出假设，这些终端在某个好日子对一些可怜的用户来说是错误的。您遇到了这个交互式终端问题。您花时间解决一个问题，而这些问题本可以花在编写酷炫的功能而不是*花哨*的东西上。你取悦了错误的一群人，即色瘾者，而忽视了色差问题，比如红/绿盲用户（其中​​比你和我估计的要多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T18:31:53.730

正如您所指出的，无法测试`$(shell ...)`输出是标准终端还是管道/文件。然而，我们可以做一些事情，每件事都有自己的优点/缺点。

**`make`在自定义脚本中检测 TTY**

我们只需编写一个简单的 shell 脚本来拦截对 native 的调用`make`，检测 TTY，并适当地定义一个变量。该解决方案的主要优点：

*   简单，
*   适用于`echo`等`$(info ...)`命令`$(shell ...)`，
*   配方无需修改，
*   每次回声都不会产生额外的进程，这在某些平台上可能会很慢（例如 Cygwin）。

```
ifdef IS_TTY
# DO NOT ADD TRAILING COMMENTS OR THIS WILL FAIL BECAUSE OF TRAILING SPACES
ESC := $(shell printf '\e')
R := $(ESC)[31m
Z := $(ESC)[0;0m
endif

$(info [info  ] $Rred$Z black)
$(shell echo >&2 "[shell ] $Rred$Z black")
if_fancy:
    @echo "[recipe] $Rred$Z black" 
```

添加到路径中的自定义 make 脚本示例（例如`/usr/local/bin/make`）：

```
#! /bin/bash

[ -t 1 ] && IS_TTY=1 || IS_TTY=0
exec /usr/bin/make IS_TTY=$IS_TTY "$@" 
```

此方法在所有这些情况下都提供了预期的输出

```
make                  # Colored
make >&2              # Colored
make | cat            # NOT colored
make >tmp && cat tmp  # NOT colored 
```

**在配方中检测并递归调用 Makefile**

在某些情况下，可能无法拦截调用以进行调用或将其替换为自定义脚本。在此解决方案中，我们通过在第一遍中检测 TTY，然后使用适当的变量集递归调用相同的 Makefile 来解决该限制。

```
ifndef IS_TTY
.SILENT:
%:
    @[ -t 1 ] && IS_TTY=1 || IS_TTY=0; $(MAKE) IS_TTY=$$IS_TTY "$@"
xyz:
    @[ -t 1 ] && IS_TTY=1 || IS_TTY=0; $(MAKE) IS_TTY=$$IS_TTY
else

ifeq ($(IS_TTY),1)
# DO NOT ADD TRAILING COMMENTS OR THIS WILL FAIL BECAUSE OF TRAILING SPACES
ESC := $(shell printf '\e')
R := $(ESC)[31m
Z := $(ESC)[0;0m
endif

$(info [info  ] $Rred$Z black)
$(shell echo >&2 "[shell ] $Rred$Z black")
recursive:
    @echo "[recipe] $Rred$Z black"

endif 
```

这种方法的缺点是它在 Makefile 中添加了相当多的垃圾。处理递归可能很棘手。在上面的例子中，我只应用了一些基本的递归机制，在`make`有或没有目标的情况下应该可以工作，并且还应该传播变量。扩展这将是另一个问题的主题;-)

**在每个回声处去除转义序列**

我们在每个 echo 命令中测试输出是否是 TTY，如果不是，我们会去除转义序列（使用[https://superuser.com/questions/380772/removing-ansi-color-codes-from-text-stream](https://superuser.com/questions/380772/removing-ansi-color-codes-from-text-stream)） . 为了减少在线上的垃圾邮件，我们使用了一个 make 变量`$(STRIPESC)`。解决方案非常简单，但它只适用于`echo`命令，并且在每次回显时都会产生一个额外的进程。它还需要使用回声编辑每个配方。

```
# DO NOT ADD TRAILING COMMENTS OR THIS WILL FAIL BECAUSE OF TRAILING SPACES
ESC := $(shell printf '\e')
R := $(ESC)[31m
Z := $(ESC)[0;0m
STRIPESC:=( [ -t 1 ] && cat || sed 's/\x1b\[[0-9;]*m//g' )

# $(info ...) not supported
# $(shell echo >&2 ...) not supported
if_tty:
  @echo "[recipe] $Rred$Z black" | $(STRIPESC) 
```

**使用外部 echo 命令去除转义序列**

这类似于上面的解决方案，只是语法更轻量级。优点/缺点是相同的。此外，在下面的示例中，我在 makefile 本身中生成了外部回显。在标准构建中，您将在某些标准路径中将此命令作为外部工具提供。

```
# DO NOT ADD TRAILING COMMENTS OR THIS WILL FAIL BECAUSE OF TRAILING SPACES
ESC := $(shell printf '\e')
R := $(ESC)[31m
Z := $(ESC)[0;0m

$(shell echo "#! /bin/bash" > echotty)
$(shell echo '[ -t 1 ] && echo "$$@" || echo "$$@" | sed "s/\x1b\[[0-9;]*m//g"' >> echotty)
$(shell chmod a+x echotty)

# $(info ...)
# $(shell echo >&2 ...)
.PHONY: echotty
echotty:
  @./echotty "[recipe] $Rred$Z black" 
```*

# python - python: Django 导入失败，要求我定义 DJANGO_SETTINGS_MODULE

> ID：14625679
> 
> 赞同：0
> 
> 时间：2013-01-31T12:21:36.520
> 
> 标签：python, django, django-models

我是 Django 的新手。我从官方**djangoproject**网站完成了一次 Django 教程。并不是说我现在什么都知道，但在我提到那个网站之前，一切对我来说都很完美。
我开始参考**Practical Django projects** book 和我尝试导入的模型中的某个地方：

`from django.contrib.auth.models import User`

给我一个导入错误：

`ImportError Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined` `

这里到底发生了什么？到目前为止，我已经成功导入了所有包，为什么会突然出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:27:08.287

你是如何运行给你错误的代码的？如果要`models.py`在 shell 中导入，请使用[Django shell 命令](https://docs.djangoproject.com/en/dev/ref/django-admin/#shell])

```
./manage.py shell 
```

如果您尝试在另一个脚本中导入，则必须`DJANGO_SETTINGS_MODULE`手动设置环境变量。

```
import os

if 'DJANGO_SETTINGS_MODULE' not in os.environ:
    os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings' 
```

这需要`myproject`在您的 python 路径中。

请参阅此类似的[Stack Overflow 问题](https://stackoverflow.com/questions/1641444/why-am-i-getting-this-error-in-django)以进行进一步讨论。

# sql-server - “创建数据库权限被拒绝”错误

> ID：14625682
> 
> 赞同：3
> 
> 时间：2013-01-31T12:21:41.713
> 
> 标签：sql-server, database, sql-server-2008-r2

我在安装了 Windows XP 操作系统的系统上安装了 SQL SERVER 2008 R2。

每当我尝试创建一个新数据库时，它都会显示一个错误：

```
CREATE DATABASE PERMISSION DENIED IN DATABASE 'master'.(Microsoft SQL Server, Error:262) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T19:29:14.080

当您启动 SQL Server Management Studio 时，使用“sa”用户而不是 Windows 用户。看起来 Windows 用户没有权限。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-03T08:20:54.373

右键单击并以管理员身份运行“SQL Server Management Studio”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T12:25:52.140

尝试授予您登录的用户[CREATE ANY DATABASE 权限](http://msdn.microsoft.com/en-us/library/ms186717%28v=sql.105%29.aspx)，然后重试。查看[有关创建新数据库的文档](http://msdn.microsoft.com/en-us/library/ms186312%28v=sql.105%29.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-23T19:25:08.520

此错误的原因是权限不足。赋予用户“dbcreater”角色[![检查 dbcreater 角色](../Images/be0d49412c8bde2a3e82d6c379a17634.png)](https://i.stack.imgur.com/2pS70.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-12T16:41:57.600

如果您处于对 SQL 数据库只有公共/查看权限的情况下，您应该考虑以下事项：

1.  您是否有备用登录名或 sa 用户登录凭据？如果是这样，请先尝试此操作，如有必要，通过“对象资源管理器”面板中数据库的 Security/Logins/.. 部分授予您的其他登录足够的权限（[请参阅 Ahmet Arslan 的回答](https://stackoverflow.com/a/32747886/2216041)）。

2.  如果您对另一个通过 Windows 身份验证具有访问权限的 Windows 用户具有帐户访问权限，请尝试通过“runas”命令以其他用户身份运行 ssms.exe。[来自 SqlRyan 的答案中的](https://stackoverflow.com/a/2099401/2216041)完整详细信息和解释。

3.  如果您有以前 Windows 安装中配置了 Windows 身份验证的旧数据库（并且您没有/不记得 sa 帐户凭据）。在这种情况下，您可以从以前的 Windows 安装中重新创建过去的用户帐户。确保此新帐户与您以前的帐户具有相同的域和用户名。通过重新创建的帐户登录，并为您当前（或“真实”）的用户帐户提供足够的权限（参见上面的 #1.）。确认您已恢复访问权限后，您可以删除重新创建的用户帐户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-01T19:43:13.113

有了这个问题，我注意到我是使用**Windows Authentication**连接的。然后我断开连接并使用**SQL Server Authentication**。现在很好。

# mysql - 计算平均值较大的行

> ID：14625685
> 
> 赞同：1
> 
> 时间：2013-01-31T12:21:50.293
> 
> 标签：mysql, sorting, average

每个学生都有一些分数（每个分数都有`student_id`列）。

我想计算学生的平均水平，将他的平均水平与其他学生进行比较，并找到他在班级中的位置。

是否可以通过 1 次查询根据他的平均值找到他的位置？（可能包含子查询或连接）

我可以通过以下查询按所有学生的平均值对所有学生进行排序：

```
SELECT s.*
FROM
  scores s LEFT JOIN lessons lesson
  ON lesson.id = s.lesson_id
WHERE lesson.display = 1
GROUP BY s.student_id
ORDER BY AVG(s.score) DESC 
```

但它需要用PHP`array_search`函数处理。（我认为在这种情况下使用 MySQL 函数更好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:37:16.123

```
 select s.id, AVG(l.scores) as average from lessons as l, student as s 
    where l.id = s.lessonid and l.display = 1 
    GROUP BY s.id order by average desc 
```

可以解决您的问题
检查此[**链接**](http://www.kirupa.com/forum/showthread.php?263260-MySQL-Get-position-of-sorted-rows#11)

感谢 Meherzad 的 sql 查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:32:04.283

```
select student_id, AVG(scores) as 'average' from lessons as l, scores as s 
where lessons.id = s.lesson_id and lesson.display = 1 
GROUP BY s.student_id order by average desc` 
```

试试这个查询

示例[http://sqlfiddle.com/#!2/4fb8d/1](http://sqlfiddle.com/#!2/4fb8d/1)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:05:54.977

您需要在结果集上使用用户定义的变量。

尝试这个：

```
SELECT *, (@rank := if(@rank is null, 1, @rank + 1)) as rank
FROM (SELECT s.*
  FROM scores s 
  LEFT JOIN lessons lesson ON lesson.id = s.lesson_id
  WHERE lesson.display = 1
  GROUP BY s.student_id 
  ORDER BY AVG(s.score) DESC
) x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:12:03.173

我想你正在寻找这样的东西：

```
SELECT COUNT(DISTINCT average)
FROM (
  SELECT AVG(score) as average
  FROM scores INNER JOIN lessons
       ON scores.lesson_id = lessons.id
  WHERE display=1
  GROUP BY student_id
  ) sub_scores
WHERE average >= (SELECT AVG(score)
                  FROM scores INNER JOIN lessons
                       ON scores.lesson_id = lessons.id
                  WHERE display=1
                        AND student_id=1) 
```

在子查询`sub_scores`中，我正在计算所有学生的所有平均值，在外部查询中，我正在计算大于学生 1 平均值的不同平均值的数量。

这将返回学生 1 的位置。

根据您所追求的，您可能想要删除 DISTINCT 子句。

看到[这个小提琴](http://sqlfiddle.com/#!2/33e16/3)。

# apache-flex - 如何将 SWF 文件部署到 Websphere 应用服务器？

> ID：14625688
> 
> 赞同：0
> 
> 时间：2013-01-31T12:21:57.593
> 
> 标签：apache-flex, websphere, flash

我想将我用 FLEX 编码的应用程序部署到本地主机上的 WAS 7.0.0.4。应用程序导出为 SWF 文件。但是我没有任何使用 WAS 的经验，也没有找到任何教程如何做到这一点，整个系统看起来真的让我感到困惑。有人可以编写分步解决方案或给我任何建议如何达到我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:50:22.953

如果我对您的理解正确，那么您最好只使用像[Apache](http://httpd.apache.org/)或[IBM HTTP Server](http://www-01.ibm.com/software/webservers/httpservers/)这样的 HTTP 服务器（这几乎是一回事）。听起来您正在部署静态内容（从服务器的角度来看），因此应用程序服务器只会增加复杂性并使用更多资源，而不会为您提供任何附加功能。在 HTTP 服务器上，您只需将要传送到浏览器的文件放在特定目录中即可。

# git - 权限被拒绝（公钥）我仍然收到错误

> ID：14625689
> 
> 赞同：1
> 
> 时间：2013-01-31T12:22:02.560
> 
> 标签：git, github, ssh

我在 git 中不断收到此错误。我已经阅读并尝试了很多东西，但似乎都不起作用（更改了 700 或 600 权限，我只选择了带有 -i 选项的 rsa 密钥，我做了 ssh-add ~/.ssh/id_rsa，...）

任何人都可以帮忙吗？

谢谢

```
ssh -vT git@github.com
OpenSSH_5.1p1, OpenSSL 0.9.8h 28 May 2008
debug1: Reading configuration data /home/myusername/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /home/myusername/.ssh/identity type -1
debug1: identity file /home/myusername/.ssh/id_rsa type 1
debug1: identity file /home/myusername/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5p1 Debian-    6+squeeze1+github8
debug1: match: OpenSSH_5.5p1 Debian-6+squeeze1+github8 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'github.com' is known and matches the RSA host key.
debug1: Found key in /home/myusername/.ssh/known_hosts:8
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering public key: /home/myusername/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: /home/myusername/.ssh/identity
debug1: Trying private key: /home/myusername/.ssh/id_dsa
debug1: No more authentication methods to try. 
```

如果我做：

```
ssh-add -l 
```

我明白了

```
2048 60:2f:84:01:91:db:f7:83:fa:e0:a2:9a:55:49:85:ad /home/myusername/.ssh/id_rsa (RSA) 
```

我在 .bashrc 中添加了

```
!/bin/bash
eval `ssh-agent -s`
ssh-add 
```

现在我有一个这样的 .ssh/config 文件：

```
#  personal account
#
Host personal.repositoryhosting.com
Hostname personal.repositoryhosting.com
IdentitiesOnly yes
IdentityFile ~/.ssh/id_rsa

# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:38:55.640

通常 id_dsa（或 id_rsa）是你的私钥，对应的文件末尾带有 '.pub' 的文件是你的公钥。

你的 ~/.ssh/personal_key 是什么？它与你的公钥/私钥有什么关系？- 你的 ssh 代理知道吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T11:44:32.753

删除了我的旧 .ssh 文件夹 - 备份它。根据您拥有的 ssh 密钥的数量及其用途，可能并不理想。

```
craicerjack@ubuntu:~$ sudo rm -rf .ssh 
```

cd 回到你的项目目录

```
git init

touch README

git push -u origin master

The authenticity of host 'your_host' can't be established.
ECDSA key fingerprint is b2:9f:1a:8c:13:9b:1f:a2:64:a9:5c:db:61:a5:04:bb.
Are you sure you want to continue connecting (yes/no)? 
Warning: Permanently added 'your_host' (ECDSA) to the list of known hosts.
Branch master set up to track remote branch master from origin.
Everything up-to-date 
```

这将创建一个带有 known_hosts 文件的新 .ssh 目录。
cd 进入 .ssh

```
craicerjack@ubuntu:~$ cd ~/.ssh 
```

接下来创建一个新密钥

```
ssh-keygen -t rsa -C "your_email@example.com" 
```

通过gitlab上的[https://gitlab.deri.ie/help/ssh](https://gitlab.deri.ie/help/ssh)
或 github上的[https://help.github.com/articles/generating-ssh-keys 。](https://help.github.com/articles/generating-ssh-keys)

```
Generating public/private rsa key pair.
Enter file in which to save the key (/home/carlos/.ssh/id_rsa): (you can leave this blank if you are in your .ssh dir, otherwise choose where to save the key)
Enter passphrase (empty for no passphrase): (leave this blank if you wish)
Enter same passphrase again: (leave this blankif you wish)
Your identification has been saved in /home/carlos/.ssh/id_rsa.
Your public key has been saved in /home/carlos/.ssh/id_rsa.pub. 
```

使用它将密钥转储到您的控制台，然后将其复制：

```
cat ~/.ssh/id_rsa.pub 
```

转到您在 gitlab 或 github 中的帐户。
gitlab - [https://gitlab.deri.ie/profile/keys](https://gitlab.deri.ie/profile/keys)
github - [https://github.com/settings/ssh](https://github.com/settings/ssh)

然后单击添加 ssh 密钥

粘贴你的新密钥，你应该很高兴。无论如何，这对我有用。

# asp.net - FormsAuthentication 获取所有当前活动的经过身份验证的用户

> ID：14625690
> 
> 赞同：1
> 
> 时间：2013-01-31T12:22:03.510
> 
> 标签：asp.net, asp.net-mvc-4, forms-authentication

我使用 FormsAuthentication 在我的 MVC4 应用程序中对用户进行身份验证。是否可以获取所有当前登录的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:39:33.473

我不认为有任何这样的方法，但你可以试试这个

```
 List<MembershipUser> onlineUsers = Membership.GetAllUsers().Cast<MembershipUser>().Where(u => u.IsOnline == true).ToList(); 
```

> [Membership.GetAllUsers](http://msdn.microsoft.com/en-us/library/dy8swhya.aspx)
> 
> 对非常大的用户数据库使用 GetAllUsers 方法时要小心，因为 ASP.NET 页面中生成的 MembershipUserCollection 可能会降低应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T22:47:05.480

我必须先实例化集合，然后才能转换它：

```
private List<MembershipUser> GetAllUsers()
      {
          MembershipUserCollection MU_Coll = Membership.GetAllUsers();//.GetEnumerator()  ;//.Cast<MembershipUser>().Where(u => u.IsOnline == true).ToList();
          return MU_Coll.Cast<MembershipUser>().Where(u => u.IsOnline == true).ToList();
      } 
```

# python - 找到 http:// 和或 www。并从域中剥离。离开 domain.com

> ID：14625693
> 
> 赞同：14
> 
> 时间：2013-01-31T12:22:07.927
> 
> 标签：python, url, urlparse

我对python很陌生。我正在尝试解析 URL 文件以仅保留域名。

我的日志文件中的一些 url 以 http:// 开头，一些以 www 开头。一些以两者开头。

这是我的代码中去掉 http:// 部分的部分。我需要添加什么来查找 http 和 www。并删除两者？

```
line = re.findall(r'(https?://\S+)', line) 
```

目前，当我运行代码时，只有 http:// 被剥离。如果我将代码更改为以下内容：

```
line = re.findall(r'(https?://www.\S+)', line) 
```

只有以两者开头的域会受到影响。我需要代码更有条件。TIA

编辑...这是我的完整代码...

```
import re
import sys
from urlparse import urlparse

f = open(sys.argv[1], "r")

for line in f.readlines():
 line = re.findall(r'(https?://\S+)', line)
 if line:
  parsed=urlparse(line[0])
  print parsed.hostname
f.close() 
```

我被原始帖子误认为是正则表达式。它确实在使用 urlparse。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T12:31:11.183

对于这种特定情况，这可能有点矫枉过正，但我​​通常会使用[`urlparse.urlsplit`](http://docs.python.org/2/library/urlparse.html#urlparse.urlsplit)（Python 2）或[`urllib.parse.urlsplit`](http://docs.python.org/3.3/library/urllib.parse.html?highlight=urllib.parse#urllib.parse.urlsplit)（Python 3）。

```
from urllib.parse import urlsplit  # Python 3
from urlparse import urlsplit  # Python 2
import re

url = 'www.python.org'

# URLs must have a scheme
# www.python.org is an invalid URL
# http://www.python.org is valid

if not re.match(r'http(s?)\:', url):
    url = 'http://' + url

# url is now 'http://www.python.org'

parsed = urlsplit(url)

# parsed.scheme is 'http'
# parsed.netloc is 'www.python.org'
# parsed.path is None, since (strictly speaking) the path was not defined

host = parsed.netloc  # www.python.org

# Removing www.
# This is a bad idea, because www.python.org could 
# resolve to something different than python.org

if host.startswith('www.'):
    host = host[4:] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T12:25:15.327

您可以在此处不使用正则表达式。

```
with open("file_path","r") as f:
    lines = f.read()
    lines = lines.replace("http://","")
    lines = lines.replace("www.", "") # May replace some false positives ('www.com')
    urls = [url.split('/')[0] for url in lines.split()]
    print '\n'.join(urls) 
```

示例文件输入：

```
http://foo.com/index.html
http://www.foobar.com
www.bar.com/?q=res
www.foobar.com 
```

输出：

```
foo.com
foobar.com
bar.com
foobar.com 
```

**编辑：**

可能会有一个棘手的 url，比如 foobarwww.com，上面的方法会去掉 www。然后我们将不得不恢复使用正则表达式。

`lines = lines.replace("www.", "")`用替换该行`lines = re.sub(r'(www.)(?!com)',r'',lines)`。当然，每个可能的 TLD 都应该用于不匹配模式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-20T20:16:12.813

我遇到了同样的问题。这是一个基于正则表达式的解决方案：

```
>>> import re
>>> rec = re.compile(r"https?://(www\.)?")

>>> rec.sub('', 'https://domain.com/bla/').strip().strip('/')
'domain.com/bla'

>>> rec.sub('', 'https://domain.com/bla/    ').strip().strip('/')
'domain.com/bla'

>>> rec.sub('', 'http://domain.com/bla/    ').strip().strip('/')
'domain.com/bla'

>>> rec.sub('', 'http://www.domain.com/bla/    ').strip().strip('/')
'domain.com/bla' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-31T12:27:59.397

查看[urlparse 库](http://docs.python.org/2/library/urlparse.html)，它可以自动为您完成这些事情。

```
>>> urlparse.urlsplit('http://www.google.com.au/q?test')
SplitResult(scheme='http', netloc='www.google.com.au', path='/q', query='test', fragment='') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-03T17:54:53.980

您可以使用[urlparse](http://docs.python.org/2/library/urlparse.html)。此外，解决方案应该是通用的，以删除域名前的“www”以外的内容（即处理 server1.domain.com 之类的情况）。以下是应该有效的快速尝试：

```
from urlparse import urlparse

url = 'http://www.muneeb.org/files/alan_turing_thesis.jpg'

o = urlparse(url)

domain = o.hostname

temp = domain.rsplit('.')

if(len(temp) == 3):
    domain = temp[1] + '.' + temp[2]

print domain 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-14T09:57:12.050

我相信@Muneeb Ali 是最接近解决方案的，但问题出现在诸如 frontdomain.domain.co.uk....

我想：

```
for i in range(1,len(temp)-1):
    domain = temp[i]+"."
domain = domain + "." + temp[-1] 
```

有没有更好的方法来做到这一点？

# c# - 通过 global.asax 在应用程序中保存数据

> ID：14625696
> 
> 赞同：2
> 
> 时间：2013-01-31T12:22:12.013
> 
> 标签：c#, asp.net, asp.net-3.5, global-asax

我需要在我的 C#/ASP 项目中存储一个可全局访问的列表 - 将其存储在服务器上的全局应用程序而不是数据库中 - 因为只有在应用程序运行时才需要数据。

到目前为止，我已经尝试在应用程序开始（Global Asax）中创建一个列表 `activePages= new List<ActivePage>(); Session["activePages"] = activePages;`

这显然失败了，因为此时我无法设置会话。正确的方法是什么？

理想情况下，我希望能够在应用程序启动时设置一个空白列表，并从任何会话添加到列表中（即我可以同时从我的 PC 和笔记本电脑添加到此列表中）

我已经有了代码来完成所有的添加和管理，但是找不到全局持久化这个列表的方法。另外，我将如何在我的应用程序的其他页面上使用此列表？我以前真的没有接触过全球asax。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:32:20.623

你需要看看[Application State](http://msdn.microsoft.com/en-us/library/ms178594.aspx)。使用`Session`不会解决您的问题，因为每个访问您的应用程序的用户都会创建一个新会话。此外，经过一段时间的不活动`Session`被破坏。

```
 void Application_Start(object sender, EventArgs e) 
   {
        List<ActivePage> activePages= new List<ActivePage>();
        Application["ActivePages"] = activePages;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:32:27.383

如果您需要从任何地方访问数据，您可以定义一个静态变量。在应用程序启动时，您可以将数据加载到此变量中：

```
public static List<ActivePage> ActivePages= new List<ActivePage>();

protected void Application_Start(object sender, EventArgs e)
{
   ActivePages = LoadFromDB()
} 
```

您还可以随时随地向此列表添加值，因为变量是静态的。

但是 - 您以后想对数据做什么？当 IIS 重新启动时，此列表中的所有内容都将丢失。

您不能将 Session 用于这种全局存储。

# mysql - 设计电子商务数据库 - MySQL

> ID：14625701
> 
> 赞同：18
> 
> 时间：2013-01-31T12:22:26.057
> 
> 标签：mysql, e-commerce, relational-database

我正在做一个电子商务项目，对存储产品的数据库设计感到困惑。我推测可以通过 3 种方式创建数据库：

1\. 每个产品类别可以有单独的表格。

```
Table: Categories
------------------
cat_ID
cat_name

Table: Sub_Categories
---------------------
sub_cat_ID
categories_cat_ID
sub_cat_name

Table: Books
-------------
book_ID
sub_categories_sub_cat_ID
book_title
book_author
book_ISBN
book_price
etc

Table: Clothes
---------------
clothes_ID
sub_categories_sub_cat_ID
clothes_name
clothes_color
clothes_size
clothes_description
clothes_price
etc

Table: Perfumes
----------------
perfumes_ID
sub_categories_sub_cat_ID
perfume_name
perfume_size
perfume_weight
perfume_description
perfume_price
etc 
```

2.将所有产品组合在一个表中，并允许某些值为空

```
Table: Categories
------------------
cat_ID
cat_name

Table: Sub_Categories
---------------------
sub_cat_ID
categories_cat_ID
sub_cat_name

Table: Products
---------------
product_ID
sub_categories_sub_cat_ID
title
description
price
author (can be null for everything except books)
size
weight (can be null for everything except perfumes)
ISBN (can be null for everything except books)
color (can be null for everything except clothes)
etc 
```

3\. 将相似的列字段组合在一个名为 products 的表中，并为特定数据提供单独的表。

```
Table: Categories
------------------
cat_ID
cat_name

Table: Sub_Categories
---------------------
sub_cat_ID
categories_cat_ID
sub_cat_name

Table: Products
----------------
product_ID
sub_categories_sub_cat_ID
title
description
price

Table: Books
-------------
products_product_id
sub_categories_sub_cat_ID
author
publisher
ISBN

Table: Perfumes
----------------
products_product_id
sub_categories_sub_cat_ID
size
weight

Table: Clothes
--------------
products_product_id
sub_categories_sub_cat_ID
color
size (this can be a one to many relationship to cater to multiple sizes of one product?) 
```

我真的很感激启蒙，谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T12:31:17.717

我假设一个产品可以属于许多类别，并且一个类别（显然）包含许多产品。这种关系称为多对多关系。

在本例中，您将拥有三个表：`categories`、`products`和`categories_products`。前两个表是不言自明的。第三个表使用两个外键存储两者之间的关系。这些表看起来像这样：

```
CREATE TABLE `categories` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `parent_id` int(10) unsigned DEFAULT NULL,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`),
  KEY `parent_id` (`parent_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `categories_products` (
  `category_id` int(10) unsigned NOT NULL,
  `product_id` int(10) unsigned NOT NULL,
  KEY `category_id` (`category_id`),
  KEY `product_id` (`product_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `products` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

ALTER TABLE `categories_products`
  ADD CONSTRAINT `categories_products_ibfk_2`
    FOREIGN KEY (`product_id`) REFERENCES `products` (`id`)
    ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `categories_products_ibfk_1`
    FOREIGN KEY (`category_id`) REFERENCES `categories` (`id`)
    ON DELETE CASCADE ON UPDATE CASCADE; 
```

显然，这些是最简单的表模式。您需要将额外的列添加到`categories`and`products`表中——我只包含了与关系相关的列。

编辑：我还在表格中添加了一`parent_id`列`categories`用于嵌套类别。创建一个单独的表通常是个坏主意`sub_categories`——如果你想让一个子类别成为顶级类别会发生什么？或相反亦然？你因为想要一个更好的短语而烦恼。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T12:31:08.923

我认为使用方法1或2取决于产品。我永远不会使用方法3。

如果您的产品完全不同，例如书籍、香水和衣服，我会使用方法 1

一个旁注：为什么要为您的类别使用 2 个表？使用一个表并添加一列 Parent_ID，这样您将来可以使用无限的子类别。

例如：

```
table: categories

|id|description|parentid|
|1 |books      |NULL    |
|2 |clothes    |NULL    |
|3 |perfumes   |NULL    |
|4 |Sci-Fi     |1       |
|5 |Comedy     |1       |
|6 |Jeans      |2       |
|7 |Sweater    |2       |
|8 |Underwear  |2       |
|9 |Long sleeve|7       |
|10|Roses      |3       | 
```

*   Books, Clothes en Perfumes 没有父级（这些是主要类别）。
*   科幻和喜剧是书籍 (ID 1) 的子类别。
*   牛仔裤、毛衣和内衣是衣服的一个子类别 (ID 2)。
*   长袖是毛衣 (ID 7) 的子类别。
*   玫瑰是香水的一个子类别（ID 3）。

# import - Magmi import attribute_set 始终为“默认”

> ID：14625702
> 
> 赞同：1
> 
> 时间：2013-01-31T12:22:27.897
> 
> 标签：import, magmi

使用 Magmi 时，列`attribute_set`中的值始终与值一起导入，`default`而导入文件中的值在后端定义为 attribute_set。

示例：该`attribute_set`值`banden`始终与 value 一起导入`default`。

导入文件示例：

```
存储属性_设置 category_ids sku

管理员班登 3 BF2156516HLON

```

我尝试了`_attribute_set`wel 和 with `attribute_set`（有和没有下划线）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:38:54.793

上面的示例只是文件开头的一部分。该文件有 88 列，所以我只发布了前 4 列。我的问题确实是在创建新产品时。导入文件中有属性集“banden”的产品和属性集“runflat”的产品。因此，从导入文件创建新产品时，我还需要导入文件中的 attribute_set 值。

当我导入新产品时，它会根据导入文件的值获取属性设置“默认”而不是“banden”或“runflta”。

对不起，如果我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:43:07.210

attribute_set 不是“导入”的，它只是查找属性的参考值。在这里，您的文件根本不需要attribute_set，因为您可以使用这少量数据来更新category_ids。

attribute_set 仅在创建新产品时使用，在“更新”模式下，根本不使用。

# mongodb - 仅当其他字段与 MongoDB 中的值匹配时，如何更新数组中的字段

> ID：14625705
> 
> 赞同：2
> 
> 时间：2013-01-31T12:22:35.033
> 
> 标签：mongodb, updates

我在 MongoDb 的查询和更新选择器的丛林中纠结了一下。

情况：我们有公司收藏。像这样

```
Companies.find({}) =>
 {_id: 1, item_amount: 5}, 
 {_id: 2, item_amount: 7}, 
 {_id: 3, item_amount: 10} 
```

我们有一些结构的用户集合。用户想要购买任何物品，它可能会降低公司的价值并增加用户的价值，有一个条件 - 用户可能知道他在哪里购买了该物品。

```
{userId: _id,
 ownedItems: 
  [{company_id: 2, item_amount: 3},
  {company_id: 1, item_amount: 5}]
} 
```

好的。如果用户想购买例如 5 件商品`{_id: 3}`（我们不知道用户是否有字段），我将如何使用 Users.update( `company_id: 3`)

我想它可能是这样的：

`Companies.update({_id: 3}, {$inc: {item_amount: - 5}})`
&&
`Users.update({userId: _id}, {$set: {'ownedItems[x].company_id': 3}, $inc{'ownedItems[x].item_amount': 5})`

但是，原因有一些问题。
我怎么知道`[x]`每个 clint 的值？解决？如果我需要添加新公司怎么办？如果字段不存在会起作用
吗？`$set``'ownedItems[x].company_id'`

也许我可以在 IF/Else 语句中检查 smth。例如，使用`$exist`, 或`$cond`( 用于聚合) 选择器。但是 .find() 总是返回一个游标（是吗？），而不是 true 或 false。那么可以做什么呢？如何使用聚合选择器？像这样：

`Users.find({_id: userId}, {$cond: [{$eq: ['owenedItem[x].company_id', _someId_]}, {$set:{...}}, {$push: {...}}]})`

它会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:13:39.083

听起来您想将 $elemMatch 运算符与 '$' 位置运算符一起使用：

[http://docs.mongodb.org/manual/reference/operator/elemMatch/](http://docs.mongodb.org/manual/reference/operator/elemMatch/) [http://docs.mongodb.org/manual/reference/operator/positional/](http://docs.mongodb.org/manual/reference/operator/positional/)

让我们举个例子。假设您想在用户的“ownedItems”列表中找到“company_id”为 3 的元素，并将该元素的“item_amount”更新为 5。这可以在单个更新语句中完成，如下所示：

```
Users.update( { userId: _id, ownedItems : { $elemMatch : { company_id : 3 } } },
              { $inc : { ownedItems.$.item_amount : 5 } } ) 
```

**$elemMatch**运算符明确您正在查询列表的哪些元素。然后，您可以在修饰符子句中使用**$**运算符来引用该匹配元素并对其进行更改。

如果用户的“ownedItems”列表中没有任何匹配 {“company_id”: 3 } 的条目，那么上述更新将不会执行任何操作。如果发生这种情况，您可以使用**$addToSet**运算符进行第二次更新以添加新条目，如下所示：

```
Users.update( { userId: _id },
              { $addToSet : { ownedItems : { company_id : 3, item_amount : 5 } } } ) 
```

[http://docs.mongodb.org/manual/reference/operator/addToSet/](http://docs.mongodb.org/manual/reference/operator/addToSet/)

# java - 在 Canvas 中绘制不同颜色的线条

> ID：14625707
> 
> 赞同：3
> 
> 时间：2013-01-31T12:22:42.887
> 
> 标签：java, android, android-canvas

这是我第一次在 Android 中使用 Canvas 类。

我想要的是在画布上绘制不同颜色的线条。我有一个无法解决的问题。

在将颜色更改为红色并尝试用红色绘制第二条线后，我用黑色绘制第一条线，然后用黑色绘制的第一条线变为红色。

我使用的代码是：

```
import java.util.ArrayList;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.Pair;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawView extends View implements OnTouchListener 
{
    private Canvas      m_Canvas;

    private Path        m_Path;

    private Paint       m_Paint;

    ArrayList<Pair<Path, Paint>> paths = new ArrayList<Pair<Path, Paint>>();

    ArrayList<Pair<Path, Paint>> undonePaths = new ArrayList<Pair<Path, Paint>>(); 

    private float mX, mY;

    private static final float TOUCH_TOLERANCE = 4;

//  Bitmap canvasBackground;

    public DrawView(Context context) 
    {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);      
        this.setOnTouchListener(this);

        onCanvasInitialization();
    }      

    public void onCanvasInitialization()
    {
        m_Paint = new Paint();
        m_Paint.setAntiAlias(true);
        m_Paint.setDither(true);
        m_Paint.setColor(Color.parseColor("#37A1D1"));
        m_Paint.setStyle(Paint.Style.STROKE);
        m_Paint.setStrokeJoin(Paint.Join.ROUND);
        m_Paint.setStrokeCap(Paint.Cap.ROUND);
        m_Paint.setStrokeWidth(2);      

        m_Canvas = new Canvas();

        m_Path = new Path();
        Paint newPaint = new Paint(m_Paint);
        paths.add(new Pair<Path, Paint>(m_Path, newPaint));

//      Bitmap canvas = BitmapFactory.decodeResource(getResources(), R.drawable.theme1_img_note).copy(Bitmap.Config.ARGB_8888, true);
//      canvasBackground = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Bitmap.Config.ARGB_8888 );
//      m_Canvas = new Canvas(canvasBackground);        
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) 
    {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {      
        for (Pair<Path, Paint> p : paths) 
        {
            canvas.drawPath(p.first, p.second);
        }
    }

    public boolean onTouch(View arg0, MotionEvent event) 
    {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) 
        {
            case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
            case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
            case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
        }
        return true;
    }

    private void touch_start(float x, float y) 
    {
        m_Path.reset();
        m_Path.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touch_move(float x, float y) 
    {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
        {
            m_Path.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() 
    {
        m_Path.lineTo(mX, mY);

        // commit the path to our offscreen
        m_Canvas.drawPath(m_Path, m_Paint);

        // kill this so we don't double draw            
        m_Path = new Path();
        Paint newPaint = new Paint(m_Paint); // Clones the mPaint object
        paths.add(new Pair<Path, Paint>(m_Path, newPaint));
    }

    public void onClickPenButton(int penWidth) 
    { 
        m_Paint.setStrokeWidth(penWidth);

        m_Path = new Path();
        Paint newPaint = new Paint(m_Paint); // Clones the mPaint object
        paths.add(new Pair<Path, Paint>(m_Path, newPaint));             
    }

    public void onClickPenColorButton(int penColor) 
    {       
        m_Paint.setColor(penColor);

        Paint newPaint = new Paint(m_Paint); // Clones the mPaint object
        paths.add(new Pair<Path, Paint>(m_Path, newPaint));
    }

    public void onClickUndo () 
    { 
        if (paths.size()>0) 
        { 
            undonePaths.add(paths.remove(paths.size()-1));
            invalidate();
        }
        else
        {

        }
    }

    public void onClickRedo ()
    {
        if (undonePaths.size()>0) 
        { 
            paths.add(undonePaths.remove(undonePaths.size()-1)); 
            invalidate();
        } 
        else 
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:29:44.850

您只有一个`m_Paint`对象，因此当`onDraw`被调用时，它将使用您设置的最后一种颜色绘制**所有**路径。

您可以存储每个路径的颜色，并且在绘制路径*之前*`onDraw`必须在内部设置颜色

 ***编辑**

这是一个快速解决方案的大纲，夜晚不是最优雅的：

*   A`HashMap`以路径为键，颜色为值
*   在`onClickPenColorButton`将颜色保存到实例时说`currentColor`
*   在`touch_start`您可以将路径对象与 推`currentColor`入`HashMap`
*   修改 onDraw 以获取每个路径的颜色。**此代码仅用于说明**，因此请根据需要进行修改。

    ```
    protected void onDraw(Canvas canvas)
    {                           
       for (Path p : paths)
       {  
          // Assuming your HashMap variable is pathColor
          m_Paint.setColor(pathColor.get(p));

          canvas.drawPath(p, m_Paint);
       }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T22:58:54.867

您必须为 PATH 和 PAINT 创建单独的对象，然后分别创建每个绘制对象的属性。然后在 onDraw 函数中，您必须为每个路径及其相应的绘制指定画布 drawCircle 方法。

例如，我有一个类似的问题，我花了一段时间才解决它。

首先，我想有一个可以画线的视图。代码是：

```
package com.example.ex13_singletouch

import android.content.Context
import android.graphics.*
import android.view.MotionEvent
import android.view.View

class SingleTouchView(context: Context): View(context) {    //AFTER COLON : WAS SOMETHING THAT WOULD BE RETURNED
    private val paint= Paint()
    private val path = Path()
    //TO CREATE THE X-Y POSITION OF THE FINGER ON THE SCREEN
    private var evenX: Float = 0F
    private var evenY: Float = 0F
    private var fingerDown = false  //CHECKS IF YOUR FINGER IS TOUCHING THE SCREEN OR NOT

    //INITIALIZATION
    init {
        paint.isAntiAlias = true
        paint.strokeWidth = 6F
        paint.strokeJoin = Paint.Join.ROUND
        paint.color = Color.BLACK
        paint.style = Paint.Style.STROKE
    }

    override fun onTouchEvent(event: MotionEvent?): Boolean {
        evenX = event!!.x
        evenY = event!!.y

        when(event.action){
            MotionEvent.ACTION_DOWN -> {
                fingerDown = true
                path.moveTo(evenX,evenY)
                return true
            }
            MotionEvent.ACTION_MOVE -> {
                path.lineTo(evenX,evenY)    //WHEN YOU MOVE YOUR FINGER ON THE SCREEM, X AND Y KEEPS UPDATING AND IT DRAWS A LINE
            }
            MotionEvent.ACTION_UP -> {
                fingerDown = false
            }
            else -> return false
        }
        invalidate()    //JUMP TO THE ON DRAW TO DRAW SOMETHING THAT WE DEFINE
        return super.onTouchEvent(event)
    }

    //THIS FUNCTION SHAPES OUT THE THING WE DRAW. MEANS IT WILL MAKE A LINE STRAIGH OR WILL MAKE A CIRCLE ROUND
    override fun onDraw(canvas: Canvas?) {
        super.onDraw(canvas)
        canvas!!.drawPath(path, paint)
        if (fingerDown){
            canvas.drawCircle(evenX, evenY, 10F, paint)
        }
    }

} 
```

然后我计划画出可以有 3 种不同颜色的线条——黑色、蓝色和红色。这是我更新的代码

```
package com.example.ex13_singletouch

import android.content.Context
import android.graphics.*
import android.view.MotionEvent
import android.view.View
import java.util.*
import kotlin.collections.ArrayList

class SingleTouchView(context: Context): View(context) {    //AFTER COLON : WAS SOMETHING THAT WOULD BE RETURNED
    //private val paint= Paint()
    private val paint1= Paint()
    private val paint2= Paint()
    private val paint3= Paint()
    //private val path = Path()
    private val path1 = Path()
    private val path2 = Path()
    private val path3 = Path()
    //TO CREATE THE X-Y POSITION OF THE FINGER ON THE SCREEN
    private var evenX: Float = 0F
    private var evenY: Float = 0F
    private var fingerDown = false  //CHECKS IF YOUR FINGER IS TOUCHING THE SCREEN OR NOT
    var colorControl = 1

    //INITIALIZATION
    init {
        paint1.isAntiAlias = true
        paint1.strokeWidth = 6F
        paint1.strokeJoin = Paint.Join.ROUND
        paint1.color = Color.BLACK
        paint1.style = Paint.Style.STROKE

        paint2.isAntiAlias = true
        paint2.strokeWidth = 6F
        paint2.strokeJoin = Paint.Join.ROUND
        paint2.color = Color.BLUE
        paint2.style = Paint.Style.STROKE

        paint3.isAntiAlias = true
        paint3.strokeWidth = 6F
        paint3.strokeJoin = Paint.Join.ROUND
        paint3.color = Color.RED
        paint3.style = Paint.Style.STROKE
    }

    override fun onTouchEvent(event: MotionEvent?): Boolean {
        evenX = event!!.x
        evenY = event!!.y

        when(event.action){
            MotionEvent.ACTION_DOWN -> {
                fingerDown = true
                //path.moveTo(evenX,evenY)
                if (colorControl==1){
                    path1.moveTo(evenX,evenY)
                }
                if (colorControl==2){
                    path2.moveTo(evenX,evenY)
                }
                if (colorControl==3){
                    path3.moveTo(evenX,evenY)
                }
                return true
            }
            MotionEvent.ACTION_MOVE -> {
                //path.lineTo(evenX,evenY)    //WHEN YOU MOVE YOUR FINGER ON THE SCREEM, X AND Y KEEPS UPDATING AND IT DRAWS A LINE
                if (colorControl==1){
                    path1.lineTo(evenX,evenY)
                }
                if (colorControl==2){
                    path2.lineTo(evenX,evenY)
                }
                if (colorControl==3){
                    path3.lineTo(evenX,evenY)
                }
            }
            MotionEvent.ACTION_UP -> {
                fingerDown = false
                if (colorControl==3){
                    colorControl=1
                }
                else {
                    colorControl++
                }
            }
            else -> return false
        }
        invalidate()    //JUMP TO THE ON DRAW TO DRAW SOMETHING THAT WE DEFINE
        return super.onTouchEvent(event)
    }

    //THIS FUNCTION SHAPES OUT THE THING WE DRAW. MEANS IT WILL MAKE A LINE STRAIGH OR WILL MAKE A CIRCLE ROUND
    override fun onDraw(canvas: Canvas?) {
        super.onDraw(canvas)
        canvas!!.drawPath(path1, paint1)
        canvas!!.drawPath(path2, paint2)
        canvas!!.drawPath(path3, paint3)
    }
} 
```

您可以查看这两个代码之间的差异，看看我所做的更改。我希望这是有帮助的。*

# ember.js - Ember.js：将子资源的视图插入主应用程序的出口

> ID：14625709
> 
> 赞同：5
> 
> 时间：2013-01-31T12:22:50.633
> 
> 标签：ember.js

默认情况下，Ember 将子资源的视图插入到`{{outlet}}`由父资源的视图定义的视图中。我该如何覆盖它？`{{outlet}}`即在应用程序视图定义中插入子视图。为什么这是默认值？

**用例：**有一个`users`资源，`new`里面有一个路由。我希望`new`在应用程序`{{outlet}}`而不是父资源的`{{outlet}}`.

```
App.Router.map(function(){
  this.resource('users', function(){
     this.route('new');
  });
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T13:06:01.640

对于每条路线，我们都有一个`renderTemplate`可以重载的方法。这使我们可以*完全*控制视图的呈现。

例如，我们可以指定`{{outlet}}`视图将渲染到哪个位置`into`：

*（我假设这是您的用例，但我今天有点心不在焉。）*

```
var UsersRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('users', {
            // Render the UsersView into the outlet found in application.hbs
            into: 'application'
        });
    }
}); 
```

我们还可以使用`outlet`属性指定要渲染的出口名称：

```
var UsersRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('users', {
            // Render the UsersView into the outlet named "sidebar"
            outlet: 'sidebar'
        });
    }
}); 
```

当然，我们可以使用两者的组合来指定插座的名称，以及使用`into`属性找到该插座的位置。

# python - 带回车的 Pyasn1 BER 编码 \r\n

> ID：14625713
> 
> 赞同：0
> 
> 时间：2013-01-31T12:23:14.697
> 
> 标签：python, asn.1

我正在处理 BER 编码的呼叫数据记录 (CDR)。来自 GPRS 隧道协议。我在其中得到了一个字段的值`'\r\n'`。

`'\xa0\x06\x80\x04\r\n\xc4\x086'` -- 这是编码的字符串或`bytearray`导致问题的字符串。**它具有标签a0**所需的所有 TLV 信息，其长度为**06**。有一个内标签**80**，它的长度是**04**。但是，如果我们以下列方式获取输出，它会像这样打印。

导致问题的内部标签**80的值。**它的长度是**04**，但是当我们解码它时，它`pyasn1`的长度变成了**05**，因为它是分开计算`\r`的`\n`。我认为编码这些数据的编码器假定它`\r\n`是一个元素。但是，在使用 pyasn1 对其进行解码时，由于编码值的 TLV 表示上缺少长度，它会引发错误。

```
map(ord, '\xa0\x06\x80\x04\r\n\xc4\x086')
[160, 6, 128, 4, 13, 10, 196, 8, 54] 
```

我们正在使用隐式标签号。

有没有办法使用 pyasn1 的 ber 解码器和编码器来解决这个问题。

谢谢并恭祝安康，

哈里达斯·N。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:50:57.753

我对 pyasn1 不熟悉，但我建议关注传入的数据，因为这对我来说表明存在将二进制字节集视为文本的东西......

如果内部标签确实是 len 4，那么 \n 是否被替换为 \r\n？

# jquery - 我可以使用什么来代替 :indeterminate jQuery 选择器来避免 IE 8 中的异常？

> ID：14625719
> 
> 赞同：5
> 
> 时间：2013-01-31T12:23:37.153
> 
> 标签：jquery, internet-explorer-8

我有这样的代码

```
if ($('#chkCheckAll').is(':indeterminate') == true) 
{
} 
```

但它在ie 8中抛出异常

在 Jquery 中可以做些什么来代替这个来使用 ie8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:34:53.237

改用这个：

```
var $allChk = $('#chkCheckAll');
if ($allChk[0] && $allChk[0].indeterminate ) {
  ... 
} 
```

问题是 IE8`querySelectorAll`实现不支持 ':indeterminate' 伪表达式。但在你的情况下，它实际上不需要使用它，因为你可以查询 DOM 元素本身的相应属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:41:02.523

这是一篇很棒的文章[http://css-tricks.com/indeterminate-checkboxes/](http://css-tricks.com/indeterminate-checkboxes/)

它使用 .prop 对 IE8 进行排序，并且也有[hack](http://jsfiddle.net/chriscoyier/mGg85/2/)

```
<!-- Ghetto click handler -->
<input type="checkbox" id="cb1" onclick="ts(this)">function ts(cb) {
  if (cb.readOnly) cb.checked=cb.readOnly=false;
  else if (!cb.checked) cb.readOnly=cb.indeterminate=true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T09:58:12.093

增强 Ghetto 处理程序以在表单提交中包含数据：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            .nodisplay {display: none;}
        </style>
        <script>
            function ts(cb) {
                if (cb.readOnly) 
                    cb.nextSibling.checked 
                    = cb.checked
                    = cb.readOnly
                    = false;
                else if (!cb.checked) 
                    cb.nextSibling.checked 
                    = cb.readOnly
                    = cb.indeterminate=true;
            }
        </script>
    </head>
    <body>
        <form>

            <input type="checkbox" id="cb1" name="cb1" onclick="ts(this)"
            ><input type="checkbox" name="cb1i" />

            <input type="submit">

        </form>
    </body>
</html> 
```

结果要么没有（未选中）cb1=on（选中）或 cb1i=on（不确定）。请注意，要让 nextSibling 在这种情况下工作，两个复选框之间必须没有空格，否则它会给您一个文本节点。

# jquery - 如何在 html 中以正确的方式使用这个 jquery

> ID：14625722
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:23:49.650
> 
> 标签：jquery, html

有人帮我写了一个脚本来总结所有单选按钮的值。但是当我把它放在我的记事本中时，该功能不起作用。它是一个 jquery 函数，但有人知道如何使用 jquery 函数吗？

```
<html>  
    <head>
        <title>Inboedelwaardemeter</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
                $(function(){
                       $('#show_sum').on('click', function() {
                        alert(sumCheckedRadioButtons());
                    });
               }); 
               function sumCheckedRadioButtons() {
                      var sum = 0;
                      $('input[type=radio]:checked').each(function(i, el) {
                        sum += Number($(el).val());
                      });
                      return sum;
                    };
        </script>
    </head> 
    <body>
        <br>
        <b> Leeftijd hoofdkostwinner:</b>
        <form name="mijnForm1">
        <br>
            <input type="radio" id="getal1" name="leeftijd"
                value="22" checked> 35 jaar en jonger
              <br>    
            <input type="radio" id="getal2" name="leeftijd"
                value="29"> 36 t/m 50 jaar
              <br>
            <input type="radio" id="getal3" name="leeftijd"
                value="38"> 51 jaar en ouder
              <br>
            <br>
        <b> Samenstelling huishouden:</b>
        <br>
        <form name="mijnForm2">
            <input type="radio" id="getal4" name="huishouden"
                value="22" checked> Alleenstaande
              <br>    
            <input type="radio" id="getal5" name="huishouden"
                value="29"> Echtpaar / Samenwonende
              <br>
              <br>  
        <b> Netto maandinkomen hoofdkostwinner</b>
        <br>
        <form name="mijnForm3">
            <input type="radio" id="getal6" name="hoofdkostwinner"
                value="22" checked> Tot en met €1000,-
              <br>    
            <input type="radio" id="getal7" name="hoofdkostwinner"
                value="29"> €1001,- tot en met €2000,-
              <br>
            <input type="radio" id="getal8" name="hoofdkostwinner"
                value="38"> €2001,- tot en met €3000,-
             <br>
            <input type="radio" id="getal9" name="hoofdkostwinner"
                value="38"> €3001,- of hoger
            <br>
            <br>
            <b> Oppervlakte woning</b>
            <br>
        <form name="mijnForm4">
            <input type="radio" id="getal10" name="Oppervlakte"
                value="22" checked> tot en met90m²
              <br>    
            <input type="radio" id="getal1" name="Oppervlakte"
                value="29"> 91m² tot en met 140m²
              <br>
            <input type="radio" id="getal12" name="Oppervlakte"
                value="38"> 141m² tot en met 190m²
             <br>
            <input type="radio" id="getal13" name="Oppervlakte"
                value="38"> 191m² of meer
            <br>
        </form>
        <input type="button" id="show_sum" value="Show Sum" />
    </body>
 </html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:29:09.227

首先包含js文件

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>  //inside head tag 
```

和jQuery代码

```
 <script>
        $(function(){  //code inside this is called whn document is ready
               $('#show_sum').on('click', function() { //this is called when button is clicked
                alert(sumCheckedRadioButtons());
            });
       }); 

       function sumCheckedRadioButtons() {
              var sum = 0;
              $('input[type=radio]:checked').each(function(i, el) {
                sum += Number($(el).val());
              });
              return sum;
            }

    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:41:07.080

你需要添加jquery库，这里是例子

```
<html>
<head>
  <title>Test</title>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
       $('input[type="radio"]').click(function(){
         var sum = $('input[type=radio]:checked').length;          
         alert('You have checked '+ sum + ' radio buttons');
       });
    });
</script>
</head>
<body>    
    <input class="radio" type="radio" /> one <br>
    <input class="radio" type="radio" /> two <br>
    <input class="radio" type="radio" /> three <br>
    <input class="radio" type="radio" /> four <br>        
</body>
</html> 
```

按照这个 [http://jsfiddle.net/xx8Yg/1/](http://jsfiddle.net/xx8Yg/1/)

# java - 如何替换 .m2 存储库中的 Jar

> ID：14625724
> 
> 赞同：1
> 
> 时间：2013-01-31T12:23:59.657
> 
> 标签：java, maven, maven-2

我想在我的 .m2 存储库中替换一个 Jar。我的存储库中有旧版本的 Jar。我想将其更新为较新的。

目前我`jtidy-4aug2000r7-dev.jar`在`C:\.m2\repository\jtidy\jtidy\4aug2000r7-dev`.

我想将其更新为 jtidy-r938。我的本地文件夹中有这个 jar。

有人可以告诉我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:26:06.240

Since it's on central, the easiest way is to declare it as a dependency to your project and run `mvn dependency:get`.

```
<dependency>
    <groupId>net.sf.jtidy</groupId>
    <artifactId>jtidy</artifactId>
    <version>r938</version>
</dependency> 
```

This will put the `r398` version in (another) subdirectory beside the `4aug2000r7-dev` version.

To manually install an artifact [refer to this answer](https://stackoverflow.com/a/442243/687514).

Cheers,

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:27:21.800

If you have the updated jar locally, you use the following command

```
mvn install:install-file  -Dfile=path-to-your-artifact-jar \
                          -DgroupId=your.groupId \
                          -DartifactId=your-artifactId \
                          -Dversion=version \
                          -Dpackaging=jar \
                          -DlocalRepositoryPath=path-to-specific-local-repo 
```

which install your updated jar file locally.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:27:06.637

update your `pom.xml`

purticularly the one similar to this

```
<dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>**4.0**</version>
      <type>jar</type>
      <scope>test</scope>
      <optional>true</optional>
    </dependency> 
```

update Version as per your need

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T12:50:10.127

更新 pom.xml 中依赖标记中的版本。它将自动从中央 maven repo 下载新​​版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:26:21.667

*   Update your dependancies in the POM file
*   Delete the folder
*   Run a maven command that depends on the Jar and it will automatically fetch it

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T12:26:54.233

Delete it, update the version-number in your pom.xml and update your dependencies. If the version is not available in the maven repository, build your own artifact with the specified version use it for your purpose.

# php - 通过 IP 阻止用户

> ID：14625727
> 
> 赞同：0
> 
> 时间：2013-01-31T12:24:01.927
> 
> 标签：php, mysql

我需要使用 IP 做一个块系统，因为我的旧系统失败了（实际上并没有失败，请查看此链接以获取更多信息[Stackoverflow - Cookies](https://stackoverflow.com/questions/14593969/issue-with-cookies-php)

好吧，我知道如何获取用户 IP，当然也可以将其存储在数据库中。我的疑问是如何指定到期时间以及如何在时间到期后将其从数据库中删除，当然是自动删除。例如...

*   用户发表评论
*   在数据库中存储用户 IP 30 秒
*   用户在 30 秒到期之前无法再次发表评论
*   过期时间后自动从数据库中删除IP
*   用户现在可以再次发表评论

对不起我的英语不好。如果有不清楚的地方，请告诉我，我会解释得更好。

@编辑

好吧，恢复所有这些，我的疑问是：

*   我如何在数据库（字段和字段上的数据）上执行过期时间（例如，30 秒）。
*   如何删除已过期的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:53:17.307

MySQL

```
INSERT INTO `_table` (`ip_address`, `reason`, `expire`) VALUES ('10.10.10.10', 'I don\'t like what you did.', '1362268800'); 
```

该记录应该在数据库表中，我已将其设置为在 2 月 31 日到期。

```
//PHP Checking code.
$query = mysql_query("SELECT `reason` FROM `_table` WHERE `ip_address` = '".$_SERVER["REMOTE_ADDR"]."' AND `expire` > UNIX_TIMESTAMP() LIMIT 1");

if (mysql_num_rows($query)){
    $row = mysql_fetch_assoc($query);
    echo $row["reason"];
} //end if. 
```

上面会主动检查是否找到了观众的 IP 地址，然后会回显原因。

# python - 如何使用 win32com 从 word 文档中按颜色获取文本？

> ID：14625732
> 
> 赞同：2
> 
> 时间：2013-01-31T12:24:25.087
> 
> 标签：python, ms-word, ms-office, win32com

我有一个包含几个表格的 word 文档。每张桌子有两种颜色，黑色和红色。

我想通过颜色从 word 文档表格中的单元格中获取文本。我找到了一种方法，但我认为它非常低效。

以下代码从单词表单元格中获取文本，并使用其颜色打印每个单词。

```
import os, sys
import win32com.client, re

path = os.path.join(os.getcwd(),"../files/tests2.docx")
word = win32com.client.Dispatch("Word.Application")
word.Visible = 1
doc=word.Documents.Open(path)

for table in doc.Tables:
    f = 2
    c = 2
    wc = table.Cell(f,c).Range.Words.Count
    for i in range(1,wc):
        print table.Cell(f,c).Range.Words(i), table.Cell(f,c).Range.Words(i).Font.Color 
```

你知道实现这一目标的任何其他（更好）方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:05:42.310

这是一种使用[python-docx](https://github.com/mikemaccana/python-docx)从 Word 文档中提取突出显示的单词的方法：

```
#!usr/bin/python
# -*- coding: utf-8 -*-
from docx import *
document = opendocx(r'test.docx')
words = document.xpath('//w:r', namespaces=document.nsmap)
WPML_URI = "{http://schemas.openxmlformats.org/wordprocessingml/2006/main}"
tag_rPr = WPML_URI + 'rPr'
tag_highlight = WPML_URI + 'highlight'
tag_val = WPML_URI + 'val'
tag_t = WPML_URI + 't'
for word in words:
    for rPr in word.findall(tag_rPr):
        high=rPr.findall(tag_highlight)
        for hi in high:
            if hi.attrib[tag_val] == 'yellow':
                print word.find(tag_t).text.encode('utf-8').lower() 
```

# java - 如何设置 java2ws 类路径？

> ID：14625737
> 
> 赞同：1
> 
> 时间：2013-01-31T12:24:48.697
> 
> 标签：java, web-services, cxf

当我尝试生成一个 wsdl 文件时，我得到了

```
JavaToWS Error: org.apache.cxf.tools.common.ToolException: Fail to load class : com.oprs.ws.AvailableServiceWS 
```

错误。调试后，我发现 java2ws 类路径已设置为`/Projects/Txt2ORA/WS-client-oprs/build/classes`我没有任何类的位置。我需要为 java2ws 设置类路径，但没有找到方法。在哪里设置此路径？

我正在使用 CXF 2.6.0。

`EDIT`构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- This is the common header that should be included for every build.xml script file -->
<!DOCTYPE project [
    <!ENTITY load-flag-targets SYSTEM "file:../../../flag-targets.xml">
    <!ENTITY set-properties SYSTEM "file:../../../includes.xml">
]>

<project basedir="." default="build" name="Cxf_WebServices">

    <!-- define all settings for different kinds of builds -->
    &load-flag-targets;

    <target name="--init" unless="project.base">
        <echo message="** Setting properties . . ."/>
        <!-- Read the system environment variables and stores them in properties, -->
        <!-- prefixed with "env.". -->
        <property environment="env."/>

        <!-- The build.properties file defines the project base and lib directories -->
        <property file="../../../build.properties"/>

        <!-- set the properties based on the build flags -->
        &set-properties;
    </target>

    <target name="init" depends="--init">
        <property name="output" value="build/classes/${build.dir}"/>
        <property name="input" value="main"/>
        <property name="jarfile" value="oprs-ws.jar"/>
        <property name="dist" value="build/dist/${build.dir}"/>
        <property name="javadoc.dir" value="build/javadoc"/>
        <property name="javadoc.name" value="oprs-ws-javadocs.zip"/>
        <property name="custom.lib" value="${components.dist.dir}"/>
        <property name="wsdl.dir" value="${war.staging}/wsdl"/>
        <mkdir dir="${output}"/>
    </target>

    <target name="compile" depends="init">
        <javac debug="${compile.debug}" debuglevel="${compile.debug.level}" deprecation="true" 
                destdir="${output}" srcdir="${input}" includeantruntime="false">
            <classpath>
                <fileset dir="${project.lib}">
                    <include name="*.jar"/>
                    <include name="${flags.server}/*.jar"/>
                    <include name="struts/*.jar"/>
                    <include name="cxf-spring/*.jar"/>
                </fileset>
        <fileset dir="${custom.lib}">
            <include name="**/*.jar"/>
        </fileset>
            </classpath>
        </javac>
    </target>

    <target name="jar" depends="init,compile">
        <jar jarfile="${output}/${jarfile}" compress="true" excludes="*.jar" manifest="META-INF/MANIFEST.MF">
            <fileset dir="${output}">
                <include name="**/*.class"/>
            </fileset> 
            <fileset dir=".">
                <include name="META-INF/*.xml"/>
            </fileset>  
        </jar>
    </target>

    <target name="cxf-WSDL2Java" depends="build">
        <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
            <arg value="-verbose" />
            <arg value="-validate" />
            <arg value="-compile" />
            <arg value="-d" />
            <arg value="${input}" />
            <arg value="-classdir" />
            <arg value="${output}" />
            <arg value="${wsdl.dir}/TicketBookingService.wsdl" />

            <classpath>
                <fileset dir="${project.lib}">
                    <include name="*.jar"/>
                    <include name="${flags.server}/*.jar"/>
                    <include name="cxf-spring/*.jar"/>
                    <include name="${cxf.home}/modules/*.jar"/>
                    <include name="${cxf.home}/lib/*.jar"/>
                </fileset>
                <fileset dir="${custom.lib}">
                    <include name="**/*.jar"/>
                </fileset>
            </classpath>
        </java>
    </target>

    <target name="build" depends="init,jar" description="Build release jar.">
        <copy file="${output}/${jarfile}" todir="${components.dist.dir}" overwrite="true"/>
        <echo message="Built ${jarfile} for ${flags.mode} ${flags.server} ${flags.os} in ${components.dist.dir}."/>
    </target>

    <target name="clean" depends="init" description="Clean all build products.">
        <delete dir="${output}" quiet="true"/>
        <delete dir="${javadoc.dir}" quiet="true"/>
        <delete dir="${dist}" quiet="true"/>
    </target>

    <!-- generate javadoc, zip it and send it to a stage location. Ignore errors. -->
    <target name="javadoc" depends="init">
        <mkdir dir="${javadoc.dir}"/>

        <!-- generate javadoc -->
        <javadoc destdir="${javadoc.dir}"
                windowtitle="Package: oprs CXF Web Services"
                author="false"
                version="false"
                excludepackagenames="org.*,javax.*"
                verbose="false">

            <classpath>
                <fileset dir="${project.lib}">
                    <include name="*.jar"/>
                    <include name="${flags.server}/*.jar"/>
                </fileset>
                <fileset dir="${custom.lib}">
                    <include name="*.jar"/>
                </fileset>
            </classpath>

            <packageset dir="${input}" defaultexcludes="yes">
                <include name="com/abhibus/oprs/**" />
            </packageset>
        </javadoc>

        <!-- zip javadoc -->
        <zip destfile="${components.javadoc.dir}/${javadoc.name}" basedir="${javadoc.dir}"/>

        </target>

        <!-- Deploy the jar file for developement testing purpose only -->
        <target name="deploy-jar" depends="build">
            <copy file="${components.dist.dir}/${jarfile}" todir="${deploy.dir}/apsrtc-oprs/WEB-INF/lib" overwrite="true"/>
        </target>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T04:45:49.390

只需`<pathelement path="${build.classes directory....}"/>`在您的`<classpath>`. 这解决了我的问题。

# jsp - 使用 c:foreach (JSP/JSTL) 遍历 ArrayList，变量不起作用

> ID：14625738
> 
> 赞同：3
> 
> 时间：2013-01-31T12:25:05.867
> 
> 标签：jsp, arraylist, foreach, jstl, loops

我知道我的问题有无数的例子，但我经历了很多，无法弄清楚我的错误在哪里。

我正在迭代一个 ArrayList(TestSzenario)。TestSzenario 类包含一个名为 name 的字符串变量，带有适当的 getter 和 setter。

这是我的代码：

```
<td><select name="selectSzenario" id="selectSzenario" size="1">
                <c:forEach items="<%=testszenario.getSzenariosForSummary() %>" var="szenario"> 
                    <option>${szenario.name}</option>
                </c:forEach></select></td></tr> 
```

我的问题是，变量不起作用。对于选择框中的每个选项，我总是得到 ${szenario.name}。我正确地声明了 JSTL-taglib，因为完成后站点中有多个选项，我知道迭代正在工作。我还查看了 HTML 源代码，foreach 已解决。

HTML 输出：

```
 <tr><td>Szenario:</td>
        <td><select name="selectSzenario" id="selectSzenario" size="1">

                    <option>${szenario.name}</option>

                    <option>${szenario.name}</option>
                </select></td></tr> 
```

编辑答案1：谢谢，但我之前尝试过：

```
ArrayList<TestSzenario> szenarioList = testszenario.getSzenariosForSummary();
request.setAttribute("aList", szenarioList);
request.setAttribute("ts", testszenario);

<c:forEach items="${aList}" var="szenario">
<option>${szenario.name}</option>
</c:forEach></select></td></tr>

<c:forEach items="${ts.szenariosForSummary}" var="szenario">
<option>${szenario.name}</option>
</c:forEach></select></td></tr> 
```

但在任何一种情况下，它甚至都不会遍历列表，导致只有 1 个选项（列表包含 2 个元素）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T12:28:12.437

`<%=testszenario.getSzenariosForSummary() %>`会将对象转换为`String`using方法并将其`String#valueOf(Object)`直接写入 HTTP 响应。这不是你想要的。更重要的是，您根本**不**应该将老式小*脚本*与现代 taglibs/EL 混合使用。

您需要确保`testszenario`EL 可以使用它`${}`。因此，只需在某些 servlet 中预先将其设置为页面、请求、会话或应用程序范围的属性，如下所示

```
request.setAttribute("testszenario", testszenario); 
```

然后你可以按照通常的方式访问它：

```
<c:forEach items="${testszenario.szenariosForSummary}" var="szenario"> 
```

### 也可以看看：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)
*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- Hello World #2 可能对您有用
*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

**更新**：关于 EL 没有被解释的问题，你显然 JSTL 和 container/`web.xml`版本不匹配。确保版本正确对齐。例如 Servlet 3.0 容器，`version="3.0"`在`web.xml`JSTL 1.2 中。另请参阅我们的 JSTL wiki 页面。

### 也可以看看：

*   [我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)- 阅读“帮助！表达式语言（EL，那些`${}`东西）在我的 JSTL 标签中不起作用！”部分。

# c# - LongListSelector 中的滚动管理

> ID：14625740
> 
> 赞同：4
> 
> 时间：2013-01-31T12:25:12.903
> 
> 标签：c#, scroll, windows-phone-8, windows-phone, longlistselector

在我的 WP8 应用程序中，我正在尝试实现一个功能，该功能将允许我保存`LongMultiListSelector`的滚动位置并在以后将其滚动到该位置（例如在墓碑之后）。事实证明这是一项艰巨的任务，尽管取得了一些进展，但我仍然有疑问。

据我所知，我现在需要以下东西才能工作：

1.  显然**可以滚动到**我现在拥有的指定项目。（`LongMultiListSelector`尽管是 的扩展`LongListSelector`，但没有`ScrollTo`方法，尽管`LongListSelector`可以在`LongMultiListSelector`的可视化树中找到，这就是我所做的）。

    1.1。**能够滚动到带有动画的指定项目，**而这个我还没有解决。它不是那么重要，但拥有它会很好。经过一番搜索，我发现曾经`LongListSelector`有`AnimateTo`方法，但目前没有。

2.  **能够找出`LongListSelector`当前在屏幕上**可见的项目，以便我可以保存这些可见项目之一的索引，然后滚动到它。这个我也没有解决，非常重要。

    经过一番搜索，我发现了这个问题：[WP7 Toolkit Update Removed GetItemsInView() from the LongListSelector](https://stackoverflow.com/questions/7124262/wp7-toolkit-update-removed-getitemsinview-from-the-longlistselector)。是说，在以前`LongListSelector`有一个`GetItemsInView`功能，在后来它有`Link`和`Unlink`事件，特别是为了这个目的。目前`LongListSelector`没有这两个选项。

    所以主要问题是我现在应该怎么做才能找到可见的项目`LongListSelector`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:58:42.990

I looks like currently there's no easy and direct way at all to find which items are visible. Fortunately not everything is lost. Both `ScrollBar` and `LongListSelector` can be found in `LongListSelector`'s visual tree at runtime.

`LongListSelector` is needed for it's `ScrollTo` method and from `ScrollBar` I need a `ValueChanged` event where I can get `ScrollBar.Maximum` and `ScrollBar.Value` which are control height and current offset, respectively. The problem again is that these two properties are not always calculated correctly perhaps due to `LongListSelector`'s virtualization and the fact that it does not show all the items at once. Good thing is that negative distance (Maximum - Value, an offset from end of list) is, although relative, always right.

So if it's possible for you to manually calculate real height of your `LongListMultiSelector` then scroll management becomes possible using that real height and negative distance. In my case it was easy because all of the items are of the same height.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T12:45:41.083

回答**能力滚动到带有动画的指定项目**：

[这篇](http://sviluppomobile.blogspot.ru/2013/04/smooth-scrolling-content-on-windows.html)文章会帮助你。

**主要思想**：ScrollViewer`VerticalOffset Property`被标记为只读。因此，您可以创建一个 shell 类来帮助您为 VerticalOffset 设置动画。

# join - solr4 是否能够在多条件下进行跨核连接

> ID：14625741
> 
> 赞同：0
> 
> 时间：2013-01-31T12:25:14.267
> 
> 标签：join, solr

solr4 引入了 join 功能，所以我们可以使用下面的 url：

```
 {!join from=fromField to=toField fromIndex=fromCoreName}news_headline:apple 
```

但是我有这样的场景，不仅需要news_headline，还需要news_type，怎么在这个url中添加news_type呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:19:53.843

睡了一觉，发现这个url和q是一样的，可以这样解决：

```
{!join from=fromField to=toField fromIndex=fromCoreName}news_headline:apple AND news_type:internal 
```

# php - PHP、XPath 和 SimpleXML - XPath 不工作

> ID：14625744
> 
> 赞同：2
> 
> 时间：2013-01-31T12:25:15.813
> 
> 标签：php, xml, xml-parsing

我有以下 PHP 和 XML：

```
$XML = <<<XML
<items>
    <item id="12">
        <name>Item A</name>
    </item>
    <item id="34">
        <name>Item B</name>
    </item>
    <item id="56">
        <name>Item C</name>
  </item>
</items>
XML;

$simpleXmlEle = new SimpleXMLElement($XML);

print_r($simpleXmlEle->xpath('./item[1]'));
print "- - - - - - -\n";
print_r($simpleXmlEle->xpath('./item[2][@id]'));
print "- - - - - - -\n";
print_r($simpleXmlEle->xpath('./item[1]/name')); 
```

我可以像这样访问ID

```
$simpleXmlEle->items->item[0]['id'] 
```

由于它是一个动态应用程序，xpath 在运行时作为字符串提供，所以我相信我应该使用 xpath。

上面的 PHP 产生：

PHP：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 12
                )

            [name] => Item A
        )

)
- - - - - - -
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 34
                )

            [name] => Item B
        )

)
- - - - - - -
Array
(
    [0] => SimpleXMLElement Object
        (
        )

) 
```

我理解第一个输出，但在第二个输出中，整个元素被返回，而不仅仅是属性。
**1）任何想法为什么？**

最后一项也是空的
**2）为什么会这样？正确的 xpath 是什么？**

我的目标是第二个和第三个输出为：34（第二个元素的 id 属性的值）项目 A（只是第一个元素的名称）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:26:21.403

见下文：

```
// name only
$name = $simpleXmlEle->xpath("./item[1]/name");
echo $name[0], PHP_EOL;

// id only
$id = $simpleXmlEle->xpath("./item[2]/@id");
echo $id[0], PHP_EOL; 
```

印刷：

```
Array ( [0] => SimpleXMLElement Object ( [0] => Item A ) )
Array ( [0] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 34 ) ) ) 
```

确保您**不**这样做：

```
print_r($objSimpleXML->xpath("//item[1]/name")); 
```

根据文档 // 返回具有此名称的所有元素，因此如果在更深层次上有一个 item 元素，那么它的值也会返回，这是不需要的。

希望有帮助

# android - 在活动之间切换时无法启动活动错误

> ID：14625752
> 
> 赞同：0
> 
> 时间：2013-01-31T12:25:41.687
> 
> 标签：android

这是主要的 java 代码，我在其中创建了一个主游戏菜单，我尝试使用 xml 文件设置页面：

```
 package com.self;
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.TextView;

 public class main extends Activity implements OnClickListener {

TextView c, ng, h, cr, s, e;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(com.self.R.layout.main);
    c = (TextView) findViewById(com.self.R.id.cont);
    ng = (TextView) findViewById(com.self.R.id.newg);
    h = (TextView) findViewById(com.self.R.id.help);
    cr = (TextView) findViewById(com.self.R.id.credits);
    s = (TextView) findViewById(com.self.R.id.settings);
    e = (TextView) findViewById(com.self.R.id.exit);
    c.setOnClickListener(this);
    ng.setOnClickListener(this);
    h.setOnClickListener(this);
    cr.setOnClickListener(this);
    s.setOnClickListener(this);
    e.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case com.self.R.id.settings:
        Class myclass;
        try {
            myclass = Class.forName("com.self.settings");

            Intent myint = new Intent(main.this, myclass);
            startActivity(myint);
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;

    }

   }

    } 
```

以及当我单击主 xml 文件中的设置 textview 时应该打开的 settings.xml 文件。

```
 <TextView android:text="@string/sound" 
            android:layout_width="fill_parent" android:layout_height="20dp"
            android:layout_gravity="right" android:id="@+id/sound">                             
</TextView>

<TextView android:text="@string/music" android:id="@+id/music"
     android:layout_width="fill_parent"
    android:layout_height="20dp" style="@style/MenuFont">
</TextView>

<TextView android:text="@string/vibrate" android:layout_width="fill_parent"
     android:layout_height="20dp" android:id="@+id/vibrate"
    style="@style/MenuFont">
</TextView>
<TextView android:text="@string/graphics"
    android:layout_width="fill_parent" android:layout_height="20dp"
     android:id="@+id/graphics" style="@style/MenuFont">
</TextView>
<TextView android:text="@string/back" 
    android:layout_width="fill_parent" android:layout_height="20dp"

    android:id="@+id/back" style="@style/MenuFont">
</TextView>

     </LinearLayout> 
```

这是我的清单：

```
<activity android:name=".main" android:label="@string/app_name"> 
      <intent-filter> 
           <action android:name="android.intent.action.MAIN" /> 
                 <category android:name="android.intent.category.LAUNCHER" /> 
      </intent-filter> 
</activity> 
<activity android:name=".settings" android:label="@string/app_name"> 
      <intent-filter> 
            <action android:name="android.intent.action.SETTINGS" /> 
                  <category android:name="android.intent.category.DEFAULT" /> 
```

这是我的 Logcat 报告：

```
ERROR/AndroidRuntime(438): FATAL EXCEPTION: main ERROR/AndroidRuntime(438): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.self/com.self.settings}: android.content.res.Resources$NotFoundException: Resource ID #0x7f060002 type #0x12 is not valid
ERROR/AndroidRuntime(438): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
ERROR/AndroidRuntime(438): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:38:52.250

问题在于 contentview 。你能告诉我为什么你把布局设置为id吗？`setContentView(com.self.R.id.settings);`除此之外，您应该将其设置为`setContentView(R.layout.settings);`

# heroku - 将 sendgrid 插件添加到我的 heroku django 应用程序

> ID：14625754
> 
> 赞同：1
> 
> 时间：2013-01-31T12:25:43.027
> 
> 标签：heroku, sendgrid

我在 heroku 上托管了一个 django 应用程序。我正在使用 django-registration 向注册用户发送验证电子邮件。所以，我尝试使用添加 sendgrid 插件

`heroku addons:add sendgrid`

但这失败并显示以下消息

```
Adding sendgrid:starter on myapp... failed
 !    Please verify your account to install this add-on
 !    For more information, see http://devcenter.heroku.com/categories/billing
 !    Verify now at https://heroku.com/verify 
```

它似乎进入了一个要求我提供信用卡信息的页面。不幸的是，我没有信用卡信息。我仍然可以在没有信用卡的情况下获得这个插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:54:18.357

如[开发中心文章](https://devcenter.heroku.com/articles/account-verification)中所述，您必须添加信用卡才能使用免费插件。完成后，您[可能必须注销并重新登录](https://stackoverflow.com/questions/7846491/heroku-addons-not-recognizing-verified-account)才能配置附加组件。

# mysql - 为什么这个 MySQL 查询在一台服务器上比另一台服务器慢？

> ID：14625757
> 
> 赞同：1
> 
> 时间：2013-01-31T12:25:53.910
> 
> 标签：mysql, query-optimization, mysql-5.1, mysql-5.5

我有一个要优化的 SQL 查询。有趣的是，在一个 MySQL 服务器上，查询运行时间约为 0.06 秒，我很满意，但在另一台服务器上，查询需要接近 0.2 秒（两倍长）。

```
SELECT fo.facets_id, fo.facets_options_id, fo.value
FROM facets_options fo
INNER JOIN categories_facets cf ON cf.facets_options_id=fo.facets_options_id
INNER JOIN categories c ON c.categories_id=cf.categories_id
WHERE fo.facets_id="2"
AND fo.language_id = "1"
AND c.enabled=1
GROUP BY fo.facets_options_id
ORDER BY fo.value ASC; 
```

两台服务器上的“EXPLAIN”输出是相同的：

```
id          select_type          table  type   possible_keys                                             key               key_len  ref                        rows Extra
1           SIMPLE               fo     ref    PRIMARY,facets_options_id,facets_id,facets_id_2           facets_id         4        const                      986  Using where; Using temporary; Using filesort
1           SIMPLE               cf     ref    PRIMARY,categories_id,categories_id_2,facets_options_id   facets_options_id 4        mydb.fo.facets_options_id  37   
1           SIMPLE               c      eq_ref PRIMARY,enabled                                           PRIMARY           4        mydb.cf.categories_id      1    Using where 
```

查询运行缓慢的服务器使用 MySQL 5.1.66，运行速度快的服务器使用 MySQL 5.5.29。

新版本的 MySQL 是否可能在优化查询方面做得更好？还是有其他原因可能导致它？我怎样才能更多地了解幕后发生的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:36:57.550

我假设您的硬件在两台服务器上都是相同的。

您可以使用探查器查看差异的来源。

```
SET profiling = 1;
SELECT /*yourquery...*/
SHOW PROFILES;
/*lookup the id for your query*/
SHOW PROFILE FOR QUERY 1 /*or whatever id your query has*/ 
```

你会得到一个详细的清单，花了多长时间等等......

还有`EXPLAIN EXTENDED`, 您可以使用它查看优化后的查询。

手册中有一个例子[。](http://dev.mysql.com/doc/refman/5.0/en/explain-extended.html)

除此之外，很可能差异来自不同的 MySQL 版本。

Percona 确实调查了从 5.1 到 5.5 的性能改进。结果就[在这里](http://www.percona.com/files/presentations/PerconaLiveSF2011-Performance-Improvements-In-MySQL-5.5.pdf)。

# ios - 在 iOS 中以编程方式创建渐变图像

> ID：14625763
> 
> 赞同：4
> 
> 时间：2013-01-31T12:26:07.400
> 
> 标签：ios, core-graphics

我正在尝试处理一些直接来自设备相机的图像数据。为了理解 CGImage 结构，我使用缓冲区来创建不适合我的图像（我知道我不应该在 Obj-C 代码中使用 C 代码，这只是为了理解）。代码如下：

```
int *outBuf = malloc(sizeof(int) * width * height);
for (int i = 0; i < width * height;i ++)
{
     outBuf[i] = (((float)i) / ((float) width * height)) * 255.f;
}
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();

CGContextRef ctx = CGBitmapContextCreate(outBuf, width, height, 8, width * 4, colorSpace, kCGImageAlphaNone);

CGImageRef img = CGBitmapContextCreateImage(ctx);
CFRelease(ref);
CGContextRelease(ctx);
free(outBuf);

CGColorSpaceRelease(colorSpace);

[view.imgView setImage: [UIImage imageWithCGImage:img]];

CGImageRelease(img); 
```

这应该会创建从第一个像素到最后一个像素的渐变，但会产生一个奇怪的图形：

![生成的图像](../Images/fc2330e85a5f13e6ebfa9094d8e59331.png)

水平间距从何而来？（我想解决这个问题，我知道还有其他绘制渐变的可能性）提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:46:36.260

我找到了解决方案：

我正在用 int* 初始化缓冲区。每个 int 长度为 4 个字节，但灰度图片每个像素只需要 1 个字节。将缓冲区更改为 char* 并修改 CGBitmapContextCreate 参数修复了该问题：

```
CGBitmapContextCreate(outBuf, width, height, 8, width, colorSpace, kCGImageAlphaNone); 
```

![在此处输入图像描述](../Images/ed86fb63d5e6d4cf805176b02aed1dc9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:00:51.937

有几种方法可以实现您想要的。这里有两个例子： 请注意，这只是给你一个例子，你应该添加参数/颜色/等来得到你所追求的。希望这可以帮助。

1）直接在draw rect中绘制渐变。如果你想要额外的绘图，也可以在你的视图实现中调用 [super drawRect:rect]。

```
- (void)drawRect:(CGRect)rect {
    CGPoint center = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
    if (CGSizeEqualToSize(self.centerOffset, CGSizeZero) == NO) {
        center.x += self.centerOffset.width;
        center.y += self.centerOffset.height;
    }

    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    size_t num_locations = 2;
    CGFloat locations[2] = { 0.0, 1.0 };
    CGFloat components[8] = { 0.0, 0.0, 0.0, 0.5,   // Start color
                              0.0, 0.0, 0.0, 0.7 }; // End color

    CGColorSpaceRef rgbColorspace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(rgbColorspace, components, locations, num_locations);
    CGGradientDrawingOptions options = kCGGradientDrawsBeforeStartLocation | kCGGradientDrawsAfterEndLocation;
    CGFloat endRadius = [UIApplication sharedApplication].keyWindow.bounds.size.height / 2;
    CGContextDrawRadialGradient(currentContext, gradient, center, 50.0f, center, endRadius, options);

    CGGradientRelease(gradient);
    CGColorSpaceRelease(rgbColorspace); 
} 
```

2）使用CAGradient层

```
 UIColor *startEndColour = [UIColor redColor];
    UIColor *middleColor = [UIColor blueColor];

    NSArray *horizontalGradientColorsArray = [NSArray arrayWithObjects:(id)[startEndColour CGColor], (id)[middleColor CGColor],(id)[middleColor CGColor], (id)[startEndColour CGColor],nil];

    UIView *horizontalGradient1View = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, self.bounds.size.width, 1.f)];
    horizontalGradient1View.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleBottomMargin;
    CAGradientLayer *horizontalGradient1 = [CAGradientLayer layer];
    horizontalGradient1.frame = horizontalGradient1View.bounds;
    horizontalGradient1.colors = horizontalGradientColorsArray;
    horizontalGradient1.startPoint = CGPointMake(0, 0.5);
    horizontalGradient1.endPoint = CGPointMake(1.0, 0.5);
    [horizontalGradient1View.layer insertSublayer:horizontalGradient1 atIndex:0];
    [self addSubview:horizontalGradient1View];
    [horizontalGradient1View release]; 
```

# iphone - NSDictionary is not taking repeated characters

> ID：14625764
> 
> 赞同：-2
> 
> 时间：2013-01-31T12:26:07.600
> 
> 标签：iphone, ios, ipad

I have a array with objects A,B,A,A,B with keys 1,2,3,4,5

but as A is repeated NSDictionary is not taking 'A' 2 times and gives error saying

```
-[NSDictionary initWithObjects:forKeys:]: count of objects (1) differs from count of keys (0)' 
```

So whats the solution for this

My Code:

```
Ar=[[NSArray alloc]initWithObjects:A,A,A,A,A,nil];
Ar2=[[NSArray alloc]initWithObjects:1,2,3,4,5,nil];
    dic2=[[NSMutableDictionary alloc]initWithObjects:Ar forKeys:Ar2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:37:03.263

使用新语法使代码更具可读性，并且在大多数情况下可以避免此类问题

```
NSDictionary *data = @{@"1" : @"A", @"2" : @"B", @"3" : @"A", @"4" : @"A", @"5" : @"B"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:32:16.563

请尝试下面的代码片段

```
NSMutableDictionary *data = [[NSMutableDictionary alloc]init];
 [data setValue:@"A" forKey:@"1"];
 [data setValue:@"B" forKey:@"2"];
 [data setValue:@"A" forKey:@"3"];
 [data setValue:@"A" forKey:@"4"];
 [data setValue:@"B" forKey:@"5"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:40:07.503

应该是这样的。

```
 NSArray *Ar=[[NSArray alloc]initWithObjects:@"A",@"A",@"A",@"A",@"A",nil];
NSArray *Ar2=[[NSArray alloc]initWithObjects:@1,@2,@3,@4,@5,nil];
NSMutableDictionary *dic2=[[NSMutableDictionary alloc]initWithObjects:Ar forKeys:Ar2]; 
```

此致。

# ios - Kal calendar in storyboard in combination with Tabbar

> ID：14625767
> 
> 赞同：2
> 
> 时间：2013-01-31T12:26:14.740
> 
> 标签：ios, objective-c, uiviewcontroller, storyboard, kal

I am working with a storyboard and a tabbar controller. Inside the storyboard I added a viewController and made it's class `AgendaViewController`. this Viewcontroller is embeded inside a navigation controller. Now in the .m of my AgendaViewController I have added this piece of code.

```
calendar = [[KalViewController alloc] init];
calendar.title = @"";
calendar.delegate = self;
dataSource = [[AgendaDatasource alloc] init];
calendar.dataSource = dataSource;

[self.navigationController pushViewController:calendar animated:YES]; 
```

This works. but when I push on the tabbarbutton again. (so I refresh my view) I get a white screen. The white screen is just the view of AgendaViewController

Any help?

# ruby-on-rails - rails：从连接表中获取数据

> ID：14625770
> 
> 赞同：1
> 
> 时间：2013-01-31T12:26:22.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

课程：

```
class RefCountry < ActiveRecord::Base
  has_many :cities, :class_name => :RefCity, :foreign_key => "country_id", :primary_key => "country_id"
end

class RefCity < ActiveRecord::Base
  belongs_to :country, :class_name => :RefCountry, :primary_key => "country_id"
end 
```

所有链接都在工作。

如果我尝试做

```
RefCity.joins(:country) 
```

我得到 ActiveRecord::Relation

```
[
RefCity country_id: 1306, region_id: 4515, city_id: 67101, name_en: "Ust-Orda">, 

RefCity country_id: 1285, region_id: 4483, city_id: 67102, name_en: "Ust-Tarka", ...] 
```

但是，我只想获取数据类型

```
{city_id1, city_name1, country_id1, country_name1},
{city_id2, city_name2, country_id2, country_name2},
...
{city_idN, city_nameN, country_idN, country_name} 
```

用于 ajax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:36:05.287

试试这个

```
 >> cities = RefCity.joins(:country).select('ref_cities.id, ref_cities.name, ref_cities.country_id, countries.name AS country_name')
 >> cities.first.id # city id
 >> cities.first.name # city name
 >> cities.first.country_id # country id
 >> cities.first.country_name # country name
 >> cities.map { |city| [city.id, city.name, city.country_id, city.country_name] } 
```

# javascript - 如何在javascript中调用dyanimc函数

> ID：14625772
> 
> 赞同：0
> 
> 时间：2013-01-31T12:26:32.890
> 
> 标签：javascript

> **可能重复：**
> [如何动态调用 JavaScript 对象的方法](https://stackoverflow.com/questions/5112793/how-do-i-dynamically-call-a-javascript-objects-method)

我有不同属性的功能

```
setCar : function() {}
setBike : function() {}
setAirPlane : function (){} 
```

我有格式键值的对象

```
var json = { Car : "Car1",
             Bike : "Bike1",
             AirPlane  : "test1" } 
```

我想根据对象值以动态方式调用 set 函数：

```
 updateProperties : function(json) {        
 for ( var property in json) {
     //set + property (AdditionalProperties[property])
 }; 
```

在属性中我有函数的名称（Car,Bike,AirPlane），在 AdditionalProperties[property] 我有属性的值（Car1,Bike1,test1.

有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:29:47.923

为什么不？可以这样做：

```
for (var property in obj) {
    typeof funcContainer["set" + property] === "function"
      && funcContainer["set" + property](obj[property]);
} 
```

在哪里`funcContainer`：

```
var funcContainer = {
    setCar : function() {},
    setBike : function() {},
    setAirPlane : function() {}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:31:27.063

如果

```
objWithFuncts = {
...
setCar : function() {}
setBike : function() {}
setAirPlane : function (){}
...
} 
```

比你能做的：

```
 updateProperties : function(json) {        
 for ( var property in json) {
       if(json.hasOwnProperty(property) && objWithFuncs["set" + property])
           objWithFuncs["set" + property](AdditionalProperties[property])
 }; 
```

请记住，您可以使用索引访问对象的任何属性，例如：`obj["propName"]` 等于`obj.propName`

# android - Calling an activity from another package using inflater menu

> ID：14625774
> 
> 赞同：0
> 
> 时间：2013-01-31T12:26:38.057
> 
> 标签：android, import

I have two packages. The first one is for the Bluetooth socket of my phone, while the second one handles the other activities of my app.

What I wanted to do is call the DeviceListActivity from the .remote.btconnection (first) package and use it in all of my activities in my second package that needs it. I keep getting a force close everytime I tap on my inflater menu that calls that activity.

(I'm not quite sure if I declared the DeviceListActivity in my manifest correctly, too.)

Here is how I declared it (my class from first package) in my manifest:

```
 <activity 

              android:name="com.luugiathuy.apps.remote.btconnection.DeviceListActivity"
              android:label="@string/select_device"
              android:theme="@android:style/Theme.Dialog"
              android:configChanges="orientation|keyboardHidden" 
              android:screenOrientation="portrait" >

              </activity> 
```

Here is my code in calling it in a class/activity in my second package:

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.scan:
        // Launch the DeviceListActivity to see devices and do scan
        Intent serverIntent = new Intent(GetFrequencyActivity.this, DeviceListActivity.class);
        startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE);
        return true; 
```

Would you see where I got it wrong? Thanks!

# model-view-controller - android simulator does not recognize .mobile.cshtml page

> ID：14625783
> 
> 赞同：1
> 
> 时间：2013-01-31T12:27:02.017
> 
> 标签：model-view-controller

I have different views for desktop and mobile browsers, and for that I have created seperate _Layout.mobile.cshtml, and [_ViewName].mobile.cshtml views.

The problem is that when I run the application in android simulator it shows desktop pages only. Why it does not recognize _Layout.mobile.cshtml and relevant view pages? Is there any code that needs to be written?

Any help on this much appreciated.

# c++ - 如何将 minizip 包装器转换为 unicode？

> ID：14625784
> 
> 赞同：6
> 
> 时间：2013-01-31T12:27:03.697
> 
> 标签：c++, c, zlib

我正在尝试使用 [http://www.zlib.net/] 中的 minzip 包装器来压缩文件夹。只要文件名是英文的，它就可以正常工作。有没有人尝试修改 minizip 以支持 unicode？

修改后的代码贴在下面。问题在于这个函数，第二个参数将 const char* 作为输入。当我进行转换时，它会丢失数据并且文件名不一样。

eg：Chinese-统一码.txt在zip里面变成Chinese-t+ƒS+Çtáü.txt。

```
err = zipOpenNewFileInZip3_64(  zf,outstr.c_str(),&zi,
                                        NULL,0,NULL,0,NULL /* comment*/,
                                        (opt_compress_level != 0) ? Z_DEFLATED : 0,
                                        opt_compress_level,0,
                                        /* -MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY, */
                                        -MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY,
                                        password,crcFile, zip64);

minizip.c
Version 1.1, February 14h, 2010
sample part of the MiniZip project - ( http://www.winimage.com/zLibDll/minizip.html )

Copyright (C) 1998-2010 Gilles Vollant (minizip) ( http://www.winimage.com/zLibDll/minizip.html )

Modifications of Unzip for Zip64
Copyright (C) 2007-2008 Even Rouault

Modifications for Zip64 support on both zip and unzip
Copyright (C) 2009-2010 Mathias Svensson ( http://result42.com )
*/

#if (!defined(_WIN32)) && (!defined(WIN32)) && (!defined(__APPLE__))
#ifndef __USE_FILE_OFFSET64
#define __USE_FILE_OFFSET64
#endif
#ifndef __USE_LARGEFILE64
#define __USE_LARGEFILE64
#endif
#ifndef _LARGEFILE64_SOURCE
#define _LARGEFILE64_SOURCE
#endif
#ifndef _FILE_OFFSET_BIT
#define _FILE_OFFSET_BIT 64
#endif
#endif

#ifdef __APPLE__
// In darwin and perhaps other BSD variants off_t is a 64 bit value, hence no need for specific 64 bit functions
#define FOPEN_FUNC(filename, mode) fopen(filename, mode)
#define FTELLO_FUNC(stream) ftello(stream)
#define FSEEKO_FUNC(stream, offset, origin) fseeko(stream, offset, origin)
#else
#define FOPEN_FUNC(filename, mode) fopen64(filename, mode)
#define FTELLO_FUNC(stream) ftello64(stream)
#define FSEEKO_FUNC(stream, offset, origin) fseeko64(stream, offset, origin)
#endif

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <errno.h>
#include <fcntl.h>
#ifdef _WIN32
# include <direct.h>
# include <io.h>
#define GetCurrentDir _getcwd
#else
# include <unistd.h>
# include <utime.h>
# include <sys/types.h>
# include <sys/stat.h>
#endif

#include "zip.h"
#include "Shlwapi.h"

#ifdef _WIN32
#define USEWIN32IOAPI
#include "iowin32.h"
#endif

#include <windows.h>
#include <string>
#include <iostream>
#include <list>
#include <fstream>
#include <sstream>
#include <set>
using namespace std;

#define WRITEBUFFERSIZE (16384)
#define MAXFILENAME (256)

#ifdef _WIN32
uLong filetime(
    wchar_t *f,                /* name of file to get info on */
    tm_zip *tmzip,             /* return value: access, modific. and creation times */
    uLong *dt)           /* dostime */
{
    int ret = 0;
    {
        FILETIME ftLocal;
        HANDLE hFind;
        _WIN32_FIND_DATAW ff32;

        hFind = FindFirstFileW(f,&ff32);
        if (hFind != INVALID_HANDLE_VALUE)
        {
            FileTimeToLocalFileTime(&(ff32.ftLastWriteTime),&ftLocal);
            FileTimeToDosDateTime(&ftLocal,((LPWORD)dt)+1,((LPWORD)dt)+0);
            FindClose(hFind);
            ret = 1;
        }
    }
    return ret;
}
#else
#ifdef unix || __APPLE__
uLong filetime(f, tmzip, dt)
    char *f;               /* name of file to get info on */
tm_zip *tmzip;         /* return value: access, modific. and creation times */
uLong *dt;             /* dostime */
{
    int ret=0;
    struct stat s;        /* results of stat() */
    struct tm* filedate;
    time_t tm_t=0;

    if (strcmp(f,"-")!=0)
    {
        char name[MAXFILENAME+1];
        int len = strlen(f);
        if (len > MAXFILENAME)
            len = MAXFILENAME;

        strncpy(name, f,MAXFILENAME-1);
        /* strncpy doesnt append the trailing NULL, of the string is too long. */
        name[ MAXFILENAME ] = '\0';

        if (name[len - 1] == '/')
            name[len - 1] = '\0';
        /* not all systems allow stat'ing a file with / appended */
        if (stat(name,&s)==0)
        {
            tm_t = s.st_mtime;
            ret = 1;
        }
    }
    filedate = localtime(&tm_t);

    tmzip->tm_sec  = filedate->tm_sec;
    tmzip->tm_min  = filedate->tm_min;
    tmzip->tm_hour = filedate->tm_hour;
    tmzip->tm_mday = filedate->tm_mday;
    tmzip->tm_mon  = filedate->tm_mon ;
    tmzip->tm_year = filedate->tm_year;

    return ret;
}
#else
uLong filetime(f, tmzip, dt)
    char *f;                /* name of file to get info on */
tm_zip *tmzip;             /* return value: access, modific. and creation times */
uLong *dt;             /* dostime */
{
    return 0;
}
#endif
#endif

void addFileToList(list<wstring>& fileList, const wstring& directory, const set<wstring>& excludeFilterSet, const wstring& fileName )
{
    wstring fileExtension = fileName.substr(fileName.find_last_of(L".") + 1);
    if (!fileExtension.empty()) 
    {
        if (excludeFilterSet.find(fileExtension) != excludeFilterSet.end()) return;
    } 

    fileList.push_back(directory + fileName);
}

void GetFileListing(list<wstring>& fileList, wstring directory,const set<wstring>& excludeFilterSet,bool recursively=true)
{
    directory = directory + L"\\";
    wstring filter = directory + L"*";

    _WIN32_FIND_DATAW FindFileData;
    HANDLE hFind = FindFirstFileW(filter.c_str(), &FindFileData);

    if (hFind == INVALID_HANDLE_VALUE)
    {
        DWORD dwError = GetLastError();
        if (dwError != ERROR_FILE_NOT_FOUND)
        {
            //cout << "Invalid file handle for filter " << filter << ". Error is " << GetLastError() << endl;
        }
        return;
    }

    do
    {
        if (FindFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) 
        {
            if ((recursively) && (wcscmp(FindFileData.cFileName, L".") != 0) && (wcscmp(FindFileData.cFileName, L"..") != 0))
            {
                GetFileListing(fileList, directory + FindFileData.cFileName, excludeFilterSet);
            }
        } 
        else
        {
            addFileToList(fileList, directory, excludeFilterSet,FindFileData.cFileName);
        }
    } while (FindNextFileW(hFind, &FindFileData) != 0);

    DWORD dwError = GetLastError();
    FindClose(hFind);

    if (dwError != ERROR_NO_MORE_FILES)
    {
        //cout << "FindNextFile error. Error is "<< dwError << endl;
    }
}

int check_exist_file(wchar_t* filename)
{
    FILE* ftestexist;
    int ret = 1;
    //ftestexist = FOPEN_FUNC(filename,"rb");
    ftestexist = _wfopen(filename,L"rb");
    if (ftestexist==NULL)
        ret = 0;
    else
        fclose(ftestexist);
    return ret;
}

/* calculate the CRC32 of a file,
because to encrypt a file, we need known the CRC32 of the file before */
int getFileCrc(const wchar_t * filenameinzip,void*buf,unsigned long size_buf,unsigned long* result_crc)
{
    unsigned long calculate_crc=0;
    int err=ZIP_OK;
    //FILE * fin = FOPEN_FUNC(filenameinzip,"rb");
    FILE * fin = _wfopen(filenameinzip,L"rb");

    unsigned long size_read = 0;
    unsigned long total_read = 0;
    if (fin==NULL)
    {
        err = ZIP_ERRNO;
    }

    if (err == ZIP_OK)
        do
        {
            err = ZIP_OK;
            size_read = (int)fread(buf,1,size_buf,fin);
            if (size_read < size_buf)
                if (feof(fin)==0)
                {
                    printf("error in reading %s\n",filenameinzip);
                    err = ZIP_ERRNO;
                }

                if (size_read>0)
                    calculate_crc = crc32(calculate_crc,(const Bytef *)buf,size_read);
                total_read += size_read;

        } while ((err == ZIP_OK) && (size_read>0));

        if (fin)
            fclose(fin);

        *result_crc=calculate_crc;
        printf("file %s crc %lx\n", filenameinzip, calculate_crc);
        return err;
}

int isLargeFile(const wchar_t * filename)
{
    int largeFile = 0;
    ZPOS64_T pos = 0;
    //FILE* pFile = FOPEN_FUNC(filename, "rb");
    FILE* pFile = _wfopen(filename, L"rb");

    if(pFile != NULL)
    {
        int n = FSEEKO_FUNC(pFile, 0, SEEK_END);
        pos = FTELLO_FUNC(pFile);

        printf("File : %s is %lld bytes\n", filename, pos);

        if(pos >= 0xffffffff)
            largeFile = 1;

        fclose(pFile);
    }

    return largeFile;
}

void split( const wstring& text, wchar_t delimiter,set<wstring>& result )
{
    wstring::size_type start = 0;
    wstring::size_type end   = text.find( delimiter, start );
    wstring token;

    while( end != wstring::npos )
    {
        token = text.substr( start, end - start );
        token.erase(0,2);
        result.insert( token );
        start = end + 1;
        end   = text.find( delimiter, start );
    }

    // Add the last string
    token = text.substr(start);
    token = token.erase(0,2);
    result.insert(token);
}

//Do not call me.
long getUTF8size(const wchar_t *string){
    if (!string)
        return 0;
    long res=0;
    for (;*string;string++){
        if (*string<0x80)
            res++;
        else if (*string<0x800)
            res+=2;
        else
            res+=3;
    }
    return res;
}

char *WChar_to_UTF8(const wchar_t *string){
    long fSize=getUTF8size(string);
    char *res=new char[fSize+1];
    res[fSize]=0;
    if (!string)
        return res;
    long b=0;
    for (;*string;string++,b++){
        if (*string<0x80)
            res[b]=(char)*string;
        else if (*string<0x800){
            res[b++]=(*string>>6)|192;
            res[b]=*string&63|128;
        }else{
            res[b++]=(*string>>12)|224;
            res[b++]=((*string&4095)>>6)|128;
            res[b]=*string&63|128;
        }
    }
    return res;
}

std::string utf8_encode(const std::wstring &wstr)
{
    int size_needed = WideCharToMultiByte(CP_UTF8, 0, &wstr[0], (int)wstr.size(), NULL, 0, NULL, NULL);
    std::string strTo( size_needed, 0 );
    WideCharToMultiByte                  (CP_UTF8, 0, &wstr[0], (int)wstr.size(), &strTo[0], size_needed, NULL, NULL);
    return strTo;
}

wstring zipper( const wstring& directoryPath, const wstring& strExcludeFilter, wstring & zipFileName )
{
    int opt_overwrite=0,opt_compress_level=Z_BEST_COMPRESSION,opt_exclude_path=0,err=0,size_buf=0;
    void* buf=NULL;
    const char* password=NULL;
    list<wstring> fileList;
    DWORD dwRet;

    wchar_t cCurrentPath[MAX_PATH];
    dwRet = GetCurrentDirectoryW(MAX_PATH, cCurrentPath);
    if( dwRet == 0 )
    {
        return wstring();
    }

    // Change the directory to the current folder
    _wchdir(directoryPath.c_str());
    set<wstring> excludeFilterSet;
    split(strExcludeFilter,'|',excludeFilterSet);

    GetFileListing(fileList, directoryPath,excludeFilterSet);
    opt_overwrite = 1;

    size_buf = WRITEBUFFERSIZE;
    buf = (void*)malloc(size_buf);
    if (buf==NULL) return wstring();

    wchar_t tempDirPath[MAX_PATH];
    dwRet = GetTempPathW (MAX_PATH, tempDirPath);
    if( dwRet == 0 ) return wstring();

    wstring directoryName,zipFilePath;
    _WIN32_FIND_DATAW FindFileData;
    HANDLE hFind = FindFirstFileW(directoryPath.c_str(), &FindFileData);
    if (FindFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) 
    {
        directoryName = FindFileData.cFileName;
    }

    zipFilePath = wstring(tempDirPath)+L"\\"+directoryName+L".zip";
    zipFile zf;
    int errclose;

    #ifdef USEWIN32IOAPI
        zlib_filefunc64_def ffunc;
        fill_win32_filefunc64W (&ffunc);
        zf = zipOpen2_64(zipFilePath.c_str(),(opt_overwrite==2) ? 2 : 0,NULL,&ffunc);
    #   else
        zf = zipOpen64(zipFilePath.c_str(),(opt_overwrite==2) ? 2 : 0);
    #   endif

    if (zf == NULL)
    {
        //printf("error opening %s\n",filename_try);
        err= ZIP_ERRNO;
    }
    else
    {
        //printf("creating %s\n",filename_try);
    }

    for(list<wstring>::iterator it = fileList.begin() ; it!=fileList.end();++it) 
    {
        FILE * fin;
        int size_read;
        //const char* filenameinzip = (*it).c_str();
        wstring filenameinzip = (*it).c_str();
        wchar_t szOut[MAX_PATH];

        PathRelativePathToW(szOut,
                            directoryPath.c_str(),
                            FILE_ATTRIBUTE_DIRECTORY,
                            filenameinzip.c_str(),
                            FILE_ATTRIBUTE_NORMAL);

        wchar_t *savefilenameinzip;
        zip_fileinfo zi;
        unsigned long crcFile=0;
        int zip64 = 0;

        zi.tmz_date.tm_sec = zi.tmz_date.tm_min = zi.tmz_date.tm_hour =
            zi.tmz_date.tm_mday = zi.tmz_date.tm_mon = zi.tmz_date.tm_year = 0;
        zi.dosDate = 0;
        zi.internal_fa = 0;
    zi.external_fa = 0;
        filetime(szOut,&zi.tmz_date,&zi.dosDate);

        if ((password != NULL) && (err==ZIP_OK))
            err = getFileCrc(szOut,buf,size_buf,&crcFile);

        zip64 = isLargeFile(szOut);

        /* The path name saved, should not include a leading slash. */
        /*if it did, windows/xp and dynazip couldn't read the zip file. */
        savefilenameinzip = szOut;
        while( savefilenameinzip[0] == '\\' || savefilenameinzip[0] == '/' )
        {
            savefilenameinzip++;
        }

        string outstr = utf8_encode(savefilenameinzip);
        //char * op = (char*)outstr.c_str();

        err = zipOpenNewFileInZip3_64(  zf,outstr.c_str(),&zi,
                                        NULL,0,NULL,0,NULL /* comment*/,
                                        (opt_compress_level != 0) ? Z_DEFLATED : 0,
                                        opt_compress_level,0,
                                        /* -MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY, */
                                        -MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY,
                                        password,crcFile, zip64);

        if (err != ZIP_OK)
        {
            //printf("error in opening %s in zipfile\n",szOut);
        }
        else
        {
            //fin = FOPEN_FUNC(szOut,"rb");
            fin = _wfopen(szOut,L"rb");

            if (fin==NULL)
            {
                err=ZIP_ERRNO;
                //printf("error in opening %s for reading\n",szOut);
            }
        }

        if (err == ZIP_OK)
            do
            {
                err = ZIP_OK;
                size_read = (int)fread(buf,1,size_buf,fin);
                if (size_read < size_buf)
                    if (feof(fin)==0)
                    {
                        //printf("error in reading %s\n",szOut);
                        err = ZIP_ERRNO;
                    }

                    if (size_read>0)
                    {
                        err = zipWriteInFileInZip (zf,buf,size_read);
                        if (err<0)
                        {
                            //printf("error in writing %s in the zipfile\n",szOut);
                        }

                    }
            } while ((err == ZIP_OK) && (size_read>0));

            if (fin)
                fclose(fin);

            if (err<0)
                err=ZIP_ERRNO;
            else
            {
                err = zipCloseFileInZip(zf);
                if (err!=ZIP_OK)
                {
                    //printf("error in closing %s in the zipfile\n",szOut);
                }
            }
    }

    errclose = zipClose(zf,NULL);
    if (errclose != ZIP_OK)
    {
        //printf("error in closing %s\n",filename_try);
    }

    free(buf);
    // Change back the executabe context
    _wchdir(cCurrentPath);
    return zipFilePath;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T14:30:03.357

根据[标准](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)，将 UTF-8 文件名存储在 ZIP 文件中的官方方法是设置“通用位 11”。查看 minizip 的源代码，在我看来 minizip 不会在任何时候为您设置此位，并且`zipOpenNewFileInZip3_64`无法通过此位。然而`zipOpenNewFileInZip4_64`，有 a 接受另外两个参数，`versionMadeBy`并且`flagBase`. 因此，您可以通过将调用更改为来按照标准存储 UTF-8 文件名

```
err = zipOpenNewFileInZip4_64(zf, outstr.c_str(), […], crcFile, 36, 1<<11, zip64); 
```

这是假设`outstr`实际上确实包含您的文件名的有效 UTF-8 编码，源代码建议它应该这样做，但我尚未验证。我建议您打印字节的十六进制值`outstr`来验证这一点。除非我在这个过程中把字符串弄乱了，否则你的“统一码.txt”应该变成`e7 b5 b1 e4 b8 80 e7 a2 bc 2e 74 78 74`十六进制的 UTF-8。

有关此`versionMadeBy`字段的详细信息（我`36`在通话中设置），请查看标准的第 4.4.2 节。这取决于您使用的平台，`zipfi`参数（`&zi`在您的情况下）的文件属性具有什么格式，以及一切都遵循的标准版本。当您使用 unicode 文件名时，我会说您使用的是标准的 6.3.* 版本，因此低字节应该是`36`. 而且由于`minizip.c`包装器根本不存储任何文件属性，因此您不必在那里指定平台。从以下几行可以看出缺少属性：

```
 zi.internal_fa = 0;
    zi.external_fa = 0; 
```

请注意，尽管该标准确实提供了一种表示 unicode 文件名的方法，但该部分仅在 2006 年添加，并且可能仍有许多 ZIP 应用程序不支持它。因此，即使您的存档正确，您的解压缩实用程序仍可能错误地解压缩此文件，将 UTF-8 字节解释为代码页 437 或 latin 1 或类似代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:29:42.637

更改程序以正确处理 UTF-8 并非易事，请查看[Unicode FAQ](http://www.cl.cam.ac.uk/~mgk25/unicode.html)。处理可能的恶意数据（如压缩/解压缩）的程序必须格外小心。一项有价值的努力，绝对不是微不足道的。

# c# - Getting low on storage space error while using local database

> ID：14625791
> 
> 赞同：4
> 
> 时间：2013-01-31T12:27:36.333
> 
> 标签：c#, database, windows-phone-8

I'm using `local database` to store my data. My code is based on a tutorial: [How to create a basic local database app for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202876%28v=vs.105%29.aspx) Everything was right, but I had to add some more data to my database and now when I'm trying to do so I get info "Your phone is low on storage space". Is it possible that my database is too big?

This is how I create my database:

```
using (TablesDataContext db = new TablesDataContext(TablesDataContext.DBConnectionString))
{
    if (db.DatabaseExists() == false)
    {
       //Create the database
        db.CreateDatabase();
    }
} 
```

And my `DataContext`:

```
public class TablesDataContext : DataContext
    {
        // Specify the connection string as a static, used in main page and app.xaml.
        public static string DBConnectionString = "Data Source=isostore:/Customers.sdf";

        // Pass the connection string to the base class.
        public TablesDataContext(string connectionString)
            : base(connectionString)
        { }

        // Specify a single table for the to-do items.
        public Table<CustomerItem> CustomersTable;
        public Table<CategorieItem> CategoriesTable;
        public Table<ProductItem> ProductsTable;
        public Table<CustomerPricesItem> CustomerPricesTable;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T14:23:00.520

您确定您的手机有足够的可用存储空间吗？

如果您的手机有足够的可用空间，您可以尝试在连接字符串中添加 Max Database Size 参数。默认情况下，当您第一次创建数据库时，大小设置为 32Mb。包括**Max Database Size**，您可以指定所需的大小，最大值为 512Mb：

```
"Data Source='isostore:/Db.sdf'; Max Database Size = 256;" 
```

这样，第一次使用上述连接字符串创建数据库时，它的最大大小设置为 256Mb。

另外，我知道这是另一个问题，但是如果您写入的是大量数据，您可能希望将**Max Buffer Size**参数添加到连接字符串中，最大值为 5120 (5Mb)，它表示存储的数据量在继续写入磁盘之前在内存中......它可以加快您的写入速度：

```
"Data Source='isostore:/Db.sdf'; Max Database Size = 256; Max Buffer Size = 3072;" 
```

如果您的数据比那个大，可能您需要将其拆分为不同的文件或使用另一个数据库作为 SQLite。

您在数据库中存储什么数据？图片？只有文本...二进制文件...也许有更好的方法来优化数据库大小，如果您将图像存储在数据库字段中，则将图像存储在隔离存储和数据库中的路径可能会更好。

希望这有帮助！

# jquery - Ckeditor Instance is not created in IE 8

> ID：14625792
> 
> 赞同：0
> 
> 时间：2013-01-31T12:27:38.940
> 
> 标签：jquery, jsp, ckeditor

I am Using Ckeditor version 4.0.1 latest one in my java project using Spring Framework.In my jsp page i have included the main js file as below

```
<script type="text/javascript" src="<c:url value="./ckeditor/ckeditor.js"/>" ></script> 
```

and in jsp page using textarea i have created an instance like this.

```
<textarea cols="100" rows="4" id="detailedwriteup" name="detailedwriteup" >${hotel.detailedwriteup}</textarea></div>

<script type="text/javascript">

   var instance = CKEDITOR.instances['detailedwriteup'];
   if(instance){
       CKEDITOR.remove(instance);
   }

    CKEDITOR.replace( 'detailedwriteup',
        {
         width: 900
        });

</script> 
```

It works fine in FF and Chrome also in IE 9 but the problems is coming on IE8.In IE8 the ckeditor instance is not created.

Any solution i am stuck.

Thanks in Advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:34:56.183

您的示例代码将永远无法工作，因为您在实例检查之后实例化 CKEditor。

不过要回答您的问题->**始终使用 instanceReady-event**

'

```
<textarea cols="100" rows="4" id="detailedwriteup" name="detailedwriteup" >${hotel.detailedwriteup}</textarea>

<script type="text/javascript">

   CKEDITOR.on('instanceReady', function (event) {
        instance = event.editor;
        if (instance) {
            instance.destroy();
        }
    });

    CKEDITOR.replace( 'detailedwriteup',
        {
         width: 900
        });

</script> 
```

'

# gps - Get first moving object towards fixed position (from latitude/longitude)

> ID：14625793
> 
> 赞同：0
> 
> 时间：2013-01-31T12:27:38.503
> 
> 标签：gps, location, latitude-longitude

Got a big issue that I cant get it right in my head. Tried to read lot's of articles on net, but just culdn't make all pieces together to one clear image what to do.

I have following data:

1.  Locations of bus stations (route is known) in latitude/longitude value pairs.

2.  Location of current station - place where I stand.

3.  GPS data for all vehicles that are operating on this route in GPRMC format: e.g. "$GPRMC,122532.000,A,4533.2553,N,01842.6141,E,28.18,92.86,220113,,,D*66;"

Now the hard part :) - at least for me, what would be logic to find out from GPS data which vehicle will come first to my current location.

My logic was first to get nearest vehicle, but then I realised that it can be vehicle that just passed my location. And this made me sad a lot :)

If someone have piece of code - any language :) it would be great, but also if someone can explain me - or point me to some good article I would be really grateful. I didn't work before with this information so it makes me really confused to get whole picture how it is supposed to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:29:28.143

这并不容易，但是：

你必须

1）计算汽车到当前位置的距离

2) 观察这个距离至少两个或三个测量：如果距离变小，那么汽车正在**接近**该位置。如果它变得更大，那么汽车正在远离。

3）汽车是最好的，具有“接近”属性并且距离最小。

# arrays - AS3 数组可见 false

> ID：14625794
> 
> 赞同：0
> 
> 时间：2013-01-31T12:27:40.610
> 
> 标签：arrays, actionscript-3, visible, flash-cs5.5

我想问一下这个脚本

```
var dragbener:Array = new Array (dragmc, draglagi);    
this.addEventListener (Event.ENTER_FRAME, masukframe)

    function masukframe(e:Event):void {

     if(dragmc.visible == false && draglagi.visible == false){
        //next2.visible=true;
        gotoAndStop(5);
          }
        } 
```

但是如果我播放那个脚本，输出是

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at _2_fla::MainTimeline/masukframe()[_2_fla.MainTimeline::frame1:80] 
```

如果我在帧（5）中添加影片剪辑“dragmc”和“draglagi”，则没有错误。

如果在第 5 帧中没有添加 movclip dragmc 和 draglagi 的movieclip dragmc 和movieclip draglagi visible 为假时我想进入第5 帧，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:50:57.993

不完全确定这是否会解决它，但我相当肯定您必须引用数组才能访问元素（例如，dragbener[1] 而不是 dragmc）。

编辑：啊，快。忘记了您必须使用实际在舞台上添加对象`addChild();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:53:15.650

如果要引用它们，则需要将这些影片剪辑放在舞台上，其他选项可以调用它们，`addChild();`但如果您想简单地做到这一点，请将影片剪辑放在第 5 帧上并像这样声明它们不可见

```
dragmc.visible = false;
draglagi.visible = false; 
```

# java - 用于创建、解析和查询 XML 的最佳 Java 库

> ID：14625796
> 
> 赞同：0
> 
> 时间：2013-01-31T12:27:42.243
> 
> 标签：java, xml, parsing, xpath

我正在创建一个将 c++ 代码存储在 xml 文件中的系统，因此我需要能够从字符串或字符串数​​组创建 xml 文件，然后需要稍后在程序中解析和查询它。什么是最好的库，我一直在查看 Xpath 以进行查询和简单地创建文档，尽管似乎没有太多有用的文档。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:36:26.470

使用 VTD-XML，适用于 XML 并且速度更快。XPATH 处理得很好。我已经去过了。欲了解更多信息，请访问[http://vtd-xml.sourceforge.net/](http://vtd-xml.sourceforge.net/)

# java - 这是在单独的线程上删除文件夹的正确方法吗？

> ID：14625799
> 
> 赞同：0
> 
> 时间：2013-01-31T12:27:49.410
> 
> 标签：java, multithreading

我正在用 java 锻炼我的多线程技能。下面是一段应该删除文件夹并确保：

```
if (freshDB) {
    LOG.warn("Refreshing the database!");
    ExecutorService executorService = Executors.newSingleThreadExecutor();
    final Future<Boolean> result = executorService.submit(new Callable<Boolean>() {
        public Boolean call() {
            return FileHandler.removeFolder(dbLocation);
        }
    });

    do {
        // makes sure the folder is removed
    }
    while (result.get() == false);
} 
```

这是正确的方法吗？如果不是为什么？请详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:32:03.970

不，这不对。

首先，最后的循环没有多大意义。`result.get()`将始终返回相同的值：提交的任务只执行一次，`result.get()`并将返回单次执行的结果。

无论如何，如果初始线程立即停止，等待启动的线程完成，那么启动一个新线程有什么意义呢？在初始线程中做所有事情会更简单，更高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:31:56.143

确保以下方法已同步

`FileHandler.removeFolder()`

[Java中的同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

# c++ - 为什么 CRTP 实现和接口方法的命名不同？

> ID：14625801
> 
> 赞同：6
> 
> 时间：2013-01-31T12:27:56.833
> 
> 标签：c++, templates, naming, crtp

我到处读到关于 CRTP 的信息，实际上在我编写的代码中，CTRP 类层次结构如下所示：

```
template< class T >
class Base
{

public:

    int foo_interface() 
    { 
        return static_cast< T* >(this)->foo_implementation();                        
    }

};

class Derived : public Base< Derived >
{

    friend class Base< Derived >;

    int foo_implementation() 
    { 
        return 5;
    }

}; 
```

即接口和实现方法的名称不同。现在，我通常不希望实现方法从外部可见，这需要上面的朋友声明，并且在多级层次结构中被证明是一个主要的组合（即使使用[此处](http://accu.org/index.php/journals/296)描述的技巧）。

现在，我想出了以下内容：

```
// Base class
template< class T >
class A
{

public:

    int foo() 
    {             
        std::cout << "I'm in A's foo!\n";
        return static_cast< T * >(this)->foo();            
    }

};

// Deriving class
class B : public A< B >
{

public:

    int foo()
    { 
        std::cout << "I'm in B's foo!\n";
        return 5; 
    }

};

// Deriving class with a nasty surprise...
class C: public A< C >
{

public:

    // ...crap, no foo to be found!

    int bar() 
    {             
        std::cout << "I'm in C's bar!\n";
        return 12; 
    }

};

template< class T >
int call_foo(A< T > & t)
{
    return t.foo();
}

B b;
C c; 
```

现在，`call_foo(b)`就像我期望的那样工作，调用 B 的 foo() 实现。同样地，`call_foo(c)`也可以按预期工作（因为它不会……由于显而易见的原因，它会陷入无限循环）。我可以看到的一个缺点是，如果我忘记在派生类中实现一个方法（或拼写错误，忘记将其限定为 const，无论如何......），我会得到一个无限循环，所以它可能会产生那种错误有点难找到，因为它们没有在编译时被捕获。不过除此之外，它几乎就像普通的虚函数一样简单，而且我不必为隐藏实现方法而战。它看起来简单而优雅，但似乎没有人使用它......我的问题是，那么，有什么问题？为什么不是 没有使用这种方法吗？隐藏实现方法不是什么大不了的事吗？或者，当我在实际项目中尝试这种方法时，是否有某种不可估量的邪恶邪恶力量潜伏在那里，准备吞噬我的灵魂？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:04:21.307

除了你提到的同名接口函数及其实现的问题之外，CRTP 背后并没有潜伏着“邪恶力量”，但在我看来，这有点像“自找麻烦”。

至于*“为什么不使用这种方法？”这个问题。*，我认为情况并非如此。*这种方法在需要时*被广泛使用；但是没有任何设计模式总是有意义*的*。每个都在某些特定的设计情况下派上用场，CRTP 也不例外。

当您有**多个**支持**公共**接口但实现方式**略有**（不完全）不同的类时，**CRTP最有用。**如果我用粗体表示的这些词中的*任何一个都不能描述您的设计用例，那么 CRTP 可能没有意义：*

 ******   *“几个”*：如果你只有一个这样的类而不是很多，为什么要把它的接口分解成一个超类呢？它只是引入了一些多余的命名约定；
*   *“不相关”*：如果您的类是相关的，这意味着它们派生自一个公共基类，因为需要运行时多态性（这种情况很常见，例如，如果您想要拥有*异构*的对象集合），那么通常将公共接口分解到该基类中变得很自然；
*   *"Common"*：如果你的类不共享一个*相当广泛的*通用接口，那么基类就没有什么可考虑的了。例如，如果您的所有类都*只有*一个`size()`共同的方法，那么创建一个基类来保存该方法可能是一种无用的细粒度分解；
*   *“略”*：如果你的接口以*完全不同*的方式实现，意味着没有共同的*实现*，那么创建一个简单地将所有函数调用转发给子类的基类是没有意义的。做什么的？

但是，当您的设计情况是上述四个属性**都**适用时，那么您肯定有 CRTP 的用例：没有虚函数开销，编译器可以完全优化您的代码，您可以清晰地分离接口和实现，您可以通过捕获通用实现逻辑等来实现最小冗余。

但是，您可能会意识到这种情况并不*常见*。希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T12:34:27.573

您几乎说出了原因：未能实现该功能会导致无限循环。

通过将接口与实现分离，它允许在派生类不提供实现时发生两件事

1) 如果基类有它自己的实现，它的行为就像一个普通的虚函数，其中基类有一个默认实现。
2) 如果基类没有提供实现，则编译失败。同样，这类似于纯虚函数。

最后，有些人（例如 Herb Sutter）建议在使用虚方法时始终将接口（公共函数）与实现（私有函数）分开。阅读[http://www.gotw.ca/publications/mill18.htm](http://www.gotw.ca/publications/mill18.htm)。通过将分离作为 CRTP 的一部分执行，您可以获得相同的好处。*****

# java - 尝试使用蓝牙对无法访问的网络进行套接字操作

> ID：14625802
> 
> 赞同：1
> 
> 时间：2013-01-31T12:27:57.893
> 
> 标签：java, bluetooth, bluecove

我关注了一篇关于制作一个可以找到蓝牙设备的应用程序并通过选择一个文件我们可以将其上传到手机的博客文章。

网络文章链接：[http ://www.substanceofcode.com/2008/06/20/sending-files-to-mobile-phone-using-bluetooth-and-obex/](http://www.substanceofcode.com/2008/06/20/sending-files-to-mobile-phone-using-bluetooth-and-obex/)

```
private void uploadButtonActionPerformed(java.awt.event.ActionEvent evt) {
    //GEN-FIRST:event_uploadButtonActionPerformed
    try {
        // Get selected item from list
        ListItem selectedItem = (ListItem) deviceList.getSelectedValue();
        RemoteDevice device = selectedItem.getDevice();

        // Build URL for the bluetooth device, note the port 9
        String url = "btgoep://" + device.getBluetoothAddress() + ":9";

        // Get file as bytes
        FileInputStream stream = new FileInputStream(fileTextField.getText());
        File f = new File(fileTextField.getText());
        int size = (int) f.length();
        byte[] file = new byte[size];
        stream.read(file);

        // Filename
        String filename = f.getName();

        // Trigger the task in a different thread so it won't block the UI
        SendFileTask task = new SendFileTask(url, file, filename);
        Thread thread = new Thread(task);
        task.run();
    } catch(Exception ex) {
        System.err.println("Ex: " + ex.getMessage());
        ex.printStackTrace();
    } 
```

现在，当运行应用程序时，我可以看到可用设备列表，我可以选择一个设备，也可以选择一个文件进行上传，但是当我点击发送时，它会抛出一个错误，它的内容是：

```
A socket operation was attempted to an unreachable network.
javax.bluetooth.BluetoothConnectionException: Failed to connect; [10051] A socket     operation was attempted to an unreachable network.
at com.intel.bluetooth.BluetoothStackMicrosoft.connect(Native Method)
at com.intel.bluetooth.BluetoothStackMicrosoft.access$700(BluetoothStackMicrosoft.java:44)
at com.intel.bluetooth.BluetoothStackMicrosoft$ConnectThread.run(BluetoothStackMicrosoft.java:651) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-07T15:16:04.843

我在 Windows 7 64 位上遇到了同样的问题，在我从蓝牙设备列表中删除设备然后再次配对后，问题就消失了。

# magento - 左列块替换在magento中不起作用

> ID：14625805
> 
> 赞同：0
> 
> 时间：2013-01-31T12:28:08.440
> 
> 标签：magento, themes, customization

我正在尝试替换左栏中的内容（布局：**2columns-left.phtml**）。它显示了一个标注块和一个时事通讯块（就像**基本/默认**模板一样），但我想删除两者并用 wordpress 集成替换它们。

我的问题是，无论我做什么，原始块都不会从左栏中消失。我已按照我在 Stackoverflow 中找到的说明进行操作，包括编辑**catalog.xml**和**newsletter.xml**，在此文件中查找块代码并将其删除。没解决。比，了解它可能是从默认模板调用的，我也尝试在其中编辑**catalog.xml**和**newsletter.xml**。但什么也没发生。

今天，我又重新开始了。这一次，我删除了自己的模板并开始自定义**基本/默认**模板，确信此措施可以在不受其他模板文件干扰的情况下工作。但我的问题比我更有说服力。

有谁知道这对我有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:17:25.317

在主题布局文件夹中创建文件 local.xml 并添加代码

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

<default>
<remove name="left.newsletter"/>
<remove name="left.permanent.callout"/>
</default>
</layout> 
```

# wpf - WPF 从文本框更改背景颜色

> ID：14625808
> 
> 赞同：0
> 
> 时间：2013-01-31T12:28:14.153
> 
> 标签：wpf, xaml, mvvm, background-color

我想更改文本框对象的背景颜色。我正在使用 mvvm 模式并在我的模型中有一个属性 TextBoxColor 绑定到文本框背景属性。那不是问题。现在我希望在文本框中写入文本时颜色会发生变化，但是文本框没有命令，所以我不知道如何检查文本框中是否有文本并更改背景颜色属性。

谁能告诉我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:31:24.553

您必须将文本框的文本属性绑定到视图模型中的属性。绑定的代码应如下所示

```
<TextBox Text={Binding TextBoxText, Mode="TwoWay", UpdateSourceTrigger="OnPropertyChanged"/> 
```

在 viewModel 的设置器中，您可以对更改的值做出反应

# c# - 如何即时注册 WebResource？

> ID：14625812
> 
> 赞同：1
> 
> 时间：2013-01-31T03:23:54.790
> 
> 标签：c#, asp.net, resources

是否可以即时注册网络资源？我的意思是这样做 -

```
[assembly: WebResource("NameSpace.Resources.MyCSS.css", "text/css")] 
```

我想从我的 xml 文件中读取资源的设置。这些设置的内容将包含注册资源所需的信息，并且取决于要加载的页面。因此，只有那些页面真正需要使用的资源才会被注册。

例如——我的一个页面使用了两个图像和一个 css 文件。我只想注册它们，尽管我可以在我的项目中拥有更多图像和 css 文件作为嵌入资源。这样做的原因 - 不要注册我不需要的任何东西。

例如，如果可能的话，与在 AssemblyInfo.cs 中声明每个资源相比，它能给我带来什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:36:48.567

如果您正在确定动态需要哪些资源，我认为这将比事先声明它们更多。您需要对其进行基准测试，但对我来说，WebResources 从未提供过太多好处。

# javacc - javacc中的贪婪匹配

> ID：14625816
> 
> 赞同：1
> 
> 时间：2013-01-31T12:28:47.080
> 
> 标签：javacc

是否可以选择性地使 javacc 贪婪地匹配某些令牌？

我正在尝试像这样定义一个实体：

```
<CURLED:     "{" (<CHAR>)+ "}"> 
```

我想要的是序列：

```
a. {HELLO}
b. {HELLO} {WORLD}
c. {HELLO} {OUR} {WORLD} 
```

被正确解析，javacc 将单独使用大括号中的标记。

默认情况下，javacc 尝试使最长的匹配成为可能，这样案例 b 和 c 最终被解析为：

```
b. HELLO} {WORLD
c. HELLO} {OUR} {WORLD 
```

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:41:18.223

好的，我通过不允许在 CURLED 令牌定义中出现“{”字符来解决问题。这个排除是用 ~["{"] 完成的。

# php - 使用 phpQuery 读取 xml 数据

> ID：14625831
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:29:28.687
> 
> 标签：php, phpquery

我想使用 phpQuery 从 xml 文件中读取节点。我已经尝试了下面的代码，但它不起作用..任何人都可以帮助我使用 phpQuery 解析 xml 的语法......

```
$file = 'demo.xml'
phpQuery::newDocumentFileXML($file, $charset = 'utf-8');

$nodeElement = pq('nodes'); 

    $node = $nodeElement->xml();
echo '<h2>Nodes:</h2>';
echo '<p>' . htmlentities( $title) . '</p>'; 
```

上面的代码不起作用.....我的语法似乎是错误的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:35:11.030

我对大多数事情使用 simplexml_load_file 为什么不使用它呢？哪里是使用 google maps api 提取 2 个位置之间的距离并将返回的“文本”值从结果 xml 存储到 $distance 变量中的示例。您可以在他们的网站上找到从 google 返回的 xml 示例。同样可以用于您的代码，而不是通过加载本地 xml 文件来请求 url。

```
//create request url
                    $request_url = "http://maps.googleapis.com/maps/api/distancematrix/xml?origins=".$tslocation->TransLat.",".$tslocation->TransLong."&destinations=".$sitelocation->SiteLat.",".$sitelocation->SiteLong."&sensor=false&units=metric";
                    //perform query
                    $xml = simplexml_load_file($request_url) or die("url not loading");
                    //get distance text
                    $distance = $xml->row->element->distance->text; 
```

# java - Java AWT 自定义 CompositeContext 和抗锯齿：在客户区之外绘制时出现 RasterFormatException

> ID：14625833
> 
> 赞同：15
> 
> 时间：2013-01-31T12:29:36.740
> 
> 标签：java, awt, composite, xor, antialiasing

我正在尝试为 AWT [Graphics2D实现类似于 SWT](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html) [GC](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fgraphics%2FGC.html)的异或模式绘图。使用内置的[XORComposite](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/java2d/loops/XORComposite.java)不是一个选项，因为它没有像在 SWT 中那样实现异或模式绘图。

SWT 异或模式绘图通过二进制异或组合源颜色和目标颜色。AWT [XORComposite](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/java2d/loops/XORComposite.java)（可通过`g2d.setXORMode(Color)`使用）使用常量异或颜色，通过二进制异或与源颜色组合，即目标颜色不影响结果颜色。

所以我想到的唯一选择是编写我自己的[Composite](http://docs.oracle.com/javase/6/docs/api/java/awt/Composite.html)和[CompositeContext](http://docs.oracle.com/javase/6/docs/api/java/awt/CompositeContext.html)实现，它们适当地结合了源和目标。

经过一番阅读，我想出了这个简单的实现：（是的，我知道 getPixel(...), setPixel(...) 开销。我希望它在优化之前正常工作。）

```
private static class XorComposite implements Composite {

    public static XorComposite INSTANCE = new XorComposite();

    private XorContext context = new XorContext();

    @Override
    public CompositeContext createContext(ColorModel srcColorModel,
            ColorModel dstColorModel, RenderingHints hints) {
        return context;
    }

}

private static class XorContext implements CompositeContext {

    public XorContext() {
    }

    @Override
    public void compose(Raster src, Raster dstIn, WritableRaster dstOut) {
        int w = Math.min(src.getWidth(), dstIn.getWidth());
        int h = Math.min(src.getHeight(), dstIn.getHeight());

        int[] srcRgba = new int[4];
        int[] dstRgba = new int[4];

        for (int x = 0; x < w; x++) {
            for (int y = 0; y < h; y++) {
                src.getPixel(x, y, srcRgba);
                dstIn.getPixel(x, y, dstRgba);
                for (int i = 0; i < 3; i++) {
                    dstRgba[i] ^= srcRgba[i];
                }
                dstOut.setPixel(x, y, dstRgba);
            }
        }
    }

    @Override
    public void dispose() {
    }

} 
```

当禁用抗锯齿时，此实现工作正常。如果启用了抗锯齿，只要我的绘图完全可见，它就可以工作，即在我绘制的 JPanel 内部。但是，如果绘图越过 JPanel 的边界，则会引发 RasterFormatException：

```
Exception in thread "AWT-EventQueue-0" java.awt.image.RasterFormatException: (y + height) is outside raster
    at sun.awt.image.IntegerInterleavedRaster.createWritableChild(IntegerInterleavedRaster.java:470)
    at sun.awt.image.IntegerInterleavedRaster.createChild(IntegerInterleavedRaster.java:514)
    at sun.java2d.pipe.GeneralCompositePipe.renderPathTile(GeneralCompositePipe.java:106)
    at sun.java2d.pipe.AAShapePipe.renderTiles(AAShapePipe.java:201)
    at sun.java2d.pipe.AAShapePipe.fillParallelogram(AAShapePipe.java:102)
    at sun.java2d.pipe.PixelToParallelogramConverter.fillRectangle(PixelToParallelogramConverter.java:322)
    at sun.java2d.pipe.PixelToParallelogramConverter.fill(PixelToParallelogramConverter.java:159)
    at sun.java2d.pipe.ValidatePipe.fill(ValidatePipe.java:160)
    at sun.java2d.SunGraphics2D.fill(SunGraphics2D.java:2422)
    at org.eclipse.gef4.graphics.examples.AwtXorTestPanel.paint(AwtXorTest.java:117)
    ... (irrelevant) 
```

值得注意的是，我的 Composite/CompositeContext 不会引发异常，但是 AWT 内部在尝试创建它想要传递给我的 CompositeContext 的 Raster 对象时会引发异常。

不幸的是，PixelToParallelogramConverter 仅在启用抗锯齿时用于自定义合成。例如，内置的 XORComposite 使用本机方法进行绘制。我假设一个 AWT 错误，但我不确定。

帮助将不胜感激:)

**更新：**

正如 Durandal 所建议的，我使用 java-6-sun 和 java-1.6.0-openjdk 测试了代码。我发现 OpenJDK 会抛出异常，而 Sun-JDK 不会。因此，我在 OpenJDK 错误跟踪器上报告了该[错误。](https://bugs.openjdk.java.net/show_bug.cgi?id=100303)

问题解决后，我将更新此问题。有关当前进度的信息，请访问相应的 OpenJDK 错误。

问候， 马蒂亚斯

这是一个示例程序，因此您可以在本地对其进行测试：

```
/*******************************************************************************
 * Copyright (c) 2013 itemis AG and others.
 * 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 * 
 * Contributors:
 *     Matthias Wienand (itemis AG) - initial API and implementation
 * 
 *******************************************************************************/
package org.eclipse.gef4.graphics.examples;

import java.awt.Color;

public class AwtXorTest extends JApplet {

    private static final long serialVersionUID = 1L;

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setTitle("AWT XorMode Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JApplet applet = new AwtXorTest();
        applet.init();
        frame.getContentPane().add(applet);
        frame.pack();
        frame.setVisible(true);
    }

    @Override
    public void init() {
        JPanel panel = new AwtXorTestPanel();
        getContentPane().add(panel);
    }

}

class AwtXorTestPanel extends JPanel {

    private static class XorComposite implements Composite {

        public static XorComposite INSTANCE = new XorComposite();

        private XorContext context = new XorContext();

        @Override
        public CompositeContext createContext(ColorModel srcColorModel,
                ColorModel dstColorModel, RenderingHints hints) {
            return context;
        }

    }

    private static class XorContext implements CompositeContext {

        public XorContext() {
        }

        @Override
        public void compose(Raster src, Raster dstIn, WritableRaster dstOut) {
            int w = Math.min(src.getWidth(), dstIn.getWidth());
            int h = Math.min(src.getHeight(), dstIn.getHeight());

            int[] srcRgba = new int[4];
            int[] dstRgba = new int[4];

            for (int x = 0; x < w; x++) {
                for (int y = 0; y < h; y++) {
                    src.getPixel(x, y, srcRgba);
                    dstIn.getPixel(x, y, dstRgba);
                    for (int i = 0; i < 3; i++) {
                        dstRgba[i] ^= srcRgba[i];
                    }
                    dstOut.setPixel(x, y, dstRgba);
                }
            }
        }

        @Override
        public void dispose() {
        }

    }

    private static final long serialVersionUID = 1L;

    public AwtXorTestPanel() {
        setPreferredSize(new Dimension(640, 480));
    }

    @Override
    public void paint(Graphics graphics) {
        Graphics2D g2d = (Graphics2D) graphics;

        // comment out to see it working:
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        g2d.setComposite(XorComposite.INSTANCE);
        g2d.setColor(new Color(0, 255, 255)); // resulting color should be red
        g2d.fill(new Rectangle(100, 100, 500, 500));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T18:28:14.267

警告：我已经有一段时间没有接触 Rasters 了。

看起来您可能正在访问光栅之外的像素。

栅格有`minX`, `minY`, 所以你的循环需要是这样的：

```
int srcMinX = src.getMinX();
int srcMinY = src.getMinY();
int dstInMinX = dstIn.getMinX();
int dstInMinY = dstIn.getMinY();
int dstOutMinX = dstOut.getMinX();
int dstOutMinY = dstOut.getMinY();

for (int x = 0; x < w; x++) {
    for (int y = 0; y < h; y++) {
        src.getPixel(x+srcMinX, y+srcMinY, srcRgba);
        dstIn.getPixel(x+dstInMinX, y+dstInMinY, dstRgba);
        for (int i = 0; i < 3; i++) {
            dstRgba[i] ^= srcRgba[i];
        }
        dstOut.setPixel(x+dstOutMinX, y+dstOutMinY, dstRgba);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:16:08.680

g2d 剪辑区域有多个框，并且会抛出 RasterFormatException，因为它的全尺寸栅格参考被抗锯齿框的栅格替换。

# c - C中的动态哈希集

> ID：14625840
> 
> 赞同：3
> 
> 时间：2013-01-31T12:29:56.630
> 
> 标签：c, hash, set

我需要某种 C 中可以动态增长的 HashSet。我当然可以自己写所有东西，但也许有一个很好的库？我的密钥是 32 位散列，我需要将指针 ( `struct dirent *`) 保存为值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:45:51.823

我会（一如既往）推荐漂亮的[GLib（GTK+ 的一部分）](http://developer.gnome.org/glib/stable/)。它具有[`GHashTable`](http://developer.gnome.org/glib/stable/glib-Hash-Tables.html)实现哈希表的 API。它根据需要动态增长。

要使用 32 位密钥，请在创建哈希表时引用`g_int_hash()`和函数。`g_int_equal()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-05T20:21:54.263

更新：不要将此库用于字符串！
有关更多信息，请参阅此票：[https ://github.com/avsej/hashset.c/issues/4](https://github.com/avsej/hashset.c/issues/4)

Couchbase 的 HashSet 代码看起来不错：

[https://github.com/avsej/hashset.c](https://github.com/avsej/hashset.c)

例子：

```
#include "hashset.h"

char *foo = "foo";
char *missing = "missing";
hashset_t set = hashset_create();

if (set == NULL) {
    fprintf(stderr, "failed to create hashset instance\n");
    abort();
}

hashset_add(set, foo);
assert(hashset_is_member(set, foo) == 1);
assert(hashset_is_member(set, missing) == 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:55:06.320

我成功使用了这个：[KoanLogic Libu - Hmap module](http://www.koanlogic.com/libu/api/html/group__hmap.html)

链接中的示例足以自我解释。为了您的需要，我猜您应该使用`U_HMAP_OPTS_DATATYPE_OPAQUE`数据类型并将密钥的长度设置为 4 个字节`u_hmap_opts_set_val_sz()`。

# c# - 将日期时间与毫秒精度进行比较

> ID：14625842
> 
> 赞同：2
> 
> 时间：2013-01-31T12:30:01.147
> 
> 标签：c#, asp.net-mvc, linq, datetime

我正在尝试比较 asp.net 中的 2 个日期时间，但它忽略了毫秒部分。

我尝试使用 linq：

```
messages.OrderBy(x => x.Date); 
```

也试过

```
messages.OrderBy(x => x.Date).ThenBy(x=>x.Date.Millisecond); 
```

并且还使用排序

```
messages.Sort((x, y) => DateTime.Compare(x.Date, y.Date)); 
```

并尝试使用字符串格式转换日期时间，但它也忽略了毫秒。

对象中的 datetime 字段正确地以毫秒为单位提供日期时间。我将 Asp.net MVC3 与数据库 Informix、Oracle 和 SQL Server 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:44:25.583

你在某处犯了一个错误，a`DateTime`在内部存储为一个数字

> 时间值以 100 纳秒为单位，称为滴答声，特定日期是公历中自 0001 年 1 月 1 日午夜 12:00 开始的滴答声（[来源](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)）

当您使用 a 进行排序时`DateTime`，它只是使用此基础值进行整数排序。因此，如果您的`DateTime`实例有关于毫秒数的信息，它将被包含在排序中。这可以使用以下代码进行演示：

```
var dates = new[]{
    new DateTime(2013,1,31,12,0,0,10),
        new DateTime(2013,1,31,12,0,0,20),
        new DateTime(2013,1,31,12,0,0,5)
};

foreach(var date in dates)
{
    Console.WriteLine("{0:yyyy-MM-dd HH:mm:ss.fff}", date);
}

Console.WriteLine("-------------");

foreach(var date in dates.OrderBy(dt => dt))
{
    Console.WriteLine("{0:yyyy-MM-dd HH:mm:ss.fff}", date);
} 
```

这给出了输出：

```
2013-01-31 12:00:00.010
2013-01-31 12:00:00.020
2013-01-31 12:00:00.005
-------------
2013-01-31 12:00:00.005
2013-01-31 12:00:00.010
2013-01-31 12:00:00.020 
```

清楚地证明对日期时间列表进行正确排序会将较早的毫秒数放在首位。

自己试试吧：[http ://rextester.com/HYQIM13679](http://rextester.com/HYQIM13679)

至于为什么这不会发生在您身上，那是不可能回答的，因为您没有提供有关您如何通过包含`DateTime`您正在排序的字段的对象列表的对象列表的详细信息。一种可能性是您的源数据实际上是一个字符串，并且您正在使用`DateTime.Parse`/的某些变体`DateTime.ParseExact`并且忘记指定您希望捕获毫秒部分，因此它们对于每个实例都设置为零。

# iphone - UITableView 未将样式设置为 UITableViewGrouped，坚持使用普通

> ID：14625847
> 
> 赞同：1
> 
> 时间：2013-01-31T12:30:13.827
> 
> 标签：iphone, ios, xcode, uitableview

我不知道为什么，但视图控制器不想采用分组样式。

*   此视图控制器没有 xib 文件。
*   init时，由initWithStyle:UITableViewGrouped完成
*   调试 init，它接收 Grouped 样式
*   尝试覆盖 self = [super initWithStyle:UITableViewGrouped];

> ```
>  (id)initWithStyle:(UITableViewStyle)style
>     {
>         self = [super initWithStyle:UITableViewStyleGrouped];
>         if (self) {
>   //Checking on this line self.tableView.style = UITableViewPlain!!!
> 
> (lldb) p style (UITableViewStyle) $1 = UITableViewStyleGrouped 
> (lldb) p [[self tableView] style] (UITableViewStyle) $2 = UITableViewStylePlain 
> ```

如您所见，样式为 Grouped，我用 Grouped 覆盖了它。然后下一行是平原？！

任何帮助深表感谢。我的替代方法是附加一个 xib 并希望它会这样设置：S

先感谢您

编辑：这是我调用实例的地方。

```
AddContactViewController *addContact = [[AddContactViewController alloc]initWithStyle:UITableViewStyleGrouped];
    [addContact setCustomerID:customerID];
    [addContact setDelegate:self];
    [self.navigationController pushViewController:addContact animated:YES]; 
```

上面的 initWithStyle 是 AddContactViewController.m 和 (lldb) 位是我的调试打印输出。

希望清除它好一点。恐怕我不能透露太多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:26:26.333

通过 initWithFrame 创建您的 tableviewcontroller & 然后将样式 UITableViewStyleGrouped 分配给它的 tableViewStyle 属性

欧文在评论中说的最后一个选项：
创建一个 ViewController
声明一个`UITableView *myTableView`属性

```
[[UITableView alloc] initWithFrame:self.view.frame style:UITableViewStyleGrouped] 
```

将此 myTableView 添加到 ViewController 的视图中`[self.view addSubView:myTableView]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:43:23.403

感谢您的回复。我找到了一个更容易解决我的问题的方法。

我添加了一个新的 xib，并将其称为与我的控制器 AddContactViewController.xib 相同的名称。然后在 Interface Builder 中，我将 File Owner 类更改为 AddContactViewController。

我在对象中添加了一个 UITableView，并将文件所有者的视图连接到 UITableView。然后将代表和数据源连接回文件所有者。

之后就设置好了。我通过 IB 中的 tableview 上的属性将样式更改为分组。

现在已经完成了。我保留了相同的创建实例。但是在 AddContactViewController 我替换了

```
self = [super initWithStyle:UITableViewStyleGrouped]; 
```

和

```
self = [super initWithNibName:@"AddContactViewController" bundle:nil]; 
```

就是这样！我最终得到了一个我不会使用的额外 xib，但它比添加子视图然后处理方向问题要少得多。

希望能帮助其他人解决这个奇怪的问题，并感谢 Ravindra 和 Owen 的回复。

# ruby-on-rails - 我使用 check_box_tag 助手过滤项目，如何使用 link_to 助手完成相同的过滤？

> ID：14625851
> 
> 赞同：0
> 
> 时间：2013-01-31T12:30:39.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash, link-to

我有一个页面，我需要在其中发送参数，以便 url 看起来像这样：

```
/my_controller?stores%5BStoreName%5D=1 
```

但是，当我尝试形成我的时，`link_to`我得到了这个网址：

```
/my_controller?stores%5B%5D=5BStoreName&stores%5B%5D=1 
```

这是我认为的 link_to 代码：

```
<%= link_to store, my_controller_path(:stores => [store, 1]) %> 
```

如何更改我的代码，以便我使用与我需要的链接匹配的参数构建 url？

我的参数应该看起来像`{"stores"=>{"StoreName"=>"1"}`，但现在它们看起来像`{"stores"=>["StoreName", "1"]`。

**控制器：**

这是我的控制器中读取此哈希的索引方法 - 为清楚起见。

```
def index    
  @all_stores = Product.all_stores
  @selected_stores = params[:stores] || session[:stores] || {}

  if @selected_stores == {}
    @selected_stores = Hash[@all_stores.map {|store| [store, store]}]
  end
  if params[:stores] != session[:stores]
    session[:stores] = params[:stores]
    redirect_to :stores => @selected_stores and return
  end
  @products = Product.order("created_at desc").limit(150).find_all_by_store(@selected_stores.keys).group_by { |product| product.created_at.to_date}
  . . . etc 
```

**背景：**

The bigger picture here is that the destination page (that the above link will link to) is a page that lists all products filtered by store. The way the filter normally works is with a set of checkboxes (the user can mark checkboxes to show products from specific stores). The desired link will take users directly to this page with the desired filter already applied - without having to mark checkboxes.

For additional reference, here is that checkbox helper that filters that destination page's products:

```
<%= check_box_tag "stores[#{store}]", 1, @selected_stores.include?(store), :id => "stores_#{store}" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:49:02.587

Use `<%= link_to store, my_controller_path(:stores => { store => 1}) %>`

# linux - 如何使用补丁实用程序从空差异创建空文件？

> ID：14625855
> 
> 赞同：0
> 
> 时间：2013-01-31T12:30:48.227
> 
> 标签：linux, diff, patch

我有一个输出`diff -au`（如果重要的话，这个命令在里面使用`svn diff`），比如：

> 索引：src/test.txt ============================================ =========================

这是一个新创建的空文件。如何强制补丁实用程序创建这个空文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T07:00:43.953

没有办法，除了`patch`在上游修补实用程序。

# jquery - 我可以使用什么 HTML 标记来存储父元素数据

> ID：14625856
> 
> 赞同：0
> 
> 时间：2013-01-31T12:30:48.960
> 
> 标签：jquery, html

我想在容器 div 内插入一个特殊元素，以存储有关位于容器内的图像的一些信息。我知道我可以将数据存储在容器 div 数据属性本身或图像中，但我发现稍后返回项目将它们放入自己的 DOM 元素时更容易和更清晰。数据属性主要用于 UI 用户操作，例如在将缩略图拖入可放置句柄时使用 jquery 更新元素。

例子：

```
<div class="container">
   <img class="thumbnail" src="/path/to/thumbnail" />
   <div data-imagefull="path/to/fullsize/image" data-imageid="179"></div>
</div> 
```

在该示例中，我想替换包含数据属性的 div。使用符合 ie7 到 html5 的不同标签。

更新：让我改写一下。我喜欢，并将继续使用数据属性。我想替换的只是“div”标签。必须有比 div 更好的标签，因为 div 是用来显示的，而我没有显示任何东西。只是存储信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:32:52.020

不要为此使用元素。元素用于显示信息，而不是存储信息。

您描述的用例*正是*属性的设计目的，`data`因此它们应该放置在`img`它们相关的元素上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:36:48.017

您可以在标签上使用[hidden](http://www.w3.org/html/wg/drafts/html/master/editing.html#the-hidden-attribute)属性：`div`

```
<div class="container">
   <img class="thumbnail" src="/path/to/thumbnail" />
   <div data-imagefull="path/to/fullsize/image" data-imageid="179" hidden></div>
</div> 
```

如*规范*中所述：

> 用户代理不应渲染具有指定隐藏属性的元素。

`hidden`属性是 HTML5 的特性，所以为了支持旧浏览器，你还需要这个 CSS：

```
*[hidden] {
   display:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:40:47.213

您可能应该像这样使用它：

```
<img id="geoff" data-geoff="geoff de geoff" src="image.jpg" /> 
```

使用 JS 获取它：

```
var geoff = document.getElementById("geoff");
alert(geoff.getAttribute("data-geoff")); 
```

您可以向标签添加任意数量的数据属性。

这也适用于 ie6 和 ie7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:11:46.090

有几种方法可以做到这一点：

*   `hidden`使用具有属性的每条数据自己的 DOM 元素（任何你喜欢的）或`style="display: none;"`
*   使用一些带有 JSON 数据的 DOM 元素，例如`<span style="display: none;">{"id": 1, "name":"John"}</span>`

如果你问我，我建议使用`data-`属性或`<input type="hidden" value="somevalue" />`. 但是最后一个变体（输入）应该存在于表单中。

我认为您还可以发明更多存储数据的方法。但是你真的需要重新发明轮子吗？

* * *

*   [HTML隐藏属性](http://www.w3schools.com/tags/att_global_hidden.asp)
*   [样式显示属性](http://www.w3schools.com/jsref/prop_style_display.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T13:55:50.717

只需将 data-* 标签放在 img 中，有什么麻烦？很多响应式图片插件实际上都使用了类似的东西

```
<img src="lo-fi.png" data-src481="medium.png" data-src1025="hi-fi.png" alt="example" /> 
```

# sql-server-2008-r2 - CTE 执行多次

> ID：14625858
> 
> 赞同：1
> 
> 时间：2013-01-31T12:30:58.983
> 
> 标签：sql-server-2008-r2, common-table-expression

我有这个结构：

```
WITH my_cte
    AS
    (
    SELECT y.name
    FROM 
        WHData.dbo.vw_data x
        INNER JOIN WHData.dbo.vw_DimNames y
                ON x.nameKey = y.CasinoKey
    WHERE DateKey >= CONVERT(CHAR(8),DATEADD(mm,-2,GETDATE() - DAY(GETDATE())) + 1,112)--two complete months ago    
    GROUP BY y.name
    )
SELECT *
FROM    WHAnalysis.dbo.tb_otherData a
WHERE   NOT EXISTS
                (
            SELECT 1
            FROM my_cte b
            WHERE b.name = a.name 
            ); 
```

如果我单独运行代码`CTE`需要 3 秒；但完整的脚本只是运行和运行。

如果我离开 a`CTE`并使用索引临时表，那么它会在 4 秒内运行。

我假设正在发生的是`CTE`正在针对每条数据记录执行，`tb_otherData`所以它可能需要，因为有 2000 条记录，2000 x 3sec ....太长了！

临时表解决方案很好，但出于兴趣，有没有办法更改`CTE`代码以使其快速运行？`CTE`我缺少一些技巧吗？

* * *

**编辑**

如果我切换到一个好的老式子查询，那么执行计划是完全一样的：

```
SELECT *
FROM   WHAnalysis.dbo.tb_otherData a
WHERE name not in 
        (
            SELECT y.name
            FROM 
            WHData.dbo.vw_data x
            INNER JOIN WHData.dbo.vw_DimNames y
            ON x.nameKey = y.CasinoKey
             WHERE DateKey >= CONVERT(CHAR(8),DATEADD(mm,-2,GETDATE() - DAY(GETDATE())) + 1,112)--two complete months ago   
              GROUP BY y.name
              ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:17:10.587

尝试使用此查询而不是使用 EXISTS 的子查询：

```
SELECT a. *
FROM    WHAnalysis.dbo.tb_otherData a
LEFT JOIN
(   SELECT y.name as name
    FROM WHData.dbo.vw_data x
         INNER JOIN WHData.dbo.vw_DimNames y
                ON x.nameKey = y.CasinoKey
         WHERE DateKey >= 
          CONVERT(CHAR(8),DATEADD(mm,-2,GETDATE() - DAY(GETDATE())) + 1,112)    
) b on a.name=b.name
WHERE b.name is null 
```

如果`DateKey`从那时`WHData.dbo.vw_data`起它将是：

```
SELECT a. *
FROM    WHAnalysis.dbo.tb_otherData a
LEFT JOIN WHData.dbo.vw_DimNames y on a.name=y.name
LEFT JOIN WHData.dbo.vw_data x
   on y.CasinoKey= x.nameKey 
      and (
          x.DateKey >= 
          CONVERT(CHAR(8),DATEADD(mm,-2,GETDATE() - DAY(GETDATE())) + 1,112)
          )
WHERE x.nameKey is null 
```

# android - 在 android 上具有最小值、最大值和负值的 SeekBar

> ID：14625861
> 
> 赞同：3
> 
> 时间：2013-01-31T12:31:09.933
> 
> 标签：android, seekbar, limits

我正在尝试在 android 上创建一个 SeekBar，我想使用负值和正值来设置它的最大值和最小值；例如，我想选择最少 5 个，最多 150 个；我可以做到这一点，而且很简单：你可以从进度值中减去 minValue 就可以了……

我的问题是当我尝试设置负的最大值和最小值时。

有人可以帮我吗？

谢谢

# c# - 如何在asp.net mvc3中编写数据库查询以获取记录？

> ID：14625865
> 
> 赞同：-2
> 
> 时间：2013-01-31T12:31:21.597
> 
> 标签：c#, asp.net-mvc-3, linq-to-entities

我有疑问？我想检索一个表的记录数据并想用一个字段来检查它。我知道它的 SQL 查询。

```
 string data = select Designation from EmployeeTab where EmpName=name; 
```

这里的 Designation 是其中一些工作名称的字段 EmployeeTab 是我的表名 EmpName 是字段的名称，name 是一个变量，其中包含员工姓名的会话值

我想在 asp.net mvc3 中编写这个查询，谁能告诉我应该写什么才能在 asp.net mvc3 中获得价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:35:28.133

您可以使用 ADO.NET 实体框架执行此操作，如下所示

```
using(YourEntityname context=new YourEntityname())
{
   var val = from u in context.EmployeeTab
             where u.EmpName == name
             select u.Designation;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:50:01.377

如果您没有 ADO.NET 实体框架

```
 using (SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ToString()))
            {
                cn.Open(); 
                string des="";   
                SqlCommand cmd = new SqlCommand("select Designation from EmployeeTab where EmpName=name;", cn);
                SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    des = dr["Designation"].ToString() 
                }
                dr.Close();
                cn.Close();
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:48:12.073

扩展@Sagar patel 的回复，您可以使用类似

```
using(YourEntityname context=new YourEntityname())
{
     var val=context.Users.Where(p=>p.EmpName==name).Select(u=>u.Designation);
} 
```

# java - 使用 OAuth Google 客户端程序时出现 redirect_uri_mismatch 错误

> ID：14625871
> 
> 赞同：2
> 
> 时间：2013-01-31T12:31:45.653
> 
> 标签：java, google-maps, oauth-2.0, google-fusion-tables, google-api-java-client

我正在使用 google OAuth java 客户端让我的应用程序被 google 授权以访问 google 融合表数据。我在这里使用了代码[http://code.google.com/p/google-api-java-client/source/browse/fusiontables-cmdline-sample/src/main/java/com/google/api/services/样本/fusiontables/cmdline/FusionTablesSample.java?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/fusiontables-cmdline-sample/src/main/java/com/google/api/services/samples/fusiontables/cmdline/FusionTablesSample.java?repo=samples)

我正在使用使用上述示例代码的 servlet，我正在使用服务帐户模式从谷歌服务器获得授权。当我使用上面的代码时，我收到以下错误。

**错误：redirect_uri_mismatch 请求中的重定向 URI：[http://localhost:51034/Callback] 与注册的重定向 URI 不匹配**

我看到当我们为服务帐户创建客户端 ID 和机密时，没有提到重定向 URI。那么我在哪里可以更改或编辑这些 uri 以使此代码正常工作。

现在我的代码在这个 url 上。 [http://rajeshtestapi.blogspot.in/2013/01/sample-code.html](http://rajeshtestapi.blogspot.in/2013/01/sample-code.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:08:21.477

在 servlet 中使用 Java 代码访问 google OAuth2 称为“Web 应用程序”或“Web 服务器”类型。当您在 API 控制台中创建 ClientID 时，选择“Web 应用程序”，然后您可以使用 @Odi 的屏幕截图所示编辑其 redirect_uris。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T12:56:45.953

[您可以在API 控制台](https://code.google.com/apis/console)（在*API 访问*部分）中编辑这些设置，在同一位置您可以添加服务帐户。只需使用“编辑设置...”，您就可以添加 JavaScript 重定向和来源：

![客户端设置](../Images/bcf65d20cfa1cfe93eca49c15de55497.png)

# ant - Ant 条件任务

> ID：14625875
> 
> 赞同：0
> 
> 时间：2013-01-31T12:31:49.477
> 
> 标签：ant, conditional-statements, short-circuiting

我无法找到这个问题的答案，正如您将看到的，理解我试图逆向工程的 build.xml 是如何工作的并不重要。尽管如此，我确实认为这个问题有一定的道理。

在这个 build.xml 我有以下代码段：

```
<condition property="tests.complete">
    <isset property="no.tests" />
</condition>
<condition property="tests.complete">
    <and>
        <uptodate>
            ...
        </uptodate>
        <uptodate>
            ...
        </uptodate>
        <uptodate>
            ...
        </uptodate>
        <not>
            <available ... />
        </not>
        <not>
            <isset ... />
        </not>
    </and>
</condition> 
```

我确实明白，如果在遇到这段代码之前设置了属性 no.tests，那么属性 tests.complete 将在第一个条件中设置为 true，无论在第二个条件任务中发生什么，这个属性都将保持设置离开代码段时为真。我的问题是，考虑到属性 tests.complete 是由第一个条件设置的，第二组条件测试会被评估吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:22:13.247

只能设置干净（未定义）的属性。如果您的属性已经设置，则什么也不做。

所以，不，不评估第二组条件。您可以使用以下代码对其进行测试：

```
<target name="run">
    <property name="no.tests" value="true"/>
    <condition property="tests.complete">
        <isset property="no.tests" />
    </condition>
    <echo message="${tests.complete}"/> <!-- prints true -->

    <condition property="tests.complete" else="false">
        <isset property="whatever" /> <!-- property whatever is not set -->
    </condition>
    <echo message="${tests.complete}"/> <!-- prints true as well! -->
</target> 
```

您也可以使用相反的方法对其进行测试：

```
<target name="run">
    <property name="whatever" value="true"/>
    <condition property="tests.complete" else="false">
        <isset property="no.tests" /> <!-- no.tests isn't defined -->
    </condition>
    <echo message="${tests.complete}"/> <!-- prints false -->

    <condition property="tests.complete" else="false">
        <isset property="whatever" /> <!-- the property whatever is defined -->
    </condition>
    <echo message="${tests.complete}"/> <!-- prints false as well! -->
</target> 
```

# php - 每个帖子的用户选择页面分页

> ID：14625879
> 
> 赞同：0
> 
> 时间：2013-01-31T12:31:54.303
> 
> 标签：php, codeigniter, jquery-plugins, pagination

我正在使用使用分页的codeigniter，但是当我选择每页的记录时，它会显示数据，但是当我单击下一页按钮时，默认情况下它将重定向到第3页，我们每页有25个数据字段，因此它将页面上的数据除以默认值。

这是控制器

```
 function search($page=0)
      {     
        // selecting per page data              
        if ($this->input->post('per_page')!='') {
                 $recordperpage = $this->input->post('per_page');
                 $per =  $this->input->post('per_page');
                 $page = $this->input->post('per_page');
                echo $this->session->userdata('per');
            } 

            else {
                $recordperpage = 25;    
            }
      $keyword = $this->input->post('keyword');

      $result['front'] = $this->search_model->search($keyword,$page,$recordperpage);

    $mypaing['total_rows']= $this->search_model->listing_num('*','tabel_name','flag',1,'keyword',$keyword);
    $mypaing['base_url']    =   base_url()."admin/h_search/search/";
    $mypaing['per_page']    =   $recordperpage;
    $mypaing['uri_segment'] =   4;      
    $this->pagination->initialize($mypaing);
    $result['recordperpage'] = $recordperpage;
    $result['paginglink']   =   $this->pagination->create_links();
    $data['page_heading']   = "Doctor Search Result";
   $data['contents'] = $this->load->view('admin/listing/search',$result,true);  

    $this->load->view('admin/template',$data);
    }`enter code here` 
```

**从搜索中获取记录的**模型****

 **```
 function search($keyword,$page,$recordperpage)
{    
    $sql ="SELECT * FROM tabel_name WHERE flag = 1  AND keyword LIKE '%".$keyword."%' 
    LIMIT ".$page.",".$recordperpage."" ;
    $result=$this->db->query($sql);
    return $result; 
} 
function listing_num($select,$from,$where_colum,$where,$where_colum1,$where1)
{
    $this->db->select($select);
    $this->db->from($from);
    $this->db->where($where_colum,$where);
    $this->db->where($where_colum1,$where1);

    $query=$this->db->get();
    return $query->num_rows();
} 
```

**看法**

```
 <div class="counter">
      <input type="hidden" value="<?=$recordperpage?>" name="rpp_hidden" id="rpp_hidden" />
    <select onchange="this.form.submit();" name="per_page" id="per_page">
    <option value="25" <? if ($recordperpage == 25) {  print 'selected=selected'; }?>  >25</option>
    <option value="50" <? if ($recordperpage == 50) {  print 'selected=selected'; }?> >50</option>
    <option value="75" <? if ($recordperpage == 75) {  print 'selected=selected'; }?> >75</option>
    <option value="100" <? if ($recordperpage == 100) {  print 'selected=selected'; }?> >100</option>
    </select> per page 
  </div>

</div> 
```

当我选择每个帖子的数据时，如果我选择每页记录 50，它将重定向到第 1 页并显示从 0 到 50 的数据

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:46:33.633

如果不是搜索，您在哪里设置偏移量？尝试将其添加到您的 if 语句之上。如果没有 uri 段 4，比如当你第一次加载页面时，它会将你的偏移量设置为 0，如果有它将使用该段。然后，如果是搜索，您的 if 语句将覆盖它：

```
 $page = ($this->uri->segment(4) ? $this->uri->segment(4) : 0); 
```**

# sql - 在 oracle 中使用行号更新字段

> ID：14625881
> 
> 赞同：1
> 
> 时间：2013-01-31T12:31:56.267
> 
> 标签：sql, oracle, oracle10g, rownum

> **可能重复：**
> [Oracle：使用 ROWNUM 和 ORDER BY 子句更新表列](https://stackoverflow.com/questions/6094039/oracle-updating-a-table-column-using-rownum-in-conjunction-with-order-by-clause)

我有一个返回有序记录集的查询，我想将结果集中每一行的行号复制到记录本身上称为序列的特定字段中。

```
SELECT ROWNUM, ID
FROM (
    SELECT ID 
    FROM MYTABLE 
    WHERE PARENT = 1
    ORDER BY SEQUENCE ASC
) 
```

我有每一行的 ID，并且`rownum`我想在`SEQUENCE`字段中输入。如何循环遍历此结果集并相应地更新表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:42:50.860

```
merge into mytable t
using (SELECT ROWNUM rn, ID
       FROM (
         SELECT ID 
         FROM MYTABLE 
         WHERE PARENT = 1
         ORDER BY SEQUENCE ASC
      )) S 
on (t.id=s.id)
when matched then update set
  t.sequence=s.rn 
```

如果 id 不是唯一的，您可以肯定：

```
merge into mytable t
using (SELECT ROWNUM rn, rwd
       FROM (
         SELECT rowid rwd
         FROM MYTABLE 
         WHERE PARENT = 1
         ORDER BY SEQUENCE ASC
      )) S 
on (t.rowid=s.rwd)
when matched then update set
  t.sequence=s.rn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:45:11.540

请试试：

```
 merge into EMP_MASTER x
  using (
          SELECT ID, ROW_NUMBER() OVER(ORDER BY SEQUENCE) y
          FROM MYTABLE 
          WHERE PARENT = 1
         ) s on (s.ID=x.ID)
         when matched then update set
  x.sequence=s.y; 
```

这适用于唯一 ID。

# iphone - iphone：从子视图中获取关于 self.view 的坐标

> ID：14625882
> 
> 赞同：0
> 
> 时间：2013-01-31T12:31:57.010
> 
> 标签：iphone, coordinates, cgrect

![参考](../Images/440fb129eb3ce2bea3ac47b202b806e7.png)

在这里，A，B ... Z 是带有表格的自定义单元格，

我怎样才能得到一个`CGRect`相对于按钮的`self.view`？我尝试了`CGRectIntersection`和`CGRectUnion`方法，但它不起作用！例如，我需要`CGRect`给我那个按钮的位置`self.view`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:42:20.513

你需要两步计算

1.  计算单元格相对于**self.view的原点**
2.  计算按钮相对于单元格的原点

对于第 1 步，您可以使用

```
[UITableView rectForRowAtIndexPath] 
```

例如`CGRect rect_cell = [table_view rectForRowAtIndexPath:index_path_target_cell];`

然后对于第 2 步，（如果您还不知道按钮与单元格原点的偏移量）

```
CGRect rect_button = _button.frame;
CGPoint point_answer = CGPointMake(rect_cell.origin.x + rect_button.origin.x , rect_cell.origin.y + rect_button.origin.y); 
```

# c# - 将文本文件上传到 Web 服务

> ID：14625883
> 
> 赞同：1
> 
> 时间：2013-01-31T12:31:58.187
> 
> 标签：c#, .net, asmx, webclient, webclient.uploaddata

我有以下接受文本文件的方法，我正在尝试将此文本文件上传到 Web 服务上。我使用用户名和密码。但我得到一个例外：“远程服务器返回错误：（404）未找到。”。如果我再次提供用户名和密码，我会得到同样的异常。我应该怎么做才能克服这个问题？

```
public static void UploadTextFileToWebService(string txtFile)
{
    WebClient webClient = new WebClient();
    string webAddress = null;
    try
    {
        webAddress = @"https://www.myweb.org/mywebwebservices/dataupload.asmx";
        webClient.Credentials = CredentialCache.DefaultCredentials;

        WebRequest serverRequest = WebRequest.Create(webAddress);
        WebResponse serverResponse;
        serverResponse = serverRequest.GetResponse();
        serverResponse.Close();              
        webClient.UploadFile(webAddress + txtFile, "PUT", txtFile);
        webClient.Dispose();
        webClient = null;
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:35:04.717

您的网络服务似乎是一个 asmx 网络服务，所以我怀疑您是否可以按照您尝试的方式进行上传。

您需要使用正确的 SoapMessage 格式来发送您发送的任何请求。

由于您使用的是 C#/.Net，因此最简单的方法是添加一个服务引用，该引用将创建一个代理以使您能够通过对象模型发送您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:36:19.287

我不确定您是否在这里找到了方法 - 因为您已经将文件作为字符串读取，您应该将字符串的内容发送到直接接受文本文件内容的 webmethod。

因此，在您的服务中，您应该拥有（类似）：

```
[WebMethod()]
public void AcceptFile(string content)
{
    ...
} 
```

然后调用该方法并将 txtFile 变量作为参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:40:23.940

parm 1 在这一行是错误的：

```
webClient.UploadFile(webAddress + txtFile, "PUT", txtFile); 
```

可能应该是

```
webClient.UploadFile(webAddress + @"/" + txtFile, "PUT", txtFile); 
```

# c++ - 包含的库仍然会导致“未定义的引用”错误

> ID：14625887
> 
> 赞同：2
> 
> 时间：2013-01-31T12:32:04.490
> 
> 标签：c++, eclipse, gcc

我已经在我的 Ubuntu 系统上安装了这个[http://www.sfml-dev.org/index.php](http://www.sfml-dev.org/index.php)库。这些文件存储在 /usr/local/include 中。

我的 Eclipse 确实在“包含 >> GNU C++”下包含这些文件，但如果我构建程序，编译器会抱怨未定义的引用。

```
#include <SFML/System.hpp>
#include <iostream>

int main()
{
  sf::Clock Clock;
  return 0;
} 
```

原因：

```
undefined reference to `sf::Clock::Clock()' main.cpp 
```

猜猜我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:59:19.400

根据[SFML 教程](http://www.sfml-dev.org/tutorials/1.6/start-linux.php)，您需要使用“-l”指令链接到库。因此，请确保 eclipse 代表您执行此操作，如果没有，请尝试覆盖标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:04:06.807

我的第一个建议是对的。

[此处](http://www.sfml-dev.org/tutorials/1.6/start-linux.php)记录，您必须编译如下：

```
g++ -c clock.cpp
g++ -o clock clock.o -lsfml-system 
```

所以请将 -lsfml-system 添加到库中。

# c - GCC 是否缓存循环变量？

> ID：14625888
> 
> 赞同：2
> 
> 时间：2013-01-31T12:32:08.197
> 
> 标签：c, performance, optimization, gcc, c99

当我有一个像这样的循环时：

```
for (int i = 0; i < SlowVariable; i++)
{
   //
} 
```

我知道在 VB6`SlowVariable`中，循环的每次迭代都会访问它，从而使以下效率更高：

```
int cnt = SlowVariable;

for (int i = 0; i < cnt; i++)
{
   //
} 
```

我需要在 GCC 中进行相同的优化吗？还是`SlowVariable`只评估一次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:09:10.550

这被称为“提升”`SlowVariabele`循环。

只有当编译器能够证明 的值`SlowVariabele`每次都相同并且评估`SlowVariabele`没有副作用时，编译器才能做到这一点。

因此，例如考虑以下代码（为了举例，我假设由于某种原因通过指针访问是“慢”的）：

```
void foo1(int *SlowVariabele, int *result) {
    for (int i = 0; i < *SlowVariabele; ++i) {
       --*result;
    }
} 
```

编译器不能（通常）提升，因为它知道它将被调用`result == SlowVariabele`，因此 的值`*SlowVariabele`在循环期间会发生变化。

另一方面：

```
void foo2(int *result) {
    int val = 12;
    int *SlowVariabele = &val;
    for (int i = 0; i < *SlowVariabele; ++i) {
       --*result;
    }
} 
```

现在至少在原则上，编译器*可以*知道`val`循环中永远不会发生变化，因此它可以提升。它是否真的这样做取决于优化器的积极程度以及它对函数的分析有多好，但我希望任何认真的编译器都能做到这一点。

类似地，如果`foo1`使用编译器可以确定（在调用站点）不相等的指针调用，并且如果调用是内联的，那么编译器可以提升。这就是`restrict`：

```
void foo3(int *restrict SlowVariabele, int *restrict result) {
    for (int i = 0; i < *SlowVariabele; ++i) {
       --*result;
    }
} 
```

`restrict`（在 C99 中引入）意味着“你不能用`result == SlowVariabele`”调用这个函数，并允许编译器提升。

相似地：

```
void foo4(int *SlowVariabele, float *result) {
    for (int i = 0; i < *SlowVariabele; ++i) {
       --*result;
    }
} 
```

严格的别名规则意味着`SlowVariable`并且`result`不能引用相同的位置（或者程序无论如何都有未定义的行为），因此编译器可以再次提升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:38:09.997

通常，变量*不能*慢（或快），除非它们被映射到某种奇怪的内存（在这种情况下你通常想要声明它们`volatile`）。

但实际上，使用局部变量会为优化创造更多机会，而且效果可能非常明显。只有当编译器能够证明在循环中调用的任何函数都不能*读取*或*写入*该全局变量时，编译器才能自行“缓存”全局变量。当您在循环中调用外部函数时，编译器可能无法证明这样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:06:58.360

这取决于编译器如何优化，例如这里：

```
#include <stdio.h>

int main(int argc, char **argv)
{
    unsigned int i;
    unsigned int z = 10;

    for( i = 0 ; i < z ; i++ )
        printf("%d\n", i);

    return 0;
} 
```

如果您使用 编译它`gcc example.c -o example`，结果代码将是：

```
 0x0040138c <+0>:     push   ebp
 0x0040138d <+1>:     mov    ebp,esp
 0x0040138f <+3>:     and    esp,0xfffffff0
 0x00401392 <+6>:     sub    esp,0x20
 0x00401395 <+9>:     call   0x4018f4 <__main>
 0x0040139a <+14>:    mov    DWORD PTR [esp+0x18],0xa
 0x004013a2 <+22>:    mov    DWORD PTR [esp+0x1c],0x0
 0x004013aa <+30>:    jmp    0x4013c4 <main+56>
 0x004013ac <+32>:    mov    eax,DWORD PTR [esp+0x1c]
 0x004013b0 <+36>:    mov    DWORD PTR [esp+0x4],eax
 0x004013b4 <+40>:    mov    DWORD PTR [esp],0x403064
 0x004013bb <+47>:    call   0x401b2c <printf>
 0x004013c0 <+52>:    inc    DWORD PTR [esp+0x1c]
 0x004013c4 <+56>:    mov    eax,DWORD PTR [esp+0x1c]  ; (1) 
 0x004013c8 <+60>:    cmp    eax,DWORD PTR [esp+0x18]  ; (2)
 0x004013cc <+64>:    jb     0x4013ac <main+32>
 0x004013ce <+66>:    mov    eax,0x0
 0x004013d3 <+71>:    leave
 0x004013d4 <+72>:    ret
 0x004013d5 <+73>:    nop
 0x004013d6 <+74>:    nop
 0x004013d7 <+75>:    nop 
```

1.  的值`i`将从堆栈中电影化到`eax`.
2.  然后 CPU 将`eax`或与堆栈中`i`的 的值进行比较。`z`

所有这些都发生在每一轮。

如果您使用 优化代码`gcc -O2 example.c -o example`，结果将是：

```
 0x00401b70 <+0>:     push   ebp
 0x00401b71 <+1>:     mov    ebp,esp
 0x00401b73 <+3>:     push   ebx
 0x00401b74 <+4>:     and    esp,0xfffffff0
 0x00401b77 <+7>:     sub    esp,0x10
 0x00401b7a <+10>:    call   0x4018a8 <__main>
 0x00401b7f <+15>:    xor    ebx,ebx
 0x00401b81 <+17>:    lea    esi,[esi+0x0]
 0x00401b84 <+20>:    mov    DWORD PTR [esp+0x4],ebx
 0x00401b88 <+24>:    mov    DWORD PTR [esp],0x403064
 0x00401b8f <+31>:    call   0x401ae0 <printf>
 0x00401b94 <+36>:    inc    ebx
 0x00401b95 <+37>:    cmp    ebx,0xa                     ; (1)
 0x00401b98 <+40>:    jne    0x401b84 <main+20>
 0x00401b9a <+42>:    xor    eax,eax
 0x00401b9c <+44>:    mov    ebx,DWORD PTR [ebp-0x4]
 0x00401b9f <+47>:    leave
 0x00401ba0 <+48>:    ret
 0x00401ba1 <+49>:    nop
 0x00401ba2 <+50>:    nop
 0x00401ba3 <+51>:    nop 
```

1.  编译器知道检查 的值是没有意义的`z`，所以它将代码修改为类似 的内容`for( i = 0 ; i < 10 ; i++ )`。

如果编译器不知道`z`此代码中 like 的值：

```
#include <stdio.h>

void loop(unsigned int z) {
    unsigned int i;
    for( i = 0 ; i < z ; i++ )
        printf("%d\n", i);
}

int main(int argc, char **argv)
{
    unsigned int z = 10;

    loop(z);

    return 0;
} 
```

结果将是：

```
0x0040138c <+0>:     push   esi
0x0040138d <+1>:     push   ebx
0x0040138e <+2>:     sub    esp,0x14
0x00401391 <+5>:     mov    esi,DWORD PTR [esp+0x20] ; (1)
0x00401395 <+9>:     test   esi,esi
0x00401397 <+11>:    je     0x4013b1 <loop+37>
0x00401399 <+13>:    xor    ebx,ebx                  ; (2)
0x0040139b <+15>:    nop
0x0040139c <+16>:    mov    DWORD PTR [esp+0x4],ebx
0x004013a0 <+20>:    mov    DWORD PTR [esp],0x403064
0x004013a7 <+27>:    call   0x401b0c <printf>
0x004013ac <+32>:    inc    ebx
0x004013ad <+33>:    cmp    ebx,esi
0x004013af <+35>:    jne    0x40139c <loop+16>
0x004013b1 <+37>:    add    esp,0x14
0x004013b4 <+40>:    pop    ebx
0x004013b5 <+41>:    pop    esi
0x004013b6 <+42>:    ret
0x004013b7 <+43>:    nop 
```

1.  `z`最终会出现在一些未使用的寄存器`esi`中，寄存器是最快的存储分类。
2.  没有局部变量`i`，在栈上，编译器用来`ebx`存储 的值`i`，也是寄存器。

毕竟，这取决于编译器和您使用的优化选项，但是，在所有情况下，C 仍然比 VB 快得多，快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:35:01.800

这取决于您的编译器，但我相信如果 SlowVariable 的值是恒定的，大多数当代编译器都会为您优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:35:23.547

“它”（语言）没有说。当然，它必须*表现得*好像每次都评估变量一样。

优化编译器可以做很多聪明的事情，所以最好将这些微优化留给编译器。

如果您要手动进行优化，请务必*分析*（=测量）并阅读生成的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T12:36:03.397

实际上它取决于“SlowVariable”和编译器的行为。如果你的慢变量是易变的，编译器不会做任何努力来缓存它，因为关键字 volatile 不允许它。如果它不是“易失的”，那么编译器很可能会通过将其加载到寄存器中来优化对该变量的连续访问。

# iphone - 单个 iPhone 应用程序中的多个提醒

> ID：14625889
> 
> 赞同：1
> 
> 时间：2013-01-31T12:32:10.620
> 
> 标签：iphone, objective-c, camera, reminders

我们如何在我们的 iPhone 应用程序中设置多个提醒，我必须为我的应用程序中的每个图像项目设置单独的提醒，以便用户可以从相机中为特定项目拍摄图像（每天、每周或每月），我是能够设置单个提醒，但是当我尝试为我的应用程序中的另一个项目设置多个提醒时，它会覆盖所有项目的所有先前提醒。请给我任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:40:37.410

尝试这个。

```
 //KeyValue = used for identifying reminder
    //RepeatType = NSWeekCalendarUnit or NSMonthCalendarUnit
    //AlertBody = display text

    -(void)setReminder:(NSDate*)date KeyValue:(NSString*)keyValue RepeatType:(NSInteger)repeatType AlertBody:(NSString*)alertBody
    {
        UILocalNotification *localNotif = [[UILocalNotification alloc] init];
        if (localNotif == nil)
            return;

        localNotif.fireDate = date;
        localNotif.timeZone = [NSTimeZone defaultTimeZone];

        // Notification details
        localNotif.alertBody = alertBody;

        // Set the action button
        localNotif.alertAction = NSLocalizedString(@"View",nil);

        localNotif.soundName =UILocalNotificationDefaultSoundName;

        // Specify custom data for the notification
        NSDictionary *infoDict = [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"%@",keyValue] forKey:@"ReminderID"];

        localNotif.userInfo = infoDict;
        localNotif.repeatInterval = repeatType;

        // Schedule the notification
        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

        [localNotif release];

    } 
```

//调用此方法设置单个通知。//你可以设置任意数量

# html - 如何填充两个动态div之间的垂直空间？

> ID：14625891
> 
> 赞同：1
> 
> 时间：2013-01-31T12:32:15.973
> 
> 标签：html, css

假设以下html：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <div id="header">
            <!-- dynamic height -->
        </div>
        <div id="main" style="overflow: scroll;">
            <!--
                contains actual content
                height should be whatever is left over
            -->
        </div>
        <div id="footer">
            <!-- dynamic height -->
        </div>
    </body>
</html> 
```

基本上我想要的是：

`main height = body height - (header height + footer height)`

正文和 html 高度为 100%。

`header`由于和的高度`footer`都是动态的（会非常频繁地变化），我需要一种动态的方式来设置 的高度`main`，也就是说，我不能以像素或百分比为单位指定任何高度。

确实还有其他类似的问题，但我不是在寻找“浮动/粘性页脚”，`main`div*必须*具有剩余高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:54:54.737

您不能使用 css 执行此操作，您需要使用 javascript 或 jquery

[在内容容器上设置最小高度](https://stackoverflow.com/questions/13836301/set-a-min-height-on-content-container)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:48:21.743

您必须指定页脚和页眉的高度。

您可以在准备好的文档上使用 javascript 设置页脚、页眉和主 div 的高度。

然后，像这样使用 css：

```
#header{
  position: absolute;
  top: px;
  height: /*dynamically set by javascript*/;
  left: px;
  right: px;
}

#footer {
  position: absolute;
  bottom: 0px;
  height: /*dynamically set by javascript*/;
  left: 0px;
  right: 0px;
}

#main {
  position: absolute;
  bottom: /* set by javascript with height of footer */;
  top: /* set by javascript with height of header */;
  left: 0px;
  right: 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:43:19.637

您可能会将#main 元素限制为特定高度，因为这是我能想到的唯一条件，您将在哪里使用它。您应该已经知道 body 元素将根据标题、主体和正文高度自动缩放，因此您在问题中陈述的等式将始终正确，除非使用填充/边距。在这种情况下，只需使用最大高度：

```
#main {
    max-height: 100%;
} 
```

这将 #main 元素限制为 100% 的高度，或整个页面。

我相信这不是你要找的，因此也许你想澄清一下你为什么要这样做？我们或许可以提出替代解决方案。

# linux - 使用 --- GTK+ & X11 库构建交叉编译器

> ID：14625895
> 
> 赞同：0
> 
> 时间：2013-01-31T12:32:22.267
> 
> 标签：linux, x11, cross-compiling

我已经使用以下方法制作了交叉编译器`crosstool-ng`：--
[http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/](http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/)

现在我必须使用这个交叉编译器交叉编译 wxGTK。
wxGTK 需要`GTK+ & X11`库来构建。但是我的交叉编译器不是为支持相同而构建的。

1>需要的X11库包有：----

```
 wx2.8-headers  
 libwxgtk2.8-0  
libwxgtk2.8-dev 
```

2> X11 客户端需要以下软件包：---

```
libx11-dev 
```

请建议在交叉编译器中为 GTK+ & X11 支持配置 crosstool-ng，此命令是否正确：-----

```
./configure --prefix=/opt/cross  --with-x11 --with-libx11-dev
--with-wx2.8-headers --with-libwxgtk2.8-0 --with-libwxgtk2.8-dev 
```

问候，

//艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:31:46.927

为什么不使用 Openembedded 之类的解决方案来构建您需要的所有软件？手动编译 X、GTK 和 WX 并非易事且耗时

正如我[昨天](https://stackoverflow.com/questions/14598457/building-a-minimal-linux-for-raspberry-pi)建议的那样，我宁愿使用 Openembedded

# arrays - Ant 脚本——拆分字符串并通过索引访问

> ID：14625896
> 
> 赞同：3
> 
> 时间：2013-01-31T12:32:23.250
> 
> 标签：arrays, string, ant, indexing, split

我需要编写一个 Ant 脚本来加载一个属性文件，从中读取一个属性。值（多行）类似于：

```
path/to/file1a;path/to/file1b,
path/to/file2a;path/to/file2b,
..
.. 
```

我需要遍历每一行，并执行如下所示的 shell 命令：

```
myCommand -param1 path/to/file1a -param2 path/to/file1b  #Command inside a single iteration 
```

我已经能够弄清楚如何循环：

```
<for list="${ValueFromPropertyFile}" param="a">  
    <sequential>
        <exec executable="myCommand">
            <arg value="-param1" />
            <arg value="----  split(@{a}, ";")[0]  ----" />
            <arg value="-param2" />
            <arg value="----  split(@{a}, ";")[1]  ----" />
        </exec>
    </sequential>
</for> 
```

在我看来，这是一项非常简单的任务。我尝试搜索，但没有任何成功。

如果有人可以帮助我解决这个问题，或者将我指向相关文件，我将不胜感激。

非常感谢，

普拉提克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:52:33.273

您的假设存在几个问题：

1.  输入文件的格式不是标准的 Java 属性文件，因此无法使用 ANT 中的标准[loadproperties 任务](http://ant.apache.org/manual/Tasks/loadproperties.html)加载。
2.  ANT 不是一种编程语言。您引用的“for”任务不是核心 ANT 的一部分（需要第 3 方 ant-contrib.jar）

所以我建议使用嵌入式脚本来解决您的问题。

# 例子

该项目是自我记录的：

```
$ ant -p
Buildfile: /home/mark/tmp/build.xml

    This is a demo project answering the following stackoverflow question:
    http://stackoverflow.com/questions/14625896

    First install 3rd party dependencies and generate the test files

        ant bootstrap generate-test-files

    Then run the build

        ant

    Expect the following output

        parse-data-file:
            [exec] build/myCommand -param1 path/to/file1a -param2 path/to/file1b
            [exec] build/myCommand -param1 path/to/file2a -param2 path/to/file2b 
```

## 构建.xml

```
<project name="demo" default="parse-data-file">

    <description>
    This is a demo project answering the following stackoverflow question:
    http://stackoverflow.com/questions/14625896

    First install 3rd party dependencies and generate the test files

        ant bootstrap generate-test-files

    Then run the build

        ant

    Expect the following output

        parse-data-file:
            [exec] build/myCommand -param1 path/to/file1a -param2 path/to/file1b
            [exec] build/myCommand -param1 path/to/file2a -param2 path/to/file2b

    </description>

    <target name="bootstrap" description="Install 3rd party dependencies">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get dest="${user.home}/.ant/lib/groovy-all.jar" src="http://search.maven.org/remotecontent?filepath=org/codehaus/groovy/groovy-all/2.1.0/groovy-all-2.1.0.jar"/>
    </target>

    <target name="generate-test-files" description="Generate the input data and sample script">
        <echo file="build/input.txt">path/to/file1a;path/to/file1b,
path/to/file2a;path/to/file2b,</echo>

        <echo file="build/myCommand"> #!/bin/bash
echo $0 $*</echo>

        <chmod file="build/myCommand" perm="755"/>
    </target>

    <target name="parse-data-file" description="Parse data file">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy"/>

        <groovy>
            new File("build/input.txt").eachLine { line ->
                def fields = line.split(/[;,]/)

                ant.exec(executable:"build/myCommand") {
                    arg(value:"-param1")
                    arg(value:fields[0])
                    arg(value:"-param2")
                    arg(value:fields[1])
                }
            }
        </groovy>
    </target>

    <target name="clean" description="Cleanup build files">
        <delete dir="build"/>
    </target>

</project> 
```

# jquery - 内联编辑标题

> ID：14625899
> 
> 赞同：0
> 
> 时间：2013-01-31T12:32:39.350
> 
> 标签：jquery, html, events

基本上，我需要的是页面上的标准标题，一旦单击，它就会“变成”一个 input[type="text"] 或者更确切地说切换相关的输入字段。当您在输入字段中键入时，该值应该替换标题的文本，并且 tab 键也应该起作用，所以如果我专注于第一个字段或第二个字段并按“Shift tab”它将隐藏正确的字段。

这是我的 html 标记

```
<div class="stepInformation" title="Click to edit">
      <h4 class="blue nameEdit">Enter Order Name</h4> 
      <input type="text" id="orderName" value="" placeholder="Enter Order Name"
            style="display:none">
      <h4 class="blue descriptionEdit">Enter Order Description</h4> 
      <input type="text" id="orderDescription" value="" placeholder="Enter Order Description"
            style="display:none">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:17:56.827

希望有效..

```
$('.stepInformation h4').click(function(){$('.stepInformation input').hide();$(this).next('input').fadeIn(100,function(){$(this).focus()})});
$('.stepInformation input').keydown(function(e) {
  var keyCode = e.keyCode || e.which;
  if(keyCode == 9) {
    e.preventDefault()
    if(e.shiftKey) {
    $(this).parent().find(':input').fadeIn(100,function(){$(this).focus()});
    }
    else {
    $(this).nextAll(':input:first').fadeIn(100,function(){$(this).focus()});
    }
    $(this).hide()
  }
});
$('.stepInformation input').keyup(function(){
  $(this).prevAll('h4:first').text($(this).val());
}); 
```

这是为了隐藏标题，但我不会使用它：

```
$('.stepInformation input').on('focus',function(){
    $('.stepInformation h4').show();
    $(this).prevAll('h4:first').hide();
}); 
```

PS。我在使用**.show().focus()**时遇到了一些问题，这就是我使用**.fadeIn(100,function(){$(this).focus()})的原因**

# hibernate - 将时间戳转换为 sybase 数据库的日期 hql

> ID：14625904
> 
> 赞同：0
> 
> 时间：2013-01-31T12:32:53.753
> 
> 标签：hibernate, hql

我正在使用*Sybase*数据库，我想获取时间戳字段作为日期。如何在*HQL*中使用时间戳字段作为日期？

我的查询：

```
SELECT new map(NAME,SUM(MARKS),ADMISSIONDATE) 
FROM STUDENT 
GROUP BY NAME,MARKS,ADMISSIONDATE 
```

，其中 ADMISSIONDATE 是数据库中的时间戳。

我想在我的查询中忽略时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T16:08:30.697

使用转换方法

例如：

convert(varchar(12),ADMISSIONDATE,109) 将返回输出为 'Jul 24 2013'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:43:11.463

认为最简单的方法是将Sybase 中的*TIMESTAMP*列映射到*java.sql.Date*到 STUDENT 实体中。Hibernate[应该将](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-types-basictypes)TIMESTAMP 列映射到适当的日期类型：

> **日期、时间、时间戳**
> 
> [从java.util.Date](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)及其子类到 SQL 类型 DATE、TIME 和 TIMESTAMP（或等效）的类型映射。

[一些建议：在new map(...)](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select)中使用命名参数

# javascript - 如何使用jQuery多次复制列表元素

> ID：14625907
> 
> 赞同：3
> 
> 时间：2013-01-31T12:32:58.060
> 
> 标签：javascript, jquery, clone, duplication

我有我的小问题。是否有任何选项可以使用 jquery 复制多个元素？我有一个元素列表，我可以克隆、复制 fe 7 次吗？

```
<ul id="my_list>
   <li class="one_element>data</li>
</ul> 
```

还有一些jquery，我不知道怎么写：

```
var mylist = $('#my_list');
myList.find('li').clone(2); 
```

你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:36:16.003

```
var mylist = $('#my_list');
for ( i = 0; i < 7;i++){
      mylist.find('li:first').clone().appendTo(mylist);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:45:14.740

您可以轻松使用`$.each`jquery 循环包装器：

```
$.each(new Array(7),function(){
    $('#list li:first').clone().appendTo('#list');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:34:22.003

您可以通过链接克隆来执行两次：

```
var mylist = $('#my_list');
myList.find('li:first').clone().appendTo(myList).clone().appendTo(myList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:37:09.653

```
 var n=0;
  var mclon = $('#my_list');
 for ( i = 0; i < 7;i++){
  mclon.clone().attr('id', 'id'+(n++) ).insertAfter( mclon );
  } 
```

使用`.clone()`七次。

说明：这样创建的所有七个克隆都具有唯一的 id（`id=my_list+n`其中 n 取决于迭代次数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-11T18:39:18.943

如果您不想要深度克隆，那么您可以使用数组[`join()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join)方法创建一个与`n`元素数量相对应的 HTMLString，如下所示：

```
var elementString = new Array(++n).join($(selector).get(0).outerHTML) 
```

您可以将其附加到您希望的任何元素。

基本上，我们将元素的[outerHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element.outerHTML)传递给数组`join()`方法，其长度`1`大于所需的克隆数。这是因为该`join()`方法在第一个元素之后开始追加并在最后一个元素之前停止。

IE，

```
[null,null,null,null].join(","); // results in ",,," not ",,,," 
```

* * *

在您的情况下，您可以执行以下操作：

```
$("ul").append(new Array(8).join($(".one_element").get(0).outerHTML));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul id="my_list">
  <li class="one_element">data</li>
</ul>
```

# ruby-on-rails - 选择类型字段的菜单并将整数映射到rails中的文本

> ID：14625908
> 
> 赞同：1
> 
> 时间：2013-01-31T12:33:02.860
> 
> 标签：ruby-on-rails, database, postgresql, gem, formtastic

[我是 Rails 新手，我希望这不是一个愚蠢的问题，看到了一个类似的问题，但它适用于 PHP，对我的情况没有帮助]

为了解释我的问题，我在这里对用户进行了类比。假设我`users`的应用程序中有表格，我添加了一个名为`user_type`users 表格的字段。现在我想指定用户的类型。

假设我有 5 种类型的用户，例如。版主、管理员、消费者等

我不想将`user_type`字段设为字符串类型来存储用户类型。相反，我想`user_type`存储这些整数值`integer`，然后**将它们映射到相应的字符串值**。这种方法的优点是我可以更改用户类型的名称。假设我不再希望将消费者称为消费者，而是希望将其称为其他东西。

我相信将整数存储在 db 中会更好，并且具有一定的灵活性。

我知道我可以使用 formtastic 创建选择菜单（我使用 active_admin 作为管理面板，formtastic 用于表单）

```
 <%= f.input :user_type, :as => :select, :collection => { 
        0    => "Admin", 
        1   => "Moderator",
        2 => "Consumer",
    } %> 
```

然后将值存储在db中，然后从db中选择这些用户。

我想知道是否有更好的方法或方法可以在 Rails 中执行此操作，或者是否有一些 gem 可以执行此操作或您喜欢的其他方法以及为什么推荐它。

我正在使用 postgresql 作为数据库。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:51:30.527

我个人喜欢将active_enum gem 与[simple_form结合](https://github.com/adzap/active_enum "活动枚举")[使用](https://github.com/plataformatec/simple_form)，因为它实现起来非常简单，而且它们可以很好地协同工作。

在您的情况下，您必须像这样定义一个枚举类：

```
class Type < ActiveEnum::Base
  value 1 => 'Admin'
  value 2 => 'Moderator'
  value 3 => 'Consumer'
end 
```

然后在您的`User`模型中，您只需添加以下内容：

```
enumerate :user_type, :with => Type 
```

真正很棒的`simple_form`是您只需调用：

```
<%= f.input :user_type => 
```

得到`select`你所有的价值观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:44:26.363

尝试这个

```
# user.rb
USER_TYPES = { moderator: 1, superuser: 2, admin: 3, client: 4 }

# views
select :user, :user_type, User::USER_TYPES 
```

这会将整数值保存到数据库中。如果要获得等效的字符串，请使用`User::USER_TYPES.key(@user.user_type)`

编辑：忘记添加范围

```
scope :moderators, where(user_type: USER_TYPES[:moderator])
scope :superusers, where(user_type: USER_TYPES[:superuser])
... 
```

或者

```
USER_TYPES.each do |user_type, value|
  scope :"#{user_type}s", where(user_type: USER_TYPES[user_type])
end 
```

# razor - 有没有办法为 cshtml 剃须刀编辑器添加设计器视图？

> ID：14625911
> 
> 赞同：7
> 
> 时间：2013-01-31T12:33:11.787
> 
> 标签：razor, custom-controls, visual-studio-extensions

我正在使用我们开发的内部工具来解析带有生成模型的剃须刀模板。问题是现在它每次都需要加载模板才能解析它。我想添加一个编辑器，这样我就可以在编写 cshtml 的同时预览它，所以我认为最好的方法是让它成为一个 Visual Studio 扩展。

我研究了网络，在我看来你可以为 VS 编写自定义编辑器，但是我必须自己编写编辑器，我不想这样做。

有没有办法使用内置于 VS2012 的现有剃须刀编辑器并使用我的控件添加一个预览选项卡，该选项卡从剃刀编辑器获取当前文本，以便我可以解析它并显示预览？

想要使用现有编辑器的原因是用于着色、智能感知、错误处理等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T19:18:43.897

Razor（CSHTML 和 VBHTML）文件的设计视图没有内置支持。部分原因是它们是代码和 HTML 的混合体，解析范围从“非常困难”到“超级不可能”。

话虽如此，VS2012 中有一个非常酷的功能，称为 Page Inspector，它可以向您显示真实渲染的页面以及生成它的代码（例如您的 Razor 视图）以及它们之间的映射，即使某些内容来自布局页面或部分视图。

查看[http://msdn.microsoft.com/en-us/library/hh420390(v=VS.110).aspx](http://msdn.microsoft.com/en-us/library/hh420390(v=VS.110).aspx)并查找“页面检查器”部分，其中包含一些博客文章和描述功能深入。

这是一段摘录：

> Page Inspector 是一种直接在 Visual Studio IDE 中呈现网页（HTML、Web 窗体、ASP.NET MVC 或网页）的工具。您可以使用 Page Inspector 检查源代码和结果输出。对于 ASP.NET 页面，您可以使用 Page Inspector 来确定哪个服务器端代码生成了呈现给浏览器的 HTML 标记。即使启用了默认的 ASP.NET 捆绑和缩小功能，Page Inspector 也能正常工作。

# php - 查找谁在 php 中引用对象？

> ID：14625912
> 
> 赞同：0
> 
> 时间：2013-01-31T12:33:31.847
> 
> 标签：php, reference, garbage-collection

PHP中有没有办法找出对象被引用的位置，以便找到不再需要的过时引用？

一些背景：

我正在调试/优化一个用 PHP 编写的大型系统，试图在运行一些大型批处理作业时减少系统的内存占用。

流程基本上是：

1）设置所有处理所需的一些上下文/对象

2) 对仅与 #1 中设置的对象相关的对象进行 N 次操作，在循环中创建的各个对象之间没有关系/耦合

给定足够大的 N 系统将始终耗尽内存，即使在步骤 #2 中创建的每个对象都应该能够在对该特定对象完成处理后进行垃圾回收。

在步骤 2 中的每次迭代结束时，我正在执行以下操作：

debug_zval_dump($lObj); 回声 gc_collect_cycles();

因此，我看到以下结果：

debug_zval_dump：引用计数（3） gc_collect_cycles：0

以上使我假设由于某种原因，对系统中某个位置保存的对象有一些过时的引用，但我无法仅通过检查代码来找到它们。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:00:20.293

简短的回答是你正在做的事情是不可能的。从一个变量中，不可能找出其他变量指向它（嗯，至少在 PHP 中是不可能的）。

我建议的是设置一个[Object Pool](http://sourcemaking.com/design_patterns/object_pool)。完成后，您“释放”该对象。这样，池就知道您是否可以重新使用该对象（如果有太多空闲对象，则将其丢弃）。

简而言之，内存管理需要跨多段代码协同工作。如果您在任一侧存储副本，您不能期望它们只是透明地工作。

就 而言`debug_zval_dump()`，我会非常谨慎地相信它。如果变量是引用，则需要通过引用传递（在 5.4+ 中不能再这样做了）。所以如果变量是一个引用，它总是会给你一个 refcount它为任何事情...

# php - 有没有办法让 cURL 等到页面的动态更新完成？

> ID：14625915
> 
> 赞同：12
> 
> 时间：2013-01-31T12:33:44.083
> 
> 标签：php, javascript, curl, dynamic-data

我在 PHP 中使用 cURL 获取页面。一切正常，但我正在获取页面的某些部分，这些部分是在页面加载后用 JavaScript 计算的。在 JavaScript 计算完成之前，cURL 已经将页面的源代码发送回我的 PHP 脚本，从而导致错误的最终结果。网站上的计算是由 AJAX 获取的，所以我无法以简单的方式重现该计算。此外，我无法访问目标页面的代码，因此我无法调整该目标页面以适应我的（cURL）获取需求。

有什么办法可以告诉 cURL 等到所有动态流量完成？这可能会很棘手，因为某些 JavaScript 会不断将数据发送回另一个域，这可能会导致长时间挂起。但至少我可以测试，如果我至少得到正确的结果。

Safari 中的“我的开发人员”工具栏表明该页面在大约 1.57 秒内完成。也许我也可以静态地告诉 cURL 等待 2 秒？

我想知道有什么可能性:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:36:45.957

cURL 不执行任何 JavaScript 或下载文档中引用的任何文件。所以 cURL 不能解决你的问题。

您必须在服务器端使用浏览器，告诉它加载页面，等待 X 秒，然后要求它为您提供 HTML。

看：[http://phantomjs.org/](http://phantomjs.org/)（你需要使用 node.js，我不知道任何 PHP 解决方案）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:42:25.993

不太了解您正在检索的页面或您想要包含的计算，但它可能是一个选项，可以直接卷曲到为这些 ajax 请求提供服务的 URL。使用 Firebug 之类的东西来检查在目标页面上进行的 Ajax 调用，您可以找出 URL 和传递的任何参数。如果您确实需要完整的网页，也许您可​​以同时卷曲网页和 Ajax URL 并将两者结合到您的 PHP 代码中，但随后它开始变得混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-18T08:56:10.743

使用 php 实现它有一种非常棘手的方法。如果你真的喜欢它为 php 工作，你可以将 Codeception 设置与 Selenium 结合使用，并在无头模式下使用 Chrome 浏览器 webdriver。

以下是使其正常工作的一些一般步骤。

1.  你确保你的 PHP 项目中有代码接收 [https://codeception.com](https://codeception.com)

2.  下载chrome webdriver： [https ://chromedriver.chromium.org/downloads](https://chromedriver.chromium.org/downloads)

3.  下载硒： [https ://www.seleniumhq.org/download/](https://www.seleniumhq.org/download/)

4.  相应地配置它，查看代码接收框架的文档。

5.  编写代码接收测试，您可以在其中使用表达式，例如`$I->wait(5)`等待 5 秒或`$I->waitForJs('js expression here')`等待 js 脚本在页面上完成。

6.  使用命令运行在上一步测试中编写的`php vendor/bin/codecept path/to/test`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-09T05:37:09.090

在彼得的建议和一些研究下。很晚了，但我找到了解决方案。希望有人觉得它有帮助。

您需要做的就是直接请求 ajax 调用。首先，在 chrome 中加载您想要获取的页面，转到 Network 选项卡，过滤 XHR。

现在你必须找到你想要的 ajax 调用。检查响应以验证它。

右键单击ajax调用的名称，选择复制->“复制为Curl（bash）”

[![网络选项卡](../Images/77f40811cb2cbc24c850b67e61a637f0.png)](https://i.stack.imgur.com/bkc5S.png)

转到[https://reqbin.com/curl](https://reqbin.com/curl)，粘贴 Curl 并单击运行。检查响应内容。

[![雷克宾](../Images/866dd5860c97f8bb65ed0a62db7767fc.png)](https://i.stack.imgur.com/M6HyA.png)

如果这是您想要的，请转到下一步。

仍然在 reqbin 窗口中，单击 Generate code 并选择要翻译的语言，您将获得所需的代码。现在可以根据需要集成到您的代码中。

一些提示：如果在您自己的服务器上运行测试返回 400 错误或根本没有：将 POSTFIELDS 设置为空。如果它返回 301 永久移动，请检查您的网址是否为 https。

# c# - HttpWebRequest 并行

> ID：14625917
> 
> 赞同：0
> 
> 时间：2013-01-31T12:33:46.557
> 
> 标签：c#, httpwebrequest, task-parallel-library

我需要向 REST 服务发送 40 个请求，并且我想我可能会尝试使其并行以节省一些时间，因为每个 http 请求需要接近一秒钟。

我在下面粘贴了一段我的代码（为了说明而简化）来展示我的方法。当我并行执行它时，大约 40 条消息中有 8 条返回状态代码 500 -“内部服务器错误”。如果我在“正常”foreach 循环中执行它，一切都很好。

我的问题是，我是否以错误的方式并行化/执行此操作，或者它可能是另一端的代码？

```
 Parallel.ForEach(Messages, message=>  
        try
        {
            //Create a HttpWebRequest, ie. request.GetRequestStream()
            HttpWebRequest httpWebRequest = request.GetWebRequest(uri, RequestType.PUT,message);

            using (var webResponse = (HttpWebResponse)httpWebRequest.GetResponse())
            {
                //You should make sure you read the response stream, even if you don't care about the response. 
                //This should help not producing too many lingering connections.
                new StreamReader(webResponse.GetResponseStream()).ReadToEnd();

                if (webResponse.StatusCode != HttpStatusCode.OK)
                {
                    lock (lockObject)
                    {
                        //Collect errors in a list
                        responses.Add("Something went wrong" + webResponse.StatusCode);
                    }
                }
            }
        }
        catch (WebException web)
        {
            var response = (HttpWebResponse)web.Response;
            lock (lockObject)
            {
               //Collect errors in a list
               responses.Add("Something went wrong" + webResponse.StatusCode); }
        }
        catch (Exception e)
        {
            lock (lockObject)
            {
                //Collect errors in a list
                responses.Addstring.Format("Unspecified Error:{0}", e)}); }
            }
        }); 
```

# linux-kernel - 分配大的 DMA 缓冲区

> ID：14625919
> 
> 赞同：6
> 
> 时间：2013-01-31T12:33:52.907
> 
> 标签：linux-kernel, dma

我想分配一个大的 DMA 缓冲区，大小约为 40 MB。当我使用`dma_alloc_coherent()`时，它失败了，我看到的是：

```
------------[ cut here ]------------
WARNING: at mm/page_alloc.c:2106 __alloc_pages_nodemask+0x1dc/0x788()
Modules linked in:
[<8004799c>] (unwind_backtrace+0x0/0xf8) from [<80078ae4>] (warn_slowpath_common+0x4c/0x64)
[<80078ae4>] (warn_slowpath_common+0x4c/0x64) from [<80078b18>] (warn_slowpath_null+0x1c/0x24)
[<80078b18>] (warn_slowpath_null+0x1c/0x24) from [<800dfbd0>] (__alloc_pages_nodemask+0x1dc/0x788)
[<800dfbd0>] (__alloc_pages_nodemask+0x1dc/0x788) from [<8004a880>] (__dma_alloc+0xa4/0x2fc)
[<8004a880>] (__dma_alloc+0xa4/0x2fc) from [<8004b0b4>] (dma_alloc_coherent+0x54/0x60)
[<8004b0b4>] (dma_alloc_coherent+0x54/0x60) from [<803ced70>] (mxc_ipu_ioctl+0x270/0x3ec)
[<803ced70>] (mxc_ipu_ioctl+0x270/0x3ec) from [<80123b78>] (do_vfs_ioctl+0x80/0x54c)
[<80123b78>] (do_vfs_ioctl+0x80/0x54c) from [<8012407c>] (sys_ioctl+0x38/0x5c)
[<8012407c>] (sys_ioctl+0x38/0x5c) from [<80041f80>] (ret_fast_syscall+0x0/0x30)
---[ end trace 4e0c10ffc7ffc0d8 ]--- 
```

我尝试了不同的值，看起来`dma_alloc_coherent()`不能分配超过 2^25 字节（32 MB）。

这么大的DMA缓冲区怎么分配？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T19:21:48.567

系统启动后`dma_alloc_coherent()`对于大分配不一定可靠。这仅仅是因为不可移动的页面会很快填满你的物理内存，使得大的连续范围变得罕见。长期以来，这一直是个问题。

方便的是，最近的补丁集可以帮助您，这是出现在内核 3.5 中的连续内存分配器。如果您使用的是内核，那么您应该能够传递`cma=64M`您的内核命令行，并且将保留那么多内存（只有可移动的页面会被放置在那里）。当您随后要求分配 40M 时，它应该可靠地成功。简单！

有关更多信息，请查看此 LWN 文章：

[https://lwn.net/Articles/486301/](https://lwn.net/Articles/486301/)

# linq - linq查询中的MaxId

> ID：14625921
> 
> 赞同：0
> 
> 时间：2013-01-31T12:33:58.720
> 
> 标签：linq

我正在原始创建一系列学生实体，但在分配顺序 ID 时遇到问题。我正在尝试分配下一个订单号，但所有学生都获得相同的订单号。

`newClass.Studends.AddRange( newStudents.Select(student=> new Student { name=student.name, orderid= student.AssociatedStudents.Max(as=>as.OrderId) + 1 }) );`

PS上面的代码不是原始代码，我尝试创建类似的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:39:19.650

尝试`+ i++`而不是仅仅`+1`. 我是说

```
int i=0;

    newClass.Studends.AddRange( newStudents.Select(student=> new Student { name=student.name, orderid= student.AssociatedStudents.Max(as=>as.OrderId) + i++ }) ); 
```

# android - 媒体播放器前进和后退问题

> ID：14625926
> 
> 赞同：0
> 
> 时间：2013-01-31T12:34:24.617
> 
> 标签：android, android-mediaplayer

在我的代码中，前进和后退（这些是按钮单击事件）在文件播放（停止）后工作。我的目标是在播放文件时前进/后退。

这是我的代码

```
 forward.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // get current song position                
            int currentPosition = mp.getCurrentPosition();
            // check if seekForward time is lesser than song duration
            if(currentPosition + seekForwardTime <= mp.getDuration()){
                // forward song
                mp.seekTo(currentPosition + seekForwardTime);
            }else{
                // forward to end position
                mp.seekTo(mp.getDuration());
            }

        }
    });
        backward.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // get current song position                
            int currentPosition = mp.getCurrentPosition();
            // check if seekBackward time is greater than 0 sec
            if(currentPosition - seekBackwardTime >= 0){
                // forward song
                mp.seekTo(currentPosition - seekBackwardTime);
            }else{
                // backward to starting position
                mp.seekTo(0);
            }
            // update timer progress again
            updateProgressBar();
        }
    });

private void playAudio(String path) 
{
    Log.i("play","riyasssss");
    playing_started=true;
    // Play song
            try {
                mp.reset();
                mp.setDataSource(path);
                mp.prepare();
                mp.start();

                // Changing Button Image to pause image
                play.setText("Puase");

                // set Progress bar values
                sb.setProgress(0);
                sb.setMax(100);

                // Updating progress bar
                updateProgressBar();            
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
}

/**
 * Update timer on seekbar
 * */
public void updateProgressBar() {
    mHandler.postDelayed(mUpdateTimeTask, 100);        
}   

/**
 * Background Runnable thread
 * */
private Runnable mUpdateTimeTask = new Runnable() {
       public void run() {
           long totalDuration = mp.getDuration();
           long currentDuration = mp.getCurrentPosition();

           // Displaying Total Duration time
           total_time.setText(""+utils.milliSecondsToTimer(totalDuration));
          // Displaying time completed playing
           current_time.setText(""+utils.milliSecondsToTimer(currentDuration));

           // Updating progress bar
           int progress = (int)(utils.getProgressPercentage(currentDuration, totalDuration));
           //Log.d("Progress", ""+progress);
           sb.setProgress(progress);

              if(current_time.getText().toString().equalsIgnoreCase(total_time.getText().toString()))
               {
                   //playingStarted=0;
                   play.setText("Play");

               }
               if(totalDuration<currentDuration)
               {
                   mHandler.postDelayed(this, 10000000);
                    System.out.println("time task waited !!!!!!!!!!!");

               }

           // Running this thread after 100 milliseconds
           mHandler.postDelayed(this, 100);
       }
    };

    ` 
```

请给我一个解决方案..Thanx提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T10:53:02.233

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
     {
          if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) 
            {
                 if(mp != null)
                 {
                     mHandler.removeCallbacks(mUpdateTimeTask);
                     mp.stop();
                    // mHandler.removeCallbacks(mUpdateTimeTask);
                     mp.release();`enter code here`
                 }
                 finish();
                 return true;
            }
            return super.onKeyDown(keyCode, event);
     } 
```

# android - Android imagebutton：如何删除图像周围的有色矩形？

> ID：14625937
> 
> 赞同：3
> 
> 时间：2013-01-31T12:34:50.847
> 
> 标签：android, imagebutton

我正在开发 Android 应用程序。我有一个包含很多图像按钮的主菜单，每个按钮都会将用户带到一个新的点击视图。

我遇到的问题是每个图标周围都是一个有色矩形，点击时会变成浅蓝色。如何删除 .xml 布局文件中的这个透明方块？

提前谢谢了，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:43:12.880

他们可能有安卓系统的默认背景。要删除它，请定义透明颜色

```
<color name="transparent">#00000000</color> 
```

然后将其用作按钮中的背景

```
<ImageButton android:src="@drawable/button"
             android:background="@color/transparent"/> 
```

我认为它会按照你想要的方式工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-06T09:04:55.097

你总是可以使用框架的

`android:background="@android:color/transparent"`

但是对于您要存档的内容，这是**更好的解决方案**：

`android:background="@null"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:37:08.537

我知道现在有矩形或颜色，当您使用自己的按钮时..创建，实现和使用它们，那么您将不会拥有矩形

# javascript - 从相关列表中删除记录，而不是从 salesforce 中的子对象中删除记录

> ID：14625944
> 
> 赞同：0
> 
> 时间：2013-01-31T12:35:04.667
> 
> 标签：javascript, salesforce, visualforce

我有两个自定义对象父和子。如果我删除父记录，与父记录相关的子记录不应该删除。同样，如果我从父记录的相关列表中删除记录，则不应从子对象中删除记录。我怎样才能做到这一点？谁能给我覆盖删除按钮的代码.....任何建议/提示都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:48:30.043

这是主从关系中的预期行为。孩子必须有父母。您可能会考虑的一个选项是 Summer '12 中的新“reparent”选项，您可以在子对象上设置该选项。这样，您可以在删除原始父级之前将子级移动到另一个父级。

# css - 桌子内的图像下方总是有一点空间

> ID：14625949
> 
> 赞同：10
> 
> 时间：2013-01-31T12:35:24.383
> 
> 标签：css

我将为想要现场观看的人提供直接链接。

只需将鼠标悬停在其中一个表格列表中，您就会看到图像下方总是有一个小空间。我已经尝试过填充、边距、搜索 stackoverflow 并使用了边框间距、边框折叠等，但到目前为止没有任何帮助。

我需要你的帮助。有什么问题，我错过了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T12:45:04.573

问题实际上不是表格，img 标签是内联元素，默认情况下具有底部间距（我猜是行高，不知道为什么）。

解决方案：`div.browseBuilds tr.browseBuilds_piece img { display: block; }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:45:07.190

将 display: 块添加到 img。

```
 .browseBuilds_piece img{
       display:block
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:50:45.887

看到[这个类似的问题](https://stackoverflow.com/questions/6975623/img-in-table-without-any-spaces)。因为`img`是内联元素，所以 HTML 源代码中标签周围的空格`img`很重要，并且将被显示。从代码中删除空格

```
<td style="vertical-align: middle;"><img src="./themes/default/images/builds/eski.jpg"></td> 
```

或将 显示`img`为块元素，正如[Michal 指出的那样](https://stackoverflow.com/a/14626127/1231686)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:39:02.760

用户 cellpadding="0" 和 cellspacing="0" 作为表格属性。

```
<table border="0" cellpadding="0" cellspacing="0" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T12:42:28.113

问题可能是单元格间距和单元格填充，但我不确定......这个东西的真正好工具是萤火虫，检查元素你会看到所有使用的样式等......或者尝试像你的 img 一样在 50px 上修复 td 高度

# php - PDO 使用命名参数准备生成错误的查询

> ID：14625952
> 
> 赞同：0
> 
> 时间：2013-01-31T12:35:46.830
> 
> 标签：php, pdo

> **可能重复：**
> [PHP PDO 语句可以接受表名作为参数吗？](https://stackoverflow.com/questions/182287/can-php-pdo-statements-accept-the-table-name-as-parameter)

我正在编写一个脚本，允许用户注册并登录到我的网站。我使用 PDO 准备和执行来防止 SQL 注入。

像这样手动构建查询确实有效：

```
$a_query = "SELECT COUNT(*) FROM ". $login_table . " 
WHERE `username` = ". $my_username . "  
AND `password = " . $my_hash ;
$result_1 = $db->prepare($a_query);
$result_1->execute(); 
```

但是当我尝试像这样正确使用准备时，它不会：

```
$a_query = "SELECT COUNT(*) FROM :table 
WHERE `username` = :name
AND `password = :pass ;"
$result_1 = $db->prepare($a_query);
$result_1->bindParam(":table", $login_table);
$result_1->bindParam(":name", $my_username);
$result_1->bindParam(":pass", $my_hash);
$result_1->execute(); 
```

我从 $result_1->errorInfo[2] 收到的错误消息如下：

```
You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax 
to use near ''customerlogin' WHERE `username` = 'guest' AND `password`
= 'qwerty' at line 1 
```

如您所见，prepare() 在将查询发送到 mysql 之前神秘地切掉了查询的第一部分。

谁能向我解释为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:41:33.187

> 如您所见，prepare() 在将查询发送到 mysql 之前神秘地切掉了查询的第一部分。

它不是。它只是实际执行此操作的错误消息处理程序，试图仅显示查询的相关部分。通常这样的错误消息意味着“查看此部分之前的查询”。`:table`所以 - 它在您的查询中指出。

您的查询不起作用，因为准备好的语句不支持标识符。

与任何其他原始 API 一样，PDO 不足以用于任何现实生活中的查询。开发人员应该在他们的应用程序代码中使用数据库抽象库方法，而不是原始 API 方法。

它将使生活更轻松，代码更短。例如，您的整个代码可以只写成 2 行：

```
$sql  = "SELECT COUNT(*) FROM ?n WHERE `username` = ?s AND `password = ?s";
$data = $db->getOne($sql, $login_table, $my_username, $my_hash); 
```

它比使用原始 PDO 的整个屏幕长代码更安全。

# c++ - Visual C++ 2012 cout 在运行时崩溃

> ID：14625963
> 
> 赞同：6
> 
> 时间：2013-01-31T12:36:26.730
> 
> 标签：c++, cout, ostream

我决定今天试试 Visual Studio 2012 Express。首先要做的是写“Hello world！” 应用程序，但是，我无法使其工作。我创建了一个 Windows 控制台应用程序项目，编写了标准代码，但它导致了运行时错误。

这是我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello world!" << endl;

    system("pause");
    return 0;
} 
```

看起来有些东西坏了（也许我错过了什么？）。它在第 7 行出现运行时错误：

[http://img443.imageshack.us/img443/7497/coutbroken.png](http://img443.imageshack.us/img443/7497/coutbroken.png)

请问有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T21:13:37.947

由于 DeadMG 的回答粗鲁而含糊：

Visual Studio 2012[默认以支持 SSE2 的机器为目标](http://msdn.microsoft.com/en-us/library/vstudio/7t5yh4fd.aspx)，其中几乎包括过去十年制造的所有处理器。不幸的是，您的 AMD Athalon XP 已经使用了 12 年，并且没有 SSE2，因此要运行您的程序，您需要禁用这些指令。

在 Visual Studio 2008（你没有这个）上，方法是打开“解决方案窗口”，右键单击项目 -> 属性 -> 配置属性 -> C++ -> 代码生成 -> 启用增强指令集。将此设置为“未设置”。

您有 Visual Studio 2012（我没有），因此您的说明会有所不同。官方说明是：打开项目的Property Pages对话框，选择C/C++文件夹，选择Code Generation属性页，修改Enable Enhanced Instruction Set属性。 [来源](http://msdn.microsoft.com/en-us/library/vstudio/7t5yh4fd.aspx)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-31T13:20:22.473

您的 CPU 急需被淘汰。您的编译器可能是为本世纪的 CPU 设置的。您也许可以禁用 SSE2 等较新的指令。

# c# - 使用 RegEx 从字符串中提取标题

> ID：14625965
> 
> 赞同：1
> 
> 时间：2013-01-31T12:36:29.927
> 
> 标签：c#, regex

我面临一个问题，因为必须从根本无法预测结构的小字符串中提取程序标题。您可以在下面看到一些模式，并且必须评估每个字符串以查看它是否与这些结构中的任何一个匹配，以使我能够正确获得标题。

我已经购买了 Mastering Regular Expressions，但是我必须完成这项工作的时间不允许我学习这本书并尝试对这个（有趣但特别的）主题进行必要的介绍。

Perharps，在这方面有经验的人可以帮助我了解如何完成这项工作？

```
Some random Name 2 - Ep.1   
=> Some random Name 2

Some random Name - Ep.1 
=> Some random Name

Boff another 2 name! - Ep. 228 
=> Boff another 2 name!     

Another one & the rest - T1 Ep. 2 
=>Another one & the rest

T5 - Ep. 2 Another Name     
=> Another Name 

T3 - Ep. 3 - One More with an Hyfen  
=> One More with an Hyfen

Another one this time with a Date - 02/12/2012   
=>Another one this time with a Date

10 Aug 2012 - Some Other 2 - Ep. 2 
=> Some Other 2

Ep. 93 -  Some program name
=> Some Program name    
Someother random name - Epis. 1 e 2
=> Someother random name

The Last one with something inside parenthesis (V.O.)
=> The Last one with something inside parenthesis 
```

正如您可能看到的，我想从给定字符串中提取的标题可能包含数字、特殊字符（如 &）和 a-zA-Z 中的字符（我猜就是这样）

复杂的部分出现在必须知道它是否在标题后有一个或多个空格并且后跟一个连字符以及在 Ep 之前是否有零个或多个空格时。（我无法解释，这很复杂。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:54:43.280

该程序将处理您的案件。主要原则是，如果存在于字符串的开头或结尾，它会删除某个序列。如果您要删除的字符串的格式将根据需要更改或更改它们的顺序，则您必须维护正则表达式列表。

```
 using System;
   using System.Text.RegularExpressions;

    public class MyClass
    {

        static string [] strs = 
        {       
               "Some random Name 2 - Ep.1",
               "Some random Name - Ep.1",
               "Boff another 2 name! - Ep. 228",
               "Another one & the rest - T1 Ep. 2",
               "T5 - Ep. 2 Another Name",
               "T3 - Ep. 3 - One More with an Hyfen",
               @"Another one this time with a Date - 02/12/2012",
               "10 Aug 2012 - Some Other 2 - Ep. 2",
               "Ep. 93 -  Some program name",
               "Someother random name - Epis. 1 e 2",
               "The Last one with something inside parenthesis (V.O.)"};

        static string [] regexes = 
        {
            @"T\d+",
            @"\-",
            @"Ep(i(s(o(d(e)?)?)?)?)?\s*\.?\s*\d+(\s*e\s*\d+)*",
            @"\d{2}\/\d{2}\/\d{2,4}",
            @"\d{2}\s*[A-Z]{3}\s*\d{4}",
            @"T\d+",
            @"\-",
            @"\!",
            @"\(.+\)",
        };

        public static void Main()
        {
            foreach(var str in strs)
            {
                string cleaned = str.Trim();
                foreach(var cleaner in regexes)
                {
                    cleaned = Regex.Replace(cleaned, "^" + cleaner, string.Empty, RegexOptions.IgnoreCase).Trim();  
                    cleaned = Regex.Replace(cleaned, cleaner + "$", string.Empty, RegexOptions.IgnoreCase).Trim();
                }
                Console.WriteLine(cleaned);
            }
            Console.ReadKey();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:20:11.560

如果它只是关于检查模式，而不是实际提取标题名称，让我试一试：

`@"Ep(is)?\.?\s*\d+"`您可以检查诸如“Ep1”、“Ep01”、“Ep.999”、“Ep3”、“Epis.0”、“Ep 11”等字符串（它还检测 Ep 和数字之间的多个空格）. `RegexOptions.IgnoreCase`如果要匹配“ep1”以及“Ep1”或“EP1”，您可能需要使用

如果您确定没有名称将包含“-”并且该字符将名称与剧集信息分开，您可以尝试像这样拆分字符串：

```
string[] splitString = inputString.Split(new char[] {'-'});
foreach (string s in splitString)
{
    s.Trim() // removes all leading or trailing whitespaces
} 
```

您将在其中一个`splitString[0]`或中拥有名称，`splitString[1]`在另一个中拥有剧集信息。

要搜索日期，您可以使用以下命令：`@"\d{1,4}(\\|/|.|,)\d{1,2}(\\|/|.|,)\d{1,4}"`它可以检测年份在前面或后面写有 1 到 4 位小数（中心值除外，它可以是 1 到 2 位小数）并用背面分隔-斜线、斜线、逗号或点。

就像我之前提到的：这将不允许你的程序提取实际的标题，只是为了找出这样的字符串是否存在（这些字符串可能仍然是标题本身的一部分）

**编辑：**

摆脱多个空格的一种方法是使用`inputString = Regex.Replace(inputString, "\s+", " ")`它用单个空格替换多个空格。也许你有下划线而不是空格？例如：“This_is_a_name”，在这种情况下，您可能希望`inputString = Regex.Replace(inputString, "_+", " ")`在删除多个空格之前使用。

# java - 远负回顾

> ID：14625969
> 
> 赞同：1
> 
> 时间：2013-01-31T12:36:45.297
> 
> 标签：java, regex

如何更改我的[模式](http://regexr.com?33k0v)以进一步查看字符串？

当单词“段落”在模式（alpha）后面时，匹配为假，否则为真。

因此，例如，这将有**5 个匹配项**：

> 代表 (a)、(b)、(c)、(d) 或 (e) (f) 段提及的任何人行事；

他们将是：`(a)` `(b)` `(c)` `(d)` `(e)`

这将有**0 个匹配项**：

> 代表(a)、(b)、(c)、(d)或(e)段提述的任何人行事；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:08:55.737

对于任何长度的简单回顾，这都是不可能的。Java regex 风格只允许有限长度的lookbehind（即你可以`(?<=x{2,10})`但不能`(?<=x*)`）。

如果您可以将问题简化为“单词`paragraph`不应该出现在 . 前面的 100 个字母中`(a)`”，那就行了：

```
(?<!paragraph.{0,100})\([a-z]\) 
```

如果您真的想要无限距离*，并且*您的正则表达式很灵活并且可以从输入的开头开始并且只匹配一个`(ref)`，您可以使用负前瞻（不必是有限的）来近似想要的行为：

```
^(?!.*?paragraph.*?\([a-z]\)).*?\([a-z]\) 
```

将匹配`test test (a)`但不匹配`paragraph test (a)`。

这是一个技巧，尽管维护起来可能会变得非常复杂，有缺点（比如只匹配一次），最终可能会有更好的方法来解决你的问题。例如，您可以匹配所有这些，`([a-z])`然后检查字符串是否包含`paragraph`，消除其位置之后的所有匹配项。

`Pattern.compile("[aA][bB][cC]")`PS：考虑使用`Pattern.compile("abc", Pattern.CASE_INSENSISIVE)`or代替`Pattern.compile("(?i)abc")`（如果整个正则表达式不区分大小写）或`Pattern.compile("(?i:abc)dEf")`（如果只是`abc`不区分大小写）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:15:04.050

你可以这样做：

（我忽略了案例密集部分，您可以自己添加）

```
".*Paragraph.*\\(a\\)" 
```

这是检查您的`FALSE`情况是否匹配。也就是，`(a)`前面`paragraph`有一个。

然后检查该行是否与上面的正则表达式匹配，如果为真，则跳过，如果为假，则接受。

用 grep 测试：（-v 用于显示不匹配的行）

```
kent$  cat test.txt
(a)
Paragraph (a)
(b) (c)
foo bar Paragraph (a) (b)
foo bar Paragraph (some) (a) (b)
foo bar (a) (b) Paragraph (c)

kent$  grep -v '.*Paragraph.*\(a\)' test.txt
(a)
(b) (c)
foo bar (a) (b) Paragraph (c) 
```

有一个小问题是，如果该行有 no`Paragraph`和 no `(a)`，也会匹配。我认为这也很容易通过以下方式在您的 java 程序中修复：

```
if (!m.find() && line.indexOf("(a)")>0) ...your match 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:30:18.823

你可以这样做：

```
// If "paragraph" (case insensitive) does not appear before any (<alpha>)
// It means that "paragraph" (case insensitive) will appear after one (<alpha>)
// OR it does not appear at all in the string.
if (!str.matches("(?s)(?:(?!\\([a-z]+\\)).)*(?i:paragraph).*")) {
    // Use the Matcher loop to extract the text that matches pattern "\\([a-z]+\\)"
    Pattern p = Pattern.compile("\\([a-z]+\\)");
    Matcher m = p.matcher(str);

    while (m.find()) {
        System.out.println(m.group());
    }
} 
```

`paragraph`在提取`(<alpha>)`所有`(<alpha>)`. 这适用于任何长度的字符串。

# animation - Cocos2d 如何使/运行动画更逼真

> ID：14625982
> 
> 赞同：0
> 
> 时间：2013-01-31T12:37:17.703
> 
> 标签：animation, cocos2d-iphone

简单动画 - 当 2 个物体发生碰撞时，第一个想法出现了。例如：玩家与对象 Bouncer 发生碰撞。会发生什么？

1.  播放器类开始弹跳动画
2.  Bouncer 类开始自我动画以通知用户弹跳开始

这是一个看起来不错的简单动画，但是，我知道如何为此添加更多真实感，我想问一下，真的可以这样做吗？

假设相同情况的球员与保镖相撞

1.  让玩家隐形
2.  在 Bouncer 类中开始动画（用 Player 和 Bouncer 运动绘制的动画帧（例如准备跳跃））
3.  在第 2 步中，玩家位置发生了变化，将玩家置于弹跳动画结束的位置
4.  让玩家可见
5.  开始跳跃

如果真的有可能，那么我认为这看起来会更现实。是否有任何示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:01:06.030

在 Cocos2D 中制作动画可能非常耗时。如果你在做矢量/像素工作，你必须为动画中的每一个变化创建一个框架，如果你没有太多的艺术背景，这可能会非常具有挑战性。我可以推荐一些类似[Adob​​e Flash](http://www.adobe.com/support/flash/downloads.html#flashCS6)的东西，它可以使动画过程半自动化。它具有将动画导出到帧（单个 PNG）的功能，可以使用 CCAnimation 和一些辅助类将其转换为动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:15:36.433

例如，您可以使用 After Effects 创建动画，生成一组 o 帧。然后你可以使用 Sprite Helper 之类的软件将动画嵌入到 cocos2d 中。

在您的项目中，您只需加载它并在需要时播放它。

[http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)

# mysql - 获取关于 SQL 中日期的平均值

> ID：14625986
> 
> 赞同：0
> 
> 时间：2013-01-31T12:37:38.000
> 
> 标签：mysql, sql, database

这是我的 sql 小提琴[http://sqlfiddle.com/#!2/9e6691/3](http://sqlfiddle.com/#!2/9e6691/3)

[第一季: 01] [第二季: 04] [第三季: 07] [第四季: 10]

我正在研究一个谷歌图表，我正在为单独的项目创建图表。图表由两条线组成。一行将提到该项目的 ratepersquarefeet。其他行想要获得关于四分和公共位置的平均值。

编码如下：

```
CREATE TABLE IF NOT EXISTS `ratepersqft` (
  `price_id` int(11) NOT NULL auto_increment,
  `project_id` int(11) default NULL,
  `date` varchar(255) default NULL,
  `rate_per_sqft` double default NULL,
  `common_location` varchar(255) default NULL,
  PRIMARY KEY  (`price_id`));

INSERT INTO `ratepersqft` (`price_id`, `project_id`, `date`, `rate_per_sqft`, `common_location`) VALUES
    (1, 26, '2012-01-17 ', 2800, 'ECR'),
    (2, 54, '2012-04-17 ', 1550, 'ECR'),
    (3, 53, '2012-07-17 ', 1850, 'ECR'),
    (4, 58, '2012-10-17 ', 4425, 'ECR'),
    (5, 85, '2012-01-17 ', 0, 'ECR'),
    (6, 114, '2012-04-17 ', 2650, 'ECR'),
    (7, 131, '2012-07-17 ', 2400, 'ECR'),
    (8, 134, '2012-10-17 ', 2900, 'ECR'),
    (9, 140, '2012-01-17 ', 2500, 'ECR'),
    (10, 368, '2012-04-17 ', 1650, 'ECR'),
    (11, 369, '2012-07-17 ', 1800, 'ECR'),
    (12, 370, '2012-10-17 ', 2000, 'ECR'),
    (13, 26, '2012-04-17 ', 2800, 'ECR'),
    (14, 26, '2012-07-17 ', 2800, 'ECR'),
    (15, 26, '2012-10-17 ', 2800, 'ECR'); 
```

例如。在小提琴中，我选择了项目 id 26 它在 ECR 中的常见位置

图表中的第一行将与该项目中的 ratepersquarefeet 相关。还有一些其他项目将 ECR 作为公共位置。我需要计算这些项目相对于上述日期的平均值。

例如。price_id: 1,5,9 每平方英尺的价格是 2800,0,2500 第一季度的平均值是 1766。同样我需要为每个季度计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:05:28.817

```
SELECT ROUND(avg(rate_per_sqft)) as RatePerSqFt 
  FROM ratepersqft
 WHERE common_location = 'ECR' AND
       1 <= MONTH(date) AND MONTH(date) <3  
       group by common_location
UNION
SELECT ROUND(avg(rate_per_sqft)) as RatePerSqFt 
  FROM ratepersqft
 WHERE common_location = 'ECR' AND
       3 <= MONTH(date) AND MONTH(date)<6  
       group by common_location
UNION
SELECT ROUND(avg(rate_per_sqft)) as RatePerSqFt 
  FROM ratepersqft
 WHERE common_location = 'ECR' AND
       6 <= MONTH(date) AND MONTH(date)<9  
       group by common_location
UNION
SELECT ROUND(avg(rate_per_sqft)) as RatePerSqFt 
  FROM ratepersqft
 WHERE common_location = 'ECR' AND
       9 <= MONTH(date) AND MONTH(date)<=12
       group by common_location; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:56:34.373

?

被接受的答案不只是一种令人费解的说法：

```
SELECT QUARTER(date) dt
     , common_location
     , ROUND(avg(rate_per_sqft)) as RatePerSqFt 
  FROM ratepersqft
 GROUP 
    BY dt
     , common_location  ; 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:57:36.663

您可以通过在子选择中按季度/位置计算平均值，然后再次加入表格来做到这一点。

这是我提出的查询：

```
select * 
from ratepersqft r
join (
    SELECT 
      quarter(`date`) as quarter, 
      year(`date`) as year, 
      avg(rate_per_sqft) as QuarterAverage,
      common_location
    FROM ratepersqft
    group by 
      quarter(`date`), 
      year(`date`),
      common_location
  ) averages
  on year(r.`date`) = averages.year
  and quarter(r.`date`) = averages.quarter
  and r.common_location = averages.common_location

WHERE project_id = 26 
```

SQL 小提琴：[http ://sqlfiddle.com/#!2/9e6691/23](http://sqlfiddle.com/#!2/9e6691/23)

# python - 如何防止 urllib2 跟踪 http 请求的重定向？

> ID：14625989
> 
> 赞同：0
> 
> 时间：2013-01-31T12:37:52.653
> 
> 标签：python, urllib2

我正在使用以下方法获取 HTTP 响应代码，但无法获取 3xx 响应代码。

```
import urllib2
for url in ["http://entrian.com/", "http://entrian.com/does-not-exist/"]:
    try:
        connection = urllib2.urlopen(url)
        print connection.getcode()
        connection.close()
    except urllib2.HTTPError, e:
        print e.getcode() 
```

如何禁用 urllib2 上的重定向处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:45:18.110

您可以创建[HTTPRedirectHandler](http://docs.python.org/2/library/urllib2.html#httpredirecthandler-objects)的子类型，以您想要的任何方式处理每个重定向响应代码。然后，您可以使用[urllib2.build_opener](http://docs.python.org/2/library/urllib2.html#urllib2.build_opener)将自定义重定向处理程序构建到开启程序中，并以这种方式覆盖默认重定向处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T12:52:04.987

这不是一个直接的答案 - 但在这种情况下，你最好使用[requests](http://pypi.python.org/pypi/requests)

```
import requests
for url in ["http://entrian.com/", "http://entrian.com/does-not-exist/"]:
    print requests.head(url).status_code 
```

# php - php联系表，感谢页面

> ID：14625995
> 
> 赞同：0
> 
> 时间：2013-01-31T12:38:08.013
> 
> 标签：php

以下是我的 php 联系表：

页面用户输入信息：

```
<div style="padding-left: 50px">
<p class="arial"><strong></strong><br /><br /></p>
<form action="freecontact2formprocess.php" method="post"> 
<table class="freecontact2form" border="0" width="400px">
<tbody>
<tr>
<td colspan="2"><span style="font-size: x-small;"> </span> <font color=#E42217 >Please ensure all card details are correct.</font>
  <br /><br /></td>
</tr>
<tr>
  <td valign="top"><table width="400px" class="freecontact2form">
    <tr>
      <td colspan="2"><br />
        <br />
        <div class="freecontact2formmessage"> </div></td>
    </tr>
    <tr>
  <td valign="top"><label for="subject_type" >Subject Type:<span class="required_star"> * </span></label></td>
  <td valign="top"><select name="subject_type" id="subject_type">
    <option selected="selected" value ="Maths">Maths</option>
    <option value ="English">English</option>
    <option value ="Biology">Biology</option>
    <option value ="Chemistry">Chemistry</option>
    <option value ="Physics">Physics</option>
    <option value ="History">History</option>
  </select></td>
</tr>

<tr>
  <td style="text-align:center" colspan="2"><br /><br /> <input src="../../images/submit1.png" name="submit" type="image"> <br /><br /> <!--      If you want to remove this author link,     please purchase an unbranded version from: http://www.freecontact2form.com/unbranded_form.php       Or upgrade to the professional version at: http://www.freecontact2form.com/professional.php     --> <br /><br /></td>
</tr>
  </table></td>
  <td valign="top">&nbsp;</td>
</tr>

</tbody>
</table>
</form> <br />
<p> </p>
<p> </p> 
```

这是 freecontact2formprocess.php：

```
if(isset($_POST['subject_type'])) {

    include 'freecontact2formsettings.php';

function died($error) {
    echo "Sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

if(!isset($_POST['subject_type']) ||
    !isset($_POST['testvariablealwaysset']) ||

    ) {
    died('Sorry, there appears to be a problem with your form submission.');        
}

$subjecttype_from = $_POST['subject_type']; // required

$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
mail($email_to, $email_subject, $email_message, $headers);
header("Location: $thankyou");
?>
<script>location.replace('<?php echo $thankyou;?>')</script>
<?php
}
die();
?> 
```

这是 freecontact2form 设置：

```
<?php

$email_to = "myemailaddress@emailaddress.com"; // your email address
$email_subject = "Subject type"; // email subject line

if ($subjecttype_from="Maths")
{
$thankyou = "http://www.google.com";
}
else
{
$thankyou = "http://www.yahoo.com"; // thank you page
}

// if you update the question on the form -
// you need to update the questions answer below
$antispam_answer = "25";

?> 
```

在 freecontact2formsetting 文件中，我设置了一个条件，即如果用户从下拉菜单中选择数学，则感谢页面设置为 google.com，如果选择了其他任何内容，它将转到 yahoo.com。目前，所有重定向都将转到 google.com，我如何确保当用户选择除数学以外的任何内容时，它会转到 yahoo.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:44:39.467

您正在分配而不是评估，将您的`if`陈述更改为：

`if ($subjecttype_from == "Maths")`

你也可以这样写：

```
$thankyou = ($subjecttype_from == "Maths") ? 'http://www.google.com' : 'http://www.yahoo.com'; 
```

通过查看您的代码，在评估您的语句`$subjecttype_from`时未定义。`if`在包含进行比较的文件之前分配变量，例如：

```
$subjecttype_from = $_POST['subject_type']; // required
include 'freecontact2formsettings.php'; 
```

# sql - 从 where 子句中的 case 语句返回条件

> ID：14625996
> 
> 赞同：0
> 
> 时间：2013-01-31T12:38:09.030
> 
> 标签：sql, sql-server, sql-server-2005

通过搜索多个 SO 线程，我无法编写在 where 子句中返回适当条件的查询。例如，我有列 Col1`int`和一个变量`var1`，就像`varchar`现在我在查询下面使用的一样，但它不起作用。

```
Where CASE WHEN var1 = '1' THEN (Col1 = 1)  
WHEN var1 = '2' THEN (Col1 = 2)  
ELSE AND (1= 1) 
END 
```

它给了我`syntax error near '='`。

编辑：

如果我想要这样的条件怎么办

Col1 IN（条件....）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:41:06.263

我认为应该是这样的；

```
Where Col1 = CASE WHEN var1 IN ('1','2') THEN var1 ELSE Col1 END 
```

或者

```
Where Col1 = CASE  var1 WHEN  '1' THEN 1
                        WHEN  '2' THEN 2
             ELSE Col1 END ... 
```

作为旁注， if*`Col1 is nullable`*和`need to select`those as well then 使用；

```
Where Col1 is null OR 
             Col1 = CASE  var1 WHEN  '1' THEN 1
                        WHEN  '2' THEN 2
             ELSE Col1 END ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:41:28.700

CASE 是一个返回值的表达式。它不适用于像 IF 这样的流逻辑控制（尽管类似的关键字在 VB 等某些语言中确实以这种方式工作）。尝试：

```
WHERE Col1 = CASE 
  WHEN var1 = '1' THEN 1
  WHEN var1 = '2' THEN 2 
  ELSE Col1
END 
```

这将按照您在尝试过的代码中的预期工作，*除非*Col1 为 NULLable。一种解决方法是不能出现在您的数据中的魔法值：

```
WHERE COALESCE(Col1, -1) = CASE
  ...
ELSE COALESCE(Col1, -1) END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:40:47.920

您需要将列放在案例之外：

```
where Col1 = case when var1 = '1' then 1
                  when var1 = '2' then 2
             end
      OR (var1 != '1' AND var1 != '2') 
```