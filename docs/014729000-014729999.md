# StackOverflow 问答 14729000-14729999

# google-app-engine - 尝试读取 *http.Response Body 时出现运行时错误，使用了 urlfetch.Transport

> ID：14729004
> 
> 赞同：2
> 
> 时间：2013-02-06T12:22:55.333
> 
> 标签：google-app-engine, facebook-graph-api, go

App Engine 不允许使用 DefaultClient，而是提供 urlfetch 服务。以下最小示例的部署和工作方式与预期的差不多：

```
package app

import (
    "fmt"
    "net/http"
    "appengine"
    "appengine/urlfetch"
    "code.google.com/p/goauth2/oauth"
)

func init () {
    http.HandleFunc("/", home)
}

func home(w http.ResponseWriter, r *http.Request) {
    c := appengine.NewContext(r)
    config := &oauth.Config{
        ClientId:     "<redacted>",
        ClientSecret: "<redacted>",
        Scope:        "email",
        AuthURL:      "https://www.facebook.com/dialog/oauth",
        TokenURL:     "https://graph.facebook.com/oauth/access_token",
        RedirectURL:  "http://example.com/",
    }

    code := r.FormValue("code")
    if code == "" {
        http.Redirect(w, r, config.AuthCodeURL("foo"), http.StatusFound)
    }
    t := &oauth.Transport{Config: config, Transport: &urlfetch.Transport{Context: c}}
    tok, _ := t.Exchange(code)
    graphResponse, _ := t.Client().Get("https://graph.facebook.com/me")

    fmt.Fprintf(w, "<pre>%s<br />%s</pre>", tok, graphResponse)
} 
```

使用正确的 ClientId、ClientSecret 和 RedirectURL，这将产生以下输出（为简洁起见进行了编辑）：

```
&{AAADTWGsQ5<snip>kMdjh5VKwZDZD  0001-01-01 00:00:00 +0000 UTC}

&{200 OK %!s(int=200) HTTP/1.1 %!s(int=1) %!s(int=1) 
map[Connection:[keep-alive] Access-Control-Allow-Origin:[*] 
<snip>
Content-Type:[text/javascript; charset=UTF-8] 
Date:[Wed, 06 Feb 2013 12:06:45 GMT] X-Google-Cache-Control:[remote-fetch] 
Cache-Control:[private, no-cache, no-store, must-revalidate] Pragma:[no-cache] 
X-Fb-Rev:[729873] Via:[HTTP/1.1 GWA] Expires:[Sat, 01 Jan 2000 00:00:00 GMT]] 
%!s(*urlfetch.bodyReader=&{[123 34 105 100 <big snip> 48 48 34 125] false false}) 
%!s(int64=306) [] %!s(bool=true) map[] %!s(*http.Request=&{GET 0xf840087230 
HTTP/1.1 1 1 map[Authorization:[Bearer AAADTWGsQ5NsBAC4yT0x1shZAJAtODOIx0tZCb
TYTjxFC4esEqCjPDi3REMKHBUjZCX4FIKLO1UjMpJxhJZCfGFcOJlFu7UvehkMdjh5VKwZDZD]]
  0 [] false graph.facebook.com map[]  map[]   })} 
```

看起来我*似乎*一直在收到 *http.Response，所以我希望能够从响应正文中读取。但是，任何提及 Body - 例如：

```
defer graphResponse.Body.Close() 
```

编译，部署，但导致以下运行时错误：

```
panic: runtime error: invalid memory address or nil pointer dereference
runtime.panic go/src/pkg/runtime/proc.c:1442
runtime.panicstring go/src/pkg/runtime/runtime.c:128
runtime.sigpanic go/src/pkg/runtime/thread_linux.c:199
app.home app/app.go:33
net/http.HandlerFunc.ServeHTTP go/src/pkg/net/http/server.go:704
net/http.(*ServeMux).ServeHTTP go/src/pkg/net/http/server.go:942
appengine_internal.executeRequestSafely go/src/pkg/appengine_internal/api_prod.go:240
appengine_internal.(*server).HandleRequest go/src/pkg/appengine_internal/api_prod.go:190
reflect.Value.call go/src/pkg/reflect/value.go:526
reflect.Value.Call go/src/pkg/reflect/value.go:334
_ _.go:316
runtime.goexit go/src/pkg/runtime/proc.c:270 
```

我错过了什么？这是因为使用了 urlfetch 而不是 DefaultClient 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:21:52.727

好的，这当然是我自己的愚蠢错误，但我可以看到其他人如何落入同样的陷阱，所以这里是解决方案，由 Andrew Gerrand 和 Kyle Lemons 在[这个 google-appengine-go 主题](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-go/sDgMr3TcVpI)中提出（谢谢大家）。

首先，我没有处理对 favicon.ico 的请求。这可以通过按照[此处](https://developers.google.com/appengine/kb/general#erroruris)的说明并向 app.yaml 添加一个部分来解决：

```
- url: /favicon\.ico
  static_files: images/favicon.ico
  upload: images/favicon\.ico 
```

这修复了 favicon 请求的恐慌，但不解决对“/”的请求的恐慌。问题是，我假设 http.Redirect 会在那时结束处理程序的执行。它没有。需要的是重定向后的 return 语句或 else 子句：

```
code := r.FormValue("code")
if code == "" {
    http.Redirect(w, r, config.AuthCodeURL("foo"), http.StatusFound)
} else {
    t := &oauth.Transport{Config: config, Transport: &urlfetch.Transport{Context: c}}
    tok, _ := t.Exchange(code)

    fmt.Fprintf(w, "%s", tok.AccessToken)
    // ...
} 
```

我当然不建议忽略错误，但这会按预期部署和运行，生成有效令牌。

# c - 我想让接受系统调用为非阻塞。如何将接受系统调用设为非阻塞？

> ID：14729007
> 
> 赞同：3
> 
> 时间：2013-02-06T12:23:15.683
> 
> 标签：c, linux

这是我正在使用的声明：

```
m_stat_arr_nClient_sockfd[nIndex]= accept(nServerSocket,(struct sockaddr *)&client_address, (socklen_t *)&client_len); 
```

这是一个阻塞调用，那么我怎样才能使它成为非阻塞调用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:28:08.607

你必须[`fcntl`](http://linux.die.net/man/2/fcntl)用来设置你的`nServerSocket`非阻塞；

```
int flags = fcntl(nServerSocket, F_GETFL, 0);
fcntl(nServerSocket, F_SETFL, flags | O_NONBLOCK); 
```

完成此操作后，`accept()`对该套接字的调用不应再阻塞。

# javascript - 通过重定向加载html页面以从javascript加载图像

> ID：14729016
> 
> 赞同：0
> 
> 时间：2013-02-06T12:23:30.570
> 
> 标签：javascript, html

我有一个场景，我通过以下方式从 javascript 加载图像：类似于：

```
<script type ="javascript" >
var img1=new Image(1,1);
img1.src='img2.jpg';
</script> 
```

现在的要求是将对图像的调用重定向到一个 html 页面，该页面将进一步加载 3-4 个图像（用于跟踪目的）。但是我在 chrome 中收到警告，并且可以从 html 页面加载图像。

> 资源解释为图像，但使用 MIME 类型 text/html 传输：

请让我知道是否有解决此问题的方法。

要求：我们正在发送调用以通过 javascript 获取图像到服务器，但我们想加载 html 页面，该页面有一堆要加载的图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:29:30.153

如果我理解你所做的正确，那么标签的`src`属性`img`需要一个图像类型的响应，例如`image/jpg`。你给一个页面，所以响应是 type `text/html`。

# ios - drawInRect：失去图像分辨率的质量

> ID：14729021
> 
> 赞同：18
> 
> 时间：2013-02-06T12:23:45.890
> 
> 标签：ios, cocoa-touch, uiimage, quartz-graphics, cgcontext

我正在尝试使用以下代码擦除图像

```
 CGColorRef strokeColor = [UIColor whiteColor].CGColor;

 UIGraphicsBeginImageContext(imgForeground.frame.size);

 CGContextRef context = UIGraphicsGetCurrentContext();
 [imgForeground.image drawInRect:CGRectMake(0, 0, imgForeground.frame.size.width, imgForeground.frame.size.height)];

 CGContextSetLineCap(context, kCGLineCapRound);
 CGContextSetLineWidth(context, 10);

 CGContextSetStrokeColorWithColor(context, strokeColor);
 CGContextSetBlendMode(context, kCGBlendModeClear);

 CGContextBeginPath(context);
 CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
 CGContextAddLineToPoint(context, currentPoint.x, currentPoint.y);
 CGContextStrokePath(context);

 imgForeground.image  = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext(); 
```

但我只是发现 Image 由于**drawInRect**而失去了分辨率。

![前](../Images/fda71a75fb8dc3f11ead9bb8ae491de3.png) ![后](../Images/e5aa9c1728302bf806f800b8fbca60cb.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-06T12:41:29.230

您应该使用`UIGraphicsBeginImageContextWithOptions`而不是`UIGraphicsBeginImageContext`，以便可以指定比例因子。

例如，这将使用设备主屏幕的比例因子：

```
UIGraphicsBeginImageContextWithOptions(imgForeground.frame.size, NO, 0); 
```

# asp.net-mvc-4 - 在 ASP.NET MVC4 中使用 System.Web.Providers 创建新用户

> ID：14729023
> 
> 赞同：0
> 
> 时间：2013-02-06T12:23:51.207
> 
> 标签：asp.net-mvc-4, system.web, createuser

我已经能够调用`Membership.CreateUser`which 在我的数据库中创建了必要的 Membership 表，但是它没有将新创建的用户添加到`Users`表中并且`MembershipCreateStatus = InvalidAnswer`- 不确定这意味着什么。

```
public void Register(Register register)
        {
            var member = new System.Web.Providers.DefaultMembershipProvider();
            object guid = Guid.NewGuid();
            MembershipCreateStatus status;

            member.CreateUser(register.Username, register.Password, "", "", "", true, guid, out status);

        } 
```

配置：

```
<profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:09:09.473

这里的答案是基于我们的讨论。

我假设您已在您的评论中指定了`web.config`这`enablePasswordRetrieval="false"`一点

然后此代码将为您工作

```
try
{
    object guid = Guid.NewGuid();
    MembershipCreateStatus status;
    MemberShipUser member = Membership.CreateUser(register.Username, register.Password, "an email address here", null, null, true, guid, out status);
}
catch(MembershipCreateUserException ex)
{
    //handle exceptions
} 
```

# asp.net - 用户代码未处理 argumentnullexception

> ID：14729025
> 
> 赞同：0
> 
> 时间：2013-02-06T12:23:53.510
> 
> 标签：asp.net, exception, null, argumentnullexception

在 ASP.NET 应用程序中，将数据从 Excel 工作表上传到网站时出现错误

```
 System.ArgumentNullException: Value cannot be null. 
```

源错误：

```
Line 161:                LHSupdate.Name = AssociateName;
Line 162:
Line 163:                var designation = dsData.Tables["LHS"].AsEnumerable().Where(r => Convert.ToString(r["Associate Id"]).Trim() == LHSupdate.AssciateID.Trim());
Line 164:
Line 165:                if (designation != null) 
```

源文件：D:\GENIUS\LHS\LHS\UpdateLHS.aspx.cs 行：163

堆栈跟踪：

```
[ArgumentNullException: Value cannot be null.
Parameter name: source]
   System.Data.DataTableExtensions.AsEnumerable(DataTable source) +34903
   LHS.Login.btnfileUplode_Click(Object sender, EventArgs e) in D:\GENIUS\LHS\LHS\UpdateLHS.aspx.cs:163
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

我应该怎么做才能成功运行。请进一步咨询

# android - 在 IntelliJ IDEA 12 中使用 Facebook Android SDK 时似乎没有获得 Facebook SDK 资源

> ID：14729026
> 
> 赞同：6
> 
> 时间：2013-02-06T12:23:55.240
> 
> 标签：android, intellij-idea, facebook-android-sdk

根据文章[**Add facebook SDK to IntelliJ Android project?**](https://stackoverflow.com/questions/7262221/add-facebook-sdk-to-intellij-android-project) ，我选择将“ **facebook.jar** ”文件作为模块添加到项目结构的“ **Dependencies ”部分中。**编译过程工作正常。但是，当我尝试使用“会话登录”登录 facebook 时，我收到如下运行时错误消息：

```
02-06 20:15:56.648: ERROR/AndroidRuntime(5891): FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: com.facebook.android.R$layout
    at com.facebook.LoginActivity.onCreate(LoginActivity.java:55)
    at android.app.Activity.performCreate(Activity.java:4524)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2115)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2189)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4894)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

看起来 facebook.jar 不包含 facebook sdk 中提供的布局资源本身？不知道我是对还是错。我确实导入了当前项目并通过 eclipse 构建和运行我的应用程序，它就像一个魅力。一切都完美无缺。但是，作为 IntelliJ IDEA 的支持者，我想寻求是否有人可以为这个问题提供解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T15:40:57.720

OK, finally got the facebook android SDK worked for me. Here are the order of steps I did.

1.  Open up and be in your current android project then select `File` | `New Module`
2.  Choose "`Library Module`" on the left-side panel.
3.  Fill in the required information on the right-side panel. Here I just given the:

    *   `Module name`: "facebook"
    *   `Content root`: Choose where the downloaded facebook android SDK is, and be sure to select the subfolder named "facebook"
        ![select facebook subfolder](../Images/1c9de74aa704765682a2dcb61353d241.png)

    *   `Module file location`: same as Content root
        ![New Module Window in IntelliJ IDEA 12](../Images/a7830f0f8da076420803015b9de52cc7.png)
    *   `Package name`: com.facebook.android (**Guess could assign arbitrarily?**)
4.  Click `finish` button and wowla~ you got the facebook android sdk module in your project.
5.  Go to `File` | `Project Structure` then select the `Modules` pages at the left panel
    ![enter image description here](../Images/c8be0fcf94a11354d1b4236c8289332d.png)
6.  Select your original android project, Click Plus(Add) button to add a new `Module Dependency`, you will see the facebook module we created above just shown for selection. Select it.
7.  Click the apply, OK button. Then you got the facebook android SDK worked flawlessly in you android application. Congrats!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T00:43:14.703

我有同样的问题，但我正在使用 eclipse，所以我使用 eclipse 解决这个问题的步骤：

将 facebook sdk 导入工作区后的 1-in eclipse 右键单击​​ FacebookSDk 库，然后选择属性或按 Alt + 输入 2 - 从 Leth 选择“Java 构建路径”，然后转到“库”选项卡

![在此处输入图像描述](../Images/2a94e1ed602460c09eeb177476fe4f9f.png)

3-单击“添加外部jar”然后转到facebook sdk路径或位置选择libs文件夹添加android-support-v4文件和bolts文件
现在你完成了你很高兴

我希望这能停止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T17:58:45.783

Cloud 的解决方案对我不起作用，所以我将在下面发布我的解决方案。具体来说，我的不起作用，因为我已经在使用 appcompat 支持库，所以这在这种情况下特别有用。

**如果您已经在使用 APPCOMPAT 支持库**，请仅执行突出显示的步骤。

1.  单击`File`-> `Project Structure`-> `Modules`。单击`green +`-> `Import module`。从 中选择`facebook`文件夹`facebook SDK`并单击`OK`。
2.  选择`Create module from existing sources`-> `Next`-> `Next`。

> 3.  单击`split (the pink/blue button at the top)`。输入 -> 选择- > `FacebookDependencies`。取消选中另一个（库？）。`Name``bolts..``OK`

4.  单击`Next`-> `Next`-> `Finish`。

> 5.  单击`green +`右侧的 -> `2\. Library`->（包含您的 android-support-v4.jar 的库 - 您可以在`Libraries` 左侧的页面中查看）-> `Add Selected`。
>     
>     
> 6.  单击`green +`右侧的 -> `3\. Module Dependency`-> `appcompat`-> `OK`。

7.  单击`your module`。

8.  单击`green +`右侧的 -> `2\. Library`-> `FacebookDependencies`（或之前在步骤 3 中使用的任何名称）-> `Add Selected`。

9.  单击`green +`右侧的 -> `3\. Module Dependency`-> `facebook`-> `OK`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-31T13:15:03.520

一种更简单的方法是将 Facebook SDK 作为 AAR 库导入 Android 应用的 Gradle 构建中。为此，我建议不要重新发明轮子，而是使用 facebook-api-android-aar 项目（请参阅[https://github.com/mente/facebook-api-android-aar](https://github.com/mente/facebook-api-android-aar)）。正如该项目的文档（在 README.md 文件中）中所解释的，简单的方法是使用 Facebook SDK 的预构建 Maven 工件，方法是在应用程序的 build.gradle 文件中添加以下代码：

```
buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:+'
    }
}

repositories {
    mavenCentral()
    mavenLocal()
    maven {
        url "http://mente.github.io/facebook-api-android-aar"
    }
}

apply plugin: 'android'
dependencies {
    compile ('com.facebook:facebook-android-sdk:+@aar') {
        transitive = true
    }

    // other dependecies definition here
}

android {
   //android build setup
} 
```

而已。请注意，此工具支持 Facebook SDK 的 3.0.2、3.5.0、3.5.2、3.6.0、3.7.0、3.8.0、3.14.1、3.15.0、3.16 版本。

再见

# c - 从 C 中的 ASCII 格式文件解析数据

> ID：14729035
> 
> 赞同：2
> 
> 时间：2013-02-06T12:24:09.553
> 
> 标签：c, parsing, matrix

我正在尝试执行此处已完成的操作[Read co-ordinates from a txt files using C Program](https://stackoverflow.com/questions/1037219/read-co-ordinates-from-a-txt-files-using-c-program)。我尝试输入的数据采用以下格式：

```
f 10 20 21
f 8 15 11
. . .  .
f 11 12 25 
```

我的点结构的唯一区别是我有一个额外的字符来存储第一列中的字母（可能是也可能不是字母 f）。我想我要么声明我的字符错误，要么我错误地调用它`printf`。无论哪种方式，我只读取第一行，然后我的程序终止。有任何想法吗 ？

下面是我的 MWE

```
#define FILEPATHtri "/pathto/grid1DT.txt"
#define FILEPATHorg "/pathto/grid1.txt"
#define MAX  4000

#include <stdio.h>
#include <stdlib.h>
#include "math.h"

typedef struct
{    
    float x;
    float y;
    float z;
    char t[1];
}Point;

int main(void) {

    Point *points = malloc( MAX * sizeof (Point) ) ;

    FILE *fp ;
    fp = fopen( FILEPATHtri,"r");

int i = 0;

while(fscanf(fp, "%s %f %f %f ", points[i].t, &points[i].x, &points[i].y, &points[i].z ) == 4 )
{
    i++;
}
fclose(fp);

int n;

for (n=0; n<=i; n++){

    printf("%c  %2.5f %2.5f %2.5f \n", points[i].t, points[n].x, points[n].y, points[n].z ); }

    printf("There are i = %i  points in the file \n And I have read n = %i  points ",i,n);

return 0;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T12:27:01.290

由于那里只有 1 个字符，而不是字符串，只需在代码中使用单个字符：

```
 char t;
}Point; 
```

然后，当您阅读它时：

```
while(fscanf(fp, "%c %f %f %f ", &points[i].t, &points[i].x, &points[i].y, &points[i].z ) == 4 )
{ 
```

我会注意到，在结构的末尾有一个 1 字符的数组，可以让你为[struct hack](http://c-faq.com/struct/structhack.html)做好准备，这可能不是你的意图......一个很好的理由使用 just`char t`而不是`char t[1]`

还有这一行：

```
for (n=0; n<=i; n++){ 
```

应该

```
for (n=0; n<i; n++){ 
```

最后一点......如果你想打印出你在底部打印中读到的字符，你应该使用`n`：

```
// note your previous code was points[i].t
printf("%c  %f %f %f \n", points[n].t, points[n].x, points[n].y, points[n].z ); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:36:48.853

检查这个

```
 while(fscanf(fp, "%c %f %f %f ", points[i].t, &points[i].x, &points[i].y, &points[i].z ) == 4 )
    {
    i++;
}
fclose(fp);

int n;

for (n=0; n<i; n++){

    printf("%c  %2.5f %2.5f %2.5f \n", points[n].t, points[n].x, points[n].y, points[n].z ); }

    printf("There are i = %i  points in the file \n And I have read n = %i  points ",i,n);
getch();
return 0;

} 
```

修改是因为只有一个字符被读取`%s`修改为`%c`也在 printf 它不是`points[i].t`它的`points[n].t`。此外，for循环中的限制检查也被更正为`n<i`

# java - neo4j 慢 lucene 索引查询

> ID：14729037
> 
> 赞同：2
> 
> 时间：2013-02-06T12:24:11.970
> 
> 标签：java, neo4j, cypher

我正在从我的 neo4j 数据库中的索引中检索数据，但我在执行时间方面遇到了一些问题。我正在尝试一个查询，我只计算结果值。在我的生产数据库中，我正在做更复杂的计算。无论如何，我的查询看起来像这样，

```
START person = node:user_index('muncipalityCode:(1278 OR 1285 OR 1283 OR 1293 OR 1284 OR 1261 OR 1282 OR 1262 OR 1281 OR 1280 OR 1273) ')
return count(person) 
```

计数在大约 20 秒内返回 278418（第二次为 2.5-3 秒，当缓存处于热状态时）。当然，我要返回一个相当大的数据集。然而，它并不是巨大的。

有没有什么地方可以减少这个瓶颈或我应该研究的一些配置设置？我尝试在启动时预热缓存，但我无法将所有数据放入生产服务器上的 ram 中，因此适得其反（我的服务器有 16GB RAM）。

我的数据库具有以下属性。10 329 245 个节点 97 923 564 个属性 50 697 532 个关系

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:18:04.090

我会使用[Luke](http://code.google.com/p/luke/)来验证问题是在索引中还是在代码的其他地方。如果相应的 Luke 查询很快，那么问题可能出在其他地方。

# iphone - * 和 & 是什么意思

> ID：14729040
> 
> 赞同：-5
> 
> 时间：2013-02-06T12:24:22.597
> 
> 标签：iphone, ios, objective-c, xcode

今天我阅读了 Carlo Chung 的“iOS 的 Pro Objective-C 设计模式”。所以我阅读了适配器模式并看到了在协议中声明的这个方法：

```
-(void) command: (SetStrokeColorCommand *) command
        didRequestColorComponentsForRed: (CGFloat *) red
                                  green: (CGFloat *) green
                                   blue: (CGFloat *) blue; 
```

您可以在本书的第 115 页上看到它。比使用的这种方法

```
[delegate_ command:self didRequestColorComponentsForRed: &redValue
                                                  green: &greenValue
                                                   blue: &blueValue]; 
```

然后在第 118 页声明此方法

```
-(void) command: (SetStrokeColorCommand *) command
        didRequestColorComponentsForRed: (CGFloat *) red
                                  green: (CGFloat *) green
                                   blue: (CGFloat *) blue
 {
  *red = [redSlider_ value];
  *green = [greenSlider_ value];
  *blue = [blueSlider_ value];
 } 
```

声明中的 * 是什么意思 (*red, *green, *blue) 和 & (&redValue...) 是什么意思？我看到 & 代码中只有 &error 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:31:18.483

`*`是指针声明符或取消引用运算符。在声明中，* 表示指针变量。

`&`是地址运算符。

边注：

在尝试更高级的书籍之前，您应该学习语言的基础知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:57:32.810

正如一些人所指出的，这些与指针有关。有大量关于此的信息，但是，如果您是新手，您可能会发现它有点混乱。

指出你需要知道的...

大多数时候你有一个函数的输入和输出。

```
- (int)roundMyFloat:(float)float; 
```

这里输入是浮点数，输出是整数。

有时您需要一个方法的多个输出。一种常见的情况是您可能希望返回错误代码以及成功参数。

```
- (BOOL)doSomthing:(NSError**)error; 
```

你会这样使用它......

```
NSError* error = nil;
BOOL sucess = [myInstance doSomething:&error];
if (!sucess) 
{
     NSLog(@"Error: %@", error);
} 
```

您将传入`error`作为“输出参数”。的代码`doSomthing`将接受您的错误并在需要时填写信息。

您需要`*`在方法声明中用两个 's声明错误参数，`(NSError**)`因为您说您想要一个指向错误对象的指针，而错误对象实际上是一个指针本身 - 所以它是一个指向指针的指针。

当您将错误传递给方法`[myInstance doSomething:&error];`时，您使用`&`符号表示“获取我的错误对象的内存地址”。

在您的示例中`red` `green`，并且`blue`是输出参数。该方法`didRequestColorComponentsForRed`正在更改您传递给它的值。与`NSError`示例不同，`red` `green`它们`blue`不是对象，因此它们只需要在方法声明中加一颗星。这表示“接受指向`CGFloat`值的指针作为参数”。

当您调用该`didRequestColorComponentsForRed`方法时，您使用符号传递颜色组件，`&`就像在 NSError 示例中一样。这表示获取我的`CGFloat`值的内存地址并将其传递给函数。

现在不要太担心`&`and`*`语法 - 只要记住它的用途（输出参数）。您最终应该阅读它以解决它（实际上它很酷！）。

希望这会有所帮助——不要害怕提问。

# php - php老虎机积分

> ID：14729047
> 
> 赞同：0
> 
> 时间：2013-02-06T12:24:45.827
> 
> 标签：php, forms, get, credits

嘿，我正在制作一台老虎机，几乎完成了。我唯一需要的是留下信用，所以它只是在信用上加分。就像如果我有 100 个学分然后得到 25 个学分，我希望它说 125 个学分。现在我不知道如何从之前的回合中获得学分。
这就是我得到的：

```
 <?
    $tal = rand (1,3 ); {
    echo "<img src='css/billeder/enarmet$tal.gif' class=billed />"; 
    $tal2 = rand (1,3 ); 
    echo "<img src='css/billeder/enarmet$tal2.gif' class=billed />"; 
    $tal3 = rand (1,3 ); 
    echo "<img src='css/billeder/enarmet$tal3.gif' class=billed />"; }
    ?>
            </div>
            <div id="credits">
                <h3 id="credits2">CREDITS</h3>
                <h3 id="credits3"><?php 
                $credits=$_GET['credits'];
        if ($tal . $tal2 . $tal3 == 111){
            ($credits=($credits+100));              
        }
        if ($tal . $tal2 . $tal3 == 222){
            ($credits=($credits+50));                
        }
        if ($tal . $tal2 . $tal3 == 333){
            ($credits=($credits+25));               
        }
        echo $credits;
        ?></h3>
            </div>
        </div>
        <form action="index.php" method="POST">
            <input type="submit" value="SPIN" class="knap">
        </form> 
        <form action="cashout.php" method="POST">
            <input type="submit" value="CASH OUT" class="knap">
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:31:07.210

使用会话怎么样？使用会话存储存储和检索信用

```
session_start();
$credits = $_SESSION['credits']; 
```

在脚本的顶部和

```
$_SESSION['credits'] = $credits; 
```

在底部。

这种方式将在页面加载之间保留积分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T12:31:30.040

您可以删除以下行末尾的花括号，不需要并尝试一下。

```
<?
    $tal = rand (1,3 ); { // remove the open brace
    echo "<img src='css/billeder/enarmet$tal.gif' class=billed />"; 

...

echo "<img src='css/billeder/enarmet$tal3.gif' class=billed />"; } // remove the close brace
    ?> 
```

# c# - 多个 Windows 用户使用单个 UDP 端口登录

> ID：14729051
> 
> 赞同：0
> 
> 时间：2013-02-06T12:24:54.177
> 
> 标签：c#, asp.net

**要求** *（不能修改）*

我有一个 Windows 窗体应用程序。当这个应用程序运行时，它会监听一个 UDP 端口。

用户可以登录windows打开同一个应用程序运行，然后切换windows用户不注销打开同一个应用程序运行。

**问题**

两个应用程序通过使用监听同一个端口

```
SocketOptionName.ReuseAddress 
```

如这个[线程](https://stackoverflow.com/questions/9120050/connecting-two-udp-clients-to-one-port-send-and-receive)所示。但只有一个人可以获得数据。

**问题**

有什么方法可以让另一个用户的应用程序读取数据？否则，我可以以某种方式收听通知我有关 Windows 用户切换的事件吗？

*编辑*

这是用于设置侦听器的代码

```
IPEndPoint localEndPoint = new IPEndPoint(localAddress, listenPort);
UdpClient udpListener = new UdpClient();
udpListener.ExclusiveAddressUse = false;
udpListener.Client.SetSocketOption(SocketOptionLevel.Socket,SocketOptionName.ReuseAddress, true);

udpListener.Client.Bind(localEndPoint);
IPEndPoint ep = new IPEndPoint(IPAddress.Any, 0);
byte[] answer = udpListener.Receive(ref ep); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:04:35.510

一种选择是切换到广播/多播设计。这是允许同一个数据报进入多个套接字的唯一直接方法。

或者，转到主/客户设计。尝试绑定到端口。如果可以，太好了，你就是大师。如果失败，请查看是否有 master 并连接到它。

选择第二个端口供 master 用于与客户端通信。遵循这个逻辑。

1.  尝试打开端口。如果你成功了，你就是大师。还要监听主端口。

2.  如果失败，请打开一个随机端口。向主机发送“注册客户端”数据报。

3.  主机必须在主机/客户端端口上侦听“注册客户端”数据报。如果它收到一个，它应该将源 IP 和端口添加到它的客户端列表中。它必须将它在主端口上接收到的所有数据报转发给它的每个客户端。

4.  非主设备应以定义的时间间隔重复“注册客户端”数据报。主机应该丢弃任何在足够长的时间内没有发送“注册客户端”数据报的客户端，比如定义间隔的两倍。

丑陋的一点——如果主人可能退出，一些客户将不得不提升自己成为主人。如果您可以在机器上运行它，您可能只想使用专用的主控器。

# asp.net - Http Handler 在 iis express 中工作，在 iis 服务器中不工作

> ID：14729053
> 
> 赞同：4
> 
> 时间：2013-02-06T12:24:56.813
> 
> 标签：asp.net, iis-7, httphandler

我将实现 HttpHandler 以允许根据会话值从我的站点下载文件。如果会话存在，则允许用户下载文件，否则重定向到索引页面，该页面是站点的登录页面。当我在 iis 服务器中运行我的网站时，我的代码在 iis express 中运行良好，但处理程序不工作。

对于 IIS express，web.config 文件具有我添加的以下部分。以下配置在 iis express 中运行。

```
<system.web>

<httpHandlers>

  <add verb="*" path="*.pdf" type="QDMS.FileHandler" />
Same add tag for all the files to restrict downloading without session.

</httpHandlers>

</system.web> 
```

不工作的 IIS 服务器的配置如下。

```
<system.webServer>

<handlers>
  <add name="Files" path="*.pdf,*.doc,*.docx,*.rar,*.zip,*.ppt,*.pptx,*.jpg,*.png,*.bmp,*.gif,*.html,*.htm,*.pps" verb="*" type="QDMS.FileHandler" resourceType="Unspecified" requireAccess="script" />    
</handlers>

</system.webServer> 
```

我的文件处理程序在下面

```
using System;
using System.Web;
using System.Web.SessionState;
using QDMS.Old_App_Code;

namespace QDMS
{
public class FileHandler : IHttpHandler, IReadOnlySessionState
{
public bool IsReusable
{
get { return true; }
}
public void ProcessRequest(HttpContext context)
{
if (!CheckWetherTheRequestForFileExistOrNot(context)) return;
if (CheckUsersForFileDownloading(context))
context.Response.Redirect("~/index.aspx");
else
{
var rawURL = context.Request.RawUrl;
var dotIndex = rawURL.LastIndexOf(".", System.StringComparison.Ordinal);
var ext = rawURL.Substring(dotIndex);
context.Response.ClearContent();
context.Response.ClearHeaders();
context.Response.ContentType = MIMEEType.Get(ext);
context.Response.AddHeader("Content-Disposition", "attachment");
context.Response.WriteFile(rawURL);
context.Response.Flush();
}  
}
public bool CheckWetherTheRequestForFileExistOrNot(HttpContext context)
{
string url = context.Request.RawUrl.ToLower().Trim();
if (url.Contains(".pdf") || url.Contains(".xls") || url.Contains(".xlsx") || url.Contains(".jpg") ||
            url.Contains(".bmp") || url.Contains(".rar") || url.Contains(".doc") || url.Contains(".docx") ||
            url.Contains(".png") || url.Contains(".gif") || url.Contains(".pptx") || url.Contains(".zip") ||
            url.Contains(".ppt") || url.Contains(".pps") || url.Contains(".htm") || url.Contains(".html"))
return true;
else
return false;
}
public bool CheckUsersForFileDownloading(HttpContext context)
{
return (context.Session["FrontHiddenID"] == null) && (context.Session["HiddenID"] == null);
}
}
} 
```

我确信 web.config 文件中的部分不正确，这就是它不起作用的原因。所以我需要建议来纠正我在 web.config 文件中的处理程序部分。任何有关此问题的建议和帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:19:03.637

您的 IIS 处理程序应该是这样的：

```
<add name="Files" path="*.pdf" verb="*" type="QDMS.FileHandler" resourceType="Unspecified" requireAccess="Script" /> 
```

与您的版本有两个不同之处：

*   只有一个文件掩码，您应该为每种文件类型注册一个处理程序
*   `requireAccess="Script"`'Script' 有一个大写的'S'

希望这会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T07:42:53.567

**在以经典模式运行的 IIS 7.0 中映射文件扩展名**

1.  打开 IIS 管理器。
2.  展开 Web 服务器计算机的节点，展开站点，然后展开默认网站。
3.  为您的应用程序选择节点。将显示功能视图窗格。
4.  在功能视图中，双击处理程序映射。
5.  在“操作”窗格上，单击“添加脚本映射”。将显示添加脚本映射对话框。
6.  在“添加脚本映射”对话框中，指定以下内容： o 请求路径。要映射的名称或文件扩展名。o 可执行文件。将处理请求的 .exe 或 .dll 文件的路径。对于经典模式，指定 ASP.NET ISAPI 扩展 (Aspnet_isapi.dll)。o 名称。一个描述性的名称。
7.  单击“确定”关闭“添加脚本映射”对话框。
8.  打开应用程序的 Web.config 文件。
9.  找到 system.web 部分的 httpHandlers 元素并为文件扩展名添加一个条目。

**在以集成模式运行的 IIS 7.0 中映射文件扩展名**

1.  按照上一过程的步骤 1 到 3 进行操作。
2.  在“操作”窗格上，单击“添加托管处理程序”。将显示添加托管处理程序对话框。
3.  在“添加托管处理程序”对话框中，指定以下内容： o 请求路径。要映射的文件名或文件扩展名。o 类型。托管处理程序的类型（类）名称。如果处理程序定义在 ASP.NET 应用程序的 App_Code 文件夹中，则其类型名称将出现在下拉列表中。o 名称。一个描述性的名称。
4.  单击“确定”关闭“添加托管处理程序”对话框。

# xcode - 以编程方式将 UISegmentedControl 添加到 UIScrollView

> ID：14729059
> 
> 赞同：1
> 
> 时间：2013-02-06T12:25:24.980
> 
> 标签：xcode, uiscrollview, uisegmentedcontrol

我很想以编程方式将 UISegmentedControl 添加到 UIScrollview。我正在使用下面的代码..

我不知道为什么没有启用滚动视图。

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 435)];
    scroll.contentSize = CGSizeMake(320, 700);
    scroll.showsHorizontalScrollIndicator = YES;

    NSArray *menu = [NSArray arrayWithObjects:[UIImage imageNamed:@"Accountimg.png"],[UIImage imageNamed:@"Challengesimg.png"],[UIImage imageNamed:@"Profileimg.png"],[UIImage imageNamed:@"Challengesimg.png"],nil];
    UISegmentedControl *menuSegmentedControl = [[UISegmentedControl alloc] initWithItems:menu];
    menuSegmentedControl.frame = CGRectMake(0,0,450,40);
    menuSegmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;

    [scroll addSubview:menuSegmentedControl];
     [menuScrollView addSubview:scroll];
    [menuSegmentedControl release];
    [scroll release]; 
```

我无法水平滚动..

提前致谢

更新：

我能够获得水平滚动。

代码更新：

```
 menuSegmentedControl.frame = CGRectMake(0,0,500,35);
    menuSegmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;

     menuScrollView.contentSize = CGSizeMake(menuSegmentedControl.frame.size.width, menuSegmentedControl.frame.size.height);
    menuScrollView.showsVerticalScrollIndicator = NO;

    [menuScrollView addSubview:menuSegmentedControl];
    menuScrollView.clipsToBounds = YES; 
```

谢谢你。

# java - 如何在单击退格按钮时在 webview 中使用加载上一页

> ID：14729061
> 
> 赞同：0
> 
> 时间：2013-02-06T12:25:30.413
> 
> 标签：java, webview, javafx

我正在使用 javaFX 开发 Swing 应用程序。我必须在 webview 中显示 html 文件，它可以像浏览器一样工作。我必须在解密后显示加密文件。当我单击超链接时，新文件会在 webview 中打开，因此对于获取新文件路径的超链接，我已经使用 webview 控件添加了更改事件。

但是在应用这个后退按钮后，它已经停止工作，无法转到上一页。

有没有其他方法可以在键盘上使用退格按钮生成更改事件，以便可以在 webview 中加载上一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T11:20:10.257

这是我的解决方案：

```
 backwardButton.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) 
        {
          int sizeHistory = engine.getHistory().getEntries().size();
          if(sizeHistory>1)
          {
              Entry entry = engine.getHistory().getEntries().get(sizeHistory-2);
              System.out.println("URL hist.: " + entry.getUrl());
              loadURL(entry.getUrl());
          }
        }
     }); 
```

由于当前访问的页面列在 lastPosition (sizeHistory-1) 的条目中，因此您需要访问之前的一个索引 (sizeHistory-2) 才能获得最后访问的页面。

# delphi - Delphi 7，将表单设置为 BitBtn 的父级时出错

> ID：14729062
> 
> 赞同：3
> 
> 时间：2013-02-06T12:25:36.597
> 
> 标签：delphi, delphi-7

当我尝试设置在运行时创建的 BitBtn 的 Parent 属性时，我在编译时遇到了一个奇怪的错误。在 Win7 64 位上使用 Delphi 7。

> [错误] unitMainForm.pas(70)：不兼容的类型：“TWidgetControl”和“TMainForm”

我在运行时创建 BitBtn，如下所示：

```
 newButton := TBitBtn.Create(Self);
  newButton.Parent := Self; 
```

这里的“Self”是表单，名为“MainForm”。无论我为父母付出什么，我都会得到这个。我试过把当前的Form、ScrollBox、Panel。如果我尝试创建 SpeedButton，也会发生同样的情况。问题是，当我使用 TButtons 甚至 TImages 时，我的代码按预期工作，但不使用 TBitBtns 或 TSpeedButtons。TButtons 和 TImages 接受 Form 作为其父级，并按预期显示。有任何想法吗？如果有帮助，我可以根据要求提供整个代码的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:35:36.420

您正在混合 CLX 和 VCL。您的按钮是 CLX `TBitBtn`，但您的表单是 VCL 表单。

我不知道您是否希望您的应用程序成为 VCL 应用程序或 CLX 应用程序，但无论是哪种，您都需要应用程序的所有部分来自同一个框架。

我的猜测是你想要一个 VCL 应用程序。不知何故，您使用`QButtons`的是 CLX 单元，而不是`Buttons`VCL 单元。这就是为什么您要获得 CLX 版本的`TBitBtn`.

因此，假设我猜对了，只需更改`QButtons`为`Buttons`，您的代码就会编译。

# c# - 需要正则表达式从字符串中删除所有字母

> ID：14729064
> 
> 赞同：3
> 
> 时间：2013-02-06T12:25:40.303
> 
> 标签：c#, regex

我需要一个正则表达式来移动字符串（AZ）和（az）中的所有字母。包括任何类型的特殊字符在内的所有内容都应该保持不变。我试过 @"[^\d]" 但它只返回字符串中的数字。

```
String : asd!@# $%dfdf4545D jasjkd #(*)jdjd56

desired output : !@# $%4545 #(*)56 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T12:27:14.427

只需用空字符串序列替换所有不需要的字符：

```
string filtered = Regex.Replace(input, "[A-Za-z]", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:27:52.957

试试下面的正则表达式：

```
[^a-zA-Z] 
```

这将匹配所有非英文字母。

# gwt - 如何将 History.js 与 GWT 一起使用？

> ID：14729067
> 
> 赞同：2
> 
> 时间：2013-02-06T12:25:49.930
> 
> 标签：gwt, browser-history, history.js, gwt-history, html5-history

我想使用Google Web Toolkit 中的[History.js](https://github.com/balupton/history.js)。

我知道 GWT 有它自己的 History 功能，但我不喜欢它，因为它使用 URI 中的哈希值，我想尽可能地使用新的 HTML5 History API。

我能想到的将 History.js 和 GWT 一起运行的唯一当前方法是用纯 Javascript（或 jQuery）编写 History.js 部分，然后手动调用 GWT 方法。

如果可以从 GWT 的 Java 文件中使用整个 History.js 功能，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:03:12.020

完全没有痛苦。

您只需在文档中添加 History js 文件即可使用它。

在这里，我回答了如何在 GWT 中使用外部 js。

[在 GWT 中使用外部 js](https://stackoverflow.com/questions/14712014/gwt-jsni-return-a-js-function/14714901#14714901)

调用本机方法后，您可以继续使用 gwt 方法

# java - 有人可以判断集合是否利用多态性吗？

> ID：14729068
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:25:48.477
> 
> 标签：java, collections, polymorphism

如果是，请让我知道集合如何利用多态性概念

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:28:40.427

`java.util.Collection`是一个接口；也是`java.util.List`。所以当你有

```
class X {
  List<String> list;
} 
```

并在其他地方有一个方法

```
void readX(X x) {
  x.list.add("you");
} 
```

您正在使用将调用该方法的适当实现的多态性原则`Collection#add`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:29:19.107

集合确实是多态的：Java 中的所有集合类都实现了一个或多个*接口*，如果您对集合的接口进行编程，则可以交换新的实现。

例如，如果您定义并使用

```
List<Integer> myList = new ArrayList<Integer>(); 
```

你可以用

```
List<Integer> myList = new LinkedList<Integer>(); 
```

其余代码不需要更改。当然，如果您尝试访问链表中间的元素，则会在时间上产生后果。

# gradle - 难以为现有存储库布局设置 Gradle 多项目构建

> ID：14729072
> 
> 赞同：13
> 
> 时间：2013-02-06T12:26:00.760
> 
> 标签：gradle

我正在尝试为我的项目布局已经由我决定的情况制作一个 Gradle 多项目构建。我有这样的事情：

```
-->Shared\
---->SharedComponent1\
------>build.gradle
------>src\
...
---->SharedComponent2\
------>build.gradle
...
-->Product1\
---->ProductComponent1\
------>build.gradle
---->ProductComponent2\
------>build.gradle
...
---->build\
------>settings.gradle 
```

我的 settings.gradle 看起来像这样：

```
rootProject.name = 'Product1'
rootProject.projectDir = new File( "${ProjectsRoot}" )

include 'Shared:SharedComponent1'
include 'Shared:SharedComponent2'
include 'Product1:ProductComponent1'
include 'Product1:ProductComponent2' 
```

当我像这样在构建文件夹中运行 Gradle 时：

```
gradle -PProjectsRoot=c:\my\project\root\dir projects 
```

我得到：

```
:projects

------------------------------------------------------------
Root project
------------------------------------------------------------

Root project 'build'
No sub-projects

To see a list of the tasks of a project, run gradle <project-path>:tasks
For example, try running gradle :tasks

BUILD SUCCESSFUL 
```

即它没有找到我正在尝试构建的项目。通过 Gradle 的多项目支持，我正在尝试做的事情是否可行？还是我在叫错树？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-06T13:21:51.470

几个指针：

*   *Gradle 将逻辑*项目层次结构（Gradle 将构建组织成项目的逻辑层次结构的方式）与*物理*目录布局严格分开。几乎任何映射都是可能的。（想到的一个例外是您不能让两个项目共享同一个项目目录。）
*   要实现自定义目录布局，您必须`projectDir`为所有项目进行设置，而不仅仅是根项目。您应该使用相对路径，例如`rootProject.projectDir = new File(settingsDir, "../foo")`和`project(":sub1").projectDir = new File(rootDir, "bar")`。在这里，`settingsDir`指的是包含 的目录`settings.gradle`，并且`rootDir`是 的简写`rootProject.projectDir`。
*   要通用配置项目，您可以递归 walk `(root)Project.children`。请注意，`settings.gradle`并`build.gradle`使用不同的类型来表示一个项目——分别是[ProjectDescriptor](http://gradle.org/docs/current/javadoc/org/gradle/api/initialization/ProjectDescriptor.html)和[Project](http://gradle.org/docs/current/dsl/org.gradle.api.Project.html)。
*   Gradle 必须从包含`settings.gradle`的目录或其子目录中调用。因此，从可用性的角度来看，最好将其放入`settings.gradle`目录层次结构的根目录中。

有关详细信息，请参阅[Gradle 构建语言参考](http://gradle.org/docs/current/dsl/index.html)中的[设置](http://gradle.org/docs/current/dsl/org.gradle.api.initialization.Settings.html)和 Gradle 用户指南中的[多项目构建](http://gradle.org/docs/current/userguide/userguide_single.html#multi_project_builds)章节。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-06T21:56:36.943

为了完整`settings.gradle`起见，解决我上面的具体示例的方法如下：

```
rootProject.name = 'Product1'

def projectTreeRootDir = new File( "${ProjectsRoot}" )

// Shared components

def sharedRootDir = new File( projectTreeRootDir, 'Shared' )

include ':SharedComponent1'
project( ':SharedComponent1' ).projectDir = new File( sharedRootDir, 'SharedComponent1' )

include ':SharedComponent2'
project( ':SharedComponent2' ).projectDir = new File( sharedRootDir, 'SharedComponent2' )

// Product components

includeFlat 'ProductComponent1', 'ProductComponent2' 
```

显然，这不适用于大量子项目，使用上面 Peter 提供的提示可以做得更好。

# c# - 无法更改 sql server 文件数据库大小

> ID：14729078
> 
> 赞同：1
> 
> 时间：2013-02-06T12:26:16.633
> 
> 标签：c#, sql-server

我无法使用 C# 查询更改数据库文件大小。出于某种原因，我得到一个例外：“'@databaseName' 附近的语法不正确。

这是执行查询的代码：

```
command = connection.CreateCommand();
command.CommandText = @"
                        ALTER DATABASE @databaseName
                        MODIFY FILE
                        (NAME = @databaseFile, SIZE = @newSize)
                        ";
dbParam = command.CreateParameter();
dbParam.ParameterName = "databaseFile";
dbParam.Value = dbFileName;
command.Parameters.Add(dbParam);
dbParam = command.CreateParameter();
dbParam.ParameterName = "newSize";
dbParam.Value = newSize;
command.Parameters.Add(dbParam);
dbParam = command.CreateParameter();
dbParam.ParameterName = "databaseName";
dbParam.Value = databaseName;
command.Parameters.Add(dbParam);
command.ExecuteNonQuery(); 
```

现在可能有几个问题。首先，数据库在不同的机器上，所以 db 文件路径不会不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:39:16.680

有些东西不能参数化。这包括 DML 中的表名和列名等内容，但包括*大部分*DDL。在这种情况下，它不期望也无法处理参数。

检查这一点；只需在 SSMS 中运行它，提前声明变量并为其赋值。你会发现错误信息是一样的。如果它在 SSMS 中不起作用，则不太可能在 ADO.NET 中起作用。

# python - NumericType 错误 - 转换为浮点数进行计算？

> ID：14729082
> 
> 赞同：1
> 
> 时间：2013-02-06T12:26:32.067
> 
> 标签：python, pandas

我有一个df：

```
df:
               a      b       c
date
2012-01-01   0.50    1.2    0.70 
2012-01-01   0.45    1.2    0.65
2012-01-01   0.65    1.2    0.63
2012-01-01   0.75    1.2    0.29
2012-01-01   -0.25   1.2    -0.68 
```

我要计算：a/b - c

我跑：

```
new = df['a']/df['b'] - df['c'] 
```

这将返回新的：

```
date
2012-01-01   -0.2833 
2012-01-01   -0.2750
2012-01-01   -0.0883
2012-01-01   0.3350
2012-01-01   0.4717 
```

第一个错误：如果我去：

```
new.ix[0][0]
TypeError: 'NumericType' object is unsubscriptable 
```

所以我认为这是一个系列。

所以我把它改成：

```
new = pd.DataFrame(new)
type(new.ix[0][0])

<type 'NumericType'> 
```

这是奇怪的部分：

```
new.ix[0][0]
-0.2833
new.ix[0][0]/2
-0.141650
new.ix[0][0]/2.0
0 
```

数字类型是怎么回事？如何将其更改为浮动？这里的最佳做法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:42:22.173

行为差异的原因是何时`new`是 Series 与 DataFrame。

`new`您创建的第一个是**Series**：

```
In [11]: s = new = df['a'] / df['b'] - df['c']

In [12]: type(s)
Out[12]: pandas.core.series.Series 
```

它的位置`0`值为`-0.2833`：

```
In [13]: s.ix[0]
Out[13]: -0.28333333333333327 
```

*（你不能`__getitem__`在浮动上，例如`2.0[0]`给你一个类似的错误。）*

但是，当您将其强制为**DataFrame 时**：

```
In [14]: df_new = new = pd.DataFrame(s)

In [15]: df_new
Out[15]: 
          0
0 -0.283333
1 -0.275000
2 -0.088333
3  0.335000
4  0.471667

In [16]: type(df_new)
Out[16]: pandas.core.frame.DataFrame 
```

这次第 0 个索引是一个系列（行）：

```
In [17]: df_new.ix[0]
Out[17]: 
0   -0.283333
Name: 0

In [18]: df_new.ix[0][0]
Out[18]: -0.28333333333333327 
```

### 更新：

为确保您的所有 DataFrames 值都是浮点数（`numpy.float64`），您可以[`applymap`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.applymap.html)（因为*每*列都被转换为浮点数，所以在这里工作）：

```
df = df.applymap(float) 
```

*我不知道你是如何得到`NumericType`对象的，我假设除以 2 vs 2.0 就是由此而来。*

# ruby-on-rails - 使用 .sprintf 将前导 0 添加到单个数字整数？

> ID：14729084
> 
> 赞同：0
> 
> 时间：2013-02-06T12:26:35.903
> 
> 标签：ruby-on-rails

发现另一个问题似乎可以通过使用 .sprintf('%02d', 1) 来解决，但我得到：'private method `sprintf' called for 7:Fixnum'。

这是否意味着 sprintf 不能在整数上调用，还是我在调用中弄错了？

只是想用前导 0 填充单个数字返回。

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:31:12.177

您可能想尝试像这样使用 sprintf：

```
sprintf('%02d', 1)
# => "01" 
```

IE

```
sprintf('%02d', model.count) 
```

不调用`.sprintf`号码，而是将其作为参数输入`sprintf()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:30:14.777

您可能想尝试`"0#{num}"[-2..-1]`或`"%02d" % 1`

# jsf-2 - 部署到 Websphere 时不显示下拉工具提示，但部署到 Tomcat 时显示

> ID：14729086
> 
> 赞同：1
> 
> 时间：2013-02-06T12:26:42.940
> 
> 标签：jsf-2

在我的 xhtml 页面中添加下拉列表标记并使用标题属性尝试显示工具提示值。当我在 Tomcat 中部署应用程序时，工具提示选项工作正常，而在 wepsphere 应用程序服务器中却无法正常工作。

有人可以建议我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:32:22.613

Tomcat 是一个准系统 JSP/Servlet 容器，不附带任何捆绑的 JSF 库，并且将使用 webapp 提供的 JSF 库。WebSphere 是一个成熟的 Java EE 容器，已经捆绑了 JSF 库，默认情况下将忽略 webapp 提供的 JSF 库。

您的具体问题表明 WebSphere 使用的是较旧的 JSF 版本，该版本暴露了一个错误，其中下拉菜单的工具提示将无法正确呈现。你基本上有两个选择：

1.  将 WebSphere 捆绑的 JSF 版本升级为与您最初在 Tomcat 中使用的版本相同的版本。有关升级说明，请参阅 WebSphere 管理手册，或者如果这不是您的责任，请告诉/要求服务器管理员升级。

2.  告诉 WebSphere 改用 webapp 捆绑的 JSF 库。您可以在 WAS 管理控制台中通过将应用程序的“类加载策略”配置为“模块”或“PARENT_LAST”来执行此操作，具体取决于 WAS 版本。

# asp.net - 如何从 asp.net 应用程序发布推文

> ID：14729091
> 
> 赞同：2
> 
> 时间：2013-02-06T12:27:07.403
> 
> 标签：asp.net, twitter, webforms

我正在尝试按照教程将推文发布到推特，但它不起作用

[http://www.dotnettutorials.com/tutorials/advanced/ASP-Twitter-Posting.aspx](http://www.dotnettutorials.com/tutorials/advanced/ASP-Twitter-Posting.aspx)

是他们的另一种方式，或者是否有人可以向我指出一个很好的教程，该教程展示了如何使用 asp.net C# Web 应用程序发布推文

```
protected void Button1_Click(object sender, EventArgs e)
{
    string username = "YOUR_USER_NAME";
    string password = "YOUR_PASSWORD";
    string tweet = TextBox1.Text;

    try 
    {
        string user = Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(username + ":" + password));  
        byte[] bytes = System.Text.Encoding.ASCII.GetBytes("status=" + tweet);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://twitter.com/statuses/update.xml");

        request.Method="POST";
        request.ServicePoint.Expect100Continue = false;
        request.Headers.Add("Authorization", "Basic " + user);
        request.ContentType="application/x-www-form-urlencoded";
        request.ContentLength = bytes.Length;   

        Stream reqStream = request.GetRequestStream();
        reqStream.Write(bytes, 0, bytes.Length);
        reqStream.Close();
    } 
    catch (Exception ex) 
    {
        /* DO NOTHING */
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:54:41.833

这是一个旧教程，因为 Twitter 几年前就弃用了基本身份验证。这些天来，您必须使用 OAuth，Twitter 在他们的[OAuth 文档](https://dev.twitter.com/docs/auth/oauth)中对此进行了描述。如果您不想编写自己的 OAuth 代码，您可以搜索 3rd 方库，想到 DotNetOpenAuth，或者使用为您执行此操作的库，您可以在[Twitter 库](https://dev.twitter.com/docs/twitter-libraries)页面上找到该库。

免责声明：我在 Twitter 库页面上编写了一个名为[LINQ to Twitter](http://linqtotwitter.codeplex.com/)的库。

注意：您需要以 Twitter API v1.1 为目标，因为 Twitter API v1.0 现在已弃用，并将在下个月关闭。

我还注意到您似乎很难弄清楚问题所在。我最好的猜测是您收到来自 Twitter 的 HTTP 401 Unauthorized 响应。如果您在请求上调用 GetResponse()，则此 401 响应会导致引发异常，但这不会在您的代码中发生，因为您只是在推送请求。您应该调用 GetResponse 以确保您了解 Twitter 对您的代码的反应。然后，您可以在 catch 块上打断点或记录响应以查看问题所在 - 有时您必须检查异常的字段以获得更多信息。另一个很棒的调试工具是 Fiddler，它可以让您检查来自 Twitter 的响应。FireBug 和 IE F12 工具是其他选项（可能还有更多），但目标是看看 Twitter 告诉你什么。

# database-design - MultiTenant 表是否应该在主键和外键中包含 TenantID？

> ID：14729094
> 
> 赞同：18
> 
> 时间：2013-02-06T12:27:25.183
> 
> 标签：database-design, azure, indexing, azure-sql-database, multi-tenant

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T02:50:59.850

看来你已经考虑了很多。不管我或其他人怎么说，唯一确定的方法就是自己测量。在这种情况下，这不再是一个 SQL Azure 问题，而是一个一般的 SQL Server 查询优化问题。

对于您的情况，有一些提示可以帮助您入门。当您使用 LINQ 时，您无法直接访问在 SQL 中运行的实际查询。您可能认为您知道查询应该是什么样子，但根据您使用的 EF 版本，它可以就如何构建查询做出一些有趣的决定。要准确找出正在运行的查询，您需要使用 SQL Profiler 或[Extended Events](https://docs.microsoft.com/en-us/sql/relational-databases/extended-events/quick-start-extended-events-in-sql-server)。SQL Profiler 不适用于 SQL Azure，因此您需要使用扩展事件或在某处的本地服务器上获取数据库的副本并运行指向本地的应用程序。SQL Server Management Studio (SSMS) 中的[导出数据层应用程序](https://docs.microsoft.com/en-us/sql/relational-databases/data-tier-applications/export-a-data-tier-application)和相关[导入](https://docs.microsoft.com/en-us/sql/relational-databases/data-tier-applications/import-a-bacpac-file-to-create-a-new-user-database)对此非常有用。

然后，您可以使用实际查询在 SSMS 中针对 Azure 中的数据库运行它们以获取执行计划。然后，您可以更改索引，再次运行查询并比较计划。如果您不想弄乱您的主要开发数据库，​​您可以通过[多种方式](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-copy)轻松创建副本，包括使用`CREATE DATABASE xxx AS COPY OF yyyy`命令。

不要试图对本地数据库进行优化。SQL Azure 的性能大纲与大多数本地 SQL 安装不同。

综上所述，如果*所有*查询都将*始终*包含租户 ID，那么是的，我希望将其作为聚集索引的第一部分包含在内会提高查询性能。对于所有其他指标，我不太确定，所以我会测量、测量、测量。还要记住，索引不是免费的，您创建的每个索引都会影响您的写入性能以及数据库的大小，因此我不会发疯并索引所有内容。

最后，不要担心为您的 PK 使用 guid，如果您的数据库变得足够大以至于您需要通过租户 ID 联合它（您的结构看起来可以很好地处理它） IDENTITY 列不再成为一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:24:04.213

I agree with the answer by @knigtpfhor, but would add that if you intend to use Federations in SQL Azure you'll need to include the Federation Key (TenantID) as part of the clustered index on each table in the Federation Member. (Your Option # 2 above). See [Federation Guidelines and Limitations](http://msdn.microsoft.com/en-us/library/windowsazure/hh597469.aspx) for more details.

I would absolutely add additional nonclustered indexes on your tables; choosing the fields to index on is a bit of science and a bit of an art, but I generally try to start by reviewing the queries I am likely to issue and make sure I have an index that covers the fields in question. My hunch is that while your Primary \ Foreign Keys are indexed, they probably don't correlate in all cases to how you actually query for data.

What sort of performance issues are you experiencing? Are you having issues writing data or querying data or both? How big is the database in question? Are your performance issues intermittent or fairly consistent?

# html - SVG - 流体布局 - 流体容器内的文本缩放

> ID：14729099
> 
> 赞同：1
> 
> 时间：2013-02-06T12:27:41.647
> 
> 标签：html, twitter-bootstrap, svg

我有一个嵌入在 bootstrap span12 div 中的 SVG 文档。

```
<div class="box span12">
<svg xmlns="http://www.w3.org/2000/svg"  version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">
<text y="10" width="20">Hello World</text>
</svg>
</div> 
```

我希望我的 SVG 使用 span12 容器动态扩展，这是我使用 viewBox 属性完成的。我还希望 SVG 元素内的文本在左侧“浮动”并且具有 SVG 文档的 20% 宽度，因此我可以将其他元素放在右侧。我已将宽度设置为 20，但由于某种原因，我的文本没有在 SVG 内缩放到 20%，而是在整个文档上缩放。

我在这里做错了什么？

谢谢

# solr - 使用 Solr 的分组，它将它们分组在一个组值下，它们实际上不在同一个组中？

> ID：14729100
> 
> 赞同：0
> 
> 时间：2013-02-06T12:27:43.487
> 
> 标签：solr

在下面的查询的响应中，我知道有更多的组织，它们不应该被分组在 Maitland 的 groupvalue 下，它们应该像 maitland walker 一样分开。我正在为 OrganisationName 使用 WhiteSpace 标记器。

我的 qyery 是

[http://solr.xxx.com/FacetedSearch/select/?q=OrganisationName:(maitland](http://solr.xxx.com/FacetedSearch/select/?q=OrganisationName:(maitland) *)&wt=json&fl=OrganisationId,OrganisationName&group=true&group.field=OrganisationName"

响应是

```
{
responseHeader: {
        status: 0,
        QTime: 0,
        params: {
        fl: "OrganisationId,OrganisationName",
        q: "OrganisationName:(maitland*)",
        group.field: "OrganisationName",
        group: "true",
        wt: "json"
        }
},
grouped: {
        OrganisationName: {
            matches: 53,
            groups: [
            {
                groupValue: "maitland",
                doclist: {
                    numFound: 49,
                    start: 0,
                    docs: [
                    {
                        OrganisationName: "Maitland",
                        OrganisationId: 4508
                    }
                    ]
                }
            },
            {
                groupValue: "walker",
                doclist: {
                    numFound: 4,
                    start: 0,
                    docs: [
                    {
                        OrganisationName: "Maitland Walker",
                        OrganisationId: 496
                    }
                    ]
                }
            }
            ]
        }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:39:05.570

从[group.field 的文档中](https://wiki.apache.org/solr/FieldCollapsing)：

> 就像普通的字段分面一样，字段不应该被标记化（否则会为每个标记计算计数）

您正在标记您的字段，因此结果基于空格损坏的标记。

您可能想要使用 copyField 并有单独的字段用于搜索和分组。至少这是您所看到的问题的常见策略。

# iphone - 安装时或安装后设置选项

> ID：14729101
> 
> 赞同：0
> 
> 时间：2013-02-06T12:27:46.717
> 
> 标签：iphone, ios, ipad

一旦用户下载了应用程序并开始使用它，我想设置一次语言，这只是第一次。但并非所有时间他都使用该应用程序。我怎样才能做到这一点？

比如我们如何获得选择语言选项，同时安装微软产品等

这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:44:34.620

当您的应用程序出现时，您可以控制它。你知道房产清单吗？你可以用它。或者，也许您可​​以创建一个名为 Configs 的包含核心数据的文件。您需要检查该字段是否为空白并且是否为“是”，打开一个 viewControllerChangeLanguange。选择保存数据并启动您的应用程序后。请记住，每次启动时，您都会检查您的文件。案例存在，设置当前语言。案例不存在，调用界面让用户选择语言。所有控制器都可以通过一个文件配置来制作。

# machine-learning - 如何通过简单的模拟模型生成人工数据集，用于具有二元响应和 4-5 特征的分类分析？

> ID：14729103
> 
> 赞同：3
> 
> 时间：2013-02-06T12:27:51.287
> 
> 标签：machine-learning, data-mining, classification

我需要一个模拟模型来生成具有二进制响应变量的人工分类数据集。然后我想使用这个数据集检查各种分类器的性能。数据集可能具有任意数量的特征，即预测变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:13:04.453

这是一个坏主意，并且不会告诉您分类器的相对优点。

首先，我将解释如何生成数据，然后解释为什么这样做不会学到任何东西。你想要一个二元特征向量：有很多方法可以做到这一点，但让我们采取最简单的方法。独立伯努利变量的向量。这是生成任意数量实例的方法：

1.  对于每个特征 i，从均匀分布中生成一个参数 theta_i，其中 0 < theta_i < 1
2.  对于每个期望的实例 j，通过从均匀分布中再次采样来生成第 i 个特征 f_ji。如果您采样的数字小于 theta_i，则设置 f_ij = 1，否则将其设置为 0

这将允许您生成任意数量的实例。*但是*，问题是你知道数据的真实分布，所以你可以得到贝叶斯最优决策规则：这是理论上的最优分类器。在我上面给你的生成方案下，朴素贝叶斯分类器接近于最优（如果你使用实际的贝叶斯版本来整合参数，它将是最优分类器）。

这是否意味着朴素贝叶斯是最好的分类器？不，当然不是：通常，实际上我们对分类器在我们*不*知道数据真实分布的数据集上的性能感兴趣。[事实上，判别建模](http://en.wikipedia.org/wiki/Discriminative_model)的整个概念是基于这样一种思想，即当真实分布未知时，试图估计它所解决的问题比分类所需的更难。

总而言之，那么：非常仔细地考虑这是否是你想要做的。您不能模拟数据并使用它来决定哪个分类器是“最好的”，因为哪个最好取决于您用于模拟的配方。如果您想查看某些分类器表现不佳或奇怪的数据，您可以模拟此类数据以确认您的假设，但我认为这不是您想要做的。

编辑：

我意识到你实际上想要一个二元结果，而不是二元特征。你可以忽略我说的一些话。

二元响应来自逻辑回归模型：

日志（p/（1-p））= wx

其中 w 是您的权重向量，x 是您的特征向量。为了在给定观测 x 的情况下从该模型进行模拟，取点积 wx，应用逆 logit 函数：

logit^-1 = 1 / (1 + exp(-wx))

this gives you a number in the range 0-1\. Then sample a response as a Bernoulli variable with parameter p, i.e. take a uniform number in [0,1] and return 1 if it's less than p, else return 0.

If you want to simulate the xs too, you can, but you're back into the realms of my discussion above. Also, note that since this is logistic regression sampling, this classifier will have an obvious advantage here, as I describe above...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:40:23.397

您需要知道要生成数据的分布。很可能是正态分布。然后你需要将数据点标记到它的类。

正态分布： [在具有正态分布的数据集中生成随机值的示例算法？](https://stackoverflow.com/questions/3920310/example-algorithm-for-generating-random-value-in-dataset-with-normal-distributio)

高斯分布： [C++：生成高斯分布](https://stackoverflow.com/questions/1109446/c-generate-gaussian-distribution)

excel中的数据生成：[http ://www.databison.com/index.php/how-to-generate-normal-distribution-sample-set-in-excel/](http://www.databison.com/index.php/how-to-generate-normal-distribution-sample-set-in-excel/)

# c# - Winforms 和 IoC/DI

> ID：14729105
> 
> 赞同：1
> 
> 时间：2013-02-06T12:27:56.757
> 
> 标签：c#, winforms

在 Web 应用程序中，使用 IoC/DI 来获取数据库会话、DAO 等是合理的，因为调用“事件”的不是你，而是注入器。您只需要在事件函数中声明正确的参数。

但在 winforms 应用程序中，调用函数的只有你自己。没有适合您的“查询字符串处理程序”。

* * *

真的听起来不可能改变

```
private void button1_Click(object sender, EventArgs e); 
```

至

```
private void button1_Click(object sender, EventArgs e, DbSession dbSession); 
```

并且“处理程序”会自动为您注入东西。

* * *

所以，事情是：在winforms中我只需要实现一个包含我所有“util”实例的单例或静态类，比如SessionFactory等？那么对于winforms中的注入，没有设计模式或最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:07:55.317

依赖注入有几种不同的风格

*   构造函数注入——在对象创建时通过构造函数附加依赖项
*   Setter 注入 – 通过 setter 属性附加依赖项
*   接口注入 - 这是一个奇怪的鸭子（由特定的 DI 工具驱动的使用）
*   服务定位器——使用一个众所周知的类，该类知道如何检索和创建依赖项。从技术上讲不是 DI，但这是大多数 DI/IoC 容器工具真正做的事情。

    依赖注入通过将对象的创建置于容器范围之外来解决问题（一点点紧密耦合）。

    查看[带有示例的详细说明](http://www.abhisheksur.com/2011/02/dependency-injection-ioc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:37:24.417

我认为您不想将业务逻辑放在按钮单击的通用事件处理程序中。您要么希望调用一个不同的对象，该对象将从事件处理程序内部处理此问题，要么让该对象本身订阅按钮单击事件。

# iphone - 如何使用 facebook ios sdk 发出好友请求？

> ID：14729106
> 
> 赞同：4
> 
> 时间：2013-02-06T12:27:57.753
> 
> 标签：iphone, ios, xcode, facebook

我正在使用 facebook iOS sdk。我需要通过 iOS 应用在 Facebook 用户之间发送好友请求。我知道不能通过图形 API 发送。我正在尝试通过 facebook 我不知道如何进行对话。谁能帮我？

这是我的代码：

```
Facebook *face = [[Facebook alloc] initWithAppId:@"APP_ID" andDelegate:self];
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"user_id",  @"id",
                               nil];

[face dialog:@"me/friends"
        andParams:params
      andDelegate:self]; 
```

使用此代码，我得到一个带有以下文本的对话框：“找不到您请求的页面”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:32:08.003

好的，我找到了解决方案。我创建了一个 NSMutableDictionary 来制作一个带有相应参数的“appRequest”，但最后指出对话的类型是“朋友”。这是一个奇怪的解决方案，但它有效。

```
Facebook *face = [[Facebook alloc] initWithAppId:FBSession.activeSession.appID andDelegate:nil];
face.accessToken = FBSession.activeSession.accessToken;
face.expirationDate = FBSession.activeSession.expirationDate;
if ([face isSessionValid]){
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"My Title", @"title",
                                   @"Come check out my app.",  @"message",
                                   userId, @"id",
                                   nil];
    [face dialog:@"friends"
       andParams:[params mutableCopy]
     andDelegate:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:34:25.603

这可能会帮助你

```
 NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys: message, @"message", title, @"title", nil];
 [[self facebook] dialog: @"apprequests"
                      andParams: [params mutableCopy]
                    andDelegate: delegate]; 
```

有关更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/11521580/how-to-send-add-friend-request-to-facebook-user-from-ios-application)以及此[文档。](http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

# elasticsearch - 通过参数进行弹性搜索对象关联查询

> ID：14729115
> 
> 赞同：0
> 
> 时间：2013-02-06T12:28:40.063
> 
> 标签：elasticsearch, tire

我在 Elastic Search 和 Tyre 不返回任何结果时遇到了一些困难。我正在使用 Ruby 1.9.3 和 Rails 3.2.11。

在我的控制器中，我正在调用：

```
@location_id = 1
@listings = Listing.search(params.merge!(location_id: @location_id)) 
```

在我的列表模型中，我有

```
mapping do
    indexes :id, type: 'integer'
    ...
    indexes :author do
      indexes :location_id,     :type => 'integer', :index => :not_analyzed
      ...
end

def self.search(params={})
      tire.search(load: true, page: params[:page], per_page: 20) do |search|

      search.query  { string params[:query], :default_operator => "AND" } if params[:query].present?
      search.filter :range, posted_at: {lte: DateTime.now}

      search.filter :term, "author.location_id"       => params[:location_id]
end 
```

我有 300 个结果，它们在数据库中的 location_id 都为 1，所以我似乎无法弄清楚为什么它返回一个 nil 集？如果我注释掉 author.location_id 搜索过滤器行，它会按预期返回所有其他结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:09:44.950

在像您这样的情况下，有几件事需要解决。让我们从一个完整的工作代码开始：

```
require 'active_record'
require 'tire'
require 'logger'

# Tire.configure { logger STDERR }
# ActiveRecord::Base.logger = Logger.new(STDERR)

Tire.index('articles').delete

ActiveRecord::Base.establish_connection( adapter: 'sqlite3', database: ":memory:" )
ActiveRecord::Schema.define(version: 1) do
  create_table :articles do |t|
    t.string :title
    t.integer :author_id
    t.date    :posted_at
    t.timestamps
  end
  create_table :authors do |t|
    t.string  :name
    t.integer :number, :location_id
    t.timestamps
  end
  add_index(:articles, :author_id)
  add_index(:authors, :location_id)
end

class Article < ActiveRecord::Base
  belongs_to :author, touch: true
  self.include_root_in_json = false

  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :title

    indexes :author do
      indexes :location_id, type: 'integer'
    end
  end

  def self.search(params={})
    tire.search load: {include: 'author'} do |search|
      search.query do |query|
        query.filtered do |f|
          f.query { params[:query].present? ? match([:title], params[:query], operator: 'and') : match_all }
          f.filter :range, 'posted_at' => { lte: DateTime.now }
          f.filter :term,  'author.location_id' => params[:location_id]
        end
      end
    end
  end

  def to_indexed_json
    to_json( only: ['title', 'posted_at'], include: { author: { only: [:location_id] } } )
  end
end

class Author < ActiveRecord::Base
  has_many :articles

  after_touch do
    articles.each { |a| a.tire.update_index }
  end
end

# -----

Author.create id: 1, name: 'John', location_id: 1
Author.create id: 2, name: 'Mary', location_id: 1
Author.create id: 3, name: 'Abby', location_id: 2

Article.create title: 'Test A', author: Author.find(1), posted_at: 2.days.ago
Article.create title: 'Test B', author: Author.find(2), posted_at: 1.day.ago
Article.create title: 'Test C', author: Author.find(3), posted_at: 1.day.ago
Article.create title: 'Test D', author: Author.find(3), posted_at: 1.day.from_now

Article.index.refresh

# -----

articles = Article.search query: 'test', location_id: 1
puts "", "Documents with location:1", '-'*80
articles.results.each { |a| puts "* TITLE: #{a.title}, LOCATION: #{a.author.location_id}, DATE: #{a.posted_at}" }

articles = Article.search query: 'test', location_id: 2
puts "", "Documents with location:2", '-'*80
articles.results.each { |a| puts "* TITLE: #{a.title}, LOCATION: #{a.author.location_id}, DATE: #{a.posted_at}" }
puts "(NOTE: 'D' is missing, because is not yet posted)"

articles = Article.search query: 'test b', location_id: 1
puts "", "Documents with query:B and location:1", '-'*80
articles.results.each { |a| puts "* TITLE: #{a.title}, LOCATION: #{a.author.location_id}, DATE: #{a.posted_at}" } 
```

首先，像这样创建一个孤立的、提取的案例通常是个好主意。

在您的示例代码中，我假设您有一个 relationship `Listing belongs_to :author`。您需要正确定义映射和序列化，我再次假设您这样做了。

至于查询本身：

*   除非您使用分面导航，否则请使用`filtered`查询，而不是顶级过滤器，如我的示例代码中所示。

*   不要使用`string`查询，除非您真的想向您的用户展示 Lucene 查询字符串查询的所有功能（和脆弱性！）。

*   使用`match`查询，作为你的“通用目的”查询——*轮胎*在上面撒了一些糖，允许轻松创建`multi_match`查询等

*   您示例中的过滤器语法是正确的。当在*Tire*`filter`中多次调用该方法时，它会创建并过滤。*`and`*

 *取消注释 Tire 日志配置（可能还有 ActiveRecord 日志），以查看代码在做什么。*

# php - 如何将 20:13-02-05T13:45:17-0500 转换为 MySQL 日期时间？

> ID：14729116
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:28:43.337
> 
> 标签：php, mysql, datetime

在 PHP 中，如何将格式为 20:13-02-05T13:45:17-0500 的日期/时间字符串转换为有效的 MySQL 日期时间，以便我可以存储它？

到目前为止我已经尝试过

```
$date_id = date('Y-m-d H:i:s', strtotime($date_id)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:36:35.293

我认为这应该有效：

```
$date_to_store = '20:13-02-05T13:45:17-0500';
$date_for_mysql = date( 'Y-m-d H:i:s' , strtotime( $date_to_store ) ); 
```

然后在您的查询中，只需插入`$date_for_mysql`：

```
mysql_query("INSERT INTO `table` (`timestamp`) VALUES ('" . $date_for_mysql . "')"); 
```

当然，您应该使用准备好的语句，但这只是为了说明日期转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:42:55.190

```
// convert non-standard year format 20:13 to 2013
$date = preg_replace ('/^(\d{2}):(\d{2})/', '$1$2', $date_id);

$timestamp = strtotime ($date);
echo date ('Y-m-d H:i:s', $timestamp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:31:09.613

```
explode(your_time); 
```

这应该为您提供时间块，然后使用日期和 mktime。

```
date(Your_preferred_format, mktime(chunks_as_per_mktime)); 
```

# svg - 如何使用 Svgeezy？（SVG 后备）

> ID：14729119
> 
> 赞同：2
> 
> 时间：2013-02-06T12:28:47.027
> 
> 标签：svg, png, fallback

我正在尝试在不支持它们的浏览器上将我正在使用的 SVG 图像切换为 PNG - 即 IE8/7 和旧版本的 Android。

经过大量寻找，我想我已经找到了这项工作的工具 - [svgeezy](https://github.com/benhowdle89/svgeezy) - 问题是，我不知道如何使用它！（我不明白给出的小文档）

如果有人能解释为像我两岁一样，我会非常感激，我不知道从哪里开始（我是新手）:)

ps - 我知道还有其他方法可以做到这一点，但是我在使用 SVG 作为背景时遇到了各种麻烦，我想避免这种方法。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:12:24.503

Svgeezy 的 API 并不是那么直观或强大，但它很简单。第一个参数是要避免替换的类名（如果有），第二个参数是回退类型。这适用于文档级别，因此您不能将某些 SVG 替换为 JPG，而将其他一些 SVG 替换为 PNG。

```
// will replace all SVGs with PNGs
svgeezy.init('nothing', 'png');

// will replace all SVGs with JPGs except those that have class="noreplace"
svgeezy.init('noreplace', 'jpg'); 
```

您的后备应具有与原始 SVG 相同的文件名。因此，例如，如果要替换`logo.svg`，则`logo.png`应该在同一目录中。

要加载 javascript，请将其放在结束`</body>`标记之前：

```
<script type="text/javascript">
    svgeezy.init('whatever', 'png');
</script> 
```

# actionscript-3 - ItemRenderers 在 List 中更改 dataprovider 后保持状态

> ID：14729124
> 
> 赞同：0
> 
> 时间：2013-02-06T12:29:04.310
> 
> 标签：actionscript-3, apache-flex, flex4.5, flexbuilder, itemrenderer

我对 Datagrid 有以下问题。我有一个可以更改客户端的组合框，一旦选择了客户端，系统就会使用具有 CheckBox 和两个单选按钮的 ItemRenderer 填充 Datagrid。我第一次填充列表时，一切正常。

当我更改客户端并触发事件以更改此类 Datagrid 的内容时，问题就出现了。Datagrid dataProvider 被重新声明为新的 ArrayCollection 并迭代填充新信息。

问题是复选框的状态保持不变，尽管内容发生了变化。

这里发生了什么？我不明白。

**编辑**：

```
 private function showProductosTable(evt:ResultEvent, token:Object):void {
            precioClienteModel.modelo.arrayPanelPrecioCliente   = new ArrayCollection;

            for each(var data:Object in evt.result as ArrayCollection) {
                var pc:PanelPrecioClienteDatatype = new PanelPrecioClienteDatatype;
                pc.ID                       = data.ID;
                pc.clienteID                = data.clienteID;
                pc.productoID               = data.productoID;
                pc.producto                 = data.producto;
                pc.proveedorID              = data.proveedorID;
                pc.proveedor                = data.proveedor;
                pc.productos_proveedorID    = data.productos_proveedorID;
                pc.cantidad_80              = data.cantidad_80;
                pc.cantidad_100             = data.cantidad_100;
                pc.kg_caja_80               = data.kg_caja_80;
                pc.kg_caja_100              = data.kg_caja_100;
                precioClienteModel.modelo.arrayPanelPrecioCliente.addItem(pc);
                // Comprobamos si ya tenemos metido el ProductoID en nuestra Columna de Productos
                if ( !precioClienteModel.checkIfProductIDInList( pc.productoID ) ) {
                    precioClienteModel.modelo.arrayColumnaProductos.addItem( {'productoID':pc.productoID, 'producto':pc.producto,
                                                                                'proveedor1': {'value':0, 'selected':false},
                                                                                'proveedor2': {'value':0, 'selected':false},
                                                                                'proveedor3': {'value':0, 'selected':false},
                                                                                'proveedor4': {'value':0, 'selected':false},
                                                                                'proveedor5': {'value':0, 'selected':false},
                                                                                'proveedor6': {'value':0, 'selected':false},
                                                                                'proveedor7': {'value':0, 'selected':false},
                                                                                'proveedor8': {'value':0, 'selected':false},
                                                                                'proveedor9': {'value':0, 'selected':false},
                                                                                'proveedor10': {'value':0, 'selected':false},
                                                                                'proveedor11': {'value':0, 'selected':false},
                                                                                'proveedor12': {'value':0, 'selected':false},
                                                                                'proveedor13': {'value':0, 'selected':false},
                                                                                'proveedor14': {'value':0, 'selected':false},
                                                                                'proveedor15': {'value':0, 'selected':false}} );
                }
                if ( !precioClienteModel.checkIfProveedorIDInList( pc.proveedorID ) ) {
                    precioClienteModel.modelo.arrayFilaProveedores.addItem( {'proveedorID':pc.proveedorID, 'proveedor':pc.proveedor} );
                }
            } 
```

}

数据网格是：

```
<s:DataGrid id="preciosGrid" top="65" width="935" height="379" horizontalCenter="0" requestedRowCount="4"
            dataProvider="{precioClienteModel.modelo.arrayColumnaProductos}">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="producto"      headerText="Producto" width="150" editable="false"></s:GridColumn>
            <s:GridColumn dataField="proveedor1"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor2"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor3"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor4"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor5"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor6"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor7"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor8"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor9"    headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor10"   headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor11"   headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor12"   headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor13"   headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor14"   headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
            <s:GridColumn dataField="proveedor15"   headerText="" width="52" editable="true" itemRenderer="renderers.PriceCellItemRenderer"></s:GridColumn>
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

和 ItemRenderer：

```
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx">

<fx:Script>
    <![CDATA[
        import mx.controls.dataGridClasses.DataGridListData;
        import mx.controls.listClasses.BaseListData;

        import spark.components.DataGrid;

        private var _listData:BaseListData;
        [Bindable]private var isSelected:Boolean = false;

        override public function prepare(hasBeenRecycled:Boolean):void {
        }

        protected function lblData_doubleClickHandler(event:MouseEvent):void {
            isSelected = !isSelected;
            data[column.dataField]['selected'] = isSelected;
        }

        override public function set data( value:Object ) : void  {
            super.data = value;
            if (value != null)
                lblData.text = data[column.dataField]['value'];
        }

        [Bindable]public function get listData() : BaseListData {
            return _listData;
        }
        public function set listData( value:BaseListData ) : void {
            _listData = value;
        }

    ]]>
</fx:Script>

<s:Rect width="100%" height="100%">
    <s:fill>
        <s:SolidColor color="{isSelected?0xCDCDCD:0xFFFFFF}"/>
    </s:fill>
</s:Rect>
<s:Label id="lblData" width="100%" height="100%" 
         textAlign="center" verticalAlign="middle"
         doubleClickEnabled="true" doubleClick="lblData_doubleClickHandler(event)"/> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:07:29.777

您只需将项目添加到网格的 dataProvider；您似乎从不删除旧物品。在这种情况下; 当前显示数据的 itemRenderer 不会更新它们的显示，因为它们的数据没有改变。

也就是说，您可以编写代码来告诉 DataGrid 必须刷新 itemRenderers。您可以通过替换 dataProvider 来做到这一点，如下所示：

```
preciosGrid.dataProvider = myNewDataProvider; 
```

或通过在您的集合上使用[itemUpdated](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#itemUpdated%28%29)方法。

```
precioClienteModel.modelo.arrayColumnaProductos.itemUpdated(item); 
```

* * *

所以海报正在改变他的dataProvider。我怀疑问题在于他的级别太深而无法绑定工作。dataProvider 设置如下：

```
 dataProvider="{precioClienteModel.modelo.arrayColumnaProductos}" 
```

因此，Binding 将寻找对 precioClienteModel 对象的 modelo 属性的更改；并且 modelo 没有改变，只是它的一个实例变量；因此不会触发绑定。一种解决方案可能是将实例存储到本地模型，并在组件设置期间设置它，可能在 precioClienteModel 的设置器中：

```
[Bindable]
protected var modelo : ModeloType;

private var _precioClientModel : PrecioClienteModelType;

public function get precioClientModel(value:PrecioClienteModelType):void{
 return _precioClientModel;
}
public function set precioClientModel(value:PrecioClienteModelType):void{
  modelo = precioClienteModel.modelo
} 
```

然后我认为应该正确触发绑定。

# jsf-2 - 带有 Immediate="true" 的按钮清除当前显示的验证消息

> ID：14729125
> 
> 赞同：1
> 
> 时间：2013-02-06T12:29:11.567
> 
> 标签：jsf-2

我有一个命令按钮，可以在字段上重新显示页面并提供帮助。这需要在没有 JavaScript 的情况下工作。我不想触发验证，所以我添加了 immediate = true。这很好用，但是，页面上的任何验证消息都会消失，而我希望它们留在那里。

```
<h:commandButton rendered="#{cc.attrs.helpId!= null}" styleClass="helpButton" value="?" type="submit" action="#{visibleHelp.toggle(cc.clientId)}" immediate="true" />

...

<h:panelGroup rendered="#{visibleHelp[cc.clientId] != null}" id="#{cc.attrs.name}_helpText" styleClass="help-text">
    <h:outputText value="#{help[cc.attrs.helpId]}"/>
</h:panelGroup>

... 
```

这就是它的样子，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:57:39.470

这是预期的行为。面孔消息是请求范围的。提交表单会创建一个新请求。没有该`immediate="true"`属性的输入组件将不会被验证，因此不会生成人脸消息。在同步（非 ajax）回发时，初始消息会因为整个页面重新加载而“消失”。

只需通过 ajax 提交，这样页面就不会完全重新加载。

```
<h:panelGroup id="helpButton">
    <h:commandButton rendered="#{cc.attrs.helpId!= null}" styleClass="helpButton" 
        value="?" action="#{visibleHelp.toggle(cc.clientId)}" immediate="true">
        <f:ajax render="helpButton helpSection" />
    </h:commandButton>
</h:panelGroup>

...

<h:panelGroup id="helpSection">
    <h:panelGroup rendered="#{visibleHelp[cc.clientId] != null}" 
        id="#{cc.attrs.name}_helpText" styleClass="help-text">
        <h:outputText value="#{help[cc.attrs.helpId]}"/>
   </h:panelGroup>
</h:panelGroup> 
```

诚然，这仍然涉及 JavaScript，但没有其他可行的解决方案，或者您必须删除`immediate="true"`以便为这些输入组件重新执行验证。

# java - SabreAMF：PHP 整数数组到 Java 整数列表

> ID：14729132
> 
> 赞同：0
> 
> 时间：2013-02-06T12:29:21.750
> 
> 标签：java, php

我正在使用 SabreAMF 调用 Java Web 服务。

这是Java函数：

```
@RemotingInclude
public Boolean testAMF(List<Integer> ints)
{
    for (Integer element : ints) 
    {  
        //do something
    }

    return true;
} 
```

请注意，此函数接受整数列表。

这是PHP代码：

```
<?php
    require 'SabreAMF/Client.php';

    function make_request($service, $method, $params)
    {
        $client = new SabreAMF_Client('https://xxx');
        return $client->sendRequest($service.'.'.$method,$params);
    }

    $ints = array(1,2);
    $parameters = array($ints);
    $result = make_request('chartManager','testAMF',$parameters);
    var_dump($result);
?> 
```

我传递一个包含 2 个整数的数组。在 Java 中，此数组以列表形式出现，但其中包含双精度数，而不是整数。

然后我收到以下错误：

```
java.lang.ClassCastException : java.lang.Double cannot be cast to java.lang.Integer 
```

为什么它将我的整数更改为 double ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:13:40.030

[AMF0](http://en.wikipedia.org/wiki/Action_Message_Format)中只有双打。因此，您需要将类型更改为`Double`.

如果您使用 AMF3，您可以获得整数支持：

```
 $client = new SabreAMF_Client('https://xxx');
    $client->setEncoding(SabreAMF_Const::AMF3);
    return $client->sendRequest($service.'.'.$method,$params); 
```

# c - Flex/Bison：逗号分隔的链表？

> ID：14729136
> 
> 赞同：0
> 
> 时间：2013-02-06T12:29:33.810
> 
> 标签：c, linked-list, bison, flex-lexer

对于包含至少一项的逗号分隔列表，我有以下语法：

```
column_expression_list:
    column_expression {
        $$ = LinkedList_New();
        LinkedListItem *item = LinkedListItem_New($1);
        LinkedList_add($$, item);
    }
    |
    column_expression_list T_COMMA column_expression {
        LinkedListItem *item = LinkedListItem_New($3);
        LinkedList_add($1, item);
    }
; 
```

是否`column_expression_list`总是最终分解为 a`column_expression`并因此每个链表项将始终安全地添加到链表中？

如果不是，那么完成此操作的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:59:04.727

您的语法很好：除了您的两条规则中的第一条之外，没有其他方法可以构建`column_expression_list`，因为第二条要求已经“识别”了一条。当然，如果您在其他地方有关于 的其他规则`column_expression_list`，情况可能会有所不同。

在 LR 解析器的情况下，您更喜欢左递归而不是右递归是正确的：它们节省空间，并且在交互式解析器的情况下，按照您想要的方式运行。例如，参见[http://www.gnu.org/software/bison/manual/html_node/Recursion.html](http://www.gnu.org/software/bison/manual/html_node/Recursion.html)。

# ios - UITableViewCell 高度错误

> ID：14729144
> 
> 赞同：2
> 
> 时间：2013-02-06T12:30:06.300
> 
> 标签：ios, xcode, uitableview, storyboard

我对表格视图单元格的高度有一个奇怪的问题。我正在情节提要中创建自定义分组样式 UITableView 。我有 4 个不同的原型单元，分别用于单个单元、顶部单元、中间单元和底部单元。他们每个人都有不同的高度。我已经在情节提要中设置了这些高度，并且我还实现了委托方法

`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

举个例子：单个单元格的高度应该是 48。所以我将故事板中的高度设置为 48，上面提到的委托方法返回值 48。但是如果我看一下屏幕截图，单个单元格有实际身高49。

顶部单元格的行为相同，但中间单元格和底部单元格不同。这让它更加陌生。

你有什么想法？这个额外的像素是从哪里来的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-06T12:42:23.220

我不确切知道，但这可能是检查页眉和页脚高度的原因。

# android - 如何从另一个活动访问文件

> ID：14729146
> 
> 赞同：1
> 
> 时间：2013-02-06T12:30:10.480
> 
> 标签：android, file, android-camera

我尝试从相机拍照，然后尝试`two files`借助`fileProvider()`我在下面编写的方法在另一个活动中访问在此处创建的这些照片，但对我不利的是，它总是在接收点显示我为空。有人可以帮助我如何访问在此处创建的不同活动中的文件吗？

```
 public class FileGenerator extends Activity {
        File image1,image2,image3,image4;
        private String imagePath1,imagePath2,imagePath3,imagePath4;

        ....................
       .........................

    public void cameraShot() // This method would be called when the user clicks on a button on my activity to make a request of taking pic.
        {

                ContentValues values = new ContentValues();
                Intent intentPicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                //startActivityForResult(intentPicture,ACTION_TAKE_PICTURE);

                Intent intent=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                if(flipvalue == 0)
                {
                    intentPicture.putExtra(MediaStore.EXTRA_OUTPUT, firstCapturedImageURI);
                    values.put(MediaStore.Images.Media.TITLE, "testingimage1.jpg");
                    firstCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
                    startActivityForResult(intentPicture,CAMERA_DATA_FIRST);
                }

                if(flipvalue == 1)
                {
                    intentPicture.putExtra(MediaStore.EXTRA_OUTPUT, secondCapturedImageURI);
                    values.put(MediaStore.Images.Media.TITLE, "testingimage2.jpg");
                    secondCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
                    startActivityForResult(intentPicture,CAMERA_DATA_SECOND);

                }
    }

    protected void onActivityResult(int requestCode, int resultCode,Intent data)
        {
            super.onActivityResult(requestCode, resultCode, data);

            if(resultCode==RESULT_OK)
            {
                Bundle extras= data.getExtras();

                if(requestCode == 0)
                {
                    if(bitMap1 != null)
                    bitMap1.recycle();
                    bitMap1 = (Bitmap)extras.get("data");
                    imageView1.setImageBitmap(bitMap1);

                    selectedImagePath1 = getRealPathFromURI(firstCapturedImageURI);

                    imagePath1 = selectedImagePath1;
                    Log.d("Pic Path>>>", selectedImagePath1);

                    image1 = new File(selectedImagePath1);

                    flipvalue =1;

                }
                           if (requestCode == 1)
                {
                    if(bitMap2 != null)
                    bitMap2.recycle();
                    bitMap2 = (Bitmap)extras.get("data");
                    imageView2.setImageBitmap(bitMap2);

                    selectedImagePath2 = getRealPathFromURI(secondCapturedImageURI);

                    imagePath2 = selectedImagePath2;
                    Log.d("Pic Path>>>", selectedImagePath2);
                    image2 = new File(selectedImagePath2);

                    flipvalue =2;

                }
    }

protected File fileProvider(int i)
    {
        if(i==1)
        return image1;
        else
        return image2;

    }

public String getRealPathFromURI(Uri contentUri)
    {
        try
        {
            String[] proj = {MediaStore.Images.Media.DATA};
            Cursor cursor = getContentResolver().query(contentUri, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }
        catch (Exception e)
        {
            return contentUri.getPath();
        }
    }
} 
```

以下是我尝试接收这些文件的活动。

```
public class FileReceiver extends Activity{
File receivedimage1, receivedimage2;
FileGenerator filegen = new FileGenerator();
               ..........................
                   ............................

           receivedimage1 = filegen.fileProvider(1);
            Log.d("File 1 ","file1 object"+receivedimage1);// always shows null

            receivedimage2 = filegen.fileProvider(2);
             Log.d("File 2 ","file2 object"+receivedimage2);// shows null

} 
```

**PS——**在尝试这个之前，我曾经将字符串（即，`selectedImagePath1, selectedImagePath2`）带到另一个活动中，然后使用这些字符串来创建文件。但不知道为什么这会以某种方式破坏我创建的图像文件。所以，我按照上面的代码方式，仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:44:15.960

您将需要使用 Intent 将文件路径发送到其他活动，如果您有两个以上的活动，则使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来存储文件路径并从 SharedPreferences 检索其他活动中的路径。您可以将 SharedPreferences 中的路径存储为：

```
 SharedPreferences pathPrefs = FileGenerator.this.getSharedPreferences(
                                             "filepathPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = pathPrefs.edit();
        prefsEditor.putString("image1",image1.getAbsolutePath().toString());
        prefsEditor.putString("image2",image2.getAbsolutePath().toString());
        prefsEditor.commit(); 
```

在其他活动中，从 SharedPreferences 获取文件路径为：

```
SharedPreferences pathPrefs = 
                   this.getSharedPreferences("filepathPrefs", MODE_WORLD_READABLE);
String image1 = pathPrefs.getString("image1", "defaultpath");
String image2 = pathPrefs.getString("image2", "defaultpath");
// now use both file path in your code.. 
```

# android - 分配答案 - 测验程序

> ID：14729148
> 
> 赞同：0
> 
> 时间：2013-02-06T12:30:10.727
> 
> 标签：android, mobile, android-intent

我需要一种方法来为 ArrayList 中的一个问题分配 3 个可能的答案，其中只有一个答案是正确的。

我是 Android 新手，如果您能提供帮助，我将不胜感激。

我在这里有一个问题课：

```
package com.example.quiz;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.widget.TextView;

public class Questions extends Activity {
    private ArrayList<String> questionsArray = new ArrayList<String>();

    public Questions() {
        addQuestion("Which Prophet was the first in Islam?");
        addQuestion("What is the purpose of life?");
        addQuestion("Who is the last Prophet in Islam?");

    }

    public void addQuestion(String question) {
        questionsArray.add(question);
    }

    public ArrayList<String> getQuestionsArray() {
        return questionsArray;
    }

    public void setQuestionsArray(ArrayList<String> questionsArray) {
        this.questionsArray = questionsArray;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:46:28.733

Maps are useful when having to associate data with other data. In your case, you are trying to associate questions to arrays of answers for each question.

You can make a `HashMap<String, ArrayList<String>> answers` and retain the answers (the `ArrayList<String>`) for all questions (the `String`), then have another `HashMap<String, String> correctAnswers` where you retain the question (1st `String`) and it's associated correct answer (2nd `String`).

When validating the answer you would have to get the answer that the user has chosen and compare it to the correct answer like this:

```
if(correctAnswers.get(questionString).compareTo(chosenAnswerString))
{
    //correct answer!
}
else
{
    //incorrect answer
} 
```

The method used to add a question along with its answers you would become:

```
[...]

private Map answers = new HashMap<String, ArrayList<Sting>>();
private Map correctAnswers = new HashMap<String, String>();

public void addQuestion(String question, ArrayList<String> answers, String correctAnswer)
{
   this.answers.put(question, answers);
   this.correctAnswers.put(question, correctAnswer);
}

[...] 
```

When creating the `answers` map as above, your map would retain the array of questions, an array of arrays of answers and the association between each question and its answers array.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:36:21.630

有许多可能的方法。其中之一是`ArrayList`为每个答案选项（即 A、B 和 C）创建一个选项。然后再创建一个选项`ArrayList`，表明哪个答案是正确的

因此总共将有 4`ArrayList`秒，其中 3 秒用于存储答案，1 秒用于指示哪个选项是正确的

# java - Java 序列化：如果 serialVersionUID 更新错误并已发布，则提供任何解决方案。

> ID：14729159
> 
> 赞同：2
> 
> 时间：2013-02-06T12:31:03.830
> 
> 标签：java, serialization, serialversionuid

我们有一个非常古老的类，它没有 serialVersionUID。

4 年前，有人用随机值将 serialVersionUID 添加到此类。他应该使用serialver工具来查找值并在添加serialVersionUID时使用它，但事实并非如此。

有客户使用这个类的两个版本。

现在，如果我想反序列化老客户的对象，有什么办法。我无法更改当前的 serialVersionUID，因为新客户会受到影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:16:46.013

您必须编写自己的`readObject()`方法来处理不同的 UID。

“[可序列化对象的版本控制](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/version.html)”解释了 UID 的含义和规则是什么。

[这个答案更详细](https://stackoverflow.com/a/12702699/34088)。

我试图找到一个很好的例子，如何为`readObject()`具有多个 UID 但找不到任何 UID 的对象编写代码。Joshua Bloch 的“Effective Java”中甚至没有一个例子。它只是说“如果你更改 UID，你会得到一个错误”，而不是如何优雅地处理这个错误。

这个问题至少很接近：[当对象具有不同的serialVersionUID时，如何现在反序列化保存在数据库中的对象](https://stackoverflow.com/questions/795470/how-to-deserialize-an-object-persisted-in-a-db-now-when-the-object-has-different?rq=1)

# symfony - Symfony2，Doctrine，空关联实体

> ID：14729161
> 
> 赞同：1
> 
> 时间：2013-02-06T12:31:06.713
> 
> 标签：symfony, doctrine, entity

假设我们有几个表：table_item、table_category、table_items_status。使用自己的实体以单一模式（无关系）由服务更新。

我可以以及如何创建一个仅与这些表有关系的实体，例如类似的东西....

```
** 
* @ORM\OneToOne(targetEntity="table_item")
* @ORM\JoinColumn(name="itemID", referencedColumnName="itemID")
**
private $tableItemIDByItemID
// ... getter\setter

**
* @ORM\Column(type="integer")
**
private $itemID;
// ... getter\setter 
```

在 php 代码中我想简单地调用

```
$entity->setItemID(123);
$result = $entity->getTableItemIDByItemID(); 
```

并将通过 itemID 从 table_item 获取 ArrayCollection()。

我想要创建额外实体的主要内容仅具有多个表的关系并且仅是单向的。我需要这个来创建实体而不触及另一个实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:50:35.157

您应该查看实体存储库。这些提供了一些基本的功能查询，但您可以使用自己的自定义查询（例如：getItemIDByItemID）来扩展它们。它被称为存储库模式。实体只是数据库的对象表示。

Symfony2 手册：

“为您的实体创建自定义存储库类并在其中添加带有查询逻辑的方法是个好主意。”

有关存储库的更多信息：

[http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes) [http://www.zalas.eu/doctrine2-and-symfony2](http://www.zalas.eu/doctrine2-and-symfony2)

# c# - 访问内存流中的文件？C＃

> ID：14729169
> 
> 赞同：0
> 
> 时间：2013-02-06T12:31:28.310
> 
> 标签：c#, memorystream

我正在使用此代码将文件保存到内存流

```
using System.Drawing.Imaging;

Dictionary<string,MemoryStream> dict = new Dictionary<string,MemoryStream>();

dict.Add("mypicture.png",new MemoryStream());

bmp.Save(dict["mypicture.png"], ImageFormat.Bmp); 
```

之后我有一个接受这个文件名的函数

```
result = DrawMatches.Draw("box.png", "mypicture.png", out matchTime,i); 
```

我是否正确地从内存流中访问文件？在函数中它说

> 无效的论点

我想我没有从内存流中以正确的方式访问文件

这是 Drawmatches.Draw：

```
public static Image<Bgr, Byte> Draw(String modelImageFileName, String observedImageFileName, out long matchTime,int i)
{
   Image<Gray, Byte> modelImage = new Image<Gray, byte>(modelImageFileName);
   Image<Gray, Byte> observedImage = new Image<Gray, byte>(observedImageFileName);
} 
```

错误不在编译中，而是在运行时

它说“参数无效”并指向观察到的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:49:01.460

我不太确定`Image<Gray, byte>`该类是什么以及它是如何实现的，但是您将 a 传递`string`给它的构造函数-您确定这是正确的吗？（**编辑**：刚刚发现它是[EMGU](http://www.emgu.com/wiki/index.php/Working_with_Images#Color_and_Depth_Conversion)实现的一部分）。我将向您展示通常如何从流中创建图像：

```
MemoryStream ms = dict["mypicture.png"]; // This gives you the memory stream from the dictionary
ms.Seek(0, SeekOrigin.Begin); // Go to the beginning of the stream
Bitmap bmp = new Bitmap(ms); // Create image from the stream 
```

现在我怀疑您想使用以下构造函数从您拥有的流中创建一个新的“emgu 图像”：

```
Image<Bgr, Byte> img1 = new Image<Bgr, Byte>("MyImage.jpg"); 
```

这是 - 根据 EMGU 文档 - 应该从*文件*中读取图像。您没有名为“mypicture.png”的*文件，您**在字典中的关键字“mypicture.png”下有一个流*，这是完全不同的。我怀疑该`Image<t1, t2>`课程是否能够从流中读取 - 至少我在文档中没有看到类似的内容。

您需要调用的是（使用我上面提供的代码）：

```
Image<Gray, Byte> img1 = new Image<Gray, Byte>(bmp); 
```

话虽如此，`Draw`方法的代码（顺便说一句，它不能是静态的）应该是这样的：

```
private Bitmap GetBitmapFromStream(String bitmapKeyName)
{
    MemoryStream ms = dict[bitmapKeyName];
    ms.Seek(0, SeekOrigin.Begin);
    return new Bitmap(ms);
}

public Image<Bgr, Byte> Draw(String modelImageFileName, String observedImageFileName, out long matchTime,int i)
{
   Image<Gray, Byte> modelImage = new Image<Gray, byte>(GetBitmapFromStream(modelImageFileName));
   Image<Gray, Byte> observedImage = new Image<Gray, byte>(GetBitmapFromStream(observedImageFileName));
} 
```

**编辑**
在下面的评论中，您说您希望通过将位图保存到内存流而不是写入磁盘来减少处理时间。

我需要问你以下问题：你为什么首先这样做？我从您上面发布的代码中注意到，显然您已经有一个`Bitmap`保存到内存流中的代码。为什么不将位图本身放入字典中？

```
Dictionary<string, Bitmap> dict = new Dictionary<string, Bitmap>();
dict.Add("mypicture.png", bmp); 
```

然后您可以立即检索它，而浪费在存储和从流中读取图像的时间更少。然后该`Draw`方法将显示为：

```
public Image<Bgr, Byte> Draw(String modelImageFileName, String observedImageFileName, out long matchTime,int i)
{
   Image<Gray, Byte> modelImage = new Image<Gray, byte>(dict[modelImageFileName);
   Image<Gray, Byte> observedImage = new Image<Gray, byte>(dict[observedImageFileName]);
} 
```

# c# - C# 返回数据对象问题

> ID：14729171
> 
> 赞同：1
> 
> 时间：2013-02-06T12:31:32.370
> 
> 标签：c#, sql, object

我正在尝试从我的数据库中返回一个数据对象，以便我可以访问（例如）我的 ASP.NET 网站中的客户 ID。在客户登录时，该对象被返回。但是，我收到错误：

```
 'Invalid attempt to read when no data is present.' 
```

我已经在数据库上完成了一个 sql 查询（执行我的存储过程），它返回了正确的信息，所以我知道它在那里。我只能假设以下方法有问题：

```
 using (SqlConnection sqlConn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
        {
            using (SqlCommand sqlComm = new SqlCommand("Select_Customer_By_UserName_And_Password", sqlConn))
            {
                sqlComm.Connection.Open();
                try
                {
                    sqlComm.CommandType = CommandType.StoredProcedure;
                    sqlComm.Parameters.Add("@Username", SqlDbType.NVarChar, 25).Value = pUsername;
                    sqlComm.Parameters.Add("@Password", SqlDbType.NVarChar, 25).Value = pPassword;

                    using (SqlDataReader sqlDR = sqlComm.ExecuteReader(CommandBehavior.SingleRow))
                    {
                        if (sqlDR.HasRows)
                        {
                            //Creating the new object to be returned by using the data from the database.
                            return new Customer
                            {
                                CustomerID = Convert.ToInt32(sqlDR["CustomerID"])
                            };
                        }
                        else
                            return null;
                    }
                }
                catch (Exception)
                {
                    throw;
                }
                finally
                {
                    sqlComm.Connection.Close();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:33:36.363

您需要调用`sqlDR.Read()`，否则“记录指针”将指向一条记录。`HasRows`仅表示实际上有您可以读取的行。要读取每一行（或仅读取第一行），您需要调用`Read`一次或`while`循环调用。

例如：

```
if (reader.HasRows)
{
    while (reader.Read())
        ...
} 
```

您的代码应为：

```
using (SqlDataReader sqlDR = sqlComm.ExecuteReader(CommandBehavior.SingleRow))
{
    if (sqlDR.Read())
    {
        //Creating the new object to be returned by using the data from the database.
        return new Customer
        {
            CustomerID = Convert.ToInt32(sqlDR["CustomerID"])
        };
    }
    else
        return null;
} 
```

顺便说一句：恭喜使用`using`和参数化查询！

# ruby-on-rails - Net-ssh 执行超时？

> ID：14729173
> 
> 赞同：5
> 
> 时间：2013-02-06T12:31:36.683
> 
> 标签：ruby-on-rails, ruby, ssh, net-ssh

在我的应用程序中，我想`exec!`在指定时间后终止我的 SSH 连接命令。

我找到了`:timeout`for`Net::SSH.start`命令，但按照文档，这仅适用于初始连接。`exec`该命令有等效的东西吗？

我的第一个猜测是不使用`exec!`，因为这将等到命令完成，而是使用`exec`并用循环包围调用，该循环检查每次迭代的执行状态并在给定时间后失败。

像这样，如果我正确理解了文档：

```
server = NET::SSH.start(...)

server.exec("some command")

start_time = Time.now
terminate_calculation = false

trap("TIME") { terminate_calculation = ((Time.now - start_time) > 60) }
ssh.loop(0.1) { not terminate_calculation } 
```

然而，这对我来说似乎很脏。我期待类似的东西`server.exec("some command" { :timeout=>60})`。也许有一些内置功能可以实现此功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T13:04:25.900

我不确定这是否真的可以在 SSH 上下文中工作，但 Ruby 本身有一个超时方法：

```
server = NET::SSH.start ...
timeout 60 do
  server.exec! "some command"
end 
```

这将`Timeout::Error`在 60 秒后升高。查看[文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:16:26.533

我认为在 net/ssh 中没有本地方法可以做到这一点。查看[代码](https://github.com/net-ssh/net-ssh/blob/master/lib/net/ssh/connection/session.rb#L319)，该选项没有附加参数。

一种方法是在您调用的命令中处理超时 - 请参阅[Unix & Linux SE 上的此答案](https://unix.stackexchange.com/questions/43340/how-to-introduce-timeout-for-shell-scripting)。

我认为您的方式更好，因为您不会在连接的系统中引入外部依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T12:30:01.207

另一种解决方案是在 OpenSSH 配置文件（~/.ssh/config、/etc/ssh_config、...）中设置 ConnectTimeout 选项

查看更多信息

[https://github.com/net-ssh/net-ssh/blob/master/lib/net/ssh/config.rb](https://github.com/net-ssh/net-ssh/blob/master/lib/net/ssh/config.rb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-26T20:31:36.793

我所做的是有一个正在处理事件的线程。然后我循环定义的秒数，直到通道关闭。如果这些秒过去后，通道仍然打开，然后关闭它并继续执行。

# java - 如果不包含在'<'和'>'之间，如何替换字符串

> ID：14729175
> 
> 赞同：4
> 
> 时间：2013-02-06T12:31:39.393
> 
> 标签：java, android, regex, string

我必须替换部分文本，但前提是它的子字符串不包含在“<”和“>”之间。

例如，如果我有以下文字

```
<text color='blue'>My jeans are red</text>
<text color='red'>I am wearing a red t-shirt</text>
<text color='yellow'>I like red fruits</text> 
```

我想用另一个词替换“红色”这个词，我怎样才能替换该文本中的词而不替换包含在“<”和“>”之间的词？我试图为此编写一个正则表达式，但我没有成功......

我认为一种愚蠢的方法是分析所有文本（逐个字符），看看我是在 <...> 内部还是外部，如果我在外部，就替换文本的出现......我认为应该做一个更聪明的方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:43:07.637

如果这对你来说可以吗？

如果您只想在**单行**中进行替换：

```
final String s = "<text color='red'>I am wearing a red t-shirt</color>";
        System.out.println(s.replaceAll("(?<=>)(.*?)red", "$1blue")); 
```

将打印

```
<text color='red'>I am wearing a blue t-shirt</color> 
```

**多行案例**：

```
final String s = "<text color='red'>I am wearing a red t-shirt</color>\n<text color='red'>You are wearing a red T-shirt</color>";
        System.out.println(s.replaceAll("(?m)^(.*?)(?<=>)([^>]*?)red", "$1$2blue")); 
```

输出：

```
<text color='red'>I am wearing a blue t-shirt</color>
<text color='red'>You are wearing a blue T-shirt</color> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:58:22.747

我将替换任何后面没有“>”的“红色”。之后检查“<”和“>”对。

```
String xml = "<text color='blue'>My jeans are red</text> <text color='red'>I am wearing a red t-shirt</text>red";
xml = xml.replaceAll("red(?=([^>]*<[^>]*?>)*[^<|>]*$)", "blue");
System.out.println(xml); 
```

结果如下：

```
<text color='blue'>My jeans are blue</text> <text color='red'>I am wearing a blue t-shirt</text> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:43:45.077

使用支持字符串数组稍长一点，仅替换打开和关闭标记之间的字符串而`< ... >`不是其他文本。

```
 String input ="<text color='red'>I am wearing a red t-shirt</color>";
        String [] end = null;
        String [] start = input.split("<");
        if (start!=null && start.length>0)
            for (int i=0; i<start.length;i++){
                end = start[i].split(">");
            }
        if (end!=null && end.length>0)
            for (int k=0; k<end.length;k++){
                input.replace(end[k], end[k].replace("red", "blue"));
            } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T23:20:23.200

```
Text=Text.replace(" red ", " blue ");
Text=Text.replace(" red<"," blue<");
Text=Text.replace(" red.", " blue."); 
```

# python - 如何在 python 的 webob 中发送 HttpRedirect 或 HttpFound 中的 post 变量？

> ID：14729176
> 
> 赞同：1
> 
> 时间：2013-02-06T12:31:46.120
> 
> 标签：python, routes, webob

当我在我的应用程序中进行重定向时，我想在帖子中发送一些变量。

场景是这样的

```
def redirect_with_post():
  post_variable = "i am a post variable"
  return HttpRedirect(location="/confirm?id=23&user=user1") 
```

# 现在我想发送
post_variable

*   我想在重定向时发送变量而不是查询字符串作为发布请求。

使用的工具和软件：-

*   蟒蛇，webob，路线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:49:24.067

重定向由客户端（您的浏览器）执行。而且它只支持单个 Location 标头。您不能通过重定向发送 POST 数据。见[https://en.wikipedia.org/wiki/HTTP_302](https://en.wikipedia.org/wiki/HTTP_302)

# facebook - facebook支付对话框不显示本地货币对话框

> ID：14729178
> 
> 赞同：1
> 
> 时间：2013-02-06T12:32:01.877
> 
> 标签：facebook, payment

facebook 支付对话框仅显示积分，当我点击购买积分时，它应该转到下一个对话框，它应该询问我付款选项，它只是说您的购买成功。不知道我在做什么尝试了一切，但它不起作用。

这是我的javascript函数

```
function buy_tokens(p){

FB.init({appId: "myappid", status: true, cookie: true});

    var obj = {
    method: 'pay',
    action: 'buy_item',
    order_info: {'item_id': 'tokens', 'price':p},
    dev_purchase_params: {'oscif': true}
    };
    //FB.ui(obj, js_callback);
   FB.ui(obj, function(paydata) {
       // response back        
   });

} 
```

这是我的回调.php

```
<?php

$facebook = new Facebook(array(
'appId'  => APP_ID,
'secret' => SECRET,
'cookie' => true,  
));

$api_key = 'appid';
$secret = 'app secret';

// prepare the return data array
$data = array('content' => array());

//parse signed data
$request = parse_signed_request($_REQUEST['signed_request'], $secret);

if ($request == null) {
// handle an unauthenticated request here
}

$payload = $request['credits'];

// retrieve all params passed in
$func = $_REQUEST['method'];
$order_id = $payload['order_id'];

function parse_signed_request($signed_request, $secret) {
list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

 // decode the data
$sig = base64_url_decode($encoded_sig);
$data = json_decode(base64_url_decode($payload), true);

if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
error_log('Unknown algorithm. Expected HMAC-SHA256');
return null;
}

// check sig
$expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
if ($sig !== $expected_sig) {
error_log('Bad Signed JSON signature!');
return null;
}

return $data;
}

function base64_url_decode($input) {
return base64_decode(strtr($input, '-_', '+/'));
}

if ($func == 'payments_status_update') {
$status = $payload['status'];

// write your logic here, determine the state you wanna move to
if ($status == 'placed') {
$next_state = 'settled';
$data['content']['status'] = $next_state;
}
// compose returning data array_change_key_case
$data['content']['order_id'] = $order_id;
} else if ($func == 'payments_get_items') {
// remove escape characters  
$order_info = stripcslashes($payload['order_info']);
$item_info = json_decode($order_info, true);
//Per the credits api documentation, 
//you should pass in an item reference
// and then query your internal DB for the proper 
//information. Then set the item 
//information here to be returned to facebook 
//then shown to the user for confirmation.

if($item_info['price']=='0.69'){
    $tokens = 150000;
}elseif($item_info['price']=='1.49'){
    $tokens = 350000;
}elseif($item_info['price']=='2.49'){
    $tokens = 600000;
}elseif($item_info['price']=='3.99'){
    $tokens = 1000000;
}

$fb = $facebook->api('/me/?fields=currency'); 
$credit = round($item_info['price']*$fb[currency]        ['currency_exchange_inverse']*$fb[currency]['currency_offset']*$fb[currency] ['currency_exchange']);
//  $symbol = array('GBP'=>'£','EUR'=>'€','USD'=>'$');

if ($item_info['item_id'] != "") {
$item['title'] = $tokens.' Tokens ';
$item['price'] = $credit;
$item['description']= 'You will get '.$tokens.' Tokens';
$item['image_url']='url';
$item['product_url']='url';
}
//for url fields, if not prefixed by http:,
//prefix them
$url_key = array('product_url', 'image_url');  
foreach ($url_key as $key) {
if (substr($item[$key], 0, 7) != 'http://') {
$item[$key] = 'http://'.$item[$key];
}
}
$data['content'] = array($item);
}

// required by api_fetch_response()
$data['method'] = $func;
echo json_encode($data);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:57:21.027

dev_purchase_params: {'oscif': true} 参数仅在您不使用测试帐户进行购买时才有效。尝试使用未在您的应用设置中列为付款测试员的 Facebook 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T00:59:40.890

是的，请尝试使用不是应用程序管理员/开发人员的任何其他帐户，您将看到带有 paypal 和其他付款选项的付款对话框

# jquery - 是否有任何 jquery 插件来创建马赛克背景？

> ID：14729179
> 
> 赞同：1
> 
> 时间：2013-02-06T12:32:04.320
> 
> 标签：jquery, gallery, mosaic

我正在寻找一个能够达到这个效果的jquery插件

[http://img825.imageshack.us/img825/1213/26201311246pm.png](http://img825.imageshack.us/img825/1213/26201311246pm.png)

我找到了这个，但必须购买，我正在寻找免费的替代品

[http://codecanyon.net/item/photomosaic/full_screen_preview/232406](http://codecanyon.net/item/photomosaic/full_screen_preview/232406)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:44:53.677

You can use jQuery Masonry for this. [http://masonry.desandro.com/](http://masonry.desandro.com/)

OR

Try a CSS alternative: [http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:51:01.433

您不需要任何插件，只需找到马赛克图像，事实上您可以在您共享的链接中从该图像中剪切一块。然后使用这个css，你会得到马赛克背景

```
body
{
    background-image:url("Your images url..");
} 
```

在此之后它将重复您的图像片段并且背景将是马赛克:)

# validation - JQuery Validation UI 插件不包括 qTip 资源

> ID：14729185
> 
> 赞同：1
> 
> 时间：2013-02-06T12:32:26.137
> 
> 标签：validation, grails, grails-plugin, qtip

我正在使用最新版本的**JQuery Validation UI Plugin** 1.4 并使用 grails 2.1.0。

我无法让它正确显示 qTips，因为它似乎不包含文件*jquery.qtip.pack.js*和*jquery.qtip.css*（萤火虫控制台显示它们没有被拉入）。

我在插件*JqueryValidationUiResources.groovy*中看到它具有以下内容：

```
modules = {
    'jquery-validation-ui' {
        dependsOn 'jquery, jquery-validate'
        resource id:"validation-methods", url:[plugin:'jqueryValidationUi', dir:'js/jquery-validation-ui', file:'grails-validation-methods.js']
    }

    'jquery-validation-ui-qtip' {
        dependsOn 'jquery-validation-ui'
        resource id:"qtip", url:[plugin:'jqueryValidationUi', dir:'js/qTip', file:'jquery.qtip.pack.js']
        resource id:"qtip-theme", url:[plugin:'jqueryValidationUi', dir:'css/qTip', file:'jquery.qtip.css']
    }    
} 
```

我的 Config.groovy：

```
jqueryValidationUi {

    errorClass = 'error'
    validClass = 'valid'
    onsubmit = true
    renderErrorsOnTop = false
    qtip = true

    qTip {
        packed = true
      classes = 'ui-tooltip-red ui-tooltip-shadow ui-tooltip-rounded'
    }

    ....
} 
```

这就是我根据[文档](http://limcheekin.github.com/jquery-validation-ui/docs/guide/overview.html)在页面中包含资源的方式。

```
<head>
    ...
    <r:require modules="jquery-validation-ui" />
    ...
</head>

<body>
    ...
    <jqvalui:renderValidationScript for="com.mysite.command.test.testCommand" not="timeZone, field1" />

    ...
<body> 
```

为什么不包含 js 和 css 资源的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:59:38.483

在此插件的较新版本中，您必须包含

```
<r:require modules="jquery-validation-ui-qtip"/> 
```

代替

```
<r:require modules="jquery-validation-ui"/> 
```

正如您在该文件中看到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:42:53.127

我在尝试使用 JQueryUI 库时遇到了类似的问题。尝试下面给出的格式的脚本。您可以在此处查看我的原始问题[问题我在使用 jqueryui 时遇到的问题](https://stackoverflow.com/questions/14433710/grailsjquery-ui-integration-issue/14493602#14493602)

```
<head>

    <title>Simple GSP page</title>
    <g:javascript library="jquery" />
    <g:javascript library="jquery—validation-ui"/>
<r:layoutResources/>

    <script type="text/javascript">
     ….your scripts
    </script>

</head>

<body>
    ...
    <jqvalui:renderValidationScript for="com.mysite.command.test.testCommand" not="timeZone, field1" />

    <r:layoutResources/>
 ...
<body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T16:13:20.350

除了如前所述的 <r:require module="jquery-validation-ui-qtip" /> 之外，您还需要 renderValidationScript 标签本身具有 qtip="true"：

<jqvalui:renderValidationScript for="com.mysite.command.test.testCommand" qtip="true"/>

# javascript - JS - 不错的类似睡眠的功能

> ID：14729188
> 
> 赞同：1
> 
> 时间：2013-02-06T12:32:32.740
> 
> 标签：javascript, sleep

我有一个非常占用 CPU 资源的 JS 函数，它让浏览器因为长时间没有响应而将其杀死。我想完成这个功能，同时我也希望能够使用我的浏览器。

我的解决方案是在每次迭代后在我的函数中实现类似睡眠的功能：

```
<p id="debug"/>
<script>
    function example(i) {
            //do stuff
            if(i < 100) window.setTimeout(function() {example(i+1);}, 100);
    }

    example(0);
</script> 
```

该解决方案运行良好 - 但有没有更好的方法来实现此功能？- 不使用不必要的递归。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:35:41.707

有一种叫做网络工作者的东西，类似于线程。参考：[http ://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T21:26:02.863

```
var sleep = function(period, decision, callback){
    var interval = setInterval(function(){
        if (decision()) {
            interval = clearInterval(interval);
            callback();
        }
    }, period);
} 
```

# java - Android 在某些设备上“没有这样的表”

> ID：14729190
> 
> 赞同：1
> 
> 时间：2013-02-06T12:32:36.073
> 
> 标签：java, android, eclipse, sqlite

我在使用外部数据库时遇到问题。该数据库在大约 60% 的设备上运行良好，但例如在 Nexus 7 和 HTC 上，它会在 logcat 中引发“没有这样的表”错误。我很困惑如何处理它。但是我非常确定该表存在。它可以在我家里的设备上使用。

数据库助手类

```
public class DataBaseHelper extends SQLiteOpenHelper {

public static final String KEY_ID = "_id";
public static final String KEY_QUOTE = "quote";
public static final String KEY_AUTHOR = "author";
public static final String TABLE_QUOTES = "quotes";
public static final String KEY_FAV = "fav";

private static String DB_PATH = "/data/data/com.radoman.gameofthrones/databases/";

private final Context myContext;

private static String DB_NAME = "database.db";

private SQLiteDatabase myDataBase; 

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 11 );
    this.myContext = context;

}   

public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        //do nothing - database already exist
    }else{

        //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();
        this.close();

        try {
            this.getReadableDatabase();
            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

private boolean checkDataBase(){

    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();

}

private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

}

@Override
public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();

        super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

    try {
        createDataBase();
    } catch (IOException e) {
        Log.e("copy_db", "Error copying database");
        e.printStackTrace();
    }

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

//CRUD

    public void addQuote(Quote quote)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(KEY_QUOTE, quote.getQuote());
        values.put(KEY_AUTHOR, quote.getAuthor());

        db.insert(TABLE_QUOTES, null, values);
        db.close();
    }

    public Quote getQuote(int id)
    {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_QUOTES, new String[] {KEY_ID,KEY_QUOTE,KEY_AUTHOR,KEY_FAV}, KEY_ID + "=?", new String[] { String.valueOf(id)}, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Quote quote = new Quote(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2), cursor.getInt(3));

        return quote;
    }

    public List<Quote> getAllQuotes()
    {
            List<Quote> quoteList = new ArrayList<Quote>();
            String selectQuery = "SELECT * FROM " + TABLE_QUOTES;
            SQLiteDatabase db = this.getWritableDatabase();
            Cursor cursor = db.rawQuery(selectQuery, null);

            if (cursor.moveToFirst())
            {
                do 
                {
                    Quote quote = new Quote();
                    quote.setID(Integer.parseInt(cursor.getString(0)));
                    quote.setQuote(cursor.getString(1));
                    quote.setAuthor(cursor.getString(2));
                    quoteList.add(quote);
                } while(cursor.moveToNext());
            }
            return quoteList;
    }

    public int ifFav(int id)

    {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_QUOTES, new String[] {KEY_ID,KEY_QUOTE,KEY_AUTHOR,KEY_FAV}, KEY_ID + "=?", new String[] { String.valueOf(id)}, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Quote quote = new Quote(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2), cursor.getInt(3));

        if (quote.getFav() == 1)
        {
            db.close();
            return 1;
        }

        else
        {
            db.close();
            return 0;
        }

    }

    public void addFav(int id)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        String query = "UPDATE quotes SET fav=1 WHERE _id=" +id;
        db.execSQL(query);
        db.close();

    }

    public void nullFav(int id)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        String query = "UPDATE quotes SET fav=0 WHERE _id=" +id;
        db.execSQL(query);
        db.close();
    }

    public List<HashMap<String, String>> getCharQuote(String character)
    {

        String selectQuery;
        List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
        if(character.equals("All quotes"))
        {
            selectQuery = "SELECT * FROM " + TABLE_QUOTES;
        }
        else if (character.equals("Other characters"))
        {
            selectQuery = "SELECT * FROM "+TABLE_QUOTES+ 
                " WHERE author NOT IN('Syrio Forel','Ned Stark','Daenerys Targaryen'" +
                ",'Margaery Tyrell','Robert Baratheon','Tyrion Lannister','Ser Jorah        Mormont','Bran Stark','Cersei Lannister','Jaime Lannister');";
        }
        else
        {

             selectQuery = "SELECT * FROM " + TABLE_QUOTES+" WHERE author='"+character+"'";
        }
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst())
        {
            do 
            {

                HashMap<String, String> map = new HashMap<String, String>();
                map.put("quote", cursor.getString(2));
                map.put("fav", cursor.getString(0));
                map.put("id",cursor.getString(1));
                fillMaps.add(map);

            } while(cursor.moveToNext());
        }
        return fillMaps;

    }

    public List<HashMap<String, String>> getAllFavQuote()
    {

        List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
        String selectQuery = "SELECT * FROM " + TABLE_QUOTES+" WHERE fav=1";
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst())
        {
            do 
            {

                HashMap<String, String> map = new HashMap<String, String>();
                map.put("quote", cursor.getString(2));
                map.put("id", cursor.getString(1));
                fillMaps.add(map);

            } while(cursor.moveToNext());
        }
        return fillMaps;

    } 
```

}

和logcat错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.radoman.gameofthrones/com.radoman.gameofthrones.FavQuotesActivity}: android.database.sqlite.SQLiteException: no such table: quotes (code 1): , while compiling: SELECT * FROM quotes WHERE fav=1
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.database.sqlite.SQLiteException: no such table: quotes (code 1): , while compiling: SELECT * FROM quotes WHERE fav=1
at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
at android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:58)
at android.database.sqlite.SQLiteQuery.(SQLiteQuery.java:37)
at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
at com.radoman.gameofthrones.DataBaseHelper.getAllFavQuote(DataBaseHelper.java:290)
at com.radoman.gameofthrones.FavQuotesActivity.onCreate(FavQuotesActivity.java:72)
at android.app.Activity.performCreate(Activity.java:5104)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:29:52.813

如果您安装了旧版本的应用程序，当表格没有出现时，仅安装新版本不会替换旧数据库。从设备上卸载应用程序并安装较新的应用程序应该可以工作。或者执行`onUpgrade`触发器。

**编辑：**

您也可以尝试替换此行：

```
myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE); 
```

有了这个：

```
myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

# javascript - 谷歌地图链接验证使用正则表达式

> ID：14729191
> 
> 赞同：3
> 
> 时间：2013-02-06T12:32:37.727
> 
> 标签：javascript, regex, validation, google-maps, url

我只想检查该链接是否是 Google Maps 链接

**例如 ：**

```
var urls =[
    /// correct urls
    "https://www.google.com/maps",
    "https://www.google.fr/maps",
    "https://google.fr/maps",
    "http://google.fr/maps",
    "https://www.google.de/maps",
    "https://www.google.com/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4",
    "https://www.google.de/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4",
    "https://www.google.com/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4&layer=t&lci=com.panoramio.all,com.google.webcams,weather",
    "https://www.google.com/maps?ll=37.370157,0.615234&spn=45.047033,93.076172&t=m&z=4&layer=t",

    "https://www.google.com/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4",
    "https://www.google.de/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4",
    "https://www.google.com/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4&layer=t&lci=com.panoramio.all,com.google.webcams,weather",
    "https://www.google.com/maps?ll=37.370157,0.615234&spn=45.047033,93.076172&t=m&z=4&layer=t",

    /// error urls
    "https://www.google.com/",
    "https://zzz.google.com/maps",
    "https://www.google.com/+",
    "httpsxyz://www.google.com/maps",
    "http://www.anotherdomain.com/+"
    ]; 
```

我对 Regex 很不满意，并尝试使用 JavaScript Regex Generator，但对我来说仍然很难。

我只有..

```
Reg = /^http\:\/\/|https\:\/\/|www\.google$/; 
```

它失败了！:(

但我为大家做了一个现场测试：http: [//jsbin.com/onuyux/1/edit ?javascript,live](http://jsbin.com/onuyux/1/edit?javascript,live)

* * *

**编辑：2**

在我得到`@joel harkes`&的帮助后，我得到`@dan1111`了正则表达式

```
/^https?\:\/\/(www\.)?google\.[a-z]+\/maps\b/ 
```

这是正则表达式，`google.{TLD}/maps`那么 maps.google.{TLD} 呢？

**我只是想通过**这种方式验证谷歌地图的网址和网址*（看图）*

![在此处输入图像描述](../Images/0fc8ae03ee1da0a148b43f2dd1e47f52.png)

**如果可能**，我想验证是否设置了地址或经纬度（使用`li`或`q`参数检查？）（例如，不仅是“maps.google.com”..）

**更新列表+代码：**

```
/// correct urls
"https://www.google.com/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4",
"https://www.google.de/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4",
"https://www.google.com/maps?ll=37.0625,-95.677068&spn=45.197878,93.076172&t=h&z=4&layer=t&lci=com.panoramio.all,com.google.webcams,weather",
"https://www.google.com/maps?ll=37.370157,0.615234&spn=45.047033,93.076172&t=m&z=4&layer=t",
"https://maps.google.com/maps?q=New+York,+NY,+USA&hl=no&sll=19.808054,-63.720703&sspn=54.337928,93.076172&oq=n&hnear=New+York&t=m&z=10",
"https://www.google.com/maps?q=New+York,+New+York,+USA&hl=no&ll=40.683762,-73.925629&spn=0.708146,1.454315&sll=41.47566,-72.026367&sspn=11.190693,23.269043&oq=new&hnear=New+York&t=m&z=10",

/// error urls
"https://www.google.com/",
"https://zzz.google.com/maps",
"https://www.google.com/+",
"httpsxyz://www.google.com/maps",
"http://www.anotherdomain.com/+",
"http://maps.google.com/",
"http://google.com/maps",
"http://google.de/maps",
"?q=New+York,+New+York,+USA&hl=no&ll=40.683762,-73.925629&spn=0.708146,1.454315&sll=41.47566,-72.026367&sspn=11.190693,23.269043&oq=new&hnear=New+York&t=m&z=10",
"&sll=41.47566,-72.026367&sspn=11.190693,23.269043&oq=new&hnear=New+York&t=m&z=10" 
```

**现场测试： http:** [//jsbin.com/onuyux/25/edit ?javascript,live](http://jsbin.com/onuyux/25/edit?javascript,live)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:38:38.537

```
(https|http)://(www\.|)google\.[a-z]+/maps 
```

-> 带斜线：`/(https|http):\/\/(www\.|)google\.[a-z]+\/maps/`

该正则表达式只选择好的网址而不是坏的，但不检查 enny \GET 变量

您可以在以下位置进行测试：[http](http://regexpal.com/) ://regexpal.com/或此处[http://jsbin.com/onuyux/4](http://jsbin.com/onuyux/4)

您可以在前面添加 ^ 以测试它是否是字符串的开头

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:57:28.663

这是一个简单的正则表达式，可用于您的测试数据：

```
Reg = /^https?\:\/\/(www\.)?google\.(com|fr|de)\/maps\b/; 
```

但是，您可能应该退后一步，更多地考虑您正在尝试做的事情。你在这里有两个不同的问题：

*   验证某些东西是有效的 URL（我假设您需要这样做，因为您的示例之一是无效的 URL）。
*   验证 URL 是否为 Google 地图 URL。

如果您想要一个强大的解决方案，我建议您分两步进行。首先确定该 URL 是否有效，然后查看它是否为 Google Maps URL。

第一部分本身就相当复杂，但许多其他部分之前已经解决了它。如果您搜索“Javascript URL 验证”，您会看到许多问题和许多建议的答案。我建议[将此](https://stackoverflow.com/a/6044420/1919238)作为一个起点，但我没有任何在 Javascript 中执行此操作的个人经验。

对于第二部分，您必须准确确定 Google 地图 URL 的外观。您在上面给出了一些示例，但它们显然是可能性的一个子集。你想做到多详尽？您是否也需要验证参数是否有效？这可能是一项艰巨的任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T14:36:55.490

完成**dan1111**的答案是一个模式，它将匹配指定的域并检查是否设置了 ll GET 变量：

```
Reg = /^https?\:\/\/(www\.)?google\.[a-z]+\/maps\/?\?([^&]+&)*(ll=-?[0-9]{1,2}\.[0-9]+,-?[0-9]{1,2}\.[0-9]+|q=[^&+])+($|&)/; 
```

我无法测试它（jsbin 已关闭），但它应该匹配任何包含至少一个 ll 或 q 参数的 url。

**编辑**：

我添加了地图。子域并修复了一个小错字。之后应该`q=`在`+`字符类之外，让它重复：`q=[^&]+`而不是`q=[^&+]`. 话虽如此，这是您的正则表达式：

```
Reg = /^https?\:\/\/(www\.|maps\.)?google\.[a-z]+\/maps\/?\?([^&]+&)*(ll=-?[0-9]{1,2}\.[0-9]+,-?[0-9]{1,2}\.[0-9]+|q=[^&]+)+($|&)/; 
```

**编辑2**：

要接受 google.co.uk 样式的域，请使用以下正则表达式。

```
Reg = /^https?\:\/\/(www\.|maps\.)?google(\.[a-z]+){1,2}\/maps\/?\?([^&]+&)*(ll=-?[0-9]{1,2}\.[0-9]+,-?[0-9]{1,2}\.[0-9]+|q=[^&]+)+($|&)/; 
```

希望它现在能涵盖所有的网址。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T06:49:08.117

这应该可以解决问题

```
Reg = /^https?\:\/\/((www|maps)\.)?google\.[a-z]+\/maps\/?\?([^&]+&)*(s?ll=-?[0-9]{1,2}\.[0-9]+,-?[0-9]{1,2}\.[0-9]+|q=[^&+])+($|&)/; 
```

可以在[http://jsbin.com/onuyux/36中测试](http://jsbin.com/onuyux/36)

# java - 具有 2 个主键字段的 JPA 表

> ID：14729206
> 
> 赞同：11
> 
> 时间：2013-02-06T12:33:51.597
> 
> 标签：java, jpa, orm, jpa-2.0, composite-key

我有一个只包含 2 个字段的表。该表具有由这两个字段组成的复合 PK。

当使用 Netbeans 从数据库创建实体 bean 时，实体 bean 不会像其他具有 2 个以上字段的表一样自动创建。

所以我想我需要自己创建实体bean。创建此实体 bean 的最佳实践是什么？它是否必须包含`COMPOSITE KEY`对象？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-06T12:45:17.327

我不使用 NetBeans，所以我不能真正谈论它的映射工具。

对于映射复合键，有几个选项。你可以

*   [`@Embeddable`](http://docs.oracle.com/javaee/6/api/javax/persistence/Embeddable.html)使用 PK 字段定义一个单独的对象，并[`@EmbeddedId`](http://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html) 在您的`@Entity`类中使用它

    ```
    @Embeddable
    public class MyCompositePK { 
        @Column
        private String fieldA;
        @Column
        private String fieldB;
    }
    @Entity 
    public class MyBean { 
        @EmbeddedId
        private MyCompositePK id;
        @Column
        private String fieldC;
    } 
    ```

*   使用 PK 字段定义一个非映射 POJO，并像[`@IdClass`](http://docs.oracle.com/javaee/6/api/javax/persistence/IdClass.html)在`@Entity`.

    ```
    @Entity
    @IdClass(value=ClassAB.ClassABId.class)
    public class ClassAB implements Serializable {
        private String idA;
        private String idB;

        @Id
        @Column(name="ID_A")
        public String getIdA(){ return idA; }
        public void setIdA(String idA){ this.idA = idA; }

        @Id
        @Column(name="ID_B")
        public String getIdB(){ return idB; }
        public void setIdB(String idB){ this.idB = idB; }

        static class ClassABId implements Serializable {
            private String idA;
            private String idB;

            public String getIdA(){ return idA; }
            public void setIdA(String idA){ this.idA = idA; }

            public String getIdB(){ return idB; }
            public void setIdB(String idB){ this.idB = idB; }

            // implement equals(), hashcode()
        }
    } 
    ```

    在这个例子`ClassABId`中是一个静态内部类只是为了方便。

Pascal Thivent 对这个问题的出色回答也解释了这些选项：[如何使用 Hibernate 映射复合键？](https://stackoverflow.com/q/3585034/851811).

这个相关问题讨论了这些方法之间的差异：[我应该使用哪个注释：@IdClass 或 @EmbeddedId](https://stackoverflow.com/q/212350/851811)。请注意，字段的声明与该`@IdClass`方法重复。

无论如何，我认为除了创建两个类之外别无选择。这就是我问这个问题的原因：[映射一个只包含没有 @IdClass 或 @EmbeddedId 的复合 PK 的类](https://stackoverflow.com/q/7793169/851811)。似乎有一个特定于休眠的功能。

附带说明一下，如果您可以控制数据库结构，您还可以考虑避免使用复合键。[有一些理由这样做](https://stackoverflow.com/a/11836573/851811)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:39:21.427

谢谢@XaviLópez。您的解释修复了我的代码，该代码被声明为@Tom Anderson 提到的自己的 IdClass。当我声明它自己的具有 2 个 @Id 列的 IdClass 时，获取该实体列表的 JPA 查询在结果列表中返回预期的“n”个项目，但该列表中的每个项目都是空的。但是这个大小“n”是预期的。更改为较少重构的静态内部类后，它能够返回正确的结果集。

据我说：自我引用 IdClass 不会起作用，因为自我已经是一个实体，需要在持久性上下文中。如果我还有一个相同类型的主键对象，那么持久化上下文中就会有两个“相同”的对象。所以，它不应该被允许。因此，我们不应该使用自引用@IdClass。创建一个静态内部类作为侵入性较小的主键类型。

# ruby-on-rails - Rails 应用程序不适用于 Apache + Passenger

> ID：14729207
> 
> 赞同：4
> 
> 时间：2013-02-06T12:33:53.873
> 
> 标签：ruby-on-rails, ruby, apache, passenger

我正在尝试在带有 Parallels Plesk Panel 11（64 位）的 CentOS 6 新虚拟机上托管 rails2 应用程序。[我已经使用此处](http://rabblemedia.net/blog/installing-rvm-ruby-rails-and-passenger-centos-6.html/)给出的步骤成功安装了 RVM、ruby、rails 和 passanger

我已正确执行所有步骤。我已经安装了**ruby​​ 1.8.7**和**rails 2.0.2**

现在的问题是，我可以在新服务器的 3000 端口上使用 Webrick 服务器运行应用程序。那里一切正常。但是当我想用 apache 运行它时，它并没有运行。当我点击 url 它返回页面

> 未找到
> 
> 在此服务器上找不到请求的 URL /account/login。Apache 服务器位于 www.mem.com 端口 80

这是我的 passanger.conf 文件：

> /etc/httpd/conf.d/passenger.conf

```
 LoadModule passenger_module /usr/local/rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
   PassengerRoot /usr/local/rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.19
   PassengerRuby /usr/local/rvm/wrappers/ruby-1.8.7-p371/ruby 
```

这是我的虚拟主机代码：

> /etc/httpd/sites-available/mem.conf

```
 <VirtualHost *:80>
 ServerAdmin youremail@example.com
 DocumentRoot /var/www/mem/public
 ServerName www.mem.com
 ErrorLog /var/log/httpd/mem/error.log
 CustomLog /var/log/httpd/mem/access.log common
</VirtualHost> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:14:17.240

问题已解决。网络托管公司已经使用不同的文档根创建了一个虚拟主机。我将我的应用程序目录移动到该路径并启动了应用程序。谢谢大家的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T17:55:27.363

如果您设法设置`DocumentRoot`到错误或不存在的目录，您也可能会看到这一点。如果您无法弄清楚这一点，请仔细检查它是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:47:51.317

尝试在您的 VirtualHost 中添加此目录块

```
<Directory /var/www/mem/public>
    Allow from all
    Options -MultiViews
</Directory> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T18:25:20.653

我自己也遇到了同样的问题，尽管在 rhel 6.2（64 位）和 ruby​​-1.8.7 上使用了 rails3 应用程序和 https。我通过在 /etc/httpd/conf.d/myapp.conf 的末尾添加以下行（在“VirtualHost”部分之后）解决了我的问题：

```
 PassengerPreStart https://<url-to-my-rails-app> 
```

重新启动 apache 后，我的应用程序会正确显示。

您可以从 apache 的乘客用户指南中找到更多信息：[http ://www.modrails.com/documentation/Users%20guide%20Apache.html#User_switching](http://www.modrails.com/documentation/Users%20guide%20Apache.html#User_switching)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T15:33:44.233

我正在运行带有 Apache 和乘客模块的 CentOS 6 机器。我的站点配置位于该`/etc/httpd/sites-enabled/`文件夹中。这是我的conf：

```
# /etc/httpd/sites-enabled/hello-world.conf
<VirtualHost *:80>
    ServerName hello-world.localhost
    DocumentRoot /var/www/hello/public
    <Directory /var/www/hello/public>
        Allow from all
        Options -MultiViews
    </Directory>
</VirtualHost> 
```

永远记得重启apache：

```
$ sudo apachectl restart 
```

希望这可以帮助你。祝你好运。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-06-15T11:41:55.527

禁用 selinux。

答案必须至少为 30 个字符。

# amazon-s3 - 与 JWPlayer 和 Wowza 相关

> ID：14729214
> 
> 赞同：0
> 
> 时间：2013-02-06T12:34:14.517
> 
> 标签：amazon-s3, jwplayer, wowza

我想弄清楚我是否必须使用 Wowza 流媒体和 JWPlayer 来为我流式传输视频或 JWPlayer 流式传输视频。

因此，我将在我的网页中使用带有视频 URL（存储在 Amazon S3 上的视频）的 JWPlayer java 脚本，当我单击播放时，它会在本地从 Amazon S3 下载视频并播放它，还是从它的服务器上播放视频 URL位于某个远程云上？

我无法在该网站上找到此答案，因此将其发布在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:07:15.513

如果 JWPlayer 的 javascript 中有 Amazon S3 url，它将不会播放文件，因为 S3 不支持在文件中搜索。

下面的一些步骤可以让这个工作（你的播放器可以是 JWPlayer、OVP 或 Flowplayer）

您可以通过多种方式在 Amazon S3 上播放视频：

1) Player <== Wowza <== Amazon s3 2) Player <== Amazon Cloud front <== Amazon s3

使用 1，您可以选择以 RTMP、HLS 或 MSS 或 RTSP 流式传输文件，使用 2，您可以使用 RTMP 和 MSS。

对于 1，您必须使用 mediacache 插件设置 wowza，配置说明在 mediacache 插件中给出。

# ruby-on-rails-3.2 - Rails 3.2.11 - 基于复选框设置永久或临时 cookie

> ID：14729215
> 
> 赞同：0
> 
> 时间：2013-02-06T12:34:16.240
> 
> 标签：ruby-on-rails-3.2, session-cookies

我面临一个基本问题，可能需要新鲜的眼光来帮助我解决它。

我有一个可以正常工作的基本身份验证系统。现在，我只想在用户选中登录表单上的“记住我”复选框时设置一个永久 cookie，如果没有选中“记住我”复选框，则设置一个临时 cookie（在会话结束时过期）。

我的 SessionsController 是

```
def create
user = User.find_by_email(params[:session][:email])
if user && user.authenticate(params[:session][:password])
  if params[:session][:remember_me]
    cookies.permanent[:remember_token] = user.remember_token
  else
    cookies[:remember_token] = user.remember_token
  end
  sign_in user

  redirect_back_or root_path
else
  flash.now[:error] = "Invalid email/password combination"
  render 'new'
end 
```

结尾

SessionsHelper 是

```
module SessionsHelper

def sign_in(user) 
  self.current_user = user
end 
```

问题是，尽管未选中复选框，但始终设置了永久 cookie……我错过了什么？

谢谢你的帮助

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T16:31:16.450

您的问题可能与该行有关：

`if params[:session][:remember_me]`

这可能是一个值为“0”或“1”的字符串，具体取决于复选框是否被选中。您的`if`遗嘱将被解释为：

`if params[:session][:remember_me] != nil`

如果它是“0”或“1”，那将是正确的。请注意，因为一切都是 Ruby 中的对象，即使它是一个整数，你也会遇到同样的问题。在 irb 中尝试以下操作：

`puts 'Hello World' if 0`

剧透 - 它会打印“Hello World”;-)

如果您改为检查它不是“0”，那么它应该可以工作：

`if params[:session][:remember_me] != '0'`

# yii - 创建 Cgridview YII

> ID：14729217
> 
> 赞同：0
> 
> 时间：2013-02-06T12:34:16.777
> 
> 标签：yii, cgridview

> *任何人都可以帮助我如何在前端的 Yii 中创建 cgridview，因为我是 Yii 的初学者*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:41:13.660

```
$dataProvider=new CActiveDataProvider('Post');

$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
)); 
```

参考这个：[http ://www.yiiframework.com/doc/api/1.1/CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView)

# java - Spring/JPA/JSF 的异常处理策略

> ID：14729227
> 
> 赞同：7
> 
> 时间：2013-02-06T12:35:01.657
> 
> 标签：java, spring, exception, jpa, exception-handling

我们在我们的应用程序中使用 JSF、Spring 和 JPA。我们正在努力简化我们项目的异常处理策略。

我们的应用架构如下：

UI(JSF) --> 托管 Beans --> 服务 --> DAO

我们正在为 DAO 层使用异常翻译 bean 后处理器。这是在 Spring Application Context 文件中配置的。

```
<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" /> 
```

Spring将所有数据库异常包装到'org.springframework.dao.DataAccessException'。我们没有在 DAO 层中进行任何其他异常处理。

我们处理异常的策略如下：

**表示层：**

```
Class PresentationManangedBean{

 try{
      serviceMethod();
   }catch(BusinessException be){
      // Mapping exception messages to show on UI
   }
   catch(Exception e){
       // Mapping exception messages to show on UI
   }

} 
```

**服务层**

```
@Component("service")
Class Service{

 @Transactional(propagation = Propagation.REQUIRED, readOnly = false, rollbackFor = BusinessException.class)
 public serviceMethod(){

  try{

      daoMethod();

   }catch(DataAccessException cdae){
      throws new BusinessException(); // Our Business/Custom exception
   }
   catch(Exception e){
      throws new BusinessException();  //  Our Business/Custom exception
   }
 }

} 
```

**DAO 层**

```
@Repository("dao")
Class DAO{

 public daoMethod(){
  // No exception is handled
  // If any DataAccessException or RuntimeException is occurred this 
  // is thrown to ServiceLayer
 }

} 
```

**问题：** 我们只是想确认上述方法是否符合最佳实践。如果没有，请建议我们处理异常的最佳方法（玩交易管理）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:46:49.420

这种方法对我来说看起来不错。我们在我们的项目中使用相同的方法。

维奈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T23:26:27.847

我使用不同的方法：

-我没有在 DAO 中捕捉到 Spring 的 DAE。我让它们流向控制器（JSF 托管 bean）。

- 在控制器中，我捕获任何异常（只有一个“捕获”）。

-我调用一个自定义的“handleException”方法，该方法接收参数中捕获的异常。

-该异常处理程序检查（例如，使用“if-then-else”语句）参数是哪种异常，并根据该异常向用户显示消息。在我的例子中，我在属性文件中查找要显示的消息，其中消息的键（和参数，如果有的话）是异常的属性（我在抛出异常时将它们放在那里）。特别是，如果你想以一种特殊的方式处理 DAE，你可以在这个异常处理方法中为它放置一个“if”分支，然后用它做任何你想做的事情。

我认为这种方法更好更简洁，因为您只需在一个点进行异常处理，并且您不必在每个级别中都放置这么多的“throw-try-catch”，只需在 Controller (JSF) 中即可。

当然，您可以在服务中针对特定异常使用“try-catch”，如果您想在该特定情况下执行一些业务逻辑，而不是向用户显示消息。

而且，如果您不想在控制器中处理 Spring DAE，您可以将其包装到您自己的业务异常中并重新抛出。但是在服务层而不是在 DAO 中执行此操作。

希望这个答案有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T14:20:11.820

也许您可以将 BusinessException 和 BusinessRuntimeException 分开，因为当您捕获 BusinessException 时会抛出 BusinessException，但是当您遇到异常时，您仍然会抛出相同的 BusinessException。尝试将它们分开。顺便说一句，为什么在捕获 BusinessException 时会抛出相同的异常？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-26T16:22:42.310

我正在做一些研究，因为我自己对此感到困惑。不过我的看法略有不同。

基本原理是在多层抛出和捕获异常在性能和代码可读性方面的成本很高。关键是服务方法不应该抛出异常。相反，它们应该始终返回一个响应，该响应应该封装状态、​​消息和输出实体。

但是，如果 Controller 调用多个服务方法并尝试根据响应的组合进行绘制，它可以将其放入 try catch 块中并处理异常。

有了这个逻辑，它可以同等地处理 sprint mvc 和 rest mvc。让我知道你的想法。

```
Class PresentationManangedBean{
      try {
      Response resp1 = serviceMethod();
      if (resp1.getStatus().equals("SUCCESSFUL"))
           // handle UI painting logic.
      else
           // handle error for UI
      Response resp2 = serviceMethod2();
      if (resp.getStatus().equals("SUCCESSFUL"))
           // handle UI painting logic.
      else
           // handle error for UI
      // handle resp1 and resp2 to paint UI.  
     } catch (Exception e) {
           // handle error for UI 
     }
} 
```

1）服务应处理所有异常。控制器不应处理任何异常。2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T17:12:56.137

您的方法非常符合 Spring Frameworks 的建议，并且还避免了在应用程序的各个层中渗透大量已检查的异常。

# eclipse-plugin - RAP 安装和安装时需要包含的必要内容

> ID：14729228
> 
> 赞同：0
> 
> 时间：2013-02-06T12:35:08.400
> 
> 标签：eclipse-plugin, eclipse-rcp, osgi, eclipse-rap

我在说唱应用程序中遇到问题，因为我是这个平台的新手根据视频[http://www.youtube.com/watch?feature=endscreen&v=6dAdpNjoBSc&NR=1](http://www.youtube.com/watch?feature=endscreen&v=6dAdpNjoBSc&NR=1) .. 我已经按照视频做了，但我不知道在我的安装中可能有一些错误。我必须与 Oracle 和 jboss 合作......

我遇到了如下错误

> !ENTRY org.eclipse.rap.ui.workbench 4 0 2013-02-06 16:36:30.640 !MESSAGE FrameworkEvent ERROR !STACK 0 org.osgi.framework.BundleException: 捆绑包“org.eclipse.rap.ui.workbench_1 .5.1.20120917-1116 [3]”无法解决。原因：缺少约束：Import-Package: org.eclipse.rap.rwt.osgi；version="[1.0.0,2.0.0)" 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle .getResolutionFailureException(AbstractBundle.java:1316) 在 org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323) 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle .java:390) 在 org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:53:16.480

您是否确保将捆绑包包含`org.eclipse.rap.rwt.osgi`在启动配置中？请参阅[http://wiki.eclipse.org/RAP/FAQ#My_application_is_not_running_after_switching_to_RAP_1.5](http://wiki.eclipse.org/RAP/FAQ#My_application_is_not_running_after_switching_to_RAP_1.5)

# java - 将 Valid Json 请求转换为 ArrayList

> ID：14729230
> 
> 赞同：-2
> 
> 时间：2013-02-06T12:35:12.543
> 
> 标签：java, json

我有一个有效的 json，如图所示

```
{

    "Items": "{one,two,three}"
} 
```

**我需要使用 ObjectMapper 将其映射到 ArrayList 。**

但它没有设置值，请告诉我。

我试过这种方式

```
public class Hi {
    private static JsonHelper jsonHelper = JsonHelper.getInstance();

    public static void main(String[] args) throws Exception {

        ObjectMapper mapper = new ObjectMapper();
        MyList yourData = mapper.readValue(new File("yourdata.json"),
                MyList.class);

    }

}

public class MyList {

    private ArrayList<String> Items= new ArrayList<String>();
    // setters and getters 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:01:19.207

"{one,two,three}" 不代表 json 中的列表。["one", "two", "three"] 是三个元素的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:08:53.033

json如下

{“测试”：“测试”，“项目”：[“一”，“二”，“三”] }

# java - JPA 2.0：什么是 javax.validation.* 包？

> ID：14729234
> 
> 赞同：16
> 
> 时间：2013-02-06T12:35:18.200
> 
> 标签：java, hibernate, jakarta-ee, annotations, jpa-2.0

[Java EE](https://www.oracle.com/technetwork/java/javaee/overview/index.html)中的[`javax.validation`](https://javaee.github.io/javaee-spec/javadocs/javax/validation/package-summary.html)包是什么？如何将其与[JPA](https://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html)一起使用？

我想用注释验证我的 JPA[实体。](https://docs.oracle.com/javase/8/docs/api/org/w3c/dom/Entity.html)[`@NotNull`](https://javaee.github.io/javaee-spec/javadocs/javax/validation/constraints/NotNull.html)我的 JPA 实现是[Hibernate](https://hibernate.org/orm/)。

这是我的实体：

```
public class Employee implements Serializable , EmployeeDetail {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    private int id;

    private String name;

    private long salary;
    ... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T12:40:35.690

使用 Bean Validation Api，您可以很容易地确保对您的实体（或常见的 bean）进行标准验证（非 null、模式、电子邮件）。

查看 Bean Validation Api 的 Oracles 教程：http: [//docs.oracle.com/javaee/6/tutorial/doc/gircz.html](http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html)

Hibernate 也应该没有问题，因为它是参考实现：[http ://www.hibernate.org/subprojects/validator.html](http://www.hibernate.org/subprojects/validator.html)

有关此主题的良好介绍，请查看 Hibernates 教程：http: [//docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/)

其他一些教程（Google for JPA 2 + Bean Validation）

*   [http://www.jboss.org/jdf/examples/ticket-monster/tutorial/DataPersistence/](http://www.jboss.org/jdf/examples/ticket-monster/tutorial/DataPersistence/)
*   [http://musingsofaprogrammingaddict.blogspot.de/2010/01/jpa-2-and-bean-validation-in-action.html](http://musingsofaprogrammingaddict.blogspot.de/2010/01/jpa-2-and-bean-validation-in-action.html)

JSR 规范……</p>

*   Bean 验证 1.1：
    *   [规格](http://beanvalidation.org/1.1/)
    *   [JSR 349](https://jcp.org/en/jsr/detail?id=349)
*   Bean 验证 1.0
    *   [JSR 303](https://jcp.org/en/jsr/detail?id=303)

# itextsharp - 添加带有书签的文件

> ID：14729237
> 
> 赞同：1
> 
> 时间：2013-02-06T12:35:21.647
> 
> 标签：itextsharp

我想使用 iTextSharp 添加 PDF 文件，但如果 PDF 文件包含书签，那么也应该添加它们。

目前我正在使用以下代码

```
Document document = new Document();
//Step 2: we create a writer that listens to the document
PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(outputFileName, FileMode.Create));
writer.ViewerPreferences = PdfWriter.PageModeUseOutlines;
//Step 3: Open the document
document.Open();

PdfContentByte cb = writer.DirectContent;

//The current file path
string filename = "D:\\rtf\\2.pdf";

// we create a reader for the document
PdfReader reader = new PdfReader(filename);

//Chapter ch = new Chapter("", 1);

for (int pageNumber = 1; pageNumber < reader.NumberOfPages + 1; pageNumber++)
{
    document.SetPageSize(reader.GetPageSizeWithRotation(1));
    document.NewPage();

    // Insert to Destination on the first page
    if (pageNumber == 1)
    {
        Chunk fileRef = new Chunk(" ");
        fileRef.SetLocalDestination(filename);
        document.Add(fileRef);
    }

    PdfImportedPage page = writer.GetImportedPage(reader, pageNumber);
    int rotation = reader.GetPageRotation(pageNumber);
    if (rotation == 90 || rotation == 270)
    {
        cb.Add(page);
    }
    else
    {
        cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
    }
}

document.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:44:51.930

请阅读[我的书的第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)。在表 6.1 中，您将看到：

> 可以从其他 PDF 文档导入页面。主要缺点是导入页面的所有交互功能（注释、书签、字段等）都会在此过程中丢失。

这正是你所经历的。但是，如果您查看该表中列出的其他类，您会发现 PdfStamper、PdfCopy 等……它们确实保留了交互功能。

`PdfStamper`将保留书签。如果你想使用`PdfCopy`(or `PdfSmartCopy`)，你需要阅读第 7 章来了解如何保留它们。第 7 章并非免费提供，但您可以在此处查阅示例：[Java](http://itextpdf.com/book/chapter.php?id=7) / [C#](http://sourceforge.net/p/itextsharp/code/513/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter07/)。你需要这个[`ConcatenateBookmarks`](http://itextpdf.com/examples/iia.php?id=141)例子。

请注意，您的代码目前看起来很复杂，因为您没有使用正确的类。使用`PdfStamper`应该会显着减少代码行数。

# c# - 如何在 C# 中使用 LINQ 更新对象列表的单个项目

> ID：14729239
> 
> 赞同：6
> 
> 时间：2013-02-06T12:35:27.440
> 
> 标签：c#, linq, sql-update

我想更新`Value`具有属性的列表`Text="ALL"`。

```
public class Season
    {
      public string Text {get;set;}
      public string Value {get;set;}
      public bool ValueSelected {get;set;}
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T12:37:56.503

LINQ 中的“Q”代表“查询”。LINQ 并不意味着更新对象。

您可以使用 LINQ 查找要更新的对象，然后“传统地”更新它。

```
var toUpdate = _seasons.Single(x => x.Text == "ALL");

toUpdate.ValueSelected = true; 
```

此代码假定只有*一个*带有`Text == "ALL"`. 如果没有或有多个，此代码将引发异常。

如果没有或没有，请使用`SingleOrDefault`：

```
var toUpdate = _seasons.SingleOrDefault(x => x.Text == "ALL");

if(toUpdate != null)
    toUpdate.ValueSelected = true; 
```

如果可能有多个，请使用`Where`：

```
var toUpdate = _seasons.Where(x => x.Text == "ALL");

foreach(var item in toUpdate)
    item.ValueSelected = true; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T12:45:15.630

你可以使用这样的东西：

```
// Initialize test list.
List<Season> seasons = new List<Season>();

seasons.Add(new Season()
{
    Text = "All"
});
seasons.Add(new Season()
{
    Text = "1"
});
seasons.Add(new Season()
{
    Text = "2"
});
seasons.Add(new Season()
{
    Text = "All"
});

// Get all season with Text set to "All".
List<Season> allSeasons = seasons.Where(se => se.Text == "All").ToList();

// Change all values of the selected seasons to "Changed".
allSeasons.ForEach(se => se.Value = "Changed"); 
```

# php - 在变量中查找字符串

> ID：14729245
> 
> 赞同：0
> 
> 时间：2013-02-06T12:35:42.580
> 
> 标签：php

我试图在变量中找到一个字符串。问题是它不寻找唯一的字符串。
例如，a 有一个具有以下值的变量：

```
$mystring = "p,pp,m,g"; 
```

这是我正在使用的代码：

```
<?php 
    $find="pp";
    if(strstr($mystring, $find)==true){
        echo "found"; 
    } 
?> 
```

问题是：当我在寻找 pp 时，它也会返回“p”作为结果。我怎样才能避免这种错误？
我正在使用它来检查电子商务网站上商品的尺寸，但我正在努力让它正确。

有任何想法吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:42:40.443

使用[strpos](http://www.php.net/manual/en/function.strpos.php)。确保使用 !== 运算符。

```
echo strpos($mystring, $find) !== false ? 'found' : 'not found'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:54:45.420

```
$mystring = "p,pp,m,g";
$str      = explode(",",$mystring);

$find     = "/^pp$/";
foreach($str as $val){
   if(preg_match($find, $val)){
       echo "found => ".$val; 
   }else{
       echo "not found";
   }
} 
```

参考： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:45:14.780

You can use transformating to array and search as array's element:

```
$mystring = "p,pp,m,g";
$arr = explode(',',$mystring);
if (in_array('p',$arr,true)) {echo "found";} 
```

Or ([http://php.net/manual/en/function.strstr.php](http://php.net/manual/en/function.strstr.php): "If you only want to determine if a particular needle occurs within haystack, use the faster and less memory intensive function strpos() instead") you can write

```
if (strpos($mystring,'pp')!==false) {echo 'found';} else {echo 'not found';} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:35:52.537

只需更改值并使用相同的 strstr 函数来避免类似的字母问题。

# c# - 如何使用达美 来自 Microsoft ASP.NET Web API OData 和 Code First\JsonMediaTypeFormatter

> ID：14729249
> 
> 赞同：9
> 
> 时间：2013-02-06T12:35:55.333
> 
> 标签：c#, rest, asp.net-web-api, odata

**问题是什么？**

我正在尝试在我的 ASP.net Web api 应用程序中启用补丁。我正在使用代码优先实体框架。

我有以下方法头，我可以在其中设置断点，它会命中：

```
[AcceptVerbs("PATCH")]
public async Task<HttpResponseMessage> Patch(long appId, long id, Delta<SimpleFormGroup> formGroup) 
```

但是，当我调用 formGroup.Patch(entity) 时，不会对我的实体进行任何更改。如果我将以下内容放入即时窗口：

```
formGroup.GetChangedPropertyNames() 
```

那么这个集合是空的，这似乎是错误的。

**我尝试了什么？**

我一直在参考以下示例

[http://techbrij.com/http-patch-request-asp-net-webapi](http://techbrij.com/http-patch-request-asp-net-webapi) [http://www.strathweb.com/2013/01/easy-asp-net-web-api-resource-updates-with-delta /](http://www.strathweb.com/2013/01/easy-asp-net-web-api-resource-updates-with-delta/)

Json MediaType Formatter 不知道如何正确构建 Delta 对象似乎是一个问题，但是在第二个链接中 filip 似乎确实表明它应该在没有 oDataMediaTypeFormatter 的情况下工作。

我已经开始尝试将我的模型序列化为 EDMX 表示，然后从那里提取 CSDL，以便我可以创建一个 oDataMediaTypeFormatter，但我也遇到了障碍，而且这似乎有点矫枉过正。

如果有人能对此有所了解，将不胜感激。让我知道是否需要更多信息。

**编辑：**

这是 SimpleFormGroup 的类定义：

```
public class SimpleFormGroup
{
    public int LastUpdate;

    public string Identifier;

    public string Title;

    public int DisplayOrder;
} 
```

这是我要发送的数据：

```
Content-Type: 'application/json'

{ "DisplayOrder" : "20 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T16:42:42.233

Interesting, it looks like `Delta<T>` with int members doesn't work in JSON.

Unfortunately, `Delta<T>` was created specifically for OData. If `Delta<T>` appears to be working with any formatter other than OData, it's a coincidence rather than being intentional.

The good news though is that there's nothing stopping you from defining your own PATCH format for JSON, and I'd be surprised if no one has already written one that works better with Json.NET. It's possible that we'll revisit patching in a future release of Web API and try to come up with a consistent story that works across formatters.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T09:12:26.953

感谢 Youssef 调查并发现了为什么事情不起作用。希望这可以得到解决。

在仔细研究了 oData 包源之后，我最终自己破解了这个问题。我选择实现另一个包含逻辑的 MediaTypeFormatter，因为它提供了轻松访问 tio HttpContent，但还有其他方法可以实现这一点。

关键部分是弄清楚如何解释代码优先模型，请参见下面的注释行：

```
public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
{
    var builder = new ODataConventionModelBuilder();

    // This line will allow you to interpret all the metadata from your code first model
    builder.EntitySet<EfContext>("EfContext");

    var model = builder.GetEdmModel();
    var odataFormatters = ODataMediaTypeFormatters.Create(model);
    var delta = content.ReadAsAsync(type, odataFormatters).Result; 

    var tcs = new TaskCompletionSource<object>(); 
    tcs.SetResult(delta); 
    return tcs.Task; 
} 
```

希望这可以为某人节省一些麻烦！

# python - 为什么我的 optimize.leastsq 不工作？

> ID：14729253
> 
> 赞同：2
> 
> 时间：2013-02-06T12:36:06.730
> 
> 标签：python, optimization, scipy

我正在尝试使函数适合我的数据。我有两个不同的轴，x 轴：高度，y 轴：重量。通过目视检查，我可以看到，它或多或少地给出了在重量 = 10 附近饱和的平方根函数的形状。这就是我正在做的事情：

```
from scipy import optimize

fitfunc = lambda p, x: np.sqrt(p[0]* x + p[1]) +p[2] # Target function
errfunc = lambda p, x, y: fitfunc(p, x) - y

sort_idx = np.argsort(height)
height = height[sort_idx]
weight = weight[sort_idx]

p0 = [0.1, 0.2, 0.3] # initial values
p1, success = optimize.leastsq(errfunc, p0, args=(height, weight), maxfev=10000) 
```

无论我将什么值设置为 p0，输出始终是 p1 = p0

我究竟做错了什么？

如果饱和，您认为使用不同的功能会更好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:03:43.863

如果体重和身高是人类的体重和身高，您的体重和身高可能会颠倒过来。除此之外，您的代码运行良好：

```
import numpy as np
from scipy import optimize
import matplotlib.pyplot as plt

fitfunc = lambda p, x: np.sqrt(p[0]* x + p[1]) +p[2] # Target function
errfunc = lambda p, x, y: fitfunc(p, x) - y

height = np.random.normal(loc=1.70, scale=.15, size=(100))
bmi = np.random.normal(loc=20, scale=2, size=(100))
weight = bmi * height**2

sort_idx = np.argsort(weight)
height = height[sort_idx]
weight = weight[sort_idx]

p0 = [0.1, 0.2, 0.3] # initial values
p1, success = optimize.leastsq(errfunc, p0, args=(weight, height), maxfev=10000)

plt.plot(weight, height, 'o')
plt.plot(weight, fitfunc(p1, weight), '-')
plt.xlabel('weight')
plt.ylabel('height')
plt.show() 
```

![在此处输入图像描述](../Images/baf7ddf0f41ab5ccd4c8161034dad275.png)

```
>>> p1
array([ 0.01625167, -0.32844465,  0.9256349 ]) 
```

该代码有时会发出警告，例如：

```
RuntimeWarning: invalid value encountered in sqrt
  fitfunc = lambda p, x: np.sqrt(p[0]* x + p[1]) +p[2] # Target function 
```

您可能想重新定义您的`fitfunc`and`errfunc`为

```
fitfunc2 = lambda p, y: ((y - p[2])**2 - p[1]) / p[0] # Target function
errfunc2 = lambda p, x, y: fitfunc2(p, y) - x 
```

然后做：

```
p2, success2 = optimize.leastsq(errfunc2, p0, args=(weight, height), maxfev=10000) 
```

绘制此图和上图会给出略有不同但可比较的结果：

![在此处输入图像描述](../Images/1028a8010a0a68c116fe83080706a82f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T10:37:12.283

谢谢你的帮助。我想我知道问题出在哪里。不知何故，sqrt 变成了负数，并给出了错误。当我取出变量以使其不能为负时，它开始起作用，即：

```
p[0]* np.sqrt(x + np.abs(p[1])) 
```

它不完全相同，但它对我有用。我以前应该考虑过的。再次感谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T16:13:43.610

不是直接回答您的问题，但根据您提供的数据，我没有问题适合这个：

```
import sys
from scipy import optimize
import numpy as np
from matplotlib import pyplot as plt

height=np.array([34.75625407,126.90646855,369.02594015,321.33822843,100.89398254,119.73654933,421.4400502,98.09051003,72.61433571,626.54970675,45.97802204,741.65476066,39.13568217,67.21666378,58.44445182,31.9950751,32.74788721,168.3256637,149.57003524,1058.41323859])
weight=np.array([4.375,3.95833333,9.16666667,8.125,3.75,8.4375,7.91666667,7.5,5.,10.,6.25,7.625,5.,6.25,10.,3.75,4.375,6.66666667,6.25,8.28125])

fitfunc = lambda p, x: np.sqrt(p[0]* x + p[1]) +p[2] # Target function
errfunc = lambda p, x, y: fitfunc(p, x) - y

pp = [0.2, 0.3, 0.4]
sort_idx = np.argsort(height)
height = height[sort_idx]
weight = weight[sort_idx]

p0 = [0.2, 0.2, 0.3] # initial values
result = optimize.leastsq(errfunc, p0, args=(height, weight), maxfev=10000, full_output=1)
p1 = result[0]
print result[3]

plt.plot(height, weight, 'o')
plt.plot(height, fitfunc(p1, height), '-')
plt.show() 
```

![拟合结果](../Images/04da98f90b4fdc60070b308baeb8c072.png)

正如我在上面的代码中所做的那样，您可以做的一件事是设置`full_output=1`并打印您收到的消息。请注意，我的`success`值实际上是 2，而不是 4。所以有一些奇怪的差异。由于我们应该使用相同的数据，因此您的 scipy 设置中的某些内容可能不正确。那，或者您没有显示整个问题并且其他地方出现了问题。

看这个图，我确实看到这些值几乎分散在任何地方，所以无论如何都很难拟合（事实上，我不会！）。

# ruby-on-rails - 每次运行时如何延长间隔时间？

> ID：14729262
> 
> 赞同：0
> 
> 时间：2013-02-06T12:36:30.193
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

在我的应用程序中，每隔 10 秒，它会调用这个 ajax 来重新加载收到的邮件数量。
但是，随着时间的流逝，我的 PC 似乎变得越来越热，即使我什么都不做，只是停留在应用程序的同一页面上。

我想在每次运行时再增加 10 秒。
然后它重置为 0，当整个页面再次加载时。
是否可以？

**refresh_mail_count.js**

```
jQuery(document).ready(function () {
    refreshMail();
});

function refreshMail() {
  $.ajax({
    url: "/messages/refresh_mail",
    type: "GET",
    dataType: "script",
  });
} 
```

**refresh_mail.js.erb**

```
$('#message_count').html("<%= j(render(:partial => 'layouts/message_received_count', :object => @message_count)) %>");
setTimeout(refreshMail,10000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:46:38.813

您可以在视图上定义一个全局 javascript 变量。`window.timerCounter = 0`然后增加这个变量`refresh_mail.js.erb`

```
window.timerCounter += 1
setTimeout(refreshMail, 10000 + (window.timerCounter * 10000)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:51:49.530

您可以轻松地将 setTimeout 从 erb 文件中移出并移至 AJAX 调用的完整函数中。结果看起来像这样：

`var emailPollDelay, initialEmailPollDelay = 10000, 10000; jQuery(document).ready(function () { refreshMail(); });`

`function refreshMail() { $.ajax({ url: "/messages/refresh_mail", type: "GET", dataType: "script", complete: function() { setTimeout(refreshmail, (initialEmailPollDelay += emailPollDelay); } }); }`

# ios - iOS 6.1 中的人类可读位置

> ID：14729264
> 
> 赞同：0
> 
> 时间：2013-02-06T12:36:36.323
> 
> 标签：ios, geolocation, cllocation, clgeocoder

自 6.1 更新以来，我只能反转包含 CLLocation 信息的所有照片的前 25%。

在前 25% 之后，我得到了所有其他的：Error Domain=kCLErrorDomain Code=2 "The operation could not be completed. (kCLErrorDomain error 2.)"。

我正在处理所有图像，所以也许我太频繁地太快地调用服务？但在任何地方都没有提到这方面的限制：S

代码

```
CLLocation *location = [asset valueForProperty:ALAssetPropertyLocation];
if(location != nil){
    CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
    [geoCoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error)
    {
        if(placemarks.count == 0){
            // this happens with more than 75% of the photos
            return;
        }
        // this only happens with the other 25%
    }];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:44:05.977

我找到[了这个答案](https://stackoverflow.com/questions/10619879/iphone-ios5-clgeocoder-how-to-geocode-a-large-200-set-of-addresses/10620181#10620181)，它说每个未知时间有 50 个请求的限制。

# c++ - 自己的迭代器类不适用于 std::binary_search

> ID：14729267
> 
> 赞同：2
> 
> 时间：2013-02-06T12:36:41.417
> 
> 标签：c++, iterator

我在这里找到了很多关于该主题的答案，但我无法让我的代码运行。

**编辑：** 发布的示例现在可以在引入缺失的内容后工作。希望有人可以将这个例子作为自己实验的基础。我还介绍了将这个示例用作随机访问迭代器的缺失内容。它与 binary_search 算法一起工作效率更高。

如果我必须编写自己的迭代器，我会与 value_type 和其他“特价”一起使用 .

我在这里阅读了很多关于如何不编写迭代器的文章，但找不到任何可行的示例。特别是我读到我不应该从迭代器派生。所以我再问一次笨蛋：

如何定义迭代器的 value_type。它不适用于类定义，也不适用于手动定义 type_traits 结构。不知道怎么继续...

```
 #include <iostream>
     #include <algorithm>
     #include <type_traits>
     #include <iterator>

    using namespace std;

    int data[]= { 1,4,7,9,11,20,28 }; //Sorted data

    template < typename T >
    class MyIter
    {
        int offset;
        T* base;

        public:
        typedef int value_type;

        //add the following lines after reading the answers -> it works! 
        typedef std::ptrdiff_t difference_type;
        typedef T * pointer;
        typedef T & reference;
        typedef std::forward_iterator_tag iterator_category;

        // if you want to use as random access iterator:
        // typedef std::random_access_iterator_tag iterator_category;

        public:
        MyIter( T* _base, int _offset) : base(_base), offset(_offset) {}
        MyIter() {}

        bool operator !=( const MyIter& rhs) 
        {
            T* tmp1= base+offset;
            T* tmp2= rhs.base + rhs.offset;

            return tmp1 != tmp2;
        } 

        MyIter operator++(int)
        {
            MyIter tmp(*this);
            offset++;
            return tmp;
        }

        T operator*()
        {
            return *(base+offset);
        }

        // Addition: if used as random access iterator you must provide:
        int operator-(const MyIter& rhs)
        {
            return offset-rhs.offset;
        }

        MyIter operator+=(int off)
        {
            offset+=off;
            return *this;
        }

    };

    typedef MyIter<int> iterType ;

    int main()
    {
        cout << "ok" << endl;

        pair<iterType, iterType> bounds;

        MyIter<int> start( data,0);
        MyIter<int> ende ( data,7);

        bounds = equal_range( start, ende, 28 );

        for ( iterType it= bounds.first; it!=bounds.second; it++)
        {
            cout << "Found " << *it << endl;
        }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:54:05.207

除了`value_type`标准库对迭代器的要求之外，您还缺少一些定义：

```
typedef std::ptrdiff_t difference_type;
typedef T * pointer;
typedef T & reference;
typedef std::forward_iterator_tag iterator_category; 
```

或者，继承自`std::iterator<std::forward_iterator_tag, T>`会给你这些。我不知道你在哪里读到你不应该这样做，但这正是`std::iterator`它的目的。

此外，您缺少一个预增量运算符：

```
MyIter operator++()
{
    ++offset;
    return *this;
} 
```

还有`->`和`==`运营商。此外，取消引用运算符可能应该返回一个引用来允许`*it = 42`，`const`重载返回一个值或`const`引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:45:13.883

`std::binary_search`需要一个随机访问迭代器。这意味着迭代器必须支持加法和减法（`+`、和） `+=`，其语义与指针完全相同。并且任何数量的算法也将期望迭代器中有多个 typedef：派生 是获取它们的最简单方法。（从技术上讲，标准要求的是产生正确的值，因此您可以为您的迭代器显式实例化它。但它的默认实现在迭代器类中选择 typedef。）`-``-=``std::iterator``std::iterator_traits`

## 编辑：

重读您的帖子：您绝对*应该*公开从`std::iterator`. 谁说其他都是错的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:49:48.617

您缺少几个基本类型成员和预增量运算符（以及@MikeSeymour 指出的一堆其他取消引用和比较运算符）。将 thise 添加到您的类定义中（请注意，我根据当前缺少的前增量运算符重写了后增量运算符）以使您`binary_search`继续前进

```
typedef std::forward_iterator_tag iterator_category;
typedef std::ptrdiff_t difference_type;
typedef T* pointer;
typedef T& reference;

MyIter& operator++()
{
    ++offset;
    return *this;                      
}

MyIter operator++(int)
{
    MyIter tmp(*this);
    ++*this; // NOTE this will call the other operator++
    return tmp;
} 
```

LiveWorkSpace上的输出正如[@JamesKanze](http://liveworkspace.org/code/3ureGM%2417)所指出的，这些缺失的 typedef 是通过继承 from 提供的`std::iterator<std::forward_iterator_tag, T>`。

# r - 负二项式的一阶差分引导程序

> ID：14729269
> 
> 赞同：1
> 
> 时间：2013-02-06T12:36:46.990
> 
> 标签：r, glm, statistics-bootstrap

新手在这里。我在计数数据上拟合负二项式模型，其中 Y 是事件计数，D 是治疗，X 是对数偏移：

```
out <- glm.nb(y ~ d + offset(log(x)),data=d1) 
```

我想引导 D=1 和 D=0 之间的第一个差异的置信区间。我已经走了这么远，但不确定这是否是正确的方法：

```
holder <- matrix(NA,1200,1)
out <- out <- glm.nb(y ~ d + offset(log(x)),data=d1)

for (i in 1:1200){
q <- sample(1:nrow(d1), 1)
d2 <- d1[q,]
d1_1 <- d1_2 <- d2
d1_1$d <- 1
d1_2$d <- 0
d1pred <- predict(out,d1_1,type="response")
d2pred <- predict(out,d1_2,type="response")
holder[i,1] <- (d1pred[1] - d2pred[1])
}
mean(holder) 
```

这是引导第一个差异的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:14:56.340

一般来说，你的方法是可以的，但你可以用更多*的 R-ish*方式来做。首先，如果您对引导很认真，您可以使用`boot`库并从更紧凑的代码、无循环和许多其他高级选项中受益。

在您的情况下，它可能如下所示：

```
## Data generation
N <- 100
set.seed(1)
d1 <- data.frame(y=rbinom(N, N, 0.5),
                 d=rbinom(N, 1, 0.5),
                 x=rnorm(N, 10, 3))
## Model
out <- glm.nb(y ~ d + offset(log(x)), data=d1)

## Statistic function (what we are bootstrapping)
## Returns difference between D=1 and D=0
diff <- function(x,i,model){
  v1 <- v2 <- x[i,]
  v1$d <- 1
  v2$d <- 0
  predict(model,v1,type="response") - predict(model,v2,type="response")
}

## Bootstrapping itself
b <- boot(d1, diff, R=5e3, model=out)
mean(b$t) 
```

现在`b$t`保存自举值。请参阅`names(b)`和/或`?boot`了解更多信息。

引导是耗时的操作，`boot`库的明显优势之一是支持并行操作。这很简单：

```
 b <- boot(d1, diff, R=5e3, model=out, parallel="multicore", ncpus=2) 
```

如果您使用的是 Windows，请`parallel="snow"`改用。

# ios - 标签栏应用程序。是否可以在不同的导航控制器中推送/弹出视图控制器？

> ID：14729271
> 
> 赞同：0
> 
> 时间：2013-02-06T12:36:51.600
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uitabbarcontroller

我试图实现以下目标：

假设我们在一个导航控制器中，并且我们推送了一个 ViewController。用户点击标签栏的其他项目。在我们移动到另一个视图控制器之前，我想弹出（动画）推送的视图控制器，但我希望新的视图控制器作为根，所以它会在推送的视图控制器消失时出现。

很难解释，我只是希望新的视图控制器出现在推送的视图控制器由于 popToRootViewController 的动画而消失时出现，而不是旧的视图控制器出现然后只是移动到新的视图控制器。

想象一下，我们在标签栏中的选项 b 中，它对应于视图控制器 B，并且推送了一个 C 视图控制器。

一个

B -> C

用户按a，

我希望这发生

A -> C

B -> C

然后选择 A viewController，然后弹出两个 C，在 A 情况下动画，在 B 情况下不动画。

这是我的代码：

```
 [(UINavigationController *)self.tabBar.selectedViewController popToRootViewControllerAnimated:NO];
     UIViewController * viewControllerToPush = self.tabBar.selectedViewController;

    self.tabBar.selectedIndex = indexPath.row;

    [(UINavigationController *)self.tabBar.selectedViewController pushViewController:viewControllerToPush animated:NO];
    [(UINavigationController *)self.tabBar.selectedViewController popToRootViewControllerAnimated:YES]; 
```

但它不起作用，我得到“不支持推送导航控制器”

是否可以将视图控制器从一个导航控制器移动到另一个？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:51:44.477

看看`UINavigationControllerDelegate`和`UITabBarControllerDelegate`方法。它们将允许您在推动/弹出控制器或选择选项卡时执行一些操作：

UINavigationControllerDelegate

```
– navigationController:willShowViewController:animated:
– navigationController:didShowViewController:animated: 
```

UITabBarControllerDelegate

```
– tabBarController:shouldSelectViewController:
– tabBarController:didSelectViewController:
– tabBarController:willBeginCustomizingViewControllers:
– tabBarController:willEndCustomizingViewControllers:changed:
– tabBarController:didEndCustomizingViewControllers:changed: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:02:15.317

我认为这是非常糟糕的 UI 设计，Apple 会不赞成，并且您会违反 Apple 人机界面指南 (HIG)。我认为您的应用程序的行为会与用户的期望不同。

TabBarControllers 各个选项卡用于应用程序的离散/不同区域，而不是用于在应用程序的单个区域中移动。希望这是有道理的。

我建议你最好在底部使用一个带有工具栏的导航控制器来代替 tabBar，然后只需在一个导航堆栈中推送 pop 即可。

# android - MainActivity 因状态栏通知而崩溃

> ID：14729280
> 
> 赞同：0
> 
> 时间：2013-02-06T12:37:17.963
> 
> 标签：android

我研究了这个，这个代码就是我得到的

当我打开 MainActivity 时应用程序崩溃

```
 NotificationCompat.Builder builder =
   new NotificationCompat.Builder(MainActivity.this)
   .setSmallIcon(R.drawable.ic_launcher)
   .setContentTitle("Get Other APW Co. Apps on Play!")
   .setContentText("Want more? All our apps are free!");
   int mNotificationId = 001;
   NotificationManager mNotifyMgr =
            (NotificationManager) getSystemmService(NOTIFICATION_SERVICE);
   mNotifyMgr.notify(mNotificationId, builder.build()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:51:38.843

试试这个，给出上下文名称`getSystemmService(Context.NOTIFICATION_SERVICE);`。notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); myNotification = new Notification(R.drawable.ic_launcher, "Notification!", System.currentTimeMillis());

```
 Context context = getApplicationContext();

    String notificationTitle = "App Name";
    String notificationText = Msg;
    Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(myBlog),
            context, MainActivity.class);
    myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION
            | Intent.FLAG_ACTIVITY_CLEAR_TOP);

    PendingIntent pendingIntent = PendingIntent.getActivity(MainActivity.this,
            0, myIntent, Intent.FLAG_ACTIVITY_NEW_TASK);

    myIntent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    myNotification.defaults |= Notification.DEFAULT_SOUND;
    myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
    myNotification.setLatestEventInfo(context, notificationTitle,
            notificationText, pendingIntent);
    notificationManager.notify(MY_NOTIFICATION_ID, myNotification); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:51:05.480

您必须指定`contentIntent`，即`PendingIntent`单击该项目时将执行的 。**这是强制性的，**并且您没有指定导致错误的原因。

您可以在构建器中或在`Notification`：

*   在构建器中：

    ```
    builder.setContentIntent(contentIntent);
    Notification n = builder.build(); 
    ```

*   关于通知：

    ```
    Notification n = builder.build();
    n.contentIntent = contentIntent; 
    ```

只有在您可以将其发送到`NotificationManager`：

```
mNotifyMgr.notify(mNotificationId, n); 
```

确切的`contentIntent`值取决于你想要做什么。请参阅此处的参考：http: [//developer.android.com/reference/android/app/Notification.html#contentIntent](http://developer.android.com/reference/android/app/Notification.html#contentIntent)

请参阅此处的工作示例：[https ://github.com/nheid/unitedcoders-android/blob/master/src/com/unitedcoders/android/examples/download/DownloadProgress.java](https://github.com/nheid/unitedcoders-android/blob/master/src/com/unitedcoders/android/examples/download/DownloadProgress.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:59:20.233

这将起作用：

```
 notificationManager =
    (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
   myNotification = new Notification(R.drawable.ic_launcher,
     "Notification!",
     System.currentTimeMillis());
   Context context = getApplicationContext();
   String notificationTitle = "Get Other APW Co. Apps on Play!";
   String notificationText = ""Want more? All our apps are free!"";
   Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(SOME_URL));
   PendingIntent pendingIntent
     = PendingIntent.getActivity(AndroidNotification.this,
       0, myIntent,
       Intent.FLAG_ACTIVITY_NEW_TASK);
   myNotification.defaults |= Notification.DEFAULT_SOUND;
   myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
   myNotification.setLatestEventInfo(context,
      notificationTitle,
      notificationText,
      pendingIntent);
   notificationManager.notify(1, myNotification);

  }}); 
```

# javascript - jquery统一选择和取消选择所有复选框

> ID：14729286
> 
> 赞同：3
> 
> 时间：2013-02-06T12:37:39.737
> 
> 标签：javascript, jquery

我对全选/取消选择复选框有疑问

**代码在这里**

```
<input type="checkbox" value="" onclick="checkedAll();" name="checkall" id="checkall"/>

  function checkedAll() {
      $('.all span').click(function () {
       if(document.getElementById("checkall").checked == true)
       {
         $('#uniform-undefined span').addClass('checked');      
       }
       else
       {
         $('#uniform-undefined span').removeClass('checked');
       }
     });
     $.uniform.update();
   } 
```

当我选择复选框（所有复选框为真）时，jQuery 添加 span 标签`class="checked"`

```
 spanTag.addClass(options.checkedClass); 
```

并且没有一个复选框处于活动状态。

```
<li><label><div id="uniform-undefined" class="checker">">
   <span class="checked"><input type="checkbox" value="F2" style="opacity: 0;"></span>
   </div><b>1 </b>
 </label></li>

<li><label><div id="uniform-undefined" class="checker">
   <span class="checked"><input type="checkbox" value="F2" style="opacity: 0;"></span>
   </div><b>2 </b>
</label></li>

<li><label><div id="uniform-undefined" class="checker">
    <span class="checked"><input type="checkbox" value="F3" style="opacity: 0;"></span>
    </div><b>3 </b>
</label></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:02:29.470

试试这个...

```
 $('#all').on('click', function(){
        $(':checkbox').attr("checked",$(this).is(':checked'));
  }); 
```

或者对于 las 版本。

```
 $('#all').on('click', function(){
        $(':checkbox').prop("checked",$(this).is(':checked'));
  }); 
```

请参阅此[示例](http://jsfiddle.net/Dfzdh/)...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:54:11.510

你的目标是这样的吗？

```
$('document').ready(function(){
    $('#all').click(function(){
        if($(this).is(':checked')){
            $('.group').attr("checked",true);
        }
        else{
            $('.group').attr("checked",false);
        }
    })
}); 
```

看这个[演示](http://jsfiddle.net/nishantjani10/uSX6p/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T07:06:33.733

```
$('document').ready(function(){
    $('#all').click(function(){
        if($(this).is(':checked')){
            $('.group').attr("checked",true);
        }
        else{
            $('.group').attr("checked",false);
        }
    })
}); 
```

这是代码仅第一次正确工作。如果我第二次单击选中所有复选框，则它不起作用。它只是被检查了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T10:27:18.627

最简单的解决方案调用uniform.update：

```
 $(".all span").each(function () {
            $(this).prop("checked", document.getElementById("checkall").checked );
        });
        $.uniform.update(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-07-08T11:09:23.247

```
<script>
$('document').ready(function(){

    $('#selectAll').click(function(){
        if($(this).is(':checked')){
            $('#uniform-undefined span').attr("class","checked");
        }
        else{
            $('#uniform-undefined span').attr("class","");
        }
    })
});
</script> 
```

# c# - 如何使用 JQuery getJSON 验证用户名

> ID：14729288
> 
> 赞同：2
> 
> 时间：2013-02-06T12:37:46.170
> 
> 标签：c#, jquery, asp.net, json

我已按照[此处](http://www.4guysfromrolla.com/articles/022311-1.aspx)找到的教程来基本了解标题所说的内容。到目前为止，我得出的结论是`$.getJSON`简单地不起作用。

我已经将我的代码缩减为：

```
<script type="text/javascript">
        $(document).ready(function () {

            var usernameUnavailableRow = $('#usernameUnavailableRow');
            var availabilityMessage = $('#availabilityMessage');

            $("#UserName").hover(function () {
                //usernameUnavailableRow.hide();
            });

            $("#UserName").blur(function () {
            $.getJSON('/OCDB/UsernameAvailable.aspx?' + escape($(this).val()), function (results) {
                if (results.available) {
                    alert("available"); //Just checking if anything even returns
                } else {
                    alert("not available"); //Just checking if anything even returns
                }
            });
        });
        });
    </script>

<table>
         <tr>
            <td>
               <input id="UserName"></input>
            </td>
         </tr>
         <tr id="usernameUnavailableRow">
            <td>
               <span id="availabilityMessage">k</span>
            </td>
         </tr>
</table> 
```

我的`UsernameAvailable.aspx`页面正好显示了这一点：
`{ "available" : "false"}`
使用时
`<%@ Page Language="C#" CodeFile="UsernameAvailable.aspx.cs" Inherits="UsernameAvailable" ContentType="application/json" %>`

然而，事件中什么也没有发生`getJson`。

谁能告诉我哪里出错了，因为我看不到我的错误。

**编辑**
更改代码以删除 Javascript 产生的 404 错误（感谢@Archer），结果现在总是返回`True`。我检查了该页面是否`False`以使用的用户名返回，并且可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:47:33.503

是`results`还是`item`在`alert(item);`（请再次检查您的代码）

此外，如果你得到一个有效`json`的，那么它将显示在`alert`，在警报中它只会显示一个`object`。所以要测试它，你需要写`console.log(results);`代替`alert(item);`

你可以写一件事来`<input id="UserName"/>`代替`<input id="UserName"></input>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:48:29.277

您在该链接上忽略了这一行：

> UsernameAvailable.aspx 页面期望在查询字符串中提供所需的用户名，如下所示：UsernameAvailable.aspx? *所需的用户名*。

你需要这样做：

```
$.getJSON('UsernameAvailable.aspx?' + escape($(this).val()), function (results){
    if (results.available) {
        // available
    }
    else{
        // unavailable
    }
}); 
```

# android - 如何在android中将标签对齐到中心？

> ID：14729290
> 
> 赞同：0
> 
> 时间：2013-02-06T12:38:03.010
> 
> 标签：android, android-tablelayout

那是我的标签。 ![我的标签](../Images/a8c69848dd047eb776ed2c6c4b5882de.png)

我想将它对齐到屏幕的中心。（水平和垂直）

该表是从 java 动态创建的。

我试过设置

```
TableLayout t1 = (TableLayout)findViewById(R.id.maintable);
t1.setGravity(Gravity.CENTER); 
```

但它只从顶部对齐。

```
public class TabActivity extends Activity {

Trny t = Trny.getInstance();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tab);

    TableLayout t1 = (TableLayout)findViewById(R.id.maintable);
    t1.setGravity(Gravity.CENTER);

        // first row of table   

        TableRow tr = new TableRow(this);

        TextView place = new TextView(this);
        poradi.setText("P"  );
        poradi.setPadding(10, 5, 10, 5);
        tr.addView(place);

        TextView nameOfTeam = new TextView(this);
        nazTymu.setText("Nazev"  );
        nazTymu.setPadding(10, 5, 10, 5);
        tr.addView(nameOfTeam);

        TextView matchesPlayed = new TextView(this);
        odehraneZapasy.setText("Z" );
        odehraneZapasy.setPadding(10, 5, 10, 5);
        tr.addView(matchesPlayed);

        TextView numbefOfWins = new TextView(this);
        pocetVyher.setText("V" );
        pocetVyher.setPadding(10, 5, 10, 5);
        tr.addView(numbefOfWins);

        TextView numberOfTies = new TextView(this);
        pocetRemiz.setText("R" );
        pocetRemiz.setPadding(10, 5, 10, 5);
        tr.addView(numberOfTies);

        TextView numberOfLoses = new TextView(this);
        pocetProher.setText("P" );
        pocetProher.setPadding(10, 5, 10, 5);
        tr.addView(numberOfLoses);

        TextView goalsScored = new TextView(this);
        skorePlus.setText("VG" );
        skorePlus.setPadding(10, 5, 10, 5);
        tr.addView(goalsScored);

        TextView goalsGained = new TextView(this);
        skoreMinus.setText("OG" );
        skoreMinus.setPadding(10, 5, 10, 5);
        tr.addView(goalsGained);

        TextView numberOfPoints = new TextView(this);
        pocBodu.setText("B" );
        pocBodu.setPadding(10, 5, 10, 5);
        tr.addView(numberOfPoints);

        t1.addView(tr);

                 //more rows dynamically created from java

}

 } 
```

XML 文件

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"   
            android:id="@+id/maintable" >
            </TableLayout> 
```

我怎样才能做到这一点？多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:45:43.240

change your layout XML to this

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

        <TableLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"   
        android:id="@+id/maintable"
        android:layout_centerInParent="true" >
        </TableLayout>
</RelativeLayout> 
```

# r - 如何使用逻辑运算符获得等效于 R ifelse 的功能

> ID：14729291
> 
> 赞同：0
> 
> 时间：2013-02-06T12:38:04.487
> 
> 标签：r, operators, logical-operators

请任何人都可以建议我如何将以下语句变成一个可以做同样事情但不使用 ifelse 的语句？

```
<-ifelse(y>=50, 0.2*x+0.8*y, ifelse(y<50 & x>70, y+10, ifelse(y<50 & x<70, y))) 

x=80
y=60 
```

所以我最终的代码应该给出 64 的答案——选择第一个条件。然后我将对其进行测试以确保其他 3 个条件对于不同的 x 和 y 值给出正确的结果

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:22:37.937

这应该有效：

```
finalmark <- (x * 0.2 + y * 0.8) * (y >= 50) + (y + 10 * (x > 70)) * (y < 50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:01:39.440

像这样的东西？

```
if(y>=50){
    0.2*x+0.8*y 
     }else{
      if(y<50 & x>70){
         y+10 
          }else{ 
            if(y<50 & x<70){
               y 
              }else{
               "OMG I did not expect this scenario"
            }
        }
    } 
```

尝试： `y=45; x=70`看看为什么我有最后一个条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:17:37.043

如果 y 是一个数字，那么一旦你测试了 y > = 50，那么 y*必须*小于 50，所以不要继续测试。同样，一旦找到 x > 70 ，就不需要最后一个`ifelse`. 您没有 x = 70 的回报。我的猜测是您想在那里测试 <= 或 >= 情况。

```
ifelse(y>=50, 0.2*x+0.8*y, ifelse(x>70, y+10, y)) 
```

在标量中

```
if(y >= 50){
  0.2*x+0.8*y
}else if(x > 70){
  y+10
}else y 
```

鉴于您在一般情况下似乎很难编写逻辑，我建议您发布一个更完整的问题。有可能（很可能）你正在做一些你真的不想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:20:14.430

您可以采取多种方法。下面是构建函数“f”的几个示例，以便使用“ifelse”语句以外的逻辑来满足问题中列出的标准。 *注意：我还对原始帖子添加了一项修改，因为“x=70”会破坏逻辑。我将 'x>=70' 添加到第二个标准。*

**选项 1**：使用标准的“if / else if / else”逻辑块。就个人而言，我喜欢这个选项，因为它很容易阅读。

```
f <- function(x, y){
    if (y>= 50){
        return(0.2*x+0.8*y)
    } else if (y < 50 & x >= 70){
        return(y+10)
    } else {
        return(y)
    }
} 
```

**选项2**：将您的两个逻辑测试（实际上只有两个）组合成一个字符串，并使用一个开关。请注意，最终和未命名的选项被视为“其他”。

```
f <- function(x, y){
    return(
        switch(paste(x >= 70, y >= 50, sep=""), 
            TRUEFALSE = y + 10, 
            FALSEFALSE = y,
            0.2*x+0.8*y 
        )
    )
} 
```

**选项 3**：订购您的“if”语句以减少逻辑比较。*如果您有一个大数据集或非常*有限的内存，这就是要做的事情。这有点难以解决，因为您必须阅读整个块才能完全理解它。如果您没有内存或周期限制，选项 1 会更好。

```
f <- function(x, y){
    if (y >= 50){
        return(0.2*x+0.8*y)
    } else {
        if (x >=70){
            return(y+10)
        } else {
            return(y)
        }
    }
} 
```

还有其他选择，但这些是最容易想到的。

# java - 为自签名 JWS 应用程序配置可信 CA

> ID：14729293
> 
> 赞同：2
> 
> 时间：2013-02-06T12:38:10.217
> 
> 标签：java, ssl, code-signing, java-web-start, certificate-authority

1.  我有一个使用 OpenSSL 制作的自签名证书颁发机构。
2.  我使用这个(1) 授权来创建用于签署 JAR 的 SSL 证书。
3.  我制作了一个 JaveWebStart 应用程序并使用证书对其进行了签名 (2)
4.  我有一台安装了 JDK 1.7.0_13 的客户端机器。我使用以下命令将 CA 证书（1）导入 JDK：

    ```
    $JAVA_HOME/bin/keytool -import -trustcacerts -alias my-root-ca \
    -file root.crt -keystore $JAVA_HOME/jre/lib/security/cacerts 
    ```

5.  我使用 JDK (4) 启动应用程序 (3)，但我看到发布者未知 ![安全警告](../Images/3a0e8152acccbe192f8e551814b1fc92.png)

6.  如果我按“更多信息”而不是看到我的证书链，那么 jar 很可能已正确签名。

我错过了什么？如何让 JWS 认识到我的根 CA(1) 是受信任的？

# entity-framework - Entity Framework 在生成数据库时创建下划线列

> ID：14729294
> 
> 赞同：7
> 
> 时间：2013-02-06T12:38:11.290
> 
> 标签：entity-framework

我有一个简单的对象模型如下...

```
public class Product
{
    public long ProductId { get; set; }
    public int CategoryId { get; set; }
    public Category Category { get; set; }
} 
```

和

```
public class Category
{
    public long CategoryId { get; set; }
    public List<Product> Products { get; set; }
} 
```

使用 EntityFramework 生成底层数据库会产生以下架构...

**产品**

*   产品编号
*   类别 ID
*   Category_CategoryId

**类别**

*   类别 ID

在**Products**表中，**CategoryId**列始终设置为 0，而**Category_CategoryId**列包含产品所属类别的 id。

如何在**CategoryId**列中设置类别 id 并防止生成**Category_CategoryId**列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T12:54:50.243

将[ForeignKey](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.foreignkeyattribute.aspx)属性应用于`Category`OR`CategoryId`属性。并更改`CategoryId`属性类型以匹配`CategoryId`类`Category`（都应该是 long 或 int）。

```
public class Product
{
    public long ProductId { get; set; }
    public long CategoryId { get; set; }
    [ForeignKey("CategoryId")]
    public Category Category { get; set; }
}

public class Category
{
    public long CategoryId { get; set; }
    public List<Product> Products { get; set; }
} 
```

* * *

或者

```
public class Product
{
    public long ProductId { get; set; }
    [ForeignKey("Category")]
    public long CategoryId { get; set; }
    public Category Category { get; set; }
} 
```

* * *

您可以通过流利的映射做同样的事情：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Product>()
        .HasRequired(p => p.Category)
        .WithMany(c => c.Products)
        .HasForeignKey(p => p.CategoryId)
        .WillCascadeOnDelete(false);

    base.OnModelCreating(modelBuilder);
} 
```

# css - 将 div 的内容移动到代码底部

> ID：14729298
> 
> 赞同：1
> 
> 时间：2013-02-06T12:38:32.577
> 
> 标签：css, html, web, document-ready

在我目前正在处理的网站上，我有一个加载缓慢的 div，导致页面加载缓慢，但也会跳转，因为直到这个缓慢的 div 加载后，才会加载所有位置元素。我无法控制此 div 的内容，因为 div 的内容来自外部来源。所以我想知道我是否可以将此 div 的内容移动到我的代码底部，以便它在我的页面的其余部分之后加载，同时仍将内容的位置保持在网页的同一位置？类似于人们对一些 java 脚本代码所做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:43:03.080

您可以使用 CSS 来定位 div 并将其放在最后。或者 javascript 实际上是个好主意，在 window.onload() 函数中加载内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:45:48.387

您可以找到 2 个 div - 一个在它应该在的位置，第二个在页面底部。这两个元素最初都应该不显示。加载页面后，将使用 JavaScript 将“伪”div 的内部内容复制到您需要的 div 并为此制作显示块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:18:18.633

就像谢尔盖说的那样做

头窗口中的 javascript.onLoad = function() { switchDivs(); }

HTML 上面你想要内容的地方

```
<div id="whereYouWantIt"></div> 
```

页面其余部分的更多 HTML

```
<div id="contentIsInHere"></div> 
```

这里的javascript用于切换内容的功能。可选择在此处调用包含此函数的外部脚本。

```
<script> 
function switchDivs() {
  document.getElementById("whereYouWantIt").innerHTML = document.getElementById("contentIsInHere").innerHTML;
  document.getElementById("contentIsInHere").innerHTML = "";
  document.getElementById("whereYouWantIt").style.display = "inline";
}
</script>

</body> 
```

CSS

```
#whereYouWantIt {
    display:none;
    other styles ...
}
#contentIsInHere {
    display:none;
    no other styles needed
} 
```

# java - 使用 atomic 生成唯一 id

> ID：14729305
> 
> 赞同：1
> 
> 时间：2013-02-06T12:38:50.423
> 
> 标签：java, atomic, uniqueidentifier, java.util.concurrent

```
class ABC{
private static Random random = new Random();
private static AtomicLong uniqueLongId = new AtomicLong(System.currentTimeMillis());

public static long getUniqueLongId(){

            long id = uniqueLongId.incrementAndGet();
            long uniqueID = Math.abs(random.nextLong()) + id;
            return uniqueID;

            //the above code we can write in one line
    //return Math.abs(random.nextLong())+uniqueLongId.incrementAndGet();

}
} 
```

上述方法 getUniqueLongId() 是否会在多线程环境中为我提供唯一 ID。我关心的是：知道 uniqueLongId 是原子的并假设调用 incrementAndGet() 将是线程安全的调用，但代码的另一部分是不同步的。这不意味着方法 getUniqueLongId() 本身不是线程安全的吗？因此可能不一定会返回唯一的 ID？

请解释..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:04:02.580

[Java 7 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)写道：

> 的实例`java.util.Random`是线程安全的。但是，跨线程并发使用同一`java.util.Random`实例可能会遇到争用，从而导致性能下降。考虑改为[`ThreadLocalRandom`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html)在多线程设计中使用。

因此，您的代码在 Java 7 中是线程安全的。每个操作要么是对线程安全方法的调用，要么仅对局部变量进行操作。而且您不需要原子性，即您不需要将下一个序列号与下一个随机数配对。

正如（根据您的评论）在旧版本的 API 文档中没有这样的保证，理论上实现可能是非线程安全的。但是，查看`src.zip`Sun JDK 1.4.2.19（我所拥有的最旧版本）中的代码已经使用了原子变量，因此在实践中提供了线程安全的行为。

也就是说，您的代码还有许多其他问题。就像上面引用的那样，性能可能很差。正如[assylias 已经在评论中写的那样](https://stackoverflow.com/questions/14729305/using-atomic-for-generating-unique-id#comment20606918_14729305)，这种方法不会比简单的方法给你更多的唯一数字`Random`。此外，[`Math.abs(Long.MIN_VALUE)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#abs%28long%29)仍然是负数，正数随机数加上 id 可能会导致溢出和回绕。因此，如果您需要正数，则必须更加小心。决赛`uniqueID &= 0x7fffffffffffffffL`可能比`Math.abs`一路走来更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:04:48.797

它确实是线程安全的。MvG 的回答解释了原因。

正如@assylias 所指出的，它甚至可能不会在单线程环境中产生唯一的 ID。

值得研究一下[`ObjectId`](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/org/bson/types/ObjectId.java)MongoDB的生成机制。

引入了四个参数以确保唯一性。

```
a 4-byte timestamp,
a 3-byte machine identifier,
a 2-byte process id, and
a 3-byte counter. 
```

话虽[`UUID`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html)如此，JDK 中有一个类可以现成的用于此目的。

[需要注意](http://bugs.sun.com/view_bug.do?bug_id=6611830)的是，在 JDK 7 之前它不是线程安全的。

# asp.net - 如何在命名空间中选择 xml 元素？

> ID：14729307
> 
> 赞同：0
> 
> 时间：2013-02-06T12:38:57.813
> 
> 标签：asp.net, html, xslt, namespaces

我试图理解这个 xslt。

下面的 xslt 命令究竟选择了什么？什么是“following-sibling”、“aic”和“pstyle”？

“aic”似乎是一个名称空间。

下面的 xslt 使用什么 xml 输入？

```
<xsl:stylesheet exclude-result-prefixes="aic" 
    version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:aic="http://ns.adobe.com/AdobeInCopy/2.0/" >

<xsl:template match="/">

    <xsl:value-of select="following-sibling::aic:pstyle"/>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:54:21.213

```
following-sibling::aic:pstyle 
```

*   `following-sibling`是*轴*，表示查找节点的“方向”，在这种情况下，它查看按文档顺序位于当前上下文节点之后但与当前节点共享相同父节点的节点。如果您不指定轴，则默认值为`child`，它会查找当前上下文节点的子节点。

*   `aic:pstyle`是一种选择器，用于查找本地名称为且名称空间 URI 为（映射到样式表中的前缀）的*元素。*`pstyle``http://ns.adobe.com/AdobeInCopy/2.0/``aic`

源 XML 不需要使用相同的前缀，例如，表达式将匹配看起来像的元素

```
<pstyle xmlns="http://ns.adobe.com/AdobeInCopy/2.0/"> 
```

或者

```
<foo:pstyle xmlns:foo="http://ns.adobe.com/AdobeInCopy/2.0/"> 
```

在原始 XML 中。

正如 JLRishe 指出的那样，如果当前上下文是文档节点`/`，则此特定 XPath 将不匹配任何内容，要使表达式有意义，它必须在当前节点是元素（或注释、处理指令或文本节点）至少向下两层，即文档元素的子元素或更深。

```
<example xmlns="http://ns.adobe.com/AdobeInCopy/2.0/">
  <pstyle id="1"/>
  <foo/>
  <pstyle id="2"/>
  <pstyle id="3"/>
</example> 
```

如果将该`foo`元素作为上下文节点执行，则表达式将选择 pstyle 元素 2 和 3，但不会选择 1。

# c++ - C ++将数据从数据文件输入到结构变量中

> ID：14729308
> 
> 赞同：0
> 
> 时间：2013-02-06T12:38:58.113
> 
> 标签：c++, arrays, file, struct, fstream

我有一个包含名称和数字的文本文件。名称或字符串包含 15 个字符，我需要将其放入字符串中。我正在处理结构。

```
struct grybautojas{
    string vardas;
    int barav, raudon, lep, diena;
}gryb[100]; 
```

之后，有一些简单的计算是正确的，问题是，它只读取一次所有内容。在获取第一个“盒子”信息后，它就停止了。结果文件中的所有其他内容要么作为字符串为空白，要么作为整数为 0。

这是我的输入功能：

```
void ivedimas(){
    char eil[16];
    int b,r,l;

    inFile >> n;
    inFile.ignore();

    for(int i=0;i<n;i++){
        inFile.get(eil,15);
        gryb[i].vardas=eil;
        inFile >> gryb[i].diena;

        gryb[i].barav=0, gryb[i].raudon=0, gryb[i].lep=0;

        for(int m=0;m<gryb[i].diena;m++){
            inFile >> b >> r >> l;
            gryb[i].barav+=b, gryb[i].raudon+=r, gryb[i].lep+=l;
        }

        inFile.ignore();
    }

    inFile.close();
} 
```

这是包含数据的文件：

```
4
Petras        3
5 13 8
4 0  5 
16 1 0 
Algis         1 
9 6 13 
Jurgis        4 
4 14 2 
4 4  15 
16 15 251 
1  2  3 
Rita          2 
6 65 4 
4 4  13 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:46:17.920

```
 inFile.get(eil,15);

    Rita          2 
    Petras        3
    00000000011111
    12345678901234 
```

我不数 15，我数 14。另外，您的某些行的末尾似乎有空格。您应该重写您的输入逻辑，使其*更加*健壮。读取*行*并解析它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:53:43.083

这一行：

```
inFile.get(eil,15); 
```

正在读取名称后面的数字。

When you try to read the number (3 in your example), you get the next one (5) instead.

# c# - 使用 Visual Studio 2010 在 C# 中显示视频

> ID：14729311
> 
> 赞同：0
> 
> 时间：2013-02-06T12:39:04.603
> 
> 标签：c#

在开始之前，我使用的是 Visual Studio C# Ultimate 2010

我制作了一个小型 WPF 程序，当我点击一个按钮时它只显示一个视频。当我点击我的播放按钮时，视频不会显示，但在朋友的电脑上会显示。使用完全相同的代码。所以我认为这是一个版本问题，但我不确定。我检查了 Visual Studio 的版本，但我们有相同的版本。

你有解决方案的想法吗？

最好的问候，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:52:29.153

正如我在评论中所说，可能缺少编解码器。如果它在朋友的计算机上工作，这可能不是编程问题。

使用像[GSpot](http://www.headbands.com/gspot/)这样的工具来查找用于该特定视频文件的编解码器。然后，您可以下载特定的编解码器，或者为了避免将来出现编解码器问题，您可能需要安装[K-Lite（标准）编解码器包之类的](http://codecguide.com/download_k-lite_codec_pack_standard.htm)东西（当然，请确保缺少的编解码器是包的一部分）。

不需要重新启动。

# java - 将行添加到链接哈希列表

> ID：14729313
> 
> 赞同：0
> 
> 时间：2013-02-06T12:39:13.350
> 
> 标签：java, list

我有以下哈希映射，但我需要可以添加重复行的映射，我应该更改它吗？

我需要完全相同的**结构**

```
public static LinkedHashMap<String, HashMap<String, String>> moData = new LinkedHashMap<String, HashMap<String, String>>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:41:55.213

谷歌已经实现了一个集合[LinkedHashMultiMap](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/LinkedHashMultimap.html)。也许使用它？

# java - 单线程上的清爽桂

> ID：14729314
> 
> 赞同：1
> 
> 时间：2013-02-06T12:39:13.477
> 
> 标签：java, multithreading, swing, repaint, paintcomponent

我正在编写一个应用程序，我想在地图上绘制一些标记和图片。但是我遇到了问题。当我按下按钮时，我正在以 30 毫秒的延迟启动线程。但实际上它看起来像是在主线程上运行导致 gui 停止刷新并且无法对其执行任何操作。这是我的代码

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Line2D;

import javax.swing.JInternalFrame;
import javax.swing.JPanel;

public class MapDrawer extends JPanel
{
     Graphics testGrafika;
     DrawerThread drawingThread;

    public MapDrawer(JPanel drawPanel)
    {
        drawPanel.add(this);
        testGrafika=drawPanel.getGraphics();    
        paintComponent(testGrafika);
        drawingThread=new DrawerThread();
        drawingThread.run();            
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponents(g);
        this.setBackground(Color.WHITE);
        g.setColor(Color.BLUE);
        g.fillRect(10, 25, 200, 200);
    }

    public Graphics getGraphics()
    {
        return testGrafika;         
    }

    public class DrawerThread extends Thread implements Runnable
    {   
        @Override
        public void run()
        {
            while(true)
            {
                repaint();
                try {
                    DrawerThread.sleep(30);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

这是我的 GUI 类：

```
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import java.awt.BorderLayout;
import javax.swing.JButton;
import java.awt.CardLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.LayoutStyle.ComponentPlacement;

import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.Insets;
import java.awt.FlowLayout;
import javax.swing.border.EtchedBorder;
import javax.swing.JToolBar;
import javax.swing.SwingConstants;
import org.eclipse.wb.swing.FocusTraversalOnArray;

import soft.MapDrawer;
import soft.MapView;

import java.awt.Component;
import javax.swing.JToggleButton;
import javax.swing.JRadioButton;
import javax.swing.JInternalFrame;
import java.awt.Canvas;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.Dimension;
import javax.swing.JLayeredPane;

public class MainWindow {

    private JFrame frame;
    private JMenu MenuBasicActions;
    private JInternalFrame mapFrameRef;
    private JPanel drawPanelRef;

    /**
     * Launch the application.
     */
    public static void main(String[] args)
    {   
        EventQueue.invokeLater(new Runnable()

        {
            public void run() 
            {
                try 
                {
                    MainWindow window = new MainWindow();
                    window.frame.setVisible(true);
                } catch (Exception e)
                {
                    e.printStackTrace();
                }
            }
        });

    }

    /**
     * Create the application.
     */
    public MainWindow()
    {
        initialize();               
    }

    public JFrame getMainFrame()
    {
        return frame;
    }

    public JPanel getDrawPanel()
    {
        return drawPanelRef;    
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setVisible(true);
        frame.setBounds(100, 100, 1024, 768);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);           

        JMenuBar menuBarUpper = new JMenuBar();
        frame.setJMenuBar(menuBarUpper);

        MenuBasicActions = new JMenu("GPS Settings");
        menuBarUpper.add(MenuBasicActions);

        JMenuItem mntmNewMenuItem = new JMenuItem("New menu item");
        MenuBasicActions.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 = new JMenuItem("New menu item");
        MenuBasicActions.add(mntmNewMenuItem_1);

        JMenuItem mntmNewMenuItem_2 = new JMenuItem("New menu item");
        MenuBasicActions.add(mntmNewMenuItem_2);

        JMenu DevicesMenu = new JMenu("Devices");
        menuBarUpper.add(DevicesMenu);

        JMenuItem mntmNewMenuItem_3 = new JMenuItem("New menu item");
        DevicesMenu.add(mntmNewMenuItem_3);

        JMenuItem mntmNewMenuItem_4 = new JMenuItem("New menu item");
        DevicesMenu.add(mntmNewMenuItem_4);

        JMenu HelpMenu = new JMenu("Help");
        menuBarUpper.add(HelpMenu); 

        JToolBar toolBar = new JToolBar();
        toolBar.setOrientation(SwingConstants.VERTICAL);
        frame.getContentPane().add(toolBar, BorderLayout.WEST);

        JButton btnNewButton_1 = new JButton("New button");
        btnNewButton_1.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                paint();
            }
        });
        toolBar.add(btnNewButton_1);

        JButton btnNewButton = new JButton("New button");
        toolBar.add(btnNewButton);

        JButton btnNewButton_2 = new JButton("New button");
        toolBar.add(btnNewButton_2);

        JButton btnNewButton_3 = new JButton("New button");
        toolBar.add(btnNewButton_3);
        toolBar.setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{btnNewButton_1, btnNewButton}));

        JInternalFrame mapFrame = new JInternalFrame("Military Tracking System");
        mapFrame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        frame.getContentPane().add(mapFrame, BorderLayout.CENTER);
        mapFrame.setVisible(true);

        JPanel drawPanel = new JPanel();
        drawPanel.setOpaque(false);
        mapFrame.setGlassPane(drawPanel);
        drawPanel.setVisible(true);

        drawPanel.setBorder(null);
        //mapFrame.getContentPane().add(drawPanel, BorderLayout.CENTER);

        frame.setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{frame.getContentPane(), toolBar, btnNewButton_1, btnNewButton, btnNewButton_2, btnNewButton_3, menuBarUpper, MenuBasicActions, mntmNewMenuItem, mntmNewMenuItem_1, mntmNewMenuItem_2, DevicesMenu, mntmNewMenuItem_3, mntmNewMenuItem_4, HelpMenu}));

        MapView hlavnaMapa=new MapView();
        hlavnaMapa.Init(mapFrame);  
        mapFrameRef=mapFrame;
        drawPanelRef=drawPanel;
    }

    public void paint()
    {
        MapDrawer drawer=new MapDrawer(drawPanelRef);
        //drawer.paintComponent(drawer.getGraphics());          
    }
} 
```

我想做的是在一个线程上运行 gui 并在另一个线程上绘制对象，这样我就可以控制 gui。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:49:07.687

为了启动`Thread`你应该调用`drawingThread.start();`而不是`run()`.

[`start()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29)然后将启动一个新线程并调用`run()`该线程内的方法。如果您改为调用`run()`它，它将在与调用者相同的线程上运行。

# linux - 如何查看使用“su”的登录用户

> ID：14729318
> 
> 赞同：0
> 
> 时间：2013-02-06T12:39:16.880
> 
> 标签：linux, su

如果我使用登录 shell 以 root 身份登录，那么“who”或“users”命令将显示 root 用户的条目。但是，如果我使用 user1 登录，然后使用：

```
'su - root' 
```

然后“谁”和“用户”命令将不会显示根条目。

有没有办法找出我的系统中是否有登录用户当前已切换到 root（或任何其他帐户）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:56:10.503

看`/var/log/secure`文件。

搜索这样的行：

```
Feb  6 14:12:09 myhost su: pam_unix(su-l:session): session opened for user root by root(uid=999) 
```

`uid`字符串末尾的 是原始用户之一。

否则，您可以搜索执行`su`命令的 shell 并检查谁是所有者。

```
pgrep su | \
xargs -i sh -c "ps -p {} -o ppid=" | \
xargs -i ps -p {} -f 
```

结果将是当前正在运行的用户的 uid`su`

*我敢肯定有一种更优雅的方法，但现在我没有想到更好的方法。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:20:03.440

感谢 Davide Berra 的回答，我想我已经找到了我想要的东西。

```
> who | sort -k2 > /tmp/whoresult
> pgrep -x su | xargs -i ps hu -p{} | awk '{printf $7 " ";for (i=11; i<=NF; i++) printf $i " "; printf "\n"}' | sort -k1 | join -1 2 -2 1 /tmp/whoresult - 
```

输出类似于：

```
pts/3 user1 2013-02-06 16:35 (:0.0) su - root    #logged in as user1 and executed 'sudo - root'
pts/5 user1 2013-02-06 16:51 (:0.0) su           #logged in as user1 executed 'sudo su'
tty2 root 2013-02-06 17:07 su - user1            #logged in as root and executed 'sudo - user1' 
```

# sql - 表上只显示最新数据

> ID：14729319
> 
> 赞同：0
> 
> 时间：2013-02-06T12:39:18.393
> 
> 标签：sql, sql-server, sql-server-2005

如何创建表或触发如下操作？

```
 Date        Data

   2/6/2013         2
   2/6/2013         1
   2/6/2013         3
   2/6/2013         1
   2/6/2013         0 
```

顶部的表格将交替作为下表的输入，但只有最后一个输入将显示在下表中。**输入将交替从 2 到 0**

只需说输入从 2 - 1 - 3 - 1 - 0 开始，表格上只会显示 0。
如何制作触发器？0 只有数据，不是唯一的东西。只有最新的输入会显示在表格上。记住下面的表格触发顶部的表格来获取数据。
我只想每次插入新输入时，删除已经存在的数据，只显示新输入

```
 Data
    0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:47:03.220

我认为您只需要一个显示最新值的视图。

以下将是您用于视图的查询...

```
SELECT TOP 1 Data FROM Table ORDER BY Date DESC 
```

**编辑**要完全按照您的意愿进行操作，您只需要一个用于插入的存储过程。

```
-- Copy old value into history
INSERT INTO History SELECT * From Table WHERE yourCondition = True
-- Delete old value
DELETE FROM Table WHERE yourCondition = True
-- Insert new value
INSERT INTO Table VALUES(@Date, @Data) 
```

现在 Table 将仅包含 1 行具有最新值，而 History 将包含所有旧值。这是完全不标准和不合理的，但应该正是你想要的。如果您不需要历史记录，您可以删除第一个 INSERT 语句。

# entity-framework - SaveChanges() 操作仅更新“内存”值

> ID：14729321
> 
> 赞同：0
> 
> 时间：2013-02-06T12:39:28.890
> 
> 标签：entity-framework, linq-to-entities, updates

我使用简单的控制台应用程序和数据库并生成 .edmx 文件。当我插入新行并跟踪更新时，我发现一切正常。但是当我去查看我的数据库的内容时，我没有看到任何变化。看起来我已经更新了我的数据库的“内存实例”。我应该在我的 ConnectionString OR/AND .edmx 文件中更改什么以更新真实数据库？
**更新**

```
 <connectionStrings>
            <add name="ProductsEntities" connectionString="metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\Products.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    </connectionStrings>

    static void Main(string[] args)
    {
         var context = new ProductsEntities(ConfigurationManager.ConnectionStrings["ProductsEntities"].ConnectionString);
         var productForInsert = new Product {CompanyName = "Insert Name", Price = new decimal(22), Description = "dd", Name = "ddd"};
         context.Products.AddObject(productForInsert);
         context.SaveChanges();
         // return only new row as expected ([database rows].CompanyName == "Toshiba")
         // tracking database rows returns expected result too
         var result = context.Products.Where(p => p.CompanyName != "Toshiba");
         foreach (var b in result)
         {
            Console.WriteLine(b.CompanyName);
         }
    } 
```

# java - DeployableContainer must be specified error when running Arquillian

> ID：14729329
> 
> 赞同：13
> 
> 时间：2013-02-06T12:40:15.643
> 
> 标签：java, junit, jboss-arquillian

I've been trying to run this Arquillian example

[https://github.com/arquillian/arquillian-examples/tree/master/arquillian-tutorial](https://github.com/arquillian/arquillian-examples/tree/master/arquillian-tutorial)

There is no error when imported in Eclipse

However I am getting this error when I run as **JUnit Test**:

```
java.lang.RuntimeException: Could not create new instance of class org.jboss.arquillian.test.impl.EventTestRunnerAdaptor
    at org.jboss.arquillian.test.spi.SecurityActions.newInstance(SecurityActions.java:160)
    at org.jboss.arquillian.test.spi.SecurityActions.newInstance(SecurityActions.java:111)
    at org.jboss.arquillian.test.spi.SecurityActions.newInstance(SecurityActions.java:97)
    at org.jboss.arquillian.test.spi.TestRunnerAdaptorBuilder.build(TestRunnerAdaptorBuilder.java:52)
    at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:93)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.jboss.arquillian.test.spi.SecurityActions.newInstance(SecurityActions.java:156)
    ... 10 more
Caused by: org.jboss.arquillian.container.impl.ContainerCreationException: Could not create Container jbossas-managed
    at org.jboss.arquillian.container.impl.LocalContainerRegistry.create(LocalContainerRegistry.java:85)
    at org.jboss.arquillian.container.impl.client.container.ContainerRegistryCreator.createRegistry(ContainerRegistryCreator.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
    at org.jboss.arquillian.core.impl.ManagerImpl.bindAndFire(ManagerImpl.java:236)
    at org.jboss.arquillian.core.impl.InstanceImpl.set(InstanceImpl.java:74)
    at org.jboss.arquillian.config.impl.extension.ConfigurationRegistrar.loadConfiguration(ConfigurationRegistrar.java:68)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
    at org.jboss.arquillian.core.impl.ManagerImpl.start(ManagerImpl.java:261)
    at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.<init>(EventTestRunnerAdaptor.java:56)
    ... 15 more
Caused by: java.lang.IllegalArgumentException: DeployableContainer must be specified
    at org.jboss.arquillian.core.spi.Validate.notNull(Validate.java:44)
    at org.jboss.arquillian.container.impl.ContainerImpl.<init>(ContainerImpl.java:71)
    at org.jboss.arquillian.container.impl.LocalContainerRegistry.create(LocalContainerRegistry.java:76)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-07T07:13:04.283

The project POM defines a bunch of profiles - `arquillian-weld-ee-embedded`, `arquillian-glassfish-embedded`, and `arquillian-jbossas-managed`. None of them are active by default. You need to activate one of these to run the tests, since the profiles bring in the Arquillian container adapter.

Without a container adapter in the classpath, you're likely to see an `java.lang.IllegalArgumentException` exception with the message "DeployableContainer must be specified".

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-12T18:35:56.157

Seems like QuickStrat description is quite ambiguous. To enable `arq-jboss-remote` profile by default you could simply add:

```
 <activation>
       <activeByDefault>true</activeByDefault>
 </activation> 
```

into this profile definition in a project `pom.xml`.

# ios - 如何在 iPhone 应用程序中用手指绘制虚线？

> ID：14729330
> 
> 赞同：0
> 
> 时间：2013-02-06T12:40:18.413
> 
> 标签：ios, drawing, core-graphics

我需要通过在 iPhone 屏幕上滑动手指在常规间隙处绘制一条带有破折号的线。我为此编写了以下代码，它正在绘制虚线，但间隙不规则，因此看起来不太好。我还提供了显示问题的视频的链接，请帮助！

视频链接： [https ://dl.dropbox.com/u/56721867/Screen%20Recording%207.mov](https://dl.dropbox.com/u/56721867/Screen%20Recording%207.mov)

```
 CGPoint mid1 = midPoint__5(previousPoint1, previousPoint2);
   CGPoint mid2 = midPoint__5(currentPoint, previousPoint1);
   CGContextRef context = UIGraphicsGetCurrentContext();
   [self.layer renderInContext:context];
   self.lineColor=[arrObj objectAtIndex:colorTag];
   CGContextMoveToPoint(context, mid1.x, mid1.y);
   CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
   CGContextSetLineCap(context, kCGLineCapRound);//use for making circle ,rect or line effect===============
   CGFloat dashArray[] = {2,8,2,8};
   CGContextSetLineDash(context,2,dashArray, 4);
   CGContextSetLineWidth(context, self.lineWidth);
   self.lineColor=[arrObj objectAtIndex:[AppHelper userDefaultsForKey:@"ColorTag"].intValue];//color tag on button click
   CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
   CGContextSetAlpha(context, 1.0);
   CGBlendMode blendStyle=isErase?kCGBlendModeClear:kCGBlendModeNormal; 
   CGContextSetBlendMode(context,blendStyle);
   CGContextStrokePath(context);
   [super drawRect:rect]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:39:11.430

这是执行您尝试的代码，它使用 Quartz 而不是 CoreGraphics。您可以使用 Quartz 或 CoreGraphics。

```
//
//  TestView.h
// 
//
//  Created by Syed Arsalan Pervez on 2/18/13.
//  Copyright (c) 2013 SAPLogix. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface TestView : UIView
{
    NSMutableArray *_points;
}

@end

//
//  TestView.m
// 
//
//  Created by Syed Arsalan Pervez on 2/18/13.
//  Copyright (c) 2013 SAPLogix. All rights reserved.
//

#import "TestView.h"

@interface UserPoint : NSObject
{
    BOOL _start;
    BOOL _end;
    CGPoint _point;
}

@property (assign, nonatomic) BOOL start;
@property (assign, nonatomic) BOOL end;
@property (assign, nonatomic) CGPoint point;

@end

@implementation UserPoint

@end

@implementation TestView

- (id)init
{
    self = [super init];
    if (self)
    {
        _points = [NSMutableArray new];
    }
    return self;
}

- (UserPoint *)addPoint:(CGPoint)point
{
    UserPoint *_userPoint = [UserPoint new];
    _userPoint.point = point;
    [_points addObject:_userPoint];
    [_userPoint release];

    return [_points lastObject];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    UserPoint *_userPoint = [self addPoint:[touch locationInView:self]];
    _userPoint.start = YES;
    _userPoint = nil;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    UserPoint *_userPoint = [self addPoint:[touch locationInView:self]];
    _userPoint = nil;

    [self setNeedsDisplay];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    UserPoint *_userPoint = [self addPoint:[touch locationInView:self]];
    _userPoint.end = YES;
    _userPoint = nil;

    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect
{
    [[UIColor blackColor] setStroke];
    [[UIColor blackColor] setFill];
    UIBezierPath *path = [UIBezierPath bezierPath];
    [path setLineWidth:15];
    CGFloat dash[] = {15,20};
    [path setLineDash:dash count:2 phase:0];
    [path setLineCapStyle:kCGLineCapRound];
    CGPoint lastPoint;
    for (UserPoint *_point in _points)
    {
        if (_point.start || _point.end)
            [path moveToPoint:_point.point];
        else
        {
            [path addQuadCurveToPoint:_point.point controlPoint:lastPoint];
        }
        lastPoint = _point.point;
    }
    [path stroke];
}

- (void)dealloc
{
    [_points release];

    [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:55:23.203

从代码中看不太清楚，但根据视频和预感，我猜用手指的单次滑动最终会变成几条线段。这意味着冲刺从头开始多次，在视频中创建效果。您可能需要一个 NSMutableArray 将所有这些 currentPoint 放入其中，然后每次重绘时将它们全部绘制为一条线。

这个问题有更多关于如何以这种方式画线的信息：[iPhone Core Graphics粗虚线子视图](https://stackoverflow.com/questions/4229871/iphone-core-graphics-thicker-dashed-line-for-subview)

# c# - 传入字典的模型项是 X 类型，但是这个字典需要 Y 类型的模型项

> ID：14729336
> 
> 赞同：0
> 
> 时间：2013-02-06T12:40:27.883
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012

我已经搜索了该问题的许多答案（有人说即使这是一个错误），但我无法弄清楚我的问题在哪里。我已经清理了所有代码，但是当我看到视图时仍然有错误消息。在逐行调试中一切正常。但最终 YSOFD ......

这是我的代码：

控制器

```
 [HttpPost]
    public ActionResult Insert(FormCollection formCollection)
    {
        ViewBag.Tema = (new tema()).Css;

        //Pega dados do formulário
        foreach (string _formData in formCollection)
        {
            ViewData[_formData] = formCollection[_formData];
        }

        GameViewModel selectJogo = new sjnj.Models.GameViewModel();

            string sqlJogo = "SELECT id,nome FROM Jogo where nome like '%" +            ViewData["formNomeGame"].ToString() + "%' ORDER BY NOME";
            DataTable dtBuscajogo = new DataAccess("mjnj").ExecuteDataTable(sqlJogo);
            selectJogo.selectListajogo = new System.Data.DataTable();
            selectJogo.selectListajogo.Columns.Add("id");
            selectJogo.selectListajogo.Columns.Add("nome");

            selectJogo.selectListajogo.Rows.Add("#", "Selecione...");

            if (dtBuscajogo.Rows.Count > 0)
            {
                for (int i = 0; i < dtBuscajogo.Rows.Count; i++)
                {
                    selectJogo.selectListajogo.Rows.Add(dtBuscajogo.Rows[i]["id"], dtBuscajogo.Rows[i]["nome"]);
                }
            }
            else
            {
                ViewBag.MensagemError = "Nenhum jogo encontrado";
            }

    return View("Insert",selectJogo); 
```

模型——请注意，我已经评论了所有内容

```
namespace sjnj.Models
{
public class GameViewModel
{
    #region Inserir
    //[Display(Name = "Adcionar jogo a sua coleção")]
    //public string lblAdcionarJogo { get; set; }
    //[Display(Name = "Digite o nome do jogo")]
    //public string lblDigiteJogo { get; set; }
    //[Display(Name = "Selecione o jogo")]
    //public string lblSelecioneJogo { get; set; }

    //[Display(Name = "descrição do jogo selecionado")]
    //public string descrJogoSelecionado { get; set; }
    //[Display(Name = "Jogo Selecionado")]
    //public string nomeJogoSelecionado { get; set; }

   // [Display(Name = "Saiba mais")]
   //public string saibaMaisSele { get; set; }

   //[Display(Name = "Jogo digitado pelo usuario")]
   //public string formNomeGame  { get; set; }

    //[Display(Name = "Lista dos jogos")]
   // public DataTable selectListajogo { get; set; }
    #endregion
}
} 
```

我的观点

```
@model sjnj.Models.GameViewModel

@{
    Layout = "~/Views/Shared/_Home.cshtml";
} 
```

这就是我唯一给出错误的观点。只有当我声明视图来填充数据时。

**编辑：**显式错误

> 传入字典的模型项的类型为“sjnj.Models.RegisterViewModel”，但此字典需要类型为“sjnj.Models.HomeViewModel”的模型项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:03:56.353

我得到了错误。

我的 MasterPage 也使用了模型。当我调用母版页（布局）时，它使用模型然后调用视图而另一个模型搞砸了（我不知道到底发生了什么。

**所以解决方案是为母版页的动态部分**创建另一个视图，在这种情况下，用户菜单。

我不知道该怎么做，但我知道错误在哪里。

# c# - HierarchicalDataTemplate：仅第一级子级

> ID：14729338
> 
> 赞同：0
> 
> 时间：2013-02-06T12:40:33.960
> 
> 标签：c#, .net, xaml, treeview, hierarchicaldatatemplate

我有一个项目的树视图，它目前显示所有级别的孩子，一直到最远。我怎样才能做到只显示第一级的孩子？`HierarchicalDataTemplate`也许是错误的方法？折叠 2 级及更多的子级是不够的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:26:42.427

如何使用数据源的过滤版本，以便只包含您想要的级别，然后您可以毫无问题地使用 HierarchialDataTemplate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:52:49.370

只需使用`DataTemplate`, 而不是`HierarchicalDataTemplate`.

编辑：明白了。有很多选择。上面汤米的推荐是一个很好的和优雅的。另一种选择是为您不想看到其子项的任何项目覆盖 TreeViewItem 的 ControlTemplate 并隐藏扩展器区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:47:16.823

好吧，如果不操纵数据，就不可能只显示一个级别的孩子。该控件需要一个属性，该属性能够确定显示节点的深度。

这个解决方案来找我并且非常明显：我只使用两个平面树视图，第二个依赖于`SelectedItem`第一个。`HierarchicalDataTemplate`根本不需要。只是一个普通的`DataTemplate`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T20:00:26.270

据我了解，您需要顶级节点，以及这些节点的 1 级子节点，并且不再需要（因此总体上将有 2 级节点）。然后，如果您想在 XAML 中执行此操作，则可以使用 2 个模板来执行此操作：

```
<Grid>
    <Grid.Resources>
        <DataTemplate x:Key="TemplateLeaf">
            <TextBlock Text="{Binding Text}" /> <!-- Whatever leaf view you want -->
        </DataTemplate>
        <sdk:HierarchicalDataTemplate ItemsSource="{Binding Items}" ItemTemplate="{StaticResource TemplateLeaf}" x:Key="TemplateNode">
            <TextBlock Text="{Binding Text}" />
        </sdk:HierarchicalDataTemplate>
    </Grid.Resources>
    <sdk:TreeView ItemsSource="{Binding Items}" ItemTemplate="{StaticResource TemplateNode}" />
</Grid> 
```

（这是 Silverlight 版本，但它是一样的）。默认情况下，`HierarchicalDataTemplate`使用它自己作为它自己的`ItemTemplate`，但如果你愿意，你可以将它替换为下一个级别的其他模板（包括一个 plain `DataTemplate`）。

# ios - 如何将标签和图像视图添加到工具栏并在代码中设置属性

> ID：14729341
> 
> 赞同：2
> 
> 时间：2013-02-06T12:40:41.533
> 
> 标签：ios, objective-c, cocoa-touch, interface-builder, uitoolbar

我想在工具栏 ( ) 上显示一个标签 (`UILabel`和一个图像视图 ( ) 。在 Interface Builder 中，我为每个视图添加了一个栏按钮项 (条形按钮项目。请参阅下面的屏幕截图以了解视图层次结构。`UIMageView``UIToolbar``UIBarButtonItem``UIView`

![在此处输入图像描述](../Images/3ba0fa6cf111ffa619daababb3edd4a5.png)

我假设这些视图中的每一个都已成为`customViews`我应该能够在代码中访问的

`UIView *labelBarButtonView = (UIView*)labelBarButtonItem.customView;`

然后访问标签或图像视图

`UILabel *companyLabel = (UILabel*)[labelBarButtonItem.customView viewWithTag:tag];`

但是，在运行代码时，我的应用程序崩溃并显示错误消息：`'NSInvalidArgumentException', reason: '-[UIView customView]: unrecognized selector sent to instance`.

我错过了什么？在 Interface Builder 中创建视图并在代码中访问其属性的更好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:10:51.850

好吧，我认为这是你的问题。在代码行中：

```
UIView *labelBarButtonView = (UIView*)labelBarButtonItem.customView; 
```

您实际上是在向它`labelBarButtonItem`发出`UIView`请求`customView`。看起来你会铸造`customView`，但你不是。所以尝试使用这段代码：

```
UIView *labelBarButtonView = (UIView*)((UIBarButtonItem *)labelBarButtonItem.customView); 
```

上面的代码将`labelBarButtonItem`拉出`customView`然后种姓。然后要获取标签，您可以通过以下方式访问它：

```
UILabel *companyLabel = (UILabel*)[labelBarButtonView viewWithTag:tag]; 
```

# vim - neocomplecache&clang 完成安装：cpp 文件的代码完成工作，而 c 文件没有

> ID：14729342
> 
> 赞同：1
> 
> 时间：2013-02-06T12:40:48.957
> 
> 标签：vim, clang, vim-plugin

我已经安装了 vim 插件 neocomplecache 和 clang complete，它们的补丁名为 neocomplecache_clang_complete。

另外，我安装了clang以使clang完整。

一个名为：test.c 的纯 c 文件

```
typedef struct student
{
     int age;
     char name[20];

}Stu;

int main()
{
     Stu Kevin;
     Kevin.
} 
```

按下“kevin”后的点后，弹出“用户定义的完成（^U^N^P）模式未找到”。

一个名为：test.cpp 的纯 c 文件

```
class Stu
{
     int age;
     char name[20]
};

int main()
{
     Stu Kevin;
     Kevin.
} 
```

成员年龄和姓名正确弹出。

我已经检查了设置的omnifunc。在上述两种情况下它是相同的值

有没有人能够找出这里发生了什么？

如果您需要更多信息，请随时告诉我，例如我的 .vimrc

# c# - 在 C# 中的列表中插入一个对象

> ID：14729347
> 
> 赞同：3
> 
> 时间：2013-02-06T12:41:21.787
> 
> 标签：c#, linq

我有一个类对象列表`UserData`。`where`我通过方法从这个列表中得到一个对象

```
UserData.Where(s => s.ID == IDKey).ToList(); //ID is unique 
```

我想对对象进行一些更改并插入到列表中的相同位置。但是，我没有这个对象的索引。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T12:44:23.807

`UserData.FindIndex(s => s.ID == IDKey)` 您可以使用它将返回一个 int的方法获取索引 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T12:45:21.403

当您从 LIST 获取项目时，它是一个引用类型，如果您对其进行任何更新，那么它将自动更改 LIST 中的值。更新后请自行检查............

项目，无论你从哪里得到

```
UserData.Where(s => s.ID == IDKey).ToList(); 
```

是引用类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T12:57:37.607

只要`UserData`是引用类型，列表就只保存对该对象实例的引用。因此，您无需删除/插入即可更改其属性（显然不需要该对象的索引）。

我还建议您使用`Single`method （而不是`ToList()`），只要 id 是唯一的。

**例子**

```
public void ChangeUserName(List<UserData> users, int userId, string newName)
{
     var user = users.Single(x=> x.UserId == userId);
     user.Name = newName;  // here you are changing the Name value of UserData objects, which is still part of the list
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T12:53:12.547

只需使用获取对象`SingleOrDefault`并进行相关更改；您无需再次将其添加到列表中；您只是在更改作为列表元素的相同实例。

```
var temp = UserData.SingleOrDefault(s => s.ID == IDKey);
// apply changes
temp.X = someValue; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T13:05:03.250

如果我误解了你，请纠正我，但我认为你是说你本质上想要遍历列表的元素，如果它匹配一个条件，那么你想以某种方式改变它并将它添加到另一个清单。

如果是这种情况，请查看下面的代码，了解如何使用 Where 子句编写匿名方法。Where 子句只需要一个匹配以下内容的匿名函数或委托：

参数：ElementType 元素，int 索引——返回：bool 结果

这允许它根据布尔返回选择或忽略元素。这允许我们提交一个简单的布尔表达式，或更复杂的函数，它有额外的步骤，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace StackOverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            int IDKey = 1;
            List<SomeClass> UserData = new List<SomeClass>()
            {
                new SomeClass(),
                new SomeClass(1),
                new SomeClass(2)
            };
            //This operation actually works by evaluating the condition provided and adding the
            //object s if the bool returned is true, but we can do other things too
            UserData.Where(s => s.ID == IDKey).ToList();
            //We can actually write an entire method inside the Where clause, like so:
            List<SomeClass> filteredList = UserData.Where((s) => //Create a parameter for the func<SomeClass,bool> by using (varName)
                {
                    bool theBooleanThatActuallyGetsReturnedInTheAboveVersion =
                        (s.ID == IDKey);
                    if (theBooleanThatActuallyGetsReturnedInTheAboveVersion) s.name = "Changed";
                    return theBooleanThatActuallyGetsReturnedInTheAboveVersion;
                }
            ).ToList();

            foreach (SomeClass item in filteredList)
            {
                Console.WriteLine(item.name);
            }
        }
    }
    class SomeClass
    {
        public int ID { get; set; }
        public string name { get; set; }
        public SomeClass(int id = 0, string name = "defaultName")
        {
            this.ID = id;
            this.name = name;
        }
    }
} 
```

# magento - Magento 订单重定向到支付网关

> ID：14729350
> 
> 赞同：0
> 
> 时间：2013-02-06T12:41:42.570
> 
> 标签：magento, payment, opayo

我有一个订单（订单 ID：10000012）。我希望将此订单 ID 传递给脚本，然后加载订单信息并将用户发送到 Protx/SagePay。

这将是动态的，因此如果已经创建了订单，只要付款未完成/处理，我就可以将任何订单 ID 传递给它。

所以基本上我需要以编程方式结帐选择 Sagepay Standard/Protx Standard，然后重定向到 Protx/Sagepay 以支付订单等。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:27:30.830

为此，您可以使用方法创建支付网关

```
function getOrderPlaceRedirectUrl() {
  return 'http://www.paymentgateway.com/pay';
} 
```

请参阅 - [magento 将结帐付款重定向到 3rd 方网关](https://stackoverflow.com/questions/6058430/magento-redirect-checkout-payment-to-a-3rd-party-gateway)

# java - Android：如何避免在切换按钮上同时执行操作

> ID：14729355
> 
> 赞同：0
> 
> 时间：2013-02-06T12:41:53.610
> 
> 标签：java, android, sockets

我正在开发一个应用程序，在该应用程序中我使用了多个[ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html) .on ON 和 OFF 动作，我正在执行不同的动作。它基于家庭自动化的应用程序，所以按钮适用于 AC、TV、Light 等。我有固定的字节数组来打开和关闭这个设备。我正在使用套接字写入和读取这个字节数组。但我的问题是当用户同时按下两个按钮时，按钮状态会闪烁，有时它会向我显示 ANR 对话。

这是我的代码片段：

```
@Override
public void onClick(View v) 
{
    if(v.equals(fanDimmer1))
    {
        if (fanDimmer1.isChecked()) {
        setByteArray((byte) 0x01, (byte) 0xff);
        } else {
        setByteArray((byte) 0x01, (byte) 0x00);
       }
    }
    else if(v.equals(fanDimmer2))
    {
        if (fanDimmer2.isChecked()) {
        setByteArray((byte) 0x02, (byte) 0xff);
        } else {
        setByteArray((byte) 0x02, (byte) 0x00);
     }
    } 
} 
```

这是 SetByteArray() 方法。

```
private synchronized void setByteArray(final byte a, final byte b) 
    {
        new Thread (new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                try {

                    byte[] data2 = new byte[1024], packet2 =
                        { 
                            (byte) 0x00,(byte) 0x00,(byte) 0x00,
                            (byte) 0x00,(byte) 0x00,(byte) 0x06,
                            (byte) 0x01,(byte) 0x05,(byte) 0x00, 
                             a, b,(byte) 0x00 
                        };

                    //o.write(packet2);
                     write(packet2);
                    i.read(data2, 0, 1024);
                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        }).start(); 
    } 
```

**更新：**

这是 write() 方法

```
public synchronized  void write(byte[] pkg)
{
       try {
            o.write(pkg);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
     } 
```

初始化：

```
s = new Socket(ip, Integer.parseInt(port));
i = s.getInputStream();
o = s.getOutputStream(); 
```

**Update2** 这是我在主线程中设置状态的方法

```
Runnable m_statusChecker = new Runnable() 
{
    @Override
    public void run() 
    {
        if (count == 0) {
            updateStatus();
            count = 1;
        } else {
            updateStatus1();
            count = 0;
        }
        m_handler.postDelayed(m_statusChecker,Integer.parseInt(interval));
    }

    private synchronized void updateStatus() 
    {
        // TODO Auto-generated method stub
        try {
            byte[] data1 = new byte[1024], packet1 = 
            { 
                (byte) 0x00,(byte) 0x00,(byte) 0x00, 
                (byte) 0x00,(byte) 0x00,(byte) 0x06, 
                (byte) 0x01,(byte) 0x01,(byte) 0x00,
                (byte) 0x00,(byte) 0x00,(byte) 0x19
            };

            write(packet1);
            i.read(data1, 0, 1024);

            byte_to_hex = ConversionMethods.bytesToHex(data1).substring(18, 26);

            char[] arr = byte_to_hex.toCharArray();
            for (int i = 0; i < arr.length - 1; i += 2) 
            {
                char temp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = temp;
            }

            swapped_result=new String(arr);
            result = ConversionMethods.hexStringToNBitBinary(swapped_result, 32);

            int counter = 0;
            for( int i=0; i<result.length(); i++ ) 
            {
                if( result.charAt(i) == '1' )
                {
                    counter++;        
                }  
            }
            status=Integer.toString(counter);   
            runOnUiThread(updateButtons);

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

**更新按钮（）**

```
Runnable updateButtons=new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub 
        txt_status.setText(status);
        /*Log.v(TAG, "status is ::"+status);*/
        char[] c=result.toCharArray();
        int count=0;
        for (int i=0;i<24;i++)
        {
            count++;
            char j=c[i];
            Log.v(TAG, count+"::"+j);
            if(count==1)
                toggleButton=dimmerLight1;
            else if(count==2)
                toggleButton=dimmerLight2;
            else if(count==3)
                toggleButton=dimmerLight3;
            else if(count==4)
                toggleButton=dimmerLight4; 
            else if(count==5)
                toggleButton=dimmerLight5;
            ............
            ............

            if(j=='1')
                toggleButton.setChecked(true);
            else
                toggleButton.setChecked(false); 
        }

    }
}; 
```

如何处理这种情况。我有 24 个这种[ToggleButtons](http://developer.android.com/reference/android/widget/ToggleButton.html)。如果有人在此之前遇到过这个问题，请与我分享。

任何帮助和想法将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:46:02.603

使用单线程执行器按顺序发送数据。不要为每次数据传输创建新线程。

```
Executor executor = Executors.newSingleThreadExecutor();

private void setByteArray(final byte a, final byte b) {
    executor.execute(new Runnable() { 
        public void run() { 
            // your code here
        } 
    });
} 
```

所有的 Runnables 都会被一一执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:19:58.943

在对您打算做什么有所了解后，我建议以下内容。

*   在您的活动中拥有完整的值数组。
*   使您的单击事件处理程序修改值数组并
*   之后，开始一个新的`AsyncTask`动态创建。
*   在`onPreExecute`该 AsyncTask（在主 UI 线程上执行）中，禁用所有复选框。
*   在`doInBackground`AsyncTask 中，发送值并再次接收它们。
*   在`onPostExecute`中，根据新收到的数据设置所有复选框的状态，然后启用它们。

如果这反应不够灵敏，您需要决定如何处理设置冲突。我认为这取决于环境的性质。无论哪种方式，该方案都可以轻松扩展：

*   在`onPreExecute`中，复制当前值，但不要禁用复选框。
*   在`doInBackground`中，接收另一个数组副本中的值。
*   在`onPostExecute`（在主 UI 线程上执行）中，将收到的值与复选框的值进行比较。如果它们不相等，则触发一个新的 AsyncTask 以发送代表用户设置的值。

这实现了冲突解决策略，这意味着用户的设置应该覆盖反馈。如果需要其他策略，您可能会知道如何实施它。

# html - ie7 不显示 css 规则，除非我在开 发人员工具中再次打开和关闭它

> ID：14729359
> 
> 赞同：0
> 
> 时间：2013-02-06T12:42:08.743
> 
> 标签：html, css, internet-explorer-7

“开始”提交按钮不会显示在 ie7 中，直到我在开发人员工具中再次勾选和关闭规则。

```
<div id="footerNewsletter">

                <p><?php echo $text_newsletter_signup; ?></p>
                <form method="post" action="" onsubmit="cm_signup(); return false;">
                    <input name="Email" id="Email" value="<?php echo $text_email_address; ?>" type="text" onclick="this.value='';" />
                    <?php /*<a href="#" id="newsletterSubmit" ><span><?php echo 'Go'; ?></span></a> */ ?>

                    <input class="newsletter-submit" type="submit" name="Name" value="Go" />
                </form> 

                <p id="nl_return"></p>
      </div> 
```

和 CSS

```
#footerNewsletter {
background: #a29061;
width: 274px;
height: 46px;
color: #fff;
float: left;
padding: 8px 13px;
margin-left:20px;
position:relative;

}

#footerNewsletter {
background: #a29061;
width: 274px;
height: 46px;
color: #fff;
float: left;
padding: 8px 13px;
margin-left:20px;
position:relative;

}
#footerNewsletter p {
padding: 0;
margin: 0;
width: 90px;
height: 45px;
font-family: 'Droid Sans', sans-serif;
font-size: 17px;
color: #fff;
float: left;
}
#footerNewsletter input {
float: right;
height:25px;
color: #a29061;
border: 0;
font-size: 13px;
font-family: 'Droid Sans', sans-serif;
background: #fff;
margin-top: 10px;
width: 158px;
}
input.newsletter-submit{
background: none repeat scroll 0 0 #54301A !important;
color: #60C5BA !important;
display: block !important;
float: right !important;
font-family: 'Droid Sans',sans-serif !important;
font-size: 13px !important;
margin: 10px 0 0 !important;
padding: 0px 0px !important;
position: absolute;
right: 10px !important;
text-decoration: none !important;
width: 30px !important;
height:25px !important;
z-index: 10 !important;
bottom:19px !important;
}
.newsletter-submit:hover {
background: #60c5ba !important;
color: #54301a !important;
cursor:pointer;
} 
```

在所有其他浏览器中都很好，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:56:30.260

您正在将输入上的浮点数与尝试绝对定位它结合起来。

看看将其更改为仅一种方法，看看是否有帮助。

# iphone - SQLite 数据库问题

> ID：14729373
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:42:55.340
> 
> 标签：iphone, ios, uitableview, sqlite

我是 iOS 开发的新手。
我正在开发一个从 SQLite 数据库读取数据并存储在共享实例的（单音类）NSMutable 数组中的应用程序。
稍后从 NSMutableArray 我将值分配给自定义表格单元格。
但是在运行应用程序时，应用程序以消息终止：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'-[Name isEqualToString:]: unrecognized selector sent to instance 0x6824fe0' 
```

以下是 cellForRowAtIndexPath 的部分代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"CustomTableViewCell";

CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    NSArray *nib=[[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}

cell.menuNameLabel.text=[_hotelMenu._menuList objectAtIndex:indexPath.row];
cell.menuImage.image=[UIImage imageNamed:@"veg.png"];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:15:35.527

基本上，您正在`isEqualToString`使用 Name 对象进行调用。（不要介意指针类型是“NSString”，对象是 Name 对象——Objective-C 运行时并不关心指针类型。）

所以你需要弄清楚为什么。这可能是一个简单的问题，也可能是一个混乱的存储问题。但是对于初学者来说，您需要实际查看错误消息和应该与其相邻的堆栈回溯，并确定错误发生的位置，以及涉及哪个指针变量。

# c++ - 从子类实例访问和更改父值

> ID：14729378
> 
> 赞同：1
> 
> 时间：2013-02-06T12:43:12.213
> 
> 标签：c++, oop, inheritance, parent, subclass

我是初学者，试图在这个网站上找到答案，但我无法弄清楚如何解决我的特定 C++ OOP 问题。

简短：我想从子类实例访问和更改父类的值，但不知何故，我的方法似乎不起作用。

示例：我的程序中有很多`Car`实例（使用新构造创建）。如果其中一个`Car`对象检测到碰撞，则所有`Car`实例都应反转它们的运动。注册碰撞的`Car`应该调用父母的`ChangeSpeed`方法或直接更改`speed`值。

问题：速度变量似乎没有更新。这个特定的代码/方法有什么问题，还是我必须在其他地方搜索我的问题？

```
// SpeedControl.h ------------------------------
class SpeedControl
{
public:
    void ChangeSpeed(int);
protected:
    int speed;
};

class Car:
        public SpeedControl
{
public:
    void MoveCar();
    void DetectCollision();

private:
    int position;
};

// SpeedControl.cpp ------------------------------
#include SpeedControl.h

SpeedControl::SpeedControl(void)
{
    speed = 10;
}

SpeedControl::~SpeedControl(void)
{
}

SpeedControl::ChangeSpeed(int _value)
{
    speed *= _value;
}

// Car.cpp ------------------------------
#include SpeedControl.h

Car::Car(void)
{
    position = 100;
}

Car::~Car(void)
{
}

Car::MoveCar()
{
    position += speed; // speed should be accessible?
}

Car::DetectCollision()
{
    speed *= (-1); // inverse speed variable in parent class to inverse direction of ALL cars
    // alternative:
    // ChangeSpeed(-1); // call parent function to inverse speed

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:48:02.220

这看起来像是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)是正确解决方案的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:52:48.680

您似乎误解了继承。你需要的是一个静态变量。

在 Car 类中定义静态 int 速度。您可以删除 SpeedControl 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:49:08.573

您应该`GetSpeed()`在您的`SpeedControl`类中实现 a ，它返回当前速度。

然后你可以在 MoveCar 函数中使用它：

```
ChangeSpeed(GetSpeed() + GetSpeed());  // Assuming you want to double the speed. 
```

在你的碰撞中：

```
ChangeSpeed(-GetSpeed()); 
```

或者，您可以使“ChangeSpeed”成为乘法而不是加法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:49:59.430

您没有说明您的代码*到底*出了什么问题，但是从一瞥之下，您正在使用`private`继承，它将所有父级的成员隐藏在派生类中。

```
class Child : public Parent { }; 
```

上面的行将确保父成员可以从子访问。

# java - 玩！验证不起作用

> ID：14729379
> 
> 赞同：0
> 
> 时间：2013-02-06T12:43:15.527
> 
> 标签：java, playframework, playframework-1.x

我正在使用 Play Framework 1.2.5。我有几个`NAme`与`Age`字段相关的验证。年龄验证无法正常工作。即使年龄大于 18 岁，我也会收到错误消息。

下面是 action 方法中的验证代码：

```
Error nameError = validation.required(txtName).error;
    Error ageError = validation.required(txtAge).error;
    Error minAgeError = validation.min(txtAge,18).error;

    if(nameError!=null)
        System.out.println(nameError.message("Customer Name"));

    if(ageError!=null)
        System.out.println(ageError.message("Customer Age"));

    if(minAgeError!=null)
        System.out.println(minAgeError.message("Minimun Age")); 
```

以下是消息文件条目：

```
validation.required=%s is required
validation.min=%s cannot be lower than %2$d 
```

如何让它发挥作用？无法弄清楚我在这里错过了什么:(

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:07:19.377

您没有根据文档使用验证逻辑。试试这个：

```
public static void hello(String txtName, Integer txtAge) {
     validation.required(txtName);
     validation.required(txtAge);
     validation.min(txtAge, 18);

     if(validation.hasErrors()) {
         for(Error error : validation.errors()) {
             System.out.println(error.message());
         }
     }
} 
```

# java - 如何使用 Open NLP 提取名词短语

> ID：14729382
> 
> 赞同：3
> 
> 时间：2013-02-06T12:43:21.973
> 
> 标签：java, nlp, stanford-nlp, opennlp

我是 Open NLP 的新手，在使用它提取名词短语时需要一些帮助。我生成了一个树结构，其中包含带有文本的 pos 标签。但是从树结构中我无法提取名词短语。这是我正在使用的代码：

```
InputStream is = new FileInputStream("en-parser-chunking.bin");
ParserModel model = new ParserModel(is);
Parser parser = ParserFactory.create(model);
Parse topParses[] = ParserTool.parseLine(line, parser, 1);
    for (Parse p : topParses){
             p.show();} 
```

这里`p.show()`打印树结构，它不返回任何内容。我如何使用`p.show()`来提取名词短语，或者有没有其他方法可以从树结构中获取它们？

请帮助我。

提前致谢

古斯。

# c# - 使用 Moq 模拟 Func<> 构造函数参数并验证它被调用了两次

> ID：14729385
> 
> 赞同：38
> 
> 时间：2013-02-06T12:43:29.440
> 
> 标签：c#, unit-testing, moq, functional-testing

从这篇文章（[How to moq a Func](https://stackoverflow.com/questions/6036708/how-to-moq-a-func)）中提取问题并将其改编为答案不正确。

```
public class FooBar
{
    private Func<IFooBarProxy> __fooBarProxyFactory;

    public FooBar(Func<IFooBarProxy> fooBarProxyFactory)
    {
        _fooBarProxyFactory = fooBarProxyFactory;
    }

    public void Process() 
    {
        _fooBarProxyFactory();
        _fooBarProxyFactory();
    }
} 
```

我需要模拟作为构造函数参数传递的 Func<>，即 func 被调用两次的断言。

当试图模拟函数`var funcMock = new Mock<Func<IFooBarProxy>>();`Moq 引发和异常时，因为 Func 类型是不可模拟的。

问题是，如果不模拟函数，就无法验证函数是否被调用 (n) 次。`funcMock.Verify( (), Times.AtLeast(2));`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-06T12:45:11.543

我认为没有必要为 Func 使用模拟。

您可以简单地自己创建一个普通的 Func ，它返回一个模拟`IFooBarProxy`：

```
int numberOfCalls = 0;
Func<IFooBarProxy> func = () => { ++numberOfCalls;
                                  return new Mock<IFooBarProxy>(); };

var sut = new FooBar(func);

sut.Process();

Assert.Equal(2, numberOfCalls); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-03-03T21:12:47.723

至少从起订量 4.5.28 开始，您可以按照您的预期模拟和验证 Func。我不知道何时添加了此功能（根据原始问题在某些时候这不起作用）。

```
[Test]
public void TestFoobar()
{
    var funcMock = new Mock<Func<IFooBarProxy>>();
    var fooBar = new FooBar(funcMock.Object);
    fooBar.Process();
    funcMock.Verify(x => x(), Times.AtLeast(2));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-02T09:30:24.453

**从起[订量 v4.1.1308.2120](https://github.com/moq/moq4/releases/tag/v4.1.1308.2120)**

在这个问题被问到几个月后（2013 年 8 月 21 日）发布的这个版本中，添加了模拟 a 的`Func<>` [功能](https://github.com/moq/moq4/commit/a35e953d286d1b27094e6f4dac45208116bffe87#diff-83b283b670610436e36bc3d91b9f3df5)。因此，对于任何当前版本的 mock，您都可以使用`var funcMock = new Mock<Func<IFooBarProxy>>();`.

**原始（过时）答案**

如果你有很多回调`Func`，`Actions`等等，最好在你的测试中定义一个帮助接口并模拟那个接口。这样您就可以使用常规的 Moq 功能，例如设置返回值、测试输入参数等。

```
interface IFooBarTestMethods
{
    IFooBarProxy FooBarProxyFactory();
} 
```

**用法**

```
var testMethodsMock = new Mock<IFooBarTestMethods>();
testMethodsMock
    .Setup(x => x.FooBarProxyFactory())
    .Returns(new Mock<IFooBarProxy>());

var sut = new FooBar(testMethodsMock.Object.FooBarProxyFactory);
testMethodsMock.Verify(x => x.FooBarProxyFactory(), Times.Exactly(2)); 
```

# html - 拉伸元素以适应容器

> ID：14729386
> 
> 赞同：0
> 
> 时间：2013-02-06T12:43:40.507
> 
> 标签：html, css, twitter-bootstrap

我正在用这种外观编写表单布局（使用 Bootstrap，但我认为这与我的问题无关）：

```
+-----------------container------------------+
|                                            |
|  label1    [ input ]    label2   [ input ] |
|  label3    [ input ]    label4   [ input ] |
|  label5    [ input ]    label6   [ input ] |
|                                            |
+--------------------------------------------+ 
```

`[input]`元素是固定大小的。我需要正确对齐两列标签，但我**不**希望它们具有相同的宽度。换句话说，我需要将标签扩展到该列的最宽标签。

有可能吗？

这或多或少是我正在使用的 HTML：

```
<div id="whatever">
<form>
  <div class="controls controls-row">
    <label for="input1">label1</label>
    <input class="span2" type="text" id="input1">
    <label for="input2">label2</label>
    <input class="span2" type="text" id="input2">
  </div>
  <div class="controls controls-row">
    <label for="input3">label3</label>
    <input class="span2" type="text" id="input3">
    <label for="input4">label4</label>
    <input class="span4" type="text" id="input4">
  </div>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:31:32.300

display: table 和 table-cell 可以工作。

column 也是一种选择，但兼容性较差。（@Sirko 展示了一个很棒的演示。）

css

```
form {
    display:table;
}

.controls-row {
    display: table-row;
}

.controls-row > label,
.controls-row > input {
    display: table-cell;
} 
```

jsFiddle 演示： [//jsfiddle.net/Mxx4M/](http://jsfiddle.net/Mxx4M/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:49:41.383

您可以尝试[`column-count`](https://developer.mozilla.org/en/docs/CSS/column-count)（[浏览器兼容性](http://caniuse.com/#feat=multicolumn)）。您的 HTML 必须更改为以下内容：

```
<div id="whatever">
<form>
  <div class="controls controls-row">
    <label for="input1">label1</label>
    <input class="span2" type="text" id="input1">
  </div>
  <div class="controls controls-row">
    <label for="input2">label2</label>
    <input class="span2" type="text" id="input2">
  </div>
  <div class="controls controls-row">
    <label for="input3">label3</label>
    <input class="span2" type="text" id="input3">
  </div>
  <div class="controls controls-row">
    <label for="input4">label4</label>
    <input class="span4" type="text" id="input4">
  </div>
</form>
</div> 
```

然后应用以下 CSS：

```
#whatever { 
  -moz-column-count: 2; 
  -webkit-column-count: 2; 
  column-count: 2; 
}
.controls-row { white-space: nowrap; } 
```

第二个 CSS 规则防止输入标签行中的换行符。

# active-directory - 在 2k8 服务器中为 springsecurity kerberos 创建服务主体

> ID：14729387
> 
> 赞同：2
> 
> 时间：2013-02-06T12:43:44.423
> 
> 标签：active-directory, spring-security, windows-server-2008-r2, spring-security-kerberos

我正在关注这篇文章[http://blog.springsource.com/2009/09/28/spring-security-kerberos/](http://blog.springsource.com/2009/09/28/spring-security-kerberos/)在本地服务器上设置服务主体，我将使用它来测试 spring 安全集成与活动目录。服务器运行了tomcat，我在其中部署了我的应用程序，我通过以下方式访问它`http://localhost:8080/myapp`

**问题**

我的服务提供商名称应该是什么？

文章说：

> 为此，每个 Web 应用程序都需要在 Kerberos 服务器上注册并获得服务主体和分配的共享密钥。对于 Web 应用程序，服务主体必须是“HTTP/@DOMAIN”。例如“HTTP/web.springsource.com@SPRINGSOURCE.COM”，如果您的应用在 web.springsource.com 上运行。

既然我正在跑步，`localhost`我想这将是`HTTP/localhost@....`我要代替的`@SPRINGSOURCE.COM?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T05:14:25.993

要使 Kerberos 正常工作，您应该在网络中配置 DNS 和 AD 服务器。应用服务器和客户端机器必须使用 DNS，客户端机器必须使用 AD 认证。不允许使用名称“localhost”。应用程序服务器可能不在域中。

假设域中的所有机器，那么您需要的是：

1.  分配应用程序服务器 dns 名称，例如 appserver ( **appserver** .yourdomain.local)
2.  在直接和反向 DNS-server 区域添加您的服务器应用程序的 DNS 名称。（[链接](http://technet.microsoft.com/en-us/library/cc780658%28v=ws.10%29.aspx)）
3.  在域中创建一个简单用户并设置选项“不更改密码”和“密码永不过期是有限的”（例如用户名**myUser**）
4.  在服务器（域控制器）上，打开命令提示符并运行以下命令：

    C:>setspn -A HTTP/appserver myUser

    C:>setspn -A HTTP/appserver.yourdomain.local myUser

5.  检查正确：

    C:>setspn -l myUser （*如果会显示您之前输入的内容，则一切正常*）

6.  接下来，创建一个密钥文件：

    C:>ktpass /out C:/myUser.keytab /mapuser myUser@YOURDOMAIN.LOCAL /princ HTTP/appserver.yourdomain.local@YOURDOMAIN.LOCAL /pass +rndPass /crypto RC4-HMAC-NT /ptype KRB5_NT_PRINCIPAL /kvno 0

就是这样，现在您可以在 Web 应用程序中使用文件**myUser.keytab**和主体名称**HTTP/appserver.yourdomain.local**

将来可能有用：

*   [用户取消基本认证后的空白页面](https://stackoverflow.com/questions/13583682/blank-page-after-user-cancels-basic-authentication/26350395#26350395)
*   [将自定义身份验证过滤器与 spring-security-kerberos 结合使用](https://stackoverflow.com/questions/21093480/combine-custom-authentication-filter-with-spring-security-kerberos/26350288#26350288)

# angularjs - 如何使用角度将部分 json 响应转换为 javascript 日期？

> ID：14729390
> 
> 赞同：0
> 
> 时间：2013-02-06T12:43:50.483
> 
> 标签：angularjs

我有一个 JSON REST 服务，它返回带有开始日期的期间列表。如何将开始日期转换为 javascript 日期？

```
 [ {
      "periodId": 1234, 
      "startDate": [ 2011, 12, 24]
    }, 
    {
      "periodId": 5678, 
      "startDate": [ 2012, 12, 24]
    }
   ] 
```

我在我的服务定义中使用 ngResource：

```
 angular.module('periodservice',['ngResource']).
     factory('Periods', function($resource) {
      return $resource('../rest/periods', {}, {
        query : {method : 'GET', params : {}, isArray : true}
      });
    }); 
```

控制器非常简单。

```
 function EksternVareRedigeringCtrl ($scope, Periods){

    $scope.periods = Periods.query(function(success, status, headers){
      $scope.msgf = success;
      console.log("this is the succsess);
    }, function(errors){
      $scope.msgf = errors;
      console.log("This is an error....." + ' ' + $scope.msgf.status);
    });

  } 
```

现在我像这样显示日期，而不是将其转换为正确的日期：

```
 <div class="period">Period: {{period[0]}}-{{period[1]}}-{{period[2]}}</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:18:25.730

转换为 Javascript 日期：

```
new Date(period.startDate[0], period.startDate[1]-1, period.startDate[2]) 
```

请注意，我之所以使用`period.startDate[1]-1`这些月份，是因为月份从`0`（一月）开始，到`11`（十二月）结束。

要仅处理一次日期，请将以下代码段添加到您的`success`回调中：

```
angular.forEach($scope.periods, function (period) {
    period.startDate = new Date(period.startDate[0], period.startDate[1]-1, period.startDate[2]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:56:34.797

非常感谢。它完美地工作！

笔记。向 new Date() 提供数组时，您不必从月份数中减去 -1：

```
 new Date([2012, 12, 24]) === new Date(2012, 11, 24); 
```

# iphone - 设置 CCTexture 的框架以适应预定义的框架 CCSprite

> ID：14729394
> 
> 赞同：0
> 
> 时间：2013-02-06T12:44:07.957
> 
> 标签：iphone, ios6, cocos2d-iphone

我正在从服务器下载图像并将其显示在游戏场景中。我能够从服务器获取图像的 CCTexture2D 并将其显示在游戏场景中。问题是来自服务器的图像大小可能不同。但我必须将该图像显示在预定义的帧 CCSprite 上。

```
CCSprite *temp = [CCSprite spriteWithTexture:[[CCTexture2D alloc] initWithImage:[UIImage imageWithData:data] resolutionType:kCCResolutioniPhoneFourInchDisplay]];
CCRenderTexture *test=[CCRenderTexture renderTextureWithWidth:70 height:70];   //set proper width and height
[test begin];
[temp draw];
[test end];
UIImage *img=[test getUIImageFromBuffer];
sprite_Temp =[CCSprite spriteWithCGImage:img.CGImage key:@"1"];
sprite_Temp.tag = K_TagUserImage;
sprite_Temp.scale=1;
sprite_Temp.position=ccp(432,273);
[self addChild:sprite_Temp z:1]; 
```

我正在使用此代码将 CCTexture2D 的大小调整为预定义的帧 CCSprite。但是图像被裁剪到不需要的所需帧。有人可以告诉我如何将原始图像从服务器获取到所需的帧而不被裁剪。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:25:42.847

尝试 ：

```
 CCSprite *temp = [CCSprite spriteWithTexture:[[CCTexture2D alloc] initWithImage:[UIImage imageWithData:data] resolutionType:kCCResolutioniPhoneFourInchDisplay]];
float scaleX = 70./temp.contentSize.width;
float scaleY = 70./temp.contentSize.height;
// if you want to preserve the original texture's aspect ratio
float scale = MIN(scaleX,scaleY);
temp.scale = scale;
// or if you want to 'stretch-n-squeeze' to 70x70
temp.scaleX = scaleX;
temp.scaleY = scaleY;
// then add the sprite *temp 
```

通常的免责声明：未经测试，从内存中完成，小心除以 0 :)

# android - StackMob 或 Server (MySql) 来处理用户帐户

> ID：14729398
> 
> 赞同：1
> 
> 时间：2013-02-06T12:44:21.827
> 
> 标签：android, mysql, user-accounts, stackmob

我正在为具有登录和注册表单的 Android/iOS 开发应用程序。

实际上，我正在使用 JSON 将电子邮件和加密密码以及其他用户信息存储在 MySql 服务器中。但是我发现了一个（Android 问题），如何向用户发送电子邮件链接来恢复他的密码，我不想将他的密码直接发送到电子邮件，我想发送一个**唯一的**链接，他可以再次调用应用程序并提交一个新密码，我找不到使用 MySql 的方法，stackmob 向我展示了一种更简单的方法。

**问题：**

1.  什么是最安全的方法？
2.  我应该将所有数据库从 MySql 移动到 StackMob 云服务器还是只移动用户电子邮件和密码？
3.  兼容性：在 StackMob 中我需要有两个数据库，一个用于 android 平台，另一个用于 iOS？
4.  StackMob 或 MySql 你的经验是什么？我考虑实现 Facebook 集成，在 Stackmob 中看起来更容易，然后在 Android 和 iOS 上自己做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:04:26.517

我是 StackMob 的平台布道者。我会尽力回答你的问题。

1.  StackMob 确实提供了密码重置功能。 [http://developer.stackmob.com/tutorials/android/Forgot-Password](http://developer.stackmob.com/tutorials/android/Forgot-Password)

2.  依靠。如果您想根据当前登录的用户为您的数据添加访问控制，StackMob 可以帮助您做到这一点。您可以通过关系、角色和所有权（创建者）基于用户控制创建、读取、更新和删除权限。

3.  不，您只有一个适用于 iOS、Android、HTML5 等所有平台的 StackMob 应用程序（和一组数据）。您对应用程序的所有版本使用相同的 API 密钥。

4.  将 Facebook 登录与 StackMob 集成非常容易，因此您的用户可以使用 Facebook 进行身份验证。登录后，您可以根据用户的权限访问其他数据（参见 #2）

# python - Asyncore TCP 服务器，我不明白如何关闭客户端套接字的连接

> ID：14729403
> 
> 赞同：0
> 
> 时间：2013-02-06T12:44:30.410
> 
> 标签：python, sockets, asyncore

我不明白客户端套接字的连接如何关闭。

```
import asyncore
import socket

class TCPClientHandle(asyncore.dispatcher):
    def __init__(self, sock, server):
        asyncore.dispatcher.__init__(self, sock)
        self.server = server

    .....

    def handle_close(self):
        print 'Client: handle_close'
        self.server.removeClient(self)

class TCPServer(asyncore.dispatcher, dict):
    def __init__(self, host='127.0.0.1', port=31337):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        dict.__init__(self, {self.fileno(): self})
        self.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        self.bind((host, port))
        self.listen(5)

    def handle_accept(self):
        print 'Server: handle_accept'
        client, (host, port,) = self.accept()

        print 'Новый клиент %s:%d' % (host, port,)
        self[client.fileno()] = TCPClientHandle(client, self)

    def removeClient(self, client):
        print 'Server: removeClient'
        del self[client.fileno()]

def main():
    asyncore.loop(0.1, True, TCPServer('127.0.0.1'))

if __name__ == '__main__':
    main() 
```

如果我重写`removeClient`方法`TCPServer`

```
def removeClient(self, client):
    print 'Server: removeClient'
    del self[client.fileno()]
    client.close() 
```

我有错误`socket.error: [Errno 9] Bad file descriptor`

PS对不起我的英语

* * *

UPD：肮脏的黑客

```
class TCPServer(asyncore.dispatcher, dict):
    doDel = []
    ....
    def handle_accept(self):
        print 'Server: handle_accept'
        client, (host, port,) = self.accept()
        print 'Новый клиент %s:%d' % (host, port,)
        self[client.fileno()] = TCPClientHandle(client, self)
        if len(self.doDel) >= 5:
            self.doDel.pop().close()

    ....

    def removeClient(self, client):
        print 'Server: removeClient'
        del self[client.fileno()]
        self.doDel.insert(0, client) 
```

：） 这是工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:50:16.487

没错。谢谢大家

```
class TCPClientHandle(asyncore.dispatcher_with_send):
    def __init__(self, sock, server):
        asyncore.dispatcher.__init__(self, sock)
        self.server = server

    .....

    def handle_close(self):
        if self.server.removeClient(self):
            self.close()

class TCPServer(asyncore.dispatcher, dict):
    .....
    def removeClient(self, client):
        del self[client.fileno()]
        return True 
```

# algorithm - 用高级语言练习算法和数据结构不是最理想的吗？

> ID：14729407
> 
> 赞同：0
> 
> 时间：2013-02-06T12:44:44.080
> 
> 标签：algorithm, data-structures

我买了一份《Cracking the Coding Interview》，想通过练习。我精通 Python 和 Clojure，想知道它们是否适合此目的。如果我严格限制只使用我创建的列表和类（或记录），我是否仍会在学习方面获得全部好处（内存管理之外），还是应该回到 C/Java（我没有几年都没碰过）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:49:09.993

知道如何实现以及何时使用哪些算法和数据结构是任何语言的一项重要技能，并且大多数算法都可以用所有主流语言实现。

关于它们的要点是程序的可伸缩性，即随着输入的增长而优雅地降低性能。这比切换到较低级别的编程语言所获得的恒定因子加速要重要得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:48:35.137

如果您正在编写一个具有实际性能要求的真实程序，您可以使用 C 而不是 Python 编写它，从而获得一些优势。但是，您主要对要使用的算法感兴趣。几乎所有算法都可以用任何语言实现，因此使用哪种语言并不重要。如果您擅长 Python 或 Clojure，请使用它们。

编辑：不能以~~任何~~所有语言实现的“算法”示例是[Duff 的设备](http://en.wikipedia.org/wiki/Duff%27s_device)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:48:44.677

我认为任何通用语言都适用于数据结构。

然而，就像在 Python 中一样，许多数据结构已经是该语言的一部分。当然，您可以添加数据结构，但已经实现了很多，因此不需要再次执行（除非您想更好地了解内部结构）。

也许考虑深入研究数据结构是否有用也很有用（意思是：Python 是否提供了足够的东西，还是只是收集知识的问题）。

# sql - SQL: distinct in where clause

> ID：14729409
> 
> 赞同：1
> 
> 时间：2013-02-06T12:44:54.003
> 
> 标签：sql, select

I have a query that after execution shows:

```
Name  | LasName | City
-------------------------
John  | Doe     | London
John  | Doe     | Berlin
Martin| Smith   | Paris 
```

Is there anything I can do in the WHERE clause section in order to get just one John Doe, no matter the city?

The query is humongous that’s why I’m not posting it in here.

If there’s anything you think I can do, please, post a fake query explaining it, I just need to get the concept.

Thanks a lot!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:48:29.770

您没有声明 RDBMS。一种应该适用的方法。

```
SELECT Name,
       LasName,
       MAX(City) AS City
FROM   YourQuery
GROUP  BY Name,
          LasName 
```

你说你不在乎哪个城市。这会按字母顺序为您提供最后一个。

或替代方案

```
SELECT Name,
       LasName,
       City
FROM   (SELECT Name,
               LasName,
               City,
               ROW_NUMBER() OVER (PARTITION BY Name, LasName ORDER BY (SELECT 0)) AS RN
        FROM   YourQuery) T
WHERE  RN = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:49:05.093

假设您使用的是 MySQL，并且您想在一行上查看相同用户名的所有城市，请尝试以下操作：

```
select Name, LasName, group_concat(City)
from LargeQuery
group by Name, LasName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:50:45.867

您可以使用以下查询（t-sql）

```
SELECT Distinct Name,LasName
FROM TableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:06:31.430

```
select * from `TableName` group by Name, LasName 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:49:58.460

假设您只要求查询一行，不考虑城市，试试这个，

```
select * from tablename 
where name = 'John'
and lasname = 'Doe'
and rownum = 1; 
```

# android - How to restrict app for tablet in Android?

> ID：14729410
> 
> 赞同：7
> 
> 时间：2013-02-06T12:44:54.530
> 
> 标签：android, google-play, tablet

i want to my app run only mobile device not in the

> tablet 10 and 7 inch

. but my app is run on both tablet size .please help me out

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T12:59:17.673

是的，正如@OceanLife 所说，您应该使用[compatible-screens](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)或[supports-screens](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)。

但我想在这里添加一些东西。

如果你正在使用

```
<supports-screens android:largeScreens="false" android:normalScreens="true" 
                  android:smallScreens="true" android:xlargeScreens="false" /> 
```

然后注意官方[的 compatible-screens](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)文档是怎么说的：

> 如果您希望您的应用程序仅可用于大屏幕和超大屏幕设备，则该元素允许您声明您的应用程序不支持小屏幕和正常屏幕尺寸。**外部服务（例如 Google Play）会** **相应地过滤您的应用程序。您还可以使用该** **元素来声明系统是否应** **针对不同的屏幕尺寸调整您的应用程序的大小。**

因此，它将在您将 apk 文件上传到 PlayStore 后生效。直到您不会影响此功能。

另请参阅 Google Play 上的[过滤器](http://developer.android.com/google/play/filters.html)文档，了解有关 Google Play 如何使用此和其他清单元素过滤应用程序的更多信息。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-09T11:34:47.143

谷歌开发人员对此有非常详细的信息，因此请查看此链接：
**[分发到特定屏幕](http://developer.android.com/guide/practices/screens-distribution.html)**

引用下面的相关部分。

仅限手机：

> ### [声明一个应用程序仅适用于手机](http://developer.android.com/guide/practices/screens-distribution.html#FilteringHansetApps)
> 
> ```
> <manifest ... >
>     <compatible-screens>
>         <!-- all small size screens -->
>         <screen android:screenSize="small" android:screenDensity="ldpi" />
>         <screen android:screenSize="small" android:screenDensity="mdpi" />
>         <screen android:screenSize="small" android:screenDensity="hdpi" />
>         <screen android:screenSize="small" android:screenDensity="xhdpi" />
>         <!-- all normal size screens -->
>         <screen android:screenSize="normal" android:screenDensity="ldpi" />
>         <screen android:screenSize="normal" android:screenDensity="mdpi" />
>         <screen android:screenSize="normal" android:screenDensity="hdpi" />
>         <screen android:screenSize="normal" android:screenDensity="xhdpi" />
>     </compatible-screens>
>     ...
>     <application ... >
>         ...
>     <application>
> </manifest> 
> ```

仅限平板电脑：

> ### [声明应用程序仅适用于平板电脑](http://developer.android.com/guide/practices/screens-distribution.html#FilteringTabletApps)
> 
> 如果您不希望您的应用程序在手机上使用（也许您的应用程序真的只在大屏幕上才有意义）或者您需要时间针对小屏幕对其进行优化，您可以通过使用阻止小屏幕设备下载您的应用程序清单元素。
> 
> ```
> <manifest ... >
>     <supports-screens android:smallScreens="false"
>                       android:normalScreens="false"
>                       android:largeScreens="true"
>                       android:xlargeScreens="true"
>                       android:requiresSmallestWidthDp="600" />
>     ...
>     <application ... >
>         ...
>     </application>
> </manifest> 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:51:24.127

尝试将其添加到您的 android 清单文件中

```
 <uses-sdk
android:minSdkVersion="6"
android:targetSdkVersion="8" />

<supports-screens
android:anyDensity="true"
android:largeScreens="false"
android:normalScreens="true"
android:resizeable="true"
android:smallScreens="true"
android:xlargeScreens="false" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T13:01:44.617

尝试这个 ：

你应该`attribute`在你的`mainfest` **android:largestWidthLimitDp="enter mobile pixel value which above you want to restrict." 中使用它。**

```
 <supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:largestWidthLimitDp="500"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T13:05:33.927

通过使用**Uses-Feature**，您似乎可以将应用程序分发限制为仅横向屏幕设备“平板电脑和平板电脑之类的设备”。这是您在 manifest.xml 中需要的代码：

```
 <uses-feature android:name="android.hardware.screen.landscape"
                      android:required="true"
          ></uses-feature> 
```

也可以使用：

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="false"
    android:resizeable="false"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

# php - Calling variable value in Magento

> ID：14729413
> 
> 赞同：1
> 
> 时间：2013-02-06T12:44:56.383
> 
> 标签：php, magento, html

I am having a little trouble calling a variable value in Magento.

I want to display a new message to the customer if a product's availability stock status is **limited stock** in the product page, right under the availability stock status.

So I think to myself here goes nothing:

> /public_html/app/design/frontend/mytheme/default/template/catalog/product/view.phtml

```
<?php if ( $_product->getResource()->getAttribute('stoc')->getFrontend()->getValue($_product) = 'stoc limitat' : ?>
<?php echo '<div id="nota.produs"> Nota : Va rugam verificati telefonic disponibilitatea acestui produs.   </div>' ?>
<?php endif; ?> 
```

Rolling up my sleeves happily, save, upload, refresh but the product page does not load anything right.

I get it, I'm not calling the value the right way, am I?

Thanks.

P.S. Sorry if this is a stupidly simple matter. (I'm not the brightest light bulb in the ceiling when it comes to Magento, or for that matter PHP all together)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:04:57.767

尝试这个：

```
<?php if ($_product->getAttributeText('stoc') == 'stoc limitat') : ?> 
```

# asp.net - SqlException occures after changing Column properties in asp.net mvc 3

> ID：14729416
> 
> 赞同：0
> 
> 时间：2013-02-06T12:45:12.243
> 
> 标签：asp.net, sql, database, asp.net-mvc-3, linq-to-sql

I have the following model: Item contains Product, Shipping, UserId (that created this product). "Item : Product" and "Item : Shipping" is "1:1" relationship). When I want to add new Product to the database the SqlException occures:

Cannot insert the value NULL into column 'ProductId', table 'C:\USERS\ALEKSEY\REPOS\WORKING-COPY\WEBSTORE\WEBSTORE\APP_DATA\WEBSTORE.MDF.dbo.Products'; column does not allow nulls. INSERT fails.

Everything was working before I changed the "Is Identity" property of the column "ProductId" from true to false, so it is no longer autogenerated. I did it cause I need to upload data from xml file (and keep the ID from that file in ProductId). Also I need the user's ability to add new products.

Here is the controller action method that creates new product, shipping and the corresponding item:

```
public ViewResult Create()
    {
        var productId = 0;
        for (var i = 0; i < Int32.MaxValue; i++)
        {
            if (_productRepository.GetProduct(i) == null)
                productId = i;
        }    
        // the same code as above to get shippingId

        var p = _productRepository.CreateProduct(productId, "", "", 0, "", "", "");
        var s = _shippingRepository.CreateShipping(shippingId, 0, "");
        var userId = (Guid)Membership.GetUser().ProviderUserKey;
        var model = new StoreEditViewModel(_productRepository)
        {
            CurrentItem = _itemsRepository.CreateItem(p.ProductId, s.ShippingId, userId, DateTime.Now),
        };
        return View("Edit", model);
    } 
```

If I comment the line with product creation the same exception will occure with shipping.

Here is the ProductRepository method that uses Linq To SQL to create new product:

```
public Product CreateProduct(int productId, string name, /* other properties */)
    {
        var product = new Product
        {
            ProductId = productId,
            Name = name,
            // other properties
        };
        _dataContext.Products.InsertOnSubmit(product);
        _dataContext.SubmitChanges(); // SqlException occures !
        return product;
    } 
```

How could I fix this?

**Edit 1:** I also tried to insert integer instead of productId in CreateProduct(100, other stuff) method. Still get the SqlException:

Cannot insert the value NULL into column 'ProductId', table 'WebStore.dbo.Products'; column does not allow nulls. INSERT fails. The statement has been terminated.

**Edit 2:** It appeared that _dataContext didn't knew about the changed Columns' properties (as @devio supported). I just needed to update MyAppDataContext class.

The question is actually answered but I have another problem: Now when I invoke Create() method Product, Shipping and Item entries are added to the corresponding tables. Than Create() method returns "Edit" view where You can fill the actual data (at the moment when the new item is created it's empty).

Than the form in "Edit" view should be processed by Edit() action method:

```
 [HttpPost]
    public ActionResult Edit(StoreEditViewModel model, HttpPostedFileBase image)
    {
        var p = model.CurrentItem.Product;
        var s = model.CurrentItem.Shipping;
        if (ModelState.IsValid)
        {
            if (image != null)
            {
                var path = AppDomain.CurrentDomain.BaseDirectory +
                          ConfigurationManager.AppSettings["product-images-directory"];
                var imageName = "prod-" + p.ProductId.ToString(CultureInfo.InvariantCulture) + ".jpg";
                image.SaveAs(path + imageName);
            }
            _productRepository.UpdateProduct(p);
            _shippingRepository.UpdateShipping(s);
            return RedirectToAction("Content");
        }
        return View("Edit", model);
    } 
```

And I get (my own translation) "Server Error in the application", stack trace:

```
[MissingMethodException: No parameterless constructor defined for this object.]

System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +113
System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +232
System.Activator.CreateInstance(Type type, Boolean nonPublic) +83
System.Activator.CreateInstance(Type type) +6
System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +183
System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +564
System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +411
System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +324
System.Web.Mvc.Controller.ExecuteCore() +106
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +91
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +34
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +19
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +48
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

I really don't know what to do with this strange stack trace, can't find any friendly line.

What could be the reason?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:54:19.643

正如我已经在编辑 2 中所写的那样：似乎 _dataContext 不知道更改后的 Columns 的属性（支持@devio）。我只需要更新 MyAppDataContext 类。

MissingMethodException 发生是因为 StoreEditViewModel 没有无参数构造函数，所以我添加了空构造函数，一切都开始工作了！

StoreEditViewModel 需要 DefaultModelBinder 的无参数构造函数来实例化它。

# c++ - 使用 OpenCV 打开网络摄像头并使用 QLabel 显示它 - 白色窗口

> ID：14729417
> 
> 赞同：7
> 
> 时间：2013-02-06T12:45:13.457
> 
> 标签：c++, qt, opencv, video-capture, qlabel

我使用 OpenCV 和 Qt 库以及 VS 2010 在 Win7 x64 上工作。

我想用 OpenCV 打开我的相机，然后在从 Mat 转换为 QImage 之后用 Qt 显示捕获的帧，例如使用 QLabel。

我想这样做是因为使用函数 imshow("camera", image) 和 waitKey() 会减慢流式摄像机的速度。

这是我的代码：

```
int main () {
 QApplication a(argc, argv);
 QLabel myLabel;
 VideoCapture cap(0);
 //namedWindow(c"camera", 1);

 for (;;) {

    cap >> image;
        //conversion from Mat to QImage
    Mat dest;
    cvtColor(image, dest,CV_BGR2RGB);
    QImage image1= QImage((uchar*) dest.data, dest.cols, dest.rows, dest.step, QImage::Format_RGB888);

        //show Qimage using QLabel
    myLabel.setPixmap(QPixmap::fromImage(image1));
    myLabel.show();
    //imshow("camera",image);
    //if (waitKey(30)>= 0)  break;
 }
return a.exec();
} 
```

网络摄像头已正确打开并且可以正常工作，但我看到的是一个白色窗口，而不是捕获的帧，正如您在这张图片中看到的那样 ![在此处输入图像描述](../Images/05870c257c7cbf6303a39d65fc4a7718.png)

如果我取消注释：`namedWindow (..), imshow(..), if(waitKey(..)`，它可以工作（我看到两个窗口具有相同的图像），但我用 OpenCV 显示捕获的帧，这是我想要避免的。

我的问题是：我错了？？我不知道，从 Mat 到 Qimage 的转换是错误的 ??.. 或者，我不能只用 Qt 显示捕获的帧吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T13:03:21.693

我没有太多经验，但我可以看到这里可能出现的问题：

```
 for (;;) {

    cap >> image;
        //conversion from Mat to QImage
    Mat dest;
    cvtColor(image, dest,CV_BGR2RGB);
    QImage image1= QImage((uchar*) dest.data, dest.cols, dest.rows, dest.step, QImage::Format_RGB888);

        //show Qimage using QLabel
    myLabel.setPixmap(QPixmap::fromImage(image1));
    myLabel.show();
    //imshow("camera",image);
    //if (waitKey(30)>= 0)  break;
 } 
```

您在死循环中执行此操作 - 它会导致您的 QLabel 无限更新自身，因此您可能看不到任何东西。此外，如果取消注释`waitKey`对您有所帮助，那几乎意味着您正在将数据转换为`QImage`良好状态，但其他一些东西被破坏了。

请注意，它`a.exec()`永远不会执行，因为您将被困在循环中，但我想这足以满足这个概念。

为了不卡住事件循环，您需要创建`QTimer`并每隔 x 毫秒更新您的小部件：

```
 class VideoWindow: public QWidget
 {
    Q_OBJECT
    public:
        VideoWindow(QWidget* parent = 0): QWidget(parent), cap(0)
        {
            timer = new QTimer(this);
            connect(timer, SIGNAL(timeout()), this, SLOT(updatePicture()));
            timer->start(20);
        }

    public slots:
        void updatePicture()
        {
            cap >> image;
            //conversion from Mat to QImage
            Mat dest;
            cvtColor(image, dest,CV_BGR2RGB);
            QImage image1 = QImage((uchar*) dest.data, dest.cols, dest.rows, dest.step, QImage::Format_RGB888);

            //show Qimage using QLabel
            setPixmap(QPixmap::fromImage(image1));
        }

    private:
        QTimer * timer;
        VideoCapture cap;
};

int main(int argc, char** argv)
{
    QApplication app(argc, argv);
    VideoWindow w;
    w.show();

    app.exec();
    return 0;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:23:55.673

`paintEvent()`在要用于显示图像的小部件（小部件/主窗口）中尝试此操作。

在小部件的构造函数中打开相机：

```
VideoCapture myVideo;
myVideo.open(0);
if(!myVideo.isOpened())
   cout<<"CANNOT OPEN CAMERA"<<endl; //or you can put some error message 
```

在`paintEvent()`做这个

```
myVideo >> frame;
QImage image = QImage((const unsigned char*)frame.data,frame.cols,
               frame.rows,frame.step,QImage::Format_RGB888);

QRectF target(0.0,0.0,image.width(),image.height());
QRectF source(0.0,0.0,image.width(),image.height());
QPainter painter(this);
painter.drawImage(target,image,source) 
```

使用计时器，您可以将`timeout`信号连接到`update`小部件的插槽。使用 20-40 毫秒的间隔。就像您制作一个按钮来启动相机一样，将以下代码放入其`clicked`SLOT 中。

```
QTimer *timer = new QTimer;
timer->setInterval(20);
connect(timer,SIGNAL(timeout()),this,SLOT(update())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-06T19:29:41.563

如果您要在标签中开始捕获视频，那么您必须像在 CPP 中那样编写此代码：此代码对我来说工作得很好，我希望它也能对您有所帮助。

```
void <Class name Here>::on_button_clicked(){
captureVideoInLabel.open(0);
    if (captureVideoInLabel.isOpened() == false)
    {
        qDebug() << "Camera can't open";
        return;
    }
    timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, 
SLOT(processFrameAndUpdateGUI()));
    timer->start(20);
}

void <here you need to write class name>::processFrameAndUpdateGUI()
{
    Mat originalImage;
    captureVideoInLabel.read(originalImage);

    if (originalImage.empty() == true)
    {
        return;
    }

    QImage qOriginalImage((uchar*)originalImage.data, originalImage.cols, 
    originalImage.rows, originalImage.step, QImage::Format_RGB888);
    ui->label->setPixmap(QPixmap::fromImage(qOriginalImage));
} 
```

在标题中：

```
private slots:
    void processFrameAndUpdateGUI();
    void on_button_clicked();
private:
    cv::VideoCapture captureVideoInLabel; 
```

# css - css div stick to parent

> ID：14729423
> 
> 赞同：0
> 
> 时间：2013-02-06T12:45:16.587
> 
> 标签：css, html

I have the following:

```
<div class="outer">
  <p class="pclass">context...</p>
  <div class="inner">
      <img.../>
  </div>
</div> 
```

![enter image description here](../Images/5bb222a9a0bdae2d46b9b3ebf77016a7.png)

The inner div width is different depending on the image width.

The p width should depend on the image width.

P will contain some dynamic text. The problem is that if p's text is bigger than image widht, it jumps on top of the image.

I've tried to get around this by using css `"text-overflow"`, but that needs a width.

Also not working, setting margin:0 on the img, hoping to make it stick to the surounding div.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:05:46.293

试试下面的方法，它可以很好地简化你的代码。

```
<div class="outer">
  <p><img src="">context...</p>
</div>

.outer {
    overflow: hidden;
}

.outer img {
    float: right;
    margin: 0 0 20px 20px;
} 
```

如果您确实需要在图像周围有一个 DIV，您可以在图像周围添加一个 DIV 并将其设置为具有图像具有的浮动和边距属性，并将其设置为显示：inline-block 例如

```
<div class="outer">
  <p><div><img src=""></div>context...</p>
</div>

.outer {
    overflow: hidden;
}

.outer div {
    display: inline-block;
    float: right;
    margin: 0 0 20px 20px;
} 
```

# javascript - Javascript: How do I check mixed user input against an array of data objects?

> ID：14729427
> 
> 赞同：1
> 
> 时间：2013-02-06T12:45:23.790
> 
> 标签：javascript, arrays, parsing, for-loop

I am building a calculator app and am stuck at the part where I check the values chosen by the user against the data set of plans I have on the server.

I am using four data sliders that look like this:

![enter image description here](../Images/16b469567681c8088d3309e5af683b7c.png)

Every time the user slides the slider, I send back values to my script for validation and checking.

Now here is the static data set of values I am checking the user's input against:

```
plandata.data = [

            {       

                id: 'small',

                from: {
                    cpu: 1,
                    ram: 1,
                    hd: 40,
                    bw: 10
                },

                to: {
                    cpu: 2,
                    ram: 2,
                    hd: 500,
                    bw: 500
                },

                price: {
                    linux: 3490,
                    windows: 4190
                }

            },

            {

                id: 'medium',

                from: {
                    cpu: 2,
                    ram: 2,
                    hd: 40,
                    bw: 20
                },

                to: {
                    cpu: 4,
                    ram: 4,
                    hd: 500,
                    bw: 500
                },

                price: {
                    linux: 5600,
                    windows: 6300
                }

            },
  ...three more plans like this 
```

Now what I want to do is:

*   loop over the plan data and check which plan the user has chosen: Is it `small`, `medium`, `large` etc
*   throw an error and reset the slider if the values are out of valid range i.e. they should be between the `from` and `to` range.
*   if plan is correct, then get the price of that plan

I am stuck on the first step right now. Here is my code:

```
checkPlaninRange = function(cpuVal, ramVal, hdVal, bwVal) {
                    _.each(pdata, function(plan){

            if (cpuVal >= plan.from.cpu && cpuVal < plan.to.cpu 
                     && ramVal >= plan.from.ram && ramVal < plan.to.ram
                     && hdVal >= plan.from.hd && hdVal < plan.to.hd
                     && bwVal >= plan.from.bw && bwVal < plan.to.bw
                    ) 
            {
                console.log(plan.id, 'Plan Found');
            } else {
                console.log('plan not found');
            };

        });

}; 
```

The problem is: I am getting mixed results

```
plan not found plan.js:41
medium Plan Found plan.js:39

plan not found plan.js:41
medium Plan Found plan.js:39

plan not found plan.js:41
medium Plan Found plan.js:39

plan not found plan.js:41
medium Plan Found plan.js:39

plan not found 
```

What am I doing wrong? I can't seem to wrap my head around looping through the plan data and getting the right plan. Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:52:54.853

```
if (cpuVal >= plan.from.cpu && cpuVal <= plan.to.cpu 
                 && ramVal >= plan.from.ram && ramVal <= plan.to.ram
                 && hdVal >= plan.from.hd && hdVal <= plan.to.hd
                 && bwVal >= plan.from.bw && bwVal <= plan.to.bw
                ) 
```

我猜你想要 AND 而不是 OR

# applescript - Add album art to m4a file without iTunes with AppleScript

> ID：14729432
> 
> 赞同：3
> 
> 时间：2013-02-06T12:45:47.393
> 
> 标签：applescript

I have a bunch of folders containing songs in m4a format and also an album art file (png) named [Album name].png.

I would like to automate adding the album art to each file in each folder but i do not want to import them into iTunes first.

A bash script would work too in worst case since it could be run from an AppleScript. Suggestions?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-13T10:09:54.620

您可以使用 mp4art：

```
brew install mp4v2
mp4art --remove file.m4a
mp4art --add cover.jpg file.m4a 
```

或 eye3d 用于 mp3 或 flac 文件：

```
brew install eyed3
eyeD3_script --remove-image file.mp3
eyeD3_script --add-image=cover.jpg:FRONT_COVER file.mp3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T05:36:12.380

可以使用[TagEditor 项目](//github.com/Martchus/tageditor)添加封面。添加：

```
tageditor -s cover=ju.jpg --max-padding 100000 -f ki.m4a 
```

去除：

```
tageditor -s cover= --max-padding 100000 -f ki.m4a 
```

# html - 溢出：隐藏问题 Internet Explorer 7

> ID：14729434
> 
> 赞同：1
> 
> 时间：2013-02-06T12:45:51.407
> 
> 标签：html, css, internet-explorer, internet-explorer-7, overflow

HTML

```
<div class="block">
    <div class="element1">text text text text </div>
    <div class="element2">text text text text text text text text text text text text text text text text text text text text text text text text text text text text</div>
</div> 
```

CSS

```
.block{
    background:#F00;
    float: left;
    height: 90px;
    padding: 0 24px 0 0;
    position: relative;
    width: 256px;
}   
.block .element1{
    color: #000;
    display: block; 
    float: left;
    font-size: 32px;
    height: 35px;
    overflow: hidden;
    padding: 25px 0 0;
    text-align: right;
    width: 100%;
}
.block .element2 {
    color: #000;
    display: block;
    float: right;
    font-size: 12px;
    height: 14px;
    line-height: 1.1;
    margin: 15px 0 0;
    max-width: 205px;
    overflow: hidden;
    padding: 0 0 0 15px;
    text-align: right;
    width: auto;
} 
```

溢出：element2 类中的隐藏属性 => IE8、9、FF、Chrome、Safari、Opera 没有任何问题，但是如果我打开带有 IE7 文本的页面，则不会显示。将 position:relative attr 添加到块类（包装类），但没有任何变化（[IE6 + IE7 CSS 问题与溢出：隐藏；-位置：相对；组合](https://stackoverflow.com/questions/2403011/ie6-ie7-css-problem-with-overflow-hidden-position-relative-combo)）我该如何解决这个问题？ [http://jsfiddle.net/L5Y57/](http://jsfiddle.net/L5Y57/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:46:02.440

正如我在评论中所说。

您必须将`position: relative;`属性添加到使用`overflow: hidden`.

你还有另一个问题，因为`width: auto;`在 classes `.block .element2`，它的已知错误也是 IE7，要解决它，请将其更改为`width: 100%;`或任何固定宽度。

您可以在您的代码中检查我的修复：http: [//jsfiddle.net/L5Y57/2/](http://jsfiddle.net/L5Y57/2/)

# scala - Slick match on encrypted variable

> ID：14729438
> 
> 赞同：2
> 
> 时间：2013-02-06T12:46:11.360
> 
> 标签：scala, encryption, playframework-2.0, playframework-2.1, slick

How do I select on an encrypted variable with Slick.

I have a BCrypt encoded password in my database.

To Illustrate my intentions:

```
def login(name: String, password: String) = Action {
...
  for {
    u <- Users if u.name === name && BCrypt.checkpw(password, u.password)
  } yield u 
```

Of course slick complains about u.password being a lifted column and not a String.

How would you go about to solve the problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:59:49.020

实际上我设法解决了我的问题。

```
 def login(name: String, password: String) = Action {
    database withSession {
      (for {
        u <- Users if u.name === name 
      } yield u).list
    } match {
      case Nil => Ok("No user found")
      case head :: tail => 
        if(BCrypt.checkpw(password, head.password))
          Ok("accepted").withSession("userid" -> head.id.get.toString)
        else
          Ok("Incorrect password")
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T11:40:28.660

我有同样的问题，但在模型课上。

由于您的解决方案激发了我的灵感，因此我将其发布在这里，希望对您有所帮助。

```
def authenticate(email: String, password: String): Future[Option[User]] = db.run {
    Users.filter{_.email === email}.result.headOption
  } map {
    case Some(u) if BCrypt.checkpw(password, u.password) => Some(u)
    case _ => None
  } 
```

# jquery - jquery Ajax call resulting in Undefined Error in Firefox 18.0.1

> ID：14729445
> 
> 赞同：0
> 
> 时间：2013-02-06T12:46:18.393
> 
> 标签：jquery, asp.net, ajax, vb.net

$("#btnLogin").click(function () {

```
 if (order != "undefined")
              $.ajax(
                 {
                     type: "POST",
                     data: "{'NewOrder': '" + order + "'}",
                     url: "imgpost.aspx/Update",
                     dataType: "json",
                     contentType: "application/json",
                     processdata: true,
                     beforeSend: function (xhr, data) {
                         console.log(data);
                         alert(data);
                     },
                     success: function (msg) {
                     },
                     error: function (XMLHttpRequest, textStatus, errorThrown) {
                         alert("Error Occured!" + " | " + XMLHttpRequest + " | " + textStatus + " | " + errorThrown);

                     }
               });
      }); 
```

Here ajax call is failed and not redirecting to url : "imgpost.aspx/Update".

XMLHttpRequest and textStatus shows undefined and error respectively.

It occours only in latest update of mozilla 18.0.1

can anybody help me with this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:47:13.347

删除对象周围的引号。

```
data: {NewOrder: order}, 
```

# javascript - Reduce and Sum Array positions

> ID：14729451
> 
> 赞同：0
> 
> 时间：2013-02-06T12:46:33.460
> 
> 标签：javascript

Lets say I have this array:

```
var likes = [4,7,3,11,3,73,78,34,7,13]; 
```

However, I'm only capable of use the length of 5 due to some restrictions. So I want to "convert" it to an array lenght of 5, and sum the other positions, by distribute them equally.

Does anybody have a clue how can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:30:17.623

由于不太清楚您到底想要什么，我也会发布一个答案。无论您的输入有多大，此代码都将在您的输出数组中保持 5 的固定长度。

```
var input = [4,7,3,11,3,73,78,34,25,7,13,19,2],
    max = 5,
    out = [];

var adjacentItems = Math.ceil(input.length / max);
for(var i=0; i<input.length; i += adjacentItems) {
    var aSum = 0;
    for(var j=i; j<Math.min(i+adjacentItems, input.length); j++) {
        aSum += input[j];
    }
    out.push(aSum);
} 
```

[看看小提琴](http://jsfiddle.net/7rpdm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:05:20.193

也许这会解决你的问题：

```
var likes = [4,7,3,11,3,73,78,34,7,13],
    result_array = [ ];

for(var i = 0; i < likes.length; i++)
{
   if(i % 2)
   {
       var new_val = likes[i - 1] + likes[i];
       result_array.push(new_val);
   }
} 
```

在这里查看一个工作的[jsFiddle](http://jsfiddle.net/qrVeW/2/)。

这将导致新数组包含`[ 11, 14, 76, 112, 20 ]`，并且在将新值添加到初始数组时同样会增加长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:13:11.627

最后，我想我找到了答案！:) 如果您有任何建议，请发表评论！

```
var likes = [1,2,3,4,5,6,7,8,9,10];
    result_array = [];
    result_array2 = [];    
    max = 8;

if (likes.length>max){
    result_array = likes;
    for (var i = 0; i < max; i++) {
            var res = (likes.length - max) / max
            var new_val = (result_array[i] + (result_array[i+1] * res));
            result_array2.push(new_val);

    }

result_array = [];
result_array = result_array2;

}else{
result_array=likes
}

alert(result_array); 
```

[请在此处](http://jsfiddle.net/qTpVz/1/)检查代码

# r - 按时间对数据帧进行子集

> ID：14729454
> 
> 赞同：1
> 
> 时间：2013-02-06T12:46:39.817
> 
> 标签：r

我正在研究一个数据框，我之前已将时间和日期集成到一列（称为时间戳）中：

```
a <-c(1:21)
D <- c("2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14", "2012/12/14")
Time <- c("18:40:37", "18:40:48", "18:40:58", "18:41:08","18:41:18","18:41:28","18:41:38","18:41:48","18:41:58","18:42:08","18:42:18","18:42:28","18:42:38","18:42:48","18:42:58","18:43:08","18:43:18","18:42:28", "18:44:18", "18:44:28", "18:44:28")
df1 <- data.frame(a, D, Time)
df1 <- within(df1, { timestamp=format(as.POSIXct(paste(D, Time)), "%d/%m/%Y %H:%M:%S") }) 
```

我将如何子集数据框以在特定时间点之后排除值？我在 Stackoverflow 中找到了一些我认为可能会提供帮助的类似问题的代码，但我正在努力让时间元素工作：

```
subset(df1, format.Date(timestamp, ""%d/%m/%Y %H:%M:%S"") >"14/12/2012 18:42:00") 
```

任何建议将不胜感激。

编辑：我正在努力让下面详述的代码处理我的真实数据。本文末尾列出了我的数据框前四行的 dput()。我之前使用@Arun 推荐的代码行来为我的数据添加时间戳。

```
gps <- within(gps, { timestamp=format(as.POSIXct(paste(LOCAL.DATE, LOCAL.TIME)), 
+                                       "%d/%m/%Y %H:%M:%S") }) 
```

如果我尝试应用代码的第二部分（strptime ...），我会收到错误消息： Error in `$<-.data.frame`( `*tmp*`, "timestamp", value = list(sec = c(37, : replacement has 30208 rows, data has 4这种解释当我尝试将代码应用于我的整个数据时，我得到 8 行许多数字，用逗号分隔。如果你能以任何方式帮助我，我将非常感激。

```
structure(list(timestamp = c("14/12/2012 18:40:37", "14/12/2012 18:40:48", 
"14/12/2012 18:40:58", "14/12/2012 18:41:08"), LATITUDE = c(54.77769505, 
54.77765729, 54.77768751, 54.7777021), LONGITUDE = c(-1.56627049, 
-1.56639255, -1.56626555, -1.56662523), HEIGHT = c(" 173.911 M", 
" 161.742 M", " 146.905 M", " 138.016 M"), SPEED = c(" 0.465 km/h", 
" 0.728 km/h", " 4.574 km/h", " 17.335 km/h")), .Names = c("timestamp", 
"LATITUDE", "LONGITUDE", "HEIGHT", "SPEED"), row.names = c(NA, 
4L), class = "data.frame") 
```

**第二次编辑：**非常感谢@Arun 的解决方案。我有点困惑我应该如何使用代码，因为我的数据最初位于日期和时间列（LOCAL.DATE 和 LOCAL.TIME）中。因此，我使用了您原始解决方案中的第一行代码，然后使用了您修改后的第二行代码。

这是我使用的代码：

```
gps <- within(gps, { timestamp=format(as.POSIXct(paste(LOCAL.DATE, LOCAL.TIME)), 
                                      "%d/%m/%Y %H:%M:%S") })

gps$timestamp <- strptime(gps$timestamp, "%Y-%m-%d %H:%M:%S") 
```

但是现在我得到了一串 NA（和一些 -1）。抱歉，如果我以不正确的方式使用代码...

**第三次编辑** 对@Arun 的困惑表示歉意。当我为日期列尝试两种方式时，我得到了错误。如果我将其保留为 yr/m/d，原始数据是如何格式化的，我会得到 dput() 的：

```
structure(list(timestamp = c("2012/12/14 18:40:37", "2012/12/14 18:40:48", 
"2012/12/14 18:40:58", "2012/12/14 18:41:08"), LATITUDE = c(54.77769505, 
54.77765729, 54.77768751, 54.7777021), LONGITUDE = c(-1.56627049, 
-1.56639255, -1.56626555, -1.56662523), HEIGHT = c(" 173.911 M", 
" 161.742 M", " 146.905 M", " 138.016 M"), SPEED = c(" 0.465 km/h", 
" 0.728 km/h", " 4.574 km/h", " 17.335 km/h")), .Names = c("timestamp", 
"LATITUDE", "LONGITUDE", "HEIGHT", "SPEED"), row.names = c(NA, 
4L), class = "data.frame") 
```

如果我然后使用：

```
gps2$timestamp <- strptime(gps2$timestamp, "%Y/%m/%d %H:%M:%S") 
```

...并尝试在 R Studio 的工作区窗口中查看数据框，R 会话中止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:54:33.853

最好这样加载字符向量，而不是使用因子`stringsAsFactors = FALSE`（如下所示）

```
# make sure character columns are not converted to factors
df1 <- data.frame(a, D, Time, stringsAsFactors = FALSE) 
```

然后，

```
df1 <- within(df1, { timestamp=format(as.POSIXct(paste(D, Time)), 
                               "%d/%m/%Y %H:%M:%S") })
# convert timestamp here
df1$timestamp <- strptime(df1$timestamp, "%d/%m/%Y %H:%M:%S") 
```

现在，以这种方式尝试子集：

```
# now subset
subset(df1, timestamp > strptime("14/12/2012 18:42:00", "%d/%m/%Y %H:%M:%S"))

#     a          D     Time           timestamp
# 10 10 2012/12/14 18:42:08 2012-12-14 18:42:08
# 11 11 2012/12/14 18:42:18 2012-12-14 18:42:18
# 12 12 2012/12/14 18:42:28 2012-12-14 18:42:28
# 13 13 2012/12/14 18:42:38 2012-12-14 18:42:38
# 14 14 2012/12/14 18:42:48 2012-12-14 18:42:48
# 15 15 2012/12/14 18:42:58 2012-12-14 18:42:58
# 16 16 2012/12/14 18:43:08 2012-12-14 18:43:08
# 17 17 2012/12/14 18:43:18 2012-12-14 18:43:18
# 18 18 2012/12/14 18:42:28 2012-12-14 18:42:28
# 19 19 2012/12/14 18:44:18 2012-12-14 18:44:18
# 20 20 2012/12/14 18:44:28 2012-12-14 18:44:28
# 21 21 2012/12/14 18:44:28 2012-12-14 18:44:28 
```

**编辑：**试试这个：

```
df1 <- within(df1, { timestamp=as.POSIXct(timestamp, format = "%d/%m/%Y %H:%M:%S") })
df1$timestamp <- strptime(df1$timestamp, "%Y-%m-%d %H:%M:%S") 
```

# axapta - EP ax 2012 中的新角色中心页面

> ID：14729457
> 
> 赞同：0
> 
> 时间：2013-02-06T12:46:41.737
> 
> 标签：axapta, x++, dynamics-ax-2012, enterprise-portal

我试图为我的新角色中心页面设置安全角色、权限。我遵循了如下所述的方法。

*   在 ax 2012 中部署的 EP 中创建了一个页面作为角色中心页面。
*   为新角色中心配置文件分配的用户。
*   使用安全开发工具为此用户配置文件创建了角色和职责权限入口点。

虽然在 ax 2012 rolecenter 中测试正常，但是当我尝试登录 EP 时，我遇到了错误。“错误：拒绝访问”。其他页面链接与同一用户正常工作。

关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T09:56:45.317

您还可以为每个 Web 模块设置不同的安全性，以便检查该用户是否有权访问所有模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T09:34:47.273

请尝试遵循本指南，它过去对我有用（在 AX 2009 上）但我认为您错过了一些步骤

[http://msdax.files.wordpress.com/2009/12/how-to-create-a-new-role-centre-in-dynamics-ax-2009.pdf](http://msdax.files.wordpress.com/2009/12/how-to-create-a-new-role-centre-in-dynamics-ax-2009.pdf)

# c - 将“int”分配给“int [(((sizetype)(((ssizetype)m) -1)) 1)]”时的类型不兼容

> ID：14729458
> 
> 赞同：2
> 
> 时间：2013-02-06T12:46:44.960
> 
> 标签：c, sorting

以下 C 代码给出错误：

```
incompatible types in assignment of ‘int’ to 
‘int [(((sizetype)(((ssizetype)m) -1)) 1)]’ 
```

在我调用递归函数的行上：

```
int mergeSort(int arr[], int n)
{
    if (n > 1) {
        int m = (int)(n / 2);
        int A1[m];            // array 1 --> 1 TO M
        int A2[n-m];          // array 2 --> M + 1 TO N

        int temp = m+1;
        for (int i = 0; i < n; i++) {
            if (i == m) break;
            A1[i] = arr[i];
            A2[i] = arr[temp++];
        }

        A1 = mergeSort(A1, m); //error happens here, assigning an 
                               //integer into an integer array.

        A2 = mergeSort(A2, n - m); 

        arr = merge(A1, A2); 
    }

    return arr;
} 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:48:06.283

有几个错误：

*   C++ 不支持可变长度数组 ( `A1[m]`) - 请改用 a `std::vector`。
*   即使这样做了，数组也不能重新分配，所以`A1 =...`是非法的
*   即使他们可以，你也不能`int`为他们分配一个。`mergeSort`返回一个`int`（为什么？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T18:26:32.417

**产生上述错误的准系统程序：**

```
#include <iostream>
using namespace std;
int main(){
    int (*p)[ 5 ]; //p is "a pointer to an array of 5 ints".

    p[0] = 10;     //Try to assign the integer 10 to array int[5]?  NO!

    //You get:
    //error: incompatible types in assignment of `int' to `int[5]'
} 
```

您不能将 int 分配给 int 数组。您必须首先像这样取消引用它：

```
#include <iostream>
using namespace std;
int main(){
    int (*p)[ 5 ];  //p is "a pointer to an array of 5 ints". 
    *p[0] = 10;     //assign the integer 10 to position 0 of the 
                    //array where p is pointing.

    cout << *p[0];  //prints 10\.    no error thrown.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:56:37.823

您的问题主要与 C 样式数组已损坏且不应使用的事实有关。只需将所有 C 样式数组替换为`std::vector`，您的问题就会消失。除了返回值，它（从事物的外观）也应该是`std::vector<int>`.

# mobile - Appixia 应用程序中的块布局中的文本不可见

> ID：14729459
> 
> 赞同：0
> 
> 时间：2013-02-06T12:46:48.873
> 
> 标签：mobile, appixia

我有一个用于自定义类别列表的`GenericStaticBlocksCellView`内部。`CategoryGridView`我遵循本[教程](http://kb.appixia.com/frontend%3atutorials%3acustomcategorylist1)并在我的行视图中添加了几个块。现在我有一个包含标题的文本块和一个包含行背景的图像块。

由于某种原因，标题的文本仍然是隐藏的。我看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:46:48.873

如果您看不到您的文本块，您可能会遇到以下潜在问题之一：

1.  确保您的背景在文本**后面。**如果您的背景图像块是在您的文本块之后定义的（即块 1 是文本，块 2 是背景），如果重叠，它将被绘制在它上面。在这种情况下，您可以做什么交换他们的订单。始终确保您想要在前面的块是最后一个。

2.  如果您看不到您的文本块，请确保它的位置正确。尝试将其宽度设置为 100%，高度设置为 100%，左侧设置为 0%，顶部设置为 0%。这将确保您看到它并使其恰好出现在您的行的中间。

3.  最后一个问题，有点疯狂，但可能是这样：如果您的背景图像太大，它可能会超出您的行边界。默认情况下，块画布**不裁剪**，这意味着跳出的内容将呈现在您的行之外。如果您的背景图像高度太大，大于您的画布高度，它可能会被绘制到外面并覆盖下一行的标题。在这种情况下看到的效果通常是标题只出现在某些行中 - 而不是全部。要解决此问题，您可以使背景图像更小，或使行更大。要更改行高，请转到`CategoryGridView`本身并找到`WidthHeightRatio`场地。如果你让这个数字更大，它会让你的行更高。为获得最佳结果，数字应该是背景像素高度除以背景像素宽度。

# css - 字体在 Django 中不起作用

> ID：14729464
> 
> 赞同：6
> 
> 时间：2013-02-06T12:47:05.933
> 
> 标签：css, django

在 django（本地测试项目）中，我将`style.css`文件放在一个静态文件夹中，该文件夹非常完美，并且样式适用于模板。static 文件夹包含一个图像文件夹和一个字体文件夹。图片文件夹的内容出现在浏览器中，但字体没有！！！这是我的`font-face`代码：

```
font-family: '‌‌‌BMitra';
src: url('fonts/BMitra.eot?#') format('eot'),
url('fonts/BMitra.ttf') format('truetype'),
url('fonts/BMitra.woff') format('woff'); 
```

我通过 firebug 检查 css，发现我的个人字体被禁用，浏览器改用 tahoma：

```
direction: rtl;
color: #092E20;
font-size: 24px;
font-family: BMitra, Tahoma, Arial;
text-align: right; 
```

你如何在 django 中使用字体？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T12:50:42.563

正如您所提到的，您的目录结构是：

*   静止的
    *   css
        *   my_css_file.css
    *   字体
        *   字体1
        *   字体2

然后在您的`my_css_file.css`文件中，您需要升级一个文件夹以访问字体：

```
url('../fonts/BMitra.ttf') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-09T19:42:07.117

因此，以防万一有人仍然遇到这个问题，我在其他任何地方都找不到答案。在 CSS 内部，它不能使用相对路径，只能通过从静态文件夹开始的绝对路径，如下所示：

```
src: url('/static/fonts/BMitra.eot?#') format('eot'), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T08:57:42.133

这可能是由于 CORS 问题。您的字体是否与 Chrome 一起使用？

这可能会有所帮助：

[http://html5hacks.com/blog/2012/11/18/configure-amazon-s3-for-cross-origin-resource-sharing-to-host-a-web-font/](http://html5hacks.com/blog/2012/11/18/configure-amazon-s3-for-cross-origin-resourse-sharing-to-host-a-web-font/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-22T07:18:45.977

除了路径版本，您应该更改：

```
src: url('fonts/BMitra.eot?#') format('eot'), 
```

至：

```
src: url('fonts/BMitra.eot?#') format('eot'); 
```

# asp.net - 我需要来自 db 的这个查询

> ID：14729467
> 
> 赞同：0
> 
> 时间：2013-02-06T12:47:13.547
> 
> 标签：asp.net, sql-server

请帮我执行这个查询

```
 id    FDeviceName  FDeviceType
    1     case           mini
    2     rack           b
    3     amir           d  
    4     rack           a   
    5     case          max 
    6     case         mini 
```

我想要这个查询回来

```
id    FDeviceName  FDeviceType      count
1     case           mini                2
2     rack           b                   1
3     amir           d                   1
4     rack           a                   1
5     case          max                  1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:53:37.793

```
SELECT MIN(id), FDeviceName, FDeviceType, Count(Id)
  FROM tablename
  GROUP BY FDeviceName, FDeviceType
  ORDER BY 1; 
```

应该产生你所要求的，假设 id 是一个领域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:54:08.013

```
SELECT id, FDeviceName, FDeviceType, COUNT(*)  FROM Table GROUP BY FDeviceName, FDeviceType 
```

# css - Twitter Bootstrap - 静态导航栏

> ID：14729468
> 
> 赞同：1
> 
> 时间：2013-02-06T12:47:14.127
> 
> 标签：css, twitter-bootstrap

如何更改 TB 导航栏的背景颜色？看看[http://twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)上的顶部导航栏。当我启动`background-color: pink;`时`navbar.navbar-inverse.navbar-fixed-top`，什么也没有发生。我尝试在其他元素上做同样的事情。我似乎无法更改颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:33:43.900

添加以下 CSS 并更改颜色。您需要更改：（`#222222`较深的颜色）和`#111111`（较浅的颜色），因为它们位于背景渐变的不同端。您需要同时更改它们。改变`#1b1b1b`和`#252525`介于两者之间。

```
.navbar-inverse .navbar-inner {
    background-color: #1b1b1b;
    background-image: -moz-linear-gradient(top, #222222, #111111);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#222222), to(#111111));
    background-image: -webkit-linear-gradient(top, #222222, #111111);
    background-image: -o-linear-gradient(top, #222222, #111111);
    background-image: linear-gradient(to bottom, #222222, #111111);
    background-repeat: repeat-x;
    border-color: #252525;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff222222', endColorstr='#ff111111', GradientType=0);
}

.navbar-inverse .nav .active > a, .navbar-inverse .nav .active > a:hover, .navbar-inverse .nav .active > a:focus {
    color: #ffffff;
    background-color: #111111;
} 
```

如果您不想要渐变，只需执行以下操作并分别更改`#1b1b1b`背景`#252525`颜色和边框颜色以及`#111111`“选定”颜色。

```
.navbar-inverse .navbar-inner {
    background-color: #1b1b1b;
    background-image: none;
    border-color: #252525;
    filter: none;
}

.navbar-inverse .nav .active > a, .navbar-inverse .nav .active > a:hover, .navbar-inverse .nav .active > a:focus {
    color: #ffffff;
    background-color: #111111;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:31:53.897

我已经使用 bootstrap.css 之后加载的单独样式表更改了导航栏，其中包括

```
.navbar {
  background-color: #2a2a86; /* fallback color, place your own */

  /* Gradients for modern browsers, replace as you see fit */
  background-image: -moz-linear-gradient(top, #3a3a96, #2a2a86);
  background-image: -ms-linear-gradient(top, #3a3a96, #2a2a86);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#3a3a96), to(#2a2a86));
  background-image: -webkit-linear-gradient(top, #3a3a96, #2a2a86);
  background-image: -o-linear-gradient(top, #3a3a96, #2a2a86);
  background-image: linear-gradient(top, #3a3a96, #2a2a86);
  background-repeat: repeat-x;

  /* IE8-9 gradient filter */
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#3a3a96', endColorstr='#2a2a86', GradientType=0); 
```

}

然后，您可以将相同的逻辑应用于按钮等。

对我来说，基色似乎是在元素的基类中设置的，所以

```
.navbar
.btn 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:32:45.630

尝试：

```
background-color: pink !important; 
```

# php - 使用 magento api 进行用户身份验证

> ID：14729469
> 
> 赞同：0
> 
> 时间：2013-02-06T12:47:18.170
> 
> 标签：php, api, magento

我正在使用此代码对 magento 上的用户进行身份验证是

```
$redirecturi = 'http://localhost/magento';
$temporaryCredentialsRequestUrl = "http://localhost/magento/oauth/initiate?oauth_callback=".$redirecturi;
$customerAuthorizationUrl = 'http://localhost/magento/oauth/authorize';
$accessTokenRequestUrl = 'http://localhost/magento/oauth/token';

$oauthClient = new OAuth($consumerkey, $consumersecret, OAUTH_SIG_METHOD_HMACSHA1, OAUTH_AUTH_TYPE_URI);
$oauthClient->enableDebug();

$requestToken = $oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
header('Location: '.$customerAuthorizationUrl.'?oauth_token='.$requestToken['oauth_token']);
exit(0); 
```

但它显示致命错误，例如“找不到类'OAuth'”。我使用此链接进行身份验证[magento 身份验证](http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html)。请查看此内容并回复答案。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:27:37.693

请检查您是否安装了 PHP 的 OAUth 扩展。见[http://www.php.net/manual/en/oauth.installation.php](http://www.php.net/manual/en/oauth.installation.php)

# ruby-on-rails - RSpec 将对象作为参数传递给 controller_spec

> ID：14729471
> 
> 赞同：4
> 
> 时间：2013-02-06T12:47:22.537
> 
> 标签：ruby-on-rails, rspec, rspec2

我有一个 users_controller_spec.rb ：

```
describe "POST create" do
  describe "with valid params" do
    let(:user) { create(:user) }

    it "assigns a newly created user as @user" do
      post :create, user: user
      assigns(:user).should be_a(User)
      assigns(:user).should be_persisted
    end
  end

 ...

end 
```

Debuggin 我发现控制器收到了下一个参数

```
(rdb:1) pp params
{"user"=>"1", "controller"=>"users", "action"=>"create"} 
```

为什么“用户”=>“1”？为什么没有正确传递用户对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:28:16.087

`post :create`期望用于创建用户记录的用户模型的属性。您看到 "user" => "1" 是因为它将您创建的用户的 id 传递给 :user 参数。

您不想创建用户记录来测试创建操作。您想为创建操作创建属性哈希以创建记录。

你可以写这样的东西（假设这会通过你的模型验证）：

```
user_attributes = { :email => "something@example.com", :username => "something" }
post :create, user: user_attributes 
```

# java - 我可以并行创建 Java HttpServer 线程/处理请求吗？

> ID：14729475
> 
> 赞同：11
> 
> 时间：2013-02-06T12:47:35.233
> 
> 标签：java, httpserver

我按照我在网上找到的教程，使用 Sun 的轻量级 HttpServer 构建了一个简单的 HttpServer。

基本上主函数如下所示：

```
public static void main(String[] args) throws Exception {
        HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);
        //Create the context for the server.
        server.createContext("/", new BaseHandler());

        server.setExecutor(null); // creates a default executor
        server.start();
    } 
```

我已经实现了 BaseHandler 接口的方法来处理 Http 请求并返回响应。

```
static class BaseHandler implements HttpHandler {
        //Handler method
        public void handle(HttpExchange t) throws IOException {

          //Implementation of http request processing
          //Read the request, get the parameters and print them
          //in the console, then build a response and send it back.
        }
  } 
```

我还创建了一个通过线程发送多个请求的客户端。每个线程向服务器发送以下请求：

> http://localhost:8000/[context]?int="+threadID

在每个客户端运行时，请求似乎以不同的顺序到达服务器，但它们是以串行方式提供的。

如果可能的话，我希望以并行方式处理请求。

例如，是否有可能在单独的线程中运行每个处理程序，如果可以，这是一件好事吗？

还是我应该完全放弃使用 Sun 的轻量级服务器并专注于从头开始构建一些东西？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T13:08:19.823

正如您在[ServerImpl](http://www.docjar.com/html/api/sun/net/httpserver/ServerImpl.java.html)中看到的那样，默认执行程序只是“运行”任务：

```
 157       private static class DefaultExecutor implements Executor {
  158           public void execute (Runnable task) {
  159               task.run();
  160           }
  161       } 
```

您必须为您的 httpServer 提供一个真正的执行程序，如下所示：

```
server.setExecutor(java.util.concurrent.Executors.newCachedThreadPool()); 
```

您的服务器将并行运行。小心，这是一个无限制的 Executor，请参阅[Executors.newFixedThreadPool](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool(int))来限制 Thread 的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-25T13:55:37.787

您使用了在同一个调用者线程中运行处理程序的server.setExecutor( **null )。**在这种情况下，运行服务器的主线程。

您只需要将行更改为

```
public static void main(String[] args) throws Exception {

    HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);
    //Create the context for the server.
    server.createContext("/", new BaseHandler());
    server.setExecutor(Executors.newCachedThreadPool());
    server.start();
} 
```

# c# - 通过 asp.net mvc 中的键盘在模型之间切换

> ID：14729480
> 
> 赞同：1
> 
> 时间：2013-02-06T12:47:53.923
> 
> 标签：c#, javascript, asp.net-mvc, orchardcms

我正在为 Orchard CMS 编写模块。我有几个元素的投影？并且每个元素都有自己的 javascript 弹出窗口，在单击“弹出”按钮后出现。

如何通过键盘箭头在弹出窗口之间切换？每个弹出窗口都从它自己的模型中获取数据。

模型：

```
<div id="marketpart">
<img src="@(new HtmlString("/Media/Catalog/" + @Model.Path))" alt = "no image" width="200px" height="150px"/><br />
@T("ProductName -") @Model.Name<br />
@T("Art - ") @Model.Art<br />
@T("Packing - ") @Model.Packing<br />
@T("Country - ") @Model.Country<br />
@T("Price - ") @Model.Price<br /> 
```

```
<div id="@Model.Art" class="popup">
<img src="@(new HtmlString("/Media/Catalog/" + @Model.Path))" alt = "no image" width="200px" height="150px"/><br />
@T("Name - ") @Model.Name<br />
@T("Art - ") @Model.Art<br />
@T("Price - ") @Model.Price<br />
@T("Packing - ") @Model.Packing<br />
@T("Country - ") @Model.Country<br />
<button onclick="closePopup('@Model.Art');" class="price"></button> 
```

JS：

```
function showPopup(id) {
var popup = document.getElementById(id);
popup.style.display = 'block';
}

function closePopup(id) {
var popup = document.getElementById(id);
popup.style.display = 'none';
}

document.onkeydown = checkKeycode
function checkKeycode(e) {
var keycode;
if (window.event) keycode = window.event.keyCode;
else if (e) keycode = e.which;
if (keycode == 37) {
    alert("left");
}
if (keycode == 39) {
    alert("right");
}
} 
```

所以，我需要在按键“左”或“右”的模型之间切换（我的代码中的警报）。

# android - 是什么让这个 Android 应用程序可调试

> ID：14729485
> 
> 赞同：5
> 
> 时间：2013-02-06T12:48:09.920
> 
> 标签：android, debugging

到目前为止，当我制作我的应用程序的可调试版本时，我使用：

android:debuggable="true"

在清单中。

但是我刚刚下载了一些不使用它的源代码，但是当我使用 Debug 启动它时，它处于调试模式。此应用程序的调试标志设置在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:50:23.453

当您在调试模式下运行时，ADT 会为您执行此操作。从[文档](http://developer.android.com/tools/building/building-eclipse.html)：

> 通过将元素的 android:debuggable 属性设置为 true，确保您的应用程序是可调试的。从 ADT 8.0 开始，默认情况下在调试模式下构建时会执行此操作。

# iphone - iOS - 如何存储捕获的图像并将其显示在您的应用程序中

> ID：14729488
> 
> 赞同：1
> 
> 时间：2013-02-06T12:48:27.110
> 
> 标签：iphone, ios, ipad

我正在创建一个应用程序，它从 iphone 相机捕获图像并将其显示在创建的应用程序中我阅读了 ios 开发人员库中的一些文章并将此代码编写在 .m 文件中

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
           usingDelegate: (id <UIImagePickerControllerDelegate,
                               UINavigationControllerDelegate>) delegate {

if (([UIImagePickerController isSourceTypeAvailable:
             UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)
        || (controller == nil))
    return NO;

UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

// Displays a control that allows the user to choose picture or
// movie capture, if both are available:
cameraUI.mediaTypes =
    [UIImagePickerController availableMediaTypesForSourceType:
        UIImagePickerControllerSourceTypeCamera];

// Hides the controls for moving & scaling pictures, or for
// trimming movies. To instead show the controls, use YES.
cameraUI.allowsEditing = NO;

cameraUI.delegate = delegate;

[controller presentModalViewController: cameraUI animated: YES];
return YES;
} 
```

还创建了一个与此代码链接的按钮，它调用此函数但控件不传递给上述函数

```
- (IBAction) showCameraUI {
[self startCameraControllerFromViewController: self
                                usingDelegate: self];
} 
```

而且我也不知道这段代码是否有效

有人有更好的主意吗。谢谢，阿伦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:54:46.530

首先将委托分配给它的源文件

然后，当您按下按钮时，实现此方法在您的应用程序中打开相机控制器

首先为 iPad 创建 PopOverController 因为我们不能直接打开 ImagePicker Controller

**编辑**：添加 UIPopOverController

```
- (IBAction) showCameraUI {
     BOOL hasCamera = [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera];
     UIImagePickerController* picker = [[UIImagePickerController alloc] init];
     picker.delegate = self;
     picker.sourceType = hasCamera ? UIImagePickerControllerSourceTypeCamera :    UIImagePickerControllerSourceTypePhotoLibrary;

     if (self.popoverController != nil) {
        [self.popoverController dismissPopoverAnimated:YES];
        self.popoverController=nil;
     }

     self.popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
      CGRect popoverRect = [self.view convertRect:[yourBtn frame]
                                   fromView:[yourBtn superview]];

     popoverRect.size.width = MIN(popoverRect.size.width, 100) ;
     popoverRect.origin.x = popoverRect.origin.x;

     [self.popoverController
     presentPopoverFromRect:popoverRect
     inView:self.view
      permittedArrowDirections:UIPopoverArrowDirectionAny
     animated:YES];

    } 
```

并实现这个委托方法来获取捕获的图像

```
- (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissModalViewControllerAnimated:YES];
    UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage];
    UIImage *yourImageView = image;
    if (popoverController != nil) {
     [popoverController dismissPopoverAnimated:YES];
     self.popoverController=nil;
     }
} 
```

如果用户取消控制器，请执行此方法

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController*)picker
{
    [picker dismissModalViewControllerAnimated:YES];
     if (popoverController != nil) {
     [popoverController dismissPopoverAnimated:YES];
     self.popoverController=nil;
     }
}

- (void)pickerDone:(id)sender
{
     if (popoverController != nil) {
     [popoverController dismissPopoverAnimated:YES];
     self.popoverController=nil;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:53:26.650

您可以使用委托： UIImagePickerControllerDelegate

使用如下：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)mediaAndInfo

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker 
```

# google-chrome - CSS3 变换旋转导致 Chrome 偏移 1px

> ID：14729492
> 
> 赞同：55
> 
> 时间：2013-02-06T12:48:29.653
> 
> 标签：google-chrome, css, css-transitions, css-transforms

我在使用 css3 变换旋转过渡的 chrome 中遇到问题。过渡工作正常，但就在它完成元素移动一个像素之后。另一个奇怪的事情是它只发生在页面居中时（`margin:0 auto;`）。如果您也删除过渡，该错误仍然存​​在。

你可以在这里看到它发生：

[http://jsfiddle.net/MfUMd/1/](http://jsfiddle.net/MfUMd/1/)

HTML：

```
<div class="wrap">
    <img src="https://github.com/favicon.ico" class="target" alt="img"/>
</div>

<div class="wrap">
    <div class="block"></div>
</div> 
```

CSS：

```
.wrap {
    margin:50px auto;
    width: 100px;
}
.block {
    width:30px;
    height:30px;
    background:black;
}
.target,.block {
    display:block;
    -webkit-transition: all 0.4s ease;
    -moz-transition: all 0.4s ease;
    -o-transition: all 0.4s ease;
    transition: all 0.4s ease;
}
.target:hover,.block:hover {
    -webkit-transform: rotate(90deg); 
    -moz-transform: rotate(90deg); 
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);  
} 
```

注释掉该`margin:0 auto;`行以使其消失。

任何人都知道如何在保持页面居中的同时阻止这种情况？

我在 OSX 10.6.8 上使用版本 24.0.1312.57

干杯

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-03-25T20:15:48.820

实际上只需将其添加到包含所有元素的站点容器中： `-webkit-backface-visibility: hidden;`

应该修！

吉诺

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-07T09:27:09.007

我有同样的问题，我通过将以下内容添加到使用转换的 div 的 css 来修复它：

```
-webkit-backface-visibility: hidden;
-webkit-transform: translateZ(0) scale(1.0, 1.0); 
```

背面用于基于 3D 的过渡，但如果您只使用 2D，则不需要额外的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:59:09.137

身体维度和变换结构之间的关系有些不寻常。我其实不是因为 fiddle iframe 包含了代码的预览。

无论如何，我会建议这种方法：

```
body{
  width:100%;
  float:left;
}

.wrap {
  margin: 50px 45%;
  width: 5%;
  float: left;
}
.block {
  width:30px;
  height:30px;
  background:black;
}
.target,.block {
  -webkit-transition: all 0.4s ease;
  -moz-transition: all 0.4s ease;
-o-transition: all 0.4s ease;
transition: all 0.4s ease;
}
.target:hover,.block:hover {
-webkit-transform: rotate(90deg); 
    -moz-transform: rotate(90deg); 
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);  
} 
```

这是更新的[小提琴](http://jsfiddle.net/MfUMd/60/)

# excel - 忽略 DateTime 单元格中的时间值 - MS Excel

> ID：14729495
> 
> 赞同：7
> 
> 时间：2013-02-06T12:48:40.087
> 
> 标签：excel, datetime, excel-formula, formula, formulas

我在 A 列中有以下日期值（带时间）。

```
1/1/2012 8:50  
1/1/2012 8:45  
1/1/2012 8:55  
1/1/2012 8:59  
1/1/2012 8:12  
1/1/2012 8:30  
1/1/2012 9:50  
1/1/2012 10:00 
```

以及单元格 B1 中的以下值。

```
1/1/2012 
```

现在，当我应用公式`=COUNTIF(A:A,"=" & B1)`计算与单元格 B1 匹配的 A 列中的单元格数量时，它给了我零，因为它也在考虑时间值。

有什么解决方法/技巧吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T12:54:27.033

`INT`函数将只取日期/时间中的日期，所以试试`SUMPRODUCT`这样

`=SUMPRODUCT((INT(A2:A10)=B1)+0)`

....最好像我一样限制范围，这样您就不会将整个列与 SUMPRODUCT 一起使用（在 Excel 2003 或更早版本中是强制性的）

...或使用`COUNTIFS`检查日期/时间是否在 B1 和 B1+1 之间（日期 B1 中的某个时间），即

`=COUNTIFS(A:A,">="&B1,A:A,"<"&B1+1)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-23T13:57:03.220

这工作得更好：

```
 =DATEVALUE(TEXT(A1,"dd/mm/yyyy")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-19T12:41:04.860

我想出了一个解决方法。为 A 列的 INT 和 B 列的 INT 创建一个附加列，然后对这些列使用 match 函数。有点笨拙，但它有效。

```
 A       ||      B     ||      C     ||     D     ||        E
 --------------------------------------------------------------------------
 1/1/2012 8:50  ||  1/1/2012  ||  =INT(A2)  ||  =INT(B2) ||  =MATCH(C2, D2) 
```

# cakephp - CakePHP 使用表单助手的多个字段集

> ID：14729511
> 
> 赞同：1
> 
> 时间：2013-02-06T12:49:20.487
> 
> 标签：cakephp

我正在创建一个表单并想使用多个字段集和图例，这可以使用表单助手吗？

到目前为止我的表格 -

```
echo $this->Form->create('PatientCase');
echo $this->Form->inputs(array(
    'legend'                => 'Patient Details',
...
));
echo $this->Form->end('Save Patient Case'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:07:51.123

如果你使用 Form::inputs()，CakePHP 会自动将字段包装在一个字段集中：

```
echo $this->Form->inputs(array(
    'legend'=>'Login',
    'User.username',
    'User.password'
)); 
```

将产生：

```
<fieldset>
    <legend>Login</legend>
    <div class='input text'>...</div>
    <div class='input password'>...</div>
</fieldset> 
```

如果在输入数组中设置 'fieldset'=>false，cake 将抑制字段字段集标记。

您还可以在插入字段集标记之前和之后使用（也由@kical 建议） - 这会使您的代码不那么直观：

```
echo $this->Form->input('User.username', array(
    'before'=>'<fieldset><legend>Login</legend>'
));

echo $this->Form->input('User.password', array(
    'after'=>'</fieldset>'
)); 
```

您还可以手动插入字段集标记（如果您想自定义字段集标记或在字段集中创建字段集，则非常方便：

```
<fieldset>
    <legend>Login</legend>
    <?php 
    echo $this->Form->input('User.username');
    echo $this->Form->input('User.password');
    ?>
</fieldset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:25:54.640

参见 API：[http ://api.cakephp.org/class/form-helper#method-FormHelperinput](http://api.cakephp.org/class/form-helper#method-FormHelperinput)

主要是参数，如：，，`before`或只是`after``between``format`

# javascript - Javascript，将字符串添加到数组[字符串]

> ID：14729512
> 
> 赞同：0
> 
> 时间：2013-02-06T12:49:19.777
> 
> 标签：javascript

我有两个变量：

```
var cost = new Array();
var maxslot = new Array(); 
```

我设置这样的值：

```
<script>
cost = {"m2mp":"0.05"};
maxslot = {"m2mp":"1000"};
</script>
<script>
cost = {"samp":"0.04"};
maxslot = {"samp":"500"};
</script> 
```

但是`samp`替换`m2mp`，如果我打电话`alert(cost["m2mp"])`，它会输出`undefined`（如果我不分配`samp`，我会得到正确的输出）。我尝试用 替换`=`，`+=`但它没有帮助（`samp`并且`m2mp`两者都是`undefined`）。

我找不到任何解决方案来“模拟”这个：

```
cost["string"] = string; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:55:09.650

只需这样做：

```
<script>
    cost["m2mp"] = "0.05";
    maxslot["m2mp"] = "1000";
    cost["samp"] = "0.04";
    maxslot["samp"] = "500";
</script> 
```

但是，您希望变量的方式使它们成为`Objects`，而不是`Arrays`. 所以你必须更换：

```
var cost = new Array();
var maxslot = new Array(); 
```

和：

```
var cost = new Object();
var maxslot = new Object(); 
```

或者，您可以在“对象文字”中在一行中声明变量并为其赋值：

```
var cost    = {'m2mp':'0.05', 'samp': '0.04'}
var maxslot = {'m2mp':'1000', 'samp': '500'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:05:58.030

在您的第二个片段中，您正在创建**对象**（花括号），而不是**数组**。您是否尝试将键值对添加到您的变量中？

你应该简单地设置你需要的属性：

```
var cost, maxslot;
// ...
cost = {"m2mp":"0.05"};
maxslot = {"m2mp":"1000"};

cost["samp"] = "0.04";
maxslot["samp"] = "500"; 
```

* * *

在 JavaScript 中，您使用花括号创建一个新对象：

```
var obj = {};
obj.constructor; // function Object() { [native code] } 
```

*旁注：创建数组时`[]`优先使用符号。`new Array()`*

```
var arr = [];
arr.constructor; // function Array() { [native code] } 
```

# perl - Perl 遍历文件中的每一行并附加到另一个文件中每一行的末尾

> ID：14729519
> 
> 赞同：4
> 
> 时间：2013-02-06T12:49:48.887
> 
> 标签：perl, file, text, hash

我有两个包含以下内容的文本文件：

**文件1.txt**

```
dog
cat
antelope 
```

**文件2.txt**

```
1
2
Barry 
```

**我想要实现的输出如下：**

```
dog1
dog2
dogBarry
cat1
cat2
catBarry
antelope1
antelope2
antelopeBarry 
```

**他们按照我的方式去做：**

```
 open (FILE1, "<File1.txt") || die $!;
    open (FILE2, "<File2.txt") || die $!;

    my @animals = (<FILE1>);  #each line of the file into an array
    my @otherStrings = (<FILE2>);   #each line of the file into an array

    close FILE1 || die $!;
    close FILE2 || die $!;

    my @bothTogether;
    foreach my $animal (@animals) {
    chomp $animal;
            foreach my $otherString (@otherStrings) {
                    chomp $otherString;
                    push (@bothTogether,  "$animal$otherString");
            }
   }
   print @bothTogether; 
```

我完成它的方式有效，但我确信这不是最好的方式，**特别是当文件都可能包含数千行时？**

**这样做的最好方法是什么，也许使用哈希？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:07:21.337

您的方法适用于具有数千行的文件。那真的没那么大。对于数百万行，这可能是一个问题。

但是，您可以通过仅将一个文件读入内存并立即打印结果而不是将它们存储在数组中来减少代码的内存使用量：

```
use warnings;
use strict;

open my $animals, '<', 'File1.txt' or die "Can't open animals: $!";
open my $payloads, '<', 'File2.txt' or die "Can't open payloads: $!";

my @payloads = <$payloads>;   #each line of the file into an array
close $payloads or die "Can't close payloads: $!";

while (my $line = <$animals>) {
    chomp $line;
    print $line.$_ foreach (@payloads);
}
close $animals or die "Can't close animals: $!"; 
```

对于两个大小相同的大文件，这将使用大约 1/4 的原始代码内存。

**更新：**我还编辑了代码以包含 Simbabque 对其现代化的好建议。

**更新 2：**正如其他人所指出的，您不能将两个文件都读入内存，而是在动物文件的每一行上逐行浏览有效负载文件。但是，这会慢得多。除非绝对必要，否则应避免。我建议的方法与您的原始代码的速度大致相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:59:45.500

除了某些 Modern Perl 方面（`open`例如两个参数）之外，您的代码非常简单。

我能看到的唯一改进是您可以将内部移动`chomp`到一个额外的循环中，也许在您阅读文件时进行咀嚼。那会节省一些时间。但总而言之，如果您想对其他数据的每一行的数据做一些事情，那么您做对了。

由于优先级，您应该使用`or die`而不是，`|| die`最终输出将是一长行，因为数组的项目中没有更多的换行符。

**更新**：@FrankB 在[他的上述评论](https://stackoverflow.com/questions/14729519/perl-iterating-through-each-line-in-a-file-and-and-appending-to-the-end-of-each/14729718#comment20607212_14729519)中提出了一个很好的建议：如果您的文件很大并且您正在努力解决内存问题，您不应该将它们吞入并放入两个数组中，而是逐行读取和处理第一个，并打开并阅读这些第一行中的每一行的第二行。这需要更长的时间，但可以节省大量内存。然后，您也可以直接输出结果，而不是将它们推送到结果数组中。

# jquery - 在 jQuery 添加的类上捕获单击事件

> ID：14729525
> 
> 赞同：2
> 
> 时间：2013-02-06T12:50:04.360
> 
> 标签：jquery, ajax, onclick

我是否需要做任何特别的事情来捕捉通过 jquery 添加到 dom 的元素的点击事件，

我将以下内容添加到 dom：

```
$('.dvPagerCities > .pagination > ul > li > a').addClass("pageCities") 
```

通过 chrome 在 html 中显示为

```
<a class="pageCities">»</a> 
```

但是当我尝试捕捉点击事件时，不会显示任何警报。

```
<script>
    $(function () {
        $('.pageCities').click(function () {
            alert('City click detected');
            return false;
        });
    });
</script> 
```

- - - - - - - 更新 - - - - - - - -

```
<script>
    $('.dvPagerCities > .pagination > ul > li > a').addClass("pageCities")
    $(function () {
        $(".getCities").click(function () {
            var city = $(this).text();
            $.ajax({
                url: '@Url.Action("pvDisplayListOfWeatherCities", "Weather")',
                type: 'GET',
                data: { id: $(this).attr("dataCountry")},
                dataType: 'html',
                success: function (result) {
                    //alert('Country click detected'),
                    $('Title').text('Cities in ' + city),
                    $('#dvFullPage').remove();
                    $('#dvPartial').html(result);
                },
                error: function () {
                    alert("error");
                }
            });
            return false;
        });
    });

</script>
<script>
    $(function () {
        $('.dvPagerCities').on('click', '.pageCities', function () {

            alert('City click detected');
            return false;
        });
    });
</script> 
```

----------------HTML 已添加--------------

```
<div class="dvPagerCities">
<div class="pagination">
<ul>
<li class="PagedList-skipToPrevious">
<a href="/Weather/Index/Australia?p=1" class="pageCities">«</a>
</li>
<li class="disabled PagedList-pageCountAndLocation">
<a class="pageCities">Page 2 of 2.</a>
</li>
<li class="disabled PagedList-skipToNext">
<a class="pageCities">»</a>
</li>
</ul>
</div>
</div> 
```

-----------------附加信息-----------------

好的，如果我单击链接并转到天气页面，然后单击国家并显示该国家/地区的城市列表并尝试页面没有任何反应，我会刷新整个页面。

但是，如果我再次单击页面链接，我会收到警报。

为什么在第 1 个城市出现并在检测到点击之前进行整页更新时没有上课

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T12:52:21.107

如果您在添加类*之前*`<script>`执行，则该方法找不到任何东西，也不会绑定到任何东西。确保首先添加，或使用事件委托：*`.pageCities``.click``.pageCities`*

 *```
$(".dvPagerCities").on('click', '.pageCities', function () { 
```*

# java - WindowBuilder：在运行时更改语言

> ID：14729526
> 
> 赞同：1
> 
> 时间：2013-02-06T12:50:05.597
> 
> 标签：java, localization, internationalization, resourcebundle, windowbuilder

所以我有这个带有 WindowBuilder 的 Java 项目（JDesktopPane 和 JInternalFrames），现在我要翻译整个程序。每次从 JDesktopPane 菜单打开 JInternalFrame 时，都会实例化一个新的 JInternalFrame。

任务：用户应该能够在运行时在各种语言之间切换（语言不能直接改变，重新打开JInternalFrame就足够了。现在我在每个JInternalFrame中使用ResourceBundle：

```
private static ResourceBundle BUNDLE; 
```

将文本设置为：

```
lblText = new JLabel(BUNDLE.getString("TestWindow.lblText.text")); //$NON-NLS-1$ 
```

为了在语言之间切换，我在 JDesktopPane 中有一个菜单，例如

```
language = "en"; 
```

在创建新窗口时，JInternalFrame 获取对 MainWindow 的引用并读取此属性并将其设置在 JInternalFrame 中：

```
BUNDLE = ResourceBundle.getBundle("TestWindow.messages_"+ mainWindow.language); //$NON-NLS-1$ 
```

问题：WindowBuilder 会干扰这个并设置

```
private static final ResourceBundle BUNDLE = ResourceBundle.getBundle("TestWindow.messages"); //$NON-NLS-1$ 
```

每次我在设计视图中打开窗口时。此外，我在 WindowBuilder 的 Editor Errors 窗口中遇到很多错误，这是因为 Editor can't resolve `"TestWindow.messages_"+ mainWindow.language`，这对我来说很清楚。

有没有办法以更正确的方式处理这个问题？我无法在 WindowBuilder 中找出正确的东西，所以我想出了这个 hacky 解决方案。

谢谢大王

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:02:59.960

不会

```
Locale.setDefault(new Locale("en")); // Locale.ENGLISH 
```

够了吗？只需获取根捆绑包即可获得正确的语言环境捆绑包。

# java - 使用第三方 .jar 文件时出现 java.lang.NoClassDefFoundError

> ID：14729528
> 
> 赞同：1
> 
> 时间：2013-02-06T12:50:16.120
> 
> 标签：java, noclassdeffounderror

我正在使用 NetBeans。我有一个简单的项目，它以花哨的格式打印一些作为参数发送的数据。这是引发异常的代码：

```
 JasperDesign design =  JRXmlLoader.load("Certificate.jrxml");
        JasperReport report = JasperCompileManager.compileReport(design);
        JasperPrint print = JasperFillManager.fillReport(report, new HashMap(), new ClientList(args).getClients());
        JPanel panel= new JRViewer(print); 
```

每当创建 Jasper 类时都会引发这些异常。我还尝试了 System.getProperty("java.class.path") 它包含“jasperreports-5.0.1.jar”文件。我做错了什么？我知道只要类在编译时可用，但在运行时不可用，就会抛出这些异常。但是 jar 就在那里！

请求的堆栈跟踪：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/digester/Digester

at certificado.Certificado.main(Certificado.java:31)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.digester.Digester

at java.net.URLClassLoader$1.run(URLClassLoader.java:366)

at java.net.URLClassLoader$1.run(URLClassLoader.java:355)

at java.security.AccessController.doPrivileged(Native Method)

at java.net.URLClassLoader.findClass(URLClassLoader.java:354)

at java.lang.ClassLoader.loadClass(ClassLoader.java:423)

at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)

at java.lang.ClassLoader.loadClass(ClassLoader.java:356)

... 1 more

Java Result: 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:54:23.687

您可能正在针对 Jasper jar 进行编译，但在运行时该 jar 有其自己的依赖项，您也应该包含这些依赖项。

根据您的堆栈跟踪，您需要[Apache Commons Digester](http://commons.apache.org/digester/)。我可能会使用 Maven 构建，并让 Maven（希望）为您解决依赖关系集。您*可以*使用[Jar 搜索引擎](http://www.findjar.com)来查找这些依赖项，但它们不会为您确定这些 jar 的匹配版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:57:15.033

您的库（Jasper？）似乎对另一个库有（运行时）依赖。这意味着，它需要在执行时在类路径中存在一些其他 JAR。

缺少的类名是`org/apache/commons/digester/Digester`. 因此，您可以猜测缺少的库是[`commons-digester`](http://commons.apache.org/digester/). 确保 Digester 库在 Classpath 上也可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T04:55:36.827

我面临同样的问题，我只需添加***commons-digester-2.0.jar***即可解决问题。

# plot - 使用带有 gnuplot 的平滑贝塞尔曲线时绘制正方形、三角形和圆形

> ID：14729530
> 
> 赞同：1
> 
> 时间：2013-02-06T12:50:23.627
> 
> 标签：plot, gnuplot

我通常`smooth bezier`在绘制数据时使用。它使然后更容易理解，也更好看。但是，我还想在正确的地方绘制圆形、三角形和正方形，即我有真实数据的地方。我怎么能那样做？

我将举一个我所做的例子：

```
p "times" u 1:2 w lp smooth bezier title "Time 1", "" u 1:3 w lp smooth bezier title "Time 2"
set xtics("0" 0,"1" 1, "2" 2,"4" 4 ,"8" 8) 
```

得到： ![在此处输入图像描述](../Images/90c1ac7774f3475e31e3392d9ff382ce.png)

现在我想将绿线中的三角形设置为对应于 x=1、x=2、x=4 和 x=8 的右侧点。与红线相同，但取而代之的是三角形、圆形等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:47:59.387

您可以再次绘制数据而不进行平滑：

```
CIRCLEPT = 6
TRIANGLEPT = 9
set xtics("0" 0,"1" 1, "2" 2,"4" 4 ,"8" 8)
plot "times" u 1:2 w lp lt 1 smooth bezier title "Time 1", \
     "" u 1:2 w p lt 1 pt CIRCLEPT notitle , \
     "" u 1:3 w lp lt 2 smooth bezier title "Time 2", \
     "" u 1:3 w p lt 2 pt TRIANGLEPT notitle 
```

至于获得三角形和圆形，您需要为您的终端选择正确的点类型。要确定要使用的点类型，您需要执行以下操作：

```
set terminal <whatever>
set output <whatever>  #only for non-interactive terminals
test 
```

现在您可以查看由右侧生成的任何输出`test`，右侧将是一堆不同类型的点。只需选择您想要的类型（例如 7 通常是一个圆圈）并将其放入脚本中

# actionscript-3 - 打印没有样式的数据网格-Flex

> ID：14729534
> 
> 赞同：0
> 
> 时间：2013-02-06T12:50:36.947
> 
> 标签：actionscript-3, apache-flex, air

我在我的数据网格中添加了一些样式，当我打印那个数据网格时我不想要那种样式。你能建议一些方法来实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:56:54.687

a) 创建新的精灵，按你喜欢的方式给它皮肤（如果你不想要皮肤，只做标签），然后将数据复制到它，然后打印出来。b) 用您自己的打印时覆盖皮肤。正常的CSS。

# android - 蓝牙简单应用

> ID：14729541
> 
> 赞同：0
> 
> 时间：2013-02-06T12:50:53.643
> 
> 标签：android

我想问你一些我可以用来实现简单应用程序的蓝牙库。我想通过蓝牙连接两个设备。在应用程序中，我想要两个按钮，我想通过蓝牙从一个设备发送到第二个设备，哪个按钮被按下。我怎么能这样做？有什么想法或教程可以推荐我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:58:12.850

在 Android 开发者页面中有一个很好的蓝牙聊天示例，带有源代码。按照此[链接](http://developer.android.com/tools/samples/index.html)下载示例。

然后我建议你以下教程：

[蓝牙教程](http://luugiathuy.com/2011/02/android-java-bluetooth/)

[添加演示](http://letitbit.net/download/19347.172fecf1b1790bfbd64b4d2115a6/sendobject.rar.html)

# wpf - WPF：值仅在调试语言资源时为空。

> ID：14729544
> 
> 赞同：0
> 
> 时间：2013-02-06T12:51:01.473
> 
> 标签：wpf, debugging, resources, null, release

我在我的应用程序上显示一些文本。这些文本存储在资源文件中。当我在发布模式下运行我的应用程序时，所有文本都正确加载，但是当我尝试在调试模式下运行时，一些文本的值是空值。

示例：

```
MySpaceName.Resources.Language.Resources.message_loadimages_error //(is null)
MySpaceName.Resources.Language.Resources.message_loadimages_error_title //(is correctly loaded, not null) 
```

message_loadimages_error 在我的应用程序中正确设置：

```
<data name="message_loadimages_error" xml:space="preserve">
    <value>Error while loading images...</value>
</data> 
```

在 .cs 中：

```
/// <summary>
///   Recherche une chaîne localisée semblable à Error while loading images...
/// </summary>
public static string message_loadimages_error {
    get {
        return ResourceManager.GetString("message_loadimages_error", resourceCulture);
    }
} 
```

有任何想法吗？

# java - 在 Jackson 生成的 JSON 中保留根元素名称

> ID：14729547
> 
> 赞同：3
> 
> 时间：2013-02-06T12:51:05.327
> 
> 标签：java, json, jackson

我正在使用 Jackson 1.9.7 从我的 Java 对象生成一些 JSON。

这是我将对象序列化为 JSON 的方法：

```
public String constructJson(Object object)
        throws EvaluationException {
    try {

        objectMapper.setSerializationConfig(
                objectMapper.getSerializationConfig()
                        .withSerializationInclusion(JsonSerialize.Inclusion.NON_NULL)
                        .withSerializationInclusion(JsonSerialize.Inclusion.NON_EMPTY)
                        .with(SerializationConfig.Feature.WRAP_ROOT_VALUE)
        );

        return objectMapper.writeValueAsString(object);

    } catch (IOException e) {
        LOGGER.error("Error", e);
        throw new EvaluationException("Error", e);
    }
} 
```

我正在传递从 XSD 模式生成的 java 对象，但它没有**注释**`@XmlRootElement`。有没有办法告诉杰克逊保留那个物体的名字？

目前它产生的是：

```
{"": {
    "generatedId": "EA7EB141D9454433B5E24F374BF25118",.... 
```

虽然它应该是：

```
{"theNameOfTheRoot": {
    "generatedId": "EA7EB141D9454433B5E24F374BF25118",.... 
```

我作为根传递给对象映射器的类如下所示：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "EvaluationType", propOrder = {
    "generatedId",
    "style",
    "status",
    "candidate",
    "texts",
    "evaluationParts"
})
public class EvaluationType {
   .....
} 
```

所以也许有办法告诉杰克逊从`@XmlType`注释中取名字？有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:18:27.493

如果你把一个`@XmlRootElement(name="EvaluationType")`放在你的类定义的顶部，它应该提供名称。`@XmlRootElement`或者您是说由于某种原因您不能在您的课程中添加一个？

**更新**

如果没有`@XmlRootElement`可用的 JSON 键，Jackson 2 将使用类名。Jackson 2 需要一组新的 maven 依赖项，具体来说：

```
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-core</artifactId>
  <version>2.1.3</version>
</dependency>

<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-annotations</artifactId>
  <version>2.1.2</version>
</dependency>

<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.1.3</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T10:38:19.270

对于 2.6 版使用如下

```
ObjectMapper objectMapper = new ObjectMapper();
JaxbAnnotationModule module = new JaxbAnnotationModule();
objectMapper.configure(SerializationFeature.WRAP_ROOT_VALUE,true);      
objectMapper.configure(DeserializationFeature.UNWRAP_ROOT_VALUE,true); 
```

# jquery - 无法解析绑定 Json

> ID：14729549
> 
> 赞同：1
> 
> 时间：2013-02-06T12:51:11.807
> 
> 标签：jquery, knockout.js

在淘汰赛中的投标需要帮助。我完全是淘汰赛的新手。试图通过萤火虫进行故障排除而没有结果。

这是我的例子

这是淘汰视图模型

```
function MarketViewModel() {
    var self = this;
    self.markets = ko.observableArray();

    var baseUri = 'api/market';

    $.getJSON(baseUri, self.markets);
}

$(document).ready(function () {
    ko.applyBindings(new MarketViewModel());
}) 
```

顺便说一句，将数组返回为 json 的 API 控制器工作得很好。

而我的看法

```
<!-- Default datatable -->
<div class="block well">
    <div class="navbar">
        <div class="navbar-inner">
            <h5>Default datatable</h5>
        </div>
    </div>
    <div class="table-overflow">
        <table class="table table-striped" id="data-table">
            <thead>
                <tr>
                    <th>Marknad</th>
                </tr>
            </thead>
            <tbody data-bind="forech: markets">
                <tr>
                    <td data-bind="text: description"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<!-- /default datatable -->

@section scripts
{
    <script src="~/Scripts/vm/MarketViewModel.js"></script>
} 
```

**更新**

来自萤火虫的错误：错误：无法解析绑定。消息：ReferenceError：描述未定义；绑定值：文本：描述这将引发无法解析视图中属性“描述”的绑定。但是 JSON 结果包含用于描述的属性。

json数组：

```
[{"$id":"1","MarketId":14,"Description":"SE Projektutveckling","ChUser":"anders.persson","ChTime":"2013-01-28T09:07:50.067"},{"$id":"2","MarketId":39,"Description":"SE Styckehus","ChUser":"anders.persson","ChTime":"2013-01-21T23:01:04.637"},{"$id":"3","MarketId":40,"Description":"NO Styckehus","ChUser":"anders.persson","ChTime":"2013-01-21T23:00:58.01"},{"$id":"4","MarketId":41,"Description":"GB Styckehus","ChUser":"anders.persson","ChTime":"2013-01-21T23:00:50.933"},{"$id":"5","MarketId":42,"Description":"DE Styckehus","ChUser":"anders.persson","ChTime":"2013-02-05T09:39:57.03"},{"$id":"6","MarketId":43,"Description":"SE Fritidshus","ChUser":"anders.persson","ChTime":"2013-01-21T23:00:24.597"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:59:16.243

绑定中的属性名称（通常在 JavaScript 中）**区分大小写。**

在您的 JSON 中，您有`"Description"`一个大写字母，因此您还需要在绑定`D`中编写：`"Description"`

```
<td data-bind="text: Description"></td> 
```

# eclipse - 如何调试 Eclipse 源代码

> ID：14729553
> 
> 赞同：2
> 
> 时间：2013-02-06T12:51:27.060
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-cdt

我很难弄清楚调试 Eclipse 的 UI 部分。我在谷歌（或）Eclipse 网站上找不到任何信息。

**我想做的就是找出当我们在项目资源管理器中双击文件以在编辑器中打开文件时执行的代码。**

我试图从插件视图中调出 Eclipse 源代码 -> 右键单击​​插件 -> 导入为源项目。但是，我不确定构成 UI 部分的所有组件是什么。当我尝试导入插件视图中的所有内容时，我遇到了一些奇怪的错误。

在哪里可以找到与调试 Eclipse 源代码相关的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:42:44.240

`Plug-ins->Import as Source Project`我建议不要使用，而是打开**插件视图**，选择所有插件，右键单击，然后添加到 Java 搜索。

然后，您可以使用 Open Type`Ctrl-Shift-t`搜索类名并附加源代码，以便您阅读、设置断点和调试。

在您的情况下，我认为您想调查`IWorkbench`,`IWorkbenchWindow`和`IWorkbenchPage`. 上的`openEditor(*)`方法`IWorkbenchPage`将特别令人感兴趣。

您可能还想看看`org.eclipse.ui.editors`和`org.eclipse.core.contenttype.contentTypes`扩展点。

# javascript - 正确确定我的参考范围

> ID：14729555
> 
> 赞同：1
> 
> 时间：2013-02-06T12:51:31.073
> 
> 标签：javascript, node.js, scope

我有一个节点应用程序，它创建一个 SOAP 客户端来进行多个 API 调用。每个调用都以`login()`创建客户端的位置开始。我不想为每个连续调用创建一个客户端，而是将其存储起来，并为回调中发生的后续调用重用相同的客户端。我正在努力解决的是范围界定。

我`module.exports`设置了一个返回对象的函数：

```
return {
  soapClient: null,

  /**
   * Establishes a connection with the client API & authenticates.
   *
   * @param  {Object}   args     An object containing
   * @param  {Function} callback [description]
   * @return {[type]}            [description]
   */
  login: function( username, password, callback ) {
    var url = datasources.api.baseUrl;

    // Create the SOAP client we'll use to call the API
    datasources.api.module.createClient( url, function( err, soapClient ) {
      // Store off the client for future calls.
      // ---> THIS IS THE PROBLEM <--- //
      this.soapClient = soapClient;

      // Authenticate
      var authArgs = {...};
      soapClient.Login( authArgs, function( err, result ) {
        // Authenticate
      });
    });
  },

  ... ADDITIONAL FUNCTIONS ...
} 
```

如何正确存储`soapClient`传递给`createClient()`回调的内容，以便它可以“缓存”在对象属性中并被此模型中的其他函数重用？

# python - Python - 在网格中显示 excel 数据库 - 第 2 部分

> ID：14729562
> 
> 赞同：0
> 
> 时间：2013-02-06T12:52:03.170
> 
> 标签：python, excel, pygame, grid-layout

我的目标是创建一个类似于以下[http://i49.tinypic.com/f39hxv.png](http://i49.tinypic.com/f39hxv.png)的网格，其中每个数字代表在每个正方形中找到的“准备薄片”的数量（请参见下面的数据片段）

到目前为止的代码如下：

```
import csv
import os

import pygame

# the functions for display
def disp(phrase,loc,screen):   # function to display phrase at loc on surface.
    s = font.render(phrase, True, (255,255,255))
    screen.blit(s, loc) #

def text_display_csv(filename,surface):
    '''Display .csv file contents on surface'''
    f = csv.reader(open("Flint catalogue v1.7 4 Feb 13 2013.csv")) # open the csv file      in one line!

    for row in f:
        y = f.line_num                # assign y as Row no.
        for x,item in enumerate(row): # Get column number(x) and item
            disp(item, (64*x+10,64*y+10), surface) # display item

pygame.init()
pygame.font.init()
font = pygame.font.SysFont("Courier",10) # font initialisation
screen = pygame.display.set_mode((1200,1200))

filename = 'the .csv file'
text_display_csv(filename,screen) # text is displayed
pygame.display.update() # screen updated

# Main loop, does nothing! :)
running = True
while running:
     for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
             pygame.quit()
             break
    if not running:
        break 
```

我希望网格看起来有点像这样（但我的麻烦是将数据库中的数据放入这个数组）：

```
import csv
import os

import pygame

# Define some colors
black    = (   0,   0,   0)
white    = ( 255, 255, 255)
green    = (   0, 255,   0)
red      = ( 255,   0,   0)

# This sets the width and height of each grid location
width=20
height=20

# This sets the margin between each cell
margin=5

# Create a 2 dimensional array. A two dimesional
# array is simply a list of lists.
grid=[]
for row in range(10):
    # Add an empty array that will hold each cell
    # in this row
    grid.append([])
    for column in range(10):
        grid[row].append(0) # Append a cell

# Set row 1, cell 5 to one. (Remember rows and
# column numbers start at zero.)
grid[1][5] = 1
grid[1][6] = 2 
# Initialize pygame
pygame.init()

# Set the height and width of the screen
 size=[255,255]
screen=pygame.display.set_mode(size)

# -------- Main Program Loop -----------
while done==False:

     # Set the screen background
       screen.fill(black)

    # Draw the grid
      for row in range(10):
          for column in range(10):
              color = white
              if row[4]in c == 1:
                 color = green
               pygame.draw.rect(screen,color,[(margin+width)*column+margin,        (margin+height)*row+margin,width,height])

     # Limit to 20 frames per second
      clock.tick(20)

     # Go ahead and update the screen with what we've drawn.
      pygame.display.flip()

      pygame.quit() 
```

数据如下：

[http://tinypic.com/view.php?pic=2rdgn02&s=6](http://tinypic.com/view.php?pic=2rdgn02&s=6)

所以总结一下。我希望在网格中显示不同的“分类”（见数据），就像开始时的图片一样。

谢谢您的帮助

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:01:27.467

这是一些代码，
这是您的代码，最多 10 个字符（注释和删除除外），但会导致**很大**的变化。

```
import pygame,csv

def disp(phrase,loc,screen): 
    s = font.render(phrase, True, (255,255,255))
    screen.blit(s, loc)

# not needed

def text_display_csv(filename,surface):
    '''Display .csv file contents on surface'''
    f = csv.reader(open(filename))

    for row in f:
        y = f.line_num                
        for x,item in enumerate(row):
            disp(item, (60*x+10,12*y-2), surface) # changed y distance

pygame.init()
pygame.font.init()
font = pygame.font.SysFont("Courier",10) # Changed font size
screen = pygame.display.set_mode((640,480)) # changed window size

filename = "Flint catalogue v1.7 4 Feb 13 2013.csv"
text_display_csv(filename,screen) 
pygame.display.update()

# Main loop, does nothing! :)
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
            pygame.quit()
            break
    if not running:
        break 
```

* * *

**更新 1** 好的，我明白了。因此，您想在 P 中的 Grid no S 处显示数据...

这也是它的代码。改成`text_display_csv`这样就行了

```
def text_display_csv(filename,surface):
    '''Display .csv file contents on surface, after processing'''
    f = csv.reader(open(filename))
    # The Processing
    data = {}
    for row in f:
        y = f.line_num
        if len(row) >= 19:
            # See if S contains a number,
            # if No: Print the msg
            # else: add to dict, in form of S:P
            try:
                val = int(row[18]) # S is the 19th column
            except ValueError:
                print "Skipped row no",y,"as column S doesn't contain number"
                continue
            else: # if a number, add to the dict
                data[val] = row[15] # P is the 16th column
    print "File Loaded"
    # the display part
    width = 6
    for loc in data:
        item = data[loc] # get item (string to display)
        y = loc//width   # column
        x = loc % width  # row
        disp(item, (60*x +10,30*y +10), surface) 
```

这里发生了什么事：

1.  加载`.csv`
2.  如果一行至少有`S`列的项目，

    *   如果值 at`S`是一个数字，则获取它的整数值。
        然后将信息以 的形式添加到字典中`S : P`，其中

        *   `S`是整数
        *   `P`列的字符串/值`P`。
    *   否则打印一条消息，然后继续下一行（如果有）
3.  在各自的位置显示数据。

现在唯一的问题是数字必须从零开始。
为了克服这个问题，只需添加

```
loc += 1 
```

前

```
y = loc//width 
```

您的网格线可以使用 绘制`pygame.draw.line`，您可以弄清楚。

# asp.net - 键 attachdbfilename 的值无效

> ID：14729563
> 
> 赞同：2
> 
> 时间：2013-02-06T12:52:15.277
> 
> 标签：asp.net, connection-string, aspnetdb

我尝试在 godaddy 网络服务器中运行我的 asp 网络应用程序并得到错误：

```
Exception Details: System.ArgumentException: Invalid value for key ‘attachdbfilename’. 
```

我的连接字符串：

```
<connectionStrings>
<remove name=”LocalSqlServer”/>
<add name=”LocalSqlServer” connectionString=”Data Source=(LocalDB)v11.0;Integrated     Security=True;AttachDbFilename=|DataDirectory|Database.mdf”        providerName=”System.Data.SqlClient”/>
</connectionStrings> 
```

任何想法我该如何解决这个问题？我的电脑上没有这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T19:58:25.707

哎呀，我有同样的问题，在我的情况下，我没有安装 LocalDB，所以你检查一下怎么样！

# vb.net - 从 vb 表单应用程序运行 2 个单独的 cmd 命令

> ID：14729567
> 
> 赞同：0
> 
> 时间：2013-02-06T12:52:35.950
> 
> 标签：vb.net, forms, cmd

我希望我的程序打开 cmd ，更改目录，然后执行命令：“copy /B file1 file2 output”

这就是我目前所拥有的。但所发生的只是一个 cmd 窗口闪烁一秒钟，但没有创建文件

```
Dim cmd1 As String
Dim cmd2 As String
    cmd1 = "cd " & FolderFromFileName(imagename)
    cmd2 = "copy /B " & NameOnlyFromFullPath(imagename) & "+" & "TEMP.txt" & " " & TextBox1.Text
    Shell("cmd /c" & " " & cmd1 & " " & cmd2, AppWinStyle.NormalFocus) 
```

请帮忙，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:37:05.733

你真的需要出现命令提示符吗？您可以通过使用 system.io 库来完成所有这些操作，而无需单独的进程。如果你真的需要 cmd 提示符，你可以创建一个进程。

```
Dim NewProcess = New Process
' a new process is created 
NewProcess.StartInfo.UseShellExecute = False
' redirect IO
' PVWCmd.StartInfo.RedirectStandardOutput = True
'       PVWCmd.StartInfo.RedirectStandardError = True
'      PVWCmd.StartInfo.RedirectStandardInput = True
' don't even bring up the console window
NewProcess.StartInfo.CreateNoWindow = False
' executable command line info
NewProcess.StartInfo.FileName = "cmd"

NewProcess.StartInfo.WorkingDirectory = "C:\"
'        NewProcess.StartInfo.Arguments = +" > """ + "LogFile.log" + """ 2>&1"

NewProcess.Start() 
```

# java - osgi中的bootdelegation和DynamicImport-Package有什么区别

> ID：14729568
> 
> 赞同：6
> 
> 时间：2013-02-06T12:52:40.117
> 
> 标签：java, osgi

两者都将解决 osgi 中的包依赖关系它们之间有什么区别

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T13:41:09.890

Bootdelegation 是一种需要的 hack，因为 VM 中的一些代码假定应用程序类加载器对 com.sun.* 类具有可见性。在 OSGi 中，显然不是这样。引导委托是指定框架可以在引导类路径上查找哪些包的参数。由于这不是模块化的，所以不要这样做。它对框架来说是全局的。

DynamicImport-Package 类似，但仅适用于定义它的包并且仅适用于导出的包。如果在正常的捆绑内容或 Import-Package 中找不到包，则 DynamicImport-Package 指定允许在导出的包集中搜索的包的模式。这个想法类似于类路径，你不知道你会得到什么版本。一旦找到一个包，它就会永远使用。但是，如果没有找到每个访问将继续查找。即，您可以在事后安装包，而无需重新启动包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:56:25.120

每次需要包中的类时，都会解析通过 DynamicImport-Package 导入的包。因此，如果由于解析过程导致包不可用，它不会失败。通过这种方式，可能会在运行时抛出 ClassNotFoundExceptions。（将此与可选导入进行比较）

BootDelegation 类将从 bootdelegation 类加载器加载，该类加载器将 OSGi 框架加载到 JVM [http://wiki.osgi.org/wiki/Boot_Delegation](http://wiki.osgi.org/wiki/Boot_Delegation) [http://www2.sys-con.com/itsg /virtualcd/java/archives/0808/chaudhri/index.html](http://www2.sys-con.com/itsg/virtualcd/java/archives/0808/chaudhri/index.html) [http://de.slideshare.net/honnix/osgi-class-loading](http://de.slideshare.net/honnix/osgi-class-loading)

# sql - SQL - 如何显示多行结果之间的差异

> ID：14729576
> 
> 赞同：5
> 
> 时间：2013-02-06T12:52:56.133
> 
> 标签：sql, sql-server, sql-server-2012, sliding-window

我有一个 SQL 2012 查询，它给了我以下结果：

```
IP_Country  ds          Percentage
-------------------------------------
Australia   01/01/2013  0.70155
Australia   02/01/2013  0.685
Australia   03/01/2013  0.663594
Australia   04/01/2013  0.737541
Australia   05/01/2013  0.688212
Australia   06/01/2013  0.665384
Australia   07/01/2013  0.620253
Australia   08/01/2013  0.697183 
```

结果继续显示相同日期和不同百分比的不同国家。

我需要展示的是，这些百分比仅在同一国家/地区的日期之间变动。

因此，在 02/01 和 01/01 之间，差异为 0.02 - 我可以提取数据并在 excel 中执行此操作，但理想情况下，我希望结果随着查询的移动而出现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T13:04:10.277

您可以使用`LAG`和`LEAD`访问上一行和下一行。

```
SELECT *,
        LAG([Percentage]) OVER (PARTITION BY [IP_Country] ORDER BY [ds]) 
                                                               - [Percentage] AS diff,
       ([Percentage] - LEAD([Percentage]) OVER (PARTITION BY [IP_Country] ORDER BY [ds])) 
                                                             / [Percentage] AS [ratio]
FROM  YourTable 
```

[SQL小提琴](http://www.sqlfiddle.com/#!6/8b0f6/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:56:43.080

使用`CTE`和 @MartinSmith 的小提琴（[DEMO](http://www.sqlfiddle.com/#!6/8b0f6/9)）。（注意：为了更好的可读性，我已经格式化了 [ds] 日期）

```
;with cte as (
  select [IP_Country], [ds], [Percentage],
         row_number() over (partition by [IP_Country] order by ds) rn
  from YourTable
)
select t1.[IP_Country], convert(date, t1.[ds],102), 
       t1.[Percentage], t2.[Percentage]-t1.[Percentage] movement
from cte t1 left join cte t2 on t1.[IP_Country] = t2.[IP_Country]
          t1.rn - 1 = t2.rn

--Results
IP_COUNTRY  COLUMN_1    PERCENTAGE  MOVEMENT
Australia   2013-01-01  0.70155     (null)
Australia   2013-02-01  0.685       0.01655
Australia   2013-03-01  0.663594    0.021406
Australia   2013-04-01  0.737541    -0.073947
Australia   2013-05-01  0.688212    0.049329
Australia   2013-06-01  0.665384    0.022828
Australia   2013-07-01  0.620253    0.045131
Australia   2013-08-01  0.697183    -0.07693 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:50:25.530

OUTER APPLY 和 EXISTS 的另一种选择

```
SELECT *, t1.Percentage - o.Percentage AS dif
FROM dbo.test36 t1 
OUTER APPLY (
             SELECT t2.Percentage
             FROM dbo.test36 t2
             WHERE t1.IP_Country = t2.IP_Country 
               AND EXISTS (
                           SELECT 1
                           FROM dbo.test36 t3
                           WHERE t1.IP_Country = t3.IP_Country AND t1.ds < t3.ds
                           HAVING MIN(t3.ds) = t2.ds
                           )
             ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d7862/1/0)上的演示[](http://sqlfiddle.com/#!3/d7862/1/0)

# c# - wpf 和实体框架导航属性

> ID：14729579
> 
> 赞同：0
> 
> 时间：2013-02-06T12:53:09.323
> 
> 标签：c#, .net, wpf, entity-framework

在我的项目中，我使用带导航的实体框架，

我在模型中有 3 个表

```
1\. Person
2\. Family
3\. Folder 
```

在文件夹表中我有导航 family_Id 在家庭中我有导航 person_Id

在我写的代码中

```
var load = mh.Folder.Include("family_Id"); 
```

然后我知道所有家庭列现在我想知道 Person 表中的 Person_Name 如何包含 person 表？

Person 表不是导航到文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:00:33.160

如果实体都与导航属性相关，您可以执行以下操作：

```
var load = mh.Folder.Include("Family").Include("Family.Person"); 
```

# javascript - 在正则表达式中使用 * 作为查找值

> ID：14729585
> 
> 赞同：0
> 
> 时间：2013-02-06T12:53:30.143
> 
> 标签：javascript, regex

我正在尝试替换所有出现的字符串`***deal***`当我使用以下代码时，我收到一个`Quantifier {x,y} following nothing`错误。

```
var regex = new RegExp('***deal***', 'g');
Content=Content.replace(regex, DEAL); 
```

谁能填写我应该如何克服错误？

作为说明，我正在使用带有 .NET 后端的服务器端 Javascript。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:54:57.343

`*``*`是一个需要转义的元字符（意思是“零个或多个前面的标记”，并且您的正则表达式中的 s 之前没有任何内容，因此出现错误消息）：

```
var regex = /\*\*\*deal\*\*\*/g; 
```

我使用了正则表达式文字，因为它可以减少反斜杠的数量；使用正则表达式构造函数的等价物是

```
var regex = new RegExp('\\*\\*\\*deal\\*\\*\\*', 'g'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:55:08.870

正则表达式中的特殊字符被反斜杠转义`\`

```
var regex = new RegExp('\\*\\*\\*deal\\*\\*\\*', 'g'); 
```

在字符串值中，您还需要转义`\`结果`'\\'`

# android - 在“ActionBar”项目点击显示弹出菜单

> ID：14729592
> 
> 赞同：49
> 
> 时间：2013-02-06T12:54:00.477
> 
> 标签：android, android-actionbar, popupmenu

我有一个`ActionBar`带有操作项的内容。单击操作项后，我想显示一个弹出菜单。我实现了这个方法，但我想将它锚定到操作项或`ActionBar`，而不是布局中的任何视图。如何获得某种观点来锚定它`MenuItem`？

```
public boolean onOptionsItemSelected(MenuItem item) {
    PopupMenu popupMenu = new PopupMenu(this, ??????); // What view goes here?
    popupMenu.inflate(R.menu.counters_overflow);
    popupMenu.show();
    // ...
    return true;
} 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-07T06:50:37.040

所以最后我找到了解决方案。当您想将弹出菜单锚定到 ActionBar 中的 ActionItem 时，您需要找到呈现 ActionItem 的视图。使用 findViewById() 的简单查找视图，其中 id 与 xml 中菜单项的 id 相同。

显示弹窗：

```
public boolean onOptionsItemSelected(MenuItem item) {
    // ...

    View menuItemView = findViewById(R.id.menu_overflow); // SAME ID AS MENU ID
    PopupMenu popupMenu = new PopupMenu(this, menuItemView); 
    popupMenu.inflate(R.menu.counters_overflow);
    // ...
    popupMenu.show();
    // ...
    return true;
} 
```

菜单：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

     ....

     <item
    android:id="@+id/menu_overflow"
    android:icon="@drawable/ic_overflow"
    android:showAsAction="ifRoom"
    android:title="@string/menu_overflow"/>

     ....

</menu> 
```

如果菜单项不可见（溢出），则它不起作用。findViewById 返回 null，因此您必须检查这种情况并锚定到另一个视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-08T18:32:28.870

接受的答案对我不起作用，所以我通过反复试验发现了问题。

```
public boolean onOptionsItemSelected(MenuItem item) 
{
    View menuItemView = findViewById(item.getItemId()); 
    showPopupMenu(menuItemView)

    return true;
}

private void showPopupMenu(View anchor)
{
    PopupMenu popup = new PopupMenu(this, anchor);
    popup.getMenuInflater().inflate(R.menu.my_popup_menu, popup.getMenu());
    popup.show();
} 
```

这里的关键是，`item`in`onOptionsItemSelected(MenuItem item)`必须显示在 ActionBar 上。如果`item`是当您按下 ActionBar 右上角的 3 个垂直点时出现的项目之一，那么您的应用程序将崩溃。

[![在此处输入图像描述](../Images/60403505cf64f261255b3cb74d9eaf14.png)](https://i.stack.imgur.com/bz47Z.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T10:10:12.327

请试试这个..

```
 @Override
public boolean onOptionsItemSelected(MenuItem item){
    String str=item.getTitle().toString(); 
    Toast.makeText(getBaseContext(), str,Toast.LENGTH_LONG). show();

    View view=findViewById(item.getItemId()); 
    switch(view.getId()){
        case Menu.FIRST:
            showPopup(view); // calling method
    }

    return super.onOptionsItemSelected(item);
}   

// custom method
private void showPopup(final View view) {
    PopupMenu popupMenu = new PopupMenu(view.getContext(), view);
    popupMenu.getMenu().add(0, 0, Menu.NONE, "Item 1");
    popupMenu.getMenu().add(0, 1, Menu.NONE, "Item 2");
    popupMenu.getMenu().add(0, 2, Menu.NONE, "Item 3");
    popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem item) {
                Toast.makeText(view.getContext(), item.getTitle() + "clicked", Toast.LENGTH_SHORT).show();
                return true;
            }
        });
    popupMenu.show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-06T17:42:16.977

除了接受的答案之外，在每次调用 onOptionsItemSelected() 方法时重新膨胀弹出窗口的问题可以通过只执行一次并且只显示我们想要的次数来简化。
（这甚至适用于在运行时通过 Menu Layout Inflater 膨胀的自定义工具栏。请记住，获取菜单项视图的 findViewById() 只能在视图实际出现在屏幕上时返回非空值，即应该在工具栏/操作栏上可见。

**注意**：如果视图预设在工具栏/操作栏的溢出菜单中，则视图可能只有在溢出菜单至少被调用一次后才会膨胀——使用 3 个点？）

```
public class SomeActivity{

    private PopupMenu popup;
    .... // some code of the activity

@Override
    public boolean onOptionsItemSelected(@NonNull MenuItem item) {
        int menuItem = item.getItemId();
        switch (menuItem) {
            case R.id.tb_menu_plus:
                View menuItemView = findViewById(R.id.tb_menu_plus);
                if(popup == null) {
                    popup = new PopupMenu(this, menuItemView);
                    popup.inflate(R.menu.dropdown_popup_menu);
                }
                popup.show();
                return true;
        }
        return super.onOptionsItemSelected(item);
    } 
```

[![在此处输入图像描述](../Images/dbdf8469c4465a4c70286d66d614e8a4.png)](https://i.stack.imgur.com/qofCL.png)

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-02-06T13:04:57.557

```
public boolean onOptionsItemSelected(MenuItem item) {
    final View addView = getLayoutInflater().inflate(R.layout.add, null);

            new AlertDialog.Builder(this).setTitle("Add a Word").setView(addView)
                    .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            addWord((TextView) addView.findViewById(R.id.title));
                        }
                    }).setNegativeButton("Cancel", null).show();
return (super.onOptionsItemSelected(item));
    } 
```

在这里获取完整的源代码..

[http://vimaltuts.com/android-tutorial-for-beginners/android-action-bar-tab-menu-example](http://vimaltuts.com/android-tutorial-for-beginners/android-action-bar-tab-menu-example)

# php - strip_tags|truncate:150 只返回几个字符

> ID：14729593
> 
> 赞同：1
> 
> 时间：2013-02-06T12:54:01.627
> 
> 标签：php, html, smarty, truncate, strip-tags

我有工作搜索页面，它显示所有工作的前 150 个字符来自 jobdescription：

```
{$listing.JobDescription|strip_tags|truncate:150} in smarty php template file 
```

将返回：

```
Responsibilities:  1) Handle... 
```

这就是上面的源代码：http: [//jsfiddle.net/e2ScF/126/](http://jsfiddle.net/e2ScF/126/) 。

从编辑器和示例文本构建的原始文本位于：http: [//jsfiddle.net/e2ScF/125/](http://jsfiddle.net/e2ScF/125/)

我的问题是如何在没有 < p >、< br/> 和其他 html 标签的情况下显示求职结果，例如：

```
Responsibilities:1) Handle outbound telesales campaigns for consumer markets (for CallMark clients) by... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:55:21.737

这是一个 PHP 示例（[请参阅实际操作](http://codepad.viper-7.com/k7SFjy)）：

```
<?php
    $string = '<p>
    &nbsp;</p>
<table align="center" border="0" cellpadding="3" cellspacing="0" class="normalword" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 11px; color: rgb(0, 0, 0);" width="95%">
    <tbody>
        <tr>
            <td>
                <table align="center" border="0" bordercolor="#666666" cellpadding="3" cellspacing="0" class="normalword" width="100%">
                    <tbody>
                        <tr>
                            <td>
                                <div align="justify">
                                    Responsibilities:&nbsp;<br />
                                    <br />
                                    1) Handle outbound telesales campaigns for consumer markets (for CallMark clients) by utilizing effective presentation and creating positive relationship for all customer contacts with the aim to cross/up selling client&rsquo;s product and services.&nbsp;<br />
';

function firstXChars($string, $chars = 100)
{
    $string = trim(strip_tags($string));
    $string = str_replace(array("\n", "\r"), '', $string);
    preg_match('/^.{0,' . $chars. '}(?:.*?)\b/iu', $string, $matches);
    return $matches[0];
}

echo firstXChars($string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:24:00.353

您的问题是文本中间有很多空格，因此 truncate 将它们计入 150 个限制。

尝试使用 [条带](http://www.smarty.net/docs/en/language.modifier.strip.tpl)：

```
{$listing.JobDescription|strip_tags|strip|truncate:150} 
```

# jquery - jQuery 日期格式验证（突出显示文本字段）

> ID：14729595
> 
> 赞同：1
> 
> 时间：2013-02-06T12:54:06.450
> 
> 标签：jquery, validation, date-format

我在 html 页面上有一个日期文本框。我想在运行时使用 jQuery 为 dd-mm-yyyy 格式验证它。如果输入无效格式，则文本框背景应变为红色。

我正在使用以下内容，但未能这样做。

```
<script>
jQuery(document).ready(function(){
 jQuery('#submit').click(function () {
  var dateReg = /^\d{2}\-\d{2}\-\d{4}$/;

  if(!dateReg.test(date.val())){
    date.addClass('highlight');
    jQuery(date).focus();
    return false;
  } else date.removeClass('highlight');
}); 
});
</script>

<style>
    .highlight { background: #FFE6E7; }
</style>

<body>
    <form>
    <input type="text" name="date"/> <em>(dd-mm-yyyy)</em><br>
    <input type="submit" value="submit" id="submit"/>
    </form>
</body> 
```

...

我尝试过但无法实现它:(其次，我希望它在用户输入值后立即验证。不是点击提交。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:11:48.567

我自己做了一个新代码。它也在提交按钮的 OnClick 上工作，但突出显示它的目的已经实现。

```
<!DOCTYPE html>
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Untitled 1</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script>
$(function() {
    $('#btnSubmit').bind('click', function(){
        var txtVal =  $('#txtDate').val();
        if(isDate(txtVal))
            $('#txtDate').removeClass('highlight');            
        else
            $('#txtDate').addClass('highlight');
    });

function isDate(txtDate)
{
    var currVal = txtDate;
    if(currVal == '')
        return false;

    var rxDatePattern = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/; //Declare Regex
    var dtArray = currVal.match(rxDatePattern); // is format OK?

    if (dtArray == null) 
        return false;

    //Checks for dd/mm/yyyy format.
    dtDay = dtArray[1];
    dtMonth= dtArray[3];
    dtYear = dtArray[5];        

    if (dtDay < 1 || dtDay > 31) 
        return false;
    else if (dtMonth < 1 || dtMonth> 12) 
        return false;
    else if ((dtMonth==4 || dtMonth==6 || dtMonth==9 || dtMonth==11) && dtDay ==31) 
        return false;
    else if (dtMonth == 2) 
    {
        var isleap = (dtYear % 4 == 0 && (dtYear % 100 != 0 || dtYear % 400 == 0));
        if (dtDay> 29 || (dtDay ==29 && !isleap)) 
                return false;
    }
    return true;
}
});
</script>

<style>
.highlight { background-color:#FFE6E7; }
</style>
</head>

<body>
<br/><br/>
Date : <input type="text" id="txtDate" /> (dd/mm/yyyy)
<br/><br/>
<input type="button" value="ValidateDate" id="btnSubmit"/>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:04:51.630

你的正则表达式很好，但你的 jQuery 不是：

```
jQuery('#date').focus 
```

你可以在按键上使用：

```
jQuery('#submit').keypress 
```

或者你可以使用focus out，它在失去焦点时触发：

```
jQuery('#submit').focusout 
```

但请务必始终检查后端！任何人都可以禁用 javascript

# node.js - 如何在 Jade 中每第三次迭代插入新的 tr

> ID：14729599
> 
> 赞同：7
> 
> 时间：2013-02-06T12:54:20.010
> 
> 标签：node.js, pug

我是 node.js 和 Jade 的新手。

我搜索了没有成功的解决方案（也许我在谷歌中问了错误的问题，我不知道）。

我想`each`在 Jade 中循环创建表行。问题是每 3 次之后`td`我要插入 new `tr`。通常这很简单，但使用 Jade 我根本无法做到这一点。

### 我的玉文件：

```
table
    thead
        tr
            td Header
    tbody
        each item, i in items
            if (i % 3 === 0)
            tr
                td
                    a(href="#{baseUrl}/admin.html?id=#{item.id}") 
```

我知道我的`if`陈述有问题。我尝试了许多配置，但没有运气。我相信这将是一个非常容易的问题。

提前感谢您的帮助！

### 编辑

基于@Laurent Perrin 的回答，我修改了一些代码。现在它创建`tr`，然后是 3 `td`，然后是新`tr`的，所以它更接近一点......

### 新翡翠

```
if (i % 3 === 0)
   tr
td: a(href="#{baseUrl}/admin.html?id=#{item.id}") dsdsd #{i} 
```

### 生成的 HTML

```
<tr></tr>
<td><a href="...">0</a></td>
<td><a href="...">1</a></td>
<td><a href="...">2</a></td>
<tr></tr> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T15:23:21.710

**编辑**：这段代码应该做你想做的，但它不是很优雅：

```
table
   thead
     tr: td Header
      tbody
        - for(var i = 0, nbRows = items.length/3; i < nbRows; i++) {
        tr
           if items[3*i]
             td: a(href="#{baseUrl}/admin.html?id=#{items[3*i].id}")
           if items[3*i + 1]
             td: a(href="#{baseUrl}/admin.html?id=#{items[3*i + 1].id}")
           if items[3*i + 2]
             td: a(href="#{baseUrl}/admin.html?id=#{items[3*i + 2].id}")
       - } 
```

您可以做的是调整您的模型，使其对 Jade 更友好，方法是按行对项目进行分组：

```
函数getRows（项目）{
    return items.reduce(function (prev, item, i) {
        如果（我 % 3 === 0）
            prev.push([项目]);
        别的
            prev[prev.length - 1].push(item);

        返回上一页；
    }, []);
}

```

这将变成：

```
[{id:1},{id:2},{id:3},{id:4},{id:5}]

```

进入：

```
[
    [{id:1},{id:2},{id:3}],
    [{id:4},{id:5}]
]

```

然后你的玉代码就变得简单多了：

```
桌子
     头
         tr: td 标头
     身体
        行中的每一行
            tr
                行中的每个项目
                    td: a(href="#{baseUrl}/admin.html?id=#{item.id}")

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T02:18:26.907

一个jade + bootstrap的例子，每4个元素（列）一行，行在行内。

```

```
- var i = 0
- var itens_per_line = 4
each order in viewBag.orders
    - if (i % itens_per_line === 0 || i === 0) {
        .row
    - }

            .col-md-3.column
                p #{order.number}
        - i++ 
```

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-04T17:59:04.077

这是我为单个数组（例如 ['1','2','3','4']）所做的，将其转换为每行两个值，它可以调整为 3。

（mixin 是 Jade/Pug 中的模板）

```
 mixin mInput
          div.form-group.col-md-6
            p=oval

        - var valcounter = 0
        - var row = [];
        each val in JSON.parse(formvalues)
          if(valcounter % 2 === 0)
            - var col = [];
            - col.push(val)
          else
            - col.push(val)
            - row.push(col)
          - valcounter++
        each orow in row
          div.row
            each oval in orow
              +mInput 
```

# arduino - Arduino Wifi Shield SPI 命令

> ID：14729608
> 
> 赞同：1
> 
> 时间：2013-02-06T12:54:37.840
> 
> 标签：arduino, avr, spi

我目前正在使用[Arduino Wifi Shield](http://arduino.cc/en/Main/ArduinoWiFiShield)。它适用于 Arduino 库，但我有一个项目需要摆脱所有 Arduino 库，只使用 AVR-libc。

因此，为了使用Wifi shield，我想知道哪里有关于arduino和shield之间的SPI总线上使用的协议的文档，这样我就不需要使用Wifi库了。

我是否被迫查看源代码，或者是否存在任何文档？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T11:44:15.607

SPI 的文档将包含在 Arduino 中使用的 MCU 的数据表中。对于基于 AVR 的 Arduino，请查看标题为“SPI – 串行外设接口”的部分。对于 Arduino Due，请参阅“串行外设接口 (SPI) 编程器数据表”部分。

# php - 如何通过 PHP 为数字添加 +1？

> ID：14729610
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:54:40.713
> 
> 标签：php, explode

我有这样的数据：

```
$aa ="msg_1"; 
```

我想在执行如下explode操作后在字符串末尾添加+1：

```
$nwMsg =explode("_",$aa);
    $inMsg =number_format($nwMsg[1])+1;
    $finStr =$nwMsg[0].'_'.$inMsg; 
```

在此之后，我想再次形成字符串并再次重复相同的过程，但它一直在增加，直到`"10"`它没有增加......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:55:50.283

你应该把调用放在`+1`里面`number_format`，而不是放在后面。

编辑：如果您只想`$nwMsg[1]`被视为一个数字，只需向其添加 1 即可，因为`+`它是一个数字运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:56:25.860

```
$nwMsg =explode("_",$aa);
$inMsg =number_format($nwMsg[1] +1) ;
$finStr =$nwMsg[0].'_'.$inMsg; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:57:48.793

```
$aa= "msg_1";
$new_string= explode("_", $aa);
$new_aa= $new_string[0] ."10"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T12:59:52.327

```
function add_one($string) {
    preg_match_all("/[a-zA-Z]+_\d+/", $string, $matches);
    $elements = $matches[0];
    $last = $elements[count($elements)-1];
    $components = explode("_", $last);
    $newnum = $components[1] + 1;
    return $string . $components[0] . "_" . $newnum;
}
echo add_one("msg_1"); // prints "msg_1msg_2"
echo add_one("msg_1msg_2msg_3msg_4msg_5msg_6msg_7msg_8msg_9"); // prints "msg_1msg_2msg_3msg_4msg_5msg_6msg_7msg_8msg_9msg_10" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:57:57.443

这是错误的

```
$inMsg =number_format($nwMsg[1])+1; 
```

这就是它的完成方式

```
$inMsg =number_format($nwMsg[1]+1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T12:58:11.537

```
$nwMsg =explode("_",$aa);
$inMsg =$nwMsg[1] +1 ;
$finStr =$nwMsg[0].'_'.$inMsg; 
```

您将获得不使用 number_format 的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T12:58:43.557

还有一件事可能导致错误，您需要注意 - 因为您想添加两个数字，首先确保您转换`$nwMsg[1]`为数字（整数或浮点数，这取决于）：

```
$nwMsg =explode("_",$aa);
    $inMsg =number_format((int)$nwMsg[1]+1);
    $finStr =$nwMsg[0].'_'.$inMsg; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T13:01:19.390

不同的解决方案怎么样：

```
function add($matches) {
    return ++$matches[0];
}

$new = preg_replace_callback("(\d+)", "add", $aa); 
```

# flash - 通过 JavaScript 访问 Flash Media Playback 事件和方法

> ID：14729611
> 
> 赞同：1
> 
> 时间：2013-02-06T12:54:42.770
> 
> 标签：flash, events, adobe, osmf

有谁知道[Flash Media Playback](http://www.osmf.org/)是否支持某些 API，因为我需要通过以下方式处理一些方法/事件`javascript`：

1.  玩
2.  暂停
3.  停止
4.  流式传输已结束
5.  开始流式传输
6.  流式传输错误

我需要像[Grab Player](http://wirehazard.com/player/OSMFPlayerJS.html)这样的所有东西。但是[文档](http://help.adobe.com/en_US/OSMF/1.0/Dev/WSc6f922f643dd2e6d-55c3771112a39ae1fb5-8000.html)说我们必须实现它。谢谢！！

PS Basic FMP 实现如下：

```
 <object width="600" height="409"> <param name="movie" value="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"></param><param name="flashvars" value="src=http%3A%2F%2Fosmf.org%2Fvideos%2Fcathy2.flv&poster=http%3A%2F%2Fosmf.org%2Fimages%2Fposter_cathy_fmp.jpg"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="600" height="409" flashvars="src=http%3A%2F%2Fosmf.org%2Fvideos%2Fcathy2.flv&poster=http%3A%2F%2Fosmf.org%2Fimages%2Fposter_cathy_fmp.jpg"></embed></object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-27T07:34:21.360

Flash Media Playback 支持与 Strobe Media Playback 相同的功能，但 Strobe 存在的 javascript api 一直是探索性的，所以我不相信 FMP 中对它有任何支持。

尽管如此，FMP 具有与 Strobe 相同的插件架构，因此您应该能够使用 OSMF 并以与使用 strobe 相同的方式为其创建插件。不久前，我为 Strobe 创建了一个插件，目的是扩展 Strobe 的 javascript api。您也许可以在 FMP 中进行类似的操作。这是我的做法：

```
 private function onFullScreen(event:FullScreenEvent):void
    {
        if (event.fullScreen) {
            call([this.javascriptCallback, ExternalInterface.objectID, "fullscreen", true]);
        } else {
            call([this.javascriptCallback, ExternalInterface.objectID, "fullscreen", false]);
        }
    }

    private static function call(args:Array, async:Boolean = true):void
    {       
        if (async)
        {
            var asyncTimer:Timer = new Timer(10, 1);    
            asyncTimer.addEventListener(TimerEvent.TIMER, 
                function(event:Event):void
                {
                    asyncTimer.removeEventListener(TimerEvent.TIMER, arguments.callee);
                    ExternalInterface.call.apply(ExternalInterface, args);
                }
            );  
            asyncTimer.start();
            return;
        }
        ExternalInterface.call.apply(ExternalInterface, args);
    }
} 
```

见：[github](https://github.com/aptoma/strobe-fullscreeneventtriggerplugin/blob/master/src/no/aptoma/drvideo/FullscreenEventTriggerPluginInfo.as#L132-L158)

如果可以的话，我会放弃 FMP。FMP 的文档几乎不存在，并且 Strobe 中对 javascript 的支持非常好。如果您有兴趣，我已经在[此处](https://docs.google.com/document/d/1QBF39uU5LQCcwsF7i_9V_EFsmdKf7_3Y2ZsbS4huMzo/edit?usp=sharing)记录了 Strobe javascript api 。

# jquery - 正则表达式不起作用

> ID：14729618
> 
> 赞同：0
> 
> 时间：2013-02-06T12:55:01.687
> 
> 标签：jquery, regex, jquery-validate

我试图验证一个文本字段类型的密码，但是当我尝试编写密码时，验证不起作用。用于验证：minlength 6、maxlength 12、大写、小写和数字

HTML

```
<tr>
    <td>Contraseña *</td>
    <td>
        <input type="password" name="password1" id="password1">
    </td>
</tr> 
```

JAVASCRIPT

```
 $.validator.addMethod("password1", function (value, element) {
     return this.optional(element) || /^(?=.*\d)(?=.*[a-zA-Z]).{6,12}$/i.test(value);
 });

 $("#frmDatos").validate({
     errorContainer: contenedor,
     errorLabelContainer: $("ol", contenedor),
     wrapper: 'li',
     meta: "validate",
     rules: {
         password1: {
             required: true
         }
     },
     messages: {
         password1: "La contraseña no es válida"
     }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T13:01:06.533

试试这个：

```
/^[a-zA-Z0-9]{6,12}$/.test(value) 
```

正则表达式部分：

```
# /           - Start regex
# ^           - Match the beginning of the string,
# [a-zA-Z0-9] - Followed by any character that's within the a-z, A-Z, or 0-9 range,
# {6,12}      - And there's between 6 and 12 of these characters,
# $           - Followed by the end of the string (So not followed by any other characters)
# /           - End regex. 
```

当必须在 PW 中找到所有 3 个元素时，最简单且可能最**易读**的事情是：

```
$.validator.addMethod("password1", function (value, element) {
    return /^.{6,12}$/.test(value) && // The string is between 6-12 characters long,
                 /\d/.test(value) && // And contains a digit,
             /[A-Z]/.test(value) && // And contains a upper-case letter,
            /[a-z]/.test(value)    // And contains a lower-case letter.
}); 
```

这样做的好处是，如果字符串与长度要求不匹配，则不会评估其余的正则表达式。这是一个“短路”运算符，意思是，如果运算符左边的值为`false`，则不能完全运算`true`，因此不会计算右边的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:26:25.940

这个应该做：

```
/^(?=\w{6,12}$)(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*/ 
```

有关其工作原理的详细信息，请访问此处

[http://www.asiteaboutnothing.net/regex/regex-lookarounds.html](http://www.asiteaboutnothing.net/regex/regex-lookarounds.html)

本文中的最大长度为 10，但将其转换为 12 很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:26:46.160

```
jQuery.validator.addMethod("passcheck", function(value, element) {
     var upperCase= new RegExp('[A-Z]');
     var lowerCase= new RegExp('[a-z]');
     var numbers= new RegExp('[0-9]');
     return this.optional(element) || (value.match(upperCase) && value.match(lowerCase) && value.match(numbers) && value.length >=6 && value.length <=12);
}, "* Your password must be between 6 and 12 characters. It must contain a mixture of uppercase, lowercase, and digits");
rules:{
    password1: {
       required: true,
       passcheck: true
    }
}, 
```

# mysql - 从第一个表中不存在的另一个表中复制数据。

> ID：14729619
> 
> 赞同：1
> 
> 时间：2013-02-06T12:55:01.970
> 
> 标签：mysql, sql, insert

我们如何将数据从一个表复制到第一个表中不存在的另一个表中。在表中，其中一列是主键。

```
INSERT INTO table SELECT * FROM db2.table; 
ERROR 1062 (23000): Duplicate entry '100001' for key 'id_UNIQUE' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:57:48.603

试试这个：

```
INSERT INTO table
SELECT T1.*
FROM db2.table T1
    LEFT JOIN table T2
       ON T1.Id = T2.Id
WHERE T2.Id IS NULL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T12:58:57.787

您可以使用谓词[**`NOT IN`**](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_not-in)这样做：

```
INSERT INTO table1 
SELECT * 
FROM db2.table2 
WHERE table1ReferenceID NOT IN(SELECT id_UNIQUE FROM table1); 
```

这将检查是否`table1ReferenceID`在第一个表中找到它。因此，该`SELECT`子句将选择第二个表中的所有行，除了第一个表 table1 中已经出现的行。

**注意：**该列是第二个表中`table1ReferenceID`的引用。`id_UNIQUE`

其他替代方法是`LEFT JOIN`按照[**@HamletHakobyan**的回答](https://stackoverflow.com/a/14729681/722783)和`NOT EXISTS`.

*   [**看到它在行动**](http://www.sqlfiddle.com/#!2/6d386/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:57:48.480

```
WHERE [primary_key_table1] not IN (SELECT [primary_key_table2] FROM [table2]) 
```

所以我建议像

```
INSERT INTO table (SELECT * FROM db2.table WHERE id NOT IN (SELECT id FROM table)); 
```

# grails - Grails GORM：如何创建复合主键并将其用于表关系？

> ID：14729629
> 
> 赞同：2
> 
> 时间：2013-02-06T12:55:40.980
> 
> 标签：grails, grails-orm

我有两个表，其中一个（旧表：A）有两个字段应该用作复合外键，另一个（新表：B）应该使用复合主键来建立`each row:A has one row:B`关系。我如何用 GORM 来描述这些表？

到目前为止，我已经能够创建一个反映遗留表的域类：A

```
class A {

    ...
    //composite foreign key to link B class
    String className;
    String eventName;

    B b; //instance of B to be related

    static mapping = {
        table 'a_table';            
        id column: 'id';
        className column: 'class_name';
        eventName column: 'event_name';
        //b: ???
    }
} 
```

哪个有效，但我无法创建`new class:B`和关系。

我试图将 B 声明为：

```
class B implements Serializable{

    static auditable = true;

    String name;
    String className;
    String eventName;

    static mapping = {
        //supposed to make a composite PK
        id composite:[className, eventName] 
    }
} 
```

但这不会编译
`ERROR context.GrailsContextLoader - Error executing bootstraps: Error evaluating ORM mappings block for domain [com.package.B]: No such property: eventName for class: org.codehaus.groovy.grails.orm.hibernate.cfg.HibernateMappingBuilder`

我想要的是这样的：

```
static mapping = {
    ...
    b composite: [b.className:className, b.eventName:eventName]
    //or whatever is the right way for this to be done.
} 
```

让 A 类让 GORM 处理这种关系。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T13:32:25.267

您是否尝试使用属性名称而不是使用属性值？

```
class B implements Serializable{
    String name;
    String className;
    String eventName;

    static mapping = {
        //supposed to make a composite PK
        id composite:['className', 'eventName'] 
    }
} 
```

并在 A 中映射：

```
class A {
    static hasMany = [ b : B ]
} 
```

无需拥有`className`或`eventName`在`A`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T16:20:45.453

B 类必须声明为 Serializable 并实现 equals 和 hashCode 方法

```
import org.apache.commons.lang.builder.HashCodeBuilder
class B implements Serializable{

    static auditable = true;

    String name;
    String className;
    String eventName;
    boolean equals(other) {
    if (!(other instanceof B)) {
        return false
    }

    other.className == className && other.eventName == eventName
    }

    int hashCode() {
    def builder = new HashCodeBuilder()
    builder.append className
    builder.append eventName
    builder.toHashCode()
    }

    static mapping = {
        //supposed to make a composite PK
        id composite:["className", "eventName"] 
    }
} 
```

并且A类必须具有B类的属性，而GORM制作复合外键

```
class A {

    //composite foreign key to link B class
    B b; //instance of B to be related

    static mapping = {
        table 'a_table';            
        id column: 'id';
    }
} 
```

它在数据库中创建两个表

```
+--------------------------------------------------+
|                       A_TABLE                    |  
+--------+-----------+--------------+--------------+
|   id   |  version  |  b_className | b_eventName  |
+--------+-----------+--------------+--------------+
--where the Primary key is "id" and the foreign key are "b_className and b_eventName" 
+--------------------------------------------------+
|                       B                          |  
+--------+-----------+--------------+--------------+
|  name  |  version  |  className   | eventName    |
+--------+-----------+--------------+--------------+
--where the Primary key are "className and eventName" 
```

如果您要将列的名称更改为其他名称，只需在映射语句中添加分句

```
class A {

    //composite foreign key to link B class
    B b; //instance of B to be related

    static mapping = {
        table 'a_table';            
        id column: 'id';
        columns {
              b {
                 column name: "className"
                 column name: "eventName"
              }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T14:21:16.203

```
import org.apache.commons.lang.builder.HashCodeBuilder
class Person implements Serializable {

String firstName
String lastName

boolean equals(other) {
    if (!(other instanceof Person)) {
        return false
    }

    other.firstName == firstName && other.lastName == lastName
}

int hashCode() {
    def builder = new HashCodeBuilder()
    builder.append firstName
    builder.append lastName
    builder.toHashCode()
}

static mapping = {
    id composite: ['firstName', 'lastName']
}
} 
```

这是你可以从 grails 的官方文档中找到的，

[http://grails.org/doc/latest/guide/GORM.html#compositePrimaryKeys](http://grails.org/doc/latest/guide/GORM.html#compositePrimaryKeys)

只是盲目地遵循这一点，你的问题就会得到解决。解释参考上面的链接

# sqlite - Visual Studio 2012 中的 Sqlite 提供程序

> ID：14729630
> 
> 赞同：3
> 
> 时间：2013-02-06T12:55:42.617
> 
> 标签：sqlite

我想使用具有带有实体框架功能的 Linq 的 Sqlite 提供程序。但我找不到与 VS 2012 兼容的 Sqlite 安装程序。我尝试从[http://sourceforge.net/projects/sqlite-dotnet2/files/](http://sourceforge.net/projects/sqlite-dotnet2/files/)安装它，但它没有与 VS 2012 集成。我为 Windows 安装了 SQLite运行时也是。但这也没有帮助。创建 ADO.net 实体模型时，我无法找到提供者。请让我知道是否有可用于 VS 2012 的 Sqlite 提供程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:44:59.143

你在寻找这样的东西吗？

[http://blogs.msdn.com/b/robertgreen/archive/2012/11/13/using-sqlite-in-windows-store-apps.aspx](http://blogs.msdn.com/b/robertgreen/archive/2012/11/13/using-sqlite-in-windows-store-apps.aspx)

# android - Android Google Maps API v2：不同笔记本电脑的授权失败

> ID：14729631
> 
> 赞同：2
> 
> 时间：2013-02-06T12:55:42.790
> 
> 标签：android, google-maps, android-maps, google-maps-android-api-2, android-maps-v2

我已经按照[此处](https://stackoverflow.com/questions/13696620/google-maps-android-api-v2-authorization-failure)和[此处](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)`MapView`的步骤在我们的团队项目中创建了一个与 svn 同步的项目。按照步骤操作后，`MapView`运行流畅，但仅在我的笔记本电脑上。我的项目成员总是得到

```
02-06 13:27:37.327: E/Google Maps Android API(19490): Authorization failure. 
```

当打开`MapView`. 因此，我删除了旧的指纹，并使用我的 Google 帐户在另一台笔记本电脑上为新的 Google API 密钥生成了一个新的 SHA1 指纹：

`keytool -list -alias androiddebugkey -keystore ~/.android/debug.keystore -storepass android -keypass android -v`

所以现在它正在我生成SHA1指纹的另一台笔记本电脑上工作，但是当我尝试在我的笔记本电脑上运行项目时，我现在得到了

```
02-06 13:29:51.280: E/Google Maps Android API(20262): Authorization failure. 
```

错误。

我们没有使用`proguard-project.txt`，我们尝试`google-play-services`了安装并`/extras/google/google_play_services/libproject/google-play-services_lib`作为库包含的不同设备。我们还尝试生成多个 API 密钥，但只有一个有效。

我们做错了什么？我们是否必须使用不同的 Google 帐户来创建单独的密钥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:19:40.057

引用 Google API 控制台：

> API 请求会从您客户的 Android 设备直接发送到 Google。Google 会验证每个请求是否来自与下面列出的证书 SHA1 指纹和包名称之一匹配的 Android 应用程序。您可以使用以下命令发现您的开发人员证书的 SHA1 指纹[...]
> 
> **每行一个 SHA1 证书指纹和包名称（用分号分隔）。**

**在此处每行**突出显示一个。

![Google Maps API 密钥的屏幕截图 - 配置 Android 密钥](../Images/510c0315f4aa9150235ba5b9bc71b01a.png)`

对于您构建应用程序的每台笔记本电脑，您必须生成一个 SHA1 指纹并将其添加到 API 控制台中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:03:34.347

您在这里有两个选择。

1.  为您拥有的每台设备的 api 密钥添加单独的一行。

2.  将 api 密钥提取到文件（例如`map_key.xml`）并从`AndroidManifest.xml`.

    ```
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="@string/google_maps_api_key_v2" /> 
    ```

    将此文件添加到您的 .gitignore - 现在每个项目成员都可以使用自己的密钥覆盖。

# javascript - 使用 jquery resizable 调整 DIV 上的句柄大小

> ID：14729633
> 
> 赞同：1
> 
> 时间：2013-02-06T12:55:48.030
> 
> 标签：javascript, jquery, html, resize, handle

jQuery Resizable 插件很棒，但它只会改变 resizable 的边缘和角落周围的光标`div`。But I need the corners of the `div`to also have the real square (or round) handles that show up in other editing programs, such as photoshop, when an object is selected for resizing. 在角上添加把手的最快、最稳定和最简单的方法是`div`什么？我需要 IE 兼容性（至少来自 IE-8）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:44:53.023

如果您需要在 div 的各个角落添加句柄，请使用**句柄**选项。

```
$('.selector').resizable({handles: 'n, e, s, w, ne, se, sw, nw'}); 
```

[http://api.jqueryui.com/resizable/#option-handles](http://api.jqueryui.com/resizable/#option-handles)

# android - 并非 ViewPager 的 Fragments 中的所有视图都会更新

> ID：14729635
> 
> 赞同：1
> 
> 时间：2013-02-06T12:56:05.217
> 
> 标签：android, android-fragments, android-viewpager, togglebutton

我的 ViewPager 中有 3 个片段。在我的片段中，我添加了静态切换按钮。*（静态，因为我没有找到 nullpointerexception 的解决方法，如果我想在自定义方法中的 Fragment 类中使用 findViewById() 而不是 onCreateView() ）*

在我的 MainActivity 的 ViewPager 之外，我有一个重置按钮，它应该将所有 ToggleButtons（在所有 3 个片段上）重置为“未选中”。

每次我单击重置按钮时，只有当前页面和每个相邻页面都会更新。

例如

*   当前页面：0 更新页面：0,1
*   当前页面：1 更新页面：0,1,2
*   当前页面：2 更新页面：1,2

我认为问题是 FragmentPagerAdapter。[文档](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)说：

> PagerAdapter 的实现，它将每个页面表示为一个 Fragment，**只要用户可以返回该页面**，它就会永久保存在 Fragment 管理器中。

当我在第 2 页时，我无法直接返回到第 0 页，所以我认为第 0 页（= Fragment 0）的视图不再在内存中了？！ **那么如何访问目前不可见的 Fragment 中的 ToggleButtons ，也不是当前 Fragment 的邻居？有什么解决方法吗？**

## 编辑：

我发现，实际上我的 ToggleButtons（在所有 Fragments 上）的所有 checked()-values 都会更新，但不是 Fragments 的膨胀视图，它们不可见，也不是相邻的 Fragments。因此，当我返回到之前的片段时，ToggleButtons 的已检查（）值将重置为片段上次可见时的状态。奇怪的...

例子：

1.  Page2 活动 - ToggleButton_Page2.checked() = true
2.  切换到第 0 页
3.  按重置按钮。Toast ToggleButton_Page2.checked() = false
4.  切换回第 2 页（或已在第 1 页）
5.  ToggleButton_Page2.checked() = true //应该是 false

## 资源：

[示例源代码](http://www.cip.ifi.lmu.de/~aucha/ViewPagerStyle1Toggle.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:55:44.130

> 那么如何访问目前不可见的 Fragment 中的 ToggleButtons ，也不是当前 Fragment 的邻居？有什么解决方法吗？

您的代码中有很多问题，您应该阅读更多关于`Fragments`并在`ViewPager`.

在重置和状态按钮`OnClickListeners`侦听器中，您编写`_adapter.getItem(x);`以尝试获取`Fragment`表示该位置的页面的句柄。这将不起作用，因为简单地调用该方法将返回该位置的**新实例**，`Fragment`而不是实际使用`Fragment`的实例`ViewPager`（通过在前一刻调用`getItem()`）。调用后获得的新实例`getItem()`与 无关，`Activity`并且它的`onCreateView`方法没有被调用，因此它没有视图（`NullPointerException`当你访问它时你会得到 ）。然后，您尝试通过将其设置`ToggelButton`为静态字段来解决此问题，`Fragment`因为该字段将在`ViewPager`正确创建时初始化`Fragments`一开始。但是你不应该这样做，持有对`Context`（就像任何`View`人一样）引用的静态字段是危险的，因为你有泄漏`Context`.

另外，与我上面所说的相关，您不需要将 a 传递`Context`给 a `Fragment`，因为 a`Fragment`与 an 相关联的`Activity`has`getActivity()`方法返回对 that 的引用`Activity`。

您不应该访问任何`ViewPager`不靠近可见片段的片段（在可见位置的左侧/右侧，除非您不使用 的`setOffscreenPageLimit()`方法`ViewPager`）。它`ViewPager`有一种提高性能的机制（就像 a`ListView`一样），所以它只创建它立即需要的东西，这样它就可以为用户提供流畅的滑动。

我对您的项目进行了一些更改，[请查看](http://dl.dropbox.com/u/95923721/ViewPagerStyle1.7z)。如有其他问题，请在您的问题中发布相关代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:19:19.810

Salut，感谢您提供的良好信息和改进的代码！

> “但你不应该这样做，保存对上下文的引用的静态字段（就像任何视图一样）是危险的，因为你有泄露该上下文的风险。”

我是 Fragment 实现的新手，花了几个小时找出输入字符串如何正确用于 findFragmentByTag()。（现在知道如何使用它，我从没想过它会那么复杂）。所以我决定做那个静态解决方法，这不是一个好主意......

据我了解，我可以访问超过 +-1 个片段，例如，如果我使用 setOffscreenPageLimit(3)。我想这就是我的问题的答案。

# postgresql - 在 Postgresql 中使用表别名访问记录中的列

> ID：14729638
> 
> 赞同：1
> 
> 时间：2013-02-06T12:56:21.147
> 
> 标签：postgresql

我正在尝试使用记录数据类型迭代查询的结果。不过，如果我尝试使用查询中定义的表别名访问一列，则会收到以下错误：

> 错误：模式“inv_row”不存在上下文：SQL 命令“SELECT inv_row.s.processor <> inv_row.d.processor”PL/pgSQL 函数“teste”第 7 行在 IF

以下是引发此错误的代码：

```
CREATE OR REPLACE FUNCTION teste() returns void as $$
DECLARE
    inv_row record;
BEGIN
    FOR inv_row in SELECT * FROM sa_inventory s LEFT JOIN dim_inventory d ON s.macaddr = d.macaddr LOOP
        IF inv_row.s.processor <> inv_row.d.processor THEN
            <do something>;
        END IF;
    END LOOP;
END;
$$ language plpgsql; 
```

是否有另一种方法可以访问记录数据类型中特定表的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:59:48.607

幸运的是，这里的答案相对简单。您必须使用括号来表示元组：

```
IF (inv_row.s).processor <> (inv_row.d).processor THEN 
```

这是因为 SQL 指定了命名空间深度的含义，因此没有这个 PostgreSQL 就无法安全地确定这意味着什么。所以`inv_row.s.processor`表示模式中表的`processor`列。但是，意味着获取inf_row 表的列，将其视为一个元组，然后获取该列。`s``inv_row``(inv_row.s).processor``s``processor`

# php - 找不到致命错误 RecursiveIteratorIterator

> ID：14729642
> 
> 赞同：7
> 
> 时间：2013-02-06T12:56:31.257
> 
> 标签：php, class, namespaces, iterator, spl

正如标题所说，当我实例化一个类时，我收到以下消息：

```
Fatal error: Class 'Envato\RecursiveIteratorIterator' not found in C:\Users\rgr\Apache\htdocs\Roland Groza [ 3.0 ]\class\envato\envato.php on line 359 
```

您可以在这里查看课程：[课程](http://snippi.com/s/98c0bg8)；

我正在从另一个文件实例化：

```
require("envato.php");
$test = new Envato\EnvatoAPIWrapper();
echo "User Vitals : ".$test->get_user_vitals("chaoscod3r")."<br>"; 
```

这个类被一个命名空间包裹着，所以这可能与它有关，但我不确定，因为我已经有几年没有编写 PHP 了。希望有人知道我做错了什么:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T13:08:46.367

要访问命名空间内的非命名空间类，如 PHP 和 SPL 的内部类，您必须使用完全限定的类名，如下所示：

```
new \RecursiveIteratorIterator(); 
```

或在开头显式导入：

```
use \RecursiveIteratorIterator; 
```

然后像你一样正常使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:07:11.027

在命名空间的顶部添加一个 use 语句...

利用`\RecursiveIteratorIterator;`

如果你不这样做，那么 PHP 期望`RecursiveIteratorIterator`存在于你当前的命名空间中，而不是在全局命名空间中（由前导表示`\`）

# c# - 跨线程：从不同的线程访问控件

> ID：14729643
> 
> 赞同：1
> 
> 时间：2013-02-06T12:56:32.110
> 
> 标签：c#, .net, winforms, multithreading

我认为代码很清楚

```
private void ucPerson_Load(object sender, EventArgs e)
{
    person = new Person();
    BackgroundWorker backgroundBinder = new BackgroundWorker();
    backgroundBinder.DoWork += BindComboBoxes;
    backgroundBinder.RunWorkerAsync();
}

private void BindComboBoxes(object sender, DoWorkEventArgs e)
{
    cmbEducationLevel.DataSource = Program.eService.GetEducationLevels();
    cmbNationality.DisplayMember = "Name";
    cmbNationality.ValueMember = "NationalityID";
} 
```

我得到的错误：

> **跨线程操作无效：控件“cmbNationality”从创建它的线程以外的线程访问。**

我需要做什么才能使我`background-worker`的线程能够访问组合框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:02:51.310

后台工作人员在另一个线程中工作：您不允许调用属于其中的调用线程的控件。

正如 Uwe Keim 所说，您必须将所有触及控件的内容都放在`RunWorkerCompleted`事件中：

```
private void ucPerson_Load(object sender, EventArgs e)
{
    person = new Person();
    BackgroundWorker backgroundBinder = new BackgroundWorker();
    backgroundBinder.DoWork += GetData;
    backgroundBinder.RunWorkerCompleted += BindComboBoxes;
    backgroundBinder.RunWorkerAsync();
}

<<yourReturnType>> source;

private void GetData(object sender, DoWorkEventArgs e)
{
    source = Program.eService.GetEducationLevels();
}

private void BindComboBoxes(object sender, RunWorkerCompletedEventArgs e)
{
    cmbNationality.DisplayMember = "Name";
    cmbNationality.ValueMember = "NationalityID";
    cmbNationalty.DataSource = source;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:04:04.280

最好的方法是洛朗的例子

肮脏的方式：

```
cmbEductionLevel.Invoke((MethodInvoker)delegate { mbEducationLevel.DataSource = Program.eService.GetEducationLevels(); });

cmbNationality.Invoke((MethodInvoker)delegate { 
     cmbNationality.DisplayMember = "Name";
     cmbNationality.ValueMember = "NationalityID"; 
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T12:59:47.403

您应该使用 Invoke 并传递委托以更新控件。

# java - 我们真的需要在 ThreadLocal 中设置 Transaction 吗？

> ID：14729645
> 
> 赞同：0
> 
> 时间：2013-02-06T12:56:34.863
> 
> 标签：java, database, multithreading, transactions, thread-local

我在下面粘贴了我的代码。在我们的应用程序中，他们将事务设置在线程本地。
实际上我的疑问是我们为什么需要这个？
如果我们没有在 threadlocal 中设置事务会发生什么？

```
public void beginTransaction() {

    final String METHOD_NAME = "beginTransaction";
    log.entering(CLASS_NAME, METHOD_NAME);

    PcUtilLogging.logTransactionLifecycle("Begin Transaction",
            this.persistenceConfigurationKey);

    // Initialize.
    final PcRequestContext context = PcRequestContext.getInstance();
    final PersistenceManager pm =
            context.getPersistenceManager(this.persistenceConfigurationKey);

    try {
        // Begin a new transaction.
        final Transaction transaction = pm.newTransaction();

        // Set the Transaction in ThreadLocal.
        context.setTransaction(this.persistenceConfigurationKey,
                transaction);

    } catch (final Exception e) {

        // Throw.
        throw new PcTransactionException(
                new ApplicationExceptionAttributes.Builder(CLASS_NAME, METHOD_NAME).build(),
                "Error encountered while attempting to begin a ["
                        + this.getPersistenceConfigurationKey()
                        + "] transaction.", e);
    }

    log.exiting(CLASS_NAME, METHOD_NAME);
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:04:34.110

问题是人们想要从应用程序的不同部分（例如不同的 DAO）访问事务，因此通常以这种方式完成以避免必须在应用程序周围传递事务对象（并将持久性逻辑泄漏到您的应用程序中） .

此外，事务通常与接受请求（或 jms 消息）的线程相关，因此 ThreadLocal 是放置它的方便位置。大多数框架都这样做（以 Spring 为例）。

如果您不在本地线程上设置事务，可能会发生两件事

*   每个数据库访问都需要使用不同的事务。
*   所有事务都混合在一起，因为对一个请求的提交会影响不同线程上的更改。

你有没有更好的方法来做这个阿达拉？

# linux - 使用 ALSA lib 可配置音量级别的多个声音流

> ID：14729649
> 
> 赞同：0
> 
> 时间：2013-02-06T12:56:45.313
> 
> 标签：linux, alsa, audio

我想使用 ALSA 库来播放多个声音流，每个流都有自己可定制的音量级别。想要避免使用像pulseaudio这样的更高级别的抽象，因为这是在具有单通道输出的ARM目标板上使用的，想要避免编译pulseaudio和相关问题。请建议可以通过哪些所有可能的方式来完成这种实现。欢迎任何有关使用 ALSA 插件 dmix / softvol 的指导

# ios - 通过邮件向受邀者发送活动附件

> ID：14729653
> 
> 赞同：2
> 
> 时间：2013-02-06T12:56:54.423
> 
> 标签：ios, objective-c

我已经实现了一个带有事件添加功能的 iphone 日历应用程序。我需要使用我自己的自定义附件通过邮件将事件发送给不同的受邀者。当被邀请者点击附件收到邮件时，安装在该系统中的同一日历应用程序应读取附件并显示事件详细信息。所以请建议我如何做....

谢谢..

# c# - 如何将函数作为参数传递

> ID：14729654
> 
> 赞同：1
> 
> 时间：2013-02-06T12:56:55.233
> 
> 标签：c#

好的，我已经将函数作为参数传递给另一个函数，如下所示：

```
someFunction(..., passFunc);
passFunc(){ MessageBox.Show("Message"); }
private void someFunction(..., Func<int> f) { f(); } 
```

这工作得很好。我将“passFunc”作为参数传递给“someFunction”，然后调用这个参数（“f（）”）。然后我得到带有文本“消息”的消息框。行。

在更高版本的程序中，当我单击特定按钮时调用函数“passFunc”......然后我希望获取文本。我通常这样做：`((Button)sender).Text;`. 但在这种情况下我不能这样做，因为我在这个“passFunc”中没有参数。

我怎样才能做到这一点？所以，“passFunc”看起来像：`passFunc(object sender, EventArgs e)`

然后我将能够做到这一点：

```
passFunc(object sender, EventArgs e)
{
    MessageBox.Show(((Button)sender).Text);
} 
```

这是代码： http: [//pastie.org/6079188](http://pastie.org/6079188)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:08:50.173

如果要将输入传递给 func，请使用此泛型类型重载：

```
Func<string, int> passFunc 
```

编辑：

你`passFunc`这样打电话

```
passFunc("some input"); 
```

编辑2：

`passFunc(object sender, EventArgs e)`不能与 Func 一起使用，因为它可能具有 void 返回类型。然后你必须使用`Action<object, EventArgs>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:01:49.640

为什么不订阅 passFunc 到该按钮的事件处理程序？它看起来像这样 `button1.Click += new EventHandler(passFunc)` ，然后 passFunc 将是

```
void passFunc(object sender, EventArgs e)
{
     MessageBox.Show((sender as Button).Text); 
} 
```

我不知道这是否正是您想要实现的目标，但它可能会奏效。

# javascript - 选择一个类的所有 div 并为其设置动画，但忽略同一类的所有子项

> ID：14729658
> 
> 赞同：0
> 
> 时间：2013-02-06T12:57:04.247
> 
> 标签：javascript, jquery, google-maps-api-3

我希望有一个简单的解决方案，但我现在看不到它。

我正在尝试选择所有具有 myClass 类的 div，但忽略该类的所有子级，包括那些具有 myClass 类的子级。例如：

```
<div class="myClass"> //select
    <div class="myClass"> //don't
      <div class="myClass"></div> //don't etc
    </div>
</div>
<div class="myClass"></div>
<div class="myClass">
     <div class="myClass"></div>
</div>
<div class="myClass"></div> 
```

我知道这是一种奇怪的情况，它是由于在侧 div 中滑动时需要在 Google 地图上滑动地图控件（以免覆盖它们）。需要更改的类都命名为“gmnoprint”，如果不忽略子级，则父级中的元素将移动每个嵌套级别所需数量的两倍。

我目前的解决方案（更多的是一个糟糕的 hack）是调用：

```
$('div.gmnoprint').stop().animate({ 'marginLeft': '418px' }, 800);
$('div.gmnoprint').children('div.gmnoprint').stop().animate
    ({ 'marginLeft': '0px' }, 800); 
```

但这是非常低效和处理器密集型的。

抱歉，如果这是重复的，但我找不到类似的东西。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:09:06.903

```
$('div.gmnoprint')
    .filter( function() {
        return $(this).parent().closest('div.gmnoprint').length === 0;
    })
    .stop()
    .animate({ 'marginLeft': '418px' }, 800); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:10:41.520

这些 div 必须都存在于另一个容器中。如果我们假设它的 id 是`container`，请调用：

```
$('#container').children('div.gmnoprint').stop().animate({ 'marginLeft': '418px' }, 800); 
```

这只会深入一层，不会选择`div.gmnoprint`页面上的所有元素。

# wpf - DataContext="{Binding}" 有什么好的理由吗？

> ID：14729668
> 
> 赞同：0
> 
> 时间：2013-02-06T12:57:33.817
> 
> 标签：wpf, binding, datacontext

`DataContext="{Binding}"`我在一些我继承的 xaml 代码中发现了好几次。

我是否遗漏了某些东西，或者它真的充其量是无用的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:01:47.157

`DataContext="{Binding}"`没用。
但这并不意味着这`{Binding}`通常是无用的。对于其他属性，使用它非常好。

例子：

```
<ListBox ItemsSource="{Binding}" /> 
```

这会将数据上下文绑定为列表框项目的源。显然，数据上下文应该是某种列表。

# oracle - 预言机在获取 Blob 时是否有限制？

> ID：14729674
> 
> 赞同：-2
> 
> 时间：2013-02-06T12:57:41.127
> 
> 标签：oracle, jdbc, blob, limit, jmeter

我正在编写一个 Java 程序来从 Oracle 获取 BLOB（逐字节）。
我正在使用 Jmeter 运行 java 程序。
当我模拟两个用户同时运行Java程序时，获取B​​LOB的响应时间几乎是一个用户运行Java程序时间的两倍。

oracle是否同时有任何输出限制？

这是Java代码：

```
BLOB blob = rs.getBLOB(BLOB_COLUMN_NAME);
in = blog.getBinaryStream();
while((byteValue = in.read())!=-1) {
    ////////
} 
```

# ruby-on-rails-3 - 关于会话 cookie 的 Ruby on Rails 安全性

> ID：14729677
> 
> 赞同：2
> 
> 时间：2013-02-06T12:57:45.797
> 
> 标签：ruby-on-rails-3, security, session-cookies

在我的应用程序中，我有一个`User`模型，它有一个`rememberable_token`列。创建用户时，会在`before_create`过滤器中保存一个随机安全字符串，作为用户的安全令牌：

```
user.rememberable_token = SecureRandom.urlsafe_base64 
```

在会话控制器中，它使用该令牌的值创建一个永久 cookie，以便用户在关闭浏览器时不会被注销，只有在他们通过`logout`操作注销时才会被注销：

**会话控制器**：

```
def create
  .
  .
  cookies.permanent.signed[:permanent_user_session] = user.rememberable_token
end

def logout  
  cookies.delete :permanent_user_session
  redirect_to root_url  
end 
```

cookie 在应用程序控制器中用于确定是否存在当前用户，以及在一些控制器中用于确定用户是否已登录和授权的 before_filter 中。

**应用控制器**：

```
def current_user  
  @current_user ||= User.find_by_rememberable_token(cookies.signed[:permanent_user_session]) if cookies.signed[:permanent_user_session]
end

def authorize
  unless User.find_by_rememberable_token(cookies.signed[:permanent_user_session])
    render :action => 'login'
  end
end 
```

问题是这是安全的还是容易被会话劫持？如果它容易被劫持，如果在该`session#logout`方法中它在删除现有 cookie 之前为用户创建一个新的 rememberable_token （但不创建具有该值的新 cookie），会好吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:04:30.683

如果有人在窃取 cookie，则此代码：

```
def current_user  
 @current_user ||= User.find_by_rememberable_token(cookies.signed[:permanent_user_session]) if cookies.signed[:permanent_user_session]
end 
```

仍然可以工作。在您的注销方法中，您必须从用户表中删除令牌并在登录时重新创建。

基本上，您在创建时所做的应该在每次登录时完成，并在每次注销时恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:02:59.363

我可能会这样做：

在会话创建时：

```
random_string = SecureRandom.urlsafe_base64
cookies.permanent.signed[:permanent_user_session] = random_string   
user.rememberable_token = Digest::MD5.hexdigest(random_string) && user.save 
```

在会话销毁：

```
cookies.delete :permanent_user_session 
```

在应用程序控制器中：

```
def current_user  
  @current_user ||= User.find_by_rememberable_token(Digest::MD5.hexdigest(cookies.signed[:permanent_user_session])) if cookies.signed[:permanent_user_session]
end

def authorize
  unless @current_user
    render :action => 'login'
  end
end 
```

这样，您将存储令牌的哈希，并为每次新登录重新生成一个新的（并在每次注销时过期）。Rails 负责 CSRF，但长期会话可能不是一个好主意。

# c# - 创建可重用的 ASP.NET MVC 项目

> ID：14729684
> 
> 赞同：2
> 
> 时间：2013-02-06T12:58:00.850
> 
> 标签：c#, asp.net-mvc-3, architecture

我有几个类似的 ASP.NET MVC 项目（解决方案）。这些项目有几个相同的控制器/视图和 _Layout (MasterPage)。我想将这些相同的元素区分为单独的可重用项目。是否可以在 ASP.NET MVC 中创建这样的可重用项目？以及我必须使用哪些技术。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:59:49.193

你可以试试 MvcContrib Portable Area [http://mvccontrib.codeplex.com/](http://mvccontrib.codeplex.com/)

[http://mvccontrib.codeplex.com/wikipage?title=Creating%20a%20Portable%20Area&referringTitle=Documentation](http://mvccontrib.codeplex.com/wikipage?title=Creating%20a%20Portable%20Area&referringTitle=Documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:00:45.297

您可以从您的项目[http://haacked.com/archive/2011/06/06/creating-a-custom-asp-net-mvc-project-template.aspx创建模板](http://haacked.com/archive/2011/06/06/creating-a-custom-asp-net-mvc-project-template.aspx)

对于并行开发，更好的方法可能是组织您的项目，如下所示：http: [//lostechies.com/jimmybogard/2009/12/09/organizing-asp-net-mvc-solutions/](http://lostechies.com/jimmybogard/2009/12/09/organizing-asp-net-mvc-solutions/)

# android - 回到保持其先前状态的片段

> ID：14729690
> 
> 赞同：0
> 
> 时间：2013-02-06T12:58:17.633
> 
> 标签：android, android-activity, fragment, back

我是一名老 Android 程序员，但我以前只使用活动，而且我对 Fragments 很陌生。

我创建了一个带有菜单栏（4 个按钮）的应用程序，单击该菜单栏时，应该在菜单栏上方加载每个不同的片段。问题是每次我单击菜单栏按钮时，它都会重新加载整个片段，我希望它显示片段的先前状态（就像设备后退按钮一样）。

我怎么能做这样的事情？

从主要活动调用：

```
 Fragment my_fragment = new MyFragment();
    FragmentManager fragment_manager = getSupportFragmentManager();
    FragmentTransaction fragment_transaction = fragment_manager.beginTransaction();
    fragment_transaction.replace(R.id.fragment_container, my_fragment);
    fragment_transaction.addToBackStack(null);
    fragment_transaction.commit(); 
```

我的大部分 MyFragment 进程代码都在函数中

> onActivityCreated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:29:41.160

您也可以像在活动中一样使用 onSaveInstanceState 方法，使用 Bundle savedInstanceState 对象来恢复数据，例如

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("test", 1);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (savedInstanceState != null) {
        int testValue = savedInstanceState.getInt("test", 0);
    }
} 
```

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# python-2.7 - 安装 python 2.7 后 virtualenv 出错

> ID：14729691
> 
> 赞同：1
> 
> 时间：2013-02-06T12:58:20.363
> 
> 标签：python-2.7, debian, virtualenv

我刚刚为我的 Debian Squeeze 从源代码安装了 python 2.7。但是现在，当我使用 virtualenv 时，对于这个特定的 python 版本，我有这个错误：

```
~/ENV$ virtualenv -p /usr/local/bin/python2.7 --no-site-packages --distribute script_prod
Traceback (most recent call last):
  File "/usr/bin/virtualenv", line 2, in <module>
    import virtualenv
ImportError: No module named virtualenv 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:12:34.713

我发现我需要使用 python2.7 安装 virtualenv 才能使其正常工作！

# php - 表单操作在 wordpress 模板中给出对象未找到错误

> ID：14729698
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:58:47.790
> 
> 标签：php, wordpress

我创建了一个放置在主题文件夹中的 PHP 文件（validate.php），然后登录表单模板 word press。我收到错误：“找不到对象错误”。

**以下代码是我写的：**

```
<form action="validate.php" method="post">
 and also tried with  
<form name="userlogin" method="post" action="<?php echo network_site_url(); ?>/validate.php"> 
```

请尽快给出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:16:19.387

您应该指定 WordPress URL 而不是指向 php 文件的链接。

一定要了解 WordPress 主题的解剖结构：http: [//yoast.com/wordpress-theme-anatomy/](http://yoast.com/wordpress-theme-anatomy/)

# wcf - 索引超出了数组的范围（请帮助）

> ID：14729700
> 
> 赞同：0
> 
> 时间：2013-02-06T12:58:59.690
> 
> 标签：wcf, binding, connection, portal

好吧，我已经尝试搜索这个大约一个星期了，但无法让它工作......

我有一个错误，上面写着：“索引超出了数组的范围”基本上我所做的是实现 wcf，到 sql 数据库的连接字符串工作正常，但是在尝试填充时出现错误数据或试图访问数据库中的数据。这就是我所做的：

应用配置：

```
 <basicHttpBinding>
    <binding name="BasicHttpBinding_ICoreService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>

    <client>
  <endpoint address="http://localhost:4335/PortalService.svc" 
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICoreService"
    contract="WcfPortalReference.ICoreService" name="BasicHttpBinding_ICoreService" />

    <behaviors>
  <endpointBehaviors>
    <behavior name="portalBehaviour">
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior> 
```

网络配置：

```
 <basicHttpBinding>
    <binding name="basicHttp" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483646" maxArrayLength="2147483646"/>
    </binding>

    <services>
  <service name="TTM.FRX.WcfPortal.PortalService" behaviorConfiguration="portalBehaviour">
    <endpoint address="" bindingConfiguration="basicHttp" binding="basicHttpBinding" contract="TTM.FRX.WcfPortal.Contract.ICoreService" />

    <serviceBehaviors>
    <behavior name="portalBehaviour">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior> 
```

这是我得到错误的地方：

```
 TTMSystem.WcfPortalReference.CoreServiceClient cli = new TTMSystem.WcfPortalReference.CoreServiceClient();
        //pass custom credentials

        cli.ClientCredentials.UserName.UserName = typeof(AssemblyIdentifierAttribute).ToString().Split(new char[] { '.' })[typeof(AssemblyIdentifierAttribute).ToString().Split(new char[] { '.' }).Length - 1];
        cli.ClientCredentials.UserName.Password = ((AssemblyIdentifierAttribute)System.Reflection.Assembly.GetExecutingAssembly().GetCustomAttributes(typeof(AssemblyIdentifierAttribute), false)[0]).Identifier;
        return cli; 
```

当它到达 clientCredentials 时它会给出错误（步骤超过用户名，但不是密码 - 用户名没有通过）有人可以帮我解决这个问题吗？这是我第一次在这方面工作，我已经尝试过搜索，但就是找不到...提前非常感谢！！！我需要更多信息，请说...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:14:36.093

错误是您正在访问不存在的数组中的元素。

您的代码有：

```
Length -1 
```

在其中一行的末尾。

如果长度为 0，您将尝试访问数组的元素 -1，这将给出您得到的错误。

# gwt - 我怎样才能在 GWT 中换行。我不希望一个单元格数据溢出到另一个单元格中破坏其边界

> ID：14729701
> 
> 赞同：0
> 
> 时间：2013-02-06T12:59:02.017
> 
> 标签：gwt, smartgwt

![检查用红色突出显示的块](../Images/29f9faf7008d26696abe3d7397d65f29.png)

请检查图像以供参考。我的要求是限制单元格中的此文本，以便即使文本很长也不会删除下一个单元格的分隔线。我在 gwt 2.1 中使用富文本编辑器。我不希望一个单元格数据溢出到另一个单元格中破坏其边界

有什么建议么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:27:30.167

您可以将 CSS 样式应用于您的表格。例如：

```
.myTable td {
    word-wrap: break-word;
    white-space: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:52:45.520

可以使用以下方法完成：

```
label.setOverflow(Overflow.HIDDEN); 
```

隐

public static final Overflow HIDDEN 超出小部件宽度或高度的内容被剪裁（隐藏）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T16:57:02.797

你试过用这个吗？

```
pricate ListGrid grid;

grid.setFixedRecordHeights(false); // Will make sure that your rows can be resized.
grid.setWrapCells(true); // Will make the text at the end of your rows wrap to the next line 
```

# c# - 使用“运行...”创建不同的 user.config

> ID：14729703
> 
> 赞同：6
> 
> 时间：2013-02-06T12:59:02.687
> 
> 标签：c#, .net, winforms, app-config

我的应用程序连接到不同的数据库。连接字符串保存在用户设置中。我无法使用应用程序范围，因为数据在运行时更改。

如果用户正常启动应用程序没有问题。但是，如果他使用菜单中的`"Run..."`命令，则会创建一个不同的文件夹，其中包含不同的.`Start`*`User\AppData\Local\MyApplication`**`user.config`*

有没有办法阻止或绕过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:08:17.697

这种行为是无法避免的。

似乎 Windows 不会将其他程序启动的程序识别为与用户运行的程序相同。

要解决此问题，您必须避免 ConfigurationManager 进行的设置并创建自己的文件以保存注释中指出的数据。

# php - Onclick 清除或隐藏具有相同类名的标签

> ID：14729705
> 
> 赞同：0
> 
> 时间：2013-02-06T12:59:09.223
> 
> 标签：php, javascript, jquery

这是我的代码：

```
<label class="name">
<input class="required|number error" type="text" name="phone" value="">
<label class="error" for="phone" generated="true">This field is required.</label>
</label> 
```

单击清除按钮时，我想清除或隐藏错误类标签的值。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:06:24.333

```
$(".clear").click(function(){
    $(".error").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:01:22.290

```
$(".clear").click(function(){
    $(".error").html("");
}); 
```

# iphone - CLLocation 和 double 的问题

> ID：14729712
> 
> 赞同：1
> 
> 时间：2013-02-06T12:59:24.280
> 
> 标签：iphone, ios, objective-c, double, cllocation

我的经度为 -122.406417，而 self.actualLongitude 是双重成员。

```
NSLog(@"original lon: %f",  [self.tempLocation coordinate].longitude);
NSLog(@"original lat: %f",  [self.tempLocation coordinate].latitude);
NSLog(@"original alt: %f",  [self.tempLocation altitude]);

self.actualLongitude = [self.tempLocation coordinate].longitude;
self.actualLatitude = [self.tempLocation coordinate].latitude;
self.actualLongitude = [self.tempLocation altitude];

NSLog(@"new lon: %f",  self.actualLongitude);
NSLog(@"new lat: %f",  self.actualLatitude);
NSLog(@"new alt: %f",  self.actualAltitude); 
```

那么为什么 self.actualLongitude 0.000000 呢？

**2013-02-06 14:19:59.386 GeoCatching[4733:c07] 原始 lon：-122.406417
2013-02-06 14:19:59.386 GeoCatching[4733:c07] 原始纬度：37.785834
2013-02-06 14:19： 59.387 GeoCatching[4733:c07] 原始 alt：0.000000
2013-02-06 14:19:59.387 GeoCatching[4733:c07] 新 lon：0.000000
2013-02-06 14:19:59.387 GeoCatching[4733:c07] 新纬度： 37.785834
2013-02-06 14:19:59.388 GeoCatching[4733:c07] 新 alt: 0.000000**

注意：正值是正确的。我正在使用模拟器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:29:19.230

在你的 3 个作业的最后一行：

```
self.actualLongitude = [self.tempLocation altitude]; 
```

`self.actualLongitude`你用**高度**覆盖的值（恰好为零）。

你大概是说

```
self.actualAltitude = [self.tempLocation altitude]; 
```

# c# - 将十六进制字符串解析为以 10 为底的长整数

> ID：14729713
> 
> 赞同：1
> 
> 时间：2013-02-06T12:59:33.013
> 
> 标签：c#, python, hex

我需要将十六进制值解析为以 10 为底的长整数。价值类似于：

```
 9F2EEA4AA03D55B33172E9A86CFF6156AC1628C67983193A337B98995151F9B0F41562290DB98697280E805803E4B18914519CEB55CEA5D03A927C28C36A4BC7 
```

我怎样才能做到这一点？

更新：

在python中，我使用了以下内容：

```
>> num = "9F2EEA4AA03D55B33172E9A86CFF6156AC1628C67983193A337B98995151F9B0F41562290DB98697280E805803E4B18914519CEB55CEA5D03A927C28C36A4BC7"
>> int(num, 16)
>> 8337103942674051648235321365669510487642415361796636721089378763661406518267124809778145800381557738780272231500412167743930433352841689114003303823985607L 
```

当我的同事尝试@Sergey 的回答时，我的同事得到了不同的结果（负值，而我的不是负值）

```
>> BigInteger bigInteger = BigInteger.Parse(num, NumberStyles.HexNumber);
>> -5070703987268545451338703632536335639836950458795756656634182680060357511806422167023728497785345688909759626686073883109823449459104880832430345182098489 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:07:02.680

请查看[BigInteger Structure](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)以处理大整数。

```
BigInteger bigInteger = BigInteger.Parse("0D574F480A03D55B33172E9A86CFF6156AC1628C67983193A337B98995151F9B0F41562290DB98697280E805803E4B18914519CEB55CEA5D03A927C28C36A4BC7", NumberStyles.HexNumber);
string s = bigInteger.ToString(); // String with decimal representation. 
```

# 更新

**如果数字应该被解释为正数，**即使它的第一个字符是 8-F，在字符串前面加上（开始）0 。请参见上面的示例：`0D574...`

# android - 无法从我的 Button ImageView 接收点击事件，让 HomeScreen 扩展 MyActivity

> ID：14729715
> 
> 赞同：0
> 
> 时间：2013-02-06T12:59:38.443
> 
> 标签：android, layout, onclicklistener

我没有收到来自我的按钮的点击事件。我想知道为什么。

我有一个 LinearLayout，在操作栏的顶部有一个包含布局，下面有一个按钮。我无法接收事件

1.  操作栏上的“mylocation 图标”，就在下方
2.  下一步按钮
3.  放大/缩小按钮

我在这里想念什么？

![在此处输入图像描述](../Images/850afe4a1e6d27c89a149977644e7424.png)![在此处输入图像描述](../Images/9fb0a6d42de215449a6821b949360c23.png)

**主布局 location.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <include
        android:id="@+id/actionbar"
        android:layout_alignParentTop="true"
        layout="@layout/actionbar" />

    <Button
        android:id="@+id/next"
        <!-- removed unnecesary attr's -->        
        android:background="#f6461d"
        android:clickable="true"
        android:enabled="true"
        android:text="Next"/>

</RelativeLayout> 
```

**操作栏**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_alignParentTop="true"
    android:background="#EEeeeee4"
    <!-- removed unnecesary attr's --> >

    <LinearLayout
        <!-- removed unnecesary attr's --> 
        android:orientation="horizontal" >

        <Button
            android:id="@+id/icruiseon"
            <!-- removed unnecesary attr's --> 
            android:background="@drawable/curbcablogo" />

        <Button
            android:id="@+id/refresh"
            <!-- removed unnecesary attr's --> 
            android:background="@drawable/refresh" />

        <ImageView
            android:id="@+id/connectStatus"
            <!-- removed unnecesary attr's --> 
            android:src="@drawable/disconnect" />

        <ImageView
            android:id="@+id/busy"
            <!-- removed unnecesary attr's --> 
            android:clickable="false"
            android:src="@drawable/busy" />

        <TextView
            android:id="@+id/subscriberInbox"
            <!-- removed unnecesary attr's --> 
            android:background="@drawable/incomingprovider" />
    </LinearLayout>

    <LinearLayout
            <!-- removed unnecesary attr's -->  >

        <TextView
            android:id="@+id/currentAddress"
            <!-- removed unnecesary attr's --> 
            android:text="Receiving address....." />

        <ImageView
            android:id="@+id/whereAmI"
            <!-- removed unnecesary attr's --> 
            android:src="@drawable/mylocation" />
    </LinearLayout>

</LinearLayout> 
```

**我的活动档案**

```
public class MyActivity {
onCreate() {
    setContentView(R.layout.location) ;

        next = (Button) this.findViewById(R.id.next);
        next.setOnClickListener(this);

        whereAmI = (ImageView) this.findViewById(R.id.whereAmI);
        whereAmI.setOnClickListener(this) ;

@Override
    public void onClick(View v) {
        if (v == next) {
            Toast.makeText(this, "searching", Toast.LENGTH_LONG).show() ;
            new Search(this, source, destination).execute(null);
        } else if (v == whereAmI) {
            Toast.makeText(this, "centering", Toast.LENGTH_LONG).show() ;
            location.getController().setCenter(source);
            new GetGeoAddress(this, source).execute(null);
        }
    } 
```

**另一个活动**

```
public class HomeActivity extends MyActivity {
onCreate() {
      //No setContentView here ; I expect that the super class MyActivity will setContentView. 
```

编辑：从布局和代码中删除了 MapView，以消除和调试。我仍然没有收到点击事件。我在这里想念什么？

编辑2：在上面添加了一些更改，我怀疑这与活动继承有关。我知道我在这里缺少一些基本的东西。它是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:33:00.707

修复了问题。活动之间的继承混淆了 onClickListner。

**超类**

```
public class SuperClass extends Activity implements OnClickListner {
     public onCreate() {
         setContentView(R.layout.layoutwithView_ABC) ;
         ABC.setOnClickListener(this) ;
     ...
     public void onClick() {
         Toast ("this wont show up") ;
     }
     ...
} 
```

**子类，作为清单文件的第一个活动**

```
public class SubClass extends SuperClass implements OnClickListner {
     public onCreate() {
         //NOT init here, setContentView(R.layout.layoutwithView_ABC) ;
     ...
     public void onClick() {
         Toast ("will show up") ;
     }
     ...
} 
```

希望我正确地表示了答案。即使我在超类中为 ABC 设置了 setOnClickListerer，也会调用 SubClass 的 onClick，因为它的“覆盖”简单答案。

# wcf - 为不同的消费者使用多个合同

> ID：14729716
> 
> 赞同：0
> 
> 时间：2013-02-06T12:59:39.910
> 
> 标签：wcf, web-services

**我在WCF**得到了一道面试题

 **> **为网络服务的不同消费者提供多个合同有什么用？**

有没有人知道以上问题的答案？Reg WCF 问题，我解释了 DataContract、Service Contract、Message Contract。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:59:58.027

取决于不同合同的含义。

如果它们意味着不同的接口，那么这可能是一个安全优势，限制了您向每个客户端公开的内容。

如果是不同的端点配置，您可以为本地网络上的客户端使用有效的二进制协议，并为外部客户端使用兼容的基本 http 绑定。您还可以为每个端点使用不同的身份验证方法。**

# android - 如何检查是否可以使用 android 中的 IP 地址连接到 apache 服务器？

> ID：14729726
> 
> 赞同：1
> 
> 时间：2013-02-06T12:59:59.770
> 
> 标签：android, apache, connection

我有一个活动将使用 IP 地址和端口连接到远程计算机中的 Apache 服务器。我可以手动连接到服务器，WAMP 主页会显示在设备浏览器上。

我想要做的是检查您是否可以使用在活动中输入 EditText 的 IP 地址实际连接到服务器。

因此，在单击按钮后，它将检查连接，如果成功则转到下一个活动。如果它不能使用 ip 地址或者 ip 地址没有 Apache，它会显示一个 Toast。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:27:33.890

检查http响应。
如果它是 200，那么您就知道一切都很好。

例子 ：

```
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = httpclient.execute(new HttpGet(serverUrl));
    if(response.getStatusLine().getStatusCode() == 200) {
        // Everything is OK
    } else {
        // Something wrong
    }
} catch (Exception e) {
    // TODO: handle exception
} 
```

# ruby-on-rails-3 - Zip::ZipFile File not found error with aws s3 in rails

> ID：14729727
> 
> 赞同：2
> 
> 时间：2013-02-06T13:00:00.877
> 
> 标签：ruby-on-rails-3, heroku, zipfile

我正在研究托管在 heroku 上的 Rails 应用程序并尝试解压缩文件。我在亚马逊 s3 上使用回形针存储 zipfile。

`zip_file.rb`

```
class ZipFile < ActiveRecord::Base
   has_attached_file :attachment, {}.merge(PAPERCLIP_STORAGE_OPTIONS)
end 
```

我的文件已成功存储在亚马逊上。当我在浏览器中打开附件 url 时，它会下载 zip 文件。但是在我的控制台中，当我尝试解压缩文件时，它给了我错误：

```
u = ZipFile.last.attachment.url
Zip::ZipFile.open(u) 
```

我得到错误：

```
Zip::ZipError: File #{file_url} not found 
```

我也使用`zipfile.attachment.path`来访问该文件，但它返回相同的错误。

问题是什么？请帮忙。

非常感谢。

# c# - Aspx页面中的Foreach循环如何添加复选框和标签

> ID：14729731
> 
> 赞同：1
> 
> 时间：2013-02-06T13:00:11.813
> 
> 标签：c#, javascript, asp.net, .net

Aspx 页面中的 Foreach 循环如何从数据表中添加复选框和标签值。接收所有勾选的复选框值。

我已经在 aspx 页面中而不是在 aspx.cs 中编写了这段代码。

```
<% foreach (Employee myEmp in _empList)  {
       empName = myEmp.ToString();  %>

<div class="abc">
    <div class="pqr"> 
            <asp:Label Text="<% empName %>" runat="server"  ID="lblEmpName"></asp:Label></label> 
      </div>
    <div class="xyz">
        <asp:CheckBox ID="chkBox"  Checked="false" runat="server" />
    </div>                      
</div>
<%  }   %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:33:21.277

我认为向 asp.net 页面动态添加控件的最佳方法是 oninit page-event。

你应该尝试这样的事情。

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        /*LinkButton lb = new LinkButton();
        lb.ID = "lbAddFilter";
        pnlFilter.Controls.Add(lb);
        lb.Text = "Add Filter";
        lb.Click += new EventHandler(lbAddFilter_Click);*/

        // regenerate dynamically created controls
        foreach ( var employee in employeeList)
        {
            Label myLabel = new Label();
            // Set the label's Text and ID properties.
            myLabel.Text = "Label" + employee.Name.ToString();
            myLabel.ID = "Label" + employee.ID.ToString();

            CheckBox chkbx = new CheckBox();
            chkbx.ID = "CheckBox" + employee.ID.ToString();
            chkbx.Text =  "Label" + employee.Name.ToString();

            MyPanel.Controls.Add(myLabel);
             MyPanel.Controls.Add(chkbx); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:14:38.347

你可以这样做：

```
 List<user> userList = new List<user>();

        foreach (user usr in userList)
        {
            PlaceHolder1.Controls.Add(new CheckBox()
                                          {
                                              ID = "cb_"+usr.UserId,
                                              Text = usr.Name,
                                              });    
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-23T13:03:28.140

我认为您只是缺少标签的`:`or `=`。`<%`应该是`<%:`。用于`:`对任何 html 进行编码并避免 js 注入。更多关于vs的[信息](https://haacked.com/archive/2009/09/25/html-encoding-code-nuggets.aspx/)`=``:`

```
<% foreach (Employee myEmp in _empList)  {
    empName = myEmp.ToString();  %>
    <div class="abc">
        <div class="pqr"> 
            <asp:Label Text="<%: empName %>" runat="server"  ID="lblEmpName"></asp:Label> 
        </div>
        <div class="xyz">
            <asp:CheckBox ID="chkBox"  Checked="false" runat="server" />
        </div>                      
    </div>
<% } %> 
```

# c# - Task.Run 和 Task.Factory.StartNew 之间的不同异常处理

> ID：14729736
> 
> 赞同：13
> 
> 时间：2013-02-06T13:00:43.533
> 
> 标签：c#, exception, task-parallel-library, taskfactory

我在使用`Task.Factory.StartNew`并尝试捕获`exception`抛出的问题时遇到了问题。在我的应用程序中，我有一个长时间运行的任务，我想将它封装在一个`Task.Factory.StartNew(.., TaskCreationOptions.LongRunning);`

但是，当我使用`Task.Factory.StartNew`. 然而，当我使用它时`Task.Run`，它可以正常工作，我认为它只是一个包装器`Task.Factory.StartNew`（例如根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/hh873173.aspx)）。

此处提供了一个工作示例，不同之处在于异常在使用时写入控制台`Task.Run`，但在使用时不写入`Factory.StartNew`。

**我的问题是：**
如果我有一个`LongRunning`可能引发异常的任务，我应该如何在调用代码中处理它们？

```
private static void Main(string[] args)
{
    Task<bool> t = RunLongTask();
    t.Wait();
    Console.WriteLine(t.Result);
    Console.ReadKey();
}

private async static Task<bool> RunLongTask()
{
    try
    {
        await RunTaskAsync();
    }
    catch (Exception e)
    {
        Console.WriteLine(e);
        return false;
    }
    Console.WriteLine("success");
    return true;
}

private static Task RunTaskAsync()
{
    //return Task.Run(async () =>
    //    {
    //        throw new Exception("my exception");
    //    });
    return Task.Factory.StartNew(
        async () =>
    {
        throw new Exception("my exception");
    });

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T13:07:09.233

您的问题是`StartNew`与代表不同。的返回类型是（可转换为）。“outer”表示方法的开始，“inner”表示方法的完成（包括任何异常）。`Task.Run``async``StartNew``Task<Task>``Task``Task``Task`

要进入内部`Task`，您可以使用`Unwrap`. 或者您可以只使用而`Task.Run`不是代码。只是一个优化提示，实际上是可选的。[Stephen Toub 有一篇很好的博客文章，介绍了代码之间的区别](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)[以及](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)[为什么](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)[（通常）更好](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)[。](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)`StartNew``async``LongRunning`[`StartNew``Run``Run``async`](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)

**从下面的@usr 评论更新：** `LongRunning`仅适用于`async`方法的开头（直到第一个不完整的操作被`await`编辑）。所以`Task.Run`在这种情况下使用它几乎肯定会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:02:09.883

我会将我的一些评论纳入答案，因为事实证明它们很有帮助：

`LongRunning`与在实践中强制创建新线程相同。而且您的异步方法可能很长时间不在该线程上（它在第一个等待点被取消）。在这种情况下，您不需要 LongRunning。

异步方法运行多长时间并不重要。线程在第一次等待时被销毁（对未完成的任务进行操作）。

编译器可以以任何方式使用此提示吗？编译器通常无法以任何主要方式分析您的代码。此外，编译器对 TPL 一无所知。TPL 是一个库。这个库总是会启动一个新线程。指定`LongRunning`当你的任务几乎总是在几秒钟内消耗 100% CPU 或以非常高的概率阻塞几秒钟。

**我的猜测**是你不想`LongRunning`在这里，因为如果你阻塞，你为什么首先使用异步？async 不是阻塞，而是脱离线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:29:17.403

[首次展开](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskextensions.unwrap.aspx)任务时应该可以：

```
await RunTaskAsync().Unwrap(); 
```

或者：

```
await await RunTaskAsync(); 
```

# django - 覆盖模型管理中的 ForeignKey 字段的选项时出现 ValueError

> ID：14729738
> 
> 赞同：1
> 
> 时间：2013-02-06T13:00:58.270
> 
> 标签：django, forms, admin

我正在覆盖模型的管理表单来修改`choices`字段`ForeignKey`。在管理表单中选择一个选项并保存时，我得到`ValueError`：

```
Cannot assign "u'6'": "MyModel1.mymodel2" must be a "MyModel2" instance 
```

`6`所选选项的 id 在哪里。

新`choices`的构建为`((<choice_1_id>, <choice_1_label>), (<choice_2_id>, <choice_2_label>),...)`，并且我为呈现的选择小部件获得了相同的 html，就好像我没有修改一样`choices`（当然除了排序）。

如果我发表评论`self.fields['mymodel2'] = forms.ChoiceField(choices=choices)`，`MyModel1AdminForm.__init__()`我不会收到任何错误...

有人可以帮忙吗？

**模型.py**

```
class MyModel1(models.Model):
    mymodel2 = ForeignKey(MyModel2)
    # more fields... 
```

**管理员.py**

```
class MyModel1AdminForm(forms.ModelForm):

    class Meta:
        model = MyModel1

    def __init__(self, *args, **kwargs): 
        super(MyModel1AdminForm, self).__init__(*args, **kwargs)

        # create choices with ((<choice_1_id>, <choice_1_label>), (<choice_2_id>, <choice_2_label>),...)

        self.fields['mymodel2'] = forms.ChoiceField(choices=choices, widget=SelectWithDisabled) # http://djangosnippets.org/snippets/2453/

class MyModel1Admin(admin.ModelAdmin):
    form = MyModel1AdminForm
my_site.register(MyModel1, MyModel1Admin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:28:02.857

`mymodel2`是外键字段。如果要更改选项而不是添加自定义选项，则需要提供查询集：

```
self.fields['mymodel2'].queryset = MyModel2.objects.all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:38:01.540

如果您需要手动构建选择，例如

```
choices = MyModel2.objects.values_list('pk', 'title') 
```

应该使用标准`ChoiceField`，`title`您要用作标签/详细名称的模型字段在哪里供您选择。

* * *

查看您正在使用的代码段`values_list`将不起作用，因此您可以退回到列表理解：

```
[(c.pk, {'label': c.title, 'disabled': False}) for c in MyModel2.objects.all()] 
```

尽管您显然需要更多逻辑来决定是启用还是禁用选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:36:15.907

我最终覆盖了`ModelChoiceField`：

```
class MyModelChoiceField(forms.ModelChoiceField):
    def label_from_instance(self, obj):
        level = getattr(obj, obj._mptt_meta.level_attr)
        return {'label': obj.name), 'disabled': check_disabled(obj)} 
```

# asp.net-mvc - ASP.NET MVC 和 Oracle 11g 的最佳 OLAP 选项

> ID：14729741
> 
> 赞同：1
> 
> 时间：2013-02-06T13:01:07.183
> 
> 标签：asp.net-mvc, oracle, olap

我们正在使用 Oracle DB (11g) 开发一个 ASP.NET MVC 4 项目。客户要求我们将临时报告 (OLAP) 添加到我们的系统中，因此我们正在寻找可能的选项。用户界面应集成到现有的 ASP.NET MVC 网站中，数据源应为 Oracle DB。这种配置的最佳可用选项是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T16:56:32.037

我想这已经相当晚了（在发布后一年多！）但我强烈推荐嵌入到 11g 数据库中的 OLAP 选项。

甲骨文将其包装在各种杂物中，并提供了一些不太好的客户端工具（例如 OLAP 工作表），但基于最初称为 Express 的工具的底层引擎拥有非常好的血统，并且仍然是市场上最好的引擎之一. 性能非常好，它拥有出色且功能齐全的语言，而且成本仅为 Oracle 自己的 Hyperion 产品的一小部分。

最重要的是，它嵌入在 Oracle 数据库中，允许（相对）轻松地将数据从一个数据库传输到另一个数据库（尽管考虑到 Oracle 拥有该技术已有多长时间，它们仍然保持着一定的距离）。

使用 Oracle 提供的客户端工具取得的成功相对有限，我们倾向于回归基础并在 OLAP 多维数据集中手动定义/填充对象 - 尽管我们的大多数应用程序往往涉及建模/预测，因此需要回写，这是 Oracle OLAP 的一项优势，但客户端工具的支持并不好，因为 Oracle 宁愿您使用更昂贵的 Hyperion。

# c# - 将 XSD 编译为 C# 对象包括命名空间

> ID：14729749
> 
> 赞同：0
> 
> 时间：2013-02-06T13:01:45.860
> 
> 标签：c#, .net, namespaces, xsd, schema

我正在从 XSD 文件生成对象和类。但是在一个命名空间下创建的类而不是 XSD 的目标命名空间。如何编译架构，并且应该在命名空间下生成类？

这是我的代码示例：

```
// generate an assembly representing the given schema:
var codeNamespace = new CodeNamespace(namespaceName);
var codeProvider = new CSharpCodeProvider();
var codeGenerationOptions = new CodeGeneratorOptions();
using (var writer = new StringWriter())
{
    codeProvider.GenerateCodeFromNamespace(codeNamespace, writer,
                                           codeGenerationOptions);
    code = writer.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:30:09.487

您的代码示例的工作原理是将生成的代码放在您在`namespaceName`变量中指定的命名空间中。如果您希望您的命名空间与 XSD 匹配，您可以`namespaceName`相应地设置您的变量。

例如，如果我`string namespaceName = "My.Namespace.One";`在您的示例代码中定义，则代码的结果值`"namespace My.Namespace.One {\r\n\r\n}"`符合预期。

因此，您只需从 XSD 中读取命名空间并将其分配`namespaceName` 给在你的例子中。

但是，要实际编译您生成的代码，命名空间将需要符合 C# 限制。像`http://schemas.microsoft.com/winfx/2006/xaml`这样的命名空间不会在 C# 中编译。该命名空间*可能*（我不确定）在 IL 字节码级别有效，但即使是这样，我也真的想知道您所做的事情是否值得付出这种努力，特别是考虑到这对 C# 来说是一种痛苦使用生成的程序集。

我觉得您的问题/示例中可能缺少一些细节，这可能不是您要查找的信息；但是，我相信这个答案与您提供的一致。

# php - 提交表单时显示警报

> ID：14729754
> 
> 赞同：0
> 
> 时间：2013-02-06T13:01:52.550
> 
> 标签：php, javascript

我需要显示警报说thanx您的消息已收到，但这不起作用所以请帮我弄清楚该怎么做。是否有编码错误或我无法解决的问题。如果有人帮助我，我会很高兴。谢谢

```
 <h4>Send Your Feedback Here.<p>

      <form name ="register" action="contact.php" method="post"    enctype="multipart/form-data">

          Name<br>
          <input type="text" name="name" size="30">
        </p>
        <p>
        Email<br>
        <input type="text" name="email" size="30"></p><p>
         Message<br>
        <textarea name="message" rows="5" cols="40"></textarea>
        <p>

        </p>          
        <p>
        Security Check<br>

            Sum of <?php $a = rand(0,9);
                        $b = rand(0,9); 
                        echo $a . "+" . $b ; 
                        $result = $a + $b ;
                        ?>  =       
            <input type="text" name="ver"  /><input type="hidden" name="rval" value="<?php echo $result; ?>" />
          <button type="button" onClick="validate()">Send</button>
        </p>
      </form>

<script type="text/javascript">
        function validate()
    {
        var x = document.register.ver.value;
        var y = document.register.rval.value;
        var nameCheck = document.register.name.value, 
        emailCheck = document.register.email.value, 
        msgCheck = document.register.message.value;

    var msg ="";
    if(x!=y)
    {
    msg+= "Sorry!! Captcha Mismached."+"\n";
    }
    if(nameCheck=="")
    {
        msg+= "Dont you have a name????"+"\n";
    }
    if(emailCheck=="")
    {
        msg+= "Enter email... how am I supposed to contact you"+"\n";
    }
    if(msgCheck="")
    {
        msg+= "Dont you have any messages for me??"+"\n";
    }   

    if(msg!="")
    {
    alert(msg);
    }

    else
    {
            <?php
//Get message data.
$name = $_POST['name'];
$message = $_POST['message'];
$email=$_POST['email'];
$ver = $_POST['ver'];  
$rval = $_POST['rval'];

if($ver==$rval)
{
//Email it.
mail(
  'example@example.com',  //Where to send
"Contact form - $name", //Email subject
  $message,               //Message body
  $email                    //email address  
);
echo "<script type=\"text/javascript\">alert('Thank you form is submitted');</script>";
    }
else
{
     echo "<script type=\"text/javascript\">alert('Wrong captcha');</script>";
}

?>

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:07:52.850

你不能像那样混合 JavaScript 和 PHP。PHP 将在页面被提供给用户之前被解析。将它包含在您的 JavaScript`else`块中不会产生任何影响，因为无论如何都会在生成页面时运行代码。

您应该研究[AJAX](http://api.jquery.com/jQuery.ajax/)的使用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T13:15:00.350

```
<script type="text/javascript">
function thevalidate()
    {
        var x = document.register.ver.value;
        var y = document.register.rval.value;
        var nameCheck = document.register.name.value, 
        emailCheck = document.register.email.value, 
        msgCheck = document.register.message.value;

        var msg ="";
        if(x!=y) {
            msg+= "Sorry!! Captcha Mismached."+"\n";
        }

        if(nameCheck=="") {
            msg+= "Dont you have a name????"+"\n";
        }
        if(emailCheck=="") {
            msg+= "Enter email... how am I supposed to contact you"+"\n";
        }
        if(msgCheck="") {
            msg+= "Dont you have any messages for me??"+"\n";
        }   

        if(msg!="") {
            alert(msg);
        } else {

            <?php
            //You need  to process data here..
            ?>

        }
}

</script>
 <h4>Send Your Feedback Here.<p>

      <form name ="register" action="php/process.php" method="post"    enctype="multipart/form-data">

          Name<br>
          <input type="text" name="name" size="30">
        </p>
        <p>
        Email<br>
        <input type="text" name="email" size="30"></p><p>
         Message<br>
        <textarea name="message" rows="5" cols="40"></textarea>
        <p>

        </p>          
        <p>
        Security Check<br>

            Sum of <?php $a = rand(0,9);
                        $b = rand(0,9); 
                        echo $a . "+" . $b ; 
                        $result = $a + $b ;
                        ?>  =       
            <input type="text" name="ver"  /><input type="hidden" name="rval" value="<?php echo $result; ?>" />
          <button type="button" onClick="thevalidate()">Send</button>
        </p>
      </form> 
```

# jboss - 在 JBOSS 服务器中托管 Asp.net 应用程序

> ID：14729758
> 
> 赞同：0
> 
> 时间：2013-02-06T13:02:07.760
> 
> 标签：jboss

我在 Windows 操作系统上安装了 jboss 应用程序服务器。是否可以在不使用 IIS 的情况下在 jboss 上部署 asp.Net 应用程序。如果是，如何做到这一点？

请帮我...

问候

纳西尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:12:40.393

不，这是不可能的。JBoss 是 JavaEE 应用程序服务器（容器），而不是 .Net 服务器，所以你不能。如果您正在寻找 IIS 的替代方案来部署 .Net 应用程序，您可以查看[mono project](http://www.mono-project.com)。

在此页面中，您将获得有关[如何安装单声道和部署应用程序](http://www.mono-project.com/ASP.NET)的更多信息。

# session - Struts2 使用 Interceptor 处理会话超时

> ID：14729763
> 
> 赞同：1
> 
> 时间：2013-02-06T13:02:30.780
> 
> 标签：session, struts2, httprequest, session-timeout, interceptor

我正在尝试使用拦截器在我的 struts2 应用程序中处理会话超时请求。以下是与此相关的文件：

**Web.xml：**

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

**Struts.xml：**

```
<package name="default" extends="struts-default">
<interceptors>
    <interceptor name="sessionInterceptor"
        class="com.platform.web.security.SessionInterceptor" />
</interceptors>
<action name="doLogin"
    class="com.platform.web.action.LoginAction">
    <result name="input">/login/login.jsp</result>
    <result name="error">/login/login.jsp</result>
    <result type="chain">menuAction</result>
</action>

<action name="menuAction"
    class="com.platform.web.action.MenuAction">
    <interceptor-ref name="sessionInterceptor"/> //Interceptor included here
    <result name="SUCCESS">/jsp/main.jsp</result>
    <result name="ERROR">/login/login.jsp</result>
    <result name="input">/jsp/myFavourite.jsp</result>
</action> 
```

**拦截器类：**

```
public class SessionInterceptor extends AbstractInterceptor implements StrutsStatics {
/**
 * 
 */
private static final long serialVersionUID = 1L;

@Override
public String intercept(ActionInvocation invocation) throws Exception {

final ActionContext context = invocation.getInvocationContext();
HttpServletRequest request = (HttpServletRequest) context
    .get(HTTP_REQUEST);
HttpSession session = request.getSession(false);

// Is there a "user" object stored in the user's HttpSession?
//Object user = session.getAttribute("User");
if (session == null) {
    // The user has not logged in yet.

    // Is the user attempting to log in right now?
    //String loginAttempt = request.getParameter(LOGIN_ATTEMPT);

    /* The user is attempting to log in. */
    /*if (!StringUtils.isBlank(loginAttempt)) {
    return invocation.invoke();
    }*/
    return "timeout";
 } else {
    return invocation.invoke();
 }
 }
} 
```

**登录操作：**

```
public class LoginAction extends MesActionSupport implements ServletRequestAware {
@Override
public String execute() throws Exception {
setActionNameForAudit("execute123");
FILE_LOGGER.debug("Entering into execute() ... ");
String strSessionId = "";

if (isValidUser == true) {
    user = getUser();

    strSessionId = request.getSession(true).getId();
    setServletRequest(request);
    session.put("SessionId", strSessionId);

    setSession(session, user);

    ServletActionContext.getRequest().getSession().setAttribute("User", user);

    FILE_LOGGER.debug("Exit from  LoginAction.execute() ... ");
    return SUCCESS;
} else {
    return ERROR;
}
 } 
```

**菜单动作：**

```
public class MenuAction extends MesActionSupport implements SessionAware, ParameterAware, RequestAware {
@Override
public String execute() throws Exception {
setActionNameForAudit("execute ");
User user = null; // To store current user
Map<String, ArrayList<String>> category = null; // To store all Menu
// Categories.
StringBuffer menu = new StringBuffer(""); // To store Menu String
StringBuffer dashboardMenu = new StringBuffer("");

// user = (User)(request.getSession().getAttribute("User")==null ? null : request.getSession().getAttribute("User")); //Request object IS NULL HERE!!
user = (User) (mapSession.get("User") == null ? null : mapSession
    .get("User")); // mapSession object IS NULL HERE
FILE_LOGGER.debug("user is " + user == null);

if (user != null) {
    menu = menuView.getMenu(user);
    mapSession.put("Menu", menu.toString());
    mapSession.put("dbMenu", dashboardMenu.toString());
    ret = "SUCCESS";
} else if (user == null) {
    ret = ERROR;
} else {
    ret = SUCCESS;
}
return ret;
} 
```

流程是这样的： 1\. 登录屏幕打开 2\. 用户输入凭据并提交 3\. LoginAction 被调用，用户通过身份验证 4\. 如果有效用户 - MenuAction 被调用。否则重定向到 Login.jsp

根据上面的代码，会话在 LoginAction 中创建，控制到达检查会话对象的拦截器。如果会话存在，则控件到达 MenuAction。

但是当这种情况发生时，`request`对象被重置为 NULL！早些时候，当我不使用拦截器时，LoginAction 和 MenuAction 之间的流程工作得很好。

拦截器是否会重置 HTTPRequest？因此会议？结果我无法继续。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T14:40:14.830

我对此代码/配置有很多评论，有些微不足道，有些则不然。

1.  创建自己的会话的理由为零；不。

2.  在操作配置中声明拦截器时，必须声明*所有*拦截器。按照配置，*只有*会话拦截器正在运行`menuAction`。

3.  这意味着不会填充任何参数，因为没有其他拦截器正在运行。

4.  一般来说，只用于`SessionAware`访问会话。很少需要直接访问请求*。*

5.  显然拦截器没有“将请求设置为空”，这甚至没有意义。

6.  我不知道你`LoginAction`应该做什么。or之类的行的*意图*是什么？这两条看起来正确的线没有任何东西。`setServletRequest(request);``setSession(session, user);`

7.  如果您要使用and常量，请将您的成功和错误结果命名为`"success"`和`"error"`（小写） 。如果您*没有*在这段代码中使用这些常量，我建议为它们使用其他名称，因为这会使以前实际使用过 Struts 2 的任何人感到困惑。`ActionSupport.SUCCESS``ActionSupport.ERROR`

**   发布代码示例时，请删除不相关的内容。特别是当您没有明确设置语法突出显示时，它会使事情*变得*更加难以阅读。

    *   不要使用类似的代码`if (isValidUser == true)`，使用`if (isValidUser)`.

    *   注意你的条件：像这样的东西`if (user == null) ... else if (user != null) ... else ...`是零意义的。用户为空，或者不是：没有第三个选项。

    *   避免不必要的、令人困惑的逻辑，比如`User currentUser = (User) (mapSession.get("User") == null ? null : mapSession.get("User"));`基本上说“如果它为 null，则使用 null，否则返回刚刚获得的值，但再次获取它。” 为什么？？？

    *   像这样的评论`User user = null; // To store current user`完全没有价值。这不是很*明显*吗`User user`？一个用户。不够明显？怎么样`User currentUser`？？？

    *   将复数（例如，集合）命名为复数。类别名称到列表的映射不是单个类别。

    *   不要在远离它们使用的地方声明变量；这很令人困惑。

    *   将您的 JSP 页面放在`WEB-INF`某处以禁止直接客户端访问。

    *   避免不必要的语言结构，例如当`if`分支返回时，an`else`不是绝对必要的，而 IMO，它会增加噪音。同样，一旦您知道要返回，请考虑立即返回。后者更具争议性，但我认为人们开始意识到在短方法中有多个返回点是可以的，而且 IMO 更容易考虑。

    *   用更少的代码来说话。创建小的实用方法来包装琐碎的功能，这样它就不会污染主线代码。

    *   几乎从不使用动作链接。* 

 *还有更多，但现在就足够了。这是清理后的实际相关代码。其中一些实际上并不相关，但我还是把它留下了。

* * *

```
<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>

<session-config>
  <session-timeout>1</session-timeout>
</session-config> 
```

```
<package name="default" extends="struts-default">
  <interceptors>
    <interceptor name="sessionInterceptor" class="com.platform.web.security.SessionInterceptor" />
  </interceptors>

  <action name="doLogin" class="com.platform.web.action.LoginAction">
    <result name="input">/WEB-INF/jsp/login/login.jsp</result>
    <result name="error">/WEB-INF/jsp/login/login.jsp</result>
    <result type="redirectAction">menuAction</result>
  </action>

  <action name="menuAction" class="com.platform.web.action.MenuAction">
    <interceptor-ref name="sessionInterceptor"/>
    <result name="success">/WEB-INF/jsp/main.jsp</result>
    <result name="input">/WEB-INF/jsp/myFavourite.jsp</result>
  </action> 
```

```
 public class SessionInterceptor extends AbstractInterceptor implements StrutsStatics {
    @Override
    public String intercept(ActionInvocation invocation) throws Exception {
        ActionContext context = invocation.getInvocationContext();
        HttpServletRequest request = (HttpServletRequest) context.get(HTTP_REQUEST);
        HttpSession session = request.getSession(false);

        // session will almost *never* be null. Check for a valid user object.
        if (session == null) {
            return "timeout";
        }

        return invocation.invoke();
    }
} 
```

```
public class LoginAction extends MesActionSupport implements ServletRequestAware {
    @Override
    public String execute() throws Exception {
        if (!isValidUser) {
            return ERROR;
        }

        user = getUser();

        String strSessionId = request.getSession(true).getId();
        setServletRequest(request);
        session.put("SessionId", strSessionId);

        setSession(session, user);

        ServletActionContext.getRequest().getSession().setAttribute("User", user);

        return SUCCESS;
    }
} 
```

```
public class MenuAction extends MesActionSupport implements SessionAware, ParameterAware, RequestAware {
    @Override
    public String execute() throws Exception {
        User currentUser = (User) mapSession.get("User");
        if (currentUser == null) {
            return ERROR;
        }

        Map<String, List<String>> categories; // Left in for naming.

        StringBuffer menu = menuView.getMenu(user);
        mapSession.put("Menu", menu.toString());

        StringBuffer dashboardMenu = new StringBuffer("");
        mapSession.put("dbMenu", dashboardMenu.toString());

        return SUCCESS;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:50:28.573

除非您在前端添加一些跟踪，*否则*您无法分辨会话是超时还是尚未在拦截器中创建，在原始情况下它可能只是一个请求参数。

[HttpSessionListener](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)和[Servlet3 + AJAX 推送通知](http://java.dzone.com/articles/non-blocking-nio-server-push)的组合将是*正确*的方法。*

# git - 如何使用 git-svn 恢复多个修订

> ID：14729771
> 
> 赞同：1
> 
> 时间：2013-02-06T13:02:51.573
> 
> 标签：git, git-svn

我需要恢复已经在 svn repo 中的多个修订版（例如 28693、28756、28747）。

使用 svn，我可以通过一个命令来实现这一点：

```
svn merge -c -28693,-28756,-28747 https://repository/trunk 
```

如何用 git-svn 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:06:48.987

`git revert <commit1> <commit2> ...`应该做的伎俩。

**在讨论之后进行编辑**：
如果您不知道哈希值（您可以`git log`通过查看该`git-svn-id`字段在 中找到 SVN 修订版，它是 之后的数字`@`），以下单行代码对我有用：

```
git revert $(echo r<REV1> r<REV2> r<REV3> | xargs -n1 git svn find-rev) 
```

# android - Android Monkeyrunner's：它可以在第一个错误时停止吗？

> ID：14729776
> 
> 赞同：1
> 
> 时间：2013-02-06T13:03:19.170
> 
> 标签：android, unit-testing, jython, monkeyrunner

我在 Eclipse 上使用**Monkeyrunner**和 Jython 对 Android 应用程序进行单元测试。

*   日食：4.2.1
*   Eclipse 插件 PyDev：2.7.1
*   Jython：2.5.3

在运行测试时，我希望它**在第一次断言失败时失败。**

缩短的测试脚本：

```
if __name__ == '__main__':
#    unittest.main()

    mDevice = getConnection()
    runner = unittest.TextTestRunner()
    suite = unittest.TestSuite()

    #----------------------------------------------
    suite0001 = unittest.TestLoader().loadTestsFromTestCase(Test_TEST0001)
    suite.addTest(suite0001)    

    runner.run(suite) 
```

我已经阅读了有关在此讨论中设置一些故障快速参数的信息：[How to use TextTestRunner class from Python unittest module in failfast mode?](https://stackoverflow.com/questions/8068216/how-to-use-texttestrunner-class-from-python-unittest-module-in-failfast-mode)

所以我尝试像这样设置这个参数：

```
 ...
    runner = unittest.TextTestRunner(failfast=True)
    ... 
```

但是，在运行脚本时，它会失败：

```
 File "c:\svnrepository\x\trunk\JythonProject\src\main.py", line 1361, in <module>
    runner = unittest.TextTestRunner(failfast=True)
TypeError: __init__() got an unexpected keyword argument 'failfast' 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:40:23.087

> -f, --failfast 在第一个错误或失败时停止测试运​​行。
> 
> 2.7 版新功能：添加了命令行选项 -b、-c 和 -f。

failfast 在 2.7 中添加，`monkeyrunner`使用 2.5。

# grails - 如何将响应阅读器分配给从 httpbuilder 到控制器的变量

> ID：14729777
> 
> 赞同：2
> 
> 时间：2013-02-06T13:03:21.410
> 
> 标签：grails, groovy, httpbuilder

```
static def lemp(String aKey,String userName,String tType){
        def temp
         try {
           def ret = null
           def http = new HTTPBuilder("http://192.168.1.10:8080/Pay-0.1/main/msgPicTemp")
           http.parser.'text/html' = http.parser.'text/plain'
           http.request(Method.GET, ContentType.TEXT) {
               uri.query = [ appKey:appKey, userName:userName,tempType:tempType]
               headers.'User-Agent' = 'Mozilla/5.0 Ubuntu/8.10 Firefox/3.0.4'
               response.success = { resp,reader -> println resp.status

            println reader.text
                temp=reader.text//i got error here,how to assign this to one variable and pass it to controller
                 }
               response.failure = { resp -> println "Unexpected error: ${resp.status} : ${resp.statusLine.reasonPhrase}" }
           }

          return temp
       } catch (groovyx.net.http.HttpResponseException ex) {
           ex.printStackTrace()
           return null
       } catch (java.net.ConnectException ex) {
           ex.printStackTrace()
           return null
       }
   } 
```

这里阅读器给出的代码如下，

```
 <link rel="stylesheet" href="/Pay-0.1/static/css/bootstrap.css" type="text/css">
    <div align="left" style="background-color:#B8B8B8;width:150px">
    </div>
    Welcome 
```

如何将此阅读器分配给一个变量并返回到控制器。我想从控制器显示这一页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:56:01.283

我相信问题出在你的`println reader.text`. 从流中读取会关闭流。所以你的下一行，设置变量是行不通的。删除`println reader.text`，看看是否还有问题

# java - Hbase 读取性能异常变化

> ID：14729779
> 
> 赞同：0
> 
> 时间：2013-02-06T13:03:23.687
> 
> 标签：java, hadoop, hbase

我已经安装了 HBase 0.94.0。我必须通过扫描来提高我的阅读性能。我已经随机插入了 100000 条记录。

当我设置`setCache(100);`我的性能是 16 秒 100000 条记录。

当我将其设置`setCache(50)`为 100000 条记录时，我的性能为 90 秒。

当我将它设置为`setCache(10);`我的性能是 16 秒 100000 条记录

```
public class Test {
    public static void main(String[] args) {

    long start, middle, end;

    HTableDescriptor descriptor = new HTableDescriptor("Student7");
    descriptor.addFamily(new HColumnDescriptor("No"));
    descriptor.addFamily(new HColumnDescriptor("Subject"));

    try {   
    HBaseConfiguration config = new HBaseConfiguration();
    HBaseAdmin admin = new HBaseAdmin(config);

    admin.createTable(descriptor);
            HTable table = new HTable(config, "Student7");
            System.out.println("Table created !");

    start = System.currentTimeMillis();

    for(int i =1;i<100000;i++) {
        String s=Integer.toString(i);
        Put p = new Put(Bytes.toBytes(s));
        p.add(Bytes.toBytes("No"), Bytes.toBytes("IDCARD"),Bytes.toBytes("i+10"));
        p.add(Bytes.toBytes("No"), Bytes.toBytes("PHONE"),Bytes.toBytes("i+20"));
        p.add(Bytes.toBytes("No"), Bytes.toBytes("PAN"),Bytes.toBytes("i+30"));
        p.add(Bytes.toBytes("No"), Bytes.toBytes("ACCT"),Bytes.toBytes("i+40"));
        p.add(Bytes.toBytes("Subject"), Bytes.toBytes("English"),Bytes.toBytes("50"));
        p.add(Bytes.toBytes("Subject"), Bytes.toBytes("Science"),Bytes.toBytes("60"));
        p.add(Bytes.toBytes("Subject"), Bytes.toBytes("History"),Bytes.toBytes("70"));

        table.put(p);
    }
    middle = System.currentTimeMillis();

    Scan s = new Scan();
    s.setCaching(100);      
    ResultScanner scanner = table.getScanner(s);

    try {
        for (Result rr = scanner.next(); rr != null; rr=scanner.next()) {
            System.out.println("Found row: " + rr);
        }
        end = System.currentTimeMillis(); 
    } finally {
        scanner.close();
    }       
        System.out.println("TableCreation-Time: " + (middle - start));
        System.out.println("Scan-Time: " + (middle - end));
    } catch (IOException e) {
        System.out.println("IOError: cannot create Table.");
        e.printStackTrace();
        }
    }
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:42:04.217

为什么要返回 100000 条记录表中的每条记录？您正在进行全表扫描，就像在任何大型数据库中一样，这很慢。

尝试考虑一个更有用的用例，您希望在该用例中返回记录的某些列或记录范围。

HBase 的表上只有一个索引，即行键。好好利用它。尝试定义行键，以便您只需指定行键即可获取所需的数据。

假设您想知道`Subject:History`行键在 80000 到 80100 之间的行的值。（请注意，这`setCaching(100)`意味着 HBase 将在每个 RPC 中获取 100 条记录，因此是这种情况。获取 100 行显然需要更多内存而不是获取，比方说，一行。在大型多用户环境中请记住这一点。）

```
Long start, end;
start = System.currentTimeMillis();

Scan s = new Scan(String.valueOf(80000).getBytes(), String.valueOf(80100).getBytes());
s.setCaching(100);
s.addColumn("Subject".getBytes(), "History".getBytes());

ResultScanner scanner = table.getScanner(s);
try {
    for (Result rr = scanner.next(); rr != null; rr=scanner.next()) {
        System.out.println("Found row: " + new String(rr.getRow(), "UTF-8") + " value: " + new String(rr.getValue("Subject".getBytes(), "History".getBytes()), "UTF-8")));
    }
    end = System.currentTimeMillis(); 
} finally {
    scanner.close();
}       
System.out.println("Scan: " + (end - start)); 
```

这可能看起来很愚蠢，因为您如何仅通过一个整数就知道您需要哪些行？没错，但这就是为什么您需要根据要查询的内容来设计行键，而不是像在传统数据库中那样仅使用增量值。

试试这个例子。它应该很快。

注意：我没有运行示例。我只是在这里输入的。也许您应该纠正一些小的语法错误，但我希望这个想法很清楚。

# android - 无法在 Android 上使用 JaaudioTagger - NoClassDefFoundError 与 Jaaudio

> ID：14729782
> 
> 赞同：0
> 
> 时间：2013-02-06T13:03:45.780
> 
> 标签：android

在我的项目属性中，我将 Jaudiotagger.jar 添加为外部存档。Eclipse 检测它拥有的类。这是我的示例代码：

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
            Cursor cl = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
            cl.moveToPosition(position);
            String loc = cl.getString(cl.getColumnIndex(MediaStore.MediaColumns.DATA));
            try {
                AudioFile f  = AudioFileIO.read(new File(loc));
                Tag tag = f.getTag();
                AudioHeader h = f.getAudioHeader();
                Toast.makeText(this, tag.getFirst(FieldKey.ALBUM), Toast.LENGTH_SHORT).show();
            } 
            catch (Exception e){} 
```

当我单击任何列表项（实际上是一个音频文件）时，应用程序崩溃。这是 logcat 日志：

```
02-06 18:19:52.039: W/dalvikvm(32310): threadid=1: thread exiting with uncaught exception (group=0x40c751f8)
02-06 18:19:52.049: E/AndroidRuntime(32310): FATAL EXCEPTION: main
02-06 18:19:52.049: E/AndroidRuntime(32310): java.lang.NoClassDefFoundError: org.jaudiotagger.audio.AudioFileIO
02-06 18:19:52.049: E/AndroidRuntime(32310):    at com.niteesh.album.art.MainActivity.onListItemClick(MainActivity.java:51)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.widget.AbsListView.performItemClick(AbsListView.java:1181)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2709)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.widget.AbsListView$1.run(AbsListView.java:3464)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.os.Handler.handleCallback(Handler.java:605)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.os.Looper.loop(Looper.java:137)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at android.app.ActivityThread.main(ActivityThread.java:4511)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at java.lang.reflect.Method.invokeNative(Native Method)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at java.lang.reflect.Method.invoke(Method.java:511)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-06 18:19:52.049: E/AndroidRuntime(32310):    at dalvik.system.NativeStart.main(Native Method) 
```

我还添加`TagOptionSingleton.getInstance().setAndroid(true);`了 SO 的另一个线程中提到的内容。然后当我点击项目时，它说

`java.lang.NoClassDefFoundError: org.jaudiotagger.tag.TagOptionSingleton;`

有人可以帮助我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:51:49.517

您所做的允许编译 Eclipse 中的代码，但不会将 jar 文件添加到 APK。您需要在项目根目录中创建一个名为“libs”的目录并将 jar 文件添加到该目录。希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:37:06.023

Android 不支持 Java sound API，即使您手动将其添加到项目中，也可能会遇到命名空间问题。

# mysql - 当表中存在变音符号时，“SELECT”选择错误的行

> ID：14729783
> 
> 赞同：2
> 
> 时间：2013-02-06T13:03:49.670
> 
> 标签：mysql, utf-8

表'textconstraint'（collat​​ion utf8_general_ci）的结构如下：

```
+-----+---------+
| id  | pattern |
+-----+---------+
|  11 | Ä       |
|  27 | A       |
+-----+---------+ 
```

当我查询

```
SELECT * FROM textconstraint WHERE pattern = 'A' LIMIT 1; 
```

选择了以下行

```
+----+---------+
| id | pattern |
+----+---------+
| 11 | Ä       |
+----+---------+ 
```

为什么`A-umlaut`选择而不是`A`？

PS我愿意`SET NAMES UTF8`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:22:29.653

你可以试试这个：

```
SELECT *
FROM textconstraint
WHERE pattern = BINARY 'A' 
```

看到[这个小提琴](http://sqlfiddle.com/#!2/3dd8d/4)。

# mysql - 选择评分最高的用户

> ID：14729786
> 
> 赞同：0
> 
> 时间：2013-02-06T13:03:51.947
> 
> 标签：mysql, doctrine-orm, symfony-2.1

我有一个存储用户给出的评分的表。

例如：

```
UserId  Rating
 3            1  
 3            2
 1            1
 1            2
 1            3
 1            4
 2            1
 2            23
 2            4 
```

我需要检索评分最大次数的 10 个用户。

例如：

```
 1 rated 4 times
 2 rated 3 times
 3 rated 2 times... 
```

知道如何使用 mysql 编写查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:04:56.087

您必须按用户 ID 分组，计算分组的行数，并按降序排列，然后将查询限制为 10 行：

```
SELECT userID, count(*) times
FROM users
GROUP BY userID
ORDER BY times DESC
LIMIT 10 
```

如果您需要完全如上所示的输出，请尝试以下操作：

```
SELECT CONCAT_WS(' ', userID, 'rated', count(*), 'times')
FROM users
GROUP BY userID
ORDER BY count(*) DESC
LIMIT 10 
```

看到[这个小提琴](http://sqlfiddle.com/#!2/4b228/3)。

# android - 配置eclipse使用我自己的Android SDK（framework.jar）

> ID：14729793
> 
> 赞同：1
> 
> 时间：2013-02-06T13:04:09.337
> 
> 标签：android, eclipse, android-source, android-framework

我为我的设备制作了一个自定义的 framework.jar。这个新框架包括一个我想在我的应用程序中使用的新 API。不幸的是，除了我在 java 构建路径中包含了我自己的 framework.jar 之外，eclipse 没有看到我的新 API 并引发编译时错误。如何配置 eclipse 以使用我的自定义 framework.jar 而不是 android SDK 中的 jar？

[编辑]

基于@Yuri 的回答和其他一些见解，我创建了一个工具（实际上它是一个shell 脚本）来在android SDK 中创建一个新平台并将jar 文件合并到其中。它可以在 XDA 论坛下载以及使用说明：http: [//forum.xda-developers.com/showthread.php?t=2619775](http://forum.xda-developers.com/showthread.php?t=2619775)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:28:55.217

要构建 SDK，您应该运行以下命令：

```
make update-api
make sdk 
```

由于 Android 的 API 已被修改，该命令`make update-api`添加了新的 API。该命令在文件夹`make sdk`中创建 SDK 。`out`

然后要开始使用新的 SDK 在 Eclipse 中开发您的应用程序，您应该添加这个新的 SDK。有 2 种可能性可以做到这一点。第一个来自“嵌入式Android”一书。我将在这里复制它：

> 假设您已经使用[http://developer.android.com上的说明为 Android 开发配置了 Eclipse](http://developer.android.com)，您需要执行两个额外的步骤才能使用新构建的 SDK。首先，您需要告诉 Eclipse 新 SDK 的位置。为此，请转到 Window→Preferences→Android，在“SDK Location”框中输入新 SDK 的路径，然后单击 OK。另外，由于在撰写本文时作者并不完全清楚，您还需要转到 Window→“Android SDK Manager”，将“ Tools”并单击“Install 2 packages...” 完成后，您将能够使用新 SDK 创建新项目并访问您在其中公开的任何新 API。如果您不执行第二步，您将能够创建新的 Android 项目，但它们都不能正确解析 Java 库，因此永远不会构建。

至于这里的第二个是：

1.  Find you new build sdk zip (for Linux it cab be found here `out/host/linux-x86/sdk/`)
2.  Unzip this pack into a folder
3.  Inside this folder you can find the directory which is called `platforms/android-2.3.3`
4.  Rename folder `android-2.3.3` to `<your_name>`
5.  Copy this folder into the following location of the installation of your SDK Manager: `android-sdk-linux/platforms`
6.  Find inside this folder file `build.prop` and assign to the property `ro.build.version.sdk` any negative number: `ro.build.version.sdk=-10`
7.  Now run SDK Manager and you'll notice that you new sdk is added. Simply create new Eclipse project and select this sdk as a target.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:06:32.980

试试这个：

*   在您的项目中创建新的 floder 将 floder name="libs"
*   并在此处包含库。
*   并运行应用程序
*   我希望它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T10:38:24.543

This is a good question! Your tip would be useful for Android Studio users as well, I guess.

Just FYI, for IntelliJ users, you can also do this:

1.  Project Settings > Modules > click Dependencies tab > click "+" button > select "JARs or Directories"
2.  Find the .jar and choose it
3.  Move the .jar on top of the list of Dependencies (even before the SDK)
4.  Change the scope to 'Provided' (not 'Compile')

By step 4, you can avoid making a huge .dex. (Your apk will not include the framework.jar.)

# ruby-on-rails - 在 Ruby on Rails 中读取标头数据

> ID：14729795
> 
> 赞同：116
> 
> 时间：2013-02-06T13:04:17.157
> 
> 标签：ruby-on-rails, api, http-headers

我正在制作一个 API，其中 Facebook 登录的访问令牌将通过标头数据发送。

如何从标头中读取这些数据？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-02-06T13:08:00.680

```
request.headers["Content-Type"] # => "text/plain" 
```

将“Content-Type”替换为您要阅读的标题的名称。

Rails 4.2 更新

在 Rails 4.2 中有两种获取它们的方法： 旧方法（仍在工作）：

```
request.headers["Cookie"] 
```

新方法：

```
request.headers["HTTP_COOKIE"] 
```

获取包含请求的所有标头的哈希。

```
request.headers 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-02-10T21:13:12.120

Rails 现在将 HTTP_ 附加到标头，并将其转换为全部大写，因此它现在是：

```
request.headers["HTTP_CONTENT_TYPE"] 
```

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2016-07-05T14:47:51.273

获取在控制器中使用的实际**http**标头的哈希值。`@_headers`

# sql-server - 在 Windows Azure 中运行专用 SQL Server VM

> ID：14729800
> 
> 赞同：0
> 
> 时间：2013-02-06T13:04:27.313
> 
> 标签：sql-server, azure

我读过，如果你想运行一个专用实例（而不是使用 Azure SQL），你可以支付每小时的费用来许可 Windows Azure VM 上的 SQL Server。但是，当我创建运行 SQL Server 的 VM 时，图像库中只有评估版可用。我在 VM 创建过程中看不到任何选项来为 SQL Server 添加额外的每小时许可证。这在哪里玩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:15:59.880

这是 Windows Azure 上的虚拟机仍处于预览阶段的结果。据我所知 - 在预览版中，只有 SQL 的评估副本是正式可用的，并且不收取额外费用。我怀疑当 IaaS 进入 GA 时这会改变。

你可以[在这里阅读](https://www.windowsazure.com/en-us/pricing/details/#header-3)

# python - 如何改变 ndb 重复属性？

> ID：14729801
> 
> 赞同：10
> 
> 时间：2013-02-06T13:04:28.540
> 
> 标签：python, google-app-engine, google-cloud-datastore

appengine 文档在重复的 ndb 属性上说：

> 更新重复属性时，您可以为其分配一个新列表或更改现有列表。

[https://developers.google.com/appengine/docs/python/ndb/properties#repeated](https://developers.google.com/appengine/docs/python/ndb/properties#repeated)

两个问题：

1.  当我只是改变列表而不是放置一个新列表时，我应该保存写操作吗？

2.  我该如何做突变？只需在列表中附加对象并删除项目，就像我在 python 中使用列表一样？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T17:32:55.467

是的，你的想法是正确的。

1.  不，您不保存，因为它仍然是具有应用成本的写入操作。
2.  是的，完全一样。像普通列表一样添加、删除等。

# ios - 如何在ios中正确读取pdf中的中文

> ID：14729803
> 
> 赞同：0
> 
> 时间：2013-02-06T13:04:33.343
> 
> 标签：ios, pdf, localization

这是我所做的，但它看起来很混乱。提前致谢。

**1.使用CGPDFStringCopyTextString**从pdf中获取文本

2.将NSString编码为char*

```
NSStringEncoding enc = CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingGB_18030_2000);
const char *char_content = [self.currentData cStringUsingEncoding:enc]; 
```

以下是我如何获取 currentData：

```
void arrayCallback(CGPDFScannerRef inScanner, void *userInfo)
{
  BIDViewController *pp = (__bridge BIDViewController*)userInfo;
  CGPDFArrayRef array;
  bool success = CGPDFScannerPopArray(inScanner, &array);
  for(size_t n = 0; n < CGPDFArrayGetCount(array); n += 1)
  {
      if(n >= CGPDFArrayGetCount(array))
          continue;
      CGPDFStringRef string;
      success = CGPDFArrayGetString(array, n, &string);
      if(success)
      {
          NSString *data = (__bridge NSString *)CGPDFStringCopyTextString(string);
          [pp.currentData appendFormat:@"%@", data];
      }
  }
}
 - (IBAction)press:(id)sender {
    table = CGPDFOperatorTableCreate();
    CGPDFOperatorTableSetCallback(table, "TJ", arrayCallback);
    CGPDFOperatorTableSetCallback(table, "Tj", stringCallback);
    self.currentData = [NSMutableString string];
    CGPDFContentStreamRef contentStream = CGPDFContentStreamCreateWithPage(pagerf);
    CGPDFScannerRef scanner = CGPDFScannerCreate(contentStream, table, (__bridge void *)(self));
    bool ret = CGPDFScannerScan(scanner);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:46:27.223

根据[Mac Developer Library](http://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CGPDFString/Reference/reference.html) `CGPDFStringCopyTextString` *返回一个 CFString 对象，该对象将 PDF 字符串表示为文本字符串*。PDF 字符串以 a 的形式给出，`CGPDFString`它是*一系列字节 - 范围为 0 到 255 的无符号整数值*；因此，此方法已经根据某些字符编码对字节进行解码。

它没有明确给出，因此它假定一种编码类型，最有可能是**PDFDocEncoding**或**UTF-16BE** Unicode 字符编码方案，这两种编码可用于表示*文档内容流之外的*PDF 文档中的文本字符串，cf . [PDF 规范中的](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 7.9.2.2 节*文本字符串类型*和表 D.1，附件D。

现在你还没有告诉我们你从哪里收到你的`CGPDFString`. 不过，我假设您是从*文档的一个内容流中*收到的。另一方面，那里的文本字符串可以用任何可以想象的编码进行编码。使用的编码由要显示字符串的字体的嵌入数据给出。

有关这方面的更多信息，您可能需要阅读[CGPDFScannerPopString 返回奇怪](https://stackoverflow.com/questions/13998640/cgpdfscannerpopstring-returning-strange-result/13998859)的结果并查看[PDFKitten](https://github.com/KurtCode/PDFKitten)。

# c# - 错误：Windows 7 64 位机器上的 80040154

> ID：14729805
> 
> 赞同：0
> 
> 时间：2013-02-06T13:04:34.300
> 
> 标签：c#, windows, 64-bit, runtime-error

我在 Windows 7 32 位机器上使用 VS2010 创建了 Windows 应用程序。它在我的生产机器上运行良好。

但是，当我在客户端的服务器上安装此应用程序时，它会生成错误“System.Runtime.InteropServices.COMException (0x80040154)：检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因如下错误：80040154。”

客户的机器是widows 7 64bit。

我正在使用 dll 来处理 word、excel 和 pdf。

请帮助我摆脱这个问题。我被这个问题困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:22:44.960

汉斯解决方案（[https://stackoverflow.com/a/4021887/2019288](https://stackoverflow.com/a/4021887/2019288)）

> 失败的原因并不多，尤其是 regsvr32 步骤。在该 dll 上运行 dumpbin /exports。如果您没有看到 DllRegisterServer，那么您的安装已损坏。它应该有更多的副作用，您将无法再构建 C/C++ 项目。
> 
> 一种标准故障模式是在 64 位操作系统上运行它。这是 32 位非托管代码，您确实会得到“类未注册”异常。项目 + 属性，构建选项卡，将平台目标更改为 x86。

# ios - 应用程序无法删除存折通行证

> ID：14729806
> 
> 赞同：0
> 
> 时间：2013-02-06T13:04:35.100
> 
> 标签：ios, passbook

我已经以正常方式实现了 Passbook，它在开发和测试期间完美运行。但是在 AppStore 上可用的应用程序只能创建和添加一个通行证，而不能删除之前创建的一个通行证。

以下是在哪个开发阶段起作用的简要概述：

```
 Simulator     Ad-Hoc Build     AppStore-Build
Creation of Pass       X              X                  X 
Updating               X              X                  X      
Removing               X              X                  - 
```

这意味着在每个步骤中都可以创建、更新和删除通行证，但在最终的 AppStore-Build 中我无法删除通行证。

我发现请求 [PKPassLibrary passWithPassTypeIdentifier:serialnumber:] 在尝试删除通行证之前返回 nil。但是在尝试更新通行证时，相同的方法会返回有效通行证。

有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T08:55:46.353

您是否确保已将 passbook 功能添加到您的应用程序，并且您已将 passbook 添加到开发门户中的应用程序 ID？在添加功能之前，我发现了同样的事情。现在它工作正常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T19:50:59.690

您无法使用您的应用程序从 Passbook 中删除通行证。在用户将通行证添加到 Passbook 后，它就不再是“您的”了。您可以发送推送通知，说明通行证不再有效 - 但您无法远程或通过应用程序将其删除。

# sql-server - 如何在sql中检索外键列值

> ID：14729810
> 
> 赞同：-2
> 
> 时间：2013-02-06T13:04:50.647
> 
> 标签：sql-server

我有一个表“组”，它有组 ID（主键）、组名称、传感器 ID（外键）、单位 ID。Units ID 是对 Sensor 表的外键引用。

尽管，

从组中选择 *

给我一个答案

组 ID、组名称、传感器 ID、单元 ID。

但我想从组表中的传感器表中获取相应的传感器 ID 的传感器名称和单位 ID 的单位名称。

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:06:13.430

您可以使用联接：

```
select * from Group
left join Sensors ON Group.SensorId = Sensors.Id 
```

# java - 日期格式 SQL

> ID：14729816
> 
> 赞同：2
> 
> 时间：2013-02-06T13:05:02.107
> 
> 标签：java, mysql, sql, date, resultset

我有一个名为 Abbonamento 的表，它具有以下属性：

```
Abbonamento(idAbbonamento, tipo, DataInizio, DataScadenza, ....) 
```

DataInizio 和 DataScadenza 属于`DATE`. 当我在此表上进行选择时，问题就出现了：

```
 String queryAbb = "select idabbonamento, tipo, DATE_FORMAT(datainizio,'%d-%m-%Y'), DATE_FORMAT(datascadenza,'%d-%m-%Y'), ...;
                       prest = con.prepareStatement(queryAbb);
        rs = prest.executeQuery();
        while (rs.next()) {
            a=new Abbonamento();
            a.setIdAbbonamento(rs.getInt(1));
            a.setTipo(rs.getString(2));
            a.setDataInizio(rs.getDate(3));
            System.out.println(rs.getDate(3)); 
            a.setDataScadenza(rs.getDate(4));
            ...
        } 
```

现在，例如，如果数据库中的 DataInizio 日期是`2013-11-05 00:00:00`我想要的，`05-11-2013`但 println 打印`0004-10-13`。

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:16:52.740

代替

```
rs.getDate(3) 
```

你应该使用

```
rs.getString(3) 
```

因为数据已经格式化为字符串。如果您想获取 as `Date`，首先，从您的字符串创建一个 Date 对象`05-11-2013`，然后您会收到它。

如果您的对象中有`Date`对象，您应该返回与您从数据库返回的*格式相同*`parse()`的字符串，或者*让 JDBC*为您进行转换（在这种情况下，简单地）而不进行格式化。**`select idabbonamento, tipo, datainizio, ...`**

 **我建议让 JDBC 来做。更少的用户代码，更少的麻烦:)

```
String queryAbb = "select idabbonamento, tipo, datainizio, datascadenza, ...";
...
a.setDataInizio(rs.getDate(3));
// reading the formatted data:
System.out.println(new SimpleDateFormat().format(a.getDataInizio()); 
```

实际上，还有一个技巧，但你不必关心：`rs.getDate()`returns `java.sql.Date`，但你可能会使用`java.util.Date`. 这不是问题，因为 java.sql.Date 是 java.util.Date 的子类，所以这个赋值是完全有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:12:28.957

试试这个：

```
select idabbonamento, tipo, convert(char(10), datainizio, 105).... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:19:54.400

以独立于数据库的方式，您可以使用[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html). 例如：

```
java.util.Date date = rs.getDate(3);
String dateFormatted = (new java.text.SimpleDateFormat()).format(date);
a.setDataInizio(dateFormatted); 
```**

# asp.net-mvc - 为什么 WebSecurity.Logout *immediately* 不将 IPrincipal.User 更新为空用户

> ID：14729818
> 
> 赞同：4
> 
> 时间：2013-02-06T13:05:06.653
> 
> 标签：asp.net-mvc, security, forms-authentication

*首先，重要的是要注意，在我的应用程序中，如果您注销您的会话仍然有效，并且您不会只是被重定向回登录页面，而是留在同一页面上。*

话虽如此 - 我使用这两种方式中的任何一种在 MVC 应用程序中注销

```
FormsAuthentication.SignOut()
WebSecurity.Logout() 
```

效果是一样的，如果我立即访问它们，以下属性都不会更改以反映注销：

```
User.Identity.Name
Thread.CurrentPrincipal.Identity 
```

现在 - 如果我进行重定向，或者只是重新加载页面，那么显然这些属性将更新为空用户。他们只是没有立即表示`User.Identity.Name`代表刚刚注销的用户。

这是一个问题，因为我想`You are logged in as XXX`在登录/注销后生成表单的文本 - 这可能是在无法重定向的 AJAX 情况下。

我很好奇是否有任何方法可以`IPrincipal`在注销（或登录）后触发重置。

我假设人们通常只是`Redirect()`在`Logout()`通话之后，所以这从来都不是问题，但在 AJAX 情况下，这并不总是实用的。

我当前的解决方案是在我自己的包装器中抽象身份，因此一旦我退出，我就可以更新它。我只是有点担心这可能会产生一些模糊的副作用，特别是如果有人`IPrincipal`直接访问而不是通过包装器访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T17:55:30.070

这是 ASP.NET 事件管道的核心限制，因为它与表单身份验证相关。这也使其容易受到重放攻击，如[知识库文章 900111](http://support.microsoft.com/kb/900111)中所述。在那篇文章中，他们引用了一种解决方案来使用存储有关登录用户的一些服务器端信息的成员资格提供程序。

成员资格提供程序似乎与您正在考虑采用的方法非常相似，我想知道您是否应该考虑使用内置的成员资格提供程序之一，或者编写您的自定义代码作为成员资格提供程序。这应该解决人们不理解该方法并直接调用 IPrincipal 的一些担忧。

您的“注销但留在同一页面上”使问题更加突出，但最终您只是发现了每个人在使用 ASP.NET 时遇到的相同的基本重放问题（但不是每个人都能解决它）。

[这个相关的问题](https://stackoverflow.com/questions/2117930/preventing-cookie-replay-attacks-in-asp-net-mvc)也可能会有所帮助。

# java - 如何计算表单中的下拉选项

> ID：14729822
> 
> 赞同：0
> 
> 时间：2013-02-06T13:05:21.957
> 
> 标签：java, javascript, pdf, drop-down-menu, count

我知道这很简单，但我对 JavaScript 了解不多，我无法解决这个问题。

我有一个包含 71 个下拉菜单的 PDF 表单。每个都有 4 个不同的选项。我已经输入了每个选项的导出值，但是我无法创建一个文本字段来计算选择了多少导出值 1（例如）。

我怎样才能用 JavaScript 写这个？

# android - 从 MapFragment 启动到 MapFragment / 按返回按钮会导致长时间黑屏

> ID：14729830
> 
> 赞同：0
> 
> 时间：2013-02-06T13:05:51.777
> 
> 标签：android, google-maps, google-maps-android-api-2, supportmapfragment

我已经在我的应用程序中实现了 Google Maps Android API v2。

目前我有一个由不同片段组成的活动：

```
public class MyTravelogueActivity extends SherlockFragmentActivity {
    int travelogueID;
    String placeID;
    boolean isTravelogue;
    Bundle b;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String checkStatus = "";

        b = getIntent().getExtras();
        if (savedInstanceState != null) {
            getSupportFragmentManager().popBackStack(null, getSupportFragmentManager().POP_BACK_STACK_INCLUSIVE);
            checkStatus = savedInstanceState.getString("statusCheck");

            b = savedInstanceState.getBundle("bundle");

       } 
        else {
            checkStatus = (String) b.get("status");

        }

        setContentView(R.layout.activity_frag);

        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        /*
        codes to add Fragment to ft
        */
        ft.commit();
    } 
} 
```

所以这需要我的 MapFragment 类...

```
public class TravelogueSEOPageFragment extends SherlockFragment {

    //............. codes
    public void Map(View view){
        if(hasConnection() == true){
            Bundle b = new Bundle();
            b.putInt("id", travelogueID);
            b.putString("currentlayoutview", currentview);
            FragmentTransaction ft = getSherlockActivity().getSupportFragmentManager().beginTransaction();
            TOnlineMapViewFragment mapfrag = TOnlineMapViewFragment.newInstance(b, place_list);
            ft.replace(R.id.container, mapfrag).addToBackStack(null).commit();
        }
    }
} 
```

我的问题是为什么在加载谷歌地图时，会出现一段时间的黑屏显示？完成查看地图后，单击返回按钮，黑屏显示时间更长。

我不确定我应该粘贴哪些其他代码来说明这个问题，所以如果我缺少任何代码以便更好地让我寻求解决这个现象的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:56:51.223

谷歌将其描述为“已知限制”。请参阅此处：[问题 4639](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4639)。有一个官方提出的解决方法，但这并不适用于所有情况。

# php - 将 Joomla 菜单项页面加载到模块位置

> ID：14729831
> 
> 赞同：0
> 
> 时间：2013-02-06T13:05:57.627
> 
> 标签：php, module, joomla2.5, menuitem, article

使用 Joomla 可以将模块加载到文章甚至其他模块中，但是是否也可以将菜单项页面加载到模块位置？

例如，我有一个显示联系人列表的菜单项，换句话说，每个人都添加到 Joomla 后端的联系人中。

我不希望将此联系人列表显示为实际页面，而是在模块或其他文章中显示，有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:12:08.660

可以在 Joomla 的任何地方添加模块。根据您想要包含它的位置，有不同的方法。

如果要在文章中添加模块，可以使用 loadmodule 占位符：{loadposition xx} //（其中 xx 是位置）

有关更多信息，请参阅此[http://docs.joomla.org/How_do_you_put_a_module_inside_an_article%3F](http://docs.joomla.org/How_do_you_put_a_module_inside_an_article%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T09:01:14.967

假设您的联系人列表是在一个组件中生成的，您还可以通过使用两个插件采取不同的方法：

*   [包括组件](http://extensions.joomla.org/extension/include-component)，和
*   [文章放置在任何地方](http://extensions.joomla.org/extension/article-placed-anywhere)

使用包含组件使用的语法从文章中调用组件的非 sef URL。接下来，使用 Articles Placed Anywhere 模块调用模块内的文章。

我一直在寻找与您相同的问题的答案，这最终将我拉向了不同的方向。我知道你的问题是很久以前发布的，但我想我还是会回答的。也许这只是部分答案，但我希望它有所帮助。

# wpf - 如何在 Telerik 控件的 Datagrid 中将列作为超链接

> ID：14729833
> 
> 赞同：2
> 
> 时间：2013-02-06T13:06:00.263
> 
> 标签：wpf, datagrid, telerik, telerik-grid

如何在数据网格中制作超链接列？

每当列绑定到网格时，网格中的列数据应包含超链接。

当我点击超链接时，我应该得到一个弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:46:50.153

在示例中，将 MyListOfItems 存根为列表，其中 SomeItemClass 的属性之一是“ItemName”，将模板化为超链接的示例列绑定到该列表。

```
<DataGrid ItemsSource="{Binding MyListOfItems}">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Click="UseThisMethodToLaunchPopup">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <TextBlock Text="{Binding ItemName}" TextDecorations="Underline"/>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:32:05.803

我专门为你写了一篇博文：http: [//blogs.telerik.com/michaelcrump/posts/13-02-12/showing-a-hyperlink-style-button-to-popup-a-new-window-in -radgridview-for-wpf](http://blogs.telerik.com/michaelcrump/posts/13-02-12/showing-a-hyperlink-style-button-to-popup-a-new-window-in-radgridview-for-wpf)

# java - 处理 ExecutionException 的原因

> ID：14729834
> 
> 赞同：7
> 
> 时间：2013-02-06T13:06:01.380
> 
> 标签：java, swingworker, executionexception

假设我有一个类定义了一大块要完成的工作，它可以产生几个检查异常。

```
class WorkerClass{
   public Output work(Input input) throws InvalidInputException, MiscalculationException {
      ...
   }
} 
```

现在假设我有某种可以调用此类的 GUI。我使用 SwingWorker 来委派任务。

```
Final Input input = getInput();
SwingWorker<Output, Void> worker = new SwingWorker<Output, Void>() {
        @Override
        protected Output doInBackground() throws Exception {
            return new WorkerClass().work(input);
        }
}; 
```

如何处理 SwingWorker 抛出的可能异常？我想区分我的工人类的异常（InvalidInputException 和 MiscalculationException），但是 ExecutionException 包装器使事情变得复杂。我只想处理这些异常——不应捕获 OutOfMemoryError。

```
try{
   worker.execute();
   worker.get();
} catch(InterruptedException e){
   //Not relevant
} catch(ExecutionException e){
   try{
      throw e.getCause(); //is a Throwable!
   } catch(InvalidInputException e){
      //error handling 1
   } catch(MiscalculationException e){
      //error handling 2
   }
}
//Problem: Since a Throwable is thrown, the compiler demands a corresponding catch clause. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T13:13:22.987

```
catch (ExecutionException e) {
    Throwable ee = e.getCause ();

    if (ee instanceof InvalidInputException)
    {
        //error handling 1
    } else if (ee instanceof MiscalculationException e)
    {
        //error handling 2
    }
    else throw e; // Not ee here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:15:38.500

您可以使用[丑陋的（智能？）hack](https://stackoverflow.com/a/13528805/829571)将 throwable 转换为未经检查的异常。优点是调用代码将接收工作线程抛出的任何异常，无论是选中的还是未选中的，但您不必更改方法的签名。

```
try {
    future.get();
} catch (InterruptedException ex) {
} catch (ExecutionException ex) {
    if (ex.getCause() instanceof InvalidInputException) {
        //do your stuff
    } else {
        UncheckedThrower.throwUnchecked(ex.getCause());
    }
} 
```

定义`UncheckedThrower`为：

```
class UncheckedThrower {

    public static <R> R throwUnchecked(Throwable t) {
        return UncheckedThrower.<RuntimeException, R>trhow0(t);
    }

    @SuppressWarnings("unchecked")
    private static <E extends Throwable, R> R trhow0(Throwable t) throws E {
        throw (E) t;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:08:15.420

尝试/多次捕获：

```
try {
    worker.execute();
    worker.get();
} catch (InterruptedException e) {
    //Not relevant
} catch (InvalidInputException e) {
    //stuff
} catch (MiscalculationException e) {
    //stuff
} 
```

或者使用`ExecutionException`包装器：

```
catch (ExecutionException e) {
    e = e.getCause();
    if (e.getClass() == InvalidInputException.class) {
        //stuff
    } else if (e.getClass() == MiscalculationException.class) {
        //stuff
    }
} 
```

或者，如果您希望将异常的子类视为其父类：

```
catch (ExecutionException e) {
    e = e.getCause();
    if (e instanceof InvalidInputException) {
        //stuff
    } else if (e instanceof MiscalculationException) {
        //stuff
    }
} 
```

# c# - 从 SQL CE 获取选择的行到 C#

> ID：14729839
> 
> 赞同：1
> 
> 时间：2013-02-06T13:06:06.237
> 
> 标签：c#, sql, sql-server-ce

我对 C# 比较陌生，并且正在开发一个与本地数据库（SQL Compact 3.5）通信的应用程序。我很擅长运行标准的选择语句——但在将这些数据导入 C# 时——我有点迷失了。

到目前为止，我有一个“删除”查询，它删除了所有名为“主”的行。现在我发现我实际上需要在删除这些行之前获取它们的 ID（出于数据库完整性目的）。我运行标准选择查询没有问题 - 我的问题是**将 SQL CE 中的行选择放入 C# 应用程序（使用数组或数据表或任何最合乎逻辑/最方便的方法）**。

这是我目前拥有的，但它只返回一个值，而不是一个选择：

```
string sql = "select listid from list where ShortDesc='Master'";
SqlCeCommand cmdGetOldMasterId = new SqlCeCommand(sql, DbConnection.ceConnection);
int oldKey = (int)cmdGetOldMasterId.ExecuteScalar();
Console.WriteLine("Old ID: " + oldKey); 
```

我需要能够对每个返回的行执行 foreach{ } 循环。有什么想法可以在 C# 中做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T13:09:46.140

如果您认为您的 sql 语句返回多于一行数据，则需要使用[SqlCeDataReader而不是 ExecuteScalar](http://msdn.microsoft.com/en-US/library/system.data.sqlserverce.sqlcedatareader%28v=VS.80%29.aspx)

```
string sql = "select listid from list where ShortDesc='Master'";
SqlCeCommand cmdGetOldMasterId = new SqlCeCommand(sql, DbConnection.ceConnection);
SqlCeDataReader reader = cmdGetOldMasterId.ExecuteReader();
while(reader.Read())
{
    Console.WriteLine(reader[0].ToString());
    // or, if your listid is an integer  
    // int listID = reader.GetInt32(0);   
} 
```

另一种可能性是使用[SqlCeDataAdapter](http://msdn.microsoft.com/en-US/library/system.data.sqlserverce.sqlcedataadapter%28v=vs.80%29.aspx)来填充 DataTable（这会降低性能，但如果您稍后需要以不同的方法处理数据，则更有用）

```
string sql = "select listid from list where ShortDesc='Master'";
SqlCeCommand cmdGetOldMasterId = new SqlCeCommand(sql, DbConnection.ceConnection);
SqlCeDataAdapter da = new SqlCeDataAdapter(cmdGetOldMasterId);
DataTable dt = new DataTable();
da.Fill(dt);

....
foreach(DataRow r in dt.Rows)
{
    Console.WriteLine(r["listid"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:09:13.670

`SqlCeCommand`有几种执行方法

*   `ExecuteNonQuery`- 执行不需要返回东西的sql
*   `ExecuteScalar`- 对于返回一个值的 SELECT 查询（不要与一行混合）
*   `ExecuteReader`- 对于返回 >=0 行的 SELECT 查询

[http://msdn.microsoft.com/en-us/library/182ax5k8.aspx](http://msdn.microsoft.com/en-us/library/182ax5k8.aspx)

```
var reader = cmdGetOldMasterId.ExecuteReader();

while(reader.Read()) 
{
  // reader[0], reader[1]...
} 
```

# google-apps-script - 谷歌应用脚 本html模板问题

> ID：14729845
> 
> 赞同：0
> 
> 时间：2013-02-06T13:06:24.480
> 
> 标签：google-apps-script

如何在谷歌应用程序脚本的 html 模板中使用在字符串中返回 html 的函数？

例如，这是我的 code.gs：

```
function doGet() {
  return HtmlService.createTemplateFromFile('test').evaluate();
}

function getHtml(){
  return "<b> hello there </b>";
} 
```

在我的 html 文件“test.html”中，我有以下内容：

```
<html>
 <?= getHtml() ?>
</html> 
```

你会看到结果是这样的：

![在此处输入图像描述](../Images/db876662d4166014b4f0473de6aa303e.png)

我怎样才能改变它，让它在那里以粗体显示你好，而不显示标签？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:22:09.233

使用强制打印：

```
 <?!= getHtml() ?> 
```

如此[处](https://developers.google.com/apps-script/guides/html/templates)所述。

# javascript - 未经身份验证从 javascript 访问 Google Analytics API 数据

> ID：14729850
> 
> 赞同：5
> 
> 时间：2013-02-06T13:06:36.673
> 
> 标签：javascript, google-analytics, google-analytics-api

我希望使用 Javascript 通过他们的 API 访问 Google Analytics 数据。基本上我想在网站上显示过去一周/一个月访问量最大的页面列表。我只能为此使用javascript。

[我在官方网站http://code.google.com/p/google-api-javascript-client/wiki/Samples#Google_Analytics_API](http://code.google.com/p/google-api-javascript-client/wiki/Samples#Google_Analytics_API)上找到了这个例子

有什么方法可以在没有身份验证的情况下访问 Google Analytics 数据？我需要以某种方式加载用户名/密码吗？明确地说，我希望一个网站（具有 Google Analytics 跟踪）从其自己的帐户加载分析数据。

我认为可能有一种方法可以公开某些数据，然后以某种方式查询......或者可能创建一个受限用户来访问它。我找不到任何例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T15:07:55.747

未经身份验证您无法访问 GA，原因与未经身份验证无法访问您的银行帐户的原因相同（因为这将允许其他人未经身份验证访问您的帐户，这可能会造成一些不便）。

Google 提供了一个通过 Javascript 访问 GA 的完整示例：[https](https://developers.google.com/analytics/solutions/articles/hello-analytics-api) ://developers.google.com/analytics/solutions/articles/hello-analytics-api 。但是我认为这不是您想要的（我认为您需要登录 Google 才能实际检索数据）。

但是，您可以使用 Google Apps 脚本将数据提取到 Google 电子表格中并将其嵌入到您的页面中（至少我认为这应该是安全的）。

更新：谷歌已经发布了[谷歌分析超级代理](https://developers.google.com/analytics/solutions/google-analytics-super-proxy)，允许安全地与公众共享分析数据。

# wpf - WPF - 放大滚动查看器内的图像，并相应调整滚动条

> ID：14729853
> 
> 赞同：26
> 
> 时间：2013-02-06T13:06:43.080
> 
> 标签：wpf, image-processing

我整理了一个简单的 WPF 应用程序来演示我遇到的问题。我的 XAML 如下：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="427" Width="467" Loaded="MainWindow_OnLoaded">
    <Grid>
        <ScrollViewer Name="MyScrollViewer" CanContentScroll="True">
            <Image Name="MyImage" HorizontalAlignment="Left" VerticalAlignment="Top" MouseWheel="UIElement_OnMouseWheel" MouseDown="MyImage_OnMouseDown" MouseUp="MyImage_OnMouseUp"/>
        </ScrollViewer>
    </Grid>
</Window> 
```

代码隐藏如下：

```
using System;
using System.Windows;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void UIElement_OnMouseWheel(object sender, MouseWheelEventArgs e)
        {
            var matrix = MyImage.RenderTransform.Value;

            if (e.Delta > 0)
            {
                matrix.ScaleAt(1.5, 1.5, e.GetPosition(this).X, e.GetPosition(this).Y);
            }
            else
            {
                matrix.ScaleAt(1.0 / 1.5, 1.0 / 1.5, e.GetPosition(this).X, e.GetPosition(this).Y);
            }

            MyImage.RenderTransform = new MatrixTransform(matrix);
        }

        private WriteableBitmap writeableBitmap;

        private void MainWindow_OnLoaded(object sender, RoutedEventArgs e)
        {
            var image = new WriteableBitmap(new BitmapImage(new Uri(@"C:\myImage.png", UriKind.Absolute)));

            MyImage.Width = image.Width;
            MyImage.Height = image.Height;

            image = BitmapFactory.ConvertToPbgra32Format(image);

            writeableBitmap = image;

            MyImage.Source = image;
        }

        private Point downPoint;
        private Point upPoint;

        private void MyImage_OnMouseDown(object sender, MouseButtonEventArgs e)
        {
            downPoint = e.GetPosition(MyImage);
        }

        private void MyImage_OnMouseUp(object sender, MouseButtonEventArgs e)
        {
            upPoint = e.GetPosition(MyImage);

            writeableBitmap.DrawRectangle(Convert.ToInt32(downPoint.X), Convert.ToInt32(downPoint.Y), Convert.ToInt32(upPoint.X), Convert.ToInt32(upPoint.Y), Colors.Red);
            MyImage.Source = writeableBitmap;
        }
    }
} 
```

我使用 Nuget 添加了 WriteableBitmapEx。如果你运行它，并将**myImage.png**替换为你计算机上实际图像的位置，你会发现一个看起来像这样的应用程序：

![应用程序](../Images/da08f017c3b0f54e368ee683d7c29b4b.png)

您可以在图像上绘制一个框，方法是单击要放置框的位置的左上角并拖动到要放置框的位置的右​​下角，您会得到一个红色矩形。您甚至可以使用鼠标中键放大，并近距离绘制一个矩形以获得更高的精度，这可以按预期工作。

问题是，当您使用鼠标中键滚动时，滚动条不会重新调整，这是我正在创建的程序的要求。我的问题是如何在图像放大时强制滚动查看器上的滚动条重新调整？

我确信它与 ScrollViewer 的 RenderTransform 属性有关，并且我需要在更新图像的 RenderTransform 属性的同时更新它（在 UIElement_OnMouseWheel 上），但我不确定该怎么做.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-06T13:52:08.657

您应该使用`LayoutTransform`而不是`RenderTransform`在您的图像上使用。

`RenderTransform`布局完成后发生并且仅是可视的。`LayoutTransform`在布局传递之前完成，因此可以通知`ScrollViewer`新尺寸。

有关更多信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T13:51:39.783

对于纯滚动，我宁愿使用 ScaleTransform，它应该相应地调整滚动条。如果它解决了您的问题，您可以尝试以下代码。

```
private double _zoomValue = 1.0;

private void UIElement_OnMouseWheel(object sender, MouseWheelEventArgs e)
{
  if (e.Delta > 0)
  {
    _zoomValue += 0.1;
  }
  else
  {
    _zoomValue -= 0.1;
  }

  ScaleTransform scale = new ScaleTransform(_zoomValue, _zoomValue);
  MyImage.LayoutTransform = scale;
  e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-04T22:53:26.020

假设您在 ViewBox_CanvasMain 中有一个 Canvas_Main，而后者又在 ScrollViewer_CanvasMain 中。您想通过转动鼠标滚轮进行放大，ScrollViewer 将自动调整偏移量，以便在放大/缩小期间保持该特征（在 Canvas_Main 中由鼠标指向）。它很复杂，但这里是鼠标滚轮事件处理程序调用的代码：

```
 private void MouseWheelZoom(MouseWheelEventArgs e)
    {
        if(Canvas_Main.IsMouseOver)
        {

            Point mouseAtImage = e.GetPosition(Canvas_Main); // ScrollViewer_CanvasMain.TranslatePoint(middleOfScrollViewer, Canvas_Main);
            Point mouseAtScrollViewer = e.GetPosition(ScrollViewer_CanvasMain);

            ScaleTransform st = ViewBox_CanvasMain.LayoutTransform as ScaleTransform;
            if (st == null)
            {
                st = new ScaleTransform();
                ViewBox_CanvasMain.LayoutTransform = st;
            }

            if (e.Delta > 0)
            {
                st.ScaleX = st.ScaleY = st.ScaleX * 1.25;
                if (st.ScaleX > 64) st.ScaleX = st.ScaleY = 64;
            }
            else
            {
                st.ScaleX = st.ScaleY = st.ScaleX / 1.25;
                if (st.ScaleX < 1) st.ScaleX = st.ScaleY = 1;
            }
            #region [this step is critical for offset]
            ScrollViewer_CanvasMain.ScrollToHorizontalOffset(0);
            ScrollViewer_CanvasMain.ScrollToVerticalOffset(0);
            this.UpdateLayout();
            #endregion

            Vector offset = Canvas_Main.TranslatePoint(mouseAtImage, ScrollViewer_CanvasMain) - mouseAtScrollViewer; // (Vector)middleOfScrollViewer;
            ScrollViewer_CanvasMain.ScrollToHorizontalOffset(offset.X);
            ScrollViewer_CanvasMain.ScrollToVerticalOffset(offset.Y);
            this.UpdateLayout();

            e.Handled = true;
        }

    } 
```

# c# - 运行引用 excel API 的 .net 应用程序的客户端是否需要安装 excel？

> ID：14729861
> 
> 赞同：0
> 
> 时间：2013-02-06T13:07:09.880
> 
> 标签：c#, .net, excel, com

更具体地说，我指的是 COM 组件 Microsoft.Office.Interop.Excel.dll。

如果客户没有在他们的计算机上安装 excel，.net 应用程序是否会在尝试访问 dll 时运行或崩溃？

此外，是否可以通过部署此 dll 的副本以及 .net 应用程序来解决任何可能的限制？（假设这样做是合法的。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:10:41.397

如果您使用 Excel COM Wrappers 并调用其中的任何函数，则必须在该计算机中安装 Excel。互操作 DLL 只是调用 Office 公开的 COM 服务器，事实上，如果您对此进行测试，肯定会在您的计算机中看到任务管理器中的 EXCEL.EXE 进程。

所以，是的，您需要安装 Excel 才能使互操作工作。

# jquery - SCRIPT438：对象不支持此属性或方法 - jQuery 中的错误

> ID：14729862
> 
> 赞同：0
> 
> 时间：2013-02-06T13:07:10.777
> 
> 标签：jquery

我在我的实时站点上遇到了问题，而在 Internet Explorer 中首次加载页面时，jQuery 将不会加载，并且会抛出错误“SCRIPT438：对象不支持此属性或方法”。当我重新加载页面时，此错误通常会消失。

这是我的代码：

```
<script type="text/javascript">
    jQuery(document).ready(function() {         
        jQuery(".item-473 a").hover(function() {
           jQuery('.menu_image').removeAttr('style').attr('style', 'background-image: url(/images/volunteers_navbar.png);');
            }, function() {
                jQuery('.menu_image').removeAttr('style').attr('style', 'background-image: url(/images/adults_navbar.png);');
            }); 
```

这是我的 HTML：

```
<ul class="nav-child unstyled small">
<div class="menu_image" style="background-image: url(/images/adults_navbar.png);"></div>
<li class="item-472">
<a href="/activities/adults">Adults</a>
</li>
<li class="item-473">
<a href="/activities/volunteers">Volunteers</a>
</li>
<li class="item-474">
<a href="/activities/children-schools">Children & Schools</a>
</li>
<li class="item-475">
<a href="/activities/clubs-coaches">Clubs & Coaches</a>
</li>
</ul> 
```

我已经尝试了一些事情，但我似乎无法阻止这个问题的发生。控制台说问题出在这一行：

```
jQuery(".item-473 a").hover(function() { 
```

有谁知道为什么会发生这种情况？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:10:06.617

只是想我会回答这个问题，以防其他人遇到这个问题。

我发现这个问题只在 Internet Explorer 10 中发生，当时我正在实现 jCycle Lite 和 NivoSlider 等 jQuery 库插件。

我发现用 if 语句包装我的 jQuery 函数调用消除了正在发生的问题并允许页面正确加载。

例如：

```
 jQuery('.banner_slideshow .bannergroup_banner_slider').nivoSlider({
                effect: 'random'
            }); 
```

变成：

```
if(jQuery('.banner_slideshow .bannergroup_banner_slider').length) {
            jQuery('.banner_slideshow .bannergroup_banner_slider').nivoSlider({
                effect: 'random'
            });
        } 
```

我不完全确定为什么这会导致 IE10 出现问题，但它已对问题进行了排序，因此希望对其他人有所帮助。

谢谢

# c# - 如何将 VSTS 编码的 Ui 脚本调用到 QTP？

> ID：14729864
> 
> 赞同：7
> 
> 时间：2013-02-06T13:07:13.133
> 
> 标签：c#, vb.net, visual-studio-2010, coded-ui-tests, qtp

我正在尝试在 QTP 上执行我的编码 UI 脚本。首先，我为我的 Coded UI 项目创建了一个 dll，后来我能够从该 dll 访问方法，但我无法访问 Coded UI 测试方法。示例：以下脚本在 VSTS 中的 C# 中

```
namespace TestProject1
{
    using System;
    using System.Collections.Generic;
    using System.Drawing;
    using System.Windows.Input;
    using System.Windows.Forms;
    using System.CodeDom.Compiler;
    using System.Text.RegularExpressions;
    using Microsoft.VisualStudio.TestTools.UITest.Extension;
    using Microsoft.VisualStudio.TestTools.UITesting;
    using Microsoft.VisualStudio.TestTools.UnitTesting;
    using Keyboard = Microsoft.VisualStudio.TestTools.UITesting.Keyboard;
    using Mouse = Microsoft.VisualStudio.TestTools.UITesting.Mouse;    
    using MouseButtons = System.Windows.Forms.MouseButtons;
    using Microsoft.VisualStudio.TestTools.UITesting.WinControls;
    using Microsoft.VisualStudio.TestTools.UITesting.HtmlControls;
    using Microsoft.VisualStudio.TestTools.UITesting.WpfControls;

    public partial class UIMap
    {
        public int MyInteger()
        {
            return 9;
        }
        public string testDll()
        {
            return "Test DLL Factory";
        }
        public void add1()
        {
            MessageBox.Show("Sravan");

        }
        public void DeletePhoto()
        {
            WinWindow window = new WinWindow();
            window.SearchProperties[WinWindow.PropertyNames.Name] = "Cyramed";
            window.SearchProperties.Add(new PropertyExpression(WinWindow.PropertyNames.ClassName, "WindowsForms10.Window", PropertyExpressionOperator.Contains));

            WinWindow c_window = new WinWindow(window);
            c_window.SearchProperties[WinWindow.PropertyNames.ControlName] = "PICTUREBOX1";
            c_window.WindowTitles.Add("Cyramed");
            c_window.DrawHighlight();

            WinClient c_client = new WinClient(c_window);
            c_client.WindowTitles.Add("Cyramed");
            c_client.DrawHighlight();

            Mouse.Click(c_client, MouseButtons.Right);
            Keyboard.SendKeys("{DOWN}");
            Keyboard.SendKeys("{DOWN}");
            Keyboard.SendKeys("{DOWN}");
            Keyboard.SendKeys("{ENTER}");

        }        
    }
} 
```

我可以调用`MyInteger`and`testDll`方法，但是当我调用该`DeletePhoto`方法时，它会引发错误：`"Could not load file or assembly 'Microsoft.VisualStudio.TestTools.UITesting, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified."`

我主要关心的是：我也想在 QTP 上执行 Coded UI 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:17:14.957

您可能必须在 QTP 测试代理上安装 Visual Studio 测试代理。这些将删除机器上的二进制文件。

[VS 2010 测试代理](http://www.microsoft.com/en-us/download/details.aspx?id=1334)

[VS 2010 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

# python - Python RuntimeError: 关键字列表条目 (5) 多于格式说明符 (1)

> ID：14729868
> 
> 赞同：1
> 
> 时间：2013-02-06T13:07:28.607
> 
> 标签：python, raspberry-pi, raspbian

我正在尝试用 Python 为我的 Raspberry Pi 开发一个简单的 Sound2Light 应用程序。我正在使用 Ian Halpern ( [https://github.com/ianhalpern/Impulse](https://github.com/ianhalpern/Impulse) )编写的 Impulse Library

但是，我首先尝试从音频阵列脉冲中提取 3 个值（Sub、Mid、Hi）。

这是代码：

```
#!/usr/bin/env python

import sys, os, time

import impulse

def draw ( ):
    fft = True

    audio_sample_array = impulse.getSnapshot( fft )

    if fft:
        ffted_array = list( audio_sample_array )

        # start drawing spectrum

        red = 0
        green = 0
        blue = 0

        for i in range(0,20):
            blue += ffted_array[i]      

        for i in range(21,41):
            green += ffted_array[i]     

        for i in range(42,62):
            red += ffted_array[i]       

        print red,
        print blue,
        print green

    return False

def main(args):
    try:
        while True:
            draw()
            time.sleep(1)
    except KeyboardInterrupt:
        pass

    return True

if __name__ == '__main__':

    try:
        import ctypes
        libc = ctypes.CDLL('libc.so.6')
        libc.prctl(15, os.path.split( sys.argv[ 0 ] )[ 1 ], 0, 0, 0)
    except:
        pass

    sys.exit( main( sys.argv ) )
    main( sys.argv ) 
```

但是，此代码在我的笔记本电脑上完美运行（archlinux x64 python 2.7）

```
[felix@felix-think impulse]$ python2 --version
Python 2.7.3 
```

但无法在我的 Rapsberry Pi 上运行（运行 Raspbian）

```
pi@raspberrypi ~/music2light $ python --version
Python 2.7.3 
```

这是错误消息

```
pi@raspberrypi ~/music2light $ python main.py 
Traceback (most recent call last):
  File "main.py", line 56, in <module>
    sys.exit( main( sys.argv ) )
  File "main.py", line 40, in main
    draw()
  File "main.py", line 21, in draw
    for i in range(0,20):
RuntimeError: More keyword list entries (5) than format specifiers (1) 
```

我试图用谷歌搜索它，但一无所获......我唯一发现的是，错误是由 getargs.c 文件引发的（[http://svn.python.org/projects/python/branches/ release27-maint/Python/getargs.c](http://svn.python.org/projects/python/branches/release27-maint/Python/getargs.c) )

```
if (IS_END_OF_FORMAT(*format)) {
        PyErr_Format(PyExc_RuntimeError,
                     "More keyword list entries (%d) than "
                     "format specifiers (%d)", len, i);
        return cleanreturn(0, freelist);
    } 
```

在此先感谢您的帮助:) 菲利克斯

# c# - 当 Liskov Substitution 提到子类型时，它是在谈论 C# 上下文中的派生类吗？

> ID：14729870
> 
> 赞同：6
> 
> 时间：2013-02-06T13:07:34.363
> 
> 标签：c#, oop, solid-principles

[看了维基百科的文章](http://en.wikipedia.org/wiki/Liskov_substitution_principle)后，我对“子类型”这个词不熟悉。

我用 Liskov 替换的意思是，如果你有一个采用 的方法`Animal`，你应该能够在没有任何意外副作用`Cat`的情况下传入 a 或`Animal`where 。`Cat : Animal`

这就是 Liskov 替换所指的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:11:53.983

确切地。任何带有 Animal 的东西都应该能够带有 Dog、Cat 和子类（品种，如果你喜欢的话）。这些方法将是兼容的。

还要注意，在子类型中不能加强前置条件，也不能削弱后置条件。否则，您可以插入特定的子类型，这会中断，因为周围的代码施加了子类无法容忍的某些先决条件。这在实践中可能很难实现 - 有关更多信息，请参阅[圆/椭圆问题](http://en.wikipedia.org/wiki/Circle-ellipse_problem)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:11:10.767

是的。Likov 的替换原则指出，如果程序模块正在使用 Base 类，那么对 Base 类的引用可以替换为 Derived 类，而不会影响程序模块的功能。

# php - 使用 jquery 突出显示弹出部分

> ID：14729871
> 
> 赞同：1
> 
> 时间：2013-02-06T13:07:39.027
> 
> 标签：php, jquery, html, css, jquery-ui

这是我的代码，但我仍然没有得到我期望的输出。

```
<head>
    <script>
        function overlay()
        {
            $("body").css ({
                "background" : "#fff",
                "z-index"    : "999",
                "opacity"    : "0.50",
                "position"   : "relative",
            });
            $("#popupContact").css ({
                "position"   : "relative",
                "z-index" : "999",
                "opacity"    : "1"
            });
        }
    </script>
</head>
<body>
   <div id="popupContact">
       <h1>Sample Test</h1>
   </div>
<a onclick="return overlay();">Click to view</a>
</body> 
```

如果我点击它`<a>`，将打开一个弹出窗口，那时我想将弹出分区显示为突出显示并且正文应该是暗淡的..

任何有用的答案将非常感激..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:21:21.547

问题是您的孩子 div`popupContact`继承了`body`不透明度

因此，一种可能的解决方法是使用它而不是`background:#fff`

用这个`background-color: rgba(0,0,0,0.5);`

```
<head>
    <script>
    function overlay()
    {
        $("body").css ({
            "background-color" : "rgba(0,0,0,0.5)",
            "z-index"    : "999",
            "position"   : "relative",
        });
        $("#popupContact").css ({
            "background-color" : "rgba(200,200,200,1)",
            "position"   : "relative",
            "z-index" : "9919",
            "opacity"    : "1"
        });
    }
    </script>
</head>
<body>
   <div id="popupContact">
       <h1>Sample Test</h1>
   </div>
<a onclick="return overlay();">Click to view</a>
</body> 
```

这是小提琴 [http://jsfiddle.net/XFn67/的链接](http://jsfiddle.net/XFn67/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:13:32.973

您可以使用 z-indexes 在弹出窗口的“下方”添加某种容器 div。所以你最终会得到这样的结果：

```
<div id="popupContainer"></div>
<div id="popupContact">
    <h1>Sample Test</h1>
</div>
<a onclick="return overlay();">Click to view</a> 
```

popupContainer 和 popupContact id 应该有一些 css 属性来填满整个屏幕并将弹出窗口放在容器上方。

```
#popupContainer {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px;
  right: 0px;
  z-index: 10;
  background-color: #000;
  opacity: .5;
}

#popupContact {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 300px;
  height: 250px;
  margin-left: -150px;
  margin-top: -125px;
  z-index: 11;
} 
```

并且该`overlay`功能应更改为：

```
function overlay() {
  $('#popupContainer, #popupContact').toggle();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:15:38.787

尝试使用“背景颜色”，你也有一个尾随逗号。

# html - 跨度 - 与文本框相同的行为？

> ID：14729878
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:07:59.783
> 
> 标签：html, css

我如何使用具有类似文本框行为的文本来编程跨度？

我真正想要的是：一个大小不变的跨度，文本对齐是左，但如果文本长于跨度宽度，文本 lign 向右更改，溢出被隐藏。

这是我得到的：

```
<span style="width: 250px; height: 30px; overflow:hidden;">example text</span> 
```

当然，这只有在示例文本以某种方式可以更改时才有意义。是否可以在没有 javascript 的情况下完成这种对齐更改？纯html和css？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:19:14.230

Spas 默认呈现为内联元素。内联元素不受宽度、高度或溢出设置的影响。您需要将其更改为显示为块（或内联块）：

```
<span style="width: 250px; height: 30px; overflow:hidden; display:block;">example text</span> 
```

# sql-server - 在 SQL Server 2008 中，如何计算不同值的行数

> ID：14729898
> 
> 赞同：2
> 
> 时间：2013-02-06T13:09:00.553
> 
> 标签：sql-server, sql-server-2008

表结构和数据为：

```
col a     col c count
107       0
107       0
107       0 
107       0
108       0 
```

我可以写什么选择语句来得到这个结果？我想计算“col a”值的数量。

```
col a    col c count
107      4
107      4
107      4
107      4
108      1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:15:51.797

您可以使用[`count() over()`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)语法：

```
select cola,
  count(cola) over(partition by cola) CountColC
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/624ed/4)

```
| COLA | COUNTC |
-----------------
|  107 |      4 |
|  107 |      4 |
|  107 |      4 |
|  107 |      4 |
|  108 |      1 | 
```

如果您想使用此数据执行更新，您将使用：

```
;WITH cte AS
(
    SELECT cola, 
       colc, 
       count(cola) over(partition BY cola) CountC
    FROM yourtable
)
UPDATE cte
SET colc = countc; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/624ed/12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:14:04.477

你可以使用这个：

```
select tableName.col_a, cnt
from tableName inner join
(
  select col_a, count(col_a) as cnt
  from tableName
  group by col_a
) tmp on tableName.col_a = tmp.col_a 
```

在更新查询中使用此方法：

```
update tableName set col_a = cnt
from
(
  select col_a, count(col_a) as cnt
  from tableName
  group by col_a
) tmp
where tableName.col_a = tmp.col_a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:13:29.893

如果可以删除重复的条目，这将起作用：

```
SELECT cola, COUNT(1)
FROM TABLE1
GROUP BY cola 
```

这将返回：

```
    可乐可乐
    107 4
    108 1

```

# php - $_POST 在 PHP 中没有返回任何内容

> ID：14729905
> 
> 赞同：0
> 
> 时间：2013-02-06T13:09:15.027
> 
> 标签：php, post

我在 inc 文件夹中有 _header.tpl 这里是完整路径 C:\WebServerN\home\localhost\www\e-test.ru\inc\templates\default_header.tpl 在 _header.tpl 我添加

```
 <td width="85%" align=right class=top_section> 
              <form action="init.inc.php" method='post'>
              <select name="switchlanguage" id="switchlanguage"> 
              <option value="en" >English</option>
              <option value="ru" >Русский</option>
              <option value="tj" >Точики</option> 
              </select> 
        </form>
        </td> 
```

为了使下拉列表框用于语言切换。我想要的是得到“en”、“ru”、“tj”，如果他们被选中的话。我有 init.inc.php 这里是完整路径 C:\WebServerN\home\localhost\www\e-test.ru\inc\init.inc.php 我想根据选择的值切换代码。这是我在 init.inc.php 中的代码

```
if(!isset($_POST['switchlanguage']))
  {
  include_once($DOCUMENT_LANG.'en.lng.php');
  }
  else
  {
  include_once($DOCUMENT_LANG.$_POST['switchlanguage'].'.lng.php');
  } 
```

我是 PHP 新手，我需要你的帮助。请给我一些指导，或者如果您提供一些代码会更好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:15:21.357

问题是我没有提交按钮。为了获得 $_POST 我需要以某种方式提交表单。因此，由于设计问题，我无法使用按钮。我使用了自动提交。这是我的代码。

```
<td width="85%" align=right class=top_section> 
          <form  method='post'>
          <select name="switchlanguage" onchange="this.form.submit()"> 
          <option value="en" >English</option>
          <option value="ru" >Русский</option>
          <option value="tj" >Точики</option> 
          </select> 
    </form>
</td> 
```

就是这样！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T13:16:55.137

删除您在所有选项标签末尾给出的所有分号。所以你的代码应该如下所示。

```
<td width="85%" align=right class=top_section> 
          <form action="init.inc.php" method='post'>
          <select name="switchlanguage" id="switchlanguage"> 
          <option value="en" >English</option> 
          <option value="ru" >Русский</option> 
          <option value="tj" >Точики</option> 
          </select> 
    </form>
    </td> 
```

现在检查一下。

# java - 如何使用 Guava 连接两个表

> ID：14729906
> 
> 赞同：1
> 
> 时间：2013-02-06T13:09:14.393
> 
> 标签：java, join, guava

事实表：

```
Id Year Month countryId Sales
1  1999 1     1         3000
2  1999 2     1         2300
3  2000 3     2         3999
4  2000 4     3         2939 
```

尺寸表：

```
Id country province
1  US      LA
2  US      CA
3  US      GA
4  EN      LN 
```

我像这样使用番石榴表：

```
Table<Integer, String, Object> table = Tables.newCustomTable(
        Maps.<Integer, Map<String, Object>> newLinkedHashMap(),
        new Supplier<Map<String, Object>>() {
            public Map<String, Object> get() {
                return Maps.newLinkedHashMap();
            }
        });

    table.put(1, "Year", 1999);
    table.put(1, "Month", 1);
    table.put(1, "countyId", 1);
    table.put(1, "Sales", 3000);
    // ...... etc

    table1.put(1, "county", "US");
    table1.put(1, "provice", 1999);
    // ...... 
```

我想实现一个`LEFT JOIN`类似的：

```
1 1999 1 1 3000 US LA
2 1999 2 1 2300 US LA
3 2000 3 2 3999 US CA
4 2000 4 3 2939 EN LN 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:36:53.583

Guava`Table`不应该像任何 SQL 的表一样使用，因为它是一个集合。SQL 的表被设计为可索引、可排序、可过滤等。Guava`Table`只有其中的一小部分，而且只是间接的，并且关节不是其中的一部分（除非您使用转换）。

您需要做的是让您的两个表并遍历元素`table`并在`table1`.

在你的情况下，我相信你最好用一个`List`替换`table`和一个番石榴`Table`来代替`table1`. 遍历列表并在获取元素时制作最终对象。

# c# - Libtiff - 不同的 BitsPerSample - 有效或错误的 tiff 标签？

> ID：14729907
> 
> 赞同：3
> 
> 时间：2013-02-06T13:09:14.517
> 
> 标签：c#, libtiff, libtiff.net

我们遇到了一些 TIFF 图像，它们是类型 6 OJPEG 压缩的，许多具有相同的 BitsPerSample “8 8 8”并且工作正常。

但是，有时我们会看到 BitsPerSample 值为“8 25608 0”的那些。我想知道这是否可能，如果不是，它是否是生成 TIFF 的系统中的错误。如果可以通过简单地修改标签来修复它们，那么 BitsPerSample 是“8 8 8”吗？

目前，我只找到了一种工具（LEAD），可以通过将它们转换为未压缩的 TIFF 来处理它们，显然我不知道它是如何做到这一点的，而且仅解决一小部分图像的问题是一个很大的开销。

有没有人遇到过这个问题或者比我更了解解决这个问题是简单还是复杂，到目前为止，我在 Libtiff.net 代码中四处寻找的尝试并没有取得很大的成果！

干杯

更新：使用 litiff.net 与这样简单的东西：

```
 static void Main(string[] args)
    {
        using (Tiff image = Tiff.Open(args[0], "r"))
        {
            FieldValue[] value = image.GetField(TiffTag.IMAGEWIDTH);
            int width = value[0].ToInt();

            Console.WriteLine(string.Format("Width = {0}", width));
        }
    } 
```

结果（显然跳过了异常处理！）：

ReadDirectory：警告，10.TIF：遇到标签为 33000 (0x80e8) 的未知字段 10.TIF：无法处理字段“BitsPerSample”的不同每个样本值

未处理的异常：System.NullReferenceException：对象引用未设置为对象的实例。在 C:\tiffstuff\tifftest\tifftest\Program.cs:line 15 中的 tifftest.Program.Main(String[] args) 分段错误

我现在让它绕过检查并假设“BitsPerSample”为 8，但是我现在尝试使用 bitmiracle 网站上的示例提取图像以另存为 BMP：

```
 using (Bitmap bmp = new Bitmap(width, height, PixelFormat.Format24bppRgb))
            {
                Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);

                BitmapData bmpdata = bmp.LockBits(rect, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
                byte[] bits = new byte[bmpdata.Stride * bmpdata.Height];

                for (int y = 0; y < bmp.Height; y++)
                {
                    int rasterOffset = y * bmp.Width;
                    int bitsOffset = (bmp.Height - y - 1) * bmpdata.Stride;

                    for (int x = 0; x < bmp.Width; x++)
                    {
                        int rgba = raster[rasterOffset++];
                        bits[bitsOffset++] = (byte)((rgba >> 16) & 0xff);
                        bits[bitsOffset++] = (byte)((rgba >> 8) & 0xff);
                        bits[bitsOffset++] = (byte)(rgba & 0xff);
                    }
                }

                System.Runtime.InteropServices.Marshal.Copy(bits, 0, bmpdata.Scan0, bits.Length);
                bmp.UnlockBits(bmpdata);

                bmp.Save("c:\\tiffstuff\\TiffTo24BitBitmap.bmp");
            } 
```

我显然收到了 OJPEG 警告，然后是以下内容：OJPEGReadHeaderInfoSecTablesQTable: Missing JPEG tables

生成的图像只是 100% 的绿色。

在解决这个问题方面，我是否离我的深度太远了？我知道 JPEG 就在某个地方似乎无法获取并成功解压缩:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:21:57.257

25608 的位深度绝对是错误的。JPEG 压缩从不使用每像素 8 位以外的位深度。还有其他图像格式可以使用每像素 16 位甚至 32 位，但对于任何普通应用程序来说，这已经是最高的了。

在JPEG中有RGB图像，即“8 8 8”，CMYK图像，即“8 8 8 8”，和单色图像，即。“8”。

图像可能是 CMYK，而您使用的软件不支持它。在这种情况下，您需要将它们转换为 RGB 才能与该软件一起使用。

如果图像是 RGB，那么标签就是损坏了，修复它会使图像正常工作。（当然假设没有其他任何东西也被破坏了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:19:16.333

文件似乎是半损坏的。正如@Guffa 提到的，对于 OJPEG 文件，每个样本值的位数应该是`8 8 8`(RGB) 或`8 8 8 8`(CMYK)

不幸的是，LibTiff.Net 没有机会修复像`BITSPERSAMPLE`.

我看到的唯一选择是将此类文件的自动更正代码添加到库中。

给出错误的代码在`Tiff_DirRead.cs`文件中（在下面显示的三个位置）。

```
private bool fetchPerSampleShorts(TiffDirEntry dir, out short pl)
{
    ...
    for (ushort i = 1; i < check_count; i++)
    {
        if (v[i] != v[0])
        {
            ErrorExt(this, m_clientdata, m_name,
                "Cannot handle different per-sample values for field \"{0}\"",
                FieldWithTag(dir.tdir_tag).Name);
            failed = true;
            break;
        }
    }
    ...
}

private bool fetchPerSampleLongs(TiffDirEntry dir, out int pl)
{
    ...
    for (ushort i = 1; i < check_count; i++)
    {
        if (v[i] != v[0])
        {
            ErrorExt(this, m_clientdata, m_name,
                "Cannot handle different per-sample values for field \"{0}\"",
                FieldWithTag(dir.tdir_tag).Name);
            failed = true;
            break;
        }
    }
    ...
}

private bool fetchPerSampleAnys(TiffDirEntry dir, out double pl)
{
    ...
    for (ushort i = 1; i < check_count; i++)
    {
        if (v[i] != v[0])
        {
            ErrorExt(this, m_clientdata, m_name,
                "Cannot handle different per-sample values for field \"{0}\"",
                FieldWithTag(dir.tdir_tag).Name);
            failed = true;
            break;
        }
    }
    ...
} 
```

您可能会尝试删除`if (v[i] != v[0])`子句和相应的错误处理代码。我认为这将让您打开文件（如果其中没有其他问题）。

您可能想以某种方式转换或至少修补此类文件。

# entity-framework - EF 4.4 中的 DbContext 和导航属性

> ID：14729913
> 
> 赞同：1
> 
> 时间：2013-02-06T13:09:35.967
> 
> 标签：entity-framework, dbcontext

在将项目从 EntityObject 生成器切换到 DbContext 后，我​​在新对象上使用一些导航属性时遇到了问题。我已经花费了大量时间来研究这个问题，但我离理想的解决方案还差得远。

一、生成的类定义：

```
public partial class Category
{
    public Category()
    {
        this.Limits = new HashSet<Limit>();
    }

    public int CategoryId {get; set;}
    public string Name {get; set;}
    public virtual ICollection<Limit> Limits { internal get; set; }
}

public partial class Limit
{
    public int CategoryId {get; set;}
    public string Description {get; set;}
    internal virtual Category Category { get; set; }
} 
```

我正在使用以下代码在集成测试期间创建测试数据：

```
using (GFCAMDataContext db = new GFCAMDataContext())
{
    limit = new Limit()
    {
        CategoryId = testData.CategoryId,
        Description = "SignerController.Update"
    };

    db.Limits.Add(limit);
    db.SaveChanges();
} 
```

如果没有任何其他更改，我新创建的 Limit 对象的 Limit.Category 属性不会返回任何内容。但是，如果我在调用 SaveChanges 之前从 DbContext 查询所需的类别，我的新限制上的导航属性开始返回关联的类别。使用 ObjectContext，Category 属性会在我没有任何干预的情况下更新。

我希望有与 ObjectContext 相同的行为，但我似乎找不到实现这一目标的方法。我已经看到了几个建议的解决方案：

*   公开导航属性。这具有相同的行为，并且是不可取的，因为公共导航属性可能会在序列化过程中导致问题，并且在我的业务层之外不需要。

*   将所有属性设为公共虚拟并使用 DbSet.Create 来确保创建代理。这导致了相同的行为，并且不一定是可取的，因为我有代码动态创建实例（即在创建实体实例时我没有访问 DbSet 的权限）。

有没有人对解决这个问题有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:22:58.733

一种解决方案是显式加载嵌套实体：

```
db.SaveChanges();
db.Entry(person).Reference(z => z.Category).Load(); 
```

启用代理时，另一个选项确实是调用`DbSet.Create<T>()`. 如果您在创建实体时无权访问该`DbSet`实例，您可能希望在您的存储库接口中公开一个允许这样做的公共方法。例如：

```
public interface IRepository<T>
{
    T Add(T entity);

    T GetById(...);

    void SaveChanges();

    ...

    T CreateInstance(); // Concrete implementation have access to DbSet and uses DbSet.Create<T>()
} 
```

# mvvm - Knockoutjs 嵌套视图模型更新

> ID：14729915
> 
> 赞同：0
> 
> 时间：2013-02-06T13:09:48.597
> 
> 标签：mvvm, knockout.js, nested, viewmodel

我试图了解如何使用列出一些项目的小小提琴来嵌套 knockoutjs 视图模型，然后单击按钮，它会显示该项目的详细信息。然后，我有一个按钮，通过向每个项目添加 15 来更新每个项目的 Id 属性，但出于某种原因，它们最终具有相同的值。有人可以启发我吗？

谢谢！

[有问题的小提琴](http://fiddle.jshell.net/BigStef/xunne/27/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:43:50.440

这是您的`.Name`计算属性。Id 更改工作正常。

[http://fiddle.jshell.net/Y3JXD/1/](http://fiddle.jshell.net/Y3JXD/1/)

在第一次执行之后，闭包中的 in 始终是列表中的`item`最后一个。`item`请记住，每当可观察到的变化时，计算值都会更新。因此，在设置过程中的第一次，它和循环一样工作`item`得很好`item`。但是，闭包中捕获的只是`item`（第 15 项），而不是针对该特定循环实例的项。

**更新**：忘记了按照评论中的建议计算的第二个参数。

[http://fiddle.jshell.net/Y3JXD/1/](http://fiddle.jshell.net/Y3JXD/1/)

```
item.Name = ko.computed(function () { return 'Item_' + item.Id(); }, item); 
```

这是另一种将引用包装在闭包中并捕获正确`item`实例的技术（仅作为演示捕获正确范围所需发生的事情）。

```
self.loadItems = function () {
    for (var i = 0; i < 15; i++) {
        var item = ko.mapping.fromJS({
            Id: i
        });
        self.items.push(item);
        (function (item) {
            item.Name = ko.computed(function () {
                return 'Item_' + item.Id();
            });
        })(item);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:59:43.883

你能把`Name`房产搬到`itemModel`?

```
self.Name = ko.computed(function() { 
    return 'Item_' + self.Id();
}); 
```

在创建对象而不是在使用它时设置它似乎很奇怪。

# nsview - 如何在 NSTextfield 中创建 NSbutton

> ID：14729921
> 
> 赞同：2
> 
> 时间：2013-02-06T13:10:13.780
> 
> 标签：nsview, nstextfield, nsbutton, nstextfieldcell, nsbuttoncell

在我的应用程序中，我需要显示一个显示内容的标签，并且在标签的末尾我需要显示一个带有关闭图标的按钮，该按钮将执行一些操作。

任何人都可以建议如何做到这一点。

# php - Linux 上的 PHP Apache 配置

> ID：14729922
> 
> 赞同：0
> 
> 时间：2013-02-06T13:10:21.747
> 
> 标签：php, linux, apache, apache2, linux-mint

我在 Linux mint 中使用 Apache 2，但我不知道在哪里存储我的文件和项目。如果我将它存储在 var/www 中，我无法访问它，我必须以超级用户身份使用命令。有什么办法可以解决我的问题吗？- 如果我想存储在我的主文件夹中，如果我想运行我的文件，我应该在地址栏中输入什么？- 除了这些还有其他好的解决方案吗？（比如改变文件夹/var的可访问，或者改变apache的Root_Url ...）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-21T16:15:36.350

解决此问题的最简单方法是在终端中键入以下行：

`sudo chmod -R 777 /var/www`

然后输入您的密码。现在你完成了。您可以将所有 PHP 文件存储在 /var/www

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:17:14.077

您需要激活 apache 的 user_dir mod，然后从您的主文件夹运行内容。

要在你的洞目录中运行一个文件，你当然应该在启用 user_dir 之后转到 localhost/~youruser/script.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:36:36.480

实现此目的的一种方法是编辑随 Apache 2 提供的默认虚拟主机。在 Linux Mint 14 中，其配置文件位于：

/etc/apache2/启用站点/

这个目录应该包含所有活动站点的符号链接，对我来说，默认命名为 000-default。

将带有“DocumentRoot”和“Directory”的行更改为指向您喜欢的任何位置。默认情况下，服务器应该具有只读权限。如果您正在处理文件操作，那么它将需要读取和写入文件的权限。

设置完成后，重新启动服务器（“sudo service apache2 restart”）并在浏览器中键入 localhost 以访问您在上面设置的目录。

有关更高级的配置，请查看：

[http://community.linuxmint.com/tutorial/view/853](http://community.linuxmint.com/tutorial/view/853)

[http://community.linuxmint.com/tutorial/view/527](http://community.linuxmint.com/tutorial/view/527)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:12:53.123

您必须执行 chmod，您可以使用命令**man chmod**在终端中获取更多信息，以设置在该文件夹中写入的权限，或者将 Web 服务器指向其他位置（该设置位于 https.conf 文件中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T13:15:35.317

有不同的解决方案：

*   从 /var/www/link 创建一个符号链接到您的项目并设置您的项目
*   使用 DocumentRoot 创建一个虚拟主机以指向您的项目：[http ://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

在这两种情况下，您的项目都必须授予 apache 用户（www-data？）以读取/执行您的项目的权限

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T23:50:42.470

一切都取决于用途。

如果您正在寻找只能从受限主机（例如 localhost）访问的开发服务器的配置：

1.  您可以配置 Apache (/etc/apache2/apache2.conf) 以与您的用户/组一起运行。

`User myuser`

`Group mygroup`

1.  将所有项目存储在 user_dir (/home/myuser/projects/...)

2.  为您的任何项目创建虚拟主机

您可以访问您的服务器生成的所有文件，反之亦然

# r - Rgexf 动态节点属性

> ID：14729928
> 
> 赞同：0
> 
> 时间：2013-02-06T13:10:41.470
> 
> 标签：r, dynamic, attributes, gephi

我正在尝试使用 R 库 Rgexf 构建动态 gexf 图形文件。到目前为止它很棒，但我想添加随时间变化的节点属性。据我了解，gexf 格式支持这一点，但我不知道如何使用 R 库添加它。

rgexf 可以吗？如果不是，那将是另一种方法吗？我有一些基本的 python 知识，pygexf 会是一个更强大的替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:12:19.143

作为 rgexf 的作者/开发者，我可以告诉您，对于当前版本，无法处理法术或动态属性。下一个版本将（希望在接下来的两周内发布）。

现在您可以尝试使用 Paul Girard 的 pygexf（python 的 gexf）[https://github.com/paulgirard/pygexf](https://github.com/paulgirard/pygexf)，它支持拼写。

在这里，您将获得一个非常好的网络动态示例，其中包含拼写和动态属性[http://gexf.net/format/dynamics.html](http://gexf.net/format/dynamics.html)

如果您对图书馆有其他顾虑/建议，请随时通过 george [dot] vega [at] nodoschile.org 给我发送电子邮件。我会很感激。

最良好的祝愿

乔治·维加

# android - HTML表格到Android TableLayout

> ID：14729933
> 
> 赞同：0
> 
> 时间：2013-02-06T13:10:43.150
> 
> 标签：android, html, tablelayout, android-tablelayout

我有从服务器获取的 XML，并且有这样的 HTML 表：

```
<table>
    <tr>
        <td colspan="4">$kolumn1$</td>
    </tr>
    <tr>
        <td colspan="2">$kolumn2$</td>
        <td>$kolumn3$</td>
        <td>$kolumn4$</td>
    </tr>
    <tr>
        <td>$kolumn5$</td>
        <td colspan="3">$kolumn1$</td>
    </tr>
</table> 
```

现在，我想像这样创建 Android TableLayout：

```
<TableRow
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_span="4" />
</TableRow>

<TableRow
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_span="2" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="match_parent" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="match_parent" />
</TableRow>

<TableRow
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="match_parent" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_span="3" />
</TableRow> 
```

从 HTML 代码创建 TableLayout 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:18:07.277

尝试这个：

```
 I have to like create Relative layout inside the TableRow
 And put the components to Relative layout
 It's worked me. I hope this will be worked for you also.. 
```

# php - 预览 PHP 中的电子邮件开发

> ID：14729934
> 
> 赞同：4
> 
> 时间：2013-02-06T13:10:52.010
> 
> 标签：php, email, testing

一年一次或两次，我发现自己不得不开发复杂的电子邮件。它们通常包括纯文本和 Html 版本，以及附件和其他标题。

使用标准发送/接收预览开发过程非常缓慢和乏味。

我正在寻找的是一个本地测试平台，它处理邮件功能并提供邮件客户端样式预览，可以访问备用视图、标题等。或者可能是一个可以直接接收邮件的真实邮件客户端。

我已经搜索和搜索，但到目前为止没有运气，希望有人能指出我正确的方向。

提前致谢。TT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:20:14.290

我不确定这是否是您想要的，但您可以使用本地主机邮件并通过雷鸟访问它

[如何在 Thunderbird 中阅读本地电子邮件？- 询问 Ubuntu](https://askubuntu.com/questions/192572/how-read-local-email-in-thunderbird)

通过这种方式，您不必无休止地等待邮件送达，因为它是本地的。您可以在实际的邮件客户端中看到您发送的邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:16:43.317

我不知道任何软件，但我对以下在线服务有一些很好的经验：[http://litmus.com/](http://litmus.com/)它有点像 browserstack。（实时跨浏览器测试工具）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:18:44.077

我使用[Papercut](http://papercut.codeplex.com/)，它侦听 SMTP 端口，捕获所有电子邮件并显示标题、源代码、文本和 html 视图。它非常有用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T13:21:56.280

对于这样的任务，我使用[fakemail](http://www.lastcraft.com/fakemail.php)将邮件接收到 maildir 并使用[mutt](http://www.mutt.org/)来阅读邮件。Mutt 也可以配置为读取 HTML 邮件。

如果您只想记录电子邮件而不阅读它们，您可以使用[Chris Shiflett 的这篇文章](http://shiflett.org/blog/2007/dec/php-advent-calendar-day-1)中描述的“logmail”方法：

编辑：lastcraft.com 主机目前似乎已关闭，我在 Google 搜索“fakemail”时发现这个 Python 项目可能会有所帮助：[https ://github.com/isotoma/FakeEmail](https://github.com/isotoma/FakeEmail)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T08:06:48.233

我现在已经解决了这个问题。

在 php.ini 文件中，有一个选项可以为名为的邮件函数设置导出路径`sendmail_path`。

我将其设置为`tee mail.eml > /dev/null`，它现在将发送的邮件保存到与调用该函数的目录相同的目录中，我只需使用我的邮件客户端打开它。

> sendmail_path = tee mail.eml > /dev/null

对此有 2 条注释。

1.  这是仅适用于 Unix 平台的解决方案。
2.  必须设置文件扩展名以适合您选择的邮件客户端

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T13:31:16.967

如果您只是想预览您的 HTML 电子邮件（或者，如果您需要帮助设计它们），您可以注册一个免费的[MailChimp](http://mailchimp.com)帐户。它实际上是一个电子邮件发送服务，但他们也有一个拖放式电子邮件构建器的界面。

对于您的情况，您可以使用“自己编写代码”工具，放入您的 HTML、CSS、纯文本等，然后在各种电子邮件客户端中预览电子邮件，在不同的屏幕分辨率下进行测试等。

（*我不隶属于 MailChimp）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-20T06:59:25.833

您也可以尝试[https://github.com/ycecube/phpmaildebug](https://github.com/ycecube/phpmaildebug)。

它使用 php 的 sendmail 输出来捕获邮件。

# node.js - 如何编写自定义的 emitEvent 以在 socket.io 中进行处理？

> ID：14729937
> 
> 赞同：1
> 
> 时间：2013-02-06T13:10:53.423
> 
> 标签：node.js, websocket, socket.io, processing, processing.js

我正在使用 processing.js、node.js 和 socket.io 编写一个多人游戏。

问题一：

在客户端中，我使用 p5.js 创建了一个 Ball 类。我希望服务器发送参数以使用该类创建一个数组 (balls.push(new Ball(x, y));)，因此每个客户端都可以在画布上移动一堆球。

我知道我应该使用 socket.io 向客户端发出参数，但我不知道。通常数组是在 p5 内部的 setup 函数中创建的……那么 socket 怎么能做到这一点呢？

问题2：

客户端如何将 mouseX 和 mouseY 发送到服务器？那么服务器如何将其他人的mouseX和mouseY发送回每个客户端？

我尝试将 p5.js 变成普通的 js，如下所示：

```
 (function () {
            "use strict"; 
                function sketchProc(processing) {
                   var p=processing,
                   var ...,
                   var ...;

                   function ball(){...}

                   p.setup=function(){}
                   p.draw=function(){}
                    }

             var canvas = document.getElementById("canvas1"),
                p = new Processing(canvas, sketchProc);

               }()); 
```

但我不知道这是否有帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:23:55.087

球应仅在连接事件中传递给客户端。这就是节点的魅力所在，代码共享。

要创建套接字服务器，您可以使用节点的本机[Net](http://nodejs.org/api/net.html)模块或[Socket.io](https://github.com/learnboost/socket.io/)

**在服务器上：**

```
var server = net.createServer();
server.listen(PORT, HOST);
server.on('connection', function(socket) {    
    socket.write({ type: "BallsArray", data: BallsArray });
}); 
```

**在客户端上，您将 WebSockets 与 Socket.io 一起使用：**

```
var client = io.connect('http://localhost:3000');
var BallsArray = null;
client.on('message', function(msg) {
    if(msg.type == "BallsArray")
        BallsArray = msg.data; 
}); 
```

# winapi - 在 CreateProcess 之后是否需要关闭标准 I/O 的句柄？

> ID：14729940
> 
> 赞同：1
> 
> 时间：2013-02-06T13:11:13.653
> 
> 标签：winapi, createprocess

我`STARTUPINFO`在调用`CreateProcess`. 流程结束后是否需要打电话`CloseHandle`？`hStdError``hStdInput`

```
startupInfo.cb = sizeof(startupInfo);
startupInfo.cb = sizeof(si);
startupInfo.dwFlags = STARTF_USESTDHANDLES | STARTF_USESHOWWINDOW;
startupInfo.hStdInput = GetStdHandle(STD_INPUT_HANDLE);
startupInfo.hStdOutput =  NULL;
startupInfo.hStdError = GetStdHandle(STD_ERROR_HANDLE);
startupInfo.wShowWindow = SW_HIDE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:21:02.527

由于您没有打开这些句柄（不是`GetStdHandle` 这样），因此您不需要关闭它们（也许您出于其他原因*想要关闭它们，但不太可能）。*（注意：即使您*确实* 打开了句柄，也不必在关闭它们之前等待进程退出：一旦它们被继承，在父进程中关闭它们对子进程没有影响）。

请注意，`hStdOutput`应该是`INVALID_HANDLE_VALUE`而不是 `NULL`: 这是传递缺少句柄的约定`STARTUPINFO`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:21:19.380

对于“你需要吗？”这个问题。- 简单回答是不”。当一个进程结束时，所有连接到它的句柄都会在 Windows 操作系统中被销毁。如果你在一个进程中创建一个进程（我什至不想在 C 中尝试，但在 C# 中很简单），那么它会更安全确保子进程在（或on-）终止之前自行清理。

测试这一点的一种方法是在您终止父进程中的子进程后尝试访问您的句柄。

# android - TTS 语音速率在 android 的少数平板电脑中不起作用

> ID：14729941
> 
> 赞同：2
> 
> 时间：2013-02-06T13:11:14.070
> 
> 标签：android, text-to-speech

我创建了一个可以读取从 gmail 收到的邮件的应用程序。与平常相比，我想阅读的邮件很少。因此使用 TTS 称为语音速率，例如：

```
int spreechRate = 2.0;
talker = new TextToSpeech(this, this);
talker.setSpeechRate(speechRate); 
```

这在我的 Galaxy Nexus、Nexus 10 和 Samsung Galaxy tab 2 上也可以正常工作，但不适用于 Galaxy tab（旧）。

我需要在 Galaxy 选项卡中检查任何设置吗？对于两个正在工作的选项卡，我根本没有检查任何设置？

# python - 在 Sphinx 中将类和/或方法标记为已弃用

> ID：14729943
> 
> 赞同：24
> 
> 时间：2013-02-06T13:11:17.943
> 
> 标签：python, python-sphinx, deprecated

有没有办法在 Sphinx 中将类和/或方法标记为已弃用？我只能找到一个不推荐使用的模块选项。

使用通用警告会起作用，但不会带有语义含义。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-06T13:14:14.233

我想你正在寻找[`deprecated`](http://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directive-deprecated).

# asp.net - 获取错误消息“System.IO.FileFormatException：压缩部分的数据长度不一致”调用 XmlDocument.Load()

> ID：14729945
> 
> 赞同：0
> 
> 时间：2013-02-06T13:11:29.300
> 
> 标签：asp.net, openxml, openxml-sdk

我是 OpenXML 的新手，我正在尝试将图表数据导出到 powerpoint。在代码中，我尝试将其保存为 excel 文件，然后保存到 powerpoint，同时尝试单击导出按钮，它向我显示一条错误消息（写为前进）。这是我的代码。

```
 protected void btnExport_Click(object sender, EventArgs e)
    {

        try
        {
            // Open an existing Presentation

            PresentationDocument oPDoc = PresentationDocument.Open(@"D:\Chart.pptx", true);

            PresentationPart oPPart = oPDoc.PresentationPart;

            // Get the ReleationshipId of the first Slide

            SlideId slideId = oPPart.Presentation.SlideIdList.GetFirstChild<SlideId>();

            string relId = slideId.RelationshipId;

            // Get the slide part by the relationship ID.

            SlidePart slidePart = (SlidePart)oPPart.GetPartById(relId);

            // Add a new chart part

            ChartPart chPrt = slidePart.AddNewPart<ChartPart>();

            XmlDocument xDoc = new XmlDocument();

            String strFileName = "D:\\chart1.xml";

            xDoc.Load(strFileName);

            StreamWriter objDocMainWrt = new StreamWriter(chPrt.GetStream(FileMode.Create, FileAccess.Write));

            xDoc.Save(objDocMainWrt);

            // Add the data Sheet for the Chart

            ExtendedPart objEmbPart = chPrt.AddExtendedPart("http://schemas.openxmlformats.org/officeDocument/2006/relationships/package", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", ".xlsx");

            strFileName = "D:\\chartData.xlsx";

            FileStream partStream = new FileStream(strFileName, FileMode.Open, FileAccess.Read);

            objEmbPart.FeedData(partStream);

            // Change the Data releation ID used in Chart.xml

            // Elemenet changed : c:externalData

            string relChtDataID = chPrt.GetIdOfPart(objEmbPart);

            XmlNamespaceManager nsManager1 = new XmlNamespaceManager(xDoc.NameTable);

            XmlNamespaceManager nsManagerDraw = new XmlNamespaceManager(xDoc.NameTable);

            //nsManager1.AddNamespace("c", "http://schemas.openxmlformats.org/drawingml/2006/chart");

            nsManagerDraw.AddNamespace("d", "http://schemas.openxmlformats.org/drawingml/2006/chart");

            //XmlNodeList nodeTest = xDoc.SelectNodes("//c:externalData", nsManager1);
            XmlNodeList nodeTest = xDoc.SelectNodes("//d:chart1", nsManagerDraw);

            foreach (XmlNode node in nodeTest)
            {

                node.Attributes["r:id"].Value = relChtDataID;

            }

            // Save changes back to Chart.xml

            xDoc.Save(chPrt.GetStream(FileMode.Create, FileAccess.Write));

            // Get the SlidePart Stream

            const string presentationmlNamespace = "http://schemas.openxmlformats.org/presentationml/2006/main";

            NameTable nt = new NameTable();

            XmlNamespaceManager nsManager = new XmlNamespaceManager(nt);

            nsManager.AddNamespace("p", presentationmlNamespace);

            XmlDocument presXML = new XmlDocument(nt);

            presXML.Load(slidePart.GetStream());

            // Get the spTree Element in SlidePart

            XmlNode nodeTree = presXML.SelectSingleNode("//p:spTree", nsManager);

            string rid = slidePart.GetIdOfPart(chPrt).ToString();

            // Generate the Graphic Element for the Chart

            XmlNode childNode = GenerateNode(rid);

            //Append the Graphic Element to spTree Element in SlidePart

            nodeTree.AppendChild(presXML.ImportNode(childNode, true));

            Stream o = slidePart.GetStream();

            presXML.Save(o);

            oPDoc.Close();
        }
        catch (Exception msg)
        {
            Response.Write(msg.ToString());
        }
    }
private XmlNode GenerateNode(String rId)
    {

        XmlDocument xwb = new XmlDocument();

        xwb.AppendChild(xwb.CreateXmlDeclaration("1.0", "UTF-8", "yes"));

        XmlNamespaceManager xmlns = new XmlNamespaceManager(xwb.NameTable);

        xmlns.AddNamespace("p", "http://schemas.openxmlformats.org/presentationml/2006/main");

        xmlns.AddNamespace("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");

        xmlns.AddNamespace("a", "http://schemas.openxmlformats.org/drawingml/2006/main");

        XmlElement eleGraphic = xwb.CreateElement("p:graphicFrame", xmlns.LookupNamespace("p"));

        xwb.AppendChild(eleGraphic);

        XmlElement eleGrpFrm = xwb.CreateElement("p:nvGraphicFramePr", xmlns.LookupNamespace("p"));

        eleGraphic.AppendChild(eleGrpFrm);

        XmlElement elePpr = xwb.CreateElement("p:cNvPr", xmlns.LookupNamespace("p"));

        eleGrpFrm.AppendChild(elePpr);

        XmlAttribute attrRid = xwb.CreateAttribute("id");

        attrRid.Value = "4";

        elePpr.SetAttributeNode(attrRid);

        XmlAttribute attrName = xwb.CreateAttribute("name");

        attrName.Value = "Chart 2";

        elePpr.SetAttributeNode(attrName);

        XmlElement elecNvGraphicFramePr = xwb.CreateElement("p:cNvGraphicFramePr", xmlns.LookupNamespace("p"));

        eleGrpFrm.AppendChild(elecNvGraphicFramePr);

        XmlElement elenvPr = xwb.CreateElement("p:nvPr", xmlns.LookupNamespace("p"));

        eleGrpFrm.AppendChild(elenvPr);

        XmlElement elexfrm = xwb.CreateElement("p:xfrm", xmlns.LookupNamespace("p"));

        eleGraphic.AppendChild(elexfrm);

        XmlElement eleoff = xwb.CreateElement("a:off", xmlns.LookupNamespace("a"));

        elexfrm.AppendChild(eleoff);

        XmlAttribute xvalue = xwb.CreateAttribute("x");

        xvalue.Value = "1524000";

        eleoff.SetAttributeNode(xvalue);

        XmlAttribute yvalue = xwb.CreateAttribute("y");

        yvalue.Value = "1397000";

        eleoff.SetAttributeNode(yvalue);

        XmlElement eleext = xwb.CreateElement("a:ext", xmlns.LookupNamespace("a"));

        elexfrm.AppendChild(eleext);

        XmlAttribute cxvalue = xwb.CreateAttribute("cx");

        cxvalue.Value = "6096000";

        eleext.SetAttributeNode(cxvalue);

        XmlAttribute cyvalue = xwb.CreateAttribute("cy");

        cyvalue.Value = "4064000";

        eleext.SetAttributeNode(cyvalue);

        //<c:chart xmlns:c="http://schemas.openxmlformats.org/drawingml/2006/chart" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:id="rId2"/></a:graphicData></a:graphic></p:graphicFrame>

        XmlElement elegraphic = xwb.CreateElement("a:graphic", xmlns.LookupNamespace("a"));

        eleGraphic.AppendChild(elegraphic);

        XmlElement elegraphicData = xwb.CreateElement("a:graphicData", xmlns.LookupNamespace("a"));

        elegraphic.AppendChild(elegraphicData);

        XmlAttribute uri = xwb.CreateAttribute("uri");

        uri.Value = "http://schemas.openxmlformats.org/drawingml/2006/chart";

        elegraphicData.SetAttributeNode(uri);

        XmlElement elechart = xwb.CreateElement("c:chart", "http://schemas.openxmlformats.org/drawingml/2006/chart");

        elegraphicData.AppendChild(elechart);

        XmlAttribute id = xwb.CreateAttribute("r:id", xmlns.LookupNamespace("r"));

        id.Value = rId;

        elechart.SetAttributeNode(id);

        XmlNode ss1 = xwb.SelectSingleNode("//p:graphicFrame", xmlns);

        return ss1;

        //xwb.Save(@"C:\temp\test1.xml");
    } 
```

请让我知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:26:39.810

试试下面的代码，在此之前创建空的 ppt 模板和带有两个图表控件的 excel。

```
 string paramPresentationPath = @"D:\Chart.pptx";
            string paramWorkbookPath = @"D:\chartData.xlsx";
            object paramMissing = Type.Missing;

            powerpointApplication = new pptNS.Application();

            // Create an instance Excel.          
            excelApplication = new xlNS.Application();

            // Open the Excel workbook containing the worksheet with the chart
            // data.
            excelWorkBook = excelApplication.Workbooks.Open(paramWorkbookPath,
                            paramMissing, paramMissing, paramMissing,
                            paramMissing, paramMissing, paramMissing,
                            paramMissing, paramMissing, paramMissing,
                            paramMissing, paramMissing, paramMissing,
                            paramMissing, paramMissing);

            // Get the worksheet that contains the chart.
            targetSheet = (xlNS.Worksheet)(excelWorkBook.Worksheets[1]);//here 1 is sheet no.

            // Get the ChartObjects collection for the sheet.
            chartObjects = (xlNS.ChartObjects)(targetSheet.ChartObjects(paramMissing));

            // Get the chart to copy.
            existingChartObject = (xlNS.ChartObject)(chartObjects.Item("Chart Name in Excel"));

            // Create a PowerPoint presentation.
            pptPresentation = powerpointApplication.Presentations.Add(
                                Microsoft.Office.Core.MsoTriState.msoTrue);

            // Add a blank slide to the presentation.
            pptSlide = pptPresentation.Slides.Add(1, pptNS.PpSlideLayout.ppLayoutBlank);

            // Copy the chart from the Excel worksheet to the clipboard.
            existingChartObject.Copy();

            // Paste the chart into the PowerPoint presentation.
            shapeRange = pptSlide.Shapes.Paste();

            // Position the chart on the slide.
            shapeRange.Left = 30;
            shapeRange.Top = 100;

            // Width and Height on the Slide.
            shapeRange.Width = 600;
            shapeRange.Height = 400;

            ///<summary>
            ///Second Slide
            ///</summary>

            // Get the worksheet that contains the chart.
            targetSheet = (xlNS.Worksheet)(excelWorkBook.Worksheets[2]);

            // Get the ChartObjects collection for the sheet.
            chartObjects = (xlNS.ChartObjects)(targetSheet.ChartObjects(paramMissing));

            // Get the chart to copy.
            existingChartObject = (xlNS.ChartObject)(chartObjects.Item("Chart Name in excel"));

            //// Create a PowerPoint presentation.
            //pptPresentation = powerpointApplication.Presentations.Add(
            //                    Microsoft.Office.Core.MsoTriState.msoTrue);

            // Add a blank slide to the presentation.
            pptSlide = pptPresentation.Slides.Add(2, pptNS.PpSlideLayout.ppLayoutBlank);

            // Copy the chart from the Excel worksheet to the clipboard.
            existingChartObject.Copy();

            // Paste the chart into the PowerPoint presentation.
            shapeRange = pptSlide.Shapes.Paste();

            // Position the chart on the slide.
            shapeRange.Left = 30;
            shapeRange.Top = 100;

            // Width and Height on the Slide.
            shapeRange.Width = 600;
            shapeRange.Height = 400;

            // Save the presentation.
            pptPresentation.SaveAs(paramPresentationPath,
                            pptNS.PpSaveAsFileType.ppSaveAsOpenXMLPresentation,
                            Microsoft.Office.Core.MsoTriState.msoTrue);

            //pptPresentation.Close();

        }
        catch (Exception msg)
        {
            Response.Write(msg.ToString());
        }
        finally
        {
            shapeRange = null;
            pptSlide = null;

            object paramMissing = Type.Missing;

            // Close and release the Presentation object.
            if (pptPresentation != null)
            {
                pptPresentation.Close();
                Marshal.FinalReleaseComObject(pptPresentation);
                //Marshal.ReleaseComObject(pptPresentation.Slides);
                pptPresentation = null;
            }

            // Quit PowerPoint and release the ApplicationClass object.
            if (powerpointApplication != null)
            {
                powerpointApplication.Quit();
                Marshal.FinalReleaseComObject(powerpointApplication);
                powerpointApplication = null;
            }

            // Release the Excel objects.
            targetSheet = null;
            chartObjects = null;
            existingChartObject = null;

            //Close and release the Excel Workbook object.
            if (excelWorkBook != null)
            {
                excelWorkBook.Close(false, paramMissing, paramMissing);
                Marshal.FinalReleaseComObject(excelWorkBook);
                excelWorkBook = null;
            }

            // Quit Excel and release the ApplicationClass object.
            if (excelApplication != null)
            {
                excelApplication.Quit();
                Marshal.FinalReleaseComObject(excelApplication);
                excelApplication = null;

                //System.Runtime.InteropServices.Marshal.ReleaseComObject(excelApplication);
            }

            ////releaseObject(ref excelApplication);

            ////releaseObject(ref powerpointApplication);

            System.Diagnostics.Process[] excelprc = System.Diagnostics.Process.GetProcessesByName("EXCEL");
            if (excelprc.Length == 1)
            {
                excelprc[0].Kill();
            }

            System.Diagnostics.Process[] ppprc = System.Diagnostics.Process.GetProcessesByName("POWERPNT");
            if (ppprc.Length == 1)
            {
                ppprc[0].Kill();
            }

            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            GC.WaitForPendingFinalizers(); 
```

# java - icefaces ace:fileEntry 不起作用

> ID：14729948
> 
> 赞同：0
> 
> 时间：2013-02-06T13:11:36.133
> 
> 标签：java, icefaces, icefaces-3

对于我的 Web 应用程序，我想使用该`ace:fileEntry`组件。

我试过陈列柜，但它不起作用。没有错误。`fileEntryListener`永远不会被调用。该文件仍在上传（浏览器 sais），但该文件未存储在服务器上。

有什么已知的问题吗？

```
 <h:form id="fileUploadForm">

   <h:panelGrid id="fileUploadGrid" columns="2" width="100%" styleClass="textEntryInputTable">

   <ace:fileEntry id="fileEntryComp"
                                   label="File Entry"
                                   relativePath="uploaded"
                                   fileEntryListener="#{ticketDetailListBean.listener}"/>                            

       <h:commandButton id="submit" value="Datei uploaden" type="submit" styleClass="icebutton" />

       <h:message id="msg" for="fileUploadForm:fileEntryComp" infoClass="infoMessage" errorClass="errorMessage"/>
       <h:outputFormat value=""></h:outputFormat>

     </h:panelGrid>

 </h:form> 
```

属性“ `fileEntryListener`”可以设置为任何值。bean和方法是否存在都没关系。如果我引用一个不存在的 bean，则不会导致错误。这告诉我，从未使用过 Listener。

我正在使用`tomcat 7.0.34`并`icefaces 3.2.0.`尝试了自己的实现，但我仍然复制了 icefaces 展示的示例。两者都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T08:13:52.297

我有同样的问题，它解决如下：检查用 ace:panel 包裹的 fileEntry 标签

```
 <ace:panel>
    <ace:fileEntry id="signature-file-entry"
                   relativePath="/files/"
                   maxFileCount="1"
                   maxFileCountMessage="#{msg.concurrentFileUploadLimit}"
                   fileEntryListener="#{userManagement.signatureUploadListener}"
                   maxFileSize="6291456"
                   maxFileSizeMessage="#{msg.maxFileSizeMessage}"
                   maxTotalSize="18874368"
                   maxTotalSizeMessage="#{msg.maxTotalSizeMessage}"
                   required="true"
                   requiredMessage="#{msg.requiredMessage}"
                   useOriginalFilename="true"
                   useSessionSubdir="true"
                   tabindex="6"/>
    <ace:message for="signature-file-entry" showSummary="true" showDetail="false" />
    <h:commandButton value="#{msg.sendFile}" type="submit" id="uploadAFile" />
</ace:panel> 
```

检查您的 web.xml，它应该包含以下标签：

```
 <context-param>
       <param-name>org.icefaces.mandatoryResourceConfiguration</param-name>
       <param-value>fileEntry</param-value>
    </context-param> 
```

和

```
 <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/icefaces/*</url-pattern>
</servlet-mapping> 
```

# java - 使用 Hibernate 逆向工程创建 mappingResources 样式，但我需要 annotatedClasses

> ID：14729950
> 
> 赞同：1
> 
> 时间：2013-02-06T13:11:45.373
> 
> 标签：java, mysql, spring, hibernate

使用 Hibernate 逆向工程会创建 mappingResources 样式，但我需要 annotatedClasses。

无论如何要制作“Hibernate 逆向工程”来制作代码annotatedClasses 样式而不是mappingResources 样式？

我正在尝试使用大型 mySQL 数据库并制作带有注释的 java 类。

请让我知道是否有人这样做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:16:48.160

您可以使用[Hibernate Tools](http://www.hibernate.org/subprojects/tools.html)`Eclipse`插件来实现这一点。

看看这个[教程](http://www.mkyong.com/hibernate/how-to-generate-code-with-hibernate-tools/)。每个步骤都有解释。生成`.java`文件时，可以在`xml`文件和`JPA`注释之间进行选择。

要生成注释，请检查`Generate EJB3 annotations`并`Use Java 5 syntax`

![在此处输入图像描述](../Images/a15f7e279009e4bb9ec7a8c8253b1fbc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:20:41.577

首先，您需要将注释支持添加到项目的依赖项中。这取决于您使用的休眠版本。至于核心 jar 中已经包含的 hibernate 4 注释，但请确保也包含 hibernate-commons-annotations。然后逆向工程向导将让您选择要如何映射生成的类。

# c++ - 编译时出错 C++

> ID：14729958
> 
> 赞同：1
> 
> 时间：2013-02-06T13:12:05.123
> 
> 标签：c++

我不知道为什么它不编译我删除了行中的评论

```
/*******************************/
waitThread.push_front(workerID);
/******************************/ 
```

只有当我留下评论时，它才会编译......否则，我会得到一个以“在这里声明”结尾的长异常......

```
/usr/include/c++/4.6/thread:126:5: error: declared here 
```

也许……的定义有问题。你能解释一下吗？

```
/*  g++ -std=c++0x -o manyThreads manyThreads.cpp -pthread */

#include <thread>
#include <iostream>
#include <mutex>
#include <time.h>
#include <list>

std::list<std::thread::id> myList;
std::mutex mutex;
std::list<std::thread> waitThread;

void insertList(std::thread::id identifier) {

mutex.lock();
myList.push_front(identifier);
mutex.unlock();

}

int main() {

std::list<std::thread::id>::iterator id;

std::list<std::thread>::iterator threadsIter;

int counter;

for(counter=0; counter<6; counter++) {

    std::thread workerID(insertList, workerID.get_id());

            /*******************************/
    waitThread.push_front(workerID);
            /******************************/
}

for(threadsIter=waitThread.begin(); threadsIter !=waitThread.end();threadsIter++)    {
    threadsIter->join();
}

for(id=myList.begin(); id != myList.end(); id++) {
    std::cout << *id << "\n";
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:15:49.173

std::thread 不可复制，因此您不能使用它调用 push_front。复制一个线程是没有意义的，它会做什么？

您也许可以使用将线程移动到列表中

```
waitThread.push_front(std::move(workerID)); 
```

这当然会使该行之后的线程对象无效。

然而，这条线看起来也很奇怪：-

```
std::thread workerID(insertList, workerID.get_id()); 
```

我怀疑在此时未构造的对象上调用 get_id 是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:16:30.673

`std::thread`不可复制，因此您必须将其移入：

```
waitThread.push_front(std::move(workerID)); 
```

或者，您可以通过临时传递来移动它：

```
waitThread.push_front(std::thread(insertList, workerID.get_id()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:15:43.683

这不是评论，而是您的程序中有效且（可能）必不可少的声明：

```
/*******************************/ -- comment
waitThread.push_front(workerID); -- statement
/******************************/ --comment 
```

# iphone - 在联系页面添加通讯录

> ID：14729959
> 
> 赞同：2
> 
> 时间：2013-02-06T13:12:07.447
> 
> 标签：iphone, ios, objective-c, abaddressbook

我想在我的**联系**页面中添加一个地址簿，并且我想以编程方式执行此操作，**即**不使用`nib files`. 任何人都可以建议我一个很好的教程或示例代码。我已经使用了 iPatel 给出的答案代码，当我运行它时它会抛出异常并且应用程序正在终止。谢谢并恭祝安康。

这是编辑后的代码。

```
#import "ContactInfoViewController.h"

@interface ContactInfoViewController ()

@end

@implementation ContactInfoViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor yellowColor];
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(gotohomepage:)]autorelease];
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
[[picker navigationBar] setBarStyle:UIBarStyleBlack];
picker.peoplePickerDelegate = self;
NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty],nil];

picker.displayedProperties = displayedItems;
[self presentModalViewController:picker animated:YES];
[picker release];

}
- (IBAction)gotohomepage:(id)sender
{
[self dismissViewControllerAnimated:YES completion:nil];
}
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{

ABAddressBookRef addressBook = ABAddressBookCreate();
int i;
NSString *strName = @"";
NSString* company = @"";
NSString *address = @"";
NSString *suburb = @"";
NSString *postalcode = @"";
NSString *state = @"";
NSString *country = @"";
NSString *mobile = @"";
NSString *phone = @"";
NSString *emailid = @"";
strName = (NSString *)ABRecordCopyCompositeName((ABRecordRef) person);
CFStringRef name = ABRecordCopyCompositeName((ABRecordRef) person);
company  = (NSString *)ABRecordCopyValue((ABRecordRef) person, kABPersonOrganizationProperty);
NSArray*  allPeople = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook,name);
CFRelease(name);

for (i = 0; i < [allPeople count]; i++)
{
    ABRecordRef record = [allPeople objectAtIndex:i];

    ABMutableMultiValueRef multiValue = ABRecordCopyValue(record, kABPersonAddressProperty);
    for(CFIndex i=0; i<ABMultiValueGetCount(multiValue); i++)
    {
        NSString* HomeLabel = (NSString*)ABMultiValueCopyLabelAtIndex(multiValue, i);
        if([HomeLabel isEqualToString:@"_$!<Home>!$_"])
        {
            CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multiValue, i);
            address = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStreetKey)];
            suburb = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCityKey)];
            postalcode = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressZIPKey)];
            state = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStateKey)];
            country = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict,  kABPersonAddressCountryKey)];
            CFRelease(dict);
        }
        CFRelease(HomeLabel);
    }
    CFRelease(multiValue);
}
CFRelease(allPeople);

ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
NSString* mobileLabel = nil;
for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
{
    mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
    if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
    {
        mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
        NSLog(@"phone   %@",mobile);
    }
    else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
    {
        phone = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
        NSLog(@"phone   %@",phone);

        CFRelease(mobileLabel);
        break ;
    }
    CFRelease(mobileLabel);

}
CFStringRef value, label;
ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
CFIndex count = ABMultiValueGetCount(multi);
if (count == 1)
{
    value = ABMultiValueCopyValueAtIndex(multi, 0);
    emailid = (NSString*) value;
    NSLog(@"self.emailID   %@",emailid);
    CFRelease(value);
}
else
{
    for (CFIndex i = 0; i < count; i++)
    {
        label = ABMultiValueCopyLabelAtIndex(multi, i);
        value = ABMultiValueCopyValueAtIndex(multi, i);
        if (CFStringCompare(label, kABWorkLabel, 0) == 0)
        {
            emailid = (NSString*) value;
            NSLog(@"self.emailID   %@",emailid);
        }
        else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
        {
            emailid = (NSString*) value;
            NSLog(@"self.emailID   %@",emailid);
        }
        CFRelease(label);
        CFRelease(value);
    }
}
CFRelease(multi);
 CFRelease(phones);
CFRelease(addressBook);
[self dismissModalViewControllerAnimated:YES];
return NO;
}
#pragma mark - ABPeopelPickerNavigationController Delegate and DataSource Methods
- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
[self dismissModalViewControllerAnimated:YES];
}
- (void)unknownPersonViewController:(ABUnknownPersonViewController *)unknownCardViewController didResolveToPerson:(ABRecordRef)person
{
}
- (void)newPersonViewController:(ABNewPersonViewController *)newPersonView didCompleteWithNewPerson:(ABRecordRef)person
{
}
- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
{
return YES;
}
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController  *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier;
{
return YES;
}
- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:29:35.373

> **编辑 ：**

**首先在您的类.h 文件**中添加所有 Delegate 和 Datasource 方法

 **```
<ABPeoplePickerNavigationControllerDelegate,ABPersonViewControllerDelegate,ABNewPersonViewControllerDelegate,ABUnknownPersonViewControllerDelegate> 
```

创造`ABPeoplePickerNavigationController`

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
        [[picker navigationBar] setBarStyle:UIBarStyleBlack];
        picker.peoplePickerDelegate = self;
        // Display only a person's phone, email, and birthdate
        NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty],nil];

        picker.displayedProperties = displayedItems;
        // Show the picker
        [self presentModalViewController:picker animated:YES];
        [picker release]; 
```

添加Following Delegate和DataSource方法`ABPeopelPickerNavigationController`

```
#pragma mark - ABPeopelPickerNavigationController Delegate and DataSource Methods

- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
    [self dismissModalViewControllerAnimated:YES];
}

- (void)unknownPersonViewController:(ABUnknownPersonViewController *)unknownCardViewController didResolveToPerson:(ABRecordRef)person
{
}

- (void)newPersonViewController:(ABNewPersonViewController *)newPersonView didCompleteWithNewPerson:(ABRecordRef)person
{
}

- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
{
    return YES;
}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier;
{
    return YES;
} 
```

请尝试以下代码以从电话簿中获取人员的所有信息

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    ABAddressBookRef addressBook = ABAddressBookCreate();

    int i;
    NSString *strName = @"";
    NSString* company = @"";
    NSString *address = @"";
    NSString *suburb = @"";
    NSString *postalcode = @"";
    NSString *state = @"";
    NSString *country = @"";
    NSString *mobile = @"";
    NSString *phone = @"";
    NSString *emailid = @"";

    strName = (NSString *)ABRecordCopyCompositeName((ABRecordRef) person);
    CFStringRef name = ABRecordCopyCompositeName((ABRecordRef) person);
    company  = (NSString *)ABRecordCopyValue((ABRecordRef) person, kABPersonOrganizationProperty);

    NSArray*  allPeople = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook,name);
    CFRelease(name);

    for (i = 0; i < [allPeople count]; i++)
    {
        ABRecordRef record = [allPeople objectAtIndex:i];

        ABMutableMultiValueRef multiValue = ABRecordCopyValue(record, kABPersonAddressProperty);
        for(CFIndex i=0; i<ABMultiValueGetCount(multiValue); i++)
        {
            NSString* HomeLabel = (NSString*)ABMultiValueCopyLabelAtIndex(multiValue, i);
            if([HomeLabel isEqualToString:@"_$!<Home>!$_"])
            {
                CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multiValue, i);
                address = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStreetKey)];
                suburb = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCityKey)];
                postalcode = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressZIPKey)];
                state = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStateKey)];
                country = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCountryKey)];

                CFRelease(dict);
            }
            CFRelease(HomeLabel);
        }
        CFRelease(multiValue);
    }
    CFRelease(allPeople);

    ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSString* mobileLabel = nil;
    for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
    {
        mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
        if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
        {
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",mobile);
        }
        else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
        {
            phone = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",phone);

            CFRelease(mobileLabel);
            break ;
        }
        CFRelease(mobileLabel);

    }
    CFStringRef value, label;
    ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFIndex count = ABMultiValueGetCount(multi);
    if (count == 1)
    {
        value = ABMultiValueCopyValueAtIndex(multi, 0);
        emailid = (NSString*) value;
        NSLog(@"self.emailID   %@",emailid);
        CFRelease(value);
    }
    else
    {
        for (CFIndex i = 0; i < count; i++)
        {
            label = ABMultiValueCopyLabelAtIndex(multi, i);
            value = ABMultiValueCopyValueAtIndex(multi, i);

            // check for Work e-mail label
            if (CFStringCompare(label, kABWorkLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }
            else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }

            CFRelease(label);
            CFRelease(value);
        }
    }
    CFRelease(multi);

        }

    CFRelease(phones);
    CFRelease(addressBook);
    [self dismissModalViewControllerAnimated:YES];

    return NO;

} 
```

有关更多信息，请阅读[本](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/QuickStart.html)教程和[本](http://blog.slaunchaman.com/2009/01/21/cocoa-touch-tutorial-extract-address-book-address-values-on-iphone-os/)教程。

**谢谢 ：）****

# opengl - libgdx 中帧缓冲区的模棱两可的结果

> ID：14729961
> 
> 赞同：2
> 
> 时间：2013-02-06T13:12:08.567
> 
> 标签：opengl, opengl-es, libgdx, framebuffer, fbo

我在 libgdx 中使用[FrameBuffer类得到以下奇怪的结果。](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/FrameBuffer.html)

![在此处输入图像描述](../Images/2f1a27fad1dbcdce316ed635eb2f2979.png)

这是产生此结果的代码：

```
// This is the rendering code
@Override
public void render(float delta) {
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT);

    stage.act();
    stage.draw();

    fbo.begin();
    batch.begin();
    batch.draw(heart, 0, 0);
    batch.end();
    fbo.end();  

    test = new Image(fbo.getColorBufferTexture());
    test.setPosition(256, 256);
    stage.addActor(test);
}

//This is the initialization code
@Override
public void show() {
    stage = new Stage(Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), false);
    atlas = Assets.getAtlas();
    batch = new SpriteBatch();

    background = new Image(atlas.findRegion("background"));     
    background.setFillParent(true); 
    heart = atlas.findRegion("fluttering");
    fbo = new FrameBuffer(Pixmap.Format.RGBA8888, heart.getRegionWidth(), heart.getRegionHeight(), false);

    stage.addActor(background);
    Image temp = new Image(new TextureRegion(heart));
    stage.addActor(temp);
} 
```

尽管帧缓冲区的宽度和高度与图像的相同（71 x 72），但为什么我在帧缓冲区上绘制的心脏被翻转并小于原始缓冲区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-01T23:52:08.650

您的 SpriteBatch 使用了错误的投影矩阵。由于您要渲染到自定义大小的 FrameBuffer，因此您必须手动设置一个。

```
projectionMatrix = new Matrix4();
projectionMatrix.setToOrtho2D(0, 0, heart.getRegionWidth(), heart.getRegionHeight());
batch.setProjectionMatrix(projectionMatrix); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:56:11.187

为了解决这个问题，帧缓冲区的宽度和高度必须等于舞台的宽度和高度，如下所示：

```
fbo = new FrameBuffer(Pixmap.Format.RGBA8888, Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), false); 
```

# plone - PloneFormGen 的主从小部件

> ID：14729963
> 
> 赞同：2
> 
> 时间：2013-02-06T13:12:21.797
> 
> 标签：plone, ploneformgen

PloneFormGen 是否存在类似于“主从小部件”的东西？用户在哪里选择第一个选项 A，这将生成选项 B（下）选择的选项列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:13:07.580

这是一个远非理想的答案，但我已经通过 PFG 覆盖将 JavaScript 注入到标头中多次这样做了。它仅适用于相对简单的决策树。

基本过程是在加载时隐藏所有辅助控件，然后将它们显示为单击事件指示控件选择。将子控件分组到字段集中也很方便：然后您可以将控件显示和隐藏为一个组。

# c++ - 解决 Ubuntu 中 Boost C++ 代码的“未定义引用”编译错误

> ID：14729967
> 
> 赞同：2
> 
> 时间：2013-02-06T13:12:46.460
> 
> 标签：c++, ubuntu, boost, ubuntu-12.04

从我的终端会话：

```
Go Trojans >make all
g++ -static -I/usr/include/boost -I/usr/include/boost/filesystem get_sys_info.cpp
/tmp/cc6nK9EV.o: In function `__static_initialization_and_destruction_0(int, int)':
get_sys_info.cpp:(.text+0x13a): undefined reference to `boost::system::generic_category()'
get_sys_info.cpp:(.text+0x146): undefined reference to `boost::system::generic_category()'
get_sys_info.cpp:(.text+0x152): undefined reference to `boost::system::system_category()'
collect2: ld returned 1 exit status
make: *** [all] Error 1
Go Trojans > 
```

导入 Boost C++ 文件系统库的 C++ 代码：

```
#include <iostream>
#include <string>
#include <stdio.h>
#include <stdlib.h>

// Include Boost C++ libraries
#include <boost/filesystem.hpp>
using namespace boost::filesystem;

using namespace std;

int main() {
    string my_str = "This is a string.";

    cout << my_str << endl;
/*
    my_str = system("pwd");
    my_str.append("\b\b\b\b\b\b\b\b extra");
    cout << my_str << "a\b\b\b\b\b\b=" << endl;
*/

    path p(".");
    cout << p << "==" << endl;

    return 0;
} 
```

来自我的 Boost C++ 库所在目录的终端会话的片段。

```
Go Trojans >pwd
/usr/include/boost
Go Trojans >ls -al
total 1308
drwxr-xr-x  86 root root 12288 Jan 29 09:30 .
drwxr-xr-x 119 root root 20480 Feb  4 08:08 ..
...
drwxr-xr-x   5 root root  4096 Jan 29 09:30 filesystem
-rw-r--r--   1 root root  1340 Jan  5  2012 filesystem.hpp 
```

如何解决未定义的引用？我是否正确导入了 Boost C++ 文件系统库？我是否也在正确编译代码？

我的错误是什么？你能帮帮我吗？

非常感谢，祝您有美好的一天！再见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:00:53.733

您需要`-L/path/to/your/library`在调用前面使用`-lboost_system`which 将告诉编译器在哪里找到共享对象。但是，即使您可以编译代码，它也不会运行，因为运行时无论如何都无法找到该文件，因此您不得不更新路径。

我假设您使用的是学校计算机，因此编辑`LD_LIBRARY_PATH`或使用`/sbin/ldconfig`是非法的。

如果它们不违法，您也可以

`export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/boost`

在你的`~/.bashrc`或同等的

或者你可以

`touch /etc/ld.so.conf.d/boost.conf`

`vi /etc/ld.so.conf/boost.conf`

把你的boost库的路径放在这里，然后保存文件。然后运行：

`/sbin/ldconfig`

它将重新解析所有内容`/etc/ld.so.conf.d`并将更新您的运行时路径。

祝你好运！

# javascript - 尝试使用 onclick 跟踪 Piwik 目标

> ID：14729970
> 
> 赞同：1
> 
> 时间：2013-02-06T13:12:52.500
> 
> 标签：javascript, matomo

我也在 Piwik 论坛上发布了这个，但没有得到任何回应。

[Piwik 论坛帖子](http://forum.piwik.org/read.php?2,100390)

Piwik 运行良好，跟踪代码位于页脚中的每个页面上。我正在尝试使用目标功能，因此想使用 onclick 手动触发它。这是我页面中的代码。这与他们的示例完全一样。

```
<input type="submit" value="Submit Request" class="button" 
       onclick="piwikTracker.trackGoal(1);" /> 
```

但是，当我单击它时，Piwik 不会将其注册为目标。我尝试用“return false”替换 piwikTracker 的东西，按钮变为非活动状态，所以我知道 javascript 正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:39:13.480

您是否在 Piwik 中设定了目标？如果您在 Piwk 中设置目标，代码应该可以工作，只需使用以下设置：

![在此处输入图像描述](../Images/a82a0ac60af89c564405a62dba45b136.png)

确保你也使用了正确的目标号码，这样有时也会让你失望。

# c# - 更新列表 使用 foreach 循环和使用 LINQ/LAMBDA 的条件

> ID：14729973
> 
> 赞同：6
> 
> 时间：2013-02-06T13:13:10.657
> 
> 标签：c#

我想做这样的事情

```
foreach (var item in SeasonList)
{
    if (item.Text == "ALL")
    {
        item.IsSelected = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-06T13:20:29.910

```
foreach(var item in SeasonList.Where(x => x.Text == "ALL"))
{
    item.Selected = false;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T13:16:41.250

这也可能有效，但在我看来，你所做的已经很好了。

```
SeasonList.ForEach(s => s.IsSelected = s.TEXT != "ALL"); 
```

或者，要完全匹配初始要求：

```
SeasonList.Where(s => s.TEXT == "ALL").ToList().ForEach(s => s.IsSelected = false); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T13:20:34.140

```
class Program
{
    static void Main(string[] args)
    {
        List<ItemObject> items = new List<ItemObject>()
        {
            new ItemObject() { Text = "Text 1", IsSelected = true },
            new ItemObject() { Text = "Text 2", IsSelected = true },
            new ItemObject() { Text = "ALL", IsSelected = true }
        };

        items.ForEach(x => { if (x.Text == "ALL") x.IsSelected = false; });
    }
}

class ItemObject
{
    public string Text { get; set; }
    public bool IsSelected { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-06T13:21:34.933

```
SeasonList.ForEach(q => q.IsSelected = q.Text == "ALL" ? false : q.IsSelected) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T13:42:51.797

使用索引更新

```
 var index = SeasonList.FindIndex(x => x.Text == "ALL");
        if (index > 0) SeasonList[index].IsSelected = false; 
```

另外一个选项

```
 foreach (var item in SeasonList.FindAll(x => x.Text == "ALL"))
        {
            item.IsSelected = false;
        } 
```

笔记：

检查 Jon Skeet 的回答[LINQ 是用于查询 - 不是用于更新。](https://stackoverflow.com/questions/1160903/linq-to-update-a-collection-with-values-from-another-collection)

# ios - 服务器到 Cydia 调整/应用通知

> ID：14729974
> 
> 赞同：2
> 
> 时间：2013-02-06T13:13:21.253
> 
> 标签：ios, objective-c, push-notification, apple-push-notifications, cydia

我花了一个小时左右的时间在网上浏览，试图为 Cydia 调整/应用程序找到某种推送库。基本上，我想通知我正在构建特定事件的 cydia 调整，然后让调整响应。

据我了解，没有办法与 APNS 集成（尽管有开发帐户）。所以，我正在寻找第 3 方解决方案 - 如果有的话！

如果您知道解决方案，请告诉我。谢谢 ：）

# python - json解码异常python

> ID：14729978
> 
> 赞同：1
> 
> 时间：2013-02-06T13:13:32.747
> 
> 标签：python, json

* * *

## 示例服务器

我有一个如下所述的 python 脚本复制到 /var/www/cgi-bin 文件夹，权限设置为 775。

```
#!/usr/bin/env python

 print "Content-type: text/plain\n\n";
print "testing...\n";

import cgitb; cgitb.enable()
import cgi

from jsonrpc import handleCGI, ServiceMethod
import json
from datetime import datetime

@ServiceMethod
def echo():
    return "Hello"

if __name__ == "__main__":
    handleCGI() 
```

* * *

## 示例客户端

现在，我正在使用下面的客户端代码访问这个简单的回显服务。

```
from jsonrpc import ServiceProxy
import json

s = ServiceProxy(`"http://localhost/cgi-bin/t2.py"`)
print s.echo() 
```

1/ 我在运行上述客户端时收到以下错误。有什么想法吗？2/ httpd.conf 设置有问题吗？

```
File "/usr/lib/python2.7/site-packages/jsonrpc/proxy.py", line 43, in __call__
    resp = loads(respdata)
  File "/usr/lib/python2.7/site-packages/jsonrpc/json.py", line 211, in loads
    raise JSONDecodeException('Expected []{}," or Number, Null, False or True')
jsonrpc.json.JSONDecodeException: Expected []{}," or Number, Null, False or True 
```

注意：我使用以下链接中提到的示例，使用 cgi 处理 json 的方式。

[http://json-rpc.org/wiki/python-json-rpc](http://json-rpc.org/wiki/python-json-rpc)

请告诉我。

谢谢！桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T14:00:48.567

我知道这已经很晚了，但是当我遇到同样的问题时，我发现了这个问题。希望对其他人有所帮助，我将发布我的解决方案。

就我而言，它就像使 python 文件本身可执行一样简单（愚蠢）。即 chmod 755 t2.py

# security - Outlook 不信任 MS Word？

> ID：14729981
> 
> 赞同：0
> 
> 时间：2013-02-06T13:13:43.667
> 
> 标签：security, ms-word, outlook, mailmerge

*   Delphi 应用程序自动合并 Word 邮件并通过 Outlook (Office 2007) 发送电子邮件。
*   视窗 XP2
*   防病毒软件状态 - 有效
*   信任中心编程访问永远不会警告我。
*   （不同的应用程序不使用 Word，但使用 Outlook 电子邮件而不发出警告）。

然而 Outlook 安全卫士警告消息出现。每封电子邮件 2 个警报 x 700 个电子邮件地址 = 一位愤怒的客户。

为什么？如果不使用第三招架插件，有没有办法解决这个问题？有没有办法合并一条记录并运行一些delphi代码然后合并另一条记录？然后我可以完全绕过 Outlook

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:04:03.987

Outlook 不知道呼叫来自何处。Outlook VBA 和 COM 加载项是明确受信任的，任何外部代码都不是。
如果您有最新的防病毒软件，您将不会看到提示。
否则，您的选项列在[http://www.outlookcode.com/article.aspx?id=52](http://www.outlookcode.com/article.aspx?id=52)
在您的情况下（邮件合并），尝试将邮件合并到文件中，然后使用上述 URL 中列出的解决方法。

# validation - 仅当按下某个命令按钮时才根据需要验证输入

> ID：14729982
> 
> 赞同：9
> 
> 时间：2013-02-06T13:13:44.497
> 
> 标签：validation, jsf-2, primefaces, required, commandbutton

我有 JSF 验证的特定用例。例如我有一个`inputText`字段：

```
<p:inputText id="input" required="#{myBean.required}" value="#{myBean.value}" maxlength="20" disabled="#{myBean.disabled}">
  <p:ajax event="blur" process="@this" update="name" listener="#{myBean.listener}"/>
</p:inputText> 
```

输入的值是数字（在某些情况下它也可以是字符串，因为这是复合组件的一部分，但如果我们假设这是一个数字，则可以更好地描述问题）。此输入是表单的一部分，在表单末尾我有提交按钮：

```
<p:commandButton value="Save" actionListener="#{myBean.save}"/> 
```

我有什么要求：

1.  按下提交按钮时，应处理所有验证，这没关系，这工作正常。
2.  如果输入字段不为空，则在输入字段上触发模糊事件时，应处理数字验证，这也可以。`name`最后，我用一些值更新了带有 id 的字段。
3.  现在我有一个问题。我的第三个请求是当输入为空时，不应处理输入验证。这是一种特殊情况，我将使用 id 清除字段`name`。当我删除已经在输入中输入的文本，从组件中删除焦点（例如按 TAB）时，这也是这种情况，在这种情况下，还应该处理 AJAX 请求并且名称输入也将被清除。

如果该输入字段为空，并且仅针对此 ajax 事件，如何禁用该输入字段的验证？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T13:48:39.340

让输入的`required`属性检查是否按下了保存按钮（可以通过其客户端 ID 在请求参数映射中的存在来识别）。

```
<h:form>
    <p:inputText ... required="#{not empty param[save.clientId] and myBean.required}" />

    <p:commandButton binding="#{save}" ... />
</h:form> 
```

*（注意：不要**将**它绑定到 bean 属性！代码是原样的）*

这样，它只会`true`在实际按下保存按钮时进行评估。

或者，如果您`binding`对按钮的客户端 ID 进行硬编码和/或没有问题：

```
<h:form id="formId">
    <p:inputText ... required="#{not empty param['formId:buttonId'] and myBean.required}" />

    <p:commandButton id="buttonId" ... />
</h:form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:21:17.423

如果输入为空，只需在接受输入时删除所需的属性。然后编写一个只接受空输入或数字输入的自定义验证器。

```
<p:inputText id="input" value="#{myBean.value}" maxlength="20" disabled="#{myBean.disabled}" validator="customerNumericInputValidator">   <p:ajax event="blur" process="@this" update="name" listener="#{myBean.listener}"/> </p:inputText> 
```

```
public class customerNumericInputValidator implements Validator {

    @Override
    public void validate(FacesContext facesContext, UIComponent uIComponent,
            Object object) throws ValidatorException {

        String number = (String) object;
        number = Strings.nullToEmpty(number).trim();

        //if the request is a full request then number can not be empty
        if(!FacesContext.getCurrentInstance().isPostback() && Strings.isNullOrEmpty(number))
        {
             FacesMessage message = new FacesMessage();
             message.setSummary(Messages.getMessage("error empty value"));
             message.setSeverity(FacesMessage.SEVERITY_ERROR);
             throw new ValidatorException(message);
        } 

        if(!Strings.isNullOrEmpty(number))
        { 
            if(!isNumber(number))
            {
               FacesMessage message = new FacesMessage();
               message.setSummary(Messages.getMessage("error not numerical value"));
               message.setSeverity(FacesMessage.SEVERITY_ERROR);
               throw new ValidatorException(message);
            }
        }
    }

} 
```

# vb.net - DateTimePicker 过滤datagridview

> ID：14729983
> 
> 赞同：0
> 
> 时间：2013-02-06T13:13:47.947
> 
> 标签：vb.net, datetime, filter

我有一个包含大约 13000 条记录的 DataGridView，我想按日期过滤它。问题是我不知道怎么做！目前，如果我想根据字符串过滤 DGV，我使用以下代码

```
If TextBox1.TextLength > 0 Then
        frmReportMenu.ProjectBindingSource.Filter =_ 
String.Format("[User no] Like '*" & TextBox1.Text) & "*'"
    Else
        frmReportMenu.ProjectBindingSource.Filter = String.Empty
    End If 
```

但我不知道日期用什么，因为日期与 String.Format 不同

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:54:44.550

如果要按两个 DateTimePicker 日期过滤，请执行以下操作：

```
Dim DateFrom as string = String.Format("[YourDateField] >= '{0:yyyy-MM-dd}' ", DateTimePickerFrom.Value)
Dim DateTo as string = String.Format("[YourDateField] <= '{0:yyyy-MM-dd}' ", DateTimePickerTo.Value)

frmReportMenu.ProjectBindingSource.Filter = String.Format("{0} AND {1}", DateFrom, DateTo) 
```

# ruby-on-rails - Rails 3 每个都忽略 nil 值

> ID：14729984
> 
> 赞同：0
> 
> 时间：2013-02-06T13:13:52.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在构建一个 html 表，其中应包含名称、等级 1、等级 2 和等级 3。评级 1-3 来自与名称不同的型号。

```
resources :names do
  resource :rat1,:rat2,:rat3
end 
```

在我的 html 表中，我想在每个表中包含评级，但我想自动跳过或忽略 nil 的表。这是因为 :names 可能只有 :rat1 而不是 :rat2 或 :rat3。我的观点应该是这样的。

```
 <table>
      <thead>Name</thead>
      <thead>Rating 1</thead>
      <thead>Rating 2</thead>
      <thead>Rating 3</thead>
      <% @names.each do |name| %>
        <tr>
          <td><%= name.nametext %></td>
          <td><%= name.rat1.rating %></td>
          <td><%= name.rat2.rating %></td>
          <td><%= name.rat3.rating %></td>
        </tr>
      <% end %>
    </table> 
```

除非 name.rat1 为 nil，否则它将 a.) 将值替换为 N/A 或 b.) 它将将此字段留空并继续下一个。

最干净的方法是什么？

：：更新：：

所以我的问题是 name.rat1 是 nil 并且 name.rat1.rating 是 nil 类的未定义方法，所以这两个选项都会抛出相同的 nil 类错误的未定义方法，而不管 || 或辅助方法。至少这就是我目前的测试所显示的。还有其他选择吗？或不同的解决方法？我想避免为每个 rat1-3 放置一个这样的验证循环

```
<% unless name.rat1.nil? %>
  <%= name.rat1.rating %>
<% end %> 
```

必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:23:13.197

我可能会在 names_helper.rb 中创建一个辅助方法

```
def show_rating(rating)
  if rating.present?
    rating
  else
    "default value"
  end
end 
```

然后在视图中使用它：

```
<%= show_rating name.rat1.rating %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T13:28:17.713

**OFFTOPIC**你的表结构错误。它应该有`<thead><tr><th>Name</th><th>Rating1</th>..so on..</tr></thead>`

因此，在您的情况下，您可以在将评级值呈现为时使用条件：

```
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Rating 1</th>
      <th>Rating 2</th>
      <th>Rating 3</th>
    </tr>
  </thead>
  <tbody>
  <% @names.each do |name| %>
    <tr>
      <td><%= name.nametext %></td>
      <td><%= name.rat1.rating || 'N/A' %></td>
      <td><%= name.rat2.rating || 'N/A' %></td>
      <td><%= name.rat3.rating || 'N/A' %></td>
    </tr>
  <% end %>
  </tbody>
</table> 
```

# php - codeIgniter 中文件和文件夹的管理可以从控制器还是模型中进行？

> ID：14729985
> 
> 赞同：0
> 
> 时间：2013-02-06T13:13:54.757
> 
> 标签：php, codeigniter, model, controller, file-exists

我想验证我的 CI 系统（不是系统文件夹）上是否存在文件/文件夹，我可以从控制器执行此操作还是需要在我的模型上创建一个方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:21:49.717

这基本上是一个选择问题。您可以在模型和控制器中定义函数。但是，如果您想从不同的控制器中反复使用它，那么最好定义一个新模型并将该功能放入其中。我会定义许多控制器使用的模型，这些控制器具有一些通用的通用方法。只是为了让事情分开并在以后维护它们。助手也是一种将事物分开的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:17:50.833

你有很多方法：

*   您可以创建一个助手并将您的功能放在`verify()`
*   您可以在控制器中创建一个私有函数，例如

    ```
    private function _verify() { } 
    ```

请享用 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:22:09.570

最好将此函数添加到 codeigniter 助手或库类中（如果您是 OOP 的粉丝）。使用 autoload.php 自动加载它并从您需要的任何地方调用。

# xml - XML Schema：具有不同属性限制的单个元素名称和类型

> ID：14729987
> 
> 赞同：0
> 
> 时间：2013-02-06T13:13:59.923
> 
> 标签：xml, xsd, xml-attribute

我需要像这样指定一个 XML 片段：

```
<address type="work">...</address>
<address type="home">...</address> 
```

地址是必需的`work`，但`home`地址是可选的。如何在 XML Schema 中实现该限制？

这是我的`address`复杂类型：

```
<xs:complexType name="AddressType">
  <xs:sequence>
    <xs:element name="street" type="xs:string"></xs:element>
    <xs:element name="postalCode" type="PostalCodeType"></xs:element>
    <xs:element name="town" type="xs:string"></xs:element>
  </xs:sequence>
  <xs:attribute name="type" use="required">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:enumeration value="work" />
        <xs:enumeration value="home" />
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>
</xs:complexType> 
```

我列出了`address`这样的元素：

```
<xs:element name="address" type="AddressType"></xs:element>
<xs:element name="address" type="AddressType" minOccurs="0"></xs:element> 
```

那么，我如何指定第一个是专门的`type="work"`地址，而另一个是`type="home"`地址呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:46:33.087

在 XSD 1.0 中，我不知道有一种方法可以实现你所说的你想要的。（XML 的设计基于不同类型的对象被称为不同事物的前提；如果您希望家庭地址和工作地址具有不同的验证行为，这很好地证明它们是不同的事物，出于您的目的，并且不应该被称为相同的东西。如果你命名元素 WorkAddress 和 HomeAddress，你没有问题。如果我们不对处理器撒谎，事情会变得更好。）

在 XSD 1.1 中，您可以在内容模型中指定 'address' 必须至少出现一次，并使用断言检查第一次出现的 type="work" 和第二次（如果出现）type="home"。

# java - 此行上的 Maven 空依赖和多个注释

> ID：14729988
> 
> 赞同：0
> 
> 时间：2013-02-06T13:14:01.410
> 
> 标签：java, apache, maven, m2eclipse, m2e

我的 pom 出了点问题，xml 中有一个空白的依赖项和 artifactId，但无论我是否删除标签，都会出现相同的错误。

我正在使用安装在 Linux Mint 14 上的主文件夹中的 m2eclipse 的 Eclipse，并安装了 Maven 版本“Apache Maven 2.2.1 (rdebian-8)”

这是 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>TransferHandler</groupId>
  <artifactId>TransferHandler</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <testSourceDirectory>test</testSourceDirectory>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
        <groupId>com.sun.mail</groupId>
        <artifactId>javax.mail</artifactId>
        <version>1.4.6-rc1</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-vfs2</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>com.jcraft</groupId>
        <artifactId>jsch</artifactId>
        <version>0.1.49</version>
    </dependency>
    <dependency>
        <groupId>commons-net</groupId>
        <artifactId>commons-net</artifactId>
        <version>3.2</version>
        <classifier>ftp</classifier>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <artifactId></artifactId>
    </dependency>
  </dependencies>
</project> 
```

显示三个错误消息：

第 1 行：

在这一行找到多个注释： - null (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources) - null (org.apache.maven.plugins:maven-resources -plugin:2.5:testResources:default-testResources:process-test-resources)

在第 70 行：

在此行找到多个注释：- 项目构建错误：null::jar 的“dependencies.dependency.groupId”缺失。- 项目构建错误：null::jar 的“dependencies.dependency.version”缺失。

在第 71 行：

项目构建错误：缺少 null::jar 的“dependencies.dependency.artifactId”。

似乎第 70 行带有空标签的那个是根本原因（摘录如下），但我不确定。

```
<dependency>
        <artifactId></artifactId>
</dependency> 
```

即使我从 xml 中删除空标签并刷新 maven 和项目，错误仍然存​​在。在我的依赖项选项卡上，我看到一个带有“？”的罐子。在它旁边但无法删除它，在我的 Dependency Hierachy 选项卡中，我看到一个'：[compile]' jar，但可以删除或排除它。

我怎样才能删除这个幽灵/空罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:30:01.757

试试这个标题

```
<project xmlns="http://maven.apache.org/POM/4.0.0"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"> 
```

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:05:43.477

我找到了使用 git 解决问题的方法，但无法通过删除有问题的包直接解决它。解决方法是关闭 eclipse，删除 pom，然后使用 git 丢弃工作目录中的更改。命令：

```
 rm pom.xml
 git checkout -- pom.xml 
```

然后 pom 应该在最后一次提交时重新出现并返回到它的状态（幸运的是，在这个错误出现之前）。不是一个非常令人满意的答案，但至少它有效。如果有人对真正问题的核心发布答案和解释（即为什么我不能删除一个*空*包以及它是如何到达那里的），我仍然很乐意接受它。

# ruby - ruby 中的错误：无法加载此类文件——zlib

> ID：14729994
> 
> 赞同：1
> 
> 时间：2013-02-06T13:14:17.143
> 
> 标签：ruby, linux, rvm

当我尝试在 Ubuntu 12.10 中安装 rails 时，出现此错误：

```
$ gem install rails
ERROR: Loading command: install (LoadError)
cannot load such file -- zlib
ERROR: While executing gem ... (NameError)
uninitialized constant Gem::Commands::InstallCommand 
```

所以我完全删除了rvm：

```
rvm implode
sudo rm -rf ~/.rvm 
```

删除了我的脚本调用`.bashrc`和`.bash_profile`

并检查它们是否真的被移除：

```
env | grep rvm #no output, so rvm is removed
ruby -v #The program 'ruby' can be found in the following packages: blabla 
```

我已经通过 sudo apt-get install 获得了这些：

```
curl zlib1g-dev zlib1g libssl-dev build-essential openssl libreadline6 libreadline6-dev curl git-core libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config 
```

然后从头开始安装

```
curl -L https://get.rvm.io | bash -s stable --ruby --auto-dotfiles 
```

然后运行该行并重新启动终端关于此消息：

```
 * To start using RVM you need to run `source /home/adige/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows. 
```

然后`rvm pkg install readline`但完成错误：

```
...
Error running 'autoreconf -is --force', please read /home/adige/.rvm/log/readline/autoreconf.log
...
Please note that it's required to reinstall all rubies:

    rvm reinstall all --force 
```

我想它无论如何都安装了，对吧？在重新安装所有 rubies 之前，我当然安装了 zlib：

```
# w/out verify, it gives checksum error
rvm pkg install zlib --verify-downloads 1 
```

然后再次运行`rvm reinstall all --force`并完成错误：

```
...
Install of ruby-1.9.3-p374 - #complete 
Making gemset ruby-1.9.3-p374 pristine.
Error running '' under ,
please read /home/adige/.rvm/log/ruby-1.9.3-p374/gemset.pristine.log
Making gemset ruby-1.9.3-p374@global pristine. 
```

[gemset.pristine.log](http://pastebin.com/ZrmWStNB)

然后重新安装带有 zlib 支持的 ruby​​：

```
rvm reinstall 1.9.3-p374 --with-zlib-dir=$rvm_path/usr 
```

它返回相同的错误和[相同的日志](http://pastebin.com/ZrmWStNB)，但无论如何都完成了。

最后我尝试再次安装rails gem，但是`cannot load such file -- zlib`！

这是[rvm信息](http://pastebin.com/08fp9PVW)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:34:23.130

您不应该在 ubuntu 上安装`readline`/ ，请按照以下步骤操作：`zlib`

```
rvm get head
rvm pkg remove
rvm requirements run force
rvm reinstall 1.9.3-p374 
```

如果失败，请确保包括安装过程的输出，还包括所有提到的日志文件

# scala - Scala：具有具体实例返回类型的实现方法

> ID：14729996
> 
> 赞同：36
> 
> 时间：2013-02-06T13:14:29.513
> 
> 标签：scala, abstract-type, self-type

我需要一种方法来强制抽象类中的方法具有调用它的对象的*具体类的返回类型。*最常见的例子是`copy()`方法，我目前正在使用基于抽象类型的方法：

```
abstract class A(id: Int) {
  type Self <: A
  def copy(newId: Int): Self
}

class B(id: Int, x: String) extends A(id) {
  type Self = B
  def copy(newId: Int) = new B(newId, x)
}

class C(id: Int, y: String, z: String) extends A(id) {
  type Self = C
  def copy(newId: Int) = new C(newId, y, z)
} 
```

我已经看到了很多方法，包括[这个很好的答案](https://stackoverflow.com/questions/4313139/how-to-use-scalas-this-typing-abstract-types-etc-to-implement-a-self-type)中的方法。但是，它们都没有真正*强制*实现返回自己的类型。例如，以下类将是有效的：

```
class D(id: Int, w: String) extends A(id) {
  type Self = A
  def copy(newId: Int) = new D(newId, w) // returns an A
}

class E(id: Int, v: String) extends A(id) {
  type Self = B
  def copy(newId: Int) = new B(newId, "")
} 
```

我可以这样做的事实导致，如果我正在复制对象的副本，我拥有的唯一信息是它们属于给定的`A`'s 子类：

```
// type error: Seq[A] is not a Seq[CA]!
def createCopies[CA <: A](seq: Seq[CA]): Seq[CA] = seq.map(_.copy(genNewId())) 
```

有没有更好的、类型安全的方法可以做到这一点？

编辑：如果可能的话，我想保留创建抽象类的任意深度层次结构的能力。也就是说，在前面的示例中，我希望能够创建一个扩展的*抽象*类，然后继续创建具体的子类。但是，如果这简化了问题（就像抽象类型的情况一样），我不需要进一步扩展已经具体的类。`A2``A``A2`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-16T12:30:29.773

我能想到的唯一解决方案是这个：

```
trait CanCopy[T <: CanCopy[T]] { self: T =>
  type Self >: self.type <: T
  def copy(newId: Int): Self
}

abstract class A(id: Int) { self:CanCopy[_] =>
  def copy(newId: Int): Self
} 
```

以下将编译：

```
class B(id: Int, x: String) extends A(id) with CanCopy[B] {
  type Self = B
  def copy(newId: Int) = new B(newId, x)
}

class C(id: Int, y: String, z: String) extends A(id) with CanCopy[C] {
  type Self = C
  def copy(newId: Int) = new C(newId, y, z)
} 
```

以下内容无法编译：

```
class D(id: Int, w: String) extends A(id) with CanCopy[D] {
  type Self = A
  def copy(newId: Int) = new D(newId, w) // returns an A
}

class E(id: Int, v: String) extends A(id) with CanCopy[E] {
  type Self = B
  def copy(newId: Int) = new B(newId, "")
} 
```

## 编辑

我实际上忘记删除复制方法。这可能更通用一点：

```
trait StrictSelf[T <: StrictSelf[T]] { self: T =>
  type Self >: self.type <: T
}

abstract class A(id: Int) { self:StrictSelf[_] =>
  def copy(newId:Int):Self
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T00:44:44.547

不要强制在声明端绑定类型，*除非您需要在`A`itelf*的定义中绑定。以下内容就足够了：

```
abstract class A(id: Int) {
  type Self
  def copy(newId: Int): Self
} 
```

现在强制`Self`使用网站上的类型：

```
def genNewId(): Int = ???
def createCopies[A1 <: A { type Self = A1 }](seq: Seq[A1]): Seq[A1] = 
  seq.map(_.copy(genNewId())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T16:00:10.097

我认为在 scala 中不可能做你想做的事。

如果我要：

```
class Base { type A }
class Other extends Base
class Sub extends Other 
```

现在......我们希望类型 A 引用“子类的类型”。

您可以从 的上下文中看到，`Base`并不是特别清楚（从编译器的角度来看）特定的“子类的类型”是什么意思，更不用说在父类中引用它的语法是什么了。在`Other`它意味着一个实例`Other`，但在 Sub 它可能意味着一个实例`Sub`？定义一个返回`Other`in`Other`但不是 in的方法的实现可以`Sub`吗？如果有两种方法返回`A`'s，一个在 in 中实现，`Other`另一个在 in 中实现`Sub`，这是否意味着 Base 中定义的类型同时具有两种不同的含义/界限/限制？那么如果`A`在这些类之外引用会发生什么？

我们拥有的最接近的是`this.type`. 我不确定理论上是否可以放宽`this.type`（或提供更宽松的版本）的含义，但在实现时它意味着一个非常具体的类型，如此具体以至于唯一满足的返回值`def foo:this.type`就是`this`它自己。

我希望能够按照您的建议进行操作，但我不确定它会如何工作。让我们想象一下，这`this.type`意味着……更笼统的东西。那会是什么？我们不能只说“任何定义的类型” `this`，因为您不想`class Subclass with MyTrait{type A=MyTrait}`成为有效的。我们可以说“一个满足所有类型的类型” `this`，但是当有人写的时候它会变得混乱`val a = new Foo with SomeOtherMixin`......我仍然不确定它是否可以以一种能够实现上面定义的方式来`Other`定义`Sub`。

我们有点尝试混合静态和动态定义的类型。

在 Scala 中，当您说 时`class B { type T <: B }`，`T`它是特定于实例的，并且`B`是静态的（我在 java 中使用该词是指静态方法）。你可以说`class Foo(o:Object){type T = o.type}`, 并且`T`对于每个实例都会有所不同....但是当你写`type T=Foo`,`Foo`是类的静态指定类型。你也可以有一个`object Bar`，并且提到了一些`Bar.AnotherType`。,`AnotherType`因为它本质上是“静态的”（虽然在 Scala 中并不真正称为“静态”），所以不参与`Foo`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:47:43.537

> 但是，它们都没有真正强制实现返回自己的类型。例如，以下类将是有效的。

但这不正常吗？否则，这将意味着您不能仅`A`通过示例扩展以添加新方法，因为它会自动破坏您尝试创建的协定（即，新类`copy`不会返回此类的实例，而是返回`A`） . 能够拥有一个完美的班级`A`，一旦你扩展它，因为班级`B`对我来说是错误的，这一事实就被打破了。但老实说，我很难说出它引起的问题。

**更新**：在考虑了更多之后，我认为如果类型检查（“返回类型 == 最派生类”）仅在具体类中进行，而不是在抽象类或特征上进行，这可能是合理的。不过，我不知道有任何方法可以在 scala 类型系统中对其进行编码。

> 我可以这样做的事实导致，如果我正在复制对象的副本，我拥有的唯一信息是它们属于 A 的给定子类

为什么你不能只返回一个`Seq[Ca#Self]`？例如，通过此更改传递`B`to列表`createCopies`将按预期返回 a `Seq[B]`（而不仅仅是 a `Seq[A]`：

```
scala> def createCopies[CA <: A](seq: Seq[CA]): Seq[CA#Self] = seq.map(_.copy(123))
createCopies: [CA <: A](seq: Seq[CA])Seq[CA#Self]

scala> val bs = List[B]( new B(1, "one"), new B(2, "two"))
bs: List[B] = List(B@29b9ab6c, B@5ca554da)

scala> val bs2: Seq[B] = createCopies(bs)
bs2: Seq[B] = List(B@92334e4, B@6665696b) 
```

# android - Android 可自定义日历

> ID：14729997
> 
> 赞同：1
> 
> 时间：2013-02-06T13:14:30.000
> 
> 标签：android, calendar, calendarview

我今天开始工作`CalendarView`，令我惊讶的是，课程非常不灵活。

只有让`CalendarView`我重写的方法是：

*   获取日期（）
*   getFirstDayOfWeek()
*   获取最大日期（）
*   获取MinDate()
*   getShowWeekNumber()
*   启用（）
*   setDate(long, boolean, boolean)
*   设置日期（长）
*   设置启用（布尔）
*   setFirstDayOfWeek(int)
*   setMaxDate(长)
*   setMinDate(长)
*   setOnDateChangeListener(OnDateChangeListener)
*   setShowWeekNumber（布尔值）

但是，我需要自定义某些日子的显示方式。例如，在我的数据库中，我有日期为 2013-10-02 和 2013-12-02 的事件，我想在我的日历中突出显示这些日子。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-21T17:41:56.443

您需要构建自己的 CustomCalenderView。扩展 Native CalendarView 并构建您想要为背景着色的行为。或者你可以使用这个库：TimesSquare for Android。

并认为它提供了您正在寻找的东西。

# css - 带有淡入/淡出过渡的 CSS Wrapper 菜单（导航）

> ID：14729998
> 
> 赞同：0
> 
> 时间：2013-02-06T13:14:29.250
> 
> 标签：css, menu, wrapper, transition, fade

我很难尝试改进我用作我的一个网站的基础的 magento 主题。我希望导航菜单（包装菜单）进行淡入和淡出转换，但是我想尝试在互联网上搜索大约两天但无法找到答案。

PS。我知道代码太脏了，我稍后会修复它。我也不会只使用 webkit 包，我只是想找出正确的方法来调整所有浏览器的代码。

这是html：

```
<nav class="prmd">
    <ul id="prmdNav">
        <li class="level0 level-top">
            <a href="index.php/"><span>Home</span></a>
         </li>
        <li class="level0 nav-1 level-top first parent">
            <a href="index.php/furniture.html" class="level-top">
                <span>Furniture</span>
            </a>
            <div class="sub-wrapper">
            <ul class="level0">
                <li>
                    <ol>
                        <li class="level1 nav-1-1 first">
                            <a href="index.php/furniture/living-room.html">
                                <span>Living Room</span>
                            </a>
                        </li>
                        <li class="level1 nav-1-2 last">
                            <a href="index.php/furniture/bedroom.html">
                                <span>Bedroom</span>
                            </a>
                        </li>
                    </ol>
                </li>
            </ul>
            </div>
        </li>
        <li class="level0 nav-2 level-top parent">
            <a href="index.php/electronics.html" class="level-top">
                <span>Electronics</span>
            </a>
            <div class="sub-wrapper">
            <ul class="level0">
                <li >
                    <ol>
                        <li class="level1 nav-2-1 first">
                            <a href="index.php/electronics/cell-phones.html">
                                <span>Cell Phones</span>
                            </a>
                        </li>
                        <li class="level1 nav-2-2 parent">
                            <a href="index.php/electronics/cameras.html">
                                <span>Cameras</span>
                            </a>
                            <div class="sub-wrapper">
                            <ul class="level1">
                                <li class="level2 nav-2-2-1 first">
                                    <a href="index.php/electronics/cameras/accessories.html">
                                        <span>Accessories</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-2-2 last">
                                    <a href="index.php/electronics/cameras/digital-cameras.html">
                                        <span>Digital Cameras</span>
                                    </a>
                                </li>
                            </ul>
                            </div>
                        </li>
                        <li class="level1 nav-2-3 last parent">
                            <a href="index.php/electronics/computers.html">
                                <span>Computers</span>
                            </a>
                            <div class="sub-wrapper">
                                <ul class="level1">
                                <li class="level2 nav-2-3-3 first">
                                    <a href="index.php/electronics/computers/build-your-own.html">
                                        <span>Build Your Own</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-4">
                                    <a href="index.php/electronics/computers/laptops.html">
                                        <span>Laptops</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-5">
                                    <a href="index.php/electronics/computers/hard-drives.html">
                                        <span>Hard Drives</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-6">
                                    <a href="index.php/electronics/computers/monitors.html">
                                        <span>Monitors</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-7">
                                    <a href="index.php/electronics/computers/ram-memory.html">
                                        <span>RAM / Memory</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-8">
                                    <a href="index.php/electronics/computers/cases.html">
                                        <span>Cases</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-9">
                                    <a href="index.php/electronics/computers/processors.html">
                                        <span>Processors</span>
                                    </a>
                                </li>
                                <li class="level2 nav-2-3-10 last">
                                    <a href="index.php/electronics/computers/peripherals.html">
                                        <span>Peripherals</span>
                                    </a>
                                </li>
                                </ul>
                            </div>
                        </li>
                    </ol>
                </li>
            </ul>
            </div>
        </li>
        <li class="level0 nav-3 level-top last parent">
            <a href="index.php/apparel.html" class="level-top">
                <span>Apparel</span>
            </a>
            <div class="sub-wrapper">
                <ul class="level0">
                    <li >
                        <ol>
                            <li class="level1 nav-3-1 first">
                                <a href="index.php/apparel/shirts.html">
                                    <span>Shirts</span>
                                </a>
                            </li>
                            <li class="level1 nav-3-2 parent">
                                <a href="index.php/apparel/shoes.html">
                                    <span>Shoes</span>
                                </a>
                                <div class="sub-wrapper">
                                    <ul class="level1">
                                        <li class="level2 nav-3-2-1 first">
                                            <a href="index.php/apparel/shoes/mens.html">
                                                <span>Mens</span>
                                            </a>
                                        </li>
                                        <li class="level2 nav-3-2-2 last">
                                            <a href="index.php/apparel/shoes/womens.html">
                                                <span>Womens</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="level1 nav-3-3 last">
                                <a href="index.php/apparel/hoodies.html">
                                    <span>Hoodies</span>
                                </a>
                            </li>
                        </ol>
                    </li>
                </ul>
            </div>
        </li> 
```

这是CSS代码：

```
/********** < Navigation */
.nav-container {width:100%; margin:0 auto; position:relative; z-index:10010; }
#navigation_select{display:none; min-width:100% }
nav .nav-top-title, .nav-container .nav-top-title{font-family:'Myriad Pro', sans-serif; font-size:16px; text-align:center; margin:0; display:none !important; }

nav.prmd {width:100%; margin:0 auto; position:relative; z-index:10010; }
#prmdNav { width:780px; margin:31px 0 34px 46px; padding:0; position:relative; border:none; float:left; -webkit-transition: all 0.5s ease;}

/* All Levels */
#prmdNav li { text-align:left; position: static;  }
#prmdNav li.over { z-index:998; }
#prmdNav li.parent {}
#prmdNav li a { display:block; text-decoration:none; font-weight:300; }
#prmdNav li a:hover { text-decoration:none; }
#prmdNav li a span { display:block; white-space:nowrap; cursor:pointer; }
#prmdNav li ul a span { white-space:normal; }

/* 1st Level */
#prmdNav>li { float:left; position:relative; margin:0 3px 3px; background-color:white;}
#prmdNav>li>a {-webkit-transition:color 0.2s ease-in-out; position:relative; float:left; padding:0; color:#555; font-size:14px; font-family:"Myriad Pro",sans-serif; font-weight:700; line-height:36px; letter-spacing:-0.1em; text-transform:uppercase; }
#prmdNav>li>a>span{padding:0px 10px; border-top:3px solid transparent; border-left:3px solid transparent;  border-right:3px solid transparent; border-bottom:0px;; -webkit-transition:border 0.5s ease;}
#prmdNav>li:hover>a>span,
#prmdNav>li.over>a>span,
#prmdNav>li.active>a>span {border-top:3px solid #f2f2f2; border-left:3px solid #f2f2f2;  border-right:3px solid #f2f2f2; border-bottom:0px; background:#fff;  }
#prmdNav>li>a:hover {color:#d1bfaa;}
#prmdNav>li:hover,
#prmdNav>li.over, 
#prmdNav>li.over>a{z-index:1000;}
#prmdNav>li>a:hover>span,
#prmdNav>li.over>a>span,
#prmdNav>li.active>a>span {}
#prmdNav>li.custom-block>a, #prmdNav>li.custom-block>a>span {cursor:default;}

/* 2nd Level */
/*#prmdNav ul,*/
#prmdNav div.sub-wrapper {position:absolute; z-index:999; width:auto; padding:16px 0; margin:36px 0 0; left:-10000px; background:#fff; border:3px solid #f2f2f2;}
#prmdNav div.sub-wrapper ul { position:static; width:auto;}

/* 3rd+ leven */
/*#prmdNav ul ul,*/
#prmdNav div.sub-wrapper ul div.sub-wrapper { top:-5px; margin:0 0 0 101px; padding:0; width:auto; border:none;
    -webkit-box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.15);
       -moz-box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.15);
            box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.15);}
#prmdNav ul div.sub-wrapper ul{ padding:16px; width:auto; }
#prmdNav ul li { float:none; border:none; width:210px; line-height:28px; position:relative; }
#prmdNav ul li.last {}
#prmdNav ul li a {float:none; padding:0 10px; font-family:Arial, serif; font-size:12px; font-weight:normal; color:#322c29 !important; background:transparent none; }
#prmdNav ul li.active > a {background:#332d2a !important; color:#fff !important; }
#prmdNav ul li.over > a, #prmdNav ul li a:hover {background:#f5f5f5; }

/* Show menu */
#prmdNav li ul.shown-sub,
#prmdNav li div.shown-sub { left:0px; z-index:999; }
#prmdNav li .shown-sub ul.shown-sub,
#prmdNav li .shown-sub li div.shown-sub { left:15px; }

#prmdNav li.custom-block div.sub-wrapper { padding:16px;}
#prmdNav li.custom-block div.sub-wrapper strong {color:#373230; font-family:"Myriad Pro", sans-serif; font-weight:700;}
#prmdNav li.custom-block div.sub-wrapper a { display:inline; color:#383331; float:none; font-weight:300; padding:0px; text-decoration:underline; border:none !important; background:transparent none !important;}
#prmdNav li.custom-block div.sub-wrapper a:hover,
#prmdNav li.custom-block div.sub-wrapper>ul>li a:hover,
#prmdNav li.custom-block div.sub-wrapper ul li.over > a{ color:#383331 !important; text-decoration:none; background:transparent none !important;}
#prmdNav li.custom-block div.sub-wrapper>ul, #prmdNav li.custom-block div.sub-wrapper ul {}
#prmdNav li.custom-block div.sub-wrapper>ul>li, #prmdNav li.custom-block div.sub-wrapper ul li { width:auto; float:none; background:transparent url("../images/arrow_item.gif") no-repeat 10px 8px !important;; line-height: 22px; padding: 0 10px 0 20px;}

#nav { width:780px; margin:31px 0 34px 46px; padding:0; position:relative; border:none; float:left; } 
```