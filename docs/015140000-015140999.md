# StackOverflow 问答 15140000-15140999

# php - php 语法 $a = $b = 1;

> ID：15140007
> 
> 赞同：3
> 
> 时间：2013-02-28T15:59:44.397
> 
> 标签：php, syntax

是

```
$a = 1;
$b = $a; 
```

等于写这个？

```
$a = $b = 1; 
```

第二个示例是否总是将 1 作为 $a 和 $b 的值，即使 $a 和 $b 已经分配了一个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:00:58.270

[引用文档：](http://php.net/manual/en/language.operators.assignment.php)

> 赋值表达式的值就是赋值的值。也就是说，"$a = 3" 的值是 3。这可以让你做一些棘手的事情：

```
<?php

$a = ($b = 4) + 5; // $a is equal to 9 now, and $b has been set to 4.

?> 
```

因此，要回答您的问题，分配的结果`$b = 1`是 1，因此，`$a = $b = 1`会将`$b = 1`-- 即 1-- 的值分配给`$a`。

**话虽**如此，滥用它会导致代码难以阅读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T16:01:24.197

是的，PHP 将`1`输入`$b`然后输入`$b`值`$a`，即`1`。

没有歧义，因为第一个任务是`$b = 1`，下一个是`$a = $b`。

# sass - Sass 导入标签

> ID：15140009
> 
> 赞同：3
> 
> 时间：2013-02-28T15:59:47.320
> 
> 标签：sass

我是 sass 新手，在进口方面遇到了一些麻烦。这些是我的进口

```
@import "reset";
@import "variables";
@import "fonts";
@import "mixins";
@import "grid";
@import "foundations";
@import "forms"; 
```

这些是我的文件的名称 reset.scss、variables.scss、fonts.scss、mixins.scss、grid.scss、foundations.scss、forms.scss。

知道他们为什么不进口吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:00:38.927

Main sass 文件中的文档名称必须与您尝试导入的文件的名称匹配，否则将无法正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-11T10:24:52.780

您可能想要研究的是[SMACSS](http://smacss.com/)，它将帮助您构建文档并避免嵌套疯狂！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-09T10:12:57.020

请参阅此处的“部分”：http: [//sass-lang.com/guide](http://sass-lang.com/guide)

我看到你正在使用 Foundation，所以也一定要阅读关于它的部分内容：http: [//zurb.com/university/lessons/35](http://zurb.com/university/lessons/35)

# javascript - 我如何结合 html、css 和 javascript 编码来使我的轮播工作？

> ID：15140011
> 
> 赞同：1
> 
> 时间：2013-02-28T15:59:52.113
> 
> 标签：javascript, html, css, carousel

我将以下代码拆分为 html、css 和 javascript，但我不知道如何将它们组合到记事本中，以便将其嵌入到我的网站中。（图片来源和文字只是示例。）

**HTML**

```
<div id="wrapper">
<div id="text">
    <h3>Geneva International Motor Show</h3>
    <p>The Geneva International Motor Show will open to the public from 03 to       13 March, presenting more than 260 exhibitors and more than 175 world and European premieres. 02 March 2011.<br />
        <small>Source: <a href="http://gigapica.geenstijl.nl/2011/03/geneva_international_motor_sho.html" target="_blank">gigapica.geenstijl.nl</a></small></p>
</div>
<div id="images">
    <div id="a">
        <img src="img/car1.jpg" alt="car1" width="275" height="200" />
        <span>The new Swiss Sbarro TwoFort100 Concept car is shown during the press day at the 81st Geneva International Motor Show in Geneva, Switzerland, on 01 March 2011\. </span>
    </div>
    <div>
        <img src="img/car2.jpg" alt="car2" width="275" height="200" />
        <span>The new Toyota FT-86 II Concept car on display during the press day at the 81st Geneva International Motor Show in Geneva, Switzerland, 02 March 2011\. </span>
    </div>
    <div>
        <img src="img/car3.jpg" alt="car5" width="275" height="200" />
        <span>The new Renault Dezir Concept car is on display during the press day at the 81st Geneva International Motor Show in Geneva, Switzerland, 02 March 2011\. </span>
    </div>
    <div>
        <img src="img/car4.jpg" alt="car6" width="275" height="200" />
        <span>The new Dodge Challenger SRT8 392 is on display during the press day at the 81st Geneva International Motor Show in Geneva, Switzerland, 02 March 2011.</span>
    </div>
    <div>
        <img src="img/car5.jpg" alt="car8" width="275" height="200" />
        <span>The new Nissan Esflow Concept car is on display during the press day at the 81st Geneva International Motor Show in Geneva, Switzerland, 02 March 2011\. </span>
    </div>
    <div>
        <img src="img/car6.jpg" alt="car9" width="275" height="200" />
        <span>A study of Volkswagen named Bulli is on display at International Geneva Motor Show at the Palexpo fairground in Geneva, Switzerland, 03 March 2011</span>
    </div>
</div>
</div> 
```

**CSS**

```
 html, body {
    height: 100%;
    padding: 0;
    margin: 0;
    }
    body {
    min-height: 650px;
}
    body * {
    font-family: Arial, Geneva, SunSans-Regular, sans-serif;
    font-size: 14px;
    color: #333;
    line-height: 22px;
}

    #wrapper {
    width: 825px;
    margin: 0 0 0 -412px;
    position: absolute;
    left: 50%;
    top: 30px;
}
    #text h3 {
    font-size: 26px;
}
    #text small, #text small * {
    font-size: 12px;
    color: #666;
}
    #images {
    width: 900px;
    overflow: hidden;
}
    #images div, #images img {
    display: block;
    float: left;
    width: 275px;
    height: 200px;
}
    #images span {
    background-color: black;
    color: #ccc;
    display: block;
    float: left;
    width: 215px;
    height: 160px;
    padding: 40px 30px 0 30px;
    } 
```

**Javascript**

```
$(function() {
    $('#images > div').each(function() {
        var $cfs = $(this);
        $cfs.carouFredSel({
            direction: 'up',
            circular: false,
            infinite: false,
            auto: false,
            scroll: {
                queue: 'last'
            },
            items: {
                visible: 1,
                width: 275,
                height: 200
            }
        });
        $cfs.hover(
            function() {
                $cfs.trigger('next');
            },
            function() {
                $cfs.trigger('prev');
            }
        );
    });
    }); 
```

任何对此的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:03:35.927

```
<!DOCTYPE html>
<html lang"en">
  <head>
    <meta charset="utf-8">
    <title>...</title>
    <link rel="stylesheet" type="text/css" href="path/to/your.css" />
    <script src="path/to/your.js"></script>
  </head>
  <body>
   ...your html
  </body>
</html> 
```

我添加了一些通常放在 html 文档头部的东西，比如 charset 和 lang 属性。此外，此文档类型适用于 html5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:04:37.017

您可以引用内联代码，也可以链接到文件。

要内联引用所有内容，请在 HTML 上方将 CSS 置于：

```
<style>

</style> 
```

然后把你的javascript放在：

```
<script>

</script> 
```

**或者**

将你的 CSS 保存到一个文档中，比如 slider.css

将您的 javascript 保存到一个名为 slider.js 的文件中

然后链接到他们：

```
<link href="slider.css" type="text/css" rel="stylesheet" /> 
```

和

```
<script src="slider.js" type="text/javascript></script> 
```

请注意，以上两个代码片段必须放在您的`<head></head>`标签内

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:03:01.647

将此添加到`<head>`html 文件的部分中：

```
<link rel="stylesheet" href="yourcssfilename.css"/>
<script type="text/javascript" src="yourjsfilename.js"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:05:39.857

```
<head>
<script type="text/javascript" src="<Location and filename of Javascript file including file extension>"></script>
<link rel="stylesheet" type="text/css" href="<Location and filename of CSS file including file extension>">
</head> 
```

用服务器/机器上的实际文件位置替换这些东西。

# android - 实现用于更新 UI 的侦听器接口的主要活动

> ID：15140013
> 
> 赞同：2
> 
> 时间：2013-02-28T15:59:56.363
> 
> 标签：android, multithreading, android-activity, listener, handler

**所以首先我想出了如何从另一个线程更新 UI。我将 AsyncTask 和 Handler 类用于其他任何事情**

**但**首先我做错了，现在我真的想找出问题所在。

所以我的第一个尝试是创建一个`MyListener`带有方法的 java 接口，`updateUI()`并让主要活动实现该侦听器接口。比我在处理 http 请求的线程中将主要活动注册为侦听器。`MyListener.updateUI()`在请求完成后我从那个线程调用。`updateUI()`用请求的结果更新一些文本视图。

这在安卓中不起作用。我没想到。我不知道为什么。异常告诉我，我必须从 UI 线程进行这些更新。

当我使用从侦听器接口实现的主要活动进行调用时，我不明白为什么`updateUI()`不在 UI 线程中运行。`MyListener.updateUI()``updateUI()`

你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:11:40.203

我看到你已经在其他线程中执行了 http 请求，但你没有使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)，对吗？我建议你应该使用那个类，在`doInBackground`方法中执行 http 请求（因为它在主线程上工作），然后调用`MyListener.updateUI()`，`onPostExcute`因为这个方法总是在主线程中被调用。试一试，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:11:39.510

不管你是`MyListener.updateUI()`在你`MainActivity`的`onCreate()`方法中调用还是在其他任何方法中调用，如果你是从另一个线程中调用它，它都会抛出一个异常，因为你只能在应用程序主线程中更新视图。为此，您可以执行以下操作：

```
public static void updateUI(){

       ((Activity) mContext).runOnUiThread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            // update your UI here and be sure to give the activity context, not getApplicationContext();
        }
    });

} 
```

把它放在你的活动中，并在你`onCreate()`做类似的事情：

```
public static Context mContext;
@Override
public void onCreate(Bundle savedInstanceState){
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   mContext = this;
} 
```

并`updateUI()`从您想要执行的任何线程调用。

当然，这不是您更新界面的唯一方法。您可以查看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)Android SDK 中的实现。这是一个非常强大的类，我认为它会更有效地做你想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:07:28.273

您收到此错误是因为控件仍在后台线程中...尽管您已调用已在您的活动中实现的接口方法。因此，为了将控件返回到您的 UI 线程，您需要使用处理程序。控件不会通过调用位于您的活动中的方法从后台线程转到 UI 线程。

希望这能澄清你的疑问。

# php - 带有while循环的php回显表

> ID：15140016
> 
> 赞同：3
> 
> 时间：2013-02-28T16:00:03.510
> 
> 标签：php, mysql, while-loop, html-table

我正在创建一个表并希望它以某种方式布置并且必须从数据库中检索数据。我正在尝试将其设置在顶部示例中包含用户名的位置...

```
吉姆·克里斯·艾伦·里克
 7 8 4 5

```

我的代码看起来像这样，我已经搞砸了几个小时，无法弄清楚为什么我无法按照我的意愿设置它。任何帮助，将不胜感激。它是一个while循环。

```
 while ($pickresults= mysql_fetch_assoc($picksquery)) {
//first row                         
    echo '<th> '.$pickresults['username'].' </th> ';  
        echo ' <td> '.$pickresults['firstgame'].' </td> '; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:07:53.380

首先，您应该学习表格的 HTML 代码。您的代码将表头 ( `th`) 放在普通列项 () 旁边`td`。您需要先遍历标题，然后下一行遍历列项或构建字符串`echo`。

```
$headers = $col = "";
while($pickresults= mysql_fetch_assoc($picksquery)){
    $headers .= "<th> {$pickresults['username']} </th>";
    $col .= "<td> {$pickresults['firstgame']} </td>";
}

echo "<table><tr>$headers</tr><tr>$col</tr></table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:05:20.417

先收集表头和表体，**然后**输出。你做的方式，html是这样的，我想很容易看出html有什么问题

```
<th>name</th>
<td>value></td>
<th>another name</th>
<td>another value</td> 
```

你需要的是这样的：

```
$td = '';
$th = '';
while ($pickresults= mysql_fetch_assoc($picksquery)) {                      
    $th .= '<th> '.$pickresults['username'].' </th> ';  
    $td .= '<td> '.$pickresults['firstgame'].' </td> ';
}
echo '<table><tr>' . $th . '</tr><tr>' . $td . '</tr>' . '</table>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:05:28.910

您的结构正在创建一个 TH，然后是一个 TD，然后是一个 TH，然后是一个 TD，等等。

这不是您创建表格的方式，您首先需要制作四个 TH，然后您可以制作四个 TD。

编辑：Marko D 提供了代码来解释我的意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:12:51.110

`<th>`您需要在-tags中写入所有用户名。我先把它放在一个数组中，然后从数组中放入表中......

```
while ($pickresults= mysql_fetch_assoc($picksquery)) {

    $picked[]=$pickresults;

}

echo "<table><tr>"; // create table and 1st row

foreach ($picked as $pick) {

     echo "<th>{$pick['username']}</th>"; // create 1st line headers

}

echo "</tr><tr>"; // close 1st row and open 2nd

foreach ($picked as $pick) {

    echo "<td>{$pick['firstgame']}</td>"; // create 2nd line...

}

echo "</tr></table>"; // close 2nd row and table 
```

# sqlite - 声明一个约束，但我的代码有什么问题？

> ID：15140020
> 
> 赞同：0
> 
> 时间：2013-02-28T16:00:22.073
> 
> 标签：sqlite

当我尝试在 SQLite 中运行以下命令时出现 SQL 语法错误：

```
CREATE TABLE R (a INT, b INT, c INT, CHECK (ALL (SELECT a + b FROM R))); 
```

有人可以告诉我我做错了什么吗？

感激不尽/妮娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:09:56.373

对不起，我在浪费你的时间！我无意中遗漏了一些代码（c>=），但似乎在尚未创建该表时我无法引用该表 R。

# sql-server - 从 x64 sql server 到 x64 Oracle 的链接服务器

> ID：15140023
> 
> 赞同：0
> 
> 时间：2013-02-28T16:00:35.117
> 
> 标签：sql-server, oracle, linked-server

我在 Windows 2003 服务器（Service Pack 2）上有一个 sql server 2005 x64 SP2 服务器（9.00.5069.00 (X64)）

我想创建一个从该服务器到在 x64 位机器上运行的 Oracle 服务器的链接服务器。我确实安装了 x86 Oracle 客户端。我还需要 x64 Oracle 客户端吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:20:09.703

要在 64 位 SQL Server 上创建链接服务器，您需要一个 64 位驱动程序用于您的目标。

32 位驱动程序不能用于 64 位 SQL Server 上的链接服务器。

# javascript - 我怎么知道是否正在播放 youtube 视频？（可以在 iframe 中使用吗？）

> ID：15140029
> 
> 赞同：0
> 
> 时间：2013-02-28T16:00:52.993
> 
> 标签：javascript, video, youtube

我有一个带有图像和 youtube 视频的自动幻灯片。如果用户在视频上单击播放，当幻灯片继续运行时，会显示下一张幻灯片，从而隐藏视频。

是否可以知道视频是否正在运行，以阻止幻灯片隐藏视频？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:45:09.020

根据您想要的轻松程度，您可以使用 Popcorn.js ( [https://github.com/mozilla/popcorn-js](https://github.com/mozilla/popcorn-js) )。这将允许您加载网络媒体，然后根据视频中发生的情况在页面上执行操作（无论您想要什么，更改页面，播放或暂停幻灯片，触发一些 JS 等），以及让您查询视频的使用爆米花 API 状态

# jquery - jQuery变量更改

> ID：15140034
> 
> 赞同：0
> 
> 时间：2013-02-28T16:01:04.563
> 
> 标签：jquery, variables, timer, delay

我正在学习 jQuery。我有这个代码：

```
$(document).ready(function () {
var status = false;
$("#red").click(function() {
    if(status == false) {
        $("#red").animate({
            width: "800px",
            height: "800px"
        }, 1000);
        $("#text").delay(1000).fadeTo(1000, 1.0);
        status = true;

    }
    else if(status == true) {
        $("#text").fadeTo(1000, 0.0);
        $("#red").delay(1000).animate({
            width: "200px",
            height: "200px"
        }, 1000);
        status = false;
    }
}); 
```

});

现在，我希望点击不会堆叠。我想在一秒钟后更改变量“状态”值，然后点击不会堆叠。请问我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:06:10.853

您可以在动画完成时将全局变量设置为状态，并向 if 添加一个附加参数：-

```
var check;

$(document).ready(function () {
var status = false;
$("#red").click(function() {
if(status == false && check == true) {
    $("#red").animate({
        width: "800px",
        height: "800px"
    }, 1000, function() {
     // Animation complete.
     check = true;

     });

    $("#text").delay(1000).fadeTo(1000, 1.0);
    status = true;

}
else if(status == true && check == true) {
    $("#text").fadeTo(1000, 0.0);
    $("#red").delay(1000).animate({
        width: "200px",
        height: "200px"
    }, 1000, , function() {
     // Animation complete.
     check = true;

     });
    status = false;
} 
```

});

# c# - Linq to SQL 中的多值比较

> ID：15140035
> 
> 赞同：3
> 
> 时间：2013-02-28T16:01:07.450
> 
> 标签：c#, linq, entity-framework, linq-to-entities

有没有人有一个更整洁的方式来使用 linq to entity？

我正在尝试获取每个组中具有最高 X、Y 或 Z 的项目，例如 Max( X, Y, Z )

```
var points = from g in groupedData
             from ep in g
             where (ep.X > ep.Y ?
                               ep.X > ep.Z ? ep.X : ep.Z
                             : ep.Y > ep.Z ? ep.Y : ep.Z)
             == g.Max(e => e.X > e.Y ?
                           e.X > e.Z ? e.X : e.Z
                             : e.Y > e.Z ? e.Y : e.Z)
             select ep; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:13:15.320

```
var points = from g in groupedData
             let gMax = g.Max(e => e.X > e.Y ?
                                    (e.X > e.Z ? e.X : e.Z)
                                  : (e.Y > e.Z ? e.Y : e.Z))
             from ep in g
             where ep.X == gMax
                   || ep.Y == gMax
                   || ep.Z == gMax
             select ep; 
```

PS：Linq2SQL 还是 Linq2Entities？因为您标记了“EF”！

编辑：我刚刚成功测试了这个：

```
var points = from g in groupedData
             let gMax = g.Max(e => new int[] { e.X, e.Y, e.Z }.Max())
             from ep in g
             where ep.X == gMax
                   || ep.Y == gMax
                   || ep.Z == gMax
             select ep; 
```

你确认它适用于你的情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:13:49.067

我会创建一个扩展方法来处理它

```
public static int Max(params int[] a)
{
    return a.Max();
} 
```

或类似的规定

然后你会像使用它一样

```
var largestNumber = Max(1,2,3,4,5); 
```

或者

```
Max(ep.X,ep.Y,ep.Z) == Max(e.X,e.Y,e.Z) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:22:01.940

如果你真的想去掉问号和冒号，你可以试试这个：

```
var points = from g in groupedData
         from ep in g
         select ep).OrderByDescending(x => x.GetType().GetProperties().Max(y => y.GetValue(x,null))).FirstOrDefault()); 
```

解释：

这基本上使用反射来获取项目中的属性列表（在您的情况下为 X、Y 和 Z），然后根据属性之间的最大值对项目进行排序。然后从列表中选择第一个应该是具有最高属性的项目。

积极的一面是，如果您决定再添加一个属性（比如说 K），您将不必更改任何内容。（想象一下，如果您还想将 K 添加到与问号和冒号进行的比较中，您将需要做什么）。

**注意：** 如果您的类中有其他不想在比较中使用的属性，您可以添加替换`x.GetType().GetProperties()`为

```
x.GetType().GetProperties().Select(prop =>prop.PropertyType.Name.Equals("Int32")) 
```

这只会获得整数属性。仅在需要时使用，否则忽略。

希望有帮助

# c# - 从响应中显示数组中的所有元素

> ID：15140038
> 
> 赞同：0
> 
> 时间：2013-02-28T16:01:17.270
> 
> 标签：c#, arrays, search, request

好的，关于请求和响应值，我有一个令人困惑的问题（我认为）。

我创建了一个请求，以根据公司名称在数据库中搜索客户。这是代码：

```
//Search through customers
        public void ArrangeRequest()
        {
            _request = new CustomerSearchRequest();                  
            _request.Company = "NewCustomers Inc";
        } 
```

这是请求和给定值之前的客户信息：

```
//Customer Info
        _request.Customer = new CustomerInfo
        {       
            Company = "NewCustomers Inc. ",
            CustStatus = Status,
            CustID = custid, 
            Fax = "(855) 555-6956",
            Phone = "(568) 895-6954",
            ProviderId = 56958,
            TechContact = _techcontact,
            TimeZoneInfoID = "Central Standard Time",
        }; 
```

这个请求有效，当我调试时，我收到了找到 52 个客户的消息。现在，这些客户中的每一个都有一个唯一的客户 ID，该 ID 是在他们创建时创建的。当我调试时，我能够看到客户的所有信息，包括他们的客户 ID。我的问题是我试图将所有这些值输出到文本文件。问题是客户 ID 在一个数组中，所有其他信息都在：`CustomerInfo[]`。现在我可以通过说 CustomerInfo[1] 或 CustomerInfo[2] 来输出数组中的每个单独的值，但是我希望能够进行搜索并输出数组中的所有值，而不必调用每个单独的值。

我想要这个，这样如果我想搜索另一家公司并且它有 1000 个结果，那么我显然不必打电话给每个公司。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:06:18.093

**根据 OP 评论编辑：**

```
foreach(var customer in _response.Customers)
{
    Console.WriteLine(customer.CustID);
} 
```

# windows-installer - 在卸载补丁时运行自定义操作

> ID：15140043
> 
> 赞同：0
> 
> 时间：2013-02-28T16:01:26.630
> 
> 标签：windows-installer, installshield, uninstallation, custom-action

我有一个在安装和卸载期间执行自定义操作的 .msi。基于 msi，我创建了不可卸载的补丁，除非您卸载已修补的应用程序。

问题是当我应用补丁时，自定义操作在卸载应用程序时被禁用......

要创建补丁，您应该创建一个次要升级 msi。因此，我在创建次要升级 msi 时为每个自定义操作设置了属性。

我将属性设置如下（我使用 installshield 2012 Pro）。

```
Run during Patch Uninstall : Yes
Install Exec Sequence : ( After the InstallValidate action)
Install Exec Condition : REMOVE = "ALL" 
```

但它不起作用。创建运行自定义操作的补丁时，我还应该注意什么？

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:47:30.690

在补丁卸载上运行自定义操作有点涉及。MSI SDK 有很多关于这个主题的信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa370739](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370739(v=vs.85).aspx) (v=vs.85).aspx 。首先要检查的是您的 Windows Installer 版本是否足够新，MSI v4.5+。

# selenium - Selenium remoteWebDriver：连接到 selenium-standalone-server 失败（驱动程序版本未知）

> ID：15140045
> 
> 赞同：9
> 
> 时间：2013-02-28T16:01:28.553
> 
> 标签：selenium, selenium-webdriver, maven-plugin, remotewebdriver

在用 Java 编写的应用程序测试中尝试使用 remoteWebDriver 设置与 selenium-server-standalone 的连接后，我收到了一个异常。

问题与使用 maven 启动 selenium-server-standalone（使用 Xvfb）的 remoteWebDriver 的使用有关（因为通过不同的会话 Xvfb 手动运行，然后 selenium-server 独立运行，应用程序测试正在运行）。环境由RH Linux R4.1.x、Selenium 2.1、firefox 3.6组成。selenium-server-standalone 和应用程序测试都在同一台机器（虚拟机）上执行。

如前所述，如果此实例由单独的 PUTTY 会话（与用于启动应用程序测试的会话不同）使用以下命令启动，则应用程序测试成功连接到 selenium-server-standalone-2.21.0 实例：

```
#Xvfb :20 &
#export DISPLAY=:20
#Java –Dwebdriver.firefox.firefox=“/opt/firefox/firefox”  –jar selenium-server-standalone-2-.21.0.jar  -port 4441. 
```

连接到 selenium-server-standalone 的应用程序测试代码如下：

```
DesiredCapabilities capability = DesiredCapabilities.firefox();
capability.setPlatform(Platform.LINUX);
WebDriver driver = new RemoteWebDriver (new URL("http://127.0.0.1:14444/wd/hub"),capability);
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

现在尝试在开始应用程序测试之前使用 maven 单独启动 xvfb 和 selenium-server-stand 我收到以下错误（然后在同一个腻子会话中）：

```
selenium server conenction string: http://127.0.0.1:14444/wd/hub
brand community file name orig :/opt/optism_svn/trunk/ITests/Projects/core/bbCampaigns/BrandCommunitiesWD/src/test/resources/Orig_BrandCommunity_Test6386.csv
before connecting to web driver
15:17:05.591 INFO - Executing: [new session: {platform=LINUX, browserName=firefox, version=}] at URL: /session)
15:17:05.651 WARN - Exception thrown
java.util.concurrent.ExecutionException: org.openqa.selenium.WebDriverException: java.lang.reflect.InvocationTargetException
Build info: version: '2.2.1', revision: '16551', time: '2012-04-11 21:42:35'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.18-194.el5', java.version: '1.6.0_22'
Driver info: driver.version: unknown
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)
        at org.openqa.selenium.remote.server.DefaultSession.execute(DefaultSession.java:158)
        at org.openqa.selenium.remote.server.DefaultSession.<init>(DefaultSession.java:112 )
        at org.openqa.selenium.remote.server.DefaultSession.createSession(DefaultSession.java:89)
        at org.openqa.selenium.remote.server.DefaultDriverSessions.newSession(DefaultDriverSessions.java:92)
        at org.openqa.selenium.remote.server.handler.NewSession.handle(NewSession.java:62)
        at org.openqa.selenium.remote.server.rest.ResultConfig.handle(ResultConfig.java:202)
        at org.openqa.selenium.remote.server.DriverServlet.handleRequest(DriverServlet.java:597)
        at org.openqa.selenium.remote.server.DriverServlet.doPost(DriverServlet.java:548)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
        at org.openqa.selenium.remote.server.DriverServlet.service(DriverServlet.java:520)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.openqa.jetty.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
        at org.openqa.jetty.jetty.servlet.ServletHandler.dispatch(ServletHandler.java:677)
        at org.openqa.jetty.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
        at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1530)
        at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1482)
        at org.openqa.jetty.http.HttpServer.service(HttpServer.java:909)
        at org.openqa.jetty.http.HttpConnection.service(HttpConnection.java:820)
        at org.openqa.jetty.http.HttpConnection.handleNext(HttpConnection.java:986)
        at org.openqa.jetty.http.HttpConnection.handle(HttpConnection.java:837)
        at org.openqa.jetty.http.SocketListener.handleConnection(SocketListener.java:243)
        at org.openqa.jetty.util.ThreadedServer.handle(ThreadedServer.java:357)
        at org.openqa.jetty.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
Caused by: org.openqa.selenium.WebDriverException: java.lang.reflect.InvocationTargetException
Build info: version: '2.2.1', revision: '16551', time: '2012-04-11 21:42:35'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.18-194.el5', java.version: '1.6.0_22'
**Driver info: driver.version: unknown**
        at org.openqa.selenium.remote.server.DefaultDriverFactory.callConstructor(DefaultDriverFactory.java:68)
        at org.openqa.selenium.remote.server.DefaultDriverFactory.newInstance(DefaultDriverFactory.java:52)
        at org.openqa.selenium.remote.server.DefaultSession$BrowserCreator.call(DefaultSession.java:197)
        at org.openqa.selenium.remote.server.DefaultSession$BrowserCreator.call(DefaultSession.java:184)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:151)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.openqa.selenium.remote.server.DefaultDriverFactory.callConstructor(DefaultDriverFactory.java:58)
        ... 9 more
**Caused by: java.lang.IllegalStateException: The path to the chromedriver executable must be set by the webdriver.chrome.driver system property**
        at com.google.common.base.Preconditions.checkState(Preconditions.java:172)
        at org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:90)
        at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:107)
        ... 14 more
**15:17:05.659 WARN - Exception: The path to the chromedriver executable must be set by the  webdriver.chrome.driver system property** 
```

用于启动 xvfb 和 selenium 服务器的 pom.xml 如下（部分相关 xvfb 和 selenium 的摘录）：

```
<properties>
    <!-- Dependencies -->
    <selenium-version>2.21.0</selenium-version>
<selenium-plugin-version>2.3</selenium-plugin-version>

<dependency>
<groupId>org.seleniumhq.selenium</groupId>
<artifactId>selenium-java</artifactId>
<version>${selenium-version}</version>
</dependency> 
```

......

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>selenium-maven-plugin</artifactId>
<version>${selenium-plugin-version}</version>
<configuration>
<background>true</background>
<port>14444</port>
</configuration>
<executions>

<execution>
<id>xvfb</id>
<phase>pre-integration-test</phase>
<goals>
<goal>xvfb</goal>
</goals>
….                      
<execution>
<id>start-selenium-server</id>
<phase>pre-integration-test</phase>
<goals>
<goal>start-server</goal>
</goals>
</execution> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:30:11.367

我昨天有同样的错误：

```
 Exception: The path to the chromedriver executable must be set by the  webdriver.chrome.driver system property** 
```

我通过在节点机器的路径中添加 chromedriver.exe 解决了这个问题。（[https://code.google.com/p/chromedriver/downloads/list](https://code.google.com/p/chromedriver/downloads/list)）但是如果尝试启动 Firefox 会出现这个问题很奇怪......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T21:54:28.390

```
npm install chromedriver 
```

有同样的问题，这对我有用。

# asp.net-mvc - 如何在 MVC 中获取页面详细信息时将 id 值而不是从查询字符串传递给控制器

> ID：15140048
> 
> 赞同：1
> 
> 时间：2013-02-28T16:01:36.287
> 
> 标签：asp.net-mvc

我想将被保险人 ID 传递给控制器​​，同时获取如下所示的被保险人详细信息：

// GET: /Insured/Details/123456789

但出于安全原因，我不想在查询字符串中传递这个 ID 号 123456789。有人可以建议我最好的方法。我是 MVC 的新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:15:28.130

尝试通过 POST 将值作为隐藏参数提交。不过，您需要使用表单来进行 POST 提交。你不能使用链接。

```
<form method="POST" action="/Insured/Details">
    <input type="hidden" name="insuredid" value="123456789"/>
    <input type="submit"/>
</form> 
```

然后，您将通过请求参数获取该值。如果使用 Java servlet，它看起来像这样：

```
String myInsuredId = request.getParameter("insuredid"); 
```

我想它看起来也与其他平台相似。

注意：虽然将值作为隐藏参数传递会隐藏数据，但这不会阻止人们嗅探提交的数据或检查页面的 HTML 源。如果你真的想让这个安全，你需要使用某种形式的加密/安全。尝试查看 HTTPS 帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:26:26.967

您需要清理控制器中的输入，例如，如果客户已登录，您可以检查传递给控制器​​的 ID 是否真正属于客户。

请求中可通过的任何内容（无论是 POST 还是 GET）都是可欺骗的。

您还应该考虑通过 HTTPS 提供页面。

例如（asp.net MVC / C#）

```
public ActionResult Details(string id)
{
    if (Check(id) == false)
    {
        // Handle invalid input
        throw new HttpException(404, "HTTP/1.1 404 Not Found");
    }

    // create the model
    ...
} 
```

# database - VS 2008 数据库项目 - 在部署“数据库名称”期间未定义

> ID：15140053
> 
> 赞同：1
> 
> 时间：2013-02-28T16:01:53.430
> 
> 标签：database, deployment, database-project

我正在使用 VS 2008 并继承了我正在尝试部署的数据库项目。我正在做的部署是到一个新的数据库。（好像我正在设置一个新的安装）

部署操作是：创建脚本并部署到数据库。

我收到以下错误：Schema.dbschema(0,0)Error TSD01268: SQL Execution error: A fatal error occurred。找不到变量 DatabaseName。

DatabaseName 在项目属性中定义。

如果我查看部署脚本，我会看到声明已被注释掉。我可以删除注释并手动运行脚本并且它可以工作，但是当我重新生成脚本时，声明会再次被注释掉。

```
/*
:setvar DatabaseName "TestDb"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA\"
*/
GO 
```

我已经搜索了一个会导致声明被注释掉的设置，但没有找到任何东西。

我希望能够运行部署脚本而无需每次都对其进行编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:30:59.903

找到了！

在 Database.sqldeployment 中有一个名为“CommentOutSetVarDeclarations”的高级选项下的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:20:13.347

您是否在项目设置中指定了希望在部署时始终重新创建数据库？如果没有，请尝试设置此选项以查看是否可以为您解决此问题。[有关详细信息，请参阅此 MSDN 文章](http://msdn.microsoft.com/en-us/library/hh272681%28v=vs.103%29.aspx#bkmk_build_events)。

# google-apps-script - Web App 执行/访问范围

> ID：15140054
> 
> 赞同：1
> 
> 时间：2013-02-28T16:01:53.403
> 
> 标签：google-apps-script, google-apps

当我将 GAS 项目部署为 Web 应用程序时，我选择在用户访问它时执行该应用程序。“谁有权访问应用程序”选项我可以选择我自己或我域中的每个人。这个我明白。

但是，在我们的 Google Apps 环境中 - 我所属的域是我拥有管理员帐户的一个“tld”域下的许多“子域”之一。我没有权限在控制面板中进行全面探索以查看确切的组织，但我知道我可以通过我的云端硬盘与所有域中的所有人共享文档。我怎样才能让我的脚本以类似的方式运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:06:37.423

关于这个主题有几个很好的资源。

1.  链接到此的[Stackoverflow 问题](https://stackoverflow.com/questions/7063534/is-it-possible-to-have-sub-domain-email-with-google-apps)
2.  [谷歌支持回答](http://support.google.com/a/bin/answer.py?hl=en&answer=182452)

使用 Google Drive，“您不能限制共享给单个域中的用户”。我还没有找到答案，[但这是我能找到的最接近](http://support.google.com/a/bin/answer.py?hl=en&answer=182081)的答案。看来您只需要测试“我的域中的任何人”是否真的意味着“我的组织中的任何人”。如果您可以对此进行测试并报告，我将更新此答案。

# clojure - Clojure：分离 comp 和部分参数

> ID：15140056
> 
> 赞同：4
> 
> 时间：2013-02-28T16:02:00.637
> 
> 标签：clojure

假设我有一个需要两个参数的函数，并且参数的顺序会影响结果。

是否可以将第一个参数传递给 partial 或 comp 函数，并将另一个参数传递给它，如下所示：

```
(defn bar [arg1 arg2] (- arg1 arg2))
(def baz (partial (bar arg1)))
(def qux (comp str (bar arg1)))

(baz arg2)
(qux arg2) 
```

如果我想将 arg2 传递给函数，我可以做这样的事情吗？

```
(def baz2 (partial (bar _ arg2)))
(def qux2 (comp str (bar _ arg2)))

(baz arg1)
(qux arg1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:49:02.543

`partial`仅在左侧“填充”参数，因此如果您需要跳过参数，则必须使用`fn`：

```
(def baz2 #(bar %1 arg2)) 
```

还要注意，这`comp`要求它的所有参数都是函数，所以你的`qux`和`qux2`实际上是胡说八道。他们应该是：

```
(def qux (comp str baz))
(def qux2 (comp str baz2)) 
```

一般来说，Clojure 核心函数会将最有可能发生变化的变量放在*最后*，以使组合`comp`更加`partial`自然。（例如，collection 参数在 Clojure 中几乎总是排在最后，除了`into`将它放在最前面有意义的地方。）当您设计自己的函数时，您应该坚持这个约定，这样您就可以更轻松地组合您的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T17:31:54.330

[Scheme SRFI 26](http://srfi.schemers.org/srfi-26/srfi-26.html)有一个有用的宏`cut`，用于像这样的开槽参数。

对于您的减法，用法就像这样`bar`：

```
 ((cut bar <> 1) 2)
 ;=> 1
 ((comp str (cut - <> 1)) 2)
 ;=> "1" 
```

其中`<>`符号表示要填充的插槽。

`cut`自己在 Clojure中实现 a 是一个有趣的练习，但[这里是](https://gist.github.com/ghoseb/2397263)@Baishampayan Ghose 的一个端口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T16:13:54.497

这是我在repl中得到的：

```
user=> (defn bar [arg1 arg2] (- arg1 arg2))
#'user/bar
user=> (def baz (partial bar 5))
#'user/baz
user=> (def qux (comp str baz))
#'user/qux
user=> (baz 2)
3
user=> (qux 2)
"3" 
```

这是我从你的第一个例子中得到的最接近的。

对于第二个例子，也许一个简单的 defn 比一个部分 def 更好：

```
user=> (defn baz2 [x] (bar x 5))
#'user/baz2
user=> (def qux2 (comp str baz2))
#'user/qux2
user=> (baz2 2)
-3
user=> (qux2 2)
"-3" 
```

我建议您创建一个 repl 并自己尝试，这是发现我所知道的语言的第二个最佳方法（TDD 是第一个）。

干杯!

# codeigniter - Codeigniter - 修改购物车 $product_name_rules 以接受任何字符是否有风险？

> ID：15140059
> 
> 赞同：0
> 
> 时间：2013-02-28T16:02:10.217
> 
> 标签：codeigniter

我在 CI 中使用 Cart 类，我的产品名称包含许多“危险”字符，例如撇号、括号、分号、& 和许多非拉丁字符。

Cart Class 限制允许的字符，如下所示：

```
var $product_name_rules = '\.\:\-_ a-z0-9'; // alpha-numeric, dashes, underscores, colons or periods 
```

我知道我可以扩展 Cart 类并在 MY_Cart 类中用类似这样的东西覆盖这个限制：

```
$this->product_name_rules = '\d\D'; 
```

但这让我想知道——也许 CI 人有理由限制产品名称。也许通过消除限制，我为黑客打开了后门。

显然，当我将购物车中的项目添加到我的数据库时，我使用 Active Records 和查询绑定，这应该（据我的最佳理解）提供足够的防御 sql 注入等。

那么首先限制角色的想法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T05:34:35.683

不！好吧，让我说：“我看不到”：

虽然当我直接修改购物车核心的正则表达式时，codeigniter 似乎抛出了一些错误。所以我只是通过保留那里的内容并在末尾添加 /d/D 来进行调整，如下所示：

```
var $product_name_rules = '\.\:\-_ a-z0-9\d\D'; // alpha-numeric, dashes, underscores, colons or periods 
```

* * *

为了不因您可能不知道的原因而弄乱原始课程，请尝试扩展课程

你可以在这里找到指南：

> [http://ponderwell.net/2010/07/codeigniter-extending-the-cart-class-for-robust-product-names/](http://ponderwell.net/2010/07/codeigniter-extending-the-cart-class-for-robust-product-names/)

在应用程序/库中创建一个文件并将其命名为“MY_cart.php”。在该文件中，粘贴以下代码：

```
< ?php 
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Cart extends CI_Cart {
    function __construct() {
        parent::__construct();
        $this->product_name_rules = '\d\D';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:36:57.903

值得了解 CI 购物车库。因为当你制作自己的购物车时，它会让你对自己感觉非常好。:-) 说真的，每个尝试 CI 购物车的人都会遇到这个问题，并且有很多关于它的帖子。所以是的，您可以修改它，以便您可以在名称中使用不同的字符 - 但我会认真敦促您尽快制作自己的购物车。

购物车在产品页面上真正需要什么？它需要产品的 ID 和数量。就是这样 - 其他一切都应该直接来自您的产品表。

不要设置您的应用程序，以便在产品页面上有价格，然后您将价格发送到购物车。有人可以轻松修改表格并将较低的价格发送到购物车。

所以验证产品 ID - 然后直接从产品表中获取产品价格。这很容易，因为您这样做只是为了展示产品。您也可以通过这种方式获得产品名称 - 嘿，突然间您完全不必担心危险字符，而且您知道价格会准确无误。

* * *

Steward 对使用 ci cart lib 有很好的回答，他链接到的博客文章逐步解决了这些问题。您还可以复制购物车库的一部分并将它们放入 MY_cart，这是了解其工作原理的好方法，您可以进行简单的 mods。

# asp.net - Buddy Class 中的必需属性不适用于 Entity Framework 5 和 ASP.NET

> ID：15140062
> 
> 赞同：4
> 
> 时间：2013-02-28T16:02:18.887
> 
> 标签：asp.net, entity-framework-5, buddy-class

我的数据库有一个不可为空的字段，但可以包含一个空字符串。当我尝试使用 connection.SaveChanges() 保存记录时，我收到一个异常提示“MyField 字段是必需的”。

我创建了一个 BuddyClass 如下，但我仍然收到消息：

```
namespace MyNamespace {
[MetadataType(typeof(QuesT_Metadata))] public partial class QuesT { }
public class QuesT_Metadata {
    [Required(AllowEmptyStrings = true)
    public string MyField { get; set; }
}
} 
```

我可以使用 ErrorMessage 属性来更改引发的错误中的消息，因此我知道 Buddy Class 工作正常，但显然Required 属性不是。

我也尝试包含属性 DisplayFormat(ConvertEmptyStringToNull = false)，但得到了相同的结果。

我以前做过，而且下面的第一个参考似乎说它应该工作，所以我很难过。任何人都可以帮忙吗？

参考文献（只有前两个似乎直接相关，但其他可能仍然有帮助）：

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.requiredattribute.allowemptystrings.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.requiredattribute.allowemptystrings.aspx)
[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute .convertemptystringtonull.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.convertemptystringtonull.aspx)
[如何使实体框架属性不为 NULL，但在表单提交中不需要](https://stackoverflow.com/questions/12137902/how-to-make-an-entity-framework-property-not-null-but-not-required-in-form-subm)
[数据注释属性在 MVC 应用程序中使用伙伴类元数据不起作用](https://stackoverflow.com/questions/3882501/data-annotation-attributes-not-working-using-buddy-class-metadata-in-an-mvc-app)
[EF伙伴类上使用自定义属性 (AttributeTargets.Class) 进行数据验证](https://stackoverflow.com/questions/4621210/data-validation-with-custom-attributes-attributetargets-class-on-ef-buddy-clas)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T14:47:01.240

我在同一条船上......我有几个你的确切行为的例子，它们工作得很好......

现在，一个特定的领域不会表现...

但是，如果我不使用“Required(AllowEmptyStrings = true)”属性，事情就会恢复正常。我想这是我真正想要的，因为有问题的属性并没有那么大的意义（必需，但允许用户不要回答）......

对我来说，更大的问题是为什么它有时有效，有时无效？

但是至少，删除类似的代码应该可以为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T18:18:51.247

我通过捕获错误解决了这个问题：

```
public static class ExtensionMethods {
public static void SaveChangesWithEmptyStrings(this DbContext context) {
    try {
        context.SaveChanges();
    }
    catch (DbEntityValidationException ex) {
        foreach (DbEntityValidationResult result in ex.EntityValidationErrors)
            foreach (DbValidationError error in result.ValidationErrors) {
                Type t = result.Entry.Entity.GetType();
                PropertyInfo pi = t.GetProperty(error.PropertyName);
                pi.SetValue(result.Entry.Entity, "");
            }
        context.SaveChanges(); // Try again
    }
} 
```

}

# php - 从 ZIP 字符串中提取文件

> ID：15140063
> 
> 赞同：21
> 
> 时间：2013-02-28T16:02:21.623
> 
> 标签：php

我有一个包含一个 XML 文件的 zip 文件的 BASE64 字符串。

关于如何在不必处理磁盘上的文件的情况下获取 XML 文件的内容的任何想法？

我非常希望将整个过程保留在内存中，因为 XML 只有 1-5k。

必须编写 zip，提取 XML，然后加载它并删除所有内容，这会很烦人。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-16T15:01:49.780

我有一个类似的问题，我最终手动完成。
[https://www.pkware.com/documents/casestudies/APPNOTE.TXT](https://www.pkware.com/documents/casestudies/APPNOTE.TXT)

这会提取一个文件（只是第一个文件），没有错误/crc 检查，假设使用了 deflate。

```
// zip in a string
$data = file_get_contents('test.zip');

// magic
$head = unpack("Vsig/vver/vflag/vmeth/vmodt/vmodd/Vcrc/Vcsize/Vsize/vnamelen/vexlen", substr($data,0,30));
$filename = substr($data,30,$head['namelen']);
$raw = gzinflate(substr($data,30+$head['namelen']+$head['exlen'],$head['csize']));

// first file uncompressed and ready to use
file_put_contents($filename,$raw); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-28T16:27:26.653

经过几个小时的研究，我认为在没有临时文件的情况下处理 zip 是不可能的：

1.  第一次尝试是`php://memory`行不通的，因为它是一个流，不能被`file_get_contents()`or之类的函数读取`ZipArchive::open()`。在评论中是一个指向 php-bugtracker 的链接，因为缺少这个问题的文档。
2.  有一个流支持`ZipArchive`，`::getStream()`但如手册中所述，它只支持对打开的文件进行读取操作。所以你不能用它即时建立档案。
3.  `zip://`包装器也是只读的：使用[fopen() 包装器创建 ZIP 文件](https://stackoverflow.com/questions/5620769/create-zip-file-with-fopen-wrapper)
4.  我还对其他 php 包装器/protocolls 进行了一些尝试，例如

    ```
     file_get_contents("zip://data://text/plain;base64,{$base64_string}#test.txt")
     $zip->open("php://filter/read=convert.base64-decode/resource={$base64_string}")
     $zip->open("php://filter/read=/resource=php://memory") 
    ```

    但对我来说，它们根本不起作用，即使手册中有类似的例子。所以你必须吞下药丸并创建一个临时文件。

* * *

**原答案：**

这只是临时存储的方式。我希望您自己管理 zip 处理和 xml 解析。

使用 php `php://memory`( [doc](http://php.net/manual/de/wrappers.php.php) ) 包装器。请注意，这仅对小文件有用，因为它存储在内存中 - 显然。否则`php://temp`改用。

```
<?php

// the decoded content of your zip file
$text = 'base64 _decoded_ zip content';

// this will empty the memory and appen your zip content
$written = file_put_contents('php://memory', $text);

// bytes written to memory
var_dump($written);

// new instance of the ZipArchive
$zip = new ZipArchive;

// success of the archive reading
var_dump(true === $zip->open('php://memory')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-02T13:47:21.183

toster-cx 是对的，你应该给他积分，这是一个示例，其中 zip 来自作为字节数组（二进制）的肥皂响应，内容是 XML 文件：

```
$objResponse = $objClient->__soapCall("sendBill",array(parameters));
$fileData=unzipByteArray($objResponse->applicationResponse);
header("Content-type: text/xml");
echo $fileData;
function unzipByteArray($data){
  /*this firts is a directory*/
  $head = unpack("Vsig/vver/vflag/vmeth/vmodt/vmodd/Vcrc/Vcsize/Vsize/vnamelen/vexlen", substr($data,0,30));
  $filename = substr($data,30,$head['namelen']);
  $if=30+$head['namelen']+$head['exlen']+$head['csize'];
 /*this second is the actua file*/
  $head = unpack("Vsig/vver/vflag/vmeth/vmodt/vmodd/Vcrc/Vcsize/Vsize/vnamelen/vexlen", substr($data,$if,30));
  $raw = gzinflate(substr($data,$if+$head['namelen']+$head['exlen']+30,$head['csize']));
  /*you can create a loop and continue decompressing more files if the were*/
  return $raw;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T16:23:50.730

如果您知道 .zip 中的文件名，请执行以下操作：

```
<?php
$xml = file_get_contents('zip://./your-zip.zip#your-file.xml'); 
```

如果您有一个纯字符串，请执行以下操作：

```
<?php
$xml = file_get_contents('compress.zlib://data://text/plain;base64,'.$base64_encoded_string); 
```

[编辑] 文档在那里：[http ://www.php.net/manual/en/wrappers.php](http://www.php.net/manual/en/wrappers.php)

来自评论：如果您没有 base64 编码的字符串，则需要在使用`data://`包装器之前对其进行 urlencode() 。

```
<?php
$xml = file_get_contents('compress.zlib://data://text/plain,'.urlencode($text)); 
```

[编辑 2] 即使您已经找到了带有文件的解决方案，也有一个解决方案（测试）我在您的回答中没有看到：

```
<?php
$zip = new ZipArchive;
$zip->open('data::text/plain,'.urlencode($base64_decoded_string));
$zip2 = new ZipArchive;
$zip2->open('data::text/plain;base64,'.urlencode($base64_string)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-05T11:09:56.553

如果您在 Linux 上运行并管理系统。您可以使用 tmpfs 挂载一个小型 ramdisk，然后标准的 file_get / put 和 ZipArchive 函数将起作用，除了它不写入磁盘，而是写入内存。要使其永久就绪，fstab 类似于：

```
/media/ramdisk tmpfs nodev,nosuid,noexec,nodiratime,size=2M 0 0 
```

相应地设置您的尺寸和位置，使其适合您。使用 php 挂载 ramdisk 并在使用后将其删除（如果它甚至具有特权）可能比仅写入磁盘效率低，除非您有大量文件要一次性处理。虽然这不是一个纯粹的 php 解决方案，也不是可移植的。您仍然需要在使用后删除“文件”，或者让操作系统清理旧文件。它们不会在重新启动或重新安装 ramdisk 后持续存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T16:18:31.757

如果你想从 zip 和 xml 中读取文件的内容，你应该看看这个，我用它来计算 docx 中的单词（这是一个 zip）

```
if (!function_exists('docx_word_count')) {
    function docx_word_count($filename)
    {
        $zip = new ZipArchive();
        if ($zip->open($filename) === true) {
            if (($index = $zip->locateName('docProps/app.xml')) !== false) {
                $data = $zip->getFromIndex($index);
                $zip->close();
                $xml = new SimpleXMLElement($data);
                return $xml->Words;
            }
            $zip->close();
        }
        return 0;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-09T15:50:56.337

这个想法**`toster-cx`**对于处理格式错误的 zip 文件也非常有用！

我有一个在标题中缺少数据，所以我不得不使用他的方法提取**中央目录文件标题：**

```
$CDFHoffset = strpos( $zipFile, "\x50\x4b\x01\x02" );                                                       
$CDFH = unpack( "Vsig/vverby/vverex/vflag/vmeth/vmodt/vmodd/Vcrc/Vcsize/Vsize/vnamelen/vexlen", substr( $zipFile, $CDFHoffset, 46 ) ); 
```

# iphone - cell.detaillabel 的文本未显示

> ID：15140064
> 
> 赞同：0
> 
> 时间：2013-02-28T16:02:22.593
> 
> 标签：iphone, ios, uitableview

我有一个 tableView，我需要在其中显示`textlabel`和`detailtextlabel`.

但未`detailtextlabel`显示。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     static NSString *CellIdentifier=@"Cell";
     UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     if(cell == nil){
         cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];
      }

      NSMutableDictionary *d2 =[[NSMutableDictionary alloc]initWithDictionary:[autocompleteUrls objectAtIndex:indexPath.row]];

      cell.textLabel.text = [NSString stringWithFormat:@"%@",[d2 valueForKey:@"FLName"]];
      cell.detailTextLabel.text=@"Id";
      cell.textLabel.font=[UIFont boldSystemFontOfSize:12];
      cell.textLabel.numberOfLines=0;

      return cell;
} 
```

但是`detailtextlabel`没有显示，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:03:40.810

你使用 UITableViewCellStyleDefault 但你必须使用 UITableViewCellStyleSubtitle

```
cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle    reuseIdentifier:CellIdentifier]autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:06:40.663

我通常`UITableViewCellStyleValue1`在这种情况下使用

```
[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T16:49:02.330

为您详细解答：

![在此处输入图像描述](../Images/d62e78ae29d359e32a73df1bc8ef8024.png)![在此处输入图像描述](../Images/209696dd581ead7fce6a36892ee3f0ba.png)

# asp.net-mvc - 通用服务实现

> ID：15140065
> 
> 赞同：1
> 
> 时间：2013-02-28T16:02:26.013
> 
> 标签：asp.net-mvc, dependency-injection, repository-pattern, autofac

在我学习 ASP.NET MVC 4 应用程序中，我使用存储库模式和服务层。项目中使用了实体框架和 Autofac。我的数据类很简单，几乎所有的操作都是基本的 CRUD 操作。

我有一个抽象的存储库库：

```
public abstract class RepositoryBase<T> where T : class 
```

这是实体 Sample1 的示例存储库：

```
 public class Sample1Repository : RepositoryBase<Sample1>, ISample1Repository
   {
        public Sample1Repository(IDatabaseFactory databaseFactory)
            : base(databaseFactory)
        {
        }
    }

   public interface ISample1Repository : IRepository<Sample1>
   {
   } 
```

这是我的控制器：

```
public class SampleController : Controller
{
    private readonly ISampleService _sampleService;

    public SampleController(ISampleService sampleService)
    {
        this._sampleService = sampleService;
    }
} 
```

最后，这是我的服务：

```
public interface ISampleService
{
    IEnumerable<Sample1> GetSample1s();
    Sample1 GetSample1(int id);
    void CreateSample1(Sample1 item);
    void DeleteSample1(int id);
    void SaveSample1();
}

public class SampleService : ISampleService
{
    private readonly ISample1Repository _sample1Repository;

    private readonly IUnitOfWork _unitOfWork;

    public SampleService(ISample1Repository sample1Repository, IUnitOfWork unitOfWork)
    {
        this._sample1Repository = sample1Repository;
        this._unitOfWork = unitOfWork;
    }
} 
```

现在，我有这些问题：

1）我是否需要为每个实体存储库创建一个单独的类。（即实体 Sample2 的另一个 Sample2Repository）

2）我可以使用通用服务来完成这些 CRUD 任务吗？

3) 如果通用服务是可能的。我如何在 Autofac 引导程序中注册它/它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:18:56.893

> 1）我是否需要为每个实体存储库创建一个单独的类。

如果可以，创建一个通用`IRepository<T>`实现并将其映射到这个开放的通用接口。

> 2）我可以使用通用服务来完成这些 CRUD 任务吗？

当然可以，但真正的问题是：这样做有用吗？在我看来，您`ISampleService`只是复制了`IRepository<T>`. 它可能会转发到这个存储库。对我来说似乎是一个无用的抽象。如果您的应用程序是真正的 CRUD，您可以将存储库直接注入您的控制器。

> 3) 如果通用服务是可能的。我如何在 Autofac 引导程序中注册它/它们？

您可以将开放通用接口映射到开放通用实现，如下所示：

```
builder.RegisterGeneric(typeof(EntityFrameworkRepository<>))
    .As(typeof(IRepository<>)) 
```

如果您有许多具体（非通用）`IRepository<T>`实现并希望批量注册它们，您可以按如下方式执行此操作：

```
builder.RegisterAssemblyTypes(typeof(IRepository<>).Assembly)
    .AsClosedTypesOf(typeof(IRepository<>)); 
```

# python - 如何使用 matplotlib 的颜色图将数字映射到颜色？

> ID：15140072
> 
> 赞同：69
> 
> 时间：2013-02-28T16:02:39.360
> 
> 标签：python, matplotlib

`x`考虑一个包含浮点数的变量。我想使用 matplotlib 的颜色图将此数字映射到颜色，但不绘制任何内容。基本上，我希望能够选择颜色图，`mpl.cm.autumn`例如，用于`mpl.colors.Normalize(vmin = -20, vmax = 10)`设置范围，然后映射`x`到相应的颜色。但我真的没有得到 的文档`mpl.cm`，所以如果有人可以给我一个提示。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-02-28T16:04:50.683

它很简单`cm.hot(0.3)`：

```
import matplotlib.cm as cm

print(cm.hot(0.3)) 
```

```
(0.8240081481370484, 0.0, 0.0, 1.0) 
```

如果您还想拥有规范化器，请使用

```
import matplotlib as mpl
import matplotlib.cm as cm

norm = mpl.colors.Normalize(vmin=-20, vmax=10)
cmap = cm.hot
x = 0.3

m = cm.ScalarMappable(norm=norm, cmap=cmap)
print(m.to_rgba(x)) 
```

```
(1.0, 0.8225486412996345, 0.0, 1.0) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-03-07T13:47:37.670

您可以通过提供 0 和 1 之间的参数来从颜色图中获取颜色，例如`cm.autumn(0.5)`.

如果游戏中有规范化实例，则使用规范化的返回值代替：

```
import matplotlib.cm as cm
from matplotlib.colors import Normalize

cmap = cm.autumn
norm = Normalize(vmin=-20, vmax=10)
print cmap(norm(5)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-08T16:18:53.930

颜色图颜色的数值

```
import matplotlib.cm as cm
import matplotlib as matplotlib

def color_map_color(value, cmap_name='Wistia', vmin=0, vmax=1):
    # norm = plt.Normalize(vmin, vmax)
    norm = matplotlib.colors.Normalize(vmin=vmin, vmax=vmax)
    cmap = cm.get_cmap(cmap_name)  # PiYG
    rgb = cmap(norm(abs(value)))[:3]  # will return rgba, we take only first 3 so we get rgb
    color = matplotlib.colors.rgb2hex(rgb)
    return color 
```

# netbeans - 网豆。在混淆器类路径中找不到混淆器类型（PROGUARD）

> ID：15140075
> 
> 赞同：2
> 
> 时间：2013-02-28T16:02:56.337
> 
> 标签：netbeans, obfuscation, proguard

我正在尝试构建我的项目，但它不工作。我收到此警告：在混淆器类路径中找不到混淆器类型（PROGUARD），使用 NONE。请使用插件管理器安装缺少的混淆器库。我查看了插件选项，但我不知道如何添加 proguard。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:50:27.397

转到“**工具”>“插件**” ，然后转到“**可用插件**”选项卡并搜索`Proguard`您将列出的内容。勾选它后面的复选框，然后按安装。

你可以看到下面的截图。

**编辑**如果您无法执行上述步骤，那么这可能会对您有所帮助

1.  [http://netbeans.dzone.com/tips/obfuscating-netbeans-java-appl](http://netbeans.dzone.com/tips/obfuscating-netbeans-java-appl)
2.  [http://blogs.oracle.com/geertjan/entry/obfuscation](http://blogs.oracle.com/geertjan/entry/obfuscation)

我从[这个问题](https://stackoverflow.com/questions/2164800/how-to-use-proguard-with-netbeans-6-7-6-8)中获取了链接。

![在此处输入图像描述](../Images/72321acf8b3e6abe76533b1e0333ce47.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T16:04:33.400

我已经按照这里的步骤操作了：http: [//mikkonieminen.blogspot.co.uk/2013/04/netbeans-73-proguard.html](http://mikkonieminen.blogspot.co.uk/2013/04/netbeans-73-proguard.html) 并且它起作用了......我不会说芬兰语，但我认为从截图中你可以理解为模块添加 beta2 存储库，然后您可以下载 proguard 插件。祝你好运！格尔戈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-25T20:24:11.470

如果 proguard 插件不可用，您可以在 netbeans 插件中添加此插件存储库目录：http:
[//dlc.sun.com.edgesuite.net/netbeans/updates/7.3/uc/beta2/certified/catalog.xml](http://dlc.sun.com.edgesuite.net/netbeans/updates/7.3/uc/beta2/certified/catalog.xml)

安装 proguard 插件后，重新启动 netbeans 以确保它。

# matlab - 在 MATLAB 中绘制箱线图时 GUI 中的重叠轴

> ID：15140084
> 
> 赞同：4
> 
> 时间：2013-02-28T16:03:13.073
> 
> 标签：matlab, matlab-guide, boxplot, axes

我正在使用 GUIDE 在 MATLAB 中创建一个 GUI。我有几个轴，其中一个我想画一个箱线图。我的问题是，绘制箱线图后，轴的大小发生了变化，并且与我的其他一些图形重叠。

要复制此问题，请`.fig`使用`GUIDE`包含两个轴的文件创建一个文件：`axes1`和`axes2`，如图所示：![具有两个轴的 .fig 示例](../Images/972d1518678fa945c170b1dd1705048f.png)。

然后，在 中`OpeningFcn`，添加以下行：

```
Z = normrnd(1,3,[100,1]);
plot(handles.axes1, Z);
boxplot(handles.axes2,Z) 
```

然后启动 GUI。我看到以下内容：

![启动程序时的 GUI](../Images/6c47aba2afa015f3d3dc6add3407ecb5.png)

如您所见，两个轴重叠。我试过改变箱线图的属性，但没有运气。

我使用 MATLAB 7.10 (R2010a) 和 Kubuntu 12.10。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T22:17:06.567

似乎`boxplot`使轴变宽，不知道为什么。无论如何，在绘图之前保存轴位置并在之后立即重置它似乎对我有用：

```
Z = normrnd(1,3,[100,1]);
plot(handles.axes1, Z);
pos = get(handles.axes2, 'position');
boxplot(handles.axes2,Z);
set(handles.axes2, 'position', pos); 
```

干杯，朱塞佩

# ios - 使用 UITextfield 的 setText 时不会触发 UIControlEventEditingChanged

> ID：15140087
> 
> 赞同：51
> 
> 时间：2013-02-28T16:03:16.770
> 
> 标签：ios, cocoa-touch, uitextfield, uidatepicker

我目前正在尝试跟踪文本字段的状态。

我正在使用自定义 datePicker 来设置文本`-setText`

```
[self.textField setText:[self.dateFormatter stringFromDate:self.date]]; 
```

在我的*textFieldDelegate*中，我编写了以下代码：

```
-(void)viewDidLoad {
  [super viewDidLoad];
  self.travelToOnTextField.delegate = self;
  [self.travelToOnTextField addTarget:self action:@selector(travelToOnTextFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
}

-(void)travelToOnTextFieldDidChange:(id)sender
{
   NSLog(@"Event Handler called");
} 
```

如果我通过自定义 Datepicker 更改文本，`travelToOnDateTextFieldDidChange`则不会调用 Method。但是，如果我使用计算机键盘更改文本，它会因某种原因被调用。

这是故意的吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-05T23:48:24.757

我不得不评价这个问题，因为这非常*重要*。

这似乎在 iOS6 中发生了变化。甚至可能是iOS5。此事件**曾经**是观察 UITextField 中文本更改的首选方法。从iOS3开始我就一直在使用它。在 iOS6 上重新编译我的应用程序以执行一些更新后，它神秘地停止了工作。我的部分应用程序使用：

```
[UITextField insertText]; 
```

和其他人使用

```
[UITextField setText]; 
```

或者

```
UITextField.text = @"xxx"; 
```

无论出于何种原因，重要的是要注意***setText***事件不再触发 Editing Changed 事件。如果您使用 insertText 方法，它仍然有效。

因此，如果您陷入困境并且只需要快速修复，您可以从以下位置更改您的代码：

```
textField.text; 
```

或者

```
[textField setText:@"xxx"]; 
```

至

```
textField.text = @"";
[textField insertText:@"new text"]; 
```

这也有效：

```
[((UITextField*)view) sendActionsForControlEvents:UIControlEventEditingChanged]; 
```

我希望这对某人有所帮助，因为我浪费了一整天的时间试图弄清楚为什么当我升级到 iOS6 时这段代码突然停止工作。

你仍然可以使用 NSNotificationCenter 。有关更多信息，请参阅 UITextField 参考：

[https://developer.apple.com/documentation/uikit/uitextfield](https://developer.apple.com/documentation/uikit/uitextfield)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-03-12T09:00:00.907

`sendActionsForControlEvents:`设置文本后只需调用：

```
self.textField.text = xxx;
[self.textField sendActionsForControlEvents:UIControlEventEditingChanged]; 
```

在 iOS 9 上测试。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-10T07:13:35.030

在 Swift 2.2+ 中，基于@Shaolo 的回答

1.  连接IBAction，注意将默认事件类型改为`EditingChanged`

[![在此处输入图像描述](../Images/ea5a480645f9e51bc3b123e83f78d802.png)](https://i.stack.imgur.com/kqrkA.png)

2.  从代码中更改 textField 的文本后，还要添加 sendActionsLine

    ```
    taskTextField.text = nil
    taskTextField.sendActionsForControlEvents(UIControlEvents.EditingChanged) 
    ```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-24T21:06:52.437

**更新：斯威夫特 4.2**

```
textField.text = "some Text"
textField.sendActions(for: UIControl.Event.editingChanged) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-28T17:16:00.397

文档说：

> ```
> UIControlEventEditingChanged 
> A touch making an editing change in a UITextField objet. 
> Available in iOS 2.0 and later. 
> Declared in UIControl.h. 
> ```

所以只能**摸**？

# objective-c - 将 NSStrings 数组转换为格式化 NSNumbers 数组

> ID：15140088
> 
> 赞同：0
> 
> 时间：2013-02-28T16:03:17.830
> 
> 标签：objective-c, nsarray, nsnumber, nsnumberformatter

`valuesArray`我有一个称为包含如下值的字符串数组：2913451.0938

我正在尝试格式化这些数字，以便我可以像这样显示它们：2,913,451.09

使用下面的代码，我能够从数组中读取值并将它们转换为 NSNumbers ( `num`)，并且我还能够创建一个格式化程序来定义我希望如何显示我的数字 ( `formatter`)。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:2];

NSNumber *num = valuesArray[indexPath.row];
NSLog(@"num: %@",num);
NSLog(@"Formatter: %@",formatter);
NSString *forNum = [formatter stringFromNumber:num];
NSLog(@"FormattedNum: %@",forNum); 
```

当我运行代码并到达该行时`NSLog(@"FormattedNum: %@",forNum);`，我看到它打印了`null`. 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:15:21.283

您的代码中的问题是您从字符串数组中检索一个元素，`valueArray`但将其分配给一个`NSNumber`类型化变量——而该对象实际上是一个`NSString`. 当您将它传递给它返回的格式化程序时`nil`（即使它也可能崩溃，这只是未定义的行为）。

您必须将字符串转换为`NSNumber`：

```
NSNumber *num = @([valuesArray[indexPath.row] doubleValue]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:09:46.403

我刚刚用这个值检查了这段代码：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:2];

NSNumber *num = @(2913451.0938);

NSLog(@"num: %@",num);
NSLog(@"Formatter: %@",formatter);
NSString *forNum = [formatter stringFromNumber:num];
NSLog(@"FormattedNum: %@",forNum); 
```

**它工作得很好，没有任何错误，就像你提到的那样。**

见输出：

```
2013-02-28 21:35:44.417 BrowserModal[4861:403] num: 2913451.0938
2013-02-28 21:35:44.418 BrowserModal[4861:403] Formatter: <NSNumberFormatter: 0x100160840>
2013-02-28 21:35:44.419 BrowserModal[4861:403] FormattedNum: 29,13,451.09 
```

* * *

请清理您的目标并重新构建。

和

确保`valuesArray[indexPath.row]`返回一个装箱的`NSNumber`对象。

这样做：@([valuesArray[indexPath.row] doubleValue]);

# regex - 正则表达式从 URL 中间剥离文本

> ID：15140089
> 
> 赞同：0
> 
> 时间：2013-02-28T16:03:19.390
> 
> 标签：regex

我有一个客户正在将她的网站从 Blogger 移动到 Wordpress 博客。我在 Blogger 中放置了一些代码，以将访问者重定向到正确的 Wordpress 帖子/页面。因此，当 Blogger 重定向帖子时，它会以**www.domain.com/?bloggerURL=/yyyy/mm/the-post-slug.html的形式出现**

使用这个正则表达式，我成功返回了正确的 Wordpress URL：**www.domain.com/yyyy/mm/the-post-slug**（删除了“?bloggerURL=/”和“.html”）

```
^\?bloggerURL=/(.*)\.html$ 
```

Blogger 页面被重定向，如**www.domain.com/?bloggerURL=/p/the-page-slug.html** 我尝试将 /p 添加到正则表达式以去除这种情况，但它不起作用。

```
^\?bloggerURL=/p/(.*)\.html$ 
```

例如，**www.domain.com/?bloggerURL=/p/about.html**应该被重定向到**www.domain.com/about**，但 URL 仍然是**www.domain.com/?bloggerURL=/p/about。 html**

我可能遗漏了一些简单的东西来让它拿起字符串的第一部分并将其删除。是否需要添加/删除某些内容才能使该案例正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T02:16:32.650

只是通过旧的，未回答的问题......希望你已经解决了这个问题，但如果没有，我看到的正则表达式的唯一问题是非转义斜杠。我认为你需要使用：

```
^\?bloggerURL=\/p\/(.*)\.html$ 
```

希望这可能对其他人有所帮助。

# asp.net - 在 ASP.Net LoginView 中，显示了 2 组用户名和密码文本框

> ID：15140092
> 
> 赞同：1
> 
> 时间：2013-02-28T16:03:26.173
> 
> 标签：asp.net, loginview

使用 ASP.Net LoginView，显示 2 组用户名和密码文本框。

使用这个标记，你能告诉我们如何只显示 AnonymousTemplate 中的一组用户名和密码文本框吗？

```
<asp:UpdatePanel 
    ID="UpdatePanelParentsSummary" 
    runat="server" 
    UpdateMode="Conditional">

    <ContentTemplate> 

        <div class="Menu">

            <asp:LoginView 
                ID="loginViewMain" 
                runat="server">

                <AnonymousTemplate>
                    <asp:LoginStatus 
                        ID="loginStatus" 
                        runat="server" />

                    <asp:Login runat="server" ID="login"></asp:Login>
                </AnonymousTemplate>

                <LoggedInTemplate>
                    <asp:LoginName 
                        ID="loginName" 
                        runat="server"
                        FormatString="Hello, {0}!<br/><br/> You have successfully<br/> logged onto the staff site." />

                    (<asp:LoginStatus ID="loginStatus" runat="server" />)

                    <asp:SiteMapDataSource 
                        id="KnowledgeAcademySiteMap" 
                        runat="server"
                        ShowStartingNode="false" />

                    <asp:TreeView 
                        id="TreeViewMain"
                        runat="server"
                        ExpandDepth="0"
                        OnTreeNodeExpanded="TreeViewMain_TreeNodeExpanded"
                        DataSourceID="KnowledgeAcademySiteMap">

                        <RootNodeStyle ImageUrl="/Images/book.png" />
                        <ParentNodeStyle ImageUrl="/Images/book.png" />
                        <LeafNodeStyle ImageUrl="/Images/book.png" />
                    </asp:TreeView>
                </LoggedInTemplate>

            </asp:LoginView>
        </div>

        </asp:ContentPlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:22:42.640

显示标记后，应该只`<asp:Login>`显示一个控件。必须有一些其他的标记或代码会影响这一点。

此时最好的选择是通过添加一些额外的内容来调试问题，这将有助于找出所有内容的来源。例如，您可以尝试以下操作：

1.  通过在 ASPX 文件顶部的 @Page 指令中设置 Trace=true 在页面中启用跟踪。这将在页面底部呈现控件树的图形，这可能有助于您确定其他登录控件的位置。
2.  在您看到的 Login 控件之前和之后添加一些虚拟标记，例如将文本 BEGINBEGINBEGIN 放在它之前，并将 ENDENDEND 放在它之后。如果您看到该渲染一次，那么就有来自其他地方的不同登录控件。如果您看到它呈现两次，那么某些原因导致整个控件呈现两次，这一定来自一些未显示的自定义代码。
3.  开始删除页面的零碎部分以简化它，直到找出导致差异的原因。

# sql-server - MS Access/SQL Server 连接是否有 ODBC 的替代品？

> ID：15140095
> 
> 赞同：1
> 
> 时间：2013-02-28T16:03:37.347
> 
> 标签：sql-server, ms-access, odbc, ascii

我的问题是：是否有替代 ODBC 的方法可以让我们将 SQL Server 连接到 MS Access？

情况如下：我的公司使用了一个专有的 SQL 数据库 (ProVenue)，并决定“不再支持 ODBC”到我们的前端工具 MS Access，但没有告诉我们。

我们目前正在从 ProVenue 迁移，但与此同时，我们遇到了一个“不再支持”我们的 ODBC 连接的供应商。供应商也没有动力提供帮助，因为我们将在几个月后离开。

我设计了一种解决方法，我手动导出 ProVenue 表 (ASCII)、证明（是的，导出实用程序不可靠地提取）、转换并每天上传到 Access。也就是说，考虑到桌子的数量，这是不合理的耗时。这种变通办法可能是一份全职工作。

你知道任何替代方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T10:13:25.450

不要考虑使用 ADP。它已从 Access 2013 中删除，因此是一项没有未来的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:14:45.050

根据您的说法，您并没有“拥有”自己的 MSSQL 数据库——您只是连接到提供者管理的实例，对吗？我猜他们已经禁用了与 MSSQL 的 ODBC 连接，因为他们不喜欢服务器上的负载和/或他们决定要更改一些底层结构并且不想与任何人打交道抱怨这些变化。

也就是说，它们是否允许直接 MSSQL 连接？例如，通过 SQL Management Studio？如果是这样，您应该能够定义一个比他们的错误更少的导出和导入过程，并且只需将您的 Access 数据库重新指向数据的本地副本。诚然，这仍然需要一些（可能是自动化的）导入过程，所以你会与服务器不同步，但它会给你解决方案。

您可以尝试将 .adp 文件连接到服务器，以查看它们是否仍允许您以这种方式访问​​内容。这可能需要对您的 Access 解决方案进行重大修改，但在他们的服务器上也比通过 ODBC 链接表要容易一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:23:50.063

您可以查看直接绑定到一个 SQL Server 数据库的 Access Data Projects (ADP)。我认为他们根本不使用 ODBC，但他们有自己的局限性，当然，在旧的 Access 版本中不可用。

# c# - 使用 WebBrowser 控件进行双面打印，仅打印 1 面

> ID：15140099
> 
> 赞同：2
> 
> 时间：2013-02-28T16:03:47.647
> 
> 标签：c#, printing, browser, duplex

我的 .NET 应用程序出现问题，只打印我的 HTML 文件的第二页，而完全忽略了第一页（没有打印其他页面，并且它的背面是空白的）。

当我拉起打印机的队列窗口时，它确实显示它从“假脱机”到“打印”并列出了两个页面，所以我不知道为什么它不打印第一页。

（我的打印机设置为双面打印，如果我只是从浏览器打印 HTML 文档，它会按预期工作）

这就是我正在做的事情：

```
private void Form1_Load(object sender, EventArgs e)
    {
        //  Create a FileSystemWatcher to monitor all files on drive C.
        FileSystemWatcher fsw = new FileSystemWatcher("C:\\COAForms");

        //  Watch for changes in LastAccess and LastWrite times, and 
        //  the renaming of files or directories. 
        fsw.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
            | NotifyFilters.FileName | NotifyFilters.DirectoryName;

        //  Register a handler that gets called when a  
        //  file is created, changed, or deleted.
        //fsw.Changed += new FileSystemEventHandler(OnChanged);

        fsw.Created += new FileSystemEventHandler(OnChanged);
        fsw.Error += new ErrorEventHandler(fsw_Error);

        //fsw.Deleted += new FileSystemEventHandler(OnChanged);
        fsw.EnableRaisingEvents = true;
        fsw.SynchronizingObject = this;
        PrinterSettings settings = new PrinterSettings();
        label2.Text = settings.PrinterName;

        Thread.CurrentThread.SetApartmentState(ApartmentState.STA);
    }

    void fsw_Error(object sender, ErrorEventArgs e)
    {
        MessageBox.Show(e.ToString());
    }

    private void OnChanged(object source, FileSystemEventArgs e)
    {
        notifyIcon1.BalloonTipText = "Printing document " + e.Name + "...";
        notifyIcon1.BalloonTipTitle = "Printing Application";
        notifyIcon1.BalloonTipIcon = ToolTipIcon.Info;
        notifyIcon1.ShowBalloonTip(500);

        PrintCOAPage(e.Name);
    }

    private void PrintCOAPage(string name)
    {
        try
        {
            // Create a WebBrowser instance. 
            WebBrowser webBrowserForPrinting = new WebBrowser();

            // Add an event handler that prints the document after it loads.
            webBrowserForPrinting.DocumentCompleted +=
                new WebBrowserDocumentCompletedEventHandler(PrintDocument);

            // Set the Url property to load the document.
            webBrowserForPrinting.Url = new Uri(@"C:\COAForms\" + name);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    private void PrintDocument(object sender,
        WebBrowserDocumentCompletedEventArgs e)
    {
        try
        {
            PrinterSettings ps = new PrinterSettings();
            ps.Duplex = Duplex.Vertical;

            // Print the document now that it is fully loaded.
            ((WebBrowser)sender).Print();

            // Dispose the WebBrowser now that the task is complete. 
            ((WebBrowser)sender).Dispose();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    }

    private void notifyIcon1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        this.Show();
        this.Activate();
        if (this.WindowState == FormWindowState.Minimized)
        {
            this.WindowState = FormWindowState.Normal;
        }
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        if (FormWindowState.Minimized == WindowState)
        {
            Hide();
        }  
    } 
```

我只是最近才将 PrinterSettings 添加到代码中，但它没有任何改变。

我将非常感谢你们在这方面提供的任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:50:28.370

哇，不认为 CSS 会影响它，但无论出于何种原因，我使用的 CSS（涉及 z-index）在我在 WebBrowser 控件下打印预览时使第一页不显示，但在实际 IE8 中工作得很好。 . 在稍微改变一下 CSS 之后，它现在可以按预期工作了。

# jquery - 停用 mouseenter 事件，然后在动画完成后重新激活

> ID：15140100
> 
> 赞同：0
> 
> 时间：2013-02-28T16:04:01.090
> 
> 标签：jquery, html, mouseenter

我有以下代码，当用户将鼠标悬停在一个元素上时，它会执行一些动画等，但是如果他们用鼠标快速反复地“进入”和“离开”元素，它会弄乱动画。如何停用 mouseenter 事件，然后在动画完成后重新激活它？

```
$(".women .text").on("mouseenter", function(event) {
            event.preventDefault();
            $( ".men .intro" ).hide();
            $('.women').delay(300).animate({width:"80%"});  
            $('.men').delay(300).animate({width:"20%"});    
            $('.men').animate({opacity: 0.5}, 500); 
            $('.women').animate({opacity: 1}, 500);
            $( ".women .intro" ).delay(600).fadeIn(300);
        }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:12:40.377

将计时器更改为您想要的任何时间跨度

```
var mouseEntered = false;

$(".women .text").on("mouseenter", function(event) {
            event.preventDefault();

            if(mouseEntered == false)
            {
                mouseEntered = true;
                $( ".men .intro" ).hide();
                $('.women').delay(300).animate({width:"80%"});  
                $('.men').delay(300).animate({width:"20%"});    
                $('.men').animate({opacity: 0.5}, 500); 
                $('.women').animate({opacity: 1}, 500);
                $( ".women .intro" ).delay(600).fadeIn(300);
                window.setTimeout(function() {
                    mouseEntered = false;
                }, 1000);
            }
        }); 
```

# javascript - 我在 ebay 上如何称呼这种类型的列表？

> ID：15140102
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:04:01.950
> 
> 标签：javascript, html-lists

如果我在错误的地方发布了这个，我提前道歉......

好的。我想在我的网站上添加一个类似的分层/可选数据列表，可以在 ebay 的“出售新商品页面”上找到：

[http://cgi5.ebay.com/ws/eBayISAPI.dll?NewListing](http://cgi5.ebay.com/ws/eBayISAPI.dll?NewListing)

注意：您可能需要能够登录 ebay 才能访问该链接。对不起

（我试图发布一个屏幕截图来说明那些无法访问上述链接的人的表格，但由于我是 StackOverflow 的新用户，我不允许在我的 Reputation > 10 之前发布图像。无赖）

如果您无法点击上面的链接，请转到 ebay.com，登录（如果您有帐户），单击 SELL 选项卡-> SELL AN ITEM，然后单击 BROWSE CATEGORIES LINK 将显示有问题的列表。

Ebay 使用他们的版本来确保卖家将他们的拍卖物品列在正确的类别中，我可以在我自己的网站上将类似的东西用于完全不相关的目的。

它的工作原理是这样的：页面加载时，第 1 列会填充可能的类别选项列表，当用户选择其中一个选项时，新的（第二）列子选项会显示在第一个选项的右侧。When an option from column 2 is selected, column 3's options are displayed and so forth until the user has drilled down into the categories and arrives on one which does not have any additional subcategories. 最终，在用户到达类别行末尾的右下角会显示一个类别编号。

2个问题：

1.  为了帮助我研究它是如何工作的，它是什么类型的列表？（假设它是一个列表而不是菜单等。）
2.  为了让我为我的网站制作一个，是否需要在 javascript 中添加代码，或者是否有在线生成器来制作这样的动物？

在提出问题之前，我已经检查了页面的源代码，但是对于 html/php 来说还很新，并且还没有涉足 javascript，所以我对如何了解更多信息一无所知。

知道如何称呼这种类型的列表将帮助我在谷歌上找出如何为我当前位于 mySQL 表中的数据制作外观和功能相似的东西。

提前感谢您的任何回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:10:00.843

这可以通过以下代码在 HTML 及其所谓的“选择列表”中实现：

```
<select name="items" size="3">
<option value="ball">Ball</option>
<option value="toy">Toys</option>
<option value="something">Something</option>
</select> 
```

你可以在这里看到它的作用：http: [//jsfiddle.net/5EXmc/](http://jsfiddle.net/5EXmc/)

当然，您将需要一些 javascript 来了解选择了哪个项目。

如果您对 javascript 感兴趣以取代您选择的内容：http: [//jsfiddle.net/5EXmc/1/](http://jsfiddle.net/5EXmc/1/)

```
$("select").change(function () {
  var str = "";
  $("select option:selected").each(function () {
            str += $(this).text() + " ";
  });
  $("div").text(str);
}).change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:08:19.337

如果您花 10 秒时间查看 HTML，您会发现它只是一个`select`带有`size`属性的元素。这只是输入元素的另一种模式。

# dialog - 对话框的嵌入指令需要有自己的编辑操作范围

> ID：15140105
> 
> 赞同：0
> 
> 时间：2013-02-28T16:04:08.720
> 
> 标签：dialog, scope, angularjs

我已经为多种用途创建了一个相当通用的对话框指令......但是当我使用它来编辑数据时......它仍然是双向绑定到原始调用控制器上的范围的。

这可能很简单，但我遇到了麻烦。我需要在对话期间克隆范围，然后在 okCallback 之前我需要将范围复制回来......所以用户实际上可以取消。

```
<div mydialog 
    open="{{isEditDialogOpen}}"
    modal="true"
    ok-button="Yes"
    ok-callback="saveEdits"
    cancel-button="No"
    cancel-callback="dismissEditDialog"
    title="Edit Category">
        <input ng-model="categoryToEdit.name" label-text="Category Name"></input>  
</div> 
```

这个问题在这个小提琴中变得很明显。[http://jsfiddle.net/hiddenkirby/HT6X7/](http://jsfiddle.net/hiddenkirby/HT6X7/)

编辑类别，然后开始在框中输入内容。

有什么想法吗？我想保留指令的嵌入使用方面。

有没有更“角度”的方式来解决/解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:50:14.423

显示编辑表单时，将当前数据值复制到变量/属性中：

```
$scope.showEditDialog = function(category, index){
    $scope.index = index;
    $scope.origData = angular.copy(category); 
```

如果用户点击取消/否，恢复它：

```
$scope.dismissEditDialog = function(){
    $scope.categories[$scope.index] = $scope.origData; 
```

HTML 更改：

```
<a ng-click="showEditDialog(category, $index)">Edit</a> 
```

[小提琴](http://jsfiddle.net/mrajcok/bkzyU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:16:56.450

所以我用下面的小提琴结束了。[http://jsfiddle.net/hiddenkirby/FYCXk/](http://jsfiddle.net/hiddenkirby/FYCXk/)

我关闭**了嵌入**以使用隔离范围。然后我对参数化模型值（*如果存在）进行***angular.copy** .. 但我从

 *```
scope.$parent["nameOfObjectOnParent"] 
```

复制它可以让我在我的编辑对话框中有一个取消状态。正在编辑的模型的这个隔离副本的另一个好处是，它通过 validationCallback 为我提供了$ **watch****的**东西。

 **我将能够选择在对话框上放置一个带有绑定的完整表单，并使用一些验证规则将一个对象传递给它。***

# python - Python：存储/检索/更新大量任意对象

> ID：15140106
> 
> 赞同：1
> 
> 时间：2013-02-28T16:04:17.533
> 
> 标签：python, pickle

我有几百万条记录要经常存储、检索、删除。这些记录中的每一个都有一个“键”，但是“值”不容易翻译成字典，因为它是从我没有编写的模块方法返回的任意 Python 对象（我知道很多分层数据结构喜欢`json`作为字典更好地工作，并且不确定`json`在任何情况下是否是首选数据库）。

我正在考虑将每个条目腌制在一个单独的文件中。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:14:32.807

使用[`shelve`](http://docs.python.org/2/library/shelve.html)模块。

您可以将它用作字典，就像 in 一样`json`，但它使用 pickle 存储对象。

来自 python 官方文档：

```
import shelve

d = shelve.open(filename) # open -- file may get suffix added by low-level
                          # library

d[key] = data   # store data at key (overwrites old data if
                # using an existing key)
data = d[key]   # retrieve a COPY of data at key (raise KeyError if no
                # such key)
del d[key]      # delete data stored at key (raises KeyError
                # if no such key)
flag = d.has_key(key)   # true if the key exists
klist = d.keys() # a list of all existing keys (slow!)

# as d was opened WITHOUT writeback=True, beware:
d['xx'] = range(4)  # this works as expected, but...
d['xx'].append(5)   # *this doesn't!* -- d['xx'] is STILL range(4)!

# having opened d without writeback=True, you need to code carefully:
temp = d['xx']      # extracts the copy
temp.append(5)      # mutates the copy
d['xx'] = temp      # stores the copy right back, to persist it

# or, d=shelve.open(filename,writeback=True) would let you just code
# d['xx'].append(5) and have it work as expected, BUT it would also
# consume more memory and make the d.close() operation slower.

d.close()       # close it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:19:05.173

我会评估键/值数据库（如 berkeleydb、kyoto cabinet 或其他）的使用情况。这将为您提供所有花哨的东西以及更好的磁盘空间处理。在块大小为 4096B 的文件系统中，无论对象的大小是多少，一百万个文件占用约 4GB（作为下限，如果对象大于 4096B，则大小会增加）。

# ios - RestKit 0.20.0-rc1 - 如何映射多个错误参数？

> ID：15140109
> 
> 赞同：2
> 
> 时间：2013-02-28T16:04:34.383
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, restkit

我目前正在使用 RKErrorMessage 类来映射来自我的服务器的错误消息，如下所示：

```
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:@"message" toKeyPath:@"errorMessage"]];
RKResponseDescriptor *errorResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping
                                                                                            pathPattern:nil
                                                                                                keyPath:@"error"
                                                                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError)]; 
```

但现在我想从我的服务器映射一个额外的参数，例如错误标题（或其他任何东西）。我的 JSON 看起来像这样：

```
{
    "error":{
        "title":"This is the error title"
        "message":"This is the error message",
    }
} 
```

这个想法是，如果我的应用程序访问服务器时出现问题，我可以直接将其中一些错误消息映射到 UIAlertViews。这已经可以*仅*使用错误消息完成，但添加标题似乎使其适合 UIAlertView。

通过查看 RKErrorMessage 类，我发现它只有两个参数：errorMessage 和 userInfo。我该怎么做呢？

**更新：**我尝试使用 RKErrorMessage 执行此操作的原因是它自动映射到传递到 RestKit get/post/put/etc 方法中的失败块的 NSError ......这非常好。

```
[objectManager getObjectsAtPath:@"/api/somethingsomething/" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

    } failure:^(RKObjectRequestOperation *operation, NSError *error) {

    }]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T15:26:53.977

这是一种执行您最初要求的方法（不确定您为什么接受实际上并未回答您的问题的答案）：

```
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:nil toKeyPath:@"userInfo"]];
RKResponseDescriptor *errorResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping
                                                                                            pathPattern:nil
                                                                                                keyPath:@"error"
                                                                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError)]; 
```

与您的示例代码的主要区别在于这一行：

```
[errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:nil toKeyPath:@"userInfo"]]; 
```

然后，从失败块回调中，您可以访问 userInfo 字典，如：

```
NSString *message = [[[[[error userInfo] objectForKey:RKObjectMapperErrorObjectsKey] objectAtIndex:0] userInfo] objectForKey:@"message"];
NSString *title = [[[[[error userInfo] objectForKey:RKObjectMapperErrorObjectsKey] objectAtIndex:0] userInfo] objectForKey:@"title"]; 
```

RestKit 会自动将 JSON 的“错误”字典的所有属性映射到 RKErrorMessage 的 userInfo 字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:24:12.010

你为什么用`RKErrorMessage`？？？

> RKErrorMessage 是一个简单的类，用于表示客户端应用程序与之通信的远程后端系统返回的错误消息。

我认为最好的方法是创建自定义对象来映射您的参数。

```
@interface MyCustomErrorObject : NSObject

    @property (nonatomic, strong) NSString *title;
    @property (nonatomic, strong) NSString *message;

@end 
```

# javascript - 本机日期选择器 - 有没有办法通过 javascript 触发它

> ID：15140122
> 
> 赞同：4
> 
> 时间：2013-02-28T16:05:05.430
> 
> 标签：javascript, html

有没有办法通过 javascript 在浏览器中触发本机日期选择器。

我想用

```
<input type="date" /> 
```

当输入字段没有焦点时，我想用我自己的样式显示它，然后使用本机日期选择器日历/滚轮（当它有焦点时）。

我很确定它不能完成，但任何想法或建议都会很可爱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:15:39.553

很久以前，我曾经拥有，并且在输入下方有一些精美的图像。当用户单击或进入文件输入时，它仍然像魅力一样工作。

你可以试试这个，但我不保证什么。

```
 type="text/css">
  .date_picker {
    position: relative;
    background:  grey /* your fancy background andstyle here */;
    width: 180px;
    height: 2em;
    display: inline-block;
  }
  .date_picker input[type="date"] {
    position: absolute;
    top: 0px;
    left: 0px;
    right: 0px;
    bottom: 0px;    
    opacity: 0;
  }

</style>
  <script >
    document.addEventListener('change', function(event){
      console.log(event);
      if (event.target.nodeName.toLowerCase() == 'input' && event.target.type == 'date') {
        var datePicker = event.target;
        var span = datePicker.previousSibling; 
        while (span.nodeName.toLowerCase() != 'span') {
          span = span.previousSibling;
        } 
        span.innerHTML = datePicker.value;
      }
    }, false);
  </script>   
<label class="date_picker">
    <span class="chosen_date">2013-03-04</span>
    <input type="date" value="2013-03-04"/>  
</label> 
```

适用于铬。不在其他任何地方测试，也没有时间。

主要问题 - 当焦点位于日期字段中时，光标不可见。第二个 - 框右侧应该有一个图像，因此用户知道在哪里单击以下拉日历，因此样式是您自己的。

# mysql - 存储pdf文件的最佳方法是什么？

> ID：15140127
> 
> 赞同：0
> 
> 时间：2013-02-28T16:05:18.403
> 
> 标签：mysql, vb.net

**大家好，**

如果这不是提出这个问题的正确论坛，请原谅我 - 但我想不出一个更有资源的社区。

我为一家小公司处理 IT 事务，在那里我构建了一个符合 PCI 标准的 VB.net 应用程序来存储信用卡信息。当客户授权将其卡信息存档时，他们需要签署一份授权表。到目前为止，一切都取得了成功，但现在他们希望能够存储此授权表的 pdf 副本并使其可以通过应用程序访问。

我一直在考虑以下方法来完成这项任务：

1.  FTP（与数据库分开）
2.  BLOB（直接在数据库中）

实现这一目标的最佳方法是什么，我将如何在 VB.net 中进行编码？我正在使用 MySQL 数据库。

//Kismet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:07:19.070

与数据库分离...只需将 URL 或文件路径保存在数据库中。在这种情况下，如果需要，您可以将 PDF 拆分到多个服务器上。还可以减小数据库的大小（您希望更频繁地备份）。

# facebook - 如果我们使用 JS SDK 登录，则在服务器端获取 facebook 会话

> ID：15140130
> 
> 赞同：13
> 
> 时间：2013-02-28T16:05:21.620
> 
> 标签：facebook, login

朋友们，

我已经使用 JS SDK 为我的网站设置了 facebook 登录。

1.  如果使用是通过JS SDK登录的，我们是否应该在服务器端交叉验证会话是否有效，因为客户端很容易被伪造。

2.  由于我使用 JS SDK，服务器将无法访问 facebook 会话。[如果我需要在服务器端验证会话，我可以像https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)中指定的那样使用 php-sdk 和 extern 会话吗？在这种情况下，我需要启用 CURL PHP 扩展以使其运行，并担心使用 php sdk 时性能是否会下降。

您能帮我找到上述问题的答案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T14:43:28.147

php sdk 和 javascript 完全相反，正如 Julian H. Lam 所说，实际上它们是为一起使用而构建的。

在[php sdk 文档](https://developers.facebook.com/docs/reference/php/)中，您可以找到以下内容：

> 与 Facebook SDK for JavaScript 集成
> 
> 与 Facebook SDK for JavaScript 结合使用，PHP SDK 可以在客户端和服务器之间无缝共享用户会话。如果用户使用 Facebook 登录并授权您的应用程序，JavaScript SDK 可以获取用户会话并将其保存在 cookie 中，PHP SDK 无需开发人员的任何干预即可读取该 cookie。
> 
> 要启用此功能，请确保在嵌入和初始化 JS SDK 时，将传递给 FB.init() 的对象的状态和 cookie 参数都设置为 true。

通过使用基本逻辑，这很有意义，在客户端，您可以创建侦听器来检索用户状态（如果他已登录，如果他已授予权限，如果他已注销），在服务器端执行此类操作不会一点意义都没有。

所以我对你的建议是使用 Javascript SDK 来处理用户事件，就像我之前提到的那样，并处理来自用户操作的响应，比如当用户点赞或使用提要对话分享帖子时等。使用 php SDK，您只需检查您是否有有效用户，因为在您使用 javascript SDK 处理登录过程后，您正在为客户端和服务器端共享相同的 cookie，如果您这样做`$fb_id = $facebook->getUser()`（当然在初始化 PHP SDK 之后），你会得到用户的 facebook id，现在你知道你有一个有效的用户，你可以使用 PHP SDK 来查询关于用户的信息，代表用户发帖等。

下面是正确加载带有 cookie 支持的 javascript SDK 的示例：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'YOUR_APP_ID',                        // App ID from the app dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true,                                  // Look for social plugins on the page
      cookie     : true
    });

    // Additional initialization code such as adding Event Listeners goes here
  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script> 
```

这是服务器端的一个简单代码，只是为了启发您：

```
require_once("facebook.php");

$config = array();
$config[‘appId’] = 'YOUR_APP_ID';
$config[‘secret’] = 'YOUR_APP_SECRET';
$config[‘fileUpload’] = false; // optional

$facebook = new Facebook($config);
try {
    $user_profile = $facebook->api('/me','GET');
    $user_name = $user_profile['name'];
    $user_email = $user_profile['email'];

} catch(FacebookApiException $e) {
    // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
} 
```

PS：此服务器端代码，仅在用户已授予范围电子邮件权限时才有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:27:14.633

这个问题有两个部分：首先，UI流程有所不同。请参阅：[https ://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)

1) 带有 JS SDK 的浏览器端。您从 oauth 2.0 对话框开始，获取访问令牌，然后使用它访问 Facebook API。

2) 服务器端使用signed_request 发布到服务器。有了这个，您可以提取 user_id。请参阅：[https](https://developers.facebook.com/docs/howtos/login/signed-request/) ://developers.facebook.com/docs/howtos/login/signed-request/ -

*   第 1 步 - 描述 signed_request，如何从 PHP 或 JS SDK 获取它
    *   第 2 步 - 如何验证 signed_request 不是伪造的。

    来自其他提供商的 Oauth 令牌可以与 FB 集成。请参阅我的 Dropbox 示例：apps.facebook.com/fileglu/ - 大约 2011 年 9 月，还可以查看技术部分以了解实现细节，包括 CSRF、CORS 和避免 javascript 加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:57:54.010

Facebook javascript 库和 php SDK 本质上可以被认为是两个不相互通信的实体，一个是客户端，另一个是服务器端。

php SDK 让您可以更精细地控制用户的登录会话，而 javascript 库更容易上手。

通常，通过 javascript 库登录的用户不会在服务器端自动登录，尽管在某些情况下，可以将访问令牌从客户端发送到服务器端。但是，不建议这样做，因为这些数据*可能*会被截获。

[这个相关问题](https://stackoverflow.com/questions/6126517/retrieve-access-token-using-javascript-api)讨论了将访问令牌（从 JS 库中检索到的）发送到服务器端。

在本质上：

```
FB.login(function(response) {
    var access_token = response.authResponse.accessToken;

    // Make an ajax call here to your server-side, and send access_token in.
}); 
```

# arrays - Scala逻辑索引与理解

> ID：15140132
> 
> 赞同：0
> 
> 时间：2013-02-28T16:05:30.733
> 
> 标签：arrays, matlab, scala

我正在尝试将以下 Matlab 逻辑索引模式转换为 Scala 代码：

```
% x is an [Nx1] array of Int32
% y is an [Nx1] array of Int32
% myExpensiveFunction() processes batches of unique x.

ux = unique(x);
z = nan(size(x));
for i = 1:length(ux)
  idx = x == ux(i);
  z(idx) = myExpensiveFuntion(x(idx), y(idx));
end 
```

假设我正在使用`val x: Array[Int]`Scala。做这个的最好方式是什么？

**编辑：**为了澄清，我希望一次处理一批（x，y），按唯一x分组，并返回一个结果（z），其顺序对应于初始输入。我愿意对 x 进行排序，但最终需要回到原始的未排序顺序。我的主要要求是以清晰且合理有效的方式处理所有索引/映射/排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:28:23.323

这在 Scala 中大部分都非常简单。唯一有点不同寻常的是唯一`x`索引。在 Scala 中，您可以使用 `groupBy' 来做到这一点。由于这是一个非常重索引的方法，所以我将放弃并一直使用索引：

```
val z = Array.fill(x.length)(Double.NaN)
x.indices.groupBy(i => x(i)).foreach{ case (xi, is) =>
  is.foreach(i => z(i) = myExpensiveFunction(xi, y(i)))
}
z 
```

假设你可以忍受缺乏向量的情况`myExpensiveFunction`。如果不，

```
val z = Array.fill(x.length)(Double.NaN)
x.indices.groupBy(i => x(i)).foreach{ case (xi, is) =>
  val xs = Array.fill(is.length)(xi)
  val ys = is.map(i => y(i)).toArray
  val zs = myExpensiveFunction(xs, ys)
  is.foreach(i => z(i) = zs(i))
}
z 
```

这不是在 Scala 中进行计算的最自然的方法，也不是最有效的方法，但是如果您的昂贵函数很昂贵，您就不会关心效率，这是我能得出的最接近直译的方法。

（将您的 matlab 算法翻译成几乎所有其他东西都需要一定程度的痛苦或重新思考，因为 matlab 中的“自然”计算与大多数其他语言中的计算不同。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:31:23.653

重要的是要让Matlab`unique`正确。一个简单的解决方案是使用 a`Set`来确定唯一值：

```
val occurringValues = x.toSet

occurringValues.foreach{ value =>
  val indices = x.indices.filter(i => x(i) == value)
  for (i <- indices) {
    z(i) = myExpensiveFunction(x(i), y(i))
  }
} 
```

注意：我假设可以更改`myExpensiveFunction`为按元素操作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:11:56.003

```
scala> def process(xs: Array[Int], ys: Array[Int], f: (Seq[Int], Seq[Int]) => Double): Array[Double] = {
     |   val ux = xs.distinct
     |   val zs = Array.fill(xs.size)(Double.NaN)
     |   for(x <- ux) {
     |     val idx = xs.indices.filter{ i => xs(i) == x }
     |     val res = f(idx.map(xs), idx.map(ys))
     |     idx foreach { i => zs(i) = res }
     |   }
     |   zs
     | }
process: (xs: Array[Int], ys: Array[Int], f: (Seq[Int], Seq[Int]) => Double)Array[Double]

scala> val xs = Array(1,2,1,2,3)
xs: Array[Int] = Array(1, 2, 1, 2, 3)

scala> val ys = Array(1,2,3,4,5)
ys: Array[Int] = Array(1, 2, 3, 4, 5)

scala> val f = (a: Seq[Int], b: Seq[Int]) => a.sum/b.sum.toDouble
f: (Seq[Int], Seq[Int]) => Double = <function2>

scala> process(xs, ys, f)
res0: Array[Double] = Array(0.5, 0.6666666666666666, 0.5, 0.6666666666666666, 0.6) 
```

# jquery - 带有侧导航链接的淡入/淡出（显示/隐藏）div

> ID：15140133
> 
> 赞同：0
> 
> 时间：2013-02-28T16:05:34.100
> 
> 标签：jquery, css, html, show-hide

无论有没有淡入淡出效果，我都无法让 div 正确显示和隐藏。这是 jsfiddle 上的以下代码（为方便起见）：http: [//jsfiddle.net/bUjx7/1/](http://jsfiddle.net/bUjx7/1/)

html:

```
<div class="container">
    <header>
        <ul class="sidenav">
            <li><h2><a data-region="nav-1" href="#"><span class="title">About</span></a></h2></li>
            <li><h2><a data-region="nav-2" href="#"><span class="title">Services</span></a></h2></li>
        </ul>
    </header>
    <div id="nav-1" class="infozone"><p>Hello I'm box 1.</p></div>
    <div id="nav-2" class="infozone"><p>Hello I'm box 2.</p></div>
</div> 
```

CSS：

```
.infozone{
    float:left;
    position:relative;
    height:400px;
    width:800px;
    background-color: #000;
    background-color: rgba(0,0,0);
    display:none;
} 
```

js：

```
$('.title a').click(function(){
  $('.infozone').fadeOut(550);
  var region = $(this).attr('data-region');    
  $('#' + region).fadeIn(550);
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:10:22.440

您没有在小提琴中选择使用 jquery 库。而且选择器也不正确，应该`.sidenav a`是`.title a`. 现在，它起作用了。在 jsfiddle 上检查：http: [//jsfiddle.net/bUjx7/5/](http://jsfiddle.net/bUjx7/5/)

```
$('.sidenav a').click(function(){
  $('.infozone').fadeOut(550);
  var region = $(this).attr('data-region');    
  $('#' + region).fadeIn(550);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:18:05.507

我的猜测是，当您尝试淡入时，仍然会在元素上触发淡出效果。尝试

```
$('.title a').click(function(){
  var region = $(this).attr('data-region');
  $( 'div' ).hasClass('infozone').not('#' + region).fadeOut(550);    
  $('#' + region).fadeIn(550);
}); 
```

我没有对此进行测试，所以请让我知道它是否有效。基本上，我在所有具有 infozone 类的元素上调用淡出，这些元素不是您希望显示的所需元素。

# ios - 读取整个 html 字符串 Asyncsocket iOS

> ID：15140138
> 
> 赞同：0
> 
> 时间：2013-02-28T16:05:55.450
> 
> 标签：ios, client-side, asyncsocket, cocoaasyncsocket, cocoahttpserver

嗨，我想从服务器读取整个 html，而不仅仅是像“HTTP/1.1 200 OK”这样的请求，我的意思也是 html 代码。但我不知道怎么做。我正在使用“ [https://github.com/roustem/AsyncSocket](https://github.com/roustem/AsyncSocket) ”中的 Asyncsocket 库有人知道我该如何处理？我用了功能

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag 
```

但数据很短，只显示http请求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:38:28.403

我猜你是`readDataToData:timeout:tag:`使用 CRLF 作为分隔符来调用的。这将返回一行数据。您想要的是读取足够的标头以告知响应数据应该多长时间然后调用`readDataToLength:timeout:tag:`，或者等待连接关闭并调用`unreadData`以获取服务器在关闭连接时发送的所有内容。

HTTP规范描述了如何确定消息的长度：[https ://www.rfc-editor.org/rfc/rfc2616#section-4.4](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:47:33.867

更好的答案可能是用于`NSURLConnection`发出请求并为您解释响应。

# django - 如何从 bash 脚本运行 django shell 命令

> ID：15140139
> 
> 赞同：0
> 
> 时间：2013-02-28T16:05:58.340
> 
> 标签：django, bash, django-shell

我决定创建一个名为 bash 脚本来为我执行此操作，而不是反复删除我的表、重新创建它们并在我的开发环境中填充数据`reset_db`。我得到它来敲打桌子，重新创建它们。但它无法使用来自 django orm 的数据填充表。

我尝试通过从脚本调用 django shell 然后运行 ​​ORM 命令来填充我的表来做到这一点。但似乎 django shell 命令没有运行。

我尝试在 shell 中手动/直接运行 django orm 命令，它们运行良好，但不能从 bash 脚本中运行。

我得到的错误是：

`NameError: name 'User' is not defined`

`NameError: name 'u1' is not defined`

`NameError: name 'm' is not defined`

这是我的脚本：

```
#!/bin/bash
set +e

RUN_ON_MYDB="psql -X -U user --set ON_ERROR_STOP=on --set AUTOCOMMIT=off rcamp1"

$RUN_ON_MYDB <<SQL  # Whack tables
DROP TABLE rcamp_merchant CASCADE;
DROP TABLE rcamp_customer CASCADE;
DROP TABLE rcamp_point CASCADE;
DROP TABLE rcamp_order CASCADE;
DROP TABLE rcamp_custmetric CASCADE;
DROP TABLE rcamp_ordermetric CASCADE;
commit;
SQL

python manage.py syncdb   # Recreate tables

python manage.py shell <<ORM   # Start django shell. Problem starts here.
from rcamp.models import Customer, Merchant, Order, Point, CustMetric, OrderMetric
u1 = User.objects.filter(pk=5)
m = Merchant(u1, full_name="Bill Gates")
m
ORM 
```

我是 django 和 shell 脚本的新手。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:16:50.900

你应该看看创建一个夹具来填充你的数据库[https://docs.djangoproject.com/en/dev/howto/initial-data/](https://docs.djangoproject.com/en/dev/howto/initial-data/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:22:28.503

您需要明确导入用户。包`django`和其他一些东西会自动导入，但不是您可能想要的所有东西。

另外，为了避免不知道要导入什么，还有[管理命令](https://docs.djangoproject.com/en/1.5/howto/custom-management-commands/)。这将利用您的 Django 和 Python。您可以稍后学习 shell 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T17:22:20.870

在您的错误中清楚地看到不被识别为模型类用户 django-admin 也许您缺少一些导入或类似的东西

```
 from django.db import models
  User import from django.contrib.auth.models 
```

，顺便排队

```
 User.objects.filter u1 = (pk = 5) 
```

我想我把

```
 u1 = User.objects.filter (pk = 5). First () 
```

在末尾。无论如何，在这里我留下一些可能有帮助的线程， [https ://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/) [http://www.stackoverflow.com/questions/6197256/django-user -model-fields-at-adminmodel](http://www.stackoverflow.com/questions/6197256/django-user-model-fields-at-adminmodel) [https://groups.google.com/forum/?fromgroups](https://groups.google.com/forum/?fromgroups) = #! topic/django-users/WrVp1DDFrX8 希望这会有所帮助。

# c++ - 使用 C++ 在 IE 9 中捕获文本

> ID：15140143
> 
> 赞同：1
> 
> 时间：2013-02-28T16:06:07.047
> 
> 标签：c++, internet-explorer-9, hook, direct2d, directwrite

我需要从 IE 9 中捕获文本（最好是当前显示的文本，而不是完整的 HTML 文档）。以前版本的 IE 使用 TextOut，您可以使用 API 监视器清楚地看到文本。现在 IE 9 使用 Direct2D/DirectWrite 呈现文本，因此没有可见文本。建议说您可以连接到 DWrite.dll 并通过 CreateTextLayout 获取文本，但这永远不会被调用。我假设在此渲染阶段之前必须在 MSHTML.dll 中截取文本。

任何帮助获取文本将不胜感激。

提前谢谢了。

# xml - 处理非结构化的大 XML 文件

> ID：15140144
> 
> 赞同：0
> 
> 时间：2013-02-28T16:06:10.463
> 
> 标签：xml, hadoop, xml-parsing, hive, apache-pig

我为大小接近 500 行的 XML 文件做了以下解决方案：

1.  使用XSLT 转换将大型 XML 文件转换为具有所需元素文件的较小 XML
2.  比在 java 代码中使用 SAXON XML 解析器我解析了这些新生成的文件
3.  与使用 JAXB 的概念相比，我将 XML 解组为 java 对象而不是 SQL SERVER。

但现在我有新的 XML 文件，它们非常大，将近 15000 行或更多行，而且非常非结构化。因此使用上述解决方案获取数据库中的数据将非常低效。我试图找出处理这些大文件的最佳解决方案。我做了一些研究，发现了这个名为“Altova XML spy”的工具，我可以使用它来降低我的非结构化 XML 文件的复杂性。我尝试使用这个工具处理单个大文件，但效果不佳。我还想将这些大文件转储到 hadoop 集群中并使用 Hive/Pig 获取数据。

所以我的问题是任何人都可以提出任何新的解决方案或程序。我可以使用任何工具将大型 XML 文件制作成不太复杂的文件来使用。

希望这么多信息就足够了。让我知道是否还有其他需要。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:37:50.317

如果您仍然打算使用 Pig 查询它，那么使用 Pig 来加载它怎么样？

例如`org.apache.pig.piggybank.storage.XMLLoader()`是一个功能来做到这一点。

但是，如果您认为需要一个集群来处理 15,000 个项目，那您就错了。任何个人计算机都可以管理 15,000 个项目。我同意 Michael Kay 的观点，这是非常少量的数据。

从我对 Hadoop 集群的一点经验来看，如果您的查询比计算机上的 30-40 秒快，那么集群没有用处，因为设置 map-reduce 作业结构大约需要 30 秒。即使是在个人计算机上需要几分钟的查询，集群的复杂性也不值得您花几秒钟的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:38:22.257

如果不更详细地了解问题，很难给出建议。您描述的过程本质上看起来非常低效 - 我看不出为什么需要 JAXP 步骤 - 但也许有一个很好的理由。抱歉，但这不是一个简单的编码问题——它需要一两天的咨询帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:48:39.387

1500行对我来说听起来不是很大。事实上，我会称之为微小的。

对不起，我真的帮不上忙。我不明白为什么处理这种大小的数据应该是一个问题。

# c - 在 char 设备中，我将 ioread 放在哪里？

> ID：15140147
> 
> 赞同：1
> 
> 时间：2013-02-28T16:06:16.720
> 
> 标签：c, linux-kernel, linux-device-driver

我有一个 pci 设备，我想要的只是通过从 /dev/pcidevice 中“cat”来读取它的内存。我对 char 设备的读取功能的第一次尝试如下所示：

```
ssize_t cdev_read(struct file *filp, char __user *buffer, size_t count, loff_t *f_pos) {

    ssize_t retval = 0;
    struct mypci_dev *device = filp->private_data;

/* reading data from pci device */
    device->values.fst = ioread16(device->bar[0]+OFFSET_FST);
    device->values.snd = ioread16(device->bar[0]+OFFSET_SND);
    ...
    device->values.lst = ioread16(device->bar[0]+OFFSET_LST);

    retval = copy_to_user(buffer, &device->values.fst, count);
    return retval;
} 
```

它没有用：/我将 copy_to_user 行更改为

```
retval = copy_to_user(buffer, "dummy", strlen("dummy")+1); 
```

但 cat /dev/pcidevice 仍然没有返回任何内容。

接下来，我将所有 ioread16 调用转移到 cdev_open() 中，我得到了我想要的。但现在我很好奇为什么它只能这样工作。我怎样才能让它以另一种方式工作？ATM 我会考虑开始复制等的计时器，但是等到 ioreads 完成就足够了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:01:47.717

[`copy_to_user()`](http://www.kernel.org/doc/htmldocs/kernel-api/API-copy-to-user.html)函数返回无法复制的字节数。成功时，它返回`0`. 现在想象一下用户空间在读取 0 字节时会有多惊讶。

真正的问题是它实际上是如何在内部工作的`cdev_open()`？我希望您阅读该函数中的 I/O 栏，而不向用户空间发送任何内容。`rmb();`在这种情况下，请在调用之前尝试在读取之后添加，`copy_to_user()`以确保每次读取都已完成（`rmb()`是读取内存屏障）。

另外，如果您还没有这样做，请查看 LDD[第 3](http://www.xml.com/ldd/chapter/book/ch03.html)章和[第 5 章。](http://www.xml.com/ldd/chapter/book/ch05.html)

希望能帮助到你。快乐黑客！

# eclipse - EGit 2.3 新增 --no-ff 选项，如何使用？

> ID：15140149
> 
> 赞同：4
> 
> 时间：2013-02-28T16:06:18.793
> 
> 标签：eclipse, git, eclipse-plugin, egit, git-merge

在 EGit 2.3 中，他们根据发布文档添加了无快进合并功能

> “支持 git merge --no-ff 作为 EGit 首选项。”
> 
> [http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.3](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.3)

我的问题是，你在哪里设置这个偏好？我尝试了 Preferences -> Team -> Git -> Configuration -> Repository Settings 然后在 [Core] 设置 mergeoptions = --no-ff 但这似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T18:19:38.787

识别以下合并选项，用于所有分支：

```
[merge]
    ff = true|false|only 
```

当您只想为某个分支配置它时，请使用以下内容：

```
[branch "name"]
    mergeoptions = --ff|--no-ff|--ff-only 
```

我还扩展了[New and Noteworthy](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.3)中的描述。

# jsf - 哪个 EL Resolver 将用于库中的 @ManagedBeans？

> ID：15140151
> 
> 赞同：0
> 
> 时间：2013-02-28T16:06:24.273
> 
> 标签：jsf, el

我正在考虑将其中的一些`@ManagedBeans`移到库中，以便在其他项目中重用它们。但是，我找不到当时将使用哪个**EL Resolver的信息。**

共享 bean 的项目必须有自己的`faces-config.xml`，因此可以声明 EL 解析器。将使用该解析器，还是使用该 bean 的应用程序中的解析器？如果库 jar 中没有定义 EL 解析器怎么办？

# mysql - 计算不同间隔的平均值

> ID：15140152
> 
> 赞同：1
> 
> 时间：2013-02-28T16:06:29.863
> 
> 标签：mysql, join, average

在 mysql 中，我正在计算不同时间间隔（3 天、7 天、30 天、60 天等）内相同指标的平均值，并且我需要将结果放在每个`id`.

目前，我每个间隔都使用一个 Join 。鉴于我必须为许多不同的商店计算这个，并且在几个不同的时间间隔内，有没有更清洁和/或更有效的方法来完成这个？

下面是我目前正在使用的代码。

在此先感谢您的帮助

```
SELECT T1.id, T1.DailySales_3DayAvg, T2.DailySales_7DayAvg
FROM(
    SELECT id, avg(DailySales) as 'DailySales_3DayAvg'
    FROM `SalesTable`
    WHERE `Store`=2 
      AND `Date` >= DATE_SUB('2012-07-28', INTERVAL 3 DAY)
      AND `Date` < '2012-07-28' 
) AS T1

JOIN(
    SELECT id, avg(DailySales) as 'DailySales_7DayAvg'
    FROM `SalesTable`
    WHERE `Store`=2 
      AND `Date` >= DATE_SUB('2012-07-28', INTERVAL 7 DAY)
      AND `Date` < '2012-07-28' 
) AS T2

ON T1.ArtistId = T2.ArtistId 
```

结果在哪里：

```
 id   DailySales_3DayAvg   DailySales_7DayAvg
3752              1234.56              1114.78
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:40:55.843

您可以使用这样的查询 -

```
SELECT
  id,
  SUM(IF(date >= '2012-07-28' - INTERVAL 3 DAY, DailySales, 0)) / 
    COUNT(IF(date >= '2012-07-28' - INTERVAL 3 DAY, 1, NULL)) 'DailySales_3DayAvg',

  SUM(IF(date >= '2012-07-28' - INTERVAL 7 DAY, DailySales, 0)) / 
    COUNT(IF(date >= '2012-07-28' - INTERVAL 7 DAY, 1, NULL)) 'DailySales_7DayAvg'
FROM
  SalesTable
WHERE
  Store = 2 AND Date < '2012-07-28'
GROUP BY
  id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:14:28.677

如果您想提取实时数据，我认为您无法以任何其他方式执行此操作。但是，如果您能负担得起显示稍微过时的数据，您可以为每个项目预先计算这些平均值（例如每天一次或两次）。

您可能想查看[Event Scheduler](http://dev.mysql.com/doc/refman/5.5/en/events.html)，它允许您将所有内容保存在 MySQL 中。

# jquery - 如何仅在内容使用 jQuery 淡出 jQuery 之后才淡入元素？

> ID：15140165
> 
> 赞同：4
> 
> 时间：2013-02-28T16:07:10.057
> 
> 标签：jquery, fadein, fadeout

[http://amyyatsuk.com/contact.html](http://amyyatsuk.com/contact.html)

我有一个使用 jQuery ajax() 提交到 php 处理页面的 HTML 表单。在 ajax() 调用的成功函数中，我有以下内容：

```
success: function() {
    $('#contactForm').fadeOut(1000);
    $('#hidden').delay(.1000).fadeIn(1500); 
    return false; 
```

这些影响是同时发生的。只有在联系表单完全淡出后，我才希望在隐藏的 div 中淡出。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:09:07.573

fadeOut 和 fadeIn 效果包含一个 onComplete 回调（可选）：

```
$('#contactForm').fadeOut(1000, function(){
  $('#hidden').fadeIn(1500); 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:08:40.790

有一个方便的内置回调：

```
success: function() {
    $('#contactForm').fadeOut(1000, function() {
        $('#hidden').fadeIn(1500); 
    });
    return false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:11:44.733

您可以在淡出中添加第二个参数，其中包含您想要执行的淡入。例如

```
success: function() {
$('#contactForm').fadeOut(1000,function(){
$('#hidden').fadeIn(1500);
});
return false; 
```

这只会在淡出完成后触发。涵盖在 API 文档中 - [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# python - 数学和变量问题 - Python 3.3

> ID：15140166
> 
> 赞同：0
> 
> 时间：2013-02-28T16:07:11.080
> 
> 标签：python, python-3.x

我正在尝试创建一个简单的计算器，但我正在使用的 IDE 一直告诉我我正在尝试使用字符串执行数学运算。我尝试将所有变量分配给双打，但没有奏效。

```
 """Calculator program"""

loop = 1  # 1 means loop; anything else means don't loop.
choice = 0  # This variable holds the user's choice in the menu
add1 = 0.0
add2 = 0.0
sub1 = 0.0
sub2 = 0.0
mul1 = 0.0
mul2 = 0.0
div1 = 0.0
div2 = 0.0
result = 0.0
while loop == 1:
    # Print the options user has
    print ("Welcome to calculator.py")

    print ("your options are:")
    print (" ")
    print ("1) Addition")
    print ("2) Subtraction")

    print ("3) Multiplication")

    print ("4) Division")
    print ("5) Quit calculator.py")
    print (" ")
    #Perform the desired operation
    choice = int(input("Choose your option: ").strip())
    if choice == 1:
        add1 = input()
        add2 = input()
        result = add1 + add2
        print(add1, add2)
        print (add1, "+", add2, "=", result)
    elif choice == 2:
        sub2 = input()
        sub1 = input()
        result = sub1 - sub2
        print (sub1, "-", sub2, "=", result)
    elif choice == 3:
        mul1 = input("Multiply this: ")
        mul2 = input("with this: ")
        result = mul1 * mul2
        print (mul1, "*", mul2, "=", result)
    elif choice == 4:
        div1 = input("Divide this: ")
        div2 = input("by this: ")
        result = div1 / div2
        print (div1, "/", div2, "=", result)
    elif choice == 5:
        loop = 0

print ("Thank-you for using calculator.py!") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:08:55.273

`input()`返回一个字符串，而不是一个数字。您必须将其转换为：

```
add1 = int(input()) 
```

或者

```
add1 = float(input()) 
```

取决于您希望您的计算器支持什么，否则您*确实是*在使用字符串执行数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:48:56.683

试着贴一个

```
 int() 
```

在它上面做

```
 int(input)) 
```

希望这可以帮助

# javascript - javascript 在模态窗口中清除 php post return

> ID：15140172
> 
> 赞同：0
> 
> 时间：2013-02-28T16:07:38.107
> 
> 标签：javascript, forms

我在模态窗口中有一个小表单。单击链接时会弹出该窗口。

该表单有 2 个按钮，提交和关闭。

提交内容后，表单将发布到 php.ini。PHP 返回一条感谢信息。当我单击关闭按钮时，它会清除表单中的信息，但不会清除留下的感谢信息。

我怎样才能做到这一点？这是我的代码。先感谢您。

表格

```
 <div class="panel3">
 <form id="form1" onsubmit="return submitForm2();">
 <input type="text" name="url" size="34" />
 <textarea placeholder="Please tell us why this should be reviewed." style="resize:none" name="flag" cols="25" rows="5"></textarea>
 <br>
 <input type="submit" name="submit" value="Submit" />
 <input type="button" onclick="formReset()" value="Close" class="trigger3" />
 <div class="form_result2"></div>
 </form>
 </div> 
```

和脚本

```
 <script>
 function formReset(){
 document.getElementById("form1").reset();
 }
 </script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:23:35.790

“谢谢”消息显示在哪里？如果它在“form_result2”内，reset() 函数不会清除消息。该函数仅清除表单元素。您必须单独清除“form_result2”div。

您可以使用

```
document.getElementsByClassName("form_result2").item(0).innerHTML=""; 
```

# sql - 更新表 t-sql 中的多个值

> ID：15140173
> 
> 赞同：0
> 
> 时间：2013-02-28T16:07:45.450
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有多个列，其中之一的 varchar 值如下。

```
1
2
4
02
05
6
03
06
123
32
87 
```

我想找到任何值以 0 开头的记录 > 删除该 0（所以 02 > 2）并更新该字段，因此没有以 0 开头的值。

我该如何去做，而不是手动更新前面有 0 的每条记录？这甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:09:42.207

以下代码通过将值转换为整数并返回字符串来删除前导零：

```
update t
    set col = cast(cast(col as int) as varchar(255))
    where t.col like '0%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:12:49.473

您可以使用以下内容：

```
update yourtable
set col = substring(col, 2, len(col)-1)
where left(col, 1) = '0' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/c023ad/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:11:09.420

运行此查询，直到我猜想所有内容都被过滤掉...

```
UPDATE Table SET Column=RIGHT(Column, LEN(Column)-1) WHERE Column LIKE '0%'; 
```

[编辑] 戈登的方法可能更好。

# javascript - 两个 url 的字符串比较失败

> ID：15140174
> 
> 赞同：0
> 
> 时间：2013-02-28T16:07:46.593
> 
> 标签：javascript, jquery, string

我有一个非常简单的字符串比较，但检查总是失败。我正在尝试加载`<img>`基于`window`宽度加载的不同图像。

```
$(document).ready(function() {
    var width = $(window).width();
    console.log(width);
    $('.slider-image').each(function() {
        resize_image( $(this), width );
    });
});

$(window).resize(function() {
    var width = $(window).width();
    $('.slider-image').each(function() {
        resize_image( $(this), width );
    });
});

function resize_image( image, width ) {
    console.log(width);
    if( width >= 480 && width < 768 ) {
        if(image.attr( 'src' ) != image.data( 'phone-src' ) ); {
            console.log( 'resize phone' );
            image.attr( 'src', image.data( 'phone-src' ) );
        }
    } else if ( width >= 768 && width < 960 ) {
        if(image.attr( 'src' ) != image.data( 'tablet-src' ) ); {
            console.log( 'resize tablet' );
            image.attr( 'src', image.data( 'tablet-src' ) );
        }
    } else if ( width >= 960 ) {
        if(image.attr( 'src' ) != image.data( 'desktop-src' ) ); {
            console.log( 'resize desktop' );
            image.attr( 'src', image.data( 'desktop-src' ) );
        }
    }
}; 
```

现在，我想要发生的是，`don't replace the src, if the width remains within the borders`. 我试图通过检查属性是否`src`已经具有该`data`属性来做到这一点，但是对其的字符串检查失败，因为它总是不相等，尽管 Chrome Inspector 中的两个属性都是相同的。为什么会这样？

顺便说一句，这两个字符串都是图像的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:39:27.300

为什么控制台日志后有额外的括号？

```
console.log( 'resize phone' )); 
```

我检查了比较`src`和`data`属性，它们匹配。除非您的图像没有用`data-phone-src=""`etc 标记，否则我认为该行会阻止设置 src。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:11:56.067

您可以检查 src 是字符串原语还是 String()。

```
new String("hi") == new String("hi");  // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:49:16.313

问题是我在每个 if 语句后面都有一个鬼鬼祟祟的分号......删除了那些并且它起作用了。

# git - 如何在打开新的 Git Bash 命令提示符时预定义命令

> ID：15140175
> 
> 赞同：0
> 
> 时间：2013-02-28T16:07:48.573
> 
> 标签：git, command-line, git-bash

我注意到在运行 Git 的各种（Windows 7）机器上，当我打开一个新的 Git Bash 命令提示符时，我通常可以通过按向上箭头来访问以前的命令。

这些命令因机器而异，但每次打开 Git Bash 时，每台机器都有相同的预设**命令**。例如，一台机器让我彻底滚动`git status`和`exit`，另一台有`exit`两个空白行，而第三台机器没有以前的命令。

谁能说出这些是如何设置的以及我可以做些什么来编辑它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:15:07.970

要预定义坚持的别名，请放置以下内容

```
alias gs="git status" 
```

进入你的`~/.bashrc`.

`~`将`C:\Users\<username>`在 Windows 中。

由于您对您想要的东西并没有过于具体：
您似乎希望有一组可以循环使用`up`的命令，基于您最近使用的所有机器上的命令。`~/.bash_history`（它们在每台机器上本地保存。）

在没有真正肮脏的黑客攻击的情况下，在所有机器之间拥有一个共同的历史是不可能的，也不太可能值得付出努力。关于如何实现循环功能，我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T19:05:30.743

这些命令存储在**bash_history**文件中，在 Windows 中是`C:\Users\[YOUR USERNAME]\.bash_history\`

# reporting-services - 获取“尚未指定运行报告所需的一个或多个参数”错误

> ID：15140176
> 
> 赞同：21
> 
> 时间：2013-02-28T16:07:51.037
> 
> 标签：reporting-services, sql-server-2008-r2

我正在构建一个报告，我想从用户那里接受两个值，将它们输入到查询中，并找到与这些条目关联的数据。

例如，如果您有一份员工列表、绩效衡量标准以及与之相关的价值观；然后用户将选择一个员工姓名/绩效衡量标准，他们将获得该员工对该衡量标准的评分信息。

我有两个参预览'以在本地运行报告我收到错误：“尚未指定运行报告所需的一个或多个参数”

我知道参数工作正常，因为我可以将它们的值直接输入文本框并且值正确填充。此外，如果我将查询更改为只接受一个参数（即 WHERE measure = @Measure），则查询有效。

我很困惑为什么会发生这个错误，因为我知道我的参数正在运行并且被正确填充。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-03T16:35:45.477

我在 .NET 4.0 中使用本地报告（在 .rdlc 文件中）遇到了这种行为，当参数值之一包含一个空字符串时。虽然设置参数是正确的：

```
 report.SetParameters(
            new List<ReportParameter> {
                new ReportParameter("Title", Messages.Title),
                new ReportParameter("SubTitle", Messages.Subtitle))
            }
            ); 
```

仅当两个参数实际上都包含一些字符时，它才会起作用，否则会引发提到的异常。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T21:48:29.933

此错误是由于您要么

**A** ) 参数在实际报告中拼写错误。这意味着查询需要@Name，但报告正在传递@Names（或其他拼写）。

或者

**B** ) 您是否有可能尝试使用 @Name 的 NULL 参数的默认值运行报告，但存储过程需要实际值？

如果您在 Visual Studio 中构建报表并为 @Name 参数提供默认值 (null)，则可能会发生这种情况。

尝试删除默认值或确保 @Name 参数具有实际值，即使它只是 ''。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-01T04:38:43.037

我有类似的问题。当您将 SharedDataSource 与具有空值的参数一起使用时，就会出现问题。如果您在嵌入式数据源中使用相同的查询，则没有问题。

与嵌入数据源不同，您必须定义是否允许在共享数据源的查询中使用的参数具有空值，如此处的屏幕截图中突出显示的那样。在我的情况下，共享数据源的查询中有两个参数可以具有空值。

[![为 SharedDataSource 参数设置 Allow Null](../Images/4b0382ebce2d7980ce8eb4da9c66fc46.png)](https://i.stack.imgur.com/GoOr0.png)

因此，在将它们设置为允许 null 后，问题已解决！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-15T09:00:07.210

这让我痛苦了好几个小时。事实证明，这与使用共享数据集有关。而是将数据集嵌入到您的报告中，它可以正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-31T16:37:30.717

我遇到了同样的问题，它现在在 sql server 2008 r2 上排序。

我知道这是一个老问题，但只是为了帮助别人：

真的很简单，只要确保包括大小写在内的拼写和@的使用相同。

我有一个名为 currentSpaceByDrive 的共享数据集，代码如下：

```
SELECT 
   [DRIVE]
  ,[Volume_Size_GB]
  ,[VolumeSpaceAvailable_GB]
  ,[VolumePercentAvailable]
FROM  monitoring.dbo.currentSpaceByDrive(@ServerID) 
```

我将共享数据集 currentSpaceByDrive 添加到我的报告中，并为其命名。当我右键单击它时，我的报告中的数据集属性，参数是@ServerID。

@ServerID 值来自另一个数据集，称为 the_servers（用户在其中选择 serverID）

我有一个也称为@ServerID 的报告参数，它从the_servers 获取其值，并用于在currentSpaceByDrive 上提供@ServerID 参数。

@ServerID 太多了，我了解，但是如果您基于此进行自己的测试，您将完成它。见附图。

希望这有助于马塞洛

![在此处输入图像描述](../Images/33acff7dcf9304ab926f57b5543b0069.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-10T11:08:47.657

检查报表服务器中的数据集，我遇到了类似的问题，我在 Visual Studio 中编辑共享数据集，但它没有工作，经过一个小时的挫折后，我检查了报表服务器中的数据集，我发现它没有更新我所做的更改在 Visual Studio 中，我将其删除并再次从 Visual Studio 重新部署数据集。有用 。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-26T06:03:38.387

对我来说，设置参数的值会产生问题。我不知道为什么，但参数值无法接受 string.Empty 或 null。所以我只是给了一个“”作为值解决了错误。

## 样本

```
ReportParameter[] parameters = new ReportParameter[4];
parameters[0] = new ReportParameter("Name", EName);
parameters[1] = new ReportParameter("ShiftName", CurrentShift);
parameters[2] = new ReportParameter("Date", LoginDate);
if(ValidateReportData())//some condition
{
    parameters[3] = new ReportParameter("Date1", LoginDate);
}
else
{
    //parameters[3] = new ReportParameter("Date1", string.Empty);//this makes exception while calling Render function.
    parameters[3] = new ReportParameter("Date1", " ");//Solves the issue.
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-01T11:03:44.053

实际上我不得不：

*   从报表中删除 SubReport 对象。
*   从工具箱中拖动新对象
*   设置子报表名称和报表
*   在参数“添加”中，选择每个参数和相关值。

然后对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-31T19:37:46.740

我想我有同样的问题，当我选择“全选”时，我的参数主管是空白的，这会导致错误“没有为子报表指定一个或多个参数”，但是如果我选择了几个主管名称，则会出现子报表。令人困惑的是，当检查“选择”时，管理器参数值显示所有值，但它无法在我的主管参数上使用。请注意，Supervisor 参数取决于 manager 参数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-11T20:22:20.387

我为多个报表使用了共享数据集，这个问题的根本原因是没有将报表本身的输入参数映射到共享数据集的参数。

为了解决这个问题，我导航到“报表数据”面板，打开数据集（实际上链接到共享数据集），单击“参数”选项卡，然后将报表参数映射到共享数据集的参数。

# spring - 根据查找的可变类型的Spring bean新实例

> ID：15140183
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:14.400
> 
> 标签：spring

我有一个基于 servlet 的应用程序，它当前使用注入的命令处理器 HashMap 来处理用户输入的命令。这工作得很好，但我需要修改它，以便命令处理器的每个实例都是唯一的。

新要求来自需要将一个命令的输出“管道”到另一个命令，因此如果命令处理器仍然是单个实例，则将列表“管道”到列表中将是有问题的。

我仍然需要能够将处理命令的类映射到命令文本。我的第一个想法是将 HashMap 从将命令映射到命令处理器的实例更改为将其映射到类名并使用它来实例化类的实例。但这不起作用，因为需要使用例如选项列表配置一些命令。

我已经研究过制作 bean 原型，这将接缝做我想要的关于获取已配置 bean 的新实例的操作，但我对如何映射它感到困惑，我认为我可以使用 bean ID。

我现在处于完全混乱的阶段，想不出该怎么做。

我知道解释有点轻，但这反映了我的困惑，我怀疑最大的帮助将来自澄清请求，这将有助于理清头绪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:17:16.920

如果我的要求正确，您要么需要命令类中的[工厂方法](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)[`FactoryBean`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean)，要么需要创建实例的工厂方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:54:08.107

您可以使用请求范围的 bean：

```
@Component
@Scope(value=WebApplicationContext.SCOPE_REQUEST,proxyMode=ScopedProxyMode.TARGET_CLASS)
public class CommandProcessor {
} 
```

您可以在代码中注入 CommandProcessor，Spring 将确保您为每个用户请求获得不同的实例。您还需要在您的类路径上使用 CGLIB。

# javascript - 在 Knockout.js 中对视图模型进行单元测试的问题

> ID：15140190
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:21.147
> 
> 标签：javascript, knockout.js, qunit

我正在使用 PhoneGap 和 Knockout.js 构建一个移动应用程序，并且我正在使用 QUnit 对其进行单元测试。我遇到了一个小问题。

它本质上是一个照片库，作为其中一项测试的一部分，我想首先获取所有通过 AJAX 加载的相册。然后我想返回第一张相册中的所有照片。

我可以单独获取相册，并对该功能进行工作单元测试，但我在扩展它以获取照片时遇到了很多困难。

我的视图模型称为 AlbumViewModel，它有两个可观察的数组，称为专辑（）和照片（）。首次打开应用程序时，会通过 AJAX 自动获取相册，并用结果填充相册（）。当一个相册被选中时，它被传递给 getPhotos()，它使相册() 无效并获取相册中的照片，将它们存储在 photos() 中。

专辑的单元测试如下：

```
test("Check albums created", function () {
    'use strict';

    // Stop the test
    stop();

    // Declare variables used
    var avmodel;

    // Create AlbumViewModel
    avmodel = new AlbumViewModel();

    // Wait for album fetch
    avmodel.albums.subscribe(function () {
        // Check albums length is more than 0
        ok(avmodel.albums().length > 0, "Albums length is " + avmodel.albums().length);

        // Run the tests for the albums
        start();
    }); 
}); 
```

由于它通过 AJAX 从服务器获取数据，因此我需要延迟执行，直到填充了 albums() 可观察数组。

这绝对没问题。但是，获取照片的测试存在更多问题。我基本上需要首先获取相册，然后，一旦它们被获取，获取其中一张并获取照片。现在，正如您在上面看到的，我通过订阅albums.subscribe 事件并在完成后运行测试来使用专辑完成此操作。所以，这似乎是测试 photos() 的方法。

这是我为测试照片而写的：

```
test("Check photos created", function () {
    'use strict';

    // Stop the test
    stop();

    // Declare variables used
    avmodel;

    // Create AlbumViewModel
    avmodel = new AlbumViewModel();

    // Wait for album fetch
    avmodel.albums.subscribe(function () {

        // Only check the first time it runs
        var albumToGet;
        if(typeof albumToGet === "undefined") {
            // Get the album to examine
            if (avmodel.albums()) {
                albumToGet = avmodel.albums()[0];

                // Subscribe to the photos observableArray
                avmodel.photos.subscribe(function () {
                    var photos = avmodel.photos(albumToGet);

                    // Check photos length more than 0
                    ok(photos.length > 0, "Photos length is " + photos);

                    // Restart
                    start();
                }); 

                // Get the photos for this album
                avmodel.getPhotos(albumToGet);
            }   
        }   
    }); 
}); 
```

本质上，我需要首先延迟获取专辑详细信息，直到收到并处理 AJAX 响应，然后，一旦完成，将 albumToGet 对象设置为第一个专辑并将其传递给 getPhotos方法，然后延迟执行测试，直到接收并处理用于获取照片的 AJAX 响应。

我以为我可以订阅相册（）一个订阅中的照片（）可观察数组，但不幸的是，Chrome的开发人员工具返回以下错误：

```
Uncaught RangeError: Maximum call stack size exceeded 
```

这似乎暗示了一个无限循环，可能意味着嵌套订阅可能不是最好的方法。谁能指出我误入歧途的地方？因为这是我第一次同时使用 QUnit 和 Knockout.js，所以我感觉有点超出我的深度。

TL;DR：我正在使用 QUnit 对 Knockout.js 应用程序进行单元测试。需要等待一种方法通过 AJAX 工作，然后获取返回的数据并将其传递给同样通过 AJAX 工作的第二种方法，以便测试代码。订阅第一种方法仅用于测试，但不能在第一个订阅中嵌套第二个订阅。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:20:36.583

您得到的无限循环不是因为嵌套订阅。

该错误是由内部订阅开头的这一行引起的

`var photos = avmodel.photos(albumToGet);`

相反，你应该有

```
var photos = avmodel.photos(); 
```

您实际上是将自定义专辑对象传递到可观察数组中，这就是导致异常的原因。

# java - 使用 parcelable 的 onListItemClick 未捕获的异常

> ID：15140192
> 
> 赞同：2
> 
> 时间：2013-02-28T16:08:28.303
> 
> 标签：java, android

我在 onListItemClick 使用 parcelable 时遇到了一个未捕获的异常，我已经用尽所有可能的途径来寻找答案。该应用程序是一个观鸟应用程序，它使用标准列表视图和自定义适配器，该适配器链接到详细活动。鸟类及其详细信息使用 SQLite 存储在本地。非常感谢任何帮助..

只是补充一下..这是我的第一个应用程序和第一个帖子，所以请善待..

这是我的 onListItemClick 方法：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Bird bird = birds.get(position);

    Intent intent = new Intent(this, Profile.class);
    intent.putExtra(".model.Bird", bird);
    startActivity(intent);
} 
```

这是我的个人资料类：

```
public class Profile extends Activity{

Bird bird;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile);

    Bundle b = getIntent().getExtras();
    bird = b.getParcelable(".model.bird");

    refreshDisplay();

} 
```

这是我的模型（没有设置器和获取器）：

```
public Bird() {
    super();
}

public Bird(Parcel in) {
     //Log.i(ReferenceGuide.LOGTAG, "Parcel constructor");

     id = in.readLong();
     name = in.readString();
     latin_name = in.readString();
     description = in.readString();
     habitat = in.readString();
     diet = in.readString();
     breeding = in.readString();
     wintering_habits = in.readString();
     where_to_see = in.readString();
     conservation = in.readString();
     image = in.readString();
     primary_colour = in.readInt();
     secondary_colour = in.readInt();
     crown_colour = in.readInt();
     bill_length = in.readInt();
     bill_colour = in.readInt();
     tail_shape = in.readInt();
     created_at = in.readString();
     upated_at = in.readString();
}
@Override
public int describeContents() {
     return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
     //Log.i(ReferenceGuide.LOGTAG, "writeToParcel");

     dest.writeLong(id);
     dest.writeString(name);
     dest.writeString(latin_name);
     dest.writeString(description);
     dest.writeString(habitat);
     dest.writeString(diet);
     dest.writeString(breeding);
     dest.writeString(wintering_habits);
     dest.writeString(where_to_see);
     dest.writeString(conservation);
     dest.writeString(image);
     dest.writeInt(primary_colour);
     dest.writeInt(secondary_colour);
     dest.writeInt(crown_colour);
     dest.writeInt(bill_length);
     dest.writeInt(bill_colour);
     dest.writeInt(tail_shape);
     dest.writeString(created_at);
     dest.writeString(upated_at);
}

public static final Parcelable.Creator<Bird> CREATOR =
          new Parcelable.Creator<Bird>() {

     @Override
     public Bird createFromParcel(Parcel source) {
          //Log.i(ReferenceGuide.LOGTAG, "createFromParcel");
          return new Bird(source);
     }

     @Override
     public Bird[] newArray(int size) {
          //Log.i(ReferenceGuide.LOGTAG, "newArray");
          return new Bird[size];
     }
}; 
```

编辑：这是 logcat 输出：

```
02-28 15:43:38.048: W/dalvikvm(16350): threadid=1: thread exiting with uncaught exception (group=0x41cfe468)
02-28 15:43:38.058: E/AndroidRuntime(16350): FATAL EXCEPTION: main
02-28 15:43:38.058: E/AndroidRuntime(16350): java.lang.NullPointerException
02-28 15:43:38.058: E/AndroidRuntime(16350):    at com.example.birdnote.ReferenceGuide.onListItemClick(ReferenceGuide.java:89)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.widget.AbsListView.performItemClick(AbsListView.java:1150)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.widget.ListView.performItemClick(ListView.java:4397)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2985)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.widget.AbsListView$1.run(AbsListView.java:3671)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.os.Handler.handleCallback(Handler.java:615)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.os.Looper.loop(Looper.java:155)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at android.app.ActivityThread.main(ActivityThread.java:5454)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at java.lang.reflect.Method.invokeNative(Native Method)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at java.lang.reflect.Method.invoke(Method.java:511)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1029)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:796)
02-28 15:43:38.058: E/AndroidRuntime(16350):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑2：我设置的代码`Birds`：

```
private List<Bird> birds;

// create reference to database
BirdsDataSource datasource;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reference_guide);

   // open connection to db
    datasource = new BirdsDataSource(this);
    datasource.open();

    // get list of birds from db 
    List<Bird> birds = datasource.findAll();  
    if(birds.size() == 0) {
        createData();
        birds = datasource.findAll();
    }

    // set view adapter
    ArrayAdapter<Bird> adapter = new CustomBaseAdapter(this, birds);
    setListAdapter(adapter);
} 
```

列表视图使用从数据库中很好地填充`Birds`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:28:05.713

替换此行

`Bird bird = birds.get(position);`

经过

`Bird bird = (Bird)l.getAdapter().getItemAtPosition(position);`

# javascript - 使用大约 5500 个链接最大限度地减少页面减速的有效方法是什么

> ID：15140193
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:30.833
> 
> 标签：javascript, html

我有一个带有 Jw 音频播放器的 php 页面，并且有大约 5500 个链接，在每个链接的 onclick 事件上都附加了一个 javascript 函数。php 正在生成文件的确切相对路径和名称，然后传递给 javascript。

```
<a class="items" href="#" 
onclick="play1('<?php echo $fname."'".","."'".$f; ?>');return false">
<?php echo($fname);?>
</a> 
```

最初我把它包在里面`<li>`，里面有一个图像，上面还有`<a>`。我的页面（显然）很慢，播放器需要时间来加载文件，我现在已经删除了`<li>`标签，现在它简单的 5500`<a>`个标签，页面现在响应速度更快。我想知道导致页面变慢的原因是什么，是内部链接太多`<li>`还是附加了javascript函数。

处理这种情况的最有效方法是什么，我可以使用的最轻的标签是什么，以便我可以尽可能减少开销？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:14:30.313

我认为主要问题是在一个页面上开始有这么多链接，然后你有任何开销 - javascript，从服务器到浏览器的标头等。快速完成类似操作的唯一方法是生成页面只需使用`<a>`and `<br/>`s。

话虽如此，JavaScript 会增加一些开销，减慢速度，渲染`<li>`元素，加载播放器，将音乐（我假设是视频或音乐）发送给用户，将其内容加载到浏览器中等等。通常，这些事情——减去播放器加载和流式传输内容——可以很快完成，但是当你考虑到这么多元素时，它肯定会加起来。该页面获得良好响应时间的唯一方法是纯粹使用`<a>`and `<br />`，并让一个单独的页面处理实际的媒体播放。我会建议分页虽然如评论中所述，或者如果你能侥幸逃脱类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:30:40.300

Is your page still slow whith only `<a>` ? What was the structure of the page with `<li>` ?

You might get some performance improvement by using a single javascript handler on an element that is the parent of the `<a>`s, and let the event bubble to know which link was clicked. (See [http://davidwalsh.name/event-delegate](http://davidwalsh.name/event-delegate) ..)

# java - 使用 Guava 的转发装饰器创建特定的集合

> ID：15140195
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:34.170
> 
> 标签：java, collections, guava

我有多个使用多个 Collection 参数的方法。

我想让事情更具体，所以我想使用转发装饰器

想到的第一个问题是：

*   使用 Forwarding Decoartor 是不是有点过头了，我是不是错过了更简单的东西，我的意思是这很简单，多亏了 Guava，但仍然如此？

如果转发装饰器是正确的路径，那么

到目前为止看起来还不错，但我不确定的一件事是如何取回基本集合（在这种情况下为 ImmutableSet）？

1.  我是否只是创建一个返回“委托”的新方法（在接口和类中）？（如果是这样，什么是一个好的方法名称？）
2.  还是还有更多？

在以下代码中，我将 ImmutableSet 保存为 setA。

编码：

界面：

```
package com.ps.experiment.forwarding;

import java.util.Collection;

public interface ISetA extends Set<String>{} 
```

班级：

```
package com.ps.experiment.forwarding;

import com.google.common.collect.ForwardingSet;
import com.google.common.collect.ImmutableSet;

    public class SetA extends ForwardingSet<String> implements ISetA
    {
        final ImmutableSet<String>  delegate;   // backing list

        @Override
        protected ImmutableSet<String> delegate()
        {
            return this.delegate;
        }

        private SetA(final ImmutableSet<String> strings)
        {
            this.delegate = strings;
        }

        public static ISetA of(final ImmutableSet<String> strings)
        {
            return new SetA(strings);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:15:55.617

您编写的代码是正确的方法。如果要访问后端集合，只需使用 make`delegate()` `public`而不是`protected`.

# heap-memory - 我可以说在具有动态类型绑定的语言中，所有变量都分配在堆上吗？

> ID：15140196
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:34.487
> 
> 标签：heap-memory, static-typing, dynamic-typing, stack-memory

我正在研究基于存储绑定的绑定过程和变量分类。所以，我面临四种变量：

1.  静态变量：它们在执行之前（即编译期间）绑定到内存，并在整个执行过程中保持绑定。
2.  堆栈动态变量：这些变量在编译时静态绑定到类型，但在代码执行到达声明之前它们不会绑定到内存位置。
3.  显式堆动态变量：这些变量通过显式运行时、程序员指定的指令分配和释放。堆而不是堆栈用于提供所需的存储单元。
4.  隐式堆动态变量：这些变量的所有属性，包括内存单元，在被赋值时都是绑定的。

我的问题是关于类型 2 和 4。在类型绑定是动态的编程语言中（Php、Ruby、Python，...），所有变量似乎都是类型 4。

这是真的吗？所有变量甚至局部变量都放在堆上？这是实现的事情还是不可能实现具有动态类型绑定的语言，其局部变量放在堆栈中而其他变量放在堆中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:29:56.767

不，打字和分配之间没有关联。第一个是语言功能，第二个（通常）是特定实现的细节，可能取决于特定的优化和其他因素。有些变量根本不会被“分配”。在更高级的语言中，假设变量和分配之间存在任何联系甚至是错误的——它们只是在程序文本中命名某些值。

所有这一切的唯一关系类型是它们可以实现更有趣的优化，或者至少使它们更容易。

# c# - Azure - 基本应用程序通信 c# vs 2012

> ID：15140198
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:08:38.373
> 
> 标签：c#, azure, tcp, worker

我必须在 c# 中使用 azure 编写一个应用程序：

具有工作角色比较 gps 信息存储用户个人资料信息

并且可以从用户设备获取和设置这两者。

例如，我想要我的设备通过打开与工作角色的连接来定期将其 gps 坐标上传到工作人员，验证用户，允许保存 gps 坐标而不是该用户的任何现有坐标。另外，或者作为我不知道的单独工作人员，我需要工作人员角色来检查和执行所有设备的 gps 的计算。然后在某些点将某些信息推送到特定设备。

我想要的似乎并不难，但只是找到一个从设备到天蓝色服务的 tcp 消息的简单示例，我花了几个小时查看我不理解的设备之间的通信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:18:35.267

可以使用 Azure 进行 TCP 编程，但如果您需要始终可用的 TCP 端点，则不实用。TCP 终结点不能在 Azure 中长时间保持非活动状态。

您当然可以按照 Ondrej 的建议使用 Web 服务。或者，您也可以使用 Azure 队列。我写了[一篇关于使用 Azure Queues 进行扩展](http://geekswithblogs.net/hroggero/archive/2012/12/27/scalable-distributed-workload-with-azure-queues.aspx)的博客。这是一个基于消息的解决方案，在 REST 调用之上运行。

我不清楚的是您需要直接从 Azure 访问所有设备。除非我误解了您的方案，否则您希望 Azure 角色“连接”到所有现有设备，从它们获取数据，在 Azure 中执行一些计算，然后将数据推送回设备？如果您的设备无法访问，这似乎很难做到并且容易出错 - 如果您的 GPS 设备注册了工作角色，并且可以通过公共 DNS 访问，我想您可以这样做。但就我个人而言，我倾向于只将数据从设备推送到云端的解决方案；这样应该会容易得多。您指的是哪种设备？你想做什么？

# php - 如何在 XML 签名消息中使用 phpseclib 验证签名？

> ID：15140200
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:45.360
> 
> 标签：php, encryption, sign, xml-signature, phpseclib

我测试了最终的 XML 签名文件，它发送“无效签名”，为什么？信息：我已经准备了这个信息。使用 XML 签名进行签名：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><SolicitudRegistro
    xmlns="http://www.cie.mx/SCG/Inilidad" IdMensaje="f2-8505d81914c">
<FechaEnvio>2013-02-26T21:08:36</FechaEnvio>
<Registrante EndPoint="https://200.34.175.46:443/InteropOPE
    /MensajeidadService"  Nombre="Instigua" NombreCorto="IMTA" URI="op.mx">
<DatosDeContacto AreaOficina="Informatica" 
    CorreoElect="req@tc.ia.mx" Nombre="Rafadina" Puesto="Subdirector nicaciones" >
<Telefonos>
<Telefono Extension=" " NumeroTelefonico="7773293644" />
</Telefonos>
</DatosDeContacto>
<CertificadoInstancia>MIIFETCCA/mgAwIBAgIUMDAwMDAwMDAwMDAwMD CERTIFICATE 
    WITH SENDER'S PUBLIC KEY=</CertificadoInstancia>
</Registrante>
<Reto>
<CadenaCifrada>Ln0BAsnwrNg6IzjW7hk2c/Nxx/x3LZ STRING ENCRYPTED 
    WITH PRIVATE KEY SO RECEIVER CAN AUTHENTICATE SOURCE WITH SENDER'S CERTIFICATE=
</CadenaCifrada>
</Reto>
</SolicitudRegistro> 
```

所以我将所有这些都存储在文件 results.xml 中，然后我用 phpseclib 函数对其进行签名，代码是：

```
<?php
require('xmlseclibs.php');
if (file_exists('./firmas/sign-basic-test_mio.xml')) {
    unlink('./firmas/sign-basic-test_mio.xml');
}
$doc = new DOMDocument();
$doc->load('./firmas/results.xml');
$objDSig = new XMLSecurityDSig();
$objDSig->setCanonicalMethod(XMLSecurityDSig::C14N);
$objDSig->addReference($doc, XMLSecurityDSig::SHA1,
    array('http://www.w3.org/2000/09/xmldsig#enveloped-signature',
    array('http://www.w3.org/TR/1999/REC-xpath-19991116' =>
    array("query" => "ancestor-or-self::*[local-
    name()='SolicitudRegistro']"))),array("force_uri"=>true));
$objKey = new XMLSecurityKey(XMLSecurityKey::RSA_SHA1, array('type'=>'private'));
/* load private key */
$objKey->loadKey('i.pem', TRUE);
$objDSig->sign($objKey);
/* Add associated public key */
$objDSig->add509Cert(file_get_contents('instancia_imta_ope.crt'));
$objDSig->appendSignature($doc->documentElement);
$doc->save('./firmas/sign-basic-test_mio.xml');
$sign_output = file_get_contents('./firmas/sign-basic-test_mio.xml');
$sign_output_def = file_get_contents('./firmas/sign-basic-test_mio.res');
if ($sign_output != $sign_output_def) {
    echo "NOT THE SAME";
}
echo "DONE";
?> 
```

这给出了一个完整的 XML 签名，看起来像（截断一些加密文本）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<SolicitudRegistro xmlns="http://www.cb.mx/SCG/Interlidad"
    IdMensaje="f2e140eb-2b09-44ab-8504-87b25d81914c">
<FechaEnvio>2013-02-26T21:08:36</FechaEnvio>
<Registrante EndPoint="https://200.34.175.46:443/InteropOPE.....
<DatosDeContacto AreaOficina="Informatica" CorreoElectronico.....
<Telefonos>
<Telefono Extension=" " NumeroTelefonico="7773293644"/>
</Telefonos>
</DatosDeContacto>
<CertificadoInstancia>MIIFETCCA/mgAwIBAgIUMDAwMDY....=</CertificadoInstancia>
</Registrante>
<Reto>
<CadenaCifrada>Ln0BAsnwrNg6IzjW7hk.....</CadenaCifrada>
</Reto>
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
  <ds:SignedInfo><ds:CanonicalizationMethod
    Algorithm="http://ww.org/TR/2001 /REC-xml-c14n-20010315"/>
   <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
   <ds:Reference URI=""><ds:Transforms><ds:Transform Algorithm="http://www.
   w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform
   Algorithm="http://www.w3.org/TR/1999/REC-xpath-19991116">
  <ds:XPath>ancestor-or-self::*[local-name()='SolicitudRegistro']</ds:XPath>
  </ds:Transform></ds:Transforms><ds:DigestMethod
  Algorithm="http://www.w3.org/2000/09 /xmldsig#sha1"
  /><ds:DigestValue>GogFeLcUThvfAeyNrDBroTQaGhA=</ds:DigestValue>
 </ds:Reference>
 </ds:SignedInfo><ds:SignatureValue>N+Btck0X9H81ZUcmrIK3h7LR2CtA86BPaBFE=
</ds:SignatureValue>
<ds:KeyInfo>
<ds:X509Data>
<ds:X509Certificate>MIIFETCCA/mgAwIB.....=</ds:X509Certificate>
</ds:X509Data>
</ds:KeyInfo> 
```

所有这一切都针对 1 个问题，您知道如何使用 PHPSECLIB 验证此签名的任何示例吗？还是其他图书馆？显示无效签名的测试页面是： [https ://ope.gob.mx/BrokerInteropQA/Diagnostico/default.aspx](https://ope.gob.mx/BrokerInteropQA/Diagnostico/default.aspx)

谢谢，我为这么多信息道歉，但我试图在我的怀疑中澄清马里奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:39:00.300

我会使用[xmlseclibs](https://code.google.com/p/xmlseclibs/) ( [author-blog](http://www.cdatazone.org/) )。现在这可能正在使用这些[`openssl_*`函数](http://php.net/book.openssl)，但它可能被重写为使用[*phpseclib*](http://phpseclib.sourceforge.net/)。

phpseclib 不够用的原因是，对于 XML 签名，您需要将[XML 规范化](http://en.wikipedia.org/wiki/Canonical_XML)。**和 **将以相同的方式解释，但*phpseclib*不知道。对于*phpseclib*，它只是一个文本字符串，并被视为文本字符串，它们都是不同的。但它们不是被视为 XML 字符串。****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:01:33.987

我将以下内容与 xmlseclibs 一起使用，但它发送给我 FAILURE !!!!，可能有什么问题？

```
<?php
require('xmlseclibs.php');
$doc = new DOMDocument();
$arTests = array('SIGN_TEST'=>'./firmas/sign-basic-test_mio.xml');
foreach ($arTests AS $testName=>$testFile) {
    $doc->load($testFile);
    $objXMLSecDSig = new XMLSecurityDSig();
    $objDSig = $objXMLSecDSig->locateSignature($doc);
    if (! $objDSig) {
    throw new Exception("Cannot locate Signature Node");
    }
$objXMLSecDSig->canonicalizeSignedInfo();
$objXMLSecDSig->idKeys = array('wsu:Id');
$objXMLSecDSig->idNS = array('wsu'=>'http://docs.oasis-open.org/wss/2004/01/oasis- 
    200401-wss-wssecurity-utility-1.0.xsd');
$retVal = $objXMLSecDSig->validateReference();
if (! $retVal) {
    throw new Exception("Reference Validation Failed");
}
$objKey = $objXMLSecDSig->locateKey();
if (! $objKey ) {
    throw new Exception("We have no idea about the key");
}
$key = NULL;
$objKeyInfo = XMLSecEnc::staticLocateKeyInfo($objKey, $objDSig);
if (! $objKeyInfo->key && empty($key)) {
    $objKey->loadKey('i.pem', TRUE);
}
if ($objXMLSecDSig->verify($objKey)) {
    print "Signature validateddd!";
} else {
    print "Failure!!!!!!!!";
}
print "\n";
}
?> 
```****

# objective-c - 多级 JSON 字典 - 无法将键提取到新字典中

> ID：15140203
> 
> 赞同：1
> 
> 时间：2013-02-28T16:08:58.990
> 
> 标签：objective-c, xcode, json, dictionary

几天来我一直被一个问题困扰。我搜索了互联网并找到了很多答案，但似乎没有任何效果 - 我可能不知道如何修改自己的代码。

我有一个 JSON 连接，我制作了一个字典。当我没有多级字典时，这一切都很好，但只要我有：

```
{
  "Table": [
    {
      "MENUID": 1072.0,
      "MENUDESC": "HOME           ",
      "PARENTMENUID": null,
      "NAVIGATETO": "content.aspx?item=1072&pid=0",
      "NAVIGATETO2": "default.aspx?item=1072&pid=0",
      "PROTECTED": null,
      "parentmenuid2": null
    },
    {
      "MENUID": 1073.0,
      "MENUDESC": "PRODUCTS &amp; SERVICES",
      "PARENTMENUID": null,
      "NAVIGATETO": "#",
      "NAVIGATETO2": "default.aspx?item=1073&pid=0",
      "PROTECTED": null,
      "parentmenuid2": null
    }
  ]
} 
```

我调整我的代码如下：

```
- (void)fetchTweets
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL: 
                        [NSURL URLWithString: @"http://adhoc.nyxtek.co.za/spfjsonws/default2.aspx"]];

        NSError* error;

        menuItems = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions 
                                                   error:&error];
        NSArray * allKeys = [menuItems allKeys];
        NSLog(@"Count : %d", [allKeys count]);

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return menuItems.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    NSDictionary *tweet = (NSDictionary *)[menuItems objectForKey:@"Table"];

    NSArray * allKeys = [tweet allKeys];
    NSLog(@"Count : %d", [allKeys count]);

    //NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
    NSString *text = [tweet objectForKey:@"MENUDESC"];
    NSString *name = [tweet objectForKey:@"MENUID"];

    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

    return cell;
} 
```

具体来说，这行代码不起作用：

```
NSDictionary *tweet = (NSDictionary *)[menuItems objectForKey:@"Table"]; 
```

我对外部字典的第一个计数是 1，这是正确的，但是我对上面新字典的第二个计数是 0，这是错误的。

当我了解研究的重要性时，我已经从研究以前的问题中应用了其中的大部分内容，但我似乎仍然无法找到具体的错误。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:12:04.790

`Table`是一个数组（字典）：

```
"Table": [
...
] 
```

所以代码应该是：

```
NSArray *tweet = (NSArray *)[menuItems objectForKey:@"Table"]; 
```

# c# - 导入列表并显示到内容以及列表中的 foreach 名称，它将添加到公共字符串性别中

> ID：15140204
> 
> 赞同：0
> 
> 时间：2013-02-28T16:08:59.737
> 
> 标签：c#, class, import, listbox

我有 2 个问题需要帮助：

第一个问题是在列表中显示我从文件中导入的字符串。我没有显示名称，而是获得了命名空间的名称 + 类 ex 的名称。`inupp_v9.boy`. 我试图覆盖字符串`ToString`，但之后列表根本没有显示任何内容。

我需要帮助的第二件事是我需要在`Person`类的构造函数中使用性别作为参数，并且对性别使用枚举是合适的。但问题是我不知道什么或如何使用它。如果有人能想出一个我可以使用的想法，以及如何使用它，那就太好了。

例如，我一直在考虑使用性别，当我创建一个新名称时，它将根据我检查的 2 个单选按钮中的哪一个将名称设置为男性或女性。然后将名称导出到`girltxt.file`或`boytxt.file`。

但是我不知道该怎么做，所以你们可以使用的任何示例都对我有用。

形式：

```
 private void collectg_Click(object sender, EventArgs e)
    {
        if (_hasBoys)
        {
            return;
        }

        _hasBoys = true;

        List<girl> girls = new List<girl>();

        foreach(var name in System.IO.File.ReadAllLines(@"C:\Path\tofile\girls.txt"))
        {
            girl g = new girl { Name = name };
            girls.Add(g);
        }

        listBox1.DataSource = girls;

    }

    private void collectb_Click(object sender, EventArgs e)
    {
        if (_hasGirls)
        {
            return;
        }

        _hasGirls = true;

        List<boy> boys = new List<boy>();
        foreach (var name in System.IO.File.ReadAllLines(C:\Path\tofile\boys.txt"))
        {
            boy b = new boy { Name = name };
            boys.Add(b);
        }

        listBox1.DataSource = boys;

    } 
```

课程：

```
namespace Inlämningsuppgift_v9
{
    class Person
    {
        public string Name { get; set; }

    }

    class girl : Person
    {
        public List<girl> girls { get; set; }

        //public override string  ToString()

        //{
        //    return girls.ToString();
        //}

    }
    class boy : Person
    {
        public List<boy> boys { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:14:19.910

覆盖`ToString`方法以查看名称值而不是类名：

```
class Person
{
    public Gender Gender { get; set; }
    public string Name { get; set; }

    public override string ToString()
    {
        return Name;
    }
}

enum Gender
{
     Male,
     Female
} 
```

如何从派生类设置性别：

```
class Girl : Person
{        
    public Girl()
    {
        Gender = Gender.Female;
    }
} 
```

* * *

顺便说一句，这是您的代码简化：

```
private void collectg_Click(object sender, EventArgs e)
{
    if (_hasBoys)        
        return;        

    _hasBoys = true;

    listBox1.DataSource = File.ReadAllLines(@"C:\Path\tofile\girls.txt")
                              .Select(line => new Girl { Name = line })
                              .ToList();
}

private void collectb_Click(object sender, EventArgs e)
{
    if (_hasGirls)
        return;

    _hasGirls = true;

    listBox1.DataSource = File.ReadAllLines(@"C:\Path\tofile\boys.txt")
                              .Select(line => new Boy { Name = line })
                              .ToList();
} 
```

另外我建议您将硬编码的文件名移动到配置文件中。实际上，我看不出有任何理由将女孩和男孩分开上课。我认为您可以在这里使用一个 Person 类。像这样：

```
private IEnumerable<Person> GetPersons(Gender gender)
{
    string fileName = // get file name depending on gender
    return File.ReadAllLines(fileName)
               .Select(line => new Person { Name = line, Gender = gender })
               .ToList();
} 
```

您可以使用这样的创建方法，而不是两个不向基类添加任何数据或行为的类：

```
class Person
{
    public static Person CreateBoy(string name)
    {
        return new Person { Name = name, Gender = Gender.Male };
    }

    public static Person CreateGirl(string name)
    {
        return new Person { Name = name, Gender = Gender.Female };
    }

    public Gender Gender { get; private set; }
    public string Name { get; private set; }

    public override string ToString()
    {
        return Name;
    }
} 
```

Then creating boys will look like: `Person.CreateBoy(name)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:16:48.947

You're asking a bunch of questions here, but I'll do my best to answer them. If the classes `boy` and `girl` are just supposed to have a name attribute which is shown when you call `ToString()`, I'd do it more like:

```
class girl : Person
{
    public override string  ToString()

    {
        return Name.ToString(); //ToString is redundant though.
    }

} 
```

I'm not sure why you're putting a `List<girl>` in the class though, so I've removed it.

You can create an `Enum` very simply:

```
enum Gender{
   Male,
   Female
} 
```

and then alter your class to accept a new parameter.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:26:19.777

if you read this thread [C# List<string> to string with delimiter](https://stackoverflow.com/questions/3575029/c-sharp-liststring-to-string-with-delimiter) may be is usefull to your question, also in this website explain ways to call member of a list of string and convert members of list to string [http://www.dotnetperls.com/convert-list-string](http://www.dotnetperls.com/convert-list-string) , [http://msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx) Hope that helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:27:59.130

Yeah, the ToString() on the person should fix your issue on the list box.

You could also set a specific display member.

```
listBox1.DisplayMember = "Name"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T16:37:08.233

To display the name you can override ToString correctly in the Person class;

```
public override string ToString()
    {
        return Name;
    } 
```

or set the DisplayMemer of the ListBox to "Name" as Kwel stated

```
listBox1.DisplayMember = "Name"; 
```

? Why do you want your boys and girls have lists of boys and girls? ? Why should gender as parameter in the constructor of Person apply a filter set by RadioButtons?

```
radioButton1.Checked ... Load girls.txt
radioButton2.Checked .. Load boys.txt 
```

# html - 如何在 Twitter Bootstrap 中居中导航下拉菜单？

> ID：15140206
> 
> 赞同：3
> 
> 时间：2013-02-28T16:09:22.007
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 开发一个主题，我试图让下拉导航居中而不是左对齐。需要明确的是：我说的是相对于其父级将整个下拉框居中，而不是在框内居中文本。

标记如下所示：

```
<ul id="nav" class="nav ww-nav pull-right hidden-phone">
  <li class="active"><a href="#">Words</a></li>
  <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles</a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
        <li><a href="#">Published</a></li>
        <li><a href="#">Categorized</a></li>
        <li><a href="#">Uncategorized</a></li>
        <li><a href="#">Award Winning</a></li>
    </ul>                   
  </li>
  <li><a href="#">About</a></li>
  <li><a href="#">Contact</a></li>
</ul> 
```

为了澄清我的意思，我将附上截图：

![引导下拉菜单](../Images/b2ed814272c03b86874b08ccdf80cca1.png)

**注意：**我正在寻找适用于不同父项的通用解决方案。由于它是一个主题，导航项可以是 3 个字符到 20 个字符宽的任何内容。不幸的是，一个简单的 X 像素边距并没有削减它。

PS：按照评论中的要求，我把整个事情放在了 JSFiddle 上：http: [//jsfiddle.net/zdCYX/4/](http://jsfiddle.net/zdCYX/4/)

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T15:52:03.127

我使用 jQuery 解决了这个问题，计算和调整每个子菜单的左边距。

这样我的导航项之间就有相同的空间。

```
document.onreadystatechange = function() {
    if (document.readyState === 'complete') {
        $("ul.ww-nav ul.dropdown-menu").each(function(){
            var parentWidth = $(this).parent().innerWidth();
            var menuWidth = $(this).innerWidth();
            var margin = (parentWidth / 2 ) - (menuWidth / 2);
            margin = margin + "px";
            $(this).css("margin-left", margin);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:12:11.130

浏览器中的Jsfiddle[演示](http://jsfiddle.net/shail/h56LW/show/)
您可以做的是将宽度设置为主导航元素，而不是下拉：如下所示：

```
 .navbar .nav > li {

   width: 116px;
     }

.dropdown-menu {
      display:none;
      width:116px;
      min-width:116px;
      margin:0 auto;
  } 
```

您将不得不更改以下代码对齐元素

```
.dropdown-menu > li > a {
         text-align:center;
} 
```

# .net - 检查传输级加密是否有效？

> ID：15140210
> 
> 赞同：2
> 
> 时间：2013-02-28T16:09:33.390
> 
> 标签：.net, wcf, security, encryption, certificate

可以将消息跟踪器与 WCF 一起使用，以查看使用消息加密的通信是否真正加密。有关更多信息，请参见此处的第 5 点：[此处](http://robbincremers.me/2011/12/29/wcf-message-security-and-client-certificate-authentication-with-self-signed-certificates/)

但如果我们改为使用传输级加密，它仍然有效吗？因为当我检查它时，数据是用明文写的？我怀疑因为加密是在传输级别进行的，所以 WCF 跟踪器将显示内容而不是加密字符串？

使用传输级安全性时，有什么方法可以检查数据是否加密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:03:18.490

是的。如果您想确保数据已加密，您可以使用[Wireshark](https://www.wireshark.org/ "线鲨")嗅探数据包并检查其内容。

请务必确认数据不是简单编码的，而是实际加密的。尝试将其解码为 ascii、ascii-hex、Base64 等。如果它真的是加密的，那么这些解码尝试都会失败。[Burp Suite](http://www.portswigger.net/burp/ "打嗝套房")中提供了一个很棒的免费啤酒解码器。

# javascript - JS RegExp 删除所有 HTML 标记及其内容？

> ID：15140211
> 
> 赞同：2
> 
> 时间：2013-02-28T16:09:34.273
> 
> 标签：javascript, jquery, regex

例如，我需要从中得到：

```
Before Bold <b>In Bold</b> After Bold 
```

要得到：

```
Before Bold After Bold. 
```

我试过了：

```
string.replace(/<.*>.*<\/.*>/,'') 
```

但它没有按预期工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-17T17:45:57.083

尝试这个：

```
string.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/ig, "") 
```

它对我有用。

看到它在[这里工作](http://jsfiddle.net/fVTU6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:11:09.123

```
var div = document.createElement("div"),
    result = "",
    child;

div.innerHTML = str;
child = div.firstChild;

do {
    if (child.nodeType === 3) {
        result += child.nodeValue;
    }
} while (child = child.nextSibling);

console.log(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:22:18.733

我不确定正则表达式，但是使用 jQuery，您可以轻松地删除子项并使用经典的单行符返回 HTML：

```
string = $('<div>').html(string).children().remove().end().html(); 
```

# c# - 将文件从一个位置复制到另一个位置

> ID：15140212
> 
> 赞同：7
> 
> 时间：2013-02-28T16:09:36.577
> 
> 标签：c#, asp.net

我正在尝试创建一个目录和子目录，并将文件从一个位置复制到另一个位置。以下代码有效，但如果有子目录，它不会创建父目录（10_new）。我正在尝试将所有内容（包括子目录）从`"c:\\sourceLoc\\10"`文件`"c:\\destLoc\\10_new"`夹复制。如果`"10_new"`不存在，那么我应该创建这个文件夹。请协助。

```
string sourceLoc = "c:\\sourceLoc\\10";
string destLoc = "c:\\destLoc\\10_new";

foreach (string dirPath in Directory.GetDirectories(sourceLoc, "*", SearchOption.AllDirectories))
{
    Directory.CreateDirectory(dirPath.Replace(sourceLoc, destLoc));
    if (Directory.Exists(sourceLoc))
    {
         //Copy all the files
         foreach (string newPath in Directory.GetFiles(sourceLoc, "*.*", SearchOption.AllDirectories))
             File.Copy(newPath, newPath.Replace(sourceLoc, destLoc));
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T16:19:20.250

以下是如何将目录中的所有文件复制到另一个目录

这取自[http://msdn.microsoft.com/en-us/library/cc148994.aspx](http://msdn.microsoft.com/en-us/library/cc148994.aspx)

```
string sourcePath = "c:\\sourceLoc\\10";
string targetPath = "c:\\destLoc\\10_new";
string fileName = string.Empty;
string destFile = string.Empty;

// To copy all the files in one directory to another directory. 
// Get the files in the source folder. (To recursively iterate through 
// all subfolders under the current directory, see 
// "How to: Iterate Through a Directory Tree.")
// Note: Check for target path was performed previously 
//       in this code example. 
if (System.IO.Directory.Exists(sourcePath))
{
    string[] files = System.IO.Directory.GetFiles(sourcePath);

    // Copy the files and overwrite destination files if they already exist. 
    foreach (string s in files)
    {
        // Use static Path methods to extract only the file name from the path.
        fileName = System.IO.Path.GetFileName(s);
        destFile = System.IO.Path.Combine(targetPath, fileName);
        System.IO.File.Copy(s, destFile, true);
    }
}
else
{
    Console.WriteLine("Source path does not exist!");
} 
```

## [递归目录/子目录](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/file-system/how-to-iterate-through-a-directory-tree)

```
public class RecursiveFileSearch
{
    static System.Collections.Specialized.StringCollection log = new System.Collections.Specialized.StringCollection();

    static void Main()
    {
        // Start with drives if you have to search the entire computer.
        string[] drives = System.Environment.GetLogicalDrives();

        foreach (string dr in drives)
        {
            System.IO.DriveInfo di = new System.IO.DriveInfo(dr);

            // Here we skip the drive if it is not ready to be read. This
            // is not necessarily the appropriate action in all scenarios.
            if (!di.IsReady)
            {
                Console.WriteLine("The drive {0} could not be read", di.Name);
                continue;
            }
            System.IO.DirectoryInfo rootDir = di.RootDirectory;
            WalkDirectoryTree(rootDir);
        }

        // Write out all the files that could not be processed.
        Console.WriteLine("Files with restricted access:");
        foreach (string s in log)
        {
            Console.WriteLine(s);
        }
        // Keep the console window open in debug mode.
        Console.WriteLine("Press any key");
        Console.ReadKey();
    }

    static void WalkDirectoryTree(System.IO.DirectoryInfo root)
    {
        System.IO.FileInfo[] files = null;
        System.IO.DirectoryInfo[] subDirs = null;

        // First, process all the files directly under this folder
        try
        {
            files = root.GetFiles("*.*");
        }
        // This is thrown if even one of the files requires permissions greater
        // than the application provides.
        catch (UnauthorizedAccessException e)
        {
            // This code just writes out the message and continues to recurse.
            // You may decide to do something different here. For example, you
            // can try to elevate your privileges and access the file again.
            log.Add(e.Message);
        }

        catch (System.IO.DirectoryNotFoundException e)
        {
            Console.WriteLine(e.Message);
        }

        if (files != null)
        {
            foreach (System.IO.FileInfo fi in files)
            {
                // In this example, we only access the existing FileInfo object. If we
                // want to open, delete or modify the file, then
                // a try-catch block is required here to handle the case
                // where the file has been deleted since the call to TraverseTree().
                Console.WriteLine(fi.FullName);
            }

            // Now find all the subdirectories under this directory.
            subDirs = root.GetDirectories();

            foreach (System.IO.DirectoryInfo dirInfo in subDirs)
            {
                // Resursive call for each subdirectory.
                WalkDirectoryTree(dirInfo);
            }
        }            
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T16:19:50.047

通过查看您的代码，您永远不会检查父文件夹是否存在。您首先跳到获取所有子文件夹。

```
if (!Directory.Exists(@"C:\my\dir")) Directory.CreateDirectory(@"C:\my\dir"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T16:14:43.497

在执行 File.Copy 之前，请检查以确保该文件夹存在。如果它不创建它。此函数将检查路径是否存在，如果不存在，它将创建它。如果它无法创建它，无论出于何种原因，它将返回 false。否则为真。

```
 Private Function checkDir(ByVal path As String) As Boolean
        Dim dir As New DirectoryInfo(path)
        Dim exist As Boolean = True
        If Not dir.Exists Then
            Try
                dir.Create()
            Catch ex As Exception
                exist = False
            End Try
        End If
        Return exist
    End Function 
```

请记住，所有 .Net 语言都编译为 CLR（公共语言运行时），因此无论是在 VB.Net 还是 C# 中都没有关系。在两者之间进行转换的一个好方法是： [http ://converter.telerik.com/](http://converter.telerik.com/)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-09-14T00:25:27.490

在 Windows 7 中无法使用 C# 复制或移动文件。

相反，它将创建一个零字节的文件。

# zsh - 奇怪的 zsh 行为：如何调试？

> ID：15140221
> 
> 赞同：1
> 
> 时间：2013-02-28T16:09:52.347
> 
> 标签：zsh

当我进入

```
$ echo $USER: 
```

我明白了

```
robin: 
```

这很好。但是当我输入时：

```
$ echo $USER:a 
```

我明白了

```
/Users/robin/robin 
```

那是

[MY_CURRENT_DIR]/[MY_USER_NAME]

这种行为对我来说似乎很奇怪。谁能告诉我如何调试这个？我已经检查了别名，但不是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:45:48.827

`:a`被解释为参数上的修饰符，`$USER`将其视为文件名并通过在当前目录前面将其转换为绝对路径。这在手册页的[**修饰符**](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Modifiers)[小节中的](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Modifiers)**历史扩展**部分中进行了介绍 。`zshexpn`[](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Modifiers)

 **您可以通过用花括号将变量名括起来来防止这种情况： `${USER}:a`。一般来说，当变量名后面出现除空格或引号字符之外的其他内容时，这样做是个好主意。**

# aspectj - AspectJ：跟踪其类类型已使用 Java 注释 @logging 标记的对象

> ID：15140222
> 
> 赞同：0
> 
> 时间：2013-02-28T16:09:54.363
> 
> 标签：aspectj, java.util.logging

我是 aspectJ 的新手，我需要创建一个使用 @logging 注释来跟踪对象的方面。

我创建了一个切入点，但在 @logging 注释上收到警告。

```
 pointcut tracedObjects(Object v): target(v) &&  call(@logging new(..)) && !within(BasicLogger); 
```

警告是“与此类型名称不匹配：记录 [Xlint:invalidAbsoluteTypeName]”有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:01:10.047

看起来你需要使用绝对路径`@logging`，所以更多的东西是

```
pointcut tracedObjects(Object v): target(v) &&  call(@com.yourpackage.logging new(..)) && !within(BasicLogger); 
```

您可能也需要为 BasicLogger 执行此操作。

# php - extjs 4：存储回调问题

> ID：15140223
> 
> 赞同：0
> 
> 时间：2013-02-28T16:09:56.397
> 
> 标签：php, extjs, extjs4, store

我正在开发一个 Extjs 4 应用程序，现在我需要动态创建视图组件。

当我从组合框中选择一个值时，我有一个加载了新项目的商店。我想为新商店的每件商品创建一个新的视图组件。

我正在使用带有 MVC 架构的 Extjs 4。

这是创建一个新组合框的函数，当我从另一个组合中选择一个项目时会触发该组合框：

```
function createComboBox(label) {
var combo = new Ext.form.ComboBox({
    displayField: 'combo',
    typeAhead: true,
    mode: 'local',
    forceSelection: true,
    triggerAction: 'all',
    emptyText: 'Select item...',
    selectOnFocus: true,
    fieldLabel: label
});
return combo;
} 
```

这是我的“选择组合框”处理程序事件中的代码：

```
 onSelectedValue: function (combo) {
 var selected = combo.getValue();
 var guiDataStore = this.getGuiDataStore();
 guiDataStore.getProxy().url = 'gui_comp_items.php?id_metric=' + selected;
 guiDataStore.load({
     params: {
         id_metric: selected
     },
     scope: this,
     callback: function () {
         var paramsRef = this.getParams();//this is the view where I'd like to create the combobox
         var total = guiDataStore.getTotalCount();
         if (total > 0) {
             guiDataStore.each(function (model) {
                 if (model.get('type_guicomp') == 'combobox') {
                     paramsRef.down('fieldset[id=filterfieldset]').add(createComboBox(model.get('name_filter')));
                     paramsRef.down('fieldset[id=filterfieldset]').doLayout();
                 }
             })

         }
     }
 }) 
```

}

所以我的问题是，当我第一次从现有的组合框中选择一个项目时`total = 0`，没有创建组合框并且一切都很好，然后当我选择一个返回的值时`total = 2`，创建了 2 个新的组合框，这是完美的。但是，在那之后，我再次选择一个值`total = 0`，商店没有更新，我仍然得到 2 个新的组合框。

我的回调有问题吗？请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:31:03.163

曾经`guiDataStore`有2条记录，为什么下次它会是空的？

例如，您是否在各种回调调用之间清空存储？

# c++ - 从 double 到 unsigned long long 的转换失败

> ID：15140226
> 
> 赞同：0
> 
> 时间：2013-02-28T16:10:01.543
> 
> 标签：c++, floating-point, type-conversion

根据[convert from float-point to custom numeric type](https://stackoverflow.com/questions/15057546/convert-from-float-point-to-custom-numeric-type)的问题，我想出了一种可移植的安全方法将浮点类型转换为整数数组，并且代码工作正常，但是对于某些值，在从 转换`double`为`unsigned long long` **时的精度可以是由转换安全表示`unsigned long long`**的失败不是编译时错误而是无效值是最小可表示值`signed long long`或零，转换在visual c++ 2008、intel xe 2013和gcc 4.7.2上失败。

这是代码：（注意函数`while`循环内的第一条语句`main`）

```
#ifndef CHAR_BIT
#include <limits.h>
#endif

#include <float.h>
#include <math.h>

typedef signed int          int32;
typedef signed long long    int64;
typedef unsigned int       uint32;
typedef unsigned long long uint64;

typedef float  float32;
typedef double float64;

// get size of type in bits corresponding to CHAR_BIT.
template<typename t>
struct sizeof_ex
{
    static const uint32 value = sizeof(t) * CHAR_BIT;
};

// factorial function
float64 fct(int32 i)
{
    float64 r = 1;
    do r *= i; while(--i > 1);
    return r;
}

int main()
{
    // maximum 2 to power that can be stored in uint32
    const uint32 power_2  = uint32(~0);
    // number of binary digits in power_2
    const uint32 digit_cnt = sizeof_ex<uint32>::value;
    // number of array elements that will store expanded value
    const uint32 comp_count = DBL_MAX_EXP / digit_cnt + uint32((DBL_MAX_EXP / digit_cnt) * digit_cnt < DBL_MAX_EXP);
    // array elements
    uint32 value[comp_count];

    // get factorial for 23
    float64 f = fct<float64>(23);
    // save sign for later correction
    bool sign = f < 0;
    // remove sign from float-point if exists
    if (sign) f *= -1;

    // get number of binary digits in f
    uint32 actual_digits = 0;
    frexp(f, (int32*)&actual_digits);

    // get start index in array for little-endian format
    uint32 start_index = (actual_digits / digit_cnt) + uint32((actual_digits / digit_cnt) * digit_cnt < actual_digits) - 1;

    // get all parts but the last
    while (start_index > 0)
    {
        // store current part
        // in this line the compiler fails
        value[start_index] = uint64(f / power_2);
        // exclude it from f
        f -= power_2 * float64(value[start_index]);
        // decrement index
        --start_index;
    }
    // get last part
    value[0] = uint32(f);
} 
```

上面的转换代码会从编译器到另一个编译器给出不同的结果，这意味着当阶乘函数的参数说 20 所有编译器都返回有效结果时，当值大于 20 时，一些编译器得到了其他编译​​器没有得到的部分结果，什么时候得到更大，例如`35`它变为零。

请告诉我为什么会发生这些错误？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:08:45.903

我认为您的转换逻辑没有任何意义。

您有一个名为“power_2”的值，它实际上不是 2 的幂，尽管评论它是。

您通过除以小于 32 位的数字来提取非常大（> 64 位）数字的位。显然，结果将 > 32 位，但您将其存储为 32 位值，并截断它。然后你将它乘以原始除数并从你的浮点数中减去。然而，随着数字被截断，您减去的值比原始值少得多，这几乎肯定不是您所期望的。

我认为还有更多错误 - 你并不总是想要前 32 位，对于一个不是 32 位长的倍数的数字，你想要实际长度 mod 32。

这是对您的代码的一些懒惰的修改，它可以完成我*认为*您正在尝试做的事情。请注意，`pow()`可以优化。

```
while (start_index > 0)
{
    float64 fpow = pow(2., 32\. * start_index);
    // store current part
    // in this line the compiler fails

    value[start_index] = f / fpow;
    // exclude it from f

    f -= fpow * float64(value[start_index]);
    // decrement index
    --start_index;
} 
```

这几乎没有经过测试，但希望能说明我的意思。

# function - MATLAB uicontrol 回调函数句柄输出

> ID：15140229
> 
> 赞同：0
> 
> 时间：2013-02-28T16:10:20.623
> 
> 标签：function, matlab, output

这是一个基本问题，但我很难解决。

基本上，我有一个回调函数分配给 GUI 上的弹出菜单中的选项。代码如下：

```
uicontrol(mainfigure, 'Style', 'popup',...
    'String', 'A|B|C',...
    'Position',[850 190 200 30],...
    'Callback', @blockset);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

function [block] = blockset(hObj,evnt) %#ok<INUSD>

blockval = get(hObj,'Value');

if blockval == 1
   block = 'A';
elseif blockval == 2
   block = 'B';
elseif blockval == 3
   block = 'C';
end

end 
```

如您所见，它只是为弹出菜单中的不同选项分配一个字符串值。我想稍后在脚本中将这些字符串用作另一个函数的输入值（它也嵌入在 uicontrol 回调中）：

```
uicontrol(mainscreen, 'Style', 'pushbutton',...
    'Position',[855 300 150 50],...
    'String', 'START',...
    'FontSize',10,'FontWeight','bold',...
    'BackgroundColor', [.9 .9 .9],...
    'CallBack', {@START_Callback, block}); 
```

原样的代码不起作用。但我不知道如何定义 uicontrol 回调的输出。我已经将“块”定义为块集函数的输出，那么如何让 START_Callback 将其识别为输入？每次我尝试时，它只会告诉我“块”是一个未定义的函数或变量。

我需要对“'Callback', @blockset”行代码做些什么来让它识别函数的输出吗？

编辑：一些粗略的互联网搜索表明我可能必须使用 setappdata/getappdata 之类的东西，或者其他解决方法。但是，我并不完全理解这些文档。在这种情况下如何使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:22:26.537

当您这样做时，变量块必须存在于工作区中

```
uicontrol(mainscreen, 'Style', 'pushbutton',...
    'Position',[855 300 150 50],...
    'String', 'START',...
    'FontSize',10,'FontWeight','bold',...
    'BackgroundColor', [.9 .9 .9],...
    'CallBack', {@START_Callback, block}); 
```

但这是您的弹出菜单回调的返回值，因此您不能这样做，因此您的 matlab 错误。

要使用 setappdata 和 getappdata，您需要将弹出菜单的回调函数的“块”变量存储一些图的 appdata 属性，该属性对两个回调函数都是可见的，或者如果您想偷懒，则存储到根图。例如

```
function [block] = blockset(hObj,evnt) %#ok<INUSD>
    blockval = get(hObj,'Value');

    if blockval == 1
       block = 'A';
    elseif blockval == 2
       block = 'B';
    elseif blockval == 3
       block = 'C';
    end

    setappdata(0, 'block', block);
end 
```

这会将块变量存储到根图（即 MATLAB 主窗口，用 0 表示），这确实不是一件好事，因为任何事情都可以改变它。相反，您应该尝试将其存储到一些对两个回调都可见的句柄图形对象，例如您的 GUI 图。但是，您的问题中没有足够的信息让我推断您可以使用什么，因此我使用根图进行说明。

如果你设置你的GUI对象的标签属性，你可以根据它来查找它们的句柄，例如 using`h = findobj('Tag','my_tag')`会给你带有标签'my_tag'的图形对象的句柄，然后你可以为 via 设置appdata `setappdata(h, 'var_name', var);`。我建议使用它而不是根图句柄，因为根图没有封装。

话虽如此，那么在您的`START_Callback`函数中，您不会将`block`其作为输入参数，而是用于获取您在回调函数`block = getappdata(0, 'block');`中设置的根图形的块变量。`blockset`所以你的按钮声明会变成

```
uicontrol(mainscreen, 'Style', 'pushbutton',...
    'Position',[855 300 150 50],...
    'String', 'START',...
    'FontSize',10,'FontWeight','bold',...
    'BackgroundColor', [.9 .9 .9],...
    'CallBack', @START_Callback); 
```

在 START_Callback 内部：

```
function START_Callback(hObj,evnt)
    block = getappdata(0, 'block');
    %... other stuff
end 
```

# sql - Oracle 对 DBA_ROLES 的选择权限

> ID：15140230
> 
> 赞同：2
> 
> 时间：2013-02-28T16:10:21.113
> 
> 标签：sql, oracle, privileges, database-administration

I am connected into Oracle 10g database with user "user", when i run a select on DBA_ROLES it displays the result without any problem, but when the select is inside a procedure it returns the error **ORA-00942: table or view does not exist**

用户是否缺少某些特权？为什么可以执行 SELECT 但不能将其包含在过程中？

```
SQL> SELECT COUNT(*) FROM DBA_ROLES;

  COUNT(*)
----------
        18

SQL> CREATE OR REPLACE PROCEDURE tst_role IS 
     v VARCHAR2(100);
BEGIN
        v := '';
        FOR rec IN (SELECT ROLE FROM DBA_ROLES) LOOP
                v := rec.role;
                DBMS_OUTPUT.put_line(v);
        END LOOP;
END;
/
Warning: Procedure created with compilation errors.

SQL> show errors
Errors for PROCEDURE TST_ROLE:

LINE/COL ERROR
-------- -----------------------------------------------------------------
5/13     PL/SQL: SQL Statement ignored
5/30     PL/SQL: ORA-00942: table or view does not exist
6/3      PL/SQL: Statement ignored
6/8      PLS-00364: loop index variable 'REC' use is invalid 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:15:33.030

在定义者的权限存储过程中，您无权访问通过角色授予的权限。这很可能意味着您使用的任何 Oracle 用户都已`DBA_ROLES`通过角色而不是通过直接授权获得访问权限。最有可能的是，您可以要求您的 DBA 授予您的帐户`SELECT ANY DICTIONARY`权限

```
GRANT SELECT ANY DICTIONARY
   TO your_oracle_user 
```

您可以通过禁用会话中的角色并验证您是否收到错误来验证问题是否确实是通过角色授予的。如果你

```
SQL> set role none;
SQL> SELECT COUNT(*) FROM DBA_ROLES; 
```

我敢打赌你会得到同样的 ORA-00942 错误。

# autohotkey - 循环内循环 - 检测自动热键中的循环结束

> ID：15140235
> 
> 赞同：0
> 
> 时间：2013-02-28T16:10:31.783
> 
> 标签：autohotkey, nested-loops

假设我有一堆文件名，其中包含水果的名称。我想根据一个充满参考文件的文件夹（包含水果名称、句号和甜点名称的虚拟 txt 文件）自动重命名它们。

apple.tart、grape.jelly、kiwi.cake、mango.icecream、banana.pudding、cherry.cobbler等

我想选择所有要重命名的文件，并将它们拖到我的脚本上。

1.  如果循环中的文件已经包含某个组合，例如“cherry.cobbler”，我只是希望丢弃虚拟文件，并且文件不应重命名为“cherry.cobbler.cobbler”

2.  如果循环中的文件包含单词“kiwi”，我希望将其更改为包含“kiwi.cake”。

3.  如果循环中的文件包含未列出的水果，我希望添加一个包罗万象的字符串。所以“kumquat”会变成“kumquat.nodessert”

给我带来麻烦的是条件#3。我似乎无法提出正确的语法来指定检查最后一个虚拟文件的时间。

这是一些伪代码

```
Loop %0%
{
   Path := %A_Index%
    Loop %Path%, 1
    LongPath = %A_LoopFileLongPath%    
    SplitPath LongPath, OutFileName, OutDir, OutExtension, OutNameNoExt, OutDrive

    Loop thru folder of fruit combos
         {
         Stringsplit filenames from fruit-combos folder into %fruit% and %dessert%

         If OutNameNoExt contains %fruit%.%dessert%
             {
             FileDelete fruit.combo dummyfile
             continue; skip to next file to rename
             )

         If OutNameNoExt contains %fruit%
             {
             FileDelete fruit.combo dummyfile
             StringReplace %fruit% with %fruit%.%dessert%
             continue; skip to next file to rename
             )

         If OutNameNoExt not contains fruit.combo AND all dummy files have been checked
             {
             StringReplace %fruit% with %fruit%.nodessert
             )
         }
    ; proceed with next selected file
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:13:10.823

将条件 3 放在内部循环之外，它似乎可以工作

# javascript - 在选中和未选中复选框上启用和禁用文本输入

> ID：15140237
> 
> 赞同：6
> 
> 时间：2013-02-28T16:10:36.510
> 
> 标签：javascript

我有复选框和文本输入

我需要的是在我选中复选框时启用文本输入，并在我取消选中复选框时禁用文本输入

我正在使用以下代码，但它在未选中时执行反向启用/在选中时禁用，因此如何根据我的需要进行调整。

```
<input type="checkbox" id="yourBox">
<input type="text" id="yourText">
<script>
document.getElementById('yourBox').onchange = function() {
document.getElementById('yourText').enabled = this.checked;
};
</script> 
```

任何帮助〜谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-28T16:11:35.540

您只需要`!`在`this.checked`.

这是一个显示更改的示例：

```
document.getElementById('yourBox').onchange = function() {
    document.getElementById('yourText').disabled = !this.checked;
};
```

```
<input type="text" id="yourText" disabled />
<input type="checkbox" id="yourBox" />
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T16:17:14.870

一个 jQuery 解决方案可能是这样的：

```
<script>
$('#yourBox').change(function() {
    $('yourText').attr('disabled',!this.checked)
});
</script> 
```

这与 Minko 的答案相同，但我觉得它更优雅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-02T19:17:54.697

尝试一下。如果您使用标签，则将 onmousedown 添加到它

```
<form >
  <input type="text" id="yourText" disabled />
<input type="checkbox" id="yourBox" onmousedown="this.form.yourText.disabled=this.checked"/>
 </form>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T16:16:52.513

更好的解决方案可能是：

```
var checkbox = document.querySelector("#yourBox");
var input = document.querySelector("#yourText");

var toogleInput = function(e){
  input.disabled = !e.target.checked;
};

toogleInput({target: checkbox});
checkbox.addEventListener("change", toogleInput);
```

```
<input type="checkbox" id="yourBox">
<input type="text" id="yourText">
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-09T08:34:06.150

```
function createInput( chck ) {
    if( jQuery(chck).is(':checked') ) {
        jQuery('<input>', {
            type:"text",
            "name":"meta_enter[]",
            "class":"meta_enter"
        }).appendTo('p.checkable_options');
    }
    else {
        jQuery("input.meta_enter").attr('disabled','disabled');
    }        
}
createInput( chck );
```

```
<input type="radio" name="checkable" class="checkable" value="3" />
<input type="radio" name="checkable" class="checkable" value="4" onclick="createInput(this)" />
```

# javascript - 主干：获取和范围

> ID：15140242
> 
> 赞同：1
> 
> 时间：2013-02-28T16:10:51.833
> 
> 标签：javascript, jquery, backbone.js

想我一直盯着这个很久，但是，当它完成提取时，我试图将一个对象带到提取成功方法的范围之外。

```
cars.fetch().complete(function(){
    newSuggested = cars.models.filter(function (model) { 
       return _.contains(model.attributes.suggestedTo, storedVin)  
    });
})
console.log(newSuggested) //undefined 
```

成功获取后如何获取范围`newSuggested`之外的内容？`fetch`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:23:34.727

除非你`newSuggested`在代码的上面某处声明了，否则它是窗口上的一个全局变量（这不是问题，只是指出来）。

它在您记录它的位置未定义的原因是因为当该`console.log`语句运行时，提取尚未完成。

无论你要做什么`newSuggested`，你都需要在`complete`回调函数中完成。

```
// declare the variable using var, so it is not global
var newSuggested;
cars.fetch().complete(function(){
    newSuggested = cars.models.filter(function (model) { 
       return _.contains(model.attributes.suggestedTo, storedVin)  
    });
    console.log(newSuggested); // works!
    // do something with newSuggested here, hard to tell what you are trying to do.
    probablyUpdateViewInSomeWay(newSuggested);
});
// fetch not complete here!
// this is not a scope problem, but an async problem.
// complete callback has not been called yet.
console.log(newSuggested) //undefined, this is expected 
```

旁注：`complete`在 jQuery 1.8 中已弃用，因此您应该`done`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:30:37.323

您的脚本是正确的，您甚至可以显式使用`window.newSuggested`来使变量成为全局变量（尽管默认是这样的）。您必须`console.log`在执行流程中将“完成”之后的调用顺序移动

```
cars.fetch().complete(function(){
    window.newSuggested = cars.models.filter(function (model) { 
       return _.contains(model.attributes.suggestedTo, storedVin)  
    });
    global_log();
})

function global_log(){console.log(newSuggested);}; 
```

# iphone - 单元格中不可见的 UITextField 已将 userInteractionEnabled 设置为 No

> ID：15140243
> 
> 赞同：0
> 
> 时间：2013-02-28T16:10:58.983
> 
> 标签：iphone, ios, objective-c, ipad, cocoa

我试图跳过当用户浏览我的表格视图时被禁用的文本字段。但是，当它们到达可见单元格的边界时，一切都会变得异常，因为我正在尝试检测文本字段是否被禁用，如果是，则再次递归调用我的方法以再次导航。IE。如果用户按下按钮向右导航，并且该文本字段被禁用，则再次递归调用右按下。

似乎，可见范围之外的单元格中的任何文本字段都被禁用。一旦用户到达桌子的边缘，我就会进入无限循环，或者事情就会中断。

这是我的代码部分，我在其中进行启用检查，如果没有进行递归调用。这真的不应该那么复杂。从逻辑上讲，我想要做的就是检测我们刚刚移动到的文本字段是否被禁用，如果是这样，只需再次启动相同的按钮按下。没有什么花哨。

*通过一些游戏测试进行编辑*，尽管destinationIndexPath 和newTag 值是正确的，但nextTextFieldSelection 显然返回为null。请求不可见的 indexPath 是否可能导致返回 null？

```
 //logic to move to next text field and manually scroll the tableViewbased on button input is here

    nextTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:destinationIndexPath] viewWithTag:newTag];
    if (nextTextFieldSelection.userInteractionEnabled == NO) {
        switch (arrowButton.tag) {
            case NumericKeyboardViewLeftArrow:
                currentTextField = nextTextFieldSelection;
                [self numericKeyboardView:(VS_NumericKeyboardView *)numericKeyboardView DidSelectArrowButton:(UIButton *)arrowButton];
                return;
            case NumericKeyboardViewRightArrow:
                currentTextField = nextTextFieldSelection;
                [self numericKeyboardView:(VS_NumericKeyboardView *)numericKeyboardView DidSelectArrowButton:(UIButton *)arrowButton];
                return;
            default:
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:39:50.463

对于不可见的单元格，cellForRowAtIndexPath 返回 nil。这可能就是你进入那个无限循环的原因。

请参阅：http: [//developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW16](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW16)

# watin - 在 WatiN 中使用 Find.BySelector 和 :visible 过滤器会引发错误

> ID：15140244
> 
> 赞同：0
> 
> 时间：2013-02-28T16:11:00.213
> 
> 标签：watin

我正在使用 WatiN 2.1 驱动 Internet Explorer 进行自动化集成测试。对于我的一个测试，我想在单击创建菜单的按钮后在动态创建的弹出菜单中选择一个项目。菜单本身是一个 jQuery 插件，可以创建具有特定类的无序列表。

我正在使用 WatiN 2.0 的新 Find.BySelector 方法通过这个特定的类进行搜索，效果很好。但是，在创建多个菜单的测试中，我很难选择当时可见的菜单。为此，我想我会使用 :visible 过滤器将我的结果限制为只有那些可见的菜单（一次只能看到一个）。但是，当我使用以下代码时：

```
WebBrowser.Current.ElementOfType<List>(Find.BySelector("li.fg-menu:visible")); 
```

我收到 WatiN.Core.Exceptions.RunScriptException 抛出的消息：“System.Runtime.InteropServices.COMException：HRESULT 的异常：0x80020101” 在搜索这个特定的 HRESULT 时，人们建议以管理员身份运行 Visual Studio，但这确实不解决问题。如果没有 :visible 过滤器，它可以正常工作。当我直接在浏览器的控制台窗口中执行该选择器（使用 jQuery）时，它会返回我想要的。

为了解决这个问题，我可以使用 WatiN 的内置功能来执行我自己的 JavaScript 以返回一个元素，但我想知道是否有其他人成功地将 :visible 与 Find.BySelector 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:39:18.937

现在，我已经使用了[这个解决方案](http://spin.atomicobject.com/2010/11/11/fast-er-css-selector-based-element-lookups-in-watin-via-jquery/)。它使用页面上已有的“真实”jQuery 副本在 JavaScript 中执行选择器。我对其进行了一些修改，以根据它是否已被插入来动态插入辅助 JavaScript。它也是通用的，因此您可以指定要返回的元素类型。以下是浏览器对象的所有相关扩展方法：

```
 public static bool IsJavascriptEvaluateTrue(this Browser browser, string javascript)
    {
        var evalResult = browser.Eval("if (" + javascript + ") {true;} else {false;}");
        return evalResult == "true";
    }

    public static TElementType FindViaJQuery<TElementType>(this Browser browser, string cssSelector) where TElementType : Element
    {
        if (!browser.IsJavascriptEvaluateTrue("typeof('WatinSearchHelper') == 'function'"))
        {
            var js = "WatinSearchHelper = function () { " +
                     "    var earTagId = 1; " +
                     "    var getElementId = function (cssSelector) { " +
                     "        var resultId = \"_no_element_\"; " +
                     "        var el = $(cssSelector); " +
                     "        if (el.length > 0) { " +
                     "            var firstEl = el[0]; " +
                     "            if (firstEl.id == \"\") { " +
                     "                firstEl.id = \"_watin_search_\" + earTagId++; " +
                     "            } " +
                     "            resultId = firstEl.id; " +
                     "        } " +
                     "        return resultId; " +
                     "    }; " +
                     "    return { getElementId: getElementId }; " +
                     "} (); ";

            browser.Eval(js);
        }

        var elementId = browser.Eval(string.Format("WatinSearchHelper.getElementId(\"{0}\")", cssSelector));

        if (elementId == "_no_element_")
        {
            throw new ArgumentException("Unable to find element on page with selector '" + cssSelector + "'", "cssSelector");
        }
        return browser.ElementOfType<TElementType>(Find.ById(elementId));
    } 
```

# java - 如何在将翻转的 Windows 中读取日志文件？

> ID：15140245
> 
> 赞同：3
> 
> 时间：2013-02-28T16:11:06.647
> 
> 标签：java, logging, nio

在 Linux 中，当您打开文件的输入流时，另一个进程可以重命名该文件。因此，当文件翻转时，您仍然可以从流中读取。在 Windows 中，当您打开输入流时，在关闭输入流之前无法重命名该文件。如何在不影响“重命名”过程的情况下读取文件？

我尝试过使用 java.nio.FileChannel。它适用于不同进程同时读取和写入文件（例如Java进程读取和记事本写入），但不适用于重命名文件（例如Java进程读取但重命名命令不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:31:48.033

最简单的解决方案如下（我只是从我的一条评论中复制）

在您阅读完新添加的行后，关闭阅读器，这样尝试进行旋转的其他进程将成功。但是进行日志轮换的进程必须尝试多次，直到它发现没有其他进程正在读取它。

[apache commons IO Tailer](http://commons.apache.org/proper/commons-io//apidocs/org/apache/commons/io/input/Tailer.html)可以做到这一点。

# asp.net - 使用按钮在 VB.net 中增加变量

> ID：15140249
> 
> 赞同：0
> 
> 时间：2013-02-28T16:11:17.113
> 
> 标签：asp.net, sql, vb.net

我试图在单击按钮时增加我的变量。它只增加一次。它似乎在重新加载页面时迷路了。

我正在使用以下代码：

```
Dim ItemSelect As New ArrayList()
Dim Quantities As New ArrayList()
Dim itemQtyOrdered As Integer

Public Sub ShtickDataList_ItemCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.ListViewCommandEventArgs) Handles ShtickDataList.ItemCommand

    If e.CommandName = "ViewCart" Then
        Response.Redirect("~/ShoppingCart.aspx")
    End If

    If e.CommandName = "addToCart" Then
        Dim itemQuantity As DropDownList = e.Item.FindControl("QuantityDropDown")
        itemQtyOrdered = itemQuantity.SelectedValue
        ItemSelect.Add(e.CommandArgument)
        Quantities.Add(itemQtyOrdered)

        Session("itemInCart") = ItemSelect
        Session("quantities") = Quantities

        viewInvoice()
    End If

End Sub

Protected Sub viewInvoice()

    Dim itemSelected As ArrayList = DirectCast(Session("itemInCart"), ArrayList)
    Dim QuantityofItem As ArrayList = DirectCast(Session("quantities"), ArrayList)
    Dim conn As SqlConnection
    Dim comm As SqlCommand
    Dim reader As SqlDataReader
    Dim purimConnection2 As String = ConfigurationManager.ConnectionStrings("Purim").ConnectionString
    conn = New SqlConnection(purimConnection2)

    comm = New SqlCommand("SELECT ProductName FROM Products WHERE ProductID = @ProductID", conn)

    Dim i As Integer
    For i = 0 To ItemSelect.Count - 1
        comm.Parameters.Add("@ProductID", Data.SqlDbType.Int)
        comm.Parameters("@ProductID").Value = ItemSelect(i)
    Next

    Try
        conn.Open()
        reader = comm.ExecuteReader()
        ViewCartlink.Text = "View Cart: (" & ItemSelect.Count & ")"
    Finally
        conn.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:34:46.257

Ah, you may be referring to `ItemSelect` and `Quantities` lists. You need to look for them in `Session` and only create them if they are not in the `Session`. I am rusty on VB.NET, so this is C# version. In `Page_Load`:

```
ItemSelect = (ArrayList)Session["itemInCart"];
if (ItemSelect == null)
{
  ItemSelect = new ArrayList();
  Session["itemInCart"] = ItemSelect;
} 
```

and the same for `Quantities`.

Also, your loop in `viewInvoice` method is wrong. For more than one item in `ItemSelect` list you are adding multiple parameters with the same name. You probably only wanted to do it once with

```
comm.Parameters("@ProductID").Value = ItemSelect(ItemSelect.Count - 1) 
```

# junit - 运行 jUnit 跑步者列表

> ID：15140253
> 
> 赞同：0
> 
> 时间：2013-02-28T16:11:32.890
> 
> 标签：junit, junit-runner

我有一些本质上看起来像的测试套件

```
@Test
public void test1_2() {
    test(1,2);
}
@Test
public void test1_3() {
    test(1,3);
}
@Test
public void test4_5() {
    test(4,5);
}
@Test
public void test4_9() {
    test(4,9);
}

// and so forth

private void test(int i, int j) throws AssertionError{
    // ...
} 
```

（这不是实际测试，而是本质，每个`@Test`方法只调用一个方法）

所以我的想法是我可以使用一个接受[jUnit Runner](http://junit.sourceforge.net/javadoc/org/junit/runner/Runner.html)的`@RunWith`自定义[BlockJUnit4ClassRunner](http://junit.sourceforge.net/javadoc/org/junit/runners/BlockJUnit4ClassRunner.html)。`List`

这将如何实现？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:05:05.523

这在我看来就像是应该用[Theories](https://blogs.oracle.com/jacobc/entry/junit_theories)做的事情。否则，您可以使用[Enclosed](http://ghostganz.wordpress.com/2007/09/14/junit-hidden-feature-enclosed/)来拥有多个内部类，每个内部类都有自己的运行器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:22:31.027

为什么不使用 @Parameter ？

```
@RunWith(Parameterized.class)
public class YourTest{

 private int i;
 private int j;

 public Parameter(int i, int j) {
    this.i= i;
    this.j= j;
 }

 @Parameters
 public static Collection<Object[]> data() {
      Object[][] data = new Object[][] { { 1, 2 }, { 1,3 }, { 4,5 }, { 4,9 } };
      return Arrays.asList(data);
 }

 @Test
 public void test() throws InterruptedException {
    //use i & j
 } 
} 
```

# ruby - 如何配置 RubyMine 5 以通过 SSH 编辑远程文件

> ID：15140272
> 
> 赞同：7
> 
> 时间：2013-02-28T16:12:16.007
> 
> 标签：ruby, ssh, virtualbox, remote-debugging, rubymine

我有一个简单的问题，但我似乎无法在网上找到任何确凿的答案。因此，我在安装了 Ruby 和 Rails 的 VirtualBox 中运行了 Ubuntu 服务器。

我想要做的是在 Windows 主机上使用 RubyMine 5.0 通过 SSH 编辑 VM 中的文件（就像我在 Eclipse 中一样）。

问题是我找不到如何做到这一点。我很确定它可以做到，因为我在网上找到了一些相关的文章，但没有一篇告诉我如何配置 RubyMine 来做到这一点。

我已经搜索了菜单中的每个选项，但我自己无法弄清楚，所以“切中要害”的解释真的很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-12T16:14:04.483

在 RubyMine 中本机无法做到这一点。我的解决方案是使用 sshfs 将远程文件系统挂载到本地文件夹。

*   Linux 你可以通过你的包管理器获取 sshfs。

*   OSX 你可以在[这里](http://osxfuse.github.io/)得到它确保安装 OSX fuse 和 SSHFS。HomeBrew上的版本在OSX [10.9.4](http://brew.sh/)上不适用于我，因此我建议使用链接中的软件包。

*   windows可以使用win-sshfs，我用[Chocolaty](https://chocolatey.org/)安装[win-sshfs效果不错](https://chocolatey.org/packages/win-sshfs)

在 Linux/OSX 上使用：

*   打开你的终端。
*   `mkdir MountFolder`
*   `sshfs user@server.com:/path/to/project MountFolder/`

在 Windows 上使用：

*   使用图形用户界面。

安装远程文件系统后，打开 RubyMine 并选择 Open Directory 并浏览到项目。

在 JetBrains 原生支持之前，这是我能想到的最佳解决方案。

# c++ - LoadLibrary 失败并出现错误 203：系统找不到输入的环境选项

> ID：15140274
> 
> 赞同：2
> 
> 时间：2013-02-28T16:12:22.447
> 
> 标签：c++, windows, interop

我创建了 ac# 类库。我想在我的 win32 控制台应用程序中加载这个 .dll，因为我已经将一个函数从 c# 类库导出到非托管代码，而且我现在不知道有任何其他方法可以调用该函数。但是 LoadLibraryA 给了我这个错误，这意味着什么？谷歌搜索根本没有帮助我。

使用它来将功能导出到非托管： [https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports#TOC-C-](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports#TOC-C-)：

**编辑：**这是代码，抱歉我一开始没有包含它，因为它是准系统：

```
using System;
using RGiesecke.DllExport;
using System.Runtime.InteropServices;

namespace ManagedLibrary
{
    public class Test
    {
        [DllExport(CallingConvention = CallingConvention.Cdecl)]
        public static void test()
        {
            Console.WriteLine("HI");
        }
    }
} 
```

![在此处输入图像描述](../Images/d62f0d1e90271f6ea541b925fc4b021e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:34:14.850

看起来非托管导出 nuget 工具对我不起作用，.dll 加载错误看起来大多晦涩难懂且不相关（尽管我现在确实切换到了我的家用计算机）在我按照此处所述手动添加导出 IL 语句之后:[如何在 CIL DLL 中导出方法以便本地程序可以调用它？](https://stackoverflow.com/questions/8957970/how-do-you-export-a-method-in-a-cil-dll-so-that-a-native-program-can-call-it)我能够很好地调用 C# 代码。

# rest - Heroku Neo4j 插件是否支持流式 REST api？

> ID：15140275
> 
> 赞同：0
> 
> 时间：2013-02-28T16:12:29.223
> 
> 标签：rest, heroku, streaming, neo4j

有谁知道[Heroku Neo4j 插件](https://addons.heroku.com/neo4j)是否支持[流式 REST api](http://docs.neo4j.org/chunked/snapshot/rest-api-streaming.html)？

根据[本文](http://jexp.de/blog/2012/04/on-streaming-cypher/)，启用流式 API 需要将流式密码扩展 jar 添加到 Neo4j 服务器。Heroku Neo4j 插件服务器有吗？

（我在 Heroku Neo4j 插件文档中找不到任何地方是否支持流）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:23:03.720

Heroku REST API 使用相同的代码，所以我认为它是受支持的。

# actionscript-3 - AS3 使用属性字符串遍历对象

> ID：15140277
> 
> 赞同：0
> 
> 时间：2013-02-28T16:12:31.330
> 
> 标签：actionscript-3

在 AS3 中是否可以遍历具有给定属性字符串的对象？

*   **数据["x"]** (= data.x) -> 有效
*   **数据["xyz"]** (= data.xyz) -> 不起作用

有没有办法将**data["xyz"]**转换为**data[x][y][z]**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:43:56.593

那这个呢？

```
var keys = "x.y.z".split(".");
var access_property = function(object, keys) {
    for each (var key in keys) {
        object = object[key];
    }
    return object;
}

var prop = access_prop(data, "x.y.z"); 
```

我没有对此进行测试，并且没有错误处理，例如，如果没有给定名称的键。

# html - 鼠标悬停 HTML 时获取前面的图像

> ID：15140278
> 
> 赞同：0
> 
> 时间：2013-02-28T16:12:35.153
> 
> 标签：html, css

我在 div 中有很多图像按钮，当我将鼠标悬停在图像上时，它会更改 scr 并显示相同的图像，但用边框突出显示。就像这里显示之前/之后：

![在此处输入图像描述](../Images/08f058cf4cb53f7e48e13469bdd11430.png)

它工作正常，但是当我将所有其他图像放在一起时，它会显示如下：

![在此处输入图像描述](../Images/aa3346db4a174a830b5478783ecee698.png)

我想我需要在鼠标悬停在前面时设置图像；知道吗？

更新：代码：

```
 <div id="mymap" width="720" style="width: 920px; height: 1227px; position: relative; left: 250px; transform: scale(.5,.5); -ms-transform: scale(.5,.5); -webkit-transform: scale(.5,.5); -o-transform: scale(.5,.5); -moz-transform: scale(.5,.5);">
        <img id="Burimi" style="position: absolute; left: 10px" src="Images/Reagion/Burimi-B.png" onmouseover="this.src='Images/reagion/Burimi-A.png'" onmouseout="this.src='Images/reagion/Burimi-B.png'" />
        <img id="N Batinah" style="position: absolute; left: 98px; top: 1px;" src="Images/Reagion/N Batinah-B.png" onmouseover="this.src='Images/reagion/N Batinah-A.png'" onmouseout="this.src='Images/reagion/N Batinah-B.png'" /></dive> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:15:05.297

使用简单的 CSS，您应该能够更改`z-index`属性。假设元素位于`absolute`或`relative`，只需使用

```
#mymap img:hover { z-index: 9999; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:14:30.100

```
#image:hover{
  position: relative;
  z-index: 2;
  background-image: url('image2.png');
} 
```

假设 #image 是您的图像容器，并且`image2.png`是您的悬停状态图像（而您在容器上为地图上的所有元素使用背景，而不仅仅是普通`img`标签）。

尽管检测到正确元素上的悬停会非常狡猾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:15:32.670

当鼠标悬停时，使用选择器 ":hover" 来改变你的 CSS

# c# - 是否可以使用 ILMerge 内部化 Castle Project 的 DynamicProxy 类？

> ID：15140280
> 
> 赞同：2
> 
> 时间：2013-02-28T16:12:39.690
> 
> 标签：c#, .net, castle-dynamicproxy, ilmerge

我有一个 .NET 库，它在内部依赖于 Castle.Core.dll，因为我使用[Castle 的](http://www.castleproject.org/projects/dynamicproxy/)DynamicProxy （特别是“没有目标的接口代理”）来拦截用于自定义处理的方法调用。因为我的程序集是强命名的，所以我想使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)将我的所有依赖项组合到一个程序集中进行部署，将我的依赖项的类型内部化，以免不必要地将它们暴露给我的消费者。这对于[NuGet](http://nuget.org/)案例尤其重要，如果我的程序集是强命名的，我必须将我的包依赖项设置为*特定的*依赖的版本，或者程序集名称解析中断，因为 Castle.Core.dll 也是强命名的。请注意，将我的项目作为强名称程序集发布是我的用户重视的功能，因此删除强名称不是一种选择。

显然，DynamicProxy 要求它的一些类是公开的才能正常工作。没问题，我可以将某些类型排除在 ILMerge 内部化之外。但是，当我有一个用户引用我的库但也引用 Castle.Core.dll 时，我的问题就会出现。公共类型现在由两个程序集提供，并且对它们的引用不明确。

如果我不使用 ILMerge 将 Castle.Core.dll 内部化，将它与我自己的程序集一起发送，这可能会导致我的版本与我的用户版本之间存在版本冲突。如果我使用 ILMerge 来内化程序集，我将被迫排除内化 DynamicProxy 正常工作所需的类型。由于类型不明确，这种方法将破坏任何同时引用我的程序集和 Castle.Core.dll 的项目。

我是否被迫采取这两种次优的行动方案之一？还是有一些我还没有想到的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T01:02:36.517

当您有两个同名的完全限定类型时，您将遇到歧义问题。这可以使用[extern alias](http://msdn.microsoft.com/en-us/library/ms173212.aspx)解决。

默认情况下，所有引用的程序集都属于全局别名，这就是为什么在生成的代码中您会看到类似`global::System.String`. 我不能确定如何在 ILMerge 中使用外部别名，但您可以使用它来消除引用程序集的歧义。无论哪种方式，您都可以将您的“*内部*”Castle.Core.dll 指定为类似于“*城堡*”的别名，并从中删除全局别名。不利的一面是，您必须修改代码才能利用这一点`castle::Castle.Core.Interceptor.IInterceptor`。

这是一个很好的资源，可以向您展示更多信息，包括图片：[http ://www.davidarno.org/c-howtos/aliases-overcoming-name-conflicts-part-2-extern-alias/](http://www.davidarno.org/c-howtos/aliases-overcoming-name-conflicts-part-2-extern-alias/)

* * *

请记住，辅助引用的 Castle.Core.dll（其他人使用您的程序集）可能包含相同的完全限定类型，但从所有角度来看，它们仍然是两个截然不同的类，也就是说，一个期望类型为通过从第二个程序`castle::Castle.Core.Interceptor.IInterceptor`集中传入类型将不起作用。`Castle.Core.Interceptor.IInterceptor`

# jquery - 选中复选框时如何查看下一个元素

> ID：15140283
> 
> 赞同：1
> 
> 时间：2013-02-28T16:12:43.027
> 
> 标签：jquery, asp.net

我有 CheckBox 和 textbox 我试图删除 CssClass 在用户选中我尝试使用下一个尝试使用的框后隐藏但它不起作用有人可以帮助我吗

HTML

```
 <ul id="sortable">
<asp:Repeater runat="server" ID="rep_sortable">
    <ItemTemplate>

   <li class="ui-state-default">
       <span class="ui-icon ui-icon-arrowthick-2-n-s"></span><%# DataBinder.Eval(Container.DataItem, "Body") %>  
       <asp:CheckBox ID="chb_com"  runat="server" AutoPostBack="false" Checked='<%# DataBinder.Eval(Container.DataItem, "Completed")  %>' oncheckedchanged="CheckBox1_CheckedChanged"/>
       <asp:HiddenField ID="hf_reminderID" runat="server" Value='<%# DataBinder.Eval(Container.DataItem, "ReminderID")  %>'/>
       <asp:TextBox runat="server" ID="txtb_whyclosed" CssClass="hidden"></asp:TextBox>
   </li>
    </ItemTemplate>
</asp:Repeater>
</ul> 
```

jQuery

```
$("input[type=checkbox]").on("click", function () {
    console.log("vbvsdvs");
    $("input[type=checkbox]").next("input:text").removeClass("hidden"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:33:43.747

I would go with something like this.

```
$('input[type=checkbox]').change(function() {
    var txtBox = $(this).nextAll('input:text');
    if ($(this).is(':checked')) {
        txtBox.removeClass('hidden');
    } else {
        txtBox.addClass('hidden');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:15:03.900

试试下面的代码：

```
$("input[type='checkbox']").on("click", function () {
    $("#txtb_whyclosed").removeClass("hidden");
}) 
```

或者

```
$("input[type='checkbox']").click(function () {
    $("#txtb_whyclosed").removeClass("hidden");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:16:24.370

jQuery [next](http://api.jquery.com/next/)函数只选择下一个元素。它没有找到与选择器匹配的下一个元素。（选择器只是一个过滤器）

要使您的代码正常工作，请将复选框直接移动到文本框旁边，以便接下来会找到它：

```
<li class="ui-state-default">
   <span class="ui-icon ui-icon-arrowthick-2-n-s"></span><%# DataBinder.Eval(Container.DataItem, "Body") %>         
   <asp:HiddenField ID="hf_reminderID" runat="server" Value='<%# DataBinder.Eval(Container.DataItem, "ReminderID")  %>'/>
   <asp:CheckBox ID="chb_com"  runat="server" AutoPostBack="false" Checked='<%# DataBinder.Eval(Container.DataItem, "Completed")  %>' oncheckedchanged="CheckBox1_CheckedChanged"/>
   <asp:TextBox runat="server" ID="txtb_whyclosed" CssClass="hidden"></asp:TextBox>
</li> 
```

或者使用[nextAll](http://api.jquery.com/nextAll/)它将搜索当前元素之后的所有兄弟元素：

```
$("input[type=checkbox]").on("click", function () {
    console.log("vbvsdvs");
    $(this).nextAll("input:text").removeClass("hidden"); 
```

请注意，您还应该`$(this)`在点击回调中使用，否则您将影响复选框后的每个文本框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:20:21.620

您在这里使用了中继器，因此您应该为您的复选框和文本框指定一个类名，以识别和区分其他输入：

HTML：

```
 <li class="ui-state-default">
       <span class="ui-icon ui-icon-arrowthick-2-n-s"></span><%# DataBinder.Eval(Container.DataItem, "Body") %>  
       <asp:CheckBox CssClass="checkbox" ID="chb_com"  runat="server" AutoPostBack="false" Checked='<%# DataBinder.Eval(Container.DataItem, "Completed")  %>' oncheckedchanged="CheckBox1_CheckedChanged"/>
       <asp:HiddenField ID="hf_reminderID" runat="server" Value='<%# DataBinder.Eval(Container.DataItem, "ReminderID")  %>'/>
       <asp:TextBox runat="server" ID="txtb_whyclosed" CssClass="hidden text"></asp:TextBox>
   </li>
    </ItemTemplate>
</asp:Repeater> 
```

JS：

```
$("input.checkbox").on("click", function () {
    if($(this).is(":checked"))
         $(this).next(".text").removeClass("hidden");
    else
         $(this).next(".text").addClass("hidden");
}) 
```

# wpf - 使用图像作为折线描边轮廓

> ID：15140288
> 
> 赞同：0
> 
> 时间：2013-02-28T16:12:51.860
> 
> 标签：wpf, image, polyline, stroke, visualbrush

我有一个类似绘画的应用程序，当我移动鼠标时，它会逐条绘制一条线。现在我想用图案图像替换折线轮廓，所以当我在画布中移动鼠标时，它会将该图像重复为折线的轮廓。我已经写了这段代码：

```
<Canvas x:Name="canvas" Background="#00FFFFFF" MouseMove="Canvas_MouseMove">
    <Polyline x:Name="polyline" StrokeThickness="20">
        <Polyline.Stroke>
            <VisualBrush >
                <VisualBrush.Visual>
                    <Image Source="1.png"></Image>
                </VisualBrush.Visual>
            </VisualBrush>
        </Polyline.Stroke>
    </Polyline>
</Canvas> 
```

唯一的问题是它使用图像作为整个画布的不可见背景，当我移动鼠标时，部分背景变得可见！看这张照片就明白我的意思了：

[http://goo.gl/2wPKN](http://goo.gl/2wPKN)

如果您想看看，这也是我的图像模式：

[http://goo.gl/staHt](http://goo.gl/staHt)

那么你知道我应该如何使用这个图像作为我的折线轮廓吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:19:27.813

您可以将 a[`ImageBrush`](http://msdn.microsoft.com/en-us/library/system.windows.media.imagebrush.aspx)与[`TileMode`](http://msdn.microsoft.com/en-us/library/system.windows.media.tilebrush.tilemode.aspx)set to`Tile`和 a一起使用[`Viewport`](http://msdn.microsoft.com/en-us/library/system.windows.media.tilebrush.viewport.aspx)，以指定所需的图像平铺大小。

```
<Polyline x:Name="polyline" StrokeThickness="20">
    <Polyline.Stroke>
        <ImageBrush ImageSource="1.png" TileMode="Tile"
                    ViewportUnits="Absolute" Viewport="0,0,20,20"/>
    </Polyline.Stroke>
</Polyline> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:26:59.267

我没有用折线试过它，但你可以用一条路径来设置它的笔触。

```
<Path StrokeThickness="10" Data="M 10,10 100,10" Stretch="Fill" Margin="81,36,251,100">
   <Path.Stroke>
        <ImageBrush ImageSource="1.png" Viewport="0,0,1,1" TileMode="Tile"/>
   </Path.Stroke>
</Path> 
```

# adfs2.0 - 浏览器不重定向到 idp - ADFS

> ID：15140289
> 
> 赞同：0
> 
> 时间：2013-02-28T16:12:53.403
> 
> 标签：adfs2.0

这是我的场景：

1) Web 应用程序 - adfs01.domainA.local/app/default.aspx - DomainA - （在 ADFS01 上设置为依赖方）

2) ADFS01 - adfs01.domainA.local - DomainA - （设置为 ADFS02 上的依赖方）

3) ADFS02 - adfs02.domainB.local - DomainB - （在 ADFS01 上设置为声明提供者）

[我按照 TechNet 文章 ( http://technet.microsoft.com/en-us/library/adfs2-federation-wif-application-step-by-step-guide(v=ws](http://technet.microsoft.com/en-us/library/adfs2-federation-wif-application-step-by-step-guide(v=ws.10).aspx) ) 中描述的说明开发了第 1 步和第 2 步[.10).aspx](http://technet.microsoft.com/en-us/library/adfs2-federation-wif-application-step-by-step-guide(v=ws.10).aspx) ) 之后我决定添加一个新的 ADFS 服务器 (ADFS02) 作为身份提供程序并使用 ADFS01 信任它然后我尝试使用登录到 DomainB 工作站的 DomainB 用户（例如 domainB\user）连接到 Web 应用程序.

通过这种方式，Web 应用程序将浏览器重定向到 ADFS01，并询问我的用户名和密码（在我的情况下是表单）。

为什么 ADFS01 询问我凭据，而不是将浏览器重定向到 ADFS02 以检索令牌并在 DomainA 上发布的 Web 应用程序上对我进行身份验证？取决于应用程序或 ADFS01 配置？

请帮我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:15:06.313

清除所有 cookie。然后您将看到 Home Realm Discovery 屏幕，该屏幕将询问您要针对哪个 ADFS 进行身份验证。

# extjs4 - EXTJS 更改 GridPanel 行选择的默认行为

> ID：15140290
> 
> 赞同：2
> 
> 时间：2013-02-28T16:13:05.407
> 
> 标签：extjs4, extjs4.1, gridpanel

我有一个基于 EXT4 的 gridPanel。当我选择特定行时，突出显示的行基于给定特定行的“id”。如何将默认实现更改为要使用的东西，例如“rowId”而不是“id”这是在哪里完成的？如何进行更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T01:32:56.610

这是默认为“id”`idProperty`的配置选项。`Ext.data.Model`您可以在模型中将其更改为“rowid”。如果您直接在商店中指定字段，则必须定义数据模型才能使用此选项。

参考：

[http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.Model-cfg-idProperty](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.Model-cfg-idProperty) [http://docs.sencha.com/extjs/4.2.2/#!/api /Ext.data.Store-cfg-fields](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.Store-cfg-fields)

# c++ - 使用 Qt 静态链接的应用程序出现错误：无法加载平台插件“windows”

> ID：15140293
> 
> 赞同：10
> 
> 时间：2013-02-28T16:13:14.733
> 
> 标签：c++, visual-studio-2010, windows-7-x64, qt5

我在 Windows 7 x64 下的 VS 2010 中静态构建了 Qt 5.0.1。配置参数是

```
configure -debug-and-release -opensource -confirm-license -platform win32-msvc2010 -nomake examples -nomake tests -no-webkit -static 
```

我使用 jom 使用以下参数执行了构建：

```
jom -j 4 
```

构建过程成功，我可以找到所有库并将我的应用程序与 Qt 静态链接。现在的问题是，当我尝试运行应用程序时，它给了我一个错误

```
Module: 5.0.1
File: kernel\qguiapplication.cpp
Line: 781
"Failed to load platform plugin "windows". Available platforms are:" 
```

但在此错误下方，它不会显示任何平台。我在动态链接 Qt 时遇到了同样的错误。我通过将依赖 DLL（qt5core.dll、qt5gui.dll 等）放在我的 exe 的同一目录中来摆脱它。但这次我想不出办法。

在 Qt 的静态构建之后，plugins/platforms/ 文件夹中的 DLL 消失了，它们被 libs 所取代。我也尝试与 qwindows.lib 静态链接，但无济于事。

任何想法？问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-03T14:20:44.677

要检查在 Windows 上部署应用程序所需的 DLL，请使用依赖项 Walker ( [http://www.dependencywalker.com/](http://www.dependencywalker.com/) )。

根据文档页面[Qt for Windows - Deployment](http://doc.qt.io/qt-5/windows-deployment.html)一些 DLL 需要在 Windows 平台上部署 Qt 应用程序：

*   qwindows.dll
*   icudtXX.dll
*   icuinXX.dll
*   icuucXX.dll
*   libGLESv2.dll
*   libEGL.dll

根据您用于编译应用程序的编译器，可能需要一些其他库：

*   MSVC 特定库：
    *   msvcrXX.dll
    *   msvcpXX.dll
*   MinGW 特定库
    *   libgcc_s_dw2-1.DLL
    *   libstdc++-6.dll

注意：在所有这些文件中，将 XX 替换为系统上当前版本的 DLL。

如果您没有静态构建 Qt（默认），您还需要 Qt5 DLL，具体取决于您在应用程序中使用的 Qt 模块。例子：

*   Qt5Core.dll
*   Qt5Test.dll
*   Qt5Network.dll
*   等等

所有这些 DLL 都可以在 Qt 安装目录下的“bin”文件夹中找到。

### 编辑

最近，Qt 开发人员创建了一个名为 windeployqt.exe 的工具，它可以帮助您收集部署应用程序所需的所有库：

```
Usage: windeployqt [options] [file]
Qt Deploy Tool 5.3.0

The simplest way to use windeployqt is to add the bin directory of your Qt
installation (e.g. <QT_DIR\bin>) to the PATH variable and then run:
  windeployqt <path-to-app-binary>
If ICU, ANGLE, etc. are not in the bin directory, they need to be in the PATH
variable. If your application uses Qt Quick, run:
  windeployqt --qmldir <path-to-app-qml-files> <path-to-app-binary>

Options:
  -?, -h, --help            Displays this help.
  -v, --version             Displays version information.
  --dir <directory>         Use directory instead of binary directory.
  --libdir <path>           Copy libraries to path.
  --debug                   Assume debug binaries.
  --release                 Assume release binaries.
  --force                   Force updating files.
  --dry-run                 Simulation mode. Behave normally, but do not
                            copy/update any files.
  --no-plugins              Skip plugin deployment.
  --no-libraries            Skip library deployment.
  --qmldir <directory>      Scan for QML-imports starting from directory.
  --no-quick-import         Skip deployment of Qt Quick imports.
  --no-translations         Skip deployment of translations.
  --no-system-d3d-compiler  Skip deployment of the system D3D compiler.
  --compiler-runtime        Deploy compiler runtime (Desktop only).
  --no-compiler-runtime     Do not deploy compiler runtime (Desktop only).
  --webkit2                 Deployment of WebKit2 (web process).
  --no-webkit2              Skip deployment of WebKit2.
  --json                    Print to stdout in JSON format.
  --list <option>           Print only the names of the files copied.
                            Available options:
                             source:   absolute path of the source files
                             target:   absolute path of the target files
                             relative: paths of the target files, relative
                                       to the target directory
                             mapping:  outputs the source and the relative
                                       target, suitable for use within an
                                       Appx mapping file
  --verbose <level>         Verbose level.

Qt libraries can be added by passing their name (-xml) or removed by passing
the name prepended by --no- (--no-xml). Available libraries:
bluetooth clucene concurrent core declarative designercomponents designer gui
clucene qthelp multimedia multimediawidgets multimediaquick network nfc opengl
positioning printsupport qml quick quickparticles script scripttools sensors
serialport sql svg test widgets winextras xml xmlpatterns

Arguments:
  [file]                    Binary or directory containing the binary. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-06T10:32:23.460

我刚刚遇到了同样的问题，所以这是我的解决方案：

首先当然是使用 -static 参数构建 QT。

将以下库添加到您的构建中：

```
Qt5PlatformSupport.lib
qwindows.lib
imm32.lib 
```

将以下路径添加到您的库路径：

```
$(QTDIR)\plugins\platforms 
```

在您的代码（最好是 main.cpp）中添加以下行：

```
Q_IMPORT_PLUGIN(QWindowsIntegrationPlugin) 
```

生成的构建不应依赖于任何与 qt 相关的 dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:27:26.617

如果您使用的是 libGLESv2.dll，那么您也必须包含 libEGL.dll。请参阅 [从 Visual Studio qwindows.dll 错误部署 Qt C++ 应用程序](https://stackoverflow.com/questions/18368826/deploying-qt-c-application-from-visual-studio-qwindows-dll-error/18883860#18883860)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T15:10:51.217

这是一个[Qt 平台插件](http://qt-project.org/wiki/Qt-Platform-Abstraction)问题。在 MacOS 上使用[qt.conf](http://qt-project.org/doc/qt-5.0/qtdoc/qt-conf.html)为我解决了这个问题。是否静态链接 Qt 并不重要。

我试图静态链接到 libqcocoa.a（或 qwindows.lib）但没有成功。如果我成功了，我会告诉你的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-21T14:31:32.110

只需执行以下步骤：

1.  转到*Qt*安装目录中的*bin*文件夹
**   复制所有扩展名为*.dll的文件**   将它们粘贴到*C:\Windows\System32*（32 位）或*C:\Windows\syswow64*（64 位）。*   多田！你永远不会再看到那个恼人的信息*

# jquery - jQuery：包含特定字符串崩溃浏览器

> ID：15140296
> 
> 赞同：2
> 
> 时间：2013-02-28T16:13:22.387
> 
> 标签：jquery

对于这个问题，我使用 jQuery 来检查列表框“To”是否包含与列表框“From”匹配的字符串。

但是使用 1 个字符串，我会完全冻结（在 IE8 或 Chrome 上相同）。Developper Tools 有同样的问题（冻结并且没有错误信息）。在执行代码之前没有 javascript 错误。

这里的代码

```
$('#LstProposeTo option:contains('+ 'Verifier periodiquement annuellement les installations electriques par un personnel qualifie (entreprise ou organisme de contro' +')')[0] 
```

我正在尝试几个测试，括号似乎与崩溃有关。但这是有效的：

```
$('#LstProposeTo option:contains('+ 'Vérifier périodiquement, annuellement les installations électriques par un personnel qualifié entreprise ou organisme de contrô' +')')[0]    
$('#LstProposeTo option:contains('+ '((((((((((Vérifier (((périodiquement(((, (((annuellement ((((les ((((installations (((((électriques ((((par (((((un personnel ((((((qualifié (((((entreprise ou organisme de contrô' +')')[0]
$('#LstProposeTo option:contains('+ '(Vérifier périodiquement, annuellement les installations électriques par un personnel qualifié entreprise ou organisme de contrô' +')')[0]
$('#LstProposeTo option:contains('+ 'Plan de Continuité d'Activité (PCA)' +')')[0] 
```

那么这个字符串 'Vérifier périodiquement, annuellement les installations électriques par un person qualifié (entreprise ou Organe de contrô' 有什么问题？

谢谢你的帮助。

编辑：代码更复杂（引号中的文本来自变量，但只有这会在任何浏览器上崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:13:16.360

自 jQuery 1.3.2 以来似乎一直是一个错误

[http://bugs.jquery.com/ticket/5607](http://bugs.jquery.com/ticket/5607) “ **:contains() 选择器不支持括号**”

此错误已作为其他错误的副本提交，似乎最终在 jQuery 1.8 中得到修复

[http://bugs.jquery.com/ticket/3778](http://bugs.jquery.com/ticket/3778)

希望这会有所帮助

# css - CSS 下拉菜单混淆时的 z-index 和 box-shadow

> ID：15140297
> 
> 赞同：2
> 
> 时间：2013-02-28T16:13:22.637
> 
> 标签：css, z-index

[http://jsfiddle.net/XwrZ6/](http://jsfiddle.net/XwrZ6/)

这显示了一个下拉菜单 ( `ul.sub-menu`)，其中框阴影应隐藏在主菜单栏条 ( `#main`) 后面。我不明白为什么子菜单中的框阴影出现在主导航栏上方 - 两个元素都已定位并设置了 z-index。

（为此，下拉菜单被永久显示，显然在直播时它只在父`li`级悬停时显示）。

谢谢。

HTML：

```
<nav id="main">
<div class="mw">
    <div class="menu-main-menu-container">
        <ul>
            <li><a href="#">Item 1</a></li>
            <li><a href="#">Item 2</a></li>
            <li><a href="#">Item 3</a></li>
            <li><a href="#">Item 4</a>
                <ul class="sub-menu">
                    <li><a href="#">Sub 1</a></li>
                    <li><a href="#">Sub 2</a></li>
                    <li><a href="#">Sub 3</a></li>
                    <li><a href="#">Sub 4</a></li>
                </ul>
            </li>
       </ul>
    </div>                  
</div>
</nav> 
```

CSS：

```
/* main nav */
nav#main {
    height: 40px;
    background: #fff;
    -webkit-box-shadow:  0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    box-shadow:  0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    z-index: 2;
    position: relative;
}
nav#main ul li {
    float: left;
    position: relative;
    display: block;
    height: 28px;
    padding: 12px 20px 0;
    font-size: 0.8em;
    background: url( img/nav-pipe.gif ) no-repeat right bottom;
}
nav#main li:first-child {
    padding-left: 0px;
}
nav#main a {
    color: #6c6c6c;
    font-weight: bold;
}
nav#main a:hover,
nav#main li.active-menu-item a {
    color: #efa933;
}
/* dropdowns */
nav#main li:hover ul.sub-menu {
    display: block;
}
nav#main ul.sub-menu {
    position: absolute;
    left: 0px;
    top: 40px;
    background: #fff;
    padding: 10px 10px 0;
    -webkit-border-radius: 0px 0px 5px 5px;
    border-radius: 0px 0px 5px 5px;
    -webkit-box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    z-index: 1;
}
nav#main ul.sub-menu li {
    float: none;
    background: none;
    width: 140px;
    padding: 0px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:24:32.157

将子菜单的 z-index 设置为 -1，然后为根 UL 设置 z-index：

[http://jsfiddle.net/XwrZ6/2/](http://jsfiddle.net/XwrZ6/2/)

```
<nav id="main">
    <div class="mw">
        <div class="menu-main-menu-container">
            <ul id="root-menu">
                <li><a href="#">Item 1</a></li>
                <li><a href="#">Item 2</a></li>
                <li><a href="#">Item 3</a></li>
                <li><a href="#">Item 4</a>
                    <ul class="sub-menu">
                        <li><a href="#">Sub 1</a></li>
                        <li><a href="#">Sub 2</a></li>
                        <li><a href="#">Sub 3</a></li>
                        <li><a href="#">Sub 4</a></li>
                    </ul>
                </li>
           </ul>
        </div>                  
    </div>
</nav>

nav#main {
    height: 40px;
    background: #fff;
    -webkit-box-shadow:  0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    box-shadow:  0px 0px 10px 0px rgba(0, 0, 0, 0.2);   
    position: relative;
}
#root-menu {
    z-index: 999;
}

nav#main ul.sub-menu {
    position: absolute;
    left: 0px;
    top: 40px;
    background: #fff;
    padding: 10px 10px 0;
    -webkit-border-radius: 0px 0px 5px 5px;
    border-radius: 0px 0px 5px 5px;
    -webkit-box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
    z-index: -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:59:22.997

这不适用于每个解决方案。

为了您的兴趣，我的解决方法是添加一个 :before 元素。像：

```
.menu > li > .sub-menu:before {
  box-shadow:3px 3px 5px rgba(0,0,0,0.5);
  content:' ';
  display:block;
  height:100;
  left:100%;
  margin-left:-5px;
  position:absolute;
  width:5px;
  z-index:0;
} 
```

hth

# gmail - 无法再从 Openfire 用户向 GMAIL 帐户发送聊天邀请

> ID：15140298
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:13:24.183
> 
> 标签：gmail, xmpp, openfire

我有一个 Openfire 服务器，其中有一些自定义用户充当机器人并向 GMAIL 帐户发送聊天邀请。

经过 6 个月的完美工作后，突然，从昨天开始，我的用户从今天开始就无法再向 GMAIL 发送聊天邀请了。他们只是不再收到邀请。我没有改变任何东西，也没有安装新的 Openfire 版本。刚发生。

如果我以相反的方式进行操作，从 Gmail 帐户邀请 Openfire 用户，它仍然无法正常工作，但我检查了服务器并且订阅发送为“无”。我必须将订阅类型更改为“两者”，然后它才能工作。但我需要它来自我的 Openfire 到 Gmail 帐户。

如果 GMAIL 帐户是正确配置 DNS 的 Google 托管域，则一切正常。此外，任何其他 XMPP 服务器（如 JABBER）也可以正常工作。

Gmail方面似乎突然发生了一些变化。我很安静，我不知道要检查什么，要改变什么才能让它再次工作。我的实时聊天服务依赖于此，我不得不停止接受新用户......

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:15:20.753

这是对这个问题的可能解释[http://mail.jabber.org/pipermail/operators/2013-March/001610.html](http://mail.jabber.org/pipermail/operators/2013-March/001610.html)。

```
GoogleTalk now has whitelist of servers to connect with to avoid invite spam. 
```

# php - 尝试安装的 PHPUnit 错误

> ID：15140300
> 
> 赞同：0
> 
> 时间：2013-02-28T16:13:31.330
> 
> 标签：php, phpunit, pear, pecl

有谁知道为什么当我尝试将 PHPUnit 安装到我的 mac osx 10.8.2 上时出现此错误？

```
Unknown remote channel: pear.symfony.com
Did not download optional dependencies: phpunit/PHP_Invoker, use --alldeps to download automatically
phpunit/PHPUnit requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
phpunit/PHPUnit requires package "channel://pear.symfony.com/Yaml" (version >= 2.1.0, version <= 2.1.99)
phpunit/PHPUnit can optionally use package "phpunit/PHP_Invoker" (version >= 1.1.0, version <= 1.1.99)
No valid packages found
install failed 
```

我已经正确安装了梨，如下所示：

```
PEAR Version: 1.9.2
PHP Version: 5.3.6
Zend Engine Version: 2.3.0
Running on: Darwin Macintosh-2.local 12.2.0 Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 
```

还研究了使 symfony 可用，它说一切正常：

```
Macintosh-2:~ mdunbavan$ pear channel-discover pear.symfony-project.com
Channel "pear.symfony-project.com" is already initialized
Macintosh-2:~ mdunbavan$ 
```

有人知道吗？

干杯，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:33:15.537

请比较错误：

```
Unknown remote channel: pear.symfony.com 
```

...与您的修复：

```
pear channel-discover pear.symfony-project.com 
```

URL 不匹配。

# xml - 动作脚本 3 XML 日期格式

> ID：15140301
> 
> 赞同：0
> 
> 时间：2013-02-28T16:13:43.577
> 
> 标签：xml, actionscript-3, flash

我正在使用 Flash CS3 创建基于 XML 的屏幕保护程序，一切正常。但是，在 XML 输出文件上，日期输出格式保持未格式化 ( `YYYY-MM-DD T00:00:00+00:00`)。`DD/MM/YYYY`理想情况下，将输出英国日期 ( ) 格式。

下面是驱动 XML 文件的 ActionScript 代码示例

```
// Load up variables with XML element data

var item_data:Array = new Array();
item_data[0] = xml_item.id;
item_data[1] = xml_item.Product_Name;
item_data[2] = xml_item.Product_Language;
item_data[3] = xml_item.dateCreated;
item_data[4] = xml_item.antDeadlineDate;
item_data[5] = xml_item.comments;
item_data[6] = xml_item.webPdf;
item_data[7] = xml_item.conCheck;

// Set output variable

output = "<b>Job ID</b>:" + item_data[0] + "\n";
output += "<b>Product Name</b>: " + item_data[1] + "\n";
output += "<b>Language</b>: " + item_data[2] + "\n";
output += "<b>Date Created</b>: " + item_data[3] + "\n";
output += "<b>Anticipated Deadline</b>: " + item_data[4] + "\n";
output += "<b>Comments</b>: " + item_data[5] + "\n";
output += "<b>PDFs created</b>: " + item_data[6] + "\n";
output += "<b>Controller Check</b>: " + item_data[7] + "\n\n\n\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:10:21.777

你也可以使用正则表达式

```
var xmlDateTime:RegExp = /([0-9]{4})-(0[0-9]|1[012])-([012][0-9]|3[01])T([01][0-9]|2[0-3])(:[0-5][0-9]){2}(.[0-9]{3}){0,1}(\+|-)([01][0-9]|2[0-3]):[0-5][0-9]/g;
var dateString = xml_item.dateCreated.toString().replace(xmlDateTime, "$3/$2/$1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:47:07.677

要将 YYYY-MM-DD T00:00:00+00:00 格式的日期字符串转换为 DD/MM/YYYY 格式，您可以执行以下操作：

```
var dateOld:String = '1999-01-05 T00:00:00+00:00';
var dateParts:Array = dateOld.substring(0, 10).split('-');
var dateNew:String = dateParts[2] + '/' + dateParts[1] + '/' + dateParts[0]; 
```

# macos - 使用 JavaMail 从 gmail 问题中读取

> ID：15140302
> 
> 赞同：0
> 
> 时间：2013-02-28T16:13:46.523
> 
> 标签：macos, jakarta-mail, pop3

我在使用 javamail 从 gmail (pop3) 读取邮件时遇到问题。如果邮件是从 ubuntu 的 Thnderbird 发送的，我有一个代码可以完美运行。但是，如果邮件最初是从 mac 发送的，它会失败。

这是我使用的代码：

```
 private static final String UNKNOWN_BRAND_PATH = "UNKNOWN";
public static final String FOLDER_NAME = "INBOX";

private static Logger LOG = org.slf4j.LoggerFactory.getLogger(LzMailRecieverService.class);

@Value("${lz.mail.address}")
private String lzMailUserName;

@Value("${lz.mail.password}")
private String lzMailPassword;

@Value("${lz.mail.tmp.folder}")
private String lzMailTmpFolder;

public Store connect() throws Exception {

    String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

    Properties pop3Props = new Properties();

    pop3Props.setProperty("mail.pop3.socketFactory.class", SSL_FACTORY);
    pop3Props.setProperty("mail.pop3.socketFactory.fallback", "false");
    pop3Props.setProperty("mail.pop3.port", "995");
    pop3Props.setProperty("mail.pop3.socketFactory.port", "995");

    URLName url = new URLName("pop3", "pop.gmail.com", 995, "", lzMailUserName, lzMailPassword);

    Session session = Session.getInstance(pop3Props, null);
    Store store = new POP3SSLStore(session, url);
    store.connect();
    return store;
}

public Folder openFolder(Store store) throws MessagingException {
    Folder folder = store.getDefaultFolder();
    folder = folder.getFolder(FOLDER_NAME);
    folder.open(Folder.READ_ONLY);
    return folder;
}

public List<MailDetails> readAttachement(Folder folder) throws IOException, MessagingException {
    Message[] messages = folder.getMessages();
    List<MailDetails> mailDetails = new ArrayList<MailDetails>();
    for (Message message : messages) {
        logMailDetails(message);
        if (message.getContent() instanceof Multipart) {
            Multipart multipart = (Multipart) message.getContent();
            for (int i = 0; i < multipart.getCount(); i++) {
                BodyPart bodyPart = multipart.getBodyPart(i);
                if (!Part.ATTACHMENT.equalsIgnoreCase(bodyPart.getDisposition())) {

                    continue; // dealing with attachments only
                }
                InputStream is = bodyPart.getInputStream();
                String uid = getUid(message);
                String to = getTo(message);
                String from = getFrom(message);
                File d = new File(lzMailTmpFolder + File.separator + uid);
                if (d.exists() == false) {
                    d.mkdir();
                }
                File f = new File(d, new DateTime().getMillis() + "-" + bodyPart.getFileName());
                FileOutputStream fos = new FileOutputStream(f);
                IOUtils.copy(is, fos);
                MailDetails md = new MailDetails(to, from, f, uid);
                mailDetails.add(md);
            }
        }
        else {
            LOG.warn("Message conteant is not Multipart " + message.getContentType() + " skipping ...");
        }
    }
    return mailDetails;
}

private String getFrom(Message message) throws MessagingException {
    Address[] froms = message.getFrom();
    return froms[0].toString();
}

private String getTo(Message message) throws MessagingException {
    Address[] tos = message.getAllRecipients();
    return tos[0].toString();
}

public void logMailDetails(Message m) throws MessagingException {
    Address[] f = m.getFrom();
    if (f != null) {
        for (int j = 0; j < f.length; j++)
            LOG.debug("FROM: " + f[j].toString());
    }

    Address[] r = m.getRecipients(Message.RecipientType.TO);
    if (r != null) {
        for (int j = 0; j < r.length; j++) {
            LOG.debug("TO: " + r[j].toString());
        }
    }
    LOG.debug("SUBJECT: " + m.getSubject());
    Date d = m.getSentDate();
    LOG.debug("SendDate: " + d);
}

private String getUid(Message m) throws MessagingException {
    try {
        Address[] tos = m.getAllRecipients();
        String to = tos[0].toString();
        to = to.split("@")[0];
        String[] parts = to.split("\\+");
        return parts[parts.length - 1];
    }
    catch (Exception e) {
        LOG.error("Failes to extract brand hash from email address " + Lists.newArrayList(m.getFrom()));
        return UNKNOWN_BRAND_PATH;
    }
} 
```

问题是最初在 mac bodyPart.getDisposition() 中创建的邮件总是返回 null。无论我尝试了什么，我都无法理解哪个部分是附件部分（这是我真正需要的：从邮件中提取附件）。

我浏览了整个网络以找到原因，但我未能找到答案。我是怎么发现 Juergen Hoeller 写的下面的注释表明这里可能存在问题（更多细节在这里：[http ://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework /mail/javamail/MimeMessageHelper.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mail/javamail/MimeMessageHelper.html) )

关于多部分邮件的警告：仅包含 HTML 文本但没有内联元素或附件的简单 MIME 消息将或多或少适用于任何能够呈现 HTML 的电子邮件客户端。然而，内联元素和附件仍然是电子邮件客户端之间的一个主要兼容性问题：几乎不可能让内联元素和附件在 Microsoft Outlook、Lotus Notes 和 Mac Mail 上工作。考虑为您的需要选择特定的多部分模式： MULTIPART_MODE 常量上的 javadoc 包含更详细的信息。

如果邮件是从 Mac 发送的，是否有关于使用 JavaMail 的示例或说明？

约西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:21:18.880

“性情”充其量只是一个暗示；它不需要包括在内。

这些 JavaMail FAQ 条目可能会有所帮助：

*   [如何判断邮件是否有附件？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#hasattach)
*   [如何在包含附件的邮件中找到主要邮件正文？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)
*   [人们在使用 JavaMail 时最常犯的一些错误是什么？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)

# jquery - jQuery启用/禁用按钮取决于输入字段是否为空

> ID：15140303
> 
> 赞同：4
> 
> 时间：2013-02-28T16:13:47.307
> 
> 标签：jquery

HTML

* * *

```
<input type="text" id="customerProfileID" maxlength="9"/>

<input id="attachTest" class="attachTemplateButton" type="button" value="Attach Template" onclick="attachTemplateCall();"/> 
```

jQuery

* * *

```
$("input").focusin(function() {

        $(this).keydown(function() {
            $("#attachTest").attr("disabled", true);
        });     
    }); 
```

我在 jsfiddle 中也有这段代码，[如果](http://jsfiddle.net/jeewanaryal/B7xAm/) 输入字段为空，我试图让按钮返回启用状态。这意味着，如果输入为空，则应启用该按钮，如果输入具有某些值，则应禁用该按钮。该代码仅在有值时才有效，按钮被禁用，但是当我删除输入的值时，按钮仍处于禁用状态。我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:16:51.783

```
$("input").on('keyup', function() {
     $("#attachTest").prop("disabled", this.value.length);
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/B7xAm/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T16:17:27.680

```
$("#customerProfileID").on('keyup blur', function(){
    $('#attachTest').prop('disabled', this.value.trim().length);
}); 
```

# c# - 如何异步发送邮件？

> ID：15140308
> 
> 赞同：0
> 
> 时间：2013-02-28T16:13:54.997
> 
> 标签：c#, asp.net, .net, sendmail, smtpclient

```
namespace Binarios.admin
{
    public class SendEmailGeral
    {
        public SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
        public MailMessage msg = new MailMessage();

        public void Enviar(string sendFrom, string sendTo, string subject, string body)
        {    
            string pass = "12345";
            System.Net.NetworkCredential smtpCreds = new System.Net.NetworkCredential(sendFrom, pass);

            //setup SMTP Host Here
            client.UseDefaultCredentials = false;
            client.Credentials = smtpCreds;
            client.EnableSsl = true;

            MailAddress to = new MailAddress(sendTo);
            MailAddress from = new MailAddress(sendFrom);

            msg.IsBodyHtml = true;
            msg.Subject = subject;
            msg.Body = body;
            msg.From = from;
            msg.To.Add(to);

            client.Send(msg);
        }
    }
} 
```

我有这段代码，但我想改进它，以便我可以异步发送邮件。您能否提出任何想法来改进这段代码或其他方式来做到这一点。我尝试了 Visual Studio 建议但无法使用的异步属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T16:24:56.523

`SmtpClient`允许您异步发送，并在发送完成时使用事件通知您。这使用起来可能很笨拙，因此您可以创建一个扩展方法来返回 a `Task`：

```
public static Task SendAsync(this SmtpClient client, MailMessage message)
{
    TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();
    Guid sendGuid = Guid.NewGuid();

    SendCompletedEventHandler handler = null;
    handler = (o, ea) =>
    {
        if (ea.UserState is Guid && ((Guid)ea.UserState) == sendGuid)
        {
            client.SendCompleted -= handler;
            if (ea.Cancelled)
            {
                tcs.SetCanceled();
            }
            else if (ea.Error != null)
            {
                tcs.SetException(ea.Error);
            }
            else
            {
                tcs.SetResult(null);
            }
        }
    };

    client.SendCompleted += handler;
    client.SendAsync(message, sendGuid);
    return tcs.Task;
} 
```

要获得发送任务的结果，您可以使用`ContinueWith`：

```
Task sendTask = client.SendAsync(message);
sendTask.ContinueWith(task => {
    if(task.IsFaulted) {
        Exception ex = task.InnerExceptions.First();
        //handle error
    }
    else if(task.IsCanceled) {
        //handle cancellation
    }
    else {
        //task completed successfully
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:19:47.303

疯狂的猜测，但[SendAsync](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)可能会完成这项工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:20:26.183

更改您的代码：

```
 client.Send(msg); 
```

至：

```
client.SendAsync(msg); 
```

更多细节

[链接1](http://www.blackwasp.co.uk/SendSmtpAsync.aspx)

[链接2](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-send-email-asynchronously-with-aspnet)

# c# - 不一致的线程

> ID：15140311
> 
> 赞同：1
> 
> 时间：2013-02-28T16:13:56.480
> 
> 标签：c#

我有下面的代码产生不一致的输出。

```
string text = "t1";
new Thread ( () => Console.WriteLine (text) ).Start();

//Thread.Sleep(1);

text = "t2";
new Thread ( () => Console.WriteLine (text) ).Start(); 
```

有时它会产生 t1 和 t2，有时它会产生双倍的 t2。我现在在想的，是这样的。当它的输出为 double t2 时，第一个线程捕获的变量值为 t2，因为它是在最后一个变量赋值之后开始的。我对吗？

注意：我在慢速机器上运行此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:16:56.227

你是对的; 在维基百科上查看[比赛条件](https://en.wikipedia.org/wiki/Race_condition#Software)。

根据定义，线程不会同步执行，因此您不应期望代码的顺序明确地决定程序的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:39:23.873

是的，正如每个人都提到的那样，您有比赛条件。

在您的情况下，它暴露了大多数人起初不期望的闭包行为：闭包捕获变量，而不是它的值。这个问题可以很容易地在单线程案例中显示：

```
string text = "t1";
Action a1 =  () => Console.WriteLine (text);
a1(); // prints "t1"
text = "t2";
Action a2  = () => Console.WriteLine (text) ;

a1(); // prints "t2" 
a2(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:15:48.287

是的，这是一个简单的多线程问题。

当第一个线程甚至没有启动时，您更改文本变量的值。然后第一个线程以新值开始，你有一个双 't2'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T16:18:01.647

“有时它会产生双倍的 t2”

text 的值在第一个之前已更改为“t2”

```
new Thread ( () => Console.WriteLine (text) ).Start(); 
```

已执行

如果您想要一致性，请更改为：

```
string text = "t1";
new Thread ( () => Console.WriteLine (text) ).Start();

//Thread.Sleep(1);

string text2 = "t2";
new Thread ( () => Console.WriteLine (text2) ).Start(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T16:18:23.677

因此，最简单的方法是对变量使用锁

这可以防止一个线程在另一个线程使用该变量时访问该变量

# sql-server-2008 - 使用 SYSDATE() 获取上个月的范围

> ID：15140313
> 
> 赞同：0
> 
> 时间：2013-02-28T16:14:03.123
> 
> 标签：sql-server-2008, sysdatetime

我正在尝试使用`sysdate()`提取上个月的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:55:19.297

```
DECLARE @firstOfLastMonth DATE;
SET @firstOfLastMonth = DATEADD(MONTH, DATEDIFF(MONTH, 0, SYSDATETIME())-1, 0);

SELECT ... FROM ...
WHERE dateColumn >= @firstOfLastMonth
AND dateColumn < DATEADD(MONTH, 1, @firstOfLastMonth); 
```

这就是您不想使用`BETWEEN`此功能的原因：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:18:38.713

你的意思是当前服务器时间减去一个月？尝试[DATEADD 功能](http://msdn.microsoft.com/en-us/library/ms186819.aspx)：

```
dateadd(month, -1, sysdatetime()) 
```

如果要选择列值在过去一个月内的记录，可以执行以下操作：

```
SELECT foo
FROM bar
WHERE baz BETWEEN dateadd(month, -1, sysdatetime()) AND sysdatetime() 
```

# c++ - 模板类的模板友元问题

> ID：15140315
> 
> 赞同：4
> 
> 时间：2013-02-28T16:14:07.587
> 
> 标签：c++, templates, c++11, namespaces, friend

我遇到了在我看来 C++ 编译器的不一致。在以下示例代码中

```
#include <vector>
namespace test {
  class A : std::vector<int>
  {
    template<typename F>
    friend void bar(A const&a, F f) { for(auto i:a) f(i); }
    template<int K, typename F>
    friend void foo(A const&a, F f) { for(auto i:a) if(i&K) f(i); }
  };
}
int sum(test::A const&a)
{
  int s=0;
  foo<2>(a,[&s](int i) { s+=i; } );    // <-- error here
  bar   (a,[&s](int i) { s+=i; } );    // <-- but not here
  return s;
} 
```

gcc（4.7.0，使用 std=c++11）抱怨“`foo`未在此范围内声明”（并建议`test::foo`作为替代方案），但愉快地编译了`bar`下一行中的用法。现在两者`foo`都通过它们的声明`bar`注入到命名空间中，因此它们都不应该真正存在于全局命名空间中。`test``friend`

**Q1**我是不是弄错了，或者这是 c++11 的新版本，还是 gcc 行为不端？

当然，如果我只是将 using 指令注入到全局命名空间中，就可以避免这个问题。但是，如果我制作`A`模板，

```
#include <vector>
namespace test {
  template<typename T>
  class A : std::vector<T>
  {
    template<typename F>
    friend void bar(A const&a, F f) { for(auto i:a) f(i); }
    template<int K, typename F>
    friend void foo(A const&a, F f) { for(auto i:a) if(i&K) f(i); }
  };
}
using test::foo;          // does not avoid compilation error
using test::bar;          // does not avoid compilation error
int sum(test::A<int> const&a)
{
  int s=0;
  foo<2>(a,[&s](int i) { s+=i; } );
  bar   (a,[&s](int i) { s+=i; } );
  return s;
} 
```

gcc 再次抱怨。要么（没有`using`指令）“`foo`未在此范围内声明”（但再次愉快地编译`bar`，但不建议`test::foo`）或（使用`using`指令）“`test::foo`尚未声明”（与 相同`test::bar`）在点`using`指示。

**Q2**这在我看来像是一个编译器错误，因为无论有无`using`指令，我都不能调用`test::foo`. 或者也许我错过了一些关于 C++ 的东西？

最后，我尝试将朋友定义移到班级之外，如

```
namespace test {
  template<typename T>
  class A : std::vector<int>
  {
    template<int K, typename F>
    friend void foo(A const&a, F f);
    template<typename F>
    friend void bar(A const&a, F f) { for(auto i:a) f(i); }
  };

  template<int K, typename T, typename F>
  void foo(A<T> const&a, F f) { for(auto i:a) if(i&K) f(i); }

}
using test::foo; 
```

当 gcc 再次抱怨时，这一次声称`void test::foo(const test::A<T>&, F)`已使用但从未定义......所以**Q3**有什么问题？

欢迎回答任何子问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:37:28.537

**Q1：**

> 我弄错了吗，或者这是c ++ 11的新变化，还是gcc行为不端？

不，这是正常行为。来自 C++11 标准的第 14.8.1/8 段：

> 对于简单的函数名称，即使函数名称在调用范围内不可见，参数相关查找 (3.4.2) 也适用。这是因为调用仍然具有函数调用 (3.4.1) 的语法形式。**但是，当使用带有显式模板参数的函数模板时，调用没有正确的语法形式，除非在调用点有一个具有该名称的函数模板可见**。如果没有这样的名称可见，则该调用在语法上不是格式正确的，并且不适用依赖于参数的查找。如果某些此类名称可见，则应用依赖于参数的查找，并且可以在其他名称空间中找到其他函数模板。[ 例子：

```
namespace A {
    struct B { };
    template<int X> void f(B);
}
namespace C {
    template<class T> void f(T t);
}
void g(A::B b) {
    f<3>(b); // ill-formed: not a function call
    A::f<3>(b); // well-formed
    C::f<3>(b); // ill-formed; argument dependent lookup
    // applies only to unqualified names
    using C::f;
    f<3>(b); // well-formed because C::f is visible; then
    // A::f is found by argument dependent lookup
} 
```

> —结束示例]

* * *

**Q2：**

> 在我看来，这就像一个编译器错误，因为无论是否使用 using 指令，我都不能调用 test::foo。或者也许我错过了一些关于 C++ 的东西？

如果您的类成为您从不实例化的类*模板*，那么编译器将永远不会执行实例化时会发生的第二阶段名称查找`A<>`，因此它永远不会发现其中`friend`声明了两个函数。

例如，如果您在声明*之前*引入了模板的显式实例化`using`，您应该会看到事情发生了变化：

```
template class test::A<int>; 
```

或者，您可以更改 的定义`A`，使其仅*声明*而不定义两个`friend`函数模板，并为这些函数模板提供类外定义。我猜这就是你实际尝试做的事情。但...

**问题 3：**

> gcc 再次抱怨，这一次声称 void test::foo(const test::A&, F) 被使用但从未定义......那么有什么问题？

问题是您没有将稍后定义的同一个函数声明为朋友：请注意，您定义的函数需要一个额外的参数 ( `T`)。修正你的声明，你会看到程序编译：

```
namespace test 
{
    template<typename T>
    class A : std::vector<int>
    {
        template<int K, typename C, typename F>
        //              ^^^^^^^^^^  (can't use T here, it would shadow
        //                           the class's template parameter)
        friend void foo(A<C> const&a, F f);
    };

    template<int K, typename C, typename F>
    void foo(A<C> const&a, F f) 
    { for(auto i:a) if(i&K) f(i); }
}

using test::foo; // Just don't remove this, or we will be back in Q1 ;-) 
```

* * *

**结论：**

因此，经过所有必要的修改后，您的程序将如下所示：

```
#include <vector>

namespace test
{
    template<typename T>
    class A : std::vector<T>
    {
        template<typename F, typename C>
        friend void bar(A<C> const&a, F f);

        template<int K, typename F, typename C>
        friend void foo(A<C> const&a, F f);
    };

    template<typename F, typename C>
    void bar(A<C> const&a, F f) { for(auto i:a) f(i); }

    template<int K, typename F, typename C>
    void foo(A<C> const&a, F f) { for(auto i:a) if(i&K) f(i); }
}

using test::foo;
using test::bar;

int sum(test::A<int> const& a)
{
    int s=0;
    foo<2>(a,[&s](int i) { s+=i; } );
    bar   (a,[&s](int i) { s+=i; } );

    return s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:21:27.630

您的问题和问题的答案称为 ADL 以及应用它的规则。它在 C++11 中并不新鲜，对于 GCC 也不是问题。

**Q1：**您有一个`a`类型的参数`test::A`（在第一个示例中），因此 ADL（依赖于参数的查找）在命名空间中查找方法`test`，但*仅用于非模板调用*。这就是为什么`foo<2>`（模板调用）没有找到并且`bar`是的原因。

**Q2：**在 Q3 之后回答，见下文。

**Q3：**您的函数定义`test::foo`没有定义您声明为 的朋友的函数`test::A<T>`。将其更改为

```
namespace test
{
  template<typename T>
  class A;

  template<int K, typename F,typename T>
  void foo(A<T> const&a, F f);

  template<typename T>
  class A : std::vector<int>
  {
    template<int K, typename F,typename U>
    friend void foo(A<U> const&a, F f);
    template<typename F>
    friend void bar(A const&a, F f) { for(auto i:a) f(i); }
  };

  template<int K, typename F,typename T>
  void foo(A<T> const&a, F f) { for(auto i:a) if(i&K) f(i); }
}
using test::foo; 
```

**Q2：**与 Q3 类似，您可以像这样修复它：

```
#include <vector>
namespace test {
  template<typename T>
  class A;

  template<typename F,typename T>
  void bar(A<T> const&a, F f);
  template<int K, typename F,typename T>
  void foo(A<T> const&a, F f);

  template<typename T>
  class A : std::vector<T>
  {
    template<typename F,typename U>
    friend void bar(A<U> const&a, F f);
    template<int K, typename F,typename U>
    friend void foo(A<U> const&a, F f);
  };

  template<typename F,typename U>
  void bar(A<U> const&a, F f) { for(auto i:a) f(i); }
  template<int K, typename F,typename U>
  void foo(A<U> const&a, F f) { for(auto i:a) if(i&K) f(i); }
}
using test::foo;
using test::bar;
int sum(test::A<int> const&a)
{
  int s=0;
  foo<2>(a,[&s](int i) { s+=i; } );
  bar   (a,[&s](int i) { s+=i; } );
  return s;
} 
```

Andy 已经解释了为什么您的原始示例不起作用。

# javascript - 函数内部的回溯函数

> ID：15140319
> 
> 赞同：0
> 
> 时间：2013-02-28T16:14:22.347
> 
> 标签：javascript, jquery

我正在**回溯**代码以了解它的实际作用。我进入了该功能`getResults()`，但我无法理解该功能将如何在`success()`这里触发。请指导我。提前致谢。

```
function getResults(u) {
//alert("Inside get results");
    $.ajax({
        dataType: "jsonp", 
        url: u,
        success: function(res) {                                                    
        alert("Inside success");                                                        
              $("#status").hide();                                                      
              if (res.data.length) {
                  // do something                                                       
            } else {
              // do something else
            }; 
        } 
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:15:01.873

这是一个异步函数。如果您不熟悉该概念，我建议您先阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:09:14.663

`success`只是当 URL 另一端的数据返回时发生的情况。

仅供参考，您可能想查看速记`getJSON`

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# c++ - 如何访问静态类成员？

> ID：15140322
> 
> 赞同：1
> 
> 时间：2013-02-28T16:14:26.337
> 
> 标签：c++, class

```
class Point
{
  private:
    int X, Y;  
  public:
    static const Point Origin;
    static const Point OneZero;
    static const Point ZeroOne;
}; 
```

我怎样才能访问点原点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:18:08.073

对于静态，写：

```
Point::Origin 
```

或更完整的示例：

```
namespace Someplace {
int fun() {
  return Point::Origin.X;
}
} 
```

尽管在`Point::`课程范围内不需要资格 - 你可以简单地写`Origin`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:20:16.203

将访问器（“getters”）添加到您的类中，如下所示：

```
class Point
{
  private:
    int X, Y;  
  public:
    static const Point Origin;
    static const Point OneZero;
    static const Point ZeroOne;

    int getX() {return X;}
    int getY() {return Y;}
}; 
```

然后您可以像这样访问 Point 的内容：

```
int originX = Origin.getX(); 
```

或者像这样：

```
Point myPoint;
int pointX = myPoint.getX(); 
```

此外，在类 Point 中有类 Point 的静态实例也令人困惑。以下可能是您想要做的更多：

```
class Point
{
  public:
    // Added a constructor that takes two arguments
    Point(int pointX, int pointY) {X = pointX; Y = pointY;}

    int getX() {return X;}
    int getY() {return Y;}
  private:
    int X, Y;  
};

int main()
{
  const Point Origin(0,0);
  const Point OneZero(1,0);
  const Point ZeroOne(0,1);

  int originX = Origin.getX();
}; 
```

# javascript - 在javascript中获取实体图标url

> ID：15140329
> 
> 赞同：1
> 
> 时间：2013-02-28T16:14:41.787
> 
> 标签：javascript, dynamics-crm-2011

Im CRM 2011 是否可以从 javascript 代码中获取实体的图标 url？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:56:29.463

这可能是一个返回任何图标 url 的函数：

```
 function GetIconUrl (etc) {
    /// <summary>
    /// Get the url of the 16x16 icon for the specified entity
    /// </summary>
    /// <param name="etc" type="Number">Entity type code of the entity which icon must be retrieved.</param>
    /// <returns type="String">Url of the icon.The path is relative to the application root.</returns>

    var url;
    if (etc >= 10000) {
        // return a custom entity icon
        url = "/_Common/icon.aspx?objectTypeCode=" + etc + "&iconType=GridIcon&inProduction=1&cache=1";
    } else {
        // return a system entity icon
        url = "/_imgs/ico_16_" + etc + ".gif";
    }
    return url;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:32:59.783

您必须[查询](http://msdn.microsoft.com/en-us/library/jj919080.aspx)实体的元数据并检查包含[图标](http://msdn.microsoft.com/en-us/library/gg328173.aspx)的 Web 资源的名称。

# ruby-on-rails - 干净地部署 PJAX 或 Turbolinks 应用程序

> ID：15140331
> 
> 赞同：2
> 
> 时间：2013-02-28T16:14:45.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pjax, turbolinks

如果我有一个使用 PJAX 或 Turbolinks 的应用程序，那么当新代码部署到服务器时我会看到一个问题——比如 Heroku。问题是正在访问该应用程序的用户将继续使用该应用程序以前版本中的 Javascript（因为它已经加载到浏览器中），但会从新版本中获取 HTML 页面。有时，新的 HTML 代码假定新的 Javascript 已加载，因此无法正常工作。

其他人注意到这个问题了吗？你怎么办？这似乎也是单页 Javascript 应用程序（如基于 Backbone 和 Ember 的应用程序）的常见问题。Meteor 至少无缝升级了客户端中的代码，作为处理这个问题的一种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:36:39.923

[https://github.com/rails/turbolinks/#asset-change-detection](https://github.com/rails/turbolinks/#asset-change-detection)看起来像是答案。在您的脚本标签中，放置 data-turbolinks-track。然后我假设发生的情况是，当 turbolinks 加载页面时，它会查找该脚本标记，如果 URL 已更改（如果您使用资产管道，它将自动更改）然后它会为您重新加载整个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:30:03.633

以 pivotaltracker 为例，他们检查客户端连接并在新版本到达时强制用户重新加载客户端。

只要您不在应用程序中提供向后兼容性，您就无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T17:29:00.250

如果您使用的是 Pjax，则可以添加

```
<meta http-equiv="x-pjax-version" content="v123"> 
```

到你的标题。您可以为内容属性使用服务器定义的值，然后在部署之前，只需确保该值已更新。部署后，后续 Pjax 请求将看到此标头已更新，取消它的 Ajax 请求，并拉下整个页面重新加载。

对于 Turbolinks 5，您可以`data-turbolinks-track="reload"`在标题中添加脚本和样式表链接。Turbolinks 将监视这些文件以了解每个请求的更改。然后在部署时，就像 Pjax 一样，它会请求重新加载整个页面。

Classic Turbolinks 只需要该属性`data-turbolinks-track`。

您可以在 Pjax 的 GitHub 页面上阅读更多内容并查看其他功能：[https](https://github.com/defunkt/jquery-pjax) ://github.com/defunkt/jquery-pjax或 Turbolinks：[https](https://github.com/turbolinks/turbolinks) ://github.com/turbolinks/turbolinks 。

对于 Turbolinks Classic：[https ://github.com/turbolinks/turbolinks-classic](https://github.com/turbolinks/turbolinks-classic)

# javascript - 在html中使用javascript变量？

> ID：15140332
> 
> 赞同：-4
> 
> 时间：2013-02-28T16:14:51.223
> 
> 标签：javascript, html, variables, drop-down-menu

```
<select STYLE="font-size:55%; width: 100px;" class="inpSelect" name="sel2" id="region2" onchange="setIframeSource2()">
          <option value="url1.com">Start Date</option> 
          <option value="url2.com">Account Name (A-Z)</option> 
     </select> 
```

如何在`value`属性中使用 javascript 变量？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:39:05.027

给你的`option`字段一个id，比如

```
<option id="option1" value="url1.com">Start Date</option> 
```

然后你可以很容易地设置它的值：

```
document.getElementById("option1").value = foo; 
```

# hadoop - Hadoop 安全

> ID：15140339
> 
> 赞同：6
> 
> 时间：2013-02-28T16:15:06.603
> 
> 标签：hadoop, kerberos, hadoop-plugins, kerberos-delegation, mit-kerberos

![场景： - 用户登录到他的计算机通过 Kerberos 身份验证进行身份验证并提交地图缩减作业](../Images/b9879b6ec3092635c850cf588dc61280.png)

我正在尝试学习“如何在 Hadoop 中实现 Kerberos？” 我浏览了这个文档 [https://issues.apache.org/jira/browse/HADOOP-4487](https://issues.apache.org/jira/browse/HADOOP-4487) 我也浏览了基本的 Kerberos 东西（[https://www.youtube.com/watch?v=KD2Q-2ToloE](https://www.youtube.com/watch?v=KD2Q-2ToloE)）

从这些资源中学习后，我得出了一个我通过图表表示的结论。场景： - 用户登录到他的计算机通过 Kerberos 身份验证并提交地图缩减作业（请阅读图表的描述，它几乎不需要 5 分钟的时间）我想解释图表并提出与少数相关的问题步骤**（粗体）** 黄色背景的数字代表整个流程（数字 1 到 19） DT（红色背景）代表委托令牌 BAT（绿色背景）代表块访问令牌 JT（棕色背景）代表作业令牌

步骤 1、2、3 和 4 表示：- 请求 TGT（授予票证）请求名称节点的服务票证。 **Question1) KDC应该在哪里？它可以在我的名称节点或作业跟踪器所在的机器上吗？**

步骤 5、6、7、8 和 9 代表：- 向名称节点显示服务票证，获得确认。名称节点将发出委托令牌（红色）用户将告知令牌更新者（在这种情况下是 Job Tracker）

**问题 2) 用户将此委托令牌连同作业一起提交给 Job Tracker。委托令牌会与任务跟踪器共享吗？**

步骤 10、11、12、13 和 14 代表：- 请求 Job tracker 的服务票证，从 KDC 获取服务票证 将此票证显示给 Job Tracker 并从 JobTracker 获得 ACK 提交 Job + Delegation Token 到 JobTracker。

步骤 15,16 和 17 表示：- 生成块访问令牌并传播到所有数据节点。将 blockID 和 Block Access Token 发送到 Job Tracker，Job Tracker 会将其传递给 TaskTracker

**问题 3) 谁会向 Name Node 索要 BlockAccessToken 和 Block ID？JobTracker 或 TaskTracker**

抱歉，我不小心错过了 18 号。Step19 表示：- Job Tracker 生成 Job Token（棕色）并将其传递给 TaskTrackers。

**问题 4）我是否可以得出结论，每个用户将有一个委托令牌，它将分布在整个集群中，并且每个作业将有一个作业令牌？所以一个用户将只有一个Delegation Token和许多Job Tokens（等于他提交的作业数量）。**

**请告诉我我是否遗漏了什么，或者我在解释中的某个地方有错误。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T20:14:17.270

确保 Hadoop 安全的步骤

1.  在所有集群节点都可以访问的任何服务器上安装 Kerberos。yum install krb5-server yum install krb5-workstation yum install krb5-libs

2.  修改 KDC 服务器配置中的配置文件，为主机设置 acl 文件、管理密钥表文件。/var/kerberos/krb5kdc/kdc.conf

3.  修改配置文件 /etc/krb5.conf 以设置 kdc 主机和管理服务器

4.  在 KDC 主机中创建数据库

    $ kdb5_util 创建 -r 主机名 -s

5.  将管理员添加到 ACL 文件

    1.  vi /etc/kdamin.acl
    2.  在该文件中添加管理员主体 'admin/admin@host_name'
6.  添加管理员主体 $addprinc admin/admin@host_name

在所有集群节点上安装 Kerberos 客户端

yum install krb5-workstation

将 krb5.conf 复制到所有集群节点

确保通过设置所需的配置在 Hadoop 中启用安全模式 [https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SecureMode.html](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SecureMode.html)

核实 ：

*   以普通用户身份登录到部署用户密钥表的集群网关或节点
*   运行“kinit –k –t /location/of/keytab file username@host_name”</li>
*   并运行 HDFS 命令或 mapreduce 作业以验证集群是否安全

这些是确保在集群中启用 kerberos 的基本步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T05:13:42.077

Hadoop 安全主要使用 Kerberos 进行身份验证，使用哨兵进行授权。Ranger 之类的网关，knox 用于安全方面 [http://commandstech.com/latest-hadoop-admin-interview-questions/](http://commandstech.com/latest-hadoop-admin-interview-questions/)

# c++ - C++ 打印一个链表

> ID：15140345
> 
> 赞同：0
> 
> 时间：2013-02-28T16:15:26.223
> 
> 标签：c++, linked-list

我是 C++ 新手，我的打印功能有问题。这可能是一个非常简单的问题，但我不知道如何解决它。

在我开始编写代码之前，我可能会补充一点，这应该是一个循环列表。

首先，这是我的链表结构

```
struct CL;

typedef CL* list_type;

struct person
{
    string last_name;
    string first_name;
    string tel_nr;
};

struct CL
{
    person data;
    list_type next;
}; 
```

如您所见，我希望列表包含数据和指针。数据是一个人（姓氏、名字和电话号码（作为字符串））。

我的主程序看起来像这样

```
int main ()
{
    list_type list;
    list_type first;
    string line;
    person info;
    ifstream myfile ("INFILE.TXT");
    if (myfile.is_open())
    {
        while (myfile.good())
        {
            getline (myfile,line,',');
            info.last_name=line;
            getline(myfile,line,' ');
            getline(myfile,line,':');
            info.first_name=line;
            getline(myfile,line);
            info.tel_nr=line;
            if(first==0)
            {
                list = new CL;
                first = list;
                list->data = info;
                list->next = 0;
            }
            else
            {
                list->next = new CL;
                list = list->next;
                list->data = info;
                list->next = 0;
            }

        }

        list->next = first;
        print(list);
        myfile.close();
    }
    else cout<<"Unable to open file.";
    return 0;
} 
```

现在到我遇到问题的部分，打印功能。

```
void print(CL* cur)
{
    list_type first;
    first=cur;
    int x;
    do
    {
        cout<<"\n"<<"Your Data is: ";
        cout<<cur->data.last_name<<cur->data.first_name<<cur->data.tel_nr;
        //I guess this is where the fault lies ^.
        cur = cur->next;
    }
    while(cur != first);
} 
```

如果可能的话，我会喜欢一个解释，而不仅仅是正确的代码。

谢谢

编辑。我得到的结果是很多奇怪的字符，例如：

```
ê,(,?,ý and alot of other characters I don't know how to type. 
```

我期待的结果是这样的

```
Robertson Linda 0838-2345
Brown Charles 068-24567
etc until the end of list 
```

编辑2。

解决了，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:48:51.327

## 第一个问题

```
int main ()
{
    list_type list;
    list_type first; // uninitialized value
    // ...
            if(first==0) // ???
            { 
```

您需要为此`first`显式初始化才能执行您期望的操作：

```
int main ()
{
    list_type list;
    list_type first = 0;
    // ...
            if(first==0)
            { 
```

* * *

## 第二个问题

首先，您的链表代码很脆弱，因为您并没有真正编写（惯用的）C++。即使不使用 STL，您的列表也可以（并且应该）提供某种程度的抽象。正确编写它实际上更容易，因为您的数据结构逻辑不会与您的测试工具或问题域逻辑完全混淆。

例如，

```
class PersonList {
    CL *head;
    CL *tail;

public:
    PersonList(); // think about how to initialize an empty list

    void push_back(Person const&); // head & tail modified in here
    // etc.
}; 
```

请注意，如果您不允许使用`class`，这是相同的：

```
struct PersonList {
private:
    CL *head;
    // ... as above ... 
```

如果你根本不允许使用构造函数和方法，一个好的 C 风格的等价物可能是：

```
struct PersonList {
    CL *head;
    CL *tail;
};
struct PersonList * new_list();
void push_back(struct PersonList *, Person const &); 
```

这仍然将您的数据结构代码分组在一个位置，远离您的业务逻辑/问题域/测试工具代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:37:56.160

首先初始化为零。因为第一个链接没有初始化，你得到了错误的字符。

# html - 强制单选按钮显示内联

> ID：15140347
> 
> 赞同：2
> 
> 时间：2013-02-28T16:15:30.190
> 
> 标签：html, ruby-on-rails-3, twitter-bootstrap

我正在使用引导程序来设置带有单选按钮的表单。

不幸的是 display:inline 没有使表单上的单选按钮内联。也没有将 display:inline 移动到 css 中。

```
<div class="row">
  <div class="span6 offset3">   
    <div style="display:inline">
      <%= f.label "status_open", "Open" %>
      <%= f.radio_button :status, 'Open' %> <br />
      <%= f.label "status_active",  "Active" %>
      <%= f.radio_button :status, 'Active' %> <br />
      <%= f.label "status_closed",  "Closed" %>
      <%= f.radio_button :status, 'Closed' %> <br />
      <%= f.label "status_matched", "Matched" %>
      <%= f.radio_button :status, 'Matched' %> <br />   
    </div>      
    <%= f.submit "Submit", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

来源：

```
<div class="row">
<div class="span6 offset3">
<form accept-charset="UTF-8" action="/books" class="new_book" id="new_book"   method="post"><div style="margin:0;padding:0;display:inline"></div>

  <label for="book_title">Title</label>
  <input id="book_title" name="book[title]" size="30" type="text" />

  <label for="book_isbn">Isbn</label>
  <input id="book_isbn" name="book[isbn]" size="30" type="text" />

  <label for="book_edition">Edition</label>
  <input id="book_edition" name="book[edition]" size="30" type="text" />

  <label for="book_year">Year</label>
  <input id="book_year" name="book[year]" size="30" type="text" />

  <div style="display:inline">
  <label for="book_book_category_fiction">Fiction</label>
  <input id="book_category_fiction" name="book[category]" type="radio" value="Fiction" />
  <label for="book_book_category_non_fiction">Non-fiction</label>
  <input id="book_category_non-fiction" name="book[category]" type="radio" value="Non-fiction" />
  </div>
  <br />
  <input class="btn btn-large btn-custom-black" name="commit" type="submit" value="Create Book" />
</form>  
</div>
</div> 
```

关于为什么按钮没有内联显示的任何想法？任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:58:57.067

如果您希望表单元素彼此内联显示，您将需要使用`form-inline`该类。

在您的来源中，更改：`<div style="display:inline">`

到：`<div class="form-inline">`

这应该让你朝着正确的方向前进。您可以进行许多其他更新，以使整个表单更符合 Bootstrap 团队的指南布局。

这是一个更新的示例：http: [//jsfiddle.net/dusthaines/GTUK9/](http://jsfiddle.net/dusthaines/GTUK9/)

顺便说一句，单选按钮位于左侧通常是最佳实践，其对应的标签位于右侧 - 我的示例也反映了这个小更新。

其他详细信息@http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:17:59.710

乍一看，您可能想删除`<br/>`单选按钮之间的那些标签...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:17:26.480

`display: inline`应该应用于项目本身，而不是容器。请链接生成的标记 (HTML) 以获得更多帮助。

# regex - 选择其他两个字符串之间没有字符串的所有文件

> ID：15140359
> 
> 赞同：3
> 
> 时间：2013-02-28T16:16:06.730
> 
> 标签：regex, bash, grep

我有一组文件，我需要遍历并找到所有在其他 2 个特定字符串之间没有特定字符串的文件。我怎样才能做到这一点？

我试过了，但没有用：

```
grep -lri "\(stringA\).*\(?<!stringB\).*\(stringC\)" ./*.sql 
```

编辑：该文件可能具有如下结构：

```
StringA
StringB
StringA
StringC 
```

我只想知道是否存在字符串 A 和字符串 C 之间没有字符串 C 的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:28:13.403

简短的回答如下：

```
grep "abc[^(?:def)]*ghi" ./testregex 
```

这是基于像这样的 testregex 文件：

```
abcghiabc
abcdefghi
abcghi 
```

输出将是：

```
$ grep "abc[^(?:def)]*ghi" ./testregex 
abcghiabc
abcghi 
```

映射到您的用例，我敢打赌这大致可以转化为：

```
grep -lri "stringA[^(?:stringB)]*stringC" ./*.sql 
```

请注意，我已删除每个字符串之间的“.*”，因为这将匹配您尝试排除的字符串。

更新：原来的问题现在调用换行符，所以使用 grep 的 -z 标志：

```
-z 
```

> 在行尾取消换行符，将其替换为空字符。也就是说，grep 知道行尾在哪里，但将输入视为一条大行。

因此：

```
grep -lriz "stringA[^(?:stringB)]*stringC" ./*.sql 
```

当我第一次不得不自己使用这种方法时，我写了以下解释......

> 具体来说：我想匹配“任何字符，任意次数，非贪婪（因此请遵循后续显式模式），并且不匹配序列 />”。
> 
> 最后一部分是我要分享的内容：“不匹配序列/>”。这是我第一次使用结合“任何字符”逻辑的字符序列。
> 
> 我的目标字符串：
> 
> `<img class="photo" src="http://d3gqasl9vmjfd8.cloudfront.net/49c7a10a-4a45-4530-9564-d058f70b9e5e.png" alt="Iron or Gold" />`
> 
> 我的第一次尝试：
> 
> `<img.*?class="photo".*?src=".*?".*?/>`
> 
> 这在在线正则表达式测试器中有效，但在我的实际 Java 代码中由于某种原因失败了。通过反复试验，我发现替换每个“。*？” 用“[^<>]*？” 那是成功的。也就是说，代替“任何字符的非贪婪匹配”，我可以使用“除了 < 或 > 之外的任何字符的非贪婪匹配”。
> 
> 但是，我不想使用它，因为我看到了包含这些字符的替代文本。在我的特殊情况下，我想使用字符序列“/>”作为排除序列——一旦遇到该序列，停止“任何字符”匹配。
> 
> 这让我想到了我的教训：
> 
> 第 1 部分：可以使用 (?:regex) 实现字符序列。也就是说，对字符序列正常使用 () 括号，但在前面加上“?:”，以防止序列被匹配为目标组。因此，"(?:/>)" 将匹配 "/>"，而 "(?:/>)*" 将匹配 "/>/>/>/>"。
> 
> 第 2 部分：此类字符序列可以以与单个字符相同的方式使用。即“[^(?:/>)]*?” 将匹配除序列“/>”之外的任何字符，任意次数，非贪婪。
> 
> 差不多就是这样。搜索的关键词是“非捕获组”和“负前瞻|后视”，后一个功能比我到目前为止所了解的要深入得多，还有一些我还没有理解的标志。但最初的理解为我提供了我当前任务所需的工具，这是我一直想知道的一个功能 - 因此，我想我会分享基本介绍，以防你们中的任何人对折叠它感到好奇在你的工具集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:31:44.247

您可以使用`-L`选项`grep`打印所有不匹配的文件并查找字符串的特定组合：

```
grep -Lri "\(stringA\).*\(stringB\).*\(stringC\)" ./*.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:31:28.363

在玩弄了 DreadPirateShawn 提供的声明之后：

```
stringA[^(?:stringB)]*stringC 
```

我发现它不是一个真正有效的正则表达式。该语句排除*了给定集中的每个字符，*而不是完整的字符串。于是我继续挖掘。

经过一些谷歌搜索和测试模式后，我想出了以下语句，这似乎符合我的需要：

```
stringA\s*\t*(?:(?!stringB).)*\s*\t*stringC 
```

此模式匹配除2 个指定字符串之间*提供的字符串之外的任何文本。*它还考虑了空白字符。

还有更多的测试要做，但似乎这种模式完全符合我的要求

更新：这是该声明的最终版本，似乎对我有用：

```
grep -lriz "(set feedback on){0,}[ \t]*(?:(?!set feedback off).)*[ \t]*select sysdate from dual"  ./*.sql 
```

# ruby-on-rails - 具有嵌套资源的 Rails Active Admin

> ID：15140360
> 
> 赞同：0
> 
> 时间：2013-02-28T16:16:06.503
> 
> 标签：ruby-on-rails, activeadmin

我有两个模型（资源和 tool_tip_infos），我使用带有嵌套资源的活动管理员，为了实现这一点，我定义如下：

```
ActiveAdmin.register ToolTipInfo do
  belongs_to :resource
end 
```

但如果我打电话`http://abc.com/admin/resources/17/tool_tip_infos/117/edit`或`http://abc.com/admin/resources/17/tool_tip_infos/new` 然后它给出以下错误：

```
undefined method `resource_id' for #<Resource:0xb1073e4> 
```

除了这两个操作（新建和编辑）之外，其他操作都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:47:57.953

实际问题是命名约定，就像我们使用了已在活动管理员中使用的资源，因此由于资源而存在一些代码冲突，这就是它无法正常工作的原因。

当我将资源之类的其他名称更改为 available_models 时，它工作正常。

谢谢。

# graphviz - 在父节点下方显示节点而不考虑等级

> ID：15140369
> 
> 赞同：1
> 
> 时间：2013-02-28T16:16:31.557
> 
> 标签：点, graphviz, ranking, class-diagram, dot

我正在用[点](/questions/tagged/dot "显示标记为“点”的问题")语言制作某种超级简化的类图。该图仅包含具有类名、继承和聚合的简单节点。

为了有一个特定的继承边缘样式，并在其父类下方显示子类，我使用以下设置：

```
subgraph inheritance {
    edge[dir="back"; arrowtail="empty"; arrowsize="1.75"];
    color=white;

    subgraph clusterExpression{
        Expression -> VariableExpression;
        Expression -> AssignmentExpression; 
```

一切正常，但是当我有很多子类时，我的图表变得非常宽。我不在乎子类是否处于同一级别。

有没有办法以最紧凑的方式显示超类之下的所有子类？而不是这个：![在此处输入图像描述](../Images/260a328ab608b5371c1e81d3b71bb603.png)

我想得到这样的东西： ![在此处输入图像描述](../Images/56213283c5d4c7a472207b2c4d6b54a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:58:50.210

*[您可以尝试使用名为unflatten](http://www.graphviz.org/pdf/unflatten.1.pdf)*的 graphviz 工具：

> unflatten 是 dot 的预处理器，用于提高具有许多叶子或断开节点的图的纵横比。这种图表的通常布局通常非常宽或高。unflatten 插入不可见的边缘或调整边缘上的 minlen 以改善布局压缩。

您可以将其通过管道传输到命令行中 - 有关示例，请参见[这些](https://stackoverflow.com/a/11136488/63733) [答案](https://stackoverflow.com/a/12372105/63733)。

# sql - 如何在 SQL 脚本中确定 LocalDb 实例名称？

> ID：15140370
> 
> 赞同：8
> 
> 时间：2013-02-28T16:16:42.633
> 
> 标签：sql, sql-server, sql-server-express, localdb

对于非 LocalDb SQL Server，我可以`SELECT SERVERPROPERTY('ServerName')`获取服务器的名称和正在运行的实例。但是，对于 LocalDb 服务器，我得到`SERVERNAME\LOCALDB#SOMEHASH`. 如何获取本地实例名称？

**解决方案：**

获取实例的解决方案，在 LocalDB 和“普通”SQL Server 实例上工作：

```
DECLARE @serverName NVARCHAR(151)
IF SERVERPROPERTY('IsLocalDb') = 1
    SELECT @serverName = 'np:\\.\pipe\' + CONVERT(NVARCHAR(128), SERVERPROPERTY('InstanceName')) + '\tsql\query'
ELSE
    SELECT @serverName = CONVERT(NVARCHAR(128), SERVERPROPERTY('ServerName')) 
```

我应该在原始问题中提到的一些背景：我们的应用程序有一个配置数据库。除其他外，它存储连接字符串。对于开发人员机器和集成测试，我们希望能够使用脚本生成数据库，并让连接字符串引用本地实例。因此，我需要一个有效的连接字符串（`LOCALDB#SOMEHASH`不是）。由于数据库服务器的版本有所不同，我需要一些可以处理这两种情况的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:21:53.430

这是：

```
SELECT SERVERPROPERTY ('InstanceName') 
```

**编辑**

从[链接](http://msdn.microsoft.com/en-us/library/hh510202.aspx)

连接到 LocalDB 的共享实例

要连接到 LocalDB 的共享实例，请将 .\（点 + 反斜杠）添加到连接字符串以引用为共享实例保留的命名空间。例如，要连接到名为 AppData 的 LocalDB 共享实例，请使用 (localdb).\AppData 等连接字符串作为连接字符串的一部分。连接到他们不拥有的 LocalDB 共享实例的用户必须具有 Windows 身份验证或 SQL Server 身份验证登录。

**和**

如果您的应用程序使用 4.0.2 之前的 .NET 版本，您必须直接连接到 LocalDB 的命名管道。Instance pipe name value 是 LocalDB 实例正在侦听的命名管道。每次启动 LocalDB 实例时，LOCALDB# 之后的实例管道名称部分都会更改。要使用 SQL Server Management Studio 连接到 LocalDB 实例，请在连接到数据库引擎对话框的服务器名称框中键入实例管道名称。从您的自定义程序中，您可以使用类似于以下的连接字符串建立到 LocalDB 实例的连接`SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`

# linux - 消耗的内存和进程内存不匹配（140MB vs 8MB）

> ID：15140373
> 
> 赞同：1
> 
> 时间：2013-02-28T16:16:48.597
> 
> 标签：linux, openvz

运行进程后系统内存消耗约 140MB，但进程仅占用约 8MB。这个进程（openttd 专用服务器）是完全独立的（不与其他进程通信）。

前

```
free -m
             total       used       free     shared    buffers     cached
Mem:          1000        777        222          0          0          0
-/+ buffers/cache:        777        222
Swap:            0          0          0 
```

后

```
free -m 
             total       used       free     shared    buffers     cached
Mem:          1000        913         86          0          0          0
-/+ buffers/cache:        913         86
Swap:            0          0          0 
```

流程图

```
pmap 18428 -x
18428:   /var/www/ttd-server/openttd_1.2.3 -s null -m null -x -c /var/www/ttd-server    /configuration/preload/openttd.cfg -D
Address           Kbytes     RSS   Dirty Mode   Mapping
0000000000400000       0    2948       0 r-x--  openttd_1.2.3
0000000000aee000       0      64      48 rw---  openttd_1.2.3
0000000000afe000       0     588     584 rw---    [ anon ]
000000001c66d000       0    2516    2516 rw---    [ anon ]
00002ba83f5a7000       0     100       0 r-x--  ld-2.11.3.so
00002ba83f5c5000       0     256     256 rw---    [ anon ]
00002ba83f7c4000       0       4       4 r----  ld-2.11.3.so
00002ba83f7c5000       0       4       4 rw---  ld-2.11.3.so
00002ba83f7c6000       0       4       4 rw---    [ anon ]
00002ba83f7c7000       0     380       0 r-x--  libstdc++.so.6.0.13
00002ba83f8bd000       0       0       0 -----  libstdc++.so.6.0.13
00002ba83fabd000       0      28      28 r----  libstdc++.so.6.0.13
00002ba83fac4000       0       8       8 rw---  libstdc++.so.6.0.13
00002ba83fac6000       0       4       4 rw---    [ anon ]
00002ba83fadb000       0      52       0 r-x--  libpthread-2.11.3.so
00002ba83faf2000       0       0       0 -----  libpthread-2.11.3.so
00002ba83fcf1000       0       4       4 r----  libpthread-2.11.3.so
00002ba83fcf2000       0       4       4 rw---  libpthread-2.11.3.so
00002ba83fcf3000       0       8       8 rw---    [ anon ]
00002ba83fcf8000       0     112       0 r-x--  libm-2.11.3.so
00002ba83fd78000       0       0       0 -----  libm-2.11.3.so
00002ba83ff78000       0       4       4 r----  libm-2.11.3.so
00002ba83ff79000       0       4       4 rw---  libm-2.11.3.so
00002ba83ff7a000       0     460       0 r-x--  libc-2.11.3.so
00002ba8400d3000       0       0       0 -----  libc-2.11.3.so
00002ba8402d2000       0      16      16 r----  libc-2.11.3.so
00002ba8402d6000       0       4       4 rw---  libc-2.11.3.so
00002ba8402d7000       0      16      16 rw---    [ anon ]
00002ba8402dc000       0      16       0 r-x--  libgcc_s.so.1
00002ba8402f2000       0       0       0 -----  libgcc_s.so.1
00002ba8404f1000       0       4       4 rw---  libgcc_s.so.1
00002ba8404f2000       0     104     104 rw---    [ anon ]
00002ba848565000       0     284     284 rw---    [ anon ]
00007fff900e4000       0      44      44 rw---    [ stack ]
00007fff901fd000       0       8       0 r-x--    [ anon ]
ffffffffff600000       0       0       0 -----    [ anon ]
----------------  ------  ------  ------
total kB          162884    8048    3952 
```

top before（按 RES 排序）

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                         
15801 www-data  17   0 1320m 173m 4036 S  1.3 17.4   0:54.75 java                                                                                                            
 1518 ejabberd  15   0 99684  54m 3724 S  0.0  5.5  18:05.64 beam                                                                                                            
 7917 www-data  15   0  124m  47m 2204 S  0.0  4.8   0:02.43 plackup                                                                                                         
 8039 www-data  15   0  123m  46m 2204 S  0.0  4.7   0:02.38 plackup                                                                                                         
32439 www-data  15   0  116m  42m 2812 S  0.0  4.2   0:42.54 plackup                                                                                                         
29708 mysql     15   0  170m  38m 7556 S  0.0  3.9 187:51.36 mysqld                                                                                                          
32247 www-data  15   0  141m  38m 3376 S  0.0  3.8   0:08.01 plackup                                                                                                         
 6025 www-data  15   0  176m  37m 4532 S  0.0  3.7   0:06.17 php-cgi                                                                                                         
 3248 www-data  15   0  172m  33m 4544 S  0.0  3.4   0:10.55 php-cgi                                                                                                         
 3591 www-data  15   0  123m  32m 3080 S  0.0  3.3   9:09.46 plackup                                                                                                         
32303 www-data  15   0  250m  32m 6364 S  0.3  3.3  17:54.92 mongod                                                                                                          
24324 send2me   16   0 53340  14m 3088 S  0.0  1.5   0:03.00 perl                                                                                                            
26584 bind      25   0 93800  11m 2352 S  0.0  1.1   0:00.17 named                                                                                                           
20045 root      15   0  110m 9288 6876 S  0.0  0.9   2:18.20 ispmgr                                                                                                          
15574 www-data  18   0  144m 9168 5732 S  0.0  0.9   0:00.07 php-cgi                                                                                                         
30220 www-data  15   0 37420 9148 2936 S  0.0  0.9   1:29.11 websockify.py                                                                                                   
 9935 root      16   0 83864 3688 2856 S  0.0  0.4   0:00.02 sshd 
```

排在前面（按 RES 排序）：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                         
15801 www-data  17   0 1320m 173m 4036 S  1.3 17.4   0:53.77 java                                                                                                            
 1518 ejabberd  15   0 99684  54m 3724 S  0.0  5.5  18:05.62 beam                                                                                                            
 7917 www-data  15   0  124m  47m 2204 S  0.0  4.8   0:02.42 plackup                                                                                                         
 8039 www-data  15   0  123m  46m 2204 S  0.0  4.7   0:02.37 plackup                                                                                                         
32439 www-data  15   0  116m  42m 2812 S  0.0  4.2   0:42.54 plackup                                                                                                         
29708 mysql     15   0  170m  38m 7556 S  0.0  3.9 187:51.34 mysqld                                                                                                          
32247 www-data  15   0  141m  38m 3376 S  0.0  3.8   0:08.01 plackup                                                                                                         
 6025 www-data  15   0  176m  37m 4532 S  0.0  3.7   0:06.17 php-cgi                                                                                                         
 3248 www-data  15   0  172m  33m 4544 S  0.0  3.4   0:10.55 php-cgi                                                                                                         
 3591 www-data  15   0  123m  32m 3080 S  0.0  3.3   9:09.44 plackup                                                                                                         
32303 www-data  15   0  250m  32m 6364 R  0.3  3.3  17:54.61 mongod                                                                                                          
24324 send2me   16   0 53340  14m 3088 S  0.0  1.5   0:03.00 perl                                                                                                            
26584 bind      25   0 93800  11m 2352 S  0.0  1.1   0:00.17 named                                                                                                           
20045 root      15   0  110m 9288 6876 S  0.0  0.9   2:18.19 ispmgr                                                                                                          
15574 www-data  18   0  144m 9168 5732 S  0.0  0.9   0:00.07 php-cgi                                                                                                         
30220 www-data  15   0 37420 9148 2936 S  0.0  0.9   1:29.11 websockify.py                                        

18428 www-data  16   0  151m 8048 4096 R  0.0  0.8   0:00.30 openttd_1.2.3

 9935 root      16   0 83864 3688 2856 S  0.0  0.4   0:00.02 sshd 
```

看起来像是位于物理内存中的进程的虚拟内存，但为什么呢？例如 java 进程有 1320MB 的虚拟内存但只消耗了 173MB 的真实内存（用 RES 计算），但 openttd 进程的 RES=8MB 但消耗了 136MB 的真实内存。这是什么意思？

**UPD。**

我的服务器基于 OpenVZ。
Openttd 以单线程模式编译。
在真正的PC上没有问题。

ulimit -a

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 16382
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 128
cpu time               (seconds, -t) unlimited
max user processes              (-u) unlimited
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:41:03.587

OpenVZ 的内存模型有问题。当我在 PC 上调用 malloc(128 * 1024 * 1024) 时，总可用内存不会消耗或消耗一点，因为它并没有真正被应用程序使用。但是如果我在 OpenVZ 下调用 malloc，它会立即消耗 128Mb 的可用内存。因此，在为 OpenVZ 编程时，您不应该预先分配大量未使用的内存空间。

# dynamics-ax-2009 - 执行未在 AX 2009 中初始化的代码对象时出错

> ID：15140375
> 
> 赞同：2
> 
> 时间：2013-02-28T16:16:51.767
> 
> 标签：dynamics-ax-2009, axapta

从我创建的引用 dll 调用方法时，我在 AX 2009 的自定义项目中收到一条消息。消息是错误执行代码对象未初始化。我的项目编译成功，并且 AOT 中引用了 dll。

尝试执行 hostServices.Copy() 时发生在 MyClassExecuteCopy.copy() 中的错误

谁能看到我为什么会收到此消息的任何问题？

我缩短了这个例子的代码如下：

```
//classDeclaration
class MyClassExecute extends RunbaseBatch
{
    MyDll.Win.HostServices                    hostServices;
    MyDll.Data.InputParameters                inputParams;
    MyDll.Test.Data.ResultSummary           resultSummary;
}

//MyClassExecute.initLiabraries
public void initLiabraries()
{
    ;
    new InteropPermission(InteropKind::ClrInterop).assert();

    hostServices = new MyDll.Win.HostServices();
    inputParams = new MyDll.Data.InputParameters();

    CodeAccessPermission::revertAssert();
}

////////////////////////////////////////////

class MyClassExecuteCopy extends MyClassExecute
{
}

//MyClassExecuteCopy.copy   - Exception occurs on resultSummary line with "Error executing code: copySomething     object not initialized"
void copy()
{
    new InteropPermission(InteropKind::ClrInterop).assert();

    //Exception occurs when executing line below with "Error executing code: copySomething object not initialized"
    resultSummary = hostServices.Copy();

    CodeAccessPermission::revertAssert();
}

//////////////////////////////////////////////

class CreateCopy extends Runbase
{
}

//CreateCopy.copySomething
public client server static void copySomething()
{
    MyClassExecuteCopy            myClassExecuteCopy;
    ;
    new InteropPermission(InteropKind::ClrInterop).assert();
    myClassExecuteCopy.initLiabraries();
    myClassExecuteCopy.copy();
    CodeAccessPermission::revertAssert();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:15:33.280

发现要通过数据初始化的问题。

结果，hostServices.Copy() 没有正确的值，或者导致 dll 中出现错误，或者没有返回任何一种方式，这是我在 AX 中收到的错误消息的结果。

在更正按预期处理相同调用的数据之后。

# javascript - html 页面没有机会在 ajax 调用之间呈现

> ID：15140380
> 
> 赞同：0
> 
> 时间：2013-02-28T16:16:55.590
> 
> 标签：javascript, jquery

我有一些“ajax”调用（真的是 sjax，我猜你可以调用它），我试图让它们*一次在*页面上呈现，但它们不是。它们都在最后渲染。我怎样才能把它们隔开？

```
function getNames() {
    var names = $('#thenames').val();
    alert(names);
    var splitnames = names.split(',');
    for(var i = 0; i < splitnames.length; i++) {
    var name = splitnames[i];

    $.ajax({
        type: 'GET',
        url: '/acert/secure/people/namesservice/getnamesajax.jsp',
        data: { usernames: name},
        success: function(data) { $('#results').html($('#results').html() + data);},
        async: false });
        }
    }
} 
```

我不能冒险让它们以错误的顺序返回，所以我需要它们是同步的。我把它们放到一个for循环中，所以for循环应该让浏览器有机会在调用之间进行渲染，但我似乎做不到。

关于我做错了什么的任何想法？

如果我在成功功能中添加一个警报框，它可以工作，但我不想照看操作，我只想不时监控它的进度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:20:08.047

`async: false` *阻止*浏览器。它完全**锁定了所有内容**，包括对 DOM 的重绘。

我强烈**建议**您不要使用`async: false`. 这是非常糟糕的。

您可能可以`setTimeout`在调用之间使用，但它们不能保证浏览器会触发重绘。

如果您设置`async: true`，您将不会遇到此问题，但您可能必须更改代码以正确处理异步行为。

* * *

[async false 太糟糕了 jQuery 决定从 API 中删除它。](https://stackoverflow.com/questions/11448011/jquery-ajax-async-deprecated-what-now)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:24:56.383

不要使用`async: false`.

下面的代码将尽可能快地运行所有 ajax 请求，然后以正确的顺序将内容附加到#results。`async: false`如果您使用下面的代码，请不要包括在内。

```
var defArr = [];

for(var i = 0; i < splitnames.length; i++) {
    defArr.push( $.ajax({...}) );
}

$.when.apply($,defArr).done(function(){
    var $results = $("#results");
    $results.empty();
    for (var i = 0; i < arguments.length; i++) {
        $results.append(arguments[i][0]);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:19:32.797

假设您知道您进行了多少次调用（或者可以将其作为返回结果的参数包含在内），您可以简单地异步触发调用，并将它们作为成功回调的数组中的元素。当数组达到预期大小时，只需按顺序渲染它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:22:46.237

一方面，您似乎在那里有一个额外的花括号。

但更重要的是，如果您只是想监控进度，您可以使用它[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)吗？

- 更新 -

我想我明白你想要做什么。如果我没记错的话，你可以稍微重构一下，然后使用一个闭包和一个以名称作为键的对象。像这样的东西：

```
function getNames()
{
    var names = $('#thenames').val();
    var splitnames = names.split(',');
    var myData = {};

    for(var i = 0; i < splitnames.length; i++) 
    {
        (function(name) 
            { return function(){
            $.ajax({
                type: 'GET',
                url: '/acert/secure/people/namesservice/getnamesajax.jsp',
                data: { usernames: name},
                success: function(data) { myData[name] = data; updateNames(); }
            });

        })( splitnames[i] )
    }
} 
```

这基本上所做的是它立即设置了一堆 ajax 调用，中间的那个奇怪的位与 (function(){})() 确保你最终不会`name`获取设置为的最后一个值当循环结束时。一切都保存到，我想一旦每个人都被加载，你可以检查你拥有的`myData`所有名字是否都在`splitnames`函数中。就像是`myData``updateNames`

```
var count = 0; 
for ( var i = 0; i < splitnames.length; i++ ) 
{
    count += myData[splitnames[i]] != null ? 1 : 0; 
}

if (count == splitnames.length)
{
   // write the names to the screen
} 
```

那有意义吗？

但是，老实说，最好的方法可能是更改 getnamesajax.jsp 以便它接受所有名称，然后按您需要的顺序返回您需要的信息。如果这是一种选择，那将是最好的，因为您只需要进行一次 ajax 调用。

# php - 分配随机伙伴关系而不重复？

> ID：15140388
> 
> 赞同：0
> 
> 时间：2013-02-28T16:17:32.800
> 
> 标签：php, mysql, pdo, foreach

问题缩小到以下几点：

我有两个数组：`user_in_need`和`active_users`. `user_in_need`是 的子集`active_users`。

```
Array ( [1]  [2]  [3]  [4]  [5]  [6]  [7]  [8]  [9] )  // active_users

Array ( [3]  [7]  [9] )                                // user_in_need 
```

我需要`user_in_need`从`active_users`数组中随机分配给每个合作伙伴。一个警告，我不能让用户被指定为合作伙伴。

这是我所能得到的[不起作用]：

```
$partners = array();
foreach ($user_in_need as $value) {
    $key = array_search($value, $active_users);
    unset($active_users[$key]);

    shuffle($active_users);
    $newpartner = end($active_users);

    $partners[$value] = $newpartner;
    $user = $value;

    $query = "UPDATE users SET target=:partner WHERE uid=:uid";
    $query_params = array(':partner' => $newpartner, ':uid' => $user );
    $stmt = $db->prepare($query);
    $result = $stmt->execute($query_params);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:56:41.120

我不认为我自己能解决这个问题，但这里是：

所需要做的就是`active_users`像我所做的那样从数组中删除值，执行所需的操作，然后，在一切完成后，只需将值添加回`active_users`循环结束之前 - 从而将其恢复到原始状态.

所以，我只是`$theliving[] = $value;`在查询之前添加了：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:26:43.667

这个伪英语的“伪代码”怎么样：

*   获取当前合作伙伴

```
<?php
SELECT partner_id FROM users WHERE user_id = USER_ID

do{
    $partners[] = $row['partner_id']
}
?> 
```

*   现在选择不是他自己或已经与以下对象合作的可用用户：

```
<?php
SELECT user_id  FROM users WHERE user_id != USER_ID AND partner_id NOT IN ( implode(', ', $partners) )
?> 
```

任务完成！？

# php - php in function 什么更好：静态变量或数据库查询

> ID：15140390
> 
> 赞同：1
> 
> 时间：2013-02-28T16:17:37.643
> 
> 标签：php, function, variables, optimization, static

我正在使用一个循环函数的 php 程序。

现在这个函数每次被调用时都会运行一堆查询。

我正在考虑设置静态变量，运行每个查询一次，然后将其保存到静态变量。（当然我会检查传递给查询的 id 是否相同。）

我打算重做整个程序，我只想做一些快速的补丁，所以程序不应该那么慢，所以我想知道：

使用静态变量，函数会运行得更快，还是我应该只保留所有查询？

# php - 替换所有不属于 HTML 代码的匹配项

> ID：15140391
> 
> 赞同：0
> 
> 时间：2013-02-28T16:17:48.710
> 
> 标签：php, regex

我有输入，例如：

```
<h2 class="role">He played and an important role</h2> 
```

并且需要替换角色，但不在类中。

棘手的是，它可能是`class="group role something"`左右，所以我基本上只想搜索真实文本而不是 html，但我需要归还所有内容。

我在 PHP 中并没有一个真正好的起点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:26:57.747

最好不要 preg_ 来解析 HTML，使用 dom：

```
$input = '<h2 class="role">He played and an important role</h2>';

$dom = new domDocument('1.0', 'utf-8'); 
$dom->loadHTML($input); 
$dom->preserveWhiteSpace = false; 

$element = $dom->getElementsByTagName('h2'); // <--- change tag name as appropriate
$value = $element->item(0)->nodeValue;

// change $value here... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:50:50.890

最好使用 DOM 来操作 HTML，但这里有一个正则表达式解决方案。

如果`>`出现在`<`字符串前面，则不会进行替换。

```
$input = '<h2 class="role">He played and an important role</h2>';

$input = preg_replace( '/role(?![^<>]*>[^<>]*(?:<|$))/', 'new role', $input );

echo $input;    
// <h2 class="role">He played and an important new role</h2> 
```

# c# - 比较 2 个数据表中行的唯一组合并使用 LINQ 查找它们是否相同

> ID：15140392
> 
> 赞同：1
> 
> 时间：2013-02-28T16:17:48.813
> 
> 标签：c#, .net, linq-to-entities

> 数据集 oDs = new DataSet(); 数据表 odt = new DataTable();
> 
> ```
>  odt.Columns.Add(new DataColumn("FILE_ID", typeof(string)));
>         odt.Columns.Add(new DataColumn("ID", typeof(string)));
>         oDs.Tables.Add(odt);
>         oDs.AcceptChanges();
> 
>         for (int i = 1; i < 3; i++)
>         {
>             DataRow oDr = oDs.Tables[0].NewRow();
>             oDr["FILE_ID"] = "a" + i;
>             oDr["ID"] = "b" + i;
>             oDs.Tables[0].Rows.Add(oDr);
>         }
>         for (int i = 1; i < 3; i++)
>         {
>             DataRow oDr = oDs.Tables[0].NewRow();
>             oDr["FILE_ID"] = "c" + i;
>             oDr["ID"] = "d" + i;
>             oDs.Tables[0].Rows.Add(oDr);
>         }
>         oDs.AcceptChanges();
> 
>         DataTable odt1 = new DataTable();
> 
>         odt1.Columns.Add(new DataColumn("FILE_ID", typeof(string)));
>         odt1.Columns.Add(new DataColumn("ID", typeof(string)));
>         oDs.Tables.Add(odt1);
>         oDs.AcceptChanges();
> 
>         for (int i = 1; i < 3; i++)
>         {
>             DataRow oDr = oDs.Tables[1].NewRow();
>             oDr["FILE_ID"] = "a" + i;
>             oDr["ID"] = "b" + i;
>             oDs.Tables[1].Rows.Add(oDr);
>         }
>         for (int i = 1; i < 3; i++)
>         {
>             DataRow oDr = oDs.Tables[1].NewRow();
>             oDr["FILE_ID"] = "c" + i;
>             oDr["ID"] = "d" + i;
>             oDs.Tables[1].Rows.Add(oDr);
>         }
>         oDs.AcceptChanges(); 
> ```

我需要一个 LINQ 查询，通过它我可以找到行的值（FILE_ID+ID）的组合是否唯一以及它们在两个数据表中是否相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:04:12.717

这将为您提供非唯一值：

```
var notUnique = odt.AsEnumerable()
                            .GroupBy(x => (string) x["FILE_ID"] + x["ID"])
                            .Where(g => g.Count() > 1); 
```

在此处找到在一个表中但不在另一个表中的值 [比较](https://stackoverflow.com/questions/675699/compare-two-lists-for-differences)

您的特殊情况如下所示：

```
 var differentRows =
            odt.AsEnumerable().Where(
                o =>
                odt1.AsEnumerable().All(
                    o1 => ((string) o["FILE_ID"] + o["ID"]) != ((string) o1["FILE_ID"] + o1["ID"])))
                .Union(odt1.AsEnumerable().Where(
                o1 => odt.AsEnumerable().All(o => ((string)o["FILE_ID"] + o["ID"]) != ((string)o1["FILE_ID"] + o1["ID"])))); 
```

请记住，这就像“例外”方法，其中重复记录不会显示为差异。但是由于您正在检查上面的欺骗，我假设不需要进一步检查。

# shell - ZSH完成订单

> ID：15140396
> 
> 赞同：0
> 
> 时间：2013-02-28T16:18:06.000
> 
> 标签：shell, zsh, zsh-completion

我有一个 ZSH 完成器，它提供预期的完成，但按字典顺序提供它们，而不是通过添加它们的顺序`compadd`：

```
_matcher_complete() {
  (git ls-files 2>/dev/null || find .) | /usr/local/bin/matcher -l20 ${words[CURRENT]} | while read line; do
    compadd -U "$line"
  done
  compstate[insert]=menu
}

zle -C matcher-complete complete-word _generic
zstyle ':completion:matcher-complete:*' completer _matcher_complete
zstyle ':completion:matcher-complete:*' menu-select

bindkey '^X^T' matcher-complete 
```

如何按插入顺序订购完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:40:42.313

使用另一个 ZSH 补全脚本作为灵感，我将`_matcher_complete`函数更改为以下内容：

```
_matcher_complete() {
  integer i=1
  (git ls-files 2>/dev/null || find .) | /usr/local/bin/matcher --limit 20 ${words[CURRENT]} | while read line; do
    compadd -U -2 -V $i -- "$line"
    i=$((i+1))
  done
  compstate[insert]=menu
} 
```

请注意与`compadd`. 我没有足够的时间来真正了解每个标志在做什么（请参阅[man zshcompwid](http://linux.die.net/man/1/zshcompwid)），但您似乎需要明确指定顺序（因此在`$i`上面的函数中使用）。

假设您已[`matcher`](https://github.com/burke/matcher)安装，此代码将为您提供模糊路径完成 ala [`Command-T`](https://github.com/wincent/Command-T)/ [`CtrlP`](https://github.com/kien/ctrlp.vim)。

# c# - 在连续大写字母序列中的最后一个之前添加一个空格的正则表达式

> ID：15140400
> 
> 赞同：1
> 
> 时间：2013-02-28T16:18:14.283
> 
> 标签：c#, regex

在花了太多时间试图弄清楚之后已经放弃了这个，并认为我会看看其他人是否想要一试！

我需要一个正则表达式，它将在最后一个连续大写字母之前插入一个空格，其中有两个以上连续的大写字母。

例如：

```
A = A
AB = AB
ABC = AB C
ABCD = ABC D
abCdefGHijkLMNop = abCdefGHijkLM Nop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:21:23.383

此正则表达式将分组：

```
([A-Z]{2,})([A-Z]+) 
```

那么你只需要输出第 1 组，一个空格，第 2 组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:24:30.707

```
string str = "ABC";
str = Regex.Replace(str, @"([A-Z]{2,})([A-Z])", "$1 $2"); 

Console.WriteLine(str);    // "AB C" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:26:57.933

替代品

```
string output=Regex.Replace(input, @"(?<=[A-Z]{2})(?=[A-Z][^A-Z]|[A-Z]$)", " "); 
```

用空格“替换”链中最后两个大写字母之间的零长度点，即插入空格。

# python - 分析、检测和改进分配性能？

> ID：15140401
> 
> 赞同：2
> 
> 时间：2013-02-28T16:18:13.667
> 
> 标签：python, profiling

我需要分析一个脚本文件。我装饰了有问题的函数`@profile`并用于`kernprof.py -l -v scriptfile.py`运行分析器，它给了我下面列出的统计信息：

分配`_dict[date_kw][objekt_id]['subs_kaa']=item[kaa_subs]`需要 2.1µs，但被调用了大约 800 万次（这只是一小部分，最终有大约 6400 万次），并且脚本有更多的这些分配。

目标结构是一个`dict(dict(dict(interger)))`.

是否有任何选项可以加快速度，即通过不同的方式复制值？

```
Line# Hits    TimePerHit % Time Line Contents
108   7977576 16362872   2.1    6.3  _dict[date_kw][objekt_id]['subs_kaa']=item[kaa_subs]
109   7977576 16251240   2.0    6.3  _dict[date_kw][objekt_id]['subs_kad']=item[kad_subs]
110   7977576 15967840   2.0    6.1  _dict[date_kw][objekt_id]['subs_kip']=item[kip_subs] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:23:32.127

您可以尝试用浅结构替换深层 dict 结构：

```
_dict[date_kw][objekt_id]['subs_kaa']=item[kaa_subs]  =>

_dict[ ( date_kw, objekt_id, 'subs_kaa' ) ]=item[kaa_subs] 
```

# html - 容器中的等间距div

> ID：15140402
> 
> 赞同：3
> 
> 时间：2013-02-28T16:18:16.803
> 
> 标签：html, css, angularjs

这是我的例子：http: [//jsfiddle.net/rtCP3/62/](http://jsfiddle.net/rtCP3/62/)

我有 3 个（或更多！） div 我想在一个容器中平均分配空间。当使用带有 ng-repeat 的角度时，样式不会被拾取。当我对完全相同的元素进行硬编码时，它工作得很好。

角度输出：

```
<div class="container ng-scope" ng-controller="ParentCtrl">
     <!-- ngRepeat: item in list -->
     <div class="box ng-scope ng-binding" data-ng-repeat="item in list">item1</div>
     <div class="box ng-scope ng-binding" data-ng-repeat="item in list">item2</div>
     <div class="box ng-scope ng-binding" data-ng-repeat="item in list">item3</div>
     <div class="box ng-scope ng-binding" data-ng-repeat="item in list">item4</div>
     <span class="stretch"></span>
</div> 
```

硬编码：

```
<div class="container">
    <div class="box">Item 1</div>
    <div class="box">Item 2</div>
    <div class="box">Item 3</div>
    <div class="box">Item 4</div>
    <span class="stretch"></span>
</div> 
```

我基于这个stackoverflow问题：[流体宽度与等距DIV](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:46:43.783

这行得通。我不知道为什么，但它的空间是一样的：

```
 <div class="container" ng-controller="ParentCtrl">
     <span data-ng-repeat="item in list">
         <div class="box">{{ item.name }}</div>
     </span>
     <span class="stretch"></span>
 </div> 
```

也许其他人可以解释为什么会这样，但是在你的小提琴中重复 span 元素但里面有 box 类使得两个实现看起来一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:44:13.497

您引用的 SO 问题中的评论说

> 我花了 3 小时才发现在 html 中的每个框之间应该有空格。“对齐”扩展元素之间的空间，如果您的内容是`<div/><div/><div/>`它不起作用。你需要有`<div/> <div/> <div/>`.

我相信 ng-repeat 不会在它的输出之间放置任何空格，所以所有的 div 都是相互对立的，从而导致了问题。

您可以创建自己的类似 ng-repeat 的指令来添加空格。

# ios - 尝试在 cellForRowAtIndexPath 中设置单元格的高度，在 heightForRowAtIndexPath 之后

> ID：15140405
> 
> 赞同：1
> 
> 时间：2013-02-28T16:18:27.380
> 
> 标签：ios, objective-c, uitableview, heightforrowatindexpath

由于`heightForRowAtIndexPath`之前调用过`cellForRowAtIndexPath`，我假设如果我想从内部修改高度`cellForRowAtIndexPath`，我可以这样做。好像我做不到。我已经通过测试`NSLog`，如果我更改`cell.frame.size.height`，更改会正确存储在其中，但单元格本身不会采用新的大小（它使用的是我在 中设置的那个`heightForRowAtIndexPath`）。

是否有另一种方法可以调整在某个时间点调用的单元格高度`cellForRowAtIndexPath`？如果没有，还有其他方法可以解决这个问题吗？我需要使用`cellForRowAtIndexPath`，因为我正在动态决定是否依次将图像随机添加到每个单元格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:32:36.007

`UITableViewDelegate heightForRowAtIndexPath`并且`UITableView rowHeight`是指定单元格高度的唯一机制。表格视图本身正在根据这些调整单元格的大小；你不能自己设置你的细胞框架并期望它工作。

您可以做的最好的事情是能够在创建单元之前提前计算您的单元高度。我经常会定义一个`+ (CGFloat) cellHeightWithDatum: (id) datum forWidth: (CGFloat) tableWidth`方法来调用我的单元格类`heightForRowAtIndexPath`。这里的基准是驱动单元格内容的模型。然后，此方法查看模型并计算出细胞需要多高。

如果您在创建单元格后绝对需要更改单元格的高度，您可以通过要求 tableview 重新加载单元格来完成此操作，或者在不调用 reloadData 的情况下刷新整个表格。这个技巧是通过以下方式完成的：

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

要重新加载单个单元格： `UITableView reloadRowsAtIndexPaths:withRowAnimation:`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:24:19.433

您应该将随机决定添加图像的代码放入您的`heightForRowAtIndexPath`方法中。

使用 a`NSMutableDictionary`来跟踪`NSIndexPath`使用图像的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:36:59.727

您需要跟踪需要扩展的索引。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    if([self shouldBeExpanded:indexPath.row]) { //method that checks if this cell should be expanded. You'll need to check the array if it contains the row.
        return kCellHeightExpanded;
    }

    return kCellNormalHeight;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

     //set cell to be expanded
     [self expandCellAt:indexPath.row]; //method that sets which cell is expanded. You'll need to implement this yourself. Use an array to track which row should be expanded

     //this causes heightForRowAtIndexPath: to be called again
     [tableView beginUpdates];
     [tableView endUpdates];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:26:49.570

您应该在 cellForRowAtIndexPath 之前的某个时间随机决定，然后在每个 indexPath 的 dataSource 中的数据结构中存储一个标志，以确定那里是否会有图像。如果决定是否存在图像的工作成本低廉，您可以在 heightForRowAtIndexPath 中执行此操作。像这样的东西：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    BOOL showingAnImage = arc4random() % 2;
    // self.imageIndexPaths is some data structure that lets you associate a value to an index path
    self.imageIndexPaths[indexPath] = @(showingAnImage);
    if (showingAnImage){
        // return height of a cell with an image
    } else {
        // return height of a cell without an image
    }
}

- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *identifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier forIndexPath:indexPath];
    if ([self.imageIndexPaths[indexPath] boolValue]){
        // Configure for image
    } else {
        // Configre without image
    }
    return cell;
} 
```

在 cellForRowAtIndexPath: 中更改单元格的大小将不起作用。

# bash - bash 中的信号处理程序似乎不起作用

> ID：15140415
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:18:45.717
> 
> 标签：bash, signals

在 window1 中运行以下脚本

```
#!/bin/bash

function handler
{
  echo "the time is $(date)" >> /tmp/zz
}

rm /tmp/zz
trap handler USR1
echo "This is $$"
cat 
```

在window2中，我发送一个带有“kill -USR1 PID_OF_WINDOW1_SCRIPT”的信号

发送`/tmp/zz`信号后文件不存在

我很确定这在过去对我有用 知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:14:24.223

在完成之前，shell 不能随意调用您的处理程序`cat`。在 end 中键入一个文件结束字符 ( `Control``d`) `cat`，这让 shell 运行您的处理程序并退出。

# browser - 用户代理字符串：我应该捕获什么？

> ID：15140416
> 
> 赞同：1
> 
> 时间：2013-02-28T16:18:46.910
> 
> 标签：browser, user-agent

我有一个项目，我正在解析 Tomcat 日志以获取有用信息。起初，该程序非常简单，只需一个 grep 即可轻松完成。然而，一旦意识到这些信息可能有用，我就被要求进行越来越复杂的解析。

到了我想将日志条目的通用信息存储在数据库中的地步，然后进行各种查询以获取自定义报告。这些信息中的大部分都相当直接且易于解析。

*   有IP地址和代理地址。例如，我现在有一个包含 10,000 个 IP 地址的列表，这些 IP 地址来自我们聘请来测试我们的应用程序安全性的公司。因此，我们希望在任何报告中忽略来自这些 IP 地址的条目。
*   有会话 ID：我需要一份报告，其中用户在页面“B”之前转到页面“A”，但不是在访问页面“C”之后。会话 ID 允许我跟踪此行为。
*   有时间和日期。
*   有 HTTP 响应代码。
*   这是否是 GET 或 POST 操作。
*   有网页本身（以及通过 GET 传递的可能值）。

而且，最后是用户代理混乱......我的意思是用户代理字符串。

用户代理字符串似乎有一个相当松散的布局。例如，其中 99%`Mozilla/4.0`都是从浏览器开始的，而这些浏览器与 Mozilla、Netscape 或 Firefox 无关，甚至不使用 Gecko 布局引擎。

不幸的是，用户代理字符串在我们的报告中变得相当重要。例如，我们需要知道有多少人在使用 Safari 或使用任何移动浏览器，或者使用基于 Linux 的系统、Windows 和 iOS。

最大的问题是我不知道将来可能会要求什么，所以我不能 100% 确定哪些信息有用，哪些信息没用（看起来我们 99.7% 的用户正在使用 Mozilla 4.0 浏览器！）。

那么，您将如何解析用户代理字符串并提取我可以生成报告的**有用信息？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:27:24.513

我会开始另一个表： UserAgentString, (id, UAS, num_uses, mobile, );

解析日志时，将每个日志条目的 UserAgentString.id 存储在表中，而不是原始用户代理字符串，并将新字符串添加到 UserAgentString 表中。

每次找到重复项时，增加 num_uses 列。如果（何时）您知道它代表移动设备，请设置移动列。添加其他列并设置它们以表示 uas 的其他属性，因为您发现它们很有用。

# php - php 从某个推荐域重定向

> ID：15140417
> 
> 赞同：-2
> 
> 时间：2013-02-28T16:18:48.983
> 
> 标签：php

在 stackereurope.com 上是欧洲的联系方式。

现在英国有一个名为 stackereurope-uk.com 的新域。

它应该仅显示具有不同联系方式的相同网站。

我正在考虑这个解决方案：在英国域上，我放置了一个打开原始网站的 iframe。

在我放置的原始网站上（在联系页面上）如果推荐是 stackereurope-uk.com 重定向到 stackereurope-uk.com/contact/

重定向的代码应该是这样的？

```
<?php
$domain = $_SERVER["HTTP_HOST"];

if (($domain == "stackeurope.com" ||
    $domain == "stackereurope-uk.com") && !$_GET['redirected'])  { 
    header("location: http://stackereurope-uk.com/contact/index.php"); 
}
?> 
```

我尝试了这段代码，但这不起作用。

完成我想做的最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:32:58.987

尝试使用`$_SERVER['SERVER_NAME']`。如果我没记错的话，如果服务器在 80 以外的端口上运行（这在开发/内部网机器上可能很常见），那么`HTTP_HOST`包含该端口，而`SERVER_NAME`没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T21:51:16.553

如果您希望基于引用域进行重定向，您可能想尝试在[HTTP_REFERER上使用](http://www.php.net/manual/en/reserved.variables.server.php)[parse_url](http://php.net/parse_url)，然后使用主机返回值。

例如：

```
$uri = parse_url($_SERVER['HTTP_REFERER']);
echo $uri['host']; 
```

# jquery - Coldfusion 和 jquery ajax

> ID：15140423
> 
> 赞同：2
> 
> 时间：2013-02-28T16:19:05.700
> 
> 标签：jquery, ajax, coldfusion

我的 cfc 正在工作，因为我可以调用它并获取数据的 json 字符串，但是，我的 jquery ajax 调用给了我一个错误“SyntaxError: JSON.parse: unexpected end of data”。

阿贾克斯调用：

```
$.ajax({
    type: "get",
    url: "/surveymanagement/admin/client.cfc",
    dataType: "json",
    data: {
        method: "GetClientsByName",
        name: "im"
    },
    success: function(data){
        $("#here").html(data);
    },
    error: function(a,b,c){
        $("#here").html(a.responseText + c);
    }
}); 
```

当我在另一个 cfm 页面中调用该组件时，我的 cfc 返回字符串：`[{"client_id":58,"client_name":"Aimbridge"},{"client_id":104,"client_name":"IMF"}]`。

我的问题可能是什么？

另外，如果我直接在浏览器中访问我的 cfc，`http://domain.com/filepath/client.cfc?method=GetClientsByName&name=im`我不会收到错误，但它只是一个白屏。我不知道当我直接进入它时我应该看到什么。

为了所有信息，这里是client.cfc：

```
<cfcomponent>
<cfsetting showdebugoutput="no">
<cffunction name="GetClientsByName"
    access="remote"
    returntype="string" 
    hint="get clients from search term">

    <cfargument name="name" type="string" required="yes">

    <cfset var util = createObject("component", "/surveymanagement/JSONUtil")>
    <cfset var results = arrayNew(1)>
    <cfset var elem = "">

    <cfquery name="GetClientsByName" datasource="#application.dsn#">
        SELECT client_id, client_name
        FROM Clients
        WHERE client_name LIKE <cfqueryparam cfsqltype="cf_sql_varchar" value="%#arguments.name#%">
    </cfquery>

    <cfloop query="GetClientsByName">
        <cfset elem = structNew()>
        <cfset elem["client_id"] = GetClientsByName.client_id>
        <cfset elem["client_name"] = GetClientsByName.client_name>
        <cfset arrayAppend(results, elem)>
    </cfloop>

    <cfcontent type="application/json" reset="true">
    <cfreturn util.serializeJSON(results)>
</cffunction>
</cfcomponent> 
```

注意：我正在使用coldfusion7所以我不能使用`returnformat='json'`

application.cfc 也许这里出了点问题：

```
<cfcomponent 
displayname="Application"
output="true"
hint="Handle the Application">

<cfset THIS.Name = "SurveyManagement" />
<cfset THIS.ApplicationTimeout = CreateTimeSpan(0,1,0,0) />
<cfset THIS.SessionManagement = true />
<cfset THIS.SetClientCookies = false />

<cffunction
    name="OnApplicationStart"
    access="public"
    returntype="boolean"
    output="false"
    hint="Fires when the application is first created.">

    <cfreturn true />
</cffunction>

<cffunction
    name="OnSessionStart"
    access="public"
    returntype="void"
    output="false"
    hint="Fires when the session is first created.">

    <cfreturn />
</cffunction>

<cffunction
    name="OnRequestStart"
    access="public"
    returntype="boolean"
    output="false"
    hint="Fires at first part of page processing.">

    <cfargument
        name="TargetPage"
        type="string"
        required="true"
        />
    <cfparam name="variables.this_query_string" default="">
    <cfif cgi.QUERY_STRING neq "">
        <cfset variables.this_query_string="?#cgi.QUERY_STRING#">
    </cfif>
    <cfparam name="server.ThisServer" default="www4.mydomain.com">
    <cfif cgi.SERVER_PORT neq "443" or cgi.HTTP_HOST eq "www.mydomain.com">
        <cflocation url="https://#server.ThisServer##cgi.PATH_INFO##variables.this_query_string#" addtoken="no">
    </cfif>     

    <cfparam name="form.fieldnames" default="">
    <cfloop list="#form.fieldnames#" index="i">
        <cfif Evaluate(i) neq "">
            <cfset form_value_temp=Evaluate(i)>
            <cfset form_value_temp=replace(form_value_temp,"<", "&lt;", "all")>
            <cfset form_value_temp=replace(form_value_temp,">", "&gt;", "all")>
            <cfset "form.#i#"=form_value_temp>
        </cfif>
    </cfloop>    
    <cfreturn true />
</cffunction>

<cffunction
    name="OnRequest"
    access="public"
    returntype="void"
    output="true"
    hint="Fires after pre page processing is complete.">

    <cfargument
        name="TargetPage"
        type="string"
        required="true"
        />

    <cfset application.dsn="SurveyManagement">
    <cfset application.title="Survey Management Site">
    <cfset application.directory="surveymanagement">
    <cfset application.cfc_data="surveymanagement">

    <cfinclude template="#ARGUMENTS.TargetPage#" />

    <cfreturn />
</cffunction>

<cffunction
    name="OnRequestEnd"
    access="public"
    returntype="void"
    output="true"
    hint="Fires after the page processing is complete.">

    <cfreturn />
</cffunction>

<cffunction
    name="OnSessionEnd"
    access="public"
    returntype="void"
    output="false"
    hint="Fires when the session is terminated.">

    <cfargument
        name="SessionScope"
        type="struct"
        required="true"
        />

    <cfargument
        name="ApplicationScope"
        type="struct"
        required="false"
        default="#StructNew()#"
        /> 

    <cfreturn />
</cffunction>

<cffunction
    name="OnApplicationEnd"
    access="public"
    returntype="void"
    output="false"
    hint="Fires when the application is terminated.">

    <cfargument
        name="ApplicationScope"
        type="struct"
        required="false"
        default="#StructNew()#"
        />

    <cfreturn />
</cffunction>

<cffunction
    name="OnError"
    access="public"
    returntype="void"
    output="true"
    hint="Fires when an exception occures that is not caught by a try/catch.">

    <cfargument name="Except" required=true/>
    <p>AN UNEXPECTED ERROR HAS OCCURRED</p>
    <p>Please consult your suggested technical support contact for assistance.</p>
    <cfif findnocase("ip address here",cgi.REMOTE_ADDR) or findnocase("ip address here",cgi.REMOTE_ADDR)>
        <cfdump var="#Except.RootCause#">
    </cfif>
    <cfreturn />
</cffunction> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:39:40.667

我不确定这是否会有所帮助，但我正在处理 angularjs 的数据并正在查看[这篇文章](http://www.aliaspooryorik.com/blog/index.cfm/e/posts.details/post/json-jquery-and-coldfusion-56)：Talks a bit on using CFC's w/out the need to create the JSON (还演示了 CFMX 如何处理 json来电）。

> 在 ColdFusion MX 中，一个名为直接返回 wddx 的 cfc。要停止这种情况，请直接输出而不是 [使用] cfreturn 并附加 cfabort 即：
> 
> ```
> <cfcontent reset="yes" /><cfoutput>#Trim(encode(qryExample))#</cfoutput><cfabort /> 
> ```

# javascript - 使元素自动适应父级的宽度，没有表格/javascript

> ID：15140424
> 
> 赞同：10
> 
> 时间：2013-02-28T16:19:05.673
> 
> 标签：javascript, html, css, animation, css-tables

是否可以在不使用表格或 Javascript 的情况下创建一个包含多个框的 div，这些框自动适合父级的大小（均匀分布）？我意识到这是可能的，`table-layout:fixed;`但我试图为它制作动画，但它似乎效果不佳。下图是我的意思的一个例子：

![显示自动调整框的 gif](../Images/9e9997d5ba80ac643133ac670bbf2091.png "显示自动调整框的 gif")

我正在尝试增加 div 内一个框的宽度，然后将其余框自动调整大小，以便所有框均匀地放入 div。我需要它是动画的，而不仅仅是即时的，在这种情况下我只会使用一张桌子。我还使用 Javascript 对其进行了实验，用 a 对其进行了动画处理， `-webkit-transition`但这并没有很好地进行动画处理。盒子没有扩大/缩小尺寸，而是从 0px 的宽度开始，然后拉伸到给定的尺寸。**（这是**使用带有`table-layout:fixed`.

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:51:03.170

使用固定数量的子项，可以不用表格（尽管您需要表格显示），这是我使用的 CSS：

```
.parent{width:400px;height:100px;display:table}

.parent div{display:table-cell;border:1px solid #000;
    -webkit-transition:width 1s;width:20%}

.parent:hover div{width:10%}
.parent div:hover{width:60%} 
```

您需要手动计算百分比以获得最佳动画效果。演示：

[http://jsbin.com/ubucod/1](http://jsbin.com/ubucod/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:37:26.100

如果您希望这些框在单击/触摸时产生动画，那么您将需要 Javascript。

如果您希望框仅在翻转时设置动画，则可以将 css 应用于父元素以将所有框默认设置为相同的百分比并在翻转时更改它们。

但是，此解决方案仅适用于固定数量的盒子。

```
 #Container .box{
        width: 20%;
        transition: width 0.2s;            
    }
    #Container:hover .box{
        width: 10%;
    }
    .box:hover{
        width: 60%;
    } 
```

我没有测试过它，但它*应该可以*工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:01:11.387

HTML：

```
<div class="pushercolumn"></div>
<div class="pushedcolumn">
    <div class="unit"></div>
    <div class="unit"></div>
    <div class="unit"></div>
    <div class="unit"></div>
</div> 
```

CSS：

```
.pushercolumn {
    float: left; 
    width: 30%; /*or whichever you want*/
}

.pushedcolumn {
    overflow: hidden; /* guarantees the .pushedcolumn is pushed horizontally by the floats */
    font-size: 0; /* removes white-space. choose your preferred method*/
}

.unit {
    display: inline-block;
    width: 25%; /* assuming there are 4 boxes in the right column. this is the only variable you have to update based on the circumstances */
} 
```

[http://jsfiddle.net/joplomacedo/xYAdR/](http://jsfiddle.net/joplomacedo/xYAdR/)**

# c++ - 如何在不复制的情况下传输列表中地图的内容

> ID：15140425
> 
> 赞同：1
> 
> 时间：2013-02-28T16:19:08.287
> 
> 标签：c++, stl

我有一个相当大的`map<double, vector<double>>`说法。`myMap`我想把 的内容`myMap[.].second`放在`list<vector<double> >`or`vector<vector<double> >`中。是否可以在不显式复制每个`vector`元素的情况下做到这一点？我希望它是可行的`iterators`

```
#include <iostream>
#include <vector>
#include <map>
using namespace std;

int main()
{
    double v_value[] = {1.1,2.4};
    vector<double> v(v_value, v_value + sizeof(v_value)/sizeof(double));

    map<double,vector<double> > myMap;
    myMap[10.01] = v;
    myMap[14.62] = v;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:20:48.553

在 c++03 中，您可以`std::vector::swap`将地图中的每个向量用于列表中的空向量。在 C++11 中，您可以从一个移动到另一个。两者都避免复制，但显然修改了源映射。

```
std::map<double, vector<double> > m = ....;
std::list<std::vector<double> > l(size_of_map); // list full of empty vectors
// iterate over map
typedef std::map<double, vector<double>>::iterator map_iter;
size_t list_counter = 0;
for(map_iter it = m.begin(); it != m.end(); ++it) {
    l[list_counter].swap(it->second);
    ++list_counter;
} 
```

在 C++11 中：

```
std::map<double, vector<double>> m = ....;
std::list<std::vector<double>> l; // empty list

for(auto it = m.begin(); it != m.end(); ++it) {
    l.push_back(std::move(it->second));
} 
```

# highcharts - Highcharts：X 和 Y 轴在散点图中交叉为零

> ID：15140426
> 
> 赞同：6
> 
> 时间：2013-02-28T16:19:08.340
> 
> 标签：highcharts

在 highcharts 中，我想绘制一个散点图/气泡图，其中 x 值范围从 -50 到 +50，y 值范围从 -100 到 +100。有没有办法绘制 x 和 y 轴，使它们在图表中心交叉为零？

我尝试在轴中使用“偏移”参数，它确实移动了轴，例如[http://bit.ly/Xd9Z51](http://bit.ly/Xd9Z51)但这种方法存在以下问题：

1.  您不能动态设置偏移参数，因此如果系列更新并更改最小/最大 x/y 值，则轴不再交叉为零。
2.  如果缩放，轴不再交叉为零。
3.  考虑到 div 大小、边距、标题等，很难以像素为单位计算偏移量。
4.  调整包含 div 的大小会导致所需的轴偏移位置发生变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:29:27.403

**Highcharts v7.2+ 解决方案**

强制一些选项以防止图表为轴保留空间，然后使用插件：

```
(function(H) {
  H.addEvent(
    H.Axis,
    'init',
    function(e) {
      if (H.defined(e.userOptions.matchAxis)) {
        H.merge(
          true,
          e.userOptions, {
            labels: {
              reserveSpace: false
            },
            title: {
              reserveSpace: false
            },
            offset: -1,
            opposite: this.isXAxis ? true : false
          }
        );
      }
    }
  );

  H.addEvent(
    H.Chart,
    'render',
    function() {
      let chart = this;

      chart.axes.forEach(function(axis) {

        let newOffset,
          matchAxis = axis.options.matchAxis,
          translate = axis.horiz ? 'translateY' : 'translateX',
          newTranslation = {},
          offset = axis.options.offset || 0,
          crisp = axis.options.lineWidth % 2,
          otherAxes = axis.isXAxis ? chart.yAxis : chart.xAxis;

        if (H.defined(matchAxis)) {
          newOffset = otherAxes[matchAxis.index || 0].toPixels(matchAxis.value || 0, true);

          newTranslation[translate] = newOffset + offset + crisp;

          if (axis.axisGroup) {
            axis.axisGroup.animate(newTranslation);
          }
          if (axis.labelGroup) {
            axis.labelGroup.animate(newTranslation);
          }
        }
      });
    }
  );
})(Highcharts); 
```

演示：[https ://jsfiddle.net/BlackLabel/2k0bw6q3/](https://jsfiddle.net/BlackLabel/2k0bw6q3/)

插件的API：

*   `x/yAxis.matchAxis.value`- 应从相反轴选取的设置值。默认为 0。
*   `x/yAxis.matchAxis.index`- 当使用多个轴时，设置索引应该使用哪个相反的轴进行计算。默认为 0。

设置例如`yAxis.matchAxis = {}`完全没问题：[https](https://jsfiddle.net/BlackLabel/qwyczoxb/) ://jsfiddle.net/BlackLabel/qwyczoxb/ （因为默认）

强制选项列表（在插件中）：

*   `x/yAxis.labels.reserveSpace`假的
*   `x/yAxis.title.reserveSpace`假的
*   `x/yAxis.offset`为负值（例如 -50）
*   `xAxis.opposite`设置为真
*   `yAxis.opposite`设置为假

**注意：**仅使用**v7.2.0测试**

**旧解决方案 (v3+)**

目前唯一的解决方案是使用偏移参数。但是，从 Highcharts 3.0 开始，您可以自由控制该属性和更新轴：

```
chart.yAxis[index].update( options ); 
```

其中 options 是具有 yAxis 选项的对象，包括偏移量。要获取像素位置，您可以使用内部函数`chart.xAxis[index].translate(value)`（有点骇人听闻，但有效）。因此，当两者结合时，请参见示例：http: [//jsfiddle.net/UGpPV/6/](http://jsfiddle.net/UGpPV/6/)

# c# - 如何自定义 JSON 序列化？

> ID：15140427
> 
> 赞同：6
> 
> 时间：2013-02-28T16:19:12.117
> 
> 标签：c#, json, serialization, asp.net-mvc-4

目前我有一个看起来像这样的类：

```
public class TestSerilizer
{
    public int IntValue;
    public DateTime DTValue;
} 
```

和一个控制器，该控制器将该类序列化为 JSON，如下所示：

```
public ActionResult TestJson()
{
    TestSerilizer testDT = new TestSerilizer();
    return Json(testDT);
} 
```

众所周知，这会产生一个看起来有点像`/Date(123456)/`JSON 的日期，这是不太理想的。出于我的目的，我希望能够添加一个属性，该属性将以对我的观点有意义的方式格式化我的日期。理想情况下，我想将我的视图模型更改为如下所示：

```
public class TestSerilizer
{
    public int IntValue;
    [JSONDateFormatter("hh:mm tt")]
    public DateTime DTValue;
} 
```

这将生成带有格式化日期的 JSON 数据。有没有办法劫持 JSON 序列化来做类似的事情？应该注意的是，这是一个大型代码库，它同时具有这种隐式 JSON 序列化和`JavaScriptSerializer`类的显式使用，因此我更喜欢一种适用于这两种情况的方法，但我知道这可能是不可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T16:28:54.657

这通常是我管理对象日期序列化的方式。请注意，这使用了 dataMember 属性，因为它需要被二进制和 json 序列化：

```
[DataContract]
[Serializable]
public class YourClass
{
        [DataMember]
        private long timeStampLong;

        [IgnoreDataMember]
        public DateTime TimeStamp
        {
            get { return new DateTime(timeStampLong); }
            set { timeStampLong = value.Ticks; }
        }
} 
```

现在这可能不会使日期时间在 json 中可读，但它会使其保持一致。不同的 json 库处理序列化日期时间的方式不同，因此您希望能够强制它们都以相同的方式序列化。

编辑：请注意，这不是 C# 属性意义上的第二个属性，而只是该属性的基础字段。您可以将基础字段改为字符串，并且该基础字段永远不会暴露在对象之外。因为`IgnoreDataMember`你也仍然只序列化一个值。

Edit2：当有人需要实现它时，添加了类声明以获得更完整的答案。

编辑：对于更完整的示例，我想我会包括我使用过的另一个选项（以字符串作为支持字段）

```
 /// <summary>
    /// Representations of the TimeStamp used for serialization
    /// </summary>
    [DataMember(Name = "TimeStamp")]
    private String timeStamp;

    /// <summary>
    /// timestamp when the request is sent
    /// </summary>
    [IgnoreDataMember]
    public DateTime TimeStamp
    {
        get { return DateTime.Parse(timeStamp, null, DateTimeStyles.RoundtripKind); }
        set { timeStamp = value.ToUniversalTime().ToString("o"); }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:14:40.187

正如@jzworkman 指出的那样，该响应中的技术大纲是如何控制内部 DateTime 值如何被序列化。我坚持始终使用基于字符串的格式，该格式几乎可以被其他任何东西可靠地解析。如果可能的话，我坚持使用可以正确处理时区映射的 ISO 8601 格式。在 C# 中，您可以使用 myDateTimeValue.ToString("o") 获取 ISO 8601 中 DateTime 的字符串。

[维基百科关于 ISO 8601 的文章](http://en.wikipedia.org/wiki/ISO_8601)

# c++ - 向量的 OpenCV 向量到 cv::Mat

> ID：15140435
> 
> 赞同：3
> 
> 时间：2013-02-28T16:19:33.947
> 
> 标签：c++, opencv, vector, mat

我在 n 行和 m cols 的结构中有某些值`std::vector<std::vector<double>>`，我想将其转换为等效的 cv::Mat 对象。这是我一直在使用的代码，但出现错误：

dctm 是一个本地参数，定义为： `std::vector<std::vector<double>>`

```
cv::Mat dctmat = cvCreateMat(dctm.size(), dctm[0].size(), CV_16SC1);
for (size_t i = 0; i < dctm.size(); i++) {
    for (size_t j = 0; j < dctm[i].size(); j++) {
        dctmat.at<double>(i, j) = dctm[i][j];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:24:31.260

`dctmat`有一种类型`CV_16SC1`，表示有符号短矩阵。但是您尝试访问它`dctmat.at<double>(i, j)`是不连贯的。将您的矩阵定义为`CV_64FC1`或访问它`dctmat.at<short>(i, j)`（第一个解决方案更好，因为您有一个向量`double`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-12T22:53:19.923

这是我的转换例程的模板版本

例行公事

```
template<typename _Tp> static  cv::Mat toMat(const vector<vector<_Tp> > vecIn) {
    cv::Mat_<_Tp> matOut(vecIn.size(), vecIn.at(0).size());
    for (int i = 0; i < matOut.rows; ++i) {
        for (int j = 0; j < matOut.cols; ++j) {
            matOut(i, j) = vecIn.at(i).at(j);
        }
    }
    return matOut;
}
template<typename _Tp> static  vector<vector<_Tp> > toVec(const cv::Mat_<_Tp> matIn) {
    vector<vector<_Tp> > vecOut(matIn.rows);
    for (int i = 0; i < matIn.rows; ++i) {
        vecOut[i].resize(matIn.cols);
        for (int j = 0; j < matIn.cols; ++j) {
            vecOut[i][j] =  matIn.at<_Tp>(i, j);
        }
    }
    return vecOut;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-08-28T23:12:43.183

在 Opencv 文档中，您可以找到以下内容[：](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-mat)

```
Mat::Mat(int rows, int cols, int type, void* data, size_t step=AUTO_STEP)
Mat::Mat(Size size, int type, void* data, size_t step=AUTO_STEP)
... 
```

然后，您可以像这样使用：

```
Mat dctmat(dctm.size(), dctm[0].size(), CV_16SC1, dctm.data()); 
```

# jquery - 为多个元素动态添加背景图片

> ID：15140436
> 
> 赞同：0
> 
> 时间：2013-02-28T16:19:37.067
> 
> 标签：jquery, css

我有一个要显示的图像列表。图像具有不同的宽度和高度，我想将它们全部放入一个 li 元素中，但是 li 元素对于每个子图像应该具有相同的尺寸。

解决这个问题的唯一方法（以便图像适合标准尺寸的 li 框）是将图像指定为 li 元素的背景：

```
<ul>
      <li>
        <div></div>
        <span>Image1</span>
      </li>
      <li>
        <div></div>
        <span>Image2</span>
      </li> 
      <li>
        <div></div>
        <span>Image3</span>
      </li> 
      <li>
        <div></div>
        <span>Image4</span>
      </li>   
    ...and many more  
</ul> 
```

CSS：

```
ul li {       
        width: 75px;  
        height: 75px;
      }

ul li div{
        background-image: url('genereic path calculated in jquery');
        background-size: contain;  /*IMPORTANT THIS!*/
      } 
```

所有图像都应调整为 75 x 75...以便图像适合框 - 这就是我使用背景图像属性的原因...

基本上，我可以为每个图像执行此操作，但我有很多图像......所以我需要为每个列表项子 div 指定背景图像......

如何为每个新的 li>div 动态添加此背景图像？

例子：

```
$(function() {

    $( "li div" ).each(function() {
      $(this).css('background-image','url(images/' + 'imagetitle)');
  });
}); 
```

我怎样才能使这个动态，而不必为每个 div 指定背景图像......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:47:31.440

**PHP代码：**

```
<?php

function createGallery() {
if ($pwd = opendir('./images/')) {

    /* Loop over the directory. */
    while (false !== ($file = readdir($pwd))) {
        $file_name = pathinfo($file);
        $fn = $file_name['filename'];

            if ($file_name['extension'] == "png") {

                doCSS($fn, $file);

            }

    }
    closedir($pwd);
}
}

function doCSS($fn, $image) {
$cssFile = "./gallery.css";

if (file_exists($cssFile)) {
    // Attempt to open for append
    $fh = fopen($cssFile, "a") or die("Error opening file.");
} else {
    // Attempt to create
    $fh = fopen($cssFile, "w") or die("Error opening file.");
}

        $string = "#".$fn." { background: url(./images/".$image."); } ";
    // Write to file
    fwrite($fh, $string);

fclose($fh);    
}

createGallery();

?> 
```

**输出到 gallery.css**

```
#photo1 { background: url(./images/photo1.png); } #photo3 { background: url(./images/photo3.png); } #photo3menu_OLD { background: url(./images/photo3menu_OLD.png); } #photo1small { background: url(./images/photo1small.png); } #photo3menu { background: url(./images/photo3menu.png); } #photo3small { background: url(./images/photo3small.png); } #photo4 { background: url(./images/photo4.png); } #photo4details { background: url(./images/photo4details.png); } 
```

就个人而言，我会编写一个用于定位 div 和修复尺寸的类，并将其包含在您的主页 CSS 文件中，如下所示： -

```
.dimensions {
    position: relative;
    width: 75px; height: 75px; display: block;
} 
```

我也将使用 PHP 在页面上创建标记，而不是使用 JS，因为无论如何您都在遍历目录以创建 CSS 文件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:45:09.353

就个人而言，我会将 CSS 放在 CSS 文件中。

```
.addBackground {
   background: url(./path_to_my_image.png);
} 
```

然后，无论如何你都在使用 jQuery..

```
$("span").each(function() {
    $(this).addClass("addBackground");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:32:58.413

首先，您将拥有包含图像的任何数据源，对吗？从中创建一个数组。

```
var liArray = { 'url1', 'url2', 'url3' }; 
```

然后尝试for循环

```
for(i=0, i<liArray.length,i=i+1)
{
var odv = $.create("li");
odv.css('background-image','url(images/' + liArray[i])');
odv.appendTo($(ul));
} 
```

这将动态创建您的图像。这是你的问题吗？

您必须注意您的绝对图像路径。我认为很明显，如果您在数组中传递绝对网址，则在括号内不需要图像文件夹。

# android - 没有 EasyTracker 的 Google Play 商店活动测量？

> ID：15140438
> 
> 赞同：1
> 
> 时间：2013-02-28T16:19:42.177
> 
> 标签：android, google-analytics

我正在尝试实施 Google Play 商店广告系列测量。 [https://developers.google.com/analytics/devguides/collection/android/v2/campaigns?hl=en#google-play-implement](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns?hl=en#google-play-implement)

在示例中，Google 使用`EasyTracker.getInstance().activityStart(this)`and ...`activityStop(this)`来跟踪`start/stop`活动。

在我的应用程序中，我只使用`Tracker`类，而不是`EasyTracker`发送事件。在这种情况下，我如何跟踪活动开始/停止？Tracker 类没有这个功能，我不明白这些功能实际上是做什么的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T22:25:32.027

哈...刚刚找到[答案...](https://developers.google.com/analytics/devguides/collection/android/v2/screens#manual)

> **手动屏幕测量**
> 
> 您还可以通过调用 sendView() 手动发送屏幕视图。即使您已经在使用 EasyTracker 的自动屏​​幕测量，您也可以手动发送屏幕视图以测量用户对片段或其他可能不是 Activity 的内容的参与度。
> 
> sendView() 通常在 Activity 或 Fragment 的 onStart() 回调中调用，如下例所示：

```
/**
 * Within an Activity or Fragment
 */
@Override
public void onStart() {
  super.onStart();
  ... // Your other onStart() code.
  myTracker.sendView("Home Screen"); // Where myTracker is an instance of Tracker.
} 
```

# c# - 何时在 Visual Studio for SharePoint 解决方案中使用发布配置？

> ID：15140439
> 
> 赞同：1
> 
> 时间：2013-02-28T16:19:45.287
> 
> 标签：c#, visual-studio, sharepoint, configuration

我主要使用 Visual Studio 2010 为 SharePoint 2010 开发 SharePoint 解决方案。常规的 SharePoint 解决方案开发主要输出程序集，这些程序集部署到 GAC 并由其他东西（页面、webpart、控件等）使用。通过谷[歌搜索](https://stackoverflow.com/questions/2446027/c-sharp-debug-vs-release-performance)，我发现发布配置包括 c# 代码优化，不包括调试元数据。所以我认为它只对高负载零件的生产有用。而且它只适用于稳定的代码——我们可以使用调试器连接到生产服务器上发布构建的程序集吗？

所以主要的问题是：何时使用 Debug 或 Release 以及它可以带来哪些好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:41:23.587

您的问题实际上与 SharePoint 无关，因为 SharePoint 和发布/调试版本没有什么特别之处。

这两个选项之间的主要区别是 - 正如您所建议的那样 - 优化已打开，并且在发布模式下**不会发出调试符号。**

如果没有这些调试符号，您将无法在生产站点上调试代码——无论如何您都不想这样做，在生产站点上调试某些东西，对吧？！

最佳实践如下：

*   将调试用于所有开发目的。如果您有分阶段部署（您应该），您应该将调试版本部署到您的集成以及客户测试环境。这样，您始终可以在每个系统上查找错误。
*   将发布模式用于生产目的。对于我们的分阶段部署：仅提供在发布模式下编译的客户程序集。

注意：“优化”代码和非优化代码之间的速度差异大多数时候速度差异可以忽略不计。大多数时候更多的是“你应该这样做”，而不是“如果你不这样做，就会出现问题”。

# c# - 如何从文件中读取 SortedList？

> ID：15140442
> 
> 赞同：1
> 
> 时间：2013-02-28T16:19:59.027
> 
> 标签：c#, collections, .net

I have a SortedList, the key is Contact.name and the value, is an object, Contact. I´m writing this list to a file, with BinaryWriter and I don´t have any trouble but now I want to read this list, and after, look for an specific contact. I don´t know how to do it. I think that I must read the file and after that look for the contact, but how can I fill the SortedList with the binary code saved in the file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:39:10.420

这是一个关于如何从二进制文件读取和写入的快速示例。

```
static void Main(string[] args)
    {

        WriteContacts(new List<Contact>( new []{ new Contact { ID = 1, Name = "Juan", Age = 34 }, new Contact { Name = "Pedro", Age = 23, ID = 2 } }));
        FindContactInFile("Juan");
        FindContactInFile("Mario");
        Console.ReadKey();
    }

    private static void FindContactInFile(string name)
    {
        IFormatter formatter = new BinaryFormatter();

        using (Stream s = new FileStream("contacts.bin", FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            var contacts = (List<Contact>)formatter.Deserialize(s);
            var person  = contacts.Where(x=>x.Name==name).FirstOrDefault();
            if (person != null)
                Console.WriteLine("Persona encontrada: {0}", person.Name);
            else
                Console.WriteLine("{0} no fue encontrado en el archivo.", name);
        }
    }

    private static void WriteContacts(List<Contact> contacts)
    {
        IFormatter formatter = new BinaryFormatter();
        using (Stream s = new FileStream("contacts.bin", FileMode.Create, FileAccess.Write, FileShare.None))
        {
            formatter.Serialize(s, contacts);
        }
    }
}
[Serializable]
class Contact
{
    public int ID { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

那里可以改进许多事情，例如每次搜索某人时不阅读整个文件。或者不立即读取整个文件...无论如何，这里的关键概念是，为了将某些内容存储在二进制文件中，您需要序列化对象。为此，您可以使用 .NET 提供的 BinaryFormatter 之一（正如我在上面所做的那样）并从文件中读取，您只需执行相反的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:29:21.890

听起来像您想要的那样`BinaryReader`，它将从文件输出中提取`BinaryWriter`并反序列化为您的原始类型。

[这是在 msdn 上同时使用两者的一个很好的例子](http://msdn.microsoft.com/en-gb/library/system.io.binaryreader.aspx)

# c - fork()ing - 空闲的孩子

> ID：15140445
> 
> 赞同：0
> 
> 时间：2013-02-28T16:20:13.143
> 
> 标签：c, process, fork

所以我需要迭代 fork() 几次，创建子进程。例如，子进程应该“做很少或不做处理”；

```
while(1)
 sleep(1) 
```

然后父母应该收集孩子的PID并杀死他们（苛刻，我知道！）。

然而，我现在这样做的方式是多次执行“父”块中的代码，但我只需要它执行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:00:54.600

这是一个例子；您需要将 pid 存储在表中（此处为 p[]）。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>

#define NSUB 10

int main ()
{
    int i, n = NSUB, p[NSUB], q;

    for (i = 0; i < n; i++) {
        printf ("Creating subprocess %d ...\n", i);
        p[i] = fork();
        if (p[i] < 0) { perror ("fork"); exit (1); }

        if (p[i] == 0) {  /* subprocess */
            printf ("Subprocess %d : PID %d\n", i, (int) getpid());
            while (1) pause ();
            exit (0);
        }
    }

    sleep(2);
    for (i = 0; i < n; i++) {
        printf ("Killing subprocess %d ...\n", i);
        if (kill (p[i], SIGTERM) < 0) perror ("kill");
    }

    for (i = 0; i < n; i++) {
        printf ("waiting for a subprocess ...\n");
        q = wait (NULL);
        printf ("Subprocess terminated: PID %d\n", q);
    }

    exit (0);
} 
```

# timezone - 时间/日期计算

> ID：15140451
> 
> 赞同：0
> 
> 时间：2013-02-28T16:20:21.797
> 
> 标签：timezone, php

我有一个用户数据库，每个用户都有自己的时区设置。例如，用户 A 有 GMT-05:00 ，用户 B 有 GMT+1:00 等

我正在尝试使用我能找到的最简单的方式为这些用户显示正确的当前日期/时间。我得到了这段代码，虽然它看起来不错（恕我直言），但它显示了正的差异（+5 小时）而不是负的（负 5 小时）。

下面的脚本：

```
<?php
    // below two lines -- info that I normally take from DB
    $row['callstart'] = "1362067791";  // unixtimestamp
    $userInfo['timezone'] = 'GMT-5';

    echo date('Y-m-d H:i:s',$row['callstart'])."\n"; // original hour

    $date = date('Y-m-d H:i:s',$row['callstart']);
    $date = new DateTime($date,new DateTimeZone('GMT'));

    $date->setTimezone(new DateTimeZone($userInfo['timezone']));
    $row['callstart'] = $date->format('Y-m-d H:i:s');
    echo $row['callstart']; // converted to GMT-5 hour
?> 
```

结果如下：

```
 root@ssw238:/tmp# php /work/yy.php
  2013-02-28 16:09:51 // that's the current GMT hour/date
  2013-02-28 21:09:51 // should actually be 11:09:51 instead of 21:09:51
  root@ssw238:/tmp# 
```

知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:40:28.390

这是常识对我们不利的时候......来自[维基百科](http://en.wikipedia.org/wiki/Tz_database#Area)

`In order to conform with the POSIX style, those zone names beginning with "Etc/GMT" have their sign reversed from what most people expect. In this style, zones west of GMT have a positive sign and those east have a negative sign in their name (e.g "Etc/GMT-14" is 14 hours ahead/east of GMT.)`

所以解决方案是

```
// below two lines -- info that I normally take from DB
$row['callstart'] = "1362067791";  // unixtimestamp
// reversed the sign
$userInfo['timezone'] = 'GMT+5';

echo date('Y-m-d H:i:s',$row['callstart'])."\n"; // original hour

$date = date('Y-m-d H:i:s',$row['callstart']);
$date = new DateTime($date,new DateTimeZone('GMT'));

$date->setTimezone(new DateTimeZone($userInfo['timezone']));
$row['callstart'] = $date->format('Y-m-d H:i:s');
echo $row['callstart']; // converted to GMT-5 hour 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:34:27.547

嗯...我宁愿你这个

```
 <?php

$row['callstart'] = "1362067791";
$userInfo['timezone'] = 'GMT-5';

$orginal =date('Y-m-d H:i:s',$row['callstart']);
echo $orginal;
echo '<br/>';

$newdate=date('Y-m-d H:i:s',($orginal + strtotime(substr($userInfo['timezone'] ,3).'hours')));
echo $newdate

?> 
```

2013-02-28 17:09:51 2013-02-28 13:22:36

# ajax - WordPress 的 AJAX 循环（来自不同类别的帖子）

> ID：15140457
> 
> 赞同：0
> 
> 时间：2013-02-28T16:20:33.663
> 
> 标签：ajax, json, wordpress, loops, posts

我尝试从[Tuts+](http://wp.tutsplus.com/tutorials/getting-loopy-ajax-powered-loops-with-jquery-and-wordpress/)为 WordPress 实现 AJAX 帖子循环 我希望这个循环显示在三个列的单个帖子页面的评论表单下（每个用于另一个类别）

在 single.php 我有 div（数字来自类别）：

```
<div class="news_posts-6"></div>
<div class="news_posts-3"></div>
<div class="news_posts-2"></div> 
```

我的ajax循环：

```
jQuery(function($){
var page = 1;
var loading = true;
var $window = $(window);
 var cat = [6,3,2];

var load_posts= jQuery.each(cat, function(){

        var $content = $(".news_posts-" + this);

        $.ajax({
            type       : "GET",
            data       : {numPosts: 2, pageNumber: page, cat: this},
            dataType   : "html",
            url        : "http://127.0.0.1:4001/wordpress/wp-content/themes/twentyeleven-child-theme/loopHandler.php",
            beforeSend : function(){
                if(page != 1){
                    $content.append('<div id="temp_load" style="text-align:center">\
                        <img src="/images/ajax-loader.gif" />\
                        </div>');
                }
            },
            success    : function(data){
                $data = $(data);
                if($data.length){
                    $data.hide();
                    $content.append($data);
                    $data.fadeIn(500, function(){
                        $("#temp_load").remove();
                        loading = false;
                    });
                } else {
                    $("#temp_load").remove();
                }
            },
            error     : function(jqXHR, textStatus, errorThrown) {
                $("#temp_load").remove();
                alert(jqXHR + " :: " + textStatus + " :: " + errorThrown);
            }
    });

});  

$window.scroll(function() {
    var content_offset = $content.offset();
    console.log(content_offset.top);
    if(!loading && ($window.scrollTop() +
        $window.height()) > ($content.scrollTop() + $content.height() + content_offset.top)) {
            loading = true;
            page++;
            load_posts();
    }
 });     
 load_posts();
}); 
```

loopHandler.php 的一部分：

```
$numPosts = (isset($_GET['numPosts'])) ? $_GET['numPosts'] : 0;
$page = (isset($_GET['pageNumber'])) ? $_GET['pageNumber'] : 0;
$cat = (isset($_GET['cat'])) ? $_GET['cat'] : 0;

echo $numPosts;
echo $page;

query_posts(array(
       'posts_per_page' => $numPosts,
       'paged'          => $page,
       'cat'          => $cat
)); 
```

我尝试使用包含类别编号的简单数组，但它不起作用。取决于

```
data       : {numPosts: X, pageNumber: page, cat: this}, 
```

每列显示 X 个帖子（来自第一类的相同帖子）。

我想我需要使用我尝试过的 JSON，但这完全是一场灾难（我不知道如何组合起来）。我只需要为三个不同的参数调用 AJAX。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:27:39.627

嗯，有多种方法可以解决这个问题。

一种方法是首先在您的类别客户端上循环，并为每个类别提出单独的请求。这就是您在代码中本质上所做的事情。您正在迭代一系列类别并为每个类别发出请求。

另一种方法是将类别数组传递给您的处理程序。您需要做的就是修改您的处理程序以接受整数或类别数组。然后您可以返回一个 JSON 对象。但这涉及更多的编辑，最重要的是，它并不能解决每个部分具有不同大小和高度的问题。

因此，在下面，我稍微修改了代码以跟踪多个部分。我们只需要一些小的编辑：

*   每个部分都需要有一个类别号、分页号、内容部分和一个是否加载的标志。每个都需要存储在一个列表中以进行跟踪。
*   我们需要遍历每个类别来初始化它。
*   我们需要在窗口滚动时遍历每个类别并检查是否应该加载下一个项目
*   我们需要确保每个请求都与请求的类别相关

首先修改你的 div （这只是一个偏好问题，我更喜欢将这样的元数据存储在属性而不是类中）：

```
<div class="news_posts" data-category="6"></div>
<div class="news_posts" data-category="3"></div>
<div class="news_posts" data-category="2"></div> 
```

这是一个修改后的 JS（请注意我更改了一些变量和函数名称）：

```
jQuery(function($){
    var $window = $(window);
    var cats = [];
    var contentDivs = $(".news_posts");

    var initializeCats = function(){
        // adds category objects to a list for tracking
        for(var i = 0; i < contentDivs.length; i++){
            var catNum = $(contentDivs[i]).attr("data-category");
            var cat = {
              catNum  : catNum,
              catPage : 1,
              loading : true,
              catDiv  : $(contentDivs[i]);
            };

            cats.push(cat);

            load_post(cat);
        }
    };

    var load_post = function(cat) {
        $.ajax({
            type       : "GET",
            data       : {
                numPosts   : 2, 
                pageNumber : cat.catPage, 
                cat        : cat.catNum
            },
            dataType   : "html",
            url        : "http://127.0.0.1:4001/wordpress/wp-content/themes/twentyeleven-child-theme/loopHandler.php",
            beforeSend : function(){
                if(page != 1){
                    // this was a bad idea when i wrote the article originally
                    // never concatenate strings on multiple lines by escaping
                    // the carriage return 
                    // $content.append('<div id="temp_load" style="text-align:center">\
                    //    <img src="/images/ajax-loader.gif" />\
                    //    </div>'); 

                    cat.catDiv.append("<div class='temp_load' style='text-align:center'>" +
                        "<img src='/images/ajax-loader.gif' />" +
                        "</div>");
                }
            },
            success    : function(data){
                $data = $(data);

                if($data.length){
                    $data.hide();
                    cat.catDiv.append($data);

                    $data.fadeIn(500, function(){
                        cat.catDiv.find(".temp_load").remove();
                        cat.loading = false;
                    });
                } else {
                    cat.catDiv.find(".temp_load").remove();
                }
            },
            error     : function(jqXHR, textStatus, errorThrown) {
                cat.catDiv.find(".temp_load").remove();
                alert(jqXHR + " :: " + textStatus + " :: " + errorThrown);
            }
        });
    });  

    var onWindowScroll = function(){
        for(var i = 0; i < cats.length; i++){
            var cat = cats[i];
            var contentDiv = cat.catDiv;
            var content_offset = contentDiv.offset();                              

            if( !cat.loading && 
                ($window.scrollTop() + $window.height()) > 
                (contentDiv.scrollTop() + contentDiv.outerHeight() + content_offset.top)
            ) {
                cat.loading = true;
                cat.catPage++;

                load_post(cat);
            }
        }
    }

    initializeCats();
    $window.scroll(onWindowScroll);     

}); 
```

PHP 文件几乎相同，只需注释掉以下`echo $numPosts`行：

```
$numPosts = (isset($_GET['numPosts']))   ? $_GET['numPosts']   : 0;
$page     = (isset($_GET['pageNumber'])) ? $_GET['pageNumber'] : 0;
$cat      = (isset($_GET['cat']))        ? $_GET['cat']        : 0;

// echo $numPosts;
echo $page;

query_posts(array(
       'posts_per_page' => $numPosts,
       'paged'          => $page,
       'cat'            => $cat
)); 
```

这只是我快速完成的事情。**我没有测试过**。试试看，注意语法错误，然后交叉手指:)。我希望这对您有用，如果没有，我们可以考虑对其进行修改以使其有效。

# java - 制作一个拦截svn请求的servlet

> ID：15140459
> 
> 赞同：-3
> 
> 时间：2013-02-28T16:20:38.897
> 
> 标签：java, svn

我想创建一个 servlet 来拦截 svn 请求并将它们重定向到真正的 svn 服务器，这样 svn 客户端就不会知道真正的服务器。

你能给一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:28:52.887

也许您可以选择更简单的路径，例如为 SVN 使用 webdav / http 协议，并配置将执行重定向的 Apache 虚拟主机（如标准反向代理）？

# android - 我的 aSyncTask 不工作

> ID：15140463
> 
> 赞同：0
> 
> 时间：2013-02-28T16:20:49.003
> 
> 标签：android, android-asynctask

我的异步任务不工作。对话框不会关闭并且列表没有被更新（我认为是因为 onPostExecute 没有被调用）。我用谷歌搜索了它，但没有结果。

```
package com.example.whs;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class Albums extends ListActivity {
    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    // Array for the list
    ArrayList<HashMap<String, String>> itemList;

    // url to get the items
    private static String url_all_products = "<my url here>";

    // JSON variables
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_MESSAGE = "message";
    private static final String TAG_ITEMS = "items";
    private static final String TAG_NAME = "name";
    private static final String TAG_ID = "id";
    private static final String TAG_USERNAME = "username";

    //JSON array
    JSONArray items = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_albums);

        // HashMap for the items
        itemList = new ArrayList<HashMap<String, String>>();

        // Loading the items on the background
        new LoadAllItems().execute();

        // Get list-view
        ListView lv = getListView();

        // On item click
        lv.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                //do
            }
        });
    }

    // class for loading all items
    class LoadAllItems extends AsyncTask<String, String, String> {
        // Before 
        @Override
        protected void onPreExecute(){
            super.onPreExecute();
            pDialog = new ProgressDialog(Albums.this);
            pDialog.setMessage("Albums laden...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        // Get the products     
        @Override
        protected String doInBackground(String... params) {
            // Build Parameters
            List<NameValuePair> params1 = new ArrayList<NameValuePair>();
            //Get the JSON string
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params1);

            // Check for response
            Log.d("All Items: ", json.toString());

            try {
                // check for success tag
                int success = json.getInt(TAG_SUCCESS);

                if(success == 1) {
                    // found the items
                    items = json.getJSONArray(TAG_ITEMS);

                    // loop through the items
                    for (int i = 0; items.length() > i; i++){
                        // Get the item in variable c
                        JSONObject c = items.getJSONObject(i);

                        // Store in a variable
                        String id = c.getString(TAG_ID);
                        String name = c.getString(TAG_NAME);
                        String username = c.getString(TAG_USERNAME);
                        if(username == ""){
                            username = "onbekend";
                        }

                        // Create the HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // add it
                        map.put(TAG_ID, id);
                        map.put(TAG_USERNAME, username);
                        map.put(TAG_NAME, name);

                        // to arraylist
                        itemList.add(map);
                    }
                }else{
                    // nothing found
                    Intent i = new Intent(getApplicationContext(), Index.class);
                    // close the previous activities                    
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e){
                e.printStackTrace();
            }
            return null;
        }       
    }

    protected void onPostExecute(String result){
        // dismiss dialog
        pDialog.dismiss();      
        runOnUiThread(new Runnable(){
            public void run(){
                // Add adapter to the list
                MenuAdapter adapter = new MenuAdapter(Albums.this, itemList);
                ListView list = (ListView)findViewById(R.id.list);
                list.setAdapter(adapter);   
                }
            });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.albums, menu);
        return true;
    }

} 
```

循环正常工作。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:24:24.700

1）你试图在后台线程中启动一个活动，不要这样做。

2）您可能会遇到 json 异常，只需记录更多内容，以便查看发生了什么

这些可能就是为什么它永远不会到达 onPostExecute

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:24:33.313

您不能在 doInBackGround() 中执行与 UI 相关的操作，就像您在 doInBaclground 中制定新活动一样，

```
 Intent i = new Intent(getApplicationContext(), Index.class);
                    // close the previous activities                    
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i); 
```

# java - Mockito：以复杂对象为参数的 Stub 方法

> ID：15140467
> 
> 赞同：10
> 
> 时间：2013-02-28T16:21:06.960
> 
> 标签：java, parameters, mockito, stub

也许这是一个新手问题，但找不到答案。

我需要用 Mockito 存根一个方法。如果该方法具有“简单”参数，那么我可以做到。例如，一个带有两个参数的 find 方法，汽车颜色和门数：

```
 when(carFinderMock.find(eq(Color.RED),anyInt())).thenReturn(Car1);
 when(carFinderMock.find(eq(Color.BLUE),anyInt())).thenReturn(Car2);
 when(carFinderMock.find(eq(Color.GREEN), eq(5))).thenReturn(Car3); 
```

问题是 find 参数是一个复杂的对象。

```
 mappingFilter = new MappingFilter();
 mappingFilter.setColor(eq(Color.RED));
 mappingFilter.setDoorNumber(anyInt());
 when(carFinderMock.find(mappingFilter)).thenReturn(Car1); 
```

此代码不起作用。错误是“参数匹配器的使用无效！需要 1 个匹配器，记录了 2 个”。

不能修改“find”方法，需要是一个MappingFilter参数。

我想我必须做“一些事情”来指示 Mockito，当 mappingFilter.getColor 是 RED 并且 mappingFilter.getDoorNumber 是 any 时，它必须返回 Car1（其他两个句子也是如此）。但是怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T16:31:47.133

使用 Hamcrest 匹配器，如[文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#3)中所示：

```
when(carFinderMock.find(argThat(isRed()))).thenReturn(car1); 
```

其中`isRed()`定义为

```
private Matcher<MappingFilter> isRed() {
    return new BaseMatcher<MappingFilter>() {
        // TODO implement abstract methods. matches() should check that the filter is RED.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-24T09:45:40.767

从**2.1.0**开始，Mockito 有自己的基于`org.mockito.ArgumentMatcher`接口的匹配器机制。这样可以避免使用 Hamcrest。用法与 Hamcrest 几乎相同。请记住，这`ArgumentMatcher`是一个功能接口，并且匹配的实现可以表示为 lambda 表达式。

```
private ArgumentMatcher<SomeObject> isYellow() {
    return argument -> argument.isYellow();
} 
```

进而

```
when(mock.someMethod(argThat(isYellow()).thenReturn("Hurray"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:25:59.723

您需要正确实现*MappingFilter*`equals()`的方法。在*equals()*你应该只比较颜色而不是*doorNumber*。

 ***以最简单的形式，它应该如下所示 -

```
@Override
public boolean equals(Object obj) {
    MappingFilter other = (MappingFilter) obj;
    return other.getColor() == this.getColor();
} 
```

此外，您应该像下面这样简单地形成您的 MappingFilter，而不是使用任何匹配器，例如 eq

```
 mappingFilter = new MappingFilter();
 mappingFilter.setColor(Color.RED);
 mappingFilter.setDoorNumber(10); //Any integer 
```***

# codenameone - 代号：在应用程序目录/数据库之外访问 sqlite

> ID：15140469
> 
> 赞同：1
> 
> 时间：2013-02-28T16:21:16.857
> 
> 标签：codenameone

我如何访问存在于应用程序/数据库目录之外的 SQLite DB？

看起来`openOrCreate`总是指向 appdir/database

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:24:00.750

您只能使用`getDatabasePath`获取数据库的路径并假设它不为空，将文件复制到给定位置。原因是数据库可能不是 SQLite，因此它不一定由一个文件组成。还有一个文件系统的问题，它在平台之间不是很便携。

# eclipse - Tomcat 6 Eclipse 配置——服务器位置被锁定以进行编辑

> ID：15140470
> 
> 赞同：4
> 
> 时间：2013-02-28T16:21:18.060
> 
> 标签：eclipse, tomcat6

我正在尝试更改运行 Eclipse EE 1.4.1 的 Tomcat 服务器的默认位置，以便它使用原始 Tomcat 安装（在从控制台独立运行时可以正常工作），而不是 Eclipse 在工作区中创建的那个按照[这个线程](https://stackoverflow.com/questions/2848194/tomcat-works-but-i-cant-reach-http-localhost8080)。但是，我`Server Locations`在 Tomcat 服务器配置表单上的部分全部显示为灰色（见红色矩形）：

![在此处输入图像描述](../Images/71cf3eb2a2bad36db733cc21c00911d6.png)

为什么会这样，我该如何改变它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:25:38.023

它在您发布的页面上说明了一切：

`Server must be published with no modules present to make changes.`

停止你的服务器。取消部署所有内容，然后（技巧部分）单击`publish`以确保没有部署任何内容（即没有文件复制到部署位置，单击`publish`服务器中没有模块的单击将删除所有部署的内容）。然后您将能够更改设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T10:56:38.953

在对**Tomcat Server Location**进行任何更改之前，您需要删除部署在服务器上的项目。

要删除项目：在“服务器”视图中展开 tomcat 服务器右键单击并选择删除

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-28T16:23:47.647

只需先停止您的 tomcat 服务器 ;)

# android - 在 Android 上启动默认电子邮件和日历

> ID：15140477
> 
> 赞同：0
> 
> 时间：2013-02-28T16:21:31.657
> 
> 标签：android, android-intent, android-calendar

我知道如何根据包名称启动一项活动，但对于电子邮件和日历之类的东西，人们通常会使用四五个专有或下载的应用程序之一。如果我想要一个按钮将用户带到他们的默认日历或电子邮件，有没有办法很好地做到这一点？

当用户去打开一个网站时，他们有一个选择，chrome/browser/whatever，或者如果你选择了一个默认值，它就会去那个。有没有办法通过打开用户的默认电子邮件/日历应用程序来做到这一点？

我知道我可以在 try/catch 块中为最流行的应用程序提供一堆意图，并希望它打开用户使用的一个，但这看起来非常丑陋。像 startActivity(EMAIL_INBOX) 或 intent(VIEW_CALENDAR) 或类似的东西，在没有实际包名称的情况下为您处理它？

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:31:28.623

`ACTION_MAIN`您可以使用操作和类别`CATEGORY_APP_CALENDAR`或根据需要制作 Intent `CATEGORY_APP_EMAIL`。

将操作设置为 ACTION_MAIN 会启动应用程序，就像用户从主页选择它一样，设置类别会将他们的选项限制为提供该类别的应用程序。有关更多选项，请参阅[Intent 类](http://developer.android.com/reference/android/content/Intent.html)的标准类别部分。

例如：

```
Intent calIntent = new Intent(Intent.ACTION_MAIN);
calIntent.addCategory(Intent.CATEGORY_APP_CALENDAR); 
```

您还可以将意图用于特定操作，例如通过发送电子邮件的操作启动电子邮件应用程序：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
```

# django - Django ImageField 设置固定的宽度和高度

> ID：15140483
> 
> 赞同：4
> 
> 时间：2013-02-28T16:21:54.120
> 
> 标签：django

我的 models.py 中有以下图像字段（请参见下面的代码）

我想**设置**图像的固定宽度和高度，使其始终为 100x100px

下面的代码是系统中已经存在的，我不确定宽度和高度是如何传递的，或者是否可以使用此代码将宽度和高度设置为固定大小。

```
image = models.ImageField(
        upload_to="profiles",
        height_field="image_height",
        width_field="image_width",
        null=True,
        blank=True,
        editable=True,
        help_text="Profile Picture",
        verbose_name="Profile Picture"
    )
    image_height = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100")
    image_width = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:31:46.010

```
class ModelName(models.Model):    
    image = models.ImageField(
        upload_to="profiles",
        null=True,
        blank=True,
        editable=True,
        help_text="Profile Picture",
        verbose_name="Profile Picture"
    )
    image_height = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100")
    image_width = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100")

    def __unicode__(self):
        return "{0}".format(self.image)

    def save(self):
        if not self.image:
            return            

        super(ModelName, self).save()
        image = Image.open(self.photo)
        (width, height) = image.size     
        size = ( 100, 100)
        image = image.resize(size, Image.ANTIALIAS)
        image.save(self.photo.path) 
```

# javascript - 在页面仍在加载时显示 JQuery 滑块

> ID：15140486
> 
> 赞同：1
> 
> 时间：2013-02-28T16:22:09.930
> 
> 标签：javascript, jquery, slider, loading

问题：在下载最后一个 .js 文件之前，Jquery Slider 不会显示在网页上

问题：如何在外部 .js 仍在加载时显示 Jquery Slider（已完成 Jquery 下载，并下载其他第三方插件和模块）。

设想：

```
<html>
<head>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" />

<script type="text/javascript">
$(document).ready( function() {

// Product Price Slider
$(function() {
    $("#fproductprice #slider-range").slider({
        range: true,
        logarithmic: true,
        min:  1,
        max:  100 ,
        animated: true,
        values: [1, 100],
        slide: function( event, ui ) {
            $("#fppricefrom").val(ui.values[0]);
            $("#fppriceto").val(ui.values[1]);
        }
    });
    $("#fppricefrom").val( $("#fproductprice #slider-range").slider("values",0));
    $("#fppriceto").val( $("#fproductprice #slider-range").slider("values",1));
});

});
</script>

</head>

<body>

<!-- Product Price -->
<div id="fproductprice">
    Price:
    <div id="slider-range"></div>
    <br />
    <input type="text" id="fppricefrom" size="8"/>
    <input type="text" id="fppriceto" size="8"/>
</div>

<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:33:04.647

尝试异步加载其他 js 文件。 [http://www.webmaster-source.com/2010/06/07/loading-javascript-asynchronously/](http://www.webmaster-source.com/2010/06/07/loading-javascript-asynchronously/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:52:11.143

尝试通过 jQuery getScript 加载 js 文件`$.getScript`

```
$(function() {
 $("#fproductprice #slider-range").slider({
    range: true,
    logarithmic: true,
    min:  1,
    max:  100 ,
    animated: true,
    values: [1, 100],
    slide: function( event, ui ) {
        $("#fppricefrom").val(ui.values[0]);
        $("#fppriceto").val(ui.values[1]);
    }
});
$("#fppricefrom").val( $("#fproductprice #slider-range").slider("values",0));
$("#fppriceto").val( $("#fproductprice #slider-range").slider("values",1));

$.getScript('//assets.pinterest.com/js/pinit.js', function() { }); 
```

});

参考[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# javascript - 如何隐藏选择框中的下拉列表？

> ID：15140491
> 
> 赞同：1
> 
> 时间：2013-02-28T16:22:45.297
> 
> 标签：javascript, jquery, css

我正在使用 JQuery 进行一些自定义下拉多选。

我正在做的是隐藏一个多选框，直到单击一个单独的选择框 - 以保持它所在的浏览器中的内容看起来是原生的。

但是，我试图让多选框看起来有点像普通选择框的一部分。

因此，您单击选择框，倍数出现在它的正下方，似乎是它的一部分。

然后，当您进行选择并单击原始选择框时，复选框再次消失。

无论如何，这一切都很好，除了我在标准框中的单个选项一直出现在多选框的顶部。

我尝试使用 z-index 属性来解决此问题，但无济于事。

有没有办法隐藏下拉菜单，或者基本上禁用下拉菜单而不实际设置禁用属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:26:10.180

您不必禁用下拉菜单，如果您使用 jQuery，您可以简单地`.hide()`进行多选，它基本上将`style=''`属性设置为`display:none;`.

```
$("#your_multiselect").hide(); // .show(); when you want to bring it back. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:44:41.563

我最终做的是在原始选择框中没有选项，并且在多选中禁用了一个选项，上面写着“最多选择 3 个”，所以人们仍然可以看到说明，但只有在点击之后。

它不是那么好，但它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:51:17.760

您可以使用 CSS 隐藏选择框中的选项元素。因此，当您打开多选框时，您可以以编程方式隐藏第一个选择框中的选项。这将显示当前选择的值，但当您单击它时会隐藏所有选项。

这是 CSS/HTML 的简短介绍：http:
[//jsfiddle.net/LWPL3/](http://jsfiddle.net/LWPL3/)

**CSS**

```
.hidden {
    display: none;
} 
```

**HTML**

```
<select>
    <option class="hidden">Option 1</option>
    <option class="hidden">Option 2</option>
    <option class="hidden">Option 3</option>
</select> 
```

从那里，只要你想隐藏它们，你就可以只 $(optionelements).addClass('hidden') 到主选择框中的选项元素。

# sql - 如果日期为空 (SQL Server CE)

> ID：15140494
> 
> 赞同：1
> 
> 时间：2013-02-28T16:23:00.457
> 
> 标签：sql, sql-server-ce

我正在尝试用一`status`列和一`DateSent`列查询一个表。在我的查询中，我想将这两列合并为一`sent`列 - 如果状态为`c`（关闭/发送），则显示`DateSent`- 但如果不是，则显示适当的状态。

任何不是`sent`的行都将具有`DateSent`NULL。

所需的输出如下：

```
ID     Sent
-----------------
1      Queued
2      Failed
3      2013-02-28
4      Queued 
```

我当前的 SQL Server CE 查询：

```
select 
    ID, DateAdded, 
    case when DateSent is null then 
      (case when Status='W' then 'Waiting' else 
       case when Status='O' then 'Uploaded' else 
       case when Status='F' then 'Failed' else 
       case when Status='E' then 'Expired' else 
       'Unknown' end end end end) else DateSent 
    end as Sent 
from table 
```

但是第`else DateSent`7 行的部分抛出了一个错误：

> *日期格式存在语法错误。[0, 0, 0,表达式：失败,,]*

有人可以帮助我解决这个问题吗？

编辑：一个更容易阅读的问题片段是：

```
select case when DateSent is null
then 'null' else DateSent --<---- problem is here
end as Sent from table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:38:21.697

试试这个; （您可能需要将 DateSent 转换为 nvarchar）

```
 select ID, 
        DateAdded, 
        case when DateSent is null
             then (case status when 'W' then 'Waiting'  
                               when 'O' then 'Uploaded'  
                               when 'F' then 'Failed'  
                               when 'E' then 'Expired' 
                                        else 'Unknown' 
                   end)
             else  convert(nvarchar(30), DateSent) 
        end as Sent
from table 
```

# css - 具有固定边距的响应式/流体 4 列

> ID：15140496
> 
> 赞同：1
> 
> 时间：2013-02-28T16:23:05.433
> 
> 标签：css, responsive-design, fluid

对于我的生活，我无法锻炼为什么我的 4 col 布局会损坏，有人可以帮我解决吗？当您缩小浏览器时，布局更改为 3 列，我需要在所有屏幕尺寸下为 4 列。

它具有“12px”固定边距的流体宽度（“最大宽度：1056px”）。[http://jsfiddle.net/KwUcG/1/](http://jsfiddle.net/KwUcG/1/)

我不想使用“@media”和断点，因此我使用了最大宽度和百分比。

**HTML**

```
<section id="organisations">

<div class="wrap">
    <div class="inner">
        <div class="fourcol">
            <div class="block">
                <img src="img/fitzwilliam-museum.jpg" />
                <p>Home to half a million objects of art and archaeology from pre-history to the present day.</p>
            </div>
        </div>
        <div class="fourcol">
            <div class="block">
                <img src="img/fitzwilliam-museum.jpg" />
                <p>Home to half a million objects of art and archaeology from pre-history to the present day.</p>
            </div>
        </div>
        <div class="fourcol">
            <div class="block">
                <img src="img/fitzwilliam-museum.jpg" />
                <p>Home to half a million objects of art and archaeology from pre-history to the present day.</p>
            </div>
        </div>
        <div class="fourcol">
            <div class="block">
                <img src="img/fitzwilliam-museum.jpg" />
                <p>Home to half a million objects of art and archaeology from pre-history to the present day.</p>
            </div>
        </div>
    </div>
</div>

</section> 
```

**CSS**

```
.wrap {
padding: 0 40px;
margin: 0 auto;
background: #e4f;
overflow: hidden;
}

.inner {
    max-width: 1056px;
    margin: 0 auto;
    background: #34e;
    overflow: hidden;
}

.fourcol {
display: inline-block;
width: 24%;
margin-left: 12px;
background: #ccc;
}

.fourcol:first-child { margin-left: 0; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:32:37.803

[http://jsfiddle.net/KwUcG/2/](http://jsfiddle.net/KwUcG/2/)

适用于 float: left;

您将遇到的另一个问题是您需要使用 % 边距。

我建议使用 1% 的边距和 25% 宽度的列。添加 box-sizing:border-box; 修复浮动时的盒子大小问题。

```
.wrap {
    padding: 0 40px;
    margin: 0 auto;
    background: #e4f;
    overflow: hidden;
}

    .inner {
        max-width: 1056px;
    width: 100%;
        margin: 0 auto;
        background: #34e;
        overflow: hidden;
    box-sizing: border-box;
    }

.fourcol {
    float: left;
    width: 24%;
    margin-left: 1%;
    margin-right: 0;
    background: #ccc;
    box-sizing: border-box;
}

.fourcol:first-child { margin-left: 0; } 
```

不能使用固定保证金的原因：

以 1056px 宽度为例。1056px 的 24% = 253.44 乘以 4 列 = 1013.76 + 3 列价值 12px 的边距空间为 1013.76 + 36 = 1049.76。在这种情况下，这适用于剩余的一些空间。

以 800px 宽为例...

800px 的 24% = 192 乘以 4 列 = 768 + 36（3 列相当于 12px 的边距空间）= 804px

804px 大于 800px 的 100%，因此它会中断。您可以通过将 24 减少到 23 或 22 或 21 来在一定程度上避免这种情况……但随后您将失去较大宽度的房地产。

当使用 % margins 时，一切都加起来......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:30:52.963

unfortunately, you'll have to use percentages for the `margin` as well. When I shrink the `.inner` to 300px, 12px is too much, the column itself is 70px. Try using 1% for the margin, and a bit less (for browser incompatibilities) in the width, eg 23.7% instead of 24%

To clarify, the suggested CSS is :

```
.fourcol {
   display: inline-block;
   width: 23.7%;
   margin-left: 1%;
   background: #ccc;
} 
```

# django - 如何将 Web 套接字与 django wsgi 集成

> ID：15140497
> 
> 赞同：8
> 
> 时间：2013-02-28T16:23:25.217
> 
> 标签：django, websocket, wsgi, gevent, gunicorn

我们有一个非常复杂的 Django 应用程序，目前由 apache/mod_wsgi 提供服务，并部署在 AWS ELB 负载均衡器后面的多个 AWS EC2 实例上。客户端应用程序使用 AJAX 与服务器交互。他们还定期轮询服务器以检索通知和更新其状态。我们希望删除轮询并将其替换为“推送”，使用网络套接字。

因为任意实例处理来自客户端的 Web 套接字请求并保留这些 Web 套接字，并且因为我们希望将数据推送到可能不在为推送提供源数据的同一实例上的客户端，所以我们需要一种方法将数据路由到适当的实例，然后从该实例到适当的客户端 Web 套接字。

我们意识到 apache/mod_wsgi 不能很好地使用 web sockets，并计划用 nginx/gunicorn 替换这些组件并使用 gevent-websocket worker。但是，如果多个工作进程之一接收到来自客户端的建立 Web 套接字的请求，并且工作进程的生命周期由主 gunicorn 进程控制，则不清楚其他工作进程，或者实际上是非 gunicorn 进程如何可以将数据发送到这些 Web 套接字。

一个特定的情况是：发出 HTTP 请求的用户被定向到一个 EC2 实例（主机），并且期望的行为是将数据发送给在完全不同的实例中打开 Web 套接字的另一个用户。可以很容易地设想一个系统，其中运行在每个实例上的消息代理（例如rabbitmq）可以发送包含要通过网络套接字发送到连接到该实例的客户端的数据的消息。但是这些消息的处理程序如何访问在 gunicorn 的工作进程中接收到的 Web 套接字？创建 gevent-websocket 并提供给工作人员的高级 python web 套接字对象不能被腌制（它们是不支持腌制的实例方法），因此工作进程不能轻易地将它们共享给一些长时间运行的外部过程。

事实上，这个问题的根源在于，由客户端的 HTTP 请求发起并由 gunicorn 等服务器中的 WSGI 处理程序处理的 Web 套接字如何被外部进程访问？旨在处理 HTTP 请求的 gunicorn 工作进程会产生长时间运行的线程以挂在 Web 套接字上并支持处理来自其他进程的消息以将消息发送到已通过这些工作进程附加的 Web 套接字，这似乎并不*正确*过程。

谁能解释一下 Web 套接字和基于 WSGI 的 HTTP 请求处理程序如何在我描述的环境中相互作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T15:16:23.703

我认为你已经做出了正确的评估，即 mod_wsgi + websockets 是一个令人讨厌的组合。

您会发现所有 wsgi 工作人员都被 Web 套接字占用，并且尝试（大量）增加工作人员池的大小可能会因为内存使用和上下文切换而阻塞服务器。

如果您喜欢坚持使用同步 wsgi worker 架构（与 gevent、twisted、tornado 等实现的反应式方法相反），我建议您将 uWSGI 视为应用程序服务器。最近的版本可以以旧的方式处理一些 URL（即您现有的 django 视图仍然可以像以前一样工作），并将其他 url 路由到异步 websocket 处理程序。这对您来说可能是一条相对顺利的迁移路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:48:52.343

> 旨在处理 HTTP 请求的 gunicorn 工作进程会产生长时间运行的线程以挂在 Web 套接字上并支持处理来自其他进程的消息以将消息发送到已通过这些工作进程附加的 Web 套接字，这似乎并不正确过程。

为什么不？毕竟，这是一个长期运行的连接。处理这种连接的长期线程似乎......对我来说绝对自然。

通常在这些事件的情况下，写入与读取是分开处理的。

当前正在处理 websocket 连接的工作人员将等待相关消息从消息传递服务器下来，然后将其传递给 websocket。

如果您愿意，还可以使用 gevent 的异步友好队列来处理代码内消息传递。

# python - 在python中如何一次使用列表中的所有项目？

> ID：15140499
> 
> 赞同：-4
> 
> 时间：2013-02-28T16:23:26.220
> 
> 标签：python, list, loops

我想要一个函数来使用所有项目，而不是在列表中迭代。有什么想法还是我做错了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:42:32.897

我不确定你的意思，但你可能对列表理解感兴趣

```
results = [i for i in object if condition] 
```

或者，您可能喜欢`*`用于列表扩展的运算符或`**`用于类似 dict 扩展的运算符：

```
mylist=[1,2,3,4,5]
def func(a, b, c, d, e)
    print a,b,c,d,e
func(*mylist)
#1 2 3 4 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:27:25.597

如果您有一个数字列表，则可以使用[numpy](http://www.numpy.org/)一次对所有数字执行操作；

```
import numpy

my_list = numpy.asarray(my_list)

my_list * 5 
```

等等。

# c# - 真正的 ClickOnce 发布的应用程序的配置文件在哪里？

> ID：15140500
> 
> 赞同：0
> 
> 时间：2013-02-28T16:23:26.063
> 
> 标签：c#, clickonce

我正在使用它来获取我的应用程序配置文件的位置：

```
string path = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile; 
```

但它没有给我实际使用的文件的路径。

我的问题是，我需要我的应用程序可以从 Windows 任务计划程序运行，并且我希望它接受参数。我一直这样做的方式是，当我在调度程序中创建任务时，单击浏览并找到`appref-ms`图标。然后调度程序将填充文本框，我将在该文本框中输入文件的路径，其中包含到下面一个奇怪位置的路径`AppData\Local\Apps\2.0\...`（而不是只保留图标的路径）。通过这种方式，我还可以添加参数并且一切正常，这与我尝试过的其他事情不同，例如使用`.exe`文件的路径或键入图标的路径，除了......

当应用程序从任务计划程序启动时，它使用的配置文件与使用图标启动时不同。假设我在从任务计划程序运行后将设置更改`S`为值（始终在应用程序内）。`T`然后我将设置更改`S`为`I`从图标运行它时。下次我从任务计划程序运行应用程序时，设置`S`将是`T`，下次我从图标运行它时，设置`S`将是`I`。此外，`S`在上面代码给我的路径中的文件内设置只是默认值（不是`T`nor `I`）。

这是一个大问题，因为无论我如何运行应用程序，我都需要我的设置相同。我正在考虑用我自己确定的位置替换我自己文件的默认设置文件。这是我唯一的选择吗？有没有其他方法可以从任务计划程序运行应用程序，这样我就可以传递参数，这些参数也将使用与从图标运行它时相同的配置文件？一段代码会强制应用程序始终使用相同的配置文件怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:21:22.473

You could move the settings to a place that everyone can find them. If it's anything that's saved, you'll want to do this anyway, as ClickOnce updates can wipe out the user's saved settings. Check out [this article](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/) for more info.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:52:00.690

我知道您可以从中获取应用程序的安装路径

```
INSTALLED_PATH = Application.StartupPath ; 
```

一种方法可能是，在每次 ClicOnce 部署之后，应用程序的首次启动将来自图标。如果应用程序随后将 INSTALLED_PATH 保存到一个固定的文本文件，那么任务可以从那里获取路径。这有意义吗？

# javascript - Javascript - 错字

> ID：15140508
> 
> 赞同：-4
> 
> 时间：2013-02-28T16:23:45.370
> 
> 标签：javascript

我正在使用一个使用一些变量的 jquery 插件，假设 'parent' 和 comment_text 是简单的字符串变量

```
var text = '<input type="button" class="waveButton" value="" onclick="addSubmit(this,'+parent+')" /> ' 
```

函数 addSubmit() 处理就好了。但如果我添加这个：

```
var text = '<input type="button" class="waveButton" value="'+comment_text+'" onclick="addSubmit(this,'+parent+')" /> ' 
```

它不再起作用了。我想这是一个错字，因为我的 IDE 显示颜色好像它没有识别出 addSubmit() 是一个函数

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:27:28.620

理想情况下，它应该可以工作。但请确保变量“comment_text”不包含任何会影响 html 代码的特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:29:23.330

是什么`parent`？如果将其添加到字符串，它将被强制转换为字符串。你可能会得到`[object Object]`哪个会给你一个语法错误。

```
addSubmit(this, [object Object]) // <-- syntax error 
```

# c++ - 如何生成给定长度的字典字符串？

> ID：15140519
> 
> 赞同：0
> 
> 时间：2013-02-28T16:24:13.077
> 
> 标签：c++, algorithm

> 如何生成给定长度的字典字符串？

我正在寻找一种算法来按字典顺序生成长度为 N 的字符串（字典顺序）。例如给定长度 1，生成的字符串是："a","b","c","d","e","f",g,h,i,j,k...,z .

对于长度 2，生成的字符串应该是："aa","ab","ac","ad",...,"ba","bb",...,"zz"。

我们怎么能这样做？

这是我所做的：

```
 void permute(string a, int i, int n, int length)
   {
       int j;
       if (i == length){
           string cand = a.substr(0,length);
              cout<<cand<<endl;
         }

       else
          {
                     for (j = i; j <= n; j++)
                      {
                          swap((a[i]), (a[j]));
                           permute(a, i+1,n,length);
                           swap((a[i]), (a[j]));
                      }
           }
       } 
```

在调用 "permute(a,0,a.size(),1)" 时，字符串 a 如下所示：

> aaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbccccccccccccccccccccddddddddddddddddddddeeeeeeeeeeeeeeeeeeeeffffffffffffffffffffgggggggggggggggggggghhhhhhhhhhhhhhhhhhhhiiiiiiiiiiiiiiiiiiiijjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkllllllllllllllllllllmmmmmmmmmmmmmmmmmmmmnnnnnnnnnnnnnnnnnnnnooooooooooooooooooooppppppppppppppppppppqqqqqqqqqqqqqqqqqqqqrrrrrrrrrrrrrrrrrrrrssssssssssssssssssssttttttttttttttttttttuuuuuuuuuuuuuuuuuuuuvvvvvvvvvvvvvvvvvvvvwwwwwwwwwwwwwwwwwwwwxxxxxxxxxxxxxxxxxxxxyyyyyyyyyyyyyyyyyyyyzzzzzzzzzzzzzzzzzzzz

生成正确的输出，但它重复字典字符串。如果我把它简化为字母，我相信像“aa”、“aaaa”这样的字符串会被遗漏。那么我们如何才能解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T16:25:44.657

我会对一个简单地遍历字母表的函数进行递归调用，并为每个字母位置调用它。

初步测试表明这可能有效：

```
#include <iostream>
#include <sstream>
#include <string>

void addLetters(std::string base, int tgt_depth)
{
    if (base.length() == tgt_depth) {
        std::cout << base << std::endl;
        return;
    }

    for (char letter = 'a'; letter <= 'z'; ++letter) {
        std::stringstream ss;
        ss << letter;
        addLetters(base + ss.str(), tgt_depth);
    }
}

int main(int argc, char* argv)
{
  // first argument is your "base" -- start with nothing
  // second argument is the depth to which to recurse, i.e. how many letters
  addLetters("", 2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:28:01.530

假设您想按这些字符串的字典顺序查看哪个字符串位于 M 位置，请以 26 为基数表示此数字，然后将 0 映射到 a，1 映射到 b，依此类推。您必须在左侧添加零（或 as），直到字符串达到所需的长度。现在要解决您的问题，只需遍历整数（最多为长度为 N 的字符串的数量，即 26 ^N）并应用我建议的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:30:51.827

```
for(i='a';i<='z';i++)
{
    recur(new String(i));
}
void recur(String s)
{
   if(s.length()==dig)
   {
       add s to array
       return
   }
   for(i='a';i<='z';i++)
       recur(s+i);

} 
```

尽管此代码不足以生成超过 5 位数字，因为有 26 ^ dig 可能性。而且我不知道 c++，所以我已经编写了算法。但我觉得其中没有什么是编码器 ia 语言无法转换的

# php - 获取 wordpress 多站点站点 ID

> ID：15140524
> 
> 赞同：2
> 
> 时间：2013-02-28T16:24:25.707
> 
> 标签：php, wordpress

我有一个多站点，人们付费升级到 adfree。我有一个来自升级站点的博客 ID 列表。我正在尝试将代码放在获取当前博客 ID 的页面中，但它似乎不起作用。我总是返回站点 ID 1。有任何想法吗？

```
<?php

$current_site = get_current_site();
$id = $current_site->id;
echo $id;
$os = array(267,156, 98,654);

if (in_array($id, $os)) {
echo "dont display ads";
}

?> 
```

谢谢

编辑。工作代码

```
 <?php

 global $blog_id;
 $os = array(286,156, 98,654);
 if (in_array($blog_id, $os)) {
 echo "dont display ads";
 }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:27:44.603

```
if (in_array($id, $os)) { 
```

您缺少`$`id 前面的标志

还要确保 $current_site->id 确实返回一个数字（`98`例如，不是`'98,654'`字符串（或浮点数））

# mysql - SQL 文件不会恢复

> ID：15140527
> 
> 赞同：0
> 
> 时间：2013-02-28T16:24:31.330
> 
> 标签：mysql, centos, centos6

我做了什么：

```
mysql -u root -p -h localhost gx < gxe.sql 
```

结果：

```
[root@jony html]# mysql -u root -p -h localhost gx < gxe.sql
Enter password:
[root@jony html]# 
```

它实际上没有做任何事情。我尝试刷新我的 SQL 客户端（Heidi SQL），但仍然没有？我做错了什么？谢谢！

操作系统：CentOS 6 - Linux

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:56:51.367

`mysql`语法`mysqldump`略有不同

`mysql`需要`-D`参数来设置数据库。

所以试试

```
mysql -u root -p -h localhost -D gx < gxe.sql 
```

# razor - 我如何（轻松）在 Razor 中动态命名辅助元素？

> ID：15140529
> 
> 赞同：1
> 
> 时间：2013-02-28T16:24:33.937
> 
> 标签：razor, html-helper, razor-2

我刚开始使用 Razor，我的第一个倾向是像对待 .ACSX 一样对待 Helpers。

假设我做了一个非常简单的助手：

```
@helper HowManySpans() {
<div>
<input type="text" name="txtLoops" /><input type="submit" value="how many?" />
@{ if (IsPost) {
    var count = Request["txtLoops"];
    var i = 1;
    while (i < count) {
       <span>Span #@i</span>
       i++;
       }
   }
</div> 
} 
```

它工作正常，直到我将两个放在同一页面上。我期待编译器发出像 ASPX 页面通常那样做前缀的元素的名称，yknow，ctl00_Header_txtLoops 或类似的东西。

我想在一个更受参数驱动的助手中，我可以使用我的参数给自己的名字加上前缀，但我觉得这仍然会推迟这个问题。如果我有一些动态帮助器在名称前加上某个参数，我仍然只能在页面上使用该参数。

我是否忽略了一些非常明显的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:18:19.657

Razor 仅发出页面中的标记。它几乎没有增加标记的方式。Razor v2 添加了条件属性，但这仍然代表开发人员有些明确。

我的一个问题是为什么元素甚至需要唯一的名称。在许多现代 HTML5 应用程序中，几乎不需要元素具有唯一名称。

但是，假设有必要，我可以想到两种方法来做到这一点：

1.  让调用者传入名称或名称前缀（如您所建议的那样）。
2.  创建您自己的计数器，并在每次调用助手时递增它。最大的问题是在哪里保存计数器的信息。保存它的一个合乎逻辑的地方是 HttpContext.Items 集合，它是每个请求的“数据包”。每次调用助手时，它都会检查 Items 包以查看当前计数，将其增加 1，使用该数字并更新包。

# parsing - 如何将 Apache Any23 RDF 语句添加到 Apache Jena？

> ID：15140531
> 
> 赞同：2
> 
> 时间：2013-02-28T16:24:36.510
> 
> 标签：parsing, rdf, jena, rdfa, any23

基本上，我使用 Any23 蒸馏器从嵌入 RDFa 的文件中提取 RDF 语句（DBpedia Spotlight 使用 xhtml+xml 输出选项创建的实际文件）。通过使用 Any23 RDFa 蒸馏器，我可以提取 RDF 语句（我也尝试使用 Java-RDFa，但我只能提取前缀！）。但是，当我尝试将语句传递给 Jena 模型并将结果打印到控制台时，什么也没有发生！

这是我正在使用的代码：

```
File myFile = new File("T1");
Any23 runner= new Any23();

DocumentSource source = new FileDocumentSource(myFile); 
ByteArrayOutputStream outA = new ByteArrayOutputStream();
InputStream decodedInput=new ByteArrayInputStream(outA.toByteArray()); //convert the output stream to input so i can pass it to jena model
TripleHandler writer = new NTriplesWriter(outA);

try {
    runner.extract(source, writer);
} finally {
    writer.close();
}

String ttl = outA.toString("UTF-8");
System.out.println(ttl);
System.out.println();
System.out.println();

Model model = ModelFactory.createDefaultModel();
model.read(decodedInput, null, "N-TRIPLE");

model.write(System.out, "TURTLE"); // prints nothing! 
```

谁能告诉我我做错了什么？可能有很多东西！
有什么简单的方法可以直接从 any23 中提取 RDF 语句的主题（绕过耶拿）？由于我在编程方面非常缺乏经验，因此我们将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:40:45.523

你在打电话

```
InputStream decodedInput=new ByteArrayInputStream(outA.toByteArray()) ; 
```

在调用 any23 插入三元组之前。在呼叫点，它是空的。

在 try-catch 块之后移动它。

# r - lmList 绘图错误：找不到对象“cF”

> ID：15140532
> 
> 赞同：0
> 
> 时间：2013-02-28T16:24:36.040
> 
> 标签：r, plot

我正在尝试通过使用 nlme 包中的 lmList() 为不同级别的因子生成箱线图。虽然它适用于帮助页面中的示例，但我的数据返回以下错误：

```
 library(nlme)
 ##dataframe used (simplified):
   **data.1**
   IDf x.var.1   y.var.1
1    1       1  1.856491
2    1       2  2.999224
3    1       3  3.943896
4    1       4  4.903249
5    1       5  6.034319
6    2       6  6.986847
7    2       7  8.024806
8    2       8  9.139255
9    2       9  9.986437
10   2      10 10.760508

##creating the lmlist file fm1
fm2 <- lmList(y.var.1 ~ x.var.1 | IDf, data.1, na.action = na.exclude) 

##plotting fm2
Call:
    Model: y.var.1 ~ x.var.1 | IDf 
       Data: data.1 
Coefficients:
(Intercept)   x.var.1
1   0.8695317 1.0259681
2   1.3724091 0.9508952

Degrees of freedom: 10 total; 6 residual
Residual standard error: 0.1042786

##plotting boxplots ##(or any kinds of plots really)
> plot(fm2, IDf ~ resid(.))

##returning error:
Error in plot.lmList(fm2, IDf ~ resid(.)) : object 'cF' not found 
```

现在我已经搜索和搜索，但我似乎无法弄清楚这个对象'cF'应该是什么意思，任何帮助将不胜感激！

```
##EDIT:
> dput(data.1)
structure(list(IDf = c(1, 1, 1, 1, 1, 2, 2, 2, 2, 2), x.var.1 = 1:10, 
y.var.1 = c(1.85649137285461, 2.99922390104585, 3.94389558063648, 
4.90324945760581, 6.03431888678115, 6.98684730318977, 8.0248061251629, 
9.13925481513909, 9.98643662828079, 10.7605079666861)), .Names = c("IDf", 
"x.var.1", "y.var.1"), row.names = c(NA, -10L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:30:27.110

试试这个：

```
library(nlme)
fm2 <- lmList(y.var.1 ~ x.var.1 | IDf, data.1, na.action = na.exclude)
lapply(fm2 ,  function(lmob) plot(lmob$model$x.var.1, lmob$residuals) ) 
```

nlme::lmList 中的 lmList 函数不返回 S4 对象，而是一个更传统的带有编号条目的列表（对应于“IDf”中的数字。

由于 nlme 中的 lmList 与 lme4::lmList 完全不同，早期的注释和代码（有点）偏离目标：

~~我猜测您使用的软件包`lmList`是 lme4。~~我无法`plot.lmList`在 lme4 中找到帮助页面，但我确实看到该功能存在。我希望找到是否有文档支持以下形式：plot(lmList-object, formula)。使用 showMethods 我看到应该有这样的支持。

```
showMethods("plot")
#-------
Function: plot (package graphics)
...snipped
x="lmList.confint", y="ANY"
x="lmList", y="formula"
    (inherited from: x="ANY", y="ANY")
...snipped... 
```

我不确定函数调用`resid`在 RHS 上工作的可能性有多大，或者分组参数在 LHS 上工作的可能性有多大。我最终无法让 plot.lmList 工作。我所做的是这个黑客：

```
lapply(fm2@.Data, function(lmob) plot(seq_along(lmob$residuals), lmob$residuals) ) 
```

我也得到了这个工作：

```
 lapply(fm2@.Data, function(lmob) plot(lmob$model$x.var.1, lmob$residuals) ) 
```

# visual-studio-2010 - 从 Visual Studio 2010 创建/编辑 Word 文档

> ID：15140534
> 
> 赞同：1
> 
> 时间：2013-02-28T16:24:36.917
> 
> 标签：visual-studio-2010, ms-word

我有一个带有书签的 word 文档，其中需要以编程方式插入文本。我曾经（在 vba 中）打开此文档的副本，插入文本，打印并关闭它。

现在我已经转移到 VS2010 我无法正确获取代码。

我已经导入了 Microsoft.Office.Interop 命名空间，但这就是我的知识下降的地方。

我想一旦我可以开始，我就可以弄清楚它只是让应用程序打开模板。

他们似乎没有太多关于此的文档，我认为这会经常出现。

你们可以提供的任何帮助将不胜感激

# c# - 如何生成每行一页的自由格式 rdlc 报告

> ID：15140536
> 
> 赞同：2
> 
> 时间：2013-02-28T16:24:38.170
> 
> 标签：c#, .net, console-application, rdlc, freeform

给定一个包含多行的数据集，在 .NET 控制台应用程序中，我需要为每一行生成一个关于单个页面的报告，将这些页面直接发送到打印机。

我正在尝试通过将 Microsoft Report 附加到数据集并将 TextBoxes 放置在我希望的位置来使用它。生成报告并将其发送到打印机不是问题。不幸的是，数据似乎只能以聚合形式提供——First、Sum、Last、Max 等。我无法将文本框锁定到裸字段。

一些在这里和其他网站的探索似乎可以解决这个问题，但只有当数据以表格形式呈现时。一个帖子甚至没有详细说明，“我的错误是使用文本框”

我是否使用了错误的工具来完成我想要完成的任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T15:06:58.787

我遇到了同样的问题并设法解决了它。解决方案对我来说似乎有点令人费解，所以不要引用我的“正确”方式来做到这一点，但这是我所做的：

1.  确保为您的报告定义了数据集。
2.  将“表格”控件添加到报表中。为了迭代数据集中的行，这似乎是必需的。
3.  从表中删除标题行和两个默认列，以便您只剩下一行和一列。
4.  将表格扩展到布局的宽度，并使其与“自由形式”布局所需的高度一样高。
5.  默认情况下，表格单元格内有一个 TextBox。右键单击空表格单元格并选择“删除”以删除该文本框。
6.  将“矩形”控件拖到空的表格单元格中。它似乎自动“停靠”到表格单元格的宽度/高度。
7.  现在您应该能够将数据集（文本框等）中的字段拖到矩形中以生成所需的布局。

请注意，我正处于使用这种方法的早期阶段，所以我不确定我是否会碰壁……但对于使用 TextBoxes 和每个“行”之后的分页符的基本报告，它似乎是工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T09:48:14.743

或者您尝试使用列表。在列表中，您可以根据需要排列文本框（和其他控件），并且将为记录集中的每条记录填充它们。

这对我有用。:-)

# xpath - TIBCO BusinessWorks XPath 联合运算符

> ID：15140537
> 
> 赞同：0
> 
> 时间：2013-02-28T16:24:40.050
> 
> 标签：xpath, tibco, businessworks

我不完全理解使用 XPath 联合运算符时看到的行为。

具有以下 XML

```
<root>
    <foo>hello</foo>
    <bar>world</bar>
</root> 
```

我们得到不同 XPath 表达式的这些结果

*   `(/root/foo | /root/bar)[1]` -> 你好

*   `(/root/foo | /root/bar)[last()]` -> 世界

*   `(substring(/root/foo, 2, 4) | /root/bar)[1]`- >你好

*   `(substring(/root/foo, 2, 4) | /root/bar)[last()]`-> 世界

到目前为止，它们是直观的结果，但是......

*   `(/root/foo | substring(/root/bar, 2, 4))[1]`-> **orld**（期待你好）

*   `(/root/foo | substring(/root/bar, 2, 4))[last()]`->**你好**（预期的orld）

呈现结果是否有原因？这些是否符合 XPath 2.0 规范？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:49:42.290

TIBCO BusinessWorks 仅与 XPath 1.0 兼容。支持某些 XPath 2.0 函数。[（来源： http](http://support.tibco.com) ://support.tibco.com 上的 FAQ1-7BXZE5 ）

回答你的两个问题：

*   “给出结果有原因吗？”

是的。XPath 1.0 联合结果是不可预测的。一个好的规则：一个人不应该依赖 BusinessWorks 中的联合订单，即使是简单的情况。

*   “这些符合 XPath 2.0 规范吗？”

结果不符合 XPath 2.0 规范，但您的查询是使用 XPath 1.0 引擎评估的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:46:22.240

不，最后两个结果不符合规范。如果联合运算符的操作数是字符串而不是节点，那么这是一个类型错误，在最后两个示例中就是这种情况。

# java - 仅在 JProgress Bar 在 Java 中完成 100% 后显示结果

> ID：15140538
> 
> 赞同：1
> 
> 时间：2013-02-28T16:24:43.110
> 
> 标签：java, swing, jprogressbar

我有一个 Jbutton“突出显示”，单击它会调用 Jprogress Bar。进度条工作正常，直到 100%。

只有在进度条达到 100% 后，我才能显示我的结果。

以下是部分代码：

```
final JProgressBar progressBar = new JProgressBar();
progressBar.setMaximum(100);
progressBar.setStringPainted(true);

btnNewButton_2.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

                Thread t = new Thread(new Runnable() {
                    public void run() {
                    int i = 1;
                    progressBar.setMinimum(0);
                    progressBar.setMaximum(100);
                    try {
                        while (i <= 100 || true) {
                            progressBar.setValue(i);
                            i++;
                            Thread.sleep(38);

                        }
                    } catch (InterruptedException ex){}

            }});
            t.start(); 
```

//我应该把System.out.println("Jprogress Bar达到100%)??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:30:22.760

在 i++ 之后添加 if 语句 :)

```
 i++;
  if (i == 100) {
    displayResult();
    return;
  } 
```

不要忘记使用[invokeAndWait](https://stackoverflow.com/questions/5499921/invokeandwait-method-in-swingutilities)。当前代码很可能无法正常运行，因为您正在从错误的线程操作 GUI 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:33:31.240

```
try{
    while (i <= 100 || true) {
        progressBar.setValue(i);
        i++;
        Thread.sleep(38);
     }
     // progress is definitely at 100 now
     // do whatever you need to display result here -- it would be faster than doing the check 
     // if(i==100) in every execution inside the while loop.
     System.out.println("Progress is done!!!");
} catch (.... 
```

# android - 我创建了一个 8x8 网格，但我怎样才能将其居中？

> ID：15140545
> 
> 赞同：1
> 
> 时间：2013-02-28T16:25:10.820
> 
> 标签：android

```
RelativeLayout container = (RelativeLayout) findViewById(R.id.sc); 
```

然后我将我的画布类添加到此容器中，但我的网格位于左上角，即网格下方有很大的空间，我想知道如何使网格居中。这是我绘制网格的代码。

```
float testWidth = (getWidth() - 16f) / 9f;
float testHeight = (getHeight() - 16f) / 9f;
for (int i = 0; i < 9; i++) {
    canvas.drawLine(testWidth* i, 0 , testWidth * i, testWidth* 8, dark);
    canvas.drawLine(0,  testWidth* i, testWidth* 8, testWidth* i, dark);
} 
```

我是否在 xml 文件中使用重力/边距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:57:02.930

检查它是否适合您。

```
 float testWidth = (getWidth() - 16f) / 9f;
    float testHeight = (getHeight() - 16f) / 9f;
    float size = Math.min(testWidth, testHeight);
    float offsetW = (getWidth() - size*8) / 2;
    float offsetH = (getHeight() - size*8)  /2;

    for (int i = 0; i < 9; i++) {
        canvas.drawLine(offsetW + size*i, 
                        offsetH, 
                        offsetW + size*i, 
                        offsetH + size*8, 
                        dark);
        canvas.drawLine(offsetW,  
                        offsetH + size* i, 
                        offsetW + size* 8, 
                        offsetH + size* i, 
                        dark);
    } 
```

代码未经测试。这个想法是为网格提供水平和垂直偏移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:27:42.877

在 PARENT 视图的 XML 文件中使用`gravity = "center"`。在这种情况下，视图的所有子视图都将居中。

# php - mysql查询和cookies

> ID：15140547
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:25:13.047
> 
> 标签：php, mysql, codeigniter

**应该鼓励新手。相当令人沮丧**

我是新手，在理解 php 文档时遇到问题。

有人可以提供确切的代码步骤以供我将来参考：

我想运行这个查询：

```
$query = $this->db->query("SELECT tracking_code FROM " . DB_PREFIX . "customer WHERE     language_id = '" . (int)$this->customer->getId() . "'"); 
```

（我知道它只会返回一个值）和 1\. 如果“如果存在跟踪命名 cookie，请将其删除或替换它并使用该查询返回的值设置一个名为“跟踪”的 cookie 一年。我该怎么做?

我对 php 知之甚少。但我觉得我在该 confirm.php 中没有提及 db 。它不扩展模型，我也不知道 $this 是否可以在这里工作，或者我正在处理的文件是。

```
<?php 
class ControllerCheckoutConfirm extends Controller { 
    public function index() {
        $redirect = '';

        if ($this->cart->hasShipping()) {
            // Validate if shipping address has been set.       
            $this->load->model('account/address');

            if ($this->customer->isLogged() && isset($this->session->data['shipping_address_id'])) {                    
                $shipping_address = $this->model_account_address->getAddress($this->session->data['shipping_address_id']);      
            } elseif (isset($this->session->data['guest'])) {
                $shipping_address = $this->session->data['guest']['shipping'];
            }

            if (empty($shipping_address)) {                             
                $redirect = $this->url->link('checkout/checkout', '', 'SSL');
            }

            // Validate if shipping method has been set.    
            if (!isset($this->session->data['shipping_method'])) {
                $redirect = $this->url->link('checkout/checkout', '', 'SSL');
            }
        } else {
            unset($this->session->data['shipping_method']);
            unset($this->session->data['shipping_methods']);
        }

        // Validate if payment address has been set.
        $this->load->model('account/address');

        if ($this->customer->isLogged() && isset($this->session->data['payment_address_id'])) {
            $payment_address = $this->model_account_address->getAddress($this->session->data['payment_address_id']);        
        } elseif (isset($this->session->data['guest'])) {
            $payment_address = $this->session->data['guest']['payment'];
        }   

        if (empty($payment_address)) {
            $redirect = $this->url->link('checkout/checkout', '', 'SSL');
        }           

        // Validate if payment method has been set. 
        if (!isset($this->session->data['payment_method'])) {
            $redirect = $this->url->link('checkout/checkout', '', 'SSL');
        }

        // Validate cart has products and has stock.    
        if ((!$this->cart->hasProducts() && empty($this->session->data['vouchers'])) || (!$this->cart->hasStock() && !$this->config->get('config_stock_checkout'))) {
            $redirect = $this->url->link('checkout/cart');              
        }   

        // Validate minimum quantity requirments.           
        $products = $this->cart->getProducts();

        foreach ($products as $product) {
            $product_total = 0;

            foreach ($products as $product_2) {
                if ($product_2['product_id'] == $product['product_id']) {
                    $product_total += $product_2['quantity'];
                }
            }       

            if ($product['minimum'] > $product_total) {
                $redirect = $this->url->link('checkout/cart');

                break;
            }               
        }

        if (!$redirect) {
            $total_data = array();
            $total = 0;
            $taxes = $this->cart->getTaxes();

            $this->load->model('setting/extension');

            $sort_order = array(); 

            $results = $this->model_setting_extension->getExtensions('total');

            foreach ($results as $key => $value) {
                $sort_order[$key] = $this->config->get($value['code'] . '_sort_order');
            }

            array_multisort($sort_order, SORT_ASC, $results);

            foreach ($results as $result) {
                if ($this->config->get($result['code'] . '_status')) {
                    $this->load->model('total/' . $result['code']);

                    $this->{'model_total_' . $result['code']}->getTotal($total_data, $total, $taxes);
                }
            }

            $sort_order = array(); 

            foreach ($total_data as $key => $value) {
                $sort_order[$key] = $value['sort_order'];
            }

            array_multisort($sort_order, SORT_ASC, $total_data);

            $this->language->load('checkout/checkout');

            $data = array();

            $data['invoice_prefix'] = $this->config->get('config_invoice_prefix');
            $data['store_id'] = $this->config->get('config_store_id');
            $data['store_name'] = $this->config->get('config_name');

            if ($data['store_id']) {
                $data['store_url'] = $this->config->get('config_url');      
            } else {
                $data['store_url'] = HTTP_SERVER;   
            }

            if ($this->customer->isLogged()) {
                $data['customer_id'] = $this->customer->getId();
                $data['customer_group_id'] = $this->customer->getCustomerGroupId();
                $data['firstname'] = $this->customer->getFirstName();
                $data['lastname'] = $this->customer->getLastName();
                $data['email'] = $this->customer->getEmail();
                $data['telephone'] = $this->customer->getTelephone();
                $data['fax'] = $this->customer->getFax();

                $this->load->model('account/address');

                $payment_address = $this->model_account_address->getAddress($this->session->data['payment_address_id']);
            } elseif (isset($this->session->data['guest'])) {
                $data['customer_id'] = 0;
                $data['customer_group_id'] = $this->session->data['guest']['customer_group_id'];
                $data['firstname'] = $this->session->data['guest']['firstname'];
                $data['lastname'] = $this->session->data['guest']['lastname'];
                $data['email'] = $this->session->data['guest']['email'];
                $data['telephone'] = $this->session->data['guest']['telephone'];
                $data['fax'] = $this->session->data['guest']['fax'];

                $payment_address = $this->session->data['guest']['payment'];
            }

            $data['payment_firstname'] = $payment_address['firstname'];
            $data['payment_lastname'] = $payment_address['lastname'];   
            $data['payment_company'] = $payment_address['company']; 
            $data['payment_company_id'] = $payment_address['company_id'];   
            $data['payment_tax_id'] = $payment_address['tax_id'];   
            $data['payment_address_1'] = $payment_address['address_1'];
            $data['payment_address_2'] = $payment_address['address_2'];
            $data['payment_city'] = $payment_address['city'];
            $data['payment_postcode'] = $payment_address['postcode'];
            $data['payment_zone'] = $payment_address['zone'];
            $data['payment_zone_id'] = $payment_address['zone_id'];
            $data['payment_country'] = $payment_address['country'];
            $data['payment_country_id'] = $payment_address['country_id'];
            $data['payment_address_format'] = $payment_address['address_format'];

            if (isset($this->session->data['payment_method']['title'])) {
                $data['payment_method'] = $this->session->data['payment_method']['title'];
            } else {
                $data['payment_method'] = '';
            }

            if (isset($this->session->data['payment_method']['code'])) {
                $data['payment_code'] = $this->session->data['payment_method']['code'];
            } else {
                $data['payment_code'] = '';
            }

            if ($this->cart->hasShipping()) {
                if ($this->customer->isLogged()) {
                    $this->load->model('account/address');

                    $shipping_address = $this->model_account_address->getAddress($this->session->data['shipping_address_id']);  
                } elseif (isset($this->session->data['guest'])) {
                    $shipping_address = $this->session->data['guest']['shipping'];
                }           

                $data['shipping_firstname'] = $shipping_address['firstname'];
                $data['shipping_lastname'] = $shipping_address['lastname']; 
                $data['shipping_company'] = $shipping_address['company'];   
                $data['shipping_address_1'] = $shipping_address['address_1'];
                $data['shipping_address_2'] = $shipping_address['address_2'];
                $data['shipping_city'] = $shipping_address['city'];
                $data['shipping_postcode'] = $shipping_address['postcode'];
                $data['shipping_zone'] = $shipping_address['zone'];
                $data['shipping_zone_id'] = $shipping_address['zone_id'];
                $data['shipping_country'] = $shipping_address['country'];
                $data['shipping_country_id'] = $shipping_address['country_id'];
                $data['shipping_address_format'] = $shipping_address['address_format'];

                if (isset($this->session->data['shipping_method']['title'])) {
                    $data['shipping_method'] = $this->session->data['shipping_method']['title'];
                } else {
                    $data['shipping_method'] = '';
                }

                if (isset($this->session->data['shipping_method']['code'])) {
                    $data['shipping_code'] = $this->session->data['shipping_method']['code'];
                } else {
                    $data['shipping_code'] = '';
                }               
            } else {
                $data['shipping_firstname'] = '';
                $data['shipping_lastname'] = '';    
                $data['shipping_company'] = ''; 
                $data['shipping_address_1'] = '';
                $data['shipping_address_2'] = '';
                $data['shipping_city'] = '';
                $data['shipping_postcode'] = '';
                $data['shipping_zone'] = '';
                $data['shipping_zone_id'] = '';
                $data['shipping_country'] = '';
                $data['shipping_country_id'] = '';
                $data['shipping_address_format'] = '';
                $data['shipping_method'] = '';
                $data['shipping_code'] = '';
            }

            $product_data = array();

            foreach ($this->cart->getProducts() as $product) {
                $option_data = array();

                foreach ($product['option'] as $option) {
                    if ($option['type'] != 'file') {
                        $value = $option['option_value'];   
                    } else {
                        $value = $this->encryption->decrypt($option['option_value']);
                    }   

                    $option_data[] = array(
                        'product_option_id'       => $option['product_option_id'],
                        'product_option_value_id' => $option['product_option_value_id'],
                        'option_id'               => $option['option_id'],
                        'option_value_id'         => $option['option_value_id'],                                   
                        'name'                    => $option['name'],
                        'value'                   => $value,
                        'type'                    => $option['type']
                    );                  
                }

                $product_data[] = array(
                    'product_id' => $product['product_id'],
                    'name'       => $product['name'],
                    'model'      => $product['model'],
                    'option'     => $option_data,
                    'download'   => $product['download'],
                    'quantity'   => $product['quantity'],
                    'subtract'   => $product['subtract'],
                    'price'      => $product['price'],
                    'total'      => $product['total'],
                    'tax'        => $this->tax->getTax($product['price'], $product['tax_class_id']),
                    'reward'     => $product['reward']
                ); 
            }

            // Gift Voucher
            $voucher_data = array();

            if (!empty($this->session->data['vouchers'])) {
                foreach ($this->session->data['vouchers'] as $voucher) {
                    $voucher_data[] = array(
                        'description'      => $voucher['description'],
                        'code'             => substr(md5(mt_rand()), 0, 10),
                        'to_name'          => $voucher['to_name'],
                        'to_email'         => $voucher['to_email'],
                        'from_name'        => $voucher['from_name'],
                        'from_email'       => $voucher['from_email'],
                        'voucher_theme_id' => $voucher['voucher_theme_id'],
                        'message'          => $voucher['message'],                      
                        'amount'           => $voucher['amount']
                    );
                }
            }  

            $data['products'] = $product_data;
            $data['vouchers'] = $voucher_data;
            $data['totals'] = $total_data;
            $data['comment'] = $this->session->data['comment'];
            $data['total'] = $total;

            $query = $this->db->query("SELECT affiliate_code FROM " . DB_PREFIX . "customer WHERE language_id = '" . (int)$this->customer->getId() . "'");

            //set cookie $query->rows;

            if (isset($this->request->cookie['tracking'])) {
                $this->load->model('affiliate/affiliate');

                $affiliate_info = $this->model_affiliate_affiliate->getAffiliateByCode($this->request->cookie['tracking']);
                $subtotal = $this->cart->getSubTotal();

                if ($affiliate_info) {
                    $data['affiliate_id'] = $affiliate_info['affiliate_id']; 
                    $data['commission'] = ($subtotal / 100) * $affiliate_info['commission']; 
                } else {
                    $data['affiliate_id'] = 0;
                    $data['commission'] = 0;
                }
            } else {
                $data['affiliate_id'] = 0;
                $data['commission'] = 0;
            }

            $data['language_id'] = $this->config->get('config_language_id');
            $data['currency_id'] = $this->currency->getId();
            $data['currency_code'] = $this->currency->getCode();
            $data['currency_value'] = $this->currency->getValue($this->currency->getCode());
            $data['ip'] = $this->request->server['REMOTE_ADDR'];

            if (!empty($this->request->server['HTTP_X_FORWARDED_FOR'])) {
                $data['forwarded_ip'] = $this->request->server['HTTP_X_FORWARDED_FOR']; 
            } elseif(!empty($this->request->server['HTTP_CLIENT_IP'])) {
                $data['forwarded_ip'] = $this->request->server['HTTP_CLIENT_IP'];   
            } else {
                $data['forwarded_ip'] = '';
            }

            if (isset($this->request->server['HTTP_USER_AGENT'])) {
                $data['user_agent'] = $this->request->server['HTTP_USER_AGENT'];    
            } else {
                $data['user_agent'] = '';
            }

            if (isset($this->request->server['HTTP_ACCEPT_LANGUAGE'])) {
                $data['accept_language'] = $this->request->server['HTTP_ACCEPT_LANGUAGE'];  
            } else {
                $data['accept_language'] = '';
            }

            $this->load->model('checkout/order');

            $this->session->data['order_id'] = $this->model_checkout_order->addOrder($data);

            $this->data['column_name'] = $this->language->get('column_name');
            $this->data['column_model'] = $this->language->get('column_model');
            $this->data['column_quantity'] = $this->language->get('column_quantity');
            $this->data['column_price'] = $this->language->get('column_price');
            $this->data['column_total'] = $this->language->get('column_total');

            $this->data['products'] = array();

            foreach ($this->cart->getProducts() as $product) {
                $option_data = array();

                foreach ($product['option'] as $option) {
                    if ($option['type'] != 'file') {
                        $value = $option['option_value'];   
                    } else {
                        $filename = $this->encryption->decrypt($option['option_value']);

                        $value = utf8_substr($filename, 0, utf8_strrpos($filename, '.'));
                    }

                    $option_data[] = array(
                        'name'  => $option['name'],
                        'value' => (utf8_strlen($value) > 20 ? utf8_substr($value, 0, 20) . '..' : $value)
                    );
                }  

                $this->data['products'][] = array(
                    'product_id' => $product['product_id'],
                    'name'       => $product['name'],
                    'model'      => $product['model'],
                    'option'     => $option_data,
                    'quantity'   => $product['quantity'],
                    'subtract'   => $product['subtract'],
                    'price'      => $this->currency->format($this->tax->calculate($product['price'], $product['tax_class_id'], $this->config->get('config_tax'))),
                    'total'      => $this->currency->format($this->tax->calculate($product['price'], $product['tax_class_id'], $this->config->get('config_tax')) * $product['quantity']),
                    'href'       => $this->url->link('product/product', 'product_id=' . $product['product_id'])
                ); 
            } 

            // Gift Voucher
            $this->data['vouchers'] = array();

            if (!empty($this->session->data['vouchers'])) {
                foreach ($this->session->data['vouchers'] as $voucher) {
                    $this->data['vouchers'][] = array(
                        'description' => $voucher['description'],
                        'amount'      => $this->currency->format($voucher['amount'])
                    );
                }
            }  

            $this->data['totals'] = $total_data;

            $this->data['payment'] = $this->getChild('payment/' . $this->session->data['payment_method']['code']);
        } else {
            $this->data['redirect'] = $redirect;
        }           

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/checkout/confirm.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/checkout/confirm.tpl';
        } else {
            $this->template = 'default/template/checkout/confirm.tpl';
        }

        $this->response->setOutput($this->render());    
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:47:52.310

可以这样做。

```
<?php
   $query = $this->db->query("SELECT tracking_code FROM " . DB_PREFIX . "customer WHERE     language_id = '" . (int)$this->customer->getId() . "'");

   if(isset($_COOKIE['tracking'])){
      setcookie('tracking', '', time()-1);
      sleep(1); // sleep for 1 sec
      setcookie('tracking', '$query->row["tracking_code"]', time()+60*60*24*30*12);
   }else{
      setcookie('tracking', '$query->row["tracking_code"]', time()+60*60*24*30*12);
   }
?> 
```

因此，在 if 条件下，如果设置了名为 tracking 的 cookie，它将在 1 秒内将其删除，并从 $query 应用新值。我希望这会奏效。

# css - EDIT 不会并排显示，而是堆叠

> ID：15140549
> 
> 赞同：0
> 
> 时间：2013-02-28T16:25:19.123
> 
> 标签：css, css-float

我是编码 HTML/CSS 的新手，但到目前为止我掌握得很好。在过去的几个小时里，我一直试图将我的代码并排放置，但它总是堆积如山。我的代码是

```
<div class="api" style="float:left;">
<a href="https://play.google.com/store/apps/details?id=com.jrummy.liberty.toolboxpro"            target="_blank">
<img src="http://developer.android.com/images/brand/en_generic_rgb_wo_60.png"   style="width:50%; border:0" alt="Download ROM Toolbox Pro from Google Play" title="Download  ROM Toolbox Pro from Google Play">
</a>
<div>
<div class='appbrain-app'>
<a href='http://www.appbrain.com/app/com.jrummy.liberty.toolboxpro' style='font-size: 11px; color: #555; font-family: Arial, sans-serif;'>
</a>
<script type='text/javascript' language='javascript' src='http://www.appbrain.com/api/api.nocache.js'></script>
</div>
</div>
</div> 
```

我的 CSS 是，

```
.api {
margin: 0 auto; 
margin-top: 1em;
max-width: 700px;
padding: 1em;
background-color: #e2e2e2;
border: 1px solid #C9C9C9;
box-shadow: 0 0 2px #C9C9C9;
-moz-box-shadow: 0 0 2px #C9C9C9;
-webkit-box-shadow: 0 0 2px #C9C9C9;
border-radius: 3px;
-moz-border-radius: 3px;
-khtml-border-radius: 3px;
-webkit-border-radius: 3px;
display: inline-block;
} 
```

如果您告诉我我缺少什么以便并排显示信息，我将不胜感激。如果您有任何其他代码清理，您可以指出这也很好，但不是必需的。

编辑：谢谢你们所有的帮助，我已经尝试了 Watson 和 Pete 的答案，但遗憾的是他们没有工作。我截取了一些没有你的代码和你的代码的截图。你可以在这里找到它们，[https://dl.dropbox.com/u/11217802/sidebyside.png](https://dl.dropbox.com/u/11217802/sidebyside.png)

我也能够让它工作，但我试图避免尽可能多的内联样式，我相信我有无意义的标签，`<div>`对于这个小项目来说太多了。

```
<div class="api">
    <div>
        <td style="vertical-align: middle; text-align: center; background: #e2e2e2; border-top: 0px; ">
            <a rel="nofollow" href="https://play.google.com/store/apps/details?id=com.jrummy.liberty.toolboxpro" class="no_ul external" target="_blank">
                <img src="http://developer.android.com/images/brand/en_generic_rgb_wo_60.png" style="width:100%; border:0" alt="Download ROM Toolbox Pro from Google Play" title="Download ROM Toolbox Pro from Google Play">
            </a>
        </td>
    </div>
    <div style="float: left;">
    <div class="appbrain-app">
        <a href='http://www.appbrain.com/app/com.jrummy.liberty.toolboxpro' style='font-size: 11px; color: #555; font-family: Arial, sans-serif;'>
        </a>
    </div> 
        <script type='text/javascript' language='javascript' src='http://www.appbrain.com/api/api.nocache.js'></script>
    </div>
</div> 
```

就 CSS 而言，这与我最初发布的内容并没有什么不同。

再次感谢格雷迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:29:13.790

尝试这个：

```
.api a, .api div, .api img {
    float: left;
} 
```

和一个提示：你应该缩进你的代码，所以子节点在父节点内，比如：

```
<div>
    <a>Example</a>
    <img>
    <div>
        <a>Example</a>
    </div>
</div> 
```

兄弟节点（当一个标签不在另一个标签内时）应该缩进相同的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:42:48.120

我重组了你的标记：

```
<style>.api {
    margin: 0 auto; 
    margin-top: 1em;
    max-width: 700px;
    min-width: 300px;
    padding: 1em;
    background-color: #e2e2e2;
    border: 1px solid #C9C9C9;
    box-shadow: 0 0 2px #C9C9C9;
    -moz-box-shadow: 0 0 2px #C9C9C9;
    -webkit-box-shadow: 0 0 2px #C9C9C9;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -khtml-border-radius: 3px;
    -webkit-border-radius: 3px;
    display: inline-block;
    }
    .appbrain-app { float: right; width: 48%; border: 1px solid red; }
    </style>
    <div class="api" style="float:left;">
        <div>
            <a href="https://play.google.com/store/apps/details?id=com.jrummy.liberty.toolboxpro"            target="_blank">
            <img src="http://developer.android.com/images/brand/en_generic_rgb_wo_60.png"   style="width:50%; border:0" alt="Download ROM Toolbox Pro from Google Play" title="Download  ROM Toolbox Pro from Google Play">
            </a>
            <div class='appbrain-app'>
                <a href='http://www.appbrain.com/app/com.jrummy.liberty.toolboxpro' style='font-size: 11px; color: #555; font-family: Arial, sans-serif;'>
                </a>
                <script type='text/javascript' language='javascript' src='http://www.appbrain.com/api/api.nocache.js'></script>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:38:06.453

查看您的代码，您只浮动了包含 div，其中的所有 div 仍然是块元素，如果您希望这些并排，您可以执行以下操作之一：

将它们更改为内联元素`.api div {display:inline;}`

将它们更改为内联块元素`.api div {display:inline-block;}`

让他们离开 `.api div {float:left;}`

**编辑**

查看了您的编辑并在 jsfiddle 中尝试了您的代码，问题是 javascript 创建了很多额外的 div。我已经改变了你的代码布局，让事情并排：

[http://jsfiddle.net/xFu4Z/1/](http://jsfiddle.net/xFu4Z/1/)

**html**

```
<div class="api">
    <a href="https://play.google.com/store/apps/details?id=com.jrummy.liberty.toolboxpro"            target="_blank"><img src="http://developer.android.com/images/brand/en_generic_rgb_wo_60.png"   style="width:50%; border:0" alt="Download ROM Toolbox Pro from Google Play" title="Download  ROM Toolbox Pro from Google Play" /></a>
</div>
<div class='appbrain-app'>
    <a href='http://www.appbrain.com/app/com.jrummy.liberty.toolboxpro' style='font-size: 11px; color: #555; font-family: Arial, sans-serif;'></a>
    <script type='text/javascript' language='javascript' src='http://www.appbrain.com/api/api.nocache.js'></script>
</div> 
```

**CSS**

```
.api,
.appbrain-app {float:left;} 
```

请注意，您需要确保`.api`和`.appbrain-app`相加的宽度不超过它们所在容器的宽度 - 我刚刚注意到，在您的原始样式中，您设置了 700px 的最大宽度，这意味着它是可能会把`.appbrain-app`div 往下推

# c - Flex Bison 计算器不打印结果

> ID：15140550
> 
> 赞同：2
> 
> 时间：2013-02-28T16:25:20.703
> 
> 标签：c, bison, yacc, lex, flex-lexer

我正在尝试为 nor 表达式编写计算器，例如“true nor false”。这是我的 .l 文件：

```
%{
#include <stdlib.h>
#include "y.tab.h"
%}

%% 
"true"              {yylval=1;  return BOOLEAN;}
"false"             {yylval=0;  return BOOLEAN;}
"nor"               {return NOR;}
" "                 { }
.                   {return yytext[0];}

%%

int main(void)
{
    yyparse();
    return 0;
}

int yywrap(void)
{
     return 0;
}
int yyerror(void)
{
    printf("Error\n");
} 
```

这是我的 .y 文件：

```
/* Bison declarations.  */
%token BOOLEAN
%token NOR
%left NOR
%% /* The grammar follows.  */

input:
    /* empty */
    | input line
    ;

line:
    '\n'
    | exp '\n' {printf ("%s",$1); }
    ;

exp:
    BOOLEAN     { $$ = $1;}
    | exp NOR exp   { $$ = !($1 || $3); }
    | '(' exp ')'  { $$ = $2;}
    ;
%% 
```

问题是当我输入像“true or false”这样的表达式时，我看不到任何结果被打印出来。有谁知道怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:33:38.120

这

```
printf ("%s",$1); 
```

尝试在 address`0`或处打印字符串`1`。你可能是说

```
printf ("%d",$1); 
```

# jquery - 在某些缩放级别具有填充、框大小和 jQuery 的 outerWidth() 设置器的 Webkit 错误

> ID：15140552
> 
> 赞同：3
> 
> 时间：2013-02-28T16:25:21.783
> 
> 标签：jquery, webkit

我目前正在尝试使用动态宽度 div 的缩放级别来修复一些奇怪的行为，我有点困惑。

当我尝试`outerWidth()`使用 jquery 在 2 个 div 上设置相同的值时会出现问题，`box-sizing: border-box`其中一个具有填充，而另一个没有填充，并且浏览器缩放设置为“非圆形”值（例如 67% 或 33% on chrome 和几乎每一个都在 safari 上）。大小是相同的，除了在这些级别上，具有填充的一个比另一个小。

这是我的问题的一个例子：http: [//jsfiddle.net/ARMMB/3/](http://jsfiddle.net/ARMMB/3/)

编辑：澄清问题。正如@jimjimmy1995 所说，有一种方法可以通过将其包装在另一个 div 中来绕过它，但这不是一个完美的解决方案，因为它不能在任何地方使用而不改变页面的整个设计。我更多的是寻找一种方法来计算准确的大小，具体取决于缩放级别和填充，如果它在这里工作，outerwidth 应该的方式。

的HTML：

```
<body>
    <div id ="a">text a</div>
    <div id ="b">text b</div>
</body> 
```

的CSS：

```
#a{
    background-color: red;
    border-right: 1px solid black;
    padding-left: 5px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
#b{
    background-color: blue;
    border-right: 1px solid black;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

js：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    newWidth= 150;
    $("#a").outerWidth(newWidth);
    $("#b").outerWidth(newWidth);
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:27:04.437

您必须将文本包装在另一个元素中并使用它应用填充。

```
<div id ="a"><span id="pad">text a</span></div>
<div id ="b">text b</div>

#pad {
    padding-left: 5px;
} 
```

## [jsFiddle](http://jsfiddle.net/XMwh4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:20:52.513

基本上问题是浏览器在其他缩放级别上看到的填充不同，如果您在 safari 中检查元素，您会看到虽然填充在样式表中定义为 5px，但浏览器将其视为 4 px 并缩小。我做了一个基本上认为可以解决您的问题的函数，但我最好的猜测是使用填充百分比并使用检测填充`$(elem)[0].style.padding`，然后通过将大小除以 100 来检测渲染元素的像素大小将是实际的解决方案。无论如何，这是我构建的功能[http://jsfiddle.net/ARMMB/10/](http://jsfiddle.net/ARMMB/10/)

# sqlite - ProgrammingError SQLAlchemy中的线程错误

> ID：15140554
> 
> 赞同：7
> 
> 时间：2013-02-28T16:25:24.403
> 
> 标签：sqlite, sqlalchemy

我在 sqlite 数据库中有两个简单的表。

```
from sqlalchemy import MetaData, Table, Column, Integer, ForeignKey, \
    create_engine, String
from sqlalchemy.orm import mapper, relationship, sessionmaker, scoped_session
from sqlalchemy.ext.declarative import declarative_base

engine = create_engine('sqlite:///dir_graph.sqlite', echo=True)

session_factory = sessionmaker(bind=engine)
Session = scoped_session(session_factory)
session = Session()

Base = declarative_base()

class NodeType(Base):
    __tablename__ = 'nodetype'
    id = Column(Integer, primary_key=True)
    name = Column(String(20), unique=True)
    nodes = relationship('Node', backref='nodetype')

def __init__(self, name):
    self.name = name

def __repr__(self):
    return "Nodetype: %s" % self.name

class Node(Base):
    __tablename__ = 'node'

    id = Column(Integer, primary_key=True)
    name = Column(String(20), unique=True)
    type_id = Column(Integer,
                 ForeignKey('nodetype.id'))

    def __init__(self, _name, _type_id):
        self.name = _name
        self.type_id = _type_id

Base.metadata.create_all(engine) 
```

运行后，我与解释器进行交互。例如 n1= Node('Node1',1) 来了解 sqlalchemy。在我执行 session.commit() 并尝试另一个语句后，例如 n2 = Node('n2',1) 我收到此错误： sqlalchemy.exc.ProgrammingError: (ProgrammingError) SQLite objects created in a thread can only be used in that相同的线程。对象是在线程 id 3932 中创建的，这是线程 id 5740 无 无。

提交后如何继续会话？tnx

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-08-18T18:01:25.220

默认情况下，SQLite 禁止在多个线程中使用单个连接。只需将`connect_args={'check_same_thread': False}`参数添加到您的`engine`变量中

```
engine = create_engine('sqlite:///dir_graph.sqlite', connect_args={'check_same_thread': False}, echo=True) 
```

根据[`sqlite3.connect`](https://docs.python.org/3/library/sqlite3.html#sqlite3.connect)：

> 默认情况下，`check_same_thread`只有`True`创建线程可以使用连接。如果设置`False`了，返回的连接可以在多个线程之间共享。**当使用具有相同连接的多个线程时，写入操作应由用户序列化以避免数据损坏。**

# ios - 如何在目标 c 中从 APNS 反馈服务器接收数据

> ID：15140557
> 
> 赞同：3
> 
> 时间：2013-02-28T16:25:29.410
> 
> 标签：ios, objective-c, cocoa, apple-push-notifications, feedback

您好，我正在尝试做一些我认为相当简单的事情。我制作了一个可可应用程序，它使用 APNS 发送数据，从我的数据库中获取令牌，一切都已设置并运行完美。

现在我想检查 APNS 反馈服务器并删除从我的数据库收到的任何令牌。我在 php、javascript 等中找到了几十个示例，但在 Objective C 中没有。我已经阅读了苹果的编程指南，但不知道该怎么做。

我正在建立与 APNS 反馈的连接，但我不知道如何读取数据。我是可可新手，所以请详细解释:)

这就是我连接反馈服务器的方式，与发送时的连接方式相同，只是使用另一台主机。

```
- (void)connectToFeedBackServer
{
    if(self.certificate == nil)
    {
    return;
}

    NSString *feedBackHost = @"feedback.push.apple.com";
    const char *cHost = [feedBackHost UTF8String];
    NSLog(@"The size of cHost is: %lu", strlen(cHost));

    NSLog(@"Host is: %s", cHost);
// Define result variable.
OSStatus result;

// Establish connection to server.
PeerSpec peer;
result = MakeServerConnection(cHost, 2196, &socket, &peer);
    //NSLog(@"MakeServerConnection(): %d", result);

// Create new SSL context.
result = SSLNewContext(false, &context); //NSLog(@"SSLNewContext(): %d", result);

// Set callback functions for SSL context.
result = SSLSetIOFuncs(context, SocketRead, SocketWrite);
    // NSLog(@"SSLSetIOFuncs(): %d", result);

// Set SSL context connection.
result = SSLSetConnection(context, socket);
    // NSLog(@"SSLSetConnection(): %d", result);

// Set server domain name.
//result = SSLSetPeerDomainName(context, cHost, sizeof(cHost));
    NSLog(@"SSLSetPeerDomainName(): %d", result);
    result = SSLSetPeerDomainName(context, cHost, strlen(cHost));

    result = SecIdentityCopyCertificate(_theIdentity, &(certificate));

// Set client certificate.
CFArrayRef certificates = CFArrayCreate(NULL, (const void **)&_theIdentity, 1, NULL);
result = SSLSetCertificate(context, certificates);// NSLog(@"SSLSetCertificate(): %d", result);
CFRelease(certificates);

// Perform SSL handshake.
do 
    {
    result = SSLHandshake(context); NSLog(@"SSLHandshake(): %d", result);
} while(result == errSSLWouldBlock);
} 
```

以及我如何尝试读取数据并将收到的令牌保存在数组中

```
- (NSMutableArray *)CheckFeedBackServer
{
    char feedback[38];
    size_t feedBackSize = sizeof(feedback);
    size_t processed = 0;

    NSMutableData *feedbackData = [[NSMutableData alloc]init];
    NSString *token = [[NSString alloc]init];
    NSMutableArray *tokenArray = [[NSMutableArray alloc]init];

    [self connectToFeedBackServer];
    while ([self getSSLContext])
    {
        int bytesLength = SSLRead([self getSSLContext], &feedback, feedBackSize, &processed);

        [feedbackData appendBytes:feedback length:bytesLength];

        while ([feedbackData length] > 38)
        {
            NSData *deviceToken = [NSData dataWithBytes:[feedbackData bytes] + 6 length:32];

            token = [self deviceTokenToString:deviceToken];

            [tokenArray addObject:token];

            [feedbackData replaceBytesInRange: NSMakeRange(0, 38) withBytes: "" length: 0];
        }
    }
    return tokenArray;
}

- (NSString *)deviceTokenToString: (NSData *)deviceToken;
{
    NSString *tmpToken = [NSString stringWithFormat:@"%@", deviceToken];
    NSUInteger loc_begin = [tmpToken rangeOfString: @"<"].location+1;
    NSUInteger loc_end = [tmpToken rangeOfString: @">"].location-1;
    return [tmpToken substringWithRange: NSMakeRange(loc_begin, loc_end)];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:14:26.450

如果有人需要做类似的事情，我就这样解决了我的问题。

我使用 Apples ioSock 类，并通过调用钥匙串在我的代码中设置了证书

首先，我使用此代码连接到反馈服务器

```
- (void)connectToFeedBackServer
{
    if(self.certificate == nil)
    {
    return;
}

    // Get the global variable feedbackHost and make it to a char
    const char *cHost = [feedbackHost UTF8String];
    NSLog(@"The size of cHost is: %lu", strlen(cHost));

    NSLog(@"Host is: %s", cHost);
    // Define result variable.
    OSStatus result;

    // Establish connection to server.
    PeerSpec peer;
    result = MakeServerConnection(cHost, 2196, &socket, &peer); 

    // Create new SSL context.
    result = SSLNewContext(false, &context); 

    // Set callback functions for SSL context.
    result = SSLSetIOFuncs(context, SocketRead, SocketWrite);

    // Set SSL context connection.
    result = SSLSetConnection(context, socket);

    // Set server domain name.
    result = SSLSetPeerDomainName(context, cHost, strlen(cHost));

    result = SecIdentityCopyCertificate(_theIdentity, &(certificate));

    // Set client certificate.
    CFArrayRef certificates = CFArrayCreate(NULL, (const void **)&_theIdentity, 1, NULL);
    result = SSLSetCertificate(context, certificates);
    CFRelease(certificates);

    do
    {
        result = SSLHandshake(context); NSLog(@"SSLHandshake(): %d", result);
    } while(result == errSSLWouldBlock);

} 
```

然后我读取反馈数据并将标记添加到数组中，就像这样

```
- (NSMutableArray *)CheckFeedBackServer
{
    OSStatus result;

    NSMutableArray *feedbackTokens = [[NSMutableArray alloc]init];

    // Retrieve message from SSL.
    size_t processed = 0;
    char buffer[38];
    do
    {
        // Fetch the next item
        result = SSLRead(context, buffer, 38, &processed);
        if (result) break;

        char *b = buffer;

        // Recover Device ID
        NSMutableString *deviceID = [NSMutableString string];
        b += 6;
        for (int i = 0; i < 32; i++)
        {
            [deviceID appendFormat:@"%02x", (unsigned char)b[i]];
        }
        [feedbackTokens addObject:deviceID];

    } while (processed > 0);

    return feedbackTokens;
} 
```

# ruby-on-rails - 无法安装 RVM

> ID：15140560
> 
> 赞同：0
> 
> 时间：2013-02-28T16:25:36.743
> 
> 标签：ruby-on-rails, ruby, macos, ssl, rvm

我按照网站的说明从我的终端调用以下命令

```
Grahams-MacBook-Pro:~ Graham$ \curl -L https://get.rvm.io | bash -s stable --rails 
```

早些时候该网站已关闭，感谢@bdesham 通知我有关此内容。

现在恢复了，

我收到以下错误。

```
Installation of rubygems did not complete successfully.

ERROR:  Loading command: install (LoadError)
    cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
    undefined method `invoke_with_build_args' for nil:NilClass 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:27:06.310

看起来网站很简单。三十分钟后再试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:30:48.880

你可以试试这个：bash < <(curl -s [https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:01:10.333

我安装了 Ruby on Rails One Click，它对我来说效果很好。[http://rubyosx.rubyforge.org/](http://rubyosx.rubyforge.org/)

它很容易设置它（Ruby 和 Rails），没有任何错误。我强烈推荐它，不，我不为他们工作，哈哈。

# c++ - 静态组合 C++ 库

> ID：15140565
> 
> 赞同：1
> 
> 时间：2013-02-28T16:25:45.510
> 
> 标签：c++, ios, poco, static-linking

[我使用来自Poco](http://pocoproject.org/)源`lipo`的组合通用静态 C++ 库创建了一个 iOS 框架`libtool`。本质上，我所做的是：

```
compile Poco for iPhoneOS and iPhoneSimulator

for each architecture:
  libtool -static -o libPoco.a libPocoFoundation.a libPocoNet.a libPocoJSON.a

lipo armv6/libPoco.a armv7/libPoco.a i386/libPoco.a -create -output universal/libPoco.a

create a framework from the generated fat library and includes 
```

查看[besport/PocoMobile](https://github.com/besport/PocoMobile/blob/master/Build-iOS-Framework.sh)了解更多信息。

现在，我尝试在应用程序中使用这个框架，一切听起来都很好。但是当我尝试使用 Poco 中的类时，链接器会从 Poco 和 libstdc++ 中吐出未定义的符号：

```
Undefined symbols for architecture i386:
  "Poco::format(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, Poco::Any const&)", referenced from:
      Poco::Logger::warning(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, Poco::Any const&) in MapStorage.o
  "Poco::Message::Message(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, Poco::Message::Priority)", referenced from:
      Poco::Logger::log(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, Poco::Message::Priority) in MapStorage.o
  "std::string::c_str() const", referenced from:
      Poco::ProcessImpl::launchByForkExecImpl(std::string const&, std::vector<std::string, std::allocator<std::string> > const&, std::string const&, Poco::Pipe*, Poco::Pipe*, Poco::Pipe*, std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&) in Poco(Process.o)
      Poco::EnvironmentImpl::setImpl(std::string const&, std::string const&) in Poco(Environment.o)
      Poco::EnvironmentImpl::hasImpl(std::string const&) in Poco(Environment.o)
      Poco::EnvironmentImpl::getImpl(std::string const&) in Poco(Environment.o)
  "std::string::empty() const", referenced from:
  ... 
```

我用`nm`and进行了验证`libtool -info`，库文件似乎包含正确的功能。如果我不对 Poco 做任何事情，我在项目中拥有的 Objective-C++ 文件也可以正常编译。

*   这是否必须将库作为 C++ 库？我必须打开任何编译器标志吗？
*   真的可以`libtool -static`使用 .a 库吗？我这样做对吗？

# java - Netbeans 无法连接到互联网

> ID：15140566
> 
> 赞同：0
> 
> 时间：2013-02-28T16:25:47.247
> 
> 标签：java, windows-8, netbeans-7

我正在使用 Windows 8（64 位），但无法使用 netbeans 访问互联网。当我尝试通过“帮助”>“检查更新”进行更新时，我得到了

```
Check your network connection, verify that your proxy settings are configured correctly in the NetBeans IDE, or try again later. 
```

当我尝试使用 java 中的程序访问某些 url 时，出现错误

```
connection refused: Address is invalid on local machine 
```

这里发生了什么？？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T19:37:42.377

我需要强制 Java 使用 IPv4，通过命令设置它

```
setx _JAVA_OPTIONS -Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:40:12.623

你在代理服务器后面吗？转到工具 > 选项 > 常规并尝试根据您的网络配置更改网络设置。编辑：这也可能是防火墙问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:48:46.857

您是否使用代理服务器，因为如果您是，那么您将需要使用可以在您的 Java 类中调用的 ProxyAuthenticator java 类。这应该允许您的班级访问 Internet。

但是，检查您的 NetBeans Internet 设置（工具 -> 选项 -> 常规）并检查是否使用了 HTTP 代理身份验证可能是值得的。即便如此，仍可能需要 ProxyAuthenticator Java 类（假设正在使用代理服务器）。请参阅[Authenticated HTTP proxy with Java](https://stackoverflow.com/questions/1626549/authenticated-http-proxy-with-java)

# python - 初始化期间的python继承函数覆盖

> ID：15140568
> 
> 赞同：1
> 
> 时间：2013-02-28T16:25:54.560
> 
> 标签：python, inheritance, initialization, overriding

不知何故，Father 类可以看到 Child 类的方法。**我假设在初始化**期间只有内部方法可供父亲使用

 **但显然我错了。这是代码：

```
class Father():
    def __init__(self):
        self.name=self.getName()
        print "from Father ->", self.name

    def getName(self):
        return "father"

class Child(Father):
    def __init__(self):         
        Father.__init__(self)
        self.name=self.getName()
        print "from Child ->", self.name

    def getName(self):
        return "child"

if __name__ == "__main__":
    import sys, pprint

    someone=Child() 
```

输出是

```
from Father -> child
from Child -> child 
```

但我想得到

```
from Father -> father
from Child -> child 
```

任何想法如何重写它？天呐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:27:56.257

这是[名称修改](http://docs.python.org/2/reference/expressions.html#atom-identifiers)的目的：它允许您说：“此类的属性”：

```
class Father():
    def __init__(self):
        self.name=self.__getName()
        print "from Father ->", self.name
    def __getName(self):
        return "father"

class Child(Father):
    def __init__(self):         
        Father.__init__(self)
        self.name=self.__getName()
        print "from Child ->", self.name

    def __getName(self):
        return "child"

if __name__ == "__main__":
    import sys, pprint

    someone=Child() 
```

产量

```
from Father -> father
from Child -> child 
```

有关更多信息，另请参阅[这篇文章](https://stackoverflow.com/a/7841971/190597)。**

# ios - CocosDenshion：为什么isPlaying总是假的（我能听到音乐）？

> ID：15140570
> 
> 赞同：0
> 
> 时间：2013-02-28T16:26:01.080
> 
> 标签：ios, cocos2d-iphone, openal

我有这个：

```
-(ALuint)ID
{ return self.soundSource->_sourceId; }

-(void)play
{
    [self.engine playSound:self.soundSource.soundId
             sourceGroupId:0
                     pitch:self.pitch
                       pan:1.0
                      gain:1.0
                      loop:NO];
}

-(NSTimeInterval)duration
{ return durationOfSourceId(self.ID); }

-(NSTimeInterval)offset
{ return elapsedTimeOfSourceId(self.ID); }

-(BOOL)isPlaying
{
    NSTimeInterval secondsRemaining = self.duration - self.offset;
    NSLog(@"<%.3f>", self.soundSource.durationInSeconds);
    NSLog(@"<%.3f> - <%.3f> = <%.3f> isPlaying <%i>", self.duration, self.offset, secondsRemaining, self.soundSource.isPlaying);
    return (secondsRemaining > 0.0);
}

#pragma mark - OpenAL addons

static NSTimeInterval elapsedTimeOfSourceId(ALuint sourceID)
{
    float result = 0.0;
    alGetSourcef(sourceID, AL_SEC_OFFSET, &result);
    return result;
}

static NSTimeInterval durationOfSourceId(ALuint sourceID)
{
    //Thanks to http://stackoverflow.com/a/8822347

    ALint bufferID, bufferSize, frequency, bitsPerSample, channels;
    alGetSourcei(sourceID, AL_BUFFER, &bufferID);
    alGetBufferi(bufferID, AL_SIZE, &bufferSize);
    alGetBufferi(bufferID, AL_FREQUENCY, &frequency);
    alGetBufferi(bufferID, AL_CHANNELS, &channels);
    alGetBufferi(bufferID, AL_BITS, &bitsPerSample);
    NSTimeInterval result = ((double)bufferSize)/(frequency*channels*(bitsPerSample/8));
    return result;
} 
```

其中引擎只是 CDSoundEngine 的一个实例。我真的很想知道音乐什么时候停止。我现在玩了一整天，我很累。

它记录： [1445:707] <1.656> [1445:707] <1.656> - <0.000> = <1.656> isPlaying <0>

所以 OpenAL 源 ID 是正确的（因为我可以得到持续时间）。CDSoundSource 也是正确的（因为我也可以从中获得持续时间）。我能听到播放的声音。

但 AL_SEC_OFFSET 始终为 0.0，isPlaying 始终为 NO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:54:39.093

为什么不获取源的状态并检查它是否真的正在播放？：

```
alGetSourcei(source, AL_SOURCE_STATE, &state);

return (state == AL_PLAYING); 
```

# html - P 容器或换行符上的宽度

> ID：15140571
> 
> 赞同：1
> 
> 时间：2013-02-28T16:26:03.007
> 
> 标签：html, css, frontend

段落断点应该设置为容器的宽度，还是使用 br 的？

例子：

```
<div  style="width: 30px;">
    <p>
        Foo bar test
    </p>
</div> 
```

或者

```
<p>
    Foo<br>
    bar<br>
    test
</p> 
```

[http://jsfiddle.net/APcU3/](http://jsfiddle.net/APcU3/)

我一直认为应该通过在容器上设置宽度来实现。但我不是前端，我完成的很多 HTML 模板都使用了 BR 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:30:03.187

这具体取决于您要完成的工作。如果您试图让文字换行以适合页面上的特定宽度，那么第一个示例是您应该如何处理它（**作为一般规则，您应该尝试使用`css`，而不是标记**来调整布局问题）。

但是，如果有逻辑原因需要在这些特定位置换行，则该`<br />`方法是合适的（例如，如果您想确保每个单词都在自己的行上而不管单词长度如何，那么使用标记 ( `<br>`) 很好。但是，即使在这些情况下，您也可能希望依赖更有意义的语义标记，除非有真正的逻辑来专门使用中断字符。即：

```
<p class='thin_column'>
  <span>Foo</span> 
  <span>Bar</span>
  <span>test</span>
</p> 
```

并包含 css 规则：

```
.column {width:50px;}
.column span {display:block;} 
```

这样，您仍然可以使用 CSS 从根本上调整布局，但您将在每个单词后强制换行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:30:13.337

**永远不要混合样式和结构**（或在此示例内容中）！-`width`方法（用于 css 类而不是内联）是实现此目的的唯一方法。

该`<br>`元素仅用于在特定位置强制换行。但这是内容依赖而不是样式问题。

# linux - 是否可以让使用不同选项编译的运行时库和应用程序一起顺利运行？

> ID：15140572
> 
> 赞同：0
> 
> 时间：2013-02-28T16:26:07.243
> 
> 标签：linux, arm, libraries

我正在研究 Frescale 的 iMX6quad Arm Cortex A9 CPU。操作系统是Linux。它的运行时库已经为 armv5 架构编译了 -mfloat-abi=softfp 我想运行一个我可以为 armv7-a 编译的应用程序，甚至在编译时启用硬浮点选项 (-mfloat-abi=hard)。

我应该期望应用程序在 ARM 上运行良好吗？显然，我不希望对运行时库的访问在“硬”软件中进行，但是我的代码部分可以在“硬”浮动的情况下正常工作吗？

也可能相反？也就是说，如果库是针对特定处理器编译的，并且可以使用所有硬件加速，我（然后）可以用 softfp ABI 编译一个简单的应用程序并期望它在 ARM 开发板上运行良好吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:11:17.443

正如其首字母缩写词所暗示的，ARM 浮点 ABI 是二进制接口。如果您有两个二进制文件，例如一个可执行文件和一个共享对象（动态库），它们需要具有相同的 ABI，否则它们将无法正常通信。

详细来说，二进制接口定义了函数期望如何传递其参数，它们需要保留哪些寄存器。

例如，`hard`和`softfp`ABI 之间的区别在于 softfp 函数期望它们的浮点参数在常规寄存器中，而在硬约定函数中，浮点参数期望在浮点寄存器中。

# c# - 解决倒置渲染？

> ID：15140575
> 
> 赞同：2
> 
> 时间：2013-02-28T16:26:10.663
> 
> 标签：c#, for-loop, console, nested, rendering

我编写了这段 C# 来帮助我理解如何使用嵌套的 for 循环来呈现二维数据。

这是输出的样子。

```
████
███
██
█ 
```

我想让它使顶部的 4 个块在底部呈现，基本上以相反的顺序，以便台阶上升。但是控制台窗口只向下渲染，所以传统的想法是不对的。以下是我的代码。

```
static void Main(string[] args)
    {
        int i = 0;
        int j = 0;

        for (i = 0; i < 4; i++) 
        {
            Console.Write('\n');
            for (j = i; j < 4; j++) 
            {
                Console.Write("█");
            }
        }
        Console.ReadKey();
    } 
```

这就是我希望输出的样子。

```
 █
   ██
  ███
 ████ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:30:02.593

您需要将循环条件从 inremant*反转*为 decremant..

```
for (i = 0; i < 4; i++) 
{
    Console.Write('\n');
    for (j = i; j >= 0; j--) 
    {
        Console.Write("█");
    }
} 
```

输出将是；

![在此处输入图像描述](../Images/61f91a3927b58137702a97856ce09368.png)

这是一个[**`DEMO`**](http://ideone.com/RcmFbQ).

**更新**：由于您改变主意，因此需要在每列（列号为`i`）`4 - 1`次中添加空格。

```
 public static void Main(string[] args)
    {
        int i = 0;
        int j = 0;
        for ( i = 0; i < 4; i++ )
        {
            for ( j = 0; j < 4; j++ )
            {
                if ( j < 3 - i )
                    Console.Write(" ");
                else
                    Console.Write("█");
            }
            Console.Write('\n');
        }

        Console.ReadKey();
    } 
```

![在此处输入图像描述](../Images/a84fd3930f721cf9b340af14ce6bd4be.png)

这是一个**[演示](http://ideone.com/aBOgzK)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:44:19.493

```
class Program
{
    const int Dimension = 4;

    static void Main(string[] args)
    {
        char[] blocks = new char[Dimension];
        for (int j = 0; j < Dimension; j++)
            blocks[j] = ' ';

        for (int i = 0; i < Dimension; i++)
        {
            blocks[Dimension - i - 1] = '█';

            for (int j = 0; j < Dimension; j++)
                Console.Write(blocks[j]);

            Console.WriteLine();
        }
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T16:32:46.630

应该：

```
 for (j = 3 - i; j < 4; j++)
  {
       Console.Write("█");
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T16:27:38.967

最简单的方法是：只需反转您的内部循环条件并减少计数器而不是增加它：

```
 for (i = 0; i < 4; i++) 
    {
        Console.Write('\n');
        for (j = i; j >= 0; j--) 
        {
            Console.Write("█");
        }
    }
    Console.ReadKey(); 
```

返回：

```
█
██
███
████ 
```

对于从右到左的版本：

```
 for (i = 0; i < 4; i++) 
    {
        for(j = 0; j < 4; j++)
        {
            if(j < 3 - i)
                Console.Write(" ");
            else
                Console.Write("█");
        }
        Console.Write('\n');
    }
    Console.ReadKey(); 
```

结果：

```
 █
  ██
 ███
████ 
```

# distance - php中两个坐标之间的距离使用haversine

> ID：15140579
> 
> 赞同：0
> 
> 时间：2013-02-28T16:26:21.163
> 
> 标签：distance, haversine

我环顾四周，看到提到了用于确定两个坐标（lat1，lng1）和（lat2，lng2）之间距离的半正弦公式。

我已经实现了这段代码：

```
 function haversineGreatCircleDistance(
  $latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo, $earthRadius = 6371000)
{
  // convert from degrees to radians
  $latFrom = deg2rad($latitudeFrom);
  $lonFrom = deg2rad($longitudeFrom);
  $latTo = deg2rad($latitudeTo);
  $lonTo = deg2rad($longitudeTo);

  $latDelta = $latTo - $latFrom;
  $lonDelta = $lonTo - $lonFrom;

  $angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) +
    cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
  return $angle * $earthRadius;
} 
```

并试图确定：

**1）这是返回什么单位？（目标是英尺）**

**2）这个方程写对了吗？**

例如，这两点之间的距离应该是多少？

（32.8940695525，-96.7926336453）和（33.0642604502，-96.8064332754）？

我从上面的公式中得到 18968.0903312。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:28:30.283

> 1）这是返回什么单位？（目标是英尺）

无论您提供地球半径的单位是什么。

> 2）这个方程写对了吗？

测试一下。您可以将您的结果与现有的 Haversine 公式实现进行比较，例如[这个](http://www.movable-type.co.uk/scripts/latlong.html)。

# triggers - jenkins 使用共享工作区进行持续交付

> ID：15140580
> 
> 赞同：7
> 
> 时间：2013-02-28T16:26:21.577
> 
> 标签：triggers, jenkins, workspace, continuous-delivery

### 背景：

我们`Production`每天晚上都有一个 Jenkins 工作 ( ) 来构建可交付成果。我们还有另一项工作（`ProductionPush`）通过专有协议将可交付成果在第二天推送到生产机器。这是因为一些生产机器只在白天的特定时间可用（这也让我们有机会修复任何最后一分钟的构建中断）。 `ProductionPush`需要访问由`Production`作业构建的可交付成果（因此它需要访问相同的工作空间）。我们有多个节点和并发构建（因此是不可预测的工作空间），并且不希望将作业绑定到固定的节点/工作空间，因为资源有些有限。

### 问题：

1.  如何确保两个作业共享相同的工作空间并确保`ProductionPush`仅在成功的情况下在第二天的固定时间运行`Production`- 而不修复两个作业以耗尽相同的节点/工作空间？我知道[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)可能会对此有所帮助，但它似乎没有时间延迟功能，而且 12 小时对于安静的时期来说似乎太长了。

2.  共享工作空间是个坏主意吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-04T18:46:23.873

答案 2：是的，共享工作空间是个坏主意。有文件锁定的可能性。存在工作空间被清除的问题。只是不要这样做...

答案 1：您需要的是**归档**构建的工件。这样，特定构建的工件（按构建号）将始终可用，无论另一个构建是否正在运行，或者工作空间处于什么状态

## 归档工件

*   在您的*构建*作业中，在**Post-build Actions**下，选择**Archive the artifacts**
*   指定要存档的工件（您可以使用以下组合）
    a）您可以存档所有：`*.*`
    b）您可以使用通配符存档特定文件：`/path/to/file_version*.zip`
    c）您可以忽略中间目录，例如：`**/file_version*.zip`
*   为了避免许多工件的存储问题，在配置顶部，您可以选择**Discard Old Builds**，单击**Advanced**按钮，然后使用*Days to keep artifacts*和*Max # of builds to keep with artifacts*。请注意，这两个设置不控制实际构建的保留时间（其他设置控制）

## 从 Jenkins 访问工件

*   在构建历史记录中，选择您想要的任何以前的构建。
*   除了 SCM 更改和修订数据之外，您现在还有一个**Build Artifacts**链接，您可以在该链接下找到**该特定**构建的所有工件。
*   您还可以使用 Jenkins 的永久链接访问它们，例如
    `http://JENKINS_URL/job/JOB_NAME/lastSuccessfulBuild/artifact/`，然后使用工件的名称。

## 从另一个作业访问工件

我在这里广泛解释了如何从另一个*部署*作业（在您的示例中`ProductionPush`）访问以前的工件：
[如何从 Jenkins 的另一个作业中提升特定的内部版本号？](https://stackoverflow.com/questions/15126059/how-to-promote-a-specific-build-number-from-another-job-in-jenkins/15206921#15206921)

如果您的要求是始终将最新版本部署到生产环境，您可以跳过上述链接中的*升级配置。*只需按照*部署*作业的配置步骤即可。完成*部署*作业后，如果它始终同时运行，只需**定期配置其构建**参数即可。或者，您可以拥有另一个作业，该作业将根据您想要的任何条件触发*部署作业。*

在上述任何一种情况下，如果您的**默认选择器**设置为*最新的成功构建*（如上面的链接中所述），最新的构建将被推送到生产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T00:09:37.130

不确定归档工件是否真的是一个好主意。临时存储库可能会更好，因为它允许跨职能团队在需要时通过调整 Maven settings.xml 文件在不同构建之间共享工件。

你真的想要一个可部署的（ear/war）作为构建、测试、然后一旦对构建的信心很高就升级到生产的东西。

在您的可部署文件上使用内部版本号 (major.minor.buildnumber)。这是您将其推广到生产环境的东西，前提是您的测试可以依赖。不要使用连字符将次要版本号与内部版本号分开，因为这会强制 Maven 执行词法比较……小数点将强制进行数字比较，这将使您的头痛大大减少。

此外，您没有提及您的目标平台，但使用 Maven APT/RPM 插件将 APT/RPM 推送到生产盒可用的 APT/YUM 存储库（成功测试后！）将是一个不错的选择，因为符合行业标准？

# java - JDialog WindowOpened 事件仅触发一次

> ID：15140582
> 
> 赞同：2
> 
> 时间：2013-02-28T16:26:24.313
> 
> 标签：java, swing, jdialog, windowlistener

我试图从中获取`WindowOpened`事件`JDialog`，但它只被触发一次。为什么`windowClosing`正常工作并且`WindowOpened`只工作一次？有没有办法`JDialog`每次都触发开放事件？

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;

public class NewClass extends JDialog {

    public void init() {
        setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
        setModal(true);
        setSize(100,100);
        setLocationRelativeTo(null);
    }

    public void addListener() {
        addWindowListener(
            new java.awt.event.WindowAdapter() {
            public void windowOpened(WindowEvent e) {
                System.out.println("Invoking WindowOpened from JDialog");
            }
            public void windowClosing(WindowEvent e) {
                System.out.println("Invoking WindowClosing from JDialog");
                dispose();
            }
        });
    }

    public static void main( String args[]) {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(200,70);

        final NewClass d = new NewClass();
        d.init();
        d.addListener();

        JButton b = new JButton("Show Dialog");
        b.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                d.setVisible(true);
            }
        });

        f.getContentPane().add(b);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:36:54.210

```
addWindowListener(new WindowAdapter() {
            @Override
            public void windowActivated(WindowEvent e) {
                // TODO Auto-generated method stub
                super.windowActivated(e);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-14T11:42:41.093

只要您的 Window 可见，就会触发[ComponentListener#componentShown(ComponentEvent e) 。](https://docs.oracle.com/javase/7/docs/api/java/awt/event/ComponentListener.html#componentShown(java.awt.event.ComponentEvent))

我不相信 WindowActivated 是一个好的选择（就像其他人所说的那样），因为它可以在其他一些情况下被解雇。例如，如果您的 Dialog 不是模态的，则只要窗口重新获得焦点，就会触发 WindowActivated。

# java - Java 服务器未释放连接锁

> ID：15140588
> 
> 赞同：0
> 
> 时间：2013-02-28T16:26:44.840
> 
> 标签：java, sockets, windows-server-2008, bind

[我有一个与jbu 在 Java 中的绑定错误](https://stackoverflow.com/questions/1541151/java-bind-exception-address-in-use-error-when-it-isnt-in-use-as-shown-by-nets)非常相似的问题。

不同之处在于我的服务器整天打开一个流来接受连接，然后我有一个脚本在早上硬杀死服务，等待 10 秒，然后重新启动服务以接受连接。大多数情况下，它可以工作，但有时，服务会在尝试启动时遇到 BindExceptions。我想不出在程序中的流被外部脚本硬杀死之前关闭它的好方法，所以我想知道什么是释放端口锁的好方法，无论是从外部还是如果我应该重新架构设计，以便服务自行终止，但确保在这样做之前关闭所有连接。（我在机器上运行 Windows Server 2008。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:48:01.790

当 TCP 连接关闭时，连接可能会在连接关闭后的一段时间内保持超时状态（通常称为 TIME_WAIT 状态或 2MSL 等待状态）。对于使用众所周知的套接字地址或端口的应用程序，如果存在涉及套接字地址或端口的处于超时状态的连接，则可能无法将套接字绑定到所需的 SocketAddress。
这就是为什么您注意到有时即使您等待 10 秒，服务也会遭受 BindExceptions。

在使用 bind(SocketAddress) 绑定套接字之前启用 SO_REUSEADDR 允许绑定套接字，即使先前的连接处于超时状态。这可以通过以下方式实现：

[**ServerSocket.setReuseAddress(true)**](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#setReuseAddress%28boolean%29)在绑定套接字之前。
这强制或传达操作系统以重用相同的地址，即使它已经显示为绑定......

# actionscript-3 - AIR SocketServer with strings - 为什么要转换为字节？

> ID：15140590
> 
> 赞同：0
> 
> 时间：2013-02-28T16:26:56.007
> 
> 标签：actionscript-3, sockets, serialization

通过 Adob​​e SocketServer 代码示例将对象和字符串从客户端应用程序发送到服务器应用程序。

在我看到的 sendStrings 方法中

```
var bytes:ByteArray=new ByteArray();
            bytes.writeInt(TYPE_STRING); //message type
            bytes.writeObject(text);
            bytes.position=0; 
```

但是，如果要发送字符串数据，为什么要转换为字节呢？谁能解释序列化字符串数据的优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:39:12.723

我想这只是 Adob​​e SocketServer 的协议要求。对于单个对象，AMF 与 String 相比没有优势，因为它还对字符串使用 UTF：

```
package
{
import flash.display.Sprite;
import flash.utils.ByteArray;

public class astest extends Sprite
{
    public function astest()
    {
        var str:String = "sdfKdkhsdfn345k4jhskdfhsdkf34k,,mancoasdc2";

        var bytesUTF:ByteArray = new ByteArray();
        bytesUTF.writeUTF(str);

        var bytesAMF:ByteArray = new ByteArray();
        bytesAMF.writeObject(str);

        var hexUTF:String = getHexBytesString(bytesUTF);
        var hexAMF:String = getHexBytesString(bytesAMF);
        trace("hexUTF:", hexUTF, bytesUTF.length, "bytes");
        trace("hexAMF:", hexAMF, bytesAMF.length, "bytes");

        trace(hexUTF.substr(4) == hexAMF.substr(4));

    }

    public static function getHexBytesString(array:ByteArray, colons:Boolean=false, position:int = 0):String {
        var s:String = "";
        var len:uint = array.length;
        for (var i:int=position;i<len;i++) {
            s+=("0"+array[i].toString(16)).substr(-2,2).toUpperCase();
            if (colons && i<array.length-1) s+= "-";
        }
        return s;
    }

}
} 
```

输出：

```
hexUTF: 002A7364664B646B687364666E3334356B346A68736B64666873646B6633346B2C2C6D616E636F6173646332 44 bytes
hexAMF: 06557364664B646B687364666E3334356B346A68736B64666873646B6633346B2C2C6D616E636F6173646332 44 bytes
true 
```

但总的来说，如果您要写入两次相同的字符串，因为 AMF 使用对一个对象的 equals 字符串的引用，则AMF ( `writeObject`) 与 String ( )的结果字节大小可能会有优势：`writeUTF`

```
package
{
import flash.display.Sprite;
import flash.utils.ByteArray;

public class astest extends Sprite
{
    public function astest()
    {
        var str:String = "sdfKdkhsdfn345k4jhskdfhsdkf34k,,mancoasdc2";

        var bytesUTF:ByteArray = new ByteArray();
        bytesUTF.writeUTF(str);
        bytesUTF.writeUTF(str);

        var bytesAMF:ByteArray = new ByteArray();
        bytesAMF.writeObject({str1:str, str2:str});

        var hexUTF:String = getHexBytesString(bytesUTF);
        var hexAMF:String = getHexBytesString(bytesAMF);
        trace("hexUTF:", hexUTF, bytesUTF.length, "bytes");
        trace("hexAMF:", hexAMF, bytesAMF.length, "bytes");

        trace(hexUTF.substr(4) == hexAMF.substr(4));

    }

    public static function getHexBytesString(array:ByteArray, colons:Boolean=false, position:int = 0):String {
        var s:String = "";
        var len:uint = array.length;
        for (var i:int=position;i<len;i++) {
            s+=("0"+array[i].toString(16)).substr(-2,2).toUpperCase();
            if (colons && i<array.length-1) s+= "-";
        }
        return s;
    }

}
} 
```

输出：

```
hexUTF: 002A7364664B646B687364666E3334356B346A68736B64666873646B6633346B2C2C6D616E636F6173646332002A7364664B646B687364666E3334356B346A68736B64666873646B6633346B2C2C6D616E636F6173646332 88 bytes
hexAMF: 0A0B01097374723206557364664B646B687364666E3334356B346A68736B64666873646B6633346B2C2C6D616E636F61736463320973747231060201 60 bytes
false 
```

# cakephp - 黑屏问题（超时）

> ID：15140595
> 
> 赞同：0
> 
> 时间：2013-02-28T16:27:02.207
> 
> 标签：cakephp, xml-parsing, timeout

我通过 Web 服务获取一个 XML 文件，并使用内置的 Cakephp 函数 (_toArray) 将其转换为数组。xml 文件相当大，当我将数组分配给模板时，它显示一个空白屏幕。它发生在加载页面 30 秒后。

当我在控制器页面中打印数组时，它会正确打印数据，但是当传递到模板文件时，它会超时（空白屏幕）

我想得到解决这个问题的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:45:18.873

您的脚本可能会超时。您可以通过在控制器中调用[set_time_limit()](http://php.net/manual/en/function.set-time-limit.php)来增加此操作的时间限制。

您可能需要研究[Caching](http://book.cakephp.org/2.0/en/core-libraries/caching.html)和[CacheHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/cache.html)，以便后续视图花费更少的时间。

# codeigniter - 显示重复行的 CodeIgniter 表类

> ID：15140600
> 
> 赞同：0
> 
> 时间：2013-02-28T16:27:19.610
> 
> 标签：codeigniter, duplicates

我一直在尝试找到问题一段时间，但看不到任何问题，真的希望在找到问题方面得到一些帮助。

在我的控制器中，我正在构建一个表格并将其回显到另一个页面上，但是当我看到结果时，它们被写入了两次。

```
 $results = $this->main_model->search();

        $table_row = array();
        foreach ($results->result() as $product)
        {
          $table_row = NULL;
          $table_row[] = $product->product_id;
          $table_row[] = $product->title;
          $table_row[] = $product->description;
          $table_row[] = $product->price;
          $table_row[] = $product->stock;
          $table_row[] = $product->cat_name;
          $table_row[] = $product->subcat_name;
          $table_row[] = anchor('admin/edit/' . $product->product_id, 'edit');

          $this->table->add_row($table_row);
        }    

        $table = $this->table->generate($results);

        $data['table'] = $table;

        $this->load->view('search',$data); 
```

非常感谢一些帮助，我认为我返回结果的方式存在问题，但不完全确定它是什么。我尝试了几种方法，但对此很陌生。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:38:05.350

我认为您有重复项，因为您使用此代码手动添加行

```
foreach ($results->result() as $product)
    {
      $table_row = NULL;
      $table_row[] = $product->product_id;
      $table_row[] = $product->title;
      $table_row[] = $product->description;
      $table_row[] = $product->price;
      $table_row[] = $product->stock;
      $table_row[] = $product->cat_name;
      $table_row[] = $product->subcat_name;
      $table_row[] = anchor('admin/edit/' . $product->product_id, 'edit');

      $this->table->add_row($table_row);
    } 
```

**更新**

更改此行

```
$results_table = $this->table->generate($results); 
```

对此

```
$results_table = $this->table->generate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:41:06.473

`$this->table->generate();` 它返回一个包含生成表的字符串。如果您没有手动添加行，则接受一个可选参数，该参数可以是数组或数据库结果对象。

但是在您的情况下，您已经添加了行

```
 $this->table->add_row($table_row); 
```

然后再次将它们添加到

```
 $results_table = $this->table->generate($results); 
```

而是注释添加行的行

```
$table_row = array();
        foreach ($results->result() as $product)
        {
          $table_row = NULL;
          $table_row[] = $product->product_id;
          $table_row[] = $product->title;
          $table_row[] = $product->description;
          $table_row[] = $product->price;
          $table_row[] = $product->stock;
          $table_row[] = $product->cat_name;
          $table_row[] = $product->subcat_name;
          $table_row[] = anchor('admin/edit/' . $product->product_id, 'edit');

//          $this->table->add_row($table_row); comment this line
        }    

        $results_table = $this->table->generate($results); 
```

# tapestry - SelectModelImpl Non-Serializable 防止集群中的会话复制

> ID：15140607
> 
> 赞同：0
> 
> 时间：2013-02-28T16:27:41.973
> 
> 标签：tapestry

我正在使用 Tapestry 5.3.3 对应用程序进行集群。集群是通过将 HttpSession 复制到集群中的所有节点来完成的。通过序列化 HttpSession 进行复制。当容器尝试序列化会话时，会抛出 NotSerializableException，因为 org.apache.tapestry5.internal.SelectModelImpl 不可序列化。Tapestry 通过 ClusteredSessionImpl 类将这个类添加到会话中。因此，Tapestry 确实希望通过将相关信息保存到会话来实现集群友好。有关如何解决此异常的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:16:04.087

Tapestry 用户邮件列表提供了一些很好的建议。显然，应避免将 SelectModel 持久化到会话中。这里有几个回应——

* * *

您的自定义代码是 @Persist 的 SelectModel 吗？如果是这样，您可以改为 @Persist 底层 Collection 并每次在 UI 中构建 SelectModel。您应该记住，HTTPSession 的使用应该保持在最低限度，尤其是在集群环境中。HTTPSession 的使用不能很好地扩展。你真的需要在会话中保留一个列表吗？您能否改为在会话中存储用户 ID（或其他过滤器参数）并在每次需要服务时查找列表？如果您稍后发现查找成本很高，您可以查看服务级别的缓存。

您应该阅读以下内容： http: [//tapestry.apache.org/performance-and-clustering.html](http://tapestry.apache.org/performance-and-clustering.html)

* * *

不要@Persist 或@SessionState SelectModel。这是个坏主意。正如 Lance 所说，如果您真的需要以某种方式持久化它，请持久化一个用于创建 SelectModel 的 List，而不是 SelectModel 本身。

* * *

# python - 将 2 个 .csv 文件与 Python 进行比较，然后输出结果

> ID：15140610
> 
> 赞同：2
> 
> 时间：2013-02-28T16:27:43.327
> 
> 标签：python, csv, comparison

我在编程方面相当新，我正在尝试编写一个 python 程序，它将按特定列比较 2 个 .csv 文件并检查添加、删除和修改。.csv 文件均采用以下格式，包含相同数量的列，并使用 BillingNumber 作为键：

```
BillingNumber,CustomerName,IsActive,IsCreditHold,IsPayScan,City,State
"2","CHARLIE RYAN","Yes","No","Yes","Reading","PA"
"3","INSURANCE BILLS","","","","",""
"4","AAA","","","","","" 
```

我只需要比较第 0、1、2 和 4 列。我尝试了许多不同的方法来实现这一点，但我没有任何运气。我知道我可以使用`csv.DictReader`or将它们加载到字典中`csv.reader`，但之后我就卡住了。在将它们加载到内存后，我不确定从哪里开始或如何开始。

我以前试过这个：

```
import time
old_lines = set((line.strip() for line in open(r'Old/file1.csv', 'r+')))
file_new = open(r'New/file2.csv', 'r+')

choice = 0
choice = int( input('\nPlease choose your result format.\nEnter 1 for .txt, 2 for .csv or 3 for .json\n') )
time.sleep(1)
print(".")
time.sleep(1)
print("..")
time.sleep(1)
print("...")
time.sleep(1)
print("....")
time.sleep(1)
print('Done! Check "Different" folder for results.\n')
if choice == 1:
    file_diff = open(r'Different/diff.txt', 'w')
elif choice == 2:
    file_diff = open(r'Different/diff.csv', 'w')
elif choice == 3:
    file_diff = open(r'Different/diff.json', "w")
else: 
    print ("You MUST enter 1, 2 or 3")
    exit()

for line in file_new:
    if line.strip() not in old_lines:
        file_diff.write("** ERROR! Entry "+ line + "** Does not match previous file\n\n")
file_new.close()
file_diff.close() 
```

它不能正常工作，因为如果有额外的行，或者缺少一行，它会将该行之后的所有内容记录为不同的。它还比较了整条线，这不是我想做的。这基本上只是一个起点，虽然它有点工作，但它对我的需要还不够具体。我真的只是在寻找一个好的起点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:34:59.277

我认为您使用 csv 模块走在正确的轨道上。由于 'BillingNumber' 是唯一键，我将为“旧”计费文件创建一个字典，为“新”计费文件创建另一个字典：

```
import csv

def make_billing_dict(csv_dict_reader):
    bdict = {}
    for entry in csv_dict_reader:
        key = entry['BillingNumber']
        bdict[key] = entry
    return bdict

with open('old.csv') as csv_file:
    old = csv.DictReader(csv_file)
    old_bills = make_billing_dict(old) 
```

这导致以下数据结构`old_bills`：

```
{'2': {'BillingNumber': '2',
       'City': 'Reading',
       'CustomerName': 'CHARLIE RYAN',
       'IsActive': 'Yes',
       'IsCreditHold': 'No',
       'IsPayScan': 'Yes',
       'State': 'PA'},
 '3': {'BillingNumber': '3',
       'City': '',
       'CustomerName': 'INSURANCE BILLS',
       'IsActive': '',
       'IsCreditHold': '',
       'IsPayScan': '',
       'State': ''},
 '4': {'BillingNumber': '4',
       'City': '',
       'CustomerName': 'AAA',
       'IsActive': '',
       'IsCreditHold': '',
       'IsPayScan': '',
       'State': ''}} 
```

为“新”计费文件创建相同的数据结构后，您可以轻松找到差异：

```
# Keys that are in old_bills, but not new_bills
print set(old_bills.keys()) - set(new_bills.keys())

# Keys that are in new_bills, but not old_bills
print set(new_bills.keys()) - set(old_bills.keys())

# Compare columns for same billing records
# Will print True or False
print old_bills['2']['CustomerName'] == new_bills['2']['CustomerName']
print old_bills['2']['IsActive'] == new_bills['2']['IsActive'] 
```

显然，您不会为每个比较编写单独的打印语句。我只是在演示如何使用数据结构来发现差异。接下来，您应该编写一个函数来遍历所有可能的 BillingNumbers 并检查新旧之间的差异……但我将把这部分留给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:48:31.440

你必须自己写这个吗？如果这是一个编程练习，所有的权力都属于你。否则，请寻找一个名为“diff”的工具，它可能以您已经可以访问的某种形式存在。它内置在许多其他工具中，例如文本编辑器，如 vim、emacs 和 notepad++，以及版本控制系统，如 subversion mercurial 和 git。

我建议您使用已建立的主力，而不是重新发明轮子。`git diff`是一头野兽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:13:49.817

阅读您的评论：

> 这只是我想弄清楚的事情。他们为工作中的新技术人员提供了一份工作清单，他们将雇用的人必须解决这个问题。

他们很可能正在寻找一些命令行功能。类似于

```
diff <(awk -F "\"*,\"*" '{print $1,$2,$3,$5}' csv1.csv) <(awk -F "\"*,\"*" '{print $1,$2,$3,$5}' csv2.csv) 
```

[一个可以在 bash](https://unix.stackexchange.com/a/930/2151)中使用的命令，使用[diff](http://linux.about.com/library/cmd/blcmdl1_diff.htm)工具来比较[使用 awk 选择](http://www.joeldare.com/wiki/using_awk_on_csv_files)的某些列。

这显然不是基于 python 的解决方案。但是，此解决方案确实展示了简单的基于 Unix 的工具的强大功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T17:35:52.403

因为这些东西的需求有螺旋式上升的趋势，我认为将数据放入 SQLite 数据库是值得的。

由于检测行是被删除还是只是新行的逻辑可能难以实现。

在下面我假设 BillingNumber 是 id 而不会被改变。

```
import sqlite3
con = sqlite3.connect(":memory:")

cursor = con.cursor()
columns = "BillingNumber,CustomerName,IsActive,IsCreditHold,IsPayScan,City,State"
cursor.execute("CREATE TABLE left  (%s);" % columns)
cursor.execute("CREATE TABLE right (%s);" % columns) 

placeholders = ",".join("?" * len(columns.split(',')))

import csv
def reader(filename):
    for (lineno, line) in enumerate(open(filename)):
        if lineno > 0: # skip header
            yield line

def load_table(tablebname, filename):
    for row in csv.reader(reader(filename)):
        cursor.execute("INSERT INTO %s VALUES(%s);" % (tablebname, placeholders), row)

load_table("left",  "left.csv")
load_table("right", "right.csv")

if False:
    print "LEFT"
    for row in cursor.execute("SELECT * from left;"):
        print row[0]

        print "RIGHT"
        for row in cursor.execute("SELECT * from right;"):
            print row

def dataset(tablename, columns):
    for row in cursor.execute("SELECT * from %s;" % tablename):
        yield tuple(row[x] for x in columns)

# To use if raw data required.       
#left_dataset = dataset("left", [0,1,2,4])
#right_dataset = dataset("right", [0,1,2,4])

# COMPARE functions.
def different_rows():
    q = """SELECT left.*, right.* 
    FROM left, right
    WHERE left.BillingNumber = right.BillingNumber
    AND ( left.CustomerName !=  right.CustomerName OR 
          left.IsActive     !=  right.IsActive OR
          left.IsPayScan    !=  right.IsPayScan )
          ;
    """
    for row in cursor.execute(q):
        print "DIFFERENCE", row

def new_rows():
    q = """SELECT right.* 
    FROM right
    WHERE right.BillingNumber NOT IN ( SELECT BillingNumber FROM left)
          ;
    """
    for row in cursor.execute(q):
        print "NEW", row

different_rows()
new_rows() 
```

OP 必须编写不同的函数来比较数据，但我总体上使用 SQL 可能更容易。

# delphi - 无法在动态创建的 TBitmap(s) 上绘制 GIF

> ID：15140614
> 
> 赞同：5
> 
> 时间：2013-02-28T16:27:50.117
> 
> 标签：delphi

我想提取 GIF 图像的帧。下面的代码有效，但这不是我需要的。我需要将提取的帧保存在一系列位图中。

```
procedure TForm1.Button2Click(Sender: TObject);
var
  GIF: TGIFImage;
  Bitmap: TBitmap;
  I: Integer;
  GR: TGIFRenderer;
  R: TRect;
begin
  GIF := TGIFImage.Create;
  TRY
    GIF.LoadFromFile('c:\1.gif');
    Bitmap := TBitmap.Create;       <------------ one single object, reused
    Bitmap.SetSize(GIF.Width, GIF.Height);
    GR := TGIFRenderer.Create(GIF);
    try
      for I := 0 to GIF.Images.Count - 1 do
       begin    
         GR.Draw(Bitmap.Canvas, Bitmap.Canvas.ClipRect);

         Self.Canvas.Draw(0, 0, Bitmap);

         GR.NextFrame;
       end;
    finally
      GR.Free;
    end;
  finally
    GIF.Free;
    //Bitmap.Free;
  end;
end; 
```

所以我为每一帧动态创建一个位图。但这行不通。它只会在所有位图中显示相同/第一帧！

```
procedure TForm1.Button2Click(Sender: TObject);
var
  GIF: TGIFImage;
  Bitmap: TBitmap;
  I: Integer;
  GR: TGIFRenderer;
  R: TRect;
begin
  GIF := TGIFImage.Create;
  TRY
    GIF.LoadFromFile('c:\1.gif');
    GR := TGIFRenderer.Create(GIF);
    try
      for I := 0 to GIF.Images.Count - 1 do
       begin
         Bitmap := TBitmap.Create;       <----- multiple bitmaps, one for each frame
         Bitmap.SetSize(GIF.Width, GIF.Height);

         GR.Draw(Bitmap.Canvas, Bitmap.Canvas.ClipRect);

         Self.Canvas.Draw(0, 0, Bitmap);

         GR.NextFrame;
       end;
    finally
      GR.Free;
    end;

    {TODO: store bitmaps in a TObjectList for later use 
    List.Add(Bitmap);  }     
  finally
    GIF.Free;
  end;
end; 
```

上面这段代码有什么问题？也许 TGIFRenderer 只绘制帧之间的差异？

* * *

**更新 TLama/jachguate：**

TLama 说代码不起作用，因为我没有释放位图。我不想释放位图。我以后需要它们。这是一些（演示级）代码。

```
VAR List: TObjectList;    {used and freed somwhere else}

procedure TForm1.Button2Click(Sender: TObject);
var
  GIF: TGIFImage;
  UniqueBMP: TBitmap;
  I: Integer;
  GR: TGIFRenderer;
  R: TRect;
begin
  List:= TObjectList.Create;
  GIF := TGIFImage.Create;
  TRY
    GIF.LoadFromFile('c:\1.gif');

    GR := TGIFRenderer.Create(GIF);
    try
      for I := 0 to GIF.Images.Count - 1 do
       begin
         UniqueBMP := TBitmap.Create;
         UniqueBMP.SetSize(GIF.Width, GIF.Height);

         if GIF.Images[I].Empty then Break;

         GR.Draw(UniqueBMP.Canvas, UniqueBMP.Canvas.ClipRect);

         Self.Canvas.Draw(0, 0, UniqueBMP);
         Sleep(50);

         List.Add(UniqueBMP);

         GR.NextFrame;
       end;
    finally
      GR.Free;
    end;
  finally
    GIF.Free;
  end;
end;

procedure TForm1.btnFreeClick(Sender: TObject);
begin 
  FreeAndNil(List);
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T17:47:25.283

`TCustomGIFRenderer.Draw`检查要在其上渲染的画布。如果它与上次渲染时记住的不同（并且不同，因为您正在为每一帧创建新的位图），`TCustomGIFRenderer.Reset`则调用该方法，正如其名称所解释的那样，它将帧索引重置为 0。这就是为什么你总是只渲染第一帧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:57:30.897

**基于 TLama 解决方案的工作代码（请投票不是我的帖子）：**

```
procedure TForm1.Button2Click(Sender: TObject);
var
  GIF: TGIFImage;
  TempBMP, UniqueBMP: TBitmap;
  I: Integer;
  GR: TGIFRenderer;
  R: TRect;
begin
  GIF := TGIFImage.Create;
  TRY
    GIF.LoadFromFile('c:\1.gif');

    TempBMP := TBitmap.Create;       <------- SOLUTION
    TempBMP.SetSize(GIF.Width, GIF.Height);

    GR := TGIFRenderer.Create(GIF);
    try
      for I := 0 to GIF.Images.Count - 1 do
       begin
         UniqueBMP := TBitmap.Create;      <------- SOLUTION
         UniqueBMP.SetSize(GIF.Width, GIF.Height);

         if GIF.Images[I].Empty then Break;

         GR.Draw(TempBMP.Canvas, TempBMP.Canvas.ClipRect);

         UniqueBMP.Assign(TempBMP);                <------- SOLUTION
         Self.Canvas.Draw(0, 0, UniqueBMP);
         Sleep(50);

         GR.NextFrame;
       end;
    finally
      GR.Free;
    end;
  finally
    GIF.Free;
    TempBMP.Free;
  end;
end; 
```

# mysql - Playframework：如何执行进化脚本

> ID：15140624
> 
> 赞同：0
> 
> 时间：2013-02-28T16:28:16.803
> 
> 标签：mysql, heroku, playframework

我正在使用 play framework 1.25 并已将 web 应用程序部署到 heroku 平台。

当我尝试登录应用程序时，出现异常，因为数据库（MySQL）不是最新的。所以我创建了一个进化脚本，它添加了表中缺少的字段。

我现在已经将我的最新代码部署到了 heroku，其中包括新脚本 (10.sql)，但仍然出现异常。

有人可以告诉我如何执行脚本吗？我以为它会自动运行，但我是新手。

这是日志中的一个片段：

WARN ~
WARN ~ 你的数据库不是最新的。
WARN ~ 使用`play evolutions`命令来管理数据库演变。
错误~

heroku[web.1]：进程以状态 1 退出
heroku[web.1]：状态从开始变为崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:40:36.800

您应该使用 heroku run 命令执行“play evolutions:apply”命令，使用适合您环境的任何参数。下面的例子：

```
heroku run "play evolutions:apply --%prod" 
```

之前有人问过这个问题：[Play Framework DB upgrades with Heroku](https://stackoverflow.com/questions/8614127/play-framework-db-upgrades-with-heroku)

# objective-c - 在模拟器和设备中安装应用程序时，图像相同但大小不同，AFNetWorking

> ID：15140626
> 
> 赞同：0
> 
> 时间：2013-02-28T16:28:22.513
> 
> 标签：objective-c, uiimageview, afnetworking

我正在执行以下操作来确定块期间下载图像的大小，然后我将相应地设置 uiimageview 的大小。

self.headerView 是 xib 中 uiimageview 的出口连接

```
 __weak  UIImageView *weakObj    =   self.headerView;

    [self.headerView setImageWithURLRequest:[NSMutableURLRequest requestWithURL:[NSURL URLWithString:fundraiserInfo.imageUrl]]
                           placeholderImage:nil
                                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                                        NSLog(@"image is %@",NSStringFromCGSize(image.size));

                                        CGRect newFrame ;
                                        newFrame                    =   weakObj.frame;
                                        newFrame.size.width         =   image.size.width;
                                        newFrame.size.height        =   image.size.height;
                                        weakObj.frame               =   newFrame;

                                    }
                                    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
                                        ;
                                    }
     ]; 
```

但是，当在模拟器（Device-Iphone）上运行应用程序时，我得到了

```
image is {300, 222} 
```

但是，如果我使用模拟器 (Retina 3.5) 或 (Retina 4) 或者我在 iphone4 或 iphone 5 上安装应用程序，我会得到：

```
image is {150, 111} 
```

为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:31:32.143

这是因为您正在下载的图像未被识别为“视网膜”图像，因此在视网膜设备上，它将显示为实际像素大小的一半。您可以通过读取文件名为“filenam@2x.jpg”的图像将图像指定为视网膜，或者您可以在创建时将 UIImage 的“缩放”值指定为 1.0（非视网膜）或 2.0（视网膜）

```
[UIImage imageWithData:scale:]
[UIImage imageWithCGImage:scale:orientation:] 
```

如果您不提供比例值，则假定图像是您发现的适当分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:21:24.297

原因是 UIImage 大小，从 iOS4 开始，返回的是点而不是像素。视网膜显示器上的哪个提供了您所看到的结果。来自苹果文档：

> 尺寸
> 
> 图像的尺寸，考虑到方向。
> 
> @property(nonatomic, readonly) CGSize 大小
> 
> 讨论 在 iOS 4.0 及更高版本中，该值反映了图像的逻辑大小，以磅为单位。在 iOS 3.x 及更早版本中，此值始终反映以像素为单位测量的图像尺寸。

# git - 我可以将我的项目源从 svn 存储库克隆到 Git 存储库吗

> ID：15140632
> 
> 赞同：0
> 
> 时间：2013-02-28T16:28:38.120
> 
> 标签：git, svn, repository, git-svn

SVN 存储库位于：`svn://server/myPath/svn/repos`

Git 存储库位于：`git://server/myPath/git/repos`

我正在尝试克隆 svn 项目，所以我使用了这个命令： git svn clone svn://zone.spip.org/spip-zone gitzone

我收到一条奇怪的错误消息：错误：git-svn 死于信号 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:03:08.040

如果您要将代码保留在 SVN 中，为什么不直接

git svn clone svn://server/myPath/svn/repos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:35:47.837

正如@JohnNY 的回答所说，您可以这样做`git svn clone`，然后通过`git svn rebase`. 请阅读`git svn`文档，与 SVN 交互时有几个有用的子命令（以及重要的警告！）。`git svn clone`像糖蜜一样慢（是的，一个中等大小的存储库可能需要一天以上的时间！）；如果有几个人需要访问，克隆一次并分发克隆存储库的压缩包。或者抛弃SVN。只是在说'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:18:47.967

如果您想克隆旧的 SVN 存储库，然后将其移动到 git 中，我这样做的原因如下。

```
git svn clone svn://server/myPath/svn/repos/trunk myproject.git 
```

或者

```
git svn clone -s svn://server/myPath/svn/repos myproject.git 
```

然后

```
cd myproject.git 
```

我不想要历史，所以我删除了 git 文件夹

```
rm -rf .git/ 
```

然后

```
git init
git add .
git commit -a
git remote add origin git@git:<project>.git
git push -u origin master 
```

你现在已经完成并准备将它用作 git

# c# - 使用 C# 在 ROT 中创建对 COM 对象的强引用

> ID：15140635
> 
> 赞同：1
> 
> 时间：2013-02-28T16:28:44.930
> 
> 标签：c#, com, garbage-collection, exception-safety, running-object-table

我需要绑定到一个正在运行的 COM 实例（可能有很多我正在寻找的实例，所以我需要通过检查运行对象表来确定哪一个是正确的）使用 CoClassCreate 或`new`带有类的运算符是我没有选择。

我的代码几乎可以工作，只是它不是异常安全的。

如果像下面的代码中那样抛出异常，有没有办法避免在`Revoke`幕后发生的自动？一旦应用程序结束，COM 对象就会从 ROT 中删除，而注册它的应用程序仍在运行。我很确定 Release() 会被自动调用，因为它是最后一个引用 COM 的对象，所以 ROT 条目消失了。

**我想以原子和异常安全的方式获得对 ROT 中对象的强引用。**

我尝试将绰号与该方法结合使用的所有尝试`BindToObject`均未成功。.NET 4.0 中的实现有问题吗？第一次调用似乎有效，但后续调用都因 Argument 或 invalidCast 异常而失败，即使在使用 IUnknown 的 Guid 时也是如此。据我所知，这应该总是成功还是我忽略了什么？

这是迄今为止我能产生的最好的工作代码。我只是想念异常安全。该程序旨在自行运行并且是可中断的（可以随时抛出异常以中断胎面）。如果我不能彻底解决，留下这件未完成的事情肯定会给我带来一些麻烦。

```
 [DllImport("ole32.dll")]
    static extern int CreateBindCtx(uint reserved, out IBindCtx ppbc);

    // Returns the contents of the Running Object Table (ROT), where
    // open Microsoft applications and their documents are registered.
    private IEnumerable<T> GetRunningObjects<T>()
    {
        // Get the table.
        IBindCtx bc;
        if (CreateBindCtx(0, out bc) != 0 || bc == null)
            throw new ApplicationException("Can't create COM binding context in GetRunningObjects<T>");

        IRunningObjectTable runningObjectTable;
        bc.GetRunningObjectTable(out runningObjectTable);

        IEnumMoniker monikerEnumerator;
        runningObjectTable.EnumRunning(out monikerEnumerator);
        monikerEnumerator.Reset();

        // Enumerate and fill our nice dictionary.
        IMoniker[] monikers = new IMoniker[1];
        IntPtr numFetched = IntPtr.Zero;
        while (monikerEnumerator.Next(1, monikers, numFetched) == 0)
        {
            object o = null;
            if (runningObjectTable.GetObject(monikers[0], out o) == 0 && o != null)
            {
                if (o is T)
                {
                    // TODO: If an exception is thrown here, then COM object gets revoked from ROT...
                    throw new Exception("Test");

                    // monikers[0].BindToObject does not work...
                    // there seems to be a weakness here.

                    // if found, create a strong reference to avoid auto-revokation in the ROT
                    IntPtr ptr = Marshal.GetIUnknownForObject(o);
                    Marshal.AddRef(ptr);

                    yield return (T)o;
                }
            }
        }
        Marshal.ReleaseComObject(bc);
    } 
```

附加说明：这可能发生在 OutProc 服务器仅将活动对象注册为弱引用时。我对此没有影响，我不是服务器端的作者......我需要绑定到正在运行的对象，而不会有对象可以从运行对象表中撤销的风险。

# java - 詹金斯在构建后操作后运行构建后步骤

> ID：15140636
> 
> 赞同：0
> 
> 时间：2013-02-28T16:28:46.067
> 
> 标签：java, tomcat, jenkins, continuous-integration, war

部署战争后，我需要詹金斯反弹远程tomcat服务器。我们将 tomcat restart 配置为构建后步骤（shell 命令），并将 war deploy 配置为构建后操作。

一切正常，但我们需要 jenkins 在部署战争后重新启动 tomcat 服务器（运行 shell 脚本）。

有没有办法在 Jenkins 中的构建后操作之后添加构建后步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:14:50.947

我们通过分离我们的构建和部署工作来做到这一点。我们的“构建”就是这样做的，他们构建和归档工件。我们有下游作业来获取这些工件进行部署/安装，然后重新启动任何必要的服务。

因此，在部署/安装作业中，安装将是构建步骤，而重新启动可能是附加构建步骤或构建后操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:25:32.613

难道你不能有第二个构建后的动作吗？

# ruby-on-rails - “m”在 rpsec 测试中代表什么？

> ID：15140639
> 
> 赞同：0
> 
> 时间：2013-02-28T16:28:52.280
> 
> 标签：ruby-on-rails, rspec

我执行：

```
rake spec:models 
```

我得到：

```
←[32m.←[0m

Finished in 0.08304 seconds
←[32m1 example, 0 failures←[0m 
```

我还没有在任何地方看到“32m1”或“0m”的解释。这些是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:36:33.677

这些是 ANSI 转义序列，通常会告诉控制台输出的颜色或输出的背景。

查看此相关问题以获取可以安装的 gem 来解决此问题：[Displaying Unix color on Windows Cmd](https://stackoverflow.com/questions/11743460/displaying-unix-color-on-windows-cmd-e-g-31m)

[您可以在此处](http://en.wikipedia.org/wiki/ANSI_escape_code)阅读有关 ANSI 转义码的更多信息。

**编辑**

哎呀，宝石的链接实际上是用于单独的控制台，而不是宝石。我的错。我曾经使用一个 gem `wirble`，它已被一个名为`brice`. 你可以在`brice` [这里](https://github.com/blackwinter/brice#readme)找到。看起来我也使用了`win32console`gem，这是将颜色代码实际转换为相应控制台颜色的原因。我的旧`.irbrc`文件如下所示：

```
begin
  # load wirble
  require 'wirble'
  require 'win32console'
  include Win32::Console::ANSI

  # start wirble
  Wirble.init
  Wirble.colorize
 rescue LoadError => err
   warn "Couldn't load wirble: #{err}"
end 
```

# java - Java 1.4 中三元条件运算符的意外副作用

> ID：15140646
> 
> 赞同：1
> 
> 时间：2013-02-28T16:29:10.140
> 
> 标签：java, long-integer, ternary-operator, java1.4

我今天遇到了一个意外的错误，涉及 Java 1.4 中的三元条件运算符。

以下代码没有产生预期的结果：

```
product.setValue((finalAmount == 0) ? StringUtils.EMPTY : ConversionUtil.bigDecimalToString(value) + " " + code);
product.setNumber((finalAmount == 0) ? StringUtils.EMPTY : ConversionUtil.formatLongToAmountString(new Long(finalAmount))); 
```

当`finalAmount == 0`,`Value`设置为 BlahBlahStuff，而不是`""`。但是，数字设置正确。

但是，这有效：

```
if (finalAmount == 0) {
    product.setValue(StringUtils.EMPTY);
    product.setNumber(StringUtils.EMPTY);
}
else {
    product.setValue(ConversionUtil.bigDecimalToString(value) + " " + code);
    product.setNumber(ConversionUtil.formatLongToAmountString(new Long(finalAmount)));
} 
```

为什么测试会在一条线上工作而不是另一条线？ `finalAmount`是一个原始的`long`，并且是这个方法的本地。

**免责声明**- 我知道：

1.  在 2013 年使用 Java 1.4 是异端邪说。可悲的是，我对此并不做主。
2.  工作解决方案尽管不那么紧凑，但实际上效率更高，因为测试不会重复两次。我只是想了解为什么第一个不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:33:29.123

The problem is order of operations. The ternary operator is evaluated first, then the concatenation is applied to the result of the ternary operator expression. Try this instead (put parentheses around the string concatenation expressions):

```
product.setValue((finalAmount == 0) ? StringUtils.EMPTY : (ConversionUtil.bigDecimalToString(value) + " " + code)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:13:35.870

如果`finalAmount`是在各个线程之间共享的，那么它应该被声明为`volatile`。这样每个 Thread 总是读取 的最新值`finalAmount`，因为每个线程都在本地缓存`finalAmount`导致`stale data`Threads 读取的值。将变量声明为`volatile`确保每个线程读取的数据都是最新的。

# javascript - 循环遍历 RaphaelJS 集合

> ID：15140647
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:29:12.610
> 
> 标签：javascript, svg, raphael

我正在尝试遍历一系列 RaphaelJS 集。

我有一系列箭头形状（集）。我希望能够遍历它们。

```
var migration1 = c.set(c.path("M129.045,368.584c0,0,19.155-13.9,23.374-50.593 c2.283-19.858-10.22-31.366-18.958-36.886").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}), c.path("M139.728,278.292L135.038 282.091 134.516 288.104 125.493 277.021 z").attr({fill: "#990000", "stroke-width": 0}), c.path("M136.059,375.577c0,0,42.113-48.3,94.441-84.818 c55.985-39.072,143.717-72.937,171.049-83.015").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}), c.path("M399.536,214.469L399.827 208.441 395.689 204.047 409.966 204.699 z").attr({fill: "#990000", "stroke-width": 0}));
var migration2 = c.set(c.path("M287.563,407.934 c0,0,26.391-73.864,66.459-135.858c30.304-46.886,62.735-75.691,76.743-86.947").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}), c.path("M430.854,192.14L429.326 186.301 424.063 183.347 437.881 179.696 z").attr({fill: "#990000", "stroke-width": 0}));
var migration3 = c.set(c.path("M106.872,237.5c0,0,82.633-29.237,261.38-61.119 c145.376-25.929,228.743-26.742,254.803-26.142").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}), c.path("M618.66,155.717L621.198 150.242 619.018 144.614 632 150.589 z").attr({fill: "#990000", "stroke-width": 0}), c.path("M106.872,237.5c0,0,95.407-26.3,178.93-25.373 c62.451,0.693,87.378,29.095,95.981,43.382").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}), c.path("M374.787,254.352L380.807 253.922 384.677 249.291 385.73 263.543 z").attr({fill: "#990000", "stroke-width": 0}));
var migration4 = c.set(c.path("M336,292 c11.139-4.582,18.674-13.417,31.977-14.868c8.351-0.911,34.987-3.037,34.05,10.528c-0.977,14.141-32.223,18.288-32.963,30.188 c-0.384,6.178,9.04,9.792,12.936,7.151 M387,351 c0.673-0.509,1.006-1.176,1-2").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}));
var migration5 = c.set(c.path("M117.073,329.436 c0,0,12.897-27.418,68.927-67.291c38.271-27.234,71.998-42.664,102.902-52.111").attr({fill: "none", "stroke-width": 3, stroke: "#990000"}), c.path("M286.465,216.615L287.142 210.618 283.295 205.968 297.5 207.535 z").attr({fill: "#990000", "stroke-width": 0})); 
```

我尝试了以下变化：

```
for (i=1<=5;i++){
   this['migration'+i].hide();
} 
```

...这样我就可以有一个按顺序显示它们的按钮：

```
var current=1;
$('#next').click(function(){
   this['migration'+current].hide();
   current++;
   this['migration'+current].show();
}) 
```

使用“this”似乎不正确，但我不确定如何连接集合名称以定位它。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:25:13.737

您可以创建一组集合...

```
var migrations =[ c.set(...), c.set(...), c.set(...), c.set(...), c.set(...)]; 
```

然后您的代码将如下所示：

```
var current=1;
$('#next').click(function(){
   migrations[current].hide();
   migrations[current++].show();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T09:55:23.033

我正在使用以下方法来隐藏传递给函数的集合作为“文本”：

```
function hideSet(set) { 
    set=eval(set);
    set.forEach( function(e){ e.hide(); } ) 
} 
```

使用它来切换

```
hideSet('setname'); 
```

# machine-learning - 分类算法训练集中的错误

> ID：15140650
> 
> 赞同：3
> 
> 时间：2013-02-28T16:29:21.730
> 
> 标签：machine-learning, computer-vision, classification

我正在寻找一种算法来构建用于对象检测的分类器。分类器将用于通过对象的特征来检测交通场景中的汽车。我研究过提升和多实例学习等算法，但它们似乎不适合我的情况。我有两个数据集，一个带有正样本，一个带有负样本，但这些集合包含一小部分错误（<10%）。无法手动删除数据集中的错误，因为我的目标是在线生成数据集而无需人工干预。

所以我的问题是：有没有人知道一个合适的算法（如果存在的话）来训练一个分类器，它可以处理正负训练集中相对较小百分比的错误？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:41:25.917

所有现实世界的数据都会有错误。如果您知道特定错误，则应在训练之前对其进行过滤。捕捉这些错误的最佳方法是逐步训练您的分类器。每次添加到语料库并重新训练新分类器时，都应该检查精度、召回率和 F1。如果新分类器的性能更差，您就知道您在工作语料库中添加了一些必须退出的垃圾。

你绝对不应该把垃圾留在你的语料库中，因为你会扼杀你的准确性。如果您从不受信任的来源获取数据，则可能会故意用不良数据破坏您的分类器。因此，在将新数据输入分类器之前，您应该让某种过滤器或领域专家查看新数据，以确保您维护黄金标准语料库。

# ios - 嵌套 UIVIew animateWithDuration 不尊重完成

> ID：15140654
> 
> 赞同：1
> 
> 时间：2013-02-28T16:29:32.980
> 
> 标签：ios, uiview

我想做一些图形元素消失，移动背景图像并出现新的。问题是在背景移动动画完成之前出现新的背景移动。我没有在相关问题中看到一个好的答案，所以我会很感激任何帮助。伪代码：

```
-(void)method1 {
[UIView animateWithDuration:0.6
                      delay:0.0 options:UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     self.setThisOne.hidden = YES;
                     self.setThisAnother.hidden = YES;
                 }completion:^(BOOL finished) {
                     [UIView animateWithDuration:0.6
                                           delay:0.3
                                         options: UIViewAnimationOptionCurveEaseIn
                                      animations:^{ self.background.frame = myFrame; //Move background image
                                      } completion:^(BOOL finished){
                                          if (finished) {
                                              [self method2];
                                          }
                                      }
                      ];
                 }]; 
```

}

```
-(void)method2 {
    [UIView animateWithDuration:0.2
                      delay:0.3
                    options: UIViewAnimationOptionBeginFromCurrentState
                 animations:^{
                     self.aButtonsAppear.hidden = NO;
                     self.moreElementsApeear.hidden = NO
                 } completion:nil]; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-06T13:47:30.343

.hidden 可能无法设置动画，但 .alpha 可以。在动画中使用 .alpha 来控制可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T21:03:11.217

您现在可能已经找到了解决方案，但这是我在完成块方面遇到的一个小问题。我使用了 -animateWithDuration:animations:completion: 方法，但没有调用完成，因为我认为我正在执行另一个中断动画流程的动作。就我而言，一遍又一遍地调用相同的动画。小心完成块。我仍然没有完全依赖它们。

# c# - Linq c#基于变量的查询

> ID：15140658
> 
> 赞同：2
> 
> 时间：2013-02-28T16:29:50.967
> 
> 标签：c#, linq

我希望能够在下面根据变量名称选择字段时执行类似的操作。以下不起作用，如果不做一个大的 switch 语句，我就找不到解决方案。

```
var guidId = new Guid("");
var fieldName= "somefield";

var query =
 from c in Financials
 where c.GuidId == guidId 
 select **fieldName**; 
```

他们是一种简单的方法吗？

谢谢奥斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:33:28.460

试试这个：

```
select c.GetType().GetProperty(fieldName).GetValue(c, null) 
```

我在[这个 SO question](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)上找到了这个。如果我的答案由于某种原因在查询中不起作用，您可以`select c`然后将其通过 SO 问题的答案中所示的方法。

注意：它返回一个`object`，所以要小心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:34:01.510

你可以使用反射：

```
select c.GetType().GetProperty(fieldName).GetValue(c, null); 
```

这确实是通过名称获取属性值的唯一方法。

# ios - 子类化 UIView。init 方法永远不会被调用

> ID：15140664
> 
> 赞同：16
> 
> 时间：2013-02-28T16:30:07.723
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, uikit

我`UIView`在界面生成器上有一个。在我的视图控制器中，我有一个`IBOutlet MyUIView`指向`UIView`界面生成器上的。

我将类更改`UIView`为“ `MyUIView`”（自定义 UIView 类），但似乎没有`init`触发子类的任何方法。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T16:33:47.803

Instead of `init` you need to call `initWithCoder` first then call `init` as :

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {
        [self baseClassInit];
    }
    return self;
}

- (void)baseClassInit {

    //initialize all ivars and properties    
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-28T16:54:38.733

简短的回答：您需要使用`initWithCoder:`.

从`initWithFrame:`文档：

> 如果您使用 Interface Builder 来设计您的界面，则当您的视图对象随后从 nib 文件加载时，不会调用此方法。nib 文件中的对象被重构，然后使用它们的 initWithCoder: 方法进行初始化，该方法修改视图的属性以匹配存储在 nib 文件中的属性。

如果您使用的是 nib / xib / Storyboard 文件，请使用`initWithCoder:`. 如果您以编程方式创建视图，则可以使用`init`或`initWithFrame:`。

# css - 在下拉菜单（无序列表）中创建边框的 HTML5 有效方法是什么？

> ID：15140671
> 
> 赞同：1
> 
> 时间：2013-02-28T16:30:17.167
> 
> 标签：css, html, navigation

[www.amyyatsuk.com](http://amyyatsuk.com)

我通过验证器运行代码，它不喜欢我在无序列表中合并 div 的方法。我正在尝试在下拉导航菜单上设置内部边框。

能达到同样效果的有效标记是什么？

HTML：

```
<div id="linksLeft">
    <ul class="menu">
        <li id="about"><a href="#">about</a></li>
        <li id="portfolio"><a href="editorial.html">portfolio</a>
        <ul class="subMenu" id="subNav"> **<div id="subnavborder">**
            <li><a href="editorial.html">editorial</a></li>
            <li><a href="advertising.html">advertising</a></li>
            <li><a href="packaging.html">packaging</a></li>
            <li><a href="photography.html">photography</a></li> **</div>**
        </ul>
        </li>
    </ul>
</div> 
```

CSS：

```
#subnavborder {
    margin:10px;
    border: 6px solid white;
    border-radius:6px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:36:43.617

我会使用`:after`伪选择器，如下所示：

[小提琴](http://jsfiddle.net/vfq7g/)

```
.subMenu:after {
    content: '';
    display: block;
    border: 6px solid white;
    border-radius:6px;
    position: relative;
    width: figure it out;
    height: figure it out;
    left: figure it out;
    top: figure it out;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:38:56.800

**两种选择**

**使用常规边框 [常规小提琴](http://jsfiddle.net/Fico/8qKLp/)。** 和 **使用内部边框[内部小提琴](http://jsfiddle.net/Fico/Lz42a/)**

**常规边框** 您可以使用此类实现 UL 元素的边框样式

```
.subnavborder {
    margin:10px;
    border: 6px solid black;
    border-radius:6px;
} 
```

除非出于其他原因，您不需要 div 标记如下

```
<div id="linksLeft">
    <ul class="menu">
        <li id="about"><a href="#">about</a></li>
        <li id="portfolio"><a href="editorial.html">portfolio</a>
        <ul class="subMenu subnavborder" id="subNav"> 
            <li><a href="editorial.html">editorial</a></li>
            <li><a href="advertising.html">advertising</a></li>
            <li><a href="packaging.html">packaging</a></li>
            <li><a href="photography.html">photography</a></li> 
        </ul>
        </li>
    </ul>
</div> 
```

[在这个普通的小提琴](http://jsfiddle.net/Fico/8qKLp/)中看到它 。我更改了边框颜色以显示它然后随意调整超出的类。

**内部边框的替代方案**

如果要保留半径，则需要使用伪元素选择器，如本例所示

我使用与以前相同的标记。黑色边框只是为了欣赏内部边框 需要相对位置，因为我们将定位引用这个的伪元素

```
 .subnavborder {
       position:relative;

        border:1px solid black;
    } 
```

由于内部边框可能与列表装饰冲突，我们会应用一些边距（根据您的意愿）

```
 .subnavborder li{
       margin:10px;
    } 
```

现在伪元素

```
.subnavborder:after {
    border: 2px solid #ff0000;
    border-radius:6px;
    content: "";
    position: absolute;
    top: 3px;
    bottom: 3px;
    left: 3px;
    right: 3px;
} 
```

得到它？。我们正在添加一个幽灵元素。修改像素深度、颜色等查看它在这个[内部小提琴中的工作](http://jsfiddle.net/Fico/Lz42a/)

**不需要半径？？** 如果你不想使用伪元素，有一个使用属性**轮廓**的解决方案（但不是半径......）如果你想要它，要求它，我在这里包括它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:35:30.323

如果您在谈论 HTML5，那么您也在谈论 CSS3，这意味着`box-shadow`通常支持。

`box-shadow`支持偏移量，这将使您看起来继续超出边界的背景。

试一试：

```
ul.subMenu {
    background-color: #93b9bb;
    border: 5px solid #fff

    /* Your other styles here */

    -moz-box-shadow: 0px 0px 0px 10px #93b9bb;
    -webkit-box-shadow: 0px 0px 0px 10px #93b9bb;
    -o-box-shadow: 0px 0px 0px 10px #93b9bb;
    box-shadow: 0px 0px 0px 10px #93b9bb;
} 
```

看看[JSFiddle](http://jsfiddle.net/xGaUc/)。

这不使用一个`:before`或`:after`伪元素 hack 让您拥有更干净的 CSS，以及更容易控制框阴影的事实（没有`position: absolute`和`left` `right`等值）。上述`box-shadow`属性中的第四个像素值定义了阴影偏移量。`0px`之前它指定了一个 0px 模糊，即一个完全锐利的阴影。

# jquery - 带有 setInterval 的 jQuery 可点击链接

> ID：15140672
> 
> 赞同：0
> 
> 时间：2013-02-28T16:30:18.110
> 
> 标签：jquery

我正在尝试有两个文本链接，它们指向两个不同的 URL，并且文本每 7 秒从一个文本更改为另一个文本。

我尝试添加点击事件，但无法使其正常工作。

jQuery：

```
$(document).ready(function () {
    setInterval(function() {
$('#rollover').fadeOut(500, function() {
    var $this = $(this);
    var textOne = "Join our facebook group";
    var textTwo = "Join our LinkedIn group connect Scientists today";
    $this.text($this.text() == textOne ? textTwo : textOne);  
    $this.fadeIn(500);
});
}, 7000);   

}); 
```

html:

```
<p id="rollover">Join our LinkedIn group connect Scientists today</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:36:12.070

我相信您的问题出在这一行：

```
$this.text($this.text() == textOne ? textTwo : textOne); 
```

首先，我建议将 $this 重命名为 self，以防万一那里发生某种冲突。

```
self.text(self.text() == textOne ? textTwo : textOne); 
```

第三，这确实工作正常......如评论中显示的小提琴所示。

[http://jsfiddle.net/athd6/](http://jsfiddle.net/athd6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:41:23.293

```
<script type="text/javascript">
$(document).ready(function () 
{
      change();
});

function change(){
    setTimeout(function() {
        $('#rollover').fadeOut(500, function() {
            var $this = $(this);
            var textOne = "Join our facebook group";
            var textTwo = "Join our LinkedIn group connect Scientists today";
            $this.text($this.text() == textOne ? textTwo : textOne);  
            $this.fadeIn(500);
            change();
        });
        }, 7000); 
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:41:52.090

干得好

```
var textOne = "Join our facebook group";
var textTwo = "Join our LinkedIn group connect Scientists today";
var isRotated=true;
var rotateText=function(){
    setInterval(function(){        
        var text=isRotated?textOne:textTwo;
          $("#rollover").text(text);      
        isRotated=!isRotated;
    }, 7000);
};

rotateText(); 
```

[http://jsfiddle.net/UQk5h/1/](http://jsfiddle.net/UQk5h/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T16:37:28.187

下一个试试

```
 $this.html($this.text() == textOne ? textTwo : textOne); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T16:40:09.017

你的意思是这样的：http: [//jsfiddle.net/rfpSL/1/](http://jsfiddle.net/rfpSL/1/)

如将 更改`<p>`为 an`<a>`并添加：

```
 var linkOne = "http://url-one.com";
        var linkTwo = "http://url-two.com";

        $this.attr('href', $this.attr('href') == linkOne ? linkTwo : linkOne); 
```

# android - Android SQLite 默认值

> ID：15140673
> 
> 赞同：0
> 
> 时间：2013-02-28T16:30:19.007
> 
> 标签：android, sqlite

我想让用户输入一个字符串，在定义要创建的表的列时说“TEST”。

让列名称为“标准”

用户在向创建的表中插入行时永远不必再次输入“TEST”。

这个参数也可以完成这项工作：

> create table tablename( ..... , 标准文本默认\'TEST\');

?

请让我知道，因为我搜索了一段时间，但无法消除我的疑问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:06:42.650

为什么`\' \'`在创建字符串中使用？

以下作品：

```
private static final String CREATE_TABLE_CONTACT = CREATE_TABLE + CONTACT.TABLE_NAME + " (" + CONTACT._ID+ " INTEGER PRIMARY KEY," + CONTACT.FIRST_NAME + " TEXT, " + CONTACT.LAST_NAME + " TEXT DEFAULT 'TEST');"; 
```

这是 DBHelper 的完整示例：

```
public class DBHelper extends SQLiteOpenHelper {

public static interface CONTACT extends BaseColumns {
                String TABLE_NAME = "human";
                String FIRST_NAME = "first_name";
                String LAST_NAME = "last_name";
            }

  private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
            private static final String DATABASE_NAME = "someDataBase";
            private static final int DATABASE_VERSION = 1;

  private static final String CREATE_TABLE_CONTACT = CREATE_TABLE + CONTACT.TABLE_NAME + " (" + CONTACT._ID
                    + " INTEGER PRIMARY KEY," + CONTACT.FIRST_NAME + " TEXT, " + CONTACT.LAST_NAME
                    + " TEXT DEFAULT 'TTEESSTT');"; 

 public DBHelper(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

   @Override
            public void onCreate(SQLiteDatabase db) {
                db.execSQL(CREATE_TABLE_CONTACT);
            }

@Override
            public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
                db.execSQL("DROP TABLE IF EXISTS " + CONTACT.TABLE_NAME);
                onCreate(db);
}

public Cursor getAllContacts() {
                return getReadableDatabase().query(CONTACT.TABLE_NAME, null, null, null, null, null, null);
            }

//method to insert contact
            public void insertContact(String firstName, String lastName) {
                final ContentValues values = new ContentValues();
                values.put(CONTACT.FIRST_NAME, firstName);
                //optional parameter 
                if (lastName != null) {
                    values.put(CONTACT.LAST_NAME, lastName);
                }
                getWritableDatabase().insert(CONTACT.TABLE_NAME, null, values);
            }
        }

And its usage, for example:

DBHelper db = new DBHelper(this);
            db.insertContact("Dmitry", "Antonov");
            db.insertContact("Andy", "Sudorov");
            db.insertContact("Oleg", null);
            db.insertContact("Ivan", "Lozin");
            db.insertContact("Serg", null);
            Cursor allContacts = db.getAllContacts();
            ListView testList = (ListView) findViewById(R.id.testList);
            testList.setAdapter(new SimpleCursorAdapter(this, android.R.layout.two_line_list_item, allContacts,
                    new String[] { DBHelper.CONTACT.FIRST_NAME, DBHelper.CONTACT.LAST_NAME }, new int[] {android.R.id.text1, android.R.id.te 
```

# javascript - 将 javascript 变量转换为 ruby 变量

> ID：15140675
> 
> 赞同：1
> 
> 时间：2013-02-28T16:30:23.420
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, private-pub

我正在尝试使用 rails 中的 private-pub gem 创建一个基本的聊天客户端。我试图实现的功能如下。如下代码所示，有一个在线用户列表。每个用户都订阅了自己的私人频道。为了让用户向另一个用户发送消息，他必须从在线用户列表中选择一个用户并发送消息。选择一个用户时，使用 jquery 将用户的类设置为活动。然后获取在线用户的类名 userid 并尝试发布消息。要发布此消息，我需要将其发送到他订阅的频道，我需要将从 javascript 变量获取的用户 id 变量转换为 ruby​​ 变量。

```
<%= subscribe_to  "/messages/#{current_user.id}" %>
<h1>Messages</h1>
<% if user_signed_in? -%>       
    <div class="row">
        <div class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list userlist">
                <% for user in User.all -%>
                <% if user.online? and user.id!=current_user.id -%>

            <li><%= link_to '#',:class => user.id ,:remote=>true do %>
            <%= image_tag user.profile.picture(:thumbnail_medium) %>
            <%= user.profile.name %>
            <% receiver = user.id -%>
                    <% end %>
                </li>
            <% end -%>
        <% end -%>

            </ul>

    </div>          
    </div>
    <div class="span8 well well-small"> 
        <div id="chatwindow">
        <div id="messagewindow">
        <ul id="chat">
            <%= render @messages %>
            </ul>
        </div><br>
 <div id="inputcontainer"><%= form_for Message.new, :remote=>true, :url => {:controller=>:messages,:action =>:create }  do |f| -%>
                <%= f.label :Message %>                 
                <%= f.text_field :content %>
                <%= f.submit "Submit"  %>
            <% end -%>  </div>
            </div>          
        </div>  
    </div>
<% else -%>

<% end -%> 
```

Java 脚本如下：

```
$(function(){
    $('.userlist li').click(function() {
    $(this).siblings('li').removeClass('active');
    $(this).addClass('active');
});
}); 
```

这是发布消息的嵌入式js

```
receiver = $('.active a').attr('class').
<% publish_to "/messages/"+receiver do  -%>
    $('#chat').append('<div class="well well-small"><%= j link_to (image_tag(current_user.profile.picture(:thumbnail))),username_path(current_user.username) %><%= j link_to current_user.profile.name, username_path(current_user.username) %> <%= "  #{@message.content}" %></div>')
<% end -%>
$('#new_message)[0].reset(); 
```

要创建通道，我正在获取`receiver`使用 jquery，我需要将其转换为 ruby​​ 以传递给发布函数，这是问题所在。有没有办法将此 javascript 变量转换为 ruby​​ 变量？任何其他实现该功能的想法将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:06:15.433

Opal 是目前最好的 Ruby 到 JavaScript 转换器/编译器。你可以在这里看到它的作用：http: [//goo.gl/f6f1D](http://goo.gl/f6f1D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:48:49.043

我通过向控制器发送 ajax 请求来实现它。每当在聊天窗口（从在线用户列表中）选择用户时，我将这些参数发送到控制器并通过设置使用 jquery 的值通过隐藏字段将其保存在我的模型中。现在我上面提到的 javascript 变量可以是通过红宝石访问。

谢谢 ：）

# algorithm - 算法 - 朋友的朋友

> ID：15140677
> 
> 赞同：5
> 
> 时间：2013-02-28T16:30:29.127
> 
> 标签：algorithm, graph-theory, graph-algorithm

我只是在学习图论，并且正在尝试将代码编写为算法问题。问题涉及**n**组人，每个人与其中一个成员至少有一个相互友谊。问题是找到两个人之间最短的友谊链接。最短的友谊链接包含的人数最少。例如; A 和 B 是共同的朋友，B 和 C 是共同的朋友，如果 A 和 C 也是共同的朋友，那么 AC 和 ABC 是 A 和 C 之间的友谊链接，但 AC 被认为更短，因为它涉及的个人较少。

我想知道在这种情况下适用哪种图论算法，并且我会很感激任何关于图论的免费互联网文档的推荐（维基除外）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T16:47:36.677

对于两个节点的最短路径的未加权问题-您可以使用[**BFS**](http://en.wikipedia.org/wiki/Breadth-first_search)，不需要更难实现且效率较低的[Dijkstra 算法。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

请注意，BFS 的主要问题是空间效率，因为它在`O(|V|)`空间中运行，它可以通过与 DFS 进行权衡来部分解决，称为[**迭代深化 DFS**](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)。它也将是最佳的，但会消耗更少的空间（以额外的时间为代价）。

* * *

情况似乎并非如此，但如果您可以评估您与目标的距离 - 您可以使用[A* Algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm)，它具有良好的[启发式函数](http://en.wikipedia.org/wiki/Heuristic_function)可能会执行得更快。

另请注意：如果您想要所有用户之间的最短距离，您可以使用[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)

# java - 当我放置背景时，android复选框加倍

> ID：15140678
> 
> 赞同：0
> 
> 时间：2013-02-28T16:30:30.793
> 
> 标签：java, android, checkbox, drawable

我正在尝试为复选框设置自定义背景，但它加倍了，我不知道为什么。

我的主要活动：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    CheckBox cb = new CheckBox(getApplicationContext());
    DrawableCheckButton d = new DrawableCheckButton(getApplicationContext());
    cb.setBackgroundDrawable(d);
    setContentView(cb);
} 
```

DrawableCheckButton 类：

```
public class DrawableCheckButton extends StateListDrawable {

public DrawableCheckButton(Context context) {
    int[] state_checked = { android.R.attr.state_checked };
    int[] state_active = { android.R.attr.state_enabled };
    CustomDrawableCheckButton d = new CustomDrawableCheckButton(context);
    CustomDrawableCheckButton2 d2 = new CustomDrawableCheckButton2(context);
    addState(state_checked, d);
    addState(state_active, d2);
}

} 
```

另一个班级看起来像这样

```
public class CustomDrawableCheckButton extends Drawable{
private Context context;
public CustomDrawableCheckButton(Context context) {
    // TODO Auto-generated constructor stub
    this.context = context;
}
@Override
public void draw(Canvas canvas) {
    Path path1 = new Path();
    Paint paint1 = new Paint();
    path1.moveTo(0, 3);
    path1.lineTo(17, 3);
    path1.moveTo(0, 3);
    path1.lineTo(0, 23);
    path1.lineTo(20, 23);
    path1.lineTo(20, 14);
    paint1.setColor(context.getResources().getColor(R.color.orange));
    paint1.setStrokeWidth(1);
    paint1.setStyle(Paint.Style.STROKE);
    //
    Path path2 = new Path();
    Paint paint2 = new Paint();
    path2.moveTo(4,10);
    path2.lineTo(10, 16);
    path2.lineTo(22, 4);
    paint2.setColor(context.getResources().getColor(R.color.purple));
    paint2.setStrokeWidth(5);
    paint2.setStyle(Paint.Style.STROKE);
    canvas.drawPath(path1, paint1);
    canvas.drawPath(path2, paint2);

} 
```

我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:51:21.573

这是我的建议：
在`MainActivity`中，您应该避免使用`ApplicationContext`，请参阅此[问题](https://stackoverflow.com/questions/987072/using-application-context-everywhere)以获取更多信息，并使用`setButtonDrawable`而不是`setBackgroundDrawable`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    CheckBox cb = new CheckBox(this);
    DrawableCheckButton d = new DrawableCheckButton(this);
    cb.setButtonDrawable(d);
    setContentView(cb);
} 
```

在`DrawableCheckButton`：

```
public DrawableCheckButton(Context context) {
    CustomDrawableCheckButton d = new CustomDrawableCheckButton(context);
    addState(new int[]{android.R.attr.state_checked }, d);
    CustomDrawableCheckButton2 d2 = new CustomDrawableCheckButton2(context);
    addState(new int[]{}, d2);
} 
```

希望有所帮助。请让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:02:15.337

答案是我没有做 cb.setBackgroundDrawable()，而是做了 cb.setButtonDrawable()。背景是全部，按钮是标记。

# facebook - 假设一个人没有注销，Facebook OAuth 会话会持续多久？是否有可能扩展它？

> ID：15140681
> 
> 赞同：0
> 
> 时间：2013-02-28T16:30:44.853
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我希望使用 Facebook OAuth，并且我每 4 小时就会退出一次。不是来自 Facebook.com，而是来自我的网站。这是典型的吗？我该如何扩展它？

理想情况下，用户应该保持身份验证，直到他们注销。

我不是在寻找 deprecated `offline_access`，而是让用户今天和明天再次访问我的网站，而无需再次单击 Facebook OAuth 按钮。如果他们愿意，他们总是可以手动注销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:44:24.097

用户访问令牌在之后变为无效

*   2 小时（如果通过客户端流程生成）
*   2 个月（如果通过服务器端流生成）
*   密码更改
*   取消对应用程序的授权

您可以通过调用此端点将 access_token（通过客户端流程生成）的有效期延长至 60 天：

```
https://graph.facebook.com/oauth/access_token?             
        client_id=APP_ID&
        client_secret=APP_SECRET&
        grant_type=fb_exchange_token&
        fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

[你可以在这里](https://developers.facebook.com/roadmap/offline-access-removal/)了解更多。

一旦 access_token 失效或过期，您必须让用户再次遵循登录流程。

# java - 使用带有键对象参数的方法修改类实例字段

> ID：15140685
> 
> 赞同：2
> 
> 时间：2013-02-28T16:30:54.840
> 
> 标签：java, instance, field

这是我最近经常遇到的一个问题。我知道一种让它工作的技巧，但我不确定这是否是最好的方法，但它似乎是唯一没有反思的方法，这似乎是普遍不鼓励的。

我正在尝试做的事情：我有我希望能够通过用户输入（字符串）修改的类实例。因此，例如：

```
public class Apple
{

   private String color; //Color of the apple
   private float cost; //Cost of the apple
   private double radius; //Radius of the apple

   public Apple()
   {
      this.color = "";
      this.cost = 0;
      this.radius = 0;
   }

   //The method I am concerned/talking about
   public void setValue(String key, Object value)
   {
      if (key.equalsIgnoreCase("color"))
      {
         this.color = (String)value;
      }
      else if (key.equalsIgnoreCase("cost"))
      {
         this.cost= (float)value;
      }
      else if (key.equalsIgnoreCase("radius"))
      {
         this.radius = (double)value;
      }
   }
} 
```

这被认为是不好的形式吗？我有一个来自用户的键（字符串）来标识他们想要修改的属性/字段，然后我有另一个字符串（值）来指示他们想要将其更改为的值。我确定我可以使用反射，但是

A）我听说过它的糟糕形式并且不赞成

B) It requires perfect accuracy in terms of variable names. So if I have 'appleColor', and the user puts 'applecolor', it won't work. Or, if I have 'applecolor' and I want the user to just be able to put in 'color', etc.

I'm wondering if there is a more structured/object oriented/useful way to do this. I thought about perhaps having each class that requires 'setValue()' to have a HashMap that matches a property/field to it's string key, but I'm not sure if that should be achieved through a method such as 'getHashMap()' that returns a hashmap with

hashMap.put("color", color)... or what.

Any help would be appreciated, even if it's just pointing me in the direction of a design pattern that handles this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:36:55.170

You want the program to instinctively know what property to map to? That's not feasible. If you don't want to use reflection libraries, do your own and work the key the way you want.

Compare the keys ignoring the case and using the contains I guess.

Here is an algorythm that can help you, change it at your taste:

```
public static T Cast<T>(this Object myobj)
    {
        Type objectType = myobj.GetType();
        Type target = typeof(T);
        var x = Activator.CreateInstance(target, false);
        var z = from source in objectType.GetMembers().ToList() where source.MemberType == MemberTypes.Property select source;
        var d = from source in target.GetMembers().ToList() where source.MemberType == MemberTypes.Property select source;
        List<MemberInfo> members = d.Where(memberInfo => d.Select(c => c.Name).ToList().Contains(memberInfo.Name)).ToList();
        PropertyInfo propertyInfo;
        object value;
        foreach (var memberInfo in members)
        {
            propertyInfo = typeof(T).GetProperty(memberInfo.Name);
            PropertyInfo _prop = myobj.GetType().GetProperty(memberInfo.Name);
            if (_prop != null)
            {
                value = _prop.GetValue(myobj, null);
                try
                {
                    propertyInfo.SetValue(x, value, null);
                }
                catch (Exception ex)
                {
                    Debug.WriteLine(ex.Message);
                }
            }
        }
        return (T)x;
    } 
```

# perl - 使用 Perl 从需要 p12 证书的网站下载文件

> ID：15140689
> 
> 赞同：1
> 
> 时间：2013-02-28T16:31:10.440
> 
> 标签：perl, lwp

我有一个网站，我需要从中下载文件。该网站需要我拥有的数字证书。我有一个站点提供的 p12 文件，它很容易导入到允许访问该站点的 Windows 中。我想要做的是从网站下载一堆 csv 文件并解析它们。

我找到了 Net::SSLeay 和 Crypt::SSLeay 包。我还看到 LWP::Useragent 提到了 SSL，但我不确定这是否足以满足我的要求。

所以基本上我需要知道从哪里开始以及哪些软件包最容易用于此目的。
我正在使用草莓 perl 5.16.2 运行 Windows 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:08:54.803

借助该命令将[PKCS #12 证书转换为 PEM 格式。](http://enwp.org/PKCS12)[`openssl pkcs12`](http://www.openssl.org/docs/apps/pkcs12.html)安装[LWP::Protocol::https](http://p3rl.org/LWP%3a%3aProtocol%3a%3ahttps)。将[`SSL_ca_file`参数](http://p3rl.org/LWP%3a%3aUserAgent#SSL_ca_file-path)设置为指向 PEM 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:04:46.163

如果您将 P12 转换为 PEM 格式，您可以使用：

```
use Mojo::UserAgent;
my $url = 'https://some.site.com/path/to/file.zip';
my $ua = Mojo::UserAgent->new( max_redirects=>5, 
                               cert=>'client_cert.crt.pem', 
                               key=>'client_cert.key.pem' );
$ua->get($url)->res->content->asset->move_to('downloaded_file.zip'); 
```

如果您使用的是草莓 perl，您需要首先安装 Mojo::UserAgent 模块，如下所示：

```
c:\> cpan -i Mojo::UserAgent 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:50:56.667

从这篇文章看来，openssl 自 2006 年以来就支持 64 位 linux：

[http://www.mail-archive.com/openssl-users@openssl.org/msg47285.html](http://www.mail-archive.com/openssl-users@openssl.org/msg47285.html)

可以在 64 位 Windows 上安装它[你如何为 x64 编译 OpenSSL？](https://stackoverflow.com/questions/158232/how-do-you-compile-openssl-for-x64)

所以绝对可以在linux上安装它。请告诉我们您遇到的错误。

问候，

# solr - How to import RDF file to Apache Solr

> ID：15140691
> 
> 赞同：4
> 
> 时间：2013-02-28T16:31:12.967
> 
> 标签：solr, rdf

I'm new to Apache Solr. I want to import a rdf file into solr for indexing.I have googled it but I didn't find anything useful. please give me some pointers.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:04:57.773

Solr 接受 JSON 文档。您可以将 RDF 文档转换为[JSON-LD](http://json-ld.org/)文档。JSON-LD 是一种 RDF 序列化格式，它是 RDF 1.1 的一部分。您可以安全地在 JSON-LD 和其他 RDF 序列化之间来回切换，而不会丢失任何数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:37:02.617

看一下DataImportHandler 的[HttpDataSource 示例](http://wiki.apache.org/solr/DataImportHandler#HttpDataSource_Example)。它讨论了使用 XPathEntityProcessor 处理 RDF。

编辑 - 另一个博客 -[使用 Solr 对类固醇进行 RDF 聚合和全文搜索](http://fgiasson.com/blog/index.php/2009/04/29/rdf-aggregates-and-full-text-search-on-steroids-with-solr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T13:40:25.290

您还可以寻找能够将 RDF 数据添加到 lucene的[Siren](http://rdelbru.github.io/SIREn/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-27T10:39:00.397

我在这个实验上的 2 美分，让我知道你的想法：[http ://andreagazzarini.blogspot.it/2014/12/a-solr-rdf-store-and-sparql-endpoint-in.html](http://andreagazzarini.blogspot.it/2014/12/a-solr-rdf-store-and-sparql-endpoint-in.html)

# scheme - 在方案代码中显示最后一个参数

> ID：15140692
> 
> 赞同：0
> 
> 时间：2013-02-28T16:31:20.503
> 
> 标签：scheme

我希望能够确定在我的测试中为我正在测试的编译器（scheme -> cisc-assembly）计算的最后一个值。

我已经有一个脚本可以自动执行大多数测试和编译过程，但我想自动比较编译器的输出（存储在寄存器 #0 [R0] 并打印）与[chez](http://www.scheme.com/)的（chez 是编译器）输出（不知道如何“获取”最后一个计算的参数，这是我想要比较的）。

有没有办法做到这一点？还是我必须创建重复的测试，其中一个在最后一个参数上带有硬编码打印（“显示”）？

一个简单的测试文件示例：

```
;---------------------
((lambda (x) x) #t)
;--------------------- 
```

这将编译为一个相当复杂且长的 .c 文件，其中包含集成顺式程序集，该程序集将最后一个表达式的结果存储在一个特殊的寄存器中。

有没有办法回显的最后结果

```
((lambda (x) x) #t) 
```

（即#t）没有基于 chez-scheme 的评估**手动修改文件的明显解决方案？**

提前感谢任何帮助或线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:15:38.973

如果最后一个“结果”来自 Scheme 表达式，那么您可以使用`eval`，例如：

```
> (eval '((lambda (x) x) 'yes) (scheme-report-environment 5))
yes 
```

# python - python中如何使用__iter__动态创建对象

> ID：15140697
> 
> 赞同：1
> 
> 时间：2013-02-28T16:31:29.860
> 
> 标签：python, class, python-3.x, iterator

好的，所以我正在尝试打印所有汽车对象...我有 2 个问题：

1.  我实施的方式`__iter__`可以接受吗？
2.  我现在得到了我想要的结果，但结果相当丑陋......有没有办法格式化打印以使其看起来更漂亮？

这是我的代码：

```
import sqlite3

class Database:

    def __init__(self, **kwargs):
    self.filename = kwargs.get('filename')

    def __iter__(self):
        car_object = {}
        cursor = self._db.execute('select * from CARS'.format(self._table))
        for row in cursor:
            objectname = str(row['IDENT'])
            car_object[objectname] = Cars(make = row['MAKE'], 
            model = row['MODEL'], disp = row['DISPLACEMENT'], 
            power = row['POWER'], luxury = row['LUXURY'])
            yield dict(row)

    @property
    def filename(self):
        return self._filename

    @filename.setter
    def filename(self, fn):
        self._filename = fn
        self._db = sqlite3.connect(fn)
        self._db.row_factory = sqlite3.Row

class Cars: 
    def __init__(self, **kwargs):
        self.variables = kwargs

    def set_Variable(self, k, v):
        self.variables[k] = v

    def get_Variable(self, k):
        return self.variables.get(k, None)

def main():
    db = Database(filename = 'insurance.sqlite')
    print ('IDENT                       MAKE               MODEL                   
    DISPLACEMENT             POWER              LUXURY')
    for item in db:
        print(item['IDENT'], '            ', item['MAKE'], '            ', 
          item['MODEL'],'            ', item['DISPLACEMENT'],
          '            ', item['POWER'],'            ', item['LUXURY'])

if __name__ == "__main__": main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:24:06.743

您不想打印生成器本身，而是想打印生成器返回的每个项目。

```
for item in db:
    print(item) 
```

# objective-c - NSData 到 CRC-16？

> ID：15140699
> 
> 赞同：2
> 
> 时间：2013-02-28T16:31:36.237
> 
> 标签：objective-c, cocoa, checksum, crc16

我正在尝试从 NSData 计算 CRC-16。它不起作用，我期待来自 123456789 的“BB3D”，但我没有得到任何类似的东西。

这是我拥有的代码：

```
static const unsigned short crc16table[] =
{
    0x0000, 0xC0C1, 0xC181, 0x0140, 0xC301, 0x03C0, 0x0280, 0xC241,
    0xC601, 0x06C0, 0x0780, 0xC741, 0x0500, 0xC5C1, 0xC481, 0x0440,
    0xCC01, 0x0CC0, 0x0D80, 0xCD41, 0x0F00, 0xCFC1, 0xCE81, 0x0E40,
    0x0A00, 0xCAC1, 0xCB81, 0x0B40, 0xC901, 0x09C0, 0x0880, 0xC841,
    0xD801, 0x18C0, 0x1980, 0xD941, 0x1B00, 0xDBC1, 0xDA81, 0x1A40,
    0x1E00, 0xDEC1, 0xDF81, 0x1F40, 0xDD01, 0x1DC0, 0x1C80, 0xDC41,
    0x1400, 0xD4C1, 0xD581, 0x1540, 0xD701, 0x17C0, 0x1680, 0xD641,
    0xD201, 0x12C0, 0x1380, 0xD341, 0x1100, 0xD1C1, 0xD081, 0x1040,
    0xF001, 0x30C0, 0x3180, 0xF141, 0x3300, 0xF3C1, 0xF281, 0x3240,
    0x3600, 0xF6C1, 0xF781, 0x3740, 0xF501, 0x35C0, 0x3480, 0xF441,
    0x3C00, 0xFCC1, 0xFD81, 0x3D40, 0xFF01, 0x3FC0, 0x3E80, 0xFE41,
    0xFA01, 0x3AC0, 0x3B80, 0xFB41, 0x3900, 0xF9C1, 0xF881, 0x3840,
    0x2800, 0xE8C1, 0xE981, 0x2940, 0xEB01, 0x2BC0, 0x2A80, 0xEA41,
    0xEE01, 0x2EC0, 0x2F80, 0xEF41, 0x2D00, 0xEDC1, 0xEC81, 0x2C40,
    0xE401, 0x24C0, 0x2580, 0xE541, 0x2700, 0xE7C1, 0xE681, 0x2640,
    0x2200, 0xE2C1, 0xE381, 0x2340, 0xE101, 0x21C0, 0x2080, 0xE041,
    0xA001, 0x60C0, 0x6180, 0xA141, 0x6300, 0xA3C1, 0xA281, 0x6240,
    0x6600, 0xA6C1, 0xA781, 0x6740, 0xA501, 0x65C0, 0x6480, 0xA441,
    0x6C00, 0xACC1, 0xAD81, 0x6D40, 0xAF01, 0x6FC0, 0x6E80, 0xAE41,
    0xAA01, 0x6AC0, 0x6B80, 0xAB41, 0x6900, 0xA9C1, 0xA881, 0x6840,
    0x7800, 0xB8C1, 0xB981, 0x7940, 0xBB01, 0x7BC0, 0x7A80, 0xBA41,
    0xBE01, 0x7EC0, 0x7F80, 0xBF41, 0x7D00, 0xBDC1, 0xBC81, 0x7C40,
    0xB401, 0x74C0, 0x7580, 0xB541, 0x7700, 0xB7C1, 0xB681, 0x7640,
    0x7200, 0xB2C1, 0xB381, 0x7340, 0xB101, 0x71C0, 0x7080, 0xB041,
    0x5000, 0x90C1, 0x9181, 0x5140, 0x9301, 0x53C0, 0x5280, 0x9241,
    0x9601, 0x56C0, 0x5780, 0x9741, 0x5500, 0x95C1, 0x9481, 0x5440,
    0x9C01, 0x5CC0, 0x5D80, 0x9D41, 0x5F00, 0x9FC1, 0x9E81, 0x5E40,
    0x5A00, 0x9AC1, 0x9B81, 0x5B40, 0x9901, 0x59C0, 0x5880, 0x9841,
    0x8801, 0x48C0, 0x4980, 0x8941, 0x4B00, 0x8BC1, 0x8A81, 0x4A40,
    0x4E00, 0x8EC1, 0x8F81, 0x4F40, 0x8D01, 0x4DC0, 0x4C80, 0x8C41,
    0x4400, 0x84C1, 0x8581, 0x4540, 0x8701, 0x47C0, 0x4680, 0x8641,
    0x8201, 0x42C0, 0x4380, 0x8341, 0x4100, 0x81C1, 0x8081, 0x4040,
};

- (unsigned short)crc16: (NSData*) data
{
    unsigned int    crc;

    crc = 0xFFFF;

    uint8_t byteArray[[data length]];
    [data getBytes:&byteArray];

    for (int i = 0; i<[data length]; i++) {
        Byte byte = byteArray[i];
        crc = (crc << 8) ^ crc16table[((crc >> 8 ^ byte) & 0xFF)];
    }

    return crc;
}

NSString *test = @"123456789";
NSData *testData = [test dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"%d", [self crc16:testData]);
NSLog([[NSString alloc] initWithFormat: @"%02x", (int) [self crc16:testData]]); 
```

我得到 54849 和 d641，这不是我所期望的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:54:50.300

假设[这里](https://stackoverflow.com/questions/10564491/function-to-calculate-a-crc16-checksum)的答案是正确的，您可以将它很好地包装在一个类别中：

```
@interface NSData (crc16Checksum)
- (unsigned short)crc16Checksum;
@end

@implementation NSData (crc16Checksum)
- (unsigned short)crc16Checksum
{
    const uint8_t *bytes = (const uint8_t *)[self bytes];
    uint16_t length = (uint16_t)[self length];
    return (unsigned short)gen_crc16(bytes, length);
}
@end 
```

用法：

```
NSData *data = [NSData dataWith...];
unsigned short crc16 = [data crc16Checksum]; 
```

PS：代码已被大脑编译：p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T09:27:00.923

现在，我有一个新方法：

功能：

```
- (uLong) crc16:(NSData*) data {
    uLong crcValue = crc32( 0L,NULL, 0L );
    crcValue = crc32( crcValue, [data bytes],(uint) [data length] );
    return crcValue;`enter code here`
} 
```

如何使用：

```
NSMutableData *fileData = [NSMutableData dataWithContentsOfFile: filename];
uLong result = [self crc16:fileData];
NSLog(@"result %ld",result);` 
```

# rspec - Rspec 使用模拟和期望从模型的范围方法中测试有序检索

> ID：15140700
> 
> 赞同：0
> 
> 时间：2013-02-28T16:31:37.493
> 
> 标签：rspec, mocking, rspec-rails, stubbing

我是 rspec 的新手，嘲笑和存根。我慢慢地开始欣赏并围绕孤立测试和模拟/存根的概念。我有一个基本问题，我认为通过代码更容易解​​释：

```
class NewsItem < ActiveRecord::Base
  ...
  scope :ordered, order("created_at DESC")
  ...
end 
```

现在在我的模型测试中，我希望测试返回 news_items 有序列表的行为。使用 FactoryGirl DB-touching 测试，我实现了如下：

```
# TODO use mocking and stubbing here
it "should have an ordered method to retrieve news items in the descending order" do
  news_item_x = create(:news_item, created_at: DateTime.new(2012,01,01))
  news_item_y= create(:news_item, created_at: DateTime.new(2011,01,01))
  news_item_z= create(:news_item, created_at: DateTime.new(2012,03,01))

  # .all added to avoid comparison failure between groups of NewsItem objects an ActiveRel group.
  expect(NewsItem.ordered.all).to eql([news_item_z, news_item_x, news_item_y])
end 
```

我不知道如何将上述测试转换为模拟和存根。这是第一次尝试，但显然我在这里误解了一些核心概念。

```
xit "should have an ordered method to retrieve news items in the descending order" do

  news_item_x = mock(NewsItem, created_at: DateTime.new(2012,01,01))
  news_item_y = mock(NewsItem, created_at: DateTime.new(2011,01,01))
  news_item_z = mock(NewsItem, created_at: DateTime.new(2012,03,01))

  NewsItem.should_receive(:ordered).and_return([news_item_z, news_item_x, news_item_y])
  # NewsItem.should_receive(:ordered).ordered # not working.

  # this is pointless as it's not checking the order of anything, just the call.
  NewsItem.ordered
end 
```

在这种测试中模拟/存根是否合适？

任何建议将不胜感激。

判决：

我从@arieljuod 和@zetetic 那里得到了一些很好的答案。对于我最初的问题，在这里嘲笑和存根是否合适？正如@zetetic 指出的那样，答案似乎是否定的。

另一方面，@arieljuod 提供了一种非常好的方法来实际测试我的代码片段（不一定通过模拟和存根）。这两个都是有效的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:51:06.207

*在这种测试中模拟/存根是否合适？*

不。

使用模拟和存根的目的是将*您*编写的代码与其依赖项隔离开来。在 的情况下`scope`，它所依赖的一切都埋在 Rails 框架中。此外，您不需要首先测试框架/库代码的内部——原作者已经这样做了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:52:46.143

您应该只测试您的“有序”范围在模型上以“created_at DESC”作为参数调用“订单”，至少在那个简单的例子中

```
describe 'ordered' do
  it 'orders by created_at desc' do
    NewsItem.should_receive(:order).once.with('created_at DESC')
    NewsItem.ordered
  end
end 
```

您可以相信查询将具有您想要的顺序

更复杂的范围可能需要其他规范，但是您始终可以在较小的范围内打破复杂的范围以正确测试它们，并且仅在范围不平凡时才进行真正的数据库查询（就像您首先实际创建对象并运行查询一样） （如果您执行某种奇怪的手动 sql 查询，您应该测试它是否符合您的要求，否则，请信任 rails）

编辑：如评论所述，该代码不起作用，您可以检查 ActiveRelation 对象是否具有所需的顺序集：

```
describe 'ordered' do
  it 'orders by created_at desc' do
    NewsItem.ordered.order_values.should == ['created_at DESC']
  end
end 
```

这样您就知道活动关系将在查询中使用该顺序

# ios - 如果 iOS 是 32 位操作系统，我们如何使用 uint64_t 和 int64_t？

> ID：15140708
> 
> 赞同：4
> 
> 时间：2013-02-28T16:31:55.993
> 
> 标签：ios

它似乎工作正常，但我认为最多可以存储在内存中的是 32 位整数？

现在我很困惑它有什么不同。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T17:05:59.337

我认为其他答案并没有完全正确地解释这一点。

uint64_t 和 int64_t 是*C 语言数据类型*，而不是*硬件*数据类型。编译器会尽一切努力使这些类型作为 64 位无符号或有符号整数工作。如果硬件提供 64 位寄存器和整数运算，那就很好——编译器将直接使用这些。如果硬件只有 32 位寄存器（或 16 位或 8 位），则编译器和运行时系统使用软件仿真来完成工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T16:40:54.717

不同之处不在于您可以使用 64 位数据类型。不同之处在于可用内存地址空间的大小，以及所需的内存指针大小。在 32 位操作系统中，您有 2^32 字节的可寻址内存空间，并且您需要 32 位指针来覆盖所有内容。在 64 位操作系统中，您有 2^64 字节的内存空间来寻址，因此指针必须是 64 位的。

在硬件级别，固有的 64 位数据类型在 64 位硬件上可能更优化，因为将有 64 位寄存器和指令来处理它们。否则编译器/运行时库将做更多的工作来支持/模拟 32 位硬件上的 64 位操作。

# javascript - Html(forms) injection

> ID：15140713
> 
> 赞同：0
> 
> 时间：2013-02-28T16:32:02.813
> 
> 标签：javascript, html, post

I'm noobie in webdev, i'm trying to get some information how dangerous for server security coudl be such code with no data validation

```
<form id="test" name="test" method="post" action="">
<input type="hidden" value="" name="tst">
<input type="reset" onclick="test.submit()" value="test">
</form> 
```

i know we can inject html code or even js script but is it dangerous for server side ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:41:42.133

前端表单的实际结构对服务器端的安全性没有真正的影响。这一切都取决于数据传递后服务器对数据的处理方式。使用 Firebug、Chrome 开发工具等，任何用户都可以在您的网站中完全从头开始编写、修改和提交表单。或者他们可以`post/get`直接发送变量，而无需查看您的表单……**前端验证和结构完全是为了提示和帮助用户，而不是为您的应用程序提供安全性**。永远不要指望它受到用户的尊重。

另外（旁边），为什么不使用

```
<input type="submit" value="test"> 
```

代替

```
<input type="reset" onclick="test.submit()" value="test"> 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:36:38.933

从这里唯一可更改的项目是 tst 字段。

作为一般规则，客户端可以更改表单中的任何字段（是的，甚至是隐藏字段），因此您应该过滤所有字段（通过 PHP 中的 mysqli::real_escape_string() 或其他方法）如果它们进入数据库，或者如果您使用此字段来包含（）服务器上的一些其他项目。如果您只是针对条件抛出字段（并且不会在其他地方使用），则不需要过滤，但额外的安全性不会受到伤害。

至于注入 HTML/JS 的东西，它只适用于其他脚本显示提交的 HTML 时。在这种情况下，调用 htmlspecialchars(_uni) 以确保它们不会运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:38:19.450

用户可以很容易地编辑隐藏输入的值，从而很容易对您的网站造成损害。根据此表单的功能，您至少应该添加斜杠和 htmlentities。当然，这仅在将数据发送到服务器时才重要。

# azure - Windows Azure Role Environment - Unable to find assembly

> ID：15140719
> 
> 赞同：0
> 
> 时间：2013-02-28T16:32:22.487
> 
> 标签：azure, dotnetopenauth, azure-role-environment

我在调用 Windows Azure 角色环境时收到此错误。我检查了 DotNetOpenAuth.OAuth.Common.dll 作为 Copy Local = True。

任何想法？

> System.TypeInitializationException 被捕获 HResult=-2146233036
> Message='' 的类型初始化程序引发了异常。
> 源=Microsoft.WindowsAzure.ServiceRuntime 类型名称=
> StackTrace：在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetLocalResource(String localResourceName) 在 Platform.Services.Api.Common.FileStorage.GetFilePath(String azureLocalResourceNameFromServiceDefinition, String blobContainer, String fileName) 在 d:\TFS Project\DEV\Platform\Platform .Development\Platform.Services.Api\Common\FileStorage.cs：D:\TFS Project\DEV\Platform\Platform.Development\Platform 中 Platform.Services.Api.Controllers.ReportingController.PrintProcessInteraction(Int64 id) 的第 16 行。 Services.Api\Controllers\ReportingController.cs:line 217 InnerException: .ModuleLoadException HResult=-2146233088 Message=C++ 模块在尝试初始化默认应用程序域时加载失败。
> 
> ```
>  Source=msshrtmi
>    StackTrace:
>         at <CrtImplementationDetails>.ThrowModuleLoadException(String 
> ```
> 
> errorMessage, Exception innerException) at .LanguageSupport.Initialize(LanguageSupport* ) at .cctor() InnerException: System.Runtime.Serialization.SerializationException HResult=-2146233076 Message=Unable to find assembly 'DotNetOpenAuth.OAuth.Common, Version=4.2.0.0 ，文化=中性，PublicKeyToken=2780ccd10d57b246'。Source=mscorlib StackTrace：服务器堆栈跟踪：在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name) 在 System.Runtime. .Serialization.Formatters.Binary.ObjectMap..ctor(String objectName, String[] memberNames,*System.Runtime.Serialization.Formatters.Binary 处的 BinaryParser.ReadObjectWithMapTyped（BinaryObjectWithMapTyped 记录）。*_BinaryParser.Run() 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage) 在 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(在 System.Runtime.Remoting.Channels.CrossAppDomainSerializer.DeserializeObject(MemoryStream stm) 在 System.Runtime.Remoting.Messaging.SmuggledMethodCallMessage.FixupForNewAppDomain() 的流序列化流，HeaderHandler 处理程序，布尔 fCheck，布尔 isCrossAppDomain，IMethodCallMessage methodCallMessage)。 Remoting.Channels.CrossAppDomainSink.DoDispatch(Byte[] reqStmBuff, SmuggledMethodCallMessage smuggledMcm,SmuggledMethodReturnMessage& smuggledMrm) 在 System.Runtime.Remoting.Channels.CrossAppDomainSink.DoTransitionDispatchCallback(Object[] args) 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 System. Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) at System.AppDomain.get_Id() at .DoCallBackInDefaultDomain(IntPtr function, Void* cookie) at .DefaultDomain.Initialize() at .LanguageSupport.InitializeDefaultAppDomain(LanguageSupport* ) 在 .LanguageSupport._Initialize(LanguageSupport* ) 在 .LanguageSupport。初始化（语言支持*）内部异常：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:46:33.983

Windows Azure 运行时正在使用 DotNetOpenAuth（我不知道为什么……这看起来很奇怪）。为了解决这个问题，我创建了一个启动任务，将 DotNetOpenAuth.OAuth.Common.dll 安装到 GAC 中（[遵循这个解决方案](http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/)）。

```
type .\GACUtils\DotNetOpenAuth.OAuth.Common.dll
type .\GACUtils\gacutil 
.\GACUtils\gacutil /nologo /i .\GACUtils\DotNetOpenAuth.OAuth.Common.dll 

exit /b 0 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T17:23:36.590

确保编译到 x64 或任何 CPU？

# c# - 如何使用名称访问 SqlParameter 数组

> ID：15140722
> 
> 赞同：4
> 
> 时间：2013-02-28T16:32:26.597
> 
> 标签：c#, ado.net

我正在创建`SqlParameter`Array 并将其传递给`StoredProcedure`. 输出值将在 StoredProcedures 中设置。如何通过参数名称访问该值？

```
 SqlParameter[] parameters = { new SqlParameter {ParameterName = "@test", Value = "test", Direction = ParameterDirection.Output }}; 
```

这有效

```
parameters[0].Value 
```

如何使它工作？

```
parameters["@test"].Value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:34:08.983

这只是一个 SqlParameters 数组，因此它将保持有序，因为任何数组都可以工作。您可能可以在这里使用 LINQ（示例很快）

```
parameters.First(parameter => parameter.ParameterName == "@test") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:38:08.430

你可以使用[`Enumerable.First()`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)方法

> 返回序列的第一个元素。

```
SqlParameter[] parameters = { new SqlParameter { ParameterName = "@test", Value = "test", Direction = ParameterDirection.Output } };
Console.WriteLine(parameters.First(parameter => parameter.ParameterName == "@test")); 
```

输出将是；

```
@test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-18T16:25:20.670

你可以试试这个：

```
enum ParamNames { ReportName, Description, MaxReportsAllowed, IncludeSignatures};

SqlParameter[] param = new SqlParameter[32];
param[ReportName] = new SqlParameter("@ReportName", ReportName1.Text);
param[Description] = new SqlParameter("@Description", Description.Text); 
```

# sql - sql - 从列中查找值以从另一列中查找所有其他值

> ID：15140725
> 
> 赞同：2
> 
> 时间：2013-02-28T16:32:31.693
> 
> 标签：sql, if-statement, case

这是一个SQL问题，我会尽力解释。

我有一个如下表

```
id  name    accounts
1   Jim 7001
1   Jim 7002
1   Jim 7003
2   Ryan    7001
3   Todd    7001
3   Todd    7003
2   Ryan    7002
4   Cam 7001
5   Fran    7001
2   Ryan    7003
1   Jim 7004 
```

我首先尝试查找帐户列为“7001”的所有值以找到正确的 ID。之后，我只需要拉出带有这些 ID 的行，这样我就可以看到这些特定 ID 的所有帐户。

我正在使用的示例代码

```
select 
s.id,
s.name,
s.account

from 
students s

where
s.account in ('7001','7002','7003','7004') 
```

* * *

我可以通过 2 个查询来执行此操作，一个以查找具有“7001”帐户值的 id，然后仅针对 id 运行另一个查询，但想知道是否有一种方法可以编写以便一次性计算所有内容。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:34:58.140

```
SELECT  *
FROM    tableName
WHERE   ID IN 
        (
            SELECT ID 
            FROM   tableName
            WHERE  accounts = 7001
        ) 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/ac201/3)

The `JOIN` version (*recommended*)

```
SELECT  a.*
FROM    students a
        INNER JOIN students b
          ON a.ID = b.ID
WHERE   b.accounts = 7001 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/ac201/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:36:41.687

```
select t2.*
from tbl t1, tbl t2
where t1.accounts = '7001'
and t1.id = t2.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:41:29.087

此解决方案已优化：

```
SELECT  a.*
FROM    tableName as a
INNER JOIN tableName as b
    ON a.id = b.id
    AND b.accounts = 7001 
```

# css - 图像有紫色环

> ID：15140726
> 
> 赞同：1
> 
> 时间：2013-02-28T16:32:32.760
> 
> 标签：css, internet-explorer

我的页面上有喜欢使用的图像`<a href=""><img><\a>` ，当它们以 chrome 和 firefox 显示时它们工作正常，但在 IE 上，它们在图像周围有一个紫色环，任何想法为什么会这样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:34:11.827

That's a border, IE puts borders around images in links, use `a img{border:none}` to remove it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:34:16.970

for images `border: 0px;outline: 0px;` bye good luck

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:37:00.353

您需要在 IE 中删除链接的边框。这最好用`a img { border: none}`

# .htaccess - Joomla .htaccess mod_rewrite 到菜单而不是文章

> ID：15140729
> 
> 赞同：0
> 
> 时间：2013-02-28T16:32:41.997
> 
> 标签：.htaccess, mod-rewrite, joomla2.5

我已经有一个功能性的 .htaccess 重写，它重写了一个自定义 URL 并显示了某个菜单的内容。

但它没有显示它有一个菜单项，它显示为一篇文章！

*   如果我导航到[http://www.mysite.com/en/mymenu/thesubmenu](http://www.mysite.com/en/mymenu/thesubmenu)我可以在菜单上下文中看到内容（标题有链接，日期未显示等）

*   如果我尝试访问重写的 URL [http://www.mysite.com/custom](http://www.mysite.com/custom)，它会
    像文章一样显示内容（例如：标题没有链接，显示日期等）。

**我想以内容显示为菜单（如预期）的方式重写它，我该怎么做？**

我想重定向中存在一些冲突，或者菜单在我的自定义 .htaccess 之前被重定向？

我尝试了所有我能想到的组合。

我当前的 .htaccess （相关部分）：

```
Options +FollowSymLinks
Options -Indexes
RewriteEngine On
RewriteRule ^(en/)?(custom)/?$ /index.php?option=com_content&view=article&id=2308&Itemid=545&lang=en [L] 
```

* * *

我试过但没有找到：

（顺便说一句，如果我把[http://www.mysite.com/?option=com_content&Itemid=545](http://www.mysite.com/?option=com_content&Itemid=545)放在浏览器地址栏中，它会按预期显示菜单）

```
RewriteRule ^(en/)?(custom)/?$ /en/?option=com_content&Itemid=545 [L]

RewriteRule ^(en/)?(custom)/?$ /?option=com_content&Itemid=545 [L]

RewriteRule ^(en/)?(custom)/?$ ?option=com_content&Itemid=545 [L]

RewriteRule ^(en/)?(custom)/?$ /en/index.php?option=com_content&Itemid=545 [L]

RewriteRule ^(en/)?(custom)/?$ /index.php?option=com_content&Itemid=545 [L]

RewriteRule ^(en/)?(custom)/?$ index.php?option=com_content&Itemid=545 [L]

RewriteRule ^(en/)?(custom)/?$ /en/mymenu/thesubmenu [L]

RewriteRule ^(en/)?(custom)/?$ /mymenu/thesubmenu [L]

RewriteRule ^(en/)?(custom)/?$ mymenu/thesubmenu [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:53:57.327

这最终成为 Joomla 所做的 SEO 重定向中的冲突。

解决方案是使用通过插件完成的内部重写（我自定义），这样重写将在正确的上下文中显示正确的内容（在这种特殊情况下作为菜单项）。

正如我所看到的，由于冲突，这是唯一的解决方案，最终不/必须不通过 .htaccess 完成。

# jquery - 将 URL 字符串解析为 JSON 会不断重新调整空白对象

> ID：15140731
> 
> 赞同：0
> 
> 时间：2013-02-28T16:32:44.133
> 
> 标签：jquery, json

我无法弄清楚为什么这段代码不起作用：

```
$(document).ready(function() { 

    $(".alertDeleteButton").click(function(e) {

        var str = $(this).attr("href");
        alert(str);

        var obj = str.split("&").reduce(function(prev, curr, i, arr) {
            var p = curr.split("=");
            prev[decodeURIComponent(p[0])] = decodeURIComponent(p[1]);
            return prev;
        }, {});

        alert(obj);

        e.preventDefault(); 
    });

}); 
```

[jsFiddle](http://jsfiddle.net/madcaesar/b2XpN/)

我要做的就是在用户按下时在链接中使用字符串并创建一个 json 对象。

{“userdeleteid”：“55”，“dayid”：“55”}。ETC...

我搜索并发现了大约 3 种不同的方法，它们都给了我 [object Object] 结果。

[我想实现 this](https://stackoverflow.com/a/2880929/1245564)，但它似乎只查看浏览器中的 URL，我希望它通过 (this).attr("href"); 查看链接的值；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:38:31.057

您应该使用 JSON.stringify()，如下所示：

```
alert(JSON.stringify(obj)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:49:53.700

您可以使用现代浏览器 API 中提供的**JSON.stringify**如果您正在处理旧浏览器，请参阅 JSON 2（第三方支持库）。

![在此处输入图像描述](../Images/bed8cf9ed363adc0a1045b5052b351e8.png)

# mysql - Mysql 数据库连接详细信息永远不会在包含的文件中起作用

> ID：15140736
> 
> 赞同：0
> 
> 时间：2013-02-28T16:32:59.063
> 
> 标签：mysql, connection-string

每当我使用单独的文件来存储数据库连接详细信息时：

```
<?
$username = "xxx";
$password = "xxx";
$database = "xxx";
?> 
```

要在我的连接字符串中使用，我永远无法让它工作。我必须将详细信息嵌入连接字符串本身。

```
// Opens a connection to a mySQL server
$connection=mysql_connect ('xxx', 'xxx', 'xxx');
if (!$connection) {
die("Not connected : " . mysql_error());
}

// Set the active mySQL database
$db_selected = mysql_select_db('xxx', $connection);
if (!$db_selected) {
die ("Can\'t use db : " . mysql_error());
} 
```

谁能告诉我为什么我必须这样做？我真的很想将我的详细信息保存在一个单独的文件中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:36:27.847

```
include_once('path_to_the_file/db_details.php') 
```

您必须包含该文件。

此外，请不要使用 MySQL，而是使用 MySQLi 或 PDO。MySQL 已弃用，不再维护。

# twitter-bootstrap - 引导按钮切换 - 表单值？

> ID：15140738
> 
> 赞同：0
> 
> 时间：2013-02-28T16:33:04.843
> 
> 标签：twitter-bootstrap

似乎有很多关于这个的问题，但没有一个给出明确的*简单*答案。

我的理解是 Twitter Bootstrap Button Toogle 旨在以与复选框相同的方式“操作”。在此基础上，我的假设是应该可以以同样的方式使用它。但是，我找不到在表单中传递这些“复选框”值的方法。无论按钮是打开还是关闭，“转储”表单在发布时都不会显示字段名称或值。

我已经看到提示我应该查看 jQuery 来找到这些值，但是我还没有找到一个简单的例子来关注这个问题（而且我的 JS 知识仍然有些有限！）。但是，我正在使用 AjaxForm 来处理表单，这可能会有所帮助。

下面是我现有的代码（为清楚起见，删除了其他简单的表单元素）...

```
<script type="text/javascript"> 
$(document).ready(function() {
$('#addshare').ajaxForm(
{ 
target: '#shares', 
beforeSubmit:  showRequest,
success: function() { 
$('#shares').fadeIn('slow'); 
} 
});
function showRequest() { 
$('#shares').html('<p class="alert alert-success">Processing...</p>'); 
} 
});
</script>

<form id="addshare" method="post" action="/a/share/">
 <div class="control-group" id="sharewithgroup"> 
  <div class="btn-group" data-toggle="buttons-checkbox" data-toggle-name="sharewith">
   <button class="btn" id="share1" name="share1" value="1" type="button">Share 1</button>
   <button class="btn" id="share1" name="share2" value="2" type="button">Share 2</button>
  </div>
 </div>
</form> 
```

# javascript - JSHint '+' 错误前的坏换行说明

> ID：15140740
> 
> 赞同：129
> 
> 时间：2013-02-28T16:33:12.760
> 
> 标签：javascript, jshint

有人可以向我解释为什么 JSHint 抱怨以下内容，

```
window.location.href = String1
    + '#'
    + Sting2
    + '='
    + String3; 
```

有了错误，`Bad line breaking before '+' error`

我了解可以使用选项配置此错误，该`laxbreak` [选项](http://www.jshint.com/docs/)描述为

> 此选项会抑制大多数关于代码中可能不安全的换行符的警告。它不会抑制有关逗号优先编码样式的警告。要抑制那些你必须使用 laxcomma （见下文）。

这个解释非常简洁，**我很好奇为什么以这种方式断线首先被认为是不好的或松懈的。**

请记住，我并不是想在这里发动一场圣战，我只是在寻找一个客观的答案，说明为什么 JSHint 人认为这很糟糕，是否只是他们注入到他们的 linter 中的一种风格偏好（我认为 JSLint 是自以为是的 linter），或者如果以这种方式换行时某些解释器可能会出错。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-02-28T16:53:23.523

它是一种风格指南，可避免*可能*对[自动分号插入](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion)假设产生影响的语句。

这个想法是，您可以在一行的末尾清楚地表明表达式是在那里结束还是可以在下一行继续。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-18T16:43:16.993

如果您在换行符之前使用 + 而不是在新行中使用，Jshint 不会将此标记为错误的换行符。像这样：

```
window.location.href = String1 +
'#' +
Sting2 +
'=' +
String3; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-06T15:49:37.263

**不是对这个问题的直接回答，但对于希望保留规则但修复警告的谷歌搜索（就像我一样）遇到这个问题的人来说，以下内容可能有用......**

使用 Notepad++（例如使用 JSLint 插件）时，可以使用以下搜索和替换来修复：

*   找什么：**`(\r\n|\n|\r)( *)\+`**
*   替换为：（***包括第一个和最后一个空格）*****` +$1$2 `**
**   搜索方式：**正则表达式***

 *（仅在 Windows 上测试，但正则表达式也应该适用于 Unix 或 Mac OS 行尾。）

`||`要为, `&&`, `==`,或代替做类似的事情`!=`，请使用：`<=``>=``+`

*   找什么：**`(\r\n|\n|\r)( *)(\|\||&&|==|!=|<=|>=)`**
*   替换为：（***包括第一个和最后一个空格）*****` $3$1 $2 `***

# doxygen - doxygen 非图形调用和调用者树可能吗？

> ID：15140743
> 
> 赞同：0
> 
> 时间：2013-02-28T16:33:21.203
> 
> 标签：doxygen

我知道 CALL_GRAPH 和 CALLER_GRAPH doxygen[配置选项](http://www.doxygen.nl/manual/diagrams.html)，它们分别生成调用图和调用者图。

我想要一个相同信息的非图形表示，但不知道如何。我过去曾使用过此功能，因此它一定在某个时候存在，并且可能仍然存在。

如何获得非图形调用和调用者树？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:39:29.697

配置选项是：[REFERENCES_RELATION](http://www.doxygen.nl/manual/config.html#cfg_references_relation)和[REFERENCED_BY_RELATION](http://www.doxygen.nl/manual/config.html#cfg_referenced_by_relation)。现在我知道了。

# onedrive - 如何重定向到文件选择器

> ID：15140745
> 
> 赞同：3
> 
> 时间：2013-02-28T16:33:24.040
> 
> 标签：onedrive

我是skydrive的大一新生。然后我想在 html 中使用文件选择器，并从 Interactive Live SDK 复制演示代码。但是运行结果，打开的窗口不是直接到文件选择器页面，而是直接到我的设置redirect_uri页面。那么我的演示页面有什么问题？谢谢

```
<script src="http://js.live.net/v5.0/wl.js" type="text/javascript"></script>

<script type="text/JavaScript">
<!--

   /////////////////////////////
    WL.init({ client_id: '$my appID', redirect_uri: 'http://www.learnyouwant.com' });

    WL.ui({
        name: "skydrivepicker",
        element: "downloadFile_div",
        mode: "open",
        select: "multi",
        onselected: onDownloadFileCompleted,
        onerror: onDownloadFileError
    });

    WL.login({ "scope": "wl.skydrive wl.signin" }).then(
        function(response) {
            openFromSkyDrive();
        },
        function(response) {
            log("Failed to authenticate.");
        }
    );

    function openFromSkyDrive() {
        WL.fileDialog({
            mode: 'open',
            select: 'single'
        }).then(
            function(response) {
                log("The following file is being downloaded:");
                log("");

                var files = response.data.files;
                for (var i = 0; i < files.length; i++) {
                    var file = files[i];
                    log(file.name);
                    WL.download({ "path": file.id + "/content" });
                }
            },
            function(errorResponse) {
                log("WL.fileDialog errorResponse = " + JSON.stringify(errorResponse));
            }
        );
    }

    function log(message) {
        var child = document.createTextNode(message);
        var parent = document.getElementById('JsOutputDiv') || document.body;
        parent.appendChild(child);
        parent.appendChild(document.createElement("br"));
    }

    function onDownloadFileCompleted(response) {
        var msg = "";
        // For each folder selected...
        if (response.data.folders.length > 0) {
            for (folder = 0; folder < response.data.folders.length; folder++) {
                // Use folder IDs to iterate through child folders and files as needed.
                msg += "\n" + response.data.folders[folder].id;
            }
        }
        // For each file selected...
        if (response.data.files.length > 0) {
            for (file = 0; file < response.data.files.length; file++) {
                // Use file IDs to iterate through files as needed.
                msg += "\n" + response.data.files[file].id;
            }
        }
        log(msg);
    };

    function onDownloadFileError(responseFailed) {
        log(responseFailed.error.message);
    }

//-->
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:07:31.607

我找到了原因。redirect_uri 必须与填写应用注册相同。

# scons - scons build both static and shared library

> ID：15140746
> 
> 赞同：5
> 
> 时间：2013-02-28T16:33:26.903
> 
> 标签：scons

I am trying to build both a static and a shared library using the same sources with SCons.

Everything works fine if I just build one or the other, but as soon as I try to build both, only the static library is built.

My SConscript looks like:

```
cppflags = SP3_env['CPPFLAGS']
cppflags += ' -fPIC '
SP3_env['CPPFLAGS'] = cppflags

soLibFile = SP3_env.SharedLibrary(
   target = "sp3",
   source = sources)
installedSoFile = SP3_env.Install(SP3_env['SP3_lib_dir'], soLibFile)

libFile = SP3_env.Library(
    target = "sp3",
    source = sources)
installedLibFile = SP3_env.Install(SP3_env['SP3_lib_dir'], libFile) 
```

I also tried SharedObject(sources) before the SharedLibrary (passing in the return from SharedObject, rather than sources), but it is no different. Same if I build the .a before the .so.

How do I work around this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T11:21:58.153

当安装目录**不在**当前目录中或之下时，SCons 的行为与预期不同，如[SCons 安装方法文档中所述：](http://www.scons.org/doc/production/HTML/scons-user/c2938.html)

> 但是请注意，安装文件仍被视为一种文件“构建”。当您记住 SCons 的默认行为是在当前目录中或当前目录下构建文件时，这一点很重要。如果如上例所示，您将文件安装在顶级 SConstruct 文件的目录树之外的目录中，则必须指定该目录（或更高的目录，例如 /）才能在其中安装任何内容：

也就是说，您必须以安装目录为目标（`SP3_env['SP3_lib_dir']`在您的情况下）调用 SCons 才能执行安装。为了简化这一点，`env.Alias()`像我下面那样使用。

当您调用 SCons 时，您至少应该看到静态库和共享库都构建在本地项目目录中。但是，我想 SCons 不会安装它们。这是我在 Ubuntu 上制作的一个示例：

```
env = Environment()

sourceFiles = 'ExampleClass.cc'

sharedLib = env.SharedLibrary(target='example', source=sourceFiles)
staticLib = env.StaticLibrary(target='example', source=sourceFiles)

# Notice that installDir is outside of the local project dir
installDir = '/home/notroot/projects/sandbox'

sharedInstall = env.Install(installDir, sharedLib)
staticInstall = env.Install(installDir, staticLib)

env.Alias('install', installDir) 
```

如果我执行没有目标的 scons，我会得到以下信息：

```
# scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o ExampleClass.o -c ExampleClass.cc
g++ -o ExampleClass.os -c -fPIC ExampleClass.cc
ar rc libexample.a ExampleClass.o
ranlib libexample.a
g++ -o libexample.so -shared ExampleClass.os
scons: done building targets. 
```

然后我可以安装，使用安装目标执行scons，如下：

```
# scons install
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
Install file: "libexample.a" as "/home/notroot/projects/sandbox/libexample.a"
Install file: "libexample.so" as "/home/notroot/projects/sandbox/libexample.so"
scons: done building targets. 
```

或者，您可以使用一个命令完成所有操作，首先清理所有内容

```
# scons -c install 
```

然后，只需一个命令即可完成所有操作：

```
# scons install
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o ExampleClass.o -c ExampleClass.cc
g++ -o ExampleClass.os -c -fPIC ExampleClass.cc
ar rc libexample.a ExampleClass.o
ranlib libexample.a
g++ -o libexample.so -shared ExampleClass.os
Install file: "libexample.a" as "/home/notroot/projects/sandbox/libexample.a"
Install file: "libexample.so" as "/home/notroot/projects/sandbox/libexample.so"
scons: done building targets. 
```

# c# - getting data from combobox to a data grid view c#

> ID：15140752
> 
> 赞同：1
> 
> 时间：2013-02-28T16:33:32.343
> 
> 标签：c#

I am using windows forms application. I have two combo boxes , comboA and comboB.I have a datagrid view with two columns. Now I have to populate the datagrid view, with selected item from comboA into first column of datagridview and selected item of comboB into the second column. Please suggest me

To be clear, When I select an item from comboA, it should be displayed in first column of datagridview. And similary when i select an item from comboB , it should be displayed in the second column of the datagridview.

# cakephp - Themes for CakePHP

> ID：15140757
> 
> 赞同：2
> 
> 时间：2013-02-28T16:33:50.830
> 
> 标签：cakephp

Is anyone aware of any themes in CakePHP. I tried the CakeStrap theme and would like to look into alteratives if any, before settling on one.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:05:43.533

CakePHP 只是一个创建 HTML 网站的框架。因此，您可以使用您喜欢的任何在线资源中的任何主题。我讨厌说“google it”，但是 - 在这种情况下，这就是你需要做的所有事情。

它就像任何其他网站一样只是 HTML 和 CSS，所以 - 找到你喜欢的主题，然后使用它。

# batch-file - batch script to compress files that are older than 7 days

> ID：15140758
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:33:59.560
> 
> 标签：batch-file, zip

How can I change this script so that will only compresses the files that are older than 7 days?

```
FOR %%A IN (D:\Agentrics\integration\incoming\Mansoor\backup\*.txt*, D:\Agentrics\integration\incoming\Mansoor\backup\*.cpi*) DO "C:\Program Files\WinRAR\WinRAR.exe" a -r D:\Agentrics\integration\incoming\Mansoor\backup\"%%~nA.zip" "%%A"

FOR %%A IN (D:\Agentrics\integration\incoming\Mansoor\backup\*.TXT,D:\Agentrics\integration\incoming\Mansoor\backup\*.cpi) DO DEL "D:\Agentrics\integration\incoming\Mansoor\backup\.cpi*" "%%A" 
```

Regards, Jason

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:28:43.013

只需使用`WinRAR`'s`-to`开关，它指示归档程序仅处理早于指定时间段的文件。句点应该是由数值和单位组成的字符串：

```
*NNN***d***NNN***h***NNN***m***NNN***s** 
```

其中*`NNN`*'s 是数值，**`d`**(days), **`h`**(hours), **`m`**(minutes), **`s`**(seconds) 是有效的单位指示符。

您不必指定所有单位。例如，在您的情况下，期间将是`7d`：

```
FOR %%A IN (
  D:\Agentrics\integration\incoming\Mansoor\backup\*.txt*
  D:\Agentrics\integration\incoming\Mansoor\backup\*.cpi*
) DO (
  "C:\Program Files\WinRAR\WinRAR.exe" a -r **-to7d** D:\Agentrics\integration\incoming\Mansoor\backup\"%%~nA.zip" "%%A"
) 
```

如果没有文件与指定的时间段匹配，则不会创建/更新存档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:06:05.017

Robocopy 能够根据年龄复制文件。我会使用 robocopy 将文件移动到一个临时目录，然后压缩该目录的内容。

例如（未经测试）：

```
SET SourceDir=C:\Agentrics\integration\incoming\Mansoor\backup
SET TmpDir=C:\Agentrics\integration\incoming\Mansoor\backup\tmpbackup

ROBOCOPY "%SourceDir%" "%TmpDir%" *.txt *.cpi /MOV /MINAGE:7 
FOR %%A IN (%TmpDir%\*.*) DO "C:\Program Files\WinRAR\WinRAR.exe" a "%SourceDir%\%%~nA.zip" "%%A" 
RMDIR /S /Q "%TmpDir%" 
```

# ruby-on-rails-3 - ActiveRecord giving wrong results in Rake task

> ID：15140760
> 
> 赞同：0
> 
> 时间：2013-02-28T16:34:03.070
> 
> 标签：ruby-on-rails-3, postgresql, activerecord, rake

I have created my first Rails Rake task which imports some data. It uses the URL to identify if the page needs to be updated or inserted. I am however having som really weird issue with some records being inserted multiple times instead, instead of just being updated.

My query looks like this:

```
existingCompany = Company.find_by_external_link(company.external_link) 
```

I then look at

> existingCompany.nil?

to see if the record needs to be created or updated. Some of the companies are not found by active record even though the external link exists. I have tried to print out the url and then look in the database (I use PostgreSQL) and it finds it correctly. The even weirder thing is that it doesn't happen to all records, only a few of them.

Anyone got an idea what might make ActiveRecord believe that a record doesn't exist?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:44:02.927

您没有提供很多信息，但可以尝试一些事情：

1.  company.external_link 是如何设置的？无论是在调试器中还是在简单的 puts 中，都可以告诉您这是否是您的想法。例如“ [http://www.ups.com/”！=“https://www.ups.com/”！=“http://www.ups.com](http://www.ups.com/) ” [_](https://www.ups.com/) [_](http://www.ups.com) _
2.  您可能需要在 company.external_link (.downcase, .strip) 中保持大小写一致或删除空格

要记住的另一件事是 ActiveRecord 创建了一个方法 Company.find_or_create_by_external_link 将在一个步骤中执行此操作

# c# - IQueryable .Include(string path) not modifying query to include joins

> ID：15140762
> 
> 赞同：1
> 
> 时间：2013-02-28T16:34:09.890
> 
> 标签：c#, entity-framework, automapper

Using Entity Framework 5, I have a generic method that retrieves entities from my context with optional parameters to filter, include related entities, and set the order of results. When I pass the method a set of include properties, however, it never modifies the query with joins to include the related entities. Any ideas why my query isn't updating?

Method:

```
public virtual IQueryable<TEntity> Get(
    Expression<Func<TEntity, bool>> filter = null,
    string includeProperties = "",
    Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null)
{        
    IQueryable<TEntity> query = dbSet.AsExpandable();

    if (filter != null)
    {
        query = query.Where(filter);
    }

    foreach (var includeProperty in includeProperties.Split
        (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
    {
        query = query.Include(includeProperty);
    }

    if (orderBy != null)
    {
        return orderBy(query);
    }
    else
    {
        return query;
    }
} 
```

Query before `foreach (var includeProperty...` that remains unchanged afterwards

```
{SELECT 
[Extent1].[Pid] AS [Pid],     
[Extent1].[Created] AS [Created], 
[Extent1].[Creator] AS [Creator]
FROM [Administrator] AS [Extent1]} 
```

**EDIT...More Info**

Originally I was using the following method call: `AdministratorDTO admin = unitOfWork.AdministratorComponent.GetByID(userPid);` on the following POCO class:

```
public virtual TEntity GetByID(object id)
{
    return dbSet.Find(id);
}

public class Administrator : IPrincipal
{
    [Key]
    [Required]
    [StringLength(1024)]
    [Display(Name = "PID")]
    public string Pid { get; set; }

    public DateTime Created { get; set; }

    public string Creator { get; set; }

    ...

    public ICollection<Role> Roles { get; set; }

    public ICollection<Area> Areas { get; set; }

    ...
} 
```

And using AutoMapper to map to a DTO with the following configuration:

```
public class AdministratorDTO
{
    [Key]
    [Required]
    [StringLength(1024)]
    [Display(Name = "PID")]
    public string Pid { get; set; }

    ...

    public string[] Roles { get; set; }

    public string[] Areas { get; set; }
}

public class WebApiApplication : System.Web.HttpApplication
{
...
AutoMapperConfiguration.Configure();
}

public static class AutoMapperConfiguration
{
    public static void Configure()
    {
        ConfigureAdministratorMapping();
        ...
    }

    private static void ConfigureAdministratorMapping()
    {
        Mapper.CreateMap<Administrator, AdministratorDTO>()
            .ForMember(dest => dest.Roles, 
                opt => opt.MapFrom(src => src.Roles == null ? 
                    null : src.Roles.Select(r => r.Name).ToArray())) 
            .ForMember(dest => dest.Areas, 
                opt => opt.MapFrom(src => src.Areas == null ?
                    null : src.Areas.Select(a => a.Id).ToArray()));

        ...
    }
}

public class BusinessComponent<TEntity, TDto> 
    : IBusinessComponent<TEntity, TDto>
        where TEntity : class
        where TDto : class
{
    ...
    protected TDto Flatten(TEntity entity)
    {
        return Mapper.Map<TEntity, TDto>(entity);
    }
} 
```

My understanding was that if I didn't mark the `Administrator`'s navigation properties (Areas and Roles) as `virtual` they would be eagerly loaded, but I kept getting an empty string[] in my DTO.

I looked at the TEntity parameter going into my `Flatten` method and Areas/Roles were `null` *before* I called `Map`, so I don't think it was something to do with AutoMapper.

Next I tried using the following method call:

```
AdministratorDTO admin = unitOfWork.AdministratorComponent
    .Get(filter: a => a.Pid == "csherman", includeProperties: "Roles, Areas")
    .SingleOrDefault(); 
```

Finally, just in case the `Include` was being ignored because the navigation properties were not `virtual`, I added the `virtual` keyword to both `Areas` and `Roles` on my `Administrator` class. When I did this, both the `GetByID` and the `Get(filter: ..., includeProperties: ...)` methods worked, thereby including the Areas/Roles in my TEntity `Flatten` parameter and populating the string arrays in my DTO.

Problem solved I suppose, but...

Question is, especially for the `GetById` method, why did it work with the `virtual` keyword but *not* without?

If EF actually factors in the projection from the time of the original method call, why would these entities be included?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:53:27.597

如果您在包含后进行任何类型的投影，则包含不起作用。

[这是一篇](http://blogs.msdn.com/b/alexj/archive/2009/06/02/tip-22-how-to-make-include-really-include.aspx)处理此问题以及如何解决此问题的帖子。

这[是](https://stackoverflow.com/questions/2924386/if-i-select-from-an-iqueryable-then-the-include-is-lost)一个处理它的 SO question。

编辑：作为对您的编辑的回应，我试着环顾四周，看看是否能找到一个原因，为什么`virtual`关键字会让您`Include`工作但没有它就无法工作。我找不到任何可以直接回答这个问题的东西。

不过，这就是我认为正在发生的事情：`virtual`导航属性上的关键字告诉实体框架该属性应该使用延迟加载。如果有时您想急切地加载它们，那么您将使用`Include`. 我认为这`Include`就是构建的目的。我认为它试图专门寻找`virtual`具有该名称的属性，当它找不到它时，它会优雅地死去，无一例外。如果您不标记它，因为`virtual`我认为它的实现`Include`完全错过了它。我的猜测基于这样一个事实，即我所看到的所有文章都没有在`Include`延迟加载的上下文之外提到它——这意味着使用`virtual`关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T13:20:34.303

有一个严重的问题`IQueryable.Include`：底层对象必须是`ObjectQuery`or类型`DbQuery`，否则这个方法不起作用！

> `Include`是泄漏的抽象，它仅适用于实体框架。EF 4.1 已经包含`Include`了泛型`IQueryable`，但它在内部仅将传递的泛型转换`IQueryable`为泛型`ObjectQuery`或`DbQuery`并调用它们的`Include`.

[https://stackoverflow.com/a/6791874/2444725](https://stackoverflow.com/a/6791874/2444725)

> 但是，当我向该方法传递一组包含属性时，它永远不会使用连接修改查询以包含相关实体。任何想法为什么我的查询没有更新？

您似乎正在使用 LinqKit：

```
IQueryable<TEntity> query = dbSet.AsExpandable(); 
```

扩展方法`AsExpandable`获取`IQueryable`参数并返回一个新类型的对象`ExpandableQuery`，用于装饰原始对象`ObjectQuery`或`DbQuery`对象。扩展方法`IQueryable.Include`，应用于`ExpandableQuery`，无法进行转换，默默跳过。

> 为什么它与 virtual 关键字一起工作，但不是没有？

虚方法与包含无关。相反，它会打开延迟加载。这意味着导航属性不会在第一次请求时加载，而是在实际使用这些属性时在单独的请求中加载。

# python - position += heading*distance_moved TypeError: can only concatenate tuple (not "Vector") to tuple

> ID：15140766
> 
> 赞同：3
> 
> 时间：2013-02-28T16:34:12.150
> 
> 标签：python, indexing, pygame

*although all parts of that operation are tuples python seems to think that in this instance one of them is not. This is my first time trying to make a vector class in python. my intentions are to move my simple mouse image to where i click on the screen by adding increments to it of a speed * vector to its position until it reaches the target distance*

import math

class Vector(object):

```
#defaults are set at 0.0 for x and y
def __init__(self, x=0.0, y=0.0):
    self.x = x
    self.y = y

#allows us to return a string for print
def __str__(self):
    return "(%s, %s)"%(self.x, self.y)

# from_points generates a vector between 2 pairs of (x,y) coordinates
@classmethod
def from_points(cls, P1, P2):
    return cls(P2[0] - P1[0], P2[1] - P1[1])

#calculate magnitude(distance of the line from points a to points b
def get_magnitude(self):
    return math.sqrt(self.x**2+self.y**2)

#normalizes the vector (divides it by a magnitude and finds the direction)
def normalize(self):
    magnitude = self.get_magnitude()
    self.x/= magnitude
    self.y/= magnitude

#adds two vectors and returns the results(a new line from start of line ab to end of line bc)
def __add__(self, rhs):
    return Vector(self.x +rhs.x, self.y+rhs.y)

#subtracts two vectors
def __sub__(self, rhs):
    return Vector(self.x - rhs.x, self.y-rhs.y)

#negates or returns a vector back in the opposite direction
def __neg__(self):
    return Vector(-self.x, -self.y)

#multiply the vector (scales its size) multiplying by negative reverses the direction
def __mul__(self, scalar):
    return Vector(self.x*scalar, self.y*scalar)

#divides the vector (scales its size down)
def __div__(self, scalar):
    return Vector(self.x/scalar, self.y/scalar)

def points(self):
    return (self.x, self.y) 
```

#The simple mouse move game by Ramon Cabral

```
#imports
import pygame, sys, Vector
from pygame.locals import *
from Vector import *

#game init
pygame.init()

#screen
screen = pygame.display.set_mode((800,600),0,32)

#images
mouse_file = 'mouse.png'
MOUSE = pygame.image.load(mouse_file).convert_alpha()

#variables
bgcolor = (255,255,255)
position = (100.0, 100.0)
heading = Vector(0, 0)

#clock and speed
clock = pygame.time.Clock()
speed = 250.0

#main game function
while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()

        if event.type == MOUSEBUTTONDOWN:
            destination = pygame.mouse.get_pos()
            heading = Vector.from_points(position, destination)
            heading.normalize()

    screen.fill(bgcolor)
    screen.blit(MOUSE, position)

    time_passed = clock.tick(30.)
    time_passed_seconds = time_passed/1000.0

    distance_moved = time_passed_seconds*speed
    position += heading*distance_moved
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:43:37.617

当它需要一个数字元组时，看起来你正在传递`Vector.from_points`一个 Vector 对象。你有没有尝试过这样的事情？

```
position_points = (position.x, position.y)
heading = Vector.from_points(position_points, destination) 
```

我不建议进行`Vector`支持索引。这通常是为类似列表的对象保留的。目前还不清楚什么`Vector()[0]`和`Vector()[1]`应该是什么。`Vector().x`对我来说`Vector().y`更清楚。

如果您发现您经常（阅读：“不止一次”）需要将向量视为点的元组，您可以创建一个实例方法来执行此操作：

```
class Vector(object):
    # ...
    def points(self):
        return (self.x, self.y)
    # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:40:31.173

您必须定义[**getitem**](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)和[**setitem**](http://docs.python.org/2/reference/datamodel.html#object.__setitem__)方法以支持 Vector 类中的索引。

# ruby-on-rails-3 - Cannot get wkhtmltopdf to work in rails

> ID：15140777
> 
> 赞同：0
> 
> 时间：2013-02-28T16:35:02.150
> 
> 标签：ruby-on-rails-3, wkhtmltopdf, wicked-pdf

I am trying to use wicked_pdf in my rails 3 application. I have followed all the tutorials and I am getting this error:

```
Failed to execute:
"/usr/local/bin/wkhtmltopdf" -q        "file:////var/folders/_b/50kywsc97r95gvr9gy9nr6700000gn/T/wicked_pdf20130228-874-a51lgi.html" "/var/folders/_b/50kywsc97r95gvr9gy9nr6700000gn/T/wicked_pdf_generated_file20130228-874-1ihqg74.pdf" 
```

I know that wkhtmltopdf exists in the right place because when I type which wkhtmltopdf I am shown the path above. I also get told it's there when I try to brew install again. Furthermore when I type wkhtmltopdf google.com google.pdf it runs fine.

My controller looks like this:

```
def show #shows some material
@material = Material.find(params[:id])
  respond_to do |format|
    format.html
    format.pdf do
      render :pdf => '#{@material.id}',
             :wkhtmltopdf => '/usr/local/bin/wkhtmltopdf'
    end
  end 
```

end

Any suggestions? Does this seem like a wkhtmltopdf issue or a wicked_pdf issue? I have bundle installed everything and bundle updated everything. I have added the wkhtmltopdf-binary gem (which shouldn't be necessary). It doesn't work on heroku either.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:20:59.820

听起来那里可能有一些 wkhtmltopdf 图像。如果 rails 正在尝试使用 /usr/local/bin/wkhtmltopdf，请尝试从终端执行命令 /usr/local/bin/wkhtmltopdf 并查看运行该命令是否有任何问题。如果您有几个来自不同 gem 安装的副本，那么在您的搜索路径中首先运行的那个可能不是 rails 正在尝试的那个。

希望能帮助到你

鲍勃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T17:20:39.020

首先验证二进制文件的位置

1.  打开终端提示符并输入

    `$ which wkhtmltopdf`

我机器的回报是

`/usr/local/bin/wkhtmltopdf`

1.  验证二进制文件是否运行良好

    `wkhtmltopdf google.com google`它必须使用谷歌网页生成pdf

2.  在初始化程序中创建一个类

[看我的要点](https://gist.github.com/rderoldan1/5577714)

就这样

# php - 如何索引缓存的动态 php 页面以及如何仅保留最新页面

> ID：15140780
> 
> 赞同：0
> 
> 时间：2013-02-28T16:35:07.800
> 
> 标签：php, caching

我们有一个在线 php 搜索实用程序，我们希望通过缓存结果页面来提高性能，这样我们就可以在用户在第一个搜索之后执行相同的搜索时显示它们，而不是从数据库中检索相同的数据。

我做了同样的阅读，我理解检查静态缓存页面是否存在于 php 脚本的开头以及是否在底部创建它的简单想法。

# 我的问题

1）如果我们有很多（数千个），搜索缓存的静态页面的最佳方法是什么？

2) 什么是仅保留过去 24 小时内的静态页面并删除旧的不相关页面的最佳方法。

希望您能分享相关经验或有趣的想法，帮助我们为我们的网站创建一个好的缓存系统。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:37:23.197

1.  使用基于输入的哈希（如 md5）：查询、页面、过滤器设置等。

2.  保留缓存的到期日期。

* * *

如果您有复杂的输入，请说：

```
$input = array(
    "query" => "foo",
    "filter" => array(
        "category" => "movies"
    ),
    "page" => 1
); 
```

您可以通过以下方式轻松地将其减少为哈希`md5(serialize($input));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:39:27.063

有两种可能的选择，具体取决于您的硬件最适合什么：

*   静态缓存：每次搜索时，创建一个静态 html 页面（其中没有 php）并将其保存在磁盘上。创建一个apache可以理解的物理路径，这样当html不存在时，调用一个php文件，当存在时，调用静态文件。那就是使用`mod_rewrite`. 使用 cron 作业在文件创建时清除旧页面。
*   使用数据库：创建一个表，该表具有一个键列，即搜索字符串、创建时间戳和一个结果页面，即完整呈现的输出。

在这两种情况下，如果缓存存在，请使用它。使用 cron 进程删除过时的缓存条目。

# mysql - Django 1.4.5 - 无法为 WorldBorder 模型安装索引

> ID：15140785
> 
> 赞同：0
> 
> 时间：2013-02-28T16:35:30.103
> 
> 标签：mysql, django, geospatial

由于我升级到 Django 1.4.5 并删除并重新创建了一个`MySQL 5.5.8`数据库，因此我收到此错误消息`./manage syncdb`

```
Superuser created successfully.
Installing custom SQL ...
Installing indexes ...
Failed to install index for my_app.WorldBorder model: 
   (1464, "The used table type doesn't support SPATIAL indexes") 
```

设置：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',    
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.gis', <---- here
    'pipeline',
    'widget_tweaks',
    'my_app',  
    'south',  
    'modeltranslation',
    'djcelery',
) 
```

但是我已经下载并编译了 Geos 并且到目前为止它一直有效：

```
wget http://download.osgeo.org/geos/geos-3.3.0.tar.bz2
tar xjf geos-3.3.0.tar.bz2
auto-apt run ./configure
make -j4
sudo checkinstall
sudo ldconfig 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T23:54:44.907

如果数据库类型不是 myisam，则创建空间索引会返回错误：

ERROR 1464 (HY000): 使用的表类型不支持空间索引

您可以将数据库类型更改为 myisam，此示例将通过执行以下操作来工作：

```
alter table geom engine=myisam; 
```

作为参考，请查看此处的文档[http://dev.mysql.com/doc/refman//5.5/en/creating-spatial-indexes.html](http://dev.mysql.com/doc/refman//5.5/en/creating-spatial-indexes.html)

# excel - 将选择设置为范围

> ID：15140786
> 
> 赞同：2
> 
> 时间：2013-02-28T16:35:52.943
> 
> 标签：excel, vba

有人可以提示我在这里可能做错了什么吗？现在我正在有效地尝试执行 Ctrl-A 命令来对 vba 中的数据块进行全选。然后我希望将该选择保存为一个范围，以便我以后可以使用它。

```
Dim rngAdData As Range
.....
Range("A1").Select
Range(Selection, Selection.End(xlToRight)).Select
Range(Selection, Selection.End(xlDown)).Select

Set rngAdData = Selection
Range(rngAdData).AdvancedFilter Action:=xlFilterInPla....  //<---- 
```

最后一行给了我一个`run-time error '1004': Method 'Range' of object 'Global' failed`

当我按照以下方式进行操作时，它可以工作

```
Range("A1").Select
Range(Selection, Selection.End(xlToRight)).Select
Range(Selection, Selection.End(xlDown)).AdvancedFilter Action:=xlFilterInPla.... 
```

但是这样做很麻烦，因为我需要在这里再次使用该范围

```
With ActiveWorkbook.Worksheets("....").Sort
    .SetRange Range(Selection) //<--- 
```

指向的行给了我同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:47:16.100

`Range(rngAdData)`正在将范围提供给范围。只需使用`rngAdData.AdvancedFilter`

你的第二个问题也是同样的想法。请改用此语法。

```
With ActiveWorkbook.Worksheets("....").Sort
    .SetRange Selection 
```

话虽如此，您应该使用其他方法来获得所需范围，而不是使用`Select`or`Selection`语句。像这样的东西应该会更好

```
Dim rngAdData As Range
Dim sht As Worksheet, bottomMostRow As Long, rightMostColumn As Long
Set sht = ActiveSheet
With sht
    bottomMostRow = .Cells(1, 1).End(xlDown).Row
    rightMostColumn = .Cells(1, 1).End(xlToRight).Column
    Set rngAdData = .Range(.Cells(1, 1), .Cells(bottomMostRow, rightMostColumn))
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:42:32.260

试试下面的代码：

```
Sub sample()
    Dim rng As Range
    Range("A1").Select
    Set rng = Range("A1").CurrentRegion
    rng.AdvancedFilter xlFilterInPlace, Sheets("sheet1").Range("E7:H8"), False
End Sub 
```

# android - 如何使用 MonkeyDevice 将应用程序/小部件快捷方式添加到启动器

> ID：15140793
> 
> 赞同：2
> 
> 时间：2013-02-28T16:36:22.323
> 
> 标签：android

使用monkeyrunner，我需要从应用程序屏幕模拟启动器上应用程序/小部件快捷方式的创建。

现在从应用程序屏幕（应用程序/小部件选项卡）我可以模拟长按键和应用程序选择

> device.touch(x1, y1, MonkeyDevice.DOWN)
> 
> 时间.sleep(2)

执行这两个后，我看到设备进入启动器屏幕，可以将快捷方式拖动到所需位置。

但是，如果我添加以下内容（在前面的说明 1 和 2 之后）来模拟拖放。什么都没发生：

> device.drag((x1, y1), (x2, y2), 3, 10)

有任何想法吗？提前致谢。

# mysql - 使用 ENUM 字段复制 mysql 表

> ID：15140794
> 
> 赞同：4
> 
> 时间：2013-02-28T16:36:23.060
> 
> 标签：mysql, select, insert, enums, copy

我尝试将整个表从一个 mysql 数据库复制到另一个。这几乎适用于

```
INSERT INTO `new-db`.`table` 
    SELECT * FROM `old-db`.`table`; 
```

但是，ENUM 字段未正确传输 - 它们始终为空。

但是跑步

```
INSERT INTO `new-db`.`table` (an_enum_field) 
    SELECT an_enum_field FROM `old-db`.`table`; 
```

工作正常。

有什么办法可以用第一条语句正确复制 ENUM 字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:32:58.353

两个表之间的列顺序需要相同。否则，带有 * 的魔术语句无法正确映射值。

明确命名所有列会有所帮助（问题的第二个示例）。

# php - CodeIgniter 预览后上传文件

> ID：15140799
> 
> 赞同：1
> 
> 时间：2013-02-28T16:36:36.050
> 
> 标签：php, file, codeigniter, file-upload

我的multi-part form的流程基本上是**Answer form -> Preview form -> Upload to database**

现在我在预览步骤中上传我的文件，因为`POST`数据是来自实际表单的新数据。`$_FILES`我的问题是在 Upload to database 函数中访问一次，因为在内部`var_dump($_FILES)`返回`array(0) {}`一次`upload_to_database()`。

我想实际上在 Preview 步骤中隐藏`input[type=file]`，以便我`upload_to_database()`会收到`$_FILES`，但由于安全原因，这是不可能的。

我该如何解决这个问题？

### 编辑

对不起，我上面的帖子含糊不清。

我实际上想在`upload_to_database()`函数中上传一次。我认为在预览阶段上传用户的文件是一种不好的做法，这与上传到数据库不同，因为他们可以确定自己的答案。

上传当前处于预览状态，因为现在它只能在其中工作。`$_FILES`一旦我们去，它是空的`upload_to_database()`。

如何`$_FILES`从 Preview获得完整且持久的内容`upload_to_database()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:42:54.207

您可以在第一步中上传文件（转到预览表单时；就像您现在所做的那样），将它们移动到特定`preview`目录并在上传到数据库时将它们移动到最终目的地。

我想您使用诸如会话之类的东西来跟踪发布的数据，以便您可以`preview`以相同的方式添加文件路径。

`preview`然后设置一个简单的 cron 作业，每隔 xx 小时删除目录中超过 xx 小时的所有文件。

**编辑：**另一种方法是在 javascript 中完全在客户端进行预览，例如在 SO 上预览问题和答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:43:24.643

是不是可以做这样的事情：

预习：

```
upload_to_database($_FILES['userfile']['tmp_name']); 
```

D B：

```
function upload_to_database($file)
{
  // work with file here
} 
```

我的意思是将 $_FILES 作为参数提供给您的 upload_to_database 函数

# javascript - 使用 Google Maps API 为 InfoWindow 设置样式

> ID：15140803
> 
> 赞同：21
> 
> 时间：2013-02-28T16:36:52.137
> 
> 标签：javascript, google-maps

我目前正在使用谷歌地图，现在一切正常。但我想更改 InfoWindow 的样式。我一直在研究，但还没有找到任何有用的东西来帮助我理解 InfoWindow（甚至不是 API 文档。）

**所以; 如何更改地图中 InfoWindow 框的颜色、背景、边框等样式？**

提前致谢。

这是我的代码：

```
<!DOCTYPE html>
<head>
    <title>Google Maps Example</title>
     <script src='http://code.jquery.com/jquery.min.js' type='text/javascript'></script>
     <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 font-family: Helvetica;}
      #map_canvas { height: 100% }
      .InfoWindow {
      background: #000;
      }
    </style>
</head>
<body>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var infowindow = null;
    $(document).ready(function () { initialize();  });

    function initialize() {

        var centerMap = new google.maps.LatLng(59.9149, 10.72974);

        var myOptions = {
            zoom: 14,
            center: centerMap,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        setMarkers(map, sites);
        infowindow = new google.maps.InfoWindow({
                content: "loading..."
            });
    }

    var sites = [
    ['Mount Evans', 59.934615,10.743392, 4, '<div class="InfoWindow"><b>This is Mount Evans.</b></div>'],
    ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
    ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
    ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
    ];

    var image = new google.maps.MarkerImage(
      'http://mapicons.nicolasmollet.com/wp-content/uploads/mapicons/shape-default/color-8c4eb8/shapecolor-color/shadow-1/border-dark/symbolstyle-white/symbolshadowstyle-dark/gradient-no/bar.png',
      new google.maps.Size(30,37)
    );

    function setMarkers(map, markers) {

        for (var i = 0; i < markers.length; i++) {
            var sites = markers[i];
            var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                title: sites[0],
                zIndex: sites[3],
                html: sites[4],
                icon: image

            });

            var contentString = "Some content";

            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
        }
    }
</script>
</head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

**编辑：看起来不可能设置 InfoWindow 的样式（只是输入）。然而，Infobox 使这成为可能。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-17T18:44:41.387

使用 .gm-style .gm-style-iw 类来设置文本的样式，例如：

```
.gm-style .gm-style-iw {
   font-size: 16px;
   font-weight: bold;
   font-family: sans-serif;
   text-transform: uppercase;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-16T05:38:40.473

您可以使用 java 脚本更改它，如下所示

```
var contentString = '<div style="width: 94.2%; padding-left:10px; height: 25px;float: left;color: #FFF;background: #ed1e79;line-height: 25px;border-radius:5px 5px 0px 0px;"><strong><b>"You feild"</b></strong></div><div style="clear:both;height:0px;"><div style="float:left;width:90%;padding:5px 10px;border:1px solid #ccc;border-top:none;border-radius:0px 0px 5px 5px;"><div style="float:left;color:#666;font-size:18px;font-weight:bold;margin:5px 0px;"> <div style="padding: 0px;">]]..product_list[i].category..[[</div></div><div style="clear:both;height:0px;"></div><div style="float:left;line-height:18px;color:#666;font-size:13px;">"You feild"</div><div style="clear:both;height:0px;"></div><form action=\"navigat:"You feild"\"><input type=\"submit\"/ style=\"background:#7e7e7e;float:right;color:#FFF;padding:5px 7px;font-size:10px;font-weight:bold;border:none;margin:5px 0px; border-radius:0px !important;\" value=\"More Info\" ></form></div></div>';  

  var infowindow = new google.maps.InfoWindow({content:contentString}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-28T17:05:41.013

来自 API：[https ://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

> InfoWindow 的内容可能包含文本字符串、HTML 片段或 DOM 元素本身。

您可以传入样式化的 HTML，也可以创建 InfoWindow 本身，然后将其作为对象拉入 JS。

# nginx - 只能用 root 运行 uwsgi

> ID：15140805
> 
> 赞同：16
> 
> 时间：2013-02-28T16:36:54.710
> 
> 标签：nginx, flask, uwsgi

我正准备将 nginx/uwsgi 与烧瓶一起用于我正在开发的网站，但我遇到了问题。注意网站本身使用烧瓶的调试：5000 端口运行良好，但我现在想投入生产。解释我做了什么。

这是一个 linode ubuntu 12.04LTS 服务器，我是这样安装的：

```
# install nginx
sudo apt-get install python-software-properties
sudo add-apt-repository ppa:nginx/stable
sudo apt-get update
sudo apt-get upgrade --show-upgraded
sudo apt-get install nginx-full
# installing uwsgi
sudo apt-get install build-essential python-dev libxml2-dev
sudo apt-get install libc6 libexpat1 libgd2-xpm libgeoip1 libpam0g libpcre3 libssl1.0.0 libxml2 libxslt1.1 zlib1g 
sudo pip install uwsgi
# python basics
sudo apt-get install python-pip build-essential python-dev
sudo pip install virtualenv
sudo pip install virtualenvwrapper
sudo mkdir -p /srv/www/li/
cd /srv/www/li/
virtualenv venv
source /srv/www/li/venv/bin/activate
pip install flask 
```

然后我开始配置一切，但我已经遇到了 uwsgi 的麻烦（别管 NGINX，这将是下一步。

```
sudo nano /etc/uwsgi/apps-available/li.xml

    <uwsgi> 
    <plugin>python</plugin> 
    <socket>/run/uwsgi/app/li.socket</socket>
    <chmod-socket>666</chmod-socket>
    <chdir>/srv/www/li</chdir>
    <pythonpath>/srv/www/li</pythonpath>
    <virtualenv>/srv/www/li/venv</virtualenv>
    <module>li</module>
    <wsgi-file>/srv/www/li/li.py</wsgi-file>
    <callable>app</callable> 
    <master/> 
    <processes>4</processes> 
    <harakiri>60</harakiri> 
    <reload-mercy>8</reload-mercy> 
    <cpu-affinity>1</cpu-affinity> 
    <stats>/tmp/stats.socket</stats> 
    <max-requests>2000</max-requests> 
    <limit-as>512</limit-as> 
    <reload-on-as>256</reload-on-as> 
    <reload-on-rss>192</reload-on-rss> 
    <no-orphans/> 
    <vacuum/> 
</uwsgi>

sudo ln -s /etc/uwsgi/apps-available/li.xml /etc/uwsgi/apps-enabled/li.xml 
```

但是，如果我运行它，我会得到：

```
uwsgi --xml /etc/uwsgi/apps-enabled/li.xml

[uWSGI] parsing config file /etc/uwsgi/apps-enabled/li.xml
open("./python_plugin.so"): No such file or directory [core/utils.c line 4755]
!!! UNABLE to load uWSGI plugin: ./python_plugin.so: cannot open shared object file: No such file or directory !!!
*** Starting uWSGI 1.4.6 (64bit) on [Thu Feb 28 16:30:53 2013] ***
compiled with version: 4.6.3 on 28 February 2013 12:38:22
os: Linux-3.7.10-x86_64-linode30 #1 SMP Wed Feb 27 14:29:31 EST 2013
nodename: demo
machine: x86_64
clock source: unix
detected number of CPU cores: 4
current working directory: /run/uwsgi/app
detected binary path: /usr/local/bin/uwsgi
your processes number limit is 63594
limiting address space of processes...
your process address space limit is 536870912 bytes (512 MB)
your memory page size is 4096 bytes
 *** WARNING: you have enabled harakiri without post buffering. Slow upload could be rejected on post-unbuffered webservers *** 
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
uwsgi socket 0 bound to UNIX address /run/uwsgi/app/li.socket fd 3
Python version: 2.7.3 (default, Aug  1 2012, 05:25:23)  [GCC 4.6.3]
Set PythonHome to /srv/www/li/venv
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0xa86e20
your server socket listen backlog is limited to 100 connections
mapped 362120 bytes (353 KB) for 4 cores
*** Operational MODE: preforking ***
added /srv/www/li/ to pythonpath.
/srv/www/li/venv/local/lib/python2.7/site-packages/mongoengine/fields.py:744: FutureWarning: ReferenceFields will default to using ObjectId  strings in 0.8, set DBRef=True if this isn't desired
  warnings.warn(msg, FutureWarning)
WSGI app 0 (mountpoint='') ready in 1 seconds on interpreter 0xa86e20 pid: 14934 (default app)
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 14934)
spawned uWSGI worker 1 (pid: 14940, cores: 1)
mapping worker 1 to CPUs: 0
spawned uWSGI worker 2 (pid: 14941, cores: 1)
mapping worker 2 to CPUs: 1
spawned uWSGI worker 3 (pid: 14942, cores: 1)
mapping worker 3 to CPUs: 2
spawned uWSGI worker 4 (pid: 14943, cores: 1)
unlink(): Operation not permitted [core/socket.c line 109]
bind(): Address already in use [core/socket.c line 141]
...brutally killing workers...
mapping worker 4 to CPUs: 3
VACUUM: unix socket /run/uwsgi/app/li.socket removed. 
```

所以我得到 unlink operation not allowed 和 bind address already in use 错误（在 python_plugin 错误旁边，我也不知道如何解决这个问题！）。如果我以 sudo 身份运行，它似乎工作正常 ->

```
sudo uwsgi --xml /etc/uwsgi/apps-enabled/li.xml

[uWSGI] parsing config file /etc/uwsgi/apps-enabled/li.xml
open("./python_plugin.so"): No such file or directory [core/utils.c line 4755]
!!! UNABLE to load uWSGI plugin: ./python_plugin.so: cannot open shared object file: No such file or directory !!!
*** Starting uWSGI 1.4.6 (64bit) on [Thu Feb 28 15:47:41 2013] ***
compiled with version: 4.6.3 on 28 February 2013 12:38:22
os: Linux-3.7.10-x86_64-linode30 #1 SMP Wed Feb 27 14:29:31 EST 2013
nodename: demo
machine: x86_64
clock source: unix
detected number of CPU cores: 4
current working directory: /run/uwsgi
detected binary path: /usr/local/bin/uwsgi
uWSGI running as root, you can use --uid/--gid/--chroot options
*** WARNING: you are running uWSGI as root !!! (use the --uid flag) *** 
your processes number limit is 63594
limiting address space of processes...
your process address space limit is 536870912 bytes (512 MB)
your memory page size is 4096 bytes
 *** WARNING: you have enabled harakiri without post buffering. Slow upload could be rejected on post-unbuffered webservers *** 
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
uwsgi socket 0 bound to UNIX address /run/uwsgi/app/li.socket fd 3
Python version: 2.7.3 (default, Aug  1 2012, 05:25:23)  [GCC 4.6.3]
Set PythonHome to /srv/www/li/venv
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0x1fc9d00
your server socket listen backlog is limited to 100 connections
mapped 362120 bytes (353 KB) for 4 cores
*** Operational MODE: preforking ***
added /srv/www/li/ to pythonpath.
/srv/www/li/venv/local/lib/python2.7/site-packages/mongoengine/fields.py:744: FutureWarning: ReferenceFields will default to using ObjectId  strings in 0.8, set DBRef=True if this isn't desired
  warnings.warn(msg, FutureWarning)
WSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x1fc9d00 pid: 14755 (default app)
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 14755)
spawned uWSGI worker 1 (pid: 14761, cores: 1)
mapping worker 1 to CPUs: 0
spawned uWSGI worker 2 (pid: 14762, cores: 1)
mapping worker 2 to CPUs: 1
spawned uWSGI worker 3 (pid: 14763, cores: 1)
mapping worker 3 to CPUs: 2
spawned uWSGI worker 4 (pid: 14764, cores: 1)
*** Stats server enabled on /tmp/stats.socket fd: 16 ***
mapping worker 4 to CPUs: 3 
```

谁能帮帮我吗？由于 www-data 在 www-data 组中并且他运行它，我尝试了一些东西：

```
sudo usermod -a -G www-data $USER
sudo chown -R $USER:www-data /srv/www/li
sudo chmod -R g+r+w+x /srv/www/li
sudo chown -R $USER:www-data /etc/uwsgi/apps-enabled
sudo chmod -R g+r+w+x /etc/uwsgi/apps-enabled
sudo chown -R $USER:www-data /run/uwsgi/app
sudo chmod -R g+r+w+x /run/uwsgi/app 
```

但这也无济于事。我还尝试了一个 tcp 端口，而不是 unix /run/uwsgi/app/ 端口，这也没有任何区别......这让我发疯了:(我希望有人知道这里发生了什么。

亲切的问候，

卡斯特

编辑：在服务器重新启动后，它仍然给出一个错误，但一个不同的：

```
geoadmin@demo:~$ uwsgi --xml /etc/uwsgi/apps-enabled/li.xml
[uWSGI] parsing config file /etc/uwsgi/apps-enabled/li.xml
*** Starting uWSGI 1.4.6 (64bit) on [Thu Feb 28 18:47:36 2013] ***
compiled with version: 4.6.3 on 28 February 2013 12:38:22
os: Linux-3.7.10-x86_64-linode30 #1 SMP Wed Feb 27 14:29:31 EST 2013
nodename: demo
machine: x86_64
clock source: unix
detected number of CPU cores: 4
current working directory: /home/geoadmin
detected binary path: /usr/local/bin/uwsgi
your processes number limit is 63594
limiting address space of processes...
your process address space limit is 536870912 bytes (512 MB)
your memory page size is 4096 bytes
 *** WARNING: you have enabled harakiri without post buffering. Slow upload could be rejected on post-unbuffered webservers *** 
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
bind(): No such file or directory [core/socket.c line 141] 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-03T22:19:33.020

这一直是我在谷歌上的第一结果，这个页面对我来说相对没有帮助，所以我要添加我的答案，尽管回想起来很明显。

我的问题是我的**stats socket**的权限问题。如果您更改 uWSGI 配置的 uid 或 gid 参数，请确保您**chmod 或 rm 所有旧套接字/ pids 及其父文件夹**。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-03T06:58:13.993

在我的情况下，我试图将`.sock`文件放在`/vagrant`目录中，该目录是虚拟盒的机器安装文件夹，除了读写之外并没有什么好处。

最好将文件放在虚拟机`.sock`挂载点之外[FHS](http://www.pathname.com/fhs/pub/fhs-2.3.html)说：~~`/tmp`~~[`/var/run`](http://www.pathname.com/fhs/pub/fhs-2.3.html#VARRUNRUNTIMEVARIABLEDATA</blockquote)

参考： [https ://stackoverflow.com/a/7580524/1695680](https://stackoverflow.com/a/7580524/1695680)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-28T18:58:55.563

好的，在后来的编辑之后，我检查了目录并且套接字目录不存在（不再存在）；我认为它与原来的 apt-get 安装和我后来的 pip 安装有关......仍然有 python 插件的问题，但会检查它是否对 nginx 是必要的，或者它是否可以在没有它的情况下工作...... 8 小时完成重置，d'oh ;)

@bearrito：最后我将套接字放在 tmp 目录中以避免权限问题：

```
<uwsgi>
        <uid>www-data</uid>
        <gid>www-data</gid> 
    <plugin>python</plugin> 
    <socket>/tmp/li.socket</socket>
    <chmod-socket>666</chmod-socket>
    <chdir>/srv/www/li</chdir>
    <pythonpath>/srv/www/li</pythonpath>
    <virtualenv>/srv/www/li/venv</virtualenv>
    <module>li</module>
    <wsgi-file>/srv/www/li/li.py</wsgi-file>
    <callable>app</callable> 
    <master/> 
    <processes>2</processes> 
    <pidfile>/tmp/li.pid</pidfile> 
    <harakiri>120</harakiri> 
    <reload-mercy>8</reload-mercy> 
    <cpu-affinity>1</cpu-affinity> 
    <stats>/tmp/stats.socket</stats> 
    <max-requests>2000</max-requests> 
    <limit-as>2048</limit-as> 
    <reload-on-as>2048</reload-on-as> 
    <reload-on-rss>1024</reload-on-rss> 
    <no-orphans/> 
    <vacuum/> 
</uwsgi> 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-23T11:00:28.800

对我来说，解决方案是删除 /var/run/uwsgi/.sock 和

```
chmod 775 /var/run/uwsgi
chmod 777 /var/log/uwsgi 
```

或者你的 uwsgi 文件在哪里。

# python - 访问对象中的类变量的最佳方法？

> ID：15140813
> 
> 赞同：0
> 
> 时间：2013-02-28T16:37:06.967
> 
> 标签：python

这些都有效：

```
class A:
    V = 3
    def getV(self):
        return self.V
    def getVbis(self):
        return A.V

print A().getV()
print A().getVbis() 
```

哪个更pythonic？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:53:17.520

`self.V`包含实例变量`A.V`的值，而包含类变量的值。取决于你的类方法对 V 做了什么以及它们是如何做的，`getV`并且`getVbis`会返回不同的东西。

这是一个例子：

```
class A:
    V = 3
    def getV(self):
        return self.V
    def getVbis(self):
        return A.V
    def setV(self, newVal):
        self.V = newVal

aInst = A()
print aInst.getV()
print aInst.getVbis()
aInst.setV(5)
print aInst.getV()
print aInst.getVbis() 
```

上面的代码将产生以下结果：

```
3
3
5
3 
```

所以我不认为这是关于哪个更 Pythonic。相反，它是关于你试图用你的类变量做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:02:26.013

尽管您的代码具有实际含义，但我认为 getter/setter 方式并不是 Pythonic。

首先，该变量默认是公共的。getter 函数使它更复杂；

其次，如果你想在 getter/setter 函数中有一些约束或其他逻辑，它应该有一个更明显的名称来指示逻辑。getXXX 这个名字没有任何意义。

顺便说一句，如果你真的不想直接访问变量，还有另一种选择：[http ://docs.python.org/2/library/functions.html#property](http://docs.python.org/2/library/functions.html#property)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:42:05.830

我自己确实更喜欢将类成员（属性和方法）作为实例方法中的实例方法来访问。我不知道它是否更像 Pythonic，但它让我可以专注于接口，因为我总是可以用实例成员覆盖类成员。在这种情况下，类成员提供了一些有用的默认值（值或实现）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T10:55:46.697

它可能不漂亮，但我更喜欢：

```
self.__class__.V 
```

这样您就不必显式引用类名，这使得子类化更容易，并且不存在意外获取实例属性而不是类属性的危险。

# backbone.js - 下划线js骨干js两个模板

> ID：15140818
> 
> 赞同：0
> 
> 时间：2013-02-28T16:37:16.793
> 
> 标签：backbone.js, underscore.js

我想在骨干 js 中处理两个模板。我该怎么做呢？我想为模板中的模型传递 json？

我有以下内容：

```
 var json = model.toJSON(), json2 = model2.toJSON();

            that.$el.html(_.template(tmpl, json, json2)); 
```

但这不允许我从下划线的第二个 json 中获取字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:27:23.460

正确的语法是

```
var data = {
    modelOne: model.toJSON(),
    modelTwo: model2.toJSON()
}

that.$el.html(_.template(tmpl, data)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:43:15.743

如果模型没有在模板中混合，您可以这样做：需要为第二个模型创建新模板，并添加到必要的地址

```
var addressToSecondModel = $(that.$el).find("address");
addressToSecondModel.html(_.template(tmpl2, json2)); 
```

# c# - 检查 url 的最有效方法是否存在并在任何地方重定向？

> ID：15140825
> 
> 赞同：1
> 
> 时间：2013-02-28T16:37:45.460
> 
> 标签：c#, httpwebrequest, httpwebresponse, http-redirect

我想检查一个 url 是否存在以及是否重定向到任何我想获得重定向 url 的地方。

这是我的功能，但我不确定它是否是最有效的方法

从有效我的意思是最小的数据传输量

```
 public static string funcReturnResponseUri(string srUrl)
    {
        Uri siteUri = new Uri(srUrl);
        WebRequest wr = WebRequest.Create(siteUri);
        wr.Timeout = 30 * 1000;
        string srReturnUrl = "";
        try
        {
            using (HttpWebResponse response = (HttpWebResponse)wr.GetResponse())
            {
                srReturnUrl = response.ResponseUri.ToString();
                response.Close();
            }
        }
        catch
        {

        }
        return srReturnUrl;
    } 
```

C# 4.5 WPF 应用程序

# windows-phone-7 - 强制使 Windows Phone 用户控件无效

> ID：15140826
> 
> 赞同：0
> 
> 时间：2013-02-28T16:37:49.340
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我在 Windows Phone XAML 应用程序中有一个用户控件，我正在尝试在应用程序从墓碑恢复后恢复状态。在此状态恢复期间，我正在更改此控件内部`Foreground`的画笔。`TextBlock`

```
textBlock.Foreground = new SolidColorBrush(Colors.Red); //for example 
```

问题是当我在`OnNavigatedTo`方法中执行此操作时，前景并没有真正改变。我在正常工作流程中使用完全相同的代码（`Tap`在某些事情发生之后）并且前景色发生了变化。

当我检查`Foreground`调试器中的值时，它确实发生了变化，但控件不会重新绘制自身。

有没有办法强制`TextBlock`重新粉刷自己？我可以调用`Invalidate()`Windows 窗体应用程序，但我在这里迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:18:15.410

我发现前景发生了应有的变化，但不知何故我最终得到了重叠的TextBlocks，我的代码改变了底层的前景，我仍然可以在它上面的TextBlock保持不变的前景。我的错。

# linux - 我如何知道 bash 脚本是否使用 nohup 运行？

> ID：15140829
> 
> 赞同：9
> 
> 时间：2013-02-28T16:38:02.753
> 
> 标签：linux, bash, shell, nohup

我有一个脚本来处理某些文件中的记录，通常需要 1-2 小时。当它运行时，它会打印处理的记录数的进度。

现在，我想做的是：当它运行时`nohup`，我不希望它打印进度；它应该仅在手动运行时打印进度。

我的问题是如何知道 bash 脚本是否正在运行`nohup`？

假设命令是`nohup myscript.sh &`。在脚本中，如何获取`nohup`from 命令行？我尝试使用`$0`，但它给出了`myscript.sh`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-25T21:28:55.983

检查文件重定向并不可靠，因为`nohup`可以（并且经常）在标准输入、标准输出和/或标准错误已经明确重定向的脚本中使用。

除了这些重定向之外，唯一要做的`nohup`就是[忽略`SIGHUP`信号](http://src.gnu-darwin.org/src/usr.bin/nohup/nohup.c.html)（感谢[Blrfl](https://stackoverflow.com/a/3881916/580412)的链接。）

所以，我们真正需要的是一种检测是否`SIGHUP`被忽略的方法。`/proc/$PID/status`在 linux 中，信号忽略掩码暴露在[hex 字符串](https://unix.stackexchange.com/a/85365/10495)[的最低有效位中`SigIgn`](https://unix.stackexchange.com/a/85365/10495)。

如果我们知道要检查的 bash 脚本的 pid，我们可以使用`egrep`. 在这里，我查看当前 shell 是否忽略`SIGHUP`（即“nohuppy”）：

```
$ egrep -q "SigIgn:\s.{15}[13579bdf]" /proc/$$/status && echo nohuppy || echo normal
normal
$ nohup bash -c 'egrep -q "SigIgn:\s.{15}[13579bdf]" /proc/$$/status && echo nohuppy || echo normal'; cat nohup.out
nohup: ignoring input and appending output to `nohup.out'
nohuppy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:50:19.873

您可以检查 STDOUT 是否与终端相关联：

```
[ -t 1 ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T17:00:57.353

一种方法，但不是真正可移植的，是做一个 readlink`/proc/$$/fd/1`并测试它是否以 nohup.out 结尾。

假设您在`pts0`终端上（并不真正相关，只是为了能够显示结果）：

```
#!/bin/bash

if [[ $(readlink /proc/$$/fd/1) =~ nohup.out$ ]]; then
    echo "Running under hup" >> /dev/pts/0
fi 
```

但解决此类问题的传统方法是测试输出是否为终端：

```
[ -t 1 ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-17T17:29:30.143

您可以检查父 pid 是否为 1：

```
if [ $PPID -eq 1 ] ; then
    echo "Parent pid=1  (runing via nohup)" 
else
    echo "Parent pid<>1 (NOT running via nohup)"                                             
fi 
```

或者如果您的脚本忽略 SIGHUP 信号（请参阅[https://stackoverflow.com/a/35638712/1011025](https://stackoverflow.com/a/35638712/1011025)）：

```
if egrep -q "SigIgn:\s.{15}[13579bdf]" /proc/$$/status ; then
    echo "Ignores SIGHUP (runing via nohup)" 
else
    echo "Doesn't ignore SIGHUP (NOT running via nohup)"                                             
fi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T17:09:14.817

谢谢你们。检查 STDOUT 是个好主意。我只是找到另一种方法来做到这一点。也就是测试tty。test tty -s 检查它的返回码。如果它是 0 ，那么它在终端上运行；如果它是 1，那么它使用 nohup 运行。

# java - LinkedIn - 了解用户 api 访问与服务器 api 访问

> ID：15140830
> 
> 赞同：0
> 
> 时间：2013-02-28T16:38:04.390
> 
> 标签：java, linkedin

在链接的节流限制中，它按用户和应用程序分解请求。

例如

连接：

*   应用：20k
*   每个用户：1500

此时应用程序代表什么？LinkedIn 如何知道用户是应用程序还是用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:20:29.970

细分：

*   所有使用您的 API 密钥到达其服务器的请求都计入您的应用程序限制。
*   对于特定用户凭据，使用您的 API 密钥到达其服务器的所有请求都计入该人的用户限制。

# three.js - 可能的 shadowMapTypes 是什么？

> ID：15140832
> 
> 赞同：0
> 
> 时间：2013-02-28T16:38:06.270
> 
> 标签：three.js

渲染器可能的 shadomMapTypes 是什么？

目前我知道3：三。

```
PCFShadowMap
PCFSoftShadowMap
PCFBasicShadowMap 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:05:13.343

shadowMap 类型有：

```
THREE.BasicShadowMap = 0;
THREE.PCFShadowMap = 1;
THREE.PCFSoftShadowMap = 2; 
```

PCF 代表百分比关闭过滤（[http://fabiensanglard.net/shadowmappingPCF/](http://fabiensanglard.net/shadowmappingPCF/)）

三.js r.96

# durandal - 将 jquery 插件结果加载到 Durandal 视图中

> ID：15140840
> 
> 赞同：3
> 
> 时间：2013-02-28T16:38:20.090
> 
> 标签：durandal

我正在为 mvc4 使用 Durandal 入门模板。我设置了以下简单视图：

```
<section>
    <h2 data-bind="html: displayName"></h2>
     <h3 data-bind="html: posts"></h3>
     <button data-bind="click: getrss">Get Posts</button>
     <div id="rsstestid" ></div>
</section> 
```

和视图模型：

```
 define(function (require) {
    var http = require('durandal/http'),
        app = require('durandal/app');

    return {
        displayName: 'This is my RssTest',
        posts: ko.observable(),
        activate: function () {
            return;
        },
        getrss: function () {
            $('#rsstestid').rssfeed('http://feeds.reuters.com/reuters/oddlyEnoughNews');
            return;
        }
    };
}); 
```

如您所见，它只是在单击“获取帖子”按钮时使用 zRssReader 插件将帖子加载到 div 中。一切正常，显示名称已填充，帖子按预期显示。

当我尝试消除按钮并尝试在创建时加载帖子时，我遇到了麻烦。如果我将插件调用放在激活函数中，我不会得到任何结果。我认为这是因为视图没有完全加载，所以元素不存在。我有两个问题：

1.  如何延迟插件调用的执行，直到视图完全组成？
2.  更好的是，如何将插件结果加载到可观察的帖子中，而不是使用查询选择器？我尝试了很多组合，但没有运气

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T00:59:26.593

编辑**以下答案适用于 durandal 1.2。在 durandal 2.0`viewAttached`中已更改为`attached`

* * *

直接从 durandaljs.com 复制粘贴

“每当 Durandal 编写时，它还会检查您的模型中是否存在名为 的函数`viewAttached`。如果存在，它将调用该函数并将绑定视图作为参数传递。这允许控制器或演示者直接访问 dom 子树它在注入其父级后的某个时间点绑定到该位置。

注意：如果您已设置`cacheViews:true`then`viewAttached`只会在第一次显示视图时调用，在初始绑定时，因为从技术上讲，视图只附加一次。如果您希望覆盖此行为，请设置`alwaysAttachView:true`您的组合绑定。”——[引自网站](http://durandaljs.com/documentation/Composition/)

* * *

有很多方法可以做到这一点，但这里只是一种快速而肮脏的方法：

```
<section>
    <h2 data-bind="html: displayName"></h2>
     <h3 data-bind="html: posts"></h3>
     <button data-bind="click: getRss">Get Posts</button>
     <div id="rsstestid"></div>
</section> 
```

和代码：

```
define(function (require) {
    var http = require('durandal/http'),
        app = require('durandal/app');

    var $rsstest;

    return {
        displayName: 'This is my RssTest',
        posts: ko.observable(),
        viewAttached: function(view) {
           $rssTest = $(view).find('#rsstestid');
        },
        getRss: function() {
           $rssTest.rssfeed('http://feeds.reuters.com/reuters/oddlyEnoughNews');
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:30:01.127

一般来说，我认为避免在视图模型中直接接触 UI 元素是明智的。

一个好的方法是创建一个可以呈现 rss 提要的自定义 KO 绑定。这样，您就可以保证在绑定执行时视图就位。您可能希望将提要 url 作为属性公开在视图模型上，然后自定义绑定可以在更新时读取它。

自定义绑定非常简单 - 如果我能做到，那么它一定是:)

这是 KnockOut 自定义绑定快速入门的链接：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T00:12:22.647

我在时间方面遇到了类似的问题。在初始页面加载时，页面上正在加载部分视图，我可以调用 viewAttached 函数并使用 jQuery 绑定部分视图中的一些元素。时间按预期工作

但是，如果我导航到新页面，然后返回初始页面，相同的 viewAttached + jQuery 方法无法找到页面上的元素......它们尚未附加到 dom。

尽我所能确定（到目前为止）这与 entry.js 文件中的过渡效果有关。我使用的是默认转换，它导致一个对象淡出，一个新对象淡入。通过消除fadeOutTransition（在entry.js中将其设置为零），我能够让viewAttached函数与部分意见附件。

最好的猜测是，当第一个对象淡出时，传入的对象尚未附加到 dom，但无论如何都会触发 viewAttached 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:13:05.647

我也有同样的问题，我试图在 durandal 视图模型和视图绑定在一起之后直接在元素上设置一个 css 属性。我也认为它不起作用，因为在我设置值时视图没有完全组成。

我想出的最好的方法是在 durandal 中使用 viewAttached 生命周期事件，我认为这是 durandal 视图模型加载周期中的最后一个事件，然后使用 setTimeout 进一步延迟属性的设置。

这是一个非常垃圾的解决方法，但它现在正在工作。

```
 var viewAttached = function (view) {
        var _this = this;

        var picker = new jscolor.color($(view).children('.cp')[0], {
            onImmediateChange: function() {
                _updateCss.call(_this, this.toString());
            }
        });
        picker.fromString(this.color());
        setTimeout(function() {
            _updateCss.call(_this, _this.color());
        }, 1000);
    };

    var activate = function (data) {
        system.log('activated: ' + this.selectors + ' ' + this.color());
    };
    var deactivate = function (isClose) {
        system.log('deactivated, close:' + isClose);
    };

    return {
        viewAttached: viewAttached,
        deactivate: deactivate,
        activate: activate,
        color: this.color
    }; 
```

# coding-style - 什么时候让类名和实例名相同是合适的？

> ID：15140842
> 
> 赞同：0
> 
> 时间：2013-02-28T16:38:25.880
> 
> 标签：coding-style, naming-conventions

我见过人们的代码看起来像这样的时候：

```
class SomeClass { /* lorem ipsum */ };

int main()
{
    SomeClass someClass;
    /* dolor
       sit
       amet
    */
} 
```

我觉得这是一个灾难的秘诀，更重要的是，特异性都是错误的。要么类名过于具体（因此不能充分重用），要么实例变量的命名过于笼统，因此未来的程序员将无法确定它在代码中的用途，并且由于通常缺少注释，因此正确命名似乎很重要我。

有*没有*很好的理由这样做？我真诚地好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:43:22.227

我首先想到的是使用[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)和[Factory模式。](http://en.wikipedia.org/wiki/Factory_method_pattern)

在某些情况下，使用中央[享元](http://en.wikipedia.org/wiki/Flyweight_pattern)也可能具有与类名相同的对象名。

如果您使用的编程语言允许从类中调用方法而不创建实际对象，则可以出于各种原因避免这种情况。

* * *

一般来说——只要你有一个非常具体的类，它只存在于一个非常具体的实例中，你可能会看到它的名称相同。除非作为唯一实例是其功能的一部分，否则不应将类和对象命名为相同的名称。

我的一般建议是避免将对象命名为与火之类的类相同的名称，但在某些情况和语言中，将对象命名为与类相同可能会显着提高代码的可读性。不过，您需要格外小心。

# vbscript - 如何在 VBScript 中处理 E_INVALIDARG

> ID：15140843
> 
> 赞同：1
> 
> 时间：2013-02-28T16:38:26.477
> 
> 标签：vbscript, error-handling, automation

我已经为我的应用程序（在 C++ 中）实现了一个 COM 自动化接口。该应用程序通过 VBScript 实现自动化。

我的问题与 VB 脚本中的错误处理有关。我的 COM 接口实现认为某些参数值无效，它返回 E_INVALIDARG 来表明这一点。发生这种情况时，VB 脚本会显示一个消息框并终止。有没有办法处理 VB 脚本中的错误（可能以某种方式捕获异常？）并避免脚本终止？

# performance - 非规范化数字 - IEEE 754 浮点

> ID：15140847
> 
> 赞同：16
> 
> 时间：2013-02-28T16:38:54.597
> 
> 标签：performance, floating-point, standards, ieee-754

因此，我正在尝试了解有关 IEEE 754 浮点数标准中定义的非规范化数字的更多信息。感谢 Google 搜索结果，我已经阅读了几篇文章，并且浏览了几篇 StackOverFlow 帖子。但是，我还有一些问题没有得到解答。

首先，回顾一下我对非规范化浮点数的理解：

> 具有较少位精度的数字，并且比规范化数字更小（在数量上）

本质上，非规范化浮点数能够表示可以用任何浮点值表示的最小（幅度）数。

**这听起来正确吗？还有什么比这更重要的吗？**

我读过：

> 在许多平台上使用非规范化数字会带来性能成本

**对此有何评论？**

我也在其中一篇文章中读到

> 一个人应该“避免规范化和非规范化数字之间的重叠”

**对此有何评论？**

在 IEEE 标准的某些演示文稿中，当呈现浮点范围时，会排除非规范化值，并且将表格标记为“有效范围”，几乎就像演讲者在想“我们知道非规范化数字可以代表最小可能的浮点数点值，但由于非规范化数字的某些缺点，我们选择将它们排除在更适合常见使用场景的范围之外”——好像非规范化数字不常用。

**我想我只是一直觉得在大多数情况下使用非规范化数字并不是一件好事？**

如果我必须自己回答这个问题，我会想：

使用非规范化数字很好，因为您可以表示可能的最小（数量级）数字——只要精度不重要，并且您不将它们与规范化数字混淆，并且应用程序的最终性能符合要求。

使用非规范化数字是一件坏事，因为大多数应用程序不需要这么小的表示 - 精度损失是有害的，而且你可以通过将它们与规范化数字混合起来太容易自取其辱，而且性能不值得付出代价大多数情况下。

**对这两个答案有何评论？关于非规范化数字，我还可能遗漏或不了解什么？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T17:51:17.067

> 本质上，非规范化浮点数能够表示可以用任何浮点值表示的最小（幅度）数。

那是对的。

> 在许多平台上使用非规范化数字会带来性能成本

不同处理器的惩罚不同，但最高可达 2 个数量级。原因？与此建议相同：

> 一个人应该“避免规范化和非规范化数字之间的重叠”

这是关键：**非正规是 IEEE-754 浮点格式中的定点“微格式”**。在普通数字中，指数表示二进制点的位置。非正规数包含定点表示法中的最后 52 位，双精度数的指数为 2 ^(-1074)。

因此，非规范化很慢，因为它们需要特殊处理。在实践中，它们很少发生，芯片制造商不喜欢在罕见的情况下花费太多宝贵的资源。

将非正规与法线混合很慢，因为您正在混合格式并且您需要在两者之间进行转换的额外步骤。

> 我想我只是一直觉得在大多数情况下使用非规范化数字并不是一件好事？

非规范化是为了一个主要目的而创建的：**逐渐下溢**。这是一种使微小数字之间的相对差异保持较小的方法。如果从最小的正常数直接到零（*突然下溢*），则相对变化是无限的。如果您在下溢上进行非规范化，则相对变化仍然不完全准确，但至少更合理。这种差异体现在计算中。

换一种说法。浮点数不是均匀分布的。2 的连续幂之间总是有相同数量的数字：2 ^(52)（对于双精度）。因此，如果没有非规范化，您总是会在 0 和最小浮点数之间出现差距，即 2 ^(52)乘以最小的两个数字之间的差异。非正规均匀地填补了这个空白。

作为关于突然下溢与逐渐下溢影响的示例，请查看数学上等价的`x == y`和`x - y == 0`。如果`x`和`y`很小但不同，并且您使用突然下溢，则如果它们的差小于最小截止值，则它们的差将为零，因此违反了等价性。

随着逐渐下溢，两个微小但不同的正常数之间的差异变为非正规数，仍然不为零。等价性被保留。

因此，**不建议故意使用非规范化，因为它们仅被设计为特殊情况下的备用机制**。

# wordpress - 使用两个条件查询自定义帖子类型

> ID：15140849
> 
> 赞同：0
> 
> 时间：2013-02-28T16:39:03.617
> 
> 标签：wordpress, posts, custom-taxonomy

提前感谢您的帮助。我创建了一个页面，列出了自定义帖子类型的分类。我遇到的问题是此列表中链接的页面应该只提取类别和放置代码（在标准示例中）。它正在拉动展示位置，但我如何让它添加到从上一页提取的动态创建的类别中。

动态提取分类法（类别标题）的代码。这会在页面上拉出正确的类别。

```
$term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) ); echo $term->name; 
```

下面的代码会拉动特定的位置。如何添加由上面的代码提取的动态提取分类法，以便内容满足这两个标准。

```
$args = array(
'post_type' => 'buyersguide', 
'meta_query' => array(
    array(
        'key' => 'Placement',
        'value' => 'standard',
        'compare' => 'LIKE'
    )
)
);
query_posts($args); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:11:14.490

您可以使用以下代码解决此问题：

```
$args = array(
 'post_type' => 'buyersguide', 
 'meta_query' => array(
    array(
        'key'     => 'Placement',
        'value'   => 'standard',
        'compare' => 'LIKE'
    )
 ),
 'tax_query' => array(
    array(
        'taxonomy' => $term->taxonomy,
        'field'    => 'slug',
        'terms'    => $term->slug
    )
 )
);

query_posts($args); 
```

有关分类参数的更多信息，请访问： [分类参数 - WP_Query](https://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)

# perl - 从 perl 运行 /usr/bin/time

> ID：15140850
> 
> 赞同：2
> 
> 时间：2013-02-28T16:39:03.777
> 
> 标签：perl, time

我正在尝试做一些非常粗略的基准测试，所以我想`time`从我的脚本中运行命令。我有以下内容：

```
#!/usr/bin/perl

   use strict;

   my $command = "/usr/bin/time -f \"%U,%S,%E,%P,%K,%M\" ...";
   my $stats = `$command`;
   print "stats: $stats\n"; 
```

不幸的是，该命令的结果似乎从未分配给`$stats`. 当我执行脚本时，我得到如下内容：

```
0.15,0.03,0:00.44,43%,0,143808
stats: 
```

所以看起来它`time`成功运行了命令，但打印出值 to`STDOUT`而不是将值分配给`$stats`. 当我使用另一个命令时，例如`ls`，它似乎按预期工作。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:42:40.147

`time`打印到标准错误。

```
$ /usr/bin/time -f "%U,%S,%E,%P,%K,%M" echo foo >/dev/null
0.00,0.00,0:00.03,10%,0,2352

$ /usr/bin/time -f "%U,%S,%E,%P,%K,%M" echo foo >/dev/null 2>/dev/null

$ 
```

所以只需添加`2>&1`到您的命令中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T16:42:17.123

`time`写入标准错误，因此您需要将其重定向到标准输出以使用 Perl 的反引号捕获它

```
 my $command = "/usr/bin/time -f \"%U,%S,%E,%P,%K,%M\" ... 2>&1"; 
```

# indexing - 使用预定义的标签标记文档

> ID：15140853
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:39:15.203
> 
> 标签：indexing

我正在处理大量文档，并且有一组预定义的类别/标签（可能是短语），它们将以准确或不准确的形式出现在文档的文本中。我想将每个文档分配给最接近其文本的标签中的一个标签。

请给我一些指示，告诉我我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T12:23:32.187

您可以查看在索引时标记文档的 lucene 搜索引擎。Northernlight 搜索引擎曾经执行过您在其搜索方法中提到的类似任务。您可以查看它的实现以得到一个想法。

# android - 将 LocalBroadcastManager 与静态类一起使用

> ID：15140854
> 
> 赞同：2
> 
> 时间：2013-02-28T16:39:14.713
> 
> 标签：android

免责声明：我对 Android 编程相当陌生，所以我试图模仿 iOS NSNotificationCenter。

我发现 LocalBroadcastManager 的行为类似于 NSNotifcationCenter。我要做的是在套接字流量完成时从静态类向活动发送消息。

[我从这个stackoverflow 答案](https://stackoverflow.com/a/8875292/1119587)中找到了如何使用 LocalBroadcastManager

我的问题是如何将上下文（'this'）设置为我的静态类，否则我没有收到错误“LocalBroadcastManager 类型中的方法 getInstance(Context) 不适用于参数 (MY_STATIC_CLASS)”。

`LocalBroadcastManager.getInstance(this).sendBroadcast(intent);`

如果使用 LocalBroadcastManager 不是将信息从静态类发送到活动的最佳方式，我愿意接受其他方式来完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T17:02:37.077

只需从您调用静态方法的应用程序的活动中传递上下文。

公共静态无效sendBroadcast（上下文上下文）{LocalBroadcastManager.getInstance（上下文）.sendBroadcast（意图）；}

从应用程序或活动

```
StaticClass.sendBroadcast(getApplicationContext()); 
```

或者，如果您需要从静态类调用 if，请在应用程序创建时传递上下文。

```
public final class YourApp extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        YourClass.init(this);
    }

}

public final class YourClass {

    private static Context context;

    public static void init(Context context) {
        YourClass.context = context;
    }

    public static void sendBroadcast() {
        LocalBroadcastManager.getInstance(context).sendBroadcast(intent);
    }

} 
```

# python - Python3.2：安装 MySQL-python 失败并出现错误“No module named ConfigParser”

> ID：15140855
> 
> 赞同：2
> 
> 时间：2013-02-28T16:39:22.960
> 
> 标签：python, pip, python-3.2

我想将 SQLAlchemy 与 MySQL 数据库一起使用。我已经创建了引擎并尝试连接，但出现如下错误。

```
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
Engine = create_engine('mysql+mysqldb://dbuser:pass@localhost/mydb')
Base = declarative_base(Engine) 
```

失败并出现错误：

```
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/connectors/mysqldb.py", line 57, in dbapi
return __import__('MySQLdb')
ImportError: No module named MySQLdb 
```

搜索我发现你必须为 python 安装 MySQLdb 才能很好地使用 MySQL。因此，尝试使用**pip-3.2 或 easy_install-3.2**安装它会失败，如下所示。

```
sudo pip-3.2 install MySQL-python
Downloading/unpacking MySQL-python
Running setup.py egg_info for package MySQL-python
Traceback (most recent call last):
  File "<string>", line 16, in <module>
  File "/tmp/pip-build/MySQL-python/setup.py", line 14, in <module>
    from setup_posix import get_config
  File "setup_posix.py", line 2, in <module>
    from ConfigParser import SafeConfigParser
ImportError: No module named ConfigParser
Complete output from command python setup.py egg_info:
Traceback (most recent call last):
File "<string>", line 16, in <module>
File "/tmp/pip-build/MySQL-python/setup.py", line 14, in <module>
from setup_posix import get_config
 File "setup_posix.py", line 2, in <module>
from ConfigParser import SafeConfigParser
ImportError: No module named ConfigParser 
```

然后我想我必须安装**configparser**所以当我尝试这样做时它也会失败

```
Original exception was:
Traceback (most recent call last):
 File "<string>", line 3, in <module>
 File "/usr/local/lib/python3.2/dist-packages/distribute-0.6.34-py3.2.egg/setuptools/__init__.py", line 2, in <module>
from setuptools.extension import Extension, Library
File "/usr/local/lib/python3.2/dist-packages/distribute-0.6.34-py3.2.egg/setuptools/extension.py", line 2, in <module>
import distutils.core
File "/usr/lib/python3.2/distutils/core.py", line 19, in <module>
from distutils.config import PyPIRCCommand
File "/usr/lib/python3.2/distutils/config.py", line 8, in <module>
from configparser import ConfigParser
 File "configparser.py", line 122 
```

所以，我最初的问题是试图让 Python 与 MySQL 一起工作。但试图解决我无法安装 MySQLdb 的问题。

**编辑** 按照下面@robertklep 的指示继续并安装pymsql3。

```
sudo pip-3.2 install pymysql3 
```

问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:25:11.083

MySQLdb 不支持 Python 3。尝试一个替代方案，比如[PyMySQL](https://github.com/petehunt/PyMySQL/)（[SQLAlchemy 也支持](http://docs.sqlalchemy.org/en/latest/dialects/mysql.html#module-sqlalchemy.dialects.mysql.pymysql)）。

**编辑**：还有[这个项目](https://github.com/clelland/MySQL-for-Python-3)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-29T09:30:29.627

[https://www.pythonanywhere.com/wiki/UsingMySQL](https://www.pythonanywhere.com/wiki/UsingMySQL)

```
pip install --user https://dev.mysql.com/get/Downloads/Connector-Python/mysql-connector-python-1.1.6.tar.gz 
```

然后，更新您的 settings.py 以使用 oracle django 后端“mysql.connector.django”：

```
DATABASES = {
    'default': {
        'ENGINE': 'mysql.connector.django',
         ... 
```

# python - 我可以在查询调用中动态更改 order_by 属性吗？

> ID：15140859
> 
> 赞同：3
> 
> 时间：2013-02-28T16:39:28.417
> 
> 标签：python, sqlalchemy, pyramid

我有以下查询调用：

```
SearchList = (DBSession.query(
    func.count(ExtendedCDR.uniqueid).label("CallCount"),
    func.sum(ExtendedCDR.duration).label("TotalSeconds"),
    ExtendedCDR,ExtensionMap)
    .filter(or_(ExtensionMap.exten == ExtendedCDR.extension,ExtensionMap.prev_exten == ExtendedCDR.extension))
    .filter(between(ExtendedCDR.start,datebegin,dateend))
    .filter(ExtendedCDR.extension.in_(SelectedExtension))
    .group_by(ExtendedCDR.extension)
    .order_by(func.count(ExtendedCDR.uniqueid).desc()))
    .all()
) 
```

我希望能够在调用 .query() 之前定义 order_by 子句，这可能吗？

我尝试按照[这个 stackoverflow 答案](https://stackoverflow.com/a/14887813/940839)为过滤器规范建议的那样做，但我不知道如何创建 filter_group 语法。

从那个帖子：

```
filter_group = list(Column.in_('a','b'),Column.like('%a'))
query = query.filter(and_(*filter_group)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:09:15.650

您使用该调用构建一个 SQL 查询`DBSession.query()`，并且该查询在您调用`.all()`它之前不会执行。

您可以存储中间结果并根据需要添加更多过滤器或其他子句：

```
search =DBSession.query(
    func.count(ExtendedCDR.uniqueid).label("CallCount"),
    func.sum(ExtendedCDR.duration).label("TotalSeconds"),
    ExtendedCDR,ExtensionMap)
search = search.filter(or_(
    ExtensionMap.exten == ExtendedCDR.extension,
    ExtensionMap.prev_exten == ExtendedCDR.extension))
search = search.filter(between(ExtendedCDR.start, datebegin, dateend))
search = search.filter(ExtendedCDR.extension.in_(SelectedExtension))
search = search.group_by(ExtendedCDR.extension)
search = search.order_by(func.count(ExtendedCDR.uniqueid).desc()) 
```

您传递给的值`order_by`可以提前创建：

```
search_order = func.count(ExtendedCDR.uniqueid).desc() 
```

然后像这样使用：

```
search = search.order_by(search_order) 
```

查询完成后，通过调用获取结果`.all()`：

```
SearchList = search.all() 
```

# c++ - 空指针数组

> ID：15140862
> 
> 赞同：-1
> 
> 时间：2013-02-28T16:39:39.450
> 
> 标签：c++

我正在尝试使用 strtok 分解字符串并推入堆栈。可以是整数或“+”或“-”符号。我已经将问题追溯到 push 函数，并且 void ** a 是指向数组的 void 指针。

当我这样做时，它会打印出垃圾值 `cout << getVP(a) << " " ;`

我的 getVP 函数

```
int Stack::getVP (void* a) const
{
return *(static_cast <char *>(a));
} 
```

请不要问我为什么不使用`std::Stack`. 我没有任务这样做，是的，必须按数组进行。

编辑：对我的代码进行了一些更改，现在当我将它存储在 void * temp 中时，它不会打印出正确的输入。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:13:53.093

您的代码到处都是：

此代码不正确 - 评论更正/注释：

```
void Stack::push (char* temp)
{
   a = new void * [MAX]; // Assume a is a member variable of type 'void **' it will
                         // be a memory leak for starters. Why not make a an array
                         // or char *. i.e.
                         // char *a[MAX];
                         // or better string string a[MAX];

   if (!isFull())
   {
      top = top + 1;    
      *a = temp;        // This is incorrect - should be a[top] = temp;
                        // Possibly want to duplicate temp here

   cout << getVP(a) << " " ; // Why make this complicated function
                             // Just cout << a[lop] << endl; would do

    ++a;                     // Not needs and confuses things
   }

} 
```

# cocos2d-iphone - cpShapes 没有碰撞？

> ID：15140864
> 
> 赞同：1
> 
> 时间：2013-02-28T16:39:46.557
> 
> 标签：cocos2d-iphone, game-physics, chipmunk

几天来我一直试图解决这个问题，但我无法弄清楚我的问题是什么。

所以我使用 cocos2d 和 chipmunk-spaceManager 来创建我的游戏。所以我正在做的是创建 4 个 cpShapes 附加到一个 cpBody 并将它们附加到一个 CCSprite。这是我的代码。

```
- (id) helmetInit:(Game*)game {

    cpShape *helmet_1;
    cpShape *helmet_2;
    cpShape *helmet_3;

    cpShape *reference = [game.spaceManager addCircleAt:cpvzero mass:STATIC_MASS radius:2];

    helmet_1 = [game.spaceManager addCircleToBody:reference->body radius:20 offset:cpv(-5, 2)];

    helmet_2 = [game.spaceManager addCircleToBody:reference->body radius:8 offset:cpv(16, -14)];

    helmet_3 = [game.spaceManager addCircleToBody:reference->body radius:8 offset:cpv(8, -14)];

    reference->group    = 1;
//    helmet_1->group     = 1;
//    helmet_2->group     = 1;
//    helmet_3->group     = 1;

    [self initWithFile:@"Helmet.png"];
    [self setShape:reference];
    //[self setBody:reference->body];

    self.spaceManager = game.spaceManager;
    self.autoFreeShapeAndBody = YES;

    gameScreenSize = game.contentSize;

    return self;
} 
```

所以我的问题是我唯一一次遇到任何碰撞是如果我的游戏中的其他形状之一与（参考形状）发生碰撞，该形状是由所有形状共享的身体创建的形状。如果我了解花栗鼠的工作方式，不是每个形状都有碰撞，因为其他形状就像那里一样，甚至不在那里。其他形状直接穿过它们，直到它们与参考形状发生碰撞，这是目前唯一有任何碰撞的形状。我做错了什么还是我不明白花栗鼠的工作方式？

这是我创建的 4 个形状的屏幕截图。![在此处输入图像描述](../Images/d7e4c9aab24c87f6fd7a73313e0dbdbd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:59:35.780

好的，带着很多挫败感，我终于找到了我的问题。在花栗鼠空间开始模拟后，我正在移动一个静态形状。所以我通过设置修复它`smgr.rehashStaticEveryStep = YES;`

# synchronization - 音视频同步的方法

> ID：15140866
> 
> 赞同：1
> 
> 时间：2013-02-28T16:39:54.660
> 
> 标签：synchronization, video-streaming, audio-streaming, kinect-sdk

我想用 Kinect SDK 做一个小型视频会议程序。我成功获得了视频流和音频流。但是，我不知道如何同步这两个流。

有什么方法可以完成这样的任务吗？

# hibernate - 无法自动装配 JpaRepositoryFactoryBean 创建的存储库

> ID：15140867
> 
> 赞同：1
> 
> 时间：2013-02-28T16:40:01.567
> 
> 标签：hibernate, unit-testing, spring-data-jpa

我正在尝试自动装配由存储库工厂 bean 创建的存储库。我需要使用自定义代码覆盖某些存储库的 save() 方法。我在[Spring Data 的介绍](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.introduction)中遵循了工厂 bean 的示例。

但无论我做什么，我都会得到`NoSuchBeanDefinitionException`。

另一方面，“仅接口存储库”的创建和注入就好了。

很可能我在某个地方犯了一个愚蠢的错误。因为这应该是 Spring Data 101。

有人可以给我一个线索，让我知道我还可以尝试使它发挥作用吗？

**规格**

休眠 4.1.9.Final

Spring 3.2.1.RELEASE

Spring Data 1.3.0.RELEASE

JDK 1.6.0_39。

Arch Linux x64

**存储库工厂**

如果实体是 Bar 类型，我将返回一个不同的存储库。否则将应用默认行为。

```
public class RepositoryFactoryBean<R extends JpaRepository<T, I>, T, I extends Serializable>  extends JpaRepositoryFactoryBean<R, T, I> {

  protected RepositoryFactorySupport createRepositoryFactory(EntityManager entityManager) {
    return new MyRepositoryFactory(entityManager);
  }

  private static class MyRepositoryFactory<T, I extends Serializable> extends JpaRepositoryFactory {

    private EntityManager entityManager;

    public MyRepositoryFactory(final EntityManager entityManager) {
      super(entityManager);
      this.entityManager = entityManager;
    }

    protected Object getTargetRepository(final RepositoryMetadata metadata) {
      if (metadata.getDomainType().equals(Bar.class)) {
        return new BarDaoImpl((Class<Bar>) metadata.getDomainType(), entityManager);
      }
      return super.getTargetRepository(metadata);
    }

    protected Class<?> getRepositoryBaseClass(RepositoryMetadata metadata) {
      if (metadata.getDomainType().equals(Bar.class)) {
        return BarDao.class;
      }
      return super.getRepositoryBaseClass(metadata);
    }
  }
} 
```

**存储库类和接口**

```
package com.bar.persistence.dao;

@NoRepositoryBean
public interface BarDao extends JpaRepository<Bar, Long> {
  // no methods - because I want to override save()
}

package com.bar.persistence.dao;

public class BarDaoImpl extends SimpleJpaRepository<Bar, Long> implements BarDao {

  public BarDaoImpl(final Class<Bar> domainClass, final EntityManager em) {
    super(domainClass, em);
  }

  @Override
  public <S extends Bar> S save(final S entity) {
    // some code to perform before actually saving the entity
    entity.setName("intercepted save !");

    // do the save
    return super.save(entity);
  }
} 
```

**注入存储库的测试**

测试失败，因为它找不到要注入的 BarDao 类型的 bean。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/persistence-beans.xml")
@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)
@TransactionConfiguration
public class SpringDataLearningTest {

  @Autowired
  private BarDao barDao;

  @Transactional
  @Test
  public void testModifiedSave() throws Exception {
    final Bar original = createRandomBar();
    final Bar saved = barDao.save(original);
    assertNotNull("No id was assigned to the saved entity", saved.getId());
    assertEquals("intercepted save !", saved.getName());
  }

  private static Bar createRandomBar() {...}
} 
```

**弹簧配置**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:task="http://www.springframework.org/schema/task"
       xmlns:util="http://www.springframework.org/schema/util" xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:data="http://www.springframework.org/schema/data/jpa"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
          http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
          http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.2.xsd
          http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
          http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
          http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

  <!-- Tell Spring Data where to find the interfaces -->
  <data:repositories base-package="com.bar.persistence.dao" factory-class="com.bar.persistence.dao.RepositoryFactoryBean"/>

  <!-- include the definitions of the 'upstream' modules -->
  <import resource="common-beans.xml"/>
  <import resource="io-beans.xml"/>

  <!-- The exception translator service-->
  <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>

  <bean id="jpaTemplate" class="org.springframework.orm.jpa.JpaTemplate">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
  </bean>

  <!-- Use the classic Spring JPA Transaction Manager -->
  <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
  </bean>

  <!-- Describes how to connect to the database -->
  <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="user" value="${database.user.name}"/>
    <property name="password" value="${database.user.password}"/>
    <property name="driverClass" value="${database.driver}"/>
    <property name="jdbcUrl" value="${database.url}"/>
    <property name="initialPoolSize" value="1"/>
    <property name="maxPoolSize" value="${database.max.pool.size}"/>
    <property name="minPoolSize" value="${database.min.pool.size}"/>
    <property name="acquireIncrement" value="1"/>
    <property name="acquireRetryAttempts" value="3"/>
    <property name="checkoutTimeout" value="10000"/>
  </bean>

  <!-- Describes how to create hibernate sessions -->
  <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
    <property name="persistenceUnitName" value="bars"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaProperties">
      <props>
        <prop key="hibernate.cache.region.factory_class">${hibernate.cache.region.factory_class}</prop>
        <prop key="hibernate.cache.use_second_level_cache">${hibernate.second.level.cache}</prop>
        <prop key="hibernate.cache.use_query_cache">${hibernate.query.cache}</prop>
        <prop key="hibernate.generate_statistics">true</prop>
        <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
        <prop key="hibernate.jdbc.batch_size">${hibernate.jdbc.batch_size}</prop>
        <prop key="hibernate.show_sql">${database.show.sql}</prop>
        <prop key="hibernate.dialect">${database.hibernate.dialect}</prop>
        <prop key="hibernate.search.default.directory_provider">filesystem</prop>
        <prop key="hibernate.search.default.indexBase">${hibernate.search.dir}</prop>
      </props>
    </property>
  </bean>
</beans> 
```

**堆栈跟踪**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.bar.persistence.dao.SpringDataLearningTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.bar.persistence.dao.barDao com.bar.persistence.dao.SpringDataLearningTest.barDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.bar.persistence.dao.BarDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:379)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:313)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.bar.persistence.dao.BarDao com.bar.persistence.dao.SpringDataLearningTest.barDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.bar.persistence.dao.BarDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:514)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    ... 29 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.bar.persistence.dao.BarDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:967)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:837)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:486)
    ... 31 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:10:05.423

像这样的东西：

1.  从`@NoRepositoryBean`_`BarDao`
2.  添加`@NoRepositoryBean`BarDaoImpl
3.  移动到`BarDaoImpl`_`BarDao``com.bar.persistence.dao.bar`
4.  添加新`interface BarDaoMyRepository extends BarDao`的 `com.bar.persistence.dao.repository`
5.  放`base-package="com.bar.persistence.dao.repository"`
6.  注入`BarDaoMyRepository`

您使用方法向每个扩展的存储库添加一些功能`BarDao`（因此您需要扩展它并可能添加一些声明性方法）。如果您只想向一个存储库添加功能 - 请参阅

> [http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.introduction](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.introduction) 1.4.1 向单个存储库添加行为

# c# - 让 WebService 只返回纯文本 JSON？

> ID：15140870
> 
> 赞同：0
> 
> 时间：2013-02-28T16:40:14.897
> 
> 标签：c#, asp.net, json, web-services

我正在尝试使用 Web 服务返回 FullCallendar Resource 请求的资源的 json 列表：

这是网络服务类：

```
/// <summary>
/// Summary description for CalendarServices
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class CalendarServices : System.Web.Services.WebService
{
    public CalendarServices()
    {
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string GetEmployees()
    {

        List<object> eventList = new List<object>();
        var emps = ResourceManager.GetAllEmployees();
        foreach (Employee e in emps)
        {
            eventList.Add(
           new
           {
               id = e.EmployeID.ToString(),
               name = e.EmployeName
           }
       );

        }

        JavaScriptSerializer js = new JavaScriptSerializer();
        string strJSON = js.Serialize(eventList);
        return strJSON;
    }
} 
```

这里是它的名称：

```
var calendar = $('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: ''
    },
    defaultView: 'resourceNextWeeks',
    numberOfWeeks: 5,
    weekends: false,
    editable: true,
    selectable: true,
    minTime: 8,
    maxTime: 16,
    refetchResources: true,
    selectHelper: true,
    resources: 'CalendarServices.asmx/GetEmployees'
        ,
    events: [
        { 
```

我不确定为什么这不起作用。也许我不懂网络服务？

在这个例子中，他们调用 resources.php 来回应它。

基本上我想要的是如果我去 CalendarServices.asmx/GetEmployees

我想在我的浏览器中看到这个：

```
[
{
"name":"Resource 2",
"id":"resource2"
},
{
"name":"Resource 1",
"id":"resource1"}
] 
```

只需纯文本即可。目前，如果我在浏览器中尝试此 url，它会崩溃。

我能做些什么？

谢谢

迷恋;撞车;崩溃：

```
Request format is unrecognized for URL unexpectedly ending in '/GetEmployees'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Request format is unrecognized for URL unexpectedly ending in '/GetEmployees'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidOperationException: Request format is unrecognized for URL unexpectedly ending in '/GetEmployees'.]
   System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response) +489333
   System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext context, String verb, String url, String filePath) +212
   System.Web.Script.Services.ScriptHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String pathTranslated) +47
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +226
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +145
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:28:23.730

您可以签入提琴手以查看您的请求类型是 POST 还是 GET，您可能需要在代码中添加一些额外的内容。IE

```
[WebInvoke(Method="POST",ResponseFormat=WebMessageFormat.Json)] 
```

# c# - 用于 IEnumerable/List 的 LINQ 中的组合操作？

> ID：15140871
> 
> 赞同：0
> 
> 时间：2013-02-28T16:40:18.297
> 
> 标签：c#, linq

我想从与特定条件匹配的目录中删除每个文件，但我也希望从我的列表（或 IEnumerable）中删除这些项目（因为我想稍后使用该列表并且不希望其中有任何项目文件系统上不再存在！）

一种简单的方法是将与特定条件匹配的每个项目收集到一个列表中，然后遍历临时列表并从原始列表中删除文件和列表项。但我很高兴看到一个解决方案，其中两个任务都在一个步骤中完成，而无需先创建过滤的临时列表。

```
// non-sense code example
lstFiles.ForEach(x => x.CreationTime < __now.AddDays(maxAge * -1), x => x.Delete())
    .Remove(x);
// or...
newList/IEnumerable = lstFiles.Where(x => x.CreationTime < __now.AddDays(maxAge * -1), x.Delete()).RemoveAll(x) 
```

**替代问题：** 我可以列出文件列表，其中添加的每个项目（不）符合条件并且其他所有项目都被删除？像附加的东西`.WhereNot(x => x.Delete())`？

或者...

```
IEnumerable<FileInfo> cleanedList =
    (from files in directory.EnumerateFiles()
     where files.CreationTime < __now.AddDays(maxAge * -1)
     wherenot files.Delete()
     select files) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:24:06.653

只需让您的`Delete()`方法返回一个布尔值，然后您就可以使用：

```
lstFiles.RemoveAll(x => x.CreationTime < _now.AddDays(maxAge * -1) && x.Delete()); 
```

如果 && 语句的第一部分失败，则不会评估第二部分，因此删除只会发生在符合条件的文件上。

这还有一个额外的好处，即当删除失败时，它不会从您的列表中删除该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:09:48.087

您可以使用不同的方法：您可以使用 ，而不是使用`List`，`ObservableCollection`将处理程序附加到事件`CollectionChanged`，并且每次删除项目时都会删除关联的文件。

```
collection.CollectionChanged += ContentCollectionChanged;
[...]
public void ContentCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    if (e.Action == NotifyCollectionChangedAction.Remove)
    {
        foreach(var file in e.OldItems)
        {
            //Removed file
        }
    }
} 
```

这样，您只需处理要在集合中删除的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:57:28.587

如果您想在保持链接操作的同时执行多个操作，您可以使用 Microsoft 的[交互式扩展 (IX)](https://www.nuget.org/packages/Ix_Experimental-Main)以及 .Do 和 .ForEach 扩展。

```
lstFiles
   .Where(x => x.CreationTime < __now.AddDays(maxAge * -1))
   .Do(x => x.DoThing1())
   .Do(x => x.DoThing2())
   .ForEach(x => x.Remove()); 
```

# jsf-2 - 客户端->服务器编码中断

> ID：15140878
> 
> 赞同：0
> 
> 时间：2013-02-28T16:40:30.990
> 
> 标签：jsf-2, entity

我在（我认为是）Entity 中进行编码时遇到问题。更详细地说，我有一个复合组件，它负责就地编辑——用户点击文本，点击保存，数据保存在数据库中。问题是当用户输入一些非英语字符（变音字符？）编码中断时。例如，如果用户将`ą`在实体中输入波兰字符，我会得到类似的东西`ºÄ`。数据存储在 mysql 数据库中，其中编码设置为 UTF-8，显示数据的页面也以 UTF-8 编码。我检查了从客户端（浏览器）向服务器发送数据后出现的问题，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:53:05.980

我终于找到了解决方案。我所要做的就是将字符编码过滤器添加到 web.xml。

```
<filter>
    <filter-name>SetCharacterEncoding</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
    <filter-mapping>
    <filter-name>SetCharacterEncoding</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# grails - 更新未获取“更新”数据

> ID：15140879
> 
> 赞同：0
> 
> 时间：2013-02-28T16:40:33.733
> 
> 标签：grails

我正在更新页面中的数据以及调试时

```
def VariantInstance = Variant.get(params.id) 
```

并查看 VariantInstance，我更改的数据保持不变。它不应该获取新数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:42:19.510

不是基于您的代码。如果您所做的只是从数据库中获取现有数据，您认为它将如何获取新数据？

```
def VariantInstance = Variant.get(params.id)
VariantInstance.properties = params 
```

# c++ - 如何确定仅给定相应 id 的 GL 帧缓冲区对象的宽度和高度

> ID：15140883
> 
> 赞同：4
> 
> 时间：2013-02-28T16:40:42.300
> 
> 标签：c++, opengl, opengl-3

我想确定帧缓冲区对象的大小（宽度、高度）。

我通过创建了一个帧缓冲区对象

```
// create the FBO. 
glGenFramebuffers(1, &fboId); 
```

仅给定帧缓冲区对象 id ( )，如何获取第一个颜色附件的大小`fboId`？这是可能的还是我必须将颜色附件的大小存储在外部变量中以便以后知道 FBO 的大小？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-03T13:53:38.810

您的问题有些困惑，因为您要求两种不同的东西。

这是一个简单的问题：

> 仅给定帧缓冲区对象 id (fboId)，如何获取第一个颜色附件的大小？

这很简单：获取附加到该附件的纹理/渲染缓冲区，获取附加的 mipmap 级别和数组层，然后查询纹理/渲染缓冲区的大小。

前两个步骤是[使用`glGetFramebufferAttachmentParameter`](https://www.opengl.org/wiki/GLAPI/glGetFramebufferAttachmentParameter)（注意关键字“附件”）完成的`GL_COLOR_ATTACHMENT0`。您查询`GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE`以获取它是渲染缓冲区还是纹理。您可以使用`GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME`.

如果对象是渲染缓冲区，则可以绑定渲染缓冲区并用于[`glGetRenderbufferParameter`](https://www.opengl.org/wiki/GLAPI/glGetRenderbufferParameter)获取渲染缓冲区`GL_RENDERBUFFER_WIDTH`和`GL_RENDERBUFFER_HEIGHT`.

如果对象是纹理，则需要做更多的工作。您需要查询附件参数`GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL`以获取 mipmap 级别。

当然，现在你需要知道如何绑定它。如果您使用的是 4.4 之前的 OpenGL 版本或没有某些扩展，那么这很复杂。看，您需要知道要使用哪种[纹理目标类型](https://www.opengl.org/wiki/Texture#Theory)。虽然这看起来很愚蠢和烦人，但仅从纹理对象名称来确定目标的唯一方法是……尝试一切。遍历每个目标并检查`glGetError`。`GL_INVALID_OPERATION` *没有*返回的那个是正确的。

如果您有可用的 GL 4.4 或[ARB_multi_bind](https://www.opengl.org/registry/specs/ARB/multi_bind.txt)，则可以[使用`glBindTextures`](https://www.opengl.org/wiki/Sampler_%28GLSL%29#Multibind_and_textures)（注意“s”），这不需要您指定目标。如果您有 4.5 或[ARB_direct_state_access](https://www.opengl.org/registry/specs/ARB/direct_state_access.txt)，则根本不需要绑定纹理。DSA 风格的函数不需要纹理目标，它还提供了`glBindTextureUnit`将纹理绑定到其自然内部目标的 。

一旦你绑定了纹理并且它是 mipmap 级别，你就[可以`glGetTexLevelParameter`](https://www.opengl.org/wiki/GLAPI/glGetTexLevelParameter)用来查询那个级别的`GL_TEXTURE_WIDTH`and `GL_TEXTURE_HEIGHT`。

现在，这是一个*简单*的问题。难题是您的标题要求什么：

> 我想确定帧缓冲区对象的大小（宽度、高度）。

FBO 的可渲染区域的*大小*与`GL_COLOR_ATTACHMENT0`. FBO 的可渲染区域是附加到 FBO 的所有图像的所有尺寸的交集。

除非你对这个 FBO 有特殊的了解，否则你不能假设 FBO 只包含一个图像或者所有的图像都具有相同的大小（如果你对 FBO 有特殊的了解，那么坦率地说你*也*应该有特殊的知道它有多大）。因此，您需要对*每个*附件重复上述过程（如果类型为`GL_NONE`，则不附加任何内容）。然后取返回值的交集（即：最小的宽度和高度）。

一般来说，您不必询问您创建的 FBO 有多大。就像你不必问纹理它们有多大一样。你创造了它们；根据定义，您知道它们有多大。您将它们放在 FBO 中，因此您再次知道它有多大。

# delphi - 禁用 Speedstep 功能

> ID：15140884
> 
> 赞同：2
> 
> 时间：2013-02-28T16:40:48.033
> 
> 标签：delphi, cpu-speed

我遇到了一些代码的情况，我注意到现代处理器上[的速度步进功能](http://en.wikipedia.org/wiki/Dynamic_frequency_scaling)可能是一个问题。虽然我想我可以创建一个线程来尝试修复它（我发现有些事情表明这根本不是一个好的解决方案），但我试图找到更优雅的东西来禁用该功能，同时其他代码正在运行。现在我做了一些研究，发现了[这个](https://stackoverflow.com/questions/3975551/how-to-disable-dynamic-frequency-scaling/3976311#comment21254764_3976311)，这有助于回答这个问题，并让我想出一些代码。

我的问题是，作为一个预算有限的狂热程序员，我不能跑出去购买具有此功能的计算机来测试它是否真的有效。我*尽可能地测试了它们*。所以，我想知道是否有人拥有具有该功能的计算机可以告诉我他们是否真的可以工作？

```
// following code uses the definitions out of the JEDI project.
function GetCPUThrottle(var min, max: byte): Boolean;
// get CPU throttling info.
// min - minimum CPU throttle value, in % (1-100)
// max - maximum CPU throttle value, in % (1-100)
// Result - does CPU support throttling?
var
  PowerCap: TSystemPowerCapabilities;
  Status: NTSTATUS;
begin
  Result := false;
  Status := CallNtPowerInformation(SystemPowerCapabilities, nil, 0, @PowerCap,
            SizeOf(PowerCap));
  if Status = STATUS_SUCCESS then
    begin
      Result := PowerCap.ProcessorThrottle;
      min := PowerCap.ProcessorMinThrottle;
      max := PowerCap.ProcessorMaxThrottle;
    end;
end;

function SetCPUThrottle(min, max: byte): Boolean;
  // set CPU throttling info.
  // min - minimum CPU throttle value, in % (1-100)
  // max - maximum CPU throttle value, in % (1-100)
  // Result - does CPU support throttling, AND was the values set?
var
  PowerCap: TSystemPowerCapabilities;
  Status: NTSTATUS;
begin
  Result := false;
  Status := CallNtPowerInformation(SystemPowerCapabilities, nil, 0, @PowerCap,
            SizeOf(PowerCap));
  if Status = STATUS_SUCCESS then
    begin
      if PowerCap.ProcessorThrottle then
        begin
          PowerCap.ProcessorMinThrottle := min;
          PowerCap.ProcessorMaxThrottle := max;
          Status :=  CallNtPowerInformation(SystemPowerCapabilities, @PowerCap,
              SizeOf(PowerCap), nil, 0);
          if Status = STATUS_SUCCESS then
            Result := true;
        end;
    end;
end; 
```

# file - Batch_比较两个同名文件，并多次删除较大的文件

> ID：15140885
> 
> 赞同：0
> 
> 时间：2013-02-28T16:40:51.187
> 
> 标签：file, batch-file, comparison, filesize, delete-file

我正在寻找一个漂亮的脚本，它可以在我提供多个文件时比较文件大小，然后删除较大的文件。

我有一组 JPG 和 PNG 格式的相同图像文件，我只想为每个单独的图像保留两者中较小的一个。每个图像的名称相似，例如 image-01.jpg 和 image-01.png 是成对的，image-02.jpg 和 image-02.png 是成对的，依此类推。某些图像仅以 PNG 形式存在（即 image-03.png 存在，但 image-03.jpg 不存在），不应删除这些图像或将其与“下一张图像”进行比较。

名称可能会有所不同，但一组通常是非常统一的。因为一次要比较数百个文件，如果我只需要提供两个和两个图像，那么手动比较它们会更快，这就是我目前所做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:41:15.557

我得到了一些帮助，并在我在之前的评论中发布的代码中添加了一行。我还稍微完善了代码。

以下代码适用于我的问题。只需将文件拖放到代码中，*只要两个文件具有相同的名称，****它就会删除最大的文件***。请注意，文件需要按排序顺序传递才能正常工作。我不知道如何为参数编写有效的排序算法。这几乎不是我使用的问题，但如果有人想为挑战写一个，我会很高兴看到它。

 *```
@echo off

:BEGIN
if "%~2" == "" goto END
echo Comparing %~n1 and %~n2...
if not "%~n1" == "%~n2" ( echo Names don't match. ) && goto NOMATCH
echo Names match! Comparing filesize...
if %~z1 gtr %~z2 (
    ( echo *** Keeping %~2 ^(%~z2 bytes^) *** )
    ( echo *** Deleting %~1 ^(%~z1 bytes^) *** )
    del "%~1".
) else (
    ( echo *** Keeping %~1 ^(%~z1 bytes^) *** )
    ( echo *** Deleting %~2 ^(%~z2 bytes^) *** )
    del "%~2".
)
:NOMATCH
echo.
shift
goto BEGIN
:END
pause 
```*

# python - 避免 Python 中的长行代码

> ID：15140893
> 
> 赞同：6
> 
> 时间：2013-02-28T16:41:22.273
> 
> 标签：python, python-2.7, newline, backslash

我尝试将我的代码保持在 80 个字符以内，以便在我设置的标准窗口中并排查看。在这样做时，我有一个 Python v2.7 结构，如下所示：

```
subseq_id_to_intervals_dict, subseq_id_to_ccid_formats_dict, subseq_id_to_min_max_count_dict = map_cases(opts,
                                            format_to_ccid_funcs,
                                            sys.stdin) 
```

所以我把它分解成这样：

```
subseq_id_to_intervals_dict,
subseq_id_to_ccid_formats_dict,
subseq_id_to_min_max_count_dict = map_cases(opts,
                                            format_to_ccid_funcs,
                                            sys.stdin) 
```

但这导致了错误

> NameError：未定义名称“subseq_id_to_intervals_dict”

直到我添加反斜杠：

```
subseq_id_to_intervals_dict,        \
subseq_id_to_ccid_formats_dict,     \
subseq_id_to_min_max_count_dict = map_cases(opts,
                                            format_to_ccid_funcs,
                                            sys.stdin) 
```

为什么行尾的逗号不能充分告知 Python 以理解语法并且不会出错？有没有更清洁的方法来做到这一点而没有反斜杠？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T16:42:50.960

您可以将作业的左侧放入括号中：

```
(subseq_id_to_intervals_dict,
 subseq_id_to_ccid_formats_dict,
 subseq_id_to_min_max_count_dict) = map_cases(opts,
                                            format_to_ccid_funcs,
                                            sys.stdin) 
```

左边已经是一个元组——括号只是暗示行继续。线

```
subseq_id_to_intervals_dict, 
```

并不意味着行继续，因为它是一个完整的语句——它是一个具有单个元素的元组。

# .net - .net 系统独立字体大小

> ID：15140901
> 
> 赞同：1
> 
> 时间：2013-02-28T16:41:52.320
> 
> 标签：.net, windows, fonts, size

我有一个带有多个文本框的自定义 Windows 窗体 .net 窗口。文本框始终具有相同的字体大小（courier new 10）。有硬编码框调整逻辑大小，仅当字体大小保持不变时才有效。

由于某种原因，在一台机器上，字体大小是不同的。我认为这取决于一些自定义系统字体设置。（windows 7机器）

那可能吗？您可以“覆盖”字体的显示方式吗？如果是，有什么办法可以避免这种行为？我只是希望 texboxes 具有相同的字体大小。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:49:41.360

```
Is that possible? Can you "override" how a font is displayed? 
```

我认为这是不可能的。看看这个答案：[https ://stackoverflow.com/a/1944813/1758762](https://stackoverflow.com/a/1944813/1758762)

在 Windows 中，在桌面设置下，您可以选择在不更改分辨率的情况下增加屏幕字体大小。如果您增加屏幕字体大小，那么每像素点会发生变化，这可以测量不同机器上相同文本的不同像素大小。

这是因为老年人无法阅读较小的字体，这就是为什么他们可以在桌面设置中增加字体大小......

# c# - 将列表中的两个对象聚合为一个

> ID：15140903
> 
> 赞同：0
> 
> 时间：2013-02-28T16:41:52.823
> 
> 标签：c#, linq

我有一个由对象组成的列表。

```
List<Person> where 

class Person
{
    enum id;
    string name;
    int goals;

} 
```

记录 1：`{enum.1,"Mark",20}`
记录 2：`{enum.1,"Mark",7 }`

最终结果：只有一条记录`{enum.1,"Mark",27}`

我在具有不同目标的数据库中多次记录同一个人的记录。
我知道我可以使用 SQL 函数。
我正在尝试查找 linq 查询。

我想聚合两个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:44:37.437

```
from person in PersonList
group person by new { id = person.id, name = person.name } into grouping
select new Person
{
    id = grouping.Key.id,
    name = grouping.Key.name,
    goals = grouping.Sum(x => x.goals)
} 
```

分组会起作用。

# php - 从另一个类访问一个类的功能

> ID：15140904
> 
> 赞同：0
> 
> 时间：2013-02-28T16:41:53.343
> 
> 标签：php, class, mysqli

正如标题所说，我的情况如下：

```
require_once("connect.php") //database connection file

class one {

    private $mysqli;

    function __construct ($dbi) {
        $this -> mysqli = $dbi;
    }

    function one {
        // ... function using things like $this -> mysqli -> prepare and so on...
    }
} 
```

并且，在同一个文件中：

```
class two {
    private $mysqli;

    function __construct ($dbi) {
        $this -> mysqli = $dbi;
    }

    function two {
        // here I need to access the function "one" of the class "one"
        // If i do something like $one = new one ($mysqli) I get an error on the __construct
    }
} 
```

我真的很生气，但我相信这并不难，因为我是 PHP 中 OOP 的初学者。希望那里的人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:50:57.053

忽略mysqli问题不应该是这样的吗

```
$one = new one ($this->mysqli);

$two = new two($this->mysqli);
$two->two($one->one); // call pass function from one into two 
```

你会改变你的声明 2 是这样的

```
function two($functiontorun) { 
```

现在我在 php 中也不是 OO 专业人士（在非乱序非编译语言中看不到这一点），但我相信你也可以通过将类 2 作为类 1 的扩展来解决这个问题。或者，如果您将您的第 1 类公开并公开第 1 类功能，然后只要`new one`事先使用 etc 对第 1 类进行实例化，那么您应该在您的函数内部有两个可以调用`$one->one();` 但我不是 100% 的那个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:51:56.837

虽然我不太确定我是否理解您的问题（因为所有 MySQL 的东西），但可以使用`public`关键字访问方法（= 对象中的函数）：

```
 public function functionName( $parameter ) {
        \\ function stuff
    } 
```

# hadoop - 如何在 Ubuntu (12.0.4)-32 位上安装 cloudera manager

> ID：15140906
> 
> 赞同：1
> 
> 时间：2013-02-28T16:41:56.537
> 
> 标签：hadoop, bigdata, cloudera

我有一个 32 位的 Ubuntu 版本，似乎最新的 Cloudera Manager 只支持 64 位。有人在 Ubuntu (12.0.4) 32 位上安装了 CDH4 和云时代管理器吗？请告诉我如何做同样的事情。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-10T08:10:06.807

我相信 32 位 Ubuntu 不支持 CDH4。32 位 RHEL 6.2 支持 32 位

# zend-framework - Zend_Paginator 倒序

> ID：15140907
> 
> 赞同：0
> 
> 时间：2013-02-28T16:42:01.210
> 
> 标签：zend-framework, zend-paginator

我有一个关于 Zend_Paginator 的问题。默认页面如下：

`<Previous 1 2 3 4 5 6 7 8 ... Next>`

这可能有类似的订单吗

`<Previous 8 7 6 5 4 3 2 ... Next>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:03:04.200

无需弄乱分页器类，您可以使用[分页器控制脚本控制](http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html#zend.paginator.usage.rendering.example-controls)页面的显示方式。

在您的控制脚本中，您将找到如下代码：

```
<!--Number page links-->
 <td>|
      <?php foreach ($this->pagesInRange as $page):?>
            <?php if ($page != $this->current) :?>
                  <a href="<?php echo $this->url(array_merge($params, array('page' => $page)))?>">
                  <?php echo $page?></a> |
            <?php else:?>
                  <?php echo $page?> |
       <?php
             endif;
             endforeach;
       ?>
 </td> 
```

如果您愿意，您可以在此处颠倒页面的顺序。只需使用普通的 PHP 数组函数来获得您想要的页面顺序。

# c# - 从派生而不是基调用的虚拟方法

> ID：15140911
> 
> 赞同：5
> 
> 时间：2013-02-28T16:42:14.743
> 
> 标签：c#, virtual, base, derived-class

有人可以向我解释为什么当我将类转换为基类时会调用覆盖的方法：

```
 class Base
    {
        public virtual void VirtualMethod()
        {
            Console.WriteLine("Base virtual method");
        }
    }

    sealed class Derived : Base
    {
        public override void VirtualMethod()
        {
            Console.WriteLine("Overriden method");
        }
    }

    static void Main(String[] args)
    {
        Derived d = new Derived();
        ((Base)d).VirtualMethod();
    } 
```

我的意思是这段代码打印：

```
Overriden method 
```

并不是

```
Base virtual method 
```

它是运行时还是编译时的未来？

我知道我可以通过调用从派生中调用 Base 的虚拟方法，`base.VirtualMethod()`但我可以从外部调用它吗？（例如来自`Main`或其他班级）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:43:57.280

方法实现是根据对象的*执行时间*类型选择的。这是其中的很大一部分。任何人都可以使用：

```
public void Foo(Base b)
{
    b.VirtualMethod();
} 
```

...并且不需要知道或关心执行类型是什么，因为多态会处理它。

> 我知道我可以通过调用 base.VirtualMethod() 从派生中调用 Base 的虚拟方法，但我可以从外部调用它吗？

不（至少，在非虚拟地调用虚拟方法时并非没有一些可怕的黑客行为），这是封装的有意部分。覆盖实现有效地替换了该对象的原始实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:03:36.413

如果你想访问你不应该使用覆盖的基本实现，你应该使用新的。覆盖覆盖任何父实现，新的“隐藏”父实现，以便您可以通过转换为父对象然后调用方法来访问实现。

```
internal class Program
{
    private static void Main(string[] args)
    {
        Derived d = new Derived();
        d.VirtualMethod();
        ((Base) d).VirtualMethod();

        Console.ReadLine();
    }

    private class Base
    {
        public virtual void VirtualMethod()
        {
            Console.WriteLine("Base virtual method");
        }
    }

    private sealed class Derived : Base
    {
        public new void VirtualMethod()
        {
            Console.WriteLine("Overriden method");
        }
    }
} 
```

这将输出：

> *重写方法
> 基本虚方法*

# html - 元素后面的下拉菜单

> ID：15140916
> 
> 赞同：0
> 
> 时间：2013-02-28T16:42:22.333
> 
> 标签：html, css

我的菜单有点奇怪

1 屏幕截图 1 显示它工作正常 2\. 屏幕截图 2 显示它有问题

![在此处输入图像描述](../Images/8f525ac4cfa08b9221e8893cf54a30e5.png)

![在此处输入图像描述](../Images/6e98cb40bdd7f882588baa60041555d1.png)

这是代码请帮我我卡住了

```
#navigation { margin-top: -17px; }
.region-nav-main .content {background:#6f0d1c; height:28px; color:#fff; width:auto; float:right; font:11px 'Trebuchet MS', Arial, Helvetica, sans-serif;}
.region-nav-main .content ul li {float:left; list-style:none; display:inline; position:relative; z-index:997; padding:0; margin:0;}
.region-nav-main .content ul li a {color:#fff; text-decoration:none; padding:0 10px; display:block; line-height:28px;}
.region-nav-main .content ul li a:hover {background:#242121;}

.region-nav-main .content  ul li.expanded a {background:url(../images/parent-dd.gif) right 12px no-repeat; padding:0 22px 0 10px;}
.region-nav-main .content  ul li a.parent:hover, .region-nav-main .content ul li.hover a, .region-nav-main .content ul li.hover a:hover, .region-nav-main .content  ul li.expanded a.active {background:#242121 url(../images/parent-dd.gif) right -82px no-repeat;}
.region-nav-main .content  ul li a.active {background:#242121}
.region-nav-main .content  ul li.expanded a.active-trail {background: #242121 url(../images/parent-dd.gif) right -82px no-repeat;}
.region-nav-main .content  ul li.expanded li a {background:none;}
.region-nav-main .content ul li.hover li a:hover {background:#3a3a3a none;}

.region-nav-main .content ul li ul {display:none; position:absolute; top:28px; left:0; z-index:998;}
.region-nav-main .content ul li ul li {background:#242121; border-bottom:1px solid #383535; display:block; float:none; color:#868686; float:left; clear:both;z-index:998;}
.region-nav-main .content ul li ul li.last {border:0 none;z-index:991;}

.region-nav-main .content ul li ul li:hover ul{ display:block;}
.region-nav-main .content ul li ul li a {color:#868686; background:none; width:135px;}
.region-nav-main .content ul li ul li a:hover {background:#3a3a3a; color:#fff;}

.region-nav-main .content ul li ul li ul{left:144px; top:-2px; display:none;} 
```

我试过以下没有运气

```
.region-nav-main .content ul li{z-index:990 !important;}

.region-nav-main .content ul li ul {z-index:995 !important;}
.region-nav-main .content ul li ul li {z-index:995 !important;}

.region-nav-main .content ul li ul li ul {z-index:999 !important;}
.region-nav-main .content ul li ul li ul li {z-index:999 !important;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:00:00.723

好的，如果有人感兴趣，我想出了解决方案

这些是我的菜单唯一设置的 z-index

```
.region-nav-main .content ul li ul {z-index:985 !important;}
.region-nav-main .content ul li ul li ul {z-index:977 !important;} 
```

我完全困惑为什么这是有效的，但它在 safari、opera、chrome 和 IE 中有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:46:43.750

您`z-index`的 at`.region-nav-main .content ul li ul li.last`低于您的父母`.region-nav-main .content ul li`，因此由于堆栈顺序而使其隐藏。您需要将更高的`z-index`值设置为`.region-nav-main .content ul li ul li.last`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:51:20.170

正如 EmCo 所说，这似乎是一个 z-index 问题。看起来嵌套的 li 显示良好的 z-index 为 998，而 li.last 的 z-index 为 991。也许将 li.last 更改为 z-index 为 998 可以解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:19:44.550

li.last 不需要自己的 z-index 值，因为它会从该级别 li 的先前样式继承它。只需从 li.last 样式中完全删除 z-index ，它应该可以工作。

# ios - 无法以编程方式设置数据源，获取 EXC_BAD_ACCESS

> ID：15140921
> 
> 赞同：3
> 
> 时间：2013-02-28T16:42:37.233
> 
> 标签：ios, objective-c, uitableview, datasource

我正在尝试以编程方式为我的表视图设置数据源，我创建了一个类，它实现了协议（我不知道 implements 是否是正确的词，OC 新手，我来自 Java）`UITableViewDataSource`协议。

`@interface PlaylistController : NSObject <UITableViewDataSource, UITableViewDelegate>`

在我`ViewController`的`viewDidLoad`方法中，我尝试分配数据源，但我得到了`EXC_BAD_ACCESS`.

`[playlistView setDataSource:[[PlaylistController alloc] initWithPlaylist:playlist]];`

我不知道为什么？

从阅读here（SO）我了解到它要么是强制转换问题（但我确实实现了所需的协议），要么是内存管理问题（但我使用的是ARC，根本没有触及发布）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:46:48.133

代替

```
[playlistView setDataSource:[[PlaylistController alloc] initWithPlaylist:playlist]]; 
```

采用

```
[playlistView setDataSource:self]; 
```

原因：

您尝试将 DataSource 设置为`autorelease`. 它被释放，你得到错误。

您应该将 dataSource 设置为`self`，以便它指向该类的当前实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:45:58.623

我在任何地方都没有看到 UITableView 对象集。

确保在 Nib 文件中创建并链接到 UITableView 的 IBOutlet。

```
@interface PlaylistController : NSObject <UITableViewDataSource, UITableViewDelegate>

IBOutlet UITableView* tableView;

@end

Then in your viewDidLoad you can do:

[tableView setDataSource:self] 
```

# wordpress - Sitepress 多语言 CMS 未将某些文本转换为其他语言

> ID：15140930
> 
> 赞同：0
> 
> 时间：2013-02-28T16:43:05.500
> 
> 标签：wordpress

我在这个网站[http://wplt.mangoagency.com/](http://wplt.mangoagency.com/)上使用了 sitepress 多语言 cms 插件，它工作正常，但是当我更改语言时，很少有文本不能翻译成其他语言，就像页脚版权文本一样，页脚小部件和标语有什么解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:40:43.897

不幸的是，如果插件不是这样设计的，你就不能在不更改代码的情况下先天修复它。

在插件内部有一个用于翻译文本的函数。如果此函数未用于代码的某些部分，则它不会显示为已翻译。

参考：[http ://codex.wordpress.org/Translating_WordPress](http://codex.wordpress.org/Translating_WordPress)

在代码中，您会注意到部分是文本但使用：

```
<?php echo _e('Page Text');?>
<?php echo __('Page Text');?>
<?php $text = _e( 'Page Text', 'domain_or_plugin_name' ); ?> 
<?php $text = __( 'Page Text', 'domain_or_plugin_name' ); ?> 
```

您可以编辑所有代码以使用翻译更新所有部分，但如果在创建期间未完成，则没有“设置”可以从 Wordpress 中真正修复它。

# .net - 在不以管理员身份启动 Visual Studio 的情况下运行 LocalSTS

> ID：15140931
> 
> 赞同：2
> 
> 时间：2013-02-28T16:43:05.500
> 
> 标签：.net, visual-studio, wif

需要哪些步骤才能让 Visual Studio 在不以管理员身份运行的情况下启动 LocalSTS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:49:23.610

从命令行（以管理员身份运行）

```
Netsh http add urlacl url=http://+:15306/wsFederationSTS/ user={user name}
Netsh http add urlacl url=http://+:15306/wsTrustSTS/ user={user name} 
```

更改端口号以反映 LocalSTS 错误对话框中显示的端口（示例如下，在我的情况下为 15306）并指定运行 Visual Studio 的用户。

![在此处输入图像描述](../Images/fb9c21a1a90baf7061b77b97e199c7dd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:25:25.293

它不是为作为标准用户运行而设计的。很遗憾。

# java - 使用 EventReader 解析 XML，存储单独的字符串

> ID：15140932
> 
> 赞同：1
> 
> 时间：2013-02-28T16:43:13.160
> 
> 标签：java, xml, parsing

我有以下 XML（为简单起见而简化）

```
<object class="domain">
    <property>
        <value>2</value>
    </property>
</object>
<object class="domain">
    <property>
        <value>10</value>
    </property>
</object>
<object class="domain">
    <object class="ID">
    </object>
    <object class="Extranet">
    </object>
</object> 
```

如您所见，我有几个称为对象的 XML 标记。我想要做的是遍历 XML（当前使用 StAX）并将每个单独的对象保存为单独的字符串（除非使用 XML 时有更好的选择）在字符串的 HashSet 中。我可以使用以下命令轻松找到开始标签...

```
case XMLStreamConstants.START_ELEMENT:
                StartElement startElement = (StartElement) event;
                QName elementStartName = startElement.getName();

                if(elementStartName.getLocalPart() == "object"){
                    for (Iterator it = startElement.getAttributes(); it.hasNext();) {
                        Attribute attr = (Attribute) it.next();
                        String currentAttr = attr.getName().toString();
                        String attrValue = attr.getValue();

                        if(attrValue.contains("domain") && currentAttr == "class"){
                            System.out.println(attrValue);
                        }
                    }
                }

                break; 
```

但我不知道如何开始阅读两者之间的那段代码`<object class="domain">`并将其存储为字符串，最终以`XMLStreamConstants.END_ELEMENT`. 我知道这是非常具体的并且缺少许多细节，但是如果有人有任何高层次的想法，将不胜感激。

# sql - 如何将两个表的外连接左连接到第三个表

> ID：15140933
> 
> 赞同：0
> 
> 时间：2013-02-28T16:43:15.097
> 
> 标签：sql, db2, outer-join

我有三个表 AB 和 C（最后一个是我想要的结果）

```
A.id        B.age         C.id C.age      result id  age
   1            5            1     5              1    5
   2            6            2     0           null null
   3            7            0     7           null null
   4            8            4     8              4    8
   5            9            5     9              5    9 
```

我想做一个从 A 和 B 到 C 的外部连接，这样我就得到了上面的结果。如果 C 中缺少任何一列，它应该产生 null。如果我进行内部连接：

```
select a.id, b.age where a.id = c.id and b.age = c.age 
```

我会取回 3 行。我还想要 5 行回来。我正在使用 IBM db2 v9 的东西。我试图弄清楚如何使用较新的左外连接语法来实现它，但我没有看到它。我可以看到如何在旧的 sybase *= 外连接语法中做到这一点，但我看不到如何以新的方式做到这一点。这甚至可能吗？

有人建议将每个结果的一半合并。在我看来，工会只会弄得一团糟，我应该能够从两个表中进行左外连接。

帮助？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:49:07.407

你是这个意思吗？

```
SELECT a.id, b.age
FROM a
CROSS JOIN b
LEFT OUTER JOIN c on a.id = c.id AND b.age = c.age 
```

您的问题不清楚您是交叉加入 A 和 B 还是 B 是否也保持连接：

```
SELECT a.id, b.age
FROM a
LEFT OUTER JOIN c on a.id = c.id
LEFT OUTER JOIN b on b.age = c.age 
```

还有更多可能的组合......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:22:06.957

```
-- A Dummy table
with A as (
  select
    2 as id
  from
    sysibm.sysdummy1)

-- B Dummy table
, B as (
  select
    6 as age
  from
    sysibm.sysdummy1)

-- C Dummy table    
, C as (
  select
    2 as id,
    0 as age
  from
    sysibm.sysdummy1)

-- Actual result query
select
  A.id as "A.id",
  B.age as "B.age",
  C.id as "C.id",
  C.age as "C.age",
  case
    when A.id = C.id and B.age = C.age then
      C.id
    else
      null
  end as "result id",
  case
    when A.id = C.id and B.age = C.age then
      C.age
    else
      null
  end as "result age"
from
  sysibm.sysdummy1 as Dummy
  left outer join A as A on 1=1
  left outer join B as B on 1=1
  left outer join C as C on 1=1 
```

这是我的解决方案，它将产生与原始帖子匹配的结果。只需将 A、B 和 C 虚拟表中的值替换为提供的示例即可。

**编辑：** 不使用 case 语句的相同结果：

```
select
  A.id as "A.id",
  B.age as "B.age",
  C.id as "C.id",
  C.age as "C.age",
  R.id as "result id",
  R.age as "result age"
from
  sysibm.sysdummy1 as Dummy
  left outer join A as A on 1=1
  left outer join B as B on 1=1
  left outer join C as C on 1=1
  left outer join C as R 
    on A.id = R.id
    and B.age = R.age 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T05:43:41.580

这是对这个问题的迟到回应，但下面的查询应该这样做。

我在[http://sqlfiddle.com/#!3/07d74/5创建了一个在线 sqlfiddle](http://sqlfiddle.com/#!3/07d74/5)

您可以使用上面的在线 sqlfiddle 验证您的要求。它给出了您要求的完全相同的结果。

即使经过大量的谷歌搜索，我也找不到用于运行 DB2 查询的在线工具，但在提出这个查询之前，我检查了 IBM 的关于 DB2 语法的交叉连接和左连接的文档。所以，它应该可以在 DB2 中工作，但是如果您发现任何问题，请告诉我。如果您知道 DB2 的在线工具，请告诉我。sqlfiddle 基于 Sql Server，因为 sqlfiddle 上没有 DB2 选项，但正如我所说，根据我阅读的文档，查询与 DB2 兼容。

DB2 兼容查询如下。

```
 SELECT D.id,
       D.age
FROM C
LEFT OUTER JOIN
  (SELECT A.id,
          B.age
   FROM A
   CROSS JOIN B) D ON D.id = C.id
AND D.age = C.age; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T16:48:47.687

对于不完整且不正确的“FULL JOIN”帖子，我们深表歉意。

会不会是：

```
select case when b.age is not null then a.id end as id
     , case when a.id is not null then b.age end as age
from c
  left join a on a.id  = c.id
  left join b on b.age = c.age 
```

# jquery - jQuery取消选择下拉菜单

> ID：15140934
> 
> 赞同：2
> 
> 时间：2013-02-28T16:43:18.043
> 
> 标签：jquery, attributes, selected

我有一个状态下拉菜单。第一个选项是“请选择状态”，它的值为 0，但当用户从前一页选择一个状态时，它总是选择一个状态，它以某种方式获取状态并选择它。我希望它的值为 0。

我有这个代码....

```
$('#shipstate option').attr('selected', ''); 
```

但这会将我的所有选项都设置为选中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:45:30.667

您想将恰好是 select 的元素的值设置为 0，现在将此短语转换为 jquery：

```
$('#shipstate').val(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:45:07.277

尝试这个：

```
$('#shipstate').val(''); 
```

或者

```
$('#shipstate').val(0); 
```

这将选择默认即。首先`option`。

你也可以这样做：

```
$('#shipstate').attr('selectedIndex', 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:46:18.620

您可以使用`.val()`jquery api 直接将值设置为 select 元素。

**方法：**`.val()`

获取匹配元素集中第一个元素的当前值或设置每个匹配元素的值。

参考：[http ://api.jquery.com/val/](http://api.jquery.com/val/)

`$('#shipstate').val(0);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-10T09:49:02.333

您可以使用以下方法选择选项。

```
 $('#shipstate option[value="0"]').prop('selected', true); 
```

这是取消选择该选项的最佳方法。

```
 $('#shipstate option[value="0"]').prop('selected', false); 
```

# java - logback.xml 中的文件和标准输出附加程序

> ID：15140935
> 
> 赞同：37
> 
> 时间：2013-02-28T16:43:18.403
> 
> 标签：java, maven, log4j, logback

我`logback.xml`在不同的项目中有 2 个文件。一个使用 FileAppender 将 JDBC SQL 记录到文件，另一个使用 ConsoleAppender 将错误记录到标准输出。

这是我的每个 logback.xml 文件。

**文件记录**

```
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>${user.home}/database.log</file>
        <append>false</append>
        <encoder>
            <pattern>%-5relative %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="jdbc" level="OFF" />
    <logger name="jdbc.sqlonly" level="debug" />

    <root level="info">
        <appender-ref ref="FILE" />
    </root>
</configuration> 
```

**控制台日志记录**

```
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%-5relative %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="jdbc" level="OFF" />

    <root level="ERROR">
        <appender-ref ref="STDOUT" />
    </root>
</configuration> 
```

我正在合并这两个项目，我希望能够继续将信息级别的 SQL 记录到文件中，并将错误记录到 STDOUT。

我已经将两个附加程序添加到了，`logback.xml`但我不确定如何处理记录器和新的`logback.xml`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-01T01:56:16.560

尝试这个：

```
 <configuration>
        <appender name="FILE" class="ch.qos.logback.core.FileAppender">
            <file>${user.home}/database.log</file>
            <append>false</append>
            <encoder>
                <pattern>%-5relative %-5level %logger{35} - %msg%n</pattern>
            </encoder>
        </appender>

        <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
            <encoder>
                <pattern>%-5relative %-5level %logger{35} - %msg%n</pattern>
            </encoder>
        </appender>

        <logger name="jdbc" level="OFF" />
        <logger name="jdbc.sqlonly" level="INFO" additivity="false">
            <appender-ref ref="FILE" />
        </logger>

        <root level="ERROR">
            <appender-ref ref="STDOUT" />
        </root>
    </configuration> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-12T18:03:36.167

如果要在**文件**和**控制台**中查看输出，请使用两个 appender-ref，如下所示：

```
 <configuration>
    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>${user.home}/database.log</file>
        <append>false</append>
        <encoder>
            <pattern>%-5relative %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%-5relative %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="jdbc" level="OFF" />
    <logger name="jdbc.sqlonly" level="INFO" additivity="false">
        <appender-ref ref="FILE" />
    </logger>

    <root level="ERROR">
        <appender-ref ref="STDOUT" /> <!-- Every log will apear on screen log -->
        <appender-ref ref="FILE" />   <!-- Every log will apear on file -->
    </root>
</configuration> 
```

# clojure - Clojure :: 重复元素的测试列表

> ID：15140937
> 
> 赞同：1
> 
> 时间：2013-02-28T16:43:20.913
> 
> 标签：clojure

Clojure 中实现**重复的惯用方式是什么？**以下：

```
(duplicates? '( 1 2 3 2)) ; true 
```

做一个：

```
(not (= (count coll) (count (distinct coll))) 
```

工作量比要求的要多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:54:02.010

该函数`distinct?`已存在于 clojure.core 中，因此您可以使用它：

```
user=> (not (distinct? 1 2 3 2))
true
user=> (not (distinct? 1 2 3 4))
false 
```

# django - Django ImageField 在上传时更改文件名

> ID：15140942
> 
> 赞同：44
> 
> 时间：2013-02-28T16:43:29.310
> 
> 标签：django

保存模型“产品”后，我希望上传的图像与 pk 命名相同，例如 22.png 或 34.gif 我不想仅更改名称的图像格式。如何才能做到这一点？到目前为止，我的模型示例...

```
image = models.ImageField(
        upload_to="profiles",
        height_field="image_height",
        width_field="image_width",
        null=True,
        blank=True,
        editable=True,
        help_text="Profile Picture",
        verbose_name="Profile Picture"
    )
    image_height = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100")
    image_width = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100") 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-28T16:56:05.820

您可以将函数传递给`upload_to`字段：

```
def f(instance, filename):
    ext = filename.split('.')[-1]
    if instance.pk:
        return '{}.{}'.format(instance.pk, ext)
    else:
        pass
        # do something if pk is not there yet 
```

我的建议是返回一个随机文件名而不是`{pk}.{ext}`. 作为奖励，它将更加安全。

发生的事情是 Django 将调用这个函数来确定文件应该上传到哪里。这意味着您的函数负责返回文件的整个路径，包括文件名。以下是修改后的函数，您可以在其中指定上传到哪里以及如何使用它：

```
import os
from uuid import uuid4

def path_and_rename(path):
    def wrapper(instance, filename):
        ext = filename.split('.')[-1]
        # get filename
        if instance.pk:
            filename = '{}.{}'.format(instance.pk, ext)
        else:
            # set filename as random string
            filename = '{}.{}'.format(uuid4().hex, ext)
        # return the whole path to the file
        return os.path.join(path, filename)
    return wrapper

FileField(upload_to=path_and_rename('upload/here/'), ...) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-12-01T14:22:16.220

Django 1.7 和更新版本不会使用这样的功能进行迁移。根据@miki725 的回答和[这张](https://code.djangoproject.com/ticket/22999)票，您需要使您的功能像这样：

```
import os
from uuid import uuid4
from django.utils.deconstruct import deconstructible

@deconstructible
class UploadToPathAndRename(object):

    def __init__(self, path):
        self.sub_path = path

    def __call__(self, instance, filename):
        ext = filename.split('.')[-1]
        # get filename
        if instance.pk:
            filename = '{}.{}'.format(instance.pk, ext)
        else:
            # set filename as random string
            filename = '{}.{}'.format(uuid4().hex, ext)
        # return the whole path to the file
        return os.path.join(self.sub_path, filename)

FileField(upload_to=UploadToPathAndRename(os.path.join(MEDIA_ROOT, 'upload', 'here'), ...) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-28T16:53:14.040

您可以按照[文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)`upload_to`中的说明将分配给的字符串替换为可调用对象。但是，我怀疑在使用参数时主键可能不可用。`upload_to`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-01T14:43:10.470

默认情况下，Django 保留上传文件的原始名称，但您很可能希望将其重命名为其他名称（例如对象的 id）。幸运的是，使用 Django 表单的 ImageField 或 FileField，您可以为 upload_to 参数分配一个可调用函数来进行重命名。例如：

```
from django.db import models
from django.utils import timezone
import os
from uuid import uuid4

def path_and_rename(instance, filename):
    upload_to = 'photos'
    ext = filename.split('.')[-1]
    # get filename
    if instance.pk:
        filename = '{}.{}'.format(instance.pk, ext)
    else:
        # set filename as random string
        filename = '{}.{}'.format(uuid4().hex, ext)
    # return the whole path to the file
    return os.path.join(upload_to, filename) 
```

在模型领域：

```
class CardInfo(models.Model):
    ...
    photo = models.ImageField(upload_to=path_and_rename, max_length=255, null=True, blank=True) 
```

在此示例中，上传的每张图片都将重命名为 CardInfo 对象的主键，即 id_number。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-26T13:18:45.113

另一种选择，按照这个答案[https://stackoverflow.com/a/15141228/3445802](https://stackoverflow.com/a/15141228/3445802)，当我们需要返回路径时，我们发现了问题`%Y/%m/%d`，例如：

```
FileField(upload_to=path_and_rename('upload/here/%Y/%m/%d'), ...) 
```

所以，我们用这个来处理它：

```
FileField(upload_to=path_and_rename('upload/here/{}'.format(time.strftime("%Y/%m/%d"))), ...) 
```

> 确保模块`time`已导入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-22T18:56:23.503

我确实有 Aidan Ewen 解决方案的更可定制的实现。

什么是新的？

*   您可以将要在文件名中使用的字段作为列表发送（如预购）
*   ^ 其中一个必须是唯一的
*   ^ 否则，此列表必须包括（至少一个）唯一一起字段的元组
*   ^ 否则，您发送的字段将被忽略，并将使用 uuid4 作为文件名

示例 1：

```
image = models.ImageField(upload_to=PathAndRename('images/').wrapper)

filename = {pk}.{ext}
# default is pk for filenames 
```

示例 2：

```
name = models.CharField(max_length=20)  # not unique
image = models.ImageField(upload_to=PathAndRename('images/', ['name']).wrapper)

filename = {uuid4}.{ext}
# if given fields are did not accepted will use the uuid4 
```

示例 3：

```
name = models.CharField(max_length=20, unique=True)
no = models.CharField(max_length=10)
image = models.ImageField(upload_to=PathAndRename('images/', ['name','no']).wrapper)

filename = {name}_{no}.{ext}
# one unique field is enough to use all of the given fields in the filename 
```

示例 4：

```
name = models.CharField(max_length=20)  # not unique
no = models.CharField(max_length=10)  # not unique
image = models.ImageField(upload_to=PathAndRename('images/', ['name','no']).wrapper)

class Meta:
    unique_together = ('name', 'no')
    # (('name', 'no'),) is acceptable too or multiple unique togethers

filename = {name}_{no}.{ext}
# if one of the unique together fields exists in the given fields, will use all of the given fields in the filename 
```

我可能忘了再举一些例子，但你可以从下面的代码中理解：

```
class PathAndRename:
    """
    fields to use for naming, order is important
    """

    def __init__(self, path, fields_to_use=('pk',)):
        self.path = path
        self.fields_to_use = fields_to_use

    def wrapper(self, instance, filename):
        # multiple extensions
        ext = '.'.join(filename.split('.')[1:])

        # check the uniqueness of the fields given for filename
        if self.is_any_unique_exist(instance):
            # if any unique field exist in the given list
            # create filename by using given field values
            filename = '{}.{}'.format(self.get_filename_by_fields(instance), ext)
        # else check the existence of at least one unique together
        elif self.is_any_unique_together_exist(instance):
            # create filename by using given field values
            filename = '{}.{}'.format(self.get_filename_by_fields(instance), ext)
        # if any unique or unique together not exists
        else:
            # then create a filename by using uuid4
            filename = '{}.{}'.format(uuid4().hex, ext)

        # return the whole path to the file
        return os.path.join(self.path, filename)

    def is_any_unique_exist(self, instance):
        if 'pk' in self.fields_to_use:
            return True
        return any([instance._meta.get_field(field).unique for field in self.fields_to_use if hasattr(instance, field)])

    def is_any_unique_together_exist(self, instance):
        if hasattr(instance._meta, 'unique_together'):
            if isinstance(instance._meta.unique_together, (list, tuple)):
                for uniques in instance._meta.unique_together:
                    # if any one of the unique together set is exists in the fields to use
                    if all(map(lambda field: field in self.fields_to_use, uniques)):
                        return True
            else:
                if all(map(lambda field: field in self.fields_to_use, instance._meta.unique_together)):
                    return True
        return False

    def get_filename_by_fields(self, instance):
        return '_'.join([str(getattr(instance, field)) for field in self.fields_to_use]) 
```

警告：当您放弃使用这些解决方案时，针对此 upload_to 问题的每个基于方法的解决方案都会对执行的迁移文件造成问题。如果您使用这些解决方案一段时间然后删除它们，旧的迁移将由于这些方法不存在而失败。（当然，你可以通过修改旧的迁移文件来解决这个问题）

# r - R：具有多个条件的`which`语句

> ID：15140944
> 
> 赞同：34
> 
> 时间：2013-02-28T16:43:31.583
> 
> 标签：r

我有一个由 13 列（称为 PC）组成的矩阵。我想创建一个新矩阵，仅包含值在 4 到 8 之间的行（称为 EUR）。我尝试使用此语句：

```
EUR <- PCs[which(PCs$V13 < 9 && PCs$V13 > 3), ] 
```

不幸的是，这不起作用......（我只得到一排，而有数百个）

有人知道这个命令有什么问题吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-28T16:46:23.337

该`&&`函数未矢量化。你需要的`&`功能：

```
EUR <- PCs[which(PCs$V13 < 9 & PCs$V13 > 3), ] 
```

# c# - 让基本的 ILMerge 案例工作

> ID：15140952
> 
> 赞同：2
> 
> 时间：2013-02-28T16:44:02.757
> 
> 标签：c#, ilmerge

我正在尝试让一个基本的 VS 2012 项目与 ILMerge 一起使用，因此我最终可以升级到更复杂的示例（并最终能够在我的真实项目中使用它）。

目前我在工作项目中有一个工作项目，`TestMain`和一个参考库`TestDLL`。

我的工作目录（..\bin\Release）如下：

*   ILMerge.exe
*   测试DLL.dll
*   测试DLL.pdb
*   测试主程序
*   TestMain.exe.config
*   测试主程序.pdb
*   TestMain.vshost.exe
*   TestMain.vshost.exe.config
*   TestMain.vshost.exe.manifest

我的终端输出如下：

> C:...\bin\Release>ilmerge /target:winexe /out:ContainedProgram.exe "TestMain.exe" "TestDLL.dll"
> 
> 合并期间发生异常：ILMerge.Merge：无法从位置“C:...\bin\Release\TestMain.exe”加载程序集。跳过和处理其余的参数。在 ILMerging.ILMerge.Merge()
> 在 ILMerging.ILMerge.Main(String[] args)

很简单，对吧？我在这里想念什么？

**更新：**删除 .exe 并仅使用库运行 ILMerge。删除 .dll 并仅使用可执行文件运行它不会更改错误输出。

我还制作了第二个 .dll 并能够使用 ILMerge 将两个现有库合并为一个，其中包含以下内容：

> 合并 /targetplatform:v4,c:\Windows\Microsoft.NET\Framework\v4.0.30319 /out:Test.dll "TestDLL2.dll" "TestDLL.dll"

**更新 2**所以我能够使用以下内容创建一个 TestRun.exe：

> 合并 /targetplatform:v4,c:\Windows\Microsoft.NET\Framework\v4.0.30319 /out:TestRun.exe "TestMain.exe" "Test.dll"

这将两个参考库 .dll 打包在一起，并将它们与我的可执行文件一起打包。它奏效了！我能够得到预期的结果。

直到我将新的可执行文件移出其主文件夹。

一旦我将它移动到一个新位置，执行就会产生这个错误：

> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“TestDLL，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。
> 
> 在 TestMain.Program.Main(String[] args)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:46:07.320

您使用的是什么版本的框架？例如，如果您使用的是 4.0/4.5，则可能需要设置一个 targetplatform 选项。

`/targetplatform:version,platformdirectory`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-10T18:45:53.870

[这是一个重复的答案，因为这是我相对较快地发现的另一个相关问题，但这并没有帮助我解决我的问题]

我正在回答这个老问题，因为我没有在 Stack Overflow 上找到我自己的相关问题的答案，它可能对其他人有所帮助。就我而言，我试图在 VS2013 中修改并重建一个旧的解决方案，以修复安装程序中的一个故障（不将 IIS10 识别为比 IIS4 更新）。

合并操作给了我一个“系统找不到指定的错误代码 0x80070002 的文件”，如果您忽略了该错误并安装了应用程序，它将陷入运行时异常。当然，“指定的文件”就在构建文件夹中。

这个问题的根本原因是 4.0 之后的框架是“就地升级”，其中一些依赖项围绕核心库移动（关于长时间的讨论，请参见：[http ://www.hurryupandwait.io/blog/what-你应该知道关于运行 ilmerge-on-net-4-5-assemblies-targeting-net-4-0](http://www.hurryupandwait.io/blog/what-you-should-know-about-running-ilmerge-on-net-4-5-assemblies-targeting-net-4-0)）。总而言之，您可能有多个版本的 ilmerge 可供您使用，但只有最新版本才能保证能够准确地解散您的依赖项，以便在运行时找到东西，而不是指定的文件是缺少，它是指向底层调用的指针。

在我的情况下，解决方案是找到从 NuGet 检索的 ilmerge 版本，并从我的旧解决方案中引用它，同时保留其他所有内容。（我应该知道这一点，但我很着急/没有直接思考，并且错误消息*具有*误导性......）。

# actionscript-3 - AS3 测验和答案

> ID：15140954
> 
> 赞同：0
> 
> 时间：2013-02-28T16:44:05.987
> 
> 标签：actionscript-3, flash, flash-cs5

这是我的问题；

我想做一个测验，最后向一个人展示他/她选择特定大学课程的品质。测验将提出 10 个问题，每个问题有 2 个答案，点击答案后，将获得特定课程的积分。

例如，问题可能是“您想与计算机一起工作，还是与人一起工作？”

回答计算机分数将在 Informatica、设计和编辑课程中获得 回答人分数将在医生、社会工作者等课程中获得（例如，我只是在这里命名）

我希望人们通过测验，回答问题，最后看看他们在每门课程中获得了多少分，看看哪些课程最适合他们的潜力。

现在代码可能很简单。我有 Flash CS5 并使用 Actionscript 3。在第一层的第一帧上，我有第一个问题和两个按钮，并且有以下代码：

```
stop();
btn1.addEventListener(MouseEvent.CLICK, release1);
btn2.addEventListener(MouseEvent.CLICK, release2);
var option1:Number = 0;
var option2:Number = 0;

function release1(){
    option1 += 1;
    gotoAndStop(2);
}

function release2(){
    option2 += 1;
    gotoAndStop(2);
} 
```

在第二帧上，我有一个普通的文本，上面写着“结果是：”，然后是两个（暂时）动态文本框，我想在其中显示结果。

这就是问题所在，我不知道如何显示结果。我有这个作为代码：

```
txt1.text = option1;
txt2.text = option2; 
```

但我得到了错误`1067: Implicit coercion of a value of type Number to an unrelated type String.`

...不幸的是，我对 CS5 和 Actionscript 3 有点陌生，所以我不知道该怎么做。当我尝试我的脚本时，它就像一个电影剪辑一样播放它。

有人能告诉我是我做错了一件小事，还是我在做这件事时完全走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:49:15.293

正如错误描述所说，您正在尝试将某些类型分配给`String`类型`Number`。您有正确的想法将文本框设置为显示分数，但`txt1.text`只会接受`String`. 您可以使用`toString()`来转换数字，以便您的文本字段接受它：

`txt1.text = option1.toString();`.

此外，要停止项目像电影剪辑一样播放`stop();`，请在您希望应用程序等待的每一帧上添加命令（您已经将它添加到第一帧，所以只需将其添加到第二帧）。

# javascript - 使用 javascript 在字符串中查找电子邮件地址

> ID：15140955
> 
> 赞同：6
> 
> 时间：2013-02-28T16:44:07.057
> 
> 标签：javascript, regex

我想做的是从字符串中提取电子邮件地址`SomeName, First (First.SomeName@usa.mywebsite1.com)`

这是我已经尝试过的代码：

```
 var stringToSearchIn="SomeName, First (First.SomeName@usa.mywebsite1.com)";

 var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

var extractedEmail=re.exec(stringToSearchIn); 
```

代码中的变量extractEmail 返回一个空值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:50:09.443

> 我试过这个但失败了

...对于所发生的事情不是一个非常有用的描述。在猜测中，重新找不到匹配项。造成这种情况的一个明显原因是您在此处使用的正则表达式将仅匹配*仅*包含电子邮件地址的字符串 - 从正则表达式中删除结束锚 (^,$)，您将获得您的电子邮件地址。

```
var re = /(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:07:46.353

这里不需要正则表达式。如果字符串始终是格式

```
姓名（电子邮件）
```

您可以简单地`(`用作分隔符：

```
var stringToSearchIn="SomeName, First (First.SomeName@usa.mywebsite1.com)";

var extractedEmail = stringToSearchIn.substr(stringToSearchIn.indexOf('(') + 1).slice(0, -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T02:37:49.773

这个对我有用。

```
var searchInThisString ="SomeName, First (First.SomeName@usa.mywebsite1.com) SomeName2, First2 (First2.SomeName2@usa.mywebsite1.com)";

var foundEmails =[];

var emailRegex = /(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;

var gotcha;

while (match = emailRegex.exec(searchInThisString)){

     //-- store in array the found match email
     foundEmails.push(match[0]);

    //-- remove the found email and continue search if there are still emails
    searchInThisString= searchInThisString.replace(match[0],"")
} 
```

alert(foundEmails.join(" "))

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T16:49:03.373

试试这个正则表达式

```
@"^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$" 
```

这将接受以下任何一项：

*   电子邮件@email.com
*   电子邮件@email.email.com
*   电子邮件@email.email.email.com

等等...

# c# - 网络花园上的彗星服务器

> ID：15140958
> 
> 赞同：2
> 
> 时间：2013-02-28T16:44:15.517
> 
> 标签：c#, iis-7, asp.net-mvc-4, comet, web-garden

我正在使用一个`IHttpAsyncHandler`来服务彗星/长轮询请求。处理程序使连接保持打开状态并将`MyAsyncResult`对象保存在 static`ConcurrentSet<MyAsyncResult>`中。

当发出单独的请求（导致彗星响应的请求）时，程序会`MyAsyncResult`在列表中找到对象并完成请求。

我的问题是，当我将应用程序更改为在 Webgarden 中运行时，这个静态变量不会在所有工作进程之间共享，所以这个实现不会起作用。

现在，我无法将`MyAsyncResult`对象存储在 SQL 数据库中，或者任何可能有用的对象（如`IHttpHandler`自身，或指向 EndProcessRequest 方法的委托等）中。我可以将某些 ID 和字符串存储在 SQL 数据库中，并不断检查新值，但这似乎很昂贵，并且首先违背了使用长轮询的目的。

有什么方法可以在网络花园中分享我的静态`ConcurrentSet`内容吗？或者我可以通过任何其他方式让`IHttpAsyncHandler`坐在那里等待信号发送它的响应？

**编辑：**

如果我无法跨进程共享变量，有没有办法可以向所有其他工作进程广播？我在这里只需要一个带有两个整数参数的信号。

# json - NSURLRequest 没有被发送？

> ID：15140962
> 
> 赞同：0
> 
> 时间：2013-02-28T16:44:33.210
> 
> 标签：json, nsurlconnection, nsurlrequest

我有一个 JSON 请求，它根据另一个 JSON 请求的响应发送到服务器，我使用此方法检查用于处理响应的 NSURL 连接：

```
 if(connection == connection1) {
    // Connection 1
    } else if(connection == connection2) {
    // Connection 2
    } 
```

它适用于第一个连接，发送方式如下：

```
 NSString *jsonStr = [NSString stringWithFormat:@"https://api.flightstats.com/flex/flightstatus/rest/v2/json/flight/status/%@/%@/dep/%@?appId=%@&appKey=%@&utc=false",airline.text,flightnumber.text,datestring,flightAPIIDstring,flightAPIkeystring];
    NSURL *jsonurl = [NSURL URLWithString:jsonStr];
    flightTrackJSONconnectionrequest = [NSURLRequest requestWithURL:jsonurl];
    flighttrackJSONconnection =[[NSURLConnection alloc]
                                initWithRequest:flightTrackJSONconnectionrequest delegate:self];
    if(flighttrackJSONconnection){
    jsonresponse = [[NSMutableData alloc] init];
    } else {
    } 
```

但是，在我的第一个连接（flighttrackJSONconnection）的 connectionDidFinishLoading 上，当我使用此代码时，根本不会发出第二个连接的请求：

```
 NSString *departjsonStr = [NSString stringWithFormat:@"https://api.flightstats.com/flex/airports/rest/v1/json/iata/%@?appId=%@&appKey=%@",DepartACode,flightAPIIDstring,flightAPIkeystring];
    NSURL *departjsonurl = [NSURL URLWithString:departjsonStr];
    departairportcheckJSONconnection = [NSURLRequest requestWithURL:departjsonurl];
    departairportcheckJSONconnection =[[NSURLConnection alloc]
                                           initWithRequest:departairportcheckJSONconnectionrequest delegate:self];
    if(departairportcheckJSONconnection){
    departairportlookup = [[NSMutableData alloc] init];
    } else {
    } 
```

我将 NSLog 检查添加到连接 didFailWithError、连接 didReceiveResponse 和 connectionDidReciveData 中，发现唯一发出的 NSURL 请求是我的 flighttrackJSONconnection 请求......

所以我想知道，我是否遗漏了代码中的某些内容，或者当它调用 connectionDidFinishLoading 时根本不可能发送另一个 NSURLRequest？

对不起，如果我看起来像个菜鸟，我只是有点困惑......

此外，所有 JSON 解析代码（至少对于 flighttrackJSONresponse 连接）和这些代码在 connectionDidFinishLoading 上都可以正常工作，所以它不像我在声明任何内容时犯了错误，如果有任何区别，我正在尝试在 connectionDidFinishLoading 上发送 2 个请求，他们每个人都有自己的 NSURLConnection 和 NSURLRequest 在.h上声明的名称，我对两者都有同样的问题。

感谢任何提示或想法家伙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:53:07.117

我会推荐使用方法`sendAsynchronousConnection`，像这样的代码：

```
NSURL *url = [NSURL URLWithString:urlString];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{

    // Treat your response here
}]; 
```

在块内，您处理您的响应。解析您的 JSON，检查需要做什么并在其中调用相同的方法！使用它，您不需要实现委托方法。

# node.js - 设置 Forever 以监听事件

> ID：15140968
> 
> 赞同：1
> 
> 时间：2013-02-28T16:44:54.533
> 
> 标签：node.js, forever

我正在编写一个新的 nodejs 服务器，我想永远使用它来保持它运行。到目前为止，这很容易：

```
forever start simple-server.js 
```

但是，有没有一种方法可以捕获特定事件（例如错误事件），以使服务器不会在未捕获的错误时关闭并重新启动。IE 我只想记录错误并继续。此时我看到一条类似这样的消息，说明每次抛出错误时我的服务器都已重新启动：

```
Forever detected script exited with code: 1
Forever restarting script for 2 time 
```

我知道我可以以编程方式永远使用，但我有几个问题： 1\. 似乎当我以编程方式使用它时，该进程未列在“永远列表”中 2.如果我为“错误”事件设置一个处理程序，它仍然永远存在重启服务器？

```
var forever = require('forever');

var server = new (forever.Monitor)('app.js', {
  max: 3,
  silent: true,
  options: []
});

server.on('error', function(err) {
  console.log('Just received an error in server: ' + err);
});

server.on('exit', function() {
  console.log('server exiting');
});

server.start(); 
```

# javascript - 使用 phantomjs 渲染一个 javascript 网页页面

> ID：15140969
> 
> 赞同：6
> 
> 时间：2013-02-28T16:45:01.540
> 
> 标签：javascript, phantomjs, javascript-engine

我正在尝试使用 phantomjs 从网站呈现 javascript 评估的源代码。但是每次我尝试时，我都只能按原样获取源代码（类似于从浏览器查看源代码）。我真正想要的是 javascript 评估代码（我们从谷歌浏览器的检查元素中看到的）。我的代码如下所示：

```
var page = require('webpage').create();
page.open('http://www.google.com/', function (s) {
    console.log(page.content);
    phantom.exit();
}); 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-22T03:48:02.130

这对我有用：

```
window.setTimeout(function () {
        page.render(output);
        phantom.exit();
    }, 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T07:32:42.780

可能是的。在很多情况下，网页上的 JavaScript 代码不会立即执行。您可以通过在获取 page.content 的值之前稍微延迟（例如使用 setTimeout）来考虑这一点。

# r - 在 R 中重塑形状，将行转换为向量

> ID：15140973
> 
> 赞同：0
> 
> 时间：2013-02-28T16:45:07.313
> 
> 标签：r, aggregate, reshape

我的数据如下所示：

```
fruit          ID
apple          1
mango          1
orange         1
grapes         2
strawberries   3 
```

我想使用 reshape 做的是以下内容：

```
ID     Fruit
 1     apple,mango,orange 
 2     grapes
 3     strawberries 
```

我试过重塑

```
rehshape(data=test,direction="long",varying=c(1,2),v.names="v1",timevar="v2",times=c(1,2))->test.long 
```

但这显然是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:47:50.240

你可以试试`aggregate`

```
aggregate(fruit ~ ID, data , paste, sep=',')

  ID                fruit
1  1 apple, mango, orange
2  2               grapes
3  3         strawberries 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:47:12.817

既然其他人都已经`aggregate`介绍过了，这里有一种方法可以`reshape`为你工作：为你添加一个时间变量`data.frame`，然后尝试从长到宽重塑。假设您的原件`data.frame`名为“mydf”：

```
> # Create a time variable
> mydf$time <- ave(mydf$ID, mydf$ID, FUN = seq_along)
> mydf
         fruit ID time
1        apple  1    1
2        mango  1    2
3       orange  1    3
4       grapes  2    1
5 strawberries  3    1

> # Now, reshape
> reshape(mydf, direction = "wide", idvar = "ID", timevar = "time")
  ID      fruit.1 fruit.2 fruit.3
1  1        apple   mango  orange
4  2       grapes    <NA>    <NA>
5  3 strawberries    <NA>    <NA> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T16:49:18.903

试试这个

```
> aggregate(fruit~ID, data=DF, FUN=paste0)
  ID                fruit
1  1 apple, mango, orange
2  2               grapes
3  3         strawberries 
```

# python - 从稀疏字典和键列表构建列表的最快方法

> ID：15140977
> 
> 赞同：0
> 
> 时间：2013-02-28T16:45:13.783
> 
> 标签：python

我确信有一种简单的方法可以做到这一点，但我遇到了困难。

我有一个字段名称列表，例如

```
fields = ['foo', 'bar', 'baz'] 
```

我有（许多）使用这些名称的字典：

```
values = {'foo': 1, 'baz': 2} 
```

我想要的是将此字典转换为值列表，在正确的位置匹配字段列表，即：

```
value_list = [1, None, 2] 
```

到目前为止，我最好的解决方案是：

```
value_list = [values.get(field) for field in fields] 
```

但是有没有更好的方法使用 zip 或其他东西？

特别是，如果我有一长串“值字典”（比如 10000），并且它们非常稀疏（比如，字段长度为 200，但每个“值字典”只有大约 10 个条目），是否有更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:10:50.203

> 特别是，如果我有一长串“值字典”（比如 10000），并且它们非常稀疏（比如，字段长度为 200，但每个“值字典”只有大约 10 个条目），是否有更快的方法？

可能。

1.  建立一个字典映射键到他们的预期索引：

    ```
    idx = dict((k, i) for i, k in enumerate(fields)) 
    ```

    这是一个预处理步骤，您应该只对整批字典执行一次。

2.  现在循环遍历字典键而不是字段：

    ```
    lst = [None] * len(fields)
    for k, v in values.iteritems():
        lst[idx[k]] = v 
    ```

当字段的数量远大于每个键的数量时，这应该会更快`dict`，因为它会跳过哈希查找，并且可以一次性构建列表，而不是在遍历`fields`. （不过，后一种优化也可以应用于您当前的算法。）

在将它应用到实际代码之前，请务必对其进行基准测试，因为实际性能取决于很多因素，包括哈希函数的速度（以及实际的键）和`dict`执行的过度分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:17:02.710

根据您在完成列表后要对列表执行的操作，您可以考虑改用生成器。这不会减少任何操作，但它可能会节省您构建不必要的列表。

```
value_iterator = (values.get(field) for field in fields) # Python>=2.7

for value in value_iterator:
    #Do something. 
```

这样，在迭代值的“列表”之前不会执行任何操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T16:49:02.853

使用`collections.Counter`.

```
import collections as col
cntr = col.Counter(your_list) 
```

然后你可以这样做：

```
counts = cntr.most_common() 
```

这为您提供了一个元组列表，您可以将其列出 comprehend-ify。

但正如评论者所提到的，您的解决方案非常好。

# php - 将数组转换为 xml

> ID：15140978
> 
> 赞同：0
> 
> 时间：2013-02-28T16:45:15.853
> 
> 标签：php

我想将 php 数组转换为 xml。

我有这个代码：

```
$output=array("result" => "this is the result");

print assocArrayToXML("example",$output);

function assocArrayToXML($root_element_name,$ar) {

     $xml = new SimpleXMLElement("<?xml version=\"1.0\"?><{$root_element_name}></{$root_element_name}>");

     $f = create_function('$f,$c,$a','
        foreach($a as $k=>$v) {
                   if(is_array($v)) {
            $ch=$c->addChild($k);
            $f($f,$ch,$v);
        } else {
            $c->addChild($k,$v);
        }
    }');
    $f($f,$xml,$ar);
    return $xml->asXML();
    } 
```

我在这里找到了功能：

[http://php.net/manual/es/book.simplexml.php](http://php.net/manual/es/book.simplexml.php)

当我执行代码时，我得到了这个：

```
this is the result 
```

为什么我看不到xml？是因为它格式不正确吗？或者也许 Mozilla Firefox 不写它？

# batch-file - 批处理 - 用户输入的颜色

> ID：15140980
> 
> 赞同：3
> 
> 时间：2013-02-28T16:45:22.413
> 
> 标签：batch-file

嗨，我正在制作一个将从文件夹启动程序的程序。这是代码：

```
@echo off
SETLOCAL EnableDelayedExpansion
for /F "tokens=1,2 delims=#" %%a in ('"prompt #$H#$E# & echo on & for %%b in (1) do rem"') do (
  set "DEL=%%a"
)
title Launcher
call :ColorText 0a "Launcher"
echo.
:CMD
set /p cmd=">>> "
if not defined cmd goto CMD
call "%CD%"\bin\%cmd%
echo %cmd%>"%CD%\Commands_Log\%cmd%
goto CMD
:ColorText
echo off
<nul set /p ".=%DEL%" > "%~2"
findstr /v /a:%1 /R "^$" "%~2" nul
del "%~2" > nul 2>&1
goto :eof 
```

我真的很想知道如何为用户的输入着色。例如我的提示就像

> C:\ > abcd

现在，我如何只为“abcd”部分着色？

编辑：我希望它在输入时被着色。对于所有不理解的人，这是我最初的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:33:12.060

正如 Pickle 教授所说，您需要编写自己的键输入，然后用颜色输出每个键。

可以使用 Findstr 进行批量着色，描述[了如何在批处理文件中有多种颜色？](https://stackoverflow.com/a/5344911/463115)
可以使用 xcopy 来获取单个密钥。

```
@echo off
call :color_init
setlocal EnableDelayedExpansion

:keyLoop
call :GetKey
if not defined key exit /b
call :color 1a key
goto :keyLoop

:GetKey
set "key="
for /F "usebackq delims=" %%L in (`xcopy /L /w "%~f0" "%~f0" 2^>NUL`) do (
  if not defined key set "key=%%L"
)
set "key=%key:~-1%"
exit /b

:color_init
for /F "tokens=1,2 delims=#" %%a in ('"prompt #$H#$E# & echo on & for %%b in (1) do rem"') do (
  set "DEL=%%a"
)
rem Prepare a file "X" with only one dot
<nul > X set /p ".=."
exit /b

:color
setlocal EnableDelayedExpansion
set "param=!%~2!"
set "param=!param:"=\"!"
findstr /p /A:%1 "." "!param!\..\X" nul
<nul set /p ".=%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%%DEL%"
endlocal
exit /b

for /f "delims=" %%A in ('echo hello') do set "var=%%A"
echo %var%
exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T12:31:23.340

是的，可以使用[**cmdcolor**](https://github.com/jeremejevs/cmdcolor)。就`echo \033[93m`在输入之前，然后是`echo \033[0m`之后。在这些回声之间输入的所有内容都将显示为黄色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:55:57.547

您可以使用名为 cecho.bat [http://www.codeproject.com/Articles/17033/Add-Colors-to-Batch-Files的程序](http://www.codeproject.com/Articles/17033/Add-Colors-to-Batch-Files)

# tsql - 处理 SQL 中的 & 和特殊字符

> ID：15140981
> 
> 赞同：0
> 
> 时间：2013-02-28T16:45:23.803
> 
> 标签：tsql

我正在尝试将遗留数据转换为新的结构正确的 SQL 数据库。为简单起见，假设一个旧表包含两个字段，ID 和电子邮件。这是一些数据。

```
ID | Emails  
0 test@test.com, test1@test.com, stuff@domain.com  
1 thing@thing.com 
```

我想像这样将它们带入新表：

```
ID | Emails  
0 test@test.com  
0 test1@test.com  
0 stuff@domain.com  
1 thing@thing.com 
```

我可以用这个 TSQL 做到这一点：

```
INSERT INTO NewTable(Id, [Address])
Select t.Id, split.val
From OldTable t
Cross Apply dbo.Split(t.Emails, ',') split
WHERE t.Emails <> '' 
```

这很有效，直到我遇到一封包含特殊字符的电子邮件，如下所示：email@tom&jerry.com

& 号中断查询并引发以下错误：
*Msg 9411, Level 16, State 1, Line 3
XML parsing: line 1, character 27, semicolon expected*

规避错误并将电子邮件按原样映射到新表中的最简单方法是：email@tom&jerry.com

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:49:34.400

您最初可以简单地使用替换来用其他东西替换所有＆符号，例如“AANNDD”或“>>AND<<”。

```
SELECT REPLACE(Emails, '&', '>>AND<<')... 
```

然后在完成后将其替换回来。

您可以在插入之前替换旧表中的所有 & 符号。然后只需在新表上运行更新。

# jpa - Playframework 将列表发布到控制器

> ID：15140986
> 
> 赞同：2
> 
> 时间：2013-02-28T16:45:27.713
> 
> 标签：jpa, playframework, ebean, playframework-2.1, scala-template

我想要实现的只是这个示例应用程序：***~\play-2.1.0\samples\java\forms***

更新的最新代码：

我的`question.scala.html`样子：

```
@(questionForm: Form[Question])

@import helper._
@import helper.twitterBootstrap._

@answerField(field: Field, className: String = "answer") = {

<div class="twipsies well @className">
    <table>
        <tr>
            <td> @checkbox(field("addRight"),'_label -> "Add")</td>
            <td> @checkbox(field("editRight"),'_label -> "Edit")</td>
            <td> @checkbox(field("delRight"),'_label -> "Delete")</td>
            <td> @checkbox(field("viewRight"),'_label -> "View")</td>
        </tr>
    </table>
</div>

}

@if(questionForm.hasErrors) {
    <div class="alert-message error">
        <p><strong>Oops</strong> Please fix all errors</p>
    </div>
}

@helper.form(action = routes.Questions.submit, 'id -> "form") {

    <fieldset>

        @inputText(
            questionForm("name"),
            '_label -> "Name of a Right"
        )

        @inputText(
            questionForm("namex"),
            '_label -> "Name of a Right"
        )

        <div class="answers">

            @repeat(questionForm("answers"), min = 0) { answer =>
                @answerField(answer)
            }

            @**
            * Keep an hidden block that will be used as template for Javascript copy code
            * answer_template is only css style to make it hidden (look main.css and declare your own answer_template at bottom)
            **@
            @answerField(
                questionForm("answers"),
                className = "answer_template"
            )

            <div class="clearfix">
                <div class="input">
                    <a class="addAnswer btn success">Add </a>
                </div>
            </div>

        </div>
    </fieldset>

    <div class="actions">
        <input type="submit" class="btn primary" value="Insert">
    </div>

}

<script type="text/javascript" charset="utf-8">

        $('.removeAnswer').on('click', function(e) {
        var answers = $(this).parents('.answers');
        $(this).parents('.answer').remove();
        renumber(answers);
        });

        $('.addAnswer').on('click', function(e) {
        var answers = $(this).parents('.answers');
        var template = $('.answer_template', answers);
        template.before('<div class="clearfix answer">' + template.html() + '</div>');
        renumber(answers);
        });

        $('#form').submit(function() {
        $('.answer_template').remove()
        });

        // -- renumber fields
        // This is probably not the easiest way to do it. A jQuery plugin would help.

        var renumber = function(answers) {
        $('.answer').each(function(i) {
        $('input', this).each(function() {
        $(this).attr('name', $(this).attr('name').replace(/answers\[.+?\]/g, 'answers[' + i + ']'))
        });
        });
        }

</script> 
```

……

问题模型：

```
package models;

import play.data.validation.Constraints;
import play.db.ebean.Model;
import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import java.util.ArrayList;
import java.util.List;

@Entity
public class Question extends Model {

@Id
public Long id;

@Constraints.Required
public String name;

@OneToMany(cascade = CascadeType.PERSIST, mappedBy = "question")
public List<Answer> answers;

public Question() {

}

public Question(String name) {
    this.name = name;

}
} 
```

答案型号：

```
@Entity
public  class Answer extends Model {

@Id
public Long id;

public boolean addRight;
public boolean editRight;
public boolean delRight;
public boolean viewRight;

@ManyToOne
public Question question;

public Answer() {
}

public Answer(boolean addRight,boolean editRight,boolean delRight,boolean viewRight, 
Question question) {
    this.addRight = addRight;
    this.editRight = editRight;
    this.delRight = delRight;
    this.viewRight = viewRight;
    this.question = question;
}
} 
```

最后控制器保存部分：

```
 public static Result submit() {
    Form<Question> filledForm = questionForm.bindFromRequest();

    if(filledForm.hasErrors()) {
        User user = User.findByUserName("samuel");
        return badRequest(question.render(filledForm));
    }
    else {
        // If we dont have any errors, we should be around here :)
        Question question = filledForm.get();
        // Since Answer needs reference to Question and with new Question
        // it cant get it loaded from DB we need to do little dirty trick here
        // in order to save new question id instantly to answers foreign_key
        // as question_id, otherwise it will be null
        System.out.println("-->" + question.answers.size() );
        if(question.answers != null) {
            ArrayList<Answer> answersCopy = new ArrayList<Answer>();
            Logger.trace("Size of Anwsers : " +answersCopy.size());
            for(Answer answer : question.answers) {
                answersCopy.add(new                  
   Answer(answer.addRight,answer.editRight,answer.delRight,answer.viewRight,question));
                System.out.println("##" + answer.addRight);
            }
            question.answers = answersCopy;
        }
        question.save();
        return ok("Nice, all saved!");

    }
} 
```

使用上面的代码，我没有得到任何异常但是.. 问题部分保存了 Anwser。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:52:31.840

好吧，我想我用 JPA 让它工作了，我有点不确定你是想用 JPA 还是只用 Ebean，但是我认为你和其他人也可以通过 Ebean 移植它。（如果你需要，我也可以做到，我猜；）

这是我用 JPA 尝试过的东西：

*   打开终端（或 cmd）并导航到名为的项目`play-2.1.0/samples/java/forms`
*   然后（以防万一）运行这些命令：`play clean .. play compile .. play eclipse`
*   去 eclipse 并在那里导入它（右键单击包资源管理器 -> 现有项目..）
*   打开`conf/application.conf`并添加（或取消注释）这些行：

> ```
> db.default.driver=org.h2.Driver
> db.default.url="jdbc:h2:mem:play"
> db.default.jndiName=DefaultDS
> jpa.default=defaultPersistenceUnit 
> ```

*   创建文件夹结构`conf/evolutions/default`和`conf/META-INF`
*   添加`persistence.xml`具有以下内容的文件：

> http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">
> 
> ```
> <persistence-unit name="defaultPersistenceUnit" transaction-type="RESOURCE_LOCAL">
>     <provider>org.hibernate.ejb.HibernatePersistence</provider>
>     <non-jta-data-source>DefaultDS</non-jta-data-source>
>     <properties>
>         <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
>     </properties>
> </persistence-unit>
>  </persistence> 
> ```

*   现在让我们为您的 Answer 和 Question 模型创建表格，创建`1.sql`包含`evolutions/default`以下内容的文件：

> ```
> # --- !Ups
> 
> create table question (
>   id                        bigint not null,
>   name                      varchar(255),
>   constraint pk_question primary key (id))
> ;
> 
> create table answer (
>   id                        bigint not null,
>   name                      varchar(255),
>   question_id               bigint,
>   constraint pk_answer primary key (id))
> ;
> 
> create sequence answer_seq start with 1000;
> create sequence question_seq start with 1000;
> 
> alter table answer add constraint fk_answer_question_1 foreign key (question_id) references question (id) on delete restrict on update restrict;
> 
> # --- !Downs
> 
> SET REFERENTIAL_INTEGRITY FALSE;
> 
> drop table if exists question;
> drop table if exists answer;
> 
> SET REFERENTIAL_INTEGRITY TRUE;
> 
> drop sequence if exists question_seq;
> drop sequence if exists answer_seq; 
> ```

*   修改或添加以下模型：

> ```
> package models;
> 
> import javax.persistence.Entity; 
> import javax.persistence.GeneratedValue; 
> import javax.persistence.GenerationType;
> import javax.persistence.Id;
> import javax.persistence.SequenceGenerator;
> import javax.persistence.ManyToOne; 
> 
> import play.data.validation.Constraints.Required;
> 
> @Entity 
> @SequenceGenerator(name = "answer_seq", sequenceName = "answer_seq")
> public class Answer {
> 
> @Id
> @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "answer_seq")
> public Long id;
> 
> @Required
> public String name;
> 
> @ManyToOne
> public Question question;
> 
> public Answer() { 
> }
> 
> public Answer(String name, Question question) {   
>       this.name = name;
>       this.question = question;
> }
> 
> } 
> ```

...

> ```
> package models;
> 
> import java.util.List;
> import javax.persistence.CascadeType;
> import javax.persistence.Entity;
> import javax.persistence.GeneratedValue;
> import javax.persistence.GenerationType;
> import javax.persistence.Id;
> import javax.persistence.OneToMany;
> import javax.persistence.SequenceGenerator;
> import play.data.validation.Constraints.Required;
> import play.db.jpa.*;
> 
> @Entity
> @SequenceGenerator(name = "question_seq", sequenceName = "question_seq")
> public class Question {
> 
> @Id
> @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "question_seq")
> public Long id;
> 
> @Required
> public String name;
> 
> @Valid
> @OneToMany(cascade = CascadeType.PERSIST, mappedBy = "question")
> public List<Answer> answers;
> 
> public Question() {
> 
> }
> 
> public Question(String name) {
>       this.name = name;
> }
> 
> public void save() {
> 
>       JPA.em().persist(this);
> 
>       List<Question> allQuestions = JPA.em().createQuery("from Question order by name").getResultList();
> 
>       System.out.println("Number of questions: " + allQuestions.size());
> 
>       for(Question q : allQuestions) {
> 
>              System.out.println("Question --- id: " + q.id + ", name: " + q.name);
> 
>                 if(q.answers != null) {
> 
>                    for(Answer a : q.answers) {
>                            System.out.println("Answer --- id: " + a.id + ", name: " + a.name + " question_id: " + a.question.id);
>                    }
>              }
>       }
> 
> }
> 
> } 
> ```

*   好的，现在模型 OK 让我们创建静止的控制器和视图来测试它，从`routes`文件开始：

> ```
> # Question
> GET     /questions                  controllers.Questions.blank()
> POST    /questions                  controllers.Questions.submit() 
> ```

*   然后添加以下控制器：

> ```
> package controllers;
> 
> import static play.data.Form.form;
> import java.util.ArrayList;
> import models.Answer;
> import models.Question;
> import play.data.Form;
> import play.db.jpa.Transactional;
> import play.mvc.Controller;
> import play.mvc.Result;
> import views.html.question.*;
> 
> public class Questions extends Controller {
> 
> /**
> * Defines a form wrapping the Question class.
> */ 
> final static Form<Question> questionForm = form(Question.class);
> 
> /**
> * Display a blank form.
> */ 
> public static Result blank() {
>     return ok(form.render(questionForm));
> }
> 
> @Transactional
> public static Result submit() {
> 
> Form<Question> filledForm = questionForm.bindFromRequest();
> 
> if(filledForm.hasErrors()) {
>      return badRequest(form.render(filledForm));
> } else {
> 
> // If we dont have any errors, we should be around here :)
> Question question = filledForm.get();
> 
> // Since Answer needs reference to Question and with new Question
> // it cant get it loaded from DB we need to do little dirty trick here
> // in order to save new question id instantly to answers foreign_key
> // as question_id, otherwise it will be null
> if(question.answers != null) {
>      ArrayList<Answer> answersCopy = new ArrayList<Answer>();
>      for(Answer answer : question.answers) {
>      answersCopy.add(new Answer(answer.name, question));
> }
> question.answers = answersCopy;
> }
> question.save();
> 
> // You can also use this test code to save data
> // Question question = new Question("What is your favorite color?");
> // question.answers = new ArrayList<Answer>();
> // question.answers.add(new Answer("Blue", question));
> // question.answers.add(new Answer("Red", question));
> // question.save();
> 
> return ok("Nice, all saved!");
> 
> }
> }
> 
> } 
> ```

*   好的，还有一个视图，将其`views.question`命名为`form.scala.html`（顺便说一句，我重用了应用程序已经用于联系人的类似代码，但使其与您的模型一起使用。）

> ```
> @(questionForm: Form[Question])
> 
> @import helper._ 
> @import helper.twitterBootstrap._
> 
> @title = {
>      Add a new question 
> }
> 
> @answerField(field: Field, className: String = "answer") = {
>     @input(field, '_label -> "Answer", '_class -> className) { (id, name, value, _) =>
>     <input type="text" name="@name" value="@value"> 
>     <a class="removeAnswer btn danger">Remove</a>
> } 
> }
> 
> @main(title, nav = "question") {
> 
> @if(questionForm.hasErrors) {
>     <div class="alert-message error">
>         <p><strong>Oops</strong> Please fix all errors</p>
>     </div>
> }
> 
> @helper.form(action = routes.Questions.submit, 'id -> "form") {
> 
> <fieldset>
> <legend>Fill a question with answers</legend>
> 
> @inputText(
>     questionForm("name"), 
>     '_label -> "Name of a question"
> )
> 
> <div class="answers">
> 
> @repeat(questionForm("answers"), min = 0) { answer =>
>      @answerField(answer("name"))
> }
> 
> @**
> * Keep an hidden block that will be used as template for Javascript copy code
> * answer_template is only css style to make it hidden (look main.css and declare your own answer_template at bottom)
> **@
> @answerField(
>     questionForm("answers[x].name"),
>     className = "answer_template"
> )
> 
> <div class="clearfix">
> <div class="input">
>     <a class="addAnswer btn success">Add answer</a>
> </div>
> </div>
> 
> </div>
> </fieldset>
> 
> <div class="actions">
> <input type="submit" class="btn primary" value="Insert">
> <a href="@routes.Application.index" class="btn">Cancel</a>
> </div>
> 
> }
> 
> <script type="text/javascript" charset="utf-8">
> 
> $('.removeAnswer').live('click', function(e) {
>     var answers = $(this).parents('.answers');
>     $(this).parents('.answer').remove();
>     renumber(answers);
> });
> 
> $('.addAnswer').live('click', function(e) {
>     var answers = $(this).parents('.answers');
>     var template = $('.answer_template', answers);
>     template.before('<div class="clearfix answer">' + template.html() + '</div>');
>     renumber(answers);
> });
> 
> $('#form').submit(function() {
>     $('.answer_template').remove()
> });
> 
> // -- renumber fields
> // This is probably not the easiest way to do it. A jQuery plugin would help.
> 
> var renumber = function(answers) {
> $('.answer').each(function(i) {
>     $('input', this).each(function() {
>          $(this).attr('name', $(this).attr('name').replace(/answers\[.+?\]/g, 'answers[' + i + ']'))
>          });
>     });
> }
> 
> </script>
> } 
> ```

*   作为最终调整，检查 main.css 文件的最后一行，您记得将其编辑为：

> ```
> .phone_template, .profile_template, .answer_template {
>      display: none;
> } 
> ```

*   并添加`main.scala.html`：

> ```
> <li class="@("active".when(nav == "question"))">
>    <a href="@routes.Questions.blank()">Questions</a>
> </li> 
> ```

*   现在，如果您还没有这样做，请转到您的浏览器，确认要运行的演进并导航到问题视图并尝试使用不同的问题和值提交您的表单。

您应该在终端播放窗口中看到结果（类似于下面的我的），如果是这种情况，您刚刚成功保存了几乎没有答案的新问题，您可以随意重复它 - 应该可以工作，因为总是会生成新的 id . 如果您希望您的表单还包含编辑等，我建议检查 JPA 在播放示例文件夹 (computer-database-jpa) 中的使用方式，因为这个示例已经变得太大了；稍后我可能会把它扔到 github，晚安，干杯。

```
Number of questions: 1
Question --- id: 50000, name: What is your favorite color?
Answer --- id: 50000, name: Blue question_id: 50000
Answer --- id: 50001, name: Red question_id: 50000 
```

# objective-c - 使用 componentsSeparatedByString 从 NSString 中删除多个单词

> ID：15140992
> 
> 赞同：2
> 
> 时间：2013-02-28T16:45:36.030
> 
> 标签：objective-c, nsstring, string-formatting

`componentsSeperatedByString`我想知道有没有使用in删除多个单词/标签的好方法`NSString`？唯一让我印象深刻的想法是调用此方法 3 次以删除我定义的所有要删除的标签。但这似乎不是很好的风格。那么有没有更好的方法来做到这一点？

```
#define REMOVE_TAG_1 @"cs193pspot"
#define REMOVE_TAG_2 @"portrait"
#define REMOVE_TAG_3 @"landscape"

// Formats the subtitle by removing the defined tags
- (NSString *)formatSubtitle:(NSString *)subtitle
{
    NSArray *tagsToKeep = [subtitle componentsSeparatedByString:[NSString stringWithFormat:@"%@",REMOVE_TAG_1]];

    NSLog(@"%@",[tagsToKeep description]);
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:59:47.470

假设标签由空格分隔，我首先将字符串拆分为一个单词数组：

```
NSArray *arrayOfTagsToFilter = @[ REMOVE_TAG_1, REMOVE_TAG_2, REMOVE_TAG_3 ];
NSArray *allTags = [subtitle componentsSeparatedByString:@" "]; 
```

然后使用过滤数组`NSPredicate`以获取数组中应删除的标签：

```
NSArray *tagsToRemove = [allTags filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF IN %@", arrayOfTagsToFilter]];

NSMutableArray *tagsToKeep = [NSMutableArray arrayWithArray:allTags];

[tagsToKeep removeObjectsInArray:tagsToRemove]; 
```

# java - joda time to sql MS access 数据库

> ID：15140995
> 
> 赞同：0
> 
> 时间：2013-02-28T16:45:42.663
> 
> 标签：java, sql, jodatime

如何在使用 joda time API 的程序调用时从 java 查询中插入日期并获取日期。因为我使用 joda time API 来计算接收日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:24:53.737

如果您使用的是 JDBC，只需在持久化之前将 JodaTime 日期转换为 JDK 日期。
这些方面的东西：

```
public void insertDateValue(DateTime value) throws SQLException {

    String insertString = "INSERT INTO tableName(datecolumn) VALUES(?)";

    PreparedStatement insert = null;

    try {
        insert = connection.prepareStatement(insertString);

        // Important part is right here:
        insert.setDate(1, new Date(value.getMillis()));
        // Oh, and the new object should be java.sql.Date

        insert.executeUpdate();
        connection.commit();
    } catch (SQLException e ) {
        if (con != null) {
            try {
                connection.rollback();
            } catch(SQLException excep) {
                // Should maybe do something here
            }
        }
    } finally {
        if (insert != null) {
            insert.close();
        }
    }
} 
```

从数据库中检索时，可以执行相反的操作。

# c# - 如何测试我的 SiteMap 中的所有节点在 MVC3 中是否有效？

> ID：15140996
> 
> 赞同：2
> 
> 时间：2013-02-28T16:45:43.350
> 
> 标签：c#, unit-testing, .net-4.0, nunit, sitemap

我想编写一个（单元？）测试来确认我站点站点地图中的每个节点都是有效的。我有大约 400 个节点，所以写一个测试显然是在尖叫。此外，我们遇到了一些性能问题`SiteMapManager`，[这个 SO 答案](https://stackoverflow.com/a/13730304/294863)表明这可能是因为那里的节点不好。我特别想测试以确保文件中的每个控制器和操作处理程序都是有效的（没有拼写错误、退役/重构的名称等）。

你会怎么做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:00:40.903

您可以使用路由测试库（即[http://mvcrouteunittester.codeplex.com/](http://mvcrouteunittester.codeplex.com/)）来检查站点地图中的节点是否正确路由到您的页面（而不是例如 404 处理程序）。像这样的东西：

```
 [TestMethod]
   public void TestSiteMap()
   {
      // Arrange
      var tester = new RouteTester<MvcApplication>();
      SiteMapNodeCollection nodes = LoadAllNodes();
      foreach (SiteMapNode node in nodes)
      {
         //check route results
         tester.WithIncomingRequest(node.Url)  ...//do your checks here
      }
   } 
```

如果您使用 Xml 站点地图，这可能是 LoadAllNodes 的实现：

```
 public List<string> LoadAllNodes(string siteMapFileName)
    {

        XmlDocument doc = new XmlDocument();
        doc.Load(siteMapFileName);

        var urls = new List<string>();
        AddNodes(doc.DocumentElement.ChildNodes, urls);
        return urls;
    }

    private void AddNodes(XmlNodeList nodes, List<string> urls)
    {            
        foreach (XmlNode child in nodes.OfType<XmlElement>())
        {
            urls.Add(child.Attributes["url"].Value);
            AddNodes(child.ChildNodes, urls);
        }
    } 
```

# jquery - jQuery post 对话框关闭

> ID：15140997
> 
> 赞同：0
> 
> 时间：2013-02-28T16:45:44.863
> 
> 标签：jquery, dialog

我有一个对话框，其中有两个按钮：“是”和“否”。对于“是”，我将通过

```
$.ajax({
    type: post
    ...
}) 
```

在“成功”部分下，我需要使用新页面重定向我的部分 html 标记，这可以正常工作。之后，我希望关闭该对话框，该对话框不起作用。

我使用的 cmd 是

```
$( this ).dialog( "close" ); 
```

我也试过：

```
$(this).closest('.ui-dialog-content').dialog('close'); 
```

和

```
$(this).parents(".ui-dialog-content").dialog('close'); 
```

以上都不适用于我的成功部分。我认为这可能是由于重定向。还不确定。

有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:48:51.633

我假设您在成功函数中使用 $(this)，如果这是真的，那么您的问题是“this”不再指向您的对话框。

在调用 ajax 函数之前保存对对话框 div 的引用，然后在成功函数中使用此引用

```
// before ajax
var that = this

// inside success
$(that).dialog('close'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:51:49.847

只需为您的对话框提供一个 id 并在您的 ajax 成功回调中输入：

```
$( "#yourDialogId" ).dialog( "close" ); 
```