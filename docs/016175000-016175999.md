# StackOverflow 问答 16175000-16175999

# c# - 如何使用 Web 服务读取文本文件

> ID：16175004
> 
> 赞同：1
> 
> 时间：2013-04-23T16:56:16.493
> 
> 标签：c#, .net, web-services

我想创建一个将文本文件作为参数并返回该文件内容的 Web 服务。

然后，此 Web 服务将由 C# 客户端使用。

这就是我到目前为止所拥有的（网络服务）：

```
[WebMethod]    
public String txtFile(String filename)
{
   StreamReader sr = File.OpenText(filename);   
   {
      String line = sr.ReadToEnd();
      return line;            
   } 
} 
```

和（客户）：

```
WebService ws = new WebService();
ws.txtFile("textfile.txt"); 
```

当我运行客户端时，我得到 UnauthorizedAccessException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:39:26.297

所以问题是当前的 IIS 用户没有访问文件的权限（甚至没有读取）。

显然，Web 服务将使用应用程序池标识，而不是当前（Windows）用户（除非您为您的应用程序打开了 Windows 身份验证）。

按照以下步骤为应用程序池添加权限：

1.  打开 Windows 资源管理器
2.  选择文件或目录
3.  右键单击文件并选择“属性”
4.  选择“安全”选项卡
5.  单击“编辑”，然后单击“添加”按钮
6.  单击“位置”按钮并确保选择您的机器
7.  在“输入要选择的对象名称：”文本框中输入“IIS AppPool\DefaultAppPool”
8.  单击“检查名称”按钮，然后单击“确定”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:08:51.947

您只发送文件名，那么服务如何通过文件名从服务器检查您的本地文件！

您需要提供文件名的完整路径，例如网络路径或文件服务器路径。并且该路径应该可供运行 Web 服务的用户访问。

但是，如果您更改如下方法并使用文件名发送文件内容，您可以将其保存到服务器。

```
[WebMethod]
public void Upload(byte[] contents, string filename)
{
    var appData = Server.MapPath("~/App_Data");
    var file = Path.Combine(appData, Path.GetFileName(filename));
    File.WriteAllBytes(file, contents);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:07:39.067

在您的 Web 服务中添加一些日志，并将输入参数和异常详细信息转储到日志框架（是的，您应该在 Web 服务中添加一个 try-catch）。

在你这样做之前：

```
StreamReader sr = File.OpenText(filename); 
```

还要检查：

```
if(!File.Exists(filename))
{
  // dump to the log file the file was not found at the location... filename
  return string.empty;
} 
```

那么你可以这样做：

```
using(var sr = File.OpenText(filename))
{
  string line = sr.ReadToEnd();
  return line;
} 
```

最后，请注意将相对路径从客户端传递到服务器并不意味着什么，您可能应该验证只能指定网络路径、C 或 D 驱动器或调用中的任何其他本地映射驱动器/路径客户端可能无法访问或访问您的 Web 服务器上的其他内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T17:44:09.490

如果您在 IIS 中运行 Web 服务，则 Web 服务不会神奇地以您的用户身份运行。除非您为您的应用程序打开了 Windows 身份验证，否则 Web 服务将使用应用程序池身份访问文件，并且该身份必须对文件具有权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:07:09.297

`File.OpenText`可以抛出许多不同的异常： http: [//msdn.microsoft.com/en-us/library/system.io.file.opentext.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.opentext.aspx) （我首先要确保路径格式正确）

`StreamReader.ReadToEnd`可以抛出**OutOfMemoryException**或**IOException**。请参阅此处的参考：http: [//msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)

# excel - 基于单元格和相邻单元格值的 Excel 条件格式

> ID：16175007
> 
> 赞同：12
> 
> 时间：2013-04-23T16:56:29.573
> 
> 标签：excel, conditional-formatting

是否可以根据其值上方的单元格在 Excel 中格式化单元格。基本上我正在编译一个电子表格，如果值自上面的条目以来下降，我希望单元格以浅绿色突出显示，如果它增加，我希望它变为红色。

我确信它相当简单，但我无法让它工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T17:08:50.680

是的，您需要做的就是将条件格式与公式一起使用。

例如，如果两个单元格是 A1 和 A2，其中 A2 是要更改颜色的单元格，那么您可以选择 A2 并从主页功能区中选择条件格式。然后选择新规则和“使用公式确定要格式化的单元格”。

然后，在出现的公式栏中输入`=A2>A1`并选择红色填充作为您要使用的格式。

这一次只能工作一个单元格；无法选择一系列单元格并期望每个单元格格式都基于它自己的相邻单元格

然后使用公式为单元格 A2 创建另一个规则，`=A2<A1`并选择浅绿色作为格式。

![在此处输入图像描述](https://i.stack.imgur.com/UiIn9.png)

# ios - IPA 中文件的 iOS 隐私

> ID：16175009
> 
> 赞同：2
> 
> 时间：2013-04-23T16:56:42.933
> 
> 标签：ios, xcode, file, private, ipa

我在我的 iOS 项目中添加了一个 sqlite DB，我希望它是私有的，我不希望任何用户看到里面的内容。但是一旦创建了 .ipa 文件，如果我将其扩展名更改为 .zip 并查看包中的内容，我就可以访问该 sqlite 文件。

如何添加 sqlite 文件以便无法从 ipa 文件访问它？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:01:57.913

您只能使访问文件变得更加困难，而不是使其成为不可能。您可以采取的一个步骤是在将文件放入 IPA 之前以某种方式对其进行加密。当然，用户无论如何都可以根除密钥并对其进行解密，但它会阻止那些试图窥探的更随意的用户。

流行的理论是，花时间通过为付费用户添加功能、增强功能等来投资软件要好得多，而不是花时间试图阻止少数用户滥用软件。您最终将获得在市场上表现更好的更高质量的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:28:09.730

Apple 提供了几种可供您使用的加密 API，因此未经授权的人无法访问您的数据。

注意：他们仍然可以访问该文件，但如果您正确使用加密，那么只有授权方才能读取数据。

这是关于基本 iOS 安全性的教程 - [http://www.raywenderlich.com/6475/basic-security-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6475/basic-security-in-ios-5-tutorial-part-1)

# antlr4 - 使 ANTLR4 解析树可序列化

> ID：16175011
> 
> 赞同：0
> 
> 时间：2013-04-23T16:56:48.907
> 
> 标签：antlr4

是否可以保存由 ANTLR4 生成的解析树？例如，通过使 ParseTree 或其子类可序列化。

我想使用 ANTLR4 来解析我项目中的源文件。我的项目很大，包含数百个源文件。通常，我需要遍历几个源文件的解析树来获取我想要的信息。完整的语法非常庞大，即使只解析 1 个源文件也需要一段时间。因此，每次我启动工具以获取 1 条信息（例如函数的调用者）时，再次解析所有源文件是不切实际的。如果我可以只解析一次并将解析器输出保存到硬盘中，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:31:21.293

如果您遇到性能问题，您应该确保您使用的是两阶段解析策略。例如，查看`TWO_STAGE_PARSING`以下测试中该字段的用法：

[测试性能.java](https://github.com/antlr/antlr4/blob/master/tool/test/org/antlr/v4/test/TestPerformance.java)

您可以提出关于在[ANTLR 4 问题跟踪器](https://github.com/antlr/antlr4/issues)`ParserRuleContext`上进行可序列化的请求。

PS：ANTLR（4.0.1）的下一个版本也将包含额外的性能改进。

# c# - 发布后 WCF 服务未连接

> ID：16175013
> 
> 赞同：0
> 
> 时间：2013-04-23T16:56:56.330
> 
> 标签：c#, .net, wcf, iis

我收到来自服务器的 HTTP 400 错误请求，使用 Fiddler2 我可以看到原因是

> 服务器在处理请求时遇到错误。异常消息是“访问被拒绝。”。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪位于 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)

当我在本地测试时，我从来没有得到这个。是否有遗漏的 IIS 设置或什么？

当我使用浏览器连接到 svc 文件时，它似乎没问题，只有当我尝试从我的测试客户端使用 POST 方法时。

我确保更改和 baseAddress 以匹配服务器。

有没有办法远程调试 Web 服务？我以前做过windows服务。

更新：我让它工作，在弄清楚如何远程调试之后，它只是一个导致 Web 服务崩溃的异常，它发回了 400 错误。我将包括有关如何远程调试 Web 服务的步骤。

1.  在服务器上运行 msvsmon.exe
2.  在 Visual Studio 中使用菜单 Debug -> Attach To Process...
3.  连接服务器，找到w3wp.exe（可能不存在，如果不存在，访问web服务启动会话）
4.  从客户端访问 Web 服务，它应该可以工作。

欲了解更多[信息](http://msdn.microsoft.com/en-us/library/aa291236%28v=vs.71%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:21:21.927

这是由于服务中的内部错误。没有通讯问题。远程调试帮助我解决了这个问题。

# database - 使用 Eloquent ORM 时是否需要在数据库级别维护外键？

> ID：16175017
> 
> 赞同：3
> 
> 时间：2013-04-23T16:57:04.803
> 
> 标签：database, orm, foreign-keys, laravel, eloquent

Eloquent 可以有效地管理与 Eloquent 模型的所有关系。那么，我真的需要在数据库中维护外键关系吗？在数据库级别维护关系是否会对应用程序的性能产生任何额外的影响，因为数据完整性已经由 ORM 层管理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:05:55.390

我个人不喜欢在使用 Eloquent 时在数据库中保留外键关系，因为我想在一个地方（应用层）处理所有依赖逻辑。

在性能方面确实没有理由拥有外键，这纯粹是一个架构/设计决定。

# android - 如何在 onCreate 而不是 Button Click 事件中打开 Radial-Menu-Widget？

> ID：16175019
> 
> 赞同：2
> 
> 时间：2013-04-23T16:57:16.323
> 
> 标签：android, android-widget

我已经在我的项目中实现了这个[Radial-Menu-Widget 。](https://code.google.com/p/radial-menu-widget/)但这会在按钮单击事件上打开小部件

```
testButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            pieMenu.show(v);
        }
}); 
```

我想在 onCreate 而不是在 Button Click 事件中显示这个小部件。是否有任何棘手的方法可以在没有任何点击事件的情况下执行上述代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T12:57:43.847

您可以从 OnCreate 函数中调用一个单独的函数，并且在 post 方法的帮助下，我们可以等到所有必要的启动生命周期方法完成。

```
private void ShowThePieMenu(RadialMenuWidget v) {
    LayoutInflater inflater = this.getLayoutInflater();
    final View layout = inflater.inflate(R.layout.yourlayoutname, null);
    layout.post(new Runnable() {
        public void run() {
            pieMenu.show(layout);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T12:48:35.200

我不知道你的径向小部件的详细信息，无论如何我想你应该将它调用到 Resume 事件中，可能传递中心点的坐标（它取决于你的小部件）

为了防止重新打开径向（如果您不想在显示已创建的活动时再次打开它），您必须设置一个布尔值来存储小部件状态（显示/隐藏）并防止再次调用 show 方法不想

# php - PHP在其他类中包含类

> ID：16175023
> 
> 赞同：7
> 
> 时间：2013-04-23T16:57:22.910
> 
> 标签：php, oop, class, include

我正在学习 OOP，并且非常困惑彼此使用课程。

我总共有 3 节课

```
//CMS System class
class cont_output extends cont_stacks
{
    //all methods to render the output
}

//CMS System class
class process
{
    //all process with system and db
}

// My own class to extends the system like plugin
class template_functions
{
    //here I am using all template functions
    //where some of used db query
} 
```

现在我想在两个系统类中使用我自己的类 template_functions。但是很迷茫怎么用。请帮助我理解这一点。

**编辑：对不起，我忘了提到我自己的类在不同的 PHP 文件中。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T16:59:29.220

首先，请确保您`include`在使用它之前的类文件：

```
include_once 'path/to/tpl_functions.php'; 
```

这应该在您的 index.php 中或在使用`tpl_function`. 还要注意类的可能性[`autoloading`](http://www.php.net/manual/en/language.oop5.autoload.php)：

从 PHP5 开始，您必须能够自动加载类。这意味着您注册了一个钩子函数，每次尝试使用尚未包含代码文件的类时都会调用该函数。这样做你不需要`include_once`在每个类文件中都有语句。这里有一个例子：

*index.php*或任何应用程序入口点：

```
spl_autoload_register('autoloader');

function autoloader($classname) {
    include_once 'path/to/class.files/' . $classname . '.php';
} 
```

从现在开始，您可以访问这些类，而不必再担心包含代码文件了。尝试一下：

```
$process = new process(); 
```

* * *

知道了这一点，您可以通过多种方式使用`template_functions`该类

* * *

只需*使用它*：

如果您创建它的实例，则可以在代码的任何部分访问该类：

```
class process
{
    //all process with system and db

    public function doSomethging() {
        // create instance and use it
        $tplFunctions = new template_functions();
        $tplFunctions->doSomethingElse();
    }
} 
```

实例成员：

以流程类为例。为了使`process`类中的 template_functions 可用，您创建一个实例成员并在需要它的地方初始化它，构造函数似乎是一个好地方：

```
//CMS System class
class process
{
    //all process with system and db

    // declare instance var
    protected tplFunctions;

    public function __construct() {
        $this->tplFunctions = new template_functions;
    }

    // use the member : 

    public function doSomething() {
        $this->tplFunctions->doSomething();
    }

    public function doSomethingElse() {
        $this->tplFunctions->doSomethingElse();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:01:35.413

您可以扩展`template_functions`类，然后您可以使用所有功能。

```
class cont_output extends cont_stacks //cont_stacks has to extend template_functions
{
    public function test() {
        $this->render();
    }
}

class process extends template_functions
{ 
    public function test() {
        $this->render();
    }
}

class template_functions
{
    public function render() {
        echo "Works!";
    }
} 
```

# java - 通过 jni 在 java 中存储 pthread_t

> ID：16175028
> 
> 赞同：1
> 
> 时间：2013-04-23T16:57:40.983
> 
> 标签：java, casting, java-native-interface, pthreads

我有一个同时具有 Java 和本机 (C/C++) 代码的应用程序。我需要`pthread_t`在 Java 端存储一个，Java 和 JNI 类型是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:44:58.740

转换`void*`并存储在 Java`long`中。

`pthread_t`通常是指向系统相关的指针`struct`；它将`int`在 32 位系统上为 32 位 (Java)，在 64 位系统上为 64 位 (Java `long`)。

# algorithm - 关于路径生成算法

> ID：16175031
> 
> 赞同：0
> 
> 时间：2013-04-23T16:57:51.277
> 
> 标签：algorithm, traversal

我需要设置一个二维空间（出于所有实际目的，一个二维数组）的路径..每个索引 [y][x] 都包含一个路径..例如

```
+--  --+   +--  --+
|  ||  |   |  ||  |
|  | ==     ==++== 
|  ||  |   |      |
+--  --+   +------+ 
```

虽然我可以随机初始化这个空间，但我希望能够生成一系列路径，以确保每个坐标都可以从其他坐标到达。

我应该看什么算法来解决这个问题？

我已经学习了许多***寻***路算法，例如 Dijkstra 或 A*，但我认为这些算法不适用于我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:45:32.430

您遇到的问题本质上等同于查找[生成树](http://en.m.wikipedia.org/wiki/Spanning_tree)，这可以使用深度优先搜索或广度优先搜索在 O(n) 中完成。

提示：请注意，如果 A 可以从 B 到达并且 B 可以从 C 到达，那么 A 可以从 C 到达（传递性）；也只要你没有单向走廊，那么如果 A 可以从 B 到达，那么 B 也可以从 A 到达（自反性）。

对于生成迷宫，一旦生成了跨度，就可以开始添加额外的边以添加一些变化（尽管额外的边通常会使迷宫更容易解决）。span 保证了连通性。

# spring - Spring - 空 servlet 路径的 @RequestMapping 不起作用

> ID：16175035
> 
> 赞同：0
> 
> 时间：2013-04-23T16:58:04.460
> 
> 标签：spring, spring-mvc

我正在使用带有默认注释映射的 Spring 3.2.2 Web MVC。我使用这样的 servlet 映射：

```
<servlet>
    <servlet-name>profil</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </init-param>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>de.kicktipp.web.config.servlets.ProfilServletConfig</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>profil</servlet-name>
    <url-pattern>/info/profil/*</url-pattern>
</servlet-mapping> 
```

这是我们的 servlet 配置：

```
@Configuration
@ComponentScan("de.kicktipp.controller")
@EnableWebMvc
public class ProfilServletConfig extends WebMvcConfigurerAdapter
{
    @Override
    public void addInterceptors ( InterceptorRegistry registry )
    {
       // we add a few interceptors here
    }

    @Bean
    public DefaultRequestToViewNameTranslator viewNameTranslator ( )
    {
        DefaultRequestToViewNameTranslator defaultRequestToViewNameTranslator = new DefaultRequestToViewNameTranslator();
        defaultRequestToViewNameTranslator.setStripExtension(false);
        defaultRequestToViewNameTranslator.setAlwaysUseFullPath(false);
        defaultRequestToViewNameTranslator.setPrefix("profil/");
        return defaultRequestToViewNameTranslator;
    }
} 
```

通配符匹配很重要，因为我们想用这种模式匹配许多 url，比如`/info/profil/page1`，`/info/profil/page2`等等。

当我想匹配`/info/profil`没有尾部斜杠的“基本”URL 时，它会被 servlet“配置文件”拾取。

现在我尝试了三种控制器方法来匹配`/info/profil`处理程序方法：

```
@RequestMapping("/")
protected void get1 () {}

@RequestMapping("")
protected void get2 () {}

@RequestMapping("/info/profil")
protected void get3 () {} 
```

只有最后一个有效。这是因为如果 servlet 中的路径为空字符串，则 UrlPathHelper#getLookupPathForRequest(javax.servlet.http.HttpServletRequest) 返回应用程序中的完整路径：

```
public String getLookupPathForRequest(HttpServletRequest request) {
    // Always use full path within current servlet context?
    if (this.alwaysUseFullPath) {
        return getPathWithinApplication(request);
    }
    // Else, use path within current servlet mapping if applicable
    String rest = getPathWithinServletMapping(request);
    if (!"".equals(rest)) {
        return rest;
    }
    else {
        return getPathWithinApplication(request);
    }
} 
```

对于对“/info/profil/”的请求，该方法将返回“/”，但对于“/info/profil”（没有尾部斜杠），它将返回“/info/profil”，因为其余变量是空字符串并且在前面该方法返回 pathWithinApplication。

其他路径通常与 servlet 映射中的路径匹配（因为 alwaysUseFullPath 默认为 false）。但是“根”路径与应用程序内部的完整路径匹配（就像它总是在 alwaysUseFullPath 为真时一样）。

为什么会这样？为什么 spring 不尝试匹配空字符串，而是尝试匹配应用程序中的路径？

在此处查看春季问题[https://jira.springsource.org/browse/SPR-10491](https://jira.springsource.org/browse/SPR-10491)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-14T14:10:59.130

尝试添加

`@RequestMapping(method = RequestMethod.GET) public String list() { return "redirect:/strategy/list"; }`

结果：

```
 @RequestMapping(value = "/strategy")
    public class StrategyController {
    static Logger logger = LoggerFactory.getLogger(StrategyController.class);

    @Autowired
    private StrategyService strategyService;

    @Autowired
    private MessageSource messageSource;

    @RequestMapping(method = RequestMethod.GET)
    public String list() {
        return "redirect:/strategy/list";
    }   

    @RequestMapping(value = {"/", "/list"}, method = RequestMethod.GET)
    public String listOfStrategies(Model model) {
        logger.info("IN: Strategy/list-GET");

        List<Strategy> strategies = strategyService.getStrategies();
        model.addAttribute("strategies", strategies);

        // if there was an error in /add, we do not want to overwrite
        // the existing strategy object containing the errors.
        if (!model.containsAttribute("strategy")) {
            logger.info("Adding Strategy object to model");
            Strategy strategy = new Strategy();
            model.addAttribute("strategy", strategy);
        }
        return "strategy-list";
    } 
```

** 学分：

[高级@RequestMapping技巧——控制器根和URI模板](http://duckranger.com/2012/04/advanced-requestmapping-tricks-controller-root-and-uri-templates/)

和

[dtr-trading.blogspot.it 的 CRUD 教程](http://dtr-trading.blogspot.it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:05:46.370

**[EDIT]**

As I see you're using annotation mvc config. The default mapping is configured to "/" path in your application. To change these default settings, you can edit your web.xml to this template:

```
<web-app>
  <!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext
       instead of the default XmlWebApplicationContext -->
  <context-param>
      <param-name>contextClass</param-name>
      <param-value>
          org.springframework.web.context.support.AnnotationConfigWebApplicationContext
      </param-value>
  </context-param>

  <!-- Configuration locations must consist of one or more comma- or space-delimited
       fully-qualified @Configuration classes. Fully-qualified packages may also be
       specified for component-scanning -->
  <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>de.kicktipp.controller.ProfilAppConfig</param-value>
  </context-param>

  <!-- Bootstrap the root application context as usual using ContextLoaderListener -->
  <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <!-- Declare a Spring MVC DispatcherServlet as usual -->
  <servlet>
      <servlet-name>dispatcher</servlet-name>
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <!-- Configure DispatcherServlet to use AnnotationConfigWebApplicationContext
           instead of the default XmlWebApplicationContext -->
      <init-param>
          <param-name>contextClass</param-name>
          <param-value>
              org.springframework.web.context.support.AnnotationConfigWebApplicationContext
          </param-value>
      </init-param>
      <!-- Again, config locations must consist of one or more comma- or space-delimited
           and fully-qualified @Configuration classes -->
      <init-param>
          <param-name>contextConfigLocation</param-name>
          <param-value>de.kicktipp.controller.ProfilServletConfig</param-value>
      </init-param>
  </servlet>

  <!-- map all requests for /info/profil/* to the dispatcher servlet -->
  <servlet-mapping>
      <servlet-name>dispatcher</servlet-name>
      <url-pattern>/info/profil/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

So, you have the `de.kicktipp.controller.ProfilServletConfig` on your application. Just check if the first code block for `de.kicktipp.controller.ProfilAppConfig` (contextClass) is really necessary.

Source: [Spring Docs](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/htmlsingle/#beans-java-instantiating-container-web)

# xaml - XamlReader.Parse 似乎不适用于 HierarchicalDataTemplate

> ID：16175038
> 
> 赞同：2
> 
> 时间：2013-04-23T16:58:12.983
> 
> 标签：xaml, hierarchicaldatatemplate, xamlreader

我正在尝试加载失败的 xaml：

```
<HierarchicalDataTemplate ItemsSource="{Binding Items}">
    <CheckBox Checked="CheckBox_Checked" Tag="{Binding Champ1}" Unchecked="CheckBox_Unchecked">
        <CheckBox.Template>
            <ControlTemplate>
                <TextBlock Background="{Binding Path=Background, RelativeSource={RelativeSource AncestorType=CheckBox}}" Text="{Binding Champ1}" />
            </ControlTemplate>
        </CheckBox.Template>
    </CheckBox>
</HierarchicalDataTemplate> 
```

在我的树视图的构造函数中使用它：

```
string template = "<HierarchicalDataTemplate ItemsSource=\"{Binding Items}\">" +
                    "<CheckBox Checked=\"CheckBox_Checked\"" +
                              " Tag=\"{Binding Champ1}\"" +
                              " Unchecked=\"CheckBox_Unchecked\">" +
                        "<CheckBox.Template>" +
                            "<ControlTemplate>" +
                                "<TextBlock Background=\"{Binding Path=Background," +
                                                                "RelativeSource={RelativeSource AncestorType=CheckBox}}\"" +
                                           "Text=\"{Binding Champ1}\" />" +
                            "</ControlTemplate>" +
                        "</CheckBox.Template>" +
                    "</CheckBox>" +
               " </HierarchicalDataTemplate>";

this.ItemTemplate = (HierarchicalDataTemplate)XamlReader.Parse(template); 
```

我收到此错误：

> 'Impossible de créer le type inconnu'HierarchicalDataTemplate'。numéro de ligne '1' 和 position de ligne '2'。

（我的机器是用法语配置的，这条消息的意思是：“无法创建未知类型的 HierarchicalDataTemplate”）。

有人知道为什么吗？当直接在 xaml 文件中编写时，xaml 片段可以完美运行。

谢谢 ！

* * *

# 编辑

我用一个简单的版本进行了测试：

```
string template = "<HierarchicalDataTemplate ItemsSource=\"{Binding Items}\">" +
                                "<TextBox Text=\"Test\"/>"+
                            " </HierarchicalDataTemplate>"; 
```

问题是一样的。

* * *

# 编辑2

好的，问题更广泛，似乎与“HierarchicalDataTemplate”无关

```
string test = "<TextBox Text=\"Test\" />";
var ret = XamlReader.Parse(test); 
```

产生同样的错误...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:25:24.613

好的，我发现了问题。

正如[John Bowen](https://stackoverflow.com/users/255294/john-bowen%20John%20Bowen)所说，第一个问题是无法处理的事件处理程序。第二个问题是 xaml 中缺少主命名空间。

所以这段代码有效：

```
string template = "<HierarchicalDataTemplate  xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" ItemsSource=\"{Binding Items}\">" +
                    "<CheckBox Tag=\"{Binding Champ1}\" >" +
                        "<CheckBox.Template>" +
                            "<ControlTemplate>" +
                                "<TextBlock Background=\"{Binding Path=Background," +
                                                                "RelativeSource={RelativeSource AncestorType=CheckBox}}\"" +
                                           " Text=\"{Binding Champ1}\" />" +
                            "</ControlTemplate>" +
                        "</CheckBox.Template>" +
                    "</CheckBox>" +
               " </HierarchicalDataTemplate>";

this.ItemTemplate = (DataTemplate)XamlReader.Parse(template); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:04:50.310

您不能使用事件处理程序，`XamlReader`因为它们需要位于 XAML 的代码隐藏中，而解析的 XAML 中显然不存在。

# xslt - xsl递归嵌套调用乘法总和

> ID：16175039
> 
> 赞同：0
> 
> 时间：2013-04-23T16:58:13.430
> 
> 标签：xslt, recursion, report, reporting

我有一个与此链接 XSL 中解决的问题类似的问题 [- sum multiplication of elements](https://stackoverflow.com/questions/8551324/xsl-sum-multiplication-of-elements)

我的问题是，我有订单而不仅仅是物品，每个订单可以有一个或多个项目。

最后我需要的是所有订单的成本，（除了必须将每个成本乘以数量）我已经用 xsl 2 解决了，但报告只支持 1.0

```
<root>
    <order>
      <item type="goods">
        <quantity unit="pcs">1</quantity>
        <cost>2.89</cost>
      </item>
      <item type="goods">
        <quantity unit="pcs">10</quantity>
        <cost>210.25</cost>
      </item>
    </order>
    <order>
      <item type="goods">
        <quantity unit="pcs">1</quantity>
        <cost>4.15</cost>
      </item>
    </order>
    <order>
      <item type="goods">
        <quantity unit="pcs">5</quantity>
        <cost>1.25</cost>
      </item>
      <item type="goods">
        <quantity unit="pcs">20</quantity>
        <cost>189.63</cost>
      </item>     
      <item type="goods">
        <quantity unit="pcs">3</quantity>
        <cost>1</cost>
      </item>     
      <item type="goods">
        <quantity unit="pcs">9</quantity>
        <cost>6</cost>
      </item>     
    </order>    
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:14:10.230

如果您只想要总计，那么应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>

  <xsl:template match="/">
    <xsl:call-template name="GetGrandTotal">
      <xsl:with-param name="items" select="//item" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="GetGrandTotal">
    <xsl:param name="items" />
    <xsl:param name="total" select="0" />

    <xsl:choose>
      <xsl:when test="not($items)">
        <xsl:value-of select="format-number($total, '0.00')"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:call-template name="GetGrandTotal">
          <xsl:with-param name="items" select="$items[position() > 1]" />
          <xsl:with-param name="total"
                          select="$total + ($items[1]/quantity * $items[1]/cost)" />
        </xsl:call-template>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
5965.39 
```

# python - 创建一个简单的python菜单

> ID：16175041
> 
> 赞同：-2
> 
> 时间：2013-04-23T16:58:14.913
> 
> 标签：python, menu

我正在尝试创建一个列表，向您显示一组选项来对列表进行更改。但它不起作用，请有人告诉我它有什么问题。

```
menulist=( "1\. Print the list",
        "2\. Add a name to the list",
        "3\. Remove a name from the list",
        "4\. Change an item in the list",
        "9\. Quit")

list=("johny","tom","kim","tim","jim")

target=input("Pick an item from the menu:")
 while (target in list):
     if target="1"
        print list
    elif target="2"
        Addname=input("Type in a name to add:")
        list=list.insert(Addname)
            print menulist()
    elif target="3"
        Removename=input("What name would you like to remove:")
        list=list.remove(Removename)
            print menulist()
    elif target="4"
        Changename=input(What name would you like to change:")
        changetoname=input("What is the new name:")
        list=list.replace('Changename','changetoname')
            print menulist()
    elif target="9"
            print"good bye" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:11:27.653

几件事

1.  你的变量被命名为列表，虽然这不是一个错误，但这是错误的形式
2.  你的列表真的是一个元组，元组不能改变
3.  list.insert 不是有效的python
4.  `input``raw_input`在 python 2.x中很危险，请尝试
5.  目标永远不会在“列表”中，因此你永远不会进入你的 while 循环
6.  几个语法错误

input 将评估它给出的任何东西，甚至像`import os;os.deltree("C:");` **DONT TRY THIS 之类的东西！**这将允许恶意用户在运行您的软件的系统上执行他们想要执行的任何操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T13:02:01.333

这是我在 Python 中的简单菜单示例。它是该站点旧版本的改进版本。

```
import os
import msvcrt as m

 # Function for waiting for key press
def wait():
    m.getch()

 # Clear screen before to show menu, cls is MS Windows command
os.system('cls')

ans=True
while ans:
    print("""
    Simple menu:
    ------------

    1.Add a Student
    2.Delete a Student
    3.Look Up Student Record
    4.Exit/Quit
    """)
    ans=input("What would you like to do? ")
    if ans=="1":
      print("\nStudent Added")
      print("\nPress Enter...")
      wait()
      os.system('cls')
    elif ans=="2":
      print("\nStudent Deleted")
      print("\nPress Enter...")
      wait()
      os.system('cls')
    elif ans=="3":
      print("\nStudent Record Found")
      print("\nPress Enter...")
      wait()
      os.system('cls')
    elif ans=="4":
      print("\nGoodbye") 
      ans = None
    else:
      print("\nNot Valid Choice Try again")
      print("\nPress Enter...")
      wait()
      os.system('cls')
      ans = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T13:36:56.393

修复和评论，它们主要是语法错误。

```
menulist= '''1\. Print the list,
    2\. Add a name to the list,
    3\. Remove a name from the list,
    4\. Change an item in the list,
    9\. Quit''' #assuming you want to display menulist, having it as a tuple is useless

lst=("johny","tom","kim","tim","jim") #don't use reserved names for variables, may mess up things

target=raw_input("Pick an item from the menu:")

if target=="1": #this is an equality operator, whereas = is used to assign a variable (This checks the equality basically)
    print lst

elif target=="2":
    Addname=raw_input("Type in a name to add:")
    list=list.append(Addname) #use append instead of insert, insert is for a specific position in list
    print menulist #no parentheses, menulist is not a function; also this doesn't have to be indented

elif target=="3":
    Removename=raw_input("What name would you like to remove:")
    list=list.remove(Removename)
    print menulist #again, I took the parentheses away

elif target=="4":
    Changename=raw_input("What name would you like to change:") #you'd missed the " at the beginning
    changetoname=raw_input("What is the new name:")
    list=list.replace(Changename, changetoname) #removed the '. They're the variables, not the strings 'Changename' etc that you want to replace.
    print menulist

elif target=="9":
    print"good bye" #excessive indenting

else: #this replaces the initial while
    #do nothing if the initial input is not 1,2,3,4 or 9
    print menulist 
```

# javascript - 在函数内添加变量

> ID：16175042
> 
> 赞同：0
> 
> 时间：2013-04-23T16:58:17.197
> 
> 标签：javascript

我有以下代码

```
var elements = parent.document.getElementsByTagName('a');
for(var i = 0, len = elements.length; i < len; i++) {
  elements[i].onclick = function () {
   return confirm_exit('".$_SESSION['SES_abr_langue']."');
  }
} 
```

我需要将 onclick 附加到现有的 onclick 事件（如果存在）。

当我`elements[i].onclick`在 function() 中添加时，它只是“硬编码”它。这意味着它从字面上放置 elements[i].onclick 而不是 onclick 的值。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:03:43.937

尝试使用 addEventListener：

```
function onLinkClick() {
    return confirm_exit('".$_SESSION['SES_abr_langue']."');
}
var elements = parent.document.getElementsByTagName('a');
for(var i = 0, len = elements.length; i < len; i++) {
  if (elements[i].addEventListener) {
    elements[i].addEventListener("click", onLinkClick, false);
  } else if (elements[i].attachEvent)  {// for < IE9
      elements[i].attachEvent("onclick", onLinkClick);
  }
} 
```

**编辑**

如果您想控制原始的 onclick，请使用以下命令：

```
function createLinkEvent(orgOnClick) {
    return function(e) {
        if (!confirm_exit('".$_SESSION['SES_abr_langue']."')) {
            return false;
        }
        if (orgOnClick) {
            return orgOnClick(e);
        }
        return true;
    };
}

}
var elements = parent.document.getElementsByTagName('a');
for(var i = 0, len = elements.length; i < len; i++) {
  elements[i].onclick = createLinkEvent(elements[i].onclick);
} 
```

# web-services - 带有 web 服务后端而不是数据库的 Dotnetopenauth

> ID：16175043
> 
> 赞同：0
> 
> 时间：2013-04-23T16:58:17.263
> 
> 标签：web-services, dotnetopenauth, membership-provider

我计划将 OpenAuth 身份验证添加到具有自定义成员资格提供程序的现有 asp.net webforms 应用程序中。这不是我在网上看到的问题（[http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp- net-application-using-universal-providers.aspx](http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx)），但对于 OpenAuth 要添加的两个额外数据表，我无权访问本地数据库。所有数据都必须使用 Web 服务获取。是否有任何简单的方法可以覆盖 OpenAuth 的数据库访问以使用 Web 服务的实现？也许有人已经这样做了，或者对应该如何做有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T09:30:58.670

我没有找到有关如何覆盖数据库通信以使用 Web 服务的任何线索，因此我创建了一个新的自定义类来模仿 Microsoft.AspNet.Membership.OpenAuth 类。我编写的方法是 Login、AddAccountToExistingUser、CreateUser、GetAccountsForUser 和 DeleteAccount。所有这些都会对我的 Web 服务进行适当的调用，该 Web 服务将数据存储在我的自定义数据库模式中。Login 方法还调用 FormsAuthentication.SetAuthCookie。

据我所知，Microsoft.AspNet.Membership.OpenAuth 的其余部分都可以使用。我想所有名为*LocalPassword*的方法也应该实现，但我还没有实现。

这很可能不是最好的解决方案，但它对我有用，我现在可以使用谷歌等来验证用户身份。

# primefaces - 添加主题后数据表上的条件颜色不起作用

> ID：16175044
> 
> 赞同：0
> 
> 时间：2013-04-23T16:58:19.903
> 
> 标签：primefaces, themes

) 我在使用 primefaces 主题时遇到了一个问题...我有一个 XHTML 页面包含一个数据表，其中包含根据条件着色的线条。但是在集成主题“trontastic”之后一切都丢失了......我必须做什么！帮帮我这个我的代码根据条件不显示这种风格

```
<p:dataTable var="fab" value="#{composantbean.list}" 
   rowStyleClass="#{fab.statut eq 'Actif' ? 'a'  : (fab.statut eq 'Obsolete' ? 'o':(fab.statut eq 'En voi d obsolescence' ? 'e':(fab.statut eq 'Obsolete mais diponible' ? 'or':null)))}"> 
```

这是风格不接受！

```
<h:head><style type="text/css">

.a
{
background-color: #00FF00 !important;
      font-weight: bold;
}
.o
{
background-color: #FF0000 !important;
      font-weight: bold;
}
.e
{
background-color: #FFFF00 !important;
      font-weight: bold;
}
.or
{
background-color: #FF9933 !important;
      font-weight: bold;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T13:50:26.517

我们这里有两个问题：

1.  打开萤火虫，我们可以看到背景分配给**背景**css 属性，**而不是**像在 primefaces 示例和您的代码中那样的背景颜色。因此，将每个背景颜色替换为背景。
2.  我们可以注意到自定义颜色恢复后高亮行颜色丢失。要修复它，打开 firebug 并在 CSS **.ui-state-highlight**中找到并添加**重要**的，对于*下班后*的主题，它看起来像：

> .ui-state-highlight {
> 
> ```
>  background: linear-gradient(#FFFFFF, #CCEEFF)
>  repeat scroll 0 0 rgba(0, 0, 0, 0) !important; 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:42:40.817

根据您的浏览器，使用萤火虫或其他任何东西检查您的数据表元素。我假设 primefaces 主题将某些 css 类附加到那里的组件。如果要编辑样式，则需要创建基于这些样式的 css 类。

默认情况下，css 类将是`.ui-component`

尝试将您的 css 类编辑为`.ui-component .o` 等等...

请记住 .ui-component 可以是任何东西，因此请使用 firefox 中的 firebug 或仅使用 chrome 中的 devloper 工具 (cntrl shift i ) 来检查元素 css 类。

# entity-framework - 使用实体框架从控制器访问 Scope_Identity

> ID：16175053
> 
> 赞同：0
> 
> 时间：2013-04-23T16:59:16.847
> 
> 标签：entity-framework

我需要从表的身份产生的任何东西中生成一个值。代码正在运行，但我想知道是否有更优雅的方式来做我正在做的事情。

问题是我的控制器不知道实体框架，因此我无法直接访问 EF 实体，一旦保存上下文，它将保存身份值。

```
[HttpPost]
    public ActionResult Index(NewPlannerEntryCreateViewModel vm)
    {
        if (ModelState.IsValid)
        {
            Mapper.CreateMap<PlannerEntryRecord, TradeSpendRecord>();

                //Need to insert the records, then update them so that I
                //can leverage existing stored procs
                TradeSpendRecord r = Mapper.Map<PlannerEntryRecord, TradeSpendRecord>(vm);
                r.VersionDate = now;
                _tsRepo.Insert(r);
                _uow.Save();
                _tsRepo.PostInsert();
                _uow.Save();

            return RedirectToAction("Index", "Home", new { area = "US" });
        } 
```

所以我调用了我的 repo 的 insert 方法，它将 EF 实体分配给一个私有字段，然后我在我的上下文中调用 Save() ，它更新了那个 EF 实体，然后我调用了一个 PostInsert() 方法来生成我的值：

```
 public class TradeSpendRepository : EFRepository<tblTradeSpend>, ITradeSpendRepository
{
    tblTradeSpend _record;

    public void Insert(TradeSpendRecord record)
    {
        Mapper.CreateMap<TradeSpendRecord, tblTradeSpend>();
        _record = Mapper.Map<TradeSpendRecord, tblTradeSpend>(record);

        base.Insert(_record);
    }

    /// <summary>
    /// We need to access the identity of this record, which 
    /// we can only do after SaveChanges() is executed in the controller
    /// </summary>
    public void PostInsert()
    {
        //Build the promo id off the ID
        string promoId = (_record.ID + 1).ToString();
        promoId = "000000" + promoId;
        promoId = "P" + promoId.Substring(promoId.Length - 7, 7);
        _record.PromoID = promoId;
        Update(_record);
    } 
```

有什么办法可以清理这个吗？

克里斯

# c - 在 64 位 Windows 7 上使用 mingw-w64 在 C/C++ 中通过 engOpen 调用 MATLAB 时崩溃

> ID：16175054
> 
> 赞同：1
> 
> 时间：2013-04-23T16:59:18.787
> 
> 标签：c, matlab, mingw, 32bit-64bit, mingw-w64

我试图弄清楚为什么我的 C/C++ 程序在我用`engOpen()`. 下面的代码打印`Hello World`然后抛出一个`APPCRASH`.

什么可能导致此崩溃，或者我如何从这里调试？

## 测试MATLAB.c

```
#include <stdio.h>
#include "engine.h"

int main(){
printf("Hello World.\n");
    Engine *ep;
        if (!(ep = engOpen(NULL))) {
            printf("Can't start MATLAB engine\n");
        } else {
            printf("Opening Matlab Engine\n");
        }

return 0;
} 
```

![输出后可执行文件在运行时崩溃](https://i.stack.imgur.com/a0zcS.png)

## 更多细节

我在用：

*   MATLAB R2012a
*   mingw-w64 gcc 版本 4.8.0
*   64 位 Windows 7

为了回应一些现有的 SO Q&A，我有

*   确认我正在链接到`C:\Program Files\MATLAB\R2012a\extern\lib\win64\microsoft\libeng.lib`and `C:\Program Files\MATLAB\R2012a\extern\lib\win64\microsoft\libmx.lib`。
*   包含`C:\Program Files\MATLAB\R2012a\bin\win64`在我的路径中，其中包含`libengine.dll`和`libmx.dll`
*   从`matlab /regserver`Windows 命令提示符运行

请注意，如果我将未执行`engOpen()`的`if`语句放入其中，则代码将运行完成。

我也不认为这是 mingw 所固有的，因为在 32 位 WinXP 机器上使用 MATLAB 2011 和`mingw32`.

编译器和链接器输出位于[http://pastebin.com/z9CAsb6X](http://pastebin.com/z9CAsb6X)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T10:16:16.570

我在使用 Visual Studio 时遇到了类似的问题。我认为这与 Matlab 64 位在关闭后处理警告的方式有关。我不得不补充：（Mathworks 在那里解决了我的问题）

```
warning('off','MATLAB:ClassInstanceExists') % Add this line 
```

到我的matlab代码，这可能意味着我的代码中确实不需要一些matlab类，但matlab编译器仍然想要找到？（我猜...）

如果这不能直接工作，您可能想要禁用更多警告？...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T05:51:10.230

我直接使用那些链接`DLL`而不是 lib 文件，比如：`libeng.dll, libut.dll, libmex.dll and libmat.dll`.

我的设置是`MinGW 4.8.1 64bit, Win7 64bit, Matlab 64bit`.

这个对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:47:28.583

你是如何链接 *.lib 的？在我的项目中，我使用 PostgreSQL，而不是链接提供的 MSVC 编译的 *.lib，我必须将其转换为 *.a。我认为这是一个像这样的程序：

[http://oldwiki.mingw.org/index.php/CreateImportLibraries](http://oldwiki.mingw.org/index.php/CreateImportLibraries)

# .net - WCF - Web 服务不安全或安全错误

> ID：16175056
> 
> 赞同：0
> 
> 时间：2013-04-23T16:59:19.810
> 
> 标签：.net, vb.net, wcf, service-reference

我正在尝试在我的 VB.Net 应用程序中使用安全的第三方 Web 服务（我无法控制），并且在尝试调用该服务时出现以下错误：

> 从另一方收到不安全或不正确安全的故障。有关故障代码和详细信息，请参阅内部 FaultException。

内部异常：

> {“必须理解标头：[{ [http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd) }Security] 不被理解。”}

该服务通过用户/通行证和证书进行保护。我通过 wsdl 创建了 WCF 服务引用就好了，下面是我用来设置服务的代码。我对 Web 服务的经验很少，而且我不知道该尝试什么。另外，如果有帮助的话，我正在使用 .NET 3.5。代码抛出异常就行了；

```
nameList.AddRange(service.getBlobNameByIdAndSectionId(section, id)) 
```

完整代码：

```
Private Function GetVendorService() As Services.ServiceClient
    Dim binding As New BasicHttpBinding(BasicHttpSecurityMode.TransportWithMessageCredential)

    binding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName
    binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic
    Dim ea As New EndpointAddress(GetVendorServiceURL())

    Dim service As New Services.ServiceClient(binding, ea)
    service.ClientCredentials.UserName.UserName = "user"
    service.ClientCredentials.UserName.Password = "password"

    Return service

End Function

Public Function GetVendorServiceURL() As String
    Select Case Informix.HostType
        Case HostServerType.Stage
            Return "https://url-s.net:8443/cxf/Service/v1/ws"
        Case HostServerType.Dev
            Return "https://url-d.net:8443/cxf/Service/v1/ws"
        Case Else 'Live
            Return "https://url.net:8443/cxf/Service/v1/ws"
    End Select
End Function

Private Function GetPdfListById(ByVal Id As Integer, ByVal Section As SectionId) As List(Of Services.blobName)
    Dim service As Services.ServiceClient = GetVendorService()
    Dim nameList As New List(Of Services.blobName)
    service.Open()
    nameList.AddRange(service.getBlobNameByIdAndSectionId(section, id))
    service.Close()
    Return nameList
End Function 
```

应用程序配置：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="ServiceSoapBinding" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
    <binding name="ServiceSoapBinding1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="https://url-d.menards.net:8443/cxf/Service/v1/ws"
    binding="basicHttpBinding" bindingConfiguration="ServiceSoapBinding"
    contract="Services.Service"
    name="ServiceSoapPort" />
</client> 
```

# jquery - 让 jQuery 知道何时添加了新的 div

> ID：16175063
> 
> 赞同：0
> 
> 时间：2013-04-23T16:59:33.937
> 
> 标签：jquery, drag-and-drop

如何更改以下代码，以便 jQuery 知道何时`DIV`添加新的并且它也可以申请这个新创建`DIV`的？

新的`DIV`包含一个图像，并在图像上传后添加。

```
<script>
$(function() {
$( ".divTestImg" ).draggable();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:14:44.090

当你添加新的 div 时，调用`.draggable`它。

```
newDiv.appendTo("body").draggable(); 
```

# grails - Grails GSP 抑制输出

> ID：16175065
> 
> 赞同：0
> 
> 时间：2013-04-23T16:59:36.527
> 
> 标签：grails, gsp

在 GSP 中使用函数时——比如添加到列表中——如何抑制返回值的输出。同样，“添加”返回 true，添加时如下：

```
${myList.add(myObject)} 
```

将“真”输出到屏幕。这能被压制吗？最好不要以“被黑”的方式（使用隐藏字段等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:11:26.633

为什么要在 中添加一个对象`GSP`？演示文稿应仅用于显示数据，因此此代码应位于控制器或服务中。

**编辑**

我认为您可以使用 JSP 标签来做到这一点：`<% myList.add(myObject) %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:40:36.300

我同意 Sergio 的观点，这样的操作应该放在其他地方。

出于您的问题的目的，您可以像这样欺骗它

```
${Math.round(10)?"":""} 
```

希望这可以帮助

# linux - 对文本文件中的每一行进行排序

> ID：16175073
> 
> 赞同：5
> 
> 时间：2013-04-23T17:00:08.420
> 
> 标签：linux, bash

我有一个文本文件，每行包含一些单词，例如：

```
stackoverflow coding programming
tag question badges 
```

我必须对每一行进行排序并保留行的顺序。例如，对于上面的示例，输出应该是：

```
coding programming stackoverflow
badges question tag 
```

到目前为止，我的解决方案是创建一个临时文件，其中所有行都已排序。bash 脚本如下所示：

```
FILE_TMP=$FILE".tmp" 
while read line
do
echo $line | xargs -n1 | sort | xargs >>$FILE_TMP
done < $FILE

mv $FILE_TMP $FILE 
```

它工作正常，但我不高兴我必须创建一个重复的文件，特别是因为文件很大。

那么，我的问题是有什么解决方案可以对文件的每一行进行排序吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:17:23.907

试试这个（如果文件不是空格分隔，您可能必须更改 sed）：

```
cat datafile.dat | while read line; do echo $line | sed 's/ /\n/g' | sort | gawk '{line=line " " $0} END {print line}' ; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:29:23.300

如果 Python 是一个选项，那么使用 fileinput 模块的就地支持将非常容易

```
>>> import os
>>> import fileinput
>>> for line in fileinput.input('file.txt', inplace=1):
...     line = line.rstrip(os.linesep)
...     print(' '.join(sorted(line.split())))
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:09:32.257

您可以编写一个文本编辑器（例如 vim 或 emacs）脚本来“就地”执行它，但这并不能真正帮助您避免使用临时文件，因为文本编辑器将在内部使用临时文件。

如果您真正的问题是运行速度很慢，那可能是因为它为源文件中的每一行生成了 3 个不同的进程。您可以通过使用像 perl 这样的脚本语言来解决这个问题，该语言可以通过文件排序行而不产生任何额外的进程。您仍然有一个附加文件用于输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-14T06:48:12.170

接受的答案有点慢。尝试这个：

```
awk ' {split( $0, a, " " ); asort( a ); for( i = 1; i <= length(a); i++ ) printf( "%s ", a[i] ); printf( "\n" ); }' input >output 
```

注意：您的 awk 必须是 GNU，以便具有 asort()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:30:36.933

我认为以下 awk 的优点应该可以完成这项工作：

```
prompt$ cat foo.awk
{
    n = split($0, words)
    do {
        change_occured = 0
        for (idx = 1; idx <= n; ++idx) {
            if (words[idx] > words[idx + 1]) {
                t = words[idx]
                words[idx] = words[idx + 1]
                words[idx + 1] = t
                change_occured = 1
            }
        }
    } while (change_occured != 0)
    for (idx in words) {
        printf("%s ", words[idx])
    }
    split("", array)
    print ""
}
prompt$ awk -f foo.awk <<EOF
heredoc> stackoverflow coding programming
heredoc> tag question badges
heredoc> EOF
coding programming stackoverflow  
badges question tag 
```

**编辑**请注意，这不是*就地*编辑。它充当从标准输入到标准输出的过滤器。您也可以为此使用 awk，但在那里读写文件感觉“笨拙”。如果您真的想避免临时文件，请使用 Perl 之类的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T17:37:29.907

实际上，针对此问题的任何“合理”解决方案都会将新内容写入新的临时文件，然后重命名。甚至像 perl “就地”处理 ( `perl -pi...`) 或文本编辑器之类的东西实际上也能做到这一点。如果你想*真正*做到，写入相同的物理磁盘位置，可以做到（新内容与旧内容占用完全相同的空间）但[它相当痛苦](https://unix.stackexchange.com/questions/11067/is-there-a-way-to-modify-a-file-in-place)。

[您可以将此答案](https://unix.stackexchange.com/a/11074/3647)中的代码编译为`overwrite`可执行文件，然后运行（警告：这很危险，请先备份您的文件！）

```
while read line ; do echo $line | xargs -n1 | sort | xargs ; done < f | ./overwrite f 
```

这是相当脆弱的，例如，您应该绝对确保脚本的排序不会混淆空白字符（DOS 换行符呢？和连续的空白？），脚本必须吐出相同数量（或更少）的每行字节数。

# php - exec() 不返回 PHP 进程

> ID：16175078
> 
> 赞同：1
> 
> 时间：2013-04-23T17:00:24.937
> 
> 标签：php, ffmpeg, exec

我正在使用 EXEC 命令从 PHP 运行 FFMPEG。我正在研究 XAMP 堆栈。

```
$command = 'ffmpeg -y -i input output 2>logfile';
exec ($command);
// after FFMPEG handling... 
```

如您所见，我将 FFMPEG 的输出重定向到日志文件。

这适用于较小的视频文件（最大约 10 MB）。

**我的问题是，对于较大的视频文件，exec() 之后的任何 PHP 命令都不会被执行。**但是请注意，FFMPEG 过程工作得很好。日志文件显示FFMPEG终止OK，生成的输出文件也不错。

我的 max_execution_time 设置为 10800，这应该很多（然后是一些）。无论如何，据我了解[max_time_limit](http://php.net/manual/en/function.set-time-limit.php)：

> set_time_limit() 函数和配置指令 max_execution_time 只影响脚本本身的执行时间。在确定脚本运行的最长时间时，不包括在脚本执行之外发生的活动所花费的任何时间，例如使用 system() ... 的系统调用。

**更新：**错误日志状态：*脚本过早结束*

到底是怎么回事？

# javascript - 更改css属性时jquery toggleClass在IE上不起作用，但在更改输入值时起作用

> ID：16175082
> 
> 赞同：0
> 
> 时间：2013-04-23T17:00:48.970
> 
> 标签：javascript, jquery, internet-explorer

需要知道是否可以在 IE9 上找到此问题的解决方法，它确实在 chrome/firefox 上完美显示，值按预期更改，但 div 不会扩展其高度。

此代码位于外部 .js 文件中，我尝试将其直接放入 html 中，但无济于事。

感谢您的帮助，代码如下：

HTML

```
<div class="active-collapsed">Some stuff here</div> 
```

CSS

```
.active-collapsed {height:345px;}
.active-expanded {height:690px;}
#exp-btn {margin-bottom:5px;width:80px;} 
```

jQuery v1.7.2

```
$(document).ready(function () {

    jQuery('#exp-btn').click(function () {
        $(".active-collapsed").toggleClass("active-expanded");

        if ($(this).val() == "+ profiles") {
            $(this).val("- profiles");
        } else {
            $(this).val("+ profiles");
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:14:17.070

不知道在 IE9 中是否会复制，但在 IE 中我发现在修改 CSS 属性时切换无效。

[尽管 JS 函数更改了元素属性，IE8 v8 并未更改 DOM 元素的类](https://stackoverflow.com/questions/2527228/ie8-v8-not-changing-class-for-a-dom-element-despite-js-function-changing-the-ele)

因此，请检查这是否适用于您并相应地更改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:14:30.233

[http://jsfiddle.net/4UGck/4/](http://jsfiddle.net/4UGck/4/)在 IE9 中运行良好。我所做的只是将 val() 更改为 text() 并将溢出：隐藏到您的 css 中。

```
$(function(){
    $('#exp-btn').click(function () {
        $(".active-collapsed").toggleClass("active-expanded");

        if ($(this).text() == "+ profiles") {
            $(this).text("- profiles");
        } else {
            $(this).text("+ profiles");
        }
    });

}); 
```

和 CSS

```
.active-collapsed {height:345px; overflow: hidden;} 
```

# kinect - 动感。如何在不影响功能的情况下处理多个质心？

> ID：16175091
> 
> 赞同：0
> 
> 时间：2013-04-23T17:01:19.530
> 
> 标签：kinect, processing, multiple-users, simple-openni

我目前正在攻读美术学士学位课程，最近我开始尝试通过阅读 Greg Borenstein 的“让事物看到”来学习编程。

我正在开发的作品是试图在观众使用 Kinect 在画廊空间中移动时跟踪多个质心。我希望观众在屏幕上留下足迹，当他们靠近某些区域时，他们的接近度会用一条线或其他东西来说明。我设法找到了一条线索，但只要另一个人出现，他们的观点就会突然联系起来。“接近线”似乎也只适用于当前用户，而不适用于以前的用户。

我想我的问题真的归结为如何隔离每个新用户，以便我可以创建适用于所有用户但不会相互干扰的函数或类..？

这是到目前为止的程序...

```
import processing.opengl.*;
import SimpleOpenNI.*;
import peasy.*;

PeasyCam cam;
SimpleOpenNI kinect;

ArrayList<PVector> trails;

Hotpoint piece;

PVector currentPosition;
PVector previousPosition;

int pieceX = 0;
int pieceY = 0;
int pieceZ = 2000;
int pieceSize = 500;

void setup() {
  size(1280, 680, OPENGL);
  kinect = new SimpleOpenNI(this);
  kinect.enableDepth();
  kinect.enableUser(SimpleOpenNI.SKEL_PROFILE_NONE);
  kinect.setMirror(true);

  trails = new ArrayList();

  piece = new Hotpoint(pieceX, pieceY, pieceZ, pieceSize);

  cam = new PeasyCam(this, 0, 0, 0, 1000);
}

void draw() {
  background(255);
  kinect.update();
  rotateX(radians(180));

  lights();

  stroke(0);
  strokeWeight(3);

  IntVector userList = new IntVector();
  kinect.getUsers(userList);

  piece.draw();

  for (int i=0; i<userList.size(); i++) {
    int userId = userList.get(i);

    PVector positionCenter = new PVector();
    kinect.getCoM(userId, positionCenter);

    trails.add(positionCenter);

    createTrail();

    piece.check(positionCenter);

    if(piece.check(positionCenter) == true) {
      stroke(255, 0, 0);
      line(positionCenter.x, positionCenter.y, positionCenter.z,
           pieceX, pieceY, pieceZ);
      stroke(0);
    }
  }
}

void createTrail() {
  for (int e=1; e < trails.size(); e++) {
    currentPosition = trails.get(e);
    previousPosition = trails.get(e-1);
    if (currentPosition.z < 1) {
      trails.clear();
    } 
    else {
      stroke(0);
      line(previousPosition.x, previousPosition.y, previousPosition.z, 
      currentPosition.x, currentPosition.y, currentPosition.z);
    }
  }
} 
```

这是热点类部分......

```
class Hotpoint {
  PVector center;
  color fillColor;
  color strokeColor;
  int size;
  int pointsIncluded;
  int maxPoints;
  boolean wasJustHit;
  int threshold;

  Hotpoint(float centerX, float centerY, float centerZ, int boxSize) {
    center = new PVector(centerX, centerY, centerZ);
    size = boxSize;
    pointsIncluded = 0;
    maxPoints = 1000;
    threshold = 0;

    strokeColor = color(random(255), random(255), random(255));
    fillColor = 0;
  }

  void setThreshold( int newThreshold ){
    threshold = newThreshold;
  }

  void setMaxPoints( int newMaxPoints ){
    maxPoints = newMaxPoints;
  }

  void setColor(float red, float blue, float green){
    fillColor = strokeColor = color(red, blue, green);
  }

  boolean check(PVector point) {
    boolean result = false;

    if (point.x > center.x - size/2 && point.x < center.x + size/2) {
      if (point.y > center.y - size/2 && point.y < center.y + size/2) {
        if (point.z > center.z - size/2 && point.z < center.z + size/2) {
          result = true;
          pointsIncluded++;
        }
      }
    }

    return result;
  }

  void draw() {
    pushMatrix();
      translate(center.x, center.y, center.z);
      shapeMode(LINES);
      noFill();
      stroke(red(strokeColor), blue(strokeColor), green(strokeColor), 255);
      box(size);
    popMatrix();
  }

  float percentIncluded() {
    return map(pointsIncluded, 0, maxPoints, 0, 1);
  }

  boolean currentlyHit() {
    return (pointsIncluded > threshold);
  }

  boolean isHit() {
    return currentlyHit() && !wasJustHit;
  }

  void clear() {
    wasJustHit = currentlyHit();
    pointsIncluded = 0;
  }
} 
```

任何帮助将不胜感激！

* * *

编辑：

非常感谢您的时间和您的回答@jesses.co.tt，但我一直无法理解它......例如，userList 上的循环与用户数组不同吗？我担心我一次问不止一件事，所以我把它分解了，首先尝试理解在没有人被链接的情况下绘制多条路径。

```
import processing.opengl.*;
import SimpleOpenNI.*;
import peasy.*;

SimpleOpenNI kinect;
PeasyCam cam;

ArrayList<PVector> trails1;
ArrayList<PVector> trails2;

PVector currentPosition;
PVector previousPosition;

void setup() {
  size(1280, 800, OPENGL);

  kinect = new SimpleOpenNI(this);
  kinect.enableDepth();
  kinect.enableUser(SimpleOpenNI.SKEL_PROFILE_NONE);
  kinect.setMirror(true);

  trails1 = new ArrayList();
  trails2 = new ArrayList();

  cam = new PeasyCam(this, 0, 0, 0, 1000);
}

void draw() {
  kinect.update();
  rotateX(radians(180));
  background(255);

  IntVector userList = new IntVector();
  kinect.getUsers(userList);

  //println(userList);

  for (int i=0; i<userList.size(); i++) {
    int userId = userList.get(i);
    //println(userId);
    PVector positionCenter = new PVector();
    kinect.getCoM(userId, positionCenter);

    stroke(0);
    strokeWeight(10);
    point(positionCenter.x, positionCenter.y, positionCenter.z);

    if (userId == 1) {

      trails1.add(positionCenter);
      createTrail1();
    } 
    else if (userId == 2) {
      trails2.add(positionCenter);
      createTrail2();
    }
  }
}

void createTrail1() {
  for (int e=1; e < trails1.size(); e++) {
    currentPosition = trails1.get(e);
    previousPosition = trails1.get(e-1);
    if (currentPosition.z < 1) { // [possibly x or y or all?]
      trails1.clear();
    } 
    else {
      // if (currentPosition.x != 0 || previousPosition.x != 0) { // [not working]
      stroke(0);
      line(previousPosition.x, previousPosition.y, previousPosition.z, 
      currentPosition.x, currentPosition.y, currentPosition.z);
      //trails.clear();
    }
  }
}

void createTrail2() {
  for (int e=1; e < trails2.size(); e++) {
    currentPosition = trails2.get(e);
    previousPosition = trails2.get(e-1);
    if (currentPosition.z < 1) { // [possibly x or y or all?]
      trails2.clear();
    } 
    else {
      // if (currentPosition.x != 0 || previousPosition.x != 0) { // [not working]
      stroke(0);
      line(previousPosition.x, previousPosition.y, previousPosition.z, 
      currentPosition.x, currentPosition.y, currentPosition.z);
      //trails.clear();
    }
  }
} 
```

所以，这适用于两个人，我可以编写一个非常长的程序来为有限数量的人工作，但我真正想要的是它是动态的......它在哪里'if（userId = = 1) {'，我希望它对每个人都有效，然后在路径部分，需要有一个新的路径数组，以便每次看到一个新人时我都会使用 'void onNewUser(int userId) {' 什么的..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:14:53.647

据我所知，您需要制作一个可调整大小的用户列表（SimpleOpenNI 已经提供给您）并为您找到的每个新用户创建一个 HotPoint 类的新实例（或为每个消失的用户删除它)...

您快到了，因为您正在正确地遍历已知用户列表...

您需要添加一个根据找到的用户数量调整大小的 HotPoints ArrayList...然后在找到新用户时创建一个新的 point 实例。你现在拥有它的方式，你只有一个实例，所以如果有两个用户，它将连接他们 - 这就是你所看到的。

确保根据需要从 ArrayList 中删除项目！

你真的很接近...... ;-)

所以...

```
// Global Variables
ArrayList users; 
```

然后，在你的用户循环中......

```
// Add a new HotPoint if we have more users than Points
if(i > users.size()) {
  users.add(new HotPoint(...));
}
// Delete From ArrayList if we have too many... 
else if(users.size() > userList.size()) {
  users.remove(...);
} 

// Cast and call methods
HotPoint piece = (HotPoint) users.get(i);
piece.check(positionCenter);
piece.draw();
etc... 
```

# netbeans - 使用源代码在 Netbeans 中导出 JAR

> ID：16175097
> 
> 赞同：7
> 
> 时间：2013-04-23T17:01:27.340
> 
> 标签：netbeans, jar, compilation

如何在 NetBeans 中导出**`.jar`带有源**( ) 的文件？`.java`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-15T14:36:44.333

很简单：

      `Right click your project`  »   `Properties`  »   `Build`  »  `Packaging`

验证`Exclude from Jar File`过滤器不包括 ***.java** 文件。
而已！

您生成的 jar 将包含源代码。

![项目属性](https://i.stack.imgur.com/sXgRy.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T22:47:30.683

JAR 文件是 Java 归档文件，通常将编译后的 .java 文件（类）包含在基于包的目录格式中。

通常，您希望以 jar 以外的格式提供 .java 文件（java 源代码）。

Netbeans 提供了从

> 文件 > 导出项目 > 到 ZIP。

这将导出 netbeans 项目以及任何源代码。

默认情况下，当您在 Netbeans 中构建项目时会生成 jar 文件，并且可以在您的 netbeans 项目内的“dist”目录中找到该 jar 文件。netbeans 中的“文件”选项卡 (Ctrl + 2) 显示您的项目文件。您可以右键单击 jar 文件并通过选择属性找到它在计算机上的确切位置。

有关从 Netbeans 导出 jar 的更多信息，请参阅此问题：[Export JAR with Netbeans](https://stackoverflow.com/questions/4498047/export-jar-with-netbeans?rq=1)

# android - .apk 包括 .git 文件夹

> ID：16175100
> 
> 赞同：3
> 
> 时间：2013-04-23T17:01:40.403
> 
> 标签：android, eclipse, git

我处于非常奇怪的情况，我的`.apk`文件在调试和发布模式下，由 Eclipse 导出，都包含该`.git`文件夹！我不知道为什么，我还检查了 Java Build Path，那里没有什么有趣的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:04:45.497

您不应该[在 Eclipse 工作区中拥有 git 存储库](http://wiki.eclipse.org/EGit/User_Guide#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)。这将避免这个和许多其他潜在的麻烦。

相反，git 存储库应该是 Eclipse 项目的父级之一。

# gwt - GWT ECLIPSE - module 'package.module' may need to be (re)compiled when linked

> ID：16175101
> 
> 赞同：0
> 
> 时间：2013-04-23T17:01:41.770
> 
> 标签：gwt, eclipse-plugin

I am getting this `module 'tdlat.AllTasks' may need to be (re)compiled`, when I link from my home page (ToDoList.html) to my 'AllTasks' page (AllTasks.html). But when I run directly from the AllTasks page I do not get this error. I am running this in Development Mode.

*   I have read and followed the steps from [GWT module may need to be (re)compiled REDUX](https://stackoverflow.com/questions/5719118/gwt-module-may-need-to-be-recompiled-redux), and I am still getting the same problem.
*   I have tried clearing out my browser cache.

**FILES PACKAGE**
![enter image description here](https://i.stack.imgur.com/OTTkc.png)

![Error](https://i.stack.imgur.com/hr34n.png)

**Code where the URL links to the error**

```
Anchor link = new Anchor(true);
horizontalPanel_1.add(link);
link.setHTML("All Tasks");
link.setHref("AllTasks.html"); 
```

My link is linked to a separate module.

EDIT

> link.setHref("AllTasks.html?gwt.codesvr=127.0.0.1:9997")

Fixed my problem, but I am not too sure how to make this work also in production mode. Here is what I have so far.

```
if (GWT.isProdMode()){
    // What goes here? Thanks!      
}
else
{
    link.setHref("AllTasks.html?gwt.codesvr=127.0.0.1:9997");
} 
```

Thank you for the assistance! Please let me know if there is any confusion.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:21:14.723

In development mode, you need to append the parameter `gwt.codesvr`. So, you can use

```
if(GWT.isProdMode()) {
   link.setHref("AllTasks.html");
} else {
   link.setHref("AllTasks.html?gwt.codesvr=127.0.0.1:9997");
} 
```

`GWT.isProdMode()` returns true in production mode and false when in development mode (127.0.0.1:8888) and is optimized by the GWT compiler, so everything in the `else` doesn't show up in the resulting JavaScript code, as if you just wrote `link.setHref("AllTasks.html")`. It is a neat tool for all kind of analyzing things in DevMode, without slowing down the production system.

# oracle-apex - 通过 Oracle APEX Restful Webservice 访问存储在 Marklogic Server 中的 xml 文档

> ID：16175102
> 
> 赞同：0
> 
> 时间：2013-04-23T17:01:43.063
> 
> 标签：oracle-apex, marklogic

我们的 dba 在 Marklogic 服务器上做了一个设置，他已经上传了几个 xml 文档。

我正在尝试通过 oracle apex RESTFUL Web 服务 pl/sql 代码访问这些文档

```
declare
l_clob       CLOB;
BEGIN

l_clob := apex_web_service.make_rest_request(
p_url => 'http://abcd.efg.com:8011/v1/documents?uri=/C/storage/data/temp.xml',
p_http_method => 'GET',
p_username    => 'temp',
p_password    => 'temp' );
dbms_output.put_line(l_clob);
END; 
```

dbms_output 正在打印以下错误 xml

```
<rapi:error xmlns:rapi="http://marklogic.com/rest-api">
<rapi:status-code>401</rapi:status-code>
<rapi:status>Failed Auth</rapi:status>  <rapi:message-code/> 
<rapi:message>Unauthenticated</rapi:message></rapi:error> 
```

任何想法是什么问题的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:40:01.133

我认为您需要告诉 Oracle 对 HTTP 请求进行摘要身份验证或切换您的 REST 服务器实例以使用基本身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:24:36.250

您使用的是哪种身份验证？基本的？

如果是这样，您是否授予临时用户正确的权限以保存数据或使用其余端点。

您可能想尝试仅使用管理员用户并将服务器身份验证类型设置为应用程序级别。只是看看它是否有效。我不会在生产中使用它。

# statistics - 证据质量不确定的贝叶斯概率

> ID：16175103
> 
> 赞同：1
> 
> 时间：2013-04-23T17:01:44.920
> 
> 标签：statistics, probability

假设贝叶斯更新器接收有限数量的信号之一。给他信号的设备质量不确定。如果它是高质量的，那么信号总是关于他感兴趣的某个潜在变量的完美信号。如果它是低质量的，那就是噪声。

在看到信号后，他更新了他对潜在变量和证据设备质量的信念，对吗？但我不确定如何建模。

我试过用两种截然不同的答案来看待它。a) 他使用他对设备质量的更新信念来形成关于基础变量的后验，并使用他对基础变量的更新信念来形成关于设备质量的后验。这给出了一个方程组，每个方程组都有唯一的解。b) 他在两个变量上形成一个联合概率分布并对其进行更新。

前者给出了一些奇怪的结果，例如如果他先前对来自高质量和低质量设备的信号分布的信念，他会向上更新他对专家质量的信念，而不管信号如何。

后者似乎是在强加一个不正确的独立假设。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T20:03:24.637

我的建议是考虑变量之间的关系。其他一切都由此而来。

不可靠传感器的一个模型是：测量值`P(M | V, R) P(V) P(R)`在哪里，您要测量的变量是什么，以及传感器的可靠性。这些变量可以是离散的或连续的，只要对手头的问题有意义。`M``V``R``P(M | V, R)`

这种模型上的操作可能包括计算`P(V | M)`、`P(R | M)`和`P(V, R | M)`。哪些对您有用取决于您要解决的问题。

我在论文 [1] 的第 6 章中研究了不可靠传感器的模型。再看一遍，似乎第 6.3 节及以后的部分与您最相关。

[1] [http://riso.sourceforge.net/docs/dodier-dissertation.pdf](http://riso.sourceforge.net/docs/dodier-dissertation.pdf)

# winforms - 在 VS2010 中创建表单副本后恢复 WinForm 设计

> ID：16175106
> 
> 赞同：1
> 
> 时间：2013-04-23T17:01:55.170
> 
> 标签：winforms, visual-studio-2010

表单包含主要设计，并在该表单的代码文件中包含所有代码。我刚刚复制了该表单并将其粘贴到 Visual Studio 解决方案资源管理器中存在原始表单的同一目录中。它现在显示与资源相关的错误。当我继续前进时，它显示错误：

> 错误 MSB3105：在“资源”参数中多次指定了项目“obj\x86\Debug\BAS.frmGI1.resources”。

现在我只是失去了主窗体的设计。如何恢复原始表单的设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:22:42.663

由于您已经*制作了*原始表单的副本，因此所有内容（类、设计器代码等）都被完全相同地复制。与任何其他类一样，如果您定义了两个具有**完全相同**名称的类；他们会发生冲突。同样，如果您有两个*分部*类的文件，并且在两个文件中都声明了一个具有**相同**名称的变量；它会发生冲突。

* * *

您所做的是导致与设计者发生上述冲突......并且无需恐慌（或诉诸版本控制或诸如此类的东西 - 没有双关语旨在[批评关键修复的答案](https://stackoverflow.com/a/16177098/238722)）。

接下来，让我们修复这些类名！

1.  只需右键单击副本，然后[*从项目中排除*](https://i.stack.imgur.com/GNxAV.png)；

2.  浏览到您的[项目目录](https://i.stack.imgur.com/gjQ1t.png)；

3.  使用您最喜欢的文本编辑器打开**`FormName.Designer.vb`**（或**`FormName.Designer.cs`**用于 C#）（**但不是**(!) 使用 Visual Studio）；

4.  查找表单的类（**`MySuperAwesomeForm`**在本例中）：

    ```
    Partial Class MySuperAwesomeForm 
    ```

    在 C# 中：

    ```
    partial class MySuperAwesomeForm // FormName.Designer.cs

    public partial class MySuperAwesomeForm : Form // FormName.cs 
    ```

5.  **`MySuperAwesomeForm`**用其他名称替换所有实例；示例：**`MySuperAwesomeFormTwo`**;

6.  现在使用您最喜欢的文本编辑器打开**`FormName.vb`**（或**`FormName.cs`**用于 C#）（再次确保它**不是**(!) Visual Studio）；

7.  **`MySuperAwesomeForm`**用步骤#4中使用的相同值替换所有实例；示例：**`MySuperAwesomeFormTwo`**;

    *   保存并关闭这两个文件（如果它们仍处于打开状态）。

从技术上讲，您应该只需要在每个文件的前几行之一（该行以、或开头）**`MySuperAwesomeForm`**替换为。**`MySuperAwesomeFormTwo`****`Public Class`****`partial class`****`public partial class`**

最后，返回 Visual Studio，[将新重新*分类*的表单](https://i.stack.imgur.com/2wNzD.png)添加回项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:55:47.227

您可以制作表单的副本，但您必须更改其名称（文件名和对象名称），以免与原始表单混淆。然后，在 Visual Studio 中，您将添加表单...现有...，然后选择新表单。

您的错误消息提到了 obj 目录，因此该错误可能是在构建期间发生的。我会查看您项目的资源以查看可能已复制的内容，如果它超出了您复制的原始文件。

如果您丢失了原始源代码，您可能无法恢复它。我希望您使用某种形式的源代码控制（VSS、TFS 等），或者至少经常复制到备份的网络磁盘？

# javascript - Javascript 中城市、州的正则表达式

> ID：16175107
> 
> 赞同：-5
> 
> 时间：2013-04-23T17:01:56.303
> 
> 标签：javascript, jquery, regex

我需要一个正则表达式来测试城市、州的文本框。

有效的例子是：
达拉斯，德克萨斯
达拉斯，德克萨斯
达拉斯，德克萨斯

我试过了`/([^,]),\s*(\w{2})/`。它并没有涵盖所有情况

任何人都可以帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:04:37.620

尝试：

```
var re = /^[A-Za-z]+,[ ]?[A-Za-z]+{2,}$/;
// Use `re.test("City,State");` to get true/false 
```

**演示：http:** [//jsfiddle.net/E3HCk/](http://jsfiddle.net/E3HCk/)

所有这一切都是要求字符串以至少一个字母字符开头，后跟一个逗号，然后是一个可选空格，然后是至少两个字母字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-26T16:27:39.637

在尝试了 Lan 的版本后，我发现以下对我有用。

```
\b[A-Z][a-zA-Z]+,[ ]?[A-Z]{2}\b 
```

我发现大部分状态都是大写和两个字符以及城市的首字母大写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:49:44.097

这可能会有所帮助..

```
^.*\, ?[a-zA-Z]* 
```

# java - .substring() 在 Unix/Linux 上处理 Java 中的多字节字符

> ID：16175110
> 
> 赞同：2
> 
> 时间：2013-04-23T17:02:03.573
> 
> 标签：java, encoding, decoding, multibyte

我有一个编码字符串（我没有关于它的信息并且可能无法更改），它在开头有 8 个随机字符（编码之前和解码之后）。然后有效数据开始。解码字符串：`String plainText = @#$%^&@#valid_data`

现在当我做 a`plainText.substring(8)`我得到**valid_data**。但有时，随机字符是多字节的，例如**普%^&@#valid_data**，其中普有 3 个字符。对此执行 a`plainText.substring(8)`返回**lid_data**。普算为 1，所以这 8 个字符一直延伸到**va**。

我想要的是，让我的代码将普算作 3，因此仅从 String 中删除普%^&@# `plainText`。

通过使字符串函数多字节不安全，我的 php 对应方轻松实现了这一点。即，使用`substr()`而不是`mb_substr()`.

这在Java中可能吗？或者确保不丢失有效数据的唯一方法是确保多字节字符根本不被加密？

编辑：我可能应该添加这个 - 这在我的本地 Windows 环境中可以正常工作，但在 Staging unix 环境中却不行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T17:05:38.630

有效数据是否总是以相同的字符开头？还是随机字符总是以相同的结尾？

PS：不好意思在这里问这个，我还不能评论帖子....

# android - android忽略特殊字符输入

> ID：16175121
> 
> 赞同：1
> 
> 时间：2013-04-23T17:02:56.630
> 
> 标签：android, character

任何Android专家都可以帮忙输入过滤器来忽略这个字符`-`吗？

我为此设置了一个类，但是所有字符都被忽略了.....

```
public class InputFilterReservedCharacters implements InputFilter {

    @Override
    public CharSequence filter(CharSequence source, int start, int end,
        Spanned dest, int dstart, int dend) {
        try {
        if (end > start) {
            for (int index = start; index < end; index++) {
                if (source.charAt(index) == "-".toCharArray()[0]) {
                    return "";
                }
            }
        }
        } catch (NumberFormatException nfe) {
        }
        return "";
    }
} 
```

感谢 StoneBird 的有用评论，我希望用户输入除“-”之外的任何内容。我是这样工作的：

```
@Override
public CharSequence filter(CharSequence source, int start, int end,
        Spanned dest, int dstart, int dend) {

    String returnValue = "";

    try {
        if (end > start) {
            for (int index = start; index < end; index++) {
                if (source.charAt(index) != '-'){
                    returnValue = Character.toString(source.charAt(index));
                }
            }
        }
    } catch (NumberFormatException nfe) {
    }
    return returnValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:53:10.517

您的代码`if (source.charAt(index) == "-".toCharArray()[0]) {return "";}`意味着如果函数找到`-`，则该函数将`""`作为结果返回，**从而结束该函数的执行。**这就是为什么您每次都得到空结果的原因，因为过滤器正在工作并且正在做您希望它返回的事情。尝试在您的函数中创建一个空字符串，将所有“有用”字符连接到该字符串，然后返回它。

```
public class InputFilterReservedCharacters implements InputFilter {

@Override
public CharSequence filter(CharSequence source, int start, int end,
    Spanned dest, int dstart, int dend) {
    private CharSequence result = ""; //change here
    try {
    if (end > start) {
        for (int index = start; index < end; index++) {
            if (source.charAt(index) != "-".toCharArray()[0]) { //change here
                result+=source.charAt(index);
            }
        }
    }
    } catch (NumberFormatException nfe) {
    }
    return result; //and here
}
} 
```

另外我相信使用`'-'`而不是双引号会给你一个字符，所以你不需要将它转换为字符数组。

# https - 在 Mule ESB 中创建 HTTPS 服务

> ID：16175124
> 
> 赞同：2
> 
> 时间：2013-04-23T17:03:03.113
> 
> 标签：https, mule

我正在尝试创建一个使用 HTTPS 入站端点的流。

到目前为止，我设法做到以下几点：

*   使用以下命令通过终端创建密钥库文件：

    `keytool -genkey -alias mule -keyalg RSA -keystore keystore.jks`

*   将 keystore.jks 放在我的 mule app src/main/resources 目录中

*   使用以下设置创建了一个全局 HTTPS 连接器：

![在此处输入图像描述](https://i.stack.imgur.com/DKEiz.png)

*   在我的 HTTP 入站端点中，选中“启用 HTTPS”复选框并选择我的新全局 HTTPS 连接器作为连接器参考。

我的问题是在访问所述端点时出现，让我们说 `https://localhost:8082/getProducts`

浏览器抛出此消息

```
SSL connection error
Unable to make a secure connection to the server. This may be a problem with the server,     or it may be requiring a client authentication certificate that you don't have.
Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error. 
```

在我的骡子日志中，我有以下内容：

```
ERROR 2013-04-23 12:08:55,451 [[integrador-catalogogit].connector.http.mule.default.receiver.02] org.mule.exception.DefaultSystemExceptionStrategy: Caught exception in Exception Strategy: Http Request line is malformed: "�?��?Qv??e]?.�t#?G??*?p?V*????stS��H?"
org.apache.commons.httpclient.ProtocolException: Http Request line is malformed: "�?��?Qv??e]?.�t#?G??*?p?V*????stS��H?"
at org.mule.transport.http.RequestLine.parseLine(RequestLine.java:52)
at org.mule.transport.http.HttpServerConnection.readRequest(HttpServerConnection.java:190)
at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:155)
at org.mule.work.WorkerContext.run(WorkerContext.java:311)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680)
ERROR 2013-04-23 12:08:55,467 [[integrador-catalogogit].connector.http.mule.default.receiver.03] org.mule.exception.DefaultSystemExceptionStrategy: Caught exception in Exception Strategy: Http Request line is malformed: "�?��?Qv???P?*?~c?q?6?]??W?[??��H?"
org.apache.commons.httpclient.ProtocolException: Http Request line is malformed: "�?��?Qv???P?*?~c?q?6?]??W?[??��H?"
at org.mule.transport.http.RequestLine.parseLine(RequestLine.java:52)
at org.mule.transport.http.HttpServerConnection.readRequest(HttpServerConnection.java:190)
at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:155)
at org.mule.work.WorkerContext.run(WorkerContext.java:311)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680)
ERROR 2013-04-23 12:08:55,469 [[integrador-catalogogit].connector.http.mule.default.receiver.03] org.mule.exception.DefaultSystemExceptionStrategy: Caught exception in Exception Strategy: Http Request line is malformed: "��U��Q�Qv?cN????;]<???-???^S???G[?��*�?�?�?�9�8�?�5�E�D�f�3�2�?�A���/��??�"
org.apache.commons.httpclient.ProtocolException: Http Request line is malformed: "��U��Q�Qv?cN????;]<???-???^S???G[?��*�?�?�?�9�8�?�5�E�D�f�3�2�?�A���/��??�"
at org.mule.transport.http.RequestLine.parseLine(RequestLine.java:52)
at org.mule.transport.http.HttpServerConnection.readRequest(HttpServerConnection.java:190)
at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:155)
at org.mule.work.WorkerContext.run(WorkerContext.java:311)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680) 
```

可能我在服务器端或骡子端都缺少配置步骤。

我将非常感谢您的帮助。

**编辑**：

我的 XML 最终看起来像[这样](http://cl.ly/code/2D091x2m1t2q)：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="CE-3.3.1" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <https:connector name="HTTP_HTTPS" cookieSpec="netscape" validateConnections="true" sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000" socketSoLinger="0" proxyHostname="localhost" proxyPort="80" doc:name="HTTP\HTTPS">
        <https:tls-client path="keystore.jks" storePassword="1234"/>
        <https:tls-key-store path="keystore.jks" keyPassword="1234" storePassword="1234"/>
        <https:tls-server path="keystore.jks" storePassword="1234"/>
    </https:connector>
    <flow name="getProducts" doc:name="getProducts">
        <https:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8082" path="getProducts" doc:name="HTTP" connector-ref="HTTP_HTTPS"/>
        <json:json-to-object-transformer returnClass="Codefuel.parameters.RequestParameters" doc:name="JSON to Object"/>
        <component class="Codefuel.product.mulesoft.GetProductByParameters" doc:name="GetProductByParameters"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:46:18.767

我已经使用您问题中的命令（密码太短）创建了一个密钥库，并在 Mule 3.4 上部署了您的配置（除了我删除了`123456`and ，因为我没有该类）并且它运行良好。`1234``json:json-to-object-transformer``component`

我可以`curl -k https://localhost:8082/getProducts`并得到答复。所以一定有其他你没有展示的东西会引起麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T14:40:31.190

我有这个异常：org.mule.exception.DefaultSystemExceptionStrategy：在异常策略中捕获异常：Http 请求行格式错误：（疯狂的字符集字符）

我滚动直到我意识到我的 http 服务位于 https 服务的同一个端口。更改端口并重试，它对我有用。

# javascript - 似乎无法在 javascript 中添加两个整数？

> ID：16175125
> 
> 赞同：5
> 
> 时间：2013-04-23T17:03:05.377
> 
> 标签：javascript, jquery, arrays, indexing, integer

我正在用 HTML5 画布构建 John Conways 的生活游戏。它有一个 gameOfLife 对象，其中包含一个包含所有单元格及其状态（死/活）的数组。这是构建单元的代码：

```
function cell(x,y){
    this.x = x;
    this.y = y;
    this.isAlive = false;
} 
```

我正在探索检查细胞周围细胞状态的方法。据我了解，一种方法是遍历数组并找到一个坐标与当前检查的单元格周围匹配的单元格。

我正在考虑另辟蹊径。通过从正在评估的单元格的索引中添加和减去 Y（和 X）轴上的单元格数量（+1 和 -1 的微小变化），您应该能够得出任何顶部的索引左，左，左下，右上，右，右下单元格。

**不过，我无法测试这个想法，因为它不能让我获得所需的索引：**

所以，在我的更新循环中：

```
//I know that there is a cell at the index of exampleIndex + cellsY
exampleIndex = 200;

game.getLivingNeighbours(exampleIndex);

function getLivingNeighbours(i){

    console.log(i) //Logs an integer
    console.log(grid.cellsY) //Logs an integer
    console.log(game.cells[i + grid.cellsY]); //Undefined?!

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:06:04.917

可能有两个原因：

1.  在 JavaScript 中，变量是松散类型的，这就是为什么`int`在算术运算之前解析它是好的原因。

    尝试：

    ```
    console.log(game.cells[parseInt(i,10) + parseInt(grid.cellsY,10)]); 
    ```

2.  您正在尝试访问一个数组，您需要检查 `parseInt(i,10) + parseInt(grid.cellsY,10)`您的数组中是否存在索引。

# php - 无法让聚合函数工作

> ID：16175132
> 
> 赞同：0
> 
> 时间：2013-04-23T17:03:24.633
> 
> 标签：php, mongodb, aggregation-framework

我对 Mongo 完全陌生，我在围绕聚合框架时遇到了一些严重的麻烦。我有一个看起来像这样的文档：

```
record {
    _id: '2013-04-22/tacos',
    first: {
        something: {0: 1, 1:4},
        somethingelse: {0: 18, 1:22}
    },
    second: {
        0: [11, 18, 7],
        1: [17, 9, 22]
    },
    metadata: {
        date: '2013-04-22'
    }
} 
```

我想要做的是获取 first.something 中每个项目的总和（因为这将需要处理多个文档），第二个中的每个项目，然后是`first.something`, `second.<whatever>.0`,`second.<whatever>.1`和中所有项目的总和`second.<whatever>.2`。所以我正在寻找这样的结果（请原谅我的格式）：

```
sum(first.something.0):      1
sum(first.something.1):      4
sum(second.0.0):            11
sum(second.0.1):            18
sum(second.0.2):             7
sum(second.1.0):            17
sum(second.1.1):             9
sum(second.1.2):            22
sum(first.something.all):    5
sum(second.<whatever>.0):   28
sum(second.<whatever>.1):   27
sum(second.<whatever>.2):   29 
```

现在我只是想让前两个工作，在一个记录上，我有这个：

```
// $db is my collection, and is verified to work
$aggregate = array(
    '$group' => array(
        '_id' => '$metadata.date',
        'first_zero' => array('$sum' => 'first.something.0'),
        'first_one' => array('$sum' => 'first.something.1')
    ),
    '$match' => array(
        "metadata.date" => '2013-04-22'
    )
);
$cursor = $db->aggregate($aggregate);
var_dump($cursor); 
```

但是我的输出告诉我`exception: A pipeline stage specification object must contain exactly one field.`。但是，如果我省略了该`'$match'`部分，它会返回带有 int(0) 的记录，`first_zero`如下`first_one`所示：

```
array(2) {
  ["result"]=>
  array(1) {
    [0]=>
    array(3) {
      ["_id"]=>
      string(10) "2013-04-22"
      ["clicks_zero"]=>
      int(0)
      ["clicks_one"]=>
      int(0)
    }
  }
  ["ok"]=>
  float(1)
} 
```

所以我什至无法让简单的部分工作。我在这里做错了什么？甚至是`second.<whatever>.0`我能做的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:58:24.220

我不是 PHP 方面的专家，但聚合查询应该如下所示：

```
 $aggregate = array(
      array('$group' => array(
          '_id' => '$metadata.date',
          'first_zero' => array('$sum' => 'first.something.0'),
          'first_one' => array('$sum' => 'first.something.1')
      )),
      array('$match' => array(
          "metadata.date" => '2013-04-22'
      ))
  ); 
```

每个管道运算符都应该在哈希/数组中。

**编辑**

`$match`但是，由于最后的管道，上述内容不会给您任何结果。前一个管道中没有创建任何`metadata.date`字段，因此没有结果与您的查询匹配。正确的解决方案是：

```
 $aggregate = array(
      array('$match' => array(
          "metadata.date" => '2013-04-22'
      )),
      array('$group' => array(
          '_id' => '$metadata.date',
          'first_zero' => array('$sum' => 'first.something.0'),
          'first_one' => array('$sum' => 'first.something.1')
      ))
  ); 
```

这会给你：

```
{
"result" : [
    {
        "_id" : "2013-04-22",
        "first_zero" : 1,
        "first_one" : 4
    }
],
"ok" : 1
} 
```

# rest - 使用 JWT 联合身份的 REST 身份验证/授权

> ID：16175133
> 
> 赞同：6
> 
> 时间：2013-04-23T17:03:25.110
> 
> 标签：rest, identity, federation, jwt

我正在考虑开发一个使用 REST 公开服务的应用程序。这些服务将通过浏览器和非浏览器客户端访问。我预计会有许多由不同团体拥有和管理的软件安装。我想让一个系统的用户能够访问另一个系统上的服务。它们不会共享相同的身份存储。我希望用户可以对其实例进行身份验证，然后使用令牌向其实例和远程实例发出请求。这似乎是 JSON Web Tokens (JWT) 的一个很好的用途。每个系统都需要配置为相互信任由证书签名的令牌。

我已经读到这可以使用带有 JWT Bearer 令牌的 OAuth 来完成，但这似乎比需要的开销更大。为什么将不记名令牌交换为访问令牌而不是仅使用不记名令牌？我质疑 OAuth 是否合适，因为它不是控制系统是否可以访问用户的数据，就像网络上的许多示例一样，而是用户是否可以访问存储在系统中的数据。

问题的下一部分是确定如何创建这些 JWT 令牌，看起来像 WS-Trust STS 这样的东西是合适的。我还没有看到任何简单的，只是验证用户并返回令牌。可能还支持延长令牌的到期时间和令牌的验证是否有用？

过去，我能够使用带有 WS-Security 和 SAML Assertions 的 SOAP 来启用这种类型的功能。我想看看是否可以使用 REST 和 JWT 令牌来完成相同的操作。网上有很多帖子建议不要使用自己的安全框架，所以我有点犹豫要不要继续前进。我看到微软添加了处理程序来保护使用 JWT 令牌的服务，所以他们似乎看到了这种方法的一些价值。

**有没有人了解以符合标准且简单**的方式为 REST 服务完成这种身份联合的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T15:36:20.897

是的，这是我向客户推荐的方法。事实上，JWT 是 Windows Azure 移动服务保护其端点的方式。JWT 处理起来相对简单（例如与 SAML 令牌相比），但与`access_tokens`（例如具有签名）相比，它保留了有趣的属性。

[此文档](https://docs.auth0.com/webapi)显示了如何使用 WebApi 和我们的产品（如果您使用的是 MS 技术）进行此操作的示例。这些原则是通用的，无论您是否使用我们的 STS，您都可以应用。

# jsp - RenderRequest 在 liferay6 中调用 jsp

> ID：16175135
> 
> 赞同：0
> 
> 时间：2013-04-23T17:03:40.353
> 
> 标签：jsp, liferay

我不确定为什么这不起作用。

**该jsp：**

```
<a href="<portlet:renderURL >
<portlet:param name="page" value="/view_dettaglio.jsp"/>
<portlet:param name="id" value="<%=rs.getInt(1)%=>"/>
</portlet:renderURL>"><%=rs.getInt(1)%></a> 
```

**类中的方法：**

```
@Override
public void doView(final RenderRequest renderRequest, final RenderResponse renderResponse) throws PortletException, IOException {
  String page = ParamUtil.getString(renderRequest, "page");
 String id = ParamUtil.getInteger(renderRequest, "id");
  renderRequest.setAttribute("id",id.toString());   
  this.include(page, renderRequest, renderResponse); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:28:11.273

你定义了`portlet`命名空间吗？

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %> 
```

最好在使用之前将呈现 URL 存储在一个单独的变量中，这样在引用中就不会发生冲突：

```
<portlet:renderURL var="renderUrl">
    <portlet:param name="page" value="/view_dettaglio.jsp"/>
    <portlet:param name="id" value="<%=rs.getInt(1)%>"/>
</portlet:renderUrl>

<a href="<%=renderUrl%>"><%=rs.getInt(1)%></a> 
```

您的参数值也有错误`id`：右括号包含一个额外的等号，所以它说`%=>`而不是`%>`. 这可能是问题的真正原因。

# c++ - 如何为不可创建的类创建包装器？

> ID：16175142
> 
> 赞同：0
> 
> 时间：2013-04-23T17:03:55.890
> 
> 标签：c++, c++-concepts

我正在使用特定的类库。所有可用的值类都派生自基类。有标量类型

```
oaBooleanValue : public oaValue
oaIntValue     : public oaValue
oaFltValue     : public oaValue
oaStringValue  : public oaValue 
```

前 3 个类将方法 get() 定义为返回值。第 4 类将 get 定义为引用。

```
oaBoolean get() const;
oaInt     get() const;
oaFloat   get() const;
void      get(oaString& value) const; 
```

我需要在我的模板包装类中统一使用所有 4 个类。我已经编写了如下的辅助 oaStringValueGetter 类。但是有问题。基类 oaValue 限制默认构造函数和复制构造函数。只有一种方法可以使用静态“create()”方法创建实例。

**有没有办法向我的类添加一些类型转换方法，以便它自动从 oaStringValue 转换？**

```
class oaStringValueGetter : public oaStringValue
{
public:
  oaString get() const
  {
    oaString str;
    oaStringValue::get(str);
    return str;
  }
}; 
```

这是从库中获取的部分类定义，供参考

```
class oaObject {
public:
  // public methods are here

protected:
  ~oaObject();

private:
  oaObject();
  oaObject(const oaObject& obj);

  oaObject& operator=(const oaObject& obj);
};

class oaValue : public oaObject {
public:
  void                    destroy();
  oaBoolean               isEqual(oaValue *value) const;
  oaValue                 *copy() const;
};

class oaString; // library-defined custom string class

class oaStringValue : public oaValue {
public:
  static oaStringValue* create(oaObject* database, const oaString  &value);

  void get(oaString& value) const;
  void set(const oaString& value);
};

typedef int oaInt4;

class oaIntValue : public oaValue {
public:
  static oaIntValue* create(oaObject* database, oaInt4 value);

  oaInt4 get() const;
  void set(oaInt4 value);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:57:35.473

我认为您混淆了包装器与子类的概念。

包装器不一定是包含类的子类，它可以由包含类的一个*实例*组成，其中对组合类的调用被委托给组合类，而不是直接继承。

在您的情况下，让包装器包含包装类的实例，然后委派调用可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:14:18.667

尝试创建一个模板函数，通过返回对象的 get() 方法的结果从 T 类型的对象中获取值。这将是标量的默认实现。然后对该模板进行专门化，其中 T=oaString 和临时 oaString 变量用于根据您的界面需要获取字符串值。作为结果返回该变量。希望对你有帮助

# perl - 在perl中连接字符串时出现意外结果

> ID：16175144
> 
> 赞同：4
> 
> 时间：2013-04-23T17:04:18.140
> 
> 标签：perl

我正在尝试执行以下脚本，但没有获得所需的输出。似乎它仍在保留旧值并继续连接它。

./test.pl -v v10,v11,v12

实际结果 => 'v10','v11','v10','v12','v10','v11','v10'

预期结果 => 'v10','v11','v12'

你能帮忙解决这个问题吗？

```
#!/usr/bin/perl

use strict;
use warnings;
use Getopt::Long;

my ($versionFlag,$finalVersionList);

sub validateInputAndFilter
{
        my ($passedVersionList) = @_;
        $finalVersionList ="";

        my @versionList = split(",",$passedVersionList);
        foreach my $ver (@versionList)
        {
                if($ver =~ m/^v[0-9][0-9]$/)
                {
                        $finalVersionList .= "'$ver',$finalVersionList";
                }
                else
                {
                        print "\nWARNING: Passed version *** $ver *** is NOT in expected format...skipping...\n";
                }
        }
        $finalVersionList =~ s/\,$//;
        print "\n\nfinalVersionList => $finalVersionList\n\n";
}

GetOptions('v|version=s' => \$versionFlag) || die "Please pass version list separated by comma";

if(defined $versionFlag)
{
        &validateInputAndFilter("$versionFlag");
}
else
{
        die "Please pass version list separated by comma";
}
exit 0; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:07:54.393

这：

```
$finalVersionList .= "'$ver',$finalVersionList"; 
```

应该只是：

```
$finalVersionList .= "'$ver,'"; 
```

`$foo .= $bar`; 相当于：

```
$foo = $foo . $bar; 
```

所以，`$finalVersionList .= "'$ver',$finalVerionList";`相当于：

```
$finalVersionList = $finalVersionList . "'$ver',$finalVersionList"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:11:05.250

改变：

```
 $finalVersionList .= "'$ver',$finalVersionList"; 
```

到：

```
 $finalVersionList .= "'$ver',"; 
```

你在这里做多个追加。您最初拥有的内容相当于：

```
 $finalVersionList = $finalVersionList . "'$ver',$finalVersionList"; 
```

这不是你想要的。如果您想`'$ver$',`成为列表的开头，您可以执行以下操作：

```
$finalVersionList = "'$ver'," . $finalVersionList; 
```

或者：

```
 $finalVersionList = "'$ver',$finalVersionList"; 
```

# ruby - Calais Gem 无法将 nil 转换为字符串

> ID：16175145
> 
> 赞同：1
> 
> 时间：2013-04-23T17:04:23.960
> 
> 标签：ruby, opencalais

我将加莱 gem 与 Ruby 1.9.3 一起使用，当我使用以下代码片段时：

```
 rdf = Calais.process_document(
       :content => text,
       :content_type => :html,
       :license_id => 'xxxxxxxxxxxxxxxxxxxxxx',
       # :output_format => :json,
       :metadata_enables => ["SocialTags"]

   ) 
```

我确定文本在那里。堆栈跟踪如下。有谁知道有什么问题？

```
Completed 500 Internal Server Error in 39423ms

TypeError - can't convert nil into String:
  (gem) calais-0.0.13/lib/calais/response.rb:92:in `parse'
  (gem) calais-0.0.13/lib/calais/response.rb:92:in `block in extract_data'
  (gem) nokogiri-1.5.6/lib/nokogiri/xml/node_set.rb:239:in `block in each'
  (gem) nokogiri-1.5.6/lib/nokogiri/xml/node_set.rb:238:in `upto'
  (gem) nokogiri-1.5.6/lib/nokogiri/xml/node_set.rb:238:in `each'
  (gem) calais-0.0.13/lib/calais/response.rb:90:in `extract_data'
  (gem) calais-0.0.13/lib/calais/response.rb:29:in `initialize'
  (gem) calais-0.0.13/lib/calais.rb:56:in `new'
  (gem) calais-0.0.13/lib/calais.rb:56:in `process_document' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:00:17.433

这似乎是加莱宝石中的一个问题，也许是新版本的 nokigiri。

试试[这个](https://github.com/bborn/calais/commit/de0c811e2f6383ecbea8dd9ddc29351e765b1e4e)分支，提交表明它已经修复了 nokogiri 1.5.6 问题。

[https://github.com/bborn/calais/commits/master](https://github.com/bborn/calais/commits/master)

# ruby-on-rails - 使用 ransack 创建搜索页面并将结果路由到同一页面

> ID：16175147
> 
> 赞同：1
> 
> 时间：2013-04-23T17:04:36.257
> 
> 标签：ruby-on-rails, ruby, search, search-engine, ransack

我是 RoR 的新手。我正在尝试创建一个主页/索引页面，其中将包含一个 ransack gem 的搜索表单。我不知道该怎么做。
我有 6 个相互关联的模型。我想创建一个搜索表单并将结果路由回查看者的搜索页面。

任何帮助将不胜感激，因为我已经花了 4 天时间试图弄清楚。

谢谢你

以下获取输入，然后将我重定向到带有搜索结果的应用程序/索引页面。

applications_controller.rb

```
class ApplicationsController < ApplicationController
  before_filter :authenticate_user!
  before_filter :only_allow_admin, :only => [ :index, :edit, :destroy ]

  # GET /applications
  # GET /applications.json
  def index
    @apps = Application.all
    @search = Application.search(params[:q])
    @apps = @search.result
    @search.build_condition
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @apps }
    end
  end 
```

home_controller.rb

```
class HomeController < ApplicationController
  #before_filter :search

  def search
    # @searchphrase = "%" + params[:q] + "%"
    # @results = Database.find(:all, :conditions => [ "name LIKE ? ", @searchphrase])
    # render :layout => false
  end

  def index
    @search = Application.search(params[:q])
    @apps = @search.result
    @search.build_condition

    respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @apps }
    end
  end

  def about
  end

end 
```

家庭控制器中的 index.html.erb

```
<h2>Core Database</h2>
<%= javascript_include_tag "prototype" %>
<%= search_form_for @search do |f| %>
  <div class="field">
    <%= f.label :name_cont, "Name contains" %>
    <%= f.text_field :name_cont %>
  </div>
  <div class="actions"><%= f.submit "Search" %></div>
<% end %>

<div id="results"><% yield %></div> 
```

# php - 允许的内存大小为 262144 字节已用尽（尝试分配 24576 字节）

> ID：16175153
> 
> 赞同：51
> 
> 时间：2013-04-23T17:04:50.937
> 
> 标签：php

我要疯了。

我收到了下一条消息：

```
Allowed memory size of 262144 bytes exhausted (tried to allocate 24576 bytes) 
```

**待办事项清单**

检查 phpinfo()，得到正确的 php.ini 路由并编辑它。将 memory_limit 更改为

```
memory_limit = 128M 
```

确保值 memory_limit 更改 con phpinfo() 结果：

```
memory_limit    128MB   128MB 
```

检查 .htaccess 并添加（不需要）

```
php_value memory_limit 128M 
```

并且还可以像这样通过php更改它（在错误行之前）：

```
ini_set('memory_limit','128M'); 
```

它到处都说内存设置为128M，但仍然出现该错误？

错误在 Swift 库（用于发送电子邮件的库）中，在 abstractSmtpTransport.php 中，所以它不是我的代码 int 应该工作。

有任何想法吗？？？

编辑：是的，前一个是重新启动 apache。

编辑 2：@patrick，补充说，但没有回应

尝试使用较低的值，每个文件 28M int，重新启动 apache，同样的错误（phpinfo 显示新值）

尝试使用-1，重新启动和相同的错误。

编辑3：允许的内存大于分配的内存不是很奇怪吗？（尽管允许的内存大小远低于分配的实际允许内存）

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-06-02T00:38:12.010

我发现我的问题与您的问题有些不同，但我会发布此答案以防它对其他人有所帮助。我在定义我的 memory_limit 时使用`MB`的是简写，而 php 默默地忽略了它。`M`我将其更改为整数（以字节为单位），问题就解决了。

我的 php.ini 更改如下：`memory_limit = 512MB`到`memory_limit = 536870912`. 这解决了我的问题。希望它对其他人的帮助！[您可以在此处](http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes)阅读 php 的简写。

祝你好运！

**编辑**

正如姚东指出的那样，您可以轻松地使用正确的速记“M”，而不是使用字节值。出于调试目的，我将我的值更改为字节值，然后没有费心将其更改回来。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-24T05:52:37.923

262,144字节的值是诊断的关键。您会在各处的 PHP 问题中看到这个神奇的数字。为什么？因为如果您尝试使用它无法使用的值来更新限制，那么 PHP 最终将作为其内存限制的值。一个空字符串会产生这个内存限制，像“128MB”这样的不正确的单位表示法也会产生这个内存限制，而不是正确的“128M”。

262,144 字节正好是 256 千比字节。为什么 PHP 在感到困惑时会回到那个值，这超出了我的理解。

> 允许的内存大于分配的内存不是很奇怪吗？

显示的分配量只是最近的分配尝试，即违反内存限制的分配尝试。请参阅[分配 less 时 PHP 中允许的内存大小](https://stackoverflow.com/questions/9432810/fatal-error-allowed-memory-size-in-php-when-allocating-less)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:13:59.507

看看这个答案是否可以帮助你。特别是 CLI ini 可能与脚本通过浏览器运行时不同的事实。

[已用完 X 字节的允许内存大小](https://stackoverflow.com/questions/4096582/allowed-memory-size-of-x-bytes-exhausted)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-27T04:53:45.013

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-20T15:53:22.663

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-12T10:49:31.107

我遇到了同样的问题。要解决此问题，您需要更新您的 PHP 版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-11T20:35:16.277

有类似的问题，修改我的`wp-config.php`文件没有帮助。我的是一个多站点，我为解决它所采取的步骤如下。因此，请检查您的站点是否是多站点，这可能会有所帮助。

登录到您的 cPanel 并检查软件部分。单击“MultiplePHP INI 编辑器”图标。在“配置 PHP INI asic 设置”页面上，从下拉列表中选择主目录或特定域并进行编辑。

这些是我对我所做的更改：

```
memory_limit = 256M
upload_max_filesize = 12M
post_max_size = 13M
file_uploads = On
max_execution_time = 180 
```

保存更改，清除浏览器缓存，然后再检查错误是否消失。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-12T16:56:49.357

就我而言，这是因为我有另一个文件夹，其中包含 xampp 及其所有文件（htdocs、php 等）。就像我在不同的目录中安装了两次 Xampp 一样，由于某种原因，另一个的配置影响了我当前的 xampp 目录，所以我也不得不更改另一个目录的 php.ini 文件中的内存大小。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-05T19:13:31.197

如果在您尝试通过 composer 安装某些软件包时发生这种情况，请使用此命令 **COMPOSER_MEMORY_LIMIT=-1 composer require *nameofpackage***

# php - 用php加密大文件的最佳方法

> ID：16175154
> 
> 赞同：7
> 
> 时间：2013-04-23T17:04:51.380
> 
> 标签：php, encryption, aes, mcrypt

我正在用 php 开发一个项目，需要对用户上传的文件进行加密。这些文件可能或多或少从 1mb 到 200mb。在网上搜索，我得出的结论是，最好的方法是将文件分割成块，例如 4096 字节。所以我加密每个块并将其附加到完整的加密文件中。我实际上在 CBC 模式下使用 mcrypt 和 AES-256 加密。

所以，我的问题是：1）我必须为每个块创建一个新的初始向量，还是我可以将前一个块的最后一个块的最后 16 字节作为当前块的第一个块的初始向量？这将导致在加密文件的开头只附加一个 iv，而不是在加密块之前附加每个块的一个 iv。

2）为了添加一个HMAC认证。这个问题与上一个问题有关。我应该为整个文件添加它还是为每个块单独添加它。在这种情况下，对整个文件执行此操作是一个问题，因为它通常是在文件开头添加的，并且在加密文件完成之前我无法计算 hmac。

3）与此相关。对于文件下载，解密（分块）并将文件同时发送给用户是一个好主意，还是先解密然后再发送更好？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T18:33:42.050

您应该加密文件流并让 PHP 处理一切。特别是[加密过滤器](http://www.php.net/manual/en/filters.encryption.php)与[stream_filter_append](http://www.php.net/manual/en/function.stream-filter-append.php)结合来做你想做的事。然后，您只需读取纯文本文件的块并将它们写入输出文件流。过滤器会导致加密发生。

这样，您就不会重新发明轮子，而是使用可能已经过安全问题审核的代码。

对于 hmac，大多数库都允许您继续向 hmac 添加数据，直到您调用 finalize 或类似的东西。然后你会读入**密文**块，将它们添加到 hmac 中。重复直到将整个**密文**添加到 hmac 并完成它。

或者，在服务器上安装 openssl 并从 PHP 中调用 openssl 函数。您可以使用经过身份验证的密码模式等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T00:55:30.867

我有几乎相同的问题。这是我发现的解决方案。

```
<?php

$filecrypt = new filecrypt();

class filecrypt{

    var $_CHUNK_SIZE;

    function __construct(){
        $this->_CHUNK_SIZE = 100*1024; // 100Kb
    }

    public function encrypt($string, $key){
        $key = pack('H*', $key);
        if (extension_loaded('mcrypt') === true) return mcrypt_encrypt(MCRYPT_BLOWFISH, substr($key, 0, mcrypt_get_key_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB)), $string, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB), MCRYPT_RAND));
        return false;
    }

    public function decrypt($string, $key){
        $key = pack('H*', $key);
        if (extension_loaded('mcrypt') === true) return mcrypt_decrypt(MCRYPT_BLOWFISH, substr($key, 0, mcrypt_get_key_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB)), $string, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB), MCRYPT_RAND));
        return false;
    }

    public function encryptFileChunks($source, $destination, $key){
        return $this->cryptFileChunks($source, $destination, $key, 'encrypt');
    }

    public function decryptFileChunks($source, $destination, $key){
        return $this->cryptFileChunks($source, $destination, $key, 'decrypt');
    }

    private function cryptFileChunks($source, $destination, $key, $op){

        if($op != "encrypt" and $op != "decrypt") return false;

        $buffer = '';
        $inHandle = fopen($source, 'rb');
        $outHandle = fopen($destination, 'wb+');

        if ($inHandle === false) return false;
        if ($outHandle === false) return false;

        while(!feof($inHandle)){
            $buffer = fread($inHandle, $this->_CHUNK_SIZE);
            if($op == "encrypt") $buffer = $this->encrypt($buffer, $key);
            elseif($op == "decrypt") $buffer = $this->decrypt($buffer, $key);
            fwrite($outHandle, $buffer);
        }
        fclose($inHandle);
        fclose($outHandle);
        return true;
    }

    public function printFileChunks($source, $key){

        $buffer = '';
        $inHandle = fopen($source, 'rb');

        if ($inHandle === false) return false;

        while(!feof($inHandle)){
            $buffer = fread($inHandle, $this->_CHUNK_SIZE);
            $buffer = $this->decrypt($buffer, $key);
            echo $buffer;
        }
        return fclose($inHandle);
    }
}

?> 
```

用法：

```
<?php
    $key = '3da541559918a808c2402bba5012f6c60b27661c'; // Your encryption key
    $filecrypt->encryptFileChunks('I-still-loooove-hula-hoop.gif', 'encrypted.gif', $key);
    $filecrypt->decryptFileChunks('encrypted.gif', 'decrypted.gif', $key);
?> 
```

# css - CSS 导航在不同浏览器中的变化

> ID：16175155
> 
> 赞同：0
> 
> 时间：2013-04-23T17:04:55.570
> 
> 标签：css, browser, navigation

我的导航有问题 - 在 Safari 和 Firefox 中使用此 CSS 效果很好，但在 Chrome 或 IE10 中看起来不正确。

这是网站：`http://66.147.240.166/~peakeffe`

这是驱动主导航的 CSS：

```
position: relative; 
z-index: 98; 
width: 900px; 
margin: 0 auto 0 575px; 
background: #4c2917; 
border-top: 0px solid #653600; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:22:52.383

您有[36 个 HTML 错误](http://validator.w3.org/check?uri=http://66.147.240.166/~peakeffe&charset=%28detect%20automatically%29&doctype=Inline&group=0)和[782 个 CSS 错误](http://jigsaw.w3.org/css-validator/validator?uri=http://66.147.240.166/~peakeffe&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)。开始工作。但是，其中许多是供应商扩展或仅限 IE 的属性。只是不知道哪些，但那里有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:11:03.177

您的负右边距导致菜单突出。尝试这个：

```
.menuwrapper {
    right: 20px;
} 
```

您似乎有一个不必要的复杂布局，所有这些负边距。你的标题和你的内容区域之间也有一个小的移动。我会考虑简化一些事情。

也试试这个：

```
.mainmenu.row {
    width: auto;
} 
```

# mysql - Mysql GROUP 和 SUM 优化

> ID：16175156
> 
> 赞同：0
> 
> 时间：2013-04-23T17:04:59.020
> 
> 标签：mysql, performance, group-by, sum, query-optimization

我有 2 张桌子：

```
CREATE TABLE IF NOT EXISTS `products` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `categoryId` int(10) unsigned DEFAULT NULL,
  `parentId` int(10) unsigned DEFAULT NULL,
  `barcode` varchar(255) DEFAULT NULL,
  `code` varchar(255) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_products_product_categories1_idx` (`categoryId`),
  KEY `fk_products_products1_idx` (`parentId`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=71521 ;

CREATE TABLE IF NOT EXISTS `inventory` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `depotId` int(10) unsigned NOT NULL,
  `productId` int(10) unsigned NOT NULL,
  `remain` int(11) DEFAULT NULL,
  `remain2` int(10) unsigned DEFAULT NULL,
  `updatedDateTime` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_inventory_depots1_idx` (`depotId`),
  KEY `fk_inventory_products1_idx` (`productId`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=89291 ; 
```

请帮我优化以下查询（应添加什么索引以提高性能），查询耗时 0.2578 秒（MySQL 使用索引 fk_inventory_depots1_idx），删除 AND i.depotId = 3 时查询耗时 0.5484 秒。EXPLAIN 查询显示 Extra: Using where; 使用临时的；使用文件排序

```
SELECT `p`.* , SUM(i.remain) AS `remain` , SUM(i.remain2) AS `remain2`
FROM `products` AS `p`
LEFT JOIN `inventory` AS `i` ON p.id = i.productId
WHERE remain != 0 AND i.depotId = 3
GROUP BY `p`.`id`
ORDER BY `p`.`id` DESC
LIMIT 50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:35:26.477

您的语句中使用的`sum()`函数将考虑所有行（该`LIMIT`子句在最后计算时将无效）。可能导致全表扫描，因为 , 的所有值`remain`都已`remain2`汇总

如果您想获得`sum()`最新`50 rows`使用的

```
SELECT 
  `p`.* , 
  SUM(i.remain) AS `remain`, 
  SUM(i.remain2) AS `remain2`
FROM
  (
    SELECT `p`.*, 
          i.remain, 
          i.remain2 
    FROM 
      `products` AS `p`
      JOIN `inventory` AS `i` ON p.id = i.productId << This should be a JOIN, as remain and depotId belong to inventory
    WHERE 
      remain != 0 
      AND i.depotId = 3
    GROUP BY 
      `p`.`id`
    ORDER BY 
      `p`.`id` DESC
LIMIT 50  ) as t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T11:14:30.343

您的查询看起来不错，但是，您将其作为 LEFT-JOIN，但通过使用 WHERE 保持 !=0 和 i.DepotID = 3 将其强制为 INNER-JOIN。如果您真的只打算输入具有非零剩余数量的条目，那么您就可以了。但是，如果您无论如何都想要库存产品，则必须将查询调整为

```
SELECT 
      `p`.* , 
      SUM(i.remain) AS `remain` , 
      SUM(i.remain2) AS `remain2`
   FROM `
      products` AS `p`
         LEFT JOIN `inventory` AS `i` 
            ON p.id = i.productId
           AND remain != 0 
           AND i.depotId = 3
   GROUP BY 
      `p`.`id`
   ORDER BY 
      `p`.`id` DESC
   LIMIT 50 
```

注意“ON”连接条件的细微差别。这允许所有产品——无论匹配的库存记录如何。现在，也就是说，您现在从所有库存中获取，而不仅仅是您的“DepotID = 3”标准。

为了帮助您建立索引，我唯一建议的是多字段键。在这种情况下，您将表中的大多数字段用于 JOIN 或 SUM() 目的。如果字段是索引的一部分，则不必返回到每条记录的实际数据页。小浪费，但可能会改善您的最终结果。

KEY `fk_inventory_multiplefields_idx`（productid、depotid、remain、remain2）、

# annotations - JDK7中缺少mbean注释@MBean

> ID：16175159
> 
> 赞同：0
> 
> 时间：2013-04-23T17:05:13.790
> 
> 标签：annotations, jmx, java-7

我一直在尝试仅使用注释对 Mbean 进行编码。我在 stackoverflow 上找到了一些示例来说明如何执行此操作，但是我认为 JDK7 中不存在 @MBean。[http://docs.oracle.com/javase/7/docs/api/javax/management/package-summary.html](http://docs.oracle.com/javase/7/docs/api/javax/management/package-summary.html)。有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:16:32.197

那是对 JMX 2.0 的一些转发，它从未进入 Java 7，这就是为什么您在当前文档中找不到它的原因。所以我会看一下[Gray 的 simplejmx 之](http://256stuff.com/sources/simplejmx/)类的东西，或者如果您使用的是 Spring，它提供了一些非常强大的 JMX 注释（或者您可以使用纯 XML 配置）。

# java - 如何在excel中使用VB SCRIPT调用jar文件并按住屏幕

> ID：16175160
> 
> 赞同：0
> 
> 时间：2013-04-23T17:05:21.227
> 
> 标签：java, vb.net, excel, xlsm

我想在excel中使用vb脚本调用一个java jar文件。我的文件格式是“xlsm”，我的 vb 脚本代码在哪里。

当我执行我的代码时，控制台来来去去，我不写控制台上的内容。请看一下代码

```
Public Function RunProgram( _
program As String, _
Optional command As String = "" _
) As WshExec
Dim wsh As New WshShell
Dim exec As WshExec
Dim oShell
Application.ScreenUpdating = False
Set exec = wsh.exec(program)
Call exec.StdIn.WriteLine(command)
 Set RunProgram = exec
'Application.ScreenUpdating = True
End Function
Public Function evenOdd1(Number As Double) As Double
Call Run
End Function

Public Sub Run()
Dim program As WshExec
Set program = RunProgram("java -jar G:\\excel\\MyTest.jar""Margus") 
'Debug.Print "STDOUT: " & program.StdOut.ReadAll
End Sub 
```

我试过 Application.ScreenUpdating, Application.visible 来保持屏幕但无法保持控制台..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:36:48.577

> 当我执行我的代码时，控制台来来去去，

你的意思是控制台窗口（基本上`cmd.exe`）在屏幕上弹出然后消失？如果发生了这种情况，那么（a）您的命令有问题（语法错误，找不到`java`等），因此系统立即退出而不运行您的命令；(b) 系统运行了命令，但`java`不理解命令的参数，并立即退出；或 (c) 您的 Java 程序正常运行并立即退出（这不太可能——Java 至少需要几百毫秒才能加载）。

要确定问题出在哪里，您可以尝试将其用作命令（而不是您生成的任何命令）：

```
ping 1.1.1.1 -n 1 -w 5000 
```

这将打开一个命令提示符（又名“控制台窗口”），尝试 ping（无效）IP 地址`1.1.1.1`，然后等待 5 秒以等待响应。该命令在等待响应时应保持 5 秒。

如果命令提示符*确实*停留了 5 秒钟，那么您已经确认问题出在您尝试运行的命令上。尝试将您尝试运行的命令打印到 VB 控制台并运行它`cmd.exe`以查看问题所在。

# ios - 在 iOS 中将用户出生日期格式化为 NSDate 对象

> ID：16175163
> 
> 赞同：2
> 
> 时间：2013-04-23T17:05:31.763
> 
> 标签：ios, nsdate

我正在使用 Facebook SDK 获取用户出生日期。只要用户设置了可公开访问的出生日期，出生日期就会很好。我的问题是 Facebook 用户的日期设置不同。例如，用户可以只显示日期/月、月/年或整个日期，或者关闭整个出生日期。所以日期格式是不同的。但是要将日期字符串转换为 NSDate 对象，我必须使用 NSDateformatter。但是通过使用

```
[df setDateFormat:@"yyyy/mm/dd"]; 
```

对于每种格式，如果没有年份或月份，则日期为空。

所以问题是有没有一种通用的方法可以用通用的 dateformmatter 转换任何日期格式？或者我们可以检测到一个字符串有几个月、几年或一天吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:10:14.427

您可以检查字符串是否添加了年份。

然后使用`[df setDateFormat:@"MM/dd"];`或`[df setDateFormat:@"yyyy/MM/dd"];`相应地或任何其他格式日期即将到来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:50:21.053

我检查了这个。

在我的 Facebook 个人资料上，我将生日外观设置为“仅限日期和月份”

在我的应用程序中，我使用以下权限登录：

```
NSArray *permissions = [[NSArray alloc] initWithObjects:@"user_birthday",
                                                        @"email",
                                                        @"user_about_me",
                                                        @"user_hometown",
                                                        nil];

FBSession *session = [[FBSession alloc] initWithAppID:nil
                                           permissions:permissions
                                       urlSchemeSuffix:nil
                                     tokenCacheStrategy:_tokenCaching]; 
```

当然，你只需要`@"user_birthday"`许可。

然后我有`fetchUserData`方法：

```
- (void)fetchUserData
{
    if (FBSession.activeSession.isOpen)
    {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection,
           NSDictionary<FBGraphUser> *user,
           NSError *error)
         {
             if (!error)
             {
                 NSLog (@"FB:          id: %@", user.id);
                 NSLog (@"FB:    username: %@", user.username);
                 NSLog (@"FB:        link: %@", user.link);
                 NSLog (@"FB:        name: %@", user.name);
                 NSLog (@"FB:  first_name: %@", user.first_name);
                 NSLog (@"FB:   last_name: %@", user.last_name);
                 NSLog (@"FB: middle_name: %@", user.middle_name);
                 NSLog (@"FB:    birthday: %@", user.birthday);
                 NSLog (@"FB:       email: %@",[user objectForKey:@"email"]);
                 NSLog (@"FB:      gender: %@",[user objectForKey:@"gender"]);
             }
         }];
    }
} 
```

即使我设置了“仅限日期和月份”，fetchUserData 中的结果也是：

```
FB:    birthday: 08/16/1978 
```

**编辑：**

这仅适用于登录用户。对于他的朋友，您将只能获得他们允许在时间线上发布的数据（即使使用 FQL）。

[您可以在Graph API Explorer](https://developers.facebook.com/tools/explorer) (FQL Query)中尝试 FQL 查询返回的内容

确保首先获得用户friends_birthday权限的访问令牌（通过获取访问令牌按钮）

运行查询：

```
SELECT uid, name, birthday_date from user where uid IN (SELECT uid2 FROM friend WHERE uid1=your_facebook_id_here) 
```

如果您检查结果，您会发现可能的格式是：

完整的生日：`MM/DD/YYYY` 月份和日期：`MM/DD` 不显示：`<null>`

所以你最好听从 Anoop Vaidya 的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T15:32:34.277

根据新的 Graph API：

根据新的 Graph API 人的生日。这是一个固定格式的字符串，如 MM/DD/YYYY。但是，人们可以控制谁可以看到他们出生的年份与月份和日期分开，所以这个字符串只能是年份 (YYYY) 或月份 + 日期 (MM/DD)

# c# - C# - 从 VeriSign 获取数字证书并验证真实性

> ID：16175174
> 
> 赞同：1
> 
> 时间：2013-04-23T17:06:25.587
> 
> 标签：c#, certificate, digital-certificate, verisign

VeriSign 是否允许开发人员获得可用于开发的“沙盒”数字证书，就像 PayPal 允许开发人员设置沙盒帐户一样？

此外，是否有人在 C# 中实现了客户端如何将证书发送到服务器，并且服务器与 VeriSign 一起检查数字证书是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:10:06.657

您不使用威瑞信检查，而是使用[普通的证书验证](http://msdn.microsoft.com/en-us/library/aa702579.aspx)（就像使用任何其他证书一样）。

“沙盒”证书是[自签名证书](http://en.wikipedia.org/wiki/Self-signed_certificate)。您信任自己（[将您自己的证书添加到受信任的根存储](http://blogs.technet.com/b/sbs/archive/2007/04/10/installing-a-self-signed-certificate-as-a-trusted-root-ca-in-windows-vista.aspx)），因此您自己签署的证书也是受信任的。

# c# - 转换函数 表达式为 Func 其中 T 是通用约束

> ID：16175176
> 
> 赞同：1
> 
> 时间：2013-04-23T17:06:39.000
> 
> 标签：c#, generics, expression-trees, typeconverter

我有这个静态函数

```
public static object Create(Type t)
{
    //unimportant
} 
```

我无法控制上述功能，因此无法更改。问题是它不是通用的，所以我必须将返回的对象转换为某种类型。**这种类型是由我调用该`Create`方法的另一个泛型类的约束提供的。**

这是我到达的地方：

```
public static class Creator<T>
{
    public static void Create()
    {
        var m = typeof(SomeClass).GetMethod("Create");
        var p = Expression.Parameter(typeof(Type));
        var e = Expression.Call(m, p);

        //at this stage I want to create delegate for calling the 'Create' method, 
        //then pass typeof(T) as parameter, get returned object, 
        //and finally cast it to 'T'.

        //for eg, I can do it like this:
        var f = Expression.Lambda<Func<Type, object>>(e, p).Compile();
        Func<T> mainThing = () => (T)f(typeof(T));

        //is there a way I can achieve in one step?
    }
} 
```

在我上面的方法中，我不是在编译最终的委托，而是在编译之前的一步。我如何在编译之前合并演员表并`Func<T>`返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T17:12:16.870

你似乎跳过了很多不必要的圈子。我不明白您为什么要通过表达式树来执行此操作。为什么不只是：

```
public static class Creator<T>
{
    public static void Create()
    {
        Func<T> mainThing = () => (T)SomeClass.Create(typeof(T));
    }
} 
```

？？？

创建一个方法调用的表达式树只是为了将其转换回一个委托，然后再调用一个方法调用的目的是什么？为什么不直接打电话`SomeClass.Create`呢？

我在这里缺少什么吗？

要回答您的实际问题：

> 在编译之前如何合并演员表？

用于`Expression.Convert()`创建表示转换的表达式树节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:10:28.737

我认为您只需要调用[`Expression.Convert`](http://msdn.microsoft.com/en-us/library/bb292051.aspx)，并使用 a`ConstantExpression`而不是 a `ParameterExpression`：

```
var method = typeof(SomeClass).GetMethod("Create");
var call = Expression.Call(method, Expression.Constant(typeof(T), typeof(Type)));
var conversion = Expression.Convert(call, typeof(T));
var function = Expression.Lambda<Func<T>>(conversion).Compile(); 
```

（我还没有测试过，但看起来还可以......）

# jsf - 按下 p:commandButton 时 h:messages 不显示消息

> ID：16175178
> 
> 赞同：11
> 
> 时间：2013-04-23T17:06:43.840
> 
> 标签：jsf, primefaces, messages

我对 JSF 中的 h:messages 标记有疑问，它根本不显示任何消息。当我单击按钮时，在 Glassfish 日志中没有错误。设置如下：

测试.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui" 
    xmlns:j="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>
<h:body>
    <h:messages globalOnly="true"/>
    <h:form id="loginform">         
        <p:commandButton id="testButton" value="Test"
          action="#{loginSessionBean.test()}" />
    </h:form>
</h:body>
</html> 
```

使用 SessionScopedBean：

```
@ManagedBean
@SessionScoped
public class LoginSessionBean implements Serializable {

private static final long serialVersionUID = 1L;
...
public String test(){
     FacesContext fc = FacesContext.getCurrentInstance();
     fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Test!", null)); 
    return "";
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T18:24:46.037

您正在使用 PrimeFaces 发送 ajax 请求`<p:commandButton>`。默认情况下，Ajax 请求没有任何形式的反馈（除非`autoUpdate="true"`在某处使用了 PrimeFaces'）。您应该明确指定要在 ajax 响应上更新的视图部分。

一种方法是指定`update`属性 on`<p:commandButton>`以指向`<h:messages>`组件的客户端 ID。

```
<h:messages id="messages" ... />
<h:form>         
    <p:commandButton ... update=":messages" />
</h:form> 
```

另一种方法是用 PrimeFaces 替换它，`<p:messages>`它具有`autoUpdate`用于自动更新 ajax 响应的属性。

```
<p:messages ... autoUpdate="true" />
<h:form>         
    <p:commandButton ... />
</h:form> 
```

一个完全不同的替代方法是通过向按钮添加属性来关闭 ajax `ajax="false"`，这样将执行同步回发，从而有效地导致整个页面更新，就像标准 JSF`<h:commandButton>`在不使用`<f:ajax>`.

```
<h:messages ... />
<h:form>         
    <p:commandButton ... ajax="false" />
</h:form> 
```

### 也可以看看：

*   [了解 PrimeFaces 进程/更新和 JSF f:ajax 执行/渲染属性](https://stackoverflow.com/questions/25339056/understanding-process-and-update-attributes-of-primefaces/)

# ssrs-2008 - 将 SSRS 报告从开发 CRM 导入生产

> ID：16175180
> 
> 赞同：1
> 
> 时间：2013-04-23T17:06:46.140
> 
> 标签：ssrs-2008, dynamics-crm-2011, reporting-services

我在 CRM 开发实例中使用 BIDS 在 SSRS 中创建了自定义报告。我现在想将此报告导出/导入到生产 CRM 中。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:12:12.503

我们一直在向 CRM 添加 SSRS 报告。您所做的只是单击报告 > 新建 > 并从下拉菜单（三个选项）中选择现有文件。选择 RDL 文件（是的，您可以简单地将这个文件从您的服务器复制到本地机器）

选择 RDL 文件后，从表单底部选择您希望它显示的位置等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:10:46.770

查看这篇文章，最后有在CRM中上传RDL文件的过程

[如何：使用 Microsoft Dynamics CRM 2011 BIDS Fetch Extension 创建自定义报告](http://blogs.msdn.com/b/crm/archive/2010/10/26/how-to-creating-custom-report-with-microsoft-dynamics-crm-2011-bids-fetch-extension.aspx)

# matlab - 评估网格中的函数，matlab

> ID：16175181
> 
> 赞同：1
> 
> 时间：2013-04-23T17:06:51.893
> 
> 标签：matlab, math, loops, graphics, plot

我想绘制函数***v***的等值面。

问题是***v***不接受矩阵参数（不可向量化函数，因为它包含拉盖尔相关多项式）

所以如果我为 x,y,l 的值创建一个网格网格

```
[r,th,l]=meshgrid(0:0.5:5,0:pi/2:2*pi,0:2);

x=r.*cos(th);
y=r.*sin(th); 
```

然后我想使用循环（计数器）评估***v***因为我不能绕过 x ， y & l 作为参数

但是我做错了，因此我没有在网格的点上评估***v ：***

```
for l=0:2
k=k+1;
    for r=0:0.5:5
    i=i+1;
        for th=0:pi/2:2*pi
        j=j+1;      

fun1=@(R)4*real(exp(-r.^2-R^2+2*1i*R*l./r).*(r+1i*R).^(2*l).*...
  (mfun('L',n/2-l/2,l,r.^2+R^2)).^2);

v(i,j,k)=integral(fun1,-inf,inf);

        end
    end  
end 
```

有人知道如何进行循环，因此我可以获得与 x、y、l 大小匹配的***v ，因此我可以使用：***

等值面(x,y,l,v) ??

或者有人知道如何通过另一种方式获得提到的等值面***v ？***

我真的需要我能得到的所有帮助:)

问候，

巴勃罗

# java - 无法使用 Visual Serial Port Emulator 打开已打开的端口

> ID：16175184
> 
> 赞同：0
> 
> 时间：2013-04-23T17:06:55.233
> 
> 标签：java, virtual-serial-port

我是初学者。我正在尝试使用 VSP 模拟器同时运行 2 个 Java 进程来打开相同的 Com 端口。我尝试过使用连接器设备或分路器设备。第二个进程无法打开之前打开的端口。我还需要设置什么来执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:32:24.443

您不能两次打开同一个端口。据我所知，没有操作系统允许您两次打开同一个端口。端口是操作系统将传入数据包路由到正确应用程序的方式。您可能需要阅读[OSI 模型](http://en.wikipedia.org/wiki/OSI_model)。

# c# - 在 Telerik Radgrid 上拖动重新排序

> ID：16175189
> 
> 赞同：0
> 
> 时间：2013-04-23T17:07:02.097
> 
> 标签：c#, telerik, radgrid

我正在尝试在我的 radgrid 上使用拖动重新排序。我的代码对我来说效果很好（它在 RowDrop 事件上触发），但我的客户无法让它工作，我已经对其进行了故障排除，以表明当他进行放置时，args 的 DestDataItem 属性为空，所以丢弃逻辑永远不会触发？！？这是我的代码：

```
protected void questionGrid_RowDrop(object sender, GridDragDropEventArgs e)
    {
        if (e.DestDataItem != null)
        {
            int tempId = int.Parse(editingId.Value);
            theTemplate = ent.SurveyTemplates.Where(i => i.Id == tempId).FirstOrDefault();
            int id = int.Parse(e.DraggedItems[0]["Id"].Text);
            SurveyQuestion draggedQuestion = ent.SurveyQuestions.Where(i => i.Id == id).FirstOrDefault();
            List<SurveyQuestion> tempArray = theTemplate.Questions.OrderBy(i => i.Rank).ToList();
            tempArray.Remove(draggedQuestion);
            tempArray.Insert(e.DestDataItem.ItemIndex, draggedQuestion);
            int j = 0;
            foreach (SurveyQuestion sq in tempArray)
            {
                sq.Rank = j;
                j++;
            }
            ent.SaveChanges();
            questionGrid.Rebind();
        }
        else
        {
            Exceptions.LogException(new Exception("NULL DEST"));
        }
    } 
```

它只是引用拖动的项目并将其从项目列表中拉出并将其重新插入到新索引处，然后将每个项目的 rank 属性更新为其新索引并保存。

为什么这对我有用而不对他有用？这个服务器端代码会受到浏览器差异的困扰吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:47:30.567

正如在[这个线程](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-drag-amp-drop-with-detail-table.aspx)中提到的，如果项目没有放在网格中的实际数据行上，则 DestDataItem 将为空。

如果目标不是数据行，您可以通过在客户端处理 OnRowDropping 事件并忽略您不想要的东西来防止触发您的 RowDrop 事件：

```
function gridRowDropping(sender, args)
{
    if (!args.get_targetGridDataItem())
        args.set_cancel(true);
} 
```

# python - Python中的命令输出解析

> ID：16175192
> 
> 赞同：6
> 
> 时间：2013-04-23T17:07:26.847
> 
> 标签：python, python-3.x

我正在尝试在 Windows 7 上编写一个 Python 脚本，它读取命令的输出`ipconfig /displaydns`并尝试从输出中获取一些值。

的输出`ipconfig /displaydns"`是这样的，

```
Windows IP Configuration

9.a.c.e.x-0.19-430f5091.531.1518.1b8d.2f4a.210.0.k1m2t5a3245k242qmfp75spjkv.avts.

Record Name . . . . . : 9.a.c.e.x-0.19-430f5091.531.1518.1b8d.2f4a.210.0.k1m2t5a3245k242qmfp75spjkv.avts.
Record Type . . . . . : 1
Time To Live  . . . . : 294
Data Length . . . . . : 4
Section . . . . . . . : Answer
A (Host) Record . . . : 127.0.0.16 
```

我正在获取此输出并将其保存在一个变量中，如下所示，

```
output = subprocess.check_output("ipconfig /displaydns", shell=True) 
```

当我打印“输出”时，我得到以下信息

```
b'\r\nWindows IP Configuration\r\n\r\n   9.a.c.e.x-0.19-430f5091.531.1518.1b8d.2f4a.210.0.k1m2t5a3245k242qmfp75spjkv.avts.\r\n    ----------------------------------------\r\n    Record Name . . . . . : 9.a.c.e.x-0.19-430f5091.531.1518.1b8d.2f4a.210.0.k1m2t5a3245k242qmfp75spjkv.avts.\r\n    Record Type . . . . . : 1\r\n    Time To Live  . . . . : 289\r\n    Data Length . . . . . : 4\r\n    Section . . . . . . . : Answer\r\n    A (Host) Record . . . : 127.0 .0.16\r\n\r\n\r\n' 
```

从这个输出中，我对分别为 和 的值`A (Host) Record`感兴趣。`Record Name``127.0.0.16``9.a.c.e.x-0.19-430f5091.531.1518.1b8d.2f4a.210.0.k1m2t5a3245k242qmfp75spjkv.avts.`

我将如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T17:19:33.910

```
import subprocess
output = subprocess.check_output("ipconfig /displaydns", shell=True)
result = {}
for row in output.split('\n'):
    if ': ' in row:
        key, value = row.split(': ')
        result[key.strip(' .')] = value.strip()

print(result)
print(result['A (Host) Record']) 
```

给出：

```
{'A (Host) Record': '127.0 .0.16', 'Data Length': '4', 'Section': 'Answer', 'Record Name': '9.a.c.e.x-0.19-430f5091.531.1518.1b8d.2f4a.210.0.k1m2t5a3245k242qmfp75spjkv.avts.', 'Time To Live': '289', 'Record Type': '1'}
127.0 .0.16 
```

* * *

另一种解决方案是：（当我在脑海中想到这个时，我认为它会更紧凑.. 它不是但无论如何，这是调用外部命令的另一种方式，您可以在其中控制错误和输出（你可以区分两者））

```
import subprocess
cmdpipe = subprocess.Popen("ipconfig /displaydns", stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
result = {}
for row in cmdpipe.stdout.readline():
    if ': ' in row:
        key, value = row.split(': ')
        result[key.strip(' .')] = value.strip()

# You need to close the file handles, as they will stay open "forever" otherwise.
cmdpipe.stdout.close()
cmdpipe.stderr.close()

print(result)
print(result['A (Host) Record']) 
```

我还要补充一点，使用`shell=True` [可能很危险](https://stackoverflow.com/a/3172488/929999)，尤其是与用户输入结合使用时。它确实添加了一些“隐藏的魔法”，使一些事情变得更容易或更用户自然。但在大多数情况下，您会想要这样做`subprocess.Popen(["ipconfig", "/displaydns"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)`。

# html - 2个元素之间奇怪的额外空间？

> ID：16175193
> 
> 赞同：2
> 
> 时间：2013-04-23T17:07:27.813
> 
> 标签：html, css, responsive-design

我尝试为网站构建响应式设计，但遇到了问题。

访问此页面：[http ://test.ufeed.se/](http://test.ufeed.se/)

将浏览器大小更改为 820 像素以下，您将看到响应式设计。这里的问题是我在数据和标题之间得到了一个奇怪的空格？我试图找出为什么有一个空间但没有运气？

这是零件的简单标记：

```
<div class="rightPostCell">
        <div class="titleCon">
            <div class="linkIcoCon">
               ...
            </div>
            <div class="floatLeft">
               ...
            </div>
        </div>
        <div class="data dimText">
            <div class="commentsCon">
                ...
            </div>
            <div style="clear:both;"></div>
            <div class="createdDateCon">
                ...
            </div>
            <div style="clear:both;"></div>
            <div class="baseLinkCon">
                ...
            </div>
        </div>
    <div style="clear:both;"></div>
    </div> 
```

为什么标题和数据之间有空格？以及如何删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:11:19.770

看起来这是个`float`问题（我发现每次使用时都会出现问题`float`，通常我更喜欢它，`display: inline-block`因为它引入了更少的奇怪错误） - 如果我禁用`clear: both`数据，它就会正确到位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:20:42.090

你的 PostList.css 添加第 37 行`overflow:auto`

在 mobile.css 第 80 行将 float:none 更改为`clear:both`

之后需要添加一些边距，但它会删除发生的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:20:47.910

您需要对***mobile.css***文件进行的更改

```
.postContainer .titleCon{
   overflow:hidden; /* ADD this property */
}

.postContainer .data{
   overflow:hidden; /* ADD this property */
   clear:both; /* REMOVE this property */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T17:26:02.347

试试这个，它会解决你的问题在左右单元格之后添加清晰的类并添加隐藏在 `.postContainer .rightPostCell`类中的溢出

```
<div class="postContainer">
      <div class="leftPostCell">data</div>
      <div class="rightPostCell">data</div>
      <div style="clear:both;"></div>
    </div>

.postContainer .rightPostCell {margin-left: 123px;overflow: hidden;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:29:29.867

有很多解决方案。这是一个：

**mobile.css 第 80 行**

```
.postContainer {
  width: 100%;
  padding: 3px;
  float: left;
} 
```

**PostList.css 第 37 行**

```
.postContainer .rightPostCell {
  float: left;
} 
```

# r - 使用 R 的 Windows 上的 ROauth，授权后响应无效

> ID：16175194
> 
> 赞同：0
> 
> 时间：2013-04-23T17:07:34.720
> 
> 标签：r, twitter, oauth, twitter-oauth

我在 R 中使用以下脚本，但是当我将用户重定向到浏览器以进行 oauth 时。并输入PIN，它打印一个错误。在这种情况下请帮助我。谢谢。

```
cred=OAuthFactory$new(consumerKey="xxxxx",consumerSecret="xxxxx",requestURL="https://api.twitter.com/oauth/request_token",accessURL="https://api.twitter.com/oauth/authorize",authURL="https://api.twitter.com/oauth/access_token");
cred$handshake(cainfo="cacert.pem");

To enable the connection, please direct your web browser to: 
https://api.twitter.com/oauth/access_token?oauth_token=xxxxxxxxxxxxxxxxxxxx
When complete, record the PIN given to you and provide it here: xxxx

Error in cred$handshake(cainfo = "cacert.pem") :  Invalid response after authorization.  
You likely misentered your PIN, try rerunning this handshake & browser authorization to get a new PIN. 
```

> sessionInfo() R 版本 3.0.0 (2013-04-03) 平台：x86_64-w64-mingw32/x64 (64-bit)

```
locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] httr_0.2

loaded via a namespace (and not attached):
[1] digest_0.6.3   RCurl_1.95-4.1 stringr_0.6.2  tools_3.0.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:24:02.207

您的代码中有错误的 URL。代替：`https`_`http`

```
requestURL <- "https://api.twitter.com/oauth/request_token"
accessURL = "http://api.twitter.com/oauth/access_token"
authURL = "http://api.twitter.com/oauth/authorize"
consumerKey = "mykey"
consumerSecret = "mysecret"
Cred <- OAuthFactory$new(consumerKey=consumerKey,
                             consumerSecret=consumerSecret,
                             requestURL=requestURL,
                             accessURL=accessURL, 
                             authURL=authURL)
Cred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl") )
registerTwitterOAuth(Cred) 
```

我通常会把它写成评论，但这似乎出现了很多。

# java - 有一种方法可以优先考虑 Servlet 过滤器的执行？

> ID：16175195
> 
> 赞同：0
> 
> 时间：2013-04-23T17:07:38.600
> 
> 标签：java, servlets, servlet-filters

我可以（应该）在 Java-Tomcat 配置中优先考虑过滤器的执行吗？如何以及为什么（不）？例如，如果我需要在会话处理过滤器之前执行 DB-Connection 过滤器，我会按照过滤器的执行顺序执行此操作，还是我的应用程序模型中存在问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:11:40.313

过滤器执行顺序与您在 web.xml 文件中指定的过滤器顺序相同。我认为这样做没有问题。但如果你不想这样做，你可以在一个过滤器中完成。但我更喜欢用于不同目的的单独过滤器..

# javascript - Javascript 不工作，我需要帮助。有人建议我不要使用 document.write

> ID：16175198
> 
> 赞同：-7
> 
> 时间：2013-04-23T17:07:42.710
> 
> 标签：javascript, html

我有以下 Javascript 代码，但它不起作用。谁能帮我解决这个问题？

这些是我想要实现的目标：

1.  将游戏数量增加到用户请求的游戏数量 p1
2.  检查是否只输入了有效数字 p2
3.  第一个 10 和第二个 10 p3 之间的换行符

有什么帮助吗？

```
<html>
    <head>
        <title>processing</title>
    </head>

    <body>
        <form name="processing" action="processing.php" method="POST">
            <input type="hidden" name="check_submit" value="1" />
            <p>Please select the numbers of players:</p>
            <select>
                <SCRIPT Language="JavaScript">
                    for (i = 1; i <= 8; i++) {
                        document.write('<option value="' + i + '">' + i + '</option>');
                    }
                </script>
            </select>
            <input type="submit" />Scores From Game 1:
            <SCRIPT Language="JavaScript">
                for (i = 0; i < 20; i++) {

                    document.write('<input type="number" name="scores[]" min="0" max="10" value="0"/>')

                }
            </script>
            <input type="submit" />
        </form>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:11:14.063

与其使用 JavaScript，不如直接使用原始 HTML？

```
...
<select>
  <option>1</option>
  <option>2</option>
  <option>3</option>
  <option>4</option>
  <option>5</option>
  <option>6</option>
  <option>7</option>
  <option>8</option>
</select>
...
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/>
<input type="number" name="scores[]" min="0" max="10" value="0"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:14:03.247

谁建议它是正确的 -由于' 能够破坏 DOM 使用而避免`document.write`支持。不仅如此，您还通过将 a放入元素来破坏语义 - 不好。`document.creatElement``document.write``script``select`

让我们重新编写您的代码。假设你有这个：

```
<select id="NumPlayers">
</select> 
```

而您当前的代码：

```
 for (i = 1; i <= 8; i++) {
               document.write('<option value="' + i + '">' + i + '</option>');
 } 
```

为了阻止所有地狱般的失败，您可以将其重新加工成这样的东西：

```
window.onload = function() {
   var selectTag = document.getElementById("NumPlayers");
   for (var i = 0; i <= 8; i++) {
       var c = new Option(i,i);
       selectTag.add(c);
   }
}; 
```

这将做三件有价值的事情：

1.  它会阻止你破坏你的 DOM
2.  最后它在语义上是正确的（没有脚本->选择子行为）
3.  它将等到页面加载完成后才修改 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:11:00.470

不要使用`document.write`动态插入 HTML 内容，而是使用 DOM API：

```
o = document.createElement('option');
o.value = i;
o.appendChild(document.createTextElement(i));
select.appendChild(o); 
```

`document.write`不赞成，因为浏览器预解析器无法优化使用此方法插入的 HTML 内容。如果您尝试执行类似`document.write('<img src="pic.jpg"/>');`的操作，浏览器必须等到 JavaScript 被解析并执行后才能加载图像。正常插入时，预解析器能够发现图像并预加载`pic.jpg`。

它不受欢迎的另一个原因是 JavaScript 必须位于您要插入 HTML 的确切位置。这会导致代码碎片化散布在整个 HTML 文档中，这很难维护并且会阻止 HTML 稍后在页面中呈现。

# c# - 字符串缺少终止符："

> ID：16175199
> 
> 赞同：2
> 
> 时间：2013-04-23T17:07:43.283
> 
> 标签：c#, exception, powershell

当我调用这个脚本时给我一个例外

> 字符串缺少终止符："

```
 using (var powershell = PowerShell.Create())
                {
                    powershell.Runspace = myRunSpace;
                    Collection<ErrorRecord> errors = null;
                    Collection<PSObject> result = null;

                    string psScript = @"
                                            $ApplicationID=" + applicationID +
                                      "\n" +
                                      "$ApplicationPort" + port + "\n" +
                                      "$Registrar=" + registrar + "\n" +
                                      "$NewPoolIdentity=" + poolIdentity + "\n" +
                                      "$ScriptName =" + scriptName + "\n" +
                                      "$SiteName= (get-cspool -Identity $Registrar).Site" + "\n" +
                                      "$Site= (get-cssite -Identity $SiteName).SiteId" + "\n" +
                                      "$ComputerFqdn =[System.Net.Dns]::GetHostByName(($env:computerName)).HostName" +
                                      "\n" +
                                      "$com=New-Object -ComObject CertificateAuthority.Config" + "\n" +
                                      "$CertificationAuthority = $com.GetConfig(0)" + "\n" +
                                      "$CertificateFriendlyName =$NewPoolIdentity +\" Pool" + "\n" +
                                      "$ApplicationFullID =$ApplicationID+ $ApplicationPort" + "\n" +
                                      "$DefaultSipDomain = (Get-CsSipDomain | where-object { $_.IsDefault -eq $true}).Name" +
                                      "\n" +
                                      "$ApplicationSipAddress = \"sip:\" + $ApplicationFullID + \"@\" + $DefaultSipDomain" +
                                      "\n" +
                                      "New-CsTrustedApplicationPool -Identity $NewPoolIdentity -Registrar $Registrar -RequiresReplication $false -Site $Site -ComputerFqdn $ComputerFqdn" +
                                      "\n" +
                                      "$MyTrustedApplications=New-CSTrustedApplication –ApplicationId $ApplicationFullID -TrustedApplicationPoolFqdn $NewPoolIdentity -Port $ApplicationPort" +
                                      "\n" +
                                      "Enable-CsTopology" + "\n" +
                                      "$Cert=Request-CsCertificate -New -Type default -FriendlyName $CertificateFriendlyName -CA $CertificationAuthority -ComputerFQDN $ComputerFqdn" +
                                      "\n" +
                                      "Set-CsCertificate -Type Default -Thumbprint $Cert.Thumbprint" + "\n" +
                                      "$ApplicationIdentity =  \"Registrar:\"+ $Registrar + \"/\" + $ApplicationFullID " +
                                      "\n" +
                                      "$ApplicationURI= \"http://www.sdsdsds.com/Apps/\" + $ApplicationID" + "\n" +
                                      "New-CsServerApplication -Identity $ApplicationIdentity -ScriptName $ScriptName -Uri $ApplicationURI -Priority 6 -Critical $False -Enabled $True" +
                                      "\n" +
                                      "New-CsTrustedApplicationEndpoint -ApplicationId $ApplicationFullID -TrustedApplicationPoolFqdn $NewPoolIdentity -SipAddress $ApplicationSipAddress" +
                                      "\n" +
                                      " $FinalResult = new-object PSObject;" +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name Gruu $MyTrustedApplications.ComputerGruuS[0].Gruu;" +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name LocalMachineFqdn $MyTrustedApplications.ComputerGruuS[0].Fqdn; " +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name Port $MyTrustedApplications.Port; " +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name ApplicationPoolFqdn $MyTrustedApplications.TrustedApplicationPoolFqdn; " +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name Registrar $TrustedApplicationPool.Registrar; " +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name CertificateFriendlyName $CertificateFriendlyName" +
                                      "\n" +
                                      "$FinalResult | add-member NoteProperty -Name ApplicationSipAddress $ApplicationSipAddress" +
                                      "\n" + "$FinalResult";

                    powershell.Commands.AddScript(psScript);

                    try
                    {
                        result = powershell.Invoke();
                        errors = powershell.Streams.Error.ReadAll();
                        Console.Write(".");
                    } 
```

任何人都可以帮助我找到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:16:58.397

您缺少 '=' 符号，靠近

```
"$ApplicationPort" + port + "\n" 
```

并有未终止的报价

```
$CertificateFriendlyName =$NewPoolIdentity +" Pool 
```

您需要对其进行编辑，以包括报价：

```
"$CertificateFriendlyName =$NewPoolIdentity +\" Pool" + "\"\n" + 
```

# c# - 我应该使用 Image 还是 WebBrowser 来显示图像？

> ID：16175204
> 
> 赞同：1
> 
> 时间：2013-04-23T17:07:55.447
> 
> 标签：c#, image, windows-phone-7, browser

我站在我的 WP7 应用程序的重大决定之间。它的主要目的是在全屏上一次显示一个图像。

我需要完美支持捏缩放、移动图像（缩放时）以及通过轻弹手势在图像之间切换。这些东西中的大部分已经在 WebBrowser 控件中实现，所以我只需要生成正确的 html 源代码，并在独立存储中生成图像路径。

或者我应该使用通用图像控件并自己实现这些手势？在我做出这个决定之前，我希望得到你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:16:11.323

您的目标是 Windows Phone 8 还是 7？

一般来说，我会实现我自己的。

使用网络浏览器的问题： 1\. 性能会变慢。

1.  内存占用会更高（尽管我怀疑你是否真的关心这个——它不会很大）。

2.  如果您要收藏/下载图像，则在浏览器中导航到它们会更困难（如果可能的话）。

3.  背景将始终为白色，除非您每次生成 HTML 来控制该位。

4.  最大的问题是放大/缩小将是.. Janky ...您将无法控制用户可以缩小的程度 - 这意味着他们可以缩小到足以使图片变得非常小并且它不会“反弹”。

这不是一个糟糕的权宜之计，它的问题也不大到可以说“不 - 不要这样做”，但它们足以让你重新考虑。

# smartcard - 扩展长度不适用于 T = 1

> ID：16175208
> 
> 赞同：3
> 
> 时间：2013-04-23T17:08:21.320
> 
> 标签：smartcard, javacard, apdu

我正在尝试将数据文件从 JC 2.2.2 卡发送到主机应用程序。所有文件都小于 256 字节。但是数据需要加密和签名（用于安全消息传递），如下所示。将 MAC 添加到加密数据后，某些文件的长度会超过 256 个字节。但是我使用的是扩展长度，所以我认为一次发送超过 256 个字节不会有问题。如果生成的密码加 MAC 小于 256 字节，则程序运行良好。下面是一段将响应 apdu 发送到主机的代码。

```
Util.arrayCopyNonAtomic(file, offset, buffer, (short)0, file.length);                            
respLength = secureCrypto.wrapResponseAPDU(ssc, apdu, buffOfset, file.length);
apdu.setOutgoing();  
apdu.setOutgoingLength(respLength);          // 0x6F00 error occurs during the execution of this line
apdu.sendBytesLong(buffer, (short)0, respLength); 
```

卡详情：

```
Terminal found : 2
PC/SC terminal OMNIKEY CardMan 5x21 0
PC/SC terminal OMNIKEY CardMan 5x21-CL 0
ATR: 13 bytes
Card Info : PC/SC card in OMNIKEY CardMan 5x21-CL 0, protocol T=1, state OK 
```

在主机端，我收到 0x6F00 错误代码。并且我跟踪了程序，发现错误发生在apdu.setOutgoingLenght(respLength)的执行过程中。此外，我的小程序类实现了 ExtendedLength 接口。请提供任何有用的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:13:20.600

您是否可能忘记为`javacardx.apdu.ExtendedLength`扩展类的类实现“标记”接口`Applet`？请注意，该卡应支持此功能（它在名称空间中，而不是）。此外，为了正确使用读卡器，该卡应指明对读卡器的扩展长度支持（使用 ISO 14443 B 型非接触式接口的 ATR 或 EF.ATR）。`javacard**x**``javacard`

即使该卡支持扩展长度，您也可能需要`sendBytesLong()`多次调用。扩展长度达到 64KiB（Java 卡仅达到 32KiB，这超出了规范，至少对于命令 APDU 而言），但是很少有卡——如果它们存在的话——为 APDU 提供 64KiB 的 RAM缓冲。

最后，APDU 的长度可以延长也可以不延长。这意味着 APDU 命令和 APDU 响应都必须是正常或扩展长度的 APDU。只有 ISO 类型 1 APDU 不受此限制，因为它们不包含命令或响应数据。否则，Nc（在 ISO 7816-4 中称为 Lc）和 Ne（在 ISO 标准中称为 Le）的编码都必须使用扩展长度编码。换句话说，第一个编码必须是 3 个字节长，第一个设置为`00`，第二个（如果存在，对于 ISO 类型 4 APDU 的）必须是两个字节大小。

请注意，`javax.smartcardio`处理扩展长度的 APDU 非常优雅。不幸的是，并非读卡器中的所有扩展功能都经过良好编程。当您使用 Omnikey 阅读器时，您应该相对安全地避免来自*阅读器*.dll 的扩展长度错误。

# c# - 如何从服务器获取我的 Corba 客户端的 IP 地址

> ID：16175211
> 
> 赞同：1
> 
> 时间：2013-04-23T17:08:30.220
> 
> 标签：c#, corba, iiop

我有一个 c++ 客户端通过omniOrb 将Corba 消息发布到ac# 服务器。我已经在服务器端注册了一个 PortableInterceptor 到 Orb 并且可以拦截消息。在调试中，我在拦截中收到一条 ServerRequestInfo 消息，并且在调试监视窗口中可以看到一直到带有客户端 IP 的 RemoteEndPort。但是，其中许多类都有我无法在代码中访问的私有成员。

我该怎么做？

这是我的代码

```
// register the OrbInitialiser here in some  code
omg.org.CORBA.OrbServices orb = omg.org.CORBA.OrbServices.GetSingleton();
orb.RegisterPortableInterceptorInitalizer( new LT.Quantifi.BrokerOrbInitialiser());
orb.CompleteInterceptorRegistration();

// register the Inteceptor in the OrbInitialiser here
public class BrokerOrbInitialiser : omg.org.PortableInterceptor.ORBInitializer
{
    public void post_init(ORBInitInfo info)
    {
        BrokerRequestInterceptor serverRequests = new BrokerRequestInterceptor();
        info.add_server_request_interceptor(serverRequests);
     }
}

// Inteceptor catches messages here
Public class BrokerRequestInterceptor : omg.org.PortableInterceptor.ServerRequestInterceptor
{
.
.
    public void receive_request_service_contexts(ServerRequestInfo ri)
    {
        Console.WriteLine("I catch messages here");
    }
.
.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T19:06:30.330

在 CORBA 中没有获取该信息的标准方法。一些实现确实有一个自定义的方式来获取一些信息，例如 TAO 有一个你可以访问的传输当前对象。在使用 IIOP 收到呼叫的那一刻，您可以将其缩小到 IIOP 传输电流，它会为您提供该信息。看起来您需要 C# ORB 的扩展才能具有类似的扩展

# c - 未知类型名称'__priority_which_t'

> ID：16175217
> 
> 赞同：4
> 
> 时间：2013-04-23T17:08:51.450
> 
> 标签：c, linux

我刚刚使用 gcc 4.7.2 升级到 fedora 18。以前编译的代码现在失败，并出现有关 __priority_which_t 的错误

```
unknown type name '__priority_which_t'
int setpriority(__priority_which_t which, 
                id_t who, 
                int prio) __attribute__((weak)); 
```

我猜因为它是一个 _t 并以两个下划线开头，它是由 c 库或编译器提供的东西。有谁知道它可能去了哪里或者现在应该用什么代替它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T17:19:03.760

由于 gcc 团队对头文件中的一些清理，以前偶然包含的定义和类型不再存在。在这种情况下，以前间接包含的标头`<sys/resource.h>`在 4.7.2 中停止这样做，从而破坏了编译。

直接包括

```
#include <sys/resource.h> 
```

获取 __priority_which_t 的定义并允许编译完成。

# asp.net - ASP.NET 不会编译调试

> ID：16175224
> 
> 赞同：3
> 
> 时间：2013-04-23T17:09:14.680
> 
> 标签：asp.net, iis

我有两台 IIS 服务器机器，A 和 B。它们都服务于相同的 ASP.NET Web 窗体站点。

在 A 上，当我遇到错误时，我会看到详细的错误页面，其中显示了生成异常的源代码。

在 B 上，当我遇到错误时，我会收到消息...

```
The source code that generated this unhandled exception can only be shown when compiled in debug mode. To enable this, please follow one of the below steps, then request the URL: 
```

当我遇到异常时，我希望服务器 B 也给我源代码和行号。我已确保生成错误的网页具有 Debug="true" 指令，并且我已为调试配置了 web.config（请记住，两个站点都使用相同的文件）。

来自 A 的错误页面：

```
Server Error in '/' Application.
________________________________________
Test error 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ApplicationException: Test error

Source Error: 

Line 10:    protected void Page_Load(object sender, EventArgs e)
Line 11:        {
Line 12:        throw new ApplicationException("Test error");
Line 13:        }
Line 14:    }

Source File: d:\CallLogsSite\Admin\GenerateError.aspx.cs    Line: 12 

Stack Trace: 

[ApplicationException: Test error]
   Admin_GenerateError.Page_Load(Object sender, EventArgs e) in d:\CallLogsSite\Admin\GenerateError.aspx.cs:12
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

B的错误页面：

```
Server Error in '/' Application.
________________________________________
Test error 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ApplicationException: Test error

Source Error: 
The source code that generated this unhandled exception can only be shown when compiled in debug mode. To enable this, please follow one of the below steps, then request the URL:

1\. Add a "Debug=true" directive at the top of the file that generated the error. Example:

  <%@ Page Language="C#" Debug="true" %>

or:

2) Add the following section to the configuration file of your application:

<configuration>
   <system.web>
       <compilation debug="true"/>
   </system.web>
</configuration>

Note that this second technique will cause all files within a given application to be compiled in debug mode. The first technique will cause only that particular file to be compiled in debug mode.

Important: Running applications in debug mode does incur a memory/performance overhead. You should make sure that an application has debugging disabled before deploying into production scenario. 

Stack Trace: 

[ApplicationException: Test error]
   Admin_GenerateError.Page_Load(Object sender, EventArgs e) +46
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

我的猜测是，出于某种原因，尽管我已经进行了设置，但服务器 B 并未编译为 Debug。

我认为机器级别一定有什么东西阻止它提供我的源代码，但我觉得我已经检查了 IIS 和 machine.config 文件中所有明显的位置。我还应该在哪里检查以确保 B 的行为类似于 A？

我的 web.config 文件的选定部分：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0">
        </compilation>
    </system.web>
</configuration> 
```

生成我的示例错误的文件后面的 Web 表单代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Admin_GenerateError : System.Web.UI.Page
    {
    protected void Page_Load(object sender, EventArgs e)
        {
        throw new ApplicationException("Test error");
        }
    } 
```

ASPX页面为上面的代码后面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Admin/admin.master" AutoEventWireup="true" CodeFile="GenerateError.aspx.cs" Inherits="Admin_GenerateError" Debug="true" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="body" Runat="Server">
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:42:21.270

我建议不要打开调试模式来查看实际的文件和行，而是打开跟踪。跟踪是提供该信息，调试提供更多代码以便能够使用调试器调试代码，但在服务器上您不需要它，您只需要知道文件和行。

要在 web.config 上打开跟踪，请将其添加到编译器选项中：

```
<system.codedom>
    <compilers>
        <compiler compilerOptions="/D:RELEASE,TRACE">
        </compiler>
    </compilers>
</system.codedom> 
```

我这里声明了`RELEASE`，你只能保留trace标志，并从调试标志打开关闭调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T16:08:44.403

我刚刚遇到了类似的问题，我能看到的唯一区别是我在一台服务器上发布了**调试**版本，而在另一台服务器上（未显示错误详细信息的服务器）我发布了**发布**版本。当我更改第二个进行调试时，它再次显示了详细信息。

# .net - 在 oracle 表中插入 blob 时出现 Ora-22922

> ID：16175225
> 
> 赞同：1
> 
> 时间：2013-04-23T17:09:17.173
> 
> 标签：.net, oracle

我偶尔会收到此错误。如果我重试，相同的事务可以正常工作。下面是我的表定义。

```
lob(DOC_DATA) store as securefile LS_<mytablename>_DD1
(
tablespace DBLOB disable storage in row chunk 16k retention auto nocache logging
storage(maxextents unlimited pctincrease 0 freelists 12 freelist groups 2)
index LI_<mytablename>_DD1 (tablespace DBLOB storage(maxextents unlimited pctincrease 0 freelists 6))
) 
```

我的存储过程中有一个简单的插入语句。

算法如下。

```
sp name (arrDocData IN mytablename%TYPE,)
begin
insert into table_name (col1,col2,blobcol) values (inval,inval2,arrDocData)
commit write batch nowait ;
exception
errmsg:=errormsg;
rollback
end SPname; 
```

任何帮助将不胜感激。我已经确保`arrDocData`不为空。

# iphone - 有没有办法避免每次 segue 后调用 viewDidLoad ？

> ID：16175226
> 
> 赞同：2
> 
> 时间：2013-04-23T17:09:18.883
> 
> 标签：iphone, storyboard, segue, viewdidload

我在我的主 ViewController 中初始化表、数据等。对于更多设置，我想调用另一个 Viewcontroller：

```
 DateChangeController *theController = [self.storyboard instantiateViewControllerWithIdentifier:@"dateChangeController"];
[self presentViewController:theController animated:YES completion:^{NSLog(@"View controller presented.");}]; 
```

一些点击之后我返回一个segue（自定义:)

```
NSLog(@"Scroll to Ticket");
[self.sourceViewController presentModalViewController:self.destinationViewController animated:YES]; 
```

我的问题：

返回到我的主 ViewController 后，（每次）都会调用 viewDidLoad。我读到，ARC 在“转到”另一个 ViewController 并调用 viewDidUnload 方法后释放了我的 mainView，但我想保留我初始化的所有数据和表开始..

有什么解决办法吗？非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:07:41.180

问题是你正在这样做：

```
main view controller ->
    date change controller ->
        a *different* main view controller 
```

换句话说，虽然在你的口头描述中你使用了“返回到我的主 ViewController”这个词，但*实际上你并没有返回*；您每次都在前进到这个主视图控制器的*另一个*实例，将所有这些视图控制器堆叠在一起。

返回现有视图控制器的方法不是进行segue，而是返回！的回报`presentViewController`是`dismissViewController`。您不为此使用segue；你只要打电话`dismissViewController`。（好吧，在 iOS 6中你实际上*可以使用 segue，但它是一种非常特殊且相当复杂的 segue，称为 Unwind 或 Exit segue。）*

如果你这样做，你将回到你的旧视图控制器，它一直坐在那里等待你的返回，并且`viewDidLoad`不会被调用。

所以，这对你来说是一个很好的问题，因为双重调用`viewDidLoad`向你表明你的架构全错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:57:08.173

我认为您采用了错误的方法- viewDidLoad 应该在被调用时被调用-这是向您发出的通知，即视图正在刷新或最初加载。您要做的是将该表初始化代码移到其他地方，或者至少设置一个布尔变量，以便它只被调用一次。在第一次调用 viewDidLoad 时创建一个包含您的表数据的对象，然后检查它是否已被调用是否可行？

# java - 退出应用程序时是否应该关闭所有资源？

> ID：16175227
> 
> 赞同：0
> 
> 时间：2013-04-23T17:09:19.997
> 
> 标签：java, resources, exit

我有一个通过 COM 端口进行通信的应用程序。

当用户退出我的应用程序时，应用程序是否应该清理/关闭所有内容？

如果我不这样做，我的应用程序安全性会受到威胁吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:16:42.450

一般规则是始终关闭每个资源。问题是你永远无法真正知道它是否可以被利用以及如何被利用。但最好不要冒险。

当我使用 IO、打开流和亲戚时，我喜欢正确刷新它们并始终关闭它们。您可以通过这种方式避免一些难以识别的错误。

`finally`正是出于这个原因，这通常在一个块中完成。无论执行是否引发异常，您都希望最后关闭所有内容。

# visual-studio-2010 - 用 MySQL 连接器/网络替换 Devart DotConnect - Visual Studio 2010

> ID：16175228
> 
> 赞同：0
> 
> 时间：2013-04-23T17:09:21.930
> 
> 标签：visual-studio-2010, mysql-connector, dotconnect

我正在开发 Visual Studio 2010 解决方案。该解决方案是一个由多个 Web 应用程序（使用 JavaScript、ASP 等）组成的网站。

每次编译时，我都会收到一条错误消息，指出我的 DotConnect 试用版已过期。

我不想花钱，而是想使用 MySQL Connector / Net 并将所有 DotConnect 实例替换为 MySQL Connector / Net 实例。

谁能帮我完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T12:40:07.887

最终不得不在全新的计算机上安装所有东西。然后我导入了源代码文件并进行了查找/替换以将旧连接器中的所有引用替换为新连接器。原来视觉工作室很挑剔。如果您的 MS Office 版本与源代码不匹配，则根据您的“参考”，您可能会遇到问题。

祝你好运，如果你有同样的问题.. smh :/

# javascript - 使用属性回退嵌套相同类型的 JavaScript 对象？

> ID：16175232
> 
> 赞同：1
> 
> 时间：2013-04-23T17:09:32.763
> 
> 标签：javascript, inheritance

我正在寻找一种方法来创建具有属性回退的相同类型的嵌套 js 对象。

我希望能够写例如：

state.isLoggedIn 并且如果这个对象没有这个属性（未定义），那么它应该查看基本状态等，直到不再存在基本状态，然后返回未定义。

对于基本状态，我的意思是该状态所基于的其他状态，而不是像类继承那样继承。

我正在考虑制作这样的课程：

```
function State(base) {
    this.base = base; // also a state
} 
```

当我尝试从基于另一个状态 B 的状态 A 获取属性 P 时，并且状态 A 没有定义属性 P，它应该改为查看状态 B。

我知道我可以使用像 state.getState(key) 这样的函数，它首先查看自己的属性，然后查看基本属性。但我正在寻找一种使用普通属性执行此操作的方法。

在 C# 中，它看起来像这样（并使其成为一个动态对象，我将得到几乎与我在 javascript 中寻找的相同的回避类型状态）：

```
class State
{
  public State(State base)
  {
    _base = base;
  }

  State _base;

  Dictionary<string, object> _values = new Dictionary<string, object>();

  public object this[string key]
  {
    get { return _values.ContainsKey(key) ? _values[key] : _base[key]; }
    set { _values[key] = value; }
  }
} 
```

有任何想法吗？可能的？

更新：

这就是我现在得到的：

```
function State() {
}

function ViewModelBase() {
    var self = this;
    self.__parent = ko.observable(null);
    self.state = new State();

    self.parent = ko.computed({
        read: function () {
            return self.__parent();
        },
        write: function (value) {
            if (getObjectClass(value) !== "ViewModelBase") throw new Error("Wrong type of parent.");
            var p = self.__parent();
            if (p != null) throw new Error("Allready parented.");
            self.__parent(value);

            // here i'd like to inherit/nest self.state with value.state
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:02:06.833

不确定这是否是您正在寻找的，但也许是：

```
var state1 = {a : 1};
var state2 = Object.create(state1);
state2.b = 2;
console.log(state2.a); // 1
var state3 = Object.create(state2);
state3.a = 10; // creates an own "a" in state3
console.log(state1.a); // 1
console.log(state2.a); // 1
console.log(state3.b); // 2 
```

正如我在对您问题的原始评论中所建议的那样，这是使用继承。`Object.create`返回一个新对象，该对象使用作为第一个参数传递的对象作为其 [[Prototype]]（某些实现通过`__proto__`属性公开）。当您尝试访问新对象的属性并且找不到自己的属性时，它会在原型链中查找。

`Object.create`旧浏览器不支持，但[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)上提供了一个非常简单的 polyfill 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:13:22.707

这是 CoffeeScript 用于类扩展的（使用原型继承）：

```
var __hasProp = {}.hasOwnProperty,
__extends = function (child, parent) {
    for (var key in parent) {
        if (__hasProp.call(parent, key)) child[key] = parent[key];
    }
    function ctor() {
        this.constructor = child;
    }
    ctor.prototype = parent.prototype;
    child.prototype = new ctor();
    child.__super__ = parent.prototype;
    return child;
}; 
```

这假设类函数都是类函数原型的一部分。

* * *

例如：

```
Animal = (function() {

  function Animal() {}

  Animal.prototype.name = 'Generic Animal';

  Animal.prototype.my_sound = 'none';

  Animal.prototype.sound = function() {
    return console.log(this.my_sound);
  };

  return Animal;

})();

Cow = (function(_super) {

  __extends(Cow, _super);

  function Cow() {
    return Cow.__super__.constructor.apply(this, arguments);
  }

  Cow.prototype.name = 'Cow';

  Cow.prototype.my_sound = 'Moo';

  return Cow;

})(Animal);

Cat = (function(_super) {

  __extends(Cat, _super);

  function Cat() {
    return Cat.__super__.constructor.apply(this, arguments);
  }

  Cat.prototype.name = 'Cat';

  Cat.prototype.my_sound = 'Meow';

  return Cat;

})(Animal); 
```

# ajax - 倒回 - 不仅仅是 $.mobile.changePage

> ID：16175233
> 
> 赞同：0
> 
> 时间：2013-04-23T17:09:34.387
> 
> 标签：ajax, jquery-mobile

我的页面/活动的历史是：

1.  主页 (page0)。
2.  问题列表（第 1 页）。
3.  发行明细卡（第 2 页）。
4.  弹出确认删除问题（不是页面，因为 JQM 弹出不是页面）。

当我确认删除问题并将其删除时，没有理由返回第 2 页（内容已删除）。这里唯一有效的过渡 - 从弹出窗口到问题列表（返回两次）。

但。当我从弹出窗口跳转到第 1 页时`$.mobile.changePage`，历史将第 2 页保存为上一页（因为跳转是从第 2 页的弹出窗口开始的）。因此，当我按回 page1 时，我希望返回 page0（倒回历史记录），但返回无效的 page2。猜猜这里的有效行为是：

1.  从弹出窗口跳转到第 1 页。
2.  完全从历史中删除 page2 和弹出窗口 - 或类似的东西。

怎么做？

# solr - solr如何获得最接近的标题匹配

> ID：16175234
> 
> 赞同：0
> 
> 时间：2013-04-23T17:09:34.750
> 
> 标签：solr

例如，我想搜索“adidas Bright Pink Sleeve Free Shirt”，结果集应按以下顺序排列，顶部结果应为具有上述名称且完全匹配的产品。然后是查询部分匹配的产品，然后是任何匹配的产品。

solr 架构具有以下字段 product_name、brand、category。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:29:46.097

如果您的字段类型是 TextField 并且该类型的分析器链包含[小写过滤器](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.LowerCaseFilterFactory)（以匹配 adidas 到 Adidas），这应该可以工作。我也会启用[autoGeneratePhraseQueries](http://wiki.apache.org/solr/SchemaXml)。

# android - 执行原始查询时未找到 Android SQLite 列错误

> ID：16175237
> 
> 赞同：0
> 
> 时间：2013-04-23T17:09:45.047
> 
> 标签：android, database, sqlite, simplecursoradapter, sqliteopenhelper

我正在制作一个在 SQLite 数据库中搜索餐馆的 android 应用程序。我目前使用自定义加载器（我在网上找到）从数据库加载游标，然后获取该游标并使用 SimpleCursorAdapter 填充列表视图。我希望绑定所有数据，但只显示餐厅的名称（因为当我单击列表项时，我想获取所有数据并将其发送到显示数据的新活动）。如果我指定餐厅名称和餐厅类型作为搜索参数，我会运行原始查询：

```
 "SELECT * FROM Restaurant WHERE name = " + name + " AND rType = " + restaurantType; 
```

在我的 SQLiteCursorLoader 类中，我收到一条错误消息，指出列 rType 不存在，即使我知道该列存在于 Restuarant 表中。当我的查询中有两个 WHERE 子句时，我似乎得到了这个错误，但是当我有一个 WHERE 子句时，这不会发生。任何帮助将不胜感激！这是我的代码：

餐厅搜索结果活动：

```
package com.studentapplication;
import android.app.Activity;
import android.app.ListActivity;
import android.app.LoaderManager;
import android.content.Loader;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class RestaurantSearchResultsActivity extends ListActivity implements
LoaderManager.LoaderCallbacks<Cursor>{

DatabaseHelper databaseHelper;
SimpleCursorAdapter mAdapter;
Bundle searchParameters;

@Override
public void onCreate(Bundle savedInstanceState)
{
    Log.w("CoolBeans", "Results Activity Created");
    super.onCreate(savedInstanceState);

    databaseHelper = new DatabaseHelper(getApplicationContext());
    //setContentView(R.layout.restaurant_search_results);

    Bundle searchParameters = getIntent().getExtras();
    String n = searchParameters.getString("name");
    Log.i("0)", n);

    //first N columns should match toViews first N views
    String[] fromColumns = {getString(R.string.database_column_name),
                           getString(R.string.database_column_restaurant_type),
                           getString(R.string.database_column_phone_number),
                           getString(R.string.database_column_address),
               getString(R.string.database_column_csz),
               getString(R.string.database_column_brief_description),
               getString(R.string.database_column_url),
               getString(R.string.database_column_price)};

    int[] toViews = {android.R.id.text1};

    mAdapter = new SimpleCursorAdapter( getApplicationContext(),
                        this.getListView().getId(),
                        null,
                            fromColumns,
                        toViews,
                        0);
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, searchParameters, this);       
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle searchParameters) {
    Log.i("3)", "Correct Loader Being Built");
    return new SQLiteCursorLoader(getApplicationContext(),
            databaseHelper,
            searchParameters,
            null);

}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    mAdapter.swapCursor(data);

}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);

}

@Override
    public void onListItemClick(ListView l, View v, int position, long id)
{
    Cursor myCursor = (Cursor)l.getItemAtPosition(position);
    if(l.isItemChecked(position) == true)
    {
        l.setItemChecked(position, false);
        //shut down previously selected item details

    }
    else
    {
        l.setItemChecked(position, true);

        //start previously selected item details

    }
}

} 
```

SQLiteCursorLoader：

```
package com.studentapplication;

import java.io.FileDescriptor;
import java.io.PrintWriter;
import java.util.Arrays;
import android.content.ContentValues;
import android.content.Context;
import android.content.res.Resources;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteQueryBuilder;
import android.os.Bundle;
import android.util.Log;

public class SQLiteCursorLoader extends AbstractCursorLoader
{
SQLiteOpenHelper db=null;
String rawQuery=null;
String[] args=null;

/**
 * Creates a fully-specified SQLiteCursorLoader. See
 * {@link SQLiteDatabase#rawQuery(SQLiteDatabase, String, String[])
 * SQLiteDatabase.rawQuery()} for documentation on the
 * meaning of the parameters. These will be passed as-is
 * to that call.
 */
public SQLiteCursorLoader(Context context, SQLiteOpenHelper db, Bundle
    searchParameters, String[] args)
{
    super(context);
    this.db=db;
    this.rawQuery=createQuery(searchParameters);
    this.args=args;
}

private String createQuery(Bundle searchParameters) {
    String name = "\'";
    name = name + searchParameters.getString("name");
    name = name + "\'";
    int price = searchParameters.getInt("price");
    String restaurantType = "\'";
    restaurantType = restaurantType +
            searchParameters.getString("restaurant_type");
    restaurantType = restaurantType + "\'";

    //String dist = searchParameters.getString("dist");

    String theQuery = "";

    if(!name.equals("\'\'"))
    {
        if(!restaurantType.equals("\'_\'"))
        {
            theQuery = "SELECT * FROM Restaurant WHERE name 
= "+ name + " AND rType = " + restaurantType;
        }
        else if(price != 0)
        {
            theQuery = "SELECT * FROM Restaurant WHERE name = " + name
+ " AND price = " + ((Integer)price).toString();
        }
        else
        {
            theQuery="SELECT * FROM Restaurant WHERE name = " + name;
        }
    }
    else if(!restaurantType.equals("\'\'"))
    {
        theQuery = "SELECT * FROM Restaurant WHERE type = " +
restaurantType + " SORT BY name"; 
    }
    else if(price != 0)
    {
        theQuery="SELECT * FROM Restaurant WHERE price=" + price + " SORT
BY name";
    }

    return theQuery;
}

/**
 * Runs on a worker thread and performs the actual
 * database query to retrieve the Cursor.
 */
@Override
protected Cursor buildCursor()
{
    return(db.getReadableDatabase().rawQuery(rawQuery, args));
}

/**
 * Writes a semi-user-readable roster of contents to
 * supplied output.
 */
@Override
public void dump(String prefix, FileDescriptor fd, PrintWriter writer, String[]
    args)
{
    super.dump(prefix, fd, writer, args);
    writer.print(prefix);
    writer.print("rawQuery=");
    writer.println(rawQuery);
    writer.print(prefix);
    writer.print("args=");
    writer.println(Arrays.toString(args));
}

public void insert(String table, String nullColumnHack, ContentValues values)
{
    new InsertTask(this).execute(db, table, nullColumnHack, values);
}

public void update(String table, ContentValues values, String whereClause, String[]
    whereArgs)
{
    new UpdateTask(this).execute(db, table, values, whereClause, whereArgs);
}

public void replace(String table, String nullColumnHack, ContentValues values)
{
    new ReplaceTask(this).execute(db, table, nullColumnHack, values);
}

public void delete(String table, String whereClause, String[] whereArgs)
{
    new DeleteTask(this).execute(db, table, whereClause, whereArgs);
}

public void execSQL(String sql, Object[] bindArgs)
{
    new ExecSQLTask(this).execute(db, sql, bindArgs);
}

//Private Classes

private class InsertTask extends ContentChangingTask<Object, Void, Void>
{
    InsertTask(SQLiteCursorLoader loader)
    {
        super(loader);
    }

    @Override
    protected Void doInBackground(Object... params)
    {
        SQLiteOpenHelper db=(SQLiteOpenHelper)params[0];
        String table=(String)params[1];
        String nullColumnHack=(String)params[2];
        ContentValues values=(ContentValues)params[3];

        db.getWritableDatabase().insert(table, nullColumnHack, values);

        return(null);
    }
}

private class UpdateTask extends ContentChangingTask<Object, Void, Void>
{
    UpdateTask(SQLiteCursorLoader loader)
    {
        super(loader);
    }

    @Override
    protected Void doInBackground(Object... params)
    {
        SQLiteOpenHelper db=(SQLiteOpenHelper)params[0];
        String table=(String)params[1];
        ContentValues values=(ContentValues)params[2];
        String where=(String)params[3];
        String[] whereParams=(String[])params[4];

        db.getWritableDatabase().update(table, values, where, whereParams);

        return(null);
    }
}

private class ReplaceTask extends ContentChangingTask<Object, Void, Void>
{
    ReplaceTask(SQLiteCursorLoader loader)
    {
        super(loader);
    }

    @Override
    protected Void doInBackground(Object... params)
    {
        SQLiteOpenHelper db=(SQLiteOpenHelper)params[0];
        String table=(String)params[1];
        String nullColumnHack=(String)params[2];
        ContentValues values=(ContentValues)params[3];

        db.getWritableDatabase().replace(table, nullColumnHack, values);

        return(null);
    }
}

private class DeleteTask extends ContentChangingTask<Object, Void, Void>
{
    DeleteTask(SQLiteCursorLoader loader)
    {
        super(loader);
    }

    @Override
    protected Void doInBackground(Object... params)
    {
        SQLiteOpenHelper db=(SQLiteOpenHelper)params[0];
        String table=(String)params[1];
        String where=(String)params[2];
        String[] whereParams=(String[])params[3];

        db.getWritableDatabase().delete(table, where, whereParams);

        return(null);
    }
}

private class ExecSQLTask extends ContentChangingTask<Object, Void, Void>
{
    ExecSQLTask(SQLiteCursorLoader loader)
    {
        super(loader);
    }

    @Override
    protected Void doInBackground(Object... params)
    {
        SQLiteOpenHelper db=(SQLiteOpenHelper)params[0];
        String sql=(String)params[1];
        Object[] bindParams=(Object[])params[2];

        db.getWritableDatabase().execSQL(sql, bindParams);

     return(null);
    }
}
} 
```

AbstractCursorLoader：

```
package com.studentapplication;

import android.annotation.TargetApi;
import android.content.AsyncTaskLoader;
import android.content.Context;
import android.database.Cursor;
import android.os.Build;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
abstract public class AbstractCursorLoader extends AsyncTaskLoader<Cursor> {

abstract protected Cursor buildCursor();
Cursor lastCursor=null;

public AbstractCursorLoader(Context context) {
  super(context);
}

/** 
 * Runs on a worker thread, loading in our data. Delegates
 * the real work to concrete subclass' buildCursor() method. 
 */
@Override
public Cursor loadInBackground() {
  Cursor cursor=buildCursor();

  if (cursor!=null) {
    // Ensure the cursor window is filled
    cursor.getCount();
  }

  return(cursor);
}

/**
 * Runs on the UI thread, routing the results from the
 * background thread to whatever is using the Cursor
 * (e.g., a CursorAdapter).
 */
@Override
public void deliverResult(Cursor cursor) {
  if (isReset()) {
    // An async query came in while the loader is stopped
    if (cursor!=null) {
      cursor.close();
    }

    return;
  }

  Cursor oldCursor=lastCursor;
  lastCursor=cursor;

  if (isStarted()) {
    super.deliverResult(cursor);
  }

  if (oldCursor!=null && oldCursor!=cursor && !oldCursor.isClosed()) {
    oldCursor.close();
  }
}

/**
 * Starts an asynchronous load of the list data.
 * When the result is ready the callbacks will be called
 * on the UI thread. If a previous load has been completed
 * and is still valid the result may be passed to the
 * callbacks immediately.
 * 
 * Must be called from the UI thread.
 */
@Override
protected void onStartLoading() {
  if (lastCursor!=null) {
    deliverResult(lastCursor);
  }

  if (takeContentChanged() || lastCursor==null) {
    forceLoad();
  }
}

/**
* Must be called from the UI thread, triggered by a
* call to stopLoading().
*/
@Override
protected void onStopLoading() {
  // Attempt to cancel the current load task if possible.
  cancelLoad();
}

/**
 * Must be called from the UI thread, triggered by a
 * call to cancel(). Here, we make sure our Cursor
 * is closed, if it still exists and is not already closed.
 */
@Override
public void onCanceled(Cursor cursor) {
  if (cursor!=null && !cursor.isClosed()) {
    cursor.close();
  }
}

/**
 * Must be called from the UI thread, triggered by a
 * call to reset(). Here, we make sure our Cursor
 * is closed, if it still exists and is not already closed.
 */
@Override
protected void onReset() {
  super.onReset();

  // Ensure the loader is stopped
  onStopLoading();

  if (lastCursor!=null && !lastCursor.isClosed()) {
    lastCursor.close();
  }

  lastCursor=null;
  }
  } 
```

数据库助手：

```
package com.studentapplication;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "LOCAL_DATABASE";

// table Names
private static final String TABLE_Restaurant = "Restaurant";
private static final String TABLE_Coupon = "Coupon";
private static final String TABLE_Linker = "Linker";

//restaurant columns
private static final String R_Name = "name";
private static final String R_Description = "description";
private static final String R_Address = "address";
private static final String R_CSZ = "CSZ";
private static final String R_URL = "url";
private static final String R_Price = "price";
private static final String R_Type = "rType";
private static final String R_ID = "_id";

//coupon columns
private static final String C_ID = "_id";
private static final String C_NAME = "name";
private static final String C_Description = "description";

//linker table columns
private static final String r_id = "r_id";
private static final String c_id = "c_id";
private static final String date = "date";
private static final String l_id = "l_id";

public DatabaseHelper(Context context)
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);

}

public DatabaseHelper(Context context, String name, CursorFactory factory,
        int version) {
    super(context, name, factory, version);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_Restaurant_TABLE = "CREATE TABLE " + TABLE_Restaurant + "( "
            + R_ID + " INTEGER PRIMARY KEY, "
            + R_Name + " TEXT NOT NULL, " 
            + R_Type + " TEXT NOT NULL, "
            + R_Address + " TEXT NOT NULL, " 
            + R_CSZ + " TEXT NOT NULL, "
            + R_Description + " TEXT NOT NULL, " 
            + R_URL + " TEXT NOT NULL, "
            + R_Price +" INTEGER NOT NULL"
            + " )";

    String CREATE_Coupon_TABLE = "CREATE TABLE " + TABLE_Coupon + "("
            + C_ID + " INTEGER PRIMARY KEY, " 
            + C_NAME + " TEXT, "
            + C_Description + " TEXT"
            + ")";

    String CREATE_Linker_TABLE = "CREATE TABLE " + TABLE_Linker + "("
            + r_id + " INTEGER, " 
            + c_id + " INTEGER, " 
            + date + " DATE, "
            + l_id + "INTEGER PRIMARY KEY, "
            + "FOREIGN KEY(r_id) REFERENCES Restaurant(_id), "
            + "FOREIGN KEY(c_id) REFERENCES Coupon(_id) )";

    db.execSQL(CREATE_Restaurant_TABLE);
    db.execSQL(CREATE_Coupon_TABLE);
    db.execSQL(CREATE_Linker_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_Restaurant);
    // Create tables again
    onCreate(db);
}

} 
```

堆栈跟踪：

```
04-23 13:47:29.691: E/SQLiteLog(2600): (1) no such column: rType
04-23 13:47:29.691: W/dalvikvm(2600): threadid=11: thread exiting with uncaught
    exception (group=0x40a13300)
04-23 13:47:29.852: E/AndroidRuntime(2600): FATAL EXCEPTION: AsyncTask #1
04-23 13:47:29.852: E/AndroidRuntime(2600): java.lang.RuntimeException: An error
    occured while executing doInBackground()
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.os.AsyncTask$3.done(AsyncTask.java:299)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.lang.Thread.run(Thread.java:856)
04-23 13:47:29.852: E/AndroidRuntime(2600): Caused by:
    android.database.sqlite.SQLiteException: no such column: rType (code 1): , while
    compiling: SELECT * FROM Restaurant WHERE name = 'RName' AND rType = 'Fancy'
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteConnection.acquirePreparedStatement
    (SQLiteConnection.java:882)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.database.sqlite.SQLiteDirectCursorDriver.query
    (SQLiteDirectCursorDriver.java:44)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
   android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
   android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    com.studentapplication.SQLiteCursorLoader.buildCursor(SQLiteCursorLoader.java:88)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    com.studentapplication.AbstractCursorLoader.loadInBackground
    (AbstractCursorLoader.java:24)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    com.studentapplication.AbstractCursorLoader.loadInBackground
    (AbstractCursorLoader.java:1)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:301)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:68)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:56)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    android.os.AsyncTask$2.call(AsyncTask.java:287)
04-23 13:47:29.852: E/AndroidRuntime(2600):     at
    java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-23 13:47:29.852: E/AndroidRuntime(2600):     ... 4 more
04-23 13:47:29.902: W/ActivityManager(161):   Force finishing activity
    com.studentapplication/.RestaurantSearchResultsActivity
04-23 13:47:29.902: W/WindowManager(161): Failure taking screenshot for (266x425) to
    layer 21020 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:25:21.900

在生产中，当您修改数据库的架构时，您会碰到传递给`SQLiteOpenHelper`构造函数的架构版本号，因此`SQLiteOpenHelper`会调用`onUpgrade()`并影响更改。

在开发中，如果您愿意，您也可以这样做。但是，很容易忘记这一点。因此，如果您的数据库结构似乎与预期不符，则：

*   碰撞该架构版本号，以强制`onUpgrade()`调用，或

*   通过卸载、“清除数据”从您的应用程序的“设置”条目等中清除现有数据库，以强制调用`onCreate()`您的`SQLiteOpenHelper`

# prolog - 查找文件根目录并在 Prolog 中读取

> ID：16175239
> 
> 赞同：0
> 
> 时间：2013-04-23T17:09:55.500
> 
> 标签：prolog

我需要使用以下代码将文件读入 prolog 中的数据库：

```
open('C:/Files/text.txt', read, S) 
```

它读起来很完美，但我必须将我的 pl 用于另一台计算机，并且目录可能会有所不同，例如，如果使用

```
open('text.txt',read,S) 
```

即使我的 pl 文件和 txt 位于根目录 (C:/Files/text.txt) 中，它也无法读取。

有没有更正阅读txt。无论其中的根 pl 和 txt 是什么，只是同一个文件夹很重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-16T20:10:37.453

您可以使用谓词 absolute_file_name/[2,3] 查看如何解析相对文件名。例如我得到：

```
?- absolute_file_name('text.txt', X, [mode(read)]).
X = 'c:/users/user/documents/prolog/text.txt'. 
```

通常工作目录用于从顶层解析相对文件名。您可以按如下方式访问和修改工作目录：

```
/* get the wd */
?- working_directory(X, X).
X = 'c:/users/user/documents/prolog/'.

/* set the wd */
?- working_directory(_, 'c:/users/user/desktop').
true.

?- absolute_file_name('text.txt', X, [mode(read)]).
X = 'c:/users/user/desktop/text.txt' 
```

咨询谓词在咨询期间使用不同的规则，它们相对于当前咨询的文件进行解析。

# android - 从xml加载android布局

> ID：16175241
> 
> 赞同：1
> 
> 时间：2013-04-23T17:10:00.153
> 
> 标签：android, google-maps, android-layout, layout-inflater, android-inflate

我想从 xml 文件加载布局，我试过：

```
View view = inflater.inflate(R.layout.map_cameras_fragment, container, false); 
```

但它只是显示了这一点：

```
java.lang.NullPointerException at maps.z.r.onResume(Unknown Source)... 
```

这是我的整个代码（我正在使用[android 地图扩展](https://code.google.com/p/android-maps-extensions/)）：

```
public class MapCamerasFragment extends SupportMapFragment {

private GoogleMap mMap = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater,
                         ViewGroup container, 
                         Bundle savedInstanceState) 
{    
    View view = inflater.inflate(R.layout.map_cameras_fragment, container, false);  
    SupportMapFragment myFrag = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.mapChooseCameras);
    mMap = myFrag.getExtendedMap();

    MarkerGenerator.addMarkersInWorld(mMap);
    mMap.setClustering(new ClusteringSettings().iconDataProvider(new DemoIconProvider(getResources())).addMarkersDynamically(true));

    return view;
}
} 
```

我究竟做错了什么？

**日志猫**：

```
E/AndroidRuntime(3673): FATAL EXCEPTION: main
E/AndroidRuntime(3673): java.lang.NullPointerException
at maps.z.r.onResume(Unknown Source)
at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:115)
at android.os.Binder.transact(Binder.java:297)
at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onResume(Unknown Source)
at com.google.android.gms.maps.SupportMapFragment$a.onResume(Unknown Source)
at com.google.android.gms.internal.e$1.a(Unknown Source)
at com.google.android.gms.internal.e.a(Unknown Source)
at com.google.android.gms.internal.e.onResume(Unknown Source)
at com.google.android.gms.maps.SupportMapFragment.onResume(Unknown Source)
at android.support.v4.app.Fragment.performResume(Fragment.java:1503)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:947)
at android.support.v4.app.FragmentManagerImpl.performPendingDeferredStart(FragmentManager.java:807)
at android.support.v4.app.FragmentManagerImpl.startPendingDeferredFragments(FragmentManager.java:1112)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1461)
at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
at android.view.View.measure(View.java:12723)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at android.view.View.measure(View.java:12723)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
at android.view.View.measure(View.java:12723)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

**map_cameras_fragment.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/mapChooseCameras"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        class="pl.mg6.android.maps.extensions.SupportMapFragment"/>
      <Button android:id="@+id/googlemaps_select_location"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="Select"/>
</RelativeLayout> 
```

**更新 1：**

我一直在尝试这个

```
 ...
  View view = inflater.inflate(R.layout.map_cameras_fragment, container, false);       
  super.onCreateView(inflater, container, savedInstanceState);
  mMap = super.getExtendedMap();
  MarkerGenerator.addMarkersInWorld(mMap);
  mMap.setClustering(new ClusteringSettings().iconDataProvider(new DemoIconProvider(getResources())).addMarkersDynamically(true));  
  return view;
  ... 
```

也不例外，但标记是不可见的。似乎有两种观点...您知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T05:16:37.723

我有同样的问题。我将片段更改为扩展片段而不是 SupportMapFragment。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T09:52:26.510

您不能同时扩展`SupportMapFragment`和包含`SupportMapFragment`在您的片段中。嗯，你可以……但这有意义吗？

您也不应该将片段添加到 xml 中的片段。它起作用的唯一方法是在代码中创建子片段并用于添加`getChildFragmentManager()`到您的片段中。`FragmentManager``SupportMapFragment`

试试这个代码：[SupportMapFragment inside fragment](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1)。

# performance - 如何以更快的方式计算条件数？

> ID：16175245
> 
> 赞同：1
> 
> 时间：2013-04-23T17:10:20.550
> 
> 标签：performance, matlab, conditional-statements, svd

我正在 MATLAB 中进行优化以计算条件数，如下所示：

```
s = svd(H, 0);
cond = max(s) ./ min(s); 
```

非常耗时，尤其是对于大型`H`矩阵。我正在寻找近似但快速的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:39:52.447

您正在计算所有奇异值并丢弃除其中两个以外的所有奇异值。你可以试试这个：

```
largestS = svds(H,1); %largest singular value
smallestS  = svds(H,1,0); %smallest singular value
cond = largestS/smallestS 
```

# salesforce - 用 sobject 填充 SelectList

> ID：16175251
> 
> 赞同：0
> 
> 时间：2013-04-23T17:10:44.527
> 
> 标签：salesforce, apex-code, visualforce, force.com, multi-select

我正在尝试创建一个类，该类将根据传入的 URL 参数填充多选列表。

我有麻烦。slectlist 永远不会呈现，但是，通过调试器查看，我可以看到记录已找到并且应该填充。

我错过了什么愚蠢的东西吗？

VisualForce.Page

```
<apex:page controller="PopUp">

<apex:form >
    <apex:selectList value="{!objectType}"  multiselect="true">
        <apex:selectOptions value="{!SelectListOptions}"/>
    </apex:selectList>
</apex:form> 
```

控制器类：

```
public with sharing class PopUp {

public sObject objParameter {get;set;}
public string fldParameter {get;set;}
public string queryType {get;set;}
public static string objName{get;set;}
public list<SelectOption> selectListOptions {get;set;}
public static list<string> TEST {get;set;}
public String[] objectType= new String[]{};

public PopUp(){

    objName = ApexPages.currentPage().getParameters().get('obj');
    sObject dynObject = Schema.getGlobalDescribe().get(objName).newSObject() ; 
    objParameter = dynObject;

    fldParameter = ApexPages.currentPage().getParameters().get('fld');
    String queryType = ApexPages.currentPage().getParameters().get('qt');

    system.debug('***objParameter: ' + objParameter);
    system.debug('***fldParameter: ' + fldParameter);

    //List<selectOption> L =  getPicklistValues(objParameter, fldParameter, queryType);
}

public static list<SelectOption> getPicklistValues(SObject obj, String fld, String queryType)
{
    list<SelectOption> options = new list<SelectOption>();

    if(queryType == 'soql'){

        string query = 'select ' + fld + ' from ' +  objName;
        system.debug('***query: ' + query);

        List<sObject> dynList = Database.query(query);
        system.debug('***dynList: ' + dynList);

        for(integer i=0;i< dynList.size();i++){

            string fldValue = string.valueof(dynList[i].get(fld));
            system.debug('***fldValue: ' + fldValue);

            options.add(new SelectOption(fldValue,fldValue));
            TEST.add(fldValue);
        }
    }

    system.debug('***options: ' + options);
    return options;

}

public List<selectOption> getSelectListOptions() {
    return getPicklistValues(objParameter, fldParameter, queryType);
}

public String[] getObjectType() 
{
    return objectType;
}

public void setObjectType(String[] objectType) 
{
    this.objectType= objectType;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:57:31.230

我认为您通过本质上具有两个 getter 方法（您添加的一个，以及您告诉控制器通过`get;`在变量声明中指定来创建自己的一个）混淆了 VF 页面：

```
public list<SelectOption> selectListOptions {get;set;}

public List<selectOption> getSelectListOptions() {
    return getPicklistValues(objParameter, fldParameter, queryType);
} 
```

它看起来不像您在`selectListOptions`任何地方填充，因此 VF 页面会看到它并且不会将任何选项添加到您的选项列表中。`getSelectListOptions()`VF 页面只有在找不到变量的 getter时才会调用，所以`selectListOptions`像这样修改声明，你应该没问题：

```
public List<SelectOption> selectListOptions {set;} 
```

实际上，您的页面似乎不应该有权设置它，因此如果您愿意，您也可以删除 setter。

# java - 具有多列的树的自定义工具提示。

> ID：16175253
> 
> 赞同：1
> 
> 时间：2013-04-23T17:10:52.127
> 
> 标签：java, eclipse, event-handling

我正在使用一个[`org.eclipse.swt.widgets.Tree`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Tree.html)有 2 列的对象。我想为列显示不同的工具提示。

使用[`event`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Event.html)对象，我们可以找到[`TreeItem`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/TreeItem.html)元素，但是如何判断哪些列被悬停？

```
public void toolTipShown(Event event) {
    Tree tree = (Tree) event.widget;
    TreeItem item = tree.getItem(new Point(event.x, event.y));
    //How do I tell which of the Columns were Hovered?
} 
```

# servicestack - 服务堆栈降价

> ID：16175254
> 
> 赞同：1
> 
> 时间：2013-04-23T17:10:56.293
> 
> 标签：servicestack

有谁知道如何在 Service Stack Markdown 中使用枚举的 ToString 方法？我的 Message 对象上有一个名为 Status 的属性，它是一个具有 4 个值的枚举。在降价中，我正在这样做......

```
@foreach (var m in Model.Messages) {
<tr>
  <td>@m.Id</td>
  <td>@m.Endpoint</td>
  <td>@m.Status</td>
</tr>
} 
```

但是我收到一个错误，说 Enum 不能传递给 String.ToString(Object)。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:11:44.420

这不一定是理想的，但我通过添加一个带有将对象返回到 String 方法的方法的 CustomerMarkdownViewBase 解决了这个问题。

```
Public Class CustomMarkdownViewBase
    Inherits MarkdownViewBase

    Public Function ObjectToString(o As Object) As String
        Return o.ToString
    End Function

End Class 
```

然后在降价中我执行以下操作。

```
@foreach (var m in Model.Messages) {
<tr>
  <td>@m.Id</td>
  <td>@m.Endpoint</td>
  <td>@ObjectToString(@m.Status)</td>
</tr>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:33:18.243

可以尝试服务堆栈的枚举扩展`ToDescription()`

```
<td>@m.Status.ToDescription()</td> 
```

# git - 将某些文件的 SVN 历史记录迁移到 GIT

> ID：16175259
> 
> 赞同：1
> 
> 时间：2013-04-23T17:11:09.207
> 
> 标签：git, git-svn

我正在将存储在 SVN 存储库中的 PHP 应用程序转换为 MVC 框架，并且我想将新代码存储在 GIT 存储库中。

我从旧代码中复制的大部分内容是我们随着时间的推移创建的模型。提交历史是我们开发过程中非常重要的一部分，但为了保持存储库的简单性，我只想要那些文件的历史记录，而不是整个存储库的历史记录。

有没有办法将单个文件（或数百个文件中的少数文件）的历史从 SVN 导出到 GIT？

例子：

```
copy-with-history /svn/project/inc/classes/*.mo.php /git/project2/app/Classes/Models/*.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:28:29.673

There is `--ignore-paths=` argument you could specify to the `git svn clone` command. The tricky part is to compose a regular expression which includes only that you need. You know your repo better, maybe you could compose a simple list of ignores.

# c# - 如何将两个 DateTimes 之间的天跨度拆分为多个一天跨度？

> ID：16175271
> 
> 赞同：1
> 
> 时间：2013-04-23T17:11:55.723
> 
> 标签：c#, .net, datetime

我有一个导入到`VehicleMovement`表中的 CSV 文件。每条记录要么是车辆出口，要么是停车场的入口，在着火时跳过铁环后，我将它们合并到一个`VehiclePresence`表格中，其中几乎每条记录都有 a`StartDateTime`和`EndDateTime`. 现在我必须计算车辆存在时间的停车费。当存在超过一天时，这是一个问题。停车价格基于一天中的时间、一周中的一天等，因此我需要将该存在拆分为单天存在并计算它们的每日费用。

例如，我有一个 06h00 的切换时间，以及== **2013-04-22 20:37:28**和== **2013-04-25 22:55:20**`VehiclePresence`的记录。我想变出以下内容：`StartDateTime`**`EndDateTime`**`VehiclePresenses`****

 ****```
1\. 04/22 20h37 to 04/23 06h00.
2\. 04/23 06h00 to 04/24 06h00.
3\. 04/24 06h00 to 04/25 22h55. 
```

这将为我留下一条`VehiclePresence`带有修改的开始和结束时间的原始记录，以及我将插入的两条新记录。这没有问题。

我怎样才能做到这一点？我个人会在超过 24 小时内收取一笔巨额费用，但我被告知允许各种定价规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:21:02.130

计算开始时间后的第一个休息时间，并日复一日地循环直到到达结束时间。

例子：

```
DateTime StartDateTime = new DateTime(2013, 04, 22, 20, 37, 28);
DateTime EndDateTime = new DateTime(2013, 04, 25, 22, 55, 20);

DateTime startTime = StartDateTime;

// calculate first break time
DateTime breakTime = StartDateTime.Date.AddHours(6);
if (breakTime < StartDateTime) {
  breakTime = breakTime.AddDays(1);
}

while (breakTime < EndDateTime) {

  Console.WriteLine("{0} - {1}", startTime, breakTime);

  // move to next day
  startTime = breakTime;
  breakTime = breakTime.AddDays(1);

}
Console.WriteLine("{0} - {1}", startTime, EndDateTime); 
```

输出：

```
2013-04-22 20:37:28 - 2013-04-23 06:00:00
2013-04-23 06:00:00 - 2013-04-24 06:00:00
2013-04-24 06:00:00 - 2013-04-25 06:00:00
2013-04-25 06:00:00 - 2013-04-25 22:55:20 
```****

# android - 动态壁纸可以在纵向模式下锁定屏幕吗？

> ID：16175276
> 
> 赞同：3
> 
> 时间：2013-04-23T17:12:17.113
> 
> 标签：android, live-wallpaper, wallpaper

动态壁纸可以在纵向模式下锁定屏幕吗？如果是这样，怎么办？

我应该提一下，我在 SO 上看到了这个问题的两个假设答案，一个看起来非常复杂，我没有完全理解，并且原始发布者不接受答案。第二个答案对我不起作用。

第三个答案涉及使用：

```
android:screenOrientatin = "portrait" or "landscape" 
```

已被建议，但尚不清楚这应该在清单中的确切位置。

**编辑：**尝试将 android:screenOrientation="portrait" 放在清单中的许多不同位置，但没有一个起作用。

**编辑：**另一个答案是旋转您的位图并通过将所有内容横向绘制来处理旋转-但这看起来很丑陋，因为当您旋转手机时，操作系统会启动旋转动画-这意味着您会得到可怕的跳跃效果转动电话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T13:59:08.823

我开始怀疑真正的答案只是“不”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:48:29.330

你试过了`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T09:18:28.113

在你的 AndroidManifest.xml 你应该有类似的东西：

```
 <application
    android:icon="@drawable/app_icon"
    android:label="@string/nuboLogin"
    android:name=".LoginApplication" 
     android:debuggable="true">
    <activity
        android:name=".WallPaperActivity"
        android:label="@string/wallPaper" 
        android:windowSoftInputMode="adjustPan" 
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" android:screenOrientation="portrait"
        android:configChanges="orientation|keyboardHidden">
    </activity> 
```

这应该确保您的 Activity 以纵向模式运行。如果您更喜欢横向，您可以轻松猜出您应该修改什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T06:37:05.070

当方向改变时，Android 应用程序会重新启动 Activity。您可以使用

```
android:configChanges in your manifest. The activity is shut down and restarted by default, when a configuration change occurs at runtime, but declaring a configuration with this attribute will prevent the activity from being restarted. Instead, the activity remains running and its onConfigurationChanged() method is called.
use android:screenOrientatin = "portrait" or "landscape" it will force the app to run in the mode you specify. However it will not prevent the activity from being shut down and restarted. 
```

# c++ - 使用 C++ 进行聚合

> ID：16175279
> 
> 赞同：0
> 
> 时间：2013-04-23T17:12:25.867
> 
> 标签：c++, class, aggregate-functions, relationship

我试图让一个班级与另一个班级合作。它应该减少另一个类的成员。

我的第一堂课是

```
 class Bike
{
   private:
   int miles;
   Speedometer speedom;
   static int fuelCount;

   public:

   Bike();
   Bike(int, Speedometer*);       //Problem occurs here

   ~Bike();

   int getMiles();
   int getFuelCount();

   void incrementMiles();
};

    int Bike::fuelCount = 0;

   Bike::Bike()
   {
miles = 0;
fuelCount++;
   }

   Bike::Bike(int m, Speedometer * spm)  //This is where I am having problems 
   {
     miles = m;
     speedom = &spm;
   }

   Bike::~Bike()
   {
       cout << "The Bike's destructor is running." << endl;
       fuelCount--;
   }

   int Bike::getMiles()
   {
       return miles;
   }

   int Bike::getFuelCount()
   {
            return fuelCount;
   }

   void Bike::incrementMiles()
   {
            miles++;
            if (miles == 999999)
            miles = 0;
   } 
```

应该包含在第一个类中的另一个类是：

```
 Class Speedometer
   {
     private:
          int fuel;

     public:
           Speedometer();
           Speedometer(int);

           ~Speedometer();

           int getFuel();

           void incrementFuel();
           void decrementFuel();
   };

   Speedometer::Speedometer()
   {
      fuel = 0;
   }

   Speedometer::Speedometer(int f)
   {
     fuel = f;
   }

   int Speedometer::getFuel()
   {
   return fuel;
   }

   void Speedometer::incrementFuel()
   {
      if (fuel <= 15)
          fuel++;
   }

   void Speedometer::decrementFuel()
   {
      if (fuel > 0)
      fuel--;
   } 
```

他们应该一起工作。自行车是能够与速度计对象一起工作的。每行驶 24 英里，它应将车速表的当前燃料量减少一加仑。这应该是聚合关系而不是组合。

请帮助我了解如何建立这种关系以及应该如何称呼它。先感谢您。

顺便说一句，这是我的主要功能 - 我有所有正确的#includes 我只是没有在这里列出它们

```
 int main(int argc, char *argv[])
   {
     Speedometer a(999970, spd);

   for(int count = 0; count <=24; count++)
       a.decrementMiles();

   while (a.getFuel() > 0)
   {
          a.incrementMiles();

          cout<< "Miles:" << a.getMiles() << endl;
          cout<< "Fuel:" << a.getFuel() << endl;
    }

   return 0;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:23:06.620

```
 #include <iostream>

using namespace std;

class Bike 
{
   private:
   int miles;   
   static int fuelCount;
                        // Speedometer speedom;  

   public:

   Bike();
   Bike(int);  //  Speedometer *);  check comment on line 82

   ~Bike();

   int getMiles();
   int getFuelCount();

   void incrementMiles();
};

    int Bike::fuelCount = 0;

   Bike::Bike()
   {
    miles = 0;
    fuelCount++;
   }

   Bike::Bike(int m)//Speedometer (*spm) I don't see the purpose of this in the current state of the program, I may not be seing the whole picture
   {
     miles = m;
                    /* speedom = spm; remember, there must be a parent and a child class, at the current state you'r trying
                    to call a child from parent, the child class has not been defined, so i switched them and now Bike is a chiled. */
   }

   Bike::~Bike()
   {
       cout << "The Bike's destructor is running." << endl;
       fuelCount--;
   }

   int Bike::getMiles()
   {
       return miles;
   }

   int Bike::getFuelCount()
   {
        return fuelCount;
   }

   void Bike::incrementMiles()
   {
        miles++;
        if (miles == 999)
        miles = 0;
   }

   class Speedometer
   {
     private:
      int fuel;

     public:
       Speedometer();
       Speedometer(int f);            
       int getFuel();
       Bike theBike;  // This is what you needed in order to make incrementMiles to work.
       void incrementFuel();
       void decrementFuel();    

   };

   Speedometer::Speedometer()
   {
      fuel = 0;
  }

   Speedometer::Speedometer(int f)
   {
 fuel = f;
   }

   int Speedometer::getFuel()
   {
   return fuel;
   }

   void Speedometer::incrementFuel()
   {
  if (fuel <= 15)
      fuel++;
   }

   void Speedometer::decrementFuel()
   {
  if (fuel > 0)
  fuel--;
   }

int main(int argc, char *argv[])
   {
 Speedometer a(999); //You never declared this, did you mean spm???

   for(int count = 0; count <=24; count++)
   a.theBike.incrementMiles();

   while (a.getFuel() > 0)
    {
      a.theBike.incrementMiles();

      cout<< "Miles:" << a.theBike.getMiles() << endl;
      cout<< "Fuel:" << a.getFuel() << endl;

}

   cin.get();

   return 0;
   }                                             //There is no break declared (that i can see at least) so the program runs an infinite loop 
                                            // Don't want to add too many things to it, I don't know what your plan is.
                                           // Hoping to have made it clearer. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:23:37.907

你在这里有很多问题。

首先，在您的 中`main()`，您`Speedometer`使用尚未实现的构造函数构造对象。您定义的唯一构造函数是默认构造函数和`Speedometer(int)`. 然后你调用`Speedometer(int, ???)`,`???`因为`spd`你没有`spd`在你提供的代码中声明任何地方，所以我们不知道它是什么。

真的不可能说出你的代码在当前状态下有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:26:20.837

如所写，您已作曲；`Speedometer`是的*一部分，* `Bike`因为它是一个领域。要使其成为聚合，请`Bike`保留**指向**`Speedometer`. 请注意，因此，您可能需要`Bike`创建或获取一个初始`Speedometer`值（可能是`NULL`开始，或在构造函数中传递一个），并且您可能希望添加访问器方法以`Bike`添加/删除/更改`Speedometer`.

[编辑]`Bike`可能还需要知道如何`Speedometer`正确处理以避免泄漏。

[编辑 2] 同样正如@cjm571 指出的那样，您的`main`函数是直接在 "disembodied" 上创建和操作的`Speedometer`。不应该在a上`Bike`吗？:)

# java - 发送带有多个 (LOTS) 参数的后查询

> ID：16175288
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:12:56.600
> 
> 标签：java, post, resteasy, query-parameters

我们有几个表，其中包含 50 多个字段，必须使用 RESTful 服务 (RESTeasy) 作为参数传递，但是我们希望避免 50 行`@QueryParam("field") Object field`. 有没有办法发送列表、地图或对象？

这是我们目前使用的代码：

```
@POST
    @Path("/custships")
    @Produces("application/json")
    void postCustship(@QueryParam("custShipMap") HashMap<String, Object> custShipMap); 
```

这是我们得到的异常：

```
java.lang.RuntimeException: Unable to find a constructor that takes a String param or a valueOf() or fromString() method for javax.ws.rs.QueryParam("custShipMap") on public abstract void com.waudware.pics.service.ICustshipService.postCustship(java.util.HashMap) for basetype: java.util.HashMap
    at org.jboss.resteasy.core.StringParameterInjector.initialize(StringParameterInjector.java:207)
    at org.jboss.resteasy.core.StringParameterInjector.<init>(StringParameterInjector.java:57)
    at org.jboss.resteasy.core.QueryParamInjector.<init>(QueryParamInjector.java:27)
    at org.jboss.resteasy.core.InjectorFactoryImpl.createParameterExtractor(InjectorFactoryImpl.java:87)
    at org.jboss.resteasy.core.InjectorFactoryImpl.createParameterExtractor(InjectorFactoryImpl.java:65)
    at org.jboss.resteasy.core.MethodInjectorImpl.<init>(MethodInjectorImpl.java:93)
    at org.jboss.resteasy.core.InjectorFactoryImpl.createMethodInjector(InjectorFactoryImpl.java:59)
    at org.jboss.resteasy.core.ResourceMethod.<init>(ResourceMethod.java:76)
    at org.jboss.resteasy.core.ResourceMethodRegistry.processMethod(ResourceMethodRegistry.java:276)
    at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:124)
    at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:106)
    at org.jboss.resteasy.plugins.spring.SpringBeanProcessor.onApplicationEvent(SpringBeanProcessor.java:457)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:96)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:334)
    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:948)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.jboss.resteasy.plugins.spring.SpringContextLoaderListener.contextInitialized(SpringContextLoaderListener.java:44)
    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:778)
    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:425)
    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:770)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:275)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1312)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:722)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:490)
    at org.eclipse.jetty.maven.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:275)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:175)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
    at org.eclipse.jetty.server.Server.start(Server.java:346)
    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
    at org.eclipse.jetty.server.Server.doStart(Server.java:294)
    at org.eclipse.jetty.maven.plugin.JettyServer.doStart(JettyServer.java:78)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
    at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:537)
    at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:352)
    at org.eclipse.jetty.maven.plugin.JettyRunWarMojo.execute(JettyRunWarMojo.java:69)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:17:43.480

传递数据的正确方法是通过`PUT`并使用 JSON 或 XML 之类的东西将数据表示为`PUT`. 然后使用`@Consumes("application/json")`，如果你映射一个，它会将内容解组为一个对象，或者一个`Map of Maps`.

`POST`如果您正在做一些有副作用的事情，您可以以同样的方式与身体一起使用。

无论哪种方式传入查询参数都不是 RESTful，它充其量是 RPC over HTTP，并且非常不鼓励。

# visual-studio - 如何使用 Visual Studio 和 Web Essentials 2012 将 Bootstrap-3.0.0-wip less 文件夹编译为 .css？

> ID：16175295
> 
> 赞同：11
> 
> 时间：2013-04-23T17:13:21.027
> 
> 标签：visual-studio, twitter-bootstrap, visual-studio-2012, less

如何编译包含在 Visual Studio 2012 MVC Web 项目中的 .less 文件文件夹（例如 Bootstrap-3.0.0-wip）？

我可以使用外部工具将 .less 编译为 .css，但不清楚如何将 .less 文件编译为 .css，作为使用最新 Visual Studio 构建的一部分。（尽管当前 VS 插件提供了 .less 兼容性*）我可以在预览窗口中看到 .less 文件的编译输出，但我无法弄清楚如何在运行项目时保存输出或自动编译它。

*VS 2012.2 更新、Microsoft Web Developer Tools 和 Web Essentials 2012

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-30T17:43:38.673

要使用 Visual Studio 2012 + Web Essentials 2012 编译 Bootstrap .less 文件的文件夹，您必须稍作调整，因为 Web Essentials 无法编译 github 上格式化的 bootstrap less 文件夹。

将[bootstrap-3.0.0-wip 文件夹](https://github.com/twitter/bootstrap/archive/3.0.0-wip.zip "来自 Github 的 Bootstrap 3 wip zip 文件夹")添加到 Visual Studio Web 项目。（我的项目恰好是一个 ASP.Net MVC 4 Empty 项目，但应该没关系。）

将 bootstrap.less 文件（所有项目 less 文件的入口点）上移一个文件夹，将所有其他文件留在 \less 文件夹中。

它应该如下所示：

```
bootstrap.less
less\[all other less files].less 
```

接下来，编辑 bootstrap.less 文件，将“less\”文件夹前缀添加到所有 @import 语句，如下所示：

```
// Core variables and mixins
@import "less\variables.less";
@import "less\mixins.less";

// ...etc until all of the import statements include less\ at the start 
```

现在，保存项目。除非仍然有编译错误，否则移动的 bootstrap.less 文件应该已经编译成 bootstrap.css 和 bootstrap.min.css 文件。（详见错误列表）

剩余的 .less 文件将无法编译，因为它们仍然存在错误（单个文件上没有 @import 语句），但是这并不重要，因为您已经编译了重要的文件。

* * *

如果将 Bootstrap3.0.0-wip 源代码集成到 ASP.MVC 4 项目中，则可以利用 MVC 4 的捆绑来编译 JS 文件。

假设您将 Bootstrap 源代码放入项目 /Content/bootstrap 的文件夹中，请将以下内容添加到您的 App_Start\BundleConfig.cs 文件中：

```
// Bootstrap 3 script bundle
bundles.Add(new ScriptBundle("~/bundle/scripts/bootstrap_js").Include(
            "~/Content/bootstrap/js/bootstrap-transition.js",
            "~/Content/bootstrap/js/bootstrap-alert.js",
            "~/Content/bootstrap/js/bootstrap-button.js",
            "~/Content/bootstrap/js/bootstrap-carousel.js",
            "~/Content/bootstrap/js/bootstrap-collapse.js",
            "~/Content/bootstrap/js/bootstrap-dropdown.js",
            "~/Content/bootstrap/js/bootstrap-modal.js",
            "~/Content/bootstrap/js/bootstrap-tooltip.js",
            "~/Content/bootstrap/js/bootstrap-popover.js",
            "~/Content/bootstrap/js/bootstrap-scrollspy.js",
            "~/Content/bootstrap/js/bootstrap-tab.js",
            "~/Content/bootstrap/js/bootstrap-typeahead.js",
            "~/Content/bootstrap/js/bootstrap-affix.js")); 
```

（注：这些js文件的顺序取自项目自带的Makefile）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-30T04:33:24.020

**如何使用 Web Essentials 2012 将 .less 编译为 .css**

要使用 VS 2012 + Web Essentials 2012 编译 .less 文件，您的 .less 文件必须没有错误。每个需要导入或混合的 .less 文件都必须指定它。突出显示您的 .less 文件并在预览窗格中预览输出。如果指定了错误，您的 .css 编译将不起作用。

它还有助于设置 Web Essentials 选项以在构建时编译 .less 文件。

```
Tools > Options > Web Essentials > LESS > Compile On Build = TRUE 
```

您还可以通过设置以下设置将其编译为“css”文件夹。

```
Tools > Options > Web Essentials > LESS > Compile to 'css' folder = TRUE 
```

此设置在 LESS 目录中创建一个 CSS 文件夹，它为在构建过程中编译的每个 .less 文件放置一个 [filename].css 和 [filename].min.css 文件。

* * *

**至于为什么 Bootstrap-3.0.0-wip .less 文件夹不能与 Web Essentials 2012 (+ VS 2012) 一起编译**

a) 如果构建 .less 文件时出现任何错误，它将不会编译为 .css 文件。

b) Web Essentials 2012 (+VS 2012) 似乎还不能识别文件夹中的多个 .less 文件，这些文件全部由单个入口点文件导入，例如 Bootstrap 3.0-wip 中的 bootstrap.less 文件（除非每个文件列出其所需的进口）。这可能是因为还没有办法指定入口点文件。因此，大多数 Bootstrap .less 文件都无法编译，因为它们没有定义变量和 mixin。（因为 mixins.less 和 variables.less 文件已被导入到各个文件中）并且由于它们无法编译，因此 .less -> .css 编译过程会静默失败。

c) 编译相互依赖的 .less 文件文件夹的方法（从 Web Essentials 2.7 开始，是按照 bootstrap.less 中列出的顺序将所有文件组合成一个大的 .less 文件。

d) 由于步骤 c 是一个耗时的痛苦，我建议现在使用外部编译器编译 bootstrap 的 less 文件。至少在 Web Essentials 允许您设置入口点并按所需顺序编译依赖 .less 文件的文件夹之前。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-20T19:16:10.097

根据 Web Essentials 的[更改日志](http://vswebessentials.com/changelog)，我认为这已在 2013 年 7 月 31 日修复（“已修复 LESS 相对 @import 问题”）。我刚刚在 MVC 4 项目中使用 Visual Studio 2012（更新 3）和最新的 Web Essentials 2012 和 Bootstrap 3.0 进行了尝试，它似乎工作正常（具体来说，它是从 bootstrap.less 生成 bootstrap.css）。

对于任何想要这样做的人，我在安装 Web Essentials 后所做的只是将 .less 文件添加到我的 Css 文件夹，将 boostrap.js 文件添加到我的 Scripts 文件夹，将字体文件添加到我的 Fonts 文件夹（Bootstrap 现在使用字体而不是精灵图像），并在我的主视图中包含已编译的 bootstrap.css 和 bootstrap.js 文件。请注意，我还右键单击了其中一个 .less 文件以生成解决方案设置（Web Essentials 使用的一些配置文件）。为了获得第一次生成的 .css 文件，我只是做了一个表面的更改并保存了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-15T19:06:51.740

现在这变得容易多了，并且只需要很少的动作。首先，我使用的是 VS 2013，但 VS 2012 的步骤应该相同：

1.  确保正确安装了 Web Essentials。
2.  在**TOOLS / Options / Web Essentials / LESS**下，确保**Auto-compiledependent files on save**为**True**，**Compile files on save**为**True**。
3.  如果您的 Web 应用程序项目当前正在使用预编译的 NuGet 包**Bootstrap**，或者如果您手动将**Bootstrap**添加到您的项目中，请将其删除。
4.  使用 NuGet，将**Bootstrap Less Source**包添加到您的 Web 应用程序项目中。
5.  将新的**bootstrap.less**文件添加到应用程序的**~/Content**文件夹 (MVC)。
6.  删除此文件的全部内容，然后单击**~/Contents/bootstrap/bootstrap.less**文件并将其拖到此文件中。这将创建一个**@import "bootstrap/bootstrap"；**在您的新文件中输入。
7.  要将这个文件编译成 CSS 文件，您需要做的就是保存文件（即按 CTRL-S 或保存文件按钮）。
8.  如果您对文件进行任何更改，您需要做的就是重新保存此文件。

这样做可以让您在新版本可用时轻松更新 NuGet 包。**您可以在@import**行之后添加任何较少的变量更改。

请享用！

# apache - 在重写规则中指定主机会导致 URL 更改

> ID：16175297
> 
> 赞同：0
> 
> 时间：2013-04-23T17:13:25.483
> 
> 标签：apache, .htaccess, mod-rewrite

我有重写规则

```
RewriteRule (/m)?/cia16(.*) $1/cia$2?CIA=16 [QSA] 
```

这工作正常，但问题是它作为多个主机的环境运行，但它只尝试重定向到主主机。例如，这是在 的配置中`dev.example.com`，但即使您在（具有相同的配置）上，重写也会重定向到*dev 。*`explosion-pills.dev.example.com`

我可以解决这个问题：

```
RewriteRule (/m)?/cia16(.*) http://${HTTP_HOST}$1/cia$2?CIA=16 [QSA] 
```

...但是，这会导致地址栏中的 URL 发生更改，这是不可取的。使用`[L]`标志也无济于事。

我应该如何指定重写规则以使用当前主机而不更改请求 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:28:27.173

一种解决方法是`mod_proxy`在您的 Apache 配置中启用。完成后，在 Rewrite 中使用`P`(proxy) 标志，如下所示：

```
RewriteRule (/m/)?cia16(.*) http://%{HTTP_HOST}$1/cia$2?CIA=16 [QSA,L,P] 
```

# php - 消息系统 - 如何发送群组电子邮件但只在发件箱中列出一封电子邮件

> ID：16175298
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:13:29.257
> 
> 标签：php, mysql

我使用 PHP 和 MySQL 创建了一个个人消息传递系统。系统的一部分允许向适合特定组的人发送组电子邮件。

发送电子邮件的代码是：

```
session_start();
include_once('../../dbconnect.php');

$email=$_SESSION['email'];
$to = $_POST ['touser'];
$toemail = $_POST['touseremail'];
$from = $_SESSION['name'];
$message = $_POST['message'];
$subject = $_POST['subject'];
$time = time();

if ($to == 'Level 4'){
 $usersquery = "SELECT email FROM users WHERE account = 'Level4'";
 $getusers = $conn -> query($usersquery);
 while ($row = $getusers->fetch_assoc()){

  foreach ($row as $value){

 $query ="INSERT INTO messages (to_user, to_email, subject, message, from_user, from_email, daterecord) VALUES ('" . $to . "', '" . $value . "', '" . mysqli_real_escape_string($conn, $subject) . "', '" . mysqli_real_escape_string($conn, $message) . "', '$from', '$email', '$time')";
   $send = $conn -> query($query);

  }

 }

} 
```

这很好用，但问题是当我打开发件箱时，会显示每条单独的消息 - 当一大群人收到消息时，这会堵塞发件箱并且非常烦人！发件箱的代码是：

```
$emailquery = "SELECT * FROM messages WHERE from_email = '$email' AND sent_deleted = 'no' ORDER BY daterecord DESC";
$sentemails = $conn->query($emailquery);
$emailcount = $sentemails ->num_rows;

if ($emailcount == 0){
 echo '<div>No messages sent</div>';
}

else{
?>
<table class="udtable">
    <tr>
        <th class="reqhead">To</th>
        <th class="reqhead">Subject</th>
        <th class="reqhead"></th>
    </tr>
<?
$i=1;
while ($sent = $sentemails->fetch_assoc()){
if ($i%2 != 0){
        $rowclass = 'reqodd';
        }
        else {
        $rowclass = 'reqeven';
        }

 echo ' <tr class = "' . $rowclass . '">
         <td class="reqfrom">' . $sent['to_user'] . '</td>
         <td class="reqsubj">' . $sent['subject'] . '</td>
         <td class="req"><a id="link' . $sent['id'] . '" href="#" class="sentopen">Open</a></td>
         <td class="reqmessage"><pre class=sentboxmessage>' . $sent['message'] . '</pre></td>
         <td class="reqid">' . $sent['id'] . '</td>
        </tr>';
        $i++;
}

?>
</table>
<?
}

?> 
```

发件箱如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/RhBhP.png)

我想将所有这些消息合并到一行中。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:47:19.940

您需要在您的发件箱代码片段中的 mysql select 语句中使用分组

```
SELECT * FROM messages WHERE from_email = '$email' AND sent_deleted = 'no' GROUP BY subject, daterecord ORDER BY daterecord DESC 
```

这将起作用，并将按主题和日期记录对您的消息进行分组。因此，任何同时发送的具有相同主题的消息都将被组合在一起。如果多个人可以同时发送具有相同主题的消息，您可能需要添加更多分组选项。

# ajax - Ajax 调用未填充文本字段

> ID：16175310
> 
> 赞同：0
> 
> 时间：2013-04-23T17:14:28.617
> 
> 标签：ajax, jquery, spring-mvc

两个 Ajax 调用。他们都执行调用，但第一个在文本输入字段中返回一个下拉值，第二个在文本输入字段中`extraParam`无法显示具有匹配值的下拉列表。我已经检查过了，正确的值是从 Spring 控制器返回的。为什么这不起作用？除了传递一个额外的参数之外，这两个调用之间有什么区别？

```
 $(document).ready(function() {
        $( ".oid" ).autocomplete({
            source: "${pageContext. request. contextPath}/app/X.htm"
        });

    });

   $(document).ready(function() {
        $( "#fifa" ).autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '${pageContext. request. contextPath}/app/Y.htm',
                    data: {
                        term: request.term,
                        extraParam: OneMoreParamValue
                    },
                    success: function (data) {
                        console.log('response=', data);
                    }
                });
            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:34:14.977

你没有调用响应函数，[http:](http://api.jqueryui.com/autocomplete/#option-source)
//api.jqueryui.com/autocomplete/#option-source 之类的

```
success: function (data) {
    console.log('response=', data);
    response(data);
} 
```

您可能还必须将数据类型设置为“json”。

# php - array_push 基于变量的多个值？

> ID：16175312
> 
> 赞同：0
> 
> 时间：2013-04-23T17:14:30.467
> 
> 标签：php, arrays, array-push

我正在尝试创建一个数组，其中的值根据一些变量重复。在这种情况下：`$slipszero = "2"`& `$slipsone = "1"`，并且这些值可以更改。
这是我现在的代码：

```
$problist = array();
    foreach ($rows as $value) {
        if ($value['f_count'] == 0) {
            $placeholder = rtrim(str_repeat($value["uid"] . ',', $slipszero), ', ') ;
            array_push($problist, $placeholder);
            // The above array_push should act just like:
            array_push($problist, $value['uid'], $value['uid']);
        } elseif ($value['f_count'] == 1) {
            $placeholder = rtrim(str_repeat($value["uid"] . ',', $slipsone), ', ') ;
            array_push($problist, $placeholder);
        } elseif ($value['f_count'] >= 2) {
            $problist[] = $value['uid'];
        }
    } 
```

所以，从这个数组开始：

```
Array ( 
 [0] => Array ( [uid] => 105 [f_count] => 0 ) 
 [1] => Array ( [uid] => 106 [f_count] => 1 ) 
 [2] => Array ( [uid] => 107 [f_count] => 0 ) 
 [3] => Array ( [uid] => 108 [f_count] => 1 ) 
 [4] => Array ( [uid] => 109 [f_count] => 2 ) 
) 
```

我想结束这个数组：

```
array(15) { 
[0] => string(3) "105" 
[1] => string(3) "105" 
[2] => string(3) "106" 
[3] => string(3) "107" 
[4] => string(3) "107" 
[5] => string(3) "108" 
[6] => string(3) "109"
} 
```

相反，我得到了这个：

```
Array ( 
[0] => 105,105 
[1] => 106 
[2] => 107,107 
[3] => 108
[4] => 109
) 
```

照顾新生儿让我大吃一惊，因为我不知道自己做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:21:21.207

```
$newArray = array();
foreach ($array as $subarray) {
    $i = 1; // default value
    if ($subarray["f_count"] === 0)
        $i = $slipszero;
    if ($subarray["f_count"] === 1)
        $i = $slipsone;
    while ($i--)
        $newArray[] = (string)$subarray["uid"];
} 
```

这是将`$i`字符串添加到`$i`依赖于的数组中`$subarray["f_count"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:24:07.277

用这个

```
$problist = array();
    foreach ($rows as $value) {
        if ($value['f_count'] == 0) {
            for($i=0;$i<$slipszero;$i++)
                array_push($problist, $value["uid"];);

        } elseif ($value['f_count'] == 1) {
            for($i=0;$i<$slipsone;$i++)
               array_push($problist, $value["uid"];);
        } elseif ($value['f_count'] >= 2) {
            $problist[] = $value['uid'];
        }
    } 
```

# model-view-controller - Zend Framework 2 如何在多个 MVC 模块中禁用事件监听器

> ID：16175315
> 
> 赞同：2
> 
> 时间：2013-04-23T17:14:37.910
> 
> 标签：model-view-controller, module, zend-framework2

我正在尝试构建两个 MVC 模块，一个 (FBWsrv) 具有 JSON 输出和不同的安全过程，以及用于正常 Web 使用的主 MVC 模块 (FBWeb)。我已经完成了所有路线的设置，并且大部分时间都在工作。我遇到的问题是他们都有 onBootstrap 方法来附加他们自己的事件侦听器，如果不在正确的 MVC 模块中，我想禁用侦听器。

我的路线如下所示：

模块 FBWeb，url 中的“app”模块：

```
/app/controller/action/par1/val1 
```

模块 FBWsrv，即 url 中的“wsrv”：

```
/wsrv/controller/action/par1/val1 
```

正如我所提到的，这条路线运行良好。我得到了正确的控制器和动作。但问题是 MVC 事件侦听器正在两个模块上运行，而我什至没有从 /wsrv 路由运行 /app。如果我在 /wsrv 中，我想要做的是禁用 /app 中的事件。

模块的简短版本设置如下：

FBWeb/模块.php：

```
class Module 
{

    public function onBootstrap(MvcEvent $e)
    {

        $this->sm = $application->getServiceManager();
        $this->config = $e->getApplication()->getConfig();

        $eventManager        = $e->getApplication()->getEventManager();
        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach($eventManager);

        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'addInstanceObjects'), 5000 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'securityDispatch'), 0 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'preDispatch'), 100 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'postDispatch'), -100 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH_ERROR, array($this, 'onDispatchError'), -5000);

    } 
```

FBWsrv/Module.php：

```
class Module 
{
    public function onBootstrap(MvcEvent $e)
    {

        $this->sm = $application->getServiceManager();
        $this->config = $e->getApplication()->getConfig();
        $eventManager        = $e->getApplication()->getEventManager();
        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach($eventManager);

        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'addWsrvInstanceObjects'), 5900 );
        //$eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'securityWsrvDispatch'), 5800 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'preWsrvDispatch'), 5500 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'postWsrvDispatch'), 5400 );
        $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH_ERROR, array($this, 'onWsrvDispatchError'), 5100);

    } 
```

我在测试时在 FBWsrv 中禁用了 securityWsrvDispatch，但我希望它稍后运行自己的进程。现在，如果我在 FBWsrv 中运行，我只需要分离 FBWeb 事件，因为它们没有相关性。我知道它们都在运行，因为错误出现在相反的模块中。不知道该怎么做。

谢谢你的帮助！

格雷格

**编辑/注释：我还尝试在附加侦听器之前为NAMESPACE**添加一个简单的检查，但似乎总是调用两个命名空间，这会为两个模块创建侦听器，即使只需要一个。你如何隔离它们？我试过这个，它不起作用：

```
if(__NAMESPACE__ == 'FBWeb'){
            $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'addInstanceObjects'), 5000 );
         ... 
```

A`var_dump(__NAMESPACE__);`总是显示打印的两个命名空间。

**编辑 - 一个解决方法**

首先，感谢 Andrew，您激发了我将要参与该项目的一些想法。但是，在我学习的过程中，我通过检查路线解决了我的主要问题，如果不匹配则简单地从函数中返回，跳过模块中的任何其他设置。

我还合并了我的调度事件，这减少了我的困惑。真的不需要额外的混乱。我知道这不是*正确的方法*，但它确实解决了我的问题。

（当然，你必须有名为“fbweb”和“fbwsrv”的路由设置来匹配你的模块）

在 FBWeb/Module.php 中：

```
// in FBWeb/Module.php
// (default web MVC module)

public function onBootstrap(MvcEvent $e)
{
    // ... get eventmanager ...

    $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'preDispatch'), 1000 );
    $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH_ERROR, array($this, 'onDispatchError'), -5000);

}

public function preDispatch(MvcEvent $e)
{
    $this->route = $e->getRouteMatch();
    $this->matchedRouteName = explode('/', $this->route->getMatchedRouteName());
    $this->route_root = $this->matchedRouteName[0];

    // then just test if not in correct route
    if($this->route_root != 'fbweb'){
        // if NOT, bail here, 
        // and skip any other setup in this module dispatch
        return;
    }

    // continue other normal stuff (ACL's, session stuff, etc)
    // ...

} 
```

在我的另一个模块中：FBWsrv/Module.php：

```
// in FBWsrv/Module.php

public function onBootstrap(MvcEvent $e)
{
    // ... get eventmanager ...

    $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'preDispatch'), 5500 );
    $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH_ERROR, array($this, 'onDispatchError'), -4900);

}

public function preDispatch(MvcEvent $e)
{
    $this->route = $e->getRouteMatch();
    $this->matchedRouteName = explode('/', $this->route->getMatchedRouteName());
    $this->route_root = $this->matchedRouteName[0];
    // then just test if not in correct route
    if($this->route_root != 'fbwsrv'){
        // if NOT, bail here, 
        // and skip any other setup in this module dispatch
        return;
    }

    // continue other normal stuff (ACL's, session stuff, etc)
    // ...

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T22:08:06.553

为什么不通过共享事件管理器使用上下文附加事件，有很多文档可以帮助共享事件管理器。

```
/**
 * On bootstrap event
 * 
 * @param \Zend\Mvc\MvcEvent $e
 */
public function onBootstrap(MvcEvent $e)
{
    // .. other stuff

    /**
     * Example attaching events with shared manager, using context
     */
    $e->getApplication()->getEventManager()->getSharedManager()
        ->attach('MyModule\Controller\AbstractActionController', 'dispatch', function($e) {

        // do something to only be triggerd when dispatch is triggered
        // on a controller extending your nice base controller in this module..

    }, 100);
} 
```

# css - 如何检查css对IE8是否有效

> ID：16175316
> 
> 赞同：0
> 
> 时间：2013-04-23T17:14:41.150
> 
> 标签：css, internet-explorer-8

我有一个网站在 8 以上的浏览器 chrome、firefox 和 IE 中看起来不错。在 IE8 下它看起来不太好。是否有工具可以检查我的 css 文件是否对 IE8 有效？我更喜欢一个能指示我的 CSS 文件中哪些行对 IE8 无效以及如何修复它们的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T08:35:27.073

使用 IE 测试器应用程序。您可以渲染到不同的 IE 版本。如果它不支持为版本创建单独的 Css 并以该版本为目标。 [http://ietester.en.softonic.com/](http://ietester.en.softonic.com/)

# internet-explorer - jqGrid的标题部分隐藏了一个下拉列表

> ID：16175326
> 
> 赞同：1
> 
> 时间：2013-04-23T17:15:24.153
> 
> 标签：internet-explorer, drop-down-menu, jqgrid

编辑：由于我没有得到任何回复，我将在这个问题上添加更多细节。

我使用以下提供的下拉菜单：[http](http://codecanyon.net/item/drop-menu/81289) ://codecanyon.net/item/drop-menu/81289 （付费）。

以下代码是构建菜单的 HTML 和 java 脚本：

```
<div id="divMenu" style="position: relative">
    <ul id="nav-one" class="dropmenu">
        <li>
            <a id="a1" href="#divManageXXXX">Manage XXXXXYYYYY</a>
            <ul>
                <li><a id="aManageX" href="#divManageX">Manage X</a></li>
                <li><a id="aManageY" href="#divManageY">Manage Y</a></li>
            </ul>
        </li>
        <li>
            <a id="aManageZZZZZ" href="#divManageZZZZ">Manage ZZZZZZZZZZZZ</a>
            <ul>
                <li><a id="aManageZ1" href="#ManageZ1">Manage Z1</a></li>
                <li><a id="aManageZ2" href="#ManageZ2">Manage Z2</a></li>
                <li><a id="aManageZ3" href="#ManageZ3">Manage Z3</a></li>                        
                <li><a id="aManageZ4" href="#ManageZ4">Manage Z4</a></li>
            </ul>
        </li>
        <li>
            <a id="aManageS" href="#">Manage S</a>
            <ul>
                <li><a id="aManageS1" href="#ManageS1">Manage S1</a></li>
                <li><a id="aManageS2" href="#ManageS2">Manage S2</a></li>
                <li><a id="aManageS3" href="#Manage S3">Manage S3</a></li>
            </ul>
        </li>
        <li>
            <a id="" href="#">Manage B</a>
            <ul>
                <li><a id="aManageB1" href="#ManageB1">Manage B1</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

初始化它的代码是：

```
jQuery('#nav-one').dropmenu({ openClick: true }); 
```

除此之外，我还定义了 jqGrid 如下：

HTML 代码：

```
<div id="divMain">
   <div id="divManageX">
      <table>
          <tr></tr>
          <tr></tr>
          <tr>
              <table id="tblManageX"></table>
              <div id="divManageY"></div>
          </tr>
      </table>          
   </div>
   <div id="ManageY">
   .....
   </div>
</div> 
```

初始化 jqGrid 的代码非常简单，在本网站和其他网站上都有。

问题：点击展开下拉菜单时，如果后台有 jqGrid，则下拉菜单项隐藏在 jqGrid 后面，如下图所示：

![下拉菜单隐藏](https://i.stack.imgur.com/cm8KI.jpg)

# python - os.walk 创建内核恐慌

> ID：16175329
> 
> 赞同：0
> 
> 时间：2013-04-23T17:15:50.337
> 
> 标签：python, macos, python-2.7, osx-mountain-lion

根据我要走的目录有大约400k文件

```
$ find . -type f | wc -l 
```

每次我运行使用的脚本时`os.walk`，它都会让我的笔记本电脑陷入内核恐慌。这是非常一致的。

OSX 山狮，Python 2.7.4。

有任何想法吗？

**编辑**：示例代码

```
import os

def collect_files_for_path(path):
    all_files = []

    for root, dirs, files in os.walk(path):

        for f in files:
            full = os.path.join(root, f)
            all_files.append(full)

    return all_files

files = collect_files_for_path('some/path') 
```

**编辑 2**：恐慌日志

```
Tue Apr 23 11:17:22 2013
panic(cpu 0 caller 0xffffff800d4ee9a5): "hfs_lock: locking against myself!"@/SourceCache/xnu/xnu-2050.22.13/bsd/hfs/hfs_cnode.c:1751
Backtrace (CPU 0), Frame : Return Address
0xffffff813aca3390 : 0xffffff800d21d626
0xffffff813aca3400 : 0xffffff800d4ee9a5
0xffffff813aca3430 : 0xffffff800d518563
0xffffff813aca34b0 : 0xffffff800d3127ff
0xffffff813aca3500 : 0xffffff800d309001
0xffffff813aca3540 : 0xffffff800d32584c
0xffffff813aca35f0 : 0xffffff800d325ee5
0xffffff813aca3780 : 0xffffff800d511279
0xffffff813aca37b0 : 0xffffff800d4fc953
0xffffff813aca3830 : 0xffffff800d312a21
0xffffff813aca38c0 : 0xffffff800d2daa5e
0xffffff813aca39b0 : 0xffffff800d312a7e
0xffffff813aca39e0 : 0xffffff800d2dc68c
0xffffff813aca3a10 : 0xffffff800d2dc7e7
0xffffff813aca3a30 : 0xffffff800d5177d0
0xffffff813aca3a80 : 0xffffff800d312410
0xffffff813aca3ab0 : 0xffffff800d2eac05
0xffffff813aca3b50 : 0xffffff800d2ea1a4
0xffffff813aca3c10 : 0xffffff800d304a32
0xffffff813aca3d90 : 0xffffff800d2fd40c
0xffffff813aca3f50 : 0xffffff800d5e063a
0xffffff813aca3fb0 : 0xffffff800d2cdd23

BSD process name corresponding to current thread: Python

Mac OS version:
12D78

Kernel version:
Darwin Kernel Version 12.3.0: Sun Jan  6 22:37:10 PST 2013; root:xnu-2050.22.13~1/RELEASE_X86_64
Kernel UUID: 3EB7D8A7-C2D3-32EC-80F4-AB37D61492C6
Kernel slide:     0x000000000d000000
Kernel text base: 0xffffff800d200000
System model name: MacBookPro8,1 (Mac-94245B3640C91C81)

System uptime in nanoseconds: 299018314244
last loaded kext at 77719537176: org.virtualbox.kext.VBoxNetAdp 4.2.1 (addr 0xffffff7f8ef2b000, size 28672)
last unloaded kext at 182522584862: com.apple.driver.AppleUSBUHCI   5.2.5 (addr 0xffffff7f8dbf3000, size 65536)
loaded kexts:
org.virtualbox.kext.VBoxNetAdp  4.2.1
org.virtualbox.kext.VBoxNetFlt  4.2.1
org.virtualbox.kext.VBoxUSB 4.2.1
org.virtualbox.kext.VBoxDrv 4.2.1
org.pqrs.driver.PCKeyboardHack  8.0.0
org.pqrs.driver.KeyRemap4MacBook    8.0.0
com.radiosilenceapp.nke.PrivateEye  1
com.Logitech.Unifying.HID Driver    1.2.0
com.Logitech.Control Center.HID Driver  3.5.1
com.apple.filesystems.msdosfs   1.8
com.apple.driver.AppleHWSensor  1.9.5d0
com.apple.iokit.IOBluetoothSerialManager    4.1.3f3
com.apple.driver.AudioAUUC  1.60
com.apple.filesystems.autofs    3.0
com.apple.driver.AGPM   100.12.87
com.apple.driver.AppleMikeyHIDDriver    122
com.apple.driver.AppleHDA   2.3.7fc4
com.apple.iokit.IOUserEthernet  1.0.0d1
com.apple.driver.AppleMikeyDriver   2.3.7fc4
com.apple.driver.AppleLPC   1.6.0
com.apple.driver.AppleUpstreamUserClient    3.5.10
com.apple.Dont_Steal_Mac_OS_X   7.0.0
com.apple.driver.ApplePolicyControl 3.3.0
com.apple.driver.ACPI_SMC_PlatformPlugin    1.0.0
com.apple.driver.AppleIntelHD3000Graphics   8.1.0
com.apple.iokit.BroadcomBluetoothHCIControllerUSBTransport  4.1.3f3
com.apple.driver.AppleSMCLMU    2.0.3d0
com.apple.driver.AppleSMCPDRC   1.0.0
com.apple.driver.AppleIntelSNBGraphicsFB    8.1.0
com.apple.driver.AppleBacklight 170.2.5
com.apple.driver.AppleMCCSControl   1.1.11
com.apple.driver.SMCMotionSensor    3.0.3d1
com.apple.driver.AppleUSBTCButtons  237.1
com.apple.driver.AppleUSBTCKeyboard 237.1
com.apple.driver.AppleIRController  320.15
com.apple.AppleFSCompression.AppleFSCompressionTypeDataless 1.0.0d1
com.apple.AppleFSCompression.AppleFSCompressionTypeZlib 1.0.0d1
com.apple.BootCache 34
com.apple.iokit.SCSITaskUserClient  3.5.5
com.apple.driver.XsanFilter 404
com.apple.iokit.IOAHCIBlockStorage  2.3.1
com.apple.driver.AppleUSBHub    5.5.5
com.apple.driver.AirPort.Brcm4331   614.20.16
com.apple.iokit.AppleBCM5701Ethernet    3.6.0b1
com.apple.driver.AppleFWOHCI    4.9.6
com.apple.driver.AppleSDXC  1.4.0
com.apple.driver.AppleUSBEHCI   5.5.0
com.apple.driver.AppleAHCIPort  2.5.1
com.apple.driver.AppleSmartBatteryManager   161.0.0
com.apple.driver.AppleEFINVRAM  1.7
com.apple.driver.AppleIntelCPUPowerManagementClient 196.0.0
com.apple.driver.AppleACPIButtons   1.7
com.apple.driver.AppleRTC   1.5
com.apple.driver.AppleHPET  1.8
com.apple.driver.AppleSMBIOS    1.9
com.apple.driver.AppleACPIEC    1.7
com.apple.driver.AppleAPIC  1.6
com.apple.nke.applicationfirewall   4.0.39
com.apple.security.quarantine   2
com.apple.driver.AppleIntelCPUPowerManagement   196.0.0
com.apple.iokit.IOSerialFamily  10.0.6
com.apple.kext.triggers 1.0
com.apple.driver.DspFuncLib 2.3.7fc4
com.apple.iokit.IOAudioFamily   1.8.9fc11
com.apple.kext.OSvKernDSPLib    1.6
com.apple.iokit.IOSurface   86.0.4
com.apple.iokit.IOBluetoothFamily   4.1.3f3
com.apple.driver.AppleHDAController 2.3.7fc4
com.apple.iokit.IOHDAFamily 2.3.7fc4
com.apple.iokit.IOFireWireIP    2.2.5
com.apple.driver.IOPlatformPluginLegacy 1.0.0
com.apple.driver.AppleSMBusPCI  1.0.11d0
com.apple.iokit.AppleBluetoothHCIControllerUSBTransport 4.1.3f3
com.apple.driver.IOPlatformPluginFamily 5.3.0d51
com.apple.driver.AppleGraphicsControl   3.3.0
com.apple.driver.AppleBacklightExpert   1.0.4
com.apple.iokit.IONDRVSupport   2.3.7
com.apple.driver.AppleSMBusController   1.0.11d0
com.apple.iokit.IOGraphicsFamily    2.3.7
com.apple.driver.AppleSMC   3.1.4d2
com.apple.iokit.IOSCSIBlockCommandsDevice   3.5.5
com.apple.iokit.IOUSBMassStorageClass   3.5.1
com.apple.driver.AppleUSBMultitouch 237.3
com.apple.driver.AppleThunderboltDPInAdapter    1.8.9
com.apple.driver.AppleThunderboltDPAdapterFamily    1.8.9
com.apple.driver.AppleThunderboltPCIDownAdapter 1.2.6
com.apple.iokit.IOUSBHIDDriver  5.2.5
com.apple.driver.CoreStorage    296.16
com.apple.driver.AppleUSBMergeNub   5.5.5
com.apple.driver.AppleUSBComposite  5.2.5
com.apple.iokit.IOSCSIMultimediaCommandsDevice  3.5.5
com.apple.iokit.IOBDStorageFamily   1.7
com.apple.iokit.IODVDStorageFamily  1.7.1
com.apple.iokit.IOCDStorageFamily   1.7.1
com.apple.iokit.IOAHCISerialATAPI   2.5.1
com.apple.iokit.IOSCSIArchitectureModelFamily   3.5.5
com.apple.driver.AppleThunderboltNHI    1.6.3
com.apple.iokit.IOThunderboltFamily 2.2.6
com.apple.iokit.IOUSBUserClient 5.5.5
com.apple.iokit.IO80211Family   522.4
com.apple.iokit.IOEthernetAVBController 1.0.2b1
com.apple.iokit.IONetworkingFamily  3.0
com.apple.iokit.IOFireWireFamily    4.5.5
com.apple.iokit.IOAHCIFamily    2.3.1
com.apple.iokit.IOUSBFamily 5.5.5
com.apple.driver.AppleEFIRuntime    1.7
com.apple.iokit.IOHIDFamily 1.8.1
com.apple.iokit.IOSMBusFamily   1.1
com.apple.security.sandbox  220.2
com.apple.kext.AppleMatch   1.0.0d1
com.apple.security.TMSafetyNet  7
com.apple.driver.DiskImages 345
com.apple.iokit.IOStorageFamily 1.8
com.apple.driver.AppleKeyStore  28.21
com.apple.driver.AppleACPIPlatform  1.7
com.apple.iokit.IOPCIFamily 2.7.3
com.apple.iokit.IOACPIFamily    1.4
com.apple.kec.corecrypto    1.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:43:26.843

您不应该仅仅通过执行 os.walk 就可以使系统恐慌。

您可能应该 fsck 您的文件系统（在卸载时）并检查磁盘是否有坏块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:50:19.187

如果`find`乐于“遍历”目录，则问题似乎更有可能是`all_files`在内存中构建那个巨大的列表 ( )，这很容易占用 4-8GB 的​​ RAM。

如果你删除线，问题仍然存在...

```
all_files.append(full) 
```

...并且您是否有任何理由需要构建一个完整的列表，而不是使用返回的迭代器对该列表执行您打算执行的任何操作`os.walk()`？

**更新**

> 单独打印路径会使系统陷入内核恐慌。

很奇怪。如果在打印相同的文件名后它总是失败，那可能会给你一个线索，让你知道是哪个文件导致了问题。

否则，[源代码](https://bitbucket.org/pypy/pypy/src/py3k/lib-python/2.7/os.py?#cl-209)非常简单，并且是`os.walk()`用纯 Python 编写的，所以如果你在一个新文件中复制了该代码，并添加了一些调试消息，它可能有助于追踪问题。

但最终，没有用户进程应该能够导致内核恐慌，这使得这成为一个 OSX 错误，所以你可能会更幸运地联系 Apple 客户服务 - 他们实际上会获得报酬来解决这些问题。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:33:26.903

您的 python 代码不会导致内核恐慌。mac 上的内核恐慌发生的原因很少：

1.  硬件问题
2.  操作系统本身的错误
3.  已安装内核驱动程序中的错误

Python 不安装内核驱动程序，因此即使它是一致的，根本原因还是在您的 Python 代码之下。

我在您的恐慌跟踪中看到了 virtualbox。那可能是你的问题。这是描述如何阅读恐慌日志的页面：[http ://www.embracingchaos.com/2011/05/macbook-crashes-kernel-panics-and-coping-with-an-apple-genius.html](http://www.embracingchaos.com/2011/05/macbook-crashes-kernel-panics-and-coping-with-an-apple-genius.html)

# asp.net - jQuery 和重新加载服务器控件

> ID：16175330
> 
> 赞同：0
> 
> 时间：2013-04-23T17:16:07.510
> 
> 标签：asp.net, jquery, web-controls

我是 jQuery 新手，有一些问题。我创建了一个服务器 Web 控件（它实现了一个`webControl`），并且想知道在事件触发时如何刷新控件。换句话说：

1.  我有一个具有下拉列表的服务器控件。
2.  当用户进行选择时，我想引起部分回发并重新加载控件（设置一些可以由使用控件的页面读取的公共属性值）。

这可以通过使用 jQuery 来完成，还是我仍然需要更新面板？

这是我的服务器控件：

```
<Assembly: WebResource("com.myControls.WebControls.miniActiveDirectorySearchStyle.css", "text/css", PerformSubstitution:=True)> 
Namespace com.myControls.WebControls
    < _
    System.Drawing.ToolboxBitmap(GetType(Button), "myControls.WebControls.ActiveDirectorySearch.bmp"), ToolboxData("<{0}:miniActiveDirectorySearch ID='miniActiveDirectorySearch{0}'  runat=""server""> </{0}:miniActiveDirectorySearch>"), _        ClientCssResource("com.myControls.WebControls.miniActiveDirectorySearchStyle.css")> _
Public Class miniActiveDirectorySearch
    Inherits WebControl
    Public ddlValue As New TextBox
    Public ddlText As New TextBox

    Private tblMainLayout As HtmlTable
    Private divControlContainer As New HtmlGenericControl()
    Private modalExtender As New ModalPopupExtender()
    Private tbSearchUser As New TextBox
    ''' <summary>
    '''X Offset for modal dialog
    ''' </summary>
    ''' <value></value>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Description("Mouser Over Highlight Color")> Public Property mouseOverColor As String = "#9db3d9"

    ''' <summary>
    '''X Offset for modal dialog
    ''' </summary>
    ''' <value></value>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Description("Drop Down List Width")> Public Property ddlWidth As String = "100"

    Private Sub attachWebResources()

        Dim styleLink As String = "<link rel='stylesheet' text='text/css' href='{0}' />"
        Dim location As String = Page.ClientScript.GetWebResourceUrl(Me.[GetType](), "myControls.WebControls.miniActiveDirectorySearchStyle.css")
        Dim styleInclude As New LiteralControl([String].Format(styleLink, location))
        DirectCast(Page.Header, HtmlControls.HtmlHead).Controls.Add(styleInclude)

        ScriptManager.RegisterClientScriptResource(Me, Me.GetType, "com.myControls.ActiveDirectory.WebControls.jquery-1.4.1.min.js")
        ScriptManager.RegisterClientScriptResource(Me, Me.GetType, "com.myControls.ActiveDirectory.WebControls.miniActiveDirectorySearch.js")

    End Sub
    Protected Overrides Sub CreateChildControls()
        createDynamicControls()
        MyBase.CreateChildControls()
    End Sub

    Protected Overrides Sub OnInit(ByVal e As System.EventArgs)
        attachWebResources()
        MyBase.OnInit(e)
    End Sub

    Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
        MyBase.OnLoad(e)
    End Sub

    Private Sub createDynamicControls()
        Controls.Clear()

        Try
            tblMainLayout = buildMaintable()
            Controls.Add(tblMainLayout)
        Catch ex As Exception
            Throw New ApplicationException("Exception Occurred Creating Control.", ex.InnerException)
        End Try
    End Sub
    Private Function buildMaintable() As HtmlTable
        tblMainLayout = New HtmlTable
        Dim divImage As New HtmlGenericControl("div")
        ddlText = New TextBox
        ddlValue = New TextBox

        With ddlText
            .ID = "ddlText"
        End With

        With ddlValue
            .ID = "ddlValue"
        End With
        With divControlContainer
            .ID = Me.UniqueID & "_divSearchResults"
            .Attributes.Add("onClick", "hideMe(this)")
        End With
        With divImage
            .ID = Me.UniqueID & "_ImageDiv"
        End With
        With tblMainLayout
            .CellPadding = 0
            .CellSpacing = 0
            .Style.Add("border-collapse", "collapse")

            Dim tr As New HtmlTableRow
            With tr
                Dim td As New HtmlTableCell
                With td
                    With tbSearchUser
                        .ID = Me.UniqueID & "_tbSearchName"
                        .Attributes.Add("onKeyPress", "searchKeyPress(event, this.id, '" & divControlContainer.UniqueID & "', '" & mouseOverColor & "','" & ddlText.ID & "','" & ddlValue.ID & "')")
                        .Attributes.Add("onmouseover", "document.getElementById('" & divImage.ID & "').className='DivSearchMouseOverMini', tbMouseOver(this)")
                        .Attributes.Add("OnmouseOut", "document.getElementById('" & divImage.ID & "').className='divSearchDefaultMini',tbMouseOut(this)")
                        .Width = ddlWidth
                        .Attributes.Add("onClick", "showSearchResults('" & divControlContainer.UniqueID & "')")
                        .CssClass = "tbSearchDefault"
                    End With
                    .Controls.Add(tbSearchUser)

                    .Controls.Add(ddlText)
                    .Controls.Add(ddlValue)

                End With

                .Controls.Add(td)

                td = New HtmlTableCell
                With td

                    With divImage
                        .Attributes.Add("class", "divSearchDefaultMini")
                        .Attributes.Add("onmouseover", "this.className='DivSearchMouseOverMini',document.getElementById('" & tbSearchUser.ID & "').className='tbSearchMouseOver'")
                        .Attributes.Add("onmouseout", "this.className='divSearchDefaultMini', document.getElementById('" & tbSearchUser.ID & "').className='tbSearchDefault'")
                        .Attributes.Add("onClick", "showSearchResults('" & divControlContainer.UniqueID & "')")
                    End With
                    .Controls.Add(divImage)
                End With
                .Controls.Add(td)

            End With
            .Controls.Add(tr)
            tr = New HtmlTableRow
            With tr
                Dim td As New HtmlTableCell
                With td
                    .ColSpan = 2
                    .Controls.Add(divControlContainer)
                End With
                .Controls.Add(td)
            End With
            .Controls.Add(tr)
        End With

        Return tblMainLayout
    End Function

End Class 
```

此代码创建一个带有文本框和样式的服务器控件以模仿下拉列表。这样，我可以在下拉列表中添加一些功能。当用户对“下拉列表”或文本框进行更改时，我想引起部分回帖。我所有的 jQuery 都在另一个作为 Web 资源添加的文件中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:45:55.620

为什么不对服务器页面使用 ajax 调用，这不会导致实际的回发。获取您需要的内容并在响应中的客户端上进行更新。或者，您也可以触发服务器代码来执行此操作。

jQuery ajax 真的很容易使用。只需在服务器上声明一个静态 Web 方法来处理您的请求应该完成的任何事情。

# ios - iOS：UIToolbar setBackgroundImage 不工作

> ID：16175331
> 
> 赞同：1
> 
> 时间：2013-04-23T17:16:15.527
> 
> 标签：ios, uitoolbar

我无法更改 uitoolbar 背景图像。给出错误。

此导航条码正在工作。

```
UIImage *navBackgroundImage = [UIImage imageNamed:@"bartop.png"];
[[UINavigationBar appearance] setBackgroundImage:navBackgroundImage forBarMetrics:UIBarMetricsDefault]; 
```

但是此工具栏代码不起作用并给出错误。

```
UIImage *navBackgroundImage = [UIImage imageNamed:@"bartop.png"];
[[UIToolbar appearance] setBackgroundImage:navBackgroundImage forBarMetrics:UIBarMetricsDefault]; 
```

我哪里错了？

* * *

更新：

此代码有效：

```
UIImage *testimage = [[UIImage imageNamed:@"bartop"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UIToolbar appearance] setBackgroundImage:testimage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
[[UIToolbar appearance] setBackgroundImage:testimage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsLandscapePhone]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T17:33:05.293

根据文档，您需要与 UIToolbar 一起使用的方法是

```
- setBackgroundImage:(UIImage *)backgroundImage forToolbarPosition:(UIToolbarPosition)topOrBottom barMetrics:(UIBarMetrics)barMetrics 
```

您正在使用

```
- setBackgroundImage:(UIImage *)backgroundImage forBarMetrics:(UIBarMetrics)barMetrics 
```

尝试使用它，看看它是否适合你。

[更多信息在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006927-CH3-SW4)。

# html - 使用自定义图标字体填充问题 (?)。下面的例子

> ID：16175333
> 
> 赞同：6
> 
> 时间：2013-04-23T17:16:27.240
> 
> 标签：html, css, icon-fonts

我已经使用自定义 .svg 图标创建了一个图标字体，但我遇到了填充问题（或者可能是其他问题）。我以前不包含任何填充的图标，以防出现问题。

出于某种原因，图标似乎已经移到了它们应该在的位置上方，我找不到任何方法将它们放回容器中。这是我正在谈论的一个例子：http: [//i.imgur.com/RwOKWLp.png](http://i.imgur.com/RwOKWLp.png)

我已将“背景颜色”设置为黄色以突出显示我的问题。

这是一个图标的 HTML：

```
<div class="vicon" aria-hidden="true" data-icon="&#xe001;"></div> 
```

这是我目前正在使用的 CSS：

```
[data-icon]:before {
    font-family: 'iconfont';
    content: attr(data-icon);
    speak: none;
    font-size: 100%;
    font-weight: normal;
    font-variant: normal;
    text-transform: none;
    line-height: 1;
    -webkit-font-smoothing: antialiased;
}

.vicon {
    display: inline-block;
    font-size: 50px;
    margin-top: 1em;
    background-color: yellow;
} 
```

@font-face 代码：

```
@font-face {
font-family: 'iconfont';
src:url('[font_location_on_company_server].eot');
src:url('[font_location_on_company_server].eot?#iefix') format('embedded-opentype'),
    url('[font_location_on_company_server].woff') format('woff'),
    url('[font_location_on_company_server].ttf') format('truetype'),
    url('[font_location_on_company_server].svg#icon_font') format('svg');
font-weight: normal;
font-style: normal;
} 
```

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:22:37.777

问题不是 CSS，而是你的字体的**基线高度**（参见[http://icomoon.io/#docs/font-metrics](http://icomoon.io/#docs/font-metrics)）

这意味着字体度量是错误的。我不知道您是否更改了它们，或者它是否是来自 Icomoon 的错误，但我现在已经能够导出正确的字体。

无论如何，你不能（或者至少你不应该）用 CSS “纠正”这个。最好的方法是改变字体。

# amazon-web-services - 如何保护对 Elastic Beanstalk 资源的访问 + 安全建议？

> ID：16175335
> 
> 赞同：0
> 
> 时间：2013-04-23T17:16:31.627
> 
> 标签：amazon-web-services, termination, amazon-elastic-beanstalk

我正在使用 Elastic Beanstalk 以及自动创建一些环境资源（如 SQS 队列）的新功能。这真的很方便，但是这有一个问题：如果我“终止”环境，所有相关的资源也会被删除。

我觉得这真的很危险，虽然我是唯一一个管理这个帐户的人，但我总是会喝醉（哈哈），或者在 CLI 中输入错误的命令，或者，当然，有人可能会窃取我的帐户。

可能是我有点偏执，但到目前为止我已经找到了一些策略，我想知道哪个是最好的：

1) 给自己新建一个IAM只读用户，并为主账户（master）设置双因素认证，这样如果我需要创建资源，绝对需要用更好的登录主账户安全。

2) 防止 Beanstalk 创建的主 EC2 实例终止。如果我这样做了，我就不能再错误地终止 Beanstalk 环境了。我的问题是：弹性负载均衡器的优点之一是它可以关闭不健康的实例并启动新实例。但是，如果将一个实例设置为“不允许终止”会怎样？负载均衡器可以绕过这个并仍然创建一个新实例吗？

3）两者都做？

通常，关于这个主题的最佳实践是什么？

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T18:28:13.070

不幸的是，SQS 队列不支持终止保护。

在您的两个选项中，我肯定会选择 1)，因为 2) 不能完全保护 EB 集群不被删除。

**解释：**

1) 我建议为日常任务设置一个单独的 IAM 用户，并使用双重身份验证保护主账户，并使用它来启动/关闭新的 EB 集群。

2) 即使您使用终止保护保护主要 EC2 实例，与 EB 环境相关的其他关键资源仍将被终止，例如负载均衡器、自动扩展组和 SNS 主题。

我认为最简单的解决方案仍然是遵循“两次瞄准，一次射击”的理念，尽管一个 IAM 帐户的政策不允许它终止实例、EB 环境、删除 EB 应用程序等将是您的在暂时的精神错乱的时刻对自己进行可靠的保护。

希望这会有所帮助！

# c - KD树 - 难以理解指针

> ID：16175338
> 
> 赞同：0
> 
> 时间：2013-04-23T17:16:46.983
> 
> 标签：c, pointers, tree

我正在阅读 C 中的 kd 树实现。这是其中的一些部分。问题出在 findmedian 函数中。我不明白

```
*md = start +(end-start)/2; 
```

...... -> 其他不相关的代码行

```
struct kd_node_t
{
    double x[3];
    struct kd_node_t *left, *right;
};
struct kd_node_t* findmedian(struct kd_node_t *start, struct kd_node_t *end, int idx)
{
......
struct kd_node_t *p, *store, *md = start + (end - start) / 2;
......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:23:30.780

嗯，这里实现的只是“两个指针的中途”`start`和`end`. 如果实现注意在内存中的这个位置有一个有意义的值（可能是一个中值），那么你很幸运，否则你会得到垃圾......

# ios - 自定义 UITableViewCell 编辑动画

> ID：16175340
> 
> 赞同：4
> 
> 时间：2013-04-23T17:17:10.937
> 
> 标签：ios, objective-c, xcode, uitableview, uiviewanimation

我正在使用自定义 UITableViewCells 编写自定义 UITableView。正如许多开发人员发现的那样，这样做的一个不幸的副作用是，当表格开始编辑时，内容（在我的例子中为 UILabel）不会自动移动。因此，这是我为处理它而编写的位于 UITableViewCell 自定义子类中的代码：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
   [super setEditing:editing animated:animated];

    if (animated) {
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        CGRect titleFrame = self.titleLabel.frame;

        if (editing) {
            [self.titleLabel setFrame:CGRectMake(15, titleFrame.origin.y, titleFrame.size.width, titleFrame.size.height)];
        } else {
            [self.titleLabel setFrame:CGRectMake(25, titleFrame.origin.y, titleFrame.size.width, titleFrame.size.height)];

        }
    }completion:nil];
} 
```

不幸的是，我似乎无法弄清楚要使用的正确选项，因为我尝试过的任何组合都没有奏效。如果没有`UIViewAnimationOptionBeginFromCurrentState`UILabel 在开始动画之前移动到最左边，这是不可取的。并且没有`UIViewAnimationOptionBeginFromCurrentState`UILabel 可以很好地执行动画，但最后会有一个小的橡皮筋效果。
关于发生了什么的任何想法？谢谢。

**编辑**：我已经弄清楚发生了什么！不知道如何解决它，但现在我现在正是问题所在！

首先，我必须取消选中“使用自动布局”才能让单元格自动移动。

未编辑时，标签的初始 x 值为 25。编辑的时候，如果自己不移动label，动画就生效了，会移动到左边饰品右边25个点。第一行显示 15 的原因：

```
 if (editing) {
            [self.titleLabel setFrame:CGRectMake(15 ... 
```

是因为 25 分的差距相当大，而且看起来不太对劲。因此，在代码到位的动画中，将标签移动到 25 标记处，然后返回到 15 标记处，从而创建了橡皮筋效果。

为了解决这个问题，我尝试了各种各样的方法，比如将`[super setEditing:...]`调用移到代码下方，总是将该调用的动画参数设置为 NO... on and on，没有运气。解决方案是以某种方式使标签在比 x 值更短的距离上进行动画处理，或者（正如我最初尝试做的那样）在本地创建动画以将其发送到特定的 x 值并让它保持在那里。

`[setEditing ]`我的直觉告诉我，在我的代码块之前 contentView 的动画（可能）发生的位置发生调用的连锁反应是一个问题`UITableView`，因此将标签移过来，然后我的代码执行，将其移回。

注意：无论标签是否是 contentView 的子视图，都会发生该行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T19:01:19.903

您尚未在问题中显示它，但看起来您正在将您的`titleLabel`直接添加到单元格中。

将您的自定义内容添加到单元格中`contentView`，并使用适当的调整大小掩码，它会在正常转换到编辑模式期间为您调整大小，而无需覆盖任何方法。这就是标准标签和图像视图的工作方式。调整内容视图的大小以允许显示编辑附件，并且内容视图的子视图会自动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T15:43:16.393

尝试以下代码

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
   [super setEditing:editing animated:animated];

   [self beginUpdates];

    if (animated) {
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        CGRect titleFrame = self.titleLabel.frame;

        if (editing) {
            [self.titleLabel setFrame:CGRectMake(15, titleFrame.origin.y, titleFrame.size.width, titleFrame.size.height)];
        } else {
            [self.titleLabel setFrame:CGRectMake(25, titleFrame.origin.y, titleFrame.size.width, titleFrame.size.height)];

        }
    }completion:nil];

   [self endUpdates];

} 
```

# mysql - 如何在存储过程中循环结果？

> ID：16175342
> 
> 赞同：2
> 
> 时间：2013-04-23T17:17:18.363
> 
> 标签：mysql, stored-procedures

我正在学习 mysql (5.5) 中的存储过程，并且在这里遇到了一些关于使用 sprocs 可以做什么的心理障碍。

基础数据如下所示：

```
select * from fruit;

name | variety | price | quantity
---------------------------------
Pear Comice - 15 -  2
Pear Barlett - 20  - 3
Pear Anjou  - 20 - 3
Apple Red - 10 - 7 
etc 
```

我如何获得所有类型水果的综合货币价值，比如所有梨类型？

我已经制作了这个sproc，它将获得单一品种水果的价值。

```
DROP PROCEDURE IF EXISTS getStockValue;

DELIMITER // CREATE PROCEDURE `getStockValue`(
IN variety varchar(20),
IN vat BOOLEAN,
OUT tot DECIMAL(8,2)
)

BEGIN
DECLARE nett_value INT;
SELECT (quantity*price) INTO nett_value from fruit where variety = variety;

IF vat = 1 THEN
SELECT (nett_value*20/100)+(nett_value) INTO tot;
ELSE
SELECT nett_value INTO tot;
END IF;
SELECT tot;

END;// DELIMITER ;

CALL getStockValue('Comice',1,@tot); 
```

所以从我的基础数据中你可以看到，如果没有增值税，它应该返回总 150，而增值税 180。

我是否有另一个以某种方式循环结果集的存储过程？解决此问题的最佳方法是什么，以便此计算保留在数据库服务器上？这是使用游标的地方吗？

我已经阅读了很多关于何时使用/不使用存储过程的文章，但我接受了一家公司的采访，该公司警告我他们已经严重依赖它们。

**编辑**- 为了澄清我的整体问题。

我如何从我所在的地方得到：

```
CALL getStockValue('Comice',1,@tot); 
// gives 36 
```

（事后应该重命名为 getStockValueByVariety()）

到我想去的地方：

```
CALL getStockValueByName('Pear',1,@tot); 
// gives 180 - because it gets ALL Pear types, not just the variety Comice 
```

**最后 - twigged**，我错过了一个 GROUP BY ...

```
SELECT SUM(price*quantity) as tot 
FROM fruit 
WHERE name = 'Pear' 
GROUP BY name; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:02:51.847

使用 CASE 语句并从存储过程中返回值。

```
SELECT 
    CASE vat
        WHEN 1 THEN (((quantity*price)*20/100) + (quantity * price)) 
        ELSE (quantity*price)
    END AS nett_value
FROM fruit; 
```

如果您想要所有特定品种的总和，那么 SUM 它

```
SELECT 
    SUM(CASE vat
        WHEN 1 THEN (((quantity*price)*20/100) + (quantity * price)) 
        ELSE (quantity*price)
    END) AS tot
FROM fruit
WHERE variety = @variety 
GROUP BY
    name 
```

# c# - 将sql查询结果传递给变量

> ID：16175343
> 
> 赞同：0
> 
> 时间：2013-04-23T17:17:21.650
> 
> 标签：c#

我刚开始学习 C#，这是我第一次寻求帮助。

我编写了一个登录脚本，其中包含通常的“用户名”和“密码”字段以及提交按钮。

该脚本查询 MySQL 数据表，如果用户名和密码匹配，则关闭登录窗口并打开详细信息窗口。

我想要做的是使用查询中的两个字段并将内容传递到详细信息窗口进行显示。这是到目前为止的代码：

```
MySqlCommand SelectCommand = new MySqlCommand(
"SELECT clientID, login, pass, name_f, 
name_l FROM FIDS_members WHERE login = '" + 
this.username_txt.Text + "' AND pass = '" + 
this.pass_txt.Text + "';", myConn);

            MySqlDataReader myReader;
            myConn.Open();

            myReader = SelectCommand.ExecuteReader();

            int count = 0;

            while (myReader.Read())
            {

                count = count + 1;
            }

            if (count == 1)
            {

                string name_f = myReader.GetString("name_f").ToString();
                name_f_txt = name_f;

                this.Hide();
                Welcome f2 = new Welcome(name_f.Text);
                f2.ShowDialog();
            }
            else

                MessageBox.Show("The username or password are incorrect, please try again...");

           // Clear login feilds
            username_txt.Text = String.Empty;
            pass_txt.Text = String.Empty; 
```

我得到的错误是：

*“字符串不包含“文本”的定义。*

我知道我可能没有正确执行此操作，但如果有人可以提供一些指示，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:20:59.770

错误可能是因为这一行

```
Welcome f2 = new Welcome(name_f.Text); 
```

改变它

```
Welcome f2 = new Welcome(name_f); 
```

`name_f`是根据您的代码的字符串，您似乎将其用作 TextBox

# clojure - 如何编写递归 fn 来评估以下结构

> ID：16175345
> 
> 赞同：1
> 
> 时间：2013-04-23T17:17:34.150
> 
> 标签：clojure

我有一个结构，其中第一个元素是函数，其余的 args 到 fn。现在每个 arg 又可以是具有相似特征的向量。

`[+ 1 2 3 [- 4 3] 5 6 [- 9 8 [+ 5 6]] 4 5]`

如何编写递归 fn 来计算给定任何此类向量的结果？还有什么方法可以评估它，因为如果向量可以用 () 替换，结构将是有效的 clojure 形式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:57:21.567

```
user=> (def d '[+ 1 2 3 [- 4 3] 5 6 [- 9 8 [+ 5 6]] 4 5])
#'user/d
user=> (defn to-list [elt]
  #_=>   (if (vector? elt) (map to-list elt) elt))
user=> (to-list d)
(+ 1 2 3 (- 4 3) 5 6 (- 9 8 (+ 5 6)) 4 5)
user=> (eval *1)
17 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:45:39.360

值得注意的是，这`eval`将花费大量时间：

```
;; to-list as in Michiel's answer, v is the example from the question
user=> (time (dotimes [_ 100] (eval (to-list v))))
"Elapsed time: 192.098235 msecs" 
```

一个简单的自定义函数可以快一个数量级以上：

```
user=> (defn calcvec [v]
         (if (vector? v)
           (apply (resolve (first v))
                  (map calcvec (next v)))
           v))
#'user/calcvec
user=> (calcvec v)
17
user=> (time (dotimes [_ 100] (calcvec v)))
"Elapsed time: 15.87096 msecs" 
```

我试图用 Criterium 对这些进行基准测试，但在版本上`quick-bench`花费的*时间*太长`eval`，所以我最终杀死了它。（不过，它很好`calcvec`。）

一般来说，`eval`对于很少执行（可能只执行一次）的操作最有意义，例如从动态构造的代码段编译函数等。因此，如果您只需要计算少数此类向量的值，则`eval`方法是美好的; 否则你会更好`calcvec`或类似的东西。不言而喻，该`eval`版本可以做更多的事情，例如它可以处理特殊的表格和宏。

# c# - 如何从 C# 中的 Web 浏览器控件的文本区域中获取文本值

> ID：16175357
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:18:51.043
> 
> 标签：c#

如何从 C# 中的 Web 浏览器控件的文本区域获取文本值。如果我不知道文本区域的 ID 或名称？

```
 var element1 = webBrowser1.Document.GetElementsByTagName("textarea");
  foreach (HtmlElement el in element1) {
    //GET THE TEXT
  } 
```

编辑：`<textarea name="message"></textarea>`

我将如何获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:20:50.653

你可以用这个

```
varelement1= Request.Form["textarea"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:29:58.367

这不能完全使用 LINQ 完成，但您可以像这样定义扩展

```
static class ControlExtension
    {
        public static IEnumerable<Control> GetAllControls(this Control parent)
        {
            foreach (Control control in parent.Controls)
            {
                yield return control;
                foreach (Control descendant in control.GetAllControls())
                {
                    yield return descendant;
                }
            }
        }
    } 
```

并打电话

```
var list = this.GetAllControls().OfType<TextArea>().ToList(); 
```

# bash - Shell 脚本 - 目录比较 - 输出

> ID：16175361
> 
> 赞同：0
> 
> 时间：2013-04-23T17:19:03.480
> 
> 标签：bash, shell

我将两个目录与​​：

```
diff --brief -s dir1/ dir2/ 
```

效果很好，我得到了以下输出：

```
Only in dir1/: test1
Files dir1/test2 and dir2/test2 differ
Only in dir2/: test3
Files dir1/test4 and dir2/test4 are identical 
```

是否有可能获得列出的文件 test1...test4 的输出`ls -l dir1/`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:10:37.630

您可以创建一个 awk 脚本来为您执行此操作，例如

```
diff --brief -s dir1/ dir2/ | awk '
    /^Only in/ { system("ls -l " gensub(":$","","1",$3) $4) }
    /^Files/ { system("ls -l " $2 " " $4) }' 
```

但这给出了与 ... 相同的结果（顺序错误）`ls -l dir1/ dir2/`（因为 diff 输出每个文件。所以您可能需要重新指定您的要求。（并向我们展示您尝试过的内容...）

# c++ - 是否可以模拟或重载对 Boost::Filesystem(.hpp) 的直接引用？

> ID：16175367
> 
> 赞同：1
> 
> 时间：2013-04-23T17:19:24.350
> 
> 标签：c++, unit-testing, mocking

我正在尝试帮助围绕 Qt C++ 应用程序中的控制器设计一些单元测试。

坦率地说，我有两个很大的缺点。第一，我的测试背景主要基于 .NET 项目，所以我对 c++ 世界中最佳实践的了解最多。第二，我正在查看的应用程序的设计者没有考虑到单元测试来构建代码。

一个具体点，我正在查看一个包含 boost/filesystem/operations.hpp 的控制器类。控制器构造函数继续检查目录是否存在并使用来自 boost 文件系统代码的函数创建目录。

有没有办法重载或模拟这种行为？我习惯于在 .NET 中设置 IoC 容器或至少依赖注入的构造函数，然后能够在单元测试代码中传递模拟对象。不过，我不确定模板化的头文件如何与该概念一起使用，或者它是否是 c++ 中的典型实践。

目前，我无法灵活地建议代码更改，因为本周即将发布版本。但在那之后，如果有一些简单的代码更改可以提高可测试性，那绝对是一个选择。理想情况下，有一种方法可以在单元测试框架中按原样重载文件系统功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:07:00.827

我们最终创建了一个通用文件系统包装器，它调用 Boost 文件系统并将其作为参数接受给我们的类构造函数，以便我们可以在单元测试时发送模拟版本。

我理解不要嘲笑这一点的想法，但我认为快速单元测试对于我们的 CI 环境在签入时运行以及实际命中文件系统的测试是有价值的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-24T22:39:12.997

如果您考虑一下，您需要将 IFilesystem 的实例注入到您的类中的唯一原因是在测试中模拟它。无论如何，您的非测试代码库的任何部分都不会使用任何东西，但真正的文件系统，因此可以安全地假设您可以将**类型****注入**到您的类中，并在您的代码库中自由使用它们而不会发生类型冲突。

 **所以，假设你有兴趣班

```
struct BuildTree
{
    BuildTree(std::string_view dirname) { /*...*/ }

    bool has_changed()
    {
        // iterates through files in directory
        // recurs into directories
        // checks the modification date against lastModified_
        // uses boost::filesystem::last_write_time(), etc.
    }

private:
    boost::filesystem::file_time_type lastModified_;
}; 
```

现在，您可以将*类型*注入到类中。这种类型将是一个带有一堆静态方法的类。会有一个`RealFilesystem`类型会重定向到 boost::filesystem 方法，并且会有一个`SpyFilesystem`.

```
template <class Filesystem>
struct BuildTree
{
    // ...
    bool has_changed()
    {
        // uses Filesystem::last_write_time(), etc.
    }

private:
    typename Filesystem::file_time_type lastModified_;
}; 
```

这`SpyFilesystem`将类似于 PIMPL 习惯用法，因为静态方法会将调用重定向到实际实现。

```
struct SpyFilesystemImpl;

struct SpyFilesystem
{
    using file_time_type = typename SpyFilesystemImpl::file_time_type;

    static file_time_type last_time_write(std::string_view filename)
    {
        return instance.last_time_write(filename);
    }

    // ... more methods

    static SpyFilesystemImpl instance;
};

SpyFilesystemImpl SpyFilesystem::instance{};

// No warranty of completeness provided
struct SpyFilesystemImpl
{
    using file_time_type = std::chrono::system_clock::time_point;

    void create_directory(std::string_view path) { /*...*/ }
    void touch(std::string_view filename)
    {
        ++lastModified_[filename];
    }

    file_time_type last_time_write(std::string_view filename)
    {
        return std::chrono::system_clock::time_point{lastModified_[filename]};
    }

private:
    std::unordered_map<std::string, std::chrono::seconds> lastModified_;
}; 
```

最后，在您的每个测试中，您将准备一个 实例`SpyFilesystemImpl`，将其分配给`SpyFilesystem::instance`，然后使用 实例化您的类`SpyFilesystem`。像这样

```
// ... our SpyFilesystem and friends ...

// Google Test framework
TEST(BuildTree, PickUpChanges)
{
    SpyFilesystemImpl fs{};
    fs.create_directory("foo");
    fs.touch("foo/bar.txt");

    SpyFilesystem::instance = fs;

    BuildTree<SpyFilesystem> tree("foo");
    EXPECT_FALSE(tree.has_changed());

    SpyFilesystem::instance.touch("foo/bar.txt");
    EXPECT_TRUE(tree.has_changed());
} 
```

这种方法的优点是生成的二进制文件中没有运行时开销（前提是启用了优化）。但是，它需要更多样板代码，这可能是个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:26:03.930

`boost::filesystem`在我看来，将其视为标准库的扩展似乎是合理的。所以你模拟它（或不模拟它）的方式与模拟类似`std::istream`. （通常，当然，您不会模拟它，而是您的测试框架提供了必要的环境：您需要读取的文件`std::istream`、目录等 `boost::filesystem`。）**

# android - 按下后退按钮后如何刷新以前的活动？

> ID：16175369
> 
> 赞同：4
> 
> 时间：2013-04-23T17:19:34.267
> 
> 标签：android, android-intent, android-activity, refresh, back-button

我正在构建一个警报应用程序。我目前有一个 ListActivity 显示警报列表和另一个更改特定警报时间的活动。我的问题是，当我决定进入活动以更改警报时间然后按后退按钮时，它不会刷新。但是，我已经实现了一个重定向回 ListActivity 的按钮，如果我按下它，警报列表就会刷新。按下返回按钮后，如何刷新警报列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T17:23:28.777

您可能应该覆盖您的 onResume() 以检查警报列表是否已刷新，以便每当您来到/返回您的 ListActivity 时，它都会得到更新。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T17:23:00.993

在您的警报列表活动中

利用

```
public void onRestart() {
    // reload your list items if changed and adapter.notifydatastatechange();
} 
```

如果您在 onResume 中执行此操作，那么它会在您的活动开始时调用两次，然后在您的活动重新启动时调用第二次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-24T07:34:54.250

这是代码。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Intent a = new Intent(this,yourback.class);
            a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(a);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

我总是在返回列表视图时使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-31T10:44:00.503

我正在使用以下一个。

```
Intent intent = new Intent(CurrentActivity.this, PreviousActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        CurrentActivity.this.finish(); 
```

# ruby-on-rails - Make_Flaggable - 显示用户的标记项目

> ID：16175370
> 
> 赞同：0
> 
> 时间：2013-04-23T17:19:40.547
> 
> 标签：ruby-on-rails

在我的应用程序中，我有项目，这些项目可以使用[make_flaggable](https://github.com/medihack/make_flaggable) gem 标记为“最喜欢的”。

我想创建一个页面，每个用户都可以看到他最喜欢的项目。

任何帮助我都会非常感激！

**项目.rb**

```
make_flaggable :favorite 
```

**用户.rb**

```
make_flagger 
```

items_controller.rb

```
def favorite
  @current_user = User.first  
  @item = Item.find(params[:id])
  @current_user.flag(@item, :favorite)
  redirect_to @item, :notice => "Added to Your Favorites"
end

def unfavorite
  @current_user = User.first  
  @item = Item.find(params[:id])
  @current_user.unflag(@item, :favorite)
  redirect_to @item, :notice => "Removed from Your Favorites"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:24:01.943

make_flaggable gem 生成一个链接`flaggables`到`flaggers`以下模式的数据库表：

```
flaggings
  flaggable (polymorphic)
  flagger (polymorphic)
  reason
  timestamps 
```

以及对应的型号：

```
class MakeFlaggable::Flagging < ActiveRecord::Base
  belongs_to :flaggable, :polymorphic => true
  belongs_to :flagger, :polymorphic => true
end 
```

当您调用`make_flaggable`and`make_flagger`时，以下关系会添加到您的用户和项目中：

```
class Item < ActiveRecord::Base
  has_many :flaggings, :class_name => "MakeFlaggable::Flagging", :as => :flaggable
end

class User < ActiveRecord::Base
  has_many :flaggings, :class_name => "MakeFlaggable::Flagging", :as => :flagger
end 
```

所以，我们想通过关系`User -> Flagging -> Flaggable`。不幸的是，由于`flaggable`关系是多态的，我们**不能**只添加到用户：

```
has_many :flagables, through: :flaggings 
```

但是，由于您只是标记项目，因此您可以显式设置源类型：

```
class User < ActiveRecord::Base
  has_many :flagged_items, :through => :flaggings, :source => :flaggable, :source_type => 'Item'
end 
```

现在你可以有一个控制器方法，如：

```
@current_user = User.first
@items = @current_user.flagged_items 
```

# ruby-on-rails - 延迟作业对象未正确反序列化

> ID：16175374
> 
> 赞同：0
> 
> 时间：2013-04-23T17:19:52.297
> 
> 标签：ruby-on-rails, mongoid, delayed-job

我很难相信我所看到的，但看起来 DJ 确实无法正确反序列化对象。我在 mongo 中查看 DJ 记录，并在 YAML 中看到该对象已`text`设置其字段，但是当代码运行时，该`text`字段未设置。这是一些最小的复制代码：

```
class Board
    include Mongoid::Document
    field :text, type: String

    def process_text_field
        if not self.text
            raise "Text field is blank"
        end
        # Text field gets processed
    end
end

# in a controller
def start_doing_something_slow
    board = Board.find(params[:id])
    board.text = "Text field is set"
    board.save!
    raise "Text disappeared!" unless board.text
    board.delay.process_text_field
    render json: {:result=>'ok'}
end 
```

我用浏览器调用控制器方法，直接在mongo中查看DJ记录。我在 YAML 中看到该`Board`对象的`text`字段设置正确。但是当它在 DJ 中执行时，它会引发`Text field is blank`异常。

不知何故，它没有正确反序列化对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:34:45.977

好吧，这花了我大约一周的时间才弄清楚，所以我在这里发布它以帮助其他陷入这个陷阱的人。原来这是delayed_job_mongoid 中的一个[已知错误](https://github.com/collectiveidea/delayed_job_mongoid/issues/23)。它在错误报告中列出了 10 个月的简单修复。

如果您在 mongoid 中使用身份映射，则会出现问题，它充当数据库的进程内缓存层。对于正常的 Web 请求，缓存会在每个请求之间被清除，因此您的控制器方法不会使用对象的陈旧版本。但是没有这个补丁（我只是放在一起），delayed_job_mongoid 不会清除作业之间的缓存：[https ://github.com/collectiveidea/delayed_job_mongoid/pull/38](https://github.com/collectiveidea/delayed_job_mongoid/pull/38)

结果是您的延迟作业有时会使用旧版本的对象，具体取决于在它们之前运行的内容，这会产生真正奇怪、神秘的故障，在您了解正在发生的事情之前很难追踪这些故障。

# actionscript-3 - AS3 错误 1046 和 1180

> ID：16175377
> 
> 赞同：0
> 
> 时间：2013-04-23T17:19:55.187
> 
> 标签：actionscript-3, flash, adobe

我正在尝试将名称和分数添加到数据网格中。我不断收到错误...

1046 类型未找到或不是编译时常量：DataProvider。1080 调用可能未定义的方法 DataProvider

这是我的编码...

```
var scoreArray = new Array();

D_G.addColumn("player");
D_G.addColumn("score");

enter_btn.addEventListener(MouseEvent.CLICK, saveScore);

function saveScore(event:MouseEvent):void
{
    var obj:Object = new Object();
    obj.player = tb_name.text;
    obj.score = int(tb_score.text);

    scoreArray.Push(obj);

    scoreArray.sortOn("score", Array.DESCENDING | Array.NUMERIC); 

    var dp:DataProvider = new DataProvider (scoreArray);
    D_G.dataProvider = dp;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:22:06.410

当您不包括要使用的类时，就会发生该错误。

你正在用吗

`import fl.data.DataProvider`??

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:22:54.593

您需要导入 DataProvider 类；

```
import fl.data.DataProvider; 
```

# html - 当组合选择器时，空格和没有空格的意思一样吗？

> ID：16175379
> 
> 赞同：4
> 
> 时间：2013-04-23T17:20:25.443
> 
> 标签：html, css, css-selectors

在 CSS 中，将选择器与空格结合起来意味着[后代](http://www.w3.org/TR/CSS21/selector.html#descendant-selectors)。

但在另一个答案中，[如何在 CSS 选择器中结合类和 ID？](https://stackoverflow.com/questions/1028248/how-to-combine-class-and-id-in-css-selector)我读到，类似的语法意味着在一个标签中选择的标记重合。

CSS 解析器是否真的区分了空格和无空格，或者这是在两种情况下都有效的相同语法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T17:23:10.477

是的，空格在 CSS 规则中很重要。

`#tag.flower`表示同时具有`id="tag"`和的元素`class="flower"`，其中`#tag .flower`表示在具有 的元素`class="flower"`内部的元素`id="tag"`。

例如：

`#tag.flower`

```
<div id="tag" class="flower"></div> 
```

`#tag .flower`

```
<div id="tag">
    <div class="flower"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T17:22:45.553

CSS 选择器中的空格，例如：

```
.foo .bar {... 
```

表示一个[后代元素](http://www.w3.org/community/webed/wiki/CSS/Selectors/combinators/descendant)。例如，这将针对具有“bar”类的内部 div，

```
<div class="foo">foo
    <div class="bar">bar</div>
</div> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/q67VB/)**

删除空格意味着您选择的元素具有两个类，例如：

```
.foo.bar {... 
```

在此示例中，这将针对具有类 foo 和 bar 的 div：

```
<div class="foo">foo
    <div class="foo bar">foo and bar</div>
</div> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/q67VB/1/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:26:41.983

选择`.bee`哪个是 的直接后代`.aye`：

> .aye > .bee {...}

选择元素`.aye`和元素`.bee`：

> .aye, .bee {...}

要选择`.bee`哪个只是`.aye`（不一定是直接后代）的后代：

> .aye .bee {...}

要选择既是`.aye`又是 的元素`.bee`：

> .aye.bee {...}

# php - 尝试更新数据库时出错

> ID：16175380
> 
> 赞同：-4
> 
> 时间：2013-04-23T17:20:36.020
> 
> 标签：php, html, mysql

我是 PHP 和 MySQL 的新手，没有人可以帮助我，所以我在这里问。我试图更新它显示一些错误的数据库。谁能帮我更正下面的代码？

数据库字段是`s.no`, `name`, `description`, `top_banner_image

这是代码：

```
 <?
      php
       if(isset($_POST['submit']))
      {

       $product_name=$_POST['product_name'];
      $description=$_POST['description'];
      $photo_n=$_FILES['baner_image']['name'];
      move_uploaded_file($_FILES['top_banner_image']['tmp_name'],           

   $sql="INSERT INTO product_catergory (product_name, description, top_banner_image)
      VALUES
   ('$_POST[product_image]','$_POST[description]','$_POST[top_banner_image]')";

    if (!mysqli_query($con,$sql))
    {
    die('Error: ' . mysqli_error($con));
    }
  echo "1 record added";

  mysqli_close($con);
 ?>
<?php include("foot.php"); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:58:44.390

```
$product_name=$_POST['product_name'];
$description=$_POST['description'];
$photo_n=$_FILES['baner_image']['name'];          

$sql="INSERT INTO product_category (product_name, description, top_banner_image) VALUES
('$_POST[product_image]','$_POST[description]','$_POST[top_banner_image]')"; 
```

我看到的第一件事是错误的-> 如果不使用变量，为什么要创建变量？`$product_name, $photo_n`不使用，`$description`应该在插入语句中，但如果你已经写`$_POST['description']`了那么那个变量就不需要了，也像人们在评论中提到的那样测试sql注入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:29:38.443

```
$sql="INSERT INTO `product_catergory` (`product_name`, `description`, `top_banner_image`)
      VALUES
   ('".$_POST[product_image]."','".$_POST[description]."','".$_POST[top_banner_image]."')"; 
```

顺便说一句，你拼错了“类别”。

# android - 如何在 ExpandableListView 的子项中获取 RadioButton - Android

> ID：16175382
> 
> 赞同：0
> 
> 时间：2013-04-23T17:20:43.740
> 
> 标签：android, listview, expandablelistview

当当前视图只是下面显示的主布局视图时，如何在我的 ExpandableListView 的子项中访问我的自定义 RadioGroup：我有 - mainListView.xml //expandableListView
- group_row.xml //
textView -child_row.xml //has custom单选按钮

```
 public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.mainListView);

      ExpandableListView elv = (ExpandableListView) findViewById(R.id.expandableListView1);
      SimpleExpandableListAdapter expListAdapter =
                new SimpleExpandableListAdapter(
                        getApplicationContext(),
                        createGroupList(),              // Creating group List.
                        R.layout.group_row,             // Group item layout XML.
                        new String[] { "Group Item" },  // the key of group item.
                        new int[] { R.id.row_name },    // ID of each group item.-Data under the key goes into this TextView.
                        createChildList(),              // childData describes second-level entries.
                        R.layout.child_row,             // Layout for sub-level entries(second level).
                        new String[] {"Sub Item"},      // Keys in childData maps to display.
                        new int[] { R.id.grp_child}     // Data under the keys above go into these TextViews.
                    );
                elv.setAdapter(expListAdapter);       // setting the adapter in the list.

        }catch(Exception e){
               System.out.println("Errrr +++ " + e.getMessage());
        }

    answersGroup = (SegmentedRadioGroup) findViewById(need this from child_row); 
    answersGroup.setOnCheckedChangeListener(this);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:22:18.080

你能扩展你的 SimpleExpandableListAdapter 类并覆盖吗

```
@Override
getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) 
```

获取视图组？

# mysql - Mysql Group by 查询需要很长时间

> ID：16175383
> 
> 赞同：0
> 
> 时间：2013-04-23T17:20:44.010
> 
> 标签：mysql, group-by, group-concat

我在 mysql 数据库中有一个表“Words”。此表包含 2 个字段。word(VARCHAR(256)) 和 p_id(INTEGER)。为表创建表语句：

```
CREATE TABLE `Words` (
  `word` varchar(256) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `p_id` int(11) NOT NULL DEFAULT '0',
  KEY `word_i` (`word`(255))
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

表中的示例条目是：

```
+------+------+
| word | p_id |
+------+------+
| a    |    1 |
| a    |    2 |
| b    |    1 |
| a    |    4 |
+------+------+ 
```

该表包含 30+ 百万个条目。我正在按查询运行一个组，运行该查询需要 90 多分钟。我正在运行的按查询分组是：

```
SELECT word,group_concat(p_id) FROM Words group by word; 
```

为了优化这个问题，我使用以下查询将表中的所有数据发送到一个文本文件中。

```
SELECT p_id,word FROM Words INTO OUTFILE "/tmp/word_map.txt"; 
```

之后，我编写了一个 Perl 脚本来读取文件中的所有内容并对其进行解析并对其进行哈希处理。与 Group by query（<3 分钟）相比，它花费的时间非常少。最终哈希有 1400 万个键（字）。它占用了大量内存。那么有什么办法可以提高 Group BY 查询的性能，这样我就不需要经历上述所有步骤了？

EDT：我在下面添加 my.cnf 文件条目。

```
[mysqld]
datadir=/media/data/.mysql_data/mysql
tmpdir=/media/data/.mysql_tmp_data
innodb_log_file_size=5M
socket=/var/lib/mysql/mysql.sock
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
group_concat_max_len=4M
max_allowed_packet=20M
[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
tmpdir=/media/data/.mysql_tmp_data/ 
```

谢谢，

维诺德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:58:28.490

我认为你想要的索引是：

```
create index words_word_pid on words(word, pid) 
```

这有两件事。首先，`group by`可以通过索引扫描来处理，而不是加载原始表并对结果进行排序。

其次，该索引还消除了加载原始数据的需要。

我的猜测是原始数据不适合内存。因此，处理过程（有效地）通过索引，找到单词，然后需要加载带有单词的页面。好吧，最终内存会填满，并且带有单词的页面不在内存中。该页面是从磁盘加载的。下一页可能不在内存中，并且该页面是从磁盘加载的。等等。

您可以通过增加内存大小来解决此问题。您还可以通过使用涵盖查询中使用的所有列的索引来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:27:33.183

问题是数据库将整个 30M 行的表输出到文件中几乎不是一个常见的用例。使用 Perl 脚本的方法的优点是不需要随机磁盘 IO。要模拟 MySQL 中的行为，您需要将所有内容加载到索引 (p_id, word)（整个单词，而不是前缀）中，这可能会导致数据库过度使用。

您可以只将 p_id 放入索引中，这将加快分组速度，但需要大量随机磁盘 IO 来获取每一行的单词。

顺便说一句，覆盖索引将占用 ~(4+4+3*256)*30M 字节，即超过 23Gb 的内存。似乎使用 Perl 脚本的解决方案是您能做的最好的。

您应该注意的另一件事是，您需要通过 MySQL 连接获得超过 20Gb 的结果，并且应该将这 20Gb 的结果收集到一个临时表中（如果您不附加 ORDER BY，则按 p_id 排序无效的）。如果要通过 MySQL 绑定到编程语言来下载，则需要强制绑定使用流式传输（默认情况下，绑定通常会获取整个结果集）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:25:08.380

索引`word`列上的表。这将大大加速分组，因为 SQL 引擎可以通过对表的最少搜索来定位要分组的记录。

```
CREATE INDEX word_idx ON Words(word); 
```

# json - Perl 中的 JSON 格式

> ID：16175394
> 
> 赞同：6
> 
> 时间：2013-04-23T17:21:21.303
> 
> 标签：json, perl

我正在尝试创建一个 JSON 对象，其中列出了与特定用户关联的地图，但从未使用过嵌套的 JSON 对象。这就是我要的：

```
{
   "success":"list of users maps",
   "maps":[
      {
         "id":"1",
         "name":"Home to LE",
         "date_created":"1366559121"
      },
      {
         "id":"2",
         "name":"Test 1",
         "date_created":"1366735066"
      }
   ]
} 
```

使用这个 perl 代码：

```
 my $maps = [];
  for (my $x = 0; $x < $sth->rows; $x++) {
    my ($id, $name, $date) = $sth->fetchrow_array();
    my $map = qq{{"id":"$id","name":"$name","date_created":"$date"}};
    push $maps, $map;
  }
  my $j = JSON::XS->new->utf8;
  my $output = $j->encode({
    "success"=>"list of users maps",
    "maps"=>$maps
  }); 
```

但我得到的输出是：

```
{
   "success":"list of users maps",
   "maps":[
      "{\"id\":\"1\",\"name\":\"Home to LE\",\"date_created\":\"1366559121\"}",
      "{\"id\":\"2\",\"name\":\"Test 1\",\"date_created\":\"1366735066\"}"
   ]
} 
```

所以当我在我的 Javascript 中处理它时， data.maps[x].id 是未定义的。我很确定输出的 JSON 格式不正确。

任何人都可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T17:23:29.050

这是`undefined`因为你所拥有的`data.maps[x]`不是一个对象，而是一个字符串。由于字符串没有名为 的属性`id`，因此您将得到`undefined`. 我可能会做这样的事情（如果我不能改变 perl 脚本）：

```
var mapData = JSON.parse(data.maps[x]);
//do stuff with mapData.id 
```

但更好的做法是确保它不会将其编码为字符串，而是编码为正确的 JSON。

perl 脚本中的这一部分：

```
my $map = qq{{"id":"$id","name":"$name","date_created":"$date"}}; 
```

只是从所有这些数据中制作一个带引号的字符串。相反，您需要的是可以转换为 JSON 映射/关联数组的实际 perl 哈希。所以试试这个：

```
my $map = {
    "id" => "$id",
    "name" => "$name",
    "date_created" => "$date"
};
push $maps, $map; 
```

这样，您实际上就有了一个 perl 哈希（而不仅仅是一个字符串），它将被翻译成正确的 JSON。

例如，我写了一些测试代码：

```
use strict;
use JSON::XS;

my $maps = [];
push $maps, { id => 1, blah => 2 };
push $maps, { id => 3, blah => 2 };

my $j = JSON::XS->new->utf8->pretty(1);
my $output = $j->encode({
    success => "list of blah",
    maps => $maps
});

print $output; 
```

当你运行它时，你会得到：

```
{
   "success" : "list of blah",
   "maps" : [
      {
         "blah" : 2,
         "id" : 1
      },
      {
         "blah" : 2,
         "id" : 3
      }
   ]
} 
```

# java - Java 通信链接失败错误后

> ID：16175398
> 
> 赞同：0
> 
> 时间：2013-04-23T17:21:46.167
> 
> 标签：java

当我登录我的程序并将其放置一分钟左右时出现此错误：

```
com.mysql.jdbc.exceptions.jdbc4.CommuncationsException: Communications link failure
The last packet succesfully received from the server was 590,905 miliseconds ago. The last packet sent succesfully to the server was (cant remember correct number) miliseconds ago.

com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed. 
```

到数据库的连接到此结束，我的程序不再工作。这是我与 mysql db 配置文件的连接：

```
import java.sql.*;
import javax.swing.*;
public class mysqlconnect {
    Connection conn = null;
    public static Connection ConnectDb()    {
        try{
            Class.forName("com.mysql.jdbc.Driver");
            Connection conn = DriverManager.getConnection("jdbc:mysql://MYSERVER.COM/MY_DATABASE","USERNAME","PASSWORD");
            //JOptionPane.showMessageDialog(null, "Connection successfull");
            return conn;
        }catch (Exception e) {
            JOptionPane.showMessageDialog(null, "Cant connect to db");
            return null;
        }
    }
} 
```

在做了一些研究之后，我认为我需要向这个文件添加更多配置，但不确定要添加什么，或者即使我真的需要修改这个文件。有什么建议么？

只有错误用户名密码的原始代码：

```
import java.sql.*;
import javax.swing.*;
public class mysqlconnect {
    Connection conn = null;
    public static Connection ConnectDb()    {
        try{
            Class.forName("com.mysql.jdbc.Driver");
            //Connection conn = DriverManager.getConnection("jdbc:mysql://rude.su.lt/data_base1","USERNAME","PASSWORD");
            Connection conn = DriverManager.getConnection("jdbc:mysql://rude.su.lt/data_base1","USERNAME","PASSWORD");
            //JOptionPane.showMessageDialog(null, "Prisijungimas pavyko");
            return conn;
        }catch (Exception e) {
            JOptionPane.showMessageDialog(null, "Prisijungimas prie duomenų bazės nepavyko");
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:27:28.747

添加`autoReconnect`到 MySql DB 连接 URL ,,, 连接丢失时自动重新连接

检查下面的连接代码：

```
Connection conn = DriverManager.getConnection("jdbc:mysql://MYSERVER.COM/MY_DATABASE?autoReconnect=true","USERNAME","PASSWORD"); 
```

有关更多 MySQL 连接参数，请查看此链接： [http ://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

还要检查您是否关闭`Connection`或`Statement`除非您完成执行 DML 或 DLL

注意：在您的代码中，您似乎错过了 mysql 3306 的端口（如果您没有更改默认端口）

连接代码更新：

```
Connection conn = DriverManager.getConnection("jdbc:mysql://MYSERVER.COM:3306/MY_DATABASE?autoReconnect=true","USERNAME","PASSWORD"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:00:15.810

我建议你实现一个连接池库来处理数据库连接。不建议使用 autoReconnect 标志来[重新建立死/陈旧的连接](https://stackoverflow.com/a/667334/813471)。

> 在任何情况下，都没有 100% 安全的方法可以让 JDBC 驱动程序在 TCP/IP 连接中断时自动重新连接，而不会冒损坏数据库“状态”（即使*是*事务语义）的风险，这就是为什么这个特性最终会被移除。[资源](http://bugs.mysql.com/bug.php?id=5020)

下面是一个基于[c3p0](http://sourceforge.net/projects/c3p0/)连接池库的示例。

```
ComboPooledDataSource cpds = new ComboPooledDataSource();
cpds.setDriverClass( "com.mysql.jdbc.Driver" ); //loads the jdbc driver            
cpds.setJdbcUrl( "jdbc:mysql://MYSERVER.COM/MY_DATABASE:MY_PORT");
cpds.set
cpds.setUser("dbuser");                                  
cpds.setPassword("dbpassword"); 
```

下面的行将返回池中的连接 -

```
cpds.getConnection(); 
```

如需进一步参考[c3p0 docs](http://www.mchange.com/projects/c3p0/#using_combopooleddatasource)。

# xna - 从存储的 xnb 文件路径调用字符串时，MonoGame 中的 Microsoft.Xna.Framework.Content.ContentLoadException

> ID：16175399
> 
> 赞同：0
> 
> 时间：2013-04-23T17:21:54.803
> 
> 标签：xna, texture2d, monogame

（我正在使用 VS2012 Ultimate 用 MonoGame 制作 Windows Phone 8 游戏）

所以我有一个名为 ImagePathStorer 的类。该类的目的是存储来自我的 xnb 背景文件的字符串路径，而不是在我的 LoadContent 方法（在 DrawableGameComponent 中）中编写以下代码：

```
_bg = Game.Content.Load<Texture2D>(@"Resources/Images/Backgrounds/Loading"); 
```

我可以写这个来让它更干净，更容易维护：

```
_bg = Game.Content.Load<Texture2D>(images.getBackgroundsPath(BackgroundName.Loading)); 
```

笔记 ：

_bg 是一个 Texture2D 对象。

BackgroundName 是一个枚举，用于在我的项目中存储背景的名称。

这是 ImagePathStorer 类：

```
public class ImagePathStorer
{
    private List<string> backgroundsPath;
    public ImagePathStorer()
    {
        InitBackgroundsPath();
    }
    private void InitBackgroundsPath()
    {
        backgroundsPath = new List<string>();

        backgroundsPath.Insert((int)BackgroundName.Battle, @"Resources/Images/Backgrounds/Battle");
        backgroundsPath.Insert((int)BackgroundName.Loading, @"Resources/Images/Backgrounds/Loading");
        backgroundsPath.Insert((int)BackgroundName.Option, @"Resources/Images/Backgrounds/Option");
        backgroundsPath.Insert((int)BackgroundName.Start, @"Resources/Images/Backgrounds/Start");
        backgroundsPath.Insert((int)BackgroundName.Tutorial, @"Resources/Images/Backgrounds/Tutorial");
    }
} 
```

但是当我编译它时，有一条错误消息来自：

```
_bg = Game.Content.Load<Texture2D>(images.getBackgroundsPath(BackgroundName.Loading)); 
```

....它说：“ContentLoadException 未被用户代码处理”“在 MonoGame.Framework.DLL 中发生了“Microsoft.Xna.Framework.Content.ContentLoadException”类型的异常，但未在用户代码中处理”

我试过这个：

```
_bg = Game.Content.Load<Texture2D>("@"+images.getBackgroundsPath(BackgroundName.Loading)); 
```

但结果并没有什么不同。任何想法？非常感谢。

# java - 从数组中删除重复的字符串？

> ID：16175401
> 
> 赞同：1
> 
> 时间：2013-04-23T17:22:00.960
> 
> 标签：java, arrays, string, loops

如何在不使用 HashSet 的情况下从字符串数组中删除重复的字符串？

我尝试使用循环，但单词没有删除。

```
StringBuffer outString = new StringBuffer("Our, aim, and, isn't, easy, you, you're, actual, and, are, aren't, and, improve, achieving, and, Obviously, and, illumination, are");

wordList = outString.toString().split(", ");
for (i = 0; i < wordList.length; i++) {
  for (j = 0; j < wordList.length; j++) {
    if((wordList[i]!=wordList[j])&&(j>i)){
      t=true;
    }
  }
  if(t==true){
    k++;
  }
}
String[] wordList1 = new String[k];
wordList = outString.toString().split(", ");
for (i = 0; i < wordList.length; i++) {
  (j = 0; j < wordList.length; j++) {
    if((wordList[i]!=wordList[j])&&(j>i)){
      t=true;
    }
  }
  if(t==true){
    wordList1[i]=wordList[i];
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:26:00.713

1）我认为您需要使用等于运算符。尝试

```
if (!wordList[i].equals(wordList[j])){ 
```

而不是`!=`.

2）凯文也是对的。您需要将 t 设置回 false。

3）其他人已经指出的旁注：为了提高效率，您应该从内部循环开始

```
for (j = i+1; j < wordList.length; j++) { 
```

4) 另一个旁注：您的结果数组仍然太长。如果您不想使用 a`List<String>`并且可以松开原始数组，您可以使用 Zim-Zam O'Pootertoot 建议的解决方案并将原始重复项设置为空，添加一个计数器来计算有多少空值您分配，使用正确的大小初始化新数组并在第一个数组上循环最后一次，并仅将非空值复制到新数组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:37:47.723

如果你被允许使用`List`s，你可以定义一个通用的方法来相当容易地做到这一点：

```
public <T> T[] removeDuplicates(final T[] array) {
    List<T> noDuplicates = new ArrayList<T>();
    for (T arrayElem : array) {
        if (!noDuplicates.contains(arrayElem)) {
            noDuplicates.add(arrayElem);
        }
    }
    return (T[]) noDuplicates.toArray();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T17:45:39.743

试试这个代码来删除重复词：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < wordList.length; i++) {
    boolean found = false;
    for (int j = i+1; j < wordList.length; j++) {
        if (wordList[j].equals(wordList[i])) {
            found = true;
            break;
        }
    }
    // System.out.printf("Checking: [%s]%n", wordList[i]);
    if (!found) {
        if (sb.length() > 0)
            sb.append(' ');
        sb.append(wordList[i]);
    }
}
System.out.printf("Unique: [%s]%n", sb); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T17:25:38.130

在提取所需的值后，您可能希望将 t 设置回 false：

```
if(t)
{
     wordList1[i]=wordList[i];
     t = false;
} 
```

还有这个：

```
if((wordList[i]!=wordList[j])&&(j>i)) 
```

将始终返回 true，因为字符串是不可变的（除非您将字符串与您不允许使用的自身的精确引用进行比较`j>i`）。您需要将其更改为：

```
if (!(wordList[i].equals(wordList[j]))&&(j>i)) 
```

使用`.equals`will 比较它们包含相同的字符串，而不是它们指向字符串的确切引用。

不确定这是否是唯一的问题，从给出的内容中有点不清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:27:37.310

在您的内部循环中，初始化`j = i + 1`

```
if(wordlist[i] != null && wordlist[i].equals(worldlist[j])) { wordlist[j] = null; } 
```

...然后在完成删除所有空值后压缩数组

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T17:28:18.567

如何使用列表：

```
wordList = outString.toString().split(", ");
List<String> finalList = new ArrayList<String>();
for(String val : wordList) {
  if(!finalList.contains(val)) {
    finalList.add(val);
  }
} 
```

然而，一个 Set 会更有效。如果您不能使用 List 或 Set，并且您被迫删除重复项，那么您每次都必须循环遍历数组，这将执行得非常糟糕。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T17:28:21.627

遍历数组，并存储在辅助索引中`int[]`或`List<Integer>`使用您的 two 找到的重复项的索引中`for`。

创建一个新数组，其大小等于原始数组减去重复字符串的大小。

遍历您的原始数组，如果索引不在您的辅助列表中，请将其设置为您的新数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-11T22:51:13.713

最好和最有效的方法是假设`arr`包含字符串并且可以具有重复值的数组：

```
Arrays.sort(arr);
int l = 0;
for (int a = 0; a < arr.length; a++) {
    if (a == arr.length - 1)
        l++;// its a unique value
    else if (!(a[a + 1].equals(arr[a])))
        l++;// its also a unique
}
String newArray[] = new String[l];
l = 0;
for (int a = 0; a < arr.length; a++) {
    if (a == arr.length - 1)
        newArray[l] = arr[a];
    else if (!(a[a + 1].equals(arr[a]))) {
        newArray[l] = arr[a];
        l++;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-03T16:07:37.687

尝试这个...

```
public class RemoveDupsStringArray {

public static void main(String[] args) {
    String[] withDuplicates = new String[] {"one","one","two","three","one","three","three"};
    String[] withoutDuplicates = new String[] {"one","two","three"};

    removeDuplicates(withDuplicates);
    removeDuplicates(withoutDuplicates);
}

private static void removeDuplicates(String[] array) {
    int[] occurence = new int[array.length];
    for (int i = 0; i < array.length; i++) {
        for(int j=i+1;j<array.length;j++){
            if(array[i]==array[j]){
                occurence[j]=j;
            }
        }
    }
    int resultLength=0;
    for(int i=0;i<occurence.length;i++){
        if(occurence[i]==0){
            resultLength++;
        }
    }
    String[] result=new String[resultLength];
    int index=0;int j=0;
    for(int i=0;i<occurence.length;i++){
        index = occurence[i];
        if(index==0){
            result[j]= array[i];
            j++;
        }
    }

    for(String eachString : result){
        System.out.println(eachString);
    }
}
} 
```

# symfony - Symfony 2 DOMDocument::schemaValidateSource() 错误

> ID：16175404
> 
> 赞同：1
> 
> 时间：2013-04-23T17:22:10.433
> 
> 标签：symfony

我正在使用 symfony 2，并且我的计算机上有一个工作网页。问题是当我将它上传到生产服务器时，我收到以下错误：

```
 ErrorException: Warning: DOMDocument::schemaValidateSource() [domdocument.schemavalidatesource]: Invalid Schema in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php line 363

    in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php line 67
    at ErrorHandler->handle()
    at DOMDocument->schemaValidateSource() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php line 363
    at XmlFileLoader->validateSchema() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php line 293
    at XmlFileLoader->validate() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php line 222
    at XmlFileLoader->parseFile() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php line 40
    at XmlFileLoader->load() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/DependencyInjection/FrameworkExtension.php line 43
    at FrameworkExtension->load() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/MergeExtensionConfigurationPass.php line 42
    at MergeExtensionConfigurationPass->process() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/MergeExtensionConfigurationPass.php line 39
    at MergeExtensionConfigurationPass->process() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/Compiler.php line 119
    at Compiler->compile() in /home/ljrgwoej/public_html/webs/Chambalo/vendor/symfony/src/Symfony/Component/DependencyInjection/ContainerBuilder.php line 437
    at ContainerBuilder->compile() in /home/ljrgwoej/public_html/webs/Chambalo/app/bootstrap.php.cache line 872
    at Kernel->buildContainer() in /home/ljrgwoej/public_html/webs/Chambalo/app/bootstrap.php.cache line 783
    at Kernel->initializeContainer() in /home/ljrgwoej/public_html/webs/Chambalo/app/bootstrap.php.cache line 517
    at Kernel->boot() in /home/ljrgwoej/public_html/webs/Chambalo/app/bootstrap.php.cache line 548
    at Kernel->handle() in /home/ljrgwoej/public_html/webs/Chambalo/web/app.php line 12 
```

我能做什么？我有很多谷歌没有结果。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T18:27:26.540

我更新后得到了这个。我通过将我的 libxml 版本从 libxml2-2.6.26-2.1.21.el5_9.2 降级到 libxml2-2.6.26-2.1.21.el5_9.1 来解决此问题。

yum 降级 libxml2-2.6.26-2.1.21.el5_9.1

# java - Java- 使用 java7 将文件转换为字节数组，反之亦然

> ID：16175407
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:22:30.297
> 
> 标签：java, bytearray, java-7

请举例说明以下语法：

```
static byte[] readAllBytes(Path path)
static Path write(Path path, byte[] bytes, OpenOption... options) 
```

我对路径、字节但 OpenOption 有一个粗略的了解！所以最好举个例子。该代码与java 7有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:30:32.793

[Files 类文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#write%28java.nio.file.Path,%20byte%5B%5D,%20java.nio.file.OpenOption...%29)中有这样一个示例。

```
 Path path = ...
 byte[] bytes = ...
 Files.write(path, bytes, StandardOpenOption.APPEND); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T07:19:46.153

代码示例：

```
Path path = Paths.get(pathToFile);
byte[] bArray = new byte[0];
try {
    bArray = Files.readAllBytes(path);
} catch (IOException e) {
    e.printStackTrace();
} 
```

# php - 对MVC框架设计中的__get和__set感到困惑

> ID：16175408
> 
> 赞同：0
> 
> 时间：2013-04-23T17:22:32.933
> 
> 标签：php, model-view-controller, design-patterns, overloading

我一直在阅读 MVC 框架的工作原理以及设计模式本身。我可以理解大部分部分并了解它们是如何组合在一起的，但是在很多示例中，我看到了这样的内容：

```
class Registry
{
    private $vars = array();

    public function __set($index, $value)
    {
      $this->vars[$index] = $value;
    }

    public function __get($index)
    {
      return $this->vars[$index];
    }
} 
```

在很多教程中，它被称为“注册表”。它通常在`init`文件中实例化，并且是调用核心类（路由处理程序、模板等）的一部分，例如在控制器中呈现这样的视图`$this->registry->template->render('view');`。

逐字阅读代码“单词”，我可以看到它`$this->vars[$index] = $value`的作用，从`vars[]`数组中获取索引并使其等于`$value`。所以，如果我们这样做：

```
__set(1, 'firstname');

// So now
$vars[1] = 'firstname';

__get(1); // Returns 'firstname' 
```

如果我在这里错了，请纠正我。

我隐隐约约地看到了它的好处和有用性，但我还无法掌握更大的图景。我无法将它与其他组件联系起来，而且它似乎占了很大一部分。

我不知道它的目的是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:37:32.473

这更像是一个设计讨论，而不是更简洁的代码调试。所以..

[这告诉你为什么这是一个好主意](http://www.brandonsavage.net/use-registry-to-remember-objects-so-you-dont-have-to/)

[这告诉你为什么它不是](http://www.brandonsavage.net/the-registry-pattern-reexamined/)

[这会告诉您有关注册表 getter 和 setter 的信息](https://stackoverflow.com/questions/8147207/php-registry-pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:26:35.043

`__get()`并且`__set()`是所谓的[魔术方法](http://php.net/manual/en/language.oop5.magic.php)。它们的好处是，您不必调用它们，它们将由 PHP 解释器本身调用。如果您尝试访问对象的不可访问属性，就会发生这种情况。这称为[属性重载](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)。

尝试这个：

```
class Test {

    private $foo;

    public function __set($name, $value) {
        echo "assgning $name => $value";
    }
}

$t = new Test();
$t->foo = 'bar'; 
```

# c# - 构建源代码时出现 umbraco cms 错误

> ID：16175419
> 
> 赞同：0
> 
> 时间：2013-04-23T17:23:24.400
> 
> 标签：c#

我正在尝试在 Visual Studio 2012 中构建 Umbraco cms 源代码，并在 PluginManager.cs 的下面一行中不断收到以下错误

```
try
            {
               **var typeInstance = (T)Activator.CreateInstance(t);**
                instances.Add(typeInstance);
            }
            catch (Exception ex)
            {

                LogHelper.Error<PluginManager>(String.Format("Error creating type {0}", t.FullName), ex);

                if (throwException)
                {
                    throw ex;
                }
            } 
```

错误指向这一行

```
**var typeInstance = (T)Activator.CreateInstance(t);** 
```

并说“对象引用未设置为对象的实例。”

# c++ - 查找多维数组的大小

> ID：16175420
> 
> 赞同：3
> 
> 时间：2013-04-23T17:23:28.170
> 
> 标签：c++, arrays, multidimensional-array

我如何找到这样的数组的字节大小？

```
 double dArray[2][5][3][4]; 
```

我试过这个方法，但它返回“2”。也许是因为数组只被声明而没有填充任何东西？

```
 #include <iostream>
     #define ARRAY_SIZE(array) (sizeof((array))/sizeof((array[0])))
     using namespace std;

      int main() {
        double dArray[2][5][3][4];
        cout << ARRAY_SIZE(dArray) << endl;
       } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:25:24.000

> 我如何找到以字节为单位的大小

这告诉您数组中有多少*元素。*它给出了`2`for的预期答案`dArray`。

```
#define ARRAY_SIZE(array) (sizeof((array))/sizeof((array[0]))) 
```

如果你想要它的*字节数*，这就可以了。

```
#define ARRAY_SIZE(array) (sizeof(array)) 
```

> 也许是因为数组只被声明而没有填充任何东西？

这不会影响`sizeof`. 数组没有*填充*或未*填充*的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:30:40.823

`array[0]`包含`5 * 3 * 4`元素，所以当你的数组的第一个维度是 2 时`sizeof(array) / sizeof(array[0])`会给你`2`

将您的宏重写为：

```
#define ARRAY_SIZE(array, type) (sizeof((array))/sizeof((type))) 
```

获取元素的数量，

或者只是`sizeof(array)`获取字节数。

# haskell - Haskell，在输入和输出 IO 上使用多个 if 语句

> ID：16175427
> 
> 赞同：1
> 
> 时间：2013-04-23T17:23:38.307
> 
> 标签：haskell, if-statement, input, io, output

这是我当前的代码，我希望能够创建一个充当接口的 MAIN IO，并允许用户根据自己的选择选择要执行的函数。

```
type Title = String
type Actor = String
type Cast = [Actor]
type Year = Int
type Fan = String
type Fans = [Fan]
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans)
type Database = [Film]
title (t, _, _, _) = t
cast (_, c, _, _) = c
year (_, _, y, _) = y
fans (_, _, _, fs) = fs

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
    ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
        ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])] 
```

功能一：

```
displayAllFilms' :: [Film] -> String -> String
displayAllFilms' [] filmString = filmString
displayAllFilms' ((title,cast,year,fans):films) filmString = 
       displayAllFilms' films (filmString ++ "\n" ++ title ++ ", " ++ listStuff cast ", " ++ (show year) ++ ", " ++ show (length fans)) 
```

功能二：

```
filmsByFan f = map title $ filter (elem f . fans) testDatabase 
```

上面的代码是 100% 工作的，我能够从给定的数据库中提取信息。

这是我创建的示例 MAIN IO：

```
main :: IO ()
main = do putStrLn "What function would you like to execute? 1\. addFilm / 2.displayAllFilms / 3\. filmsByYear / 4\. filmsByFan / 5\. filmsByActor Period / 6\. becomeFan: "
          str <- getLine
          if str /= "2"
            then return ()
            else do putStrLn (displayAllFilms' testDatabase str)
          if str /= "4"
            then return ()
            else do putStrLn "Enter an existing fan: "
                    name <- getLine
                    putStrLn filmsByFan name  <<< **error here**
                    main 
```

我遇到的问题是当超过 2 个函数应用于 IO if 语句时，当用户输入分配“名称”时，它似乎没有注册，因此 name <- getLine 的其余代码没有编译。

我的问题是：有没有办法让用户根据他们选择的内容来选择要执行的功能并执行适当的功能......？

提前致谢！

编辑：

我希望代码如何执行的示例：

```
Main
which function would you like to execute...1,2,3,4,5,6?
user enters: 1
displayFilms will execute.

IF USER ENTERS 4

user enters: 4
Enter an existing fan:
user enters: Liz"
execute filmsByFan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:07:30.077

您可以将所有函数放在一个表中，并使用`lookup`它来选择要运行的函数。

```
table = [(1, addFilm)
        ,(2, displayAllFilms)
        ,(3, filmsByYear)
        ,(4, filmsByFan)
    ] 
```

我将您重命名`filmsByFan`为`filmsByFan'`(prime)，因此我可以添加一个图层来提示输入密钥并调用您的 orig 函数：

```
filmsByFan = do putStr "Enter Fan"
                f <- getLine
                print $ filmsByFan' f               
filmsByFan' f = map title $ filter (elem f . fans) testDatabase
main :: IO ()
main = do putStrLn "What function would you like to execute? 1\. addFilm / 2.displayAllFilms / 3\. filmsByYear / 4\. filmsByFan / 5\. filmsByActor Period / 6\. becomeFan: "
          str <- getLine
          let n = (read str)::Int
              cmd = lookup n table
          case cmd of
            Just doIt -> doIt
            Nothing   -> do print "sorry"
                            main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:59:48.017

你说你得到的错误信息是

```
ExampleSolution.hs:167:12: parse error on input `do' 
```

你没有说哪一行是第 167 行。

您似乎在混合空格和制表符。这可能是问题的原因。用空格替换源代码中的所有选项卡。

**编辑：**我说您似乎在混合空格和制表符，因为您问题中的源代码混合了空格和制表符。例如，有错误的行的缩进以制表符结尾，而在它上面的行中的缩进以八个空格结尾，并且似乎没有缩进。

这与线条一致

```
name <- getLine
putStrLn filmsByFan name 
```

实际上是

```
name <- getLine
        putStrLn filmsByFan name 
```

并被解释为

```
name <- getLine putStrLn filmsByFan name 
```

这将导致您现在报告的错误：

```
ExampleSolution.hs:174:61: Not in scope: `name' 
```

正如`name`在左侧定义的那样`<-`，因此不能在右侧使用：它只能在块中的后续行中使用。

检查您的编辑器在保存文件时没有将空格转换为制表符，这与您的意愿相反。或者，确保它使用 8 个空格宽的标签（我猜您可能正在使用 4 个空格宽的标签）。

nb您可能打算阅读这些行

```
name <- getLine
putStrLn (filmsByFan name) 
```

# c - 当父亲在等待信号时避免僵尸

> ID：16175428
> 
> 赞同：2
> 
> 时间：2013-04-23T17:23:38.643
> 
> 标签：c, signals, semaphore, wait, zombie-process

这是一个奇怪的问题。我有 2 个不同的程序：服务器和客户端。

服务器启动，分配所有消息队列并开始等待来自客户端的信号（该信号用于告诉服务器“有新消息”）。服务器保持无限循环，直到收到 SIGQUIT。客户端在转换时开始向服务器发送大量消息

```
 for(;;){//infinite loop
    wait(sem,1); //wait for new message
    rc = msgctl(msgid, IPC_STAT, &qbuff); 
    seq_num++; 
    pid=fork(); //new process for take the message
    if(!pid){
            if((msgrcv(msgid, &q, msgsz, 1,MSG_NOERROR))== -1) 
                perror("msgrcv error");
            else{
                pthread_mutex_lock(&mutex); //start  critic sector
                printf("\nthere is a prenotation\n");
                q.price=get_conf_value(q.kindof_service)+(q.priority*get_conf_value(3)); //costo = costo_visita + (priorità * costo_priorità)
                q.turn=seq_num-q.priority; //assign turn
                pthread_mutex_unlock(&mutex); //end critic sector
                if(q.turn<0)q.turn=0; //controllo del turno che non sia minore di 0
                printf("---------------------------");
                printf("\nPrenotation number %i\npid caller: %i\npriorità: %i\n for %i\ncost %i\nturn %i\n",seq_num,q.clientId,q.priority, q.kindof_service ,q.price, q.turn);
                printf("---------------------------\nPrenotation ok\n\n\n");
                }
    printf("\nsuccess.\n");
    exit(1); //close children process
    }
    } 
```

问题是，这样父亲留下了这么多丧尸。如果我添加

```
 else{//i am the father
        waitpid(pid, 0, 0);
    } 
```

存在主进程fork，然后等到子进程结束，然后再fork的问题。我需要父亲分叉很多次，并且不要等到进程结束再分叉。

但是没有waitpid，问题是另一个问题。因为在那之后他开始接收所有消息所需的所有进程，父亲控制并仍然等待来自客户端的另一个信号（第一个 wait(sem,1) ），留下这么多僵尸进程。

我不知道我解释得好不好..英语很难-_-

所以，我想要一个服务器，接收到信号，分叉很多次。任何孩子接受信息并做一些事情，然后孩子结束。同时服务器继续等待新的传入消息。所有没有制造僵尸:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T00:14:06.563

一种无需担心僵尸进程即可触发并忘记进程的方法是分叉两次。

每个进程都有一个父进程。如果父进程在子进程之前退出，则子进程将成为孤儿，并由`init`（进程 1）继承 - 这将等待所有子进程，防止他们在没有手动操作的情况下成为僵尸。

所以你可以做的是在子进程中分叉，然后再分叉。然后，您可以让孩子退出，这将导致孙子（您工作的地方）由`init`. 父进程可以`wait`为子进程（这不会花费很长时间，因为子进程除了分叉并退出之外什么也没做）。当孙子退出时，`init`将自动`wait`为它。

```
/* fire and forget */
int execute_detached(char **cmdline)
{
  pid_t pid;

  if((pid = fork()) < 0) { /* fork error */
    perror("fork");
    return 0;
  }
  else if(pid > 0) {       /* parent */
    waitpid(pid, NULL, 0);
    return 1;
  }
  else {                   /* child */
    if((pid = fork()) < 0) { /* fork error */
      perror("fork");
      return 0;
    }
    else if(pid > 0) {     /* child */
      /* make grand child an orphan */
      _exit(0);
    }
    else {                 /* grand child */
      execvp(cmdline[0], cmdline);
      perror("execvp");
      _exit(1);
    }
  }
  return 0;
} 
```

# mysql - recordset.sort 无效的行句柄

> ID：16175435
> 
> 赞同：0
> 
> 时间：2013-04-23T17:23:46.513
> 
> 标签：mysql, asp-classic, vbscript

我有一个生成结果集的 MySQL 存储过程。该查询用于`GROUP_CONCAT`选择行作为列。

**SQL 代码片段**

```
SELECT CONCAT(
 ' SELECT MDE_ID, MDE_CreatedOn, MDE_LastEditedOn '

,  GROUP_CONCAT(CONCAT(
   ' ,t', MDF_ID, '.MDEMDF_Value AS `', REPLACE(MDF_Label, '`', '``'), '`'
   ) SEPARATOR ' ')
```

接下来，我想对列上的记录集进行排序。

```
SQL = "CALL moduleentry_select(" & prjid & ",0,26,0)"
set rs = Server.CreateObject("ADODB.Recordset")
rs.CursorLocation = 3
rs.LockType = 3
rs.Open SQL, Conn
rs.Sort = "volgnummer"
```

我已经验证并且该列在记录集中。

我收到以下错误：

```
Microsoft Cursor Engine error '80040e04'
Row handle is invalid.
default.asp, line 176
```

第 176 行是`rs.Sort = "volgnummer"`

**编辑**

数据库中实际上不存在“Volgnummer”列。它是通过旋转原理动态选择的，使用`GROUP_CONCAT`. 参考这个 SA 答案：[将表行连接到列中，列标题来自原始行](https://stackoverflow.com/questions/10677700/joined-table-rows-into-columns-with-column-titles-from-original-rows)

# svn - 在一个 SVN 中同步两个项目

> ID：16175436
> 
> 赞同：1
> 
> 时间：2013-04-23T17:23:48.383
> 
> 标签：svn, version-control

考虑这个 SVN 代码库：

```
/root
  /OldProject
    /src
  /NewProject
    /tags
    /branches
    /trunk
      /src 
```

现在，让我们假设“OldProject”是人类创造的对软件开发的最可怕的憎恶之一。'NewProject' 应该是目标实现。因为硬切换是不可能的；我们需要慢慢地从一个过渡到另一个。

我想做的是允许开发人员继续提交 OldProject 并让系统将源同步到 NewProject 的特定目录，从而使两棵树保持最新。我的目标是让其他开发人员不需要更改他们的系统配置。它需要是无缝的（因此 SVN 外部很可能不是一个好的选择）。我唯一能想到的是为 OldProject 使用暂存区域，即 Jenkins CI 工作区，并让它 rsync 并提交到 NewProject 的工作区。

这似乎有效，但只是感觉“错误”。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:16:54.470

> 它需要是无缝的（所以 SVN 外部很可能不是一个好的选择）

请详细说明：对我来说，从 NewProject 的某些节点到 OldProject 的某些节点的外部**是最无缝**（和简单）的解决方案

> Jenkins CI 工作区，用于 OldProject 并让它 rsync 并提交到 NewProject 的工作区

是否违反 DRY 原则（有单一差异 - Jenkins 而不是人类）并带有额外的不需要的层：它可以（通过一些工作）由 repo 中的 post-commit 钩子实现

# powershell - Powershell 3中的属性名称别名

> ID：16175439
> 
> 赞同：25
> 
> 时间：2013-04-23T17:23:51.013
> 
> 标签：powershell

使用以下示例：

```
Get-Service | ConvertTo-HTML -Property Name, Status > C:\services.htm 
```

我想知道是否可以给属性名称起别名——就像在 SQL 中一样：

例子：

```
Get-Service | ConvertTo-HTML -Property Name AS NEWNAME , Status AS MYNEWSTATUSNAME> C:\services.htm 
```

我知道上面的语法不起作用......为属性名称起别名的正确方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-23T18:44:10.723

使用选择对象怎么样？

```
get-service | select-object -property @{N='MyNewStatus';E={$_.Status}}, @{N='MyNewName';E={$_.Name}} | ConvertTo-HTML > C:\services.htm 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-23T18:16:14.490

给属性名取别名的方法是给对象添加一个 AliasPropery。

```
Get-Service | 
foreach {
$_ | Add-Member -MemberType AliasProperty -Name MYNEWSTATUSNAME -Value Status -PassThru
} |
Select Name,MYNEWSTATUSNAME 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T18:04:19.997

您可以使用`new-object`cmdlet 执行创建具有所需属性名称的对象的中间步骤。

```
Get-Service | foreach{ new-object PSObject -property @{newname=($_.Name); newstatus=($_.Status)}} | ConvertTo-Html > .\services.htm 
```

# javascript - 异步模板加载

> ID：16175443
> 
> 赞同：1
> 
> 时间：2013-04-23T17:24:00.153
> 
> 标签：javascript, jquery, templates, asynchronous, promise

我正在尝试异步加载 25 个 html 模板

这是我的代码：

```
 var loopingLoadTemplate = function(index){
            var name = names[index];

            $.get('templates/' + name + '.html', function (data) {
                that.templates[name] = data;
                tplCount++;
                console.log(tplCount + " " + names.length);
                if (tplCount === names.length){
                    callback();
                }
            });
        };

        for (i = 0; i < names.length; i++){
            loopingLoadTemplate(i);
        } 
```

tplCount 是我保留的计数器，因此我知道何时可以安全触发回调

问题是，有 25 个模板要加载，当我在 Chrome 控制台的网络选项卡下检查时，我看到所有 25 个模板都已正确加载，但 console.log 告诉我 tplCount 停止在 21，我不知道为什么. 是因为 for 循环触发得太快以至于 $ 函数的某些回调没有触发吗？

如何安全地异步加载所有这些模板？

所以我也尝试了使用递归调用的同步回退，但它在加载一些模板后神秘地停止并且没有给出警告信号

```
 var loadTemplate = function (index) {
            var name = names[index];

            console.log("loading " + names[index]);

            $.get('templates/' + name + '.html', function (data) {
                that.templates[name] = data;
                index++;
                if (index < names.length) {
                    loadTemplate(index);
                    console.log("trying another load");
                } else {
                    callback();
                    console.log("trying callback");
                }
            });
        };
        loadTemplate(0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:08:42.627

好的，刚刚弄清楚它失败的原因

所以，确实所有模板都正确加载了，但是，如果一个 html 模板没有内容，回调函数中的数据将变为未定义，而不是像我预期的那样为空

当数据未定义时，它会失败：

```
that.templates[name] = data; 
```

没有任何警告或错误，并且回调中的其余代码不会被执行

由于所有模板都已加载，因此检查网络选项卡将给出所有状态成功结果

# delphi - Delphi 7 在每次构建时编译组件

> ID：16175448
> 
> 赞同：4
> 
> 时间：2013-04-23T17:24:14.390
> 
> 标签：delphi, compiler-construction, settings, delphi-7

我通常在编译时不显示编译器进度，但我决定打开它。

我注意到当我的程序编译时，它也在编译它使用的组件。例如它使用 Toolbar2000 (TB2K) 并且在编译器进度窗口中我可以看到它说正在编译 TB2kDock.pas 等。

这是设计使然吗？是否有一个设置我可以告诉它不要每次都编译组件（因为它们没有改变）并且只编译我程序的实际源代码目录中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-27T19:19:53.077

编译应该只是重新编译您更改的单元并创建新的 dcu 文件。链接器总是必须从 dcu 文件重建 Exe。无论您是否修改它们，构建都会为所有 pas 文件重新创建 dcu 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-22T08:14:07.497

在你研究这个之前，你必须明白编译你的应用程序和构建它是两件不同的事情。据我了解，当您编译应用程序时，Delphi 会修改 exe 并简单地更改您在应用程序代码中所做的更改。当您构建应用程序时，它会替换 exe。

因此，当您构建应用程序时，如果将重新编译您的设置和选项中列出的组件的所有单元，但是当您只编译它时（即使它说它正在编译该单元）它实际上只是在搜索更改的代码片段需要在您的 exe 中修改的单元

我说的当然是在更正中

# c# - 两个日期时间列表 - 搜索“颠簸”链

> ID：16175454
> 
> 赞同：2
> 
> 时间：2013-04-23T17:24:29.703
> 
> 标签：c#, algorithm

我有一个应用程序，它将两个客户端连接在一起。现在，客户端连接后，他开始发送“bumps”——当一个bumps 击中服务器时，时间被添加到一个`List<DateTime>`. 现在，由于有两个客户端连接在一起 - 有两个列表。

我想要做的是，我想查看两个列表，并找到两个用户发送时差为 60 秒的颠簸的时间跨度。

例子：

```
Bumps of user1:
18:28:00
18:28:30
18:29:30
18:30:00
18:30:30

Bumps of user2:
18:29:00
18:30:00 
```

由于`user2`只发送了两次颠簸，并且`user1`同时发送了颠簸（60 秒差异），因此两个用户的时间跨度应该是 1 分钟。

有没有可以计算的算法？

编辑澄清：我想获得尽可能短的时间跨度，也可能会有很大的差距，蚂蚁然后可能会有另一个时间跨度（所以基本上会有很多时间跨度）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:33:11.893

它与归并排序中的归并步骤非常相似。

如果 X 和 Y 是颠簸时间列表，请先对它们进行排序。之后，在以下条件下继续浏览这两个列表：

```
If diff(X[i],Y[j]) < 60 "Output something";

If (X[i]<Y[j])i++;
Else j++; 
```

# c# - 将断言添加到列表

> ID：16175455
> 
> 赞同：0
> 
> 时间：2013-04-23T17:24:32.007
> 
> 标签：c#, nunit, assertions

我有一个可以测试我的案例的断言列表。测试将通过，但我想将它们全部添加到列表中，以便我可以将该列表发送到 xml 文件。

我用一个 xml 文件做到了这一点，但这样做有什么帮助吗？这是我正在使用但不起作用的代码：

```
Assertions.Add(Assert.That(Resp.Cust.ID, Is.Not.Null)); 
```

**这是测试响应中的 ID 号不为空，我正在使用 Nunit**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:34:06.493

Assert.That 返回 void，这意味着您不能在断言列表中添加任何内容。另一方面，您可以向列表、“Is.Not.Null”和对象参数添加约束，如下所示：

```
Assertions = new List<Tuple<object, IResolveConstraint>>();
Assertions.Add(Tuple.Create((object)Resp.Cust.ID, Is.Not.Null)); 
```

然后像这样测试每个断言：

```
foreach (var pair in Assertions)
{
  Assert.That(pair.Item1, pair.Item2);
} 
```

如果您需要 xml 文件中的测试结果，您可以像这样测试您的断言：

```
object value = ...
IResolveConstraint expr = ...
Constraint constraint = expr.Resolve();
var result = constraint.Matches(value); 
```

# jquery - Jquery fadeIn 一次淡入 2 个 div

> ID：16175456
> 
> 赞同：0
> 
> 时间：2013-04-23T17:24:35.800
> 
> 标签：jquery, css, fadein

对于我正在处理的页面，我有 4 个隐藏的 div，每个都可以在点击 Jquery 时淡入。出于某种原因，当我单击其中一个 div 时，它会淡入，但也会淡入其他 div 之一。如果我尝试在 1st 中淡化另一个 div，则不会发生这种情况。任何猜测为什么？你可以在这里看到我的意思[http://www.unearthingfilm.com/optimized.html](http://www.unearthingfilm.com/optimized.html)

如果你进入菜单项并点击 storytellers 并点击这本书，div 会淡入，但它下面的那个也会淡入

```
trigger3.click(function () {
        openBook.fadeIn(1000);
        closed.delay(1000).fadeIn('slow')
    });
    closed.click(function () {
        openBook.delay(700).fadeOut('slow');
    });

    trigger4.click(function () {
        openChest.fadeIn('slow');
    });

#openChest{
    background-image: url(../images/openChest.png);
    position: absolute;
    z-index: 10;
    height: 640px;
    width: 574px;
    top:4650px;
    left:250px;
    display:none;
}
#openBook{
    display:none;
    position: absolute;
    height: 542px;
    width: 950px;
    left: 25px;
    top: 3300px;
    z-index:11;
    background-image: url(../images/openBook.png);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:37:20.787

在您的来源中，您正在这样做：

`var trigger1, trigger2, trigger3, trigger4 = $('#trigger1, #trigger2, #trigger3, #trigger4')`

这仅设置`trigger4`为 `$('#trigger1, #trigger2, #trigger3, #trigger4')`，其余的变量未初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:29:15.567

除非您在某处将 openBook 定义为 var，否则您的 jQuery 应该如下所示：

```
$('#openBook').fadeIn(); 
```

我不确定究竟是为什么，但是由于没有正确说明您的选择器，jQuery 会感到困惑。您显示的代码中的所有选择器也是如此。

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# c++ - C++ 重载运算符

> ID：16175462
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:24:53.967
> 
> 标签：c++, overloading, operator-keyword

我在程序中遇到了重载运算符“+”、“-”、“/”和“*”的问题。基本上我有一个对象，它是动态分配的双值数组。我有整个程序，但我无法通过这些重载。

我的构造函数如下所示：

```
table::table(int size) {
    this->size = size;
    tab = new double[size];
    count++;
} 
```

我写过这样的东西：

```
table & table::operator-(const table &tab3 )
{
        table * tab_oper2 = new table(size);
        for(int i=0; i< tab3.size; i++) 
        {
            (*this).tab[i] -= tab3.tab[i];
        }
        return *this;
} 
```

这通常有效，但通常不是这样做的好方法。我的导师告诉我尝试将 (*this) 切换到 *tab_oper2，将其作为参考返回，但它不起作用。拜托，有人能告诉我如何正确地做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:28:38.280

C++ 是一种价值导向的语言；返回 a `table`（而不是 a `table&`）。在局部变量中构造返回值，并返回它。并且不要忘记三个规则：鉴于您展示的小代码，您将需要一个复制构造函数、一个赋值运算符和一个析构函数。（当然，如果您使用`std::vector`, 而不是`new[]`，所有这些都会为您处理。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:34:31.420

您应该按值返回第三个对象`result`：

```
table table::operator-(const table &t) const
{
        table result(size);
        for(int i=0; i< t.size; i++) 
        {
            result.tab[i] = this->tab[i] - t.tab[i];
        }
        return result;
} 
```

运算符与您正在编写`-`的运算符不同。`-=`当你超载时`operator-`，你不应该操纵`this`.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-23T17:29:12.550

您正在分配一个结果表，但您没有填充它。填充结果表，它将起作用。

```
table & table::operator-(const table &tab3 )
{
        table * tab_oper2 = new table(size);
        for(int i=0; i< tab3.size; i++) 
        {
            tab_oper2->tab[i] = tab[i] - tab3.tab[i];
        }
        return *tab_oper2;
} 
```

# asp.net-mvc-4 - 如何查看需要使用 Visual Studio 2012 Page Inspector 登录的页面？

> ID：16175464
> 
> 赞同：2
> 
> 时间：2013-04-23T17:24:56.377
> 
> 标签：asp.net-mvc-4, visual-studio-2012, page-inspector

Page Inspector 不会打开需要登录的文件。

-VS 2012 终极版。

-MVC 4。

- 浏览器设置为 IE v10

-project 设置为调试

所有不需要登录的页面都可以正常工作。确实需要登录的页面在登录页面上打开。登录会将您直接带到已注销的主页。

当我从解决方案资源管理器的顶层或特定文件中选择 Page Inspector 时，结果是相同的。

那么，如何在需要登录的文件上使用 PageInspector？

谢谢斯蒂芬

# symfony - 覆盖 FOSUserBundle 模板不起作用

> ID：16175468
> 
> 赞同：1
> 
> 时间：2013-04-23T17:25:07.737
> 
> 标签：symfony, fosuserbundle

我正在遵循文档中讨论的覆盖模板[的第一种方法](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)。

它在我的开发服务器上运行，但由于某种原因它不能在我的生产服务器上运行（在任何环境中）。我创建的模板文件`app/Resources/FOSUserBundle/views/Security/login.html.twig`根本没有效果。

我的开发服务器是windows，prod服务器是linux。在我看来，它必须与 friendsofsymfony 捆绑包本身的安装有关。为什么它不会选择模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:24:46.303

它是命名/命名空间，在某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T11:09:45.040

我遇到了同样的问题。我在本地在 OSX 上工作，在 linux 上远程工作。路径必须在 linux app/Resources/FOSUserBundle/ 而不是 app/Resources/FosUserBundle/

# jquery - 使用jQuery将鼠标悬停在同一组中的一个div上时如何隐藏所有其他div？

> ID：16175474
> 
> 赞同：3
> 
> 时间：2013-04-23T17:25:29.567
> 
> 标签：jquery, html, hover

我有一个简单的问题要问你，但这对我来说很神奇:)

我有一个组 DIV，里面有类似的 DIVS：

```
<div id="group">

    <div class="item">
    </div>

    <div class="item">
    </div>

    <div class="item">
    </div>

    <div class="item">
    </div>

</div> 
```

我想要得到的是当我将鼠标悬停在一个 .item 上时 - 我想将组 (#group) 中其他 .item(s) 的不透明度更改为 0.4，但不是我悬停的那个。如果我有不同数量的项目，jQuery 是否有任何简单的解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:27:29.010

尝试这个：-`[Demo](http://jsfiddle.net/gpY57/)`

`[See Opacity](https://developer.mozilla.org/en-US/docs/CSS/opacity)`

```
.item:not(:hover)
{
    opacity:0.4;
} 
```

对于 IE8 及更早版本添加：-`filter:Alpha(opacity=40)`

请参阅底部以获得支持`[Hover](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)` `[:not](https://developer.mozilla.org/en-US/docs/CSS/%3anot)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:28:17.467

你可以试试这个：

```
$('.item').hover(function(){
    $('.item').not(this).css('opacity','0.4');
},function(){
    $('.item').not(this).css('opacity','1');
}); 
```

或者：

```
$('.item').mouseover(function(){
    $('.item').not(this).css('opacity','0.4');
}).mouseout(function(){
    $('.item').not(this).css('opacity','1');
}); 
```

[**Jsfiddle 示例**](http://jsfiddle.net/darkajax/vsatp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:32:23.763

这是您需要的 jquery 示例：

```
var $item = $('.item');

$item.on({
    mouseenter:function(){
        $item.not(this).css({opacity:0});
    },
    mouseleave:function(){
        $item.css({opacity:1}).removeAttr('style');
    }
}); 
```

这[是一个 jsFiddle](http://jsfiddle.net/KNsuQ/)供参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T17:34:59.167

有很多方法可以解决这个问题。这是一个：

```
$(".item").on(
    {
      mouseenter: function() 
    {
        $(".item").not(this).fadeTo('slow', 0.4);
    },
    mouseleave: function()
    {
        $(".item").fadeTo('slow', 1);
    }
    }); 
```

[http://jsfiddle.net/H4gYf/](http://jsfiddle.net/H4gYf/)

# for-loop - for 语句不会在批处理脚本中运行

> ID：16175478
> 
> 赞同：0
> 
> 时间：2013-04-23T17:25:44.160
> 
> 标签：for-loop, batch-file

我对这些东西有点菜鸟。我正在尝试制作一个批处理脚本来将 Backup Exec 10 xml 日志文件转换为文本。

搜索时，我从这里得到了一些很好的答案，编写了一个脚本并尝试运行它。它在第一个“for”语句中爆炸，我不知道为什么。

我可以手动运行这个脚本的每一步，效果很好。但是如果我双击批处理文件并运行它，在第二次暂停后它会爆炸。

有人看到这里有什么不对劲的地方吗？我无计可施。我认为“for”语句可能需要调整。我一直在搞乱，但没有找到合适的组合让它在脚本中成功运行。

```
@echo off
echo Starting Backup To Text SCript...
pause
cd c:\Program Files\Symantec\Backup Exec\Data
echo Get the latest BEX_TAPEBACKUP File...
pause
FOR /F "usebackq" %f in (`dir /Od /B`) do set "FILE=%f"
echo %FILE% will be converted to text
pause
cd c:\Program Files\Symantec\Backup Exec
REM This command will take the current Backup Exec XML log file and convert it to text.
pause
bemcmd -o31 -l"C:\Users\Administrator\Desktop\Backup Logs\backuplog.txt" s0 -       f"C:\Program Files\Symantec\Backup Exec\Data\%FILE%"
pause
echo Done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:31:38.720

为你的 for 循环使用正确的语法：

```
FOR /F "delims=" %%f in ('dir /od /B') do set "FILE=%%~f" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:31:39.250

您需要将 For 中的 % 加倍。

```
 FOR /F "usebackq" %%f in (`dir /Od /B`) do set "FILE=%%f" 
```

# java - 山狮上的朱比

> ID：16175480
> 
> 赞同：2
> 
> 时间：2013-04-23T17:25:53.787
> 
> 标签：java, gcc, jruby, osx-mountain-lion, rbenv

我已经安装了 rbenv 并且正在成功运行

红宝石 2.0.0dev (2013-02-08 主干 39161) [x86_64-darwin12.3.0]

如终端使用“ruby -v”所示

但是，在尝试使用“ruby-build”或“rbenv install”添加任何 jruby-1.7.x 时，它会得到：

```
BUILD FAILED

Inspect or clean up the working tree at /var/folders/b2/1nykqqwd3934197qf_3vm1y80000gn/T/ruby-build.20130423121331.57961
Results logged to /var/folders/b2/1nykqqwd3934197qf_3vm1y80000gn/T/ruby-build.20130423121331.57961.log

Last 10 log lines:
rm -f build/unix/Darwin/argparser.o.d
g++ -O2 -Wall  -I'/Users/donaldtyson/.rbenv/versions/jruby-1.7.1/include'   -c argparser.cpp -MMD -MP -MF build/unix/Darwin/argparser.o.d -o build/unix/Darwin/argparser.o
make[2]: g++: Bad CPU type in executable
make[2]: *** [build/unix/Darwin/argparser.o] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2

Gem files will remain installed in /Users/donaldtyson/.rbenv/versions/jruby-1.7.1/lib/ruby/gems/shared/gems/jruby-launcher-1.0.15-java for inspection.
Results logged to /Users/donaldtyson/.rbenv/versions/jruby-1.7.1/lib/ruby/gems/shared/gems/jruby-launcher-1.0.15-java/./gem_make.out 
```

我怀疑我的 Java 或 GCC 安装有问题

# c# - 附加从多个来源检索到的对象

> ID：16175487
> 
> 赞同：0
> 
> 时间：2013-04-23T17:26:17.083
> 
> 标签：c#, entity-framework

我有三个类，Fish（分别包含 Chips 和 MushyPeas 类型的两个属性）、MushyPeas（包含 Chips 类型的属性）和 Chips（具有 Name 属性）。

我正在运行以下假设代码：

```
int chipsId;
using (var db = new FishContext())
{
    var creationChips = new Chips() { Name = "A portion of chips" };
    db.Chips.Add(creationChips);
    db.SaveChanges();
    chipsId = creationChips.ChipsId;
}

Chips retrievedChips1;
using (var db = new FishContext())
{
    retrievedChips1 = db.Chips.Where(x => x.ChipsId == chipsId).ToList()[0];
}

Chips retrievedChips2;
using (var db = new FishContext())
{
    retrievedChips2 = db.Chips.Where(x => x.ChipsId == chipsId).ToList()[0];
}

using (var db = new FishContext())
{
    db.Chips.Attach(retrievedChips1);
    db.Chips.Attach(retrievedChips2);

    var mushyPeas = new MushyPeas() { Chips = retrievedChips2 };

    var fish = new Fish() { Chips = retrievedChips1, MushyPeas = mushyPeas };
    db.Fish.Add(fish);
    db.ChangeTracker.DetectChanges();
    db.SaveChanges();
} 
```

这是在我的真实应用程序中模拟一种情况，其中 EF 对象（实际上可能表示相同的数据库记录）从各种不同的 DbContext 加载，然后添加到另一个 DbContext 中的对象树中。

如果我不调用这两条 db.Chips.Attach 行，那么在将 Fish 对象保存到数据库并分配新 ID 时会创建全新的 Chips 实体。

调用 db.Chips.Attach 解决了检索到的对象之一的此问题，但第二次 Attach 调用失败，并出现异常“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。”

在这里实现我想要实现的目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:14:36.930

作为一名头发花白的 EF 兽医，我得出的结论是，`Attach`在许多情况下最好避免使用。

该异常`"An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key"`通常具有误导性，因为您尝试附加的对象实际上并未附加到数据上下文。附加对象时会发生什么，它会递归附加它引用的任何实体。因此，如果您将一个实体附加到数据上下文，然后附加另一个引用之前*隐式*附加的任何实体的实体，您将收到此错误。解决方案非常简单：

```
using (var db = new FishContext())
{
    var chips1 = db.Chips.Find(retrievedChips1.Id);
    var chips2 = db.Chips.Find(retrievedChips2.Id);

    var mushyPeas = new MushyPeas() { Chips = chips2 };

    var fish = new Fish() { Chips = chips1, MushyPeas = mushyPeas };
    db.Fish.Add(fish);
    db.ChangeTracker.DetectChanges();
    db.SaveChanges();
} 
```

这保证了两个实体都将附加到数据上下文，而不会出现任何类型的 ObjectStateManager 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:31:23.267

您可以查询`Local`集合以检查是否已附加具有相同键的实体，如果是，则使用附加的实体：

```
using (var db = new FishContext())
{
    var attachedChips1 = db.Chips.Local
        .SingleOrDefault(c => c.ChipsId == retrievedChips1.ChipsId);
    if (attachedChips1 == null)
    {
        db.Chips.Attach(retrievedChips1);
        attachedChips1 = retrievedChips1;
    }

    var attachedChips2 = db.Chips.Local
        .SingleOrDefault(c => c.ChipsId == retrievedChips2.ChipsId);
    if (attachedChips2 == null)
    {
        db.Chips.Attach(retrievedChips2);
        attachedChips2 = retrievedChips2;
    }

    var mushyPeas = new MushyPeas() { Chips = attachedChips2 };

    var fish = new Fish() { Chips = attachedChips1, MushyPeas = mushyPeas };

    //...
} 
```

（在这个简单的例子中，第一个检查没有意义，因为一个新的上下文是空的，没有任何附加内容。但你明白了......）

但是，如果您还想更新相关实体（例如通过将状态设置为附加后），如果并且具有（键值除外）不同的属性值`Modified`，这将是一个问题。你必须以某种方式决定哪个是“正确的”。但这将是业务逻辑。您只需要将其中一个交给 EF，而且只有一个。在您的场景中，您使用哪一个并不重要，因为您只是在创建一个关系，并且对于这个 EF 只会关心键值。`retrievedChips1``retrievedChips2`

旁注：而不是`...ToList()[0]`更自然的方式`...First()`（或者`Single()`在这种情况下，因为您正在查询密钥）。

# weblogic - 如何在运行时交换服务器进出集群

> ID：16175488
> 
> 赞同：0
> 
> 时间：2013-04-23T17:26:17.307
> 
> 标签：weblogic, weblogic-10.x, session-replication

我正在我的应用程序中实现会话复制。这是旧应用程序。我进行了所有更改，现在需要测试服务器开关并确认会话中的对象正确地传送到服务器列表中的另一台服务器。

我有 1 台管理服务器和 2 台托管服务器。因此集群由 2 台托管服务器组成。

在测试时，我必须始终反弹服务器并测试我的应用程序的流程。这个过程非常耗时。因此，我正在寻找任何其他方式来
在运行时将服务器移入和移出集群。我在 Oracle 支持网站上询问过，但他们说只有退回服务器的方法。

1.  我该如何为此编写脚本？
2.  weblogic 或 wlproxy 插件配置文件中是否有有助于此切换的参数。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:35:31.710

在脚本模式下使用 Weblogic 脚本工具 (WLST)，您可以编写一个脚本来自动关闭/启动您希望暂时从集群中删除的托管服务器。

您创建一个扩展名为 .py 的文件，该文件将包含您想要运行的 weblogic 命令。

关机.py：

```
connect('username','password','t3://adminIP:port')
shutdown('servername')
disconnect() 
```

启动.py：

```
connect('username','password','t3://adminIP:port')
start('servername') 
disconnect() 
```

从命令行运行脚本：

java weblogic.WLST c:\myscripts\shutdown.py

您可以将此行放在 shell/batch 脚本中。

另一种方法是编写 Java 程序或 ANT 脚本以使用 weblogic 附带的 weblogic.jar 文件调用命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:07:19.590

如果您要将 weblogic 托管服务器的状态从运行模式更改为管理模式，那么您也可以测试会话复制。

您可以从管理控制台执行此操作，方法是选择托管服务器并转到控制选项卡并将服务器的状态更改为管理员。您可以将其更改回从同一个地方运行。

使用 WLST，您可以使用命令暂停和恢复

[http://docs.oracle.com/cd/E11035_01/wls100/server_start/server_life.html](http://docs.oracle.com/cd/E11035_01/wls100/server_start/server_life.html) [http://docs.oracle.com/cd/E14571_01/web.1111/e13813/quick_ref.htm](http://docs.oracle.com/cd/E14571_01/web.1111/e13813/quick_ref.htm)

挂起和恢复托管服务器比将其关闭并重新启动要快。

我已经对此进行了测试，它工作正常，即当我将状态更改为管理员时，我的请求转到另一台托管服务器并且会话也被复制。

我使用了 wls 安装中可用的示例 WLS 集群复制示例。

# c# - Random.Next() 总是返回相同的值

> ID：16175490
> 
> 赞同：0
> 
> 时间：2013-04-23T17:26:21.663
> 
> 标签：c#

我不想得到一个 ArrayList 的随机实例，但我的代码总是返回相同的值。

```
public static void randomEvent(){
            Random rnd = new Random();
            int which = rnd.Next(1,events.Count);
            Debug.WriteLine("Which event: " + which);
            Debug.WriteLine("Count Events: "+ events.Count);
            ((Event) events[which-1]).write();
        } 
```

events.Count 的大小为 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:29:31.020

如果`events.Count`是 2，那么您正在调用`rnd.Next(1,2)`.

[文档](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)说第一个参数是包容性的，第二个参数是独占性的。你正在返回一个int。您要求一个 int x，其中 1 <= x < 2。所以它唯一可以返回的是 1。

你真的应该打电话`rnd.Next(0,events.Count)`，然后你只需要做`events[which]`，而不是`events[which-1]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:27:33.683

移出方法`Random rnd = new Random();`。`randomEvent()`

```
private static Random rnd = new Random();

public static void randomEvent(){
    int which = rnd.Next(1,events.Count);
    Debug.WriteLine("Which event: " + which);
    Debug.WriteLine("Count Events: "+ events.Count);
    ((Event) events[which-1]).write();
} 
```

# php - 相对路径或绝对路径

> ID：16175492
> 
> 赞同：1
> 
> 时间：2013-04-23T17:26:23.630
> 
> 标签：php, path, relative-path, absolute-path

在我的 localhost xampp 中，我在 htdocs 中有一个名为“google”的文件夹，在这个文件夹中，我有两个名为 client.php 和 server3f.php 的文件。

所以我在client.php中给出了这个路径来连接我的server3f.php文件并在我的localhost中工作

```
var host= ws://localhost:12346/google/server3f.php 
```

现在我在我的远程服务器上的 public_html 目录中上传了这个文件夹“google”。现在我应该给出什么路径？我试过了

```
 var host= ws://www.xyz.com:12346/google/server3f.php 
```

和

```
var host =ws://www.xyz.com:12346/home/pocket/public_html/google/server3f.php 
```

但他们都没有工作。

我可以使用此路径在“google”文件夹中动态创建一个页面

```
 "/home/pocket/public_html/google/ 
```

请帮我。我应该给什么路径？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:59:17.060

您没有展示您如何使用“主机”变量。但这里有一些提示：

如果您在同一个 url 中生成一个链接（在 ./google 中有一个文档根目录），那么任何一个都可以，例如

```
<a href="http://www.xyz.com:12346/google/server3f.php">Visit mygoogle.com</a>

<a href="server3f.php">Visit mygoogle.com</a> 
```

如果您在一台服务器上生成链接并且希望它连接到另一台服务器，那么您需要完整地址（上面的选项 1）。

如果您的文档根目录是 htdocs，那么您的本地路径将是：

```
<a href="./google/server3f.php">Visit mygoogle.com</a> 
```

当然，这假设您在服务器上已正确设置和/或端口转发 port:12346。

# html - HTML：完全没用的标签

> ID：16175493
> 
> 赞同：1
> 
> 时间：2013-04-23T17:26:32.557
> 
> 标签：html, tags

我需要完全没有任何作用的完全愚蠢的标签。`div`换行，我不想使用`span`，因为我会将另一个元素放在这个转储标签内，我不确定 span 是否设计为包含其他元素。

我想到了这两个解决方案：

1.  无论如何都要使用跨度
2.  使用完全未使用的标签

但我不确定它在旧浏览器中如何工作。

PS：我已经通过使用div解决了我的问题，但是我仍然对这个问题感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:28:26.250

`div`与 inline-block 属性一起使用？可能会做你需要的。

```
div{
display: inline-block;
} 
```

另外，我想解决您问题下方的评论。

A`<span>`确实适用于您正在做的事情。`span`a和 a之间的唯一区别`div`是 a`div`默认情况下是*块*元素，而 a默认情况下`span`是*内联*元素。但是，在您的情况下，我仍然会使用容器，因为对我来说，将元素包装在 a over a`div`中更有意义。`div``span`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:34:29.583

你真的可以使用任何元素。您必须记住的事情是使`position: fixed;`which 将其从自然流中取出并设置 a `z-index: -10;`。这将确保它始终隐藏在背景中，而其他元素将位于其之上。

你没有特别提到你什么时候试图完成，所以这只是一个第一轮的猜测。

# sql - SQL查询提取最大行

> ID：16175497
> 
> 赞同：0
> 
> 时间：2013-04-23T17:26:39.247
> 
> 标签：sql

我的 sql 查询

```
select *
  from (
            select *
              from (
                     select b.course_code       currentc
                          , b.pre_reqcoursecode prec
                       from (
                               select course_code
                                    , pre_reqcoursecode
                                 from adss_PreReqCourses
                            ) a
                       join adss_PreReqCourses b
                         on a.course_code=b.course_code
                      where b.course_code='EE218'
                   ) F
                join adss_CoursesResult w
                  on F.prec=w.course_code
               where w.GradePoint='B'
        ) J 
     join adss_CoursesResult I
       on J.currentc=I.course_code
 group by I.GradePoint
        ; 
```

输出：

```
GradePoint  Predicted
C+           24628
C            22372
B-           18424 
```

现在如何获得预测计数最高的成绩点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:38:14.580

这适用于 SQL Server（因为您说您使用的是 Visual Studio 2012，所以很可能）：

```
SELECT TOP 1 *
FROM (/*Your Query Here*/) A
ORDER BY Predicted DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:41:03.287

换线

```
select * 
```

至

```
select top 1 * 
```

并添加最后一行

```
order by Predicted desc 
```

# sql - SQL 使用列名别名而不使用 SELECTING

> ID：16175505
> 
> 赞同：7
> 
> 时间：2013-04-23T17:27:07.637
> 
> 标签：sql, select, alias

我知道我可以像这样指定一个列别名：

```
SELECT stuff as mask 
```

有没有一种方法可以指定列别名*而不*在结果集中返回该列数据？本质上，我希望能够通过执行以下操作使我的查询变得干净：

```
SELECT doManipulationStuff(cleanCompactAlias) 
```

在哪里

```
reallyLong.misleading.andAnnoying.columnName as cleanCompactAlias 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:30:40.587

您可以使用公用表表达式 (CTE) 创建具有别名的子查询：

```
WITH clean_cte AS
(
  SELECT reallyLong.misleading.andAnnoying.columnName1 as cleanCompactAlias1,
    reallyLong.misleading.andAnnoying.columnName2 as cleanCompactAlias2
)
SELECT doManipulationStuff(cleanCompactAlias1), 
  doManipulationStuff(cleanCompactAlias2) 
```

这样，您可以将所有别名放在 CTE 中，而在调用函数时忘记它。您仍然必须在某处进行别名处理，但这至少可以使其远离主查询，使其更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:29:26.253

您可以使用子查询：

```
select doManipulationStuff(cleanCompactAlias)
from (select t.*, reallyLong.misleading.andAnnoying.columnName as cleanCompactAlias
      . . .
     ) t 
```

# google-app-engine - 比较 Blobstore 和 Google Cloud Storage

> ID：16175510
> 
> 赞同：6
> 
> 时间：2013-04-23T17:27:19.870
> 
> 标签：google-app-engine, blobstore, google-cloud-storage

对于 GAE 应用程序，使用 Blobstore 和 GCS 之间的权衡是什么？

*   截至 2015 年 8 月，blobstore 和 GCS 的价格相同（每 GB 年 0.312 美元）
*   GCS 有一个更好的代码接口（看起来像文件路径的东西引用的数据）
*   GCS 具有控制台命令和用于上传/访问数据的 Web UI

Blobstore 是否有一些我缺少的优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T17:26:23.623

现在在我的创业公司中，我们正在使用 Blobstore 服务，并且我们正计划迁移到 GCS。我看到的唯一“缺点”是您将无法再直接从路径 ( [Transforming_Images_from_the_Blobstore](https://developers.google.com/appengine/docs/java/images/overview#Transforming_Images_from_the_Blobstore) ) 调整图像大小和裁剪图像。

为了不破坏所有客户端代码，我们正在考虑一个内部 servlet，它可以在其前面使用 CDN 动态调整大小，以缓存最近的作业。

# python - readline 尝试在完成时变得智能。如何禁用？

> ID：16175515
> 
> 赞同：0
> 
> 时间：2013-04-23T17:27:30.243
> 
> 标签：python, readline

我正在插入`"`并按下标签。我希望能够`text == "\""`完成我的功能。但我得到了空字符串。同样，当我输入`a,`左右时，我也只是在完成函数中获取空字符串。

如何禁用此行为？

* * *

示例代码：

```
import readline
readline.parse_and_bind('tab: complete')
def completer(text, state):
    return []
readline.set_completer(completer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:39:10.913

我认为这可以满足我的要求：

```
readline.set_completer_delims("") 
```

# perl - 使用 perl 的多个命令的安全系统调用

> ID：16175516
> 
> 赞同：1
> 
> 时间：2013-04-23T17:27:33.233
> 
> 标签：perl, input, system, sanitization

我有一个 Perl 脚本，可以从 Web 表单中读取一些信息。为了进行适当的清理，我想使用[此处](http://www.cgisecurity.com/lib/sips.html)`system`描述的语法。

他们建议您应该以以下形式形成系统命令，`system ("cat", "/usr/stats/$username");`以便用户名变量只会被解释为 cat 的参数。

如果我有一个`system("export REPLYTO=\"$from\"; echo \"$body\" | mail -s \"$subject\"");`具有多个系统命令形式的命令，我该如何正确清理系统调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:50:29.510

在开始之前，请注意您可以`export`在 Perl 中通过设置`$ENV{REPLY_TO}`.

* * *

## 选项1。

您可以使用[String::ShellQuote](http://search.cpan.org/perldoc?String%3a%3aShellQuote)的`shell_quote`.

```
use autodie qw( :all );
my $cmd = shell_quote('echo', $body) .
    '|' . shell_quote('mail', '-s', $subject);
local $ENV{REPLY_TO} = $from;
system($cmd); 
```

## 选项 2。

通过 env var 传递所有内容。

```
use autodie qw( :all );
local $ENV{REPLY_TO} = $from;
local $ENV{SUBJECT}  = $subject;
local $ENV{BODY}     = $body;
system('echo "$BODY" | mail -s "$SUBJECT"'); 
```

## 选项 3。

摆脱`echo`

```
use autodie qw( :all );
local $ENV{REPLY_TO} = $from;
open(my $pipe, '|-', 'mail', '-s', $subject);
print($pipe $body);
close($pipe);
die "Child died from signal ".($? & 0x7F)."\n" if $? & 0x7F;
die "Child exited from error ".($? >> 8)."\n" if $? >> 8; 
```

# flash - 隐藏具有负坐标的对象 adobe flash

> ID：16175519
> 
> 赞同：0
> 
> 时间：2013-04-23T17:27:35.673
> 
> 标签：flash, object, adobe, hide, frame

我在 Adob​​e Flash Professional 中设计了一个横幅，我正在使用 Motion Tween 移出带有负坐标的“可见”区域的图像。

但是，如果我放大 Flash 播放器框架，我会看到应该隐藏的图像。

我如何设法隐藏图像？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:09:57.980

使用矩形形状的遮罩层。在 Flash 编辑器中 1) 创建新图层 2) 在该图层上绘制一个与舞台大小匹配的矩形 3) 右键单击​​图层标题并在下拉菜单中选择“蒙版” 4) 使用您的图像拖动图层就在“面具”层下。您应该看到图层被蒙版了（图层的图标会改变它的视图，并且它的图标+标题会向右移动一点）。

# javascript - 表单计算JS（广播）

> ID：16175523
> 
> 赞同：1
> 
> 时间：2013-04-23T17:27:43.200
> 
> 标签：javascript, html

HTML 部分，只是我的代码的一部分：

```
 <ul>
        <li>HP:<input type="text" id="hp" size="3" maxlength="3"> </li>
        <li>SP:<input type="text" id="sp" size="3" maxlength="3"> </li>
        <li>EA:<input type="text" id="ea" size="3" maxlength="3"> </li>
        <li>ED:<input type="text" id="ed" size="3" maxlength="3"> </li>
        <li>PA:<input type="text" id="pa" size="3" maxlength="3"> </li>
        <li>PD:<input type="text" id="pd" size="3" maxlength="3"> </li>
    </ul>
<div class="train">
    <h3>Add Trainer:</h3>
    <ul>
        <li>HP:<input type="radio" name="at" id="ahp"></li>
        <li>SP:<input type="radio" name="at" id="asp"></li>
        <li>EA:<input type="radio" name="at" id="aea"></li>
        <li>ED:<input type="radio" name="at" id="aed"></li>
        <li>PA:<input type="radio" name="at" id="apa"></li>
        <li>PD:<input type="radio" name="at" id="apd"></li>
    </ul>
</div> 
```

JS：（问题出在哪里）

```
function trener1() {
  var test1 = document.getElementById('ahp').checked,
    x = Number(document.form.hp.value),
    xSum = 0;
  if (test1) {
    xSum = x + x * 0.1;
  } else {
    xSum = x - x * 0.1;
  }
  document.form.hp.value = xSum;
};

function trener2() {
  var test2 = document.getElementById('asp').checked,
    x = Number(document.form.sp.value),
    xSum = 0;
  if (test2) {
    xSum = x + x * 0.1;
  } else {
    xSum = x - x * 0.1;
  }
  document.form.sp.value = xSum;
};

function trener3() {
  var test3 = document.getElementById('aea').checked,
    x = Number(document.form.ea.value),
    xSum = 0;
  if (test3) {
    xSum = x + x * 0.1;
  } else {
    xSum = x - x * 0.1;
  }
  document.form.ea.value = xSum;
};

function trener4() {
  var test4 = document.getElementById('aed').checked,
    x = Number(document.form.ed.value),
    xSum = 0;
  if (test3) {
    xSum = x + x * 0.1;
  } else {
    xSum = x - x * 0.1;
  }
  document.form.ed.value = xSum;
};

function trener5() {
  var test5 = document.getElementById('apa').checked,
    x = Number(document.form.pa.value),
    xSum = 0;
  if (test5) {
    xSum = x + x * 0.1;
  } else {
    xSum = x - x * 0.1;
  }
  document.form.pa.value = xSum;
};

function trener6() {
  var test6 = document.getElementById('apd').checked,
    x = Number(document.form.pd.value),
    xSum = 0;
  if (test6) {
    xSum = x + x * 0.1;
  } else {
    xSum = x - x * 0.1;
  }
  document.form.pd.value = xSum;
}; 
```

所以是的，问题是如果我改变我应该改变的选项，它不会减去已经添加的值。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:38:10.133

问题是

```
document.form.ea.value 
```

一定是

```
document.forms.formName.ea.value 
```

您忘记指定表单的名称。它也应该是`document.forms`。

还要尝试优化你的代码，这样的东西应该可以代替所有这些重复的功能：

```
var radio = document.getElementsByName('at');

for (var i = radio.length; i--;) {
    radio[i].onchange = function () {
        var field = document.getElementById(this.id.substr(1)),
            x = Number(field.value),
            xSum = 0;
        if (this.checked) {
            xSum = x + x * 0.1;
        } else {
            xSum = x - x * 0.1;
        }
        field.value = xSum;
    };
} 
```

并删除`onclick`处理程序：

```
<li>SP:<input type="radio" name="at" id="asp"></li>
... 
```

# web-services - 暂时将 Desire2Learn API 密钥用于另一个域

> ID：16175524
> 
> 赞同：1
> 
> 时间：2013-04-23T17:27:44.670
> 
> 标签：web-services, api, upgrade, desire2learn, api-key

**问：“受域限制”的 Desire2Learn API 密钥是否 100% 锁定到为其颁发的 D2L 域**，或者它们是否可以在紧要关头用于不同域的工作——例如，测试升级几周？

我们案例的具体细节：

我的机构正准备升级我们的 D2L 学习环境。我们有一个生产 LE 和一个开发 LE，我们期望获得专门用于升级测试的第二个开发 LE（所有 3 个实例都由 D2L 托管，仅供参考）。

我们有 2 个本土的 Valence 客户端应用程序可以使用升级后的 LE 进行测试。我知道我们的 Valence API 密钥是专门为我们现有的（未升级的）开发域颁发的。我也知道我们的客户端应用程序是用那个密钥硬编码的。

但我不清楚我们是否*必须*获取新的 API 密钥并相应地编辑我们的客户端应用程序，或者我们是否可以在测试升级时仅在几周内使用“错误”域上的现有密钥。

这样的安排可以暂时使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:51:07.250

有几种可能的方法；您选择的将取决于您的情况。

**使用已为新域授予的另一个测试应用程序的密钥**。如果您已经为仅限于您的新 DEV2 LE 的应用程序授予了 App ID/Key，那么您可以尝试暂时使用*该*应用程序的凭据。这将需要使用新凭据重建或重新配置您的客户端应用程序。我们不推荐这种方法，因为为了进行有效的测试，您肯定希望跟踪哪个应用程序正在对 LE 进行哪些调用；但是，如果您已经拥有一组用于狭窄部署的测试应用程序的应用程序凭据，例如，您可以切换到共享这些凭据。

**在 DEV2 LE 上使用来自 DEV1 LE 的 LMSID/Key 凭据**. 应用于应用程序密钥的“域限制”对应于在部署时分配给 LE 实例的 LMSID/密钥凭据。如果您的 DEV2 实例仅在升级场景中被浮动以测试集成，并且这些集成已经（以它们的测试形式）都针对您的 DEV1 实例工作，那么您的 DEV2 LE 可能使用相同的 LMSID/Key 凭证作为您的 DEV1 LE。这意味着 DEV2 LE 从 D2L 的密钥工具服务中获取其已知的应用程序凭据列表，它将获得与提供给 DEV1 LE 完全相同的凭据列表。这是最激进的建议，需要 D2L 的支持台参与，并且绝对需要 DEV2 LE 的批准支持联系人的指导——这种部署*可以*对于某些非常特定类型的测试 LMS 实例是有意义的，但它是一个非常大的锤子，因此它可能不是正确的选择。

请注意，如果您无权更改应用程序的代码/配置本身（应用程序凭据已烘焙到应用程序中），则此解决方案是唯一可行的解​​决方案 - 如果您要测试的应用程序*必须*针对 LE运行就像它是 DEV1 实例一样，那么这可能是唯一可能的解决方案，在这种情况下，您可能必须等到升级的 LE 部署在 DEV1 上才能测试您的应用程序。我完全不相信可以将一组授予的应用程序凭据“重新指向”到新的域限制。

**申请新的应用程序 ID/密钥对，并努力加快请求**。授予应用程序 ID/密钥和部署它们的主要延迟在于让相关目标 LMS 域的合作伙伴和/或客户经理批准请求：如果您将您的合作伙伴和/或客户经理与您的情况和/或客户经理联系起来，并且要求他们引导请求，这种延迟可以降低。这将是理想的选择，因为它以预期使用的方式将“适当的渠道”与现有的业务关系一起使用。

为您的新 DEV2 域中的测试应用程序获取一组新的应用程序凭据应该不会花费很长时间，特别是如果您已经建立了现有关系，该关系已通过合作伙伴和/或客户经理获得应用程序凭据。此解决方案仍需要您更改/重新配置您的应用程序。

如果可能的话，你应该走最后一条路。

# c++ - 如何将 RGBQUAD 作为参数传递？

> ID：16175526
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:27:55.327
> 
> 标签：c++, c, visual-studio

作为一个学习练习，我试图将一个 RGBQUAD 作为参数传递给一个只使结构成员变黑的方法。调用“black_quad”时程序崩溃。我哪里错了？

```
void UpdateFields() 
{
    RGBQUAD quad;
    black_quad(&quad);
    /* snip */
}

void black_quad(RGBQUAD* quad) 
{
    quad->rgbBlue = 0;
    quad->rgbGreen = 0;
    quad->rgbRed = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:33:31.833

很难说 - 你的问题似乎出在其他地方。以下代码经过测试和工作 win7 gcc 4.7.??

```
#include <windows.h>

void black_quad(RGBQUAD* quad)
{
    quad->rgbBlue = 0;
    quad->rgbGreen = 0;
    quad->rgbRed = 0;
}
void UpdateFields()
{
    RGBQUAD quad;
    black_quad(&quad);
}

int main()
{
    UpdateFields();
} 
```

# c++ - 快速从矩阵中删除列 C++

> ID：16175527
> 
> 赞同：1
> 
> 时间：2013-04-23T17:28:00.703
> 
> 标签：c++, arrays, matrix, intel, multiplication

假设我们有`A (m*n)`以压缩形式存储的矩阵（一维大小的数组`m*n`- 具有前导维度 - 列）。我需要减少矩阵`A(S)`- 这是由于从`A`. 我可以在循环中轻松地手动完成此操作，但是还有另一种方法 - 使用选择矩阵`I(S)`，它是删除了 1 列或更多列的单位矩阵（对角线上全为零，但对角线为 1）。然后，例如，如果我需要从 中删除第 3 行`A`，我需要在`I(3)`没有第 3 列的情况下形成 -identity 然后`A(3)=A*I(S)`。而且由于我需要 的许多变体`A`，因此我需要所有不同的身份矩阵`I(S)`，并删除不同的列。

我正在考虑这种方式，因为我使用英特尔数学内核库 - 这对于矩阵乘法非常有效。

所以问题是你认为形成新矩阵的最快方法是什么`A(S)`：手工、直接使用`A`或首先形成`I(S)`——问题是如何快速形成这些矩阵——然后相乘`A*I(S)`，或者你可以提出任何其他快速解决方案。

为了说明假设我们有矩阵`A`：

```
1 2 3 

4 5 6 

7 8 9 
```

它存储在数组`A=[1,4,7,2,5,8,3,6,9]. Suppose I need to form`A(2)` 中，即删除第二列。我需要输出：

```
1 3 

4 6 

7 9 
```

在 C++ 中存储为`A_S=[1,4,7,3,6,9]`. 这可以直接在矩阵 A 上完成，这需要`O(n^2)`时间并且对于大型矩阵效率不高。或者我们可以形成`I(2)`：

```
1 0

0 1

0 0 
```

在 c++ 中存储为`I_S = [1,0,0,0,1,0]`. 然后`A(2) = A*I(2)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:50:04.077

`I`我认为如果你的意思是你应该小心使用`identity matrix`。`Identity matrix`通常是方阵，而您使用的通常不是方阵，因为您从原始矩阵中删除了列。让我将转换矩阵称为`T`，而不是`I`。

现在我试图回答你的问题：

> 问题是如何快速形成这些矩阵

所以基于上述假设，`T(2)`应该是：

```
1  0
0  0
0  1 
```

自从

```
1   2  3       1  0     1  3
4   5  6   *   0  0  =  4  6
7   8  9       0  1     7  9 
```

您可以根据删除第二列的情况将`T(2)`与原始`I(3)`（这里是单位矩阵）进行比较。

```
 1  0  0
I(3)  0  1  0
      0  0  1 
```

由于您知道要删除哪一列，因此您将知道用于存储的一维数组的索引范围`I(3)`，在这种情况下，它是`A_I(3) = [1 0 0 0 1 0 0 0 1]`：您知道索引`[3,5]`是第二列，您只需删除这 3 个值，您将得到`T(2)`如上例所示的`A_T(2) = [ 1 0 0 0 0 1]`. 所以想法是，如果您知道要删除原始矩阵的哪一列，您只需从存储原始列映射到的索引范围内的单位矩阵的一维数组中删除值。`[3,5]`在此示例中，您从原始矩阵映射到的`2nd`列中删除值。

现在，您可以使用 Matrix 库进行乘法运算`A`并`A_T(2)`获得结果矩阵。

# ios - UISlider 默认

> ID：16175534
> 
> 赞同：2
> 
> 时间：2013-04-23T17:28:21.893
> 
> 标签：ios, default, uislider

在故事板编辑器中，可以为 UISlider 设置“当前”值。在滑块的值更改后，有什么方法可以将此值用作重置值？如果没有，我想我会创建一个属性来存储默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:34:47.337

1.  在情节提要中，将滑块添加到 ViewController
2.  在你的头文件中，创建一个 IBOutlet UISlider *slider;
3.  在情节提要中，将此 IBOutlet 连接到您的滑块
4.  单击滑块，转到属性检查器并将值设置为所需的值。

要在程序执行期间访问各个点的滑块值，请使用该`value`属性获取滑块的当前值。

这是文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html)

# python-3.x - 强制一次只运行一个模块的功能

> ID：16175535
> 
> 赞同：0
> 
> 时间：2013-04-23T17:28:25.783
> 
> 标签：python-3.x, multiprocessing

我正在使用 Python，并且我有一个 C++ 程序的 swig 接口。这个程序是一个科学应用程序，它也处理一个数据库。我们用它来获取和保存数据，但问题是它不支持并行调用。这意味着如果我尝试从 Python 生成不同的线程并从该应用程序调用函数，它将引发异常。

所以我的问题是：有没有办法“强制”一个python模块一次只执行一次函数？

正如我通常所说的，我们会从这个程序中获取一些数据，而不是进行一些数字运算并将新数据保存到程序保存的数据库中。我想到的是以某种方式包装这个模块，使函数一次只运行一个，所以我实际上可以在程序的数字运算部分使用更多线程，而不必担心有两个（或更多）函数该模块同时执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:43:50.170

您正在寻找的是一个[lock](http://en.wikipedia.org/wiki/Lock_%28computer_science%29)。如果您使用的是 python `threading`，您可以简单地使用[threading.Lock](http://docs.python.org/2/library/threading.html#threading.Lock)。

在一次只能运行一次的函数中，在进入时获取锁并`return`在函数结束或结束之前释放它。

# php - 使用 MySQL 查询返回正确数据时遇到问题

> ID：16175543
> 
> 赞同：1
> 
> 时间：2013-04-23T17:28:46.203
> 
> 标签：php, mysql

我正在研究为什么看似正确的 mysql 查询没有返回正确的结果。我已经得到了几个文件来查看，我相信这个（下面的代码）是罪魁祸首所在。不幸的是，我没有所有的文件（为朋友工作），所以我很难做任何 var_dumps 或测试。相反，我创建了自己的模拟搜索脚本，它返回正确的结果——尽管查询是相同的。

原来的：

```
function build_generic_where_clause ($the_query_string) {
    $where_clauses = Array();
    $the_query_string = $this->db->quote($the_query_string);
    array_push($where_clauses, "accounts.name like '%$the_query_string%'");
    if (is_numeric($the_query_string)) {
        array_push($where_clauses, "accounts.phone_alternate like '%$the_query_string%'");
        array_push($where_clauses, "accounts.phone_fax like '%$the_query_string%'");
        array_push($where_clauses, "accounts.phone_office like '%$the_query_string%'");
    }

    $the_where = "";
    foreach($where_clauses as $clause)
    {
        if(!empty($the_where)) $the_where .= " or ";
        $the_where .= $clause;
    }

    return $the_where;
} 
```

但是这个失败了，因为我会说两个项目，例如：

```
Newstate Inc.
Welders of New York 
```

并且上面的查询只返回 Newstate。但是，如果我在搜索框中键入 %new，则会返回两个项目。我需要得到它，只要输入“新”就会返回它们。

我用于测试的模拟查询：

```
public static function getAccount($the_query_string){
    $con = drake::connectDB();

    $query = "select * from accounts where name like '%$the_query_string%'";

    $result = $con->query($query);
    while($row = $result->fetch_array()){
        echo($row['name']).'<br />';    
    }
} 
```

并且在搜索“新”时成功返回这两个项目。我最好的猜测是 $this->db->quote($the_query_string); 正在向搜索字符串添加一些东西，以某种方式改变它，因此它不会准确返回查询的内容。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:36:35.480

我想你可以使用

```
$the_query_string = mysql_real_escape_string($the_query_string) 
```

消除任何意外或特殊的角色要逃脱。希望这会对你有所帮助。请在评论中告诉我状态。

# objective-c - RestKit .2 将图像发布到 Web 服务 - 空实体错误

> ID：16175547
> 
> 赞同：2
> 
> 时间：2013-04-23T17:28:56.317
> 
> 标签：objective-c, ios6, restkit, restkit-0.20

我正在使用 RestKit 将图像发布到 Web 服务，并且它们发布得很好，服务器发回了 200。发生的事情是我收到以下错误：

> `***`由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：实体（null）与键“resource_updated_at”的键值编码不兼容。

这是我用来发布图像的方法。我希望有一些明显的东西我错过了。我发现一个类似的帖子提到核心数据堆栈可能没有正确设置，但我不确定如何。我正在使用 RestKit 发布其他标准表单数据，它返回和映射就好了。

```
- (void)postImagesFromInventory:(NSManagedObject *)inventory {
    NSLog(@"######## postImagesFromInventory ########");

    // if there are photos that aren't synced, post the first one
    int postingImageNumber = 0;

    RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:BASE_URL]];

    // send for each image in inventory
    for (Image *image in [[inventory valueForKey:@"image"] allObjects]) {
        postingImageNumber = postingImageNumber + 1;
        [SVProgressHUD setStatus:[NSString stringWithFormat:@"Posting image %d of %d for inventory %@", postingImageNumber, [[inventory valueForKey:@"image"] allObjects].count, [inventory valueForKey:@"asset_name"]]];

        // make sure it's not already synced
        if (![image valueForKey:@"synced"]) {
            NSLog(@"-------------------------------------");
            NSLog(@"need to post image for inventory %@",[inventory valueForKey:@"inventory_id"]);

            NSURL *imagePath = [NSURL URLWithString:[image valueForKey:@"path"]];

            // need to get my image from Asset Library
            ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
            __block NSNumber *imageSize = nil;
            __block UIImage *myImage = nil;
            __block Image *blockImage = nil;
            __block NSData *blockImageData = nil;

            [library assetForURL:imagePath resultBlock:^(ALAsset *asset) {
                myImage = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
                imageSize = [NSNumber numberWithLongLong:asset.defaultRepresentation.size];

                // make the image available on callback
                blockImage = image;

                NSData *imageData = UIImageJPEGRepresentation(myImage, 1.0);
                blockImageData = imageData;

                NSMutableURLRequest *request = [manager multipartFormRequestWithObject:inventory method:RKRequestMethodPOST path:IMAGES_ENDPOINT parameters:@{@"auth_token":@"my_auth_token",@"image" : @{@"asset_inventory_id":[inventory valueForKey:@"inventory_id"],@"resource_content_type":@"image/jpeg",@"resource_file_name":[NSString stringWithFormat:@"%@_image.jpg",[inventory valueForKey:@"asset_name"]],@"resource_file_size": [NSString stringWithFormat:@"%@",imageSize]}} constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
               [formData appendPartWithFileData:imageData
                                           name:@"image[resource]"
                                       fileName:[NSString stringWithFormat:@"%@_image.jpg",[inventory valueForKey:@"asset_name"]]
                                       mimeType:@"image/jpeg"];
            }];

            RKEntityMapping *mapping = [RKEntityMapping mappingForEntityForName:@"Image" inManagedObjectStore:_managedStore];
            [mapping addAttributeMappingsFromDictionary:@{@"resource_updated_at":@"resource_updated_at"}];
            [mapping mappingForDestinationKeyPath:@"image"];

            RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:mapping pathPattern:nil keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

            [manager addResponseDescriptor:responseDescriptor];

            RKObjectRequestOperation *operation = [manager objectRequestOperationWithRequest:request success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                NSLog(@"operation successful");
            } failure:^(RKObjectRequestOperation *operation, NSError *error) {
                NSLog(@"operation failed");
            }];

            // queue up the operation
            [manager enqueueObjectRequestOperation:operation];

            // library access failure
            } failureBlock:^(NSError *error) {
                NSLog(@"error : %@", error);
            }];
        }
    }
} 
```

另外，这是`init`我设置 的方法`RKManagedObjectStore`，以防万一。

```
- (PSNDataSync *)init {
    RKLogConfigureByName("RestKit/Network*", RKLogLevelDebug);
    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelDebug);

    PSNAppDelegate *appDelegate = (PSNAppDelegate *)[[UIApplication sharedApplication] delegate];
    _context = [appDelegate managedObjectContext];
    _managedStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:[appDelegate managedObjectModel]];

    _currentInventory = nil;
    _imagesArray = nil;

    // initialize imagesArray for loading inventoryCollectionView
    _imagesArray = [[NSMutableArray alloc]init];

    return self;
} 
```

这是`Image class`代表`Core Data Entity`

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Inventory;

@interface Image : NSManagedObject

@property (nonatomic, retain) NSString * path;
@property (nonatomic, retain) NSString * resource_updated_at;
@property (nonatomic, retain) NSNumber * synced;
@property (nonatomic, retain) Inventory *inventory;

@end 
```

我会提出这可能不是最好的代码的免责声明。但如果你看到错误，请告诉我:]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:31:47.030

我有完全相同的错误。您需要使用 RKObjectRequestOperation (RKManagedObjectRequestOperation) 的托管版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:27:55.050

由于您正在处理核心数据，因此您需要使用 RKManagedObjectRequestOperation 而不是 RKObjectRequestOperation。

# windows-7 - |程序文件文件夹| 评估为 AppData\Local\Programs\

> ID：16175553
> 
> 赞同：2
> 
> 时间：2013-04-23T17:29:17.130
> 
> 标签：windows-7, wix, uac

我正在实现一个支持在 WiX 中使用`WixUI_Advanced`. 当我*为这台机器上的所有用户选择安装时*-`[ProgamFilesFolder]`评估为`AppData\Local\Programs`而不是`C:\Program Files`.

请注意，仅在选择目标目录之后才会出现 UAC 提升提示 - 我认为这是由于 UAC 虚拟化而导致的此问题。

我怎样才能获得真正的 Program Files 目录？
另一种解决方法可能是 - 更改对话框顺序以在功能选择对话框之后显示目录选择对话框，其下一个按钮调用 UAC 提升提示。或者在评估目标位置
之前提示 UAC 提升，但仅当用户选择了每台计算机安装时。`[ProgramFilesFolder]`

**更新**：目前我使用：`[%ProgramFiles]`- 环境变量（在 x64 上安装 x86 时中断）

**更新二**：现在我使用的注册表值是`ProgramFilesDir`：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:24:23.250

`WixUI_Advanced`取决于配置应用程序安装位置的`Directory`元素。`Id='APPLICATIONFOLDER'`然后使用该`ALLUSERS`属性配置安装到正确位置的路径。[WixUI_Advanced Dialog Set](http://wix.sourceforge.net/manual-wix3/WixUI_advanced.htm)帮助主题中详细介绍了其中的很多内容。这些都不会改变`ProgramFilesFolder`.

PS：`[%ProgramFiles]`环境是访问`ProgramFilesFolder`. 相反，您可以使用`[ProgramFilesFolder]`获取 Windows 安装程序中的默认值。

# javascript - .contentWindow.document.body.outerHTML 不工作？

> ID：16175554
> 
> 赞同：1
> 
> 时间：2013-04-23T17:29:17.270
> 
> 标签：javascript, iframe

我有以下 JavaScript 代码：

```
myFrame.src = pathToCourseContents + "/otherComponents/myData.htm"; 
```

此行执行后：

```
myFrame.src equals "http://myServer.com/otherComponents/myData.htm" 
```

如果我将这个 URL 地址放入 FireFox，我会得到一个包含信息的网页。

我想要得到的是字符串形式的 myData.htm 的内容。

我认为这会起作用：

```
var myString = myFrame.contentWindow.document.body.outerHTML 
```

但 myFrame.contentWindow 似乎是空白的。

我究竟做错了什么？

是否有 JavaScript 代码可以以字符串的形式获取 html 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:36:43.463

你可以尝试使用这个：

```
document.getElementsByTagName("html")[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:43:58.863

`contentWindow`当您从不同的域加载 url 时，通常是空白的。出于安全考虑，禁止访问此类内容。如果这是您的情况，那么您注定要失败（嗯，有一些解决方法，例如通过为容器页面提供服务的服务器进行代理，以便浏览器认为它们来自同一个域；或者在两个文件中设置 document.domain，如果您控制它们两者；等等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:04:52.170

如果您没有遇到相同的源策略，则可能是您尝试在节点存在之前访问它们（即在 DOM 准备好之前）。

`<iframe>`一个简单的解决方案是在*load*事件上添加一个事件侦听器。

```
myFrame.addEventListener('load', function () { // add a listener
    console.log( // do what you want
        '<iframe> loaded\n',
        myFrame.contentWindow,   // the <iframe>'s Window
        myFrame.contentDocument, // the <iframe>'s document
        '\n',
        myFrame.contentDocument.body.outerHTML
    );
});
// set src after so that listener exists before event raised
myFrame.src = 'http://fiddle.jshell.net/'; // same origin pass 
```

[**示例小提琴**](http://jsfiddle.net/nDYhp/2/)

`.contentWindow`每次刷新时都会清除 get ，因此您无法向其添加页面加载侦听器，这将为您提供所需的结果，但您可以在其中侦听其他事件`<iframe>`。

# ruby-on-rails - rails, rspec, shoulda validate_presence_of 失败，setter 调用了两次

> ID：16175559
> 
> 赞同：2
> 
> 时间：2013-04-23T17:29:36.877
> 
> 标签：ruby-on-rails, rspec2, shoulda

在带有公司模型的简单 Rails 应用程序中

```
class Company < ActiveRecord::Base

  # Attributes
  attr_accessible :name

  validates_presence_of :name

  def name=(s)
    self[:name] = s.upcase
  end
end 
```

运行以下规范文件时。它失败。

```
require 'spec_helper'

describe Company do

  before :each do
    @company = Company.new({name: 'my_company'})
  end

  it "should validate presence of name" do
    @company.should validate_presence_of(:name)
  end

end 
```

调试显示 name=(s) 方法被调用了两次，一次使用 'my_company'，一次使用 nil。

我不明白为什么第二个电话会发生 nill。以下是使用的宝石：

```
gem 'rails', '3.2.13'
gem 'mysql2' 

group :development, :test do
  gem 'rspec-rails', '2.11.0' 
  gem 'shoulda-matchers', :require => false
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:33:21.423

*   shoulda 旨在用于编写文档中提到的一个班轮规格，例如
    它 { should validate_presence_of(:name)}
    it { should validate_presence_of(:name).with_message(/is not optional/) }

    因此，您可以以更具可读性的方式编写规范，如下所示：

    ```
    描述“验证”做  
     它{应该 validate_presence_of(:name)}  
     结尾
    ```

*   关于您对 name 字段的两个分配的问题：

    1.  第一个分配是在您的规范的 before(:each) 块中完成的，并且
    2.  **应该存在验证器尝试为您指定要验证存在的所有属性分配 nil 值，**如果您的模型是**:name**。
        您覆盖的 name= 方法发生在这个 nil 值上，它会引发错误，因为它不能大写 nil。出于同样的原因，上面显示的一种衬里规格也会失败。要解决此问题，您可以将 setter 方法更改为**s.try(:upcase)**。所以它可以在 nil 值上工作并且不会引起任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:38:42.660

原因可能是你`name`在新`name`方法中提到的。

最好使用`write_attribute`方法作为您提到的文档。

将其解读为：

```
 def name=(s)
   write_attribute(:name, s.upcase)
 end 
```

# php - in_array 第一次在复选框中工作

> ID：16175561
> 
> 赞同：0
> 
> 时间：2013-04-23T17:29:42.990
> 
> 标签：php, arrays

一个奇怪的问题。这是具有一些值的数组

```
$et_er_facilities = ( [0] => Swimming pool 
[1] => Squash court 
[2] => Mini market 
[3] => Playground ) 
```

如果我添加一些复选框来检查上面数组中存在的值，我正在尝试使用 in_array 函数。该功能适用​​于第一次检查，但在所有接下来的检查中，它不起作用。这是我的代码。

```
<input type="checkbox" id="facilities1" value="Swimming pool" name="et_er_facilities[]" <?php if (in_array("Swimming pool", $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities4" value="Squash court" name="et_er_facilities[]" <?php if (in_array('Squash court', $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities5" value="Mini market" name="et_er_facilities[]" <?php if (in_array('Mini market', $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities7" value="Playground" name="et_er_facilities[]" <?php if (in_array('Playground', $et_er_facilities)) {?>checked="checked"<?php }?>> 
```

这就是它目前的工作方式。如果在上面的数组中，第一个值为 Playground，则复选框将仅选择 Playground，不会自动选择其他值。

在所有情况下，它只匹配数组的第一个值并选择相应的复选框，但如果它们也匹配，则不会选择其他值。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:34:13.690

将数组初始化为

```
$et_er_facilities =  array(
    0 => 'Swimming pool',
    1 => 'Squash court', 
    2 => 'Mini market', 
    3 => 'Playground'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:53:30.780

我修改了你的代码

```
<html>
<body>
<?php
*$et_er_facilities = array("Swimming pool","Squash court","Mini market","Playground" );* // most prob this was wrong in ur code

?>
<form>
<input type="checkbox" id="facilities1" value="Swimming pool" name="et_er_facilities[]"         <?php if (in_array("Swimming pool", $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities4" value="Squash court" name="et_er_facilities[]" <?php if (in_array('Squash court', $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities5" value="Mini market" name="et_er_facilities[]" <?php if (in_array('Mini market', $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities7" value="Playground" name="et_er_facilities[]" <?php if (in_array('Playground', $et_er_facilities)) {?>checked="checked"<?php }?>>
</form>
</body>
</html> 
```

1.  数组中没有游泳池 $et_er_facilities = array("壁球场","迷你市场","游乐场"); 它给出了 4 个复选框，除了第一个之外，所有复选框都被选中

2.  使用数组中的游泳池 $et_er_facilities = array("游泳池","壁球场","迷你市场","游乐场"); 它选中了所有 4 个复选框

# actionscript-3 - 我需要帮助理解 Actionscript 3 中的父/子关系

> ID：16175562
> 
> 赞同：0
> 
> 时间：2013-04-23T17:29:45.583
> 
> 标签：actionscript-3, flash, parent-child

我正在为我教的一个高中课程编写一些游戏设计教程，并且在我用来教学和学习的几个不同文件中一直卡在同一个问题上。

错误（我确实搜索过）是 2025“必须是调用者的孩子”错误。为了更好地理解这一点，我创建了一个文件，如下所示。我会指出这是一个基于 .fla 的框架代码，我们所做的其他工作是在一个 .as 文件中。好歹：

```
fireButton.addEventListener(MouseEvent.CLICK, fire_fn);
addEventListener(Event.ENTER_FRAME, moveShots);

var speed:int = 20;
var shot:Shot;
var shots:Array=new Array;

function fire_fn(e:Event) {
    shot = new Shot();
    shot.x = gun.x+shot.width;
    shot.y = gun.y;
    addChild(shot);
    shots.push(shot);
}

function moveShots(e:Event) {
    for(var i:int=shots.length-1; i>=0; i--) {
        shots[i].x += speed;
        if(shots[i].x > stage.stageWidth -50) {
           removeChild(shots[i]);
        }
       }
} 
```

我知道问题在于 removeChild 行，但我不清楚应该如何编写或者（可能更重要的是）为什么。欢迎任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:35:07.517

您没有从阵列中删除镜头。所以下一次循环时，条件将再次满足，但镜头已经被移除。您需要从镜头阵列中拼接镜头；

尝试这个 ：

```
function moveShots(e:Event) {
    for(var i:int=shots.length-1; i>=0; i--) {
        shots[i].x += speed;
        if(shots[i].x > stage.stageWidth -50) {
           removeChild(shots[i]);
           shots.splice(i,1);
        }
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:37:34.073

首先，您应该进行一些错误处理。要从父级中删除子级，该子级实际上必须是该父级的子级。国家不能将被绑架的孩子从其真正的父母身边带走，只能带走绑架者（可怕的类比，但它是有道理的）。

所以...

```
if ( shots[i] is DisplayObject && ( shots[i] as DisplayObject ).parent == this ) {
    this.removeChild( shots[i] );
} 
```

这将确保子对象实际上是一个 DisplayObject，并且它的父对象就是您要从中删除它的对象。不过，这并不是真正导致您的问题的原因。移除子节点后，您还需要将其从阵列中移除。

```
if ( shots[i] is DisplayObject && ( shots[i] as DisplayObject ).parent == this ) {
    this.removeChild( shots[i] );
    shots.splice( i, 1 );
} 
```

# android - 将多个条目插入SQLite数据库android

> ID：16175563
> 
> 赞同：3
> 
> 时间：2013-04-23T17:29:48.880
> 
> 标签：android, android-sqlite

我在将多个条目插入 Android SQLite 数据库时遇到问题。我用 db.execQuery() 像这样插入：

```
String insertString = "INSERT INTO coordinates 
    SELECT 0 AS _id, 5 AS associated_route_id, 38.88945 AS latidude, -77.034821 AS longitude 
    UNION SELECT 1, 5, 38.889671, -77.034912 
    UNION SELECT 2, 5, 38.890041, -77.035316"
database.execSQL(insertString); 
```

我稍后使用相同的数据库进行拉取，如下所示：

```
String[] columns = new String[] { "latitude", "longitude" };
Cursor cursor = db.query("coordinates", columns,
                "associated_route_id=5", null, null, null,
                null);

cursor.moveToFirst();
if (cursor.getCount() == 0)
// No rows in cursor 
```

我使用 db.insert(table, null, contentValues) 让它工作，但替换了插入以使事情更快。

问题是光标是空的，这使得插入似乎不起作用。为什么它不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T19:41:07.940

回答我自己的问题。

我使用了不同的方法来插入条目。我使用 Trinimon 的建议来使用 db.compileStatement，但增加插入时间最多的是添加：

```
db.startTransaction();
//insert lots of stuff...
database.setTransactionSuccessful();
database.endTransaction(); 
```

插入 500 个条目的时间从 45 秒减少到 300 毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:41:48.950

插入记录最快的方法是使用带有绑定变量的预处理语句，因为语句不需要一直编译，例如：

```
String sql = "INSERT INTO coordinates (?, ?, ?, ?)";
SQLiteStatement statement = db.compileStatement(sql);

// loop through records or arrays and assign values
for (...) { 
    long id = ...
    long associated_route_id = ...
    double latidude = ...
    double longitude = ...

    statement.bindLong  (1, id);
    statement.bindLong  (2, associated_route_id);
    statement.bindDouble(3, latidude);
    statement.bindDouble(4, longitude);

    statement .execute();
} 
```

希望这会有所帮助......干杯！

# cakephp - CakePHP 2：模型关联中的多级连接

> ID：16175569
> 
> 赞同：1
> 
> 时间：2013-04-23T17:30:18.467
> 
> 标签：cakephp, cakephp-2.0

假设我有 3 个模型。

1.  用户（系统的用户）
2.  申请人（有关每个用户的更多详细信息，例如地址、电话、兴趣位置等）
3.  职位（在申请表中，我只将感兴趣的职位存储为 position_id，这是职位描述的位置）

这是我的模型 php 文件。

```
class User extends AppModel { 
  public $hasOne = 'Applicant'; 
}

class Applicant extends AppModel { 
  public $belongsTo = array('User', 'Position'); 
}

class Position extends AppModel { 
  public $hasMany = 'Applicant';
} 
```

这是我的 UsersController.php

```
class UsersController extedns AppController {
  public function index() {
    $this->User->find('all');
  {
} 
```

执行 /users/index 时，我在 SQL 转储中得到如下 SQL 语句。

```
select *
from users
  left outer join applicants
    on users.id = applicants.user_id 
```

但这就是我需要的。

```
select *
from users
  left outer join applicants
    on users.id = applicants.user_id
  left outer join positions
    on positions.id = applicants.position_id 
```

那么在 CakePHP 中要做什么才能得到这种结果。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:33:49.050

我看到两个选项：使用查找的递归属性来包含模型的关联： [http ://book.cakephp.org/2.0/fr/models/model-attributes.html#recursive](http://book.cakephp.org/2.0/fr/models/model-attributes.html#recursive)

使用可包含行为来执行相同的技巧，但对请求中的连接有更多控制：http: [//book.cakephp.org/2.0/fr/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/fr/core-libraries/behaviors/containable.html)

第一个解决方案非常简单，只需将 'recursive' => 2 添加到您的 find('all') 中，第二个解决方案有点冗长，但性能要好得多。

# java - 导入 com.example.TimeCalculator.R 无法解析

> ID：16175570
> 
> 赞同：0
> 
> 时间：2013-04-23T17:30:31.917
> 
> 标签：java, android

我有一个无法解决的导入。我已经重命名了我的包和 src 文件中的示例。

我的包的名称是 Time Calculator，我的 com.example 的名称是 com.example.TimeCalculator。我已经重命名了我的 androidmanifest 并且 XML 文件是这样的

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.TimeCalculator"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.TimeCalculator.MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我不确定为什么无法解决此导入，我基本上只是重命名了以前的项目。抱歉，我对 android 和 eclipse 很陌生。

```
import com.example.TimeCalculator.R; 
```

这是无法解决的导入。

只是补充一下，我在 Eclipse 底部的控制台中收到此错误

[2013-04-23 18:19:38 - 时间计算器] Android 需要编译器合规级别 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:38:53.040

应该使用该导入，因为它是允许访问项目资源（如字符串和布局）的生成类。导入未解决可能有多种原因。如果您查看 gen 文件夹并打开与您的应用程序包名称匹配的包，您会看到生成的 R 类吗？如果您这样做，则意味着项目正在正确构建，并且您的导入语句中可能没有正确的完全限定路径。如果您在 gen 文件夹中看不到您的 R 文件，这意味着由于某种原因您的应用程序没有正确编译，因此没有生成 R 文件。导入仍然正确，但您必须解决将存在于 res 文件夹中某处的真正问题。查找 Eclipse 内“问题”视图中列出的问题。

在您最后一次编辑之后，您应该查看已经发布的这个问题[Android 需要编译器合规级别 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目属性](https://stackoverflow.com/questions/7637144/android-requires-compiler-compliance-level-5-0-or-6-0-found-1-7-instead-plea)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:14:39.897

正如 Bobbake4 所说，我再重复一遍，右键单击您的项目文件夹，选择 Android 工具 > 修复项目属性，这将解决您的问题。其实是builder没有正确设置引起的问题，你也可以更新你的jdk。

# iphone - 更改 Grouped UITableViewCell 曲线角度

> ID：16175579
> 
> 赞同：0
> 
> 时间：2013-04-23T17:30:54.557
> 
> 标签：iphone, ios, objective-c, uitableview

我想知道改变圆角`UITableViewCell`（分组）的半径的最佳方法是什么。

我尝试使用在另一篇文章中看到的`setCornerRadius`and`setMaskToBounds`方法来完成此操作，但似乎我无法降低每个单元格弯曲超过某个阈值的程度。（如果我设置`setCornerRadius`为零，角落仍然是圆的）。

我是新手，所以我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:55:18.780

您需要为单元格背景创建带有定制图像的自定义单元格（如果您愿意，也可以使用圆角子视图）。[这里](http://www.cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)有一个很好的指南，它描述了表格视图单元格的结构以及如何管理每个单元格的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:16:22.670

如果您是新手并且不想深入自定义 UITableViewCell （您尝试做的事情有点痛苦，因为您必须跟踪单元格位置，无论是顶部还是中间，或底部单元格并分配自定义背景图像以赋予其虚假的“分组”效果，同时允许您自定义角半径）。

[PrettyKit ( https://github.com/vicpenap/PrettyKit](https://github.com/vicpenap/PrettyKit) )是一个易于使用的库，但要注意阴影等 - 如果您有很多复杂的内容，单元格可能会变慢。不过，对于简单的表格视图，它应该就足够了。如果您认为 PrettyKit 的性能不能满足您的需求，我们可以进入自定义单元格，请告诉我。

# wcf - 如何在 ASP.NET MVC 4 中托管活动 STS？

> ID：16175581
> 
> 赞同：0
> 
> 时间：2013-04-23T17:31:00.963
> 
> 标签：wcf, asp.net-mvc-4, wif, sts-securitytokenservice

我试图在我的 ASP.NET MVC 4 站点中托管一个主动 STS 端点（它已经成功地托管了一个被动 STS 端点）。出于某种原因，WCF 运行时似乎没有“处理”对我的服务 URI 的调用。

在我的 RouteConfig.cs 文件中，我有这个：

```
routes.Add(new ServiceRoute("tokens", new MyTokenServiceHostFactory(), typeof(MyTokenServiceConfiguration))); 
```

我相信，这是在没有 .svc 文件的情况下托管服务的正确方法。在我的 web.config 文件中，我有这个：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <!--(behaviors etc)-->
    <services>
        <service name="System.ServiceModel.Security.WSTrustServiceContract">
            <endpoint address="" binding="ws2007HttpBinding" contract="System.ServiceModel.Security.IWSTrust13SyncContract"/>
        </service>
    </services>
</system.serviceModel> 
```

这块配置可以成功地用于自托管服务，我唯一改变的是端点的地址。

当我尝试调用该服务时，我得到：

> System.ServiceModel.Security.MessageSecurityException：从另一方收到不安全或不正确安全的故障。有关故障代码和详细信息，请参阅内部 FaultException。---> System.ServiceModel.FaultException：无法处理消息。这很可能是因为操作“ [http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue](http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue) ”不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为绑定之间不匹配。

登录的服务跟踪是：

> System.ServiceModel.EndpointNotFoundException 没有通道可以接受带有操作“ [http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue](http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue) ”的消息。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:24:21.147

看看这里

[https://github.com/thinktecture/Thinktecture.IdentityServer.v2/blob/master/src/Libraries/Thinktecture.IdentityServer.Protocols/WSTrust/TokenServiceHostFactory.cs](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/blob/master/src/Libraries/Thinktecture.IdentityServer.Protocols/WSTrust/TokenServiceHostFactory.cs)

和

[https://github.com/thinktecture/Thinktecture.IdentityServer.v2/blob/master/src/OnPremise/WebSite/App_Start/ProtocolConfig.cs](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/blob/master/src/OnPremise/WebSite/App_Start/ProtocolConfig.cs)

对于工作样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T06:43:35.263

使用标准 ASP.NET 提供程序的 ASP.NET MVC 4.5 中基于声明的标识，

[http://chris.59north.com/post/2013/03/27/Claims-based-identities-in-ASPNET-MVC-45-using-the-standard-ASPNET-providers.aspx](http://chris.59north.com/post/2013/03/27/Claims-based-identities-in-ASPNET-MVC-45-using-the-standard-ASPNET-providers.aspx)

使用 VS2012 & ASP.NET MVC 构建一个简单的自定义 STS

[http://chris.59north.com/post/2013/04/09/Building-a-simple-custom-STS-using-VS2012-ASPNET-MVC.aspx](http://chris.59north.com/post/2013/04/09/Building-a-simple-custom-STS-using-VS2012-ASPNET-MVC.aspx)

# php - php 库从视频问题生成缩略图

> ID：16175582
> 
> 赞同：1
> 
> 时间：2013-04-23T17:31:02.180
> 
> 标签：php, ffmpeg

我正在尝试使用库从文件创建`thumbnail`图像。`MP4``ffmpeg` `php`

我有

```
 $ffmpeg ="/usr/bin/ffmpeg";

 $image_source_path = '/project/a1/a1.mp4';

 $ALL_PLACE_WIDTH = 300;
 $ALL_PLACE_HEIGHT = 270;

 $image_cmd = " -r 1 -r 0.0001 -s ".$ALL_PLACE_WIDTH."x".$ALL_PLACE_HEIGHT." -f image2 ";

 $dest_image_path = '/project/a1/foo-%03d.png';

 $str_command= $ffmpeg  ." -i " . $image_source_path . $image_cmd .$dest_image_path;

 shell_exec($str_command); 
```

我只需要视频的第一帧，但我的代码会生成 2 个视频图像，这不是我想要的。谁能帮我解决这个问题？

非常感谢！

# javascript - 如何为每个自动生成的按钮分配不同的 ID？

> ID：16175585
> 
> 赞同：0
> 
> 时间：2013-04-23T17:31:19.683
> 
> 标签：javascript, jquery

我使用 Facebook API 从用户那里获取所有组，然后使用 FQL 的另一个函数为每个组创建不同的 div，并为每个 div 分配一个按钮，该按钮链接到另一个页面，例如：

```
$('.groupButton').click(function() {  
  window.location ='anotherpage.html?groupid=' + groupid;
}); 
```

但是在每个按钮上，它都会分配最后一个按钮的 groupid。我不知道哪里错了。

2个功能：

```
 function getGroupsIds(){
            document.getElementById('content_text').innerHTML = "";
            FB.api('/me/groups',function(resp){
                for (var i=0, l=resp.data.length; i<l; i++){ 
                getGroupInfo(resp.data[i].id);
                }
            });
        }

        function getGroupInfo(groupid){
            FB.api({
                method: 'fql.query',
                query: 'Select name, description, gid, pic_cover from group where gid=' + groupid
            }, function(resp){
                var content_text = document.getElementById('content_text');
                var group = new Array(); 
                for (var i=0, l=resp.length; i<l; i++) 
                {

                    groupinput = document.createElement('button');
                    groupinput.className = "groupButton";            
                    groupinput.innerHTML = "Vizualise";

                    $('.groupButton').click(function() {  
                    window.location ='pages/appviz.html?groupid=' + groupid;
                    });

                    groupdiv.appendChild(groupinput);
                    content_text.appendChild(groupdiv);

                }
            });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:40:59.537

从哪里获得 groupid？不清楚。您可以将按钮中的 groupid 分配为 id。然后在单击按钮时获取值。

```
$('.groupButton').click(function() {
groupid = this.id;
window.location ='anotherpage.html?groupid=' + groupid;
}); 
```

输入会像

```
<input type='button' id='1' value='Profile' class='groupButton' /> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:39:12.310

很可能只是从循环内部删除以下代码

```
 $('.groupButton').click(function() {  
                window.location ='pages/appviz.html?groupid=' + groupid;
                }); 
```

并把它放在函数之外`function getGroupInfo(groupid)`，因为点击函数只是做动作。尝试让我们知道它是否有效。

```
function getGroupInfo(groupid){
            FB.api({
                method: 'fql.query',
                query: 'Select name, description, gid, pic_cover from group where gid=' + groupid
            }, function(resp){
                var content_text = document.getElementById('content_text');
                var group = new Array(); 
                for (var i=0, l=resp.length; i<l; i++) 
                {

                    groupinput = document.createElement('button');
                    groupinput.className = "groupButton";            
                    groupinput.innerHTML = "Vizualise";
                    groupinput.id = "g"+groupid;

                    groupdiv.appendChild(groupinput);
                    content_text.appendChild(groupdiv);

                }
            });
    }

$('.groupButton').click(function() {  
groupid = this.id;
 window.location ='pages/appviz.html?groupid=' + groupid.substr(1);
}); 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:28:07.320

好吧，我使用了 javascript，它确实有效。

```
 groupinput.onclick = function(){ window.location.replace('pages/appviz.html?groupid=' + groupid);}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:35:56.627

您在 for 循环中反复重新分配点击处理程序。这导致`groupButton`该类的所有按钮导航到`groupid`您在循环中处理的最后一个。

```
for (var i=0, l=resp.length; i<l; i++) {
    // this gets reassigned resp.length times
    $('.groupButton').click(function() {
        window.location ='pages/appviz.html?groupid=' + groupid;
    }
} 
```

你可能想要的是

```
function getGroupInfo(groupid){
    FB.api({
        method: 'fql.query',
        query: 'Select name, description, gid, pic_cover from group where gid=' + groupid
    },
    function(resp) {
        ...
        for() { ... }

        groupdiv.appendChild(groupinput);
        content_text.appendChild(groupdiv);

        // assign click handler after building the elements
        $('.groupButton').click(function() {
            window.location = 'pages/appviz.html?groupid=' + this.id;
        });
    } 
```

是具有该类`$('.groupButton')`的所有元素的集合`groupButton`（请参阅[类选择器](http://api.jquery.com/class-selector/)）。所以你需要`this.id`获取`id`你点击的按钮实例。

# java - Java 和 JavaScript 套接字通信

> ID：16175591
> 
> 赞同：0
> 
> 时间：2013-04-23T17:31:44.043
> 
> 标签：java, javascript, sockets, websocket

我正在使用 Java DJ 项目库创建浏览器。我需要创建一个从浏览器（客户端）到预定义服务器的持久性套接字连接。我想将服务器 IP 地址和端口放在浏览器端（硬编码）将与该服务器连接。套接字连接可以由 Java 或 JavaScript 创建。我想从以下 2 选项中选择任何选项。

1.  如果我使用 java 创建套接字连接，那么必须有一种方法可以使用来自 JavaScript 的连接发送数据。我有一个可以做这件事的小程序。您可以在此链接查看解决方案 >> [http://stephengware.com/proj/javasocketbridge/](http://stephengware.com/proj/javasocketbridge/) 但我不想再使用小程序了。我想从 JavaScript 调用该 Java 套接字连接，反之亦然，并在不将小程序添加到页面中的情况下发送数据。我只想调用 javascript 函数来发送将使用该 Java 套接字的日期。

2.  或者我想使用 JavaScript 创建那个连接，但它应该是持久性的。但是如果我这样做了，那么应该从 Java 使用该连接来发送日期。

所以请你告诉我一些问题的答案...

1.  我应该在 01 或 02 之间应用哪种方法（如上所述）？为什么？
2.  怎么做？谁能给我一些代码来做到这一点？

如果有人回答我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:23:31.767

# html - JQuery 移动应用程序多页 - 重新加载页面

> ID：16175592
> 
> 赞同：1
> 
> 时间：2013-04-23T17:31:47.577
> 
> 标签：html, cordova, jquery-mobile

我正在使用 Jquery Mobile + html5 + PhoneGap 开发应用程序...我正在使用多页模板...我所有应用程序的页面都在同一个 .html 中...类似这样的东西：

```
<!--********* HOME *************-->

<div data-role="page" id="home">
<div data-role="content">
.....
</div>
<div data-role="footer" data-position="fixed" id="footer">
<a href="#menu" data-role="button" dataicon="home" data-transition="fade" id="credits"> </a>
</div>
</div>
<!--********* HOME *************-->

<!--********* MENU *************-->

<div data-role="page" id="home">
<div data-role="content">
.....
</div>
<div data-role="footer" data-position="fixed" id="footer">
<a href="#menu" data-role="button" dataicon="home" data-transition="fade" id="credits"> </a>
</div>
</div>
<!--********* MENU *************--> 
```

等等...

在某些页面中，我实现了一些动画......比如可折叠元素的自动打开

```
$(document).on('pageshow', '#mostra_menu, #regina_menu, #cultura_menu, #restauro_menu', function(){       
$('.ui-collapsible').children().next().hide();
$('.ui-collapsible').children().next().slideDown(300);
}); 
```

这很好用......问题是当我重新加载同一页面时 - #mostra_menu，...... - 可折叠仍然打开......

在我有动画 .gif 的其他页面中存在同样的问题......当我第一次加载页面时，动画正常启动......如果我导航应用程序然后用 .gif 重新加载页面，动画不会开始...

我认为问题出在多页html中……它被加载了一次……所以所有重新访问的页面都没有重新加载……

我该如何解决？！

# php - htaccess 重写规则给出没有指定的输入文件

> ID：16175596
> 
> 赞同：0
> 
> 时间：2013-04-23T17:32:02.617
> 
> 标签：php, .htaccess, mod-rewrite

我在这里有我的应用程序：http: [//testarea.livo.co.il/views/widget.php](http://testarea.livo.co.il/views/widget.php)和以下 htaccess：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|static|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

当浏览到widget.php（上图）时，我得到“没有指定输入文件”。

我托管在 godaddy 上，所以我无法访问 httpd.conf。我也在 PHP 5.3 Fast-CGI 上运行（如果它提供任何有价值的信息）

.htaccess 文件中的错误是什么？

# java - 如何在球衣中使用嵌套的多部分/混合 mime 类型

> ID：16175597
> 
> 赞同：1
> 
> 时间：2013-04-23T17:32:05.027
> 
> 标签：java, web-services, rest, jersey

我已经google了很长时间，但没有答案。我希望有一个人可以帮助我。

比如说，我在 jersey 服务器端收到了一个 multipart/mixed 包，它的结构如下所示：

```
多部分/混合
   |
   |---标题：文本/纯文本
   |
   |---文字内容：text/plain
   |
   |---图片内容：多部分/混合
   | |
   | |--- 图片名称：text/plain
   | |
   | |--- 图片正文：image/jpeg
   |
   |…………

```

**使用bodypart.getEntityAs(Class clazz)**方法可以轻松处理前两个 bodypart 。但是对于嵌套的多部分，我只能得到一个 BodyPartEntity 并通过它得到一个输入流。显然，通过输入流获取图片名称和图片正文并不容易。**那么，我怎样才能获得原始的多部分/混合实体，或者在球衣中处理嵌套的多部分/混合类型的正确方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:44:01.003

最后我发现了错误。嵌套的多部分必须在标题中有边界，并且与父级不同。

# powershell - Powershell：GetType 导致下游出现奇怪的行为

> ID：16175603
> 
> 赞同：3
> 
> 时间：2013-04-23T17:32:34.753
> 
> 标签：powershell

当我在 Powershell（安装了 v3）中观察到一些奇怪的行为时，我正在整理一个简单的演示脚本。

```
$file = ls 'C:\temp' | Where-Object {$_.Extension -eq '.txt'}
$file.FullName

#$file.GetType()

dir 'c:\temp' 
```

相当良性对吧？它按预期运行（假设您有 ac:\temp 目录，其中包含 txt 文件）。但是，当您取消注释 $file.GetType() 行时，它后面的 dir 行不再提供简单的目录列表。相反，它将给出目录中所有项目的详细列表。我尝试通过管道将 GetType 设置为 out-null，然后目录再次正常工作，但我似乎无法对 GetType 执行操作并随后列出目录。

所以我很好奇调用 GetType 会导致下游其他 cmdlet 发生变化的原因是什么？谁能解释造成它的机制？

此外，我尝试了其他一些方法，发现一些导致问题的原因（如 GetAccessControl）而其他方法则没有（如 GetHashCode）。所以这不仅仅是通过调用一个方法，某些方法会导致这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:57:38.523

在我看来，这只是默认格式化程序变得混乱并切换到格式列表显示而不是格式表的问题。

如果您取消注释 GetType()，然后将目录列表显式传输到 FT，它就会恢复正常。

# file - Win Server 2003 R2 / QNAP Turbo NAS TS-459 Pro II - 崩溃后：部分用户无法修改某些文件

> ID：16175604
> 
> 赞同：0
> 
> 时间：2013-04-23T17:32:35.977
> 
> 标签：file, save, windows-server-2003, windows-server-2003-r2

前几天我们的 Windows Server 2003 R2 Server / QNAP Turbo NAS TS-459 Pro II 已经关机，因为有人不小心插到电源线里（到现在，还没有打开任何文件）。现在一些用户（现在我看不到模式）在修改文件（主要是 .ppt）后遇到问题。在同一文件夹中以其他名称另存为新文件是没有问题的。

有谁知道，可能出了什么问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T07:29:19.920

如果你有一个资源管理器预览窗格并且文件被突出显示，你就会遇到这个问题。禁用预览窗格或取消选择文件。

# java - java.lang.NullPointerException：servlet 永远不会执行？

> ID：16175608
> 
> 赞同：0
> 
> 时间：2013-04-23T17:32:52.600
> 
> 标签：java, jsp, maven, tomcat, servlets

我正在学习如何使用 Eclipse 和 Tomcat 做一个 Maven 动态 Web 应用程序。该应用程序在没有 servlet 的情况下工作，但是当我尝试在我的代码中引入它时出现该错误。我调试发现问题。我认为，这些是相关的点：

1.  为了能够部署一个war文件，我在maven中添加了**具有提供范围**的依赖“servlet-api”，如下所示： [How to compile a servlet for Tomcat in command line？错误：包 javax.servlet 不存在](https://stackoverflow.com/questions/14104937/how-to-compile-a-servlet-for-tomcat-in-command-line-error-package-javax-servle)

2.  错误出现在 MostrarLibros.jsp 中。如果我使用没有 servlet 的下一个代码，一切正常：

    ```
    listaDeLibros = Libro.buscarTodos(); 
    ```

    但是，如果我将该行更改为下面提供的行，则会出现异常。实际上，变量“listaDeCategorias”在运行后为空（我调试了它）：

    ```
    listaDeCategorias = (List<String>) request.getAttribute("listaDeCategorias"); 
    ```

3.  我在 Servlet ControladorLibros.java 中添加了一个断点，但调试器永远不会停在那里。代码：

    ```
    package com.arquitecturajava;

    import java.io.IOException;
    import java.util.List;
    import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class ControladorLibros extends HttpServlet {
        protected void doGet(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {
            RequestDispatcher despachador = null;
            if (request.getServletPath().equals("/MostrarLibros.do")) {
                List<Libro> listaDeLibros = Libro.buscarTodos();
                List<String> listaDeCategorias = Libro.buscarTodasLasCategorias();
                request.setAttribute("listaDeLibros", listaDeLibros);
                request.setAttribute("listaDeCategorias", listaDeCategorias);
                despachador = request.getRequestDispatcher("MostrarLibros.jsp");
            } else if ...

            (...)

            request.setAttribute("listaDeLibros", listaDeLibros);
                request.setAttribute("listaDeCategorias", listaDeCategorias);
                despachador =    request.
                        getRequestDispatcher("MostrarLibros.jsp");
            }
            despachador.forward(request, response);
        }
    } 
    ```

4 - web.xml：

```
<servlet>
    <description></description>
    <display-name>ControladorLibros</display-name>
    <servlet-name>ControladorLibros</servlet-name>
    <servlet-class>com.arquitecturajava.ControladorLibros</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>ControladorLibros</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

5 - 项目结构：

![Eclipse中的项目结构](https://i.stack.imgur.com/4BYqx.jpg)

是因为应用程序找不到 servlet 吗？在这种情况下，为什么找不到？

# zend-framework2 - 如何在 Zend Framework 2 中创建一个包罗万象的路线

> ID：16175615
> 
> 赞同：0
> 
> 时间：2013-04-23T17:33:21.353
> 
> 标签：zend-framework2

我正在为 ZF2 创建一个 CMS 模块，我希望它不必在 url 中包含“/page”或类似内容。因此，例如，印记页面的 url 将是[http://www.yourdomain.com/imprint](http://www.yourdomain.com/imprint)

你会如何建议这样做？我考虑了以下方法，但我无法让它们中的任何一个按我想要的方式工作：

1.  有一个连接到我的 PageController 并将 url 路径作为参数传递的包罗万象的路由。这里的问题是让包罗万象的路线与现有路线配合得很好。这也意味着所有应该是 404 错误的页面现在都将通过 PageController 路由，如果在数据库中找不到该页面，则它必须处理 404 页面。

    或者

2.  观察事件 EVENT_DISPATCH_ERROR 并在页面存在于数据库中时从中恢复。我可以捕捉到该事件，但我不知道如何从中恢复并触发 PageController。

    或者

3.  每当创建、更新或删除 cms 页面标题时，都要重建所有 cms 路由的缓存。这似乎是一个干净的解决方案，但除了将缓存构建为 config/autoload 目录中的 php 配置文件之外，我不确定如何继续。

对于如何实现这一点的任何想法，我将不胜感激。理想情况下，该解决方案也将能够处理由 CMS 提供支持的主页 (/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:23:39.850

我最终结合了选项#1 和#3。我在模块配置文件中设置了一条包罗万象的路线：

```
return array(
    // Relative to app root
    'routeCacheFile' => 'data/cache/cmsRoutes',
    'router' => array(
        'routes' => array(
            'cmsPage' => array(
                'type' => 'segment',
                'priority' => 100,
                'options' => array(
                    'route' => '/:pageRoute',
                    'constraints' => array(
                        'pageRoute' => 'dynamically-populated-by-bootstrap'
                    ),
                    'defaults' => array(
                        'controller' => 'pages',
                        'action' => 'view'
                    )
                )
            )
        ),
        // ...
    ); 
```

第一个配置选项是缓存文件。稍后再谈。请注意，该路线是只有一个元素的分段路线`:pageRoute`。然后有一个约束，我们将像这样填写 Module.php：

```
public function getConfig()
{
    $config = include __DIR__ . '/config/module.config.php';

    // Get the cms page routes from a cache file
    if (!empty($config['routeCacheFile'])) {
        $cachedRoutes = file_get_contents($config['routeCacheFile']);

        $config['router']['routes']['cmsPage']['options']
            ['constraints']['pageRoute'] = $cachedRoutes;
    }

    return $config;
} 
```

我不只是包含并返回配置数组，而是获取 routeCacheFile 设置，获取文件的内容，然后使用它们来替换“动态填充由引导程序”约束。缓存文件包含所有已发布路由的简单管道分隔列表（更多内容见下文），如下所示：`about|staff|some/longer/route|terms-of-service`关于此的一个好处是我们不需要连接到数据库来路由请求。

我不会对最后一点的代码感到厌烦，但是每次我的 PageController 保存页面时，它都会触发一个服务类，该类会查找所有已发布的路由并将它们写入配置中的缓存文件。

您如何看待这种方法？它不会破坏任何现有路由（我使用优先级设置来设置路由匹配的顺序），它不需要数据库查找来路由请求，也不需要任何错误条件的滥用。缺点：对文件系统有依赖性，这使得单元测试变得更加困难。也许我可以改用 Zend\Cache。看起来分段路由约束使用正则表达式。这可能会对性能造成一些影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:01:14.763

我个人会采取不同的方法。

选项 1 肯定会起作用，但我会创建一种新型路由器 (CmsRouter)，然后我们可以创建一个优先于其他静态路由的路由。

该路由可以检查数据库中已知页面/ slug 的列表，甚至更好地使用一些智能缓存来加快查找速度。

我当然不会使用方法 2)，因为您在完全没有错误的情况下使用错误条件，我会避免这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T23:09:46.093

我使用主机名路由器创建了一个包罗万象：

```
'wildcard' => array(
    'type' => 'Hostname',
    'may_terminate' => true,
    'options' => array(
        'route' => ':subdomain.:domain.:tld',
        'defaults' => array(
            '__NAMESPACE__' => 'ModName\Controller',
            'controller'    => 'ModName',
            'action'        => 'index'
        ),
    ),
), 
```

您可能希望将此与能够更改操作的调度事件结合起来。为了解决类似的问题，我附上了`SharedListenerAggregateInterface`以下内容：

```
public function attachShared(SharedEventManagerInterface $sharedManager)
{
    $this->listeners[] = $sharedManager->attach('ModName\Controller\ModNameController', MvcEvent::EVENT_DISPATCH, array($this, 'changeAction'), 10);
}

public function changeAction(\Zend\Mvc\MvcEvent $event)
{
    if (/* criteria for action foo */) {
        $event->getRouteMatch()->setParam('action','foo');
    } else if (/* criteria for action bar */) {
        $event->getRouteMatch()->setParam('action','bar');
    }
} 
```

因为这是一个 MvcEvent，您可以访问服务管理器，因此您几乎可以做任何事情，包括调用数据库来检查路由是否有效。

# cucumber - Cucumber步骤中的观点有多重要？

> ID：16175623
> 
> 赞同：0
> 
> 时间：2013-04-23T17:33:47.193
> 
> 标签：cucumber

我想知道在描述非人类代理时，黄瓜步骤是否更适合以第三人称而不是第一人称编写的读者。我觉得更少的代词清楚谁在做什么。

```
Scenario: Monitor notifies admin for healthcheck failure.
  Given I am a monitor
  When I retrieve a failed healthcheck message
  Then I notifies the admin

Scenario: Monitor notifies admin for healthcheck failure.
  Given there is a monitor
  When the monitor retrieves a failed healthcheck message
  Then the monitor notifies the admin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:43:33.640

它根本没有任何区别。=p

```
Scenario: Monitor notifies admin of healthcheck failure.
  Given I am a monitor
  When I retrieve a failed healthcheck message
  Then I should notify an admin

Scenario: Monitor notifies admin for healthcheck failure.
  Given there is a monitor
  When it retrieves a failed healthcheck message
  Then it should notify an admin 
```

这只是你喜欢写它的方式。=p

# java - 图像滑动视图

> ID：16175626
> 
> 赞同：2
> 
> 时间：2013-04-23T17:33:54.527
> 
> 标签：java, android, android-layout, listview, layout

我正在搜索图片库应用程序的视图。我搜索并找到了[滑动视图](http://developer.android.com/design/patterns/swipe-views.html)文章，但找不到确切的解决方案。我正在寻找如下图所示的视图。

![图像视图](https://i.stack.imgur.com/fQGKy.jpg)

我知道要实现顶部面板，我必须使用 ActionBarSherlock，因为 ActionBar 不支持 Android 2.3。但是他们如何实现显示图像。并且在有人单击图像后，它将启动新的 Activity。

我试图用 ListView 来实现，但比我想象的要难。我认为有一个简单的方法，但不知道如何搜索它。任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T05:05:11.793

您展示的图片是gridview 的一个示例。可以使用布局文件中的 GridView 和 Adapter 将图像作为 Grid 的项目来实现。此外，可以使用 FrameLayout 放置每个图像上的底部半透明条。我在我的应用程序中实现了同样的事情。

在 GridView 上查找一些示例。

# jquery - 如何控制固定定位的三层菜单逻辑

> ID：16175632
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:13.777
> 
> 标签：jquery, menu

我正在尝试设计一种使用 jQuery 管理三层菜单的方法。菜单中的每一层都是一个水平列表，随后的层显示在前一层的下方。菜单中的所有级别都有`position:"fixed"`，因此它们在 HTML 树中的相对位置在很大程度上是不相关的。

然而，每一层在任何时候的垂直位置取决于有多少层是可见的，并且它们在给定区域内总是看起来垂直居中（它们定义的位置彼此不相关）。

为了说明，可能的配置如下：

```
 ________________________________________________________________
    |                   |                        |                   |
    |                   |                        |  Level A visible  |
    |                   |     Level A visible    |                   |
    |  Level A visible  |                        |  Level B visible  |
    |                   |  Level B or C visible  |                   |
    |                   |                        |  Level C visible  |
    |___________________|________________________|___________________| 
```

尽管上图包含三个部分，但菜单可能处于基本上四种状态：

1.  可见的水平
2.  A & B 可见
3.  空调
4.  A、B 和 C

    ```
     _______________________
    |           |           |
    |     A     |   A + B   |
    |___________|___________|
    |           |           |
    |   A + C   | A + B + C |
    |___________|___________| 
    ```

我正在努力解决的是决定如何控制状态的逻辑。我以前没有使用过 OOP，但感觉它可能是正确的方法——尽管我不太确定我将如何开始。

我不指望任何人用勺子喂我代码，但是一些关于“正确”方法的指针会很棒。有没有人有这种问题的经验？

# java - 以间隔发布进度的最佳方式是什么？（谈论性能）

> ID：16175635
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:20.387
> 
> 标签：java, android, performance

我有一个应用程序可以下载和解压缩一些文件，并且我每秒都会使用 System.currentTimeMillis() 发布我的进度来比较经过的时间。

我的问题是代码似乎为每个写入的字节或解压缩的存档做了太多工作，获取当前时间并与开始时间进行比较，以显示与否。我的问题是有没有更好的方法可以在不损失性能的情况下做到这一点？

我比较下载时间的代码：

```
protected void afterWrite(int n) throws IOException {
    super.afterWrite(n);

    if (DownloadAndUnzipService.canceled) {
        throw new IOException();
    }

    if (MainViewActivity.isPaused) {
        throw new IOException();
    }
    bytesWritten += n;

    showTime = System.currentTimeMillis();

    if (showTime - startTime > 1000) {

        Bundle resultData = new Bundle();
        resultData.putLong("bytesWritten", bytesWritten);
        resultData.putString("typeDownload", typeDownload);
        resultData.putInt("imageIndex", index);
        receiver.send(Constants.UPDATE_PROGRESS, resultData);

        startTime = showTime;
    }

} 
```

我比较解压缩时间的代码：

```
...
    if (showTime - startTime > 1000) {
                            Bundle resultData = new Bundle();
                            resultData.putInt("progress", (int) (filesWritten * 100 / fileLength));
                            resultData.putInt("imageIndex", i);
                            resultData.putString("typeDownload", typeDownload);
                            receiver.send(Constants.UPDATE_ZIP_PROGRESS, resultData);

                            startTime = showTime;
                        }

                        ze = zis.getNextEntry();
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:48:18.807

使用`Timer`API。计时器允许在指定的时间后重复执行特定的代码集。可能适合您的情况。

参考[安卓文档](http://developer.android.com/reference/java/util/Timer.html)

```
Timer t = new Timer();
t.scheduleAtFixedRate(new TimerTask() {

    @Override
    public void run() {
        //Called each time when 1000 milliseconds (1 second) (the period parameter)
    }

},
//Set how long before to start calling the TimerTask (in milliseconds)
0,
//Set the amount of time between each execution (in milliseconds)
1000); 
```

# javascript - 使用 addthis.com 的社交分享按钮

> ID：16175636
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:23.357
> 
> 标签：javascript, html, css, addthis

嘿，所以我选择使用 addthis.com 提供的社交分享小部件，基本上是因为我认为它们会让我的生活更轻松，而且它们免费提供大量数据分析。我通过它们进入我的视线，毫无问题地为 facebook 添加了元标签，一切都在主页上完美运行。共享的工作方式正是我喜欢的方式。但是，然后我从网站其他地方的主页导航了一种方式，它们没有出现（我将它们嵌入到顶部面板中，该面板出现在网站上的每个时代，所有相同的 php 脚本打印和 css 格式化）。现在我查看了主页和其他的源代码，似乎添加它不会将所需的数据推送到主页以外的任何地方的标签内。如果其他人遇到这个问题或可以提出解决方案，我会很伤心。
[这里的主页](http://ec2-50-17-75-42.compute-1.amazonaws.com/)和这里的[问题页面，](http://ec2-50-17-75-42.compute-1.amazonaws.com/series.php?series=Arctic_Air)或者只是从主页导航到任何其他页面以查看问题页面。任何有关为什么会发生这种情况或如何解决的帮助都会很棒。

注意：几个小时前我还在 addthis.com 论坛上发布了类似的帖子，但因为它很烂/我什至找不到我的帖子，所以我请求他们帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:14:20.653

第 51 行的 funcs.js 中似乎存在 javascript 错误。虽然这可能是与 AddThis 无关的错误，但它可能会阻止执行其他 javascript。Javascript 错误可能会产生“级联”效应。

```
SyntaxError: JSON.parse: unexpected keyword - var jsonData = JSON.parse(response);
funcs.js line 51 
```

有关此的更多信息：[一个 Javascript 函数中的错误导致其他函数停止工作](https://stackoverflow.com/questions/11516346/error-in-one-javascript-function-causes-others-to-stop-working)

# vb.net - 如何将我们的数据从使用标签传输到列表框？

> ID：16175644
> 
> 赞同：1
> 
> 时间：2013-04-23T17:34:33.207
> 
> 标签：vb.net

我之前有一个作品，我在标签上做出了答案。例如，我们点击添加后，文本框中的数字移动到标签框。

例如。

```
Dim sQuoteNumber As String
    sQuoteNumber = txtQuoteNumber.Text
    lblQuoteOutputAnswer.Text = sQuoteNumber 
```

这次我必须将答案移到列表框中。我该怎么做 ？我只是更改`lblQuoteOutputAnswer.Text`为列表框吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:37:26.950

您必须将文本添加到集合中：

```
listBox1.Items.Add(sQuoteNumber) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:40:58.600

您可以像这样向 ListBox 添加文本：

```
ListItem item = new ListItem();
item.Text = MyText;
item.Value = MyValue;
MyListBox.Items.Add(item); 
```

# c++ - 在色彩空间之间转换图像

> ID：16175646
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:44.777
> 
> 标签：c++, visual-studio-2010, image, opencv, image-processing

在我的书中，将图像从一种颜色空间转换为另一种颜色空间的方法是`cv::cvtColor()`. 但是，我在命名空间中找不到该方法`cv`！也就是说，我用的是VS 2010 express，intellisense也不知道这个方法！

我使用的是opencv 2.4，那么这个方法是移动到另一个命名空间还是什么的？CV中没有的请看下面的方法

```
#include <iostream>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace std;
using namespace cv;

int main()
{
    Mat m;
    //cv::cvtColor(Mat,Mat,int)  is not there!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:43:31.597

你可以看看`imgproc.hpp`：

```
#include <opencv2\imgproc\imgproc.hpp> 
```

您可能还需要在链接器输入中添加`opencv_imgproc24x.lib`或`opencv_imgproc24xd.lib`

# java - 使用 JsonPath 将文本转换为 json

> ID：16175648
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:45.717
> 
> 标签：java, json, algorithm, jsonpath

我得到了一个包含大量文本和相应 JsonPath 符号的 csv 文件。例子 ：

```
Alfa,$.patients[1].name,String   
id-123,$.patients[1].id,String    
severe,$.patients[1].condition,String  
Beta,$.patients[2].name,String  
id-321,$.patients[2].id,String  
normal,$.patients[2].condition,String 
```

我需要在 Java 中将文本转换为 Json 对象。任何人都可以为此建议一种算法或任何现有库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:37:19.237

对于一个非常简单的 json 对象：

将键值对放在地图中 -

```
 HashMap<String, String> map = new HashMap<String, String> ();
    map.put(KEY, VALUE); 
```

生成 Json 字符串

```
StringBuilder json = new StringBuilder("{");
for (Map.Entry < String, String > entry: map.entrySet()) {
    json.append(entry.getKey() + ":" + entry.getValue()).append(",");
}
//removes the last "," which is unnecessary
json.deleteCharAt(json.lastIndexOf(","));
json.append("}");
return json.toString(); 
```

尝试 json-lib 或 Gson 以获得更复杂的。

# r - 从创建它的函数中命名 data.frame 列

> ID：16175650
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:51.197
> 
> 标签：r, for-loop, dataframe

下面的代码使用我的滞后数据创建了一个数据框，但为了修复名称，我目前必须使用第二个“for”命令显式创建名称。我想在创建新列的函数内移动列名创建。那可能吗？

例如，我不想调用 MyLag(Close[,1], i) 我想调用一个新函数 MyLagNamed(Close[,1], i,"C") 并返回列并设置名称，如示例代码。

那可能吗？

谢谢

```
MyLag <- function(x, k) c(rep(NA, k), x[1:(length(x)-k)] )

MaxColumns = 6

Close = structure(list(Close = c(12.8125, 12.97, 13.345, 13.625, 13.4375, 
                     13.6875, 13.75, 13.625, 13.3125, 13.875, 13.875, 13.9375, 13.875, 
                     14.3125, 14.6875, 14.375, 14.4075, 14.095, 14.4375, 14.375)), 
                     .Names = "Close", row.names = c(NA, -20L), class = "data.frame")

for (i in 1:MaxColumns) Close[i+1] <- MyLag(Close[,1], i)

for (i in 2:MaxColumns) colnames(Close)[i] = paste("MyLag(C,",i,")",sep="") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:48:20.443

只需使用花括号在循环`{}`内移动命名参数。`for`

```
for (i in 1:MaxColumns) {
    Close[i+1] <- MyLag(Close[,1], i)
    colnames(Close)[i+1] = paste("MyLag(C,",i+1,")",sep="")
} 
```

但这似乎是一种不好的做事方式。这并没有*那么*好，但我们还包括一个函数参数来命名列，如下所示：

```
MyLag <- function( x , k , name = "C"){
    j <- 0:6
    k <- k[ , ncol(k) ]
    df <- data.frame( lapply( j , function(x) (c( rep( NA , x ) , k ))[1:length(k)] ) )
    names( df ) <- c( "Close" , paste("MyLag(" , name , 1:x , ")",sep="") )
    return(df)
} 
```

这给了我们一个 data.frame，它看起来像：

```
head( MyLag( 6 , Close , "High" ) , n = 7 )
    Close MyLag(High1) MyLag(High2) MyLag(High3) MyLag(High4) MyLag(High5) MyLag(High6)
1 12.8125           NA           NA           NA           NA           NA           NA
2 12.9700      12.8125           NA           NA           NA           NA           NA
3 13.3450      12.9700      12.8125           NA           NA           NA           NA
4 13.6250      13.3450      12.9700      12.8125           NA           NA           NA
5 13.4375      13.6250      13.3450      12.9700      12.8125           NA           NA
6 13.6875      13.4375      13.6250      13.3450      12.9700      12.8125           NA
7 13.7500      13.6875      13.4375      13.6250      13.3450      12.9700      12.8125 
```

# php - 服务方法是否应该向您的控制器返回任何内容

> ID：16175653
> 
> 赞同：0
> 
> 时间：2013-04-23T17:34:59.820
> 
> 标签：php, model-view-controller

在 MVC 应用程序中，您的服务方法是否应该向控制器返回任何内容？

假设我有一个`Recognition`服务，它有一个`register($firstName, $lastName...)`方法应该返回任何东西给我的控制器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:48:06.020

如果`register`不工作会怎样？它会抛出异常吗？您确实希望有某种信号表明某事不起作用或操作已成功完成。

获得成功/失败的`true/false`回报将有助于向您表明某些事情已经完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T08:55:46.310

不，服务不应向控制器返回任何内容。模型的状态应该由视图检查。如果控制器执行的操作以某种方式失败，它只会影响视图。

控制器负责改变模型的状态。**不是**为了将所述状态传递给视图，也不是为了对模型状态的变化做出反应。

# php - CodeIgniter Directory Helper 仅显示文件夹

> ID：16175654
> 
> 赞同：0
> 
> 时间：2013-04-23T17:35:00.293
> 
> 标签：php, codeigniter, directory, helper

Directory Helper - directory_map 列出了数组中的文件夹和文件。这很棒，但不完全是我想要的。有没有办法只列出文件夹？并跳过文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:41:24.630

顾名思义，它是一个目录映射器 - 映射所有内容。它需要三个参数，一个是路径，第二个是子文件夹深度，第三个是是否需要显示隐藏文件/文件夹。

您可以做的只是迭代助手提供的数组并`if is_dir()`在列出之前进行。只需向您的自定义助手添加一个简单的功能。

# c++ - 在 C++ (Windows) 中自动检测 Arduino

> ID：16175655
> 
> 赞同：1
> 
> 时间：2013-04-23T17:35:04.600
> 
> 标签：c++, windows, usb, arduino, usbserial

我正在尝试编写一个 C++ 程序，它会自动检测所有连接的 arduino 的 COM 端口号。

我已经发现我可以获得所有可用 COM 端口设备的列表，`HKLM/HARDWARE/DEVICEMAP/SERIALCOMM`但没有关于正在那里监听的设备的信息。有没有办法获得例如 GUID 或设备描述来检测哪个是 Arduino？我看到的唯一另一种方法是尝试向每个端口发送一些东西并监听先前定义的响应。谢谢您的反馈 ：）

编辑：我想我应该提到我使用 g++ 作为编译器和 MinGW。syam 已链接我这个[如何自动检测 Arduino COM 端口？](https://stackoverflow.com/questions/3293889/how-to-auto-detect-arduino-com-port)这似乎实现了我想要的，但它是用 C# 编写的，当我需要纯 Win32 时使用.Net 特定的 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:07:58.853

串行端口设备不是即插即用，因此您无法获取设备描述或 GUID。所以使用串口技术自动检测 Arduino 是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:51:12.290

根据[这篇文章](https://decibel.ni.com/content/docs/DOC-6743)，你可以做到这一点的一种方法是查看`HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services`：

1.  其中`HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services`有几个相关的子键：`usbaudio`, `usbccgb`, `usbehci`, `usbprint`,`usbscan`等等。Arduino 可能会出现在`usbccgb`,中`usbehci`，但老实说，我不确定。
2.  在这些键中，您正在查找名称为数字的值，例如`0`,`1`等。
3.  值为设备ID

您可以从 windows 设备管理器中找到任何设备的设备 ID：右键单击设备，选择属性，然后选择详细信息选项卡。显然，您可以以编程方式打开必要的注册表项，以查找 Arduino 设备的设备 ID。对于您的问题，这种方法的问题在于您的 Arduino 检测器必须针对您计划使用的每个 Arduino 进行预编程。

# regex - nginx 位置正则表达式 - 字符类和匹配范围

> ID：16175665
> 
> 赞同：11
> 
> 时间：2013-04-23T17:35:27.337
> 
> 标签：regex, nginx, pcre

我正在尝试为`/s/<4-6 character string here>`将 4-6 个字符串捕获为 $1 的路径设置一个正则表达式。

我尝试使用以下两个条目，但都失败了

```
location ~ ^/s/([0-9a-zA-Z]){4,6}+$ { ...

location ~ ^/s/([0-9a-zA-Z]{4,6})+$ { ... 
```

第一个出现“未知指令”，第二个出现“pcre_compile（）失败：缺少）”

**编辑**

此位置将提供以下路线：

```
/s/1234 (and I would capture '1234' in $1)
/s/12345 (and I would capture '12345' in $1)
/s/123456 (and I would capture '123456' in $1)
/s/abcd (and I would capture 'abcd' in $1)
/s/abcde (and I would capture 'abcde' in $1)
/s/abcdef (and I would capture 'abcdef' in $1)
/s/a1b2c (and I would capture 'a1b2c' in $1) 
```

此位置不提供以下路线：

```
/s/1
/s/12
/s/123
/s/a
/s/ab
/s/abc
/s/abc1234
/s/12345678 
```

ETC...

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-23T18:10:17.410

如果要捕获 4 到 6 个字符，为什么不将量词放在捕获括号内？

可能是这样的：

```
location ~ "^/s/([0-9a-zA-Z]{4,6})$" {... 
```

花括号用于正则表达式和块控制，您必须用引号（单引号或双引号）将您的正则表达式括起来（<--wiki nginx）

# jquery - 为什么有些代码会执行而有些则不会？

> ID：16175669
> 
> 赞同：0
> 
> 时间：2013-04-23T17:35:41.587
> 
> 标签：jquery

我有以下功能：

```
 scroll: function()
 { 
 console.log( "scrolling..." ); 
 this.blockPlacementEnabled = false
 setTimeout(function() 
  {
   console.log("hello");
   this.blockPlacementEnabled = true 
  }, 200);

 }, 
```

该函数运行完美且没有错误，但是一旦它到达

> this.blockPlacementEnabled = true

该行拒绝运行，而是代码继续，好像我没有调用该行为什么某些函数运行而其他函数不会延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:39:32.460

在`setTimeout`回调内部，`this`指的是`window`，而不是它在 中引用的对象`scroll`。这意味着`blockPlacementEnabled`永远不会`true`在您的对象中设置为。

保留对对象的引用：

```
scroll: function() { 
  console.log( "scrolling..." ); 
  this.blockPlacementEnabled = false;

  var self = this; // reference to the current object
  setTimeout(function() {
    console.log("hello");
    self.blockPlacementEnabled = true; // referencing the current object
  }, 200);
}, 
```

或使用[`.bind` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)。

[了解更多关于`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:38:27.397

您已将该行放在 a 中`setTimeout`，这是异步的。代码将继续以正常的控制流程（从上到下）执行，并在 200 毫秒后`this.blockPlacementEnabled = true`执行。

同样正如一些评论者指出的那样，`this`指的是 中的窗口`setTimeout`，因此您需要保留对此的引用并在设置的超时函数中使用它：

```
scroll: function()
{ 
     var that = this;
     console.log( "scrolling..." ); 
     that.blockPlacementEnabled = false; //<HERE

     setTimeout(function() 
     {
       console.log("hello");
       that.blockPlacementEnabled = true; //<HERE
     }, 200);
}, 
```

# c# - TEXT 字段中的错误 (PostgreSQL) - NHibernate 无法读取它

> ID：16175670
> 
> 赞同：1
> 
> 时间：2013-04-23T17:36:08.833
> 
> 标签：c#, postgresql, nhibernate, blob

我有这个实体：

```
public class Product
{
    public virtual long ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual ProductCategory Category { get; set; }
    public virtual byte[] Image { get; set; }
    public virtual string IsAvaliableToSell { get; set; }
    public virtual DateTime InsertDate { get; set; }
    public virtual DateTime UpdateDate { get; set; }
} 
```

有了这个 Map 类：

```
public ProductMapping()
{
    [...]
    Map(model => model.Image, "fldProductImage")
        .Insert()
        .Update()
        .Nullable()
        .CustomType("Text");
    [...]
 } 
```

当我尝试检索添加到数据库中的产品时，出现错误：

> 无法将“System.String”类型的对象转换为“System.Byte []”类型。

我认为它在我的 Image 属性中。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:29:51.820

***将TEXT***字段类型更改为***BYTEA***类型解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:52:18.947

*造成*这种情况的可能解释是，该`text`类型有一些限制和要求，这些限制和要求没有被共享`bytea`：

*   `text`无法存储空字节，因为系统使用以空字符结尾的字符串；如果您提交字节字符串`abcd\x00efgh`（其中`\x00`是空字节），数据库将存储`abcd`.

*   `text`要求数据在客户端的文本编码中有效。当从客户端发送到服务器时，数据被解释为在 client_encoding 中，并在需要时转换为服务器的文本编码。如果不需要转换，它仍然会被验证。

因此，如果您将一堆字节塞入文本字符串中，您将得到截断的乱码。如果您的客户端使用不同的编码，您可能还会因为编码转换问题而在获取数据时出错。

`bytea`不关心数据的编码是什么，因为它只是服务器的原始字节。不执行转换。因为它是以转义形式发送的，所以它可以包含空字节。您应该始终将二进制数据存储为`bytea`或使用大对象（请参阅`lo`扩展名）。唯一的另一种选择是将其存储为一些文本安全的表示形式，例如，但这在字段中`base64`很少需要。`bytea`

# java - 相同的键不同的减速器（HADOOP）？

> ID：16175672
> 
> 赞同：6
> 
> 时间：2013-04-23T17:36:25.290
> 
> 标签：java, hadoop, mapreduce, key-value, reduce

是否可以在不同的减速器上处理具有相同键的值？从所有映射器中我得到具有相同键的数据，我想用不同的减速器处理它？我的困惑是这本书说所有具有相同键的值都将进入同一个减速器......

```
 mapper1(k1,v1),mapper2(k1,v2),mapper3(k1,v3) and so on... 
```

我不希望所有数据都到同一个减速器……应该是这样的，

```
 reducer1(k1,v1),reducer2(k1,v2).... 
```

让我们说reducer1产生sum1和reducer2产生sum2，我想要那个

```
 sum=sum2+sum1 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:10:21.363

具有相同 key 的数据将始终进入同一个 reducer。但是你可以选择任何你想要的key，所以如果你想让它们去不同的reducer，那么就选择不同的key。

如果你想根据你的 reducer 的输出做一个额外的组合，那么你必须做另一个 MapReduce 作业，将第一个作业的输出作为下一个作业的输入。这可能会很快变得丑陋，因此您可能希望查看[Cascading](http://www.cascading.org/)、[Pig](http://pig.apache.org/)或[Hive](http://hive.apache.org/)来简化事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:36:46.520

您可以为您的案例编写一个自定义分区器，它会覆盖 Hadoop MR 作业的默认分区功能。

更多细节在这里：http: [//developer.yahoo.com/hadoop/tutorial/module5.html#partitioning](http://developer.yahoo.com/hadoop/tutorial/module5.html#partitioning)

# ruby - 有没有办法在 RSpec 中取消存根？

> ID：16175678
> 
> 赞同：48
> 
> 时间：2013-04-23T17:37:02.787
> 
> 标签：ruby, rspec

搜索了 Relish 文档，但没有找到在 RSpec 中取消存根的方法。

这可能吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2014-07-30T00:51:55.120

不推荐使用新`expect`语法`unstub`。你可以做：

```
# stub
allow(SomeClass).to receive(:a_method)

# do something...

# unstub
allow(SomeClass).to receive(:a_method).and_call_original 
```

如果第一个`allow`包含`.with`或块，我相信它仍然会进行到下一个调用，所以下一个`allow`不会清除这些东西。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-23T18:18:42.657

[rspec-mock](https://github.com/rspec/rspec-mocks/blob/master/lib/rspec/mocks/methods.rb)代码表明您可以调用该方法`unstub`。我引用：

```
 # Removes a stub. On a double, the object will no longer respond to
  # `message`. On a real object, the original method (if it exists) is
  # restored.
  #
  # This is rarely used, but can be useful when a stub is set up during a
  # shared `before` hook for the common case, but you want to replace it
  # for a special case.
  def unstub(message)
    ::RSpec::Mocks.space.proxy_for(self).remove_stub(message)
  end 
```

# shell - shell 中的复杂查询

> ID：16175682
> 
> 赞同：0
> 
> 时间：2013-04-23T17:37:09.190
> 
> 标签：shell, debian

我有一个包含许多条目的文件，例如

```
1365593957.914 172.27.15.16 593
1365593969.237 172.27.15.31 1149
1365593979.239 172.27.15.33 5696
1365593989.242 172.27.15.31 1338
1365593999.344 172.27.15.33 21406 
```

这些是时间戳 ip 数据大小。

`$tp1`如果时间戳介于和之间，我需要每个 ip 的所有数据大小的总和`$tp2`。我尝试逐行读取文件，然后在每一行上应用 awk 以检查时间戳范围，但它不起作用。另外，我不知道如何分类地添加这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:51:08.400

```
awk -v tp1=$tp1 -v tp2=$tp2 '$1 > tp1 && $1 < tp2 {
    total[$2] += $3;
}
END {
    for (ip in total)
         print "IP:", ip, "=>", total[ip];
}' 
```

看起来很简单。如果这对你不起作用，它在什么方面不起作用？

*编辑：重新格式化。缩进被忽略了，不知道为什么。*

解释：

*   `-v tp1=$tp1`*意思是“在名为tp1*的 awk 中使用名为*tp1*的 shell 变量的值创建变量。
**   `$1 > tp1 && $1 < tp2`*意思是“仅当第一个字段的值大于tp1*的值且小于*tp2*的值时才执行此代码块。*   `total[$2] += $3;`使用第二个字段（IP 地址）的值作为隐式声明的名为“tota”的数组的数组索引，并添加第三个字段的值。*   AWK 将遍历输入中的所有记录，默认记录是单行文本。对于每条记录，如果条件成立，就会执行上面的代码。*   `END`标识在处理完所有记录后执行的代码块，而不是针对每个（匹配的）输入记录执行。*   `for (ip in total)`标识另一个迭代器：对于存储在数组 named 中的每个值`total`，将数组索引的名称分配给变量 named `ip`，并执行相关的代码块。*   在这种情况下，相关的代码块是`print "IP:", ip, "=>", total[ip];`，它打印字符串“IP:”，一个空格，如果变量命名`ip`（这是一个 IP 地址，用作数组索引名称）的值，另一个空格，字符串“= >”，*另一个*空格，以及存储在`total`由 IP 地址索引的数组中的值。*

 *任何问题？*

# java - jar 查询中的通用文本资源？

> ID：16175684
> 
> 赞同：0
> 
> 时间：2013-04-23T17:37:11.483
> 
> 标签：java, file, jar

我知道这个问题很常见，所以我一直在网上疯狂地寻找解决方案，但无济于事。我只是想从程序 JAR 中加载一个包含一些文本的文件。这是我试图阅读的内容：

```
 String text = "";
            int read, N = 1024 * 1024;
            char[] buffer = new char[N];
            try {

                InputStream is = this.getClass().getClassLoader().getResourceAsStream("/help.txt");
                BufferedReader br = new BufferedReader(new InputStreamReader(is));
                while(true) {
                    read = br.read(buffer, 0, N);
                    text += new String(buffer, 0, read);
                    if(read < N) {
                        break;
                    }
                }
            } catch(Exception ex) {
                ex.printStackTrace();
            } 
```

我不太了解 java/eclipse 构建路径的东西。但我已将 help.txt 放在项目文件夹的根目录中。我目前在执行上面的代码时收到此错误。

```
java.lang.NullPointerException
    at java.io.Reader.<init>(Reader.java:78)
    at java.io.InputStreamReader.<init>(InputStreamReader.java:72)
    at ajax.Gui.printHelp(Gui.java:330)
    at ajax.Gui.onCommand(Gui.java:151)
    at ajax.Gui$1.actionPerformed(Gui.java:130)
    at javax.swing.JTextField.fireActionPerformed(JTextField.java:508)
    at javax.swing.JTextField.postActionEvent(JTextField.java:721)
    at javax.swing.JTextField$NotifyAction.actionPerformed(JTextField.java:836)
    at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1661)
    at javax.swing.JComponent.processKeyBinding(JComponent.java:2870)
    at javax.swing.JComponent.processKeyBindings(JComponent.java:2917)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2833)
    at java.awt.Component.processEvent(Component.java:6282)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1895)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:762)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1027)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:899)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:727)
    at java.awt.Component.dispatchEventImpl(Component.java:4731)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

做什么？一些额外信息：操作系统 = Linux Mint 14 KDE，JDK = JavaSE1.7，IDE = Eclipse

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:55:24.213

您可以尝试不使用“/”

InputStream 是 = this.getClass().getClassLoader().getResourceAsStream("help.txt");

如果您在根目录中添加了文件，这应该可以工作。

或者您可以使用绝对文件路径创建 URL，然后使用

```
InputStream is = url.openStream(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:56:13.453

该方法[`getResourceAsStream`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String))正在返回`null`，因为它找不到文件。

您可以执行以下操作之一：

*   确保文件在类路径中；这就是`getResourceAsStream`搜索的地方。
*   将文件放在一个`resources`目录中，如[本例所示](http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html)。
*   或者您可以将它放在源目录结构中，就像在[这个 stackoverflow 问题](https://stackoverflow.com/questions/573679/open-resource-with-relative-path-in-java)中一样。

此外，您可能希望使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)来构建您的字符串，而不是在`String`之后连接`String`。

# php - 调用未定义函数 exif_imagetype()

> ID：16175702
> 
> 赞同：18
> 
> 时间：2013-04-23T17:38:13.863
> 
> 标签：php, image, file-upload, upload, mime-types

我试图得到`Mime-Type`如下`image-types`：

```
if(!empty($_FILES['uploadfile']['name']) && $_FILES['uploadfile']['error'] == 0){    

    $file = $_FILES['uploadfile']['tmp_name'];
    $file_type = image_type_to_mime_type(exif_imagetype($file));

    switch($file_type){

        // Codes Here

    }

} 
```

但它总是给出错误`Call to undefined function exif_imagetype()`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-23T17:45:29.590

启用以下扩展`php.ini`并重新启动服务器。

> 扩展=php_mbstring.dll
> 扩展=php_exif.dll

然后检查`phpinfo()`它是否设置为开/关

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-09T20:11:20.087

我认为问题在于 PHP 配置和/或版本，例如，在我的情况下：

我们知道[`exif_imagetype()`](http://php.net/manual/es/function.exif-imagetype.php)获取文件路径或资源并返回像 IMAGETYPE_GIF 这样的常量并`image_type_to_mime_type()`获取该常量值并返回字符串`'image/gif'`,`'image/jpeg'`等。这不起作用（缺少函数 exif_imagetype），所以我发现它 `image_type_to_mime_type()`也可以取整数 1 , 2, 3, 17等作为输入，所以使用getimagesize解决了这个问题，它返回一个整数值作为mime类型：

```
function get_image_type ( $filename ) {
    $img = getimagesize( $filename );
    if ( !empty( $img[2] ) )
        return image_type_to_mime_type( $img[2] );
return false;
}

echo get_image_type( 'my_ugly_file.bmp' );
// returns image/x-ms-bmp
echo get_image_type( 'path/pics/boobs.jpg' );
// returns image/jpeg 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T17:49:04.390

将此添加到您的代码中，以便我们知道您拥有的 php 版本，因为此功能仅受（PHP 版本 4 >= 4.3.0，PHP 5）支持。

```
<?php 
    phpinfo(); 
?> 
```

它可能没有安装，您可以添加这部分代码以确保它是：

```
<?php
if (function_exists('exif_imagetype')) {
    echo "This function is installed";
} else {
    echo "It is not";
}
?> 
```

# html - HTML5 元标记和 W3 验证器

> ID：16175706
> 
> 赞同：1
> 
> 时间：2013-04-23T17:38:30.663
> 
> 标签：html, validation

我有一个与 HTLM5 元标记和 W3 Validator 相关的问题。

众所周知，Validator 似乎不喜欢几个元标记。比如这个：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

到目前为止，我已经使用了这个技巧：

```
var meta_elem = document.createElement('meta');
meta_elem.setAttribute('http-equiv', 'X-UA-Compatible');
meta_elem.setAttribute('content', 'IE=edge,chrome=1');
document.getElementsByTagName('head')[0].appendChild(meta_elem); 
```

现在它似乎达到了它的目的。W3 Validator 对元标记的存在一无所知，因此我们不会收到任何抱怨。

但是我仍然有些疑问，所以我的问题来了：这实际上是解决该问题的正确方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T13:37:46.760

首先，您不应该根据 W3C 验证器做出决定。它永远不会给你完整的画面。它应该只用于跟踪语法错误（即 linting）。

谈到这个问题，这并不是一个真正的错误。X- 前缀表示这是特定于供应商的，在这种情况下，它用于 IE（表示以最佳版本呈现）和 Chrome Frame（1 表示打开）。

这不是无效的。

如果验证错误非常困扰您，那么您可以使用以下技术来达到相同的目的，

**1.用PHP设置HTTP头**

```
header('X-UA-Compatible: IE=edge,chrome=1'); 
```

**2\. 使用 .htaccess 文件**

```
Header set X-UA-Compatible "IE=Edge,chrome=1" 
```

**3\. 使用 IIS web.config**

```
<configuration>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="X-UA-Compatible" value="IE=Edge,chrome=1" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
</configuration> 
```

**4\. 使用 C#**

```
Response.AppendHeader("X-UA-Compatible", "IE=edge,chrome=1"); 
```

> 来自 Google 的最新消息称，他们将从 2014 年开始停止使用 Google Chrome Frame。因此，您甚至可以完全摆脱这段代码。

# .htaccess - 使用 htaccess 文件从 url 创建一个 url 变量

> ID：16175709
> 
> 赞同：-3
> 
> 时间：2013-04-23T17:38:44.160
> 
> 标签：.htaccess, mod-rewrite

我想编写一个 htaccess 文件，该文件采用输入链接并将它们转换为输出（这基本上是 /test/ 之后的任何内容并添加 ?location=

**输入**

1.  [http://test.co.uk/test/uk/england/london](http://test.co.uk/test/uk/england/london)
2.  [http://test.co.uk/test/uk/england](http://test.co.uk/test/uk/england)
3.  [http://test.co.uk/test/uk/england/london/soho](http://test.co.uk/test/uk/england/london/soho)

至：（**输出）**

1.  [http://test.co.uk/test/?location=uk/england/london](http://test.co.uk/test/?location=uk/england/london)
2.  [http://test.co.uk/test/?location=uk/england](http://test.co.uk/test/?location=uk/england)
3.  [http://test.co.uk/test/?location=uk/england/london/soho](http://test.co.uk/test/?location=uk/england/london/soho)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:41:02.253

在**测试**目录的 htaccess 文件中，添加：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ?location=$1 [L] 
```

或者在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^test/(.*)$ /test/?location=$1 [L] 
```

# kineticjs - setfill 时添加额外的“嘈杂”像素

> ID：16175710
> 
> 赞同：0
> 
> 时间：2013-04-23T17:38:49.023
> 
> 标签：kineticjs

我遵循了这个例子：[http](http://www.html5canvastutorials.com/labs/html5-canvas-modify-shape-color-on-click/) ://www.html5canvastutorials.com/labs/html5-canvas-modify-shape-color-on-click/为了改变我的鼠标动作形状的颜色。

设置颜色一切正常，但请参见示例：

我有一条蓝线。当我将其转换为红色时，一些蓝色像素仍留在线条的边界上。当我回到蓝色时，会留下一些红色像素。

我的代码如下：

```
recolor: function(newColor){
    // Children are Kinetic.rect or Kinetic.line
    var children=this.group.children;

    for( var k in children){

        if(children[k] instanceof Kinetic.Line)
            children[k].setStroke(newColor);
        else
            children[k].setFill(newColor);
    }
    this.group.draw();
} 
```

这是一个屏幕截图（正常和放大）：

![截屏](https://i.stack.imgur.com/MJL0Y.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:07:15.807

虽然我不知道发生了什么会导致这样的错误，但您可以试试这个：

```
recolor: function(newColor){
    // Children are Kinetic.rect or Kinetic.line
    var children=this.group.children;

    for( var k in children){

        if(children[k] instanceof Kinetic.Line)
            children[k] = children[k].clone({stroke: newColor});
        else
            children[k] = children[k].clone({fill: newColor});
    }
    this.group.draw();
    this.group.getLayer().draw();
} 
```

这只是克隆您的对象并将它们替换为在配置中有单个更改的对象。如果这不能解决您的问题，那么这不是 kineticJS 的问题。

# html - 使用氚移动html元素

> ID：16175714
> 
> 赞同：3
> 
> 时间：2013-04-23T17:39:11.307
> 
> 标签：html, move, moovweb, tritium

我正在使用[Moovweb SDK](http://www.moovweb.com/developers/moovwebsdk)制作网站的移动版本，我需要将图像从一个 div 移动到另一个。我怎样才能使用氚来做到这一点？

```
<body>
  <div class="kittens">
    <img src="images/husky.jpg" id="husky">
  </div>

  ...

  <div class="puppies">
    [need to move img here]
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:50:10.080

有几种方法可以做到这一点。

我觉得最吸引人的方法是使用一些 XPath 轴和 move_here 命令：

```
$("./body/div[contains(@class,'puppies')]") {
  move_here("ancestor::body/div[contains(@class,'kittens')]/img[@id='huskey']")
} 
```

这种方式使用更少的字符获得相同的效果（但速度较慢）：

```
$("//div[contains(@class,'puppies')]") {
  move_here("//img[@id='huskey']")
} 
```

我喜欢第一种方式的原因是，一般来说，你要找的img不会离body那么近。而不是做`ancestor::body`你可以做的`//img[@id=''huskey]`，但这可能会慢得多。使用祖先的另一个好处是它显示了两个元素之间的联系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T17:56:09.253

您可以使用 move_to 或 move_here。

使用 move_to，它看起来像这样：

```
$("./div[contains(@class, 'kittens')]") {
  move_to("../div[contains(@class, 'puppies')]")
} 
```

现场测试：http: [//play.tritium.io/311b7aad88ac174899dc4c2f7ebc7407db1ea08d](http://play.tritium.io/311b7aad88ac174899dc4c2f7ebc7407db1ea08d)

# c# - 在这种情况下哪个更好，返回或参考

> ID：16175721
> 
> 赞同：5
> 
> 时间：2013-04-23T17:39:29.903
> 
> 标签：c#, return, ref

假设我有以下一组静态函数

在这里，我通过引用发送了变量：

```
public static void ProcessEmailMessage(ref string HTML)
        {
            ModifyLinks(ref HTML);
            AddFakeImage(ref HTML);
        }

        public static void ModifyLinks(ref string HTML)
        {
            //modify HTML links 
        }

        public static void AddFakeImage(ref string HTML)
        {
            //adds an image to the HTML
        } 
```

在这里我按值发送变量

```
public static string ProcessEmailMessage(string HTML)
        {
            HTML = ModifyLinks(HTML);
            HTML = AddFakeImage(HTML);
            return HTML;
        }

        public static string ModifyLinks(string HTML)
        {
            //modify HTML links
            return HTML;
        }

        public static string AddFakeImage(string HTML)
        {
            //adds an image to the HTML
            return HTML;
        } 
```

哪个更有意义，两者之间是否有任何性能差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T17:42:27.887

尽可能避免使用 out- 和 ref 参数。

带 ref 和 out 参数的方法比较难用，需要声明一个变量来保存结果，语义比较难理解。性能差异（如果有的话）可以忽略不计。

在这种情况下，Visual Studio 中的代码分析可能会针对它们的使用发出警告。

有关更详细的说明，请参阅[http://msdn.microsoft.com/en-us/library/ms182131 。](http://msdn.microsoft.com/en-us/library/ms182131)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:42:36.230

使用 时可能会对性能产生更多影响`ref`，因为这在分配给变量时相当于额外的间接级别。但是，这种差异可能可以忽略不计。

我更喜欢返回字符串的表单，因为这更能说明实际发生的情况，并且如果您愿意，可以将方法调用链接在一起：

```
return AddFakeImage(ModifyLinks(HTML)); 
```

使用这种`ref`形式，您可以*强制*调用代码声明一个变量，否则它们可能不需要。这妨碍了可读性并增加了无意义的样板代码的发生率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:42:39.710

两者之间的性能差异可以忽略不计。这几乎完全是语法的偏好问题。

标准约定将涉及返回一个新字符串，而不是修改通过引用传递的参数。在某些情况下它更容易使用（即当您没有命名变量时；例如，当您想要传入方法或属性的返回值而不是字段时）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T17:43:01.237

差别不大，但我会选择“返回”。如果可能，尽量避免使用“ref”。

原因是您不必在传递另一个调用的结果之前声明变量，并且可以链接调用：

参考：

```
string modifyMe = GetMeString();
ModifyLints(ref modifyMe);
AddFakeImage(ref modifyMe); 
```

与回报相比：

```
string result = AddFakeImage(ModifyLinks(GetMeString())); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T17:44:32.317

如果您需要返回多个对象，请使用`ref`/ `out`，如果您`return`只需返回一个对象即可，请使用`return`.
`ref`使您的代码不必要地晦涩难懂，并产生在这种情况下不必要的写入开销。
您应该始终尽量保持您的代码简单且易于浏览。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T17:45:53.947

我更喜欢像 builder 这样的东西：

新的 EmailMessageProcessor(html).WithModifiedLinks().WithFakeImages()。

所以没有 ref 参数，一切都被封装了。

# algorithm - 多项式时间用户配对算法

> ID：16175724
> 
> 赞同：0
> 
> 时间：2013-04-23T17:39:33.533
> 
> 标签：algorithm, computer-science

我有个问题 。考虑具有不同权重的用户，这取决于当前频道。即频道是否良好，权重很高。我必须以系统总重量最大的方式对用户进行配对。我将详细说明这一点。考虑 4 个通道和 8 个用户，现在我必须将配对用户放置在每个通道中，以使权重总和最大并且所有用户都将配对。请建议一些多项式时间算法，而不是最佳（蛮力），当用户数量很大时会变得复杂，这对我有很大帮助。

谢谢和问候，斯里努。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:41:46.870

Vladimir Kolmogorov 在 2009 年发表了[Blossom V：最小成本完美匹配算法的新实现，](http://pub.ist.ac.at/~vnk/papers/BLOSSOM5.html)它为“在无向加权图中计算最小成本完美匹配的问题”提供了多项式算法。

通过更改权重的符号来更改为最大成本是微不足道的。

该算法的最坏情况复杂度为 O(n^3m)（但对于典型示例通常要快得多）。n 是节点数，m 是边数。在您的情况下，我相信所有 n^2 边都存在，因此复杂度为 O(n^5)。

如果您的图表是二分的，则有更快的算法（例如，用户分为两类，例如男性和女性，您必须始终将男性与女性匹配）但我不相信您是这种情况？

该算法的软件实现在[这里](http://pub.ist.ac.at/~vnk/software.html)。

# java - 什么是默认的 Akka 调度程序配置值？

> ID：16175725
> 
> 赞同：33
> 
> 时间：2013-04-23T17:39:34.953
> 
> 标签：java, scala, akka, dispatcher

在 Akka 文档中，它声明如果未配置调度程序，则将使用默认调度程序。默认调度程序的属性是什么，即并行度最小值、并行度因子、并行度最大值等？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-23T17:51:05.097

默认情况下，由提供的调度`Akka`程序是一个带有的调度程序`fork-join-executor`，默认并行度值为：

*   **并行度-分钟：** 8
*   **并行度：** 3.0
*   **最大并行度：** 64

[您可以在文档](http://doc.akka.io/docs/akka/snapshot/general/configuration.html)中看到所有这些内容。

有一个部分名为：**[参考配置列表](http://doc.akka.io/docs/akka/snapshot/general/configuration.html#Listing_of_the_Reference_Configuration)**

这是配置文件的相关部分（我只删除了注释）：

```
default-dispatcher {
    type = "Dispatcher"
    executor = "fork-join-executor"

    fork-join-executor {
        parallelism-min = 8
        parallelism-factor = 3.0
        parallelism-max = 64
    }

    thread-pool-executor {
        keep-alive-time = 60s
        core-pool-size-min = 8
        core-pool-size-factor = 3.0
        core-pool-size-max = 64
        max-pool-size-min = 8
        max-pool-size-factor  = 3.0
        max-pool-size-max = 64
        task-queue-size = -1
        task-queue-type = "linked"

        allow-core-timeout = on
    }
} 
```

# html - 如何在嵌入式 Flash 播放器中找出 mp4 视频的结尾

> ID：16175726
> 
> 赞同：0
> 
> 时间：2013-04-23T17:39:34.973
> 
> 标签：html, flash, embed, addeventlistener

我正在尝试在 html 中嵌入 Flash 播放器。如何确定视频播放完毕？我的目标是在这结束后播放另一个视频。比如添加事件监听器。

```
<body > <div id="videoDiv" class="cls"></div></body>
<script>
var html = '<embed src="swfs/SampleMediaPlayback.swf" width=400 height=300  id="SampleMediaPlayback" quality="high" bgcolor="#000000" name="SampleMediaPlayback"    allowfullscreen="true"  pluginspage="http://www.adobe.com/go/getflashplayer"    flashvars="&src="http://64.165.34.7:8134/vod/cupertino/nobacco.mp4"&autoHideControlBar=true&streamType=vod&autoPlay=false&verbose=true" type="application/x-shockwave-flash"></embed>';
$("#videoDiv").html(html); 
```

# javascript - jquery ajax 和抢占式基本身份验证

> ID：16175727
> 
> 赞同：6
> 
> 时间：2013-04-23T17:39:42.563
> 
> 标签：javascript, jquery, basic-authentication, preemptive

我正在尝试访问一些在 Apache 抢先式基本身份验证下运行的 RESTful 服务。我正在使用 jquery Ajax，并使用“身份验证”标头发送用户和密码。但是，我的请求每次运行时都会抛出一个空错误。

这是完整的 $.ajax 调用：

```
$.ajax({
      cache:false,
      url: urladdress,
      type:'GET',
      async:false,
      headers: { "cache-control": "no-cache" },
      dataType: "html", //or xml or json
      contentType: "html",
       beforeSend : function(req) 
       {
          req.setRequestHeader('Authorization', "Basic " +  base64string); //user:password);
       },
      success: function(data){
         successcallback(data);
      },
      error: function(xhRequest, ErrorText, thrownError){
           alert("ERROR: "+ JSON.stringify(xhRequest));
      },
      complete: function(result){
        ...
      }
}); 
```

我做错了什么？有什么我在这里忽略的吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T13:57:00.993

解决方案在服务器端，您必须包含一些自定义标头以响应跨域工作。实验发送以下标头作为响应：

访问控制允许来源：yourApiDomain

访问控制允许方法：*

*   如果使用自定义标题：

    Access-Control-Expose-Headers：X-My-Custom-Header、X-Another-Custom-Header

    访问控制允许标题：X-My-Custom-Header、X-Another-Custom-Header

*   如果使用 HTTP Cookie 和 HTTP 身份验证信息：

    访问控制允许凭据：true

有关更多信息，请阅读[MDN 中有关 CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)的文档：

# mysql - rake db:create 只创建开发数据库

> ID：16175733
> 
> 赞同：4
> 
> 时间：2013-04-23T17:39:53.797
> 
> 标签：mysql, ruby-on-rails, rake, mysql2

我正在启动一个新的 rails 3 应用程序，当我运行`rake db:create`它时会询问我的 root mysql 密码，然后错误提示：

> Mysql2::Error: 用户'arcsite_mysql'@'localhost'拒绝访问数据库'arcsite_mysql_test': CREATE DATABASE `arcsite_mysql_test`DEFAULT CHARACTER SET `utf8`COLLATE`utf8_unicode_ci`

如果我在命令行上登录 mysql 并运行，`show databases;`我会看到：

```
arcsite_mysql_development 
```

如果我跑步，`SHOW GRANTS FOR arcsite_mysql@localhost`我会看到：

```
GRANT ALL PRIVILEGES ON `arcsite_mysql_development`.* TO 'arcsite_mysql'@'localhost' WITH GRANT OPTION 
```

我的数据库.yml：

```
# MySQL.  Versions 4.1 and 5.0 are recommended.
#
# Install the MYSQL driver
#   gem install mysql2
#
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: arcsite_mysql_development
  pool: 5
  username: arcsite_mysql
  password: password
  host: localhost

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: arcsite_mysql_test
  pool: 5
  username: arcsite_mysql
  password: password
  host: localhost 
```

因此，出于某种原因，只创建了开发数据库。

版本：

导轨 3.2.13

MySQL：服务器版本：5.6.10 源码分发

mysql2：mysql2-0.3.11

**编辑**

如果我手动将所有权限授予`arcsite_mysql`用户，我可以创建表。但是是否期望 Rails 会为开发而不是为测试环境创建用户和表？当我第一次运行命令时，`arcsite_mysql`用户是由 rails 创建的。`rake db:create`

**编辑 2**

第 4 点：[https ://rails.lighthouseapp.com/projects/8994/tickets/1459-patch-better-dbcreate-for-mysql-do-not-assume-root-user](https://rails.lighthouseapp.com/projects/8994/tickets/1459-patch-better-dbcreate-for-mysql-do-not-assume-root-user)

提到了一些涉及 mysql 用户创建的“众所周知的”过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:27:27.980

您需要在 MySQL 中授予此用户的访问权限：

```
GRANT ALL ON *.* TO 'arcsite_mysql'@'localhost' IDENTIFIED BY 'password'; 
```

Rails 不会在 MySQL 中创建用户，它只使用存在的用户，这就是为什么在生成时`database.yml`你会得到类似的东西：

```
development:
  adapter: mysql2
  encoding: utf8
  database: blog_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

Rails 假设 root 用户存在并且在 MySQL 中具有适当的权限（因为 root 拥有它所做的一切），如果不是，则必须创建它（如果使用 MySQL，如果它不存在，则会提示您输入 root 密码来创建用户）或将其更改为可以的。供参考： http: [//guides.rubyonrails.org/getting_started.html#configuring-a-database](http://guides.rubyonrails.org/getting_started.html#configuring-a-database)第 3.3.2 节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:43:46.673

如果您希望创建测试数据库，请尝试

```
rake db:test:prepare 
```

# ios - 制作一个不会占用内存或显示可怕视频帧的 iOS 视频播放器

> ID：16175735
> 
> 赞同：0
> 
> 时间：2013-04-23T17:40:01.737
> 
> 标签：ios, apache-flex, actionscript, video-capture

我的任务是为 iPad 制作视频捕获和播放解决方案，它不会受益于持续的互联网连接。我们希望它是跨平台的，而且我对 Flex 非常了解，所以我尝试在 ActionScript 中实现这一点。我尝试了两种主要的解决方法。

我可以将相机附加到 flex 中的 Video 对象，然后开始捕获帧。我必须将每一帧存储到本地内存（因为没有互联网），然后再上传。我需要确保视频对于上传和内存管理问题来说不是很大。我的第一次尝试是以大约 30 的 FPS 间隔截取当前帧的屏幕截图。然后缩小帧并将其保存到本地存储。那行得通，我的视频很小。但是，当我构建一个播放器并播放视频（将帧缩放回全屏）时，视频是如此像素化，看起来像是一个失真的 8 位视频。那是行不通的。我像这样缩放和捕获：

```
 video.clear();          
        offScreenBMP.lock();            
        offScreenBMP.fillRect(fillRect, 0x000000);
        offScreenBMP.draw(video, matrix, null, null, null, true);           
        offScreenBMP.unlock(); 
```

接下来，我尝试拍摄视频帧的全屏图像，然后将 n - 1 帧与 n 帧进行像素更改比较，并仅保存更改像素的向量。它们太多了，我还不如只保存完整尺寸图像的完整 ByteArray，因为我会用完内存，我的上传会很糟糕，UI 性能是不可接受的。

```
else {          
            var  pixelVect:Vector.<Pixel> = new Vector.<Pixel>();
            //the number of x pixels
            var cols:int = lastScreenBMP.width;
            //the number of y pixels
            var rows:int = lastScreenBMP.height;
            for(var i:int = 0; i < cols; i++) {
                for(var j:int = 0; j < rows; j++) {
                    if(lastScreenBMP.getPixel(i, j) != offScreenBMP.getPixel(i, j)) {
                        var p:Pixel = new Pixel();
                        p.pixelX = i;
                        p.pixelY = j;
                        p.pixel = offScreenBMP.getPixel(i, j);
                        pixelVect.push(p);
                    }
                }
            }
            recordLocation.setProperty("gtvideo" + imageSaving, pixelVect);
            lastScreenBMP.copyPixels(offScreenBMP, new Rectangle(0, 0, offScreenBMP.width, offScreenBMP.height), 
                new Point(0, 0));
        } 
```

不幸的是，Flex 没有很好的方法来捕捉视频，而且我的任何尝试都不可接受。但是，如果可以的话，我想坚持下去并建立自己的。如果我为 iOS 制定一个解决方案，我也必须为 Android 这样做，然后谁知道将来会做什么。如果我可以使用 Flex 完成此任务，我将受益于一个适用于所有平台（甚至桌面）的解决方案。有没有人遇到过类似的问题和/或您对如何克服这个问题有任何想法？

# php - PHP：页面加载无限时间

> ID：16175736
> 
> 赞同：0
> 
> 时间：2013-04-23T17:40:06.003
> 
> 标签：php, simple-html-dom

我正在使用简单的 html dom 解析器从网站上抓取产品，我为此编写了以下代码

```
 <?php
    error_reporting(E_ALL);
    require_once('lib/simple_html_dom.php');
    set_time_limit(0);
    ini_set('memory_limit', '1024M');
    ini_set('max_input_time ', '99999');
    $url='http://www.yourpoolhq.com/pool-supplies/aboveground/pool-liners/round/unibead.html';
    $html = file_get_html($url);

    if(is_object($html)){
        foreach ( $html->find('div.category-products') as $elem ){

            $data = $elem->innertext;
            $strdata = str_get_html($data);
            foreach ($strdata->find('a') as $a) {
                    if($a->plaintext!=''){
                        get_detail_page($a->href);
                        flush();

                    }
                    flush();
            }
            unset($data);
            unset($strdata);
        }
        $html->clear();
        unset($html);
    }

    function get_detail_page($href){
    $details = file_get_html($href);
        if(is_object($details)){

            foreach ($details->find('h1') as $ess ) {
                                //print_r($ess); this has data 
                echo $ess->plaintext; // not getting this, Why this is not printing. x-(                                                            
                flush();    
            }
            $details->clear();
            unset($details);
        }
    flush();    
}

    ?> 
```

没有得到我在这里做错了什么。任何想法的家伙。

编辑：我已经更新了在某些地方添加的代码并注释了错误部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:46:57.017

您的代码本身没有任何明显的缺陷。我唯一能想到的是`file_get_html`由于您的服务器和 somedomain.com 上的远程服务器之间的延迟而需要很长时间。可能值得通过延迟工具（您使用 PHP 的服务器上的跟踪、ping 等）进行调查。

# javascript - 动态填充选择框时使用 JQuery 更改选择框的值

> ID：16175737
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:40:06.190
> 
> 标签：javascript, jquery

我有一个动态填充选择框的 PHP 代码，例如：

```
for($i=0; $i<$n; $i++) {
  echo '<select id='s_.$i.'> <option> Yes </option> <option> No </option> </select>';
} 
```

现在每次用户做某事时，我想使用 JQuery 将选择框的选项值设置为某个值，例如：

```
 $("#target").click(function() {
    $("#s_1").val('No'); // #1 is the ID of the select box 1 
}); 
```

但它不起作用。我也尝试通过 DocumentFindById 函数检索元素，但它仅在我使用静态 HTML 测试时才能正常工作。当我使用 PHP 动态创建这些选择框时，它会失败。有什么办法可以使这项工作？

谢谢。

添加评论）对不起，我没有在我的代码中使用数字 id。我认为这将是一个更简单的例子。使用字符串 id，它仍然根本不起作用.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:45:28.993

使用`on()`如下：

```
$(document).on('click', '#target', function () {
    $("#1").val('No'); // #1 is the ID of the select box 1 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:46:54.863

尝试这个

```
<script>
   $(function() {
       $("#target").click(function() {
         $("#1").val('No'); // #1 is the ID of the select box 1 
       });
   });
</script> 
```

注意：不要使用 #1 作为 id

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T17:43:44.590

也许您的代码不适用于动态生成的 html？也许这会起作用：

```
$("#target").on('click',function() {
    $("#1").val('No'); // #1 is the ID of the select box 1 
}); 
```

这里唯一的变化是[on](http://api.jquery.com/on/)。

# r - R中并行计算的stdout和stderr

> ID：16175739
> 
> 赞同：3
> 
> 时间：2013-04-23T17:40:18.907
> 
> 标签：r, parallel-processing, stdout, stderr

我正在使用包`parallel`进行计算。这是一个玩具示例：

```
library(parallel)
m = matrix(c(1,1,1,1,0.2,0.2,0.2,0.2), nrow=2)
myFun = function(x) {
  if (any(x<0.5)) {
    write("less than 0.5", stderr())
    return(NA)
  } else {
    write("good", stdout())
    return(mean(x))
  }
}
cl = makeCluster(2, outfile="/tmp/output")
parApply(cl, m, 2, myFun)
stopCluster(cl) 
```

问题是 stdout 和 stderr 都将被重定向到`/tmp/output`. 该`output`文件如下所示：

```
starting worker pid=51083 on localhost:11953 at 11:37:12.966
starting worker pid=51093 on localhost:11953 at 11:37:13.261
good
good
less than 0.5
less than 0.5 
```

有没有办法分别为stdout和stderr设置两个单独的文件？以及如何忽略“starting worker pid = ...”的前两行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:14:13.597

该`parallel`包不直接支持将 stdout 和 stderr 发送到单独的文件，但您可以自己做：

```
cl = makeCluster(2)

setup = function(outfile, errfile) {
  assign("outcon", file(outfile, open="a"), pos=.GlobalEnv)
  assign("errcon", file(errfile, open="a"), pos=.GlobalEnv)
  sink(outcon)
  sink(errcon, type="message")
}

shutdown = function() {
  sink(NULL)
  sink(NULL, type="message")
  close(outcon)
  close(errcon)
  rm(outcon, errcon, pos=.GlobalEnv)
}

clusterCall(cl, setup, "/tmp/output", "/tmp/errmsg")
parApply(cl, m, 2, myFun)
clusterCall(cl, shutdown) 
```

由于“starting worker”消息是在调用之前发出的，这些消息被重定向到“/dev/null”，这是未指定`setup`时的默认行为。`outfile`

# jquery - 使用 Bootstrap 单击按钮时更改按钮文本

> ID：16175740
> 
> 赞同：0
> 
> 时间：2013-04-23T17:40:22.217
> 
> 标签：jquery, twitter-bootstrap

使用最新版本的 Bootstrap 和内置手风琴功能，有没有办法将按钮的文本更改为不同的内容？

例如：我有一个显示文本“查找咖啡馆”的按钮，单击时手风琴打开并显示一个列表。但是，我希望文本更改为显示关闭。

我在想我应该使用`click`and`html`函数，但不知道如何安排它们。

HTML：

```
<div id="accordion" class="accordion">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">Find Cafe
            </a>
            <div id="collapseOne" class="accordion-body collapse in">
                 <div class="accordion-inner">
                    Anim pariatur cliche...
                 </div>
            </div>
     </div>
</div> 
```

JS：

```
 $('.collaspe').collapse(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:46:10.087

您不会为此使用 Bootstrap。您只需使用 jQuery：

```
$('a.accordion-toggle').click(function() {
    if ( $(this).next('.accordion-body').hasClass('in') ) {
        $(this).text('Close');
    } else {
        $(this).text('Find Cafe');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-04T10:42:25.150

您也可以在没有 JS 的情况下完成此操作

```
.toggle-accordion:before {

   content:'see more'

}

.toggle-accordion[aria-expanded="true"]:before {

    content:'close';

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-16T08:28:56.527

您可以使用 jquery 执行此操作

```
 $('#your-button-id').click(function(){
    $(this).text(function(i,old){
        return old=='Find Cafe' ?  'Close' : 'Find Cafe';
    });
}); 
```

干净简单:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-17T13:58:02.400

如果您需要在模板中配置单个文本，将演示与功能分开。

```
$('body').on('click', '[data-toggle="collapse"]', function() {
   console.log(this);
  var _self = $(this);
  var _content = $(_self.attr('data-target'));
  var _originalText = _self.attr('data-text');

  if ( _content.hasClass('in') ) {
      _self.text(_self.attr('data-textexp'));
  } else {
      _self.text(_self.attr('data-text'));
  }
}); 
```

# ssl - 从 Ruby 1.9.3 升级到 2.0.0 期间出现 Mysql2 错误

> ID：16175743
> 
> 赞同：2
> 
> 时间：2013-04-23T17:40:45.313
> 
> 标签：ssl, typeerror, mysql2, ruby-2.0

我有一个我们在工作中使用的命令行应用程序，它使用 ActiveRecord（不是所有的 rails）。我们希望升级到 Ruby 2.0.0 以提高加载时间性能。

为此，我...

1.  下载/安装 ActiveRecord 3.2.13
2.  下载了 Ruby 2.0.0 并适当地更改脚本上的 she-bang。

当我运行它时，我得到...

```
gems/mysql2-0.3.11/lib/mysql2/client.rb:34:in `ssl_set': no implicit conversion of nil into String (TypeError) 
```

我错过了一个必要的步骤吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T01:49:01.160

我不得不使用 Ruby 2.0.0 附带的 RubyGems 在我的系统上重新安装 mysql2 gem。

```
gem uninstall mysql2
/path/to/ruby-2.0.0-p0/bin/gem install mysql2 -- --with-mysql-config=/path/to/pkgs/mysql/5.1.46-64/bin/mysql_config 
```

Mysql2 之前安装了旧版本的 Ruby/RubyGems。

# python - 使用 pynotify 读取新行

> ID：16175745
> 
> 赞同：3
> 
> 时间：2013-04-23T17:40:49.707
> 
> 标签：python, file, events, pynotify

我正在尝试显示添加到文件中的新行。所以想象一下我有一个`sample_file.txt`：

```
 1\. line 1
 2\. line 2
 3\. line 3 
```

我想检查此文件是否有新行，然后显示该行（无需再次打印所有文件）

```
#!/usr/bin/python

import os
import pyinotify
from datetime import datetime
import time

PATH = os.path.join(os.path.expanduser('~/'), 'sample_file.txt')

m = pyinotify.WatchManager()
m.add_watch(PATH, pyinotify.ALL_EVENTS, rec=True)
notifier = pyinotify.Notifier(m, pyinotify.ProcessEvent(), 0,  0, 100)

f = open(PATH)
for line in f.readlines():
    print line

while True:
    time.sleep(5)
    try:
        if notifier.check_events():
            # RIGHT HERE:
            # HOW TO DO SOMETHING LIKE
            # f.last() ???
            print f.next()
        else:
            print 'waiting for a line....'
    except KeyboardInterrupt:
        notifier.stop()
        break 
```

我在想的是在while循环之前读取所有行，然后打印下一行，但是我的代码有问题，`f.next()`它会在循环之后立即检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T21:22:02.543

我将解决两个问题：

*   如何`tail`在文件上实现，
*   以及如何使用该`pyinotify`模块。

# 文件尾

在您的代码中，您需要：

*   尝试阅读尽可能多的完整行，使用`read`or `readlines`,
*   将文件倒回到最后一个不完整行的开头，直到您可以使用`seek`.

例如，这转化为：

```
f = open(PATH)
for line in f.readlines():
    print line[:-1]

while True:
    time.sleep(5)
    try:
        line_start = f.tell()
        new_lines = f.read()
        last_n = new_lines.rfind('\n')
        if last_n >= 0:
            # We got at least one full line
            line_start += last_n + 1
            print new_lines[:last_n]
        else:
            # No complete line yet
            print 'no line'
        f.seek(line_start)
    except KeyboardInterrupt:
        notifier.stop()
        break 
```

您可以在此处找到更多示例，尽管有些示例并未解决文件中不以换行符结尾的添加内容：

*   [https://github.com/kasun/python-tail/blob/master/tail.py](https://github.com/kasun/python-tail/blob/master/tail.py)
*   [http://code.activestate.com/recipes/157035-tail-f-in-python/](http://code.activestate.com/recipes/157035-tail-f-in-python/)

还有一些替代方法[如何在 Python 中跟踪日志文件？](https://stackoverflow.com/questions/12523044/how-can-i-tail-a-log-file-in-python)

# Pyinotify 循环

您还应该`pyinotify`按照文档中的说明将代码移动到 的事件处理程序中。

`check_events`如果有要处理的事件则返回`True`，但它实际上并不处理事件，因此它本身将始终返回`True`，直到处理完事件。

另外，尽量避免`while`/`sleep`循环。Inotify 添加了在收到事件后立即处理事件的能力，而不会影响资源。A `while`/`sleep`循环将不那么被动。

以下是 .上的[简短教程](https://github.com/seb-m/pyinotify/wiki/Tutorial#short-tutorial)中的两种第一种方法`pyinotify`。

## 1.无休止的监控

如果您没有其他事件循环，这是首选方法，因为它将是最具反应性的：

```
PATH = os.path.join(os.path.expanduser('~/'), 'experiments', 'testfile')

class EventHandler(pyinotify.ProcessEvent):
    def __init__(self, *args, **kwargs):
        super(EventHandler, self).__init__(*args, **kwargs)
        self.file = open(PATH)
        self.position = 0
        self.print_lines()

    def process_IN_MODIFY(self, event):
        print 'event received'
        self.print_lines()

    def print_lines(self):
        new_lines = self.file.read()
        last_n = new_lines.rfind('\n')
        if last_n >= 0:
            self.position += last_n + 1
            print new_lines[:last_n]
        else:
            print 'no line'
        self.file.seek(self.position)

wm = pyinotify.WatchManager()
handler = EventHandler()
notifier = pyinotify.Notifier(wm, handler)
wm.add_watch(PATH, pyinotify.IN_MODIFY, rec=True)
notifier.loop() 
```

## 2\. 定期监测

如果您已经有一个处理循环，那么只需`process_events`定期调用即可。该类与方法 1 中的`EventHandler`类相同，但现在`notifier.loop()`我们不是调用，而是向通知程序添加一个小超时，并实现我们自己的事件循环。

```
...

wm = pyinotify.WatchManager()
handler = EventHandler()
notifier = pyinotify.Notifier(wm, handler, timeout=10)
wm.add_watch(PATH, pyinotify.IN_MODIFY, rec=True)

while True:
    # Do something unrelated to pyinotify
    time.sleep(5)

    notifier.process_events()
    #loop in case more events appear while we are processing
    while notifier.check_events():
        notifier.read_events()
        notifier.process_events() 
```

# select - 如果从表中选择 *，Hive 自定义 SerDe 将返回所有空列，但如果从表中选择列则返回值

> ID：16175746
> 
> 赞同：1
> 
> 时间：2013-04-23T17:40:52.447
> 
> 标签：select, hive

我有一个我写的 Hive SerDe。在配置单元查询中选择列时，它工作正常，例如：

从表中选择列名；

但是，当我这样做时：

从表中选择 *；

它返回所有空值。我在反序列化覆盖方法中返回一个包含所有列值的列表对象。

# c++ - 从注册表中删除密钥

> ID：16175752
> 
> 赞同：3
> 
> 时间：2013-04-23T17:41:09.273
> 
> 标签：c++, regex, winapi, registry

我想删除一个Registrykey，但是在这段代码中我总是得到Returnvalue 2（找不到文件），但路径等于参数。

```
HKEY hKey;
long lReturn = RegOpenKeyEx( HKEY_CURRENT_USER,
                             _T("test1\\test2\\test3"),
                             0L,
                             KEY_ALL_ACCESS,
                             &hKey );
lReturn = RegDeleteValue(hKey,(LPCWSTR)"value1");
lReturn = RegDeleteValue(hKey,(LPCWSTR)"value2");

lReturn = RegDeleteKey(hKey,(LPCWSTR)"test1\\test2\\test3");
lReturn = RegDeleteKey(hKey,(LPCWSTR)"test1\\test2");
lReturn = RegCloseKey(hKey); 
```

如果我将 RegDeleteKey 参数更改为：

```
lReturn = RegDeleteKey(HKEY_LOCAL_MACHINE,(LPCWSTR)"test1\\test2\\test3"); 
```

我得到 Returnvalue 5（无访问权限）。请帮我删除这个注册表项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:46:39.440

将字符串文字类型转换为 LPCWSTR 不会将其转换为该类型。它只是告诉编译器，尽管文字是*真实*类型，但您知道得更好，并且应该将其视为另一种类型。编译器不会检查你是否说的是真话，在这种情况下，你错了。

如果您想要一个宽字符串文字，请使用`L`前缀，或者`_T`像在第一个语句中那样使用宏：

```
lReturn = RegDeleteValue(hKey, L"value1");
lReturn = RegDeleteValue(hKey, _T("value1")); 
```

操作系统返回 2 是正确的，因为您所指向的值确实无法按原样找到。通过对 LPCWSTR 的类型转换，该函数期望指针指向一个两字节字符序列。不过，您给了它一个单字节字符序列。它读取第一对字节并将其视为单个字符。它读取`'va'`或`'te'`作为*单个*字符，找不到名称以此类字符开头的值或键，并且失败。

使用`L`前缀时，通常还显式使用`W`API 函数的版本，以便函数的选择不会对`UNICODE`宏的状态敏感。

```
lReturn = RegDeleteValueW(hKey, L"value1"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:42:36.943

您在滥用类型转换，并且`RegDeleteKey()`无论如何都传递了错误的参数值。试试这个：

```
HKEY hKey = NULL;
long lReturn = RegOpenKeyEx( HKEY_CURRENT_USER,
                             _T("test1\\test2\\test3"),
                             0L,
                             KEY_SET_VALUE,
                             &hKey );
if (lReturn == ERROR_SUCCESS)
{
    lReturn = RegDeleteValue(hKey, _T("value1"));
    lReturn = RegDeleteValue(hKey, _T("value2"));
    lReturn = RegCloseKey(hKey);
}

lReturn = RegDeleteKey(HKEY_CURRENT_USER, _T("test1\\test2\\test3"));
lReturn = RegDeleteKey(HKEY_CURRENT_USER, _T("test1\\test2")); 
```

顺便说一句，如果您仍然要删除`test3`密钥，则无需打开该密钥并从中删除单个值。删除键会自动为您删除所有键的值。您只需删除存在的子键，例如在删除`test3`键之前删除键`test2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:46:50.040

仅将字符串转换为宽字符串是不正确的

(LPCWSTR)"test1\test2\test3"

使用 L"test1\test2\test3"

# php - mysql 通过外键将主表与另一个表连接起来

> ID：16175754
> 
> 赞同：0
> 
> 时间：2013-04-23T17:41:19.053
> 
> 标签：php, mysql, sql

在我的 MySQL 数据库中，我有一个带有 PK 的主表`id_duel`和另一个带有 PK `id_duel_player`和两个 FK`id_player`和`id_duel`.

对于每一个`id_duel`我有两个相同的`id_duel`玩家（两个玩家进行一场决斗）。

我想建立这样的声明：给我`id_duel`由这两个玩家组成的决斗（）（`$id_player1`和`$id_player2`- 这是两个不同玩家的 id_player 参加了必需的决斗）

![mySql 表](https://i.stack.imgur.com/OCJK5.png)

任何人都可以帮助我处理 SQL 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:47:35.470

您应该能够使用 a`JOIN`来确保两个玩家具有相同的`id_duel`：

```
SELECT id_duel
FROM duels d
INNER JOIN duel_player dp1
  ON d.id_duel = dp1.id_duel
    AND dp1.id_player = @id_player1
INNER JOIN duel_player dp2
  ON d.id_duel = dp2.id_duel
    AND dp2.id_player = @id_player2 
```

# c# - Windows Phone - 是否可以更改手机上的主题颜色？

> ID：16175759
> 
> 赞同：0
> 
> 时间：2013-04-23T17:41:29.460
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone

我的问题很简单。

是否可以更改运行我的应用程序的手机的主题颜色？需要明确的是，我不是指*应用程序*的主题，而是实际手机的主题。您可以在设置 -> 主题 -> 颜色中手动更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:45:07.850

使用当前的 SDK（在 WP7 或 WP8 上）无法更改手机的实际主题。

# bash - 如何在循环中的bash中使用dd命令

> ID：16175760
> 
> 赞同：0
> 
> 时间：2013-04-23T17:41:39.820
> 
> 标签：bash

我不是很精通 bash，但我知道一些命令，并且可以绕过一些。我无法编写脚本来填充运行 Ubuntu（嵌入式 Linux）的外部设备上的闪存驱动器。

```
dd if=/dev/urandom of=/storage/testfile.txt 
```

我想知道闪存驱动器何时已满（停止向其写入随机数据），以便我可以继续进行其他操作。

在 Python 中，我会执行以下操作：

```
while ...condition:

    if ....condition:
        print "Writing data to NAND flash failed ...."
        break
else:
    continue 
```

但我不确定如何在 bash 中执行此操作。提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:08:51.850

根据`man dd`：

```
DIAGNOSTICS
     The dd utility exits 0 on success, and >0 if an error occurs. 
```

这就是您应该在脚本中执行的操作，只需检查 dd 命令后的返回值：

```
dd if=/dev/urandom of=/storage/testfile.txt
ret=$?
if [ $ret gt 0 ]; then
    echo "Writing data to NAND flash failed ...."
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:03:52.163

尝试这个

```
#!/bin/bash

filler="$1"     #save the filename
path="$filler"

#find an existing path component
while [ ! -e "$path" ]
do
    path=$(dirname "$path")
done

#stop if the file points to any symlink (e.g. don't fill your main HDD)
if [ -L "$path" ]
then
    echo "Your output file ($path) is an symlink - exiting..."
    exit 1
fi

# use "portable" (df -P)  - to get all informations about the device
read s512 used avail capa mounted <<< $(df -P "$path" | awk '{if(NR==2){ print $2, $3, $4, $5, $6}}')

#fill the all available space
dd if=/dev/urandom of="$filler" bs=512 count=$avail 2>/dev/null
case "$?" in
    0) echo "The storage mounted to $mounted is full now" ;;
    *) echo "dd errror" ;;
esac
ls -l "$filler"
df -P "$mounted" 
```

将代码保存到文件，例如：`ddd.sh`并像这样使用它：

```
bash ddd.sh /path/to/the/filler/filename 
```

代码是在[https://stackoverflow.com/users/171318/hek2mgl的帮助下完成的](https://stackoverflow.com/users/171318/hek2mgl)

# python - Pandas to_csv 丢弃值

> ID：16175761
> 
> 赞同：2
> 
> 时间：2013-04-23T17:41:45.200
> 
> 标签：python, pandas

我遇到了 pandas.to_csv 在 datetime64 类型的列上删除值的问题。

```
In [24]: df
Out[24]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 28982 entries, 0 to 28981
Data columns (total 4 columns):
value    28982  non-null values
date1    28982  non-null values
date2    22772  non-null values
date3    28982  non-null values
dtypes: datetime64[ns](3), float64(1)

In [25]: df.tail()
Out[25]: 
       value               date1               date2               date3
28977  25.44 2002-08-21 00:00:00 2013-05-03 00:00:00 2007-09-01 00:00:00
28978  25.86 2002-08-21 00:00:00 2013-05-03 00:00:00 2007-09-01 00:00:00
28979  26.08 2002-08-21 00:00:00 2013-05-03 00:00:00 2007-09-01 00:00:00
28980  25.84 2002-08-21 00:00:00 2013-05-03 00:00:00 2007-09-01 00:00:00
28981  25.35 2002-08-21 00:00:00 2013-05-03 00:00:00 2007-09-01 00:00:00

In [26]: df.to_csv('test.csv', index = False)

In [27]: df2 = pd.read_csv('test.csv', header = 0)

In [28]: df2
Out[28]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 28982 entries, 0 to 28981
Data columns (total 4 columns):
value    28982  non-null values
date1    28982  non-null values
date2    21070  non-null values
date3    17036  non-null values
dtypes: float64(1), object(3)

In [29]: df2.tail()
Out[29]: 
       value                date1 date2 date3
28977  25.44  2002-08-21 00:00:00   NaN   NaN
28978  25.86  2002-08-21 00:00:00   NaN   NaN
28979  26.08  2002-08-21 00:00:00   NaN   NaN
28980  25.84  2002-08-21 00:00:00   NaN   NaN
28981  25.35  2002-08-21 00:00:00   NaN   NaN 
```

如图所示，我将 df 写入文件并立即将其读回 df2，csv 文件中的 date2 和 date3 列在底部有很多缺失值。这是一个错误吗？顺便说一句，我使用的是 Pandas 0.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:55:24.120

这是一个已知问题：[https ://github.com/pydata/pandas/issues/3062](https://github.com/pydata/pandas/issues/3062)

解决方法基本上是这样的：

```
for c in datetime_columns_that_have_NaT:

     df[c] = df[c].astype('object')

df.to_csv() 
```

如果您指定 parse_dates=[that_column_num]

它会起作用的

或者，您可以像现在这样写，然后像这样阅读：

```
dfc = pd.read_csv('test.csv',index_col=0).convert_objects(convert_dates='coerce') 
```

将强制日期转换

# php - 在 HTML 输入中使用模式属性

> ID：16175763
> 
> 赞同：0
> 
> 时间：2013-04-23T17:41:48.273
> 
> 标签：php, html, input, inverse

我有这个 HTML 中的模式示例 `pattern="[a-zA-Z0-9-_. ]{1,30}"`。这意味着只`-_.`允许使用字母数字 and ，但我想制作一个类似于 in 的模式，`preg_replace`它允许所有内容，但不允许`[ <>/\:*?"|]`.

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:22:47.910

您可以尝试以下方法：

```
$test = "Hello [<>/\:*?\"|Mister] Jean-Samuels, how are you?_.";
echo preg_replace('/[^\d\w-_. ]+/', '', $test); 
```

输出：

```
Hello Mister Jean-Samuels how are you_. 
```

**编辑：**

这是您的 HTML 模式的[JSFiddle](http://jsfiddle.net/NxHr9/2/)。

HTML：

```
<input title='Enter anything but <, >, /, \, :, *, ?, ", |' 
type='text' 
pattern='[^<>\/\\:*?"|]{1,30}' required /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:23:17.853

字符类中的`^`运算符将否定整个类，因此您可以使用：

```
[^<>/\:*?"|] 
```

它将匹配*除*字符类中的那些字符之外的所有内容。请记住，如果属性`"`的周围引号也是如此，您可能必须转义。`pattern``"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:23:36.637

正则表达式中的负字符类是这样完成的：`[^characters to exclude]`

注意`^`只是在里面`[`，这就是使它成为负数的原因。

也就是说，你可能应该坚持你所拥有的，否则你会得到像我这样的人试图输入ヴィックサ 的名字：p

# opencv - 使用 Haar 训练进行猫检测

> ID：16175765
> 
> 赞同：5
> 
> 时间：2013-04-23T17:41:55.240
> 
> 标签：opencv

我想使用 HAAR 级联检测可变形物体（在我的例子中是 CAT）。我对多达 20 个阶段的 2000 张正面图像和 3000 张负面图像进行了测试。我没有看到任何预期的事情发生。我确信这可能是我的训练数据集的问题。我的正面数据集中有猫的图像。在同一只猫的不同形状和姿势。我想知道 Haar 是否能够识别正数据集中的差异，并且仍然将它们识别为猫。

需要帮助，我可以使用其他替代方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:03:55.743

首先，你没有列出你用来训练你的 haar 分类器的东西。如果您不使用 opencv_traincascades，这是开始的地方。

其次，检测猫是一项非常困难的工作，有很多不安全的边缘、旋转和空间差异。使用这种思路，自己回答这些问题：

*   你的正面数据集是什么样的？
*   这是否类似于您通过输入提要显示的内容
*   你训练的分类器的误报率是多少？
*   你在你的背景集中包括了什么（更多看起来像猫而不是猫的图像更好等）

我建议将您的输出从分类阶段发布到问题中，以便我们更好地了解正在发生的事情。查看这些链接以获得更多帮助。

也许先尝试使用钢笔或徽标，遵循 openCV 教程并了解基础知识？（对不起，如果我假设你不知道基础知识）

G。/

# java - 复杂 Java 类型的 Jackson JSON 模式生成

> ID：16175767
> 
> 赞同：2
> 
> 时间：2013-04-23T17:42:09.637
> 
> 标签：java, json, jackson, jsonschema

我刚刚下载了最新的 jackson-module-jsonSchema (2.2.0)，想知道是否有人可以提供一个示例来为复杂的 Java 类型（例如，包含 some `SubObject`or的类型`List<SubObject>`）生成模式？

我能够使用以下内容成功创建“平面”模式：

```
ObjectMapper m = new ObjectMapper(); 
SchemaFactoryWrapper visitor = new SchemaFactoryWrapper();
m.acceptJsonFormatVisitor(m.constructType(RuleSet.class), visitor); 
JsonSchema jsonSchema = visitor.finalSchema(); 
return jsonSchema; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:57:33.527

什么意义上的例子？您应该能够只使用根类型生成模式，并且引用类型应该递归地生成模式定义。

# java - 在邻接矩阵中找到一条路径

> ID：16175778
> 
> 赞同：1
> 
> 时间：2013-04-23T17:42:45.810
> 
> 标签：java, matrix, adjacency-matrix

我试图在邻接矩阵中找到一条路径，但我总是收到以下错误消息：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 4
    at GraphApp.main(GraphApp.java:102) 
```

这是我的代码：

```
for (int i = 0; i < adjMat.length; i++)
    for (int j = 0; j < adjMat[i].length; j++)
        if (i < j)
            if (adjMat[i][j] == 1) //
                for (i = j + 1; i < adjMat.length; i++)
                    if (adjMat[i][j] == 1)
                        System.out.println("Graph conatains a path");
                    else
                        System.out.println("Graph doesn't contain a path"); 
```

例如，当我有这样的矩阵时：

```
0 1 1 1
1 0 1 0
1 1 0 0
1 0 0 0 
```

例如，我应该验证除了第一个之外， `1`in`T[0][1]`是否还有另一个`1`in ，因为矩阵是对称的。`T[i][1]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:46:56.437

您在循环中使用`i`两次可能会导致 ArrayIndexOutOfBoundsException。如果您使用正确的大括号，它将有助于轻松阅读您的代码并找出问题所在。

```
for (int i = 0; i < adjMat.length; i++) // first 
 ...
    ...
       for (i = j + 1; i < adjMat.length; i++)  // second 
```

# asp.net-mvc-4 - MVC 4 不显眼的 Jquery 验证 beforeSubmit

> ID：16175785
> 
> 赞同：3
> 
> 时间：2013-04-23T17:43:03.867
> 
> 标签：asp.net-mvc-4, jquery-validate, unobtrusive-validation

我想连接所有表单，以便在 Jquery Validation 没有发现错误之后以及在提交或提交表单之前显示加载器。

如何使用 MVC 4 不显眼的验证来实现这一点？

我根据本文尝试了以下操作，[如何在使用 jQuery Unobtrusive Validation 时添加“submitHandler”函数？](https://stackoverflow.com/questions/4747017/how-to-add-a-handlesubmit-function-when-using-jquery-unobtrusive-validation)：

```
$("form").data("validator").settings.submitHandler = function (form) { alert('submit'); form.submit(); }; 
```

我把它放在 OnLoad 部分，但这不会触发。我认为以上内容适用于所有形式？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T19:42:16.770

请参阅[内置`setDefaults`方法](http://docs.jquery.com/Plugins/Validation/Validator/setDefaults#defaults)的文档。你也不需要这`form.submit()`条线，因为插件已经处理好了。

```
$.validator.setDefaults({
    submitHandler: function (form) {
        alert('valid form submitted'); // for demo
        return false; // for demo, blocks default submit, needed with ajax too.
    }
}); 
```

**演示：http: [//jsfiddle.net/W4jfY/](http://jsfiddle.net/W4jfY/)**

* * *

**编辑**：

只申请一种表格...

```
$('#myform').validate({
    // any other options for this form,
    submitHandler: function (form) {
        alert('valid form submitted'); // for demo
        return false; // for demo, blocks default submit, needed with ajax too.
    }
}); 
```

# c# - 添加到组合框 C# 时出现表错误

> ID：16175796
> 
> 赞同：-3
> 
> 时间：2013-04-23T17:43:45.797
> 
> 标签：c#, wpf, ado.net

> 错误 1 ​​当前上下文中不存在名称“tblstudent”

```
void FillNationality()
{
    SqlConnection connection = new SqlConnection();
    connection.ConnectionString = "Integrated Security=true; Initial Catalog = student; Data Source = Yudish-PC";
    connection.Open();
    SqlDataAdapter d = new SqlDataAdapter("select country from tbl_nationality", connection);
    DataSet dt = new DataSet();
d.Fill(dt);
    cmbnationality.DataSource = dt.Tables[0]; /// assign the first table of dataset
    cmbnationality.DisplayMember = "country";  /// assign the column country to be displayed
    cmbnationality.DataBindings.Add("SelectedValue", tblstudent, "nationality_id");                                          

    connection.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:55:41.347

在代码中

```
cmbnationality.DataBindings.Add("SelectedValue", tblstudent, "nationality_id"); 
```

tblstudent 未定义，在方法的当前范围内

# sharepoint - 如何制作一个根据上次输入值的时间计算不同日期的共享点公式

> ID：16175799
> 
> 赞同：0
> 
> 时间：2013-04-23T17:43:53.160
> 
> 标签：sharepoint, date, formula

这是我要解决的问题。我有一个用户填写并提交到 SharePoint 库的 Infopath 表单，表单上的每个字段都映射到一个 SharePoint 列。

A 列将具有部门的名称，B 列将具有在该部门提交事件的日期。有几个部门可供选择。我需要创建一个计算列（C 列），以显示自特定单元报告事件以来的天数。

数据将这样设置：

```
A      B            C
1 South 4/20/2013   0
2 East  4/15/2013   8
3 South 4/18/2013   5
1 South 4/23/2013   0 
```

C 应计算自上次报告特定单位以来的天数。假设当前日期是 2013 年 4 月 23 日，C 列应该为每个单位提供以下值。1 South 将是 0，因为当天报告了一个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:48:22.450

您可以创建一个计算列并使用 [Today] 并从 B 列的值中减去它。因此您可以像下面这样实现：

```
=DATEDIF([B], [Today],"d") 
```

这将返回名为“B”的列与今天日期之间的天数。

如果您有兴趣为计算字段创建其他公式，可以在[此处](http://msdn.microsoft.com/en-us/library/bb862071%28v=office.14%29.aspx)更详细地查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T06:33:32.327

对于正在寻找答案的任何人：在计算列中使用上面的 =DATEDIF([B], [Today], "d") 公式将为您提供两个日期之间的天数差异。如果您需要仅进一步过滤最近出现的行，则需要配置一个视图。按 [A] 分组，按 [C] 排序，然后使用 SP Designer 将组数限制为 1，或者使用 xslt 仅显示每个组的第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T22:18:50.923

为了使用“今天”功能；如果 SharePoint 不允许您使用，您必须为今天的日期创建一个列。这是通过简单地添加一个日期列来完成的——您可以将其隐藏。创建日期列后，您可以使用公式 =DATEDIF([Start Date],[However you label your date column],"d")

# objective-c - 在我的 Mac OS X 应用程序中阅读文本

> ID：16175802
> 
> 赞同：0
> 
> 时间：2013-04-23T17:44:14.693
> 
> 标签：objective-c, macos, cocoa, nsstring

做一些 Mac 编码，我有这个简单的代码，它总是产生空结果：

```
 NSString *bundlePathWithFile = [[NSBundle mainBundle] pathForResource:@"sample.txt" ofType:nil];
  NSString *info = [NSString stringWithContentsOfFile:bundlePathWithFile 
  encoding:NSUTF8StringEncoding error:nil];  
   NSLog(@"results %@",info); 
```

我没有在 Xcode 中进行代码签名。我将*Code Signing Identity*设置为*Don't Code Sign*。
我也没有做过自签名证书。

我只想阅读文件的文本，这是我的应用程序包的一部分。我是否必须进行代码签名并提供权利，才能读取捆绑在我的应用程序中的`resources`文件夹中的文件？

我是否遗漏了一些不允许我在这里阅读自己的应用程序文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:11:06.663

*考虑到编码的数量，例如支持， Regular*是一个粗体字`NSString`。 ;-)

`NSUTF8StringEncoding`通常应该适用于纯文本文件，但您需要确保您的文本文件具有正确的编码 - 例如使用免费且很棒的**TextWrangler**进行检查，它将显示编码并允许您转换编码。

# python - 如何使未来的捕获依赖于 python 正则表达式中的早期匹配？

> ID：16175803
> 
> 赞同：0
> 
> 时间：2013-04-23T17:44:21.180
> 
> 标签：python, regex

我正在尝试使用正则表达式解析以下格式的消息：

*   `/log/<sender>`
*   `/error/<sender>`
*   `/state/<sender>/<variable_name>`

我希望能够检索消息的类型、消息的发送者以及如果消息是`state`消息变量名。请注意，日志和错误消息不能包含此架构下的变量名称。

我尝试使用以下模式执行此操作：

```
address_pattern = re.compile(
    r'''/
       ((?P<type> log)/(?P<sender> [^/]*))
     | ((?P<type> error)/(?P<sender> [^/]*))
     | ((?P<type> state)/(?P<sender> [^/]*)/(?P<parameter> [^/]*))
    ''', re.VERBOSE) 
```

但是，这不是一个有效的模式，因为捕获组`<type>`和`<sender>`定义多次（尽管逻辑上只有一个会匹配）。

是否有一个正则表达式可以为我解析这个字符串并提供三个匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:50:16.100

关于什么：

```
r'/(?P<type>log|error|state)/(?P<sender>[^/]+)(?:/(?P<parameter>[^/]+))?' 
```

?

您可以在之后检查语义，如果人们尝试类似`/error/<sender>/<variable>`.

正则表达式是有限的。根据定义，它们不允许您稍后根据之前的匹配做出决定。某些语法（例如 Python 的）可以让您作弊并重复使用以前的匹配项。例如`r'<(a|p|div)></\1>'`，但这是你能做到的。否则，您只能使用[DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automata)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:49:17.450

我找到了一个不是 100% 正则表达式但行为相同的解决方案：

`s`对于您拥有的字符串

```
state_pat = re.compile(r'/(?P<type>state)/(?P<sender>[^/]+)/(?P<parameter>[^/]+)')
log_pat = re.compile(r'/(?P<type>(log|warning|error))/(?P<sender>[^/]+)')
ping_pat = re.compile(r'/(?P<type>ping)/(?P<sender>[^/]+)')

match = state_pat.match(s) or log_pat.match(s) or ping_pat.match(s) 
```

本质上，将需要重用组名的每个逻辑分区为自己的模式，然后使用短路`or`返回匹配的第一个。然后，您可以使用`match.group('type')`来测试匹配的模式以及行为是否符合原始问题中的预期。

同样，诸如之类的字符串`/log/sender/parameter`将不匹配，您将被返回`None`。

# java - mustUnderstand 属性不只是设置为 false。

> ID：16175804
> 
> 赞同：1
> 
> 时间：2013-04-23T17:44:28.210
> 
> 标签：java, axis2, wsdl2java, envelope

我已经进行了大量研究，但找不到任何可以专门解决我的问题的东西。

我使用 wsdl2java 生成了我的 SOAP 客户端，问题是我的信封在发出时会在 HeaderElement 中创建我不需要存在的属性。

我创建了一个处理程序来构建我的标题，但无法从标题中删除这些属性。

示例 XML 即将发布。

```
<soapenv:Envelope xmlns:soapenv="http://..."
xmlns:v2="http://..."
xmlns:xsd="http://..." xmlns:xsi="...">
<soapenv:Header>
    <v2:wsMessageHeader soapenv:actor="http://schemas.xmlsoap.org/soap/actor/next"
        soapenv:mustUnderstand="0">
        <v2:trackingMessageHeader>
            <values>....</values>
        </v2:trackingMessageHeader>
    </v2:wsMessageHeader>
</soapenv:Header>
<soapenv:Body>
    <item 
        xmlns="http://...">
        <geoCode>Zip</geoCode>
        <zip>
            <uspsPostalCd>49001</uspsPostalCd>
        </zip>
    </item>
</soapenv:Body> 
```

我需要完全删除 soapenv:actor 和 soapenv:mustUnderstand 属性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T17:52:49.620

SOAP Header 是可选元素..您应该能够删除它..

```
messagecontext.getEnvelope().getHeader().detach(); 
```

无需做大量研究:)

# javascript - 显示“另存为”对话框而不是使用 JavaScript 播放音频文件

> ID：16175805
> 
> 赞同：2
> 
> 时间：2013-04-23T17:44:28.460
> 
> 标签：javascript, html

当用户单击锚点时，如何强制浏览器显示“另存为”对话框而不是播放音频文件？我需要它来开发我正在开发的 Chrome 扩展程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:47:54.383

传送音频文件的服务器需要提供正确的`Content-Disposition`HTTP 标头以触发在所有浏览器上可靠地显示“另存为”对话框。如果你使用的是 PHP，你会这样做：

```
header("Content-Disposition: attachment; filename=$filename"); 
```

仅使用 Javascript 无法做到这一点，因为这涉及服务器和浏览器之间的交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:55:53.490

某些浏览器在 HTML5 中支持，您可以使用 的`download`属性`<a>`：

```
<a href="URL" download="new_filename.extension">Download</a> 
```

兼容性：[http ://caniuse.com/download](http://caniuse.com/download)

参考：[https ://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download](https://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download)

否则，您必须在服务器上进行设置。

# python - Python，从 input() 中删除所需的引号

> ID：16175809
> 
> 赞同：6
> 
> 时间：2013-04-23T17:44:39.430
> 
> 标签：python

好的，我一直在编写一个脚本，但是输入部分发生了一件烦人的事情。根据我拥有的 python 版本，我要么需要为我的输入包含引号，要么不需要。使用 python 2.7，我需要引号；使用 python 3.3，我没有。例如：

```
filename = input('Enter Update File: ')
print(filename) 
```

使用 python 2.7，我需要用引号括起我的输入，否则会引发 NameError；在 python 3.3 中，我没有。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T17:49:13.167

在 Python 2.x 上，您需要使用`raw_input()`而不是`input()`. 在旧版本的 Python 中，`input()`实际上将您键入的内容*作为 Python 表达式求值，*这就是您需要引号的原因（就像您在 Python 程序中编写字符串一样）。

Python 3.x 和 Python 2.x 有很多不同之处；这只是其中之一。但是，您可以使用如下代码解决*此特定差异*：

```
try:
    input = raw_input
except NameError:
    pass

# now input() does the job on either 2.x or 3.x 
```

# c++ - QT5 Html5ApplicationViewer - C++ 调用？

> ID：16175811
> 
> 赞同：2
> 
> 时间：2013-04-23T17:44:43.003
> 
> 标签：c++, qt

我有一个小问题，希望你能帮助我。

首先：我搜索了几天，发现了一些不同的解决方法，但它们都对我不起作用。

我基本上使用 HTML5 和 Javascript 构建了一个小应用程序 - 没问题。但现在我想把所有的东西都保存到一个文件中。这也不是真正的问题，fstreams 很容易。

现在这是我的问题：如何调用我的函数？我尝试了几种方法，比如制作一个 QtObject 和类似的东西，但这当然不起作用，因为我必须将 Javascript 函数与我的 C++ 函数连接起来。正因为如此，我阅读了 JS-Bridge-Docu（[http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html](http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html)），但要么我理解得不够好（这肯定在可能性的领域！），或者它对我的问题不够具体，因为我使用内置的 Html5ApplicationViewer 类而不是 QtWeb 类之一。

你能给我解决方案，或者至少给我一个解决这个问题的方法吗？这真的让我发疯，因为这是我项目中唯一的困难。

目前我的代码是这样的：

```
#include <QApplication>
#include <fstream>
#include "html5applicationviewer.h"

using namespace std;

void initFile() {
    fstream f;
    f.open("music.nxc", ios::trunc|ios::out);
    f << "task main() {" << endl;
    f.close();
}

class fileSave : public QObject {
public:
    void saveToFile();
};

void fileSave::saveToFile() {
    fstream f;
    f.open("music.nxc", ios::out|ios::app);
    f << "success!" << endl;
    f.close();
}

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    Html5ApplicationViewer viewer;
    viewer.resize(1280, 800);
    viewer.setOrientation(Html5ApplicationViewer::ScreenOrientationAuto);
    viewer.showExpanded();

    viewer.loadFile(QLatin1String("html/index.html"));

    initFile();
    fileSave file;

    return app.exec();
} 
```

我知道代码不是很好，但我会在这个问题解决后立即清理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T09:25:06.107

abc.h

```
protected slots:
    void f(); 
```

abc.cpp

```
//in constructor
//make sure that page already loaded
webView->page()->mainFrame()->addToJavaScriptWindowObject("qt", this);

// implement function
void Abc::f()
{
    // do what you want to do
} 
```

abc.js

```
qt.f(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T09:44:05.427

我在Qt WebView中[接口了CodeMirror](https://github.com/CapelliC/loqt/tree/master/lqUty)，这里是基本接口

```
void CodeMirror::loadFinished(bool ok) {
    emit userMessage(log, QString("loadFinished %1... (len %2, ok %3)").arg(text.left(20)).arg(text.length()).arg(ok));
    if (ok) {
        frame()->addToJavaScriptWindowObject("proxy", this);
        if (text.length())
            run("editor.setValue(proxy.plainText)");
        run("editor.on(\"change\", function() { proxy.onChange() })");
    }
} 
```

在 CodeMirror.h 中，我有

```
//! serve F1 in editor
Q_INVOKABLE void helpRequest(QString topic); 
```

允许从 JavaScript 调用 Qt。例如，来自 CodeMirror.html

extraKeys: { "F1": function(cm) { proxy.helpRequest(cm.getTokenAt(cm.getCursor()).string) } }

反过来，我有

```
void CodeMirror::run(QString script) const {
    frame()->evaluateJavaScript(script);
} 
```

如您所见，它是从 loadFinished 调用的...

# sql - C 编程语言是否支持 SQL 语句

> ID：16175815
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:44:49.867
> 
> 标签：sql, c

我有一个 flyport wifi 微芯片，它在 c 代码上运行。我想用它更新一个数据库。我很难弄清楚如何使用它将 sql 语句发送到我的数据库。有谁知道如何在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:46:33.650

C 本身无法做到这一点。您将需要一个提供`C`-interface 的库。

# jquery - jQuery insertAfter 从 iFrame 到 Parent

> ID：16175816
> 
> 赞同：1
> 
> 时间：2013-04-23T17:44:52.303
> 
> 标签：jquery, iframe

在父文件中，我有：

```
<p id="successmsg">Text.</p>        
<iframe src="file.php" name="calcFrame"></iframe> 
```

里面 file.php 是：

```
<script>
jQuery(window.parent.document).ready(function() { jQuery('<p>Text to be inserted.</p>').insertAfter('#successmsg'); });
</script> 
```

脚本没有影响。我试过 jQuery（文档）。我不确定是否需要做任何事情，比如 window.parent.document 让 jQuery 知道 id 在父页面内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:48:51.083

试试这样：

```
$('#successmsg', window.parent.document).after('<p>Text to be inserted.</p>'); 
```

[**Jsbin 示例**](http://jsbin.com/ifubur/1/edit)

# twitter-bootstrap - 如何让 Twitter Bootstrap 的 Scrollspy 插件与 LazyLoad 一起使用

> ID：16175817
> 
> 赞同：2
> 
> 时间：2013-04-23T17:44:59.980
> 
> 标签：twitter-bootstrap, lazy-loading, scrollspy

我有一长页的 Divs。有的有图片，有的有文字。我将[Scrollspy](http://twitter.github.io/bootstrap/javascript.html#scrollspy)附加到导航栏，当我向下滚动 Div 列表时它会突出显示。

因为有很多图像，所以我也安装了[LazyLoad](http://www.appelsiini.net/projects/lazyload)。

我面临的挑战是，在带有图像的 Div 上，延迟加载似乎导致 scrollspy 无法正确读取 Div 的高度。这意味着在当前 div 完成滚动之前，scrollspy 会突出显示下一个 div 的导航。

这是我拥有的代码的简化版本：

```
 <body>

    <ul class="nav nav-list bs-docs-sidenav ">
      <li><a href="#one">One</a></li>
      <li><a href="#two">Two</a></li>
      <li><a href="#three">Three</a></li>
    </ul>

    <div id="one">
      text
      text
      text
    </div>

    <div id="two">
      <p>
      <img class="lazy" src="images/loading.gif" data-original="images/two.png"  width="600" height="400" >
      <noscript><img src="images/two.png" width="600" height="400" ></noscript>
      </p>
       <p>
      <img class="lazy" src="images/loading.gif" data-original="images/two.png"  width="600" height="400" >
      <noscript><img src="images/two.png" width="600" height="400" ></noscript>
      </p>
    </div>

    <div id="three">
      text
      text
      text
    </div>

    <!-- bootstrap activations -->
    <script type="text/javascript"> 
        $('body').scrollspy()
    </script>

    <!-- lazy load -->
    <script src="scripts/jquery.lazyload.min.js" type="text/javascript"></script>
    <script type="text/javascript"> 
        $("img.lazy").show().lazyload({ 
            threshold : 100,
            effect : "fadeIn",
        }); 
    </script> 

    </body> 
```

...所以在上面的代码中，当用户仍在滚动包含图像的“二”时，导航栏中的“三”被突出显示。我相信我可能不得不对 Scrollspy 对 DOM 的“刷新”做一些事情，但不太清楚如何做到这一点，或者它是否能解决问题：

```
 $('[data-spy="scroll"]').each(function () {
      var $spy = $(this).scrollspy('refresh')
    }); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T03:37:40.837

每当加载图像时，这将调用刷新。

```
 <script type="text/javascript"> 
        $("img.lazy").show().lazyload({ 
            threshold : 100,
            effect : "fadeIn",
            load : function() {
             $('[data-spy="scroll"]').each(function () {
            var $spy = $(this).scrollspy('refresh')
            });
        }); 
    </script> 
```

# jquery - 使用 JS SDK 和 Ajax 保存用户配置文件信息会引发代码 190

> ID：16175818
> 
> 赞同：3
> 
> 时间：2013-04-23T17:45:01.443
> 
> 标签：jquery, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我在网站上使用 Facebook Connect。
我登录用户。我要求获得 publish_stream、user_about_me 以及其他权限

使用 JS SDK **FB.login**函数，我检查响应。**authResponse**对象，然后通过**jQuery Ajax**将以下数据发布到单独的 php 文件中进行处理：

*   response.authResponse.accessToken
*   response.authResponse.userID

process.php 文件通过$_POST 获取这些参数，并将uid、token、name 等保存到数据库中。

> [https://graph.facebook.com/](https://graph.facebook.com/) $uid?access_token=$token

然后在同一个文件中，我尝试将他的用户令牌交换为扩展的

> [https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=) $appid&client_secret=$appsecret&grant_type=fb_exchange_token&fb_exchange_token=$token

**我不知道出了什么问题，但我得到以下信息**

![代码 190](https://i.stack.imgur.com/xm4Ip.jpg)

有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:19:49.737

如果您的 $token 被验证为有效，那么您的 $appid 或 $appsecret 变量必须设置不正确。

打印出整个字符串并验证 appId 和 appSecret 应该是什么。

*请注意，如果您在交换访问令牌之前“手动”注销 facebook，则（短期）令牌将失效并且令牌交换将失败。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T15:31:08.130

一个简单的解决方案可能是在 php 文件中使用 PHP SDK：

[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

我猜你正在使用 AJAX 调用 php 文件，所以你可能需要使用 PHP SDK 的“setAccessToken”函数设置访问令牌。之后，使用“setExtendedAccessToken”，无需自己做所有这些事情，PHP SDK 是官方的。

# javascript - Facebook JS SDK 要求太多权限

> ID：16175819
> 
> 赞同：4
> 
> 时间：2013-04-23T17:45:01.353
> 
> 标签：javascript, facebook, sdk, permissions

我设置了一个 Facebook 选项卡来请求用户电子邮件的许可 - 这工作正常，但出现的对话框显示“ **Appname 想要访问您的公开个人资料、朋友列表和电子邮件地址。**'

这会降低应用程序的参与度——我不想要公开的个人资料或朋友列表。

代码如下，假appId：

```
 var useremail;
    window.fbAsyncInit = function() {
        FB.init({
            appId: '01234567890', 
            cookie: true, 
            xfbml: true,
            oauth: true
        });
        FB.login(function(response) {
            if (response.authResponse) {
                FB.api('/me', function(response) {
              useremail=response.email;
              //Do stuff
                });
            } else {
                //No access
            }
        },{scope: 'email'});
    };
    (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }()); 
```

即使我删除了电子邮件范围请求，它仍然声称我在用户的公开个人资料和朋友列表之后。以前没有这个问题，它曾经显示友好的可自定义对话框，您可以在“应用程序”>“设置”>“权限”区域中预览。

我找不到任何其他可能导致此问题的设置。任何想法，提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T23:16:12.750

我将此标记为已回答，该问题在[http://www.insidefacebook.com/2012/12/12/how-changes-to-facebooks-app-auth-process-affect-developers/](http://www.insidefacebook.com/2012/12/12/how-changes-to-facebooks-app-auth-process-affect-developers/)

简而言之，在通过 Javascript SDK 登录时显示的权限对话框中，Facebook 已将“基本信息”重命名为“公共个人资料和朋友列表”。

我们正在恢复在我们所做的 Facebook 比赛中手动填写电子邮件字段，这可能会导致更多的参与，而不是被迫在访客脸上抛出如此不祥的声音对话，让人们理所当然地说“不，谢谢”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:04:04.243

你看到

```
FB.api('/me', function(response) { 
```

线？将 /me 替换为 /email 应该可以。

我从 Graph API 得到这个。

# java - 用于几种请求的 JMX Bean

> ID：16175822
> 
> 赞同：0
> 
> 时间：2013-04-23T17:45:08.600
> 
> 标签：java, performance, jmx, jconsole

我想显示特定请求类型的性能统计信息。当 Controller 类从浏览器获取 HTTP 请求时，它会将请求 xml 编组到请求对象中。从请求对象我可以得到请求类型。
是否可以为特定请求类型注入 JMX MBean 并将其广播到 JConsole？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:52:23.070

> 是否可以为特定请求类型注入 JMX MBean 并将其广播到 JConsole？

Jconsole 轮询统计信息，您不能“广播”您定义的请求类型，因为该类不在 Jconsole jar 中。

您可以做的是在映射中保留请求类型的计数，然后根据需要返回`String[]`字符串`type -> count`输出。就像是：

```
public String[] getResultTypeCount() {
     List<String> list = new ArrayList<String>();
     for (Map.Entry<String, Integer> entry : typeMap.entrySet()) {
         list.add(entry.getKey() + " => " + entry.getValue());
     }
     return list.toArray(new String[list.size()]);
} 
```

您可能想要查看[JMX 通知](http://docs.oracle.com/javase/tutorial/jmx/notifs/)。

# excel - 如何在不使用任何 VBA/宏的情况下清除命名范围

> ID：16175823
> 
> 赞同：0
> 
> 时间：2013-04-23T17:45:18.757
> 
> 标签：excel

我试图找出一种方法来插入一个按钮或类似的按钮，当按下它时，将清除命名范围的所有成员。

基本上，如何复制这个：

```
Private Sub CommandButton1_Click()

    Range("Input_Cells").ClearContents

End Sub 
```

我想要的是有一个按钮，或一些类似类型的可点击/可切换操作，当按下时会清除命名范围的内容。我可能可以使用类似于下面的列表框来管理它，但我宁愿有一个突出的按钮。

```
=if(list_option = "clear", input_cells = "", ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:09:10.380

如果没有代码来控制它们，按钮不会做任何事情。即使您使用向导来制作按钮，仍然有代码。

如果您试图清除表格，那么您就不走运了。但是，如果您只想隐藏结果选项卡中的数据：

1.  如果用户想清除结果单元格，请指导用户在单元格 A1 中输入“1”。

2.  然后在您的结果单元格中，使用`=if(A1<>"1","Some Result","")`

这将具有由用户自行决定“隐藏”结果的效果。

# solr - Solr：如何实现这个逻辑？

> ID：16175828
> 
> 赞同：0
> 
> 时间：2013-04-23T17:45:29.760
> 
> 标签：solr

我有以下情况。假设我有一张像这样的大桌子。

```
Id(unique)     returnMe             desc                       name         value
1              user1            all those living in usa        country           USA
2\.             user2            all those like game            game              football
3\.             user1            my hobbies are                 hobby             guitar 
```

现在，我如何获得以下查询的结果（returnMe）。

```
1\. For all those users who live in usa AND like guitar
2\. For all those users who live in usa OR like guitar. 
```

无论如何请不要修改查询。

对于我的 solConfig.xml 'desc' 、 'name' 、 'value' 是可搜索的、可索引的字段。

谢谢你的帮助。

好吧，我正在编辑这个来解释我的逻辑..

```
Step 1: Break query on AND like (live in USA) AND (like guitar)
Step 2: Then select returnMes from first query and returnMes from second query.
Step 3: Take common returnMes, returned from first query and second query. 
```

Solr 有什么办法可以做到这一点。我们可以通过 Solr“加入”还是不通过或其他方式来做到这一点？我确实想在我的 PHP 中这样做，这将是巨大的开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:30:05.047

您将需要以某种方式修改查询。解析查询并向其添加括号以及可能要搜索的字段名称的简单步骤。您可以相当容易地将这些查询转换为：

```
(For all those users who live in usa) AND (like guitar)
(For all those users who live in usa) OR (like guitar) 
```

或者也许你可以删掉“所有那些”并且简单地拥有的用户：

```
(live in usa) AND (like guitar)
(live in usa) OR (like guitar) 
```

并将查询字段设置为`value`. 当然，如果您有一个带有`value=users`或类似性质的文档，您可能会遇到问题，因为它会搜索该`value`字段中存在的每个术语。

如果您真的希望能够使用自然语言，那么您可以看看[OpenNLP](http://wiki.apache.org/solr/OpenNLP)项目。

# rubymine - Rubymine：我如何做到这一点，以便当我在双引号字符串中键入 # 时，它会自动填充 #{}

> ID：16175835
> 
> 赞同：5
> 
> 时间：2013-04-23T17:45:57.793
> 
> 标签：rubymine

当我在双引号字符串中时

如果我输入 #，我希望 ruby​​mine 自动填充 #{cursor_here}

这将允许我在里面输入 first_name，然后从括号中跳出标签，这样我就可以快速继续输入。

```
first_name = "Mark"
sentence = "Hi my name is #{first_name}" 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:06:23.647

我想到了。

偏好 | 编辑 | 一般 | 智能钥匙 |

在 Ruby 部分下，选中“在 # 上的字符串中开始 ruby​​ 插值”框。

# opencl - OpenCL 计算冻结屏幕

> ID：16175837
> 
> 赞同：5
> 
> 时间：2013-04-23T17:45:59.040
> 
> 标签：opencl, freeze

正如标题所说，当我运行我的`OpenCL`内核时，整个屏幕停止重绘（显示器上显示的图像保持不变，直到我的程序完成计算。即使我从笔记本上拔下它并重新插入也是如此 - 总是显示相同的图像）并且计算机似乎也没有对鼠标移动做出反应 - 光标停留在同一位置。

我不确定为什么会这样。这可能是我的程序中的错误，还是这是标准行为？

在谷歌上搜索时，我在 AMD 的论坛上发现[了这个](http://devgurus.amd.com/thread/140792)帖子，那里的一些人建议这是正常的，因为 GPU 在忙于计算时无法刷新屏幕。

如果这是真的，还有什么办法可以解决这个问题吗？

我的内核计算可能需要几分钟的时间，并且让我的计算机在整个这段时间内几乎无法使用真的很痛苦。

EDIT1：这是我当前的设置：

*   显卡是 ATI Mobility Radeon HD 5650，具有 512 MB 内存和来自 AMD 网站的最新 Catalyst beta 驱动程序
*   图形是可切换的 - 英特尔集成/ATI 专用卡，但我已禁用 BIOS 中的切换，否则我无法让驱动程序在 Ubuntu 上运行。
*   操作系统是 Ubuntu 12.10（64 位），但这也发生在 Windows 7（64 位）上。
*   我的显示器通过 HDMI 插入（但笔记本屏幕也冻结了，所以这应该不是问题）

EDIT2：所以在玩了一天我的代码之后，我从你的回复中得到了建议，并将我的算法更改为这样的东西（在伪代码中）：

```
for (cl_ulong chunk = 0; chunk < num_chunks; chunk += chunk_size)
{
  /* set kernel arguments that are different for each chunk */
  clSetKernelArg(/* ... */);

  /* schedule kernel for next execution */
  clEnqueueNDRangeKernel(cmd_queue, kernel, 1, NULL, &global_work_size, NULL, 0, NULL, NULL);

  /* read out the results from kernel and append them to output array on host */
  clEnqueueReadBuffer(cmd_queue, of_buf, CL_TRUE, 0, chunk_size, output + chunk, 0, NULL, NULL);
} 
```

所以现在我在主机上拆分整个工作负载并将其分块发送到 GPU。对于每个数据块，我将一个新内核排入队列，并且从中获得的结果以正确的偏移量附加到输出数组中。

这就是你的意思是计算应该被划分吗？

这似乎是解决冻结问题的方法，甚至现在我能够处理比可用 GPU 内存大得多的数据，但我还必须进行一些良好的性能测量，看看什么是好的块大小.. .

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:41:03.700

每当 GPU 运行 OpenCL 内核时，它就完全专用于 OpenCL。一些现代 Nvidia GPU 是个例外，我认为从 GeForce GTX 500 系列开始，如果这些内核不使用所有可用的计算单元，它们可以运行多个内核。

您的解决方案是将您的计算分成多个短内核调用，这是最好的全面解决方案，因为它甚至可以在单个 GPU 机器上工作，或者投资购买便宜的 GPU 来驱动您的显示器。

如果要在 GPU 上运行长内核，则必须禁用 GPU 的超时检测和恢复，或者使超时延迟长于最大内核运行时间（更好地因为仍然可以捕获错误），请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569918%28v=vs.85%29.aspx "这里")了解如何执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:07:12.670

每次我遇到显示冻结或“显示驱动程序停止响应并已恢复”时，都是由于错误。它可以冻结整个系统，我唯一能做的就是重置。相反，现在我先在 CPU 上进行开发。这永远不会使我的整个系统崩溃。这种方式也更容易调试，因为我可以使用 printf。一旦我的代码在 CPU 上没有错误，我就会在 GPU 上尝试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T02:16:53.913

我是opencl的新手，遇到了类似的问题。我发现一个简短的计算工作正常，但一个较长的计算会冻结鼠标光标。对于我的问题，Windows 在托盘区域留下了一个黄色三角形，并在事件日志中放置了一条关于“显示驱动程序停止响应并已恢复”的消息。我找到的解决方案是将计算分解为每个不超过几秒钟的小部分。这些背靠背运行，但显然让视频驱动程序足够让它开心。如果我将 global_work_size 设置为足够高的值以最大化吞吐量，视频响应会非常缓慢，但驱动程序重新启动/鼠标冻结问题永远不会发生。

# r - 使用变量在 for 循环中创建数据框和命名列

> ID：16175838
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:46:01.527
> 
> 标签：r, for-loop, dataframe, assign

我正在尝试创建一堆数据框，并在循环中修改这些数据框中的变量。下面的代码*几乎*可以工作，除了它创建了一大堆形式的对象`df_1$x_cs`，`df_1$yx_cs` ......我想要的是5个数据帧，像往常一样包含$元素。

```
nl<-seq(1,5)
for (i in nl) {
  assign(paste0("df_",nl[i]),data.frame(x=seq(1:10),y=rnorm(10)))
}
ls()[grep("df_",ls())]
nls<-ls()[grep("df_",ls())]
for (df in nls) {
  print(df)
  for (var in names(get(df))) {
    print(var)
    assign(paste0(df,"$",paste0(var,"_cs")),cumsum(get(df)[[var]]))
  }
}
ls()[grep("df_",ls())] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T23:25:00.230

以下是如何翻译您的代码以使用 a`list`来执行此操作，而不是全局环境中的名称：

```
lst <- list()
for (i in seq(1,5)) {
  lst[[i]] <- data.frame(x=seq(1:10),y=rnorm(10))
}
lst <- lapply(lst, function(temp) {
  for (var in names(temp)) {
    temp[[paste0(var,"_cs")]]<-cumsum(temp[[var]])
  }
  return(temp)
})

summary(lst[[1]])
##        x               y                x_cs         y_cs       
##  Min.   : 1.00   Min.   :-2.7610   Min.   : 1   Min.   :-5.004  
##  1st Qu.: 3.25   1st Qu.:-1.4388   1st Qu.: 7   1st Qu.:-2.652  
##  Median : 5.50   Median :-0.7308   Median :18   Median :-1.656  
##  Mean   : 5.50   Mean   :-0.4338   Mean   :22   Mean   :-1.908  
##  3rd Qu.: 7.75   3rd Qu.: 0.7028   3rd Qu.:34   3rd Qu.:-1.207 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T13:18:32.540

非常感谢 R-Help 列表中的 Blaser Nello 解决了这个问题。我认为最好分享答案。

> 这里有两种可能的方法：
> 
> 这会稍微简化你的代码。但是它将 x_cs 的名称更改为 cs.x。

```
for (df in nls) {
  assign(df, cbind(get(df), cs=apply(get(df), 2, cumsum)))
  } 
```

> 这更接近你所做的。

```
for (df in nls) {
  print(df)
  for (var in names(get(df))) {
    print(var)
    assign(df, within(get(df), assign(paste0(var,"_cs"),
cumsum(get(df)[[var]]))))
  }}
ls()[grep("df_",ls())] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-27T23:11:12.593

我找到了一种更简单、更清晰的方法来做到这一点，我认为这将是我未来的首选。这很好用：

```
for (i in seq(1,5)) {
  assign(paste0("df_",i),data.frame(x=seq(1:10),y=rnorm(10)))
  rm(i)
}

nls<-ls()[grep("df_",ls())]
for (df in nls) {
  temp<-get(df)
  for (var in names(temp)) {
    temp[[paste0(var,"_cs")]]<-cumsum(temp[[var]])
  }
 assign(df, temp)
  rm(var,df,temp)
}
summary(get(nls[1])) 
```

# html - 为什么我的表格没有显示边框？

> ID：16175841
> 
> 赞同：0
> 
> 时间：2013-04-23T17:46:06.480
> 
> 标签：html, css, asp.net-webpages

我修改了由 _SiteLayout.cshtml 引用的 Site.css 文件，以尝试为表格内容添加边框：

```
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin-top: 0.75em;

    /* added below 4/23/2013 and commented out: border: 0 none; */
    border-color: #600;
    border-width: 0 0 1px 1px;
    border-style: solid;
}

. . .

td {
    padding: 0.25em 2em 0.25em 0em;

    /* added below 4/23/2013 and commented out: border: 0 none;*/
    border-color: #600;
    border-width: 1px 1px 0 0;
    border-style: solid;
    margin: 0;
    padding: 4px;
    background-color: #FFC;
} 
```

我的桌子没有边框，但是……为什么不呢？

## 更新

好的，现在，在尝试为表格添加边框之后，突然间 jQuery 不再工作了。所以这是独家新闻：

_SiteLayout.cshtml 引用 .css 文件：

```
<link href="~/Content/Site.css" rel="stylesheet" type="text/css" /> 
```

在那个文件中，我现在有：

```
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin-top: 0.75em;

    /* added below 4/23/2013 and commented out: border: 0 none; 
    border-color: #600;
    border-width: 0 0 2px 2px;
    border-style: solid;*/
    border: 1px solid #600;
}

td {
    padding: 0.25em 2em 0.25em 0em;

    border:1px solid #600;
    margin: 0;
    padding: 4px;
    background-color: #FFC;
} 
```

（省略号表示 table 和 td 之间还有其他标签，省略以避免混淆）

我的整个 Default.cshtml 是：

```
@{
    Layout = "~/_PlatypusLayout.cshtml";
    Page.Title = "Home Page";
}
        <input type="submit" id="submit" value="Get SSCSSETUP.XML" />
        <div id="Platypus_Setup">
        </div>
        <input type="submit" id="submit2" value="Get PlatypusSETUP_000002.XML" />
        <div id="Platypus_Setup2">
        </div>
        <input type="submit" id="submit3" value="Get PlatypusSETUP_000003.XML" />
        <div id="Platypus_Setup3">
        </div>
<script>
    $(document).ready(function () {
        $('#submit').click(function () {
            $.ajax({
                type: "GET",
                url: "DuckbillSETUP.XML",
                dataType: "xml",
                success: function (PlatypusSetupRec) {
                    var Platypussetup = "<table><thead><th>Platypus Number</th><th>Platypus Name</th></thead>";
                    $(PlatypusSetupRec).find('Platypus').each(function () {
                        var PlatypusNum = $(this).find('PlatypusNumber').text();
                        var PlatypusName = $(this).find('PlatypusName').text();
                        Platypussetup += "<tr>";
                        Platypussetup += "<td>" + PlatypusNum + "</td>";
                        Platypussetup += "<td>" + PlatypusName + "</td>";
                        Platypussetup += "</tr>";
                    });
                    Platypussetup += "</table>";
                    $('#Platypus_Setup').append(Platypussetup);
                },
                error: function (xhr) {
                    alert(xhr.status);
                }
            });
            return false;
        });
    });
</script> 
```

该表在单击第一个按钮*时*显示，但是更改 Site.css 或因为我在 Chrome 中按 Ctrl+R 现在导致单击处理程序失聪或脱钩或以其他方式出现故障......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:56:07.097

如果 table 和 td 样式定义之间的 3 个点也出现在您的代码中，则可能是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:53:42.033

尝试`border:1px solid #600;`而不是你目前拥有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:56:13.590

这是一个[JSFiddle](http://jsfiddle.net/agPAV/)

HTML：

```
<table>
<tr><td>Test</td></tr>
<tr><td>Test</td></tr>
<tr><td>Test</td><td>Test 2</td></tr>
</table> 
```

CSS：

```
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin-top: 0.75em;
    border: 1px solid #600;
}

td {
    padding: 0.25em 2em 0.25em 0em;
    border: 1px solid #600;
    margin: 0;
    padding: 4px;
    background-color: #FFC;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T19:16:08.950

> “ReferenceError: $ 未定义 [Break On This Error] ...

这表明您的脚本不知道是什么`$`。有2个可能的问题：

1.  你没有导入 jQuery（不太可能）
2.  您在实际脚本之后导入了**jQuery.js 。**

检查文件的导入顺序：首先是 jQuery，然后是脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T17:52:40.050

尝试这样写：

边框：1px 实心#600；

# iphone - MFMailComposeViewController 中的图像预览为空白

> ID：16175843
> 
> 赞同：0
> 
> 时间：2013-04-23T17:46:10.373
> 
> 标签：iphone, ios, ios6, xamarin.ios

在我的 iOS 应用程序中，我允许用户从相册中选择图像或从相机中捕获图像。紧接着，我展示了一个 MFMailComposeViewController，其中包含选择/捕获的图像作为附件。

图像已正确附加和发送，但电子邮件的照片缩略图预览区域在所有情况下都是空白的，**除非选择了相册中的最新照片**。如果捕获图像或从相册中选择旧图像，则它是空白的，如下所示：

![截屏](https://i.stack.imgur.com/wNYvz.png)

我附加捕获/选定图像的代码是：

```
MFMailComposeViewController email = new MFMailComposeViewController ();
email.SetToRecipients(new string[] {"test@test.com"});
email.SetSubject("Photo for " + CurrentCompany.DbaName + " (" + CurrentCompany.CoKey.ToString() + ")");

//imageToEmail is a UIImage that is set in the callback from the image capture/selection process
email.AddAttachmentData (imageToEmail.AsPNG(), "image/png", "photo.png");

email.Finished += HandleFinished;
NavigationController.PresentViewController(email, true, null); 
```

为什么预览是空白的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:49:25.493

万一以后有人遇到这个问题，我尝试了几种不同的方法来保存 UIImage（应用程序的个人存储位置、相册等），但是没有一种不同的方法可以将图像附加为 PNG。将 UIImage 保存为 JPEG 是为我解决的问题。更改此行：

```
email.AddAttachmentData (imageToEmail.AsPNG(), "image/png", "photo.png"); 
```

至：

```
email.AddAttachmentData (imageToEmail.AsJPEG(), "image/jpg", "photo.jpg"); 
```

允许所有捕获或选择的图像在电子邮件中显示预览缩略图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:54:56.583

尝试这个 ：

```
 email.AddAttachmentData (imageToEmail.AsPNG(), "image/png", "photo.png"); 
```

将此行替换为：

```
 NSData *data = UIImagePNGRepresentation(imageToEmail);//Your uiimage convert to nsdata
    [email addAttachmentData:data mimeType:@"image/png" fileName:@"Myphoto"]; 
```

# c++ - 向后打印列表

> ID：16175844
> 
> 赞同：0
> 
> 时间：2013-04-23T17:46:12.067
> 
> 标签：c++

我遇到了这个程序的问题，它是向前和向后打印出一个列表，但是当我向后打印出列表时，列表中的第一个数字是一个随机的大量数字而不是正确的数字。例如

```
0 1 2 3 4 5 6 7 8 0
4286398 8 7 6 5 4 3 2 1 0 
```

谁能解释一下我的代码有什么问题。

还有谁能告诉我如何将计数器从 printList 函数传递给一个名为 checkList() 的新函数，以便计数器在 checkList() 中的值与 printList() 末尾的值相同。

代码：

```
void printList(int array1[]){
int counter = 0;
int x;
ifstream theFile("list.txt");

while(theFile >> x){
    array1[x] = x;
    cout << array1[x] << " ";
    counter = counter + 1;
}
cout << endl << counter << endl;;

int n = counter;

for(int i = n -1; i >= 0; i--){
    cout << array1[i] << " ";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T17:49:57.313

这是罪魁祸首：

```
array1[x] = x; 
```

如果您的数组输入值为`0 1 2 3 4 5 6 7 8 0`，那么在循环的最后一次迭代中，您正在执行`array1[0] = 0`. 这会覆盖数组中的第一项，同时增加计数器。然后，当您反转它时，它`array[9]`包含垃圾值，因为您从未设置它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T17:52:57.937

你有问题是因为线路`array1[x]=x;`。如果文件中的数字是 0..9，那么您的代码实际上可以工作，但最终数字是另一个 0，因此您不要将 array1[9] 设置为任何值。

您应该有一些用于索引数组的变量，例如：

```
int counter = 0;
while(theFile >> x){
    array1[counter] = x;
    cout << array1[counter] << " ";
    counter = counter + 1;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T17:51:09.040

你在做

```
array1[0] = 0;
array1[1] = 1;
array1[2] = 2;
array1[3] = 3;
array1[4] = 4;
array1[5] = 5;
array1[6] = 6;
array1[7] = 7;
array1[8] = 8;
array1[0] = 0; // here 
```

array1[9] 未初始化

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T17:56:36.360

您在代码中有一些严重的问题：

```
ifstream theFile("list.txt");
while(theFile >> x){
   array1[x] = x;//^^this is evil
   cout << array1[x] << " ";
   counter = counter + 1;
}
cout << endl << counter << endl;;
                             //^^extra colon, though not wrong here but not good practice 
```

您从文件中读取并填充数组，在您的特殊情况下，您有：

```
0 1 2 3 4 5 6 7 8 0 
```

你有 10 个元素，但你的`array1`意志最终会`9`因为上次阅读`0`和再次`array1[0]`被写入`0`。因此，当您输出 时`array1`，您将永远不会得到`10`数字，因为您的数组实际上存储了 9 个数字。这就是为什么你在尝试访问`array1[9]`一些垃圾原始内存值时看到垃圾值的原因，该值尚未被填充。

相反，您可以尝试执行以下操作：

```
int counter = 0;
int x;
ifstream theFile("list.txt");

while(theFile >> x){
    array1[counter] = x;
    cout << array1[counter] << " ";
    counter = counter + 1;
}
cout << endl << counter << endl;; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:50:57.760

您向上计数错误并最终在您的数组之后遇到未初始化的内存。您应该将数组的长度作为参数传递给您的函数。
随着数组衰减为指针，您将无法恢复其长度。

```
void printList(int array1[], into size){ } 
```

那么你就不需要那么复杂地计算它的长度了。

# css - 棘手的 CSS 选择器

> ID：16175845
> 
> 赞同：-1
> 
> 时间：2013-04-23T17:46:13.837
> 
> 标签：css, css-selectors

我需要一段 CSS 代码（或狡猾的 hack），它将产品页面上的下拉 DIV 的宽度指定为 436 像素的宽度：

[http://warehouse.haddrellspoint.com/product/calcutta-can-bottle-coolers-149252-1.htm](http://warehouse.haddrellspoint.com/product/calcutta-can-bottle-coolers-149252-1.htm)

（点击产品价格下的“选择选项”查看有问题的DIV）

麻烦制造者 DIV 的类名是“ddChild”。但是，我提出的用于修改其宽度的任何和所有 CSS 声明都被忽略了。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:49:41.970

尝试这个：

```
#sevarationlist_msdd .ddChild {
    width:436px !important;
} 
```

由于父级的 id 选择器更具体，它应该覆盖现有的`!important`宽度设置`336px`（见下图）。地狱，你甚至可以侥幸逃脱，`width:auto !important;`如果将来由于某种原因宽度不同，这将避免头痛。

![在此处输入图像描述](https://i.stack.imgur.com/pinGr.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:54:47.917

我玩过你的页面。在此处删除宽度元素：

```
<div id="sevariationlist_child" class="ddChild" style="height: 157px; z-index: 4999; display: block; width: 470px;"> <!--REMOVE WIDTH --> 
```

和这里：

```
.dd .ddChild {
    background-color: #FFFFFF;
    border: 1px solid #999999;
    display: none;
    margin: 0;
    overflow-x: hidden !important;
    overflow-y: auto;
    position: absolute;
    width: 336px !important;/*REMOVE THIS*/
} 
```

然后在这里应用宽度：

```
.dd .ddChild a.selected {
    background-color: #999999;
    color: #FFFFFF;
    width: 500px; /*Visible width*/
} 
```

我使用 FireBug 并在其中修改 CSS 发现了这一点。如果您还没有使用它，我强烈推荐它。

# ios - 加密或保护存储在 iOS 应用程序的 NSDocumentsDirectory 中的文件

> ID：16175846
> 
> 赞同：0
> 
> 时间：2013-04-23T17:46:14.723
> 
> 标签：ios, ipad, nsdocumentdirectory, ios-enterprise

我的其中一个产品有自定义要求，我需要保护或加密存储在 NSDocumentsDirectory 文件夹中的文件。即使这些文件被邮寄给其他人（该应用程序具有邮寄文件的能力），他或她将无法在不使用我的应用程序的情况下打开该文件（我将使用电子邮件附件的打开功能）。所以基本上只有应用程序可以访问所有这些文档，没有应用程序，文档应该只是垃圾。有没有办法做到这一点，或者以前有没有人做过。

我也看到了[这一点](https://stackoverflow.com/questions/4605311/ios-protecting-files-with-a-custom-encryption-key)，但无法获得完整的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:51:05.813

如果您想要一种快速简便的方法来处理不需要严格安全性的数据，只需使用固定密码压缩文件即可。

ZipArchive 是一个很好的库。

对于更严肃的方法，请查看[iOS - Protecting files with a custom encryption key?](https://stackoverflow.com/questions/4605311/ios-protecting-files-with-a-custom-encryption-key?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:12:46.413

您提到的另一篇文章涉及密码保护文件的概念，我遇到了与我的自定义文件相同的问题，我们的团队在其中将文件内容编码到随机位置并保存。只有我们的应用程序才能正确解码它，因为我们有密钥 :)

这是一个 Windows 应用程序，它也可以在这里工作。

# javascript - 如何设置高图表错误栏的 x 值

> ID：16175848
> 
> 赞同：3
> 
> 时间：2013-04-23T17:46:27.280
> 
> 标签：javascript, charts, highcharts

是否可以在 HighCharts 中指定误差线（置信区间）的坐标`x`和`y (min, max)`坐标？我可以将此格式用于普通系列，但不能在`type: 'errorBar'`设置时使用。

即，而不是这个：

```
data: [
    [0.06, 0.175], 
    [], [], [], 
    [0.49, 0.65], 
    [], [], [], [], [], 
    [0.395, 0.57], 
    [], [], [], [], [], [], [], 
    [0.17, 0.34], 
    [], [], [], [], [],
    [0.07, 0.17]
] 
```

我希望能够做到这一点：

```
data: [
     {x:0, y:[0.05, 0.2]}, 
     {x:4, y:[0.48, 0.68]}, 
     {x:10, y:[0.38, 0.58]}, 
     {x:18, y:[0.16, 0.36]}, 
     {x:24, y:[0.03, 0.23]}
] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T17:59:24.690

你可以这样做，只是不是那样 :) 数据点对象的参数是 x、低、高。

您可以指定两种方式，或者作为对象：

```
{x:0, low:0.05, high:0.2} 
```

或作为一个简单的数组：

```
[0, 0.05, 0.2] 
```

例子：

[http://jsfiddle.net/JVNjs/290/](http://jsfiddle.net/JVNjs/290/)

# php - 如何在 Codeigniter 中设置 character_limiter()

> ID：16175851
> 
> 赞同：0
> 
> 时间：2013-04-23T17:46:34.240
> 
> 标签：php, codeigniter, character

我是 Codeigniter 的新手。现在我想在视图中设置字符限制。首先，使用 $query_result->result() 从数据库中获取数据，然后使用 foreach() 将其显示在视图中。

这是我的控制器、模型和视图：

```
public function index() {
$data = array();
$data['category'] = $this->product_model->selectAllcategory();
$data['randProduct'] = $this->product_model->selectRandomProduct();
$data['products'] = $this->product_model->selectAllProduct();
$data['maincontent'] = $this->load->view('home', $data, true);
$data['title'] = 'Welcome Russel Store';
$this->load->view('index', $data);
} 
```

我的模型：

```
public function selectAllProduct() {
$this->db->select('*');
$this->db->from('product');
$this->db->where('status', 1);
$this->db->order_by('product_id', 'desc');
$query_result = $this->db->get();
$result = $query_result->result();
return $result;
} 
```

我想在视图中设置字符限制：

```
http://russelstore.mastersite.info

echo character_limiter($result->product_title, 25);

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:30:34.010

[http://ellislab.com/codeigniter/user-guide/helpers/text_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/text_helper.html)

您应该导入**文本助手**

在您的控制器中，最好在**构造函数中加载帮助程序、模型和库**

```
function __construct()
{
  parent::__construct();
  $this->load->helper('text');
  $this->load->model('products_model'); //name of your model class

}

function index()
{
  $data['products']=$this->products_model->selectAllProduct();
  $this->load->view('index',$data);
} 
```

在你看来 index.php

```
//This is an example from CI's home page        
//$string = "Here is a nice text string consisting of eleven words.";            
//$string = word_limiter($string, 4);

    foreach($products as $p)
    {
        $limited_word = word_limiter($p[product_title],25);
        echo $limited_word;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-26T13:02:07.990

你可以在那里使用我的代码

```
<?php $artikel=$a->isi;$artikel=character_limiter($artikel,200); ?>
            <p><?php echo $artikel ?></p>
            <a href="<?php echo base_url()."index_cont/list_artikel_kat/".$a->id_artikel; ?>" target="_blank">Selanjutnya</a>
        <?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-16T12:15:56.707

`autoload.php`首先在其中一个或类中加载帮助程序`controller`类。

对于全球使用，请填写**`Autoload.php`**：

```
$autoload['helper'] = array('text'); 
```

或者，如果您只想在一**`controller.php`**类中使用，那么：

```
function __construct()
{
  parent::__construct();
  $this->load->helper('text');
} 
```

然后在你的**`view.php`**：

```
<?php 
  if(!empty($ques)) {
    foreach($ques as $list) { 
      $title = character_limiter($list->Title, 80); // Here we are setting the title character limit to 80
      <?php echo $title;?>
    }
  }
?> 
```

# android - Android TranslateAnimation 在动画期间处理动画后的东西

> ID：16175852
> 
> 赞同：0
> 
> 时间：2013-04-23T17:46:36.667
> 
> 标签：android, animation, android-relativelayout, android-animation

我正在尝试通过动画在 RelativeLayout 上的视图中滑动。一旦视图到位，我必须更改布局的布局参数，以便新视图不会阻塞现有内容。我在动画之后调用代码来更新布局，但它发生在动画之前，导致动画期间一块区域为空白。

以下屏幕是在动画之前、期间和之后：

![动画](https://i.stack.imgur.com/D5JeO.png)

这是代码。相对布局在 onShowAd 中调整。

```
 float fromY = getAdHeight();
        float toY = 0;
        TranslateAnimation slide = new TranslateAnimation(0,0,fromY,toY);
        slide.setDuration(ANIMATION_RATE);
        slide.setFillAfter(true);
        mAdLayout.startAnimation(slide);
        onShowAd();
        mAdLayout.setVisibility(View.VISIBLE); 
```

我尝试了调用可见和其他事物的不同顺序，以及使用处理程序来 postDelayed onShowAd() 等待与 ANIMATION_RATE 相同的时间，但是发生了什么你会盯着黑匣子看它被延迟发布的时间和然后必须等待动画所以情况更糟。在 Windows 中，有一个 API 调用 LOCKWINDOWUPDATE，我可以传入一个窗口句柄以防止更新……Android 中的视图有什么等效的吗？还是有其他想法？

顺便说一句，当将视图滑出时它工作正常。这是相反的代码。onHideAd 是在此修改 layoutparams 的地方。

```
 float toY = ((View) mAdLayout.getParent()).getBottom();
        float fromY = 0;//toY - mAdLayout.getHeight();
        TranslateAnimation slide = new TranslateAnimation(0,0,fromY,toY);
        slide.setDuration(ANIMATION_RATE);
        slide.setFillAfter(true);           
        mAdLayout.startAnimation(slide); 
        mAdLayout.setVisibility(View.GONE);
        onHideAd(); 
```

感谢您的任何建议！

编辑：我添加了监听器，但这并没有解决它。我已将其隔离为“onShowAd()”例程中的以下代码：

```
 RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) mainFragmentContainer.getLayoutParams();
        params.addRule(RelativeLayout.ABOVE, mAdLayout.getId());
        mainFragmentContainer.setLayoutParams(params); 
```

我试图通过使用 handler.postDelayed 调用它来进一步分离它，似乎我将它放在事件链中的任何地方都会导致它在动画本身显示之前发生。很奇怪！:-(

这是更新后的 showAd 例程。我也尝试重新排序一些调用。

```
 float fromY = getAdHeight();
        float toY = 0;
        TranslateAnimation slide = new TranslateAnimation(0,0,fromY,toY);
        slide.setDuration(ANIMATION_RATE);
        slide.setFillAfter(true);
        slide.setAnimationListener(new AnimationListener() {

            @Override 
            public void onAnimationStart(Animation animation) {}

            @Override 
            public void onAnimationRepeat(Animation animation) {}

            @Override
            public void onAnimationEnd(Animation animation) {
                onShowAd();
            }
        });
        mAdLayout.setVisibility(View.VISIBLE);
        mAdLayout.startAnimation(slide); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:00:49.277

您应该使用[AnimationListener](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)来完成您正在寻找的内容。您遇到的问题是因为即使动画在设置为 ANIMATION_RATE 的时间内没有完成，启动动画的调用也会立即返回。

例如滑入：

```
 float fromY = getAdHeight();
    float toY = 0;
    TranslateAnimation slide = new TranslateAnimation(0,0,fromY,toY);
    slide.setDuration(ANIMATION_RATE);
    slide.setFillAfter(true);     
    slide.setAnimationListener(new AnimationListener() {            
        @Override
        public void onAnimationStart(Animation animation) {
        }           
        @Override
        public void onAnimationRepeat(Animation animation) {                
        }           
        @Override
        public void onAnimationEnd(Animation animation) {
             onShowAd();
        }
    });
    mAdLayout.setVisibility(View.VISIBLE);
    mAdLayout.startAnimation(slide); 
```

# java - Servlet 参数与属性

> ID：16175861
> 
> 赞同：4
> 
> 时间：2013-04-23T17:47:09.360
> 
> 标签：java, servlets, attributes

我的问题是 - 如果我使用网守 servlet 将页面转发到其他 servlet，让第二个 servlet 引用参数或创建属性供它们引用更好吗？

假设我有一种形式：

```
<form action=www.ermehgerdpuppies.com/Gatekeeper id = puppyForm> 
    <select name=puppyList>
    <option value=cutePuppyServlet_12>CutePuppy
    <option value=uglyPuppyServlet_14>UglyPuppy
</select></form> 
```

我提交此表单，该表单将发送到 Gatekeeper servlet：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

   if (request.getParameterMap().containsKey("puppyList"))
   {
        String qString = request.getParameter("puppyList");
        String[] qsArray = qString.split("_");
        request.setAttribute("merPuppy", qsArray[1]);
        RequestDispatcher rd = getServletContext().getRequestDispatcher(qsArray[0]);
        rd.forward(request, response);  
    }
} 
```

然后转到cutePuppyServlet（对于这个例子，它转到cutePuppy）

现在在我的cutePuppyServlet.java 中，我可以这样引用数据：

```
request.getParameter("puppyList"); 
```

或者

```
request.getAttribute("merPuppy"); 
```

使用参数，我可以检查它是否存在，以防止炸毁所有东西。我的问题是，哪个更利于可维护性？我应该坚持转发参数还是应该创建一个属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:01:52.127

为内部 servlet 使用参数的优点：

*   如果需要，嵌套的 servlet 可以在没有父 servlet 的情况下独立存在。
*   开发者对参数比较了解（不知道为什么，但很少看到使用请求属性）
*   更少的代码，因为容器隐式地从客户端传递它们。

使用请求属性的优点：

*   包含、转发等将包含它们，因为请求不会改变，尽管它的 URL 可能会改变。
*   这就是属性的实际含义，即组件之间的消息传递。因此，您是在坚持 servlet 设计。

归根结底，这并不重要。我会选择属性，因为我更关心以标准方式做事（即使这是一个没有人关心或遵循的标准），而不是快速做事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T11:02:03.500

我*认为*主要区别在于属性对中的“值”部分可以是 Java 对象，而参数只能是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:52:17.200

如果数据已经作为参数可用，并且在您的设计中始终可以访问（即：您的整个请求周期都可以访问请求参数），并且您认为将其设置为属性没有设计好处，那么将其作为参数访问忘记将其设置为属性。

“少即是多”，我想这就是我想要表达的观点。

# perl - 如何使用 perl 读取文件及其子目录文件

> ID：16175865
> 
> 赞同：0
> 
> 时间：2013-04-23T17:47:17.673
> 
> 标签：perl, recursion

`recursive function`在 Perl 中，我需要从父目录读取文件到它的最后一个文件，任何**子目录**都需要读取这些文件！所以我在我！代码;

```
sub fileProcess{
(my $file_name)=@_;
print "$file_name it is file\n";
}
sub main{
    (my $dir)=@_;
    chdir $dir; 
    my $tmp=`pwd`;
    my @tmp =<*>;
    chomp(@tmp);    
    foreach my $item(@tmp){
        chomp($item);
        if(-d $item){
            dirProcess("$tmp/$item");
        }else{
            fileProcess($item);
        }
    } 
}
sub dirProcess{

    (my $file_name)=@_;

    print ">>the corresponding dir is $file_name<<";    
    main($file_name);

}
my $home="../../Desktop";
chdir $home;
my $path=`pwd`;
main($home); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:06:17.980

这是一个递归搜索的子：

```
sub find_files {
    my ($dir) = @_;
    my (@files, @dirs) = ();
    my (@allfiles, @alldirs) = ();

    opendir my $dir_handle, $dir or die $!;
    while( defined( my $ent = readdir $dir_handle ) ) {
        next if $ent =~ /^\.\.?$/;

        if( -f "$dir/$ent" ) {
            push @files, "$dir/$ent";
        } elsif( -d "$dir/$ent" ) {
            push @dirs, "$dir/$ent";
        }
    }
    close $dir_handle;

    push @allfiles, @{ process_files($_) } for @files;
    push @alldirs, @{ find_files($_) } for @dirs;

    return \@alldirs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:23:25.057

您的代码不起作用的主要原因是，当`dirProcess`它`main`再次调用时，它会调用`chdir`另一个目录。`@tmp`这意味着找不到数组中的其余文件。

为了解决这个问题，我刚刚`chdir $dir`在调用`dirProcess`. 另外我有

*   添加`use strict`和`use warnings`。你必须*始终*将这些放在程序的顶部。

*   `pwd`删除了所有不必要的调用。你知道你现在的工作目录是因为你刚刚设置了它！

*   删除了不必要`chomp`的电话。来自的信息`glob`永远不会有尾随换行符。*确实*需要咀嚼的一个字符串是`$tmp`但你没有这样做！

它仍然不是一段很好的代码，但它可以工作！

```
use strict;
use warnings;

sub fileProcess {
    (my $file_name) = @_;
    print "$file_name it is file\n";
}

sub main {

    (my $dir) = @_;

    chdir $dir;
    my @tmp = <*>;

    foreach my $item (@tmp) {
        if (-d $item) {
            dirProcess("$dir/$item");
            chdir $dir;
        }
        else {
            fileProcess($item);
        }
    }
}

sub dirProcess {

    (my $file_name) = @_;

    print ">>the corresponding dir is $file_name<<\n";
    main($file_name);
}

my $home = "../../Desktop";

main($home); 
```

# python - python pandas数据框按日期条件切片

> ID：16175874
> 
> 赞同：55
> 
> 时间：2013-04-23T17:48:05.480
> 
> 标签：python, dataframe, pandas

我可以使用 python datetime 对象读取和切片 pandas 数据帧，但是我被迫只使用索引中*的现有日期*。例如，这有效：

```
>>> data
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 252 entries, 2010-12-31 00:00:00 to 2010-04-01 00:00:00
Data columns:
Adj Close    252  non-null values
dtypes: float64(1)

>>> st = datetime.datetime(2010, 12, 31, 0, 0)
>>> en = datetime.datetime(2010, 12, 28, 0, 0)

>>> data[st:en]
            Adj Close
Date                 
2010-12-31     593.97
2010-12-30     598.86
2010-12-29     601.00
2010-12-28     598.92 
```

但是，如果我使用 DF 中不存在的开始或结束日期，我会得到 python KeyError。

我的问题：如何查询数据框对象的日期范围；即使 DataFrame 中不存在开始日期和结束日期。pandas 是否允许基于范围的切片？

我正在使用熊猫版本 0.10.1

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-23T18:22:19.250

使用`searchsorted`先找到最近的时间，然后使用它进行切片。

```
In [15]: df = pd.DataFrame([1, 2, 3], index=[dt.datetime(2013, 1, 1), dt.datetime(2013, 1, 3), dt.datetime(2013, 1, 5)])

In [16]: df
Out[16]: 
            0
2013-01-01  1
2013-01-03  2
2013-01-05  3

In [22]: start = df.index.searchsorted(dt.datetime(2013, 1, 2))

In [23]: end = df.index.searchsorted(dt.datetime(2013, 1, 4))

In [24]: df.iloc[start:end]
Out[24]: 
            0
2013-01-03  2 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-23T21:07:12.130

简短回答：对您的数据进行排序 ( `data.sort()`)，然后我认为一切都会按照您的预期进行。

是的，您可以使用 DataFrame 中不存在的日期时间进行切片。例如：

```
In [12]: df
Out[12]: 
                   0
2013-04-20  1.120024
2013-04-21 -0.721101
2013-04-22  0.379392
2013-04-23  0.924535
2013-04-24  0.531902
2013-04-25 -0.957936

In [13]: df['20130419':'20130422']
Out[13]: 
                   0
2013-04-20  1.120024
2013-04-21 -0.721101
2013-04-22  0.379392 
```

如您所见，您甚至不必构建日期时间对象；字符串工作。

因为索引中的日期时间不是连续的，所以行为很奇怪。如果我们在这里洗牌我的例子的索引......

```
In [17]: df
Out[17]: 
                   0
2013-04-22  1.120024
2013-04-20 -0.721101
2013-04-24  0.379392
2013-04-23  0.924535
2013-04-21  0.531902
2013-04-25 -0.957936 
```

...并采取相同的切片，我们得到不同的结果。它返回范围内的第一个元素并在范围外的第一个元素处停止。

```
In [18]: df['20130419':'20130422']
Out[18]: 
                   0
2013-04-22  1.120024
2013-04-20 -0.721101
2013-04-24  0.379392 
```

这可能不是有用的行为。如果要选择日期范围，首先按日期排序是否有意义？

```
df.sort_index() 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-05-02T02:12:40.827

您可以使用一个简单的掩码来完成此操作：

```
date_mask = (data.index > start) & (data.index < end)
dates = data.index[date_mask]
data.ix[dates] 
```

顺便说一句，这也适用于分层索引。在那种情况下，`data.index`将被替换为`data.index.levels[0]`或类似的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-18T15:59:41.210

我对其他方法有困难，但我发现以下方法对我有用：

```
# Set the Index to be the Date
df['Date'] = pd.to_datetime(df['Date_1'], format='%d/%m/%Y')
df.set_index('Date', inplace=True)

# Sort the Data
df = df.sort_values('Date_1')

# Slice the Data
From = '2017-05-07'
To   = '2017-06-07'
df_Z = df.loc[From:To,:] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-06T17:37:17.633

```
target_date = pd.Timestamp('2020-05-10')

df[df['DATE'].dt.date == (dt.date(target_date.year, target_date.month, target_date.day))] 
```

此行将让您选择所有符合条件的日期，以防您不需要将“日期列”设置为索引。

# jquery - Jquery DIV .hide() 不起作用

> ID：16175881
> 
> 赞同：0
> 
> 时间：2013-04-23T17:48:27.190
> 
> 标签：jquery, html, hide

我在加载时有 4 个 DIV，我想要隐藏 3 个 .. 单击（选项卡链接）我想显示该选项卡的内容.. 并隐藏其余部分.. 这就是我所拥有的.. 它不起作用 =(

[http://codepen.io/anon/pen/AafIH](http://codepen.io/anon/pen/AafIH)

```
<script type='text/javascript' src='http://mimerchant.com/wp-includes/js/jquery/jquery.js'></script>
<div class="tabnav">
    <ul class="fancyNav">
        <li id="news"><a href="#creditcard" id="creditcard_link">Credit Card Processing</a> 
        </li>
        <li id="about"><a href="#atm" id="atm_link">ATM Processing</a>
        </li>
        <li id="services"><a href="#giftcard" id="giftcard_link">Gift Card Program</a>
        </li>
        <li id="contact"><a href="#check" id="check_link">Check Guarantee</a>
        </li>
    </ul>
</div>
<div class="tabcontent">
    <div id="creditcard">
        <div id="textbox">
             <h3>Credit Card Processing</h3>

            <p>Some Text here about what this credit card tab is about</p>
             <h3>Low Rates</h3>

            <p>About Low Rates</h3>
        </div>
    </div>
    <div id="atm">
        <div id="textbox">
             <h3>ATM Processing</h3>

            <p>Some text here about the ATM services</p>
             <h3>Another Title</h3>

            <p>Some text</p>
        </div>
    </div>
    <div id="giftcard">
        <div id="textbox">
             <h3>Gift Card Program</h3>

            <p>Something about gift cards</p>
        </div>
    </div>
    <div id="check">
        <div id="textbox">
             <h3>Check Guarantee</h3>

            <p>Something About Checks</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:55:24.420

如果您包含 jQuery，您的代码可以正常工作。

在右上角，有一个图标可让您选择要包含的框架

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:55:51.350

在 CodePen 中，JS 片段在 HTML 中的 jQuery 调用之前被加载。您可以通过单击 JS 窗格顶部的齿轮图标并将 jQuery 添加到库列表来在 CodePen 上修复此问题。当您实际组合一个 HTML 页面以在本地运行时，请先导入 jQuery，然后再导入您正在编写的脚本。

如果您以后在执行此脚本时遇到问题，请检查 JavaScript 控制台。这个错误通常意味着 jQuery 没有被导入：

```
Uncaught TypeError: Property '$' of object [object Object] is not a function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:59:57.793

如我所见，您包含的 jQuery 实例不起作用。尝试从[这里替换它](http://code.jquery.com/jquery-1.9.1.min.js)

# macos - 如何在 Cocoa 的 AVPlayer 视频上绘制一些东西？

> ID：16175882
> 
> 赞同：4
> 
> 时间：2013-04-23T17:48:39.597
> 
> 标签：macos, cocoa, calayer, nsview, avplayer

在我的应用程序中，我希望能够在播放视频的顶部绘制矩形。我已经实现了作为 NSView 的绘图画布，并且我也实现了一个播放器。

但是，当我将绘图画布放在播放器视图的顶部时，播放器视图仍显示在**顶部**。

我在想我的绘图画布不在播放器视图的顶部，但它是。当我改变窗口的大小时，我可以看到在我可以绘制的视频没有覆盖的窗口区域上。然而，神奇的是，我的画没有出现在播放视频的顶部。

我真的不知道在哪里找到问题。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:46:22.750

我还有一个问题，我添加到 superView 的一个 NSView 是图层支持的，而最后一个 NSView 不是，并且总是支持图层的 NSView 会在顶部，所以我建议您为任何 NSView 启用该图层会出现在 AVPlayer 之上，[yourCanvasView setWantsLayer : YES];

...我认为这可以完成工作，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-29T20:58:44.660

有一个适用于 iOS 的解决方案，如此处所回答[，](https://stackoverflow.com/a/14932921/1167833)它也适用于 OS X（我在 OS X 10.10.2 上测试过）。

基本上，将所需`zPosition`的视图设置在顶部：

```
 topView.layer.zPosition = 1; 
```

# java - 使 OS X 屏幕 JMenuBar 跨窗口一致工作的最佳方法是什么？

> ID：16175884
> 
> 赞同：3
> 
> 时间：2013-04-23T17:48:52.403
> 
> 标签：java, macos, swing, menubar, jmenubar

我有一个带有 Swing 用户界面的跨平台 Java 应用程序。在 OS X 上，应用程序[使用屏幕菜单栏](https://github.com/imagej/imagej/blob/2dcd8e4d97c82931a7fc59cf226f451ce0bbb836/plugins/platforms/src/main/java/imagej/core/platforms/macosx/MacOSXPlatform.java#L91)来获得更原生的用户体验。

通常，应用程序为`JFrame`每个文档创建一个。屏幕菜单栏必须在所有这些窗口中保持一致。我尝试了几种方法，发现只有一种一致且高效的解决方案，它足够但并不完美。我发布这个问题以防其他人有更好的方法，并希望这些信息对其他人有所帮助。

一些不起作用的方法：

### 将相同的菜单栏附加到多个窗口

我尝试将相同的内容添加`JMenuBar`到多个`JFrame`实例，但[Swing 仅支持一次将 JMenuBar 附加到单个 JFrame](https://gist.github.com/ctrueden/5444972)，即使作为屏幕菜单栏也是如此。

我还使用 AWT`MenuBar`而不是 进行了测试`JMenuBar`，但发生了同样的现象。并且`MenuBar`相比起来有很多限制`JMenuBar`（例如，没有图标），所以让我们继续我们想要一个`JMenuBar`.

### 克隆菜单栏

一种常见的解决方案是`JMenuBar`为每个新的`JFrame`. 然而，这至少存在两个问题。首先，您必须保持菜单栏同步。虽然您可以使用侦听器来执行此操作，但仅处理 OS X 平台就需要很多额外的代码。然而，第二个也是更严重的问题是性能：如果您有一个包含数百个菜单项的复杂菜单栏，那么克隆菜单栏会非常慢。我们发现这种方法将新窗口的出现延迟了几秒钟！

### 使用默认菜单栏

Apple 的 Java 库中添加了一种新方法，用于[OS X v10.6 Update 1 和 10.5 Update 6](http://developer.apple.com/library/mac/#releasenotes/CrossPlatform/JavaSnowLeopardUpdate1LeopardUpdate6RN/NewandNoteworthy/NewandNoteworthy.html#//apple_ref/doc/uid/TP40009400-CH4-DontLinkElementID_4)：.`Application.setDefaultMenuBar(JMenuBar)`

此方法的既定目的是在 no 处于活动状态时提供菜单栏，但是当没有自己的 no`JFrame`处于活动状态时，它也会显示默认菜单栏。`JFrame``JMenuBar`

但是，该功能存在几个主要问题`setDefaultMenuBar`：

1.  [加速器不起作用](https://forums.oracle.com/forums/thread.jspa?threadID=2138092&tstart=1199)。我通过[自己处理所有按键](https://github.com/imagej/imagej/blob/2dcd8e4d97c82931a7fc59cf226f451ce0bbb836/plugins/tools/src/main/java/imagej/core/tools/AcceleratorHandler.java#L53)来避免我们的应用程序中的这个问题，但这仍然是不幸的。
2.  截至 2012 年 12 月，[setDefaultMenuBar 在 Java7 上仍然不可用](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2012-December/005197.html)。我们显然希望避免使用已弃用或不受支持的 API。
3.  最关键的是，调用`setDefaultMenuBar` [会阻止 JVM 正常关闭](https://gist.github.com/ctrueden/5445168)。即使是随后的调用`setDefaultMenuBar(null)`也不会释放必要的资源。

简而言之，`setDefaultMenuBar`这似乎根本不是一种安全可靠的方法。

所以，问题是：实现一致屏幕的最可靠、高性能和兼容（跨 OS X 版本）的方法是`JMenuBar`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:48:52.403

我发现效果很好的解决方案是通过向应用程序的每个窗口`windowActivated`添加 a 来监听事件。`WindowListener`然后，将新激活的窗口设置为`JMenuBar`我们要显示的唯一一个菜单栏。

这是一个[例子](https://gist.github.com/ctrueden/5445680)：

```
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.WindowConstants;

/**
 * On OS X, with a screen menu bar, you can "hot-swap" a JMenuBar between
 * multiple JFrames when each is activated. However, there is a flash each
 * time the active window changes, where the menu bar disappears momentarily.
 * But it is a small price to pay to be able to reuse the same menu bar!
 */
public class HotSwapJMenuBarOSX {

  public static void main(final String[] args) {
    System.setProperty("apple.laf.useScreenMenuBar", "true");

    final JMenuBar menuBar = new JMenuBar();
    final JMenu file = new JMenu("File");
    menuBar.add(file);
    final JMenuItem fileNew = new JMenuItem("New");
    file.add(fileNew);

    final JFrame frame1 = new JFrame("First");
    frame1.getContentPane().add(new JButton("First"));
    frame1.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);

    final JFrame frame2 = new JFrame("Second");
    frame2.getContentPane().add(new JButton("Second"));
    frame2.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);

    // hot-swap the menu bar to newly activated windows
    final WindowListener listener = new WindowAdapter() {
      @Override
      public void windowActivated(WindowEvent e) {
        ((JFrame) e.getWindow()).setJMenuBar(menuBar);
      }
    };
    frame1.addWindowListener(listener);
    frame2.addWindowListener(listener);

    final int offsetX = 200, offsetY = 50;
    frame1.pack();
    frame1.setLocation(offsetX, offsetY);
    frame1.setVisible(true);
    frame2.pack();
    frame2.setLocation(frame1.getWidth() + offsetX + 10, offsetY);
    frame2.setVisible(true);
  }

} 
```

使用这种方法，两个框架都显示相同的菜单栏，当两个框架都消失时，JVM 会干净地退出，而无需显式调用`System.exit(int)`.

不幸的是，这种方法并不完美：每次活动窗口更改时，菜单栏都会短暂消失。有人知道更好的方法吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:15:59.217

您也许可以利用`JDialog`继承其父级的`JMenuBar`. 要保持对话框无模式，您可以使用

*   `PropertyChangeEvent`[按照这里](https://stackoverflow.com/a/11832979/230513)`JFrame`的建议，在对话框和主要之间进行通信。

*   [`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和[*键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)在对话框之间导航。

# r - 在 Centos 上安装 Rmpi 失败并显示“找不到 -lmpi”

> ID：16175891
> 
> 赞同：0
> 
> 时间：2013-04-23T17:49:19.163
> 
> 标签：r, linker, cluster-computing, mpi

我在集群上运行 mpi。它适用于可执行文件以及 C 程序；所以我很确定它工作正常。但是，当我尝试安装 Rmpi​​ 时，出现错误。

**建筑学：**

*   Centos 6.4
*   [MPICH](http://www.mpich.org/downloads/) 3.0.3（与 1.4 有同样的问题）。
*   R 2.15
*   转速[0.6-3](http://www.stats.uwo.ca/faculty/yu/Rmpi/)

我尝试了不同的组合。具体来说，尝试从 R 内部运行 install.packages()，从命令行运行 R CMD INSTALL。我尝试了 sudo、su - 甚至安装到非特权的“私有”目录中（以防设置 LD_LIBRARY_PATH 搞砸了）。所以，这是我运行的一个例子：

```
export LD_LIBRARY_PATH=/opt/tmp/shared/mpich2-install/lib/
install.packages("Rmpi", configure.args = c("--with-Rmpi-include=/opt/tmp/shared/mpich2-install/include/", "--with-Rmpi-libpath=/opt/tmp/shared/mpich2-install/lib/", "--with-Rmpi-type=OPENMPI", "--with-mpi=/opt/tmp/shared/mpich2-install/")) 
```

在每种情况下，我都会得到一致的错误：

```
gcc -m64 -std=gnu99 -shared -L/usr/local/lib64 -o Rmpi.so RegQuery.o Rmpi.o conversion.o internal.o -L/opt/tmp/shared/mpich2-install/lib/ -lmpi -L/usr/lib64/R/lib -lR
/usr/bin/ld: cannot find -lmpi
collect2: ld returned 1 exit status 
```

请注意，如果我将 mpi-type 设置为 MPICH（而不是 OPENMPI），则会收到有关格式错误的错误。

我的想法用完了......有一个[类似](https://stackoverflow.com/questions/13570873/installing-rmpi-on-lam-mpi-cluster)的帖子，但我的问题似乎不同。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:30:40.693

显然，这是 MPICH 和 Rmpi​​ 之间已知的不兼容。我安装了 Open MPI，一切正常。也许，它也会帮助某人......

# azure - 作为 azure 持续部署的一部分的数据库部署

> ID：16175911
> 
> 赞同：3
> 
> 时间：2013-04-23T17:50:29.257
> 
> 标签：azure, visual-studio-2012, tfs, continuous-deployment

我正在使用 Azure 与 tfs.visualstudio.com 的集成，以便在每次签入后进行自动部署。作为我的解决方案的一部分，我有一个数据库项目（VS 2012），我想在成功构建之后但在触发单元测试之前将其部署在 sql azure 实例上。我无法弄清楚天蓝色怎么可能。有人请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:00:15.210

此处描述了一种可能的解决方案：

[http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/](http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

# macos - 适用于 Mac 应用程序的 DRM 框架

> ID：16175914
> 
> 赞同：0
> 
> 时间：2013-04-23T17:50:42.913
> 
> 标签：macos, drm

我试过谷歌搜索无济于事 - 是否有任何好的库或框架可以将 DRM 添加到 Mac 应用程序？我正在寻找在应用商店之外销售应用程序。是否有一个开源选项，或者我必须自己推出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:01:59.107

如果您通过“DRM”谈论您的应用程序的许可/序列化，请查看 Aquatic Prime：

[http://www.tempel.org/UsingAquaticPrime](http://www.tempel.org/UsingAquaticPrime)
[https://github.com/bdrister/AquaticPrime](https://github.com/bdrister/AquaticPrime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T11:00:29.097

[Watchdog](https://github.com/konstantinpavlikhin/Watchdog) — OS X 应用程序的简单注册框架。

# c# - .Net 1.1 框架容器

> ID：16175916
> 
> 赞同：0
> 
> 时间：2013-04-23T17:50:58.883
> 
> 标签：c#, list, vector, .net-1.1

我必须使用`1.1 .NET`版本框架（`c#`）。

我可以将什么用作 Vector、List（对象容器）？

我看到不能使用 List 或 Vector

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T17:52:23.933

[ArrayList](http://msdn.microsoft.com/en-us/library/system.collections.arraylist%28v=vs.71%29.aspx)是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:52:43.693

您可以使用 ArrayList。

但是，.NET 1.1 不支持泛型，因此每次访问项目时都需要强制转换

# html - 我怎样才能让这个页脚最终做我想做的事？希望得到一些建议

> ID：16175917
> 
> 赞同：0
> 
> 时间：2013-04-23T17:51:00.300
> 
> 标签：html, wordpress, css

当我为页脚 css 做这样的事情时

```
footer {
position: fixed;
top:800px;
left:0;
width:100%;
height:80px;
} 
```

当我从底部向上调整浏览器窗口的大小时，页脚当然不会移动并且不会与我的主要内容重叠，这很好但是，当以不同的屏幕尺寸查看网站时，作为固定页脚的页脚当然是某些屏幕尺寸的底部然后更大的尺寸它当然不在底部，因为它是固定的。所以最终我想要的是这样的页脚：

```
footer {
position: fixed;
top:90%;
left:0;
width:100%;
height:80px;
} 
```

这会创建一个页脚，无论调整大小如何，它都会保留在页面底部，但它可以与内容重叠。我想要一个固定的页脚，它总是留在底部，但从不重叠内容。

我可以对流行尺寸使用媒体查询，但当然在某些尺寸下它不会奏效。谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:13:30.173

```
footer {
  position: fixed;
  bottom:0;
  left:0;
  width:100%;
  height:80px;
} 
```

然后为您的内容提供至少 80 像素的底部填充。你为什么要使用top？

# algorithm - 在大型数据集中查找相关性

> ID：16175922
> 
> 赞同：3
> 
> 时间：2013-04-23T17:51:12.527
> 
> 标签：algorithm, matlab, matrix, large-data

我有一个巨大的数据集。我们谈论的是 100 个 121x145x121 单元格的 3D 矩阵。任何单元格的值都在 0 和 1 之间，我需要一种方法根据它们的相关性对这些单元格进行聚类。问题是数据集对于我知道的任何算法来说都太大了；即使只使用其中的一半（任何矩阵都是大脑的 MRI 扫描），我们也有大约 4000 亿对。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:24:20.453

作为第一步，我很想尝试[K-means clustering](http://en.wikipedia.org/wiki/K-means_clustering)。

这在 Matlab 统计工具箱中显示为函数[kmeans](http://www.mathworks.co.uk/help/stats/kmeans.html)。

在此算法中，您最终只计算 K 个当前中心与数据之间的距离，因此对的数量比比较所有选择要少得多。

在 Matlab 中，我还发现操作的速度可能完全取决于矩阵的组织（由于内存缓存和优化问题）。我建议转换您的 3d 矩阵，以便列（在内存中保存在一起）对应于特定单元格的 100 个值。

这可以通过[permute 函数](http://www.mathworks.co.uk/help/matlab/ref/permute.html)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:27:51.857

尝试加权[K-means++](http://en.wikipedia.org/wiki/K-means++)聚类算法。在每个点为所有 100 个输入矩阵创建一个值总和矩阵，以生成一个“灰度”矩阵，然后调整 K-means++ 算法以使用加权 (wt) 值。

在初始化阶段，使用加权概率分布随机选择一个新数据点作为新中心，其中选择点 x 的概率与 D(X)^2 x wt^2 成比例。

[分配步骤](http://en.wikipedia.org/wiki/K-means#Standard_algorithm)应该没问题，但是在更新步骤中计算质心时，请调整公式以考虑权重。（或使用相同的公式，但每个点都使用 wt 次）。

您可能无法使用库函数来执行此操作，但您可以从减少 100 倍的点数和要使用的矩阵开始。

# python - 尝试/除外 - 如何继续

> ID：16175923
> 
> 赞同：0
> 
> 时间：2013-04-23T17:51:13.013
> 
> 标签：python, exception, try-catch

所以在我的程序中有一部分我要求用户输入一个数字。我使用 try/exept 作为：

```
limits=True
while limits:
        try:
            limits=int(input("Put your limit:"))
            return limits
        except(ValueError):
            print("Thats not a number!") 
```

我的问题是，如果用户确实输入了一个数字，我如何才能继续使用`limits`包含用户稍后在我的代码中输入的变量？

之后，try/except 部分运行，当用户输入一个数字时，它就停止了，不再继续代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:56:09.083

您的代码中根本不需要`limits`：

```
def get_limit():
    while True:
        try:
            return int(input("Enter your limit: "))
        except(ValueError):
            print("That's not a number!") 
```

要稍后在代码中使用该值，只需将函数的返回值分配给某个变量：

```
limit = get_limit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:58:17.150

这是什么我什至不知道。

您正在尝试将限制设置为 while 循环的布尔值和其他值的整数。

尝试以下方法之一：

*   创建一个检查输入有效性的while循环，而不是尝试将其读取为布尔值
*   做一个 while true 循环，如果输入正确，它将在 return 语句上中断。

tl; dr用**while true替换****while 限制**。

# sharepoint-2010 - 此页面的安全验证无效错误尝试将共享点批准工作流添加到 ListAdded eventreceiver 中的列表

> ID：16175924
> 
> 赞同：0
> 
> 时间：2013-04-23T17:51:14.103
> 
> 标签：sharepoint-2010, event-receiver, eventreceiver

我想要做的是将 OOTB 共享点工作流 [Approval Sharepoint - 2010] 附加到每个创建的文档库中。为此，我创建了一个列表添加事件接收器并将此代码放入其中 -

```
public override void ListAdded(SPListEventProperties properties)
   {
       SPSecurity.RunWithElevatedPrivileges(delegate()
       {  
           SPUtility.ValidateFormDigest();

            using (SPSite site = new SPSite(properties.SiteId))
            {
                using (SPWeb web = site.OpenWeb())
                {
                    try
                    {
                        base.ListAdded(properties);
                        if (currentList is SPDocumentLibrary)
                        {
                            SPDocumentLibrary docLib = (SPDocumentLibrary)properties.List;

                            //workflows need a tasks and history list. Here we assume they exist
                            SPList taskList = web.Lists["Tasks"];
                            SPList historyList = web.Lists["Workflow History"];

                            //loop through the workfows in the web and grab the one we want by name
                            SPWorkflowTemplate wfTemp = null;
                            foreach (SPWorkflowTemplate wt in web.WorkflowTemplates)
                            {
                                if (wt.Name == "Approval - SharePoint 2010")
                                {
                                    wfTemp = wt;
                                    Common.AddToLog(web, "Found " + wt.Name + " in current web " +
                                    web.Url, false);
                                    break;
                                }
                            }

                            //Now add the workflow to the doc library
                            SPWorkflowAssociation workFlow = SPWorkflowAssociation.CreateListAssociation(wfTemp, wfTemp.Name, taskList, historyList);

                            workFlow.AllowManual = true;
                            workFlow.AutoStartChange = false;
                            workFlow.AutoStartCreate = true;
                            workFlow.AssociationData = null;

                            web.AllowUnsafeUpdates = true;
                            web.ValidateFormDigest();
                            docLib.WorkflowAssociations.Add(workFlow);                                

                            docLib.EnableModeration = true;

                            docLib.Update();
                            web.Update();
                            web.AllowUnsafeUpdates = false;
                        }
                    }
                    catch (Exception ex)
                    {
                        throw ex;
                    }
                    finally
                    {
                        web.AllowUnsafeUpdates = false;
                    }
                }
            }
       });
 } 
```

我收到这个错误-

此页面的安全验证无效。在您的 Web 浏览器中单击返回，刷新页面，然后再次尝试您的操作。

在这条线上

`docLib.WorkflowAssociations.Add(workFlow);`

请问大家有什么建议吗？感谢您的反馈意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:44:21.033

为什么你需要“SPUtility.ValidateFormDigest()”？

您的代码在事件接收器中运行，而不是在表单或 aspx 页面上，没有什么可以验证的。

你能把这条线去掉再试一次吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:28:22.890

I believe updating this code block:

```
web.AllowUnsafeUpdates = true;
web.ValidateFormDigest();
docLib.WorkflowAssociations.Add(workFlow);

docLib.EnableModeration = true;

docLib.Update();
web.Update();
web.AllowUnsafeUpdates = false; 
```

and replacing it with:

```
web.Site.WebApplication.FormDigestSettings.Enabled = false;
docLib.WorkflowAssociations.Add(workFlow);
docLib.EnableModeration = true;
docLib.Update();
web.Update();
web.Site.WebApplication.FormDigestSettings.Enabled = true; 
```

Let me know if this works for you or if you still encounter the same error.

# jquery - 滚动到位置 jquery 偏移动画

> ID：16175929
> 
> 赞同：2
> 
> 时间：2013-04-23T17:51:23.423
> 
> 标签：jquery, animation, jquery-animate, offset

我正在使用以下代码向下滚动到页面底部的我的联系人部分，该部分运行良好，直到我在页面顶部添加了一个固定导航以向下滚动页面。但不幸的是，导航占据了页面的 100 像素，所以它滚动了 100 像素，超过了我想要的点。我需要将导航高度添加到`.offset`以查看页面的正确部分。

**我如何添加导航栏的高度代码以在页面下方进一步滚动该高度。**

```
$("document").ready(function() {            

            $('#contact_cntrl').click(function(){

                $('html, body').animate({
                    scrollTop: $(".contact").offset().top
                }, 1000);                  

             }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:58:29.070

我相信您想要的是将像素偏移量添加到您的`scrollTop`. 像这样：

```
$('html, body').animate({scrollTop: $('.contact').offset().top + 100}, 1000); 
```

# java - 如果我已经有自己的 Timer 类，如何开始使用 javax.swing.Timer？

> ID：16175932
> 
> 赞同：1
> 
> 时间：2013-04-23T17:51:36.580
> 
> 标签：java, swing, timer

我用一些自定义操作创建了一个名为 Timer 的类。

然后我发现有一个类 javax.swing.Timer 可以满足我的需要。

因此，我将“My”Timer 类重命名为另一个名称（使用 NetBeans 中的 Refactor 按钮），并在其中执行以下操作：

```
Timer timer = new Timer();
timer.schedule(new SayHello(), 5000); 
```

但它没有用 - 它给出了构造 Timer 需要一些我的旧类需要的变量的错误。所以它指的是旧类，而不是 javax.swing.Timer。

谁能告诉我发生了什么事？

试图这样做：

```
javax.swing.Timer timer = new javax.swing.Timer();
timer.schedule(new SayHello(), 5000); 
```

但它也没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:52:45.197

在尝试编写代码之前，您需要查看 Swing Timer API。它没有`schedule(...)`我所知道的方法，你不能只是编造方法并期望它们起作用。

Swing Timer 只有**一个**构造函数，它要求你传入一个 int 延迟和一个 ActionListener，它的 actionPerformed 方法每`delay`毫秒调用一次：

```
int delay = 1000; // 1000 ms == 1 second
javax.swing.Timer myTimer = new javax.swing.Timer(delay, 
       new MyTimerActionListener());
myTimer.start(); 
```

重要链接：

*   [摆动计时器教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)
*   [摆动定时器 API](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)

# timer - 使用 SwingWorker 设置坐标

> ID：16175934
> 
> 赞同：0
> 
> 时间：2013-04-23T17:51:54.857
> 
> 标签：timer, swingworker, worldwind

现在我完全被一个涉及 WorldWind 的项目所困扰，但它是 SwingWorker 和 swing Timer 类的一个普遍问题。

基本上我在地球上有一个形状，它有一个 LatLon 坐标，并且每隔一段时间，我都试图沿着 LatLon 中的预定向量移动它。除了实际的计时器事件之外，一切都应该正常工作。我尝试使用标准计时器中的多种东西，调用 System.getCurrentTimeMill() 并增加它，但它们都没有奏效。

现在，当我点击“动画”按钮时，它会调用这个函数：

```
private void animate(LatLon pos) throws InvocationTargetException, InterruptedException   {
        // TODO Auto-generated method stub

        if(SwingUtilities.isEventDispatchThread())
        {

            timer = new Timer(speed, this);
            timer.setInitialDelay(pause);
            timer.setRepeats(false);
            while (count < 5)
            {
                timer.start();
                CircleWorker.execute();
                sphere.setLocation(pos);
                count ++;
            }

        }

    else{
            SwingUtilities.invokeAndWait(new Runnable()
            {
                @Override
                public void run(){
                    int count = 0;

                    //timer = new Timer(speed, this);
                    timer.setInitialDelay(pause);
                    while (count < 30)
                    {
                        timer.start();
                        CircleWorker.execute();
                        count ++;
                        checker2();
                    }
                }}); 
```

这是我的 SwingWorker：

```
SwingWorker<LatLon, Void> CircleWorker = new SwingWorker<LatLon, Void>()
            {

                @Override
                protected LatLon doInBackground() 
                {
                    //checker();

                    double lat = changeAm.getLatitude().getDegrees() + currentPos.getLatitude().getDegrees();
                    double lon = changeAm.getLongitude().getDegrees() + currentPos.getLongitude().getDegrees();
                    // sets lat lon to the amounts in each individual amount

                    currentPos = LatLon.fromDegrees(lat, lon);
                    counter ++;

                    //checker2();

                    return currentPos;
                }
                @Override
                public void done()
                {
                    //checker3();
                    currentPos = ATLANTA;
                }
            }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:29:28.670

我已经完全改变了代码，远离了摇摆工人，变成了一个摇摆定时器和一个动作事件。我的对象现在正在移动，问题是我无法控制此事件发生的次数。我想在说 30 或 100 次或多少次处决后停止它。

当前代码：

```
 private void animate() throws InvocationTargetException, InterruptedException   {
        // TODO Auto-generated method stub
        currentPos = ATLANTA;

        ActionListener sphereAction  = new ActionListener()
        {
            private int count = 0;
            @Override
            public void actionPerformed(ActionEvent evt) 
            {
                double lat = changeAm.getLatitude().getDegrees() + currentPos.getLatitude().getDegrees();
                double lon = changeAm.getLongitude().getDegrees() + currentPos.getLongitude().getDegrees();
                // sets lat lon to the amounts in each individual amount

                currentPos = LatLon.fromDegrees(lat, lon);

                //checker2();

                sphere.setLocation(currentPos); 
                setCount(getCount() + 1);
            }
            public int getCount() {
                return count;
            }
            public void setCount(int count) {
                this.count = count;
            }

        };

        Timer timer = new Timer(speed, sphereAction);
        timer.start();

        //Obviously this isn't working.
        if (count == 10)
            timer.stop(); 
```

# php - 编码完成后测试PHP项目

> ID：16175944
> 
> 赞同：3
> 
> 时间：2013-04-23T17:52:34.297
> 
> 标签：php, testing, integration-testing, system-testing

我有一个 PHP 项目要测试。我已经（几乎）完成了项目的编码，并且一开始我没有任何测试计划。作为 PHP 新手，我想我会完成编码并在之后开始测试。由于需要在进行过程中进行单元测试，我的其他测试替代方案是什么？我想要一个完整的系统测试，而不是一个单元一个单元。

我有大约 30 个 PHP 脚本文件，其中 5 个是类脚本。

注意它需要是一种正式的测试方式，而不是试图破解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:35:23.843

我相信你的考试目标更多的是“学术”而不是实际。所以朋友的测试并没有太大帮助。话虽如此，您已经完成了项目的编码，所以如果您想使用 PHPUnit 或 SimpleTest 进行单元测试，您将不得不返回并开始编写单元测试用例。

我认为这里最好的选择是创建一个[“正式的”测试文档](http://www.softwaretestinghelp.com/test-case-template-examples/)。如何做到这一点有大量的资源。基本上它将具有：

1.  网址
2.  行动
3.  预期结果
4.  观察结果

如果您的预期和观察到的结果匹配，则该测试用例通过。

您可以根据这些基本准则为您的项目创建任意数量的测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T04:44:03.553

测试在 SDLC 中扮演着不同的角色。可以在多个方面进行测试。喜欢：

1.  **冒烟测试**

2.  **功能测试**

3.  **系统测试**

4.  **重新测试**

5.  **回归测试**

6.  **性能测试**

还有更多测试技术可用于测试 Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:02:59.613

就是上传项目，找人测试一下。你要自己测试或者自己测试。没有别的办法

您还可以运行一个简单的扫描仪（如 burp 或 acunetix）来测试网站是否可以被黑客入侵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T16:15:18.870

您可以使用网络应用扫描仪，

那里有一些 F/OSS，例如；

*   [Skipfish](https://code.google.com/p/skipfish/) - CLI Windows/Linux
*   [Netsparker 社区版](http://www.mavitunasecurity.com/communityedition/)- Windows - 商业扫描仪的精简版

[Web 应用程序安全扫描程序列表 - 商业和免费](http://projects.webappsec.org/w/page/13246988/Web%20Application%20Security%20Scanner%20List)

# java - GWT 可以处理 Java Swing 吗？

> ID：16175946
> 
> 赞同：6
> 
> 时间：2013-04-23T17:52:41.650
> 
> 标签：java, swing, gwt, jframe

我在构建 GWT 应用程序时遇到了一些麻烦。

在这里：[https](https://developers.google.com/web-toolkit/tools/gwtdesigner/features/menu_editing) ://developers.google.com/web-toolkit/tools/gwtdesigner/features/menu_editing谷歌自己谈论在 GWT 中实现 Java Swing、JFrame 的可能性。我是 Java 新手，不知道 Swing 的 SWT 等价物是什么，所以我没有尝试过这个选项。

当我尝试运行我的代码（由 GWT Designer 构建）时，我在使用 JFrame 的每一行都收到错误：

```
JFrame frame = new JFrame();

        JMenuBar menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        JMenu mnNewMenu = new JMenu("Test");
        menuBar.add(mnNewMenu);

        JMenu mnNewMenu_1 = new JMenu("Test");
        mnNewMenu.add(mnNewMenu_1); 
```

返回：[ERROR] [gwtearthdemo] - 第 96 行：没有可用于 javax.swing.JFrame 类型的源代码；你忘了继承一个必需的模块吗？

JMenuBar、JMenu 同上。

我已经看到与此类似的错误，答案表明所讨论的功能不适用于 GWT。但是，谷歌建议它是。这里有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T17:58:24.650

在 GWT 中，您只能使用一些 java 类，因为不可能将所有 java 类都转换为 javascript。您可以在此链接中找到允许[的课程列表：课程列表](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_util)

# javascript - 使用 Jasmine (JavaScript) 测试委托回调

> ID：16175952
> 
> 赞同：2
> 
> 时间：2013-04-23T17:52:50.207
> 
> 标签：javascript, testing, jasmine

我有一个简单的 JavaScript 函数，它使用两个委托（异步）返回一个值：

```
function getMyUserName() {
    context.load(user);
    context.executeQueryAsync(onGetMyUserNameSuccess, onGetMyUserNameFail);
}
function onGetMyUserNameSuccess() {
    return user.get_title();
}
function onGetMyUserNameFail(sender, args) {
    return args.get_message();
} 
```

“上下文”和“用户”变量已经设置和初始化，第一个委托（“onGetMyUserNameSuccess”）得到了正确的答案。问题是如何使用 Jasmine 测试“getMyUserName”功能？如果我使用“运行”，我无法知道代表的响应（我也看不到任何方法可以知道是否调用了代表）。我试图设置间谍来嘲笑代表，但可能我做得不对（我刚从 Jasmine 开始）。任何帮助都将受到欢迎。在此先感谢，古斯塔沃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:26:00.173

在大多数情况下，当您必须使用异步代码时，您应该自己调用该函数。但不是直接的，而是你的代码调用它的方式。因此，在您的情况下，监视`context.executeQueryAsync`并使用`spy.mostRecentCall.args`来获取对该函数的引用，然后调用它们。

```
var async = jasmin.spyOn(context, 'executeQueryAsync');

async.mostRecentCall.args[0]()

var args = {get_message: jasmine.createSpy()}
async.mostRecentCall.args[1]({}, args);
expect(args.get_message.toHaveBeenCalled()); 
```

请注意，有[很多方法](http://sinonjs.org/docs/#stubs)可以自动调用回调的[sinon](http://sinonjs.org/)框架

# sql-server - T-SQL 在应用 TOP 之前获取行数

> ID：16175955
> 
> 赞同：4
> 
> 时间：2013-04-23T17:53:00.423
> 
> 标签：sql-server, tsql, select

我有一个 SELECT 可以从表中返回数百行（表可以是 ~50000 行）。我的应用程序有兴趣知道返回的行数，这对我来说很重要，但它实际上只使用了这数百行中的前 5 行。我想要做的是将 SELECT 查询限制为仅返回 5 行，但还要告诉我的应用程序将返回多少行（数百行）。这是原始查询：

```
SELECT id, a, b, c FROM table WHERE a < 2 
```

这是我想出的——CTE——但我对每列中出现的总行数感到不舒服。理想情况下，我想要一个 TOP 5 的结果集和一个返回的总行数参数。

```
WITH Everything AS
(
   SELECT id, a, b, c FROM table
),
DetermineCount AS
(
   SELECT COUNT(*) AS Total FROM Everything 
)
SELECT TOP (5) id, a, b, c, Total
FROM Everything 
CROSS JOIN DetermineCount; 
```

你能想出更好的方法吗？

T-SQl 中是否有办法在应用顶部之前返回选择顶部查询的受影响行数？@@rowcount 会返回 5 但我想知道是否有 @@rowcountbeforetop 之类的东西。

在此先感谢您的帮助。

** 更新 **

这就是我现在正在做的事情，我有点喜欢 CTE，尽管 CTE 如此优雅。

```
-- @count is passed in as an out param to the stored procedure

CREATE TABLE dbo.#everything (id int, a int, b int, c int);

INSERT INTO #everything 
SELECT id, a, b, c FROM table WHERE a < 2;      

SET @count = @@rowcount;
SELECT TOP (5) id FROM #everything;
DROP TABLE #everything; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:33:21.533

这是获取 5 个随机行并包含总数的相对有效的方法。不管你把它放在哪里，随机元素都会引入一个完整的排序。

```
SELECT TOP (5) id,a,b,c,total = COUNT(*) OVER()
  FROM dbo.mytable
  ORDER BY NEWID(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:03:06.193

假设您希望前 5 个按 id 升序排序，这将通过您的表进行一次传递。

```
; WITH Everything AS 
(
    SELECT id
        , a
        , b
        , c
        , ROW_NUMBER() OVER (ORDER BY id ASC) AS rn_asc
        , ROW_NUMBER() OVER (ORDER BY id DESC) AS rn_desc
    FROM <table>
)
SELECT id
    , a
    , b
    , c
    , rn_asc + rn_desc - 1 AS total_rows
FROM Everything
WHERE rn_asc <= 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:49:02.097

** 更新 **

这就是我现在正在做的事情，我有点喜欢 CTE，尽管 CTE 如此优雅。让我知道你的想法。谢谢！

```
-- @count is passed in as an out param to the stored procedure

CREATE TABLE dbo.#everything (id int, a int, b int, c int);

INSERT INTO #everything 
SELECT id, a, b, c FROM table WHERE a < 2;      

SET @count = @@rowcount;
SELECT TOP (5) id FROM #everything;
DROP TABLE #everything; 
```

# javascript - 如何在单击另一个元素时插入新的脚本元素

> ID：16175956
> 
> 赞同：2
> 
> 时间：2013-04-23T17:53:04.423
> 
> 标签：javascript, onclick, widget

我正在开发一个应用程序，其中一个小部件有一个按钮，该按钮通过启动 API 启动另外两个。API 运行良好，但我无法让调用函数正常工作。当我刚刚声明 API 时，使用：

```
<script src="js/global.js"></script> 
```

它工作正常，但在打开页面后立即启动。我需要它在按钮单击时启动。

我有以下代码：

```
<a href='' id='mylink'>click me</a>

<script type="text/javascript">
var myLink = document.getElementById('mylink');
myLink.onclick = function(){
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "js/global.js."; 
return false;
alert('ping');
} 
```

我设置了警报以查看进程停止工作的位置。“回归”之前的一切似乎都在运行。我已经用 return true 和 return false 尝试过这个，它没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:56:45.533

您需要插入脚本，尝试将其附加到头部：

```
document.getElementsByTagName('head')[0].appendChild(script); 
```

所以你可以做这样的事情：

```
<script type="text/javascript">
 var myLink = document.getElementById('mylink');

 myLink.onclick = function(){
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.src = "js/global.js."; 
   document.getElementsByTagName('head')[0].appendChild(script);
}

</script> 
```

同样在 HTML 中尝试使用锚以外的其他东西，因为锚会尝试向您发送其他内容，下一个代码看起来像锚但是跨度：

```
<span style="cursor:pointer; text-decoration:underline" id='mylink'>click me</span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:55:56.097

`return`终止函数的执行。

您没有将`script`元素添加到文档中。

```
document.body.appendChild(script); 
```

# jquery - jquery parent()在主父级中选择

> ID：16175958
> 
> 赞同：1
> 
> 时间：2013-04-23T17:53:09.143
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:55:54.687

```
$(this).closest('.siralaMain').addClass('active'); 
```

似乎您需要使用：

```
 $(this).closest('ul').prev().addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:54:36.117

丑陋`parent`的链条是丑陋的。

```
$(this).parent("li").parent("li").find("a").eq(0).addClass("active"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:59:50.280

利用

```
$(this).closest('li:has(.siralaMain)')
       .find('.siralaMain')
       .addClass('active'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T18:00:38.833

这有效：

```
$(this).parent().parent().parent().find("a").addClass("active"); 
```

小提琴：http: [//jsfiddle.net/Afgnz/](http://jsfiddle.net/Afgnz/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T18:05:30.737

这个怎么样 -

```
$(this).parents("li:eq(1)").find("a:first").addClass("active"); 
```

[http://jsfiddle.net/mohammadAdil/4zgM2/1/](http://jsfiddle.net/mohammadAdil/4zgM2/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T18:01:40.630

尝试这个

```
 $(this).closest('ul').prev('.siralaMain').addClass('active'); 
```

# sql - SQL需要建议如何为此查询添加时间戳

> ID：16175961
> 
> 赞同：0
> 
> 时间：2013-04-23T17:49:28.383
> 
> 标签：sql

我有这个代码：

```
 select Users.phoneMac, Users.apMac, Locations.Lon, Locations.Lat
    from Locations, Users
    inner join (
    select u.phoneMac, max(u.strenght) as most
    from Users u, Locations l
    where u.apMac = l.apMac
    group by u.phoneMac
    ) as ij on ij.phoneMac=Users.phoneMac and Users.strenght = ij.most 
    where Locations.apMac = Users.apMac; 
```

它对我来说很好，但是当我向用户表添加更多数据时，这个查询会从所有数据中计算结果，我只想从最新数据中获取结果。所以我在用户表中添加了时间戳。

所以你能帮我修复这个代码，所以它首先只从每个用户的最新时间戳中获取数据（users.phoneMac）（同一个phoneMac可以有超过1行数据），然后进行其余的计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:18:04.837

您已经选择了“强度”字段的最大值并加入其中，那么为什么不对时间戳字段再次使用相同的方法呢？就像是：

```
SELECT Users.phoneMac, Users.apMac, Locations.Lon, Locations.Lat
FROM Locations
INNER JOIN Users
ON Users.apMac = Locations.apMac
INNER JOIN (
 SELECT u.phoneMac, max(u.strenght) AS most
 FROM Locations l
 INNER JOIN Users u ON u.apMac = l.apMac
 GROUP BY u.phoneMac) AS ij
ON ij.phoneMac = Users.phoneMac
AND Users.strenght = ij.most
INNER JOIN (
 SELECT u2.phoneMac, max(u2.timestampfield) AS latest
 FROM Locations l2
 INNER JOIN Users u2 ON u2.apMac = l2.apMac
 GROUP BY u2.phoneMac) AS ijk
ON ijk.phoneMac = Users.phoneMac
AND Users.timestampfield = ij.latest; 
```

（顺便说一句，使用带有逗号和 WHERE 子句的旧连接语法会使逻辑更难理解，并且偶尔会导致逻辑错误。新的连接语法与 ON 确实好多了。）

# c# - 使用单选按钮而不是 DropDownList

> ID：16175964
> 
> 赞同：1
> 
> 时间：2013-04-23T17:53:29.203
> 
> 标签：c#, asp.net-mvc

目前我能够`@Html.DropDownList()`从数据集中动态填充。下面的代码适用于此。

**控制器**

```
public static IEnumerable<SelectListItem> myList
    {
        get
        {
            ReportAPI.ReportsAPI ws = new ReportAPI.ReportsAPI();
            DataSet ds = ws.GetReportDataSet(userguid, reportguid);
            DataTable dt = ds.Tables[0];

            List<SelectListItem> list = new List<SelectListItem>();
            foreach (DataRow dr in dt.Rows)
            {
                list.Add(new SelectListItem
                {
                    Text = dr["text"].ToString(),
                    Value = dr["value"].ToString(),
                });
            }
            return list;
        }
    }

public ActionResult NewSubscriber()
    {

        ViewData["subscriptionplanx"] = myList;

        return View();
    } 
```

**看法**

```
@Html.DropDownList("subscriptionplanx") 
```

现在，我不想使用 DropDownList，而是想使用单选按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:04:46.530

使用 a`HtmlHelper`可能是最优雅的解决方案。无论如何，如果你正在寻找一些简单的东西，试试这个：

```
@foreach(SelectListItem item in (IEnumerable<SelectListItem>)ViewData["subscriptionplanx"])
{
    <input type="radio" name="subscriptionplanx" value="@item.Value" />@item.Text <br />
} 
```

# c# - MVC4/Google OpenID 对特定 Google Apps 域的限制

> ID：16175966
> 
> 赞同：15
> 
> 时间：2013-04-23T17:53:31.173
> 
> 标签：c#, asp.net-mvc, openid, simplemembership

我创建了一个新的 MVC4/.NET4.5 项目并启用了 Google OpenID。这很容易奏效。

我的公司已“使用谷歌”，我们的域/员工身份位于 Google Apps 网络空间中。

如何仅允许我们的 Google Apps 域对我的新网站进行身份验证？我希望这是一件像认证一样简单的事情。

以下是一些附加信息：

*   我确实创建了一个默认 Web 应用程序并启用了 Google 身份验证部分。我无法相信针对 Google 进行验证是多么简单。
*   我的公司实际上有数百个电子邮件域，所有这些域都汇总在一个电子邮件域“伞”下。例如，我公司的企业邮箱域名是“foo.com”，但在这下面我们有“x.foo.com”、“bar.com”和“yomommasougly.net”。所有这些都是“foo.com”Google Apps 域的一部分。
*   最终目标是，描述需要做什么（以及在哪里）采用这个默认应用程序并将其限制在“foo.com”域下的所有域中。
*   由于有数百个域，并且一直在添加更多域，因此明确指定每个域是不切实际的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T21:52:26.423

假设您使用的是 DotNetOpenAuth，请查看[Stack Exchange Data Explorer](https://code.google.com/p/stack-exchange-data-explorer/source/browse/App/StackExchange.DataExplorer/Controllers/AccountController.cs)的身份验证代码。

本质上，您只需在请求中询问电子邮件地址：

```
request.AddExtension(
    new ClaimsRequest
    {
        Email = DemandLevel.Require,
    }
); 
```

然后根据您的域白名单检查返回的地址（我假设您已经只接受谷歌 OpenID）

```
var sreg = response.GetExtension<ClaimsResponse>();
If (!HasWhiteListedDomain(sreg.Email)) { 
    // Fail Here
} 
```

请注意，需要将这些代码添加到您的 Web.config 以获取用于获取上述电子邮件的确切代码：

```
 <configSections>
    <section name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection" requirePermission="false" allowLocation="true" />
  </configSections>
  <dotNetOpenAuth>
    <openid>
      <relyingParty>
        <behaviors>
          <!-- The following OPTIONAL behavior allows RPs to use SREG only, but be compatible
                    with OPs that use Attribute Exchange (in various formats). -->
          <add type="DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth> 
```

编辑：

如果使用`OAuthWebSecurity`获取电子邮件将看起来像这样：

```
var userDataFromProvider = result.ExtraData;
var email = userDataFromProvider["email"]; 
```

[资源](http://blog.develop.com/blogs/bid/232864/ASP-NET-Using-OAuthWebSecurity-without-SimpleMembership#.UX7svbVQGCk)

# php - PHP SOAP 请求脚本在 LAMP 服务器上出现 500 错误

> ID：16175968
> 
> 赞同：0
> 
> 时间：2013-04-23T17:53:39.240
> 
> 标签：php, soap, wamp, lamp

我有一个 PHP 脚本，它向我工作的公司的不同部门拥有的 ASMX API 发送 SOAP 请求。我在我的个人公司 PC 上的 WAMP 环境中开发了这个脚本，它在那个环境中运行良好，成功地接收和解析响应。但是，当我将此脚本上传到基于 LAMP 的开发服务器（刚刚设置）并尝试通过 Web 浏览器运行它时，我收到 500 内部服务器错误。设置服务器的 Web 工程师说他安装并启用了 PHP SOAP 扩展。有没有人知道下面代码中使用的任何其他需要在服务器上激活的东西，如果没有它会导致 500 错误？

这是发送请求的代码，减去 API 正确处理的实际 XML 正文。此片段后面的代码只是从返回的数组中提取各种值并将它们回显出来。

```
//Common SOAP client options that can be set.  
$clientOptions = array(
    'exceptions'=>true, 
    'trace'=>1, 
    'cache_wsdl'=>WSDL_CACHE_NONE, 
    'location' => $endpointURL);

//The creation of the client object. We pass it a reference to the WSDL.    
$requestXML = '<GetRateQuote xmlns="<URL>">
    CORRECTLY FORMATTED XML IS HERE
</GetRateQuote>';
$requestObj = new SoapVar($requestXML,XSD_ANYXML);
$client = new SoapClient($endpointURL . "?wsdl", $clientOptions);

    //Retrieve the response.
    $result = $client->GetRateQuote($requestObj);

    //Put the data into a variable to be parsed
    $data = $result->GetRateQuoteResult;.... 
```

# c# - 如何将 SQL Server 数据集中的数据提取到我可以使用的类中？

> ID：16175972
> 
> 赞同：0
> 
> 时间：2013-04-23T17:53:55.450
> 
> 标签：c#, sql-server, datagrid, datagridview

我试图在几天前开始的一个项目中取得进展，我花了一整天的时间在 ADO.net 上阅读，但我很难理解如何将我的 SQL Server 表数据提取到一个类中我基本上可以运行一些计算，例如“startTime - endTime = totalWorked”，这将允许我创建一个单独的表单，我可以在其中显示我的摘要。

我有我在这里完成的小代码，它连接到我的数据库并在代码中创建一个 datagridview。[http://pastebin.com/VNRDqHjM](http://pastebin.com/VNRDqHjM)

你能给我一些关于如何实现我想做的事情的指示吗？

非常感谢，罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:55:21.930

我强烈建议您查看一些自动为您执行此操作的 ORM 软件。自己创建类然后用对象填充它们既费时又容易出错。如今，有一些工具可以为您完成所有工作。

[在此处](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software#.NET)查看 .NET 的不同选项列表。我会推荐那些已经内置到 .NET 框架中的那些，但你不会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:34:40.760

一种选择是将项目放入 DTO。您可以遍历 IDataReader（我的偏好）或 DataSet。

想象一下，下面的 IDataReader 连接到“Select EmployeeKey, LastName, FirstName, HireDate from dbo.Employee;”

```
[Serializable]
public partial class Employee
{
    public int EmployeeKey { get; set; }                   
    public string LastName { get; set; }                   
    public string FirstName { get; set; }   
    public DateTime HireDate  { get; set; }  
}

[Serializable]
public class EmployeeCollection : List<Employee>
{
}   

internal static class EmployeeSearchResultsLayouts
{
    public static readonly int EMPLOYEE_KEY = 0;
    public static readonly int LAST_NAME = 1;
    public static readonly int FIRST_NAME = 2;
    public static readonly int HIRE_DATE = 3;
}

    public EmployeeCollection SerializeEmployeeSearchForCollection(IDataReader dataReader)
    {
        Employee item = new Employee();
        EmployeeCollection returnCollection = new EmployeeCollection();
        try
        {

            int fc = dataReader.FieldCount;//just an FYI value

            int counter = 0;//just an fyi of the number of rows

            while (dataReader.Read())
            {

                if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.EMPLOYEE_KEY)))
                {
                    item = new Employee() { EmployeeKey = dataReader.GetInt32(EmployeeSearchResultsLayouts.EMPLOYEE_KEY) };

                    if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.LAST_NAME)))
                    {
                        item.LastName = dataReader.GetString(EmployeeSearchResultsLayouts.LAST_NAME);
                    }

                    if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.FIRST_NAME)))
                    {
                        item.FirstName = dataReader.GetString(EmployeeSearchResultsLayouts.FIRST_NAME);
                    }

                    if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.HIRE_DATE)))
                    {
                        item.HireDate = dataReader.GetDateTime(EmployeeSearchResultsLayouts.HIRE_DATE);
                    }

                    returnCollection.Add(item);
                }

                counter++;
            }

            return returnCollection;

        }
        //no catch here... see  http://blogs.msdn.com/brada/archive/2004/12/03/274718.aspx
        finally
        {
            if (!((dataReader == null)))
            {
                try
                {
                    dataReader.Close();
                }
                catch
                {
                }
            }
        }
    } 
```

在您的值在 DTO 中之后，您可以添加一个只读属性，如下所示：

```
public int DaysEmployed
{
    get
    {
        int returnValue = 0;
            returnValue = Convert.ToInt32 (DateTime.Now.Subtract(this.HireDate).TotalDays);
        return returnValue;
    }
} 
```

这将利用您现有的属性。

请记住，如果您不向对象提供 HireDate，您将不得不处理各种情况。但你明白了。

您可以在具有计算列的 DataSet/DataTable 中执行此操作。但那是“非常 2004 年的”恕我直言。DTO（或 POCO，如果您添加一些基本逻辑）经过了非常长时间的测试。

# numpy - Cython 错误：未内置未声明的名称：数组

> ID：16175973
> 
> 赞同：7
> 
> 时间：2013-04-23T17:54:03.327
> 
> 标签：numpy, cython, sage

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:10:48.780

是的，但是您将其导入为`np`，而不是导入`*`（无论如何这都是个坏主意）并且没有进行常规的 Python 导入。（有时您必须同时执行 a`cimport`和`import`，请参阅[此 SO 问题以获取示例](https://stackoverflow.com/questions/7799977/numpy-vs-cython-speed)。）

然而，即使之后

```
import numpy as np 
```

和使用`np.array`，我仍然得到一些错误

```
ValueError: Buffer dtype mismatch, expected 'DTYPE' but got 'long' 
```

所以这解决了你的问题，但不是全部，而且我尝试过的事情并不能解决这个新问题。

# java - 程序可以编译，但运行时出错

> ID：16175976
> 
> 赞同：1
> 
> 时间：2013-04-23T17:54:38.390
> 
> 标签：java, maze

在尝试运行此代码时，我遇到了错误，但在编译时却没有。在每个定向方法结束时，我按照应该进入的顺序调用下一个方法。我要做的是制作一个程序，该程序将从文件中读取迷宫并解决它。在解决它时，我希望程序为它所走的路径放置一个 P，为已经访问过的地方放置一个 V。程序只允许向左向右然后向每个方向返回。当你走向不同的方向时，你仍然必须遵守这些规则，除了你现在面对的方式是新的前锋。

迷宫代码：

```
 public static boolean goNorth(){
        boolean success;
        if(maze[startCol][startRow] == maze[finishCol][finishRow]){
        return true;
        }
            if(maze[startCol][startRow - 1] == CLEAR){
                maze[startCol][startRow - 1] = PATH;
                startRow = startRow - 1;
                goNorth();
                if(maze[startCol][startRow - 1] == PATH){
                    maze[startCol][startRow - 1] = VISITED;
                    startRow = startRow - 1;
                    goNorth();
                    if (maze[startCol][startRow - 1] == VISITED){
                        goSouth();
                    }   
                }
            }
        goWest();
        return true;    
    }

    public static boolean goEast(){
        boolean success;
        if(maze[startCol][startRow] == maze[finishCol][finishRow]){
        return true;
        }
            if(maze[startCol + 1][startRow] == CLEAR){
                maze[startCol + 1][startRow] = PATH;
                startCol = startCol + 1;
                goEast();
                if(maze[startCol + 1][startRow] == PATH){
                    maze[startCol + 1][startRow] = VISITED;
                    startCol = startCol + 1;
                    goEast();
                    if(maze[startCol + 1][startRow] == VISITED){
                        goWest();
                    }
                }
            }
        goNorth();
        return false;   
    }

    public static boolean goSouth(){
        boolean success;
        if(maze[startCol][startRow] == maze[finishCol][finishRow]){
            return true;
            }

            if(maze[startCol][startRow + 1] == CLEAR){
                maze[startCol][startRow + 1] = PATH;
                startRow = startRow + 1;
                goSouth();
                if(maze[startCol][startRow + 1] == PATH){
                    maze[startCol][startRow + 1] = VISITED;
                    startRow = startRow + 1;
                    goSouth();
                    if (maze[startCol][startRow + 1] == VISITED){
                        goNorth();
                    }   
                }   
            }
        goEast();
        return false;   
        }

    public static boolean goWest(){
        boolean success;
        if(maze[startCol][startRow] == maze[finishCol][finishRow]){
        return true;
        }
            if(maze[startCol - 1][startRow] == CLEAR){
                maze[startCol - 1][startRow] = PATH;
                startCol = startCol - 1;
                goWest();
                if(maze[startCol - 1][startRow] == PATH){
                    maze[startCol - 1][startRow] = VISITED;
                    startCol = startCol - 1;
                    goWest();
                    if(maze[startCol - 1][startRow] == VISITED){
                        goEast();
                    }
                }   
            }
        goSouth();
        return false;
    }
} 
```

迷宫.txt：

```
20 7
0 18
6 12
xxxxxxxxxxxxxxxxxx x
x     x       xxxx x
x xxxxx xxxxx   xx x
x xxxxx xxxxxxx xx x
x            xx xx x
x xxxxxxxxxx xx    x 
xxxxxxxxxxxx xxxxxxx 
```

错误：

[http://s22.postimg.org/etar0eq1t/Code.png](http://s22.postimg.org/etar0eq1t/Code.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:08:41.433

知道了。您的代码首先调用 North，如果不清楚则调用 West，如果不清楚则调用 South，然后调用 East。不幸的是，您的 East 跟注不明确，然后再次跟注 North，这将循环上面的内容并破坏您的筹码。您需要一个更好的递归终止案例。

此外，这里没有进行“地图边缘”检测，因此在开始条件不佳的情况下，可能会退出您的迷宫和垃圾内存。想象一下，您的起始位置位于迷宫的北边。你的第一个电话是向北，它会读取你的数组并将事情炸毁。你需要检查你的洪水填充中的地图大小，走迷宫电话。

# linux - Bash脚本函数调用错误

> ID：16175977
> 
> 赞同：0
> 
> 时间：2013-04-23T17:54:43.057
> 
> 标签：linux, bash, shell

我正在编写我的第一个 Bash 脚本，并且遇到了函数调用的语法问题。

具体来说，我想像这样调用我的脚本：

```
sh myscript.sh -d=<abc> 
```

固定父目录 ( )`<abc>`中特定目录的名称在哪里。`~/app/dropzone`如果`<abc>`子目录不存在，我希望脚本在进入该目录之前创建它。如果用户根本不使用`-d`参数调用脚本，我希望脚本存在一个简单的使用消息。到目前为止，这是我对脚本的最佳尝试：

```
#!/bin/bash
dropzone="~/app/dropzone"

# If the directory the script user specified exists, overwrite dropzone value with full path
# to directory. If the directory doesn't exist, first create it. If user failed to specify
# -d=<someDirName>, exit the script with a usage statement.
validate_args() {
    args=$(getopt d: "$*")
    set -- $args
    dir=$2
    if [ "$dir" ]
    then
        if [ ! -d "${dropzone}/targets/$dir" ]
        then
            mkdir ${dropzone}/targets/$dir
        fi
        dropzone=${dropzone}/targets/$dir
    else
        usage
    fi
}

usage() {
    echo "Usage: $0" >&2
    exit 1
}

# Validate script arguments.
validate_args $1

# Go to the dropzone directory.
cd dropzone
echo "Arrived at dropzone $dropzone."

# The script will now do other stuff, now that we're in the "dropzone".
# ...etc. 
```

当我尝试运行它时，我收到以下错误：

```
myUser@myMachine:~/app/scripts$ sh myscript.sh -dyoyo
mkdir: cannot create directory `/home/myUser/app/dropzone/targets/yoyo': No such file or directory
myscript.sh: 33: cd: can't cd to dropzone
Arrived at dropzone /home/myUser/app/dropzone/targets/yoyo. 
```

我哪里出错了，我的一般方法是否正确？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:59:38.873

将函数定义移动到脚本的顶部（在 hash-bang 下方）。`bash`反对未定义（当时）调用`validate_args`. `usage`定义应该在定义之前`validate_args`。

if 测试“[”和“]”中也应该有间距。

```
 if [ -d "$dropzone/targets/$1" ] 
```

选项 d的`getopt`测试应该是：

```
 if [ "$(getopt d "$1")" ] 
```

这是适用于我的 validate_args 版本。我还必须更改放置区域，因为我的 shell ~ 不会在 mkdir 命令中扩展。

```
dropzone="/home/suspectus/app/dropzone"

validate_args() {
    args=$(getopt d: "$*")
    set -- $args
    dir=$2
    if [ "$dir" ]
    then
        if [ ! -d "${dropzone}/targets/$dir" ]
        then
            mkdir ${dropzone}/targets/$dir
        fi
        dropzone=${dropzone}/targets/$dir
    else
        usage
    fi
} 
```

要传入所有参数，请使用 $* 作为参数 -：

```
 validate_args $* 
```

最后调用这样的脚本以使 getopt 正确解析-：

```
 myscript.sh -d dir_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:01:28.937

调用时，函数与命令无法区分——因此您不要使用括号：

```
validate_args($1)  # Wrong
validate_args $1   # Right 
```

此外，正如[嫌疑人在他的](https://stackoverflow.com/users/1827600/suspectus)[回答](https://stackoverflow.com/a/16176053/)中指出的那样，必须在调用函数之前定义它们。您可以使用脚本看到这一点：

```
usage

usage()
{
    echo "Usage: $0" >&2
    exit 1
} 
```

`usage: command not found`假设您没有可用的命令或函数，它将报告`usage`。将调用放在函数定义之后，它将正常工作。

* * *

您选择的接口不是标准的 Unix 命令调用约定。你通常会使用：

```
dropzone -d subdir 
```

而不是

```
dropzone -d=subdir 
```

但是，我们可以处理您选择的接口（但不使用`getopts`内置命令解释器，也可能不使用 GNU `getopt`，当然也不会`getopt`像您尝试那样使用）。这是支持的可行代码`-d=subdir`：#!/bin/bash

```
dropzone="$HOME/app/dropzone/targets"

validate_args()
{
    case "$1" in
    (-d=*)  dropzone="$dropzone/${1#-d=}"; mkdir -p $dropzone;;
    (*)     usage;;
    esac
}

usage()
{
    echo "Usage: $0 -d=dropzone" >&2
    exit 1
}

# Validate script arguments.
validate_args $1

# Go to the dropzone directory.
cd $dropzone || exit 1
echo "Arrived at dropzone $dropzone."

# The script will now do other stuff, now that we're in the "dropzone".
# ...etc. 
```

请注意谨慎的做法`cd $dropzone || exit 1`; 如果`cd`失败，你肯定不想在错误的目录中继续。

使用`getopts`内置的命令解释器：

```
#!/bin/bash

dropzone="$HOME/app/dropzone/targets"

usage()
{
    echo "Usage: $0 -d dropzone" >&2
    exit 1
}

while getopts d: opt
do
    case "$opt" in
    (d) dropzone="$dropzone/$OPTARG"; mkdir -p $dropzone;;
    (*) usage;;
    esac
done
shift $(($OPTIND - 1))

# Go to the dropzone directory.
cd $dropzone || exit 1
echo "Arrived at dropzone $dropzone."

# The script will now do other stuff, now that we're in the "dropzone".
# ...etc. 
```

# c# - C# 项目中的 VisualBasic 错误

> ID：16175982
> 
> 赞同：0
> 
> 时间：2013-04-23T17:55:05.470
> 
> 标签：c#, winforms

尝试打开表单时出现此错误。它找不到：

```
microsoft.visualbasic.PowerPacks.Vs. Version=10.0.0.0, Culture=neutral 
```

奇怪的是，它说的是 Visual Basic，而我使用的是 C#。所有其他表格都可以正常打开，但不是这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:07:31.980

程序集恰好在其名称中包含“visual basic”这一事实并不意味着它特定于 VB。所有 VB 代码以及 C# 代码（以及一些其他语言）都编译为相同的中间语言 (IL) 代码。这个想法是包含“.NET 语言”，虽然它们具有不同的语法和更高级别的目标和意图，但具有共同的较低级别的实现。您可以使用来自 C# 或 VB 的任何（好吧，技术上不是任何，但几乎任何）.NET dll。

在这种特殊情况下，您的代码（可能间接地）引用了一个名为“microsoft.visualbasic.PowerPacks”的特定.NET 程序集；因此，您需要访问该程序集才能运行程序。

# javascript - 根据单选按钮显示/隐藏表格行

> ID：16175994
> 
> 赞同：1
> 
> 时间：2013-04-23T17:55:49.887
> 
> 标签：javascript, jquery

我有一组四个单选按钮，代表四种不同的条件（好、改善、恶化、差）。选择“恶化”或“差”应该取消隐藏带有文本区域的表格行，以解释为什么条件不好。选择“好”或“改进”应该隐藏表格行。我尝试向两个取消隐藏表格行的类添加一个类，但只有一个按钮在工作（恶化）。我有一种感觉，我需要在某处使用 or 子句来拾取两个按钮，但我尝试了很多变体，但我只是没有想出它。感谢对这个菜鸟的任何帮助。

这是我所拥有的：

```
<tr>
     <td>
      Customer Sentiment:
    </td>
    <td colspan="3">
    <div id="sentiment">
        <input class="xhide" type="radio" id="Good" value="1"   name="sentimentID" <cfif sentimentID eq 1>checked</cfif> /><label for="Good">Good</label>
        <input class="xhide" type="radio" id="Improving" value="2" name="sentimentID" <cfif sentimentID eq 2>checked</cfif> /><label for="Improving">Improving</label>
        <input class="xshow" type="radio" id="Worsening" value="3" name="sentimentID" <cfif sentimentID eq 3>checked</cfif> /><label for="Worsening">Worsening</label>
        <input class="xshow" type="radio" id="Poor" value="4"   name="sentimentID" <cfif sentimentID eq 4>checked</cfif> /><label for="Poor">Poor</label>
    </div>
    </td>
</tr>                        

<tr class="rnotes"">
    <td valign="top">Sentiment Notes:</td>
    <td colspan="3">
        <cfoutput>
        <textarea   name="sentimentNotes"
                    cols="100"
                    rows="4">#sentimentNotes#</textarea>
        </cfoutput>
    </td>
</tr> 
```

脚本：

```
$(document).ready(function() 
{
    $(".rnotes").hide();

    $(':radio').change(function(){
    var isChecked=$('.xshow').prop('checked');
    $('.rnotes').toggle(isChecked);
    });
}); 
```

==================================================== =======================

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:02:32.340

这是脚本：

```
$(document).ready(function() 
{
    $(".rnotes").hide();

    $('input[type=radio]').change(function(){
        var isChecked = $(this).prop('checked');
        var isShow = $(this).hasClass('xshow');
        $(".rnotes").toggle(isChecked && isShow);
    });
}); 
```

工作小提琴：http: [//jsfiddle.net/LnyJZ/5/](http://jsfiddle.net/LnyJZ/5/)

# c# - 从C#中的对象中提取字符串数组

> ID：16175999
> 
> 赞同：0
> 
> 时间：2013-04-23T17:56:04.290
> 
> 标签：c#, arrays, string, object, extract

自从我学习编程以来已经有一段时间了，我正在为此苦苦挣扎。

我从 Web 服务收到一堆信息，我将它们保存在一个对象上，然后在使用反射方法后我得到了数组，所以我仍然坚持在对象中包含数组。

我只是不记得如何将对象内部的数组转换为字符串数组，有人可以帮我吗？

```
object information = new object();
string propName="members";
information=sinos1.Info(Convert.ToInt32(edo),Convert.ToInt32(anio),Convert.ToInt64(familia));
Object value = GetPropValue( information, propName); 
```

`information`是从 Web 服务`value`接收信息的对象，并且是在反射后接收信息的对象，代码是：

```
public static object GetPropValue(object src, string propName)
{
     return src.GetType().GetProperty(propName).GetValue(src, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:59:10.697

您可以尝试探测对象的接口。

```
object value = GetPropValue(information, propName);

if(value is IEnumerable)
{
    var array = value as IEnumerable;
    foreach(object obj in array)
    {

    }
} 
```

此外，您可以使用`Type.GetTypeCode`用于`obj`处理值类型。