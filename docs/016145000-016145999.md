# StackOverflow 问答 16145000-16145999

# python - 多个图并将它们保存为增量

> ID：16145001
> 
> 赞同：1
> 
> 时间：2013-04-22T10:36:16.063
> 
> 标签：python, plot

现在它以这种方式工作，所以我需要以 .eps 格式自动保存它们作为增量，如 1.eps、2.eps。另一件事，有没有办法可以将 y 的输出像 [1 1 1 1 1 1] 放在每个图的顶部？我对python很陌生，这就是为什么我仍在努力学习这些东西。3phases.txt 文件由 3 行组成

```
1   1   1, 
1   -1  1, 
-1  -1  -1 
```

又是代码：

```
import matplotlib.pyplot as plt
import numpy as np

D=13.0
n = range(1,7)
x = np.linspace(-0.3-D/2, 0.3+D/2, 3000)

q = np.array([0, 4.38,  12.61,  3.63,  0,  6.39])
f = open('3phases.txt','r')

for line in f.readlines():  
    line = line.split()
    line.insert(0, '1')
    line.insert(3, '1')
    line.insert(4, '1')

    t=map(float,line)

    y = np.array(t*q)
    d=sum(l*np.cos(2*np.pi*j*x/D) for j,l in zip(n,y)) 

    fig, ax = plt.subplots()
    ax.plot(x, d, 'ro')

plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:52:11.510

那么，您想为输入文件的每一行单独绘制一个图吗？然后您可以按照以下方式进行操作：

```
import matplotlib.pyplot as plt
import numpy as np

with open('3phases.txt', 'r') as f:
   for j, line in enumerate(f):
      print line
      x = np.array([int(l) for l in line.split()])
      fig, ax = plt.subplots()

      ax.plot(x, x**2, 'ro')
      plt.savefig(str(j)+'.eps') 
```

或者，您可能希望避免在循环中创建新图形（特别是如果您有很多），创建一次并重复使用：然后您需要在保存后清除它，请参见[此处](https://stackoverflow.com/questions/8213522/matplotlib-clearing-a-plot-when-to-use-cla-clf-or-close)。

根据经验，`from pylab import *`除非您处于交互模式，否则我建议避免从 pylab 导入一揽子文件。

# ios - 警报视图未显示？

> ID：16145007
> 
> 赞同：-3
> 
> 时间：2013-04-22T10:36:24.373
> 
> 标签：ios, objective-c, uialertview, nsnotifications

我正在检查互联网是否可用是机器人试图显示一个警报，当我单击此“确定”按钮时，我想退出应用程序。但现在此警报没有显示，也没有调用代理。

在我的连接功能中

```
 if([[notification object] isEqualToNumber:[NSNumber numberWithInt:0]])
    {
        checkNetwork=[[UIAlertView alloc]initWithTitle:@"AssamKart" message:@"Device is not Connected To internet ,Please try again later " delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

        [checkNetwork show];

    } 
```

在我的警报代表中

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {

        if(alertView==checkNetwork)
        {

            if(buttonIndex==1)
            {

           //here i open some other viewcontroller
        }}

    } 
```

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:41:55.633

如果您显示所有问题都必须解决，那么您的代码肯定存在一些小问题，但主要问题是您所要求的

```
click this "Ok" button i want to exit app 
```

没有办法将此作为[人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)。“不要以编程方式退出”。永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。

如果有一些特定的原因，您需要告诉您的用户有关情况并解释他们可以做些什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:56:04.620

作为 Apple 的人机界面指南，您不能以编程方式退出应用程序。

可能您的情况可能无法实现。

```
 if([[notification object] isEqualToNumber:[NSNumber numberWithInt:0]]) 
```

您可以尝试调试您的代码并查看它。其次，如果它只是关于警报，那么只需尝试无条件显示警报并查看它是否显示。

还有你是怎么定义的`checkNetwork`？你应该确保它是`retain`或类型`strong`。如果您使用的是 iOS6，请使用 strong 并将其作为属性。

```
@property(strong,nonatomic)UIAlertView *checkNetwork; 
```

最后在您的代码中，您可以使用`self.`前缀访问它。

```
 self.checkNetwork=[[UIAlertView alloc]initWithTitle:@"AssamKart" message:@"Device is not Connected To internet ,Please try again later " delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T11:12:50.437

您的代码应该可以工作。我会尝试在 IF 语句中放置一个断点

```
if([[notification object] isEqualToNumber:[NSNumber numberWithInt:0]]) 
```

看看代码是否被调用。它也可能有助于添加

```
<UIAlertViewDelegate> in the .h. 
```

再说一次，不要以编程方式退出！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-22T10:39:21.340

确保您从主线程显示警报视图，即：

```
[checkNetwork performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:NO]; 
```

希望有帮助，A.

# wordpress - 没有属性“data-cfasync”（Olark）WP

> ID：16145009
> 
> 赞同：4
> 
> 时间：2013-04-22T10:36:25.107
> 
> 标签：wordpress, validation, plugins, widget

由于添加了使用Olark的代码：[http ://www.olark.com/](http://www.olark.com/)

我收到一个验证错误

```
<script data-cfasync="false" type='text/javascript'>/*<![CDATA[*/window.olark||…
✉
You have used the attribute named above in your document, but the document type you are using does not support that attribute for this element. This error is often caused by incorrect use of the "Strict" document type with a document that uses frames (e.g. you must use the "Transitional" document type to get the "target" attribute), or by using vendor proprietary extensions such as "marginheight" (this is usually fixed by using CSS to achieve the desired effect instead).

This error may also result if the element itself is not supported in the document type you are using, as an undefined element will have no supported attributes; in this case, see the element-undefined error message for further information. 
```

文档类型是过渡性的。我该如何解决这个问题？

它在代码中还有一个抛出以下错误的代码：

```
The mentioned element is not allowed to appear in the context in which you've placed it; the other mentioned elements are the only ones that are both allowed there and can contain the element mentioned. This might mean that you need a containing element, or possibly that you've forgotten to close a previous element.

One possible cause for this message is that you have attempted to put a block-level element (such as "<p>" or "<table>") inside an inline element (such as "<a>", "<span>", or "<font>"). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-17T17:11:25.733

来自奥拉克的苏尼尔在这里。您可以为您的网站删除该属性。它用于管理与 Cloudflare 的交互。如果您不使用 Cloudflare，则不需要。

[http://blog.cloudflare.com/combining-javascript-css-a-better-way](http://blog.cloudflare.com/combining-javascript-css-a-better-way)

# php - 随机播放无限循环中的随机数

> ID：16145011
> 
> 赞同：0
> 
> 时间：2013-04-22T10:36:26.513
> 
> 标签：php, random, shuffle

嗨，我正在寻找一个简单的解决方案来对一系列随机数进行洗牌，然后从该范围内取出 5 个数字并放入一个滑块中。目前我的代码是这样的，它以无限循环结束：

```
$slides = range(1,30);
shuffle($slides);
$count = 0; //infinite loop guard
do{
  foreach ($slides as $slide) {
  echo "<img src=\"images/slider_".$slide.".jpg\" alt=\"\" />\n";
  }
} while ($count<5); 
```

Javascript 中有很多示例，但我无法为 PHP 复制这些示例。此代码用于为滑块生成随机图像，但一次限制为 5 个滑块。共有 30 张图片可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:40:58.553

所以这里的错误是你应该`$count`在循环内递增；没有它，它的值会停留在 0。此外，您正在遍历 ; 中的完整值列表`do {} while`。也许这是有意的，但考虑到您一次需要 5 张幻灯片，我怀疑这是否正确。

与其用自己的循环打自己的脚，不如[切](http://php.net/array_slice)下你需要的东西：

```
$slides = range(1,30);
shuffle($slides);
foreach (array_slice($slides, 0, 5) as $slide) {
    echo "<img src=\"images/slider_".$slide.".jpg\" alt=\"\" />\n";
} 
```

该`array_slice()`函数创建一个新数组，从索引 0（第一项）开始，长度为 5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:39:44.237

当您使用增量计数器时，使用 for 循环更容易：

```
$slides = range(1,30);
shuffle($slides);
$count = 0; //infinite loop guard
for ( $count = 0 ; $count < 5 ; $count++){
    foreach ($slides as $slide) {
        echo "<img src=\"images/slider_".$slide.".jpg\" alt=\"\" />\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T10:37:32.643

你没有`$count`在你的循环中增加，所以它总是为零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:38:18.067

```
$slides = range(1,30);
shuffle($slides);
$count = 0; //infinite loop guard
do{
  foreach ($slides as $slide) {
  $count++;
  echo "<img src=\"images/slider_".$slide.".jpg\" alt=\"\" />\n";
  }
} while ($count<5); 
```

很明显，这是一个无限循环，因为您不会增加 $count。这样做`$count++;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T10:38:49.617

增量`$count`，例如：

```
foreach ($slides as $slide) {
  echo "<img src=\"images/slider_".$slide.".jpg\" alt=\"\" />\n";
  $count++;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T10:40:10.550

尝试：

```
$slides = range(1,30);
shuffle($slides);

for ($i = 0; $i < 5; $i++): ?>
    <img src="images/slider_<?php echo $slides[$i]; ?>.jpg" alt="" /><br />
<?php endfor ?> 
```

# ruby-on-rails - 无法将我的 Rails 应用程序部署到 Linode VPS

> ID：16145014
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:36:40.437
> 
> 标签：ruby-on-rails, deployment, linode

我正在尝试将我的 Rails 应用程序部署到 Linode VPS，但是在我完成所有步骤之后 `xxx@xxxx-desktop:~/myrailsapp$ cap deploy:cold`

我收到以下错误：

```
failed: "env PATH=$HOME/.rvm/shims:$HOME/.rvm/bin:$PATH sh -c 'cd /home/deployer/apps/myrailsapp/releases/20130422101521 && bundle install --gemfile /home/deployer/apps/myrailsapp/releases/20130422101521/Gemfile --path /home/deployer/apps/myrailsapp/shared/bundle --deployment --quiet --without development test'" on xxx.xxx.xxx.xxx 
```

完整日志如下：

```
xxx@xxx-desktop:~/myrailsapp$ cap deploy:cold
  * 2013-04-22 15:44:59 executing `deploy:cold'
  * 2013-04-22 15:44:59 executing `deploy:update'
 ** transaction: start
  * 2013-04-22 15:44:59 executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@bitbucket.org:myrailsapp/myrailsapp.git master"
    command finished in 5385ms
  * executing "if [ -d /home/deployer/apps/myrailsapp/shared/cached-copy ]; then cd /home/deployer/apps/myrailsapp/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 88641306c92790d13f95beb7a2826a072ab72df4 && git clean -q -d -x -f; else git clone -q git@bitbucket.org:myrailsapp/myrailsapp.git maste /home/deployer/apps/myrailsapp/shared/cached-copy && cd /home/deployer/apps/myrailsapp/shared/cached-copy && git checkout -q -b deploy 88641306c92790d13f95beb7a2826a072ab72df4; fi"
    servers: ["xxx.xxx.xxx.xxx"]
Password: 
    [xxx.xxx.xxx.xxx] executing command
    command finished in 5786ms
    copying the cached version to /home/deployer/apps/myrailsapp/releases/20130422101521
  * executing "cp -RPp /home/deployer/apps/myrailsapp/shared/cached-copy /home/deployer/apps/myrailsapp/releases/20130422101521 && (echo 88641306c92790d13f95beb7a2826a072ab72df4 > /home/deployer/apps/myrailsapp/releases/20130422101521/REVISION)"
    servers: ["xxx.xxx.xxx.xxx"]
    [xxx.xxx.xxx.xxx] executing command
    command finished in 951ms
  * 2013-04-22 15:45:22 executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * 2013-04-22 15:45:22 executing `deploy:assets:symlink'
  * executing "rm -rf /home/deployer/apps/myrailsapp/releases/20130422101521/public/assets && mkdir -p /home/deployer/apps/myrailsapp/releases/20130422101521/public && mkdir -p /home/deployer/apps/myrailsapp/shared/assets && ln -s /home/deployer/apps/myrailsapp/shared/assets /home/deployer/apps/myrailsapp/releases/20130422101521/public/assets"
    servers: ["xxx.xxx.xxx.xxx"]
    [xxx.xxx.xxx.xxx] executing command
    command finished in 993ms
  * 2013-04-22 15:45:23 executing `bundle:install'
  * executing "cd /home/deployer/apps/myrailsapp/releases/20130422101521 && bundle install --gemfile /home/deployer/apps/myrailsapp/releases/20130422101521/Gemfile --path /home/deployer/apps/myrailsapp/shared/bundle --deployment --quiet --without development test"
    servers: ["xxx.xxx.xxx.xxx"]
    [xxx.xxx.xxx.xxx] executing command
 ** [out :: xxx.xxx.xxx.xxx] ERROR: Gem bundler is not installed, run `gem install bundler` first.
    command finished in 974ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/myrailsapp/releases/20130422101521; true"
    servers: ["xxx.xxx.xxx.xxx"]
    [xxx.xxx.xxx.xxx] executing command
    command finished in 971ms
failed: "env PATH=$HOME/.rvm/shims:$HOME/.rvm/bin:$PATH sh -c 'cd /home/deployer/apps/myrailsapp/releases/20130422101521 && bundle install --gemfile /home/deployer/apps/myrailsapp/releases/20130422101521/Gemfile --path /home/deployer/apps/myrailsapp/shared/bundle --deployment --quiet --without development test'" on xxx.xxx.xxx.xxx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:41:16.640

您收到错误消息：

```
Bundler is not installed 
```

在您的 linode 服务器之前，您必须安装捆绑程序：

```
gem install bundler 
```

此外，您必须在顶部添加到您的`deploy.rb`

```
require "bundler/capistrano" 
```

另外，您的问题是 rvm 尚未添加到 PATH：

你可以看看这个问题：

[Ruby on Rails RVM $PATH 问题](https://stackoverflow.com/questions/9018598/ruby-rails-rvm-path-issue)

问候！

# php - 如何在 php5 中使用 RC6？

> ID：16145023
> 
> 赞同：2
> 
> 时间：2013-04-22T10:36:58.067
> 
> 标签：php, encryption, php-5.3, mcrypt

我的项目需要使用 RC6 密码。但是，因为我的服务器中安装的 mcrypt 库是 mcrypt 版本 2.5.8，所以它不支持 RC6 密码。正如[http://www.php.net/manual/en/mcrypt.ciphers.php](http://www.php.net/manual/en/mcrypt.ciphers.php)中所写，RC6 128 位密码仅受 libmcrypt 2.2.x 和 2.4.x 支持。以下是在该网站上写的描述：

```
MCRYPT_RC6 (libmcrypt > 2.4.x only)

MCRYPT_RC6_128 (libmcrypt 2.2.x only)

MCRYPT_RC6_192 (libmcrypt 2.2.x only)

MCRYPT_RC6_256 (libmcrypt 2.2.x only) 
```

我真的需要为我的项目使用 RC6 密码。我试图找到如何安装 mcrypt 库版本 2.2.x 或 2.4.x，但我找不到它。我使用了 PHP 5.3.2，这是输出`php -v`：

> 带有 Suhosin-Patch (cli) 的 PHP 5.3.2-1ubuntu4.19（构建时间：2013 年 3 月 11 日 15:23:48） 版权所有 (c) 1997-2009 The PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2010禅德科技

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:00:42.950

您可以在此处下载最新版本的 MyCrypt：

[http://sourceforge.net/projects/mcrypt/files/latest/download](http://sourceforge.net/projects/mcrypt/files/latest/download)

# c++ - for循环中的热点

> ID：16145027
> 
> 赞同：6
> 
> 时间：2013-04-22T10:37:05.097
> 
> 标签：c++, optimization, assembly, profiling, intel-vtune

我正在尝试优化此代码。

```
static
lvh_distance levenshtein_distance( const std::string & s1, const std::string & s2 )
{
    const size_t len1 = s1.size(), len2 = s2.size();
    std::vector<unsigned int> col( len2+1 ), prevCol( len2+1 );

    const size_t prevColSize = prevCol.size();
    for( unsigned int i = 0; i < prevColSize; i++ )
        prevCol[i] = i;

    for( unsigned int i = 0, j; i < len1; ++i )
    {
        col[0] = i+1;
        const char s1i = s1[i];
        for( j = 0; j < len2; ++j )
        {
            const auto minPrev = 1 + std::min( col[j], prevCol[1 + j] );
            col[j+1] = std::min( minPrev, prevCol[j] + (  s1i == s2[j] ? 0 : 1 ) );

        }
        col.swap( prevCol );
    }
    return prevCol[len2];
} 
```

英特尔 VTune 显示大约一半的处理器时间花在第二`for` **条指令**上，而不是*循环**内的 2 行* 。当我展开汇编源代码时，我可以看到c++ 指令已被翻译成许多操作码，其中 3 个似乎正在吞噬 CPU 时间：`for` *`for`*

 *```
Code Location   Source Line Assembly    CPU Time
        Block 14:   [Unknown]
0x420c00    31  movq  (%r12), %rcx  19.969ms
0x420c04    30  add $0x1, %r11d [Unknown]
0x420c08    32  test %rbx, %rbx [Unknown]
0x420c0b    30  movl  %r11d, (%r8)  [Unknown]
0x420c0e    31  movzxb  (%rcx,%rdx,1), %r9d 19.964ms
0x420c13    32  jz 0x420c53 <Block 17>  [Unknown]
        Block 15:   [Unknown]
0x420c15    32  movq  (%rbp), %r10  [Unknown]
0x420c19    32  mov %r11d, %edx [Unknown]
0x420c1c    32  xor %ecx, %ecx  39.928ms
0x420c1e    32  xor %edi, %edi  [Unknown]
        Block 16:   [Unknown]
0x420c20    34  add $0x1, %edi  29.994ms
0x420c23    34  mov %edi, %esi  30.956ms
0x420c25    34  movl  (%rax,%rsi,4), %r15d  180.659ms
0x420c29    34  cmp %r15d, %edx 39.896ms
0x420c2c    34  cmovbe %edx, %r15d  19.951ms
0x420c30    35  xor %edx, %edx  460.772ms
0x420c32    34  add $0x1, %r15d 19.946ms
0x420c36    35  cmpb  (%r10,%rcx,1), %r9b   169.659ms  
0x420c3a    35  setnz %dl   49.815ms
0x420c3d    35  addl  (%rax,%rcx,4), %edx   [Unknown]
0x420c40    32  mov %rsi, %rcx               210.615ms  <------------------
0x420c43    32  cmp %edx, %r15d              29.936ms
0x420c46    32  cmovbe %r15d, %edx          29.938ms
0x420c4a    32  cmp %rsi, %rbx              558.298ms  <-------------------
0x420c4d    35  movl  %edx, (%r8,%rsi,4)    19.965ms
0x420c51    32  jnbe 0x420c20 <Block 16>    200.625ms  <------------------- 
```

我不明白一个简单的移动和比较怎么会那么耗时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T11:27:26.443

Profiler 无法向您显示确切的最耗时的指令，因为所有现代 CPU 都使用乱序和推测执行。距离最耗时的指令一两行的最大测量时间并不罕见。

正如预期的那样，这里最耗时的指令是`cmovbe`（实现`std::min`）。您可以看到它们附近的最大时间：460.772ms 和 558.298ms。`cmovbe`是最耗时的指令，因为它们通常具有较大的延迟并且更多地依赖于前面的指令。*

# web-services - 我在使用 php 的 nusoap api 时遇到问题？如何让它与最新的 php 版本一起使用？

> ID：16145030
> 
> 赞同：1
> 
> 时间：2013-04-22T10:37:23.627
> 
> 标签：web-services, nusoap

我正在尝试将`nusoap`api 用于 php 核心网络应用程序。`nusoap`与肥皂客户端一起工作时客户端的问题`.Nusoap`根本不起作用..此外，我没有找到任何相关的帮助。使用`php 5.4.3`和`nusoap 0.9.5`...

```
require_once '../lib/nusoap.php';
require_once '../my-methods/functions.php';

$wsdl = "index.php?wsdl";
$client = new SoapClient($wsdl);
$val = $client->GetWalk(14);
var_dump($val);
$soap = new nusoap_client($wsdl);
$soapaction =  "../check_soap.php";
$err = $soap->getError();
var_dump($err);
$soap->soap_defencoding = 'UTF-8';
$res = $soap->call('GetWalk',15,$wsdl,$soapaction);
var_dump($res); 
```

# regex - 如果未输入路径，则 Htaccess 重写

> ID：16145038
> 
> 赞同：2
> 
> 时间：2013-04-22T10:37:39.697
> 
> 标签：regex, .htaccess

我希望在请求任何路径/页面时加载 webapp/index.php。因此，我将以下内容放入我的 htaccess

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ /webapp/index.php?_path=$1 [L,QSA] 
```

这适用于任何路径，虽然没有给出页面，但它似乎不起作用。当请求“/”时，如何应用相同的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:32:37.693

也许这有效：

```
RewriteRule ^($|.*) /webapp/index.php?_path=$1 [L,QSA] 
```

或者，如果 .htaccess 文件不在根目录或未设置 DirectoryIndex，您可以尝试此操作：

```
DirectoryIndex index.php

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^($|.*)          [NC]
RewriteRule .* /webapp/index.php?_path=%1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:48:06.510

将`.+`（一个或多个字符）替换为`.*`（0 个或多个字符）。IE：

```
RewriteRule ^(.*)$ /webapp/index.php?_path=$1 [L,QSA] 
```

# java - 使用 Java 和 Eclipse 构建 TFS

> ID：16145046
> 
> 赞同：1
> 
> 时间：2013-04-22T10:38:12.433
> 
> 标签：java, eclipse, tfs, tfsbuild

我需要使用 TFS 和 Eclipse（Java Ant 项目）。

TFS 由 Microsoft ( [http://tfs.visualstudio.com](http://tfs.visualstudio.com) ) 提供，我遵循了此说明[http://tfs.visualstudio.com/en-us/learn/build/setup-ci-build-in-eclipse/](http://tfs.visualstudio.com/en-us/learn/build/setup-ci-build-in-eclipse/) .

但是构建总是因为不显示任何错误而失败。对于 .NET 项目，当构建失败时会显示错误。

我在日志中的信息是：

整体构建过程

获取构建

更新内部版本号

Run On Agent（保留构建代理托管构建代理）

获取构建目录

If Not String.IsNullOrEmpty(ConfigurationFolderPath)

为配置文件夹运行 TfsBuild

获取资源

标记来源

运行蚂蚁

C:\a\src\Tools\java\bin\java.exe -jar C:\a\src\Tools\ant\lib\ant-launcher.jar -buildfile C:\a\src\src\projectBuilder.xml -DBinariesRoot=C:\a\bin -DBuildDefinitionName="Hello World CI" -DBuildDefinitionUri=vstfs:///Build/Definition/2 -DBuildDirectory=C:\a -DBuildNumber="Hello World CI_20130422.15" -DDropLocation= $/HW/Drops -DLogLocation= -DSourceGetVersion=C90 -DTestResultsRoot=C:\a\TestResults -DTeamProject=HW -DWorkspaceName=WIN-50B0FC22RNF_2_40 -DWorkspaceOwner="LOCAL AUTHORITY\Elastic Build (remotemonitoring)"

为默认目标构建 $/HW/HW/projectBuilder.xml。

生成变更集列表和更新工作项

如果编译状态 = 未知

如果 TestStatus = 未知

将 TestStatus 设置为成功

任何人都可以将 TFS 与 Eclipse、Java 和 Ant 一起使用？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:43:05.400

要解决这个问题：我上传了编译后的 jar 文件......显然构建代理无法覆盖这个......

解决方案：删除jar文件，构建工作！

# java - 如何在不将每个 http 状态代码硬编码到我的 java 程序中的情况下对这些 https 状态代码进行排序？

> ID：16145051
> 
> 赞同：0
> 
> 时间：2013-04-22T10:38:19.333
> 
> 标签：java, url, count, hyperlink

我有一个接收 ArrayList 的方法。检查每个元素中的 url 以查看它是否连接。如果状态码不是 200，则将 url 添加到一个断开链接的计数中。正如你所看到的，我也打印了带有消息的 url 和 status 代码。

我想做的是对每个不是 200 的不同状态代码进行计数。

因此，我将获得断开链接的总数，以及非 200 状态代码的每个实例的计数。例如，如果有 5 个 404 的 http 状态，它们将被单独计算，任何其他状态代码也不是200。

我不想将每个状态代码作为计数变量硬编码到我的代码中，我想知道代码是否可以为每个不同的状态创建一个新的计数变量？

这是我目前的方法：

```
public static void LinkSorter(List x){
        System.out.println("processing...");
        int brokenLinkCount = 0;

        for(int i=0; i<x.size();i++){

            try{

                URL url = new URL((String) x.get(i));
                URLConnection conn = url.openConnection();
                conn.connect();
                HttpURLConnection httpCon = (HttpURLConnection)conn;
                int statusCode = httpCon.getResponseCode();
                String statusMessage = httpCon.getResponseMessage();

                if(statusCode != 200){
                    System.out.println((String) x.get(i) + statusCode + statusMessage);
                    brokenLinkCount++;
                }

              catch(MalformedURLException e) {
                System.out.println("MalformedURL Exception");
                System.out.println(e.getMessage());
                brokenLinkCount++;

            } catch(IOException e){
                System.out.println("IOException");
                System.out.println(e.getMessage() + "IOException");
                brokenLinkCount++;                  
            }   

        }

        if(brokenLinkCount == 0){
            System.out.println("There are no broken links.");
        }else if(brokenLinkCount == 1){
            System.out.println("There is 1 broken link.");
        }else{
        System.out.println("There are " + brokenLinkCount + " broken links.");
        } 

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:42:06.020

您可以使用[MultiMap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)，键是状态代码，值是断开的链接。这几乎会自动让你们两个：

*   每个单独的非 200 状态代码（作为键）
*   与每个代码关联的“损坏”链接的计数 ( `map.get(code).size()`)

伪代码：

```
// declare a multimap, somewhere before you need to first access it
Multimap<Integer, String> brokenLinkMap = ArrayListMultiMap.create();

// use the map, in your current if block
if(statusCode != 200){
    System.out.println((String) x.get(i) + statusCode + statusMessage);
    brokenLinkMap.put(statusCode, url.toExternalForm()); // <-- adding to the map!
}

// after all links have been processed, you can dump the map contents
for(final Integer key : brokenLinkMap.keys()) {
    System.out.printf("Broken link count for status %s: %s\n", key, brokenLinkMap.get(key).size());
} 
```

或者，您可以使用所有标准 JDK 类：

```
// declare a map of lists, somewhere before you first need to access it
Map<Integer, List<String>> brokenLinkMap = new HashMap<Integer, List<String>>(4);

// use the map, in your current if block
if(statusCode != 200){
    System.out.println((String) x.get(i) + statusCode + statusMessage);
    if(! brokenLinkMap.containsKey(statusCode)) {
        List<String> brokenLinkList = new ArrayList<String>(8);
        brokenLinkMap.put(statusCode, brokenLinkList);
    }

    brokenLinkMap.get(statusCode).add(url.toExternalForm()); // <-- adding to the map!
}

// after all links have been processed, you can dump the map contents
for(final Integer key : brokenLinkMap.keys()) {
    System.out.printf("Broken link count for status %s: %s\n", key, brokenLinkMap.get(key).size());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:44:56.970

我猜你可以使用 java.util.Map，使用状态码作为键，值作为计数器。

# android - 如何重新启动 Android 活动？

> ID：16145056
> 
> 赞同：2
> 
> 时间：2013-04-22T10:38:36.227
> 
> 标签：android, application-restart, android-launcher

我正在 Android 中创建一个应用程序，但是当我想更新一些数据时，我想重新启动我的 MainActivity。但是当我尝试重新启动我的应用程序时，它会崩溃。

我使用以下代码重新启动我的活动

```
 case R.id.update:
        admin = false;
        Intent intent1 = getIntent();
         finish();
         startActivity(intent1);    
        break; 
```

我的日志是

```
04-22 12:28:10.444: E/AndroidRuntime(11867): FATAL EXCEPTION: main
04-22 12:28:10.444: E/AndroidRuntime(11867): java.lang.RuntimeException: Unable to start activity ComponentInfo{package_____________/package________.LauncherGridActivity}: java.lang.NullPointerException
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.os.Looper.loop(Looper.java:137)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at dalvik.system.NativeStart.main(Native Method)
04-22 12:28:10.444: E/AndroidRuntime(11867): Caused by: java.lang.NullPointerException
04-22 12:28:10.444: E/AndroidRuntime(11867):    at com.___________.ApplicationManager.loadFilteredNames(ApplicationManager.java:228)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at com______.ApplicationManager.loadApplications(ApplicationManager.java:65)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at co___.LauncherGridActivity.onCreate(LauncherGridActivity.java:142)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.Activity.performCreate(Activity.java:4465)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-22 12:28:10.444: E/AndroidRuntime(11867):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-22 12:28:10.444: E/AndroidRuntime(11867):    ... 11 m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:44:21.867

使用它可以重新启动活动。

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

但根据您的要求，您需要使用重新创建活动`this.recreate();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:27:30.153

像这样试试

```
Intent intent = new Intent(YourActivityName.this,YourActivityName.class);

startActivity(intent);

finish(); 
```

# ruby-on-rails-3 - 无法加载此类文件 -- aws-sdk 和未初始化的常量::AWS

> ID：16145057
> 
> 赞同：1
> 
> 时间：2013-04-22T10:38:43.967
> 
> 标签：ruby-on-rails-3, amazon-web-services, amazon-sns

我试图 `require 'aws-sdk'`在控制器中包含需要文件。我不知道这是否可能。

我在 config/aws.rb 文件中包含了秘密访问密钥和访问密钥 ID，如下所示

`AWS.config(:access_key_id => 'AKI3Q', :secret_access_key => 'gZqu5VE1i')`.also我想调用AWS内部控制器方法。

```
 def topcreate
    @sns=AWS::SNS.new
alpha = @sns.topics.create('CSC470Test-Alpha1') 
```

结尾

`uninitialized constant UserSessionsController::AWS`我在尝试 `@sns=AWS::SNS.new`在控制器方法内部调用时遇到此错误。

`'aws-sdk'`我已经在我的 gemfile 中添加了 gem 文件并运行`bundle install`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:01:16.430

将您`require 'aws-sdk'`的内容放在 aws.rb 的顶部。从控制器中移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:49:21.387

配置文件在错误的位置。`aws.rb`从移动`config`到`config/initializers`。

# jekyll - 从液体数组中获取下一个和上一个元素

> ID：16145061
> 
> 赞同：11
> 
> 时间：2013-04-22T10:38:56.323
> 
> 标签：jekyll, liquid

简洁版本：

我想将 1 添加到液体模板中的数字并将结果用作数组索引。

```
{% capture plus_one %}{{ 0 | plus: 1 }}{% endcapture %}
<div>-Value of plus_one: {{plus_one}}</div>
<div>-This works: {{site.posts[1].title}}</div>
<div>-This doesn't: {{site.posts[plus_one].title}}</div> 
```

结果：

```
-Value of plus_one: 1
-This works: The Zone
-This doesn't: 
```

* * *

长版：

我正在使用 Jekyll，没有插件。我想给当前帖子一个链接，指向下一个属于同一类别的帖子。（在此代码中，类别被硬编码为“期刊”。）

我的代码遍历类别数组中的所有帖子，查找当前帖子。找到后，我尝试在类别数组中抓取下一篇文章。

```
{% for num in (0..site.categories.journal.size) %}
    {% assign page2 = site.categories.journal[num] %}
        {% if page2.title == page.title and page2.date == page.date %}
            {% capture plus_one %}{{ num | plus: 1 }}{% endcapture %}
        {% endif %}
{% endfor %}

<div>value of plus_one: {{plus_one}}</div>
<div>This doesn't work: {{site.categories.journal[plus_one].title}}</div>
<div>This does: {{site.categories.journal[1].title}}</div> 
```

结果：

```
<div>value of plus_one: 1</div>
<div>This doesn't work: </div>
<div>This does: A Blog Post Title</div> 
```

我猜我的变量“plus_one”的值被视为字符串而不是数字。

有没有办法把它转换成数字？

还是有另一种方法来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-24T09:56:54.450

```
{% for category in site.categories %}
    {% assign catg_name = category.first %}
    {% if catg_name == page.category %}
        {% assign catg_posts = category.last %}
    {% endif %}
{% endfor %}
{% for post in catg_posts %}
    {% if post.title == page.title %}
        {% unless forloop.last %}
            {% assign next = catg_posts[forloop.index] %}
            <li class="previous">
            <a href="{{ site.baseurl }}{{ next.url }}">&larr;{{ next.title }}</a>
            </li>
        {% endunless %}
        {% unless forloop.first %}
            <li class="next">
            <a href="{{ site.baseurl }}{{ prev.url }}">{{ prev.title }}&rarr;</a>
            </li>
        {% endunless %}
    {% endif %}
    {% assign prev = post %}
{% endfor %} 
```

正如您所提到的，您可以保存并使用上一个帖子链接的上一个迭代值（在我的情况下，我将它用作下一个帖子链接，因为我不想要默认的最新优先顺序）。对于下一个数组元素，您可以使用`forloop.index`. 这是 for 循环的从 1 开始的索引，将为您提供从零开始的数组的下一项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-29T01:34:00.840

`assign`保留号码：

```
{% for item in items %}
    {% assign next_i = forloop.index0 | plus: 1 %}
    {% assign prev_i = forloop.index0 | minus: 1 %}
    {{ items[next_i] }}
    {{ items[prev_i] }}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T09:05:50.177

您可以通过`page.next`或`page.previous` [按照 jekyll wiki 中的说明](https://github.com/mojombo/jekyll/wiki/Template-Data#page)访问下一篇/上一篇文章。

当您希望它属于同一类别时，您必须将其分配给一个临时变量，迭代该步骤，直到找到匹配的帖子（同一类别的帖子）。

由于液体的工作方式，您不能使用您的 plus_one 变量 - 它只是一个字符串。在液体中使用数学是相当复杂的，当我在液体中实现我的加权标签云时，我几乎头疼。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-12T19:54:38.843

我不知道自接受答案以来 jekyll 是否发生了变化，但我必须进行一些更改才能使其正常工作。根据 jekyll 变量文档，没有 page.category，只有 page.categories 列表。在我的网站中，每个帖子我只使用一个类别，因此第一个类别对我有用。如果您在每个帖子中使用多个类别，则必须对此进行调整。我也遇到了问题，因为我的类别是大写的，所以我添加了小写字母。最后，在我的 config.yml 中，我使用的是 url 而不是 baseurl。希望这对其他人有所帮助，因为这是我发现按类别将上一个/下一个链接添加到所有帖子的最简单方法。

```
{% for category in site.categories %}
    {% assign catg_name = category.first %}
    {% if catg_name == page.categories.first | downcase %}
        {% assign catg_posts = category.last %}
    {% endif %}
{% endfor %}
{% for post in catg_posts %}
    {% if post.title == page.title %}
        {% unless forloop.last %}
            {% assign next = catg_posts[forloop.index] %}
            <a href="{{ site.url }}{{ next.url }}">&larr;{{ next.title }}</a> |
        {% endunless %}
        {% unless forloop.first %}
            | <a href="{{ site.url }}{{ prev.url }}">{{ prev.title }}&rarr;</a>
        {% endunless %}
    {% endif %}
    {% assign prev = post %}
{% endfor %} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-30T09:04:04.827

我遇到了类似的问题，使用上面的答案我在我的网站上得到了以下工作。可能对其他人有帮助。

```
{% for num in (0..site.categories.work.size) %}
    {% assign page2 = site.categories.work[num] %}
    {% if page2.title == page.title and page2.date == page.date %}
        {% assign next_i = forloop.index0 | plus: 1 %}
        {% assign prev_i = forloop.index0 | minus: 2 %}

        {% if next_i == site.categories.work.size %}
            {% assign next_i = 1 %}
        {% endif %}
    {% endif %}
{% endfor %}

<nav class="pagination">
    <div class="next">
        <a href="work/{{site.categories.work[next_i].slug}}/">Next</a>
    </div>
    <div class="previous">
        <a href="work/{{site.categories.work[prev_i].slug}}/">Previous</a>
    </div>
</nav> 
```

# java - 在 64 位 JRE 中使用 opengl32.DLL？

> ID：16145063
> 
> 赞同：0
> 
> 时间：2013-04-22T10:38:58.383
> 
> 标签：java, opengl, jna

我想知道这是因为据我所知，无论是 32 位还是 64 位，我至少在 Windows 上从未见过 64 位 opengl DLL 库存。所以我坚持使用我得到的东西，即 32 位 opengl DLL。那么有什么办法我仍然可以调用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:13:20.413

OpenGL32.dll 始终是 DLL 名称，即使对于 64 位 Windows 也是如此。它保留相同的名称，但如果您的应用程序构建为 64 位应用程序，它将是 64 位 DLL。所以它不是加载同一个DLL，只是一个同名的DLL。

# r - R中的近似字符串匹配

> ID：16145064
> 
> 赞同：1
> 
> 时间：2013-04-22T10:38:58.850
> 
> 标签：r, string-matching, levenshtein-distance

对于我的研究，我必须匹配两个包含基金信息的数据集。不幸的是，没有通用标识符。好消息是我在两个文件中都有一个文件编号的标识符，但它可以包含多个资金。如果文件中有多个基金（例如 20 个），我只能通过基金名称进行匹配，有时可能略有不同。请注意，在任何数据集中，每个文档的基金数量是相同的。经过一番搜索后，我尝试使用此功能（在这里找到：[agrep: only return best match(es)](https://stackoverflow.com/questions/5721883/agrep-only-return-best-matches)）：

```
ClosestMatch2 = function(string, stringVector){

  distance = levenshteinSim(string, stringVector);
  stringVector[distance == max(distance)]

} 
```

这对大多数基金来说都很好，但是我发现了两个问题：

1.  有时有多个匹配项
2.  有时我有错误的比赛

例如：此函数将“INSTITUTIONAL LARGE CORE FUND”匹配到“Transamerica Partners Institutional Core Bond”而不是“Transamerica Partners Institutional Large Core”。

我有两个想法来规避这些问题：

1.  我使用另一个匹配函数来验证上面的函数。即，如果两个函数产生相同的结果，我只接受匹配。
2.  我以某种方式调整了上面的功能。

我将衷心感谢您的帮助。最好的，劳伦兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:27:30.770

[RecordLinkage](http://cran.r-project.org/web/packages/RecordLinkage)包允许您使用多种方法匹配字符串（例如，levenshtein 以及其他度量），它允许您定义阈值，甚至使用分类模型来指示您何时可以匹配。

# javascript - 使用导航器对象/用户代理嗅探来检测 IE 版本的缺点

> ID：16145067
> 
> 赞同：3
> 
> 时间：2013-04-22T10:39:12.670
> 
> 标签：javascript, internet-explorer, cross-browser, browser-feature-detection

随着[jQuery 2.0 的发布，](http://blog.jquery.com/2013/04/18/jquery-2-0-released/)关于如何识别用户是否使用支持它的 IE 版本（jQuery 2.0 仅支持 IE9 及更高版本）的讨论很多。

我的问题是为什么这样的解决[方案](https://gist.github.com/padolsey/527683)：

```
var ie = (function(){

    var undef,
        v = 3,
        div = document.createElement('div'),
        all = div.getElementsByTagName('i');

    while (
        div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
        all[0]
    );

    return v > 4 ? v : undef;

}()); 
```

优于查看`navigator`对象：

```
function getInternetExplorerVersion()
// Returns the version of Internet Explorer or a -1
// (indicating the use of another browser).
{
  var rv = -1; // Return value assumes failure.
  if (navigator.appName == 'Microsoft Internet Explorer')
  {
    var ua = navigator.userAgent;
    var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
    if (re.exec(ua) != null)
      rv = parseFloat( RegExp.$1 );
  }
  return rv;
} 
```

[来源](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:56:41.107

功能检测（在这种情况下，检测对条件注释的支持）是可靠的，因为您知道给定浏览器的给定版本以某种方式实现了给定功能。即使更高版本删除了此功能（在这种情况下，IE10 中删除了条件注释），它不会改变以前版本的实现方式。对于之前未实现但后来在较新版本中引入的功能也是如此。

在使用标准时，特征检测通常也与供应商无关。您正在查看浏览器是否支持某个功能，无论它是哪种浏览器。这有助于促进浏览器之间的互操作性，同时避免不必要的歧视。

另一方面，在使用用户代理字符串时，您依赖于可以以各种方式操作的任意字符串的值，不仅可以由第三方或作者代码，甚至可以由用户代理本身。该字符串复杂且难以解析，并且尝试解析它的代码通常会以惊人的方式失败。这就是 UA 嗅探如此不可靠的原因。

[现代.IE](http://www.modern.ie/en-us/cross-browser-best-practices)更好地解释了缺点：

> **总是更喜欢特征检测而不是浏览器（navigator.userAgent）检测。**
> userAgent 字符串不能很好地指示是否存在特定功能（或错误）。使问题更加复杂的是，许多解释 userAgent 的代码都做错了。例如，一个浏览器嗅探库预计主要版本只有一位数，因此它将 Firefox 15 报告为 Firefox 1，将 IE 10 报告为 IE 1！[直接检测特征或问题](http://msdn.microsoft.com/en-us/magazine/hh475813.aspx)，并将其作为代码分支的决策标准更为可靠。我们推荐[Modernizr](http://modernizr.com)作为实现特征检测的最简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T11:01:13.100

如果你需要支持旧的 IE 版本，你可以坚持使用 jQuery 1.9。jQuery 继续支持 v1.x，专门针对需要支持旧 IE 版本的人。如果您对您的网站将不再在旧 IE 版本中运行感到高兴，请仅迁移到 jQuery v2。

或者，如果您确实想在较新的浏览器上使用 jQuery 2.0 但仍支持旧的 IE 版本，您可以简单地使用条件注释根据 IE 版本在 jQuery 1.9 和 2.0 之间切换。

以下是所有必需的：

```
<!--[if lt IE 9]><script src="jquery-1.9.1.js"></script><![endif]-->
<!--[if gte IE 9]><!--><script src="jquery-2.0.0b2.js"></script><!--<![endif]--> 
```

这直接取自[jQuery 站点上的注释](http://blog.jquery.com/2013/03/01/jquery-2-0-beta-2-released/)，将为旧 IE 提供 jQuery v1.9，为所有其他浏览器提供 2.0。

除此之外，jQuery 版本 1.9 和 2.0 都具有相同的 API，并且*应该*工作相同。您问题中的任何 IE 版本检测代码都不是必需的。所以直接回答你的问题“哪个更好？” 是“都不是”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:10:55.020

正如 Spudley 所说，坚持使用 jQuery 的一个版本可能是目前最好的选择。如果需要支持 IE8 及以下版本，请使用 v1.9.x。如果你很高兴只支持 IE9 及更高版本，v2.x 很好。

有条件地加载任一库都可能导致问题。测试更加困难，如果您发现 jQuery 的 API 有不一致的地方（例如，某些东西在 2.0 中有效，但在 1.9 中无效），修复起来会很尴尬。

通常，应始终避免浏览器嗅探。就个人而言，我也尽量避免使用条件注释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-24T21:16:14.817

如果您想支持两个版本的 jQuery，我相信 Spudley 的解决方案是最好的。但是，如果您不想为两个版本的 jQuery 编程，而只想将用户重定向到支持 IE 版本低于 9 的旧站点，则可以使用：

```
// This will always tell you if you are running IE, whether the user is faking
// a user agent or not, even in IE 10.
var isMSIE = /*@cc_on!@*/false;
if(isMSIE && parseInt(navigator.userAgent.toLowerCase().split("msie")[1],10) < 9) {
    // Your code to redirect the user to the old site.
    location.href = "old site url";
} 
```

或者

```
<!--[if lt IE 9]><script>location.href = "old site url"</script><![endif]--> 
```

IE 10 将忽略它，因为它不再支持条件注释，并且低于 9 的 IE 版本将重定向到您的旧站点。

正如 Spudley 所说，您可以只使用 jQuery 1.9.1。

# c - 移动窗口实现

> ID：16145072
> 
> 赞同：0
> 
> 时间：2013-04-22T10:39:28.177
> 
> 标签：c, image-processing, matrix, moving-average

所以，我必须实现一个恒定误报率（CFAR）的算法。它的工作原理是这样的： ![背景窗口](https://i.stack.imgur.com/wreF7.jpg)

我使用的概念是，如果目标窗口包含多个像素，则此运算符 (CFAR) 使用以下检测标准

![等式2](https://i.stack.imgur.com/2nj6P.jpg)

其中 μt 是目标窗口中像素的平均值。在这种情况下，在 PFA 计算中 t 应替换为 t√n（其中 n 是目标窗口中的像素数），其中 μb 是背景均值，σb 是背景标准差，t 是检测器设计通过以下等式从 PFA 计算的参数：

![等式3](https://i.stack.imgur.com/Yesb8.jpg)

现在，（方程已经够了！XD），我知道我必须在图像（这是一个二维矩阵）上实现一些循环。我知道我的图像的像素距离比（在两个方向上每个像素大约为 10.054m）。我可以将用户输入的距离转换为像素大小，假设背景窗口是 800m（大约 80 像素），保护窗口是 400m（大约 40 像素），而目标窗口是 20m（大约 2 像素）。我的问题是：

***如何循环图像？***

这个问题并不像看起来那么容易，至少对我来说不是。你看，我想不通，对于 mxn 像素，如何实现移动窗口。起初我以为目标大小是固定的，我可以硬编码我的像素坐标，但这不是重点。任何帮助表示赞赏:)

编辑：目标窗口在保护窗口内移动。完成后，保护窗口将移动到背景窗口内，上面将再次发生，最后背景窗口将在整个图像中移动！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:26:06.187

假设窗口从左到右再从上到下，伪代码可能如下：

考虑每个窗口的四个属性，即 , `bg_top`, `bg_left`, `bg_width`, `bg_hight`...`grd_top`等。

还考虑到内窗永远不会越过外窗，

将所有窗口左侧和顶部设置为图像的左侧和顶部，可能是（0,0）。

现在循环

```
while(bg_top+bg_hight <= image_top+image_hight)
{
    while(bg_laft+bg_width <= image_left+image_width)
    {
        while(grd_top+gdr_hight <= bg_top+bg_hight) 
        {   
            while(grd_left+gdr_width <= bg_left+bg_width)
            //some pixels may be left out if the inner and outer window sizes are not divisible, it will not change the window size to fit in the last case.
            {
                 while(target_top+target_hight <= grd_top+grd_hight)
                 {
                      while(target_left+target_width <= grd_left+grd_width)
                      // the condition will move till end but never goes outside nor changes the inner window size to fit
                      {
                          //DO THE PROCESSING
                          //target_left+=target_width; //if they do not overlap
                          target_left+=1; //if they overlap
                      }
                      target_top+=target_hight// don't overlap. use 1 for overlaping
                      // use 1 if it goes down 1 pixel
                 }
                 grd_left+=grd_width; //or 1
            }
            grd_top+=grd_hight; //or 1
         }
         bg_left+=bg_width; //or 1
     }
     bg_top+=bg_hight; //or 1
} 
```

# wordpress - 如何从视频中删除 JW Player 文本？

> ID：16145075
> 
> 赞同：1
> 
> 时间：2013-04-22T10:39:48.147
> 
> 标签：wordpress

我在我的 wordpress 网站中使用“JW Player 6 Plugin for Wordpress”插件。如何从视频中删除“JW Player”文本![在此处输入图像描述](https://i.stack.imgur.com/u2UAJ.jpg)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:50:48.100

JW Player 免费版仅适用于非商业网站，并且包含该水印。

也许您应该考虑购买其他免费的视频播放器，例如[MedieElements.js](http://mediaelementjs.com/)。

[您可以通过安装Hana Flv Player](http://wordpress.org/extend/plugins/hana-flv-player/)插件来获取 MedieElements.js 和其他一些播放器。

# wso2 - Siddhi 查询网络利用率

> ID：16145077
> 
> 赞同：0
> 
> 时间：2013-04-22T10:39:51.133
> 
> 标签：wso2, siddhi

我目前正在评估在 snmp 环境中使用的[siddhi](http://wso2.com/products/complex-event-processor/)。POC 是围绕网络接口利用率构建的。

流定义为：

```
define stream interfaceStatsEvents (nodeName string, sdate double, ifSpeed long, ifIndex string, ifAdminStatus string, ifOperStatus string,
ifInDiscards long, ifInErrors long, ifOutDiscards long, ifOutErrors long, ifInOctets long, ifOutOctets long) 
```

计算接口利用率的查询为：

```
from every (e1 = interfaceStatsEvents -> e2 = interfaceStatsEvents[nodeName == e1.nodeName and ifIndex == e1.ifIndex]) 
select e1.nodeName, e1.ifIndex, ((e2.ifInOctets - e1.ifInOctets) * 8 * 100) / (((e2.sdate - e1.sdate) / 1000) * e1.ifSpeed) as utilization 
insert into interfaceUtilization; 
```

问题是查询似乎只运行一次。*向interfaceStatsEvents*流添加了**4 个**事件 。期望为*interfaceUtilization*生成 3 个事件，而不是仅生成一个事件。

 **有没有人知道原因或如何修复查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:55:44.403

这里的问题是您将 every 用于整个模式，因此这将为每个 e1,e2 组合输出

```
from every (e1 = interfaceStatsEvents -> e2 = interfaceStatsEvents[nodeName == e1.nodeName and ifIndex == e1.ifIndex]) 
```

要获得预期的输出，即对于每个 e1 后跟 e2，您必须将查询更改为

```
from every e1 = interfaceStatsEvents -> e2 = interfaceStatsEvents[nodeName == e1.nodeName and ifIndex == e1.ifIndex] 
```

这里的 every 仅适用于 e1 而不适用于 e1-e2 组合。**

# tmux - 在 tmux 中，我可以将窗格大小调整为绝对值吗

> ID：16145078
> 
> 赞同：118
> 
> 时间：2013-04-22T10:39:59.073
> 
> 标签：tmux

是否可以告诉 tmux“将窗格大小调整为 5 行高”？

我知道我可以`resize-pane -U 3`移动分割线，但有时当使用不同尺寸的显示器登录时，尺寸会发生很多我无法用肉眼判断的线条。我希望能够有一个命令将一个窗口更改为完全正确的行数，而不是使用多个`resize-pane`命令。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-04-24T04:20:03.563

那么`Ctrl`-`B`然后（按`Ctrl`）+箭头呢？

如果 in `tmux < 1.8`，按`Ctrl`- `B`then ( `Esc`+ arrow) *执行此操作`n`，其中`n`是您要调整大小的次数。

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2014-11-09T01:19:00.393

在 tmux 1.8 中，窗格的大小可以交互调整。在默认键绑定下，这可以通过前缀键 (Cb) 后跟与箭头键 (M-箭头) 组合的元键来完成，其中箭头是上/下/左/右箭头键之一。

例如`Ctrl`-`b`后跟`Alt`-`Up`将向上调整大小。

请注意，在`Alt`多次按下上/下/左/右键的同时，可以按住该键进行多次调整。

例如`Ctrl`-`b`后跟`Alt`- `Up`-将向上调整大小两次，向左调整一次`Up`。`Left`

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2013-04-23T00:26:03.040

> 用法：resize-pane [-DLRUZ] [-x width] [-y height] [-t target-pane] [调整]

IE。

> 调整窗格大小 -t 1 **-y 5**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T11:11:30.457

在按下绑定键的同时不要松开手指并使用 nrrwors UDLR 来调整平移的大小。BindKey + R 调整到右侧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T14:28:48.670

在 Mac 上，它必须在 Tmux 1.8+ 上为`<Prefix>`+ 。`H/J/K/L`箭头键对我不起作用。

# tkinter - 使用 Tkinter 控制更改窗口

> ID：16145079
> 
> 赞同：0
> 
> 时间：2013-04-22T10:39:59.340
> 
> 标签：tkinter, controls, switching

我正在尝试构建一个小应用程序，让您在页面之间切换。这是我到目前为止得到的：

```
import tkinter 
from tkinter import ttk

def main():
    root=tkinter.Tk()
    root.title("Control")
    first_page = FirstWindow(root)
    root.mainloop()

def change_to_secondwindow():
    first_page.grid_forget()
    second_page = SecondWindow(root)

class FirstWindow(ttk.Frame):
    def __init__(self,root):
        ttk.Frame.__init__(self,root)
        self.grid()
        self.widgets1_create()

    def widgets1_create(self):
        self.b1 = ttk.Button(self, text="First Page", command=change_to_secondwindow)
        self.b1.grid()

class SecondWindow(ttk.Frame):
    def __init__(self,root):
        ttk.Frame.__init__(self,root)
        self.grid()
        self.widgets2_create()

    def widgets2_create(self):
        self.b2 = ttk.Button(self, text="Second Page")
        self.b2.grid()

main() 
```

现在，如果我单击“第一页”按钮更改为第二页，则会出现错误。它说全局名称 first_page 未定义。我的错误是什么？有没有更好的方法来控制使用 Tkinter 更改窗口？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:20:24.950

`first_page`是 的局部变量`main()`，但您尝试将其用作 中的全局变量`change_to_secondwindow()`。代替这个函数，一个常见的 Python 习惯用法是将此代码放在一个`if`块中，您可以在其中检查模块是否是主程序：

```
# remove the call to main()

if __name__ == '__main__':
    root=Tkinter.Tk()
    root.title("Control")
    first_page = FirstWindow(root)
    root.mainloop() 
```

# php - 格式化发布的结果 - Youtube API

> ID：16145084
> 
> 赞同：3
> 
> 时间：2013-04-22T10:40:11.140
> 
> 标签：php, html, xml, youtube-api

我正在尝试发布我的日期以显示它在 youtube 上的显示，即。“2 天前”或“4 小时前”。

当我拉出发布日期时，它只显示为“2012-01-11T20:49:59.00Z”

这是我当前的代码；

```
<?php
// set feed URL
$feedURL = 'https://gdata.youtube.com/feeds/api/users/RiotGamesInc/uploads?max-results=7';

// read feed into SimpleXML object
$sxml = simplexml_load_file($feedURL);
?>
<?php
// iterate over entries in feed
foreach ($sxml->entry as $entry) {

  // get nodes in media: namespace for media information
  $media = $entry->children('http://search.yahoo.com/mrss/');

  // get video player URL
  $attrs = $media->group->player->attributes();
  $watch = $attrs['url']; 

  // get video thumbnail
  $attrs = $media->group->thumbnail[1]->attributes();
  $thumbnail = $attrs['url']; 

  ?>
  <div class="youtubefeed">
    <a href="<?php echo $watch; ?>"><img src="<?php echo $thumbnail;?>" /></a></br>
    <?php echo $entry->published; ?>
  </div>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:52:17.727

正如之前在 stackoverflow 中多次询问的那样，您可以搜索**"php time ago"**。无论如何，请在[http://www.php.net/manual/en/function.time.php#89415](http://www.php.net/manual/en/function.time.php#89415)检查解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:58:55.423

你在寻找这样的东西吗？

```
<?php
function nicetime($date)
{
    if(empty($date)) {
        return "No date provided";
    }

    $periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
    $lengths         = array("60","60","24","7","4.35","12","10");

    $now             = time();
    $unix_date         = strtotime($date);

       // check validity of date
    if(empty($unix_date)) {   
        return "Bad date";
    }

    // is it future date or past date
    if($now > $unix_date) {   
        $difference     = $now - $unix_date;
        $tense         = "ago";

    } else {
        $difference     = $unix_date - $now;
        $tense         = "from now";
    }

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
        $difference /= $lengths[$j];
    }

    $difference = round($difference);

    if($difference != 1) {
        $periods[$j].= "s";
    }

    return "$difference $periods[$j] {$tense}";
}

$date = "2009-03-04 17:45";
$result = nicetime($date); // 2 days ago

?> 
```

# asp.net-mvc-3 - DataType.EmailAddress 和 DataType.PhoneNumber 的自定义显示模板

> ID：16145088
> 
> 赞同：1
> 
> 时间：2013-04-22T10:40:19.813
> 
> 标签：asp.net-mvc-3, razor

我想为数据类型 EmailAddress 和 PhoneNumber 创建自定义显示模板。

DisplayTemplates 使用模型类型解析。然而，这里无法解析 DataType。我可以将模型类型设置为字符串来为任何字符串创建自定义显示模板，但是传入的是字符串而不是对象的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:00:19.263

> 但是传入的是字符串而不是对象的属性。

是的，但您可以访问元数据：

```
ViewData.ModelMetadata.DataTypeName 
```

例如，您可以有以下字符串模板：

```
@using System.ComponentModel.DataAnnotations

@if (ViewData.ModelMetadata.DataTypeName == DataType.PhoneNumber.ToString())
{ 
    <div>This is a phone number template</div>
}
else
{
    @Html.TextBox(
        "", 
        ViewData.TemplateInfo.FormattedModelValue,
        new { @class = "text-box single-line" }
    )
} 
```

# java - 在 Java 中使用正则表达式在特定行上搜索

> ID：16145093
> 
> 赞同：5
> 
> 时间：2013-04-22T10:40:33.043
> 
> 标签：java, regex

我是正则表达式的新手，我的问题可能是非常基本的问题。

我想创建一个可以在特定行号上搜索表达式的正则表达式。

例如。我有数据

```
"\nerferf erferfre erferf 12545" + 
"\ndsf erf" + 
"\nsdsfd refrf refref" + 
"\nerferf erferfre erferf 12545" + 
"\ndsf erf" + 
"\nsdsfd refrf refref" + 
"\nerferf erferfre erferf 12545" + 
"\ndsf erf" + 
"\nsdsfd refrf refref" + 
"\nerferf erferfre erferf 12545" + 
```

我想在第 7 行搜索数字 1234。它也可能出现在其他线路上，也可能不出现。

我试过了

```
"\\n.*\\n.*\\n.*\\n.*\\n.*\\n.*\\d{4}" 
```

但我没有得到结果。

请帮我解决正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:57:01.883

首先，你的`newline`角色应该放在行尾。这样，描绘特定的线条会更容易。*以下解释基于此修改。*

现在，要到达第 7 行，您首先需要跳过前 6 行，这可以使用`{n,m}`量词来完成。你不需要写`.*\n`6次。所以，那将是这样的：

```
(.*\n){6} 
```

然后你在第 7 行，在那里你可以匹配你需要的数字。那部分将是这样的：

```
.*?1234 
```

然后匹配其余的文本，使用`.*`

因此，您的最终正则表达式如下所示：

```
(?s)(.*\n){6}.*?1234.* 
```

所以，只需使用[`String#matches(regex)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)这个正则表达式的方法。

PS`(?s)`用于启用单行匹配。由于 dot`(.)`默认情况下，不匹配换行符。

要打印匹配的内容，可以使用捕获组：

```
(?s)(?:.*\n){6}.*?(1234).* 
```

*如果在组 1*`1234`中匹配，这将捕获。尽管看起来不寻常，但您捕获要匹配的确切字符串 - 就像捕获在这里没有意义，因为您知道您正在匹配，而不是反对，在这种情况下，您可能会对这些数字到底是什么感兴趣。*`1234``1234``\\d`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:56:31.760

尝试

```
Pattern p = Pattern.compile("^(\\n.*){6}\\n.*\\d{4}" );
System.out.println(p.matcher(s).find()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:45:06.483

这个问题最好不要单独使用正则表达式来解决。首先将字符串拆分为换行符，以获取行数组：

```
String[] lines = data.split("\\n"); 
```

然后，在第 7 行执行正则表达式：

```
try {
    String line7 = lines[6];
    // do something with it
} catch (IndexOutOfBoundsException ex) {
    System.error.println("Line not found");
} 
```

希望这对你来说是一个开始。

编辑：我不是正则表达式的专家，但我会尝试这个：

```
"(\\n.*){5}(.*)" 
```

抱歉，如果这不是正确的 Java 语法，但这应该首先捕获 5 个新行 + 数据，这样就没有了 6 行，并且数据本身应该在第二个捕获组（包括换行符）中可用。如果要排除前面的换行符：

```
"(\\n.*){5}\\n(.*)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:02:50.177

您可以使用：

```
(^.*\r\n)(^.*\r\n)(^.*\r\n)(^.*\r\n)(^.*\r\n)(^.*\r\n)(^.*)(1234) 
```*

# c - 让 C18 抛出编译器错误

> ID：16145094
> 
> 赞同：0
> 
> 时间：2013-04-22T10:40:35.363
> 
> 标签：c, compiler-errors, pic, mplab, c18

有没有办法让 C18 编译器在编译期间抛出自己的自定义错误消息？

例如，考虑具有两个用户定义设置的情况：

```
#define SETTING_A 0x80
#define SETTING_B 0x3f 
```

假设这些设置不能*同时是* `0x00`. 当用户将两个设置都设置为 时，有没有办法让编译器抛出错误（或至少是警告）`0x00`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T10:43:00.890

考虑使用`#if`and `#error`：

```
#if (SETTING_A == 0) && (SETTING_B == 0)
#error SETTING_A and SETTING_B can't both be 0!
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:42:41.193

我不知道 C18 支持或不支持什么，但您应该尝试该`#error`指令。

# ios - iOS 6 - 如何从不在用户设备上的 Twitter 帐户发布推文

> ID：16145099
> 
> 赞同：2
> 
> 时间：2013-04-22T10:40:56.023
> 
> 标签：ios, objective-c, twitter, twitter-oauth

我正处于构建另一个 iOS 应用程序的早期计划阶段。当用户从 iOS 6 应用程序中执行特定操作时，我希望能够将推文发布到我自己的帐户。也就是说，我想以未存储在用户设备上的用户身份向 twitter 进行身份验证。是否可以使用社交和帐户框架来完成此任务，还是我应该研究另一个框架？如果有人能指出我正确的方向，我将不胜感激。

干杯，一个

# templates - 将一个字段转换为 solr 数据导入处理程序的多个值

> ID：16145100
> 
> 赞同：0
> 
> 时间：2013-04-22T10:40:57.390
> 
> 标签：templates, solr, dih

我想通过 DIH 从 mysql 表中建立索引。一列是称为“标签”的整数类型，在 mysql 中用作按位处理查询。

```
 select * from mytable where (tags & 1) > 0 
```

因此，我打算将“标签”转换为数据导入处理程序中的多个值，以便我可以使用 BooleanQuery 以获得更好的性能。

一种解决方案可能会创建自定义的 DIH 模板，您能给我一些建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:42:07.407

不确定我是否有您的用例，但是您可以使用标签字段并使用[ScriptTransformer](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)将其转换为多值字段

例子 -

数据配置 - 添加自定义字段 -

```
<script><![CDATA[
        function addfield(row){
            var fieldName = row.get('tags');
            // Remove tags and Split/Convert tags as Array for Multivalued field
            row.put(fieldName, tagsarray);
            return row;
        }
]]></script> 
```

# codeigniter - 登录 cibonfire 后如何重定向到上一页？

> ID：16145102
> 
> 赞同：1
> 
> 时间：2013-04-22T10:41:00.007
> 
> 标签：codeigniter

登录 cibonfire 后如何重定向到上一页？

如果某些模块需要登录才能查看，则那里的代码将检查登录，如果未登录，它将重定向到登录页面。登录后我们想回到同一个模块。我们怎么能这样做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:10:10.103

在您检查之前，一个用户已经登录，添加

```
 $this->session->set_userdata('page_url',  current_url()); 
```

添加登录功能，检查登录数据后。

```
if($this->session->userdata('page_url'))
       redirect($this->session->userdata('page_url'));
else
      redirect('default home page'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:57:40.280

我使用会话进行登录和类似的导航任务，因为它只是让生活变得更简单。在我的控制器函数中，我放入如下代码行：

```
$this->load_segs(func_get_args(), strtolower(__CLASS__).'/'.__FUNCTION__); 
```

这是负载分段功能：

```
function load_segs($params, $src){
    if ( ! is_array($params) || ! isset($src)){
        return FALSE;
    }
    foreach ($params as $key => $value){
        //only include values that don't need encoding
        if ($value != urlencode($value)){
            break;
        }
        $src .= '/'.htmlentities($value, ENT_QUOTES, 'UTF-8');
    }
    $this->session->set_userdata('return', $src);
    return $src;
} 
```

您可以按如下方式检索信息：

```
$return = html_entity_decode($this->session->userdata('return'));
redirect($return); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:46:48.777

在控制器功能的末尾添加此行

```
redirect('your_view_here', $any_variables_here); 
```

# android - android中的在线视频播放问题

> ID：16145104
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:41:04.280
> 
> 标签：android

我正在播放在线视频。该视频在我的 android 4.0 设备上成功播放，但无法在 android 2.2 和 2.3 设备上播放。视频文件以 mp4 格式放置在我的 PHP 服务器上。代码是：

```
Intent tostart = new Intent(Intent.ACTION_VIEW);
tostart.setDataAndType(Uri.parse("A video URL with mp4 format"), "video/*");
startActivity(tostart); 
```

如果我将此视频复制到设备的 SDCard 上，则可以正确播放相同的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:55:45.257

问题是由于视频文件名中的空格所以我已经从 mp4 文件名中删除了所有空格然后现在它也在 android 2.2 和 2.3 上播放

# android - ActionBarSherlock - 自定义底栏中的子菜单/弹出菜单

> ID：16145110
> 
> 赞同：1
> 
> 时间：2013-04-22T10:41:31.867
> 
> 标签：android, popup, android-actionbar, actionbarsherlock, submenu

我`IcsLinearLayout`在底部的视图中使用了一个按钮，其中包含如下按钮（我只是将它们设置为操作按钮）

```
<ImageButton
        android:id="@+id/btSelectAll"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_margin="4dip"
        android:layout_weight="1"
        android:background="@drawable/abs__item_background_holo_dark"
        android:gravity="center"
        android:onClick="onClick"
        android:scaleType="fitCenter"
        android:src="@drawable/holo_dark_content_select_all" /> 
```

我现在想添加一个子菜单按钮，它的外观和工作方式类似于操作栏中的子菜单按钮......

我怎么能做到这一点？

# php - WanWizard datamapper orm中关系的组合结果？

> ID：16145112
> 
> 赞同：1
> 
> 时间：2013-04-22T10:41:33.163
> 
> 标签：php, mysql, database, codeigniter, codeigniter-datamapper

我的关系是这样设置的：

一个用户有多个角色
一个角色有多个模块 因此，一个用户拥有其角色拥有的所有模块

基本上我想要做的是让用户取回用户拥有的所有模块。

如何使用数据映射器 ORM 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:17:49.357

请参阅有关深度关系的文章：http: [//datamapper.wanwizard.eu/pages/getadvanced.html#Deep.Relationship.Queries](http://datamapper.wanwizard.eu/pages/getadvanced.html#Deep.Relationship.Queries)

你会做一些类似的事情

```
$modules = new Module();
$modules->where_related('role/user', 'id', $userid)->get(); 
```

# python - Python 请求 - 从文件中 POST 数据

> ID：16145116
> 
> 赞同：21
> 
> 时间：2013-04-22T10:41:55.340
> 
> 标签：python, file, python-requests

我使用 curl 发送带有文件数据的 POST 请求。

我正在尝试使用 python requests 模块来实现相同的目的。这是我的python脚本

```
import requests
payload=open('data','rb').read()
r = requests.post('https://IP_ADDRESS/rest/rest/2', auth=('userid', 'password'), data=payload , verify=False)
print r.text 
```

数据文件如下所示

```
'ID' : 'ISM03' 
```

但是我的脚本没有从文件中发布数据。我在这里错过了什么吗。

在 Curl 中，我曾经有一个如下命令

```
Curl --data @filename -ik -X POST 'https://IP_ADDRESS/rest/rest/2' 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-22T10:48:07.727

此处无需使用`.read()`，直接流式传输对象即可。您确实需要明确设置 Content-Type 标头；`curl`使用时这样做`--data`但`requests`不这样做：

```
with open('data','rb') as payload:
    headers = {'content-type': 'application/x-www-form-urlencoded'}
    r = requests.post('https://IP_ADDRESS/rest/rest/2', auth=('userid', 'password'),
                      data=payload, verify=False, headers=headers) 
```

我将打开的文件对象用作上下文管理器，这样当块退出时（例如发生异常或`requests.post()`成功返回），它也会为您自动关闭。

# prolog - 关于在 Prolog 中打印列表列表的程序的声明性含义的一些疑问

> ID：16145119
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:42:07.510
> 
> 标签：prolog

> 编写一个规则，获取一个列表，其元素本身就是列表，并在每一行打印内部列表的元素：
> 
> 例子：
> 
> **?- printList[[1,a],[2,b]])。**
> 
> **1个**
> 
> **2 乙**

解决方案如下：

```
/* BASE CASE: The list is empty, so there is nothing to print */
printList([]).

printList([P|R]):- printList(P),
                   !,
                   nl,
                   printList(R).

printList([X|R]):- write(X),
                   !,
                   printList(R). 
```

当列表为空时，我有达到基本情况的 printList 规则，在这种情况下没有可打印的内容。

如果我不在基本情况下（列表不为空），它会调用第二条规则**printList([P|R])**，现在我有第一个疑问：

元素 P 是一个列表，因为 Prolog 自动将内部列表作为元素处理？

所以，如果我有类似的东西：

**[[1,a],[2,b],[3,c],[4,d]]**我让 Prolog 以这种方式自动匹配：

**P = [1,a]**（第一个列表作为头元素）

**R = [[2,b],[3,c],[4,d]]**（其他3个列表是尾列表的元素）

然后程序调用**printList**然后程序在头元素（第一个列表）上

这个解释对吗？

现在我对这个程序的trace有一些疑问，例如如果我执行这个语句，我会得到以下trace：

```
[trace]  ?- printList([[1,a], [2,b]]).
   Call: (6) printList([[1, a], [2, b]]) ? creep
   Call: (7) printList([1, a]) ? creep
   Call: (8) printList(1) ? creep
   Fail: (8) printList(1) ? creep
   Redo: (7) printList([1, a]) ? creep
   Call: (8) write(1) ? creep
1
   Exit: (8) write(1) ? creep
   Call: (8) printList([a]) ? creep
   Call: (9) printList(a) ? creep
   Fail: (9) printList(a) ? creep
   Redo: (8) printList([a]) ? creep
   Call: (9) write(a) ? creep
a
   Exit: (9) write(a) ? creep
   Call: (9) printList([]) ? creep
   Exit: (9) printList([]) ? creep
   Exit: (8) printList([a]) ? creep
   Exit: (7) printList([1, a]) ? creep
   Call: (7) nl ? creep

   Exit: (7) nl ? creep
   Call: (7) printList([[2, b]]) ? creep
   Call: (8) printList([2, b]) ? creep
   Call: (9) printList(2) ? creep
   Fail: (9) printList(2) ? creep
   Redo: (8) printList([2, b]) ? creep
   Call: (9) write(2) ? creep
2
   Exit: (9) write(2) ? creep
   Call: (9) printList([b]) ? creep
   Call: (10) printList(b) ? creep
   Fail: (10) printList(b) ? creep
   Redo: (9) printList([b]) ? creep
   Call: (10) write(b) ? creep
b
   Exit: (10) write(b) ? creep
   Call: (10) printList([]) ? creep
   Exit: (10) printList([]) ? creep
   Exit: (9) printList([b]) ? creep
   Exit: (8) printList([2, b]) ? creep
   Call: (8) nl ? creep

   Exit: (8) nl ? creep
   Call: (8) printList([]) ? creep
   Exit: (8) printList([]) ? creep
   Exit: (7) printList([[2, b]]) ? creep
   Exit: (6) printList([[1, a], [2, b]]) ? creep
true. 
```

这对我来说很清楚（我认为我之前的推理是正确的）但是我不明白为什么每当它到达内部列表中的一个元素时，它就会调用它的**printList**关系（这是一个简单的元素而不是一个列表），例如这里：

```
 Call: (8) printList(1) ? creep
   Fail: (8) printList(1) ? creep 
```

程序已经考虑了原始列表的第一个列表，然后，必须打印它的第一个元素，为什么要在这个**简单元素上调用****printList**关系

 **是因为这个简单的元素又可能是内部列表吗？

就像是：

**[[[1.1,a1,a2],[1.2,b1,b2]], [2,b]]**（其中我有一个包含 2 个列表的列表，第一个元素是包含 2 个列表的列表。所以程序检查元素是元素还是内部列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:08:27.693

我觉得你想多了。看代码：

```
printList([P|R]):- printList(P), 
```

在那里你可以看到它`printList/1`正在与列表的头部统一。匹配列表和唯一列表的所有规则`printList/1`是您人类可以立即看到的事实。但是 Prolog 并没有“注意到”这个事实，所以如果你要打电话说，

```
printList([1]) 
```

第一个匹配规则就是上面那个，所以它会立即尝试统一`printList(1)`。这自然会失败，因为 1 不是列表，因此不匹配`printList/1`. Prolog 然后回溯并尝试下一条规则，它是这样开始的：

```
printList([X|R]):- write(X), 
```

这显然会将 [1] 与 X = 1, R = [] 统一起来，因此它显然会编写第一个元素，即 one，然后照常进行。这里没有涉及“内部列表”的魔法，据我所知，这在 Prolog 中根本不是一个概念（如果在编译器中处理这样的事情，它对 Prolog 的用户来说是隐藏的）。

Prolog 不是通灵的。它必须尝试规则以查看它们是否失败，即使该尝试本质上是 Horn 子句头部中的模式匹配失败。

我无法区分您的第一个问题和第二个问题，所以我希望这两个问题都能回答。:)**

# android - 具有自定义列布局嵌套 LinearLayouts 的 Listview

> ID：16145121
> 
> 赞同：1
> 
> 时间：2013-04-22T10:42:22.463
> 
> 标签：android, android-layout, android-listview, android-linearlayout

我正在尝试制作具有以下布局的餐厅菜单。item 字段和 description 字段在 item 的右侧 price 金额。我已经尝试了所有方法，从对每一行使用列表视图以及将项目和描述设置为 2 个项目布局的列表视图，但我在保持其他列表视图同步时遇到了问题。

现在我尝试将列表视图布局作为我的主要布局，并添加一个水平线性布局，其中添加了相同权重的文本视图。至于应该有 2 个项目的第一列，我使用了一个垂直线性布局并将文本视图添加到它

我想要的是将垂直线性布局权重设置为 3 并将其余项目设置为 1 。在垂直线性布局中，我想设置文本视图以填充但不超过其他其他列的宽度以及扭曲内容的高度，因为我正在从数据库中加载项目的描述，这是相当多的行。

到目前为止我尝试的是以下这只是添加到列表布局的行布局。下图显示了列表的问题。

![在此处输入图像描述](https://i.stack.imgur.com/m4IaV.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left|center"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/text1_"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/text2_"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="TextView" />
    </LinearLayout>

     <TextView android:id="@+id/FROM_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content" 
         android:layout_weight="1"/>

     <TextView android:id="@+id/TO_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content"  
         android:layout_weight="1"/>

     <TextView
         android:id="@+id/TRAIN_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:50:11.230

使用此布局

```
 <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/text1_"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/text2_"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </LinearLayout>

     <TextView android:id="@+id/FROM_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content" 
         android:layout_weight="1"
          />

     <TextView android:id="@+id/TO_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content"  
         android:layout_weight="1"
        />

     <TextView
         android:id="@+id/TRAIN_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:layout_weight="1" 
         />

</LinearLayout> 
```

# ios - IOS：iAD广告

> ID：16145122
> 
> 赞同：2
> 
> 时间：2013-04-22T10:42:25.580
> 
> 标签：ios, iad, ads

在我的应用程序中，我使用 iAd 框架插入广告，它工作正常。但现在我想知道如何在这些横幅中设置广告。是否有一些服务我应该注册我的应用程序？还是全是自动的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:56:45.837

您需要在 iTunes Connect 中同意 iAd Network 合同并填写税表和您的帐户信息，还需要通过 iTunes Connect 启用 iAd。

> **如何加入 iAd 网络？**
> 
> 您必须注册 iOS 开发者计划才能加入 iAd 网络。会员需要在 iTunes Connect 中执行以下操作：
> 
> ```
> - Agree to the iAd Network Contract.
> - Complete the required tax forms and, if you have not already done so, set up your banking information.
> - Enable your app for iAd rich media ads in the Manage Your Applications module. 
> ```

参考：[iAd](https://developer.apple.com/support/ios/iad-network.html)与[iAd 整合](http://blog.blackwhale.at/?p=708)

# google-maps-sdk-ios - 使用未声明的标识符“GMSMarker”

> ID：16145124
> 
> 赞同：0
> 
> 时间：2013-04-22T10:42:27.613
> 
> 标签：google-maps-sdk-ios

我将#import 添加到我的.h

为什么这个 XCODE 不能识别 'GMSMarker' 但能识别 GSMMarkerOptions？

这不起作用（来自文档）：

```
 CLLocationCoordinate2D position = CLLocationCoordinate2DMake(0, 0);
        GMSMarker *marker = [GMSMarker markerWithPosition:position];
        marker.title = @"Hello World";
        marker.map = mapView_; 
```

这工作正常：

```
 GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
        options.title = @"gsmmarkeroptions does exist"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:44:04.047

听起来您拥有 1.1.2 版的 SDK，但您需要获取最新的 1.2 版。

在 1.2`GMSMarkerOptions`中被删除了，现在你`GMSMarker`直接使用了。

# cocoa-touch - 防止弱分配的变量在不创建保留循环的情况下被释放

> ID：16145126
> 
> 赞同：0
> 
> 时间：2013-04-22T10:42:34.173
> 
> 标签：cocoa-touch, cocoa, automatic-ref-counting, objective-c-blocks, nsnotificationcenter

我有一个涉及 ARC、NSNotificationCenter 和一个块的奇怪案例。以下是代码的简化示例。从测试来看，内存管理似乎 `didSaveObserver`是按预期执行的，即它没有创建保留周期并且之前没有被`nil`编辑过`removeObserver:`。

但是，我对 ARC 的理解让我认为这只是一个侥幸/怪癖，而 ARC`nil` `didSaveObserver`之前可能会`removeObserver:`。看到 as`didSaveObserver`永远不会保留（唯一的分配是对`weak`变量），那么 ARC 可以/（应该？）立即解除分配它。

我是否正确理解了 ARC 规则？如果是这样，那么我如何确保`didSaveObserver`保留它以便它可以不被观察但不会创建保留周期？

```
self.willSaveObserver = [[NSNotificationCenter defaultCenter] addObserverForName:NSManagedObjectContextWillSaveNotification object:nil queue:nil usingBlock:^(NSNotification *note) {

    id preSaveState = ...; //Store some interesting state about a Core Data object (the details aren't significant to this question).

    __weak __block id didSaveObserver = [[NSNotificationCenter defaultCenter] addObserverForName:NSManagedObjectContextDidSaveNotification object:nil queue:nil usingBlock:^(NSNotification *note) {
    //Unobserve the did save block. This is the tricky bit! didSaveObserver must be __weak to avoid a retain cycle, but doing so also means that the block may be dealloced before it can be unobsered.
    [[NSNotificationCenter defaultCenter] removeObserver:didSaveObserver];        

        id postSaveState = ...;
        //Perform work that uses pre & post save states.
    }];
}]; 
```

**更多细节：**

如果`__weak`未添加（因此默认为`__strong`） Instruments 报告存在保留周期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:29:40.963

首先，您为什么认为它会创建一个保留循环？该块将保留`didSaveObserver`，是的。会`didSaveObserver`保留块吗？除了可用于`removeObserver:`删除添加的观察之外，没有任何关于返回的观察者对象的记录。它可能以某种方式保留了块或者是块本身，在这种情况下，它会创建一个保留循环。如果你想安全，是的，你可以`weak`用来指代块中的观察者。

> 看到 didSaveObserver 永远不会保留（唯一的分配是弱变量），那么 ARC 可以/（应该？）立即释放它。

除非它在返回给您之前被通知中心保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:21:52.870

NSNotification.h 中有一条注释解释了为什么`didSaveObserver`在这种特殊情况下没有释放：

```
// The return value is retained by the system, and should be held onto by the caller in
// order to remove the observer with removeObserver: later, to stop observation. 
```

当然，这仅解释了这种特定情况。

# ipad - ipad视图动画的未定义延迟问题

> ID：16145133
> 
> 赞同：0
> 
> 时间：2013-04-22T10:42:50.827
> 
> 标签：ipad, ios6, delay, catransition, catransaction

我对以下代码有疑问。当我执行它时，首先有一个**未定义的延迟**`[CATransaction commit]`，并且`CompletionBlock:`. 不知道那里发生了什么。这只发生在应用程序在设备上运行时。

这是时间日志，

```
2013-04-22 15:59:50.893 MyApp[27038:907] ***** A   
2013-04-22 **15:59:50.894** MyApp[27038:907] ***** B  
2013-04-22 **15:59:53.161** MyApp[27038:907] ***** C  
2013-04-22 15:59:53.162 MyApp[27038:907] ***** D  
2013-04-22 15:59:53.164 MyApp[27038:907] ***** E  
2013-04-22 15:59:53.967 MyApp[27038:907] ***** F 
```

-

```
NSLog(@"***** A");

[CATransaction begin];

[CATransaction setCompletionBlock:^{

    [CATransaction begin];

    NSLog(@"***** D");

    for (UIView *view in [masterTableView subviews])
    {
        if (view.tag == 501)
        {
            [view removeFromSuperview];
            break;
        }
    }

    [self.view sendSubviewToBack:masterTableView];
    [self.view bringSubviewToFront:detailView];

    CATransition *animation = [CATransition animation];
    [animation setType:kCATransitionPush];
    [animation setDuration:.8];
    [animation setSubtype:transitionFromRight?kCATransitionFromRight:kCATransitionFromLeft];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

    [CATransaction setCompletionBlock:^{

        NSLog(@"***** F");

        for (UIView *view in [detailView subviews])
        {
            if (view.tag == 502)
            {
                [view removeFromSuperview];
                break;
            }
        }

        [self addDetailView];

        [self.view sendSubviewToBack:detailView];
        [self.view bringSubviewToFront:masterTableView];

        CATransition *animation = [CATransition animation];
        [animation setType:kCATransitionPush];
        [animation setDuration:.8];
        [animation setSubtype:transitionFromRight?kCATransitionFromRight:kCATransitionFromLeft];
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

        [[detailView layer] addAnimation:animation forKey:@"transition"];
    }];

    [[masterTableView layer] addAnimation:animation forKey:@"transition"];

    NSLog(@"***** E");
}];

[CATransaction begin];

[CATransaction setCompletionBlock:^{

    NSLog(@"***** C");

    for (UIView *view in [self.view subviews])
    {
        if (view.tag == 500)
        {
            [view removeFromSuperview];
            break;
        }
    }

    CATransition *animation = [CATransition animation];
    [animation setType:kCATransitionPush];
    [animation setDuration:0];
    [animation setSubtype:transitionFromRight?kCATransitionFromRight:kCATransitionFromLeft];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [[dummyView layer] addAnimation:animation forKey:@"transition"];
}];

[CATransaction commit];

[CATransaction commit];

NSLog(@"***** B"); 
```

我是不是搞错了什么？？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:15:57.823

当我意识到 CATransaction 创建了我动画视图的快照时。因此，该任务需要一些时间，因此会出现一些延迟。

因此，作为一个解决方案，我现在使用视图的快照图像为 UIImageView 设置动画。所以现在未定义的问题得到了解决。

# c++ - 如何在c ++中检测tcp客户端连接到服务器

> ID：16145135
> 
> 赞同：0
> 
> 时间：2013-04-22T10:42:56.147
> 
> 标签：c++, linux, networking, tcp, tcpclient

我有一个 tcp 客户端/服务器，我想检测客户端的连接丢失；因为我的客户端有多个接口，并且一次我使用其中一个接口连接到服务器，所以我想知道如何检测客户端的连接丢失，以便我可以将我的 tcp 客户端与另一个接口连接到服务器，如果所有这些接口失败了，我将数据存储在文本文件中。我用谷歌搜索了它，我已经看到保持活力，但这不是我想要的。

如果我的项目在 linux 中并且代码在 c++ 中很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:15:03.467

TCP 连接被设计为纠错而不是时间关键。此错误更正包括网络超时。

在套接字真正关闭之前，读写不会失败，这可能不会持续很长时间。

客户端确定连接是否超时的唯一方法是让客户端检测到它在指定时间内没有收到任何消息，然后手动关闭套接字。

这就是 Keep Alive 消息的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:45:54.287

我发现最好的方法是检查缓冲区，如果缓冲区为空，则表示您的 TCP 客户端成功将数据包发送到 TCP 服务器，您可以发送下一个数据包；用于检查您可以使用的缓冲区`SIOCOUTQ`；它非常易于使用，并向您显示缓冲区中有多少数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:45:52.480

尝试从套接字读取。当套接字关闭时，读取将失败，为您提供简单的检测。您可以在专用检测线程中执行此操作，这样您的主线程就不会阻塞。

# c# - 同一个 Azure webrole 中有两个 webproject？

> ID：16145136
> 
> 赞同：4
> 
> 时间：2013-04-22T10:42:59.973
> 
> 标签：c#, azure, web

我正在尝试以同一个 Web 角色运行多个网站。怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T10:46:06.957

创建包含多个网站的 Web 角色非常简单。本质上，您需要将多个元素添加到您的 Web 角色的 ServiceDefinition.csdef 文件中。每个元素都将包含一个physicalDirectory 元素，该元素引用要包含的网站的位置。

```
<Sites>
  <Site name="WebRole1" physicalDirectory="..\..\..\WebRole1">
<Bindings>
<Binding name="Endpoint1" endpointName="Endpoint1" />
</Bindings>
</Site>
<Site name="WebApplication1" physicalDirectory="..\..\..\WebApplication1\">
<Bindings>
<Binding name="Endpoint1" endpointName="Endpoint2" />
</Bindings>
</Site>
<Site name="WebApplication2" physicalDirectory="..\..\..\WebApplication2\">
<Bindings>
<Binding name="Endpoint1" endpointName="Endpoint3" />
</Bindings>
  </Site>
</Sites> 
```

**参考：**

[http://michaelcollier.wordpress.com/2013/01/14/multiple-sites-in-a-web-role/](http://michaelcollier.wordpress.com/2013/01/14/multiple-sites-in-a-web-role/)

和

[http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)

**逐步接近链接：**

[http://blog.elastacloud.com/2011/01/11/azure-running-multiple-web-sites-in-a-single-webrole/](http://blog.elastacloud.com/2011/01/11/azure-running-multiple-web-sites-in-a-single-webrole/)

希望它有帮助。

# scala - 在 slick 中使用 groupBy 时出现奇怪的异常

> ID：16145138
> 
> 赞同：0
> 
> 时间：2013-04-22T10:43:05.360
> 
> 标签：scala, slick

我有一个包含几列的表，其中两个是： vendingMachineId （重复），每个都有一个时间戳。

我想获取每个 vendingMachineId 的最新时间戳，所以我这样做了：

```
def getLastReading(assetIds: List[Int])(implicit db: Session): Map[Int, String] = {
    val vmrps = (((for {
      vmrp <- VendingMachineReadingProducts if (vmrp.vendingMachineId inSet assetIds)
    } yield (vmrp.vendingMachineId, vmrp.timestamp)).sortBy(_._2.desc)).groupBy(x => (x._1, x._2))).map {
      case (all, q) => all._1 -> all._2
    }.list

    vmrps map {
      case (assetId, timestamp) => {
        assetId -> (new SimpleDateFormat(DateTimeUtils.defaultDateTimeFormat)).format(timestamp)
      }
    } toMap
  } 
```

问题是我收到一个奇怪的异常：

```
scala.slick.SlickException: Unexpected node Ref @20339870 -- SQL prefix: select 
    at scala.slick.driver.BasicStatementBuilderComponent$QueryBuilder.toComprehension(BasicStatementBuilderComponent.scala:75) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.driver.BasicStatementBuilderComponent$QueryBuilder.expr(BasicStatementBuilderComponent.scala:285) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.driver.PostgresDriver$QueryBuilder.expr(PostgresDriver.scala:55) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.driver.BasicStatementBuilderComponent$QueryBuilder.buildSelectPart(BasicStatementBuilderComponent.scala:155) ~[slick_2.10-1.0.0.jar:1.0.0] 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:51:52.093

不确定这是否是同一件事，但请参阅[这个](https://github.com/slick/slick/issues/110)巧妙的问题。上游已经修复了，但是1.0.0版本还是有问题。

# php - 如何引用这个变量？

> ID：16145140
> 
> 赞同：0
> 
> 时间：2013-04-22T10:43:06.657
> 
> 标签：php, mysql, arrays, codeigniter

以下将从 mysql 行中获取结果（数组中有大约 25 个数据条目）

```
$data['records'] = $this->testingsearch->getMessages($id); 
```

如果我在通过后在 View 中调用它`$data`，我会这样称呼它（这很好用）：

```
foreach ($records as $row) {
$row->ModelName;
} 
```

如果我想在控制器中引用同一个变量，我该怎么做？

我尝试了以下方法： `$data['records']->ModelName`和`$data['records']['ModelName']`. 两者都没有真正拉动价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:52:21.427

尝试

```
echo $data['records'][0]->ModelName; 
```

# vb.net - VB.NET 确定尚未为哪个属性赋值

> ID：16145141
> 
> 赞同：-2
> 
> 时间：2013-04-22T10:43:09.140
> 
> 标签：vb.net

我正在 VB.NET 中做一个 Visual Studio 2010 项目，以根据 ASCII 文件中的给定字段将 ASCII 文件导入数据库。有时，在导入时，ASCII 文件中可能会缺少一些可选字段。

我怎样才能找出一个大类的哪个属性还没有被赋值？基于此，我想在运行时显示一个表单来请求丢失的属性！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:51:21.097

如果有更快的方法，请有人纠正我，

```
Dim myClassInstance As new MyClass();

If myClassInstance.SomeProperties is Nothing Then 
    'I'm null
End If 
```

对所有需要检查的属性执行此操作。

# ruby-on-rails - 删除捆绑器标志

> ID：16145144
> 
> 赞同：1
> 
> 时间：2013-04-22T10:43:15.843
> 
> 标签：ruby-on-rails

如何删除应用于捆绑程序的标志？这是我运行捆绑安装时发生的情况：

```
bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment 
```

我正在寻找一个可以帮助我跑步的答案：

```
bundle install 
```

没有所有其他标志。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:52:27.117

当您`bundle`使用标志运行时，会创建一个文件，`.bundle/config`其中包含带有标志的键/值对的 YAML 数据。

从您的项目根目录（其中包含该`.bundle/`目录，运行以下命令以清除文件夹和其中包含的`config`文件。

```
rm -r .bundle 
```

**[您可以在 docs 中](http://gembundler.com/v1.3/man/bundle-config.1.html)**了解有关配置文件的更多信息。

# asp.net - 如何设置 Setting Expires 和 Cache-Control: max-age headers for images only in ASP.NET？

> ID：16145145
> 
> 赞同：0
> 
> 时间：2013-04-22T10:43:20.110
> 
> 标签：asp.net, caching, browser-cache

我有一个网站，其中包含静态文件，如 Jquery 库、图像和其他 JS 文件。

因此，我希望专门为这些资源设置到期时间，以便可以轻松地从用户缓存中检索这些资源，而无需缓存其他静态资源

任何人都可以建议一种在asp.net 3.5中做到这一点的方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:47:21.030

您应该在文件夹中分离此静态文件并直接在 IIS 上进行配置

这是 IIS6 的示例：

[http://www.websiteoptimization.com/secrets/advanced/9-7-content-expiration-IIS.html](http://www.websiteoptimization.com/secrets/advanced/9-7-content-expiration-IIS.html)

或者通过代码你可以实现一个 IHttpModule

```
public class CacheExpiresModule : IHttpModule
{
    public void Dispose() { }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(context_BeginRequest);
    }

    void context_BeginRequest(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        string url = context.Request.Url.ToString();

        if (url.Contains("/Static/"))
        {
            context.Response.Cache.SetExpires(DateTime.Now.AddYears(30));
            context.Response.Cache.SetMaxAge(TimeSpan.FromDays(365));
        }
    }
} 
```

并在您的 web.config 上进行配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T16:12:56.590

您可以利用浏览器缓存通过 http 标头设置过期数据。Google Developers / Page Speed Insight 对此过程进行了简要说明：

[https://developers.google.com/speed/docs/insights/LeverageBrowserCaching](https://developers.google.com/speed/docs/insights/LeverageBrowserCaching)

# regex - perl 正则表达式匹配并将特定字符存储在标量变量中

> ID：16145147
> 
> 赞同：-2
> 
> 时间：2013-04-22T10:43:23.703
> 
> 标签：regex, perl

现在假设说我在文件中有这一行：

```
my %address = ( 
```

或我在其中定义了哈希的任何类似行。

我想在行中找到字符“（”并将“地址”存储在 $hash_name 中。我该怎么做？

基本思想是捕获文件中定义的哈希的名称。

我想做的是，

```
foreach $line <MYFILE> {
  if($line =~ /($/ { 
```

我该如何进一步进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:59:17.593

不确定我是否理解您的问题，但是，如何：

```
my %hash;
while (my $line = <MYFILE>) {
    if ($line =~ /\%(\w+)\s*=\s*\($/) {
        $hash{$1} = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T11:07:17.007

```
open (F1,"inputfile.txt") or die("unable to open inputfile.txt");
my $hash_name
    while (<F1>) {
        if (/%(\w+) *= *\(/) {
            $hash_name = $1;
            print $hash_name;
        }
    } 
```

# php - PHP MySQL 用逗号回显变量

> ID：16145148
> 
> 赞同：0
> 
> 时间：2013-04-22T10:43:24.760
> 
> 标签：php, mysql

我将如何在每个回显变量之后添加逗号，而不是在最后一个变量之后添加逗号？

目前我显示列表如下：

```
 while ($row = mysqli_fetch_array($query3)) {
        $tag = $row['tag'];  
        $tagformat = eregi_replace("_", "&nbsp;", $tag);
$blogDisplay .= $tagformat.' ';
        } 
```

这显示： testtag1 testtag2 testtag3

我希望它显示：testtag1、testtag2、testtag3

任何帮助都会很棒！

编辑 SQL 查询：

```
$sqlCommand3 = "SELECT tag FROM blogtags WHERE blogid='$blogid'";
        $query3 = mysqli_query($myConnection, $sqlCommand3) or die (mysqli_error()); 
```

$blogDisplay 还有其他值：

```
$blogDisplay .= '<h1><a href="/blog/'. $blogseourl .'"> ' . $blogtitle . ' </a></h1> ' . $contentshort . '... <a href="/blog/'. $blogseourl .'">Read More...</a><br /><br /> ' . $author . ' posted on ' . $blogtime . ' &#124;  Category: ' . $category . ' &#124;  Tags: ';
    while ($row = mysqli_fetch_array($query3)) {
        $tag = $row['tag'];  
        $tag = str_replace("_", "&nbsp;", $tag);
$blogDisplay .= $tag.' ';
        }
$blogDisplay .= ' &#124; <a href="/blog/'. $blogseourl .'#disqus_thread"></a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:47:30.120

您可以将它们添加到一个数组中，然后在稍后内[爆](http://au1.php.net/manual/en/function.implode.php)该数组：

```
$tags = array();
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", "&nbsp;", $tag);
    $tags[] = $tagformat;
}
echo implode(', ', $tags); 
```

这将逻辑与输出分开，您应该尽可能争取。当您回到此代码时，它将让您的生活在 6 个月后更轻松！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:45:26.567

```
$blogDisplay = "";
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", "&nbsp;", $tag);
    if ($blogDisplay!="") {
           $blogDisplay.=",";
     }
     if (trim($tagformat)!=""){
         $blogDisplay .= $tagformat;
     }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:47:23.583

尝试使用**[implode](http://php.net/manual/en/function.implode.php)**。

```
$blogDisplay = array();
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", "&nbsp;", $tag); 
    $blogDisplay[] = $tagformat;
}

echo implode(', ', $blogDisplay); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:47:42.127

您的代码只需要进行一些修改即可完成上述任务，

```
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", "&nbsp;", $tag);
    $blogDisplay .= $tagformat.', '; //Here is the "," 
    } 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T10:49:20.437

我没有看到你的回声，但我会假设它在 while 循环之外（请考虑使用 foreach 循环）。

只需将逗号放在 eregi_replace 中的空格之前。

```
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", ",&nbsp;", $tag);
    $blogDisplay .= $tagformat.' ';
} 
```

或者：

```
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", "&#44;&nbsp;", $tag);
    $blogDisplay .= $tagformat.' ';
} 
```

或者：

```
while ($row = mysqli_fetch_array($query3)) {
    $tag = $row['tag'];  
    $tagformat = eregi_replace("_", ", ", $tag);
    $blogDisplay .= $tagformat.' ';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T10:53:13.607

如果您只是迭代数据库中的一组标签，则使用此查询会更容易：

```
SELECT GROUP_CONCAT(`tag` DELIMITER ', ') AS `tag`
FROM tags
WHERE ... 
```

也可以看看：[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

MySQL 已经将这些标签很好地连接在一起了。

另外，不要使用`eregi_replace`; 事实上，不要使用正则表达式：

```
str_replace('_', '&nbsp;', $tags); 
```

# mysql - 如何从两个表中查询相邻的分层数据，其中一行是一个类别，其余的是该类别的内容？

> ID：16145150
> 
> 赞同：0
> 
> 时间：2013-04-22T10:43:32.760
> 
> 标签：mysql, sql, database, hierarchy

*免责声明*：我是语言学家，而不是计算机科学家。我熟悉编程，但我不是专家。该项目是针对濒临灭绝语言的大型词典。我需要对大约 1000 个词位进行分类，这样我就可以直观地看到哪些单词缺失并且可能被添加。

* * *

我在 MySQL 中有两个表。

1.  词典表
2.  类别表

词典表中的每条记录（行）都有一个父 id 值（**pid**），对应于 categories 表（我已将其重命名为**folder**）的 id。

我根据邻接模型设计了这个（我需要灵活性来轻松更改树）。

**类别**

```
| folder |     name    | pfolder |
+--------+-------------+---------+
| 1      | Animals     | NULL    |
| 2      | Wild        | 1       |
| 3      | Domestic    | 1       | 
```

**词典**

```
| id     | pid   | word        | translation |
+--------+-------+-------------+-------------+
| 1      | 3     | Hund        | dog         |
| 2      | 2     | Rentier     | reindeer    |
| 3      |       | Maus        | Mouse       | 
```

* * *

**目标**

```
| main    | main_content  |  sub1     | sub1_content | sub2      | sub2_content |
+---------+---------------+-----------+--------------+-----------+--------------+
| Animals | NULL          | Domestic  | Hund         | NULL      | NULL         |
| Animals | NULL          | Wild      | Rentier      | NULL      | NULL         |
| Animals | Maus          | NULL      | NULL         | NULL      | NULL         | 
```

**示例查询**

我不知道该怎么做，也不能简单地按照[本教程](http://sqllessons.com/categories.html)进行操作，因为我有多个表。

这个简单的查询不应该工作吗？

```
SELECT main.name  AS main
FROM categories AS main
    LEFT JOIN hd FROM lexicon ON lexicon.pid = categories.main 
```

**最终**

我想最终得到一个有组织的词素的漂亮列表。在这里，我对文件夹使用粗体，对列表项使用斜体。

*   **动物**
    *   **荒野**
        *   *食利者*
    *   **国内的**
        *   *百*
    *   *鼠*

该数据将使用 xelatex 打印。为了简单起见，我将上面的示例表保持在最低限度。词典表的实际查询将包括`lexeme`、`orthographic word`和`phonetic word`（在国际音标中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:45:47.460

这有点复杂，但我认为它可以满足您的需求。一个艰难的改变，如果你想在动物下显示它，你需要把 pid=1 放在 Lexicon 的 Maus 行中。

```
SELECT
   COALESCE(c3.name, c2.name, c1.name) as main
  ,CASE WHEN (c3.name is null and c2.name is null) then lex.word end as main_content
  ,CASE WHEN (c3.name is null and c2.name is not null) then c1.name 
        WHEN (c3.name is not null and c2.name is not null) then c2.name end as sub1
  ,CASE WHEN (c3.name is null and c2.name is not null) then lex.word end as sub1_content
  ,CASE WHEN (c3.name is not null and c2.name is not null) then c1.name end as sub2
  ,CASE WHEN (c3.name is not null and c2.name is not null) then lex.word end as sub2_content
FROM
  Lexicon lex
LEFT JOIN 
  Categories c1 ON lex.pid = c1.folder
LEFT JOIN
  Categories c2 on c1.pfolder = c2.folder
LEFT JOIN
  Categories c3 on c2.pfolder = c3.folder 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/8495e/32) - 我还添加了一个子类别（Wild 下的 WildCats）来测试 SUB2 是否正确？

# sql - 在主表中存储计数

> ID：16145153
> 
> 赞同：1
> 
> 时间：2013-04-22T10:43:38.223
> 
> 标签：sql, performance, count

我有三个数据库表，

1.  `Users` （ 用户身份， ... ）
2.  `Entries`（条目ID，...）
3.  `Likes` （用户 ID、条目 ID、...）

我的问题很简单。我应该使用`LikeCount`表中的列`Entries`还是`SELECT COUNT(*)`每次需要`Likes`表中的语句时都使用它？哪个是更好的做法？

它可能与这个问题重复：[存储行数还是只计算行数？](https://stackoverflow.com/questions/9518637/storing-the-count-of-rows-or-just-count-the-rows)该问题的给定答案基本上是`LikeCount`每次需要时都不要使用和计数。但是，他们没有对以下问题给出令人满意的答案：

1.  在表中存储计数的不良后果是什么
2.  如果我需要在我的应用程序中非常频繁地计算喜欢，这两种不同方法的性能分析是什么

PS：如果很重要，我使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:07:00.073

**在表中存储计数的不良后果是什么：**

这种方法有两个问题：

1.  您必须使用数据库触发器或应用程序代码在 Likes 表更改时使计数保持最新。

2.  如果你弄错了#1，你必须处理 LikeCount 可能实际上与喜欢的数量不匹配的事实。

**如果我需要在我的应用程序中非常频繁地计算喜欢，这两种不同方法的性能分析是什么：**

我相信，如果您为 Likes 表创建索引，大多数数据库引擎将能够非常快速地回答 COUNT(*) 查询，而无需引用实际表。基本上，在索引中，数据库会跟踪与给定键匹配的行数，这与您的 LikeCount 相同。

如果您要编写如下查询：

```
SELECT count(*) from Likes where EntryID=45; 
```

那么你的索引必须在 EntryID 上。

但是，如果您要编写如下查询：

```
SELECT count(*) from Likes where EntryID=45 and deleted=False; 
```

然后您的索引必须打开（EntryID，已删除）。

# android - android使列表视图不可滚动

> ID：16145156
> 
> 赞同：1
> 
> 时间：2013-04-22T10:43:48.350
> 
> 标签：android, listview, scroll

我试图阻止列表视图滚动。我在其他主题上看到过（例如[如何获得不可滚动的 ListView？](https://stackoverflow.com/questions/4338185/how-to-get-a-non-scrollable-listview?lq=1)）改为使用线性布局。但是，这在我的应用程序中是不可能的，我的列表视图是可编程填充的，所以我需要这个组件。感谢您的回复

编辑：在不更改我的整个代码的情况下，似乎最简单的方法是将列表视图中 scroolview 中的其他项目添加为标题，所以我不再需要 scroolview 了。

但是，listview adaper 似乎无法正常工作。我已经看到我必须使用 WrappedListadapter，但我不知道该怎么做。

这是我用来设置适配器的代码：

```
 SimpleAdapter mSchedule = new SimpleAdapter(this.getBaseContext(), listItem, R.layout.consultafficheitem,
           new String[] {"description", "ingredient"}, new int[] {R.id.consultlistdescription, R.id.consultlistingredients});

    scroll = (RelativeLayout) findViewById(R.id.consultscrollrelativelayout);
    liste.addHeaderView(scroll);

    liste.setAdapter(mSchedule); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:46:05.193

我会使用一个`View.OnTouchListener`并简单地使用类似的东西

```
if(event.getAction == MotionEvent.ACTION_MOVE) {
     // Ignore move events
     return true;
} else {
     return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T00:08:19.023

到目前为止，我发现的最好方法是创建一个自定义列表。

基本上，您忽略了移动事件（发生在触地和触地之间）。但问题是当触摸一个项目时，然后将您的手指移出该项目，它仍然会触发触摸事件。

看到[这个链接](http://danosipov.com/?p=604)

# jquery - JQuery Datatable 首次加载问题

> ID：16145161
> 
> 赞同：3
> 
> 时间：2013-04-22T10:44:01.667
> 
> 标签：jquery, jquery-ui, jquery-datatables

当我尝试使用 JQuery 数据表时，对于第一次加载，数据表 css 未正确加载，

但是对于后续加载，表格会正确加载。

![在此处输入图像描述](https://i.stack.imgur.com/3CLex.jpg)

以下是html

**HTML：**

```
<table id="test">
<thead id="testhead">
<tr> 
<th>Created Date </th>
<th>Source Name </th>
<th>Description </th>
</thead>
<tbody id="testbody"></tbody>
</table> 
```

**Javascript**

在 Javascript 中，我试图创建和动态并将其分别附加到 $("testhead") 和 $("testbody") 。

```
 dwr.util.removeAllRows("testhead");
                  dwr.util.removeAllRows("testbody");
                  var table_header = $("#testhead");
                  var header_row = $("<tr></tr>");

                  /**
                   *
                   * Populate table header
                   */
                  var cell = $("<th></th>");
                  cell.text("Created Date");
                  header_row.append(cell);

                  cell = $("<th></th>");
                  cell.text("Source Name");
                  header_row.append(cell);
                  table_header.append(header_row);

                  cell = $("<th></th>");
                  cell.text("Description");
                  header_row.append(cell);
                  table_header.append(header_row);

                  var table_body = $("#testbody");
                  for ( var i = 0; i < data.length; i++) {
                          var row = $("<tr></tr>");

                          var cell = $("<td></td>");
                          cell.text(data[i].createdDate.getDay() + "-" +
                          data[i].createdDate.getMonth() + "-" +
                          data[i].createdDate.getFullYear());
                          row.append(cell);

                          cell = $("<td></td>");
                          cell.text(data[i].sourceName);
                          row.append(cell);

                          cell = $("<td></td>");
                          cell.text(data[i].description);
                          row.append(cell);
                 }

              $('#test').dataTable({
                       "bJQueryUI":true,
                   "aLengthMenu": [[10,25,50,100,-1], [10,25,50,100,"All"]],
               "iDisplayLength" : 10,
               "bPaginate" :true,
               "bAutoWidth":true,
               "bRetrieve":true,
                              "aoColumns":[
                          {"sTitle":"Created Date","bSearchable" : true,"bSortable" :true},
                              {"sTitle":"Source Name","bSearchable" : true,"bSortable" :true},
                              {"sTitle":"Description","bSearchable" : true,"bSortable" :true},
               ],
               "sDom":'<"H"lfr>t<"F"ip><"clear">',
               "sPaginationType":"full_numbers",
               "sPageButton":"paginate_button",
               "sPageButtonStaticDisbaled":"paginate_button"
               })

              $("#test").css("width","100%");
              $("#test").dataTable().fnDraw();

              showDiv('results'); 
```

在第一次调用该函数时，我的表格没有正确呈现。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:03:54.477

我怀疑是由 javascript 生成的 html 代码的问题，您能否发布第一次生成的 html 时它不起作用，第二次生成时它起作用，以便我们为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T07:32:37.893

我遇到了类似的问题，我发现的解决方案是通过使用 css 调整宽度来覆盖默认行为。

很明显，在第一次加载时，数据表的宽度是`1320px`（在我的情况下），而对于随后的加载，它是`1920px`预期的宽度。

因此，简单的解决方案是在您的 css 中包含以下内容：

```
.dataTable{
    width:1920px !important;
} 
```

希望对大家也有帮助！:)

# java - 有没有替代 Eclipse Sapphire 的 Netbeans 插件？（数据绑定到 GUI）

> ID：16145168
> 
> 赞同：0
> 
> 时间：2013-04-22T10:44:22.647
> 
> 标签：java, xml, netbeans, user-interface, binding

我使用**[Eclipse Sapphire](http://www.eclipse.org/sapphire/)**为特定的 XML 文件创建编辑器。在使用 RCP 的单个应用程序中，我有多个 XML 文件的多个编辑器。

我需要的是从迁移`Eclipse RCP`到`Netbeans Platform`. 我唯一的问题是`Sapphire`在 Netbeans 中找到一个有竞争力的替代品。

搜索后我找到了**[Binding Beans](https://netbeans.org/kb/docs/java/gui-binding.html)**但我不确定它是否可以完全取代它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:06:44.417

> Sapphire 旨在将 UI 编写提升到更高的抽象级别。核心前提是 UI 的基本构建块不应该是一个小部件（文本框、标签、按钮等），而应该是一个属性编辑器。

稍微低一点，但请注意 JavaBeans 规范也支持 PropertyEditors：

[http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyEditor.html](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyEditor.html)

查看 java.beans 包以了解 JDK 提供了什么：

[http://docs.oracle.com/javase/7/docs/api/java/beans/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/beans/package-summary.html)

# windows - 批处理脚本删除包含某些字符的文件

> ID：16145169
> 
> 赞同：1
> 
> 时间：2013-04-22T10:44:25.943
> 
> 标签：windows, batch-file

我几乎没有批处理经验，但现在我需要一个脚本来从 Windows 64 上的文件夹*及其子文件夹中删除名称**中包含*某些字符的所有文件。我只做一些简单的事情，比如

 *```
del "C:\TEST\TEST2\*.TXT" 
```

但我不知道如何执行我需要的过滤。有人可以帮助我使用批处理来实现这一目标吗？

**更准确地编辑**，问题是“如何告诉批处理包含子文件夹？”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T10:53:24.950

该`/s`开关存在于相当多的命令上（包括`del`）

```
del /s "C:\TEST\TEST2\*.TXT" 
```

的帮助`del /?`说：

```
/S            Delete specified files from all subdirectories. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:51:08.487

试试这个：

```
@echo off & setlocal
set "MySearchString=X"
for /f "delims=" %%i in ('dir /b /s /a-d ^| findstr /i "%MySearchString%"') do echo del "%%~i" 
```

如果输出正常，则将变量设置为`MySearchString`要搜索和删除命令的字符或字符串。`echo`

您也可以`MySearchString`仅指定文件名：

```
@echo off & setlocal
set "MySearchString=T"
for /r %%a in (*) do for /f "delims=" %%i in ('echo("%%~na" ^| findstr /i "%MySearchString%"') do echo del "%%~fa" 
```*

# android - android - 列出适配器问题

> ID：16145170
> 
> 赞同：0
> 
> 时间：2013-04-22T10:44:26.893
> 
> 标签：android, android-listview, listadapter

我有一个列表视图，其中有一个文本视图和一个复选框。

当我选择一个列表项时，该行中的复选框被选中，此外还选中了不同行的额外复选框。知道为什么会这样吗？

我填充列表视图的适配器：

```
public class  ContactAdaper extends BaseAdapter
{
    private Context myContext;
    private LayoutInflater inflater;      
    private ArrayList listname;
    private ArrayList list_no;
    private List<ContactPojo> contactList;
    private ContactPojo contactObj;
    public ContactAdaper(ContactActivity contactActivity,ArrayList listname,ArrayList list_no,List<ContactPojo> listToAddContacts)
    {
        this.myContext = contactActivity;
        this.listname = listname;
        this.list_no = list_no;
        this.contactList = listToAddContacts;
    }

    @Override
    public int getCount() 
    {
        return listname.size();
    }

    @Override
    public Object getItem(int arg0)
    {
        return arg0;
    }

    @Override
    public long getItemId(int arg0) 
    {
        return arg0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        if (convertView == null)
        {

            inflater = (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            convertView = inflater.inflate(R.layout.contact_row, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.txtMobNum = (TextView) convertView.findViewById(R.id.name);
            viewHolder.checkBox = (CheckBox) convertView.findViewById(R.id.checkBox);   
            viewHolder.txtName = (TextView)convertView.findViewById(R.id.id);

            convertView.setTag(viewHolder);
        }

        final ViewHolder holder = (ViewHolder) convertView.getTag();
        holder.txtMobNum.setText(list_no.get(position).toString());
        holder.txtName.setText(listname.get(position).toString());

        if(holder != null)
        {
            /*holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
            {

                public void onCheckedChanged(final CompoundButton buttonView, boolean isChecked) 
                {
                    //  Toast.makeText(myContext, "Selected item is :-"  +buttonView.getId(), Toast.LENGTH_LONG).show();

                    if(isChecked)
                    {
                        Toast.makeText(myContext, "Selected Name AND Number is :-"  +
                                holder.txtName.getText().toString()+", "+holder.txtMobNum.getText().toString(), Toast.LENGTH_LONG).show();

                        contactObj = new ContactPojo();
                        contactObj.name = holder.txtName.getText().toString();
                        contactObj.mobile = holder.txtMobNum.getText().toString();

                        contactList.add(contactObj);
                    }
                    else
                    {
                        removeContact(holder.txtMobNum.getText().toString());
                        notifyDataSetChanged();
                        Log.d("Cont", holder.txtName.getText().toString()+" = "+holder.txtMobNum.getText().toString()+" is removed from the list ");

                    }
                }
            });*/

            holder.checkBox.setOnClickListener(new View.OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                     boolean checked = ((CheckBox) v).isChecked();
                     switch(v.getId())
                     {
                        case R.id.checkBox:
                            if (checked)
                            {
                                Toast.makeText(myContext, "Selected Name AND Number is :-"  +
                                        holder.txtName.getText().toString()+", "+holder.txtMobNum.getText().toString(), Toast.LENGTH_LONG).show();

                                contactObj = new ContactPojo();
                                contactObj.name = holder.txtName.getText().toString();
                                contactObj.mobile = holder.txtMobNum.getText().toString();

                                contactList.add(contactObj);
                            }
                            else
                            {
                                removeContact(holder.txtMobNum.getText().toString());
                                notifyDataSetChanged();
                                Log.d("Cont", holder.txtName.getText().toString()+" = "+holder.txtMobNum.getText().toString()+" is removed from the list ");
                            }

                            break;
                     }
                }
            });
        }
        return convertView;              
    }      

    private void removeContact(String mobile)
    {
        Iterator<ContactPojo> it = contactList.iterator();
        while (it.hasNext())
        {
            ContactPojo contact = it.next();
            if(contact.mobile.equals(mobile)) 
            {
                it.remove();
            }
        }
    }
}    
class ViewHolder 
{
    TextView txtMobNum;
    TextView txtName;
    CheckBox checkBox;
} 
```

//这是我的列表行

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_margin="30dp"
    >

 <TextView 
     android:id="@+id/name"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textColor="#000000"
     android:layout_marginLeft="20dp"
     />
 <TextView 
     android:id="@+id/id"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginLeft="20dp"
     android:textColor="#000000"
     />
 <CheckBox 
     android:id="@+id/checkBox"
     android:tag="tagCheck"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginLeft="20dp"
     android:checked="false"
     />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:04:29.310

可能是您的 convertView 没有为重用做好适当的准备。

`public View getView(int position, View convertView, ViewGroup parent)`当列表项“进入屏幕”时被调用（例如：在滚动期间或重新加载视图时）

传递给此方法的`convertView`参数包含一个已“移出屏幕”的单元格，并且可以重用于另一个单元格以节省内存。在您的代码中，convertView 中的 textViews 重新分配了它们的值，因此它们将被更新，但复选框只分配了一个新的侦听器，留下旧的选择值来呈现。当您看到另一个单元格也被选中时，这是从 convertView 加载的旧值。

要解决此问题，请跟踪应选择哪些行并在创建视图/重用 ​​converview 时相应地设置复选框值。

# android - 在 Android 中创建和分发 jar 文件

> ID：16145171
> 
> 赞同：0
> 
> 时间：2013-04-22T10:44:28.757
> 
> 标签：android, jar, android-library

在我的 android 应用程序中，我必须单独实现某个功能，并且需要从中制作一个**库文件（.jar）**。

主要想法是然后我可以分发该 jar 文件，以便其他应用程序可以使用其应用程序中的 jar 文件轻松集成此功能。

下面我指出了清单文件中的最低和目标 SDK 版本。

```
 android:minSdkVersion="7"
 android:targetSdkVersion="15" 
```

我知道我可以创建一个库项目来实现该特定功能，并从我的主项目中获得它的参考。然后**分发**在库项目的 bin 文件夹下创建的 jar 文件。

我对此有几个问题。

1）由于我没有找到任何解释这件事的好教程，有点不确定这是否是要走的路（分发**jar**文件在 bin 文件夹下创建）。

2）在库项目的bin文件夹下创建的jar文件也具有相同的项目名称（例如：- LibraryProjectName.jar）。如果我在分发它之前将它重命名为我想要的，可以吗？

3）还有其他替代方法或好的方法吗？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:08:48.640

> 由于我没有找到任何解释这件事的好教程，有点不确定这是否是要走的路（分发 jar 文件在 bin 文件夹下创建）。

我不会。该 JAR 是使用库项目的工件，可能适合也可能不适合第三方。此外，如果你真的需要一个 Android 库项目，JAR 是不够的。

> 如果我在分发它之前将它重命名为我想要的，可以吗？

JAR 名称可以是任何你想要的。

> 有没有其他替代方法或好方法可以做到这一点？

首先，除非您需要随代码（或 JAR）一起提供资源，否则不要创建 Android 库项目。而且，在这种情况下，您将需要分发 JAR*和所有资源*（以及清单和项目中的几乎所有其他内容）。

其次，创建您自己的 JAR，例如`<jar>`向您的 Ant 脚本添加一个操作。这样，*您*可以准确控制其中的内容、编译方式等，而不是对构建系统作为副产品创建的 JAR 做出假设。

例如，这是`jar`我的一个 CWAC 项目中的一个目标：

```
<target name="jar" depends="debug">
    <jar
        destfile="bin/CWAC-EndlessAdapter.jar"
        basedir="bin/classes"
    />
</target> 
```

# iphone - 如何将原始帧从 AVCaptureVideoDataOutput 流式传输到服务器 iOS？

> ID：16145173
> 
> 赞同：1
> 
> 时间：2013-04-22T10:44:36.230
> 
> 标签：iphone, ios, videochat

我必须实现视频通话应用程序，因为我需要从中捕获原始帧`AVCaptureViewDataOutput`并将其发送到服务器。我不知道该怎么做以及需要什么类型的流媒体？

# javascript - 不能用范围 set.Start set.setEnd 包围内容

> ID：16145179
> 
> 赞同：4
> 
> 时间：2013-04-22T10:45:13.357
> 
> 标签：javascript, range

我需要用跨度包围多个单词，我知道每个单词的 startIndex 和 endIndex （我确定没有单词会跨越多个标签，所有单词都在同一个元素中）我什至无法选择第一个单词，我收到“IndexSizeError：索引或大小为负数或大于允许的数量”和 rangy 的类似错误（[http://jsfiddle.net/pastrocchio/hgugQ/7/](http://jsfiddle.net/pastrocchio/hgugQ/7/)）我做错了什么？

```
var range = document.createRange();
startNode = document.getElementById("texttocheck");

range.setStart(startNode, 0);
range.setEnd(startNode, 4);

var newNode = document.createElement("span");
range.surroundContents(newNode); 
```

这是小提琴：http: [//jsfiddle.net/pastrocchio/hgugQ/3/](http://jsfiddle.net/pastrocchio/hgugQ/3/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T11:29:58.390

我想通了，我错过了 startnode.firstChild

```
var range = document.createRange();
startNode = document.getElementById("texttocheck");

range.setStart(startNode.firstChild, 0);
range.setEnd(startNode.firstChild, 4);

var newNode = document.createElement("span");
range.surroundContents(newNode); 
```

# image - 在视图中显示图像，找不到文件

> ID：16145183
> 
> 赞同：0
> 
> 时间：2013-04-22T10:45:24.453
> 
> 标签：image, asp.net-mvc-4

我想在我的视图中显示图像。但是找不到文件，文件存在。

```
 string file = Server.MapPath("~") + @"/App_Data/Plakaty/" + wyd.WydarzenieId.ToString() + ".jpg";
 ViewBag.file_exist = System.IO.File.Exists(file); 
```

我尝试:(仅显示 alt:)

```
 @if (ViewBag.file_exist == true) // it's TRUE
        {
            <img src="../../App_Data/Plakaty/1029.jpg" alt="p" />
            <img src="~/App_Data/Plakaty/1029.jpg" alt="p1" />
            <img src="@Url.Content("~/App_Data/Plakaty/1029.jpg")"  alt="image"/>
            <img src="@Url.Content("../../App_Data/Plakaty/1029.jpg")"  alt="image2"/>

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:00:36.567

```
<img src="../../App_Data/Plakaty/1029.jpg" alt="p" /> 
```

以此为例，App_Data 真的在图像对外的路径中吗？有时内部路径是不同的。

# jquery-ui - 有选择地禁用 JQuery 多选中的未选中选项

> ID：16145186
> 
> 赞同：0
> 
> 时间：2013-04-22T10:45:27.330
> 
> 标签：jquery-ui, jsp, jquery, jquery-plugins

在 JQuery 多选中。[http://www.erichynds.com/blog/jquery-ui-multiselect-widget](http://www.erichynds.com/blog/jquery-ui-multiselect-widget) 我们能否在选择（选中复选框）一个选项时选择性地禁用选择框中的一些未选中选项。并在取消选择时再次启用它们一。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:51:20.417

您可以将此类应用于要禁用的选项。`class="ui-multiselect-disabled "`反之亦然。

我希望你知道这样做的逻辑:)

**编辑：**

```
$("select").change(function () {
var str = "";
var op=$("select option:selected");
op.addClass('newclass');
str = op.text() ;
//op.css('background-color', 'red');
alert("selected"+op.attr('class'));

$("select option").each(function () {
var temp=$(this).text() ;
if(str!=temp){
    $(this).removeClass('newclass');
    alert(temp);
}
});
}); 
```

快乐编码:)

# c# - 如何从代码隐藏在新窗口或选项卡中打开页面

> ID：16145187
> 
> 赞同：12
> 
> 时间：2013-04-22T10:45:29.540
> 
> 标签：c#, asp.net

所以我有一个网络应用程序，我从下拉列表中选择一个值。选择此值后，我想在新窗口中加载另一个页面。

我试过这个：

```
ScriptManager.RegisterStartupScript(Page, typeof(Page), "OpenWindow", "window.open('Default.aspx', '_blank');", true); 
```

它确实打开了页面，但不在新窗口/标签中。它在当前打开的页面中打开它。

或者我试过：

```
ClientScript.RegisterStartupScript(this.GetType(), "OpenWin", "<script>openDashboardPage()</script>"); 
```

和

```
HttpContext.Current.Response.Write("<SCRIPT LANGUAGE='JavaScript'>window.open('Default.aspx', '_new');</SCRIPT>"); 
```

他们都以同样的方式行事。我只是在现有窗口中加载页面。我在 Firefox 和 Chrome 中都尝试过，认为这可能是浏览器的问题，但它们的行为相同。

如何打开新窗口？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-06T11:49:47.640

试试这个

```
string redirect = "<script>window.open('http://www.google.com');</script>"; 
Response.Write(redirect); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:55:51.663

这段代码对我有用：

```
Dim script As String = "<script type=""text/javascript"">window.open('" & URL.ToString & "');</script>"
ClientScript.RegisterStartupScript(Me.GetType, "openWindow", script) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T11:44:06.387

利用：

Target="_blank" 锚标签的属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:47:14.353

```
Target= "_blank" 
```

这是在 html 中完成的，在 C# 中尝试一下

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T10:51:43.453

您可以使用`scriptmanager.registerstartupscript`来调用`JavaScript function`.

在该函数中，您可以打开一个新窗口。

# java - Java Servlet：如何实例化线程并接收消息

> ID：16145188
> 
> 赞同：0
> 
> 时间：2013-04-22T10:45:29.957
> 
> 标签：java, jakarta-ee, servlets, thread-safety

[我已经阅读了关于Servlet 线程处理](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading)的精彩文章。

我有以下问题：我想创建一个简单的 Servlet，它启动一个在第一个版本中生成随机消息的新线程，或者 - 根据参数 - 发送一个包含自上次请求以来产生的所有消息的响应。

我在浏览器站点上使用 JQuery AJAX 调用处理超时请求。

当我运行接收器调用时，我只收到自线程同时崩溃以来产生的第一条消息。看起来这将是一个线程安全问题，如上述文章中所述，但我可以准确地弄清楚。日志给了我以下信息：

```
SEVERE: Exception in thread "Thread-75" 
SEVERE: java.lang.IllegalMonitorStateException
    at java.lang.Object.wait(Native Method)
    at com.lancom.lsr.util.RandomMessageProducer.run(RandomMessageProducer.java:35)
    at java.lang.Thread.run(Thread.java:722)

SEVERE:     at java.lang.Object.wait(Native Method)
SEVERE:     at com.lancom.lsr.util.RandomMessageProducer.run(RandomMessageProducer.java:35)
SEVERE:     at java.lang.Thread.run(Thread.java:722) 
```

这是我当前的 servlet 代码：

```
public class MyServlet extends HttpServlet { 
...
private RandomMessageProducer rmProducer;
private Thread rmpThread; 
...

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Map<Integer, String> msg = new HashMap<Integer, String>();
    Gson gson = new Gson();

    String sDevs   = request.getParameter("devices");  // Option 1
    String sGetMsg = request.getParameter("rec_msg"); // Option 2
    PrintWriter pw = response.getWriter();

    // Request: Send information and run thread
    if (sDevs != null && STATUS==0) {                       

       /* Start a dummy producer */             
       rmProducer = new RandomMessageProducer();
       rmpThread = new Thread( rmProducer )
       rmpThread.start();

       pw.print("{\"1\": \"Action started!\"}");
       STATUS=1;
    }
       //  Request: Receive messages
    else if (sGetMsg != null) {
       List<String> logs = rmProducer.getLogMsg();      
       for (String lmsg : logs) {
            // Check if we can update the current Status
           if (msg.equals("<<<FIN_SUCC>>>") || msg.equals("<<<FIN_ERR>>>")) {
               STATUS=0;                    
           }
           msg.put(0, lmsg);
       }
       String json = gson.toJson(msg);      
       pw.print(json);  
   }
   pw.close();
}
} 
```

这是我简单的消息生产者线程：

```
public class RandomMessageProducer implements Runnable {

    private Queue<String> msgQueue = new LinkedList<String>();

    @Override
    public void run() {
        Random randomGenerator = new Random();
        for (int idx = 1; idx <= 100; ++idx){
          int randomInt = randomGenerator.nextInt(100);
          msgQueue.add("Generated : " + randomInt);
          try {
            wait(500);          
          } catch (InterruptedException e) {
            msgQueue.add("<<<FIN_ERR>>>");
            e.printStackTrace();
          }
        }
        msgQueue.add("<<<FIN_SUCC>>>");
    }

    public List<String> getLogMsg() {
        List<String> res = new ArrayList<String>();
        while (!msgQueue.isEmpty()) {
            res.add( msgQueue.poll() );
        }
        return res;
    }
} 
```

请求全部执行 1000 毫秒

您可能看到我的推理错误吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:12:19.050

你在这里有严重的线程安全问题。

首先，`wait()`当您只想睡几毫秒时，您正在使用它。你应该`Thread.sleep()`改用。这将解决您的异常，但不会解决线程安全问题。

您有一个由多个线程并行使用的共享链表：随机生成器线程将消息存储在队列中，而 servlet 线程从队列中删除消息。因此，您应该使用并发集合（如 ConcurrentLinkedQueue），或者同步对链表的每次访问。我会使用并发集合。

最后，几个 servlet 线程并行读取和修改`rmpThread`和`rmProducer`变量，没有任何同步。rmpThread 变量已写入，但从未读取，因此我将其设为局部变量。为了确保`rmProducer`其他 servlet 可以看到新写入的内容，您需要同步它的所有访问，方法是使用同步块来写入和读取它，或者通过make 它`volatile`，或者将它包装到 AtomicReferece 中（这是我的选择将使）。

所以 rmProducer 应该这样声明：

```
private AtomicReference<RandomMessageProducer> rmProducerRef = new AtomicReference<>(); 
```

要修改其值，您应该使用

```
rmProducerRef.set(rmProducer); 
```

为了得到它，你应该使用

```
rmProducerRef.get(); 
```

# java - 确定mapper的执行

> ID：16145189
> 
> 赞同：1
> 
> 时间：2013-04-22T10:45:31.307
> 
> 标签：java, linux, hadoop, mapreduce, mapper

是否执行了定义映射器的帮助，如果没有执行，它可能发生的原因是什么。我将读取方式的输出从数据库写入执行映射器的本地文件系统的文本文件。这里我给出一个代码

```
package org.myorg;

import java.io.*;
import java.util.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {

    public static class Map extends MapReduceBase implements
            Mapper<LongWritable, Text, Text, LongWritable> {
        private final static LongWritable zero = new LongWritable(0);
        private Text word = new Text();

        public void map(LongWritable key, Text value,
                OutputCollector<Text, LongWritable> output, Reporter reporter)
                throws IOException {

            Configuration conf = new Configuration();
            int CountComputers;
            FileInputStream fstream = new FileInputStream(
                    "/export/hadoop-1.0.1/bin/countcomputers.txt");
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            String result=br.readLine();
            CountComputers=Integer.parseInt(result);
            input.close();
            fstream.close();
            Connection con = null;
            Statement st = null;
                ResultSet rs = null;    
                String url = "jdbc:postgresql://192.168.1.8:5432/NexentaSearch";
                String user = "postgres";
                String password = "valter89";
            ArrayList<String> paths = new ArrayList<String>();
            try
            {
                con = DriverManager.getConnection(url, user, password);
                        st = con.createStatement();
                        rs = st.executeQuery("select path from tasks order by id");
                while (rs.next()) { paths.add(rs.getString(1)); };
                PrintWriter zzz = null;
                    try
                    {
                            zzz = new PrintWriter(new FileOutputStream("/export/hadoop-1.0.1/bin/readwaysfromdatabase.txt"));
                    }
                    catch(FileNotFoundException e)
                    {
                            System.out.println("Error");
                            System.exit(0);
                    }
                    for (int i=0; i<paths.size(); i++)
                {
                    zzz.println("paths[i]=" + paths.get(i) + "\n");
                    }
                    zzz.close();
            }
            catch (SQLException e) 
            {
                System.out.println("Connection Failed! Check output console");
                e.printStackTrace();
            } 
```

但是，尽管它在一个从属节点上，但没有创建 /export/hadoop-1.0.1/bin/readwaysfromdatabase.txt 文件。是否从这里开始，根本没有执行什么映射器？我还将输出带入程序执行文件

```
args[0]=/export/hadoop-1.0.1/bin/input
13/04/22 14:00:53 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/04/22 14:00:53 INFO mapred.FileInputFormat: Total input paths to process : 0
13/04/22 14:00:54 INFO mapred.JobClient: Running job: job_201304221331_0003
13/04/22 14:00:55 INFO mapred.JobClient:  map 0% reduce 0%
13/04/22 14:01:12 INFO mapred.JobClient:  map 0% reduce 100%
13/04/22 14:01:17 INFO mapred.JobClient: Job complete: job_201304221331_0003
13/04/22 14:01:17 INFO mapred.JobClient: Counters: 15
13/04/22 14:01:17 INFO mapred.JobClient:   Job Counters 
13/04/22 14:01:17 INFO mapred.JobClient:     Launched reduce tasks=1
13/04/22 14:01:17 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=9079
13/04/22 14:01:17 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/04/22 14:01:17 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/04/22 14:01:17 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=7983
13/04/22 14:01:17 INFO mapred.JobClient:   File Output Format Counters 
13/04/22 14:01:17 INFO mapred.JobClient:     Bytes Written=0
13/04/22 14:01:17 INFO mapred.JobClient:   FileSystemCounters
13/04/22 14:01:17 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=21536
13/04/22 14:01:17 INFO mapred.JobClient:   Map-Reduce Framework
13/04/22 14:01:17 INFO mapred.JobClient:     Reduce input groups=0
13/04/22 14:01:17 INFO mapred.JobClient:     Combine output records=0
13/04/22 14:01:17 INFO mapred.JobClient:     Reduce shuffle bytes=0
13/04/22 14:01:17 INFO mapred.JobClient:     Reduce output records=0
13/04/22 14:01:17 INFO mapred.JobClient:     Spilled Records=0
13/04/22 14:01:17 INFO mapred.JobClient:     Total committed heap usage (bytes)=16252928
13/04/22 14:01:17 INFO mapred.JobClient:     Combine input records=0
13/04/22 14:01:17 INFO mapred.JobClient:     Reduce input records=0 
```

我还将输出带入在一台虚拟机上成功执行程序的文件中

```
12/10/28 10:41:14 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/10/28 10:41:14 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/10/28 10:41:14 INFO mapred.FileInputFormat: Total input paths to process : 1
12/10/28 10:41:15 INFO mapred.JobClient: Running job: job_local_0001
12/10/28 10:41:15 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
12/10/28 10:41:15 INFO mapred.MapTask: numReduceTasks: 1
12/10/28 10:41:15 INFO mapred.MapTask: io.sort.mb = 100
12/10/28 10:41:15 INFO mapred.MapTask: data buffer = 79691776/99614720
12/10/28 10:41:15 INFO mapred.MapTask: record buffer = 262144/327680
12/10/28 10:41:15 INFO mapred.MapTask: Starting flush of map output
12/10/28 10:41:16 INFO mapred.JobClient:  map 0% reduce 0%
12/10/28 10:41:17 INFO mapred.MapTask: Finished spill 0
12/10/28 10:41:17 INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting
12/10/28 10:41:18 INFO mapred.LocalJobRunner: file:/export/hadoop-1.0.1/bin/input/paths.txt:0+156
12/10/28 10:41:18 INFO mapred.Task: Task 'attempt_local_0001_m_000000_0' done.
12/10/28 10:41:18 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
12/10/28 10:41:18 INFO mapred.LocalJobRunner: 
12/10/28 10:41:18 INFO mapred.Merger: Merging 1 sorted segments
12/10/28 10:41:18 INFO mapred.Merger: Down to the last merge-pass, with 1 segments left of total size: 199 bytes
12/10/28 10:41:18 INFO mapred.LocalJobRunner: 
12/10/28 10:41:19 INFO mapred.JobClient:  map 100% reduce 0%
12/10/28 10:41:19 INFO mapred.Task: Task:attempt_local_0001_r_000000_0 is done. And is in the process of commiting
12/10/28 10:41:19 INFO mapred.LocalJobRunner: 
12/10/28 10:41:19 INFO mapred.Task: Task attempt_local_0001_r_000000_0 is allowed to commit now
12/10/28 10:41:19 INFO mapred.FileOutputCommitter: Saved output of task 'attempt_local_0001_r_000000_0' to file:/export/hadoop-1.0.1/bin/output
12/10/28 10:41:21 INFO mapred.LocalJobRunner: reduce > reduce
12/10/28 10:41:21 INFO mapred.Task: Task 'attempt_local_0001_r_000000_0' done.
12/10/28 10:41:22 INFO mapred.JobClient:  map 100% reduce 100%
12/10/28 10:41:22 INFO mapred.JobClient: Job complete: job_local_0001
12/10/28 10:41:22 INFO mapred.JobClient: Counters: 18
12/10/28 10:41:22 INFO mapred.JobClient:   File Input Format Counters 
12/10/28 10:41:22 INFO mapred.JobClient:     Bytes Read=156
12/10/28 10:41:22 INFO mapred.JobClient:   File Output Format Counters 
12/10/28 10:41:22 INFO mapred.JobClient:     Bytes Written=177
12/10/28 10:41:22 INFO mapred.JobClient:   FileSystemCounters
12/10/28 10:41:22 INFO mapred.JobClient:     FILE_BYTES_READ=9573
12/10/28 10:41:22 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=73931
12/10/28 10:41:22 INFO mapred.JobClient:   Map-Reduce Framework
12/10/28 10:41:22 INFO mapred.JobClient:     Reduce input groups=4
12/10/28 10:41:22 INFO mapred.JobClient:     Map output materialized bytes=203
12/10/28 10:41:22 INFO mapred.JobClient:     Combine output records=4
12/10/28 10:41:22 INFO mapred.JobClient:     Map input records=1
12/10/28 10:41:22 INFO mapred.JobClient:     Reduce shuffle bytes=0
12/10/28 10:41:22 INFO mapred.JobClient:     Reduce output records=4
12/10/28 10:41:22 INFO mapred.JobClient:     Spilled Records=8
12/10/28 10:41:22 INFO mapred.JobClient:     Map output bytes=189
12/10/28 10:41:22 INFO mapred.JobClient:     Total committed heap usage (bytes)=321527808
12/10/28 10:41:22 INFO mapred.JobClient:     Map input bytes=156
12/10/28 10:41:22 INFO mapred.JobClient:     Combine input records=0
12/10/28 10:41:22 INFO mapred.JobClient:     Map output records=4
12/10/28 10:41:22 INFO mapred.JobClient:     SPLIT_RAW_BYTES=98
12/10/28 10:41:22 INFO mapred.JobClient:     Reduce input records=0 
```

@ChrisWhite 我在命令的帮助下运行了程序

```
./hadoop jar /export/hadoop-1.0.1/bin/ParallelIndexation.jar org.myorg.ParallelIndexation /export/hadoop-1.0.1/bin/input /export/hadoop-1.0.1/bin/output -D mapred.map.tasks=1 1> resultofexecute.txt 2&>1 
```

我在一个集群中有 4 个节点，其中一个主节点，一个用于辅助名称节点和 2 个从属节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:29:01.083

为您的工作安排了多少地图任务，您的集群有多大？如果说你的工作只运行了 4 个地图任务和一个有 32 个节点的集群，那么 28/32 节点很可能没有任何输出（因为这些节点上没有运行地图任务）。

您可以通过 Job Tracker Web UI 查看有关构成您的作业的地图任务数量以及这些作业计划在何处运行的信息。

奇怪的是，您的第一次运行转储没有显示任何已启动的地图作业，只是减少了任务：

```
13/04/22 14:01:17 INFO mapred.JobClient:     Launched reduce tasks=1 
```

而且地图输入/输出记录也没有计数器，因此您运行此作业的方式有些奇怪 - 您能否分享您用于启动作业的完整命令行以及配置和运行的驱动程序代码工作？

# c# - 跟踪 windows 服务状态并在 WPF UI 中显示状态

> ID：16145190
> 
> 赞同：1
> 
> 时间：2013-04-22T10:45:31.810
> 
> 标签：c#, wpf, mvvm, service

我正在使用 WPF 开发一个 Windows 应用程序，这个应用程序遵循 MVVM。我的应用程序显示两个 Windows 服务的状态。也就是说，如果应用程序打开并且服务停止，则需要立即在 UI 中更改状态。同样，如果应用程序打开并启动了服务，则需要立即在应用程序 UI 中更改状态。以前，我不需要处理 windows 服务。所以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:53:33.607

您可以使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类定期轮询服务状态。无论如何，您实际上无法立即收到通知，存在轮询延迟错误。如果您想要更准确的信息，您应该修改服务以使用某种 IPC 机制将其状态发送给侦听器。

# javascript - javascript 闭包：隐式参数，调用者

> ID：16145193
> 
> 赞同：1
> 
> 时间：2013-04-22T10:45:40.573
> 
> 标签：javascript, dom, closures, prototypal-inheritance

我需要对 javascript 调用的元数据进行一些说明。下面提供的代码具有 SenderAsParameterFunc 和 NoExplicitParametersFunc，它们是从 AnotherFunction 的每个循环中调用的。

```
var Obj = function(){

Obj.SenderAsParameterFunc = function(sender, param1, param2){
// log $(sender).id;
}

Obj.NoExplicitParametersFunc = function(){

 // EXTRACT DEFAULT SENDER/CALLEE
 // I see in console Obj.NoExplicitParametersFunc.caller.arguments >> SEE REF1
}

 Obj.NoExplicitParametersFuncWithExtraArgs = function(this, par1, par2){
 // 'this' from each loop?
}

Obj.AnotherFunc = function(){

    var X = $('myselect');

    var par1 = 1;
    var par2 = 'bla';
    $.each(X.find("option"), function () {
                Obj.SenderAsParameterFunc(this, par1, par2); 
                // 'this' here references current object from 'each' loop
            });

    $.each(X.find("option"), Obj.NoExplicitParametersFunc); 
   // must be equvalent to first var, 
   // but to extract 'inner' this we have to do more magic in NoExplicitParametersFunc...

    var par1 = 1;
    var par2 = 'bla';
    $.each(X.find("option"), Obj.NoExplicitParametersFuncWithExtraArgs);
    }

} 
```

那么应该在 NoExplicitParametersFunc 中写入什么来访问每个选项，就像在 SenderAsParameterFunc 中使用 $(this) 完成的那样？

==========

好的，总结一下我学到的东西：如果一个函数没有参数

```
$.each(X.find("option"), Obj.NoExplicitParametersFunc); 
```

然后'this'默认传递并且可以在函数中访问。

如果函数有参数

```
$.each(X.find("option"), function () { Obj.SenderAsParameterFunc(this, par1, par2); }); 
```

那么 'this' 必须作为参数包含在函数中（首先？）才能在函数中访问。

==============

参考1：

```
b.Event
altKey: undefined
attrChange: undefined
attrName: undefined
bubbles: true
cancelable: false
ctrlKey: undefined
currentTarget: input#inputId
data: undefined
delegateTarget: input#inputId
eventPhase: 2
handleObj: Object
isDefaultPrevented: function ot(){return!1}
jQuery19105656534675508738: true
metaKey: false
originalEvent: Event
relatedNode: undefined
relatedTarget: undefined
shiftKey: undefined
srcElement: input#inputId
target: input#inputId
timeStamp: 1366622725473
type: "change"
view: undefined
which: undefined
__proto__: Object, 
```

currentTarget、delegateTarget、srcElement、target 是一样的，但实际应该使用什么，最正确的方法是什么？参考将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:50:26.027

**TL;DR：**在您的情况下，这并不重要，但如果您有疑问，请使用`currentTarget`

* * *

我真的不明白你的第一个问题，但关于第二个......

当一个事件被调度时，这个事件通常会冒泡，例如在这个页面上：

```
<body>
  <div>
    <img src="foobar.png" />
  </div>
</body> 
```

如果用户单击 a`img`内的元素`div`，它将以这种方式触发事件

```
body - capturing
div - capturing
img - at target
div - bubbling
body - bubbling 
```

因此，您可以添加一个侦听器`body`并捕获该事件。但是为了让您知道实际单击了哪个元素（`img`在这种情况下），它提供了`event.target`属性（`srcElement`在 Internet Explorer 上）。

`delegateTarget`是 jQuery 添加的属性，如果您使用事件委托，它会提供额外的信息。我不知道它到底是什么，但你可以看看[文档](http://api.jquery.com/event.delegateTarget/)

最后`currentTarget`是您附加事件的元素，如果我们将侦听器添加到`body`它将是`body`. 所以每个事件的论点是

```
fire body.click with { target: img, currentTarget: body }
fire div.click  with { target: img, currentTarget: div  }
fire img.click  with { target: img, currentTarget: img  }
fire div.click  with { target: img, currentTarget: div  }
fire body.click with { target: img, currentTarget: body } 
```

根据您在做什么，您将需要一个或另一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:59:43.747

> ```
> $.each(X.find("option"), function () {
>       Obj.SenderAsParameterFunc(this);
>       // 'this' here references anonymous function, 
>       // from which it was called, so 'this' is sender
> }); 
> ```

不。*匿名*函数在这里没有被任何东西引用（它只能在 中作为参数访问`$.each`）。回调中的[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)[`$.each`](http://api.jquery.com/jQuery.each/)确实引用了迭代项。这也确实回答了您的问题：

```
Obj.NoExplicitParametersFunc = function(i, v){
    console.log(this, i, v);
} 
```

> 如果一个函数有参数[并且在匿名函数表达式中被调用]，那么必须将“this”作为参数包含在函数中（首先？）才能在函数中访问。

是的，由于`this`每个函数调用都是独一无二的，您必须传递它的值 - 就像您不能只访问调用者函数的局部变量一样，您也不能访问它的`this`值。要使用特定的 this 值调用函数，可以使用[`.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
$.each(X.find("option"), function(i, v) {
    Obj.SenderAsParameterFunc.call(this, i, v, par1, par2);
}); 
```

# java - 执行 List.subList.Clear() 后 List 的索引是否会更新？

> ID：16145196
> 
> 赞同：0
> 
> 时间：2013-04-22T10:45:59.973
> 
> 标签：java, list, sublist

我知道对于一些`List list;`做`list.subList(i,j).Clear()`清除`list`项目。但是索引`list`会相应更新吗？如果没有，我认为它是非常没用的。如果是，这样做的开销是多少？特别是因为我们需要删除范围，然后推进索引。有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:55:56.440

针对此类操作更新索引。

# python - if 和语句等于 True，但应该为 False

> ID：16145206
> 
> 赞同：1
> 
> 时间：2013-04-22T10:46:46.587
> 
> 标签：python, django

所以我有以下代码：

```
if old_size < new_size and date_exceeded and usage(user) < new_size:
    unset_date_exceeded() 
```

问题是，即使值表明不是这样，它的评估结果也为 True：

```
logger.info('oS:%s | nS:%s | dE:%s | usage:%s' % (old_size, new_size, date_exceeded, usage(user)))
# returns oS:262144000 | nS:536870912 | dE:2013-04-22 10:27:08+00:00 | usage:908811325 
```

请注意，usage(user) < new_size 应该是`False`，但由于某种原因，它不是那样工作的。

我想也许我不明白`and`函数是如何工作的，但是如果我在 python shell 中尝试这个，我无法复制它，而是得到预期的结果：

```
>>> oS=         262144000
>>> nS=         536870912
>>> usage=       908811325
>>> dE="2013-04-22 10:27:08+00:00"
>>> oS < nS and dE and usage < nS
False 
```

我很确定我正在失去理智并且错过了一个错字或其他东西，所以如果是这种情况，我很抱歉，但我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:10:32.480

我怀疑您正在尝试比较不同的类型（这是允许的-但含义有些毫无意义）...

如果你试试：

```
print map(type, (old_size, new_size, date_exceeded, usage(user))) 
```

然后从那里走...

# php - 如何在php中根据国家/地区显示GMT时间

> ID：16145211
> 
> 赞同：1
> 
> 时间：2013-04-22T10:47:07.137
> 
> 标签：php, datetime, gmt

我想根据国家/地区显示 GMT 时间。如果假设，来自印度的某个用户注册到我的应用程序中，我应该将 GMT 时间作为 GMT +5 附加到我的数据库中。如果假设，来自法国的其他用户注册到我的应用程序中，我应该将 GMT 时间作为 GMT +1 附加到我的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:54:53.987

如果您想在 PHP 中执行此操作，则需要为此进行地理定位。有两种方式：自制方式，或API方式。根据您想要的分辨率，情况可能会有所不同。请记住，这**不会**神奇地检测代理。权衡是在效率和内务管理之间。

# 家酿

拿起一个地理定位数据库并查询它的 IP 子集，这将为您提供国家/地区。保留国家/地区的时区列表。这很痛苦，这就是为什么我不打算为此提供代码。

# API

这是微不足道的：

```
<?php 
  $geoloc = file_get_contents("http://api.ipinfodb.com/v3/ip-city/?format=json&key=<API KEY>&ip=".$_SERVER['REMOTE_ADDR']);
  if ($geoloc && ($r = json_decode($geoloc)) !== false) {
    // Your timezone is in $r->timeZone in the format "+/-i:ii"
  }
?> 
```

You'll need an API key for ipinfodb, which you can get at this address: [http://ipinfodb.com/register.php](http://ipinfodb.com/register.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:49:43.683

有时，没有`server-based/PHP`获取本地时间的方法。

您必须通过`Javascript`. 谷歌`bitbucket timezone detect`并使用它来设置一个`local_timezone`cookie，您可以从 PHP 读取并通过`date_default_timezone_set()`

```
//get the client ip and assign it to variable
$IP=$_SERVER['REMOTE_ADDR'];
//if you using localhost you can check using follow variable
//$IP = '202.71.158.30';
//pass the ip as a parameter for follow URL it will return the country
$country = file_get_contents('http://api.hostip.info/country.php?ip='.$IP);
//show the country
echo $country 
```

此外，这里是帮助您获取 GTM 时区的链接......

[如何在 PHP 中获得格林威治标准时间？](https://stackoverflow.com/questions/851574/how-do-i-get-the-gmt-time-in-php)

您需要实现自己的逻辑，例如，获取客户的时间并将其从 GTM-0 中扣除，您将得到的将是 GTM（小时）.. 希望您能得到我想说的..

希望能帮助到你。

# c# - 如何在 Windows 窗体中打开特定选项卡

> ID：16145215
> 
> 赞同：2
> 
> 时间：2013-04-22T10:47:21.337
> 
> 标签：c#

![在此处输入图像描述](https://i.stack.imgur.com/przNt.jpg)

所有这些选项卡都是以 Windows 形式动态创建的。我想在按钮单击时打开特定的标签页。

例如，当单击一个按钮时（按钮不是标签页按钮，它是其他一些执行按钮），我想显示 tab3 。

我无法获得任何标签页，但无法打开特定标签..

```
private void toolStripButton1_Click(object sender, EventArgs e)
{
    int tabcount = Main_tab.TabCount;
    MessageBox.Show(tabcount.ToString());     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:51:23.220

[`TabControl.SelectTab`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selecttab.aspx)

```
this.tabControl1.SelectTab(1); // by index 
this.tabControl1.SelectTab("tab3");  // by tabPageName
this.tabControl1.SelectTab(tabPage); // by tab page 
```

或者

[`TabControl.SelectedIndex`财产](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedindex.aspx)

```
this.tabControl1.SelectedIndex = 1; //Selects second tab of the tab control 
```

或者

[`TabControl.SelectedTab`财产](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedtab.aspx)

```
this.tabControl1.SelectedTab = tabPage2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:06:35.783

```
private void toolStripButton1_Click(object sender, EventArgs e)

{

  int tabcount = Main_tab.TabCount;

  for (int count = 0; count < class_new_tab.tab_count; count++)
        {
            Main_tab.SelectTab(count);

             //perform tab operation
       }    

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:53:19.063

您可以通过它的索引访问它并调用它的显示方法。

```
Main_tab.GetControl(index_of_your_tab); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:55:53.680

您可以`Controls`在`TabControl`.

用于`Find`按名称查找特定选项卡

```
Main_tab.SelectedTab = (TabPage)Main_tab.Controls.Find("tab3", searchAllChildren: false).First(); 
```

# mysql - 用于运行存储过程的 MySQL 唯一会话

> ID：16145216
> 
> 赞同：1
> 
> 时间：2013-04-22T10:47:23.443
> 
> 标签：mysql, stored-procedures

如果我有一个每次运行时都会创建临时表 X 的存储过程，有没有办法运行具有某种唯一会话 ID 的存储过程，这样当人 A 运行存储过程并创建临时表 X 时，那么当人 B 运行相同的过程时，它也不会创建临时表 X 然后崩溃。

我基本上想要一个可以做某事的过程，但我希望多人同时运行相同的过程，而不会因为临时表已经创建而导致过程失败。只是想知道我是否可以对 MySQL 中的会话变量做些什么，或者也许使用某人的连接信息来为每个运行该过程的人创建一个唯一的会话。也许每次都创建表 X_session_ID。有没有办法在存储过程中生成唯一 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:51:33.970

您可以创建所需的临时表，使用[`CREATE TEMPORARY TABLE`](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)它可以防止用户之间的名称冲突，而无需生成唯一标识符；

> 临时表
> 
> 创建表时可以使用 TEMPORARY 关键字。**TEMPORARY 表仅对当前连接可见，并在连接关闭时自动删除。**这意味着两个不同的连接可以使用相同的临时表名称，而不会相互冲突或与现有的同名非临时表冲突。

# c++ - 如何循环遍历 MATLAB 的 mex c++ 函数中的矩阵元素？

> ID：16145220
> 
> 赞同：7
> 
> 时间：2013-04-22T10:47:31.740
> 
> 标签：c++, matlab, multidimensional-array, mex

我正在尝试使用 mex 为 MATLAB 编写一个外部 c++ 函数来索引来操作矩阵，并且无法使用多维索引。[这里](http://www.mathworks.co.uk/help/matlab/matlab_external/table-of-mex-examples.html)提供了一些示例，但我还没有找到如何解决我在下面描述的问题。我有一个样本矩阵：

```
>> mat
mat =
 1    10
 2    20
 3    30
 4    40
 5    50 
```

目前，我通过有效的矩阵使用线性索引：

```
#include <mex.h>
#include <iostream>
using namespace std;
void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) 
{ 
 //1.get pointer to input graph_list and allocate it    
    double *graph_list = mxGetPr(prhs[0]);
    mwSize mrows = mxGetM(prhs[0]);
    mwSize ncols = mxGetN(prhs[0]);  
    cout<< mrows<<" rows\n";
    cout<< ncols<<" cols\n";
    int mm, nn;
    for (nn=0;nn<ncols;nn++) {
        for (mm=0;mm<mrows;mm++){
            cout << graph_list[nn*(mrows) +mm]  <<"\n";            
        }
    }     
} 
```

这会产生：

```
>> mexTryAlex(mat)    
5 rows
2 cols
1
2
3
4
5
10
20
30
40
50 
```

当我更改 graph_list 的定义并尝试对 graph_list 进行 2D 索引时，会出现以下编译错误`mex`：

```
double **graph_list = mxGetPr(prhs[0]);
cout << graph_list[nn][mm]; 
```

编辑：这是收到的错误消息

```
>> mex mexTryAlex.cpp
Warning: You are using gcc version "4.4.3-4ubuntu5)".  The version
     currently supported with MEX is "4.3.4".
     For a list of currently supported compilers see: 
     http://www.mathworks.com/support/compilers/current_release/
mexTryAlex.cpp: In function ‘void mexFunction(int, mxArray**, int, const mxArray**)’:
mexTryAlex.cpp:16: error: cannot convert ‘double*’ to ‘double**’ in initialization
mex: compile of ' "mexTryAlex.cpp"' failed.
??? Error using ==> mex at 208
Unable to complete successfully. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T12:14:48.390

编译器说明了一切。

在 C 中，二维数组就像一个数组数组。因此，2D 阵列与 1D 阵列有着根本的不同；它是一个指针数组，其中每个元素都包含一个指向数组的指针（因此是双指针`double**`）。

您要求`mxGetPr()`返回 a `double**`，但它返回 a `double*`，例如，指向一维数组的第一个元素的指针。这个一维数组只能被*线性*索引。

我的猜测是 MATLAB 这样做是为了保持索引数组的一致性——你真的期望/想要`double****`一个 4-D 数组吗？

而且，`mxGetPr()`不能被返回类型重载（毕竟是C）。

为了能够对一维数组进行双索引，您可以潜入一个小宏：

```
#define A(i,j) A[(i) + (j)*numrows] 
```

并像这样使用它

```
double *A = mxGetPr(...);
int numrows = 4;   /* or get with mxGetM() or so) */

double blah = A(3,2); /* call to MACRO */ 
```

显然，与所有宏一样，需要注意以下几点：

1.  没有边界检查
2.  C 是基于 0 的，而 Matlab 是基于 1 的，使得*所有索引都不同*
3.  所有数组都必须称为“A”

您可以编写一个函数来减轻这些缺点：

```
double getValue(double** array, int row, int* dims); 
```

（或如[Shai](https://stackoverflow.com/a/16146795/1714410)`mxCalcSingleSubscript`所指出的那样使用），但这并不能真正提高表现力恕我直言：

```
double blah = getValue(array, 3,4, dims);
/* or the ugliness from mxCalcSingleSubscript(); */ 
```

您也可以用 C++ 编写，用 . 创建一个 Matrix 类型的类，`operator()`用指针和维度等构造它`mxGetPr()`，`mxGetDims()`在 Matlab 中使用`g++`或等效编译，但这会引入一大堆其他问题并增加更多复杂性大多数情况下都不需要。

因此，为了避免所有这些混乱，我总是就地计算索引:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-10T10:34:24.983

拥有一个矩阵类是迄今为止处理这类问题的最简单的方法。有很多可供选择，所以不要费心自己写。犰狳相当不错，如果你使用它，它还可以与 LAPACK 集成。 [http://arma.sourceforge.net/docs.html](http://arma.sourceforge.net/docs.html)

请参阅下面的示例

```
#include <mex.h>
#include <iostream>
#include <armadillo>
using namespace std;
using namespace arma;

//creates an armadillo matrix from a matlab matrix
mat armaMatrix(const mxArray *matlabMatrix[]){
    mwSize mrows = mxGetM(matlabMatrix[0]);
    mwSize ncols = mxGetN(matlabMatrix[0]);
    double *values = mxGetPr(matlabMatrix[0]);

    return mat(values, nrows, ncols);
}

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) 
{
    mat graph_list = armaMatrix(prhs);

    //print the matrix
    cout << graph_list<<"\n";
    //print the first column
    cout << graph_list(span::all,0) <<"\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T12:10:14.563

[正如Rody](https://stackoverflow.com/a/16146863/1714410)所指出的，`mxGetPr`返回一个指向一**维**数组的指针。因此，您不能将其视为 C++ 中的**二维**数组。
您可以做的是使用[`mxCalcSingleSubscript`](http://www.mathworks.com/help/matlab/apiref/mxcalcsinglesubscript.html)函数将**ND**下标转换为单个 1D 索引。

# java - 在 Android 中使用谷歌地图的自定义信息窗口上的动画

> ID：16145221
> 
> 赞同：2
> 
> 时间：2013-04-22T10:47:32.413
> 
> 标签：java, android, google-maps, animation, google-api

我正在尝试在我的 Android 应用程序中使用自定义标记“气泡”。为此，我创建了一个返回并填充视图的 InfoWindowAdapter。

但是，由于某种原因，它似乎不允许我将动画应用于该视图（或内部的任何内容）。我希望它以某种动画方式弹出，但我可能遗漏了一些东西。

这是我迄今为止尝试过的：

```
map.setInfoWindowAdapter(new InfoWindowAdapter() {
    private final View contents = getLayoutInflater().inflate(R.layout.marker_layout, null);

    public View getInfoWindow(Marker marker) {
        TranslateAnimation animator = new TranslateAnimation(0.0f, 0.0f, 0.0f, 100.0f);

        animator.setDuration(2000);
        animator.setInterpolator(new AccelerateInterpolator());
        animator.setFillAfter(true);

        contents.findViewById(R.id.entity_name).clearAnimation();
        contents.findViewById(R.id.entity_name).startAnimation(animator);

        ((TextView) contents.findViewById(R.id.entity_name)).setText(marker.getTitle());
        return contents;
    }
/* ... */ 
```

视图成功创建并填充，但没有父动画。如果我将相同的动画应用于布局的另一个元素，它可以完美地工作，所以我开始认为这可能与谷歌地图使用信息窗口的方式有关？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T10:52:22.027

您不能将动画应用于`InfoWindow`，原因很简单。您在 中看到的`InfoWindow`不是您定义的布局，而是从中绘制的图像。这意味着你不能操纵这个`InfoWindow`。

来自谷歌的文档：

> **注意：**绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用`View.draw(Canvas)`）。这意味着对视图的任何后续更改都不会反映在地图上的信息窗口中。要稍后更新信息窗口（例如，加载图像后），请调用`showInfoWindow()`. 此外，信息窗口不会尊重任何普通视图的典型交互性，例如触摸或手势事件。但是，您可以在整个信息窗口上收听通用单击事件，如下节所述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T12:55:26.883

`Handler`您可以尝试使用and来解决这个限制`Marker.showInfoWindow()`。

在短时间内，每次在 getInfoWindow 中向处理程序发送消息，调用 showInfoWindow 并创建不同的视图（在您的情况下具有不同的下边距）。

这可能有点棘手。当用户在这 2 秒内关闭它时，您必须跟踪打开的信息窗口以不继续“动画”。

# php - 如何在一个 MySQL 语句中实现两个查询？

> ID：16145223
> 
> 赞同：1
> 
> 时间：2013-04-22T10:47:39.050
> 
> 标签：php

如何在一个 MySQL 语句中实现两个查询？

例如编码

```
<?php var query=mysql_query("INSERT INTO adminDetails (user_name) VALUES ('uma');SELECT * FROM adminDetails");
?> 
```

上面的 sql 给出了结果。但我在下面的语句中使用了相同的概念，但它不起作用

```
<?php
mysql_query("INSERT INTO adminDetails (user_name) VALUES ('uma');UPDATE domainname SET email='ragu@gmail.com' where id='18'") 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:49:26.327

`mysql_query`无法做到这一点，您必须为此使用multi_query`mysqli's` [函数](http://php.net/manual/en/mysqli.multi-query.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:49:29.283

你可以用 MySQLi 做到这一点`multi_query`

[http://dev.fyicenter.com/faq/php/Query-Multiple-Tables-Jointly.html](http://dev.fyicenter.com/faq/php/Query-Multiple-Tables-Jointly.html) 和 [http://php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

# css - 如何删除显示为内联块的表行之间的空间？

> ID：16145225
> 
> 赞同：3
> 
> 时间：2013-04-22T10:47:45.080
> 
> 标签：css, responsive-design, css-tables

我正在关注这个响应表的例子：http: [//dbushell.com/demos/tables/rt_05-01-12.html](http://dbushell.com/demos/tables/rt_05-01-12.html)

但我在显示为内联块的表行之间有一个奇怪的空间，这是一个演示：[http ://codepen.io/anon/pen/Fksjw](http://codepen.io/anon/pen/Fksjw)

我尝试将边距归零，但我无法摆脱这个空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:02:03.637

您看到的是内联（inline-block）元素的默认行为。一种可能的解决方案是将`font-size`和设置`line-height`为 0 以使空白不可见。然后你只需将它们重置为一些值：

```
tbody {
    ...
    line-height: 0;
    font-size: 0;
}
tbody td {
    ...
    line-height: 20px;
    font-size: 14px;
} 
```

[http://jsfiddle.net/W2ACD/1/](http://jsfiddle.net/W2ACD/1/)

*另一种解决方案是*手动删除`tr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:52:43.547

将此添加到您的CSS：

```
table {
  border-collapse: collapse;
}

tbody tr {
   display: table-row;
}

tbody td {
   display: table-cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:57:42.747

Inline-block 元素总是提供 3 个像素的额外边距。您可以为每个水平边减去 3 个像素来解决它：

```
tbody tr {
   display: inline-block;
   margin: 0 -3px;
   vertical-align: middle;
} 
```

# c# - 使用 iTextsharp 创建 PDF 时在页脚添加 pdfpTable

> ID：16145234
> 
> 赞同：0
> 
> 时间：2013-04-22T10:48:09.830
> 
> 标签：c#, asp.net, pdf, pdf-generation, itextsharp

在我的 Asp.net 应用程序中，我必须生成`PDF`，所以我使用免费开源的**Itextsharp 4.0进行了此操作，我将**[其](http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx)用于在生成的 PDF 上设置听者/页脚，

但现在我的问题是我无法在页脚内添加**pdfPtable**，有什么建议如何在页脚处插入表格吗？

代码开启`Page_Load`

```
CreatePDF("Invoice", dtaddproduct, "Prince", "1313", "04/09/2013","4000"); 
```

在我正在调用 **的 CreatePDF方法上**

```
 TwoColumnHeaderFooter PageEventHandler = new TwoColumnHeaderFooter();
  writer.PageEvent = PageEventHandler; 
```

前 `document.Open();`

自定义 HeaderFooter 代码（TwoColumnHeaderFooter）：

```
 public override void OnStartPage(PdfWriter writer, Document document)
    {
    base.OnStartPage(writer, document);

    Rectangle pageSize = document.PageSize;

    if (Title != string.Empty)
    {
    cb.BeginText();
    cb.SetFontAndSize(bf, 15);
    cb.SetRGBColorFill(50, 50, 200);
    cb.SetTextMatrix(pageSize.GetLeft(40), pageSize.GetTop(40));
    cb.ShowText(Title);
    cb.EndText();
    }

    if (HeaderLeft + HeaderRight != string.Empty)
    {
    PdfPTable HeaderTable = new PdfPTable(4);
    HeaderTable.DefaultCell.VerticalAlignment = Element.ALIGN_MIDDLE;
    HeaderTable.TotalWidth = pageSize.Width - 80;
    HeaderTable.SetWidthPercentage(new float[] { 45, 45, 45, 45 }, pageSize);

    PdfPCell HeaderLeftCell = new PdfPCell(new Phrase(8, HeaderLeft, HeaderFont));
    HeaderLeftCell.Padding = 5;
    HeaderLeftCell.PaddingBottom = 8;
    HeaderLeftCell.BorderWidthRight = 1;
    HeaderTable.AddCell(HeaderLeftCell);

    PdfPCell HeaderRightCell = new PdfPCell(new Phrase(8, HeaderRight, HeaderFont));
    HeaderRightCell.HorizontalAlignment = PdfPCell.ALIGN_RIGHT;
    HeaderRightCell.Padding = 5;
    HeaderRightCell.PaddingBottom = 8;
    HeaderRightCell.BorderWidthLeft = 1;
    HeaderTable.AddCell(HeaderRightCell);

    cb.SetRGBColorFill(0, 0, 0);

    PdfPTable table = new PdfPTable(3);
    table.TotalWidth = document.PageSize.Width - document.LeftMargin - document.RightMargin;
    PdfPCell cell = new PdfPCell(new Phrase("Header spanning 3 columns"));
    cell.Colspan = 3;
    cell.HorizontalAlignment = 1; //0=Left, 1=Centre, 2=Right
    table.AddCell(cell);
   string billNumber = HttpContext.Current.Session["billlno"].ToString();
    string billDate = HttpContext.Current.Session["billdate"].ToString();
    string TotalRate = HttpContext.Current.Session["totalhours"].ToString();
    string customerName = HttpContext.Current.Session["customername"].ToString();
    table.AddCell("Date: " + billDate);
    table.AddCell("Bill No: " + billNumber);
    Chunk ck=new Chunk("one\ntwo\nthree\nfour");
     ck.SetBackground(Color.RED);
     Phrase p = new Phrase();
    p.Add(ck);
    PdfPCell cl = new PdfPCell();
    cl.AddElement(p);
    cl.BackgroundColor = new Color(0, 150, 0);
    table.AddCell(cl);
   table.AddCell("Total : "+TotalRate);
    table.AddCell("M/s : "+customerName);
    table.AddCell("Col 2 Row 2");
    table.AddCell("Col 3 Row 2");
    table.AddCell("Col 1 Row 3");
    table.AddCell("Col 2 Row 3");
    table.AddCell("Col 3 Row 3");
    table.WriteSelectedRows(0, -1, document.LeftMargin, document.PageSize.Height - 36, writer.DirectContent);
   }
    }

    public override void OnEndPage(PdfWriter writer, Document document)
    {
    base.OnEndPage(writer, document);

    int pageN = writer.PageNumber;
    String text = "Page " + pageN + " of ";
    float len = bf.GetWidthPoint(text, 8);
    Rectangle pageSize = document.PageSize;
    cb.SetRGBColorFill(100, 100, 100);

    cb.BeginText();
    cb.SetFontAndSize(bf, 8);
    cb.SetTextMatrix(pageSize.GetLeft(40), pageSize.GetBottom(30));
    cb.ShowText(text);
    cb.EndText();

    cb.AddTemplate(template, pageSize.GetLeft(40) + len, pageSize.GetBottom(30));
    cb.BeginText();
    cb.SetFontAndSize(bf, 8);
    cb.ShowTextAligned(PdfContentByte.ALIGN_RIGHT,
    "Printed On " + PrintTime.ToString(),
    pageSize.GetRight(40),
    pageSize.GetBottom(30), 0);
    cb.EndText();
    }

    public override void OnCloseDocument(PdfWriter writer, Document document)
    {
    base.OnCloseDocument(writer, document);
    template.BeginText();
    template.SetFontAndSize(bf, 8);
    template.SetTextMatrix(0, 0);
    template.ShowText("" + (writer.PageNumber - 1));
    template.EndText();
    } 
```

***编辑代码（TwoColumnHeaderFooter）：***

我编辑放置在 OnEndPage 的代码。在这里我遇到了同样的问题，看一下截图，你会发现一个链接**更多信息**正在显示，而不是我也用代码编写的表格。请帮忙

```
public override void OnEndPage(PdfWriter writer, Document document)
    {
        base.OnEndPage(writer, document);

        Rectangle pageSize = document.PageSize;
        if (HeaderLeft + HeaderRight != string.Empty)
        {
            PdfPTable HeaderTable = new PdfPTable(2);
            HeaderTable.DefaultCell.VerticalAlignment = Element.ALIGN_MIDDLE;
            HeaderTable.TotalWidth = pageSize.Width - 80;
            HeaderTable.SetWidthPercentage(new float[] { 45, 45 }, pageSize);
            PdfPCell HeaderLeftCell = new PdfPCell(new Phrase(8, HeaderLeft, HeaderFont));
            HeaderLeftCell.Padding = 5;
            HeaderLeftCell.PaddingBottom = 8;
            HeaderLeftCell.BorderWidthRight = 0;
            HeaderTable.AddCell(HeaderLeftCell);
            PdfPCell HeaderRightCell = new PdfPCell(new Phrase(8, HeaderRight, HeaderFont));
            HeaderRightCell.HorizontalAlignment = PdfPCell.ALIGN_RIGHT;
            HeaderRightCell.Padding = 5;
            HeaderRightCell.PaddingBottom = 8;
            HeaderRightCell.BorderWidthLeft = 0;
            HeaderTable.AddCell(HeaderRightCell);
            cb.SetRGBColorFill(0, 0, 0);
            PdfPTable table = new PdfPTable(3);
            table.TotalWidth = document.PageSize.Width - document.LeftMargin;
            //    table.DefaultCell.Border = PdfPCell.NO_BORDER;
            PdfPCell cell = new PdfPCell(new Phrase("Header spanning 3 columns"));
            cell.Colspan = 3;
            cell.HorizontalAlignment = 1; //0=Left, 1=Centre, 2=Right
            table.AddCell(cell);
            string billNumber = HttpContext.Current.Session["billlno"].ToString();
            string billDate = HttpContext.Current.Session["billdate"].ToString();
            string TotalRate = HttpContext.Current.Session["totalhours"].ToString();
            string customerName = HttpContext.Current.Session["customername"].ToString();
            string address = "Thane west, Street no=30, Mumbai ";
            Font verdana = FontFactory.GetFont("Verdana", 12, Font.BOLD, new Color(76, 177, 255));
            Font subheadfont = FontFactory.GetFont("Verdana", 9, Font.BOLD, new Color(68, 68, 68));
            Font normaltext = FontFactory.GetFont("Verdana", 9, Font.NORMAL, new Color(68, 68, 68));
            Font whiteFont = FontFactory.GetFont("Verdana", 10, Font.NORMAL, new Color(255, 255, 255));
            Chunk ckInvoice = new Chunk("INVOICE", verdana);
            Chunk ck4 = new Chunk("\n");
            Chunk ckcuslbl = new Chunk("CLIENT :", subheadfont);
            Chunk ckaddlbl = new Chunk("ADDRESS :", subheadfont);
            Chunk ckinvlbl = new Chunk("INVOICE #:", subheadfont);
            Chunk ckdatelbl = new Chunk("DATE :", subheadfont);
            Chunk ckcusname = new Chunk(customerName, normaltext);
            Chunk ckaddr = new Chunk(address, normaltext);
            Chunk ckinvoice = new Chunk(billNumber, normaltext);
            Chunk ckdate = new Chunk(billDate, normaltext);
            float[] widthColumnas = new float[] { 25f, 150f };
            PdfPTable nested = new PdfPTable(2);
            nested.DefaultCell.Border = PdfPCell.NO_BORDER;
            nested.SetWidths(widthColumnas);
            nested.AddCell(new Phrase(ckInvoice));
            nested.AddCell(new Phrase(ck3));
            nested.AddCell(new Phrase(ck3));
            nested.AddCell(new Phrase(ck3));
            nested.AddCell(new Phrase(ckcuslbl));
            nested.AddCell(new Phrase(ckcusname));
            nested.AddCell(new Phrase(ckinvlbl));
            nested.AddCell(new Phrase(ckinvoice));
            nested.AddCell(new Phrase(ckdatelbl));
            nested.AddCell(new Phrase(ckdate));
            nested.AddCell(new Phrase(ckaddlbl));
            nested.AddCell(new Phrase(ckaddr));
            PdfPCell nesthousing = new PdfPCell(nested);
            nesthousing.Padding = 0f;
            nesthousing.BorderWidth = 0;
            nesthousing.Colspan = 2;
            table.AddCell(nesthousing);
             Chunk ck = new Chunk("Honda acresone\nThane(W). Mumbai \nStreet rno.20\n022 5023233", whiteFont);
            Paragraph p = new Paragraph();
            p.Add(ck);
            p.Alignment = Element.ALIGN_RIGHT;
            PdfPCell cl = new PdfPCell();
            cl.AddElement(p);
            cl.BackgroundColor = new Color(76, 177, 255);
            cl.FixedHeight = 100.0f;
            cl.HorizontalAlignment = 0;
            cl.PaddingRight = 35;
            cl.PaddingTop = 10;
            cl.VerticalAlignment = Element.ALIGN_TOP;
            table.AddCell(cl);
            table.AddCell("Total : " + TotalRate);
            table.AddCell("M/s : " + customerName);
            table.AddCell("Col 2 Row 2");
            table.AddCell("Col 3 Row 2");
            table.AddCell("Col 1 Row 3");
            table.AddCell("Col 2 Row 3");
            table.AddCell("Col 3 Row 3");
            table.WriteSelectedRows(0, -1, document.LeftMargin, document.PageSize.Height - 36, writer.DirectContent);

        }

        int pageN = writer.PageNumber;
        String text = "Page " + pageN + " of ";
        float len = bf.GetWidthPoint(text, 8);

       // Rectangle pageSize = document.PageSize;
        cb.SetRGBColorFill(100, 100, 100);
        //Create our ColumnText bound to the canvas
        var ct = new ColumnText(cb);
        //Set the dimensions of our "box"
        ct.SetSimpleColumn(pageSize.GetRight(200), pageSize.GetBottom(30), pageSize.Right, pageSize.Bottom);
        //Create a new chunk with our text and font
        var c = new Chunk("More Information", new iTextSharp.text.Font(bf, 10));
        //Set the chunk's action to a remote URL
        c.SetAction(new PdfAction("http://www.google.com"));
        //Add the chunk to the ColumnText
        ct.AddElement(c);
        //Tell the ColumnText to draw itself
        ct.Go();

        PdfPTable table2 = new PdfPTable(3);
        table2.TotalWidth = document.PageSize.Width - document.LeftMargin;
        table2.AddCell("cell Value 1");
        table2.AddCell("Cell Value 2 ");
        table2.WriteSelectedRows(0, -1, document.LeftMargin + 200, document.PageSize.Height - 30, writer.DirectContent);

    } 
```

截屏： ![在此处输入图像描述](https://i.stack.imgur.com/wJ2qF.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:14:35.547

不要在其中添加内容`OnStartPage`，而是在其中设置变量并将它们写入`OnEndPage`. 这在 iText 书中，但除了说这个的新闻组之外，很难找到在线文档。看到[这个](http://itext-general.2136553.n4.nabble.com/Use-PdfPageEventHelper-onStartPage-tp4229511p4230850.html)和[这个](http://itext-general.2136553.n4.nabble.com/Will-it-be-a-problem-if-I-add-content-in-onStartPage-tp2162582p2162583.html)

**编辑**

@Satinder singh，有很多代码要阅读，如果可以的话，请始终尝试将其提炼成仍然中断的最少代码量，并删除任何特定于域的内容，例如会话和全局变量。也就是说，我没有阅读大部分内容，但我想我发现了你的问题：

```
PdfPTable table2 = new PdfPTable(3);
table2.TotalWidth = document.PageSize.Width - document.LeftMargin;
table2.AddCell("cell Value 1");
table2.AddCell("Cell Value 2 ");
table2.WriteSelectedRows(0, -1, document.LeftMargin + 200, document.PageSize.Height - 30, writer.DirectContent); 
```

上面，您正在创建一个三列表格，但您只添加了两个单元格。iTextSharp 对于拥有正确数量的单元格有点挑剔，因此要么将其更改为两列表，要么添加第三个单元格。

# zend-framework2 - Zend框架2从实体获取表实例

> ID：16145235
> 
> 赞同：1
> 
> 时间：2013-04-22T10:48:13.160
> 
> 标签：zend-framework2

我是 zf2 的新手，在适应它的工作方式时遇到了一些困难。

基本上我正在尝试从实体中获取表处理程序的实例

在这个例子中（我们有一个

```
namespace Album\Model;

class Album
{
public $id;
public $artist;
public $title;

    public function exchangeArray($data)
    {
        $this->id     = (isset($data['id'])) ? $data['id'] : null;
        $this->artist = (isset($data['artist'])) ? $data['artist'] : null;
        $this->title  = (isset($data['title'])) ? $data['title'] : null;
    }
} 
```

还有一张桌子逍遥游

```
namespace Album\Model;

use Zend\Db\TableGateway\TableGateway;

class AlbumTable
{
    protected $tableGateway;

    public function __construct(TableGateway $tableGateway)
    {
        $this->tableGateway = $tableGateway;
    }

    public function fetchAll()
    {
        $resultSet = $this->tableGateway->select();
        return $resultSet;
    }

    public function getAlbum($id)
    {
        $id  = (int) $id;
        $rowset = $this->tableGateway->select(array('id' => $id));
        $row = $rowset->current();
        if (!$row) {
            throw new \Exception("Could not find row $id");
        }
        return $row;
    }

     public function saveAlbum(Album $album)
     {
        $data = array(
            'artist' => $album->artist,
            'title'  => $album->title,
        );

       $id = (int)$album->id;
       if ($id == 0) {
          $this->tableGateway->insert($data);
       } else {
            if ($this->getAlbum($id)) {
                $this->tableGateway->update($data, array('id' => $id));
            } else {
                throw new \Exception('Form id does not exist');
            }
        }
    }

    public function deleteAlbum($id)
    {
        $this->tableGateway->delete(array('id' => $id));
    }
} 
```

在使用 ServiceManager 配置表网关并注入到 AlbumTable 之后，我们可以将此功能放在控制器中

```
public function getAlbumTable()
{
    if (!$this->albumTable) {
        $sm = $this->getServiceLocator();
        $this->albumTable = $sm->get('Album\Model\AlbumTable');
    }
    return $this->albumTable;
} 
```

所以我们可以做类似的事情

```
public function indexAction(){
    $albums = $this->getAlbumTable()->fetchAll();
    return array('albums' => $albums);
} 
```

我发现这非常多余，因为这样如果我们有另一个控制器，我们必须再次重新声明 getAlbumTable 函数

**我的问题是**有没有办法从实体专辑中获取表的实例

就像是

```
$album = new Album();
$album->getTable()->findAll(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:16:34.263

您实际上根本不需要此`getAlbumTable()`功能。这主要是为了稍微清理一下代码，但坦率地说：根本不需要。您可以简单地设置自己访问 ServiceManager 的操作：

```
public function overviewAction() { // very minified
    $table = $this->getServiceLocator()->get('Album\Model\AlbumTable');
    return array('albums' => $table->fetchAll());
} 
```

分离它的好处主要是为了在一个请求之间转发到另一个动作。在这种情况下，`ServiceLocator`不会被称为第二次。

您的方法会使代码有点模糊。因为您的模型和映射器之间没有明确的分离。-Model`Album`应该只是一个`Data-Object`

# android - 如何使用保存的实例状态和恢复实例状态？

> ID：16145239
> 
> 赞同：2
> 
> 时间：2013-04-22T10:48:44.210
> 
> 标签：android, android-activity, android-orientation

我有一个带有标签活动的应用程序。该活动包含 2 个活动，其中包含项目列表。我也为每个项目实现了复选框。在方向更改时，我已将选项卡活动设置为面向屏幕的左侧。IE。重新创建选项卡活动和子活动。如果我按下菜单按钮以显示复选框并选中一些项目，并且如果方向发生更改，则选中的项目将不会显示在复选框中。我在使用 SharedPreferences 更改方向时处理了复选框的显示。

我将选中的项目放入数组列表中。数组列表不能通过 SharedPrefereces 进行交易。

我希望选中的项目在方向更改时保持选中状态。

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:56:32.060

您可以通过如下接口将此数组列表存储在主机 Activity 中：[Android 应用上的自定义事件侦听](https://stackoverflow.com/questions/2983250/custom-event-listener-on-android-app)器。但是，如果没有那么多复选框，我会将 arraylist 划分为简单的 kay-value 首选项并将它们存储为共享首选项。

# c# - WPF：是否有 Telerik DataFilter 的免费（开源）替代品？

> ID：16145241
> 
> 赞同：3
> 
> 时间：2013-04-22T10:48:47.637
> 
> 标签：c#, .net, wpf, telerik

现在有谁是 Telerik DataFilter 的免费（如果可能是开源的）替代品吗？或者也许一个教程如何做到这一点？

我真的很想在我的项目中使用这样的过滤器。

[http://www.telerik.com/products/wpf/datafilter.aspx](http://www.telerik.com/products/wpf/datafilter.aspx)

![在此处输入图像描述](https://i.stack.imgur.com/Uqr6I.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:38:16.303

我假设 Telerik 控件使用 a`CollectionViewSource`并使用 Filter 事件来应用数据过滤器。

看看[MSDN 文章](http://msdn.microsoft.com/en-gb/library/system.windows.data.collectionviewsource.aspx)

还可以在这里查看 Bea Stollnitz 博客文章[WPF 的 CollectionViewSource](http://www.zagstudio.com/blog/387#.UXUgtbXvvzE)

我更喜欢她的旧网站，但是嘿嘿。

这可能也值得一看[WPF Extended Datagrid](http://wpfextendeddatagrid.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T02:33:21.210

不，那里没有。一旦产品达到高度成熟度，Telerik 通常会将产品更改为封闭源代码。但是您可以以低于 2,000 美元的价格获得许可证。

# function - 为什么我不能定义一个常量而不是在 Haskell 的函数中使用它？

> ID：16145243
> 
> 赞同：0
> 
> 时间：2013-04-22T10:48:55.327
> 
> 标签：function, haskell, constants

```
 element ::Int->Int->[[Int]]-> Int
    element z s m= m!!z!!s
    maxIndex :: Int
    maxIndex = 6  

    matrix :: [[Int]] -> Int -> Int -> Int -> Int
    matrix a row column maxIndex = if maxIndex < length a then error "Out of range"
         else if (row-1<0 || row-1>maxIndex)||(column-1<0 || column-1>maxIndex) then error "Out of range"
         else element (row-1) (column-1) a 
```

我在哪里犯错？我希望我的程序采用我的 maxIndex 常量，因此用户不必输入 maxIndex 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:05:47.327

`maxIndex`已经是矩阵的词法范围中定义的标识符。就像 element 一样，你不需要做任何特别的事情来使用它，所以你可以说：

```
matrix :: [[Int]] -> Int -> Int -> Int
matrix a row column = ... 
```

# python - 我正在尝试建立一个动态学习的知识管理系统。既然来了

> ID：16145244
> 
> 赞同：0
> 
> 时间：2013-04-22T10:48:56.600
> 
> 标签：python, class, serialization, dynamic, persistence

我正在尝试建立一个知识管理系统，以小方式尝试模仿人类的学习能力。它同时处理它已经知道的概念的新实例，这允许它进一步改进/专门化已知概念的知识库。它还可以学习以前从未遇到过的新概念。当它遇到新概念时，它会与现有概念建立关系。我认为编程语言本身的本机面向对象范式可能是知识表示的理想数据模型。例如，*类*是概念（事物），它具有描述概念的*属性*和描述它（概念/事物）如何交互的*方法。*因此，汽车是一个通用概念，因此被建模为*类*，而我的特定汽车将是该汽车的*对象*实例。它显然受益于面向对象语言在处理类和对象时提供的继承和上/下导航能力。鉴于 Python 强大的动态特性，我计划将它用于此目的。

这种学习系统的几个含义是，

1.  由于系统学习了关于它已经知道的概念（类和对象）的新事物，除了更改属性值之外，它还必须通过添加/删除属性（包括方法）来动态修改类的定义，因此类的静态定义获胜不够。方法特别棘手，因为有与它们相关的代码。

2.  当它遇到新概念时，它必须动态地创建新类。

3.  每次系统启动时，它都应该从加载到系统中的所有先验知识开始，原因很明显。在这种情况下，它意味着所有知识类（包括动态创建的）的所有“当前”版本（包括任何添加/删除或更改的属性/值/方法），即需要一个相当全面的序列化/持久性机制。

在会话结束时（拆卸），它必须查看“所有”知识类和对象并将它们序列化。有些可能是新定义的，有些可能已经改变了它们的属性甚至方法（代码）。需要一种方法来获取所有这些对象/类，它们的最新定义并将它们序列化以实现持久性。

下次系统运行时，在初始化时，需要读取并执行所有的类定义，恢复对象实例的状态。

我环顾四周，发现了一些零碎的解决方案，例如 pickle、json、ZODB、inspect 模块等，但似乎没有一个能够序列化动态类，包括方法的代码。

在这里 Python 提出了一个类似的问题[：保存和加载类定义](https://stackoverflow.com/questions/4574053/python-saving-and-loading-a-class-definition) ，但大多数受访者认为没有任何令人信服的用例。

任何线索将不胜感激。

# java - 具有不同日历系统的 Java 日期选择器

> ID：16145246
> 
> 赞同：0
> 
> 时间：2013-04-22T10:48:59.863
> 
> 标签：java, swing, user-interface, calendar, datepicker

是否有能够使用公历以外的日历系统的 J2SE 日期选择器（例如 JCalendar 或 JXDatePicker）？
例如[ICU4J](http://icu-project.org/apiref/icu4j/)库有支持不同日历系统（[公历](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/GregorianCalendar.html)、[希伯来](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/HebrewCalendar.html)、[贾拉利](http://sourceforge.net/projects/persiancalendar/)、[伊斯兰](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/IslamicCalendar.html)、[中文](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/ChineseCalendar.html)、[日语……）的](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/JapaneseCalendar.html)[日历](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/Calendar.html)类，是否有任何日期选择器 GUI（例如 Swing 组件）可以使用它们来创建显示日历？

谢谢

# rethinkdb - 如何将用户名和密码添加到 Rethinkdb 连接？

> ID：16145249
> 
> 赞同：8
> 
> 时间：2013-04-22T10:49:10.553
> 
> 标签：rethinkdb

如何在`rethinkdb`连接中添加用户名和密码？

在我的网络中有 100 多台机器。其中只有 2 台机器在我的控制之下。2个中，1个是虚拟机，1个是物理机。

如果我`rethinkdb`使用以下命令在虚拟机上运行

```
rethinkdb --bind all 
```

现在 my`rethinkdb http:// ip:8080`暴露给网络中的所有机器。如何设置用户名和密码来限制他人？

如果我`localhost:8080`在虚拟机中使用，管理 HTTP 连接是无用的，因为它既不能在物理机上也不能在虚拟机上访问。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T15:21:14.217

RethinkDB 尚未提供身份验证系统，请参阅[https://github.com/rethinkdb/rethinkdb/issues/266](https://github.com/rethinkdb/rethinkdb/issues/266)

最好的方法可能是不要使用 --bind all 标志启动 rethinkdb。

您仍然可以使用 ssh 隧道访问 Web 界面。如果你在linux上，命令是

```
ssh -D <PORT> <LOGIN>@<MACHINE> 
```

然后设置您的浏览器以使用 ssh 隧道。在 chrome 中，它位于设置 > 代理设置中，将 socks 主机和端口设置为您之前使用的。

然后，如果您在浏览器中点击 machine:8080，您应该能够看到管理 http 界面。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T20:30:18.907

**创建 ssh 隧道并访问其他机器的 localhost 的过程：**

我的虚拟机是 linux，我的物理机是 Mac

step1：访问虚拟机并启动rethinkdb

```
user@mac:~# ssh user@linux
user@linux:~# rethinkdb 
```

step2：创建SSH隧道访问linux机器的locahost:8080

```
user@mac:~# ssh -L 9000:localhost:8080 user@linux
user@linux:~# 
```

step3：打开浏览器并指向

```
http://localhost:9000 
```

而已！您无需更改任何浏览器设置！

资源：

[http://www.youtube.com/watch?feature=player_embedded&v=VdkLejEN3So](http://www.youtube.com/watch?feature=player_embedded&v=VdkLejEN3So)

# jquery - 从 jquery 中具有相同节点名称的子 XML 节点获取值

> ID：16145250
> 
> 赞同：1
> 
> 时间：2013-04-22T10:49:18.477
> 
> 标签：jquery, html, xml, xml-parsing

我低于 XML

```
<Root>
<field/>
<field/>
<field>
    <label>
        Have you invested before
    </label>
    <value>
        No
    </value>
    <label>
        Are you looking to Invest in the next 6 months
    </label>
    <value>
        Maybe
    </value>
</field>
<field>
    <label>
        What Investments are you interested in
    </label>
    <value>
        Carbon Credits, Green Investments
    </value>
</field>
<field>
    <label>
        How much are you looking to invest
    </label>
    <value>
        £250,000+
    </value>
</field> 
```

从这里我需要`HTML`像下面这样渲染它。

```
Have you invested before: No
Are you looking to invest in the next 6 months: Maybe
What investments are you interested in: Carbon Credits, Green Investments
How much are you looking to invest: £250,000+ 
```

目前它的输出是：

```
:
:     
Have you invested beforeAre you looking to Invest in the next 6 months: YesMaybe
What Investments are you interested in:  Carbon Credits, Green Investments
How much are you looking to invest:    £250,000+ 
```

我在下面使用，`jquery`但它没有产生我期望的输出。

```
$(data).find('field').each(function (index, element) {
        debugger;
        //if (field.find('label').length > 0) {
        var field = $(element)
        if (field.find('label').length > 1) {

            var confirmationNumbers = $(field).find("label").map(function () {
                //debugger;
                list.append('<dt>' + label + ': </dt>').append('<dd>' + value + '</dd>');
                return $(this).text();
            });                
            //var label = field.find('label').text()
            //var value = field.find('value').text()
            //list.append('<dt>' + label + ': </dt>').append('<dd>' + value + '</dd>');
        }
        else {
            var label = field.find('label').text()
            var value = field.find('value').text()
            list.append('<dt>' + label + ': </dt>').append('<dd>' + value + '</dd>');
        }
        //}            
    }); 
```

我做错了什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:37:28.210

尝试

```
$(data).find('field label').each(function(){
    var $this = $(this);
    list.append('<dt>' + $this.text() + ': </dt>').append('<dd>' + $this.text().val() + '</dd>');
}) 
```

在 IE 上试试这个

```
$(data).find('field label').each(function() {
    var $this = $(this);

    list.append('<div><span>' + $this.text() + '</span><span>'
            + $this.text().val() + '</span></div>');
}) 
```

# libgdx - 在 libgdx 中使用 Maps API 和地理位置

> ID：16145254
> 
> 赞同：1
> 
> 时间：2013-04-22T10:49:27.670
> 
> 标签：libgdx

有没有办法以某种方式嵌入或实现地理定位（通过 GPS 或任何方法）并在使用 libgdx 的应用程序中使用来自 Google Maps 或 OSM 的地图？我找不到与此相关的 API 或文档，无法使用真实世界地图和增强现实来实现应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-07T00:16:18.063

我能够将 Google Maps V2 Api 与 libgdx 一起使用。您可以使用标记，获取位置并将其显示在 Scene2d 标签中，也可以显示或隐藏地图。

我写了示例代码[Github](https://github.com/Tiarsoft/GoogleMapsLibgdx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T18:53:42.933

迟到总比不到好？

我已经开始使用开放的街道地图为 Libgd 实现这样的扩展。它目前确实加载、缓存和渲染地图图块。您还可以缩放和平移地图。在未来的更新中搜索地理位置也将成为可能。

Github：[https ://github.com/aspic/libgdx-maps](https://github.com/aspic/libgdx-maps)

# java - 如何在 Java 中解决 NoSerializableException

> ID：16145258
> 
> 赞同：-3
> 
> 时间：2013-04-22T10:49:36.227
> 
> 标签：java, serialization

我正在尝试对一个属于 of 的对象`AnnotationList`进行序列`ArrayList`化`AnnotationData`（也是由我自己定义的并且是可序列化的）。

总是有错误：

```
java.io.NotSerializableException: javax.swing.plaf.basic.BasicListUI$Handler
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.ArrayList.writeObject(Unknown Source) 
```

有没有人对如何解决这个问题有想法？谢谢。

```
public class AnnotationList extends ArrayList implements ListModel, Serializable {

    protected Object source;
    ArrayList listeners = new ArrayList();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:53:56.263

您收到此错误是因为您尝试序列化的对象图中的某些内容是....不可序列化...所以要么确保图中的所有对象都是可序列化的（包括您自己的类中的所有字段），或者标记不可序列化的字段为`transient`. 如果它又具有非可序列化的字段，则仅使`AnnotationData`可序列化是不够的`Serializable`。

# opengl - OpenSceneGraph 是否使用核心配置文件？

> ID：16145259
> 
> 赞同：0
> 
> 时间：2013-04-22T10:49:36.930
> 
> 标签：opengl, openscenegraph

> ..以及扩展我们对桌面/工作站 OpenGL 的支持，支持 OpenGL 3.x 和 OpenGL 4.x 以及相关的前沿扩展

我想知道是否可以使用核心配置文件，或者它们是否依赖于兼容性配置文件？

> 使用 OpenGL 核心配置文件编写的应用程序将比相同的应用程序运行得更快，但修改为使用兼容性配置文件，即使它只使用核心配置文件 OpenGL 中可用的功能。*第六名*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T15:16:46.030

似乎 OSG 不支持核心配置文件，请参阅[此](http://forum.openscenegraph.org/viewtopic.php?p=53748#53748)

# c# - 没有收件人、抄送、密件抄送选项的 Outlook 全球通讯簿

> ID：16145263
> 
> 赞同：0
> 
> 时间：2013-04-22T10:49:45.010
> 
> 标签：c#, outlook

![Outlook 通讯录](https://i.stack.imgur.com/7IruZ.jpg)

我正在开发一个应用程序，应该从 Outlook 通讯簿中检索文本字段的用户名。所以一次只能选择一个名字（不应该有To，Cc，Bcc选项来选择多个收件人）。我已经使用 MAPI Interop 为 Outlook 2003 完成了此操作。

如何在 Outlook 2007 和 10 中实现类似的通讯录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:43:34.937

使用类似下面的东西：

```
set SelectNames = Application.Session.GetSelectNamesDialog
SelectNames.SetDefaultDisplayMode(olDefaultSingleName)
SelectNames.Display 
```

# delphi - 从 DLL 访问 VCL 表单

> ID：16145264
> 
> 赞同：0
> 
> 时间：2013-04-22T10:49:49.070
> 
> 标签：delphi, dll, delphi-xe2, vcl

我有两个进程 A 和 B。进程 A 是一个包含表单的 VCL 表单应用程序`TMainForm`。进程 B 是一个 DLL，我想通过它远程控制这个表单。类似于（在过程B中）的东西：

```
MainForm := TMainForm.Create (nil);
MainForm.Handle := FindWindow ('TMainForm', 'MainForm Title');  // does not compile

// These two lines should remote-control the form in process A
MainForm.Edit1.Text := 'Test';
MainForm.Button1.Click; 
```

如果以及如何做到这一点有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:53:30.590

如果你真的有两个独立的进程，那么你需要进程间通信（IPC）。例如，您可以将进程 A 变成一个进程外 COM 服务器，由进程 B 以 Office 自动化的方式使用。这是许多选项之一，但它们都需要 IPC。

但是，这听起来有点像您在同一个进程中有一个可执行文件和一个 DLL。在这种情况下，您有两个独立的 VCL 实例。这意味着您不能`TForm`在两个模块之间传递对象或任何其他 VCL 对象。事实上，你不能在这两个模块之间传递任何类，因为你不能在模块之间共享类。`TObject`模块 A 中的与模块 B 中的不同`TObject`。

您的主要选择是：

1.  使用包而不是 DLL。
2.  为您的互操作使用接口，因为这些可以在两个模块之间安全地传递。

# jquery - 滚动回网页顶部时触发功能的问题

> ID：16145267
> 
> 赞同：1
> 
> 时间：2013-04-22T10:49:57.743
> 
> 标签：jquery, css, scroll, jquery-animate

我正在研究访问者开始滚动后“出现”的固定位置顶部导航栏。（在背景变化中出现，徽标调整大小和边框出现，使其看起来与网页的其余部分分开，导航链接本身已经在页面顶部可见）。

使用 jQuery 的 scroll() 和 animate() 显示部分非常简单。

```
 $(window).scroll(function(){
     $('.logo img').animate({"height": "65px"}, 500);
     $('#header').css({"border": "1px solid #999", "padding-top": "1px"});
 }); 
```

但是让我难过的部分是在访问者滚动回顶部时撤消更改，以便导航栏重新融入网页。

我添加了一个似乎工作得很好的位置函数......但是...... img 调整大小在返回顶部时会延迟，有时会延迟一两分钟。边框和填充更改在返回顶部时立即生效，只是延迟调整 img 大小。

```
 $(window).scroll(function(){
     if ($(this).scrollTop()>0) {
          $('.logo img').animate({"height": "65px"}, 300);
          $('#header').css({"border": "1px solid #999", "padding-top": "1px"});
     } else {
          $('.logo img').animate({"height": "114px"}, 300);
          $('#header').css({"border": "1px solid #fff", "padding-top": "8px"})
     }
 }); 
```

如果我将两个 img 函数都更改为 css() 它可以工作，但是我失去了动画提供的图像的平滑收缩。

那里的专家有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:52:00.040

尝试在 animate 函数后面添加 .stop()

```
$('.logo img').stop().animate({"height": "65px"}, 300); 
```

# c# - 设置 DataGridViewComboBoxCell 的颜色？

> ID：16145269
> 
> 赞同：0
> 
> 时间：2013-04-22T10:50:10.610
> 
> 标签：c#, .net, c#-4.0

我使用了这个代码片段

```
// Second Column: Hand to use
DataGridViewComboBoxCell handToUseCell = (DataGridViewComboBoxCell)this._robotSelectionDataGridView[Common.SECOND_COLUMN, currentRow];
handToUseCell.Items.Clear();
foreach (Hand hand in robotInfo.Hands)
{
  handToUseCell.Items.Add(hand.Name.ToString());
}
handToUseCell.DisplayStyle = (handToUseCell.Items.Count > 1) ? DataGridViewComboBoxDisplayStyle.ComboBox :
                                                    DataGridViewComboBoxDisplayStyle.Nothing;
handToUseCell.Value = handToUseCell.Items[0];
handToUseCell.Style.BackColor = Color.DimGray; 
```

但背面颜色没有改变。当我设置 cell.style.backcolor 时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:03:28.367

尝试以下

`handToUseCell.DefaultCellStyle.BackColor = Color.Red;`

或者

`handToUseCell.CellStyle.BackColor = Color.Red;`

让我知道结果..希望它有所帮助。

# sql - 获取和传递搜索到存储过程

> ID：16145272
> 
> 赞同：0
> 
> 时间：2013-04-22T10:50:14.940
> 
> 标签：sql, vb.net

美好的一天，我找到了一些接近我想要的示例，例如[执行 SQL 存储过程并处理结果，](https://stackoverflow.com/questions/5991877/vb-net-execute-a-sql-stored-procedure-and-process-the-results)但是我只是在努力寻找树木的树木......

我有一个 SQL 数据库和一个存储过程，其中有一个变量 @ModuleName

我希望用户在文本框中键入文本并单击搜索。单击搜索时，输入到搜索框中的单词将传递到 @ModuleName 即 Searchtext.txt = @ModuleName

然后将其传递给 StoredProcedure 并用于为名为 GridView1 的 Gridview 创建 SQL。

我尝试了很多技术，但显然缺少一些东西

存储过程

```
ALTER PROCEDURE [dbo].[spModuleID]

@ModuleName char(50)

AS
 BEGIN
 select * from dbo.ModuleID where [ModuleName] = @ModuleName ORDER BY [ModuleName]

 END 
```

Gridview1 像这样链接到 SQL ..

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource1" AllowPaging="True" AllowSorting="True" 
            DataKeyNames="ModuleID">
            <Columns>
                <asp:BoundField DataField="ModuleID" HeaderText="ModuleID" ReadOnly="True" 
                    SortExpression="ModuleID" />
                <asp:BoundField DataField="ModuleName" HeaderText="ModuleName" 
                    SortExpression="ModuleName" />
            </Columns>
        </asp:GridView> 
```

现在，我在 searhc 按钮下有一些代码，希望它正朝着正确的方向前进……

```
Protected Sub Search(sender As Object, e As System.EventArgs) Handles btnSearch.Click

        Dim myds As New DataSet1

        MyConnection.ConnectionString = LearnConnectionString
        Dim disp As New SqlDataAdapter("spModuleName", MyConnection)
        disp.Fill(myds, "dev_display")

        'Below wants to be a datagrid

        txtDisplay.Text = myds.Tables("dev_display").Rows(0).Item("knownsoft")
        myds.Dispose()

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:31:41.063

```
Imports System.Data.OleDb

Dim cmd as new Oledb.OleDbCommand
Dim connection As New SqlConnection("Connection String")

cmd.Connection = connection
cmd.CommandText = "SP_NAME"
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.AddWithValue("@PARAMETER_NAME", "PARAMETER_VALUE")

Dim adapter As New SqlDataAdapter(CMD)

 Dim DS as DataSet    
 adapter.Fill(DS)
 connection.Close() 
ds.Dispose()
ds = Nothing 
```

# c# - 使用正则表达式解析字符串

> ID：16145279
> 
> 赞同：0
> 
> 时间：2013-04-22T10:50:45.067
> 
> 标签：c#

我有这种字符串`File type: Wireshark - pcapng` ，所以我想要的是如果我的字符串以`File type:`take 和 parse开头`Wireshark - pcapng`

这是我尝试过的：

```
var myString = @":\s*(.*?)\s* "; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T10:54:37.757

代替正则表达式，使用[`string.StartsWith`](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)方法，例如：

```
if(str.StartsWith("File type:"))
   Console.WriteLine(str.Substring("File type:".Length)); 
```

你会得到：

```
 Wireshark - pcapng 
```

如果您想从结果字符串中删除前导/尾随空格，请使用[`string.Trim`](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)如下：

```
Console.WriteLine(str.Substring("File type:".Length).Trim()); 
```

或者，如果您只是想摆脱前导空格，请使用[string.TrimStart](http://msdn.microsoft.com/en-us/library/system.string.trimstart.aspx)，例如：

```
Console.WriteLine(str.Substring("File type:".Length).TrimStart(' ')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:56:10.247

你为什么不`File type:`从你的字符串中删除：

```
str = str.Replace("File type: ",string.Empty); 
```

或者您可以使用以下命令检查字符串是否以开头`File type:`并删除该部分`string.Remove()`：

```
if(str.StartsWith("File type: "){
    str=str.Remove(11); //length of "File Type: "
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:53:20.293

这应该可以解决问题：

```
(?<=^File type: ).*$ 
```

所以...

```
var match = Regex.Match("File type: Wireshark - pcapng", @"(?<=^File type: ).*$");
if(match.Success)
{
    var val = match.Value;
    Console.WriteLine(val);
} 
```

# c# - Autofixture：如何以声明方式表达以下代码？

> ID：16145284
> 
> 赞同：3
> 
> 时间：2013-04-22T10:50:50.083
> 
> 标签：c#, xunit, autofixture

我无法以声明性方式表达以下代码：

```
[Theory]
[InlineData(@"-o=C:\Temp\someFile -p=1")]
[InlineData(@"-p=1 -o=C:\Temp\someFile")]
public void ParseMissingParameterShouldReturnCorrectResult(
    string argsString
)
{
    .....
    var fixture = new Fixture();
    fixture.Register<IFoo>(fixture.Create<Foo>);
    fixture.Register<IBar>(fixture.Create<Bar>);

    var sut = fixture.Create<SomeClass>();
    .....
} 
```

在我的生产代码中，我有类似的东西：

```
new SomeClass(new Foo(new Bar)) 
```

SomeClass 的构造函数定义为：

```
public SomeClass(IFoo foo) 
```

TIA,

大卫

编辑：

SomeClass 看起来像

```
public class SomeClass : IQux
{
    private readonly IFoo _foo;

    public SomeClass(IFoo foo)
    {       
        _foo= foo;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:22:30.963

您可以将[SUT](http://xunitpatterns.com/SUT.html)（即`SomeClass`类型）声明为测试方法的参数：

```
[Theory]
[InlineAutoMockData(@"-o=C:\Temp\someFile -p=1")]
[InlineAutoMockData(@"-p=1 -o=C:\Temp\someFile")]
public void ParseMissingParameterShouldReturnCorrectResult(
    string argsString,
    SomeClass sut)
{
} 
```

创建`[InlineAutoMockData]`属性的一种简单方法是：

```
internal class InlineAutoMockDataAttribute : CompositeDataAttribute
{
    internal InlineAutoMockDataAttribute (params object[] values)
        : base(
            new InlineDataAttribute(values),
            new AutoDataAttribute(
                new Fixture().Customize(
                    new CompositeCustomization(
                        new AutoMoqCustomization()))))
    {
    }
} 
```

* * *

**注意**：

如果您还需要设置期望`IFoo`或`IBar`模拟实例，您可以*冻结*它们，以便在`Frozen`实例中传递相同的`SomeClass`实例：

```
[Theory]
[InlineAutoMockData(@"-o=C:\Temp\someFile -p=1")]
[InlineAutoMockData(@"-p=1 -o=C:\Temp\someFile")]
public void ParseMissingParameterShouldReturnCorrectResult2(
    string argsString,
    [Frozen]Mock<IFoo> mock,
    [Frozen]Mock<IBar> stub,
    SomeClass sut)
{
} 
```

# html - 我的 Bootstrap 弹出窗口未在加载的 Wordpress 摘录中显示 html

> ID：16145285
> 
> 赞同：0
> 
> 时间：2013-04-22T10:50:51.413
> 
> 标签：html, wordpress, twitter-bootstrap, popover

我有一个带有这个 javascript 的 Bootstrap 弹出框和 Bootstrap Clickover 扩展：

```
{$("#mypopover").clickover({
placement:'bottom', 
html : true
})
}); 
```

html如下：

```
<a href="#" id="mypopover" rel="popover" data-content="<?php echo  pippin_excerpt_by_id(632);?><a href='<?php echo get_permalink( 632); ?>'>READ MORE</a>">Click to open popover</a> 
```

问题是 READ MORE 链接工作正常，但一些弹出框在其各自的 wordpress 摘录中有额外的 html，这会破坏弹出框。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:36:51.327

您可能必须在 data 属性中对 html 进行编码：

`echo htmlspecialchars( pippin_excerpt_by_id( 632 ) )`

另外，我会修改`pippin_excerpt_by_id`函数以附加阅读更多链接。

# android - 我可以在 SimpleAdapter 上添加标题吗？

> ID：16145286
> 
> 赞同：1
> 
> 时间：2013-04-22T10:50:53.703
> 
> 标签：android, listview

我在 android 中做了一些项目并使用 SimpleAdapter。我的项目工作正常，但我想用标题自定义我的列表视图。这是我项目中的一些代码

**沃茨活动**

```
public class WatesActivity extends ListActivity {
static final String URL = "http://data.bmkg.go.id/propinsi_15_2.xml";
static final String KEY_ITEM = "Cuaca";
static final String KEY_ID = "Isi";
static final String KEY_ROW = "Row";
static final String KEY_KOTA = "Kota";
static final String KEY_LINTANG = "Lintang";
static final String KEY_BUJUR = "Bujur";
static final String KEY_CUACA = "Cuaca";
static final String KEY_SUHUMIN = "SuhuMin";
static final String KEY_SUHUMAX = "SuhuMax";
static final String KEY_KELEMBAPANMIN = "KelembapanMin";
static final String KEY_KELEMBAPANMAX = "KelembapanMax";
static final String KEY_KECEPATANANGIN = "KecepatanAngin";
static final String KEY_ARAHANGIN = "ArahAngin";
private ProgressDialog pDialog;

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.kabupaten);

    new AmbilData().execute();
}

class AmbilData extends AsyncTask<String, String, String> {
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(WatesActivity.this);
        pDialog.setMessage("Mohon Tunggu Beberapa Saat...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);

        NodeList row_nodes = doc.getElementsByTagName(KEY_ROW);
        int row_id = 0;
        for (int i = row_id; i < row_nodes.getLength();) {
            // org.w3c.dom.Element row_element = (org.w3c.dom.Element)
            // row_nodes.item(i);

            HashMap<String, String> map = new HashMap<String, String>();

            Element e = (Element) row_nodes.item(i);

            map.put(KEY_KOTA, parser.getValue(e, KEY_KOTA));
            map.put(KEY_LINTANG, parser.getValue(e, KEY_LINTANG));
            map.put(KEY_BUJUR, parser.getValue(e, KEY_BUJUR));
            map.put(KEY_CUACA, parser.getValue(e, KEY_CUACA));
            map.put(KEY_SUHUMIN, parser.getValue(e, KEY_SUHUMIN));
            map.put(KEY_SUHUMAX, parser.getValue(e, KEY_SUHUMAX));
            map.put(KEY_KELEMBAPANMIN,
                    parser.getValue(e, KEY_KELEMBAPANMIN));
            map.put(KEY_KELEMBAPANMAX,
                    parser.getValue(e, KEY_KELEMBAPANMAX));
            map.put(KEY_KECEPATANANGIN,
                    parser.getValue(e, KEY_KECEPATANANGIN));
            map.put(KEY_ARAHANGIN, parser.getValue(e, KEY_ARAHANGIN));

            menuItems.add(map);
            break;
        }
        return null;
    }

    protected void onPostExecute(String file_url) {
        // TODO Auto-generated method stub
        pDialog.dismiss();
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                ListAdapter adapter = new SimpleAdapter(WatesActivity.this,
                        menuItems, R.layout.listkabupaten, new String[] {
                                KEY_KOTA, KEY_CUACA, KEY_LINTANG,
                                KEY_BUJUR, KEY_SUHUMIN, KEY_SUHUMAX,
                                KEY_KELEMBAPANMIN, KEY_KELEMBAPANMAX,
                                KEY_KECEPATANANGIN, KEY_ARAHANGIN },
                        new int[] { R.id.kota, R.id.cuaca, R.id.lintang,
                                R.id.bujur, R.id.suhumin, R.id.suhumax,
                                R.id.kelembapanmin, R.id.kelembapanmax,
                                R.id.kecepatanangin, R.id.arahangin });
                setListAdapter(adapter);
            }
        });
    }
}
} 
```

**卡布帕滕.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- Kota Label -->

    <TextView
        android:id="@+id/kota"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="2dip"
        android:paddingTop="6dip"
        android:text="TextView"
        android:textColor="#43bd00"
        android:textSize="16sp"
        android:textStyle="bold" />

    <!-- Linear layout for Cuaca -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- Cuaca Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Cuaca : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/cuaca"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for Lintang -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- Lintang Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Lintang : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/lintang"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for Bujur -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- Bujur Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Bujur : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/bujur"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for SuhuMin -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- SuhuMin Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="SuhuMin : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/suhumin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for SuhuMax -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- SuhuMax Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="SuhuMax : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/suhumax"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for KelembapanMin -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- KelembapanMin Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="KelembapanMin : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/kelembapanmin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for KelembapanMax -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- KelembapanMax Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="KelembapanMax : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/kelembapanmax"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for Kecepatan Angin -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- Kecepatan Angin Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Kecepatan Angin : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/kecepatanangin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>

    <!-- Linear layout for Arah Angin -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- Arah Angin Label -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Arah Angin : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/arahangin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" />
    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

我想要做的是将标题添加到 ListView 中，我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:52:11.067

你应该看看`ListView.addHeaderView(...)`

[https://developer.android.com/reference/android/widget/ListView.html](https://developer.android.com/reference/android/widget/ListView.html)

# c++ - 如何将 int 转换为 ASCII char C++

> ID：16145293
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:15.130
> 
> 标签：c++, hex, type-conversion, ascii, arrays

我必须将 int 转换为 ASCII 字符串。基本上，我想要这个：

```
 int iTest = 128;
    char ca[3];
??? --> **SOLUTION :** sprintf(ca,"%d",iTest); 
```

结果：

```
 ca[0] = 0x31;--> Hexcode of '1'
 ca[1] = 0x32;
 ca[2] = 0x38; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:56:12.293

使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)和[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)：

```
#include <string>
#include <iostream>

using namespace std;

...

int iTest = 128;

string ca = to_string(iTest);

for (int i = 0; i < ca.size(); i++)
{
    cout << hex << "0x" << (int) ca[i] << endl;
} 
```

结果：

```
0x31
0x32
0x38 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:55:05.117

```
for each digit
    ca[ i ] = digit + '0'; 
```

笔记：

*   注意数字的不同长度
*   `ca`根据数字的“长度”（位数）动态分配
*   对每个数字进行迭代可以通过使用`%`和`/`运算符来进行模和除法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:55:15.570

使用模和除法运算符得到每个数字，然后打印每个数字加`'0'`。

# php - 如何为多个错误触发一封邮件

> ID：16145294
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:18.110
> 
> 标签：php, mysql, email, error-handling

我有一个如下的 MYSQL 表，如果在程序执行期间发生任何错误，它会记录数据库错误。这部分工作正常。

![在此处输入图像描述](https://i.stack.imgur.com/a4O9L.png)

现在我打算通过在发生数据库错误时触发邮件来扩展功能。所以我可以尽快参加。

我遇到的问题是，如果发生一个错误，我会收到一封邮件。如果发生 100 个错误，我会收到 100 封无用的邮件。尽管一个小时内发生了多少错误，我想要做的是收到一封邮件。现在我只是在向表中插入数据时使用 PHP 邮件函数发送邮件。

鉴于我无法编写一个每小时向我发送一次邮件的 cron 作业，因为我想在发生错误时立即获取邮件。

我怎样才能完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:04:14.360

您也可以在 DB 表中设置一个标志，用于存储该错误是否已通过电子邮件报告以及错误发生的日期时间。决定您想要获取电子邮件报告的时间，例如每小时整点。然后，当您发现错误并将其插入数据库时​​，检查是否有任何未解决的错误要报告，以及它们的时间时间戳是否超过了您确定的时间，如果是，则将它们全部分组并通过电子邮件发送报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T05:04:25.983

我所做的是

发生数据库错误意味着它可能是一个简单的错误或致命的错误，例如 MySQL 服务器已消失。那时尝试访问数据库将毫无用处。

*   即时创建错误日志文件。
*   如果文件大小为 0 字节/不存在，我会触发一封电子邮件，然后将错误记录到新创建的文件中。
*   如果发生更多错误，我会将它们全部记录下来。
*   处理错误后，我清除/删除文件。
*   下次发生错误时，我再次收到邮件。

我知道它具有删除文件的唯一手动工作。但是你用这个方法解决了很多问题。

```
 /**
     * THIS FUNCTION LOGS THE ERRORS TO THE FILE
     * @param  string  $error_details Details of The Error
     * @return bool            
     */
    function saveErrorToFile($error_details){

        $file_path = JPATH_COMPONENT_ADMINISTRATOR.DS.'helpers'.DS.'error_log.txt';
        if(!JFile::exists($file_path ))
        {
            //create the file and write the error
            JFile::write($file_path,$error_details);

            //send the mail with the error
            $mail =& JFactory::getMailer();
            $mail->setSender(array('support@abc.com', 'support'));
            $mail->setSubject('DATABASE ERROR');
            $mail->setBody($error_details);
            $mail->IsHTML(true);
            $mail->addRecipient('dasun@abc.com');
            $mail->Send();

        }
        else
        {
            //read the existing content of the file and append with the new error
            $file_content = JFile::read($file_path);
            $file_content = $file_content."\n\n".$error_details;
            JFile::write($file_path,$file_content);
        }

        return true;  
    } 
```

# java - Java 服务器，处理 Json 文件

> ID：16145295
> 
> 赞同：2
> 
> 时间：2013-04-22T10:51:18.070
> 
> 标签：java, json, tomcat, httpwebrequest

我有一个移动应用程序，它发出 http post 请求并发送一个 json 文件。

我想在java中创建一个服务器，它唯一要做的就是获取这个json文件并将其存储在我的数据库中。问题是我从来没有写过任何服务器端代码，也不知道该怎么做。

我如何创建一个 java 服务器，它所做的只是等待一个 json 文件到达然后处理它（比如将它存储到我的数据库等..）

账单

# c# - 每次创建具有不同名称的文件夹

> ID：16145297
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:22.533
> 
> 标签：c#, asp.net, multithreading, web-applications, directory

我有一个创建文件夹的 asp.net c# Web 应用程序。Web 应用程序包括一些按钮来更改此文件夹中的某事。Web 应用程序托管在 2008 服务器上。现在我想让它成为多用户应用程序。不同的用户应该使用不同的文件夹名称运行此 Web 应用程序，并且他们可以同时更改文件夹上的某些内容。如何管理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:58:56.747

使用[Path.GetRandomFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename.aspx)：

```
var folderName = Path.Combine(Path.GetTempPath(), Path.GetRandomFileName());
Directory.CreateDirectory(folderName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:56:14.413

您可以根据当前用户的 ID 和日期时间戳生成文件夹名称。生成的格式将是“hsimpson_2013-11-23_12-23-12-AM”或类似的东西。这样，您始终可以获取文件夹列表，并仅按名称作为字符串的一部分存在的用户进行排序，或者根据日期/时间搜索文件夹。

# jquery - 只针对一个 div .on() 悬停，而不是全部 - Jquery

> ID：16145301
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:31.413
> 
> 标签：jquery

我目前正在使用代码将图像的 mouseenter 上的不透明度设置为 1，然后在 mouseleave 上再次设置为 0。它不是显示一个图像，而是在悬停时显示所有图像。

我试过使用`(this)`而不是，`(.project-hover img)`所以它只影响那个特定的 div，但我需要定位`(.project-hover img)`而不是`.span4`启动函数的目标。

我将如何实现这一目标？

```
$(document).ready(function() {
    $(".span4").on("mouseenter", function() {
        $('.project-hover img').stop();//halts previous animation if it's running
        $('.project-hover img').animate({
            opacity: 1
        });
    }).on("mouseleave", function() {
        $('.project-hover img').stop();
        $('.project-hover img').animate({
            opacity: 0
        });
    });
}); 
```

### HTML

```
<div class="span4">
    <div class="wrap-title">
        <div class="position">
            <div class="title"><a href="<?php echo get_permalink(); ?>"><?php the_title();?></a></div>
            <div class="tags"><?php echo $cats; ?> </div>
        </div>
    </div>  
    <div class="project-hover"><img src="<?php echo catch_that_image(); ?>">    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:52:58.953

使用`find()`见文档... [http://api.jquery.com/find/](http://api.jquery.com/find/)

```
$(document).ready(function() {
    $(".span4").on("mouseenter", function() {
        $(this).find('.project-hover img').stop();//halts previous animation if it's running
        $(this).find('.project-hover img').animate({
            opacity: 1
        });
    }).on("mouseleave", function() {
        $(this).find('.project-hover img').stop();
        $(this).find('.project-hover img').animate({
           opacity: 0
        });
    });
}); 
```

* * *

**更新：**

您还应该链接您的方法以提高效率，并且您可能希望传递`true, true`给您的[`.stop()`](http://api.jquery.com/stop/)方法。（以防止队列错误）

```
 $(document).ready(function() {
        $(".span4").on("mouseenter", function() {
            $(this).find('.project-hover img').stop(true, true).animate({
                opacity: 1
            });
        }).on("mouseleave", function() {
            $(this).find('.project-hover img').stop(true, true).animate({
               opacity: 0
            });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:52:48.633

```
$(".span4").on("mouseenter", function() {
        $('.project-hover img', $(this)).stop();//halts previous animation if it's running
        $('.project-hover img', $(this)).animate({
            opacity: 1
        });
    }).on("mouseleave", function() {
        $('.project-hover img', $(this)).stop();
        $('.project-hover img', $(this)).animate({
           opacity: 0
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:53:00.273

`this`指的`.span4`是用户悬停的当前元素，所以你所要做的就是在其中找到目标元素：

```
$(this).find('.project-hover img').animate(...); 
```

从[文档](http://api.jquery.com/on/)中：

> 当 jQuery 调用处理程序时，`this`关键字是对传递事件的元素的引用；对于直接绑定的事件，这是附加事件的元素，对于委托事件`this`，这是匹配的元素`selector`。（请注意，这可能不等于`event.target`事件从后代元素冒泡。）要从元素创建 jQuery 对象以便它可以与 jQuery 方法一起使用，请使用`$(this)`.

DOM遍历方法列表： http: [//api.jquery.com/category/traversing/tree-traversal/](http://api.jquery.com/category/traversing/tree-traversal/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:59:05.250

我在这里找到了一个 CSS 解决方案，以防有人想要这个更简单的替代方案以供将来参考：

[css：当另一个 div 悬停时显示 div](https://stackoverflow.com/questions/5766141/css-show-div-when-another-div-is-hover)

# jquery - 如何在 jquery 中使用多个 id？

> ID：16145304
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:41.677
> 
> 标签：jquery, html, smarty

以下是我的 HTML 代码：

```
 <table>
{foreach in smarty starts}
    <tr>
                        <td valign="top" id ="show_answer"><p  id="show_ans"><b>View Answer : </b></p></td>
                        <td align="right" width="7%" valign="top">
                        </td>
                      </tr>
                      <tr>
                        <td valign="top" id ="hide_answer"><b>Answer is here</b><br/><p  id="hide_ans" >Hide Answer</p></td>
                        <td align="right" width="7%" valign="top">
                        </td>

                      </tr>
{foreach in smarty ends}                      
                    </table> 
```

我的 jQuery 代码在这里：

```
<script>
$(document).ready(function(){
  $("#show_ans").click(function(){ 
    $("#show_answer").hide(500);
    $("#hide_answer").show(500);
  });
  $("#hide_ans").click(function(){
    $("#hide_answer").hide(500);
    $("#show_answer").show(500);
  });
});
</script> 
```

实际上有多个这样的`<tr>`标签和多个相关的ID（即多个`show_ans`和`show_ans`ID）。现在，当我尝试使用我的代码时，它仅适用于第一条记录，因为它仅与第一个 id 组合匹配。

但是我必须使代码对每个 ids 组合单独可用。但我不知道如何分配动态生成的不同 id 并在我的 jQuery 代码中使用它们。简而言之，该功能应该适用于 individual `<tr>`，因此 id 应该是唯一的，并且 jQuery 函数应该可以正常工作。

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:22:26.027

尝试这个

```
<table>
i=1;
{foreach in smarty starts}
<tr>
     <td valign="top" id ="show_answer">
      <p  id="show_ans"+i><b>View Answer : </b></p>
     </td>
     <td align="right" width="7%" valign="top">
     </td>
</tr>
<tr>
     <td valign="top" id ="hide_answer"><b>Answer is here</b><br/>
       <p  id="hide_ans"+i >Hide Answer</p>
     </td>
     <td align="right" width="7%" valign="top">
     </td>
 <script type="text/javascript">
      $(document).ready(function(){
       $(".show_ans"+i).click(function(){
       $(this).parent().hide(500);
       $(this).parent().next().show(500);
      });

     $(".hide_ans"+i).click(function(){
       $(this).parent().hide(500);
       $(this).parent().prev().show(500);
     });
 });
 </script>
 i+=1;

</tr>
{foreach in smarty ends}                      
</table> 
```

这不是执行代码，而是相同类型一旦我解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:53:00.317

您可能想尝试使用 DOM 来选择不同的行，尤其是。如果你有一个元素表。

$("TR:first"): 第一行

$("TR:eq(3)") : 第 4 行

$("TR:last"): 最后一行

$("TR:odd"), $("TR:even"), $("TR:nth-child(odd)") 等等。

希望这可以帮助 ...

硅

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:01:33.837

```
<table>
  {foreach in smarty starts}
  <tr>
    <td valign="top" class ="show_answer"><p  id="show_ans"><b>View Answer : </b></p></td>
    <td align="right" width="7%" valign="top"></td>
  </tr>
  <tr>
    <td valign="top" class ="hide_answer"><b>Answer is here</b><br/>
      <p  id="hide_ans" >Hide Answer</p></td>
    <td align="right" width="7%" valign="top"></td>
  </tr>
  {foreach in smarty ends}
</table> 
```

和 JavaScript 代码

```
$(document).ready(function(){
    $(".show_ans").click(function(){
        $(this).parent().hide(500);
        $(this).parent().next().show(500);
    });

    $(".hide_ans").click(function(){
        $(this).parent().hide(500);
        $(this).parent().prev().show(500);
    });
}); 
```

在这里演示：http: [//jsfiddle.net/subodhghulaxe/aMWHN/1/](http://jsfiddle.net/subodhghulaxe/aMWHN/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:23:25.963

由于您正在循环代码，因此使用 class 比使用 id 属性更好。

HTML：

```
<table>
    <tr>
        <td valign="top" class ="show_answer">
            <p  class="show_ans"><b>View Answer : </b></p>
        </td>
        <td align="right" width="7%" valign="top">
        </td>
    </tr>
    <tr style="display:none;">
        <td valign="top" class ="hide_answer">
            <b>Answer is here</b><br/>
            <p  class="hide_ans" >Hide Answer</p>
        </td>
        <td align="right" width="7%" valign="top">
        </td>

    </tr>
</table> 
```

脚本：

```
$(".show_ans").click(function() {
  $(this).closest('tr').hide().next('tr').show()
});

$(".hide_ans").click(function() {
  $(this).closest('tr').hide().prev('tr').show()
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:56:28.417

你不能。ID 在页面上必须是唯一的。如果有多个具有相同 id 的元素，则查询选择器 api 将只返回第一个。您必须使用类而不是 id，或者您应该在循环中生成唯一的 id。如果我是你，我会使用课程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T10:57:53.953

实际上，您应该使用类而不是 ID（在名称中，唯一标识符）。

像这样的东西可能适用于 ids？（书面形式记忆，所以可能需要一些调整）

```
$(document).ready(function(){
    $("#show_ans").click(function(){
        $(this).parent().next().show(500);
        $(this).parent().hide(500);
    });

    $("#hide_ans").click(function(){
        $(this).parent().prev().show(500);
        $(this).parent().hide(500);
    });
}); 
```

如果没有，请将它们更改为类。

```
$(document).ready(function(){
    $(".show_ans").click(function(){
        $(this).parent().next().show(500);
        $(this).parent().hide(500);
    });

    $(".hide_ans").click(function(){
        $(this).parent().hide(500);
        $(this).parent().prev().show(500);
    });
}); 
```

# javascript - 如何从 node.js 自定义服务器向客户端发送响应

> ID：16145305
> 
> 赞同：1
> 
> 时间：2013-04-22T10:51:42.300
> 
> 标签：javascript, node.js

我正在使用[Node-Soap](https://github.com/milewise/node-soap)库从我的 node.js 服务器调用外部 Web 服务，代码如下所示：

```
var http = require("http");
var soap = require("soap");
var url = 'http://www.w3schools.com/webservices/tempconvert.asmx?wsdl';
var args = {Celsius: '40'};

http.createServer(function(request,response) {
  response.writeHead(200,{"Content-Type":"text/html"});
  response.write("<h1>Hello, Web!</h1>");
  soap.createClient(url, function(err, client) { 
    client.CelsiusToFahrenheit(args, function(err, result) {
      console.log(result); //This works
      response.write(result); //This doesn't print
    });
  });
  response.end();
}).listen(8888); 
```

我能够成功调用网络服务并能够得到响应。问题是当我`result`使用 console.log() 打印时，我能够得到输出：

```
{ CelsiusToFahrenheitResult: '104' } 
```

但是当我通过 response.write 发送它时，我无法获得任何输出，我会得到空白值。我尝试给予`result.toString()`，`JSON.stringify(result)`但我仍然变得空白。

你能帮我么？为什么我可以使用 console.log 打印数据，但不能使用 response.write？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:06:01.453

您应该仅在您的 SOAP 请求完成后才结束响应（您在创建 SOAP 客户端后立即结束它，但可能需要一段时间才能获得 SOAP 请求的结果）：

```
http.createServer(function(request,response) {
  response.writeHead(200,{"Content-Type":"text/html"});
  response.write("<h1>Hello, Web!</h1>");
  soap.createClient(url, function(err, client) { 
    client.CelsiusToFahrenheit(args, function(err, result) {
      ...convert result to string-form, perhaps with JSON.stringify()...
      response.end(result);
    });
  });
}).listen(8888); 
```

需要注意的几点：

*   `response.end()`也可以获取数据，因此（在这种情况下）不需要使用单独的`response.write()`;
*   `end()`期望 data 参数是一个字符串或一个`Buffer`;

# jquery - 将元素 jquery 引用保存为字符串

> ID：16145307
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:45.457
> 
> 标签：jquery, forms

我有一个接受元素引用的函数。这个元素将在以后使用（当最终提交表单时），所以我想把这个元素保存在某个地方。我想，既然我已经有了一个表格，我会继续将它保存为一个字符串 - 存储在隐藏字段中。

我该怎么做？

```
$.saveElementAsHidden = function(elem) {
   $('#myhiddenfield').val(elem); // Doesn't work, just says "[Object object]"
} 
```

是的，是的.. 我知道你可以将它保存为一个变量，或者保存为`$().data`jQuery 中的一个元素——但请在这里满足我的好奇心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:12:56.530

如果您需要拥有元素的 HTML 并使用它。您可以`.html`在该元素上使用，将其存储到 var 将该信息发布到服务器。当您需要重用它时，只需使用该元素 HTML 制作 HTML 并显示它。

# android - 如何正确实现 SlideMenu 和 ActionbarSherlock

> ID：16145310
> 
> 赞同：0
> 
> 时间：2013-04-22T10:51:51.743
> 
> 标签：android, actionbarsherlock

美好的一天，我正在尝试在我的应用程序中使用 ListView 布局和 ActionBarSherlock 实现 jfeinstein 幻灯片菜单，但由于某种原因，我似乎无法在 SlideMenu 上正确实现。据我了解，在使用带有 ActionBarSherlock 的 SlideMenu 库时，您必须在您计划使用的 SlideMenu Activity 中扩展到 SherlockActivity。

这是我的实现：我将只在此处发布相关代码。

```
 public class MyActivity extends SlidingFragmentActivity {
ListView slidinglist;
private SlidingAdapter SlidingAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_dashboard);
        setBehindContentView(R.layout.menu_layout);

          getSupportActionBar().setDisplayShowTitleEnabled(false);

            //Enable home button
            getSupportActionBar().setHomeButtonEnabled(true);

            //Home as up display
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);

            /*get array from the slidemenu items in value folder */
            String[] text_items = getResources().getStringArray(R.array.sliding_menus);
            TypedArray imgs = getResources().obtainTypedArray(R.array.sliding_menu_images);

            final Context context=this;
            LayoutInflater inflater=(LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View v=inflater.inflate(R.layout.menu_layout, null, true);

            slidinglist = (ListView)v.findViewById(R.id.slidemenu_listView);
            SlidingAdapter = new SlidingAdapter(this, R.layout.slide_menu_item, text_items, imgs);
            slidinglist.setAdapter(SlidingAdapter);

        SlidingMenu menu = new SlidingMenu(this);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setFadeEnabled(true);
        menu.setFadeDegree(0.35f);
        menu.setBehindOffset(100);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        //menu.setMenu(R.layout.menu_layout);
        menu.setMenu(v);

    } 
```

menu_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/slidemenu_listView"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >
    </ListView>

</LinearLayout> 
```

适配器类：

```
public class SlidingAdapter extends ArrayAdapter<String> {
         Context mContext;
         private int ViewResourceId; 
         private String[] mstring;
         TypedArray icons;

        public SlidingAdapter(Context context, int resourceId, String[] items, TypedArray images ){
            super(context, resourceId, items);

            mContext = context;
            ViewResourceId = resourceId;
            mstring = items;
            icons = images;
        }

        @Override
        public int getCount(){
            Log.d(TAG, "lenght of string is" + mstring.length);
            return mstring.length;
        }

        @Override
        public String getItem(int position){
            return mstring[position];
        }

        @Override
        public long getItemId(int position){
            return position;
        }

        @Override
        public View getView (int position, View convertView, ViewGroup parent){
            ViewHolder holder;

            if(convertView == null){
                LayoutInflater inflater = LayoutInflater.from(mContext);
                convertView = inflater.inflate(ViewResourceId, null);
                holder = new ViewHolder();

              holder.imageview = (ImageView)convertView.findViewById(R.id.slidemenu_image_item);
              holder.text_title = (TextView)convertView.findViewById(R.id.slidemenu_textview_id);
              holder.arrowImageView = (ImageView)convertView.findViewById(R.id.slidemenu_arrow_id);

              convertView.setTag(holder);

            }
            else{
                holder = (ViewHolder)convertView.getTag();
            }

            //set Array text values defined in xml to textview
            String title = mstring[position];
            holder.text_title.setText(title);

            //set Array icons values defined in xml to textview
            holder.imageview.setImageDrawable(icons.getDrawable(position));

            return convertView;
        }

    }

     class ViewHolder {
        TextView text_title;
        ImageView imageview;
        ImageView arrowImageView;
    } 
```

我在幻灯片菜单中看到一个空白屏幕。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:00:27.547

试试这个代码。它对我有用。

```
public class MainFragmentActivity extends SlidingFragmentActivity {

    private ActionBar ab;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_fragment);
        setBehindContentView(R.layout.side_menu);

        Display display = getWindowManager().getDefaultDisplay();
        final int width = display.getWidth();

        ListView mMenuLateral = (ListView) findViewById(R.id.menu_lateral);
        mMenuLateral.setAdapter(new MenuLateralAdapter(getApplicationContext(), vibraCallback));
        mMenuLateral.setDivider(getResources().getDrawable(R.color.divider));
        mMenuLateral.setSelector(android.R.color.transparent);
        mMenuLateral.setOnItemClickListener(new OnItemClickListener() {
             ...
        }

        ab = getSupportActionBar();
        ab.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM|ActionBar.DISPLAY_SHOW_HOME); 
        ab.setCustomView(actionBarCustomView);
        ab.setIcon(R.drawable.action_bar_icon_main);
        ab.setHomeButtonEnabled(true);

        menu = getSlidingMenu();
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
        menu.setShadowWidth(35);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindWidth(width * 3 / 4);
    }
} 
```

希望有帮助，加油！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:50:17.803

嗨，您需要将您的 Activity 扩展到 Sherlock，然后实现 SlidingMenu

尝试这个：

[https://stackoverflow.com/a/14126158/1909953](https://stackoverflow.com/a/14126158/1909953)

# android - 拉动刷新自动滚动在Android中无法正常工作

> ID：16145314
> 
> 赞同：2
> 
> 时间：2013-04-22T10:51:58.930
> 
> 标签：android, autoscroll, pull-to-refresh

我在这个库的帮助下在 Scroll View 上使用 Pull to Refresh 工具

[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

它工作得很好，而不是`scrollTo(int,int);`我下面的代码中的方法我在添加列表中的所有项目后最后使用了这个方法。

代码在这里。

```
public class MainActivity extends Activity {
PullToRefreshScrollView mPullRefreshScrollView;
LinearLayout listHolder;
ArrayList<String> list = new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listHolder = (LinearLayout) findViewById(R.id.lay);

    // initial values in List
    for(int i =0;i<15;i++){
        list.add("InitialValue");
    }

    mPullRefreshScrollView = (PullToRefreshScrollView) findViewById(R.id.pull_refresh_scrollview);
    mPullRefreshScrollView
            .setOnRefreshListener(new OnRefreshListener<ScrollView>() {

                @Override
                public void onRefresh(
                        PullToRefreshBase<ScrollView> refreshView) {
                    new GetDataTask().execute();
                }
            });

    addJournal_Entry_page();
}

private class GetDataTask extends AsyncTask<Void, Void, String[]> {
    @Override
    protected String[] doInBackground(Void... params) {
        try {
            Thread.sleep(2000);
            for(int i =0;i<4;i++){
                list.add("InitialValue");
            }
        } catch (InterruptedException e) {
        }
        return null;
    }

    @Override
    protected void onPostExecute(String[] result) {
        // Do some stuff here

        // Call onRefreshComplete when the list has been refreshed.
        mPullRefreshScrollView.onRefreshComplete();
        addJournal_Entry_page();
        super.onPostExecute(result);
    }
}

private void addJournal_Entry_page() {

    View v;
    listHolder.removeAllViews();
    for (int i = 0; i < list.size(); i++) {
        v = this.getLayoutInflater().inflate(R.layout.list_row, null);
        TextView ind = (TextView)v.findViewById(R.id.index);
        TextView name = (TextView)v.findViewById(R.id.name);

        ind.setText(""+i);
        name.setText(list.get(i));

        listHolder.addView(v);
    }

    Resources r = getResources();
    float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
            100, r.getDisplayMetrics());

    //problem is Here
    mPullRefreshScrollView.scrollTo(0,(int)px);

}

} 
```

我`PullToRefreshScrollView`像这样在XML中定义

```
 <com.handmark.pulltorefresh.library.PullToRefreshScrollView
    xmlns:ptr="http://schemas.android.com/apk/res-auto"
    android:id="@+id/pull_refresh_scrollview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    ptr:ptrAnimationStyle="flip"
    ptr:ptrMode="pullFromStart" >

    <LinearLayout
        android:id="@+id/lay"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
    </LinearLayout>
</com.handmark.pulltorefresh.library.PullToRefreshScrollView> 
```

我得到这样的结果

![在此处输入图像描述](https://i.stack.imgur.com/xxYrv.png)

我的列表中有 15 个项目，因此它不应在列表底部显示空白。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T12:54:54.000

请在此代码下的 PullToRefreshScrollView.java 中添加这一行

> 最终类 InternalScrollViewSDK9 扩展 ScrollView{
> 
> > ```
> > @Override
> >       public void scrollTo(int x, int y) {
> >           // TODO Auto-generated method stub
> >           super.scrollTo(x, y);
> >       } 
> > ```
> > 
> > }

在此处输入代码。这个对我有用。

# python - 是否可以让 isinstance 或类似的类型检查与我的腌制类一起使用？

> ID：16145317
> 
> 赞同：0
> 
> 时间：2013-04-22T10:52:05.363
> 
> 标签：python, class, pickle, typechecking, isinstance

我有一个非常烦人的错误，我终于找到了它。

我使用（或更准确地说，已经使用过）一个独立的脚本来创建对象存储，然后我腌制这个数据结构。然后，我可以在每次程序运行时使用反序列化数据初始化我的主程序。

但是，如果我使用类型检查，这将成为一个问题。在我做 pickle.dump() 并得到这个数据结构之后，我设置了它，以便我尝试检查一个对象的类型。不幸的是，我唯一可以检查的就是*重新*加载我的类，Python 认为这是不同的。

> 调试：对象我正在检查类型：>> Fixture {name: 'Front Desk', location: '0', desc: 'The front desk has a sign that read...'} <<
> DEBUG: A generic GameObject: >> 游戏对象 {name: '', location: 'None', desc: '...' } <<

（您可以看到对象表示看起来非常相似。这是因为一个继承`__repr__`自另一个，即应该是它的一个实例。）

> 调试：我正在类型检查的对象类型：{class 'chimai.chimai.objects.fix.Fixture'}
> 调试：通用游戏对象的类型：{class 'objects.game_object.GameObject'}
> 调试：对象 I'的 MRO m 类型检查：({class 'chimai.chimai.objects.fix.Fixture'}, {class 'chimai.chimai.objects.game_object.GameObject'}, {type 'object'})
> 调试：通用游戏对象的 MRO : ({class 'objects.game_object.GameObject'}, {type 'object'})

（GameObject 类的标识符略有不同；这来自我最初运行独立脚本的位置。）

> 调试：腌制夹具类型的 ID：173671604
> 调试：在我的主程序中重新加载的夹具类型的 ID：149507748

最终结果是，我根本想不出一种方法来对我的腌制数据进行类型检查。除非有人有任何天才的建议，否则我想我会是鸭子打字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:52:05.363

AFAIK，这不可能以任何简单的方式；类型检查与在不同会话中腌制的数据不兼容。在类型检查方面，我不是狂热者，但我喜欢有效的方法。

# java - JFilechooser 中的无头异常

> ID：16145321
> 
> 赞同：1
> 
> 时间：2013-04-22T10:52:12.963
> 
> 标签：java, javascript, swing, jsp

我有一个严重的问题。问题是： [java.awt.HeadlessException](https://stackoverflow.com/questions/15658493/java-awt-headlessexception)

现在的问题是，我在一个月前编写了相同的代码，并且在 Windows 7 和 NetBeans 7.1 中运行良好。不同之处在于他在 servlet 中编写了代码，但我是在 Java 文件中编写的，然后从 servlet 调用该方法。

```
BELIEVE ME IT'S 100% WORKS. 
```

但现在我在 Windows 8 和 NetBeans 7.3 中只有这两个被改变。现在它不工作给出一个无头异常。我能做些什么？？？
现在请告诉我如何上传文件？我需要完整的目录路径，它将保存在数据库中。
注册.jsp：

```
<a href="UploadUserImage">
  <input type="button" class="button round blue image-right ic-upload text-upper" value="Upload" name="upload"/>
</a>
<font style="font-family: Times New Roman; font-size: 16px; color: #2a2e36; font-style: italic;"><%= image %></font>
<input type="hidden" value="images/Member/<%= image %>" name="image"/> 
```

UploadImage.java(Servlet):

```
String image="images/"+new UploadFile().Upload();
request.getRequestDispatcher("Register.jsp?image="+image).forward(request, response); 
```

上传文件.java：

```
public class UploadFile
{
File file;
public String Upload()
{
    try 
    {

    final JFileChooser fc = new JFileChooser();
    String[] extensions={"jpg", "png", "gif"};
    FileNameExtensionFilter filter=new FileNameExtensionFilter("Images", extensions);
    fc.setFileFilter(filter);
    fc.setMultiSelectionEnabled(false);
    //fc.setCurrentDirectory(new File("C:\\tmp"));
    fc.setApproveButtonText("Upload");
    int retVal = fc.showOpenDialog(new JPanel());
    file=fc.getSelectedFile();
    String src,dst;
    src=file.getAbsolutePath();
    dst="C:\\Users\\SHUVAM KAYAL\\Documents\\NetBeansProjects\\BookShopManagment\\BookShopManagment-war\\web\\images\\Member\\"+file.getName();
    copy(new File(src), new File(dst));
    } 
    catch (IOException ex) 
    {}  
    catch(NullPointerException e)
    {}

    return file.getName();
}
public void copy(File sourceLocation , File targetLocation) throws IOException {
    if (sourceLocation.isDirectory()) {
        if (!targetLocation.exists()) {
            targetLocation.mkdir();
        }

        String[] children = sourceLocation.list();
        for (int i=0; i<children.length; i++) {
            copy(new File(sourceLocation, children[i]),
                    new File(targetLocation, children[i]));
        }
    } else {

        InputStream in = new FileInputStream(sourceLocation);
        OutputStream out = new FileOutputStream(targetLocation);

        // Copy the bits from instream to outstream
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:12:03.150

您正在混合 WebApplication（HTML/JSP/Servlet/Java EE 和朋友）和 DesktopApplication（AWT/Swing/JavaFX 和朋友）的概念。虽然有一些可能的混合和匹配，但在你的情况下它似乎没有任何意义。

如果您开发一个 Web 应用程序，使用 a`JFileChooser`是没有用的，因为它将在服务器端打开，而不是在客户端打开（尽管开发人员犯的一个典型错误是打开 a`JFileChooser`并相信它可以工作，因为客户端和服务器运行在开发时使用同一台机器）。

正确的方法是`<input type="file" name="file">`在表单中添加 ,`<form enctype="multipart/form-data" method="post">`然后从请求中检索数据。

顺便说一句，在打开 a 时，`JFileChooser`您不能像这样传递随机父组件，`fc.showOpenDialog(new JPanel())`但您应该提供一个已经显示在 a 中的适当组件`Window`（但这与您的情况无关）。

`catch(Exception e)`考虑永远不要像你一样有空块。发生这种情况时，调试起来非常困难。

# linux - Linux 中的固件和驱动程序

> ID：16145322
> 
> 赞同：8
> 
> 时间：2013-04-22T10:52:14.053
> 
> 标签：linux, linux-kernel, linux-device-driver, firmware

据我了解，固件是控制硬件的东西，驱动程序与固件交互以控制硬件。那是对的吗？

在 Linux 中，与固件交互的 API 或函数有哪些？固件代码是否独立于任何操作系统（例如 Linux 或 Windows）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T13:02:50.037

固件是在设备上运行的软件。驱动程序是告诉您的操作系统如何与设备通信的软件。所有具有固件的设备通常都被编程到设备中（使用ROM芯片或可编程ROM芯片），但是有些设备在初始化时将固件加载到设备中。每个设备都没有[固件。](https://superuser.com/questions/299442/difference-and-relation-between-firmware-and-device-driver)

1.  从技术上讲，“固件是上传到硬件设备本身上的微处理器或可编程逻辑的软件。使用固件的硬件示例是 HP 打印机，它在通电时从 USB 端口接收代码，无线网络接口在启动时上传固件up, 可以从 Internet 进行自我更新的路由器等...一般来说，将固件上传到设备的能力是一个优势。它允许在首次销售后添加产品改进。这些包括修复产品中的错误，应对安全问题，或应对监管环境的变化；例如：FCC 开放或限制允许的带宽、功耗、安全性。”
2.  一般而言：驱动程序是与硬件对话的内核模块；固件是在与驱动程序对话的硬件上运行的软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:20:45.293

这取决于设备和 PC 之间的连接方式。对于 PCI 板，有一组 Linux 内核模式 API。另一组内核模式 API 用于与通过 USB 端口连接的设备进行通信。对于以太网和 WiFi 连接，您可以使用套接字 API，通信完全在用户模式下完成。通过串行端口连接的设备也由用户模式 ​​API 处理——它们在 Linux 操作系统中被视为文件。

通常，设备固件不依赖于主机系统操作系统。但是，这取决于设备本身上运行的操作系统（如果有）。固件代码可以在没有任何操作系统的情况下用纯 C 编写，或者在实时操作系统下运行。现代设备可能包含全功能操作系统，如嵌入式 Linux 或 Windows。在这种情况下，带有特定于该设备的程序的整个操作系统都被视为设备固件。例如，特定移动设备的 Android 操作系统。

# silverlight - 异步定位包版本

> ID：16145323
> 
> 赞同：3
> 
> 时间：2013-04-22T10:52:14.020
> 
> 标签：silverlight, nuget, async-await

似乎有两个 NuGet 包可在 Silverlight 应用程序中使用 async/await。我用过

[http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack)

到目前为止，但这并没有出现在搜索中。相反，我发现

[http://nuget.org/packages/Microsoft.Bcl.Async/](http://nuget.org/packages/Microsoft.Bcl.Async/)

但是，两者都在同一日期（2013 年 4 月 18 日）最后一次更改，并且在描述中没有一个是指另一个。我很想相信后者会取代前者，但我不确定。

我的问题特别是这些包如何相互关联，更一般地说，如果有一些关于 nuget 版本的文档/原则我应该知道以自己理解这一点（例如：用另一个包取代包是典型的吗？这是否记录在案等）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T11:10:01.727

[`Microsoft.Bcl.Async`是 的替代品`Microsoft.CompilerServices.AsyncTargetingPack`。](http://blogs.msdn.com/b/bclteam/archive/2013/04/17/microsoft-bcl-async-is-now-stable.aspx)

除非您更改其名称，否则在 NuGet 上用另一个包取代一个包并不常见。在这种特殊情况下，我认为`AsyncTargetingPack`（错误地）列出时没有“预发布”标志，然后微软团队在`Bcl.Async`.

`Bcl.Async``AsyncTargetingPack`在我看来，它在几个月前首次（预）发布时已被取代，但由于两个原因存在一些混淆：1）该团队仍被称为`Bcl.Async`“异步目标包”，以及 2）该`Bcl.Async`包（正确）列出作为预发布版，因此对于许多开发人员来说，只有`AsyncTargetingPack`在 NuGet 搜索中才会出现。

同样，这都是猜测，但我怀疑微软团队决定保持原样，而不是破坏已经使用`AsyncTargetingPack`.

现在这`Bcl.Async`是最终版本，他们可以（并且确实）返回并更正`AsyncTargetingPack`/`Bcl.Async`混淆，以便现有和新开发人员都可以轻松找到正确的包。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T11:45:32.337

我在带有 VS2010 的 Windows XP 和带有 Async CTP 的 .NET 4.0 和 C# 5.0 的其他扩展
这是我的帖子我[如何在 .NET 4.0 中获取/使用 C# 5.0 的扩展](https://stackoverflow.com/a/15972581/2031316)，其中（.NET 4.0 在没有安装 .NET 4.5 的机器上) 与安装了 .NET 4.5 的机器上的 .NET 4.0 不同

我不使用 NuGet，因为它总是为 .NET 4.5（带有 .NET 4.0 的描述）或 .NET 4.0 带来包，这些包在没有安装 .NET 4.5 的情况下在 .NET 4.0 中不起作用

相关文章：

*   我对问题“ [Async and Await 的异步编程](https://stackoverflow.com/a/16097562/2031316)” 的回答
*   我的问题“ [.NET 4.0 Async CTP 术语与其 .NET 4.5 类似物之间的等价或转换矩阵？](https://stackoverflow.com/q/15915732/2031316) ”

# winforms - 如何使用 Microsoft Visual Studio 2010 编译旧版本的 F#？

> ID：16145324
> 
> 赞同：1
> 
> 时间：2013-04-22T10:52:17.550
> 
> 标签：winforms, visual-studio-2010, f#, visual-studio-2005, compatibility

我正在尝试学习 F#，并且正在研究 Suduko Solver 程序 [链接在这里] ( [http://www.ffconsultancy.com/dotnet/fsharp/sudoku/code/1/sudoku.fs](http://www.ffconsultancy.com/dotnet/fsharp/sudoku/code/1/sudoku.fs) )！原始程序是在 Visual Studio 2005 中开发的；但是当我尝试使用 Microsoft Visual Studio 2010 再次构建它时，我遇到了一些错误。我手动添加了对 System.Drawing 和 System.Windows.Forms 的引用，但 VS2010 似乎仍然无法识别 Idoms。有什么想法可以让这个程序在 VS2010 下编译吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:05:37.937

所以修复错误消息

需要进行以下替换

```
n -> string_of_int n : n->n.ToString()
Byte.of_int 0        : 0uy
IEnumurable          : Seq
m.(y).(i)            : m.[y].[i] //this appears with similar syntax a few times - just need to change round to square brackets 
```

不知道为什么你`init_control`没有定义它可能会在其他东西修复后没问题。

# magento - Magento-如何更改运费

> ID：16145333
> 
> 赞同：1
> 
> 时间：2013-04-22T10:52:32.943
> 
> 标签：magento, checkout, shipping

我需要根据报价小计更改运费。具体来说，当报价小计低于“Y”欧元时，我需要将运费设置为“X”欧元。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:44:06.283

我相信[表运费](http://www.magentocommerce.com/knowledge-base/entry/how-do-i-set-up-table-rate-shipping)是您正在寻找的。

# asp.net - 传值 WinForm =>(page.html?query123)=> HTML =>(page.aspx?query123)=> asp.net //esle?

> ID：16145335
> 
> 赞同：0
> 
> 时间：2013-04-22T10:52:34.810
> 
> 标签：asp.net, html, winforms, query-string, awesomium

这里的问题是行的中间（HTML）。

连锁，链条：

我有 WinForm 程序，它使用 awesomium （替代 native `webBrowser`）来查看 Html 页面，其中包含 asp.net 页面的一部分`iframe`。

问题：

问题是我需要将值传递给 asp.net 页面，`iframe`通过发送散列和加密的查询字符串，无需中间链（Html）即可轻松实现。

这个怎么运作：

WinForm 做一些事情，然后使用几步加密将所有需要的值编码为 1 个字符串。然后它应该通过 将这个字符串发送到asp.net页面`iframe`（这就是问题所在，在asp.net页面中很容易接收查询字符串，但首先我需要在Html中接收它并发送到asp.net）。

可接受的答案：

1) 可能是最简单的一种 - 使用 JavaScript。我听说有可能以这种方式完成。我是如何想象的 - 我将查询字符串从 WinForm 发送到 Html 页面，`http:\\HtmlPage.html?AspNet.aspx?CryptedString` 然后 Html 使用 JavaScript 接收它并将查询字符串`"AspNet.aspx?CryptedString"`放入 iframe`"src=http:\\"`中，结果`"src=http:\\AspNet.aspx?CryptedString"` 然后我很容易在 asp.net 页面中得到它。

2）不知何故创建>>>虚拟<<<（注意：虚拟，我不希望将查询字符串保存在硬盘上，甚至不建议）asp.net或html页面，其`iframe`源代码直接取自WinForm字符串。可能这对于 awesomium 是可能的，但我是新手，不知道如何（如果可能的话）。

3）一些网络服务，我可以通过现有的 HTML 在 asp.net 和 WinForm 之间进行通信`iframe`。

4) 另一种替换前 3 种方法之一的方法，即不将“值”保存在 HDD 上的 querystring/else 中，也不对用户可见，不使用 asp.net 页面的服务器在其上创建 iframe 页面。在 HTML 页面的服务器上，只允许使用 HTML，不允许使用 PhP。

5）如果您不知道以上 4 项中的任何一项 - 建议免费的没有广告的 PhP 托管（如果存在，我非常怀疑）。

优先事项：

最好的是#3，然后是#2，然后是#1，然后是#5（#4 被排除在外，因为它是未知的）。

最后：

在此先感谢您的帮助。

PS目前正在工作，所以我稍后会检查/尝试所有答案，如果有任何适合我的需要，我会在明天报告。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:05:42.977

回答我自己的问题。我找到了两种可以做我想做的事情的方法。

第一个：

创建 RAM 文件`System.IO.MemoryStream`或其他方法（google c# create a file in ram）。

第二个：

根据它应该是什么，通过`File.SetAttributes Method`and`System.IO.StreamWriter/Reader`或`System.IO.FileStream`or等​​在遥远的文件夹中的某处创建一个隐藏+加密+系统+自定义可读的程序加密文件。`System.IO.TextWriter`

一旦此文件用于需要删除它+退出时删除+开始使用时删除

```
if (File.Exists(path)
{
 File.Delete(path);
} 
```

（需要更多的声誉来发布一些链接-_-，我不想只发布其中的一部分，要么全部发布，要么根本不发布，所以如果你需要这里的任何东西，请使用谷歌）。

如果您需要存储“小临时文件”而不是长时间使用第一个，如果“重”使用第二个，除非您非常需要使用 RAM。

# php - Javascript确认和jquery淡入淡出没有响应

> ID：16145337
> 
> 赞同：0
> 
> 时间：2013-04-22T10:52:38.813
> 
> 标签：php, javascript, jquery, html

每次有人单击注销按钮时，都会出现一个确认对话框，但是当我单击时没有任何响应。我还尝试通过在加载 pade 时提供淡入淡出效果来制作 jquery 效果，但也没有任何响应。我保存页面 ini .php 扩展名。

```
 <html>
    <head>
    <title>Home</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    </script>
    <script type="text/javascript">
    $(document).ready(function(){
      $("*").fadeIn(4000);
    });
    function confirm() {
      var answer = confirm("Are you sure you want to register?")
      if (answer){
        window.location = "unregister.php";
      }
      else{
        alert("Thanks for sticking around!")
      }
    }

    </script>
    </head>
    <body>
    <p>
    <form id="form2" name="form2" method="post">
    <a href="logout.php"><button>Logout</button></a>

      <a href="form.php"><button>Add New record</button></a>
      <a href="register.php"><button>Edit Profile</button></a>
      <input type="button" onClick="confirm()" value="Unregister">
      </form>
     </p>
     .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:56:12.620

[Confirm()](https://developer.mozilla.org/en/docs/DOM/window.confirm)是一个 javascript 函数，因此请尝试更改以下内容：

```
<input type="button" onClick="confirm()" value="Unregister"> 
```

至

```
<input type="button" onClick="return ask_confirm();" value="Unregister"> 
```

和

```
function ask_confirm() {
      var answer = confirm("Are you sure you want to register?")
      if (answer){
        window.location = "unregister.php";
      }
      else{
        alert("Thanks for sticking around!")
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:00:30.863

Sudhir 关于确认功能是正确的。

你的 fadeIn 什么都不做的原因是因为它只影响隐藏的元素。

如果你真的想淡入整个页面，你需要`$("*").hide();`在调用fadeIn之前添加：

编辑：请注意，大多数人不喜欢使用`$("*")`，因为它会从字面上选择可能导致问题的所有内容。例如，当我测试隐藏所有内容然后使用淡入淡出时，它使我所有的进度条和加载 gif 都可见。

更好的解决方案是：

```
$("html").hide();
$("html").fadeIn(4000); 
```

这样一来，页面将完全按照应有的方式显示，而不会显示您希望保持隐藏的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:58:14.293

您的函数确认必须返回 true 或 false

```
function confirm() {
  var answer = confirm("Are you sure you want to register?")
  if (answer){
    window.location = "unregister.php";
    return true;
  }
  else{
    alert("Thanks for sticking around!");
    return false;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:59:39.163

您忘记了“http:”前缀：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> 
```

# wso2 - WSO2 CEP 2.0.1 可以从 JMS 队列接收事件吗？

> ID：16145342
> 
> 赞同：0
> 
> 时间：2013-04-22T10:52:54.290
> 
> 标签：wso2, complex-event-processing

就像在 jms-twitter 示例中一样，WSO2 CEP 正在从 JMS 主题接收事件，我想从 JMS Queue 接收事件。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:23:09.523

我们也不支持 CEP 2.1.0 的 jms 队列...我们计划为 CEP 3.0.0 发布此功能（将于 2013 年第三季度发布）...

谢谢，

莫汉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:39:04.500

这在 2.0.1 中是不可能的。请按照此线程[分布式 WSO2 CEP](https://stackoverflow.com/questions/14452646/distributed-wso2-cep)了解如何在 WSO2 CEP 2.1.0 中实现这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T03:39:55.117

即将发布的版本将支持这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-14T05:33:52.867

CEP 4.2.0 已于上个月发布。所以你也可以使用 CEP 4.2.0。[这](http://wso2.com/products/complex-event-processor/)是链接。您可以在此版本中使用 JMS 中的队列和主题。

# php - 鬼脚本错误

> ID：16145355
> 
> 赞同：1
> 
> 时间：2013-04-22T10:53:20.810
> 
> 标签：php, pdf, command-line, ghostscript

我只是想用这样的命令行从另一个制作一个pdf：

```
gs -sDEVICE=pdfwrite -o new.pdf old.pdf 
```

我得到了错误：

> GPL Ghostscript 9.07 (2013-02-14)
> 
> 版权所有 (C) 2012 Artifex Software, Inc。保留所有权利。
> 
> 此软件不提供任何担保：有关详细信息，请参阅文件 PUBLIC。
> 
> 错误：/undefined in --run--
> 
> 操作数栈：
> 
> --dict:1/1(L)-- 数字
> 
> 执行栈：
> 
> %interp_exit .runexec2 --nostringval-- --nostringval-- --nostringval-- 2 %stopped_push --nostringval-- --nostringval-- --nostringval-- false 1 %stopped_push 1900 1 3 %oparray_pop 1899 1 3 % oparray_pop 1883 1 3 %oparray_pop --nostringval-- --nostringval-- --nostringval--
> 
> 字典栈：
> 
> --dict:1161/1684(ro)(G)-- --dict:1/20(G)-- --dict:82/200(L)-- --dict:82/200(L)- - --dict:109/127(ro)(G)-- --dict:292/300(ro)(G)-- --dict:25/32(L)--
> 
> 当前分配模式是本地的
> 
> GPL Ghostscript 9.07：不可恢复的错误，退出代码 1

例如，如果我使用 Multivalent.jar 来调整此 PDF 的大小，它可以正常工作并调整其大小。但是GS给出了一个错误。我需要在这种情况下使用 GS，但我没有收到此错误。我能以某种方式通过吗？或者我能做什么？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:46:18.630

[为什么不在http://bugs.ghostscript.com](http://bugs.ghostscript.com)打开错误报告？

# java - 模拟多次调用的静态方法

> ID：16145359
> 
> 赞同：3
> 
> 时间：2013-04-22T10:53:31.820
> 
> 标签：java, junit4, jmockit

我有一个静态方法，用于多个地方，主要是在静态初始化块中。它接受一个 Class 对象作为参数，并返回该类的实例。我只想在特定的 Class 对象用作参数时模拟这个静态方法。但是当从其他地方调用该方法时，使用不同的Class对象，它返回null。
如果参数不是模拟参数，我们如何让静态方法执行实际实现？

```
class ABC{
    void someMethod(){
        Node impl = ServiceFactory.getImpl(Node.class); //need to mock this call
        impl.xyz();
    }
}

class SomeOtherClass{
    static Line impl = ServiceFactory.getImpl(Line.class); //the mock code below returns null here
}

class TestABC{
    @Mocked ServiceFactory fact;
    @Test
    public void testSomeMethod(){
         new NonStrictExpectations(){
              ServiceFactory.getImpl(Node.class);
              returns(new NodeImpl());
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:08:45.687

您想要的是一种“部分模拟”形式，特别是 JMockit API 中的[*动态*部分模拟：](http://jmockit.org/tutorial/BehaviorBasedTesting.html#dynamicPartial)

```
@Test
public void testSomeMethod() {
    new NonStrictExpectations(ServiceFactory.class) {{
        ServiceFactory.getImpl(Node.class); result = new NodeImpl();
    }};

    // Call tested code...
} 
```

只有符合记录期望的调用才会被嘲笑。当动态模拟类被调用时，其他人将执行真正的实现。

# azure - 如何在 Azure 环境中设置电子邮件功能

> ID：16145362
> 
> 赞同：0
> 
> 时间：2013-04-22T10:53:42.107
> 
> 标签：azure

嗨，any1 可以告诉我如何在不使用 sendgrid 或任何其他第 3 方的情况下在 azure 中实现电子邮件功能。我们可以有服务总线来连接天蓝色和交换服务器来发送电子邮件吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:47:16.050

问题不在于**必须**使用第三方，而在于安全和防火墙的影响——尤其是对于企业安全霸主而言。交换服务器可以启用传出 smtp（即使有用户名和密码），任何应用程序（包括在 Azure 上运行的应用程序）都可以轻松发送传出 SMTP。您总是会遇到的问题是交换服务器周围的安全性不允许来自公共 IP 地址的 smtp（黑客经常扫描开放端口 25，以便他们可以通过毫无戒心的邮件服务器中继垃圾邮件）。Windows Azure（角色和网站）无法使用固定（传出）IP，因此无法创建防火墙规则。

您的选择是：

1.  使用您的公司网络设置 VPN，以便您的 Azure 实例从私有 IP 地址发送。
2.  在 Azure VM 上运行邮件中继服务。虚拟机可以无限租用一个 IP 地址，所以不会改变（很多）。有在 Linux 上运行的简单而廉价的邮件传输代理服务。
3.  使用任何 'ol smtp 服务器。如果您发送的内容不多，您可以使用 Google 甚至 outlook.com。Outlook.com 允许您配置托管在其他地方的帐户，因此您应该能够将 smtp 与您的 windows live id（Microsoft 帐户）一起使用。

我会避免编写使用服务总线之类的复杂代码和服务。System.Net.Mail 应该用于发送到 smtp 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:15:27.407

我过去看到的一件事是让 Windows Azure 应用程序将消息放入队列中，以及可选的一些较大的数据（附件、大正文等）放在一个 blob 中。这将获取存储在 Windows Azure 存储中的数据。从那里，本地应用程序（例如 Windows 服务）可以提取队列和 blob 数据，构建电子邮件，并将其发送到本地 Exchange 服务器。

如果您需要将所有内容都托管在云上，那么我认为您应该能够将您的 Windows Azure 应用程序连接到 Exchange Web 服务端点（假设您可以正确保护它并建立 Web 服务连接）。

# unit-testing - 在 TDD 中完成的单元测试属于哪类代码覆盖率

> ID：16145363
> 
> 赞同：1
> 
> 时间：2013-04-22T10:53:43.483
> 
> 标签：unit-testing, tdd, code-coverage

我对各种类型的代码覆盖率有点困惑：语句覆盖率、分支覆盖率、p-uses 覆盖率、c-uses 覆盖率、语句覆盖率、行覆盖率......我对完成的基本单元测试覆盖率感兴趣在 TDD 级别。这属于上述哪种类型的代码覆盖？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:10:51.843

实际的答案是 TDD 的目标是语句覆盖。如果严格遵循 TDD，则语句、分支、行和异常覆盖都应该得到解决。

实际上，并不是每个人都在如此高的水平上实践 TDD。许多团队选择排除简单 getter 和 setter 的测试覆盖率，例如，认为它们浪费时间和额外的技术负担。

TDD 使用重构和测试复杂性作为诱使开发人员保持较小方法大小的因素。遵循涉及变量范围和所有权的良好实践，例如 RAII 将 new 和 delete 配对在同一范围内，应该将 c-uses 的所有范围保持在同一测试中（尽管该规则在引用计数内存分配系统中可能会失效。）为了真正涵盖这些场景，您的团队应该设计行为或功能测试以正确执行逻辑。

# javascript - 在 ie9 中上传 js 错误：SCRIPT5007: Object expected

> ID：16145365
> 
> 赞同：16
> 
> 时间：2013-04-22T10:53:47.303
> 
> 标签：javascript, internet-explorer, internet-explorer-9, uploadify

我正在尝试在 div 上绑定uploadify。
当我单击上传按钮时，它会显示错误，例如`SCRIPT5007: Object expected.`

对于以下链接的演示检查，该链接在 ie9 中拖动 div 时产生错误

**头**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.js"></script>
<script type="text/javascript" src="http://www.uploadify.com/wp-content/themes/uploadify/js/jquery.uploadify.min.js"></script> 
```

**身体**

```
<div class="container" id="container">
    <div id="uploadify-item"></div>
    This container is not draggable in IE9 but it works in Chrome and FF. Why not?
</div> 
```

**js**

```
$('#uploadify-item').uploadify({
    'swf'      : 'http://www.uploadify.com/uploadify/uploadify.swf',
    'uploader' : 'http://www.uploadify.com/uploadify/uploadify.php'
});
$("#container").draggable(); 
```

参考：http: [//jsfiddle.net/axzdR/19/](http://jsfiddle.net/axzdR/19/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-09T05:05:14.767

IE9 似乎存在 SWFUpload 嵌入的错误，如果您尝试在元素上调用“getAttribute / removeAttribute / setAttribute”，则会引发“预期对象”错误。而且我发现swfupload.js中的cleanUp()函数从IE9的对象DOM中删除了所有的js函数，包括“getAttribute / removeAttribute / setAttribute”。

要解决此问题

在 SWFUpload.prototype.cleanUp

改变：

```
if (typeof (movieElement[key]) === "function") 
```

至：

```
if (typeof (movieElement[key]) === "function" && key[0] <= 'Z') // Remove only Flash functions (starts with capital letters). 
```

uploadify 的补丁版本保存在这个位置

[http://www.dariowiz.com/scripts/jquery.uploadify3.1Fixed.js](http://www.dariowiz.com/scripts/jquery.uploadify3.1Fixed.js)

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:31:56.877

尝试使用最新的 jQuery（容器在 IE9 中可拖动，并且“预期对象”错误消失）

```
 <script type="text/javascript"
 src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <script type="text/javascript"
 src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 
```

确保您已经为 IE 安装了 Flash 播放器（它是单独安装的） 它可以从这里下载 [http://get.adobe.com/flashplayer/otherversions/](http://get.adobe.com/flashplayer/otherversions/)

但即使是 Unloadify[演示](http://www.uploadify.com/demos/)也无法在我的 IE9 中运行（我可以在“选择文件”按钮中单击一分钟，但没有结果，突然无缘无故地开始工作并打开选择文件对话框）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T22:55:43.573

您可以在此处找到此问题的最终解决方案 >>> **[https://groups.google.com/forum/?fromgroups=#!topic/swfupload/57ySk2JoLbE](https://groups.google.com/forum/?fromgroups=#!topic/swfupload/57ySk2JoLbE)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T22:19:21.727

uploadify 的源中似乎存在与 IE 9 中的 jquery UI 冲突的问题。特别是在 swfupload 实用程序中。为了修复它，您需要做一些小技巧，这里似乎有详细的步骤：[http ://www.uploadify.com/forum/#/discussion/comment/19212](http://www.uploadify.com/forum/#/discussion/comment/19212)

抱歉，如果不设置整个测试环境，我无法验证这一点。不是可以放在 JSFiddle 中的东西。祝你好运，如果你成功了，请告诉我。

# javascript - 使用带有 javascript SOAP 请求的 WCF 服务

> ID：16145367
> 
> 赞同：0
> 
> 时间：2013-04-22T10:53:53.763
> 
> 标签：javascript, wcf, cordova, soap

我有一个 WCF 服务，我必须使用 JavaScript SOAP 请求来使用它。JavaScript 是 Phonegap 应用程序的一部分，因此我不是从本地服务器而是从文件运行此 JavaScript。

当 WCF 服务运行 localhost 时，一切正常。但是，一旦我在服务器上部署 WCF 服务，就会收到错误消息（服务名称及其方法仅用于说明目的）：

```
OPTIONS http://myWebservice/service.svc 400 (Bad Request)
XMLHttpRequest cannot load http://myWebservice/service.svc. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我知道这是一个跨域错误，但这就是为什么将以下方法添加到我的 web 服务的 global.asax 中。但这无济于事。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
    if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
    {
        HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept,SOAPAction");
        HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
        HttpContext.Current.Response.End();
    }
} 
```

javascript调用：

```
 $.support.cors = true;
        var bodyrequest = "<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">" +
                        "<s:Body>" +
                            "<"getAll xmlns=\"http://tempuri.org/\" />" +
                          "</s:Body>" +
                        "</s:Envelope>";

        return $.ajax({
            type: "POST",

            //This works
            //url: "http://localhost:49704/myWebservice/service.svc",

            //this doesn't work
            url: "http://myWebservice/service.svc",
            data: bodyrequest,
            timeout: 10000,
            contentType: "text/xml",
            dataType: "xml",
            beforeSend: function (xhr) {
                xhr.setRequestHeader("SOAPAction", "http://tempuri.org/service/getAll ");
            },

        }); 
```

wcf 服务的 web.config：

```
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0"/>
</system.web>
<system.serviceModel>
    <services>
        <service name="myWebservice/service">
            <endpoint address="" binding="basicHttpBinding" contract="Contract.myWebservice"/>
        </service>
    </services>

    <behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel>

<appSettings>
  ...
</appSettings> 
```

有人有想法吗？还是有其他方法可以对 WCF 服务进行跨域 SOAP Javascript 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T04:42:24.123

这看起来像个老问题。你已经解决了吗？如果没有，您可以将实际请求发布到服务器吗？尝试用 Fiddler 捕捉它。

# java - 如何在没有 jre 的情况下运行 netbeans 应用程序，或者如果之前未安装如何运行 jre setup

> ID：16145370
> 
> 赞同：0
> 
> 时间：2013-04-22T10:54:00.297
> 
> 标签：java, netbeans-7

我通过 install4j 制作了 java 应用程序的安装文件，众所周知，netbeans 应用程序在没有 jre 的情况下无法运行。所以我的问题是，如果在安装应用程序之前没有安装 jre，有什么方法可以自动安装它。我听说有办法为此创建 .dll 或 .bat 文件，但我不知道具体情况。所以请帮忙我尽快。

谢谢和问候， 马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T13:33:27.377

[http://www.ikvm.net/](http://www.ikvm.net/)

这可能是一个很好的路线，我现在正在研究它。简而言之，它会推动你的 jar 在 .net 构建上运行

# android - Resource not found exception

> ID：16145372
> 
> 赞同：2
> 
> 时间：2013-04-22T10:54:08.677
> 
> 标签：android, datepicker

I am trying to use datepicker in my project. But as soon as I run the project, it throws "Resource not found exception" and following line appears when I drag datepicker in xml file

```
The following classes could not be found:
- CalendarView (Change to android.widget.CalendarView, Fix Build Path, Edit XML)
- DatePicker (Change to android.widget.DatePicker, Fix Build Path, Edit XML) 
```

logcat entries are as follows:

```
FATAL EXCEPTION: 

java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.dateandtimepick/com.example.dateandtimepick.MainActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x16 
```

How can I rectify the code. Thanks in advance.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T11:01:17.140

> android.content.res.Resources$NotFoundException：字符串资源 ID #0x16

您正在尝试设置`int`值

`tetview.setText()`或`Toast.makeText()`，它将作为字符串资源 id。

所以试着像这样给 int 值

`.setText(""+intvalue)`或者`Toast.makeText(context,""+intvalue,..)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T17:42:21.920

我通过重新安装 Android SDK 解决了“找不到资源”异常。出于某种原因，在打包 apk 时，SDK 工具没有打包资源。它是一个构建错误（静默错误），仅在运行时大喊大叫。我不需要重新安装 JDK 或 Eclipse。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T11:08:23.940

1.  尝试清理到项目以重建 R.java

2.  通过创建一个新的 xml 来重建 xml，我猜你可能忘记添加命名空间（xmlns:android="http://schemas.android.com/apk/res/android"）

    希望我能帮上忙。

# xcode - Passing data from detail to master in ios6

> ID：16145383
> 
> 赞同：0
> 
> 时间：2013-04-22T10:54:53.417
> 
> 标签：xcode, ios6, master-detail

I'm making an application with xcode, and I have a trouble with passing data between views.
I want to set in detail view, a date of a calendar. Then when I go back to the master view I want to see the events in the selected date, but I don`t know how I make it.
Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:03:16.507

这就是你如何在两个班级之间进行交流

```
ViewController *dvController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]];
// ViewController is controler where you want to send date from particular controler we are making object of ViewController where you want to send data
    dvController.selectedBirthdate = selectedbirthdate;
    dvController.selectedName = selectedname;
    //you are sending data in above two lines just imagine you are sending string

  [self.navigationController pushViewController:dvController animated:YES];
  //then pushviewcontroller and there you go
  [dvController release]; 
```

就那么简单

还有另一种在两个类之间进行通信的方法是应用程序委托使您成为应用程序委托的对象，然后将您想要的应用程序委托的特定变量分配给您，然后您可以在项目中的任何地方使用该变量

像这样创建应用程序委托对象

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
//and then access the variable by appDelegate.variable 
```

如果您使用的是故事板，那么您可以使用 prepareForSegue 如下所示

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:...]) {
        MyViewController *controller = (MyViewController *)segue.destinationViewController;
        controller.myProperty1 = ...;
        controller.myProperty2 = ...;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:11:21.907

基本上有两种最常见的方法：

1）如果您在项目中使用情节提要，请使用 unwind segue。该方法在这里得到了完美的讨论：

[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CreatingAddView/CreatingAddView.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CreatingAddView/CreatingAddView.html)

2）使用委托模式。当我开始学习委托时，我发现以下教程非常有用：

[http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)

# c# - C#:Throw exception to other class

> ID：16145385
> 
> 赞同：0
> 
> 时间：2013-04-22T10:54:54.403
> 
> 标签：c#, winforms, exception-handling

this is my insert data class and i want to show the exception error in my windows form like a message box how can i show the exception message?

```
public void Insert()
{
        try
        {
        objcomm.Connection = objconn;
        objcomm.CommandText = "INSERT INTO goods VALUES(N'" + g_id + "',N'" + g_name + "',N'" + g_qty + "',N'" + b_price + "',N'" + s_price + "',N'" + l_qty + "',N'" + co_id + "')";
        objconn.Open();
        objcomm.ExecuteNonQuery();
        objconn.Close();
        }
        catch(Exception ex)
        {
        GeneralException ex1 = new GeneralException(Resource1.DBError, ex);
        throw ex1;
        }
} 
```

i want to show the "Resource1.DBError" message when the exception is thrown in message box here:

```
public partial class WareForm : Form
{
        try
        {
            ware.Insert();
        }
        catch(IndexOutOfRangeException ex)
        {
            MessageBox.Show(ex.Message);
        }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:57:28.340

您需要捕获抛出的相同类型的异常：

```
 try
    {
        ware.Insert();
    }
    catch(GeneralException ex)
    {
        MessageBox.Show(ex.Message);
    } 
```

# asp.net-mvc - ASP.NET MVC Custom Route class - Can't get route data

> ID：16145387
> 
> 赞同：3
> 
> 时间：2013-04-22T10:55:02.047
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

I'm trying to implement my own route class, inheriting from the default Route.

This is what my custom route class looks like:

```
public class FriendlyRoute : Route
{
    public FriendlyRoute(string url, RouteValueDictionary defaults, IRouteHandler routeHandler)
        : base(url, defaults, routeHandler)
    {

    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var routeData = base.GetRouteData(httpContext);

        var controllerName = routeData.Values["controller"].ToString();
        var actionName = routeData.Values["action"].ToString();

        routeData.Values["controller"] = fix(controllerName);
        routeData.Values["action"] = fix(actionName);

        return routeData;
    }

    private string fix(string name)
    {
        //Remove dashes: "my-controller" => "mycontroller"
    }
} 
```

What I'm doing is accepting urls with dashes and routing the to the correct action ("my-controller/my-action" to "MyController/MyAction"), but I have some more plans for this custom route to.

To put my custom route class in action, I use the following route config:

```
routes.Add("Default",
           new FriendlyRoute("{controller}/{action}/{id}",
                             new RouteValueDictionary(new { controller = "Public", action = "Start", id = UrlParameter.Optional }),
                             new MvcRouteHandler())); 
```

This works fine! But I'm not happy with the url structure. I want to have some urls with no controller names only action names (e.g. "/about", "/contact") and some with controller names (e.g. "/mypage", "/mypage/invoices"). I start by using the default route class (not my own custom) and fix this problem:

```
routes.Add("MyPages",
           new Route("MyPage/{action}",
                     new RouteValueDictionary(new { controller = "MyPage", action = "Summary"}),
                     new MvcRouteHandler()));

routes.Add("Public",
           new Route("{action}/{id}",
                     new RouteValueDictionary(new { controller = "Public", action = "Start", id = UrlParameter.Optional }),
                     new MvcRouteHandler())); 
```

This also works fine, but now there's no support for urls with dashes. So I just swap in my custom route class into the route config:

```
routes.Add("MyPages",
           new FriendlyRoute("MyPage/{action}",
                             new RouteValueDictionary(new { controller = "MyPage", action = "Summary" }),
                             new MvcRouteHandler()));

routes.Add("Public",
           new FriendlyRoute("{action}/{id}",
                             new RouteValueDictionary(new { controller = "Public", action = "Start", id = UrlParameter.Optional }),
                             new MvcRouteHandler())); 
```

Now when I run the application I try to go to the default page ("/") it crashes because the call to base.GetRouteData(httpContext) in my FriendlyRoute.GetRouteData() returns null.

I'm all new to creating a custom route class, so any hints on what I' doing wrong would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:49:21.300

After adding the additional two routes, when the root url is hit ("/") it will be processed against route definitions sequentially top to bottom until a match is made. So now for the first route `"MyPage/{action}"` it will call the `public abstract RouteData GetRouteData(HttpContextBase httpContext);` method, which in turn matches the url with the route definition and check for constraints. It returns a `RouteValueDictionary` object in case of match and constraint check, `null` otherwise. So for the first route definition it is bound to return null as the url does not match. You should add a null check as foollowing

```
if (routeData != null)
{
    var controllerName = routeData.Values["controller"].ToString();
    var actionName = routeData.Values["action"].ToString();

    routeData.Values["controller"] = Fix(controllerName);
    routeData.Values["action"] = Fix(actionName);
} 
```

relevant resource: [Route.cs](http://www.dotnetframework.org/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/fx/src/xsp/System/Web/Routing/Route@cs/1305376/Route@cs)

hope this helps.

# algorithm - 分区减少的最短权重约束路径

> ID：16145390
> 
> 赞同：3
> 
> 时间：2013-04-22T10:55:14.960
> 
> 标签：algorithm, shortest-path, np-complete

我试图证明最短权重约束路径问题的 NP 完备性。我已经阅读了多篇论文，但是看在上帝的份上，无法弄清楚如何将其减少为分区问题。

问题是针对每条边给出的，权重 w 和长度 l，表明对于无向图，寻找路径的问题使得路径上的权重总和 < W 并且路径的长度总和 < L 其中，L和 W 是问题中给我们的常数。

我查看了 Garey 和 Johnson，它只是指出问题是 NP 完全的，并且没有提供证明或减少的方法。

# php - PHP 快速部署

> ID：16145396
> 
> 赞同：0
> 
> 时间：2013-04-22T10:55:32.177
> 
> 标签：php, deployment, web-deployment

PHP“一键式”部署到生产服务器是否有一个好的、简单的解决方案？如果需要，还具有反转功能。

特别是，我对 PHP 代码本身感兴趣。但是如果你知道一个好的 MySQL 解决方案，也欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:04:52.800

为了轻松部署，我们使用 Capistrano（它是一个 Ruby 工具，但实际上可以部署任何东西），它很棒，只需要

```
cap deploy 
```

从命令行（最简单的）

如果你想要用 PHP 编写的东西，恐怕我不能说出任何名字。

对于 MySQL，我想您需要某种迁移工具，或者将您的数据库更改构建到可以由您的部署脚本运行的 SQL 文件中。

# java - Multiplying a number without using * operator

> ID：16145398
> 
> 赞同：22
> 
> 时间：2013-04-22T10:55:34.100
> 
> 标签：java, c++

I was going through a programming class and was asked this tricky question which was left unanswered till the end of the class.

**Question**:

How can I multiply any input(Float,int etc) by 7, `without using the` `*` operator in `TWO steps`.

If anyone can give me the answer for this question with the explanation , that would be very helpful.

> **With TWO STEPS I mean suppose you are running a loop (i=0;i<7;i++) in that case number of steps will be >2, also TYPE CONVERSION, DIVISION,ADDITION etc ( Counts for steps ).**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-22T10:59:22.210

假设`float x`或`double x`在范围内定义。然后我看到以下可能性，可以在不使用运算符的情况下将其乘以 7 `*`：

在 C++ 中，您可以使用标准函子（第一步：创建函子，第二步：调用函子）：

```
x = std::multiplies<float>()(x, 7.0f);  // if x is a float
x = std::multiplies<double>()(x, 7.0);  // if x is a double 
```

或者只使用除法（由于编译器已经评估`1.0 / 7.0`，这只是一步）：

```
x = x / (1.0f / 7.0f);  // if x is a float
x = x / (1.0  / 7.0);   // if x is a double 
```

或者使用`*=`运算符（从技术上讲，它不是`*`运算符，但它只是一个步骤）：

```
x *= 7.0f;  // if x is a float
x *= 7.0;   // if x is a double 
```

或者在对数刻度中使用加法（这不是很严重，这需要两个以上的“步骤”）：

```
x = exp(log(x) + log(7.0)); 
```

另一种选择是使用汇编指令，但我现在不想写，因为它过于复杂。

如果`x`是整数，移位是另一种选择，但*不推荐*：

```
x = (x << 3) - x;   // (x * 8) - x 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-22T10:58:02.797

您可以简单地使用除以七分之一：

```
x / (1.0 / 7) 
```

这是否算作“两步”完全取决于您的定义。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-22T10:58:42.343

添加它

```
//initialise s as the number to be multiplied
 sum=0
for(i=0;i<7;i++)
    sum+=s 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-22T20:15:10.413

在 C 中，以下 hack 应该适用于以[IEEE 单精度浮点格式](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)存储的浮点数：

```
#include <stdint.h>

float mul7 (float x) {
    union {
        float f;
        uint32_t i;
    } u;
    u.f = x;
    u.i += (3 << 23);  /* increment exponent by 3 <=> multiply by 8 */
    return u.f - x;    /* 8*x - x == 7*x */
} 
```

这是两个步骤（一个整数加法，一个浮点减法），有点取决于你算作一个步骤。鉴于 C++ 或多或少地向后兼容 C，我相信类似的技巧也应该在那里。

但是请注意，这种 hack 通常不会为[subnormal](http://en.wikipedia.org/wiki/Subnormal_number)、infinite 或 NaN 输入给出正确的结果，也不会为幅度如此之大以至于将它们乘以 8 会溢出的输入给出正确的结果。

将代码调整为使用双精度数而不是浮点数作为练习留给读者。（提示：幻数是 52。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T11:00:24.367

您还可以对整数执行以下操作：

```
( x<< 3) - x 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T10:58:23.440

定义“两步”...

```
float result = 0.0f;
float input = 3.14f;
int times = 7;

// steps

while (times--)
    result += input; 
```

**编辑**：除以 (1 / 7) 不适用于`int`类型。同样在某些语言中，要使其与浮点类型一起使用，您必须将它们标记为浮点数：

```
result = input / (1.0f / 7.0f); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T11:00:28.360

```
// String num = "10";
// int num = 10;
float num = 10;

BigDecimal bigD = new BigDecimal(num);
BigDecimal seven = new BigDecimal(7);
System.out.println(seven.multiply(bigD)); 
```

你可以使用`BigDecimal`& 它的`multiply`方法。适用于几乎所有东西。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-04-22T11:24:19.150

加 7 x 次。

```
for(int i=0; i<10; i++)
    result = result+7; 
```

# c# - Display Exception on try-catch clause

> ID：16145401
> 
> 赞同：15
> 
> 时间：2013-04-22T10:55:39.180
> 
> 标签：c#, .net, exception, try-catch

Up to now, whenever I wanted to show an exception thrown from my code I used:

```
try
{
    // Code that may throw different exceptions
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());         
} 
```

I used the above code mainly for debugging reasons, in order to see the exact type of exception and the according reason the exception was thrown.

In a project I am creating now, I use several `try-catch` clauses and I would like to display a popup message in case of an exception, to make it more "user friendly". By "user friendly", I mean a message that would hide phrases like *Null Reference Exception* or *Argument Out Of Range Exception* that are currently displayed with the above code.

However I still want to see relevant info with the type of exception that created the message.

Is there a way to format the displayed output of thrown exceptions according to previous needs?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T11:00:16.270

您可以使用`.Message`，但我不建议直接捕获`Exception`。尝试捕获多个异常或显式声明异常并将错误消息定制为异常类型。

```
try 
{
   // Operations
} 
catch (ArgumentOutOfRangeException ex) 
{
   MessageBox.Show("The argument is out of range, please specify a valid argument");
} 
```

捕获`Exception`是相当通用的，可能被认为是不好的做法，因为它可能会隐藏应用程序中的错误。

您还可以通过检查异常类型来检查异常类型并进行相应的处理：

```
try
{

} 
catch (Exception e) 
{
   if (e is ArgumentOutOfRangeException) 
   { 
      MessageBox.Show("Argument is out of range");
   } 
   else if (e is FormatException) 
   { 
      MessageBox.Show("Format Exception");
   } 
   else 
   {
      throw;
   }
} 
```

如果异常是 ArgumentOutOfRange 或 FormatException，它将向用户显示一个消息框，否则它将重新抛出异常（并保留原始堆栈跟踪）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T10:57:58.090

```
try
     {
        /////Code that  may throws several types of Exceptions
     }    
     catch (Exception ex)
       {
         MessageBox.Show(ex.Message);         
       } 
```

使用上面的代码。

还可以将自定义错误消息显示为：

```
try
     {
        /////Code that  may throws several types of Exceptions
     }    
     catch (Exception ex)
       {
         MessageBox.Show("Custom Error Text "+ex.Message);         
       } 
```

**额外的 ：**

ex.toString() 和 ex.Message 之间的区别如下：

[Exception.Message 与 Exception.ToString()](https://stackoverflow.com/questions/2176707/net-ex-message-vs-ex-tostring)

**所有细节与示例：**

[http://www.dotnetperls.com/exception](http://www.dotnetperls.com/exception)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T10:56:54.197

`Exception.Message`提供比`Exception.ToString()`. 考虑这个人为的例子：

```
try
{
    throw new InvalidOperationException();
}
catch(InvalidOperationException ex)
{
    Console.WriteLine(ex.ToString());
} 
```

尽管`Message`产生的消息比`ToString()`显示的消息更简单，但对用户来说仍然没有多大意义。手动吞下异常并向用户显示自定义消息将帮助他们解决此问题，这根本不需要您付出太多努力。

```
try
{
    using (StreamReader reader = new StreamReader("fff")){}
}
catch(ArgumentException argumentEx)
{
    Console.WriteLine("The path that you specified was invalid");
    Debug.Print(argumentEx.Message);

}
catch (FileNotFoundException fileNotFoundEx)
{
    Console.WriteLine("The program could not find the specified path");
    Debug.Print(fileNotFoundEx.Message);
} 
```

您甚至可以使用`Debug.Print`将文本输出到即时窗口或输出窗口（取决于您的 VS 首选项）以进行调试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T10:57:32.343

您可以使用[Exception.Message](http://msdn.microsoft.com/en-IN/library/system.exception.message.aspx)属性来获取描述当前异常的消息。

```
 catch (Exception ex)
   {
     MessageBox.Show(ex.Messagge());         
   } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-12T22:27:56.627

试试这个代码：

```
 try
      {
        // Code that may throw different exceptions
      }
      catch (Exception exp)
      {
           MessageBox.Show(exp.Message());         
      } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-21T06:18:26.783

诀窍是使用异常的 Message 方法：

```
catch (Exception ex)
{
    MessageBox.Show(this, ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

# ajax - 强制 Apache 返回常规 PHP 页面的 Content-Length？

> ID：16145407
> 
> 赞同：2
> 
> 时间：2013-04-22T10:55:53.347
> 
> 标签：ajax, loader, content-length

我正在建设一个 ajax 网站，它需要一个用于新页面的百分比加载器。新页面通过 ajax 加载、缓存和滑动动画。无论如何，为了做到这一点，我需要以某种方式获取我将在当前请求期间接收的内容的大小，以便计算百分比。不幸的是，它没有`Content-Length`为页面设置标题，而只是为文件设置标题。我可以强制它始终添加标题吗？还有其他方法可以创建这个百分比加载器吗？任何想法都会有所帮助。谢谢！

# msbuild - Jenkins 在 signtool.exe 中失败

> ID：16145409
> 
> 赞同：0
> 
> 时间：2013-04-22T10:55:55.700
> 
> 标签：msbuild, jenkins, signtool

我正在使用 signtool.exe 通过 Jenkins 中的 proj 文件唱出我的 msi 输出。我签署 msi 的命令是*"C:\Program Files\Microsoft SDKs\Windows\v6.1\Bin\signtool.exe" sign /f "C:\Build\SignCertificate.cer" /csp "Microsoft Enhanced Cryptographic Provider v1.0" /k privatekeycontainer /t " [http://timestamp.verisign.com/scripts/timstamp.dll](http://timestamp.verisign.com/scripts/timstamp.dll) " "..\Release\output.msi"*。pfx 文件被添加到证书存储中。

每当我通过命令提示符执行它时，它都会通过并且 msi 会被签名。但是，如果我尝试通过 Jenkins，那么它会失败。请帮助我有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T16:19:22.340

将证书导入机器存储而不是用户存储。此处描述的步骤 [http://www.dartmouth.edu/~deploypki/materials/web_authn/pages/IISonXP_AddingTrustedCACertToComputer.htm](http://www.dartmouth.edu/~deploypki/materials/web_authn/pages/IISonXP_AddingTrustedCACertToComputer.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:50:59.077

尝试以下步骤：

1.  创建用户“Jenkins”作为管理员组成员
2.  以用户 'Jenkins' 的身份运行 Jenkins 服务
3.  以 Jenkins 用户身份登录并在用户存储中安装证书。
4.  通过 Jenkins 运行它

另外，请查看与您的问题非常相似的此链接： [SignTool Error: ISignedCode::Sign returned error: 0x80092006](https://stackoverflow.com/questions/1045855/signtool-error-isignedcodesign-returned-error-0x80092006)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:47:34.300

我的问题解决了。pfx 未使用私钥正确导入。现在叶子告诉它有一个私钥。所以问题出在 pfx 文件上。

# java - 从给定问题的 cookie 中获取值

> ID：16145415
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:10.060
> 
> 标签：java, cookies, guice, inject

当用户第一次登录时，我在 cookie 中设置用户值，然后在响应中设置 cookie。

这是我的代码片段：

Cookie cookie = new Cookie("userId","1"); cookie.setMaxAge((7*24) * 60 * 60); response.addCookie(cookie);

但这是在 .java 类中完成的。因为我使用 guice 注入器得到了 HttpServletResponse 对象：

```
HttpServletResponse response = injector.getInstance(HttpServletResponse.class); 
```

然后我关闭我的应用程序并再次打开，然后我用 cookie 名称读取 cookie 中设置的值。但我没有看到之前设置了名为 userId 的 cookie。我只能在 coockie 集中看到 JSESSIONID。

那么如何从 cookie 中获取 usedId 值。?

# php - simple_xml_load_string 如果没有返回

> ID：16145420
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:19.190
> 
> 标签：php, xml, simplexml

如果xml结果确实存在，我试图只运行一个循环。我通过以下方式获取 xml 结果：

```
$albums = simplexml_load_string(curl_get($api_url . '/videos.xml')); 
```

我想要做的是在下一行说：

```
if($albums = hasAValue())
    // Loop 
```

有任何想法吗？或者在加载 XML 数据之前进行检查的方法？

旁注：这是使用 Vimeo API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:06:23.843

不，您需要进一步使用命名空间的结果，直到 body 给出 xpath 并继续工作。

```
$albums->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/'); 
```

具体来说，让我知道你得到的 XML 响应，我会让你输出。

更新

```
$albums = simplexml_load_string("#your response#");
echo count($xml->children()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:05:54.323

肮脏的方式：

```
$albums = @simplexml_load_string(curl_get($api_url . '/videos.xml'));
if ($albums) 
{
    ...
} 
```

这很脏，因为[错误控制运算符`@`](http://php.net/language.operators.errorcontrol)用于“处理”错误情况（例如，获取远程位置的问题）。

另一种方法是在此处进行更多区分：

```
$xml = curl_get($api_url . '/videos.xml');

$albums = NULL;

if ($xml) 
{
    $albums = simplexml_load_string($xml);
}

if ($albums) 
{
    ...
} 
```

# iphone - 如何在ios中存储和获取应用内购买的响应？

> ID：16145421
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:21.887
> 
> 标签：iphone, ios, xcode, ipad, in-app-purchase

我已经在我的项目中实现了应用内购买。实现效果很好，但我在存储响应时遇到了问题。

我解锁了按钮，当我通过应用内购买时，按钮将被解锁，响应变为真。

但是当我回到我从这堂课上来的那个班，然后又跳回这堂课时，我的按钮又被锁定了，因为我无法存储响应。

我正在这样做：

```
.h file
bool isPurchased;

 -(void) successfulPurchase:(EBPurchase*)ebp restored:(bool)isRestore identifier:(NSString*)productId receipt:(NSData*)transactionReceipt
{
NSLog(@"ViewController successfulPurchase");

// Purchase or Restore request was successful, so...
// 1 - Unlock the purchased content for your new customer!
// 2 - Notify the user that the transaction was successful.

if (!isPurchased)
{
   // If paid status has not yet changed, then do so now. Checking
   // isPurchased boolean ensures user is only shown Thank You message
   // once even if multiple transaction receipts are successfully
   // processed (such as past subscription renewals).

   isPurchased = YES;

   if([[[NSUserDefaults standardUserDefaults] objectForKey:@"isPurchased"]     isEqualToString:@"true"]){

isPurchased = YES;
// do something

}
else{
isPurchased = NO;
//isFailed = NO;
 // do something  
}

   //-------------------------------------

   // 1 - Unlock the purchased content and update the app's stored settings.

   //-------------------------------------

   // 2 - Notify the user that the transaction was successful.

   NSString *alertMessage;

   if (isRestore) {
       // This was a Restore request.
       alertMessage = @"Your purchase was restored and the Game Levels Pack is now  unlocked for your enjoyment!";

   } else {
       // This was a Purchase request.
       alertMessage = @"Your purchase was successful and the Game Levels Pack is now   unlocked for your enjoyment!";

       //  if (my_unlock_button == TRUE) {
       buyButton.hidden=YES;                   // These are the buttons  I unlocked
       buybutton1.hidden=YES;                 // These are the buttons   I unlocked

       //}

   }

   UIAlertView *updatedAlert = [[UIAlertView alloc] initWithTitle:@"Thank You!"  message:alertMessage delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
   [updatedAlert show];
   [updatedAlert release];
}
} 
```

如何存储和获取响应以便我可以检查响应？

非常欢迎专家提出任何想法或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:07:00.177

你需要像这样实现它。

购买成功`bool`后在`NSUserDefaults`like中设置一个：

```
[[NSUserDefaults standardUserDefaults] setBool:YES ForKey:@"isPurchased"]; 
```

在`viewDidLoad`课堂上，这样写：

```
if([[NSUserDefaults standardUserDefaults] boolForKey:@"isPurchased"])
{
   //Enable/show the button
}
else
{
   //disable/hide button
} 
```

这是一个很好的[教程](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)，也请参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T11:40:37.377

我为非消耗品开发了[storekit](https://github.com/idzDeveloper/IDZStoreKit)。你可以试试看。;)

快乐编码！

# c# - (MfA) - 字典类型的 CollectionDataContractAttribute 上的名称属性被忽略

> ID：16145424
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:25.353
> 
> 标签：c#, xamarin.android

*请注意，我在此处发布此 QA 以帮助其他人，并作为合作伙伴[在 Xamarin.Android Bugzilla 区域上报告错误 11881](https://bugzilla.xamarin.com/show_bug.cgi?id=11881)。因此，下面描述的类型仅用于演示目的。我已经发布了一个初步答案，也参考了相同的错误报告，但希望在某个时候这个问题可以用“这已在 xy 版本中修复”来“回答”。*

我在 Mono for Android 和 Windows RT 源之间共享以下类型：

```
[CollectionDataContract(Name = "MyDictionary", 
    Namespace = "http://foo.bar/schema", 
    ItemName = "pair", 
    KeyName = "mykey", 
    ValueName = "myvalue")]
public class MyDictionary : Dictionary<string, string>
{

} 
```

这是从我们的 Web API（在 Asp.Net Web API，Framework 4.5 上运行）读取为 XML 的，如下所示：

```
<MyDictionary 
 xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://foo.bar/schema">
  <pair>
    <mykey>message1</mykey>
    <myvalue>Hello</myvalue>
  <pair>
  <pair>
    <mykey>message2</mykey>
    <myvalue>World</myvalue>
  <pair>
</MyDictionary> 
```

使用上述类时，此 XML 在 Windows、Windows Phone 和 Win-RT 平台上正确反序列化。

但是，在 Mono for Android 版本中，我得到了

> `System.Runtime.Serialization.SerializationException: Expected element 'ArrayOfpair' in namespace 'http://foo.bar/schema', but found Element node 'MyDictionary' in namespace 'http://foo.bar/schema'`.

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:56:25.353

假设我没有做错任何事 - 我编写了一个 NUnitLight 单元测试来测试`MyDictionary`Mono for Android 实现的实例是否会被正确序列化`DataContractSerializer`：

```
public string Serialize(object o)
{
  DataContractSerializer ser = new DataContractSerializer(o.GetType());
  using (var ms = new MemoryStream())
  {
    ser.WriteObject(ms, o);
    return Encoding.Default.GetString(ms.ToArray());
  }
}

[Test]
public void ShouldSerializeDictionaryCorrectlyAndDeserialize()
{
  MyDictionary dict = new MyDictionary();
  dict["message1"] = "hello";
  dict["message2"] = "world";
  var s = Serialize(dict);
  Assert.That(s, Is.StringStarting("<MyDictionary"));
} 
```

单元测试失败，输出字符串以“ArrayOfpair”开头而*不是“MyDictionary”，这与**正确*XML的反序列化失败的原始行为一致，因为它没有以“ArrayOfpair”开头。

因此，这是 Mono for Android 实现中的错误的一个很好的候选者`DataContractSerializer`（[我已经在此处报告了错误](https://bugzilla.xamarin.com/show_bug.cgi?id=11881)） - 但在确认并修复该错误之前，将需要解决方法。就我而言，我已经共享了要解决的代码库问题（Android、Windows 和 Monotouch），因此我不想只为 Android 重写这种类型。如果我想出一个体面的解决方法，我会在这个答案上发布。

*请注意 - 我还不知道这是否也适用于 Monotouch - 我们还没有足够完整的组件构建来运行相同的测试，所以它可能会，我只是不知道。*

# sql - 检查 SQL 中是否存在子集

> ID：16145428
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:28.757
> 
> 标签：sql

```
CREATE TABLE orders (
    Order_ID int,
    Product_ID int,
    PRIMARY KEY(Order_ID,Product_ID)
);

INSERT INTO orders VALUES (1,1), (1,2), (1,3), (2,2), (2,3), (3,3), (3,4); 
```

每个订单都有一套产品；我如何获得将订单 2 的产品集作为其产品集子集的所有订单？

我想得到结果

```
OrderID
--
 1
 2 
```

为了进一步了解：

在示例中：订单 2 有产品 {2,3}

结果必须是订单 1 和 2，因为订单 1 有产品 {1,2,3} — 它有子集 {2,3}。另一方面，订单 3 的产品集是 {3,4} - 它没有子集 {2,3}，因此它不能在结果中返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:22:21.023

```
SELECT DISTINCT Order_ID 
FROM Orders T1 
WHERE NOT EXISTS (
    SELECT Product_ID 
    FROM Orders 
    WHERE Order_ID = 2
  EXCEPT
    SELECT Product_ID 
    FROM Orders 
    WHERE Order_ID = T1.Order_ID); 
```

好吧，这可能不是最有效的方法，但是，嘿！无论如何，DBMS 将不得不查看每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:09:58.250

我认为应该是这样的

```
select distinct orderid
from table_name
where product_id in ALL (select product_id from table_name where orderid = 2) 
```

# android - Application class lifecycle while service is running

> ID：16145435
> 
> 赞同：13
> 
> 时间：2013-04-22T10:56:45.340
> 
> 标签：android, service, lifecycle

I am developing an application with custom Application class which initializes a couple of singletons so they live during all application working time. I also have a couple of services in my application which work with these singletons. Is it possible situation that Application class will be destroyed by android with singletons' instances before services so services will not be able to use them? Or application lives always even for services of it's context? What is the best way to find a way out of this situation?

Thanks.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T11:12:59.243

*   关于申请对象：

应用程序对象是任何 Android 应用程序的主要绝对起点。它始终存在于任何 Manifest 声明的项目（如 Activity、Service 和 BroadcastReceiver）之前。所以放松一下，单身人士会在你身边。

*   关于单例范式：

这是一个很大的讨论话题，你可以谷歌更多关于它的内容，以下是我个人对此的看法。无论您的单例（数据库、位图缓存、FileUtils）的原因是什么，我认为在应用程序的第一个入口点（即应用程序）初始化它们是可以且正确的。但是应用程序本身并不是用来携带或容纳这些对象的对象，我建议的设计方法是：

=> 在您的单例对象/类上，您必须：

```
private static MySingletonClass instance; // reference to the single object
private MySingletonClass(Context c){ // private constructor to avoid construction from anywhere else
    // let's say it needs the context for construction because it's a database singleton
}
public static MySingletonClass get(){ // 
    if(instance == null) throw new RuntimeException("This singleton must be initialised before anything else");
    return instance;
}
public static void init(Context c){ // call the initialisation from the Application
   instance = new MySingletonClass(c);
} 
```

=> 然后在您的 Application 对象上，您只需初始化单例

```
onCreate(){
   MySingletonClass.init(getApplicationContext());
} 
```

通过这种方式，您将保持必要的初始化，强制执行单例模式，但访问您调用的对象类而不是应用程序。我知道这只是组织上的差异，但我相信这就是区分好代码和坏代码的原因。

因此，例如在您的服务上，调用是：`MySingletonClass.get()`并且永远不应该是`MyApplication.mySingle`.

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T11:02:22.253

根据我的理解，服务不能没有应用程序`context`，服务与`Context`引用绑定到应用程序，所以我认为如果应用程序被杀死也`Context`被杀死并且导致所有组件都被杀死，

你可以在这里阅读更多信息

[http://developer.android.com/guide/components/fundamentals.html#proclife](http://developer.android.com/guide/components/fundamentals.html#proclife)

# sql - Count from another table with join

> ID：16145437
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:46.207
> 
> 标签：sql, sql-server, join, count

How can I Count the Lending comments for each lending (the comments is on another table called "LendingComments" with a reference Column called "LendingId" ?

```
SELECT LendingStatus.Status, Products.Productname, Products.Serial_number,    Deposits.Amount, Lendings.DeliveryDate, Lendings.Id AS LendingId, Products.Id AS ProductId  FROM Lendings
LEFT JOIN Products ON Lendings.ProductId = Products.Id
LEFT JOIN LendingStatus ON Lendings.StatusId = LendingStatus.Id
LEFT JOIN Deposits ON Lendings.DepositId = Deposits.Id
WHERE PersonId = 561 ORDER BY DeliveryDate DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:07:49.273

像这样的马比（如果我对这个问题理解得足够好）

```
SELECT
LendingStatus.Status, Products.Productname, Products.Serial_number,Deposits.Amount, Lendings.DeliveryDate, Lendings.Id AS LendingId, Products.Id AS ProductId, LendingComments.NumLendingComments
FROM Lendings
LEFT JOIN Products ON Lendings.ProductId = Products.Id
LEFT JOIN LendingStatus ON Lendings.StatusId = LendingStatus.Id
LEFT JOIN Deposits ON Lendings.DepositId = Deposits.Id
OUTER APPLY
(
SELECT
    COUNT(*) AS NumLendingComments
    FROM
        LendingComments PL
    WHERE
        PL.LendingID = Lendings.LendingID
) AS LendingComments WHERE Personid = 561 ORDER BY DeliveryDate desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:00:56.230

也许这有帮助：

```
SELECT CommentCount = Sum(lc.comments) 
                      OVER ( 
                        partition BY lc.id), 
       lendingstatus.status, 
       products.productname, 
       products.serial_number, 
       deposits.amount, 
       lendings.deliverydate, 
       lendings.id AS LendingId, 
       products.id AS ProductId 
FROM   lendings 
       LEFT JOIN products 
              ON lendings.productid = products.id 
       LEFT JOIN lendingstatus 
              ON lendings.statusid = lendingstatus.id 
       LEFT JOIN deposits 
              ON lendings.depositid = deposits.id 
       LEFT JOIN LendingComments lc
              ON lc.LendingId = lendings.Lendings.Id
WHERE  personid = 561 
ORDER  BY deliverydate DESC 
```

但是，您还没有显示`PersonLendings`表格，是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:07:28.593

试试这个——

```
SELECT  ls.status
    ,   p.Productname
    ,   p.Serial_number
    ,   d.AMOUNT
    ,   l.DeliveryDate
    ,   l.Id AS LendingId
    ,   p.Id AS ProductId
    ,   pl.cnt
FROM dbo.Lendings l
LEFT JOIN (
    SELECT pl.LendingId, cnt = COUNT(pl.LendingComments)
    FROM dbo.PersonLendings pl
    GROUP BY pl.LendingId
) pl ON pl.LendingId = l.LendingId
LEFT JOIN dbo.Products p ON l.ProductId = p.Id
LEFT JOIN dbo.LendingStatus ls ON l.StatusId = ls.Id
LEFT JOIN dbo.Deposits d ON l.DepositId = d.Id
WHERE PersonID = 561
ORDER BY l.DeliveryDate DESC 
```

# magento - 如何在 magento 管理面板中添加额外字段以上传 pdf？

> ID：16145439
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:52.107
> 
> 标签：magento, magento-1.7

我是 magento 的新手。我需要在添加产品页面中提供上传 pdf 的选项。只需要提供带有额外字段的文件上传选项。我正在使用magento 1.7。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:13:53.520

有两种方法可以实现这一目标：

## 1.简单的

创建一个新的产品属性，比如说`product_pdf`文本字段，并将其分配给某个组和属性集。此字段现在应该反映在您的管理员产品页面中，并允许您保存 PDF 名称。

然后在您的 Magento 上创建一个目录（可能在 中`media/pdf`）并保存所有 PDF（如果有）。如果不是，那么每次您将值保存在我们创建的产品自定义属性 ( `product_pdf`) 中时，还要在您创建的位置手动上传 PDF ( `media/pdf`)。

因此，每当您想在前端显示产品的 PDF 时，您总是会从`product_pdf`属性中获取文件名，位置应该是`media/pdf`.

## 2.困难/冗长的一个：

在 Magento 管理员的管理产品屏幕中创建文件上传器。从创建新字段到上传，一切都应该在您的自定义模块中。

我不会走太远，但给你一些你可以确切知道如何使用它的地方：http: [//www.magentocommerce.com/boards/viewthread/11667/P0/](http://www.magentocommerce.com/boards/viewthread/11667/P0/)

# r - Problems with grouping factor, data frame, and tapply

> ID：16145440
> 
> 赞同：1
> 
> 时间：2013-04-22T10:56:52.403
> 
> 标签：r, statistics, dataframe, tapply

I am very new to R and stats in general and am having trouble getting tapply() to work. I have a data frame with 15 columns and thousands of rows. I made a bunch of logical vectors using something like `y1<-((x>0)&(x<=5))` and similar, where x is a column name in the data frame. These logical vectors were then combined and converted into a grouping factor using factor(). Everything looks to be working fine with this.

The problem is that when I try to use tapply() with `tapply(dataframe, group, sample, size=20)` where `group` is the grouping factor, I get the error: 'arguments must have same length'. When I try `length(dataframe)` I get the number of columns in the data frame (only 15), whereas `length(group)` returns the number of rows (thousands). Is there an error in the way I'm creating my logical vectors and grouping factor?

Here's the output from dput() as Maxim.K suggested: (sorry, it's not very tidy)

```
 structure(list(Lat = c(-90L, -90L, -90L, -90L, -90L, -90L, -90L, 
-90L, -90L, -90L, -90L, -90L, -90L, -90L, -90L), Lon = -180:-166, 
    Jan = c(2.79, 2.79, 2.79, 2.79, 2.79, 2.79, 2.79, 2.79, 2.79, 
    2.79, 2.79, 2.79, 2.79, 2.79, 2.79), Feb = c(2.35, 2.35, 
    2.35, 2.35, 2.35, 2.35, 2.35, 2.35, 2.35, 2.35, 2.35, 2.35, 
    2.35, 2.35, 2.35), Mar = c(0.49, 0.49, 0.49, 0.49, 0.49, 
    0.49, 0.49, 0.49, 0.49, 0.49, 0.49, 0.49, 0.49, 0.49, 0.49
    ), Apr = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 
    May = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Jun = c(0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Jul = c(0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Aug = c(0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Sep = c(0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Oct = c(1.75, 1.75, 1.75, 
    1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 
    1.75, 1.75), Nov = c(2.77, 2.77, 2.77, 2.77, 2.77, 2.77, 
    2.77, 2.77, 2.77, 2.77, 2.77, 2.77, 2.77, 2.77, 2.77), Dec = c(2.65, 
    2.65, 2.65, 2.65, 2.65, 2.65, 2.65, 2.65, 2.65, 2.65, 2.65, 
    2.65, 2.65, 2.65, 2.65), Ann = c(1.07, 1.07, 1.07, 1.07, 
    1.07, 1.07, 1.07, 1.07, 1.07, 1.07, 1.07, 1.07, 1.07, 1.07, 
    1.07)), .Names = c("Lat", "Lon", "Jan", "Feb", "Mar", "Apr", 
"May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "Ann"
), row.names = c(NA, 15L), class = "data.frame") 
```

And for group:

15 values from the head (from dput())

```
 structure(c(8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
    8L, 8L), .Label = c("1", "2", "3", "4", "5", "6", "7", "8"), class = "factor") 
```

... and from the tail

```
structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L), .Label = c("1", "2", "3", "4", "5", "6", "7", "8"), class = "factor") 
```

I'm trying to take random samples from all 8 categories using tapply() (of size 20).

[edit] Totally unsurprisingly, the problem was not with the question and requirements but with my comprehension. I misread the question; in fact, I was only supposed to sample from one column, not from the entire data frame.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:39:10.260

`tapply`可以在这里使用，您只需将`group`向量添加到您的`data.frame`然后使用`tapply`如下：

```
# Generating a 'group' vector with variability in its values 
# and merging it to the existing data.frame (FOO)
set.seed(1)
FOO$group <- as.factor(sample( 1:8, nrow(FOO), replace=TRUE)) 

# Using tapply
tapply(FOO[,-16], FOO[,16], sample, size=20, replace=TRUE) 
```

这可能是你作业的答案。

# telerik - 如何向 fck 编辑器添加一些文本？

> ID：16145441
> 
> 赞同：0
> 
> 时间：2013-04-22T10:56:52.947
> 
> 标签：telerik, telerik-test-studio

我正在自动化使用 FCK 编辑器的应用程序。我使用 Telerik 作为自动化工具。Telerik 记录以下操作，单击 FCK 编辑器，输入内容并单击提交。它将正确记录操作，但无法运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:32:46.967

如果您不能使用设计器来执行此操作，则始终可以依赖编码方法。请参阅以下[Telerik Test Studio 文档链接](http://www.telerik.com/automated-testing-tools/support/documentation/user-guide/write-tests-in-code/advanced-topics/javascript/invoking-javascript.aspx)。文档的演示是这样的。这可以修改为与 FCK 编辑器一起使用。

```
// Call a JavaScript function with parameters
// NOTE: It is important to enclose literal string parameter with double quote and not single
// quotes. IE will fail if you don't do so.
Actions.InvokeScript(@"Test2(""WebAii"", 4)");

// Call a JavaScript function and get its return values
string jsRetValue = Actions.InvokeScript("Test3();");
// Call a JavaScript function that returns a value
int val = Actions.InvokeScript<int>(@"Test3(""Bear"", ""Utah"")"); 
```

我不知道 FCK 编辑器的确切 API，所以我无法提供更多具体信息。但是要使用 API，您可以渲染脚本来执行此操作。

# d3.js - 将现有元素移动到 DOM 中的顶部

> ID：16145444
> 
> 赞同：3
> 
> 时间：2013-04-22T10:57:00.983
> 
> 标签：d3.js

有没有一种简单的方法在移除之前重新排序（发送到顶部）现有的 DOM 元素？

我想这样做的原因是除了 DOM 顺序之外没有其他 z-index 渲染顺序。我希望通过输入和更新元素来覆盖我的现有元素。如果它们在 DOM 中向上移动，它们将被下面的元素覆盖。对于输入元素，这当然不是问题，因为我只是将它们附加到底部或将它们插入`.insert("g",":first-child")`到顶部。

或者，我可以向下移动更新和输入元素。如果这样更容易。

但是如何移动元素？

# pattern-matching - Difference between Closed and open Sequential Pattern Mining Algorithms

> ID：16145448
> 
> 赞同：27
> 
> 时间：2013-04-22T10:57:14.967
> 
> 标签：pattern-matching, data-mining, sequential, apriori

I want to use some algorithms to mine my log data.

I found a pattern mining framework on: [http://www.philippe-fournier-viger.com/spmf/index.php?link=algorithms.php](http://www.philippe-fournier-viger.com/spmf/index.php?link=algorithms.php)

I have tried several algorithms, the BIDE+ algorithm performs the best.

The BIDE+ algorithm is for mining frequent closed sequential patterns from a sequence database.

Can someone explain the definition about "closed" sequential patterns and open ones?

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-26T14:54:22.040

很高兴您使用我的[SPMF 软件](http://www.philippe-fournier-viger.com/spmf/)。

顺序模式的**支持是**包含顺序模式的序列数。

**频繁序列模式**是至少出现在序列数据库的“minsup”序列中的模式，其中minsup**是**用户设置的参数。

**频繁闭合序列模式**是一种频繁序列模式，因此它不包含在具有完全相同支持的另一个序列模式中。

**PrefixSpan**等算法会发现频繁的顺序模式。诸如**BIDE** + 之类的算法会发现频繁的闭合序列模式。BIDE+ 通常比 PrefixSpan 快得多，因为它使用修剪技术来避免生成所有顺序模式。此外，封闭模式的集合通常比顺序模式的集合小得多，因此 BIDE+ 的内存效率也更高。

另一件重要的事情是，封闭的顺序模式是所有顺序模式的紧凑且无损的表示。这意味着封闭的序列模式集通常要小得多，但它是无损的，这意味着它允许恢复完整的序列模式集（没有信息丢失），这非常方便。

我可以给你一个简单的例子。

让我们考虑4个序列：

```
a  b  c  d  e
a  b  d
b  e  a  
b  c  d  e 
```

假设 minsup = 2。

`b c`是一个频繁的序列模式，因为它出现在两个序列中（它支持 2）。`b c`不是封闭的序列模式，因为它包含在`b c d`具有相同支持的更大的序列模式中。

`b c d`支持为 2。它也不是一个封闭的序列模式，因为它包含在`b c d e`具有相同支持的更大的序列模式中。 `b c d e`是一个封闭的顺序模式，因为它不包含在具有相同支持的任何其他顺序模式中。

顺便说一句，你也可以查看我关于[序列模式挖掘](http://www.philippe-fournier-viger.com/dspr-paper5.pdf)的调查。它很好地介绍了这个主题和不同的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:42:34.607

[查看有关频繁](http://i.stanford.edu/~ullman/mmds/ch6.pdf)项集和[频繁项集挖掘和关联规则](http://www.stanford.edu/class/cs246/slides/02-assocrules.pdf)的本章

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:59:42.537

谷歌搜索“封闭频繁项集”。将有很多页面解释这一点，任何数据挖掘书籍（查找 APRIORI 算法）也是如此。

“封闭”表示没有更大的项集具有*相同*的支持。可以有更大的项集，但它们必须具有较低的支持度。

对于大多数用例，仅查看最大项集或封闭项集就足够了。

# java - WordCount MapReduce 给出了意想不到的结果

> ID：16145450
> 
> 赞同：0
> 
> 时间：2013-04-22T10:57:20.640
> 
> 标签：java, hadoop, mapreduce, word-count

我在mapreduce中尝试这个java代码来计算wordcount，在reduce方法完成后，我想显示唯一出现最大次数的单词。

为此，我创建了一些名为 myoutput、mykey 和 completeSum 的类级别变量。

我正在用 close 方法写入这些数据，但最后我得到了意想不到的结果。

```
public class WordCount {

public static class Map extends MapReduceBase implements
        Mapper<LongWritable, Text, Text, IntWritable> {
    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value,
            OutputCollector<Text, IntWritable> output, Reporter reporter)
            throws IOException {
        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);

        while (tokenizer.hasMoreTokens()) {
            word.set(tokenizer.nextToken());
            output.collect(word, one);
        }

    }
}

static int completeSum = -1;
static OutputCollector<Text, IntWritable> myoutput;
static Text mykey = new Text();

public static class Reduce extends MapReduceBase implements
        Reducer<Text, IntWritable, Text, IntWritable> {

    public void reduce(Text key, Iterator<IntWritable> values,
            OutputCollector<Text, IntWritable> output, Reporter reporter)
            throws IOException {
        int sum = 0;
        while (values.hasNext()) {
            sum += values.next().get();
        }

        if (completeSum < sum) {
            completeSum = sum;
            myoutput = output;
            mykey = key;
        }

    }

    @Override
    public void close() throws IOException {
        // TODO Auto-generated method stub
        super.close();
        myoutput.collect(mykey, new IntWritable(completeSum));
    }
}

public static void main(String[] args) throws Exception {

    JobConf conf = new JobConf(WordCount.class);
    conf.setJobName("wordcount");

    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(IntWritable.class);

    conf.setMapperClass(Map.class);
    // conf.setCombinerClass(Reduce.class);
    conf.setReducerClass(Reduce.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    FileInputFormat.setInputPaths(conf, new Path(args[0]));
    FileOutputFormat.setOutputPath(conf, new Path(args[1]));

    JobClient.runJob(conf);

}
} 
```

* * *

## 输入文件数据

```
one 
three three three
four four four four 
 six six six six six six six six six six six six six six six six six six 
five five five five five 
seven seven seven seven seven seven seven seven seven seven seven seven seven 
```

* * *

## 结果应该是

```
six 18 
```

* * *

## 但是我得到了这个结果

```
three 18 
```

* * *

通过结果，我可以看到总和是正确的，但关键不是。

## 如果有人可以在这些 map 和 reduce 方法上提供很好的参考，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:40.763

您观察到的问题是由于参考别名。引用的对象`key`与新内容一起用于多次调用，从而更改`mykey`引用同一对象的内容。它以最后一个缩减键结束。这可以通过复制对象来避免，如下所示：

```
mykey = new Text(key); 
```

但是，您应该仅从输出文件中获取结果，因为`static`变量不能由分布式集群中的不同节点共享。它只能在独立模式下工作，违背了 map-reduce 的目的。

最后，使用全局变量，即使在独立模式下，如果使用并行本地任务，很可能会导致竞争（参见[MAPREDUCE-1367](https://issues.apache.org/jira/browse/MAPREDUCE-1367)和[MAPREDUCE-434](https://issues.apache.org/jira/browse/MAPREDUCE-434)）。

# reporting - Cognos Reporting 中的条件查询或模型

> ID：16145452
> 
> 赞同：0
> 
> 时间：2013-04-22T10:57:25.060
> 
> 标签：reporting, cognos

我是 Cognos Reporting 的新手，我想知道有一种方法可以创建有条件的模型/查询。例如：

```
"if x is not null then append this 'where line' to query" 
```

类似的东西，我对 Cognos 还是很陌生，所以我可能用错了词。

请帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:36:32.433

如果要过滤查询主题的行，请右键单击查询主题>编辑定义>过滤器选项卡>添加过滤器在表达式定义框中，

```
x is null or (x is not null and <where expression to append>) 
```

如果要对查询项应用过滤器

```
case 
when x is not null and <where expression to append>
  then <some_query_item>
  else <some_query_item>
 end 
```

# java - Java URL Encode 如何将 Hello World 编码为 Hello%20World

> ID：16145453
> 
> 赞同：2
> 
> 时间：2013-04-22T10:57:25.997
> 
> 标签：java, iis

嗨 Um 对 Java 很陌生，我想将 Hello World 编码为 Hello%20World 。但是当我使用 URLEncoder.encode 时，它​​会将字符串编码为 Hello+World，当我们尝试通过请求将其传递给 IIS 时，它会被视为威胁。如我所述，如何编码？先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T11:05:19.790

这仅适用于真实的 URL

```
URL u = new URL("Hello World");
String path = u.getPath(); 
```

# java - Variable not displaying in Cat Log

> ID：16145457
> 
> 赞同：1
> 
> 时间：2013-04-22T10:57:39.873
> 
> 标签：java, android, algorithm, variables, global-variables

I have an arraylist of Integers. When there is a button click the data in the text field gets converted and added to the array list as an int. Here is my code for that below

```
public void onClick(View v) {
            // TODO Auto-generated method stub

            String rate = happy.getText().toString();
            int rating = Integer.valueOf(rate);
            counter += 1;

            if (counter == 10) {
                train();
            }

            if (rating > 0 && rating < 11) {
                happyRating.add(rating);

                test = happyRating.get(0);
                Log.d("Value: ", Integer.toString(test));

            } else {

                InputAlertHandler.post(new Runnable() {
                    public void run() {
                        int duration = Toast.LENGTH_LONG;
                        CharSequence text = "Please enter Happiness Indicator between 1 and 10";
                        Context context = getApplicationContext();
                        inputAlert = Toast
                                .makeText(context, text, duration);
                        inputAlert.show();
                    }
                });
            }
        } 
```

In the function train(); I am getting data from this array list and using it in calculations.

```
public void train() {

    for (int i = 2; i < 12; i++) {

        if (happyRating.get(i - 1) < happyRating.size()){

            int x, x1, x2, y, y1, y2;
            double learningRate = -0.00002;

            x1 = happyRating.get(i - 1);
            x2 = happyRating.get(i - 2);
            y1 = iteration[i - 1];
            y2 = iteration[i - 2];

            x = x2 - x1;
            y = y2 - y1;

            if (x == 0) {
                slope = 0;
            } else {
                slope = (y2 - y1) / (x2 - x1);
            }
            j++;

            Log.d("J: ", Integer.toString(j));

            double weightAdj = happyRating.get(j) * slope * learningRate;

            weighting = (weighting + weightAdj);

            Log.d("WEIGHTING: ", Double.toString(weighting));// break;

        }
        else
        {
            break;
        }

    } 
```

As I am using slope for my calculations I am getting the slope of the previous two points, so that's why I'm setting int i = 2 in my for loop.

I've put in the check to ensure I don't get an Index out of bounds exception. My problem is, neither J nor WEIGHTING are showing up in my logcat. Now whether this means they're not calculated or what I don't know, but they are initialised as two globals so at least that value should print? I need to figure this out as soon as possible so if there's anyone out there that could shed some light on this, I'm sure it's something simple, but I've been looking at this project for so long my eyes hurt!!!

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:05:15.780

代替

```
 Log.d("WEIGHTING: ", Double.toString(weighting));// break; 
```

在 logcat 控制台中声明一个关键字，例如“输出”和写入：

```
 Log.d("output","WEIGHTING: "+Double.toString(weighting));// break; 
```

Log的第一个参数。必须是您的 logcat 输出的关键字。

## 编辑

Logcat 似乎不是问题。所以，问题在于 for 循环。如果您的 happyRating 肯定是 10，则会发生以下情况：

```
 for (int i = 2; i < 12; i++) {

    if (happyRating.get(i - 1) < happyRating.size()){ 
```

当 i 达到 11 时，它会尝试获取项目 nr。10 来自happyRating（因为你分 1）。但是没有，最大值是项目编号。9（因为java是从0开始计数的）。你可以在这里达到的最大大小是9，所以如果你需要执行12次for循环，你必须尝试另一种方式

## 编辑

对不起，我暂时无法测试代码，如果有错误，请不要投反对票，我会在家里测试它。但这也应该工作......

```
 public void train() {

for (int i = 0; i < happyRating.size()-1; i++) {

    if (happyRating.get(i) < happyRating.size()){

        int x, x1, x2, y, y1, y2;
        double learningRate = -0.00002;

        x1 = happyRating.get(i+1);
        x2 = happyRating.get(i);
        y1 = iteration[i+1];
        y2 = iteration[i];

        x = x2 - x1;
        y = y2 - y1;

        if (x == 0) {
            slope = 0;
        } else {
            slope = (y2 - y1) / (x2 - x1);
        }
        j++;

        Log.d("J: ", Integer.toString(j));

        double weightAdj = happyRating.get(j) * slope * learningRate;

        weighting = (weighting + weightAdj);

        Log.d("WEIGHTING: ", Double.toString(weighting));// break;

    }
    else
    {
        break;
    }

} 
```

在您的代码的此修改中，for 循环仅迭代直到happyRating 达到最大大小-2。到目前为止，我可以看到，您希望在每个循环中获取每个第一项的值并从第一的。这与您的代码之间的区别在于，您可以毫无例外地获得最后一个值。在您的代码中，当循环达到最大值-1 时，您尝试获取一项不存在的happyRating 项。例如，假设整数“i”的值为 10。这就是您的代码所做的：

```
 x1 = happyRating.get(i - 1);//x1 = happyRating.get(9)
        x2 = happyRating.get(i - 2);//x2 = happyRating.get(8)
        y1 = iteration[i - 1];//y1 = iteration[9]
        y2 = iteration[i - 2];//y2 = iteration[8] 
```

如果您的 happyRating 大小最大为 9，则 x1 希望有一个不存在的值。ArrayList（或数组）的大小与项目编号不同。如果此大小为 9，则最后一项的编号为 8，因为 Java/Android 从 0 开始计数。因此，您无法获得第 9 项。for 循环说，只要“i”小于happyRating.size 就进行迭代()。如果happyRating.size() 为9，“i”迭代到8，然后结束迭代。如果happyRating.size() 为9，这就是我的代码修改所做的：

```
 x1 = happyRating.get(i+1);//x1=happyRating.get(8)
         x2 = happyRating.get(i);//x2=happyRating.get(7)
         y1 = iteration[i+1];//y1=iteration[8]
         y2 = iteration[i];//y2=iteration[7] 
```

循环只迭代到 7，因为它说 -> 只要 i 小于 happyRating,size()-1 就迭代（小于意味着最大 8 --> -1 意味着 7）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T11:10:30.930

这应该有效：

Log.d("J:", "" + j);

和

Log.d("加权：", "" + Double.toString(weighting));

# c# - EF 5，Fluent API：无效的列名“Source_ID”

> ID：16145459
> 
> 赞同：0
> 
> 时间：2013-04-22T10:57:42.683
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework-5, fluent-interface

早上好

我得到无效的列名“Source_ID”。我的模型是：

产品：

```
public int ID { get; set; }
public string Name { get; set; }
public string Description { get; set; }
public decimal Price { get; set; }
public Nullable<decimal> PreviousPrice { get; set; }
public string Url { get; set; }
public int SourceID { get; set; }
public int SectionID { get; set; }
public int CategoryID { get; set; }
public Nullable<int> BrandID { get; set; }
public string PublisherProductID { get; set; }
public string PictureFilename { get; set; }
public bool Deleted { get; set; }
public Nullable<int> Score { get; set; }
public string EAN { get; set; }
public string ExtraAttributes { get; set; }
public DateTime LastUpdateDate { get; set; }
public DateTime InsertDate { get; set; }
public string Keywords { get; set; }
public virtual ProductPicture ProductPicture { get; set; }
public virtual Brand Brand { get; set; }
public virtual Source Source { get; set; }
public virtual Category Category { get; set; }
public virtual Section Section { get; set; }
public virtual ICollection<ProductComment> Comments { get; set; }
public virtual ICollection<Like> Likes { get; set; }
public virtual ICollection<Aside> Asides { get; set; }
public virtual ICollection<Wish> Wishlists { get; set; }
public virtual ICollection<UserRecommendation> UserRecommendations { get; set; }
public virtual ICollection<ProductColor> ProductColors { get; set; }
public virtual ICollection<ProductView> ProductViews { get; set; }
public virtual ICollection<PointLog> PointLogs { get; set; }
public virtual ICollection<InvitationLog> InvitationLogs { get; set; }
public virtual ICollection<FeedItem> FeedItems { get; set; }
public virtual ICollection<Sale> Sales { get; set; }
public virtual ICollection<ListProduct> ListProducts { get; set; }
public virtual ICollection<BonusMalus> BonusMalus { get; set; }
public virtual ICollection<ProductHunter> Hunters { get; set; } 
```

产品映射：

```
HasKey(e => e.ID);
Property(e => e.ID).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
Property(e => e.Name).IsRequired().HasColumnType("VARCHAR").HasMaxLength(200);
Property(e => e.Description).HasColumnType("VARCHAR").HasMaxLength(4000);
Property(e => e.Price).IsRequired().HasColumnType("Money");
Property(e => e.PreviousPrice).IsOptional().HasColumnType("Money");
Property(e => e.ExtraAttributes).HasColumnType("VARCHAR").IsOptional().HasMaxLength(1000);
Property(e => e.Url).IsRequired().HasColumnType("VARCHAR").HasMaxLength(2048);
Property(e => e.LastUpdateDate).IsOptional();
Property(e => e.InsertDate).IsOptional();
Property(e => e.PictureFilename).HasColumnType("VARCHAR").HasMaxLength(200);
Property(e => e.Deleted).IsRequired();
Property(e => e.EAN).IsOptional().HasColumnType("VARCHAR").HasMaxLength(18);
Property(e => e.PublisherProductID).IsRequired().HasColumnType("VARCHAR").HasMaxLength(100);
Property(e => e.BrandID).IsOptional();
Property(e => e.SourceID).IsRequired();
Property(e => e.Keywords).HasColumnType("VARCHAR").HasMaxLength(500);
ToTable("Products");
HasOptional(t => t.Brand).WithMany(t => t.Products).HasForeignKey(d => d.BrandID);
HasRequired(e => e.Source).WithMany(s => s.Products).HasForeignKey(e => e.SourceID);
HasRequired(e => e.Category).WithMany(c => c.Products).HasForeignKey(e => e.CategoryID);
HasRequired(t => t.Section).WithMany(t => t.Products).HasForeignKey(d => d.SectionID); 
```

资源 ：

```
public int ID { get; set; }
public string Name { get; set; }
public virtual ICollection<Product> Products { get; set; }
public virtual ICollection<SourceCategory> SourceCategories { get; set; }
public virtual ICollection<SourceCategoryRule> SourceCategoryRules { get; set; }
public virtual ICollection<WishlistGame> WishlistGames { get; set; }
public virtual ICollection<SourceWebsiteCommission> Commissions { get; set; }
public virtual ICollection<Sale> Sales { get; set; } 
```

源映射：

```
HasKey(e => e.ID);
Property(e => e.ID).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
Property(e => e.Name).IsRequired().HasColumnType("VARCHAR").HasMaxLength(50);
ToTable("Sources"); 
```

表 Products & Sources 已经创建。当我运行我的解决方案时，我遇到了这个问题（无效的列名 Source_ID）。也许这是我的映射错误。有人有解决方案吗？

# php - 使用 php foreach 解析 json

> ID：16145464
> 
> 赞同：1
> 
> 时间：2013-04-22T10:58:01.333
> 
> 标签：php, parsing, foreach, json

我试图从链接解析下面的 json 文件，但我仍然无法弄清楚解析并使用 foreach 显示它。

```
data: [
{
id: "1072",
nik: "013977",
status: "",
name: "RAKHMAT KUSNADI",
birthdate: "1983-10-21",
email: "rakhmat.koes@gmail.com",
first_login: "0",
is_juri: "0",
what_juri: "",
categorized: "0",
back_stage: "0",
placement: [
{
rel_id: "1102",
employee_id: "1072",
department_id: "101",
dept: "Chip",
position_id: "1",
position: ""
}
],
profile_pics: "link"
},
{
id: "1069",
nik: "013377",
status: "",
name: "RENATA MARINGKA",
birthdate: "1987-05-20",
email: "",
first_login: "1",
is_juri: "0",
what_juri: "",
categorized: "0",
back_stage: "0",
placement: [
{
rel_id: "1099",
employee_id: "1069",
department_id: "101",
dept: "Chip",
position_id: "1",
position: ""
}
],
profile_pics: "link"
},
]
} 
```

我想显示部门 ID 为 101 的名称和 profile_pics。

有人知道如何用foreach解析它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:02:43.050

重新发明轮子，是吗？为什么不简单地使用：

```
$jsonObj = json_decode($jsonString);//returns stdClass instance, just an object
$jsonArr = json_decode($jsonString, true);//converts object to associative array 
```

[`json_decode`在此处阅读更多内容](http://php.net/json_decode)......它非常易于使用，真的

如果将数据解码为数组，则可以像这样遍历数据

```
while($item = array_shift($jsonArr))
{
    foreach ($item as $key => $value)
    {
        echo $key.' => '.$value."\n";
    }
} 
```

或者简单地在一个对象上使用任何旧的`for`/`foreach`循环，它无论如何都是一个可遍历的对象（尽管它没有实现`Traversable`接口）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:02:45.043

使用 json_decode

```
 $arr = json_decode($jsonstring, true); 
```

然后使用 foreach 循环

```
foreach($arr as $val) {
    if($val['placement']['department_id'] == "101") {
       //display what u want
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T10:59:08.383

第一步是转换为数组

```
$data = json_decode($json); 
```

一旦你得到了数组，你就可以遍历它并检查值

```
$keepers = array();
foreach ($data as $item) {
  if ($item->placement->department_id == 101) {
    $keepers[] = $item;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T07:05:00.817

使用这个

```
foreach ($data->id as $id)
{
echo $id;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T11:02:53.967

大概是这样的：

```
$data = json_decode($your_json);

foreach($data as $object) {
    echo 'This is the name: ' . $object->name . PHP_EOL ;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T11:03:27.273

```
$data = json_decode($json, true) 
```

然后无论你想要什么信息，你都可以使用 foreach 循环

```
foreach ($data->id as $id)
{
echo $id;
} 
```

有了它，你可以设置任何变量，`$data->nik as $nik`或者你想要的任何变量，然后回显它们

# java - 我的 XPath 语法是否正确？

> ID：16145465
> 
> 赞同：0
> 
> 时间：2013-04-22T10:58:01.817
> 
> 标签：java, xml, xpath, xml-parsing

**这是我的xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
       <check>
           <val>
              <Samsung>
                 <name value="galaxy" />
                 <name value="galaxy" />
                 <name value="galaxys" />
                 <id value="123" />
                 <id value="123" />
                 <name2 value="galaxy" />
             </Samsung>

             <htc>
                 <name value="galaxy" />
                 <name value="galaxy" />
                 <name value="galaxys" />
                 <id value="123" />
                 <id value="123" />
                 <name2 value="galaxy" />
    </htc>
</val> 
```

**我的 Xpath 表达式是：**

```
XPathExpression expr = XPathFactory.newInstance().newXPath()
                .compile("//Samsung/name/@value"); 
```

在上面的 xml `<name value="galaxy" />`中有副本，所以我试图删除重复项。但是在我的代码中，我得到了 value="galaxys".. 我不应该删除的节点。**此外，正确的 XPath 语法应该是什么，以便我可以使用它来删除重复项，它应该匹配整个 xml 中的**元素和属性值（例如：）？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:47:13.463

表达式“//Samsung/name/@value”返回“Samsung”节点下所有“name”节点的值属性，因此它应该返回“galaxys”

如果您想将条件设置为仅返回 value='galaxy' 的节点，则可以使用此表达式 //Samsung/name[@value='galaxy']/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:20:13.030

尝试以下`xml`代码：

```
 <val>
              <Samsung>
                 <name value="galaxy" />
                 <name value="galaxy" />
                 <name value="galaxys" />
                 <id value="123" />
                 <id value="123" />
                 <name2 value="galaxy" />
             </Samsung>

             <htc>
                 <name value="galaxy" />
                 <name value="galaxy" />
                 <name value="galaxys" />
                 <id value="123" />
                 <id value="123" />
                 <name2 value="galaxy" />
    </htc>
</val> 
```

***路径：***

```
//val/Samsung/child::*[@value = "galaxy"] 
```

***输出：***

![路径](https://i.stack.imgur.com/RS8vZ.png)**

# c# - 更新面板中多个链接按钮上的 PostBackTrigger

> ID：16145471
> 
> 赞同：1
> 
> 时间：2013-04-22T10:58:14.800
> 
> 标签：c#, updatepanel

我在 updatePanel 中有一个搜索表单，它检索同一 UpdatePanel 中网格中的用户列表。每个用户的名字是一个commandLink。我想将 commandLinks 作为 PostBackTriggers。但是当我这样做时，我在 pageLoad 时收到一个错误，即 controlId 不存在并且它是真的，因为用户网格不会在加载时呈现，而是通过 ajax 调用。关于如何使通过 ajax 调用检索的网格中的多个命令按钮作为回发触发器的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:06:24.463

将项目添加到网格时，在`ItemDataBound`事件处理程序中，您应该为每个特定控件注册回发（HTML 声明中的静态标识符本质上是占位符 - 并非网格中重复的所有内容实际上都可以具有相同的 ID）。您可以使用以下[`ScriptManager.RegisterAsyncPostBackControl`](http://msdn.microsoft.com/en-gb/library/system.web.ui.scriptmanager.registerasyncpostbackcontrol.aspx)方法执行此操作：

> 该`RegisterAsyncPostBackControl`方法使您能够将 Web 服务器控件注册为触发器，以便它们执行异步回发而不是同步回发。当控件的 `ChildrenAsTriggers`属性`UpdatePanel`设置为 true（这是默认值）时，控件内的回发控件`UpdatePanel` 会自动注册为异步回发控件。

如上所述，使用`ChildrenAsTriggers`也是可能的，但通常将其设置为 false 以进行更严格的管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:05:38.027

我找到了解决方案。这是asp上的代码

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
  <asp:TextBox ID="txtFirstName" runat="server"></asp:TextBox>
  <asp:Button ID="btnSearch" runat="server" OnClick="btnSearch_Click" Text="Search" />
  <asp:GridView ID="gvSearchResult" runat="server" OnRowCommand="gvSearchResult_RowCommand" 
                                 OnRowDataBound="gvSearchResult_RowDataBound">
    <Columns>
     <asp:TemplateField HeaderText="Name">
        <ItemTemplate>
          <asp:LinkButton ID="lnkbtnDetail" runat="server" CommandArgument='<%# Bind("CNIC") %>' CommandName="Detail">
            <asp:Label ID="lblName" Text='<%# Bind("Employee_Name") %>' runat="server</asp:Label>
           </asp:LinkButton>
         </ItemTemplate>
         <ItemStyle HorizontalAlign="Left" VerticalAlign="Middle"Height="25px"Width="30%" />
      </asp:TemplateField>
</Columns>
</asp:GridView> 
```

我不得不将 OnRowDataBound="gvSearchResult_RowDataBound" 放在 gridView 上，该函数如下所示。所以我不得不将Scriptmanager中的迭代控件注册为GridView的RowDataBound事件中的PostBackControl。

```
 protected void gvSearchResult_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            try
            {
                if ((e.Row.RowType == DataControlRowType.DataRow))
                {
                    LinkButton lnkbtnDetail = (LinkButton)e.Row.FindControl("lnkbtnDetail");
                    ScriptManager.GetCurrent(this).RegisterPostBackControl(lnkbtnDetail);
                }
            }
            catch (Exception ex)
            {

            }
        } 
```

# html - Invalid 'X-Frame-Options' header encountered when loading

> ID：16145475
> 
> 赞同：16
> 
> 时间：2013-04-22T10:58:28.700
> 
> 标签：html, google-maps

> How to resolve "Invalid 'X-Frame-Options' header encountered when loading "?!

when i insert the google map in our html code then I am getting the error which is describe in attached image.

![when i insert the google map  in our html code then I am getting the  error which is describe in attached image.](https://i.stack.imgur.com/as5To.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T11:11:50.177

您无法控制 Google 的 HTTP 标头，因此您不能（没有找到可以控制它们的工作）让它们[使用有效的选项](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)。

# python - 仅循环表单值不为空

> ID：16145476
> 
> 赞同：0
> 
> 时间：2013-04-22T10:58:31.433
> 
> 标签：python, django, django-forms

我将所有项目循环在一个表单中。有些是我的表单字段不是必需的。如果我的值为空白，那么我不希望它做任何事情。

这是试图在我的 for 循环中检查空白值的内容：

```
for k, v in cleaned_data.items():
            if v:
                 setattr(myModel, v, CharField()) 
```

我得到的错误是：**''是这个函数的无效关键字参数**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:07:51.483

您不能使用 向模型添加字段`getattr`，您需要复制`ModelBase`元类所做的工作：

```
for k, v in cleaned_data.iteritems():
    if v:
        myModel.add_to_class(v, CharField()) 
```

# magento - 如何在 Jenkins 中使用 Magento 测试自动化框架（MTAF）测试用例？

> ID：16145477
> 
> 赞同：0
> 
> 时间：2013-04-22T10:58:41.687
> 
> 标签：magento, jenkins

有没有办法将**Magento 测试自动化框架（MTAF）**与**Jenkins**一起使用？用于詹金斯自动化测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T07:59:25.873

我最近用 jenkins 完成了 MTAF 配置，效果很好。只需将 MTAF 复制并粘贴到 Jenkins 工作区目录中，然后修改 MDAF>config>borwsers.yaml 下的 browsers.yaml 文件，并修改 phpunit.xml 和 build.xml 文件

此链接可能有助于配置：

1.  [http://jenkins-php.org/](http://jenkins-php.org/)
2.  [http://mnshankar.wordpress.com/2012/03/07/jenkins-continuous-integration-zend-framework-and-netbeans/](http://mnshankar.wordpress.com/2012/03/07/jenkins-continuous-integration-zend-framework-and-netbeans/)

注意：在第二个链接中保留 Zend Framework Configuration 其余部分与使用 Jenkins 配置 MTAF 相同。

# java - Sorting a linked list in java which contains objects

> ID：16145486
> 
> 赞同：-4
> 
> 时间：2013-04-22T10:59:06.803
> 
> 标签：java, linked-list

I have written the program as follows. I want to sort the linked list on basis of the String `a` in the class player.

now the output is

```
nagpur rathi
akola ashwin 
```

but after sorting with the variable `a` it should be

```
akola ashwin
nagpur rathi 
```

The code is as follows:

```
package link.demo;

public class Player
{
    String a,b;

    Player()
    {
    }

    Player(String city,String name)
    {
        a=city;
        b=name;
    }
}

package link.demo;

import java.util.Iterator;
import java.util.LinkedList;

public class Linkdemo 
{
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)throws Exception
    {
        // TODO code application logic here
        Player b=new Player("nagpur","rathi");
        Player c=new Player("akola","ashwin");
        //player temp=new player();
        LinkedList<Player> l= new LinkedList<Player>();

        l.add(b);
        l.add(c);

        Iterator<Player> itr=l.iterator(); 

       while(itr.hasNext())
       {
           Player temp=itr.next();
           System.out.println(temp.a+" "+temp.b);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:08:43.887

好吧，播放器（数据）类必须实现 Comparable。如[http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html中所述](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

> 该接口对实现它的每个类的对象进行了总排序。这种排序称为类的自然排序，类的 compareTo 方法称为其自然比较方法。
> 
> 实现此接口的对象列表（和数组）可以由 Collections.sort（和 Arrays.sort）自动排序。

因此，在实现这一点后，您可以调用`Collections.sort(l)`. 我建议阅读[http://www.onjava.com/pub/a/onjava/2003/03/12/java_comp.html](http://www.onjava.com/pub/a/onjava/2003/03/12/java_comp.html)，它将教你基础知识。

# matlab - Load File TxT Matlab/Octave

> ID：16145489
> 
> 赞同：0
> 
> 时间：2013-04-22T10:59:11.447
> 
> 标签：matlab, matrix, octave, readfile

How can I load in a matrix A a txt file which has this content:

```
n
a11 a12
a21 a22
a31 a32
.......
an1 an2 
```

n - number of lines and it's an int and a11...an2 are float types

Let's say for n = 3 I would have something like this:

```
3
1.5 1.8
84.21 15.2
41.5 2.0 
```

Threfore my matrix A would be : `[1.5 1.8; 84.21 15.2; 41.5 2.0]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:08.587

您可以通过以下方式执行此操作：

1.  `A = textread('a.txt', '', 'headerlines', 1);`
2.  `A = dlmread('a.txt', ' ', 1)`

# struts2 - struts2 filename and content type null, upload with plupload

> ID：16145494
> 
> 赞同：0
> 
> 时间：2013-04-22T10:59:43.227
> 
> 标签：struts2, plupload

I am getting file name in action as null, uploaded from plupload plugin. how can i get the original file name. Please tell where is my mistake.

**jsp**

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
<head>
<title>test</title>
<sj:head compressed="false"/>
<link rel="stylesheet" type="text/css" href="plup/jquery.plupload.queue/css/jquery.plupload.queue.css" type="text/css" media="screen" />
<script type="text/javascript" src="plup/plupload.full.min.js"></script>
<script type="text/javascript" src="plup/jquery.plupload.queue/jquery.plupload.queue.js"></script>
<script type="text/javascript">
/* Convert divs to queue widgets when the DOM is ready */
$(function(){
    function plupload(){
        $("#uploader").pluploadQueue({
            // General settings
            runtimes : 'html5,gears,browserplus,silverlight,flash,html4',
            url : 'uploads',
            max_file_size : '10mb',
            unique_names : true,
            chunk_size: '2mb',
            // Specify what files to browse for
            filters : [
                {title: "Image files", extensions: "jpg,gif,png"},
                {title: "Zip files", extensions: "zip"}
            ],
            resize: {width: 320, height: 240, quality: 90},

            // Flash settings
            flash_swf_url : 'plup/Moxie.swf',
            // Silverlight settings
            silverlight_xap_url : 'plup/Moxie.xap',
            multipart_params: {'user': 'admin', 'time': '2012-06-12'}
        });
    }
    plupload();
    $('#clear').click(function(){
        plupload();
    });
});
</script>

</head>

<body>
    <div>
        <div style="width: 750px; margin: 0px auto">
            <form id="formId" action="submit.action" method="post">
                <div id="uploader">
                    <p>Flash, Silverlight, Gears, BrowserPlus,HTML5 .</p>
                </div>
                <input type="button" value="Clear" id="clear"/>
            </form>
        </div>
    </div>
</body>

</html> 
```

**Action**

```
@Action(value="plupUploaduploads")
        public String upload() throws Exception {
                isMultipart = ServletFileUpload.isMultipartContent(getReq());
                System.out.println(getReq().getParameter("value"));
                ServletContext servletContext = getReq().getServletContext();
                String filePath = servletContext.getRealPath("/");
                System.out.println(filePath);
                System.out.println(this.file);
                System.out.println(this.fileName);
                System.out.println(this.contentType);
                File theFile = new File("c:\\",this.getFileName());  
                FileUtils.copyFile(file,theFile); 
        return SUCCESS;
    }

//getters and setters 
```

i can see this on console according to print statements given.

```
o_17oq47949abc11n51pg11rnah06a.jpg
E:\Documents and Settings\Pluto\My Documents\NetBeansProjects\ShareApp\build\web\
c:\temp\upload__408094b5_13e30976641__7fea_00000003.tmp
null
null 
```

is it the problem in my struts config? I am using annotations hence dont have struts.xml file. Or the problem is in plupload sending the file name, because when i retrived the name parameter i am getting some different name "o_17oq47949abc11n51pg11rnah06a.jpg" which is not the actual name. If so how can i get the original name?

Thanks and regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:47:03.767

我仍然不明白你为什么要使用所有这些插件来执行如此简单的操作。你需要`AJAX upload`吗？如果没有，您可以简单地使用`<s:file /`> 将一个或多个文件上传到 Action，并自动`filesize`检查`filename`和`contenttype`检测，只需在您的 Action 中声明三个具有相同前缀的变量：

动作代码：

```
private File fileUpload;
private String fileUploadContentType;
private String fileUploadFileName;
/* getters and setters */ 
```

JSP代码：

```
<s:file name="fileUpload" /> 
```

然后，您可以执行客户端（HTML5，使用 javascript）文件大小检查、服务器端文件大小检查，并设置服务器端整体多部分请求大小（在 Struts.xml 中，即使使用注释也应该具有）。

您可以在此处阅读详细信息：[struts2 s:form 元素修剪 action 属性中的 s:url 参数](https://stackoverflow.com/questions/15957470/struts2-sform-element-trims-the-surl-parameter-in-the-action-attribute/15968166#15968166)

作为最后的建议：做一些简单的工作，然后开始定制/扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T11:18:29.803

Solution:

Add fileupload interceoptor in struts.xml (< interceptor-ref name="fileUpload" />)

Add the following properties in the action class.

```
 private String[] fileFileName;

    private String[] fileContentType;

    private File[] file; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:31:56.410

现在解决了。我设置`unique_names : false`了`plupload`选项。内容类型和文件名`null`在 struts 动作中。我使用`getParameter("name");`.

# javascript - HTML,Javascript-how to delete the rows of a table which are selected in check box

> ID：16145496
> 
> 赞同：0
> 
> 时间：2013-04-22T10:59:55.213
> 
> 标签：javascript, html, css

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Ticket Forwarding</title>
</head>

<body style="background-image:url('bg.png')">
    <style type="text/css">
    table.imagetable {
        font-family: verdana,arial,sans-serif;
        font-size:11px;
        color:#333333;
        border-width: 1px;
        border-color: #999999;
        border-collapse: collapse;
    }

    table.imagetable th {
        background:#b5cfd2 url('cell-blue.jpg');
        border-width: 1px;
        padding: 8px;
        border-style: solid;
        border-color: #999999;
    }

    table.imagetable td {
        background:#dcddc0 url('cell-grey.jpg');
        border-width: 1px;
        padding: 8px;
        border-style: solid;
        border-color: #999999;
    }
    </style>

    <script language="javascript">
    function deleteRow(tableID) 
    {
        try
        { 
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) 
            {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked)
                {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }
            }
        }
        catch(e){alert(e);}
    }
    </script>

    <img src="abstergo.jpg">
    <p style="color:#8A2BE2;font-family:Lucida Console;font-size:25px;background-    
image:url('cell-blue.jpg');margin:0px;width:1800px";> I.T.S->Forwarding & setting   
priorities for a ticket </p><br>

    <table class="imagetable"  id="datatable"  style="margin:20px 0px 0px 50px">
        <tr>
            <th>ID</th>
            <th>Subject</th>
            <th>Subtopic</th>
            <th>Message</th>
            <th>Severity</th>
            <th>Priority</th>
            <th>Status</th>
            <th>forward to</th>
            <th>checkbox</th>
        </tr>
        <tr>
            <td>1</td><td>login problem</td>         
            <td>
                <select name="helptopic">
                    <option value="accounts">accounts</option>
                    <option value="admin issues">admin issues</option>
                    <option value="it-support" selected>it-support</option>
                    <option value="project enquiry">project enquiry</option>
                    <option value="general enquiry">general enquiry</option>
                    <option value="tech. support">tech. support</option>
                    <option value="feedback">feedback</option>
                    <option value="others">others</option>
                </select>
            </td>
            <td>Unable to login</td>
            <td>
                <select name="severity">
                    <option>Minor</option>
                    <option>Normal</option>
                    <option>Major</option>
                    <option>Critical</option>
                </select>                
            </td>
            <td>
                <select name="priority">
                    <option>Low</option>
                    <option>Medium</option>
                    <option>High</option>
                </select>
            </td>
            <td>
                <select name="status">
                    <option>New</option>
                    <option>Assigned</option>
                    <option>Resolved</option>
                </select>
            </td>
            <td><input type="text" size="30"></td>
            <td><input type="checkbox" name="chk"/></td>
        </tr>
    </table>
    <input type="button" value="Forward" onclick="deleteRow('datatable')" />
</body>
</html> 
```

above is the code which i made.here the first row of the table is headings.from second row onwards the table contains data.i want to delete the row which is selected in check box and when i click on forward button.but the above code is not working.pls help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:34:16.240

您没有选择 td 内的复选框，所以试试这个，这个[jsfiddle](http://jsfiddle.net/mido_rizk007/FBDb9/1/)：

```
function deleteRow(tableID)  {
        var table = document.getElementById(tableID).tBodies[0];
        var rowCount = table.rows.length;

        // var i=1 to start after header
        for(var i=1; i<rowCount; i++) {
            var row = table.rows[i];
            // index of td contain checkbox is 8
            var chkbox = row.cells[8].getElementsByTagName('input')[0];
            if('checkbox' == chkbox.type && true == chkbox.checked) {
                table.deleteRow(i);
             }
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:07:22.787

使用 JQuery 你可以做类似这样的事情：

在`head`您的 html 文件部分中添加以下内容：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.deleteBtn').click(function(){
           $('input:checked').each(function(){
               $(this).parent('tr').remove();
           });
        });
    });
</script> 
```

第一个脚本参考链接到在线 JQuery 库。`deleteBtn`一旦 DOM 完全加载，第二个脚本块使用类初始化元素上的 click 函数。您想将此类添加到按钮。

```
<input type='button' value='Forward' class='deleteBtn' /> 
```

然后，该脚本会查找所有已检查的输入并删除其 parent `tr`。您可能需要使用它才能使其完全适合您的场景。

# ada - Ada 在 Linux Mint 中因“未在此系统上安装编译器”而失败

> ID：16145499
> 
> 赞同：1
> 
> 时间：2013-04-22T11:00:18.320
> 
> 标签：ada, gnat

我在尝试获得一个有效的 Ada 编译器时遇到了一些困难。

我一直试图在 Windows 系统上安装 avr-ada。我提出了一些问题并得到了一些好的建议，但还没有。

从那以后，我尝试在 Mint Linux 系统上安装和使用 GNAT，但我一直卡住。我已经下载并安装了 gcc-4.8.0。

安装好了。

然后我想构建 GNAT Ada 编译器，但该手册并不完全有用。

每次我尝试查找 GNAT 的安装说明时，我都找不到任何可以立即使用的东西。

例如，我发现的详细信息状态：

“构建Ada编译器有特殊要求，见下文”但似乎没有任何关于如何在任何地方构建Ada编译器的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:14:47.900

你可以试试[我的 Slackware 指南](http://blogs.fsfe.org/thomaslocke/2012/01/08/ada-programming-on-slackware/)。

只需在您的 Windows 机器上安装 VirtualBox，然后在虚拟机中试一试 Slackware。实际上，如果您不想要/不需要所有 AdaCore 的东西，Slackware 自带 FSF GNAT 开箱即用。`gnatmake`除了调用来构建你的东西​​之外，你真的不需要做任何事情。

但老实说，让 GNAT GPL 和 AdaCore 项目在 Slackware 上启动并运行并不复杂。

对于 Debian（如果您不想使用默认的 Debian Ada 软件包），您可以尝试[`makefile`由 Kim Rostgaard Christensen 完成的](https://github.com/rostgaard/Ada-development-Makefile)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:15:12.190

据我了解，Mint 基于基于 Debian 的 Ubuntu，因此您应该能够安装该软件包`gnat`；它可能是 GCC 4.6。

我不确定你是否需要 4.8.0？如果是这样，或者当然如果您无法安装`gnat`，则需要构建它（或等到它到达 Debian/Ubuntu/Mint，这可能需要一段时间）。GCC 4.6（支持 Ada）应该没问题，或者你可以安装[AdaCore 的 Libre 版本](http://libre.adacore.com)。我知道 GNAT GPL 2012 将在 Mac OS X 上构建 GCC 4.8.0；[我在这里](http://forward-in-code.blogspot.co.uk/2011/11/building-gcc-again.html)使用 GNAT GPL 2011 编写了从 SVN 构建GCC，并[在此处](http://forward-in-code.blogspot.co.uk/2013/04/building-gcc-480.html)构建 GCC 4.8.0 。

# php - CodeIgniter create new custom exception

> ID：16145500
> 
> 赞同：1
> 
> 时间：2013-04-22T11:00:18.490
> 
> 标签：php, codeigniter, exception

I'm trying to create a custom exception to return a correct message based on `$_FILES[..]['error']` codes.

I have extended the `CI_Exceptions class`:

```
class MY_Exceptions extends CI_Exceptions {
    function My_Exceptions() {
        parent::CI_Exceptions();
    }

    public function file_upload_error($error_code = UPLOAD_ERR_OK) {
        switch ($error_code) {
            case UPLOAD_ERR_INI_SIZE:
                $message = "The uploaded file exceeds the upload_max_filesize directive in php.ini";
                break;
            case UPLOAD_ERR_FORM_SIZE:
                $message = "The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form";
                break;
            case UPLOAD_ERR_PARTIAL:
                $message = "The uploaded file was only partially uploaded";
                break;
            case UPLOAD_ERR_NO_FILE:
                $message = "No file was uploaded";
                break;
            case UPLOAD_ERR_NO_TMP_DIR:
                $message = "Missing a temporary folder";
                break;
            case UPLOAD_ERR_CANT_WRITE:
                $message = "Failed to write file to disk";
                break;
            case UPLOAD_ERR_EXTENSION:
                $message = "File upload stopped by extension";
                break;

            default:
                $message = "Unknown upload error";
                break;
        }

        log_message('error', $error_code);
        return $message;
    }    
} 
```

But when I call `file_upload_error(1)` it says `Call to undefined function file_upload_error()`

How do I approach this problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:59:20.120

I get the feeling that you're not using your library class correctly, but it's hard to tell from your question. From a model or controller class, you would use:

```
$this->load->library('exceptions');
$message = $this->exceptions->file_upload_error($error_code); 
```

when you tell it to load the exceptions library, it automatically looks to see if there's one in your application/libraries/ directory with the MY_ prefix. If it's there, it will load it. Then you access it as with any other library.

Hope that helps.

# ios - 实现 TripAdvisor api 的示例示例 - iOS 应用程序

> ID：16145501
> 
> 赞同：2
> 
> 时间：2013-04-22T11:00:18.883
> 
> 标签：ios, objective-c, api, ios4

我已经尝试了很多来寻找一些示例来实现 TripAdvisor api。但是我没有得到任何在我的 iOS 应用程序中实现它的演示代码。

我不知道实施它的任何起点。

所以请帮助我并建议您是否知道任何好的演示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T11:15:29.320

TripAdvisor API 是[JSON 格式](https://developer-tripadvisor.com/content-api/documentation/location/)，你可以使用[Restkit](http://restkit.org/)来解析它。

# php - Magmi 捆绑产品和 Magento 1.7 中的重新索引问题

> ID：16145507
> 
> 赞同：1
> 
> 时间：2013-04-22T11:00:31.260
> 
> 标签：php, magento, magento-1.7, magmi

我正在使用 Magento 1.7x 版本。我需要创建一个脚本来导入产品。我使用 Magmi 作为导入产品工具，它可以帮助我

1.  导入简单、分组和可配置的产品，而不是捆绑产品
2.  创建一个脚本来运行一个 cron 作业来自动化这个过程。

**问题**：我的产品没有显示在前端，而这些在后端是可见的。我在某个地方研究过，我发现它是关于重新索引数据库表的。

**问题**： 1\. 如何在运行 Magmi 导入过程后重建索引（脚本是 cron 作业），因为我无法使用以下方法重建索引：=>On the fly indexer v0.1.5 =>Magmi Magento Reindexer v1.0.2

2.Magmi是否支持导入自定义捆绑类型的捆绑产品？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:32:43.907

在 cron 作业中，您可以使用以下命令行运行 magento 索引器（magmi 为重新索引而调用的程序）（最好将它们放在 cron 运行的 shell 脚本的末尾）

```
cd <yourmagentodir>/shell
php indexer.php --reindex catalog_product_attribute
php indexer.php --reindex catalog_product_price
php indexer.php --reindex catalog_product_flat
php indexer.php --reindex catalog_category_flat
php indexer.php --reindex catalogsearch_fulltext
php indexer.php --reindex cataloginventory_stock 
```

还有其他索引，但catalog_category_product 和catalog_url 都可以通过动态索引器插件更有效地处理。

Magmi 还不支持捆绑。

# mysql - MySQL查询要过滤的多列？

> ID：16145508
> 
> 赞同：0
> 
> 时间：2013-04-22T11:00:31.667
> 
> 标签：mysql, select, where

可以说我有 1 个表只有多列。让我们说：

```
Fruits
--------------------------------------
id  | name        | country
--------------------------------------
1   | Banana      | china
2   | Orange      | japan
3   | Apple       | japan
4   | Apple       | china
5   | Banana      | usa
6   | Orange      | china 
```

然后对`SELECT`所有 Fruits where进行简单查询`id < 6`。
这是：

```
SELECT * FROM fruits WHERE id < 6 
```

然后它将返回：

```
--------------------------------------
id  | name        | country
--------------------------------------
1   | Banana      | china
2   | Orange      | japan
3   | Apple       | japan
4   | Apple       | china
5   | Banana      | usa 
```

然后通过附加上述查询，我​​怎样才能继续排除更多内容。
例如：

```
Do NOT want to see, any "APPLE" from "CHINA". 
```

所以最终的结果一定是：

```
--------------------------------------
id  | name        | country
--------------------------------------
1   | Banana      | china
2   | Orange      | japan
3   | Apple       | japan
5   | Banana      | usa 
```

**这又是TOGETHER`without`的行了！`if, name='Apple' AND country='china'`**.

*   那么通过继续第一个查询，我怎样才能添加附加的“ **AND 条件对**”来获得这个结果呢？

我会说：

```
SELECT * FROM fruits WHERE id < 6 ... AND DON'T RETURN this condition where name='Apple' and country='china' TOGETHER 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:02:42.723

尝试：

```
SELECT * 
FROM fruits 
WHERE (id < 6)
AND NOT (name = 'Apple' AND country = 'china') 
```

或者：

```
SELECT * 
FROM fruits 
WHERE (id < 6)
AND id NOT IN (SELECT id 
               FROM fruits
               WHERE name = 'Apple'
               AND country = 'china') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:02:30.580

尝试这个

```
 SELECT * FROM fruits WHERE 
                 (name ,country) not in ( select 'Apple' ,'china' from Fruits)

 HAVING id < 6 
```

[**在这里演示**](http://sqlfiddle.com/#!2/5cc77/8)

# php - 当我的数组仅包含一个值时，它不会被识别为数组

> ID：16145514
> 
> 赞同：2
> 
> 时间：2013-04-22T11:00:46.113
> 
> 标签：php, arrays

在我的代码中，我在循环中使用这一行填充了一个数组：

```
 $_SESSION['my_array'][] = $some_value; 
```

每次执行此行后，我都会使用`function in_array()`. 但是，在第一次迭代中它说：

```
« in_array() expects parameter 2 to be array ». 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:04:20.687

您可以像这样初始化数组（在填充值之前）：

```
$_SESSION['my_array']=array(); 
```

这样你就可以确定它是数组，即使它是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:06:09.653

您错误地分配或访问它

用这个

```
$_SESSION['my_array'] = $some_value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:10:31.147

当您进行`in_array`检查时，您可以将第二个项目转换为一个数组，因此如果它是空的，那么它将传递一个空数组。这样你就不会在不需要时为会话设置任何东西（这可能会在以后绊倒你）

例如，

```
if (in_array('foo', (array)$_SESSION['my_array'])) {
  // do something
} 
```

# python - 在 Python 中检测计算机/程序关闭？

> ID：16145516
> 
> 赞同：6
> 
> 时间：2013-04-22T07:12:34.847
> 
> 标签：python, windows

我有一个循环运行的 Python 脚本，它会定期调整我的照明系统。当我关闭计算机时，我希望我的脚本能够检测到这一点，并完全关闭灯。

如何检测我的计算机开始在 Python 中关闭？

或者，假设 Windows 向 Python 发送“关闭时间”通知，我如何拦截它以杀死我的灯并退出循环？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T07:36:40.327

这是在系统关闭时执行操作的错误方法。关闭进程的工作是停止正在运行的进程，然后关闭电源；如果你试图从你的程序中检测到这种情况并通过采取一些最后的行动来做出反应，这是操作系统和你的程序之间的竞赛，谁先走。您的程序很可能在它设法执行必要的操作之前就已经停止了。

相反，您应该挂接到正常的协议以在关机时执行操作。这将告诉关闭实用程序向您的程序发送一个明确的信号并等待它被确认，这给您足够的时间（在合理的范围内）来做您必须做的事情。如何准确注册以获取通知因操作系统而异，因此这更多是一个特定于操作系统的问题，而不是 Python 问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T08:59:53.237

您应该对[`WM_ENDSESSION`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376884%28v=vs.85%29.aspx)消息做出反应。

当用户注销或计算机关闭时发送此消息。

如果您还想对睡眠/休眠做出反应，则需要[`WM_POWERBROADCAST`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373247%28v=vs.85%29.aspx)处理`PBT_APMSUSPEND`.

但我不知道如何在 python 中做到这一点。我想这取决于您的窗口框架，因为您需要一个窗口/消息循环来接收消息。

# sql - SQL 更新表，用于多个公司、商店、POS 新交易时

> ID：16145519
> 
> 赞同：0
> 
> 时间：2013-04-22T11:01:02.217
> 
> 标签：sql, sql-server-2008, tsql, sql-update

寻找当新事务到达 Table1 时如何更新 Table2。

我正在从 Table1 中提取数据并插入到 Table2 中。

```
SELECT distinct Company, StoreNo, POS FROM Table1 
```

结果

```
Company1, S0001, P0001
Company1, S0001, P0002
Company1, S0002, P0003
Company1, S0002, P0004
Company2, S0001, P0001
Company2, S0001, P0002
Company2, S0002, P0003
Company2, S0002, P0004 
```

每个 POS 的交易编号从 1 开始。

我想增量更新 Table2，只有当 Table1 中的事务数大于 Table2 中的事务数时。但我在解决这个问题时遇到了问题，因为每个公司、商店、POS 都需要更新。

正在看这个：[如何对每个帐户的最后一笔交易进行 SQL 查询？](https://stackoverflow.com/questions/1505549/how-to-make-a-sql-query-for-last-transaction-of-every-account)但并没有真正到达那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:15:09.553

在 SQL Server 2008 R2 中：尝试此触发器演示：您可以通过使用触发器来实现此目的 请查看一个简单的触发器演示。

```
/*Create Demo Table.*/
CREATE TABLE A (RNO INT)
CREATE TABLE B (RNO INT)

/*Craete Demo Trigger*/
CREATE TRIGGER MYTRI ON A
FOR INSERT
AS
INSERT INTO B SELECT * FROM inserted i  
GO

/*Insert statement */
INSERT INTO A VALUES (1)

/*Check Result*/
SELECT *FROM A
SELECT *FROM B 
```

# jquery - Chrome 显示错误为：由于 Content-Security-Policy，拒绝执行内联脚本

> ID：16145522
> 
> 赞同：55
> 
> 时间：2013-04-22T11:01:05.990
> 
> 标签：jquery, google-chrome, google-chrome-extension

我正在创建图像裁剪小部件的 Chrome 扩展。我的代码`popup.html`如下：

```
<body>
    <textarea id="widget_script" style="border:1px solid #ccc;padding:5px;width:600px" rows="5" readonly></textarea>
    <script type="text/javascript">
        var protocol=window.location.protocol;
        var host= window.location.host;
        var head=('<div id="wd_id" style="margin-bottom: 20px;"></div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></\script>
    <script type="text/javascript" src="'+protocol+'//'+host+'Image_crop/cropimages/img_crop_widget.js'+'"><\/script>
    <script type="text/javascript">init_widget()<\/script>');
        document.getElementById("widget_script").innerHTML=head;
    </script>
</body> 
```

变量**协议**和**主机**从浏览器中的 URL获取*协议*和*主机。*当我尝试将其集成为 Chrome 扩展时，它不起作用。当它完美运行时，它会在 textarea 中显示以下代码：

```
<div id="wd_id" style="margin-bottom: 20px;"></div>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="http://localhost/cropimages/img_crop_widget.js"></script>
<script type="text/javascript">init_widget()</script> 
```

我有一些事情，比如将 JS 代码放在外部 JS 文件中，并`manifest.json`在 my中调用文件时调用该文件`popup.html`，但没有一个起作用。

谁能告诉我我做错了什么，或者我还应该怎么做才能让它发挥作用？

提前致谢...

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-22T18:16:23.013

来自[Chrome 扩展 CSP 文档](https://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)：

> 内联 JavaScript 将不会被执行。此限制禁止内联`<script>`块和内联事件处理程序（例如`<button onclick="...">`）。

您的扩展 HTML**中不能有内联脚本，例如：**

```
<script>alert("I'm an inline script!");</script>

<button onclick="alert('I am an inline script, too!')"> 
```

相反，您必须将脚本放入单独的文件中：

```
<script src="somescript.js"></script> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2020-01-07T12:54:35.950

如果您将 React 与 create-react-app 一起使用：

1.  `.env`在项目根目录中创建一个文件

2.  添加变量如下：`INLINE_RUNTIME_CHUNK=false`

3.  再次构建项目并再次加载扩展。

[资源](https://create-react-app.dev/docs/advanced-configuration/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-09-25T12:24:12.143

您必须添加`content_security_policy`到您的`manifest.json`文件中：

`"content_security_policy": "script-src 'self' 'sha256-B+Qe/KNUDtGDd/m1g5ycAq1DgpLs9ubKmYTlOHBogC8='; object-src 'self'"`

您将从控制台找到哈希。

[![在此处输入图像描述](https://i.stack.imgur.com/TqvGM.png)](https://i.stack.imgur.com/TqvGM.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T18:15:59.887

我在开发扩展程序时遇到了这个问题。我删除了扩展并再次加载它，这使得错误消息消失了。

# php - PHP无限循环，未知原因

> ID：16145526
> 
> 赞同：0
> 
> 时间：2013-04-22T11:01:16.100
> 
> 标签：php, while-loop, infinite

```
<?php
$i=1;
while ($i<=$totalpages) {
    if (($i>=($page-5) && $i<=($page+5) && $i<$totalpages) || $i==1 || ($i+1>$totalpages)) {

        echo "<td><a href=\"search.php?page=$i\">";
        if ($i=$page) {
        echo "<strong>  $i  </strong>";
        }
        if ($i!=$page) {
        echo "  $i  ";
        }
        echo "</a></td>";
        }
    $i++;
    }

?> 
```

试图构建一个在页面底部输出一些搜索值的网页，但是我一直在无限循环。我不知道是什么原因造成的，并且希望其他人能够洞察手头的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:04:56.007

你的 if 条件有问题

改变

```
$i =1 
```

和

```
$i==1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:05:25.580

你有很多地方要重置 $i，我无意中假设

`$i=1`

和

`$i=$page`

将它们替换为`==`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:15:19.757

条件有一些问题

第一：

> || $i=1||

总是返回真。为。。改变

> || $i==1||

二：adobe同案

> if ($i=$page) //总是返回try是赋值操作

改成：

> 如果 ($i==$page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:07:55.687

```
<?php
        $i=1;
        while ($i<=$totalpages) {
            if (($i>=($page-5) && $i<=($page+5) && $i<$totalpages) || $i == 1|| ($i+1>$totalpages)) {

                echo "<td><a href=\"search.php?page=$i\">";
                if ($i == $page) {
                echo "<strong>  $i  </strong>";
                }
                if ($i!=$page) {
                echo "  $i  ";
                }
                echo "</a></td>";
                }
            $i++;
            }
?> 
```

**第一个和第二个 if 条件的变化。**
1) $i == 1
2) $i == $page

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T11:11:35.640

有没有理由不能使用 for 循环来完成？如果存在导致永远循环的场景，则循环总是有风险且容易引起问题。

例如。

```
for ($i = 0; $i<=$totalpages; $i++){
 // do something
} 
```

# uiview - 在 iOS 6 中使用 Auto Layout 在 superview 中均匀分布相同大小的 UIView

> ID：16145528
> 
> 赞同：1
> 
> 时间：2013-04-22T11:01:25.680
> 
> 标签：uiview, ios6, autolayout, nslayoutconstraint

我需要使用自动布局将一系列按钮均匀地放置在超级视图中。在这里，我想保持子视图的大小相同，只有子视图的中心会以这样的方式放置，即它们之间的空间数量相等。

注意：我不想设置超级视图的大小，我希望每件事都是自动布局的。

请帮助，我被卡住了！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:03:16.947

您可以创建尽可能多`UIView`的按钮，并在视图内居中按钮，视图可以背靠背对齐，使用以下代码：

```
[constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view1][view2][view3]|"
                                                                         options:0
                                                                         metrics:nil
                                                                           views:views]]; 
```

确保首先使用以下方法从超级视图中删除现有约束：

```
[self.view removeConstraints:self.view.constraints]; 
```

并在 viewDidLoad 中关闭自动调整大小转换：

```
[self.view setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

# jquery - 将 Dhtmlx 调度程序时间线视图小时标题设置为 12 小时格式

> ID：16145534
> 
> 赞同：0
> 
> 时间：2013-04-22T11:01:36.460
> 
> 标签：jquery, dhtmlx-scheduler

在 Dhtmlx Scheduler Timeline View 中，如何将 Hour 标头从军用时间（24 小时）设置为 12 小时格式？

![时间线视图，小时标题](https://i.stack.imgur.com/HNUyO.png)

我在他们的论坛上找到了一些回复，但这似乎不起作用。

```
scheduler.config.hour_date = "%h:%i %A"; 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:15:49.803

必须在时间线配置对象中使用**x_date**属性指定小时格式。这是示例：

```
scheduler.createTimelineView({
    name:   "timeline",
    x_unit: "hour",
    x_date: "%h:%i %A",
    x_step: 1,
    x_size: 24,
    y_unit: [
        {key:1, label:"James Smith"},
        {key:2, label:"John Williams"},
        {key:3, label:"David Miller"},
        {key:4, label:"Linda Brown"}
    ],
    y_property: "section_id",
    render:"bar"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:04:10.940

这是我使用的**MVC**的完整解决方案。

```
var timeline = new TimelineView("timeline", "EmployeeId");
timeline.X_Date = "%h:%i %A"; 
```

# python - 如何在不按 Enter 的情况下输入输入

> ID：16145535
> 
> 赞同：1
> 
> 时间：2013-04-22T11:01:38.450
> 
> 标签：python, python-3.x

例如我想要这样，

```
x = int(input("Please enter your guess :")
If x = 1:
   Print ("correct") 
```

虽然每次我需要按回车键，**但我怎么能让它在按键时读取**。

我确实找到了 getch() 虽然我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:04:42.937

在 Windows 中，您可以使用`msvcrt`. 在其他系统上它有点困难，看看这个配方：[http ://code.activestate.com/recipes/134892/](http://code.activestate.com/recipes/134892/)

你可以这样使用它：

```
getch = _Getch()

print 'Please enter your guess: '
x = getch()

if (int(x) == 1):
    print 'correct'
else:
    print 'wrong' 
```

# spring - Spring & Hibernate：无法绑定会话。

> ID：16145540
> 
> 赞同：0
> 
> 时间：2013-04-22T11:01:51.660
> 
> 标签：spring, hibernate, spring-transactions

有时在生产中我们会遇到下一个错误：

```
2013-04-18 20:47:50,199 http-0.0.0.0-8443-35 ERROR [Jersey Web Application]] [userId: 57916] Servlet.service() for servlet Jersey Web Application threw exception
java.lang.IllegalStateException: Already value [org.springframework.orm.hibernate3.SessionHolder@4cccafeb] for key [org.hibernate.impl.SessionFactoryImpl@1457e272] bound to thread [http-0.0.0.0-8443-35]
    at org.springframework.transaction.support.TransactionSynchronizationManager.bindResource(TransactionSynchronizationManager.java:189) 
```

对于 Jersey RESTFull 服务的每个请求，我们都有用于打开会话的 Hibernate 会话过滤器。

```
com.mycompany.SessionPerRequestHelper {
    public static Session openSession() {
        SessionFactory sessionFactory = getSessionFactory();

        Session sess = sessionFactory.openSession();
        sessThreadLocal.set(sess);

        TransactionSynchronizationManager.bindResource(sessionFactory, new SessionHolder(sess));
        TransactionSynchronizationManager.initSynchronization();

        return sess;
    }
} 
```

休眠上下文配置：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation" value="classpath:com/transportexchangegroup/domain/hibernate.cfg.xml" />
        <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

和hibernate.cfg

```
<hibernate-configuration>
    <session-factory>
        <property name="dialect">org.hibernatespatial.postgis.PostgisDialect</property>
        <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
        <property name="current_session_context_class">thread</property>
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:05:46.760

最好使用[`OpenSessionInViewFilter`](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)而不是您的`SessionPerRequestHelper`.

# desire2learn - 使用 Valence API 创建新用户并设置个人资料数据

> ID：16145543
> 
> 赞同：1
> 
> 时间：2013-04-22T11:02:03.600
> 
> 标签：desire2learn, valence

我正在使用 valence API 成功创建新用户，设置密码并将新用户注册到适当的 OU。（我使用了 API 参考：[http](http://docs.valence.desire2learn.com/reference.html) ://docs.valence.desire2learn.com/reference.html ） 我使用为访问 REST API 的应用程序创建的帐户登录。

我还想为新用户设置一些配置文件字段；我想我需要使用 put profile 函数：PUT /d2l/api/lp/(D2LVERSION: version)/profile/(D2LID: profileId)

我的问题是如何找到我刚刚创建的用户的个人资料 ID。它不会在创建用户的用户数据中返回，而且我看不到 API 调用，它可以让我检索新创建用户的配置文件 ID。

谁能指出我正确的方向？

干杯

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:39:51.003

创建用户后，您将获得其用户 ID。如果您拨打以下电话（[文档](http://docs.valence.desire2learn.com/res/enroll.html#get--d2l-api-lp-%28D2LVERSION-version%29-enrollments-orgUnits-%28D2LID-orgUnitId%29-users-)）

```
GET /d2l/api/lp/(D2LVERSION: version)/enrollments/orgUnits/(D2LID: orgUnitId)/users/ 
```

您将获得在提供的组织单位中注册的所有用户的列表。请注意，此调用的结果集是分页的（请参阅文档。）结果中的每个条目都是一个[Enrollment.OrgUnitUser](http://docs.valence.desire2learn.com/res/enroll.html#Enrollment.OrgUnitUser)，其中包含一个带有[User.User](http://docs.valence.desire2learn.com/res/user.html#User.User)值的属性“user” - 其中包含用户配置文件标识符。

您可以通过将书签值设置为用户 userID 来跳转到您想要的用户。有关详细信息，请参阅调用文档中绿色框中的注释。

您始终可以将[根组织](http://docs.valence.desire2learn.com/res/orgunit.html#get--d2l-api-lp-%28D2LVERSION-version%29-organization-info)用于 orgUnitID 参数。

# sql - 在 SQL 中查找“下一个但最新的”日期的最佳方法是什么？

> ID：16145544
> 
> 赞同：5
> 
> 时间：2013-04-22T11:02:03.633
> 
> 标签：sql, sql-server-2008, tsql

我在 SQL Server 中有一个表，其中包含由 BusinessDataDate 组织的数据。BusinessDataDate 仅是日期（无时间组件），仅在工作日填充。例如不是周末或公共假期。

因为没有具体的顺序，所以我想找到`date before the current max date`

此查询有效，我可以将值设置为局部变量 - 但感觉必须有更清洁的方法？

```
SELECT MAX(BusinessDataDate) FROM myTable 
  WHERE BusinessDataDate < (SELECT MAX(BusinessDataDate) FROM myTable) 
```

每个日期在表格中都有多行 - 确切的数字是不可预测的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:05:24.720

```
SELECT TOP (1)
    BusinessDataDate
FROM
    (
    SELECT
        BusinessDataDate,
        DENSE_RANK() OVER (ORDER BY BusinessDataDate DESC) as rn
    FROM
        myTable
    ) x
WHERE
    x.rn = 2
ORDER BY
    x.BusinessDataDate; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:10:21.220

与您的原始查询类似，但如何使用前 1 个？

```
SELECT Top 1 BusinessDataDate 
FROM myTable 
WHERE BusinessDataDate < (SELECT MAX(BusinessDataDate) FROM myTable)
ORDER BY BusinessDataDate DESC 
```

# xml - 如何使用 XSLT for-each 计数器

> ID：16145548
> 
> 赞同：0
> 
> 时间：2013-04-22T11:02:16.610
> 
> 标签：xml, xslt

我试图记录我在循环中的位置，以便我可以切换我的一些表格行。

这是我在 for-each 行中使用的计数器。

```
<xsl:variable name="i" select="position()"/> 
```

我遇到的问题是我不知道如何分配`i`我的行 ID，以便我页面中的每个表都可以打开和关闭自己的行，而不是一个按钮打开和关闭每个表中的每一行。

这就是我的 for-each 循环的样子

```
<xsl:for-each select="Talents_Passive">

    <xsl:variable name="i" select="position()"/>

    <div style="font-family:Calibri, Arial; font-size:5pt">
        <xsl:if test="Talent != ''">
            <table border="0" width="550">

                <tr>
                    <td bgcolor="#A0A0A0" width="80%">
                        <a href="#" onClick="SwitchMenu(this, {$i})">Toggle Form?</a> <b id="toggle"><xsl:value-of select="Talent"/></b></td>
                    <td bgcolor="#A0A0A0" width="20%" align="center">
                        <xsl:value-of select="Cost"/><xsl:text>  -  </xsl:text><xsl:value-of select="Type"/></td>
                </tr>

                <xsl:if test="Prerequisite != ''">
                    <tr>
                        <td colspan="2" bgcolor="#C0C0C0"><b>Prerequisite: </b><xsl:value-of select="Prerequisite"/></td>
                    </tr>
                </xsl:if>

                <tr>
                    <td colspan="2" bgcolor="#C0C0C0"> 
                        <xsl:if test="Action != ''">
                            <b>Action: </b><xsl:value-of select="Action"/>
                        </xsl:if>
                        <xsl:if test="Range != ''">
                            <xsl:text>    </xsl:text> <b>Range: </b><xsl:value-of select="Range"/> 
                        </xsl:if>
                        <xsl:if test="Cost != ''">
                            <xsl:text>    </xsl:text> <b>Cost: </b><xsl:value-of select="Cost"/>
                        </xsl:if>
                    </td>
                </tr>   

                <xsl:if test="Action != ''">
                    <tr>
                        <!-- I would like to open and hide this row and give control to each table that is created in this for-each loop -->
                        <td colspan="2" bgcolor="#E0E0E0" id="{$i}" style="display:none;"><b>Action: </b><xsl:value-of select="Action"/></td>
                    </tr>
                </xsl:if>

            </table>
        </xsl:if>
    </div>

</xsl:for-each> 
```

所以我想知道如何获取当前值`i`并将其分配给我的行`<td id="i">`或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:15:24.603

看起来您应该将 id 和`style="display:none;"`从 td 移到 tr。

```
<tr id="sh_{$i}" style="display:none;">

<!-- I would like to open and hide this row and give controll to each table that is creted in this for each loop -->
                    <td colspan="2" bgcolor="#E0E0E0" ><b>Action: </b><xsl:value-of select="Action"/></td>
   </tr> 
```

您的 javascript 函数必须寻找像“sh_1”这样的 id。

# ios - iOS Cocos2D 优化

> ID：16145550
> 
> 赞同：0
> 
> 时间：2013-04-22T11:02:18.583
> 
> 标签：ios, image, performance, cocos2d-iphone

我正在构建一个读取二维数组以创建地图的游戏，但是墙壁都与角落和地板分开，每面墙，每个角落和每层地板都是一个单独的图像，这会消耗很多CPU，但我真的想创造一种随机的地图感觉，这就是为什么我为每个角落和墙壁使用图像。

我在想也许我可以通过合并 2 个或更多不同的纹理来生成纹理，以提高性能。

有谁知道我怎么能做到这一点？或者也许是另一种解决方案？将图像转换为 PVR 会有什么不同吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:06:33.100

对于初学者，您应该使用使用 TexturePacker 之类的工具创建的纹理图集，将尽可能多的“图像”分组到单个图集中。基本上只加载一次，然后根据需要创建任意数量的精灵，而无需重新加载。使用 PVR 将加快加载速度，并有益于您的捆绑包大小。

其次，特别是对于地图背景，您应该使用您在上面的精灵表中初始化的 CCSpriteBatchNode。然后，当您创建图块时，只需创建精灵并将其添加到批处理节点即可。将批处理节点添加到您的场景中。这样做的好处是，无论批处理节点中包含多少精灵（瓦片），这都将在单个 GL 调用中绘制。现在，从性能的角度来看，您将从那里获得最大的收益。

最后，使用模拟器运行时不要依赖 FPS 信息。模拟器不使用主机的 GPU，其性能远低于您在设备上获得的性能。因此，在发布有关性能的问题之前，请确保您在设备上进行测量。

# symfony - getNickname() 未定义

> ID：16145551
> 
> 赞同：0
> 
> 时间：2013-04-22T11:02:19.907
> 
> 标签：symfony, doctrine-orm, doctrine

我有这两个实体：

**事件：**

```
class Event
    {
        /**
         * @var integer
         *
         * @ORM\Column(name="id", type="integer")
         * @ORM\Id
         * @ORM\GeneratedValue(strategy="AUTO")
         */
        private $id;

        /**
         * @var string
         *
         * @ORM\Column(name="title", type="string", length=255)
         */
        private $title;

        /**
         * @var string
         *
         * @ORM\Column(name="description", type="string", length=255)
         */
        private $description;

        /**
         * @var boolean
         *
         * @ORM\Column(name="invitationPermission", type="boolean")
         */
        private $invitationPermission;

        /**
         * @var \DateTime
         *
         * @ORM\Column(name="creationDate", type="date")
         */
        private $creationDate;

        /**
         * @var \DateTime
         *
         * @ORM\Column(name="modifiedDate", type="date")
         */
        private $modifiedDate;

        /**
         * @ORM\OneToMany(targetEntity="Users", mappedBy="id")
         */
        private $user;

        /**
         * Get id
         *
         * @return integer 
         */
        public function getId()
        {
            return $this->id;
        }

        /**
         * Set title
         *
         * @param string $title
         * @return Event
         */
        public function setTitle($title)
        {
            $this->title = $title;

            return $this;
        }

        /**
         * Get title
         *
         * @return string 
         */
        public function getTitle()
        {
            return $this->title;
        }

        /**
         * Set description
         *
         * @param string $description
         * @return Event
         */
        public function setDescription($description)
        {
            $this->description = $description;

            return $this;
        }

        /**
         * Get description
         *
         * @return string 
         */
        public function getDescription()
        {
            return $this->description;
        }

        /**
         * Set invitationPermission
         *
         * @param boolean $invitationPermission
         * @return Event
         */
        public function setInvitationPermission($invitationPermission)
        {
            $this->invitationPermission = $invitationPermission;

            return $this;
        }

        /**
         * Get invitationPermission
         *
         * @return boolean 
         */
        public function getInvitationPermission()
        {
            return $this->invitationPermission;
        }

        /**
         * Set creationDate
         *
         * @param \DateTime $creationDate
         * @return Event
         */
        public function setCreationDate($creationDate)
        {
            $this->creationDate = $creationDate;

            return $this;
        }

        /**
         * Get creationDate
         *
         * @return \DateTime 
         */
        public function getCreationDate()
        {
            return $this->creationDate;
        }

        /**
         * Set modifiedDate
         *
         * @param \DateTime $modifiedDate
         * @return Event
         */
        public function setModifiedDate($modifiedDate)
        {
            $this->modifiedDate = $modifiedDate;

            return $this;
        }

        /**
         * Get modifiedDate
         *
         * @return \DateTime 
         */
        public function getModifiedDate()
        {
            return $this->modifiedDate;
        }

        /**
         * Set user
         *
         * @param user $user
         * @return Event
         */
        public function setUser($user)
        {
            $this->user = $user;

            return $this;
        }

        /**
         * Get user
         *
         * @return user 
         */
        public function getUser()
        {
            return $this->user;
        } 
```

和**用户**：

```
 class Users
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="email", type="string", length=255)
     */
    private $email;

    /**
     * @var string
     *
     * @ORM\Column(name="nick", type="string", length=255)
     */
    private $nick;

    /**
     * @var string
     *
     * @ORM\Column(name="pwd", type="string", length=255)
     */
    private $pwd;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set email
     *
     * @param string $email
     * @return Users
     */
    public function setEmail($email)
    {
        $this->email = $email;

        return $this;
    }

    /**
     * Get email
     *
     * @return string 
     */
    public function getEmail()
    {
        return $this->email;
    }

    /**
     * Set nick
     *
     * @param string $nick
     * @return Users
     */
    public function setNick($nick)
    {
        $this->nick = $nick;

        return $this;
    }

    /**
     * Get nick
     *
     * @return string 
     */
    public function getNick()
    {
        return $this->nick;
    }

    /**
     * Set pwd
     *
     * @param string $pwd
     * @return Users
     */
    public function setPwd($pwd)
    {
        $this->pwd = $pwd;

        return $this;
    }

    /**
     * Get pwd
     *
     * @return string 
     */
    public function getPwd()
    {
        return $this->pwd;
    }
} 
```

我尝试获取一个事件，然后通过事件，获取用户，然后是昵称：

```
$event = $em->getRepository('MyBundle:Event')->findOneById(1);
print_r($event->getUser()->getNickname()); 
```

我得到：

```
Fatal error: Call to undefined method Doctrine\ORM\PersistentCollection::getNickname() in C:\xampp\htdocs\web\src\KNV\MyBundle\Controller\DefaultController.php on line 43 
```

任何想法？

但是，如果我打印它的结果，`getUser()`它会返回大量数据（大多数与 symfony 框架相关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:17.940

首先，您的实体中没有`getNickname()`方法，然后您应该使用.`User``getNick()`

但我认为问题出在其他地方，您定义了一个`oneToMany`关系 betweet`Event`和`User`. 因此，一个事件可能与许多用户相关。然后，如果您调用`getUser()`给定事件，您将获得一组用户。然后，您应该迭代以获取可以调用的单个用户对象`getNick()`。

# javascript - 有没有更好的显示和隐藏方式？

> ID：16145559
> 
> 赞同：0
> 
> 时间：2013-04-22T11:02:39.323
> 
> 标签：javascript, css, show-hide

好的，所以我想从隐藏的页面内部显示一个 Div，当单击它时，它适合 1005 的页面宽度和 100% 的滚动内容高度，即使在广泛的 z-索引检查和设置，以及向下滚动时，一旦你到达 div 的底部，它似乎向下滚动并显示它下面的内容，我真的不希望它这样做。无论如何，我想知道是否有一些比使用我已经拥有的东西更复杂、更有条理或更有效的东西。继承人的编码任何建议将不胜感激。

```
 <script type="text/javascript">
<!--
    function toggle_visibility(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
    }
//-->
</script>

<div id="ef" style="display:none; width:100%; height:120%; overflow:scroll; background-color:#f1f1f1; -webkit-overflow-scrolling:touch; z-index:2000; padding-top:43px; "><div id="efmenubars">
            <div style="width:50px; height:40px;margin-top:7px; float:left; margin-left:8px;">
            </div><span style="display:inline-block;  text-align:center; font-family:'helvetica_bqregular'; font-size:20px; color:#333;">Post Enquiry</span>

    <a href="#" onclick="toggle_visibility('ef');"> <img src="../images/close.png" width="50px" style="float:right; margin-top:7px; margin-right:8px;" /></a>

        </div>
<p>{leftcol}</p></div>

<a class="button2" style="float:right; margin-right:12px; margin-top:19px;"  onclick="toggle_visibility('ef');">Post Enquiry</a> 
```

希望这一切都有意义，抱歉内联 css 非常令人困惑，我知道清理它是一项快速的工作。

干杯

奥尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:07:32.477

只需使用 jquery 在可见性状态之间切换。jQuery 主要用于简化和增强您的代码。因此，如果您真的想改进您的代码，请使用 jquery。

```
.$('#idOfYorElement').toggle(); 
```

只是一个简单的衬里:)

# python - 在使用scrapy制作的网络爬虫中从另一只蜘蛛中调用一只蜘蛛

> ID：16145565
> 
> 赞同：0
> 
> 时间：2013-04-22T11:02:46.880
> 
> 标签：python, beautifulsoup, scrapy, web-crawler

我想点击 pdf 文件所在的网页上的所有链接，并将这些 pdf 文件存储在我的系统上。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from bs4 import BeautifulSoup

class spider_a(BaseSpider):
    name = "Colleges"
    allowed_domains = ["http://www.abc.org"]
    start_urls = [
        "http://www.abc.org/appwebsite.html",
        "http://www.abc.org/misappengineering.htm",
    ]

    def parse(self, response):
        soup = BeautifulSoup(response.body)
        for link in soup.find_all('a'):
            download_link = link.get('href')
            if '.pdf' in download_link:
                pdf_url = "http://www.abc.org/" + download_link
                print pdf_url 
```

使用上面的代码，我可以在 pdf 文件所在的预期页面上找到链接

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class FileSpider(BaseSpider):
    name = "fspider"
    allowed_domains = ["www.aicte-india.org"]
    start_urls = [
        "http://www.abc.org/downloads/approved_institut_websites/an.pdf#toolbar=0&zoom=85"
    ]

    def parse(self, response):
        filename = response.url.split("/")[-1]
        open(filename, 'wb').write(response.body) 
```

使用此代码，我可以保存中列出的页面正文`start_urls`。

有没有办法加入这两个蜘蛛，以便我可以通过运行我的爬虫来保存这些 pdf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:50:10.970

为什么需要两只蜘蛛？

```
from urlparse import urljoin
from scrapy.http import Request
from scrapy.selector import HtmlXPathSelector

class spider_a(BaseSpider):
    ...
    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        for href in hxs.select('//a/@href[contains(.,".pdf")]'):
            yield Request(urljoin(response.url, href),
                    callback=self.save_file)

    def save_file(self, response):
        filename = response.url.split("/")[-1]
        with open(filename, 'wb') as f:
            f.write(response.body) 
```

# javascript - 用于 Javascript 的 Python 中的替代字符串格式化程序

> ID：16145567
> 
> 赞同：0
> 
> 时间：2013-04-22T11:02:50.413
> 
> 标签：javascript, python, string-formatting

在 Python 中有一个字符串 fromatter like；

```
>>> print 'Name :%s Surname :%s'%('Ahmet','DAL')
Name :Ahmet Surname :DAL 
```

Javascript中是否有任何与Python一样简单使用的**原生**字符串格式化方法？

**编辑：** 有些方法使用外部库，如“sprintf”等。但我只是好奇，Javascript 中有**本地方法吗？**

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:24:50.393

不，Javascript 中没有像`str.format`Python 那样的原生字符串格式化方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:06:06.657

您可以使用 Javascript 的[sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf)。

您提供的`sprintf`等效示例将是：

```
sprintf('Name: %1$s Surname :%2$s', 'Ahmet','DAL'); 
```

您还可以更改参数的顺序：

```
sprintf('Name: %2$s Surname :%1$s', 'DAL', 'Ahmet'); 
```

它是开源的，你可以[在这里](https://github.com/alexei/sprintf.js)下载。

# svg - 在 dart:svg 中创建路径

> ID：16145568
> 
> 赞同：6
> 
> 时间：2013-04-22T11:02:52.380
> 
> 标签：svg, dart

我是使用 Dart 的新手，我一直在尝试移植一些与 svg 一起使用的 javascript 代码，创建一个包含一些段的路径，但我很难理解它的 API 是如何工作的.

以下代码不会运行，但它可能说明了我想做的事情：

```
Element i = query("#divsvg");
svg.SvgSvgElement s = new svg.SvgSvgElement();
i.append(s);

svg.PathElement p = new svg.PathElement();
p.pathSegList.add(
      p.createSvgPathSegArcAbs(200, 200, 50, 50, 180, false, false)
   );

s.children.add(p); 
```

但是，据我从文档中了解到：

*   createSvgPathSegArcAbs 创建一个非父路径段
*   pathSegList 是最终的，所以你不能在构建后添加它
*   PathElement 构造函数似乎没有接受任何参数

我是否遗漏了有关 Dart 的工作原理或 svg 库文档中的某些内容？我花了几个小时查看文档、谷歌搜索和查看测试，但我没有找到任何似乎涵盖这一点的东西（测试似乎使用 HTML 代码而不是 API 创建东西）。

任何指出我正确方向的东西都将不胜感激！

**更新**

我花了更多时间查看函数，并且 pathSegList 的“最终性”不应该阻止它被更改（它不是 const），只是被替换了。

但是，如果您尝试调用它们，像“add”这样的各种函数会显式地实现异常，而一些函数（如 append）是本机实现的。

根据调试器：

```
p.pathSegList.append(
    p.createSvgPathSegArcAbs(200, 200, 50, 50, 180, false, false)
); 
```

将附加一个路径段，但这不会出现在“innerHTML”属性中，也不会出现在最终页面的 HTML 中......

我开始认为 svg 支持根本不是“完成”，并且有点想只移植到画布和/或 WebGL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T15:05:41.167

我能够使用 PathSegList 的 appendItem 方法创建一个路径元素并向其[添加](http://api.dartlang.org/docs/bleeding_edge/dart_svg/PathSegList.html)[路径](http://api.dartlang.org/docs/bleeding_edge/dart_svg/PathSegList.html#appendItem)段：

```
var div = query('#container');
var svgElement = new svg.SvgSvgElement();
div.append(svgElement);
path = new svg.PathElement();
svgElement.append(path);

segList = path.pathSegList;

segList.appendItem(path.createSvgPathSegMovetoAbs(50, 50));
segList.appendItem(path.createSvgPathSegArcAbs(200, 200, 50, 50, 180, false, false));
segList.appendItem(path.createSvgPathSegClosePath()); 
```

# angularjs - 具有范围破坏输入的 ngmodel 的指令

> ID：16145571
> 
> 赞同：3
> 
> 时间：2013-04-22T11:03:13.693
> 
> 标签：angularjs, angularjs-directive

我应该为我的指令赋予什么范围，以便输入显示初始值 "Toto" ？我不想接受范围：true

HTML 代码：

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <script>document.write('<base href="' + document.location + '" />');</script>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
   <input customattr type = "text" ng-model="value.name" />   
</body>
</html> 
```

JS代码：

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.value = {"name":"Toto", "id":1};

});

    app.directive('customattr', function () {
      return {
          restrict: 'A',
          scope: {
          },
          link: function (scope, element, attrs) {

          } 
      }; 
    }); 
```

Plunker：http: [//plnkr.co/edit/JxWElWhTeBbNpFHS0wYT](http://plnkr.co/edit/JxWElWhTeBbNpFHS0wYT)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T11:21:36.833

我想这是人们在使用 AngularJS 指令和作用域时经常遇到的事情之一。要理解下面的解决方案和建议，我们需要了解关于 AngularJS DOM 元素和范围的一件事：

> 在 AngularJS 中，任何单个 DOM 元素都与一个且只有一个范围相关联。

这意味着我们不能让给定元素上的属性子集在一个范围内工作，而另一个子集在不同范围内工作。这正是您在 plunker 中尝试做的事情，您希望该`ng-model`属性与一个范围（由指令在`<body>`元素上定义的范围）和另一个范围（在指令中创建的隔离的范围）一起工作。`ng-controller``customattr`

您基本上有两种方法可以摆脱这种情况：

1)`ng-model="$parent.value.name"`用于明确地将 ng-model 指令指向某个范围。但这很脆弱且不明显。

2）从属性指令中删除隔离范围。根据经验，我建议不要在应该用作输入字段上的属性的指令中使用隔离范围（与 结合使用`ng-model`）。您仍然可以使用该`$parse`服务获取属性的值。

# php - 如何通过后端服务器访问 Google Play Android Developer API

> ID：16145572
> 
> 赞同：3
> 
> 时间：2013-04-22T11:03:16.670
> 
> 标签：php, android, google-api, google-play-services, google-api-php-client

我为 android 实现了 In App Billing。我想通过我的后端服务器实现订阅有效性检查。作为 Google Play 文档，为了调用 Google Play API，需要使用 oauth 2.0 进行身份验证。

我按照说明注册项目和创建凭据。但是从那里我不知道如何使用这些凭据，我尝试通过 CURL 请求进行身份验证，但它要求许可，如下图所示![在此处输入图像描述](https://i.stack.imgur.com/GVyup.png)

此权限工作正常我可以交换代码并获取访问令牌，但所有这些都是手动完成的，我应该如何在后端实现它。我什至尝试使用谷歌提供的 google api php 库，但它增加了混乱。他们也没有提供任何示例，如何使用库。

谁能详细说明如何使用库或纯 php？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:14:00.567

要在服务器上执行 LVL 和/或 IAB 验证，请勿直接从服务器访问 Google 服务器。即使所有信息都可用，您也会面临完整性问题，因为由于同步延迟，您的应用程序和服务器会看到不同的信息。

相反，[请使用您的应用作为代理，并按照此处所述验证您服务器上的 Google Play 信息](https://stackoverflow.com/a/16030386/1856738)。

# android - 如何在 SoapFault 中获取故障字符串？

> ID：16145575
> 
> 赞同：0
> 
> 时间：2013-04-22T11:03:26.803
> 
> 标签：android, soap, soapfault

我在 android 中调用 Soap API 并收到以下错误，

```
SoapFault - faultcode: '2' faultstring: 'Access denied.' faultactor: 'null' detail: null
at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:141)
at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140)
at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:214)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
at com.magentodemo.customer.MagentoCustomer$GetCustomerDetailsTask.doInBackground(MagentoCustomer.java:714)
at com.magentodemo.customer.MagentoCustomer$GetCustomerDetailsTask.doInBackground(MagentoCustomer.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:264)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856) 
```

我想从此 SoapFault 中检索拒绝访问消息，

我怎样才能得到那个消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:46:33.857

我得到了我的问题的解决方案，

我有以下代码

```
private class Login extends AsyncTask<Void, Integer, String> {

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected void onPostExecute(String result) {

    }

    @Override
    protected String doInBackground(Void... params) {
        try {

            // Soap Call

        } catch (SoapFault fault) {
            Log.v("TAG", "soapfault = "+fault.getMessage());

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

我只是为 SoapFault 添加了 Catch 块，然后我得到了故障字符串，就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:16:15.340

您是否尝试过 SoapFault 类 API 的方法来满足您的要求？请从以下链接检查各自：http: [//docs.oracle.com/javaee/5/api/javax/xml/soap/SOAPFault.html#getFaultString()](http://docs.oracle.com/javaee/5/api/javax/xml/soap/SOAPFault.html#getFaultString())

# java - 展开和折叠 Ext js 树面板重复叶节点的错误行为

> ID：16145581
> 
> 赞同：2
> 
> 时间：2013-04-22T11:04:07.057
> 
> 标签：java, javascript, extjs, treepanel

我在这里有一个典型的问题，例如，我正在尝试使用 TreePanel 在服务器上复制文件夹结构。情况是我有一些文件夹有重复的孩子。也就是说，文件/文件夹名称相同，即`Node id`. 当我尝试展开和折叠时，父级无法映射到 2 个子级，并且展开正在创建重复文件夹。

附加节点之前的代码是，我已经扩展了树，

```
 Ext.define("my.widget.ContentTree",
        {
            extend: "Ext.tree.Panel",
            alias: "widget.my_content_tree", 
```

...

```
 // beforeappend event required for node initialization
                this.store.on("beforeappend", onBeforeAppendNode, this);
                this.store.on("append", onAppendNode, this); 
```

而这行代码就是附加节点之前的逻辑。

```
function onBeforeAppendNode(parent, newNode) {
    /* ext js expands & collapses the tree w.r.t internalId. This Id is by        
              default set to the node ID. Appending the parent id to the child with     
             additonal timestamp ensures that there cannot be duplicate IDS
     No adverse effects if the internal ids are changed. its neither persisted 
             nor any state is maintained w.r.t to internal ID.*/

  // Important Line Start
    if(parent!=null)
          newNode.internalId=newNode.internalId+"_"+parent.get("id")+"_"+Math.round(new    
          Date().getTime()) ;
 // Important Line End
    var nid = newNode.get("id");
... 
```

我的逻辑是我通过附加父 ID 和时间戳来更改树的内部 ID。

我的问题是，如果我的方法是正确的？因为我试图找到一个执行此操作的 EXT js API，但我找不到一个。

任何人都可以请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:25:30.690

我遇到了同样的问题。树不支持具有相同 ID 的两条记录。

如果您没有可编辑的树面板，那么您可能不关心 ID，因此不应将其包含在您的模型类中。请记住，idProperty 默认为 ID 字段。如果你不把它从服务器带进来就可以了。

或者，您可以使用服务器伪造的唯一 ID，但如果您曾经将数据发送回服务器，则需要进行处理。

# html - 在电梯框架中将参数从片段传递到下一页

> ID：16145583
> 
> 赞同：0
> 
> 时间：2013-04-22T11:04:15.387
> 
> 标签：html, scala, web-applications, sbt, lift

我正在使用 lift 和 scala 创建一个示例网络应用程序。我的应用程序中有两个页面。第一个有一个表单，它从用户那里获取票证信息，点击提交时它会调用代码片段。我想在下一页显示我的表单值。我提到了 [如何在使用 Lift 框架的代码段传递的 HTML 页面中获取参数的](https://stackoverflow.com/questions/16086687/how-to-get-parameters-in-an-html-page-passed-from-a-snippet-with-lift-framework)问题，但存在一些问题。到目前为止，我尝试了以下代码。 **在我的第一页片段中：**

```
class ticketDetailsResponse(
    var source:String="", 
    var destination:String="")

object BookFirstCityTrain {
     def render = {        
             val responseForm = new ticketDetailsResponse()              
             var from = ""
             var to = ""                 
            def process() {      
                            responseForm.source = from
                            responseForm.destination = to
                             S.redirectTo("ConfirmTicket.html",   () => showTicketDetails.ticketDetails(Full(responseForm)))
                         }
     "name=source" #> SHtml.text(from, from = _) &
     "name=destination" #> SHtml.text(to, to = _) &
     "type=submit" #> SHtml.onSubmitUnit(process)
 }
} 
```

**和我的第二页片段**

```
object showTicketDetails {
   object ticketDetails extends RequestVar[Box[ticketDetailsResponse]](Empty)
 }

 class showTicketDetails {
    def render = "*" #> {
      showTicketDetails.ticketDetails.get.map { r =>
      "#fromStation" #> r.source
      "#toStation" #>r.destination
    }
  }
} 
```

**我从视图中引用了我的第二页片段，如下所示：**

```
 <div data-lift="showTicketDetails" >     
        From: <span id="fromStation"></span><br />
        To: <span id="toStation"></span><br />
 </div> 
```

但是当只有一个参数时它工作得很好。如果我在页面 () 中打印第二个参数，则第`"#toStation" #>r.destination`一个打印值正在消失。只有最后一个值在这里打印。我怎样才能打印这两个。任何人都可以为我回答。一些投入将是有价值的。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:10:42.170

您必须使用该方法链接[CSS 选择器。](http://simply.liftweb.net/index-7.10.html)`&`

```
showTicketDetails.ticketDetails.get.map { r =>
  "#fromStation" #> r.source &
  "#toStation" #> r.destination
} 
```

否则，您的代码块仅返回最后一个表达式并将第一个表达式丢弃为空操作。

# c# - 对内存中的表运行 SQL 查询

> ID：16145584
> 
> 赞同：1
> 
> 时间：2013-04-22T11:04:20.417
> 
> 标签：c#, sql, linq

我有 2 个使用 SQL 查询加入的表

```
DataTable Table = Select FacilityIssueDetails.FacilityNo,LCPaymentDetails.BillNo, FacilityIssueDetails.FStatus,LCPaymentDetails.BankName , LCPaymentDetails.Supplier, FacilityIssueDetails.BaseAmount,FacilityIssueDetails.Currency, FacilityIssueDetails.FacilityAmountINR, LCPaymentDetails.PAmountINR , FacilityIssueDetails.LCAmountPaid, FacilityIssueDetails.LCAmountRemaining,FacilityIssueDetails.IssueDate, FacilityIssueDetails.ExpiryDate, LCPaymentDetails.LCNo 
                  from FacilityIssueDetails,LCPaymentDetails 
                  where FacilityIssueDetails.FacilityNo = LCPaymentDetails.LCNo 
```

现在我想对存储在内存中的表运行另一个 SQL 查询。

怎么做？这是一个选择查询。

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:13:07.303

使用[DataTable.Select](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)方法。请注意，与`SELECT`数据库相比，它的性能很慢。

# spring - 以编程方式设置 bean 的属性引用

> ID：16145586
> 
> 赞同：1
> 
> 时间：2013-04-22T11:04:25.270
> 
> 标签：spring, hibernate, sessionfactory

现在我正在使用以下 bean 条目

```
<bean id="Service" >
    <property name="target">
            <bean class="someClass" lazy-init="false">
                <property name="SessionFactory1"><ref bean="SessionFactory1"/></property>
                <property name="SessionFactory2"><ref bean="SessionFactory2"/></property>
                <property name="SessionFactory3"><ref bean="SessionFactory3"/></property>
           </bean>
        </property>

</bean> 
```

现在的要求是首先检查哪些会话工厂有一个活动的数据源，并且只将那些包含在上面的 bean 定义中。这样，如果我们尝试使用非活动数据源初始化会话工厂，应用程序就不会中断。

sessionfactory 初始化将通过为会话工厂使用单独的配置 xml 并仅加载具有活动数据源的那些来进行。

请帮助如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:19:31.173

你可以使用 Spring`InitializingBean`接口，它让你实现一个`afterPropertiesSet()`方法。此方法将在 Spring 实例化您的类后执行，您可以检查您的会话工厂是否可用。

> InitializingBean：由 BeanFactory 设置所有属性后需要做出反应的接口实现：例如，执行自定义初始化，或仅检查是否已设置所有必需属性。

链接：[Spring InitializingBean](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/InitializingBean.html)

# jquery - 如何在 MVC 4 的面板中管理 JQuery 动态加载的表单

> ID：16145589
> 
> 赞同：1
> 
> 时间：2013-04-22T11:04:38.380
> 
> 标签：jquery, asp.net-mvc-4, postback, webforms

我希望将各种 MVC 表单动态加载到页面上的任意面板中，但在回发更改时保持当前 URL（即不离开父页面）。

为了方便 MVC 创作和验证，我需要每个表单都像在自己的页面上一样工作，但在提交后不会在子表单页面上结束。

负载的硬连线示例（在实际版本中，目标是数据驱动的）可能是：

```
that.element.children(".tilepanel").click(function () {
    $(this).load('/form/personaldetails .main-content');
}); 
```

这会从 views/form/personaldetails.cshtml 中提取`.main-content`部分，包括标题和表单，并将其插入到单击的面板中。

不幸的是，表单提交的基本行为要么尝试回发到当前控制器（它不知道`PersonalDetails`模型），要么回发到`controllers/formscontroller.cs`（到`PersonalDetails`方法）并在views/form/personaldetails.cshtml页面上结束。

我愿意接受任何建议（更新面板、服务器端重定向、JQuery 回发、切换到 SPA 模型等等），但我正在寻找不需要对单个页面进行重大更改并停止当前页面更改的最优雅的解决方案.

## 可能的解决方案 #1（Ajax 帖子） - 这有效：

```
$(this).load('/form/personaldetails .main-content', function () {
    _connectFormSubmit($(this), '/form/personaldetails');
});

_connectFormSubmit: function (panel, url) {
    panel.find('form').submit(function (event) {
        event.preventDefault();
        $.ajax({
            url: url,
            type: "post",
            data: panel.find('form').serialize(),
            success: function (data, status, xhr) {
                panel.html($(data).find('.main-content'));
                _connectFormSubmit(panel, url);
            },
            error: function (xhr, status, error) {
                alert(error);
            }
        });
        return false;
    }); 
```

我用这种方法遇到的最初问题是，当每个帖子上的整个表单被替换时，需要重新连接提交处理程序，所以它*有点递归*。在有人想出更好的方法之前，这个方法有效并且会一直有效。如果没有人提出更好的方法，我会将其移至答案。

*为半对象声明道歉，但我不得不从一个工作项目中删除它*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:02:25.497

这是一个完整的解决方案，允许您将来自其他 MVC 4 页面的表单动态插入到面板中，并在这些页面上执行任何内联 Javascript。

## 只需致电：

```
_loadFormIntoPanel(panel, url, true); 
```

将表单获取（或发布）到面板（例如 div）中的功能：

```
_loadFormIntoPanel: function(panel, url, getit){
    var that = this;
    var re = /<script\b[^>]*>([\s\S]*?)<\/script>/gm;
    var scripts = "";
    var match;

    // Do an async AJAX get or post
    $.ajax({
        url: url,
        type: getit ? "get" : "post",
        data: getit ? null : panel.find('form').serialize(),
        success: function (data, status, xhr) {
            while (match = re.exec(data)) {
                if (match[1] != "") {
                    scripts += match[0];
                }
            }

            // Replace the entire panel
            panel.html($(data).find('.main-content'));

            // Add the scripts - will evaluate immediately
            panel.append(scripts);

            // Connect the post of the new form back to here
            panel.find('form').submit(function (event) {
                event.preventDefault();
                that._loadFormIntoPanel(panel, url, false);
            });
        },
        error: function (xhr, status, error) {
            alert(error);
        }
    });
} 
```

*这代表了一整天的研究、试验和错误，所以如果你使用它，请注明来源:)*

# c# - 将文件从 Android 客户端发送到 C# 服务器，在读取整个文件之前中断

> ID：16145592
> 
> 赞同：1
> 
> 时间：2013-04-22T11:04:43.403
> 
> 标签：c#, android, file, tcp, buffer

c# 代码

```
 private MemoryStream Read() {
        NetworkStream clientStream = _client.GetStream();
        MemoryStream messageStream = new MemoryStream();

    var inbuffer = new byte[65535];

    if(clientStream.CanRead) {
        do {
            int bytesRead = clientStream.Read(inbuffer,0,inbuffer.Length);
            messageStream.Write(inbuffer, 0, bytesRead);
            messageStream.Flush();
            Debug.Print(messageStream.Length + " added " + bytesRead);
        } while(clientStream.DataAvailable); // GOES BEYOND HERE, EVEN THOUGH THERE'S MORE DATA
    }

    messageStream.Position = 0;
    return messageStream;
} 
```

安卓代码

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

                if(resultCode == RESULT_OK){                   
                        if(requestCode == ATTACH_FILE_REQUEST){
                                 writeToSocket("<FILE>generic.jpeg");
                                 InputStream input = null;
                                 String filePath = data.getData().getPath().toString();
                                 try {
                                        input = getContentResolver().openInputStream(data.getData());                  
                                        BufferedInputStream bufferedInputStream = new BufferedInputStream(input);
                                        byte[] bytes = new byte[65535];
                                        ByteArrayOutputStream byteArray = new ByteArrayOutputStream();
                                                while((bufferedInputStream.read(bytes)) != -1){
                                                         byteArray.write(bytes, 0, bytes.length);                                
                                                 }
                                                socketNetworkHelper.writeFile(byteArray.toByteArray());
                                } catch (FileNotFoundException e1) {
                                        // TODO Auto-generated catch block
                                        e1.printStackTrace();
                                        Toast.makeText(this, "Error in file selection", Toast.LENGTH_LONG).show();
                                } catch (IOException e2){
                                        e2.printStackTrace();
                                        Toast.makeText(this, "Input/Output Error", Toast.LENGTH_LONG).show();
                                }        
                        }
                }
} 
```

在连接了套接字的 SocketNetworkHelper.java 中：

```
public void writeFile(byte[] buffer) {

                try {
                        socket.getOutputStream().write(buffer);

                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
        } 
```

问题是：我怎样才能得到整个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:43:34.367

您还可以将文件大小作为参数发送

```
private MemoryStream Read(int filesize) {
            NetworkStream clientStream = _client.GetStream();
            MemoryStream messageStream = new MemoryStream();
            var inbuffer = new byte[filesize];

            if (clientStream.CanRead) {
                int totalBytesRead = 0;
                do {
                    int bytesRead = clientStream.Read(inbuffer, 0, inbuffer.Length);
                    totalBytesRead += bytesRead;
                    messageStream.Write(inbuffer, 0, bytesRead);
                    messageStream.Flush();
                } while (totalBytesRead < filesize);

            }
            messageStream.Position = 0;
            return messageStream; 
```

# xaml - 在空白应用程序中创建自定义大小的瓷砖-Win RT

> ID：16145601
> 
> 赞同：1
> 
> 时间：2013-04-22T11:05:13.533
> 
> 标签：xaml, windows-8, windows-runtime

![在此处输入图像描述](https://i.stack.imgur.com/ezFAZ.png)

嗨，我正在尝试在中心页面中使用自定义大小的动态磁贴创建一个空白应用程序。我知道 Windows 有预定义的磁贴模板，但我想知道是否可以使用现有的磁贴模板实现相同的效果，或者我应该创建一个空白应用程序。

另外，如果使用空白应用程序，谁能告诉我一个资源，我可以在其中创建图像中的动态图块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:36:33.850

这里有两个不同的概念：

*   应用程序中心中的“磁贴”，在**应用程序中**。为此，您可以从预定义的模板开始（例如 File-->New Project 中的 Grid 应用程序），或者从空白应用程序开始，并从头开始使用其“图块”构建您的集线器。在这种情况下（应用程序内集线器中的磁贴），磁贴的大小没有限制，因此您可以创建类似于屏幕截图的内容。

*   **开始屏幕上的**磁贴。您的应用程序将由开始菜单上的磁贴表示。“动态磁贴”的概念是动态更改开始菜单中该磁贴的内容。为此，您必须使用[预定义的磁贴模板集](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761491.aspx)，并且只有两种尺寸的磁贴可用（方形磁贴和宽磁贴）。[有关在此处](http://blogs.msdn.com/b/jennifer/archive/2012/11/20/real-world-live-tiles-working-with-live-tiles-in-windows-8-apps.aspx)开发活动磁贴的更多信息。

# phpunit - 是否可以使用 @depends 返回多个值？

> ID：16145606
> 
> 赞同：1
> 
> 时间：2013-04-22T11:05:24.733
> 
> 标签：phpunit

[@depends](http://www.phpunit.de/manual/3.7/en/appendixes.annotations.html#appendixes.annotations.depends)注解允许表达测试之间的依赖关系：

```
class MyTest extends \PHPUnit_Framework_TestCase
{
    public function testOne()
    {
        // ...

        return $client;
    }

    /**
     * @depends testOne
     */
    public function testTwo(Client $client)
    {
        // ...
    }
} 
```

如果我想返回几个值，我可以返回一个值数组，例如：

```
class MyTest extends \PHPUnit_Framework_TestCase
{
    public function testOne()
    {
        // ...

        return array($client, $node);
    }

    /**
     * @depends testOne
     */
    public function testTwo(array $items)
    {
        list ($client, $node) = $items;

        // ...
    }
} 
```

虽然它工作正常，但这种方法的问题是我失去了我的 IDE 的类型提示，并且必须手动注释`$client`and`$node`变量以便它正确理解它们。

我想做的是在第二个测试中明确使用返回值作为单独的参数：

```
class MyTest extends \PHPUnit_Framework_TestCase
{
    public function testOne()
    {
        // ...

        return array($client, $node);
    }

    /**
     * @depends testOne
     */
    public function testTwo(Client $client, Node $node)
    {
        // ...
    }
} 
```

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:36:02.333

我看了一会儿，我认为答案是否定的。这更像是一个清晰度问题。因为 PHP 只允许您返回一个变量，所以您需要在 PHPUnit 级别引入额外的注释逻辑来告诉它您返回的不是一个值，而是一组值。

在旁注中，我发现使用 @depends 返回对象可能会很棘手。例如，如果您有两个都依赖于集合的测试，请说`@depends createUser`。结果是参考。然后`testOne`更改给定的用户对象，因为它是一个引用`testTwo`，现在将获得一个已更改的用户对象。

我最初认为@depends 返回值的想法很棒，但实际上我已经停止使用它。

# scala - Scala：规范 6.23.3 隐式重载决议——需要解释

> ID：16145609
> 
> 赞同：1
> 
> 时间：2013-04-22T11:05:34.860
> 
> 标签：scala, implicit

[这是多个备选方案之间的隐式搜索决策](https://stackoverflow.com/questions/16044366/implicit-search-decision-between-multiple-alternatives)的后续。我将引用其中的代码。

```
trait A
trait B extends A
caseclass C extends B

trait Tester[-T] { def test (t: T): Boolean }
object Tester {
  def test[T](t : T)(implicit tester: Tester[T]) = tester.test(t)
  implicit def atester = new Tester[A] { override def test (a: A) = true }
  implicit def btester = new Tester[B] { override def test (b: B) = false }
}
val c = C()
Tester.test(c) 
```

我从概念上理解为什么在寻找关于逆变性和特异性的隐含时`atester: Tester[A]`选择。`btester: Tester[B]``Tester.test(implicit t: Tester[C])`

我发现很难看到的是如何具体描述这一点 spec `6.26.3 overloading resolution`。

AFAIK，该规范将需要重载分辨率的标识符或选择 e 分为三类：

1.  e 用于函数应用程序 e(e1,..., e_m)
2.  e 用于类型应用程序 e[targs]
3.  否则

此外，该规范描述了通过确定一种替代方案比另一种更具体来计算的相对权重。

我首先不明白哪个类别适合替代品。如果是`{ Tester[A], Tester[B] }`，那么在我看来 (2) 很可能，但它的规则 -

> 重载决议再次应用于整个表达式 e[targs]

——看起来又把球扔回去了。而且我也没有发现规范中说明如何比较 A 和 B 的位置。

* * *

类似的一个：在同一问题的 2 级答案中，代码被修改，我也在这里引用它：

```
trait Tester[T] {def test (t: T):Boolean }
object Tester{
  def test[T](t: T)(implicit tester: Tester[T]) = tester.test(t)
  implicit def atester[T <: A] = new Tester[T] { override def test (a: T) = true }
  implicit def btester[T <: B] = new Tester[T] { override def test (b: T) = false }
}
val c = C()
Tester.test(c) 
```

我认为替代方案是两种多态方法： `{ atester[T <: A]: Tester[T], btester[T<: B]: Tester[T] }`. 它看起来属于（1）类。但我不清楚进一步推理。

# jpa-2.0 - 使用嵌入式 glassfish v3 进行 JPA + EJB 测试

> ID：16145613
> 
> 赞同：3
> 
> 时间：2013-04-22T11:05:42.170
> 
> 标签：jpa-2.0, glassfish-3, ejb-3.1

在这些说明之后尝试设置 JPA+EJB 测试：http: [//ctpjava.blogspot.fi/2009/10/unit-testing-ejbs-and-jpa-with.html](http://ctpjava.blogspot.fi/2009/10/unit-testing-ejbs-and-jpa-with.html)

似乎很少有我无法完全正确的问题。首先我得到这个错误（我可以解决这个问题，但它仍然需要修复）：

```
SEVERE: EJB6004:Specified application server installation location [C:\Users\<userName>\.m2\repository\org\glassfish\extras\glassfish-embedded-all\domains\domain1] does not exist. 
```

找到了这个站点，它提供了（更正确的？）要设置的属性：http: [//docs.oracle.com/cd/E18930_01/html/821-2424/gjlde.html](http://docs.oracle.com/cd/E18930_01/html/821-2424/gjlde.html)

并将我的测试设置修改为：

```
import javax.ejb.embeddable.EJBContainer;
import javax.naming.Context;
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;
...
@BeforeClass
public static void createContainer() {
    Map<String, Object> properties = new HashMap<String, Object>();
    properties.put(EJBContainer.MODULES, new File("target/classes"));
    properties.put("installation.root", "./src/test/glassfish");
    properties.put("configuration.file", "./src/test/glassfish/domains/domain1/config/domain.xml");
    container = EJBContainer.createEJBContainer(properties);
    ctx = container.getContext();
} 
```

在 pom.xml 中，我似乎需要以下内容：

```
 <dependency>
        <groupId>org.apache.derby</groupId>
        <artifactId>derby</artifactId>
        <version>10.9.1.0</version>
        <scope>test</scope>
    </dependency>

    <!-- Must be before java-ee -->
    <dependency>
        <groupId>org.glassfish.extras</groupId>
        <artifactId>glassfish-embedded-all</artifactId>
        <version>3.1.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency> 
```

错误指向用户目录，我可以通过在那里设置所需的东西（并通过它）来通过它，但这不是一个合适的地方，因为所有东西都必须通过 SVN 可用。

根据后一个链接，我认为我设置了正确的属性，但这些似乎被忽略了。也许我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:39:45.163

在属性链接中错过了此文本：

> 下表总结了可以传递给 EJBContainer#createEJBContainer(Properties) 方法的属性。所有属性都在 org.glassfish.ejb.embedded.glassfish 包中。例如，installation.root 属性的全名是 org.glassfish.ejb.embedded.glassfish.installation.root。

所以答案是：

```
org.glassfish.ejb.embedded.glassfish. 
```

在每个属性之前

因此：

```
org.glassfish.ejb.embedded.glassfish.installation.root 
```

而不是：

```
installation.root 
```

# python - 通过 Python 发送电子邮件 - 将 excel/csv 的内容作为格式化表格粘贴到邮件正文中

> ID：16145616
> 
> 赞同：1
> 
> 时间：2013-04-22T11:05:50.833
> 
> 标签：python, email

我正在尝试使用 smtplib 通过 Python 发送邮件。我主要关心的是获取 csv/excel 的内容并将数据原样（表格格式）粘贴到正在发送的电子邮件的邮件正文中。我准备好以下代码片段来搜索文件并在 shell 上打印内容。如何在邮件正文中获得相同的输出？

```
from os import listdir
import csv
import os

#Search for a csv in the specified folder
directory = "folder_path"

def find_csv_filenames( path_to_dir, suffix="Data.csv" ):
    filenames = listdir(path_to_dir)
    return [ filename for filename in filenames if filename.endswith( suffix ) ]

filenames = find_csv_filenames(directory)
for name in filenames:
    datafile=name
    print(name)

path=directory+'//'+datafile

#Read the selected csv
with open(path,'r') as csvfile:
    spamreader=csv.reader(csvfile,delimiter=' ',quotechar='|')
    for row in spamreader:
        print(', '.join(row)) 
```

TIA 为您提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:38:16.793

创建一个[StringIO](http://docs.python.org/2/library/stringio.html?highlight=stringio#StringIO)实例，比如 csvText 而不是打印使用

```
csvText.write(", ".join(row)+"\n") 
```

最后的换行符是必要的，因为它不会像 print 那样自动添加。最后（即在循环之后）调用 csvText.getvalue() 将返回您想要邮寄的内容。

我还建议不要自己将文件规范粘合在一起，而是调用 os.path.join() 。

# ant - 在 ANT 中使用条件长度

> ID：16145626
> 
> 赞同：2
> 
> 时间：2013-04-22T11:06:11.790
> 
> 标签：ant, conditional

我目前正在尝试在 ANT 中使用长度任务，更具体地说是制作条件长度​​任务。

如果文件大于设定的长度，我想将消息标记到当前存在的文件，如下所示：

```
<project name="ant" default="check-filesize">
<target name="check-filesize">
    <length mode="all" property="fs.length.bytes" when="gt" length="100">
    <fileset dir="size" includes="*"/>
    </length>
    <echo>sorry your file set is to large</echo>
</target>
</project> 
```

我已经编写了代码来打印目录中所有文件的大小，但我没有将其包含在此处以保持简短。

如果长度不允许回显标签，我可以用另一种方式执行此操作吗？如果没有人知道 when 标签的作用？显然，我只希望在违反条件时发生回声

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:50:36.800

我发现了一种不使用外部库的方法，但感谢您的帮助。这里是如何：

```
<project name="ant" default="check-filesize">
<target name="check-filesize">
  <fail message="Your File Exceeds Limitations Please Operator For Full Size Of Data Set>
    <condition>
      <length length="1000" when="gt" mode="all" property="fs.length.bytes">
         <fileset dir="size" includes="*"/>
      </length>
    </condition>
   </fail>
 </target>
 </project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:51:30.383

这是一种使用 Ant 的内置任务有条件地回显语句的方法：

```
<project name="ant-length" default="check-filesize">
    <target name="check-filesize" depends="get-length, echo-if-large"/>

    <target name="get-length">
        <condition property="fs.length.too.large">
            <length mode="all" when="gt" length="100">
                <fileset dir="size" includes="*"/>
            </length>
        </condition>
    </target>

    <target name="echo-if-large" if="fs.length.too.large">
        <echo>sorry your file set is too large</echo>
    </target>
</project> 
```

第三方[Ant-Contrib 库](http://ant-contrib.sourceforge.net/)有一项[`<if>`任务](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)可以简化这一点。

# android - 左/右和上/下滑动导航

> ID：16145627
> 
> 赞同：2
> 
> 时间：2013-04-22T11:06:13.580
> 
> 标签：android, android-pageradapter

我正在考虑创建一个 Android 应用程序作为更广泛的艺术项目的一部分，并且没有 Android 开发经验需要检查是否有可能/可行。

它需要一个非常简单的界面，在包含图像或文本的几个 (15 - 20) 个页面之间导航。导航需要向左/向右和向上/向下滑动。

我已经在一个非常简单的应用程序中使用 PagerAdapter/OnClickListener 实现了概念证​​明（通过复制/粘贴有关该主题的先前问题的代码），但这仅进行左/右切换。

有没有办法使用它在页面之间进行向上/向下导航？任何帮助/建议将不胜感激，

```
import android.content.Context;
import android.content.Intent;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    @Override
    public Object instantiateItem(View container, int position) {
        Context context = container.getContext();
        LinearLayout layout = new LinearLayout(context);

        TextView textItem = new TextView(context);
        Button buttonItem = new Button(context);
        buttonItem.setText("Aceptar");
        buttonItem.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent("com.phone");

            }
        });

        switch (position) {
        case 0:
           textItem.setText("Photo 1 - begining");
           break;
        case 1:
           textItem.setText("Photo 2");
           break;
        case 2:
            textItem.setText("Photo 3");
            break;

case 3:
        textItem.setText("Photo 4");
        break;
    case 4:
        textItem.setText("Photo 5 - end");
        break;
    }
    layout.addView(textItem);
    ((ViewPager) container).addView(layout, 0); 
    return layout;
}
@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}
@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
}
@Override
public Parcelable saveState() {
    return null;
}
} 
```

这是给出错误的新代码

> 未为 Object 类型定义 onTouch(View, MotionEvent) 方法

```
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class OnSwipeTouchListener implements OnTouchListener {

    private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

    public boolean onTouch(final View view, final MotionEvent motionEvent) {
        super.onTouch(view, motionEvent);
        return gestureDetector.onTouchEvent(motionEvent);
    }

    private final class GestureListener extends SimpleOnGestureListener {

        private static final int SWIPE_THRESHOLD = 100;
        private static final int SWIPE_VELOCITY_THRESHOLD = 100;

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            boolean result = false;
            try {
                float diffY = e2.getY() - e1.getY();
                float diffX = e2.getX() - e1.getX();
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffX > 0) {
                            onSwipeRight();
                        } else {
                            onSwipeLeft();
                        }
                    }
                } else {
                    if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffY > 0) {
                            onSwipeBottom();
                        } else {
                            onSwipeTop();
                        }
                    }
                }
            } catch (Exception exception) {
                exception.printStackTrace();
            }
            return result;
        }
    }

    public void onSwipeRight() {
    }

    public void onSwipeLeft() {
    }

    public void onSwipeTop() {
    }

    public void onSwipeBottom() {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:45:43.857

出于某种原因，我以为您遇到了运行时错误，但不，您甚至在尝试编译之前就在 Eclipse 中清楚地看到了错误消息。即使编译了该代码，您也必须将手势检测器实际应用于布局容器，以便它执行任何操作。

您正在调用`super.onTouch()`您的`OnSwipeTouchListener`类，它是 Object 的子类。Object 没有`onTouch()`方法，这就是编译器所抱怨的。该`onTouch()`方法需要进入您的活动，而不是您的自定义手势侦听器。

我猜想无论你使用什么例子，你都会对所有的剪切和粘贴感到困惑。

下面是一些非常简单的示例代码，用于检测定向抛掷，演示如何应用自定义手势侦听器：

[http://pcfandroid.wordpress.com/2011/07/17/swipe-with-android-android-tutorial/](http://pcfandroid.wordpress.com/2011/07/17/swipe-with-android-android-tutorial/)

那篇文章很容易理解，非常清晰，非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T09:57:35.270

```
 public class Test extends Activity{

private GestureDetector gesturedetector = null;

View layout;

@Override

public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

setContentView(R.layout.test);

layout = (LinearLayout)findViewById(R.id.container);

gesturedetector = new GestureDetector(new MyGestureListener());

layout.setOnTouchListener(new OnTouchListener() {

@Override

public boolean onTouch(View v, MotionEvent event) {

gesturedetector.onTouchEvent(event);

return true;

}

});

}

public boolean dispatchTouchEvent(MotionEvent ev){

super.dispatchTouchEvent(ev);

return gesturedetector.onTouchEvent(ev);

}

class MyGestureListener extends GestureDetector.SimpleOnGestureListener{

private static final int SWIPE_MIN_DISTANCE = 150;

private static final int SWIPE_MAX_OFF_PATH = 100;

private static final int SWIPE_THRESHOLD_VELOCITY = 100;

@Override

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,

float velocityY) {

float dX = e2.getX()-e1.getX();

float dY = e1.getY()-e2.getY();

if (Math.abs(dY)<SWIPE_MAX_OFF_PATH &&

Math.abs(velocityX)>=SWIPE_THRESHOLD_VELOCITY &&

Math.abs(dX)>=SWIPE_MIN_DISTANCE ) {

if (dX>0) {

Toast.makeText(getApplicationContext(), “Right Swipe”, Toast.LENGTH_SHORT).show();

} else {

Toast.makeText(getApplicationContext(), “Left Swipe”, Toast.LENGTH_SHORT).show();

}

return true;

} else if (Math.abs(dX)<SWIPE_MAX_OFF_PATH &&

Math.abs(velocityY)>=SWIPE_THRESHOLD_VELOCITY &&

Math.abs(dY)>=SWIPE_MIN_DISTANCE ) {

if (dY>0) {

Toast.makeText(getApplicationContext(), “Up Swipe”, Toast.LENGTH_SHORT).show();

} else {

Toast.makeText(getApplicationContext(), “Down Swipe”, Toast.LENGTH_SHORT).show();

}

return true;

}

return false;

}

}

} 
```

# sas - 如何在SAS中查找变量的先前值

> ID：16145636
> 
> 赞同：4
> 
> 时间：2013-04-22T11:06:47.627
> 
> 标签：sas, lag

我正在尝试用设定的条件填充变量。

如果变量 NUMBER 等于 . 然后使其等于之前的 Number 值。

```
data table2;
  set table1;

  prv_value = lag(number);
  if number = . then number = prv_value;
run; 
```

但是，如果在 number = 的一行中有两个值。然后第二次出现 的值。有它以前的 number = 值。.

我想要的是找到第一个先前出现的数字不等于 . 并使 number 的值等于之前的非缺失值。

我的数据的一个例子是：

```
id  number
d10   2       
d10   2       
d10   3       
d10   .       
d10   . 
```

应用上面的代码，我会得到：

```
id  number prv_number
d10   2       .
d10   2       2
d10   3       2
d10   3       3
d10   .       . 
```

我想要的是：

```
id  number prv_number
d10   2       .
d10   2       2
d10   3       2
d10   3       3
d10   3       . 
```

即如果 number 的值为 . 然后使其等于之前第一次出现的非缺失值。

在我的数据集中的某些情况下，我可能有：

```
id  number
d10   4
d10   2
d10   .
d10   .
d10   .
d10   . 
```

我想要的是：

```
id  number
d10   4
d10   2
d10   2
d10   2
d10   2
d10   2 
```

（请注意，我的数据按事件/时间的顺序排序，因此想要第一次出现）。

对于不同数量的先前事件，我可以对 lag 函数做些什么，或者任何其他可以做我想做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:30:54.420

您可以尝试使用以下保留语句（未经测试）：

```
data table2;
  set table1;

  retain prv_value .;

  if number=. then
    number=prv_value;

  if number ne . then
    prv_value=number;
run; 
```

# c++ - new 和 delete 内存管理超出范围

> ID：16145638
> 
> 赞同：1
> 
> 时间：2013-04-22T11:06:57.833
> 
> 标签：c++, memory-management, memory-leaks, new-operator

```
void f(const Fraction& a)
{ Fraction b = a;
  Fraction* c = new Fraction(3, 4);
  Fraction* d = &a;
  Fraction* e = new Fraction(7, 8);
  Fraction* f = c;
  delete f;
 } 
```

1.  我要删除哪些值？我想我只删除了动态分配的 c ，其余的对象在函数结束时自动销毁。

2.  e怎么样？它也是动态分配的，但我们没有用于 e 的任何删除运算符。e 没有解除分配？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:14:08.350

您可能在这里遗漏的关键见解是它与特定*变量*`delete`没有任何关系- 它与存储在某个*内存地址的特定**对象*有关系。通常情况下，“任何分配的对象都必须用 释放”。***但请注意对象***一词的使用- 不是变量。***`new``delete`***

 ***考虑：

```
Fraction* a = new Fraction(3,4);
Fraction* b = a;
delete b; 
```

在这个例子中，我们删除`b`了 ，它指向`Fraction`第一行分配的对象。我们也可以 delete `a`，它指向同一个`Fraction`对象。只要我们删除分配的每个***对象***`new`（无论我们使用哪个指针变量来访问该对象），就不会发生内存泄漏。另请注意，如果我们同时删除*两者* `a`，`b`则会出现错误（通过[双重删除](https://stackoverflow.com/questions/9169774/what-happens-in-a-double-delete)未定义的行为）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T11:09:09.833

你应该删除`c`（或`f`），但不能同时删除，你应该删除`e`。对于每个`new`应该是`delete`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T11:08:19.353

1.  您将删除创建的对象`new Fraction(3, 4);`
2.  是`e`的，或者更严格地说，分配的内存`new Fraction(7, 8);` 不会被释放，导致内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T11:11:35.637

你应该删除 (c or f) & e***

# iphone - 如何在 didSelectRowAtIndex 上更新自定义 UITableViewCell 的属性？

> ID：16145642
> 
> 赞同：0
> 
> 时间：2013-04-22T11:07:11.497
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`是由一些自定义的`UITableViewCells`。

当 table`didSelectRowAtIndexPath`方法触发时，如果`indexPath.row`等于 2，我想`UILabel`在这一行的单元格中更新 a。

我的想法是按照以下思路使用一些东西；

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
if(indexPath.row == 2){

    myCustomCellView *cell = [self.essentialsTableView cellForRowAtIndexPath:indexPath];
    cell.myUILabel.text = @"my text";

    [tableView reloadData];

  }
} 
```

这里的问题是`cellForRowAtIndexPath`返回一个类型的对象`UITableViewCell`，而不是`myCustomCellView`。

谁能建议我如何访问和更新`didSelectRowAtIndexPath`方法中的单元格属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:17:11.327

类型转换`UITableViewCell`到您的自定义单元格

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.row == 2){

        myCustomCellView *cell = (myCustomCellView *)[self.essentialsTableView cellForRowAtIndexPath:indexPath];
        cell.myUILabel.text = @"my text";

        [tableView reloadData];

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:19:50.587

您需要更新数据源并调用重新加载表格视图

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
if(indexPath.row == 2){

    //update the array which is used as the data provider  in cell for row at index path.

    [tableView reloadData];

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:10:25.120

定义一个 Bool 值，例如“secondRowIsClicked”。`viewWillApper`在您的or`viewDidAppear`函数中将其设置为 No。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if(indexPath.row == 2)
    {
        secondRowIsClicked = YES;
        [tableView reloadData];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   // Your code
   if (secondRowIsClicked == YES)
   {
       cell.myUILabel.text = @"my text";
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:11:54.183

试试下面的代码..

```
myCustomCellView *cell = (myCustomCellView *) [self.essentialsTableView cellForRowAtIndexPath:indexPath]; 
```

你可以像下面这样重新`UITableViewCell`加载`indexPath`..

```
[self.tableView reloadRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationNone]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T11:13:48.020

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

 myCustomCellView *cell = [self.essentialsTableView cellForRowAtIndexPath:indexPath];
 UILabel *yourLabel=[cell.contentViews.subviews viewWithTag:indexPath.row+1];
 //do whatever you want with your label;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   // Your code
          cell.myUILabel.text = @"my text";
          cell.myUILabel.tag=indexpath.row+1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T10:08:25.330

`myCustomCellView`是 的子类`UITableViewCell`。所以只需键入单元格

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.row == 2){

        myCustomCellView *cell = (myCustomCellView *)[self.essentialsTableView cellForRowAtIndexPath:indexPath];
        cell.myUILabel.text = @"my text";

        [tableView reloadData];

      }
    } 
```

*更多信息：根据 Apple 编码指南，用户类名称不以小写字母开头，而不是`myCustomCellView`使用`MyCustomCellView`*

# php - PHP 联系表单验证

> ID：16145643
> 
> 赞同：1
> 
> 时间：2013-04-22T11:07:16.403
> 
> 标签：php, html, forms, validation

我只是想知道是否有人可以帮忙，如果这个 PHP 代码可以用于验证 HTML 联系表单输入。我按照教程创建了这个 PHP 验证，但我不确定它是否会起作用。我还没有一个虚拟主机来测试它，但如果有人有服务器，如果有人能帮我一个忙，如果你可以发送/接收电子邮件，我将不胜感激。谢谢！！我正在使用 jQuery 验证插件在客户端验证表单，这是教程[http://www.youtube.com/watch?v=rdsz9Ie6h7I](http://www.youtube.com/watch?v=rdsz9Ie6h7I)
HTML 表单：

```
<form action="contact.php" method="post">
<label for="yourname">Your Name:</label>
<input type="text" name="YourName"/>

<label for="youremail">Your Email:</label>
<input type="text" name="YourEmail" />

<label for="yourmessage">Your Message:</label>
<textarea  name="YourMessage"></textarea>

<fieldset>
<input type="submit" id="submit" value="Send"/>
<input type="reset" id="reset" value="Reset"/>
</fieldset>

PHP Code:

<?php

/* Subject and Email Variables */

 $emailSubject = 'Email from site visitor';
 $webMaster = 'YourEmail@mail.com';

/* Getting Form Data Variables */

    $nameField = $_POST['YourName'];
    $emailField = $_POST['YourEmail'];
    $messageField = $_POST['YourMessage'];

    $body = <<<EOD
<br><hr><br>
Name: $YourName <br>
Email: $YourEmail <br>
Message: $YourMessage <br>

EOD;

    $headers = "From: $YourEmail\r\n";  
    $headers .= "Content-type: text/html\r\n";

    $success = mail($webMaster, $emailSubject, $body, $headers);

    $theResults = <<<EOD
<html>
<head>
</head>
<body>
<p style="font-size:12px;font-family:Tahoma,Verdana;">Thanks for your Message.</p>
</body>
</html>

EOD;

echo "$theResults";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:14:32.300

如果您现在没有网络服务器，您可以安装本地服务器并在那里进行测试。完全免费。

[http://www.apachefriends.org/en/xampp-windows.html#641](http://www.apachefriends.org/en/xampp-windows.html#641)

```
/* Getting Form Data Variables */

    $nameField = $_POST['YourName'];
    $emailField = $_POST['YourEmail'];
    $messageField = $_POST['YourMessage'];

    $body = <<<EOD
<br><hr><br>
Name: $nameField<br>
Email: $emailField <br>
Message: $messageField <br> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:21:52.250

很多问题

1.  您根本没有在 PHP 端进行验证。我在下面添加了成功或失败消息的验证和条件渲染
2.  您没有使用检索到的变量名称（而是使用 $YourEmail） - 帖子名称
3.  您的表单标签与输入名称不匹配
4.  您的表单元素未关闭，并且您的字段并非全部在字段集中，并且字段集没有图例。
5.  在失败的情况下，我在表单中添加了一个值预填充，因此人们在提交时不会返回到空白表单。
6.  为此，我将表单放在最后，在 PHP 之后

代码：

（注意：这将全部放入文件中`contact.php`）

```
<?php

if (isset($_POST['submit'])) {

    /* Getting Form Data Variables */

    $nameField = isset($_POST['YourName']) ? $_POST['YourName'] : null;
    $emailField = isset($_POST['YourEmail']) ? $_POST['YourEmail'] : null;
    $messageField = isset($_POST['YourMessage']) ? $_POST['YourMessage'] : null;

    // Validate
    $failures = array();
    if (strlen($nameField)) $failures[] = "Name is required";
    if (strlen($emailField)) $failures[] = "Email is required";
    if (filter_var($email,FILTER_VALIDATE_EMAIL) === false) $failures[] = "Email is invalid";
    if (strlen($messageField)) $failures[] = "Message is required";

    // If validation errors, render them
    if (count($failures)) {
        echo "<p><b>Failed to submit: " . implode(", ", $failures) . "</b></p>";
    } else {
        /* Subject and Email Variables */
        $emailSubject = 'Email from site visitor';
        $webMaster = 'YourEmail@mail.com';

        $body = <<<EOD
            <br><hr><br>
            Name: {$nameField} <br>
            Email: {$emailField} <br>
            Message: {$messageField} <br>
        EOD;

        $headers = "From: {$emailField}\r\n";  
        $headers .= "Content-type: text/html\r\n";
        $success = mail($webMaster, $emailSubject, $body, $headers);

        $theResults = <<<EOD
            <p>Thanks for your Message.</p>
EOD;

        echo "$theResults";
    }
}

?>

<form action="contact.php" method="post">
    <fieldset>
        <legend>Contact Us</legend>
        <label for="YourName">Your Name:</label>
        <input type="text" name="YourName" value="<?=$nameField?>" />

        <label for="YourEmail">Your Email:</label>
        <input type="text" name="YourEmail" value="<?=$emailField?>" />

        <label for="YourMessage">Your Message:</label>
        <textarea  name="YourMessage"><?=$messageField?></textarea>

        <input type="submit" id="submit" value="Send"/>
        <input type="reset" id="reset" value="Reset"/>
    </fieldset>
</form> 
```

# java - 简单的请求映射不起作用，Spring 中的初学者

> ID：16145647
> 
> 赞同：1
> 
> 时间：2013-04-22T11:07:25.257
> 
> 标签：java, spring, jakarta-ee, spring-mvc, tomcat7

我是 spring mvc 的初学者，我有 2 个 jsp：- 1\. Webcontent/index.jsp：这很好用。索引文件有一个超链接文本，如：-

```
 <a href="hello.html" rel="nofollow">Say Hello</a> 
```

1.  WebContent/WEB-INF/jsp/hello.jsp ：在正文中显示以下内容

    ```
     ${message} 
    ```

项目容器如下：-

```
 @Controller
  public class HelloWorldContainer {

 @RequestMapping(value="/hello", method=RequestMethod.GET)
    public ModelAndView helloWorld() {

        String message = "Hello World, Spring 3.0!";
        return new ModelAndView("hello.jsp", "message", message);
    }
} 
```

以下是 WebContent/WEB-INF/web.xml 文件：-

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring3MVC</display-name>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.*</url-pattern>
</servlet-mapping> 
```

WebContent/WEB-INF/spring-servlet.xml :-

```
 <context:component-scan
    base-package="org.explorear.ar" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我的问题：-当我从 eclipse 在 tomcat 服务器上运行这个项目时，索引文件显示得非常好。但由于索引文件中的文本超链接到 hello.html，我不断收到 Http Status 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:47:45.203

我可能会遗漏一些东西，但我认为

org.springframework.web.context.ContextLoaderListener

并且需要在 web.xml 中提供 context-param

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:22:47.443

您将在此行返回整个页面名称

return new ModelAndView("hello.jsp", "message", message);

并且您正在使用 ViewResolver ，其中您使用 .jsp 为返回值添加后缀。所以在我的建议中使用这个

return new ModelAndView("hello", "message", message);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T09:12:25.707

这就是 web.xml 应该的样子。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

  <display-name>Spring3MVC</display-name>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml
    </param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
   <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>
  <session-config>  
  <session-timeout>10</session-timeout>  
</session-config> 
</web-app> 
```

# html - 在 ASP.NET MVC 3 视图中设置 DropDownList 样式

> ID：16145655
> 
> 赞同：0
> 
> 时间：2013-04-22T11:07:50.663
> 
> 标签：html, asp.net-mvc-3

我的视图中有三个 DropDownLists。我用来可视化它们的代码是这样的：

```
@{
    var listItems = new List<SelectListItem>();
    listItems.Add(new SelectListItem { Text = String.Empty, Value = String.Empty });
    foreach (var name in ViewBag.Names)
    {
        listItems.Add(new SelectListItem { Text = name, Value = name });
    }
}
    <span>
        Repair Form : @Html.DropDownList("dropDownList", listItems)
    </span>
    //code...
    <span>
        Tools : @Html.DropDownList("kkcDropDownList", kkcItems)  
    </span>
    //code...
    <span>
        Document : @Html.DropDownList("docDropDownList", docItems)
    </span>
    //code... 
```

我得到了这个结果：

![ComboAsItIs](https://i.stack.imgur.com/usK9w.png)

我想改变的是出现的顺序 - 现在是 text-dropDown, text-dropDown .. Insted 我想成为文本，在文本下方是这样的 dropDown：

![ComboAsIWantIt](https://i.stack.imgur.com/nTSYq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:59.903

根据您希望 3 个分组如何对齐，我有两个不同的建议。

如果你想

```
text
dropdown

text
dropdown

text
dropdown 
```

`<br/>`那么您可以简单地在文本之后和下拉代码之后添加相关标签。

如果你想

```
text       text       text
dropdown   dropdown   dropdown 
```

那么你需要添加一个css规则来给你的跨度a`display: inline-block;`和一个相关的宽度来强制下拉框适当地换行。

```
span
{
    display: inline-block;
    width: 150px;
} 
```

但是，这将为你的所有跨度设置样式，所以给你的跨度一个类，然后在 CSS 定义中使用它。

```
<span class="aclass">
    Text: dropdown
</span>

span.aclass
{
    display: inline-block;
    width: 150px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:13:44.187

您可以将标签放在另一个元素中，并为其定义和分配一个类，将其显示为一个块。

**选项1**

```
<span>
    <span class="list-label">Repair Form</span> : 
        @Html.DropDownList("dropDownList", listItems)
</span>
// css
span.list-label {
    display: block;
} 
```

**选项 #2** 将所有标签视为一个块。如果将其与文本框一起使用，则标签将位于输入字段的顶部。

```
<span>
    <label>Repair Form</label> : 
        @Html.DropDownList("dropDownList", listItems)
</span>
// css
label {
    display: block;
} 
```

# c# - 如何在列表中使用“包含”？

> ID：16145660
> 
> 赞同：6
> 
> 时间：2013-04-22T11:08:09.830
> 
> 标签：c#, linq, list

我有国家数据库喜欢，

```
Country
-------
England
Germany
Italy
... 
```

我得到这个数据源，

```
 DB.Countries.ToList(); 
```

我想要做的是检查新添加的国家是否已经存在，
就像，

```
if(DB.Countries.ToList().Contains(newAddedCountry))
{
 ..............
} 
```

但我不知道如何将`newAddedCountry`(string) 转换为`System.Collections.Generic.List<Country>`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T11:09:30.267

```
if(DB.Countries.Any(c => c.Country == newAddedCountry))
{
    // exists ..
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T11:10:07.033

您可以使用[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/bb337697.aspx)方法；

> 确定序列是否包含任何元素。

```
if( DB.Countries.Any( n => n.Country == newAddedCountry )) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T11:10:38.207

尝试这样的事情

```
if(DB.Countries.Any(c => c.CountryName == newAddedCountry.CountryName ))
{
    // exists ..
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T11:10:26.120

您可以在课堂上将国家名称与您的财产进行比较`Country`。就像是：

```
if(DB.Countries.ToList().Any(r=> r.Name == newAddedCountry))
                                 ^^^^^^
                                 Field/Property name holding the Name of Country 
```

如果你想比较字符串忽略大小写，那么：

```
if(DB.Countries.ToList()
               .Any(r=> r.Name.Equals(newAddedCountry, StringComparison.InvariantCultureIgnoreCase)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T11:10:41.353

只使用`Country`类的属性可能更容易，如下所示：

```
if (db.Countries.Select(x => x.Name).ToList().Contains(countryName))
{
    ...
} 
```

或者

```
if (db.Countries.Any(x => x.Name == countryName))
{
    ...
} 
```

哪个更有效率。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T11:12:29.537

假设`Country`为列名：

```
if(DB.Countries.ToList().Any(c => c.Country == newAddedCountry))
{ 
    //Do something
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T11:13:48.287

如果我没记错的话， contains 使用 Equals 方法来比较实例。因此，您需要在 Country 类中实现 Equals 覆盖方法。并且以任何方式 - 您正在尝试比较 String 和 Country 对象实例，因此它们当然不会被正确比较。

我会尝试使用 LINQ 解决方案：

```
List<Country> countries = DB.Countries.ToList();
if (countries.Any(x => x.column == newAddedCountry)) {
    ...
} 
```

或者`x == newAddedCountry`如果它只是一个列表。

# java - Java RegEx：将所有 xml 字符替换为其实体编号

> ID：16145662
> 
> 赞同：1
> 
> 时间：2013-04-22T11:08:18.063
> 
> 标签：java, regex, actionscript-3, replace, xml-entities

我正在尝试将我在 ActionScript 中编写的函数移植到 Java，但遇到了一些麻烦。我已经包含了下面的功能。我找到[了对问题 #375420](https://stackoverflow.com/a/2563382/1762224)的回复，但我真的需要编写一个单独的课程吗？谢谢。

```
public static function replaceXML(str:String):String {
  return str.replace(/[\"'&<>]/g, function($0:String):String {
    return StringUtil.substitute('&#{0};', $0.charCodeAt(0));
  });
} 
```

**输入**

```
<root><child id="foo">Bar</child></root> 
```

**输出**

```
&#60;root&#62;&#60;child id=&#34;foo&#34;&#62;Bar&#60;/child&#62;&#60;/root&#62; 
```

* * *

***更新***

如果有人想知道，这是我的解决方案。感谢[Sri Harsha Chilakapati](https://stackoverflow.com/users/1026805)。

```
public static String replaceXML(final String inputStr) {
  String outputStr = inputStr;
  Matcher m = Pattern.compile("[&<>'\"]").matcher(outputStr);
  String found = "";
  while (m.find()) {
    found = m.group();
    outputStr = outputStr.replaceAll(found,
      String.format("&#%d;", (int)found.charAt(0)));
  }
  return outputStr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:10.497

Java 是一种面向对象的语言，因此使用对象。通常，您可以创建一个 Util 类，例如`RegExUtil`并提供一个静态方法来从任何其他类调用该方法。util 类本身不应该被实例化。您可以使用私有构造函数来实现。

```
public class RegExUtil {

  private RegExUtil(){
    //do nth.
  }

  public static String replaceXML(String input){
    //do sth.
  }
} 
```

您应该首先查找 Apache Commons，因为它们可能已经为您的目标提供了解决方案，或者至少您看到了 Util 类是如何组成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:29:41.953

您可以为此使用正则表达式。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

String myString = "<root><child id=\"foo\">Bar</child></root>";

Matcher m = Pattern.compile("[^\\p{L}\\p{N};\"+*/-]").matcher(myString);

while (m.find()) {
    String found = m.group();
    myString = myString.replaceAll(found, "&#" + (int)found.charAt(0) + ";");
}

System.out.println(myString); 
```

它正在工作。

输出是

```
&#60;root&#62;&#60;child&#32;id&#61;"foo"&#62;Bar&#60;/child&#62;&60;/root&#62; 
```

# android - 在android-java中解析没有花括号的JSON列表

> ID：16145666
> 
> 赞同：0
> 
> 时间：2013-04-22T11:08:34.090
> 
> 标签：android, json, arrays

我正在尝试将 JSON 格式的列表读入 Android Java。

我**可以** ***使用***`getJSONarray()`. _ 但**无法**读取**message**或**email**的值。

*似乎 getJSONarray() 不适用于我想要的。*

是的，我正在使用`getJSONObject`儿童**来**提取信息。但是在获取消息数组后如何提取**单个值？**

```
{
  "children": [{
    "message": ["message1","message2","message3"],
    "email": ["email1",
              "email2"]
  }, {
    "message": ["message1", "message2", "message3"],
    "email": ["email1", "email2"]
  }]
} 
```

我知道如何从中提取：

```
 {
      "children": [{
                     "message1": "message___1"
                     "message2": "message___2"
                     "message3": "message___3"

          }]
} 
```

但不是当它全部在一个列表中时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:12:44.920

一旦你有了`JSONArray`“孩子”，你需要做的就是像这样一个一个地提取个体`JSONObjects`：

```
for (int counter = 0; counter < childArray.length(); counter++) { 
    //Get the next item
    JSONObject nextobj = childArray.getJSONObject(counter); 
```

然后，您可以从`nextobj`变量中提取消息和电子邮件数组。这是因为您的“孩子”无法直接访问每个“消息”和“电子邮件” `JSONArray`，它们被包裹在`JSONObjects`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:33:21.597

试试下面的代码：

```
for(int i=0; i<childrenArray.length(); i++)
{
JSONObject childObj=childrenArray.getJSONObject(i);
JSONArray messageArray=childObj.getJSONArray("message");
    for(int j=0; j<messageArray.length();j++
        {
            //here get value from messageArray.getString(j) or messageArray.getJSONObject(j), whichever applicable
        }

JSONArray emailArray=childObj.getJSONArray("email");
    for(int k=0; k<emailArray.length();k++
        {
            //here get value from emailArray.getString(k) or emailArray.getJSONObject(k), whichever applicable
        }

} 
```

# html - 下拉导航选项卡不适用于 doctype 声明

> ID：16145667
> 
> 赞同：0
> 
> 时间：2013-04-22T11:08:35.557
> 
> 标签：html, css, doctype

我在 VS2010 中使用 'li', 'ul' 方法创建了一个下拉导航选项卡。我有一个文档类型声明

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

如果下拉菜单在没有 doctype 声明的情况下工作，则菜单选项卡看起来像这样。

![下拉式菜单](https://i.stack.imgur.com/wm0BB.png)

仅当我删除 doctype 声明时，下拉菜单才有效。我也尝试过“框架集”和“严格”声明，但仍然没有结果。代码和样式表如下

```
<tr>
    <td colspan="5" class="menubtnback">
        <div id="navMenu">
            <ul>
                <li> <a href="~/" style="width:65px">Home</a> 
                </li>
                <li> <a href="~/" style="width:150px">tab1</a> 
                    <ul>
                        <li><a href="~/" style="width:150px">subtab1</a> 
                        </li>
                        <li><a href="~/" style="width:150px">subtab2</a> 
                        </li>
                        <li><a href="~/" style="width:150px">subtab3</a> 
                        </li>
                        <li><a href="~/" style="width:150px">subtab4</a> 
                        </li>
                    </ul>
                </li>
                <li> <a href="~/" style="width:125px">tab2</a>

                </li>
                <li> <a href="~/" style="width:95px">tab3</a>

                </li>
                <li> <a href="~/" style="width:65px">tab4</a>

                </li>
                <li> <a href="~/" style="width:110px">tab5</a>

                </li>
                <li> <a href="~/" style="width:165px">tab6</a>

                </li>
                <li> <a href="~/" style="width:150px">tab7</a>

                </li>
            </ul>
        </div>
    </td> 
```

样式表：

```
.menubtnback {
    background-image: url(Images/Icons/top-nav-back.jpg);
}
#navMenu {
    margin: 0;
    padding: 0;
}
#navMenu ul {
    margin: 0;
    padding: 0;
    line-height:40px;
}
#navMenu li {
    margin: 0;
    padding :0;
    list-style:none;
    position: relative;
    float: left;
    background-image:url(Images/Icons/top-nav-back.jpg);
    color:#000;
}
#navMenu ul li a {
    text-align:center;
    font-family:tahoma;
    font-size:9.5pt;
    text-decoration:none;
    height:40px;
    display:block;
    color:#000;
    border-right:gray thin solid;
}
#navMenu ul ul {
    position:absolute;
    visibility:hidden;
    top:40px;
}
#navmenu ul li:hover ul {
    visibility:visible;
    z-index:1004;
}
#navMenu li:hover {
    background-image:url(Images/Icons/nav-back.jpg);
    color:#FFF;
}
#navMenu ul li:hover ul li a:hover {
    background-image:url(Images/Icons/nav-back.jpg);
    color:#FFF;
}
#navMenu a:hover {
    color:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:03:42.067

这取决于您声明的 HTML 版本、您使用的浏览器以及一系列不同的问题。如果您已声明它们，浏览器将对不同版本的 HTML 进行不同的处理。

HTML5 的 doctype 声明就像`<!DOCTYPE HTML>`.

因此，在您声明的 doctype 版本、您使用的浏览器或您的 doctype 声明的语法之间发生了一些事情。

[http://www.w3.org/QA/2002/04/valid-dtd-list.html](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

严格的

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"  "http://www.w3.org/TR/html4/strict.dtd"> 
```

过渡的

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

框架集

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd"> 
```

# jetty - Jetty9 多个监听器

> ID：16145668
> 
> 赞同：1
> 
> 时间：2013-04-22T11:08:38.940
> 
> 标签：jetty, embedded-jetty

我正在尝试将使用 Jetty 8 的 Java 应用程序移植到 Jetty 9。使用 Jetty8，我能够实例化 2 个在不同端口上侦听的码头“服务器”，但是使用 Jetty9，只有第一台服务器会侦听该端口。

```
// first server
Server server1 = new Server(); 
// add http + port 80
server1.start();
server1.join(); 

// second server
Server server2 = new Server(); 
// add http + port 8080
server2.start();
server2.join(); 
```

似乎 server2 从未启动，我是否需要对 Jetty9 使用某种线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:14:55.177

`server1.join()`将阻塞直到服务器停止！因此，在`server2`您停止 server1 之前，永远不会执行代码。

移动`server1.join()`到`server2.join()`（到最后），它应该按预期工作：

```
// first server
Server server1 = new Server(); 
// add http + port 80
server1.start();

// second server
Server server2 = new Server(); 
// add http + port 8080
server2.start();

server1.join(); 
server2.join(); 
```

# php - FPDF 无法正确居中文本

> ID：16145670
> 
> 赞同：4
> 
> 时间：2013-04-22T11:08:46.230
> 
> 标签：php, fpdf

我正在尝试使用 FPDF 来呈现学士/硕士论文的封面内容。

我需要能够显示捷克字母，包括带有标点符号的字符（例如 ř、č、ž、ý、ě）。因此，我从本地 Times New Roman TTF 字体文件在[http://fpdf.fruit-lab.de/index.php](http://fpdf.fruit-lab.de/index.php)上生成了 FPDF 字体文件。

我正在使用以下代码来渲染封面。

```
function toISO($text) {
    return iconv('UTF-8', 'ISO-8859-2', $text);
}

function buildImpressionPDF($school, $faculty, $thesisType, $firstname, $surname, $year)
{
    $pdf = new FPDF();

    $pdf->AddPage();
    $pdf->AddFont('times', '', 'times.php');
    $pdf->SetFont('times', '', 18);
    $pdf->setMargins(0, 0, 0);
    $pdf->SetAutoPageBreak(false);

    $pdf->Cell(0, 20, toISO($school), 0, 0, 'C');
    $pdf->SetY(20);
    $pdf->Cell(0, 20, toISO($faculty), 0, 0, 'C');
    $pdf->SetY(($pdf->h / 2) - 10);
    $pdf->Cell(0, 20, toISO($thesisType), 0, 0, 'C');
    $pdf->SetY(-40);
    $pdf->Cell(0, 20, toISO($firstname . ' ' . $surname), 0, 0, 'C');
    $pdf->SetY(-30);
    $pdf->Cell(0, 20, toISO($year), 0, 0, 'C');

    return $pdf;
} 
```

文本呈现良好，包括标点符号，但没有正确对齐 - 有些行比其他行更靠右。

我怀疑这可能是自定义字体的问题。当我使用原始的 FPDF 字体时，它似乎证明很好（但我没有彻底调查），但当然没有正确显示标点符号。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:10:14.923

请使用 TCPDF 而不是 FPDF 或者试试这个

```
$pdf->Cell(20,10,'Title',1,1,'C'); 
```

# google-sheets - 如何为 Google 电子表格 SumIF 公式设置多个条件？

> ID：16145674
> 
> 赞同：10
> 
> 时间：2013-04-22T11:08:54.003
> 
> 标签：google-sheets

`D`如果列的值在 3000 和 4000 之间，我想要一个公式，它对列求和`K`。我尝试了以下但没有工作：

```
=SUMIF(K3:K67; ">= 3000 & < 4000";D3:D67)
=SUMIF(K3:K67; ">= 3000 " & " < 4000";D3:D67)
=SUMIF(K3:K67; ">= 3000 AND < 4000";D3:D67) 
```

[这可能还是我必须像这个问题](https://stackoverflow.com/questions/10635029/multiple-criteria-for-sumif-google-spreadsheet)一样使用 ArrayFormula 函数（我不明白）？

**编辑：**这行得通，所以数据没有问题：

```
=SUMIF(K3:K67; ">= 3000";D3:D67) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T22:45:29.020

**编辑：**谷歌表格现在支持[SUMIFS](https://support.google.com/docs/answer/3238496)。

**原始答案：** 有很多方法可以做到这一点。不久前，我花了一些时间找出哪种方法最可靠（例如，我猜测您链接的问题的原始帖子中的公式可能失败了，因为可能有文本条目 - 也许是标题 - 在列相加）。

IMO 这是谷歌表格中多条件总和最无懈可击的通用解决方案：

`=SUM(IFERROR(FILTER(sum_range;condition_1;condition_2;...)))`

所以在你的具体情况下：

`=SUM(IFERROR(FILTER(D3:D67;K3:K67>=3000;K3:K67<4000)))`

*尽管*可以通过以下方式实现相同的目的：

`=SUMIF(K3:K67;"<4000";D3:D67)-SUMIF(K3:K67;"<3000";D3:D67)`

但我想这些“中间”条件是您可以这样做的特殊情况；第一个解决方案可能是一个更好的通用解决方案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-07T14:41:19.923

这个问题的答案已被**弃用**，因为现在包含[SUMIFS](https://support.google.com/docs/answer/3238496?hl=en)，增加了对`SUMIF`.

# ios - 从 developer.apple.com 删除证书和配置文件会影响 iTunes 连接吗？

> ID：16145675
> 
> 赞同：4
> 
> 时间：2013-04-22T11:08:57.753
> 
> 标签：ios, app-store-connect

[我想从Apple Developer](https://developer.apple.com/)中删除尽可能多的内容（证书、配置文件……），但我不想弄乱我使用这些证书和配置文件提交给应用商店的应用程序。

那么[Apple Developer](https://developer.apple.com/)会影响 iTunes 的连接吗？[如果我在Apple Developer](https://developer.apple.com/)中搞砸了，可能会发生什么，肯定不会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:28:18.733

证书和配置文件对于打包您的应用程序以在设备上进行调试或提交您的应用程序是必需的。它与您的 iTunes Connect 无关。

只要您拥有有效的付费 Apple Developer 帐户，您的应用程序就不会发生任何事情。

# html - @-moz-document url-prefix () 未在 firefox 中呈现

> ID：16145676
> 
> 赞同：2
> 
> 时间：2013-04-22T11:09:00.450
> 
> 标签：html, css, firefox, jetty

我为 Firefox 指定了以下 CSS。

```
.bill-tab-button {
    width: 33.3%;
    height: 100%;
    float: left;
    border-left: 1px solid rgb(197, 196, 196);
    border-bottom: 1px solid rgb(197, 196, 196);
    box-sizing: border-box;
    font-family: MyriadProReg;
    cursor: pointer;
}

.bill-tab-fixed-width {
    width: 105px;
}

.bill-tab-button-selected {
    border-bottom: 2px solid red;
    box-sizing: border-box;
    color: #b83709;
    border-left: none;
}

.bill-tab-button span {
    padding: 3px;
    vertical-align: -3px;
}

/* Firefox Specific CSS Styling */

@-moz-document url-prefix (){
    .bill-tab-button { 
        width:33.2%;
        height: 90%;
        float: left;
        border-left: 1px solid rgb(197, 196, 196);
        border-bottom: 1px solid rgb(197, 196, 196);
        box-sizing: border-box;
        font-family: MyriadProReg;
    }

    .bill-tab-fixed-width {
        width: 104.0px;!important
    }

    .bill-tab-button-selected {
        border-bottom: 2px solid red;
        box-sizing: border-box;
        color: #b83709;
        border-left: none;
    }
} 
```

当我在没有服务器（码头）的情况下测试这些时，CSS 得到完美呈现！我将此 CSS 用于 Spring Web 应用程序，并使用 jetty 作为服务器。当我运行应用程序时，浏览器呈现默认 CSS 而不是 firefox 特定的 CSS。

是否有任何与 URL 前缀冲突的内容。请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:36:18.210

CSS 根本不应该渲染，因为两者之间有一个空格，`url-prefix`并且`()`不应该存在。您需要将其删除，或者至少将其移到`()`. 我还看到一个`!important`似乎可以安全地完全省略的放错位置，或者如果没有，它应该出现在`;`：

```
@-moz-document url-prefix() {
    .bill-tab-button { 
        width:33.2%;
        height: 90%;
        float: left;
        border-left: 1px solid rgb(197, 196, 196);
        border-bottom: 1px solid rgb(197, 196, 196);
        box-sizing: border-box;
        font-family: MyriadProReg;
    }

    .bill-tab-fixed-width {
        width: 104.0px !important;
    }

    .bill-tab-button-selected {
        border-bottom: 2px solid red;
        box-sizing: border-box;
        color: #b83709;
        border-left: none;
    }
} 
```

如果这仍然不能解决问题，则有其他问题。您需要根据评论中的要求提供更多信息。

# php - 逆向工程：从现有 PHP5 项目创建 UML 图

> ID：16145677
> 
> 赞同：1
> 
> 时间：2013-04-22T11:09:07.983
> 
> 标签：php, open-source, uml

有没有可以导入php5项目并从中生成UML图的开源软件？

我知道 BOUML 但这不是开源的。

ArgoUML 是开源的，但显然只从 Java 和 C 进行重新设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T17:49:09.653

我不确定在移植到 Qt4 后是否为 Douml 重新启用了 Php reverse，但您可以在以下位置尝试：sourceforge.net/projects/douml

# java - 反序列化多个 Java 对象

> ID：16145682
> 
> 赞同：8
> 
> 时间：2013-04-22T11:09:21.937
> 
> 标签：java, serialization, deserialization, outputstream

你好亲爱的同事们，

我有一个 Garden 类，我在其中序列化和反序列化多个 Plant 类对象。序列化正在工作，但如果要将其分配给 mein 静态方法中的调用变量，则反序列化不起作用。

```
public void searilizePlant(ArrayList<Plant> _plants) {
    try {
        FileOutputStream fileOut = new FileOutputStream(fileName);
        ObjectOutputStream out = new ObjectOutputStream(fileOut);
        for (int i = 0; i < _plants.size(); i++) {
            out.writeObject(_plants.get(i));
        }
        out.close();
        fileOut.close();
    } catch (IOException ex) {
    }
} 
```

反序列化代码：

```
public ArrayList<Plant> desearilizePlant() {
    ArrayList<Plant> plants = new ArrayList<Plant>();
    Plant _plant = null;
    try {
        ObjectInputStream in = new ObjectInputStream(new FileInputStream(fileName));
        Object object = in.readObject();

       // _plant = (Plant) object;

        // TODO: ITERATE OVER THE WHOLE STREAM
        while (object != null) {
            plants.add((Plant) object);
            object = in.readObject();
        }

        in.close();
    } catch (IOException i) {
        return null;
    } catch (ClassNotFoundException c) {
        System.out.println("Employee class not found");
        return null;
    }
    return plants;
} 
```

我的调用代码：

```
ArrayList<Plant> plants = new ArrayList<Plant>();
plants.add(plant1);
Garden garden = new Garden();
garden.searilizePlant(plants);

// THIS IS THE PROBLEM HERE
ArrayList<Plant> dp = new ArrayList<Plant>();
dp = garden.desearilizePlant(); 
```

**编辑**
我得到一个空指针异常
@NilsH 的解决方案工作正常，谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T11:13:36.957

如何序列化整个列表呢？无需序列化列表中的每个单独对象。

```
public void searilizePlant(ArrayList<Plant> _plants) {
    try {
        FileOutputStream fileOut = new FileOutputStream(fileName);
        ObjectOutputStream out = new ObjectOutputStream(fileOut);
        out.writeObject(_plants);
        out.close();
        fileOut.close();
    } catch (IOException ex) {
    }
}

public List<Plant> deserializePlant() {
    List<Plants> plants = null;
    try {
        ObjectInputStream in = new ObjectInputStream(new FileInputStream(fileName));
        plants = in.readObject(); 
        in.close();
    }
    catch(Exception e) {}
    return plants;
} 
```

如果这不能解决您的问题，请发布有关您的错误的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T21:38:15.683

反序列化整个对象列表可能并不总是可行的（例如，由于内存问题）。在这种情况下尝试：

```
 ObjectInputStream in = new ObjectInputStream(new FileInputStream(
            filename));

    while (true) {
        try {
            MyObject o = (MyObject) in.readObject();
            // Do something with the object
        } catch (EOFException e) {
            break;
        }
    }

    in.close(); 
```

或者使用 Java SE 7 try-with-resources 语句：

```
 try (ObjectInputStream in = new ObjectInputStream(new FileInputStream(
            filename))) {
        while (true) {
            MyObject o = (MyObject) in.readObject();
            // Do something with the object
        }
    } catch (EOFException e) {
        return;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T18:20:26.900

如果将其序列化为数组线性列表，则可以在反序列化时将其转换回数组线性列表——所有其他方法对我来说都失败了：

```
import java.io.*;
import java.util.ArrayList;
import java.util.Arrays;

public class Program 
{
    public static void writeToFile(String fileName, Object obj, Boolean appendToFile) throws Exception
    {
        FileOutputStream fs = null;
        ObjectOutputStream os = null;
        try
        {
            fs = new FileOutputStream(fileName);
            os = new ObjectOutputStream(fs);

            //ObjectOutputStream.writeObject(object) inherently writes binary
            os.writeObject(obj); //this does not use .toString() & if you did, the read in would fail
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            try
            {
                os.close();
                fs.close();
            }
            catch(Exception e)
            {
                //if this fails, it's probably open, so just do nothing
            }
        }
    }

    @SuppressWarnings("unchecked")
    public static ArrayList<Person> readFromFile(String fileName)
    {
        FileInputStream fi = null;
        ObjectInputStream os = null;
        ArrayList<Person> peopleList = null;
        try
        {
            fi = new FileInputStream(fileName);
            os = new ObjectInputStream(fi);
            peopleList = ((ArrayList<Person>)os.readObject());  
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch(EOFException e)
        {                     
            e.printStackTrace();
        }
        catch(ClassNotFoundException e) 
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            try
            {
                os.close();
                fi.close();
            }
            catch(Exception e)
            {
                //if this fails, it's probably open, so just do nothing
            }
        }
        return peopleList;
    }

    public static void main(String[] args) 
    {
        Person[] people = { new Person(1, 39, "Coleson"), new Person(2, 37, "May") };
        ArrayList<Person> peopleList = new ArrayList<Person>(Arrays.asList(people));

        System.out.println("Trying to write serializable object array: ");

        for(Person p : people)
        {
            System.out.println(p);
        }
        System.out.println(" to binary file");

        try
        {
            //writeToFile("output.bin", people, false); //serializes to file either way
            writeToFile("output.bin", peopleList, false); //but only successfully read back in using single cast
        }                                                // peopleList = (ArrayList<Person>)os.readObject();
                                                         // Person[] people = (Person[])os.readObject(); did not work
                                                        // trying to read one at a time did not work either (not even the 1st object) 
        catch (Exception e)
        {
            e.printStackTrace();
        }

        System.out.println("\r\n");

        System.out.println("Trying to read object from file. ");
        ArrayList<Person> foundPeople = null;
        try
        {
            foundPeople = readFromFile("input.bin");
        } 
        catch (Exception e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (foundPeople == null)
        {
            System.out.println("got null, hummm...");
        }
        else
        {
            System.out.println("found: ");

            for(int i = 0; i < foundPeople.size(); i++)
            {
                System.out.println(foundPeople.get(i));
            }

            //System.out.println(foundPeople); //implicitly calls .toString()
        }
    }
} 
```

# jquery - jquery 为什么我可以设置一个标签的位置而不是另一个？

> ID：16145683
> 
> 赞同：1
> 
> 时间：2013-04-22T11:09:25.267
> 
> 标签：jquery, css, position, label

检查这个 JS 小提琴。[http://jsfiddle.net/jclamp/Nf7Fc/3/](http://jsfiddle.net/jclamp/Nf7Fc/3/)

Name 的标签是通过 jquery 创建的，然后可以使用它的父字段的位置来设置它的位置。

电子邮件标签是通过表单验证创建的。同一个 jquery 应该能够设置它的位置，但它不能。为什么？

作品：

```
$('#name').after('<label class="error" for="name">I can create this label via jquery and then move it\'s position.</label><br>');

$('label.error').css('left', 
                     function() {
                    return $('input[name='+$(this).attr('for')+']' ).offset().left;
                     } 
                      ); 
```

不起作用：

```
$("#registerForm").validate();

$('label.error').css('left', 
                     function() {
                    return $('input[name='+$(this).attr('for')+']' ).offset().left;
                     } 
                      ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:23:17.990

尝试[`.prop()`](http://api.jquery.com/prop/)代替[`.attr()`](http://api.jquery.com/attr/)：

```
 $('label.error').css('left', function() {
        // find input element assigned to the label
        var inputName = $(this).prop('for'); // <--- here
        var inputElement = $('input[name=' + inputName + ']' );

        // you can use logging to see which element jQuery actually found:
        console.log(inputElement);

        return inputElement.offset().left;
    }); 
```

这是一个工作示例：http: [//jsfiddle.net/JjYPR/3/](http://jsfiddle.net/JjYPR/3/)

希望这可以帮助。

不过，我对您的代码有一些注释。您的 jsfiddle 中的代码根本不起作用。元素名称存在一些错误，当您按下提交按钮时，没有验证任何内容，但发生了另一个错误。下次您发布问题时，您可能会记住以下提示：

*   使用 Firebug 或其他一些调试工具检查错误
*   如果您的代码可以使用的设置，请创建一个也可以使用的 jsfiddle
*   尝试缩进您的代码以使其更具可读性

然后人们更容易帮助你。;)

# android - Android：如何将 ImageView 分成块并分配给它们 onClickListener

> ID：16145687
> 
> 赞同：2
> 
> 时间：2013-04-22T11:09:49.693
> 
> 标签：android, imageview, onclicklistener

我需要将图像（ImageViewer）分成块并为它们分配 onClick 事件侦听器。为了分割图像，我使用下面的代码：

```
private void splitImage(ImageView image, int rows, int cols) {  

    //For height and width of the small image chunks 
    int chunkHeight,chunkWidth;

    //To store all the small image chunks in bitmap format in this list 
    ArrayList<Bitmap> chunkedImages = new ArrayList<Bitmap>(rows * cols);

    //Getting the scaled bitmap of the source image
    BitmapDrawable drawable = (BitmapDrawable) image.getDrawable();
    Bitmap bitmap = drawable.getBitmap();
    Bitmap scaledBitmap = Bitmap.createScaledBitmap(bitmap, bitmap.getWidth(), bitmap.getHeight(), true);

    chunkHeight = bitmap.getHeight()/rows;
    chunkWidth = bitmap.getWidth()/cols;

    //xCoord and yCoord are the pixel positions of the image chunks
    int yCoord = 0;
    for(int x=0; x<rows; x++){
        int xCoord = 0;
        for(int y=0; y<cols; y++){
            chunkedImages.add(Bitmap.createBitmap(scaledBitmap, xCoord, yCoord, chunkWidth, chunkHeight));
            xCoord += chunkWidth;
        }
        yCoord += chunkHeight;
    }       
} 
```

但是有了这个函数，我只能得到一个位图数组，它们不接受 OnClickListener。我所做的是用块重建图像并能够放大选定的块。

任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:24:23.927

如果它是无法拆分为多个图像的单个图像，您可以将 on [Touch 处理程序](http://developer.android.com/reference/android/view/View.OnTouchListener.html)添加到图像视图并检查 x/y 坐标

例如在您的触摸处理程序中

```
boolean onTouch(View v, MotionEvent ev) {
    if (ev.getAction() == MotionEvent.ACTION_DOWN) {
        if (ev.getPointerCount() > 0) {
            int w = v.getWidth();
            int h = v.getHeight();
            float eX = ev.getX(0);
            float eY = ev.getY(0);
            int x = (int) (eX / w * 100);
            int y = (int) (eY / h * 100);
            // x and y would be % of the image.
            // so you can say cell 1 is x < 25, y < 25 for a 4x4 grid

            // TODO add a loop or something to use x and y to detect the touched segment
        }
    }
    return true;
} 
```

您还可以将 int x 和 y 更改为浮动 x 和 y 更精确。

TODO 的示例代码

```
//somewhere in your code..
int ROWS = 5;
int COLS = 5;

// in the place of the TODO...
int rowWidht = 100/ROWS;
int colWidht = 100/COLS;

int touchedRow = x / rowWidth; // should work, not tested!
int touchedcol = y / colWidth; // should work, not tested!

cellTouched(touchedRow, touchedCol); 
```

其中 cellTouched() 是您处理触摸的方法...（在这里您也可以使用浮点数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:16:40.737

您可以使用网格视图来制作大量图像并在其上设置 onClickListener。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:20:16.320

你真的需要分割图像吗？我只想`OnTouchListener`为整个图像设置一个。从里面，你可以得到触摸事件的坐标。然后你做一些数学运算，你应该能够知道要放大图像的哪一部分。

# javascript - 使用客户端 Internet 从客户端浏览器读取返回 Xml 格式数据的 URL，而不向服务器发送请求

> ID：16145688
> 
> 赞同：-2
> 
> 时间：2013-04-22T11:09:51.620
> 
> 标签：javascript, asp.net, asp.net-mvc-3, c#-4.0

我有一个 URL [http://www.straitstimes.com/print/singapore/rss.xml#](http://www.straitstimes.com/print/singapore/rss.xml#)，它将以 XML 格式返回数据，我必须使用客户端 Internet 来检索数据，而不是使用服务器端 Internet。

我的意思是即使服务器上没有任何 Internet 访问权限，我也应该利用客户端 Internet 获取数据

我已尝试使用此代码

```
System.Net.WebClient webClient = new System.Net.WebClient();
strSource = webClient.DownloadString(url);
webClient.Dispose(); 
```

而且我也尝试使用

```
XmlDocument doc = new XmlDocument();
doc.Load(url);
strSource = doc.InnerXml; 
```

但这对我没有帮助

而且我不能使用服务器来检索数据，我必须从客户端浏览器执行此操作而无需请求服务器。

请建议我该怎么做..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:12:37.203

您不能这样做，因为实现它的唯一方法是使用 javascript AJAX 调用，除非此 RSS 提要未托管在您的站点上，并且同源策略限制将阻止您访问它。

同源策略限制有 2 种可能的解决方法：

*   JSONP（不适用于您的情况，因为这是 XML，而不是 JSON）
*   CORS

所以这只有在远程服务器支持时才有效[`CORS`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。当然只有在支持 CORS 的浏览器中。

# ios - pushViewController 做一个黑色视图

> ID：16145691
> 
> 赞同：0
> 
> 时间：2013-04-22T11:09:52.500
> 
> 标签：ios, objective-c, ios6, uistoryboardsegue, pushviewcontroller

我有一张显示很多注释的地图，当我`UIButtonTypeDetailDisclosure`在标注中点击时，`annotationView.rightCalloutAccessoryView`我会看到一个空白的黑色视图。

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"%@", view.annotation.title);
    MapPoint *annView = view.annotation;
    DetailViewController *dvc = [[DetailViewController alloc] init];
    dvc.titleLabel.text = annView.title;
    dvc.textView.text = annView.subtitle;
    [self.navigationController pushViewController:dvc animated:YES];
} 
```

任何想法我做错了什么？

**编辑**：我正在使用情节提要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:13:02.957

如果您使用的是 Xib 接口，那么您应该在将 NibName 推入堆栈之前分配它。

**使用 IB**

```
DetailViewController *dvc = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil]; 
```

**使用故事板**

确保在属性 Inspector 中为 viewController 定义了**标识符**为“DetailViewController”。

```
DetailViewController *dvc = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:18:01.577

您应该打开故事板并检查是否正确填充了视图控制器自定义类![C](https://i.stack.imgur.com/6D6yT.png)

![自定义类属性](https://i.stack.imgur.com/KgWf8.png)

# shell - 使用gets() 的缓冲区溢出

> ID：16145695
> 
> 赞同：0
> 
> 时间：2013-04-22T11:09:59.363
> 
> 标签：shell, security, buffer, overflow, exploit

我试图用我的 shellcode 溢出缓冲区，但我遇到了 get() 的问题。如果我使用 strcpy() 函数用 shellcode 溢出缓冲区 - 没关系，我得到了 /bin/bash。但是，如果我对 gets() 函数做同样的事情，它什么也不会显示给我。我尝试使用gets（）进行ret2text攻击，它工作正常，如果我尝试使用恶意代码（shell）溢出它就不起作用。我关闭了堆栈保护器（-fno-stack-protector），禁用了 ASLR（echo 0 > randomize_va_space），启用了堆栈执行（-z execstack）

这是shellcode

```
xeb\x0b\x5b\x31\xc0\x31\xc9\x31\xd2\xb0\x0b\xcd\x80\xe8\xf0\xff\xff\xff\x2f\x62\x69\x6e\x2f\x73\x68 
```

这是 vuln prog

```
#include <stdio.h>
#include <string.h>

int ask_user(void)
{
    int ret;
    char name[10];
    printf("Your Name: ");
    fflush(stdout);
    gets(name);
    ret = strcmp(name, "Peter");
    if (ret == 0)
    return 1;
    return 0;
}

int main(int argc, char *argv[])
{
    int is_peter;
    printf("This Application finds the Peter!\n");
    is_peter = ask_user();
    if (is_peter == 1)
    {
        printf("Lol, you are a real Peter!\n");
        return 0;
    }
    printf("Ups, no Peter :-/\n");
    return 0;
} 
```

一些gdb

```
gdb$ si
--------------------------------------------------------------------------[regs]
  EAX: 0x0000000B  EBX: 0xBFFFEF22  ECX: 0x00000000  EDX: 0x00000000  o d I t s Z a P c 
  ESI: 0x00000000  EDI: 0x00000000  EBP: 0x41414141  ESP: 0xBFFFEF10  EIP: 0xBFFFEF1B
  CS: 0073  DS: 007B  ES: 007B  FS: 0000  GS: 0033  SS: 007B
--------------------------------------------------------------------------[code]
=> 0xbfffef1b:  int    0x80
   0xbfffef1d:  call   0xbfffef12
   0xbfffef22:  das    
   0xbfffef23:  bound  ebp,QWORD PTR [ecx+0x6e]
   0xbfffef26:  das    
   0xbfffef27:  jae    0xbfffef91
   0xbfffef29:  add    BYTE PTR [eax+ecx*1],al
   0xbfffef2c:  add    BYTE PTR [eax],al
--------------------------------------------------------------------------------
0xbfffef1b in ?? ()
gdb$ x/1sb $ebx
0xbfffef22:     "/bin/sh"
gdb$ x/1sb $esp
0xbfffef10:     "ë\v[1À1É1Ò°\vÍ\200èð\377\377\377/bin/sh"
gdb$ si
process 3697 is executing new program: /bin/bash
Error in re-setting breakpoint 1: No symbol table is loaded.  Use the "file" command.
warning: Could not load shared library symbols for linux-gate.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Inferior 1 (process 3697) exited normally]
--------------------------------------------------------------------------[regs]
  EAX:Error while running hook_stop:
No registers. 
```

正如您在调试器中看到的那样，shell 目前正在启动和退出。当我使用 strcpy 时，它启动 shell 而不是退出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T08:10:35.907

strcpy 和 get 之间的行为有所不同。

你应该尝试使用这样的东西来让标准输入打开：(cat /tmp/yourbuffer;cat) | ./漏洞

# c# - 在 ActionFilterAttribute 中设置 TempData

> ID：16145700
> 
> 赞同：7
> 
> 时间：2013-04-22T11:10:16.753
> 
> 标签：c#, asp.net-mvc, tempdata, actionfilterattribute

我有一个自定义操作过滤器，它在 内部`OnActionExecuting`，根据某些条件，注销用户并将他们重定向到网站的主页。重定向部分的（剥离）代码如下

```
 filterContext.Controller.TempData.Add("key", "Message");

  filterContext.Result = new RedirectResult("/"); 
```

如上所述，我也在设置一个 tempData 消息。因为用户已经注销，所以当他们点击主页时，该`[Authorize]`属性会将他们重定向到登录 GET 页面。在登录视图中，我正在显示来自 tempData 的任何消息。但是在这种情况下 tempData 是空的。

这与我的登录 POST 的工作方式非常相似（如果无效，它会重定向到主页，然后重定向到登录并显示登录帖子中设置的 tempData 消息）。这段代码可以在下面看到

```
 TempData.Add("key", errorMessage);

   return Redirect("/")); 
```

我这样做的原因，而不是专门重定向到登录页面是因为这段代码分布在许多站点上，所以我们不知道登录 GET url 是什么。

有没有人知道为什么这适用于登录 POST 但不适用于 ActionFilter 重定向？

编辑：

如果我在自定义操作过滤器中删除注销调用，则 tempData 仍设置在 Home 操作中 - 但这并不能解释为什么它适用于 Login POST 但不适用于操作过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:37:39.573

所以事实证明，当我从系统中注销用户时，我也在放弃会话（调用`HttpContextBase.Session.Abandon()`）并重置 cookie 会话 ID。这些影响了 TempData 行为。通过删除这些调用，tempData 现在可以正确设置和显示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T13:41:06.073

将结果设置为`new RedirectResult("/")`将导致当前服务器处理停止，并向客户端发送一个响应，告诉客户端请求一个新 URL - 您在 RedirectResult 中所说的那个。然后第二个请求不同，并且不包含来自先前处理的值。尝试在同一客户端请求中使用`Redirect("/");`或服务新路由。`Server.Transfer("/");`

# asp.net - 我可以将 web-form asp.net web 应用程序部署到云吗？

> ID：16145702
> 
> 赞同：2
> 
> 时间：2013-04-22T11:10:19.480
> 
> 标签：asp.net, .net, web-applications, azure, cloud

我知道这样的问题已经被问过很多次了，但我在这里有我的场景。请不要删除或投票关闭。

1.  我有一个以 L2S 和 SQL 2008 R2 作为后端的 asp.net 应用程序
2.  使用 N 层架构
3.  主要是要执行的正常 crud 操作。
4.  会话和视图状态的使用
5.  手动登录/注销（用户和角色管理），未使用 .net 会员资格。
6.  尚未使用任何服务，可能是稍后的部分。
7.  Telerik 或 Infragistics 等第三方控件也在使用中。

我想知道：

1.  我需要将整个应用程序更改为 Azure Web 应用程序吗？
2.  如果没有，是否可以像我们通常在 IIS 中那样将其直接部署在云、MS 或任何其他设备上？
3.  如果没有，是否有任何第三方迁移工具可用于使我的普通旧 Web 应用程序与云兼容，而不影响现有代码？

我想要具有成本效益且易于执行的步骤？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:31:17.617

是的，这应该是可能的。您几乎可以肯定不必更改整个应用程序。

*   Linq2SQL 很好，我用 L2S 运行 Azure 站点没有任何问题
*   您必须将数据库部署到 SQL Azure 数据库。有一些限制，比如你所有的表都必须有一个主键。更大的列表在这里：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx)。
    此外，在生成 SQL 脚本时，请务必选择 SQL Azure 作为数据库引擎类型： http: [//mooneyblog.mmdbsolutions.com/index.php/2011/09/22/generating-azure-friendly-sql-scripts/](http://mooneyblog.mmdbsolutions.com/index.php/2011/09/22/generating-azure-friendly-sql-scripts/)
*   你的 N 层是什么样的？如果它们是 DLL，那很好。如果它们是 Web 服务，您需要为它们创建 Web 角色。如果它们是 Windows 服务，您需要将它们移植到工作角色。
*   大多数 crud 和视图状态和手动身份验证代码都很好
*   对于会话，这取决于您在做什么（内存与数据库）。但是，如果您部署到任何网络场，您将面临同样的挑战
*   对于 Telerik，我确信他们必须对 Azure 有一些支持，而且我认为他们不会做任何无法在 Azure 上运行的疯狂事情。您应该查看他们的网站以验证兼容性。
*   此外，请确保您没有在任何地方写入硬盘驱动器并期望它稍后会在那里，因为实例可以在任何时候启动、停止和重新映像。如果您这样做，则需要对其进行更改以使用其他东西，例如 blob 存储。

我有一系列正在进行的博客文章，其中介绍了一些步骤，这应该会有所帮助： http: [//mooneyblog.mmdbsolutions.com/index.php/category/azure/](http://mooneyblog.mmdbsolutions.com/index.php/category/azure/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:28:14.307

我认为将 Web 应用程序部署到云中没有任何麻烦。您不需要将整个应用程序转换为其他任何东西。毕竟，您现在可以尝试使用 Windows Azure 中的试用订阅来部署它，免费三个月。Windows Azure中有相当多的新技术，如服务总线、天蓝色存储、访问控制服务等，但现在没有必要全部使用。将现有应用程序迁移到云中非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:34:10.413

您可以将其部署到 Azure 网站。如果您不想使用 SQL Azure 和云存储，那应该会更容易。

# asp.net - gridview中每一行的文件上传按钮和在asp.net中上传的按钮

> ID：16145704
> 
> 赞同：1
> 
> 时间：2013-04-22T11:10:23.243
> 
> 标签：asp.net

我需要为网格视图中的每一行设置文件上传按钮。最后我需要一个按钮来上传从文件上传按钮中选择的文件。我有一个代码，但它同时具有文件上传按钮和更新按钮，但是如果我更改命令名称，它就不起作用。下面是我的代码。

在我的代码中，我同时显示了文件上传按钮和按钮更新。这很好用，但我需要多个文件上传按钮和单个按钮来更新所有文件。

```
 <asp:GridView ID="GridView1" runat="server">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:FileUpload ID="FileUpload1" runat="server" />
                        <asp:Button ID="Button1" runat="server" CommandArgument='<%# Container.DataItemIndex  %>'
                            Text="Upload" OnClick="Button1_Click" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>

protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            string[] strArray = { "Test1", "Test2", "Test3" };
            GridView1.DataSource = strArray;
            GridView1.DataBind();
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        int index = int.Parse(((Button)sender).CommandArgument);

        FileUpload file = (FileUpload)GridView1.Rows[index].FindControl("FileUpload1");

        if (file != null)
        {
            if (file.HasFile)
            {
                Response.Write(file.PostedFile.FileName);
                Response.End();
                //file.SaveAs(Server.MapPath("~") + "\\DataBind\\" + System.IO.Path.GetFileName(file.PostedFile.FileName));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:33:08.683

看起来你很近。您只想对所有行执行相同的操作。您可以为此使用 foreach 循环：

```
protected void Button1_Click(object sender, EventArgs e)
{
    foreach (GridViewRow row in GridView1.Rows)
    {
        FileUpload file = (FileUpload)row.FindControl("FileUpload1");

        if (file != null)
        {
            if (file.HasFile)
            {
                // Save your file here
            }
        }
    }
} 
```

# c - 查找缓存性能

> ID：16145717
> 
> 赞同：1
> 
> 时间：2013-04-22T11:11:02.113
> 
> 标签：c, caching

所以有这个代码cache.c

```
#include <sys/times.h>
#include <stdio.h>

#define CACHE_MIN (1024) /* smallest cache (in words) */
#define CACHE_MAX (1024*1024) /* largest cache */
#define STRIDE_MIN 1 /* smallest stride (in words) */
#define STRIDE_MAX 128 /* largest stride */
#define SAMPLE 10 /* to get a larger time sample */
#define CLK_TCK 60 /* number clock cycles per second */
int x[CACHE_MAX]; /* array going to stride through */

double get_seconds () { /* routine to read time */

  struct tms rusage;
  times (&rusage); /* UNIX utility: time in clock ticks */
  return (double) (rusage.tms_utime) / CLK_TCK;
}

int main () {

  int register i, index, stride, limit, temp;
  int steps, tsteps, csize;
  double sec0, sec; /* timing variables */
  for (csize = CACHE_MIN; csize <= CACHE_MAX; csize = csize * 2)

    for (stride = STRIDE_MIN; stride <= STRIDE_MAX; stride = stride * 2) {
      sec = 0; /* initialize timer */
      limit = csize - stride + 1; /* cache size this loop */
      steps = 0;
      do { /* repeat until collect 1 second */

    sec0 = get_seconds (); /* start timer */
    for (i = SAMPLE * stride; i != 0; i = i - 1) /* larger sample */
      for (index = 0; index < limit; index = index + stride)
        x[index] = x[index] + 1; /* cache access */
    steps = steps + 1; /* count while loop iterations */
    sec = sec + (get_seconds () - sec0); /* end timer */

      }
      while (sec < 1.0); /* until collect 1 second */

      /* Repeat empty loop to loop subtract overhead */
      tsteps = 0; /* used to match number of while iterations */
      do { /* repeat until same number of iterations as above */

    sec0 = get_seconds (); /* start timer */
    for (i = SAMPLE * stride; i != 0; i = i - 1) /* larger sample */
      for (index = 0; index < limit; index = index + stride)
        temp = temp + index; /* dummy code */
    tsteps = tsteps + 1; /* count while iterations */
    sec = sec - (get_seconds () - sec0); /* - overhead */

      }
      while (tsteps < steps); /* until equal to number of iterations */

      if( stride==STRIDE_MIN ) printf("\n"); /* extra line to separate array sizes */
      printf("Size(bytes): %7d Stride(bytes): %4d read+write: %4.0f ns\n",
         csize * sizeof (int), stride * sizeof (int),
         (double) sec*1e9 / (steps*SAMPLE*stride*((limit-1)/stride + 1)));

    } /* end of both outer for loops */
} 
```

运行时，我得到这个输出

```
Size(bytes):    4096 Stride(bytes):    4 read+write:    1 ns
Size(bytes):    4096 Stride(bytes):    8 read+write:    0 ns
Size(bytes):    4096 Stride(bytes):   16 read+write:    0 ns
Size(bytes):    4096 Stride(bytes):   32 read+write:    0 ns
Size(bytes):    4096 Stride(bytes):   64 read+write:    0 ns
Size(bytes):    4096 Stride(bytes):  128 read+write:    0 ns
Size(bytes):    4096 Stride(bytes):  256 read+write:    0 ns
Size(bytes):    4096 Stride(bytes):  512 read+write:    0 ns

Size(bytes):    8192 Stride(bytes):    4 read+write:    0 ns
Size(bytes):    8192 Stride(bytes):    8 read+write:    1 ns
Size(bytes):    8192 Stride(bytes):   16 read+write:    0 ns
Size(bytes):    8192 Stride(bytes):   32 read+write:    1 ns
Size(bytes):    8192 Stride(bytes):   64 read+write:    0 ns
Size(bytes):    8192 Stride(bytes):  128 read+write:    0 ns
Size(bytes):    8192 Stride(bytes):  256 read+write:    1 ns
Size(bytes):    8192 Stride(bytes):  512 read+write:    0 ns

Size(bytes):   16384 Stride(bytes):    4 read+write:    1 ns
Size(bytes):   16384 Stride(bytes):    8 read+write:    1 ns
Size(bytes):   16384 Stride(bytes):   16 read+write:    1 ns
Size(bytes):   16384 Stride(bytes):   32 read+write:    0 ns
Size(bytes):   16384 Stride(bytes):   64 read+write:    1 ns
Size(bytes):   16384 Stride(bytes):  128 read+write:    0 ns
Size(bytes):   16384 Stride(bytes):  256 read+write:    0 ns
Size(bytes):   16384 Stride(bytes):  512 read+write:    0 ns

Size(bytes):   32768 Stride(bytes):    4 read+write:    1 ns
Size(bytes):   32768 Stride(bytes):    8 read+write:    1 ns
Size(bytes):   32768 Stride(bytes):   16 read+write:    0 ns
Size(bytes):   32768 Stride(bytes):   32 read+write:    0 ns
Size(bytes):   32768 Stride(bytes):   64 read+write:    1 ns
Size(bytes):   32768 Stride(bytes):  128 read+write:    0 ns
Size(bytes):   32768 Stride(bytes):  256 read+write:    0 ns
Size(bytes):   32768 Stride(bytes):  512 read+write:    0 ns

Size(bytes):   65536 Stride(bytes):    4 read+write:    0 ns
Size(bytes):   65536 Stride(bytes):    8 read+write:    0 ns
Size(bytes):   65536 Stride(bytes):   16 read+write:    1 ns
Size(bytes):   65536 Stride(bytes):   32 read+write:    1 ns
Size(bytes):   65536 Stride(bytes):   64 read+write:    2 ns
Size(bytes):   65536 Stride(bytes):  128 read+write:    2 ns
Size(bytes):   65536 Stride(bytes):  256 read+write:    1 ns
Size(bytes):   65536 Stride(bytes):  512 read+write:    1 ns

Size(bytes):  131072 Stride(bytes):    4 read+write:    0 ns
Size(bytes):  131072 Stride(bytes):    8 read+write:    0 ns
Size(bytes):  131072 Stride(bytes):   16 read+write:    0 ns
Size(bytes):  131072 Stride(bytes):   32 read+write:    1 ns
Size(bytes):  131072 Stride(bytes):   64 read+write:    2 ns
Size(bytes):  131072 Stride(bytes):  128 read+write:    2 ns
Size(bytes):  131072 Stride(bytes):  256 read+write:    2 ns
Size(bytes):  131072 Stride(bytes):  512 read+write:    1 ns

Size(bytes):  262144 Stride(bytes):    4 read+write:    0 ns
Size(bytes):  262144 Stride(bytes):    8 read+write:    0 ns
Size(bytes):  262144 Stride(bytes):   16 read+write:    0 ns
Size(bytes):  262144 Stride(bytes):   32 read+write:    1 ns
Size(bytes):  262144 Stride(bytes):   64 read+write:    2 ns
Size(bytes):  262144 Stride(bytes):  128 read+write:    2 ns
Size(bytes):  262144 Stride(bytes):  256 read+write:    2 ns
Size(bytes):  262144 Stride(bytes):  512 read+write:    1 ns

Size(bytes):  524288 Stride(bytes):    4 read+write:    0 ns
Size(bytes):  524288 Stride(bytes):    8 read+write:    0 ns
Size(bytes):  524288 Stride(bytes):   16 read+write:    1 ns
Size(bytes):  524288 Stride(bytes):   32 read+write:    1 ns
Size(bytes):  524288 Stride(bytes):   64 read+write:    3 ns
Size(bytes):  524288 Stride(bytes):  128 read+write:    3 ns
Size(bytes):  524288 Stride(bytes):  256 read+write:    3 ns
Size(bytes):  524288 Stride(bytes):  512 read+write:    3 ns

Size(bytes): 1048576 Stride(bytes):    4 read+write:    1 ns
Size(bytes): 1048576 Stride(bytes):    8 read+write:    1 ns
Size(bytes): 1048576 Stride(bytes):   16 read+write:    1 ns
Size(bytes): 1048576 Stride(bytes):   32 read+write:    1 ns
Size(bytes): 1048576 Stride(bytes):   64 read+write:    3 ns
Size(bytes): 1048576 Stride(bytes):  128 read+write:    3 ns
Size(bytes): 1048576 Stride(bytes):  256 read+write:    3 ns
Size(bytes): 1048576 Stride(bytes):  512 read+write:    3 ns

Size(bytes): 2097152 Stride(bytes):    4 read+write:    1 ns
Size(bytes): 2097152 Stride(bytes):    8 read+write:    1 ns
Size(bytes): 2097152 Stride(bytes):   16 read+write:    1 ns
Size(bytes): 2097152 Stride(bytes):   32 read+write:    1 ns
Size(bytes): 2097152 Stride(bytes):   64 read+write:    3 ns
Size(bytes): 2097152 Stride(bytes):  128 read+write:    3 ns
Size(bytes): 2097152 Stride(bytes):  256 read+write:    3 ns
Size(bytes): 2097152 Stride(bytes):  512 read+write:    3 ns

Size(bytes): 4194304 Stride(bytes):    4 read+write:    1 ns
Size(bytes): 4194304 Stride(bytes):    8 read+write:    1 ns
Size(bytes): 4194304 Stride(bytes):   16 read+write:    1 ns
Size(bytes): 4194304 Stride(bytes):   32 read+write:    2 ns
Size(bytes): 4194304 Stride(bytes):   64 read+write:    3 ns
Size(bytes): 4194304 Stride(bytes):  128 read+write:    3 ns
Size(bytes): 4194304 Stride(bytes):  256 read+write:    3 ns
Size(bytes): 4194304 Stride(bytes):  512 read+write:    3 ns 
```

现在我试图找出缓存命中和未命中的速度，以及一级缓存的大小以及一级缓存的块大小。

一级缓存大小和块大小不是只有4kb吗？我不确定如何找到速度，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:40:58.450

1.  使用线程关联将性能检查线程连接到单个特定核心。这将允许您消除不同处理器内核之间线程迁移的影响，从而导致错误的结果。
2.  使用时间戳计数器并测量 CPU 周期的开销。它是 x86 CPU 上可用的最细粒度的时间测量计时器。
3.  不要忘记从测量结果中减去时间测量的时间。
4.  编译器在反汇编器中生成的控制代码，以确保编译器没有引入不需要的优化（例如将变量放入 CPU 寄存器而不是将其放入内存）。

CPU 高速缓存和高速缓存行的大小高度依赖于特定的 CPU 型号，并且可能会有很大差异。检查您使用的 CPU 的文档。

# c# - 如何知道哪个页面触发了 Session Start 事件？

> ID：16145718
> 
> 赞同：1
> 
> 时间：2013-04-22T11:11:07.257
> 
> 标签：c#, asp.net

在我的会话开始事件中，我如何知道哪个页面或处理程序触发了事件？

```
void Session_Start(object sender, EventArgs e) 
    {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:12:22.513

例如，您可以使用`HttpContext.Current.Request.Url`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:16:09.797

您可以在创建会话时使用它：

```
Path.GetFileName( Request.Url.AbsolutePath ) 
```

# c# - 排除字符串开头和结尾的特殊字符

> ID：16145719
> 
> 赞同：1
> 
> 时间：2013-04-22T11:11:10.200
> 
> 标签：c#, asp.net, regex

我想要一个正则表达式来排除字符串开头和结尾的特殊字符

我试过这段代码，但它不工作

```
String strFileName = Regex.Replace(FileName, @"[^A-Za-z0-9-_ ]", "");

<asp:RegularExpressionValidator ID = "Regular" 
            ValidationGroup = "valGroup" runat="server" ControlToValidate = "txtreport"
            ErrorMessage = "Please enter valid data."
            ValidationExpression = "([a-z]|[A-Z]|[0-9])*">
</asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:22:38.207

您快到了，只需添加锚点以将匹配项绑定到字符串的开头或结尾，并告诉正则表达式引擎匹配多个字符：

```
String strFileName = Regex.Replace(FileName, 
    @"^              # Match the start of the string
    [^A-Z0-9_ -]+    # followed by one or more characters except these
    |                # or
    [^A-Z0-9_ -]+    # Match one or more characters except these
    $                # followed by the end of the string", 
    "", RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace); 
```

另外，你的`ValidationExpression`很奇怪。

```
ValidationExpression="[a-zA-Z0-9]*" 
```

意思相同，但不允许`_`,`<space>`并且`-`您的“特殊字符替换器”正在忽略。所以你可能想使用

```
ValidationExpression="[a-zA-Z0-9_ -]*" 
```

# haskell - 安装 Haskell 平台会覆盖系统 PATH 中的 gcc 位置

> ID：16145721
> 
> 赞同：1
> 
> 时间：2013-04-22T11:11:14.230
> 
> 标签：haskell, path, mingw, environment-variables

我正在运行最新版本的 MinGW GCC 4.7.2，`-std=c++11`在我使用 Haskell 平台安装 Haskell 之前它运行良好。请看一下：

![在此处输入图像描述](https://i.stack.imgur.com/xSSfI.png)

由于某种原因，GCC 回到了 4.5.2，在安装 Haskell 后，我重新安装了它，版本为 4.7.2，但它仍然显示为 4.5.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:29:23.003

Haskell 将它自己的 GCC 添加到您的系统 PATH 中。您可以通过运行检查这是真的

```
where gcc 
```

这将显示两个命令，首先是 Haskell，然后是 MinGW GCC。

解决方案是更改您的 PATH 以指向您想要的 GCC（但确保 Haskell 仍然使用它的 GCC，我怀疑如果它与 GCC 4.5 一起提供，它会与 GCC 4.7 一致）。

最简单的方法是拥有一些可以运行的脚本来设置编译环境，因此您不必担心系统路径。

如果你不太关心你安装的那个确切的 GCC 版本，你可以得到我的构建（[32 位](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/)和[64 位](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/rubenvb/)），它带有一个`.cmd`你可以双击的文件，它会给你一个构建环境很像MSVS 命令行快捷方式，但适用于 GCC。它真正做的就是将编译器添加到PATH。

# java - 自动装配的 bean 在 CustomRepositoryImpl 中为空

> ID：16145722
> 
> 赞同：0
> 
> 时间：2013-04-22T11:11:14.767
> 
> 标签：java, spring, spring-mvc, dependency-injection, spring-data

我刚开始使用[Spring Data](http://www.springsource.org/spring-data)，我正在尝试向我的存储库添加一个自定义方法，这需要另一个 bean（最好只创建一次（即单例））

bean 像这样在 root-context.xml 中声明

```
<bean class="org...CachedQueryTemplateFactory" /> 
```

当然，使用适当的命名空间。然后我尝试使用 @Autowired 将此 bean 注入到 CustomRepositoryImpl

```
@Getter
@Setter
@Component
public class StudyRepositoryImpl implements StudyRepositoryCustom {
    @PersistenceContext private EntityManager d_em;
    @Autowired private QueryTemplateFactory queryTemplateFactory;

    @Override
    public List<Study> findStudies(
            UUID indication,
            List<UUID> variables,
            List<UUID> treatments) {
        QueryTemplate template = this.queryTemplateFactory.buildQueryTemplate("...");
        ...
    }
} 
```

但是，在运行代码时，我得到 NullPointerException。在 @Controller 中进行接线然后将引用传递给存储库时，它可以工作，但我不希望 DI 发生在控制器中。那么，为什么 StudyRepositoryImpl 中的 QueryTemplateFactory 为空，而 @Controller 中却没有，我该如何解决这个问题？

GitHub [https://github.com/joelkuiper/trialverse/tree/feature/injectQueryTemplate上提供了完整代码](https://github.com/joelkuiper/trialverse/tree/feature/injectQueryTemplate)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:07:16.417

您可能只需要添加：

```
<context:component-scan base-package="packagewithservices"/> 
```

或者

```
<context:annotation-config/> 
```

其中任何一个都注册了一个[AutowiredAnnotationBeanPostProcessor](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)负责在`@Autowired`字段中进行布线。我链接到的 javadoc 有更多详细信息。

# asp.net-mvc-4 - TextBoxFor int? 在 ASP.NET mvc 中 4\. 如果用户输入的值超过最大 int 大小，则会出现异常

> ID：16145724
> 
> 赞同：1
> 
> 时间：2013-04-22T11:11:29.753
> 
> 标签：asp.net-mvc-4, validation

我有一个网络表单（c# asp.net mvc 4），用户可以在其中输入一些数字。这是模型的一部分代码：

```
[Range(1, Int32.MaxValue)] 
public int? MyVariable { get; set; } 
```

但是，当用户输入比 maxint 更多的值时，这一点并没有帮助，例如 '999999999999'。在这种情况下，我在服务器上有一个异常值超过了最大 int。有没有办法验证这种情况？我看到两种方法，但都不喜欢两者：

*   单击提交按钮后，使用 javascript 检查值是否超过 2,147,483,647。如果更多我不提交并显示错误消息。此外，我需要在页面上为其创建 div，当您有 40 个输入时，这不是一个好主意。
*   将我的输入的输入字符数限制为 9 个字符。所以用户不能输入超过 9 位数字并且永远不会超过最大 int 大小。我也不喜欢这个解决方案。

希望有人有更好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:47:34.843

`Range`自己能够`MVC validation`验证我们不需要做任何特别的事情。

这就是我所做的，它完全符合要求。

*模型*

```
public class IndexModel
{
    [Range(1, Int32.MaxValue)]
    public int? MyVariable { get; set; }
} 
```

*控制器*

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(IndexModel model)
    {
        return View();
    }
} 
```

*看法*

```
@model MvcApplication2.Models.IndexModel
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
@using (Html.BeginForm())
{ 
    @Html.TextBoxFor(m => m.MyVariable)
    @Html.ValidationMessageFor(m => m.MyVariable)

    <input type="submit" id="submit" value="submit" />    
} 
```

# plot - 如何为图例添加选择性数据集

> ID：16145733
> 
> 赞同：1
> 
> 时间：2013-04-22T11:11:50.607
> 
> 标签：plot, legend, matlab-figure, legend-properties

我有一个图，其中绘制了 15 个数据集及其趋势线（lslines）。如果我使用命令图例，它会显示所有数据集和 lslines，总共 30 个图例。但我想忽略 lslines 的传说。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:27:35.880

存储每个绘制数据集的句柄并使用它们创建图例：

```
figure
hold on
h1 = plot(rand(1,10),'b');
h2 = plot(rand(1,10),'r');
h3 = plot(rand(1,10),'g');

legend([h1,h3],'data 1','data 3') %displays a legend for the first and third plot but not the second plot 
```

# python - 如何在 python xml.etree 模块中插入换行符

> ID：16145738
> 
> 赞同：1
> 
> 时间：2013-04-22T11:12:14.153
> 
> 标签：python, xml, escaping, newline

我想像这样打印出xml：

```
<xml>
    <tag>
        this is line 1.
        this is line 2.
    </tag>
</xml> 
```

我有一段这样的代码：

```
from xml.etree import ElementTree as ET
xml = ET.Element('xml')
tag = ET.SubElement(xml, 'tag')
tag.text = 'this is line 1.' + '&#x000A;' + 'this is line 2.'
tree = ET.ElementTree(xml)
tree.write('test.xml') 
```

但它打印出来是这样的：

```
<xml>
    <tag>this is line 1.&#x000A;this is line 2.</tag>
</xml> 
```

当我使用`'\n'`而不是`'&#x000A;'`，输出是这样的：

```
<xml>
    <tag>this is line 1\. this is line 2.</tag>
</xml> 
```

如何`newline`在“这是第 1 行”之间插入一个。和“这是第 2 行。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:17:14.443

使用 '\n' 换行即

```
from xml.etree import ElementTree as ET
xml = ET.Element('xml')
tag = ET.SubElement(xml, 'tag')
tag.text = 'this is line 1.' + '\n' + 'this is line 2.'
tree = ET.ElementTree(xml)
tree.write('test.xml') 
```

会产生

```
<xml><tag>this is line 1.
this is line 2.</tag></xml> 
```

这相当于

```
<xml>
    <tag>
        this is line 1.
        this is line 2.
    </tag>
</xml> 
```

# php - 使用 php 处理数组数据

> ID：16145743
> 
> 赞同：0
> 
> 时间：2013-04-22T11:12:23.370
> 
> 标签：php, arrays

我有 2 个数组

```
First array  -- array1(3,17,19,11,34,56,22,29);
Second array -- array2(4,6,12,19,59,21); 
```

现在我想获取 3 种类型的数据

```
a) values which are present in both array for eg `19`
b) values which are not present in array1 but present in array 2 for eg `4,6,12,59,21`
c) values which are not present in array2 but present in array 1 for eg `3,17,11,34,56,22,29` 
```

可以使用单个for循环来完成吗？

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:13:50.283

## PHP 文档是你的朋友

PHP 有一堆用于处理数组的内置函数

完整列表在这里：[http ://www.php.net/manual/en/ref.array.php](http://www.php.net/manual/en/ref.array.php)

你追求的是`array_intersect`和`array_diff`

## 看妈妈，没有循环！

一个）`array_intersect($array1, $array2)`

b)`array_diff($array1, $array2)`

b)`array_diff($array2, $array1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:15:02.557

尝试 array_merge：

```
array_unique(array_merge($array1, $array2)); 
```

# php - PHP 树形菜单，自下而上

> ID：16145744
> 
> 赞同：1
> 
> 时间：2013-04-22T11:12:28.420
> 
> 标签：php, menu, bottom-up

我在让树形菜单自下而上工作时遇到一些问题。我已经有一个脚本可以从上到下工作，效果很好。

这是我的表格的一个非常简化的版本：

```
+-----+-----------+--------------------+
| uid | parent_id | page_address       |
+-----+-----------+--------------------+
| 1   | 0         | index.php          |
| 2   | 0         | login.php          |
| 3   | 2         | dashboard.php      |
| 4   | 3         | bookings.php       |
| 5   | 3         | documents.php      |
| 6   | 4         | changebookings.php |
| 7   | 4         | activities.php     |
+-----+-----------+--------------------+ 
```

page_address 字段是唯一的。

例如，我可以计算出用户当前在哪个页面上`changebookings.php`

然后我想要一个看起来像这样的菜单：

```
login.php
    dashboard.php
    bookings.php
        changebookings.php
        activities.php
    documents.php 
```

但是，到目前为止，我最接近的是以下树：

```
login.php
    bookings.php
        changebookings.php 
```

如您所见，我的脚本目前只返回实际的父级，而不是当前在父级中的链接列表。

对于那些感兴趣的人，我总共使用的脚本在这篇文章的底部。

有没有更简单的方法可以根据需要获得自下而上的树？非常感谢

菲尔

* * *

编辑：我终于让代码工作了，对于偶然发现这篇文章的未来用户，我添加了以下功能：

```
$dataRows = $databaseQuery->fetchAll();     // Get all the tree menu records

$dataRows = $result->fetchAll(PDO::FETCH_ASSOC);

foreach($dataRows as $row)
{
    if($row['link_address']==substr($_SERVER['PHP_SELF'], 1, strlen($_SERVER['PHP_SELF'])-1))
    {
        $startingId = $row['parent_id'];
    }
}

$menuTree = $this->constructChildTree($dataRows, $startingId);

private function constructChildTree(array $rows, $parentId, $nesting = 0)
{
    $menu = array();

    if(!in_array($nesting, $this->nestingData))
    {
        $this->nestingData[] = $nesting;
    }

    foreach($rows as $row)
    {
        if($row['parent_id']==$parentId && $parentId!=0)
        {
            $menu[] = $row['link_address'];

            $newParentId = $this->getNextParent($rows, $row['parent_id']);

            $parentChildren = $this->constructChildTree($rows, $newParentId, ($nesting+1));

            if(count($parentChildren)>0)
            {
                foreach($parentChildren as $menuItem)
                {
                    $menu[] = 'NESTING' . $nesting . '::' . $menuItem;
                }
            }
        }
    }

    return $menu;
}

private function getNextParent($rows, $parentId)
{
    foreach($rows as $row)
    {
        if($row['uid']==$parentId)
        {
            return $row['parent_id'];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:07.903

在不阅读您的代码的情况下，您应该这样做：

1）获取当前页面，查看父ID。

2) 使用该父 ID 加载所有内容。

3) 使用当前父 ID 作为 ID 获取下一个父 ID。

4) 如果新的父 ID != 0，则转到第 2 步，传入新的父 ID。

听起来您只需要编辑脚本以包含具有给定 ID 作为其父 ID 的所有页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:32:20.670

```
<?PHP
$sql = "SELECT * FROM TABLE WHERE table parent_id=0";
$result = mysql_query($sql);
while($perant_menu = mysql_fetch_array($result))
{
    echo display_child($perant_menu["uid"],$perant_menu["page_address"]);
}

// Recursive function
function display_child($parent_id,$name)
{
    $sql= "SELECT * FROM table where parent_id = $parent_id";
    $result = mysql_query($sql);
    if(mysql_num_rows($result)>0)
    {
        while($menu = mysql_fetch_array($result))
        {
            echo display_child($menu["id"],$menu["page_address"]);
        }
    }
    else
    {
        echo $name;
    }
}
?> 
```

# java - Java 原始声明

> ID：16145746
> 
> 赞同：1
> 
> 时间：2013-04-22T11:12:31.743
> 
> 标签：java, syntax, operators, declaration, primitive

给定以下代码片段：

```
int i = 0;

int y = + ++i;

System.out.println(y); 
```

结果是 1。为什么这是一个有效的声明？谁能解释一下 =+ 是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T11:14:35.510

```
int y = + ++i; 
```

此行中的第一个`+`只是一元运算`+`符（请参阅：[赋值、算术和一元运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)）。它什么也不做。它类似于一元运算`-`符。上面的行相当于：

```
int y = ++i; 
```

它递增`i`然后分配`i`to的新值`y`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:16:02.387

这里`+`表示该值是否为正，即`unary`运算符，如果您将值更改为，`-`则答案将为`-1`。即`int y = - ++i;`会给`-1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T11:16:51.480

等号后面的第一个加号是值的符号。所以这意味着它是一个正数。

`int y = - ++i;`会回来`-1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:14:47.370

[Java 保证](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.1) 它会被评估`left-to-right`。具体来说，++`higher precedence`比 +。所以它首先绑定这些，然后将加法操作从左到右关联起来

# java - 如何将在 web 脚本中创建的票证放入我的 jsp 页面？

> ID：16145752
> 
> 赞同：0
> 
> 时间：2013-04-22T11:12:38.807
> 
> 标签：java, web-scraping, alfresco, alfresco-share

我刚刚创建了一个 Web 脚本来获取 Alfresco Share 的票。我所做的步骤是；

```
 1\. Created getticket.get.desc.xml

    <webscript>
      <shortname>Get User Ticket</shortname>
      <description>Personalized greeting</description>
      <url>/getticket</url>
      <authentication>user</authentication>
      <negotiate accept="text/html">html</negotiate>
      <negotiate accept="application/json">json</negotiate>
    </webscript>

   2\. created getticket.get.html.ftl

         ${session.getTicket()} 
```

我正在尝试测试外部身份验证。如何在我的 jsp 页面或 java 代码中获取票证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:42:53.397

您需要首先通过调用进行身份验证

> localhost:8080/alfresco/service/api/login?u={username}&pw={password?}

这将按如下方式返回票证

```
<ticket>TICKET_VALUE</ticket> 
```

存储票证，然后将票证附加到后续脚本 URL，如下所示

> 本地主机：8080/alfresco/service/../..?alf_ticket=TICKET_VALUE

# css - 网页行为异常

> ID：16145755
> 
> 赞同：0
> 
> 时间：2013-04-22T11:12:48.107
> 
> 标签：css

看看下面的网站[http://www.soe.gr](http://www.soe.gr)。

*   整个页面是使用 CSS Page Builder Magic 2 (projectseven.com) 构建的。
*   每个按钮都是指向不同 .html 页面的链接。

但是，我不知道为什么每次按下按钮都会在页​​面中产生闪光效果，背景会立即改变颜色，并且通常给人一种操作异常的印象。除了projectseven站点内的一些页面外，我还没有遇到任何具有这种行为的站点。
你知道为什么会这样吗？Page Builder Magic 方法有问题吗？我是 Web 开发世界的新手，我想知道这些人是否有任何问题。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:24:59.983

我检查了它，对于你那里的所有效果，它根本没有表现异常，我检查了其中一张图像的大小约为 250kb，然后想象我假设的其他图像大小相同，并且它们都将在页面加载时加载，您绝对应该期待一些效果

# c# - 如何在 asp.net c# 的 aspx.cs 页面中访问 td Id？

> ID：16145762
> 
> 赞同：-1
> 
> 时间：2013-04-22T11:13:05.193
> 
> 标签：c#, asp.net

我已经使用了这段代码，但它不起作用。

```
HtmlGenericControl T1 = (HtmlGenericControl)Page.FindControl("T1");
T1.Visible = false; 
```

错误是：

```
Object reference not set to an instance of an object 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:22:34.273

将`runat="server"`id 添加到 TD

```
<td runat="server" id="tdToSelect"> 
```

现在你可以设置

```
tdToSelect.visible = false; 
```

如果这是在更新面板使用[`UpdatePanel.FindControl()`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.findcontrol.aspx)方法内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:22:52.760

添加`runat='server'`到您的`td`. 否则，您将需要使用 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:23:21.263

你不能。

您*可以*做的是使用 ASP.NET`TableRow`和`TableCell`控件而不是 HTML`<TR>`和`<TD>`元素。然后，您可以从后面的 ASP.NET 代码访问您需要的控件。

在渲染时，这些控件当然会发出`<TR>`和`<TD>`元素，但是您将知道要在服务器端代码中使用的 ID，并且您的代码可以在服务器将生成的 HTML 发送到客户端之前修改控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:23:25.413

您只能从 C# 代码中引用服务器端控件。即，您应该为您的控件设置一个属性 runat=server，然后您可以为其分配一个 id。这样，您将能够从您的 c# 代码访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T11:31:10.080

您应该知道 FindControl 函数不会进行递归搜索，但您可以添加`runat="server"`到您的 TD 并设置为可见。

# java - 按下 JButton 时如何实现 JTexField

> ID：16145763
> 
> 赞同：0
> 
> 时间：2013-04-22T11:13:05.787
> 
> 标签：java, swing, jbutton, jtextfield

嗨，我正在开始编程，我正在编写一个由网格组成的程序，当按下单个方块时会改变颜色。我想知道如何实现一个允许我输入数字的 JTextField，这反过来会创建一个该数字的方形网格（例如，如果我输入 10，我将得到一个 10x10 的网格......）

这些都是我的画布和画布面板类：

```
 import java.awt.*; 
    import javax.swing.*; 
    import java.awt.event.*;

    public class CanvasPanel extends JFrame implements ActionListener{ 
      private JPanel buttonPanel;           
      private JButton sizeButton, clearButton, keepButton, saveButton;
      private JTextField sizeText, saveText;
      private Canvas canvas;            
      Thread runningThread;                    
    /**
     * constructor - builds buttons and board (in an instance of NewCanvas)
     */
    public CanvasPanel() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("The Game of Life");
        //buttons
        buttonPanel=new JPanel();
        sizeText = new JTextField();
        sizeButton = new JButton("size");
        clearButton = new JButton("clear");
        keepButton = new JButton("keep");
        saveText = new JTextField();
        saveButton = new JButton("save");
        buttonPanel.setLayout(new GridLayout(1,4));
        buttonPanel.add(sizeText);
        buttonPanel.add(sizeButton);         
        buttonPanel.add(clearButton);
        buttonPanel.add(keepButton);
        buttonPanel.add(saveText);
        buttonPanel.add(saveButton);

        sizeButton.addActionListener(this);
        clearButton.addActionListener(this);
        keepButton.addActionListener(this);
        saveButton.addActionListener(this);
        setLayout(new BorderLayout());
        add(buttonPanel, BorderLayout.NORTH);
        //board
        canvas=new Canvas("click to give life to a square");
        canvas.setBorder(BorderFactory.createLineBorder(Color.black,6));
        add(canvas, BorderLayout.CENTER);
        //ready to go
        setSize(500,500);         setVisible(true);
    }

    /**
     * This object is its own Listener so respond to button presses
     */
    public void actionPerformed(ActionEvent e){
        if (e.getSource()==sizeButton)
            canvas.step();
        if (e.getSource()==clearButton)
            canvas.clear();
        if (e.getSource()==keepButton){
            runningThread=new Thread(canvas);//start LifeCanvas in own thread
            runningThread.start();         }
        if (e.getSource()==saveButton){
            canvas.stopit();          }            
    }
} 
```

.

```
 import java.awt.*; import javax.swing.*; 

    import java.awt.event.*;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.ObjectInputStream;
    import java.io.ObjectOutputStream;
    /**
     * This class displays the game of Life using SWing
     */
    public class Canvas extends JPanel implements MouseListener,Runnable{
    private String status;
    private boolean keepGoing;
    private Grid board;
    private static final int ROWS = 10;
    private static final int COLUMNS = 10;  
    /**
     * constructor builds the LifeCanvas and creates Model
     */
    public Canvas(String initstring) {
        status=initstring;
        setBackground(Color.white);         
        board=new Grid(ROWS, COLUMNS); 
        this.addMouseListener(this);
    }

    /**
     * paints the Canvas - calls drawgris()
     */
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        drawgrid(g);          g.drawString(status,70, 20);
    }

    /**
     * the actual drawing 
     */
    public void drawgrid(Graphics g) {
        int i,j,starti=40,startj=40;
        g.setColor(Color.blue);
        for (i=0; i<ROWS; i++)
            for (j=0; j<COLUMNS; j++)
                if (!board.isAlive(i+1,j+1))
                    g.drawRect(starti+i*20,startj+j*20,18,18);
                else
                    g.fillRect(starti+i*20,startj+j*20,18,18);
    }     

    /**
     * this method could be improved a lot with a calculation
     */
    public void mouseClicked(MouseEvent e) {
        int i,j,starti=40,startj=40;
        int x=e.getX(); int y=e.getY();
        for (i=0; i<ROWS; i++)
            for (j=0; j<COLUMNS; j++)
                if ( x > starti+i*20 && x < starti+i*20+18 &&
                y > startj+j*20 && y < startj+j*20+18){
                    board.setValue(i+1, j+1, true);
        }
        this.repaint();
    }

    /**
     * one step
     */
    public void step()      {
        status="performed a step";
        board.calc();
        board.copy();
        repaint();
    }   

    /**
     * clears board
     */
    public void clear() {
        board.clear();
        repaint();
    }

    /**
     * keepsgoing until stopped
     */
    public void run(){
        int i=0;
        status="1 iteration" ;
        keepGoing=true;    
        try{
            while (keepGoing) {
                board.calc();
                if (!board.hasChanged())
                {status="stable in "+i+" moves"; repaint(); break;}
                if (i==100) 
                {status="100 generations and still changing";repaint();break;}
                board.copy();
                i++;
                status=i+" iterations";          //need slow down here
                Thread.sleep(200);
                repaint();
            }
        }
        catch (InterruptedException e) {}
    }

    /**
     * stop loop
     */
    public void stopit(){
        keepGoing=false;
        status="stopped";
    } 

    public void writeSerializable(String path) throws IOException {
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(path));
        oos.writeObject(this);
        oos.close();        
    }

    public static Canvas readSerializable(String path) throws IOException{
        Canvas result = null;
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(path));
        try{
            result = (Canvas)ois.readObject();
        }
        catch(ClassNotFoundException cnf){
            throw new IOException ("problem loading serializable file "+path);
        }
        return result;
    }

    public void mouseReleased( MouseEvent e) { }

    public void mousePressed( MouseEvent e) {}

    public void mouseEntered( MouseEvent e) {}

    public void mouseExited( MouseEvent e){} 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T17:36:07.450

这取决于您想要实现的目标，例如您想要文本字段的位置。

您可以创建一个 JTextField，然后使其不可见 (setVisible(false))。然后你可以移动它，让它随时随地可见。

或者，您可以弹出一个对话框，而不是使用 JTextField，如下所示：

```
userInput = JOptionPane.showInputDialog ( "Please type a number:" ); 
```

然后您将输入作为字符串返回。然后你可以检查它是否是一个有效的数字，如果不是，你可以再次弹出它。

# mysql - 使用 mysql 将一个数据库复制并覆盖到另一个数据库

> ID：16145764
> 
> 赞同：13
> 
> 时间：2013-04-22T11:13:06.173
> 
> 标签：mysql, mysqldump

我想将我的生产数据库复制到我的开发环境中。我将 website_production 复制到我的开发环境的 mysql 中，所以使用 SHOW DATABASES; 我现在有

网站_开发网站_生产

作为数据库。如何使用 mysql 命令将所有表及其内容从 website_production 复制并覆盖到 website_developemnt？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T11:15:49.047

它不是 MySQL 命令，但它是最简单的方法，从命令行：

```
$ mysqldump -u user --password=pass live_db_name | mysql -u user --password=pass -h localhost duplicate_db_name 
```

也适用于 Windows 终端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-28T19:26:57.543

[故障](https://stackoverflow.com/users/2294775/glitch-desire)答案通常很好，但存储过程和函数不会在备份中，因此不会复制到第二个数据库。

这就是为什么我总是这样做（`--routines`可以`-R`在下面的命令中使用而不是）：

```
$ mysqldump ${source_db} -R | mysql ${dest_db} 
```

事实上，当我出于备份目的进行常规转储时，我更喜欢使用备份转储本身，因此将其保存在文件中：

```
mysqldump ${source_db} -R > ${source_db}.sql
mysql ${dest_db} < ${source_db}.sql 
```

注意：出于[安全原因](https://dev.mysql.com/doc/refman/5.7/en/password-security-user.html)，我总是避免使用 -u 和 -p 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T01:16:34.610

我用于开发环境 Wordpress 安装的此解决方案。在我的情况下，wp_options 是我要使用 wp_options_apache 中的值覆盖的数据。Example #1 查询仅覆盖表上更新的每行 1 个值，但可以通过使用逗号分隔赋值轻松覆盖多个列，例如在第二个示例中。

示例 #1：

```
 UPDATE `wp_options` AS a
    LEFT JOIN `wp_options_apache` AS b
    ON a.option_name = b.option_name
    SET a.option_value = b.option_value; 
```

示例 #2：

```
 UPDATE `old_data` AS o
    LEFT JOIN `new_data` AS n
    ON o.prime_key = n.prime_key
    SET o.username = n.username,
        o.password = n.password,
        o.email = n.email; 
```

# excel - 从 dd/mm/yyyy hh:mm:ss 到 yyyy.mm.dd hh:mm 的格式化时间

> ID：16145767
> 
> 赞同：1
> 
> 时间：2013-04-22T11:13:10.387
> 
> 标签：excel, vba

我收到了以下任务：将“dd/mm/yyyy hh:mm:ss”时间转换为“yyyy.mm.dd hh:mm”格式。

我希望一个简单的 Format(activecell.value, "yyyy.mm.dd hh:mm") 会有所帮助，但是。在某些情况下，它可以工作。但是，在某些特殊情况下，它不会。当一天在 01-12 之间时（可以与月份互换！），那么它将把日子与月份混淆。（可能是因为美国风格的日期格式。）

例如，原始文本字符串：04/06/2013 09:00:00

预计时间：2013.06.04 09:00

结果：2013.04.06 09:00（日月互换）

我试图通过格式化输入来克服它，我给它一个“dd/mm/yyyy hh:mm:ss”自定义格式。没有帮助，它仍然交换日期和月份。

所以我不再有想法了，只有正则表达式。日期格式始终相同，因此只需移动字符串的各个部分就可以了。但是，我不知道它是如何工作的，谷歌搜索带来了令人困惑的结果。

谁能帮我？当然，如果有更优雅的方式来做到这一点，那也是受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:42:03.177

尝试使用此自定义格式：

```
yyyy/mm/dd h:mm;@ 
```

要输入它，请右键单击单元格并选择单元格格式：

![格式化单元格](https://i.stack.imgur.com/SC3Ow.jpg)

然后在`Number`选项卡下`Custom`从列表框中选择。并在文本框中输入提供的格式`Type:`。

![例子](https://i.stack.imgur.com/fpY36.jpg)

如果这不起作用。你 ***** 绝对 ***** 肯定 04/06/2013 09:00:00 是 2013 年 4 月 6 日而不是 2013 年 6 月 4 日？

如果这仍然不起作用并且您已验证日期是正确的。

```
Sub ChangeDateFormat()

Application.ScreenUpdating = False

Dim CurrentCell As Range
Dim LastRow As Long
Dim RegEx As Object
Set RegEx = CreateObject("vbscript.regexp")
RegEx.Global = True

LastRow = Range("A" & Rows.Count).End(xlUp).Row 'Get The Last Row in Column Change A as Needed

For Each CurrentCell In Range("A1:A" & LastRow) ' Loop through all cells. Change Column as needed

    If InStr(CurrentCell.Value, "/") <> 0 Then 'To make sure only convert non converted ones

        RegEx.Pattern = "(\d{2})/(\d{2})/(\d{4}) (\d{2}):(\d{2}):(\d{2})" ' Seperate all parts of imported Data into groups
        CurrentCell.Value = RegEx.Replace(CurrentCell.Value, "$3.$2.$1 $4:$5") ' Change order of groups and place into cell.

    End If

Next

Application.ScreenUpdating = True

End Sub 
```

*****注意： ***** 这仅在**所有**日期值都为的情况下才有效，`dd/mm/yyyy hh:mm:ss`如果它们不是，您将不得不添加一些错误处理并可能稍微修改代码，因为它***会***导致问题。

这也适用于其他文本内的日期。如果`A1`值为

`This is a test 04/06/2013 09:00:00 Lets see what happens`

那么新值将是

`This is a test 2013.06.04 09:00 Lets see what happens`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:30:15.150

这很简单。. . 只需按照步骤选择整个列或什至所需的单元格按右键单击并选择格式单元格选项，将从数字选项卡选择日期打开一个选项卡窗口，从区域设置下拉菜单中选择英语（南非）从类型中的给定选项中选择您的所需的反向格式。. . 你完成了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T10:22:58.000

如果月份和日期放错了位置，可以使用`"DATE(YEAR(A1),DAY(A1),MONTH(A1))"`，前提是日期格式，`"DATE(MID(A1,7,4),LEFT(A1,2),MID(A1,4,2))"`如果是文本格式

# php - SQL TEXT 行将 æ ø å 替换为 �, HTML charset=UTF-8, MySQL row collat ion = utf8_general_ci

> ID：16145772
> 
> 赞同：0
> 
> 时间：2013-04-22T11:13:23.923
> 
> 标签：php, mysql

我遇到了 SQL 行的问题，当使用 å ø æ 时，它们被插入为 ø æ å，看起来不错，但是当我在页面上回显该行时，我得到一个�。

如果我使用另一个排序规则，我会得到一个“？” 而不是……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:15:40.593

你必须检查几件事：

1.  表/数据库的排序规则。
2.  连接的字符集（如果您使用的是 MySQL，请使用`mysql_set_charset`）。
3.  页面的编码。

# css - 在 symfony2 中处理 css 文件编辑的好方法是什么

> ID：16145776
> 
> 赞同：0
> 
> 时间：2013-04-22T11:13:39.773
> 
> 标签：css, symfony, assetic

我想我错过了在 symfony2 项目中编辑 CSS 的东西。我已经像这样附加了我的css文件：

`{% stylesheets 'bundles/wshcmshtml/css/custom.css' filter='cssrewrite' %} {% endstylesheets %}`

正如我在文档中读到的那样，当assetis:use_controller 设置为true 控制器应该负责更新在我的包中编辑的css 文件？但是不，我必须在每次更改时运行 app/console assets:install (assetic:dump 不做任何事情)。

我想念的是我的工作流程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:22:37.747

利用

```
app/console assets:install --symlink web 
```

在开发环境中。它将创建指向您的资产的符号链接，而不是复制它们，并且每次更改都需要更新它们。

# php - 如何使用 PHP 从 SFTP 服务器下载文件

> ID：16145779
> 
> 赞同：3
> 
> 时间：2013-04-22T11:13:47.123
> 
> 标签：php, download, sftp, phpseclib

我希望允许用户直接从 sftp 服务器下载文件，但在浏览器中。

我找到了读取文件和回显字符串的方法（使用 ssh2.sftp 或 phpseclib 的连接），但我需要下载而不是读取。

此外，我还看到了建议从 sftp 服务器下载到 Web 服务器的解决方案，然后从 Web 服务器使用 readfile() 到用户的本地磁盘。但这意味着两个文件传输，如果文件很大，我想这会很慢。

可以*直接*从sftp下载到用户盘吗？

为任何回应干杯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T17:11:34.653

如果您将文件的直接链接添加到您的 html（即下载文本），则不需要任何 php 以允许用户直接从 SFTP 服务器下载。当然，如果您不想公开 ftp 服务器的凭据，这将不起作用。

如果您希望通过服务器从 SFTP 中提取文件，根据定义，您必须先将文件下载到服务器，然后再将其发送回用户浏览器。

为此，有很多很多的解决方案。最少的开销可能来自使用 [phpseclib](http://phpseclib.sourceforge.net/)，如下所示

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

//adds the proper headers to tell browser to download rather than display
header('Content-Type: application/octet-stream');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=\"filename.remote\""); 

// outputs the contents of filename.remote to the screen
echo $sftp->get('filename.remote');
?> 
```

不幸的是，如果文件比服务器/php 配置允许的内存大，那么这会导致问题。

如果你想更进一步，你可以试试

```
//adds the proper headers to tell browser to download rather than display
header('Content-Type: application/octet-stream');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=\"filename.remote\""); 

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "sftp://full_file_url.file"); #input
curl_setopt($curl, CURLOPT_PROTOCOLS, CURLPROTO_SFTP);
curl_setopt($curl, CURLOPT_USERPWD, "$_FTP[username]:$_FTP[password]");
curl_exec($curl);
curl_close($curl); 
```

更多关于使用 cURL 的信息可以在[PHP 手册文档](http://www.php.net/manual/en/book.curl.php)中找到。使用 curl_exec() 而不将 CURLOPT_RETURNTRANSFER 选项设置为 true 会导致 curl 将输出（文件）直接发送到浏览器。

# javascript - 仅当在块外单击时才关闭悬停 div

> ID：16145790
> 
> 赞同：0
> 
> 时间：2013-04-22T11:14:09.087
> 
> 标签：javascript, jquery, css

当您将鼠标悬停在文本登录（黄色）上时，我有一个登录框（蓝色）。当您进入登录框时，该框保持打开状态，但在您离开时它会关闭（鼠标位于绿色区域）。

这是我当前 css 的预期行为（使用悬停和显示：无/块）

即使您进入绿色区域，我也希望登录框（蓝色）保持打开状态。但是当您单击绿色区域时，登录框（蓝色）会关闭（显示：无）

我想这只能通过 javascript/jQuery 实现，但我不知道怎么做。谁能帮我这个？

不要担心 div id 和类。我将根据我的需要更改代码。

![在此处输入图像描述](https://i.stack.imgur.com/OI0FP.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:01:45.543

试试这个[http://jsfiddle.net/steelywing/gnyyB/](http://jsfiddle.net/steelywing/gnyyB/)

```
$('#main').mouseenter(function () {
    $('#menu').show();
});

// To prevent hide #menu when click on #main
$('#main').click(function (e) {
    e.stopPropagation();
});

// Click outsite of #menu
$('html').click(function () {
    $('#menu').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:16:00.370

您可以使用

```
 function example(){  

   var divId = document.getElementById("divId");

   divId.style.display = "block";

  } 
```

这`divId`是蓝色 divId 并`onhover`为绿色 div 调用此函数。

# javascript - typeof a == 'undefined' vs typeof a === 'undefined'

> ID：16145794
> 
> 赞同：5
> 
> 时间：2013-04-22T11:14:30.660
> 
> 标签：javascript, undefined, typeof

据我了解，检查未定义变量的首选方法是`typeof a === 'undefined'`.

但为什么会更好`typeof a == 'undefined'`呢？哪些地方会失败？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T11:16:11.900

在这种情况下，since`typeof`总是会给你一个字符串：它没有更好（也没有更糟）。它没有实际的区别。

一般来说， using是首选*，*`===`因为它会强制您明确说明您的类型，并避免在 JavaScript 的类型解析规则不直观时获得您不期望的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T11:21:01.737

`==`和之间的区别在于`===`执行`==`转换。因此，例如 1 将是`==`to`'1'`但不是`===`to `'1'`。当您检查时首选该方法的原因`undefined`是因为在 JavaScript 中存在已知的比较陷阱。

最常见的：

```
''        ==   '0'           //false
0         ==   ''            //true
0         ==   '0'           //true
false     ==   'false'       //false
false     ==   '0'           //true
false     ==   undefined     //false
false     ==   null          //false
null      ==   undefined     //true
" \t\r\n" ==   0             //true 
```

因此，`===`您可以避免`null == undefined`问题，这可能会导致难以发现的错误。这就是为什么你应该使用`==`而不是`===`. 因为`===`没有在后台执行任何转换，所以它也是一个更快的操作。

在这种特定情况下，它不会产生影响。无论你使用`typeof a == 'undefined'`还是`typeof a === 'undefined'`输出都是一样的，没有错误。那是因为`typeof`返回一个字符串。但是，操作会更快，因此您的性能提升可以忽略不计。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T11:16:44.437

因为`typeof`只会返回字符串，所以用 . 比较两个字符串是安全的`==`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T11:18:34.397

`==`和之间有很大的区别`===`（[在这里查看）](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

但是，由于 typeof**总是**返回字符串，所以可以使用它。

# mysql - 如何估计 MySQL 查询所需的临时磁盘空间？

> ID：16145796
> 
> 赞同：6
> 
> 时间：2013-04-22T11:14:35.367
> 
> 标签：mysql, sql, select, diskspace

我有一组非常复杂的`SELECT`查询，它们使用大量磁盘空间（我`df -h`在运行时看到了这一点）。*有没有办法在开始查询之前*估计查询所需的临时磁盘空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:05:01.473

您可以使用 EXPLAIN 关键字来描述您的连接将如何影响将连接在一起的行数。如果密钥不存在，这也将帮助您正确使用密钥。Explain 会在它认为需要使用临时表（磁盘空间）时告诉您。根据要连接的行的大小，您可以粗略估计您的磁盘空间需求。

请参阅此处解释的文档：

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

基本上，只需将“解释”添加到您的选择查询中即可获得信息输出。我相信您也可以根据需要以编程方式执行此操作，并在实际代码中使用结果，例如您需要计算（估计）大型查询运行时间并将其显示给用户，然后再继续。

# php - 插入不存在的地方

> ID：16145798
> 
> 赞同：0
> 
> 时间：2013-04-22T11:14:42.917
> 
> 标签：php, mysql, pdo

我正在尝试将组名插入到我的数据库中。由于它们是用户组，我只想插入一次，所以如果我不小心再次插入它们，它应该拒绝它，因为它已经存在。我也在使用 PDO 语句。

```
// groups
$db->query("CREATE TABLE IF NOT EXISTS groups ( ID INT NOT NULL AUTO_INCREMENT, 
                    name VARCHAR(200),
                    primary key (ID)
            )");        

// Fill tables

//Groups
$db = connectDatabase();    
$name = 'Administrator';
$query = $db->prepare("INSERT INTO groups (name) SELECT :name WHERE NOT EXISTS (SELECT * FROM groups WHERE name = :name)");
$query->bindParam(':name', $name);
$query->execute();

$name = 'Moderator';
$query = $db->prepare("INSERT INTO groups (name) SELECT :name WHERE NOT EXISTS (SELECT * FROM groups WHERE name = :name)");
$query->bindParam(':name', $name);
$query->execute(); 
```

由于某种原因，它没有向表组添加任何内容。谁能帮我这个？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:25:04.923

为什么不直接取名**UNIQ**呢？

```
$db->query("CREATE TABLE IF NOT EXISTS groups ( ID INT NOT NULL AUTO_INCREMENT, 
                    name VARCHAR(200),
                    primary key (ID),
                    UNIQUE KEY `name` (`name`)
            )"); 
```

然后进行[INSERT IGNORE](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

```
$db = connectDatabase();    
$name = 'Administrator';
$query = $db->prepare("INSERT IGNORE INTO groups (name) VALUES (:name)");
$query->bindParam(':name', $name);
$query->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:19:25.637

你忘了`FROM`这里

```
INSERT INTO groups (name) SELECT :name 
FROM groups WHERE NOT EXISTS 
(SELECT * FROM groups WHERE name = :name) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T11:20:38.243

尝试关注

```
If Not Exists(select * from groups where name=:name)
Begin
insert into groups(name) values (:name)
End 
```

# java - 生成自定义 Java Getter 和 Setter

> ID：16145800
> 
> 赞同：0
> 
> 时间：2013-04-22T11:14:51.120
> 
> 标签：java, eclipse, setter, getter

我想生成自定义 getter 和 setter，这样当我将这些实例保存到 SQL 数据库中时，我可以更好地处理变量。我想生成类似的东西：

```
public class Test extends SQLEntry {

    private static final String NAME = "Name";

    public String getName() {
        return get(NAME);
    }

    public void setName(String name) {
        set(NAME, name);
    }
} 
```

但正如我在 Eclipse 中看到的，它只生成以下代码：

```
public class Test {

    private String name;

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

有没有什么插件可以做到的？还是我错过了什么？我有 20 个类，我不会手动编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:56:40.550

我不知道你为什么需要这个，但这里是自定义 Getter 和 Setter 的方法。您可以通过转到首选项 > java > 代码样式 > 代码模板并选择代码来更新所有生成的 setter 和 getter，然后编辑 Getter body 和 Setter body 并输入：

**获取器主体：** return get(${field});

**设置器主体：** set(${field}, ${param});

让我知道这是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:16:09.423

我建议您不要按照您的描述进行操作，而应该使用[Spring Data](http://www.springsource.org/spring-data)。具体来说，包`BeanPropertyRowMapper`中的类`org.springframework.jdbc.core`会做你想做的事。

[在Spring API 文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/BeanPropertyRowMapper.html)中阅读更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:16:30.950

没有其他插件可用！

一些插件如何编写特定于您的业务逻辑的代码！

您必须为所有类中的 setter 和 getter 手动编写代码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-18T12:53:34.037

尝试[一次写入](https://code.google.com/p/write-it-once/)。基于模板的代码生成器。[您使用Groovy](http://groovy.codehaus.org/Groovy+Templates)编写自定义模板，并根据 java 反射生成文件。这是生成任何文件的最简单方法。您可以通过生成 AspectJ 或 java 文件、基于 JPA 注释的 SQL、基于枚举的插入/更新等来制作 getters/settest/toString。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-04T00:20:51.330

最后我发现最好还是自己做...

如果您喜欢编写代码，那么您将最喜欢这个解决方案。

```
public class CodeGenerator {

private final static String ENCODING = "UTF-8";
private final static String FILE_NAME = "File.txt";

public static void main(String[] args) {
    try {
        ArrayList<Carriage> names = getNames();
        for (Carriage c : names) {
            createSetter(c.name, c.capitalName);
            createGetter(c.name, c.capitalName);
        }
    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    }
}

private static ArrayList<Carriage> getNames() throws FileNotFoundException {
    File file = new File("/");
    InputStream is = CodeGenerator.class.getResourceAsStream(FILE_NAME);
    Scanner s = new java.util.Scanner(is, ENCODING).useDelimiter("\\A");
    String content = s.next();
    String[] lines = content.split(System.getProperty("line.separator"));
    ArrayList<Carriage> ret = new ArrayList<Carriage>();
    for (String line : lines) {
        line = line.replaceAll("\\r", "");
        int firstCapitalIndex = line.indexOf("String") + 7;
        int secondCapitalIndex = line.indexOf(" ", firstCapitalIndex);
        int firstIndex = line.indexOf("\"") + 1;
        int secondIndex = line.indexOf("\"", firstIndex + 1);
        Carriage c = new Carriage();
        c.name = line.substring(firstIndex, secondIndex);
        c.capitalName = line.substring(firstCapitalIndex, secondCapitalIndex);
        ret.add(c);
    }
    return ret;
}

public static void createSetter(String name, String capitalName) {
    String str = "public void set" + name + "(String val) {\n"
            + "\tset(" + capitalName + ", val);\n"
            + "}\n";
    System.out.println(str);
}

public static void createGetter(String name, String capitalName) {
    String str = "public String get" + name + "() {\n"
            + "\treturn (String) get(" + capitalName + ");\n"
            + "}\n";
    System.out.println(str);
} 
```

运输：

```
package codegenerator;

public class Carriage {
    public String name;
    public String capitalName;
} 
```

对于 File.txt，我只是复制所有定义的常量并运行生成器...

```
public static final String NAME = "Name";
public static final String PHONE = "Phone";
public static final String EMAIL = "Email";
public static final String ADDRESS_1 = "Address1";
public static final String ADDRESS_2 = "Address2";
public static final String ADDRESS_3 = "Address3";
public static final String ICO = "Ico";
public static final String DIC = "Dic";
public static final String ADMIN_LOGIN = "AdminLogin";
public static final String ADMIN_PASSWORD = "AdminPassword";
public static final String LANGUAGE = "Language";
public static final String CODE = "CODE";
public static final String MONTHLY_PAYMENT = "MonthlyPayment"; 
```

# jquery - 检查数组中的特定值

> ID：16145807
> 
> 赞同：0
> 
> 时间：2013-04-22T11:15:18.613
> 
> 标签：jquery, html, css

我创建了一个下拉列表并在数组中获取选项标签值。我想检查文本框值是否与数组值匹配。

HTML：

```
<select>
<option>test1</option>
<option>test2</option>
<option>test3</option>
<option>test4</option>
</select>
<input type="text" id="txt" /> //textbox
<input class="bt" type="button" id="btntest" value="Check for the Value"> 
```

我使用以下 Jquery获得了**数组：**

```
var values = $('select').children('option').map(function (i, e) 
{
return e.innerText;
}); 
```

现在**values**变量将结果保存为**test1,test2,test3,test4**

问题：如果用户在文本框（**txt ）中输入“** **test2** ” ，如何检查数组中是否有**test2**等等。如果用户输入了除数组值之外的任何内容，则应显示错误消息。

 ****请找到[小提琴](http://jsfiddle.net/ismailvtl/9LAab/4/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:17:26.627

有一个内置的 jquery 函数 inArray [http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

```
jQuery.inArray("test2", values) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:17:51.267

您可以使用 jquery [InArray](http://api.jquery.com/jQuery.inArray/)

```
jQuery.inArray( $('#txt').val() , values) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:18:29.397

使用[`jQuery.inArray`](http://api.jquery.com/jQuery.inArray/).

```
if( jQuery.inArray( yourValue, yourArray) ){ //doStuff } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:18:37.063

[小提琴](http://jsfiddle.net/mohammadAdil/9LAab/7/)

```
$('#btntest').click(function () {
   if ($.inArray($('#txt').val(), values) > -1) {
      console.log("available");
   }else{
     console.log("not available");
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T11:30:25.780

据我了解，您需要自动选择该选项，这样更容易

```
var value = $('#txt').val();
$('option', 'select').filter(function(){return this.innerText == value;}).prop("selected", true) 
```****

# prism - 在 Prism 中使用 MEF 替换默认的 IModuleInitializer

> ID：16145810
> 
> 赞同：0
> 
> 时间：2013-04-22T11:15:24.790
> 
> 标签：prism, mef

我正在尝试自行覆盖实现 Mefmoduleinitializer，如 [使用 MEF 替换默认类型](http://msdn.microsoft.com/en-us/library/gg430866%28v=pandp.40%29.aspx)中所述。我的课程（在 Shells 程序集中）是：

```
[Export(typeof(IModuleInitializer))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class SafeMefModuleInitializer: MefModuleInitializer
{
    private readonly IEventAggregator _eventAggregator;
    private readonly ILoggerFacade    _loggerFacade;

    [ImportingConstructor()]
    public SafeMefModuleInitializer(IServiceLocator serviceLocator, ILoggerFacade loggerFacade, DownloadedPartCatalogCollection downloadedPartCatalogs, AggregateCatalog aggregateCatalog, IEventAggregator eventAggregator) 
    : base(serviceLocator, loggerFacade, downloadedPartCatalogs, aggregateCatalog)
    {
        _eventAggregator = eventAggregator;
        _loggerFacade = loggerFacade;
    }

    public override void HandleModuleInitializationError(ModuleInfo moduleInfo, string assemblyName, Exception exception)
    {
        try {
            base.HandleModuleInitializationError(moduleInfo, assemblyName, exception);
        }
        catch (ModuleInitializeException ex) {
            _loggerFacade.Error(
                string.Format(
                    "Module {0} failed to load and has been disabled.", moduleInfo.ModuleName
                ), 
                ex
            );
            _eventAggregator.GetEvent<ModuleLoadErrorEvent>().Publish(ex);
        }
    }
} 
```

在引导程序中：

```
 protected override void ConfigureAggregateCatalog()
    {
        base.ConfigureAggregateCatalog();

        AggregateCatalog.Catalogs.Add(
            new DirectoryCatalog(".")
        );
        AggregateCatalog.Catalogs.Add(
            new DirectoryCatalog(Properties.Settings.Default.ModuleCatalogPath)
        );
    } 
```

运行时我收到 MEF 错误：

```
"More than one export was found that matches the constraint: ContractName
Microsoft.Practices.Prism.Modularity.IModuleInitializer RequiredTypeIdentity
Microsoft.Practices.Prism.Modularity.IModuleInitializer" 
```

如何正确地将 MefModuleInitializer 替换为 MEF CompositionContainer 中的 SafeMefModuleInitializer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:12:40.110

我认为您需要在添加新的 MefModuleInitializer 后调用基本方法

```
protected override void ConfigureAggregateCatalog()
{
    AggregateCatalog.Catalogs.Add(
        new DirectoryCatalog(".")
    );
    AggregateCatalog.Catalogs.Add(
        new DirectoryCatalog(Properties.Settings.Default.ModuleCatalogPath)
    );

    base.ConfigureAggregateCatalog();
} 
```

# android - MapFragment 和 Mapview API v2

> ID：16145816
> 
> 赞同：2
> 
> 时间：2013-04-22T11:15:45.620
> 
> 标签：android, map, android-mapview, mapfragment

我有一个问题，我可以使用 MapView 并正确地看到地图：

```
 <com.google.android.gms.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"/> 
```

但是当我使用 MapFragment 时，应用程序崩溃......错误膨胀类片段：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
```

main.java 它只是：

```
public class situar_mapav3 extends android.support.v4.app.FragmentActivity{

    public situar_mapav3() {

    }
        @Override
        protected void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
     } 
```

任何想法 ？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:01:10.840

您必须扩展 com.google.android.gms.maps.SupportMapFragment 而不是 android.support.v4.app.FragmentActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:28:07.960

尝试使用此布局，并请发布 logcat 日志，将有助于更好地理解问题

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapParent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        class="com.google.android.gms.maps.SupportMapFragment" />
</LinearLayout> 
```

# joomla - 在服务器中打开模态窗口

> ID：16145821
> 
> 赞同：0
> 
> 时间：2013-04-22T11:15:52.480
> 
> 标签：joomla, joomla2.5

大家好，我在 joomla 3.0 中有一个模态窗口！

我像这样将路由器传递给javascript

```
 <?php $link    =JURI::root().'index.php?option=com_projects&view=proyectos&format=raw&task=todosProyecto&id='. $item->id;?>

            <li class="item" data-id="id-<?php echo $item->id ?>" data-type="<?php echo $item->categoria ?>">
                <a href="#modal" id="<?php echo $link;?>" role="<?php echo $item->id ?>" class="picture" data-toggle="modal">
                    <img src="<?php echo JURI::root()?><?php echo $item->imagen_portada; ?>"/></a>
                <p class="titulo"><?php echo $item->nombre; ?></p>
                   <p> <?php echo $item->municipio; ?>(<?php echo $item->pais; ?>)<br><?php echo $item->year; ?>
                </p> 
```

在本地，当我打开模态窗口时它运行良好，但在服务器中，模态窗口向我显示该组件的 index.php 视图。

我认为我的问题就在这里，当我接受我有这个模型的请求时。

```
 public function elegirSeleccionados(){
        $this->pagination = $this->get('pagination');
        $this->items = $this->get('recientes');
        $this->list = $this->get('list');
        parent::display();
    } 
```

但是 $this->get('list'); 是空的，所以我必须分配一个空值来列出。我就这样变了。。

```
 $this->list =  $this->items; 
```

但不要工作！

任何的想法！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:47:46.723

这段代码在哪里？

第一部分看起来像**Layout** ( `views\proyectos\tmpl\default.php`)，第二部分看起来像**View** ( `views\proyectos\view.html.php`)。

如果是这样，我会说您并没有真正从模型中加载视图中的项目。尝试使用`$this->items = $this->get('Items');`

但这并不能解释服务器和本地主机上的不同结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T06:28:10.090

大家好，我解决了这个问题......我的视图名称有一个 Camelcase，例如 itemId 和 joomla 尝试查找 itemid，所以不要找到视图并在模式中显示默认视图。

所以我在没有camelCase的情况下更改了文件名，现在可以工作了。！

# ruby-on-rails - 将 Facebook Javascript SDK 添加到我的 Rails 应用程序中

> ID：16145827
> 
> 赞同：1
> 
> 时间：2013-04-22T11:16:02.273
> 
> 标签：ruby-on-rails, facebook-javascript-sdk

我正在尝试使用 Facebook Javascript SDK，现在我只是将此代码粘贴到具有类似按钮的 erb 模板中：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

但是，在 Facebook 开发者文档中，据说在 body open 标签之后直接使用类似这样的内容：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'YOUR_APP_ID',                        // App ID from the app dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });

    // Additional initialization code such as adding Event Listeners goes here
  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script> 
```

所以，我的问题是：

-> 我应该把这段代码放在哪里？在我的布局或使用 jQuery 的 Javascript 文件中执行所有这些逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T01:02:11.170

将代码放入主模板的底部，例如 application.html.erb 或 base.html.erb [如果您有从应用程序控制器继承的基本控制器]

# xpages - 为什么我的 fileDownload 控件即使在读取模式下也显示垃圾箱？

> ID：16145829
> 
> 赞同：0
> 
> 时间：2013-04-22T11:16:03.697
> 
> 标签：xpages

我认为这是一个相当奇怪的问题，我确信我自己在这里犯了一个错误：

在我的一个应用程序中，我展示了一个绑定到底层 NotesDocument 中的 Richtext 字段的 fileDownload 控件。控件的属性 a 设置为*Hide if no attachments*、 show *size*、*type*和*created*以及*allow delete*。控件本身位于自定义控件内，是另一个自定义控件的一部分，类似于：

Xpage.xsp
- ccContainer
- - ccInnerDoc

容器和“内部”文档的文档数据源在 ccContainer 的根目录中定义并传递到内部文档中。内部文档的数据源是根据文档选择计算的，它的 igenoreRequestParams 属性设置为**false**，以便我可以在给定面板等中显示所选数据源的内容。

所选文档首先以阅读模式打开，我可以使用按钮将其设置为编辑模式。

现在的问题是，无论文档在哪种模式下打开，我的文件下载控件**总是**显示删除图标（垃圾桶）。它不仅显示图标，它还通过询问我是否真的要删除来假装工作然后真正删除文件附件。只是这种更改当然不能存储到数据源中，因为它仅在读取模式下打开。

我确信这种行为是我的应用程序中其他东西的一些副作用（在某种程度上，我在一个普通的新数据库中重建了它，直到现在无法重现它），但我对这可能是什么。

任何可能导致这种情况的暗示都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:04:55.900

代替@Frantisek Kossuth，我自己回答：请参阅[动态计算文件下载xpages的allowDelete属性](https://stackoverflow.com/questions/14746894/compute-dynamically-the-allowdelete-property-of-file-download-xpages)

再次感谢弗兰蒂塞克！

# timer - 访问模型特定寄存器 IA32_APERF / IA32_MPERF，以测量实际 CPU 频率

> ID：16145835
> 
> 赞同：1
> 
> 时间：2013-04-22T11:16:13.810
> 
> 标签：timer, cpu, intel, frequency, privileges

据我了解，要测量实际运行的 CPU 频率，我需要访问模型特定寄存器 (MSR) IA32_APERF 和 IA32_MPERF（[汇编 CPU 频率测量算法](https://stackoverflow.com/questions/65095/assembly-cpu-frequency-measuring-algorithm)）。

但是，对 MSR 寄存器的访问是特权的（通过 rdmsr 指令）。有没有另一种方法可以做到这一点？我的意思是，例如，通过我可以在我的代码中调用的设备驱动程序/库。对我来说，读取寄存器是特权似乎很奇怪。我认为只有给他们写信才是特权。

注意：rdtsc 指令不考虑涡轮增压，因此无法报告实际工作频率

编辑：我对 Linux 和/或 Windows 的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T05:08:53.640

1.  你是对的，找到链接中第二个答案中描述的平均 cpu 频率的正确方法。

2.  要在 linux 上阅读 msrs，您可以使用工具[RDMSR](http://manpages.ubuntu.com/manpages/lucid/man1/rdmsr.1.html)。

3.  唯一可能在该答案中误导的是**maxfrequency**。它不应该是最大频率，而是标称频率（最大非涡轮频率），因为 MPERF 计数器以最大非涡轮频率计数。您可以从 MSR 0xCE 位 8:15 ( [ref](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-manual-325462.pdf) )获得此频率

# arrays - 如何从另一个数组中删除一个数组的元素？

> ID：16145841
> 
> 赞同：4
> 
> 时间：2013-04-22T11:16:24.643
> 
> 标签：arrays, matlab

我有两个数组：

```
A=[1 1 2 2 3 3 3];
B=[1 3]; 
```

是否有任何功能可以删除`B`from中包含的元素`A`？

结果应该是

```
C=[1 2 2 3 3]; 
```

顺序并不重要，但如果有更具体的元素，比如两次`1`in `A`，那么我需要删除 (from `A`) 的操作，只要这些特定元素中的许多在`B`( 在这种情况下，只有一个`1`和一个`3`; 表示其他`1`和`3`应保留在最终产品中`C`）。这个函数应该类似于`setdiff`，不同之处在于它应该处理数组元素的多个实例。这个类比可以成立，因为 my`B`只包含`A`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:28:33.643

For循环解决方案：

```
C = A;    
for ii = 1:length(B)       
   C(find(C == B(ii), 1,'first')) = [];
end 
```

结果

```
C =

     1     2     2     3     3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T14:46:50.787

[`accumarray`](https://www.mathworks.com/help/matlab/ref/accumarray.html)这是使用and的矢量化解决方案[`repelem`](https://www.mathworks.com/help/matlab/ref/repelem.html)：

```
maxValue = max([A B]);
counts = accumarray(A(:), 1, [maxValue 1])-accumarray(B(:), 1, [maxValue 1]);
C = repelem(1:maxValue, max(counts, 0)); 
```

您的示例数据的结果`A = [1 1 2 2 3 3 3]; B = [1 3];`：

```
C =

     1     2     2     3     3 
```

这甚至适用于值`B`不在`A`(like `B = [1 4];`) 中的值或给定值`B`大于 in `A`(like `B = [1 1 1];`) 的情况。

**注意：**上面的工作因为`A`并且`B`包含整数。如果它们要包含浮点值，您可以首先使用[`unique`](https://www.mathworks.com/help/matlab/ref/unique.html)and将唯一值映射到整数[`ismember`](https://www.mathworks.com/help/matlab/ref/ismember.html)。假设我们有以下示例数据：

```
A = [0 0 pi pi 2*pi 2*pi 2*pi];
B = [0 2*pi]; 
```

这是可以处理此问题的上述代码的变体：

```
uniqueValues = unique([A B]);
[~, A] = ismember(A, uniqueValues);
[~, B] = ismember(B, uniqueValues);
maxValue = max([A B]);
counts = accumarray(A(:), 1, [maxValue 1])-accumarray(B(:), 1, [maxValue 1]);
C = uniqueValues(repelem(1:maxValue, max(counts, 0))); 
```

结果：

```
C =

         0    3.1416    3.1416    6.2832    6.2832  % [0 pi pi 2*pi 2*pi] 
```

# android - Android 识别有效的 Google 推荐 URL

> ID：16145842
> 
> 赞同：0
> 
> 时间：2013-04-22T11:16:26.590
> 
> 标签：android, google-play

以下是从 Google 获取推荐参数的有效 URL：

```
https://play.google.com/store/apps/details?id=com.abcd.mypackage&referrer=utm_source%3D0%26utm_id%3D1%26utm_campaign%3D2 
```

以下是没有推荐字符串但 URL 仍然有效并带您到 Google 商店的案例（如果有应用程序）

```
1) https://play.google.com/store/apps/details?id=com.abcd.mypackage&try
2) https://play.google.com/store/apps/details?id=com.abcd.mypackage&
3) https://play.google.com/store/apps/details?id=com.abcd.mypackage 
```

在这种情况下，我们如何处理 URL 或进行一些检查以仅识别有效的推荐 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T22:45:45.193

我不确定我是否理解您的要求，但如果您的意思是如何在安装后在 Android 应用程序中检查它，那么您没有真正的问题。

推荐功能的工作原理如下：

1.  在 android 设备上，url 指向 google play 应用程序。
2.  用户选择安装应用程序。
3.  google play 应用程序检查`referrer`步骤 1 中的 url 中是否存在变量。只有存在时，它才会将`referrer`值广播到应用程序。

由于在您的链接中该`referrer`变量不存在，您的广播接收器将不会得到任何东西，您也没有什么可检查的。

希望它有所帮助

# android - 在 android 的 sdcard 上使用循环更改值保存布局

> ID：16145846
> 
> 赞同：0
> 
> 时间：2013-04-22T11:16:35.893
> 
> 标签：android

嗨，我有一个循环，它迭代以保存具有更改值的布局，对于每次迭代，xml 中的值都是不同的，并且应该在用户单击保存按钮时保存。

```
 String [] sizes = {"A","B","C","D"};
        for (int i = 0; i <= sizes.length-1 ; i++){
            try {
                String x = sizes[i];
                Intent intents = new Intent();
                intents.setClass(Sizes.this, Sizes.class);

                Bundle bundles = new Bundle();
                bundles.putCharSequence("sizes", x);
                intents.putExtras(bundles);
                startActivity(intents);
                doSave();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

每种尺寸都会加载不同的值，我需要将循环中所有值的布局保存在 sdcard 上。我的doSave（）：

```
 public void doSave() throws IOException, InterruptedException {

    RelativeLayout imagevw =(RelativeLayout)findViewById(R.id.sizelayout);
    Bitmap b = Bitmap.createBitmap(imagevw.getWidth(), imagevw.getHeight(), Bitmap.Config.ARGB_8888);

    int weight,height;

    weight =  imagevw.getWidth();

    height =  imagevw.getHeight();

    Bitmap cs = Bitmap.createBitmap(weight, height, Bitmap.Config.ARGB_8888);

    Canvas c = new Canvas(cs);

    c.drawBitmap(b,0,0,null);

    imagevw.draw(c);

    String getDirPath = Environment.getExternalStorageDirectory().getAbsolutePath(); 
    File myDirPath = new File(getDirPath +"/Size");

    if(!myDirPath.exists()){

        myDirPath.mkdir();

    }

    File file1 = new File("/sdcard/size/"+size+"saved image.png");
FileOutputStream fos = new FileOutputStream(file1);

if (fos != null) {

cs.compress(Bitmap.CompressFormat.PNG, 90, fos);

fos.close();
    }

    } 
```

当您保存单个布局时，它保存得很好。问题是当循环完成时，它只会在您单击保存按钮之前使用当前值保存当前布局。这意味着它只保存当前的布局。如何保存每个循环的布局，因为它们具有不同的值。请注意，在该实例中，“ ***size*** +”saved image.png”***大小***是一个捆绑包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:31:51.660

似乎您在`doSave();`不更改 .So 值的情况下调用。因此，`size`所有文件都以相同的名称保存在相同的路径中，因此每个文件都用该名称替换旧文件，最后保留最新的文件。

# java - 二维数组如何避免相同的数字

> ID：16145853
> 
> 赞同：0
> 
> 时间：2013-04-22T11:16:57.170
> 
> 标签：java

晚上好，我想用不同的数字填充一个五 x 五的表格避免表中的数字不超过一次

```
int num;
        int [][] array = new int [5][5];
        Random r = new Random();
        for (int row = 0; row < array.length; row++) {
            for (int col = 0; col < array[row].length; col++) { 
            if(row == 0){
                     num =r.nextInt(15);
                    array[row][col]=num;
            }else if(row == 1){
                     num =r.nextInt(31-16)+16;
                    array[row][col]=num;
            }else if(row == 2){
                     num =r.nextInt(45-31)+31;
                    array[row][col]=num;
            }else if(row == 3){
                     num =r.nextInt(61-46)+46;
                    array[row][col]=num;
            }else if(row == 4){
                     num =r.nextInt(75-61)+61;
                    array[row][col]=num;
            }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:20:51.303

对于每一行，创建一个包含它可以包含的整数的列表，然后打乱列表（使用`Collections.shuffle()`），并保留前 5 个元素。

或者，如果您的目标是为整个表提供不同的元素，请创建一个包含矩阵可以包含的所有整数的单个列表，然后打乱列表，遍历列表以填充您的矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:44:34.757

你可以有一个`HashSet`已经被占用的数字。添加到此和重复是不允许的。如果需要，使用该`toArray()`方法获取数组对象。

如果您仍想使用数组，则如果当前集合中不存在该值，则该`add()`方法`HashMap`返回，因此如果则添加到表中，如果则不添加。`true``true``false`

这允许您将元素添加到表中而无需随机播放，即，如果您想要不断更新表并且不必在显示之前等待完整集。

那是假设您只希望数字对于表来说是唯一的，而不仅仅是行位置。

# mercurial - 检查一个 url 是否是一个 mercurial 存储库（如 git ls-remote）

> ID：16145854
> 
> 赞同：8
> 
> 时间：2013-04-22T11:16:58.500
> 
> 标签：mercurial

如何检查 URL 是否指向 mercurial 存储库？使用 git，我会使用`git ls-remote $url`并检查返回值。hg有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T21:39:38.387

您可以使用`hg identify`它：它可以针对远程存储库运行，如果给定的路径不是存储库，Mercurial 将中止并退出代码 255。此存储库存在：

```
$ hg identify https://bitbucket.org/mg/mercurial-talk; echo $?
7788b512c5bd
0 
```

这个没有：

```
$ hg identify https://bitbucket.org/mg/git-talk; echo $?
abort: HTTP Error 404: Not Found
255 
```

您可能希望将 stdout 和 stderr 都重定向到`/dev/null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:57:50.987

AFAIK，ls-remote（在 repo 中使用）和 Git-URL 显示从本地到此 URL 的引用，是吗？

如果您想知道 Mercurial，它知道哪些远程存储库（*不用于*push|pull，只*知道*），您可以使用`hg paths`

如果你想要一些随机的 URL 定义，是否是 Mercurial repo，你至少可以尝试从这个 URL 克隆

# c++ - 带有此指针的 Memset POD 结构

> ID：16145857
> 
> 赞同：2
> 
> 时间：2013-04-22T11:17:05.153
> 
> 标签：c++

我有很多带有很多成员变量的 POD 结构。我没有在构造函数中初始化每个成员，而是简单地使用 memset。这在 C++ 中有效吗？

```
struct foo
{
    foo() { std::memset(this, 0, sizeof (foo)); }

    int var1;
    float var2;
    double var3;
    // more variables..
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:22:52.797

它不能保证工作，因为 C++ 标准允许实现，其中所有位为零是`float`or的陷阱表示`double`。因此，在此类实现中阅读这些成员将具有未定义的行为。

这同样适用于实现可能放在数据成员之间的任何填充字节——修改它们要么是未定义的行为，要么将对象置于未定义的状态，在使用时具有未定义的行为。我忘了哪个。

但在实践中，它适用于我知道的所有实现。

其他答案表明您的课程是非 POD (C++03) 和非平凡 (C++11)。问题是，即使您删除了构造函数并`memset`从其他地方调用它*仍然*不能保证按标准工作。但是，如果您确实删除了构造函数，则可以使用聚合初始化：

```
foo f = {0}; 
```

并且保证将所有成员初始化为零值（无论是否由所有位为零表示）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:21:17.847

根据标准，您的结构不是 POD 类型，因此不允许使用 memset。

# 9班

> 平凡类是具有默认构造函数 (12.1)、**没有非平凡默认构造函数**且可平凡复制
> 的类 10 POD struct108 是一个非联合类，它既是平凡类又是标准布局类，并且没有非 POD 结构、非 POD 联合（或此类类型的数组）类型的非静态数据成员。

由于您的类具有非平凡的默认构造函数，因此它不再是平凡的，因此不是 POD 类型。
很可能会在大多数编译器上工作，不能保证通过。

# android - 需要 UI Watcher 示例代码

> ID：16145858
> 
> 赞同：2
> 
> 时间：2013-04-22T11:17:08.093
> 
> 标签：android, automation, android-uiautomator, ui-testing

嗨自动化专家，

网址：http: [//developer.android.com/tools/help/uiautomator/UiWatcher.html](http://developer.android.com/tools/help/uiautomator/UiWatcher.html)

**如何实现这一点：** *您可以使用此方法来处理阻止测试继续进行的已知阻塞问题。例如，您可以检查是否出现阻止测试的对话框，然后关闭对话框或执行一些其他适当的操作以允许测试继续*

请在尝试播放视频并继续我们的测试时说“在弹出的“无法播放此视频”上按 OK”的示例代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:16:09.497

Anvesh，以下网站有一个如何使用 UI Watcher 的完整示例[http://everybodytests.blogspot.com/2012/11/uiautomator-and-watchers-adding-async.html](http://everybodytests.blogspot.com/2012/11/uiautomator-and-watchers-adding-async.html)

仅供参考，这是我在 Google 上搜索时的第一个结果`uiwatcher uiautomator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T16:19:47.127

您的观察者由`UiDevice`类管理。实现观察者的典型逻辑流程遵循以下模式：

1.  定义新的观察者
2.  注册您的观察者
3.  运行你的观察者

代码：

```
package com.watcherDemoTests;

import android.util.Log;

import com.android.uiautomator.core.UiCollection;
import com.android.uiautomator.core.UiDevice;
import com.android.uiautomator.core.UiObject;
import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.core.UiScrollable;
import com.android.uiautomator.core.UiSelector;
import com.android.uiautomator.core.UiWatcher;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;

public class WatcherDemoTestExample1 extends UiAutomatorTestCase {

private static final String LOG_TAG = "WatcherDemoEx1";
private static final String MYOKCANCELDIALOGWATCHER_STRING = "OkCancelDialogWatcher";

public void testWatcherDemoTestExample1() throws UiObjectNotFoundException {
Log.w(LOG_TAG, "Starting our test!");

// Simulate a short press on the HOME button based on the sample test case:
//
// http://developer.android.com/tools/testing/testing_ui.html#sample
//
getUiDevice().pressHome();
// We're now on the home screen. Launch the All Apps screen.
UiObject allAppsButton = new UiObject(new UiSelector().description("Apps"));
// Simulate a click to bring up the All Apps screen.
allAppsButton.clickAndWaitForNewWindow();
// In the All Apps screen, the Snow Report app should be in the Apps tab
// assuming it is installed prior to starting this test
UiObject appsTab = new UiObject(new UiSelector().text("Apps"));
// Simulate a click to enter the Apps tab.
appsTab.click();
// Next, in the apps tabs, we can simulate a user swiping until they
// come across the Snow Report app icon. Again, swiped from the
// sample test case.
UiScrollable appViews = new UiScrollable(new UiSelector().scrollable(true));
// Set the swiping mode to horizontal (the default is vertical)
// This is only compatible with API lvl 17\. Short of that it will crash
// with a "method not found" failure.
appViews.setAsHorizontalList();
// Create a UiSelector to find the Snow Report app and simulate
// a user click to launch the app.
UiObject apiDemoApp = appViews.getChildByText(new UiSelector().className(android.widget.TextView.class.getName()), "API Demos");
apiDemoApp.clickAndWaitForNewWindow();
/////////////////////////////////////////////////////////////////////
// This concludes the section devoted to simply launching the app. //
/////////////////////////////////////////////////////////////////////

// Define watcher
UiWatcher okCancelDialogWatcher = new UiWatcher() {
@Override
public boolean checkForCondition() {
UiObject okCancelDialog = new UiObject(new UiSelector().textStartsWith("Lorem ipsum"));
if(okCancelDialog.exists()){
Log.w(LOG_TAG, "Found the example OK/Cancel dialog");
UiObject okButton = new UiObject(new UiSelector().className("android.widget.Button").text("OK"));
try {
okButton.click();
} catch (UiObjectNotFoundException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
return (okCancelDialog.waitUntilGone(25000));
}
return false;
}
};
// Register watcher
UiDevice.getInstance().registerWatcher(MYOKCANCELDIALOGWATCHER_STRING, okCancelDialogWatcher);

// Run watcher
UiDevice.getInstance().runWatchers();

/*
* This test demonstrates UiAutomator Watchers using the Emulator's
* API Demos App/Alert Dialogs
*
* With this, the watcher will be set in advance to identify when
* an alert dialog is present and cancel it. The test will click
* on at least one item in the list.
*/
// Get Api Demos list
UiCollection apiDemoList = new UiCollection(new UiSelector().className("android.widget.ListView"));
// Click on App
UiObject appTextView = apiDemoList.getChildByText(new UiSelector()
.className(android.widget.TextView.class.getName()),
"App");
appTextView.clickAndWaitForNewWindow();
// Get App demo list
UiCollection appDemoList = new UiCollection(new UiSelector().className("android.widget.ListView"));
// Click on Alert Dialogs
UiObject alertDialogTextView = appDemoList.getChildByText(new UiSelector()
.className(android.widget.TextView.class.getName()), "Alert Dialogs");
alertDialogTextView.clickAndWaitForNewWindow();

// Click on button with text "OK Cancel dialog with a message"
UiObject okCancelDialogButton1 = new UiObject(new UiSelector().text("OK Cancel dialog with a message"));
okCancelDialogButton1.click();
// Click on button with text "OK Cancel dialog with a long message"
// This is where the watcher should save our bacon. Yes, this is a poorly written test case, I know.
// Just go with me here, I'm making a point about Watchers. If the dialog from the previous button
// press is still in place, this new selector will fail to find an object containing that text.
// Because the watcher is there, the dialog gets closed and we're all good.
UiObject okCancelDialogButton2 = new UiObject(new UiSelector().text("OK Cancel dialog with a long message"));
okCancelDialogButton2.click();
}

} 
```

以下网站有一个如何使用 UI Watcher 的完整示例[http://everybodytests.blogspot.com/2012/11/uiautomator-and-watchers-adding-async.html](http://everybodytests.blogspot.com/2012/11/uiautomator-and-watchers-adding-async.html)

# xslt - 选择当前元素和当前元素的下一个元素之间的所有元素

> ID：16145859
> 
> 赞同：1
> 
> 时间：2013-04-22T11:17:09.563
> 
> 标签：xslt, xpath, xslt-1.0

使用 XSLT 1.0（最好），如何选择在当前元素和下一次当前元素出现之间出现的所有元素？

假设我有这个 XML（已编辑）：

```
<root>
    <heading_1>Section 1</heading_1>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>Section 1.1</heading_2>
    <para>...</para>
    <heading_3>Section 1.1.1</heading_3>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>Section 1.2</heading_2>
    <para>...</para>
    <footnote>...</footnote>
    <heading_1>Section 2</heading_1>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>Section 2.1</heading_2>
    <para>...</para>
    <list_1>...</list_1>
    <list_2>...</list_2>
    <heading_3>Seciton 2.1.1</heading_3>
    <para>...</para>
    <heading_2>Section 2.2</heading_2>
    <para>...</para>
    <footnote>...</footnote>
</root> 
```

处理时`heading_1`，我想选择`heading_2`我正在处理的标题和下一个标题之间的所有内容`heading_1`。`heading_3`在处理等时选择相同`heading_2`。你得到图片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:38:48.677

你可以使用这个：

```
following-sibling::heading_2[generate-id(preceding-sibling::heading_1[1]) = 
                             generate-id(current())] 
```

工作示例：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates select="heading_1" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="heading_1">
    <xsl:copy>
      <xsl:apply-templates
        select="following-sibling::heading_2[generate-id(
                                                preceding-sibling::heading_1[1]) = 
                                             generate-id(current())]" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="heading_2">
    <xsl:copy>
      <xsl:apply-templates
        select="following-sibling::heading_3[generate-id(
                                                preceding-sibling::heading_2[1]) = 
                                             generate-id(current())]" />
    </xsl:copy>
  </xsl:template>    
</xsl:stylesheet> 
```

在您的示例输入上运行时的结果：

```
<root>
  <heading_1>
    <heading_2>
      <heading_3>...</heading_3>
    </heading_2>
    <heading_2 />
  </heading_1>
  <heading_1>
    <heading_2>
      <heading_3>...</heading_3>
    </heading_2>
    <heading_2 />
  </heading_1>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:45:15.330

在处理标题 1 时尝试使用下面的 XPath 来选择标题 2。

```
(/root/heading_1/following-sibling::heading_1/preceding-sibling::heading_2) | (/root/heading_1[preceding-sibling::heading_1]/following-sibling::heading_2) 
```

# css - 有没有办法在隐藏输入时显示 HTML5 所需的弹出窗口？

> ID：16145868
> 
> 赞同：1
> 
> 时间：2013-04-22T11:17:35.013
> 
> 标签：css, html

我有一个复选框，我通过隐藏输入和定位嵌套在标签中的跨度来设置样式。见[http://jsfiddle.net/rz6np/](http://jsfiddle.net/rz6np/)

HTML：

```
<input id="confirm" type="checkbox" name="confirm" value="1" required="required" />
<label for="confirm"><span>+</span>Confirm</label> 
```

CSS：

```
 input[type="checkbox"] {
    display: none;
}

form input[type="checkbox"] + label span {
    display: inline-block;
    width: 16px;
    height: 16px;
    margin: 1px 10px 5px 0;
    vertical-align: middle;
    cursor: pointer;
    border: 1px solid grey;
    color: #fff;
    font-size: 15px;
    padding: 2px 2px;
}

input[type="checkbox"]:checked + label span {
    color: #000;
} 
```

由于输入被隐藏，这意味着 html5`required`弹出窗口不显示。有没有办法强制它显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:38:28.363

假设设计看起来像这样或类似，不要使用 display: none。样式复选框足够大以覆盖它，因此只需将其放置在具有相对或绝对位置以及适当 z-index 的复选框上。

如果它不能完全覆盖它，您仍然可以在复选框上使用可见性：隐藏。即使该字段不可见，我仍然在 Firefox 中看到弹出窗口，但您需要检查其他浏览器以及它们的行为方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-11T03:52:59.753

输入和跨度应该在标签内：

```
<label for="confirm">
   <input id="confirm" type="checkbox" name="confirm" value="1" required="required" />
   <span>+</span>
   Confirm
</label> 
```

然后在输入：

```
label {
   position: relative;
}

label > input[type="checkbox"] {
   opacity: 0;
   position: absolute;
   top: 0;
   left: 0;
} 
```

# css - Sass 可以按位置选择元素吗？

> ID：16145869
> 
> 赞同：3
> 
> 时间：2013-04-22T11:17:35.190
> 
> 标签：css, sass

有桌子，没有`id`with`td`

```
<table id='mytable'>
   <tr>
     <td>
         I want to right without id 
     </td>

     <td>
         I want to left without id
     </td>
    </tr>
</table> 
```

如何使第一个`td`右对齐和第二个左对齐的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T11:24:01.580

是的，您可以通过 CSS 来实现。

用这个：

```
table tr td:nth-child(1){
}
table tr td:nth-child(2){
} 
```

像很多人一样。这是参考站点。

1.  [第n个孩子](http://css-tricks.com/useful-nth-child-recipies/)。
2.  [偶数](http://www.w3.org/Style/Examples/007/evenodd.en.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:03:37.597

使用 CSS，您可以使用：

[:nth-child](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)

```
td:nth-child(an+b) 
```

*   a 是比率（或斜率），或者其中 1 = 每个元素，2 = 每个其他元素，3 = 每三个元素，依此类推。

*   n 是一个常数。它实际上是 n。只是 n。并且仅在您使用 a 时使用。

*   b 是子选择器的初始位置（或 y 截距）。意思是 + 1 将从找到的第一个元素开始，+3 将是第三个...... b 不能为负也不能为零。

**但是**，此方法不适用于 IE8（因为不支持 CSS3 伪类 =< IE8），因此，如果您支持 IE8，则可以使用一点 jQuery... 或尝试类似[Selectivizr](http://selectivizr.com/)的方法，其中使用 js shim 来支持 IE6-8 和 CSS3 选择器，比如 nth-child。

您可以做的另一件事是给每一行偶数/奇数类（或 column-xyz-1、column-xyz-2 等），并以这种方式设置样式……因为这为您提供了管理样式的同等灵活性...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:43:48.267

我看到你只有两个元素可以使用。

除了已经提到的`nth-child`伪类之外，您还可以使用`+`相邻的兄弟组合器：

```
td {
  /* Styles for the first element */
}

td + td {
  /* Styles for all elements except the first*/
  text-align: right;
} 
```

IE 从版本 7 开始支持此组合器！

# angularjs - 从网页将变量传递给 angular.js 范围

> ID：16145871
> 
> 赞同：1
> 
> 时间：2013-04-22T11:17:38.707
> 
> 标签：angularjs

初始化时从网页传递变量的正确方法是什么`$scope`？

我目前知道两种可能性：

1.  `ng-init`，这看起来很糟糕，不推荐（？）
2.  对资源使用 AJAX 请求，这需要向服务器发出我不想要的额外请求。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:47:39.500

如果这些变量能够通过 注入`ng-init`，我假设您已经在 J​​avascript 中声明了它们。

因此，您应该创建一个服务 ( `constant`) 来共享这些变量：

```
var variablesFromWebPage = ...;
app.constant('initValues', variablesFromWebPage); 
```

使用此服务，您无需在应用程序启动时将它们添加到范围内，您可以从您拥有的任何控制器中使用它，只需注入它 ( `function MyCtrl(initValues) {}`)。

尽管如此，如果您确实要求它在范围内，那么根据[文档](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)，这是控制器的主要用途之一：

> 使用控制器：
> 
> *   **设置范围对象的初始状态。**
> *   将行为添加到范围对象。

只需将此控制器添加到您的根节点：

```
app.controller('InitCtrl', function($rootScope, initValues) {
  $rootScope.variable1 = initValue.someVariable;
  $rootScope.variable2 = initValue.anotherVariable;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T17:57:51.413

@Cunha：Tnx。

这里有更多细节我是如何做到的：

在网页中：

```
<script type="text/javascript">
                var variablesFromWebPage = {};
                variablesFromWebPage.phoneNumber = '@Model.PhoneNumber';
</script> 
```

在 Angular 应用程序文件中，注册服务：

```
var module= angular.module('mymodule', ['ngRoute', 'ngAnimate']);

module.factory('variablesFromWebPage', function () {
    return variablesFromWebPage
}); 
```

然后是控制器：

```
module.controller('IndexController',

    function ($scope, $location, $http, $interval, variablesFromWebPage) {
        $scope.phoneNumber = variablesFromWebPage.phoneNumber;
    }
); 
```

# phppgadmin - 使用 phppgadmin 导入 sql 转储

> ID：16145877
> 
> 赞同：5
> 
> 时间：2013-04-22T11:17:56.143
> 
> 标签：phppgadmin

我有 phppgadmin 版本 5.0.4，当我单击按钮`SQL` （在 phppgadmin 的右上角）时，我必须获得用于导入 sql 转储的窗口，对吗？但在这个窗口中只是用于粘贴 sql 文件内容的输入文本字段

问题：`choose file`phppgadmin 中导入 sql 转储的按钮在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-03T09:51:03.287

在单击特定于数据库的菜单项 SQL 后，在某些数据库详细信息中显示文件输入元素，而不是右上角的菜单项。

您可以在此图像上轻松找到它 [![在此处输入图像描述](https://i.stack.imgur.com/UoUyQ.jpg)](https://i.stack.imgur.com/UoUyQ.jpg)

# c++ - 如何在linux中静态链接log4cxx

> ID：16145881
> 
> 赞同：0
> 
> 时间：2013-04-22T11:18:04.583
> 
> 标签：c++, log4cxx

看起来 Visual Studio 有一个解决方案#define LOG4CXX_STATIC。Linux中的eclipse怎么样？

[这是我最后一个问题](https://stackoverflow.com/questions/16143501/linux-c-application-deployment?noredirect=1#comment23066071_16143501)的后续问题

# javascript - ExtJs手动触发Click事件，按钮参数与鼠标点击不同

> ID：16145882
> 
> 赞同：7
> 
> 时间：2013-04-22T11:18:12.863
> 
> 标签：javascript, extjs

所以，我有一个登录控制器，你可以用鼠标单击登录或按 Enter 键，如下所示：

```
Ext.define('My.controller.Login', {
    extend: 'Ext.app.Controller',

    init: function(application) {
        this.control({
            "#idLogin button": {click: this.onButton},
            "#idLogin form > *": {specialkey: this.onKey}
        });
    },

    onButton: function(button, e, eOpts) {
        var win = button.up('window'); // the login window
        //do more stuff...
    },

    onKey: function (field, el) {
        if (el.getKey() == Ext.EventObject.ENTER) //ENTER key performs Login
            Ext.getCmp('#idLogin button').fireEvent('click');
    }
}); 
```

我意识到当我用鼠标单击 Login 按钮时，`onButton`功能正常工作，`button.up()`返回给我 Login `window`。

但是，如果我按下 Enter 键并触发执行`onKey`功能`fireEvent('click')`，在这种情况下会`onButton`触发但参数与您单击鼠标时收到`button`的参数不同！`button`而这一次，`button.up()`函数是未定义的。

问题是，为什么`fireEvent('click')`给我一个不同的按钮参数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T11:27:31.170

您必须使用这样的`fireEvent`功能：

```
var myBtn = Ext.getCmp('#idLogin button');

myBtn.fireEvent('click', myBtn); 
```

试试看。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T11:29:23.473

因为按钮点击事件是由框架触发的合成事件。它传递按钮实例和事件对象。`fireEvent`表示“使用这些参数通知任何订阅者此事件已发生”，而不是“触发底层按钮上的点击事件”。

所以你需要使用：

`button.fireEvent('click', button);`

然而，这并没有真正的意义，你只是添加了一个额外的间接层。

为什么不抽象出来：

```
Ext.define('My.controller.Login', {
    extend: 'Ext.app.Controller',

    init: function(application) {
        this.control({
            "#idLogin button": {click: this.onButton},
            "#idLogin form > *": {specialkey: this.onKey}
        });
    },

    onButton: function(button, e, eOpts) {
        this.doWindowFoo();
    },

    onKey: function (field, el) {
        if (el.getKey() == Ext.EventObject.ENTER) //ENTER key performs Login
            this.doWindowFoo();
    },

    doWindowFoo: function() {
        // Assumes the window has an id idLogin, there are several other ways to get a reference
        var win = Ext.getCmp('idLogin');
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-04T09:33:43.997

采用：

```
var button= Ext.getCmp('#idLogin button');    
button.fireHandler(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-08T09:41:23.570

这将在您的按钮中调用处理程序函数，在我的情况下它有效，因为我使用附加功能和参数值更改覆盖了该按钮处理程序......（extjs 4.1.1）

```
Ext.getCmp('#idLogin button').handler(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-08T10:13:43.687

更通用的方法：

```
document.querySelector("what-ever-el-selector").click(); 
```

在 extjs 4.2.6 上测试

干杯

# xpages - 在 x 页中的新窗口/选项卡上打开视图列中的计算链接

> ID：16145883
> 
> 赞同：0
> 
> 时间：2013-04-22T11:18:21.410
> 
> 标签：xpages, xpages-ssjs

我正在尝试将视图列链接打开到新窗口或选项卡中。我无法通过。我已经使用了许多方法，例如在同一类别下的某些页面中提到的。这是我的示例代码。

```
<xp:viewColumn columnName="$5" id="viewColumn1"displayAs="link">
    <xp:this.pageUrl><![CDATA[#{javascript:try{
    var row = getComponent("viewPanel1").getChildren().toArray();
    var va= row[5].getValue();
    var href = "some html page";
    return href+"?confId="+va;
    }catch(e){

    }
    }]]></xp:this.pageUrl> 
```

我已经使用下面的代码来解决

```
<xp:viewColumn columnName="fname" id="viewColumn1" displayAs="hidden">
    <xp:link escape="true" target="_blank">
        <xp:this.text><![CDATA[#{javascript:try{view1.getColumnValue("lname");}catch(e)   {}}]]></xp:this.text>
        <xp:this.value><![CDATA[#{javascript:try{thisid = view1.getColumnValue("lname");
   var calculatedlink = "www.google.com";
   return calculatedlink}catch(e){}}]]></xp:this.value>
    </xp:link>
    <xp:viewColumnHeader value="First Name" id="viewColumnHeader1">
    </xp:viewColumnHeader>
</xp:viewColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:13:51.890

Raj，作为用户，如果您决定何时打开新选项卡或窗口，我不高兴。我这样做（毕竟这是我的浏览器）。因此，您可能会考虑强制打开窗户。但如果你必须......

拆分功能：创建一个常规链接，给链接一个 css 类。然后使用`XSP.addOnLoad(...)`添加`target="_blank"`到具有该 css 类的所有链接。使您的代码保持精简并使其易于删除。

如果他们想要新窗口，它还可以为用户提供配置选项（存储在 cookie 中）。

让我们知道怎么回事。:-) stw

# ruby-on-rails - rails模块中的字符串操作

> ID：16145889
> 
> 赞同：0
> 
> 时间：2013-04-22T11:18:38.147
> 
> 标签：ruby-on-rails, module, symbols

```
class Music < ActiveRecord::Base
 attr_accessible :counter, :video, :video_file_name

   def name

    last=video_file_name.rindex('.') //line 1
    video_file_name[last,4]="" //line 2
    video_file_name //line3
  end
end 
```

我有一个 Music 类，并且想定义一个`name`方法，我可以在视图中使用它，例如：`@music.name`。现在，我可以获得第`video_file_name.rindex('.')`1 行中的值，但我不能在第 2 行中使用它（最后）。它说`"no implicit conversion from nil to integer"`。如果我将最后一个变量更改为数字，它将起作用。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:29:25.203

`last`错误是说`nil`

`rindex``nil`如果找不到您要查找的子字符串，则返回。

因此

```
last = video_file_name.rindex('.')
# last is nil because it does not contain a .
video_file_name[last, 4]="" # this line will crash because you are giving a nil index 
```

# geometry - Geometric Median：Weiszfeld 算法是否有 Java 实现？

> ID：16145893
> 
> 赞同：4
> 
> 时间：2013-04-22T11:18:50.233
> 
> 标签：geometry, computational-geometry, median

我正在尝试计算 2/3D 点列表的几何中值。我已经尝试过不同的实现，但我仍在寻找更好的结果。

我想知道 Weiszfeld 算法是否有 Java 实现，这样我可以节省一些时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-17T08:57:06.540

我根据这篇论文对 Weiszfeld 方法进行了 Java 实现：http: [//ie.technion.ac.il/Home/Users/becka/Weiszfeld_review-v3.pdf](http://ie.technion.ac.il/Home/Users/becka/Weiszfeld_review-v3.pdf)。

回购在 github 上：[https](https://github.com/j05u3/weiszfeld-implementation) ://github.com/j05u3/weiszfeld-implementation 。

# iphone - 如果在 sqlite 中不存在，则在表中添加列

> ID：16145894
> 
> 赞同：4
> 
> 时间：2013-04-22T11:18:51.960
> 
> 标签：iphone, ios, sqlite

我想在我的表中添加一列。任何人都可以告诉我如何在 Table 中添加列，如果它在 sqlite 更新整个 sqlite 数据库中不存在？

```
if COLUMNPROPERTY( OBJECT_ID('Customers'),'CLable','Text') is null 
    begin 
        alter table Customers add CLable varchar(50) not null 
    end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-14T17:25:18.560

没有足够的声誉将其添加为上面的评论，但是...

```
ALTER TABLE Name ADD COLUMN new_column INTEGER DEFAULT 0 
```

将在 prepare() 步骤中生成错误（不是 SQLITE_OK）——所以忽略它并且不要执行 step()：

```
sqlite3_stmt *stmt;
if (sqlite3_prepare_v2(database, [self.sql UTF8String], -1, &stmt, nil) == SQLITE_OK) {
    sqlite3_step(stmt);
}
sqlite3_finalize(stmt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:24:18.780

在 SQLite 中，您无法使用`IF NOT EXISTS`...检查列是否存在

您可以简单地检查`SELECT col from TABLE`如果它返回错误则列不存在。

或者您可以在应用程序委托中使用标志，例如

```
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"isColumnAdded"]) {

    //call the query like ALTER TABLE tableName ADD COLUMN columnName TEXT;
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"isColumnAdded"];
    [[NSUserDefaults standardUserDefaults] synchronize]
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-22T11:21:36.193

试试这样，通过使用 ALTER 命令你可以实现这个，

```
ALTER TABLE Name ADD COLUMN new_column INTEGER DEFAULT 0 
```

# ruby-on-rails - 更新 ruby 后我是否必须重新启动 apache 才能让乘客重新启动？

> ID：16145896
> 
> 赞同：0
> 
> 时间：2013-04-22T11:19:10.930
> 
> 标签：ruby-on-rails, ruby, passenger

我需要更新系统中的 ruby​​。这是一个小更新，我将通过安装一个新的 ruby​​ RPM 来实现，该 RPM 上有一个新的补丁。

我的问题是，在系统中更新 ruby​​ 后是否必须重新启动 apache？还是让乘客重新加载红宝石的另一种方法？

我尝试运行一个输出 RUBY_VERSION、RUBY_RELEASE_DATE、RUBY_PATCHLEVEL 的页面以检查这一点，但它对我不起作用，因为更新是 RPM 中的新补丁，而不是 ruby​​ 本身，所以这些常量是新旧版本相同。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:32:05.823

我很确定，至少在乘客 3 中，您确实需要重新启动 apache。

安装新的 ruby​​ 后，您需要重新安装乘客 apache 模块，链接到您的新 ruby​​，（`passenger-install-apache2-module`），然后您需要获取安装后显示的 apache 配置行，并编辑您的 apache 配置文件以包含它们（替换指向旧红宝石的旧行），然后您需要重新启动 apache。

现在，*可能*有一种不同的方法可以在不为乘客 4 重新启动 apache 的情况下执行此操作（仍然不是官方最终版本，但在 RC 中）。乘客 4 为同时运行多个红宝石的乘客提供了一些功能，最终*可能*也会允许这种事情；我不确定，我没有仔细研究过。但我认为对于乘客 3（现有的稳定乘客，大多数人可能仍在使用），您必须按照上述方式进行操作。

您可以重新启动在乘客下运行的特定应用程序，`restart.txt`就像 Damien MATHIEU 在不同的答案中所说的那样。但是要更改乘客正在运行的 ruby​​ 版本并在其下启动应用程序 - 我很确定您需要重新启动 apache（在首先重新安装 apache 乘客模块并更改乘客 apache 配置之后）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:23:03.413

不，您不需要重新启动整个 Apache。
您需要重新启动您的应用程序。

乘客有一个简单的方法来告诉应用程序重新启动：在应用程序的 tmp 目录中[创建一个 restart.txt 文件](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_redeploying_restarting_the_ruby_on_rails_application)。

应用程序将在下次向其发出请求时重新启动。
因此，您可能希望在部署后自动请求您的应用程序以强制重启。

# python - 从 CSV 中动态删除列

> ID：16145897
> 
> 赞同：0
> 
> 时间：2013-04-22T11:19:25.233
> 
> 标签：python

我想从 CSV 中动态删除一列，这就是我目前所拥有的。我不知道从这里去哪里：

```
# Remove column not needed.
column_numbers_to_remove = 3,2,
file = upload.filepath
#I READ THE FILE
file_read = csv.reader(file)

REMOVE 3 and 2 column from the CSV
UPDATE SAVE CSV 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:32:26.727

用于`enumerate`获取列索引，并创建一个没有您不想要的列的新行...例如：

```
for row in file_read:
    new_row = [col for idx, col in enumerate(row) if idx not in (3, 2)] 
```

`csv.writer`然后用某处写出你的行......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:49:59.233

删除列后读取 csv 并写入另一个文件。

```
import csv
creader = csv.reader(open('csv.csv'))
cwriter = csv.writer(open('csv2.csv', 'w'))

for cline in creader:
   new_line = [val for col, val in enumerate(cline) if col not in (2,3)]
   cwriter.writerow(new_line) 
```

# ruby-on-rails - 针对 Rails 中的外部和内部数据库进行身份验证

> ID：16145898
> 
> 赞同：1
> 
> 时间：2013-04-22T11:19:25.257
> 
> 标签：ruby-on-rails, authentication, devise, ldap

我正在构建的系统要求我们对客户数据库进行身份验证，以从他们的数据库中提取用户信息。但是，他们也希望我们允许外部用户登录并访问该系统。为了对他们的数据库进行身份验证，我们使用了 DeviseLDAPAuthenticatable，并计划使用 Devise 添加本地用户。

高层的行动计划是：

```
User puts in log in details
if ldap accepts these
    log in
elseif local database excepts these
    log in
else
    fail 
```

我猜是我需要覆盖authenticate_user！方法，但似乎并不明显我需要包括什么以确保 LDAP 用户仍然可以登录。[这个问题](https://stackoverflow.com/questions/11424325/rails-authentication-with-ldap-and-local-database)似乎很有帮助，但没有解释如果我们正在验证如何获取会话与设备。

# dropbox - iPad/iPhone 上 webapp 的 Dropbox 选择器 403 错误

> ID：16145900
> 
> 赞同：2
> 
> 时间：2013-04-22T11:19:27.647
> 
> 标签：dropbox, dropbox-api

我是 dropbox 的新手。我尝试集成 dropbox 选择器，它与桌面浏览器上[https://www.dropbox.com/developers](https://www.dropbox.com/developers)上为开发人员提供的官方网站上提供的代码效果很好。但是当我尝试这样做时使用 iPhone 或 iPad 时，无论我是否登录，都会出现 403 错误。

所以，请进一步指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T15:11:10.427

你必须测试你的IP地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T15:12:08.640

我测试了它，错误是我把本地主机。

# html - 尽管在 CSS 中我放了“list-style:none”，但仍然列出项目符号

> ID：16145901
> 
> 赞同：0
> 
> 时间：2013-04-22T11:19:33.450
> 
> 标签：html, css, wordpress

我在这个页面上有一个 CSS 问题：http: [//www.fastclickad.com/ask-for-your-free-seo-analysis/](http://www.fastclickad.com/ask-for-your-free-seo-analysis/)

出于某种原因，尽管我在样式表中插入了几条指令，但项目符号仍然显示，因此列表样式不会从主题继承。

当我用谷歌浏览器“检查元素”时，一切似乎都很顺利，除了子弹仍然显示！

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:24:43.690

您指定了一个边框，如果将其删除，则会阻止箭头：

```
.aritclecontent ul li::before, .sidebarwidget ul li::before {
  border-left: solid #0473B2;
} 
```

因此，您需要执行以下操作：

```
.gform_body ul li:before {
  border-left:none!important;
} 
```

`!important`可能不赞成，因此您可能希望分析您的样式并相应地重构以消除使用它的需要，如果确实有必要的话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T11:37:22.600

尝试这个 ..

```
 list-style-type: none; 
```

# serialization - boost.serialization 的输出格式是什么

> ID：16145910
> 
> 赞同：8
> 
> 时间：2013-04-22T11:19:55.443
> 
> 标签：serialization, boost

我试图序列化一个向量和一个地图容器并通过 cout 输出它们的值。但是，我很难理解 boost 输出的含义。我的代码如下所示：

```
#include <iostream>
#include <boost/serialization/vector.hpp>   
#include <boost/serialization/map.hpp>  
#include <boost/assign.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <sstream>
#include <fstream>

using namespace std;

int main()
{
    vector<int> v = boost::assign::list_of(1)(3)(5);
    map<int, string> m = boost::assign::map_list_of(1,"one")(2,"two");

    std::stringstream ss;
    boost::archive::text_oarchive oa(ss);
    oa<<v<<m;   

    vector<int> v_;
    map<int,string> m_;
    boost::archive::text_iarchive ia(ss);
    ia>>v_>>m_;
    boost::archive::text_oarchive ib(cout);
    ib<<v_<<m_;
    return 0;
} 
```

输出如下所示：

```
22 serialization::archive 9 3 0 1 3 5 0 0 2 0 0 0 1 3 one 2 3 two 
```

我组成的值 1 3 5 之前的数字 9 3 0 是什么意思？0 0 2 0 0 0 怎么样？'1' 和 'one' 之间的 '3' 是否意味着有 3 个字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T12:05:04.130

我不确定地图中的一些零（可能是一些版本号或跟踪级别），但对于其余部分：

```
22 (length of the signature)
serialization::archive (signature)
9 (archive version, 10 on boost 1.53)
3 (vector size)
0 (item version)
1 3 5 (vector items)
0 (map class tracking level ?)
0 (map class version ?)
2 (map size)
0 (item class tracking _level ?)
0 (item class version ?)
0 (item version)
1 (key) 3 (value length) one (value)
2 (key) 3 (value length) two (value) 
```

请注意，文本输出的内容和格式是 Boost 的内部业务，可能会随着未来的 Boost 修订而改变，因此您的应用程序不应依赖内部存档内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-26T07:28:50.280

如果您将这些行放在代码的末尾

```
boost::archive::xml_oarchive ib(cout);
ib<< boost::serialization::make_nvp("v", v_) << boost::serialization::make_nvp("m", m_);   //    ib<<v_<<m_;
return 0; 
```

你会得到这个输出，它自我描述：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE boost_serialization>
<boost_serialization signature="serialization::archive" version="10">
<v>
    <count>3</count>
    <item_version>0</item_version>
    <item>1</item>
    <item>3</item>
    <item>5</item>
</v>
<m class_id="1" tracking_level="0" version="0">
    <count>2</count>
    <item_version>0</item_version>
    <item class_id="2" tracking_level="0" version="0">
        <first>1</first>
        <second>one</second>
    </item>
    <item>
        <first>2</first>
        <second>two</second>
    </item>
</m>
</boost_serialization> 
```

所以@zacinter 是正确的，`0`后面的三个`2`是：1) `item_version`(of`std::pair`的值类型`map`) 2) `tracking_level`of`std::pair`和 3) `version`of `std::pair`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-24T11:24:53.420

22 是文本“serialization::archive”的长度。我相信，存档的每个文本前面都有一个这样的文本长度数字。

# javascript - 如何从之前选择的收音机中获取值？

> ID：16145912
> 
> 赞同：1
> 
> 时间：2013-04-22T11:20:07.510
> 
> 标签：javascript, jquery

就我而言，我有几行单选框，每个收音机都有一个价值。必须计算此值，并且必须将结果放在 DIV 中。

我的问题是，我找不到以前减去所选无线电值的方法。让我向您展示一个示例标记：

```
<table>
      <tr>
        <td><input name="tools" value="20" type="radio"></td>
        <td><input name="tools" value="300" type="radio"></td>
        <td><input name="tools" value="1000" type="radio"></td>
     </tr>
     <tr>
       <td><input name="addons" value="5" type="radio"></td>
       <td><input name="addons" value="10" type="radio"></td>
     </tr>
</table>
<div id="result"></div> 
```

JavaScript：

```
var radioClick   = $('input[type="radio"]');

radioClick.on('change', function(evt){

      // function sub or add the price... 
      // here is a shortcut of the add calc version...
      var price = $(this).val(),
      showPrice = $('#result').text(),
      endresult = parseFloat(showPrice) + parseFloat(price),
      $('#result').text(endResult);
}); 
```

使用复选框它可以正常工作，但如果是无线电男孩，我没有点击事件来识别它，我必须减去。

在第一行我们看到收音机`name=tools`。在这里，我首先取这个值为 20 的值。之后，值 20 将显示在 中`#result`，很好。但是当我现在使用另一台收音机时`name=tools`，新值将增加到 20。这就是我的问题。我不知道如何找到之前选择的单选按钮来获取这个值并减去它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:48:02.637

尝试使用这个：html代码：

```
<table>
  <tr>
    <td><input name="tools" class="test1" value="20" type="radio"></td>
    <td><input name="tools" class="test1" value="300" type="radio"></td>
    <td><input name="tools" class="test1" value="1000" type="radio"></td>
 </tr>
 <tr>
   <td><input name="addons" class="test" value="5" type="radio"></td>
   <td><input name="addons" class ="test" value="10" type="radio"></td>
 </tr> 
```

javascript:

```
<script>

var testPrice  = 0;
var test1Price = 0;
var endprice = 0;
var price ='';
 $('.test').click(function(){
 price = $(this).val();
 testPrice = price;
 endPrice = parseFloat(testPrice) + parseFloat(test1Price),

  $('#result').text(endPrice);
 });
 $('.test1').click(function(){
 var price = $(this).val();
  test1Price = price;
   endPrice = parseFloat(testPrice) + parseFloat(test1Price),
  $('#result').text(endPrice);
  });

   </script> 
```

[在http://jsfiddle.net/rxrzX/](http://jsfiddle.net/rxrzX/)上试试它的演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:10:54.850

尝试使用以下代码：`**[JSFIDDLE](http://jsfiddle.net/arulmr/kcwuX/)**`

```
var radio_groups = []
$(":radio").each(function(){
    if (radio_groups.indexOf(this.name) == -1){
        radio_groups.push(this.name);
    }
});

$('input:radio').change(function(evt){
    var resultPrice = 0;
    $.each(radio_groups, function(){
        curPrice = $(':radio[name="' + this + '"]:checked').val();
        if (!(curPrice)){
            curPrice = 0;
        }
        resultPrice = parseInt(resultPrice) + parseInt(curPrice);
    });
    $('#result').text(resultPrice);
}); 
```

即使您添加更多单选按钮组，这也将起作用。如果您只想为特定组提供此功能，请在数组中定义名称，`radio_groups`而不是从文档中获取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:36:28.237

您可以使用闭包来跟踪值的对象文字：

```
radioClick.on('change', (function()
{
    var valTracker = {},
    resultDiv = $('#result');//easier on the DOM
    return function(evt)
    {
        valTracker[this.name] = valTracker[this.name] || 0;//get old value
        var endResult = parseFloat(resultDiv.text()) + parseFloat($(this).val()) - valTracker[this.name];//subtract old value, too
        valTracker[this.name] = parseFloat($(this).val());//set current value
        resultDiv.text(endResult);
    }
}())); 
```

对象字面量跟踪当前单选值（元素的`valTracker`名称用作属性）。我还在`$('#result')`闭包中保留了对 div 的引用。这样，您不必每次调用回调函数时都查询 DOM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:27:47.077

你不需要减法。您可以找到 2 diff 单选按钮的 2 个值：`tools`和`addons`. 然后只需添加它们并在`div`

You can get radio button value by 中写入：

```
$('input[name=radioName]:checked').val(); 
```

我想试试这个：

```
var radioClick   = $('input[type="radio"]');

radioClick.on('change', function(evt){
      // function sub or add the price... 
      // here is a shortcut of the add calc version...
      var toolsprice = $('input[name=tools]:checked').val(),
      var addonsprice = $('input[name=addons]:checked').val(),
      endresult = parseFloat(toolsPrice) + parseFloat(addonsprice),
      $('#result').text(endResult);
}); 
```

# web-services - 如何从 alfresco 4.2.C 中的 javascript 文件调用 Web 服务

> ID：16145913
> 
> 赞同：1
> 
> 时间：2013-04-22T11:20:11.873
> 
> 标签：web-services, alfresco

我在露天创建了执行脚本规则，并将我的 javascript 文件保存在 Company Home>Data Dictionary>script 文件夹中。

我的规则如下：

所有项目>执行脚本'dataFilesScript.js'>项目已创建或进入此文件夹>完成

1）。我的 Js 脚本如下。

```
var simplehttpresult = "";

try {

   simplehttpresult = SimpleHttpConnection.getContentAsString("http://myip:myport/alfresco/service/demo/simple");
 }catch(ex){
    error = String(ex)
} 
```

2).我在 web-scripts-application-context.xml 中添加以下行

```
<bean id="webscript.org.alfresco.demo.simple.get" 
      class="org.alfresco.module.demoscripts.SimpleWebScript"
      parent="webscript">
      <property name="repository" ref="repositoryHelper" />
      <property name="serviceRegistry" ref="ServiceRegistry" />

  </bean> 
```

3).我的 simple.get.desc.xml 文件

```
<webscript>
  <shortname>The World's Simplest Webscript</shortname>
  <description>Hands back a little bit of JSON</description>
  <url>/demo/simple</url>
  <authentication>none</authentication>
  <format default="">argument</format>
  <family>Alfresco Java-Backed WebScripts Demo</family>
</webscript> 
```

4）。我添加以下行 script-services-context.xml

```
 <bean id="httpUtilsScript" parent="baseJavaScriptExtension" 
        class="org.um.alfresco.SimpleHttpConnection">
        <property name="extensionName">
            <value>SimpleHttpConnection</value>
        </property>     
    </bean> 
```

5).我的Java文件如下。

```
public class SimpleWebScript extends AbstractWebScript
{
    public void execute(WebScriptRequest req, WebScriptResponse res)
        throws IOException
    {
        try
        {
            // build a json object
            JSONObject obj = new JSONObject();

            // put some data on it
            obj.put("field1", "data1");

            // build a JSON string and send it back
            String jsonString = obj.toString();
            res.getWriter().write(jsonString);
        }
        catch(JSONException e)
        {
            throw new WebScriptException("Unable to serialize JSON");
        }
    }    
} 
```

.当我的规则被执行时。它在 Alfresco 4.0 中运行良好，但不适用于 4.2.c。在 Alfresco 4.2.C 中，我的操作代码仅被调用一次...在 4.2.C 中需要任何其他配置设置请建议.....

# bit.ly - 缩短包含 & 参数的 URL

> ID：16145918
> 
> 赞同：1
> 
> 时间：2013-04-22T11:20:40.027
> 
> 标签：bit.ly, nsstringencoding

我有这个 URL，我正在尝试通过 bit.ly API 来缩短它。这是我的代码

```
NSString *url = @"http://www.example.com&username=abc&password=123&mode=offline";

NSString *requestStr = [NSString stringWithFormat:@"http://api.bit.ly/v3/shorten?login=%@&apiKey=%@&longUrl=%@&format=txt",login, api_key, url];

    requestStr = [requestStr stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:requestStr]];
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *response = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

我得到一个响应的 url，它只对应于[http://www.example.com](http://www.example.com)

令人惊讶的是，URL 的 &username=abc&password=123&mode=offline 部分被修剪掉了。仅当我通过 xcode 执行此操作时才会发生这种情况。在网站上，它工作正常。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:36:26.210

```
NSString *url = @"https://www.googleapis.com/urlshortener/v1/url?key=UR_KEY";

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPMethod:@"POST"];

    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"UR_LONG_URL",@"longUrl", nil];

    [request setHTTPBody:[[dict JSONRepresentation] dataUsingEncoding:NSUTF8StringEncoding]];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *response = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

# android - AndroidManifest.xml 处理输出工具

> ID：16145927
> 
> 赞同：1
> 
> 时间：2013-04-22T11:20:58.673
> 
> 标签：android, android-manifest, adb, android-sdk-tools

我的记忆非常模糊，但是 Android SDK 中包含一个工具，当您针对未签名或调试签名的应用程序 APK（我不记得是哪个）运行它时，它会输出“已处理” ' AndroidManifest 文件。

但是，我忘记了工具/标志是什么，我无法在网上找到它！有人能帮我吗？我希望术语是可以理解的，但是，您在未签名/调试签名的 APK 上使用参数运行了这个 SDK 工具（正如我所说，我不记得是哪个）并且它生成了一个输出（我认为）是 Google播放商店读取。

抱歉，它非常模糊；如果我找到我的意思的工具，我会用它更新这个线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T10:49:49.900

也许你的意思是：

```
 $ aapt dump badging <my_apk.apk> 
```

# sql - 在 XML 中对节点的值求和时 SQL Server 的奇怪行为

> ID：16145928
> 
> 赞同：3
> 
> 时间：2013-04-22T11:21:00.643
> 
> 标签：sql, sql-server, xml, sql-server-2008

我问一个关于 sum 节点值的问题：

[总结 sql server 2008 中的一些 xml 节点值](https://stackoverflow.com/questions/16144494/sum-some-xml-nodes-values-in-sql-server-2008?)

请考虑以下代码：

```
Declare @xml xml 
set @xml='<Parent ID="p">
     <Child ID="1">1000000000</Child > 
     <Child ID="2">234650</Child > 
     <Child ID="3">0</Child > 
      </Parent >'

Select @xml.value('sum(/Parent[@ID="p"]/Child)','bigint') as Sum 
```

如果你执行它，它会重新运行这个错误：

> 消息 8114，级别 16，状态 5，第 8 行将数据类型 nvarchar 转换为 bigint 时出错。

问题是它返回这个值：`1.00023465E9`

如果我以这种方式更改上述查询，则可以：

```
Declare @xml xml 
set @xml='<Parent ID="p">
     <Child ID="1">1000000000</Child > 
     <Child ID="2">234650</Child > 
     <Child ID="3">0</Child > 
      </Parent >'

Select @xml.value('sum(/Parent[@ID="p"]/Child)','float') as Sum 
```

为什么 Sql Server 会这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:34:18.580

Sql Server 在将科学记数法的值从字符串转换为整数时遇到问题，就像在运行 xpath 查询时会发生的那样，但是，它可以为`float`.

你可以这样写你的查询：

```
select @xml.value('sum(/Parent[@ID = "p"]/Child) cast as xs:long?', 'bigint') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:34:03.193

试试这个——

```
DECLARE @xml XML 
SELECT @xml='<Parent ID="p">
     <Child ID="1">1000000000</Child > 
     <Child ID="2">234650</Child > 
     <Child ID="3">0</Child > 
      </Parent >'

SELECT @xml.value('sum(for $r in /Parent[@ID="p"]/Child return xs:int($r))', 'bigint') 
```

**更新：**

```
DECLARE @xml XML 
SELECT @xml='<Parent ID="p">
     <Child ID="1">100000000000000</Child > 
     <Child ID="2">234650</Child > 
     <Child ID="3">0</Child > 
      </Parent >'

SELECT @xml.value('sum(for $r in /Parent[@ID="p"]/Child return xs:decimal($r))', 'bigint') 
```

**更新 2：**

```
DECLARE @xml XML 
SELECT @xml='<Parent ID="p">
     <Child ID="1">100000000000000.6</Child > 
     <Child ID="2">234650</Child > 
     <Child ID="3">0</Child > 
      </Parent >'

SELECT @xml.value('sum(for $r in /Parent[@ID="p"]/Child return xs:decimal($r))', 'decimal(18,2)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:27:20.620

试试这与 BIGINT 一起使用：

```
DECLARE @SearchKeyWords XML 

SET @SearchKeyWords =
'<Parent ID=''p''>
    <Child ID="1">1000000000</Child > 
    <Child ID="2">234650</Child > 
    <Child ID="3">0</Child > 
</Parent >' 

DECLARE @TempSearchKeyWords TABLE
        (
            SearchKeyWord BIGINT
        )

INSERT INTO @TempSearchKeyWords                     
SELECT SearchKeyWords.SearchKeyword.value('.',' bigint ') AS SearchKeyword             
FROM @SearchKeyWords.nodes('/Parent/Child') AS SearchKeyWords(SearchKeyword)

SELECT SUM(SearchKeyWord) FROM @TempSearchKeyWords 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:03:51.963

您在此处拥有的 XML 是无类型的 XML。这意味着提供给的值`sum()`是 type `xdt:untypedAtomic`。When`sum()`用于`xdt:untypedAtomic`将值转换为`xs:double`. 的结果`sum()`由`values()`函数作为字符串（或 untypedAtomic）读取，并`xs:double`在值小于 1.0E-6 或大于或等于 1.0E6 时使用科学计数法。SQL Server 无法从科学记数法转换为`int`or `bigint`。

参考： XQuery 中的
[sum 函数 (XQuery)](http://msdn.microsoft.com/en-us/library/ms175504.aspx)
[类型转换规则](http://msdn.microsoft.com/en-us/library/ms191231.aspx)

其他答案提供了解决方法，将输入值或结果`sum()`从. 另一种选择是使用类型化的 XML。`float``values()`

架构：

```
create xml schema collection XSDSumTest as '
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Parent">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Child" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="xs:int">
                                <xs:attribute name="ID" type="xs:int"/>
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
            <xs:attribute name="ID" type="xs:string"/>
        </xs:complexType>
    </xs:element>
</xs:schema>' 
```

询问：

```
declare @xml xml(XSDSumTest) = '
<Parent ID="p">
  <Child ID="1">1000000000</Child > 
  <Child ID="2">234650</Child > 
  <Child ID="3">0</Child > 
</Parent>'

select @xml.value('sum(/Parent[@ID="p"]/Child)','bigint') as Sum 
```

# android - View Pager in Activity

> ID：16145929
> 
> 赞同：0
> 
> 时间：2013-04-22T11:21:00.827
> 
> 标签：android, android-viewpager

I want to slide acivities with view pager not by gesture Listener in android. I am able to add view pager on image view but not on activities so please help me ... Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:31:25.127

为寻呼机中的每个视图使用片段。

将下面的代码写`onCreate()`在`FragmentActivity`.

```
List<Fragment> fragments = new Vector<Fragment>();

//for each fragment you want to add to the pager
Bundle page = new Bundle();
page.putString("url", url);
fragments.add(Fragment.instantiate(this,MyFragment.class.getName(),page));

//after adding all the fragments write the below lines

this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

mPager.setAdapter(this.mPagerAdapter); 
```

示例片段定义：

```
public class MyFragment extends Fragment {

public static MyFragment newInstance(String imageUrl) {

final MyFragment mf = new MyFragment ();

    final Bundle args = new Bundle();
    args.putString("somedata", "somedata");
    mf.setArguments(args);

    return mf;
}

public MyFragment() {}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String data = getArguments().getString("somedata");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate and locate the main ImageView
    final View v = inflater.inflate(R.layout.my_fragment_view, container, false);
    //... 
    return v;
} 
```

编辑（添加）：FragmentPagerAdapter

```
public class MyFragmentAdapter extends FragmentPagerAdapter {

public static int pos = 0;

private List<Fragment> myFragments;

public MyFragmentAdapter(FragmentManager fm, List<Fragment> myFrags) {
    super(fm);
    myFragments = myFrags;
}

@Override
public Fragment getItem(int position) {

    return myFragments.get(position);

}

@Override
public int getCount() {

    return myFragments.size();
}

@Override
public CharSequence getPageTitle(int position) {

    setPos(position);

    String PageTitle = "";

    switch(pos)
    {
        case 0:
                PageTitle = "page 1";
                break;
        case 1:
                PageTitle = "page 2";
                break;
        case 2:
                PageTitle = "page 3";
                break;
        case 3:
                PageTitle = "page 4";
                break;
        case 4:
                PageTitle = "page 5";
                break;
        case 5: 
                PageTitle = "page 6";
                break;
        case 6:
                PageTitle = "page 7";
                break;
    }
    return PageTitle;
}

public static int getPos() {
    return pos;
}

 public static void setPos(int pos) {
    MyFragmentAdapter.pos = pos;
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:42:58.250

`ViewPager`只有持有`views`不`activity`可选地支持`fragments`，持有`activity`另一个`activity`被正式贬值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T11:34:15.640

像这样使用 [overridePendingTransition](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)

```
startActivity(YourNewActivity);
overridePendingTransition(R.anim.right_to_left,
                            R.anim.left_to_right); 
```

**right_to_left.xml**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="300"
        android:fromXDelta="100%"
        android:fromYDelta="0%"
        android:toXDelta="0%"
        android:toYDelta="0%" />

</set> 
```

**left_to_right.xml**

```
<translate
    android:duration="300"
    android:fromXDelta="0%"
    android:fromYDelta="0%"
    android:toXDelta="-100%"
    android:toYDelta="0%" /> 
```

# javascript - footable on nested repeater adds comma in textbox

> ID：16145932
> 
> 赞同：0
> 
> 时间：2013-04-22T11:21:10.120
> 
> 标签：javascript, asp.net, css, responsive-design

I have a repeater inside a repeater (that is nested repeater) and applied foo table on it. problem is , when foo table is applied on the repeater (that is , when it is in tablet or cell phone format) a comma is added in textbox. eg: if I enter "empty" in textbox it shows as ",empty" . if i remove ",empty" and add "empty1" then it will show ",empty1,emtpy" in textbox. when i open the page in desktop or laptop view no commas are inserted , even if they are inserted in tablet and cell phone view on resizing them to desktop commas disappear. It is because of footable . tried a lot but didnot find the solution. Any idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T09:58:17.757

万一有人在这里搜索类似的问题是我在footable项目上打开的票的[链接。](https://github.com/bradvin/FooTable/issues/64)Bradvin 修复了这个问题，我认为它不应该在新版本的 footable 中产生问题。

# c# - dapper 和 decimal(10,2) 的无效转换

> ID：16145935
> 
> 赞同：2
> 
> 时间：2013-04-22T11:21:18.983
> 
> 标签：c#, sql-server-2008, dapper

以下代码给了我无效的强制转换操作。我的 MS Sql 服务器中的 Qty 列是类型`decimal(10,2)`

```
#region SQL Syntax

var sql = "select qty from productarticle where articleid=@articleid and productid=@productid";

#endregion

using (IDbConnection cn = Connection)
{
    cn.Open();

    return cn.Query<double>(sql, new { articleid = articleid, productid = productid }).Single();
} 
```

如果我尝试将其返回为`int`，则没有问题。有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:50:24.677

[SQL decimal 映射到 C# decimal](http://msdn.microsoft.com/en-GB/library/cc716729.aspx)，而不是 double

# python - OpenCV in python. Ask: Recognize my face and put my name. Like a database

> ID：16145936
> 
> 赞同：2
> 
> 时间：2013-04-22T11:21:21.427
> 
> 标签：python, database, opencv, face-recognition

I have a code in python to recognize my face, but now I want to recognize my face and put my name, as stored in a database.

My question is, how to do it in python? anyone have any example?

This is the code:

```
import sys
import cv

class FaceDetect():
    def __init__(self):
        cv.NamedWindow ("CamDemo", 1)
        device = 0
        self.capture = cv.CaptureFromCAM(device)
        capture_size = (320,200)
        cv.SetCaptureProperty(self.capture, cv.CV_CAP_PROP_FRAME_WIDTH, capture_size[0])
        cv.SetCaptureProperty(self.capture, cv.CV_CAP_PROP_FRAME_HEIGHT, capture_size[1])

    def detect(self):
        cv.CvtColor(self.frame, self.grayscale, cv.CV_RGB2GRAY)

        # histograma
        cv.EqualizeHist(self.grayscale, self.grayscale)

        # detecta objetos
        faces = cv.HaarDetectObjects(image=self.grayscale, cascade=self.cascade, storage=self.storage, scale_factor=1.2,\
                                     min_neighbors=2, flags=cv.CV_HAAR_DO_CANNY_PRUNING)

        if faces:
            #print 'cara detectada!'
            for i in faces:
                if i[1] > 10:
                    cv.Circle(self.frame, ((2*i[0][0]+i[0][2])/2,(2*i[0][1]+i[0][3])/2), (i[0][2]+i[0][3])/4, (128, 255, 128), 2, 8, 0)

    def run(self):
        # verificar si el dispositivo de captura esta bien
        if not self.capture:
            print "Error opening capture device"
            sys.exit(1)

        self.frame = cv.QueryFrame(self.capture)
        self.image_size = cv.GetSize(self.frame)

        # create grayscale version
        self.grayscale = cv.CreateImage(self.image_size, 8, 1)

        # creando almacenamiento(storage)
        self.storage = cv.CreateMemStorage(128)
        self.cascade = cv.Load('haarcascade_frontalface_default.xml')

        while 1:
            # bucle infinito -> captura siempre
            # captura cara
            self.frame = cv.QueryFrame(self.capture)
            if self.frame is None:
                break

            # ventana
            cv.Flip(self.frame, None, 1)

            # deteccion de cara
            self.detect()

            # mostrar webcam imagen
            cv.ShowImage('CamDemo', self.frame)
            # gestionar eventos
            k = cv.WaitKey(10)

            if k == 0x1b: # ESC
                print ' Saliendo ...'
                break
                sys.exit(1)

if __name__ == "__main__":
    print "Esc para salir"
    face_detect = FaceDetect()
    face_detect.run() ` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-16T03:06:38.407

I don't know if you figured it out but have a look at:

[http://docs.opencv.org/trunk/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html)

it is definately what you are looking for and also easy to implement. It's a "new" adition to the opencv project so you might have to update your opencv version.

Cheers

# c# - 将 WPF DataGrid 复制到另一个没有列的数据网格中

> ID：16145942
> 
> 赞同：0
> 
> 时间：2013-04-22T11:21:48.860
> 
> 标签：c#, wpf, datagrid, copy

我需要复制`DataGrid`删除最后一列。我尝试使用此代码并设置`ItemSource`正确，但列是空的（在某些情况下我绑定 object.property）：

```
DataGrid dg = new DataGrid();

foreach (DataGridColumn dgColumns in source.Columns.Where(i => i.Header != "Sending Result"))
{
    dg.Columns.Add(new DataGridTextColumn
    {
        Width = dgColumns.Width,
        Header = dgColumns.Header,
        Binding = new Binding(string.Format("{0}", dgColumns.SortMemberPath)));
    }
}

dg.ItemsSource = source.ItemsSource; 
```

谁能帮我解决这个问题？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:43:04.097

我认为您的问题是您在将网格添加到逻辑树之前设置了 ItemsSource 属性。

尝试将网格添加到其新父级，然后设置 ItemsSource。

# mysql - mysql: update a query if not exist any row by where condition then insert a new data

> ID：16145943
> 
> 赞同：1
> 
> 时间：2013-04-22T11:21:51.827
> 
> 标签：mysql

I need to update a table by some condition, not with primary key.

I am trying to do something like following

> update p_price set price = :price where p_id = :pid and c_id = :cid if there is no any row with where p_id = :pid and c_id = :cid then insert into p_price (p_id, c_id, price) value (1,2,3)

is that possible with sql command?

note: there are no primary key so I can not use ON DUPLICATE KEY.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:17:19.723

实际上它不需要有主键。它只需要至少唯一的约束。添加此`UNIQUE`约束

```
ALTER TABLE p_price ADD CONSTRAINT tb_unique UNIQUE(p_id , c_id); 
```

并执行此语句，

```
insert into p_price (p_id, c_id, price) 
value (1,2,3)
ON DUPLICATE KEY 
UPDATE price = :price 
```

*只需更改您首先需要的值。*

# css - CSS保留页脚标志

> ID：16145945
> 
> 赞同：1
> 
> 时间：2013-04-22T11:22:01.027
> 
> 标签：css

我对 JSFiddle 中发布的下一个代码有以下问题：http: [//jsfiddle.net/b9XVV/1/](http://jsfiddle.net/b9XVV/1/)

HTML

```
<div class="content">
    <div class="header">THGE HEADER OF THE PAGE</div>
    <div class="thebody">
        HERE GOES THE CONTENT OF THE PAGE......
    </div>
    <div class="footer">
        <div class="footerContent">
            <div class="footer1">Footer section</div>
            <div class="footer2"></div>
        </div>
    </div>
</div> 
```

CSS

```
.header {
        width:100%;
        height:50px;
        background-color:#FFFF58;
    }
    .thebody {
        width:500px;
        height:400px;
        margin:0 auto;
        background-color:#DDD;
    }
    .footer {
        width:500px;
        height:50px;
        background-color:#696969;
        margin:0 auto;
    }
    .footerContent {
        width:500px;
        height:50px;
    }
    .footer1 {
        width:400px;
        height:50px;
        float:left;
    }
    .footer2 {
        width:100px;
        height:50px;
        float:left;
        background-color:#FFddFF;
        position:fixed;
        right:0;
    } 
```

问题是粉红色的Div应该始终留在页脚并固定在右侧，但是如果窗口宽度小于主体宽度加上粉红色的Div宽度，则粉红色的Div应该保持在主页脚的左侧（500px宽度）

另一个问题是滚动内容时，粉红色的 div 应该始终保持在页脚的同一级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:40:10.427

CSS：

```
.footer2 {
    width:100px;
    height:50px;
    background-color:#FFddFF;
}
@media all and (max-width: 649px){
    .footer2 {
        position: inline;
        float: right
    }
}
@media all and (min-width: 650px){
    .footer2 {
        position:fixed;
        right:0;
        bottom: 0;
    }
} 
```

演示： http: [//jsfiddle.net/b9XVV/2/](http://jsfiddle.net/b9XVV/2/)
观看媒体查询的兼容性：[http://caniuse.com/#feat=css-mediaqueries](http://caniuse.com/#feat=css-mediaqueries)您的主要问题（如果适用）是 IE8。

# jquery - 使用 NodeJS、Express 和 JQuery GET 请求作为 POST 到达服务器

> ID：16145946
> 
> 赞同：1
> 
> 时间：2013-04-22T11:22:05.447
> 
> 标签：jquery, node.js, express

我是 Node.JS 和 Express 的新手，如果这是一个新手问题，请原谅我。我正在使用一个 JQuery EasyUI DataGrid，它被配置为使用“get”作为填充方法。但是，当请求到达 Express 服务器时，它似乎是一个进入的 POST，并且调用了错误的服务器方法。

卡了这几天了...请帮助...

从 app.js 中提取

```
 app.configure(function(){
   app.set('port', process.env.PORT || 3000);
   app.set('views', __dirname + '/views');
   app.set('view engine', 'jade');
   app.use(express.favicon());
   app.use(express.logger('dev'));
   app.use(express.bodyParser());
   app.use(express.methodOverride());
   app.use(express.cookieParser('your secret here'));
   app.use(express.session());
   app.use(app.router);
   app.use(express.static(path.join(__dirname, 'public')));
 });

 app.configure('development', function(){
   app.use(express.errorHandler());
 });

 app.get('/', routes.index);
 app.get('/users', user.list);
 app.get('/TrainingPlans', TrainingPlans.findAll);    // THIS IS THE ONE I WANT TO USE 
 app.get('/LoadSampleData',populateDB);
 app.get('/ClearAllTrainingPlans',clearTPsFromDB);
 app.get('/TrainingPlans/:id', TrainingPlans.findById);
 app.put('/TrainingPlans/:id', TrainingPlans.updateTrainingPlan);
 app.delete('/TrainingPlans/:id', TrainingPlans.deleteTrainingPlan); 
```

从 INDEX.HTML 中摘录

```
 <table id="tpstable" title="Training Plans" class="easyui-datagrid"      style="width:550px;height:250px"
        url="/TrainingPlans"
        toolbar="#toolbar"
        method="get"
        rownumbers="true" fitColumns="true" singleSelect="true">
     <thead>
     <tr>
         <th field="name" width="50">Name</th>

         <th field="_id" width="70">_id</th>

         <th field="description" width="100">Description</th>
     </tr>
     </thead>
 </table>
 <div id="toolbar">
     <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true"      onclick="create_trainingplan()">Create Plan</a>
     <a href="#" class="easyui-linkbutton" iconCls="icon-edit" plain="true"      onclick="edit_trainingplan()">Edit Plan</a>
     <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true"      onclick="delete_trainingplan()">Remove Plan</a>
 </div> 
```

通过使用而不是在 HTML 表定义中设置来自 JS 的 Data DataGrid，让它在最后工作。

```
$('#tpstable').datagrid({
    url:'/TrainingPlans',
    toolbar:"#toolbar",
    method:"get",
    rownumbers:"true",
    fitColumns:"true",
    singleSelect:"true" 
 }); 
```

谢谢大家的帮助......和

科马克

# python - 使用 python wand 对图像进行灰度化

> ID：16145959
> 
> 赞同：10
> 
> 时间：2013-04-22T11:22:39.670
> 
> 标签：python, imagemagick, grayscale, magickwand, wand

我想使用 ImageMagick [http://wand-py.org](http://wand-py.org)的 Python API 绑定来直接操作图像。但是，我无法从文档中推断出如何使用灰度转换。任何人都可以提供有关此问题的信息吗？

```
from wand.image import Image
try:
  with Image(file=path) as img:
    img.grayscale() # PSEUDOCODE for my given problem
except:
  pass 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-03T14:30:54.717

这可以通过设置图像的色彩空间来实现。

```
from wand.image import Image
with Image(filename='color.jpg') as img:
    img.type = 'grayscale';
    img.save(filename='grayscale.jpg'); 
```

进一步阅读：

*   [http://docs.wand-py.org/en/latest/wand/image.html#wand.image.IMAGE_TYPES](http://docs.wand-py.org/en/latest/wand/image.html#wand.image.IMAGE_TYPES)
*   [http://docs.wand-py.org/en/latest/guide/colorspace.html](http://docs.wand-py.org/en/latest/guide/colorspace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-29T10:26:28.347

这是正确的代码：

您需要转换色彩空间：

```
 with Image(filename=str(f)) as img:
        img.transform_colorspace('gray') 
```

# mongodb - 在 MongoDb 中查询不同的非空值

> ID：16145962
> 
> 赞同：4
> 
> 时间：2013-04-22T11:22:43.443
> 
> 标签：mongodb

我刚刚开始学习 MongoDb，并且在不同的查询方面遇到了一些问题。

例如，如果我运行查询

```
db.images.distinct('gallery') 
```

我得到了预期的结果，但也得到了空字符串和空值。如何编写只返回非空值的查询？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T11:34:26.483

避免只`null`使用值[$ne](http://docs.mongodb.org/manual/reference/operator/ne/)

```
db.images.distinct( "gallery" , { "gallery" : { $ne : null } } ); 
```

[或通过使用$nin](http://docs.mongodb.org/manual/reference/operator/nin/)在数组中指定来避免`""`,等等。`null`

```
db.images.distinct( "gallery" , { "gallery" : { $nin : ["", null] } }); 
```

# rtc - 如何在 RTC 源代码管理中隐藏特定用户的流？

> ID：16145966
> 
> 赞同：1
> 
> 时间：2013-04-22T11:22:49.080
> 
> 标签：rtc

如何从同一项目区域/团队中的特定团队成员隐藏特定流？

似乎实现这一点的唯一方法是将流上的可见性更改为团队区域。此团队区域包含我希望能够查看流的用户。

我正在使用 RTC 版本 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:40:27.740

更改 Stream 的所有者通常是我“隐藏” Stream 的方式。

我没有将项目区域或团队作为 Stream 的所有者，而是将自己置于其中。
正如您所提到的，“一个团队区域”是另一种选择。

这是 RTC3.0.1 版本的一部分，它确实具有“[控制对流的访问权限](https://jazz.net/library/article/215#share_workspace)”，不仅设置流的所有权，还设置组件的所有权，并将所述组件限制为拥有流的团队：

> 通过选择 Flux Capacitor 2 并单击 Change Owner 按钮将组件设为私有。
> 在所有权对话框中，展开 JUnit Project 并选择 Flux Capacitor Tiger Team。
> **通过选中 Restrict to members of this team area 及其子团队区域来限制可见性**，如图 10 所示

![严格](https://i.stack.imgur.com/tYXaO.png)

# php - 如何在 Magento 管理面板中为每个用户设置不同的起始页面？

> ID：16145971
> 
> 赞同：2
> 
> 时间：2013-04-22T11:23:12.553
> 
> 标签：php, magento

我想为每个管理员用户显示不同的启动页面。那我可以吗？

例如。Supper User 的启动是 'Dashboard'

```
Admin User user1's  start up page will be 'sales'

Admin User user2's  start up page will be 'customer' 
```

我该怎么做？请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:35:25.247

你有很多用户吗，如果没有，你可以为每个管理员用户转到系统菜单>配置>管理>启动页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-18T18:41:52.747

这个问题似乎更老，可能最初被问到 Magento 1 但如果有人仍然对 Magento 2 有同样的问题，那么下面的扩展应该有助于解决这种情况

[https://redchamps.com/admin-user-specific-startup-page-magento-2-extension.html](https://redchamps.com/admin-user-specific-startup-page-magento-2-extension.html)

请注意，这是一个付费扩展，我属于开发它的公司。

# database - 从数据库而不是弹簧中的属性文件实现本地化

> ID：16145980
> 
> 赞同：1
> 
> 时间：2013-04-22T11:23:34.743
> 
> 标签：database, spring-mvc, localization, using

我是spring-mvc的新手。使用属性文件进行本地化工作正常。但是我在数据库中有翻译（键，值_en，值_native）如何从数据库实现本地化。我看到了实现抽象消息源的答案，没有得到那个。我没有得到那个如何切换语言并在调度程序 servlet 中进行配置。

帮助我清楚地了解这个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-29T22:00:59.490

一个简单的 googlins 把我带到了这篇文章，你应该看看：

[http://blog.javaforge.net/post/32188367580/database-driven-message-source-in-spring](http://blog.javaforge.net/post/32188367580/database-driven-message-source-in-spring)

基本思想是`AbstractMessageSource`使用几个替代类进行扩展：您可以根据应用程序的增长方式选择使用哪个类（固定语言与固定键）。

# javascript - jquery asp.net，停止回发

> ID：16145989
> 
> 赞同：0
> 
> 时间：2013-04-22T11:24:23.830
> 
> 标签：javascript, jquery, asp.net, javascript-events

我有一个文本框，我希望用户能够在 TextBox 中输入，当他们按 Enter 键时，我希望 jQuery 对 Web 方法进行 ajax 调用。
问题是，当用户按回车键时，该方法被调用，但随后页面因返回而刷新。我试过使用`return false`但没有结果。

**这是代码：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<meta http-equiv="X-UA-Compatible" content="IE=7" />  
<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<script language="javascript">
   function serviceCall(getText) {          
      $.ajax({
       type: "POST",
       url: 'ActiveDirectoryAutoFillWebService.asmx/TestMethod',
       data: "{'getId':'+ getText +'}",
       contentType: "application/json; charset=utf-8",
       dataType: "json",
       success: function (msg) {
       $("#divResult").html(msg.d);
       },
       error: function (e) {
       $("#divResult").html("WebSerivce unreachable " + e.name + " " + e.message);
     }
   });  
  //  return false;       This does not work      
}
function searchKeyPress(e) {
   if (typeof e == 'undefined' && window.event) { e = window.event; }
       if (e.keyCode == 13) {              
           serviceCall(e)   
           //  return false;       This does not work         
       }          
 }
 </script>
</head>
<body>

<form id="form1" runat="server">      
    <div id="divResult" style="margin-top: 20px;"></div>
    <asp:TextBox ID="tbSearchName" runat="server" onKeyPress="searchKeyPress(event); "></asp:TextBox>      

</form>
</body>
</html> 
```

如果有人知道我如何做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:34:41.197

查看事件对象上的以下函数：

*   [停止立即传播](http://api.jquery.com/event.stopImmediatePropagation/)
*   [停止传播](http://api.jquery.com/event.stopPropagation/)
*   [防止默认](http://api.jquery.com/event.preventDefault/)

在您的情况下，您可以使用

```
e.preventDefault() 
```

这将阻止默认操作发生。

# jquery - 日历容器外的jQuery FullCalendar插件标题

> ID：16145992
> 
> 赞同：1
> 
> 时间：2013-04-22T11:24:27.650
> 
> 标签：jquery, fullcalendar

在 FullCalendar 插件中可以定义标题，在哪里可以看到从……到……的日期（显示事件 23.04.2013 - 25.04.2013）。这可以通过以下方式完成：

```
header: {
    left: 'prev,next today',
    center: 'title',
    right: 'year,month,agendaWeek,agendaDay'
} 
```

有没有办法提取`title`用于其他元素？我需要在`#calender`容器外显示此标题内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:50:39.310

你可以用 jquery

```
var title = $(".fc-header-title h2").html(); 
```

# c++ - 为什么 read() 比 getc() 慢

> ID：16145994
> 
> 赞同：-4
> 
> 时间：2013-04-22T11:24:32.747
> 
> 标签：c++, c, linux, unix

为什么系统调用 read() 比 getc() 函数慢？

```
for (;;) {
        chr++;
        amr=read(file1, &wc1, 1);
        amr2=read(file2, &wc2, 1);
        if (wc1 == wc2) {
            if (wc1 == '\n')
                line++;
            if (amr == 0) {
                if (eflg)
                    return (1);
                return (0);
            }
            continue;
        } 
```

比

```
for (;;) {
    chr++;
    c1 = getc(file1);
    c2 = getc(file2);
    if (c1 == c2) {
        if (c1 == '\n')
            line++;
        if (c1 == EOF) {
            if (eflg)
                return (1);
            return (0);
        }
        continue;
    } 
```

当 getc() 调用它使用 read() 系统调用时，为什么更慢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T11:29:12.177

`read()`涉及到内核的上下文切换，比较慢。当您直接使用它并一次读取一个字节时，您有很多上下文切换。但是，当您使用 时`getc()`，它将调用`read()`一次 4 或 8 kB，然后从其中返回字符而无需进一步的上下文切换，直到它耗尽缓冲区。

如果你使用`read()`更大的缓冲区，它会比 更快`getc()`，因为标准 C 库的通用缓冲有一些开销。

（编辑）请注意，对于所有常用存储介质，磁盘只能以 512 字节的块读取。所以无论如何，内核中必须有一些缓冲。而且由于内存是按 4096 字节的页面分配的，因此大多数系统（Linux 确实如此）在每次请求物理存储时至少会读取这么多的内容。但是上下文切换也很昂贵，因此在用户空间中额外的缓冲层仍然可以节省大量时间。此缓冲用于所有 libc IO，其中包括所有使用`FILE*`的内容（缓冲区是`FILE`结构的一部分），因此`fread()`将比`read()`小型读取更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:44:14.310

答案＃1：它并不慢。

答案＃2：这取决于。

您不想为从文件中读取的每个字节进行系统调用（包括内存保护系统上的上下文切换）。您将在第一个字节大小的访问中，将适量的数据（比如 4k）读入内存，并将第一个字节提供给调用者。在随后的字节大小读取中，您根本不必调用内核或实际访问文件；您只需从缓冲区传递下一个字节，直到您必须读取另一个 4k 块。

这是标准 C 库的调用（`fread()`、`fgetc()`等`fgets()`）默认执行的操作。您可以检查`BUFSIZ`以获取默认缓冲区大小。`setvbuf()`您可以通过调用更改缓冲区大小或完全禁用缓冲。

`read()`不是标准 C 库的一部分，它是一个 POSIX 系统调用。基本上，它是 POSIX 系统上标准 C 库调用的*后端*。（在 Windows 系统上，`fgetc()`将改为调用 Win32 API。）因此，`read()`它不缓冲，并且为字节大小的块调用它是非常低效的。如果您调用`read()`，您通常会这样做，因为您想自己进行缓冲。

一般来说，不要混合使用 POSIX 和标准库 I/O 调用。使用 POSIX API 进行低级访问，使用标准库以方便移植（以及良好的默认性能）。

# list - Element handling issue in Prolog, but not in a regular list?

> ID：16145995
> 
> 赞同：3
> 
> 时间：2013-04-22T11:24:33.777
> 
> 标签：list, prolog, element, member

I'm trying to write an element handling function in Prolog. It's almost the same as the prolog predicate member/2 but it must do the job in a different way. For being specific; I must say the member/2 predicate function is this:

```
member(X, [X|_]).
member(X, [_|Tail]) :-
   member(X,Tail). 
```

When you give a query for example: `member(X, [1,2,3])`.

It gives you `X = 1; X = 2; X = 3;` in this order for all redo's. I want an element function almost the same. I want the same result with the member function when I give a query like this:

```
element(X, (1,2,3)). 
```

The difference is just parenthesis instead of bracekts like these : []
In order to do this I tried that:

```
element(X, (X,_)).
element(X, (_,Tail)) :-
   element(X,Tail). 
```

Which is exactly the same as member/2 predicate function implementation. But this doesn't work because it doesn't giving the last element which is `X=3.` So I added one more fact that is:

```
element(X, X). 
```

But this doesn't work either because (obviously) it is giving unnecessary answer with real elements like these:

```
X=(1,2,3)
X=(2,3) 
```

How can I handle this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:59:41.487

Seems that a cut can solve your problem:

```
element(X, (X, _)).
element(X, (_, Tail)) :-
    !, element(X, Tail).
element(X, X). 
```

test:

```
?- element(X, (1,2,3)).
X = 1 ;
X = 2 ;
X = 3.

?- element(2, (1,2,3,2)).
true ;
true. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:14:08.280

Terms like `(1,2,3)` in Prolog have commas as their primary functor. Probably you want to use operator [univ](https://stackoverflow.com/questions/4129484/prolog-gnu-univ-operator-explanation-of-it), denoted by infix `=..`, or its close relations `functor/3` and `arg/3` to pick apart these tuples.

# php - 具有多值字段的mysql高级搜索查询

> ID：16145998
> 
> 赞同：0
> 
> 时间：2013-04-22T11:24:42.550
> 
> 标签：php, mysql

我有一个搜索功能，可以从 db 表中按不同的条件进行搜索。这是带有一些数据的表格字段

```
id first_name last_name Province_id
1 阿里阿里 2,12
2 艾哈迈德艾哈迈迪 22,1,4

```

一个人可以在不同的省份，并且它保存在以“，”分隔的表格中，在省字段中，我知道它没有标准化。我使用跟随功能进行搜索

```
$WHERE_ARR = array();
    if(trim($first_name)!=""){
        $WHERE_ARR['first_name']        = " p.first_name like '%".$first_name."%' ";
    }
    if(trim($last_name)!=""){
        $WHERE_ARR['last_name']     = " p.last_name like '%".$last_name."%' ";
    }

    if(trim($province)!=""){
        $WHERE_ARR['province'] = " p.province_id = ".$province." ";
    }     
    $WHERE_STR  =   implode(' AND ', $WHERE_ARR);
    $WHERE_STR  =   (trim($WHERE_STR)!="")?" AND " . $WHERE_STR:'';

    $QUERY  =   "
                SELECT p.*,pr.province
                FROM ndi_participants p,ndi_provinces pr
                WHERE pr.province_id = p.province_id
                ". $WHERE_STR . " 
                ORDER BY pr.province ASC
                LIMIT ".$start.", " . $perpage . "
                ";
    return $this->db->query($QUERY); 
```

当我按省字段搜索时，肯定不准确。当它是用“，”分隔的多值时，我如何按省字段搜索
注意：我正在使用codeigniter

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:28:36.367

尝试`FIND_IN_SET`mysql函数在provience_id中搜索

```
if(trim($province)!=""){
        $WHERE_ARR['province'] = " p.province_id = FIND_IN_SET(".$province.",p.province_id)";
    } 
```