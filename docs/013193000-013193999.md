# StackOverflow 问答 13193000-13193999

# .net - 如何使任务超时，但记录任务实际花费了多长时间？

> ID：13193002
> 
> 赞同：0
> 
> 时间：2012-11-02T10:00:07.073
> 
> 标签：.net, web-services, task-parallel-library

我有一个我提出请求的第三方 Web 服务。如果请求花费的时间超过 6 秒，我会放弃结果。

我想做的是进行服务调用，如果需要超过 6 秒的超时并返回，但是当服务调用实际返回结果或底层连接超时时，我想记录调用的时间会采取。

动机是我目前在 6 秒时超时，并且我知道有一定比例的呼叫超时。我想要的是一些关于通话通常需要多长时间的数据，即使是过去 6 秒的通话。可能是如果我将超时时间增加到 7 秒，那么我的超时时间会少得多，但如果没有我不知道的数据。

我在 C# 中工作，有什么我可以做的，`Task<T>`或者我必须构建一些更定制的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:29:04.717

一种选择是：

*   一、ContinueWith关于任务做日志
*   然后，使用 Task.WhenAny(task, Task.Delay) 超时

# ios - UIActivityIndi cator 在构建 UIView 层次结构时旋转？

> ID：13193004
> 
> 赞同：0
> 
> 时间：2012-11-02T10:00:12.710
> 
> 标签：ios, uiview, grand-central-dispatch, uiactivityindicatorview

有没有办法在构建复杂的 UIView 层次结构时为 UIActivityIndi​​cator 设置动画？我有一个复杂的层次结构，要通过'viewDidLoad'中的'addSubview：'添加（在一个主要的故事板项目中，但这个场景是动态创建的）。不摆弄 GCD，只要初始化需要，UI 就会阻塞。将初始化放入“dispatch_sync”（如下所示）不会显示/动画指示器，将其放入“dispatch_async (dispatch_get_global_queue (0,0),...”会导致崩溃（因为 UIKit 代码需要在主队列上运行？ )，并将其放入 'dispatch_async (dispatch_get_main_queue(),...' 会创建一个死锁（我猜是苹果公司宣布的）。

```
-(void)viewDidLoad {
    dispatch_sync (dispatch_get_global_queue (0,0), ^{
        // initialization here
        })
} 
```

那么前进的方向是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:05:47.880

将代码放入方法中并尝试

```
– performSelectorOnMainThread:withObject:waitUntilDone:
– performSelectorOnMainThread:withObject:waitUntilDone:modes: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:34:02.863

为什么不在 viewDidLoad 中启动活动指示器，然后使用 performSelectorInBackground 安排初始化：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [self.activityIndicator startAnimating];
    [self performSelectorInBackground:@selector(finishInitializing) withObject:nil];
}

-(void)finishInitializing {
    // finish resource-intensive setup
    // ...

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.activityIndicator removeFromSuperview];
        // create view hierarchy
        // ...
    });
} 
```

这允许`viewDidLoad`返回，以便微调器可以在主线程上设置动画。

# python - 使用并行 Python 模块时无法更新对象中的“dict”

> ID：13193005
> 
> 赞同：0
> 
> 时间：2012-11-02T10:00:17.433
> 
> 标签：python, parallel-processing

使用 pp 模块时无法更新对象“测试”中的字典“参数”。谁能告诉我为什么会这样？只看代码：

```
import pp

class test(object):
    params = {'n': None}
    dic2 = {}
    n = None

    def __init__(self, i):
        #won't change
        self.params['n'] = i
        #changed
        self.n = i
        self.dic2 = {i: i}

    def run(self):
        print self.n, self.params, self.dic2

job_server = pp.Server()

jobs = []

for i in xrange(10):
    t = test(i)
    #won't change
    t.params['n'] = i
    #changed
    t.n = i
    t.run()
    jobs.append(job_server.submit(t.run))

[job() for job in jobs] 
```

结果：

```
0 {'n': 0} {0: 0}
1 {'n': 1} {1: 1}
2 {'n': 2} {2: 2}
3 {'n': 3} {3: 3}
4 {'n': 4} {4: 4}
0 {'n': None} {0: 0}
1 {'n': None} {1: 1}
2 {'n': None} {2: 2}
3 {'n': None} {3: 3}
4 {'n': None} {4: 4} 
```

正如我们在使用 pp 时看到的，“params['n']”无法更新。这是一种奇怪的行为。这怎么可能发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:14:49.087

这是多处理模块的常见缺陷。

当您调用 like`job_server.submit(t.run)`时，对象`t`会被腌制，发送到新进程，取消`run`腌制，执行并且返回值被腌制，发送回主进程并取消腌制。

现在，不真正支持类酸洗（参见[此处](http://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)）。pickle 只是腌制名称，并且在 unpickling 时重新导入模块以获取类对象。

由于您使用的变量是类变量，因此在重新导入模块时它们会重新初始化。函数的属性也会发生同样的情况。

如果要保留这些变量的值，则必须将它们设为实例变量。

# paypal - Paypal - 在付款时警告网站

> ID：13193006
> 
> 赞同：0
> 
> 时间：2012-11-02T10:00:25.810
> 
> 标签：paypal

我正在构建一个基于信用系统的 SAAS，它是通过 Paypal 购买的。

现在，我使用带有 PDT 的付款标准来检查付款是否已正确完成。交易完成后，Paypal 将客户重定向到我网站上的一个页面，该页面检查交易是否顺利，并提供与支付价格相匹配的信用额度。

这工作正常，但我有一个问题：由于网站需要从 Paypal 重定向以添加信用，如果客户由于某种原因没有被重定向，客户支付但没有收到信用。

因此，我的问题是：有没有办法以更强大的方式从 Paypal 警告我的网站，如果出现错误，是否可以取消交易，以及如何？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:05:45.530

您想使用 Paypal IPN，以便在付款完成时通知您的服务器。您可以在付款中添加其他字段，以便您了解登录用户的 ID 等信息。

# websphere - 没有 MPNS 的 Windows Phone 8 推送通知？

> ID：13193007
> 
> 赞同：0
> 
> 时间：2012-11-02T10:00:30.927
> 
> 标签：websphere, windows-phone-8, mqtt

我们已经有一个推送通知系统，它由服务器端的 Websphere MQTT 和 Android 端的 Paho 客户端组成。我们现在想把它的范围扩展到Windows Phone 8，但据我从微软的文档中了解到，为了在WP8中实现通知，有必要使用MPNS。我的问题是，我们是否有任何解决方法来使用我们现有的通知系统（Websphere MQTT）而不使用 MPNS 的任何部分？

我们编写的 .NET 客户端与我们的系统完美配合，我相信经过一些修改后它可以在 WP8 平台上运行，不知何故。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:39:45.847

> 我的问题是，我们是否有任何解决方法来使用我们现有的通知系统（Websphere MQTT）而不使用 MPNS 的任何部分？

不可以。Microsoft 要求应用程序通过 Microsoft Push Notification Hub 以确保隐私并避免 3rd 方服务发疯。

鉴于 PUSH 通知执行 OS 调用以显示敬酒、更新磁贴等，重要的是不要滥用通知，否则可能会导致大量电池使用，或为所有者带来更高的电话费设备。

但是例如，将 Windows Azure 服务集成到 MPNS 是一种形式，所以我不明白您为什么要尝试创建一个变通方案，除非您认为您的应用程序不会被认证？

# regex - 从 ldapsearch 的输出创建名称/电子邮件文本文件

> ID：13193010
> 
> 赞同：2
> 
> 时间：2012-11-02T10:00:39.280
> 
> 标签：regex, awk, ldap, grep

好吧，我需要生成一个带有名称和电子邮件地址的文本文件，格式为

姓名、电子邮件地址

来自 ldapsearch 的输出。但这并不像看起来那么简单（至少对我来说）。

我现在有一个电子邮件地址列表：

```
 ldapsearch -x -b ou=<somevalue>,ou=<somevalue>,ou=<somevalue>,dc=<somevalue>,dc=<somevalue> objectClass=posixAccount | grep "^mail: .*$" | awk '{print $2}' 
```

和名单：

```
 ldapsearch -x -b ou=<somevalue>,ou=<somevalue>,ou=<somevalue>,dc=<somevalue>,dc=<somevalue> objectClass=posixAccount | grep "^description: .*$" | awk '{print $2,$3}' 
```

但无论我尝试了什么 - 我没有得到一个命令给我我需要的列表，如上所示......

这个命令给了我名字和电子邮件——但不是一行：

```
ldapsearch -x -b ou=<somevalue>,ou=<somevalue>,ou=<somevalue>,dc=<somevalue>,dc=<somevalue> objectClass=posixAccount | awk '/description:|mail:/{print $2,$3}' 
```

有没有办法制作一个很酷的正则表达式来解决这个问题？还是我想不到的出色的 shell 命令？

任何帮助将不胜感激。

问候

短剑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:43:58.633

你遇到的问题是`ldapsearch`线轴的输出到单独的行，所以当你`grep`，你会得到类似的东西：

```
description: Joe Bloggs
mail: jbloggs@example.com 
```

如果您可以假设您的所有目录条目都有一个`description`and`mail`字段并且`ldapsearch`将始终按此顺序输出它们，那么您可以将结果通过管道`grep`输入`sed`（为清楚起见，此处显示为多行）：

```
ldapsearch ... |
grep -e '^(description|mail):' |
sed -e 'N;s/description: \(.*\)\nmail: \(.*\)/\1, \2/;P;D' 
```

此`sed`脚本将行分成两行，然后运行正则表达式替换（注意，这不一定是可移植的，因此您可能需要试验）以删除字段名称，打印并删除其当前缓冲区，以便它可以移动到下一对. 您也许可以生成一个不关心字段返回顺序的神奇正则表达式`ldapsearch`，但生命太短了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:33:09.413

如果我记得，这个 ldap 输出记录由空行分隔，所以你可以写：

```
perl -00 -ne '
    /(?<=description: )(.*$)/m and print "$1, ";
    /(?<=mail: )(.*$)/m and print "$1\n";
' 
```

# ios - purgeIdleCellConnections：找到一个要清除 conn=0x1ddde360

> ID：13193011
> 
> 赞同：13
> 
> 时间：2012-11-02T10:00:42.087
> 
> 标签：ios, xcode, ios6, iphone-5

我找不到解决此问题的适当方法。我想有人可以帮我清除这个错误。

**摘要：** 当我使用 3G 连接在设备上测试我的应用程序时，当控制台`"purgeIdleCellConnections: found one to purge conn = 0x1ddde360"`多次显示此错误时，它以不同的 number 出现`(0x1ddde360 or 0x21b98a60 or....)`。有时它挂起，应用程序崩溃并死掉。我无法打开应用程序。我必须删除并重新构建。当我使用 Wi-Fi 时，它工作正常：完全没有问题。

**实际结果：** 我在我的应用程序中使用 Web 服务 (WSDL)。在启动应用程序本身时，我调用了多个 Web 服务。此应用程序已在 App Store (Promayarnlite) 中，但该文件是使用 IOS 5.1 SDK 构建的，因此运行良好。现在我将我的 Xcode 更新到 4.5.1 和 IOS 6 SDK，所以我想在 App Store 中更新我的应用程序。我在这部分苦苦挣扎。

编辑：A：内部 NSURLConnection 维护一个连接缓存。每个缓存条目代表一组到主机的持久 HTTP 连接。当一个新请求进来时，它会在缓存中的一个条目上排队。这可能是一个现有条目，也可能是一个新条目，它还可能在该条目内生成一个新的 HTTP 连接，具体取决于各种复杂因素（保护空间、身份验证状态[在身份验证方法的情况下——是，我在看着你，NTLM！——有状态的]、流水线、各种缓存限制等等）。当与缓存条目关联的连接完成所有请求的运行时，它会在缓存条目的队列中查找更多工作；如果找不到任何连接，则连接空闲。如果连接空闲时间过长，

这种缓存实现在 iOS 6 中发生了变化。在 iOS 6 之前，清除空闲缓存条目的机制单一，Mac OS X 和 iOS 的超时时间完全不同（30 秒与 6 秒，iOS 值可能低至在旧版本的 iOS 上为 3 秒）。在 iOS 6 中，现在有两种清除空闲缓存条目的机制，一种适用于通过 WWAN 运行的连接，另一种适用于所有其他连接。WWAN 超时已降至其传统值（3 秒），而所有其他连接超时已提高到旧的 Mac OS X 默认值（30 秒）。

您看到的日志消息是在清除 WWAN 连接时生成的。此日志消息在 iOS 5.x 中不存在，这解释了为什么您在测试中没有看到它。然而，基本机制以一种或另一种形式存在于所有版本的 iOS 中。

此消息更可能是症状而不是原因。具体来说，该消息仅适用于空闲连接；这只是 NSURLConnection 清理没有做任何有用的持久 HTTP 连接。如果您的网络出现问题，您需要调查连接空闲的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:31:22.963

在使用 AdMob 中介 SDK 时，在**运行 iOS 6.0.1 (iPhone 3GS) 的设备上**看到了这一点。应用程序本身与服务器建立了 100 多个连接（下一个服务器 API 将解决该问题），但这些控制台日志消息仅在 AdMob 连接激活后才开始出现。3G 和 Wifi（10M 连接）。

最好的猜测是，iOS 不乐意**从两个不同的网络库**（在本例中为 AdMob）获得网络调用，但我想它可能是任何东西。只是巧合。

有时应用程序完全卡住，有时没有明显的问题。很想解决这个问题，但到目前为止还没有找到任何东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:20:48.200

在连接到蜂窝网络的设备上，我观察到这条调试消息来自 iOS 6.0 SDK。时间方面，我发现它与在我的应用程序中被终止的“活动”AJAX 调用相关。然而，证明任何事情都非常困难，因为这只发生在 UIWebView 中呈现网页时。我只是说我不认为这些信息是良性的。我认为它们可能表明 Apple 框架中的一个错误，该错误在终止连接时过于激进。很难对在 UIWebView 内运行的、进行 AJAX 调用的 javascript 进行检测，因此目前这一切都是高度推测性的。

# extjs4 - Extjs 4 创建动态网格

> ID：13193013
> 
> 赞同：1
> 
> 时间：2012-11-02T10:00:44.300
> 
> 标签：extjs4

我在 extjs4 中创建网格面板，要求如下：

*   列名和列数据应取自 json 文件。
*   列数应根据 json 中存在的数据增加/减少。

我不想使用任何扩展/插件来做到这一点，请在 extjs4 中提出任何指针。

谢谢，

普拉文

# python - shutil.move IOError：[Errno 2] - 循环时

> ID：13193015
> 
> 赞同：2
> 
> 时间：2012-11-02T10:00:53.387
> 
> 标签：python, shutil

如果我自己运行shutil.move（file，dest）它工作正常，我遇到的问题是当我循环时，没有shutil.move，循环工作正常。

```
IOError: [Errno 2] No such file or directory: 'test.txt'

path = '/media/usb/Test/'
dest = '/media/usb/Done/'

for file in os.listdir(path):
    fullpath = os.path.join(path, file)
    f = open( fullpath , 'r')
    dataname = f.name
    print dataname

    shutil.copy(file, dest) 
```

我知道这很简单，我尝试了许多不同的方法，但就是无法理解这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:06:49.110

您提供`shutil.copy`的是文件名 ( `file`)，而不是完整路径，因此它可以找到该文件。

也许你的意思是：

```
shutil.copy(fullpath, dest) 
```

# core-data - 如何在没有 coredata 的情况下创建 nsmanagedobject 的实例？

> ID：13193023
> 
> 赞同：2
> 
> 时间：2012-11-02T10:01:18.407
> 
> 标签：core-data, nsmanagedobject

我对 coredata 有一个非常烦人的问题。我有一个 NSManagedObject 子类，即“客户”，一切都很好。有时我需要在 coredata 堆栈之外创建一个新客户，只有在某些情况下我需要保存它。

我知道我可以使用 NSUndomanager，但这似乎不是一个好主意。

现在我有两个类 Customer_managed（NSManagedObject 的子类）和 Customer_unmanaged（NSObject 的子类）。在 Customer_unmanaged 我添加了一个 -(void)save 方法，但这两个类非常耦合，我正在寻找一个最佳模式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:26:14.770

你正在以错误的方式解决这个问题。您应该始终使用托管对象上下文来创建托管对象。如果要丢弃它，只需在保存前删除该对象，它就永远不会触及持久存储。

如果您想将这两个实体分开，请考虑使用单独的上下文。

或者，考虑保存“非托管”实体，但用额外的布尔属性标记它们`unmanaged`。然后，您可以随时清除它们或在获取时忽略它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:14:01.603

可以在没有上下文的情况下创建 NSManagedObject。[Marcus Zarra在这个 SO-answer 中](https://stackoverflow.com/questions/3256195/how-to-deal-with-temporary-nsmanagedobject-instances/3258470#3258470)写道 。一句忠告：如果你试图创建一个带有 nil-context 的对象，`awakeFromInsert:`将不会被调用。

# c# - 使用@通过字符串定位文件

> ID：13193024
> 
> 赞同：-5
> 
> 时间：2012-11-02T10:01:19.713
> 
> 标签：c#, performance

> **可能重复：**
> [@(at) 登录文件路径/字符串](https://stackoverflow.com/questions/5179389/at-sign-in-file-path-string)

例如，在 C# 中，您可以使用此函数`@"stringpath"`代替`"stringpath"`

为什么我要在前面添加一个@？不使用 @?? 得到相同的结果

例子：

```
UploadFileMethod(@"C:\test.txt", @"http://site.com/bla/file.txt");

public static bool UploadFileToDocumentLibrary(string sourceFilePath, string targetDocumentLibraryPath)

{
//stuff here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:05:06.737

它改变了字符串的转义行为。使用时`@`我们不需要转义`\`字符。

因为路径应该是这样的：

`"C:\\abc.txt"`

# javascript - 重构javascript代码的方法

> ID：13193029
> 
> 赞同：2
> 
> 时间：2012-11-02T10:01:40.800
> 
> 标签：javascript, extjs, code-readability

我正在开发过去 3 个月的煎茶应用程序。

应用程序源包含几个 JS 文件，大约 20 个，每个文件平均包含 800 - 1000 行代码。代码完全混乱。它包含至少 20% 的不需要的死的、无法访问的代码。

现在手头的任务是清理所有内容并使代码更易于理解和维护。如果有人说要更改某些功能，我正在努力在代码中找到可以添加更改的正确位置。在这种情况下，我该如何处理手头的任务？

肯定会寻求一些可以减轻我工作量的自动化工具的帮助。提前致谢。

# symfony1 - 动态更改嵌入表单字段值 - Symfony 1.4

> ID：13193032
> 
> 赞同：1
> 
> 时间：2012-11-02T10:01:45.317
> 
> 标签：symfony1, symfony-1.4

我有一个关于 Symfony 嵌入表单的问题。基本上我有名为`Media`. `Media`字段将保存用户图像、产品图像等。

媒体计划：

```
Media:
  actAs:
    Timestampable: ~    
  columns:
    entity:
      type: string(60)
      notnull: true
    entity_id:
      type: bigint(20)
      notnull: true
    file:
      type: string(255)
      notnull: true 
```

这里，

*   `entity` =产品或用户等
*   `entity_id`= product_id 或 user_id 等

所以，我想动态更改实体值取决于我在哪里调用这些表单。

```
 $this->embedForm('media', new MediaForm()); 
```

所以，我想从这里更改字段值，或者如果有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:31:33.933

为了保存 Media 对象，需要一个 id，因此可以在保存“父”对象后进行保存。我认为您拥有的最佳选择是`saveEmbeddedFroms()`方法（以 MediaForm 嵌入的形式）：

```
public function saveEmbeddedForms($con = null, $forms = null)
{
  if (isset($this->embeddedForms['media']))
  {
    $mediaForm = $this->getEmbeddedForm('media');

    if ($mediaForm instanceof MediaForm && $mediaForm instanceof sfFormDoctrine)
    {
      $mediaFrom
        ->getObject()
        ->set('entity', get_class($this->getObject()))
        ->set('entity_id', $this->getObject()->get('id'))
      ;
    }
  }

  parent::saveEmbeddedForms($con, $forms);
} 
```

实际上你也可以把它放到`BaseFormDoctrine`类中，这样每一个嵌入了 MediaForm 的学说形式都会被正确保存。

## 编辑：最后*sfFormObject*对我有用

```
public function saveEmbeddedForms($con = null, $forms = null)
{
  if (null === $con)
  {
  $con = $this->getConnection();
  }

  if (null === $forms)
  {
  $forms = $this->embeddedForms;
  }

  foreach ($forms as $form)
  {

    if ($form instanceof sfFormObject)
    {
      $form->getObject()->set('entity', get_class($this->getObject()))->set('entity_id', $this->getObject()->get('id'));
    }    

  }
  return parent::saveEmbeddedForms($con, $forms);
} 
```

# sqlite - SQlite 在两个字段中放置一个唯一关键字，其中一个可能为空

> ID：13193040
> 
> 赞同：0
> 
> 时间：2012-11-02T10:02:27.560
> 
> 标签：sqlite

我有一种情况，我想要一个包含三个字段的表，一个 ID、一个建筑物名称和一个房间名称。ID 只是一个自动增量，而 Building 不是 NULL。但是房间可以为NULL，但我想安排建筑物和房间的组合是唯一的。这可能吗？我该如何设置？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:21:09.940

创建一个带[`unique`](https://sqlite.org/lang_createtable.html#constraints)约束的表：

```
create table t (id integer primary key,
                building text not null,
                room text,
                unique (building, room)); 
```

插入数据：

```
insert into t (building, room) values ("B1", "R1");
insert into t (building, room) values ("B1", "R2");
insert into t (building, room) values ("B1", null);
insert into t (building, room) values ("B1", "R3");
insert into t (building, room) values ("B1", "R1");
-- Error: columns building, room are not unique
insert into t (building, room) values ("B1", null);
-- Note: This last insert does not violate the constraint! 
```

查看数据：

```
select * from t;
1|B1|R1
2|B1|R2
3|B1|
4|B1|R3
5|B1| 
```

# jquery - jquery：在子窗口中包含选择器

> ID：13193043
> 
> 赞同：0
> 
> 时间：2012-11-02T10:02:48.437
> 
> 标签：jquery

我有一个子窗口，我正在尝试使用 jquery :contains 选择器，但它不起作用。

```
var child = window.open("index.html", null);
child.document.close();//I saw somewhere this was necessary...
$(child.document).ready(function() {
    setTimeout( function() { // necessary to wait a few seconds
        console.log($('.navigation .option:nth-child(4)', child.document).length);
        console.log($('.navigation .option:contains("Item4")', child.document).length);
    }, 5000);
}); 
```

:nth-child 正确返回：“Item4”。第二个找不到。HTML 是：

```
<div class="navigation">
    <div class="option">Item1</div>
    <div class="option">Item2</div>
    <div class="option">Item3</div>
    <div class="option">Item4</div>
</div> 
```

在普通窗口中， :contains 选择器可以工作 - 没问题。似乎 jquery 无法处理 :contains 在子窗口中。这是真的？

# java - 如何从 unix shell 脚本获取 java 程序完成状态？

> ID：13193044
> 
> 赞同：7
> 
> 时间：2012-11-02T10:02:48.810
> 
> 标签：java, shell, unix

例如我们正在执行下面的语句，我们希望根据 java 执行的状态进一步处理。

```
java -classpath  $CLASSPATH com.heb.endeca.batch.BatchManager "param1" "param2" "param3" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T10:05:57.467

如果您的 Java 代码以 退出[`System.exit(status)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#exit%28int%29)，您可以像这样在 Bash 中获取状态：

**爪哇：**

```
public class E {
    public static void main(String[] args) {
        System.exit(42);
    }
} 
```

**重击：**

```
$ java E
$ echo $?
42 
```

`$?`是最后完成的进程的退出状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:06:27.360

java 程序应该以 Sytem.exit(status) 结尾。此编号作为操作系统中的任何其他命令返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:26:32.467

正如其他人所说，您需要使用`System.exit()`来获得所需的输出。这背后的原因是`System.exit()`直接终止程序并退出返回定义的值。

如果您想知道为什么我们不能从该方法返回任何内容，答案是 -如果您分析黄金必需语句，那么`main`在 java方法中永远不会返回任何内容`main`

```
public static void main() 
```

您会看到，在 java 中 main 的返回类型为`void`.

因此，如果您正在从调用程序（在本例中为 Shell）检查 java 程序的返回状态，您实际上是在尝试读取 java 程序的退出状态，`jvm`而不是正常情况下始终为零的 java 程序的退出状态（ 0) 即使你的程序由于任何异常而崩溃，也很难。`OutOfMemory`只有当 jvm 由于意外原因或类似的关键原因而崩溃时，您才会获得非零退出状态。

希望这有助于您理解捕获 java 程序的退出状态。

# r - 控制 ggplot aes(size) 中的“基点”点大小

> ID：13193051
> 
> 赞同：8
> 
> 时间：2012-11-02T10:03:23.100
> 
> 标签：r, ggplot2

我正在寻找一种方法来增加或减少下图中的所有点。我可以控制 aes 内的内容。而且我可以控制aes之外的大小。但我不知道如何将两者结合起来。

```
df <- data.frame(val1 = rnorm(10, 5), val2 = rnorm(10, 5), size = rnorm(10, 5))
ggplot(df) + geom_point(aes(val1, val2, size = size)) 
```

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T10:19:15.667

`scale_size_`您可以使用该功能更改基本尺寸。例如，

```
g = ggplot(df) + geom_point(aes(val1, val2, size = size))
g + scale_size_continuous(range = c(1, 6))
g + scale_size_continuous(range = c(1, 18)) 
```

![在此处输入图像描述](../Images/ed7b2c405c45007fee807fc0b7b5ffe1.png)

# perl - 在 Perl 中使用 GD::Graph 时出现 png 方法错误

> ID：13193057
> 
> 赞同：0
> 
> 时间：2012-11-02T10:03:38.507
> 
> 标签：perl, gd-graph

在编译用于制作图形并将其保存到 png 文件的 perl 脚本时，我收到以下错误 - 无法通过包“GD::Graph::bars”定位对象方法“png”（可能您忘记加载“GD ::Graph::bars”？）

知道如何解决吗？

以下是我的代码 -

```
use CGI ':standard';
use GD::Graph::bars;
unlink("abc.png");
open (PIC, ">abc.png") or die "an error occurred: $!";
binmode PIC;

my @data = (["Jan", "Feb"],[23, 5]);

my $mygraph = GD::Graph::bars->new(500, 500);

$mygraph->set(
x_label     => 'Month',
y_label     => 'Number of Hits',
title       => 'Number of Hits in Each Month in 2002',) or warn $mygraph->error;

my $myimage = $mygraph->plot(\@data) or die $mygraph->error;

print PIC $mygraph->png;
close(PIC); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:42:18.187

得到错误 - 打印 PIC **$mygraph** ->png; 我需要使用 print PIC **$myimage** ->png;

# android - 如何在 SherlockFragment 中包含 MapView？

> ID：13193061
> 
> 赞同：1
> 
> 时间：2012-11-02T10:03:52.973
> 
> 标签：android, google-maps, actionbarsherlock

我有以下内容：

1)`MyActivity extends SherlockFragmentActivity`

2)`MyMapFragment extends SherlockFragment`

3）在`MyMapFragment`xml 文件中，我有`MapView`一个正确的 apiKey

4) 我已将**actionbarsherlock-plugin-maps-4.1.0.jar 添加**到我的项目的构建路径中

所以我在做：

```
ft.replace(android.R.id.content, new MyMapFragment()); 
```

我得到如下异常：

> 11-02 13:56:43.826: E/AndroidRuntime(28466): Caused by: java.lang.IllegalArgumentException: 你需要为每个 MapView 指定一个 API Key。有关详细信息，请参阅 MapView 文档。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:00:19.987

在 ActionBarSherlock Plugin: Maps 中，Jake Warton 明确表示：

> 注意：这不支持将 MapView 放置在片段中。

请参阅[https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/blob/master/README.md](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/blob/master/README.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:46:55.203

这篇博文对我来说很重要：

[http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/](http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/)

# java - 奇怪的mysql检索与休眠条件

> ID：13193062
> 
> 赞同：2
> 
> 时间：2012-11-02T10:03:56.980
> 
> 标签：java, mysql, hibernate-criteria

在网络服务中，我具有以下功能，可根据患者的电话检索医生及其患者的一些信息：

```
 public String findDoctorOfPatient(String phone) {
    AnnotationConfiguration config = new AnnotationConfiguration();
    config.configure("hibernate.cfg.xml");
    SessionFactory factory = config.buildSessionFactory();
    Session session = factory.openSession();

    session.beginTransaction();

    Criteria query = session.createCriteria(doctor.class);
    query.createCriteria("patients", "p");
    query.add(Restrictions.eq("p.phone", phone));
    List<doctor> doctorList = (ArrayList<doctor>) query.list();
    session.getTransaction().commit();
    String answear = "";
    for (doctor d : doctorList) {
        answear = answear.concat("docPhone" + d.getPhone() + "docEmail"
                + d.getEmail() + "patDia"
                + d.getPatients().iterator().next().getDiastolic()
                + "patSys"
                + d.getPatients().iterator().next().getSystolic());
    }
    if (doctorList.isEmpty()) {
        session.close();
        factory.close();
        return "No Doctor!";
    } else {
        session.close();
        factory.close();
        return answear;
    }
} 
```

问题是当我有一个病人时没问题，但是当我添加第二个病人时，它给了我最后一个病人的详细信息，尽管我已经设置了第一个病人电话的标准！

我有 2 张桌子：

1.doctor(id,username,password,phone,email) 2.patient(id,name,surname,phone,systolic,diastolic,doctorid(FK 指的是 doctor.id))

我已经正确配置了 hibernate.cfg.xml。

我已经为医生和病人设置了课程：

```
@Entity
public class doctor {
    @Id
    private int id;
    private String username;
    private String password;
    private String phone;
    private String email;

    @OneToMany(targetEntity = patient.class, cascade = CascadeType.ALL, mappedBy = "doctor")
    @Cascade(value = org.hibernate.annotations.CascadeType.ALL)
    private Collection<patient> patients = new ArrayList<patient>();

    public Collection<patient> getPatients() {
        return patients;
    }

    public void setPatients(Collection<patient> patients) {
        this.patients = patients;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
} 
```

* * *

```
@Entity
public class patient {
    @Id
    private int id;
    private String name;
    private String surname;
    private String phone;
    private int systolic;
    private int diastolic;

    @ManyToOne
    private doctor doctor;

    public doctor getDoctor() {
        return doctor;
    }

    public void setDoctor(doctor doctor) {
        this.doctor = doctor;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSurname() {
        return surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public int getSystolic() {
        return systolic;
    }

    public void setSystolic(int systolic) {
        this.systolic = systolic;
    }

    public int getDiastolic() {
        return diastolic;
    }

    public void setDiastolic(int diastolic) {
        this.diastolic = diastolic;
    }
} 
```

![医生](../Images/35949ecfedfbb61a835d1c0f1d801f40.png) ![病人](../Images/6d66ebd07776ac411c27c90aa054ae0f.png) ![患者关系视图！[][3]](../Images/a139eeab645607efdb0b9f0366311976.png)

在这个网络服务中，响应总是相同的（给定手机号码）。它总是给我 patSys=130 和 patDia=80 这是第二个病人的信息！。网络服务一定有问题，但对我来说一切都好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:26:54.517

您需要在此处创建`Criteria`对象`Patient`，无需在`transaction`此处获取。

```
Criteria query = session.createCriteria(Patient.class)
                    .add(Restrictions.eq("phone", phone));

List<Patient> patList = (ArrayList<Patient>) query.list();

String result="";
if(!patList.isEmpty()) {
    Patient patient=patList.get(0);
    result="Doc Phone : " + patient.getDoctor().getPhone();
}
return result; 
```

# pdf - 如何创建可切换的多语言 pdf 表单？

> ID：13193065
> 
> 赞同：3
> 
> 时间：2012-11-02T10:04:01.533
> 
> 标签：pdf

我想为两种语言（中文/英文）UI创建一个pdf表单，并且表单上有一个按钮或其他东西用于语言切换，有什么办法可以做到吗？怎么办？谢谢！

谢谢大家的回复！其实我有一个这样的样本， [PDF样本](https://www.asia.citibank.com/CBKWebPortal/ShowBinary/BEA%20Repository/Attachment/tw/tc/co/A_%E6%96%B0%E5%BC%8F%E5%A4%96%E5%B9%A3%E5%8C%AF%E5%87%BA%E5%8C%AF%E6%AC%BE_PDF.pdf)

表格左上角有两个复选框，一个是英文UI，另一个是中文，我只想知道如何制作像那个样本的PDF？（而且我在样本上看不到任何层......）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:20:25.297

正如库尔特提议的那样，我对弗兰克的回答的评论本身就是一个答案：

> 实际上有一个现在很少使用的pdf功能，页面模板。因此，这两个表单可以驻留在不同页面模板中的同一文件中，并且基于一些最初存在的按钮（“英文版”，...），生成所需的表单。

不幸的是，我不知道如何使用一些易于使用的工具创建页面模板，我只是在集成 PDF 签名的上下文中遇到了它们（取决于签名类型，页面模板实例化是文档更改而不是破坏签名）并使用低级工具对其进行测试。

本质上，页面模板是 PDF 对象，就像普通页面的页面字典一样，它们不是 XFA 的东西。它们只是不在页面树中引用，而是在名称树中引用。

有一个 JavaScript 命令可以基于这样的模板创建一个可见页面 --- 我不知道是哪个了；下周我什么时候能回到办公室，我可能会知道。此命令必须绑定到文件中的初始语言选择按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:10:39.207

mkl 的评论（他应该变成一个完整的答案，真的）已经暗示了使用驻留在同一文件中的不同页面模板的选项。

您可以探索的另一个选择是：

*   将两种语言版本放入 2 个不同的*层*（或 PDF 用语中的“可选内容组”）
*   使两层的可见性可切换
*   让用户激活他/她需要的那个层。

层激活可以通过普通的 Acrobat Reader 用户界面元素来处理。

图层切换也可以通过 PDF 页面上的“按钮”进行访问——但这需要在 PDF 中嵌入额外的 JavaScript（许多人并不特别热衷于此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:44:48.957

问题在于切换静态文本 - PDF 不允许这样做。

如果我是你，我会将文档分成两种相同的形式，用各自的语言编写。您可以使用第一页上的书签和链接导航到文档的右侧部分。

请注意，可以为您的字段的英语/中文版本分配相同的字段名称。这将使处理提交的表单数据变得更容易，因为处理路径将独立于所选语言。它还将简化您计划添加的任何 JavaScript（验证、求和等）。

# php - Prestashop - 如何在订单确认页面上显示客户电子邮件

> ID：13193067
> 
> 赞同：2
> 
> 时间：2012-11-02T10:04:07.303
> 
> 标签：php, prestashop

在订单确认页面上，它显示“已向您发送一封包含此信息的电子邮件。”

我想向收件人显示电子邮件

'一封包含此信息的电子邮件已发送至您的电子邮件 eee@example.com。

在哪里改变这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:17:58.593

You need override OrderConfirmationController::process() with this code:

```
public function process()
    {
        parent::process();
        self::$smarty->assign(array(
            'is_guest' => self::$cookie->is_guest,
            'HOOK_ORDER_CONFIRMATION' => Hook::orderConfirmation((int)($this->id_order)),
            'HOOK_PAYMENT_RETURN' => Hook::paymentReturn((int)($this->id_order), (int)($this->id_module))
        ));

        $order = new Order((int)($this->id_order)); //create order object
        $customer = new Customer((int)($order->id_customer)); //create customer object

        if (self::$cookie->is_guest)
        {
            self::$smarty->assign(array(
                'id_order' => $this->id_order,
                'customer' => $customer, //assign variable
                'id_order_formatted' => sprintf('#%06d', $this->id_order)
            ));
            /* If guest we clear the cookie for security reason */
            self::$cookie->mylogout();
        }
    } 
```

After that you'll be able to use `{$customer->email}` for receiving customers e-mail in order-confirmation.tpl of your theme.

Regards

# javascript - 忽略正则表达式中的重音

> ID：13193071
> 
> 赞同：1
> 
> 时间：2012-11-02T10:04:26.120
> 
> 标签：javascript, html, regex

> **可能重复：**
> [如何在 javascript 正则表达式匹配中忽略重音？](https://stackoverflow.com/questions/11054893/how-to-ignore-acute-accent-in-a-javascript-regex-match)

我有一些 javascript 作为：

```
var myString = 'préposition_preposition';
var regex = new RegExp("epo", "ig");
alert(myString.match(regex)); 
```

如果我在正则表达式中仅设置 epo（或仅 épo），是否可以匹配“épo”和“epo”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:09:48.773

我最近遇到了同样的问题。正则表达式使用 ascii 运行，因此无法识别特殊字符，如`é`or 。`ß`您需要明确地将它们包含在您的正则表达式中。

用这个：

```
var regex = /[ée]po/gi; 
```

提示：不要使用`new Regex()`它相当慢，而是直接声明正则表达式。这也解决了一些引用/转义问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T10:08:43.313

不，你不能实现这种行为。RegEx 与您提供的字符串完全匹配。计算机应该如何知道您何时`épo`或`epo`正在寻找什么！

但是你可以指定一[类](http://www.regular-expressions.info/charclass.html)可以匹配的字符`new RegExp("[eé]po", "ig");`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-02T10:10:27.800

尝试这个：

```
var str = 'préposition_preposition';
str.match(/(e|é)po/gi); 
```

# mongodb - 我们如何在 yii Mongodb 中使用 like？

> ID：13193072
> 
> 赞同：1
> 
> 时间：2012-11-02T10:04:34.670
> 
> 标签：mongodb

谁能告诉我 yii mongodb 中 like 的语法。我想在 mongo db 集合中使用 like as in sql 搜索特定名称。我们如何为此编写查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:17:44.483

您可以使用 MongoRegex 对象：[http](http://php.net/manual/en/class.mongoregex.php) ://php.net/manual/en/class.mongoregex.php ，它与 YiiMongoDBSuite 等组件兼容。

它使用正则表达式在 MongoDB`%sammaye%`中的 SQL =中进行匹配。`new MongoRegex('/sammaye/')`

### 编辑

`sammaye%`您可以`new MongoRegex('/^sammaye/')`按照此处的要求进行搜索： [https ://stackoverflow.com/questions/13194639/like-function-with-yii-mongo-db](https://stackoverflow.com/questions/13194639/like-function-with-yii-mongo-db)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:07:42.250

没有**类似的**支持。但根据您的要求，您可以使用[regex support](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)。

下面是他们的[SQL 到 MongoDB 查询映射图表中的示例。](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)

```
SELECT * FROM users WHERE name LIKE "%Joe%" = db.users.find({name:/Joe/})
SELECT * FROM users WHERE name LIKE "Joe%" = db.users.find({name:/^Joe/}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T07:44:06.903

如果你在 Yii2 中使用 ActiveRecord，你应该在 where 条件中选择简单的*like*部分：

```
ActiveRecord::findOne(['like', 'field', 'query']) 
```

更多信息参见相关文档：[http ://www.yiiframework.com/doc-2.0/yii-db-queryinterface.html#where()-detail](http://www.yiiframework.com/doc-2.0/yii-db-queryinterface.html#where()-detail)

或者当然也有可用的[PHP 的 MongoDB](http://php.net/manual/en/set.mongodb.php)命令：

```
$mongo = \Yii::$app->mongodb;
$collection = $mongo->getCollection('your collection name');
$result = $collection->find(['field' => new \MongoDB\BSON\Regex('^stratswith')]); 
```

希望能帮助到你！

# javascript - 获取包含图像的链接

> ID：13193073
> 
> 赞同：1
> 
> 时间：2012-11-02T10:04:35.843
> 
> 标签：javascript, jquery

我有以下代码：

```
var thumbs = $("#thumbs img");
var links = $("#thumbs a"); 
```

这给了我两个变量，其中包含“thumbs”div ID 中的所有图像和链接。

我需要的是一个数组，其中包含环绕图像标签的链接，如下所示：

```
<a href="www.google.com"><img src="image1.gif"></a> 
```

这就是代码在“thumbs”div 中的样子。我应该使用该`.children()`方法吗？如果可以，请给我一个例子。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:06:05.140

您的确切需求尚不清楚，但似乎您想要

```
$("#thumbs a > img"); // images wrapped directly in links 
```

或者

```
$("#thumbs a:has(img)"); // the links around the images 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:09:51.030

尝试：

```
$('#thumbs a img').map(function() {
   return $(this).parents('a').attr('href');
}).get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:13:01.707

您可以使用最接近的功能从所选内容“向后”移动。

首先，您找到所有与锚点直接同级的 img 标签（没有中间标签），然后返回锚点。

```
$("#thumbs a > img").closest('a'); 
```

# php - 如何将 Savant3 模板的输出转换为字符串？

> ID：13193074
> 
> 赞同：0
> 
> 时间：2012-11-02T10:04:37.103
> 
> 标签：php, savant3

如何让 Savant3 模板呈现为字符串，而不是直接将其输出到网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:04:37.103

使用**fetch**方法而不是通常的**display**方法。

```
$my_template_output = $tpl->fetch('mytemplate.tpl.php'); 
```

# c++ - 调试 Win32 应用程序挂起

> ID：13193076
> 
> 赞同：7
> 
> 时间：2012-11-02T10:04:41.410
> 
> 标签：c++, debugging, exception-handling, windbg, visual-c++-2012

我无法找到导致 Win32 应用程序挂起的原因。该软件在一个紧密的循环中将一些数据呈现给 OpenGL 视觉对象：

```
std::vector<uint8_t> indices;
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(2, GL_DOUBLE, 0, vertexDataBuffer);
while (...) {
    // get index type (1, 2, 4) and index count
    indices.resize(indexType * count);

    // get indices into "indices" buffer
    getIndices(indices.data(), indices.size()); //< seems to hang here!

    // draw (I'm using the correct parameters)
    glDrawElements(GL_TRIANGLES_*, count, GL_UNSIGNED_*);
}
glDisableClientState(GL_VERTEX_ARRAY); 
```

该代码使用 VC11 Update 1 (CTP 3) 编译。在运行优化的二进制文件时，它会`getIndices()`在几个循环之后挂在对（更多关于这一点的）的调用中。我已经有了...

*   三重验证所有缓冲区，甚至附加 CRC 以确保我没有任何缓冲区溢出
*   在循环内添加了对[HeapValidate()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366708%28v=vs.85%29.aspx)的调用，以确保堆没有损坏
*   使用 ApplicationVerifier
*   [使用GFlags 和 PageHeap](http://msdn.microsoft.com/en-us/library/ff549561.aspx)启用堆分配监视。
*   应用程序锁定时闯入 WinDbg

我没有**发现**访问分配缓冲区的代码有任何问题，也没有发现任何堆损坏。但是，如果我禁用[低碎片堆](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366750%28v=vs.85%29.aspx)，问题就会消失。`indices`如果我为缓冲区使用单独的（低碎片）堆，它也会消失。

无论如何，这是导致死锁的堆栈跟踪：

```
0:000> kb
ChildEBP RetAddr  Args to Child              
0034e328 77b039c3 00000000 0034e350 00000000 ntdll!ZwWaitForKeyedEvent+0x15
0034e394 77b062bc 77b94724 080d36a8 0034e464 ntdll!RtlAcquireSRWLockExclusive+0x12e
0034e3c0 77aeb652 0034e464 0034e4b4 00000000 ntdll!RtlpCallVectoredHandlers+0x58
0034e3d4 77aeb314 0034e464 0034e4b4 77b94724 ntdll!RtlCallVectoredExceptionHandlers+0x12
0034e44c 77aa0133 0034e464 0034e4b4 0034e464 ntdll!RtlDispatchException+0x19
0034e44c 77b062c5 0034e464 0034e4b4 0034e464 ntdll!KiUserExceptionDispatcher+0xf
0034e7bc 77aeb652 0034e860 0034e8b0 00000000 ntdll!RtlpCallVectoredHandlers+0x61
0034e7d0 77aeb314 0034e860 0034e8b0 0034ec28 ntdll!RtlCallVectoredExceptionHandlers+0x12
0034e848 77aa0133 0034e860 0034e8b0 0034e860 ntdll!RtlDispatchException+0x19
0034e848 1c43c666 0034e860 0034e8b0 0034e860 ntdll!KiUserExceptionDispatcher+0xf
0034ebe8 1c43c4e5 0034ec28 080d35d0 080d35d6 lcdb4!lc::db::PackedIndices::unpackIndices<unsigned char>+0x86
0034ec14 1c45922d 0034ec28 080d35d0 00000006 lcdb4!lc::db::PackedIndices::unpack+0xb5
...
xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx getIndices 
```

为了完整起见，我将 的代码（`lc::db::PackedIndices::unpackIndices()`包括为调试添加的所有代码）发布到[http://ideone.com/sVVXX7](http://ideone.com/sVVXX7)。

触发调用的代码`KiUserExceptionDispatcher`是`(*p++) = static_cast<T>(index);`( `mov dword ptr [esp+10h],eax`)。

我似乎无法弄清楚发生了什么。似乎抛出了异常，但没有调用我的异常处理程序。应用程序只是挂起。我检查了任何死锁的关键部分 ( `!lock`)，但没有找到。此外，我不明白为什么应该引发异常，因为内存位置都是有效的。谁能给我一些提示？

## 更新

我试图找到抛出的异常类型：

```
0:000> s -d esp L1000 1003f
0028ebdc  0001003f 00000000 00000000 00000000  ?...............
0028efd8  0001003f 00000000 00000000 00000000  ?...............
0:000> .cxr 0028ebdc
eax=77b94724 ebx=0804be30 ecx=00000002 edx=00000004 esi=77b94724 edi=0804be28
eip=77b062c5 esp=0028eec4 ebp=0028eee4 iopl=0         nv up ei ng nz na pe cy
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00010287
ntdll!RtlpCallVectoredHandlers+0x61:
77b062c5 ff03            inc     dword ptr [ebx]      ds:002b:0804be30=00000001
0:000> .cxr 0028efd8
eax=0000003b ebx=00000001 ecx=0804bd98 edx=0028f340 esi=0028f340 edi=04b77580
eip=1c43c296 esp=0028f2c0 ebp=0028f2fc iopl=0         nv up ei pl nz na po nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00010202
lcdb4!lc::db::PackedIndices::unpackIndices<unsigned char>+0x36:
1c43c296 8801            mov     byte ptr [ecx],al          ds:002b:0804bd98=3e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:04:50.217

堆栈跟踪讲述了这个故事。您的程序正在崩溃，这很可能是访问冲突异常，是 C++ 代码的典型故障模式，通常由堆损坏触发。然后，Windows 会尝试调用异常过滤器来查找愿意处理异常的任何代码。首先是 AddVectoredExceptionHandler() 安装的处理程序。当其中一个处理程序反过来导致崩溃时，它必须使用锁来防止重新进入。

这就是降压停止的地方。堆栈跟踪中的确切原因尚不清楚。这可能是因为另一个线程也因堆损坏而倒下，正忙于处理异常并获得了锁。使用 Debug + Windows + Threads 来查看它们。但更有可能的是，进程状态如此混乱，以至于锁对象本身也被破坏了。不太可能，但确实会发生。

是的，关闭低碎片堆有隐藏堆损坏的诀窍。内存布局将非常不同，因此导致损坏的任何代码现在都可能破坏了一些无辜的东西。这当然不是解决方案。

Debug + Exception，勾选“Win32 Exceptions”的Thrown复选框。抛出异常时，调试器现在将停止。至少你会知道抛出了什么异常。最终，您确实需要找出堆损坏发生的位置。它永远不会位于崩溃的代码中，祝你调试好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T05:49:05.570

线程挂起，等待属于 OS 异常处理代码的 SRW（细长读写锁）上的排他锁。该异常是由您的代码引起的。可以使用以下堆栈帧找到确切的异常及其详细信息。**0034e848 77aa0133 0034e860 0034e8b0 0034e860 ntdll!RtlDispatchException+0x19** - **RtlDispatchException**的参数是指向**EXCEPTION_RECORD**的指针。所以如果你输入**.exr 0034e860**你可以看到异常记录。从异常记录中，您将知道对哪个地址的访问导致异常（如果异常是访问冲突异常）。

因为，在这些步骤之后，您发现访问冲突是由于写入您在堆上正确分配的地址而发生的 - 您可以通过命令**!address找到包含该地址的虚拟页面的保护属性虚拟地址”**

正如您发现页面保护属性已在这些堆地址上更改为（通过某些代码）**PAGE_READONLY**并且在看到其他线程的调用堆栈之后，我有以下猜想，我认为这可能会帮助您找到根本原因。

我猜测 Windows 堆管理器会在引发异常以指示堆损坏之前更改页面属性。ole 堆中似乎也存在一些损坏 - 来自您显示的其他线程的调用堆栈。问题的根源可能是破坏堆的代码 - 堆随后发现并引发异常，随后操作系统的异常机制实现代码启动并在它能够调用之前挂在 SWR 锁上您或其他库代码中的异常处理程序。在此之后，您的代码中的另一个无知线程正确地接触了堆内存，由于它已经发现的损坏，堆已经受到保护，导致异常并使异常机制代码启动并落入同一个僵局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:20:49.787

如果您使用的是 ATI 显卡（带有 ATI 驱动程序），这是一个已知问题，您不能泄漏任何状态，否则以后会发生内存损坏。

尝试禁用所有可以禁用的状态 (glDisableClientState)，使用 APITrace 找出您忘记了哪个状态。

在图形驱动程序中测试内存损坏的一种简单方法是在另一个板/驱动程序上进行测试，或者强制软件渲染。

# c# - 在 c#.net 中将连接字符串从一个数据库更改为另一个数据库

> ID：13193078
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:04:46.710
> 
> 标签：c#, ms-access-2007

我在 Global.cs 中使用静态连接字符串。但我想在运行时更改数据库连接。所以我将数据库名称存储在 ini 文件中，并在运行时更改它。我想将我的连接字符串指向我更新的下一个数据库。我能够从 ini 文件中获取该数据库名称。

我试图将连接字符串 db1 更改为 db2。任何人请告诉我如何在运行时将该连接字符串更改为另一个数据库...

```
 iam using Connection string in static Global.cs file that is

   static Global()
    {
        try
        {
            ConnectionStringSettingsCollection getConFromAPP =               ConfigurationManager.ConnectionStrings;
            string con = getConFromAPP["DatabseConnection"].ConnectionString;
            conStrYearDatabase = new SqlConnection(con);
            conStrYearDatabase.Open();

        }
        catch (Exception e1)
        {
            Console.Write(e1.Message);
        }
    } 
```

如何在运行时第二次运行相同的静态类文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:32:03.970

不应该是一个艰难的问题。

*   关闭打开的连接。
*   更改现有 Connection 对象上的连接字符串。
*   重新打开连接。

    ```
     OleDbConnection connection = new OleDbConnection("old conn string>");                
     connection.Open();
     //do somthing with db 1
     connection.Close();

     //Change the connection string
     connection.ConnectionString="<new connection string>";

     connection.Open();
     //do somthing with db 2
     connection.Close(); 
    ```

# c# - 在 Windows 服务中运行任务

> ID：13193079
> 
> 赞同：0
> 
> 时间：2012-11-02T10:04:53.163
> 
> 标签：c#, windows, multithreading, windows-services

我正在制作 Windows 服务，它的任务之一是每 1 小时请求一次可用磁盘空间，我知道如何在服务启动时获取可用空间，但如何每​​ 1 小时检查一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:36:56.407

使用`Timer`类似[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：

```
var timer = new System.Timers.Timer();    
timer.Elapsed += new ElapsedEventHandler(TimerElapsed);

timer.Interval = 60 * 60 * 1000; // 1 hour
timer.Enabled = true;

...

private static void TimerElapsed(object source, ElapsedEventArgs e)
{
    // check disk space
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:09:41.067

开始线程：

```
while(true){
  getFreeSpace();
  Sleep(3600*1000);
}; 
```

# ruby-on-rails - 在所有浏览器/设备上注销

> ID：13193089
> 
> 赞同：3
> 
> 时间：2012-11-02T10:05:16.650
> 
> 标签：ruby-on-rails, devise

我的 Rails 3 应用程序使用 Devise 进行身份验证，会话存储在 cookie 文件中。我想要同时在所有浏览器/设备上注销用户的功能。可以这样做，还是我必须将会话存储在数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:08:44.057

作为一个快速的解决方案，您可以存储一个`should_logout`在用户模型中命名的值，注销时您应该`should_logout = true`

然后在应用程序控制器中，您可以定义`before_filter`在哪里可以检查该值（如果为真）

```
before_filter :check_should_logout
def check_should_logout
  if current_user.should_logout
      current_user.should_logout = false
      logout(current_user)
  end
end 
```

# html - 为什么 Twitter 使用这么多 s 为它的固定位置导航栏？

> ID：13193090
> 
> 赞同：0
> 
> 时间：2012-11-02T10:05:17.990
> 
> 标签：html, css

我正在尝试建立一个在页面顶部带有导航栏的网站。当我们滚动页面（如 facebook 或 twitter）时，它应该固定在浏览器顶部，但不能随页面滚动（如 google 搜索？？）。看图：![在此处输入图像描述](../Images/087efe589de82934bbb0a0337b297e09.png) 好像我们应该设置这个导航栏的css属性**位置，比如**

```
#nav_bar {
  postion:fixed;
} 
```

但是为什么所有这些网站都使用一大堆 div 来做到这一点？所有这些 div 是否有意义？Like twitter: ![在此处输入图像描述](../Images/9e57fcefa93f40f15f2c18cd16486415.png) where topbar *js-topbar*是最外层的*div*，大小为 1583*40px，但我没有找到它的大小的定义。然后它转到 global-nav->global-nav-inner->container，最后...container，它实际上保存了导航项，如列表、搜索栏等。奇怪的是它的大小是 865*0px。更多信息，您可以查看twitter主页的来源。我的问题是：但是为什么所有这些网站都使用一大堆 div 来做到这一点？所有这些 div 是否有意义？为什么一个高度为 0px 的 div 可以容纳这些导航项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:41:12.087

### 为什么有“许多” div？

一般的想法是，您拥有的包装元素越多，您在使用 css 进行样式设置方面所拥有的灵活性就越大。显然有一个限制，因为您还应该尝试保持标记的可读性和语义。我想说一个站点中的许多重要或隔离区域将受益于三个包装元素：

```
<div class="positioner">
  <div class="padder">
    <div class="alignment">
      Menu Here
    </div>
  </div>
</div> 
```

显然，使用语义更多的 HTML5 元素，您可以使其更具可读性：

```
<header class="positioner">
  <div class="padding>
    <nav class="alignment">
      Menu Here
    </nav> 
  </div>
</header> 
```

*   为填充保留单独的元素的原因是，您可以为定位器*（即标题）*设置特定尺寸，并且不会通过添加填充在某些浏览器*（使用旧框模型）*上弄乱该计算。

*   保持对齐分开的原因是因为它会给你更大的灵活性来使用你可以使用的对齐技巧。

*   使用 header 元素的原因是因为此内容将充当 header imo。

您在上面给出的示例中，每个元素肯定都有其存在的理由，并且它们很可能都将用于实现设计师想要的 CSS 布局。有时，额外的包装 div 也用作可能是 AJAX 的内容的占位符，这在处理 Twitter 之类的内容时很可能发生。

当然，您可以只使用一个包装元素而侥幸，但是您将限制以后可以实现的样式和定位。

### 为什么高度为 0px？

*在相对位置（而不是绝对位置）*定位绝对层时经常使用一个技巧- 我相信这就是您看到这个的原因，但技巧本身并不是`height:0px`. 该技巧使用以下结构：

```
<div style="position: relative;">
  <div style="position: absolute;">
    The content here will float outside of the document flow, 
    but remain in the correct location within the document flow
     - in all viable browsers.
  </div>
</div> 
```

如果您使用任何浏览器调试方法检查上述结构，您会注意到该`position: absolute;`层已折叠为没有高度*（在现代浏览器中）*。这是在旧 Internet Explorer 世界之外绝对位置的默认行为*（没有其他定位或尺寸设置）*，因为绝对位置元素从文档流中取出，并且默认情况下不计算与它的子元素有关的任何内容.

如果您希望覆盖此行为，您可以简单地使用`overflow:hidden;` *（只要高度没有被其他类或 JavaScript 专门设置为 0px）* ——这将强制元素计算其子元素的尺寸并包装它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:16:26.347

首先使用位置：绝对；如果您不希望它在滚动时随您移动。位置：固定；如果你这样做。

其次，当你建立一个网站时，你要做的第一件事就是决定你的网站的结构是什么样的。所以顶部的菜单将是

```
<div id="Menu"> </div> 
```

现在你可能想在它下面创建一个标题

```
<div id="Header"> </div> 
```

在此之下，您想共享内容，因为这就是网站所做的。

```
<div id="Content"> </div> 
```

在此之下，您可能需要一个页脚，上面写着 2012 版权所有等。

```
<div id="Footer">2012 Copyright zoujyjs &copy; </div> 
```

现在您可能想要将所有内容居中。为什么不把所有这些以前的 div 放在一个包装器 div 中。然后我们要做的就是将包装器 div 居中。

```
<div id="Wrapper">
      <div id="Menu"> </div>
      <div id="Header"> </div>
      <div id="Content"> </div>
      <div id="Footer"> </div>
</div> 
```

您还可以在标题中添加徽标等内容。

我想你应该已经明白了。但是那不是很明显你会得到“欺骗”吗？

另外：当没有在 div 上指定高度时，div 将自动调整其内容的大小。

```
<div style="background-color:black;">
   <!-- Nothing will be seen on your page, because the div is 0 height, 0 width by                default -->
</div>

<div style="background-color:black;">
   Height of the div will now be the same height as the height of this line. (15 px by    default I believe
</div> 
```

# python-3.x - Scipy 不适用于 python 3，但适用于 2.6（默认）

> ID：13193095
> 
> 赞同：2
> 
> 时间：2012-11-02T10:05:46.097
> 
> 标签：python-3.x, scipy

我已经通过从终端构建和安装来安装 Scipy。但是当我尝试执行以下简单代码时出现以下错误：

```
from scipy.stats.mstats_basic import gmean

ab=[1,2,3,4,5,6]

print(gmean(ab)) 
```

这是我得到的错误：

```
Traceback (most recent call last):

  File "/home/prashanthb/workspace/rankalgo/rough1.py", line 2, in <module>

    from scipy.stats.mstats_basic import gmean

  File "/usr/local/lib/python3.1/dist-packages/scipy/stats/__init__.py", line 321, in <module>

  File "/usr/local/lib/python3.1/dist-packages/scipy/stats/stats.py", line 194, in <module>

  File "/usr/local/lib/python3.1/dist-packages/scipy/special/__init__.py", line 525, in <module>

ImportError: No module named _cephes 
```

但是当我切换到默认解释器 python 2.6 时，相同的代码可以工作。我之前已经安装了 Libatlas 和 lapack 并且 Numpy（已经安装在 python3 下）似乎运行良好。我也安装了 mpmath。

**问题：**如何从这里开始让它与 python3 一起工作？如果有人知道任何其他计算几何平均值的库，请提及。在此先感谢

更新：我在再次构建 setup.py 时发现了这个：

```
DeprecationWarning)

customize GnuFCompiler

Could not locate executable g77

Could not locate executable f77
customize IntelFCompiler

Could not locate executable ifort

Could not locate executable ifc

customize LaheyFCompiler

Could not locate executable lf95

customize PGroupFCompiler

Could not locate executable pgfortran

customize AbsoftFCompiler

Could not locate executable f90

customize NAGFCompiler

Found executable /usr/bin/f95

customize VastFCompiler

customize CompaqFCompiler

Could not locate executable fort

customize IntelItaniumFCompiler

Could not locate executable efort

Could not locate executable efc

customize IntelEM64TFCompiler

customize Gnu95FCompiler

Found executable /usr/bin/gfortran
customize Gnu95FCompiler
customize Gnu95FCompiler using config
compiling '_configtest.c': 
```

# cron - 如何构建小时和分钟的 cron 表达式

> ID：13193099
> 
> 赞同：3
> 
> 时间：2012-11-02T10:05:54.993
> 
> 标签：cron, quartz-scheduler, cronexpression

我想要一个计划的 cron 表达式，它每 2 小时 10 分钟运行一次，我期望的输出是 2:00 4:10 6:20 我试过 0 0/2 0/2 * * ？为此，输出就像 2012 年 11 月 1 日星期四 12:50 PM 2012 年 11 月 1 日星期四 12:52 PM 2012 年 11 月 1 日星期四 12:54 PM 来源-http://www.cronmaker.com

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:18:06.227

我之前也进行了很多搜索以每（> 60 ）分钟运行一次 cron，但找不到任何解决方案。

为您的问题实施解决方案的最佳方法是编写您自己的脚本，该脚本将检查您可以以任何方式处理的脚本的最后一次运行（检查`timestamp`、在某处记录最后一次运行等），并且如果只有时间条件满足。

然后`cron`每 10 分钟（在您的情况下）调用此包装脚本，因为这将确保每次您期望原始最终作业运行时都会检查它。

希望这可以帮助。

# symfony - 在 symfony2 中请求 Gearman 包中的客户端作业

> ID：13193103
> 
> 赞同：0
> 
> 时间：2012-11-02T10:06:06.900
> 
> 标签：symfony, gearman

我正在使用 gearman bundle 在 symfony2 中做 gearman。我已经完成了最后一步之前的所有步骤**`Requesting client jobs`**。不返回任何东西。页面不断加载..

```
$gearman = $this->getContainer()->get('gearman');
$gearman->doJob('MmoreramerinoGearmanBundleWorkers~testB'); 
```

但是当我使用**`callJob`**而不是运行代码时**`doJob`**，它返回了一些整数。刷新页面时加一。

# doctrine-orm - Zend Framework 2 Doctrine 集成（2012 年 11 月）

> ID：13193104
> 
> 赞同：-3
> 
> 时间：2012-11-02T10:06:09.083
> 
> 标签：doctrine-orm, zend-framework2

截至目前（2012 年 11 月），集成 ZF2 和 Doctrine 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:43:25.197

和几个月前[使用 DoctrineORMModule一样](https://github.com/doctrine/DoctrineORMModule)

# c# - 通过 HttpWebRequest（REST 服务）发送对象

> ID：13193107
> 
> 赞同：0
> 
> 时间：2012-11-02T10:06:22.420
> 
> 标签：c#, rest, serializable

我有一个 REST 服务，它接受 PUT 请求的 URL 中的 id。到目前为止，PUT 请求如下所示：

```
string url = "http://localhost:3596/WidgetManager.svc/Widgets/" + TextBox3.Text;
WebRequest req = WebRequest.Create(url);
req.Method = "PUT";

using (HttpWebResponse resp = req.GetResponse() as HttpWebResponse)
{
    StreamReader reader = new StreamReader(resp.GetResponseStream());
    Label4.Text = reader.ReadToEnd();
} 
```

但我还需要在我的请求中发送一个 Widget 对象。

```
Widget w = new Widget();
w.Name = "worked!!!";
w.CogCount = 1000;
w.SprocketSize = 2000; 
```

我看到了很多关于如何发送字符串的例子。但是像这样的物体呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:02:42.423

您可以使用 XML 或 JSON 对其进行序列化。如果是这么小的对象，您可以编写自己的小方法，例如

```
.toJSON() {
   return '{"Name":"' + this.name + '", "CogCount":' + this.CogCount + ', "SprocketSize":' + this.SprocketSize + '}';
}
//Output: '{"Name":"worked!!!", "CogCount":1000, "SprocketSize":2000}' 
```

另一方面：C# 提供了强大的 (XML) 序列化工具！这里： http: [//www.codeproject.com/Articles/1789/Object-Serialization-using-C](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)只是众多示例之一。

但是如果你使用 PHP 或类似的，JSON 可能会更有趣。

# java - Java中继承的障碍

> ID：13193116
> 
> 赞同：0
> 
> 时间：2012-11-02T10:07:00.900
> 
> 标签：java

我不明白下面的程序。我已经提到了我在代码中遇到的两个错误。但我无法理解原因

```
import java.io.*;
class sdata
{
    float per;
    int m,tm=0,i,n;

    sdata(int n)throws Exception
    {
       DataInputStream dis2=new DataInputStream(System.in);
       for(i=1;i<=n;i++)
       {
        System.out.print("enter marks of subject"+i);
        int m=Integer.parseInt(dis2.readLine());
        tm=tm+m;
       }
       per=tm/n;
    }
}

class disdata extends sdata
{
    //below line gives an error "constructor sdata in class xyz.sdata cannot be applied to given types required:int found:no arguments"

    disdata() throws Exception{             
      System.out.println("TOTAL MARKS OF SUBJECTS:"+tm);
      System.out.println("PERCENTAGE OF STUDENT:"+per);
    }

}
class sresult
{
    public static void main(String args[])throws  Exception
    {
       DataInputStream dis=new DataInputStream(System.in);
       int n=Integer.parseInt(dis.readLine());

       disdata objj=new disdata();
       //the below line creates an error saying "cannot find symbol" 
       objj.sdata(n);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:08:40.790

如果你`super class`有一个`overloaded argument constructor`你的子类必须打电话`explicitly`。

```
disdata() throws Exception{             
     super(some int vale youwanna pass);
            System.out.println("TOTAL MARKS OF SUBJECTS:"+tm);
        System.out.println("PERCENTAGE OF STUDENT:"+per);
    } 
```

记得`super()`应该是`first line`中的`disdata() constructor`。

```
disdata objj=new disdata();
    //the below line creates an error saying "cannot find symbol" 
        objj.sdata(n); 
```

`constructor`不是方法。您正在尝试使用 objj 调用构造函数 sdata(n) 这是错误的。使用 new 运算符来调用它。像：

```
disdata objj=new disdata(n); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:17:37.507

Java 强制构造函数的正确链接。构造函数主体中的第一条语句必须是`this(...)`（对同一类的另一个构造函数的`super(...)`调用）或（对超类构造函数的调用），如果您不包含显式调用，那么 Java 会插入一个隐式调用`super()`在构造函数主体的其余部分之前。由于您`sdata`没有无参数构造函数，因此无法编译。

你需要要么

1.  将无参数构造函数添加到`sdata`or
2.  将`super(0)`调用作为构造函数中的第一件事`disdata`来调用现有的单参数超类构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:10:32.793

您不能将构造函数作为普通方法调用，而您尝试使用`objj.sdata(n);`. 构造函数不是方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T10:12:37.613

`sdata`是超类，`disdata`当您创建不带参数的 disdata 对象并且在`disdata`构造函数中您没有调用`sdata`int 构造函数时，默认情况下它将尝试查找不可`sdata`用的无参数构造函数，因此会出错。

您可以从构造函数调用`sdata`int 构造函数，或者在.`disdata``sdata`

```
class sdata {
    float per;
    int m, tm = 0, i, n;
    sdata(int n) throws Exception {...}
    //No argument constructor
    sdata(){}
} 
```

# c# - 如何让两个文本框数据接受 jQuery 数据选择器插件？

> ID：13193118
> 
> 赞同：1
> 
> 时间：2012-11-02T10:07:08.563
> 
> 标签：c#, jquery, asp.net-mvc, datepicker

你能告诉我一些好的教程或书，我可以在其中学习如何制作日期选择器文本框吗？

谢谢你。

PS 事实上，当您选择上述日期（从和到）时，我必须有两个文本框和一个用于预订的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:11:37.620

[你可以在这里](http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx)得到一些很好的教程。[jQuery UI DatePicker](http://jqueryui.com/demos/datepicker/)的简单实现：

**Javascript**：

```
$(document).ready(function () {
   $('.txtStartDate, .txtEndDate').datepicker({
       showOn: "both",
       dateFormat: 'dd/mm/yy',
       showAnim: "slideDown",
       showOptions: {
         origin: ["top", "left"]
       },
       firstDay: 1, 
       changeFirstDay: false
   });
}); 
```

**标记**：

```
@model DateTime
@Html.TextBox("", Model.ToString("dd/MM/yyyy"), new { @class = "txtStartDate" })
@Html.TextBox("", Model.ToString("dd/MM/yyyy"), new { @class = "txtEndDate" }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:06:44.730

另一种选择（类似于 chridam 的）是定义一个类，您可以将其用于所有需要日期选择器的文本框（假设它们的选项相同）。

剃刀：

```
@model DateTime
@Html.TextBox("", Model.ToString("dd/MM/yyyy"), new { @class = "date-picker" })
@Html.TextBox("", Model.ToString("dd/MM/yyyy"), new { @class = "date-picker" }) 
```

Javascript：

```
$(document).ready(function () {
   $('.date-picker').datepicker({
      //options...
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:18:40.887

**网络**

```
<form id="form1" runat="server">
  <asp:TextBox ID="fromDate" runat="server" />
  <asp:TextBox ID="toDate" runat="server" />
 </form> 
```

**jQuery**

```
var dates = $("#fromDate, #toDate").datepicker({
                maxDate: '0',
                changeMonth: true,
                numberOfMonths: 1,
                onSelect: function () { //write your code on selection}
            }); 
```

# javascript - javascript myform.action 没有

> ID：13193122
> 
> 赞同：0
> 
> 时间：2012-11-02T10:07:19.250
> 
> 标签：javascript

我正在尝试在带有表单的 JSP 中使用 javascript。该表单有一个带有 onchange 事件的下拉列表，用于调用函数以将所选值汇总到 servlet。我收到错误“对象不支持此操作”。我的代码中的语法错误是什么？

这是我的代码：

```
<form id="input" method="post" action="ResultServlet">
<input id=year type=text value="george">
<input id=year type=text value="mary">
<input id=year type=text value="fred">

<select id=casesId onchange = "sendCases();">
<option value="1">Test 1</option>
<option value="2">Test 2</option>
<option value="3">Test 3 </option>
</form>

<script typ=text/javascript>

function sendCases(){
var id = document.forms[0].caseId.options[document.forms[0].caseId.selectedIndex.value;

  if (id !='' || id == null{
   document.forms[0].action('CaseServlet').submit();
  }
}
</script> 
```

你能提供的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:09:14.087

改变：

```
if (id !='' || id == null{
    document.forms[0].action('CaseServlet').submit();
} 
```

为了：

```
if (id!='' || id == null) {
    document.forms[0].action = 'CaseServlet';
    document.forms[0].submit();
} 
```

1.  您有一个语法错误，您忘记关闭`if`. 不过，这可能是一个错字。
2.  `action`不是方法，而是属性。你不执行它，你给它赋值。
3.  该`submit()`方法仅适用于`form`对象，而不适用于其他东西:)

# google-chrome - 错误：需要参数 2（请求）。[schemaUtils:39]

> ID：13193129
> 
> 赞同：2
> 
> 时间：2012-11-02T10:07:47.187
> 
> 标签：google-chrome, google-chrome-extension

我使用 Google Chrome 扩展[JavaScript 错误通知器](https://chrome.google.com/webstore/detail/javascript-errors-notifie/jafmfknfnkoekkdocjiaipcnmkklaajd/details)。现在我在每个站点（也在 SO）上出现错误：***错误：参数 2（请求）是必需的。[schemaUtils:39]***。
这是我的错还是必须报告的扩展中的[错误](http://code.google.com/p/javascript-error-notifier/issues/list)？
在谷歌或他们的网站上找不到任何东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:02:37.303

扩展受到另一个名为[Magic Inputs Filler](https://chrome.google.com/webstore/detail/magic-inputs-filler/dgchjemniofpmdkgnoejdkgomjldfgmh)的扩展的干扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T12:44:22.627

我停用了断点，然后重新激活了它们。错误消失了。喜欢这里 [http://prntscr.com/4ixknk](http://prntscr.com/4ixknk)

# javascript - 使用后退按钮时 document.referrer 空白

> ID：13193131
> 
> 赞同：1
> 
> 时间：2012-11-02T10:07:53.020
> 
> 标签：javascript, jquery, referrer

我在 javascript 中使用 document.referrer 来检查用户来自哪里。目前我正在研究如果用户在我的页面上会发生什么，导航到另一个页面然后使用他们的后退按钮返回到原始页面。当我提醒推荐人时，有时它是空白的，有时它有地址。我似乎找不到任何模式，什么时候它是空白的，什么时候不是。有谁知道为什么有时它可能是空白的而其他人不是？这发生在 IE7 和 firefox over HTTP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:20:41.000

这很可能是 IE 中的一个错误： [http ://webbugtrack.blogspot.com/2008/11/bug-421-ie-fails-to-pass-http-referer.html](http://webbugtrack.blogspot.com/2008/11/bug-421-ie-fails-to-pass-http-referer.html)

# visual-studio-2010 - Visual Studio -.ASPX 文件需要更长的时间来加载

> ID：13193133
> 
> 赞同：0
> 
> 时间：2012-11-02T10:07:59.877
> 
> 标签：visual-studio-2010, debugging

我正在使用 VS 2010，我通过远程桌面访问它，但是当我运行某些页面时，它需要很长时间才能加载，我不知道为什么有任何快速解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:14:23.567

尝试在 VS2010 中禁用智能跟踪。网上有很多帖子，讨论 VS2010 中的这种行为。其中一个提示应该对您有所帮助。

# ios - UIView 视网膜 4 不起作用

> ID：13193135
> 
> 赞同：0
> 
> 时间：2012-11-02T10:08:05.580
> 
> 标签：ios, xcode, uiview, interface-builder, iphone-5

我正在尝试更新我的应用程序以适应 iPhone 5 4 英寸视网膜屏幕。

我正在为不同的屏幕尺寸版本使用自定义笔尖，因为我想展示不同的东西并利用更大的屏幕。

我已经创建了另一个 nib，并且可以从 initWithNib 方法正确调用它。

这就是我得到的：

![在此处输入图像描述](../Images/40946649f373dc3cbcf32c61635151b6.png)

这只是一个开始，我已将视图的背景颜色设置为黑色，但正如您所见，模拟器并没有放大视图。我不知道为什么。在 IB 中选择了 4 种 Retina View 类型。尺寸还可以。我已经检查了我所想的一切，但结果仍然相同。

有任何想法吗？

**更新**

这是我的设置：

![在此处输入图像描述](../Images/b9deb17dd31c0540d2ddace85c655bd4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:13:43.600

在 IB 中，您是否在 Simulated Metrics 面板中为顶栏或底栏设置了任何内容，因为这些会导致视图相应地缩小？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:23:53.773

好的...我只是在我的应用程序委托中设置框架，它导致了这个问题。我需要更多地查看我的代码:)

# xml - 使用 XSLT 修改 XML 文件中的属性

> ID：13193136
> 
> 赞同：0
> 
> 时间：2012-11-02T10:08:12.163
> 
> 标签：xml, xslt

我想修改一个 XML 文件，我在这个 XML 文件中有一些属性，我想更改它，即如果生产商是大众，那么我想将国家更改为“德国”，这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="example.xslt"?>
<Auto>
  <lkw producer="VW" country="USA">
    <name>Polo</name>
    <price>$5955.2</price>
    <color>red</color>
  </lkw>
  <lkw producer="Audi" country="germany">
    <name>A8</name>
    <price>$8955.2</price>
    <color>black</color>
  </lkw>
  <lkw producer="BMW" country="USA">
    <name>Polo</name>
    <price>$6955.2</price>
    <color>blue</color>
  </lkw>
 <lkw producer="VW" country="China">
    <name>Pasat</name>
    <price>$2955.2</price>
    <color>red</color>
  </lkw>
</Auto> 
```

这是我的 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="@producer[parent::VW]">
    <xsl:attribute name="country">
      <xsl:value-of select="'germany'"/>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

但我的 XML 文件没有变化，请告诉我，我在 XSLT 中的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:32:19.477

查看您当前的模板...

```
<xsl:template match="@producer[parent::VW]"> 
```

这其实等价于...

```
<xsl:template match="VW/@producer"> 
```

因此，当您真正想要检查属性的值时，它正在寻找一个名为**VW的元素。**

你真正想要做的是匹配**@producer**属性等于**VW**的元素的**@country属性**

 **```
<xsl:template match="lkw[@producer='VW']/@country">
  <xsl:attribute name="country">
    <xsl:value-of select="'germany'"/>
  </xsl:attribute>
</xsl:template> 
```**

# mono - 单声道：“mdoc：XML 文档中有错误”

> ID：13193137
> 
> 赞同：0
> 
> 时间：2012-11-02T10:08:12.617
> 
> 标签：mono

我在[Mono](http://packages.ubuntu.com/source/precise/amd64/mono)的源代码中[修改了几行 C# 代码](https://github.com/nicolas-raoul/mono/commit/f72fc52)，现在它不再构建：

```
make[7]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs/mcs'
make[7]: Entering directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs/docs'
/usr/bin/make all-local
make[8]: Entering directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs/docs'
MDOC    [net_4_0] cs-errors.tree
mdoc: There is an error in XML document.
See `mdoc help' for more information.
make[8]: *** [cs-errors.tree] Error 1
make[8]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs/docs'
make[7]: *** [do-all] Error 2
make[7]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs/docs'
make[6]: *** [all-recursive] Error 1
make[6]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs'
make[5]: *** [profile-do--net_4_0--all] Error 2
make[5]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs'
make[4]: *** [profiles-do--all] Error 2
make[4]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/mcs'
make[3]: *** [all-local] Error 2
make[3]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1/runtime'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/nico/src/mono-roman/mono-2.10.8.1'
make: *** [build-stamp] Error 2
dpkg-buildpackage: error: debian/rules build gave error exit status 2
Build command 'cd mono-2.10.8.1 && dpkg-buildpackage -b -uc' failed.
E: Child process failed 
```

问题是`mdoc: There is an error in XML document`。MDOC 是一种用于 Mono 的 Javadoc。我很惊讶更改一些良性 C# 行会使 MDOC 失败？

关于这里发生了什么的任何提示？我也不知道这是关于什么 XML 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:55:52.420

我在评论中发布的初步分析似乎是正确的。MDOC 正在加载`cs-errors.config`, 并使用新构建的运行时。在加载所述文件时，您所做的更改会产生以下异常：

```
System.InvalidOperationException: Element 'FilesPath' has wrong order in sequence (expected - -1, actual - 0 
```

这是您的补丁添加的。我猜您可能也想检查一下`readBySoapOrder`，例如：

```
if (readBySoapOrder && info.ExplicitOrder != ind)
    throw new InvalidOperationException(string.Format("Element '{0}' has wrong order in sequence (expected - {1}, actual - {2}", Reader.LocalName, info.ExplicitOrder, ind)); 
```

有了这个小小的改变，MDOC 很高兴并且编译成功，但我不知道这是否是正确的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:30:06.807

在再次尝试“make”之前尝试“make clean”。

# java - 使用 object-to-excel.jar 拧 xls 文件需要帮助

> ID：13193140
> 
> 赞同：0
> 
> 时间：2012-11-02T10:08:32.933
> 
> 标签：java, excel, xls

我最近才发现一个 api，它是 javaobject-to-xls。我真的很喜欢它，它的工作完美。但我不知道如何在单元格中编写链接（hiperlink）。意味着它将显示 google 但其实际值将是[http://www.google.com](http://www.google.com)。

请检查以下链接

[http://erdyes.wordpress.com/2012/07/06/convert-object-to-excel-with-java/](http://erdyes.wordpress.com/2012/07/06/convert-object-to-excel-with-java/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:16:49.927

您可以为超链接引入一个包含 Excel 公式的复合新字段。所以你像往常一样构造你的对象并引入一个新字段。假设您提供`urlName`和`urlValue`：

```
public class Website {
  private String urlName;
  private String urlValue;

  private String url; // new composite field

  public Website(String name, String value)
  {
      this.urlName = name;
      this.urlValue = value;
      this.url = "=HYPERLINK(\"" + urlValue + "\", \"" + urlName + "\")";
  } 
} 
```

正确的公式将写入 Excel 工作表，但不是直接解释公式，Excel 将首先只显示公式（至少在 Excel 2007 中是这样）。

要计算公式，您需要在 Excel 中聚焦表格单元格并按 Enter，以便 Excel 计算公式。也许其他人确实知道解决方案。

据我所知，没有可能实现您想要做的事情。

*// 编辑：在与提问者讨论后，我已经编辑了答案并完全改变了它。因此，评论已过时。*

# json - 如何在 Qt 中使用 evaluateJavascript() 将 JsonObject 作为参数传递给函数

> ID：13193146
> 
> 赞同：3
> 
> 时间：2012-11-02T10:08:51.337
> 
> 标签：json, qt

好吧，我已将我的 Qt 版本更新到版本 5（最新版本）。

我必须传递一个 JsonObject 作为参数。

我正在使用此语句来传递参数：

```
QString dnames = QString("getNameList(%1)").arg(data); 
```

这里的 data 是 JSON 对象，它不会编译并抛出类型转换错误。

如果有人为我提供了另一种如何将此 JsonObject 作为参数传递给上述函数的方法。

```
m_d->m_webView->page()->mainFrame->evaluateJavascript(dnames); 
```

# eclipse - 如何在 Eclipse 上安装 OpenCV？

> ID：13193149
> 
> 赞同：0
> 
> 时间：2012-11-02T10:08:55.640
> 
> 标签：eclipse, opencv, windows-7, eclipse-plugin

我已经下载`OpenCV`了，我尝试“将它与 Eclipse 连接”但没有成功，如果有人知道它是如何工作的，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:44:05.453

在 Eclipse 中安装 CDT C++ 插件。或者下载适用于 C/C++ 开发人员的 Eclipse IDE。然后去Eclipse。文件 -> 新建 -> C/C++ 项目。根据您的需要创建一个项目。从这里开始并不难。创建项目后，您可以从项目属性中调整其他设置。您还可以在此处找到 OpenCV 设置。

# hadoop - 映射减少链接

> ID：13193150
> 
> 赞同：0
> 
> 时间：2012-11-02T10:09:00.690
> 
> 标签：hadoop, mapreduce

> **可能的重复：**
> [Hadoop Map Reduce 链接中的数据共享](https://stackoverflow.com/questions/13154720/data-sharing-in-hadoop-map-reduce-chaining)

我有如下所述的 map reduce 链。

Job1(Map1 -> Reduce 1) --> Job2(Map2, Reduce2) Job1.waitForCompletion(true)

我需要一个值（假设 int a ，由 Reduce 1 创建），在 Map2 中。

我怎样才能做到这一点 ？？请分享你的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:27:46.103

您可以使用 ChainMapper 和 ChainReducer 。这是一个为您提供帮助的示例代码。

* * *

* * *

```
Configuration conf = getConf();
JobConf job = new JobConf(conf);
JobConf Conf1 = new JobConf(false);
ChainMapper.setMapper
(job,
Map1.class,
LongWritable.class,
Text.class,
Text.class,
Text.class,
true,
Conf1);

 JobConf Conf2 = new JobConf(false);
    ChainReducer.setReducer
    (job,
    Reduce1.class,
    Text.class,
    Text.class,
    Text.class,
    Text.class,
    true,
    Conf2);
JobConf Conf3 = new JobConf(false);
    ChainMapper.setMapper
    (job,
    Map2.class,
    Text.class,
    Text.class,
    Text.class,
    Text.class,
    true,
    Conf3);
JobConf Conf4 = new JobConf(false);
    ChainReducer.setReducer
    (job,
    Reduce2.class,
    Text.class,
    Text.class,
    Text.class,
    Text.class,
    true,
    Conf4); 
```

* * *

* * *

**笔记：**

```
the out-put Type of  key-value derive which Mapper and reducer is to be called next so , the output Type of Map1 should me same as Input Type of key-value of Reduce1 AND the output Type of Reduce1 should me same as Input Type of key-value of Map2 and 
the output Type of Map2 should me same as Input Type of key-value of Reduce2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:41:49.297

* * *

## 解决问题的计数器

* * *

*您可以使用 Job1,Reduce1 中的计数器从 Job1 获取值，然后将其传递给 Job2 。这是需要编码的流事物的示例代码。*

***1.使用计数器设置值的示例代码***

```
 Reducer()
{
public static enum COUNTER {
  INTVALUE
};

Reduce()
{
// Old API
reporter.incrCounter(COUNTER .INTVALUE, 1);

//NEW API
context.getCounter(COUNTER .INTVALUE).increment(1);

}

} 
```

* * *

* * *

***2.从job1中获取set counter，然后设置到Job2的JonConf中，mapper可以得到相同的值。***

* * *

```
main()
{
// .....
jobclient1.submit(job1);
RunningJob job = JobClient1.runJob(conf);  // blocks until job completes
Counters c = job.getCounters();
int value= c.getCounter(COUNTER .INTVALUE);

// Now set the value in Job2 
Job job2 = new JobConf(conf);
job2.setInt("name", value);
} 
```

* * *

* * *

***3.Map2从Job1 counter->Jobconf2获取值***

* * *

```
 mapper()
 {
    int value;

    @Override
    public void configure(JobConf job) {

        value=job.getInt("name", 0);
    }

    @Override
    public void map(Text key, Text value,
            OutputCollector<LongWritable, Text> output, Reporter arg3)
            throws IOException {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:01:29.013

```
---------- 
```

## 另一个答案

* * *

***将 Reduce1 的输出保存到 flatfile(hdfs) 读取该文件，同时在 2nd job 中设置 driver(Job) 。然后在上下文中设置变量。***

* * *

```
//read reducer output from file . and set it @name variable 
Configuration conf = getConf();
Job job = new JobConf(conf);
conf.setInt("name", 0000); 
```

*在映射器中（map2）*

```
 mapper()
{
int value;

        @Override
        public void configure(JobConf job) {

            value=job.getInt("name", 0);
        }

        @Override
        public void map(Text key, Text value,
                OutputCollector<LongWritable, Text> output, Reporter arg3)
                throws IOException {

        }
} 
```

* * *

# java - 将空格插入数组

> ID：13193152
> 
> 赞同：-6
> 
> 时间：2012-11-02T10:09:10.553
> 
> 标签：java, arrays

假设我有一个随机数数组，例如：

```
int [] x = {3,45,17,2,-1,44,9,23,67,2,-6,-23,-100,12,5,1212}; 
```

如何在每个整数之间插入空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:09:58.667

如果它们是整数类型，则不能 - 不存储空格。

如果要存储空格，则需要创建一个字符串数组。

如果您只想使用空间打印它们...

```
private final static int[] numbers = { 1, 2, 3, 4, 5};

public static void main(String[] args) {
    for(int i : numbers) {
        System.out.print(i + " ");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:18:03.010

您可以拥有带空格的对象数组，但不能拥有 int 数组

```
 int [] x = {3,45,17,2,-1,44,9,23,67,2,-6,-23,-100,12,5,1212};
    Object [] o = new Object[x.length];

    for(int i=0;i<x.length;i++){
        o[i] = x[i]+" ";
        System.out.println(o[i]);
    } 
```

# php - RewriteRule htaccess 和隐藏的 php 文件为所有

> ID：13193156
> 
> 赞同：1
> 
> 时间：2012-11-02T10:09:14.370
> 
> 标签：php, .htaccess, mod-rewrite

我在 RewriteRule htaccess 中遇到问题：示例：我的 php 文件是 main.php，当用户尝试访问**www.mysite.com/hello**时我们需要，然后 为此示例显示**www.mysite.com/main.php**我们有以下代码在 .htacces 中：

```
# BEGIN Htaccess
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^hello/*$ main.php 
```

但在此代码中，如果用户可以打开**www.mysite.com/hello**和**www.mysite.com/main.php**

我需要如果用户尝试**www.mysite.com/main.php**然后显示错误*404*但如果尝试**www.mysite.com/hello**查看**main.php的内容**

谢谢你;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:44:45.927

您需要在此处匹配实际请求：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /main\.php
RewriteRule ^ - [L,R=404] 
```

如果需要，您可以在下方添加`RewriteEngine On`。处理此问题的另一种方法是`$_SERVER['REQUEST_URI']`在您的**main.php**脚本中进行检查，如果是`/main.php`，则返回 404 响应，而不是提供内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:48:46.913

你不能 404 main.php 也不能 301 到 /hello 因为它会进入无限循环。您必须检查 main.php 中的 url，如果它与 hello 不同，请将其重定向到 /hello

# apache-flex - flex graph categoryAxis 多线标签未完全显示

> ID：13193157
> 
> 赞同：1
> 
> 时间：2012-11-02T10:09:21.630
> 
> 标签：apache-flex, graph, multiline, axis-labels

其他人在这里提出了同样的问题：

[http://www.amcharts.com/forum/viewtopic.php?pid=39204#p39204](http://www.amcharts.com/forum/viewtopic.php?pid=39204#p39204)

但不提供公开和通用的解决方案。

比如我的categoryAxis标签是由日、月、年组成的，应该分3行显示。但是有时候放大图表时，可能会丢失“年”。就像这里显示的图表： [http ://forums.adobe.com/message/4817858#4817858](http://forums.adobe.com/message/4817858#4817858)

任何人都知道如何解决这个问题？

我试图找到可能与此相关但失败的 AxisRenderer 属性。

任何建议，将不胜感激！谢谢。

# objective-c - 将推特提要提取到 IOS 应用程序中

> ID：13193170
> 
> 赞同：0
> 
> 时间：2012-11-02T10:10:08.930
> 
> 标签：objective-c, ios, json, twitter

我正在尝试将某个用户的 twitter 提要提取到我的 IOS 应用程序中。首先，我让它与这个链接一起工作。

```
https://twitter.com/status/user_timeline/wwwkrcgenkbe.json?count=25&from=wwwkrcgenkbe 
```

但是当我测试它时，我得到了以下错误：

```
{

    "errors": [
        {
            "message": "Sorry, that page does not exist",
            "code": 34
        }
    ]

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:39:35.640

Twitter 最近关闭了该 API 端点。( `https://dev.twitter.com/docs/faq#11716`)

您需要使用格式为`api.twitter.com/v1.1/`.

我建议阅读最新的 API 文档，这可能是一个不错的起点：[https ://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

# spring - 对于测试套件，用内存中的 HSQLDB 替换 MYSQL 不起作用

> ID：13193171
> 
> 赞同：2
> 
> 时间：2012-11-02T10:10:09.743
> 
> 标签：spring, hibernate, struts2, testng, hsqldb

我们有一个使用 Struts、Spring 和 hibernate 的应用程序。以前，我们使用 mysql 数据库来使用 testng 框架运行测试套件。现在我们要使用 HSQLDB 的“内存”数据库。我们已经进行了所有必需的代码更改，以便在“内存中”模式下使用 HSQLDB。

例如。

数据源 url = jdbc:hsql:mem:TEST_DB

用户名 = sa

密码 =

驱动程序 = org.hsqldb.jdbcDriver

休眠方言= org.hibernate.dialect.HSQLDialect

Hibernate.hbm2ddl.aoto = 创建

```
 @Autowired
private DriverManagerDataSource dataSource;
private static Connection dbConnection;
private static IDatabaseConnection dbUnitConnection;
private static IDataSet dataSet;
private MockeryHelper mockeryHelper;

    public void startUp() throws Exception {
mockeryHelper = new MockeryHelper();
        if (dbConnection == null) {
            dbConnection = dataSource.getConnection();
            dbUnitConnection = new DatabaseConnection(dbConnection);
            dbUnitConnection.getConfig().setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new HsqldbDataTypeFactory());
            dataSet = new XmlDataSet(new FileInputStream("src/test/resources/test-data.xml"));
        }
        DatabaseOperation.CLEAN_INSERT.execute(dbUnitConnection, dataSet);
} 
```

我们已经对我们的基类进行了必要的代码更改，我们在每次测试之前和之后启动和拆卸数据库。我们使用 test-data.xml 文件，从中我们使用 testng 框架将测试数据插入到创建的数据库中。现在我的问题是

1.当我运行测试用例时，数据库被创建并且数据也被正确插入。但是，当我尝试从 struts 的拦截器中检索它们时，我各自的 daos 返回空对象列表。

2.我们使用HSQLDB 1.8.0.10版本。对其他项目进行相同的配置。在该项目中，大多数测试用例都成功运行，但其中一些测试用例的数据排序顺序不正确。我们发现 HSQLDB 对排序是区分大小写的。并且有一个属性 sql.ignore_case，当设置为 true 时，排序变得不区分大小写。但这对我们不起作用。有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:43:31.440

恐怕`sql.ignore_case`在您的 HSQLDB 版本中不可用，因为它甚至不在最后一个稳定版（2.2.9）中，与文档所说的相反。[但是，如该线程](http://sourceforge.net/projects/hsqldb/forums/forum/73674/topic/5574824)中所述，最新的快照确实包含它。我自己没有使用 1.8，而是`SET IGNORECASE TRUE`在任何表创建可能对您有用之前执行，它在 2.2.9 中有效。如果您真的需要 1.8，第三种选择可能是从最新源代码中选择相关代码，将其添加到 1.8 源代码并重新编译，不知道这有多难/容易。

# eclipse - 在 jboss 服务器中部署 war 文件时出现 NoClassDefFoundError/classnotfound 异常？

> ID：13193179
> 
> 赞同：0
> 
> 时间：2012-11-02T10:10:41.973
> 
> 标签：eclipse

在此示例中，通过查询从 MySql 获取数据并将值设置`SubjectScoreWithSubjectName`并存储在数组列表中。但是这个例子在 localhost 中的 tomcat 服务器的帮助下在 eclipse juno 中运行。

**在我的本地机器上完成此操作后，我想上传到在线 JBOSS 服务器，但它显示以下错误。？**

```
 type Exception report

        message

        description The server encountered an internal error () that prevented it from fulfilling this request.

        exception

        org.apache.jasper.JasperException: An exception occurred processing JSP page /login.jsp at line 33

        30: //      out.println("welcome");
        31:         String message = "OOps!!! Invalid Username/Password";
        32:         request.setAttribute("message", message);
        33:         request.getRequestDispatcher("/angular-gauge.jsp").forward(request, response);
        34:     }
        35:     else
        36:     {

        Stacktrace:
            org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:498)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        root cause

        org.apache.jasper.JasperException: An exception occurred processing JSP page /angular-gauge.jsp at line 56

        53: 
        54: 
        55:     while (rs.next()) {
        56:         SubjectScoreWithSubjectName score = new SubjectScoreWithSubjectName();
        57: 
        58:         score.setSUBJECT_ID(rs.getInt("SUBJECT_ID"));
        59: 

        Stacktrace:
            org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:498)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jsp.login_jsp._jspService(login_jsp.java:88)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        root cause

        javax.servlet.ServletException: java.lang.NoClassDefFoundError: com/table/values/SubjectScoreWithSubjectName
            org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:852)
            org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:781)
            org.apache.jsp.angular_002dgauge_jsp._jspService(angular_002dgauge_jsp.java:1087)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jsp.login_jsp._jspService(login_jsp.java:88)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        root cause

        java.lang.NoClassDefFoundError: com/table/values/SubjectScoreWithSubjectName
            org.apache.jsp.angular_002dgauge_jsp._jspService(angular_002dgauge_jsp.java:112)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jsp.login_jsp._jspService(login_jsp.java:88)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        root cause

        java.lang.ClassNotFoundException: com.table.values.SubjectScoreWithSubjectName
            java.net.URLClassLoader$1.run(URLClassLoader.java:200)
            java.security.AccessController.doPrivileged(Native Method)
            java.net.URLClassLoader.findClass(URLClassLoader.java:188)
            java.lang.ClassLoader.loadClass(ClassLoader.java:306)
            java.lang.ClassLoader.loadClass(ClassLoader.java:251)
            org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:128)
            org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66)
            java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
            org.apache.jsp.angular_002dgauge_jsp._jspService(angular_002dgauge_jsp.java:112)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jsp.login_jsp._jspService(login_jsp.java:88)
            org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
            org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
            org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
            javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)

**This is my java class (setter / getter method class)...

        my com.table.values.SubjectScoreWithSubjectName this class available in Project -> java resources -> src ->com.table.values.SubjectScoreWithSubjectName**

        package com.table.values;

        public class SubjectScoreWithSubjectName {
            private int USER_ID;
            private int SUBJECT_ID;
            private int CUMULATIVE_SCORES;
            private String SUBJECT_NAME;

            public int getUSER_ID() {
                return USER_ID;
            }

            public void setUSER_ID(int uSER_ID) {
                USER_ID = uSER_ID;
            }

            public int getSUBJECT_ID() {
                return SUBJECT_ID;
            }

            public void setSUBJECT_ID(int sUBJECT_ID) {
                SUBJECT_ID = sUBJECT_ID;
            }

            public int getCUMULATIVE_SCORES() {
                return CUMULATIVE_SCORES;
            }

            public void setCUMULATIVE_SCORES(int cUMULATIVE_SCORES) {
                CUMULATIVE_SCORES = cUMULATIVE_SCORES;
            }

            public String getSUBJECT_NAME() {
                return SUBJECT_NAME;
            }

            public void setSUBJECT_NAME(String sUBJECT_NAME) {
                SUBJECT_NAME = sUBJECT_NAME;
            }

        }

**so if i have doing anything wrong then tell me .
thanks in advance.** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:17:09.490

`com/table/values/SubjectScoreWithSubjectName.class`您的应用程序无法访问该类。

尝试将其包含在`WEB-INF\lib`文件夹中，或将其包含在服务器的`CLASSPATH`

**更新**

有关 Java EE 应用程序的基本结构，请参见[http://www.servletworld.com/servlet-tutorials/web-application-directory-structure.html](http://www.servletworld.com/servlet-tutorials/web-application-directory-structure.html)。

通常，您的库（jar）应该在文件夹中`web-inf/lib`，您的类应该在`web-inf/classes`文件夹中。

如果`com/table/values/SubjectScoreWithSubjectName`是一个单独的类，它应该进入 classes 文件夹，但如果它在你正在应用程序中导入的库中，它应该进入 lib 文件夹。

# vbscript - 不使用 activeX 对象从 vbscript 下载 ftp 文件

> ID：13193181
> 
> 赞同：0
> 
> 时间：2012-11-02T10:10:52.667
> 
> 标签：vbscript, ftp

我想使用 vbscript 代码下载一个 ftp 文件。我正在使用以下代码：

window.open("ftp://10.237.225.175/securityNT.reg")

要在 IE7 中下载此文件，我必须在 Internet 选项 -> 安全 -> Internet -> 自定义级别中启用文件下载自动提示。我必须下载文件而不在 vbscript 中启用它。请为此提出解决方案。我不能为此使用 activex 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:14:43.560

脱壳（.Run，​​.Exec）并使用 ftp.exe 和合适的命令文件（-s:filename 选项）。

# android - Android DOM 解析 - 转换 pubDate 标签

> ID：13193182
> 
> 赞同：0
> 
> 时间：2012-11-02T10:10:56.083
> 
> 标签：android, dom, datetime, xml-parsing

我使用 DOM Parser 来解析这个 XML 提要：[http ://loc.grupolusofona.pt/index.php/?format=feed](http://loc.grupolusofona.pt/index.php/?format=feed)

它工作正常，解析了我需要的所有字段，但我想将从标签 pubDate 获得的结果从“Wed，2012 年 10 月 31 日 17:12:42 +0000”转换为“2 天前，17:12”或其他东西像这样。

我该怎么做 ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:49:36.980

这是您需要的代码：

```
String dateString = "Wed, 31 Oct 2012 12:12:42 +0100";
SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z", Locale.US);
Date date = null;
try {
    date = sdf.parse(dateString);
    String timeOfDay = new SimpleDateFormat("HH:mm").format(date);
    java.sql.Timestamp timeStampDate = new Timestamp(date.getTime());
    java.sql.Timestamp timeStampNow = new Timestamp((new java.util.Date()).getTime());

    long secondDiff = timeStampNow.getTime() / 1000 - timeStampDate.getTime() / 1000;
    int minuteDiff = (int) (secondDiff / 60);
    int hourDiff = (int) (secondDiff / 3600);
    int dayDiff = daysBetween(date, new Date()) - 1;
    if (dayDiff > 0) {
        System.out.println("Posted " + dayDiff + " days ago @ " + timeOfDay);
    } else if (hourDiff > 0) {
        System.out.println("Posted " + hourDiff + " hour(s) ago @ " + timeOfDay);
    } else if (minuteDiff > 0) {
        System.out.println("Posted " + minuteDiff + " minute(s) ago @ " + timeOfDay);
    } else if (secondDiff > 0) {
        System.out.println("Posted " + secondDiff + " second(s) ago @ " + timeOfDay);
    }
} catch (ParseException e) {
    e.printStackTrace();
} 
```

天数：

```
public static int daysBetween(Date startDate, Date endDate) {
    int daysBetween = 0;
    while (startDate.before(endDate)) {
        startDate.setTime(startDate.getTime() + 86400000);
        daysBetween++;
    }
    return daysBetween;
} 
```

输出： 2天前@ 12:12发布

# xml - JAXB：使用 XmlJavaTypeAdapter 时如何抑制周围的 XmlElement？

> ID：13193187
> 
> 赞同：1
> 
> 时间：2012-11-02T10:11:17.753
> 
> 标签：xml, jaxb, suppress

我在编组时`@XmlJavaTypeAdapter`将`Map<String, MapItem>`对象转换为`List<MapItem>`（反之亦然）。

该列表总是有一个周围`@XmlElement`，我想摆脱它，因为它使生成的 XML 变得混乱。

如何才能做到这一点？

或者，换句话说，我怎样才能摆脱`map`以下 XML 中的元素：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<top>
    <map>
        <item val="some-val" key="some-key"/>
    </map>
</top> 
```

* * *

Class`MapItem`是一个带有键和值的简单类：

```
public static class MapItem {
    @XmlAttribute(name = "key")
    String key;

    @XmlAttribute(name = "val")
    String val;
} 
```

* * *

`Map<String, MapItem>`隐式或显式 的声明包含一个`@XmlElement`注释：

```
@XmlJavaTypeAdapter(MyMapItemAdapter.class)
@XmlElement(name = "map")
Map<String, MapItem> map = new TreeMap<String, MapItem>(); 
```

* * *

类`@XmlJavaTypeAdapter`：

```
@XmlType(name = "map-type", propOrder = { "list" })
static class MyMapItemType {
    @XmlElement(name = "item")
    List<MapItem> list = new ArrayList<MapItem>();
}

@XmlTransient
static final class MyMapItemAdapter extends
        XmlAdapter<MyMapItemType, Map<String, MapItem>> {

    MyMapItemAdapter() {
    }

    @Override
    public MyMapItemType marshal(Map<String, MapItem> arg0)
            throws Exception {
        MyMapItemType myMapType = new MyMapItemType();
        for (Entry<String, MapItem> entry : arg0.entrySet()) {
            myMapType.list.add(entry.getValue());
        }
        return myMapType;
    }

    @Override
    public Map<String, MapItem> unmarshal(MyMapItemType arg0)
            throws Exception {
        TreeMap<String, MapItem> treeMap = new TreeMap<String, MapItem>();
        for (MapItem myEntryType : arg0.list) {
            treeMap.put(myEntryType.key, myEntryType);
        }
        return treeMap;
    }
} 
```

* * *

顶级声明：

```
@XmlRootElement(name = "top")
@XmlType(name = "top")
@XmlAccessorType(XmlAccessType.FIELD)
public class JaxbMapTest { 
```

* * *

我完整的测试课：

```
package xml;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;
import java.util.Map.Entry;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement(name = "top")
@XmlType(name = "top")
@XmlAccessorType(XmlAccessType.FIELD)
public class JaxbMapTest {

    public static class MapItem {
        @XmlAttribute(name = "key")
        String key;

        @XmlAttribute(name = "val")
        String val;
    }

    @XmlTransient
    static final class MyMapItemAdapter extends
            XmlAdapter<MyMapItemType, Map<String, MapItem>> {

        MyMapItemAdapter() {
        }

        @Override
        public MyMapItemType marshal(Map<String, MapItem> arg0)
                throws Exception {
            MyMapItemType myMapType = new MyMapItemType();
            for (Entry<String, MapItem> entry : arg0.entrySet()) {
                myMapType.list.add(entry.getValue());
            }
            return myMapType;
        }

        @Override
        public Map<String, MapItem> unmarshal(MyMapItemType arg0)
                throws Exception {
            TreeMap<String, MapItem> treeMap = new TreeMap<String, MapItem>();
            for (MapItem myEntryType : arg0.list) {
                treeMap.put(myEntryType.key, myEntryType);
            }
            return treeMap;
        }
    }

    @XmlType(name = "map-type", propOrder = { "list" })
    static class MyMapItemType {
        @XmlElement(name = "item")
        List<MapItem> list = new ArrayList<MapItem>();
    }

    public static void main(String[] args) {

        try {

            // Setup object
            JaxbMapTest jaxbMapTest = new JaxbMapTest();
            MapItem mapItem = new MapItem();
            mapItem.key = "some-key";
            mapItem.val = "some-val";
            jaxbMapTest.add(mapItem);

            // Marshal
            JAXBContext jaxbContext = JAXBContext
                    .newInstance(JaxbMapTest.class);
            Marshaller marshaller = jaxbContext.createMarshaller();
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,
                    Boolean.TRUE);
            marshaller.marshal(jaxbMapTest, new File("JaxbMapTest.out"));

            // Exit
            System.exit(0);
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    }

    @XmlJavaTypeAdapter(MyMapItemAdapter.class)
    @XmlElement(name = "map")
    Map<String, MapItem> map = new TreeMap<String, MapItem>();

    void add(MapItem mapItem) {
        map.put(mapItem.key, mapItem);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:20:20.540

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用`@XmlPath(".")`MOXy 中的扩展来映射此用例。指定`"."`为路径表示应将子对象的内容写入父对象元素。

```
import java.util.HashMap;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    @XmlJavaTypeAdapter(MyMapItemAdapter.class)
    @XmlPath(".")
    Map<String, MapItem> map = new TreeMap<String, MapItem>();       

} 
```

**完整示例**

*   [JAXB 编组由 XmlAdapter 创建的 ArrayList](https://stackoverflow.com/questions/13163430/jaxb-marshal-an-arraylist-created-by-xmladapter/13163680#13163680)

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# c# - Datagridview颜色变化

> ID：13193188
> 
> 赞同：0
> 
> 时间：2012-11-02T10:11:20.493
> 
> 标签：c#, datagrid

我正在尝试根据单元格中的值更改颜色，无论是完整的还是不完整的，但由于某种原因，它表示当前上下文中不存在“颜色”。

是否有我应该使用的系统项目或其他什么？

如果有人对我正在尝试做的事情有任何选择，那也将不胜感激。

```
foreach (DataGridViewRow row in dtaFinished.Rows)
        {
            string RowType = row.Cells[4].Value.ToString();

            if (RowType == "Completed")
            {
                row.DefaultCellStyle.BackColor = Color.Green; //Error on these lines
                row.DefaultCellStyle.ForeColor = Color.White; //Error on these lines
            }
            else if (RowType == "Incomplete")
            {
                row.DefaultCellStyle.BackColor = Color.Yellow;
                row.DefaultCellStyle.ForeColor = Color.Black;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:14:42.137

使用以下命名空间：

`using System.Drawing;`

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:20:27.337

嗨，你可以在[这里找到你的答案](http://www.codeproject.com/Articles/2214/Changing-the-background-color-of-cells-in-a-DataGr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:41:39.187

不久前我在一个项目中使用了它：-

```
private void dgvOutstandingReports_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
            {
                int colIndex = e.ColumnIndex;
                int rowIndex = e.RowIndex;

                if (rowIndex >= 0 && colIndex >= 0)
                {
                    DataGridViewRow theRow = dgvOutstandingReports.Rows[rowIndex];

                    if (theRow.Cells[colIndex].Value.ToString() == "Daily Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.LightYellow;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "Monthly Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.LightGray;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "SMP Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.Snow;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "Weekly Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.Pink;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "Hourly Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.LightSteelBlue;
                    }
                }
            } 
```

# android - 如何在 FragmentActivity 中使用自定义 iPhone 选项卡？

> ID：13193189
> 
> 赞同：1
> 
> 时间：2012-11-02T10:11:23.913
> 
> 标签：android, android-layout, android-fragments, android-tabhost, android-fragmentactivity

我是 Android 新手，我尝试使用 FragmentActivity 从我在网上找到的代码创建一个选项卡。 [http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

这是我的 FragmentActivity [http://pastie.org/pastes/5170802/text?key=jhowuevxe2fshlwu5tisg](http://pastie.org/pastes/5170802/text?key=jhowuevxe2fshlwu5tisg)

我想使用使用图像和文本的自定义布局。

```
//tab_indicator.xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="0dip"
android:layout_height="55dip"    
android:layout_weight="1"
android:orientation="vertical"
android:background="@drawable/tab_indicator"
android:padding="5dp">

<ImageView android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:src="@drawable/icon"/> 

<TextView android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" 
    android:layout_centerHorizontal="true"
    style="?android:attr/tabWidgetStyle"/>
</RelativeLayout> 
```

我在这里发现了一个类似的问题：[在 FragmentActivity 中创建自定义选项卡，](https://stackoverflow.com/questions/9958303/create-custom-tab-in-fragmentactivity)但我无法弄清楚如何在我的代码中应用该解决方案。有人可以教我怎么做吗？谢谢你。

更新：

我设法在我的代码中夸大了自定义布局。但我遇到了另一个错误。这是我最新的代码[http://pastie.org/pastes/5187362/text?key=74r87diquysvruwsam1tq](http://pastie.org/pastes/5187362/text?key=74r87diquysvruwsam1tq)调整为 FragmentActivity，来自 AdilSoomro [http://adilsoomro.blogspot.com/2011/06/iphone-like-tabs-in- android.html](http://adilsoomro.blogspot.com/2011/06/iphone-like-tabs-in-android.html)代码（使用 TabActivity）和一些来自

*   [http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)
*   [http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

我的最新代码成功地像这样膨胀了布局，其布局设置为[http://pastie.org/pastes/5187408/text?key=qxxa5xxrhsburebllyhmw](http://pastie.org/pastes/5187408/text?key=qxxa5xxrhsburebllyhmw) (tab_indicator.xml)

![在此处输入图像描述](../Images/118906d4fdaf6a82135d2ccb903199ec.png) 但我需要将标签对齐到底部。当我将它对齐到底部时，代码 layout_gravity="bottom" 在图形布局上工作，但是当我运行它时，我的相对布局的背景会填满整个屏幕，就像代码[http://pastie.org/pastes/5187445 /text?key=6dz2tsiggey9se51d2thtq](http://pastie.org/pastes/5187445/text?key=6dz2tsiggey9se51d2thtq)

![在此处输入图像描述](../Images/471bfa6e3254c655f362e5812e1b67cf.png)

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:37:45.937

解决了！最后！在测试了我提到的其他资源后，我意识到 RelativeLayout 中的 layout_alignParentBottom 没有给出任何结果。因此，我尝试将 TabWidget 对齐到底部，并且成功了！

这是我的 main.xml，其中包含 TabHost 和 TabWidget。 [http://pastie.org/pastes/5188297/text?key=lqfp3jnofs5kgsvslm3yg](http://pastie.org/pastes/5188297/text?key=lqfp3jnofs5kgsvslm3yg)

保留 tab_indicator.xml / 文本和图像的设置，如下所示：[http ://pastie.org/pastes/5187408/text?key=qxxa5xxrhsburebllyhmw](http://pastie.org/pastes/5187408/text?key=qxxa5xxrhsburebllyhmw)

这是一个使用 FragmentActivity 的自定义 iPhone 选项卡：

P/S：对不起，如果我的 Java 文件令人困惑，我是新手，如果我做错了什么，请告诉我。

![在此处输入图像描述](../Images/f44a702075b8a09558022f8e5605a5cc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:23:12.660

试试这个蜂蜜>

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="55dp"    
    android:layout_weight="1"
    android:orientation="vertical" 
    android:layout_gravity="bottom"  
    android:background="@android:drawable/title_bar"
    android:padding="5dp"> 

    <TextView android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" 
        android:layout_centerHorizontal="true"
        style="?android:attr/tabWidgetStyle"/>

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/ic_action_search" />

      <ImageView
          android:id="@+id/icon"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentLeft="true"
          android:layout_centerVertical="true"
          android:layout_marginLeft="49dp"
          android:src="@drawable/ic_action_search" />

</RelativeLayout> 
```

# c# - 如何优化从数据库中检索图像？

> ID：13193190
> 
> 赞同：-3
> 
> 时间：2012-11-02T10:11:28.003
> 
> 标签：c#, asp.net

我正在从数据库中检索图像并使用 Datalist 显示，但是图像加载时间很长，因此需要帮助来优化它。这是我的代码：

```
public byte[] GetPicture(string Id, string state)
{
    byte[] picData = null;

    try
    {
        if (con.State == ConnectionState.Closed)
            this.openConnection();
        strGetImage = string.Format(strGetImage, Id);
        OleDbCommand oledbCommand = new OleDbCommand(strGetImage, con);
        picData = (byte[])(oledbCommand.ExecuteScalar());

               }
    catch (Exception)
    {
    }
    finally
    {
        con.Close();
    }
    return picData;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:27:18.070

您可以将图像保存在驱动器上的某个本地文件夹中，然后将它们的路径保存在数据库中。当您想要检索时，您可以从数据库中获取路径并从该路径读取图像文件。

```
byte[] img = Files.readAllBytes(Path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:00:09.007

我猜图像不会改变，因此添加缓存将为您节省到数据库的往返行程。或者将图像保存在磁盘上而不是数据库上也会有所帮助。

# ios - 是否可以在 Apple 设备（即 Iphone、Ipad）上跟踪 cookie 等

> ID：13193196
> 
> 赞同：0
> 
> 时间：2012-11-02T10:11:40.040
> 
> 标签：ios, iphone, ipad, mobile

我运行一个附属网站（优惠券代码），我正在研究开发一个 IOS 应用程序，该应用程序可能会在应用程序上显示优惠券等。有谁知道在 Iphone 设备上打开链接时，附属跟踪链接是否按预期运行。链接也可以打开主要的 Safari 应用程序，还是必须在凭证应用程序中进行浏览？

所以一个例子是你点击链接，它把你引向联盟网络。网络在设备上存储一个 cookie，您将被定向到该站点。cookie 会按预期存储在移动设备上吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:25:09.257

看看 NSHTTPCookieStorage，它可能会对你有所帮助。

`NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSArray *cookies = [storage cookiesForURL: [NSURL URLWithString: @"http://google.com/"]];`

# html - CSS：滚动条在窗口下方几个像素处开始

> ID：13193197
> 
> 赞同：2
> 
> 时间：2012-11-02T10:11:47.363
> 
> 标签：html, css, position, scrollbar, move

我想修复我的页眉：页眉始终位于页面顶部，我的整个内容（包括页脚在内的所有内容）都可以滚动。标题为 60 px 高，如下所示，将其固定在顶部不是问题。

我要解决的问题（仅使用 CSS）是**让滚动条从顶部开始低于这 60 个像素。** 如您所见，滚动条的底部（2\. 箭头）实际上是隐藏/向下移动的。我猜我有问题的 60 像素。所以它是这样的：

![滚动条](../Images/e71ca07310e7d4e143afaf4db0c1c7fd.png)

HTML：

```
<!DOCTYPE html>
<head>
...
</head>

<body>
    <header>
        ...
    </header>

    <div id="content">
        ...
    </div>
</body>
</html> 
```

CSS：

```
html, body {
    height: 100%;
}

body {
    background: #d0d0d0;
    overflow-y: hidden; 
}

header { 
    background: #fff;
    height: 60px;
    width: 100%;

    position: fixed;
    top: 0;
}

#content {
    margin-top: 60px;
    height: 100%; 
    width: 100%;

    overflow-y: scroll;
} 
```

我的 CSS 中缺少什么？多谢你们。

//**编辑**作为对这里 forst 答案的回复（对 John Grey）

您的评论下方的评论：

![滚动条_2](../Images/d3a707862b76256bbb135705e0a2fd7b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:45:24.227

这是一个 jsfiddle 如何解决您的问题：http: [//jsfiddle.net/sTSFJ/2/](http://jsfiddle.net/sTSFJ/2/)

这是CSS：

```
html, body {
    height: 100%;
    margin: 0px;
    padding: 0px;
}

#wrapper {
    width: 100%;
    height: 100%;
    margin: auto;
    position: relative;
}

#header {
    height: 40px;
    background-color: blue;
    color: #fff;
}

#content {
    position:absolute;
    bottom:0px;
    top: 40px;
    width:100%;
    overflow: scroll;
    background-color: #fff;
    color: #666;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:16:12.330

您的#content 高度等于身体高度，但您有一个标题，所以......尝试使用这个：

```
html, body {
    height: 100%;
}

body {
    background: #d0d0d0;
    overflow-y: hidden; 
}

header { 
    background: #fff;
    height: 5%;
    width: 100%;

    position: fixed;
    top: 0;
}

#content {
    margin-top: 5%;
    height: 95%; 
    width: 100%;

    overflow-y: scroll;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T11:50:08.357

您可以使用 calc 属性解决此问题。这不是 95% 的高度，因为您不知道 5% == 60px 是否而是执行以下操作：-

```
#content {
    margin-top: 5%;
    height: calc(100%-60px); 
    height: -webkit-calc(100%-60px); /*For webkit browsers eg safari*/
    height: -moz-cal(100%-60px); /*for firefox*/
    width: 100%;
    overflow-y: scroll;
} 
```

# javascript - 谁知道PhoneGap存储

> ID：13193198
> 
> 赞同：-2
> 
> 时间：2012-11-02T10:11:47.420
> 
> 标签：javascript, ajax, sqlite, cordova

我正在尝试开发一个android应用程序，这个脚本将在我的手机上复制一个数据库表，但是执行后他在下面显示这个错误

```
//---------------Copier-------------------------    

 $.ajax({
         type: "POST",
         url: "http://10.0.2.2:1998/bYzance_web_service/get_all_PhrasesTypes.asmx/Get_all_PrasesTypes",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         async : false,
         success: function (data)
          {
             alert("success: function (data)");

             var result = $.parseJSON(data.d); 

             alert(result[0].Phrase);

             for (i = 0; i < result.length; i++) 
             {                 
                 tx.executeSql("INSERT INTO PhrasesTypes (idPhrase,idPhraseES,idRubrique,idTypeTravauxAffichage,Phrase,AidePhrase,AvertissementPhrase,OrdrePhrase,QuotationParDefaut,Published)"
+  " VALUES ('"+result[i].IdPhrase+"',' "+result[i].IdPhraseES+" ',' "+result[i].IdRubrique+" ',' "+result[i].IdTypeTravauxAffichage+" ','"+mysql_real_escape_string(result[i].Phrase)+"',' "+result[i].AidePhrase+" ',' "+result[i].AvertissementPhrase+" ','"+result[i].OrdrePhrase+"','"+result[i].QuotationParDefaut+"','"+result[i].Published+" ')");
       console.log(i);
    }

         },
         error: function (e)
          {
            alert("URL du web service:  "+serviceURL+"get_all_PhrasesTypes.asmx/Get_all_PrasesTypes");

         }

     });//fin Ajax 
```

> sqlite 返回：错误代码 =1，“accunedifined”附近的消息：语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:24:34.817

看来该声明无效。您只需将字符串相加，甚至使用 function `mysql_real_escape_string`，这是一个 PHP 函数，除非您也在 Javascript 中定义了它。如果这些字符串中的任何一个包含无效字符，尤其是 a `'`，您的语句将变为无效。

最好的办法是找到一种方法来查看生成的 SQL。您可能会立即发现错误，但如果没有，您可以在此处发布生成的 SQL，以便我们查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:32:43.023

在 you`mysql_real_escape_string`中，添加一些逻辑来复制单引号：

```
// Note: replaceAll doesn't work, you need to implement it
str = str.replaceAll("'","''"); 
```

一些`replaceAll`想法： [替换dom元素中的所有字符串](https://stackoverflow.com/questions/5678742/replace-all-strings-in-dom-element)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:23:25.523

您可能想要 console.log`result`数组值。我认为您有可能某些值包含使字符串 SQL 无效的单引号。`'accunedifined`在你的结果中寻找一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T10:23:30.377

`mysql_real_escape_string`将 PHP 代码复制到 JavaScript 后删除。

# air - 监视 AIR 中的文件和文件夹

> ID：13193199
> 
> 赞同：0
> 
> 时间：2012-11-02T10:11:50.243
> 
> 标签：air

我正在 AIR 中创建一个文件同步应用程序。我想创建一个处理程序，它可以观察指定文件夹位置的变化，比如 Dropbox 应用程序。每当添加、删除、修改、重命名任何文件或文件夹时，空中应用程序都应使用事件名称引发事件（添加、重命名文件/文件夹等）

请帮助有关使用 Aodbe AIR 的文件夹和文件观察程序的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:03:21.527

您可以使用 FileMonitor 类[（在此处找到它](http://www.mikechambers.com/blog/2009/03/11/monitoring-file-changes-in-adobe-air/)）来监视要监视更改的文件。一直将它用于一个旧项目，就像一个魅力:-)

# wpf - 如何在 WPF MMVM 设计中绑定 textbox.Text 属性

> ID：13193202
> 
> 赞同：0
> 
> 时间：2012-11-02T10:11:52.097
> 
> 标签：wpf, mvvm

所以我正在尝试学习 WPF 中的 MVVM 设计模式，我想做以下事情：

在外部类中，我有一个 ObservableCollection _students，它使用 MVVM 设计模式绑定到 WPF 窗口上的列表视图。列表视图仅显示学生的姓名和年龄。

```
public class Student
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Course { get; set; }
    public DateTime JoiningDate { get; set; }
}

public class ViewModel : INotifyPropertyChanged
{
    private ObservableCollection<Student> _students;

    protected void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged!=null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public ObservableCollection<Student> Students
    {
        get
        {
            return _students;
        }
        set
        {
            _students = value;
            NotifyPropertyChanged("Students");
        }
    } 
```

一切都很好，但我想放置一个 TextBox 并将其设置为显示列表视图的选定项目的课程属性。这意味着我必须

1.  获取列表视图的选定索引（确定）
2.  将 textbox.Text 属性绑定到 Students[那个索引].Course

我被困在2。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:25:40.400

假设您将列表视图绑定到如下类型的集合`SampleData`：

**样本数据.cs**

```
public class SampleData
{
    public int Id { get; set; }

    public string Text { get; set; }

    public decimal Value { get; set; }
} 
```

然后将 ListView ItemsSource 绑定到一个集合。将 ItemsSource 属性绑定到 ViewModel 上的属性或在代码隐藏中将其绑定（如下面的代码）都没有关系。

```
var source = new List<SampleData>();

source.Add(new SampleData() { Id = 1, Text = "AAA" });
source.Add(new SampleData() { Id = 2, Text = "BBB" });
source.Add(new SampleData() { Id = 3, Text = "CCC" });
source.Add(new SampleData() { Id = 4, Text = "DDD" });
source.Add(new SampleData() { Id = 5, Text = "EEE" }); 
```

您可以直接在 View 上将 TextBox 的 Text 属性绑定到 SelectedItem。

```
<StackPanel Orientation="Horizontal">
    <ListView x:Name="listView1" />

    <TextBox Text="{Binding ElementName=listView1, Path=SelectedItem.Text}" />
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:25:53.067

我会用另一种方式解决这个问题。

看看这个[帖子](https://stackoverflow.com/questions/13123231/how-to-select-combobox-values-in-selection-changed-event/13125393#13125393) 。

另一种方法是您的 ViewModel 包含绑定到 listView 的 SelectedItem 的学生属性（例如 SelectedStudent）。然后你可以处理这个

```
{Binding Path=SelectedStudent.Course} 
```

# ajax - 使用 node.js 处理 ajax 响应

> ID：13193205
> 
> 赞同：1
> 
> 时间：2012-11-02T10:11:58.487
> 
> 标签：ajax, node.js, asp.net-ajax, zombie.js

我正在尝试从指定的网站上抓取信息。该站点首先使用身份验证，因此使用zombie.js：

```
var Browser = require("zombie");
var browser = new Browser();
browser.visit("https://*****login.aspx", function(){
    browser.fill('#user', '*****');
    browser.fill('#pwd', '*****');
    var button = browser.querySelector('#btnSubmit');
    browser.fire('click', button, function(){
    //scraping main.aspx
    });
}); 
```

它正在工作，我可以刮掉 main.aspx：有一个`<table>`包含有关新消息的信息（发件人、日期、主题），问题就在这里：主题字段是可点击的，点击它会出现一个新窗口实际的消息。但是它是一个ajaxgrid，当我执行点击时：

```
var field = browser.querySelector('#VeryLongIdOfTheField');
browser.fire('click', field, function(){    
    console.log(browser.querySelector('#VeryLongIdOfTheFieldContainingTheMessage').innerHTML);
}); 
```

它返回一条错误消息，说 undefined 没有 innerHTML。我想是因为这个动作用一些 ajax 魔法处理。我是这个 js/nodejs/jquery/.. 世界的新手，需要一些帮助来启发我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:19:06.043

由于数据是使用异步 ajax 填充的，我猜您的点击与节点内的实际 DOM 填充之间存在延迟。在检查节点内的内容之前稍等片刻怎么样。

```
browser.fire('click', field, function(){
  setTimeout(function(){
    console.log(browser.querySelector('#VeryLongIdOfTheFieldContainingTheMessage').innerHTML);
  }, 3000)
}); 
```

如果花费的时间不是很可预测，您也可以在循环中运行它，直到找到内容或在合理的重试次数后退出。

# opencv - 在 OpenCV 中使用 cv::reduce 方法时不支持的格式或格式组合

> ID：13193207
> 
> 赞同：7
> 
> 时间：2012-11-02T10:12:04.583
> 
> 标签：opencv, types, mismatch

我正在使用 OpenCV 2.4.2，我试图`(tmpl(32x44), subj(32x44))`沿行和列对两个矩阵进行投影。我已经初始化了一个结果矩阵，`rowProjectionSubj(subj.rows,1,CV_8UC1)`然后我打电话`cv::reduce(subj,rowProjectionSubj,1,CV_REDUCE_SUM,-1);`

为什么这抱怨类型不匹配？我保持类型相同（通过保持`dtype=-1`.`cv::reduce`我通过扫描灰度图像得到`tmpl`和对象。`subj``cv::imread("image_path",0)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:30:49.930

我可能不对，但在我看到这个之后：

[http://answers.opencv.org/question/3698/cvreduce-gives-unsupported-format-exception/?answer=3701#post-id-3701](http://answers.opencv.org/question/3698/cvreduce-gives-unsupported-format-exception/?answer=3701#post-id-3701)

通过一个小实验并使用一个叫做“寄存器数学”的老朋友，我意识到当你添加两个 8 位数字时，你需要考虑一个 8+1+1 位寄存器来存储和，因为它可能有进位输出. 所以 reduce 的任何结果都应该比源有更大的空间，即如果源是 8 位无符号的，它应该至少是 16 位无符号或有符号的；如果要用于某些产品计算和其他东西，它也可能是 32 位的......

注意：目标类型必须在 cv::reduce 方法中明确说明。请关注我的 openCV 链接以获取更多信息。

# excel - 我可以在本地机器上使用 VBA 动态保存网页源 html

> ID：13193210
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:12:09.203
> 
> 标签：excel, vba

如何在本地机器中使用 VBA 动态保存网页源 html？

谢谢，奥雅纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:21:50.077

这是获取 html 文件并将其保存到临时文件夹以进行处理的简单方法。它需要对 Microsoft XML 3.0 或 Microsoft XML 6.0 的引用。

```
Sub GetHTTP()
Dim objHttp As Object
Dim CachedFilePath As String
    Set objHttp = CreateObject("MSXML2.ServerXMLHTTP")
    Call objHttp.Open("GET", "http://www.example.com/", False)
    Call objHttp.Send("")
    CachedFilePath = Environ("temp") & "\" & "ReplaceThisWithFilename" & ".html"
    Call CreateFile(CachedFilePath, objHttp.ResponseText)
End Sub

Function CreateFile(FileName As String, Contents As String) As String
' creates file from string contents
Dim tempFile As String
Dim nextFileNum As Long
  nextFileNum = FreeFile
  tempFile = FileName
  Open tempFile For Output As #nextFileNum
  Print #nextFileNum, Contents
  Close #nextFileNum
  CreateFile = tempFile
End Function 
```

要在完成后删除文件，请尝试：

```
Sub DeleteFile(ByVal FileToDelete As String)
    SetAttr FileToDelete, vbNormal
    Kill FileToDelete
End Sub 
```

# java - 使用 Objectify 只能在 GAE 数据存储中更新一次字段

> ID：13193211
> 
> 赞同：1
> 
> 时间：2012-11-02T10:12:10.630
> 
> 标签：java, gwt, google-cloud-datastore, requestfactory, objectify

我正在使用 Objectify 将 Diagram 类序列化为 GAE Datastore。我可以根据需要多次更新（序列化）所有字段，但整数 arrowTypeId 除外，它只更新一次，之后**始终保持相同的值**。如果我离开应用程序并再次运行它，我可以再次更新该值，但只能更新一次。

要更新 arroyTypeId，我正在调用 sendDatabaseUpdateDiagramArrows()。这就是发生的事情：

1.  我用值 1 调用 sendDatabaseUpdateDiagramArrows()
2.  我将该值设置为 DiagramProxy.setArrowTypeId()。
3.  作为测试，我将图表标题更改为 DiagramProxy.getArrowTypeId()
4.  我调用 save()
5.  在 DAO save() 上，**收到了错误的 ArrowTypeId 值（保留旧值）**，但**令人惊讶的是，标题具有从步骤 3 存储的正确 ArrowTypeId）**
6.  更改与此问题有关。不显示任何异常。

    *   请注意，我可以第一次更新 ArrowTypeId 值，从默认值 1 到 2。但下一次始终保持值 2。
    *   编辑：如果我将 arrowTypeId 更改为字符串，我也会遇到同样的问题。

**数据库实用程序.java**

```
public static DiagramProxy sendDatabaseUpdateDiagramArrows(DialectiveRequestFactory requestFactory, Integer value, DiagramProxy cellDiagramProxy)
{
    DiagramRequest diagramRequest = requestFactory.diagramRequest();
    DiagramProxy newDiagramProxy = diagramRequest.edit(cellDiagramProxy);
    Date date = new Date();

    newDiagramProxy.setArrowTypeId(value);
    newDiagramProxy.setTitle(Integer.toString(newDiagramProxy.getArrowTypeId()));
    diagramRequest.save(newDiagramProxy).fire();

    return cellDiagramProxy;
} 
```

**图.java**

```
@Entity
public class Diagram extends DatastoreObject{

@Indexed private String diagramId;
    private String title;
    private Integer arrowTypeId;

    public String get_id() {
        return diagramId;
    }
    public void set_id(String diagramId) {
        this.diagramId = diagramId;
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public Integer getArrowTypeId() {
        return arrowTypeId;
    }
    public void setArrowTypeId(Integer arrowTypeId) {
        this.arrowTypeId = arrowTypeId;
    }
} 
```

**DiagramProxy.java**

```
@ProxyFor(value = Diagram.class, locator = ObjectifyLocator.class)
public interface DiagramProxy extends EntityProxy{
    void set_id(String id);
    void setTitle(String title);
    void setArrowTypeId(Integer arrowTypeId);
    Integer getArrowTypeId();
    String get_id();
    String getTitle();
} 
```

**DiagramDao.java**

```
public class DiagramDao extends ObjectifyDao<Diagram>{

    public void save(Diagram diagram)
    {
        this.put(diagram);
    } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:44:23.643

让我猜猜:) 因为我没有使用 GAE 数据存储的经验。

没看懂，为什么要

```
@Indexed private String diagramId; 
```

但 getter 和 setter 具有非标准名称：

```
public String get_id() {
    return diagramId;
}
public void set_id(String diagramId) {
    this.diagramId = diagramId;
} 
```

我宁愿去：

```
@Indexed private String diagramId;
public String getDiagramId() {
        return diagramId;
    }
    public void setDiagramId(String diagramId) {
        this.diagramId = diagramId;
    } 
```

另一件事是`DiagramRequest`代码尚未发布，也许这有助于发现问题。

# c# - 使用 .DrawToBitmap - 如何更改图像的分辨率？

> ID：13193212
> 
> 赞同：4
> 
> 时间：2012-11-02T10:12:10.657
> 
> 标签：c#, .net, image

我`DrawToBitmap`用来将一些标签保存为图像。我想知道如何改变这些图像的分辨率，有没有办法？假设我有一个带有文本的标签，我想将其呈现为图像文件（不发布完整代码）：

```
this.label1 = new System.Windows.Forms.Label();
this.label1.AutoSize = true;
this.label1.Font = new System.Drawing.Font("Baskerville Old Face", 36F);
//...
this.label1.Size = new System.Drawing.Size(161, 54);
this.label1.Text = "Output";
//...

//save image:
Bitmap image = new Bitmap(161, 54);
this.label1.DrawToBitmap(image, this.label1.ClientRectangle);
image.Save(@"C:\image.jpg"); 
```

这工作正常，我会得到这样的东西：

![结果图像](../Images/a884f27ce14ff0fa9a695b9230861b9c.png)

分辨率没问题，但是可以增加吗？当我稍微放大这张图片时，我可以将单个像素视为大块：

![缩放的结果图像](../Images/1344a477ea3f82772e6fd235976382ce.png)

我知道这很正常，因为它不是矢量图形，这很好。我只是想以某种方式对其进行更改，以便您可以在将单个像素视为大块之前进一步放大。有任何想法吗？

谢谢你。

编辑：如果我只使用黑白图像 - 将图像保存为 png 或 gif 会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:34:26.227

像这样的东西可以完成这项工作，只需增加标签中使用的字体大小：

```
 Bitmap CreateBitmapImage(string text, Font textFont, SolidBrush textBrush)
    {
        Bitmap bitmap = new Bitmap(1, 1);
        Graphics graphics = Graphics.FromImage(bitmap);
        int intWidth = (int)graphics.MeasureString(text, textFont).Width;
        int intHeight = (int)graphics.MeasureString(text, textFont).Height;
        bitmap = new Bitmap(bitmap, new Size(intWidth, intHeight));
        graphics = Graphics.FromImage(bitmap);
        graphics.Clear(Color.White);
        graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
        graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
        graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        graphics.DrawString(text, textFont, textBrush,0,0);
        graphics.Flush();
        return (bitmap);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:47:47.687

您可以通过增加 System.Drawing.Font 的第二个参数的值来实现这一点。

```
this.label1.Font = new System.Drawing.Font("Baskerville Old Face", 1000F); 
```

# javascript - 谷歌自定义搜索确定何时加载脚本

> ID：13193213
> 
> 赞同：1
> 
> 时间：2012-11-02T10:12:18.307
> 
> 标签：javascript, jquery, google-custom-search

我以最简单的形式使用谷歌自定义搜索。我刚刚`<gcse:search></gcse:search>`在视图上添加了生成的脚本和标签。一切都按预期工作，但是我希望能够自己在文本框中设置搜索词，然后触发提交。我不知道如何确定何时加载下面的脚本。有没有办法修改脚本以便我可以使用 jQuery`then()`函数？

```
(function () {
        var cx = 'xxxxxxxxxxxxxxxxxx:xxxxxxxx';
        var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
    })() 
```

**更新**

好吧，最后我找到了某种解决方案，可能不是最优雅的解决方案，但它确实有效。这是代码：

```
<script type="text/javascript" src="https://www.google.se/jsapi"></script>

<script type="text/javascript">
    google.load("search", "1", { language: 'sv', style: google.loader.themes.MINIMALIST });
    google.setOnLoadCallback(function () {
        var ctrl = new google.search.CustomSearchControl('xxxxxxxxxxxxxxxxxx:xxxxxxxx');
        ctrl.draw('cse');

        // you can do stuff here, like trigger a search as shown  below !!        

        ctrl.execute('<%=Request.QueryString["text"] %>');
    }, true);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:38:18.427

我为此使用了一种解决方法。来自 google 的脚本正在创建一个带有 src 属性的 iframe，其中包含**&cx=**代码和要搜索的术语（**&q=**）：

[http://www.google.com/cse?cx=xxxxxxxxxxxxxx%3Ac8u_ywvcjnw&ie=UTF-8&q=term+to+search&sa=Search&](http://www.google.com/cse?cx=xxxxxxxxxxxxx%3Ac8u_ywvcjnw&ie=UTF-8&q=term+to+search&sa=Search&) ....

使用 jquery，您可以创建一个 iframe，并将属性**src**设置为上述链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:42:42.433

如果其他人想要以更简单的方式执行此操作 - 我只是使用 setInterval 来轮询它何时加载。搜索字段：

```
 <gcse:searchresults-only gname='ap_search'></gcse:searchresults-only> 
```

然后只需在其下添加一个脚本标签：

```
javascript:
  var int=setInterval(function() {
    if (typeof google != 'undefined' && google.search.cse) {
      google.search.cse.element.getElement('ap_search').execute("#{@term}")  
      clearInterval(int)
    }
  }, 200) 
```

# android - 获取包在Android中被替换的版本

> ID：13193214
> 
> 赞同：2
> 
> 时间：2012-11-02T10:12:21.157
> 
> 标签：android

我注册了一个广播接收器，以便在发送 PACKAGE_REPLACED 意图时收到通知。在onReceiver中我需要根据被替换的包的版本进行一些操作。有没有办法获取这些信息？我试过了：

```
Uri data = intent.getData();
final String intentPackageName = data.getEncodedSchemeSpecificPart();
pi = context.getPackageManager().getPackageInfo(intentPackageName , PackageManager.GET_META_DATA);
versionCode = pi.versionCode;
versionName = pi.versionName;
packageName = pi.packageName; 
```

它不起作用，因为版本已经被替换，我得到的是新版本而不是旧版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:41:53.270

刚刚检查了姜饼版本的来源。我想这是不可能检查的。不存储应用程序的先前版本。我不知道为什么。您可以向 Google 创建功能请求以添加此功能。

# c# - 301 重定向的 web.config 规则

> ID：13193215
> 
> 赞同：0
> 
> 时间：2012-11-02T10:12:28.367
> 
> 标签：c#, web-config

我的网站在 html 中，所有文件现在都放在 httpdocs 目录中，我的网址就像 .

```
http://Mysite.com/httpdocs/test.html and i need to show
http://Mysite.com/test.html 
```

在我的谷歌自定义搜索中。我在 web.config 中使用了 301 重定向，就像

```
<location path="httpdocs/test.html">
    <system.webServer>
      <httpRedirect enabled="true" destination="/test.html " exactDestination="true" childOnly="true" httpResponseStatus="Permanent" />
    </system.webServer>
</location> 
```

它适用于大约 750 个 url，但我有 1500 个 url，我认为这超出了 web.config 的限制，所以请让我知道一些最好的建议，或者如果我可以在一行中写一些规则，那就没问题了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:36:06.930

[如果您在 IIS 7.5 上托管您的应用程序并且可以安装URL 重写模块](http://www.iis.net/downloads/microsoft/url-rewrite)，则可以轻松完成此操作：

```
 <system.webServer>    
        <rewrite>
            <rule name="Stop" stopProcessing="true">
                <match url="^httpdocs/" />
                <action type="AbortRequest"/>
            </rule>
            <rule name="Rewrite">
                <match url=".*" />
                <action type="Rewrite" url="httpdocs/{R:0}" />
            </rule>
        </rewrite>    
    </system.webServer> 
```

# c# - 无法解析资源项 winform 资源文件

> ID：13193216
> 
> 赞同：0
> 
> 时间：2012-11-02T10:12:36.007
> 
> 标签：c#, winforms, localization, resources, multilingual

这是多语言的代码：

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Reflection;
using System.Resources;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace WindowsFormsMultiLanguage
{
    public partial class Form1 : Form
    {
        ResourceManager m_resourceManger;
        public Form1()
        {
            InitializeComponent();

            m_resourceManger = new ResourceManager("WindowsFormsMultiLanguage.Localization", Assembly.GetExecutingAssembly());
            // Init UICulture to CurrentCulture
            Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
            // Init Controls
            UpdateUIControls();
        }

        private void UpdateUIControls()
        {
            try
            {
                if (m_resourceManger != null)
                {

                    this.label1.Text = m_resourceManger.GetString("test1");
                    this.label2.Text = m_resourceManger.GetString("test2");
                }
            }
            catch (System.Exception e)
            {
                MessageBox.Show(e.Message);
            }
        }
        private void OnLanguageChange(object sender, EventArgs e)
        {
            RadioButton radioButton = sender as RadioButton;
            string culture = string.Empty;

            switch (radioButton.Text)
            {

                case "French - France (fr-FR)":
                    culture = "fr-FR";
                    break;

                case "U.S. English (en-US)":
                    culture = "en-US";
                    break;

            }

            // This is used for the language of the user interface
            Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(culture);

            Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(culture);
        }

    }

} 
```

我收到一条错误消息，此时无法解析资源项 test&, test2： `this.label1.Text = m_resourceManger.GetString("test1"); this.label2.Text = m_resourceManger.GetString("test2");`

我添加了 2 个资源文件 1 个用于英语，第二个用于法语，我不知道是什么错误..

![在此处输入图像描述][1] ![在此处输入图像描述][2]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:56:59.667

可能是资源`Localization`不在命名空间`Localization`中，因此构造函数的参数错误`"Localization.Localization"`。`ResourceManager`我只是在这里猜测，因为没有足够的信息来发现问题。

编辑：我下载了该项目，将其降级为我使用的 Visual Studio 2008（在 .sln 中将数字 11 更改为 10，在 .csproj 中的两个位置将 4.0 更改为 3.5），并删除了对组件 Microsoft.CSharp 的引用。该项目已构建并且我运行它并且没有错误。函数`UpdateUIControls`在开始时只调用一次，但在我更改语言时没有。`UpdateUIControls`我从末尾复制了两条主线，`OnLanguageChange`然后当我更改语言时，文本正在发生变化。

所以，我看不出有什么问题。问题出在其他地方。

# asp.net - 在我的 Azure Web 角色应用程序中获取 WebRole 模块以读取 web.config 设置

> ID：13193219
> 
> 赞同：0
> 
> 时间：2012-11-02T10:12:43.907
> 
> 标签：asp.net, azure, azure-web-roles

我了解我的 Web Role Web 应用程序项目中的 WebRole 模块在 WAIISHost.exe 中运行，而应用程序的其余部分在 W3WP.EXE 中运行。因此无法从 WebRole 应用程序域读取 web.config 设置。

这可以通过在 Web 项目文件中创建一个特殊的“waiishost.exe.config”并将“复制到输出目录”属性设置为“始终复制”来解决。

没关系。但是，现在，我在 ServiceConfiguration 和 web.config 和“waiishost.exe.config”中有配置设置。不过，这只是一个小而烦人的问题。最大的问题是，当我发布我的 Azure 项目时，ServiceConfiguration 和 web.config 会自动转换为生产值，而 waiishost.exe.config 不会转换，所以我最终将开发配置进入生产环境。**（生产环境尚未**上线，所以还不是主要问题）

任何人都可以想到我如何让发布过程转换 waiishost.exe.config 的任何想法吗？也许我可以运行某种启动过程，它可以在 waiishost.exe 启动*之前*简单地将 web.config 文件复制并重命名为waiishost.exe.config。

顺便说一句，我不能简单地将配置移动到 ServiceConfiguration 文件，因为我有整个配置部分和第三方组件使用的连接字符串，例如 ServiceBusConfiguration 部分。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:57:43.797

就在这里。

一点手册，但每个项目都是“一次性设置”。看看我之前写的[这篇](http://blogs.staykov.net/2011/10/servicereferenceclientconfig-build.html)和[那篇](http://blogs.staykov.net/2011/06/windows-azure-configuration-settings.html)博文（甚至在你拥有 ServiceConfiguration 文件之前）。这些博客文章将为您提供有关如何实现愿望的好主意。

# rspec - 在 OmniAuth 的集成测试中获取“nil:NilClass 的未定义方法 `env'”

> ID：13193221
> 
> 赞同：4
> 
> 时间：2012-11-02T10:13:10.467
> 
> 标签：rspec, omniauth

我开启了 Omniauth 测试模式：

**spec_helper（我把它放在文件的底部，就在前面`end`）：**

```
#Turn on "test mode" for OmniAuth 
OmniAuth.config.test_mode = true 
```

这是我的测试：

**规范/请求/authorization_pages_spec.rb：**

```
 describe "signin" do
    before { visit signin_path }
    .
    .
    .
    describe "with OmniAuth" do
      before do
        OmniAuth.config.add_mock :facebook, uid: "fb-12345", info: { name: "Bob Smith" }
        visit root_path
      end

      describe "Facebook provider" do
        before do
          request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook]
          click_link "Sign in with Facebook"
        end

        it { should have_selector('title', text: user.name) }

        it { should have_link('Users',    href: users_path) }
        it { should have_link('Profile',  href: user_path(user)) }
        it { should have_link('Settings', href: edit_user_path(user)) }
        it { should have_link('Sign out', href: signout_path) }

        it { should_not have_link('Sign in', href: signin_path) }
      end 
```

当我运行测试时，我得到了这个：

失败：

```
 1) Authentication signin with OmniAuth Facebook provider 
     Failure/Error: request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook]
     NoMethodError:
       undefined method `env' for nil:NilClass
     # ./spec/requests/authentication_pages_spec.rb:57:in `block (5 levels) in <top (required)>' 
```

（ETC）。

有什么遗漏还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T15:25:04.897

我认为你在这个例子中混合了两种不同的东西。您正在尝试编写集成规范，但`request`AFAIK 方法仅在控制器规范中可用（用于`spec/controllers`目录内的规范）。因此，您有`undefined method`nil:NilClass` 错误的 env'。

您可以在我的示例项目中找到健康的 OmniAuth 集成规范：[https ://github.com/lucassus/locomotive/blob/9cd7dfd365469fc70fc367f29705a56df9730f6f/spec/features/user_facebook_sign_in_spec.rb](https://github.com/lucassus/locomotive/blob/9cd7dfd365469fc70fc367f29705a56df9730f6f/spec/features/user_facebook_sign_in_spec.rb)

我希望它会帮助你。

# css - 定位 CSS 类的第二个实例

> ID：13193224
> 
> 赞同：28
> 
> 时间：2012-11-02T10:13:17.027
> 
> 标签：css, css-selectors

由于我使用的解决方案，我只有有限的 CSS 类。当有 2 个同名的类时，我想知道是否有一种方法可以针对第 2 个类。

我有 2 个包含在名为 item 的 DIV 中的媒体链接实例。我基本上需要为类的第二个实例添加额外的样式。然而，这就是困难所在......我不能在代码中添加任何额外的代码或类！我知道，这并不理想，但取决于所使用的解决方案，而不是个人选择。

示例代码：

```
<a href="#" class="media-link" style="display: block">
  <img src="images/ph-a.png" alt="" />
</a>
<a href="#" class="media-link">
  <img src="images/auth-2-100px.png" alt="" />
  <p class="author">Author: John Smith</p>
</a> 
```

提前感谢您的任何建议或解决方案。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-02T10:15:14.327

有两个伪选择器可以完成您正在寻找的内容。

```
.media-link:nth-child(2) {
  // here style 
} 
```

或者

```
.media-link:nth-of-type(2){
  // here style
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T10:15:52.267

你可以`nth-child pseudo classes`根据你的要求使用......

```
.media-link:nth-child(2) {
color:red;
} 
```

# c - CSV 文件读取问题：有大量数据

> ID：13193229
> 
> 赞同：0
> 
> 时间：2012-11-02T10:13:48.617
> 
> 标签：c, file, csv, file-handling

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* getfield(char* line, int num) {
    char* tok = line;
    char* result;
    if (line)
    {
        do
        {
            if (!--num)
            {
                tok = strchr(line, ',');
                if (tok == NULL)
                {
                    tok = &line[strlen(line)];
                }
                size_t fieldlen = tok - line;
                if (fieldlen)
                {
                    result = (char*)malloc(fieldlen+1);
                    result[fieldlen] = '\0';
                    strncpy(result, line, fieldlen);
                    return result;
                }
                else
                {
                    break;
                }
            }
            tok = strchr(line, ',');
            line = tok + 1;
        } while (tok);
    }
    result = (char*)malloc(2);
    strcpy(result, "0");
    return result;
}

int main()
{
    FILE* stream = fopen("data.csv", "r");
    char line[1024];
    char *pstr;int num1,num2,num3;
    char* value1,value2,value3;

    while (fgets(line, 1024, stream))
    {
        char* tmp = strdup(line);

        value1=getfield(tmp, 1);
        value2=getfield(tmp, 2);
        value3=getfield(tmp, 3);

        num1 =strtol(value1,&pstr,10);
        num2 =strtol(value2,&pstr,10);
        num3 =strtol(value3,&pstr,10)
        free(value1); 
        free(value2); 
        free(value3);
        printf("Fields 1,2,3 would be 1=%d 2=%d 3=%d\n", num1,num2,num3);
        // NOTE strtok clobbers tmp
        free(tmp);
    }
} 
```

以上是我读取文件的C代码....

```
 :::: data.csv ::::
    10,34,30
    10,33,
    23,45,23
    25,,45 
```

以上是我的文件..

这里我的问题是我可以用“num”字段调用函数。因此，为了阅读每一行，我想调用该函数 3 次.. !! 所以大型数据文件的性能太低了..有人可以帮助我，我可以立即调用该函数，它会返回一个数组..而不是我可以轻松存储和打印（例如，对于第一行数组 [0] =10,数组[1]=34,数组[2]=30)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:21:21.610

`split`您可以通过创建一个会破坏您的快速函数来加速它`line` （更不用说许多潜伏的分段错误和内存泄漏；此代码没有错误检查或`free`资源ing）：

```
#include <stdio.h>
#include <stdlib.h>

char **split(char *line, char sep, int fields) {
  char **r = (char **)malloc(fields * sizeof(char*));

  int lptr = 0, fptr = 0;
  r[fptr++] = line;

  while (line[lptr]) {
    if (line[lptr] == sep) {
      line[lptr] = '\0';
      r[fptr] = &(line[lptr+1]);
      fptr++;
    }

    lptr++;
  }

  return r;
}

int main(int argc, char **argv) {
  char line[] = "some,info,in a line";

  char **fields = split(line, ',', 3);

  printf("0:%s 1:%s 2:%s\n", fields[0], fields[1], fields[2]);
} 
```

结果：

```
0:some 1:info 2:in a line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:34:56.523

我还没有对你的代码进行计时测试，但我敢打赌，问题出在使用 malloc() 上。那是慢。

Bart 的意思是一个 char[] 数组可以包含多个字符串，背靠背。如果您将数组作为单个字符串扫描一次，将所有 ',' 字符更改为 '\0'，您的最后一行将如下所示：

```
{ '2', '5', 0, 0, '4', '5', 0, ? rest of buffer }
   ^           ^   ^        ! 
```

下面的 ^ 插入符号标记了您将记录指向三个字符串的指针的位置。如您所见，它们等效于单独数组中的单独字符串“25”、“”、“45”。这 ！下面标记结束原始字符串的 0。除此之外没有任何意义。

所有这一切都取决于能够就地修改原始字符串，这可能会使它无法用于任何进一步的处理（例如，如果检测到无效字段，则打印出违规行）。但是，您已经在复制原始缓冲区以供本地使用，所以这应该不是问题。顺便说一句，我也会摆脱那个复制缓冲区的 malloc。

代码可能如下所示：

```
while (fgets(line, 1024, stream))
{
    char tmp[sizeof line]; /* this will save a malloc()/free() pair */
    char *tok, *fence, *pstr;
    char ch, *cp1=line, *cp2=tmp;

    while (0 != (ch = *cp1++))
        *cp2++ = (ch == ',') ? 0 : ch;

    fence = cp2; /* remember end of string */
    *fence = 0;  /* and terminate final string */
    tok = tmp;   /* point to first token */

    num1 =strtol(tok, &pstr, 10);
    if (tok < fence) tok += strlen(tok) + 1;

    num2 =strtol(tok,&pstr,10);
    if (tok < fence) tok += strlen(tok) + 1;

    num3 =strtol(tok,&pstr,10);

    printf("Fields 1,2,3 would be 1=%d 2=%d 3=%d\n", num1,num2,num3);
} 
```

显然你不需要一个 1K 的缓冲区来处理三个值，所以会有一个循环来提取这些值。前两个 strtol() 调用之后的 if 语句是您对 getfield() 的替代，它不再需要。

完成此操作后，查看数据验证。此（或原始）中的任何内容都不会检测到无效数字。

# javascript - 由于全局范围变量导致的 javascript 错误

> ID：13193232
> 
> 赞同：3
> 
> 时间：2012-11-02T10:13:58.900
> 
> 标签：javascript

```
var x = 3;
(function (){
  console.log('before', x);
  var x = 7;
  console.log('after', x);
  return ;
})(); 
```

在上面的代码中，var X 被全局初始化。因此，在函数内部，第一个 console.log 应该打印“3 之前”，但我不明白。原因是我试图重新声明全局变量。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T10:15:07.970

> 在上面的代码中，var X 被全局初始化。所以在函数内部，第一个 console.log 应该打印“before 3”。

不，它应该 print `before undefined`，因为`var`无论您在哪里编写它，它都会从函数的开头生效。

您的代码与此**完全相同**：

```
var x = 3;
(function (){
 var x;

 console.log('before', x);
 x = 7;
 console.log('after', x);
 return ;
})(); 
```

当然，变量以 value 开头`undefined`。

详情：[*差错误会`var`*](http://blog.niftysnippets.org/2008/03/poor-misunderstood-var.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T10:16:37.043

JavaScript 解析器在解析代码时会执行[变量提升。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var#var_hoisting)这意味着任何变量声明都将移至当前范围的顶部，因此在您的情况下，将执行以下代码：

```
var x = 3;
(function (){
  var x;
  console.log('before', x);
  x = 7;
  console.log('after', x);
  return ;
})(); 
```

所以你的局部变量`x`首先被声明为初始值为`undefined`.

这应该解释为什么你会得到一个“beforeundefined”作为第一个`console.log()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:16:02.813

变量的作用域比其他语言简单得多。它不是从声明开始，而是：

*   你有声明的函数
*   如果声明不在函数中，则为全局范围

[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)：

> 用 var 声明的变量的范围是封闭函数，或者对于在函数外部声明的变量，全局范围（绑定到全局对象）。

您可以想象所有变量声明都移到了作用域（函数）的开头。所以这就像

```
var x = 3;
(function (){
  var x;
  console.log('before', x); // now undefined
  x = 7;
  console.log('after', x); // now 7
  return ;
})(); 
```

请注意了解确切的范围（函数，而不是块）：

```
var x = 3;
(function (){
  console.log('before', x); // this is undefined !
  if (true) {
      var x = 7;
  }
  return ;
})(); 
```

# c++ - 检查 STL 排序向量中上界的返回值

> ID：13193236
> 
> 赞同：2
> 
> 时间：2012-11-02T10:14:10.987
> 
> 标签：c++, stl

我有以下程序

```
int main()
{
    int myints[] = {1, 2, 3, 3, 4, 6, 7};
    vector<int> v(myints,myints+7);
    vector<int>::iterator low,up;

    sort (v.begin(), v.end());

    low=lower_bound (v.begin(), v.end(), 5);          ^
    up= upper_bound (v.begin(), v.end(), 20);                   ^

    cout << "lower_bound at position " << int(low- v.begin()) << endl;
    cout << "upper_bound at position " << int(up - v.begin()) << endl;

    return 0;
} 
```

我在上面有以下输出

> 位置 5 的下界 位置 7 的上界 按任意键继续。. .

我的问题是如何在上述情况下检查上限返回值没有大于 20 的值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:24:55.877

您只需要检查上界的迭代器是否等于 v.end()：

```
if (up == v.end())
    // there is no value greater than your upper bound 
```

有关上界的更多信息，请参阅：[http ://www.cplusplus.com/reference/algorithm/upper_bound/](http://www.cplusplus.com/reference/algorithm/upper_bound/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:24:05.773

```
auto up = upper_bound(v.begin(), v.end(), 20);

cout<<*up<<endl; //dereference iterator and you will get a value 
```

要检查迭代器是否有效，将其与 end() 迭代器进行比较：

```
if (up == v.end()) {
    //no upper bound
} 
```

# javascript - 如何计算在 Node Js 中打开特定 url 的唯一非授权用户有多少？

> ID：13193241
> 
> 赞同：2
> 
> 时间：2012-11-02T10:14:23.640
> 
> 标签：javascript, node.js, mongodb, mongoose, express

我正在使用 ExpressJs 和 MongoDB。我想显示有多少未经授权的唯一用户打开了特定的事件页面。
我应该如何实现这个请求计数器？
检查IP地址或在cookie中添加一些标记...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:29:42.993

您可以使用[cookie](http://www.senchalabs.org/connect/cookieParser.html)并执行以下操作：

```
app.use(express.cookieParser());
app.use(function(req, res, next) {
  req.cookies['track_id'] ||= require('connect').utils.uid(32);
  next();
}); 
```

现在您可以在每个站点上推送 cookie 的 id：

```
app.use(function(req, res, next) {
  if(!req.isAuthenticated()){
    statistics.findAndModify(
      {_id: req.url},
      {},
      {$addToSet: {ids: req.cookies['track_id']}},
      {upsert:true}
    );
  }
  next();
}); 
```

然后你可以在你的 mongodb 数据库中查询。如果您对该`ids`字段进行了索引，您可以查询一个 id 并查看他们访问了哪些 url。访问者的数量是数组的长度。

如果您替换`$addToSet`为`$push`您，还将在网站上跟踪人员两次。

当然，当人们删除他们的 cookie 时，这一切都会崩溃 ^^

请注意，这是未经测试的，我只是边写边写。我还假设您使用的是 plain `node-mongodb-native`， DB 查询可能因您而异。Redis 也是一个很好的解决方案。

# android - 在上下文操作栏中全选？

> ID：13193243
> 
> 赞同：0
> 
> 时间：2012-11-02T10:14:31.650
> 
> 标签：android, select, android-actionbar

android 4.0 的上下文操作栏似乎没有内置的全选功能。更烦人的是，它似乎无法访问或设置它管理的视图的“已检查”属性。

有没有办法将它认为的所有视图设置为“已检查”或内置的“全选”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:10:09.197

> android 4.0 的上下文操作栏似乎没有内置全选

这是因为上下文操作栏不依赖于单一的选择概念。

> 更烦人的是，它似乎无法访问或设置它管理的视图的“已检查”属性。

为什么会呢？上没有“已检查”属性`EditText`。然而，上下文操作栏用于对选定文本的上下文操作。

> 有没有办法将它认为的所有视图设置为“已检查”或内置的“全选”？

欢迎您在任何包含要选择的东西的小部件上这样做。例如， an 上的`EditText`“全选”与 a 中的“全选”有很大不同`ListView`。由于 对`ActionMode`触发 的原因一无所知`ActionMode`，因此您必须自己处理。

# image - Matlab中如何制作高斯滤波器

> ID：13193248
> 
> 赞同：7
> 
> 时间：2012-11-02T10:14:59.757
> 
> 标签：image, matlab, gaussian

我试图在 Matlab 中制作高斯滤波器而不使用`imfilter()`and `fspecial()`。我已经尝试过了，但结果与我使用 imfilter 和 fspecial 的结果不同。

这是我的代码。

```
function Gaussian_filtered = Gauss(image_x, sigma)

% for single axis
% http://en.wikipedia.org/wiki/Gaussian_filter
Gaussian_filtered = exp(-image_x^2/(2*sigma^2)) / (sigma*sqrt(2*pi)); 
end 
```

对于二维高斯，

```
function h =  Gaussian2D(hsize, sigma)

n1 = hsize;
n2 = hsize;

for i = 1 : n2 
        for j = 1 : n1
        % size is 10;
        % -5<center<5 area is covered.
        c = [j-(n1+1)/2 i-(n2+1)/2]';                
        % A product of both axes is 2D Gaussian filtering
        h(i,j) = Gauss(c(1), sigma)*Gauss(c(2), sigma);        
        end
    end
end 
```

最后一个是

```
function Filtered = GaussianFilter(ImageData, hsize, sigma)

%Get the result of Gaussian
filter_ = Gaussian2D(hsize, sigma);

%check image
[r, c] = size(ImageData);
Filtered = zeros(r, c);    

for i=1:r
    for j=1:c
        for k=1:hsize
            for m=1:hsize
                    Filtered =  Filtered + ImageData(i,j).*filter_(k,m);    
            end
        end
    end
end
end 
```

但处理后的图像与输入图像几乎相同。我想知道最后一个功能`GaussianFiltered()`有问题......

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-03T02:53:22.730

这是另一种选择：

创建二维高斯：

```
 function f=gaussian2d(N,sigma)
  % N is grid size, sigma speaks for itself
 [x y]=meshgrid(round(-N/2):round(N/2), round(-N/2):round(N/2));
 f=exp(-x.^2/(2*sigma^2)-y.^2/(2*sigma^2));
 f=f./sum(f(:)); 
```

过滤后的图像，给定您的图像称为`Im`：

```
 filtered_signal=conv2(Im,gaussian2d(N,sig),'same'); 
```

这里有一些情节：

```
imagesc(gaussian2d(7,2.5)) 
```

![在此处输入图像描述](../Images/74b012b6d66357e439b3a0d1ca35480c.png)

```
 Im=rand(100);subplot(1,2,1);imagesc(Im)
 subplot(1,2,2);imagesc(conv2(Im,gaussian2d(7,2.5),'same')); 
```

![在此处输入图像描述](../Images/6abb529698f04b96ea81c9c1b3610c7a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T12:34:30.003

由于 for 循环，此示例代码很慢。在 matlab 中，您可以更好地使用 conv2，如 user:bla 所建议的那样，或者只使用 filter2。

```
I = imread('peppers.png'); %load example data
I = I(:,:,1);
N=5; %must be odd
sigma=1;
figure(1);imagesc(I);colormap gray
x=1:N;
X=exp(-(x-((N+1)/2)).^2/(2*sigma^2));
h=X'*X;
h=h./sum(h(:));
%I=filter2(h,I); %this is faster
[is,js]=size(I);
Ib = NaN(is+N-1,js+N-1); %add borders
b=(N-1)/2 +1;
Ib(b:b+is-1,b:b+js-1)=I;
I=zeros(size(I));
for i = 1:is
    for j = 1:js
        I(i,j)=sum(sum(Ib(i:i+N-1,j:j+N-1).*h,'omitnan'));
    end
end
figure(2);imagesc(I);colormap gray 
```

# macos - 如何在 COCOA 中重新绑定 nstableview

> ID：13193253
> 
> 赞同：0
> 
> 时间：2012-11-02T10:15:13.423
> 
> 标签：macos, cocoa, bind, nstableview, nsarraycontroller

我有一个用于 NSTableView 的 NSTableView 和一个 NSArrayController。

表中只有一列，“名称”

首先，用户打开一个文件，在arrayController中将是@[@{@"name":@"1"},@{@"name":@"2"}]

一段时间后，用户打开了另一个文件，现在数组控制器的内容应该是@[@{@"name":@"x"},@{@"name":@"y"},@{@"name ":@"z"}]。

如何将新数据绑定到 NSTableView，（不添加）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:41:14.433

如果绑定设置正确，则无需执行任何操作。数组控制器的内容数组应该绑定到一个数组（您在帖子中显示的那个），因此当您更改或添加到该数组时，数组控制器的排列对象将自动更改 - 这不需要任何“重新绑定”。

# css - MVC3 Site.css 覆盖我的自定义样式

> ID：13193267
> 
> 赞同：1
> 
> 时间：2012-11-02T10:16:43.530
> 
> 标签：css, asp.net-mvc-3, razor

我有这个由 MVC3 Razor Engine 生成的 HTML：

```
<div class="editor-field">
    <div id="autoComplete">
        @Html.EditorFor(model => Model.group_name, new { ID = "group_name" })
        @Html.ValidationMessageFor(model => Model.group_name)
    </div>
</div> 
```

我正在为我的自动完成功能编写自定义 CSS：

```
#group_name input[type='text'], input[type='password']
{
    padding: 0px;
    border: 1px solid black;
    background-color: white;
    overflow: hidden;
    z-index: 99999;
}
#group_name input[type='text'], input[type='password'] ul
{
    width: 100%;
    list-style-position: outside;
    list-style: none;
    padding: 0;
    margin: 0;
}
#group_name input[type='text'], input[type='password'] li
{
    margin: 0px;
    padding: 2px 5px;
    cursor: default;
    display: block; /*  if width will be 100% horizontal scrollbar will apear     when scroll mode will be used */ /*width: 100%;*/
    font: menu;
    font-size: 12px; /*     it is very important, if line-height not setted or setted   in relative units scroll will be broken in firefox  */
    line-height: 16px;
    overflow: hidden;
} 
```

但它被 site.css 覆盖，默认情况下，MVC 3 解决方案是这样的：

```
input[type="text"], input[type="password"]
{
    border: 1px solid #ccc;
    padding: 2px;
    font-size: 1.2em;
    color: #444;
    width: 200px;
} 
```

有谁知道我必须写什么CSS来定位我的div并输入html？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:20:05.433

这是因为[CSS Specificity](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。

您需要使您的规则更具体以覆盖 site.css 样式。

或者，只需在文件本身中覆盖您的 site.css 样式。Site.css 不像不应该被覆盖的样式库。它只是一个您可以编辑/删除的开始模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:22:40.340

我最终使用 firebug 来查看 HTML 的变化。IE 有自己的 javascript 调试选项，但能够实时查看 li 渲染并查看其标签帮助我编写了我的 css。

# html - HTML 文本变长并创建水平滚动条

> ID：13193269
> 
> 赞同：1
> 
> 时间：2012-11-02T10:16:49.920
> 
> 标签：html

我必须在`div`HTML 页面的标记中动态添加文本值。但是如果这个文本太长，那么它不会保持`div`我指定为的宽度`500px`，而是在一行中直线长，这使得网页具有水平滚动。我应该怎么做才能修复这段文字的长度。我不介意它是否增加数量或行数。

这是CSS：

```
.question
{
    width: 500px;
    height: auto;
    float: left;
    overflow: auto;

}
.answer
{
    width: auto;
    height: auto;
    float:left;
    overflow: auto;

}
#main
{
    width: 1000px;
    height: auto;
    overflow: auto;

} 
```

这是JS代码：

```
function create_div_dynamic(answer){

     var dynDiv = document.createElement("div");
     dynDiv.id = "divDyna"+counter;

     var question_data = question();
     var answer_data= answer();
     dynDiv.innerHTML="<div id='main'  ><div class='question'> "+question_data+" </div> <div class='answer'> "+answer_data+"</div> </div>"
     dynDiv.style.height = "auto";
     dynDiv.style.width = "auto";     
     dynDiv.style.backgroundColor = 'gray';
     document.body.appendChild(dynDiv);
     counter=counter+1;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:22:54.887

您可以在 css 中使用规则自动换行：

IE：

```
word-wrap:break-word; 
```

虽然这是 CSS3，可能并非所有浏览器都支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:24:48.583

你只需要使用 style="width:20px;" 这会将您的 div 大小调整为 20px。如果不存在空格，则 div 将自动调整为最大作品的长度。如果您想隐藏（使 div 完全符合您需要的大小）长于您的潜水大小的单词，您可以使用`width:20px;overflow:hidden;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:28:25.880

在您的 div 中添加此样式。

`<div style="width=500px; display: inline-block; text-align: justify;"> text </div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:16:54.423

您需要分析文本的内容以及所应用的样式表，以了解是什么阻止了正常的自动换行，并消除原因或处理后果。

# android - phonegap 媒体错误代码 0

> ID：13193271
> 
> 赞同：4
> 
> 时间：2012-11-02T10:16:57.587
> 
> 标签：android, cordova

当我第一次使用 phonegap 媒体播放 mp3 文件时，它工作正常。但是当我停止并再次播放第二次它没有和第三次当我播放它时显示错误代码 0

下面是代码

```
 var my_media = null;
            var mediaTimer = null;
            var pausePos = 0;
            var counter=0;
            var playing=false;

          function playAudio(src) {
         // Create Media object from src
             if(my_media==null){
               my_media = new Media(src, onSuccess, onError);
            }

 if(!playing){
// get audio duration
var duration =  my_media.getDuration();

// set slider data
if( duration > 0 ){
    $('#slider').attr( 'max', Math.round(duration) );
    $('#slider').slider('refresh');
}

 // Play audio
my_media.play();
playing=true;
$("#play_pause_img").attr("src","img/pause.png")

// Update my_media position every second
if (mediaTimer == null) {
    mediaTimer = setInterval(function() {
        // get my_media position
        my_media.getCurrentPosition(
            // success callback
            function(position) {
                if (position > -1) {
                    setAudioPosition(position);
                }
            },
            // error callback
            function(e) {
                console.log("Error getting pos=" + e);
                setAudioPosition("Error: " + e);
            }
        );
    }, 1000);
}
}
else{
     pauseAudio();
     playing=false;
     $("#play_pause_img").attr("src","img/play.png");
}

}

     function pauseAudio() {
         if (my_media) {
             my_media.pause();
         }
         }

         function resumeAudio()
           {
             my_media.play();
           }

        function stopAudio() {
             if (my_media) {
               my_media.stop();
                my_media.release();
              playing=false;
              $("#play_pause_img").attr("src","img/play.png");
               }
              clearInterval(mediaTimer);
              mediaTimer = null;
              pausePos = 0;
              $('#slider').val(pausePos);
              $('#slider').slider('refresh');
              }

       function onSuccess() {
            console.log("playAudio():Audio Success");
         }

         function onError(error) {
                alert('code: '    + error.code    + '\n' +
                'message: ' + error.message + '\n');
             } 
```

可能是什么原因，错误代码 0 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-04T13:59:16.153

它与有限的音频资源有关，因此必须释放。那里对此进行了解释：http: [//docs.phonegap.com/en/3.3.0/cordova_media_media.md.html](http://docs.phonegap.com/en/3.3.0/cordova_media_media.md.html)

就我而言，当时它确实为我的媒体对象调用了 release()，我不再使用它了——我在调用 stop() 后直接调用

```
 this.stopAudio = function() {
    if (my_media) {
        my_media.stop();
        my_media.release();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-19T14:51:17.257

在`3.5.0`我遇到错误函数触发时，错误代码为`0`.

从较早的文档中，`0`似乎意味着`none`，并且似乎没有问题的迹象。

在这种情况下，我似乎可以忽略这一点，并不是真正的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T09:08:38.293

我也有同样的问题。我正在寻找解决方案，但我没有找到任何东西。

我的代码：

```
$('#button').click(function{
   media = new Media('/android_asset/www/sonidos/trans/sound.m4a', play, error);                    
});
function play(){
    media.play();
}
function error(err){
    alert(err.code);
} 
```

如果我这样做，声音不会播放，我总是收到 0 的警报。这与 mediaError 中的任何错误代码都不匹配。

测试和测试我使代码适用于下一个代码：

```
 $('#button').click(function{
       media = new Media('/android_asset/www/sonidos/trans/sound.m4a', play, error);
       media.play();                    
    });
    function play(){
        ;
    }
    function error(err){
        ;
    } 
```

我知道这不是正确的方法，但我找不到其他解决方案。

PD对不起我的英语不好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-18T00:03:25.010

除了你创建的 stop 方法之外，在 onSuccess 方法中添加 release 方法。

```
function onSuccess() {
 my_media.release();
 console.log("playAudio():Audio Success");
} 
```

# android - Android - 如何通过查看 Tortoise SVN 目录来构建项目？

> ID：13193272
> 
> 赞同：0
> 
> 时间：2012-11-02T10:17:01.033
> 
> 标签：android, svn, shell, repository

我正在研究`android`具有共同`src`和`res`- ( `layout`and `values`) 内容的应用程序，并且`drawable`内容因应用程序而异。

我已将完整的应用程序内容存储为`SVN`存储库中的 3 个目录。

**1.*应用通用内容***

-> `src`->(所有 Java 代码 - `Class1.java`, `Class2.java`, ....)

-> `res`->( `values`, `anim`)

**2.*应用1***

-> `src`（`AppClass1.java`访问`Class1.java`应用*程序通用内容*的`src`）

-> `res`-> ( `drawable`, `drawable-hdpi`, `drawable-ldpi`, `drawable-mdpi`, `raw`)

->`AndroidManifest.xml`

**3.*应用2***

-> `src`（`AppClass2.java`访问`Class1.java`应用*程序通用内容*的`src`）

-> `res`-> ( `drawable`, `drawable-hdpi`, `drawable-ldpi`, `drawable-mdpi`, `raw`)

->`AndroidManifest.xml`

所以，如果我想`apk`为 Application1 生成文件，我必须执行以下操作：

1.  `SVN`首先检查应用程序公共代码。
2.  然后，Application1 内容并构建应用程序以生成`apk`文件。

我可以使用任何脚本执行上述两个步骤吗？脚本应该这样，如果我给出 SVN 目录路径和所需位置，脚本必须自动从不同`SVN`目录获取应用程序内容并在所需位置形成项目结构。以前有人这样做过吗？

请提供您的想法/链接来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:37:01.363

*   如果您在应用程序项目之间**共享文件**- 您可以在一个公共存储库中使用文件外部和链接对象
*   如果您在应用程序项目之间**共享**整个**目录** - 您可以在不同的 repos 中使用目录外部和链接对象
*   如果您不共享任何内容并且应用程序项目是 repo1 URL+repo2 URL + ... + repoN URL 的组合数据，您必须在构建器工具中看到，这些工具使用规范执行构建项目所需的任何操作（“The Right Thing for正确的任务”会比膝盖上的眩光更好）：“一切都在我们之前考虑过”，但是您*可以尝试*使用所有 svn export|svn cat/mkdir/mv 操作编写 bat 文件（PowerShell 等）

# java - -Dauto 是什么意思

> ID：13193273
> 
> 赞同：0
> 
> 时间：2012-11-02T10:17:03.330
> 
> 标签：java, selenium

我看到了启动 Selenium 的休闲命令：

```
java -Xmx256m -Dauto=1 -jar selenium-server-standalone-2.25.0.jar -log /home/test/selenium.log -trustAllSSLCertificates 
```

我用谷歌搜索是什么`-Dauto=1`意思，但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:36:42.803

我很确定`auto`当前版本的 Selenium 服务器中没有有效参数。它可能是过去的，或者只是被某些自定义实现使用。

```
java -jar selenium-server-standalone-2.25.0.jar -h 
```

将列出 Selenium 的所有可用参数，您可以通过添加来设置

```
-D<variable>=<value> 
```

到您的启动命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:24:44.340

-D 是一个重要的开关，允许您设置环境属性。

-D属性=值

设置系统属性值。如果 value 是包含空格的字符串，则必须将字符串括在双引号中：

```
java -D<propertyName>=<propertyValue> 
```

您可以从代码中的任何位置调用以下内容来阅读它。

```
String value = System.getProperty("propertyName");

 or

String value = System.getProperty("propertyName", "defaultValue"); 
```

# mongodb - MongoDB：将平均速度存储为字段或随时随地计算

> ID：13193275
> 
> 赞同：0
> 
> 时间：2012-11-02T10:17:13.367
> 
> 标签：mongodb, gps, acid

我正在开发一个使用 MongoDB 以文档格式存储用户记录的 Android 应用程序。我将有几条记录，其中包含有关 GPS 轨迹的信息，例如开始经度和纬度、结束经度和纬度、总时间、最高速度和总距离。

我的问题是关于平均速度。我应该让我的应用程序计算平均速度并将其作为一个字段存储在文档中，还是应该只通过获取时间和距离来计算？

我将有数千条记录，应该根据平均速度进行排序，最合理的似乎也将平均速度存储在文档中。然而，这打破了传统的 SQL Acid 思维，即在数据库之外计算速度。

记录集合的当前文档结构是这样的：

```
DocumentID (record)
DocumentID (user)
Start lnlt
Finish lnlt
Start time/date/gmt
End time/date/gmt
Total distance
Total time
Top speed
KMZ File 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:17:08.153

> 我的问题是关于平均速度。我应该让我的应用程序计算平均速度并将其作为一个字段存储在文档中，还是应该只通过获取时间和距离来计算？

正如@Panegea 所说，MongoDB 不依赖于 ACID 属性。它依赖于您的应用程序能够控制其自身的分布式特性，但是据说计算数据库外部的平均速度并没有那么糟糕，并且`$set`在不使用完整的 ACID 查询时，使用类似的原子运算符将停止奇怪。

您和@Panegea 谈论的是一种将您需要的值预聚合到文档上预定义字段的形式。到目前为止，这不仅是 MongoDB 中的推荐方法，而且在 SQL（如 facebook 墙上帖子上的总份额）中都是推荐的方法，在这种方法中，查询计算字段的聚合对于服务器来说会很烦人并且非常困难，或者只是不明智。

### 编辑

您可以使用聚合框架来实现这一点：[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)也可能想看看那里，但预聚合是迄今为止最快的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:29:52.723

一旦您选择使用面向文档的数据库（例如 Mongo），就不应谈论 ACID 属性。现在，您已经自己回答了这个问题：

“最**合理**的似乎也将平均速度存储在文档中。”

我们程序员倾向于忽略**合理**或简单的方法。每当我们找到的解决方案看起来很明显或常识时，我们总是试图质疑自己；-)。

无论如何，我的建议是将其存储为您希望由 DB 而不是应用程序执行的排序。这意味着，如果任何影响平均速度的变量在初始存储后发生变化，那么您也应该记住更新结果字段。

# python - 了解python线程错误

> ID：13193278
> 
> 赞同：15
> 
> 时间：2012-11-02T10:17:24.210
> 
> 标签：python, python-multithreading

阅读[http://bugs.python.org/msg160297](http://bugs.python.org/msg160297)，我可以看到 Stephen White 编写的一个简单脚本，它演示了 python 线程如何解决这个异常的错误

```
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' 
```

鉴于 Stephen White 的源代码 (http://bugs.python.org/file25511/bad-thread.py)，

```
import os
import thread
import threading
import time

def t():
    threading.currentThread() # Populate threading._active with a DummyThread
    time.sleep(3)

thread.start_new_thread(t, ())

time.sleep(1)

pid = os.fork()
if pid == 0:
    os._exit(0)

os.waitpid(pid, 0) 
```

我们将如何重写它以解决此错误？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-02T10:37:36.720

[发生该错误](http://bugs.python.org/issue14308)的原因是在调用外部线程`threading`时由 API创建的虚拟线程对象与在调用.`threading.currentThread()``threading._after_fork``os.fork()`

要在不修改 Python 源代码的情况下解决该错误，请`threading._DummyThread`使用以下无操作实现的猴子补丁`__stop`：

```
import threading
threading._DummyThread._Thread__stop = lambda x: 42 
```

[最好在Richard Oudkerk](http://bugs.python.org/issue14308#msg155887)和[cooyeah](http://bugs.python.org/issue14308#msg158697)的评论中缩小错误的原因。会发生以下情况：

1.  该`threading`模块允许`threading.currentThread()`从不是由`threading`API 调用创建的线程调用。然后它返回一个“虚拟线程”实例，该实例支持非常有限的`Thread`API 子集，但对于识别当前线程仍然有用。

2.  `threading._DummyThread`被实现为 的子类`Thread`。`Thread`实例通常包含一个内部可调用 ( `self.__block`)，它保持对分配给实例的操作系统级锁的引用。`Thread`由于可能最终使用的公共方法`self.__block`都被 覆盖`_DummyThread`，`_DummyThread`因此的构造函数有意通过删除来释放操作系统级别的锁`self.__block`。

3.  `threading._after_fork`打破封装并`Thread.__stop`在所有注册线程上调用私有方法，包括虚拟线程，这些线程`__stop`从未打算被调用。（它们不是由 Python 启动的，因此它们的停止也不是由 Python 管理的。）由于虚拟线程不知道`__stop`，它们从 继承它`Thread`，并且该实现愉快地访问实例`__block`中不存在的私有属性`_DummyThread`. 这种访问最终导致错误。

[在 2.7 分支中通过修改`Thread.__stop`](http://hg.python.org/cpython/rev/ab9d6c4907e7)`__block`删除时[不中断](http://hg.python.org/cpython/rev/ab9d6c4907e7)修复了该错误。3.x 分支，`__stop`拼写为 as`_stop`并因此受到保护，通过[覆盖`_DummyThread`'s `_stop`to do nothing 来](http://hg.python.org/cpython/rev/41c64c700e1e)修复它。

# hadoop - Hadoop namenode 是否使用长寿命套接字连接？

> ID：13193280
> 
> 赞同：0
> 
> 时间：2012-11-02T10:17:26.987
> 
> 标签：hadoop

使用hadoop时，`set dfs.namenode.handler.count = 8000,`

1.  这个设置可以吗？
2.  namenode 会创建 8000 个线程来为客户端提供服务吗？如果是的话，假设每个线程花费2M内存，那么namnode会花费16G内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:33:36.793

1> 是的

2> 是的，它将创建 8000 个线程，这将花费你 16G 内存。这样做会增加 namenode 的内存利用率，但这可能会由于元数据更新的 I/O 争用而导致性能下降。

# qt - 使用 BlackBerry NDK 配置 Qt Creator 2.6 测试版时出错

> ID：13193288
> 
> 赞同：0
> 
> 时间：2012-11-02T10:17:56.697
> 
> 标签：qt, qt-creator, blackberry-10, blackberry-qnx

我在配置 Qt Creator 时遇到问题，无法添加 Qt 版本。错误如下所示：

![问题报告](../Images/b6ff1cc93e2ee70bfc751a29ae99f50e.png)

我已经安装了 Cascades 本机 NDK 和 BB 模拟器。

帮我解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:13:02.987

我认为您正在使用Windows。所以接下来的一切都是依赖于 Windows 的上下文。

您需要添加特殊的环境变量，例如：

```
QNX_TARGET=C:/Development/bb-ndk-3.0/target_10_0_9_386/qnx6
QNX_HOST=C:/Development/bb-ndk-3.0/host_10_0_9_52/win32/x86
QNX_CONFIGURATION=C:\Users\user\AppData\Local\Research In Motion\BlackBerry Native SDK
MAKEFLAGS=-I%QNX_TARGET%/usr/include
PATH=%QNX_HOST%\usr\bin;%QNX_CONFIGURATION%\bin;C:\Development\bb-ndk-3.0\ide\win32\x86\eclipse\jre\bin;%PATH%
PYTHONPATH=
QDE=C:\Development\bb-ndk-3.0\ide\win32\x86 
```

或`bbndk-env.bat`在启动**Qt Creator**之前运行：

1.  复制`bbndk-env.bat`到 QtCreator 的 bin 文件夹
2.  将其重命名为 start-qtcreator.bat
3.  添加那里行`qtcreator.exe`
4.  运行 bat 代替 qtcreator

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:25:17.057

好的，我已经按照您更新的答案完成了，现在发现的错误与前一个不同，即“未安装 qml 查看器”。 ![在此处输入图像描述](../Images/e8014853f0b17d13ddcc0b93f8a5f51c.png)

# node.js - 使用 base64 图像数据在 NodeJS 中进行图像处理

> ID：13193290
> 
> 赞同：5
> 
> 时间：2012-11-02T10:18:22.263
> 
> 标签：node.js, base64, image-manipulation

我有一个 nodejs 服务器，它通过 websocket 接收以 base64 编码的图像。我想对这些图像进行一些图像处理并将它们发回。我在网上搜索了一下以找到一些库来帮助我这样做，但我能找到的只是将图像存储在服务器端某处的库，进行操作并保存图像。显然，他们都将包含图像文件名的字符串作为输入，所以我猜在幕后他们是通过文件流手动获取图像。

我的问题是，是否有一个库可以帮助我直接处理 base64 数据（即，将数据作为输入传递给函数）或者我应该每次将图像保存在服务器上，修改它并将其发回？我宁愿不使用后者，因为我正在开发一些高性能应用程序，所有这些保存/加载看起来都是浪费周期。否则，您是否看到我可以实现此目的的其他方式（例如，获取图像文件而不保存并重新加载它）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:21:18.433

与`Buffer`s 合作。

```
var img = new Buffer(img_string, 'base64');
// Work with your images like other tutorials do. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:34:17.827

这个可以使用“可读流”：[https ://github.com/aheckmann/gm](https://github.com/aheckmann/gm)

请参阅自述文件中的第二组示例。

# java - 无法在 Java 中使用机器人按 Window+L

> ID：13193293
> 
> 赞同：8
> 
> 时间：2012-11-02T10:18:33.623
> 
> 标签：java, windows-8, awtrobot

我正在使用 Robot 类来模拟 Java 中的按键。但是我无法按窗口键+L，尽管我可以单独按它们。这是我的代码：

```
private void pressKey()
{
    Robot r=new Robot();
    robot.keyPress(KeyEvent.VK_WINDOWS);
    robot.keyPress(KeyEvent.VK_L);
    robot.keyRelease(KeyEvent.VK_WINDOWS);
    robot.keyRelease(KeyEvent.VK_L);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T10:52:43.030

试试这个：

```
Runtime.getRuntime().exec("rundll32 user32.dll,LockWorkStation"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T00:02:14.947

尝试这个：

```
robot.keyPress(KeyEvent.VK_WINDOWS);
robot.delay(100);
robot.keyPress(KeyEvent.VK_L);
robot.delay(200);
robot.keyRelease(KeyEvent.VK_L);
robot.delay(100);
robot.keyRelease(KeyEvent.VK_WINDOWS); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:29:33.150

尝试：

```
private void pressKey(){
   Robot r=new Robot();
   robot.keyPress(KeyEvent.VK_WINDOWS);
   robot.keyPress(KeyEvent.VK_L);
   robot.keyRelease(KeyEvent.VK_L);
   robot.keyRelease(KeyEvent.VK_WINDOWS);
} 
```

# android - 从 CountDownTimer 更新 TextView 的多个实例的文本

> ID：13193296
> 
> 赞同：0
> 
> 时间：2012-11-02T10:18:40.100
> 
> 标签：android, listview, textview, baseadapter, countdowntimer

尝试更新 TextView 的文本时遇到问题。

我有一个 MainActivity，我在其中创建了一个带有空 ListView 的布局。为了用自定义 ListItems 填充这个 ListView，我创建了一个自定义 AsyncTaskLoader，它检索要填充到 ListItems 的信息，以及一个自定义 BaseAdapter，它填充加载到 ListItems 中的数据。

这部分没有错误，而且做得很完美。

但是，我在尝试从 ListView 中的 ListItem 更新 TextView 上的文本时遇到问题。你看，我创建了一个自定义的 CountDownTimer，它采用一个名为 OnTickListener 的接口作为构造函数中的参数。每次创建 ListItem 时，我都有一个唯一的 ID，我使用它来将该 ListItem 的 TextView 存储在 HashMap 中，并将 CountDownTimer 存储在 HashMap 中。这些 HashMap 被创建并保存在自定义 BaseAdapter 中。

BaseAdapter 还实现了 OnTickListener。

每次 MyCountDownTimer 调用 OnTick 时，它都会调用构造函数中提供给它的 OnTickListener 并传递两个参数：int id 和 String text。

这将调用 OnTickListener 唯一方法的 BaseAdapters 实现：public void OnTick(int id, String text)。

在 onTick 方法中，我执行以下操作：

1.  在我前面提到的 HashMap 中找到 id 的 TextView。
2.  更新 TextViews 文本。

现在这似乎以某种方式起作用。因为如果我上下滚动，我可以看到 TextViews 上的文本一旦再次显示在屏幕上就会更新。但如果 TextView 已经显示在屏幕上，它不会更新它。我试图调用 TextView.invalidate() 和 TextView.postInvalidate()。在我绝望的情况下，我什至尝试创建一个处理程序，该处理程序将发布一个可尝试更新 TextView 的 Runnable。

但似乎没有任何效果。关于如何更新 TextView 有任何想法吗？

TL DR：我需要知道如何从 BaseAdapter 中创建的 CountDownTimer 更新 ListItem 内的 TextView - 这是 Activity 的一部分。

对不起文字墙^^”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:30:11.050

您应该更新适配器的“数据”，该数据应包含将在每个文本视图上显示的每个项目的内容。

然后在适配器上调用 notifydatasetchanged()。

# javascript - Chrome的渲染时间，事件响应时间太差了

> ID：13193298
> 
> 赞同：0
> 
> 时间：2012-11-02T10:18:42.960
> 
> 标签：javascript, google-chrome

Chrome 的渲染时间和事件响应时间太糟糕了。

我创建了一个包含大约 5,000 - 10,000 行的示例 html，结果如下：

有 5,000 行，它需要 FireFox 5s 来渲染，它需要 Chrome 11s 来渲染。10000行，FireFox 8s渲染，Chrome渲染3.5分钟

我还使用以下脚本进行了测试：

```
$(window).load(function () {
    $("div.click-test").click(function () {
        $(this).text("clicked");
    });
}); 
```

有 5,000 行，在 Firefox 中，事件点击响应中间，但在 Chrome 中，它在大约 3 秒后响应。有 10,000 行，在 Chrome 中，我没有耐心等待响应

任何人都可以帮助我重组我的 html 以使 Chrome 呈现时间更好吗？

PS：你可以在这里下载我的示例[http://www.mediafire.com/?x2h0nsldo90m642](http://www.mediafire.com/?x2h0nsldo90m642)。感谢任何提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:26:57.433

```
$(window).load(function () {
    // On every single element, add a click handler.
    $("div.click-test").click(function () {
        $(this).text("clicked");
    });
}); 
```

您正在为*每个元素*添加不同的事件处理程序。请改用事件委托。它允许您拥有*一个*事件处理程序来处理您的所有元素。

```
$('body').on('click', '.click-test', function() {
    $(this).text('clicked');
}); 
```

此外，请避免使用慢速选择器，例如`div.click-test`. `.click-test`速度更快。

# cakephp - 无法在 cakephp 的 Themes webroot 文件夹中获取 css 和图像文件

> ID：13193302
> 
> 赞同：0
> 
> 时间：2012-11-02T10:19:00.917
> 
> 标签：cakephp

在访问 app/Views/Themed/mythemename/webroot 文件夹中的 css 和图像文件时，croogo CMS 应用程序出现了一个小问题

```
 <?php  echo $this->Html->css(array('style'));?> 
```

这给了我查看源代码中的 CSS 参考链接

```
<link rel="stylesheet" type="text/css" href="/croogo/theme/mythemename/css/style.css" /> 
```

但是当我单击此链接（/croogo/theme/mythemename/css/style.css）时，我发现在服务器上找不到我要访问的 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:09:16.020

当我通过放错html标签的结尾犯了一个愚蠢的错误时，这发生在我身上。

花了很长时间来修复；）

检查您的网站是否有效。

[http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T14:38:40.783

它是通过添加 json 文件完成的 `app/View/Themed/MyThemeName/webroot/theme.json file.`，请在[此处查看文档](http://docs.croogo.org/1.5/en/designers/themes/json-file.html)

# android - 尝试使用相对布局以编程方式定位时控件重叠 (Android)

> ID：13193306
> 
> 赞同：0
> 
> 时间：2012-11-02T10:19:37.977
> 
> 标签：android, android-layout, android-relativelayout

我正在尝试创建一个片段。在片段中，我计划在它旁边放置一个文本视图，一个 Spinner 控件。我尝试使用此代码。但是 Spinner 总是放置在屏幕左侧的 textview 上。谁能建议可能是什么问题？

代码：

```
public class FragmentTest extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    RelativeLayout view = (RelativeLayout)inflater.inflate(R.layout.ll2, null);
    RelativeLayout lref = (RelativeLayout)view.findViewById(R.id.ll2ll);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(lref.getLayoutParams());

    lp.addRule(RelativeLayout.ALIGN_LEFT);

    RelativeLayout rl = new RelativeLayout(getActivity());

    TextView tv = new TextView(getActivity());
    tv.setId(1);
    tv.setLayoutParams(lp); 
    tv.setText("My ");

    rl.addView(tv, lp);

    Spinner s = new Spinner(getActivity());
    lp.addRule(RelativeLayout.RIGHT_OF, tv.getId());
    s.setId(2);
    String currencyData[] = {"USD",
            "EUR","INR"
    };

    ArrayAdapter<Object> currencyAdapter; currencyAdapter = new ArrayAdapter<Object>(getActivity(), android.R.layout.simple_spinner_item, currencyData);
    currencyAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s.setAdapter(currencyAdapter);

    rl.addView(s,lp);
    return rl;
}
} 
```

XML 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="300dp"
android:layout_height="fill_parent"
android:layout_marginLeft="10sp"
android:layout_marginRight="10sp"
android:layout_marginTop="10sp"
android:isScrollContainer="true"
android:orientation="horizontal" >

<RelativeLayout
    android:id="@+id/ll2ll"
    android:layout_width="140dp"
    android:layout_height="50dp"
    android:textSize="@dimen/font_size" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:29:23.953

当视图从 XML 膨胀时，您将无法`LayoutParams`正确获得。尝试使用`new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:26:28.797

RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(lref.getLayoutParams());

您的问题是，您不能使用相同的布局参数来添加所有布局和修改 lp。因为在初始化所有布局后使用 lp，这意味着您对所有布局微调器和 textview 都使用相同的参数。

尝试对所有布局使用不同的布局参数

相对布局.LayoutParams lp

RelativeLayout.LayoutParams lptextview

RelativeLayout.LayoutParams lpspinner

对于他们所有人

如果您的问题得到解决，请将我的回答标记为正确

# json - 带有 CakePHP JSON 响应的主干

> ID：13193307
> 
> 赞同：1
> 
> 时间：2012-11-02T10:19:40.300
> 
> 标签：json, cakephp, backbone.js

我想要来自 cakePHP 的 JSON 响应，我将使用backbone.js 进行渲染。但是我得到的不是 JSON 响应，而是 default.ctp 内容以及 JSON 响应，我不知道为什么。有什么我不能在 JSON 响应中包含 default.ctp 内容的吗？

这是我获取 JSON 的代码

```
<?php
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Cache-Control: no-store, no-cache, max-age=0, must-revalidate');
header('Cache-Control: post-check=0, pre-check=0', false);

//header('Content-type: text/json');
header('Content-type: application/json');
header('Pragma: no-cache');
//header("X-JSON: ".$content_for_layout);

$response['status'] = $status;
//$response['data']['titleForLayout'] = $title_for_layout;

$response['data']['validationErrors'] = $this->validationErrors;

$response['data']['sessionFlash'] = $this->Session->read('Message.flash.message');

//$response['data']['data'] = $this->data;
$response['data'][$this->request->params['controller']]['output'] = isset($output)?$output:null;

$output = json_encode($response);

if (isset($this->params['url']['callback'])) {
    echo $this->params['url']['callback'] . '(' . $output . ');';
} else {
    echo $output;
} 
```

?>

其中 data->output 包含获取的行。

请帮帮我。

我收到 JSON 响应，但问题是获取我不想要的响应周围的 default.ctp 内容。有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:04:25.467

看起来你想要请求处理 [http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T14:34:08.830

您需要将布局设置为 ajax 或空布局。

在控制器中设置：

```
$this->layout = 'ajax'; 
```

# c# - 将带有数组的 IntPtr 返回到 C++

> ID：13193310
> 
> 赞同：0
> 
> 时间：2012-11-02T10:19:56.960
> 
> 标签：c#, unmanaged, unmarshalling

我有 c# 方法 ReadBytesInTask，它是从 c++ 代码调用的，使用通过 Marshal.GetFunctionPointerForDelegate 方法获取的函数指针。

ReadBytesInTask 获取指向非托管 short[] 数组的 ptr 填充它并发送回非托管代码。数组在方法内部被正确解组为非托管内存，但 c++ 仅获得零填充数组。
我应该怎么办？

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl, CharSet = CharSet.Auto)]
private delegate int BytesReader([In,Out] IntPtr buffer, int samplesCount, string taskId);

private static readonly BytesReader _readBytesInTask = ReadBytesInTask;

private static int ReadBytesInTask(IntPtr buffer, int samplesCount)
{
    var bufferSize = samplesCount;              
    var samplesToRead = bufferSize <= task.Buffer.Length - task.Offset ? bufferSize : task.Buffer.Length - task.Offset;

    buffer = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(short))*samplesToRead);
    Marshal.Copy(task.Buffer, task.Offset, buffer, samplesToRead);

    task.Offset += samplesToRead;
    if (samplesToRead < bufferSize) task.Offset = 0;
    return samplesToRead;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:40:06.503

您正在更改指针，而不是它指向的内容。所以你需要一个指向指针的指针。所以它会是这样的：

```
private static int ReadBytesInTask(IntPtr* buffer, int samplesCount) 
```

# java - log4j：文件被创建但没有被写入

> ID：13193316
> 
> 赞同：1
> 
> 时间：2012-11-02T10:20:29.800
> 
> 标签：java, log4j

我正在使用具有以下配置的 Log4j 文件附加程序：

```
log4j.logger.com.atpl=INFO,ABW
log4j.appender.ABW=org.apache.log4j.DailyRollingFileAppender 
log4j.appender.ABW.File=c://atpl-platform-web//atplABW.txt
log4j.appender.ABW.DatePattern='.' yyyy-MM-dd
log4j.appender.ABW.layout=org.apache.log4j.PatternLayout 
log4j.appender.ABW.layout.ConversionPattern= [%d] [%t] [%-5p] [%c] ==> %m%n 
```

该文件正在给定位置创建。一旦我启动服务器，文件就会被锁定。但是当我尝试将数据记录到该文件中时，它不起作用。

```
private static final Logger FILE_LOGGER = Logger
    .getLogger(TreeDemoAction.class);

FILE_LOGGER.info(gson.toJson(rootNode)); 
```

下面也是重新启动服务器登录。

```
Nov 2, 2012 3:47:15 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in   production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.6.0_03\bin;C:\Tomcat 6.0\bin
Nov 2, 2012 3:47:15 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8084
Nov 2, 2012 3:47:15 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 363 ms
Nov 2, 2012 3:47:15 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Nov 2, 2012 3:47:15 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18
Nov 2, 2012 3:47:15 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Tomcat 6.0\webapps\atpl-platform-web\WEB-INF\lib\servlet.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Nov 2, 2012 3:47:17 PM org.apache.catalina.core.ApplicationContext log
INFO: Set web app root system property: 'atpl-platform-web' = [C:\Tomcat 6.0\webapps\atpl-platform-web\]
Nov 2, 2012 3:47:17 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Log4J from [C:\Tomcat 6.0\webapps\atpl-platform-web\WEB-INF\log4j.properties]
Nov 2, 2012 3:47:17 PM org.apache.catalina.core.ApplicationContext log
 INFO: Initializing Spring root WebApplicationContext
 log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
 log4j:WARN Please initialize the log4j system properly.
 log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
 AbandonedObjectPool is used (org.apache.commons.dbcp.AbandonedObjectPool@84f665)
    LogAbandoned: false
    RemoveAbandoned: true
    RemoveAbandonedTimeout: 60
Nov 2, 2012 3:47:22 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8084
Nov 2, 2012 3:47:22 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Nov 2, 2012 3:47:22 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/15  config=null
Nov 2, 2012 3:47:22 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 7177 ms 
```

谁能指导我这里有什么问题？我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:33:01.153

也许你弄错了记录器包

```
log4j.logger.com.platform.web=INFO,ABW 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:51:08.943

`log4j.logger.com.atpl=INFO,ABW`没关系。试试下面的代码：

```
log4j.appender.ABW.File=/atpl-platform-web/atplABW.txt 
```

# android - 在 android 调试器中使用 Tracer for opengl

> ID：13193319
> 
> 赞同：5
> 
> 时间：2012-11-02T10:20:53.970
> 
> 标签：android, opengl-es, ddms

我正在尝试让 opengl 跟踪器在监视器中为 android 工作。当我添加应用程序的名称时，我无法打开应用程序。

启动应用程序时出现错误错误：Starting Intent { .... }

还有一个错误说无法解决意图。

另外我无权访问源代码，所以有什么办法可以让我运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T02:18:11.183

我得到了答案。问题是我没有使用正确的活动。

现在要获得活动的名称，我做了一个

```
adb shell dumpsys activity | grep <name of the application> 
```

同时专注于所需的活动。

通过这样做，我得到了我在 GLTracer 中使用的活动的名称。一旦我能够这样做，我就可以收集跟踪日志

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:32:06.310

接收跟踪器所需的 Intent 名称有些棘手。您需要在 Android 平台工具上键入：

```
adb shell dumpsys package <name of application> -f 
```

您将看到有关您的应用程序的详细信息，包括 Intent 名称。您需要将此 Intent 名称放入 GL Tracer 插件（或监视器）中的对话框窗口中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-26T06:40:18.800

* * *

Android N am 命令已移除--opengl-trace，因此您不能使用Monitor 的OpenGL trace 或adb shell am --opengl-trace 来调试您的APP。仅使用谷歌 GPU 调试器 gapid。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-20T05:44:58.333

也可能是这个问题[Not Able To Debug App In Android Studio](https://stackoverflow.com/questions/16753939/not-able-to-debug-app-in-android-studio)。检查您的应用程序是否构建为可调试的：

```
<application android:debuggable="true">
</application> 
```

我希望，它会帮助某人。

# android - 进度条小而下载的图像不可见

> ID：13193322
> 
> 赞同：0
> 
> 时间：2012-11-02T10:20:57.903
> 
> 标签：android, progress-bar, static-class

目前，我有一个类来下载 Asynctask 的图像扩展。我想实现一个小的进度条来向用户显示在该空间中加载的图像。我试图将 Asynctask 类放在类活动中。现在的问题是调用类我需要类是静态的。但是如果我把静态类我不能控制进度对话框。

我的班级下载图片：

```
public class DownloadImages extends Activity{

    public class DownloadImage extends AsyncTask<String, Void, Bitmap> {
        ImageView bmImage;
//      progressBar = new ProgressBar(activity, null, android.R.attr.progressBarStyleSmall);

        public DownloadImage(ImageView bmImage) {
            this.bmImage = bmImage;
        }

        protected Bitmap doInBackground(String... urls) {
            String urldisplay = urls[0];
            Bitmap mIcon11 = null;

            try {
                InputStream in = new java.net.URL(urldisplay).openStream();
                mIcon11 = BitmapFactory.decodeStream(in);
            } catch (Exception e) {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }
            return mIcon11;
        }
        protected void onPostExecute(Bitmap result) {
            bmImage.setImageBitmap(result);
            Log.e("TAG","IMAGEN CARGADA");
        }

    //    protected void onPreExecute(){
    //    }
    }
} 
```

要创建 ProgressBar，我认为我需要将类作为 Activity：

```
progressBar = new ProgressBar(activity, null, android.R.attr.progressBarStyleSmall); 
```

这是我为我的问题创建的解决方案：

```
public class DownloadImages extends Activity{

    ProgressBar progressBar = new ProgressBar(DownloadImages.this, null, android.R.attr.progressBarStyleSmall);

    public class DownloadImage extends AsyncTask<String, Void, Bitmap> {
        ImageView bmImage;

        public DownloadImage(ImageView bmImage) {
            this.bmImage = bmImage;
        }

        protected Bitmap doInBackground(String... urls) {
            String urldisplay = urls[0];
            Bitmap mIcon11 = null;

            try {
                InputStream in = new java.net.URL(urldisplay).openStream();
                mIcon11 = BitmapFactory.decodeStream(in);
            } catch (Exception e) {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }
            return mIcon11;
        }
        protected void onPostExecute(Bitmap result) {
            bmImage.setImageBitmap(result);
            Log.e("TAG","IMAGEN CARGADA");
        }

        protected void onPreExecute(){
            progressBar.setVisibility(View.VISIBLE);
        }
    }
} 
```

现在的问题是如果我调用DownloadImage，这个类必须是静态的，但是如果我做静态我不能使用progressBar，除非它被声明为静态，如果我认为静态我不能用我的活动创建它。

有什么解决办法吗？

谢谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:25:17.793

只需将您的`ProgressBar`实例传递给`DownloadImage`任务构造函数。

就像这样（我假设您从活动创建 AsyncTask，因此`this`将指向它）：

```
Progressbar progressBar = new ProgressBar(this, null, android.R.attr.progressBarStyleSmall);
DownloadImage downloadImage = new DownloadImage(someImageView, progressBar); 
```

并更改您的构造函数，以便它可以`ProgressBar`作为参数获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:30:50.527

使用 Wea​​kReference 获取您从中调用 DownloadImage 类的 Activity 的 Context，ProgressBar 在其构造函数的第一个参数中需要 Context。

```
public class DownloadImages extends Activity{

ProgressBar progressBar = new ProgressBar(DownloadImages.this, null, android.R.attr.progressBarStyleSmall);

public static class DownloadImage extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;
    private WeakReference<DownloadImages> mWeakReference;

    public DownloadImage(DownloadImages downloadImages, ImageView bmImage) {
        this.bmImage = bmImage;
        mWeakReference= new WeakReference<DownloadImages>(downloadImages);
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;

        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }
    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
        Log.e("TAG","IMAGEN CARGADA");
    }

    protected void onPreExecute(){
        mWeakReference.get().progressBar.setVisibility(View.VISIBLE);
    }
} 
```

}

现在，当您启动 AsyncTask 时，从 Activity 传递“this”。

# ruby - Ruby 1.9.3 Dir.glob 不返回 NFC UTF-8 字符串，而是返回 NFD

> ID：13193329
> 
> 赞同：0
> 
> 时间：2012-11-02T10:21:17.917
> 
> 标签：ruby

从 Ruby 1.9.3 读取文件名时，我看到了一些奇怪的结果。例如，使用以下测试 ruby​​ 脚本，在包含名为“Testé.txt”的文件的文件夹中运行

```
#!encoding:UTF-8
def inspect_string s
    puts "Source encoding: #{"".encoding}"
    puts "External encoding: #{Encoding.default_external}"
    puts "Name: #{s.inspect}"
    puts "Encoding: #{s.encoding}"
    puts "Chars: #{s.chars.to_a.inspect}"
    puts "Codepoints: #{s.codepoints.to_a.inspect}"
    puts "Bytes: #{s.bytes.to_a.inspect}"
end

def transform_string s
   puts "Testing string #{s}"
   puts s.gsub(/é/u,'TEST')
end

Dir.glob("./*.txt").each do |f|  

   puts RUBY_VERSION + RUBY_PLATFORM

   puts "Inline string works as expected" 
   s = "./Testé.txt" 
   inspect_string s
   puts transform_string s

   puts "File name from Dir.glob does not" 
   inspect_string f
   puts transform_string f

end 
```

在 Mac OS X Lion 上，我看到以下结果：

```
1.9.3x86_64-darwin11.4.0
Inline string works as expected
Source encoding: UTF-8
External encoding: UTF-8
Name: "./Testé.txt"
Encoding: UTF-8
Chars: [".", "/", "T", "e", "s", "t", "é", ".", "t", "x", "t"]
Codepoints: [46, 47, 84, 101, 115, 116, 233, 46, 116, 120, 116]
Bytes: [46, 47, 84, 101, 115, 116, 195, 169, 46, 116, 120, 116]
Testing string ./Testé.txt
./TestTEST.txt

File name from Dir.glob does not
Source encoding: UTF-8
External encoding: UTF-8
Name: "./Testé.txt"
Encoding: UTF-8
Chars: [".", "/", "T", "e", "s", "t", "e", "́", ".", "t", "x", "t"]
Codepoints: [46, 47, 84, 101, 115, 116, 101, 769, 46, 116, 120, 116]
Bytes: [46, 47, 84, 101, 115, 116, 101, 204, 129, 46, 116, 120, 116]
Testing string ./Testé.txt
./Testé.txt 
```

预期的最后一行是

```
./TestTEST.txt 
```

返回的编码表明这是一个普通的 UTF-8 字符串，但任何涉及 unicode 的正则表达式转换都没有正确应用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-13T13:13:52.493

对此的更新：Ruby 2.2.0 获得了[String#unicode_normalize](http://ruby-doc.org/stdlib-2.2.0/libdoc/unicode_normalize/rdoc/String.html)。

```
f.unicode_normalize! 
```

将从 OSX 的 HFS+ 文件系统返回的 NFD 分解字符串转换为 NFC 组合字符串。您可以指定`:nfd`, `:nfkc`, 或者`:nfkd`如果您需要替代规范化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:16:02.007

发布以防万一这对遇到此问题的其他人有用：

如果您使用 UTF-8 编码，Ruby 1.9 和 2.0 将使用组合的 UTF-8 字符串，但不会修改从操作系统接收的字符串。Mac OS X 使用分解的字符串（两个字节用于许多常见的重音符号，如 UTF-8 中的 é，它们被组合以显示）。所以文件系统方法经常会返回意想不到的字符串格式，严格来说是 UTF-8，但是是一种分解的形式。

为了解决这个问题，您需要通过将“UTF8-MAC”编码转换为 UTF-8 来分解它们：

```
f.encode!('UTF-8','UTF8-MAC') 
```

在使用它们之前，否则您最终可能会使用组合的原生 ruby​​ 字符串对分解的字符串进行检查。

此行为会影响文件名包含 unicode 字符的文件和文件夹的所有文件系统调用，例如 glob。

苹果文档：

[http://developer.apple.com/library/mac/#qa/qa1235/_index.html](http://developer.apple.com/library/mac/#qa/qa1235/_index.html)

# git - 有没有办法对任何新提交重复过滤分支操作？

> ID：13193331
> 
> 赞同：3
> 
> 时间：2012-11-02T10:21:50.483
> 
> 标签：git, git-filter-branch

我有一个包含多个项目的大型存储库。我需要创建另一个只包含这些项目的一个子集的存储库。我可以使用`git filter-branch`存储库的克隆来实现这一点，如其他问题的答案中所述，如下所示：

```
<clone the source repository>
git filter-branch --tag-name-filter cat --index-filter 'git rm -r --cached --ignore-unmatch --quiet <project1> <project2>' --prune-empty -- --all
rm -rf refs/original
git reflog expire --expire=now --all
git gc --aggressive --prune=now 
```

这工作正常，但问题是执行此操作需要一个多小时（过滤了大约 4000 个提交）。由于我需要定期执行此操作，因为对源存储库进行了新的提交，所以这不是一个理想的解决方案。

有没有办法实现某种“增量”过滤器分支，当对源进行新提交时触发，并通过仅过滤新提交并将它们合并到过滤存储库来更新（而不是完全重新创建）以前过滤的输出？

（由于代码布局和历史原因，将项目分离到各自的存储库中是不切实际的。）

# jquery - 我可以排序但无法拖动特定值

> ID：13193334
> 
> 赞同：1
> 
> 时间：2012-11-02T10:22:08.183
> 
> 标签：jquery, html

我能够对值进行排序，也能够拖动值，即内部的所有内容，`ul`但无法拖动特定值，即`li`. 我想将值一一拖放到“在此处添加我的故事”。

[你可以在这里](http://jsfiddle.net/coolanuj/7683X/6/)查看我的代码。

# css - 为什么#my_id 会覆盖 CSS 中的 .my_class:hover？

> ID：13193335
> 
> 赞同：0
> 
> 时间：2012-11-02T10:22:14.933
> 
> 标签：css, hover

应用于 ID 的 CSS 规则的优先级高于类规则，这是有道理的。我不明白为什么会这样：

```
<div id="global_button" class="global_button_class"></div>

#global_button
{
   opacity:0.7;
}

.global_button_class:hover
{
   opacity:1;
} 
```

...当鼠标悬停在按钮上时不会改变不透明度，但如果我改变：

```
.global_button_class:hover 
```

...到：

```
#global_button:hover 
```

...有用。我的意思是，如果悬停状态不是由 id 定义的，为什么不`.global_button_class:hover`启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:24:02.483

**嗨，现在习惯了**

```
#global_button.global_button_class:hover{
opacity:1;
} 
```

***[现场演示](http://tinkerbin.com/HxCzTPsx)***

因为你的`define opacity into`id 或`id`value**不高** `class`

```
ID value is  == 100
Class value is == 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:26:29.977

这完全取决于特异性（[这里](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)解释得更好）。基本上优先顺序是id类元素。

Malarkey 对它有一个很好的倾向 George Lucas stylee （[解释了 css 优先级](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:29:44.040

基本上是因为您已经使用元素 ID 设置了 opacity 属性，所以它也在设置悬停、焦点、活动等状态。

当您尝试使用您附加的类名设置悬停状态时，它会被先前声明的 ID 覆盖，该 ID 比该类更重要。

编号 > 类别

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T10:42:32.027

解决方案不就是：

```
<div id="global_button"></div>

#global_button {
opacity:0.7;
}

#global_button:hover {
opacity:1;
} 
```

# html - 我如何在菜单中包含标签代码

> ID：13193336
> 
> 赞同：0
> 
> 时间：2012-11-02T10:22:20.050
> 
> 标签：html, blogger

当我在此菜单代码中包含此标签 URL [http://dewdropzone.blogspot.com/search/label/English%20Movie?&max-results=24](http://dewdropzone.blogspot.com/search/label/English%20Movie?&max-results=24)

```
<li><a href='http://dewdropzone.blogspot.com/search/label/English%20Movie?&max-results=24'>English</a></li>
</ul> 
```

然后显示此错误消息“解析 XML 时出错，第 476 行，第 87 列：对实体“max-results”的引用必须以 ';' 结尾 分隔符。” 如果我从此 url 中删除 max-results=24 ，那么当我进入菜单类别时，会显示 20 个帖子而不是 24 个帖子。我如何在这段代码中包含这个带有 max-results=24 的博主 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:56:27.193

最好使用 bit.ly 或 goo.gl 或任何其他服务缩短 url，然后使用该短 url。我希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T18:44:24.260

使用 without更改您的`&`符号，`?&amp;`它可以工作：

```
<li><a href='http://koran-madura.blogspot.com/search?q=sumenep?&amp;max-results=10?&amp;by-date=true'>Sumenep</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-21T17:02:20.317

您可以使用 (/search/label/test?&max-results=7) 例如：

```
<a href='/search/label/test?&amp;max-results=7' itemprop='url' title='test'></a> 
```

# ios - 脸书 ios 应用程序用户界面

> ID：13193337
> 
> 赞同：3
> 
> 时间：2012-11-02T10:22:23.257
> 
> 标签：ios, facebook, user-interface

下面是 iOS 上 Facebook 应用程序的屏幕截图。

我对“状态、照片、签到”栏按钮很好奇，它们会在向下滚动时消失，并在滚动到顶部时再次出现。是否有任何方便的框架或开源项目可以做到这一点？

下面的矩形看起来和行为有点像 tableview 单元格，但我认为不是？或者实际上通过自定义 tableview 单元格可以具有相同的视觉效果？

![https://dl.dropbox.com/u/6931090/images/IMG_0169.PNG](../Images/e290425d6058fa925ed2500e2cc88788.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:34:48.907

关于“状态、照片、签到”栏，以下内容应该有所帮助：

[UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:45:19.753

您可以使用 UITableView，将按钮放在无行第一部分的标题视图中，并将流放在无标题第二部分的行中。

# wordpress - WordPress 日历自定义

> ID：13193340
> 
> 赞同：0
> 
> 时间：2012-11-02T10:22:52.607
> 
> 标签：wordpress

我已将与 WordPress 一起使用的主题翻译成泰米尔语，但我找不到在哪里编辑存档/日历文本，或者具体来说，是月份的名称。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:08:12.937

使用[翻译](http://codex.wordpress.org/Translating_WordPress)在您的 wordpress 主题中使用其他语言。

否则，您可以研究 wordpress 的结构以完全理解其语言。

# blackberry - 黑莓的paypal api

> ID：13193343
> 
> 赞同：0
> 
> 时间：2012-11-02T10:22:59.627
> 
> 标签：blackberry, paypal

我最近正在开发一个名为 MyTicket 的业务应用程序。我希望该贝宝网关应该在应用程序中打开所以黑莓中是否有任何贝宝 api 可以帮助我完成这项任务。
我已经尝试过创建一个 Paypal API 包装器，例如使用代理页面使用的 PHP。然后在 BlackBerry 中，使用标准 HTTP 请求将 GET/POST 请求发送到代理页面。
代理页面将反过来使用您创建的包装器为您和您的客户设置付款。但是通过这种方式，我们能够使用应用程序进行信用卡付款，整个交易将在服务器端发生，作为响应，我们可以在客户端获得事务成功发生的结果。
但我希望贝宝交易将通过贝宝账户进行。那么黑莓中是否有任何 sdk 可以帮助我完成这个请求。

感谢和问候
平克什·古普塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:15:06.660

If you use the standard Express Checkout API within your app it'll automatically utilize the mobile checkout experience.

I use this in my jQuery Mobile Apps and it works great. If you're building a native Java app, though, you might have to use some sort of an embedded web page to make it work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:08:30.193

有一个 API，但他们放弃了支持。我认为现在唯一支持的平台是 iOS 和 Android：[PayPal -Mobile Payment Libraries](https://www.x.com/developers/paypal/products/mobile-payment-libraries)

*（如果您想查看 BB 版本的情况，或者如果您设法找到 jar，这是开发指南：[黑莓的 MPL 指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_Blackberry.pdf)）*

现在 RIM 有一个支付服务可以帮助你：[支付服务](https://developer.blackberry.com/develop/platform_services/payment.html)

# javascript - 在chrome中添加多个断点的快捷方式？

> ID：13193344
> 
> 赞同：4
> 
> 时间：2012-11-02T10:23:00.260
> 
> 标签：javascript, debugging, google-chrome

考虑到我有 100 行代码并且我希望在每一行都设置断点，是否有类似单击第一行向下滚动到第 100 行并使用 shift-click 或 control-click 来选择其间的所有行以应用断点?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T04:05:58.607

在 chrome 中，您可以尝试使用`debug`关键字。

```
function debug(fn) { [Command Line API] } 
```

例如，将此代码粘贴到 Chrome 开发者控制台中：

```
function hw() { 
    alert('hello world'); 
}

debug (hw);
hw(); 
```

它将创建一个虚拟文件并从您的函数处的断点开始。

# php - mysql中的请求不发送数据，除了在phpmyadmin中

> ID：13193345
> 
> 赞同：0
> 
> 时间：2012-11-02T10:23:04.213
> 
> 标签：php, mysql, phpmyadmin, request

我在创建讲台时遇到了一些麻烦。

事实上，我想展示我的员工最好的一面。

所以我做了一个讲台

对于前三个最好的，我做了一些这样的查询：

对于第一个：

```
$sql="SELECT `gestionnaire`.`nom`,`gestionnaire`.`prenom`,`gestionnaire`.`urlavatar`,`gestionnaire`.`civilite`, `versements`.`date_reception`, `versements`.`etat`, SUM(honoraires) as TOTAL FROM `versements` INNER JOIN `gestionnaire` ON `gestionnaire`.`id` = `versements`.`gestionnaire_id` WHERE `versements`.`id_company` ='".$societe['id']."' AND `versements`.`etat`='3' AND`date_reception` > '".date('Y-m-')."01' AND `date_reception` < '".date('Y-m-')."31' GROUP BY `versements`.`gestionnaire_id` ORDER BY `versements`.`honoraires` DESC LIMIT 0,1"; 
```

对于第二个：

```
$sql2="SELECT `gestionnaire`.`nom`,`gestionnaire`.`prenom`,`gestionnaire`.`urlavatar`,`gestionnaire`.`civilite`, `versements`.`date_reception`, `versements`.`etat`, SUM(honoraires) as TOTAL FROM `versements` INNER JOIN `gestionnaire` ON `gestionnaire`.`id` = `versements`.`gestionnaire_id` WHERE `versements`.`id_company` ='".$societe['id']."' AND `versements`.`etat`='3' AND `date_reception` > '".date('Y-m-')."01' AND `date_reception` < '".date('Y-m-')."31' GROUP BY `versements`.`gestionnaire_id` ORDER BY `versements`.`honoraires` DESC LIMIT 1,2"; 
```

第三个：

```
$sql3="SELECT `gestionnaire`.`nom`,`gestionnaire`.`prenom`,`gestionnaire`.`urlavatar`,`gestionnaire`.`civilite`, `versements`.`date_reception`, `versements`.`etat`, SUM(honoraires) as TOTAL FROM `versements` INNER JOIN `gestionnaire` ON `gestionnaire`.`id` = `versements`.`gestionnaire_id` WHERE `versements`.`id_company` ='".$societe['id']."' AND `versements`.`etat`='3' AND `date_reception` > '".date('Y-m-d',strtotime($_POST['date_debut']))."' AND `date_reception` < '".date('Y-m-d',strtotime($_POST['date_fin']))."' GROUP BY `versements`.`gestionnaire_id` ORDER BY `versements`.`honoraires` DESC LIMIT 2,3"; 
```

对于三个最好的我没有麻烦。

但是当我尝试显示其余部分时，从第 4 个到最后，我遇到了一些麻烦，实际上我做了一个查询，我限制 4,100 显示其余部分。

所以查询是这样的：

```
$rqt="SELECT `gestionnaire`.`nom`,`gestionnaire`.`prenom`,`gestionnaire`.`urlavatar`,`gestionnaire`.`civilite`, `versements`.`date_reception`, `versements`.`etat`, SUM(honoraires) as TOTAL FROM `versements` INNER JOIN `gestionnaire` ON `gestionnaire`.`id` = `versements`.`gestionnaire_id` WHERE `versements`.`id_company` ='".$societe['id']."' AND `versements`.`etat`='3' AND `date_reception` > '".date('Y-m-d',strtotime($_POST['date_debut']))."' AND `date_reception` < '".date('Y-m-d',strtotime($_POST['date_fin']))."' GROUP BY `versements`.`gestionnaire_id` ORDER BY `versements`.`honoraires` DESC LIMIT 3,100"; 
```

当我在 phpmyadmin 中复制并粘贴查询的回声时，它工作正常，它向我显示了良好的结果。

但是当我试图回应结果时，我什么都没有。

我做了一个循环来回显这样的结果：

```
<p align="left"><?php
if(!isset($_POST['date_debut'])) { $rqt="SELECT `gestionnaire`.`nom`,`gestionnaire`.`prenom`,`gestionnaire`.`urlavatar`,`gestionnaire`.`civilite`, `versements`.`date_reception`, `versements`.`etat`, SUM(honoraires) as TOTAL FROM `versements` INNER JOIN `gestionnaire` ON `gestionnaire`.`id` = `versements`.`gestionnaire_id` WHERE `versements`.`id_company` ='".$societe['id']."' AND `versements`.`etat`='3' AND `date_reception` > '".date('Y-m-')."01' AND `date_reception` < '".date('Y-m-')."31' GROUP BY `versements`.`gestionnaire_id` ORDER BY `versements`.`honoraires` DESC ";
}
else
{
    $rqt="SELECT `gestionnaire`.`nom`,`gestionnaire`.`prenom`,`gestionnaire`.`urlavatar`,`gestionnaire`.`civilite`, `versements`.`date_reception`, `versements`.`etat`, SUM(honoraires) as TOTAL FROM `versements` INNER JOIN `gestionnaire` ON `gestionnaire`.`id` = `versements`.`gestionnaire_id` WHERE `versements`.`id_company` ='".$societe['id']."' AND `versements`.`etat`='3' AND `date_reception` > '".date('Y-m-d',strtotime($_POST['date_debut']))."' AND `date_reception` < '".date('Y-m-d',strtotime($_POST['date_fin']))."' GROUP BY `versements`.`gestionnaire_id` ORDER BY `versements`.`honoraires` DESC LIMIT 3,100";
}

$res=mysql_query($rqt);
$i5=3;
while($donnees=mysql_fetch_assoc($res));
{
echo $rqt;  
?>
Position <?php echo ++$i5 ; var_dump($donnees); ?>: <?php echo $donnees['civilite'].' '.$donnees['nom'].' '.$donnees['prenom'] ; ?> Total d'honoraires: <?php  echo number_format($donnees['TOTAL'], 2, ',', ' ');?> &euro;<br /><?php }?></p> 
```

当我执行 var_dump 时，结果的显示什么也不显示，它说 bolean false。

我真的迷路了，我不明白为什么在 phpmyadmibn 请求会向我发送一些结果，而在我的页面中我有这种错误。

任何帮助将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:57:03.130

删除while循环后的分号，它应该可以工作。您已经用分号终止了 while 循环。

# haskell - 生成分布更均匀的随机序列

> ID：13193346
> 
> 赞同：1
> 
> 时间：2012-11-02T10:23:10.437
> 
> 标签：haskell, random

我已经阅读[了这个问题](https://stackoverflow.com/questions/13191784/haskell-random-cannot-construct-the-infinite-type-a1-io-a1)，并认为这个算法不是最优的。例如，'f 20 100' 返回类似 [85,14,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0]; 结果，我经常得到一个长的零尾。

好吧，我认为这是一项有趣的任务，并决定创建自己的实现 :)

我决定按随机比例划分数字：

```
g 1 sum = return [sum]
g n sum = do
    prop <- randomRIO(0.0, 1.0)
    k1 <- g (round prop * n) (round( prop * sum))
    k2 <- g (n - (round prop * n)) (sum - (round prop * sum))
    return k1 ++ k2 
```

但我的代码不起作用：

```
 Couldn't match expected type `IO [a0]' with actual type `[a1]'
    In the expression: return k1 ++ k2
    In the expression:
      do { prop <- randomRIO (0.0, 1.0);
           k1 <- g (round prop * n) (round (prop * sum));
           k2 <- g (n - (round prop * n)) (sum - (round prop * sum));
             return k1 ++ k2 }
    In an equation for `g':
        g n sum
          = do { prop <- randomRIO (0.0, 1.0);
                 k1 <- g (round prop * n) (round (prop * sum));

                 k2 <- g (n - (round prop * n)) (sum - (round prop * sum));
                 .... } 
```

如我所见，我无法连接 IO 列表。我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T10:41:41.647

你问的类型错误是由你应该写的事实引起的

```
return (k1 ++ k2) 
```

而不是

```
return k1 ++ k2 
```

请注意，这`return`只是 Haskell 中的一个函数，并且函数应用程序的绑定比任何其他中缀运算符都强，因此您的代码读取 Haskell 就像您编写的一样

```
(return k1) ++ k2 
```

但是请注意，您的代码还有其他问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:17:36.020

首先让我们为以后做一些导入：

```
import Control.Applicative
import Control.Monad
import System.Random
import Data.List hiding (partition) 
```

* * *

## 代码修复

永远记住函数应用比中缀运算符具有更高的优先级：`return k1 ++ k2`手段`(return k1) ++ k2`和`round prop * n`手段`(round prop) * n`。您可以使用`$`将函数与您应用它的表达式分开，因为它的`f $ x = f x`优先`$`级非常低。例如，您可以使用`return $ k1 ++ k2`。

在相乘之前，您将 Ints 和 Doubles 混合了一些`(round prop * n)`比例，但您想先相乘，因此您需要`fromIntegral`申请`n`. 我为此做了一个单独的功能

```
(.*) :: Double -> Int -> Int
d .* i = floor $ d * fromIntegral i 
```

所以现在`(round prop * n)`你可以使用`(prop .* n)`. 它稍微清理了代码，这意味着如果它是错误的，我们可以在一个函数中修复它，而不是到处修复。

我提供了一个类型签名以使错误消息更具信息性，并且还提供了第二种基本情况 - 它没有终止，因为有时舍入会导致它要求长度为 0 的列表。

```
partition1 :: Int -> Int -> IO [Int]
partition1 0 total = return []
partition1 1 total = return [total]
partition1 n total = do
    prop <- randomRIO(0.0, 1.0)
    k1 <- partition1 (prop .* n) (prop .* total)
    k2 <- partition1 (n - (prop .* n)) (total - (prop .* total))
    return $ k1 ++ k2 
```

我还冒昧地给它起了一个更具描述性的名字。

## 获得正确的总数

不幸的是，这可以编译，但正如 Will Ness 在评论中指出的那样，存在一个小故障：它通常给你的数字总小于总数。事实证明，这是因为您将调用`partition 0 n`non-zero `n`，要求长度为 0 的列表总和为非零。哎呀。

您的算法背后的想法是随机拆分列表和总数，但保持两者的比例相同，以防止分布偏向一边（原始问题中的问题）。

让我们使用这个想法，但要防止它要求长度为零 - 我们需要 prop 既不是 0 也不是 1。

```
partition2 :: Int -> Int -> IO [Int]
partition2 0 total = return []
partition2 1 total = return [total]
partition2 n total = do
    new_n <- randomRIO(1,n-1)
    let prop = fromIntegral new_n / fromIntegral n
    k1 <- partition2 new_n (prop .* total)
    k2 <- partition2 (n - new_n) (total - (prop .* total))
    return $ k1 ++ k2 
```

现在它永远不会给我们错误的总数。万岁！

## 随机不等于公平

但是哎呀：`partition2 18 10000`给了我们

```
[555,555,555,555,556,556,555,556,556,556,555,555,556,556,555,556,556,556] 
```

问题是公平与随机不同。这个算法很公平，但不是很随机。让我们让它与长度分开选择比例：

```
partition3 :: Int -> Int -> IO [Int]
partition3 0 total = return []
partition3 1 total = return [total]
partition3 n total = do
    new_n   <- randomRIO(1,n-1)
    new_total <- randomRIO(0,total)  -- it's fine to have zeros.
    k1 <- partition3 new_n new_total
    k2 <- partition3 (n - new_n) (total - new_total)
    return $ k1 ++ k2 
```

看起来更好：`partition3 15 20000`给了我

```
[1134,123,317,725,1031,3897,8089,2111,164,911,25,0,126,938,409] 
```

## 随机不公平，但也没有偏见

这显然要好得多，但本质上我们正在做的二进制分区是引入偏差。

您可以通过查看来测试很多运行

```
check :: (Int -> Int -> IO [Int]) -> Int -> Int -> Int -> IO ()
check f n total times = mapM_ print =<< map average.transpose.map (righttotal total) <$> replicateM times (f n total)
   where average xs = fromIntegral (sum xs)/fromIntegral total

righttotal tot xs | sum xs == tot = xs
                  | otherwise = error $ "wrong total: " ++ show (sum xs) 
```

这一次`check partition3 11 10000 1000`给了我

```
180.7627
 97.6642
 79.7251
 66.9267
 64.5253
 59.4046
 56.9186
 66.6599
 70.6639
 88.9945
167.7545 
```

`n`没有进入大量的测试数据和分析，虽然很有趣，当不是 的一个因素时，有一个不成比例的 0 `total`，并且分布不均匀，它是杯形的 - 算法最终在一端塞满数据.

## 出路

与其一点一点地选择子列表中的数量，让我们生成一个小计将同时结束的所有位置。当然其中一个必须是总数，我们最好在生成它们后对其进行排序。

```
stopgaps :: Int -> Int -> IO [Int]
stopgaps parts total = sort.(total:) <$> replicateM (parts-1) (randomRIO (0,total)) 
```

这里我`replicateM :: Int -> m a -> m [a]`用来生成`parts-1`正确范围内的随机数。

我想插入一个无名英雄：

```
mapAccumL :: (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y]) 
```

用于沿列表累积，生成新列表。

```
gapsToLengths :: [Int] -> (Int,[Int])
gapsToLengths = mapAccumL between 0
   where between previous new = (new,new - previous)

partition4 :: Int -> Int -> IO [Int]
partition4 parts total = snd.gapsToLengths <$> stopgaps parts total 
```

## 它有效吗？

一些测试运行`partition4 11 10000`，漂亮的打印：

```
[ 786,   20,  607,  677, 1244, 1137,  990,   50, 1716,  813, 1960]
[ 406,  110, 2556,  126, 1289,  567,  348, 1230,  171,  613, 2584]
[ 368, 1794,  136, 1266,  583,   93, 1514,   66, 1594, 1685,  901]
[ 657, 1296, 1754,  411,  691, 1865,  531,  270, 1941,  286,  298]
[2905,  313,  842,  796,  698, 1104,   82, 1475,   22,  619, 1144]
[1411,  966,  530,  129,   81,  561, 1779, 1179,  301,  607, 2456]
[1143,  409,  903,   27,  855,  354,  887, 1898, 1880,  301, 1343]
[ 260,  643,   96,  323,  142,   74,  401,  977, 3685, 2690,  709]
[1350,  979,  377,  765,  137, 1295,  615,  592, 2099, 1088,  703]
[2411,  958,  330, 1433, 1355,  680, 1075,   41,  988,   81,  648] 
```

这看起来很随意。让我们检查一下没有偏见：

```
check partition4 11 10000 1000
92.6425
93.4513
92.3544
90.8508
88.0297
91.7731
88.7939
86.5268
86.3502
95.2499
93.9774 
```

终于！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:43:53.270

这是我使用的模块的一部分，用于简化 QuickCheck 的使用。代码中有趣的部分是由无与伦比的[Brent Yorgey](http://www.cis.upenn.edu/~byorgey/)编写的，并使用我上面评论中链接的博客文章中描述的二项式数字系统。该`pickDistribution`函数是一些示例粘合代码，用于生成具有特定权重的非负数列表（您可以使用[调整大小](http://hackage.haskell.org/packages/archive/QuickCheck/2.5.1.1/doc/html/Test-QuickCheck.html#v%3aresize)来选择特定权重）。

```
{-# LANGUAGE MultiParamTypeClasses #-}
module QuickCheckUtils where

import Control.Monad.Reader
import Test.QuickCheck
import Test.QuickCheck.Gen

instance MonadReader Int Gen where
    ask = MkGen (\r n -> n)
    local f (MkGen g) = MkGen (\r -> g r . f)

-- pickDistribution n chooses uniformly at random from all lists of length n of
-- non-negative numbers that sum to the current weight
pickDistribution :: Int -> Gen [Int]
pickDistribution n = do
    m <- ask
    let j = fromIntegral (m+n-1)
        k = fromIntegral (n-1)
    i <- choose (1, binom j k)
    return . map fromIntegral . combToComposition $ toComb j k (i-1)

-- code from Brent {{{
-- Comb n cs represents a choice cs of distinct numbers between 0 and
-- (n-1) inclusive.
data Comb = Comb Integer [Integer] deriving Show
type Comp = [Integer]

-- Convert a choice of (n-1) out of (m+n-1) things into a composition
-- of m, that is, an ordered list of natural numbers with sum m.
combToComposition :: Comb -> Comp
combToComposition (Comb n cs) = map pred $ zipWith (-) cs' (tail cs')
    where cs' = [n] ++ cs ++ [-1]

-- Convert a number into "base binomial", i.e. generate the
-- ith combination in lexicographical order.  See TAOCP 7.2.1.3, Theorem L.
toComb :: Integer -- ^ Total number of things
       -> Integer -- ^ Number to select
       -> Integer -- ^ Index into the lexicographic ordering of combinations
       -> Comb    -- ^ Corresponding combination
toComb n k i = Comb n (toComb' k i (n-1) (binom (n-1) k))

binom _ 0 = 1
binom 0 _ = 0
binom n k = binom (n-1) (k-1) * n `div` k

toComb' 0 _ _ _ = []
toComb' k i j jCk
    | jCk > i   =     toComb' k     i         (j-1) (jCk * (j-k) `div` j)
    | otherwise = j : toComb' (k-1) (i - jCk) (j-1) (jCk *     k `div` j)
-- }}} 
```

# c# - 在 Windows Mobile 中读取和写入文件中的所有字节

> ID：13193348
> 
> 赞同：1
> 
> 时间：2012-11-02T10:23:16.023
> 
> 标签：c#, file, windows-mobile, windows-mobile-6

我需要读取文件的所有字节并将这个字节数组写入另一个文件。即我需要Windows Mobile 6.1中[File.ReadAllBytes](http://msdn.microsoft.com/en-gb/library/system.io.file.readallbytes%28v=vs.90%29.aspx)和[File.WriteAllBytes的相同行为。](http://msdn.microsoft.com/en-gb/library/system.io.file.writeallbytes%28v=vs.90%29.aspx)

完成这项工作的最快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:26:53.510

你真的需要整个文件在内存中吗？如果没有，我会使用类似的东西：

```
public static void CopyStream(Stream input, Stream output)
{
    byte[] buffer = new byte[32 * 1024]; // Or whatever size you want
    int read;
    while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write(buffer, 0, read);
    }
} 
```

然后相应地打开每个文件：

```
using (Stream input = File.OpenRead(...), output = File.OpenWrite(...))
{
    CopyStream(input, output);
} 
```

# django - 按函数名称的 Django 反向基于类的视图不起作用

> ID：13193350
> 
> 赞同：7
> 
> 时间：2012-11-02T10:23:22.140
> 
> 标签：django, django-class-based-views

根据 django 文档，viewname 是函数名称或 url 模式名称。但是反转这样的 url 'reverse(MyView.as_view())' 会变成 NoReverseMatch 异常。有没有办法通过函数名来反转基于类的视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T10:30:31.957

您可以使用[命名的 url 模式](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)，也可以执行以下操作（在您的`views.py`）

```
my_function = MyView.as_view() 
```

现在反向将起作用：`reverse('myviews.my_function')`

# c++ - C++；MPI：通过 MPI 发送带有向量向量的结构

> ID：13193353
> 
> 赞同：1
> 
> 时间：2012-11-02T10:23:30.453
> 
> 标签：c++, vector, struct, mpi

我正在尝试通过 MPI 发送此结构，但我不知道这是否正确。

```
struct Node {
int sum_node;
int depth_node;
vector<vector<int> > subset;
vector<int> sum_subset;
vector<int> depth_subset;
}; 
```

像这样发送：

```
Node zz = stack.back();
stack.pop_back();
MPI_Send(&zz, sizeof(struct Node), MPI_BYTE, 1, MSG_WORK_SENT, MPI_COMM_WORLD); 
```

像这样接收：

```
Node gg;
MPI_Recv(&gg, sizeof(struct Node), MPI_BYTE, status.MPI_SOURCE, MSG_WORK_SENT, MPI_COMM_WORLD, &status);
stack.push_back(gg); 
```

程序因分段错误而终止。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:28:52.747

您正在通过不正确的 MPI 发送非 POD 数据。您需要在发送/接收工作期间序列化/反序列化整个节点。

例如，如果我有一个节点，并且它的 sum_subset 中有 1000 个元素，那么现在您只需发送 sizeof(Node) ：

```
 Node d;
  for(int i=0;i<1000;i++)
  {
    d.sum_subset.push_back(1);
  }
  cout << sizeof(Node) << endl; 
```

结帐[http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)了解更多信息

# javascript - extjs中的级联组合框

> ID：13193361
> 
> 赞同：1
> 
> 时间：2012-11-02T10:23:58.823
> 
> 标签：javascript, spring, hibernate, extjs

我想在 extjs 中做级联组合框。我必须组合框

**课程组合框**

```
{ 
    xtype : 'combobox',  
    emptyText : 'Course',  
    id:'combo-course',  
    displayField : 'name',  
    valueField : 'id',  
    store:coursestore,  
    forceSelection: true,  
    triggerAction:'all',  
    queryMode: 'remote',  
    listeners: {  
        'select': {  
            fn:function(combo, value) {  
                var comboModule = Ext.getCmp('combo-module');  
                comboModule .setDisabled(true);
        comboModule .clearValue('');
        comboModule .getStore().removeAll();
        comboModule .getStore().load({
        params: {courseId: combo.getValue()}
         });
                comboModule .setDisabled(false);  
            }  
        }  
    }  
} 
```

**课程模块：**

```
{
    xtype : 'combobox',  
    emptyText : 'Module',  
    id:'combo-module',  
    displayField : 'name',  
    valueField : 'id',  
    disabled:true,  
    remoteFilter:true,  
    store:coursemodulestore,  
    forceSelection: true,  
    queryMode: 'remote',  
    triggerAction:'all'
} 
```

**休息服务**

```
 @Path("/coursemodule/{courseId}")
    public List<CourseModule> getAllCourseModules(@PathParam("courseId")String courseId ) {
        try {           
            return courseObj.getModulesForCourse(courseId);
                } catch (HibernateException e) {
            logger.debug(e.getMessage());
        }
        return null;
    } 
```

当我运行应用程序并选择第一个组合框时，它仅在第一次在第二个组合框中显示正确的值；
但是当我第二次选择组合框时，它不会在第二个组合框中显示值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:18:33.933

您似乎想清除已应用的过滤器。要删除已应用的过滤器，商店中有一个 clearFilter() 方法。您可以将其混合到您的代码中，类似于：

```
comboModule.clearValue();  
// new line to clear any filter applied to the store
comboModule.getStore().clearFilter(true);  
comboModule.getStore().filter('courseId',combo.getValue()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:34:53.433

您的问题很可能是 store.load() 是异步的。尝试在负载回调中传递其余的逻辑（过滤等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:59:31.880

它是否在您第二次加载时显示 LoadMask？

使用它来覆盖该行为：

```
Ext.override(Ext.LoadMask, {
    onHide: function() {
    this.callParent();
  }
}); 
```

# gtk - Gtk.Scale 值改变信号与拖动端？

> ID：13193365
> 
> 赞同：4
> 
> 时间：2012-11-02T10:24:07.407
> 
> 标签：gtk

简短的问题：小部件**是否`Gtk.Scale`有`drag-end`信号而不是`value-changed`？**

我正在使用 gtk scale 小部件（滑块），根据[文档](http://developer.gnome.org/gtk/stable/GtkRange.html#GtkRange-value-changed)，我应该使用`value-changed`信号来检测用户何时更改滑块。

现在用户抓住滑块并将其拖动到所需的值。当他们**完成**选择所需的值（即完成拖动）后，我想做一些事情。

但是，*每次*值更改时`value-changed`都会发出信号，*包括*在用户仍在将滑块拖动到所需值的过程中，因此我为起始值和结束值之间的*每个值获取这些信号之一。*

 ***这给我的程序带来了很大的延迟，而且都是不必要的。

那么 - 有没有一种方法可以监听用户*完成*更改滑块上的值时触发的信号，而不是每次值更改时触发的信号？

目前，我通过在执行我的代码之前等待一小段时间来限制调用，只响应`value-changed`我在那段时间收到的最后一个信号。这工作正常，但我只是想知道是否有更合适的信号我应该听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:28:00.403

检查`gtk_range_set_update_policy()`功能。您要将策略设置为`GTK_UPDATE_DISCONTINUOUS`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-10T21:34:26.910

您可以改用[`change-value`](https://developer.gnome.org/gtk2/2.24/GtkRange.html#GtkRange-change-value)信号。第二个论点是`Gtk.ScrollType`。将其与`Gtk.ScrollType.JUMP`应该产生所需的结果进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:57:43.360

没有公共 API 可以做到这一点。我认为你的方法很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-11T21:42:54.033

在 GTK+3 中（至少），`Scale`继承自`Widget`，它发出`button-release-event`信号。***

# extjs - 校验列ext js

> ID：13193367
> 
> 赞同：0
> 
> 时间：2012-11-02T10:24:15.570
> 
> 标签：extjs

我有一个字段集，其中包含一个具有 3 个检查列的网格：领导者、成员和查看者。如果用户点击Leader 复选框中的复选框，则Member 和Viewer 复选框中的相应复选框应该被禁用（即用户不应该能够点击这些复选框）。如果用户单击“成员”或“查看者”检查列中的复选框，情况也是如此；其他复选框不应该是可点击的。任何想法如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:07:43.510

我能够使用record.set 解决这个问题。我的代码如下：

```
Ext.Loader.setConfig({enabled: true, paths:{'Ext.ux': 'ext/js/ux'}});

    Ext.require([
        'Ext.grid.*',
        'Ext.data.*',
        'Ext.ux.grid.HeaderToolTip',
        'Ext.ux.CheckColumn'
    ]);

    Ext.onReady(function () {

    Ext.tip.QuickTipManager.init();

    var teststore = Ext.create('Ext.data.ArrayStore', {
        fields: [
           {name: 'UserID', type: 'asUCString'},
           {name: 'Name', type: 'asUCString'},
           {name: 'Role', type: 'asUCString'},
           {name: 'Leader', type: 'bool'},
           {name: 'Member', type: 'bool'},
           {name: 'Viewer', type: 'bool'}
        ],
        data: [
            ['1', 'Hans Hansel', 'Customer/Freelancer', false, false, false],
            ['2', 'Doreen Duck', 'Consultant', false, false, false],
            ['3', 'Gerald Goose', 'Client', false, false, false],
            ['4', 'Frederic Fitzgerald', 'Super User IT', false, false, false],
            ['5', 'Aimee Anselm', 'Administrator', false, false, false]
        ]
    });

    var grid = Ext.create('Ext.grid.Panel', {
        id: 'setPermissionsGrid',
        title: '',
        store: teststore, //Ext.data.StoreManager.lookup('simpsonsStore'),
        plugins: ['headertooltip'],
        //selType: 'checkboxmodel',
        columns: [
            { text: 'Name',  dataIndex: 'Name', width: 120},
            { text: 'Role',  dataIndex: 'Role', width: 125},
            { text: 'Leader', dataIndex: 'Leader', xtype: 'checkcolumn', listeners: {'checkchange' : function(column, recordIndex, checked) {var record = teststore.getAt(recordIndex); record.set('Member', false); record.set('Viewer', false); }},width: 68, tooltip: '<b>Team Leader Rights:</b> '},
            { text: 'Member', dataIndex: 'Member', xtype: 'checkcolumn', listeners: {'checkchange' : function(column, recordIndex, checked) {var record = teststore.getAt(recordIndex); record.set('Leader', false); record.set('Viewer', false); }},width: 68, tooltip: '<b>Team Member Rights:</b> '},
            { text: 'Viewer', dataIndex: 'Viewer', xtype: 'checkcolumn', listeners: {'checkchange' : function(column, recordIndex, checked) {var record = teststore.getAt(recordIndex); record.set('Leader', false); record.set('Member', false); }},width: 68, tooltip: '<b>Team Viewer Rights:</b> '}

        ],
        height: 219,
        width: 450,
        renderTo: Ext.getBody() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:26:50.693

RadioGroup 是不可行的，因为应用程序需要允许用户检查多个复选框（在检查列中）。我已经部分解决了这个问题：现在，如果我单击领导者检查列中的任何复选框，然后单击查看器或成员检查列中的复选框，领导者检查列中的勾号就会消失。唯一的问题是，当前如果用户单击 Member 或 Viewer 复选框中的 ANY 复选框，那么 Leader 复选框中的任何选中的复选框都将变为未选中状态。但是，我只想取消选中对应的复选框（即同一行中的复选框）。这是检查列的代码，包含检查列的网格和存储：

```
<html>

<head>
    <link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="ext/js/ux/css/CheckHeader.css" /> 
    <script type="text/javascript" src="ext/js/bootstrap.js"></script>
</head>

<body>

    <script type="text/javascript">
    Ext.Loader.setConfig({enabled: true, paths:{'Ext.ux': 'ext/js/ux'}});

    //Ext.Loader.setPath('Ext.ux', 'ext/js/ux');

    Ext.require([
        'Ext.grid.*',
        'Ext.data.*',
        'Ext.ux.grid.HeaderToolTip',
        'Ext.ux.CheckColumn'
    ]);

    Ext.onReady(function () {

    Ext.tip.QuickTipManager.init();

    var teststore = Ext.create('Ext.data.ArrayStore', {
        fields: [
           {name: 'UserID', type: 'asUCString'},
           {name: 'Name', type: 'asUCString'},
           {name: 'Role', type: 'asUCString'},
           {name: 'Leader', type: 'bool'},
           {name: 'Member', type: 'bool'},
           {name: 'Viewer', type: 'bool'}
        ],
        data: [
            ['1', 'Hans Hansel', 'Customer/Freelancer', false, false, false],
            ['2', 'Doreen Duck', 'Consultant', false, false, false],
            ['3', 'Gerald Goose', 'Client', false, false, false],
            ['4', 'Frederic Fitzgerald', 'Super User IT', false, false, false],
            ['5', 'Aimee Anselm', 'Administrator', false, false, false]
        ]
    });

var grid = Ext.create('Ext.grid.Panel', {
    id: 'setPermissionsGrid',
    title: '',
        store: teststore,
        plugins: ['headertooltip'],
        columns: [
            { text: 'Name',  dataIndex: 'Name', width: 120},
            { text: 'Role',  dataIndex: 'Role', width: 125},
            { text: 'Leader', dataIndex: 'Leader', xtype: 'checkcolumn', listeners: {'checkchange' : function() {for (var i in teststore.data.items) {teststore.data.items[i].set('Member', false); teststore.data.items[i].set('Viewer', false);}} },width: 68, tooltip: 'Leader'},
            { text: 'Member', dataIndex: 'Member', xtype: 'checkcolumn', listeners: {'checkchange' : function() {for (var i in teststore.data.items) {teststore.data.items[i].set('Leader', false); teststore.data.items[i].set('Viewer', false);}} },width: 68, tooltip: 'Member'},
            { text: 'Viewer', dataIndex: 'Viewer', xtype: 'checkcolumn', listeners: {'checkchange' : function() {for (var i in teststore.data.items) {teststore.data.items[i].set('Leader', false); teststore.data.items[i].set('Member', false);}} },width: 68, tooltip: 'Viewer'}
        ],
        height: 219,
        width: 450,
        renderTo: Ext.getBody()
}); 
```

# javascript - AJAX 404 未找到错误

> ID：13193368
> 
> 赞同：0
> 
> 时间：2012-11-02T10:24:21.460
> 
> 标签：javascript, ajax, servlets, jboss

我在处理**JBOSS 4.0.2**时遇到了一些问题。

我想要做的是从 jsp 文件到存储在**`WEB-INF/classes/servlet here`**.

层次结构是这样的：

```
server/ABC/deploy/xyz.war/customform/form/a.jsp
server/ABC/deploy/xyz.war/WEB-INF/classes/abc.class 
```

**在web.xml**中手动添加

 **`<servlet><servlet-name>abc</servlet-name><servlet-class>abc</servlet-class></servlet>`

**……**

`<servlet-mapping><servlet-name>abc</servlet-name><url-pattern>/abc</url-pattern></servlet-mapping>`

AJAX 中的 URL 与**`<url-pattern>`**

**向 servlet 发送请求时，我得到 AJAX 状态“404”。**

另外，当我使用警报框显示状态时，它回答**“未指定错误”**，然后**status=404** for **readyState=2** , **readyState=3** , **readyState=4**

我不明白为什么它不能调用 servlet。

是否需要执行其他步骤来调用我缺少的那个 servlet，

**或者**

如果我哪里出错了，请指出错误。

如果有人发布对 servlet 的这种调用要完成的步骤，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:50:30.213

那么看来您的以下任一情况：编程错误，太糟糕了，它不显示行号或您的服务器软件需要更新。**

# javascript - JavaScript jQuery 查找值 SyntaxError: missing : after property id

> ID：13193370
> 
> 赞同：0
> 
> 时间：2012-11-02T10:24:43.723
> 
> 标签：javascript, jquery, forms, find

我在`Error: SyntaxError: missing : after property id`下面的这一行收到错误，我无法弄清楚原因。

我有一个 ID 为 的表单`dform`，我有一个名称为 的单选按钮，`del_standard_use_b_as_s`我想获取它的值。

```
var std_address_copy = $('#dform').find('input[name=del_standard_use_b_as_s]').val(); 
```

我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:46:58.113

如果上一行是

```
$('#dform).validate({ 
```

那么我猜问题来自于 validate 应该传递选项的事实

从文档（[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)）中，假设您的代码是 submitHandler 的一部分，例如：

```
$(".selector").validate({
   submitHandler: function(form) {
         var std_address_copy = $('#dform').find('input[name=del_standard_use_b_as_s]').val();
    ....
   }
}) 
```

希望这会有所帮助

# c# - Outlook Mapi 访问共享联系人

> ID：13193374
> 
> 赞同：8
> 
> 时间：2012-11-02T10:24:53.923
> 
> 标签：c#, outlook, shared, mapi

我想通过 Mapi 从 Outllok 导入联系人。标准接触第一步没问题：

```
MAPIFolder contactObjects = 
outlookObj.Session.GetDefaultFolder(OlDefaultFolders.olFolderContacts);
foreach (ContactItem contactObject in contactObjects.Items) {
    ... import contact ...
} 
```

在第二步中，我还想导入共享联系人。我发现的唯一一件事是使用

```
OpenSharedItem(sharedContacts.vcf) 
```

但我不知道要打开的文件（共享项目）的名称。有人知道如何访问共享联系人并可以帮助我吗？

托比

* * *

更新：

感谢 vcf 文件的提示。但是我在哪里可以找到它们？

* * *

更新2：

我玩过 OutlookSpy。我可以通过共享联系人访问文件夹，但只能通过知道 id（这对于其他用户来说当然不同）：

```
var ns = outlookObj.GetNamespace("MAPI");
var flr = ns.GetFolderFromID("00000000176A90DED92CE6439C1CB89AFE3668F90100D1AD8F66B576B54FB731302D9BB9F6C40007E4BAC5020000");

foreach (var contactObject in flr.Items) {
       ...
} 
```

如何在不知道 ID 的情况下访问文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:43:50.433

您将需要显式解析 vCard 文件，或者您可以使用 Redemption - 它允许使用[RDOContactItem](http://www.dimastr.com/redemption/RDOContactItem.htm)导入 vCard 文件。`Import`- [http://www.dimastr.com/redemption/RDOMail.htm#methods](http://www.dimastr.com/redemption/RDOMail.htm#methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:40:17.367

好吧，标题中提出的问题的解决方案几乎很简单。你只需要打电话：

```
Recipient recip = Application.Session.CreateRecipient("Firstname Lastname");
MAPIFolder sharedContactFolder = Application.Session.GetSharedDefaultFolder(recip, OlDefaultFolders.olFolderContacts); 
```

因为这不能解决我的问题，所以我会问[另一个问题](https://stackoverflow.com/questions/13526329/how-to-query-users-recipients-sharing-contacts-with-current-outlook-user)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:43:56.033

我已经做了一些编程来获得与 Outlook 的联系。我给你一些示例代码来帮助你解决这个问题..这并不是你想要的，但我认为这会帮助你解决你的问题......

```
 using System.Collections.Generic; 

// ... 

private List<Outlook.ContactItem> GetListOfContacts(Outlook._Application OutlookApp) 

    { 
    List<Outlook.ContactItem> contItemLst = null; 
    Outlook.Items folderItems =null; 
    Outlook.MAPIFolder mapiFoldSuggestedConts = null; 
    Outlook.NameSpace nameSpc = null; 
    Outlook.MAPIFolder mapiFoldrConts = null; 
    object itemObj = null; 

    try 
    { 

        contItemLst = new List<Outlook.ContactItem>(); 
        nameSpc = OutlookApp.GetNamespace("MAPI"); 
        // getting items from the Contacts folder in Outlook 
        mapiFoldrConts = 
             nameSpc.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderContacts); 

        folderItems = mapiFoldrConts.Items; 
        for (int i = 1; folderItems.Count >= i; i++) 
        { 

            itemObj = folderItems[i]; 
            if (itemObj is Outlook.ContactItem) 
                contItemLst.Add(itemObj as Outlook.ContactItem); 
            else 
                Marshal.ReleaseComObject(itemObj); 
        } 

        Marshal.ReleaseComObject(folderItems); 
        folderItems = null; 
        // getting items from the Suggested Contacts folder in Outlook 
        mapiFoldSuggestedConts = nameSpc.GetDefaultFolder( 

             Outlook.OlDefaultFolders.olFolderSuggestedContacts); 

        folderItems = mapiFoldSuggestedConts.Items; 

        for (int i = 1; folderItems.Count >= i; i++) 
        { 

            itemObj = folderItems[i]; 
            if (itemObj is Outlook.ContactItem) 
                contItemLst.Add(itemObj as Outlook.ContactItem); 

            else 
                Marshal.ReleaseComObject(itemObj); 
        } 
    } 

    catch (Exception ex) 
    { 
        System.Windows.Forms.MessageBox.Show(ex.Message); 
    } 

    finally 
    { 

        if (folderItems != null) 
            Marshal.ReleaseComObject(folderItems); 
        if (mapiFoldrConts != null) 
            Marshal.ReleaseComObject(mapiFoldrConts); 
        if (mapiFoldSuggestedConts != null) 
            Marshal.ReleaseComObject(mapiFoldSuggestedConts); 
        if (nameSpc != null) Marshal.ReleaseComObject(nameSpc); 
    } 

    return contItemLst; 

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T08:43:10.617

```
 var outlook = new Microsoft.Office.Interop.Outlook.Application();
                NameSpace mapiNamespace = outlook.Application.GetNamespace("MAPI");

                foreach (Store store in mapiNamespace.Stores)
                {
                    try
                    {
                        var folder = store.GetRootFolder();

                        foreach(MAPIFolder subfolder in folder.Folders)
                        {
                            if ( subfolder.Name == "Inbox")
                            {
                                foreach(dynamic message in subfolder.Items.Restrict("[MessageClass]='IPM.Sharing'"))
                                {
                                        if (message.Class == 104)//SharingItem
                                        {
                                            Folder sharedFolder = message.OpenSharedFolder();
                                            if (sharedFolder.DefaultMessageClass == "IPM.Contact")
                                            {
                                               //this is your folder
                                            }
                                        }
                                }
                            }
                        }
                    }
                    catch (System.Exception ex)
                    {
                        continue;
                    }
                } 
```

# perl - 输出不正确，缺少逗号后的数据

> ID：13193375
> 
> 赞同：0
> 
> 时间：2012-11-02T10:24:54.130
> 
> 标签：perl

下面是我为比较两个文件而编写的代码。基本上，该程序正在尝试获取昨天报告中存在但今天报告文件中不存在的那些记录。

**例子**

**文件1.txt**

```
1111,1
2222,2
3333,3
4444,4 
```

**文件2.txt**

```
1111,1
5555,5
6666,6
3333,3
7777,7 
```

**跑**

```
perl program.plx File1.txt File2.txt 
```

**输出应该是**

```
2222,2
4444,4 
```

**但我越来越**

```
2222
4444 
```

即我缺少逗号后的数据。我认为正则表达式部分存在一些问题。请让我知道我在哪里做错了。谢谢 ：）

```
 code deleted due to privacy reasons. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:37:35.593

嗯，但是您的提取器只返回逗号之前的部分：

```
my $extractor = sub { ( $_[0] =~ /^(.+?)\,\w/ )[0] }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:40:08.660

原因在这里：

```
$_[0] =~ /^(.+?)\,\w/ )[0] 
```

您的正则表达式仅返回逗号之前的部分。但是，扩展捕获并不能解决问题：

```
$_[0] =~ /^(.+?\,\w)/ )[0] 
```

新的正则表达式将匹配整个字符串，但数字比较会报错：

```
Argument "1111,1" isn't numeric in numeric eq (==) at 
```

更改`==`为`eq`for 字符串比较会消除警告，但不清楚是否要比较整个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:28:27.947

使用通讯命令：

```
$ comm -23 <(sort -n file1) <(sort -n file2)
2222,2
4444,4 
```

# netbeans - 如何将方法名称打印到 NetBeans 调试器控制台？

> ID：13193377
> 
> 赞同：0
> 
> 时间：2012-11-02T10:24:59.387
> 
> 标签：netbeans

[[这是@MatthewD 的问题“我如何写入 Netbeans 调试器控制台（Java 中）？”](https://stackoverflow.com/questions/5361024/how-do-i-write-to-the-netbeans-debugger-console-in-java)的后续问题。]

`{lineNumber}`对于 NetBeans 断点，可以分别使用`{className}`和打印行号、类名和线程名`{threadName}`。方法名称是否也有类似的表达式？

我没有成功地测试`{method}`和`{methodName}`搜索过[NetBeans JPDA API](http://bits.netbeans.org/6.9/javadoc/org-netbeans-api-debugger-jpda/%20NB%20JPDA%20API)和[NetBeans Wiki](http://wiki.netbeans.org "注意维基")，但什么也没找到。我宁愿写`{methodName}`断点的属性而不是名称本身，不能复制粘贴或用作模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:07:07.073

`{methodName}`在 Netbeans 7.0.1 上对我来说很好。

我发现的关于这些关键字的唯一参考是[在 bug 票证中](http://netbeans.org/bugzilla/show_bug.cgi?format=multiple&id=58800)：

完整列表是：

```
{threadName}
{className}
{methodName}
{lineNumber}
{=EXPRESSION} 
```

# tomcat - 为不同的容器构建不同的 Maven 工件

> ID：13193385
> 
> 赞同：1
> 
> 时间：2012-11-02T10:25:41.787
> 
> 标签：tomcat, maven, glassfish-3

我想创建一个在 Tomcat 和完整的 Java EE 服务器上运行的项目（多模块）。由于 tomcat 缺少几个库，因此我需要将它们包含在 Tomcat 中，但是完整的 Java EE 容器具有这些库，如果我仍然包含它们，甚至可能会产生冲突。

我想将我所有的 html 文件放在一个地方（可能是 Java EE 容器 WAR 项目），然后有另一个模块来构建相同的战争，但在 WAR 文件中添加了依赖项。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:48:00.567

您可以为此使用[WAR 覆盖](https://maven.apache.org/plugins/maven-war-plugin/overlays.html)。使用这种方法，您可以拥有一个包含所有共享内容的 WAR 模块 - 库、资源等。然后创建另一个模块（或多个模块，例如为每个容器）并添加 WAR 类型的依赖项 - 如下所示：

```
<dependency>
    <groupId>com.example.app</groupId>
    <artifactId>my-war-base</artifact>
    <version>1-SNAPSHOT</version>
    <type>war</type>
</dependency> 
```

只需添加这个（到 WAR 项目！）确保 WAR 被合并（=覆盖）。您甚至可以从基础战争中排除某些部分，例如，如果您有许多容器所需的一些资源/库，但在单个容器中存在问题。

可以进行更多调整 -[请参阅文档](https://maven.apache.org/plugins/maven-war-plugin/overlays.html)。

顺便说一句，这种方法允许您：

*   一次为所有容器构建
*   拥有一致的构建输出（相同的战争 => 相同的目的）

# magento - 在 Magento 1.6.1.0 中选择销售>订单中的所有功能

> ID：13193386
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:25:44.597
> 
> 标签：magento, configuration

我最近从 1.3 升级到 Magento 1.6.1.0 并且刚刚注意到订单屏幕中不再有全选功能只需选择可见，有谁知道是否有设置可以打开和关闭它我看过到处都找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:33:05.720

首先，magento 的最新稳定版本已经在 1.7 中，所以请升级到那个版本，因为它有几个重要的错误/安全修复

对于全选选项，您必须在模块或本地代码中覆盖 Mage_Adminhtml_Block_Sales_Order_Grid 类。

在 _prepareMassaction() 方法中有一行：

```
$this->getMassactionBlock()->setUseSelectAll(false); 
```

将此设置为true，您就可以全选。

# jquery - 选项卡中的 jQuery 验证仅适用于第一次提交

> ID：13193387
> 
> 赞同：2
> 
> 时间：2012-11-02T10:25:49.813
> 
> 标签：jquery, jquery-validate, jquery-tabs

我正在尝试解决我需要隐藏在选项卡后面的表单字段的问题。

我已经设法让这一半工作，因此当您单击提交按钮任何必填+隐藏字段时，它将自动显示此选项卡。

但问题是当您： 1\. 加载页面，单击提交，这工作正常。2.回到第一个选项卡，再次点击提交，没有任何反应。

[http://jsfiddle.net/3xEch/](http://jsfiddle.net/3xEch/)

```
// Form validator
var theForms = $("form[method=post]:not(.noValidate)");
if (theForms.length){
    theForms.each(function(){
        var $dis = $(this);

        if($dis.hasClass("validateHidden")){
            jQuery.validator.setDefaults({
                ignore: ''
            });
        }

        validater = $dis.validate({
            errorPlacement: function(error, element) {
                var trigger = element.next('.ui-datepicker-trigger, .input-label');
                if(!trigger.length){ trigger = element.parent('label'); }
                var labelWidth = element.parent("p").not(".full").find("label").eq(0).width();
                error.insertAfter(trigger.length > 0 ? trigger : element)
                     .css("marginLeft", labelWidth);

                // Check if hidden inside tab
                if(element.parents(".tab").is(":hidden")){
                    var tabs = element.parents(".tabs");
                    tabs.find(".tab").hide();
                    var tab = $("#"+element.parents(".tab").attr("id"));
                    tab.show();
                    tabs.find(".tabmenu li").removeClass("selected");
                    tabs.find(".tabmenu li").eq(tab.index()-1).addClass("selected");
                }
            }
        });

        $('.tabs').bind('tabsselect', function(){
            validater.resetForm();
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:34:27.300

问题是由于`errorPlacement`每个经过验证的元素只调用一次。

看到这个问题：[jQuery Validation Plugin: Invoke errorPlacement function when onfocusout, keyup and click](https://stackoverflow.com/questions/2400607/jquery-validation-plugin-invoke-errorplacement-function-when-onfocusout-keyup)

他们建议使用该`showErrors`方法进行任何重复验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:01:08.637

而不是运行此代码`$(document).ready()`- 每当显示第一个选项卡时运行此代码？我猜测代码在第一次之后不起作用，因为事件绑定到 HTML 元素，当单击另一个选项卡时这些元素会被清除。

# php - Phpexcel 想要遍历不同的工作表并删除列中的“,”

> ID：13193388
> 
> 赞同：0
> 
> 时间：2012-11-02T10:25:50.553
> 
> 标签：php, loops, phpexcel

一直在尝试遍历 Excel 文档中的工作表。并删除列中的“，”。然后将结果保存在同一个excel文档中。

```
<?php     
include'../Classes/PHPExcel.php';
include'../Classes/PHPExcel/IOFactory.php';
$objReader = PHPExcel_IOFactory::createReader('Excel2007');  
$objReader->setReadDataOnly(false); 
//$xlsxfiles=$_SESSION['file'];  
//echo $xlsxfiles;   
$objPHPExcel = $objReader->load('../upload/Test_0.xlsx'); 
$num=$objPHPExcel->getSheetCount() ; 
$sheetnames=$objPHPExcel->getSheetNames() ;  
$objWorksheet = $objPHPExcel->getActiveSheet();  
$highestRow = $objWorksheet->getHighestRow();  
$sheetnum=$num-1;   

for($sl=0;$sl<$sheetnum;$sl++) {  
    for($cl=0;$cl<$highestRow;$cl++){ 
        $clean= $objPHPExcel->setActiveSheetIndex($sl) 
                   ->getCell('C'.$cl);  
        $cleandone=str_replace(',',' ',$clean); 
        $objWorksheet->setCellValue('C'.$cl,$cleandone); 

        $clcolvalD=$objWorksheet->getCell('D'.$cl);
        $clcolvalD=str_replace(',',' ',$clcolvalD);   
        $objWorksheet->setCellValue('D'.$cl,$clcolvalD);  

        $clcolvalE=$objWorksheet->getCell('E'.$cl);  
        $clcolvalE=str_replace(',',' ',$clcolvalE);  
        $objWorksheet->setCellValue('E'.$cl,$clcolvalE); 

        $clcolvalF=$objWorksheet->getCell('F'.$cl);  
        $clcolvalF=str_replace(',',' ',$clcolvalF); 
        $objWorksheet->setCellValue('F'.$cl,$clcolvalF); 

        $clcolvalG=$objWorksheet->getCell('G'.$cl); 
        $clcolvalG=str_replace(',',' ',$clcolvalG);    
        $objWorksheet->setCellValue('G'.$cl,$clcolvalG);

        $clcolvalH=$objWorksheet->getCell('H'.$cl); 
        $clcolvalH=str_replace(',',' ',$clcolvalH); 
        $objWorksheet->setCellValue('H'.$cl,$clcolvalH); 

        $clcolvalI=$objWorksheet->getCell('I'.$cl); 
        $clcolvalI=str_replace(',',' ',$clcolvalI);
        $objWorksheet->setCellValue('I'.$cl,$clcolvalI); 

        $clcolvalJ=$objWorksheet->getCell('J'.$cl);
        $clcolvalJ=str_replace(',',' ',$clcolvalJ); 
        $objWorksheet->setCellValue('J'.$cl,$clcolvalJ);  

        $clcolvalK=$objWorksheet->getCell('K'.$cl); 
        $clcolvalK=str_replace(',',' ',$clcolvalK); 
        $objWorksheet->setCellValue('K'.$cl,$clcolvalK);

        $clcolvalL=$objWorksheet->getCell('L'.$cl);
        $clcolvalL=str_replace(',',' ',$clcolvalL); 
        $objWorksheet->setCellValue('L'.$cl,$clcolvalL);   

        $clcolvalM=$objWorksheet->getCell('M'.$cl);   
        $clcolvalM=str_replace(',',' ',$clcolvalM);
        $objWorksheet->setCellValue('M'.$cl,$clcolvalM);

        $clcolvalN=$objWorksheet->getCell('N'.$cl);   
        $clcolvalN=str_replace(',',' ',$clcolvalN);   
        $objWorksheet->setCellValue('N'.$cl,$clcolvalN); 
    }  

} 
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('../upload/Test_0.xlsx');    
?> 
```

# java - 如何以编程方式设置 adUnitId？

> ID：13193389
> 
> 赞同：0
> 
> 时间：2012-11-02T10:25:50.697
> 
> 标签：java, android, eclipse, admob

如何以编程方式将 adUnitId (Admob) 添加到我的 android 应用程序 (eclipse)？我将通过网络收到此 ID！

```
AdView adView = (AdView)this.findViewById(R.id.adView);
AdRequest request = new AdRequest(); 
```

> *虚构：* request.SETadUnitId("ADUNITID");

```
adView.loadAd(request); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:10:03.810

好的，我删除了 XML 样式并以`AdView`编程方式定义了一个。

```
`AdView adView = new AdView(activity, adSize, "MY_AD_UNIT_ID")`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T09:56:04.210

先前的答案已过时。这个契约者已经不存在了。你应该使用：

```
AdView mAdViewTemp = new AdView(this);
mAdViewTemp.setAdUnitId(bannerUnit);
mAdViewTemp.setAdSize(AdSize.BANNER); 
```

# php - Jquery - 可能的变量点击

> ID：13193390
> 
> 赞同：2
> 
> 时间：2012-11-02T10:25:51.567
> 
> 标签：php, jquery

我正在使用 jquery.editinplace.js，这非常好，但问题是我在一个页面上有多个实例 - 因此需要以某种方式发送一个变量，以便它知道要在表中更新哪一行

ID可以是可变的吗？例如 #my_id123465, #my_id76543 然后我可以在后端 PHP 中去除 #my_id 并留下变量告诉我要更新哪一行

因此，该页面的示例 html 当前是：（将有多个）

```
<div id="my_notes" title="Click to edit">'.$item[comments].'</div> 
```

以及被触发的jquery：

```
$(document).ready(function(){

    $("#my_notes").editInPlace({
    saving_animation_color: "#ECF2F8",
    url: '/pages/includes/edit_in_place.php',
        });

}); 
```

我几乎希望代码类似于

```
$("#my_notes*").editInPlace({ // note the wildcard* 
```

但这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:29:34.913

尝试这样做：

```
$("div^='#my_notes'").editInPlace({ // etc 
```

看看这个文档：

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:36:44.247

未经测试，但可以这样工作。

**请注意，如果您有多个实例，我已将 id 更改为类标识符**

```
$(document).ready(function(){

    $(".notes").editInPlace({
    saving_animation_color: "#ECF2F8",
    url: function(item){
         var id = $(item).attr("id");
         return '/pages/includes/edit_in_place.php?id=' + id;
},
        });

}); 
```

# matlab - xlsread matlab从excel表中读取数据

> ID：13193393
> 
> 赞同：0
> 
> 时间：2012-11-02T10:25:55.353
> 
> 标签：matlab

我在excel表中有数据。我可以在 matlab 脚本中处理原始 vlaues，但是当我尝试从函数调用 raw 时发生错误。

`[~,~, raw] = xlsread('data.xlsx');` `containsNumbers = cellfun(@isnumeric,raw);`

`raw(containsNumbers) = cellfun(@num2str,raw(containsNumbers),'UniformOutput',false);`

`create_new(state,raw)`% 这是我的函数，定义为 `Function create_new(sate,varargin)`

当我尝试在函数中处理原始值时，我得到一个错误。`??? Undefined function or variable "raw".` 有什么方法可以让我在函数中使用原始值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:59:10.767

您应该使用 excel 文件的完整路径。matlab 函数将尝试在 matlab 的当前工作目录中打开“data.xlsx”，而不是包含该函数的目录。

要创建完整路径，只需使用函数[fullfile](http://www.mathworks.com/help/matlab/ref/fullfile.html)

```
filePath = fullfile( directoryPath, fileName); 
```

# android - 在 PreferenceScreen 中为文本设置自定义字体

> ID：13193405
> 
> 赞同：10
> 
> 时间：2012-11-02T10:27:03.823
> 
> 标签：android, android-preferences, preferenceactivity

我的 PreferenceActivity 看起来像：

```
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.preference.PreferenceFragment;
import android.widget.TextView;

public class Settings extends PreferenceActivity {

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
            super.onCreate(savedInstanceState);

            //setContentView(R.layout.about);

            Typeface timesFont = Typeface.createFromAsset(getAssets(), "fonts/times.ttf");

            TextView about_txt = (TextView) findViewById(R.id.about_txt);        
            about_txt.setTypeface(timesFont);
            about_txt.setText(R.string.about_txt);

            if (Build.VERSION.SDK_INT<Build.VERSION_CODES.HONEYCOMB)
            {
                addPreferencesFromResource(R.xml.preferences);
            } else {
                // Display the fragment as the main content.
                getFragmentManager().beginTransaction().replace(android.R.id.content,
                        new PrefsFragment()).commit();
            }
    }

    public static class PrefsFragment extends PreferenceFragment 
    {
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);

                // Load the preferences from an XML resource
                addPreferencesFromResource(R.xml.preferences);
            }
        }
} 
```

和**preference.xml**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

        <ListPreference
            android:dialogTitle="@string/size_dialog"
            android:entries="@array/size_list"
            android:entryValues="@array/entry_size"
            android:key="size_list"
            android:summary="@string/size_summary"
            android:title="@string/pref4title"
            />

    </PreferenceCategory>

    <PreferenceCategory
        android:title="@string/pref_about"
        android:layout="@layout/about"
        >

    </PreferenceCategory>

</PreferenceScreen> 
```

**@layout/about (about.xml):**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         xmlns:tools="http://schemas.android.com/tools"
         android:layout_width="match_parent"
         android:layout_height="match_parent"> 

          <TextView
            android:id="@+id/about_txt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="some text here"   
            />

</LinearLayout> 
```

我有特定的语言，所以对于 about.xml 中的文本，我应该使用特定的字体。我经常为 TextView 使用：

```
 Typeface timesFont = Typeface.createFromAsset(getAssets(), "fonts/times.ttf");

 TextView about_txt = (TextView) findViewById(R.id.about_txt);        
 about_txt.setTypeface(timesFont);
 about_txt.setText(R.string.about_txt); 
```

但是我应该使用什么来访问 about.xml 中添加到首选项屏幕的文本？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-04T13:27:47.540

也许更容易编写自己的首选项并将其添加到 xml 中
，只需**通过 Spannable 将自定义字体设置到设置字段**：（
*看起来很长但很快完成 :)）*

**完整的解决方案：**

```
private void convertPreferenceToUseCustomFont(Preference somePreference) {
    CustomTypefaceSpan customTypefaceSpan = new CustomTypefaceSpan("", net.mikekober.myMory.utils.Utils.getUsedTypeFace(getActivity()));

    SpannableStringBuilder ss;
    if (somePreference.getTitle() != null) {
        ss = new SpannableStringBuilder(somePreference.getTitle().toString());
        ss.setSpan(customTypefaceSpan, 0, ss.length(),Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        somePreference.setTitle(ss);
    }

    if (somePreference.getSummary() != null) {
        ss = new SpannableStringBuilder(somePreference.getSummary().toString());
        ss.setSpan(customTypefaceSpan, 0, ss.length(),Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        somePreference.setSummary(ss);
    }
} 
```

**为每一个偏好调用它，你就完成了:)**

**玩得开心&&祝你好运**

**顺便说一句：在更改文本时，再次调用它！** btw2：检查、查看、应用、改进；）来自：[https ://stackoverflow.com/a/10741161/371749](https://stackoverflow.com/a/10741161/371749)

顺便说一句，差点忘了：

```
static private class CustomTypefaceSpan extends TypefaceSpan {

    private final Typeface newType;

    public CustomTypefaceSpan(String family, Typeface type) {
        super(family);
        newType = type;
    }

    @Override
    public void updateDrawState(TextPaint ds) {
        applyCustomTypeFace(ds, newType);
    }

    @Override
    public void updateMeasureState(TextPaint paint) {
        applyCustomTypeFace(paint, newType);
    }

    private static void applyCustomTypeFace(Paint paint, Typeface tf) {
        int oldStyle;
        Typeface old = paint.getTypeface();
        if (old == null) {
            oldStyle = 0;
        } else {
            oldStyle = old.getStyle();
        }

        int fake = oldStyle & ~tf.getStyle();
        if ((fake & Typeface.BOLD) != 0) {
            paint.setFakeBoldText(true);
        }

        if ((fake & Typeface.ITALIC) != 0) {
            paint.setTextSkewX(-0.25f);
        }

        paint.setTypeface(tf);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-26T03:48:26.627

更改 all `TextViews`in字体的最简单方法`PreferenceScreen`是：

```
public class WallpaperSettings extends PreferenceActivity {

  private View tryInflate(String name, Context context, AttributeSet attrs) {
    LayoutInflater li = LayoutInflater.from(context);
    View v = null;
    try {
        v = li.createView(name, null, attrs); 
    } catch (Exception e) {
        try {
            v = li.createView("android.widget." + name, null, attrs);
        } catch (Exception e1) {
        }
    }
    return v;
  }

  protected void onCreate(Bundle savedInstanceState) {
    //CHANGE TYPEFACE FOR ALL TEXTVIEWS
    final Typeface font = Typeface.createFromAsset(getAssets(), "fonts/cabal.ttf");     
    getLayoutInflater().setFactory(new Factory() {
        @Override
        public View onCreateView(String name, Context context,
                AttributeSet attrs) {
            View v = tryInflate(name, context, attrs);
            if (v instanceof TextView) {                    
                ((TextView) v).setTypeface(font);
            }
            return v;
        }
    });

    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
  }
} 
```

就是这样！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T10:40:37.523

```
public class CustomPreference extends Preference 
    implements PreferenceStyle {

    private int style;

    public CustomPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

    }

    public CustomPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomPreference(Context context) {
        super(context);
    }

    @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        switch (style) {
        case STYLE_ALARMED:
            setStyleAlarmed(view);
            break;
        case STYLE_NORMAL:
            setStyleNormal(view);
            break;
        case STYLE_WARNING:
            setStyleWarning(view);
            break;
        case STYLE_SUMMARY_ALARM:
            setStyleSummaryAlarm(view);
            break;
        case STYLE_SUMMARY_WARNING:
            setStyleSummaryWarning(view);
            break;
        case STYLE_DISABLED:
            setStyleDisabled(view);
            break;
        default:
            break;
        }

    }

private void setStyleWarning(View view) {
    TextView titleView = (TextView) view.findViewById(android.R.id.title);
    titleView.setTextColor(Color.YELLOW);
            // add your FONT here
}

private void setStyleAlarmed(View view) {
    int alarmREDColor = view.getContext().getResources().getColor(R.color.alarmed_red);
    TextView titleView = (TextView) view.findViewById(android.R.id.title);
    titleView.setTextColor(alarmREDColor);
}

public void setStyle(int style) {
        switch (style) {
        case STYLE_ALARMED:
            this.style = STYLE_ALARMED;
            break;
        case STYLE_NORMAL:
            this.style = STYLE_NORMAL;
            break;
        default:
            this.style = STYLE_NORMAL;
        }
    }

public interface PreferenceStyle {

    public static final int STYLE_DISABLED = 0;
    public static final int STYLE_NORMAL = 10;
    public static final int STYLE_ALARMED = 20;
    public static final int STYLE_WARNING = 30;

    public static final int STYLE_SUMMARY_ALARM = 40;
    public static final int STYLE_SUMMARY_WARNING = 50;

    public void setStyle(int style);
    public Context getContext();
    public void setSummary(CharSequence summary);

} 
```

* * *

```
public class YourActivity extends PreferenceActivity {

    private CustomPreference pref1;
    private CustomPreference pref2;
    private CustomPreference pref3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);         
        addPreferencesFromResource(R.xml.prefence_xml);
        pref1 = findPreference();
                    pref1.setOnPreferenceClickListener(this);
                    pref1.setStyle(PreferenceStyle.STYLE_NORMAL);
               }
        } 
```

* * *

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory 
        android:title="category1">

        <com.project.main.preference.CustomPreference 
            android:key="key"
            android:title="title"
            />  

        <com.project.main.preference.CustomPreference 
            android:key="key"
            android:title="title"/>

    </PreferenceCategory>

</PreferenceScreen> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-09T09:03:01.403

通过在 android O 中添加字体支持，我们现在可以设置`font-family`应用程序主题，这也会自动反映在其中`PreferenceFragment`。（注意：我正在使用`PreferenceFragmentCompat`）。首先`font-family`像这样添加到资源中：

```
<font-family xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto">
<font
    android:fontStyle="normal"
    android:fontWeight="400"
    android:font="@font/nunito"

    app:fontStyle="normal"
    app:fontWeight="400"
    app:font="@font/nunito"/>

<font
    android:fontStyle="italic"
    android:fontWeight="400"
    android:font="@font/nunito_italic"

    app:fontStyle="italic"
    app:fontWeight="400"
    app:font="@font/nunito_italic" /> 
```

**注意：您现在需要同时声明`app`和`android`命名空间声明** [Link](https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml.html)

然后`style`为提到这一点的文本视图`font-family`添加一个`TextView`：

```
<style name="NunitoTextViewStyle" parent="android:Widget.TextView">
    <item name="android:fontFamily">@font/nunito_regular_font_family</item>
</style> 
```

然后最后，只需参考上面`style`的内容即可`AppTheme`：

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- Customize your theme here. -->
    ........
    <item name="android:textViewStyle">@style/NunitoTextViewStyle</item>
</style> 
```

完毕。这也将显示您的自定义字体`PreferenceFragmentCompat`。

# joomla3.0 - 为 Joomla 3 调整我的扩展时出现致命错误

> ID：13193407
> 
> 赞同：0
> 
> 时间：2012-11-02T10:27:21.143
> 
> 标签：joomla3.0

我正在尝试为 Joomla 3 调整我的扩展，但出现以下错误 ![在此处输入图像描述](../Images/f5c5733da7d32af9b77fb6e123a83c4e.png)

如您所见，调用堆栈并没有太大帮助..

有任何想法吗？

# java - 文件不会删除

> ID：13193410
> 
> 赞同：0
> 
> 时间：2012-11-02T10:27:31.840
> 
> 标签：java, file, delete-file, erase

我正在尝试删除 java 中的文件，但它不会删除。有人可以解释为什么它不会删除吗？

这是我正在使用的代码：

```
File bellFile = new File("config\\normbells.txt");

bellFile.delete();

File bellFileNew = new File("config\\normbells.txt");

bellFileNew.createNewFile();

System.out.println("Done!"); 
```

注意：如果有帮助，我正在尝试擦除文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:46:30.007

在以下情况下，文件删除可能会失败：

1.  该文件不存在。
2.  该文件是目录而不是文件。
3.  您无权删除该文件。
4.  您无权访问该文件或其任何父目录。
5.  该文件当前正被其他应用程序使用。

尝试避免所有上述情况，您肯定能够删除该文件。同样在删除文件之前添加此条件：

```
if (file.exists()) {
    file.delete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:19:43.360

Java7为此提供了新功能。

```
Path target = Paths.get("D:\\Backup\\MyStuff.txt");
Files.delete(target);

Path newtarget = Paths.get("D:\\Backup\\MyStuff.txt");
Set<PosixFilePermission> perms
    = PosixFilePermissions.fromString("rw-rw-rw-");
FileAttribute<Set<PosixFilePermission>> attr
    = PosixFilePermissions.asFileAttribute(perms);
Files.createFile(newtarget, attr); 
```

看看 File 类[http://docs.oracle.com/javase/7/docs/api/java/io/File.html](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:32:06.613

```
File bellFile = new File("config\\normbells.txt");
if(bellFile.delete())
{
System.out.println("Done!");
} 
```

# c# - C# 私有 T CreateObject ()

> ID：13193415
> 
> 赞同：0
> 
> 时间：2012-11-02T10:27:46.207
> 
> 标签：c#, object, activator, createinstance

我想创建一个具有动态参数的对象实例，例如

```
private Type ClassType { get; set; }
model = (CreateObject<typeof(this.ClassType)>)ser.Deserialize(sr);

private T CreateObject<T>()
{
    return (T)Activator.CreateInstance(this.ClassType);
} 
```

我想在没有“startconfig”之类的修复类型的情况下尝试它。但它仍然不起作用，你能帮帮我吗？

```
 var mi = GetType().GetMethod("CreateObject");
        var miConstructed = mi.MakeGenericMethod(this.ClassType);
        var instance = miConstructed.Invoke(this, null);
        var model = (instance)ser.Deserialize(sr);
    }

    private T CreateObject<T>()
    {
        return (T)Activator.CreateInstance(this.ClassType);
    } 
```

这无论如何都不起作用，原因：找不到他的类型或名称空间名称“类型/名称空间”（您是否缺少 using 指令或程序集引用？）

这发生在铸造 ser.Deserialize(sr);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:36:14.270

你想创建一个 T 的实例吗？然后 ：

```
var model = CreateObject<StartConfig>();    

private T CreateObject<T>()
{
    return (T)Activator.CreateInstance(typeof(T));
} 
```

使用您的第二个代码示例，您可能会执行类似的操作。

```
private Type ClassType { get; set; }
var mi = GetType().GetMethod("CreateObject");
var miConstructed = mi.MakeGenericMethod(ClassType);
var instance = miConstructed.Invoke(this, null);
model = (instance)ser.Deserialize(sr);

private T CreateObject<T>()
{
    return (T)Activator.CreateInstance(typeof(T));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:41:14.953

尝试...

```
public class Factory<T>
{
    public static T getInstance()
    {
        return getInstance(typeof(T), null);
    }

    public static T getInstance(object[] initializationParameters)
    {
        return (T)Activator.CreateInstance(typeof(T), initializationParameters);
    }
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:55:02.473

你想用你的 做什么`model`？我的意思是接口方面。您必须定义一个所有类型都遵循您反序列化的接口。

```
public interface IModel
{
     int ComputeFavoriteNumber(); // or a property
}

...

// class is practically unknown to deserializing module
internal class ErnieModel : IModel
{
    public int ComputeFavoriteNumber()
    {
        return 8243721;
    }
}

...

// deserializing module
var bf = new BinaryFormatter();
using (var ms = new MemoryStream())
{
    bf.Serialize(ms, new ErnieModel()); // In reality ErnieModel should be unknown to the deserializing code, this is just to fill the Stream with data
    ms.Position = 0;
    var model = (IModel)bf.Deserialize(sr);
    Console.WriteLine("Favorite number: {0}", model.ComputeFavoriteNumber());
} 
```

`Activator.CreateInstance`在这种情况下，您甚至不需要。但是，如果您只是保存了要创建的类型的完全限定名称或类型本身（不确定是否有效），您确实需要它。

```
// interfaces/classes the same as above
Type deserializedType = typeof(ErnieModel); // or get it from wherever, maybe through (Type)bf.Deserialize(stream); ? In reality ErnieModel should be unknown to the deserializing code
var model = (IModel)Activator.CreateInstance(deserializedType);
Console.WriteLine("Favorite number: {0}", model.ComputeFavoriteNumber()); 
```

在这种情况下使用泛型没有意义（尽管起初感觉​​它是一个应用的好地方），您必须使用 oldschool`object`并强制转换为已知的接口类型以启用真正的插件式扩展。

# youtube-api - 是否可以使用 v3 api 获取视频的 YouTube 作者姓名？

> ID：13193417
> 
> 赞同：2
> 
> 时间：2012-11-02T10:27:46.770
> 
> 标签：youtube-api

所以我正在努力切换到使用 YouTube api 的 v3 版本（这要好得多，它就像一个完全不同的产品），但我要么遗漏了一些东西，要么......

能够在一次调用中获取任意视频列表及其详细信息将使生活显着改善，但在视频[列表](https://developers.google.com/youtube/v3/docs/videos/list)方法中，[视频详细信息](https://developers.google.com/youtube/v3/docs/videos)“片段”包含“channelId”，*而不是*“作者” .

我花了很多时间浏览文档，但找不到从 channelId 到人类可读作者姓名的任何方法。

我应该如何将视频映射到作者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:02:35.833

作为 video.snippet 响应的一部分，无法取回频道的显示名称（旧版 YouTube 名称或 Google+ 名称）。您需要获取 channelId 并执行 channels.list(id=channelId1,channelId2,...,part=snippet) 操作以获取该信息。好的部分是您可以在一次调用中传递多达 50 个频道 ID。

这种将信息分离到不同资源中的做法是经过深思熟虑的决定。工程团队意识到这将需要开发人员进行额外的 API 调用，但他们赞成这种设计。

同时，该 API 仍处于实验版本，如果您在进行实际开发时对使用该 API 有任何反馈，请随时在问题跟踪器中[打开功能请求。](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Enhancement%20Request%29)如果有足够多的人就 API 的某个方面提供反馈，这可能会影响最终修订版的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-31T13:58:13.400

在撰写本文时，接受的答案可能是正确的，但截至 2018 年 2 月，该`snippet`部分现在包含一个`channelTitle`属性。

# android - 如何在这里打印 textview android json 中的 msg_content？

> ID：13193422
> 
> 赞同：0
> 
> 时间：2012-11-02T10:28:19.413
> 
> 标签：android, json

```
{
    "status": "ERROR", 
    "msg_content": "Your old password was entered incorrectly. Please enter it again.",
    "code": "400", 
    "msg_title": "Sorry. Error in processing your request"
}

if (str.startsWith("Bad Request"))
{
    textview.setText(" ");                          
} 
```

如何在 textview 中打印以显示`msg_content`使用 json

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:35:40.003

您将需要创建一个 JSONObject 并将字符串作为参数传递给它。

```
JSONObject obj = new JSONObject(str); 
```

然后要在刚刚调用的 JSONObject 中找到一个键，在尝试检索它之前始终检查 JSONObject 是否具有该键。

```
if (obj.has("status"){
   String status = obj.getString("status");
}

if (obj.has("msg_content"){
   String content = obj.getString("msg_content");
   textview.setText(content);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:45:49.627

您需要使用 JSON 对象解析 json。

```
JSONObject obj = new JSONObject(str); 
```

然后从 JSON 对象中找到任何你想要的字符串。

```
if (obj.has("msg_content")) {
         String value = obj.getString("msg_content");
         textview.settext(value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:35:13.717

JsonReader 在 API 11 中实现。如果你想在 GingerBread 或以下使用它，试试[这个](http://developer.android.com/reference/org/json/package-summary.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:59:17.433

使用以下代码从 JSON 对象中提取信息：

```
try {         
          Iterator keys = jsonObject.keys();

            while (keys.hasNext()) {
                String key = (String) keys.next();
                if(key.equals("msg_content"))
                    textView.setText(jsonObject.getString(key));
            }
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

此外，如果您将 JSON 作为字符串，您可以使用以下代码填充对象：

```
try {
        jsonObject = new JSONObject(theJsonString);
    } catch (JSONException e1) {
        e1.printStackTrace();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T10:32:06.120

我对 JSON 很陌生，但我会创建一个 JsonReader 并按照[这里解析 JSON](http://developer.android.com/reference/android/util/JsonReader.html)

# actionscript-3 - Flex (ActionScript 3)：如何找到一个字符串包含超过 6 次的重复字符？

> ID：13193426
> 
> 赞同：1
> 
> 时间：2012-11-02T10:28:26.980
> 
> 标签：actionscript-3, flash, apache-flex, air, flash-builder

我如何在 Flex 中发现该字符串包含超过 6 次的重复字符？在我的情况下，用户输入只有数字（0-9），我正在为美国传真做没有验证。

```
like 11111112255, 225555555522, etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:31:43.560

一种正则表达式方式：

```
/(.)\1{6}/ 
```

这将搜索重复 7 次的*任何*字符（不一定是数字）。

```
/(\d)\1{6}/ 
```

相同，但仅适用于数字。

有些技术通常会比正则表达式更快，例如，稍微修改[的 Bitap](http://en.wikipedia.org/wiki/Bitap_algorithm)算法可能会更快。

下面是 Bitup 算法的一个修改版本，用于搜索字符串中的重复字符：

```
package
{
    import flash.display.Sprite;

    public class BitapConsequent extends Sprite
    {
        public function BitapConsequent()
        {
            super();
            test();
        }

        private function test():void
        {
            // 10 -1 3 0
            trace(bitapConsequent("---####$$$^^^^^^", 6),
                bitapConsequent("---####$$$^^^^^^", 7),
                bitapConsequent("---####$$$^^^^^^", 4),
                bitapConsequent("---####$$$^^^^^^", 3));
        }

        private static function bitapConsequent(
            text:String, consequent:uint):int
        {
            // Unless found, the result is negative
            var result:int = -1;
            var len:int = text.length;
            var offset:int;
            var reverse:int;

            if (len >= consequent)
            {
                consequent--;
                len -= consequent;
                // loop through the whole string sans
                // the substring which is shorter than
                // the number of characters that have to
                // be the same
                outer: for (; offset < len; offset++)
                {
                    // jump to the farmost end of the possible
                    // match and walk back checking that each
                    // two characters match, i.e. if this is
                    // the array of characters a = ['a', 'b', 'b']
                    // then first check if a[2] == a[1], then
                    // if a[1] == a[0], if characters are equal,
                    // continue to the next iteration, else--
                    // restart the search
                    for (reverse = offset + consequent;
                        reverse > offset; reverse--)
                    {
                        if (text.charAt(reverse) !== 
                            text.charAt(reverse - 1))
                            continue outer;
                    }
                    // If we got here, we've found `consequent'
                    // equal characters, so terminate the loop
                    result = offset;
                    break;
                }
            }
            return result;
        }
    }
} 
```

较早的版本确实使用了bitup算法，但经过一番思考，我意识到这不是必需的，所以这是一个更精致的版本，它也不限于只匹配32个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:58:16.870

您可以使用正则表达式：

```
var testString:String = "1111111";
if ( testString.search( /[0-9]{7}/ ) != -1 )
    trace( "The string '" + testString + "' contains more than 6 repeating digits" ); 
```

**编辑：**

正如@wvxvw 指出的那样，如果您的字符串类似于`1112222`或`1234567`- 他的正则表达式解决了这个问题，这将中断

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T09:49:52.240

我这样做是这样的，

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        protected function button1_clickHandler(event:MouseEvent):void
        {
            if(id_input.text.length >=10)
            {
                for(var i:uint=0; i<4; i++)
                {
                    var counter:int = 0;
                    var str:String = id_input.text.substr(i,1);
                    var index:uint = 0;
                    index = i;
                    index += 1;
                    //case 1
                    if(str == id_input.text.substr(index ,1))
                        counter ++;
                    index += 1;
                    //case 2
                    if(str == id_input.text.substr(index ,1))
                        counter ++;
                    index += 1;
                    //case 3
                    if(str == id_input.text.substr(index ,1))
                        counter ++;
                    index += 1;
                    //case 4
                    if(str == id_input.text.substr(index ,1))
                        counter ++;
                    index += 1;
                    //case 5
                    if(str == id_input.text.substr(index ,1))
                        counter ++;
                    index += 1;
                    //case 6
                    if(str == id_input.text.substr(index ,1))
                        counter ++;
                    if(counter >= 6){
                        Alert.show('More then 6 char present in string');
                        break;
                    }
                }
            }
        }

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:VGroup width="100%" height="100%">

    <s:TextInput id="id_input"/>
    <s:Button label="Validate" click="button1_clickHandler(event)" />

</s:VGroup> 
```

# mysql - 如何在单选查询中从单个表中选择两个相同的列

> ID：13193427
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:28:33.697
> 
> 标签：mysql, sql

我有一个名为 Employee 的表，其中包含 empId、empName、managerId 列。这里的经理是一名员工。我如何从上表中获取员工姓名和经理姓名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:31:01.243

将表与自身连接（注意使用别名来消除两者的歧义）：

```
SELECT e.empName AS employeeName, 
    m.empName AS managerName
FROM Employee e
INNER JOIN Employee m ON e.managerId = m.empId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:31:01.913

尝试使用别名将表连接到自身：

```
SELECT
    Employee.empName AS employeeName,
    Manager.empName AS managerName
FROM Employee
JOIN Employee AS Manager
ON Employee.managerId = Manager.empId 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:37:02.147

```
create table employee
 (
   empid int , 
   empName nvarchar(500),
   mgrid int 

 )

insert into employee select 1,'ra',0 
insert into employee select 2,'ma',1 
```

获取经理姓名的子查询

```
select *
 ,(select empName  from employee as e where oe.mgrid=e.empid) as managername
from employee as oe 
```

或者

```
SELECT
    employee.empName AS employeeName,
    Manager.empName AS managerName
FROM employee
JOIN employee AS Manager
ON employee.mgrid = Manager.empId 
```

[sql小提琴为此](http://www.sqlfiddle.com/#!3/bc425/6)

# objective-c - 我如何通过代码获取 NSObject 的对象 ID？

> ID：13193432
> 
> 赞同：2
> 
> 时间：2012-11-02T10:29:02.313
> 
> 标签：objective-c, xcode, macos

谁能告诉我如何获取`Object ID`虽然`NSObject`代码？见截图：

![在此处输入图像描述](../Images/e279a8a33f1e8d3d7761d7ae98ce92f3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:49:25.330

Interface Builder中的Object ID只是IB在反序列化/序列化XIB文件时使用的内部记账值，在Application运行时不存在。

您想使用标签，或者使用属性/插座。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T09:10:04.633

对象 ID 是为了让 IB 了解对象之间的差异。没有这样的 API 或可用于获取任何组件的对象 ID 的方法。

# email - 如何在 PHP-FPM 中使用 PHP Mail() 函数？在 Nginx 上？

> ID：13193433
> 
> 赞同：13
> 
> 时间：2012-11-02T10:29:06.440
> 
> 标签：email, nginx, php

我到处寻找这个，我*真的*很想解决这个问题。在过去，我最终只使用了像 SendGrid for PHP 这样的 SMTP 服务和像 SwiftMailer 这样的邮件插件。但是我想使用 PHP。

基本上是我的设置（我是服务器设置的新手，这是我按照[教程](http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-lemp-on-ubuntu-12.10)进行的个人设置）

```
Nginx
Rackspace Cloud
PHP 5.3 PHP-FPM
Ubuntu 11.04 
```

我`phpinfo()`返回关于邮件条目的信息：

```
mail.log                     no value
mail.add_x_header            On
mail.force_extra_parameters  no value

sendmail_from   no value
sendmail_path   /usr/sbin/sendmail -t -i

SMTP        localhost
smtp_port   25 
```

有人可以帮我解释为什么`Mail()`不起作用-我的脚本在所有其他站点上都可以使用，这是一个普通的邮件命令。我需要在服务器上设置日志或启用一些 PHP 端口吗？

我的示例脚本

```
<?
    # FORMS VARS

    // $to = $customers_email;
    // $to = $customers_email;

    $to = $_GET["customerEmailFromForm"];

    $subject = "Thank you for contacting Real-Domain.com";
    $message = "
    <html>
    <head>
    </head>
    <body>
    Thanks, your message was sent and our team will be in touch shortly.
    <img src='http://cdn.com/emails/thank_you.jpg' />
    </body>
    </html>
    ";
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= 'From: <real-email@real-domain.com>' . "\r\n";

    // SEND MAIL
    mail($to,$subject,$message,$headers);

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-15T16:08:36.870

如果发现在带有 nginx 和 PHP-FPM（没有 apache）的 Ubuntu 14.04 的新安装中，postfix 和 mailutils 都没有安装。

我用了： `sudo apt-get install postfix`

（如推荐的答案）

和

`sudo apt-get install mailutils`

让一切都在我的服务器上运行。两者都是必需的。PHP.ini 中的条目（如推荐的答案中所述）可能也有帮助，但如果没有其他两个包，它不会有什么不同。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-02T10:32:13.913

由于没有任何价值，`sendmail_from`您需要在以下位置设置一个`php.ini`：

```
sendmail_from = "you@example.com" 
```

或者当您调用时在标题中`mail`：

```
mail($to, $subject, $message, 'From: you@example.com'); 
```

电子邮件地址应遵循 RFC 2822，例如：

*   `you@example.com`
*   `You <you@example.com>`

如果做不到这一点，您是否真的安装了一个有效的电子邮件系统？

如果没有，您可以使用以下命令安装 postfix：

`sudo apt-get install postfix`

有关在 Ubuntu 中配置用于 PHP 的 postfix 的更多信息，请参见下文：

[https://serverfault.com/questions/119105/setup-ubuntu-server-to-send-mail](https://serverfault.com/questions/119105/setup-ubuntu-server-to-send-mail)

# python - 在集合中搜索

> ID：13193435
> 
> 赞同：1
> 
> 时间：2012-11-02T10:29:15.890
> 
> 标签：python

我想在 Python 的集合中搜索一个元素。如何在最快的时间内获得被搜索元素的索引？

`element in set`不给索引！我想知道元素的索引。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T10:30:10.810

使用`lists`或者`tuples`如果您对索引感兴趣，`sets`则不维护任何顺序。

从[文档](http://docs.python.org/2/library/sets.html)：

> 作为无序集合，集合不记录元素位置或插入顺序。因此，集合不支持索引、切片或其他类似序列的行为。

或者可能是这样的：

```
In [1]: se=set("foobarspampython")

In [2]: se
Out[2]: set(['a', 'b', 'f', 'h', 'm', 'n', 'o', 'p', 'r', 's', 't', 'y'])

In [3]: list(se).index("f")    # in the original string the index is 0,
                               # but list(set) returns something different
Out[3]: 2 
```

**Python 3.x：**

您可以`OrderedDict()`在 python 3.x 中使用，并将您的项目用作字典的键。 `dict.keys()`在 python 3.x 中返回`keysView`，它有点类似于`sets`，您可以对其执行所有设置操作。

```
>>> from collections import OrderedDict as od
>>> strs="foobarspampython"
>>> dic=od((x,"") for x in strs)

>>> dic.keys()                      #order is maintained

KeysView(OrderedDict([('f', ''), ('o', ''), ('b', ''), ('a', ''), ('r', ''),
                      ('s', ''), ('p', ''), ('m', ''), ('y', ''), ('t', ''),
                      ('h', ''), ('n', '')]))

>>> list(dic.keys()).index("f")
0
>>> list(dic.keys()).index("b")
2

>>> dic.keys() & {'a','b','c'}    # even set operations work fine on it
{'a', 'b'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:33:36.567

如果您需要访问索引和快速查找的能力，您应该看看（非标准）[blist 包](http://stutzbachenterprises.com/blist/)。它提供了一个快速列表实现，可以保持顺序，从而允许快速访问。它不会尽可能快`set`，但您将能够检索索引。

# rest - RSpec“没有路线匹配”

> ID：13193438
> 
> 赞同：3
> 
> 时间：2012-11-02T10:29:29.617
> 
> 标签：rest, rspec, routes

我正在尝试为我的一个控制器上的自定义操作编写请求规范。

我的 routes.rb 是这样的：

```
resources :cars do
  member do
    get :search
  end
end 
```

我的 cars_controller.rb 是这样的：

```
class CarsController < ApplicationController
  def search
    # pending 
  end
end 
```

我的 controller_cars_spec.rb 是这样的：

```
describe CarsController do
  describe 'Search' do
    it 'should call the model method that perform search by brand' do
      get :search
    end  
  end
end 
```

耙子路线说：

```
search_car GET    /cars/:id/search(.:format) {:action=>"search", :controller=>"cars"} 
```

和自动测试说：

```
Failures:
1) CarsController Search should call the model method that perform search by brand
   Failure/Error: get :search
   ActionController::RoutingError:
     No route matches {:controller=>"cars", :action=>"search"}
   # ./spec/controllers/cars_controller_spec.rb:19:in `block (3 levels) in <top (required)>' 
```

有什么问题？我无法解决这个失败...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T15:52:48.333

简而言之，这应该做你想要的：

```
get :search, :car_id => @car.id 
```

当您使用资源时，您需要匹配每个参数的路由，但这还不是全部。就像是：

```
get :search, :id => @car.id 
```

似乎它会工作，但没有。

使用资源助手时，ID 是通过在任何子路由和资源的资源名称前加上前缀来命名的。我不完全确定为什么 rspec 错误不会抱怨缺少：car_id，也许其他人可以填补知识的缺失部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T02:26:26.540

您需要将 :id 参数传递给您的规范文件中的路由，如本文所示： [“没有路由匹配”错误？](https://stackoverflow.com/questions/4628103/no-route-matches-error)

```
get :search, :id => @car.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T09:28:03.807

检查是否

```
resources :cars 
```

是之前

```
match '/cars/:id/search' => 'cars#search' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:49:48.987

`member`是针对单个资源的，因此它需要一个：id。你要：

```
resources :cars do
  collection do
    get :search
  end
end 
```

# python - 如何优雅地处理复杂的 URL？

> ID：13193442
> 
> 赞同：6
> 
> 时间：2012-11-02T10:29:32.267
> 
> 标签：python, pyramid

我正在编写一个管理网站，它控制多个具有相同程序和数据库架构但内容不同的网站。我设计的网址是这样的：

```
http://example.com/site                 A list of all sites which under control
http://example.com/site/{id}            A brief overview of select site with ID id
http://example.com/site/{id}/user       User list of target site
http://example.com/site/{id}/item       A list of items sold on target site
http://example.com/site/{id}/item/{iid} Item detailed information
# ...... something similar 
```

如您所见，几乎所有 URL 都需要 site_id。在几乎所有视图中，我都必须做一些常见的工作，比如使用 site_id 针对数据库查询站点模型。此外，每当我调用 request.route_path 时，我都必须传递 site_id。

那么......无论如何，我有没有让我的生活更轻松？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:14:37.833

使用混合方法加载站点可能对您有用。

```
def groupfinder(userid, request):
    user = request.db.query(User).filter_by(id=userid).first()
    if user is not None:
        # somehow get the list of sites they are members
        sites = user.allowed_sites
        return ['site:%d' % s.id for s in sites]

class SiteFactory(object):
    def __init__(self, request):
        self.request = request

    def __getitem__(self, key):
        site = self.request.db.query(Site).filter_by(id=key).first()
        if site is None:
            raise KeyError
        site.__parent__ = self
        site.__name__ = key
        site.__acl__ = [
            (Allow, 'site:%d' % site.id, 'view'),
        ]
        return site 
```

我们将使用 groupfinder 将用户映射到主体。我们在这里选择仅将他们映射到他们拥有会员资格的网站。我们的简单遍历只需要一个根对象。它使用与设置创建的相同主体更新加载`site`的内容。`__acl__``groupfinder`

您需要`request.db`在 Pyramid Cookbook 中设置给定的模式。

```
def site_pregenerator(request, elements, kw):
    # request.route_url(route_name, *elements, **kw)
    from pyramid.traversal import find_interface
    # we use find_interface in case we improve our hybrid traversal process
    # to take us deeper into the hierarchy, where Site might be context.__parent__
    site = find_interface(request.context, Site)
    if site is not None:
        kw['site_id'] = site.id
    return elements, kw 
```

Pregenerator 可以`site_id`自动为您找到并添加到 URL。

```
def add_site_route(config, name, pattern, **kw):
    kw['traverse'] = '/{site_id}'
    kw['factory'] = SiteFactory
    kw['pregenerator'] = site_pregenerator

    if pattern.startswith('/'):
        pattern = pattern[1:]
    config.add_route(name, '/site/{site_id}/' + pattern, **kw)

def main(global_conf, **settings):
    config = Configurator(settings=settings)

    authn_policy = AuthTktAuthenticationPolicy('seekrit', callback=groupfinder)
    config.set_authentication_policy(authn_policy)
    config.set_authorization_policy(ACLAuthorizationPolicy())

    config.add_directive(add_site_route, 'add_site_route')

    config.include(site_routes)
    config.scan()
    return config.make_wsgi_app()

def site_routes(config):
    config.add_site_route('site_users', '/user')
    config.add_site_route('site_items', '/items') 
```

我们在这里设置我们的应用程序。我们还将路线移动到一个可包含的功能中，这可以让我们更轻松地测试路线。

```
@view_config(route_name='site_users', permission='view')
def users_view(request):
    site = request.context 
```

然后我们的观点被简化了。只有当用户有权访问站点并且站点对象已经为我们加载时，它们才会被调用。

**混合遍历**

添加了一个自定义指令以使用包装器`add_site_route`增强您的`config`对象，该包装器`add_route`将自动为路由添加遍历支持。当该路由匹配时，它将`{site_id}`从路由模式中获取占位符并将其用作您的遍历路径（`/{site_id}`这是我们根据遍历树的结构定义的路径）。

遍历发生在`/{site_id}`第一步是找到树根的路径上（`/`）。该路由被设置为使用`SiteFactory`作为遍历路径的根执行遍历。此类被实例化为根，并`__getitem__`使用路径中的下一个段 ( ) 中的键调用`{site_id}`。然后，我们找到与该键匹配的站点对象，并在可能的情况下加载它。然后用`__parent__`和更新站点对象`__name__`以允许`find_interface`工作。它还通过`__acl__`稍后提到的提供权限进行了增强。

**预发电机**

每个路由都使用一个预生成器进行更新，该预生成器尝试`Site`在遍历层次结构中查找请求的实例。如果当前请求未解析为基于站点的 URL，这可能会失败。然后，预生成器`route_url`使用站点 ID 更新发送到的关键字。

**验证**

该示例显示了如何拥有将用户映射到指示该用户在“site:”组中的主体的身份验证策略。然后站点 ( `request.context`) 被更新为具有一个 ACL，说明如果`site.id == 1`“site:1”组中的某个人应该具有“查看”权限。然后`users_view`将其更新为需要“查看”权限。`HTTPForbidden`如果用户被拒绝访问视图，这将引发异常。如果需要，您可以编写一个异常视图有条件地将其转换为 404。

我回答的目的只是为了展示混合方法如何通过在后台处理 URL 的常见部分来使您的视图更好一些。HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T10:58:14.683

对于视图，您可以使用一个类，以便可以在`__init__`方法（[docs](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/viewconfig.html#adding-view-configuration-using-the-view-config-decorator)）中执行常见工作：

```
from pyramid.view import view_config

class SiteView(object):
    def __init__(self, request):
        self.request = request
        self.id = self.request.matchdict['id']
        # Do any common jobs here

    @view_config(route_name='site_overview')
    def site_overview(self):
        # ...

    @view_config(route_name='site_users')
    def site_users(self):
        # ...

    def route_site_url(self, name, **kw):
        return self.request.route_url(name, id=self.id, **kw) 
```

您可以使用路由前缀来处理 URL ( [docs](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/urldispatch.html#using-a-route-prefix-to-compose-applications) )。不确定这是否对您的情况有帮助。

```
from pyramid.config import Configurator

def site_include(config):
    config.add_route('site_overview', '')
    config.add_route('site_users', '/user')
    config.add_route('site_items', '/item')
    # ...

def main(global_config, **settings):
    config = Configurator()
    config.include(site_include, route_prefix='/site/{id}') 
```

# php - 如何限制用户在 RS Forms Joomla 中注册公司电子邮件地址以外的公共电子邮件地址

> ID：13193443
> 
> 赞同：0
> 
> 时间：2012-11-02T10:29:37.853
> 
> 标签：php, forms, email, joomla

我已在我的 joomla 网站上使用 RS 表单进行用户注册。我只想从公司电子邮件地址为内部用户进行注册。我怎样才能做到这一点 ？请指教。有没有办法为 RS 表单电子邮件验证字段配置自定义电子邮件域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:58:45.050

如果您需要一种解决方法并对其进行硬编码，您可以在代码中尝试以下方法：

```
// Domain to check
$email_domain = "@mydomain.com";
// Email to check
$co_email = "joefoobar@mydomain.com"; // returns true => valid
//$co_email = "joefoobar@gmail.com"; // returns false => invalid (uncomment to test)
if(!substr_count($co_email, $email_domain) > 0){
    // Set the error
    echo "Invalid!";
} else {
    // No error, proceed with code
    echo "Valid!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:57:43.690

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)作为字段验证（而不是电子邮件）。

1.  在 RS 表单上，编辑该字段并转到*Validations*。
2.  *将验证规则*更改为*Regex*。
3.  将正则*表达式语法*设置为`/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@yourdomain.com$/`

*注意：请*务必将“yourdomain.com”更改为您自己的域。

使用正则表达式验证电子邮件并不完美。请参阅[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)。我在这里建议的正则表达式的第一部分取自[w3](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#valid-e-mail-address)。

![RS 表单验证](../Images/9a16fca5e592ec1146f8192c2352986c.png)

# jsf-2 - 未在 RequestScope 下传递值

> ID：13193447
> 
> 赞同：0
> 
> 时间：2012-11-02T10:29:46.957
> 
> 标签：jsf-2

我有下面的一组页面和相应的 MPB，我将它们组织如下。
1)

```
class ManagedBeanBase {
  protected String mode;
} 
```

2) page1.xhtml

```
 <ui:composition>
    <ui:define name="contentArea">
        <f:metadata>
     <f:event type="preRenderView" listener="#{page1MPB.preProcess}" />
    </f:metadata>
               ...
               ...
    <h:panelGrid>
        <h:panelGroup>
            <h:commandButton value="continue" id="button_continue"
                actionListener="#{page1MPB.postProcess}" />
        </h:panelGroup>
    </h:panelGrid>
    </ui:define>
  </ui:composition> 
```

3)

```
@RequestScoped
@ManagedBean(name="page1MPB")
Page1MPB extends ManagedBeanBase
{
  public void preProcess() {setMode("1");}
  public void postProcess(ActionEvent event) {
     System.out.println("MODE during submit ["+getMode()+"]);
  }

} 
```

现在的问题是，它在提交期间显示“空”值。

有人可以建议吗？如果在提交期间无法获取模式值，请告诉我替代解决方案。请注意，模式值会显示在会话范围下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:40:15.663

用于在`preRenderView`渲染视图之前运行一些自定义代码，然后再显示视图的其余部分（可能显示在 preRenderView 中计算的值）。其余的遵循标准范围基础。您的托管 bean 是`RequestScope`，因此 preProcess 将 设置`mode`为 1 ，然后就是这样。当您单击提交时，它成为一个新请求，因此`mode`为空。更改为`ViewScoped`（或更高范围）以保留`preRenderView`.

这是输出（我添加了生命周期阶段输出）：

`RequestScoped:`
INFO：在 RESTORE_VIEW 1
阶段之前 INFO：在 RESTORE_VIEW 1 阶段之后
信息：在 RENDER_RESPONSE 6 阶段之前
**信息：在预处理期间的模式 [1]**
**信息：在预处理期间的模式 [1]**
信息：在 RENDER_RESPONSE 6 阶段之后
信息：在 RENDER_RESPONSE 6 阶段之后
//按“继续”
INFO：在 RESTORE_VIEW
阶段之前 1 信息：在 RESTORE_VIEW 阶段之后 1
信息：在 APPLY_REQUEST_VALUES 阶段之前 2
信息：在 APPLY_REQUEST_VALUES 阶段之后 2
信息：在 PROCESS_VALIDATIONS 3阶段之前
信息：在 PROCESS_VALIDATIONS 3 阶段之后
信息：在 UPDATE_MODEL_VALUES 4 阶段之前 信息：在 UPDATE_MODEL_VALUES 4
阶段之后
信息：在 INVOKE_APPLICATION 5 阶段之前
**信息：提交期间的模式 [null]**
信息：INVOKE_APPLICATION 5 阶段之后
信息：RENDER_RESPONSE 6 阶段之前
**信息：预处理期间的模式 [1]**
**信息：预处理期间的模式 [1]**
**信息：预处理期间的模式 [1]**
信息：RENDER_RESPONSE 6 阶段之后

`ViewScoped:`

INFO：在 RESTORE_VIEW阶段之前 1
INFO：在 RESTORE_VIEW 阶段之后 1
INFO：在阶段之前 RENDER_RESPONSE 6
**INFO：在预处理期间的模式 [1]**
**INFO：在预处理期间的模式 [1]**
INFO：在阶段之后 RENDER_RESPONSE 6
//按“继续”
INFO：在阶段之前RESTORE_VIEW 1
INFO：在 RESTORE_VIEW 阶段之后 1
INFO：在 APPLY_REQUEST_VALUES 阶段之前 2
INFO：在 APPLY_REQUEST_VALUES 阶段之后 2
INFO：在 PROCESS_VALIDATIONS 阶段之前 3
INFO：在 PROCESS_VALIDATIONS 阶段之后 3
INFO：在 UPDATE_MODEL_VALUES 阶段之前 4
INFO：在 UPDATE_MODEL_VALUES 阶段之后 4
信息：在 INVOKE_APPLIC 阶段之前
**信息：提交期间的模式 [1]**
信息：INVOKE_APPLICATION 5 阶段之后
信息：RENDER_RESPONSE 6 阶段之前
**信息：预处理期间的模式 [1]**
**信息：预处理期间的模式 [1]**
**信息：预处理期间的模式 [1]**
信息：RENDER_RESPONSE 6 阶段之后

# javascript - 图像 100% 的 div

> ID：13193451
> 
> 赞同：3
> 
> 时间：2012-11-02T10:30:13.157
> 
> 标签：javascript, css, image, resize

如何使图像 100% 为 div ？

我有一个 300x300 的图像，我想让它成为一个更大的 div 的全尺寸。（这个 div 的大小可以改变，所以我必须指定它的 100%）

CSS 或 Javascript 有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:35:02.807

试试这个：

```
<img src="test.jpg" alt="test" id="bg" />

img#bg {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
} 
```

css3 也支持这个：

```
 #testbg{
background: url(bgimage.jpg) no-repeat;
background-size: 100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:37:30.213

只需在图像标签中指定 CSS 样式`width: 100%`，使其覆盖其父容器的整个空间。

示例或[jsFiddle](http://jsfiddle.net/bNk7S/)：

```
<div style="width: 500px;">
  <img src="yourPic.png" style="width: 100%" />
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:35:56.597

> `<div style="width:450px;height:450px;">`
>     `<img src="photo.png" style="width:100%;height:100%;"/>`
> `</div>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:36:48.070

下面的 CSS 将**缩放**您的图像并填充 100% 的 div 宽度

```
#imgId {
    width: 100%;
    height: auto;
} 
```

但是，如果您真的想通过拉伸图像来填充整个 div，请使用

```
#imgId {
    width: 100%;
    height: 100%;
} 
```

另一个有用的提示是当您的宽度被指定为百分比并且您的图像是正方形时，就像您的一样。

HTML

```
<div class="container">
    <img src="sample.jpg">
    <div style="clear:both;"></div>
</div> 
```

CSS

```
​.container {
    position: relative;
    width: 50%;
    height: 0;
    // % padding is calculated as % of width rather than height 
    // so height will equal 50%
    padding-bottom: 50%; 
}

img {
    position: relative;
    width: 100%;
    // image is square so as long as width is 100% then height will be the same.
    height: auto;
}
html, body {
    height: 100%;
    width: 100%;
} 
```

以上意味着图像将始终调整大小以完全适合父 div。

[在这里](http://jsfiddle.net/bruno/JqJZ4/)提琴

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T10:37:45.780

试试这个：http: [//jsfiddle.net/XUZV5/](http://jsfiddle.net/XUZV5/)

```
<div style="height:100px;width:300px;">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Mars-Schiaparelli.jpg/280px-Mars-Schiaparelli.jpg" style="width:100%;height:100px;"/>
</div>​ 
```

# ios - 从 URL 加载 XML 内容时 iOS 设备和模拟器之间的区别

> ID：13193454
> 
> 赞同：0
> 
> 时间：2012-11-02T10:30:20.840
> 
> 标签：ios, xml, ios-simulator

以下代码接收并打印来自给定 URL 的 XML：

```
NSURL *url = [NSURL URLWithString:urlString];
NSString *xmlString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
NSLog(@"%@", xmlString); 
```

当代码在模拟器上执行时，XML 字段之一是：

```
<string><![CDATA[€ 45]]></string> 
```

而当代码在 iOS 设备上执行时，相同的 XML 字段显示为：

```
<string><![CDATA[45 €]]></string> 
```

然而，当有美元符号而不是欧元符号时，这不会发生，在这两种情况下，该字段都是：

```
<string><![CDATA[$ 45]]></string> 
```

关于为什么会发生这种情况的任何想法，或者可以做些什么？

非常感谢任何输入。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:54:24.310

您的移动设备和开发机器的区域设置不一样，这对智能 Web 服务产生了影响。

根据我的经验，一些 API`Accept-Language`会自动添加，然后后端尝试最好从本地化数据库中获取数据，但由于所有测试都是针对英语设备配置进行的，因此失败了。手动添加首选语言标题而不是依赖系统配置帮助我们避免了此类问题。

# asp.net - Membership.CreateUser 应该失败但不会

> ID：13193455
> 
> 赞同：0
> 
> 时间：2012-11-02T10:30:22.747
> 
> 标签：asp.net, membership

我正在为测试目的创建用户，使用：

```
string username = ...
string password = ...
string email = "******** not a valid email address! *********";
MembershipUser NewUser = Membership.CreateUser(userName, password, email, "no question", "no answer", true, out createStatus);
if (NewUser == null)
{
  switch (createStatus)
  {
    case MembershipCreateStatus.DuplicateUserName:
      throw new Exception("There already exists a user with this username.");
    case MembershipCreateStatus.InvalidEmail:
      throw new Exception("There email address you provided in invalid.");
    case MembershipCreateStatus.InvalidPassword:
      throw new Exception("The password you provided is invalid. It must be seven characters long.");
    default:
      throw new Exception("There was an unknown error; the user account was NOT created.");
  }
} 
```

执行此操作时，将创建一个新用户，它不会因 NewUser==null, **MembershipCreateStatus.InvalidEmail**而失败，这是我所期望的。

知道为什么吗？

这是 config 中的成员资格部分（如果有影响的话），尽管我不知道如何：

```
 <membership defaultProvider="myProvider">
  <providers>
    <add
            name="myProvider"
            applicationName="/"
            connectionStringName="myconnectionsString"
            enablePasswordRetrieval="true"
            enablePasswordReset="true"
            passwordFormat="Clear"
            requiresQuestionAndAnswer="false"
            requiresUniqueEmail="true"
            minRequiredNonalphanumericCharacters="0"
            type="System.Web.Security.SqlMembershipProvider"
            />
  </providers>
</membership> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:09:29.177

从反射器，这是 SqlMembershipProvider 中的电子邮件验证

```
 if (!SecUtility.ValidateParameter(ref email, this.RequiresUniqueEmail, this.RequiresUniqueEmail, false, 0x100))
    {
        status = MembershipCreateStatus.InvalidEmail;
        return null;
    }

internal static bool ValidateParameter(ref string param, bool checkForNull, bool checkIfEmpty, bool checkForCommas, int maxSize)
{
    if (param == null)
    {
        return !checkForNull;
    }
    param = param.Trim();
    return (((!checkIfEmpty || (param.Length >= 1)) && ((maxSize <= 0) || (param.Length <= maxSize))) && (!checkForCommas || !param.Contains(",")));
} 
```

看起来它不在乎是否有有效的电子邮件，只是提供了一些东西。您需要从客户端处理它或覆盖 SqlMembershipProvider。

# testing - GIS 应用测试指南

> ID：13193458
> 
> 赞同：5
> 
> 时间：2012-11-02T10:30:33.473
> 
> 标签：testing, gis, performance-testing, esri, gui-testing

我是一名专业的软件测试员，迄今为止我一直在研究各种技术。我得到了一个新任务，它是一个 GIS 应用程序。我不知道如何测试 GIS 应用程序，测试时应考虑哪些参数等。如果有人能帮助我提供一些测试 GIS 应用程序的指南，我将不胜感激。

先感谢您。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T14:48:05.943

Ashok，可能从被问到问题的那一刻起，您就变成了 GIS 测试专家，但让我尝试回答 )))

我会专注于应用程序应该如何处理几何图形：

1.  它是否考虑了正确的几何类型，是否忽略了不正确的几何类型

2.  如果应用程序基于原始几何构建自己的几何，我会尝试不同的拓扑，这样做可能会出现问题。比如说，应用程序应该在一些原始几何图形的左侧 5 px 处绘制一个几何图形，与之平行。我会尝试一个小于 10 px 直径的循环，以便没有剩余 5 px 的空间。等等

3.  我会测试数据的巨大价值，那么如果应用程序尝试使用此类几何图形的全球网络会怎样。

# ruby-on-rails - Rails，对所有应用程序使用单个延迟作业实例

> ID：13193459
> 
> 赞同：0
> 
> 时间：2012-11-02T10:30:33.727
> 
> 标签：ruby-on-rails, delayed-job

我有一台运行多个 RoR 应用程序的服务器。其中一些需要delayed_job 来处理图片大小调整和其他任务。目前，我正在为每个应用程序运行延迟作业......这会导致更高的内存消耗。

是否可以**在服务器上运行共享的延迟作业实例，**以供应用程序使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:33:35.177

那会很可疑。Delayed_job 应该与请求作业的应用程序使用相同的代码库运行 - 它使用此事实进行作业序列化/反序列化，否则将非常困难。在您的情况下，作业可能相似，但在某些时候，其中一个应用程序将安排延迟过程根本无法理解的作业。

# msbuild - MSbuild 和项目优化

> ID：13193460
> 
> 赞同：0
> 
> 时间：2012-11-02T10:30:35.207
> 
> 标签：msbuild, msbuild-4.0

我正在使用 MSbuild 类从我的程序模块编译 Visual Studio 2010 项目。但我找不到如何告诉编译器它必须使用哪些优化标志。MSBuild 上只有 Optimize 属性，.vcxproj 文件中只有标签。但我想玩这样的编译器开关，如 /Os /Ot /Oi 等。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:56:53.480

MSBuild中有一个标准的[CL Task](http://msdn.microsoft.com/en-us/library/ee862477.aspx)，表示为

```
<ClCompile> 
```

.vcxproj 文件中的标记。所以可以通过这个任务的参数来玩编译器开关

# c# - 如何向 FXCop 添加自定义规则以避免方法中的 == 运算符

> ID：13193463
> 
> 赞同：0
> 
> 时间：2012-11-02T10:30:50.993
> 
> 标签：c#, fxcop

我想添加一个自定义规则，以避免在类的方法中使用“==”运算符。例如，在下面的方法中，我需要使用*string.Compare(str1, str2,StringComparison.Ordinal);避免**'str1==str2' ;* .所以我需要检查这种类型的代码是否出现在任何方法中

 *```
public void StringTest2()
    {
        string str1 = "Hello";
        string str2 = "HELLO";
        if (str1 == str2)
        {
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:58:21.747

拒绝吧。

[string == 运算符](http://msdn.microsoft.com/en-us/library/system.string.op_equality.aspx)已经执行了序数比较，并且在IMO 中比坚持使用`string.Compare`.

即使您*确实*想要明确地进行序数字符串比较，我也建议您使用[`string.Equals(string, string, StringComparison)`](http://msdn.microsoft.com/en-us/library/t4411bks.aspx)而不是`Compare`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:00:03.773

```
**The below code checks both the assignment and equal to operator in an assembly**

public override ProblemCollection Check(Member member)
            {
                var method = member as Method;
                if (method == null)
                    return null;
                if (method.Instructions.Count > 0)
                {
                    foreach (var instruction in method.Instructions)
                    {
                        if (instruction != null)
                            if ( instruction.OpCode == OpCode.Ceq)
                            {
                                var resolution = GetResolution(member.Name.Name);
                                var problem = new Problem(resolution, member)
                                                  {
                                                      Certainty = 95,
                                                      FixCategory = FixCategories.Breaking,
                                                      MessageLevel = MessageLevel.Warning
                                                  };
                                Problems.Add(problem);
                            }
                    }
                }
                return base.Problems;
            } 
```*

# snmp - 警告：无法连接到 agentx 主代理 ([NIL])

> ID：13193471
> 
> 赞同：4
> 
> 时间：2012-11-02T10:31:46.597
> 
> 标签：snmp, net-snmp

我已经在我的系统上安装了 net-snmp5.7.2，我已经为我的应用程序编写了 app_agent.conf 并且

```
agentXSocket    udp:X.X.X.X:1610 
```

并导出 SNMPCONFIGPATH=path_to_app_agent.conf

我还在 /usr/etc/snmp/snmp.conf 中写了 snmpd.conf

```
trap2sink  X.X.X.Y 
agentXSocket    udp:X.X.X.X:1610 
```

我的 /etc/snmp/ 和 /var/net-snmp/ 中还有两个 snmpd.conf

来自 /etc/snmp 的配置：

```
com2sec notConfigUser  default       public
com2sec notConfigUser  v1            notConfigUser
com2sec notConfigUser  v1            notConfigUser
view    systemview    included   .1.3.6.1.2.1.1
view    systemview    included   .1.3.6.1.2.1.25.1.1
access notConfigGroup "" any noauth exact systemview none none 
pass .1.3.6.1.4.1.4413.4.1 /usr/bin/ucd5820stat 
```

来自 /var/net-snmp 的配置：

```
 setserialno 1322276014
   ifXTable .1 14:0 18:0x $
   ifXTable .2 14:0 18:0x $
   ifXTable .3 14:0 18:0x $
   engineBoots 14
   oldEngineID 0x80001f888000e17f6964b28450 
```

我已经启动了 snmpd 和 snmptrapd。现在在我的代码中，我正在调用

```
netsnmp_ds_set_boolean(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_ROLE, 1);
init_agent("app_agent");
init_snmp("app_agent"); 
```

init_snmp 发出警告

**警告：无法连接到 agentx 主代理（[NIL]）：**

我不知道为什么？？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-22T15:18:03.423

这基本上是说您编写的子代理未能连接到 NetSNMP 主代理，如消息所示。在 Linux 中，默认情况下，agentx 将尝试使用 /var/agentx/master 通过套接字建立连接。以下提示可能会有所帮助：

1.  在有权访问套接字 ex sudo 的适当权限下运行您的子代理
2.  如果尚未指定，请检查您的 snmpd.conf 中的套接字设置（位置不同），例如 `agentxsocket /var/agentx/master`和`agentxperms 777 777`
3.  重新启动 NetSNMP 以使任何更改生效`sudo service snmpd restart`；或者作为一个选项，您可以尝试停止服务`sudo service snmpd stop`并以调试模式运行实例，`snmpd -f -Lo -Dagentx`这很可能会输出有关子代理连接的有用信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-13T04:09:11.793

我现在用 quagga 和 ospfd 遇到了这个问题，在做了 之后`strace -f -p PID`，在输出中注意到了这一点：

```
connect(14, {sa_family=AF_FILE, path="/var/agentx/master"}, 110) = -1 EACCES (Permission denied) 
```

所以我：

```
$ ls -al /var/agentx/
total 8
drwx------   2 root root 4096 Sep 12 20:50 .
drwxr-xr-x. 27 root root 4096 Sep 12 20:13 ..
srwxrwxrwx   1 root root    0 Sep 12 20:50 master 
```

然后我：

```
$ chmod 755 /var/agentx/ 
```

zebra 和 ospfd 立即连接了它们的 Agentx 子网。

```
$ tail -10f /var/log/quagga/zebra.log
2014/09/12 20:52:59 ZEBRA: snmp[info]: NET-SNMP version 5.5 AgentX subagent connected

$ tail -10f /var/log/quagga/ospfd.log
2014/09/12 20:52:59 OSPF: snmp[info]: NET-SNMP version 5.5 AgentX subagent connected 
```

这是在 RHEL6 上运行 quagga-0.99.23-2014062401。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-05T14:02:33.650

有类似的问题，无论是使用 unix Sockets 还是 Tcp:localhost:750 我仍然收到相同的错误消息：

```
/var/log/quagga/ospfd.log:  warning, failed to connect to Master AgentX [nill] or [tcp:localhost:750]. 
```

我通过禁用 SELINUX 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-10T22:49:55.730

这不是您问题的答案，但是当我的 snmpd 服务未正确启动或关闭时，我也收到“警告：无法连接到 agentx 主代理（[NIL]）：”消息。对于我的 SNMP 子代理，我使用了他们提供的示例 example-demon.c，并发现在每个循环上处理 agent_check_and_process(0) 时，我会不间断地（大约每秒）收到此消息。

```
while (true) {
    agent_check_and_process(0); /* 0 == don't block */
} 
```

这就是我修复它的方法。

```
netsnmp_transport *snmpTransport;
while( true ) {
        // Check to see snmpd is still running
        snmpTransport = netsnmp_transport_open_client("agentx", NULL);
        if (snmpTransport == NULL)
        {
            // Just went down?
            if (snmpAgentDown == false)
            {
                snmp_log( LOG_INFO, "Net-SNMP Agent is down\n" );
                snmpAgentDown = true;
            }

            Sleep(5000); // Sleep for a 5 sec
        } else
        {
            if (snmpAgentDown)
            {
                snmp_log( LOG_INFO, "Net-SNMP Agent is back up\n" );
                snmpAgentDown = false;
            }

            // Close connection test
            snmpTransport->f_close(snmpTransport); // This burn me without; its needed
            netsnmp_transport_free(snmpTransport);

            // Process SNMP request and notifications
            agent_check_and_process( 0 ); // 0 == don't block, 1 = block
            Sleep(1); // Sleep for 1ms; Need to sleep thread, but need subAgent to be responsive too
        }
        i++;
    } 
```

现在，如果 snmpd 出现故障，我的应用程序可以检测到它已关闭，并且不会处理 agent_check_and_process()，从而停止“警告：无法连接到 agentx 主代理 ([NIL]):”的出现。如果 snmpd 恢复，则它会处理它。

最后说明：我根据 net-snmp-5.7.2 包中的 subagent.c 文件 subagent_open_master_session() 函数确定该代码。还需要 snmpTransport->f_close(snmpTransport) 并通过遵循 snmp_close() 在 subagent_open_master_session() 函数末尾所做的事情来确定这一点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-11T10:21:39.747

我已经解决了 OS Ubuntu 17.07 中下一条命令行的问题

1.  更改代码（添加行）

`view systemview included .1.3.6.1.2.1.1`

**`view systemview included .1.3.6.1.2.1.2`**

`view systemview included .1.3.6.1.2.1.25.1.1`

代替

`view systemview included .1.3.6.1.2.1.1`

`view systemview included .1.3.6.1.2.1.25.1.1`

2.  写下新`master agentx`行`/etc/snmpd.conf`
3.  重启**snmpd**恶魔：

`sudo /etc/init.d/snmpd restart`或者`sudo service snmpd restart`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-05T04:31:24.240

由于 Net-SNMP 的子代理有时无法从配置文件中读取主代理的地址，所以您甚至可以尝试

```
 /* set the location of master agent */
  netsnmp_ds_set_string(NETSNMP_DS_APPLICATION_ID,
                        NETSNMP_DS_AGENT_X_SOCKET, "udp:X.X.X.X:1610"); 
```

在调用之前将这些行写在 agentx 代码中`init_agent()`。

# java - 数字键盘可以生成什么 Java KeyEvent？

> ID：13193475
> 
> 赞同：2
> 
> 时间：2012-11-02T10:32:05.437
> 
> 标签：java, keyevent

在一个摇摆程序中，我试图使用键绑定专门从键盘上的数字键盘键接收输入。

```
myPanel.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_NUMPAD8, 0), “numpad8”);
myPanel.getActionMap().put(“numpad8”, numPad8); 
```

如果我按预期打开了数字锁定，则工作正常，但是如果我添加：

```
myPanel.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_KP_UP, 0), “numpad8”); 
```

如果没有 num lock，我的键盘不会导致调用 numPad8 Action（实际上它似乎会生成 KeyEvent.VK_UP ）。这让我感到惊讶，因为 KeyEvent 的文档指定 KeyEvent.VK_UP 是

> 非数字键盘向上箭头键的常量。

和 KeyEvent.VK_KP_UP

> 数字键盘向上箭头键的常量。

所以我的问题是：如果我希望我的代码支持尽可能多的键盘设置，我应该从数字键盘获得什么 KeyEvents？例如，我是否应该在上面添加 KeyEvent.VK_8 以确保安全？

# c# - 使用用户控件创建的数据网格未显示在 Windows Phone 7 中

> ID：13193479
> 
> 赞同：2
> 
> 时间：2012-11-02T10:32:12.413
> 
> 标签：c#, windows-phone-7

我需要创建一个只显示 6 行和 0 列的数据网格。我创建了一个用户控件，其中包含以下数据网格

```
<sdk:DataGrid Grid.Column="1" x:Name="Customisedgrid" BorderBrush="GreenYellow"     
     BorderThickness="3" Background="Aqua" AutoGenerateColumns="False" 
     HorizontalAlignment="Left" Height="281" Margin="48,98,0,0" 
     Style="{StaticResource CustomDataGridStyle}" VerticalAlignment="Top" 
     Width="384" Itemsource ="{Binding S_BindData}"  
     CellStyle="{StaticResource DataGridCellStyle1}"> 
```

一旦我的用户控件准备就绪，我将在 mainpage.cs 中引用它，如下所示

```
private void ContentPanel_Loaded(object sender, RoutedEventArgs e)
{
  //instance of my usercontrol
  CustomGrid custom = new CustomGrid();
  //added my usercontrol to a stackpanel(GridOuterPanel)
  GridOuterPanel.Children.Add(custom);
} 
```

我的问题是，一旦我运行我的应用程序，我没有得到任何数据网格，我只查看一个空白页......

# linux - XAMPP 或 /opt 中的任何其他服务工具？安全

> ID：13193482
> 
> 赞同：1
> 
> 时间：2012-11-02T10:32:19.837
> 
> 标签：linux, tomcat, ubuntu, xampp

我正在使用 Xampp for Linux 和 Tomcat 进行开发（类似于 Windows 上的 Xampp）。很多程序如/IDEA、Tomcat、Xampp等都推荐安装在`/opt`现在听说不建议以root身份运行服务，但是在Ubuntu上（我正在使用这个）解压任何目录到/opt意味着它属于根所有者和根组。根据 Linux 页面上的说明，这可能特定于 Xampp：

> *   第 2 步：安装下载后只需键入以下命令：
>     
>     
>     
>     转到 Linux shell 并以系统管理员 root 身份登录：
>     
>     
>     
>     苏
>     
>     
>     
>     将下载的存档文件解压缩到 /opt：

```
tar xvfz xampp-linux-1.8.1.tar.gz -C /opt 
```

> ```
> Warning: Please use only this command to install XAMPP. DON'T use any Microsoft Windows tools to extract the archive, it won't work.
> 
> Warning 2: already installed XAMPP versions get overwritten by this command. 
> ```
> 
> 就这样。XAMPP 现在安装在 /opt/lampp 目录下。* 第 3 步：开始 要启动 XAMPP，只需调用以下命令：
> 
> /opt/lampp/lampp 启动

将它放在这里意味着 Apache 必须以 root 身份运行，因为它只能`sudo`在 Ubuntu 上运行。

这可能是 Ubuntu 特有的问题。是吗？因为 Xampp 是一个开发工具，所以我在这里发布了这个，因为我更有可能从在 Ubuntu（和其他 Linux 系统）上使用它的开发人员那里找到合适的答案。如果在其他系统上发生同样的问题，我将不胜感激，我注意到我的生产环境也在 /opt 中安装了 Tomcat，但属于`tomcat: tomcat`

这里的问题是如何为 /opt 下的所有工具解决这个问题，因为即使 Xampp 可能不是我需要的工具，我仍然想将 Tomcat 放在 /opt 下以复制我的生产环境，同样的事情肯定会发生除非这只是一个 Ubuntu 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:03:27.263

Ubuntu 和其他一些发行版与一般 Linux 原则不同，在这些原则中，您在安装操作系统时创建的帐户被添加到可以使用以下命令查看的特定组中：

```
groups username 
```

您会注意到 root 不在其中。也无法登录或登录`su`root 帐户。sudo 最有可能是一个已被授予从其他帐户使用的权限的命令，所以我想“sudo”命令对用户的文件权限为 775：`root:root`

从而从 root 启动服务`/opt' does not run them as``

# java - 在 oracle 中对数字进行类似操作

> ID：13193483
> 
> 赞同：0
> 
> 时间：2012-11-02T10:32:26.900
> 
> 标签：java, oracle, jpa

这是一个关于 java 的项目，带有`openjpa ORM`. `NUMBER(10,2)`我对Oracle 数据库中的类型选择有问题。

和 numbers中的数字类型`JPA is BigDecimal`可以是整数而不是整数，例如：

```
123456
or 123456,01; 123456,15 
```

在表示层，用户有全局过滤器，但不仅限于此列，他可以在其中选择列和运算符（如、等于或介于）并定义值。

例如： column1 like '%56%'

表示层的数字也有 presision 2，所以：

```
123456,00 ->'123456,00'
123456,01 -> '123456,01' 
```

当 Oracle 数据库像 opearaion 一样执行时，nuber 被转换为字符串类型：

```
123456,00 -> '123456'
and 123456,01 -> '123456,01' 
```

所以操作 column1 的结果`like '%,0%'`只有

`123456,01`但不是两者兼而有之。

我也尝试像[这里](https://stackoverflow.com/questions/9341668/create-custom-jpa-query-function)一样调用本机 SQL 函数，但我们使用 OpenJPA 1.2.3 和 JPA 1.0 实现。

请帮助我找到解决问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:29:21.190

我不知道这是否对您有帮助，但在 Oracle 方面您应该使用：

```
select * 
from your_table
where to_char(your_column,'99999999.99') like '%.0%'; 
```

# c++ - 如何在 C++ 中声明原子向量

> ID：13193484
> 
> 赞同：42
> 
> 时间：2012-11-02T10:32:30.307
> 
> 标签：c++, stl, c++11, atomic

我打算声明一个原子变量向量，用作多线程程序中的计数器。这是我尝试过的：

```
#include <atomic>
#include <vector>

int main(void)
{
  std::vector<std::atomic<int>> v_a;
  std::atomic<int> a_i(1);
  v_a.push_back(a_i);
  return 0;
} 
```

这是 gcc 4.6.3 烦人的冗长错误消息：

```
In file included from /usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++allocator.h:34:0,
             from /usr/include/c++/4.6/bits/allocator.h:48,
             from /usr/include/c++/4.6/vector:62,
             from test_atomic_vec.h:2,
             from test_atomic_vec.cc:1:
/usr/include/c++/4.6/ext/new_allocator.h: In member function ‘void __gnu_cxx::new_allocator<_Tp>::construct(__gnu_cxx::new_allocator<_Tp>::pointer, const _Tp&) [with _Tp = std::atomic<int>, __gnu_cxx::new_allocator<_Tp>::pointer = std::atomic<int>*]’:
/usr/include/c++/4.6/bits/stl_vector.h:830:6:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::value_type = std::atomic<int>]’
test_atomic_vec.cc:10:20:   instantiated from here
/usr/include/c++/4.6/ext/new_allocator.h:108:9: error: use of deleted function ‘std::atomic<int>::atomic(const std::atomic<int>&)’
/usr/include/c++/4.6/atomic:538:7: error: declared here
In file included from /usr/include/c++/4.6/vector:70:0,
             from test_atomic_vec.h:2,
             from test_atomic_vec.cc:1:
/usr/include/c++/4.6/bits/vector.tcc: In member function ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterator, _Args&& ...) [with _Args = {const std::atomic<int>&}, _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<std::atomic<int>*, std::vector<std::atomic<int> > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = std::atomic<int>*]’:
/usr/include/c++/4.6/bits/stl_vector.h:834:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::value_type = std::atomic<int>]’
test_atomic_vec.cc:10:20:   instantiated from here
/usr/include/c++/4.6/bits/vector.tcc:319:4: error: use of deleted function ‘std::atomic<int>::atomic(const std::atomic<int>&)’
/usr/include/c++/4.6/atomic:538:7: error: declared here
/usr/include/c++/4.6/bits/stl_vector.h:834:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::value_type = std::atomic<int>]’
test_atomic_vec.cc:10:20:   instantiated from here
/usr/include/c++/4.6/bits/vector.tcc:319:4: error: use of deleted function ‘std::atomic<int>& std::atomic<int>::operator=(const std::atomic<int>&)’
/usr/include/c++/4.6/atomic:539:15: error: declared here
In file included from /usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++allocator.h:34:0,
             from /usr/include/c++/4.6/bits/allocator.h:48,
             from /usr/include/c++/4.6/vector:62,
             from test_atomic_vec.h:2,
             from test_atomic_vec.cc:1:
/usr/include/c++/4.6/ext/new_allocator.h: In member function ‘void __gnu_cxx::new_allocator<_Tp>::construct(__gnu_cxx::new_allocator<_Tp>::pointer, _Args&& ...) [with _Args = {std::atomic<int>}, _Tp = std::atomic<int>, __gnu_cxx::new_allocator<_Tp>::pointer = std::atomic<int>*]’:
/usr/include/c++/4.6/bits/vector.tcc:306:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterator, _Args&& ...) [with _Args = {const std::atomic<int>&}, _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<std::atomic<int>*, std::vector<std::atomic<int> > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = std::atomic<int>*]’
/usr/include/c++/4.6/bits/stl_vector.h:834:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::value_type = std::atomic<int>]’
test_atomic_vec.cc:10:20:   instantiated from here
/usr/include/c++/4.6/ext/new_allocator.h:114:4: error: use of deleted function ‘std::atomic<int>::atomic(const std::atomic<int>&)’
/usr/include/c++/4.6/atomic:538:7: error: declared here
In file included from /usr/include/c++/4.6/vector:61:0,
             from test_atomic_vec.h:2,
             from test_atomic_vec.cc:1:
/usr/include/c++/4.6/bits/stl_algobase.h: In static member function ‘static _BI2 std::__copy_move_backward<true, false, std::random_access_iterator_tag>::__copy_move_b(_BI1, _BI1, _BI2) [with _BI1 = std::atomic<int>*, _BI2 = std::atomic<int>*]’:
/usr/include/c++/4.6/bits/stl_algobase.h:581:18:   instantiated from ‘_BI2 std::__copy_move_backward_a(_BI1, _BI1, _BI2) [with bool _IsMove = true, _BI1 = std::atomic<int>*, _BI2 = std::atomic<int>*]’
/usr/include/c++/4.6/bits/stl_algobase.h:590:34:   instantiated from ‘_BI2 std::__copy_move_backward_a2(_BI1, _BI1, _BI2) [with bool _IsMove = true, _BI1 = std::atomic<int>*, _BI2 = std::atomic<int>*]’
/usr/include/c++/4.6/bits/stl_algobase.h:661:15:   instantiated from ‘_BI2 std::move_backward(_BI1, _BI1, _BI2) [with _BI1 = std::atomic<int>*, _BI2 = std::atomic<int>*]’
/usr/include/c++/4.6/bits/vector.tcc:313:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterator, _Args&& ...) [with _Args = {const std::atomic<int>&}, _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<std::atomic<int>*, std::vector<std::atomic<int> > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = std::atomic<int>*]’
/usr/include/c++/4.6/bits/stl_vector.h:834:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::value_type = std::atomic<int>]’
test_atomic_vec.cc:10:20:   instantiated from here
/usr/include/c++/4.6/bits/stl_algobase.h:546:6: error: use of deleted function ‘std::atomic<int>& std::atomic<int>::operator=(const std::atomic<int>&)’
/usr/include/c++/4.6/atomic:539:15: error: declared here
In file included from /usr/include/c++/4.6/vector:63:0,
             from test_atomic_vec.h:2,
             from test_atomic_vec.cc:1:
/usr/include/c++/4.6/bits/stl_construct.h: In function ‘void std::_Construct(_T1*, _Args&& ...) [with _T1 = std::atomic<int>, _Args = {std::atomic<int>}]’:
/usr/include/c++/4.6/bits/stl_uninitialized.h:77:3:   instantiated from ‘static _ForwardIterator std::__uninitialized_copy<_TrivialValueTypes>::__uninit_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::move_iterator<std::atomic<int>*>, _ForwardIterator = std::atomic<int>*, bool _TrivialValueTypes = false]’
/usr/include/c++/4.6/bits/stl_uninitialized.h:119:41:   instantiated from ‘_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::move_iterator<std::atomic<int>*>, _ForwardIterator = std::atomic<int>*]’
/usr/include/c++/4.6/bits/stl_uninitialized.h:259:63:   instantiated from ‘_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = std::move_iterator<std::atomic<int>*>, _ForwardIterator = std::atomic<int>*, _Tp = std::atomic<int>]’
/usr/include/c++/4.6/bits/stl_uninitialized.h:269:24:   instantiated from ‘_ForwardIterator std::__uninitialized_move_a(_InputIterator, _InputIterator, _ForwardIterator, _Allocator&) [with _InputIterator = std::atomic<int>*, _ForwardIterator = std::atomic<int>*, _Allocator = std::allocator<std::atomic<int> >]’
/usr/include/c++/4.6/bits/vector.tcc:343:8:   instantiated from ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterator, _Args&& ...) [with _Args = {const std::atomic<int>&}, _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<std::atomic<int>*, std::vector<std::atomic<int> > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = std::atomic<int>*]’
/usr/include/c++/4.6/bits/stl_vector.h:834:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::atomic<int>, _Alloc = std::allocator<std::atomic<int> >, std::vector<_Tp, _Alloc>::value_type = std::atomic<int>]’
test_atomic_vec.cc:10:20:   instantiated from here
/usr/include/c++/4.6/bits/stl_construct.h:76:7: error: use of deleted function ‘std::atomic<int>::atomic(const std::atomic<int>&)’
/usr/include/c++/4.6/atomic:538:7: error: declared here 
```

我该如何解决这个问题？

当我用 注释掉该行时，错误消失了`push_back()`。

**编辑：**我编辑了帖子......对于那些看到第一篇帖子的人来说，错误是我使用`gcc`而不是`g++`：\

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-02T11:47:39.990

正如评论中提到的这个[密切相关的问题](https://stackoverflow.com/questions/12003024/error-with-copy-constructor-assignment-operator-for-a-class-which-has-stdatomi)`std::atomic<T>`中所述，它不是可复制的，也不是可复制的。

不具有这些属性的对象类型不能用作`std::vector`.

但是，应该可以围绕`std::atomic<T>`可复制构造和可复制分配的元素创建包装器。它必须使用`load()`和的`store()`成员函数`std::atomic<T>`来提供构造和赋值（这是上述问题的公认答案所描述的想法）：

```
#include <atomic>
#include <vector>

template <typename T>
struct atomwrapper
{
  std::atomic<T> _a;

  atomwrapper()
    :_a()
  {}

  atomwrapper(const std::atomic<T> &a)
    :_a(a.load())
  {}

  atomwrapper(const atomwrapper &other)
    :_a(other._a.load())
  {}

  atomwrapper &operator=(const atomwrapper &other)
  {
    _a.store(other._a.load());
  }
};

int main(void)
{
  std::vector<atomwrapper<int>> v_a;
  std::atomic<int> a_i(1);
  v_a.push_back(a_i);
  return 0;
} 
```

编辑：正如 Bo Persson 正确指出的那样，包装器执行的复制操作不是原子的。它使您能够复制原子对象，但副本本身不是原子的。这意味着对原子的任何并发访问都不能使用复制操作。这意味着不能同时执行对向量本身的操作（例如添加或删除元素）。

示例：如果一个线程修改了一个原子中存储的值，而另一个线程将新元素添加到向量中，则可能会发生向量重新分配，并且第一个线程修改的对象可能会从向量中的一个位置复制到另一个位置. 在这种情况下，第一个线程执行的元素访问和第二个线程触发的复制操作之间将存在数据竞争。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-10-13T18:46:06.130

首先回答您的标题问题：您可以轻松地*声明*a `std::vector<std::atomic<...>>`，就像您在示例中所做的那样。

但是，由于缺少`std::atomic<>`对象的复制或移动构造函数，您对 的使用`vector`将受到限制，因为您在`push_back()`. 基本上你不能做任何会调用任何一个构造函数的事情。

这意味着您的向量的大小必须在构造时固定，并且您应该使用`operator[]`or来操作元素`.at()`。对于您的示例代码，以下工作¹：

```
std::vector<std::atomic<int>> v_a(1);
std::atomic<int> a_i(1); 
v_a[0] = a_i; 
```

如果“施工时固定尺寸”的限制过于繁重，您可以`std::deque`改用。这使您可以*放置*​​对象，动态增长结构而无需复制或移动构造函数，例如：

```
std::deque<std::atomic<int>> d;

d.emplace_back(1);
d.emplace_back(2);
d.pop_back(); 
```

但是，仍然存在一些限制。例如，您可以`pop_back()`，但不能使用更通用的`erase()`. 限制是有道理的：通常`erase()`使用的连续存储块的中间`std::deque`需要移动元素，因此需要存在复制/移动构造函数或赋值运算符。

如果您不能忍受这些限制，您可以按照其他答案中的建议创建一个包装类，但要注意底层实现：一旦使用对象就移动它*几乎没有意义*`std::atomic<>`：它会破坏同时访问的任何线程对象。复制/移动构造函数的唯一合理使用通常是在将这些对象的集合发布到其他线程之前进行初始设置。

* * *

¹除非，也许，您使用 Intel 的`icc`编译器，它在编译此代码时[因内部错误而失败。](https://godbolt.org/g/ZMyyCQ)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-02T10:55:41.150

在我看来，`atomic<T>`没有复制构造函数。据我所知，也不是移动构造函数。

一种解决方法可能是用于`vector<T>::emplace_back()`在向量中就地构造原子。唉，我现在没有 C++11 编译器，否则我会去测试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-23T13:04:05.323

正如其他人已经正确指出的那样，编译器错误的原因是 std::atomic 明确禁止复制构造函数。

我有一个用例，我想要 STL 映射的便利（特别是我使用映射映射来实现稀疏的二维原子矩阵，所以我可以做类似的事情`int val = my_map[10][5]`）。在我的情况下，程序中只有这个映射的一个实例，所以它不会被复制，甚至更好的是我可以使用大括号初始化来初始化整个事物。所以非常不幸的是，虽然我的代码永远不会尝试复制单个元素或地图本身，但我被阻止使用 STL 容器。

我最终采用的解决方法是将 std::atomic 存储在 std::shared_ptr 中。这有优点，但也可能有缺点：

优点：

*   可以在任何 STL 容器中存储 std::atomic
*   不要求/限制仅使用某些 STL 容器方法。

赞成或反对（这方面的可取性取决于程序的用例）： - 给定元素只有一个*共享*原子。所以复制 shared_ptr 或 STL 容器仍然会为元素生成一个共享原子。换句话说，如果你复制 STL 容器并修改其中一个原子元素，另一个容器对应的原子元素也会反映新的值。

在我的情况下，由于我的用例，Pro/Con 特性没有实际意义。

以下是使用此方法初始化 std::vector 的简要语法：

```
#include <atomic>
#include <memory>
#include <vector>

std::vector<std::shared_ptr<std::atomic<int> > > vecAtomicInts
{
    std::shared_ptr<std::atomic<int> >(new std::atomic<int>(1) ),
    std::shared_ptr<std::atomic<int> >(new std::atomic<int>(2) ),
};

// push_back, emplace, etc all supported
vecAtomicInts.push_back(std::shared_ptr<std::atomic<int> >(new std::atomic<int>(3) ) );

// operate atomically on element
vecAtomicInts[1]->exchange(4);

// access random element
int i = *(vecAtomicInts[1]); 
```

# jquery - JQuery 在点击时展开和收缩 div

> ID：13193485
> 
> 赞同：0
> 
> 时间：2012-11-02T10:32:32.103
> 
> 标签：jquery, html, expand, contract

我正在尝试使用 jQuery 在单击链接时扩展和收缩 div 的高度，但我终其一生都无法弄清楚我做错了什么。

这是html；

```
<div id="slider" class="map">
    <div id="map-canvas">this is a test</div>
</div>

<div id="slider-map"><a href="#" id="expand">Expand +</a></div> 
```

CSS中默认滑块高度为300px

这是jQuery；

```
$(document).ready(function() {

    var maxWidth = 500;
    var minWidth = 300;

    $("#expand").click(
        function(){
            var curHeight = $("#slider").height();
            if(curHeight==300)
            {
                $("#slider").animate({height: maxWidth+"px"}, { queue:false, duration:400 });
                $("#expand").html("Contract <small style='font-size:12px;'>-</small>");
            }
            else
            {
                $("#slider").animate({height: minWidth+"px"}, { queue:false, duration:400 });
                $("#expand").html("Expand <small style='font-size:12px;'>+</small>");
            }
        return false;
    });
} 
```

我已经尝试过了，但没有在 map-canvas div 中调用 Google 地图 API，看看这是否是罪魁祸首，但它仍然无法正常工作。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:43:23.340

您忘记关闭 $(document).ready(); 功能

js：

```
$(document).ready(function(){

    var maxWidth = 500;
    var minWidth = 300;

    $("#expand").click(

        function(){
            var curHeight = $("#slider").height();
            alert(curHeight);
            if(curHeight==300)
            {
                $("#slider").animate({height: maxWidth}, { queue:false, duration:400 });
                $("#expand").html("Contract <small style='font-size:12px;'>-</small>");
            }
            else
            {
                $("#slider").animate({height: minWidth}, { queue:false, duration:400 });
                $("#expand").html("Expand <small style='font-size:12px;'>+</small>");
            }
        return false;
    });
}); 
```

CSS：

```
.map
{
    background-color:green;
}

<div id="slider" class="map">
    <div id="map-canvas">this is a test</div>
</div> 
```

html:

```
<div id="slider-map"><a href="#" id="expand">Expand +</a></div> 
```

为我工作。在 chrome 中测试;)

# java - 多线程多球游戏

> ID：13193487
> 
> 赞同：1
> 
> 时间：2012-11-02T10:32:35.140
> 
> 标签：java, multithreading, swing

我正在做一个关于多个球弹跳的学校项目。到目前为止，我设法创建了应用程序，一切正常。但是，我还需要在应用程序中实现多线程，这就是我卡住的地方。我在想一个球一个线程，但我不确定如何实现它。到目前为止，这是我的代码（部分）：

```
public void paintComponent(Graphics g)
        {
            super.paintComponent(g);

            //The balls are painted only after the timer is started
            if(bTimer)
            {
                for(Ball ball:ballList.ballsArrayList) 
                {
                    Thread ballThread = new Thread(ball);
                    ballThread.start();
                    ball.draw(g);

                    /*other code for moving the ball*/
                }
            }
        } 
```

在类 Ball 中：

```
 public void draw(Graphics g) {
          Color color = new Color(this.getColorR(),this.getColorG(),this.getColorB());
          g.setColor(color);
          int radius = this.getsize();
          g.fillOval((int)(this.getX() - radius), (int)(this.getY() - radius), (int)(2 *     
          radius), (int)(2 * radius));

       }

     public void run() {  

            String name = Thread.currentThread().getName();  

            for (int i = 0; i < 200; i++) {  

                //ball.draw(g); ??

                try {  
                    Thread.sleep(50); 
                    System.out.println("Sleeping");
                } catch (Exception ex) {}  
            }  
        } 
```

我在想我可以将 ball.draw() 函数放在线程的 run() 函数中。但我不知道我该怎么做，或者这是否是个好主意。多线程对我来说仍然很难理解和实现 =((

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:38:35.233

不是一个真正的答案，但太长了，无法发表评论。

您应该注意 Swing*不是*线程安全的。所有 Swing 组件都应该在 Event Dispatch Thread 上访问，并且只能在该线程上访问。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)指南。

这意味着每个球可以有一个线程来更新球的位置。但是，如果您在绘画期间访问球的位置，则此访问发生在 EDT 上。这意味着您无法随时更新背景线程中球的位置。您将不得不实施一些锁定或简单地更新 EDT 上的位置。

我不确定你想达到什么目标，但如果你只是想在特定时间间隔更新球的位置，我会选择`javax.swing.Timer`. 此计时器在 EDT 上触发，允许您以线程安全的方式更新位置。Swing wiki 标记包含更多用于在 Swing 中实现动画的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:04:47.143

所有 swing 代码都必须在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上运行。因此，您在代码片段中所做的事情很糟糕。

但是，如果计算球的位置是 CPU 密集型的并且需要时间，您确实希望将逻辑移动到单独的线程中，否则您的 UI 将变得无响应。

这将成为一个典型的[生产者/消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)：一个线程产生坐标，事件调度线程通过绘制球来消耗它们。

# assembly - 优化后对象的破坏顺序

> ID：13193489
> 
> 赞同：2
> 
> 时间：2012-11-02T10:32:41.723
> 
> 标签：assembly, g++, arm, sequence-points

我试图在我的软件中计时一些函数调用来比较不同的实现。

为了获得所需的时序，我正在使用 RAII 结构在函数的开头和结尾读取我的 ARM A9 处理器的 PCCNTR 寄存器。

问题是编译器不尊重我的对象的构造破坏顺序。*这是编译器中的错误还是允许的优化？*

编译器是一个`arm-none-eabi-g++ (Sourcery CodeBench Lite 2012.03-56) 4.6.3`

```
#define GET_TICK(var) \
  asm volatile (\
      "mrc p15, 0, %0, c9, c13, 0;"\
      : "=r" (var)\
      );

struct tick{
  uint32_t &start;
  uint32_t &end;

  tick(uint32_t& s, uint32_t &e) 
    :start(s)
     , end(e)
  {
    GET_TICK(start);
  }

  ~tick(){
    GET_TICK(end);
  }
};

bool mailbox::send(uint32_t &start, uint32_t &end, uint32_t msg){
  tick t(start, end);
  /* now start should have the current timestamp */
  {
    Spinlocker lock(SPINLOCK_LOCK_REG_0); // RAII mutex locker
    uint32_t cnt = mb_msg_max_count + 1;
    do{
      cnt = count();
      if(cnt >= mb_msg_max_count){
        lock.release();
        lock.get();
      }
    }while(cnt >= mb_msg_max_count);
    *(first_message + cnt) = msg;
    inc_counter(); // free function
    MEM_BARRIER; // #define asm volatile("dsb st;")
    /* spinlock should be destroyed but it is only after t */
  }

  return true;
  /* now end should have the current timestamp */
} 
```

生成的汇编代码：

```
83000a64 <mailbox::get(unsigned long&, unsigned long&)>:
83000a64: b530        push  {r4, r5, lr}
83000a66: 4604        mov r4, r0
83000a68: 680b        ldr r3, [r1, #0]
83000a6a: b083        sub sp, #12
83000a6c: 4615        mov r5, r2
83000a6e: ee19 2f1d   mrc 15, 0, r2, cr9, cr13, {0}
83000a72: f44f 41d0   mov.w r1, #26624  ; 0x6800
83000a76: 601a        str r2, [r3, #0]
83000a78: a801        add r0, sp, #4
83000a7a: f6c4 210f   movt  r1, #18959  ; 0x4a0f
83000a7e: f000 f871   bl  83000b64 <Spinlocker::Spinlocker(unsigned long volatile*)>
83000a82: 6823        ldr r3, [r4, #0]
83000a84: 681a        ldr r2, [r3, #0]
83000a86: b18a        cbz r2, 83000aac <mailbox::get(unsigned long&, unsigned long&)+0x48>
83000a88: 6819        ldr r1, [r3, #0]
83000a8a: 1e48        subs  r0, r1, #1
83000a8c: 6018        str r0, [r3, #0]
83000a8e: f3bf 8f4e   dsb st
83000a92: 6864        ldr r4, [r4, #4]
83000a94: 1e51        subs  r1, r2, #1
83000a96: f854 4021   ldr.w r4, [r4, r1, lsl #2]
83000a9a: ee19 0f1d   mrc 15, 0, r0, cr9, cr13, {0} <- timer is read before Spinlock is destroyed. Is this allowed?
83000a9e: 6028        str r0, [r5, #0]
83000aa0: a801        add r0, sp, #4
83000aa2: f000 f885   bl  83000bb0 <Spinlocker::~Spinlocker()> <- Shouldn't this be done before issuing the MCR assembly?
83000aa6: 4620        mov r0, r4
83000aa8: b003        add sp, #12
83000aaa: bd30        pop {r4, r5, pc}
83000aac: a801        add r0, sp, #4
83000aae: f000 f86b   bl  83000b88 <Spinlocker::release()>
83000ab2: a801        add r0, sp, #4
83000ab4: f000 f86e   bl  83000b94 <Spinlocker::get()>
83000ab8: 6823        ldr r3, [r4, #0]
83000aba: 681a        ldr r2, [r3, #0]
83000abc: 2a00        cmp r2, #0
83000abe: d1e3        bne.n 83000a88 <mailbox::get(unsigned long&, unsigned long&)+0x24>
83000ac0: e7f4        b.n 83000aac <mailbox::get(unsigned long&, unsigned long&)+0x48>
83000ac2: bf00        nop 
```

# php - 在 PHP 的函数名中使用“变量”

> ID：13193492
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:33:00.200
> 
> 标签：php, function, variables

可以在函数名中使用变量吗？（如果“是”，那怎么办？）

```
$name = "john";
  function name_function() {
    //Do something
  } 
```

所以我的函数名称将是`john_function()`

你明白我的意思吗 ？

如果我有很多功能，我会做得更好，我会清楚地命名

`john_init()` `john_setup()` `john_save()` `john_clear()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T10:39:20.823

它不能像你想要的那样完成，这似乎是

```
function $name_something(){  } 
```

但是你可以像这样使用[变量函数](http://php.net/manual/en/functions.variable-functions.php)：

```
function john_something()
{
    echo 'called';
}

$name = 'john';

$functionName = $name . '_something';

$functionName(); 
```

虽然不是推荐它，但几乎总是有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T10:43:16.357

`eval()`是一种方式，把我个人认为是icky。

如果您将代码包含在一个类中，您可以使用：

```
class MyCode {
  public static function __callStatic($functionName, $values)
  {
    // $functionName Receive the name of the function
    // $values       Receives an array with all the parameters
    /* Your code per person here */
  }
} 
```

您可以按如下方式调用此函数：

```
MyCode::johnDoesSomething('At home', 'playing with PHP'); 
```

有关详细信息，请参阅：[http ://www.php.net/manual/en/language.oop5.overloading.php#object.call](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T11:03:03.227

在阅读了您对我的回答的问题和批评之后。我认为您只是在寻找 OOP 实现

```
class Person {
  public function __construct() // init()
  {
    /* Do something */        
  }

  public function setup()
  {
    /* Do something */
  }

  /* etc */
} 
```

并按如下方式使用它：

```
$john = new Person(); // __construct() will be executed here automaticaly
$john->setup(); 
```

有关 PHP 中的类和对象的更多信息，请参阅 PHP 文档：[http ://www.php.net/manual/fa/classobj.examples.php](http://www.php.net/manual/fa/classobj.examples.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:43:21.240

用来`create_function`做这样的事情。

请参阅[此处的手册](http://php.net/manual/en/function.create-function.php)

**编辑：**

也请检查`Ariaan's`回复。这更有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T10:35:45.040

尝试这样的事情：

```
$name = "john";
$f =   "function {$name}_function() {
    //Do something
  }";

eval($f);

john_function(); 
```

这是**与您的问题匹配的唯一解决方案**。这是一个糟糕的解决方案（**危险**），你最好避免`eval()`在任何地方使用。

[http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T10:38:15.623

您不能以能够以您建议的方式调用它的方式声明函数。

我会看看[闭包（匿名函数）](http://php.net/manual/en/functions.anonymous.php) - 我怀疑这将是您任务的优雅解决方案。

# spring - 如何扩展 Spring Data JPA @Query 方法注解

> ID：13193500
> 
> 赞同：1
> 
> 时间：2012-11-02T10:33:38.087
> 
> 标签：spring, jpa, annotations, customization, spring-data-jpa

如何扩展 Spring Data JPA @Query 方法注释？

从这篇文章[http://www.javacodegeeks.com/2012/08/hibernate-native-sql-features-into-your.html](http://www.javacodegeeks.com/2012/08/hibernate-native-sql-features-into-your.html)我学习了如何扩展 Spring 数据 JPA 功能，不幸的是文章讲述了 ElementType.TYPE 注释，但我需要了解 ElementType.METHOD 注释以及这个带注释的方法将如何由 spring data jpa 注册和处理。

11052012 1547 -- 我对如何处理方法注释做了进一步的研究，我发现我需要使用 AOP 来使用我的自定义注释处理器拦截原始方法调用。

我做了这个

```
@NoRepositoryBean
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Dynaque {
    String value() default "";
}

@NoRepositoryBean
@Aspect
@Component("dynaqueAopListener")
public class DynaqueAopListener {
    @Pointcut("@annotation(my.repo.engine.package.Dynaque)")
    public void dynaqueMethods() {
    }

    @Around("dynaqueMethods()")
    public Object profile(ProceedingJoinPoint pjp) throws Throwable {
        Method m = ((MethodSignature) pjp.getSignature()).getMethod();
        Dynaque d = null;
        if (m != null) {
            d = m.getAnnotation(Dynaque.class);

        }
        Object output = pjp.proceed();
        //my custom query logic here
        return output;
    }

} 
```

然后我遇到了下一个障碍，我发现 SD JPA 扫描每个存储库接口的所有方法并使用 QueryLookupStrategy 对它们进行 QueryLookup，我不知道如何从 SD - JPA QueryLookup 中排除使用 @Dynaque 注释的方法，以便我可以实现我自己对该方法的查询逻辑。

# iphone - 我们如何使用 NSPredicate 而不是设置 fetchController nil 来搜索所有记录？

> ID：13193502
> 
> 赞同：5
> 
> 时间：2012-11-02T10:33:44.857
> 
> 标签：iphone, objective-c, nspredicate, nsfetchedresultscontroller, nsfetchrequest

我`UITableView`可以使用以下方法轻松显示所有记录：

```
if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Memo" inManagedObjectContext:[appDelegate managedObjectContext]];
[fetchRequest setEntity:entity];

NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"memodate" ascending:NO];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:[appDelegate managedObjectContext] sectionNameKeyPath:nil
                                               cacheName:nil];
self.fetchedResultsController = theFetchedResultsController;

return _fetchedResultsController; 
```

对于搜索记录，我正在执行此操作：

```
- (void)searchBar:(UISearchBar *)aSearchBar textDidChange:(NSString *)searchText {

if (self.searchBar.text ==nil || [self.searchBar.text isEqualToString:@""])
{
    self.fetchedResultsController=nil;
}
else
{
    NSPredicate *predicate =[NSPredicate predicateWithFormat:@"memodesc CONTAINS[cd] %@", self.searchBar.text];
    [_fetchedResultsController.fetchRequest setPredicate:predicate];

}

NSError *error = nil;
if (![[self fetchedResultsController] performFetch:&error]) {
    // Handle error
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();  // Fail
}

[self.tableView reloadData];} 
```

我的问题是，如果 searchText 值为`nil`或，那么搜索所有记录的正确方法是什么`""`

我 `self.fetchedResultsController=nil;` 再次设置检索所有初始结果。

但我不认为这是正确的方法。它应该可以使用谓词吗？

**更新**：

它与这个谓词一起工作

```
 NSPredicate *predicate =[NSPredicate predicateWithFormat:@"1=1"];
        [_fetchedResultsController.fetchRequest setPredicate:predicate]; 
```

但是如果我使用这个，我的应用程序就会崩溃：

```
NSPredicate *predicate =[NSPredicate predicateWithFormat:@"All"];
[_fetchedResultsController.fetchRequest setPredicate:predicate];

Unable to parse the format string "ALL"' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-01-25T08:45:50.283

并迅速：

```
let predicate = NSPredicate(value: true) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-22T07:01:26.520

我知道这是一个旧线程，但无论如何......您也可以使用：

```
[NSPredicate predicateWithFormat:@"TRUEPREDICATE"]; 
```

[Apple 文档中的谓词格式语法](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-02T13:01:44.743

`nil`如果要获取所有实体，只需将谓词设置为。

# javascript - 如何使用jquery在子窗口中找到父窗口控件？

> ID：13193507
> 
> 赞同：0
> 
> 时间：2012-11-02T10:34:27.163
> 
> 标签：javascript, asp.net

目前我在子窗口中使用脚本来访问放置在父窗口中的 asp 按钮 hdnbtnrefresh

```
var btn = top.opener.document.getElementById("hdnbtnrefresh"); 
```

但它返回 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:10:10.313

试试 window.opener.$("#hdnbtnrefresh")

快乐编码！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:37:36.577

为什么不直接使用带有 id 的 jquery 选择器：

```
$("#hdnbtnrefresh") 
```

对于父节点，您可以使用 parent()

```
$("#hdnbtnrefresh").parent() 
```

文档在这里： [http ://api.jquery.com/parent/](http://api.jquery.com/parent/)

另一种方式：

```
$('#hdnbtnrefresh', window.parent.document).html(); 
```

# java - MVC中有多少View对象的实例

> ID：13193508
> 
> 赞同：1
> 
> 时间：2012-11-02T10:34:33.187
> 
> 标签：java, model-view-controller, architecture, svg

我正在尝试创建一个用于编辑 SVG 对象的 MVC 应用程序。我有像`Circle`, `Rectangle`,`Text`作为 Model 和,`CircleView`作为View 的类。`RectangleView``TextView`

*从 MVC 的角度来看，对于形状的每个实例（例如`Circle`）都有一个 View 的实例（例如`CircleView`）是否正确？*

这意味着对于在画布上绘制的 100 个形状，我将获得 100 个 View 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:47:50.897

我认为您误解了 MVC 的概念。您的视图通常是您的画布，而不是您的形状。形状是模型的一部分，您的 XXXView 类不应该存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:44:41.630

在您的情况下，`Model`可以将其理解为一组图形元素。

您的所有图形元素，例如，`Circle`必须实现某个界面（例如）。还有一类将使用这些方法。`Rectangle``Text``GraphicalElement``View`

在你的情况下，我可以`GraphicalElement`用方法介绍接口

```
interface GraphicalElement {
    void draw(Graphich g);
} 
```

并且`View`会遍历你所有的 `GraphicalElement`s来显示它们

```
for (GraphicalElement ge : setOfElements) {
     ge.draw(graphics);
} 
```

# c# - 未从 SOAP 请求中读取参数

> ID：13193509
> 
> 赞同：2
> 
> 时间：2012-11-02T10:34:33.727
> 
> 标签：c#, .net, asmx

我正在编写的 Web 服务出现问题（它是 asmx）。

我有这个方法：

```
 [WebMethod()]
    [SoapDocumentMethod(
        RequestNamespace="http://bsp.XXX.org",
        ResponseNamespace="http://bsp.XXX.org",
        ResponseElementName="PaymentResults",
        RequestElementName="GetPaymentResult",
        Action = "http://bsp.XXX.org/GetPaymentResult")]
    public PaymentResult[] GetPaymentResult(string MerchantRef)
    {
        try
        {
            if (!String.IsNullOrEmpty(MerchantRef))
            {
                return PaymentResultRepository.GetPaymentResults(MerchantRef).ToArray();
            }
            else
            {
                _errorLog.Error("MerchantRef is empty");
            }
        }
        catch (Exception ex)
        {
            _errorLog.Error("Failed to get payment details", ex);
        }
        return new PaymentResult[0];
    }
} 
```

它是从 Oracle Forms 应用程序中调用的。收到的 SOAP 请求是：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" 
        xmlns:xsd="http://www.w3.org/1999/XMLSchema">
    <SOAP-ENV:Body>
        <GetPaymentResult xmlns="http://bsp.XXX.org/" 
                 SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
            <MerchantRef xsi:type="xsd:string">
                 IP/58991/1
            </MerchantRef>
        </GetPaymentResult>
    </SOAP-ENV:Body> 
```

问题是“MerchantRef”在我的方法中始终是一个空字符串......有人对此有任何想法吗？SOAP 请求是否错误？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:52:24.093

原来问题是SOAP请求......

它不喜欢 encodingStyle 属性，一旦删除它就可以完美运行。

即由此：

```
<GetPaymentResult xmlns="http://bsp.XXX.org/" 
             SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"> 
```

到：

```
<GetPaymentResult xmlns="http://bsp.XXX.org/"> 
```

# wordpress - Woocommerce简码分页

> ID：13193510
> 
> 赞同：2
> 
> 时间：2012-11-02T10:34:35.247
> 
> 标签：wordpress, woocommerce

我正在使用最近的产品短代码，`[recent_products per_page="4" columns="2"]` 并且想要分页，因为我在主页上显示产品 - 目前只显示 4 个产品。有没有办法添加分页？

我已经导入了虚拟数据，所以有 45 个产品。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-06-18T04:58:50.567

使用`[recent_products limit="12" columns="4" paginate="true"]`此简码限制 12 意味着一个页面上最多 12 个帖子。更多信息[woocommerce 文档](https://docs.woocommerce.com/document/woocommerce-shortcodes/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T12:59:16.593

您可以考虑一个插件：[WP-PageNavi](http://wordpress.org/extend/plugins/wp-pagenavi/)。为了将它与 Woocommerce 一起使用，只需安装和配置插件，然后将以下代码添加到您的主题中`functions.php`：

```
remove_action('woocommerce_pagination', 'woocommerce_pagination', 10);
function woocommerce_pagination() {
    wp_pagenavi();      
}
add_action( 'woocommerce_pagination', 'woocommerce_pagination', 10); 
```

资料来源：[Mark van der Putten 的博客](http://www.markvanderputten.com/how-to-add-custom-pagination-to-your-woocommerce/)，省略评论。

[此外，您可以在专用的StackExchange Wordpress 站点](https://wordpress.stackexchange.com/)上提出这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T14:05:19.060

从此 github gist 引用[https://gist.github.com/klihelp/7810337](https://gist.github.com/klihelp/7810337)在安装此插件后将以下代码包含到您的 child-theme functions.php 中：[https ://wordpress.org/plugins/prime-strategy-page -导航/](https://wordpress.org/plugins/prime-strategy-page-navi/)

```
<?php
/**
 * This code shows pagination for WooCommerce shortcodes when it's embeded on single pages.
 * Include into functions.php.
 */
if ( ! is_admin() ) {
// ---------------------- FRONTPAGE -------------------
if ( defined('WC_VERSION') ) {
// ---------------------- WooCommerce active -------------------

    /**
     * Set Pagination for shortcodes custom loop on single-pages.
     * @uses $woocommerce_loop;
     */
    add_action( 'pre_get_posts', 'kli_wc_pre_get_posts_query' ); 
    function kli_wc_pre_get_posts_query( $query ) {
        global $woocommerce_loop;

        // Get paged from main query only
        // ! frontpage missing the post_type
        if ( is_main_query() && ( $query->query['post_type'] == 'product' ) || ! isset( $query->query['post_type'] ) ){

          if ( isset($query->query['paged']) ){
            $woocommerce_loop['paged'] = $query->query['paged'];
          }
        }

        if ( ! $query->is_post_type_archive || $query->query['post_type'] !== 'product' ){
            return;
        }

        $query->is_paged = true;
        $query->query['paged'] = $woocommerce_loop['paged'];
        $query->query_vars['paged'] = $woocommerce_loop['paged'];
    }

    /** Prepare Pagination data for shortcodes on pages
     * @uses $woocommerce_loop;
     */
    add_action( 'loop_end', 'kli_query_loop_end' ); 
    function kli_query_loop_end( $query ) {

        if ( ! $query->is_post_type_archive || $query->query['post_type'] !== 'product' ){
            return;
        }

        // Cache data for pagination
        global $woocommerce_loop;
        $woocommerce_loop['pagination']['paged'] = $woocommerce_loop['paged'];
        $woocommerce_loop['pagination']['found_posts'] = $query->found_posts;
        $woocommerce_loop['pagination']['max_num_pages'] = $query->max_num_pages;
        $woocommerce_loop['pagination']['post_count'] = $query->post_count;
        $woocommerce_loop['pagination']['current_post'] = $query->current_post;
    }
    /**
     * Pagination for shortcodes on single-pages 
     * @uses $woocommerce_loop;
     */
    add_action( 'woocommerce_after_template_part', 'kli_wc_shortcode_pagination' ); 
    function kli_wc_shortcode_pagination( $template_name ) {
        if ( ! ( $template_name === 'loop/loop-end.php' && is_page() ) ){
            return;
        }
        global $wp_query, $woocommerce_loop;
        if ( ! isset( $woocommerce_loop['pagination'] ) ){
            return;
        }
        $wp_query->query_vars['paged'] = $woocommerce_loop['pagination']['paged'];
        $wp_query->query['paged'] = $woocommerce_loop['pagination']['paged'];
        $wp_query->max_num_pages = $woocommerce_loop['pagination']['max_num_pages'];
        $wp_query->found_posts = $woocommerce_loop['pagination']['found_posts'];
        $wp_query->post_count = $woocommerce_loop['pagination']['post_count'];
        $wp_query->current_post = $woocommerce_loop['pagination']['current_post'];

        // Custom pagination function or default woocommerce_pagination()
        kli_woocommerce_pagination();
    }   
    /**
     * Custom pagination for WooCommerce instead the default woocommerce_pagination()
     * @uses plugin Prime Strategy Page Navi, but added is_singular() on #line16
     */
    remove_action('woocommerce_after_shop_loop', 'woocommerce_pagination', 10);
    add_action( 'woocommerce_after_shop_loop', 'kli_woocommerce_pagination', 10);
    function kli_woocommerce_pagination() {
        wp_pagenavi(); 
    }
}// END WOOCOMMERCE
}// END FRONTPAGE 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-01-30T11:40:50.560

使用`[recent_products limit="12" columns="4" paginate="true"]`. 此简码限制 12 意味着一个页面上最多 12 个帖子。更多信息 woocommerce 文档

# c# - 使用 C# 控制台应用程序连接到 asp.net mvc 4 网站的内部数据库

> ID：13193514
> 
> 赞同：1
> 
> 时间：2012-11-02T10:34:54.427
> 
> 标签：c#, database, asp.net-mvc-4

有没有机会连接到 asp.net mvc 4 应用程序的默认数据库？

我在服务器上有一个正在运行的网站，另一个 C# 控制台应用程序也在同一台服务器上。我试图弄清楚如何将一些查询（插入/更新）从该控制台应用程序放入在 asp.net 应用程序中创建的数据库。当然网站应用程序正在运行。

有任何想法吗？

//编辑

我需要这个为“导入”创建 Web 应用程序的原因（它的数据量更大，来自 Excel 文件的大约 30 万条记录）。而且我不希望推送用户在更新数据库（“后台处理”）时一直打开网站。如果你有其他想法如何制作，我会很高兴听到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:49:00.417

默认 MVC 4 应用程序使用 SQLEXPRESS 服务器，因此您只需将连接字符串从 MVC 应用程序复制到您的控制台应用程序即可。

运行控制台应用程序的用户无权访问数据库的唯一可能问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:12:11.473

您应该能够使用相同的连接字符串。

如果您使用的是 Windows 身份验证，则需要将登录到服务器的用户添加到 SQL Server 登录并授予该用户对数据库的数据读取器和数据写入器权限。

如果您使用 SQL 身份验证，则用户名/密码应该在连接字符串中，并且该用户应该已经拥有权限。

# android - Android DOM Parser - 从描述标签中检索图像链接

> ID：13193525
> 
> 赞同：1
> 
> 时间：2012-11-02T10:35:26.743
> 
> 标签：android, xml, parsing, dom

我正在使用 DOM Parser 来解析这个 XML 提要：[http ://loc.grupolusofona.pt/index.php/?format=feed](http://loc.grupolusofona.pt/index.php/?format=feed)

我让 Parser 对所有标签都工作正常，我只是缺少能够从描述标签中检索图像的想法。

Feed 上的描述标签如下所示：

```
<description><![CDATA[<div class="K2FeedIntroText"><p><img style="margin: 10px;"
alt="joana soares rostos" src="http://loc.grupolusofona.pt/images/stories/varios/joana%20soares%20rostos.jpg"
height="110" width="120" />Quis ser veterinária mas deixou-se seduzir pela magia
de retratar o real. Joana Soares frequenta o primeiro ano do curso de Fotografia
da Lusófona e descreve a sua paixão pelas fotos como «inexplicável».</p>
</div>]]></description> 
```

我想检索图像链接：

```
http://loc.grupolusofona.pt/images/stories/varios/joana%20soares%20rostos.jpg 
```

我的解析器：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {

     if( elem != null){
         return elem.getTextContent();
             }

     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
} 
```

我的主要活动：

```
public class Noticias extends ListActivity {

// All static variables
static final String URL = "http://loc.grupolusofona.pt/index.php/?format=feed";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DESC = "description";
static final String KEY_LINK = "link";
static final String KEY_PUBDATE = "pubDate";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_noticias);

    ArrayList<HashMap<String, Spanned>> menuItems = new ArrayList<HashMap<String, Spanned>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, Spanned> map = new HashMap<String, Spanned>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, Html.fromHtml(parser.getValue(e, KEY_ID)));
        map.put(KEY_TITLE, Html.fromHtml(parser.getValue(e, KEY_TITLE)));
        map.put(KEY_DESC, Html.fromHtml(parser.getValue(e, KEY_DESC)));
        map.put(KEY_PUBDATE, Html.fromHtml(parser.getValue(e, KEY_PUBDATE)));
        map.put(KEY_LINK, Html.fromHtml(parser.getValue(e, KEY_LINK)));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.linha_feed,
            new String[] { KEY_TITLE, KEY_DESC, KEY_PUBDATE, KEY_LINK }, new int[] {
                    R.id.title, R.id.desc, R.id.pub, R.id.link});

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem

            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desc)).getText().toString();
            String pub = ((TextView) view.findViewById(R.id.pub)).getText().toString();
            String link = ((TextView) view.findViewById(R.id.link)).getText().toString();

            // Starting new intent

            System.out.println("Title: " + title);
            System.out.println("Link: " + link);
            System.out.println("Description:" + description);
            System.out.println("Pubdate: " + pub);

            Intent in = new Intent(Intent.ACTION_VIEW);
            in.setData(Uri.parse(link));

            startActivity(in);

        }
    });
}
} 
```

有任何想法吗 ？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:32:05.013

使用`RegEx`这样的简单模式：

```
<\s*img\s*[^>]+src\s*=\s*(['"]?)(.*?)\1 
```

这里使用这些函数：

```
public static String getMatch(String patternString, String text, int groupIndex){
    Pattern pattern = Pattern.compile(patternString, Pattern.CASE_INSENSITIVE | Pattern.DOTALL );
    return RegEx.getMatch(pattern, text, groupIndex);
}

public static String getMatch(Pattern pattern, String text, int groupIndex){
    if(text!=null){
        Matcher matcher = pattern.matcher(text);
        String match = null;
        while(matcher.find()){
            match = matcher.group(groupIndex);
            break;
        }
        return match;           
    }else{
        return null;
    }
} 
```

然后你可以像这样插入该模式：

```
String imageSource = getMatch("<\\s*img\\s*[^>]+src\\s*=\\s*(['\"]?)(.*?)\\1", description, 2); 
```

# android - 禁止在 android socket 应用中使用 3g

> ID：13193526
> 
> 赞同：1
> 
> 时间：2012-11-02T10:35:35.653
> 
> 标签：android, ip, wifi, 3g

我制作了一个使用套接字通过网络发送数据的 Android 应用程序。我猜（没有测试，因为我没有可以使用的外部 IP 地址）它适用于 3G。它肯定与WiFi有关。

第一：如果我的应用程序与 WiFi 一起工作，将数据发送到内部 IP 地址，如果我有外部 IP 地址要发送到，假设它与 3G 一起工作是否安全？- 当然，当我有机会时，我会对此进行测试。

第二：如果 3G 有效，我将如何做出选择，让用户在应用程序内不允许使用 3G，只允许 WiFi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:58:08.137

第一：安全

第二：

```
private boolean checkOnlyWiFiNetworkConnection() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI")){
            if (ni.isConnected()){
                return = true;
            }
        }
    }   
    return false;
} 
```

# iphone - 编译 ShareKit 时出现链接器错误

> ID：13193530
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:35:39.530
> 
> 标签：iphone, ipad, ios-simulator, sharekit

我正在尝试为我的项目编译 ShareKit，但出现链接器错误：

```
Undefined symbols for architecture i386:
    "_OBJC_CLASS_$_TWTweetComposeViewController", referenced from:
        objc-class-ref in SHKiOS5Twitter.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:24:26.133

我认为首先你应该用谷歌搜索你的错误。只需添加 Twitter 框架

*   **yourproject** > **Build Phases** > **Link Binary with Libraris** > **Twitter.framework**。

# java - JTextPane#getText() 不返回组件的文本

> ID：13193531
> 
> 赞同：0
> 
> 时间：2012-11-02T10:35:40.307
> 
> 标签：java, swing

我需要实现一个 TextPane，内容将在旅途中动态添加。它可以有文本和链接。

可以通过将 JLabel 添加到 textPane 来显示链接。但问题是，textPane 拥有的所有文本都需要存储到文件中。`textPane.getText()`返回文本，但它不附加添加到 textPane 的组件的任何文本。例如，如果 textPane 有一个 String("Hello") 和一个 JLabel("label")。`textPane.getText()`只返回“你好”。如何检索“标签”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:57:41.007

通常`getText()`表示文档的内容。为了您的目标，您应该遍历 Character`Elements`并为每个角色检查属性是否具有`Component`. 然后投射到例如`JLabel`并获取文本等。

还要检查组件是如何添加到`JTextPane`. 您可以将组件添加到属性中，并在属性中插入适当的字符串。

```
SimpleAttributeSet attrs=new SimpleAttributeSet();
StyleConstants.setComponent(...yourLabel);
documnet.insertString(offset, yourLabel.getText(), attrs); 
```

然后你`Document`有`JLabel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:03:21.673

我的猜测是编写一个递归遍历组件结构的方法，检索每个节点的文本（如果有的话）并附加它。在伪代码中，它看起来像这样：

```
public void collectText(Container root) {
    StringBuilder builder = new StringBuilder();
    collectText(root, builder);

    return builder.toString();
}

private void collectText(Container root, StringBuilder builder) {
    builder.append(root.getText());

    for (Component c : root.getComponents()) {
        // Check whether this component has other components
        if (c instanceof Container) {
            collectText((Container) c, builder);
        } else {
            // Check whether this Component has text content, and append it to the builder
        }
    }
} 
```

如您所见，它从一个组件开始 - 这将是 your `TextPane`，然后遍历下面的任何元素。或者，您可以在将其文本内容附加到缓冲区之前检查子组件是否实际*具有文本。*遍历元素后，它返回缓冲区的内容。

**编辑**

尽管[`Container#getComponents()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponents%28%29)JavaDoc 没有说明它，但我*认为*它总是以相同的顺序返回它的子组件（因为它在`List#toArray()`内部使用）。

# php - HTML 溢出：隐藏的文本格式不正确

> ID：13193534
> 
> 赞同：1
> 
> 时间：2012-11-02T10:35:46.757
> 
> 标签：php, html, css

我正在为一个美式橄榄球队开发一个网站。他们的首页上有这些新闻站点，可以通过 CMS 系统进行管理。我在对齐这些新闻项目中的文本时遇到问题。其中两条新闻如下所示：

![在此处输入图像描述](../Images/ae0facfbf0d72d064f1c7ea218072796.png)

如您所见，正确的 newsitem 文本显示得很好。但是左撇子真的很糟糕。您只能在最后一句看到文本的上半部分。我使用**溢出：隐藏；**确保文本不会使 div 或 newsitem 变大。有谁知道如何通过 HTML 和 CSS 解决这个问题，或者我应该用 PHP 将它从服务器端切断吗？

这是我的代码（HTML）：

```
<div class="newsitem">
        <div class="titlemessagewrapper">
            <h2 class="titel" align="center"><?php echo $row['homepagetitel']; ?></h2>
            <div class="newsbericht">
                <?php echo $row['homepagebericht']; ?>
            </div>
        </div>
        <div class="newsfooter">
            <span class="footer_author"><a href=""><?php echo get_gebruikersnaam_by_id($row['poster_id']); ?></a></span> <span class="footer_comment"><a href="">Comments <span>todo</span></a></span>
            <a href="" class="footer_leesmeer">Lees meer</a>
        </div>
    </div> 
```

这是CSS：

```
.newsitem{
float: left;
height: 375px;
width: 296px;
margin: 20px 20px 0px 20px;
background-color: #F5F5F5;

}

.newsitem .titel{
color:#132055;
font-size:1.2em;
line-height:1.3em;
font-weight:bold;
margin:10px 5px 5px 5px;
padding:0 0 6px 0;
border-bottom:1px dashed #9c0001;
}

.titlemessagewrapper{
height: 335px;
overflow: hidden;
}

.newsitem .newsbericht{
padding:5px 5px 5px 5px;
font-size: 0.8em;
margin-bottom: 5px;
}

.newsitem .newsfooter{
width: 100%;
height: 25px;
background-color: #132055;
margin: 0px auto;
font-size: 0.8em;
padding-top: 5px;
margin-top: 10px;
border: 1px solid #9c0001;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:47:17.940

你不应该**依赖用户**进入`<cut>`！

*   用户输入 = 错误
*   如果用户忘记输入`<cut>`怎么办？您的新闻项目现在会显得不专业吗？
*   用户创建新闻项目以发现其中一些被切断的意义何在？

如果 div 只能适合固定的字符串长度，则应验证新闻项 Input body 的最大长度，而不是依赖`<cut>`. 这可以使用`maxlength`属性简单地实现。

```
<textarea id="userinput" maxlength="150">Enter your news</textarea> 
```

如果您确实使用`<cut>`，您还应该添加`overflow: hidden;`以确保在没有剪切标签的情况下不会不专业地显示内容。

如果要显示所有文本并保持 div 相同的固定高度

代替

```
overflow: hidden; 
```

和

```
overflow:auto; 
```

（内容小于div时不会出现滚动条）

否则验证 div 中字符串/内容的长度或删除 CSS 高度属性以允许所有内容显示时没有滚动条。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:38:06.767

删除 .titlemessagewrapper 上的 height 属性。它的这个高度属性导致了中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:38:48.367

如果您希望框保持相同的高度：获取整个字符串，执行[substr](http://php.net/manual/en/function.substr.php)并保存在一个新变量中并回显它。

例如。

```
<?php
    $str = "abcdefghijkl";
    $new_strsubstr($str, 0, 8);  // abcdef
    // will return abcdefhi 
?> 
```

# python - 递归编程树桩？

> ID：13193535
> 
> 赞同：0
> 
> 时间：2012-11-02T10:35:47.733
> 
> 标签：python

我被要求创建一个程序，完成后我要制作它的递归版本。它没什么，它把绳子系在一起。这是我写的它的版本，谁能告诉我如何用它制作一个递归程序？

```
def laceStrings(s1, s2):
    """
    s1 and s2 are strings.

    Returns a new str with elements of s1 and s2 interlaced,
    beginning with s1\. If strings are not of same length, 
    then the extra elements should appear at the end.
    """
    join = []
    smaller = min(s1, s2, key=len)
    for num in range(len(smaller)):
        join.append(s1[num])
        join.append(s2[num])
    join = ''.join(join)
    if len(s1) != len(s2):
        smaller = len(smaller)
        join = join + max(s1, s2, key=len)[smaller:]
    return join 
```

编辑：我的朋友给了我这个模板，但我仍然无法弄清楚。任何人都可以帮忙吗？

```
def laceStringsRecur(s1, s2):
    """
    s1 and s2 are strings.

    Returns a new str with elements of s1 and s2 interlaced,
    beginning with s1\. If strings are not of same length, 
    then the extra elements should appear at the end.
    """
    def helpLaceStrings(s1, s2, out):
        if s1 == '':
            #PLACE A LINE OF CODE HERE
        if s2 == '':
            #PLACE A LINE OF CODE HERE
        else:
            #PLACE A LINE OF CODE HERE
    return helpLaceStrings(s1, s2, '') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:07:02.117

```
def laceStringsRecur(s1, s2):

    """
    s1 and s2 are strings.

    Returns a new str with elements of s1 and s2 interlaced,
    beginning with s1\. If strings are not of same length, 
    then the extra elements should appear at the end.
    """
    def helpLaceStrings(s1, s2, out):
        if s1 == '':
            #PLACE A LINE OF CODE HERE
            return out+s2
        if s2 == '':
            #PLACE A LINE OF CODE HERE
            return out+s1
        else:
            #PLACE A LINE OF CODE HERE
            return helpLaceStrings(s1[1:], s2[1:], out+s1[0]+s2[0])
    return helpLaceStrings(s1, s2, '') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T11:02:14.443

引用[维基百科](http://en.wikipedia.org/wiki/Recursion_(computer_science))：

> 递归函数定义具有一个或多个基本情况，即函数为其生成结果的输入（不重复）和一个或多个递归情况，即程序重复（调用自身）的输入.

这里，基本情况如下（假设 A 和 B 是参数字符串）：

```
 if one of A or B is empty -> return the other string 
```

和递归情况：

```
 split each of A, B into the first char and the rest (eg. XYZ => X, YZ)
   (recursive call) S = interlaced version of rest(A),rest(B)
   return first-char(A) + first-char(B) + S 
```

如果您在将其转换为 python 时遇到问题，请告诉我们。

# windows - 任务计划程序的虚拟任务

> ID：13193536
> 
> 赞同：1
> 
> 时间：2012-11-02T10:35:49.273
> 
> 标签：windows, scheduled-tasks

我正在为 Window Task Scheduler 的 C# 包装器编写一些集成测试：[Task Scheduler Managed Wrapper](https://github.com/dahall/taskscheduler)

有人可以建议我可以从计划任务中调用的合适的虚拟应用程序吗？例如，将静默运行的应用程序。然后我可以检查它是否运行正常。

我确实想到了任何空的批处理文件，但是在开始测试之前，我必须确保它存在于运行集成测试的服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:29:18.900

好吧，我试过了

`cmd.exe /c exit`

它启动命令窗口，然后将其关闭。这似乎工作正常。不过，欢迎任何其他建议。

# php - 监控共享主机上的脚本性能

> ID：13193538
> 
> 赞同：1
> 
> 时间：2012-11-02T10:35:54.333
> 
> 标签：php, resources, monitoring, shared-hosting

我计划通过 cron 在共享托管服务提供商上定期运行 PHP 脚本。根据我的本地主机开发，该脚本不会占用太多 CPU。但是，我想监视脚本的运行/使用情况，以免对服务器施加过大的压力，从而可能导致帐户限制。

监视脚本的内存和 CPU 使用率的最佳方法是什么（具有通过电子邮件发送性能报告的附加功能）？由于我在共享主机上，我将无法安装应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:45:49.500

您可以通过以下方式编写脚本。它们是 php 中用于检查内存使用情况的默认功能，但在少数运行 Windows 的服务器中，如果它们被禁用，它们也是一种解决方法。分析下面的代码并尝试理解。希望能帮助到你。

```
function getMemUsage()
{

        if (function_exists('memory_get_usage'))
        {
            return memory_get_usage();
        }
        else if ( strpos( strtolower($_SERVER["OS"]), 'windows') !== false)
        {
            // Windows workaround
            $output = array();

            exec('tasklist /FI "PID eq ' . getmypid() . '" /FO LIST', $output);            
            return substr($output[5], strpos($output[5], ':') + 1);
        }
        else
        {
            return '<b style="color: red;">no value</b>';
        }
}

$message = getMemUsage();
$subject = "Memory USage";

mail("xxx@xxx.com",$message,$subject); 
```

# magento - SQLSTATE[23000] 错误：升级时 Magento OneStepCheckout

> ID：13193541
> 
> 赞同：0
> 
> 时间：2012-11-02T10:36:05.220
> 
> 标签：magento, innodb, checkout, magento-1.7, entity-attribute-value

将我的 Magento 安装从 1.3.2.1 升级到 1.7.0.2 后，我在下订单时收到以下错误（使用 OneStepCheckout）。

```
 SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`user_new`.`sales_order_tax_item`, CONSTRAINT `FK_SALES_ORDER_TAX_ITEM_TAX_ID_SALES_ORDER_TAX_TAX_ID` FOREIGN KEY (`tax_id`) REFERENCES `sales_order_tax` (`tax_id`) ON DELETE CASCADE ON UP) 
```

有没有人可以快速解决？
这是阻止整个更新过程的最后一件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:03:21.690

检查这个。
[这可以给你提示来解决它。](http://www.magentocommerce.com/boards/viewthread/265847/)

# asp.net - elmah 导致应用程序崩溃

> ID：13193543
> 
> 赞同：0
> 
> 时间：2012-11-02T10:36:09.613
> 
> 标签：asp.net, crash, elmah

有没有其他人遇到过 Elmah 导致应用程序崩溃的问题？在我的一个网站上肯定是这种情况，但我之前已经使用了很长时间，从来没有遇到过这个问题。现在，另一个使用它的站点发生了应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:45:41.870

如果您使用的是 ELMAH 1.1 或 1.2，请确认您正在打包所有需要的引用 DLL，以便持久保存到您的数据存储中。还要确保您使用的是正确版本的 x64/x86 库。

我在 SQLite 中存储数据时遇到了类似的问题。那是很久以前的事了，但最终导致 dll 没有以兼容的方式编译。

我的修复最终完全升级到最新版本的 ELMAH（一旦我这样做了，我的问题就消失了）。

[这篇文章也可能是相关的......](https://stackoverflow.com/questions/1278929/could-not-load-file-or-assembly-system-data-sqlite/11232395#11232395)

# ruby-on-rails - Capybara访问无缘无故卡住

> ID：13193547
> 
> 赞同：9
> 
> 时间：2012-11-02T10:36:15.823
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara

我们有一个用于 Rails 项目的大型黄瓜套件。这都是水豚，主要是通过 Firefox。

最近我们开始经历失败，我正在努力解决问题。这是它的样子：

*   在某些时候（总是一样），capybara`visit`在尝试加载页面时卡住了，capybara 最终超时以查找正在寻找的任何元素（请参见下面的跟踪）；每个其他功能中的每次后续访问也会超时；
*   如果它发生的功能独立运行，问题就会消失；
*   如果在失败之前粘贴调试器（binding.pry），问题就会消失；
*   当它被卡住时，如果我在 Firefox 地址栏中按 Enter 键，请求会立即通过，测试会继续并完成，没有任何问题。

一个可能相关也可能不相关的细节：我们正在使用多个会话（capybara `using_session`），所以到失败时有三个 firefox 实例。但是话又说回来，在此之前有三个实例愉快地过去了。

我伴侣的机器上也出现了同样的行为。

Rails 日志中没有任何可疑之处。没有迹象表明该请求正试图通过。

OSX 10.8.2，ruby 1.9.3，rails 3.2.6，sqlite3，最新的 capybara/selenium。

**错误堆栈跟踪：**

```
 Timeout::Error (Timeout::Error)
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:1293:in `request'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:745:in `start'
  /Users/artem/.rbenv/versions/1.9.3-p194-perf/lib/ruby/1.9.1/net/http.rb:1284:in `request'
  (eval):2:in `has_css?'
  ./features/step_definitions/home_page_steps.rb:70:in `/^I am taken to the products page on the retailer site$/'
  features/home_page.feature:21:in `Then I am taken to the products page on the retailer site'
  Timeout::Error (Timeout::Error) 
```

**编辑**

`bundle update`似乎让它消失了

**编辑 2**

如果您遇到类似的问题并且您正在使用 FireBug (capybara/firebug)，请尝试禁用它。

**编辑 3**

我突然想到，自从我们从 webrick 切换到瘦（在测试/开发中）之后，这从未发生过。`gem 'thin'`就像在 Gemfile中添加一样简单。也许值得尝试一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:28:11.717

`bundle update`似乎让它消失了

# javascript - 单击 Chrome 扩展程序中的 popup.html 图标运行 javascript

> ID：13193549
> 
> 赞同：0
> 
> 时间：2012-11-02T10:36:32.970
> 
> 标签：javascript, google-chrome-extension

我想要的很简单。用户单击扩展程序的图标，然后执行 JS 代码，显示一个提示框，要求输入两个值。但我无法弄清楚如何正确地将 JS 与 popup.html 链接起来。到目前为止，单击图标只会打开弹出窗口，而无需运行 JS 代码。

popup.html

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="prompt.js"></script>
    </head>
    <body onload="promptBox()">
    </body>
</html> 
```

提示.js

```
function promptBox() {
    prompt('Choose File 1',A14nH);
    R1Gh7=prompt('Choose File 2',L3f7);
    if(L3f7&&R1Gh7) {
        Fr4Q='<frameset cols=\'*,*\'>\n<frame src=\''+L3f7+'\'/>';
        Fr4Q+='<frame src=\''+R1Gh7+'\'/>\n';
        Fr4Q+='</frameset>';
        with(document) {
            write(Fr4Q);
            void(close())
        }
    }
    else{
       void(null)
    };
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T11:05:13.930

您不能在 chrome 扩展中运行内联处理程序。
右键单击您的扩展图标，然后单击“检查弹出窗口”。您将看到以下内容：

> 拒绝执行内联事件处理程序，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

你需要`onload="promptBox()"`从你的身体中移除并添加一个监听器来`prompt.js`代替：

```
function promptBox() {
  // ...
}

document.addEventListener('DOMContentLoaded', function() {
  promptBox();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T10:56:00.913

```
chrome.browserAction.onClicked.addListener(promptBox); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:46:38.397

对于我想做的事情（通过插入框架来操作当前页面），结果发现内容脚本是关键字。

后台脚本监听扩展图标上的 onclick 动作并触发调用 promptBox 函数的内容脚本。

清单.json

```
{
    "manifest_version": 2,
    "background": {
        "scripts": ["background.js"],
        "persistent": false
    },
    "permissions": [
        "tabs",
        "http://*/*",
        "https://*/*"
    ],
    "browser_action": {
        "default_title": "Dual View Split Screen", 
        "default_icon": "icon48x48.png"
    }   
} 
```

背景.js

```
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(null, {file: "prompt.js"});
}); 
```

提示.js

```
function promptBox() {
    windowLeft = prompt('Please choose your left window:', document.URL);
    windowRight = prompt('Please choose your right window:', document.URL);
    if(windowLeft && windowRight) {
        result='<frameset cols=\'*,*\'>\n<frame src=\''+windowLeft+'\'/>';
        result+='<frame src=\''+windowRight+'\'/>\n';
        result+='</frameset>';
        with(document) {
            write(result);
            void(close())
        }
    }
    else{
       void(null)
    };
};

chrome.extension.onClicked.addListener(promptBox()); 
```

# error-handling - 如何显示 zf2 错误？

> ID：13193550
> 
> 赞同：0
> 
> 时间：2012-11-02T10:36:40.660
> 
> 标签：error-handling, nginx, zend-framework2

我已经重新安装了我的系统，现在当 zf2 出现问题时，我只能在 nginx 错误日志中看到页面上的错误，php.ini 中的 display_errors On 和 display_startup_errors On 可能与我的 php-fpm 设置有关？在不在 zf2 中的简单 php 文件中，我看到了错误！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T12:21:59.227

您需要在配置中启用以下选项

```
'view_manager' => array(
    'display_not_found_reason' => true,
    'display_exceptions'       => true,
) 
```

记得在生产环境中关闭它

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-02T14:02:23.190

`ini_set('display_errors', true);`现在在我的 index.php 中显示错误

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-22T04:27:01.253

Zend 框架 2 将合并来自**所有已加载模块**的配置，因此您需要确保已在**所有**模块的配置文件中将 'display_exceptions'（如果该键存在）设置为 true。

```
'view_manager' => array(
    'display_not_found_reason' => true,
    'display_exceptions'       => true,
) 
```

您可以在 application.config.php 文件中查看加载了哪些模块

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-25T11:36:32.737

您可以将上述内容与环境检查相结合：

将此添加到您的 public/index.php 顶部：

```
$env = getenv('APP_ENV') ?: 'production';
if($env == "development") {
  error_reporting(E_ALL | E_STRICT);
  ini_set('display_errors', true);
} 
```

而这个给你的 public/.htaccess：

`SetEnv "APP_ENV" "development"`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-02T10:43:13.033

将此添加到您的 public/index.php

```
error_reporting(E_ALL | E_STRICT); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-30T16:04:19.103

在我的情况下，Zend 错误和 NGinX - php5 fpm，像这样工作：

只有我输入`public/index.php`（@AlloVince）

```
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1); 
```

没有`If(){...}`

但是如果只是放上面的代码，显示错误，会给出这个：

```
Parse error: syntax error, unexpected '}', expecting ',' or ';' in /usr/local/nginx/html/ZendSkeletonApplication/module/Album/src/Album/Controller/AlbumController.php on line 12 
```

另一件事！设置此代码：（@To Nong）

```
'display_not_found_reason' => true,
'display_exceptions'       => true, 
```

像`module.config.php`这样：

```
'view_manager' => array(
 'template_path_stack' => array(
     'album' => __DIR__ . '/../view',
     'display_not_found_reason' => true,
     'display_exceptions'       => true,
 ), 
```

),

我在屏幕上收到错误日志的所有错误：

```
Fatal error: Uncaught exception 'Zend\View\Exception\InvalidArgumentException' with message 'Invalid path provided; must be a string, received boolean' in /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/View/Resolver/TemplatePathStack.php:201 Stack trace: #0 /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/View/Resolver/TemplatePathStack.php(149): Zend\View\Resolver\TemplatePathStack->addPath(true) #1 /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/Mvc/Service/ViewTemplatePathStackFactory.php(38): Zend\View\Resolver\TemplatePathStack->addPaths(Array) #2 [internal function]: Zend\Mvc\Service\ViewTemplatePathStackFactory->createService(Object(Zend\ServiceManager\ServiceManager), 'viewtemplatepat...', 'ViewTemplatePat...') #3 /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php(939): call_user_func(Array, Object(Zend in /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php on line 946 
```

我没有在系统（Ubuntu 14.04）中将配置文件触摸为 php-fpm。

# tfs - 将 TFS 2010 升级到具有不同名称的新机器 - 客户端会发生什么？

> ID：13193552
> 
> 赞同：1
> 
> 时间：2012-11-02T10:36:43.030
> 
> 标签：tfs, upgrade, workspace

我有以下 TFS 升级方案：我想将我当前的 TFS 2010 环境更改为 TFS 2012 - 这通过将 2010 服务器移动到具有另一个计算机名称的新机器上。

因此，我只需使用旧服务器上的 TFS 2010 数据库备份，然后在新服务器上恢复它们​​。在开始备份之前，我将关闭旧机器上的几个 TFS 特定服务，以避免开发人员签入。与此同时，开发人员正在离线模式下工作。之后我将升级数据库。

现在变得有趣了：TFS 2012 已经启动并运行升级的项目集合，一切运行顺利，但是链接到旧 TFS url 的本地工作区会发生什么？开发人员是否有可能将他们现有的工作区与他们未决的更改切换到新的 TFS 2012 url？

如果是，我该怎么做？我已经进行了测试安装并成功升级到 2012，但我不知道如何将现有工作区与新 TFS 的未决更改绑定。最初我认为“更改源代码控制”对话框可以解决问题，但我可以在工具栏中单击的所有内容都是“绑定/取消绑定”和“刷新”按钮......

如果不是，我想我有两个选择：

我所能做的就是强迫每个人签入/搁置并为新服务器创建一个新映射

或者

只是保留旧的 TFS 名称/网址？（在这种情况下，未决的更改是否仍然可用？）

先感谢您！磷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:25:31.030

工作区存储在服务器上，因此当用户添加新服务器时，他们应该会发现他们的旧工作区已经为他们设置好了。完成所有现有的结帐等。

如果这对用户不起作用，他们可以将新工作区映射到同一目录，检出树中的所有文件，然后使用 tfs 电动工具取消检出未更改 (tpft uu /noget) 只保留他们的更改文件签出。

# android - 在构造 shell 命令时，monkeyrunner 无法正确处理特定字符

> ID：13193555
> 
> 赞同：2
> 
> 时间：2012-11-02T10:36:51.053
> 
> 标签：android, monkeyrunner

理想情况下，要打开默认浏览器并导航到谷歌地图（台北 101），您可以简单地执行：

```
startActivity(action='android.intent.action.VIEW', data='http://maps.google.com/?q=25.033611,121.565000&z=19') 
```

但是，该声明并不（总是）有效。追踪monkeyrunner的源码后：

*   [http://androidxref.com/source/xref/sdk/monkeyrunner/src/com/android/monkeyrunner/MonkeyDevice.java#startActivity](http://androidxref.com/source/xref/sdk/monkeyrunner/src/com/android/monkeyrunner/MonkeyDevice.java#startActivity)
*   [http://androidxref.com/source/xref/sdk/chimpchat/src/com/android/chimpchat/adb/AdbChimpDevice.java#startActivity](http://androidxref.com/source/xref/sdk/chimpchat/src/com/android/chimpchat/adb/AdbChimpDevice.java#startActivity)

这是一个片段，显示内部的 monkeyrunner 只是按字面意思连接参数。请关注#388和#411

```
383    public void startActivity(String uri, String action, String data, String mimetype,
384            Collection<String> categories, Map<String, Object> extras, String component,
385            int flags) {
386        List<String> intentArgs = buildIntentArgString(uri, action, data, mimetype, categories,
387                extras, component, flags);
388        shell(Lists.asList("am", "start",
389                intentArgs.toArray(ZERO_LENGTH_STRING_ARRAY)).toArray(ZERO_LENGTH_STRING_ARRAY));
390    }
...
406    private List<String> buildIntentArgString(String uri, String action, String data, String mimetype,
407            Collection<String> categories, Map<String, Object> extras, String component,
408            int flags) {
409        List<String> parts = Lists.newArrayList();
410
411        // from adb docs:
412        //<INTENT> specifications include these flags:
413        //    [-a <ACTION>] [-d <DATA_URI>] [-t <MIME_TYPE>]
414        //    [-c <CATEGORY> [-c <CATEGORY>] ...]
415        //    [-e|--es <EXTRA_KEY> <EXTRA_STRING_VALUE> ...]
416        //    [--esn <EXTRA_KEY> ...]
417        //    [--ez <EXTRA_KEY> <EXTRA_BOOLEAN_VALUE> ...]
418        //    [-e|--ei <EXTRA_KEY> <EXTRA_INT_VALUE> ...]
419        //    [-n <COMPONENT>] [-f <FLAGS>]
420        //    [<URI>]
421
422        if (!isNullOrEmpty(action)) {
423            parts.add("-a");
424            parts.add(action);
425        }
426
427        if (!isNullOrEmpty(data)) {
428            parts.add("-d");
429            parts.add(data);
430        }
...
479        return parts;
480    } 
```

对于这种情况，将执行以下 shell 命令。

```
$ am start -a android.intent.action.VIEW -d http://maps.google.com/?q=25.033611,121.565000&z=19
$ Starting: Intent { act=android.intent.action.VIEW dat=http://maps.google.com/?q=25.033611,121.565000 }

[1]   Done                    am start -a android.intent.action.VIEW -d http://maps.google.com/?q=25.033611,121.565000 
```

您可能会发现根本原因是与号 (&)。它在 shell 环境中被专门解释，即在后台执行前面的命令。

为了避免这种误解，我们可以通过在其前面加上 \ 来转义该特殊字符。

```
$ am start -a android.intent.action.VIEW -d http://maps.google.com/?q=25.033611,121.565000\&z=19
Starting: Intent { act=android.intent.action.VIEW dat=http://maps.google.com/?q=25.033611,121.565000&z=19 } 
```

因此，在 monkeyrunner 中，您应该在将参数值传递给`startActivity`（甚至其他`MonkeyDevice`方法）之前对其进行转义，以规避此问题。

```
startActivity(action='android.intent.action.VIEW', data=r'http://maps.google.com/?q=25.033611,121.565000\&z=19') 
```

最后，它起作用了！但是，我认为 monkeyrunner 作为一个友好的 API，应该在内部进行这种转义。你怎么想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:27:02.273

是的，你完全正确。我发现规避这个其他麻烦的方法是使用

```
device.shell('am start ...') 
```

至少你知道会发生什么。

# sql - 缺失组的 SQL pad 查询结果

> ID：13193557
> 
> 赞同：1
> 
> 时间：2012-11-02T10:36:58.357
> 
> 标签：sql, oracle, oracle11g

假设下表：

表A：

```
ID  GroupName SomeValue
1   C         1
2   C         1
2   B         1
2   A         1 
```

我需要构建一个选择以下结果的查询：

```
ID  GroupName SomeValue
1   C         1
1   B         0
1   A         0
2   C         1
2   B         1
2   A         1 
```

GroupName 实际上是从 TableA 列的 CASE 表达式派生的，只能取 3 个值：A、B、C。

分析函数是要走的路吗？

**编辑**

抱歉，没有提及，但 ID 可能包含多列。考虑这个例子：

```
ID1 ID2 GroupName SomeValue
1   1   C         1

1   2   C         1

2   2   C         1
2   2   B         1
2   2   A         1 
```

我需要`SomeValue`为每个唯一的组合 ID1+ID2 填充 0。所以结果应该是这样的：

```
ID1 ID2 GroupName SomeValue

1   1   C         1
1   1   B         0
1   1   A         0

1   2   C         1
1   2   B         0
1   2   A         0

2   2   C         1
2   2   B         1
2   2   A         1 
```

**EDIT2**
似乎是@Laurence 提出的解决方案，即使对于多列“ID”也应该有效。我无法重写@Nicholas Krasnov 提出的查询以符合此要求。但是有人可以比较这些解决方案的性能吗？工作会`analytic function`比“交叉连接+左外连接”更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:50:11.923

`partition by`为了填补空白，您可以使用外连接子句编写类似的查询：

```
SQL> with t1(ID,GroupName,SomeValue) as
  2  (
  3    select 1,   'C',   1  from dual union all
  4    select 2,   'C',   1  from dual union all
  5    select 2,   'B',   1  from dual union all
  6    select 2,   'A',   1  from dual
  7  ),
  8  groups(group_name) as(
  9    select 'A' from dual union all
 10    select 'B' from dual union all
 11    select 'C' from dual
 12  )
 13  select t1.ID
 14       , g.group_name
 15       , nvl(SomeValue, 0) SomeValue
 16    from t1
 17    partition by (t1.Id)
 18    right outer join groups g
 19       on (t1.GroupName = g.group_name)
 20    order by t1.ID asc, g.group_name desc
 21  ;

        ID GROUP_NAME  SOMEVALUE
---------- ---------- ----------
         1 C                   1
         1 B                   0
         1 A                   0
         2 C                   1
         2 B                   1
         2 A                   1

6 rows selected 
```

**更新**：对评论的回应。

还要在子句中指定`ID2`列：`partition by`

```
SQL> with t1(ID1, ID2, GroupName,SomeValue) as
  2  (
  3    select 1, 1, 'C', 1 from dual union all
  4    select 1, 2, 'C', 1 from dual union all
  5    select 2, 2, 'C', 1  from dual union all
  6    select 2, 2, 'B', 1  from dual union all
  7    select 2, 2, 'A', 1  from dual
  8  ),
  9  groups(group_name) as(
 10    select 'A' from dual union all
 11    select 'B' from dual union all
 12    select 'C' from dual
 13  )
 14  select t1.ID1
 15       , t1.ID2
 16       , g.group_name
 17       , nvl(SomeValue, 0) SomeValue
 18    from t1
 19    partition by (t1.Id1, t1.Id2)
 20    right outer join groups g
 21    on (t1.GroupName = g.group_name)
 22  order by t1.ID1, t1.ID2  asc , g.group_name desc
 23  ;

       ID1        ID2 GROUP_NAME  SOMEVALUE
---------- ---------- ---------- ----------
         1          1 C                   1
         1          1 B                   0
         1          1 A                   0
         1          2 C                   1
         1          2 B                   0
         1          2 A                   0
         2          2 C                   1
         2          2 B                   1
         2          2 A                   1

9 rows selected 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:52:03.600

```
Select
  i.Id1,
  i.Id2,
  g.GroupName,
  Coalesce(a.SomeValue, 0) As SomeValue
From
  (select distinct ID1, ID2 from TableA) as i
    cross join
  (select distinct GroupName from TableA) as g
    left outer join
  tableA a
    on i.ID = a.ID and g.GroupName = a.GroupName
Order By
  1,
  2,
  3 Desc 
```

# javascript - 如何动态管理不同布局的样式表？

> ID：13193558
> 
> 赞同：2
> 
> 时间：2012-11-02T10:37:00.313
> 
> 标签：javascript, css, templates, dynamic

我正在尝试建立一个门户网站，房地产经纪人可以在其中展示他们的财产。每个用户都可以构建自己的一组彩色**主题**，但基本布局保持不变。用户只能更改布局中不同块的背景颜色、文本颜色。管理此问题的最佳方法是什么？

将所有详细信息保存在数据库中并提供 css 文件是否很好？我想这会延迟页面加载。是否还有其他选项，例如使用 XML 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:42:30.040

您可以通过`body`为每个用户设置一个类到主标记，从一个字段中获取，可能是`theme`从 SQL 数据库中获取。我早就写了一篇关于它如何工作的教程。对你来说也是如此：

* * *

# 在 Web 中进行主题化的简单方法

我们很多人都会有这个问题。主题随处可见，但我们自己的网站中的主题呢？我们有桌面主题、wordpress 主题，甚至是手机主题。我们不能在我们的网站中提供相同的功能吗？尽管我们已经看到许多具有主题功能的网站，但它们似乎很难！

## 传统网页主题

现在让我们看看 Web 中的传统主题是如何工作的。他们有两个以上的样式表 (CSS)，并且他们使用 JavaScript 将原始样式表替换为新样式表。这是非常困难和棘手的，因为`href`不建议更改样式表，而且旧浏览器不支持它们！

## 提议的简单主题

好吧，还有另一种更好更简单的方法来做同样的事情，但不会替换 DOM 元素及其属性。由于 CSS 是基于类和规则的，所以最好将布局和呈现分开，我们可以通过类来区分。好了，理论说的够多了。让我们进入实践部分。

考虑一个网页`XHTML 1.1`，它有几个组件，即带有链接的侧边栏，可以这样在 HTML 中给出：

### HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Themed Website</title>            
    </head>
    <body>
        <div class="wrap">
            <div class="side">
                <ul>
                    <li><a href="#">Link 1</a></li>
                    <li><a href="#">Link 2</a></li>
                    <li><a href="#" class="active">Link 3</a></li>
                    <li><a href="#">Link 4</a></li>
                    <li><a href="#">Link 5</a></li>
                </ul>
            </div>
            <div class="main">
                <h1>Welcome</h1>
                <h2>A Paragraph</h2>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse.
                </p>
                <h2>A List</h2>
                <ul>
                    <li>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                    </li>
                    <li>
                        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
                    </li>
                    <li>
                        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse.</p>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

现在我们需要在`<link>`标签的帮助下为文档添加一些样式：

```
<link rel="stylesheet" href="style.css" type="text/css" /> 
```

在 中`style.css`，我们将首先添加样式来描述演示的方式。

### 布局

首先，骨架 CSS 将是，对于其中的所有元素：

```
body {}
body .wrap {}
body .wrap .side {}
body .wrap .side ul {}
body .wrap .side ul li {}
body .wrap .side ul li a {}
body .wrap .side ul li a:hover {}
body .wrap .side ul li a.active {}
body .wrap .main {}
body .wrap .main h1 {}
body .wrap .main h2 {}
body .wrap .main p {}
body .wrap .main ul {}
body .wrap .main ul li {}
body .wrap .main ul li p {} 
```

完全填满 CSS，给我们：

```
body {font-family: segoe ui; background: #fff;}
body .wrap {width: 90%; margin: auto; overflow: hidden;}
body .wrap .side {width: 25%; float: left;}
body .wrap .side ul {margin: 0; padding: 0; list-style: none;}
body .wrap .side ul li {margin: 0; padding: 0; list-style: none;}
body .wrap .side ul li a {text-decoration: none; padding: 5px; display: block;}
body .wrap .side ul li a:hover {background: #ccc; color: #0ff;}
body .wrap .side ul li a.active {background: #0fc; color: #000;}
body .wrap .main {width: 75%; float: right; background: #0fc;}
body .wrap .main h1 {margin: 0; padding: 0 10px 10px;}
body .wrap .main h2 {margin: 0; padding: 10px;}
body .wrap .main p {margin: 0 10px 5px; text-align: justify;}
body .wrap .main ul {margin: 0 10px 10px;} 
```

### 主题化

现在我们的工作将是识别主题组件。在这里，使用基本布局，我们只能主题化无序列表的颜色和列表样式。让我们先单独了解这些样式。作为初学者的教程，让我们只关注前景色和背景色，而不是布局。

```
body {color: ; background: ;}
body .wrap .side ul li a {color: ; background: ;}
body .wrap .side ul li a:hover {color: ; background: ;}
body .wrap .side ul li a.active {color: ; background: ;}
body .wrap .main {background: ;}
body .wrap .main h1 {color: ;}
body .wrap .main h2 {color: ; background: ;}
body .wrap .main p {color: ;}
body .wrap .main ul li p {color: ;} 
```

现在有了这组规则，我们需要添加类。Body 是内容的最顶层父级。因此，我们将添加类`<body>`并更改其他类的规则。

让我们将第一个类命名`.light`为，相同的 CSS 将是：

```
.light {color: #333; background: #f5f5f5;}
.light .wrap .side ul li a {color: #666; background: #eee;}
.light .wrap .side ul li a:hover {color: #333; background: #ddd;}
.light .wrap .side ul li a.active {color: #333; background: #0ff;}
.light .wrap .main {background: #0ff;}
.light .wrap .main h1 {color: #333;}
.light .wrap .main h2 {color: #666; background: #0fc;}
.light .wrap .main p {color: #093;}
.light .wrap .main ul li p {color: #09c;} 
```

以上颜色是一些疯狂的组合。现在让我们创建另一个主题，让一切顺其自然`grayscale`。所有颜色的红色、绿色和蓝色值应该相同。

```
.grayscale {color: #333; background: #ccc;}
.grayscale .wrap .side ul li a {color: #666; background: #eee;}
.grayscale .wrap .side ul li a:hover {color: #333; background: #ddd;}
.grayscale .wrap .side ul li a.active {color: #333; background: #fff;}
.grayscale .wrap .main {background: #fff;}
.grayscale .wrap .main h1 {color: #333;}
.grayscale .wrap .main h2 {color: #fff; background: #999;}
.grayscale .wrap .main p {color: #666;}
.grayscale .wrap .main ul li p {color: #999;} 
```

### JavaScript

我们将使用**jQuery**来简化我们的工作。因此，在本`<head>`节中，我们将添加一个指向 jQuery 库的链接，可能来自**Google API**。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

请注意，出于稳定性目的，我们使用**jQuery 1.7.2 。**现在要更改代码，我们需要添加三个链接或按钮来处理主题更改。因此，在 HTML 中，让我们添加这三个链接：

**HTML**

```
<div class="wrap themelinks">
    <h4>Change Themes:</h4>
    <a href="" class="theme">No Theme</a>
    <a href="light" class="theme">Light</a>
    <a href="grayscale" class="theme">Grayscale</a>
</div> 
```

**CSS**

```
.wrap.themelinks {background: #fff; border-radius: 10px; clear: both; overflow: hidden; margin-top: 25px;}
.themelinks h4 {margin: 0; padding: 10px;}
.themelinks .theme {margin: 0 10px 10px; padding: 3px 5px; display: inline-block; background: #eee; border-radius: 5px; text-decoration: none; color: #f90}
.themelinks .theme:hover {background: #f90; color: #fff;} 
```

**jQuery**

```
$(document).ready(function(){
    $(".theme").click(function(){
        var theClass = $(this).attr("href");
        $("body").removeAttr("class").addClass(theClass);
        return false;
    });
}); 
```

在这里，我们只更改标签的`class`属性，`<body>`所有浏览器都支持该属性。我们还为链接`return false;`的`.click()`功能添加了一个，以便不传播到标签的`href`属性中指定的链接。`<a>`

## 最终的 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Themed Website</title>
        <style type="text/css">
            body {font-family: segoe ui; background: #fff;}
            body .wrap {width: 90%; margin: auto; overflow: hidden; border: 1px solid #ccc;}
            body .wrap .side {width: 25%; float: left;}
            body .wrap .side ul {margin: 0; padding: 0; list-style: none;}
            body .wrap .side ul li {margin: 0; padding: 0; list-style: none;}
            body .wrap .side ul li a {text-decoration: none; padding: 5px; display: block;}
            body .wrap .side ul li a:hover {background: #ccc; color: #0ff;}
            body .wrap .side ul li a.active {background: #0fc; color: #000;}
            body .wrap .main {width: 75%; float: right; background: #0fc;}
            body .wrap .main h1 {margin: 0; padding: 0 10px 10px;}
            body .wrap .main h2 {margin: 0; padding: 10px;}
            body .wrap .main p {margin: 0 10px 5px; text-align: justify;}
            body .wrap .main ul {margin: 0 10px 10px;}

            .light {color: #333; background: #f5f5f5;}
            .light .wrap .side ul li a {color: #666; background: #eee;}
            .light .wrap .side ul li a:hover {color: #333; background: #ddd;}
            .light .wrap .side ul li a.active {color: #333; background: #0ff;}
            .light .wrap .main {background: #0ff;}
            .light .wrap .main h1 {color: #333;}
            .light .wrap .main h2 {color: #666; background: #0fc;}
            .light .wrap .main p {color: #093;}
            .light .wrap .main ul li p {color: #09c;}

            .grayscale {color: #333; background: #ccc;}
            .grayscale .wrap .side ul li a {color: #666; background: #eee;}
            .grayscale .wrap .side ul li a:hover {color: #333; background: #ddd;}
            .grayscale .wrap .side ul li a.active {color: #333; background: #fff;}
            .grayscale .wrap .main {background: #fff;}
            .grayscale .wrap .main h1 {color: #333;}
            .grayscale .wrap .main h2 {color: #fff; background: #999;}
            .grayscale .wrap .main p {color: #666;}
            .grayscale .wrap .main ul li p {color: #999;}

            .wrap.themelinks {background: #fff; border-radius: 10px; clear: both; overflow: hidden; margin-top: 25px;}
            .themelinks h4 {margin: 0; padding: 10px;}
            .themelinks .theme {margin: 0 10px 10px; padding: 3px 5px; display: inline-block; background: #eee; border-radius: 5px; text-decoration: none; color: #f90}
            .themelinks .theme:hover {background: #f90; color: #fff;}
        </style>
        <script type="text/javascript">
            $(document).ready(function(){
                $(".theme").click(function(e){
                    var theClass = $(this).attr("href");
                    $("body").removeAttr("class").addClass(theClass);
                    return false;
                });
            });
        </script>
    </head>
    <body>
        <div class="wrap">
            <div class="side">
                <ul>
                    <li><a href="#">Link 1</a></li>
                    <li><a href="#">Link 2</a></li>
                    <li><a href="#" class="active">Link 3</a></li>
                    <li><a href="#">Link 4</a></li>
                    <li><a href="#">Link 5</a></li>
                </ul>
            </div>
            <div class="main">
                <h1>Welcome</h1>
                <h2>A Paragraph</h2>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse.
                </p>
                <h2>A List</h2>
                <ul>
                    <li>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                    </li>
                    <li>
                        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
                    </li>
                    <li>
                        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse.</p>
                    </li>
                </ul>
            </div>
        </div>
        <div class="wrap themelinks">
            <h4>Change Themes:</h4>
            <a href="" class="theme">No Theme</a>
            <a href="light" class="theme">Light</a>
            <a href="grayscale" class="theme">Grayscale</a>
        </div>
    </body>
</html> 
```

您可以查看[jsBin](http://jsbin.com/welcome/21192)中的工作演示。

# clang - Libnet11 手动构建 IPv6 数据包

> ID：13193561
> 
> 赞同：1
> 
> 时间：2012-11-02T10:37:03.050
> 
> 标签：clang, ipv6, icmp, libnet, packet-injection

我正在尝试使用**Libnet11**功能：

```
int libnet_write_raw_ipv6 (libnet_t *l, u_int8_t *packet, u_int32_t size) 
```

在网络层注入 IPv6 数据包。我创建了 IPv6 数据包并使用 Wireshark 捕获它。Wireshark 报告： *格式错误的数据包*（wireshark 说 IPv6 中的下一个标头值是错误的，并且我认为有效负载大小太大）

我希望有人可以通过**最少的代码示例帮助我，展示如何**使用 libnet11 (libnet_write_raw_ipv6()) 手动构建 IPv6 数据包（带有 ICMPv6 扩展标头）。

我假设最小的代码可能如下所示：

```
packet_len = 40 + 16; // 40B ~ IPv6 packet, 16B ~ ICMPv6 header
u_char *buf = NULL;

struct ip6_hdr *ip6 = NULL;
struct icmp6_hdr *icmp6 = NULL;

l = libnet_init();
if ( (buf = malloc(packet_len)) == NULL ) {
    // error
}

// create IPv6 header
ip6 = (struct ip6_hdr *) buf;
ip6->ip6_flow   = 0;
ip6->ip6_vfc    = 6 << 4;
ip6->ip6_plen   = 16;              // ICMPv6 packet size
ip6->ip6_nxt    = IPPROTO_ICMPV6;  // 0x3a
ip6->ip6_hlim   = 64;
memcpy(&(ip6->ip6_src), &src_addr, sizeof(struct in6_addr));
memcpy(&(ip6->ip6_dst), &dst_addr, sizeof(struct in6_addr));

// create ICMPv6 header
icmp6 = (struct icmp6_hdr *) (buf + 40); // 40B ~ IPv6 packet size
icmp6->icmp6_type = ICMP6_ECHO_REQUEST;
icmp6->icmp6_code = 0;
icmp6->icmp6_cksum= 0;
icmp6->icmp6_data32[0] = 0;

libnet_do_checksum(l, (u_int8_t *)buf, IPPROTO_ICMPV6, packet_len);

written = libnet_write_raw_ipv6(l, buf, packet_len);
if ( written != packet_len )
    perror("Failed to send packet");

libnet_destroy(l);
free(buf); 
```

我试图找到代码示例但没有成功。先感谢您。

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:58:32.647

如果您使用的是 C++，那么我会推荐您[libtins](http://libtins.github.io/)，这是一个制作嗅探库的数据包。这个简短的片段完全符合您的要求：

```
#include <tins/tins.h>

using namespace Tins;

void test(const IPv6Address &dst, const IPv6Address &src) {
    PacketSender sender;
    IPv6 ipv6 = IPv6(dst, src) / ICMPv6();
    ipv6.hop_limit(64);
    sender.send(ipv6);
}

int main() {
    // now use it
    test("f0ef:1234::1", "f000::1");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T16:48:58.123

不过，您可以使用原始套接字创建它。我也必须做类似的事情，但找不到任何参考。

要使用原始套接字，此[链接](http://www.pdbuchan.com/rawsock/rawsock.html)为您提供了一个很好的解释

# java - 查询字符串的正则表达式模式

> ID：13193566
> 
> 赞同：2
> 
> 时间：2012-11-02T10:37:20.540
> 
> 标签：java, regex

我需要帮助查找 java regex 模式以从 URI 获取一个查询信息。例如这里的URI是

```
"GET /6.2/calculateroute.xml?routeattributes=sm,wp,lg,bb&legattributes=mn&maneuverattributes=ac,po,tt,le,-rn,-sp,-di,no,nu,nr,sh&instructionFormat=html&language=en_US&mode=fastest;car;traffic:default&waypoint0=37.79548,-122.392025&waypoint1=36.0957717,-115.1745167&resolution=786&app_id=D4KnHBzGYyJtbM8lVfYX&token=TRKB7vnBguWLam5rdWshTA HTTP/1.1" 
```

我需要从中提取 4 个值，我设法做到了：

```
GET

/6.2/calculateroute.xml

routeattributes=sm,wp,lg,bb&legattributes=mn&maneuverattributes=ac,po,tt,le,-rn,-sp,-di,no,nu,nr,sh&instructionFormat=html&language=en_US&mode=fastest;car;traffic:default&waypoint0=37.79548,-122.392025&waypoint1=36.0957717,-115.1745167&resolution=786&app_id=D4KnHBzGYyJtbM8lVfYX&token=TRKB7vnBguWLam5rdWshTA

HTTP/1.1 
```

现在的问题是如何从查询字符串中为 app_id 值编写正则表达式。注意 app_id 不会出现在所有模式中，所以它应该是通用的，如果 app_id 缺失，正则表达式不应该失败。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:47:09.063

您的问题可以简化为：“如何从字符串中提取可选查询参数”。就是这样：

```
String appId = input.replaceAll("(.*(app_id=(\\w+)).*)|.*", "$3"); 
```

如果存在，该`appId`变量将包含 app_id 值，否则为空白。

下面是一些测试代码，代码捆绑为实用方法：

```
public static String getParameterValue(String input, String parameter) {
    return input.replaceAll("(.*("+parameter+"=(\\w+)).*)|.*", "$3"));
}

public static void main(String[] args) {
    String input1 = "foo=bar&app_id=D4KnHBzGYyJtbM8lVfYX&x=y";
    String input2 = "foo=bar&XXXXXX=D4KnHBzGYyJtbM8lVfYX&x=y";

    System.out.println("app_id1:" + getParameterValue(input1, "app_id"));
    System.out.println("app_id2:" + getParameterValue(input2, "app_id"));
} 
```

输出：

```
app_id1:D4KnHBzGYyJtbM8lVfYX
app_id2: 
```

# c++ - 缓存未命中压力测试：惊人的结果.. 有什么解释吗？

> ID：13193569
> 
> 赞同：9
> 
> 时间：2012-11-02T10:37:31.197
> 
> 标签：c++, c, caching, memory, hardware

为了获得现代计算机相对于缓存未命中的实际性能（内存中的数据如何“传播”），我进行了一个简单的测试，我分配了 500 MB 的 RAM，然后执行恒定数量的读取，并且我使用增加的字节偏移量执行该测试。最后，当我到达 1000 MB 缓冲区的末尾时，我将其包裹起来。

我对结果感到非常惊讶。看起来在 32 字节左右存在成本障碍，另一个在 32 KB 左右。我想这与 L1/L2/L3 缓存负载或虚拟内存页面大小有关？最让我震惊的是，似乎只有大约 16 个完全不同的内存位置被缓存。太低了！！！任何解释（操作系统，硬件）？

这是 3 台不同计算机上的结果，从最快的一台到最便宜的一台，然后是我的简单测试代码（仅使用标准库）。

16 GB RAM 快速 HP 工作站（在 32 位 Windows 中测试）：

```
time=0.364000 byteIncrement=4 numReadLocations=262144000 numReads=262144000
time=0.231000 byteIncrement=8 numReadLocations=131072000 numReads=262144000
time=0.339000 byteIncrement=16 numReadLocations=65536000 numReads=262144000
time=0.567000 byteIncrement=32 numReadLocations=32768000 numReads=262144000
time=1.177000 byteIncrement=64 numReadLocations=16384000 numReads=262144000
time=1.806000 byteIncrement=128 numReadLocations=8192000 numReads=262144000
time=2.293000 byteIncrement=256 numReadLocations=4096000 numReads=262144000
time=2.464000 byteIncrement=512 numReadLocations=2048000 numReads=262144000
time=2.621000 byteIncrement=1024 numReadLocations=1024000 numReads=262144000
time=2.775000 byteIncrement=2048 numReadLocations=512000 numReads=262144000
time=2.908000 byteIncrement=4096 numReadLocations=256000 numReads=262144000
time=3.007000 byteIncrement=8192 numReadLocations=128000 numReads=262144000
time=3.183000 byteIncrement=16384 numReadLocations=64000 numReads=262144000
time=3.758000 byteIncrement=32768 numReadLocations=32000 numReads=262144000
time=4.287000 byteIncrement=65536 numReadLocations=16000 numReads=262144000
time=6.366000 byteIncrement=131072 numReadLocations=8000 numReads=262144000
time=6.124000 byteIncrement=262144 numReadLocations=4000 numReads=262144000
time=5.295000 byteIncrement=524288 numReadLocations=2000 numReads=262144000
time=5.540000 byteIncrement=1048576 numReadLocations=1000 numReads=262144000
time=5.844000 byteIncrement=2097152 numReadLocations=500 numReads=262144000
time=5.785000 byteIncrement=4194304 numReadLocations=250 numReads=262144000
time=5.714000 byteIncrement=8388608 numReadLocations=125 numReads=262144000
time=5.825000 byteIncrement=16777216 numReadLocations=62 numReads=262144000
time=5.759000 byteIncrement=33554432 numReadLocations=31 numReads=262144000
time=2.222000 byteIncrement=67108864 numReadLocations=15 numReads=262144000
time=0.471000 byteIncrement=134217728 numReadLocations=7 numReads=262144000
time=0.377000 byteIncrement=268435456 numReadLocations=3 numReads=262144000
time=0.166000 byteIncrement=536870912 numReadLocations=1 numReads=262144000 
```

4 GB RAM MacBookPro 2010（在 32 位 Windows 中测试）：

```
time=0.476000 byteIncrement=4 numReadLocations=262144000 numReads=262144000
time=0.357000 byteIncrement=8 numReadLocations=131072000 numReads=262144000
time=0.634000 byteIncrement=16 numReadLocations=65536000 numReads=262144000
time=1.173000 byteIncrement=32 numReadLocations=32768000 numReads=262144000
time=2.360000 byteIncrement=64 numReadLocations=16384000 numReads=262144000
time=3.469000 byteIncrement=128 numReadLocations=8192000 numReads=262144000
time=3.990000 byteIncrement=256 numReadLocations=4096000 numReads=262144000
time=3.549000 byteIncrement=512 numReadLocations=2048000 numReads=262144000
time=3.758000 byteIncrement=1024 numReadLocations=1024000 numReads=262144000
time=3.867000 byteIncrement=2048 numReadLocations=512000 numReads=262144000
time=4.275000 byteIncrement=4096 numReadLocations=256000 numReads=262144000
time=4.310000 byteIncrement=8192 numReadLocations=128000 numReads=262144000
time=4.584000 byteIncrement=16384 numReadLocations=64000 numReads=262144000
time=5.144000 byteIncrement=32768 numReadLocations=32000 numReads=262144000
time=6.100000 byteIncrement=65536 numReadLocations=16000 numReads=262144000
time=8.111000 byteIncrement=131072 numReadLocations=8000 numReads=262144000
time=6.256000 byteIncrement=262144 numReadLocations=4000 numReads=262144000
time=6.311000 byteIncrement=524288 numReadLocations=2000 numReads=262144000
time=6.416000 byteIncrement=1048576 numReadLocations=1000 numReads=262144000
time=6.635000 byteIncrement=2097152 numReadLocations=500 numReads=262144000
time=6.530000 byteIncrement=4194304 numReadLocations=250 numReads=262144000
time=6.544000 byteIncrement=8388608 numReadLocations=125 numReads=262144000
time=6.545000 byteIncrement=16777216 numReadLocations=62 numReads=262144000
time=5.272000 byteIncrement=33554432 numReadLocations=31 numReads=262144000
time=1.524000 byteIncrement=67108864 numReadLocations=15 numReads=262144000
time=0.538000 byteIncrement=134217728 numReadLocations=7 numReads=262144000
time=0.508000 byteIncrement=268435456 numReadLocations=3 numReads=262144000
time=0.817000 byteIncrement=536870912 numReadLocations=1 numReads=262144000 
```

4GB RAM 便宜的宏碁“家用电脑”：

```
time=0.732000 byteIncrement=4 numReadLocations=262144000 numReads=262144000
time=0.549000 byteIncrement=8 numReadLocations=131072000 numReads=262144000
time=0.765000 byteIncrement=16 numReadLocations=65536000 numReads=262144000
time=1.196000 byteIncrement=32 numReadLocations=32768000 numReads=262144000
time=2.318000 byteIncrement=64 numReadLocations=16384000 numReads=262144000
time=2.483000 byteIncrement=128 numReadLocations=8192000 numReads=262144000
time=2.760000 byteIncrement=256 numReadLocations=4096000 numReads=262144000
time=3.194000 byteIncrement=512 numReadLocations=2048000 numReads=262144000
time=3.369000 byteIncrement=1024 numReadLocations=1024000 numReads=262144000
time=3.720000 byteIncrement=2048 numReadLocations=512000 numReads=262144000
time=4.842000 byteIncrement=4096 numReadLocations=256000 numReads=262144000
time=5.797000 byteIncrement=8192 numReadLocations=128000 numReads=262144000
time=9.865000 byteIncrement=16384 numReadLocations=64000 numReads=262144000
time=19.273000 byteIncrement=32768 numReadLocations=32000 numReads=262144000
time=19.282000 byteIncrement=65536 numReadLocations=16000 numReads=262144000
time=19.606000 byteIncrement=131072 numReadLocations=8000 numReads=262144000
time=20.242000 byteIncrement=262144 numReadLocations=4000 numReads=262144000
time=20.956000 byteIncrement=524288 numReadLocations=2000 numReads=262144000
time=22.627000 byteIncrement=1048576 numReadLocations=1000 numReads=262144000
time=24.336000 byteIncrement=2097152 numReadLocations=500 numReads=262144000
time=24.403000 byteIncrement=4194304 numReadLocations=250 numReads=262144000
time=23.060000 byteIncrement=8388608 numReadLocations=125 numReads=262144000
time=20.553000 byteIncrement=16777216 numReadLocations=62 numReads=262144000
time=14.460000 byteIncrement=33554432 numReadLocations=31 numReads=262144000
time=1.752000 byteIncrement=67108864 numReadLocations=15 numReads=262144000
time=0.963000 byteIncrement=134217728 numReadLocations=7 numReads=262144000
time=0.687000 byteIncrement=268435456 numReadLocations=3 numReads=262144000
time=0.453000 byteIncrement=536870912 numReadLocations=1 numReads=262144000 
```

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define MEMBLOCSIZE ((2<<20)*500)//1000MB

int readMemory( int* data, int* dataEnd, int numReads, int incrementPerRead ) {
  int accum = 0;
  int* ptr = data;

  while(true) {
    accum += *ptr;
    if( numReads-- == 0)
      return accum;

    ptr += incrementPerRead;

    if( ptr >= dataEnd )
      ptr = data;
  }
}

int main()
{
  int* data = (int*)malloc(MEMBLOCSIZE);
  int* dataEnd = data+(MEMBLOCSIZE / sizeof(int));

  int numReads = (MEMBLOCSIZE / sizeof(int));
  int dummyTotal = 0;
  int increment = 1;
  for( int loop = 0; loop < 28; ++loop ) {
    int startTime = clock();

    dummyTotal += readMemory(data, dataEnd, numReads, increment);

    int endTime = clock();
    double deltaTime = double(endTime-startTime)/double(CLOCKS_PER_SEC);

    printf("time=%f byteIncrement=%d numReadLocations=%d numReads=%d\n",
      deltaTime, increment*sizeof(int), MEMBLOCSIZE/(increment*sizeof(int)), numReads);

    increment *= 2;
  }
  //Use dummyTotal: make sure the optimizer is not removing my code...
  return dummyTotal == 666 ? 1: 0;
} 
```

根据一些评论，我修改了我的测试以仅使用 250 MB 的 RAM，并为每个“读取”执行 16 次连续读取，以防它激活预取。它仍然有类似的结果，但是最后的测试，即读取几个遥远位置的测试，具有更好的性能（2 秒而不是 5 秒），所以这可能是因为初始测试没有激活预取。

```
#define MEMBLOCSIZE 262144000//250MB

int readMemory( int* data, int* dataEnd, int numReads, int incrementPerRead ) {
  int accum = 0;
  int* ptr = data;

  while(true) {
    accum += *ptr;
    if( numReads-- == 0)
      return accum;

    //Do 16 consecutive reads
    for( int i = 1; i < 17; ++i )
      accum += *(ptr+i);

    ptr += incrementPerRead;

    if( ptr >= dataEnd+17 )
      ptr = data;
  }
} 
```

MacBookPro 2010 更新测试的结果：

```
time=0.691000 byteIncrement=4 numReadLocations=65536000 numReads=65536000
time=0.620000 byteIncrement=8 numReadLocations=32768000 numReads=65536000
time=0.715000 byteIncrement=16 numReadLocations=16384000 numReads=65536000
time=0.827000 byteIncrement=32 numReadLocations=8192000 numReads=65536000
time=0.917000 byteIncrement=64 numReadLocations=4096000 numReads=65536000
time=1.440000 byteIncrement=128 numReadLocations=2048000 numReads=65536000
time=2.646000 byteIncrement=256 numReadLocations=1024000 numReads=65536000
time=3.720000 byteIncrement=512 numReadLocations=512000 numReads=65536000
time=3.854000 byteIncrement=1024 numReadLocations=256000 numReads=65536000
time=4.673000 byteIncrement=2048 numReadLocations=128000 numReads=65536000
time=4.729000 byteIncrement=4096 numReadLocations=64000 numReads=65536000
time=4.784000 byteIncrement=8192 numReadLocations=32000 numReads=65536000
time=5.021000 byteIncrement=16384 numReadLocations=16000 numReads=65536000
time=5.022000 byteIncrement=32768 numReadLocations=8000 numReads=65536000
time=4.871000 byteIncrement=65536 numReadLocations=4000 numReads=65536000
time=5.163000 byteIncrement=131072 numReadLocations=2000 numReads=65536000
time=5.276000 byteIncrement=262144 numReadLocations=1000 numReads=65536000
time=4.699000 byteIncrement=524288 numReadLocations=500 numReads=65536000
time=1.997000 byteIncrement=1048576 numReadLocations=250 numReads=65536000
time=2.118000 byteIncrement=2097152 numReadLocations=125 numReads=65536000
time=2.071000 byteIncrement=4194304 numReadLocations=62 numReads=65536000
time=2.036000 byteIncrement=8388608 numReadLocations=31 numReads=65536000
time=1.923000 byteIncrement=16777216 numReadLocations=15 numReads=65536000
time=1.084000 byteIncrement=33554432 numReadLocations=7 numReads=65536000
time=0.607000 byteIncrement=67108864 numReadLocations=3 numReads=65536000
time=0.622000 byteIncrement=134217728 numReadLocations=1 numReads=65536000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:05:23.617

请注意，正如您得出的任何结论一样，以下大部分内容都是推测性的。内存基准测试非常复杂，并且像您所做的那样相对幼稚的基准测试很少提供有关实际程序性能的大量明确信息。

32 kiB 的主要“成本障碍”*可能*更多的是 64 kiB（或两者的组合）。由于您没有初始化内存，Windows 将在您读取它们时拉入零页。分配粒度为 64 kiB，并且页面始终以该大小“准备好”（如果您进行内存映射，则预取），即使只有 64 kiB 范围内的页面之一被移动到您的工作集中。这是我在尝试内存映射时发现的。

默认情况下，Windows 设置的进程工作集非常小，因此当您遍历该内存块时，您将不断遇到页面错误。有些更便宜，只更改页面描述符中的标志，其他（64 kiB）更昂贵，从零池中拉出 16 个新页面（或者，在最坏的情况下，如果池为空，则将页面归零）。这可以很好地解释您看到的“成本障碍”之一。

正如您正确注意到的那样，另一个成本障碍是缓存关联性。在较大的二次幂偏移处的不同地址使用相同的缓存条目。给定“不健康”的偏移量，可能会导致相同的缓存行一次又一次地被驱逐。这是对齐好的两个主要原因之一，但是过度的过度对齐是不好的（另一个是没有数据的局部性）。

32 字节的成本障碍令人惊讶，如果有的话，可以想象它是 64 字节（跨越测试架构上的缓存线）。预取应该在很大程度上消除这种停顿，但预取通常只*在第二个高速缓存行未命中后以给定的步幅*激活（如果你没有明确提示的话） 。

这对于“真实”程序来说是完全可以接受的，这些程序要么只读取一个位置和另一个位置，要么按顺序迭代大量数据。另一方面，在进行人工测量时，它可能很容易给出令人困惑的结果。这也可能是您看到 32 kiB 成本障碍的一种可能解释。如果预取不起作用，那么这将是您在典型 x86 上耗尽 L1 缓存的地方。

# c# - 使用文本框搜索绑定到 SQLDataSource 的 GridView

> ID：13193574
> 
> 赞同：0
> 
> 时间：2012-11-02T10:37:41.677
> 
> 标签：c#, asp.net, sql

我的场景是一个 Gridview，它使用 asp:SQLDataSource 绑定到一个存储过程。这是使用向导快速完成的，我在其中选择了 SP 并显示了所有数据。SP 以包含 4 个参数的方式创建。当此类参数为空时，它们将返回查询中的所有值。

我创建了 3 个文本框和一个下拉列表来填充这些参数，将它们绑定到一个按钮以尝试创建搜索功能。我尝试了很多方法和方法，尤其是通过对这个站点的研究，但似乎没有一个有效。我不能完全找到我的问题，所以我很感激任何关于此事的帮助。下面是我的代码。

```
<asp:SqlDataSource ID="sqlSourceID" runat="server" ConnectionString="<%$ ConnectionStrings:DBCONNSTRING%>"
            SelectCommand="storedProcedureName" SelectCommandType="StoredProcedure">                
        </asp:SqlDataSource> 
```

以上是SQL存储过程绑定。

我已尝试将控件绑定为 SQL 服务器的参数。在此代码之前，用于加载所有记录的页面在没有搜索参数的情况下正常加载，因为 SP 假定为空值。现在什么都没有加载。

```
 <SelectParameters>
                <asp:ControlParameter ConvertEmptyStringToNull="true" ControlID="textBox1" PropertyName="Text" Name="1" Type="DateTime" />
                <asp:ControlParameter ConvertEmptyStringToNull="true" ControlID="textBox2" PropertyName="Text" Name="2" Type="DateTime" />
                <asp:ControlParameter ConvertEmptyStringToNull="true" ControlID="textBox3" PropertyName="Text" Name="3" Type="String" />
                <asp:ControlParameter ConvertEmptyStringToNull="true" ControlID="ddl1" PropertyName="SelectedText" Name="4" Type="String" />
            </SelectParameters> 
```

其中控件 ID 代表文本框 ID

下面是我的代码。

```
 sqlSourceID.SelectParameters["textbox1"].DefaultValue = this.textbox.Text;
        sqlSourceID.SelectParameters["textbox2"].DefaultValue = this.textbox1.Text;
        sqlSourceID.SelectParameters["textbox3"].DefaultValue = this.textbox2.Text;
        sqlSourceID.SelectParameters["ddl1"].DefaultValue =    Convert.ToString(this.ddl.SelectedText); 
```

那是我的问题。我需要找到一种方法来在单击“搜索”按钮时从文本框中传递参数，并在页面加载时假定为 null 或没有写入任何内容。

感谢所有提前做出贡献的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:10:20.233

我不保证这会解决问题，但我发现有三件事看起来有问题：

1.  您为标签的`Name`属性提供了值 1、2 和 3 。`asp:ControlParameter`除非您调用的存储过程实际上具有名为@1、@2 和@3 的参数，否则您需要将这些名称更改为您要映射到的存储过程的参数名称。

2.  同样，在您的代码隐藏中，您使用控件名称来查找您的参数`SqlDataSource.SelectCommand`，如下所示：

    ```
    sqlSourceID.SelectParameters["textbox1"].DefaultValue = this.textbox.Text; 
    ```

    但是“textbox1”不是您的存储过程参数的名称。如您所写，@1 是该参数的名称。如果您保留名称 1、2 和 3，您应该像这样进行参数设置：

    ```
    sqlSourceID.SelectParameters["1"].DefaultValue = this.textbox.Text; 
    ```

3.  但我认为您根本不需要在代码隐藏中设置参数的值。这就是`ControlParameter`: 它获取控件属性的值并将其分配给命令参数。以下是一些可能有帮助的链接： [使用 SqlDataSource 控件](http://msdn.microsoft.com/en-us/library/w1kdt8w2.aspx)和[ASP.NET DetailsView 和 ControlParameter 示例选择数据。](http://asp-net-example.blogspot.com/2008/12/aspnet-detailsview-and-controlparameter.html)

我希望这有帮助。

# c# - WinRT 后台任务

> ID：13193579
> 
> 赞同：2
> 
> 时间：2012-11-02T10:37:53.473
> 
> 标签：c#, windows-runtime

我有一个播放音乐的 winRT 应用程序，我想启用背景音频。我的 MediaElement 在 [Solution]\Player\PlayerView.xaml

后台任务属性中的启动页面应该是什么？

我试过了： PlayerView.xaml, Player\PlayerView.xaml 没有运气，也许我错过了其他一些属性？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:45:58.307

起始页适用于您使用 JS 项目的情况。入口点是 XAML。除了音频功能之外，您实际上不需要为您的后台任务声明任何内容，因为调度程序使用以下方式处理所有后台工作

```
await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () => mediaplayer.DoSomething()); 
```

如果您创建了一个运行某种后台任务的 WinMD（也称为 Windows 运行时库，不可移植）库，则您只会输入起始页/入口点。这也将是 C# 代码，而不是 XAML。后台工作人员没有 UI 组件

# ruby-on-rails - Ruby：如何获取在子类中重新定义的父方法

> ID：13193586
> 
> 赞同：0
> 
> 时间：2012-11-02T10:38:17.257
> 
> 标签：ruby-on-rails, ruby

如何在下面的代码中从 Up 类中获取 Base 的“hello”方法？

```
class Base
  def hello
    p 'hello from Base'
  end
end

class Up < Base
  def hello_orig
    # how to call hello from Base class?
  end

  def hello
    p 'hello from Up'
  end
end

u = Up.new
u.hello_orig # should return 'hello from Base' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:50:14.367

您也可以使用别名。

```
class Base
  def hello
    p 'hello from Base'
  end
end

class Up < Base
  alias hello_orig hello

  def hello
    p 'hello from Up'
  end
end

u = Up.new
u.hello_orig # should return 'hello from Base' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:46:13.023

试试这个，

```
class Base
  def hello
    p 'hello from Base'
  end

end

class Up < Base
  def hello_orig
    Base.instance_method(:hello).bind(self).call

  end

  def hello
    super() 
    p 'hello from Up'
  end

end

u = Up.new
u.hello_orig # should return 'hello from Base' or
u.hello 
```

# android - ADB - Android - 获取当前活动的名称

> ID：13193592
> 
> 赞同：110
> 
> 时间：2012-11-02T10:38:43.763
> 
> 标签：android, adb, ddms

有没有办法获取通过 adb 运行的当前活动的详细信息。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-11-03T18:44:31.583

`dumpsys window windows`我更喜欢解析结果`dumpsys activity`

```
adb shell dumpsys window windows | grep -E 'mCurrentFocus|mFocusedApp' 
```

Keyguard 或最近的任务列表过去不会显示为活动，但您可以使用`mCurrentFocus`. [我已经在这个答案](https://stackoverflow.com/a/39774220/1778421)中解释了原因。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-11-02T10:40:42.743

你可以使用这个命令，

```
adb shell dumpsys activity 
```

您可以在活动堆栈中找到当前活动名称。

**输出 ：-**

```
 Sticky broadcasts:
 * Sticky action android.intent.action.BATTERY_CHANGED:
   Intent: act=android.intent.action.BATTERY_CHANGED flg=0x60000000
     Bundle[{icon-small=17302169, present=true, scale=100, level=50, technology=Li-ion, status=2, voltage=0, plugged=1, health=2, temperature=0}]
 * Sticky action android.net.thrott.THROTTLE_ACTION:
   Intent: act=android.net.thrott.THROTTLE_ACTION
     Bundle[{level=-1}]
 * Sticky action android.intent.action.NETWORK_SET_TIMEZONE:
   Intent: act=android.intent.action.NETWORK_SET_TIMEZONE flg=0x20000000
     Bundle[mParcelledData.dataSize=68]
 * Sticky action android.provider.Telephony.SPN_STRINGS_UPDATED:
   Intent: act=android.provider.Telephony.SPN_STRINGS_UPDATED flg=0x20000000
     Bundle[mParcelledData.dataSize=156]
 * Sticky action android.net.thrott.POLL_ACTION:
   Intent: act=android.net.thrott.POLL_ACTION
     Bundle[{cycleRead=0, cycleStart=1349893800000, cycleEnd=1352572200000, cycleWrite=0}]
 * Sticky action android.intent.action.SIM_STATE_CHANGED:
   Intent: act=android.intent.action.SIM_STATE_CHANGED flg=0x20000000
     Bundle[mParcelledData.dataSize=116]
 * Sticky action android.intent.action.SIG_STR:
   Intent: act=android.intent.action.SIG_STR flg=0x20000000
     Bundle[{EvdoSnr=-1, CdmaDbm=-1, GsmBitErrorRate=-1, CdmaEcio=-1, EvdoDbm=-1, GsmSignalStrength=7, EvdoEcio=-1, isGsm=true}]
 * Sticky action android.intent.action.SERVICE_STATE:
   Intent: act=android.intent.action.SERVICE_STATE flg=0x20000000
     Bundle[{cdmaRoamingIndicator=0, operator-numeric=310260, networkId=0, state=0, emergencyOnly=false, operator-alpha-short=Android, radioTechnology=3, manual=false, cssIndicator=false, operator-alpha-long=Android, systemId=0, roaming=false, cdmaDefaultRoamingIndicator=0}]
 * Sticky action android.net.conn.CONNECTIVITY_CHANGE:
   Intent: act=android.net.conn.CONNECTIVITY_CHANGE flg=0x30000000
     Bundle[{networkInfo=NetworkInfo: type: mobile[UMTS], state: CONNECTED/CONNECTED, reason: simLoaded, extra: internet, roaming: false, failover: false, isAvailable: true, reason=simLoaded, extraInfo=internet}]
 * Sticky action android.intent.action.NETWORK_SET_TIME:
   Intent: act=android.intent.action.NETWORK_SET_TIME flg=0x20000000
     Bundle[mParcelledData.dataSize=36]
 * Sticky action android.media.RINGER_MODE_CHANGED:
   Intent: act=android.media.RINGER_MODE_CHANGED flg=0x70000000
     Bundle[{android.media.EXTRA_RINGER_MODE=2}]
 * Sticky action android.intent.action.ANY_DATA_STATE:
   Intent: act=android.intent.action.ANY_DATA_STATE flg=0x20000000
     Bundle[{state=CONNECTED, apnType=*, iface=/dev/omap_csmi_tty1, apn=internet, reason=simLoaded}]

 Activity stack:
 * TaskRecord{450adb90 #22 A org.chanakyastocktipps.com}
   clearOnBackground=false numActivities=2 rootWasReset=false
   affinity=org.chanakyastocktipps.com
   intent={act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=org.chanakyastocktipps.com/.ui.SplashScreen}
   realActivity=org.chanakyastocktipps.com/.ui.SplashScreen
   lastActiveTime=15107753 (inactive for 4879s)
   * Hist #2: HistoryRecord{450d7ab0 org.chanakyastocktipps.com/.ui.Profile}
       packageName=org.chanakyastocktipps.com processName=org.chanakyastocktipps.com
       launchedFromUid=10046 app=ProcessRecord{44fa3450 1065:org.chanakyastocktipps.com/10046}
       Intent { cmp=org.chanakyastocktipps.com/.ui.Profile }
       frontOfTask=false task=TaskRecord{450adb90 #22 A org.chanakyastocktipps.com}
       taskAffinity=org.chanakyastocktipps.com
       realActivity=org.chanakyastocktipps.com/.ui.Profile
       base=/data/app/org.chanakyastocktipps.com-1.apk/data/app/org.chanakyastocktipps.com-1.apk data=/data/data/org.chanakyastocktipps.com
       labelRes=0x7f09000b icon=0x7f020065 theme=0x1030007
       stateNotNeeded=false componentSpecified=true isHomeActivity=false
       configuration={ scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=18 uiMode=17 seq=3}
       resultTo=HistoryRecord{44f523c0 org.chanakyastocktipps.com/.ui.MainScreen} resultWho=null resultCode=4
       launchFailed=false haveState=false icicle=null
       state=RESUMED stopped=false delayedResume=false finishing=false
       keysPaused=false inHistory=true persistent=false launchMode=0
       fullscreen=true visible=true frozenBeforeDestroy=false thumbnailNeeded=false idle=true
       waitingVisible=false nowVisible=true
   * Hist #1: HistoryRecord{44f523c0 org.chanakyastocktipps.com/.ui.MainScreen}
       packageName=org.chanakyastocktipps.com processName=org.chanakyastocktipps.com
       launchedFromUid=10046 app=ProcessRecord{44fa3450 1065:org.chanakyastocktipps.com/10046}
       Intent { cmp=org.chanakyastocktipps.com/.ui.MainScreen }
       frontOfTask=true task=TaskRecord{450adb90 #22 A org.chanakyastocktipps.com}
       taskAffinity=org.chanakyastocktipps.com
       realActivity=org.chanakyastocktipps.com/.ui.MainScreen
       base=/data/app/org.chanakyastocktipps.com-1.apk/data/app/org.chanakyastocktipps.com-1.apk data=/data/data/org.chanakyastocktipps.com
       labelRes=0x7f09000b icon=0x7f020065 theme=0x1030007
       stateNotNeeded=false componentSpecified=true isHomeActivity=false
       configuration={ scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=18 uiMode=17 seq=3}
       launchFailed=false haveState=true icicle=Bundle[mParcelledData.dataSize=1344]
       state=STOPPED stopped=true delayedResume=false finishing=false
       keysPaused=false inHistory=true persistent=false launchMode=0
       fullscreen=true visible=false frozenBeforeDestroy=false thumbnailNeeded=false idle=true
 * TaskRecord{450615a0 #2 A com.android.launcher}
   clearOnBackground=true numActivities=1 rootWasReset=false
   affinity=com.android.launcher
   intent={act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.android.launcher/com.android.launcher2.Launcher}
   realActivity=com.android.launcher/com.android.launcher2.Launcher
   lastActiveTime=12263090 (inactive for 7724s)
   * Hist #0: HistoryRecord{4505d838 com.android.launcher/com.android.launcher2.Launcher}
       packageName=com.android.launcher processName=com.android.launcher
       launchedFromUid=0 app=ProcessRecord{45062558 129:com.android.launcher/10025}
       Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.android.launcher/com.android.launcher2.Launcher }
       frontOfTask=true task=TaskRecord{450615a0 #2 A com.android.launcher}
       taskAffinity=com.android.launcher
       realActivity=com.android.launcher/com.android.launcher2.Launcher
       base=/system/app/Launcher2.apk/system/app/Launcher2.apk data=/data/data/com.android.launcher
       labelRes=0x7f0c0002 icon=0x7f020044 theme=0x7f0d0000
       stateNotNeeded=true componentSpecified=false isHomeActivity=true
       configuration={ scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=18 uiMode=17 seq=3}
       launchFailed=false haveState=true icicle=Bundle[mParcelledData.dataSize=3608]
       state=STOPPED stopped=true delayedResume=false finishing=false
       keysPaused=false inHistory=true persistent=false launchMode=2
       fullscreen=true visible=false frozenBeforeDestroy=false thumbnailNeeded=false idle=true

 Running activities (most recent first):
   TaskRecord{450adb90 #22 A org.chanakyastocktipps.com}
     Run #2: HistoryRecord{450d7ab0 org.chanakyastocktipps.com/.ui.Profile}
     Run #1: HistoryRecord{44f523c0 org.chanakyastocktipps.com/.ui.MainScreen}
   TaskRecord{450615a0 #2 A com.android.launcher}
     Run #0: HistoryRecord{4505d838 com.android.launcher/com.android.launcher2.Launcher}

 mPausingActivity: null
 mResumedActivity: HistoryRecord{450d7ab0 org.chanakyastocktipps.com/.ui.Profile}
 mFocusedActivity: HistoryRecord{450d7ab0 org.chanakyastocktipps.com/.ui.Profile}
 mLastPausedActivity: HistoryRecord{44f523c0 org.chanakyastocktipps.com/.ui.MainScreen}

 mCurTask: 22

 Running processes (most recent first):
   App  #13: adj=vis  /F 45052120 119:com.android.inputmethod.latin/10003 (service)
             com.android.inputmethod.latin.LatinIME<=ProcessRecord{44ec2698 59:system/1000}
   PERS #12: adj=sys  /F 44ec2698 59:system/1000 (fixed)
   App  #11: adj=fore /F 44fa3450 1065:org.chanakyastocktipps.com/10046 (top-activity)
   App  #10: adj=bak  /B 44e7c4c0 299:com.svox.pico/10028 (bg-empty)
   App  # 9: adj=bak+1/B 450f7ef0 288:com.dreamreminder.org:feather_system_receiver/10057 (bg-empty)
   App  # 8: adj=bak+2/B 4503cc38 201:com.android.defcontainer/10010 (bg-empty)
   App  # 7: adj=home /B 45062558 129:com.android.launcher/10025 (home)
   App  # 6: adj=bak+3/B 450244d8 276:android.process.media/10002 (bg-empty)
   App  # 5: adj=bak+4/B 44f2b9b8 263:com.android.quicksearchbox/10012 (bg-empty)
   App  # 4: adj=bak+5/B 450beec0 257:com.android.protips/10007 (bg-empty)
   App  # 3: adj=bak+6/B 44ff37b8 270:com.android.music/10022 (bg-empty)
   PERS # 2: adj=core /F 45056818 124:com.android.phone/1001 (fixed)
   App  # 1: adj=bak+7/B 45080c38 238:com.dreamreminder.org/10057 (bg-empty)
   App  # 0: adj=empty/B 4507d030 229:com.android.email/10030 (bg-empty)

 PID mappings:
   PID #59: ProcessRecord{44ec2698 59:system/1000}
   PID #119: ProcessRecord{45052120 119:com.android.inputmethod.latin/10003}
   PID #124: ProcessRecord{45056818 124:com.android.phone/1001}
   PID #129: ProcessRecord{45062558 129:com.android.launcher/10025}
   PID #201: ProcessRecord{4503cc38 201:com.android.defcontainer/10010}
   PID #229: ProcessRecord{4507d030 229:com.android.email/10030}
   PID #238: ProcessRecord{45080c38 238:com.dreamreminder.org/10057}
   PID #257: ProcessRecord{450beec0 257:com.android.protips/10007}
   PID #263: ProcessRecord{44f2b9b8 263:com.android.quicksearchbox/10012}
   PID #270: ProcessRecord{44ff37b8 270:com.android.music/10022}
   PID #276: ProcessRecord{450244d8 276:android.process.media/10002}
   PID #288: ProcessRecord{450f7ef0 288:com.dreamreminder.org:feather_system_receiver/10057}
   PID #299: ProcessRecord{44e7c4c0 299:com.svox.pico/10028}
   PID #1065: ProcessRecord{44fa3450 1065:org.chanakyastocktipps.com/10046}

 mHomeProcess: ProcessRecord{45062558 129:com.android.launcher/10025}
 mConfiguration: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=18 uiMode=17 seq=3}
 mConfigWillChange: false
 mSleeping=false mShuttingDown=false 
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2019-10-16T18:25:31.257

Android Q 为我打破了其中的大部分。这是一个似乎正在运行的新版本（至少在 Android Q 上）。

```
adb shell "dumpsys activity activities | grep mResumedActivity" 
```

输出如下所示：

```
mResumedActivity: ActivityRecord{7f6df99 u0 com.sample.app/.feature.SampleActivity t92} 
```

编辑：对我来说也适用于 Android R

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-03-10T18:35:47.923

[`dumpsys window windows`](https://stackoverflow.com/a/13212310/3063884)提供有关当前活动的更多详细信息：

```
adb shell "dumpsys window windows | grep -E 'mCurrentFocus|mFocusedApp'"
  mCurrentFocus=Window{41d2c970 u0 com.android.launcher/com.android.launcher2.Launcher}
  mFocusedApp=AppWindowToken{4203c170 token=Token{41b77280 ActivityRecord{41b77a28 u0 com.android.launcher/com.android.launcher2.Launcher t3}}} 
```

但是，为了找到进程 ID（例如杀死当前活动），请[`dumpsys activity`](https://stackoverflow.com/a/13193626/3063884)在“top-activity”上使用 和 grep：

```
adb shell "dumpsys activity | grep top-activity"
    Proc # 0: fore  F/A/T  trm: 0 3074:com.android.launcher/u0a8 (top-activity)

adb shell "kill 3074" 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-04-04T21:19:52.073

这对我有用：

`adb shell dumpsys activity`

这显示当前活动名称：

`adb shell dumpsys activity activities | grep mFocusedActivity | cut -d . -f 5 | cut -d ' ' -f 1`

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-09-21T08:39:45.743

如果您只想过滤掉当前正在运行/暂停的应用活动，可以使用以下命令：

```
adb shell dumpsys activity activities | grep 'Hist #' | grep 'YOUR_PACKAGE_NAME' 
```

例如：

```
adb shell dumpsys activity activities | grep 'Hist #' | grep 'com.supercell.clashroyale' 
```

输出将类似于：

```
* Hist #2: ActivityRecord{26ba44b u10 com.supercell.clashroyale/StartActivity t27770}
* Hist #1: ActivityRecord{2f3a0236 u10 com.supercell.clashroyale/SomeActivity t27770}
* Hist #0: ActivityRecord{20bbb4ae u10 com.supercell.clashroyale/OtherActivity t27770} 
```

请注意，输出显示了实际的活动堆栈，即最上面的活动是当前正在显示的活动。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2019-11-19T19:07:51.540

旧答案在新的 android 版本中停止工作。现在我使用以下内容：

```
adb shell "dumpsys activity activities | grep ResumedActivity" 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-03-01T03:02:21.603

你可以试试这个命令，

```
adb shell dumpsys activity recents 
```

在那里您可以在活动堆栈中找到当前活动名称。

要获取最近的活动名称：

```
adb shell dumpsys activity recents | find "Recent #0" 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-07-11T03:57:59.583

这是一个比命令行 adb 解决方案（确实有效）更容易的解决方案。它更容易，因为它更加图形化并且可以在 Eclipse 中完成。

在附加了 Android 设备的 Eclipse 中，转到 Window 菜单 > Show View > Other ... 使用过滤文本“Windows”拉起 Android > Windows ... 显示此内容。列表中的顶部项目是当前活动。

另一种方法是显示“层次视图”透视图，默认情况下将显示 Windows 窗口。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-10-16T07:41:27.403

下面的命令可用于查找包和当前活动名称。发现这个非常有用的命令可以快速获取有关应用程序的这两个信息，尤其是在使用 Appium 开发测试时。

```
adb shell dumpsys window windows | grep -E 'mCurrentFocus' 
```

此命令的响应包含包名称和当前活动。例如：在下面的“com.android.contacts”是包，“com.android.contacts.activities.TwelveKeyDialer”是通过adb连接的手机上启动的当前Activity。

```
mCurrentFocus=Window{2089af8 u0 com.android.contacts/com.android.contacts.activities.TwelveKeyDialer} 
```

参考：[http ://www.automationtestinghub.com/apppackage-and-appactivity-name/](http://www.automationtestinghub.com/apppackage-and-appactivity-name/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-26T17:46:01.407

在 Windows 中，此命令适用于我显示当前活动名称

```
adb shell dumpsys window windows | find "mCurrentFocus" 
```

输出：

```
mCurrentFocus=Window{a43a55b u0 com.android.contacts/com.android.contacts.activities.TwelveKeyDialer} 
```

使用“grep”命令的其他解决方案在我的 windows pc 中产生错误

```
'grep' is not recognized as an internal or external command, operable program or batch file. 
```

因此，使用“查找”解决了我的错误。

# ruby-on-rails - heroku 上的 rails 子目录上的 tumblr

> ID：13193593
> 
> 赞同：0
> 
> 时间：2012-11-02T10:38:46.593
> 
> 标签：ruby-on-rails, seo, blogs, tumblr

如果我将 tumblr 的子域功能与机架反向代理中间件一起使用，我是否会获得通过 blog.site.com 在 site.com/blog 上拥有博客的 seo 优势？

这些文章是正确的指南吗？

[http://www.tumblr.com/docs/en/custom_domains](http://www.tumblr.com/docs/en/custom_domains)

[http://bindle.me/blog/index.php/304/rack-middleware-for-seo-fun-and-profit](http://bindle.me/blog/index.php/304/rack-middleware-for-seo-fun-and-profit)

* * *

此外，该站点将托管在 heroku 上，使用 zerigo for dns 是我将 cname 指向 blog.site.com 的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:07:52.117

首先，如果您还没有，请为 Heroku 启用 Zerigo（您引用的自定义域 heroku 帖子中提供的步骤）：

[http://www.tumblr.com/docs/en/custom_domains](http://www.tumblr.com/docs/en/custom_domains)

如果您还没有完成这个过程，您可能需要等待几天才能通过 zerigo 传播您的 dns。

其次，转到您的 heroku 仪表板，

仪表板.heroku.com/apps

选择您要修改的应用程序，选择zerigo，然后选择配置按钮。这会将您带到 zerigo 站点。

第三，在Zerigo中添加一条CNAME记录。将“主机”设置为 subdomainname.yourapp.com。将“数据”设置为 domain.tumblr.com 并保存。

等待十分钟以使更改生效。然后转到 subdomainname.yourapp.com - 如果它进入 tumblr 错误页面，您正在开展业务。

登录到您的 tumblr 仪表板，选择设置，然后选中“自定义域名”，指向 subdomainname.yourapp.com。选择测试应用。应该准备好立即出发。

# java - Java从重定向的“友好”网址获取下载文件名

> ID：13193595
> 
> 赞同：2
> 
> 时间：2012-11-02T10:38:48.047
> 
> 标签：java, redirect, download, url-routing, nio

我正在尝试从给定的 URL 下载文件，该 URL 可能是也可能不是文件的直接链接。[如果 URL 是间接链接（即http://www.example.com/download.php?getFile=1](http://www.example.com/download.php?getFile=1) ） ，有谁知道我如何检测要写入的文件名？如果 URL 是从 URL 中提取文件名并开始写入提取的文件名的直接链接，则没有问题，但是使用重定向链接到目前为止我发现的唯一方法是写入任意文件名 - foo.txt -然后尝试使用它。问题是我真的需要正确的文件名（和扩展名）。我正在使用的代码示例是：（“else”子句中的部分既没有完成也没有工作）：

```
public static boolean dlFile(String URL, String dest){
    try{
        URL grab = new URL(URL);
        ReadableByteChannel rbc = Channels.newChannel(grab.openStream());
        String fnRE = ".*/([a-zA-Z0-9\\-\\._]+)$";
            Pattern pattern = Pattern.compile(fnRE);
        Matcher matcher = pattern.matcher(URL);
        String fName = "";
        if(matcher.find()) fName = matcher.group(1);
        else { //filename cannot be extracted - do something here - below doesn't work raises MalformedURLExcpetion
            URL foo = new URL(URL);
            HttpURLConnection fooConnection = (HttpURLConnection) foo.openConnection();
            URL secondFoo = new URL(fooConnection.getHeaderField("Location"));
            System.out.println("Redirect URL: "+secondFoo);
            fooConnection.setInstanceFollowRedirects(false);
            URLConnection fooURL = secondFoo.openConnection();
        }
        System.out.println("Connection to "+URL+" established!");
        if(dest.endsWith("/")){}
        else dest+="/";
        System.out.println("Writing "+fName+" to "+dest);
        FileOutputStream fos = new FileOutputStream(dest+fName);
        fos.getChannel().transferFrom(rbc, 0, 1 << 24); 
```

我确信必须有一种简单的方法来从标题或类似的东西中获取文件名，但我不知道如何获取它。提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-02T09:54:27.190

假设响应具有“位置”标头字段，我能够获得指向*包含多个重定向*的 url 的直接链接，如下所示：

```
String location = "http://www.example.com/download.php?getFile=1";
HttpURLConnection connection = null;
for (;;) {
    URL url = new URL(location);
    connection = (HttpURLConnection) url.openConnection();
    connection.setInstanceFollowRedirects(false);
    String redirectLocation = connection.getHeaderField("Location");
    if (redirectLocation == null) break;
    location = redirectLocation;
}
//and finally:
String fileName = location.substring(location.lastIndexOf('/') + 1, location.length()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-03T19:34:06.227

我认为最好使用 Java [Jsoup](https://mvnrepository.com/artifact/org.jsoup/jsoup/1.13.1)库，然后使用以下方法：

```
public static void downloadFileJsoup(String URL, String PATH) throws IOException {
    Response res = Jsoup.connect(URL)
            .userAgent("Mozilla")
            .timeout(30000)
            .followRedirects(true)
            .ignoreContentType(true)
            .maxBodySize(20000000)//Increase value if download is more than 20MB
            .execute(); 
    String remoteFilename=res.header("Content-Disposition").replaceFirst("(?i)^.*filename=\"?([^\"]+)\"?.*$", "$1");
    String filename = PATH + remoteFilename;
    FileOutputStream out = (new FileOutputStream(new java.io.File(filename)));
    out.write( res.bodyAsBytes());
    out.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:43:37.997

不，一般没有办法。响应通常不包含该信息，因为您没有将任何自己的协议信息添加到数据流中（以防您可以控制服务器）。

无论如何，您要求提供文件扩展名。也许使用正确的[内容类型](http://en.wikipedia.org/wiki/MIME#Content-Type)就完成了。

# typo3 - TYPO3：后端“插入插件”的自定义选项

> ID：13193599
> 
> 赞同：1
> 
> 时间：2012-11-02T10:39:17.493
> 
> 标签：typo3, backend

我正在学习 TYPO3 和扩展，目前，我已经创建了一个关于图像上传、处理和显示的测试扩展。

我已经完成了上传新图像、显示列表和编辑图像属性（一旦选择）的后端。这部分已经实现并且正在运行。

现在我错过了“包含”部分，我的意思是，通过后端上的插入插件在页面中插入图像。

我的问题：当我选择插入插件并手动选择我注册的插件时，我想在那里呈现一个带有选项、图像列表等的流畅模板。这些选项供用户选择图像、尺寸等，以便在所选页面中显示。

我不知道哪种方法有typo3 用于在该部分显示模板，所以我请求提示从哪里配置模板以供TYPO3 使用。

注意：这不是询问实现，只是提示我自己开始和实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:33:51.527

您不应该自己编写代码。

我猜你正在寻找[TCA](http://typo3.org/documentation/document-library/core-documentation/doc_core_tca/4.7.1/view/1/2/)。特别是对于您的插件，您正在寻找“ [flexforms](http://typo3.org/documentation/document-library/core-documentation/doc_core_tca/4.7.1/view/1/3/#id588476) ”。我想这个[wiki 页面](http://wiki.typo3.org/Extension_Development,_using_Flexforms)可以帮助您开始使用一些示例。

# wix - WIX WixUI_InstallMode 属性并引用奇怪的行为

> ID：13193601
> 
> 赞同：1
> 
> 时间：2012-11-02T10:39:23.450
> 
> 标签：wix, conditional-statements

使用 WixUI_InstallMode 属性，我遇到了 WIX 安装程序条件的非常奇怪的行为。*它在元素**条件和*元素条件下表现完全不同。例如，只有在使用删除或修复选项时，此条件才会正确导致 MaintenanceTypeDlg：

```
<UI>
  <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="MaintenanceTypeDlg" Order="6"><![CDATA[WixUI_InstallMode = "Repair" OR WixUI_InstallMode = "Remove"]]></Publish>
</UI> 
```

而这个从不显示上一个对话框：

```
<UI>
  <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="MaintenanceTypeDlg" Order="6"><![CDATA[WixUI_InstallMode = Repair OR WixUI_InstallMode = Remove]]></Publish>
</UI> 
```

**唯一的区别是第二个示例中的“Repair”和“Remove”值不带引号**。所以它看起来很正常，我们应该将值放在引号中，就像在 WIX 源中一样。

但是让我们再考虑两个例子：

```
<InstallExecuteSequence>
  <Custom Action="AssertUserCredentials" After="InstallValidate"><![CDATA[WixUI_InstallMode<>"Remove"]]></Custom>
</InstallExecuteSequence> 
```

**这个条件总是成立的。所以在删除模式下，自定义操作被触发，这是完全出乎意料的。为什么会被解雇？**

又是一个不带引号的例子：

```
<InstallExecuteSequence>
  <Custom Action="AssertUserCredentials" After="InstallValidate"><![CDATA[WixUI_InstallMode<>Remove]]></Custom>
</InstallExecuteSequence> 
```

**这现在可以在没有引号的情况下正常工作，并且不会在卸载模式下执行自定义操作**。

对我来说，这两种条件的用法是完全一样的逻辑，但行为却完全相反。**谁能解释会发生什么？**

# backbone.js - 何时对 Collection 和 Model 使用 URL 属性？

> ID：13193602
> 
> 赞同：1
> 
> 时间：2012-11-02T10:39:24.110
> 
> 标签：backbone.js

我一直在关注一些 Backbone.js 教程，当还有一个包含模型的集合时，我对何时在模型中使用“url”感到有点困惑。例如，我看到很多看起来像这样的代码，以便与服务器同步：

```
var PostModel = Backbone.Model.extend({});
var PostsModel = Bacbone.Collection.extend({
  model: PostModel,
  url: "/posts"
}); 
```

但是，我也看到一些模型也具有 'url' 属性，如下所示：

```
var PostModel = Backbone.Model.extend({
  url: "/posts"
});
var PostsModel = Bacbone.Collection.extend({
  model: PostModel,
  url: "/posts"
}); 
```

我想我理解第一种方法，我只通过模型所属的集合与模型交互，但我不确定你什么时候想要模型及其集合的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:03:03.437

有时您需要一个不属于任何集合的模型。

例如`login`/ `sign in`。

```
var LoginModel = Backbone.Model.extend({
    url: "/login"
}); 
```

通过这种方式，您可以`login`像与任何其他`Backbone`模型一样与视图和模型进行交互，包括`save()`（将登录表单发布到服务器）和验证。

但是没有`login`集合，因此对其建模没有意义。

也许您看到的代码介于两者之间。模型在应用程序的某些地方通过集合访问，而在其他地方不通过集合访问。

如果它是一个好的设计是另一回事，但没有技术上的理由不这样做。

**编辑** 正如您所注意到的， using`urlRoot`是另一个选项，因为默认情况下，该`url`属性是一种用于`urlRoot`构造相对 url 的方法。但是，可以给定一个字符串值来直接指定模型 url。

# c# - 文化场所构成

> ID：13193603
> 
> 赞同：0
> 
> 时间：2012-11-02T10:39:25.043
> 
> 标签：c#, .net, localization, cultureinfo, culture

以下是使用法语的比利时的文化语言环境：fr-BE

fr 是两个字母的 ISO 语言名称

但是，当地文化的“BE”方面的正确术语/名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:30:29.173

在[.NET 文档](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)中，它被称为“亚文化代码”。

在本地化的大多数其他上下文中，使用术语“区域设置”而不是“文化”。在[BCP 47](http://tools.ietf.org/html/bcp47)，*Tags for Identification Languages 中，* “fr-BE”中的“fr”部分称为“主要语言子标签”，根据定义，它是 ISO 639 系列标准中的语言代码（不是名称）；“BE”部分是“区域子标签”。在大多数情况下，区域代码是来自 ISO 3166-1 标准的两个字母代码。大多数（但不是全部）此类代码指的是国家/地区。

# javascript - 事件处理程序应该是方法中的最后一条语句吗？

> ID：13193604
> 
> 赞同：0
> 
> 时间：2012-11-02T10:39:32.950
> 
> 标签：javascript, jquery, event-handling, flow

我有一个名为 onClick 某个元素的方法。在该函数中，我有一个事件处理程序（JQuery $().click()），它检测按钮的单击并执行一些操作。

我注意到，只要事件处理程序是函数中的最后一个语句块，它就可以正常工作，并且如果它后面有某个代码块，则完全跳过它。为什么会这样？

**编辑**添加代码

```
 function launchPopUp(ID) {
            if ($('#popUp').is(':hidden')) {
                var serial = ID.id; // ID of the element or area clicked.
                var headData = 'SVG PopUp';
                var entData = 'Enter the data you want to store:';
                var ok = "No";
                var input = "";

                var header = addHeader(headData);
                var enterable = addEnterable(entData);
                var buttons = addButtons();

                $('#popUp').append(header);
                $('#popUp').append(enterable);
                $('#popUp').append(buttons);
                $('#popUp').show();

                $('#btnSubmit').click(function() {
                    input = document.getElementById('txtData').value;
                    if (input != "") {
                        ok = "yes";
                        $(ID).css('fill', 'green'); // Change colour to green only if some valid data is entered.
                        closePopUp();
                    }

                });
                var collData = { "ID": serial, "header": headData, "OK": ok, "input": input };
                collection.push(collData);
            }  
        } 
```

*控制在 .click() 之后直接跳转到代码块*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:43:14.673

我认为这就是你想要的：

```
function launchPopUp(ID) {
        if ($('#popUp').is(':hidden')) {
            var serial = ID.id; // ID of the element or area clicked.
            var headData = 'SVG PopUp';
            var entData = 'Enter the data you want to store:';
            var ok = "No";
            var input = "";

            var header = addHeader(headData);
            var enterable = addEnterable(entData);
            var buttons = addButtons();

            $('#popUp').append(header);
            $('#popUp').append(enterable);
            $('#popUp').append(buttons);
            $('#popUp').show();

            var collData = { "ID": serial, "header": headData, "OK": ok, "input": input };
            collection.push(collData);

            $('#btnSubmit').click(function() {
                input = document.getElementById('txtData').value;
                if (input != "") {
                    collData.OK = "yes";
                    $(ID).css('fill', 'green'); // Change colour to green only if some valid data is entered.
                    closePopUp();
                }
            });
        }  
    } 
```

请注意，collData 是一个包含对对象的引用的变量。该对象被添加到集合中，并在单击 btnSubmit 按钮时在单击处理程序中进行修改。这样，如果从不单击保存按钮，对象仍会添加到`collection`. 但是如果点击它，对象就会改变，并被调用，大概允许你对变量`closePopUp()`中存在的对象做你需要做的事情。`collection`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:44:52.430

您误解了事件处理程序。

Javascript 具有异步特性，因此（在正常情况下）没有“等待”事件。

您注册一个像您这样的事件`click()`处理程序，然后在（最终）注册对该元素的单击时执行该函数。与此同时，其余代码的执行仍在继续。

如果您想让您的代码依赖于点击，您必须将此代码写入点击处理程序的函数或将回调传递给该函数。

注册事件处理程序是一个一次性的过程，必须在您的函数之外完成——此时您每次调用时都在注册一个新的点击处理程序`launchPopUp`。例如，如果您调用`launchPopUp`五次，您的代码

```
input = document.getElementById('txtData').value;
if (input != "") {
    ok = "yes";
    $(ID).css('fill', 'green'); 
    closePopUp();
} 
```

一旦你点击 ，也会被执行五次`#btnSubmit`。

基本上你必须像下面这样构造你的代码：

1.  注册事件处理程序`#btnSubmit`- 定义在此函数中单击按钮时发生的情况（评估您的输入）
2.  编写`launchPopUp`最终执行的函数。这里没有事件处理程序，也没有评估代码`btnSubmit`都在你的事件处理程序中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:44:14.720

```
 $('#btnSubmit').click(function() {
                    input = document.getElementById('txtData').value;
                    if (input != "") {
                        ok = "yes";
                        $(ID).css('fill', 'green'); // Change colour to green only if some valid data is entered.
                        closePopUp();
                    }

                }); 
```

将上述内容放在您的 loadPopup 函数之外并将其放入

```
$(document).ready(function()
{

}); 
```

那可能只是解决它。

编辑：

```
$('#btnSubmit').click(function()
{
    input = document.getElementById('txtData').value;
    if (input != "")
    {
        ok = "yes";
        $(ID).css('fill', 'green'); // Change colour to green only if some valid data is entered.
        closePopUp();
    }
    var collData = { "ID": serial, "header": headData, "OK": ok, "input": input };
    collection.push(collData);
}); 
```

var collData 应该在你的点击函数中，然后当你点击提交按钮时它会被执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:06:25.217

如果我理解正确，上面的代码将无法正常工作。看起来每次启动弹出窗口时都会将新的点击事件绑定到它。因此，如果您两次启动相同的弹出窗口，您将有两个绑定到对象的单击事件处理程序。

在闭包之外访问变量是可行的。但是，您只能访问在定义闭包之前已定义的变量。

想象一下，在定义了 click 事件处理程序之后，您移动了“ok”的定义。在这种情况下，不会定义 OK，并且在事件处理程序中会有另一个 ok。

（我希望我理解你的问题是正确的，否则请评论）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T12:38:30.483

试试这个：

```
var launchPopUp = function launchPopUp(ID) {
    'use strict';
    var popup = $('#popUp'), //cache #popup instead of doing multiple lookups
        headData = 'SVG PopUp',
        entData = 'Enter the data you want to store:',
        submit = null, //declare a var to cache #btnSubmit instead of doing multiple lookups
        submitHandler = function (e) { //handler can be defined anywhere in this routine
            //collData should be defined in the handler
            var collData = {
                "ID": ID.id, // ID of the element or area clicked.
                "header": headData,
                "OK": "No",
                "input": document.getElementById('txtData').value
            };
            //modify collData based on inputs at time #btnSubmit is clicked.
            if (collData.input !== "") {
                collData.OK = "yes";
                $(ID).css('fill', 'green'); // Change colour to green only if some valid data is entered.
                closePopUp();
            }
            collection.push(collData);
        };
    if (popup.is(':hidden')) {
        popup.append(addHeader(headData));
        popup.append(addEnterable(entData));
        //if addButtons() defines/creates/adds #btnSubmit then you will need
        //to attach the handler after #btnSubmit exists in the DOM
        popup.append(addButtons());
        //once #btnSubmit is in the DOM, you can add the handler at any time
        //although I recommend doing it prior to showing #popup
        submit = $('#btnSubmit'); //cache #btnSubmit
        if (!submit.data('handlerAttached')) {
            //only need to attach the handler one time.
            //also note that attaching the handler does not fire the handler
            //only clicking the button, or calling the handler (i.e., submit.click()
            //or submitHandler(), etc.) will fire the handler.
            submit.click(submitHandler);
            //set flag to indicate that the handler has been attached.
            submit.data('handlerAttached', true);
        }
        popup.show();
    }
}; 
```

此外，只要这些都在其他地方定义：

```
addEnterable()
addButtons()
addHeader()
closePopUp()
collection[] 
```

您的例程不应有任何错误阻止处理程序的执行。

# asp.net - 获取 SignalR 集线器内的完整 URL

> ID：13193606
> 
> 赞同：11
> 
> 时间：2012-11-02T10:39:38.490
> 
> 标签：asp.net, asp.net-mvc-4, signalr, signalr-hub

我正在为 ASP.NET MVC 应用程序开发一个使用 SignalR 的用户跟踪解决方案，作为一个学习 SignalR 的有趣项目。

目前我可以跟踪登录的用户以及他们在特定页面上的停留时间。如果他们移动到另一个页面，我也会跟踪它，并且 SignalR 正在更新的计时器会重置......许多其他功能已实现或部分实现。

我面临的问题是如何在 SignalR 集线器中获取完整的 url Controller/Action/Parameters？

当我使用`HttpContext.Current.Request.Url`url 总是**/signalr/connect**。

笔记：

```
var hub = $.connection.myHub;
$.connection.hub.start(); 
```

在 _Layout.cshtml 中。

**更新：**

我试过用

```
var location = '@HttpContext.Current.Request.Url';
var hub = $.connection.myHub;
$.connection.hub.start().done(function () {
    hub.setLocation(location);
}); 
```

并且该位置已正确传递，但我稍后需要在 Connect() 任务中使用它。是否有可能做到这一点？

**更新 2：**

这种方法行不通

```
var hub = $.connection.myHub;
$.connection.hub.start(function(){hub.setLocation(location)}); 
```

正如`Connect()`之前所说的那样。

在我的集线器中，我有几种方法，但我想将一个值（在我的情况下是一个位置）传递给`Connect()`，这可能吗？

```
public class MyHub : Hub, IDisconnect, IConnected
{  
    public Task Connect()
    {
       //do stuff here
       //and i would like to have the **location** value
    } 

    public Task Disconnect()
    {
       //do stuff here            
    }             
} 
```

**更新 3**

使用 QueryString 在发生之前传递数据`Connect()`。

```
var location = '@HttpContext.Current.Request.Url';

var hub = $.connection.myHub;
$.connection.hub.qs = "location= + location;
$.connection.hub.start(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:15:22.110

可以通过查询字符串参数将您的位置值等数据传递给 Connect()：[SignalR: How to send data to IConnected.Connect()](https://stackoverflow.com/questions/12473030/signalr-how-to-send-data-to-iconnected-connect/12473555#12473555)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-22T10:19:22.323

使用查询字符串不是很安全，因为黑客可以伪造 JS 代码并向您发送错误的位置，从而破坏您背后的任何逻辑。

您可以尝试从 owin-enviromment 变量中获取此信息

`var underlyingHttpContext = Context.Request.Environment[typeof(HttpContextBase).FullName] as HttpContextBase;`

然后提取你需要的任何东西。

它将在 IIS 上运行，对于非 IIS 托管寻找其他 OWIN 东西[https://github.com/aspnet/AspNetKatana/wiki/OWIN-Keys](https://github.com/aspnet/AspNetKatana/wiki/OWIN-Keys)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T10:50:06.673

您可以将它作为参数从您的客户端 js 调用传递到您的集线器。

# c++ - 从 Kinect 接收到的翻转深度帧

> ID：13193607
> 
> 赞同：0
> 
> 时间：2012-11-02T10:39:41.047
> 
> 标签：c++, visual-c++, kinect

我使用以下 c++ 代码从 kinect 中读取深度信息：

```
 BYTE * rgbrun = m_depthRGBX;
    const USHORT * pBufferRun = (const USHORT *)LockedRect.pBits;

    // end pixel is start + width*height - 1
    const USHORT * pBufferEnd = pBufferRun + (Width * Height);

    // process data for display in main window.
    while ( pBufferRun < pBufferEnd )
    {
        // discard the portion of the depth that contains only the player index
        USHORT depth = NuiDepthPixelToDepth(*pBufferRun);

        BYTE intensity = static_cast<BYTE>(depth % 256);

        // Write out blue byte
        *(rgbrun++) = intensity;

        // Write out green byte
        *(rgbrun++) = intensity;

        // Write out red byte
        *(rgbrun++) = intensity;

        ++rgbrun;

        ++pBufferRun;

    } 
```

我想知道的是，实现帧翻转（水平和垂直）的最简单方法是什么？我在 kinect SDK 中找不到任何功能，但也许我错过了？

**EDIT1**我不想使用任何外部库，因此任何解释深度数据布局以及如何反转行/列的解决方案都受到高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:49:08.697

因此，您使用的是带有玩家数据的标准 16bpp 单通道深度图。这是一个很好的易于使用的格式。图像缓冲区按行排列，图像数据中的每个像素的低 3 位设置为玩家 ID，前 13 位设置为深度数据。

这是反向读取每一行的快速'n'dirty方法，并将其写入具有简单深度可视化的RGBWhatever图像，这对于查看您当前使用的包装输出会更好一些。

```
BYTE * rgbrun = m_depthRGBX;
const USHORT * pBufferRun = (const USHORT *)LockedRect.pBits;

for (unsigned int y = 0; y < Height; y++)
{
    for (unsigned int x = 0; x < Width; x++)
    {
        // shift off the player bits
        USHORT depthIn = pBufferRun[(y * Width) + (Width - 1 - x)] >> 3;

        // valid depth is (generally) in the range 0 to 4095.
        // here's a simple visualisation to do a greyscale mapping, with white
        // being closest. Set 0 (invalid pixel) to black.
        BYTE intensity = 
            depthIn == 0 || depthIn > 4095 ?
                0 : 255 - (BYTE)(((float)depthIn / 4095.0f) * 255.0f);

        *(rgbrun++) = intensity;
        *(rgbrun++) = intensity;
        *(rgbrun++) = intensity;
        ++rgbrun;
    }
} 
```

未经测试的代码、E&OE 等 ;-)

如果不是使用单个`rgbrun`指针，而是获得指向当前行开头的指针并将输出写入该行，则可以并行化外循环。

# java-me - 在自定义字体 j2me 中增加和减少字体大小

> ID：13193608
> 
> 赞同：0
> 
> 时间：2012-11-02T10:39:42.293
> 
> 标签：java-me, fonts

我的 j2me 应用程序使用 res 文件夹 res font-18 font-24 font-27 中的自定义字体，这些字体具有不同大小以匹配屏幕分辨率。我用

```
if(resolution<=small)
{
font-res ="font-18.res";
}
else if(resolution<=large)
{
font-res ="font-27.res";
} 
```

等等..但是现在我的 jar 大小超过 2mb，我不得不考虑减少 res 中的项目，并发现删除任何 2 都会对 jar 大小产生很大影响。（它变成<2mb）。有没有其他方法可以做到这一点？请帮我找到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:13:55.353

我不知道您是如何创建自定义字体的，也不知道它们是如何存储的，或者您在谈论多少种不同的大小，但我可以告诉您，我目前正在开发一个应用程序，其中包含 13 种不同大小的自定义字体字体，这 13 个文件总共只使用了 175kb 的空间。

这 13 种字体大小目前存储为未优化的 24 位 PNG 文件。当/如果我优化它们，使用像 pngout 或 optipng 这样的工具，那么它们将占用更少的空间。

一般来说，你可以做很多事情来减少 jar 的大小，例如混淆代码（现在通常内置在你的 IDE 中的功能，只需在项目属性中打开它即可）。

有人声称早期版本的 JDK 创建的 JAR 大小比后来的 JDK 版本小 5-20%。我自己没有试过这个。

但是如果你用谷歌搜索它，你可以找到很多额外的信息。

# workflow-foundation-4 - 自定义Activity覆盖双击禁用打开Activity详细

> ID：13193612
> 
> 赞同：0
> 
> 时间：2012-11-02T10:39:56.717
> 
> 标签：workflow-foundation-4, workflow-activity, activitydesigner

我正在使用自定义 Activity 并覆盖 OnMouseDoubleClick 方法。一切正常，但双击 Activity 后，设计器中的自我显示。这意味着在设计器中未显示整个工作流程，而仅显示此活动。如何在自定义设计器中禁用自打开 Activity。这是我在 ActivityDesigner.xaml.cs 中的代码

```
 /// <summary>
    /// Raises the <see cref="E:System.Windows.Controls.Control.MouseDoubleClick"/> routed event.
    /// </summary>
    /// <param name="e">The event data.</param>
    protected override void OnMouseDoubleClick(MouseButtonEventArgs e)
    {
        e.Handled = true;
        this.OpenDialogOnDoubleClick();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:11:17.250

要禁用该行为，您必须使用[ActivityDesignerOptionsAttribute](http://msdn.microsoft.com/en-us/library/system.activities.presentation.activitydesigneroptionsattribute.aspx)，尤其是其[AllowDrillIn](http://msdn.microsoft.com/en-us/library/system.activities.presentation.activitydesigneroptionsattribute.allowdrillin.aspx)属性。

在您的活动课程中使用它：

```
[ActivityDesignerOptions(AllowDrillIn = false)]
public sealed class MyActivity : CodedActivity
{
    /* ... */
} 
```

或者，如果您使用的是[IRegisterMetadata](http://msdn.microsoft.com/en-us/library/system.activities.presentation.metadata.iregistermetadata.aspx)：

```
internal class Metadata : IRegisterMetadata
{
    private AttributeTable attributes;

    // Called by the designer to register any design-time metadata.
    public void Register()
    {
        var builder = new AttributeTableBuilder();

        builder.AddCustomAttributes(
            typeof(MyActivity),
            new ActivityDesignerOptionsAttribute{ AllowDrillIn = false });

        MetadataStore.AddAttributeTable(builder.CreateTable());
    }
} 
```

# javascript - Galleria：自定义下一个和上一个链接

> ID：13193613
> 
> 赞同：0
> 
> 时间：2012-11-02T10:39:58.330
> 
> 标签：javascript, slider, galleria

我需要为 Galleria 制作一些 div 我的自定义控制器，因为我需要它们在滑块容器之外工作。

有没有办法使用 Javascript 或其他方法让 Galleria 知道，例如：id 为“#Right”的 div 的行为类似于“下一张图片”按钮？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T08:54:33.850

您必须使用扩展选项： http: [//galleria.io/docs/options/extend/](http://galleria.io/docs/options/extend/) & [http://galleria.io/docs/api/methods/](http://galleria.io/docs/api/methods/)

```
Galleria.run('#galleria', {
extend: function () {
  var gallery = this;
  $('#right').click(function() {
    gallery.next();
  });
  $('#left').click(function() {
    gallery.prev();
  });
}
}); 
```

# iphone - 在沙盒外的 iphone SDK 中观看用户活动？

> ID：13193616
> 
> 赞同：1
> 
> 时间：2012-11-02T10:40:10.023
> 
> 标签：iphone, ios, ipad, ios6, sandbox

1) 是否可以通过 iPhone SDK 编程查看用户的所有 iPhone 活动 赛门铁克开发了诺顿在线家庭，其中用户的 iphone safari 活动以隐藏的方式保存？

2) 是否可以处理使用我们安装的应用程序创建的沙盒环境之外的环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:26:56.603

如果您询问是否可以主动监控用户使用 safari 浏览器访问的网站并在您自己的应用程序中使用该信息，它不是。

您无法访问其他应用程序的数据。

# php - 首次加载时出现数据库错误，但刷新时没有

> ID：13193625
> 
> 赞同：3
> 
> 时间：2012-11-02T10:40:40.450
> 
> 标签：php, oracle, codeigniter, oracle11g

当我的网页首次加载时，它会显示我的查询并显示数据库错误。刷新页面时成功加载。谁能知道为什么会发生这种情况？

此问题与我的生产服务器不在暂存或开发环境中。

这是错误消息：

> 发生数据库错误
> 
> 错误编号：
> 
> SELECT U.USER_ID, U.USER_NAME, U.NAME, U.DESIGNATION, U.EMAIL_ADDRESS, A.CURR_ROLE_ID, A.ROLE_TYPE_ID FROM DOP_USERS U JOIN DOP_ACCESS A ON U.USER_ID = A.USER_ID WHERE UPPER(U.USER_NAME) = 'BSNL.HO'

我正在使用 PHP 5.1.1、Oracle 11G 和 Code Igniter 1.7

> 当浏览器中没有设置 COOKIE 值时会出现此问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:08:57.013

> 当浏览器中没有设置 COOKIE 值时会出现此问题...

您是否从 cookie 中检索某些内容并在查询中使用它？

您的应用程序可能会从 cookie 中获取一个值并将其直接插入 sql，而无需首先检查该值是否存在或是否有效。这是您在初始加载时出错的一种可能解释。cookie 可能会在数据库调用完成后的第一个页面加载时创建，从而解决该错误。然后，当您刷新页面时，cookie 已经存在，因此错误消失了。

# sql - SQL - 更新导致死锁错误

> ID：13193627
> 
> 赞同：0
> 
> 时间：2012-11-02T10:40:43.207
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试在有人查看页面时更新表中的一行（它会增加查看次数），但是有时我会遇到死锁错误，我猜这是由于两个或更多人试图更新同一行？

错误是：

```
Transaction (Process ID 60) was deadlocked on lock | communication buffer resources with another process and has been chosen as the deadlock victim. Rerun the transaction. 
```

我的 SQL 是：

```
UPDATE [ProductDescription] 
SET [ViewCount] = ([ViewCount] + 1) 
WHERE ProductCode = @prodCode 
    AND ApplicationID = @AppID 
```

我相信我可能需要一个 WITH(NOLOCK)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:45:44.703

你不需要 NOLOCK。这只会删除读锁，并会导致不可预知的结果。更好的做法是在更新语句上使用 TABLOCK，这意味着其他进程在您完成之前无法访问该表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T10:47:23.563

该问题更有可能是由同时运行选择的用户引起的。默认隔离级别是“已提交读”，这会导致锁定。

除非您正在阅读的数据必须是最新的，否则请考虑使用：

```
with(nolock) 
```

在选择或替代隔离级别。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T10:43:34.953

将事务隔离级别设置为 SERIALIZABLE 或 SNAPSHOT 以正确更新数据。有关更多详细信息，请查看[**此处**](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

# javascript - 无法关闭浏览器中其他打开的选项卡

> ID：13193628
> 
> 赞同：2
> 
> 时间：2012-11-02T10:40:48.993
> 
> 标签：javascript, html

嗨，请检查下面的代码我正在尝试打开带有名称的标签，然后尝试关闭该标签但无法关闭，否则任何人都可以告诉我们如何关闭从父标签（url）打开的所有标签（url1，url2） firebug 中的关闭父选项卡错误是 my_window 未定义

```
 <form name="submitForm1"   target="my_window"  method="POST" action="http://localhost:8080/ADDMIBREP/">
            <input type="hidden" name="uname" value="uname">
            <a HREF="javascript:document.submitForm1.submit();">ADDMIBREPORT</a>
        </form>
        <a HREF="javascript: closepopup() ">remove</a>
    </body>
    <script> 

        function closepopup()
        {
            alert("hi");

            if(false == my_window.closed)
            {
                my_window.close ();
            }
            else
            {
                alert('Window already closed!');
            }
        } <script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:47:19.437

```
<a HREF="javascript:window.close()">remove</a> 
```

或者

```
var my_first_window = window.open('test/test.html');
var my_second_window = window.open('test/test1.html');

window.onunload = function() {
    if(!my_first_window.closed)
        my_first_window.close();
    if(!my_second_window.closed)
        my_second_window.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:59:11.290

这是您尝试做的一个示例... [http://jsfiddle.net/KjBj3/7/](http://jsfiddle.net/KjBj3/7/)

```
var win = window.open("", "win","width=200,height=100");
win.document.write('<a href="#" id="close" onclick="window.close();">This is myWindow! Click to close</a>');
win.focus();
win.opener.document.write('<p>This is the source window!</p>'); 
```

# java - 致命异常，java lang空指针异常

> ID：13193630
> 
> 赞同：0
> 
> 时间：2012-11-02T10:41:08.883
> 
> 标签：java, android, eclipse

我的以下代码没有显示错误，但没有执行。

```
package my.project.mil;

import android.content.Context;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Cbdata extends MainActivity {

    public String str;

    public void onReceive(Context context, Intent intent) {
        //---get the CB message passed in---
        Bundle bundle = intent.getExtras();        
        SmsCbMessage[] msgs = null;
        str = "";            
        if (bundle != null)  {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsCbMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++) {
                msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
                str += "CB " + msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }}
    }

    SQLiteDatabase cd = openOrCreateDatabase("MLIdb", MODE_WORLD_READABLE, null);

    Button submit;
Button viewdb;
EditText name;

@Override
    public void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.seventh);

    viewdb = (Button) findViewById(R.id.viewdb);
    submit = (Button) findViewById(R.id.submit);
    name = (EditText) findViewById(R.id.name);

    submit.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {

            String locname = name.getText().toString();
            if (locname.length()>0)
            {

                cd.execSQL("CREATE TABLE IF NOT EXITSTS MLITable (CblocationCode INT(10), CblocationName VARCHAR);");
                cd.execSQL("INSERT INTO MLITable VALUES (' ',' ');" +str +locname);
                Toast.makeText(getBaseContext(), "value successfully    entered.", Toast.LENGTH_LONG).show();
            }
            else
            {
                Toast.makeText(getBaseContext(), "Please enter the location name, for example 'Home'.", Toast.LENGTH_LONG).show();
            }

        }
    });

    cd.close();

    viewdb.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            // here comes the code for viewing the database

        }
    });
}

} 
```

我的错误日志如下所示，我还检查了我的清单和 MainActivity 文件但没有运气。

我的代码应该收集用户蜂窝塔区号并将其保存在用户选择名称的数据库中，该数据库包含两个属性，一个是从用户那里收集的位置名称，第二个是蜂窝广播塔信息，它是从 onReceive 方法获得的，单独的 onReceive 方法可以正常工作。

仅当我将数据库集成到我的代码中时才会出现此问题。
![我的日志猫](../Images/24bf08b6dc991643ec0446a7d2efe154.png)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:44:27.283

```
SQLiteDatabase cd = openOrCreateDatabase("MLIdata", MODE_WORLD_WRITEABLE, null); 
```

尝试将此行替换为

```
SQLiteDatabase cd = openOrCreateDatabase("MLIdata", MODE_WORLD_WRITEABLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:33:58.543

我在上面代码中的错误，

1.  cd 未全部创建，由于连接数据库的方法错误。
2.  EXISTS 拼写错误。
3.  插入方法错误。

最终正确的代码是，

```
public class Cbdata extends MainActivity {

    public String str;

    public void onReceive(Context context, Intent intent) {
        //---get the CB message passed in---
        Bundle bundle = intent.getExtras();        
        SmsCbMessage[] msgs = null;
        str = "";            
        if (bundle != null)  {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsCbMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++) {
                msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
                str += "CB " + msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }}
}

Button submit;
Button viewdb;
EditText name;

@Override
public void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.seventh);

    viewdb = (Button) findViewById(R.id.viewdb);
    submit = (Button) findViewById(R.id.submit);
    name = (EditText) findViewById(R.id.name);

    submit.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {

            String locname = name.getText().toString();
            if (locname.length()>0)
            {
                SQLiteDatabase cd = openOrCreateDatabase("mydata", MODE_WORLD_READABLE, null);
                cd.execSQL("CREATE TABLE IF NOT EXISTS MLITable (CblocationCode INT(10), CblocationName VARCHAR);");
                cd.execSQL("INSERT INTO MLITable VALUES ('"+str+ "','"+locname+ "');");
                Toast.makeText(getBaseContext(), "value successfully entered.", Toast.LENGTH_LONG).show();
                cd.close();
            }
            else
            {
                Toast.makeText(getBaseContext(), "Please enter the location name, for example 'Home'.", Toast.LENGTH_LONG).show();
            }

        }
    });

    viewdb.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            // here comes the code for viewing the database

        }
    });
}

} 
```

# javascript - 在 Javascript 中混合 HTML id 导致多维数组

> ID：13193638
> 
> 赞同：1
> 
> 时间：2012-11-02T10:41:23.997
> 
> 标签：javascript, html

我试图将一组 INPUT 元素分组到一个 Javascript 数组中，并且对为什么我得到一个多维数组（下面的代码中名为“urls”的数组）感到困惑。原来我把第四个元素和第一个元素的 id 混合在一起了。

```
<html>

<head>
    <script language="javascript">
    function validate() {
        var form = document.forms.conf;

        var urls = new Array(form.url1, form.url2, form.url3, form.url4);
        alert(urls[0].value);  // returns 'undefined'
        alert(urls[0][0].value);  // works
    }
    </script>
</head>

<body>

<form name="conf">
    <input type="text" name="url1" id="url1">
    <input type="text" name="url2" id="url2">
    <input type="text" name="url3" id="url3">
    <input type="text" name="url4" id="url1"><br />
    <button type="button" onclick="javascript:validate();">Push me</button>
</form>

</body>
</html 
```

我的问题是，为什么会发生这种情况？HTML 属性“id”与“document.forms.form_name.element”有什么关系？为什么它会导致它把它放在一个多维数组中？这种行为似乎也是跨浏览器的，所以它必须是我不知道的一些定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:47:22.780

表单将为每个具有名称或 ID 的表单控件提供一个属性。该属性的名称将与名称或 ID 相同。如果多个元素共享一个名称（或非法的 id），则该属性将包含一个 NodeList 而不是单个 HTMLElementNode。

第一个输入具有名称（和 id）`url1`。最后一个输入有 id`url1`

所以`form.url1`就变成了一个由这两个元素组成的 NodeList。

# ruby-on-rails - 用于 ActiveRecord::Relation 错误计算购物车项目的 Rails 未定义方法

> ID：13193640
> 
> 赞同：0
> 
> 时间：2012-11-02T10:41:29.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试计算购物车中包含的所有物品的总价格。但是我得到了一个`undefined method total_cart_price for ActiveRecord::Relation:xxx`

**购物车模型 (shop_cart.rb)**

```
has_many :shop_cart_items, :dependent => :destroy

  def total_cart_price
    shop_cart_items.to_a.sum { |item| item.total_price }
  end 
```

**购物车商品模型 (shop_cart_item.rb)**

```
attr_accessible :quantity, :shop_cart_id, :shop_product_id

  belongs_to :shop_product
  belongs_to :shop_cart

  def total_price
    shop_product.sell * quantity
  end 
```

**购物篮视图 (shop/basket.html.erb)**

```
<tbody>
    <% @cart_items.each do |item| %>
        <tr>
        <td><%= item.shop_product.name %></td>
        <td><%= number_to_currency(item.shop_product.sell) %></td>
        <td><%= item.quantity %></td>
        <td><%= number_to_currency(item.total_price) %></td>
        </tr>
    <% end %>
    <tr>
    <td></td>
    <td></td>
    <td>Subtotal:</td>
    <td><%= number_to_currency(@cart_items.total_cart_price) %></td>
    </tr>
</tbody> 
```

单件商品的总价很好；错误是试图计算所有项目的总和。

我没有 shop_cart 控制器或视图，因为我从 shop#basket 视图调用方法 - 不确定这是否是导致问题的原因？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:02:16.323

试试这个， `@cart_items.shop_cart.total_cart_price`这是一种购物车方法。

# android - Android Mysql连接不起作用

> ID：13193643
> 
> 赞同：1
> 
> 时间：2012-11-02T10:41:43.697
> 
> 标签：android, mysql

我最近更新了我的 AVD 和 Eclipse ADT。更新后我的 android 项目运行不正常。

无法正常工作的部分是我与 mysql 数据库的连接。

我的代码：

```
String data= "";

String database(){

try{
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection conn=DriverManager.getConnection("jdbc:mysql://10.0.2.2:3306/sakila","root","warlock");
    PreparedStatement stmt= conn.prepareStatement("Select * from actor");

    ResultSet res=stmt.executeQuery();
    int i=0;

    while(res.next() && i <9)
    { 
        data=data+res.getString("actor_id") + "   " + res.getString("first_name") + "&";
        System.out.println(data);
        i++;
    }
}
catch(Exception e)
{
    System.out.println(e); }
TextView tv=(TextView) findViewById(R.id.textview);

tv.setText(data); 
```

在更新之前它工作得很好。我不必通过 php 连接。这有什么问题？我今天早上更新了。5:30 IST

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:52:19.047

在您的应用清单文件中添加互联网权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:44:47.020

您必须使用 SQLite 而不是 mysql。[关于 SQLite + Android 的信息](http://developer.android.com/guide/topics/data/data-storage.html#db)

# jquery - 在其拖动功能中将包含选项添加到可拖动

> ID：13193644
> 
> 赞同：0
> 
> 时间：2012-11-02T10:41:52.180
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable

我有可拖动的 div("dragging") 和目标 div("dragto")。

我希望当“拖动” div 被拖动到足以位于“dragto” div 上方时，“拖动” div 的包含设置为“dragto” div 的 [x1,y1,x2,y2]，这样一旦它进入了那个 div，它就永远无法离开那个 div。

这个容器将在拖动结束之前和开始之后设置，即在拖动功能期间，我可以检查“拖动”div 是否在“dragto”div 内。

可能吗。如果我添加以下代码：

```
drag : function (event,ui){

   $("#dragging").draggable("option","containment",[x1,y1,x2,y2]);
   }, 
```

这仅在拖动停止时设置包含。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-07T00:31:10.187

我知道这是一个老问题，但我偶然发现了类似的问题，无法在 SO 上找到解决方案。最终，我想出了如何在拖动开始后将包含选项设置为可拖动（例如，当元素被拖动时，某些条件突然满足，因此您想在那时将包含添加到可拖动......）。

由于仅在拖动开始时计算遏制，因此只需添加一行代码即可在拖动开始后遏制工作（除了已经给出的代码之外）：

```
$("#dragging").draggable("option","containment",[x1,y1,x2,y2]);
$("#dragging").data('uiDraggable')._setContainment(); 
```

注意：如果在“拖动”功能中确实需要此功能，明智的做法是在此代码中添加一些条件以确保它只执行一次。由于每次在可拖动对象拖动时鼠标更改位置时都会调用“拖动”函数，因此一遍又一遍地设置包含没有意义......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:18:49.797

您可以在 start:function(event,ui){} 中设置此事件，当您开始拖动时会触发此事件。

检查此链接。

[http://jqfaq.com/category/widgets/autocomplete/](http://jqfaq.com/category/widgets/autocomplete/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:02:22.177

它不是现有功能，但您可以通过覆盖被拖动元素的位置来解决它。

这里不是“准备就绪”的代码，而是允许自己开发的代码。这个想法是在可放置元素的悬停事件中设置包含位置变量，并在拖动元素的拖动事件中使用当前拖动位置测试它们。

这个小提琴是位置覆盖的一个例子：http: [//jsfiddle.net/QvRjL/74/](http://jsfiddle.net/QvRjL/74/)

这个小提琴是一个例子，你可以如何检查拖动的元素是否靠近容器的边框：http: [//jsfiddle.net/pPn3v/22/](http://jsfiddle.net/pPn3v/22/)

位置覆盖示例：

```
$(document).mousemove(function(e){
   window.mouseXPos = e.pageX;
   window.mouseYPos = e.pageY;
}); 

$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },        
        scroll: true,
        stop: function(){},  
        drag : function(e,ui){            
            //Force the helper position
            ui.position.left = window.mouseXPos - $(this).draggable('option','cursorAt').left;
            ui.position.top = window.mouseYPos- $(this).draggable('option','cursorAt').top; 
        });
}); 
```

# java - 如何在java中验证上传的文件

> ID：13193646
> 
> 赞同：1
> 
> 时间：2012-11-02T10:42:06.857
> 
> 标签：java, regex, spring-mvc

我需要允许用户只上传文本文件（.txt、.doc、.rtf 等）。如何验证上传的文件仅包含文本数据。我需要验证文件中的数据而不是文件扩展名。

如果用户上传除文本文件之外的任何图像或视频文件等，我需要显示“您上传的文件的格式与所需的格式不匹配”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:58:54.230

您可以尝试使用 Apache [Tika 库](http://tika.apache.org/)。它可以通过文件的内容找出文件的类型。

# android - 如何设置默认操作栏的高度和宽度？

> ID：13193651
> 
> 赞同：1
> 
> 时间：2012-11-02T10:42:31.583
> 
> 标签：android, android-actionbar

如何设置默认操作栏的高度和宽度？在这里，我在覆盖模式下使用操作栏。这是 ICS Gallery 应用程序中的操作栏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:59:51.253

不，您不能更改 ICS 上原生操作栏的大小。原生操作栏的高度始终为 48dip（纵向）或 40dip（横向）。

但是如果你坚持改变它的高度，你可以实现你自己的动作栏。

# python - 在 Python 中导入库类

> ID：13193653
> 
> 赞同：5
> 
> 时间：2012-11-02T10:42:36.810
> 
> 标签：python, exception-handling, import

我有以下项目层次结构：

```
project_dir
  lib
    __init__.py
    ...
    some_script.py
    ...
    agent
      __init__.py
      ...
      errors.py
      some_agent_script.py
      ... 
```

lib/agent/erros.py 中有 SomeException 类定义，我使用以下代码将它们导入 lib/agent/some_agent_script.py 中：

```
from errors import SomeException 
```

我也使用以下代码导入 lib/some_script.py

```
from agent.errors import SomeException 
```

问题是当我在 lib/agent/some_agent_script.py 中引发 SomeException 时， lib/some_script.py 无法在 except 块中捕获它：

```
try:
    # Here comes a call to lib/agent/some_agent_script.py function
    # that raises SomeException
except SomeException, exc:
    # Never goes here
    print(exc)
except Exception, exc:
    print(exc.__class__.__name__) # prints "SomeException"

    # Let's print id's
    print(id(exc.__class__))
    print(id(SomeException))
    # They are different!

    # Let's print modules list
    pprint.pprint(sys.modules) 
```

我可以在 sys.modules 中看到错误模块被导入了两次：第一次是使用“agent.errors”键，第二次是使用“lib.agent.errors”键

下面的代码是正确的，但它不是一个漂亮的解决方案：

```
agent_errors = sys.modules.get('agent.errors')
from agent_errors import SomeException

try:
    # Here comes a call to lib/agent/some_agent_script.py function
except SomeException:
    print('OK') 
```

我应该怎么做才能使这个模块不导入两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:45:30.110

您应该始终使用完全限定的导入。

```
from lib.agent.errors import SomeException 
```

在使用它的每个模块中执行此操作。然后它将始终具有相同的包名称。您可能还应该更改顶级包名称。“lib”这个名字太笼统了。

如果您碰巧将模块命名为与基本模块或“库存”模块相同的名称，这也将为您省去一些麻烦。例如，假设您创建了一个模块`lib/agent/socket.py`并在其中`lib/agent/some_agent_script.py`编写了`import socket`. 您实际上不会得到您的模块，而是库存模块。

因此，最好养成始终使用完全限定包名称的习惯，如果可以的话，不要使用公共根目录。

另一种方法是使用绝对导入。

```
from __future__ import absolute_import

import .errors 
```

注意前导点。这从当前包中显式导入。它也应该可以解决您的问题，但我承认我没有尝试过。

# java - Java，JDBC executeQuery没有结果，但在自己运行语句时得到结果

> ID：13193654
> 
> 赞同：0
> 
> 时间：2012-11-02T10:42:54.070
> 
> 标签：java, mysql, select, jdbc

我的 MySQL 数据库中有一个名为“statuses”的表，如下所示：

```
| "id" (int) | "text" varchar(50) | "hex_color" varchar(10) |
-------------------------------------------------------------
| 1          | EJ PÅBÖRJAD        | #FF3300                 |
| 2          | ARBETE PÅGÅR       | #FFFF00                 |
| 3          | AVVAKTAR           | #80F0FF                 |
| 4          | ÅTGÄRDAD           | #6DE37A                 |
------------------------------------------------------------- 
```

这是我的 JDBC Java 代码：

```
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery(statement);

while(rs.next()){
   Long pid = rs.getLong(1);
   String ptext = rs.getString(2);
   String hex_color = rs.getString(3);

   status = new Statuses(pid, ptext, hex_color);
} 
```

什么时候`statement`：

`SELECT id, text, hex_color FROM statuses WHERE text = 'EJ PÅBÖRJAD'`- 1 个结果

`SELECT id, text, hex_color FROM statuses WHERE text = 'ARBETE PÅGÅR'`- 0 个结果

`SELECT id, text, hex_color FROM statuses WHERE text = 'AVVAKTAR'`- 1 个结果

`SELECT id, text, hex_color FROM statuses WHERE text = 'ÅTGÄRDAD'`- 1 个结果

**为什么我在第二个语句中得到 0 结果？** 当我自己在“mysql 命令行”中运行它时，我得到 1 个结果！我已经检查过我使用的是相同的字符集（UTF-8），它排除了字符集问题。

**有人可以帮我解决这个问题吗？**

亲切的问候，克莱德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:37:25.517

你绝对确定

*   您没有为`'ARBETE PÅGÅR'`or制作复制粘贴错误
*   数据库中/之后包含额外的空格或其他不可打印的字符`'ARBETE PÅGÅR'`

尝试用通配符包围，例如。`SELECT * FROM statuses WHERE text LIKE '%ARBETE%PÅGÅR%'`看看这是否有所作为？

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T04:46:03.453

我知道这是一个 7 个月大的帖子，但我认为您可以在插入这些行后检查您是否已提交。
当您自己运行查询时，您可能使用的是用于插入这些行的同一会话。这就是为什么你可以看到它们。
在您提交之前，其他用户将无法看到（插入的）效果。

# spring - 为什么我需要一个用于自动装配/注入字段的设置器？

> ID：13193655
> 
> 赞同：10
> 
> 时间：2012-11-02T10:42:57.080
> 
> 标签：spring, setter, autowired, inject

我有一个豆子：

```
 <bean id="BasketLogic" class="efco.logic.EfcoBasketLogic" autowire="byType">
        <property name="documentLogic" ref="DocumentLogic" />
        <property name="stateAccess" ref="StateAccess" />
        <property name="contextAccess" ref="ContextAccess" />
    </bean>

  <bean id="EfcoErpService" autowire="byType" class="efco.erp.service.EfcoErpServiceImpl">
    <constructor-arg ref="ErpConnector"/>
  </bean> 
```

*documentLogic*、*stateAccess*和*contextAccess*是*BasketLogicImpl上的字段*

而我没有`<context:component-scan />`

EfcoBasketLogic.java：

```
public class EfcoBasketLogic extends BasketLogicImpl {

        @Inject
        private EfcoErpService erpService;
    ...
    ...
    ...
} 
```

erpService 是*null*，除非我提供了一个设置器。但为什么？我认为在进行自动装配的地方不需要二传手？会不会是 BasketLogicImpl 对此负责？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T10:49:38.910

您需要使用 setter，因为除非通过`<context:component-scan />`或告知 spring，否则不会检测到注释`<context:annotation-config />`。检测到 Setter，因为您指定了`autowire="byType"`.

您可能会发现这个问题和答案也很有帮助：[When to use autowiring in Spring](https://stackoverflow.com/questions/12920606/when-to-use-autowiring-in-spring/12920796#12920796)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T19:01:36.010

首先，使用`<context:component-scan />`或`<context:annotation-config />`启用 Spring 扫描您的代码以查找符合条件的 bean 以满足依赖关系，这将大大提高其正确连接它们的能力，因此我建议将它们添加到您的上下文文件中。

其次，您应该知道@Inject 是一个标准（即JSR-330 规范）注解。可以将 Spring 注释与标准注释混合和匹配，但这样做时行为可能会有所不同。@Named 通常与 @Inject 配对以匹配具有依赖项的组件（均为 JSR-330）。有关详细信息，请参阅此[参考资料](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-standard-annotations)，有关使用说明，请参阅表 4.6。

但是要直接回答您的问题，“为什么不使用组件扫描时我需要设置器”，是*因为*您没有使用组件扫描。您要求 Spring 注入依赖项“byType”，但不允许 Spring 扫描您的代码以查找该类型的组件。setter 起作用的原因是注入的 setter 参数的类型可以被 Spring 在编译的字节码（即元数据）中发现，因此它成功地解决了您的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T19:13:40.453

我的理解是 XML 配置会覆盖注释配置。 autowire="byType" 指定的事实会覆盖自动注入，它会寻找用于注入依赖项的 setter 方法的存在。

# android - 连接手机和电脑安卓

> ID：13193656
> 
> 赞同：0
> 
> 时间：2012-11-02T10:43:01.863
> 
> 标签：android, sockets

所以，我想制作一个像遥控器一样工作的安卓应用程序，这样我就可以从我的电脑上的安卓应用程序执行命令。到目前为止，我已经查看了 Socket 框架，如果服务器和客户端在同一台计算机上，它可以正常工作，但是如果我将客户端移动到我的手机上，我会收到错误，即找不到主机。我很确定这是关于我如何连接的问题，但我不知道如何解决它。如果它们在同一个wifi网络上，是否可以通过Socket从我的手机连接到我的电脑？

编辑：对不起，我以为我已经链接了。我一直在尝试使有关该主题的 java 教程正常工作。

## 客户端：KnockKnockClient.java

```
public class KnockKnockClient {
    public static void main(String[] args) throws IOException {

        Socket kkSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            kkSocket = new Socket("taranis", 4444);
            out = new PrintWriter(kkSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: taranis.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: taranis.");
            System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
        String fromServer;
        String fromUser;

        while ((fromServer = in.readLine()) != null) {
            System.out.println("Server: " + fromServer);
            if (fromServer.equals("Bye."))
                break;

            fromUser = stdIn.readLine();
        if (fromUser != null) {
                System.out.println("Client: " + fromUser);
                out.println(fromUser);
        }
        }

        out.close();
        in.close();
        stdIn.close();
        kkSocket.close();
    }
} 
```

## 服务器：KnockKnockServer.java

```
public class KnockKnockServer {
    public static void main(String[] args) throws IOException {

        ServerSocket serverSocket = null;
        try {
            serverSocket = new ServerSocket(4444);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(1);
        }

        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
        } catch (IOException e) {
            System.err.println("Accept failed.");
            System.exit(1);
        }

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                clientSocket.getInputStream()));
        String inputLine, outputLine;
        KnockKnockProtocol kkp = new KnockKnockProtocol();

        outputLine = kkp.processInput(null);
        out.println(outputLine);

        while ((inputLine = in.readLine()) != null) {
             outputLine = kkp.processInput(inputLine);
             out.println(outputLine);
             if (outputLine.equals("Bye."))
                break;
        }
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    }
} 
```

我按照[本](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)教程进行操作。

# iphone - 我有视频 URL 并想使用此 URL 从 iPhone 中删除它

> ID：13193661
> 
> 赞同：0
> 
> 时间：2012-11-02T10:43:20.523
> 
> 标签：iphone, ios, avfoundation

我创建了一个存储视频的应用程序，现在我想在用户单击删除按钮时删除该视频。我正在使用`AVFoundation`录制视频。

我的应用程序相机给了我一个这样的输出 URL：

```
file://localhost/private/var/mobile/Applications/4B2E02E5-3EE2-493E-8ECF-4B1DA29B9387/tmp/output.mov 
```

我已经尝试过了，但没有奏效：

```
- (void) removeFile:(NSURL *)fileURL
{

    NSString *filePath = [fileURL path];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:filePath]) {
        NSLog(@"here it is : %@",fileURL);
        NSError *error;
        // Attempt to delete the file at filePath2
        if ([fileManager removeItemAtPath:filePath error:&error] != YES)
            NSLog(@"Unable to delete file: %@", [error localizedDescription]);

        // Show contents of Documents directory
        NSLog(@"Documents directory: %@",
              [fileManager contentsOfDirectoryAtPath:filePath error:&error]);
    }
} 
```

**编辑**

```
 - (IBAction)videoWillDelete:(id)sender {

        NSString *strPath =  [NSHomeDirectory() stringByAppendingPathComponent:@"output.mov"];

        NSLog(@"file is:%@",strPath);

        if ([[NSFileManager defaultManager] isDeletableFileAtPath:strPath]==YES) {
            NSLog(@"file is deletebale");
        }else {
            NSLog(@"file is not deletebale");
        }

        NSError *error;
        if ([[NSFileManager defaultManager] isDeletableFileAtPath:strPath]) {

            BOOL success = [[NSFileManager defaultManager] removeItemAtPath:strPath error:&error];

            if (!success) {
                NSLog(@"Error removing file at path: %@", error.localizedDescription);
            }
        }

    } 
```

我的日志文件有：

```
2012-11-02 17:33:21.836 AVFoundationCam[1791:707] file is:/var/mobile/Applications/4B2E02E5-3EE2-493E-8ECF-4B1DA29B9387/output.mov

2012-11-02 17:33:21.838 AVFoundationCam[1791:707] file is not deletebale 
```

这个函数是我用来在 iPhone 中存储数据的：

```
else {  
        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
        [library writeVideoAtPathToSavedPhotosAlbum:outputFileURL
                                    completionBlock:^(NSURL *assetURL, NSError *error) {

                                        if (error) {
                                            if ([[self delegate] respondsToSelector:@selector(captureManager:didFailWithError:)]) {
                                                [[self delegate] captureManager:self didFailWithError:error];
                                            }                                           
                                        }

                                        if ([[UIDevice currentDevice] isMultitaskingSupported]) {
                                            [[UIApplication sharedApplication] endBackgroundTask:[self backgroundRecordingID]];
                                        }

                                        if ([[self delegate] respondsToSelector:@selector(captureManagerRecordingFinished:)]) {
                                            [[self delegate] captureManagerRecordingFinished:self];
                                        }
                                    }];
        //[library release];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:41:01.320

你可以得到`Document` `Directory` `path`这样的：

```
NSString *strPath =  [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]; 
```

现在删除这样的项目：

```
NSError *error;
if ([fileManager fileExistsAtPath:path]) {
  if ([[NSFileManager defaultManager] isDeletableFileAtPath:strPath]) {
    BOOL success = [[NSFileManager defaultManager] removeItemAtPath:strPath error:&error];
    if (!success) {
        NSLog(@"Error removing file at path: %@", error.localizedDescription);
    }
    else
    {
        NSLog(@"File removed  at path: %@", error.localizedDescription);
    }
  }
  else
{
    NSLog(@"file not exists"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T09:24:54.443

答案很简单，您不能从文档目录中删除文件。它只可读和可写。

您可以通过为 tmp 目录提供路径来实现您的目的，然后出于保存目的将其从 tmp 路径移动到文档目录。而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:17:39.813

Check `[NSHomeDirectory() stringByAppendingPathComponent:@"tmp/output.mov"];` is the same with the outputFileURL in `[library writeVideoAtPathToSavedPhotosAlbum:outputFileURL completionBlock:^(NSURL *assetURL, NSError *error) {`

# sql - Rails 从相关表的所有行都具有特定值的表中选择行

> ID：13193665
> 
> 赞同：1
> 
> 时间：2012-11-02T10:43:37.107
> 
> 标签：sql, ruby-on-rails, activerecord

基本上我有3张桌子。忽略语法。我只是想展示这个想法。

```
ModelA:
    belongs_to :ModelB

ModelB:
    has_many: ModelA
    has_and_belongs_to_many :ModelC

ModelC
    has_and_belongs_to_many :ModelB 
```

如何从 ModelA 中获取 ModelC 的所有行都有标志 = 'Y' 的所有行？
我试过了：

```
ModelA.joins(:ModelB => :ModelC).where("#{ModelC.table_name}.flag = 'Y'") 
```

和其他十几种方法都没有成功。我知道上面的代码不会检查所有行，但就我所知。我更喜欢使用 ActiveRecord。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:37:35.260

他们的解决方案可以解决您的问题，但它不是一个完美的解决方案

```
ModelA.all - ModelA.joins(:ModelB => :ModelC).where("#{ModelC.table_name}.flag != 'Y'") 
```

# archiva - Apache archiva-js-1.4-M3 有问题吗？

> ID：13193667
> 
> 赞同：0
> 
> 时间：2012-11-02T10:43:50.933
> 
> 标签：archiva

我在 Apache 存档中创建了一个存储库，并在该存储库中添加了所有 jar，并在我的 Pom.xml 文件中使用了这个 apache 存档存储库。但是当我尝试...

> mvn 日食：日食

它将所有 jar 下载到 .m2 目录中，但每个 jar 大小为 3Kb。我在 Archiva 中检查了所有罐子的大小，那里没问题。我无法弄清楚问题出在哪里。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:31:01.733

我找到了我必须为我的存储库启用访客用户的问题的解决方案。请查看附加的屏幕截图。 ![在此处输入图像描述](../Images/95194777a8e1409ef6f6971fb891a13f.png)

# html - 正则表达式搜索<（随机内容）类（随机内容）类（随机内容）>？

> ID：13193668
> 
> 赞同：0
> 
> 时间：2012-11-02T10:43:55.387
> 
> 标签：html, regex

基本上就是这样，

我有一些格式错误的标签，它们有两个`class`属性，这是破坏性的，

所以我需要通过并找到任何类似的标签，

我的 IDE 有一个正则表达式搜索，但我不知道我会在里面放什么，

正则表达式需要说，以单词开头并在遇到单词之前`<`有两个实例`class``>`

我将如何编写该正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:46:16.057

我猜是这样的：

```
<[^<>]*(\bclass\b[^<>]*){2,}> 
```

# sahi - 是否可以将 Sahi 配置为支持 OnMouseEnter 事件？

> ID：13193669
> 
> 赞同：0
> 
> 时间：2012-11-02T10:43:58.393
> 
> 标签：sahi

我正在尝试使用 onmouseenter 事件扩展的下拉菜单测试站点。我知道此事件仅适用于 IE，但我无法在 IE8 或 IE9 中使用 Sahi 记录/播放该事件。

在 Sahi 配置中有一个文件 htdocs\spr\concat.js 似乎包含事件处理。我试图通过复制 _mouserOver 事件并将其重命名为 _mouseEnter 来修改此文件以添加对额外事件的支持。我还在 scheduler_functions.txt 配置文件中添加了 _mouseEnter。

不幸的是，这没有效果。

Sahi 是否支持配置额外的事件？如果是这样，添加额外事件的过程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:00:39.053

是的，Sahi 支持配置额外的事件。您遵循的过程是正确的，但您需要重新启动 Sahi 并清除浏览器缓存才能生效。

您能否提供有关您在 concat.js 文件中所做更改的更多详细信息。

# objective-c - 如何创建一个返回块的objective-c方法

> ID：13193673
> 
> 赞同：21
> 
> 时间：2012-11-02T10:44:00.643
> 
> 标签：objective-c, block, objective-c-blocks

```
-(NSMutableArray *)sortArrayByProminent:(NSArray *)arrayObject
{
    NSArray * array = [arrayObject sortedArrayUsingComparator:^(id obj1, id obj2) {
        Business * objj1=obj1;
        Business * objj2=obj2;
        NSUInteger prom1=[objj1 .prominent intValue];
        NSUInteger prom2=[objj2 .prominent intValue];
        if (prom1 > prom2) {
            return NSOrderedAscending;
        }
        if (prom1 < prom2) {
            return NSOrderedDescending;
        }
        return NSOrderedSame;
    }];

    NSMutableArray *arrayHasBeenSorted = [NSMutableArray arrayWithArray:array];

    return arrayHasBeenSorted;
} 
```

所以基本上我有这个块用于对数组进行排序。

现在我想编写一个返回该块的方法。

我该怎么做？

我试过

```
+ (NSComparator)(^)(id obj1, id obj2)
{
    (NSComparator)(^ block)(id obj1, id obj2) = {...}
    return block;
} 
```

让我们说它还没有工作。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-02T10:49:30.287

返回这样的块的方法签名应该是

```
+(NSInteger (^)(id, id))comparitorBlock {
    ....
} 
```

这分解为：

```
+(NSInteger (^)(id, id))comparitorBlock;
^^    ^      ^  ^   ^  ^       ^
ab    c      d  e   e  b       f

a = Static Method
b = Return type parenthesis for the method[just like +(void)...]
c = Return type of the block
d = Indicates this is a block (no need for block names, it's just a type, not an instance)
e = Set of parameters, again no names needed
f = Name of method to call to obtain said block 
```

**更新：**在您的特定情况下，`NSComparator`已经是块类型。它的定义是：

```
typedef NSComparisonResult (^NSComparator)(id obj1, id obj2); 
```

因此，您需要做的就是返回这个 typedef：

```
+ (NSComparator)comparator {
   ....
} 
```

# windows-phone-8 - WP8 SDK - 有什么新功能？

> ID：13193674
> 
> 赞同：2
> 
> 时间：2012-11-02T10:44:13.510
> 
> 标签：windows-phone-8

我不在，因此无法使用 Visual Studio 访问 PC，但我很想知道新的 WP8 SDK。特别是2个方面。

现在 WP7 SDK 非常有限（查看投诉论坛），我想知道是否有人可以回答两个问题，因为我迫不及待地等到我回来。

1.  SDK 是否可以让我控制手机音量？
    一种。我想制作一个应用程序，根据一天中的时间和我的 Outlook 日历状态（例如，如果我在开会时不要响铃）将手机静音。这在 WP7 中是不可能的

2.  我可以在没有用户控制的情况下发送文本消息（例如，作为后台任务）。一种。在 WP7 上，您可以安排消息，但用户仍然必须单击发送按钮。

或者，是否有人知道“WP8 SDK 中的新功能”，他们也可以指出我？目前我在谷歌上找不到任何东西（如果存在这样的东西）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T00:54:36.240

我写了一篇 100 多页的简短文章，描述了 WP8 SDK 中的新功能。

[http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:11:30.287

Windows Phone SDK 8.0 的新增功能 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx)

但也许新的 API 参考会有所帮助。由于我认为它有点隐藏，这里是直接链接：http: [//msdn.microsoft.com/en-US/library/windowsphone/develop/ff626516%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff626516%28v=vs.105%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T11:42:20.883

> SDK 是否可以让我控制手机音量？

不

> 我想制作一个应用程序，根据一天中的时间和我的 Outlook 日历状态（例如，如果我在开会时不要响铃）将手机静音。这在 WP7 中是不可能的

仍然不可能。

> 我可以在没有用户控制的情况下发送文本消息（例如，作为后台任务）。一种。在 WP7 上，您可以安排消息，但用户仍然必须单击发送按钮。

不，你不能。用户仍然必须批准发送消息。Windows Phone 正试图避免 Android 的安全漏洞。

# c# - C#出厂默认返回

> ID：13193681
> 
> 赞同：2
> 
> 时间：2012-11-02T10:44:42.127
> 
> 标签：c#, .net, factory-pattern

我创建了一个简单的工厂，在扩展它以涵盖其他实现之前，我想知道从开关/默认值返回的正确/推荐行为是什么。

在以下情况下，我使用枚举（SerialisationTypes）来确定所需的具体实现，默认情况下，我计划通过无参数方法返回 JSON 序列化器实现，但这在 switch 语句的默认值上是正确的行为还是应该我抛出异常？

```
namespace Helper.Core.Serialisation
{
    internal class SerialisationFactory
    {
        internal ISerialiser Create()
        {
            return Create(SerialisationTypes.JsonSerialiser);
        }

        internal ISerialiser Create(SerialisationTypes type)
        {
            switch (type)
            {
                case SerialisationTypes.JsonSerialiser:
                    return new JSonSerialiser();
                default:
                    return new JSonSerialiser();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:51:30.683

你最好抛出异常，因为用户正在请求你没有实现的东西。

另外，在您的代码中，如果枚举具有附加值（例如 XmlSerialiser、ProtbufSerializer 等），那么您将始终返回一个 JSonSerialiser，这将导致难以找到错误。最好是抛出异常，然后修复代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:48:53.320

通常，如果找不到您的类型，则表示编码错误。如果您返回默认值，您将在稍后引发异常时看到错误。而且您正在向自己和其他开发人员隐藏您的错误。因此，抛出异常将帮助您在开发过程的早期发现错误。并且更早地发现错误将花费您更少的金钱和时间来交付正确的工作软件。

# macos - 搜索字符串谓词

> ID：13193690
> 
> 赞同：2
> 
> 时间：2012-11-02T10:45:08.787
> 
> 标签：macos, cocoa, nspredicate, spotlight, nsmetadataquery

我正在尝试使用 NSMetaDataQuery 创建搜索查询并部署如下谓词：

```
NSString * format = @"kMDItemDisplayName like[cd] %@";
NSPredicate * compPred = [NSPredicate predicateWithFormat:format,[NSString stringWithFormat:@"%@*",self.searchString]]; 
```

我面临的问题是：

假设我有应用程序名称：Google Chrome。

如果我搜索“google”作为搜索字符串，我可以得到结果，即“Google Chrome”，但如果我搜索“chrome”，我无法搜索“Google Chrome”。

同样，如果搜索字符串为“Suhail”，则显示结果为“Suhail hats no one”，但如果搜索字符串为“hates”，则结果不显示任何内容。

还有一种情况：假设文件名为“faMee”。

我搜索“amee”，结果什么都没有。我搜索“mee”，结果什么都没有，但在聚光灯下是我搜索“mee”，它向我显示文件“faMee”。

请有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T07:05:53.327

```
NSPredicate * compPred = [NSPredicate predicateWithFormat:format,[NSString stringWithFormat:@"*%@*",self.searchString]]; 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:30:05.850

好吧，不要在查询中使用“喜欢”，而是使用“包含”。请仔细阅读 NSPredicate Apple 文档和查询示例。

莫辛

# html - 服务器确实允许 GET 方法但不允许 POST

> ID：13193691
> 
> 赞同：0
> 
> 时间：2012-11-02T10:45:11.707
> 
> 标签：html, security, iis, post, get

我有一个简单的静态 html 站点，它使用 jquery 的 POST 方法和一些也使用表单方法 =“post”的表单...

我现在收到以下错误： NetworkError: 405 Method Not Allowed

当我用 firebug 查看响应头时，我看到服务器（IIS btw.）确实允许以下内容：GET、HEAD、OPTIONS、TRACE

我的房东说，出于安全原因，他不能在静态 html 文件上使用 POST 方法...

谁能告诉我 POST 和 GET 之间的安全差异？我不明白为什么允许 GET 而不允许 POST。任何争论他可以允许的帮助将不胜感激:-)

提前感谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:52:00.887

我唯一想到的是垃圾邮件机器人会自动发布到网页上的每个表单。也许提供者假设如果它是一个静态页面，它肯定没有验证码，并且很容易发送垃圾邮件。这只是一个猜测，我从未见过如此奇怪的政策。也许会指出一些大型托管公司，并说这对他们来说肯定不是安全问题。

# sql - SSIS 错误：插入值列表与列列表不匹配

> ID：13193693
> 
> 赞同：1
> 
> 时间：2012-11-02T10:45:28.910
> 
> 标签：sql, sql-server, ssis

在 ssis 组件 OLE DB 命令中：

```
insert into D_MAPPING_CLIENTS (ID, DIRECTORY_ID, SOURCE_ID, BASE_ID)
  values (

     case when exists ( select 1 from D_MAPPING_CLIENTS )
           then ( select MAX(ID) + 1 from D_MAPPING_CLIENTS )

         else 1
     end

  , ISNULL(?, 
      case when exists ( select 1 from D_MAPPING_CLIENTS )
             then ( select MAX(DIRECTORY_ID) + 1 from D_MAPPING_CLIENTS )

           else 1
       end ) 

   , ( select ID from D_SOURCES_CLIENTS where SOURCE = 'D:\load\1\clients.txt' )

   , ?) 
```

当我尝试保存它时，我收到一个错误：“插入值列表与列列表不匹配”，尽管当我在 Management Studio 中运行此脚本时它工作正常。

有什么问题？

UPD：我在哪里替换最后一个“？” 对某些价值来说它工作正常：o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:39:26.970

您遇到的问题是两件事之一的结果。要么您没有在 Execute SQL 任务中设置**参数映射，要么没有在同一任务的设置中设置****BypassPrepare**设置，这很可能是这种情况。

我设法重新创建您的错误，并绕过它。我遵循的步骤如下：

1.  仅使用查询中指定的这两个表重新创建了您的数据库。使用硬编码值对其进行测试，以确保它有效。
2.  在我的包中添加了两个变量 - **BaseID**和**DirectoryID**并为它们提供了一些默认值。
3.  创建了一个 SQL Execute Task 并将您的查询添加到**SQLStatement**。
4.  转到**参数映射并映射指定参数名称****0** 和**1**的两个变量。此时我的**BypassPrepare**选项设置为**False**，运行任务会导致您收到的确切错误。
5.  将**BypassPrepare**选项设置为**True**。执行任务导致成功，并且一行被添加到数据库中，没有任何问题。

有关此特定属性的信息（在不同的上下文中使用，但具有相同的一般功能），请参阅：[http://technet.microsoft.com/en-us/library/microsoft.sqlserver.dts.tasks.executesqltask.executesqltask。绕过准备.aspx](http://technet.microsoft.com/en-us/library/microsoft.sqlserver.dts.tasks.executesqltask.executesqltask.bypassprepare.aspx)

* * *

**更新**

给出的解决方案是针对 SQL 执行任务，而不是针对 OLE DB 命令。更改“？”的位置 如 OP 所述，SQL 查询中的 value 参数可以解决此问题。

另一种选择是退回到调用存储过程。

# android - 不同布局的 Android 相同 gen 标识符

> ID：13193699
> 
> 赞同：2
> 
> 时间：2012-11-02T10:45:51.993
> 
> 标签：android, android-layout, android-inflate

我有一个带有一些布局的项目，我从另一个也有自己的布局的项目链接到它。问题是它会导致重复的标识符，因此当我尝试从其中一个项目中扩展布局时，我会从另一个项目中获取具有相同标识符的布局。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:50:13.040

尝试使用完整路径，例如`com.my.first.package.name.R.layout.sameId`和`com.my.second.package.name.R.layout.sameId`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:54:03.513

在您的布局中使用其他标识符应该不是问题，因为您在同一个充气资源中没有两个具有相同 id 的资源或共享相同的根视图。

这就像在布局中使用 @android:id/text1 id。

如果这是一个问题，为什么不重命名您自己的 ID？

# php - 如何在 PHP Simple HTML DOM Parser 中获取 span 类的前三个单词

> ID：13193701
> 
> 赞同：0
> 
> 时间：2012-11-02T10:46:02.637
> 
> 标签：php, parsing, variables, dom

[使用PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)获取 span 类的前三个单词的方法是什么。
假设获取页面的源代码为：

> Some Text `<span class="sos">`Good Better Best `<i> Some text</i> here</span>`Again 这里有一些文字

使用 php simple html dom parser 我们可以像这样获取 span 类的所有内容：

```
$data = $html->find('span class="sos"'); 
```

所以在这里，`$data`将声明该跨度类的全部内容。
我想做的是只在新变量中获取跨度类的前三个单词，所以在这种情况下应该是：

```
$new_data = 'Good Better Best'; 
```

怎么做？
PHP 简单 HTML DOM 解析器[手册](http://simplehtmldom.sourceforge.net/manual.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:51:16.657

您可以尝试为此使用爆炸。

```
$data = $html->find('span class="sos"');
$breakdata = explode(" ",$data);
$firstThreeWords = array_slice($breakdata, 0, 3);

$final = implode(" ",$firstThreeWords); //Good Better Best 
```

如果要排除前三个单词，

```
$data = $html->find('span class="sos"');
$breakdata = explode(" ",$data);
$removeFirstThreeWords = array_slice($breakdata, 2);

$final = implode(" ",$removeFirstThreeWords ); //Some text here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:56:11.313

类似于上面的答案，但用于`strip_tags`预先从字符串中删除 HTML。

```
$output = implode(' ', array_slice(explode(' ', strip_tags($data)), 0, 3)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:16:55.107

正如您评论@billyonecan post ，听起来您的解决方案是：

```
$result = str_get_html($result);
foreach($html->find('.sos') as $xdat)
{
$x_des = implode(' ', array_slice(explode(' ', strip_tags($xdat)), 0, 3));
$result = str_replace($x_des, ' ', $result);
$result = str_get_html($result);
} 
```

根据您的需要更改所有变量。

# c# - 多线程进程中的静态 Queue.Enqueue 期间意外数据丢失

> ID：13193709
> 
> 赞同：4
> 
> 时间：2012-11-02T10:46:52.653
> 
> 标签：c#, multithreading, thread-safety, aforge

> 私有队列_queueObject = new Queue();
> 
> 私有静态队列_queueItem =新队列（）；
> 
> 私有静态int permitEntryCount = 0；
> 
> 私有int allowThreadEntry = 0；

如上所示，我有 2 个队列变量。

> ```
> public Camera(IVideoSource source, MotionDetector detector)
> {
>    VideoSource = source; 
>    _motionDetector = detector;
>    VideoSource.NewFrame += VideoNewFrame; 
>    MainForm.OnRegisterClickedEvent += new MainForm.RegisterClickedEventHandler(MainForm_OnRegisterClickedEvent);
>    MainForm.OnReceiveMultipleFrameEvent += new MainForm.ReceiveMultipleFrameEventHandler(MainForm_OnReceiveMultipleFrameEvent);
> } 
> ```

我有一个 Camera 类，上面显示的是构造函数实现的一部分。视频源总是监听事件 VideoNewFrame；我在下面显示的代码是 VideoNewFrame 中的一段代码。

```
FrameObjectElement frameObj = new FrameObjectElement();
frameObj.cameraID = CW.Camobject.id;
frameObj.cameraTag = _FPGAFrameCount / 2;
frameObj.FirstFrameBuffer = BitmapToRgbValues(twoframe_arg.GetFirstBitmap(352, 288));
frameObj.SecondFrameBuffer = BitmapToRgbValues(twoframe_arg.GetSecondBitmap(352, 288));

if (_queueObject.Count > 5)
    _queueObject.Clear();

_queueObject.Enqueue(frameObj);

if (allowThreadEntry == permitEntryCount && isClear) 
{
    if (_queueObject.Count !=  0)
    {
        lock (this)
        {
            _queueItem.Enqueue(_queueObject.Peek());
        }
        Debug.WriteLine("Thread ID: " + Thread.CurrentThread.ManagedThreadId.ToString() +
        " - " + _queueObject.Count.ToString() +
        " queue in QueueObject : Camera ID : " + _queueObject.Peek().cameraID.ToString() +
        " : Camera Tag : " + _queueObject.Peek().cameraTag.ToString() + 
        " : Queue item count : " + _queueItem.Count.ToString());

        _queueObject.Dequeue();

        if (_queueItem.Count == numberOfCamera && isAllow)
        {
            CurrentID = CW.Camobject.id;
            isAllow = false;
        }

        allowThreadEntry++;
        if (_queueItem.Count == numberOfCamera)
        {
            if (CurrentID == CW.Camobject.id)
            {
                isClear = false;
                //allowEntry = false;

                //Debug.WriteLine("-- Count: " + allowThreadEntry.ToString() + " --");

                foreach (FrameObjectElement foE in _queueItem)
                {
                    Debug.WriteLine("Current Camera ID: " + CW.Camobject.id +
                        " : Camera ID : " + foE.cameraID.ToString() +
                        " : Camera Tag : " + foE.cameraTag.ToString() + " :");
                }

                MultipleFrameEventArgs newMul = new MultipleFrameEventArgs();
                newMul.itemObj = _queueItem;

                if (OnMultupleFrameEvent != null)
                    OnMultupleFrameEvent(newMul);

                _queueItem.Clear();
                isAllow = true;
                isClear = true;
                Debug.WriteLine("Queue item count: " + _queueItem.Count.ToString() +
                    " : isClear : " + isClear.ToString());
            }
        }   
    }
} 
```

基本上我在这里想要实现的是收集帧ID、标签、它的第一帧和第二帧，然后存储在一个对象（struct FrameObjectElement）中。每个 2 帧的集合将代表 1 个相机标签，因此在这里它的作用的含义。然后框架对象在“_queueObject”中排队。接下来我会有一个条件'if（allowThreadEntry == permitEntryCount）'。所以这里所做的是每次访问这个函数时，'allowThreadEntry' 将增加，而'permitCountEntry' 保持不变。然后此函数将继续并将“_queueObject”中的第一个元素排入“_queueItem”队列，一旦满足所需的_queueItem 计数，它将向另一个类发出信号。

> 无效 MainForm_OnReceiveMultipleFrameEvent(MainForm.ReceiveMultpleFrameEventArgs e) { permitEntryCount++; }

收到信号后， permitEntryCount 将递增，从而允许再次访问该函数。为什么我这样做是因为创建这个类取决于我有多少物体相机。如果我有 11 个摄像头，我将有 11 个 workerThread 运行处理这个类。我将它们的帧排列在一个非静态队列中，并将它们的第一个元素收集到一个静态队列中，该队列将传递给我的其他进程。我在这里面临的问题如下：

> ============================== 计数：1760 ================== ==============
> 
> 队列项目计数：0：isClear：True
> 
> 线程 ID：QueueObject 中的 17 - 3 个队列：相机 ID：3：相机标签：3372：队列项目数：1
> 
> 线程 ID：QueueObject 中的 24 - 6 个队列：相机 ID：10：相机标签：4367：队列项目数：2
> 
> 线程 ID：QueueObject 中的 23-5 个队列：相机 ID：9：相机标签：4415：队列项目数：3
> 
> 线程 ID：19 - QueueObject 中的 1 个队列：相机 ID：5：相机标签：4108：队列项目数：4
> 
> 线程 ID：QueueObject 中的 20-5 个队列：相机 ID：6：相机标签：3768：队列项目数：5
> 
> 线程 ID：QueueObject 中的 14-1 个队列：相机 ID：0：相机标签：2837：队列项目数：6
> 
> 线程 ID：QueueObject 中的 21-1 个队列：相机 ID：7：相机标签：3246：队列项目数：7
> 
> 线程 ID：16 - QueueObject 中的 1 个队列：相机 ID：2：相机标签：3552：队列项目数：8
> 
> 线程 ID：QueueObject 中的 18 - 6 个队列：相机 ID：4：相机标签：3117：队列项目数：9
> 
> 线程 ID：QueueObject 中的 15 - 3 个队列：相机 ID：1：相机标签：2315：队列项目数：10
> 
> 线程 ID：QueueObject 中的 22-4 队列：相机 ID：8：相机标签：4853：队列项目数：11
> 
> 当前相机 ID：8：相机 ID：3：相机标签：3372：
> 
> 当前相机 ID：8：相机 ID：10：相机标签：4367：
> 
> 当前相机 ID：8：相机 ID：9：相机标签：4415：
> 
> 当前相机 ID：8：相机 ID：5：相机标签：4108：
> 
> 当前相机 ID：8：相机 ID：6：相机标签：3768：
> 
> 当前相机 ID：8：相机 ID：0：相机标签：2837：
> 
> 当前相机 ID：8：相机 ID：7：相机标签：3246：
> 
> 当前相机 ID：8：相机 ID：2：相机标签：3552：
> 
> 当前相机 ID：8：相机 ID：4：相机标签：3117：
> 
> 当前相机 ID：8：相机 ID：1：相机标签：2315：
> 
> 当前相机 ID：8：相机 ID：8：相机标签：4853：
> 
> ============================== 计数：1761 ================= ==============
> 
> 队列项目计数：0：isClear：True
> 
> 线程 ID：QueueObject 中的 14-1 个队列：相机 ID：0：相机标签：2838：队列项目数：1
> 
> 线程 ID：16-1 队列对象中的队列：相机 ID：2：相机标签：3553：队列项目计数：2
> 
> 线程 ID：QueueObject 中的 21-1 个队列：相机 ID：7：相机标签：3247：队列项目数：3
> 
> 线程 ID：24 - QueueObject 中的 1 个队列：相机 ID：10：相机标签：4374：队列项目数：4
> 
> 线程 ID：23 - 6 QueueObject 中的队列：相机 ID：9：相机标签：4416：队列项目数：5
> 
> 线程 ID：17 - 4 QueueObject 中的队列：相机 ID：3：相机标签：3373：队列项目数：7
> 
> 线程 ID：QueueObject 中的 15-3 个队列：相机 ID：1：相机标签：2316：队列项目数：7
> 
> 线程 ID：18 - 6 队列对象中的队列：相机 ID：4：相机标签：3118：队列项目数：8
> 
> 线程 ID：QueueObject 中的 20-6 个队列：相机 ID：6：相机标签：3769：队列项目数：9
> 
> 线程 ID：QueueObject 中的 22-4 队列：相机 ID：8：相机标签：4854：队列项目数：10

我应该在“_queueItem”中有不同的计数，因为创建的每个对象在该段中只能访问一次，因此让我知道它们的元素将被排入“_queueItem”。但不幸的是，不知何故，程序运行一段时间后，就会出现如上所示的情况。我是否在这部分上应用锁定 '_queueItem.Enqueue(_queueObject.Peek());' 我仍然会遇到问题。我可以知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:49:18.540

你说队列是`static`，但你已经锁定了一个*实例*：

```
lock (this)
{
    _queueItem.Enqueue(_queueObject.Peek());
} 
```

如果您有多个实例，这意味着每个实例都是**独立**锁定的。更好的方法是拥有一个专用的**静态**锁对象，并针对它进行锁定。您可能可以通过以下方式作弊：

```
lock (_queueItem)
{
    _queueItem.Enqueue(_queueObject.Peek());
} 
```

if`_queueItem`永远不会重新分配，但最安全的方法是：

```
static readonly object lockObj = new object();
lock (lockObj)
{
    _queueItem.Enqueue(_queueObject.Peek());
} 
```

请注意，对队列的**所有**访问都**必须**同步，并且**都**必须使用相同的锁定对象。

如果您分别与两个队列通信，您可能能够减少一些争用，但请尽量避免在这种情况下使用**嵌套**锁，因为如果做得不好会导致死锁；例如，要从*实例*队列中窥视并进入*静态*队列，您可以使用：

```
object item;
lock(instanceLock) {
    item = _queueObject.Peek();
}
lock(staticLock) {
    _queueItem.Enqueue(item);
} 
```

还要注意，即使是简单的事情也`.Count`需要同步，最好是仔细检查（你不能在方法的*早期*检查计数，然后假设还有一些东西要出队，除非你为此保持锁定整个持续时间）。您的代码重复使用`.Count`- 所以请**非常**小心。`.Count`是暂时的：一旦你读了它，如果你放弃了锁，你必须假设它已经错了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:53:42.787

锁定使用`this`是邪恶的。检查几个参考：

[为什么 lock(this) {...} 不好？](https://stackoverflow.com/questions/251391/why-is-lockthis-bad)

[http://haacked.com/archive/2005/04/12/neverlockthis.aspx](http://haacked.com/archive/2005/04/12/neverlockthis.aspx)

始终使用专用对象，例如：

```
private static object _queueLock = new object(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T11:00:36.347

你为什么不让`Queue`把手锁定？使用[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)内部同步的 a 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:54:07.980

不要使用 lock(this) - 请参见[此处](https://stackoverflow.com/questions/251391/why-is-lockthis-bad)。如果您在类的多个实例之间共享队列，则需要锁定由所有实例共享的静态对象。目前每个类实例都有自己的锁，因此它将忽略其他实例应用的任何锁。

# google-app-engine - AppEngine 返回 4 个字节的数据

> ID：13193712
> 
> 赞同：0
> 
> 时间：2012-11-02T10:47:03.400
> 
> 标签：google-app-engine

我想从 AppEngine (Python) 返回 4 个字节的数据。

在某些情况下我想返回 a)，在某些情况下 b)

一）393217 = 0x60001

b) 393218 = 0x60002

问题是，如果我像这样将 base10 数字写到输出流中：

```
class MyClass(webapp.RequestHandler):
    def get(self, option):
        self.response.out.write(393217) 
```

它返回 6 个字节的数据，如果 393217 被解释为字符串，则这是正确的。但我只想返回 4 个字节 0x00060001

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:18:04.010

好的，看来如果我这样做：

```
"00600001".decode("hex") 
```

我得到了我想要的 4 个字节。

# php - CodeIgniter 与存储在数据库中的多个数据库

> ID：13193714
> 
> 赞同：0
> 
> 时间：2012-11-02T10:47:15.003
> 
> 标签：php, codeigniter

我在 20 个网站上工作，每个网站都有自己的数据库，但它们的数据库结构相同。

问题是我必须登录到不同的后端才能对每个后端进行一些工作。

因此，我决定为所有网站编写单个 CI 后端。

为此，我创建了一个包含两个表 ( `user`, `websites`)的数据库

该`user`表用于登录操作。

该`websites`表列出了所有网站和相关的数据库。

我想做的是，在我的后端应用程序的任何视图中，都能够选择数据库（或网站），以便当前视图可以重新加载来自所选数据库的数据以对其执行一些工作，然后提交它。

我正在使用 CI V1.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:26:42.827

这似乎很有道理。但是，请注意，一旦您更改了数据库适配器，数据库会话存储将无法按预期工作，因为它存储在您提到的第一个数据库中。

因此，当您验证用户并获取数据库的 DSN（数据库源名称）后，您可以在执行查询时更改数据库适配器，方法是：

```
$this->database->load('dbdriver://username:password@hostname/database'); 
```

请注意，这`dbdriver`是您使用的数据库类型，请参阅配置文件了解类型。您还可以查看[文档](http://codeigniter.com/user_guide/database/connecting.html)以获取更多信息。

如果您希望数据库会话存储工作，您可能需要创建一个新的数据库适配器，方法与上面类似，但还有一个参数。

```
$new_db = $this->database->load($dsn, TRUE); 
```

但是，此方法很可能需要在代码中进行一些重构，因为您习惯于执行类似的查询，`$this->database->query();`并且需要将其更改为`$new_db->query()`.

# c++ - 以 ShellExecuteEx 开始的终止进程

> ID：13193719
> 
> 赞同：3
> 
> 时间：2012-11-02T10:47:25.423
> 
> 标签：c++, windows, winapi, process, pid

1）我用 ShellExecuteEx 启动了一个进程

2）检索PID

```
GetProcessId(shellExInfo.hProcess) 
```

示例代码：

```
SHELLEXECUTEINFO shellExInfo;

shellExInfo.cbSize = sizeof(SHELLEXECUTEINFO);
shellExInfo.fMask = SEE_MASK_NOCLOSEPROCESS;
shellExInfo.hwnd = NULL;
shellExInfo.lpVerb = "open";
shellExInfo.lpFile = processToStart.c_str();
shellExInfo.lpParameters = processParams.c_str();
shellExInfo.lpDirectory = NULL;
shellExInfo.nShow = SW_SHOW;
shellExInfo.hInstApp = NULL;

ShellExecuteEx(&shellExInfo); // start process

GetProcessId(shellExInfo.hProcess); // retrieve PID 
```

现在我想用给定的 PID 杀死启动的进程！这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:50:28.817

要终止进程，您必须使用该`TerminateProcess`函数。但是，它接收进程的句柄作为参数：

```
TerminateProcess(shellExInfo.hProcess, 1); 
```

如果由于某种原因您只存储进程 ID 而不是句柄，那么您应该首先使用以下`OpenProcess`函数打开一个句柄：

```
HANDLE h = OpenProcess(PROCESS_TERMINATE, false, process_id);
TerminateProcess(h, 1);
CloseHandle(h); 
```

# xcode - 使用预处理器选项在 Xcode 中构建目标依赖项

> ID：13193720
> 
> 赞同：1
> 
> 时间：2012-11-02T10:47:27.220
> 
> 标签：xcode, dependencies, preprocessor

我在 Xcode 中有一个应用程序目标（测试目标），在我的项目中有一个库目标。app 目标应该是测试库目标。测试应用程序目标将库目标作为依赖项，但出于测试目的，我需要使用一些特定的预处理器定义（例如`GCC_PREPROCESSOR_DEFINITIONS="TEST_MODE"`）构建库。我还没有设法在 Xcode 中找到实现它的方法，所以我想知道它是否可能。

谢谢

# javascript - Resharper 7 javascript 自动完成建议来自 dhtml.js 的全局“外部”。什么是 dhtml.js，如何阻止它出现？

> ID：13193726
> 
> 赞同：3
> 
> 时间：2012-11-02T10:47:52.253
> 
> 标签：javascript, extjs, resharper

我的问题：

```
something: function () {
    Ext.blah(); //<-- a javascript statement I want to end up with
    Ext //<-- I begin to type it
    external. //<-- what Resharper autocompletes when I hit the dot key
    external.blah(); //<-- what I end up with without realising.
}, 
```

所以真的有两个问题：

1.  什么是“dhtml.js”（据我所知不存在的文件）的“外部”，为什么 Resharper 有这样的附件？
2.  我做了一些谷歌搜索，但没有找到全面的结果：是否有可能阻止 Resharper 7 逐个而不是完全地抱怨隐式定义的全局变量？也许通过在 Resharper 中某处的列表中定义它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:53:55.230

1.  `external`是一个全局对象（`window`对象属性）。似乎是 Internet Explorer 特定的，[请参见此处](http://msdn.microsoft.com/en-us/library/ie/ms535246%28v=vs.85%29.aspx)。`dhtml.js`是一个内部 ReSharper 文件，其中声明了所有标准浏览器对象和属性。JavaScript 不是一种静态类型的语言，没有办法在代码完成中建议完全正确的项目。

2.  如果您不想`Ext`在真实的 JavaScript 文件中声明您的，那么您可以创建一个虚拟 JavaScript 文件并在`Ext`那里定义您的。简单`Ext = {}`就足够了。即使您没有从真实的 HTML 中引用此文件，它也可以工作。

# ckeditor - 区别 format_tags 和 stylesSet

> ID：13193729
> 
> 赞同：0
> 
> 时间：2012-11-02T10:47:58.327
> 
> 标签：ckeditor

CKEDITOR 配置中的`format_tags`属性和属性有什么区别？`stylesSet`

我将 API 用于一些自定义按钮（它们在 DOM 中，而不是在编辑器本身中），并且我还有一个样式下拉列表。

我首先使用了该`format_tags`属性：

```
var tags = config.format_tags.split( ';' );
// Create style objects for all defined styles.
var styles = {};
$.each(tags,function(i,tag) {
  styles[ tag ] = new CKEDITOR.style( config[ 'format_' + tag ] );
  styles[ tag ]._.enterMode = ckeditor.config.enterMode;
}); 
```

在此之后，我可以调用所需的样式函数来应用（或删除）它。

今天我偶然发现了这个`stylesSet`属性，我可以这样使用它：

```
CKEDITOR.stylesSet.add('my_custom_style', [
  { name: 'My Custom Block', element: 'h3', styles: { color: 'blue'} },
  { name: 'My Custom Inline', element: 'span', attributes: {'class': 'mine'} }
]); 
```

这对我来说看起来更好，因为我知道可以为元素使用额外的类和内联样式。

有人可以解释为什么有两种格式化文本的方法吗？`format_tags`当您有更好的配置选项时，为什么要使用`stylesSet`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:58:55.820

我调查了一下。似乎您可以使用与 a 相同的`format_tag`格式`stylesSet`。

我现在在我的配置中有这个：

```
config.format_tags = 'h1;h2;h3;test';
config.format_test = { element : 'span', attributes : { 'class' : 'test' }, styles: { color: 'blue'} }; 
```

这最适合将自定义格式标签添加到您的 ckeditor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T06:43:02.783

如果您使用不同的语言，请不要忘记将自定义标签翻译添加到“格式”部分。../lang/nl.js 否则新标签在格式下拉列表中不可见。

```
"format": {
  .......       
  "tag_test": "tekst met css"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T02:56:02.307

如果我想为格式标签添加自定义**部分**标签，这对我有用：

1\. 转到 config.js，添加
config.format_tags = 'h1;h2;h3;h4;h5;h6; **部分**';
**config.format_section = {元素：'section'，属性：{'class'：'test'}}；**

2\. 然后打开你想要的语言文件（例如 en.js）-> lang/en.js
搜索 "tag_pre":"Formatted"，并添加**"tag_section":"Section"**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-14T19:34:48.593

实际上有两个下拉列表。一个用于**标签选择**，第二个用于**样式选择**。可以在配置中更改工具栏中这些字段的可见性。 [![在此处输入图像描述](../Images/c051446dc51a829cf284209d50f882b2.png)](https://i.stack.imgur.com/PzY2l.png)

## 标记下拉列表

更改当前块元素标签类型（p、h1、h2、...）。例如，此列表的配置`format_tags: 'p;h2;h3;h4;div;pre'`。[在这里了解更多](http://docs.ckeditor.com/#!/guide/dev_format)

## 样式下拉列表

更改当前选定元素的各种设置（不仅是块元素）。例如，您可以使用它为图像赋予特定类别。此列表的配置例如：

```
stylesSet: [
            {
                name : 'Image on the left',
                element : 'img',
                attributes : { 'class' : 'myLeftImage' }
            }
        ] 
```

[在这里了解更多](http://docs.ckeditor.com/#!/guide/dev_styles)

# asp.net - 如何从 asp.net 中的 ckeditor 获取 HTML 源代码？

> ID：13193732
> 
> 赞同：-2
> 
> 时间：2012-11-02T10:48:02.980
> 
> 标签：asp.net

如何从 asp.net 中的**ckeditor获取****HTML** **源** ？我想将它提取到一个字符串变量中。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:32:43.363

我假设您的意思是[ASP.NET 的 CKEditor 控件](http://ckeditor.com/download)：

```
<CKEditor:CKEditorControl ID="chkContent" runat="server" Height="400" Width="800">
</CKEditor:CKEditorControl>

string content = chkContent.Text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:32:52.100

检查以下网址，希望对您有所帮助。

[http://www.itjungles.com/dropdownlist/how-to-use-fckeditor-in-asp-net-2-0](http://www.itjungles.com/dropdownlist/how-to-use-fckeditor-in-asp-net-2-0)

[http://www.codeproject.com/Tips/123324/Integrate-CKEditor-with-ASP-NET-page](http://www.codeproject.com/Tips/123324/Integrate-CKEditor-with-ASP-NET-page)**

# objective-c - 使用 Objective-C 对 int 数组进行排序 - 优化

> ID：13193734
> 
> 赞同：4
> 
> 时间：2012-11-02T10:48:04.497
> 
> 标签：objective-c, arrays, sorting, optimization, int

今天早上，我偶然发现了这个线程[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)发现它真的很有趣！

我想在 Objective-C 中尝试一下，在实现它时，我遇到了对整数数组进行排序的问题。因此下面的问题。

让我们考虑一个`arraySize`整数数组，用 0 到 256 之间的随机值初始化：

```
int data[arraySize];
for (int c = 0; c < arraySize; ++c)
{
    data[c] = arc4random() % 256;
} 
```

我想对该数组进行排序并将结果存储在另一个整数数组中。在 C++ 中，我们可以这样做：

```
std::sort(data, ...); 
```

在 Java 中，我们会使用：

```
Arrays.sort(data); 
```

在 Objective-C 中，我是这样做的：

```
int sortedData[arraySize];
NSArray* sortedArray = [NSArray array];
// Initialize the array to sort.
for ( int i = 0 ; i < arraySize ; ++i )
{
    sortedArray = [sortedArray arrayByAddingObject:[NSNumber numberWithInt:data[i]]];
}
// Sort the array.
sortedArray = [sortedArray sortedArrayUsingSelector:@selector(compare:)];
// Copy the array back into a int[] array.
for (int c = 0; c < arraySize; ++c)
{
    sortedData[c] = [sortedArray[c] intValue];
} 
```

它有效，但在我看来这是一个真正的痛苦，它根本没有优化！我该如何改进呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T11:01:25.467

“未优化”声明*仅适用于您拥有的代码*。苹果的框架是高度优化的，你不应该第二次猜测苹果，他们已经第二次猜测你了。

首先，将方法用于创建它们的目的。您创建未排序数组的方式只会浪费内存。在循环的每一步中，您都在创建一个新的数组实例，最后，您将得到 256 个（或任何原始整数数组的计数）数组，这**只是多余的。**

所以，如果你**真的非常**想使用 Objective-C 来解决这个问题，你可以使用一个可变数组，你只需要一个`NSMutableArray`：

```
int array[256];
// populate the C array here

NSMutableArray *objcArray = [NSMutableArray array];
for (int i = 0; i < sizeof(array) / sizeof(*array); i++) {
    [objcArray addObject:[NSNumber numberWithInt:array[i]];
}

[objcArray sortUsingSelector:@selector(compare:)]; 
```

顺便说一句，`NSMutableArray`这里甚至不需要两个循环（一个用于填充 C 数组，一个用于将其转换为 ）。你可以写

```
const size_t size = 256;
NSMutableArray *objcArray = [NSMutableArray array];
for (int i = 0; i < size; i++) {
    [objcArray addObject:[NSNumber numberWithInt:arc4random_uniform(256)];
}

[objcArray sortUsingSelector:@selector(compare:)]; 
```

但是，您实际上并不需要 Objective-C 来对整数数组进行排序。您可以简单地编写一个 C 函数（或者，如果需要，一个 Objective-C 方法）来对整数数组进行就地排序，这可能会更有效或更快：

```
#include <math.h>
#include <stdlib.h>
#include <unistd.h>

int compare(const void *first, const void *second)
{
    return *(const int *)first - *(const int *)second;
}

- (void)sortArray:(int *)array ofSize:(size_t)sz
{
    qsort(array, sz, sizeof(*array), compare);
} 
```

然后像这样使用它：

```
int array[256];
for (int i = 0; i < sizeof(array) / sizeof(*array); i++) {
    array[i] = arc4random_uniform(256);
}

[self sortArray:array ofSize:sizeof(array) / sizeof(*array)]; 
```

另外，[请阅读有关数组](http://ridiculousfish.com/blog/posts/array.html)的内容。真是好文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:04:07.500

使用 NSSortDescriptor 怎么样？

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"propertieToSort" ascending:NO];
NSArray *descArray = [NSArray arrayWithObject:dateDescriptor];
representedItems = [unsortedItems sortedArrayUsingDescriptors:descArray]; 
```

我不是 100% 确定这将适用于非 NSObjects，但我发誓我曾经使用过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:04:27.423

您可以在 obj-c 项目中使用 c++，只需将文件重命名为 .mm 并添加#include <算法> 以使用 std.sort。我认为，将 NSNumber 用于 int 数据会更快

# php - PHP在类行为中抛出异常不同？

> ID：13193735
> 
> 赞同：0
> 
> 时间：2012-11-02T10:48:07.517
> 
> 标签：php, class, exception

我一直在使用异常处理来将我的错误日志集中到我的应用程序的数据库表中。我使用 set_exception_handler() 将异常路由到一个函数，该函数记录此信息并在错误后静默继续，以免向用户显示错误。这在调试中特别有用，因为我可以通过发出以下命令将消息发送到 db 表：

```
throw new Exception("My message I want to check in the db table"); 
```

并检查 db 表进行调试而不是本地日志文件。本质上 - 我的目标是替换 error_log() 函数功能，以减轻在多服务器负载平衡情况下搜索本地 Web 服务器日志文件的需要。

在我开始编写 Class 文件并做同样的事情之前，它一直对我很有效——也就是说——使用类似的 throw 语句将信息传回。当我尝试在类中的函数中执行此操作时，代码执行不会继续通过 throw 语句回到实例化类的调用代码。在将异常记录到 db 表之后，代码执行会默默地停止。我希望代码在记录后继续执行。

这是我不知道的php中的一些记录行为吗？如何更改或设置我的类文件，使它们的行为与应用程序代码的其余部分一样？

提前致谢！

# c# - 使用继承实现自定义泛型类

> ID：13193736
> 
> 赞同：-2
> 
> 时间：2012-11-02T10:48:15.190
> 
> 标签：c#, class, generics, inheritance

我想实现一个从另一个泛型类继承的泛型类，例如：

```
Public Class QlistedLink<T> : Linkedlist<T> 
```

我的问题出在 IEnumrable 函数中！当我这样称呼任何一个时，

```
QlistedLink<int> Q = new QlistedLink<int>();
int temp = Q.First(); 
```

在 First() 函数上抛出错误：

“序列不包含任何元素”

什么是解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:08:20.493

当然，这里有一个例外；你*希望*从一个空列表中得到什么`int`？

 *在调用它之前向列表中添加一些东西`First`，或者如果列表为空，则调用`FirstOrDefault`它会给你`0`，或者在调用之前检查列表是否为空`First`。*

# iphone - 如何等待多个xml解析请求的响应？

> ID：13193737
> 
> 赞同：0
> 
> 时间：2012-11-02T10:48:25.487
> 
> 标签：iphone, objective-c, xml-parsing

我有 5 个 html 请求从 Web 服务获取数据。我在 for 循环中请求。

```
-(void)loadPreviewsData
{
    NSMutableURLRequest *request;
    for (int i=1; i<=5; i++) 
    {
        if(i==1)
        {
            //request 1

        }
        if(i==2)
        {
           //request 2
        }
        //3 to 5 

       request.HTTPMethod = @"POST";

   NSURLConnection *myConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    if(myConnection)
    {
         HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
         HUD.labelText=@"Please wait.";
         myData = [[NSMutableData alloc] initWithLength:0];

    }
    else 
    {
        UIAlertView  *alert=[[UIAlertView alloc]initWithTitle:@"Message" message:@"Connection could not be established!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

}// end for loop
}//end loadPreview 
```

> 所有响应都有很多数据，我将响应数据保存到数组中，但它不等待第一个响应并发出另一个请求。finally for 循环将完成并且下一个视图将加载但数组未填充，因为尚未完成解析，因为尚未完成将数据复制到数组中，因此出现错误。
> 
> 我尝试`sleep(5);`了`-(void)parserDidEndDocument:(NSXMLParser *)parser`方法，但它无效，因为响应时间取决于网络流量。我不明白该怎么做请帮忙。
> 
> 我也尝试了以下答案，但无法理解[等待代码完成执行](https://stackoverflow.com/questions/3615939/wait-for-code-to-finish-execution)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:13:39.900

我想你想做同步http请求。您应该阅读有关此[链接](https://stackoverflow.com/questions/371638/asynchronous-vs-synchronous-vs-threading-in-an-iphone-app)的信息。我发现这个开源库会帮助你[ASIHTTPRequest](http://mobiledevelopertips.com/open-source/ios-open-source-asihttprequest.html)

**注意：** ASIHTTPRequest 项目所有者不再支持该项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:15:44.267

可能您正在使用具有相同委托的异步方法。这意味着您同时发出 5 个请求。

您可以在 Grand Central Dispatch 中排队： [http ://www.fieryrobot.com/blog/2010/06/27/a-simple-job-queue-with-grand-central-dispatch/](http://www.fieryrobot.com/blog/2010/06/27/a-simple-job-queue-with-grand-central-dispatch/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:29:35.117

我建议对 HTTP 请求使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

那么你可以有一个单独的类来进行 XML 解析。

这将允许您轻松接收响应并将其传递给 XML 类（您将必须创建 XML 解析器类的新对象以单独处理请求）并且 XML 将解析它。

有时，当您有不同结构的不同响应时，您必须通知 XML 类当前的解析。例如

```
MyXMLParserClass *pars = [[MyXMLParserClass alloc] init];
pars.ParsingOperation=1; 
```

**或者**

```
pars.ParsingOperation=2; 
```

然后在 XML 解析器类中您可以检查操作。

```
if(self.operationType==1)
{
   // Your code
}
else if(self.operationType==2)
{
  // your code
} 
```

希望这可以帮助。

# java - 调用 pack 后滚动条不显示

> ID：13193744
> 
> 赞同：0
> 
> 时间：2012-11-02T10:49:07.983
> 
> 标签：java, swing, jscrollpane, bufferedimage, preferredsize

我有一个 JFrame，其中包含一个 JScrollPane，其中包含一个 JPanel。我在 JPanel 上上传和绘制图像。图像的大小可能会发生变化。每次我绘制一个新图像时，在一个事件之后，我都会在 JFrame 上调用 pack。这一切都可以正常工作，JFrame 并且所有内容都正确调整了大小，但是我遇到了滚动条出现和消失的问题。如果我删除对 pack() 的调用，滚动条就在那里，但包含的 JPanel 不会调整大小。为什么 ？我能做些什么 ？这是用于测试的修剪后的 SSCCE 代码。使用的图像在 [此处输入链接描述](https://www.dropbox.com/sh/0vlq13vdi2j626h/uprHdWAiES)

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.awt.image.BufferedImage;
    import java.io.File;
    import java.io.IOException;
    import java.util.ArrayList;
    import javax.imageio.ImageIO;
    import javax.swing.BorderFactory;
    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JMenu;
    import javax.swing.JMenuBar;
    import javax.swing.JMenuItem;
    import javax.swing.JScrollPane;
    import javax.swing.JToolBar;
    import javax.swing.border.Border;

    @SuppressWarnings("serial")
    public class JComicFrame extends JFrame {
        private JComicPanel panel;
        private JToolBar toolbar;
        private JButton buttonZoom;
        private JButton buttonPrev;
        private JButton buttonNext;
        private JMenuBar menuBar;
        private JScrollPane scroller;
        private BufferedImage img;
        private ArrayList<BufferedImage> images;
        private int currentFile;
        public JComicFrame(){

            super("JComic");        

            images = new ArrayList<BufferedImage>();
            try {
                images.add(ImageIO.read(new File("1.jpg")));
                images.add(ImageIO.read(new File("2.jpg")));
                images.add(ImageIO.read(new File("3.jpg")));    
                images.add(ImageIO.read(new File("4.jpg")));    
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            BorderLayout layout = new BorderLayout();
            setLayout(layout);
            createToolbar();
            createPanel();
            createMenu();
            setJMenuBar(menuBar);
            add(toolbar,BorderLayout.NORTH);
            scroller = new JScrollPane(panel);
            add(scroller,BorderLayout.CENTER);
            setVisible(true);

            currentFile = -1;
            BufferedImage img = getNextFile();
            panel.setImage(img);

            pack();

        }

        private BufferedImage getNextFile(){
            currentFile = currentFile + 1;
            currentFile = (currentFile > images.size() - 1) ?    images.size() - 1 : currentFile;
            return images.get(currentFile);
        }

        private BufferedImage getPrevFile(){
            currentFile = currentFile - 1;
            currentFile = (currentFile < 0) ? 0 : currentFile;
            return images.get(currentFile);

        }

        private void createPanel(){
            Border raisedbevel, loweredbevel;
            raisedbevel = BorderFactory.createRaisedBevelBorder();
            loweredbevel = BorderFactory.createLoweredBevelBorder();
            panel = new JComicPanel(img);
            panel.setBorder(BorderFactory.createCompoundBorder(raisedbevel,loweredbevel));

        }
        private void createToolbar(){
            toolbar = new JToolBar();
            toolbar.setFloatable(false);
            buttonZoom = new JButton("+");
            toolbar.add(buttonZoom);

            buttonPrev = new JButton("<-");
            buttonPrev.addActionListener
            (
                    new ActionListener(){
                        public void actionPerformed(ActionEvent e){
                            BufferedImage img = getPrevFile();
                            panel.setImage(img);
                            pack();
                            repaint();

                        }
                    }
                    );
            toolbar.add(buttonPrev);
            buttonNext = new JButton("->");
            buttonNext.addActionListener
            (
                    new ActionListener(){
                        public void actionPerformed(ActionEvent e){
                            BufferedImage img = getNextFile();
                            panel.setImage(img);
                            pack();

                        }
                    }
                    );
            toolbar.add(buttonNext);
            toolbar.setBackground(Color.WHITE);

        }
        private void createMenu(){
            JMenu menuFile,menuJComic;
            JMenuItem fileOpen; 
            JMenuItem quitJComic,aboutJComic;

            menuBar = new JMenuBar();
            menuJComic = new JMenu("JComic");
            aboutJComic = new JMenuItem("About JComic...");
            menuJComic.add(aboutJComic);
            quitJComic = new JMenuItem("Quit");
            quitJComic.addActionListener(
                    new ActionListener(){
                        public void actionPerformed(ActionEvent e) {
                            System.exit(0);
                        }
                    }
                    );
            menuJComic.add(quitJComic);

            menuBar.add(menuJComic);

            menuFile = new JMenu("File");

            fileOpen = new JMenuItem("Open...");

            menuFile.add(fileOpen);
            menuBar.add(menuFile);

        }

        public static void main(String args[]){
            JComicFrame theFrame = new JComicFrame();

            theFrame.show();
        }

    } 
```

///////////////下一节课/////////////////

```
 import java.awt.Dimension;
    import java.awt.Graphics;
    import java.awt.Graphics2D;
    import java.awt.RenderingHints;
    import java.awt.image.BufferedImage;

    import javax.swing.JPanel;

    public class JComicPanel extends JPanel{

        private static final long serialVersionUID = 1L;
        private BufferedImage img = null;
        private float scaling = 0.5f;
        private int newW, newH;

        public JComicPanel(BufferedImage img){
            super();

            this.img = img;

        }

        public JComicPanel(){
            super();
            this.img = null;

        }

        private Runnable scaleImage(BufferedImage img){
            int w = img.getWidth();
            int h = img.getHeight();
            newW = (int)(w * scaling);
            newH = (int)(h * scaling);
            BufferedImage dimg =  new BufferedImage(newW, newH, img.getType());  
            Graphics2D g = dimg.createGraphics();  
            g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
            g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY); 
            g.drawImage(img, 0, 0, newW, newH, 0, 0, w, h, null);  
            this.img = dimg;
            revalidate();
            repaint();
            return null;

        }

        public void setImage(BufferedImage img){

            Thread t = new Thread(scaleImage(img));
            t.start();
        }

        public Dimension getPreferredSize(){
            System.out.println("PS");
            if(img==null || this.isVisible() == false)  
                return new Dimension(1,1);
            else 
                return new Dimension(img.getWidth(),img.getHeight());

        }

        public void paintComponent(Graphics g){

            Graphics2D g2d = (Graphics2D)g.create();
            super.paintComponent(g);
            g2d.drawImage(img,0,0,getSize().width,getSize().height, this); 
            g2d.dispose();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:07:36.207

1.  必须在屏幕上`max_size`决定`JFrame`

2.  添加新`Image`内容后，您必须调用`revalidate`& `repaint`for`JPanel`

3.  然后`JPanel`返回正确的`PreferredSize`，

4.  将此`Dimension`与 desired进行比较`JFrames max size`，如果大于 then，则不要调用`pack()`，反之亦然

5.  [关于 JDialog 的最大大小的类似问题](https://stackoverflow.com/questions/5759131/setting-the-maximum-size-of-a-jdialog)

6.  尽快发布[SSCCE](http://sscce.org/)以获得更好的帮助，因为 am 点仅与理论有关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:00:04.093

我的建议是：如果你想显示图像，不要使用`JPanel`，使用`JLabel`：

```
import javax.swing.*;

public class ScrollPane extends JFrame{
    JLabel label = new JLabel();
    JScrollPane scrollPane = new JScrollPane();

    public ScrollPane(){
        label.setIcon(new ImageIcon("C:/Documents and Settings/All Users/Documents/My Pictures/Sample Pictures/Image.jpg"));
        scrollPane.setViewportView(label);
        add(scrollPane);
    }

    public static void main(String[] args) {
        ScrollPane sp = new ScrollPane();
        sp.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        //sp.setSize(1024,800);
        sp.pack();
        sp.setVisible(true);
    }
} 
```

另外，如果要使用显示图像，请不要`pack();`在添加图像后每次`JPanel`调用，调用方法。`repaint();``JPanel`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:00:30.443

无需每次都声明 pack()。如果您在 main 方法中声明它就足够了。这意味着不在以下部分声明：

```
 public void actionPerformed(ActionEvent e){
                BufferedImage img = (BufferedImage)archiveHandler.getNextFile();
                panel.setImage(img);
                pack(); 
```

# .net - Crystal Server .NET 集成企业 ReportDocument.Load 异常

> ID：13193746
> 
> 赞同：0
> 
> 时间：2012-11-02T10:49:11.083
> 
> 标签：.net, visual-studio-2010, c#-4.0, crystal-reports-server

我正在使用 Visual Studio 2010，并安装了与 SAP Crystal Server 2011 通信所需的各种插件。一切正常，我可以毫无问题地查询数据（例如返回文件夹中的文件夹列表）。

我正在尝试将此与 CrystalReportViewer 组件集成，该组件似乎正在工作，直到我尝试将返回的 InfoObject 加载到 ReportDocument.Load 中。它总是返回：

*未知错误 0x80040200。*

任何想法将不胜感激。我有点不知所措。关于如何做到这一点的其他建议，我也会接受。

只是为了澄清。登录工作正常，InfoObject 有效（Response.Write 返回报告的正确 ID 和标题）。

```
SessionMgr ceSessionMgr = new SessionMgr();
EnterpriseSession ceSession = ceSessionMgr.Logon(ConfigurationManager.AppSettings["CrystalUser"].ToString(), ConfigurationManager.AppSettings["CrystalPassword"].ToString(), ConfigurationManager.AppSettings["CrystalServer"].ToString(), "Enterprise");
EnterpriseService ceEnterpriseService = ceSession.GetService("", "InfoStore");
InfoStore ceInfoStore = new InfoStore(ceEnterpriseService);

PluginManager cePluginMgr = ceInfoStore.PluginManager;
PluginInfo ceReportPlugin = cePluginMgr.GetPlugins("Desktop")["CrystalEnterprise.Report"];

InfoObjects ceInfoObjects = ceInfoStore.Query("SELECT * FROM CI_INFOOBJECTS WHERE SI_PROGID='CrystalEnterprise.Report' AND SI_ID=" + Convert.ToInt32(Request["ReportID"]));

InfoObject ceInfoObject = ceInfoObjects[1];

Response.Write(ceInfoObject.ID.ToString() + " = " + ceInfoObject.Title + "<br/>");

CrystalDecisions.CrystalReports.Engine.ReportDocument ceReportDocument = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
ceReportDocument.Load(ceInfoObject, ceSession);

CrystalReportViewer1.Visible = true;
CrystalReportViewer1.EnterpriseLogon = ceSession;
CrystalReportViewer1.ReportSource = ceReportDocument; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:55:13.223

不得不改用 RAS 服务器来解决这个问题。不知道为什么上述方法不起作用，因为根据 Docs 它应该。

```
// View the report using page server
PSReportFactory yPSReportFactory = (PSReportFactory)ceSession.GetService("PSReportFactory").Interface;
myReportSource = myPSReportFactory.OpenReportSource(ReportID);
//place the report source in session for use with postbacks
Session.Add("ReportSource", myReportSource);

CrystalReportViewer1.EnterpriseLogon = ceSession;
CrystalReportViewer1.ReportSource = myReportSource; 
```

# ios - 如何将图像分割成多个部分进行图像处理，然后重新组合？

> ID：13193748
> 
> 赞同：1
> 
> 时间：2012-11-02T10:49:15.647
> 
> 标签：ios, iphone, xcode, image-processing, partitioning

我正在使用 Core Image 和 GPUImage 在 iPhone 应用程序中制作一些滤镜。我似乎内存不足并因较大的图像而崩溃。我认为如果我可以将输入图像分成多个部分，这可以解决。

如何在iOS中高效地将图像拆分为多个部分进行图像处理，然后重新组合以将生成的图像作为一个整体输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:04:48.463

```
-(void)getMultipleImages:(UIImage*)image AndNumberOfPart:(NSInteger)matrixSize{

CGSize size = image.size;

//for storing rect values of puzzle boxess
NSMutableArray *puzzleRectArr = [[NSMutableArray alloc]init];
NSMutableArray *puzzleCroppedObj = [[NSMutableArray alloc]init];

int widthD = size.width;
int heightD = size.height;

float boxWidth = widthD/matrixSize;
float boxHeight = heightD/matrixSize;

for (int i = 0; i < matrixSize*matrixSize; i++) {

    int x = (widthD/matrixSize)/2 + (widthD/matrixSize) *(i%matrixSize)-boxWidth/2;
    int y = (heightD/matrixSize)/2 + (heightD/matrixSize)* (i/matrixSize)-boxHeight/2;

    CGRect rect = CGRectMake(x, y, boxWidth, boxHeight);
    [puzzleRectArr addObject:[NSValue valueWithCGRect:rect]];

    CGImageRef imageRef = CGImageCreateWithImageInRect([self.imgActual CGImage], rect);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
//----------------------------------------------------------------------        
    //here You can find the part image
    [puzzleCroppedObj addObject:croppedImage];

//----------------------------------------------------------------------                

     CGImageRelease(imageRef);
}
} 
```

# mysql - 将文本添加到 phpmyadmin 中的现有单元格

> ID：13193750
> 
> 赞同：2
> 
> 时间：2012-11-02T10:49:23.827
> 
> 标签：mysql, sql, text, phpmyadmin, append

我想在 phpmyadmin 中的单元格末尾添加文本，它只是将文本添加到该单元格中的末尾，并保持原样。

我试过这个但不起作用：

```
update items set description = contact(description, " - text to add") where parent_id ='2907' 
```

所以单元格应该是

```
something here 
```

成为：

```
something here - text to add 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:11:08.120

您的 SQL 语句中有错字。该函数被调用`CONCAT`，而不是~~联系~~。

试试这个说法。如果它不起作用，请将错误消息添加到您的问题中。

```
update items
  set description = concat(description, " - text to add")
  where parent_id ='2907' 
```

# java - java有没有办法根据文件名对文件夹中特定类型的文件进行分组并单独添加它们？

> ID：13193755
> 
> 赞同：1
> 
> 时间：2012-11-02T10:49:42.717
> 
> 标签：java, file-io

我想知道是否有任何特定的方法来过滤文件名并根据其前缀将特定文件单独添加到文件数组中？？？

例如： 文件：A_error_log.txt,A.txt,A.fasta,B.fasta,B_error_log.txt 从上面的文件列表中，我只想将 A 类文件移动到一个文件夹，将 B 类文件移动到另一个文件夹。

一个标准的解决方案是，获取文件列表，然后使用 get name 检查它们的特定文件名前缀并添加它们。

我想知道有没有其他方法已经存在 4r 这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:54:00.510

使用[FileFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/filechooser/FileFilter.html)。一个[例子是here。](http://alvinalexander.com/blog/post/java/how-implement-java-filefilter-list-files-directory)您只需要Java。没有外部依赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:01:55.847

[Apache Commons IO](http://commons.apache.org/io/)有很多现成的[文件过滤器](http://commons.apache.org/io/apidocs/org/apache/commons/io/filefilter/package-frame.html)，你可以组合这些过滤器，对它们应用`AND`和`OR`操作。此外，它有许多很好的[文件操作](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)，使用这些过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:57:03.580

如果你可以容忍额外的外部依赖，[Apache Commons IO](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/filefilter/package-summary.html)的 filefilter 包有许多用于这种操作的预制过滤器，你想要的很容易用[WildcardFileFilter](http://commons.apache.org/io/api-release/org/apache/commons/io/filefilter/WildcardFileFilter.html)完成：

```
 File dir = new File(".");
 FileFilter fileFilter = new WildcardFileFilter("A*");
 File[] files = dir.listFiles(fileFilter);
 for (int i = 0; i < files.length; i++) {
   System.out.println(files[i]);
 } 
```

还有许多其他过滤器和一组“逻辑”过滤器（AndFileFilter、OrFileFilter 和 NotFileFilter），它们允许您将多个过滤器串在一起。

如果您决定使用 Commons IO，在[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)包中有许多非常有趣的方法可以移动文件，这些方法也可以处理必须将文件移动到另一个文件系统的情况。

# c# - 是否可以注入asp.net web api模型类

> ID：13193756
> 
> 赞同：2
> 
> 时间：2012-11-02T10:49:57.413
> 
> 标签：c#, asp.net-web-api, dependency-injection, dependencies

我在 asp.net web api 中的模型类上实现 IValidatableObject。一些对象需要访问数据存储库才能执行完全验证。

如何在调用 IValidatableObject.Validate 之前解决 DAL 依赖关系 - 或者是否有其他方法可以解决 Validate 调用中的依赖关系？

请注意，我正在尝试使用 autofac，按照使用 autofac[注入 asp.net web api 模型，](https://stackoverflow.com/questions/13176973/inject-into-asp-net-web-api-model-with-autofac)但在我看来，模型没有使用依赖解析器调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:50:02.270

您的模型类不应该是依赖注入的一部分。他们也不应该对自己的验证负责（尽管用验证属性来装饰它们——这仅仅是元数据——就可以了）。

而是定义一个适当的抽象来进行验证。例如，定义这个抽象：

```
public interface IValidator<T>
{
    ValidationResult Validate(T instance);
} 
```

这样，您可以`IValidator<T>`为特定类型的接口实现零个、一个或多个实现，并且您可以使用 Autofac 非常有效地注册这一切。

当一个类型没有验证时，你可以让容器传回一个默认的 -empty- 实现：

```
// Implementation of the Null Object pattern
public class EmptyValidator<T> : IValidator<T>
{
    public ValidationResult Validate(T instance)
    {
        return ValidationResult.ValidResult;
    }
} 
```

当一个类型定义了多个验证器时，您可以将它们包装在一个组合中：

```
// Implementation of the Composite pattern
public class CompositeValidator<T> : IValidator<T>
{
    private readonly IEnumerable<Validator<T>> col;

    public CompositeValidator(IEnumerable<Validator<T>> col)
    {
        this.col = col;
    }

    public ValidationResult Validate(T instance)
    {
        ValidationResult total = ValidationResult.ValidResult;

        foreach (var validator in this.col)
        {
            var result = validator.Validate(instance);
            total = ValidationResult.Append(total, result);
        }

        return total;
    }
} 
```

与其将一个`IValidator<T>`直接注入到您的 Web API 控制器中，不如创建一个环绕您的`IRepository<T>`接口的装饰器。这样您就可以添加验证行为，而无需更改您的存储库。这样的实现可能如下所示：

```
public class ValidationRepositoryDecorator<T>
    : IRepository<T>
{
    private readonly IRepository<T> decorated;
    private readonly IValidator<T> validator;

    public ValidationRepositoryDecorator(
        IRepository<T> decorated,
        IValidator<T> validator)
    {
        this.decorated = decorated;
        this.validator = validator;
    }

    public void Save(T instance)
    {
        var result = this.validator.Validate(instance);

        if (!results.IsValid)
            new ValidationException(result);

        this.decorated.Save(instance);
    }
} 
```

Autofac 允许你为你注册装饰器。

# javascript - 身体课不起作用

> ID：13193758
> 
> 赞同：1
> 
> 时间：2012-11-02T10:50:04.600
> 
> 标签：javascript, css

基本上我想做的是这个......我有一个网站，我想在白天或晚上改变背景......所以第一天（（直到晚上 7 点左右））然后晚上直到 7 点左右大约是..我有一个脚本可以更改我的body标签的类以反映我的CSS页面中的两个不同的body元素..

```
.night body {
    font-size:18px;
    color:#999;
    background-image:url(nightwolfwall.jpg);
    background-attachment:fixed;
    background-repeat:no-repeat;
    background-color: #000; 
}
.day body {
    font-size:18px;
    color:#999;
    background-image:url(daywolfwall.jpg);
    background-attachment:fixed;
    background-repeat:no-repeat;
    background-color: #000; 
} 
```

但是对于我的生活..我无法让它们工作..我什至尝试手动更改body标签的类来测试类ID..什么都没有..我在css中做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:51:26.157

```
.day body{ 
```

应该

```
body.day{ 
```

*   第一个适用于`<body>`带有类的元素内的`day`
*   我的适用于`<body>`同班`day`。

至于：

```
.night body{ 
```

应该：

```
body.night{ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:51:39.713

改用`body.day`和`body.night`选择器。

`.day body`表示`body`嵌套在任何带有 class 的标签下的标签`day`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T10:51:50.690

您正在使用[后代选择器](http://www.w3.org/TR/CSS21/selector.html#descendant-selectors)，这意味着“作为夜间/白天成员的元素（任何类型）的后代的主体元素”。

*要匹配作为类*成员的body 元素：

```
body.classname 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:51:27.397

利用

```
body.night { 
```

选择`body`类`night`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T10:51:38.313

`body.night { /* CODE */ }`

`body.day{ /* CODE */ }`

CSS 规则基本上是分层编写的。左边是最抽象的元素，右边是最具体的元素。换句话说，在另一个元素内部的元素总是与前者正确。

当一个类被分配给一个元素时，你编写连接到元素的类（与 ID 相同），而**不是**在两者之间使用空格。

`body.day`不一样。**_** `body .day`后者针对内部`body`具有 class的元素`day`。这可以是任何元素。

另请注意，使用此代码时元素的深度没有限制。例如：`body .day`有很多可能的 HTML 结构。例如：

```
<body>
  <div class="day">
  </div>
</body> 
```

但是也：

```
<body>
  <div>
    <div>
      <div>
        <div class="day">
        </div>
      </div>
    </div>
  </div>
</body> 
```

**注意：**您可以通过使用仅选择元素的[直接子](http://www.w3.org/TR/CSS2/selector.html#child-selectors)`>`元素，例如`body > div.test`，将仅针对直接位于内部`body`且具有 class 的div `test`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T10:51:40.373

如果你的 body 标签上有一个“night”类，那么你应该在你的 CSS 中引用它，如下所示：

```
body.night {
// css styles
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-02T10:54:11.460

你需要这样：

```
body.night {}
body.day {} 
```

以你现在给予的方式，它可以应用于`<html>`标签。所以，给这种方式：

```
<html class="day">

<html class="night"> 
```

在这种情况下有效。`:)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-02T10:53:06.767

Body 标签除了 html 之外没有任何封闭标签，所以你的 css 类应该是

CSS

```
body {
   margin:0;
   /* other property */
}

.night {
    background:#000;
} 
```

HTML

```
<html>
  <head>
  </head>
  <body class="night">
  </body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-02T10:55:33.000

将您的 CSS 更改为

```
body.night { ... } 
```

或将您的夜间/白天课程添加到 html 元素。

# c++ - isSet() 或 operator void*() 或显式 operator bool() 或其他什么？

> ID：13193766
> 
> 赞同：8
> 
> 时间：2012-11-02T10:50:38.000
> 
> 标签：c++, c++11, operator-keyword, c++03, explicit-conversion

**检查是否设置了值的**函数**的最新技术**是什么？

 **例如，下面的迭代器解析单元格。一些单元格包含一个值，其他单元格是空的。

**最方便的方法是什么？**

```
struct iterator 
{                                  //usage:
  bool isset() const               // if (it.isset()) 
  bool isSet() const               // if (it.isSet()) 
  bool empty() const               // if (it.empty()) 

  bool is_set()   const            // if (it.is_set()) 
  bool is_valid() const            // if (it.is_valid()) 

  operator void*() const;          // if (it) 

  explicit operator bool() const;  // if ((bool)it) or if(it) //thanks @stijn
  operator          bool() const;  // if (it) //why not implicit conversion?

  bool operator!() const;          // if (!!it)

  //throwing exception as pointed out by @MatthieuM
  Type get() { if (isSet()) return value_; else throw; }
  //usage:
  //     try {                    // if (it.isSet()) {
  //        Type x = it.get();    //    Type x = it.get();
  //     }                        // }
  //     catch (...) {            // else {
  //        //empty               //    //empty
  //     }                        // }

  //please feel free to propose something different
  ...
}; 
```

思考：

1.  我的老板不明白`isset()`=> 改名为`isSet()`
2.  `empty()`更多的是关于容器收集，而不仅仅是一个单元格:(
3.  `operator void*`似乎是合乎逻辑的方式，但[在 C++11 流中已弃用](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)
4.  `explicit operator`[尚不支持](https://stackoverflow.com/questions/11365129/explicit-operator-bool-error)（我的代码必须与旧编译器兼容）

我在读：

*   [http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Safe_bool](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Safe_bool)
*   ( [http://www.artima.com/cppsource/safebool.html](http://www.artima.com/cppsource/safebool.html) )
*   [C++11 中的安全布尔成语是否已过时？](https://stackoverflow.com/questions/6242768/is-the-safe-bool-idiom-obsolete-in-c11)
*   [安全布尔成语和显式运算符布尔之间的不兼容性](https://stackoverflow.com/questions/9383282/incompatibilities-between-safe-bool-idiom-and-explicit-operator-bool)
*   [boost中的安全布尔成语？](https://stackoverflow.com/questions/11781584/safe-bool-idiom-in-boost)
*   提升源代码...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T10:53:48.160

`void*`有问题，因为它是在某些情况下不打算使用的有效转换序列。许多人在 C++03 中使用有时称为“[安全布尔惯用语](http://www.artima.com/cppsource/safebool.html)”，其中您有一个包含私有类型的本地成员函数指针类型，因此没有人可以在您的类之外拥有它的实例。但是，您可以返回它并至少检查真/假。

当您使用 C++11 时，`explicit operator bool`这是要走的路，因为它主要是为这些情况而发明的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T15:49:49.050

我印象深刻的是**`explicit_cast<T>`**，*[Imperfect C++: Practical Solutions [...]](https://rads.stackoverflow.com/amzn/click/com/0321228774)*没有被提及。这个概念非常简单——你设置一个伪关键字，它实际上是一个模板类，实现了你想要的转换。我一直在我[自己的 C++ backports 库](http://ryan.gulix.cl/fossil.cgi/cxxomfort)中使用它，没有任何重要问题。

```
class MyClass {
  ...implementation
  operator explicit_cast<bool> () const { 
      (return a bool somehow)
  }
}; 
```

您可以像预期的那样使用伪关键字：

```
MyClass value;
...
if ( explicit_cast<bool>(myobject) )  {
  do something
} else {
  do something else
}
... 
```

最棒的是，这个解决方案可以完美地映射到`explicit operator`C++11 中的本机，从而基本上实现零开销和本机语法。因此，它也比试图弄清楚是否调用“isset”、“is_set”、“is_Set”、“isSet”等更通用......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:10:43.013

大多数时候，不应使用隐式转换，即使用`operator bool()`代码中的表达式。

当您希望能够在`if`语句中使用类的实例时，您通常会创建一个隐式转换，但会创建一个成员函数原型的签名，您将指向一个无操作私有函数或依赖于 NULL国家。

你也会经常超负荷`bool operator!() const`上课。由于这将使用与隐式转换相同的逻辑，因此您通常会根据另一个来实现一个。

就像是：

```
private:
    struct MyPrivateType {};
    void MyPrivateFunc( MyPrivateType ) {}
public:
    typedef void (&iterator::*)( MyPrivateType ) bool_func;

    operator bool_func() const
    {
        return operator!() ? static_cast<bool_func>(0) : MyPrivateFunc;
    } 
```

没有人可以调用您从指针返回的函数，因为它需要一个 MyPrivateType，而且他们无法获得一个，因为它是私有的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T01:56:41.510

感谢您的所有评论/答案/贡献。在这里，我将网上找到的不同想法和其他想法融合在一起（我阅读了很多文档和源代码）。

* * *

# 检查价值存在

## 1.正如[@j_random_hacker](https://stackoverflow.com/users/47984/j-random-hacker)`bool isSet()`所指出的

最合乎逻辑的方式。源代码（库和应用程序）都是初学者可以理解的。而这符合[KISS原则](http://en.wikipedia.org/wiki/KISS_principle)。此外，这可以移植到其他编程语言，如 Java ......

```
Library:               |    Application:
                       |
struct iterator        |
{                      |
  bool isSet() const   |   if (it.isSet())
  {                    |   {
    return p;          |       int v = it.get();
  }                    |       //get() may also call isSet()
                       |       
  int get() const      |       //continue processing
  {                    |   }
     return *p;        |   else //value is not set
  }                    |   {
                       |       //do something else
  int* p;              |   }
};                     | 
```

如果函数`get()`不检查`isSet()`并且（应用程序的）开发人员忘记调用`isSet()`（之前`get()`），则应用程序代码可能会崩溃（分段错误）。

另一方面，如果`get()`函数调用则执行两次处理`isSet()`。`isSet()`然而，最近的编译器应该避免这种第二次不必要`isSet()`的处理。

## 2.返回我的一位同事提出的标志值或默认值

```
Library:               |    Application:
                       |
struct iterator        |   int i = it.get()
{                      |   if (i >= 0)
  int get() const      |   {   
  {                    |     unsigned short v = i;
    if(p) return *p;   |
    else  return -1;   |     //continue processing
  }                    |   }   
                       |   else //value is not set
  unsigned short* p;   |   {
};                     |     //do something else
                       |   } 
```

## [3\. @Matthieu M](https://stackoverflow.com/users/147192/matthieu-m)指出的抛出异常

有些人认为异常不利于二进制代码优化。但是，如果`throw exception`是内联的，最好的编译器可能会优化二进制代码，并且比 更好，
而且这种解决方案可能允许最佳优化的二进制代码，因为`isSet()`它被调用了两次。但这取决于编译器优化能力。

图书馆：

```
struct iterator
{
  bool get() const  
  { 
     if (isSet()) return *p; 
     else throw; 
  }

private:
  bool isSet() const  { return ....; }      

  ....
}; 
```

应用：

```
int value;
try
{
   value = it.get();
}
catch (...)
{
   value = 0; // default value
} 
```

## 4.使用`operator explicit_cast<bool> () const`

请参阅写得很好[的路易斯的回答](https://stackoverflow.com/a/20100483/938111)。

## 5.用`operator`写优雅`if(it)`

[使用C++11 中引入的显式转换运算符](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_conversion_operators)可以很好地实现此解决方案。

图书馆：

```
struct iterator
{
  explicit operator bool() const  { return ....; }

  ....
}; 
```

应用：

```
int value;
if (it)      //very elegant C++ fashion
{
   value = it.get();
}
else
{
   value = 0; // default value
} 
```

但是，我们仍处于 2012 年，当前的源代码必须与编译器兼容，而不支持*显式转换运算符*。在这些编译器上，年复一年地实现了不同的可能性。我将在下一章介绍所有这些内容。

* * *

# `if(it)`在 C++11 之前启用语句

本章的源代码灵感来自[Bjarne Stroustrup](http://en.wikipedia.org/wiki/Bjarne_Stroustrup)在 2004 年编写的《 [More C++ idioms 》一书，更具体地说，是](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms)[@PlasmaHH](https://stackoverflow.com/a/13193809/938111)指出的[The Safe Bool Idiom](http://www.artima.com/cppsource/safebool.html)部分。

## 1\. 隐含的`operator bool`

当`explicit`不可用时，我们可以只使用*隐式转换运算符*。

图书馆：

```
struct iterator
{
  operator bool() const  { return ....; } //implicit conversion

  ....
}; 
```

应用：

```
int value;
if (it)      //this works very well!
{
   value = it.get();
}
else
{
   value = 0; // default value
}

// But these other instructions are also correct :(
int integer = it;   //convert it to bool, then convert bool to int
if (-6.7 < it)      //.................., then convert bool to double, and compare
  it << 1; 
```

## 2.`operator!`

这是[`boost::thread`](http://www.boost.org/doc/libs/1_51_0/boost/thread/locks.hpp)(v1.51) 中使用的解决方案，作为for `explicit operator bool()`、[`unique_lock`](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.locks.unique_lock.explicit_bool_conversion)和的解决方法。[`shared_lock`](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.locks.shared_lock.explicit_bool_conversion)[`upgrade_lock`](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.locks.upgrade_lock.explicit_bool_conversion)[`upgrade_to_unique_lock`](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.locks.upgrade_to_unique.explicit_bool_conversion)

图书馆：

```
struct iterator
{
  bool operator!() const  { return ....; }

  ....
}; 
```

应用：

```
int value;

if (!!it)      // !! looks strange for many developers
{
   value = it.get();
}
else
{
   value = 0; // default value
}

if (it)    //ERROR: could not convert ‘it’ from ‘iterator’ to ‘bool’
{
   value = it.get();
} 
```

## 3.`operator void*`

这是 STL 流使用的解决方案。例如参考文件[bits/basic_ios.h](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.4/a01065.html#l00103) ( `std::basic_ios`)。

图书馆：

```
struct iterator
{
  operator void*() const  { return ....; }

  ....
}; 
```

应用：

```
int value;
if (it)      //this works very well!
{
   value = it.get();
}
else
{
   value = 0; // default value
}

// But these other instructions are also correct :(
delete it;  //just a warning: deleting 'void*' is undefined
if (it > std::cin) //both are converted to void*
  void* r = it; 
```

## 4.隐式转换为未定义的嵌套`class`

该解决方案由[Don Box](http://en.wikipedia.org/wiki/Don_Box)在 1996 年提出。

图书馆：

```
struct iterator
{
private:
  class nested; //just a forward declaration (no definition)
  int* v_;
public:
  operator nested*() const  { return v_ ? (nested*)this : 0; }
}; 
```

应用：

```
int value;
if (it)      //this works very well!
{
   value = it.get();
}
else
{
   value = 0; // default value
}

// But these other instructions are also correct :(
iterator it2; 
if (it < it2) 
  int i = (it == it2); 
```

## 5\. [@CashCow](https://stackoverflow.com/a/13194059/938111)`bool`提出的安全成语

[Bjarne Stroustrup](http://en.wikipedia.org/wiki/Bjarne_Stroustrup)提出了没有缺点的[最佳解决方案。](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Safe_bool#Solution_and_Sample_Code)下面是简化版。

图书馆：

```
struct iterator
{
private:
  typedef bool (iterator::*bool_type)() const;
  bool private_() const {}
  int* v_;

public:
  operator bool_type() const  { return v_ ? &iterator::private_ : 0; }
};

//forbids it1 == it2
template <typename T>
bool operator == (const iterator& it,const T& t) { return it.private_(); }

//forbids it1 != it2
template <typename T> 
bool operator != (const iterator& it,const T& t) { return ! (it == t); } 
```

应用：

```
int value;
if (it)      //this works very well!
{
   value = it.get();
}
else
{
   value = 0; // default value
}

// All other instructions fail to compile
iterator it2;
if (it >  it2)  ;  //ERROR:  no match for ‘operator>’ in ‘it > it2’
if (it == it2)  ;  //ERROR: ‘bool iterator::private_() const’ is private
if (it != it2)  ;  //same error 
```

## 6.可重复使用的安全`bool`成语

这要复杂得多，请参阅[Wikibooks](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Safe_bool)获取源代码。

图书馆：

```
struct iterator : safe_bool <iterator> //I do not want virtual functions
{
   bool boolean_test() const  { return ....; }

   ....
}; 
```

最近的 STL 和 boost 提供设施。一些例子：

*   GNU STL --> 查看文件 tr1/functional 和 exception_ptr.h
*   每个 Boost 组件都使用自己的`safe_bool`：
    *   Spirit --> 查看文件 spirit/include/classic_safe_bool.hpp 和 spirit/home/classic/core/safe_bool.hpp
    *   IOstream --> 查看文件 iostreams/device/mapped_file.hpp
    *   参数 --> 参数/aux_/maybe.hpp
    *   选修的
    *   功能
    *   范围
    *   逻辑（三元组）

但是 Matthew Wilson 在他的《[不完美的 C++](http://synesis.com.au/publishing/imperfect/cpp/) 》一书中说，这`safe_bool`可能会导致对未实现[Empty Base Optimization](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Empty_Base_Optimization)的编译器的大小惩罚。尽管大多数现代编译器在单继承方面都会这样做，但多继承可能会造成大小损失。**

# vim - Vim supertab 和 jedi-vim

> ID：13193768
> 
> 赞同：5
> 
> 时间：2012-11-02T10:51:05.503
> 
> 标签：vim, plugins, supertab, python-jedi, jedi-vim

作为[如何检查 SuperTab 和 jedi-vim 是否已激活？](https://stackoverflow.com/questions/13179582/how-to-check-if-supertab-and-jedi-vim-is-activated)并且按照 Ingo Karkat 的提议做了。现在我想知道是什么坏了以及如何修复它。

这是输出：

```
:verbose imap <tab>
i  <Tab>         <Plug>SuperTabForward
    Last set from ~/.vim/bundle/supertab/plugin/supertab.vim 
```

在我看来没问题，而且...

```
:scriptnames
  1: /etc/vimrc
  2: /usr/share/vim/vim72/syntax/syntax.vim
  3: /usr/share/vim/vim72/syntax/synload.vim
  4: /usr/share/vim/vim72/syntax/syncolor.vim
  5: /usr/share/vim/vim72/filetype.vim
  6: /usr/share/vim/vimfiles/ftdetect/puppet.vim
  7: /usr/share/vim/vim72/ftplugin.vim
  8: /home/johannesw/.vimrc
  9: /usr/share/vim/vim72/ftoff.vim
 10: /home/johannesw/.vim/bundle/vundle/autoload/vundle.vim
 11: /home/johannesw/.vim/bundle/vundle/autoload/vundle/config.vim
 12: /usr/share/vim/vim72/indent.vim
 13: /usr/share/vim/vim72/syntax/nosyntax.vim
 14: /home/johannesw/.vim/bundle/vim-fugitive/plugin/fugitive.vim
 15: /home/johannesw/.vim/bundle/vim-easymotion/plugin/EasyMotion.vim
 16: /home/johannesw/.vim/bundle/vim-easymotion/autoload/EasyMotion.vim
 17: /home/johannesw/.vim/bundle/vim-rails/plugin/rails.vim
 18: /home/johannesw/.vim/bundle/L9/plugin/l9.vim
 19: /home/johannesw/.vim/bundle/L9/autoload/l9.vim
 20: /home/johannesw/.vim/bundle/FuzzyFinder/plugin/fuf.vim
 21: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf.vim
 22: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/buffer.vim
 23: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/file.vim
 24: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/coveragefile.vim
 25: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/dir.vim
 26: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/bookmarkfile.vim
 27: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/bookmarkdir.vim
 28: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/tag.vim
 29: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/buffertag.vim
 30: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/taggedfile.vim
 31: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/jumplist.vim
 32: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/changelist.vim
 33: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/quickfix.vim
 34: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/line.vim
 35: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/help.vim
 36: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/givenfile.vim
 37: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/givendir.vim
 38: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/givencmd.vim
 39: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/callbackfile.vim
 40: /home/johannesw/.vim/bundle/FuzzyFinder/autoload/fuf/callbackitem.vim
 41: /home/johannesw/.vim/bundle/command-t/plugin/command-t.vim
 42: /home/johannesw/.vim/bundle/supertab/plugin/supertab.vim
 43: /home/johannesw/.vim/bundle/jedi-vim/plugin/jedi.vim
 44: /home/johannesw/.vim/bundle/jedi-vim/autoload/jedi.vim
 45: /usr/share/vim/vim72/plugin/filetype.vim
 46: /usr/share/vim/vim72/plugin/getscriptPlugin.vim
 47: /usr/share/vim/vim72/plugin/gzip.vim
 48: /usr/share/vim/vim72/plugin/matchparen.vim
 49: /usr/share/vim/vim72/plugin/netrwPlugin.vim
 50: /usr/share/vim/vim72/plugin/rrhelper.vim
 51: /usr/share/vim/vim72/plugin/spellfile.vim
 52: /usr/share/vim/vim72/plugin/tarPlugin.vim
 53: /usr/share/vim/vim72/plugin/tohtml.vim
 54: /usr/share/vim/vim72/plugin/vimballPlugin.vim
 55: /usr/share/vim/vim72/plugin/zipPlugin.vim
 56: /home/johannesw/.vim/bundle/vim-flake8/ftplugin/python_flake8.vim
 57: /home/johannesw/.vim/bundle/jedi-vim/ftplugin/python/jedi.vim
 58: /usr/share/vim/vim72/ftplugin/python.vim
 59: /usr/share/vim/vim72/indent/python.vim
 60: /usr/share/vim/vim72/syntax/python.vim
 61: /home/johannesw/.vim/bundle/jedi-vim/after/syntax/python.vim
 62: /home/johannesw/.vimrc.python 
```

看起来还不错。但是（不知道你是否应该能够做到这一点，但是）

```
:SuperTabForward
E492: Not an editor command: SuperTabForward 
```

感觉不太OK。这是我的.vimrc：

```
 " --- 8< --- https://github.com/gmarik/vundle 
set nocompatible               " be iMproved
filetype off                   " required!

set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

" let Vundle manage Vundle
" required! 
Bundle 'gmarik/vundle'

" My Bundles here:
"
" original repos on github
Bundle 'tpope/vim-fugitive'
Bundle 'Lokaltog/vim-easymotion'
Bundle 'rstacruz/sparkup', {'rtp': 'vim/'}
Bundle 'tpope/vim-rails.git'
" vim-scripts repos
Bundle 'L9'
Bundle 'FuzzyFinder'
" non github repos
Bundle 'git://git.wincent.com/command-t.git'
" ...

filetype plugin indent on     " required!
"
" Brief help
" :BundleList          - list configured bundles
" :BundleInstall(!)    - install(update) bundles
" :BundleSearch(!) foo - search(or refresh cache first) for foo
" :BundleClean(!)      - confirm(or auto-approve) removal of unused bundles
"
" see :h vundle for more details or wiki for FAQ
" NOTE: comments after Bundle command are not allowed..

" own stuff below

""" More Bundles
Bundle 'nvie/vim-flake8'
Bundle 'ervandew/supertab'
Bundle 'davidhalter/jedi-vim'

let mapleader=" "
set number
set paste
set foldmethod=indent
set foldlevel=99
set tabstop=4
set backupdir=~/.vim/backup
set directory=~/.vim/backup
set history=1000
set wildmode=list:longest
set ruler
" set completeopt=menuone,longest,preview
set completeopt=menuone,longest,preview
syntax on                           " syntax highlighing
"terminal title
set title
" searching
set ignorecase
set smartcase
" scrolling margin
set scrolloff=3
" Intuitive backspacing in insert mode
set backspace=indent,eol,start
" Highlight search terms...
set hlsearch
" ...dynamically as they are typed.
set incsearch

" Vertical Split : Ctrl+w + v  Horizontal Split: Ctrl+w + s
" Close current windows: Ctrl+w + q

" move about splits
map <c-j> <c-w>j
map <c-k> <c-w>k
map <c-l> <c-w>l
map <c-h> <c-w>h
    if !exists("autocommands_loaded")
  let autocommands_loaded = 1
  autocmd BufRead,BufNewFile,FileReadPost *.py source ~/.vimrc.python
endif

""" ack for searching
nmap <leader>a <Esc>:Ack!

""" keymappings
let g:SuperTabMappingForward = '<tab>' 
```

和我的 ~/.vimrc.python

```
set tw=78 ts=4 sw=4 sta et sts=4 ai

" More syntax highlighting.
let python_highlight_all = 1

" Smart indenting
set smartindent cinwords=if,elif,else,for,while,try,except,finally,def,class

highlight WhitespaceEOL ctermbg=red guibg=red
match WhitespaceEOL /\s\+$/

""" python/supertab
au FileType python set omnifunc=pythoncomplete#Complete
let g:SuperTabDefaultCompletionType = "context"
set completeopt=menuone,longest,preview

""" python/rope
map <leader>j :RopeGotoDefinition<CR>
map <leader>r :RopeRename<CR>

let g:jedi#popup_on_dot = 1
let g:jedi#use_tabs_not_buffers = 1 
```

...这是“vim --version”的输出：

```
 VIM - Vi IMproved 7.2 (2008 Aug 9, compiled Apr  5 2012 10:17:30)
Included patches: 1-411
Modified by <bugzilla@redhat.com>
Compiled by <bugzilla@redhat.com>
Huge version without GUI.  Features included (+) or not (-):
+arabic +autocmd -balloon_eval -browse ++builtin_terms +byte_offset +cindent 
-clientserver -clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
+cryptv +cscope +cursorshape +dialog_con +diff +digraphs -dnd -ebcdic 
+emacs_tags +eval +ex_extra +extra_search +farsi +file_in_path +find_in_path 
+float +folding -footer +fork() +gettext -hangul_input +iconv +insert_expand 
+jumplist +keymap +langmap +libcall +linebreak +lispindent +listcmds +localmap 
+menu +mksession +modify_fname +mouse -mouseshape +mouse_dec +mouse_gpm 
-mouse_jsbterm +mouse_netterm -mouse_sysmouse +mouse_xterm +multi_byte 
+multi_lang -mzscheme -netbeans_intg -osfiletype +path_extra +perl +postscript 
+printer +profile +python +quickfix +reltime +rightleft -ruby +scrollbind 
+signs +smartindent -sniff +startuptime +statusline -sun_workshop +syntax 
+tag_binary +tag_old_static -tag_any_white -tcl +terminfo +termresponse 
+textobjects +title -toolbar +user_commands +vertsplit +virtualedit +visual 
+visualextra +viminfo +vreplace +wildignore +wildmenu +windows +writebackup 
-X11 -xfontset -xim -xsmp -xterm_clipboard -xterm_save 
   system vimrc file: "/etc/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H     -O2 -g -pipe -Wall  -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64  -D_FORTIFY_SOURCE=1    -D_REENTRANT -D_GNU_SOURCE  -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/lib64/perl5/CORE  -I/usr/include/python2.6 -pthread    
Linking: gcc   -Wl,-E -Wl,-rpath,/usr/lib64/perl5/CORE   -L/usr/local/lib -o vim       -lselinux  -lncurses -lacl -lgpm   -Wl,-E -Wl,-rpath,/usr/lib64/perl5/CORE  -fstack-protector  -L/usr/lib64/perl5/CORE -lperl -lresolv -lutil -lc -L/usr/lib64/python2.6/config -lpython2.6 -lutil -lm -Xlinker -export-dynamic 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:08:18.487

我怀疑这条线： `au FileType python set omnifunc=pythoncomplete#Complete`

只需将其从您的 vimrc 中删除即可。

如果这没有帮助，请发布`:set omnifunc`.

我也建议移除绳索。我不知道它是否与 Jedi 配合得很好，至少键映射是重叠的。

# sql - EF 生成的 SQL 查询返回错误的结果

> ID：13193770
> 
> 赞同：1
> 
> 时间：2012-11-02T10:51:08.973
> 
> 标签：sql, entity-framework

我想在特定日期进行过滤。由于我使用的控件，我还可以过滤一系列日期，但是当我过滤单个日期时，它也应该可以工作，因此我具有完全的灵活性。

当我在 2004 年 11 月 24 日过滤时，我的代码使用实体框架生成以下查询。但是不知何故，查询返回了 2004-11-25 而不是 2004-11-24 的结果。

这个查询有什么问题？

```
SELECT TOP (26) 
[Filter1].[Id] AS [Id], 
[Filter1].[AliquotId] AS [AliquotId], 
[Filter1].[ScientificStudyId] AS [ScientificStudyId], 
[Filter1].[ExpectedSpecimenId] AS [ExpectedSpecimenId], 
[Filter1].[ExpectedAliquotId] AS [ExpectedAliquotId], 
[Filter1].[VisitId] AS [VisitId], 
[Filter1].[BoxId] AS [BoxId], 
[Filter1].[ParticipantId] AS [ParticipantId], 
[Filter1].[Product] AS [Product], 
[Filter1].[BodyMaterial] AS [BodyMaterial], 
[Filter1].[AliquotNr] AS [AliquotNr], 
[Filter1].[ReservationName] AS [ReservationName], 
[Filter1].[Visit] AS [Visit], 
[Filter1].[Win32Color] AS [Win32Color], 
[Filter1].[Position] AS [Position], 
[Filter1].[Barcode] AS [Barcode], 
[Filter1].[Temperature] AS [Temperature], 
[Filter1].[DivergentStorageTemperature] AS [DivergentStorageTemperature], 
[Filter1].[BoxName] AS [BoxName], 
[Filter1].[CollectionDate] AS [CollectionDate], 
[Filter1].[Positioned] AS [Positioned], 
[Filter1].[CheckedOut] AS [CheckedOut], 
[Filter1].[CheckinDate] AS [CheckinDate], 
[Filter1].[CheckoutDate] AS [CheckoutDate], 
[Filter1].[LabelsPrinted] AS [LabelsPrinted], 
[Filter1].[ParticipantNr] AS [ParticipantNr], 
[Filter1].[Specimen] AS [Specimen], 
[Filter1].[ContainerType] AS [ContainerType], 
[Filter1].[ContainerTypeId] AS [ContainerTypeId], 
[Filter1].[Quantity] AS [Quantity], 
[Filter1].[Unit] AS [Unit], 
[Filter1].[QuantityUnit] AS [QuantityUnit], 
[Filter1].[StudyVersion] AS [StudyVersion], 
[Filter1].[ThawCount] AS [ThawCount], 
[Filter1].[Sop] AS [Sop], 
[Filter1].[NrOfRemarks] AS [NrOfRemarks], 
[Filter1].[RemarkSummary] AS [RemarkSummary]
FROM ( SELECT [Extent1].[Id] AS [Id], [Extent1].[AliquotId] AS [AliquotId], [Extent1]. [ScientificStudyId] AS [ScientificStudyId], [Extent1].[ExpectedSpecimenId] AS [ExpectedSpecimenId], [Extent1].[ExpectedAliquotId] AS [ExpectedAliquotId], [Extent1].[VisitId] AS [VisitId], [Extent1].[BoxId] AS [BoxId], [Extent1].[ParticipantId] AS [ParticipantId], [Extent1].[Product] AS [Product], [Extent1].[BodyMaterial] AS [BodyMaterial], [Extent1].[AliquotNr] AS [AliquotNr], [Extent1].[ReservationName] AS [ReservationName], [Extent1].[Visit] AS [Visit], [Extent1].[Win32Color] AS [Win32Color], [Extent1].[Position] AS [Position], [Extent1].[Barcode] AS [Barcode], [Extent1].[Temperature] AS [Temperature], [Extent1].[DivergentStorageTemperature] AS [DivergentStorageTemperature], [Extent1].[BoxName] AS [BoxName], [Extent1].[CollectionDate] AS [CollectionDate], [Extent1].[Positioned] AS [Positioned], [Extent1].[CheckedOut] AS [CheckedOut], [Extent1].[CheckinDate] AS [CheckinDate], [Extent1].[CheckoutDate] AS [CheckoutDate], [Extent1].[LabelsPrinted] AS [LabelsPrinted], [Extent1].[ParticipantNr] AS [ParticipantNr], [Extent1].[Specimen] AS [Specimen], [Extent1].[ContainerType] AS [ContainerType], [Extent1].[ContainerTypeId] AS [ContainerTypeId], [Extent1].[Quantity] AS [Quantity], [Extent1].[Unit] AS [Unit], [Extent1].[QuantityUnit] AS [QuantityUnit], [Extent1].[StudyVersion] AS [StudyVersion], [Extent1].[ThawCount] AS [ThawCount], [Extent1].[Sop] AS [Sop], [Extent1].[NrOfRemarks] AS [NrOfRemarks], [Extent1].[RemarkSummary] AS [RemarkSummary], row_number() OVER (ORDER BY [Extent1].[CollectionDate] ASC) AS [row_number]
FROM [dbo].[ClaimedAliquotPositionsReadModels] AS [Extent1]
WHERE (cast('0ebebae6-594d-4be0-ac8b-a078013f1370' as uniqueidentifier) = [Extent1].[ScientificStudyId])
AND ([Extent1].[CheckoutDate] >= convert(datetime2, '2004-11-24 00:00:00.0000000', 121))
AND ([Extent1].[CheckoutDate] < convert(datetime2, '2004-11-25 00:00:00.0000000', 121))
)  AS [Filter1]
WHERE [Filter1].[row_number] > 0
ORDER BY [Filter1].[CollectionDate] ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:07:00.977

通过像这样解析我的输入来解决它。

```
DateTime.TryParse(splitted[0], CultureInfo.InvariantCulture, DateTimeStyles.AssumeLocal | DateTimeStyles.AdjustToUniversal, out date1) 
```

而不是

```
DateTime.TryParse(splitted[0], out date1) 
```

这导致以下 where 子句

```
WHERE (cast('0ebebae6-594d-4be0-ac8b-a078013f1370' as uniqueidentifier) = [Extent1].[ScientificStudyId])
AND ([Extent1].[CheckoutDate] >= convert(datetime2, '2004-11-23 23:00:00.0000000', 121))
AND ([Extent1].[CheckoutDate] < convert(datetime2, '2004-11-24 23:00:00.0000000', 121)) 
```

生成的 sql 比提供的值早 1 天。所以`2004-11-24`变成`2004-11-23`

# asp.net - 我的页面高度导致 gridview 出现问题

> ID：13193772
> 
> 赞同：0
> 
> 时间：2012-11-02T10:51:11.003
> 
> 标签：asp.net, css

当我的gridview 的数据变大时，即当页面大小增加到10 时，gridview 会超出主页面区域。图片清楚地描述了我的话。有人可以帮我解决这个问题吗？谢谢。![在此处输入图像描述](../Images/7900e6bf707fa372273ba23e3140c757.png)

```
 my CSS:

        body
        {
            margin-top: 0px;
            background-image: url('../Images/bg_gradient.png');
            background-repeat: repeat-x;
            background-color: #c6dee8;
        }

        #wrapper
        {
            border: 0px solid green;
            width: 980px;
            margin-right: auto;
            margin-left: auto;
        }

            #main
        {
            width: 978px;
            min-height: 750px;
            max-height: 1000px;
            overflow: auto;
            border: 1px solid black;
        }

        #leftContent
        {
            width: 180px;
            min-height: 750px;
            max-height: 1000px;
            float: left;
            border-right: 1px solid black;
        }
#recordDisplaydiv
{
    padding-top: 50px;
}

My Markup Code:

        <div id="recordDisplaydiv">
                <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                    <ContentTemplate>
                        <asp:GridView ID="gvContract" runat="server" AutoGenerateColumns="False" DataKeyNames="ContractID"
                            CssClass="mGrid" OnPageIndexChanging="gvContract_PageIndexChanging" OnRowCommand="gvContract_RowCommand"
                            EmptyDataText="No Record Exist" PageSize="10" AllowPaging="true">
                            <AlternatingRowStyle CssClass="alt" />
                            <Columns>
                                <asp:BoundField DataField="KeyWinCountNumber" HeaderText="KeyWin Count#" />
                                <asp:BoundField DataField="ItemName" HeaderText="Item" />
                                <asp:BoundField DataField="BrandName" HeaderText="Brand" />
                                <asp:BoundField DataField="CountName" HeaderText="Count" />
                                <asp:BoundField DataField="SellerName" HeaderText="Seller" />
                                <asp:BoundField DataField="BuyerName" HeaderText="Buyer" />
                                <asp:BoundField DataField="ContractNumber" HeaderText="Contract#" />
                                <asp:BoundField DataField="ContractDate" HeaderText="Contract Date" />
                                <asp:BoundField DataField="CountryFromName" HeaderText="Country From" />
                                <asp:BoundField DataField="CountryToName" HeaderText="Country To" />
                                <asp:BoundField DataField="UnitName" HeaderText="Unit Name" />
                                <asp:BoundField DataField="TQty" HeaderText="Total Qty" />
                                <asp:BoundField DataField="Vans" HeaderText="Vans" />
                                <asp:BoundField DataField="UnitPrice" HeaderText="Unit Price" />
                                <asp:BoundField DataField="TAmount" HeaderText="Total Amount" />
                                <asp:TemplateField HeaderText="Delete">
                                    <ItemTemplate>
                                        <asp:ImageButton ID="imgDelete" runat="server" ImageUrl='<%# isDelete_img(Session["isAdmin"].ToString()) %>'
                                            CommandName="DeleteRecord" Enabled='<%# isDelete(Session["isAdmin"].ToString()) %>'
                                            CommandArgument='<%# Eval("ContractID") %>' AlternateText="DeleteRecord" OnClientClick="return confirm_delete();"
                                            Style='<%# delete_style(Session["isAdmin"].ToString()) %>' />
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Edit">
                                    <ItemTemplate>
                                        <asp:ImageButton ID="imgEdit" runat="server" ImageUrl="~/Images/edit.png" CommandName="EditRecord"
                                            CommandArgument='<%# Eval("ContractID") %>' AlternateText="EditRecord" />
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                            <PagerStyle CssClass="pgr" />
                        </asp:GridView>
                    </ContentTemplate>
                </asp:UpdatePanel>
                <div id="ContractbtnExportdiv">
                    <asp:Button ID="btnExport" runat="server" CssClass="btnExportdiv" OnClick="btnExport_Click" />
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:53:49.823

将gridview放在可滚动的div中，这将解决问题

```
<div style="width:300px;height:250px;overflow:auto;">
  <gridview>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:01:17.420

使用`overflow-y:auto;`属性来解决问题。

```
div.classname {
  overflow-y:auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:07:50.433

尝试删除：

```
max-height: 1000px; 
```

从你的#main 和#leftContent div

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T11:13:57.397

使用 overflow-y 作为 auto 并`maximum-height`为两个面板删除，即 for`#main`和`#leftContent`并将高度作为 100% 作为 auto 应用到`#leftContent`. 这可能会有所帮助。

# java - 如何在 flex 中将 java ArrayList 值放入 Datgrid？

> ID：13193774
> 
> 赞同：0
> 
> 时间：2012-11-02T10:51:19.097
> 
> 标签：java, apache-flex, blazeds

在我的示例应用程序（java+Flex）Java 类方法中，例如..

```
public class Sample
{

public ArrayList method1()
{
ArrayList al =new ArrayList();
al.add("one");
al.add("TWO");
} 
```

在 Flex 侧连接 Blazeds 连接......一切都已完美完成，我`MXML file code`的是

```
 public var userService:Sample = new Sample();
            protected function init_Call(event:FlexEvent):void
            {
                var rpcSearchResult:AsyncToken = userService.method1();
                rpcSearchResult.addResponder(new mx.rpc.Responder(success, failure));
            }
            [Bindable]public var ac:ArrayCollection = new ArrayCollection();

            public function success(event:ResultEvent):void
            {
                ac=event.result as ArrayCollection;
                Alert.show("Result : "+ac.getItemAt(0,0));

            }
            public function failure(event:FaultEvent):void
            {

                Alert.show("This is Fault Event");
            } 
```

……

```
<s:DataGrid id="dataGrid" left="12" right="12" top="49" bottom="54" horizontalCenter="0"
                requestedRowCount="4" verticalCenter="-3" dataProvider="{ac}">
    <s:columns>
        <s:ArrayList>
        <s:GridColumn dataField="one" headerText="FirstValue"></s:GridColumn>
        <s:GridColumn dataField="two" headerText="SecondValue"></s:GridColumn>

        </s:ArrayList>
    </s:columns>

</s:DataGrid> 
```

但我在 DataGrid 上没有得到任何值，但 ResultEvent 函数 Alert 正确显示“一”、“二”值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:33:56.903

我怀疑问题可能出在您分配给**Datagrid**的变量中。尝试将“ **ac** ”设置为**[BINDABLE]**或将您的函数成功替换为以下内容：

```
public function success(event:ResultEvent):void
        {
            datagrid.dataProvider = event.result;
        } 
```

我希望它会有所帮助。

# linq - Linq2Rest 身份验证 Asp.net WebApi

> ID：13193784
> 
> 赞同：1
> 
> 时间：2012-11-02T10:51:49.090
> 
> 标签：linq, authentication, asp.net-mvc-4, asp.net-web-api

我正在使用具有表单授权的 Asp.net WebApi。我已经成功地创建了对控制器的 POST 请求，该请求通过使用首先进入授权控制器的 HttpClient 使用 [Authorize] 属性进行保护，授权控制器将 cookie 存储到它，客户端将其用于其他请求。对于 GET 请求，我想使用[Linq2Rest](http://nuget.org/packages/Linq2Rest "Linq2Rest")库，它使用 JsonRestClient，但我不知道如何使用它进行授权。我很惊讶我找不到关于该主题的任何问题或讨论。修改这个库的源代码是解决这个问题的唯一方法吗？

更新：我只使用通常的形式授权。这就是 GET 方法的样子

```
 [Authorize]
    [Queryable]
    public IQueryable<Invoice> GetInvoices()
    {
        return repository.GetInvoices();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:17:13.410

我创建了自己的 RestClient 来解决这个问题，不确定是否是最好的解决方案，但这似乎对我有用。这里 currentHttpClient 是已经拥有认证 cookie 的对象。

```
internal class PinJsonRestClient : JsonRestClient, IRestClient
{

    private readonly HttpClient currentHttpClient;

    public PinJsonRestClient(Uri uri) : base(uri)
    {
    }

    public PinJsonRestClient(Uri uri, HttpClient currentHttpClient) : base(uri)
    {
        this.currentHttpClient = currentHttpClient;
    }

    public new Stream Get(Uri uri)
    {
        var result = currentHttpClient.GetStreamAsync(uri).Result;
        return result;
    }
} 
```

# git - 为什么我想做 git rebase？

> ID：13193787
> 
> 赞同：17
> 
> 时间：2012-11-02T10:51:56.720
> 
> 标签：git, git-rebase

我见过很多人谈论`git rebase`它以及它的作用，例如[Hg: How to do a rebase like git's rebase](https://stackoverflow.com/questions/2672351/hg-how-to-do-a-rebase-like-gits-rebase)并且人们谈论它实现了什么（给出线性历史），例如这里[Git rebase 失去了历史，那么为什么要 rebase？](https://stackoverflow.com/questions/5250817/git-rebase-loses-history-then-why-rebase)但我无法理解你为什么要这样做。

返回并修改您的提交历史似乎是一笔**巨大的开支（这肯定涉及一些丑陋的合并与 n 路冲突）。**而且我可以想象它可能会非常误导的情况，（例如，如果两个人以不同的方式解决同一个问题，但历史并没有显示他们的工作是并行发生的；似乎也很容易引起批评和怨恨在一些高压编码环境中）。

您获得的是更容易理解但不正确的历史图表。是什么让这值得付出努力？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T11:01:42.060

Rebase 在推送单个提交或在短时间内（几小时或几分钟）开发的少量提交时最有用。

在推送到共享服务器之前，必须首先拉取同时提交到源的 HEAD 的提交——否则将创建非快进推送。这样做时，可以在合并 ( `git pull`) 或变基 ( `git pull --rebase`) 操作之间进行选择。合并选项虽然在技术上更具吸引力，但会创建额外的合并提交。对于小提交，每次更改出现两次提交实际上会降低历史*的*可读性，因为合并操作会分散提交消息的注意力。

在典型的共享开发树中，每个开发人员最终都会通过对`git pull; <resolve conflicts>; git push`. 如果他们使用`git pull`without `--rebase`，则会发生几乎*每个*提交最终都伴随着一个合并提交，即使没有真正进行并行开发。这从实际上是线性提交序列中创建了一个相互交织的历史。出于这个原因，对于`git pull --rebase`短期开发导致的小更改是一个更好的选择，而合并则保留用于集成长期存在的功能分支。

所有这些都适用于 rebase*本地*提交，或 rebase 由紧密联系的同事（坐在同一个房间）共享的短期功能分支。一旦提交被定期推送到其他分支，就**永远不**应该重新设置它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T11:12:30.233

执行变基通常不涉及比合并更多的冲突解决，因此与之相比的费用是最小的（实际上只是重播提交所需的时间）。

与大多数与 git 相关的事情一样，只有在知道*自己*在做什么以及*为什么*要这样做的情况下，才应该重新设置基准。以下是我重新定位的一些原因：

*   我一直在开发一个补丁系列，它没有触及任何同时在上游改变的组件。在这种情况下，合并提交不会包含任何有用的信息。
*   我即将在[GitHub 上](http://www.github.com)提交拉取请求，所需的合并提交将是很多工作。通过首先变基，我使上游所有者更容易处理拉取请求。当然我可以合并，但由于他们以前从未见过我的代码，这只会使补丁系列更难阅读。
*   我正在合并来自上游的更改，并且存在大量冲突。`git rebase`让我在提交时一次解决这些冲突，使其更容易理解，并在我进行时进行测试。如果我关心维护合并提交，我可以在之后返回到分支的非重新定位版本，将其与上游合并，然后使用针对重新定位版本的差异作为冲突解决合并提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-19T10:57:33.400

**TLDR：变基策略不值得努力。**

变基策略的唯一**好处**是线性历史，仅此而已。

现在问自己一个问题，你检查了多少次 git 历史来找出一些东西？你能用合并策略解决它吗？

我的回答几乎是从不，是的，合并策略不是很好，但已经足够好了。

但这里是变基策略的**成本**：

*   每次其他人将更改推送到主分支时，您都必须重新调整您的更改，这对 3 个开发人员来说很好，但对于更多开发人员来说，这会成为一个问题，添加到它等待管道构建并且合并任何东西都会变得很恐怖。
*   您一次只能将一个更改“合并”到主分支，所有其他更改必须首先重新设置基础并再次通过管道构建（额外延迟）。
*   必须为每个提交单独解决冲突，如果我知道我在下一次提交中更改了它，那么解决旧/过时提交的冲突对我来说是疯狂的。
*   如果你搞砸了 rebase，你会将所有修复添加到最后一次提交中，而所有旧的修复都会被破坏。另一种选择是重新开始一切。
*   你必须在 rebase 后强制推送到你的分支，如果你把它搞砸了，你可能会花很长时间扫描 reflog。
*   如果您的分支上有两个以上的提交，您可能会在变基之前将它们压缩以减少工作量，并且您会丢失宝贵的提交历史。

我都尝试过，当我比较利弊时，Rebase 策略不值得努力。

# ruby-on-rails - Ruby on Rails - 编码问题

> ID：13193794
> 
> 赞同：0
> 
> 时间：2012-11-02T10:52:30.110
> 
> 标签：ruby-on-rails, ruby, character-encoding

我正在运行一个 RoR 应用程序，它从一些使用 utf8_general_ci 作为排序规则的事件表中提取数据。

问题是我所有的页面都呈现这样的东西：

Atat�rk Stadi 11 月 2 日 20:00

到目前为止，我已经尝试过： - 更改 application.rb 中的编码

*   添加

    ```
    <meta charset="utf-8" /> 
    ```

*   添加

    ```
    content="text/html;charset=utf-8" 
    ```

*   上述标签的所有组合与所有可能适用于我们内容的相关编码。

文档类型是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我也尝试过 HTML5 和其他变体。

我还没有尝试过 iconv 解决方案，宁愿不必走那条路。

有谁知道如何解决这个问题？

谢谢！N。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:08:10.047

您的 config/database.yml 文件中有编码：utf8 吗？

# tfs - .pkgdef 文件注册表项 tfs 策略

> ID：13193796
> 
> 赞同：1
> 
> 时间：2012-11-02T10:52:42.680
> 
> 标签：tfs, registry, policy, tf-cli

`tfs`我为一个项目编写了一个策略插件`vsix`，该项目通过 pkgdef 文件编写注册表条目。到目前为止，我只有 registry-entry
`[$RootKey$\TeamFoundation\SourceControl\Checkin Policies]`，
但是当我想通过 tf.exe 使用它时，我还需要 entry
`[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\11.0\TeamFoundation\SourceControl\Checkin Policies]`。

是否也可以通过`pkgdef-file`或如何注册此条目来编写此条目？

# visual-studio-2010 - VS 2010+ 扩展：向项目添加过滤器

> ID：13193798
> 
> 赞同：0
> 
> 时间：2012-11-02T10:52:48.677
> 
> 标签：visual-studio-2010, vs-extensibility

我正在开发 VS 扩展，它必须通过过滤器重建指定目录的树结构，并将该目录中的现有文件添加到适当的过滤器。

如何通过代码将过滤器和现有文件添加到项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:04:06.513

通常 VS 2010 有一个单独的过滤器文件：YourProject.vcxproj.filters。你可以编写一个脚本来在这个文件中添加你想要的东西。但我不知道是否一切都会正常工作而没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:38:19.733

我找到了以下解决方案：

```
using Microsoft.VisualStudio.VCProjectEngine;
using Microsoft.VisualStudio.Shell.Interop;
//...
EnvDTE.DTE dte = (EnvDTE.DTE)Microsoft.VisualStudio.Shell.Package.GetGlobalService(typeof(SDTE));
VCProject prj = (VCProject)dte.Solution.Projects.Item(1).Object;
VCFilter filter = prj.AddFilter("Custom Filter");
filter.AddFile("D:\\path\\File.h");
prj.Save(); 
```

您还需要添加对 Microsoft.VisualStudio.VCProjectEngine 的引用。

# c# - 使用“动态”与“对象”的性能成本？

> ID：13193799
> 
> 赞同：23
> 
> 时间：2012-11-02T10:52:51.143
> 
> 标签：c#, .net, performance, dynamic, compiler-construction

在 .NET中使用`dynamic`vs的性能成本是多少？`object`

例如，我有一个接受任何类型参数的方法。例如

```
public void Foo(object obj)
{
} 
```

或者

```
public void Foo(dynamic obj)
{
} 
```

ILSpy 告诉我，当使用动态代码时，编译器必须插入一个代码块来处理动态。因此，我想知道是否建议使用动态代替对象，以及这种使用以性能为代价达到什么水平？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-02T10:56:56.383

这在很大程度上取决于确切的场景——但是内置了一层缓存，所以它并不像你想象的那么糟糕（它不会每次都进行反射）。它也可能因操作而异（例如，“提升”的可为空的 T 操作明显变慢）。你需要测量，但碰巧我在这里有一些时间来访问成员（财产），我在做[FastMember](http://marcgravell.blogspot.co.uk/2012/01/playing-with-your-member.html)时采取了这些时间：

```
Static C#: 14ms
Dynamic C#: 268ms
PropertyInfo: 8879ms (aka reflection)
PropertyDescriptor: 12847ms (aka data-binding)
TypeAccessor.Create: 73ms (aka FastMember)
ObjectAccessor.Create: 92ms (aka FastMember) 
```

警告：这些是针对可能不代表您的场景的单个测试。[此处显示](https://github.com/mgravell/fast-member/blob/master/FastMember.Tests/Program.cs)此代码

所以：**基于一个简单的测试**，比静态常规 C# 慢约 20 倍，但比反射快约 30 倍。

更新：有趣，看起来反射在 .NET 4.5 中变得更快：

```
Static C#: 13ms
Dynamic C#: 249ms
PropertyInfo: 2991ms
PropertyDescriptor: 6761ms
TypeAccessor.Create: 77ms
ObjectAccessor.Create: 94ms 
```

Here it is only about 12 times faster than reflection, because reflection got faster (not because dynamic got slower).

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-02T10:55:52.480

> 因此，我想知道是否建议使用动态代替对象，以及这种使用以性能为代价达到什么水平？

如果您不需要动态类型，请不要使用它。

如果您需要动态类型 - 例如，如果它避免了一些复杂的反射代码 - 然后使用它并测量性能成本。

成本在*很大程度上*取决于你在做什么。它几乎总是比静态类型代码慢，甚至可能等效，但是有*很多*因素会影响确切的成本。与性能问题一样，编写最干净（不一定是最短）的代码开始工作，测量性能，如果它不符合您的性能目标，请仔细优化（经常测量以检查您是否进入正确的方向）。

# jquery - jquery-ui-dialog-extra 与 jQuery-ui-1.9.1 一起使用时会出错

> ID：13193800
> 
> 赞同：0
> 
> 时间：2012-11-02T10:53:01.807
> 
> 标签：jquery

我正在使用 jQuery-ui-dialog-extra 将最小化/最大化/恢复按钮添加到标准 jQuery UI 对话框。当我使用 jQuery-ui-1.8.16 时，它运行完美。现在我已将 jQuery-ui 从 jQuery-ui-1.8.16 升级到 jQuery-ui-1.9.1 。

现在的问题是当我单击对话框的“最小化”按钮时，对话框被最小化。但是当我单击“最大化”按钮以恢复大小和位置时，对话框保持原样并且控制台上显示错误：`Uncaught Error: no such method '_generatePosition' for draggable widget instance`。

如需更多了解，请查看[http://jsfiddle.net/S4LzA/5/](http://jsfiddle.net/S4LzA/5/)

请让我知道如何解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:13:03.770

看起来`dialog-extra`正在尝试通过小部件桥调用（注意前导下划线）的内部`_generatePosition()`方法：`draggable`

```
self.uiDialog.draggable('_generatePosition') 
```

依赖内部方法可能会导致库升级时出现问题（因为内部方法可能会更改或消失），但这甚至不是问题所在。允许从增强元素调用方法的小部件桥首先不会将调用中继到内部方法。据我所知，该代码也不应该在 jQuery UI 1.8.16 中工作。

一种可能的解决方案是调用`_generatePosition()`小部件实例本身。尝试修改插件并将上面的代码更改为：

```
self.uiDialog.data("ui-draggable")._generatePosition(); 
```

# struts2 - 在struts 2中调用带有参数的方法？

> ID：13193803
> 
> 赞同：3
> 
> 时间：2012-11-02T10:53:13.003
> 
> 标签：struts2

我在 struts 2 动作类中有一个下面给出的方法；

```
 public String add(String boo){
//codes here
    } 
```

我想调用 add 方法。还有我的 struts.xml

```
<action name="Login" class="com.json.action.JsonAction" method="add">
        <param name="boo">boo</param>
                <result name="success">/success.jsp</result>
        </action> 
```

它会显示类似 java.lang.NoSuchMethodException: com.json.action.JsonAction.add() 的错误。如何调用 add 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:13:23.673

您不能使用参数声明操作方法。但是您可以使用 getter 和 setter 在您的操作类中创建变量。阅读 Struts2 [https://struts.apache.org/core-developers/action-configuration.html](https://struts.apache.org/core-developers/action-configuration.html)中的动作配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:45:56.773

Struts 动作没有参数并返回一个字符串。

你想要做的是在你的动作类中有一个带有 getter/setter 的 String boo。然后它将在您的方法中可用。如果您有默认拦截器堆栈（请参阅[http://struts.apache.org/2.2.3/docs/interceptors.html](http://struts.apache.org/2.2.3/docs/interceptors.html)），它将根据您的 struts.xml 配置自动填充“boo”。

# titanium - 如何在 Titanium 中为 Android 实现两指缩放

> ID：13193805
> 
> 赞同：3
> 
> 时间：2012-11-02T10:53:14.207
> 
> 标签：titanium, titanium-mobile

我将如何在 Titanium 中为 Android 实现两指缩放？

我是在 Titanium 中为 iPhone 做的，因为在 Titanium for iPhone 中有一个`pinch`事件和`zoomScal`属性可用`scroolView`:) 但这些不适用于 Android。:(

[Appcelerator 档案](http://developer.appcelerator.com/question/132500)中提供了针对 iPhone 相同问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T12:09:48.590

这是一篇旧帖子，但这个模块[Titan-android-pinchview](http://code.google.com/p/titanium-android-pinchview/)可能对某人有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:35:25.580

您必须包装`touchstart`、`touchmove`和`touchend`事件以在 Android 中模拟此行为。此外，由于许多 Android 设备不支持多点触控，因此您需要考虑这一点。

首先，您必须正确设置您的 scrollView，例如，由于 Android 没有`zoomScale`属性，您需要使用矩阵来模拟它。像这样：

```
var scrollView = Ti.UI.createScrollView({... Init here...});
var contentOfScrollView = Ti.UI.createView({
    width : //..bigger than scrollview,
    height : //..bigger than scrollview,
    transform : Ti.UI.create2DMatrix()
}); 
```

首先，我会尝试跟踪视图中所有活动的触摸对象。然后，如果您有两次触摸，则获取它们之间的距离并将其保存为原始缩放比例，由此您可以在用户移动时比较新的距离。如果有两个以上的触摸，这种方法就会失效，并且不是很健壮，因为它不能解释任何边缘情况，但它有时会起作用:-)

主要问题是 Titanium 不传递触摸的 ID，或者允许您获取所有触摸，因此很难跟踪您删除或添加触摸时哪个触摸是哪个触摸。

这是一个简单的代码示例，它受到我上面概述的影响，（我不会尝试跟踪哪个触摸是哪个），你将不得不摆弄它以使其更健壮，但我相信你可以接受它从这里：

```
var touches = [];
var zoomScale = 1.0;
var lastDistance = 0.0;
var wratio = contentOfScrollView.width / scrollView.width;
var hratio = contentOfScrollView.height / scrollView.height; 
```

现在让我们添加我们的监听器。

```
// Listeners
scrollview.addEventListener('touchstart' , function(e) {
    touches.push({x : e.x, y : e.y});
});
scrollview.addEventListener('touchmove' , function(e) {
    if(touches.length == 2 && distance > 0) {
        // Calculate distance between touches
        var dx = touches[1].x - touches[0].x;
        var dy = touches[1].y - touches[0].y;
        var distance = Math.sqrt(dx*dx+dy*dy);

        // Heres where you would do your scaling based on whatever your
        // use case is.  You could try something like this, tune it yourself though 
        scrollView.zoomScale = lastDistance - distance;

        // Now set the matrix of the content!
        contentOfScrollView.transform.scale(zoomScale*wratio, zoomScale*hratio);
        // Save for later
        lastDistance = distance;
    } else {
        // Reset everything
        lastDistance = 0.0;
    }
});
scrollview.addEventListener('touchend' , function(e) {
    touches.pop();
});
scrollview.addEventListener('touchcancel' , function(e) {
    touches.pop();
}); 
```

这不是一个完整的、健壮的或经过错误测试的实现，但我不能为您编写所有代码，请以此为起点进行试验。祝你好运！

# c - C 中的时钟：时间亮起

> ID：13193815
> 
> 赞同：3
> 
> 时间：2012-11-02T10:54:06.257
> 
> 标签：c, colors, clock

为了学校，我必须做一项作业，我现在忙了 3 周，但还没有走远。我们需要制作一个必须是圆形的时钟，并且需要点亮秒分和小时的颜色。因此，如果是凌晨 4 点 25 分，这些数字需要亮起。

这就是我现在所拥有的：

```
 #include <stdio.h>
   #include <time.h>
   #include <conio.h>
   #include <unistd.h>
   #include <stdlib.h>
   #include <windows.h>

    int csecs (int cseconds );

    void main (int sec, int min){
    printf("Hallo! Veel plezier met het bekijken van de tijd!");
    getch();
        while (sec)
            {
            time_t cseconds;
            cseconds = time (NULL);
            printf ("De Tijd: ");
            printf ("%d:", csecs( cseconds )/60/60%24+1);
            printf ("%d:", csecs( cseconds )/60%60 );
            printf ("%d", csecs( cseconds )%60 );

            Sleep(1000);
            system("cls");
        }

    }

    int csecs (int cseconds)
    {
        return cseconds;

    } 
```

谁能告诉我我怎么可能做到这一点？我不是要你做我的功课。我只是真的需要一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:12:50.933

好的，所以根据您的评论，听起来您正在使用 Windows，您真的只想设置颜色。这很容易。您需要 SetConsoleTextAttribute() 函数，这是一个非常简单的示例：

```
#include <stdio.h>
#include <Windows.h>
#include <string.h>

void main()
{
    printf("Hello\n");  // Print white text on black output
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_RED);
    printf("Hello Again!\n");  // Print Red text on black output
    getchar(); // Pause the program to admire the colors
} 
```

为了进一步突出显示，您还可以更改背景，您可以或 ( `|`) 一起使用标志以获得不同的颜色和不同的背景/前景。

所以如果你想在绿色背景上做红色文字（出于某种原因），你可以这样做：

```
FOREGROUND_RED | BACKGROUND_GREEN 
```

![在此处输入图像描述](../Images/f0ff41202803ef3add44c6d05f2f6b14.png)

我想这就是你真正想要的，现在你可以把它应用到你的时钟上，得到时间并突出颜色。

# java - 删除 PDF 中的 PDFID

> ID：13193820
> 
> 赞同：5
> 
> 时间：2012-11-02T10:54:11.930
> 
> 标签：java, pdf, itext

我使用 iText 将 xhtml 转换为 pdf。之后，我正在构建生成的 pdf 的 md5 校验和，以仅存储新的/更改的文件。

每个创建的文件都包含一个看起来像哈希的 PdfID0 和 PdfID1。

这些“哈希”是做什么用的？我怎样才能删除它们？

我使用 iText 包中的以下代码来更改元信息：

```
 com.lowagie.text.pdf.PdfReader reader = new PdfReader(pdfPath);

        com.lowagie.text.pdf.PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(tempFile));
        HashMap<String, String> hMap = reader.getInfo();          
        hMap.put("Title", "MyTitle");
        hMap.put("Subject", "Subject");
        hMap.put("Keywords", "Key, words, here");
        hMap.put("Creator", "me");
        hMap.put("Author", "me");
        hMap.put("Producer", "me");
        hMap.put("CreationDate", null);
        hMap.put("ModDate", null);
        hMap.put("DocChecksum", null);

        stamper.setMoreInfo(hMap);
        stamper.close(); 
```

以及使用 pdftk 提取的文件元数据：

```
InfoKey: Creator
InfoValue: me
InfoKey: Title
InfoValue: MyTitle
InfoKey: Author
InfoValue: me
InfoKey: Producer
InfoValue: me
InfoKey: Keywords
InfoValue: Key, words, here
InfoKey: Subject
InfoValue: Subject
PdfID0: 28c71a8d7790a4d3e85ce879a90dec0
PdfID1: 4c5865d36c7a381e6166d5e362d0aafc
NumberOfPages: 1 
```

感谢您的任何提示

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T13:01:18.070

您看到标记为`PdfID0`和`PdfID1`的元数据转储是相应 PDF 文件末尾的`pdftk`以下 PDF 代码的一部分（示例）：`trailer`

```
trailer
   << /Size 32
      /Root 24 R
      /Info 19 R
      /ID [ 
            <28c71a8d7790a4d3e85ce879a90dec0>
            <4c5865d36c7a381e6166d5e362d0aafc>
          ]
   >> startxref
81799
%%EOF 
```

`/ID`只有存在条目时才需要预告片字典中的条目`Encrypt`；否则它是一个可选的键。

PDF规范将其描述为：

> “一个由两个字节串组成的数组，构成文件的文件标识符（参见第 14.4 节，*“文件标识符”*）。如果有一个加密条目，这个数组和两个字节串应该是直接对象，并且应该是未加密的。

此外：

> “第一个字节字符串应是基于文件最初创建时的内容的永久标识符，并且在文件增量更新时不应更改。第二个字节字符串应是基于文件内容的更改标识符上次更新的时间。第一次写入文件时，两个标识符应设置为相同的值。如果在解析文件引用时两个标识符匹配，则很可能已找到正确且未更改的文件。如果只有第一个标识符匹配，已找到正确文件的不同版本。”

而且它***不一定******是***hash 。这是 ISO PDF 规范*所建议*的（不是“规定”）：

> “为了帮助确保文件标识符的唯一性，它们应该通过消息摘要算法来计算，例如 MD5（在 Internet RFC 1321 中描述，*MD5 消息摘要算法*；请参阅参考书目），使用以下信息：
> 
> *   当前时间
> *   文件位置的字符串表示，通常是路径名
> *   文件的大小（以字节为单位）
> *   文件的文档信息字典中所有条目的值（参见 14.3.3，“文档信息字典”）

生成的 PDF 文件中还有一些点可能会随着每次新运行而改变。文档信息字典中的这些键（`/Info`预告片中引用的条目）

*   `/CreationDate`
*   `/ModDate`

可能会在您每次创建或修改 PDF 时更新。

因此，在生成的 PDF 上使用您自己的 MD5 校验和来检查新/更改的文件将不起作用，除非您确保在创建 MD5 哈希之前至少“规范化”`/CreationDate`和`/ModDate`以及条目。`/ID`

* * *

**更新：**正如用户*mkl*在对此答案的评论中正确指出的那样，字典的`/CreationDate`和`/ModDate`键`/Info`（以及`/ID`信息）通常具有包含在 PDF 中嵌入的 XML 元数据中的等效信息。`pdfinfo`您可以在实用程序的帮助下显示完整的 XML 元数据，如下所示：

```
pdfinfo -meta your.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:05:53.230

关于标识符...... pdf规范说：

文件标识符应由 PDF 文件尾部字典中的可选 ID 条目定义（参见 7.5.5，“文件尾部”）。ID 条目是可选的，但应该使用。该条目的值应为两个字节字符串的数组。第一个字节字符串应是基于文件最初创建时的内容的永久标识符，并且在文件增量更新时不应更改。第二个字节串应是根据文件最后更新时的内容而变化的标识符。首次写入文件时，应将两个标识符设置为相同的值。如果在解析文件引用时两个标识符匹配，则很可能已找到正确且未更改的文件。如果只有第一个标识符匹配，则已找到正确文件的不同版本。

这一点，标识符是可选的，但建议使用。

IText 自动插入和更新标识符。您当然可以更改 iText（毕竟它是开源的）以不这样做。

# java - 如何在android中获取拇指印象

> ID：13193821
> 
> 赞同：0
> 
> 时间：2012-11-02T10:54:12.043
> 
> 标签：java, android

> **可能重复：**
> [iphone 是否提供任何 API 来检测人类拇指印象？](https://stackoverflow.com/questions/5752859/does-iphone-provide-any-api-to-detect-human-thumb-impression)
> [安卓设备是否支持指纹？](https://stackoverflow.com/questions/10369799/is-fingerprint-supported-in-android-devices)

每个人。我想通过在移动屏幕上按下来在我的 android 手机中获取拇指印象。有没有拇指印象的API。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:04:06.230

用于扫描指纹的拇指印象需要不属于标准 android 手机屏幕的专用设备/组件。

因此，没有 API，Android 目前不支持此功能。

# java - 在 COTS 设备上访问两个麦克风

> ID：13193824
> 
> 赞同：1
> 
> 时间：2012-11-02T10:54:26.967
> 
> 标签：java, android, distance, microphone, smartphone

我的问题与那个问题类似：[如何将麦克风阵列上每个麦克风的音频同时录制到 Android 中的单独缓冲区中？](https://stackoverflow.com/questions/8808567/how-do-i-simultaneously-record-audio-from-every-mic-on-a-microphone-array-into-a)但要求略有不同。也许我的问题有解决方案，但我无法自己解决。我绝对**必须使用智能手机上的两个麦克风**，或者通常是运行 Android 操作系统的手持设备。它不必是同时的，无论如何这是不可能的，但我必须在一个设备中访问两个不同的麦克风。

**你知道这个问题的任何解决方案吗？**

我知道如何通过 Android API 访问麦克风，但我真的需要两个不同的。这将作为三角测量的基线。

# vba - 根据数值范围在行中设置值

> ID：13193825
> 
> 赞同：1
> 
> 时间：2012-11-02T10:54:27.960
> 
> 标签：vba

我正在使用 excel 将数据导入我公司的订单系统。我需要导入的最重要的值是包代码，即定义需要订购哪个包的代码）。为了定义需要哪个包代码，我们查看一个数值。

假设我有以下 3 个包代码：

*   ES000034 - 当数值 = 9 时使用
*   ES000035 - 当数值 = > 大于 9 且 < 小于 16 时使用
*   ES000036 - 当数值 = > 16 时使用

我希望Excel根据上面提到的条件设置需要使用哪个包代码的值。有人可以解释一下代码的样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:19:18.177

在一个公式中：

像这样的东西，其中 A1 是您正在检查的单元格： `=IF(A1=9,"ES000034",IF(AND(A1>=9, A1 <16),"ES000035",IF(A1>=16,"ES000036","")))`

在 VBA 中，类似这样的使用如下`=PackageCode(A1)`：

```
Function PackageCode(value As Variant) As String
    If IsNumeric(value) Then
        Select Case value
            Case 9
                PackageCode = "ES000034"
            Case 9 To 16
                PackageCode = "ES000035"
            Case Is > 16
                PackageCode = "ES000036"
            Case Else
                PackageCode = ""
        End Select
    End If
End Function 
```

# c# - 如何将数据集值添加到sql

> ID：13193827
> 
> 赞同：0
> 
> 时间：2012-11-02T10:54:31.510
> 
> 标签：c#, sql, winforms, dataset

我是 SQL 新手（从今天开始），当数据库中的表具有第一列作为自动生成数字即 (IDENTITY (1,1)) 时，如何将数据集的数据添加到数据库表中

我有这样的数据集

```
 name    age    location

   x      30       yyy
   y      20       ppp 
```

数据库中的表是这样的

```
 Id(auto)   name    age    location

  --------  no data  -------------- 
```

首先，我从数据库表中填充数据集。
由于第一列是自动生成的，我什至无法向 DataSet 添加新值。如果我说

```
 dsMainDoctors.Tables[0].Rows.Add( /* first column is autogenerated so I am leaving it*/
                secondColumn,
                thirdColumn,
                fourthColumn,
                FifthColumn); 
```

错误 --> 输入字符串的格式不正确。无法存储在 Doctor_ID 列中。预期类型是 Int32。

我正在尝试的代码是：（*当我在 DataSet 中手动给出第一列值时*）

```
 SqlConnection conn = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand(strQuery, conn);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        conn.Open();
        da.Update(ds.Tables[0]);  //ERROR :- Update requires a valid InsertCommand when passed DataRow collection with new rows.
        conn.Close();
        conn.Dispose();
        cmd.Dispose(); 
```

* * *

```
 strQuery --> "delete from [dbo].[" + table_name + "]"; 
```

我可以在询问之前搜索过这个，但我不知道我应该使用什么关键字
如果这是一个非常简单的问题，请在评论中回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:57:37.963

为了使用结果更新表，您`DataTable`必须配置[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)类的`SelectCommand`、和属性（SqlCommand 对象） 。`DeleteCommand``InsertCommand``UpdateCommand`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:28:49.943

好的，以下代码将为您正确构建该 INSERT 命令。另外，请注意，如果您担心处理对象，请改用该`using`语句，因为它会`Dispose`在退出该语句时调用。

```
SqlConnection conn = new SqlConnection(strConn);
SqlCommand cmd = new SqlCommand(strQuery, conn);
SqlDataAdapter da = new SqlDataAdapter(cmd);
SqlCommandBuilder builder = new SqlCommandBuilder(da);

using (cmd)
{
    using (conn)
    {
        conn.Open();

        da.InsertCommand = builder.GetInsertCommand();
        da.Update(ds.Tables[0]);  //ERROR :- Update requires a valid InsertCommand when passed DataRow collection with new rows.

        conn.Close();
    }
} 
```

## 编辑

如果您只是想对`delete`数据库中的数据进行重建，那么这与您最初的问题所暗示的完全不同。但是，下面是这将是多么简单。

```
var strQuery = "delete from [dbo].[" + table_name + "]";
SqlConnection conn = new SqlConnection(strConn);
SqlCommand cmd = new SqlCommand(strQuery, conn);
var rowsAffected = cmd.ExecuteNonQuery();

// do something with rowsAffected if you want

// now you can build `insert` statements if you want
// to put more data into it, which you could use the
// previous example for that 
```

# jquery - jquery点击兄弟选择

> ID：13193828
> 
> 赞同：1
> 
> 时间：2012-11-02T10:54:34.297
> 
> 标签：jquery, html, onclick

我从数据库生成一个表，看起来像这样

```
<table id="items">
<thead>
    <tr>
        <th>Details</th>
        <th>Goldmine ID</th>
        <th>&nbsp;</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td class="evenrow">This is a test Description generated through UNIT Tests for the category description</td>
        <td class="evenrow"><input type="text" value="" id="106" class="gminput"></td>
        <td class="butCell evenrow"><button class="saveButton updateitem">Update</button></td>
    </tr>
    <tr>
        <td class="oddrow">This is a test Description generated through UNIT Tests for the category description</td>
        <td class="oddrow"><input type="text" value="" id="107" class="gminput"></td>
        <td class="butCell oddrow"><button class="saveButton updateitem">Update</button></td>
    </tr>
    <tr>
        <td class="evenrow">This is a test Description generated through UNIT Tests for the category description</td>
        <td class="evenrow"><input type="text" value="" id="108" class="gminput"></td>
        <td class="butCell oddrow"><button class="saveButton updateitem">Update</button></td>
    </tr>
</tbody>
</table> 
```

我正在尝试获取相关行的按钮单击返回的输入框值和 id

到目前为止，我已经尝试过但失败了

```
$('body').on('click', '.updateitem', function(event) {
    event.preventDefault();
    $(this).parent().siblings().each(function(index) {
        alert(($(this).val()));
    });
    var par = sib.parent('td');
    par.addClass('redBorder');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:56:21.780

你想要的元素是

```
$(this).closest('tr').find('.gminput') 
```

您可以使用

```
var input = $(this).closest('tr').find('.gminput');
var value = input.val();
var id = input.attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:00:23.893

jQuery中没有方法`forEach()`..尝试`.each()`

```
$(this).parent().parent().each(function(index) {
   if(!$(this).hasClass('butCell')) {
       if($(this).find('input').length > 0) { // we have to verify if tds has text inputs or not
           alert($(this).find('input').val());
       } else {
           // if there is no text input we get the text inside td
           alert($(this).text());
       }
   }  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:00:39.547

```
$('.updateitem').on('click', function(){
    $elem = $(this).parents('tr').find('.gminput');
    var id = $elem.prop('id');
    var val = $elem.val()
}) 
```

为什么有一个点击事件`body`，什么时候`button`就足够了？

# php - 使用 Facebook 选项登录网站在我的 PHP 网站中不起作用

> ID：13193829
> 
> 赞同：1
> 
> 时间：2012-11-02T10:54:37.960
> 
> 标签：php, facebook, api, facebook-login

我在[http://domain.com](http://domain.com/mysite/)和[http://domain.com/mysite](http://domain.com/mysite/)站点中创建了“使用 facebook 登录”部分。直到几周前，这些部分都运行良好。但是从昨天开始，当我尝试使用 facebook 登录这些网站之一时，它显示了一个错误

> “您的网站出现错误。请稍后再试。”

并仅直接重定向到 Facebook 帐户。[我还尝试了教程站点http://onlinewebapplication.com/facebook/](http://onlinewebapplication.com/facebook/)中的演示链接 。它也显示相同的错误。我想知道问题出在网站的编码部分或 facebook 更改了他们系统中的任何内容。对不起，我的英语不好。有谁知道解决此问题的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:21:08.120

端点 www.facebook.com/login.php 最近已被弃用并停止使用。

您必须重建您的登录程序以符合此处描述的技术：[https ://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)

如果您使用 PHP SDK 创建登录 URL，请确保您使用的是最新版本。

# java - 面试-Java排序程序

> ID：13193832
> 
> 赞同：1
> 
> 时间：2012-11-02T10:54:43.723
> 
> 标签：java, sorting

编写一个 java 程序从文件中读取输入并对单词进行排序，然后再次对整个文件进行排序。我已经得到了正确的编码，输入是从文件中完全读取的，但仍然不能准确地完成分割。

请建议我在更短的时间内解决此问题的适当解决方案..

代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.*;

public class HariPriya {

    public static void main(String[] ags)throws Exception
    {
        long st=System.currentTimeMillis();
        int v=0;
        String line;
        List ls=new ArrayList();
        //To read data from file
        BufferedReader in=new BufferedReader(new FileReader("D:/hari3.txt"));
        System.out.println("The original text is:");
        while((line = in.readLine())!= null)
        {
          System.out.println(line);  

        }
        String read=line.toLowerCase();
        //Spliting the string based on spaces
        String[] sp=read.replaceAll("[-+.^:,!@#$%&*()~?]","").split(" ");
        for(int i=0;i<sp.length;i++)
        {
            //Check for the array if it matches number
            if(sp[i].matches("(\\d+)"))
                //Adding the numbers
                v+=Integer.parseInt(sp[i]);
            else
            {
                //sorting the characters
                char[] c=sp[i].toCharArray();
                Arrays.sort(c);
                String r=new String(c);
                //Adding the resulting word into list
                ls.add(r);
            }
        }
        //Sorting the resulting words in ascending order
        Collections.sort(ls);
        //Appending the number in the end of the list
        ls.add(v);
        //Displaying the string using Iteartor
        Iterator it=ls.iterator();
        while(it.hasNext())
            System.out.print(it.next()+" ");
        long time=System.currentTimeMillis()-st;
        System.out.println("\n Time Taken:"+time);
    }
} 
```

# android - SpriteBatch.setBlendFunction() 对 Android 没有影响

> ID：13193833
> 
> 赞同：3
> 
> 时间：2012-11-02T10:54:53.210
> 
> 标签：android, opengl-es-2.0, libgdx, blending, spritebatch

我正在使用 libGDX 框架为 Android 开发游戏。我有三个图像 - 背景、前景和蒙版。这是使用蒙版使部分背景图像在前景图像上可见的渲染代码：

```
Gdx.gl20.glClear(GL20.GL_COLOR_BUFFER_BIT);
batch.enableBlending();
batch.begin();
batch.setBlendFunction(<params1>);
batch.draw(bgTex, bgTexX, bgTexY, bgTexW, bgTexH);
batch.setBlendFunction(<params2>);
batch.draw(mask, maskX, maskY, maskW, maskH);
batch.setBlendFunction(<params3>);
batch.draw(fgTex, fgTexX, fgTexY, fgTexW, fgTexH);
batch.end(); 
```

它在桌面（ubuntu 12.04）上运行良好，但在我尝试过的任何 android 手机/平板电脑上都不起作用（它们都支持 Opengl Es 2.0）。在 Android 设备上混合会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:19:45.860

在你的android项目文件中你使用

```
AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
cfg.useGL20 = true;        
initialize(new MyGdxGame(), cfg); 
```

好像应用配置未设置为允许使用 GL20，它将忽略对 GL20 对象的所有调用。默认值（如果未明确设置）为 false。

# c# - 为什么 PageScalingFactor 不影响任何东西？

> ID：13193834
> 
> 赞同：4
> 
> 时间：2012-11-02T10:54:54.027
> 
> 标签：c#, wpf, printing

我尝试动态创建并静默打印文档。问题是我需要缩放文档以适应页面。我尝试使用 PrintTicket.PageScalingFactor 但它不起作用：当打印机打印文档时，PageScalingFactor=50 和 PageScalingFactor=250 之间没有区别。PageScalingFactor 不会影响任何东西。这是一个代码片段：创建 PrintTickets：

```
PrintTicket tkt = new PrintTicket();

tkt.Collation = Collation.Uncollated;
tkt.CopyCount = 1;
tkt.DeviceFontSubstitution = DeviceFontSubstitution.On;
tkt.Duplexing = Duplexing.OneSided;
tkt.InputBin = InputBin.AutoSelect;
tkt.OutputColor = OutputColor.Monochrome;
tkt.PageMediaSize = new PageMediaSize(PageMediaSizeName.ISOA9);
tkt.PageMediaType = PageMediaType.Unknown;
tkt.PageOrder = PageOrder.Standard;
tkt.PageOrientation = PageOrientation.Portrait;
tkt.PageResolution = new PageResolution(PageQualitativeResolution.Draft);
tkt.PageScalingFactor = 40;
tkt.PagesPerSheet = 1;
tkt.TrueTypeFontMode = TrueTypeFontMode.DownloadAsOutlineFont;

StackPanel myPanel = new StackPanel();
myPanel.Margin = new Thickness(15); 
```

设置 PrintQueue 并用数据填充 StackPanel 无关紧要打印：

```
myPanel.Measure(new Size(dialog.PrintableAreaWidth,
                         dialog.PrintableAreaHeight));
myPanel.Arrange(new Rect(new Point(0, 0),
                myPanel.DesiredSize));

dial2.PrintVisual(myPanel, "A Great Image."); 
```

我将 PageScalingFactor 设置为 40、100、250 - 输出相同。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:32:19.373

PageScaling 功能是否设置为 CustomSquare？

# vba - 编辑 Hyperlinks(x).texttodisplay 将超链接移动到 PowerPoint 中文本框的开头

> ID：13193837
> 
> 赞同：4
> 
> 时间：2012-11-02T10:55:04.983
> 
> 标签：vba, hyperlink, powerpoint

我在 PowerPoint 中遇到 VBA 问题 - 当我尝试编辑超链接的 TextToDisplay 属性时，它会编辑文本，但会将超链接位置移动到文本框的开头。

![损坏的超链接](../Images/56af6e9195038ff0f436eb413480f6e9.png)

在第一遍中，我将文本框的第一个字符更改为链接，然后在第二遍中，该链接被重写。

当幻灯片移动时，我正在使用以下代码更新超链接的页码。

```
Sub UpdatePageNumbers()

For Each sld In ActivePresentation.Slides
    For x = CInt(sld.Hyperlinks.Count) To 1 Step -1
        strParts = Split(sld.Hyperlinks(x).SubAddress, ",")
        PageNumber = ActivePresentation.Slides.FindBySlideID(CInt(strParts(0))).SlideNumber
        sld.Hyperlinks(x).TextToDisplay = "Page " & PageNumber
    Next
Next

End Sub 
```

有没有人见过这个/想出一个解决方案？进行了搜索，找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:27:11.633

我可以重现奇怪的行为。这可能对您更有效。我已将其更改为显式 DIM 所有变量（通常是良好做法），并使用 Longs 而不是 Integers，因为这是 PPT 在内部使用的。接下来，显然更改 Displayed Text 也会更改或删除超链接（有时但并非总是如此？很奇怪！）。这会抛出你的循环计数器。所以相反，对于每个超链接，我存储了它的子地址，对文本进行了任何更改，然后重新应用了子地址。

```
Sub UpdatePageNumbers()

Dim sld As Slide
Dim x As Long
Dim strParts
Dim PageNumber As Long
Dim oHl As Hyperlink
Dim oTxtRange As TextRange
Dim sSubaddress As String

For Each sld In ActivePresentation.Slides
    'For x = CLng(sld.Hyperlinks.Count) To 1 Step -1
    For Each oHl In sld.Hyperlinks
        With oHl
            sSubaddress = .SubAddress
            strParts = Split(.SubAddress, ",")
            PageNumber = ActivePresentation.Slides.FindBySlideID(CLng(strParts(0))).SlideNumber
            'oHl.TextToDisplay = "Page " & PageNumber
            Set oTxtRange = .Parent.Parent
            oTxtRange.Text = "Page " & PageNumber
            oTxtRange.ActionSettings(1).Hyperlink.SubAddress = sSubaddress
        End With
    Next
Next

End Sub 
```

# android - 连接到 PostGIS 数据库

> ID：13193838
> 
> 赞同：6
> 
> 时间：2012-11-02T10:55:15.407
> 
> 标签：android, postgresql, postgis, osmdroid, openstreetmap

我正在尝试创建一个应用程序，该应用程序将允许用户查看托管在我自己的图块服务器上的 OSM 地图，并且还可以对其进行编辑。

我目前有一个瓦片服务器，它将地图瓦片（png 图像）传送到我的 android 应用程序，该应用程序使用 OSMDroid 显示。

我还有一个存储 OSM 数据的 PostGIS 数据库。

我想做的是有一个 OSMDroid 地图视图作为基础，它允许用户查看完全渲染的地图，然后让应用程序从 PostGIS DB 下载 OSM 数据并将道路线绘制为顶部的叠加层MapView 以便用户可以操作这些行，然后将它们提交回数据库。它看起来类似于 Vespucci 的做法。

这听起来像这样做的好方法吗？另外，有谁知道我如何将 Android 连接到 PostGIS DB 并下载这些数据？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T03:16:58.870

让 Android 客户端直接连接到您的数据库并不是一个好主意。正如您在评论中提到的那样，创建 Web 服务（例如 REST 服务）是可行的方法。

采用这种方法有几个原因：

*   从安全角度来看，将数据库暴露在 Internet 上是不好的
*   从设计的角度来看，将您的应用程序与数据库紧密耦合是不好的。使用单独的服务层，您可以：
    *   无需更新应用即可更改数据层
    *   添加缓存
    *   根据需要在每层添加容量

# javascript - 如何从网页获取文本到我们本地的 html 页面？

> ID：13193842
> 
> 赞同：-1
> 
> 时间：2012-11-02T10:55:36.603
> 
> 标签：javascript, jquery

我想使用 jquery 或 javascript 从网页读取文本到我们的 html 页面。

我想做的是：
我有一个 SHOUTcast 页面，`http://79.120.77.11:9007/`

在每 5-6 分钟当前歌曲不断变化的地方，我需要阅读当前歌曲名称并显示在 html 文本框中。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:05:08.153

如果两个页面都在不同的主机上并且`Access-Control-Allow-Origin`没有设置标题，则无法执行此操作

检查[http://enable-cors.org/](http://enable-cors.org/)

如果他们在同一台服务器上，那么使用这个

```
$('#my_div').load('http://79.120.77.11:9007/ #element_with_song_name'); 
```

# java - Java 初始化方法

> ID：13193847
> 
> 赞同：2
> 
> 时间：2012-11-02T10:55:52.640
> 
> 标签：java, initialization

确保在 java 中调用 init 方法的好方法是什么？我看到的替代方案是

*   不要测试它，让方法自己失败，很可能是`NullPointerException`
*   测试方法是否已初始化或抛出

```
public void foo() {
     if (!inited) {
         throw new IllegalArgumentException("not initalized");
     }
     ...
} 
```

*   德拉盖特

```
public void foo() {
     if (!inited) {
         throw new IllegalArgumentException("not initalized");
     }
     fooInternal();
}

private void fooInternal(){ ... }; 
```

*   始终初始化，否则将 init 设为 noop

```
public void foo() {
     init();
     ...
}
public void init() {
     if(!inited) {
         ...
     }
} 
```

*   静默初始化

```
public void foo() {
     if (!inited) {
         init();
     }
     ...
} 
```

这些方法中的大多数都非常冗长，并降低了整体可读性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:13:01.727

如果初始化是使用合同抛出的一部分，`IllegalStateException`因为类的客户端没有导致它转换到正确的“初始化”状态......</p>

是否在创建时进行初始化取决于它的使用方式。例如，如果它可能被 Spring ApplicationContext 使用，那么您将需要推迟初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T10:58:45.653

`init();`在初始化块中调用，这样每个构造函数调用也将执行`init();`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T11:02:19.617

大多数情况下，您希望[快速失败](http://en.wikipedia.org/wiki/Fail-fast)，因此请根据您的应用程序在其中执行的容器选择帮助您快速失败的机制。例如，如果是 Web 容器，那么您可能会在创建[servlet 上下文](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)期间对其进行初始化。此外，我不确定为什么以下内容很冗长。它的意图简单、清晰和明确。

```
public void foo() {
     if (!inited) {
         init();
     }
     ...
} 
```

# sql - 从所有表中复制，插入到所有表中（sp_MSforeachtable 替代方案）

> ID：13193852
> 
> 赞同：2
> 
> 时间：2012-11-02T10:56:16.017
> 
> 标签：sql, sql-server, sp-msforeachtable

我决定分享我尝试将所有表中的数据复制到不同模式中的同名表中的经验。我相信我的经验可以帮助其他人在不使用不受支持且坦率有限的`sp_MSforeachtable`.

**目标：**将数据库中所有表的数据复制到具有不同架构的同名表

*关于* `sp_MSforeachtable`. *大多数时候，当人们在 SO 中询问有关此存储过程的问题时，会有一些回复或另一种说法是我们不应该使用不受支持的功能。这根本不是真的，我们不应该做的是基于不受支持的功能的实践和设计决策，主要是因为它们可能会消失。但是在某个特定的时间点，如果存在不受支持的功能，并且完全符合我们当时需要做的事情，一次性的风格，那么就认为自己很幸运，一定要使用它，只是要小心意外行为。使用此类功能时，最好坚持简单的操作，其输出可以快速轻松地验证。*

话虽如此，而且由于存在一些实际限制`sp_MSforeachtable`，我提出了一种不同但不太复杂的方法来针对我们数据库中的所有（或特定）表执行语句，并且我以我的问题为例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:56:16.017

我经常通过生成返回语句的查询来解决这个问题，然后将这些语句复制粘贴到一个新的查询窗口中并执行它们。我喜欢这种方法，因为我在执行语句之前看到了我的语句，并且还可以使用解析器快速识别它们的问题。考虑到这一点，这是我的查询：

```
SELECT DISTINCT ''
    + ' INSERT INTO ' + 'dbo.' + QUOTENAME(name)
    + ' (' + dbo.COLUMN_NAMES('dbo', name) + ')'
    + ' SELECT ' + dbo.COLUMN_NAMES('dbo', name)
    + ' FROM ' + 'db_owner.' + QUOTENAME(name)
FROM sys.tables
-- add your own WHERE clauses to only execute against specific tables 
```

就是这么简单。这将返回一个 INSERT INTO ... SELECT FROM... 语句列表，我可以简单地将其复制粘贴到一个新的查询窗口中。

如果您想知道为什么不只使用 SELECT *，那仅仅是因为如果您的表有 ID 列，那么您将需要显式命名这些列并在前后添加 SET_IDENTITY 语句。

COLUMN_NAMES 函数是一个非常不言自明的函数，它返回指定表的逗号分隔列名：

```
CREATE FUNCTION COLUMN_NAMES
(
    @tableschema VARCHAR(MAX),
    @tablename VARCHAR(MAX)
)
RETURNS VARCHAR(MAX)
AS
BEGIN

RETURN (
    REPLACE(
        (SELECT QUOTENAME(COLUMN_NAME) AS 'data()'
         FROM INFORMATION_SCHEMA.COLUMNS
         WHERE TABLE_SCHEMA=@tableschema AND TABLE_NAME=@tablename ORDER BY ORDINAL_POSITION FOR XML PATH('')),
         ' ',', '))

END
GO 
```

# java - Java - If 语句始终返回 true

> ID：13193856
> 
> 赞同：0
> 
> 时间：2012-11-02T10:56:22.343
> 
> 标签：java, regex, if-statement, boolean

无论我做什么，这段代码中的 if 语句总是返回 true。即使我没有为程序提供任何参数，我也会得到一个`nullPointerException`，表明 if 语句返回 true。你能帮助我吗？

```
import java.io.*;
import java.util.*;

public class Oblig4 {
    static Menu menu = new Menu();
public static void main(String[] args) {
    if(args[0].matches("^[a-zA-Z0-9]{1,40}\\\\.txt$") && args[1].matches("^[a-zA-Z0-9]{1,40}\\\\.txt$")){
        menu.menu(args[0], args[1]);
    }
    else{
        System.out.println("You have not given the correct arguments.");
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:01:25.957

*即使我没有给程序提供任何参数，我也会得到一个 nullPointerException，表明 if 语句返回 true*

这并不表示如果它抛出 NPE 就会为真。`null`首先，您应该在查找包含的语句之前检查`args[0]`and`args[1]``if``matches`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:30:52.763

您可以避免使用[JSAP](http://www.martiansoftware.com/jsap/)库解析参数时出现问题。看看它有多简单：

```
import java.io.File;
import java.util.regex.Pattern;

import com.martiansoftware.jsap.FlaggedOption;
import com.martiansoftware.jsap.JSAP;
import com.martiansoftware.jsap.JSAPException;
import com.martiansoftware.jsap.JSAPResult;
import com.martiansoftware.jsap.stringparsers.FileStringParser;

public class Oblig4 {

    private Pattern fileNamesPattern = Pattern
            .compile("^[a-zA-Z0-9]{1,40}\\.txt$");
    private JSAP jsap = new JSAP();

    public static void main(String[] args) throws JSAPException {
        Oblig4 oblig4 = new Oblig4();
        oblig4.init();
        JSAPResult config = oblig4.jsap.parse(args);
        if (!config.success()) {
            System.err.println();
            System.err.println("Usage: ");
            System.err.println("java -jar jar_file_name.jar "
                    + oblig4.jsap.getUsage());
            System.err.println(oblig4.jsap.getHelp());
            System.err.println();
            return;
        }
        File firstFile = config.getFile("firstFile");
        File secondFile = config.getFile("secondFile");
        if (!oblig4.fileNamesIsValid(firstFile, secondFile)) {
            System.out.println("File names is not valid. See pattern "
                    + oblig4.fileNamesPattern.pattern());
        }
        Menu menu = new Menu();
        menu.doSomething(firstFile, secondFile);
    }

    private void init() throws JSAPException {
        FileStringParser fileStringParser = FileStringParser.getParser();
        fileStringParser.setMustBeDirectory(false);
        fileStringParser.setMustBeFile(true);
        fileStringParser.setMustExist(false);
        FlaggedOption firstInputFile = new FlaggedOption("firstFile")
                .setStringParser(fileStringParser).setRequired(true)
                .setShortFlag('f');
        firstInputFile.setHelp("First text file");
        jsap.registerParameter(firstInputFile);

        FlaggedOption secondInputFile = new FlaggedOption("secondFile")
                .setStringParser(fileStringParser).setRequired(true)
                .setShortFlag('s');
        secondInputFile.setHelp("Second text file");
        jsap.registerParameter(secondInputFile);
    }

    private boolean fileNamesIsValid(File... files) {
        for (File file : files) {
            if (!fileNamesPattern.matcher(file.getName()).find()) {
                return false;
            }
        }
        return true;
    }
}

class Menu {
    public void doSomething(File firstFile, File secondFile) {

    }
} 
```

如果没有参数或参数无效，用户将看到：

```
Usage: 
java -jar jar_file_name.jar -f <firstFile> -s <secondFile>
  -f <firstFile>
        First text file

  -s <secondFile>
        Second text file 
```

# c#-4.0 - OpenNMS HttpMonitor 用户代理

> ID：13193861
> 
> 赞同：1
> 
> 时间：2012-11-02T10:56:51.167
> 
> 标签：c#-4.0

我们使用`HttpContext.Current.Request.ServerVariables["HTTP_USER_AGENT"]`获取用户代理和 Request.Browser.Browser + " " + Request.Browser.Version 来获取浏览器详细信息。

但有时登录的用户代理是**OpenNMS HttpMonitor**并且浏览器名称是**UnKnown 0.0**。

谁能建议这可能是什么情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-01T18:05:39.470

在构建 HTTP 请求命令时，仅在 HTTP 标头中设置了用户代理。将需要增强请求或拉取请求。可以在此处找到负责此行为的代码部分：[https ://github.com/OpenNMS/opennms/blob/develop/opennms-services/src/main/java/org/opennms/netmgt/poller/监视器/HttpMonitor.java#L562](https://github.com/OpenNMS/opennms/blob/develop/opennms-services/src/main/java/org/opennms/netmgt/poller/monitors/HttpMonitor.java#L562)

# java - 由于执行速度慢，无法在 JAVA 中处理使用 Python 解决方案

> ID：13193871
> 
> 赞同：0
> 
> 时间：2012-11-02T10:57:11.653
> 
> 标签：java, python, performance

我有 300 万行数据，每行都有 30 个特征 - 很难将所有数据都包含在我的计算机的内存中，并且使用学习算法处理它的速度很慢 - 。我想编写一些随机采样的代码，但是在 JAVA 和我的 PC 配置中它不起作用或需要很长时间才能执行。我知道用 C 或 C++ 编写可以提供更好的解决方案，但我也很好奇 python 在这种情况下的可用性。在 Java 由于速度慢和内存限制而无法有效工作的情况下使用 Python 是否合理 - 请不要说增加堆大小等 -？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:40:37.170

如果性能至关重要，这就是我使用的解决方案。

```
public class SimpleTable {
    private final List<RandomAccessFile> files = new ArrayList<RandomAccessFile>();
    private final List<FloatBuffer> buffers = new ArrayList<FloatBuffer>();
    private final File baseDir;
    private final int rows;

    private SimpleTable(File baseDir, int rows) {
        this.baseDir = baseDir;
        this.rows = rows;
    }

    public static SimpleTable create(String baseName, int rows) throws IOException {
        File baseDir = new File(baseName);
        if (!baseDir.mkdirs()) throw new IOException("Failed to create " + baseName);
        PrintWriter pw = new PrintWriter(baseName + "/rows");
        pw.println(rows);
        pw.close();
        return new SimpleTable(baseDir, rows);
    }

    public static SimpleTable load(String baseName) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(baseName + "/rows"));
        int rows = Integer.parseInt(br.readLine());
        br.close();
        File baseDir = new File(baseName);
        SimpleTable table = new SimpleTable(baseDir, rows);
        File[] files = baseDir.listFiles();
        Arrays.sort(files);
        for (File file : files) {
            if (!file.getName().endsWith(".float")) continue;
            table.addColumnForFile(file);
        }
        return table;
    }

    private FloatBuffer addColumnForFile(File file) throws IOException {
        RandomAccessFile rw = new RandomAccessFile(file, "rw");
        MappedByteBuffer mbb = rw.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, rows * 8);
        mbb.order(ByteOrder.nativeOrder());
        FloatBuffer db = mbb.asFloatBuffer();
        files.add(rw);
        buffers.add(db);
        return db;
    }

    public int rows() {
        return rows;
    }

    public int columns() {
        return buffers.size();
    }

    public FloatBuffer addColumn() throws IOException {
        return addColumnForFile(new File(baseDir, String.format("%04d.float", buffers.size())));
    }

    public FloatBuffer getColumn(int n) {
        return buffers.get(n);
    }

    public void close() throws IOException {
        for (RandomAccessFile file : files) {
            file.close();
        }
        files.clear();
        buffers.clear();
    }
}

public class SimpleTableTestMain {
    public static void main(String... args) throws IOException {
        long start = System.nanoTime();
        SimpleTable st = SimpleTable.create("test", 3 * 1000 * 1000);
        for (int i = 0; i < 50; i++) {
            FloatBuffer db = st.addColumn();
            for (int j = 0; j < db.capacity(); j++)
                db.put(j, i + j);
        }
        st.close();

        long mid = System.nanoTime();

        SimpleTable st2 = SimpleTable.load("test");
        for (int i = 0; i < 50; i++) {
            FloatBuffer db = st2.getColumn(i);
            double sum = 0;
            for (int j = 0; j < db.capacity(); j++)
                sum += db.get(j);
            assert sum > 0;
        }

        long end = System.nanoTime();
        System.out.printf("Took %.3f seconds to write and %.3f seconds to read %,d rows and %,d columns%n",
                (mid - start) / 1e9, (end - mid) / 1e9, st2.rows(), st2.columns());
        st2.close();
    }
} 
```

印刷

```
Took 2.070 seconds to write and 2.206 seconds to read 3,000,000 rows and 50 columns 
```

# core-data - 核心数据，NSPredicate，任何 key.path == nil

> ID：13193872
> 
> 赞同：9
> 
> 时间：2012-11-02T10:57:16.990
> 
> 标签：core-data, nspredicate

我想出了一个使用子查询的解决方案，但我不明白为什么我首先尝试做的事情没有奏效。

这是我的数据模型。我正在获取建议。

![在此处输入图像描述](../Images/83aa5f0d8122f69b927bb06af34e8df1.png)

我可以执行以下操作作为谓词：

```
[NSPredicate predicateWithFormat:@"ANY conditions.terrain == %@", aTerrainObject]; 
```

工作正常，并返回至少一个条件具有该地形类型的任何建议。

但是，当我尝试这样做时，它失败了：

```
[NSPredicate predicateWithFormat:@"ANY conditions.terrain == nil"]; 
```

我想要做的是返回任何一条建议，其中至少有一个条件没有设置地形类型。

但是，以下方法确实有效：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(conditions, $x, $x.terrain == nil).@count > 0"]; 
```

谁能解释为什么在搜索 nil 时我不能使用`ANY`语法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T17:56:38.130

> 谁能解释为什么在搜索 nil 时，我不能使用 ANY 语法？

是的！这是正在发生的事情。

```
[NSPredicate predicateWithFormat:@"ANY conditions.terrain == nil"]; 
```

首先，让我们将其分解为适当的左右表达式：

```
conditions.terrain 
```

这将通过获取`SELF`对象（一个`Advice`实例）并请求`valueForKeyPath:@"conditions.terrain"`. 此键路径的结果将是一个集合。你本质上是在做：

```
Advice *a = ...;
NSSet *conditions = [a conditions];
NSSet *terrains = [conditions valueForKey:@"terrain"]; 
```

因此，您有一组（潜在）`Terrain`实例。现在，我们对 Objective-C 中的集合了解多少？一方面，它们不能包含`nil`. 它们只能包含对象。这意味着当它执行`ANY`谓词的一部分时，它将遍历数组中的项目并看到它们都不是`nil`.

因此，您的谓词失败了。我尝试使用其他一些变体（使用`[NSNull null]`代替`nil`等），但它们似乎都不起作用。

因此，您使用 a`SUBQUERY`来解决这个问题似乎与您所能得到的一样好。我强烈建议您[提交一个错误](https://bugreport.apple.com)，详细说明您的期望并说明您认为这应该起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:14:29.260

~~我相信你不能`nil`在查询中使用。您可能应该使用`NULL`或格式字符串构造，例如 `"ANY conditions.terrain == %@", nil`.~~

~~令我困惑的是你的子查询正在工作......~~

*以上是不正确的，因为`NULL`可以`NIL`互换使用。*

相反，[NSExpression 类参考](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/Reference/NSExpression.html)准确地给出了您的模式（带有`@count`）作为首选示例。

你检查地形关系是可选的吗？

# android - 如何在android中检测BT耳机或有线耳机

> ID：13193873
> 
> 赞同：0
> 
> 时间：2012-11-02T10:57:19.680
> 
> 标签：android, android-emulator, bluetooth, android-audiomanager

在我的应用程序中，我想在 android 中检测 BT 耳机或有线耳机。我从这个链接引用[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)代码。他们提到只有3.0及以上版本的android可以支持BluetoothHeadset和BluetoothProfile类。这有助于检测BT耳机。现在我想要 2.2(froyo) 中的相同功能。所以请任何人告诉我如何做同样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:10:50.870

您可以通过反射使用 2.2 中的 3.0 API。但这可能会导致您的应用程序在某些情况下无法正常工作，在某些设备上表现出不可预测的等。

如果你还想尝试，请看这里：

[如何通过反射使用蓝牙耳机类](https://stackoverflow.com/questions/7739644/how-to-use-bluetoothheadset-class-via-reflection)

**简要说明：**

名称反射用于描述能够检查同一系统（或自身）中的其他代码的代码。

例如，假设您在 Java 中有一个未知类型的对象，如果存在，您想对其调用“doSomething”方法。除非对象符合已知接口，否则 Java 的静态类型系统并非真正设计为支持这一点，但是使用反射，您的代码可以查看对象并确定它是否有一个名为“doSomething”的方法，然后调用它如果你想。

所以，给你一个 Java 中的代码示例（想象有问题的对象是 foo）：

```
Method method = foo.getClass().getMethod("doSomething", null);
method.invoke(foo, null); 
```

在上面的示例中，作者试图检测是否存在某些蓝牙类和方法，以便检测工作。如果它们存在，则使用它们。如果不是，那么您的代码必须通过通知用户或通过其他适合您的应用程序的适当机制来处理这种情况。

# scroll - iPhone Safari 在按下后退按钮后不会重新绑定滚动事件

> ID：13193878
> 
> 赞同：1
> 
> 时间：2012-11-02T10:57:59.323
> 
> 标签：scroll, jquery

我在页面 A 上绑定了一个 jQuery 页面滚动事件和一个页面调整大小事件。

我点击进入页面 B。

然后我按返回返回到页面 A。

调整大小事件仍然有效，但滚动事件没有。

其他人的一个例子在这里： http: [//nevue.net/a.htm](http://nevue.net/a.htm)。滚动几次，您可以在滚动事件的底部看到一个更新的数字。点击数字去谷歌。然后按回。在 iPhone Safari 上，这不再更新。

我尝试通过按下后退按钮来重新绑定事件。以下代码在 A 页上：

```
$(window).bind("pageshow", function(event) {
    if (event.originalEvent.persisted) {
        alert('just pressed back');
        $(window).bind("scroll", function() {
            alert('scrolling');
        });
    }
}); 
```

当您返回页面时，此代码会触发“刚刚按下”警报，但滚动事件不会反弹。

有人知道吗：

1.  为什么 Safari 保留调整大小事件而不保留滚动事件？
2.  如何重新绑定滚动事件？

# java - 在 Java 中查找整数子数组的补充

> ID：13193880
> 
> 赞同：5
> 
> 时间：2012-11-02T10:58:06.033
> 
> 标签：java, arrays, algorithm, sorting, set

让我们有`int[] A = new int[1000]`and`int[] subA = new int [300]`这样`subA \in A`(`subA`是`A`) 的子集。`A \ subA`如何在 Java 中以最快的方式找到数组？给定数组`A`和`subA`排序。

**编辑**：对不起，忘了提到数组包含不同的元素，只是它们包含其他结构的索引，如矩阵行。

我正在考虑这个解决方案：

```
// supp is short for supplement
int[] supp = new int[A.length - subA.length];
int j = A[0], c = 0;
for (int i = 0; i < subA.lengh; i++) {
    // elegantly can be: while (j < subA[i]) supp[c++] = j++;
    while (j < subA[i]) {
        supp[c] = j;
        c++; j++;
    }
    j = subA[i] + 1;
} 
```

目前正在测试这种方法。准备好答案后我会回来的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:05:31.620

尝试这样的事情：

```
// A index
int ai = 0;
// subA index
int sai = 0;
// result array
int[] result = new int[A.length - subA.length];
// index in result array
int resi = 0;

while ai < A.length && sai < subA.length;
    // same elements - ignore
    if (A[ai] == subA[sai]) {
        ai++;
        sai++;
    // found an element in A that does not exist in subA
    } else {
        // Store element
        result[resi] = A[ai];
        resi++;
        ai++;
    }
}

// Store elements that are left in A
for (;ai < A.length; ai++, resi++) {
    result[resi] = A[ai];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:38:37.673

如果你说元素是有序的并且都是不同的，那么你只需要在A中找到subA的第一个元素的索引，然后用`System.arrayCopy()`最有效的方式复制数据：

```
 int index = Arrays.binarySearch(A, subA[0]);

    int[] diff = new int[A.length - subA.length];

    System.arraycopy(A, 0, diff, 0, index);
    System.arraycopy(A, index+subA.length, diff, index, A.length-index-subA.length); 
```

PS。我没有检查所有的索引位置和计算，但你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:11:01.193

既然您说两个数组都已排序，这听起来像是“我希望您遍历两个数组并从 subA 成员之间的 A 中删除部分”对我来说有点像家庭作业。

所以让我们试着草拟一下

*   数组 A 按 1000 个成员排序
*   subA 按 300 个成员排序
*   arrayA 包含所有 subA 的元素

这意味着我们可以做类似...

```
public ArrayList findDifferences(int[] arrayA, int[] subA)
{
    ArrayList retVal = new ArrayList();
    for(int i = 0; i < arrayA.size; i++)
    {  
        if(arrayA[i] < subA[index]
            retVal.add(arrayA[i]);
        else if(arrayA[i] == subA[index])
            index++;
    }
    return retVal;
} 
```

我想说的是，你可以以某种方式计算要复制的范围，但我猜它最终会是这样。

然后还有这个

```
 List a = new List();
 a.addAll(arrayA);
 List b = new List();
 b.addAll(subA);
 a.removeAll(b);
 return a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:11:02.907

最快和最有效的方法是使 A\SubA 成为 A 上的视图，即不持有对元素的自己的引用，而是由 A 和 SubA 支持。这类似于与[Guava Sets 的区别](http://guava-libraries.googlecode.com/svn/tags/release04/javadoc/com/google/common/collect/Sets.html)。

当然，必须考虑创建该视图后对 A 和 SubA 的更改，这可能是优点或缺点，具体取决于您的情况。

任意列表的示例性实现（即在您的情况下，使用`new ImmutableSubarrayList<E>(Arrays.asList(A),Arrays.asList(SubA))`：

```
import java.util.AbstractSequentialList;
import java.util.List;
import java.util.ListIterator;
import java.util.NoSuchElementException;

public class ImmutableSubarrayList<E extends Comparable<E>> extends AbstractSequentialList<E>{

    final List<E> a, subA;
    final int size;

    public ImmutableSubarrayList(List<E> aParam, List<E> subAParam){
        super();
        a = aParam;
        subA = subAParam;
        assert a.containsAll(subA) : "second list may only contain elements from first list";

        // Iterate over a, because a.size()-subA.size() may not be correct if a contains equal elements. 
        int sizeTemp = 0;
        for (E element : a){    
            if (!subA.contains(element)){
                sizeTemp++;
            }
        }
        size = sizeTemp;
    }

    public int size() {
        return size;
    }

    public ListIterator<E> listIterator(final int firstIndex) {
        //create a ListIterator that parallely 
        // iterates over a and subA, only returning the elements in a that are not in subA
        assert (firstIndex >=0 && firstIndex <= ImmutableSubarrayList.this.size()) : "parameter was "
                           +firstIndex+" but should be betwen 0 and "+ImmutableSubarrayList.this.size();
        return new ListIterator<E>() {

            private final ListIterator<E> aIter = a.listIterator();
            private final ListIterator<E> subAIter = subA.listIterator();
            private int nextIndex = 0;

            {
                for (int lv = 0; lv < firstIndex; lv++ ){
                    next();
                }
            }

            @Override
            public boolean hasNext() {
                return nextIndex < size;
            }

            @Override
            public void add(E arg0) {
                throw new UnsupportedOperationException("The list being iteratred over is immutable");
            }

            @Override
            public boolean hasPrevious() {
                return nextIndex > 0;
            }

            @Override
            public int nextIndex() {
                return nextIndex;
            }

            @Override
            public E next() {
                if (!hasNext()){
                    throw new NoSuchElementException();
                }
                nextIndex++;
                return findNextElement();
            }

            @Override
            public E previous() {
                if (!hasPrevious()){
                    throw new NoSuchElementException();
                }
                nextIndex--;
                return findPreviousElement();
            }

            @Override
            public int previousIndex() {
                return nextIndex-1;
            }

            @Override
            public void set(E arg0) {
                throw new UnsupportedOperationException("The list being iteratred over is immutable");
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException("The list being iteratred over is immutable");          
            }

            private E findNextElement() {
                E potentialNextElement = aIter.next();
                while (subAIter.hasNext()){
                    E nextElementToBeAvoided = subAIter.next();
                    subAIter.previous();
                    assert (potentialNextElement.compareTo(nextElementToBeAvoided) > 0) : 
                        "nextElementToBeAvoided should not be smaller than potentialNextElement";
                    while (potentialNextElement.compareTo(nextElementToBeAvoided) == 0){
                        potentialNextElement = aIter.next();
                    }
                    subAIter.next();
                }
                return potentialNextElement;
            }

            //in lack of lambdas: clone of findNextElement()
            private E findPreviousElement() {
                E potentialPreviousElement = aIter.previous();
                while (subAIter.hasPrevious()){
                    E previousElementToBeAvoided = subAIter.previous();
                    subAIter.previous();
                    assert (potentialPreviousElement.compareTo(previousElementToBeAvoided) < 0) : 
                        "previousElementToBeAvoided should not be greater than potentialPreviousElement";
                    while (potentialPreviousElement.compareTo(previousElementToBeAvoided) == 0){
                        potentialPreviousElement = aIter.previous();
                    }
                    subAIter.previous();
                }
                return potentialPreviousElement;
            }
        };
    }
} 
```

# javascript - 在 tinybox 中加载页面后如何调用 javascript 函数

> ID：13193882
> 
> 赞同：0
> 
> 时间：2012-11-02T10:58:08.830
> 
> 标签：javascript

当页面在小盒子中完全加载时，我想调用一个 javascript 函数。

请问这个怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:31:25.960

当您使用 TinyBox 打开 URL 时，它会使用 iframe 将该页面加载到弹出的框中。您可以将`openjs`选项传递给函数，并在弹出窗口打开时将函数作为回调触发。但是，我注意到这并不一定会在 iframe 中的页面完全加载后发生。

如果您正在加载到 iframe 的页面位于同一域中，则您可以从 iframe 页面向父窗口触发事件。如果您使用的是 jQuery，它将类似于：

```
$(function() { 
  if (window.parent && window.parent.iframe_loaded) {
    window.parent.iframe_loaded();
  }
}); 
```

在承载 TinyBox 弹出窗口的页面中，只需`iframe_loaded`在全局范围内定义一个函数：

```
window.iframe_loaded = function() {
  alert('TinyBox popup page loaded');
}; 
```

如果您打开的页面不在同一个域中，我不知道解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T10:04:20.473

您可以在 TINY.box.show 中使用 openjs 参数

```
 TINY.box.show({ 
```

..

openjs：函数（）{随便你}，

..

})

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T10:27:13.070

你需要像这样使用**openjs ：**

```
TINY.box.show({
url:'<?php echo FL_ADD_UPDATE_EMPLOYMENT_STATUS;?>',
width:480,
height:350,
opacity:TINY_OPACITY,
openjs:function(){scroll()} // like this.
});

function scroll() {
    alert("Hello");
} 
```

# php - 如何设置每个脚本 upload_max_filesize 限制？

> ID：13193884
> 
> 赞同：2
> 
> 时间：2012-11-02T10:58:12.093
> 
> 标签：php, .htaccess, ini

我有以下问题：

如何设置每个脚本 upload_max_filesize 限制？我想为特定脚本（操作）设置更大的上传最大文件大小限制。我知道我可以使用 .htaccess，但问题是所有操作都是通过单个 index.php 文件发送的，这可能意味着所有操作的 .htaccess 规则都是相同的。那么是否可以为单个 php 脚本（操作）设置每个脚本的 max_upload_size ？

希望，你能帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:03:28.983

它不可能.. 你必须在你的 php.ini 或 htaccess 中设置这个 upload_max_filesize ..

[在 PHP 上更改 upload_max_filesize](https://stackoverflow.com/questions/1122418/changing-upload-max-filesize-on-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:03:40.240

您可以尝试将此代码插入到您的 PHP 脚本（操作）中：

```
ini_set('upload_max_filesize', '25M'); 
```

或在另一个动作中另一个值：

```
ini_set('upload_max_filesize', '120M'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T21:34:07.967

我可能找到了解决方案。这将适用于`big_file_upload.php`.

```
<If "%{REQUEST_URI} == '/subfolder/big_file_upload.php'" >
php_value upload_max_filesize 200M
php_value post_max_size 200M
</If>
<Else>
php_value upload_max_filesize 1M
php_value post_max_size 1M
</Else> 
```

例如，您可以`If`使用其他变量更改条件`%{QUERY_STRING}`。如果您要路由到`index.php?key=value`那时`%{QUERY_STRING} == 'key=value'`

# wpf - 以编程方式在 WPF DataGrid 中选择多行

> ID：13193890
> 
> 赞同：0
> 
> 时间：2012-11-02T10:58:44.390
> 
> 标签：wpf, wpfdatagrid

嗨，我有一个 wpf 数据网格，它有两列说

```
key    Value
1       abc
2       xyz
3       pqr 
```

我有复选框，其值相当于列中的键。如果选中相关键，则必须选择对应的行。选中多个复选框选择数据网格中的多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:57:52.047

xml:

```
<StackPanel>
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding List}">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn Header="Check" 
                Binding="{Binding IsCheck, UpdateSourceTrigger=PropertyChanged}"/>
            <DataGridTextColumn Header="Key" Binding="{Binding Key}"/>
            <DataGridTextColumn Header="Value" Binding="{Binding Value}"/>
        </DataGrid.Columns>
    </DataGrid>
    <CheckBox Content="1" DataContext="{Binding List[0]}" IsChecked="{Binding IsCheck}"/>
    <CheckBox Content="2" DataContext="{Binding List[1]}" IsChecked="{Binding IsCheck}"/>
    <CheckBox Content="3" DataContext="{Binding List[2]}" IsChecked="{Binding IsCheck}"/>
</StackPanel> 
```

后面的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        //fill 'List' here...
        DataContext = this;
        InitializeComponent();
    }
    //List Observable Collection
    private ObservableCollection<Row> _list = new ObservableCollection<Row>();
    public ObservableCollection<Row> List { get { return _list; } }
} 
```

行类：

```
public class Row: DependencyObject
{
    //Key Dependency Property
    public int Key
    {
        get { return (int)GetValue(KeyProperty); }
        set { SetValue(KeyProperty, value); }
    }
    public static readonly DependencyProperty KeyProperty =
        DependencyProperty.Register("Key", typeof(int), typeof(Row), new UIPropertyMetadata(0));
    //Value Dependency Property
    public string Value
    {
        get { return (string)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }
    public static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(string), typeof(Row), new UIPropertyMetadata(""));
    //IsCheck Dependency Property
    public bool IsCheck
    {
        get { return (bool)GetValue(IsCheckProperty); }
        set { SetValue(IsCheckProperty, value); }
    }
    public static readonly DependencyProperty IsCheckProperty =
        DependencyProperty.Register("IsCheck", typeof(bool), typeof(Row), new UIPropertyMetadata(false));
} 
```

# objective-c - 使用 Cocos2d 和 Box2d 进行关卡设计

> ID：13193892
> 
> 赞同：0
> 
> 时间：2012-11-02T10:58:46.017
> 
> 标签：objective-c, ios, cocos2d-iphone, box2d, game-physics

我想学习如何使用 cocos2d 和 box2d（适用于 iOS）制作关卡。
我说的是 2d 平台游戏，例如 Limbo 或 Braid 或类似的东西。我怎样才能设计和构建这样的关卡？

我见过 cocos2d 的 Level Helper，但它不是免费的，而且我认为它不会为 box2d 制作物理对象。这在真实游戏中是如何实现的？

如何使相机随角色移动等。任何起点将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:03:59.153

这些是 2d 滚动平台游戏的优秀教程

[http://www.raywenderlich.com/15230/how-to-make-a-platform-game-like-super-mario-brothers-part-1](http://www.raywenderlich.com/15230/how-to-make-a-platform-game-like-super-mario-brothers-part-1)

[http://www.raywenderlich.com/15267/how-to-make-a-platform-game-like-super-mario-brothers-part-2](http://www.raywenderlich.com/15267/how-to-make-a-platform-game-like-super-mario-brothers-part-2)

# android - 我们可以从 android xml 数组中解析数组元素和值吗

> ID：13193901
> 
> 赞同：1
> 
> 时间：2012-11-02T10:59:41.553
> 
> 标签：android, android-xml

我们可以从 xml 布局中使用的 android 数组中解析数组元素和值吗？

```
<string-array name="country_arrays">

    <item>ABC</item>
    <item>DEF</item>
    <item>FHI</item>
    <item>JKL</item>

</string-array> 
```

在这个数组中，我们只能解析字符串值，但我想解析一个也附加到每个字符串的 id。在 HTML 中，我们可以使用 HTML 元素解析 value 属性。我不知道这是否可以用 Android 完成，但如果有可能会减少很多工作，请帮我纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:07:42.750

不，这是不可能的，但是当您将数组加载到 Java 代码中时，您可以使用 id 。

# html - 具有绝对定位元素的 Clearfix

> ID：13193903
> 
> 赞同：8
> 
> 时间：2012-11-02T11:00:08.320
> 
> 标签：html, css, positioning, clearfix

我的问题如下：
边框不包裹包含的项目。我知道这是因为我将内容项定位为绝对，但我需要它们是绝对的，布局才能正常工作。这也意味着我不能使用 clearfix 解决方案（这意味着我必须浮动元素，这不是一个选项）。
所以我的问题是，如何让父 div 获取包含元素的高度。

**编辑：没有 Javascript 解决方案，只有 CSS**

html:

```
<div class="mask">
    <div id="content-1" class="content-item">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit...
    </div>
    <div id="content-2" class="content-item">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit...
    </div> 
</div>​​​​ 
```

CSS：

```
.mask{
    position:relative;
    width:800px;
    border: 1px solid black;

}
.content-item{
    position: absolute;
    width:300px;
}
#content-1{
    left:10px;
}
#content-2{
   left: 300px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T07:25:24.187

将一项设置为`float:left`，将另一项设置为`position:absolute; right:0`并使用`clearfix`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:13:51.613

`position: absolute;`将of更改`.content-item`为`position: relative;`并给它一个`float: left;`. 删除`#content-1`and `#content-2`，你不再需要它们了。最后在你的 html 中插入一个新类（在 2 个`#content`id 之后），并`clear: both;`在你的样式表中添加一个到该类。

示例：http: [//jsfiddle.net/skeurentjes/xLTJp/1/](http://jsfiddle.net/skeurentjes/xLTJp/1/)

# jquery - jQuery 不适用于 Rails 3.2.8

> ID：13193905
> 
> 赞同：4
> 
> 时间：2012-11-02T11:00:14.680
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我在使用 jQuery on Rails 3.2.8 时遇到问题。我已经安装了 jquery-rails gem，并且我的 application.js 具有以下内容：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

views/layouts/application.html.erb 有

```
<%= javascript_include_tag "application" %> 
```

test.js 中的一个简单的 Javascript 测试：

```
if (jQuery) {
alert('Jquery is loaded')
} else {
alert ('Jquery is not loaded')
} 
```

给我一个警报，告诉我 jQuery 确实已加载。

但是，没有 jQuery 命令可以工作，即使是基本命令也没有响应：

```
$(document).ready(function(){
 $("a").click(function(event){
 alert("Thanks for visiting!");
});
}); 
```

我已经尝试了一切——甚至通过 Google API 重新包含 jQuery。关于可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:27:11.017

修复！

在 application.html.erb 中，我改变了这两行的顺序：

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %> 
```

到：

```
<%= javascript_include_tag "application" %>
<%= stylesheet_link_tag    "application", :media => "all" %> 
```

现在它起作用了！我不太清楚为什么，有人可以解释吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:12:01.163

您可能想在您正在测试的浏览器中检查控制台。

在 jQuery 的情况下，$ 只是 jQuery 的别名，是否可以执行以下操作

```
jQuery(document).ready(function(){
   jQuery("a").click(function(event){
     alert("Thanks for visiting!");
   });
}); 
```

也许您在某处调用了 jQuery.noConflict() 并删除了别名？

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:15:26.870

确保`yield`在`application.html.erb`. 如果您使用的是 Bootstrap，我认为默认`application.rb`会在 yield 之后加载 JS，这使得必须等到 jQuery 加载完毕后再在您的视图中运行它。

如果是这种情况，并且您不想在页面上将包含标记重新定位到更高的位置，则可以执行以下操作：

```
runScript();
function runScript() {
    if( window.$ ) { // Make sure jquery is loaded
         // your jquery code here
    } else {
        window.setTimeout(runScript, 100); // If not, wait 100 milliseconds and try again.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T12:08:20.250

虽然现在回答为时已晚，但我仍然会提供，因为我遇到了同样的问题并且浪费了 2 个小时。删除 js 文件中的注释，因为它们是 ruby​​ 注释而不是 js 注释。如果您删除它们并编写您的 js 代码，它会正常工作。

# node.js - 实时 Meteor.js http.get

> ID：13193908
> 
> 赞同：3
> 
> 时间：2012-11-02T11:00:21.870
> 
> 标签：node.js, socket.io, meteor

我正在寻找开发一个依赖于与外部服务 API 对话的新应用程序。

例如，我想创建一个实时 Twitter 提要，每次有新推文时都会更新，我想使用 Meteor 作为框架，但我不确定 Meteor 是否可以在不刷新页面的情况下自动显示新推文。

我知道我可以用 Node.js 和 Socket.io 做到这一点，但是否可以只用 Meteor 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T01:16:49.840

从外部来源检索数据基本上有两种方法。服务器上的 Ajax 或 http 请求。我最近解决了这个问题，但不得不使用第二种方法。

客户端.js

```
Meteor.startup( function() {
    Meteor.call( 'openSession', function( err, res ) {
        if( !err ) Session.set( 'data', res );
    });
}); 
```

服务器.js

```
Meteor.methods({
    openSession: function() {
        var fut = new Future(), url = 'http://www.google.com';

        // Do call here, return value with Future
        Meteor.http.get(url, function( err, res ){
            fut.ret(res);
        });

        // Force method to wait on Future return
        return fut.wait();
    }

}); 
```

如您所见，我不得不使用 Future 让 Meteor 与异步 http 请求一起播放。但是，它就像在服务器端定义方法一样简单，然后在客户端调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:17:52.283

有`Meteor.http`获取外部数据。（[文档](http://docs.meteor.com/#meteor_http)）

您可以在服务器中使用它并将新推文添加到集合中。

订阅此集合的所有客户端当然会保持同步。

# sql-server-2008 - SQL Server 2008 中带有空格的全文搜索

> ID：13193914
> 
> 赞同：4
> 
> 时间：2012-11-02T11:00:42.073
> 
> 标签：sql-server-2008, full-text-search

在 SQL Server 2008 中使用全文搜索搜索数据时出现问题。

当我搜索没有空格的数据时，它可以工作，但是当我输入带有空格的数据时，它会出错。

就像我搜索`'amit'`它一样，但如果数据是`'amit is working'`它会给出错误。

我将 ASP.NET MVC 4.0 与 SQL Server 2008 一起使用。

谢谢阿米特。

```
Create PROC [usp_Feedback_Search]
@Word nvarchar(500) ,   
@CompanyId UNIQUEIDENTIFIER     

As
IF ISNULL(@Word,'') = ''
 BEGIN
 Select          
  [Id] ,
[Content] ,    
[UserId],    
 [VoteCount] ,
 [IsOpen],
 [Deleted],
 [RowVersion],    
 [CreatedBy],     
 [CreatedOn],    
 [UpdatedOn],    
 [UpdatedBy],       
 [CompanyId], 
 [DisplayId],
  [Status]
 FROM Feedback         
  WHERE CompanyId=@CompanyId
  END
 ELSE
  BEGIN   

DECLARE @formatedWord varchar(500)='"'+@word+'\+"'

  Select          
  [Id] ,
[Content] ,    
[UserId],    
 [VoteCount],
 [IsOpen],
 [Deleted],
 [RowVersion],    
 [CreatedBy],     
 [CreatedOn],    
 [UpdatedOn],    
 [UpdatedBy],       
 [CompanyId], 
 [DisplayId],
  [Status]    
  FROM Feedback            
  Where CONTAINS(*,@Word)     
  and CompanyId=@CompanyId
  END
 GO 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T21:02:44.360

我认为阿米特的回答可能是阿米特独有的。对于其他所有人...

**将值用双引号括起来：**

```
SELECT ... WHERE Contains(tablename.columnname, '"amit is working"') 
```

是答案

> *在 SQL Server 2008 中使用全文搜索搜索数据时出现问题。*
> 
> *当我搜索没有空格的数据时，它可以工作，但是当我输入带有空格的数据时，它会出错。*
> 
> *就像我搜索“amit”一样，它可以工作，但如果数据是“amit 正在工作”，它会出错。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T11:46:57.200

亲爱的朋友，您需要忽略@、空格等通配符。

使用下面的更新代码：

```
Create PROC [usp_Feedback_Search]
@Word nvarchar(500) ,   
@CompanyId UNIQUEIDENTIFIER     

As
IF ISNULL(@Word,'') = ''
 BEGIN
 Select          
  [Id] ,
[Content] ,    
[UserId],    
 [VoteCount] ,
 [IsOpen],
 [Deleted],
 [RowVersion],    
 [CreatedBy],     
 [CreatedOn],    
 [UpdatedOn],    
 [UpdatedBy],       
 [CompanyId], 
 [DisplayId],
  [Status]
 FROM Feedback         
  WHERE CompanyId=@CompanyId
  END
 ELSE
  BEGIN   

DECLARE @formatedWord varchar(500)='"'+@word+'\+"'

  Select          
  [Id] ,
[Content] ,    
[UserId],    
 [VoteCount] ,
 [IsOpen],
 [Deleted],
 [RowVersion],    
 [CreatedBy],     
 [CreatedOn],    
 [UpdatedOn],    
 [UpdatedBy],       
 [CompanyId], 
 [DisplayId],
  [Status]    
  FROM Feedback            
  Where CONTAINS(*,@formatedWord)     
  and CompanyId=@CompanyId
  END
 GO 
```

希望这会奏效...... [http://searchsqlserver.techtarget.com/tip/Using-full-text-search-for-symbols-in-SQL-Server](http://searchsqlserver.techtarget.com/tip/Using-full-text-search-for-symbols-in-SQL-Server)

# jsp - 自定义控件的 XPage 设计定义

> ID：13193916
> 
> 赞同：0
> 
> 时间：2012-11-02T11:01:14.867
> 
> 标签：jsp, xpages

在 XPages 设计定义中，如何获取自定义控件的名称。我发现

```
<%=this.viewName %> 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:03:48.647

在此阶段，根据上述响应，这是不可能的。我必须通过输入自定义控件的名称来手动实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:45:00.110

XPages 是 JSF 而不是 JSP。所以 JSP 构造将不起作用（除了在设计定义中）。因此`<%`不是 XPages 中支持的构造。EL 语法是`#{...}`or `${...}`。您是否尝试使用视图对象？它是一个`com.ibm.xsp.component.UIViewRootEx2`，您可以使用该类或[查询属性](http://www.openntf.org/xspext/xpages%20extension%20library%20documentation.nsf/xpages-doc/xp_view.html)或更好地使用[API Inspector](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20API%20Inspector)。至少 className 会给你你正在寻找的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T21:28:58.340

设计定义中的 xp.image 标记在 xpages 中有效。我发现，设计定义会加快在 DDE 中的上传速度，如果没有设计定义，则会计算标签并减慢速度，从而减慢 xpage 在 DDE 中的加载速度。 [自定义控件的 XPage 设计定义](https://stackoverflow.com/questions/13193916/xpages-design-definition-for-a-custom-control/48551751#48551751)

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom">
<xp:div style="background-color:blue; color:white; padding:3px;">
Begin This is Month Picker Custom Control</xp:div>
<xp:image url="/esaCboxFilters.GIF"></xp:image> 
<xp:panel> 
tagCloud for <!-- %=this.viewName % this does not work --> 
</xp:panel> 
</xp:view> 
```

[![设计定义在设计窗格中的外观](../Images/2bf373dec083341be62489458acd8e3f.png)](https://i.stack.imgur.com/RMdah.gif)

# java - web.xml 中的条件错误页面/使用 Jersey 跳过错误页面

> ID：13193920
> 
> 赞同：5
> 
> 时间：2012-11-02T11:01:27.573
> 
> 标签：java, jersey, web.xml

我有一个带有 JSF 和 Jersey 的 Web 应用程序：

```
/contextpath/rest/whatever -> Jersey
/contextpath/everythingelse -> JSF 
```

如果 JSF 出现错误，即 500 internal server error，由于 web.xml 中的配置，会显示错误页面

```
...
<error-page>
   <error-code>403</error-code>
   <location>forbidden.jsp</location>
</error-page>
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/path/to/errorhandler.jsp</location>
</error-page> 
```

这在“JSF-land”中按预期工作。但是，如果 Jersey 资源抛出异常：

1.  一个 ExceptionMapper (Jersey) 处理异常，并且，
2.  发送错误响应（例如 403 禁止）
3.  由于是在 web.xml 中定义的，所以会提供禁止的.jsp 页面

这会产生调用forbidden.jsp 的不良副作用，并将HTML 返回给请求应用程序/json 的客户端。我的第一个想法是有条件地编写错误页面语句，因此它们只会在非休息资源上起作用，但这似乎是不可能的。

其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-14T10:13:20.177

所以，如果有人在 8 年后仍然面临这个问题（是的，我也不为此感到自豪......）这就是我解决它的方法：

向 web.xml 添加了一个针对 servlet 的错误页面：

```
<error-page>
    <error-code>403</error-code>
    <location>/403Handler</location>
</error-page> 
```

创建了 403Handler servlet：

```
@WebServlet("/403Handler")
public class 403Handler extends HttpServlet {
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    processError(request, response);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) {
    processError(request, response);
}

private void processError(HttpServletRequest request, HttpServletResponse response) {
    Integer statusCode = (Integer) request.getAttribute("javax.servlet.error.status_code");
    if (statusCode != 403) {
        return;
    }

    String originalUrl = (String) request.getAttribute("javax.servlet.error.request_uri");
    if (StringUtils.startsWith(originalUrl, "contextpath/rest")) {
        return;
    }

    try {
        request.getRequestDispatcher("/path/to/errorhandler.jsp").forward(request, response);
    } catch (ServletException | IOException e) {
        log.error("failed to foward to error handler", e);
    }
} 
```

# php - 带有弹出窗口的 jQuery 图像库

> ID：13193921
> 
> 赞同：-2
> 
> 时间：2012-11-02T11:01:33.540
> 
> 标签：php, javascript, jquery

我已经尝试了很多来找到像这样弹出的图片库 - ：[画廊](http://www.selfstorage.com/self-storage/california/san-diego/price-self-storage-murphy-canyon-65320/) 谁能给我一些建议来开发它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:26:53.893

对于弹出使用以下插件 [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

对于 Image Galley，请使用以下插件 [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:32:58.853

在这里你去[http://www.justinbarkhuff.com/lab/lightbox_slideshow/](http://www.justinbarkhuff.com/lab/lightbox_slideshow/)你可以去示例部分找到确切的东西。

# objective-c - 从参考 NSDate 获取一周中下一天的 NSDate？

> ID：13193924
> 
> 赞同：2
> 
> 时间：2012-11-02T11:01:46.690
> 
> 标签：objective-c, ios, date, nsdate, nsdatecomponents

给定一个参考日期，我需要找到下面的“星期三”。

需要明确的是，如果参考日期是星期二，那么它应该从**同**一周返回星期三。

如果参考日期是星期三或更晚，则需要从下周返回下**一个**星期三。

重要的是它不会返回参考日期之后的星期三。

我一直在考虑使用`NSDateComponents`但不确定如何获得必须始终在未来的一周中的第二天。

这是我到目前为止所拥有的：

```
NSDate *referenceDate = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:referenceDate];
[dateComponents setWeekday:4]; // Wednesday
NSDate *followingWednesday = [calendar dateFromComponents:dateComponents]; 
```

虽然这段代码没有区分同一周过去的星期三或下一个星期三，但我的问题是存在的。

我知道我可以生成两个日期，一个来自本周，一个来自下周，然后使用 if 语句检查哪个是未来，但这似乎需要很多代码来做一件简单的事情。

有没有更好的办法？

任何帮助，将不胜感激。

* * *

**更新**

似乎设置工作日实际上并不影响`dateComponents:`NSCalendar 方法返回的日期。无论工作日设置什么，我上面的示例代码都会返回相同的日期。

所以现在我更难过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:34:43.983

我会这样做：

```
NSDate *referenceDate = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit | NSWeekCalendarUnit | NSWeekdayCalendarUnit) fromDate:referenceDate];

int targetWeekday = 4;

if (dateComponents.weekday >= targetWeekday)
{
    dateComponents.week++;
}

dateComponents.weekday = targetWeekday;
NSDate *followingTargetDay = [calendar dateFromComponents:dateComponents]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:35:27.673

您必须通过 NSDateFormatter。你可以做这样的事情来计算下一个星期三。我不确定你想要什么，但这里有一个例子：

```
NSDate *referenceDate = [NSDate date];
NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *mincomp = [cal components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:referenceDate];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"e"];
while ([[formatter stringFromDate:[cal dateFromComponents:mincomp]] intValue] != 4)
    mincomp.day += 1;
[formatter setDateFormat:@"yyyy-MM-dd"];
NSLog(@"next wednesday = %@", [formatter stringFromDate:[cal dateFromComponents:mincomp]]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:54:43.513

采用`dateWithNaturalLanguageString`

```
NSDate *date = [NSDate dateWithNaturalLanguageString:@"next Wednesday"];
NSLog(@"%@",date); 
```

**注意**：：`dateWithNaturalLanguageString`_

> 创建并返回一个 NSDate 对象，该对象设置为给定字符串指定的日期和时间。

```
+ (id)dateWithNaturalLanguageString:(NSString *)string 
```

**参数**

**细绳**

> 包含日期的口语规范的字符串，例如“上周二晚餐”、“2001 年 12 月 31 日下午 3 点”、“2001 年 12 月 31 日”或“2001 年 12 月 31 日”。</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:19:17.790

我还没有把整个事情很好地捆绑起来，因为我昨天巧合地完成的实现是在另一台计算机上，但大致是：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"e"];
NSInteger day = [[formatter stringFromDate:theDate] integerValue];
NSInteger offsetDays = (targetDay - day);  // targetDay is 4 for Wednesday
if (offsetDays < 0) offsetDays += 7;
NSDate* resultDate = [theDate dateByAddingTimeInterval:offsetDays * secondsInADay]; 
```

（offsetDays 的计算可能有点混乱——这种事情需要比早上这个时候更多的思考。）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-18T17:22:30.747

[这家伙搞定了。](http://danroundhill.com/2011/05/16/how-to-get-an-nsdate-for-a-specific-day-of-week-and-time-from-an-existing-nsdate/)

适用于 OP：

```
NSDate *refDate = [NSDate date]; // or whatever
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setLocale:[NSLocale currentLocale]];

NSDateComponents *nowComponents = [gregorian components:NSYearCalendarUnit | NSWeekCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:refDate];
int wednesday = 4;
if(nowComponents.weekday >= wednesday) {
    [nowComponents setWeek: nowComponents.week + 1]; // Next week
}
[nowComponents setWeekday:wednesday]; // Wednesday
[nowComponents setHour:8]; // Specific time (if desired)
[nowComponents setMinute:0];
[nowComponents setSecond:0];

NSDate *nextWednesday = [gregorian dateFromComponents:nowComponents]; 
```

正如您所说，即使参考日期是星期三，每次都会得到“下一个星期三”。

**编辑**：修复了评论中指出的错误。

# f# - 解析/评估不是值，而是保存函数？所以解析只发生一次

> ID：13193925
> 
> 赞同：2
> 
> 时间：2012-11-02T11:01:52.330
> 
> 标签：f#

我正在尝试实现类似电子表格的功能，它维护变量并在其他变量或“单元格”发生变化时正确更新它们。

到目前为止，我看到的唯一实现是将输入的数据存储在字符串中并对其进行评估，但是当数据更改并且需要重新计算单元格时，它总是需要再次评估字符串。

我只是想知道是否有可能将像 Cell1 = "SQUARED (4)" 这样的字符串解析为 Cell1 = squared 4 所以不是将值计算到单元格中，而是需要再次运行字符串并且再次，当需要重新计算时，它可以以某种方式在某处保存实际的函数和值，以便解析和评估只需要发生一次。

如果这不可能，那么我需要创建一个代码生成器，因为我需要速度非常快并且不能承受严重的性能损失。评估、编译等的速度并不重要。当输入数据更改数百万次并通过类似系统的“电子表格”传播时，这是创建所有单元格后的速度。

所以这首先只是一个是或否的问题。如果可能的话，任何示例当然都会有所帮助。编辑：好吧，我想这真的很有帮助，因为我自己无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:58:21.427

如果您对实现电子表格之类的东西感兴趣，那么有两件事可能会有所帮助。

*   首先，[Cellz 项目](http://cellz.codeplex.com/)是 F# 中电子表格的示例实现。它包括一个简单的字符串解析器，如“=SUM(A1:A10)”，并从这些字符串构建一个表达式树（只完成一次）。其次，它还包括一个计算表达式值的求值器。

*   其次，Luca Bolognese 对名为“Eden”的计算框架的实现进行了几次讨论，您在其中描述了单元格的计算，当单元格中的值发生变化时，变化会自动传播（并且仅重新计算相关单元格）。他将在[TechMesh London 2012](http://techmeshconf.com/techmesh-london-2012/presentation/Eden%3a%20An%20F#/WPF%20framework%20for%20building%20GUI%20tools)上发表演讲，但我认为这已经记录在某个地方（但找不到）。

Eden 背后的基本思想是将单元格表示为具有当前值和在值更改时触发的事件的东西：

```
type Cell<'T> =
  abstract Value : 'T  
  abstract Changed : IEvent<unit> 
```

显式创建和变异的单元格具有可变性`Value`，并在用户更改值时触发事件：

```
type MutableCell<'T>(value:'T) = 
  let mutable currentValue = value
  let event = Event<unit>()
  member x.Value 
    with get() = currentValue
    and set(v) = 
        currentValue <- v
        event.Trigger()
  interface Cell<'T> with 
    member x.Value = currentValue
    member x.Changed = event.Publish 
```

然后，您还可以构建由于某些计算而产生的单元格。这是演讲或博客文章的主题，而不是 SO 答案，但是将单元格中的值映射到另一个单元格的简单转换如下所示：

```
let map f (cell:Cell<_>) =
  let currentValue = ref (f cell.Value)
  cell.Changed.Add(fun () -> currentValue := f cell.Value) 
  { new Cell<_> with
      member x.Value = currentValue.Value
      member x.Changed = cell.Changed } 
```

您需要能够组合来自多个单元格等的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:04:21.993

Don Syme 的关于记忆的博客中有一个很好的例子 - [https://blogs.msdn.com/b/dsyme/archive/2007/05/31/a-sample-of-the-memoization-pattern-in-f .aspx?重定向=真](https://blogs.msdn.com/b/dsyme/archive/2007/05/31/a-sample-of-the-memoization-pattern-in-f.aspx?Redirected=true)

你写这个函数

```
let memoize f =
    let cache = Dictionary<_, _>()    
    fun x ->    
        if cache.ContainsKey(x) then cache.[x]    
        else let res = f x    
             cache.[x] <- res    
             res 
```

然后你可以创建一个记忆函数，如：

```
let memoizedAppend =
    memoize (fun input ->
        printfn "Working out the value for '%A'" input
        String.concat ", " [ for i in 0 .. 9 -> sprintf "%d: %s" i input ]) 
```

# angularjs - 在 AngularJS 的嵌入指令中使用 `ng-model`

> ID：13193929
> 
> 赞同：0
> 
> 时间：2012-11-02T11:01:56.560
> 
> 标签：angularjs

无论如何我可以`ng-model`在指令的嵌入中使用 use 吗？

我在这里发布了代码：http: [//plunker.no.de/edit/XWAUp7 ?live=preview](http://plunker.no.de/edit/XWAUp7?live=preview)

我期待有人给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:39:26.643

这是因为您正在传递原始类型。如果您使用引用类型，如对象或数组，它会工作得更好。[我已经在这个演示](http://plunker.no.de/edit/OKjvrv)中改变了你的 plunk

请注意，我必须将一个对象传递给 fOuter 才能使其工作。同样，在 fInner 上，如果原语是对象的子对象，则它可以双向工作。

编辑：看起来 Guillaume86 在评论中回答了。一样的答案，真的。

# sql - 同一张表之间多对多的级联删除

> ID：13193935
> 
> 赞同：7
> 
> 时间：2012-11-02T11:02:35.873
> 
> 标签：sql, sql-server, sql-server-ce, cascade

我正在尝试在 SQL Server 中的同一个表之间创建多对多关系。

我有一张`Object`带有列`ObjectId`和`Name`.

关系遵循以下规则：

*   一个孩子可以有很多父母
*   父母可以有很多孩子
*   ObjectA 可以是 ObjectB 的子对象，ObjectB 可以是 ObjectA 的子对象
*   但一个对象不能是它自己的直接孩子

所以我创建了第二个`ObjectRelation`带有列`ParentId`的表`ChildId`，当然我希望这些关系被级联删除。

但是当我在 SQL Server 中尝试这个时，我得到了错误

> 在表“tblADMembership”上引入 FOREIGN KEY 约束“FK_ObjectRelation_Object1”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

在 SQL Server Compact 我得到

> *引用关系将导致不允许的循环引用。*

我已经进行了一些研究，并且理解了为什么会出现这些错误，但是有没有办法解决这个问题，也可以在 SQL Server Compact 上运行（所以没有存储过程）？或者有没有更好的方法来模拟这种关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:06:34.467

我自己也遇到过类似的问题......我最终删除了外键。循环删除逻辑被推送到代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T12:17:16.680

我对树视图有类似的问题。这是一个对我有用的删除代码：（我将 id 保存到 value 属性中，我正在使用实体模型框架来删除）也许可以帮助某人

```
private void removeRecursive(TreeNode parentToDelete)
    {
        foreach (TreeNode tn in parentToDelete.ChildNodes)
            removeRecursive(tn);

        long id = long.Parse(parentToDelete.Value);
        Category deleteCat = context.Categories.Single(x => x.Id ==id);
        context.Categories.DeleteObject(deleteCat);
    } 
```

PD对不起我的英语太糟糕了......

# javascript - HTML5 音频在某些浏览器中不起作用

> ID：13193938
> 
> 赞同：1
> 
> 时间：2012-11-02T11:02:47.203
> 
> 标签：javascript, jquery, html

我在游戏中使用这些声音，所以我在整个播放过程中通过 JQuery 多次调用它们。在 fireFox 中，声音播放正常，但在 Chrome 和 Safari 中，它们每次只播放一次。

```
<div class="audio-wrapper">

    <audio id="successSound" preload="auto">
        <source src="sounds/games-sound-fx/cashtill.ogg" type='audio/ogg; codecs="vorbis"'></source>
        <source src="sounds/games-sound-fx/cashtill.mp3" type='audio/mpeg; codecs="mp3"'></source>
    </audio>

    <audio id="failSound" preload="auto">
        <source src="sounds/games-sound-fx/electric.ogg" type='audio/ogg; codecs="vorbis"'></source>
        <source src="sounds/games-sound-fx/electric.mp3" type='audio/mpeg; codecs="mp3"'></source>
    </audio>

    <audio id="moveSound" preload="auto">
        <source src="sounds/games-sound-fx/throw.ogg" type='audio/ogg; codecs="vorbis"'></source>
        <source src="sounds/games-sound-fx/throw.mp3" type='audio/mpeg; codecs="mp3"'></source>
    </audio>

    <audio id="hitSound" preload="auto">
        <source src="sounds/games-sound-fx/hit.ogg" type='audio/ogg; codecs="vorbis"'></source>
        <source src="sounds/games-sound-fx/hit.mp3" type='audio/mpeg; codecs="mp3"'></source>
    </audio>

    <audio id="missSound" preload="auto">
        <source src="sounds/games-sound-fx/miss.ogg" type='audio/ogg; codecs="vorbis"'></source>
        <source src="sounds/games-sound-fx/miss.mp3" type='audio/mpeg; codecs="mp3"'></source>
    </audio>

    <audio id="audio-bg">
        <source src="sounds/games-sound-fx/BGmusic.ogg" type='audio/ogg; codecs="vorbis"'></source>
        <source src="sounds/games-sound-fx/BGmusic.mp3" type='audio/mpeg; codecs="mp3"'></source>
    </audio>
</div> 
```

在脚本中，我把我的大部分声音都称为这样..

```
var successSound = $("#successSound")[0];
successSound.play(); 
```

但其中一些具有超时功能。有没有更好的方法可以正确支持所有浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:13:36.553

当您播放声音时，它会在音频通道上播放。使用您列出的代码，当您尝试播放第二个声音时，它将尝试在同一音频通道上播放。如果此时第一个声音还没有结束，它将阻止正在播放的第二个声音。诀窍是有一点 Javascript 可以判断音频元素是否已完成播放，如果没有，请使用不同的。

这是一个带有一些很好的示例代码的 URL：http: [//www.storiesinflight.com/html5/audio.html](http://www.storiesinflight.com/html5/audio.html)

# f# - 升级到 VS2012 后无法使用 Resharper 运行 F# nunit 测试

> ID：13193939
> 
> 赞同：6
> 
> 时间：2012-11-02T11:02:55.160
> 
> 标签：f#, nunit, visual-studio-2012, resharper

我正在尝试将我们的解决方案从 V2012 升级到针对 4.5 的 V2012。我们有一些带有单元测试的 F# 代码，这些代码是使用 NUnit 编写的。我们正在使用 Resharper 在 Visual Studio 中执行我们的测试。

将项目升级到 VS2012 后，我们的 F# 单元测试不会显示在 Resharpers 单元测试窗口中。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:17:29.603

ReSharper 7 中的[新增功能](https://www.jetbrains.com/resharper/whatsnew/index.html#unit-testing)页面说 ReSharper 7 引入了 NUnit 2.6 作为单元测试的默认版本。

根据[NUnit 发行说明](http://nunit.org/?p=releaseNotes&r=2.6.2)，在 NUnit 2.6.2 中引入了对 VS2012 / .NET 4.5 的支持。

如果 ReSharper 7 使用的是 NUnit 2.6（最终版本），这可能就是升级项目后它没有参与单元测试的原因。我认为最好的办法是联系[ReSharper 支持](https://www.jetbrains.com/support/resharper/)或[ReSharper 开发人员社区](http://devnet.jetbrains.net/community/resharper)，询问是否有办法让事情正常进行；如果没有，他们应该能够将 NUnit 2.6.2 放入下一个版本（ReSharper 7.1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T15:05:16.990

尝试使用 ReSharper 键盘快捷键运行测试或右键单击类/方法内部或测试文件时，我遇到了同样的问题，但是当我右键单击 .sln 并选择运行测试时它可以工作。

希望对其他人也有帮助！

# joomla - 如何使用 ajax 使用 ajax 在 德德玛特 中的特色产品上显示添加到购物车数量框

> ID：13193940
> 
> 赞同：0
> 
> 时间：2012-11-02T11:02:57.957
> 
> 标签：joomla, virtuemart

如何使用 ajax 在特色产品上显示添加到购物车数量框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:43:45.820

您需要自定义此部分。

如果您想在任何地方添加 addtocart 按钮和数量框，您可以从详细信息页面复制默认的 VM 购物车表单。这个表单有一些隐藏的字段，比如

```
 virtuemart_product_id,virtuemart_catgory_id ,qty 
```

此文件的名称与提交到 cart.php 控制器中 addjs 函数的表单相同。在此表单中，您只需创建数量框。

祝你好运

# xml - XSLT Remove Soap Env & Copy SINGLE XSI Tag into its own field

> ID：13193957
> 
> 赞同：1
> 
> 时间：2012-11-02T11:03:33.907
> 
> 标签：xml, xslt

我正在尝试从肥皂环境中复制 XML，并且我已经能够成功完成此操作。接下来我想删除所有 XMLNS，我再次能够成功完成。但是，我现在尝试从 XML 有效负载中间选择一个 XSI 属性，并在 XML 中创建一个新字段，其中包含 XSI=TYPE 字段的内容。我将展示我想要做什么：

示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <notifications xmlns="http://soap.sforce.com/2005/09/outbound">
            <ActionId>04kf000000000FfAAI</ActionId>
            <SessionId xsi:nil="true"/>
            <Notification>
                <Id>04lf00000000xvQAAQ</Id>
                <sObject xsi:type="sf:Account" xmlns:sf="urn:sobject">
                    <sf:Id>001f0000006UzdCAAS</sf:Id>
                    <sf:Customer_Number__c>dummy1234</sf:Customer_Number__c>
                    <sf:FirstName>Test</sf:FirstName>
                    <sf:LastModifiedDate>2012-10-15T10:59:54.000Z</sf:LastModifiedDate>
                    <sf:LastName>Test</sf:LastName>
                </sObject>
            </Notification>
        </notifications>
    </soapenv:Body>
</soapenv:Envelope> 
```

当前 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:r="http://soap.sforce.com/2005/09/outbound"
    exclude-result-prefixes="r">

    <xsl:output method="xml" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:apply-templates select="/soap:Envelope//r:notifications"/>
    </xsl:template>

    <xsl:template match ="*" >
        <xsl:element name ="{local-name()}" >
            <xsl:apply-templates select ="@* | node()" />
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="utf-8"?>
<notifications>
   <ActionId>04kf000000000FfAAI</ActionId>
   <SessionId>true</SessionId>
   <Notification>
      <Id>04lf00000000xvQAAQ</Id>
      <sObject>tableName<Id>001f0000006UzdCAAS</Id>
         <Customer_Number__c>dummy1234</Customer_Number__c>
         <FirstName>Test</FirstName>
         <LastModifiedDate>2012-10-15T10:59:54.000Z</LastModifiedDate>
         <LastName>Test</LastName>
      </sObject>
   </Notification>
</notifications> 
```

这是不正确的，因为只是将 XSI:TYPE 的内容放在 sObject 中，我需要在它自己的字段中，例如这是所需的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<notifications>
   <ActionId>04kf000000000FfAAI</ActionId>
   <SessionId>true</SessionId>
   <Notification>
      <Id>04lf00000000xvQAAQ</Id>
      <sObject>
         <tableName>tableName</tableName>
         <Id>001f0000006UzdCAAS</Id>
         <Customer_Number__c>dummy1234</Customer_Number__c>
         <FirstName>Test</FirstName>
         <LastModifiedDate>2012-10-15T10:59:54.000Z</LastModifiedDate>
         <LastName>Test</LastName>
      </sObject>
   </Notification>
</notifications> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:19:17.053

通过添加一个新模板来对 进行自定义处理`sObject`，您可以将属性处理成一个新元素，然后继续处理。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:r="http://soap.sforce.com/2005/09/outbound"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    exclude-result-prefixes="r soap xsi">

    <xsl:output method="xml" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:apply-templates select="/soap:Envelope//r:notifications"/>
    </xsl:template>

    <xsl:template match ="*" >
        <xsl:element name ="{local-name()}" >
            <xsl:apply-templates select ="@* | node()" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="*[local-name()='sObject']">
        <sObject>
            <tableName>
                <xsl:value-of select="@xsi:type"/>
            </tableName>
            <xsl:apply-templates />
        </sObject>
    </xsl:template>

</xsl:stylesheet> 
```

这将产生输出：

```
<?xml version="1.0" encoding="utf-8"?>
<notifications>
  <ActionId>04kf000000000FfAAI</ActionId>
  <SessionId>true</SessionId>
  <Notification>
    <Id>04lf00000000xvQAAQ</Id>
    <sObject>
      <tableName>sf:Account</tableName>
      <Id>001f0000006UzdCAAS</Id>
      <Customer_Number__c>dummy1234</Customer_Number__c>
      <FirstName>Test</FirstName>
      <LastModifiedDate>2012-10-15T10:59:54.000Z</LastModifiedDate>
      <LastName>Test</LastName>
    </sObject>
  </Notification>
</notifications> 
```

为了保持原始 xslt 的精神，如果您想避免添加`xsi`命名空间，您还可以像这样复制属性：

```
<xsl:value-of select="@*[local-name()='type']"/> 
```

# underscore.js - 下划线js _.each 方法和_.invoke 方法的区别

> ID：13193959
> 
> 赞同：7
> 
> 时间：2012-11-02T11:03:41.550
> 
> 标签：underscore.js

我无法理解[下划线 js](http://underscorejs.org/)方法[`_.each`](http://underscorejs.org/#each)和[`_.invoke`](http://underscorejs.org/#invoke).
两者似乎都调用了每个项目上传递的函数。

我应该在哪种情况下使用`_.each`and `_.invoke`？

请用一些例子分享差异。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T11:44:03.443

不，他们做不同的事情。看看他们的代码！

*   [`each`](http://underscorejs.org/#each)使用给定对象的每个元素调用给定函数。您还可以向它传递应用函数的上下文。它就像`forEach`数组上的本机一样。

    ```
    iterator.call(context, obj[i], i, obj) 
    ```

    它确实返回未定义。

*   [`invoke`](http://underscorejs.org/#invoke)通常以字符串形式获取方法名称，并为给定集合的每个元素动态查找方法。然后它将该方法应用于该元素；您还可以向它传递一些参数。

    ```
    (_.isFunction(method) ? method : obj[i][method]).apply(obj[i], args); 
    ```

    它确实返回调用的结果，它基本上是`map`。

# java - Swing - 将图像添加到 GUI

> ID：13193960
> 
> 赞同：2
> 
> 时间：2012-11-02T11:03:53.360
> 
> 标签：java, image, swing

因此，在我上一篇文章[Java Button Width](https://stackoverflow.com/questions/13136701/java-button-width)之后，我希望添加一些图像并设置背景颜色。我尝试了一些东西，只是每次我都这样做。它总是给我错误。

我试过了

```
setBackground(args); 
```

和

```
img = addImage("image.png"); 
```

他们不为我工作。有人可以帮帮我吗？

好的，我尝试了 Disha 的帖子。而且小程序仍然保持相同的颜色，而不是黑色

[http://pastebin.com/iijj7fSr](http://pastebin.com/iijj7fSr)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:57:03.983

一开始，请务必学习[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)并坚持下去。

为了让您为您的 提供背景颜色`JFrame`，因为您已经添加了一个`JPanel`到`CENTER`. 因此，您无法通过编写获得一种背景颜色：

```
interfaceFrame.setBackground(Color.black); 
```

现在您必须将 opaque 的属性设置`JPanel` 为 true 并为相同的设置一种背景颜色：

```
setOpaque(true);
setBackground(Color.BLUE); 
```

在**MenuPane** 类的构造函数中。

这是您修改后的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Gmine {
        JFrame interfaceFrame;
        JButton singleplayerButton, multiplayerButton, optionsButton, quitButton;

        public Gmine() {
            EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    try {
                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    } catch (ClassNotFoundException ex) {
                    } catch (InstantiationException ex) {
                    } catch (IllegalAccessException ex) {
                    } catch (UnsupportedLookAndFeelException ex) {
                    }

                    interfaceFrame = new JFrame("G-Mine");
                    interfaceFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    interfaceFrame.setLayout(new BorderLayout());
                    interfaceFrame.setSize(800,500);
                    //interfaceFrame.setBackground(Color.black);
                    interfaceFrame.add(new MenuPane());
                    interfaceFrame.setLocationRelativeTo(null);
                    interfaceFrame.setVisible(true);
                }
            });
        }

        public class MenuPane extends JPanel {

            public MenuPane() {
                setLayout(new GridBagLayout());

                setOpaque(true);
                setBackground(Color.BLUE);

                singleplayerButton = new JButton("SinglePLayer");
                multiplayerButton = new JButton("MultiPlayer");
                optionsButton = new JButton("Options");
                quitButton = new JButton("Quit");

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridx = 0;
                gbc.gridy = 0;
                gbc.fill = GridBagConstraints.HORIZONTAL;
                gbc.ipadx = 20;
                gbc.ipady = 20;

                add(singleplayerButton, gbc);
                gbc.gridy++;
                add(multiplayerButton, gbc);
                gbc.gridy++;
                add(optionsButton, gbc);
                gbc.gridy++;
                add(quitButton, gbc);
            }
        }
        public static void main(String[] args) {
            new Gmine();
        }
} 
```

现在，为了将图像添加到您的项目，您可以查看如何[在 Java 中将图像添加到您的项目的](https://stackoverflow.com/a/9866659/1057230)答案，您也可以从这个小示例代码中获得帮助，如下所示：

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

public class PaintingExample
{
    private CustomPanel contentPane;
    private JTextField userField;
    private JPasswordField passField;
    private JButton loginButton;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Painting Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new CustomPanel();        

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PaintingExample().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private BufferedImage image;

    public CustomPanel()
    {
        setOpaque(true);
        setBorder(BorderFactory.createLineBorder(Color.BLACK, 5));
        try
        {
            /*
             * Since Images are Application Resources,
             * it's always best to access them in the
             * form of a URL, instead of File, as you are doing.
             * Uncomment this below line and watch this answer
             * of mine, as to HOW TO ADD IMAGES TO THE PROJECT
             * https://stackoverflow.com/a/9866659/1057230
             * In order to access images with getClass().getResource(path)
             * here your Directory structure has to be like this
             *                 Project
             *                    |
             *         ------------------------
             *         |                      |
             *        bin                    src
             *         |                      |
             *     ---------             .java files             
             *     |       |                   
             *  package   image(folder)
             *  ( or              |
             *   .class        404error.jpg
             *   files, if
             *   no package
             *   exists.)
             */
            //image = ImageIO.read(
            //      getClass().getResource(
            //              "/image/404error.jpg"));
            image = ImageIO.read(new URL(
                        "http://gagandeepbali.uk.to/" + 
                                "gaganisonline/images/404error.jpg"));
        }
        catch(IOException ioe)
        {
            System.out.println("Unable to fetch image.");
            ioe.printStackTrace();
        }
    }

    /*
     * Make this one customary habbit,
     * of overriding this method, when
     * you extends a JPanel/JComponent,
     * to define it's Preferred Size.
     * Now in this case we want it to be 
     * as big as the Image itself.
     */
    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(image.getWidth(), image.getHeight()));
    }

    /*
     * This is where the actual Painting
     * Code for the JPanel/JComponent
     * goes. Here we will draw the image.
     * Here the first line super.paintComponent(...),
     * means we want the JPanel to be drawn the usual 
     * Java way first, then later on we will
     * add our image to it, by writing the other line,
     * g.drawImage(...).
     */
    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, this);
    }
} 
```

请取消注释下面给出的行并将您的图像添加到指定位置：

```
image = ImageIO.read(
      getClass().getResource(
              "/image/404error.jpg")); 
```

如果仍有疑问，请提出您可能有的任何问题，如果在我的范围内，我会尽力提供信息:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:27:56.617

试试这个设置你使用的背景颜色`setBackground(Color.color_name);`和设置图像试试下面的代码

```
Image bgImage= Toolkit.getDefaultToolkit().getImage("wallpaper_adrift.jpg");
contentPane.setBackgroundImage(bgImage); 
```

也可以参考[http://www.daniweb.com/software-development/java/threads/346524/how-to-set-background-image-in-java-swing](http://www.daniweb.com/software-development/java/threads/346524/how-to-set-background-image-in-java-swing) 和 [How to set an image as background for Frame in java的Swing GUI？](https://stackoverflow.com/questions/1466240/how-to-set-an-image-as-a-background-for-frame-in-swing-gui-of-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:08:16.990

这是您正在寻找的解决方案：

1.  创建一个名为like的包`com.icon`

2.  将您的图标添加到该包（复制/粘贴）

3.  您将在按钮上添加图标，如下所示：

    ```
    button.setIcon(new ImageIcon(NameOfClass.class.getResource("/com/icon/nameOfIcon.png"))); 
    ```

PS 确保它们是 .png 格式。

# css - 使用元素的 X、Y 坐标添加工具提示

> ID：13193962
> 
> 赞同：0
> 
> 时间：2012-11-02T11:03:53.603
> 
> 标签：css, twitter-bootstrap

如何添加带有元素 x,y 坐标的工具提示。是否可以添加引导工具提示？（我知道bootstrap使用css选择器来添加tooltips，只是一个小疑问）

还有什么建议？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:23:03.033

Jquery 提供了一些很棒的解决方案来制作自定义工具提示，包括定位和自定义设计以及所有跨浏览器友好的内容。看看[THIS](http://jquerytools.org/documentation/tooltip/index.html)或者如果您想要其他解决方案[THIS](http://speckyboy.com/2009/09/16/25-useful-jquery-tooltip-plugins-and-tutorials/)。

# java - 处理多个 XSLT 并将结果传递给另一个 XSLT 以在 Java 中进行转换

> ID：13193965
> 
> 赞同：1
> 
> 时间：2012-11-02T11:04:03.490
> 
> 标签：java, xml, xslt, xslt-2.0

我的代码中有一个要求，如下所示：

这

*   我的 Java 程序中的参数被传递给 XSLT(X1) 进行处理。X1 只返回一个字符串值。
*   另一组参数被传递给另一个 XSLT(X2) 进行处理。X2 也只返回一个字符串值。
*   转换后，XSLT 结果需要传递给另一个 XSLT(X3)，该 XSLT(X3) 将使用该值作为变量，并根据 X1 和 X2 的结果生成结果。

据我研究，XSLT 变量值一旦存储就无法修改。并且这些值在调用 <xsl:apply-template name="someTemplate" > 并带有参数标记时作为参数接收。

我可以通过将结果检索到 Java 中的 String 并再次将它们作为参数传递给下一个模板来实现此功能。但我想知道是否可以直接通过 XSLT 完成相同的操作。

请帮忙

编辑：Xalan 作为标签被移除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:00:53.317

> 我可以通过将结果检索到 Java 中的 String 并再次将它们作为参数传递给下一个模板来实现此功能。但我想知道是否可以直接通过 XSLT 完成相同的操作。

**是的，这是一个 XSLT 2.0 示例**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:param name="pP1" select="2"/>
    <xsl:param name="pP2" select="3"/>
    <xsl:param name="pP3" select="5"/>

    <xsl:variable name="vPass1">
     <xsl:apply-templates mode="pass1">
       <xsl:with-param name="pP1" select="$pP1"/>
     </xsl:apply-templates>
    </xsl:variable>

    <xsl:variable name="vPass2">
     <xsl:apply-templates mode="pass2">
       <xsl:with-param name="pP2" select="$pP2"/>
     </xsl:apply-templates>
    </xsl:variable>

    <xsl:variable name="vPass3">
     <xsl:apply-templates mode="pass3">
       <xsl:with-param name="pP3" select="$pP3"/>
     </xsl:apply-templates>
    </xsl:variable>

 <xsl:template match="/">
     <xsl:value-of select="$vPass1 + $vPass2 + $vPass3"/>
 </xsl:template>

 <xsl:template match="/*" mode="pass1">
  <xsl:param name="pP1" as="xs:integer"/>
  <xsl:value-of select="sum(*[. mod $pP1 = 0])"/>
 </xsl:template>

 <xsl:template match="/*" mode="pass2">
  <xsl:param name="pP2" as="xs:integer"/>
  <xsl:value-of select="sum(*[. mod $pP2 = 0])"/>
 </xsl:template>

 <xsl:template match="/*" mode="pass3">
  <xsl:param name="pP3" as="xs:integer"/>
  <xsl:value-of select="sum(*[. mod $pP3 = 0])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**执行三遍，每遍都有自己的参数。每次传递都会计算`num`元素的总和，其值是所提供参数的倍数。最后，将三遍的结果相加，作为最终结果返回**：

```
63 
```

使用 XSLT 1.0 处理器可以运行完全相同的转换，但`"as='xs:integer'"`必须从代码中删除任何字符串。

# gwt - GWT 活动：如何使用活动、地点、事件总线和 uibinder

> ID：13193974
> 
> 赞同：2
> 
> 时间：2012-11-02T11:04:31.357
> 
> 标签：gwt, uibinder, event-bus

我是 GWT 的新手，我想知道如何使用 Activity、Place、EventBus 和 UIbinder。我的应用程序的布局是这样的：

小部件 1：

```
<g:DockLayoutPanel ui:field="myPanel" unit='PX'>
    <g:north size='60'>
        <m:HeaderPanelImpl styleName='{res.style.panelBorder}' ui:field='headerPanel' />
    </g:north>
    <g:south size='60'>
        <g:HTMLPanel styleName='{res.style.panelBorder}' ui:field='footerPanel' />
    </g:south>
    <g:center>
        <g:SimpleLayoutPanel styleName='{res.style.panelBorder}' ui:field='centerPanel' />
    </g:center>
</g:DockLayoutPanel> 
```

在“widget1.headerPanel”中有一个导航，它控制要在“widget1.centerPanel”中显示的小部件。必须在“widget1.centerPanel”中显示的小部件是“widget2.0”和“widget2.1”。

小部件2.0

```
<g:DockLayoutPanel unit='PX'>
    <g:north size='100'>
        <g:HTMLPanel styleName='{res.style.panelBorder}'>
            <g:Label>TopPanel</g:Label>
        </g:HTMLPanel>
    </g:north>
    <g:west size='200'>
        <g:HTMLPanel styleName='{res.style.panelBorder}'>
            <g:Label>LeftPanel</g:Label>
        </g:HTMLPanel>
    </g:west>
    <g:east size='200'>
        <g:HTMLPanel styleName='{res.style.panelBorder}'>
            <g:Label>RightPanel</g:Label>
        </g:HTMLPanel>
    </g:east>
    <g:center>
        <g:SimpleLayoutPanel styleName='{res.style.panelBorder}' ui:field='centerPanel' />
    </g:center>
</g:DockLayoutPanel> 
```

小部件2.1

```
<g:HTMLPanel>
    <g:Label>Settings</g:Label>
</g:HTMLPanel> 
```

在“widget2.0.topPanel”中，我有导航控制哪个小部件将显示在“widget2.0.centerPanel”中必须显示在“widget2.centerPanel”中的小部件是“widget3.0”和“widget3.1” ”。

小部件3.0

```
<g:HTMLPanel>
    <g:Label>Content 1</g:Label>
</g:HTMLPanel> 
```

小部件3.1

```
<g:HTMLPanel>
    <g:Label>Content 2</g:Label>
</g:HTMLPanel> 
```

我的问题是如何处理“onPlaceChangeEvent”？

例如，如果 url 是 mydomain.com/myapp.html#home:content1
应用程序必须显示小部件 1、小部件 2.0 和小部件 3.0

如果 url 是 mydomain.com/myapp.html#home:content2
应用程序必须显示 widget1、widget 2.0 和 widget 3.1

如果 url 是 mydomain.com/myapp.html#settings
应用程序必须显示 widget1 和 widget 2.1

我想知道两种变体之间：

1.  创建 2 个 ActivityManager。一个用于widget1.navigation 的活动，一个用于widget2.navigation 的活动。但是如果 widget2 是在 widget 1 之前创建的，会发生什么？
2.  创建一个创建几个视图的活动。

代码：示例

```
public class MonthlyViewActivity extends AbstractActivity implements MonthlyView.Presenter {

    private Widget2_0 widget2_0;
    private Widget3_0 widget3_0;

    ......
    public void start(AcceptsOneWidget panel, EventBus eventBus) {
        widget2_0 = new Widget2_0();
        widget3_0 = new Widget3_0();
    ..........
    }
    .... 
} 
```

这种情况下的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:00:57.697

如果您使用 eclipse 在您的项目中创建一个 MVP 架构，它将创建许多文件，例如活动、位置、一个接口、一个实现类和一个相应的 ui xml 类。您必须创建一个活动映射器和活动历史管理器类。并在您的 on lode 模块中为您的应用程序设置一个默认位置。在任何事件调用的单词之后转到任何位置的方法并提供您的页面的链接，然后根据该值检查获取令牌 amd 的值显示您的小部件您想要显示的内容。

# ios - iOS - 在应用程序后台运行的异步时钟

> ID：13193975
> 
> 赞同：0
> 
> 时间：2012-11-02T11:04:46.027
> 
> 标签：ios, audio, core-audio

我正在做一个音频应用程序，我需要为不同的声音实时操作音频缓冲区。我需要一个在后台运行的异步时钟，我可以将各种回调中的时间拉到毫秒，用于各种音频操作目的，例如我的音频播放的停止和开始时间，以及记录和停止记录的时间。

我需要它如此精确，以便我能够确定由各种进程引起的延迟并在我的代码中对其进行补偿。

如何在 iOS 中实现这样的时钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:25:35.290

如果您正在使用 RemoteIO 音频单元并从音频会话请求非常短的音频缓冲区，那么计算回调缓冲区中的远程回调和 PCM 样本似乎是将音频与亚毫秒分辨率对齐的最精确方法。回调之间的延迟量会影响其他任何事情。

您还可以使用 mach_time.h 标头中的计时器进行相当精确的单调时间测量，但这不会与音频播放速率同步，也不会考虑子系统之间的各种延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:11:31.447

如果您还没有这样做，我绝对建议您查看[AVFoundation Framework](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)并使用[Core Audio](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/Introduction/Introduction.html)。考虑到您对准确性的需求，您可以忘记本机 NSTimer 和 NSDate 选项。

# wordpress - 在 Wordpress 中开发移动主题

> ID：13193978
> 
> 赞同：0
> 
> 时间：2012-11-02T11:05:01.230
> 
> 标签：wordpress, wordpress-theming

我做了一个网站的wordpress主题。我使用 Starker Theme 进行 wordpress 主题开发。现在我想让我的网站移动友好。是否有任何解决方案可以为此目的进行少量更改或使用一些插件？我已经尝试过 wptouch、WordPress Mobile Pack 和 MobilePress，但它们都不起作用。我在[http://mobiletest.me](http://mobiletest.me)上检查了我的输出，但这没有显示准​​确的移动输出（输出与我的 PC 浏览器上的输出相同）。这个测试站点或插件有问题吗？这一切都让我感到困惑。

请让我知道任何其他解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:03:54.160

I'm the developer of MobileTest.me, just want to clarify a few things. As you have correctly noticed, mobiletest.me uses your PC browser's engine to render the website you want to test. This is by design as it was created as a tool to test responsive web design. The mobile devices are provided as an indicator of common smartphone resolutions.

If what you want is to send a different theme to desktop browsers and a different one to mobile devices then you probably need a wordpress plugin such as [mobile detector](http://wordpress.org/extend/plugins/wp-mobile-detector/). The problem with this approach is that if the plugin fails to determine the device browser correctly, it will probably send the PC version to a mobile device.

The other approach is [responsive design](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design) which sends different CSS based on the resolution of a device and does not rely on browser detection. If you decide to go the responsive way you may find [this post](http://demianlabs.com/lab/post/how-to-test-your-mobile-web-site-or-app-across-multiple-devices/) useful where you can check some examples of how mobiletest.me can be used to check responsive web designs (images are clickable).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:33:53.447

您可能没有正确检查您的网站。确保你的 html 头标签中有这行代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

如果没有那行代码，您的设备将显示与浏览器相同的页面。

# java - 在 MultiPartEmail 中设置 HTML 文本

> ID：13193983
> 
> 赞同：1
> 
> 时间：2012-11-02T11:05:16.940
> 
> 标签：java, email, html-email, apache-commons, email-attachments

我有用于发送带有附件的电子邮件的 java 代码，如下所示。

```
String myEmailId = "xx@yahoo.co.in";
String myPassword = "@xx";
String senderId = "yy@gmail.com";
try {
    MultiPartEmail email = new MultiPartEmail();
    email.setSmtpPort(587);
    email.setAuthenticator(new DefaultAuthenticator(myEmailId, myPassword));
    email.setDebug(true);
    email.setHostName("smtp.mail.yahoo.com");
    email.addTo(senderId);
    email.setFrom(myEmailId);
    email.setSubject("The picture");
    email.setMsg("<font face='verdana' size='3'>Here is the picture you wanted "
            + "<table>"
            + "<tr><th>id</th><th>Name</th></tr>"
            + "<tr><th>1</th><th>Name 1</th></tr>"
            + "<tr><th>2</th><th>Name 2</th></tr>"
            + "<tr><th>3</th><th>Name 3</th></tr>"
            + "<tr><th>4</th><th>Name 4</th></tr>"
            + "</table>"
            + "</font>");

    // add the attachment
    EmailAttachment attachment = new EmailAttachment();
    attachment.setPath("/Users/alkandari/Desktop/SMART/Fahim/test_small.pdf");
    attachment.setDisposition(EmailAttachment.ATTACHMENT);
    email.attach(attachment);

    attachment = new EmailAttachment();
    attachment.setPath("/Users/alkandari/Desktop/SMART/Fahim/test.pdf");
    attachment.setDisposition(EmailAttachment.ATTACHMENT);
    email.attach(attachment);

    // send the email
    email.send();
    System.out.println("Mail sent!");
} catch (Exception e) {
    System.out.println("Exception :: " + e);
} 
```

一切正常，除了 HTML 代码按原样显示。

在电子邮件中，我得到的是

```
<font face='verdana' size='3'>Here is the picture you wanted <table><tr><th>id</th><th>Name</th></tr><tr><th>1</th><th>Name 1</th></tr><tr><th>2</th><th>Name 2</th></tr><tr><th>3</th><th>Name 3</th></tr><tr><th>4</th><th>Name 4</th></tr></table></font> 
```

是否有任何参数，我将收到的电子邮件将具有正确的 HTML 格式数据。

***笔记 ：***

实际上，我正在使用`Email email = new SimpleEmail();`和做上述 HTML 部分运行良好的东西。但是，当我不得不切换到附件时，我不得不使用`MultiPartEmail email = new MultiPartEmail();`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-03T02:38:36.790

我想在这里提供我的答案，以便将来我（和其他人）可以看到完整的代码。无论出于何种原因，可能只是我，我发现这些答案不完整，或者它们对我不起作用。像 OP 一样，我试图发送带有 PDF 附件的基于 HTML 的电子邮件。这是我最终使用 commons-email 1.4 的结果。任何意见将不胜感激。

进口：

```
import org.apache.commons.mail.DefaultAuthenticator;
import org.apache.commons.mail.MultiPartEmail;
import org.apache.commons.mail.EmailAttachment; 
```

建立你的电子邮件对象（显然这里的实际细节应该是你的）

```
MultiPartEmail email = new MultiPartEmail();
email.setHostName("smtp.yourhosthere.com");
email.setSmtpPort(25);
// authentication not always needed depending on your environment
email.setAuthenticator(new DefaultAuthenticator("username", "password"));
email.setTo("to@yourhosthere.com");
email.setFrom("from@yourhosthere.com"); 
```

现在您的消息详细信息。请注意，我的 HTML 包含 HTML 和 BODY 标签。

```
email.setSubject("Your subject here");
email.addPart("<div>Your html here</div>", "text/html; charset=UTF-8"); 
```

现在附上

```
EmailAttachment attachment = new EmailAttachment();
attachment.setPath(filepath);
attachment.setDisposition(EmailAttachment.ATTACHMENT);

email.attach(attachment); 
```

现在发送电子邮件

```
email.send(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:29:55.713

我得到了答案。

刚`MultiPartEmail email = new MultiPartEmail();`改成`MultiPartEmail email = new HtmlEmail();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T16:29:33.977

你不能使用`email.setMsg()`

但将消息正文设置为：

`email.addPart( "<h1>MSG BODY</h1> <u>your</u> name", "text/html; charset=UTF-8" );`

# c# - 用于 WinForms 插件的最佳设置方法

> ID：13193986
> 
> 赞同：2
> 
> 时间：2012-11-02T11:05:41.957
> 
> 标签：c#, winforms, settings

总之，我有一个大型 C# 应用程序，我正在为其编写插件。我想为这个插件提供设置，并得出结论，编写我自己的设置管理器等。并创建将放在相关特殊文件夹中的 XML 设置是最好的方法。但是，我不记得为什么（在回到项目之后）我在使用这`Properties.Settings.MySetting`条路线时得出了这个结论。有人可以就我的情况更可取的方法提供任何建议吗？

在这里写我自己的矫枉过正，还是有明显的好处？

如果我在错误的 Stack 网站上问过这个问题，我很抱歉。

非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:16:23.580

这是一个很好的问题，我想让您知道您做出了这个决定，因为您的 DLL 插件通常无法使用其自己的`app.config`文件（存储设置的位置）。

发生这种情况是因为[`ConfigurationManager`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)查找附加到执行进程的 app.config 文件，即主**exe**文件。

你在这里有几个选项，最好的一个是向配置管理器指出要使用哪个文件作为配置文件，这在[此页面上](https://stackoverflow.com/questions/6341906/read-custom-configuration-file-in-c-sharp-framework-4-0)有详细描述。

# php - CakePHP：在 HABTM 中保存数据的正确格式是什么

> ID：13193987
> 
> 赞同：2
> 
> 时间：2012-11-02T11:05:51.533
> 
> 标签：php, mysql, cakephp, cakephp-2.0, has-and-belongs-to-many

我有一位艺术家拥有并属于许多相关艺术家，在这个例子中，我想在数据库中保存麦当娜和她的 2 位相关艺术家雪儿和凯莉米洛。

DB： **2个表：**艺术家（id，name，created）和artist_related（id，artist_id，related_id）

模型关系设置：

```
<?php
class Artist extends AppModel {
    public $hasAndBelongsToMany = array(
        'Related' =>
            array(
                'className' => 'Artist',
                'joinTable' => 'artists_related',
                'associationForeignKey' => 'related_id',
                'unique' => 'keepExisting'
            )
        ); 
```

我正在尝试像这样保存数据：

```
 $test_data = array(
        'Artist' => array(
            'name' => 'Madonna'
         ),
        'Related' => array(
            0 => array(
                'name' => 'Kylie Minogue'
            ),
            1 => array(
                'name' => 'Cher'
            )
        )
    );

    $result = $this->saveAll($test_data, array('deep' => true)); 
```

**发生的情况是，艺术家**表中只保存了麦当娜，两个相关的艺术家没有保存，连接表中没有保存任何内容。

应该如何格式化数据数组来实现这一点？还是我需要先保存麦当娜，然后获取 ID，然后将所有相关艺术家保存在不同的 saveAll() 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:20:56.107

据我所知，**相关艺术家**必须包含**相关**对象，这些对象具有与一些**艺术家 ID****相关**的键。这是示例：

 **```
$test_data = array(
    'Artist' => array(
        'name' => 'Madonna'
     ),
    'Related' => array(
         'Related' => array(
             0 => '1',
             1 => '2'
         )
     )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:49:39.373

您的数据必须采用这种格式。

```
Array
(
[0] => Array
    (
        ['Artist'] => Array
            (
                [name] => 'Madonna'
            )
        ['Related'] => Array
            (
                [name] => 'Kylie Minogue'
            )
    )
[1] => Array
    (
        ['Artist'] => Array
            (
                [name] => 'Madonna'
            )
        ['Related'] => Array
            (
                [name] => 'Cher'
            )
    )
) 
```**

# c# - 如何通过Web请求反序列化asp.net中包装的json数组？

> ID：13193989
> 
> 赞同：0
> 
> 时间：2012-11-02T11:05:57.047
> 
> 标签：c#, web-services

```
{"lstCitiesResult":[{"city_id":"21","city_name":"Trichy"},  
                    {"city_id":"22","city_name":"Chennai"},
                    {"city_id":"24","city_name":"Mumbai"},  
                    {"city_id":"25","city_name":"Hyderabad"}] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:11:39.743

您可以使用[json.net](http://json.codeplex.com/)反序列化您的 json 字符串。定义你自己的类：

```
public class City 
{
   public int City_id { get; set; }
   public string City_name { get; set; }
}

public class YourModel
{
    public City[] lstCitiesResult { get; set; }
} 
```

所以你可以打电话：

```
var model = JsonConvert.DeserializeObject<YourModel>(jsonString); 
```

# android - Android：当用户暂停输入时，如何向 Google API 发送请求？

> ID：13193990
> 
> 赞同：10
> 
> 时间：2012-11-02T11:05:57.573
> 
> 标签：android, autocomplete

我正在开发这个应用程序，用户可以在其中输入 autoCompleteTextView 中的位置，它会根据[此处](https://developers.google.com/academy/apis/maps/places/autocomplete-android)描述的 Google Places Api 建议位置。

但是，我想通过仅在用户停止输入一段时间后才发送请求来限制应用程序发送的请求量。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T22:55:29.613

类似于[这个答案](https://stackoverflow.com/a/13210410/60606)，但稍微简洁一些，并且没有引入额外的状态。您也不需要阈值检查，因为`performFiltering`仅在实际需要过滤时才调用。

子类`AutoCompleteTextView`化似乎是唯一的方法，因为您不能覆盖/替换`TextWatcher`添加的`AutoCompleteTextView`.

```
public class DelayAutoCompleteTextView extends AutoCompleteTextView {           
    public DelayAutoCompleteTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            DelayAutoCompleteTextView.super.performFiltering((CharSequence) msg.obj, msg.arg1);
        }
    };

    @Override
    protected void performFiltering(CharSequence text, int keyCode) {
        mHandler.removeMessages(0);
        mHandler.sendMessageDelayed(mHandler.obtainMessage(0, keyCode, 0, text), 750);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:09:41.103

我找到了解决上述问题的方法，效果很好。我通过以下方式扩展了 AutoCompleteTextView。如果有人知道如何进一步改进此代码，请告诉我。

```
public class MyAutoCompleteTextView extends AutoCompleteTextView {

// initialization
int threshold;
int delay = 750;
Handler handler = new Handler();
Runnable run;

// constructor
public MyAutoCompleteTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected void performFiltering(final CharSequence text, final int keyCode) {
    // get threshold
    threshold = this.getThreshold();

    // perform filter on null to hide dropdown
    doFiltering(null, keyCode);

    // stop execution of previous handler
    handler.removeCallbacks(run);

    // creation of new runnable and prevent filtering of texts which length
    // does not meet threshold
    run = new Runnable() {
        public void run() {
            if (text.length() > threshold) {
                doFiltering(text, keyCode);
            }
        }
    };

    // restart handler
    handler.postDelayed(run, delay);
}

// starts the actual filtering
private void doFiltering(CharSequence text, int keyCode) {
    super.performFiltering(text, keyCode);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:35:05.053

您可以使用 TextWatcher，并监控文本条目之间的时间间隔。我个人不喜欢对原生 Android 控件进行子类化的想法（不过，这当然是一种有效的方法，只是不是我喜欢的方法）。

文档：http: [//developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

和一个 SO 链接： [如何在 Android 中使用 TextWatcher 类？](https://stackoverflow.com/questions/8543449/how-to-use-textwatcher-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T06:14:37.600

与上面的答案类似，我发现我需要继承 AutoCompleteTextView。然而，因为我住的地方互联网有点慢，我发现每次用户按下一个键时删除延迟的处理程序是一个问题。所以基本上如果我只在用户停止输入后 500 毫秒运行过滤器，结果可能需要几秒钟才能出现，这会让用户感到恼火。

因此，我不会每次都清除处理程序，而是让过滤每几百毫秒运行一次。我的代码不像 Jan Berkel 的那么干净。我相信你可以把它清理一下我太懒了，但是在 IMO 互联网速度慢的地区性能更好。

```
public class CustomCompleteView extends AutoCompleteTextView{

Handler handler=new Handler();
Runnable r;
boolean cleartogo=false;
boolean pending =false;
CharSequence btext; 
int bkeyCode;
public CustomCompleteView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public CustomCompleteView(Context context, AttributeSet attrs)
{
    super(context,attrs);
}
public CustomCompleteView(Context context, AttributeSet attrs, int defStyle)
{
    super(context,attrs,defStyle);
}

@Override
public void performFiltering(CharSequence text, int keyCode){
    if (cleartogo){
        cleartogo=false;
        Log.d(MainActivity.DTAG,"Going to filter on " + text.toString());
        pending=false;
        super.performFiltering(btext, bkeyCode);
    }
    else
    {
        Log.d(MainActivity.DTAG,"Filtering rejected, too soon");
        btext=text;
        bkeyCode=keyCode;
        if (!pending){
        if (r==null)
            r=new MyRunnable(this);
        //try{handler.removeCallbacks(r);} catch (Exception ex){};
        handler.postDelayed(r, 500);
        pending=true;}
    }

}

private class MyRunnable implements Runnable {

CustomCompleteView bc;

    MyRunnable(CustomCompleteView c ) {
        this.bc=c;

    }

    public void run() {
        Log.d(MainActivity.DTAG,"Special Runnable running");
        cleartogo=true;
        bc.performFiltering(btext, bkeyCode);

    }
}

} 
```

# eclipse - SVN - Eclipse - OSX 10.8

> ID：13193992
> 
> 赞同：1
> 
> 时间：2012-11-02T11:06:01.270
> 
> 标签：eclipse, svn, eclipse-plugin

我在 OSX 10.8 上安装了 subeclipse 并收到错误：

```
Incompatible JavaHL library loaded. 1.6.x or later required 
```

尝试从 SVN 导入时。

我已阅读此主题： [Mac OS Lion 中的 Subclipse 显示“无法加载默认 SVN 客户端”错误](https://stackoverflow.com/questions/6791989/subclipse-in-mac-os-lion-shows-unable-to-load-default-svn-client-error)

并尝试了一些建议的事情。安装 subeclipse 1.6 - 不起作用。我还尝试安装 Wandisco ( [http://www.wandisco.com/get/?f=subversion-binaries/1.7/Subversion-1.7.2_10.7.x.pkg](http://www.wandisco.com/get/?f=subversion-binaries/1.7/Subversion-1.7.2_10.7.x.pkg) ) 安装在 10.8 上不起作用并挂起选择目的地。

有谁知道我能做些什么来解决这个问题？

谢谢

# asp.net - ASP.net + 使用 facebook 和 aspnetdb 授权登录

> ID：13193994
> 
> 赞同：0
> 
> 时间：2012-11-02T11:06:04.613
> 
> 标签：asp.net, facebook, aspnetdb

我在我的网站中使用 Facebook 登录 api，目前我正在检查我的 SQL Server 数据库中是否存在 FB 用户 ID，如果存在，则允许用户访问我的网站，否则他将被定向到 Facebook 注册插件页面。

问题是我也在使用 aspnetdb，在我的 web.config 授权中，我阻止所有用户接受已登录并由 aspnetdb 成员资格提供程序验证的用户，因此我的问题是对于成功使用 Facebook 登录的用户被阻止通过我的应用程序的非 fb 登录页面。我应该如何对通过 Facebook 登录的用户进行身份验证？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:58:17.460

Facebook 登录/注册 API 为您提供 FBUserid，它应该针对用户存储在您的 SQL 服务器数据库中。如果一个新用户来到您的网站并通过 FB 注册，您也应该在数据库中生成相应的用户，并使用一些默认密码（每个用户随机且不同）您可以提供功能，如果注册 FB 的用户希望用户您的应用程序的登录，您应该通过电子邮件向他发送默认密码，并要求他/她在首次登录时更改。

# php - 显示带有用户答案的 多项选择题

> ID：13193996
> 
> 赞同：-1
> 
> 时间：2012-11-02T11:06:09.460
> 
> 标签：php, mysql, sql

我在向用户显示多项选择题时遇到问题。我有以下表格：

**multiple_choice_questions** (quiz_id, question,c_answer) 这个表有正确答案的问题

**multiple_choice_answers** (answer_id, quiz_id,answer) 这个表有外键 quiz_id 的答案

**multiple_choice_info** (info_id,quiz_id,name,class, course, subject, notes,date) 这里是每个测验的基本信息，实际上有助于从用户那里选择适当的测验。例如，如果用户将数学作为课程数学，它会显示带有“课程”数学的测试

我想显示例如 10 个随机问题及其答案。请注意，每个问题都有多个不同的答案。例如问题 1 有 3 个不同的答案。问题2，5个不同的答案。

我努力捕捉与 quiz_id 相关的数据，但这种方法是错误的。我是 php 和 mysql 的新手。

```
<?php
include('../connect_db.php');

$sql = "select * from multiple_choice_questions
inner join multiple_choice_answers on (multiple_choice_questions.quiz_id =      multiple_choice_answers.quiz_id)
inner join multiple_choice_info on (multiple_choice_questions.quiz_id = multiple_choice_info.quiz_id)";
$myData3 = mysql_query($sql);
while($row = mysql_fetch_array($myData3)) {
echo '<input type="text" value="'.$row['question'].'" name="q'.$row['quiz_id'].'"/><br>';
echo '<input type="radio" value="'.$row['answer'].'" name="q'.$row['answer'].'"/>"'.$row['answer'].'"';

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:18:34.387

按以下方式格式化您的查询。这将随机给你 10 行。

```
$sql = "select A.question,B.answer,A.quizid from multiple_choice_questions AS A
inner join multiple_choice_answers AS B on (A.quiz_id = B.quiz_id)
inner join multiple_choice_info AS C on (C.quiz_id = A.quiz_id) 
ORDER BY RAND() LIMIT 10";
$myData3 = mysql_query($sql); 
```

你可以试试下面的脚本。

```
 $sql = "select A.question,B.answer,A.quizid from multiple_choice_questions AS A
inner join multiple_choice_answers AS B on (A.quiz_id = B.quiz_id)
inner join multiple_choice_info AS C on (C.quiz_id = A.quiz_id) 
ORDER BY A.quizid,RAND()";
$myData3 = mysql_query($sql);

    $lastQues = 0;
$totalQues = 0;
while($row = mysql_fetch_array($myData3)) {

    if($totalQues == 10)break;

    if($lastQues != $row['quiz_id'])
    {
        echo '<input type="text" value="'.$row['question'].'" name="q'.$row['quiz_id'].'"/><br>';
        $totalQues++;
    }
    echo '<input type="radio" value="'.$row['answer'].'" name="q'.$row['answer'].'"/>"'.$row['answer'].'"';

    $lastQues = $row['quiz_id'];

} 
```

# visual-c++ - 连接到 Access 数据库

> ID：13193997
> 
> 赞同：1
> 
> 时间：2012-11-02T11:06:15.107
> 
> 标签：visual-c++

我需要一点帮助！我正在尝试使用此代码连接到本地 Access 文件；

```
public: Void connectTodatabase()
    {
        //creating and opening the database
        OleDbConnection ^myTICLConnection = gcnew     OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data     Source=C:\Users\LOVE\Documents\CLERKS.accdb;User ID=Admin;NewValue=Bad");
        myTICLConnection->Open();
    } 
```

. . . 这是我得到的错误。

System.Data.dll 中出现“System.Data.OleDb.OleDbException”类型的未处理异常

附加信息：找不到文件“C:\Users\LOVE\documents\visual studio 2010\Projects\REPLACEMENT\REPLACEMENT\UsersLOVEDocumentsCLERKS.accdb”。

注意：我已经声明了 Data 和 OleDb 命名空间。我只是无法弄清楚问题是什么。

请帮忙！！

# java - 安装 jdk 7u9 后无法识别 javafx

> ID：13193998
> 
> 赞同：1
> 
> 时间：2012-11-02T11:06:15.283
> 
> 标签：java, eclipse, javafx

我安装了 jdk 7u9 并将其添加到 Eclipse Java 项目的构建路径中。但是，当我尝试导入一些 javafx 类时，eclipse 无法识别它们：

```
 import javafx.scene.media.Media; 
```

我在 Oracle 的网站（以及许多其他网站）上读到 javafx 已经包含在 jdk 7u9 中，并且不需要安装任何额外的插件。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:42:54.180

jfxrt.jar 位于 jdk 的 jre/lib 文件夹中，但不在默认引导类路径中。这就是 Eclipse 不会将它添加到“JRE 系统库”的原因。

该问题[在此处](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166330)进行跟踪。修复将在 Java 8 中进行。

您应该手动将 jar 添加到项目构建路径或使用[e(fx)clipse](http://efxclipse.org/)并设置 JavaFX 项目。