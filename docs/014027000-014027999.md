# StackOverflow 问答 14027000-14027999

# maven - 如何在 mvn pom 中设置环境变量？

> ID：14027003
> 
> 赞同：30
> 
> 时间：2012-12-25T01:31:18.863
> 
> 标签：maven, pom.xml

如何设置环境变量（换句话说，可以`System.getenv("APP_HOME")`在 pom 文件中内部访问？

```
APP_HOME=/path/home 
```

我意识到我可以设置它`.profile`，但想知道 pom 是否可以做同样的伎俩。

根据下面 bmargulies 的建议，我尝试了以下方法，但没有运气

```
<build>
    <finalName>KvpStore</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <configuration>
                <includes>
                    <include>**/*Test*.java</include>
                </includes>
                <environmentVariables>
                    <APP_NAME>blah_blah</APP_NAME>  <------------------------
                </environmentVariables>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-25T02:11:03.360

一些插件，比如surefire，可以让你设置它们。一般来说，在pom中没有办法。

Surefire 的文档在[这里](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#environmentVariables)。Surefire 将在测试运行期间设置环境变量，而不是其他任何东西。你必须确保万无一失。

在配置...

```
<configuration>
  <forkMode>always</forkMode>
  <environmentVariables>
     <var1>val1</var1>
  </environmentVariables>
</configuration> 
```

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-12-25T09:30:26.850

[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/examples/system-properties.html)的文档展示了示例并描述了如何设置系统属性。

```
<configuration>
  <systemPropertyVariables>
    <propertyName>propertyValue</propertyName>
    <buildDirectory>${project.build.directory}</buildDirectory>
    [...]
  </systemPropertyVariables>
</configuration> 
```

使用它们而不是环境变量可能会更好，因为使用它们更简单，导致需要正确设置环境变量并且必须重新启动 cmd.exe 和 jvm 才能使它们工作。

不需要为测试配置包含，因为[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#includes)已经具有以下默认值：

```
<includes>
 <include>**/Test*.java</include>
 <include>**/*Test.java</include>
 <include>**/*TestCase.java</include>
</includes> 
```

# java - 在 RegEx Java 中查找子字符串

> ID：14027004
> 
> 赞同：1
> 
> 时间：2012-12-25T01:31:32.853
> 
> 标签：java, regex

您好，我有一个关于 RegEx 的问题。我目前正在尝试找到一种方法来获取任何字母的子字符串，后跟任何两个数字，例如：d09。

我想出了 RegEx`^[a-z]{1}[0-9]{2}$`并在字符串上运行它

> sedfdhajkldsfakdsakvsdfasdfr30.reed.op.1xp0

但是，它永远找不到 r30，下面的代码显示了我在 Java 中的方法。

```
Pattern pattern = Pattern.compile("^[a-z]{1}[0-9]{2}$");
Matcher matcher = pattern.matcher("sedfdhajkldsfakdsakvsdfasdfr30.reed.op.1xp0");

if(matcher.matches())
    System.out.println(matcher.group(1)); 
```

它永远不会打印出任何东西，因为匹配器永远不会找到子字符串（当我通过调试器运行它时），我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T01:32:47.403

There are three errors:

1.  Your expression contains [anchors](http://www.regular-expressions.info/anchors.html). `^` matches only at the start of the string, and `$` only matches at the end. So your regular expression will match `"r30"` but not `"foo_r30_bar"`. You are searching for a substring so you should remove the anchors.

2.  The `matches` should be `find`.

3.  You don't have a group 1 because you have no parentheses in your regular expression. Use `group()` instead of `group(1)`.

Try this:

```
Pattern pattern = Pattern.compile("[a-z][0-9]{2}");
Matcher matcher = pattern.matcher("sedfdhajkldsfakdsakvsdfasdfr30.reed.op.1xp0");

if(matcher.find()) {
    System.out.println(matcher.group());    
} 
```

[ideone](http://ideone.com/MPI7Br)

* * *

[**Matcher Documentation**](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)

> A matcher is created from a pattern by invoking the pattern's matcher method. Once created, a matcher can be used to perform three different kinds of match operations:
> 
> *   The matches method attempts to match the entire input sequence against the pattern.
> *   The lookingAt method attempts to match the input sequence, starting at the beginning, against the pattern.
> *   The find method scans the input sequence looking for the next subsequence that matches the pattern.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T01:33:19.493

It doesn't match because `^` and `$` delimite the start and the end of the string. If you want it to be anywhere, remove that and you will succed.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:33:28.583

1.  Your regex is anchored, as such it will never match unless the whole input matches your regex. Use `[a-z][0-9]{2}`.

2.  Don't use `.matches()` but `.find()`: `.matches()` is shamefully misnamed and tries to match the whole input.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T01:41:34.750

怎么样`"[a-z][0-9][0-9]"`？这应该找到您正在寻找的所有子字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T13:26:49.330

> ^[az]{1}[0-9]{2}$
> 
> sedfdhajkldsfakdsakvsdfasdfr30.reed.op.1xp0

据我所知

*   find thr first lower在它之后*给出*[s] 大写字母应该有两个数字，这意味着您的字符串的长度是并且始终是 3 个单词字符

也许如果我有更多关于您的字符串的数据，我可以提供帮助

**编辑**

如果您确定*点数，那么

更改此行

```
Matcher matcher = pattern.matcher("sedfdhajkldsfakdsakvsdfasdfr30.reed.op.1xp0"); 
```

至

```
Matcher matcher = pattern.matcher("sedfdhajkldsfakdsakvsdfasdfr30.reed.op.1xp0".split("\.")[0]); 
```

笔记：-

使用我的解决方案，您应该省略模式的前导 ^

阅读此页面以了解[拆分字符串](http://pages.cs.wisc.edu/%7Ehasti/cs302/examples/Parsing/parseString.html)

# javascript - 使用 JavaScript 和 jQuery 的简单长轮询示例

> ID：14027005
> 
> 赞同：6
> 
> 时间：2012-12-25T01:31:56.093
> 
> 标签：javascript, jquery, asynchronous

我正在尝试创建一个实时网站分析仪表板，该仪表板使用 jQuery/JavaScript 异步创建与服务器的开放 HTTP 连接，以在发生数据更新时轮询服务器以获取数据更新。

显而易见的开始是使用一个`XMLHttpRequest`对象或 jQuery 的`$.ajax`方法向服务器发送一个`GET`或`POST`请求异步请求一些数据。

`setInterval`但是，除了使用一种方法一次发送一个请求之外，`30 seconds`我不确定如何使与服务器的连接持久。基本上，我只想发送**一个 http 请求**并确保与服务器的连接保持打开状态以进行轮询！

我的示例代码`setInterval`如下：

```
<div id="analytics"></div>
<script>
var analytics = document.getElementById('analytics');
setInterval(function(){
    $.ajax({ url: "http://server.com/", success: function(data){
        analytics.innerHTML = data;
    }, dataType: "json"});
}, 30000);
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T01:51:00.443

在线搜索后，这是我一直在寻找的答案，它**不使用** `sockets.io`也不**使用**`WebSockets`，而是利用其方法创建人工循环： **`jQuery``complete`**

 **```
<div id="analytics"></div>
<script>
var analytics = document.getElementById('analytics');
(function poll(){
    $.ajax({ url: "server", success: function(data){
        analytics.innerHTML = data;
    }, dataType: "json", complete: poll, timeout: 30000 });
})();
</script> 
```

来源是来自 Technoctave 的 Tian Davis：http: [//techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)**

# python - smtplib 错误？第二次调用时 starttls/quit 失败

> ID：14027006
> 
> 赞同：2
> 
> 时间：2012-12-25T01:32:09.950
> 
> 标签：python, python-2.7

拿这个代码

```
import smtplib
s = smtplib.SMTP()
s.set_debuglevel(1)

print "-------------------------------------------------------------------------"
s.connect("smtp.gmail.com",587)
s.starttls()
s.login("USERNAME","PASSWORD")
s.quit()

print "========================================================================="

s.connect("smtp.gmail.com",587)
s.starttls()
s.login("USERNAME","PASSWORD")
s.quit()
print "-------------------------------------------------------------------------" 
```

第一次连接时，它启动得很好......第二次它产生一个关于 TLS 的异常，如此处所示......

```
Traceback (most recent call last):
  File "mtest.py", line 12, in <module>
    s.starttls()
  File "/usr/lib/python2.7/smtplib.py", line 635, in starttls
    raise SMTPException("STARTTLS extension not supported by server.")
smtplib.SMTPException: STARTTLS extension not supported by server. 
```

我错过了什么愚蠢的东西还是有错误？

Ps 我写了这个测试，因为我在我的另一个“线程”脚本中遇到了同样的问题，所以想确保它与线程无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:17:34.317

我猜`s.quit()`在连接`s`失效后不能用于其他任何事情。如果是这样，您需要另一个`s = smtplib.SMTP()`用于第二次邮件传输。

[quit() 文档](http://docs.python.org/2/library/smtplib.html#smtplib.SMTP.quit)似乎表明这是这样的：

> 终止 SMTP 会话并关闭连接。

# php - PHP - 如何添加到变量 NULL 值并保存到数据库中？

> ID：14027007
> 
> 赞同：0
> 
> 时间：2012-12-25T01:32:10.183
> 
> 标签：php, mysql, sql, null

我正在尝试将变量设置为`NULL`：

```
$q = NULL.",";
$q .= 'abc'; 
```

并保存到数据库中：

```
mysql_query("INSERT INTO table (col_a, col_b) VALUES (".$q.")") 
```

但这会产生错误消息：

```
INSERT INTO table (col_a, col_b) VALUES (,'abc')You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ','abc')' at line 2 
```

如何`NULL`从变量保存到数据库中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T01:33:58.027

you can get rid of the column where you want its value to be null, eg

```
$q = 'abc';
mysql_query("INSERT INTO table (col_b) VALUES ($q)") 
```

or if value is dynamic, the only problem with your current code is that you haven't include `NULL` in your string,

```
$q = "NULL,";
$q .= "'abc'";
mysql_query("INSERT INTO table (col_a, col_b) VALUES ($q)") 
```

the your code is vulnerable with `SQL Injection`, please read the article below to learn how to prevent from it.

*   [How can I prevent SQL injection in PHP?](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T01:34:40.663

You're concatenating NULL and trying to parse it, which in the statement, would actually read:

, abc

Instead of the expected

NULL, abc

So just write a literal "NULL" in your statement.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T01:35:03.777

Pass the literal, unquoted string inside the query:

```
$q = "NULL,"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T01:35:16.853

```
$q = "NULL,";
$q .= '"abc"'; 
```

Gives you `NULL,"abc"` which you can include in your query.

The error you posted couldn't have come from the code in the question.. where did the quotes around `abc` come from? You need to enclose it in quotes inside the quotes for the php variable for them to show up in the SQL too.

# python - import djangorestframework fails after installing it

> ID：14027009
> 
> 赞同：3
> 
> 时间：2012-12-25T01:33:02.670
> 
> 标签：python, django

I'm trying to run a Django project (Mayan EDMS) in Apache. From a Ubuntu 12.10, Apache 2.2.22, Python 2.7.3 and Django (1, 4, 3, 'final', 0).

When I go to the served web it fails and shows me errors in the apache log, they are all errors concerning modules in Python that are not installed, I install the modules and errors changed from one module to other:

```
sudo easy_install django-pagination
sudo easy_install South
sudo easy_install requests
sudo easy_install mptt 
```

It all seems to go fine till a module named `djangorestframework` is needed. I install it successfully:

```
pip install djangorestframework 
```

but it's still not found:

```
[Mon Dec 24 20:15:29 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 86, in load_app
[Mon Dec 24 20:15:29 2012] [error] [client 127.0.0.1]     app_module = import_module(app_name)
[Mon Dec 24 20:15:29 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
[Mon Dec 24 20:15:29 2012] [error] [client 127.0.0.1]     __import__(name)
[Mon Dec 24 20:15:29 2012] [error] [client 127.0.0.1] ImportError: No module named djangorestframework 
```

When I run manually python in shell and I make an import of the previous installed modules (`requests`, `mptt`) everything is ok, but I cannot import a `djangorestframework` module.

```
>>> import djangorestframework
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named djangorestframework
>>> 
```

After reading the [how to install `djangorestframework`](http://django-rest-framework.org/#installation) I see that when it's declared in `INSTALLED_APPS` it's declared as **`rest_framework`**, I try to `import rest_framework` in python and it accepts it successfully. I guessed that I only had to rename the reference to the module in the Django source. The problem is that I found lots of mentions of it in the files and I intuit it's not a good idea.

what can I be doing wrong? The installation is so simple, I encourage readers just to install the module

```
pip install djangorestframework 
```

and try to import it in Python

```
import djangorestframework 
```

I've tried it in two computers and same problem occurred (both computers have the same Ubuntu/Apache/Django configuration).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:21:12.793

它安装在 site-packages/rest_framework 中，所以你应该使用：

```
import rest_framework 
```

# javascript - trying to learn how to define methods in a new object

> ID：14027014
> 
> 赞同：0
> 
> 时间：2012-12-25T01:33:45.017
> 
> 标签：javascript

I've done a lot of reading about using objects in js and this is one of the techniques that I found for creating an array of objects and defining a method within each:

```
function myObj(){
        this.dCount = 0;

        this.myMethod = function(){
            dCount = 1;
            console.log(dCount);
        }
}

var objects = new Array();

function loadObjs(){

        for(var i = 0; i < 4; i++){
            var myObj = new Object();
            objects[i] = myObj;
        }

        objects[0].myMethod();
} 
```

However, this (and all the other techiques I've tried) returns `objects[0].myMethod is not a function`.

I still don't get it. Can someone please help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:36:11.970

您正在实例化一个通用对象，而不是您自己的。

尝试这个：

```
objects[i] = new myObj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T01:36:31.817

### 你还没有实例化！

代替：

```
var myObj = new Object();
objects[i] = myObj; 
```

和：

```
objects[i] = new myObj; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:38:06.933

`myObj`因为您将变量实例化为`Object`类而不是`myObj`类。

```
function myObj(){
        this.dCount = 0;

        this.myMethod = function(){
            dCount = 1;
            console.log(dCount);
        }
}

var objects = new Array();

function loadObjs(){

        for(var i = 0; i < 4; i++){
            // var myObj = new myObj();
            // objects[i] = myObj;
            // this is better to separate the variable name from class name. so:
            var m = new myObj();
            objects[i] = m;
        }

        objects[0].myMethod();
} 
```

# java - Menu buttons work, Soft buttons not working. Same Code basically

> ID：14027016
> 
> 赞同：0
> 
> 时间：2012-12-25T01:34:18.167
> 
> 标签：java, android, button, menu

Title says it all, Im new to SQL and trying to change the selection the user makes but placing buttons in the screen and not use the MENU button. Seems like the buttons aren't instantiated but the code looks right to me...what am i missing??

```
package com.example.worldcountriesbooks;

import android.app.Activity;
 import android.app.AlertDialog;
 import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class ViewCountry extends Activity implements OnClickListener{

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 
   private TextView newEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);
      Button a = (Button)findViewById(R.id.editbutton);
       Button b = (Button)findViewById(R.id.deletebutton);
      a.setOnClickListener(this);
      b.setOnClickListener(this); //Set them up right here...

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);
       newEt = (TextView)findViewById(R.id.newText);

   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");
         int newIndex = result.getColumnIndex("newb");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));
         newEt.setText(result.getString(newIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            addEditContact.putExtra("newb", newEt.getText());

            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }
   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }

public void onClick(View arg0) {
     switch (arg0.getId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            addEditContact.putExtra("newb", newEt.getText());

                startActivity(addEditContact); 
                break;

             case R.id.deleteItem:
                deleteContact();
                break;//finish them up here and they do nothing...

    }
    }
} 
```

Now the menu buttons work great so not sure whats up...Thanks for looking

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:19:09.343

菜单按钮很好用，因为它的 switch 语句是正确的。

但是，您的 onClick 无法正常工作。这是因为这些案例的ID 与按钮提供的 ID**不同。**你想要`R.id.editbutton`，`R.id.deletebutton`而不是。

您的方法应如下所示：

```
public void onClick(View arg0) {
     switch (arg0.getId())
      {
         case R.id.editbutton: //updated
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            addEditContact.putExtra("newb", newEt.getText());

                startActivity(addEditContact); 
                break;

             case R.id.deletebutton: //updated
                deleteContact();
                break;

    }
    }
} 
```

# ios - UIButton doesn't respond to touches

> ID：14027019
> 
> 赞同：1
> 
> 时间：2012-12-25T01:34:48.503
> 
> 标签：ios, uibutton

In my app, I need to parse some data from the network, and add some customized buttons. Later, when user click on it, I would provide more details.

*   An image view is the background for the app
*   The position of these buttons(xPos, yPos) are parsed from the server(dynamic data)
*   no prints when I click on these buttons that I add programmatically

The code I have for adding it is like this

```
 ...
    [businessButton setImage:businessImage forState:UIControlStateNormal];
    [businessButton setFrame:CGRectMake([xPos floatValue], [yPos floatValue], [businessImage size].width/2, [businessImage size].width/2)];
    [businessButton addTarget:self.imageView action:@selector(serviceProviderSelected:) forControlEvents:UIControlEventTouchUpInside];
    ...

- (void)serviceProviderSelected:(id)sender
{
    NSLog(@"sp tapped\n");
} 
```

I created another dummy app to do (what I think is the same thing), and the button works out fine...

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIButton *customizedButton = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *image = [UIImage imageNamed:@"business-icon.png"];
    [customizedButton setImage:image forState:UIControlStateNormal];
    [customizedButton setFrame:CGRectMake(100, 100, 20, 20)];
    [customizedButton addTarget:self action:@selector(customButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:customizedButton];
}

- (IBAction)buttonPressed:(id)sender {
    NSLog(@"yes, pressed\n");
} 
```

I've been suspecting that the buttons I create in code are already released, and printed out the array that I use for storing these Buttons, they are valid addresses though...

Thanks!

William

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:43:02.837

我才知道为什么。

而不是`[self.imageView addSubview:businessButton];`,`[self.view addSubview:businessButton];`现在可以工作了。

我想我并没有真正理解在情节提要中添加 imageView 后视图关系如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:29:48.420

UIImageView 默认禁用用户交互。您必须将此属性设置为 YES 才能获得 UIButton 或其他任何作为子视图工作的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T01:37:21.330

你需要做：

```
[businessButton addTarget:self action:@selector(serviceProviderSelected:) forControlEvents:UIControlEventTouchUpInside]; 
```

目标需要是定义选择器的类。

# c# - Backend C# Loop with SQL Insert issue

> ID：14027025
> 
> 赞同：1
> 
> 时间：2012-12-25T01:35:24.637
> 
> 标签：c#, sql, loops, insert

I have a comma delimited textbox and a loop which parses it out and loops to create a series of SQL INSERT statements. However, only the first SQL INSERT statement in [Message_Bridge] is working. The foreach statement is working fine the first time through, but subsequent iteration do not INSERT. No errors are thrown.

```
dataCommand.CommandText = "INSERT INTO [Messages]([Subject], [Body], [Date_Time], [Originator], [Canceled], [Message_Index]) VALUES(@Subject, @Body, GETDATE(), @Originator, 0, 0); SELECT SCOPE_IDENTITY();";

dataCommand.Parameters.Clear();
dataCommand.Parameters.AddWithValue("@Subject", ComposeSubjectTexbox.Text);
dataCommand.Parameters.AddWithValue("@Body", ComposeBodyTexbox.Text);
dataCommand.Parameters.AddWithValue("@Originator", 506);
var Message_ID = dataCommand.ExecuteScalar();

string[] Recipients = ComposeToTextBox.Text.Split(',');

dataCommand.CommandText = "INSERT INTO [Message_Bridge]([Message_ID], [User_ID]) SELECT TOP 1 @Message_ID, [User_ID] FROM [Users] WHERE [User_Name] = @User_Receiver; ";
dataCommand.Parameters.Clear();
dataCommand.Parameters.AddWithValue("@Message_ID", Message_ID);
dataCommand.Parameters.Add("@User_Receiver", SqlDbType.NVarChar);

foreach (string User_Receiver in Recipients)
{
    dataCommand.Parameters["@User_Receiver"].Value = User_Receiver;
    dataCommand.ExecuteNonQuery();
}

myConnection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:14:20.573

我发现我的 Split() 函数在每个 User_Receiver 的末尾添加了一个空格。这仅导致第一个 INSERT 功能起作用，而随后的功能无法通过。INSERT-SELECT 函数设置正确，但我输入的数据不正确。谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:18:52.137

似乎您应该使用[bulkinserter](http://msdn.microsoft.com/en-us/library/ms188365.aspx)，它会更快并且用于批量插入:)

# ios - 来自 NSFetchedResultController 的 NSManagedObjectID 数组

> ID：14027026
> 
> 赞同：0
> 
> 时间：2012-12-25T01:35:26.227
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobject

我在 UICollectionviewController 中显示了一个数据集，我使用 [fetchedResultsController objectAtIndexPath:indexPath] 访问它

使用 segue，我移动到模态滚动视图 + uipageController，其中每个数据一个接一个地显示。问题是单独访问它们中的每一个，因为视图控制器不保存获取请求。我正在考虑传递一个对象 ID 数组，以便每个页面都可以从数据存储中获取关联的数据。

我的问题是：给定 fetchresultController，在我正在使用的 UICollectionviewController 中，有没有办法快速创建对象 ID 数组，或者我是否必须遍历每个 managedObject，获取它们的 ManagedObjectID，并将其填充到数组中?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:42:58.723

您可以使用`valueForKey`从托管对象数组中获取所有对象 ID：

```
NSArray *objects = [fetchedResultsController fetchedObjects];
NSArray *objectIDs = [objects valueForKey:@"objectID"]; 
```

（通常，发送`valueForKey:`到对象数组适用`valueForKey:`于数组的每个对象，并返回结果数组。）

*备注：*使用对象 ID 时，请记住这些可能会更改，请参阅`objectID`文档：

> **重要** 如果接收者尚未保存，则对象 ID 是一个临时值，将在保存对象时更改。

# bash - bash 本地化不适用于多行字符串（使用强语法或通过 `eval`）

> ID：14027030
> 
> 赞同：12
> 
> 时间：2012-12-25T01:36:11.033
> 
> 标签：bash, localization

bash 中有一个很好的特性，关于本地化（语言翻译）：

```
TEXTDOMAIN=coreutils
LANG=fr_CH.utf8
echo $"system boot"
démarrage système 
```

（**注意：**对于这项工作，`fr_CH.utf8`已经在您的系统上*生成*...否则您可以尝试使用自己的语言环境...或安装`locales`并生成一个。）

**问题：**

但是如果这适用于简单的字符串，当字符串包含 a `\n`（或更糟糕的是：反引号时```，事情会更复杂：

```
echo $"Written by %s, %s, %s,\nand %s.\n"
Written by %s, %s, %s,\nand %s.\n 
```

这不是出席的答案。

（**注意2：**对于这项工作，必须在消息文件中准备*确切*`.mo`的消息，在这个示例/测试中，我使用现有`coreutils.mo`文件，可以使用命令取消*格式化*`msgunfmt`。）

总之，我发现进行翻译的唯一方法是：

```
eval echo \$\"$'Written by %s, %s, %s,\nand %s.\n'\"
Écrit par %s, %s, %s,
et %s. 
```

或者

```
msg=$'Written by %s, %s, %s,\nand %s.\n'
eval echo \$\""$msg"\"
Écrit par %s, %s, %s,
et %s. 
```

（你可以看到两个双引号......不是很性感......）

最后我可以：

```
WRITTERS=(Hans Pierre Jackob Heliott)
eval printf \$\""$msg"\" ${WRITTERS[@]}
Écrit par Hans, Pierre, Jackob,
et Heliott. 
```

但正如我最近听说*eval 是邪恶的*...... ;-)

*事实上，我对只使用硬编码*`eval`的部分运行没有问题，但我希望有一种方法可以将这个 eval 排除在外，并以更*自然*或*可读*的方式编写这种部分。

 ***无论如何@techno的回答让我看到我的第一个想法是*危险*的，好像`WRITTERS`包含一些`;ls`，例如......

**编辑：**所以问题是：

*我怎么能把它藏在`eval`外面和/或用更性感的方式写这个*

**注意：**

```
$ printf "I use bash %s on Debian %s\n" $BASH_VERSION $(</etc/debian_version)
I use bash 4.1.5(1)-release on Debian 6.0.6 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T13:56:42.410

我已经对这个功能进行了一些尝试，这就是我想出的：您可以将换行符逐字包含为：

```
$ echo $"Written by %s.
> "
Écrit par %s.
$ 
```

在脚本中：

```
#!/bin/bash

message=$"Written by %s.
"

printf "$message" Gniourf 
```

该脚本将输出：

```
Écrit par Gniourf. 
```

好的，这不是一个真正的答案，但它可能会有所帮助（至少，我们没有使用 evil `eval`）。

个人评论：我觉得这个功能真的很笨拙！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T09:05:43.323

如果`eval`对任意变量使用不好，则有一种方法可以*仅在调用/需要时*`eval`执行此操作，仅在消息部分上运行：

```
function lPrintf() {
    local sFormat="$(
        eval 'echo $"'"${1}"'"'.
    )"
    shift
    printf "${sFormat%.}" $@
}

lPrintf "system boot"
démarrage système

lPrintf  $'Written by %s, %s, %s,\nand %s.\n' techno moi lui-même bibi
Écrit par techno, moi, lui-même,
et bibi. 
```

（翻译字符串末尾的点确保整个字符串，包括前导换行符，传递给变量`sFormat`。它们将被删除`${sFormat%.}`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T21:22:36.790

好吧，我想终于做对了。

```
iprintf() {
    msg="$2"
    domain="$1"
    shift
    shift
    imsg=$(gettext -ed "$domain" "$msg" ; echo EOF)
    imsg="${imsg%EOF}"
    printf "$imsg" "$@"
} 
```

使用示例：

```
LANG=fr_CH.utf8 iprintf coreutils "If FILE is not specified, use %s.  %s as FILE is common.\n\n" foo bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T21:13:55.830

## 构建翻译功能的简单解决方案：

```
f() {
    eval 'local msg=$"'"${1//[\"\$\`]}"\"
    shift
    printf "${msg}" "$@"
} 
```

测试：

```
TEXTDOMAIN=coreutils
LANG="fr_CH.utf8"
f system boot
démarrage système

f $'Written by %s, %s, %s,\nand %s.\n' Athos Portos Aramis Shreck
Écrit par Athos, Portos, Aramis
et Shreck. 
```

### 但是因为我更喜欢设置变量而不是分叉函数：

```
f() {
    eval 'local msg=$"'"${1//[\"\$\`]}"\"
    local -n variable=$2
    shift 2
    printf -v variable "$msg" "$@"
} 
```

然后

```
f $'Written by %s, %s, %s,\nand %s.\n' string Huey Dewey Louie Batman
echo ${string@Q}
$'Écrit par Huey, Dewey, Louie\net Batman.\n'

echo "$string"
Écrit par Huey, Dewey, Louie
et Batman. 
```

### 或者作为一个完整的翻译功能更好：

```
f() {
    local store=false OPTIND OPTARG OPTERR varname
    while getopts 'd:v:' opt ;do
        case $opt in
            d ) local TEXTDOMAIN=$OPTARG ;;
            v ) varname=$OPTARG ;;
        esac
    done
    shift $((OPTIND-1))
    eval 'local msg=$"'"${1//[\"\$\`]}"\"
    shift
    printf ${varname+-v} $varname "$msg" "$@"
} 
```

然后

```
f -d libc -v string "Permission denied"
echo $string
Permission non accordée

f -d coreutils $'Written by %s, %s, %s,\nand %s.\n' Riri Fifi Loulou Georges
Écrit par Riri, Fifi, Loulou
et Georges. 
```

## 旧答案（2013 年 1 月）

好吧，这是我自己的答案：

这现在似乎没有很好地实施。在许多情况下工作，但是，虽然

```
echo "$(gettext 'missing character class name `[::]'\')"
caractère de nom de classe « [::] » manquant 
```

工作简单，使用此*bashism*似乎无法翻译相同的字符串：

```
echo $"missing character class name `[::]'"
> 
```

控制台保持*锁定*（等待这样的字符串结尾）添加 ``" ` 会使 bash 沉浸在复杂的解释过程中：->>

```
> `"
bash: command substitution: line 1: Caractère de fin de fichier (EOF) prématuré lors de la recherche du « ' » correspondant
bash: command substitution: line 2: Erreur de syntaxe : fin de fichier prématurée
missing character class name 
```

而且当然：

```
echo $"missing character class name \`[::]'"
missing character class name `[::]' 
```

不做翻译。:-p

**虽然翻译这个包含两个**反引号的字符串可以正常**工作**：

```
echo $"%s}: integer required between `{' and `}'"
%s} : entier requis entre « { » et « } » 
```

有一个脚本，您可能会在其中看到我的一些不成功的尝试。

```
#!/bin/bash

echo "Localized tests"
export TEXTDOMAIN=coreutils
export LANG=fr_CH.UTF-8
export WRITTERS=(Athos Portos Aramis Dartagnan\ Le\ Beau)

echo '#First method# whitout eval'

declare -A MyMessages;
MyMessages[sysReboot]=$"system boot"
MyMessages[writtenBy]=$"Written by %s, %s, %s,
and %s.
"
MyMessages[intReq]=$"%s}: integer required between `{' and `}'"
MyMessages[trClass]=$"when translating, the only character classes that may appear in
string2 are `upper' and `lower'"
# MyMessages[missClass]=$"missing character class name `[::]'" 

for msgIdx in ${!MyMessages[@]} ;do
    printf "\n--- Test chain '%s' ---\n" $msgIdx
    case $msgIdx in
    writ* )
        printf "${MyMessages[$msgIdx]}\n" "${WRITTERS[@]}"
        ;;
    intReq )
        printf "ARRAY{${MyMessages[$msgIdx]}\n" NaN
        ;;
    * )
        printf "${MyMessages[$msgIdx]}\n"
        ;;
    esac
  done

echo $'###\n#Second method# whith limited eval'
unset MyMessages;

declare -A MyMessages;

lPrintf() {
    local sFormat="$(
        eval 'echo $"'"${1}"'"'.
    )"
    shift
    printf "${sFormat%.}" "$@"
}

MyMessages[sysReboot]="system boot"
MyMessages[writtenBy]=$'Written by %s, %s, %s,\nand %s.\n'
MyMessages[intReq]="%s}: integer required between \`{' and \`}'"
MyMessages[trClass]="when translating, the only character classes that "
MyMessages[trClass]+=$'may appear in\nstring2 '
MyMessages[trClass]+="are \`upper' and \`lower'"
MyMessages[missClass]="missing character class name \`[::]'"

for msgIdx in ${!MyMessages[@]} ;do
    printf "\n--- Test chain '%s' ---\n" $msgIdx
    case $msgIdx in
    writ* )
        lPrintf "${MyMessages[$msgIdx]}" "${WRITTERS[@]}"
        ;;
    intReq )
        lPrintf "${MyMessages[$msgIdx]}" NaN
        ;;
    * )
        lPrintf "${MyMessages[$msgIdx]}"
        ;;
    esac
  done 
```

和他的输出：

```
Localized tests
#First method# whitout eval

--- Test chain 'trClass' ---
à la traduction, les seules classes de caractères qui peuvent apparaître
dans string2 sont « upper » ou « lower »

--- Test chain 'intReq' ---
ARRAY{NaN} : entier requis entre « { » et « } »

--- Test chain 'sysReboot' ---
démarrage système

--- Test chain 'writtenBy' ---
Écrit par Athos, Portos, Aramis,
et Dartagnan Le Beau.

###
#Second method# whith limited eval

--- Test chain 'trClass' ---
à la traduction, les seules classes de caractères qui peuvent apparaître
dans string2 sont « upper » ou « lower »
--- Test chain 'missClass' ---
./localized.sh: eval: line 44: Caractère de fin de fichier (EOF) prématuré lors de la recherche du « ` » correspondant
./localized.sh: eval: line 45: Erreur de syntaxe : fin de fichier prématurée

--- Test chain 'intReq' ---
NaN} : entier requis entre « { » et « } »
--- Test chain 'sysReboot' ---
démarrage système
--- Test chain 'writtenBy' ---
Écrit par Athos, Portos, Aramis,
et Dartagnan Le Beau. 
```

如果有人可以帮助我删除此脚本中的评论和/或错误消息！？...（不到 8 小时？！）

总之，谢谢大家。（除非在 8 小时内获得最佳答案，否则我的赏金将转到@gniourf_gniourf。但也感谢@techno，我喜欢你的 lPrintf！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-29T11:37:19.280

### 让你摆脱它

从根本上讲，您可能不应该担心这个问题，因为 C 和 Bash 在`printf`工作方式上是不同的：C`printf`不翻译反斜杠转义，而 Bash 可以。所以在一个理想的世界里，你真的应该做的只是`printf $"%s, %s,\n%s" some thing more`让模板字符串保留原始反斜杠转义（所以它可能看起来像`msgid "%s, %s,\\n%s"`在 po-file 中）。

正如您已经意识到的那样，该`$""`结构还不允许使用对 bash 的双引号语法无效的 msgid。根本没有办法使用这个条目：

```
msgid "`"
msgstr "« " 
```

通过剥离这些有问题的字符，它只会掩盖问题。（同样，这对 bash 来说很好，因为你会一直在写`echo $"\`"`and `msgid "\\`"`）。

另一方面，确实有[充分的理由不使用该`$""`结构](https://www.gnu.org/software/gettext/manual/html_node/bash.html)。该结构允许翻译人员运行任意命令，与`eval`. 使用[gettext.sh 函数](https://www.gnu.org/software/gettext/manual/html_node/sh.html)没有问题，因为任何变量替换都由单独的`envsubst`程序处理。它还可以让您随心所欲`$''`地使用。***

# google-maps - 向谷歌地图添加标记不起作用

> ID：14027039
> 
> 赞同：-1
> 
> 时间：2012-12-25T01:38:31.473
> 
> 标签：google-maps, google-maps-api-3

```
var marker1 = new google.maps.Marker({
    position: new google.maps.LatLng(53.385846,-1.471385), 
    map: map,       
    icon: { url:'images/markers.png', size:{height:37,width:32},origin:{x:32,y:0},anchor:{x:15,y:35}
                            },
    draggable:true
}); 
```

我使用此代码将标记添加到 Google 地图，但它不起作用。当我将`draggable`参数值从更改`true`为 时`false`，它可以工作。

它是谷歌地图中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:54:49.720

The definition of an [Icon](https://developers.google.com/maps/documentation/javascript/reference#Icon) defines it in terms of google.maps.Point and google.maps.Size objects, not anonymous javascript objects as in the code example. Note the Icon class is a replacement for the newly deprecated [MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage) class.

anchor [Point](https://developers.google.com/maps/documentation/javascript/reference#Point)

origin [Point](https://developers.google.com/maps/documentation/javascript/reference#Point)

scaledSize [Size](https://developers.google.com/maps/documentation/javascript/reference#Size)

size [Size](https://developers.google.com/maps/documentation/javascript/reference#Size)

This might work better (not tested):

```
var marker1 = new google.maps.Marker({
  position: new google.maps.LatLng(53.385846,-1.471385), 
  map: map,       
  icon: { 
          url:'images/markers.png', 
          size: new google.maps.Size(37,32},
          origin: new google.maps.Point(32,0),
          anchor: new google.maps.Point(15,35)
        },
  draggable:true
}); 
```

[working example](http://www.geocodezip.com/v3_simpleMap_marker.html)

**code snippet:**

```
var map;
var triangle = null;
var myLatLng = new google.maps.LatLng(53.385846, -1.471385);

function initialize() {

  var mapOptions = {
    center: myLatLng,
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  var marker1 = new google.maps.Marker({
    position: myLatLng,
    map: map,
    icon: {
      url: 'http://www.geocodezip.com/mapIcons/marker1.png',
      size: new google.maps.Size(20, 34),
      origin: new google.maps.Point(0, 0),
      anchor: new google.maps.Point(10, 34)
    },
    draggable: true
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map_canvas {
  margin: 0;
  padding: 0;
  height: 100%;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="map_canvas" style="height: 400px; width:500px;"></div>
```

# iphone - 为我的 iphone 游戏效果和声音使用 iMacgarageband 声音是否合法？

> ID：14027041
> 
> 赞同：0
> 
> 时间：2012-12-25T01:38:37.590
> 
> 标签：iphone, audio

嗨，我是 indy 开发人员。

如您所知，许多 indy 开发人员使用的资源很少。

所以我决定为我的应用程序使用车库乐队

但我很沮丧这是什么正确的事情？

如果我使用garageband 和它的预设或资源制作声音和效果

使用合法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:42:08.870

是的。Apple 的音效是免版税的。

* * *

> 一世。GarageBand/Jam Pack 软件。您可以免费使用 GarageBand/Jam Pack 软件中包含或以其他方式包含的 Apple 和第三方音频循环内容（“音频内容”），为您的视频和音频项目创建自己的原创配乐. 您可以广播和/或分发您自己使用音频内容创建的音轨，但是，单个样本、声音集或音频循环不得以商业或其他方式独立分发，也不得整体或重新打包部分作为音频样本、声音库、音效或音乐床。

（来自[iLife SLA - 软件许可协议](http://images.apple.com/legal/sla/docs/iLife11.pdf)）

# database-design - “有”关系的模型，其中多个表可以有一个东西

> ID：14027043
> 
> 赞同：1
> 
> 时间：2012-12-25T01:40:16.763
> 
> 标签：database-design

我需要为`smtp`可以发送电子邮件的各种实体建模服务器配置，因此我有一个包含`smtp`服务器设置的表。

例如：发送电子邮件的实体是“房间”和“服务器”——它们存在于不同的表中，因为它们几乎没有共同之处，但它们都引用了一个可选的电子邮件配置。

虽然在房间和服务器表中都有一个很简单`SmtpConfigId`，但我看不到如何在哪里进行级联删除，如果房间或服务器被删除，那么其相应的 smtp 配置也会被删除。

当然，我可以为每个可以发送电子邮件的实体表复制 smtp 配置字段，我认为如果电子邮件配置在它自己的表中，发送邮件的业务逻辑会被简化。

除了`1:1`发送电子邮件的实体之间的电子邮件配置和它们的 smtp 配置之外，还有套用信函的问题，即`1:M`，如果实体创建它们被删除。

我是否以正确的方式思考这个问题，什么是建模它的好方法？在删除触发器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:11:58.883

我会将建模视为一种多态关系，其中一个表用于配置内容，并带有 smtp_type 字段以区分类型（房间、服务器等）。

# ios - 如何在 CGContextRef 上移动图像

> ID：14027064
> 
> 赞同：3
> 
> 时间：2012-12-25T01:48:29.417
> 
> 标签：ios, cgimageref, cgcontextref

在 CGContextRef 上绘制了一个图像：

```
CGContextDrawImage(context, CGRectMake(0, 0, width, height), image); 
```

在另一个函数中，我想将图像移动到矩形

```
CGRectMake(100, 100, width, height); 
```

我能怎么做？

```
void func(CGContextRef context)//there is just one parameter
{
    //move  the image
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:25:43.153

一旦你绘制到上下文，它就无法撤消。您可以在之前的图像上绘制，也许使用纯色来匹配背景。我不知道您为什么要绘制到上下文然后移动它。

我将假设绘制图像的第一个函数调用定位它的第二个函数。如果是这种情况，您可以让第二个函数简单地将平移变换应用于上下文，然后让第一个函数在调用第二个函数后绘制图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:05:39.870

试试这个

```
void func(CGContextRef context, CGFloat x, CGFloat y)
{
    CGContextDrawImage(context, CGRectMake(x,y, width, height), image);
 } 
```

# qt - QScopedValueRollback 有什么用

> ID：14027065
> 
> 赞同：-1
> 
> 时间：2012-12-25T01:48:33.207
> 
> 标签：qt

我在 Qt 4.8.1 中看到了这个类 QScopedValueRollback。任何人都可以帮助展示这个新类的用法示例吗？对不起我的英语不好。我不太明白为什么它的文档有用和需要它。所以我想如果有人能给我一个示例代码，我可以更清楚地理解它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:10:53.167

我从文档中了解到的是..它用于自动将变量回滚到范围之外的值或最后提交的值..

```
void myfunc(int &val)
{ 
    // new scope
    QScopedValueRollBack newScope(val);
    val = 2;
    .
    .
    if (err)
        throw();
}

int val = 1;
myfunc(val);
// val = 1 again.. unless you call commit() after setting val inside new scope.. in which case val = 2 here. 
```

有用性 - 可用于在引发异常时恢复状态，而无需编写 try-catch 块

# c++ - sublime text mac os 开发

> ID：14027075
> 
> 赞同：0
> 
> 时间：2012-12-25T01:50:27.473
> 
> 标签：c++, python, sublimetext2

我真的很喜欢 Mac OS X 上的 SublimeText2。

从维基百科来看，这似乎是用 python 和 C++ 构建的。如何使用 python 和 C++ 为 Mac OS X 开发？您可以在 XCode 中使用 Python 还是有任何其他环境可以开发为 mac 桌面应用程序？

请教我怎么做。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:24:39.180

是的，您可以使用 python 和 C++ 在 OS X 上进行开发。Python 和 C++ 都可以使用 XCode 进行开发。我会推荐 XCode for C++（用 C++[编写 Mac OS X 应用程序的完整解决方案](https://stackoverflow.com/questions/634404/complete-solution-for-writing-mac-os-x-application-in-c)）。至于python，你可以使用XCode，但它可能有点重。我将 vim 用于 python，但 vim 并不适合所有人，所以我也推荐 Wing IDE 101 ( [http://wingware.com/downloads/wingide-101/4.1.9-1/binaries](http://wingware.com/downloads/wingide-101/4.1.9-1/binaries) )。我使用了一段时间并取得了巨大的成功。

# c++ - 通过 make_shared 停止堆分配

> ID：14027079
> 
> 赞同：6
> 
> 时间：2012-12-25T01:51:10.000
> 
> 标签：c++, c++11

我想强制我的对象在堆栈上以强制执行非常严格的语义并解决一些生命周期问题。我已经阅读了几篇关于如何做到这一点的文章，并最终将其设为`operator new`私有（或删除）。`new`直接使用时，这似乎按预期工作，但`make_shared`编译得很好。

```
#include <boost/smart_ptr.hpp>

class A
{
private:
   void *operator new( size_t );
   void operator delete( void* );
   void *operator new[]( size_t );
   void operator delete[]( void* );
};

int main()
{
//  A* a = new A;      // Correctly produces compile error
    boost::shared_ptr<A> a2 = boost::make_shared<A>();
} 
```

直接使用`new A`会按预期给我这个错误：

```
error: ‘static void* A::operator new(size_t)’ is private 
```

我猜这`make_shared`是可行的，因为它使用了placement new 运算符，但我找不到任何讨论如何禁止此操作的文章。我想出的最佳解决方案是显式删除模板专业化`make_shared`

```
namespace boost
{
    template<>
    shared_ptr<A> make_shared<A>() = delete;
}; 
```

这显然是非常具体的`boost::make_shared`。这真的是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T01:52:33.830

的放置形式`new`很容易处理——它们只是带有额外的参数。例如，简单的放置形式是

```
void* operator new(std::size_t, void*); 
```

请注意，18.6.1.3 禁止在全局范围内重新定义这些；但是，为您的特定类型重新定义（或删除/使其无法访问）它们应该没有问题。

不幸的是，`make_shared`使用 scoped `::new (pv) T(std::forward<Args>(args)...)`。正如我所提到的，你不能乱用新的全局布局。所以你不能在编译时阻止它，任何运行时陷阱都会是一个黑客（检查`this`指针以查看它是否在堆栈的边界内）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T02:15:49.340

您不能通过仅使任何运算符不可访问来强制类的对象始终在堆栈上：可以在堆栈上构造的任何对象也可以作为成员嵌入到另一个对象中。即使您的原始类可能难以在堆上分配，包含类也不会。我认为这是在以下情况下发生的情况`boost::make_shared()`：在内部，它可能分配了一些记录，其中包含其管理数据和实际分配的对象。或者，它可以使用来自某种分配器的分配函数，这些分配器不映射到类型，`operator new()`而是使用它自己的`operator new()`重载。

我不确定是否可以防止堆分配（至少，当对象嵌入到另一个对象中时），但这样做的任何方法都需要使构造函数不可访问（很可能`private`）并使用某种工厂函数，可能与移动相结合。另一方面，如果您可以移动一个对象，那么您就有一个可访问的构造函数，并且没有什么可以阻止该对象被移动到堆上的一个对象中。

如果您特别想阻止使用`std::make_shared()`具体类型（或者`boost::make_shared()`尽管我不能引用专门用于后者的规则），您可以专门`std::make_shared()`化：根据 17.6.4.2.1 [namespace.std] 第 1 段，用户是如果涉及用户定义的类型，则允许专门化任何模板（除非另有说明）。因此，您可以防止`A`与`std::make_shared()`:

```
class A
{
public:
    A();
    A(int);
};

namespace std
{
    template <> std::shared_ptr<A> make_shared<A>() = delete;
    template <> std::shared_ptr<A> make_shared<A, int>(int&&) = delete;
}
namespace boost
{
    template <> boost::shared_ptr<A> make_shared<A>() = delete;
    template <> boost::shared_ptr<A> make_shared<A, int>(int&&) = delete;
} 
```

显然，如果你有多个构造函数，`A`你可能需要添加更多的特化。...如果您的类型恰好是类模板或构造函数是模板，那么您将不走运：您不能部分专门化函数模板。

关于您关于展示位置的问题`new`（可能会或可能不会被 使用`make_shared()`）：展示位置`new`（和`delete`）签名如下：

```
void* operator new(size_t, void*) noexcept;
void* operator new[](size_t, void*) noexcept;
void  operator delete(void*, void*) noexcept;
void  operator delete[](void*, void*) noexcept; 
```

（见 18.6 [support.dynamic] 第 1 段）。不过，我怀疑使它们无法访问会对您有所帮助。

# r - R - 搜索具有相同条件的多列并按列和条件计算行数

> ID：14027082
> 
> 赞同：4
> 
> 时间：2012-12-25T01:51:44.740
> 
> 标签：r

我的问题最好通过三个问题来解释。

1）。有没有办法使用相同的条件使用索引（我在下面的示例中使用列名）搜索多个列？我想知道是否有更优雅的实现方式（我在下面有另一种方法）？

```
sepsis <- subset(allhospitals, diag_p %in% c(78552, 99592) | 
                 odiag1 %in% c(78552, 99592) | 
                 odiag2 %in% c(78552, 99592) |  
                 odiag3 %in% c(78552, 99592) |
                 ## etc. etc. 
```

2.) 在对数据进行子集化后，我想计算每列同时存在两种条件的行数（即在 diag_p、odiag1、odiag2 等中出现了多少次 78552 和 99552）。

3.）最后，我想进行上面的计算，并按另一列中的因子对其进行切片。

我的策略（这很糟糕）是：a.）创建列索引向量；然后 b.) 应用两个函数（每个条件一个）来对数据进行子集化并计算行数；c.) 使用列索引作为唯一列创建一个新数据框（每个条件一个）；最后 d.) 将“应用”与我在列索引（即新数据框的唯一列）上编写的函数一起使用。

```
## indices for all columns of interest
ind <- c(35, seq(from=39, to=85, by=2)) 

## create one data frame and function per ICD-9 code (i.e., condition)
f7 <- function(x) nrow(subset(allhospitals, allhospitals[x]=="78552"))
t.7 <- data.frame("diag"=ind)
t.7$freq <- apply(t.7,1,f7)

f9 <- function(x) nrow(subset(allhospitals, allhospitals[x]=="99592"))
t.9 <- data.frame("diag"=ind)
t.9$freq <- apply(t.9,1,f9) 
```

然后我将 rbind 所有这些并为我的整个数据集获取一个聚合值。问题是我需要针对几个单独的因素执行此操作，从而使我的方法非常乏味。plyr 包的所有尝试都没有结果，虽然我对 R 比较陌生，所以也许这里也有一个解决方案。

更新：

我再次尝试了 plyr 包并得到了接近我想要的东西，尽管我必须一次执行一个条件（“99592”）和一列（“odiag1”），因为我需要按每个条件获取行数 - - 不适用于所有条件的组合。如您所见，我的代码仍然看起来很难看。无论如何，我得到了一个数据框，我必须将其重塑为“长”格式，因为我的数据集非常宽且难以使用。这是一些代表性数据和我更新的 ddply 方法：

样本数据：

```
 id  patzip  adm_yr  diag_p  odiag1 odiag2  odiag3  odiag4  etc.  etc.  etc.
Hosp A   93077    2010   99592   16932  22107   78552      NA
Hosp B   99804    2011   16932   99592  78552   12988      NA
Hosp B   94503    2010   22107   78552  12988   99592   16932
Hosp A   93013    2010   12988   22107  12988      NA      NA
Hosp C   93112    2009   99592   78552  22107      NA      NA 
```

我的新方法：

```
library(plyr)
df <- ddply(allhospital, .(id), summarize, diag_p = length(id[diag_p == 99592]), 
        odiag1 = length(id[odiag1 == 99592]), odiag2 = length(id[odiag2 == 99592]),
        odiag3 = length(id[odiag3 == 99592]), odiag4 = length(id[odiag4 == 99592]),
        odiag5 = length(id[odiag5 == 99592]), odiag6 = length(id[odiag6 == 99592]),
        odiag7 = length(id[odiag7 == 99592]), odiag8 = length(id[odiag8 == 99592]),
        odiag9 = length(id[odiag9 == 99592]), odiag10 = length(id[odiag10 == 99592]),
        odiag11 = length(id[odiag11 == 99592]), odiag12 = length(id[odiag12 == 99592]),
        odiag13 = length(id[odiag13 == 99592]), odiag14 = length(id[odiag14 == 99592]),
        odiag15 = length(id[odiag15 == 99592]), odiag16 = length(id[odiag16 == 99592]),
        odiag17 = length(id[odiag17 == 99592]), odiag18 = length(id[odiag18 == 99592]),
        odiag19 = length(id[odiag19 == 99592]), odiag20 = length(id[odiag20 == 99592]),
        odiag21 = length(id[odiag21 == 99592]), odiag22 = length(id[odiag22 == 99592]),
        odiag23 = length(id[odiag23 == 99592]), odiag24 = length(id[odiag24 == 99592])) 
```

更新 2：

这是预期结果的一种方式：

```
 id     diag  Count.78552  Count.99552
Hosp A   diag_p            4            0
Hosp A   odiag1           10            8
Hosp A   odiag2           17           16
Hosp A   odiag3            9           10
Hosp B   diag_p            5            8
Hosp B   odiag1            1            3
Hosp B   odiag2            0            1
Hosp B   odiag3            0            0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:27:36.103

多个列的条件相同。

```
vn_cond <- c("diag_p","odiag1","odiag2","odiag3")# columns to meet condition
cond_set <- c(78552, 99592)# values in condition set
#
# sapply - repeats conditions 
# rowSums(...)>0 - at least one TRUE in row
#
sepsis <- allhospitals[rowSums(sapply(allhospitals[vn_cond],
                                      "%in%", cond_set))>0,] 
```

编辑

```
require(reshape2)

hosp_long <- melt(allhospitals[c("id",vn_cond)],
                  id.vars="id", na.rm=TRUE,
                  variable.name="var_diag")
hosp_long <- transform(hosp_long,diag_78552 = 0L+(value == 78552),
                                 diag_99592 = 0L+(value == 99592))
hosp_long <- melt(subset(hosp_long,select=-value), id.vars=c("id","var_diag"),
                  variable.name="var_cond")
out <- dcast(hosp_long, id+var_diag~var_cond, sum) 
```

# android - Android - 将活动添加到 TabHost？

> ID：14027085
> 
> 赞同：0
> 
> 时间：2012-12-25T01:52:14.583
> 
> 标签：android, android-tabhost

我有一个包含 ListView 和 TabHost 的 Activity。在这个 TabHost 中，我试图添加另一个 Activity，但它一直在我身上崩溃。知道是什么原因造成的吗？

```
public class MainActivity extends RoboFragmentActivity {

    @InjectView(R.id.listView)
    private ListView listView;
    @InjectView(R.id.tabHost)
    private TabHost tabHost;
    @Inject
    IIntentProxy intentProxy;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        tabHost.setup();

        TabHost.TabSpec spec = tabHost.newTabSpec("tag");
        spec.setContent(intentProxy.getIntent(DetailActivity.class));
        spec.setIndicator("Title");

                // It crashes on line below
                // tabHost is not null, neither is spec
        tabHost.addTab(spec);
    }

} 
```

.

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TabHost
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tabHost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="50" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:padding="5dp" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:padding="5dp" >
                </FrameLayout>
            </TabWidget>
        </LinearLayout>
    </TabHost>

    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="50" >
    </ListView>

</LinearLayout> 
```

详细活动被添加到 tabhost xml 文件不包含任何内容，只是一个 LinearLayout

```
public class DetailActivity extends RoboActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detail_activity);
    }
} 
```

堆栈跟踪

```
12-24 18:06:03.535: E/AndroidRuntime(27143): FATAL EXCEPTION: main
12-24 18:06:03.535: E/AndroidRuntime(27143): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.company.app/com.company.app.pages.MainActivity}: java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'?
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.os.Looper.loop(Looper.java:137)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at java.lang.reflect.Method.invokeNative(Native Method)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at java.lang.reflect.Method.invoke(Method.java:511)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at dalvik.system.NativeStart.main(Native Method)
12-24 18:06:03.535: E/AndroidRuntime(27143): Caused by: java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'?
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:747)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.widget.TabHost.setCurrentTab(TabHost.java:413)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.widget.TabHost.addTab(TabHost.java:240)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at com.pages.ChargeSheetActivity.onCreate(ChargeSheetActivity.java:33)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.Activity.performCreate(Activity.java:5104)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-24 18:06:03.535: E/AndroidRuntime(27143):    at android.app.ActivityThread.performLaunchActivity(ActivityThr 
```

ead.java:2144) 12-24 18:06:03.535: E/AndroidRuntime(27143): ... 11 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:12:53.313

你不能使用

> 扩展活动

你必须使用

> 扩展 ActivityGroup

这个链接解释了一点：

[Android 异常：您是否忘记调用“public void setup (LocalActivityManager activityGroup)”](https://stackoverflow.com/questions/3272500/android-exception-did-you-forget-to-call-public-void-setup-localactivitymanag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T02:28:26.203

1-我扩展`RoboTabActivity`而不是`RoboFragmentActivity`

2-将我的 xml 从更改`android:id="@+id/tabHost"`为`android:id="@android:id/tabhost"`

3-我将活动添加到清单文件

4-而不是注入 Tabhost 或使用我使用的 findById`this.getTabHost()`

现在剩下的唯一问题是如果我需要使用 DialogFragment 怎么办？这通常需要 Activity 来扩展 RoboFragmentActivity

# php - PHP & MySQL - 限制数组

> ID：14027095
> 
> 赞同：0
> 
> 时间：2012-12-25T01:54:08.353
> 
> 标签：php, mysql, arrays

我正在尝试限制数组`mysql_fetch_assoc($query)`，并且不确定我将如何去做。

```
$query = mysql_query('SELECT * FROM table ORDER BY id DESC');

while($output = mysql_fetch_assoc($query))
{
    //do something
} 
```

你添加一个计数器还是什么？你如何添加这个计数器？我真的很困惑`mysql_query`and `mysql_fetch_assoc`。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:56:17.800

在你之后`ORDER BY id DESC`，添加`LIMIT 100`（或任何你想要的数字）。对于接下来的 100 行，使用`LIMIT 100,100`，然后`LIMIT 200,100`以此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T01:56:03.043

您可以直接在 SQL 查询中限制结果。要获得前 100 条记录，请执行以下操作

```
SELECT * FROM table 
ORDER BY id DESC 
LIMIT 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:56:37.807

### 采用`LIMIT`

```
SELECT * FROM table ORDER BY `id` DESC LIMIT 10; 
```

你没有看到 phpMyAdmin 总是限制在`30`?

# javascript - newb 需要 Json 帮助

> ID：14027099
> 
> 赞同：1
> 
> 时间：2012-12-25T01:55:31.850
> 
> 标签：javascript, json

我编写了我的第一个 ajax 脚本，经过一场噩梦之后，它在我的本地 Web 服务器上完美运行，但是当我上传到我的 Web 主机时什么也没做。我怀疑它是因为我使用 getjson 并且 get 在 web 主机上被禁用。所以今天是圣诞节，我对流感感觉很糟糕，我需要让它工作，请有人帮我把它变成一个帖子字符串。

```
xmlhttp.open("GETJSON","lookup.php?sname="+str1+"&reg="+str,true); 
```

这是我的收获，但如果有意义的话，我需要发一个帖子，

```
xmlhttp.open("GETJSON","lookup.php?sname="+str1+"&reg="+str,true);
xmlhttp.send(); 
```

请记住，我之前使用 javascript 完成的最多的事情是打开窗口并返回。提前谢谢尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T01:58:39.257

没有`GETJSON`请求方法之类的东西。只需使用`GET`.

然后，用于`JSON.parse(xmlhttp.responseText)`解析出响应。

# ios5 - 使用 curl 验证收据，但响应为空

> ID：14027105
> 
> 赞同：0
> 
> 时间：2012-12-25T01:57:24.983
> 
> 标签：ios5

我使用 curl 验证收据，但响应为空。[我根据这个博客](http://abcphp.com/out/verifying-apple-app-store-receipts-for-in-app-purchases-with-php-and-curl-1/)编写代码。如何解决？

```
<?php

$receipt="<7b0a0922 7369676e 61747572 6522203d 20224167 42423765 756e316d 79366745 64755561 4d7a4841 53664363 33315874 6c674439 52316b6d 4c454d35 54436654 67513578 6e576a57 2b395636 2f634141 2f454b37 66624956 524f6454 54613736 6a332f72 544b364d 632f4f74 464b6b43 71615543 5046385a 38334349 47554274 6e564c37 4b4b3679 47494d6b 59705158 46727948 42473346 762b584f 36614747 76396178 794a4359 716b312f 56737047 36586b44 68786a59 7359445a 717a4141 4144567a 43434131 4d776767 49376f41 4d434151 49434347 55556b55 335a5741 53314d41 30474353 71475349 62334451 45424251 55414d48 3878437a 414a4267 4e564241 5954416c 56544d52 4d774551 59445651 514b4441 70426348 42735a53 424a626d 4d754d53 59774a41 59445651 514c4442 31426348 42735a53 42445a58 4a306157 5a705932 46306157 39754945 46316447 6876636d 6c306554 457a4d44 45474131 55454177 77715158 42776247 55676156 5231626d 567a4946 4e306233 4a6c4945 4e6c636e 52705a6d 6c6a5958 52706232 34675158 56306147 39796158 52354d42 34584454 41354d44 59784e54 49794d44 55314e6c 6f584454 45304d44 59784e44 49794d44 55314e6c 6f775a44 456a4d43 45474131 55454177 77615548 56795932 68686332 56535a57 4e6c6158 42305132 56796447 6c6d6157 4e686447 5578477a 415a4267 4e564241 734d456b 46776347 786c4947 6c556457 356c6379 42546447 39795a54 45544d42 45474131 55454367 774b5158 42776247 55675357 356a4c6a 454c4d41 6b474131 55454268 4d435656 4d77675a 38774451 594a4b6f 5a496876 634e4151 45424251 41446759 30414d49 474a416f 4742414d 72526a46 32637434 49725364 69544368 61493067 38707776 2f636d48 7338702f 5277562f 72742f39 31584b56 684e6c34 58494269 6d4b6a51 514e6667 48734473 36796a75 2b2b4472 4b4a4537 754b7370 684d6464 4b596646 45357247 58734164 42456a42 77524978 65785465 76783348 4c454647 4174316d 6f4b7835 30396468 78746949 6444674a 76325961 56733439 4230754a 764e6479 36534d71 4e4e4c48 73444c7a 4453396f 5a484167 4d424141 476a636a 42774d41 77474131 55644577 45422f77 51434d41 41774877 59445652 306a4242 6777466f 41554e68 336f3470 32433067 45597454 4a724474 64444335 4659517a 6f774467 59445652 30504151 482f4241 51444167 65414d42 30474131 55644467 51574242 53706734 50794755 6a465068 4a584342 544d7a61 4e2b6d56 386b3954 41514267 6f71686b 69473932 4e6b4267 55424241 49464144 414e4267 6b71686b 69473977 30424151 55464141 4f434151 45414561 5362506a 746d4e34 432f4942 33514570 4b333252 78616343 44586456 58416556 52655335 46615a78 632b7438 38705150 39334269 41787664 572f3365 54534d47 59354662 6541594c 33657471 5035676d 38777246 6f6a5830 696b7956 52537451 2b2f4151 304b456a 74714230 376b4c73 39515565 38637a52 38554766 644d3145 756d562f 55677644 64344e77 4e59784c 514d6734 57545166 676b5151 56793847 585a7756 48676245 2f554336 59373035 33704758 426b3531 4e504d33 776f7868 64336753 524c7658 6a2b6c6f 48735374 63544571 65397042 44706d47 352b736b 3474772b 474b3347 4d65454e 352f2b65 31515439 6e702f4b 6c316e6a 2b614277 37433078 73793062 466e6141 64316353 53367864 6f72792f 4355764d 3667744b 736d6e4f 4f647154 65736270 30627338 736e3657 71733043 39646763 78524875 4f4d5a32 746d386e 704c556d 37617267 4f537a51 3d3d223b 0a092270 75726368 6173652d 696e666f 22203d20 2265776f 4a496d39 79615764 70626d46 734c5842 31636d4e 6f59584e 6c4c5752 68644755 7463484e 30496941 39494349 794d4445 794c5445 794c5445 77494441 304f6a45 304f6a4d 32494546 745a584a 70593245 76544739 7a583046 755a3256 735a584d 694f776f 4a496e42 31636d4e 6f59584e 6c4c5752 68644755 7462584d 69494430 67496a45 7a4e5459 7a4f5463 324d7a4d 324d7a49 694f776f 4a496e56 75615846 315a5331 705a4756 7564476c 6d615756 79496941 39494349 774d4441 77596a41 794f5745 344d5467 694f776f 4a496d39 79615764 70626d46 734c5852 79595735 7a59574e 30615739 754c576c 6b496941 39494349 784d4441 774d4441 774d4459 774d5463 314d7a67 7a496a73 4b43534a 6c654842 70636d56 7a4c5752 68644755 69494430 67496a45 7a4e5459 7a4f5463 344d544d 324d7a49 694f776f 4a496e52 79595735 7a59574e 30615739 754c576c 6b496941 39494349 784d4441 774d4441 774d4459 774f5445 774e5463 7a496a73 4b43534a 76636d6c 6e615735 68624331 7764584a 6a614746 7a5a5331 6b595852 6c4c5731 7a496941 39494349 784d7a55 314d5451 784e6a63 324d4441 77496a73 4b43534a 335a5749 7462334a 6b5a5849 7462476c 755a5331 70644756 744c576c 6b496941 39494349 784d4441 774d4441 774d4449 324e446b 334f4451 7a496a73 4b43534a 69646e4a 7a496941 39494349 784c6a41 694f776f 4a496d56 3463476c 795a584d 745a4746 305a5331 6d62334a 74595852 305a5751 7463484e 30496941 39494349 794d4445 794c5445 794c5449 30494445 334f6a45 774f6a45 7a494546 745a584a 70593245 76544739 7a583046 755a3256 735a584d 694f776f 4a496d6c 305a5730 74615751 69494430 67496a55 344e6a45 324d7a4d 774e4349 3743676b 695a5868 7761584a 6c637931 6b595852 6c4c575a 76636d31 68644852 6c5a4349 67505341 694d6a41 784d6930 784d6930 794e5341 774d546f 784d446f 784d7942 4664474d 76523031 55496a73 4b43534a 77636d39 6b64574e 304c576c 6b496941 3949434a 6a623230 75615746 75597935 68634842 7764584a 6a614746 7a5a5335 7a5a585a 6c626d52 6865584d 694f776f 4a496e42 31636d4e 6f59584e 6c4c5752 68644755 69494430 67496a49 774d5449 744d5449 744d6a55 674d4445 364d4463 364d544d 67525852 6a4c3064 4e564349 3743676b 6962334a 705a326c 75595777 74634856 79593268 68633255 745a4746 305a5349 67505341 694d6a41 784d6930 784d6930 784d4341 784d6a6f 784e446f 7a4e6942 4664474d 76523031 55496a73 4b43534a 69615751 69494430 67496d4e 76625335 70595735 6a4c6d46 7763484e 31596e4e 6a636d6c 7764476c 76626e4d 694f776f 4a496e42 31636d4e 6f59584e 6c4c5752 68644755 7463484e 30496941 39494349 794d4445 794c5445 794c5449 30494445 334f6a41 334f6a45 7a494546 745a584a 70593245 76544739 7a583046 755a3256 735a584d 694f776f 4a496e46 31595735 30615852 35496941 39494349 78496a73 4b66513d 3d223b0a 0922656e 7669726f 6e6d656e 7422203d 20225361 6e64626f 78223b0a 0922706f 6422203d 20223130 30223b0a 09227369 676e696e 672d7374 61747573 22203d20 2230223b 0a7d>";
$data= array("receipt-data"=>$receipt,"password"=>"12345678");
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,"https://sandbox.itunes.apple.com/verifyReceipt");
curl_setopt($ch,CURLOPT_POST,1);
//curl_setopt($ch,CURLOPT_HEADER,0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true); 
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);

curl_setopt($ch,CURLOPT_POSTFIELDS,$data);
$response = curl_exec($ch);
$errno    = curl_errno($ch);   
$errmsg   = curl_error($ch);   
echo "response: ".$response;
echo "<br/>";
//$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
 $result = json_decode($response);  
echo "errno: ".$errno;
echo "<br/>";
echo "errmsg: ".$errmsg;
echo "<br/>";
//echo "code:".$httpCode;
echo "result: ".$result;
curl_close($ch); 
```

?>

结果是： **响应：errno：0 errmsg：结果：**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:38:22.977

我已经测试了你的代码，它运行良好，所以我认为你应该检查你的服务器环境！

# android - android思考：TimerTask中的AsyncTask

> ID：14027116
> 
> 赞同：0
> 
> 时间：2012-12-25T02:00:40.940
> 
> 标签：android

```
private void startUpdateTimerTask() {
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
                doUpdate();

            }
        };

        Timer timer = new Timer(true);
        timer.schedule(task, ONE_MINUTE_MILLIS, ONE_HOUR_MILLIS);
    }

        private void doUpdate() { 
              new AsyncTask<Void,Void,Void>() {

            @Override
            protected Void doInBackground(Void... params) { 

                //....Network time-consuming tasks
                return null;
            }

        }.equals();

        } 
```

**(1)我的问题：当我运行这个函数时，会有RuntimeException(No Looper; Looper.prepare() was not called on this thread.);**

所以我改变了：

```
private void startUpdateTimerTask() {
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
                         Looper.prepare();

                 doUpdate();

                         Looper.loop()

            }
        };

        Timer timer = new Timer(true);
        timer.schedule(task, ONE_MINUTE_MILLIS, ONE_HOUR_MILLIS);
    } 
```

那么 RuntimeException 没有出现，但是 doUpdate() 只执行了一次？

(2)**问题：如何实现上网1小时更新一次信息？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:34:45.907

> 那么 RuntimeException 没有出现，但是 doUpdate() 只执行了一次？

这是因为异步任务只能执行一次。doInBackground() 在单独的线程上运行，一旦一个线程完成了它的进程，就不能再次启动它。由于您已经在使用定时器任务，定时器任务在单独的工作线程上执行操作，因此您可以在定时器任务的 run() 中执行相同的操作，这与您在 AsyncTask 的 doInBackground() 中执行的操作相同。为了更新你的 UI，你可以使用 Runnable。

# cordova - 需要帮助查找音频无法在 Apache Cordova 2.3.0rc1 中播放的原因

> ID：14027117
> 
> 赞同：0
> 
> 时间：2012-12-25T02:00:42.607
> 
> 标签：cordova, text-to-speech

我正在尝试使用 google 的 TTS 服务将 mp3 拉入我的 PhoneGap (Cordova 2.3.0rc1) 应用程序并播放它们。

我需要更多关于为什么音频停止为我工作的信息。其他人可以确认它有效还是无效？

这个：

```
{
    var url = 'http://translate.google.com/translate_tts?tl=en&q=are+you+messing+with+me?';
    var snd = new Audio(url);
    snd.load();
    snd.play();
} 
```

结果如下：

```
2012-12-24 16:45:54.365 myAPP[1614:907] [LOG] HTML5 audio capable.
2012-12-24 16:45:56.413 myAPP[1614:907] [MPAVController] Autoplay: Enabling autoplay
2012-12-24 16:45:56.437 myAPP[1614:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-12-24 16:45:57.227 myAPP[1614:907] [MPAVController] Autoplay: Disabling autoplay for pause
2012-12-24 16:45:57.230 myAPP[1614:907] [MPAVController] Autoplay: Disabling autoplay
2012-12-24 16:45:57.280 myAPP[1614:907] [MPAVController] Autoplay: Enabling autoplay
2012-12-24 16:45:57.414 myAPP[1614:907] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2012-12-24 16:45:57.480 myAPP[1614:907] [MPAVController] Autoplay: Enabling autoplay
2012-12-24 16:45:57.522 myAPP[1614:907] [MPAVController] Autoplay: Enabling autoplay 
2012-12-24 16:45:57.609 myAPP[1614:907] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0 
2012-12-24 16:46:01.150 myAPP[1614:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0 
2012-12-24 16:46:01.153 myAPP[1614:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up. 
2012-12-24 16:46:01.163 myAPP[1614:907] [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1 
2012-12-24 16:46:01.166 myAPP[1614:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 1 
2012-12-24 16:46:01.191 myAPP[1614:907] [MPAVController] Autoplay: Enabling autoplay 
2012-12-24 16:46:03.346 myAPP[1614:907] [MPAVController] Autoplay: _streamUnlikelyToKeepUp: 1 -> 0 
2012-12-24 16:46:03.352 myAPP[1614:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0 
2012-12-24 16:46:03.355 myAPP[1614:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up. 
2012-12-24 16:46:03.358 myAPP[1614:907] [MPAVController] Autoplay: _streamRanDry: 0 -> 1 
2012-12-24 16:46:03.389 myAPP[1614:907] [MPAVController] Autoplay: Took background task assertion (8) for playback stall 
2012-12-24 16:46:03.398 myAPP[1614:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0 
2012-12-24 16:46:03.403 myAPP[1614:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up. 
2012-12-24 16:46:03.405 myAPP[1614:907] [MPAVController] Autoplay: Disabling autoplay 
2012-12-24 16:46:03.408 myAPP[1614:907] [MPAVController] Autoplay: Disabling autoplay for pause 
2012-12-24 16:46:03.411 myAPP[1614:907] [MPAVController] Autoplay: Disabling autoplay 
```

另一种选择是做一个 jquery 下载并从一个 div 中播放它......？

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:39:54.020

那么音频标签 api 在 web 视图中没有得到很好的支持，这可能是您遇到问题的地方。您可能想要切换到使用[PhoneGap Media API](http://docs.phonegap.com/en/2.2.0/cordova_media_media.md.html#Media)来播放您的 mp3 文件。在某些时候，我一直打算重新编写这个 API 以符合音频 API，但我还没有时间。

另外，如果你只是想 TTS 的东西，为什么不使用我写的[TTS 插件](https://github.com/macdonst/TTS)在设备上进行转换呢？

# ios - 当我在表格视图中选择一个单元格时，我的应用程序崩溃了，但我无法在代码中找到崩溃的位置

> ID：14027118
> 
> 赞同：0
> 
> 时间：2012-12-25T02:00:52.607
> 
> 标签：ios, uitableview, ios6, tableview

我正在尝试从表格视图切换到详细视图。当我单击单元格时，它会崩溃。我已经使用中断来尝试找到它在代码中崩溃的位置，但我找不到特定的行。当从表视图到详细视图执行 segue 时，它​​会崩溃。我想将一些变量传递给详细视图，但我首先需要让它切换到详细视图。我正在使用故事板仅供参考。任何帮助，将不胜感激。

更新：崩溃日志如下

```
arg c = (int) 1
arg v = (char **) 0x2fd63cdc 
```

这是崩溃所在的行

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

更新 2

当我单步执行代码时，它崩溃之前的最后一段代码是为 segue 函数做准备。在其中的最后一行代码之后，它崩溃并转到上面的行。

更新 3

我意识到控制台被隐藏了，所以这是控制台中显示的错误。我的两个为 segue 做准备的 nslog 都被调用了。

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<DetailViewController 0x1e098bd0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key name.'
*** First throw call stack:
(0x3a1e63e7 0x39072963 0x3a1e60d5 0x3a418fe9 0x3a414d53 0x3a16c8a5 0x39665d7d 0x396655ff 0x3955e039 0x394e8421 0x3953d1b7 0x3953d0fd 0x3953cfe1 0x3953cf0d 0x3953c659 0x3953c541 0x3952ab33 0x3952a7d3 0x3958b2ad 0x3960dca1 0x3a4b9e67 0x3a1bb857 0x3a1bb503 0x3a1ba177 0x3a12d23d 0x3a12d0c9 0x3746633b 0x3951d291 0x69a9 0x3a91eb20)
libc++abi.dylib: terminate called throwing an exception 
```

根视图控制器.m

```
#import "RootViewController.h"
#import "DetailViewController.h"

@implementation RootViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    //Initialize the array.
    listOfItems = [[NSMutableArray alloc] init];

    //Add items
    [listOfItems addObject:@"Jane"];
    [listOfItems addObject:@"Johnny"];
    [listOfItems addObject:@"Deanne"];
    [listOfItems addObject:@"John"];
    [listOfItems addObject:@"Susan"];

    //Set the title
    self.navigationItem.title = @"Countries";
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [listOfItems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"MyCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Set up the cell...
    NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    return cell;
}
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    DetailViewController *DVC = [[DetailViewController alloc]init];
    DVC = [segue destinationViewController];
    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    NSString *name = [listOfItems objectAtIndex:path.row];
    DVC.name1.text = name;
} 
```

RootViewController.h

```
#import <UIKit/UIKit.h>

@interface RootViewController : UITableViewController <UITableViewDataSource,UITableViewDelegate> {

    NSMutableArray *listOfItems;
    IBOutlet NSMutableArray *detailListOfItems;
}
@end 
```

细节视图控制器.m

```
#import "DetailViewController.h"

@implementation DetailViewController
@synthesize selectedCountry;
@synthesize name1;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Set the title of the navigation bar
    //self.navigationItem.title = name1.text;

} 
```

DetailViewController.h

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController

@property (nonatomic,strong) IBOutlet UILabel *name1;
@property (nonatomic, retain) NSString *selectedCountry;
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T03:08:47.283

添加异常断点......

这是顶部的选项卡：

![在此处输入图像描述](../Images/7e5bd7776a981251a65103c4ed05506a.png)

您需要选择倒数第二个断点图标之一。按下它并查看底部的添加图标：

![在此处输入图像描述](../Images/6f8ca94fdb57d19519d527123565c917.png)

然后按添加并创建一个异常断点并将其修改为这些设置：

![在此处输入图像描述](../Images/ebbd55eb6c41f75abf17eae5eac98c6b.png)

这是你的断点异常！

![在此处输入图像描述](../Images/3c308c953ad3dff474bd24291c1982c5.png)

然后运行您的应用程序，它应该会在您崩溃的线路上崩溃。您可能会看到一些崩溃日志，并且您可能必须将方案更改为 GDB

* * *

更新

是否有任何类型的崩溃日志或堆栈跟踪？另外，尝试将方案更改为 GDB ...... 以下是如何：

![在此处输入图像描述](../Images/bf571f54bd39717165d0e94215f52508.png)

![在此处输入图像描述](../Images/d0bfa70fb7d9873256a44b871c339858.png)

![在此处输入图像描述](../Images/f7bba9d08ac7e5ad03d554dff8e47eb0.png)

切换到 GDB 通常可以解决此问题。如果您**已经在**使用 GDB，请切换到 LLDB 看看会发生什么！

注意：正如您发布的那样，

> arg c = (int) 1
> 
> arg v = (char **) 0x2fd63cdc

不是**你**的崩溃日志吗...

* * *

更新

如果这仍然不起作用，您应该`NSLog()`在各处放置断点和 ' 以进行调试并找出错误的崩溃代码的位置！

* * *

更新

看，我们显然无法找出它在哪里崩溃，但我可能对事情在哪里崩溃以及为什么崩溃有一个微妙的线索。它与您的表格视图和`listOfItems`. 通常，表视图会在调用代码之前或同时重新加载其数据并调用其委托和数据源方法`viewDidLoad`。所以转移`listOfItems`to对象的初始化和添加，`viewWillAppear`看看会发生什么。

* * *

更新

检查故事板中的所有插座`DetailViewController`并确保它们没有连接到不再存在的任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T19:50:28.240

这是解决方案：检查您的单元格标识符的名称并将此标识符应用于您的 segue。每个 Segue 都有一个标识符..默认为空..所以尝试分配一个与您的代码相似的名称，特别是您的详细信息的 segue视图控制器。

# javascript - 保存用户编辑的时间线？

> ID：14027119
> 
> 赞同：3
> 
> 时间：2012-12-25T02:01:26.293
> 
> 标签：javascript, html, local-storage, session-storage, chap-links-library

我一直在玩[http://almende.github.com/chap-links-library/timeline.html](http://almende.github.com/chap-links-library/timeline.html)，它允许用户在时间线上添加/编辑/删除事件。关闭或刷新浏览器会将其重置为预加载的数据源 - JSON、表格信息或 Google 电子表格。不会保存用户添加或更改的任何内容。

您如何使用户更改持久化？

我之前使用 HTML5 localStorage 来保存文本、复选框和选择框条目等，但使用此时间轴，唯一的条目是：

div id="我的时间线"

它有一个与之关联的脚本：

```
 // Instantiate our timeline object.
        timeline = new links.Timeline(document.getElementById('mytimeline')); 
```

这是对构建时间线容器的 JS 的引用。

有什么想法、例子或指示吗？

谢谢。

更新：这是我到目前为止所拥有的：

```
//Check to see if localStorage is supported
var db = getLocalStorage() || alert("Local Storage Not supported in this browser.  Try updating to the latest Firefox, Chrome or Safari browsers.");

function getLocalStorage() {
    try {
        if(window.localStorage ) return window.localStorage;            
}
    catch (e)
{
    return undefined;
}
}  

//Store Timeline Data to localStorage
function storeTimelineData(){
    var data=timeline.getData();
    localStorage.setItem('mytimeline', JSON.stringify(data));
    var storedData=JSON.parse( localStorage.getItem('myTimeline') );

// clear storage
function clearLocal() {
clear: localStorage.clear();
return false;
} 
```

我还进行了这些更改 - body onload="storedData()" 尝试加载 localStorage 保存的值并更改 div id="mytimeline" onmouseup="storeTimelineData()" 以在对时间线进行更改时存储值。

对时间线的更改保存在 localStorage 中，我可以在控制台中看到键/值的这些更改。但是，当我刷新浏览器时，这些并没有被加载到 mytimeline 中。我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:16:35.940

在您发布之前我从未见过插件，但在 API 文档中有各种各样的方法。您需要开始的最重要的一个是`getData()`.

最简单的存储方案是设置一个定时间隔来获取数据，将其转换为 JSON 并存储它。另一种方法是在每次使用与事件交互时更新您存储的数据。

一个基本的存储更新功能将遵循：

```
function storeTimelineData(){
      var data=timeline.getData();
      localStorage.setItem('myTimeline', JSON.stringify(data));
} 
```

然后，当页面加载时，您需要检查 localStorage 中是否有数据，使用以下方法将其转换为 javascript 对象：

```
var storedData= JSON.parse( localStorage.getItem('myTimeline') ); 
```

如果数据存在，则使用此数据初始化插件。

我真的只是给你一个基本的概述。您必须从这里整理出许多细节

# c# - 可以从 Repeater.ItemDataBound 访问的 DataTable

> ID：14027121
> 
> 赞同：0
> 
> 时间：2012-12-25T02:01:32.670
> 
> 标签：c#, asp.net

一般来说，我是 ASP.Net、C# 和 OOP 的新手，我正在尝试进入关于类、对象、方法等的正确范例。

我想`DataTable`从 Repeater.ItemDataBound 事件中访问一个。我将在哪里创建`DataTable`以便该方法可以访问它？我不希望每次调用 ItemDataBound 时都创建 DataTable，只创建一次。那会是一个单独的类，还是同一个类中的另一个方法，还是别的什么？

我想用它来`HeaderTemplate`设置`Repeater`. 这是我的代码：

```
public partial class test : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {
        int numPages = 3, numItems = 10;

        int[] parentRepeatCnt = Enumerable.Range(0, numPages).ToArray();
        int[] childRepeatCnt = Enumerable.Range(0, numItems).ToArray();

        ParentRepeater.DataSource = parentRepeatCnt;
        ParentRepeater.DataBind();

        foreach (int i in parentRepeatCnt)
        {
            Repeater ChildRepeater = ParentRepeater.Items[i].FindControl("ChildRepeater") as Repeater;
            ChildRepeater.DataSource = childRepeatCnt;
            ChildRepeater.DataBind();
        }
    }

    public void ChildRepeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Header)
        {
            Label Label1 = e.Item.FindControl("Label1") as Label;
            // access DataTable here
            Label1.Text = myDataTable.Rows[0]["item"].ToString();
        }

    }
} 
```

另外，请随时批评我现有的代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:35:14.223

公共部分类测试：System.Web.UI.Page {

**公共数据表 mydatatable = 新数据表（）；**

```
protected void Page_Load(object sender, EventArgs e)
{
    int numPages = 3, numItems = 10;

    int[] parentRepeatCnt = Enumerable.Range(0, numPages).ToArray();
    int[] childRepeatCnt = Enumerable.Range(0, numItems).ToArray();

    ParentRepeater.DataSource = parentRepeatCnt;
    ParentRepeater.DataBind();

    foreach (int i in parentRepeatCnt)
    {
        Repeater ChildRepeater = ParentRepeater.Items[i].FindControl("ChildRepeater") as Repeater;
        ChildRepeater.DataSource = childRepeatCnt;
        ChildRepeater.DataBind();
    }
}

public void ChildRepeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Header)
    {
        Label Label1 = e.Item.FindControl("Label1") as Label;
        // access DataTable here
        Label1.Text = myDataTable.Rows[0]["item"].ToString();
    }

} 
```

}

# ruby-on-rails - 在视图中扩展 html 类的推荐模式是什么？

> ID：14027128
> 
> 赞同：2
> 
> 时间：2012-12-25T02:05:26.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, helpers

我的表中有以下`<tr>`标签

```
<% if user.company.nil? %>
  <tr class="error">
<% else %>
  <tr>
<% end %>
  <td><%= user.name %></td>
</tr> 
```

我想添加另一个 if 语句

```
<% if user.disabled? %>
  <tr class="disabled">
<% end %> 
```

`true`因此，当我希望收到其中两个这样的声明时：

```
<tr class="error disabled"> 
```

我知道我应该把它移到助手，但是如何为扩展类编写好的案例语句取决于这些语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:17:21.800

```
def tr_classes(user)
  classes = []
  classes << "error" if user.company.nil?
  classes << "disabled" if user.disabled?
  if classes.any?
    " class=\"#{classes.join(" ")}\""
  end
end

<tr<%= tr_classes(user) %>>
  <td><%= user.name %></td>
</tr> 
```

但好的风格是：

```
def tr_classes(user)
  classes = []
  classes << "error" if user.company.nil?
  classes << "disabled" if user.disabled?
  if classes.any?   # method return nil unless
    classes.join(" ")
  end
end

<%= content_tag :tr, :class => tr_classes(user) do -%> # if tr_classes.nil? blank <tr>
  <td><%= user.name %></td>
<% end -%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T02:13:46.823

你可以尝试一个辅助方法，比如

```
def user_table_row(user)
  css = ""
  css = "#{css} error" if user.company.nil?
  css = "#{css} disabled" if user.disabled?

  content_tag :tr, class: css
end 
```

不确定在表格行的情况下这将如何工作，因为您希望将 td 嵌套在其中

**更新：**这里是产生 td 代码块的更新版本

```
def user_table_row(user)
  css = # derive css, using string or array join style

  options = {}
  options[:class] = css if css.length > 0

  content_tag :tr, options do
    yield
  end
end 
```

然后在视图中

```
<%= user_table_row(user) do %>
  <td><%= user.name %></td>
<% end %> 
```

# validation - 项目阶段[开发]：未处理的消息 - JSF

> ID：14027129
> 
> 赞同：2
> 
> 时间：2012-12-25T02:05:28.820
> 
> 标签：validation, jsf

我收到两条验证消息；一个正确，然后一个在表单顶部，当鼠标悬停在上面时，它会显示“项目阶段[开发]：未处理的消息”。如何隐藏此消息？

```
<h:outputLabel for="username">Please enter your username: </h:outputLabel>
<h:inputText id="username" value="#{user.id}" required="true">
    <f:ajax event="blur" render="usernameMessage" />
</h:inputText>
<h:message id="usernameMessage" for="username" /> 
```

用户Bean.java

```
private static final long serialVersionUID = 1L;

@NotNull(message="The username can not be blank")
@Size(min=6, max=12, message="Please enter a valid username (6-12 characters)")
private String id;

public String getId() {
    return id;
} 
```

web.xml

```
<context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:19:10.367

这是一个开发警告，应该表明开发人员犯了一个错误。你根本不应该有未处理的面孔消息。提供正确的`<h:message>`并确保它也在 ajax 请求上更新。

```
<h:message for="Username" /> 
```

或者，至少提供一个`<h:messages>`显示所有消息的泛型。

```
<h:messages/> 
```

一旦您将 JSF 项目阶段设置为`Production`.

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param> 
```

或者只是完全删除整个上下文参数；它默认为`Production`已经。

* * *

**与具体问题**无关**`<h:outputLabel for>`，你的属性不对，与输入组件的ID不匹配。或者，输入组件的 ID 不遵循标准的 HTML/CSS 代码约定。应该是`camelCase`，不是`TitleCase`。所以，使用**

 **```
<h:outputLabel for="username" ... />
<h:inputText id="username" ... />
<h:message for="username" ... /> 
```

*毕竟，这*也是您的具体问题的潜在主要原因。您已正确使用 ，`<h:message for="username"/>`但由于输入组件使用了无效的组件 ID ，因此无法显示消息`Username`。**

# javascript - Javascript 字符代码是否与所有或某些浏览器兼容？

> ID：14027132
> 
> 赞同：7
> 
> 时间：2012-12-25T02:07:25.757
> 
> 标签：javascript, jquery

我在互联网上找到了以下代码，当我看到这个解决方案时，我想知道这个关键代码是否对所有浏览器都相同。

```
var CalendarFilter = Backbone.View.extend({
      // ...
      events: {
        'click .filter':  'filter',
        'keypress input[type=text]': 'filterOnEnter'
      },
      filterOnEnter: function(e) {
        if (e.keyCode != 13) return;
        this.filter(e);
      },
      filter: function(e) { /* ... */ });
      }
    }); 
```

只是一个疑问，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T03:42:11.387

首先，`charCode`不是`keyCode`！`charCode`遵循 ascii 集，while`keyCode`是键的特定索引。两者之间的不同值可以在这里看到：[键盘事件字符值较低的 ASCII 字符集 - O'Reilly Answers](http://answers.oreilly.com/topic/464-keyboard-event-character-values-for-the-lower-ascii-character-set/)

`charCode`和之间的一个主要区别`keyCode`是[charCode 已被弃用](https://developer.mozilla.org/en-US/docs/DOM/event.charCode)，并且在引用时通常在某些浏览器中没有任何价值 [除了 0]

有趣的是，onkeypress 似乎返回[字符代码而不是`keyCode`](http://www.brainjar.com/dhtml/events/default4.asp)，而 onkeyup 和 onkeydown 按预期工作，因此在检测`keyCode`值时可能会出现一些问题。你可以在这里测试一下[JavaScript - Detecting keystrokes](http://www.quirksmode.org/js/keys.html#link7) - Additional reference: [keyCode 和 charCode](https://stackoverflow.com/a/1445228/1756941)。

`keyCode`，`charCode`并且`which`不[被 w3c 推荐](http://www.w3.org/TR/DOM-Level-3-Events/#legacy-key-attributes)，但是，仍然有对该`keyCode`模型的传统支持。可靠的跨浏览器/平台支持是通过[固定的虚拟键码](http://www.w3.org/TR/DOM-Level-3-Events/#fixed-virtual-key-codes)完成的，这些键码保持独立于键盘布局 - 因此是“虚拟的”。

其他虚拟键码 - 固定虚拟键码之外 - 似乎也在供应商之间得到一致实施：[KeyboardEvent - 文档对象模型 (DOM) | MDN](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent#Virtual_key_codes) [虚拟键代码 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)

jQuery 使用它自己的`keyCode`/`charCode`事件对象属性：`.which`，它试图统一`keyCode`和`charCode`。并且偏爱`keyCode`值 - [event.which – jQuery API](http://api.jquery.com/event.which/)

简而言之，您的特定`keyCode`：“13”应该适用于大多数支持 javascript 的浏览器，因为它是一个固定的虚拟键码，并且与所有浏览器和平台一致

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T02:16:27.950

键码是标准的，但最好也检查一下键码`10`。`10`是“换行”`13`的键码，而是“回车”的键码。两者之间存在历史差异（打字机需要发送两个信号，“换行”将纸张向上移动，“回车”将打字的部分移动到纸张的左侧）。

例如，快速检查显示`Ctrl`+在 Windows 上的 Chrome 上`Enter`发送 keyCode 。`10`一些'nix系统可能使用 keyCode `10`，但我无法确认。谷歌搜索显示[iPhone 可能会发送 10 个](http://drupal.org/node/550360)。可能还有其他情况。

一些系统使用一个来表示换行符（最后我检查过，Windows 使用了两者的组合），但在现代世界中，它们实际上都表示`Enter`，因此涵盖这两个基础不会有什么坏处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T02:09:13.327

当然。在整个计算机上都是一样的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T02:12:39.353

keyCode 13（换行符）在跨操作系统或跨浏览器兼容性方面没有问题。不用担心。

# java - ArcBall 相机 Android

> ID：14027134
> 
> 赞同：1
> 
> 时间：2012-12-25T02:08:40.660
> 
> 标签：java, android, opengl-es, 3d, libgdx

我正在尝试创建一个用于我的 3D Android 游戏的轨迹球相机（注意：我正在使用 libGDX 框架）......我无法弄清楚如何去创建它。我可能可以扩展`PerspectiveCamera`libGDX 中的当前类并添加一些逻辑来处理围绕球体的轨迹球旋转，但我需要解释它是如何工作的。我仍在学习 OpenGL ES，但我认为我可以尝试这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:03:33.063

我在自己寻找相同的东西时找到了你的问题和[这个（stackoverflow）答案。](https://stackoverflow.com/a/14036014/304330)

我自己还没有尝试过代码，所以我无法确认它是否有效。

我将需要类似的东西来实现我的游戏创意，只是想确保我拥有我需要的一切;-)。

让我们知道这是否有效。

干杯

# javascript - 字符串到对象

> ID：14027139
> 
> 赞同：2
> 
> 时间：2012-12-25T02:11:50.613
> 
> 标签：javascript

所以基本上我有这个代码：

```
var string = '{name: "bob", height: 4, weight: 145}'; 
```

我想知道是否可以将该字符串转换为对象。这样我就可以使用

```
string.name, string.height, and string.weight 
```

（我正在从数据库中检索字符串变量，所以我不能只删除引号并首先使其成为对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:24:06.697

正如 Igor 所建议的， eval 肯定会起作用，但很容易受到攻击。

相反，您可以使用库为您解析它。以下链接中有选项：

[eval 是邪恶的……那我应该用什么代替呢？](https://stackoverflow.com/questions/646597/eval-is-evil-so-what-should-i-use-instead)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T02:15:44.703

我不会使用`string`变量名，但是：

```
var obj = eval(string);
alert(obj.name); 
```

或者您可以使用`jQuery.parseJSON`：api.jquery.com/jQuery.parseJSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T02:32:28.363

# html - 如何修复此本地存储 HTML5 错误？

> ID：14027142
> 
> 赞同：0
> 
> 时间：2012-12-25T02:12:02.880
> 
> 标签：html, textarea, local-storage

我无法弄清楚我做错了什么。单击保存按钮时，它应该将文本从 textarea 发送到本地存储。然后，当您关闭并重新打开页面时，保存的文本应该会回来。但是当我关闭文档并再次打开它时，它是空白的。是否有我忽略的错误，或者我应该尝试不同的方法来保存到本地存储？

```
<script>
function save () {
    var inputvalue = document.getElementById('textfield').value;
    localstorage.setItem('text', inputvalue);
}

function load() {
    var storedValue = localStorage.getItem('text');
    if(storedValue) {
        document.getElementById('textfield').value = storedValue;
    }
}
</script>
</head>

<body onload="load()">
 <textarea id="textfield">
 </textarea>
 <input type="button" value="Save" onclick="save()" />
</body> 
```

# android - 如何附加软键盘事件

> ID：14027150
> 
> 赞同：1
> 
> 时间：2012-12-25T02:14:00.440
> 
> 标签：android, android-softkeyboard

**更新：**

这是Android SDK的WTF，如果targetSdkVersion为15，没问题。但是16之后，就不会响应setOnKeyListener了。

在 targetSdkVersion 15 中，它会提高**两次**。嘿，你的机器人。

[http://developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

**特别是，默认的软件键盘永远不会向任何针对 Jelly Bean 或更高版本的应用程序发送任何键事件，并且只会向针对 Ice Cream Sandwich 或更早版本的应用程序发送某些按下删除键和返回键的事件。**

**更新：**

请告诉我为什么你必须投票反对我的帖子。

**问题**

我能知道软键盘输入是什么吗？

不`OnKeyListener`，它仅适用于硬件键盘。我需要软键盘。

不`TextWatcher`，它仅适用于更改的文本。例如，在 EditText 中，当`getSelectionStart`为 0 时，我单击软键盘删除按钮。没有任何改变。

我的代码：AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="www.ilivebox.demo"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>
    <application
        android:label="@string/app_name"
        android:icon="@drawable/ic_launcher">
        <activity
            android:name="MyActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

布局 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
    >

    <EditText
        android:id="@+id/memo_text_segment"
        android:hint="add new here.."
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
</LinearLayout> 
```

我的活动.java

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.widget.EditText;

public class MyActivity extends Activity {
    private EditText mEditText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mEditText = (EditText) findViewById(R.id.memo_text_segment);
        mEditText.setOnKeyListener(new View.OnKeyListener() {
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                Log.d("KeyCode: " + keyCode + " " + event.getCharacters(), "..........");
                return false;
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:29:49.063

您捕获 KeyEvent，然后检查其键码。

```
if (event.getKeyCode() == KeyEvent.ACTION_DOWN) 
```

# ruby-on-rails - Rails 如何同时解决多个请求？

> ID：14027151
> 
> 赞同：23
> 
> 时间：2012-12-25T02:14:11.317
> 
> 标签：ruby-on-rails

**准备测试：** `sleep 10`在行动中

**测试：** 在浏览器中打开两个标签页访问动作

**结果：** 当第二个请求运行时，第一个请求完成并开始渲染视图，但视图仍然是空白的。在第二个请求也完成后，这两个请求同时完成了视图的渲染。

**结论：** Rails 只是一个实例。一个请求只有在前一个请求完成后才能进入动作。但是如何解释响应部分？为什么多个请求同时完成视图的渲染？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-06T00:12:09.347

WEBrick 是多线程的，但 Rails 开发人员硬编码了一个互斥锁，因此它一次只能处理一个请求。你可以猴子补丁`Rails::Server`，你可以自由地运行一个多线程的 WEBrick。

请注意，WEBrick 只有在 config`config.cache_classes = true`和时才会是多线程`config.eager_load = true`的，这对于`RAILS_ENV=production`. 这是因为开发中的类重载不是线程安全的。

要在 Rails 4.0 中获得 WEBrick 完全多线程，只需将其添加到`config/initializers/multithreaded_webrick.rb`：

```
# Remove Rack::Lock so WEBrick can be fully multi-threaded.
require 'rails/commands/server'

class Rails::Server
  def middleware
    middlewares = []
    middlewares << [Rails::Rack::Debugger] if options[:debugger]
    middlewares << [::Rack::ContentLength]

    Hash.new middlewares
  end
end 
```

`rails/commands/server.rb`我们摆脱的违规代码是：

```
# FIXME: add Rack::Lock in the case people are using webrick.
# This is to remain backwards compatible for those who are
# running webrick in production. We should consider removing this
# in development.
if server.name == 'Rack::Handler::WEBrick'
  middlewares << [::Rack::Lock]
end 
```

Rails 4.2 不需要它。它是开箱即用的并发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T05:08:52.010

你在使用 `WEBrick`服务器吗？那一定是因为您的服务器是单线程服务器，并且能够一次完成一个请求（因为单个工作线程）。现在，如果有多个请求，它会运行请求的操作部分，并在运行视图渲染器之前检查是否有任何待处理的请求。现在如果有 10 个请求排队，它会在实际渲染视图之前先完成所有请求。当所有这些请求都完成后，视图现在将按顺序呈现。

如果您想要多线程环境，您可以切换到Passenger 或Unicorn 服务器。

希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T18:41:04.170

在您的环境设置 config/environments/development.rb 下（或在 config/application.rb 中）

添加这一行：

```
 #Enable threaded mode
  config.threadsafe! 
```

# codeigniter - CodeIgniter 持久 URL 附加到每个 URL

> ID：14027152
> 
> 赞同：0
> 
> 时间：2012-12-25T02:14:19.617
> 
> 标签：codeigniter

在 CI 中，我想为`$_GET`我点击的每个链接附加选定的过滤器（在方法中）。此过滤器是持久的，因此在任何页面中选择的此过滤器应该可用于项目中的任何其他页面。

例如，我在一个页面中选择了dealerID，GroupId，假设页面**www.domain.com/dealers?dealerId=2&groupId=10**页面中的dealer，然后如果我单击另一个名为* *www.domain.com/group* *s 的链接组页面应该看起来像`www.domain.com/groups?dealerId=2&groupId=10`在上一页中选择的那样。

还有一件事：我正在使用一个主控制器，由于某种原因，它会被所有控制器继承。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:19:15.797

您可以拥有一个通用的 $data['filter'] 变量，该变量将保留您过滤所需的所有变量，而在视图中只需在需要它的末尾添加 $filter 即可。

$data['filter'] 可以在构造函数中收集/生成并默认定义。

这是一个有点棘手的解决方案，我宁愿使用会话来保留这种类型的数据并在页面上设置“重置”按钮。

# jquery - 监控内容可编辑范围的变化？

> ID：14027153
> 
> 赞同：2
> 
> 时间：2012-12-25T02:14:29.383
> 
> 标签：jquery

我有一个`span`. `contenteditable="true"`我试图附加一个`change`事件。但根据 jQuery 文档，更改仅适用于表单输入。还有什么办法吗？

这是一个jsfiddle：http: [//jsfiddle.net/vQuEA/](http://jsfiddle.net/vQuEA/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T02:22:49.173

将此块添加到您的页面：

```
$('[contenteditable]').on('focus', function() {
    var $this = $(this);
    $this.data('before', $this.html());
    return $this;
}).on('blur keyup paste', function() {
    var $this = $(this);
    if ($this.data('before') !== $this.html()) {
        $this.data('before', $this.html());
        $this.trigger('change');
    }
    return $this;
}); 
```

每当更改标签时，它都会`change`触发一个事件`contenteditable`。

**解释**

所有具有属性的元素都将接收、、和`contenteditable`的事件侦听器。`focus``blur``keyup``paste`

在`focus`当前内部 html 存储为元素上的“之前”数据。

during `blur`//当前内部 html`keyup`与`paste`“之前”数据进行比较，如果不同，`change`则触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-05T09:38:35.593

这实际上似乎有效。不确定这是否是自这些其他答案以来的新事物，但它更干净：

```
contentEditableTag.on('input', function(){
    console.log("input event");
}); 
```

每次击键时触发，包括粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T02:00:41.860

[https://github.com/makesites/jquery-contenteditable](https://github.com/makesites/jquery-contenteditable)

> jQuery contentEditable 自动在“contenteditable”字段上添加事件并返回更改的数据以供进一步处理（和保存）
> 
> 用法
> 
> 在其基本实现中，插件方法 contentEditable() 附加到具有所有“contenteditable”字段的父容器。

```
$("#...").contentEditable().change( myFunction ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-31T09:04:06.763

```
$('[contenteditable]').focusout(function() {
  var span = $(this);
  var statuses = ['bd-danger', 'bd-warning', 'bd-success'];
  statuses.forEach(function(s) {
    span.hasClass(s) ? span.removeClass(s) : '';
  })
  if (span.html().trim()) {
    if (span.html() === span.data('initial')) {
      span.addClass('bd-warning');
    } else {
      span.addClass('bd-success');
    }
  } else {
    span.addClass('bd-danger');
  }
});
```

```
.bd-danger {
  border: 1px #e81c22 solid;
  padding: 0 15px;
  border-radius: 5px;
}

.bd-warning {
  border: 1px #fbc658 solid;
  padding: 0 15px;
  border-radius: 5px;
}

.bd-success {
  border: 1px #04ad36 solid;
  padding: 0 15px;
  border-radius: 5px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div>
  <p>
    <strong>Content:</strong>
    <span contenteditable="true" data-initial="Edit this content">Edit this content</span>
  </p>
</div>
```

# java - 修复：java.lang.UnsatisfiedLinkError: no attach in java.library.path

> ID：14027164
> 
> 赞同：6
> 
> 时间：2012-12-25T02:16:51.510
> 
> 标签：java, virtual-machine

我正在尝试使用 Attach API 获取在我的机器上运行的所有 VM 的列表。

这是我正在使用的代码：

```
import java.lang.reflect.Field;
import java.util.List;
import com.sun.tools.attach.*;

public class JVMListManager 
{
    static String pathToAdd = "C:/Program Files/Java/jdk1.7.0_03/jre/bin/attach.dll";
    public static void setLibraryPath(String path) throws Exception {
        System.setProperty( "java.library.path", pathToAdd );

        Field fieldSysPath = ClassLoader.class.getDeclaredField("sys_paths");
        fieldSysPath.setAccessible(true);
        fieldSysPath.set(null, null);
    }

    private void listActiveVM()
    {
        List<VirtualMachineDescriptor> vm = VirtualMachine.list();
        int i= 1;
        for(VirtualMachineDescriptor vmD : vm)
        {
            System.out.println(i + ". " + vmD.displayName());
            i++;
        }
    }

    public static void main(String[] args) throws Exception
    {
        setLibraryPath(pathToAdd);

        JVMListManager jvmListManager = new JVMListManager();
        jvmListManager.listActiveVM();
    }
} 
```

错误：

> java.util.ServiceConfigurationError：com.sun.tools.attach.spi.AttachProvider：提供程序 sun.tools.attach.WindowsAttachProvider 无法实例化：java.lang.UnsatisfiedLinkError：java.library.path 中没有附加

请让我知道我可以使用哪些方法来解决此问题。

我也尝试过使用 System.load(pathToAdd); 我也提到了这篇[博客文章](http://fahdshariff.blogspot.jp/2011/08/changing-java-library-path-at-runtime.html)，但它不起作用。:'(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T02:24:27.200

你需要：

设置 PATH=%PATH%;C:/Program Files/Java/jdk1.7.0_03/jre/bin/（在 Windows 上）

export LD_LIBRARY_PATH=path/to/your/library/dir/（在 Linux 或 OSX 上）

在启动 jvm 之前遵守本机库的路径。

我认为这行不通`System.setProperty( "java.library.path", pathToAdd );`。这可能是问题的原因。

# ajax - Ajax Codeigniter 表单在 IE 中不起作用？

> ID：14027166
> 
> 赞同：0
> 
> 时间：2012-12-25T02:17:16.370
> 
> 标签：ajax, forms, internet-explorer

这是表单提交的ajax代码：

```
$('form[class^="ajaxsubmit_"]').live('submit', function(e){
    e.preventDefault();
    var classname = $(this).attr('class');
    var classnamesplit = classname.split("_");

    var container = classnamesplit[1];

    if (container == 'parent'){
        container = $(this).parent();
    }
    $(container).show();
    $(container).html('<img src="public/images/web/ajax.gif"/>');
    $(this).ajaxSubmit(container);
});
(function($){
    jQuery.fn.ajaxSubmit =
        function(container) {
            var url = $(this).attr('action');
            $.ajax({
                    url: url,
                    type: "POST",
                    data: $(this).serialize(),
                    dataType: "html",
                    success: function(msg) {
                                $(container).html(msg);
                        }
                   });
            return this;
         };
})(jQuery); 
```

这就像所有表单的通用函数，它读取动作并将数据发送给它。然后在父级或指定的 div 中输出。它在 Chrome、Firefox 和 Opera 中运行良好。我该如何解决这个问题？

# javascript - 如何从 JSON 恢复原始对象/类型？

> ID：14027168
> 
> 赞同：17
> 
> 时间：2012-12-25T02:17:30.710
> 
> 标签：javascript, json

使用 eval 或 JSON.parse 很容易将 JSON 加载到 javascript 中的对象中。

但是，如果您有一个适当的“类”类函数，您如何将 JSON 数据输入其中？

例如

```
function Person(name) {
  this.name=name;
  this.address = new Array();
  this.friendList;

  this.promote = function(){
     // do some complex stuff
  }
  this.addAddress = function(address) {
    this.address.push(address)
  }
}

var aPersonJSON = '{\"name\":\"Bob\",\"address\":[{\"street\":\"good st\",\"postcode\":\"ADSF\"}]}'

var aPerson = eval( "(" + aPersonJSON + ")" ); // or JSON.parse
//alert (aPerson.name);    // Bob
var someAddress = {street:"bad st",postcode:"HELL"};
//alert (someAddress.street); // bad st
aPerson.addAddress(someAddress); // fail! 
```

关键是我需要能够从 JSON 创建适当的 Person 实例，但我能得到的只是一个愚蠢的对象。我想知道是否可以用原型做一些事情？

我不想解析 JSON 的每一行并将每个变量分配给对应的函数属性，这太难了。我拥有的实际 JSON 和函数比上面的示例要复杂得多。

我假设可以将函数方法 JSONify 到 JSON 字符串中，但是由于我需要使结果数据尽可能小，这不是一种选择 - 我只想存储和加载数据，而不是方法的 javascript 代码.

如果我可以帮助它（但可能是唯一的方法），我也不想将 JSON 加载的数据作为子对象，例如

```
function Person(name) {
  this.data = {};
  this.data.name=name;
}

var newPerson = new Person("");
newPerson.data = eval( "(" + aPersonJSON + ")" );
alert (newPerson.data.name); // Bob 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-25T08:13:46.127

您需要使用一个`reviver`功能：

```
// Registry of types
var Types = {};

function MyClass(foo, bar) {
  this._foo = foo;
  this._bar = bar;
}
Types.MyClass = MyClass;

MyClass.prototype.getFoo = function() {
  return this._foo;
}

// Method which will provide a JSON.stringifiable object
MyClass.prototype.toJSON = function() {
  return {
    __type: 'MyClass',
    foo: this._foo,
    bar: this._bar
  };
};

// Method that can deserialize JSON into an instance
MyClass.revive = function(data) {
  // TODO: do basic validation
  return new MyClass(data.foo, data.bar);
};

var instance = new MyClass('blah', 'blah');

// JSON obtained by stringifying an instance
var json = JSON.stringify(instance); // "{"__type":"MyClass","foo":"blah","bar":"blah"}";

var obj = JSON.parse(json, function(key, value) {
  return key === '' && value.hasOwnProperty('__type')
    ? Types[value.__type].revive(value)
    : this[key];
});

obj.getFoo(); // blah 
```

真的没有别的办法...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T02:41:30.143

许多框架提供了一个“扩展”功能，可以将字段从一个对象复制到另一个对象。你可以将它与 JSON.parse 结合起来做你想做的事。

```
newPerson = new Person();
_.extend(newPerson, JSON.parse(aPersonJSON)); 
```

如果您不想包含下划线之类的内容，您可以随时复制扩展函数或编写自己的函数。

Coffeescript 示例，因为我很无聊：

```
JSONExtend = (obj, json) ->
  obj[field] = value for own field, value of JSON.parse json
  return obj

class Person
  toString: -> "Hi I'm #{@name} and I'm #{@age} years old."

dude = JSONExtend new Person, '{"name":"bob", "age":27}'
console.log dude.toString() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-11T21:53:21.770

聚会有点晚了，但这可能会对某人有所帮助。这就是我解决它的方法，ES6语法：

```
class Page 
{
   constructor() {
      this.__className = "Page";
   }

   __initialize() {
       // Do whatever initialization you need here.
       // We'll use this as a makeshift constructor.
       // This method is NOT required, though
   }
}

class PageSection
{
   constructor() {
      this.__className = "PageSection";
   }
}

class ObjectRebuilder
{
    // We need this so we can instantiate objects from class name strings
    static classList() {
        return {
            Page: Page,
            PageSection: PageSection
        }
    }

    // Checks if passed variable is object.
    // Returns true for arrays as well, as intended
    static isObject(varOrObj) {
        return varOrObj !== null && typeof varOrObj === 'object';
    }

    static restoreObject(obj) {
        let newObj = obj;

        // At this point we have regular javascript object
        // which we got from JSON.parse. First, check if it
        // has "__className" property which we defined in the
        // constructor of each class
        if (obj.hasOwnProperty("__className")) {
            let list = ObjectRebuilder.classList();

            // Instantiate object of the correct class
            newObj = new (list[obj["__className"]]);

            // Copy all of current object's properties
            // to the newly instantiated object
            newObj = Object.assign(newObj, obj);

            // Run the makeshift constructor, if the
            // new object has one
            if (newObj.__initialize === 'function') {
                newObj.__initialize();
            }
        }

        // Iterate over all of the properties of the new
        // object, and if some of them are objects (or arrays!) 
        // constructed by JSON.parse, run them through ObjectRebuilder
        for (let prop of Object.keys(newObj)) {
            if (ObjectRebuilder.isObject(newObj[prop])) {
                newObj[prop] = ObjectRebuilder.restoreObject(newObj[prop]);
            }
        }

        return newObj;
    }
}

let page = new Page();
let section1 = new PageSection();
let section2 = new PageSection();

page.pageSections = [section1, section2];

let jsonString = JSON.stringify(page);
let restoredPageWithPageSections = ObjectRebuilder.restoreObject(JSON.parse(jsonString));

console.log(restoredPageWithPageSections); 
```

您的页面应恢复为 class 的对象`Page`，其中包含 2 个 class 对象的数组`PageSection`。无论深度如何，递归一直有效到最后一个对象。

@Sean Kinsey 的回答帮助我找到了解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T02:21:26.747

最简单的方法是使用`JSON.parse`解析字符串然后将对象传递给函数。`JSON.parse`是在线json2库的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T04:13:46.930

我对此并不太感兴趣，但是 aPerson.addAddress 应该不起作用，为什么不直接分配给对象呢？

```
aPerson.address.push(someAddress);
alert(aPerson.address); // alert [object object] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-07T09:45:20.703

以防万一有人需要，这里有一个纯 javascript 扩展函数（这显然属于对象定义）。

```
 this.extend = function (jsonString){
    var obj = JSON.parse(jsonString)
    for (var key in obj) {
        this[key] = obj[key]
        console.log("Set ", key ," to ", obj[key])
        }   
    } 
```

请不要忘记删除`console.log`：P

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-07T12:54:49.110

现代方法（2021 年 12 月）是使用`@badcafe/jsonizer`：[https ://badcafe.github.io/jsonizer](https://badcafe.github.io/jsonizer)

*   与其他解决方案不同，它不会用注入的类名污染您的数据，
*   它具体化了预期的数据层次结构。
*   以下是 Typescript 中的一些示例，但它在 JS 中也同样适用

在展示一个类的例子之前，让我们从一个简单的数据结构开始：

```
const person = {
    name: 'Bob',
    birthDate: new Date('1998-10-21'),
    hobbies: [
        {   hobby: 'programming',
            startDate: new Date('2021-01-01'),
        },
        {   hobby: 'cooking',
            startDate: new Date('2020-12-31'),
        },
    ]
}
const personJson = JSON.stringify(person);
// store or send the data 
```

现在，让我们使用 Jsonizer

```
// in Jsonizer, a reviver is made of field mappers :
const personReviver = Jsonizer.reviver<typeof person>({
    birthDate: Date,
    hobbies: {
        '*': {
            startDate: Date
        }
    }
});
const personFromJson = JSON.parse(personJson, personReviver); 
```

JSON 文本中的每个日期字符串都已映射到`Date`解析结果中的对象。

Jsonizer 可以用递归嵌套的自定义类、第三方类、内置类或子 JSON 结构（数组、对象）无差别地恢复 JSON 数据结构（数组、对象）或类实例。

现在，让我们改用一个类：

```
// in Jsonizer, a class reviver is made of field mappers + an instance builder :
@Reviver<Person>({ //   bind the reviver to the class
    '.': ({name, birthDate, hobbies}) => new Person(name, birthDate, hobbies), //   instance builder
    birthDate: Date,
    hobbies: {
        '*': {
            startDate: Date
        }
    }
})
class Person {
    constructor( // all fields are passed as arguments to the constructor
        public name: string,
        public birthDate: Date
        public hobbies: Hobby[]
    ) {}
}
interface Hobby {
    hobby: string,
    startDate: Date
}

const person = new Person(
    'Bob',
    new Date('1998-10-21'),
    [
        {   hobby: 'programming',
            startDate: new Date('2021-01-01'),
        },
        {   hobby: 'cooking',
            startDate: new Date('2020-12-31'),
        },
    ]
);
const personJson = JSON.stringify(person);

const personReviver = Reviver.get(Person); //   extract the reviver from the class
const personFromJson = JSON.parse(personJson, personReviver); 
```

最后，让我们使用 2 个类：

```
@Reviver<Hobby>({
    '.': ({hobby, startDate}) => new Hobby(hobby, startDate), //   instance builder
    startDate: Date
})
class Hobby {
    constructor (
        public hobby: string,
        public startDate: Date
    ) {}
}

@Reviver<Person>({
    '.': ({name, birthDate, hobbies}) => new Person(name, birthDate, hobbies), //   instance builder
    birthDate: Date,
    hobbies: {
        '*': Hobby  //   we can refer a class decorated with @Reviver
    }
})
class Person {
    constructor(
        public name: string,
        public birthDate: Date,
        public hobbies: Hobby[]
    ) {}
}

const person = new Person(
    'Bob',
    new Date('1998-10-21'),
    [
        new Hobby('programming', new Date('2021-01-01')),
        new Hobby('cooking', new Date('2020-12-31')
    ]
);
const personJson = JSON.stringify(person);

const personReviver = Reviver.get(Person); //   extract the reviver from the class
const personFromJson = JSON.parse(personJson, personReviver); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-19T20:45:37.983

**TL; DR：**这是我使用的方法：

```
var myObj = JSON.parse(raw_obj_vals);
myObj = Object.assign(new MyClass(), myObj); 
```

详细示例：

```
const data_in = '{ "d1":{"val":3,"val2":34}, "d2":{"val":-1,"val2":42, "new_val":"wut?" } }';
class Src {
    val1 = 1;
    constructor(val) { this.val = val; this.val2 = 2; };
    val_is_good() { return this.val <= this.val2; }
    get pos_val() { return this.val > 0; };
    clear(confirm) { if (!confirm) { return; }; this.val = 0; this.val1 = 0; this.val2 = 0; };
};
const src1 = new Src(2); // standard way of creating new objects
var srcs = JSON.parse(data_in);
// ===================================================================
// restoring class-specific stuff for each instance of given raw data
Object.keys(srcs).forEach((k) => { srcs[k] = Object.assign(new Src(), srcs[k]); });
// ===================================================================

console.log('src1:', src1);
console.log("src1.val_is_good:", src1.val_is_good());
console.log("src1.pos_val:", src1.pos_val);

console.log('srcs:', srcs)
console.log("srcs.d1:", srcs.d1);
console.log("srcs.d1.val_is_good:", srcs.d1.val_is_good());
console.log("srcs.d2.pos_val:", srcs.d2.pos_val);

srcs.d1.clear();
srcs.d2.clear(true);
srcs.d3 = src1;
const data_out = JSON.stringify(srcs, null, '\t'); // only pure data, nothing extra. 
console.log("data_out:", data_out);
```

*   简单高效。合规（2021 年）。没有依赖关系。
*   适用于不完整的输入，保留默认值而不是缺少字段（升级后特别有用）。
*   适用于过多输入，保留未使用的数据（保存时不会丢失数据）。
*   可以很容易地扩展到更复杂的情况，具有多个嵌套类和类类型提取等。
*   必须分配多少数据或嵌套的深度无关紧要（*只要您从简单对象中恢复，请参阅[Object.assign() 限制](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone)*）

# android - 标签无法在 ANDROID 中使用多种活动？

> ID：14027172
> 
> 赞同：1
> 
> 时间：2012-12-25T02:18:47.453
> 
> 标签：android, android-layout, android-intent, android-widget

> **可能重复：**
> [Android 的自定义 Tabwiget](https://stackoverflow.com/questions/14001222/custom-tabwiget-for-android)

我对 Android 很陌生。我对下面的场景有点困惑。

我创建了一个按钮，该按钮的 OnClick 将用户重定向到一个（Android XML 布局选项卡，即nurse.xml）。现在重定向工作正常，

护士.xml 包含一个选项卡。该活动无法显示选项卡，因此一切都被扭曲了。

```
 btnSignIn.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View view) 
        {
            setContentView(R.layout.nurse);
        }
   } 
```

护士.xml 的示例代码：

```
 <TabHost 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/tabHost"
        xmlns:android="http://schemas.android.com/apk/res/android">

        <TabWidget
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@android:id/tabs" />

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@android:id/tabcontent">

            <!--  Code for READING tab starts here -->
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/READING"
                android:orientation="vertical"
                android:paddingTop="60dp">
                <TextView  
                    android:layout_width="fill_parent" 
                    android:layout_height="100dp" 
                    android:text="@string/reading_tab" />    
            </LinearLayout>

            <!--  Code for MEDICATION medication starts here -->
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:id="@+id/MEDICATION"
                    android:orientation="vertical"
                    android:paddingTop="60dp" >
                <TextView  
                    android:layout_width="fill_parent" 
                    android:layout_height="100dp" 
                    android:text="@string/medication_tab" />
            </LinearLayout>
        </FrameLayout>
    </TabHost> 
```

任何帮助都会有所帮助，我需要nurse.xml 来运行带有选项卡的按钮的单击。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:41:55.403

阅读和药物应该有它们单独的 xml 和类。然后像这样在你的护士主类中调用它们。

```
Intent intentReading = new Intent().setClass(this, Reading.class);
        TabSpec tabReading = tabHost
          .newTabSpec("Reading")
          .setIndicator("", ressources.getDrawable(R.drawable.reading))
          .setContent(intentReading);

Intent intentMedication = new Intent().setClass(this, Medication.class);
        TabSpec tabMedication = tabHost
          .newTabSpec("Medication")
          .setIndicator("", ressources.getDrawable(R.drawable.medication))
          .setContent(intentMedication);

tabHost.addTab(tabReading);
tabHost.addTab(tabMedication); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:32:21.140

请编写以下代码而不是您的代码以在一个 TabActivity 中添加多个活动，它将解决您的问题。

ActivityStack.java

```
private Stack<String> stack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null)
        stack = new Stack<String>();
    // start default activity
    push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
}

@Override
public void finishFromChild(Activity child) {
    pop();
}

@Override
public void onBackPressed() {
    pop();
}

public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        stack.push(id);
        setContentView(window.getDecorView());
    }
}

public void pop() {
    if (stack.size() == 1)
        finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
        Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
        Window newWindow = manager.startActivity(stack.peek(), lastIntent);
        setContentView(newWindow.getDecorView());
    }
} 
```

TabActivity.java

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);

        Intent intent1 = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.invoice));
        spec1.setContent(intent1);
        tabHost.addTab(spec1);

        tabHost.setCurrentTab(0);
    }
} 
```

第一活动.java

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("Tab Sample Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), SecondActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("SecondActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("First Stack Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), ThirdActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("ThirdActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

第三活动.java

```
public class ThirdActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

将以下 XML 文件添加到您的 res/layout 文件夹中。

1) tab_screen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

2) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

AndroidManifest.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有关在一个 TabActivity 下添加多个活动的更多信息，请参阅下面的链接，并附上完整的示例。

[Android - 一个 TabActivity 下的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

# role - 多重唱腔角色“导航”和“互补”？

> ID：14027173
> 
> 赞同：5
> 
> 时间：2012-12-25T02:18:59.873
> 
> 标签：role, wai-aria

在一个文档中，有多个`<nav>`and`<aside>`元素。我应该添加`role="navigation"`所有`<nav>`s 和`role="complementary"`所有`<aside>`s 吗？

换句话说，一个文档中有多个`<nav role="navigation">...</nav>`s和多个`<aside role="complementary">...</aside>`s是更有益还是更多余？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T14:40:32.133

根据[HTML5 规范](https://html.spec.whatwg.org/multipage/dom.html#wai-aria)，`role="navigation"`对`<nav>`元素`role="complementary"`是隐含的，对元素也是隐含的`<aside>`。因此，您不需要根据规范添加它们。问题是有多少 AT 真正符合规范，所以如果你想安全地发挥它，你可以添加这些角色，它不会受到伤害。

还要记住，一些`<aside>`元素应该被标记为[role=note](https://www.w3.org/TR/wai-aria-1.1/#note)。

要考虑的另一件事是[HTML5 规范](https://html.spec.whatwg.org/multipage/sections.html#the-nav-element)允许将多个单独`<ul>`的 s 分组在一个`<nav>`. 我不确定这是否意味着仅对或每个都应该被标记`role="navigation"`就足够了。我找不到这方面的任何信息。`<nav>``<ul>`

# objective-c - 找不到 BaseType 的接口声明/尝试使用 BaseType 的前向声明

> ID：14027177
> 
> 赞同：0
> 
> 时间：2012-12-25T02:19:24.430
> 
> 标签：objective-c, c, llvm, xcode4.5

我被困在`Cannot find interface declaration for BaseType superclass of MyType`和`Attempting to use forward declaration for BaseType as superclass of MyType`错误之间。

我正在创建一个新的子类并导入了我的基本类型的标题。我收到了这个错误：`Cannot find interface declaration for BaseType superclass of MyType`。之前遇到过这个错误，我在声明中提前声明了我的班级`@class BaseType`。然后，我得到了第二个错误，而不是第一个错误：`Attempting to use forward declaration for BaseType as superclass of MyType`.

前向声明时，不删除任何`#import BaseType.h`更改，我仍然收到第二个错误。我已经找到了两个错误的解决方案，当我应用解决方案（例如，前向声明或导入标头）时，我最终得到了这两个错误中的另一个错误。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:31:27.260

好的，我最终将`#import`声明移动到实现 (.m) 文件中，并保持标题与`#import`语句无关，除了它自己的超类。导入可能存在无限递归，并且将它们从实现中移开是可行的。在头文件中，我已经前向声明了需要在接口中引用的类，仅此而已。有效。

# java - 当静态变量与 Java 中的静态类同名时会发生什么？

> ID：14027179
> 
> 赞同：7
> 
> 时间：2012-12-25T02:20:05.603
> 
> 标签：java

在下面的 java 示例中，任何人都可以准确解释为什么程序的输出是 "Orange" 吗？（这是一道面试题）

```
public class Finder {
  public static void main(String[] args){
    System.out.println(X.Y.Z);
  }
}

class X {
  static W Y = new W();
  static class Y {
    static String Z ="Apple";
  }
}

class W {
  String Z = "Orange";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T02:43:19.870

变量 Y 掩盖了 Y 类型。参见[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)：

> 6.4.2\. 遮蔽
> 
> 简单名称可能出现在可能被解释为变量、类型或包的名称的上下文中。在这些情况下，§6.5 的规则指定将优先选择变量而不是类型，并且将优先选择类型而不是包。因此，有时可能无法通过其简单名称来引用可见类型或包声明。我们说这样的声明是模糊的。

限定名称 XYZ 根据以下方式解析：

> 6.5.2\. 上下文模糊名称的重新分类
> 
> ...
> 
> 如果名称在“。”的左侧。被重新分类为 TypeName，则：
> 
> *   如果标识符是由 TypeName 表示的类型的方法或字段的名称，则此 AmbiguousName 被重新分类为 ExpressionName。
>     
>     
> *   否则，如果 Identifier 是由 TypeName 表示的类型的成员类型的名称，则将此 AmbiguousName 重新分类为 TypeName。
>     
>     
> *   否则，会发生编译时错误。

由于类型和变量的正常命名约定，这在实践中不太可能发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T02:29:15.823

您正在使用名为 Y 的 W 的静态实例隐藏类 Y。类 Y 仍然存在并且可以使用。尝试：

```
System.out.println(X.Y.Z);
System.out.println((new X.Y()).Z); 
```

输出应该是

```
Orange
Apple 
```

另请参阅：[Java 字段隐藏](https://stackoverflow.com/questions/10501503/java-field-hiding)

# mysql - 如何将 2 个表与一个请求合并

> ID：14027180
> 
> 赞同：2
> 
> 时间：2012-12-25T02:20:36.230
> 
> 标签：mysql, sql

所以我得到了 2 个具有以下结构的表：

```
CREATE TABLE courses(
  id bigint not null auto_increment,
  title varchar(255) default '',
  primary key(id)
);

CREATE TABLE course_dates(
  id bigint not null auto_increment,
  course_id bigint,
  `date` date,
  key idx(course_id,date),
  primary key(id)
); 
```

因此课程存储在第一个表中，课程日期存储在第二个表中（每门课程可以有无限数量的日期）

我需要使用一个查询一次获取所有课程行（及其所有日期）

例如，如果我有包含此类数据的表：

```
courses:
id | title
1  | course#1
2  | course#2

course_dates:
id | course_id | date
1  | 1         | 2012-12-25
2  | 1         | 2012-12-27
3  | 1         | 2012-12-31
4  | 2         | 2012-12-23
5  | 2         | 2012-12-30 
```

然后我需要这样的结果行：

```
id | course_id | date       | title
1  | 1         | 2012-12-25 | course#1
2  | 1         | 2012-12-27 | course#1
3  | 1         | 2012-12-31 | course#1
4  | 2         | 2012-12-23 | course#2
5  | 2         | 2012-12-30 | course#2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T02:21:55.777

一个简单的`INNER JOIN`就可以了。

```
SELECT  b.*, a.title
FROM    Courses a
        INNER JOIN Courses_Dates b
            ON a.id = b.Course_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0b06c/2)
*   [SQLFiddle 演示（*带`ORDER BY`子句*）](http://sqlfiddle.com/#!2/0b06c/5)

要了解有关联接的更多信息，请参阅下面的链接

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# php - cakephp 在表单提交上加载部分视图

> ID：14027181
> 
> 赞同：0
> 
> 时间：2012-12-25T02:21:08.777
> 
> 标签：php, jquery, cakephp

我正在制作一个小型搜索功能，其中我将`.ctp`文件放入元素中，这样我就可以实现 ajax 发布，而无需重新加载整个页面并且只渲染元素。

该元素非常简单，它`li`使用从控制器传递的请求数据创建一个项目。

```
<li class="span2">
<a  class="pull-left" href="">
    <img  class="media-object" src="<?php $img_path = $result['Person']['profile_image']; echo $img_path;?>">
</a>
<div class="media-body">
    <label class="person-media">
        <?php
        $firstName = ucfirst($result['Person']['first_name']);
        $lastName = ucfirst($result['Person']['last_name']);

        echo $firstName;
        echo "<br>";
        echo $lastName;
        ?>
    </label>
</div> 
```

在我的搜索操作中，我想保留整个骨架（页眉、页脚、搜索 div 持有人）并仅在无序列表中呈现列表项。但是在搜索点击时，整个页面都会加载

在这里我试图设置数据

```
//transform POST into GET
    if($this->request->is("post")) {
        $url = array('action'=>'manage');
        $filters = array();

        if(isset($this->data['searchFor']) && $this->data['Search.name']){
            //maybe clean up user input here??? or urlencode??
            $filters['Search.name'] = $this->data['Search.name'];
        }
        //redirect user to the index page including the selected filters
        $this->redirect(array_merge($url,$filters));
    }

    $conditions = array();
    //
    // filter by name
    //
    if(isset($this->passedArgs['Search.name'])) {
        $conditions["Person.first_name LIKE"] = "%".$this->passedArgs["Search.name"]."%";

    }
    //paginate as normal
    $this->paginate = array(
        'conditions' => $conditions,
        'order' => array('Person.first_name ASC'),
        'limit' => 12
    );
    $this->layout = "main";
    $this->set("results",$this->paginate("Person"));
    **$this->render('manage');** // rendering on the element loads everything 
```

从查询中找到我的结果后，manage.ctp 会加载所有内容。

```
 </div>
<ul id="students-list" class="students-ist">
   <?php

    if(!empty($results)){

        foreach($results as $result){
            echo $this->element('singleuser', array('result' => $result));
        }
    }

    ?>

</ul> 
```

我如何使用 Ajax 和表单提交仅加载 div 内的一个元素，而无需在每次搜索时重新加载整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:22:33.010

有几种方法可以从服务器获取整个页面的一部分并将其仅部分放入浏览器的页面中。

以下是将进行 AJAX 调用的搜索表单的提交处理程序。在 AJAX 完成回调中，将用新的替换学生列表项

```
/* place code in script tag or external file after jQuery.js loads*/
$(function(){
    /* adjust selector to match ID of form*/
    $('#searchForm').submit(function(){
          /* sends form data retrieved in php as if form submitted through browser defalt method*/
           /* "this" is the form, serialize will formencode all fields in form*/
          var dataToServer=$(this).serialize();
          $.get( 'pageUrl.php', dataToServer, function(response){
                /* AJAX has returned page, "response" is the full html of page*/
               /* get the items from list from response*/
                var studentListItems= $(response).find('#students-list').html();

                /* replace the list items in active page*/
                $('#students-list').html(studentListItems);

           });
       /* prevent form default submit*/
       return false;
    });

}) 
```

一旦你让 Cake 控制器只返回你想要的 LI，你可以将响应直接转储到列表中：

```
$('#students-list').html(response); 
```

# php - 在通配符中捕获可能具有特定顺序的组

> ID：14027183
> 
> 赞同：0
> 
> 时间：2012-12-25T02:21:50.633
> 
> 标签：php, regex

我正在尝试匹配任何具有`([a-zA-Z0-9$\s]*)`但我也想在该组中匹配的字符串 an`=`和 a`>`但前提是它们一起出现`=>`

我试过这个，但它似乎不起作用`([a-zA-Z0-9$\s]|=>*)`

有没有办法在一个正则表达式和一个捕获组中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:54:57.073

just move your asterisk outside the brackets...

`([a-zA-Z0-9$\s]|=>)*`

add another pair of brackets to capture it all...

`(([a-zA-Z0-9$\s]|=>)*)`

# python - django 模型表单自定义字段

> ID：14027185
> 
> 赞同：4
> 
> 时间：2012-12-25T02:22:03.813
> 
> 标签：python, django, django-models, django-forms

我创建了一个包含一些类的模型：

```
class Student(models.Model):
    name = models.CharField(max_length=40)
    last_name = models.CharFIeld(max_length=40)
(...) 
```

在底部的同一个 models.py 文件中，我添加了一个与我的一个模型相对应的类，这样我就可以创建一个表单：

```
class StudentForm(ModelForm):
    class Meta:
        model = Student 
```

如何自定义通过 ModelForm 类创建的表单字段？我正在阅读 django 文档，但我无法理解覆盖默认类型部分。例如，在文档中他们说这会起作用：

```
class ArticleForm(ModelForm):
    pub_date = DateField(label='Publication date')

    class Meta:
        model = Article 
```

但是当我输入我的值时它不起作用。我无法定义我的标签：

```
class StudentForm(ModelForm):
    name = CharField(label='New label')

    class Meta:
        model = Student 
```

我是否必须创建一个像 forms.py 这样的文件，其字段与 Model 类中的字段相同，然后对其进行自定义？是否可以仅使用 Model Forms 更改单个字段的 css 属性，如宽度、高度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T02:37:17.673

表单字段使用差异库来创建来源。您需要为特定字段导入`django.forms`和使用`form.XXX`

```
from django import forms

class StudentForm(ModelForm):
    class Meta:
        model = Student

    subject = forms.CharField(label='New label') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T19:34:42.190

为了自定义模型表单中的字段，您不需要手动创建它。Django 模型字段具有特殊属性：

*   `verbose_name`（转到字段的标签）
*   `help_text`（默认情况下呈现为字段下方的附加描述）

所以，你只需要：

```
class Student(models.Model):
    name = models.CharField(max_length=40,
                            verbose_name="Student's Name", 
                            help_text="Please tell me your name")  # Optional
    last_name = models.CharFIeld(max_length=40)
    ... 
```

然后您不需要在模型形式中进行任何自定义。

请参阅：[https ://docs.djangoproject.com/en/dev/ref/models/fields/#verbose-name](https://docs.djangoproject.com/en/dev/ref/models/fields/#verbose-name)

# ruby-on-rails - 通过 SSHFS 打开 Rails 项目会导致 TextMate 崩溃

> ID：14027187
> 
> 赞同：2
> 
> 时间：2012-12-25T02:22:46.060
> 
> 标签：ruby-on-rails, sshfs, textmate2

我正在尝试访问位于朋友服务器上的 Rails 项目。

我已经在我的 Mac OS 10.7.4 系统上安装了 OSXFUSE、MacFUSE 和 MacFusion，以及独立的 SSHFS 包。

我想使用 MacFusion，但在 TextMate 崩溃后，我决定按照 Macromates (http://wiki.macromates.com/Main/Howtos#Macfuse) 的说明进行操作：

```
sshfs user@servername:/ ~/mnt/servername -o'ping_diskarb,volname=servername'
cd ~/mnt/servername/projectfolder
mate . 
```

TextMate 启动但立即变得无响应，直到我强制它退出。Sublime Text 2 没有这样的问题。

关于如何调试的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T21:30:56.307

我一直在寻找解决方案，发现这似乎可行：

```
sshfs -o no_readahead,noappledouble,nolocalcaches user@server:. /mount/ 
```

从这里：[Sshfs、Textmate 和 Rails 项目，非常慢](https://stackoverflow.com/questions/8951744/sshfs-textmate-rails-project-very-slow)

[https://groups.google.com/forum/?fromgroups=#!topic/macfusion-devel/D3A8tyTsApw](https://groups.google.com/forum/?fromgroups=#!topic/macfusion-devel/D3A8tyTsApw)

# javascript - jQuery AJAX 加载 IE6 问题

> ID：14027189
> 
> 赞同：-1
> 
> 时间：2012-12-25T02:22:56.843
> 
> 标签：javascript, jquery, ajax, asynchronous, load

我有一个包含所有 jQuery 和 JavaScript 文件的主 HTML 文件。现在我有一个具有展开/折叠功能的表格。此表位于不同的 HTML 文件中。

我正在尝试将表加载到主文件中。我成功地在主 HTML 文件中加载了表格，但展开/折叠仅在 IE6/IE7 中不起作用。这在 FF、Chrome、Safari 和 IE8 中运行良好。

local.js 具有展开/折叠代码
table.html 是只有表格代码而没有 JavaScript 的 html 文件。

**主要HTML：**

```
<html>
    <title>Main html</title>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" scr="localjs.js"></script>
        <script type="text/javascript">

            $('#ajaxtable').load('ajax/table.html', function() {
                alert('Table Loaded.');
            });

        </script>
    </head>

    <body>
        <div id="ajaxtable"></div>
    </body>
</html> 
```

我可以看到表格已加载到 ajaxtable div 中，但展开/折叠仅在 IE6 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:59:21.263

As I mentioned in my comment above, you are loading `localjs.js` before the `$('#ajaxtable')` call. Attach the click handler after the table has been created and you should be fine...

```
<script type="text/javascript">
$('#ajaxtable').load('ajax/table.html', function() {
  alert('Table Loaded.');
  $('table tr.heading').click(function(){ $(tr.alpha).slideToggle('slow'); });
});
</script> 
```

# java - 明星中学类Java

> ID：14027190
> 
> 赞同：0
> 
> 时间：2012-12-25T02:23:14.763
> 
> 标签：java, class, initialization

好的..所以，这听起来很愚蠢。我有两节课。Foo.class 和 Bar.class

Foo.class' 代码：

```
public static void main(String[] args){ startBar(); } 
```

Bar.class'代码：

```
public static void main(String[] args){ echo "HI"; } 
```

我希望输出为“HI”。如，我想在第一堂课中开始我的中学课。我可能在解释这一点方面做得很糟糕。如果您确实了解我想要的东西，请记住一些事情，我不想要一个启动 bar.class 的流程构建器。我需要它全部在一个东西中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:33:12.797

Foo 类

```
public static void main(String... args){
  Bar.main(args);
} 
```

酒吧类

```
public static void main(String... args){
  System.out.println("Hi");
} 
```

# java - 在java中配置类路径

> ID：14027191
> 
> 赞同：0
> 
> 时间：2012-12-25T02:23:28.927
> 
> 标签：java

我是java新手..

我有一个示例结构如下：

```
/folder/foo.java /folder/bar.java /folder/foobar.java 
```

现在我正在尝试运行 foobar.java 但我得到以下异常

```
Exception in thread "main" java.lang.ClassNotFoundException: /folder/foobar
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

然后我尝试通过这样做来配置它

```
java -classpath  .  foobar 
Exception in thread "main" java.lang.NoClassDefFoundError: foobar
Caused by: java.lang.ClassNotFoundException: foobar
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 
```

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:34:17.123

类路径的默认值为 '.' ，即当前目录。类路径环境变量的值会覆盖该值。如果使用 –cp 或 –classpath 选项发出 java 命令，它将覆盖默认的 '.' 和类路径环境变量值。

下面是在类执行期间设置类路径的示例 C:>java -classpath "." com.abc.example.SayHello

与编译需要提供确切路径的位置相反，要运行类文件，我们需要遵循包结构。

这是由于 Classloader 尝试通过组合其包和类名来解析类位置的方式。您必须位于包根位置并发出指定包结构的 java 命令。

C:>java com.abc.example.SayHello

你好！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T02:29:21.957

首先，你需要编译java文件：

```
javac /folder/*.java 
```

然后你可以运行一个带有`main()`函数的类：

```
java -cp . folder.foobar 
```

# apache-flex - Flex：mx:TextArea 中的负数自动换行

> ID：14027192
> 
> 赞同：1
> 
> 时间：2012-12-25T02:23:28.940
> 
> 标签：apache-flex, textarea, flex3, word-wrap

版本：Flex SDK3.5

示例代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" backgroundColor="0xFFFFFF" 
        xmlns:s="library://ns.adobe.com/flex/spark">
     <s:TextArea width="280" height="200"
        text="The hzy_text should be integer between -2147483648 and 2147483647\. Please input again."/>
     <mx:TextArea width="280" height="200"
        text="The hzy_text should be integer between -2147483648 and 2147483647\. Please input again."/>
</mx:Application> 
```

[截图](http://forums.adobe.com/message/4942690#4942690)（对不起，我没有上传图片的权限，你可以在这个网址看到：http://forums.adobe.com/message/4942690#4942690）

当我使用 mx:TextArea 时，它将“-2147483648”包装到“-”“2147483648”。

使用 s:TextArea，它会正确包装。

但是我用的是sdk3.5，不能用spark组件，mx怎么解决这个问题？

谢谢你的帮助！

# c++ - 检测偶数和奇数 C++ 向量迭代器

> ID：14027196
> 
> 赞同：0
> 
> 时间：2012-12-25T02:24:46.817
> 
> 标签：c++, iterator

我搜索了一下，我很惊讶这还没有被问到。我知道如何用一个简单的循环来做到这一点，那么使用矢量迭代器呢？

```
for( std::vector<int>::iterator it = somevector.begin(); it != somevector.end(); ++it )
{
    //Conditions stating a certain vector has an even or odd index.
} 
```

抱歉没有澄清，我的意思是检测向量的索引是奇数还是偶数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T02:30:10.770

这将是一种简单的方法：

```
{
  bool is_even = true;
  for (const auto& v: somevector) {
    if (is_even) even_handler(v);
    else         odd_handler(v);
    is_even = !is_even;
  }
} 
```

* * *

想要更复杂的解决方案？没问题：

```
#include <iostream>
#include <string>
#include <utility>
#include <vector>
using std::next;
template<typename Iter, typename Func, typename...Funcs>
void RotateHandlers(Iter b, Iter e, Func f, Funcs...fs) {
    if (b != e) {
        f(*b);
        RotateHandlers(next(b), e, fs..., f);
    }
}

int main() {
    std::vector<std::string> v({"Hello", "world", "it's", "really", "great", "to", "be", "here"});
    RotateHandlers(v.begin(), v.end(),
      [](const std::string& s){std::cout << "First|" << s << std::endl;},
      [](const std::string& s){std::cout << "Then |" << s << std::endl;},
      [](const std::string& s){std::cout << "And  |" << s << std::endl
                                         << "     |" << std::string(s.size(), '-') << std::endl;}
    );
    return 0;
} 
```

在这里看到它：http: [//ideone.com/jmlV5F](http://ideone.com/jmlV5F)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T02:37:52.477

我猜你的意思是你想检测当前索引是偶数还是奇数：

```
#include <iostream>
#include <iterator>
#include <vector>

int main()
{
    std::vector<int> somevector;
    somevector.push_back(1);
    somevector.push_back(2);
    somevector.push_back(4);
    somevector.push_back(8);
    somevector.push_back(111605);

    for (auto it = somevector.begin(); it != somevector.end(); ++it)
    {
        // current index
        const auto index = std::distance(somevector.begin(), it);

        if ((index % 2) == 0) // even
        {
            std::cout << "Index " << index << " (even) is: " << *it;
        }
        else
        {
            std::cout << "Index " << index << " (odd) is: " << *it;
        }

        std::cout << std::endl;
    }
} 
```

您可以使用 获取迭代器之间的距离`std::distance`。（索引是距起点的距离。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T02:30:27.803

如果我[在最后一次编辑之前]正确理解了这个问题，一个选项是：

```
bool is_odd(const std::vector<int> &somevector) {
    for( std::vector<int>::iterator it = somevector.begin(); it != somevector.end(); ++it ) {
        //Conditions stating a certain vector is even or odd.
        if (*it % 2 == 0) {
          return false; 
        }
    }
    return true;
} 
```

分别用于“偶数向量”。

# c++ - OpenGL - 重新绑定已经绑定的纹理

> ID：14027208
> 
> 赞同：1
> 
> 时间：2012-12-25T02:30:15.070
> 
> 标签：c++, image, opengl, graphics, textures

> **可能重复：**
> [进行冗余 OpenGL 调用](https://stackoverflow.com/questions/4905728/making-redundant-opengl-calls)

假设我有一个`Image`类，该类有一个方法，该方法`draw`在屏幕上绘制图像的一部分，并且还存储了包含实际图像数据的 2d 纹理的句柄。

这样实现draw()方法可以吗？

```
// ix, iy, w and h specify which part of the image to draw
void Image::draw(int x, int y, int ix, int iy, int w, int h)
{
   glBindTexture(GL_TEXTURE_2D, m_textureHandle);
   //and then draw the specified part of the image
} 
```

我主要关心的是调用`glBindTexture`. 假设如果纹理已经绑定，则此调用不会导致某种性能损失是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:57:49.797

在为 OpenGL、OpenVG 等开发了一些实现（驱动程序）之后，glBindTexture 实际上只是将 m_textureHandle 存储在“当前上下文”内的某个“好地方”。这不是一件难事，也不应该“花费太多”。

如果您尝试保存最后一个执行周期，请务必添加一个变量来确定您是否已经绑定了纹理，并且仅在需要时才执行此操作。但总的来说，如果你不能通过做其他聪明的事情来节省 5-10 倍的时间，我会感到非常惊讶。

# python - Django：参考model.save（）方法中的上一项失败

> ID：14027209
> 
> 赞同：1
> 
> 时间：2012-12-25T02:30:27.400
> 
> 标签：python, django, django-models

我正在尝试为具有队列验证的项目实施等候室。
一般的想法是将物品放入等候室，计算它的计数器（定义需要多少新物品来确认此物品的值），在添加每个新物品后减少它，最后在将计数器减少到零以下后确认它。如果等候室中已经有物品，则计算出的计数器会增加上一个物品的计数器，因此物品在队列中。
我的实现非常简单，但我发现这个解决方案非常快。但是引用上一个项目对我不起作用，我找不到原因 - 它经常从 Waiting 对象返回“随机”（或至少不是最后一个）值。

这是重要的代码片段：

```
class Waiting(models.Model):                                                       
    item = models.ForeignKey(Item)                                             
    counter = models.FloatField(default=0)                                         
    (...)
    def clearup(self): 
        (...) #here is decrementing and confirming part - it's working fine
    def save(self, update=False):
        if update:                                                                 
            return super(Waiting, self).save()                                     

        item = self.item                                                       
        self.clearup()
        (...) #nothing important
        self.counter = item.quantity * items_list[item.name][1]
        last = Waiting.objects.exclude(                                        
                item__name="Something I don't want here").order_by('-pk')
        if last:
            last = last[0]
            weight = items_list[last.item.name][1]
            self.counter += (last.item.quantity * weight)                       

        super(Waiting, self).save() 
```

编辑：我是智障。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:14:01.143

几乎像往常一样——这是我的错。我用另一种方法解决了这个问题，这导致了这个问题。

无论如何，感谢您尝试帮助我。

# android - Android 广播流，steam 链接不播放

> ID：14027211
> 
> 赞同：0
> 
> 时间：2012-12-25T02:30:50.563
> 
> 标签：android, stream, radio

我已经跟进了 zvzej 在[Android 在线广播流媒体应用程序上的帖子](https://stackoverflow.com/questions/6283568/online-radio-streaming-app-for-android)

我遇到了2个问题：

1st.) 流链接不播放，虽然 buttonPlay.enabled(false) 确实有效，但我也看不到进度条，尽管 onClick 的播放它应该是可见的。这是否意味着脚本无法超越

```
 playSeekBar.setVisibility(View.VISIBLE); 
```

在 startPlaying() 中？

2nd.）点击播放后，停止，然后返回播放，应用程序强制崩溃，有时需要更多点击，有时更少。

代码：

```
 package com.afghan.radios;

 import android.app.Activity;
 import android.os.Bundle;

 import java.io.IOException;

 import android.media.MediaPlayer;
 import android.media.MediaPlayer.OnBufferingUpdateListener;
 import android.media.MediaPlayer.OnPreparedListener;
 import android.util.Log;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.ProgressBar;

 public class ArmanFMRadio extends Activity implements OnClickListener {

private ProgressBar playSeekBar;
private Button buttonPlay;
private Button buttonStopPlay;
private MediaPlayer player;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.armanfm);
    initializeUIElements();
    initializeMediaPlayer();

}

private void initializeUIElements() {

    playSeekBar = (ProgressBar) findViewById(R.id.progressBar1);
    playSeekBar.setMax(100);
    playSeekBar.setVisibility(View.INVISIBLE);

    buttonPlay = (Button) findViewById(R.id.buttonPlay);
    buttonPlay.setOnClickListener(this);

    buttonStopPlay = (Button) findViewById(R.id.buttonStopPlay);
    buttonStopPlay.setEnabled(false);
    buttonStopPlay.setOnClickListener(this);

}

private void initializeMediaPlayer() {
    player = new MediaPlayer();
    try {
        player.setDataSource("http://usa8-vn.mixstream.net:8138");
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

        public void onBufferingUpdate(MediaPlayer mp, int percent) {
            playSeekBar.setVisibility(View.VISIBLE);
            playSeekBar.setSecondaryProgress(percent);
            Log.i("Buffering", "" + percent);

        }
    });
}

public void onClick(View v) {
    if (v == buttonPlay) {
        startPlaying();
    } else if (v == buttonStopPlay) {
        stopPlaying();
    }
}

private void startPlaying() {
    buttonStopPlay.setEnabled(true);
    buttonPlay.setEnabled(false);

    playSeekBar.setVisibility(View.VISIBLE);

    player.prepareAsync();

    player.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            try {
                player.prepare();
                player.start();

            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });

}

private void stopPlaying() {
    if (player.isPlaying()) {
        player.stop();
        player.release();
        initializeMediaPlayer();
    }

    buttonPlay.setEnabled(true);
    buttonStopPlay.setEnabled(false);
    playSeekBar.setVisibility(View.INVISIBLE);
}

@Override
protected void onPause() {
    super.onPause();
    if (player.isPlaying()) {
        player.stop();
    }

 }
} 
```

# image - 在 node.js 中上传具有强大功能的图像失败

> ID：14027220
> 
> 赞同：0
> 
> 时间：2012-12-25T02:34:02.997
> 
> 标签：image, node.js, upload, express, formidable

我想在node.js中使用强大的express来实现上传图片的功能，

我要做的是：

```
app.configure(function () {
    app.use(express.static(__dirname + "/media"));
    app.use(express.bodyParser());
})
app.post('/upload', function (req, res) {
    var form = new formidable.IncomingForm();
    form.parse(req, function(err, fields, files){
        console.log("log in parse");
        console.log("fields type is " + typeof fields);
        console.log("files type is " + typeof files);
        console.log(files.image);       
        if (err) return res.send('You found error');
    });
}) 
```

使用此代码，图像可以成功上传，但该`form.parse`函数似乎没有被调用，因为`log`没有被调用

为什么？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:52:34.587

express 3 `bodyParser()` uses `formidable` internally. So this should work:

```
view.jade
    form#fileupload(enctype="multipart/form-data")
        input(type="hidden",name="user[id]", value="1")
        input(type="file",name="photo[file]")

app.js
    app.post('/upload', function (req, res) {
        var userId = req.body.user.id;
        var photo = req.files.photo.file;
    }); 
```

# php - 显示来自数据库字段的不同值

> ID：14027223
> 
> 赞同：0
> 
> 时间：2012-12-25T02:34:33.713
> 
> 标签：php, mysql, sql, if-statement

我的 MySQL 数据库列有以下内容：

```
+-------+
|Status |
+-------+
|       | // empty
|       | // empty
|Reject |
|reject |
+-------+ 
```

我对此有一些条件`Status`，所以用户可以看到这个案例的判断：

1.  如果结果`Reject`（如果选择项目自动）或`reject`（某些用户在编辑数据后键入此内容）回显拒绝
2.  如果结果`empty`或“接受”或“接受”回显接受

我试过这个：

```
if($row['Status'] == "Reject"){
                echo "Reject";
                }
        elseif($row['Status'] == "reject"){
                echo "Reject";
                }
        else{
                echo "Accept";
                } 
```

但是，它总是在回响`Accept`。原因如下查询的结果是`empty`：

```
SELECT COUNT(Serial_number) AS n, SUM(S) AS S,SUM(A) AS A, SUM(B) AS B, SUM(C) AS C,
        ROUND((((SUM(S)*1)+(SUM(A)*1)+(SUM(B)*0.4)+(SUM(C)*0.1))/COUNT(Serial_number)*1000000),0) AS PPM,
        Status
        FROM inspection_report WHERE Model LIKE 'MDV-Z700D' AND Lot_no LIKE '010A' 
        AND Line LIKE 'FA 21' AND Range_sampling ='177X0001-177X0100' GROUP BY Range_sampling 
```

结果 ：

```
n   S   A   B   C   PPM    Status
20  0   1   0   0   50000             //this empty status make echo = Accept 
```

如果使用`GROUP_CONCAT(Status)`结果是`,,Reject,reject`。那么，如何回显每个条件参考上面的 2 个案例？

* * *

注意：如果该列内有拒绝值，即使我有很多接受值，我也希望结果回显拒绝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:37:52.983

 ~~如果`Status`是`NULL`，您可以使用`COALESCE`

```
GROUP_CONCAT(COALESCE(Status,'Accept')) 
```

 ~~但如果它是一个空字符串`''`，请使用`inline IF statement`

```
GROUP_CONCAT(if(Status = '' or Status = 'accept', 'Accept', Status)) 
```

**更新**

```
IF(LOCATE('Reject',GROUP_CONCAT(DISTINCT if(Status = '' or Status = 'accept', 'Accept', Status))) > 0, 'REJECT', 'ACCEPT') 
```~~~~

# iphone - 如何检查服务器的可达性

> ID：14027226
> 
> 赞同：4
> 
> 时间：2012-12-25T02:35:15.880
> 
> 标签：iphone, objective-c, ios, xcode, reachability

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:41:09.443

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T07:24:23.093

在 didFinishLaunchingWithOptions 方法上放：

`self.internetReach= [Reachability reachabilityWithHostName:@"your host name e.g.www.apple.com"];`

```
[internetReach startNotifier];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:kReachabilityChangedNotification object:nil];

[self performSelector:@selector(reachabilityChanged:) withObject:[NSNotification notificationWithName:kReachabilityChangedNotification object:internetReach]]; 
```

这将调用以下方法

```
- (void)reachabilityChanged:(NSNotification*)note 
```

{

```
Reachability* curReach = [note object];
NSParameterAssert([curReach isKindOfClass: [Reachability class]]);

if(curReach == self.internetReach)
{
    NetworkStatus netStatus = [curReach currentReachabilityStatus];
    switch (netStatus)
    {
        case ReachableViaWiFi:
        {            
            isInternetConnectionAvilable=YES;
            if(isNetworkNotifierCalledOnce)
            {
                UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Message!" message:@"Internet Available Now" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert show];
                [alert release];
            }
            break;
        }

        case NotReachable:
        {     

            isInternetConnectionAvilable=NO;

            UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Message!" message:@"No Internet Connectivity" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alert show];

            [alert release];

            break;
        }
    }

}

isNetworkNotifierCalledOnce=YES; 
```

}

# php - 忽略捕获组内的字母

> ID：14027227
> 
> 赞同：0
> 
> 时间：2012-12-25T02:35:31.330
> 
> 标签：php, regex

我想忽略捕获组中的空格，有没有办法做到这一点：

```
preg_split('#test[a-zA-Z0-9\s]*test#', $str, -1, PREG_SPLIT_DELIM_CAPTURE) 
```

任何：

```
'A AtestA4 testZ Z'
'A AtestA4    testZ Z'
'A AtestA 4 testZ Z'
'A AtestA4testZ Z' 
```

全部返回

```
array(
    [0] => 'A A',
    [1] => 'testA4',
    [2] => 'Z Z'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:19:59.277

我不知道如何存档（我怀疑这是否可能），但这里有一个替代解决方案：

```
$str='A AtestA 4 testZ Z';
$arr=preg_split('#(test[a-zA-Z0-9\s]*test)#', $str, -1, PREG_SPLIT_DELIM_CAPTURE);
var_dump($arr); //just to debug (compare)
var_dump(array_map(function($v){
    if(preg_match('#test[a-zA-Z0-9\s]*test#',$v))
        return str_replace(' ','',preg_replace('#(test[a-zA-Z0-9\s]*)test#','\1',$v));
    else
        return $v;
},$arr)); 
```

输出：

```
array(3) {
  [0]=>
  string(3) "A A"
  [1]=>
  string(12) "testA 4 test"
  [2]=>
  string(3) "Z Z"
}
array(3) {
  [0]=>
  string(3) "A A"
  [1]=>
  string(6) "testA4"
  [2]=>
  string(3) "Z Z"
} 
```

在真实代码上，您可以将`preg_split`into结合起来`array_map`。

# php - 连接到 MySQL 时出现 PDO 错误

> ID：14027233
> 
> 赞同：1
> 
> 时间：2012-12-25T02:37:38.677
> 
> 标签：php, mysql

我正在尝试连接到存储在 localhost 上的 MySQL 数据库。

代码：

```
$config['db'] = array( 
    'host' => 'localhost',
    'username' => 'root',
    'password' => 'mypass',
    'dbname' => "dbname"
);

echo $config['db']['host'];

try {
    $conn = new PDO('mysql:host=127.0.0.1;dbname=sfrtv', 'root', 'usbw', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

此代码返回以下错误：

> `Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [2003] Can't connect to MySQL server on '127.0.0.1' (10061)' in H:\path\filename.php:12 Stack trace: #0 H:\path\filename.php(12): PDO->__construct('mysql:host=loc....', 'root', 'mypass') #1 {main} thrown in H:\path\filename.php(12) on line 12`

关于如何纠正这个问题的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:49:17.037

我相信你从 PHP 学院的 Alex 那里得到了代码。您可以尝试检查您的mysql详细信息是否相同。试试这个，我改变了引号和空格。

```
 $config['db'] = array( 
    'host' => 'localhost',
    'username' => 'root',
    'password' => 'mypass',
    'dbname' => 'dbname'
    );

        echo $config['db']['host']; 

        $dbh = new PDO('mysql:host='. $config['db']['host'] .';dbname='. $config['db']['dbname'], $config['db']['username'], $config['db']['password']); 
```

或再次查看教程：[http ://www.youtube.com/watch?v=XQjKkNiByCk](http://www.youtube.com/watch?v=XQjKkNiByCk)

* * *

如果没有，请尝试以这种方式连接下面的代码，因为它会**捕获异常**并回显问题所在。

```
try {
    $conn = new PDO('mysql:host=localhost;dbname=mydb', 'root', 'mypass', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

上述连接方式要安全得多，因为如果出现问题，它不会向用户显示您的整个文件和目录结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T02:52:06.040

确保您已`extension=php_pdo_mysql.dll`在文件中启用/取消注释，`php.ini`否则 PDO 将不支持 MySQL。

# ios - 如何在iOS编程中检测用户是否没有捏合和缩放

> ID：14027237
> 
> 赞同：4
> 
> 时间：2012-12-25T02:39:08.247
> 
> 标签：ios, xcode, ios6, uigesturerecognizer, gestures

你好 Devs（这是我在 Stack-Overflow 上的第一篇文章，所以请在评论中告诉我我做错了什么:)。

**此代码检测用户是否在捏：**

```
UIPinchGestureRecognizer *twoFingerPinch = 
  [[[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerPinch:)] autorelease];
[[self view] addGestureRecognizer:twoFingerPinch]; 
```

虚空行动：

```
- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer 
{
  NSLog(@"Pinch scale: %f", recognizer.scale);
} 
```

问题是我想检测用户是否在 20 秒内没有捏合，所以我可以提醒用户 @"Pinch to show more Images"。我正在使用图像缩略图，如果用户捏它会显示更多图像。感谢您的帮助，祝您假期愉快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:55:28.003

`twoFingerPinch`启动一个 20 秒的计时器，只有在用户捏合时才会失效。每当您需要开始检查时启动此计时器。在计时器操作方法中，您可以放置​​代码以显示此警报。

在 .h 文件中声明计时器，

```
@property(nonatomic, strong) NSTimer *timer; 
```

以`viewDidLoad`或您要启动计时器以进行检查的任何方法，

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:20.0f target:self selector:@selector(showAlert) userInfo:nil repeats:YES]; 
```

在`showAlert`方法上，

```
- (void)showAlert {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Pinch to show more Images" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
    [alert show];
} 
```

在`twoFingerPinch`方法上，

```
- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer 
{
  NSLog(@"Pinch scale: %f", recognizer.scale);
  [self.timer invalidate];

  //if the timer needs to be restarted add,
  self.timer = [NSTimer scheduledTimerWithTimeInterval:20.0f target:self selector:@selector(showAlert) userInfo:nil repeats:YES];
} 
```

# javascript - iframe 在博主博客中不起作用

> ID：14027240
> 
> 赞同：0
> 
> 时间：2012-12-25T02:40:06.570
> 
> 标签：javascript, css, iframe, blogger

嗨，我在我的博主博客中使用 iframe 全高。

使用的 CSS 是：

```
#iframe {
   height: 100%; 
   width: 100%; 
   display: block;
   border:0;
   margin:0;
   padding:0;
} 
```

和Javascript是：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>
    var height = window.innerHeight;

    $(document).ready( function(){
       $('iframe').css('height', height);
    } );
</script> 
```

和 HTML 是：

```
<iframe id="iframe" src="http://mybloggertricks.com"></iframe> 
```

我已经在 Dreamviewer 中使用相同的上述属性对其进行了测试，它在 IE 中也可以正常工作。但仅在博客中它仅在 IE 浏览器中不起作用。请帮助我解决这个问题请帮助。

在此处查看该博客：http: [//new-temp.blogspot.com/2012/12/my-blogger-tricks.html](http://new-temp.blogspot.com/2012/12/my-blogger-tricks.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:49:05.773

Iframe to monitor his load, code like this:

```
 var height = window.innerHeight, iframe = $('iframe');
 iframe.load(function(){
     setTimeout(function(){
         iframe.css('height', height);
     }, 100);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T14:54:51.920

这是一个将博客 iframe 添加到博客的工具：http: [//www.makingdifferent.com/online-iframe-generator-tool-for-blogwebsite/](http://www.makingdifferent.com/online-iframe-generator-tool-for-blogwebsite/)

如果那没有帮助。您也许可以使用以下代码作为指南。只需将整个代码复制并粘贴到博主的页面或帖子中，即可查看 iframe 如何扩展 100% 高度的测试。

如果您不希望宽度扩大 100%，只需更改所有宽度部分以匹配您所需的宽度：

```
<style>
#inside-iframe {
height:100%;
width:100%;
position: fixed;
scroll: no;
top:0px;
left:0px;
padding:0px;
z-index:9999;
}

body {
width:100%; 
height:100%; 
}
html {
width:100%; 
height:100%; 
}
</style>

<div id="inside-iframe">
<object width="100%" height="100%"><embed src="http://mybloggertricks.com" width="100%" height="100%"></embed></object>
</div> 
```

# html - 解释什么是 标签是给非程序员的

> ID：14027243
> 
> 赞同：9
> 
> 时间：2012-12-25T02:40:45.440
> 
> 标签：html, markup

所以我的兄弟假期在家，他正在尝试学习 HTML 和 Javascript。我已经成功地向他解释了许多与此相关的概念。大多数标签都是不言自明的，但我一直在努力描述一个**div**标签。

老实说，我从来没有真正对自己有一个好的描述，只是通过我知道什么时候使用的经验。

一个好的答案不需要包含“块元素”的定义或任何其他技术术语，尽管您可以假设一些 HTML 标签的基本知识

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T04:54:55.633

出于某种原因，标签周围的目的或逻辑`<div> </div>`对我来说是有意义的，因为我看着**布夹**，原因是：

*   布夹通常或几乎总是适用于每种类型的布**两个**。*`(<div> </div>)`*
*   一个不能没有另一个，否则布会掉下来。例：*`<div>`*一个人是行不通的。
*   它们的目的是，它们可以保存一段代码*：（**在这种情况下是一块布*）
**   并根据您的需要控制给定对象的结构、空间、宽度、布局。*

 *![在此处输入图像描述](../Images/007605de2075755dd0e9697ce6de360e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T02:47:10.107

> 标签只不过是一个容器单元，它封装了其他页面元素，并将 HTML 文档划分为多个部分。Web 开发人员使用元素将 HTML 元素组合在一起，并同时将 CSS 样式应用于许多元素。例如，通过将一组段落元素包装到一个元素中，开发人员可以利用 CSS 样式并通过将字体样式应用于标记而不是为每个段落元素编写相同的样式来一次将字体应用于所有段落。

取自[http://www.tizag.com/htmlT/htmldiv.php](http://www.tizag.com/htmlT/htmldiv.php)

我认为老实说维基百科证明了一个非常简单的解释。

en.wikipedia.org/wiki/Div_tag

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T04:42:46.730

我认为[W3 的规格](http://www.w3.org/TR/2012/CR-html5-20121217/grouping-content.html#the-div-element)非常平易近人：

> div 元素根本没有特殊含义。它代表它的孩子。它可以与 class、lang 和 title 属性一起使用，以标记一组连续元素共有的语义。
> 
> *注意：强烈建议作者将 div 元素视为不得已的元素，因为当没有其他元素适合时。使用更合适的元素而不是 div 元素可以提高读者的可访问性和作者的可维护性。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T04:44:32.087

这是一个桶。你几乎可以把任何你想要的东西放进去。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-25T13:32:12.680

你说你已经解释了`<body>`标签。标签类似，`<div>`仅适用于`<body>`. 您可以使用它来创建一个部门 - 正如标签名称所说。

```
<body title="document">
  <h2 title="headline">Headline</h2>
  <div title="first-division">
    <p>
      First Paragraph...
    </p>
    <p>
      Second Paragraph...
    </p>
    <p>
      Third Paragraph...
    </p>
  </div>
  <hr />
  <address>+18 27 16 55 83 22 12</address>
</body> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-25T03:13:14.727

**我对 div 标签的定义：**用于组织、易于访问和易于样式化 (CSS) 的内容分离。

只是告诉他它基本上用作其余代码的除法（**div** -ision）。正如 Waleed Khan 在上面的评论中所说，如果他了解 CSS，他会更好地理解 CSS，因为在样式设计中经常使用。

正如你所说，这很难解释。您只需学习如何使用它。我会：

*   向他展示一些示例，说明它如何使造型更容易。
*   使用标签向他展示一个正常运行的网页。
*   让他自己尝试做一些事情，并向他展示标签通常是如何在彼此内部构建的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-25T07:06:42.887

`<div>`和标签及其内部的`</div>`标签组成一个组，通过换行与其他组分隔。该组可能有自己的名称或 ID，以便在其上应用一些样式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-25T08:15:06.883

`<div>`标签开始一个`div`元素。*

# delphi - Delphi - 维护对对象的自引用

> ID：14027244
> 
> 赞同：1
> 
> 时间：2012-12-25T02:40:49.217
> 
> 标签：delphi, pointers, self

我查看了许多处理对象中“Self”变量的问题和资源，但每个人都说不同的话。

例如，在这个问题中：[Delphi Self-Pointer usage](https://stackoverflow.com/questions/3824136/delphi-self-pointer-usage)

该问题的最高评分答案似乎是错误的。Pointer(Self) 不指向包含它的对象，并且不能用于从对象内部传递引用。

我试过这样做：

```
Type
  myobject = class
    PSelf: Pointer;
  End;

Var
  Obj: myobject;

Procedure RunProgram;
Begin
  Obj := myobject.create;
  Obj.PSelf := @Obj;

  //Run the rest of the program
  .
  .
  . 
```

在大多数情况下，这工作得很好。

我的问题是：这是一个好的编码习惯吗？是否可以期望“PSelf”变量在程序执行期间指向对象？

我最近遇到了一个错误，其中“PSelf”停止指向它包含的对象，我想知道对象是否会在堆中随机播放，或者内存是否已损坏。

编辑：

在某些情况下，使用“Self”变量对我不起作用，现在我无法复制它。所以这整个问题毫无意义，就像我使用“PSelf”变量的技术一样。对于那个很抱歉。

正如肯指出的那样，上面的链接有一个正确的答案:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T03:20:44.943

我认为您误解了`Self`Delphi 中的对象引用是什么以及对象引用的工作方式。

包含类实例的变量已经是指向该对象实例的指针。为了方便起见，Delphi 编译器只允许您省略取消引用运算符 ( `^`)。

```
var
  MyObject: TMyObject;  
begin
  MyObject := TMyObject.Create;  // MyObject is now a pointer to an instance of TMyObject
  ... 
```

Delphi 还允许在访问对象实例的成员或属性时不使用取消引用运算符的简写。同样，以下代码实际上是等效的：

```
MyObj.SomeProperty := SomeValue;
MyObj^.SomeProperty := SomeValue; 
```

从[德尔福文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Classes_and_Objects#Class_Types)：

> 类类型的变量实际上是一个引用对象的指针。因此，不止一个变量可以引用同一个对象。像其他指针一样，类类型变量可以保存值 nil。但是您不必显式取消引用类类型变量来访问它指向的对象。例如， SomeObject.Size := 100 将值 100 分配给 SomeObject 引用的对象的 Size 属性；你不会把它写成 SomeObject^.Size := 100。

`Self`是一个自动声明的属性，指向对象的当前实例。换句话说，它在实现该类的代码中自动可用，以引用对象的当前实例。这允许您拥有同一对象的多个实例：

```
type
  TMyObject=class(TObject)
  private
    FMyInteger: Integer;
    function GetMyInteger: Integer;
    procedure SetMyInteger(Value: Integer);
  published
    property MyInteger: Integer read GetMyInteger write SetMyInteger;
  end;

...
function TMyObject.GetMyInteger: Integer;
begin
  Result := Self.FMyInteger; 

  // Self is implied, so the above line can more simply be written as
  // Result := FMyInteger;
end;

procedure TMyObject.SetMyInteger(Value: Integer);
begin
  if (Value <> Self.FMyInteger) then  // Self is again implied here
    Self.FMyInteger := Value;
end;

var
 MyObjOne, MyObjTwo: TMyObject;
 i, j: Integer;
begin
  MyObjOne := TMyObject;
  // Here, the code inside TMyObject.SetInteger that
  // uses `Self` would refer to `MyObjOne`
  MyObjOne.MyInteger := 1; 

  MyObjTwo := TMyObject;
  // Here, the code in TMyObject.SetInteger would be
  // using the memory in `MyObjTwo` when using `Self`
  MyObjTwo.MyInteger := 2; 
end; 
```

请注意，`Self`仅*在实现类的代码中*有效。`TMyObject.GetMyInteger`它在及以上（我的示例中唯一实现的代码）中可用且有效`TMyObject.SetMyInteger`，并且始终引用当前实例。

无需跟踪 的地址`Self`，因为引用该对象实例的变量位于该对象实例*的方法* `Self`内部。它仅在该对象的实例内有效，并且*始终*引用该对象实例。因此，在您的代码示例中，`PSelf`只是浪费了空间-`myobject`已经包含一个指向自身的指针，并且该指针在以下方法中自动可用`myobject`：

```
type
  myobject = class;   // Now automatically contains a `Self` pointer
                      // available in methods of the class once an
                      // instance is created

var
  myobj: myobject;
begin
  myobj := myobject.Create;  // myobj.Self now is valid in methods of
                             // `myobject` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:13:20.363

这是我对问题的解决方案。我仍然想知道为什么第二个示例不起作用。

这有效（但这样做的方法是错误的）：

```
Type
  myobject1 = class(TObject)
    PSelf: Pointer;
    Number: Integer;
    Function GiveReference: Pointer;
  End;
  pmyobject1: ^myobject1;

  myobject2 = class(TObject)
    p: pmyobject1;
  End;

Var
  Obj1: myobject1;
  Obj2: myobject2;

Function  myobject1.GiveReference: Pointer;
Begin
  Result := PSelf;
End;

Procedure RunProgram;
Var
  i: Integer;
Begin
  Obj1 := myobject1.create;
  Obj1.PSelf := @Obj1;

  Obj2 := myobject2.create;
  Obj2.P := Obj.GiveReference;

  //to access 'number', this works
  i := Obj2.P^.Number;

  //Run the rest of the program
  .
  .
  . 
```

这不起作用，但在我的脑海中是完全一样的。这就是导致我不信任“自我”变量的原因（尽管是的，我正在创建一个指向指针的指针）。

```
Type
  myobject1 = class(TObject)
    Number: Integer;
    Function GiveReference: Pointer;
  End;
  pmyobject1: ^myobject1;

  myobject2 = class(TObject)
    p: pmyobject1;
  End;

Var
  Obj1: myobject1;
  Obj2: myobject2;

Function  myobject1.GiveReference: Pointer;
Begin
  Result := @Self;
End;

Procedure RunProgram;
Var
  i: Integer;
Begin
  Obj1 := myobject1.create;

  Obj2 := myobject2.create;
  Obj2.P := Obj.GiveReference;

  //This will fail, some of the time, but not all of the time.
  //The pointer was valid while 'GiveReference' was being called, but
  //afterwards, it is not valid.
  i := Obj2.P^.Number;

  //Run the rest of the program
  .
  .
  . 
```

最后，这就是我应该一直做的事情：

```
Type
  myobject1 = class(TObject)
    Number: Integer;
    Function GiveReference: Pointer;
  End;

  myobject2 = class(TObject)
    p: myobject1;
  End;

Var
  Obj1: myobject1;
  Obj2: myobject2;

Function  myobject1.GiveReference: Pointer;
Begin
  Result := Self;
End;

Procedure RunProgram;
Var
  i: Integer;
Begin
  Obj1 := myobject1.create;

  Obj2 := myobject2.create;
  Obj2.P := Obj.GiveReference;

  //No problems with this, although I would generally check if P was assigned prior to
  //reading from it.
  i := Obj2.P.Number;

  //Run the rest of the program
  Obj1.Free;
  Obj2.P := nil; 
```

我一开始没有这样做，因为我担心如果不使用指针，我实际上可能会复制整个对象。

# python - Django 中的应用程序和项目

> ID：14027245
> 
> 赞同：0
> 
> 时间：2012-12-25T02:40:58.733
> 
> 标签：python, mysql, django

我正在关注 The Django Book 2.0 来学习 Django，在那里，我们创建了一个名为`mysite`. 之后，我们创建了一个`books`使用数据库调用的应用程序。我知道我们可以在同一个项目下创建多个应用程序。

但是，我们只能在 中指定一个数据库`mysite/settings.py`，我相信项目下的所有应用都会使用该数据库，因为`books/`.

如何创建多个使用不同数据库的应用程序？

最后，在同一个项目下使用多个应用程序，同时使用不在应用程序上的静态页面有哪些用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:44:45.910

查看有关多个数据库的[django 文档。](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)实际上，您可以在 DATABASES 设置中使用不同名称列出任意数量的数据库。

具体检查[路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#using-routers)部分。您可以在每个应用程序中设置路由器，引导您的模型使用某个数据库。

至于使用不在应用程序上的静态页面时多个应用程序的用例，我不太确定您在问什么。如果您谈论的是静态网页，则可以使用[flatpages](https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/)。它是一个可选的 django 应用程序，允许您将 HTML 存储在数据库中，以便管理员进行编辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T03:50:51.167

在 Django 中，您可以像这样定义多个数据库：

在你的 settings.py

```
DATABASES = {
    'default': {
        'NAME': 'app_data',
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'USER': 'postgres_user',
        'PASSWORD': 's3krit'
    },
    'users': {
        'NAME': 'user_data',
        'ENGINE': 'django.db.backends.mysql',
        'USER': 'mysql_user',
        'PASSWORD': 'priv4te'
    }
} 
```

在这里，我定义了 2 个数据库一个默认值和一个用户，要了解有关如何同步或使用这些数据库的更多信息，请[点击此链接](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)

# ios - MPMoviePlayerController：流 https URL 失败

> ID：14027251
> 
> 赞同：0
> 
> 时间：2012-12-25T02:42:24.400
> 
> 标签：ios, stream, mpmovieplayercontroller

我搜索了所有类似的问题，但无能为力。这是关于`https://172.16.58.100:8443/test02.mp4`使用 MPMoviePlayerController 的流式 URL。

* * *

我使用 MPMoviePlayerController 流式传输视频并在我的应用程序中播放。像这样的 URL`http://172.16.58.100:8080/test.mp4`没问题， MPMoviePlayerController 工作正常。

但是像`https://172.16.58.100:8443/test02.mp4`MPMoviePlayerController 这样的 URL 不起作用，它会返回`MPMovieFinishReasonPlaybackError`。我知道这意味着 videoPlayer 初始化失败并导致`MPMoviePlayerPlaybackDidFinishNotification`. 我不知道该怎么做。

**我也试过这个：**

```
NSURLCredential *credental = [[NSURLCredential alloc]initWithUser:@"tomcat"
                                                         password:@"123456"
                                                      persistence:NSURLCredentialPersistenceForSession];
NSURLProtectionSpace *protectSpace = [[NSURLProtectionSpace alloc]initWithHost:@"172.16.58.100"
                                                                          port:8443
                                                                      protocol:@"http"
                                                                         realm:nil
                                                          authenticationMethod:NSURLAuthenticationMethodDefault];
[[NSURLCredentialStorage sharedCredentialStorage]setDefaultCredential:credental forProtectionSpace:protectSpace];

NSURL *fileURL = [NSURL URLWithString:@"https://172.16.58.100:8443/test.mp4"];
[self.moviePlayer playMovieFile:fileURL]; 
```

但它仍然显示相同的错误（初始化失败并输入 MPMoviePlayerPlaybackDidFinishNotification）

==============================

我的意思是我只想知道 MPMoviePlayerController 如何流式传输 URL，例如“https://xxx.xxx.xx.mp4”。

有什么建议吗？圣诞节快乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:38:28.213

也许我在服务器配置上犯了一个错误；现在更改为 webDav，流式传输 http&https 工作正常。

# html - HTML 停靠到底部

> ID：14027257
> 
> 赞同：3
> 
> 时间：2012-12-25T02:43:33.933
> 
> 标签：html, css, alignment, vertical-alignment, dock

我有以下 HTML：

```
<div class="gallery-item">
  <a href="ddd.pdf" style="display:block; width: 100%;">
    <span id="filename_1" style="white-space: nowrap;">Hello</span>
  </a>
  <div id="commands">
    <input type="text" readonly="readonly" value="https://blob">
    <a href="sdfasdfasdfasdf">Delete</a>
  </div>
</div> 
```

CSS：

```
.gallery-item {
  border: 1px #AAA solid;
  display: inline-block;
  margin: 2px;
  padding 2px;
  width: 130px;
  height: 90px;
  text-align: center;
  border-radius: 5px;
  vertical-align: middle;
}    
  .gallery-item #commands {
    line-height: 4px;
    padding-bottom: 1px;
    vertical-align: bottom;
    bottom: 1px;
  } 
```

我想将div 与分类 div`commands`的底部对齐。`gallery-item`以上都不起作用，`commands`坚持前面的元素：

![在此处输入图像描述](../Images/2ac79768952073d96eae515e27f94e0b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T02:45:07.210

添加`position: relative`到父级。

```
.gallery-item {
    position: relative;
}

.gallery-item #commands {
    position: absolute;
    bottom: 1px;
} 
```

使用`position`ing 时，需要明确指定。

# java - 具有无界通配符的Java泛型？

> ID：14027258
> 
> 赞同：2
> 
> 时间：2012-12-25T02:43:41.647
> 
> 标签：java, generics, map, wildcard

我有一个将对象转换为字符串的接口：

```
public interface Converter<T> {
    String asString(T object);
} 
```

以及存储所有可用转换器的地图：

```
Map<Class<?>, Converter<?>> converterMap; 
```

现在我有一个异构数据列表，可以像这样转换：

```
List<?> data = fetchData();
List<String> stringData = new ArrayList<>(data.size());
for (Object datum : data) {
    stringData.add(convertrMap.get(datum.getClass()).asString(datum));
} 
```

但是这段代码不能编译：

```
error: method asString in interface Converter<T> cannot be applied to given types;
            stringData.add(converterMap.get(datum.getClass()).asString(datum));
  required: CAP#1
  found: Object
  reason: actual argument Object cannot be converted to CAP#1 by method invocation conversion
  where T is a type-variable:
    T extends Object declared in interface Converter
  where CAP#1 is a fresh type-variable:
    CAP#1 extends Object from capture of ? 
```

我应该如何更改代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:02:04.947

您面临称为[通配符捕获](http://docs.oracle.com/javase/tutorial/java/generics/capture.html)的问题。Java 无法识别将从`List<?>`数据中接收的类型。尝试以两种方式中的任何一种重构您的代码

**方法1：**改变你的界面如下

```
interface Converter {
    String asString(Object object);
} 
```

**方法二：**通过类型推断捕获通配符的辅助方法

创建一个辅助方法，如下所示，

```
// Helper method created so that the wildcard can be captured
// through type inference.
private <T> void helper(List<T> data) {
    Map<Class<?>, Converter<T>> converterMap = null;
    List<String> stringData = null;

    for (T datum : data) {
        stringData.add(converterMap.get(datum.getClass()).asString(datum));
    }
} 
```

如下调用此辅助方法

```
List<?> data = fetchData();
helper(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:28:14.763

首先，您应该将映射封装在这样的辅助类中，其操作保留不变量（`Class<T>`映射到`Converter<T>`）：

```
public class ConverterMap {
    Map<Class<?>, Converter<?>> converterMap = new HashMap<Class<?>, Converter<?>>();
    public <T> void addConverter(Class<T> clazz, Converter<T> converter) {
        converterMap.put(clazz, converter);
    }
    @SuppressWarnings("unchecked")
    public <T> Converter<T> getConverter(Class<T> clazz) {
        return (Converter<T>)converterMap.get(clazz);
    }
} 
```

现在，为了分解任务，让我们迈出一小步，编写一个函数，该函数接受任何对象并根据转换器映射对其进行转换（假设对象的类在转换器映射中）：

```
ConverterMap cm = new ConverterMap;
private static String convert(Object x); 
```

这看起来很简单，但比看起来更难，因为您将遇到 Java 类型系统的一个特殊情况，它是如何键入的`.getClass()`。您将遇到说服编译器`x`是参数实例的问题`x.getClass()`。解决此问题的最佳方法是：

```
@SuppressWarnings("unchecked")
private static <T> String convert2(Class<T> clazz, Object x) {
    return cm.getConverter(clazz).asString((T)x);
    // you can alternately do clazz.cast(x) instead of the unchecked cast (T)x
}
private static String convert(Object x) {
    return convert2(x.getClass(), x);
} 
```

然后你可以解决剩下的问题：

```
for (Object datum : data) {
    stringData.add(convert(datum));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:03:11.113

您应该像这样更改代码：

```
public interface Converter {
    String asString(Object object);
} 
```

我认为它会起作用。

# lua - Lua 布尔复合或

> ID：14027260
> 
> 赞同：1
> 
> 时间：2012-12-25T02:44:04.053
> 
> 标签：lua, boolean, runtime-error, comparison-operators

我刚刚开始使用基本的 Lua 解释器，我遇到了这个问题：

```
a = tonumber(a)
b = tonumber(b)
if a < 1 or b < 1 or a > x or b > x then
    ...
end 
```

我收到一条错误消息：

```
Attempt to compare number with string expected, got number 
```

我是新手。该语句应该如何用 Lua 编写？

编辑： x 设置为输入参数之一。我很肯定它是一个数字，而不是一个字符串；在前面的语句中，我将它用作 for 循环中的最大值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:27:09.313

> x 被设置为输入参数之一。我很肯定它是一个数字，而不是一个字符串；在前面的语句中，我将它用作 for 循环中的最大值。

输入参数 (from `arg`) 始终是字符串，将在 for 循环中强制转换为数字：

```
for i = 1, "4" do print(i) end
-- 1
-- 2
-- 3
-- 4 
```

但是，在这种情况下，您似乎需要使用`tonumber()`.

# google-maps-api-3 - 谷歌地图 api v3 路线改变目的地与已知道路本身

> ID：14027262
> 
> 赞同：0
> 
> 时间：2012-12-25T02:44:39.157
> 
> 标签：google-maps-api-3, routes

如何防止directionsService.route 将我的目的地（格式为纬度经度）更改为最近的已知地址？这很奇怪，因为在 api 绘制的路线中，从我想要的道路经过一条未知的道路，然后绕了一圈停到一个已知的地址。当我在谷歌地图页面上尝试同样的事情时，它会停在我想要的地方，当我在信息窗口中选择“搜索附近”选项时，它会在同一个位置（地址）上放置一个标记。我这样做是为了行车路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:55:16.323

您正在将一个字符串传递给方向服务（它包含坐标，但处理方式与[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)不同）。如果要传入坐标，则需要传入 google.maps.LatLng 对象，而不是字符串：

改变：

```
var request = {
    origin: "37.962200, 23.615602",
    destination: "37.968468, 23.766233",
    travelMode: google.maps.TravelMode.DRIVING
}; 
```

至：

```
var request = {
    origin: new google.maps.LatLng(37.962200, 23.615602),
    destination: new google.maps.LatLng(37.968468, 23.766233),
    travelMode: google.maps.TravelMode.DRIVING
}; 
```

[修改过的jsfiddle](http://jsfiddle.net/4HEtX/2/)

[v3 路线呼叫使用谷歌地图中的地址](http://www.geocodezip.com/v3_example_geo2.asp?addr1=%2837.968468,%2023.766233%29&addr2=Keratsini,%20Pireas&geocode=1&geocode=2)

# jquery-ui - ui-helper-hidden-accessible 在无序列表中的目的是什么？

> ID：14027263
> 
> 赞同：9
> 
> 时间：2012-12-25T02:44:41.450
> 
> 标签：jquery-ui, html-lists, accessibility

从类名和 jQuery UI CSS 源代码来看，`ui-helper-hidden-accessible`类似乎是一种隐藏元素同时仍使其可访问的方式。

我不明白它在这种特殊情况下的用途。我尝试搜索 SO 和 Google 寻找使用此类的原因，但没有找到我的答案。

[这是此 UI 多选小部件](https://github.com/michael/multiselect)生成的 HTML 的摘录：

```
<div style="width: 176px;" class="ui-multiselect ui-helper-clearfix ui-widget">
<div style="width: 105px;" class="selected">
    <div class="actions ui-widget-header ui-helper-clearfix">
        <span class="count">0 items selected</span><a href="#" class="remove-all">Remove all</a>
    </div>
    <ul style="height: 270px;" class="selected connected-list ui-sortable">
        <li class="ui-helper-hidden-accessible"></li>
    </ul>
</div>
<div style="width: 69px;" class="available right-column">
    <div class="actions ui-widget-header ui-helper-clearfix">
        <input class="search empty ui-widget-content ui-corner-all" type="text"><a href="#" class="add-all">Add all</a>
    </div>
    <ul style="height: 279px;" class="available connected-list">
        <li class="ui-helper-hidden-accessible"></li>
        <li style="display: block;" class="ui-state-default ui-element ui-draggable" title="3D Animation"><span class="ui-helper-hidden"></span>3D Animation<a href="#" class="action"><span class="ui-corner-all ui-icon ui-icon-plus"></span></a></li>
        <li style="display: block;" class="ui-state-default ui-element ui-draggable" title="Accreditation"><span class="ui-helper-hidden"></span>Accreditation<a href="#" class="action"><span class="ui-corner-all ui-icon ui-icon-plus"></span></a></li>
    </ul>
</div> 
```

我正在使用这个小部件并想要进行一些更改。当我这样做时，我正在清理代码并删除不必要的位。我看不到以下代码行的目的。

```
<li class="ui-helper-hidden-accessible"></li> 
```

我尝试删除有`li`问题的内容，但看不出它有什么不同，但我不能声称对可访问性了解很多。

注意：我是 GitHub 的新手，不确定适当的礼仪。但由于原作者不再维护小部件，我认为直接联系他并不合适。

那么这行代码是否用于我没有考虑过的特定目的，或者可以删除它吗？

**编辑：**我只是有另一个想法。也许隐藏的目的`li`是创建有效的 HTML，因为空`ul`对 HTML 4.01 和 XHTML 无效。但这仅对验证者有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T15:48:06.677

有时我使用`.ui-helper-hidden-accessible`类来自动聚焦某些隐藏元素。

例如，如果您显示一个 jquery ui 对话框，并且如果第一个元素是一个带有 jquery ui datetimepicker 的文本框，则当对话框出现时，datepicker 日历也会触发并显示给用户。在这样的场景中，我`.ui-helper-hidden-accessible`在文本框之前放置了一个元素并使其成为初始焦点。

您的情况也可能存在焦点问题。我没有检查代码。

# javascript - scrollTop = 类上的滚动高度而不是 id

> ID：14027265
> 
> 赞同：0
> 
> 时间：2012-12-25T02:45:14.683
> 
> 标签：javascript, ajax

好的，这就是我想要使用的

`$(".shouts").scrollTop = $(".shouts").scrollHeight;`

我认为在使用类而不是 id 时这是正确的，但这不起作用，我认为这是因为它上面的代码是

```
function refreshShouts() {
    var refreshRate = 5000; // time in milliseconds
    var cacheBuster = (new Date).getTime();
    $.ajax({
        type: "POST",
        dataType: "xml",
        url: "php/getShouts.php",
        data: {op: 'tick', time: cacheBuster},
        error: function() { alert('An error occured! Try again.'); },
        success: function(xml){
            if($('shout', xml).size() > 0) {
                $('shout', xml).each(function(id){
                    var nickname = $('nickname', this).text();
                    var message = $('message', this).text();
                    var date = $('date', this).text();
                    var cssClass = 'shoutRow1';
                    if((id%2)/10 == 0)
                        cssClass = 'shoutRow';
                    var shoutRow = '<div id="'+cssClass+'"><span id="nickname">'+nickname+' <span id="date">('+date+')</span>: </span><span id="shoutedMessage">'+message+'</span></div>';
                    if(id == 0)
                        $('#shoutsContainer').empty().removeClass().addClass('shouts').html(shoutRow);
                    else
                        $('#shoutsContainer').removeClass().addClass('shouts').append(shoutRow);
                });
            } else {
                $('#shoutStatus').empty().addClass('shoutError').html($('error', xml).text());
                $('#shoutsContainer').empty().removeClass().addClass('noShouts').html('Shouts will be displayed here!');
            }
            $(".shouts").scrollTop = $(".shouts").scrollHeight;
        }
    });
    setTimeout('refreshShouts()', refreshRate);
} 
```

也许是因为它创建了它，我不确定.. 通常我为此使用 div id 而不是类，但我希望让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:50:25.753

It works with IDs because there's only one. But with classes, how does it know which one is which?

Try this:

```
$(".shouts").each(function() {this.scrollTop = this.scrollHeight;}); 
```

# java - 用户登录后如何重定向到目标页面

> ID：14027268
> 
> 赞同：0
> 
> 时间：2012-12-25T02:46:25.417
> 
> 标签：java, spring, servlets, redirect, web

假设我们在发送给用户的电子邮件中有一个指向目标页面（不是登录页面）的链接。用户登录后如何重定向到目标页面？春天在后端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:46:19.333

> *我们正在使用本土认证*

当您在继续请求之前检查时（在本地身份验证的情况下，通常在[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)中执行），您可以只使用`HttpServletRequest#getRequestURI()`获取当前请求 URI。

```
String requestedURI = request.getRequestURI(); 
```

您只需在会话范围内或登录表单的隐藏输入字段中记住这一点。登录成功后，您只需重定向到它。

```
response.sendRedirect(requestedURI); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T04:22:17.587

要为 BalusC 的答案添加细节，即使您使用的是本土解决方案，我强烈建议您阅读 Spring Security 对[“Web 应用程序中的身份验证”](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/technical-overview.html#tech-intro-web-authentication)的描述。它很短，本质上是对您问题的直接回答，并提供了一些有关如何实施的提示。如果您想更深入地挖掘，您可以跳到[Javadocs](http://static.springsource.org/spring-security/site/docs/3.2.x/apidocs/index.html)，甚至深入研究[源代码](https://github.com/SpringSource/spring-security)，看看他们是如何做到的。这是一个非常优雅和灵活的解决方案，从项目中借用一些想法甚至是一些代码也没有什么坏处。

# c# - 显示月历模型并与用户交互的更好方法

> ID：14027269
> 
> 赞同：5
> 
> 时间：2012-12-25T02:46:51.123
> 
> 标签：c#, javascript, ajax, asp.net-mvc, asp.net-mvc-3

我解决了我的任务，但我不喜欢它的工作方式。对我来说它看起来太重了。如果你能建议我一个更好的方法来做同样的事情，那就太棒了！

所以这是我的痛苦:) 我在 SQL DB 中有一个表，其中包含带有业务数据的图表，它们是由单独的部门开发的，并且它们是随机添加的（至少从我的角度来看）。年份范围是 1995-2012(3)，但这两个日期都应该是灵活的，因为每个下个月都会出现新数据，并且他们会尝试添加更多过去的数据。

现在看起来像这样： ![可选日历月年](../Images/0897dd7a6969a14004dd9ae3f6cce89c.png)

为了实现这个目标，我创建了这个模型：

```
using System;
using System.Collections.Generic;

namespace MvcApplication1.Models
{
    [Serializable]
    public class MonthlyModel
    {
        public int TypeId { get; set; }
        public List<YearDTO> Items { get; set; }
    }

    [Serializable]
    public class YearDTO
    {
        public DateTime Year { get; set; }
        public MonthDTO January { get; set; }
        public MonthDTO February { get; set; }
        public MonthDTO March { get; set; }
        public MonthDTO April { get; set; }
        public MonthDTO May { get; set; }
        public MonthDTO June { get; set; }
        public MonthDTO July { get; set; }
        public MonthDTO August { get; set; }
        public MonthDTO September { get; set; }
        public MonthDTO October { get; set; }
        public MonthDTO November { get; set; }
        public MonthDTO December { get; set; }
    }
    [Serializable]
    public class MonthDTO
    {
        public DateTime start { get; set; }
        public DateTime end { get; set; }
        public int priceTypeId { get; set; }
        public bool IsEnabled { get; set; }
        public bool IsSelected { get; set; }
    }

} 
```

这里是控制器，它包含 GetMethod 以显示如上所示的 View 和 Post 方法以获取此 Model 解析它并创建带有图表的另一个 View。

```
 using System;
    using System.Collections.Generic;
    using System.Web.Mvc;
    using MvcApplication1.Models;

    namespace MvcApplication1.Controllers
    {

        public class HistoricalController : Controller
        {
            [HttpGet]
            public ActionResult Monthly()
            {
                int typeId = -1;
                try
                {
                    typeId = Convert.ToInt32(RouteData.Values["id"]);
                }
                catch (Exception)
                {

                }
                MonthlyModel mm;
                if (Session[String.Format("MonthlySelect{0}", typeId)] != null)
                {
                    mm = (MonthlyModel)Session[String.Format("MonthlySelect{0}", typeId)];
                }
                else
                {
                    mm = GetMonthlyModel(typeId);
                }
                return View(mm);
            }

            private MonthlyModel GetMonthlyModel(int typeId)
            {
                MonthlyModel mm = new MonthlyModel();
                var list = ChartManager.GetAvailableMonthlyCharts(typeId, 1, 3, new DateTime(1995, 1, 1), DateTime.Today);

                foreach (Tuple<DateTime, DateTime, bool, int> val in list)
                {
                    var start = val.Item1;
                    var end = val.Item2;
                    var exists = val.Item3;
                    var pti = val.Item4;

                    var items = mm.Items ?? (mm.Items = new List<YearDTO>());
                    int idx = items.FindIndex(f => f.Year.Year == start.Year);
                    if (idx == -1)
                    {
                        items.Add(new YearDTO { Year = new DateTime(start.Year, 1, 1) });
                        idx = items.FindIndex(f => f.Year.Year == start.Year);
                    }
                    switch (start.Month)
                    {
                        case 1:
                            items[idx].January = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 2:
                            items[idx].February = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 3:
                            items[idx].March = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 4:
                            items[idx].April = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 5:
                            items[idx].May = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 6:
                            items[idx].June = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 7:
                            items[idx].July = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 8:
                            items[idx].August = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 9:
                            items[idx].September = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 10:
                            items[idx].October = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 11:
                            items[idx].November = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                        case 12:
                            items[idx].December = new MonthDTO { start = start, end = end, priceTypeId = pti, IsEnabled = exists, IsSelected = false };
                            break;
                    }
                }

                mm.metalId = typeId;
                return mm;
            }

            [HttpPost]
            public ActionResult MonthlyCharts(MonthlyModel model)
            {
                List<ChartDTO> list = new List<ChartDTO>();

                foreach (YearDTO dto in model.Items)
                {
                    var val = dto.January;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.February;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.March;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.April;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.May;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.June;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.July;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.August;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.September;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.October;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.November;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                    val = dto.December;
                    if (val.IsSelected) list.Add(ChartManager.GetChart(val.start, val.end, model.metalId, 1, val.priceTypeId));
                }
                Session[String.Format("MonthlySelect{0}", model.metalId)] = model;
                ModelState.Clear();
                return View(list);
            }
        }
    } 
```

最后一部分实际上是一个 View 来表示这个复选框字段：

```
 @model MvcApplication1.Models.MonthlyModel

    @{
        ViewBag.Title = "Monthly charts ";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <h2>@(ViewBag.Title)</h2>

    <div id="choice-container">
       @using (Html.BeginForm("MonthlyCharts", "Historical", FormMethod.Post))
    {
        @Html.TextBox("metalId", Model.metalId, new { @type = "hidden" })
        <table>
            <tr>
                <th> Year</th>
                <th> January</th>
                <th> February</th>
                <th> March</th>
                <th> April</th>
                <th> May</th>
                <th> June</th>
                <th> July</th>
                <th> August</th>
                <th> September</th>
                <th> October</th>
                <th> November</th>
                <th> December</th>
                <th> </th>
            </tr>
            @for (int i = 0; i < Model.Items.Count(); i++)
            {
                <tr>
                    <td>
                        @Html.Label("Items[" + i + "].Year", Model.Items[i].Year.ToString(@"yyyy"))
                        @Html.TextBox("Items[" + i + "].Year", Model.Items[i].Year, new { @type = "hidden" })
                    </td>
                    <td>
                        <div align=center class="editor-field">
                            @if (Model.Items[i].January.IsEnabled)
                            {
                                @Html.CheckBox("Items[" + i + "].January.IsSelected", Model.Items[i].January.IsSelected, new { @class = "chk" })
                            }
                            else
                            {
                                @Html.CheckBox("Items[" + i + "].January.IsSelected", Model.Items[i].January.IsSelected, new { @disabled = "disabled" })
                            }
                            @Html.TextBox("Items[" + i + "].January.IsEnabled", Model.Items[i].January.IsEnabled, new { @type = "hidden" })
                            @Html.TextBox("Items[" + i + "].January.start", Model.Items[i].January.start, new { @type = "hidden" })
                            @Html.TextBox("Items[" + i + "].January.end", Model.Items[i].January.end, new { @type = "hidden" })
                            @Html.TextBox("Items[" + i + "].January.priceTypeId", Model.Items[i].January.priceTypeId, new { @type = "hidden" })
                        </div>
                    </td>
                    @*
                      .... 11 times ....
                      *@
                </tr>
            }

        </table>

    <input type="submit" class="button" value="Get the image"/>
    }
    </div> 
```

因此，如果我们有图表，用户只能选择一年中的几个月。未来的年份范围可能会发生变化。我们必须在单独的页面上显示图表。如果用户决定再选择几个月，我们必须记住模型（我将其保留在会话中）。

所以我不喜欢这个解决方案： 1\. 模型很重，难以使用，难以创建和解析。添加新参数并不容易。2\. View 包含很多隐藏字段，因为模型 3\. Controller 除了创建和解析模型之外都没有问题。

我对网络开发很陌生，但我不是软件开发的新手，如果可能的话，我希望它看起来更好。

我真的觉得我在这里错过了一些东西。感谢您的想法、建议和任何可以简化此代码的内容。谢谢！

**更新：**

我想澄清为什么我使用这么多参数。我不能只使用一个日期时间，因为每个图表都有开始日期时间和结束日期时间（开始和月底）和 TypeId。此外，我需要以某种方式在视图中构建表格并将每个控件放在正确的位置。现在我为此目的使用月份名称。我还需要知道在视图端是否启用了控件（如果用户可以选择它），然后在 POST 方法上我需要知道选择了哪一个，所以我有 bool IsEnabled { get; 放; } 和 bool IsSelected { 获取；放; } 和其他参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:31:01.557

您可以通过不指定每个月份来简化很多事情。`DateTime`对象可以解决这个问题。如果没有必要，不要重复自己

然后可以简化您的视图以使用一些循环而不是 12 个单独的块。该`th`块也可以通过循环简化并输出月份，如下所示：

```
new DateTime(2010, 8, 1).ToString("MMM", CultureInfo.InvariantCulture); 
```

我不确定您为什么将所有值都放入隐藏字段中，尤其是当回发数据不需要它们时。无论如何，所有这些信息都应该存储在服务器端，因此应该有从数据模型中提取信息的方法。

此外，`Post`处理程序不需要使用完全相同的模型。每个复选框都可以定义为`<input type='checkbox' name='chart' value='2012-01-01' />`. 处理程序会接受类似的`Post`东西`List<string>`，您可以将收到的值转换为`DateTime`'s 并检索您的图表

# asp.net - 在 ASP.NET 中从文本框中设置选择参数

> ID：14027270
> 
> 赞同：0
> 
> 时间：2012-12-25T02:46:52.430
> 
> 标签：asp.net, select, sqldatasource

```
<SelectParameters>
                <asp:ControlParameter ControlID="TextBox1" Name="model"  Type="String" />
            </SelectParameters> 
```

我的程序确实有效，我只是想知道为什么。我有一个 ID 为 TextBox1 的文本框和一个 SqlDataSource，它需要它的值作为查询中的参数。所以我设置了参数的来源，如上图所示。我在文本框附近还有一个按钮，单击它可以设置参数的值。这是为什么？该按钮没有 onclick 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:36:34.650

因为单击按钮会导致回发发生，并且您`SelectCommand`在 SqlDataSource 中的内容会被重新构建，并且如果您在文本框中输入了任何内容，则会将此值附加到查询中。

发生这种情况后，您的数据绑定控件（网格视图、详细信息视图）会刷新显示新值。

这不是魔术，您只需要了解 ASP.NET 是无状态的，每次回发时，页面都会经历[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)并重新创建控件

# xml - XSLT 注释标签不输出内容？

> ID：14027272
> 
> 赞同：3
> 
> 时间：2012-12-25T02:47:18.173
> 
> 标签：xml, xslt

我正在尝试将一些 XML 从一个文档转移到另一个文档，但我希望它在到达那里时被注释掉。所以我想做这样的事情：

```
<xsl:template name="process">
    <figure>
        <xsl:comment>
            <xsl:copy />
        </xsl:comment>
    </figure>
</xsl:template> 
```

当我使用直接的 Java XSLT 处理器运行它时，我得到了以下内容：

```
<figure>
<!--

  -->
  </figure> 
```

奇怪的是，如果我在没有评论对象的情况下运行它，如：

```
<xsl:template name="process">
    <figure>
            <xsl:copy />
    </figure>
</xsl:template> 
```

内容通过就好了。

有任何想法吗？我想也许你不能在评论中使用元素，但我查了一下，应该没问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T03:04:38.897

就在规范（[第 7.4 节，创建评论](http://www.w3.org/TR/xslt#section-Creating-Comments)）中，强调我的：

> **如果实例化 xsl:comment 的内容会创建文本节点以外的节点，则会出错。**XSLT 处理器可能会发出错误信号；如果它没有发出错误信号，它必须通过忽略违规节点及其内容来恢复。

因此，无论您在哪里查找，您的信息都是错误的。它不应该工作。

您必须在评论中创建*看起来像*XML 的文本。根据您使用的 XSLT 处理器，这要么难，要么容易。

例如，Saxon 有一个`serialize()`扩展函数，这使得任务变得微不足道：

```
<xsl:comment>
    <xsl:value-of select="saxon:serialize($node-set, 'default')" />
</xsl:comment> 
```

这需要在 XSLT 中声明 saxon 命名空间：

```
<xsl:stylesheet version="2.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:saxon="http://saxon.sf.net/"
> 
```

# iphone - 通过滚动动画选择器视图移动

> ID：14027273
> 
> 赞同：0
> 
> 时间：2012-12-25T02:47:40.103
> 
> 标签：iphone, ios, xcode, picker

目前，这些是我创建选择器视图的代码

```
genderPicker = [[UIPickerView alloc] 
                initWithFrame:CGRectMake(0, 244, 320, 270)];
genderPicker.delegate = self;
genderPicker.dataSource = self;
genderPicker.tag = 1;
genderPicker.showsSelectionIndicator = TRUE; 
```

这组代码的问题在于，如果屏幕是可滚动的，那么选择器只会停留在那个精确的坐标中，并且在我滚动时不会随着屏幕一起移动。

任何人都可以帮助我为选择器设置动画，所以当我向上/向下滚动时，选择器会跟随吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:18:43.470

添加选择器时，不要将其添加到`self.view`，而是将其添加到`scrollview`.

例如：-

```
[self.scrollview addSubView:genderPicker]; 
```

这里`self.scrollview`代表`scrollview`. 这将确保它与滚动视图一起移动。

# zend-form - How to create separate elements in Zend\Form and set options to them

> ID：14027275
> 
> 赞同：0
> 
> 时间：2012-12-25T02:47:56.957
> 
> 标签：zend-form, zend-framework2

I want to create them as objects and then assign options, smth like:

```
$name = new Zend\Form\Element\Text('name');
$name->setLabel('Your name:');
$name->setRequired(true); // does not work?
$this->add($name); 
```

How it is possible set options like "required" one there, how to set validators? Framework throws exception "No method exists" for setRequired() one.

P.S. I really don't want to use array-style, it's quite annoying when you have tons of code in one array. I mean the following:

```
$this->addElement('text', 'email', array(
        'label'      => 'Your email address:',
        'required'   => true,
        'filters'    => array('StringTrim'),
        'validators' => array(
            'EmailAddress',
        )
    )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:26:34.877

您误解了一件事，默认情况下验证器不是元素的一部分。

如果你想要一个元素本身包含一些验证器。您需要使元素实现 InputProviderInterface 例如

```
use Zend\Form\Element;
use Zend\InputFilter\InputProviderInterface;
class MyElement extends Element implements InputProviderInterface
{
    public function getInputSpecification()
    {
        $spec = array(
            'name' => $this->getName(),
            'required' => true,
            'validators' => array(
                'EmailAddress',
            )
        );

        return $spec;
    }
} 
```

当表单验证开始时，表单的 InputFilter 将从表单元素中收集所有验证器并合并到最后一个。

但是，您也可以通过处理表单 InputFilter 动态添加/删除表单验证器：

```
$form = new \Zend\Form\Form();
$form->add($yourElement);
$filter = $form->getInputFilter();
$filter->remove('email');
$filter->add(array(
    'name' => 'email',
    'required' => true,
    'validators' => array (
        'EmailAddress'
    ),
));
$form->setInputFilter($filter);
$form->setData(array(
    'email' => 'abc',
));
$form->prepare();
echo $form->isValid();
print_r($form->getMessages()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:09:49.683

Zend 表单选项 setRequired true 仅适用于选项验证器。您必须像这样为此元素定义验证规则。

```
$this->review->addValidators(

array('NotEmpty',true, array( 'messages' => array( 'isEmpty' => "Please enter product Review.") ) )

); 
```

# android-sdk-tools - ADB recognize android without root access

> ID：14027276
> 
> 赞同：2
> 
> 时间：2012-12-25T02:48:26.080
> 
> 标签：android-sdk-tools

Why does the following list my Android device:

```
sudo /opt/adt-bundle-linux/sdk/platform-tools/adb start-server
/opt/adt-bundle-linux/sdk/platform-tools/adb devices
sudo /opt/adt-bundle-linux/sdk/platform-tools/adb kill-server

List of devices attached
SH176T501818    device 
```

but the following doesn't list my Android device?:

```
/opt/adt-bundle-linux/sdk/platform-tools/adb start-server
/opt/adt-bundle-linux/sdk/platform-tools/adb devices
/opt/adt-bundle-linux/sdk/platform-tools/adb kill-server

List of devices attached
????????????    no permissions 
```

I shouldn't need to run adb as root, should I? What am I missing here?

```
$ ls -l /etc/udev/rules.d/51-android.rules
-rw-r--r-- 1 root root 67 Dec 24 20:36 /etc/udev/rules.d/51-android.rules
$ cat /etc/udev/rules.d/51-android.rules
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666", GROUP="dev" 
```

UPDATE: On system boot, CentOS 5.8 mentions something about `unknown attribute ATTR{idVendor}` briefly before the boot completes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:56:15.510

这是`.rules`我系统上正在使用的文件：

[https://raw.github.com/M0Rf30/android-udev-rules/master/51-android.rules](https://raw.github.com/M0Rf30/android-udev-rules/master/51-android.rules)

如果 CentOS 也抱怨它的语法，那么也许`.rules`文件不是问题。我不确定为什么你的不起作用。也许您不能将 ATTR{idProduct} 排除在外？

# python - Regex in Python - Using groups

> ID：14027286
> 
> 赞同：6
> 
> 时间：2012-12-25T02:50:37.360
> 
> 标签：python, regex, pattern-matching

I am new to regex, why does this not output 'present'?

```
tale = "It was the best of times, ... far like the present ... of comparison only. "
a = re.compile('p(resent)')
print a.findall(tale)

>>>>['resent'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:01:42.520

try something like this if you're trying to match the exact word `present` here:

```
In [297]: tale="resent present ppresent presentt"

In [298]: re.findall(r"\bpresent\b",tale)
Out[298]: ['present'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:06:34.370

来自[Python 文档](http://docs.python.org/2/library/re.html)

> 如果模式中存在一个或多个组，则返回组列表

如果您希望它仅使用该组进行分组，而不是用于捕获，请使用非捕获组：

```
a = re.compile('p(?:resent)') 
```

对于这个正则表达式，没有意义，但对于更复杂的正则表达式，它可能是合适的，例如：

```
a = re.compile('p(?:resent|eople)') 
```

将匹配 'present' 或 'people'。

# c# - WatiN: Need to find value contained in a div of SSRS report displayed in browser

> ID：14027289
> 
> 赞同：4
> 
> 时间：2012-12-25T02:51:49.457
> 
> 标签：c#, reporting-services, watin

I am using WatiN to launch an SSRS report, which gets displayed on a new browser window.I saw the HTML of the report and found that SSRS arranges it in a table.
I am interested in fetching the values of one TD(s)(which in the example below is 11,202.63):

```
<DIV class="r11">ARSystemBalance </DIV></TD><TD class="a67"><DIV class="r11">: 11,202.63</DIV> 
```

What should be the best method to fetch this value ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:48:51.423

我们在 waitin 中创建测试管理器时也遇到了同样的问题，但是我们通过在任何给定表中查找文本并从那里返回 tr 来解决这个问题，请从我们用 C# 编写的以下代码中获取帮助

TableRow tr = table.TableCell(Find.ByText(regex)).ContainingTableRow; 返回 tr;

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T06:55:04.930

以下代码片段可能会对您有所帮助

TableRow SearchTable(string TableId, string data, int page) { Table table = ie.Table(Find.ById(TableId));

```
 Regex regex = new Regex(data + @".*");

        if (table.TableCell(Find.ByText(regex)).Exists)
        {
            TableRow tr = table.TableCell(Find.ByText(regex)).ContainingTableRow;
            return tr;

        }
        else
        {
            int n = table.Tables[table.Tables.Count - 1].Links.Count;
            if (page < n)
            {
                table.Tables.First().Links[page].Click();
                ie.WaitForComplete();
                System.Threading.Thread.Sleep(5000);
                return (SearchTable(TableId, data, page + 1));
            }
            else
                return null;
        }
    } 
```

# php - PHP 语法错误 - 无法弄清楚

> ID：14027294
> 
> 赞同：3
> 
> 时间：2012-12-25T02:53:55.480
> 
> 标签：php, mysql, syntax

我已经看这个有一段时间了。我如何修复语法？

```
echo("<a class=\"button\" href=\"viewcomment.php?id=".$id."> Comment(".$numberComments;.")</a>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T02:54:47.037

去除多余的`semicolon`

```
echo("<a class=\"button\" href=\"viewcomment.php?id=".$id."> Comment(".$numberComments.")</a>");
                                                                                      ^ here 
```

或者直接，

```
echo("<a class=\"button\" href=\"viewcomment.php?id=$id> Comment($numberComments)</a>"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T02:54:43.060

评论(".$numberComments;.")")

你有一个随机的分号:)

另外，当您不使用大量变量或使用大量双引号时，我建议使用单引号（反之亦然）

像这样：

```
echo "<a href=\"asdf.php\">Wut</a>"; 
```

可以变成

```
echo '<a href="asdf.php">Wut</a>"; 
```

同样，由于 echo 是一种语言结构，而不是函数，因此 PSR 标准建议您不要将其括在括号中。

```
echo("this") 
```

对比

```
echo "that" 
```

不过没什么严重的。

# iphone - 如何更改 TableViewController 的类？

> ID：14027295
> 
> 赞同：3
> 
> 时间：2012-12-25T02:54:12.497
> 
> 标签：iphone, ios, xcode, controller, tableview

我一直在尝试以它的身份更改 TableViewController 的类，但是当我输入要更改为的自定义类的名称时，它会恢复为`UITableViewController`

这就是我所说的：

![在此处输入图像描述](../Images/2db514fb17eadf5de2e5adf1c0a392bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:07:11.293

您要指定的类绝对是 UITableViewController 的子类吗？它包含在目标设置的“构建阶段”中的“编译源”中吗？我们都一直在换班，没有发生任何事故，所以这很奇怪。

如果最坏的情况发生了，请重新启动 Xcode，如果还不行，请重新启动您的 Mac。每当您遇到无法解释的 Xcode 行为时，这就是我们现在必须采取的步骤之一。有时 Xcode 会变得很奇怪。这令人沮丧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T02:58:26.173

还在 Storyboard ID 字段中给出 UITableViewController 名称，然后检查。不管你

每次更改班级名称也在 Storyboard ID 字段中给出相同的名称。

# java - java中的短条件

> ID：14027296
> 
> 赞同：4
> 
> 时间：2012-12-25T02:54:24.220
> 
> 标签：java

我有 4 个`String`变量：a、b、c、d。

我检查其中一个是否是`null`then `return false`。

所以我这样做：

`if(a==null || b ==null || c ==null || d ==null) return false;`

有什么捷径吗？

（我开始学习java）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:04:02.933

如果您的方法如下所示：

```
public boolean foo() {
    String a = "a", b = "b", c = "c", d = "d";
    if(a == null || b == null || c == null || d == null) {
        return false;
    }
    return true;
} 
```

然后有一种方法可以减少代码。你可以这样做：

```
public boolean foo() {
    String a = "a", b = "b", c = "c", d = "d";
    return (a != null || b != null || c != null || d != null);
} 
```

但是，如果您有更多的字符串要测试，比如 10 个，甚至 100 个，则需要更少代码的策略是将字符串放入数组并使用*for-each*循环。事实上，以下方法适用于任何类型的*对象*，而不仅仅是*字符串*。

```
public boolean containsNullObject(Object... objs) {
    // loop through each string
    for(Object o : objs) {
        if(s == null) { return false; } // return false if string is null
    }
    // if there was no instance of a null object, return true
    return true;
} 
```

如果您不知道*数组*或*for-each*循环是什么，请查看以下内容：

*   [数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)
*   [前锋](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T02:56:30.670

不，您的解决方案是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T03:16:37.850

似乎可以使用 foreach 循环和`String` [vararg](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)更优雅地表达这一点。它会读起来更好，并允许您轻松调试您的语句。

```
// method only returns true if all strings are non-null
public boolean all(String... strings) {
    for(String str : strings) {
        if(null == str) {
           return false;
        }
     }
     return true;
 } 
```

然后你会以这种方式调用它：

```
return all(a, b, c, d); // will return false if any of these are null, otherwise true. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T02:57:31.320

**-**您正在使用`Non-Short circuit OR`评估条件，我认为在这种情况下这是最恰当和最简单的。

**-**所以你的解决方案就是它需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T04:31:02.600

`if`这里是多余的，只需使用`return !(a == null || b == null || c == null || d == null);`

# android - How to receive ICS Wi-Fi hotspot enale/disable via broadcastreceiver

> ID：14027298
> 
> 赞同：5
> 
> 时间：2012-12-25T02:54:29.473
> 
> 标签：android, wifi

I would like to know if we can receive information via broadcastreceiver (onReceive) to know that if user enable/disable "Portable Wi-Fi Hotspot" (Settings->Wireless &Networks->Tethering & portable hotspot).

Since I found that I am not able to use android.net.wifi.WifiManager to monitor this at ICE Cream version.

Does anyone can share some hints to me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:01:18.917

您可以使用名为“android.net.wifi.WIFI_AP_STATE_CHANGED”的操作来监控 WiFi-AP 上的状态变化。

[http://androidxref.com/4.0.4/xref/frameworks/base/wifi/java/android/net/wifi/WifiManager.java#132](http://androidxref.com/4.0.4/xref/frameworks/base/wifi/java/android/net/wifi/WifiManager.java#132)

# php - rules to redirect to subdomain

> ID：14027299
> 
> 赞同：11
> 
> 时间：2012-12-25T02:54:38.773
> 
> 标签：php, model-view-controller, subdomain, url-routing

Who defines the URLs to be redirected to the mobile version?

Lets take twitter as an example:

*   `https://twitter.com` -> redirect mobile
*   `https://dev.twitter.com` -> not redirect mobile

In an MVC application who would be responsible for the rule redirects?
Could be all in `www` has redirection to mobile device?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:25:20.993

> [一种方法是使用`.htaccess`或等效工具从服务器重定向（apache 不是唯一的网络服务器）并强制重定向。它已经包含在其他答案中。但是有一种不同的方法。一个实际上会使用 MVC 的方法：***根本不重定向。***]

### MVC设计模式的简要背景

在正确实现的 MVC 中，视图实例将包含所有 UI 逻辑。他们将从模型层获取数据（“如何”构成了 Model2、MVP 和 MVVM 之间的大部分区别），决定从哪些模板组装响应，或者即使响应需要比 HTTP 位置标头更多的东西。

移动版和桌面版之间的差异将包含在视图实例中，由控制器辅助，在正确的 MVC 结构中只会改变模型层和当前视图的状态。它所做的更改应取决于用户输入。

### 全部设置好

以下代码将是`bootstrap.php`or的一部分`init.php`：

```
// the request instance acts like abstraction  for all the user input
$request = new Request;
$request->setUri();

// instantiate the routing mechanism
$router = new Router( new RouteBuilder );
$router->import('/path/to/config.file');

// apply rules from router so that request instance now 
// contains the parsed values from URI
$router->route( $request );

// handling of model layer
$serviceFactory = new ServiceFactory;

// since in MVC the controllers are closely tied to views 
// (1 controller for 1 view), usually it is convenient to use same class names
$resource = $request->getParameter('resource');

// instantiation of view and controller
$class = '\\View\\' . $resource;
$view = new {$class}( $serviceFactory );

$class = '\\Controller\\' . $resource;
$controller = new {$class}( $serviceFactory, $view);

// i find it convenient to have controller's action be made from 
// both REQUEST_METHOD and command name
$action = $request->getMethod() . $request->getParameter('command');

// run it all
$controller->{$action}( $request );
echo $view->render(); 
```

这样，当执行到控制器的动作时，它会提供一个完全准备好的实例`Request`。所述实例决定了用户设备的详细信息，并为读取这些详细信息提供了一个简单的界面。

控制器还可以访问模型层和当前视图，这两者都是通过构造函数注入其中的。

### 决定展示什么。

最直接的方法是让控制器改变当前视图的状态。

```
namespace Conroller;

class SomeThing
{
    public function getUserDetails( $request )
    {
        if ( $request->isFromMobile() )
        {
            $this->view->adjustFor( $request->getDeviceType() );
        }

        $community = $this->serviceFactory->create('Community');
        $community->loadUser( $request->getParameter('id'));
    }
} 
```

在这种情况下，该`adjustFor()`方法通知当前视图实例，它需要使用模板，这些模板适用于某些非默认设备。

这种方法有一个非常重要的缺点：它违反了 SOLID 原则中的[OCP](http://en.wikipedia.org/wiki/Open/closed_principle)（对于懒惰的人：[短版本](http://deviq.com/Media/Default/Article/OpenClosedPrinciple.jpg)），因为如果您决定为现有项目添加移动版本，则必须重写每个控制器方法。

### .. 有一个更好的方法

虽然下面的代码比较容易理解，但还是有一点缺陷：

```
$resource = $request->getParameter('resource');

// instantiation of view and controller
$class = '\\View\\' . $resource;
$view = new {$class}( $serviceFactory ); 
```

即使您只需要同时提供 HTML 和 JSON/XML 响应，它也会开始崩溃。视图开始`IF`在整个代码中累积相同的重复 s。这是一个明确的信号，表明您应该使用[polymorphism](http://www.youtube.com/watch?v=4F72VULWFvc)，而这些行将是使用它的**地方**。

除了上面显示的代码，您可以使用以下代码：

```
$resource = $request->getParameter('resource');

$class = '\\View\\' . $request->getDeviceType . $resource;
$view = new {$class}( $serviceFactory ); 
```

现在，当您拥有移动/桌面应用程序时，您有两个类：`\View\DekstopSomething`和`\View\MobileSomething`. 它们每个都可以有单独的逻辑，并从模型层请求完全不同的数据。

同时，您的其余代码与输出形式完全分离。

## 有什么好处？

几个原因，而不是使用服务器重定向，您应该更好地选择这种方法：

1.  **您的应用程序变得独立于服务器软件**

    并非所有地方都有 Apache（高负载站点通常使用 Nginx 或 Lighttpd），即使您有 Apache，您使用*mod_rewrite*的能力也取决于服务器的配置。

2.  **您网站中所有链接的统一方案**

    无论您使用什么设备，查看某些新闻的链接总是相同的。它使 URL 的共享和书签变得更加容易。

3.  **单点变化**

    这种方法让您最初为桌面用户创建站点，然后添加移动/平板电脑支持，而无需重写任何现有代码。

> [您可能也有兴趣阅读关于MVC 上下文中[**模型层**](https://stackoverflow.com/a/5864000/727208)实现和[**访问控制主题的两篇较早的文章。**](https://stackoverflow.com/a/9685039/727208)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T05:27:37.153

这取决于您要如何检测移动用户。它可以由 Web 服务器使用重写规则来完成。它可以通过 PHP 代码中的用户代理脚本检测到，在这种情况下，它将由控制器完成。这可能会令人困惑，主要是因为有很多选择。谷歌对此有很多细节。

重写前：

```
RewriteCond %{HTTP_USER_AGENT}  ^.*iPhone.*
RewriteRule ^(.*)$         m.site.com/$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:37:38.230

检测移动设备的用户最好交给你的服务器，因为它应该控制所有流量。如果您的代码位于不同的 webroot 中，或者您不需要使用桌面和移动设备向用户显示相同的页面，那么这里有一个 apache 配置可以解决您的问题。请务必访问[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)以获取新版本的移动检测正则表达式。

```
# if already mobile - skip this (usually there are will be another config for mobile)
RewriteCond %{HTTP_HOST} !^mobile\.
# put all sites you don't want to redirect here, or compose a regex that will match sites
RewriteCond %{HTTP_HOST} !(dev.twitter.com) 

# taken from http://detectmobilebrowsers.com/
RewriteCond %{HTTP_USER_AGENT} (android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge\ |maemo|midp|mmp|netfront|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-) [NC]

# rewrite only sites.
RewriteCond %{HTTP_HOST} (\.|)([^\.]+\.[^\.0-9]+)$

#redirect to mobile
RewriteRule ^(.*)$ http://mobile.twitter.com$1 [L,NS] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T05:30:59.003

正如@Supericy 所说，在大多数情况下，前端（视图）负责检测，因为正如其名称所述，它是显示给用户的内容。

例如，如果您使用[移动检测类](https://github.com/serbanghita/Mobile-Detect)，您只需在 index.php 或类似文件的顶部写下，如果您打算使用该`header()`功能。

```
<?php
include 'Mobile_Detect.php';
$detect = new Mobile_Detect();

if ($detect->isMobile()) {
    // Any mobile device. Do stuff
} else {

}

?> 
```

[移动检测类页面https://github.com/serbanghita/Mobile-Detect](https://github.com/serbanghita/Mobile-Detect)上有更多示例。您可以真正了解设备。

还有很多其他方法可以实现这一点，但在我看来这是最简单的。

# database - Why does database can use logical log for undo operation without considering inconsistency

> ID：14027308
> 
> 赞同：4
> 
> 时间：2012-12-25T02:56:04.843
> 
> 标签：database, recovery, undo-redo, aries

For a single database operation, it may affect multiple pages. For example, an insert operation may result in page split. As a result, databases don't use logical log for redo operation because of the inconsistency consideration (A operation affect two pages, only one page is flushed into data when system crashed). They always use physiological log or physical log for redo operation. But in ARIES algorithm or some databases (eg . mysql), they use logical log for undo, which operation may affect multiple pages. Why they can do this? How do they guarantee the rollback correctness when only some pages affected by the undo operation are flushed into the disk and the system crashed again?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-19T21:55:50.317

Aries 也会记录恢复操作，因此恢复期间的崩溃问题（您的最后一个问题）与撤消逻辑日志记录的问题是正交的。一个操作可能影响多个页面的事实本身并不会导致一致性问题。

我认为理论上您也可以将逻辑日志用于重做（原始 Aries 论文中的“重做和撤消操作可以在逻辑上执行”），但物理的最大优点是它是幂等的。UNDO 协议确保一个操作不会被多次执行。

逻辑日志有几个优点（与物理日志相比）：

*   节省空间
*   “能够执行逻辑撤消允许支持更高级别的并发”

# c - “文件范围”和“程序范围”有什么区别

> ID：14027317
> 
> 赞同：22
> 
> 时间：2012-12-25T02:58:54.190
> 
> 标签：c, scope, storage-class-specifier

全局声明的变量被称为具有程序范围
使用静态关键字全局声明的变量被称为具有文件范围。

例如：

```
int x = 0;             // **program scope**   
static int y = 0;      // **file scope**  
static float z = 0.0;  // **file scope** 

int main()  
{  
   int i;   /* block scope */  
   /* .
      .
      .
   */ 
   return 0;  
} 
```

这两者有什么区别？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-25T03:09:55.643

声明为的变量`static`不能直接从其他文件访问。相反，`static`如果在其他文件中声明，则可以从其他文件访问非`extern`文件。

例子：

foo.c

```
int foodata;
static int foodata_private;

void foo()
{
    foodata = 1;
    foodata_private = 2;
} 
```

foo.h

```
void foo(); 
```

主程序

```
#include "foo.h"
#include <stdio.h>

int main()
{
    extern int foodata; /* OK */
    extern int foodata_private; /* error, won't compile */

    foo();

    printf("%d\n", foodata); /* OK */

    return 0;
} 
```

通常，应避免使用全局变量。但是，在实际应用中，这些通常很有用。通常将`extern int foo;`声明移动到共享头文件（示例中为 foo.h）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-25T03:28:47.977

在 C99 中，没有所谓的“程序范围”。在您的示例变量`x`中，文件范围在翻译单元的末尾终止。声明的变量`y`也具有文件范围，但具有内部链接。`z``static`

> C99 (6.2.2/3) 如果对象或函数的文件范围标识符的声明包含存储类说明符 static，则该标识符具有内部链接

此外，该变量`x`具有外部链接，这意味着`x`其他翻译单元或整个程序都可以访问该名称。

> C99 (6.2.2/5) 如果对象标识符的声明具有文件范围且没有存储类说明符，则其链接是外部的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:06:05.680

C 程序可以写在几个文件中，这些文件由链接器组合到最终执行中。如果您的整个程序都在一个文件中，则没有区别。但是在现实世界的复杂软件中，包括在不同文件中使用函数库，差异是显着的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T03:10:11.980

具有文件范围的变量仅从其声明点到文件末尾可见。文件是指包含源代码的程序文件。一个大程序中可以有多个程序文件。具有程序范围的变量在整个程序中的所有文件（不仅在定义它的文件中）、函数和其他块中都是可见的。了解更多信息。检查这个：[C 中的范围和存储类](http://aelinik.free.fr/c/ch14.htm)。

# javascript - jQuery 弹跳移动不合适？

> ID：14027318
> 
> 赞同：12
> 
> 时间：2012-12-25T02:59:17.347
> 
> 标签：javascript, jquery, html, css, bounce

我正在尝试在鼠标悬停时使用 css“left”定位的按钮上使用 jQuery UI 反弹效果。它似乎有效，但是如果您将鼠标在它上面来回移动几次，它就会移出位置并粘在左边。我不确定它为什么这样做。这是我的代码：http: [//jsbin.com/afoyiz/1/edit](http://jsbin.com/afoyiz/1/edit)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T03:18:23.633

修复：

[http://jsbin.com/afoyiz/12/edit](http://jsbin.com/afoyiz/12/edit)

这确保仅在按钮尚未设置动画时才选择按钮（并为其设置动画） - 如果您正确计时鼠标移动，则先前的代码有机会为按钮弹跳设置双重动画。

# awesome-wm - 当 Caps Lock 打开时，很棒的窗口管理器不会对工具栏上的点击做出反应

> ID：14027324
> 
> 赞同：3
> 
> 时间：2012-12-25T03:01:53.877
> 
> 标签：awesome-wm

标题几乎解释了它。我使用 Caps Lock 更改布局，将其设置为

```
awful.util.spawn_with_shell("setxkbmap -layout 'us, ru' -option 'grp:caps_toggle'") 
```

在 awesome 的 rc.lua 中，如果这与问题有关。当 Caps 开启时，当我点击标签标签和窗口标签时，它们都不会被选中。任何想法为什么会这样？

更新：依赖的版本。

```
user@desktop:~$ dpkg -l | grep -E "(libc6)|(libcairo2)|(libdbus-1-3)|(libev4)|(libglib2.0-0)|(libimlib2)|(liblua5.1-0)|(libpango1.0-0)|(libstartup-notification0)|(libx11-6)|(libxcb-icccm4)|(libxcb-image0)|(libxcb-keysyms1)|(libxcb-randr0)|(libxcb-shape0)|(libxcb-util0)|(libxcb-xinerama0)|(libxcb-xtest0)|(libxcb1)|(libxdg-basedir1)|(dbus-x11)"
dbus-x11                                  1.6.4-1ubuntu4     
libc6:i386                                2.15-0ubuntu20     
libc6-dev:i386                            2.15-0ubuntu20             
libcairo2:i386                            1.12.2-1ubuntu2.2     
libdbus-1-3:i386                          1.6.4-1ubuntu4   
libev4                                    1:4.11-1                  
libglib2.0-0:i386                         2.34.1-1ubuntu1    
libimlib2                                 1.4.5-1ubuntu1   
liblua5.1-0:i386                          5.1.5-4          
libpango1.0-0:i386                        1.30.1-0ubuntu3   
libstartup-notification0:i386             0.12-1ubuntu2     
libx11-6:i386                             2:1.5.0-1     
libxcb-icccm4:i386                        0.3.9-2     
libxcb-image0:i386                        0.3.9-1     
libxcb-keysyms1:i386                      0.3.9-1     
libxcb-randr0:i386                        1.8.1-1ubuntu1 
libxcb-shape0:i386                        1.8.1-1ubuntu1  
libxcb-util0:i386                         0.3.8-2build1        
libxcb-xinerama0:i386                     1.8.1-1ubuntu1    
libxcb-xtest0:i386                        1.8.1-1ubuntu1  
libxcb1:i386                              1.8.1-1ubuntu1   
libxcb1-dev:i386                          1.8.1-1ubuntu1   
libxdg-basedir1                           1.1.1-2 
```

更新 2：xev 在 Caps 打开和关闭的点击时输出（唯一的区别是“状态”）

大写关闭：

```
LeaveNotify event, serial 33, synthetic NO, window 0x1200001,
    root 0x25f, subw 0x0, time 47184554, (49,24), root:(51,45),
    mode NotifyUngrab, detail NotifyInferior, same_screen YES,
    focus YES, state 256

ButtonPress event, serial 33, synthetic NO, window 0x1200001,
    root 0x25f, subw 0x1200002, time 47184553, (49,24), root:(51,45),
    state 0x0, button 1, same_screen YES

EnterNotify event, serial 33, synthetic NO, window 0x1200001,
    root 0x25f, subw 0x0, time 47184554, (49,24), root:(51,45),
    mode NotifyGrab, detail NotifyInferior, same_screen YES,
    focus YES, state 256 
```

大写：

```
LeaveNotify event, serial 33, synthetic NO, window 0x1200001,
    root 0x25f, subw 0x0, time 47185737, (49,24), root:(51,45),
    mode NotifyUngrab, detail NotifyInferior, same_screen YES,
    focus YES, state 8448

ButtonPress event, serial 33, synthetic NO, window 0x1200001,
    root 0x25f, subw 0x1200002, time 47185737, (49,24), root:(51,45),
    state 0x0, button 1, same_screen YES

EnterNotify event, serial 33, synthetic NO, window 0x1200001,
    root 0x25f, subw 0x0, time 47185737, (49,24), root:(51,45),
    mode NotifyGrab, detail NotifyInferior, same_screen YES,
    focus YES, state 8448 
```

# linux - connect() 可以使用非阻塞套接字返回 0 吗？

> ID：14027326
> 
> 赞同：4
> 
> 时间：2012-12-25T03:02:45.730
> 
> 标签：linux, sockets

对于非阻塞网络套接字，可以`connect()`返回 0 吗？

*手册*页只是说如果“套接字是非阻塞的并且无法立即完成连接”，它将返回 -1 并将 errno 设置为 EINPROGRESS 。

“立即”究竟是什么意思？

如果`connect()`CAN在这种情况下返回0，那么在什么情况下它会返回代表成功的0？当客户端和服务器之间的网络非常好？或者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:18:35.623

是的，非阻塞的 connect() 可以返回 0（这意味着成功），尽管 TCP 不太可能发生这种情况。“立即”意味着内核不必等待来确定状态。您可以看到这种情况的情况包括

1.  UDP 套接字，其中 connect() 基本上是建议性的，允许稍后使用 send()，而不是 sendto()。

2.  流式 UNIX 域套接字，其中对等点位于同一内核中，因此可以立即进行审查。

3.  到 127.0.0.1 (localhost) 的 TCP 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:04:58.267

在这种情况下，“立即”意味着无需等待通过网络从另一台机器接收到数据。如果它可以立即完成，则可以返回零。例如，如果它正在连接到同一台机器上的另一个进程，内核可以立即完成连接过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T04:04:49.980

`connect(2)`是系统调用，即进入内核的入口。这是多任务操作系统抢占您的进程做其他事情的机会。

现在，假设您询问 TCP，即使对于非阻塞套接字，它也不必这样做，但`connect(2)`可以实现，以便在条目上启动协议握手，并在返回用户空间之前检查它是否完成。然后，由于操作系统网络堆栈对于用户应用程序主要是异步操作的，如果您的进程在系统调用中间被抢占并在稍后切换回，则握手可能已经完成，并且成功为零，返回到应用程序。

# javascript - 单选按钮样式在 Internet Explorer 8 中不起作用

> ID：14027329
> 
> 赞同：2
> 
> 时间：2012-12-25T03:03:23.423
> 
> 标签：javascript, css, internet-explorer-8, radio-button

我有几个单选按钮。我使用以下 css 来更改带有图像的单选按钮样式。它在 firefox、chrome 甚至 Internet Explorer 9 中都能完美运行，但在 Internet Explorer 8 中却不行。

```
input[type='radio'] + label {
margin: 0;
clear: none;
padding: 5px 0 4px 24px;
/* Make look clickable because they are */
cursor: pointer;
background: url(icons.png) left center no-repeat;
background-position:0px -7055px; width:45px; height:20px; border:0px; cursor:pointer
}

input[type='radio']:checked + label {
background-image: url(icons.png);
background-position:-54px -7055px; width:45px; height:20px; border:0px; cursor:pointer
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T03:24:34.553

伪类在 IE8中`:checked`不可用

[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

[http://www.quirksmode.org/css/enabled.html](http://www.quirksmode.org/css/enabled.html)

我只是在 IE8 及更低版本中显示普通单选按钮。这为使用旧技术的人提供了相同的体验，并且不会为您带来数小时/数天的工作负担，只是为了让所有内容在浏览器中看起来都一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T05:22:43.230

仅适用于 IE 8 及更高版本。您可以使用

```
input[type='radio'][checked] + label {
background-image: url(icons.png);
background-position:-54px -7055px; width:45px; height:20px; border:0px; cursor:pointer
} 
```

这将适用于 IE8 及更高版本，但不适用于 IE7 及更低版本..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T11:36:33.690

我尝试了所有的polyfills。除了 ie9.js，它们都不起作用。不幸的是[，ie9.js](https://code.google.com/p/ie7-js/)让我的页面加载速度就像一群蜗牛穿过花生酱一样慢。经过近 2(!) 天的诅咒，我终于得到了 IE8 单选按钮，它与一点点 jQuery 和 CSS 一起工作。

第一个问题是向未检查/检查的输入添加和删除一个类。其次是强制 IE8 在选中另一个单选按钮后重新呈现未选中的输入。我认为这种方法也适用于复选框。

jQuery：

```
// maybe you need this next small line, I didn't
// $('input:checked').addClass("selected");
$('input').change(function () {  // click() worked too but change is safer
  $(this).addClass("selected");
  $('input:not(:checked)').removeClass("selected");
  // adding a class to a wrapping element
  // and then remove it to force IE8 to rerender
  var testClass = "testClass";       
  $(this).parent().parent().addClass(testClass).removeClass(testClass);
}); 
```

和CSS：

```
input[type="radio"] {
  // display: none; won't work
  // so replace the actual button offscreen
  // or cover it with following label
}
input[type="radio"] + label {
  background-color: red;  // or background-image
}
input[type="radio"].selected + label {
  background-color: green;  // or background-image
}
input[type="radio"] + label,
input[type="radio"].selected + label {
  position: relative;
  top: 150px;
  left: 300px;
  height: 48px;
  width: 48px;
  display:inline-block;
  padding: 0;
  text-indent: -9999px;
  cursor: pointer;
} 
```

# php - 我应该如何加入这些表 MySQL？

> ID：14027330
> 
> 赞同：1
> 
> 时间：2012-12-25T03:03:26.267
> 
> 标签：php, mysql

我有这些表：

报告：

```
id, ip_addr, upload_id 
```

上传：

```
id, userID, name, location, category, private 
```

基本上我正在显示所有的上传，我想加入报告表以确定当前用户的 ip_address 是否已经报告了上传（我会在查询后比较 ip_addr）。我遇到的问题是同一上传可以有多个报告，并且由不同的人（不一定是注册用户，这就是我使用 ip_addr 的原因）。那么我将如何设置这个 MySQL 查询以及如何在循环中执行以下操作..？

PHP：（$things 将是查询结果）

```
foreach((array)$things as $files){
    if ($files['ip_addr'] == $user_ip_addr) {
         // display upload info and an already reported image
    } else {
         // display upload info with an unreported image
    }
} 
```

到目前为止，我有这个，它显示了所有的上传

```
$query = 'SELECT * FROM upload WHERE private="0" '; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:06:21.170

只是有多个标识符。表结构将与此类似：

表“报告”

```
reported_by = user id 
reported_id = upload id
id = primary index 
```

您的查询可能是这样的：

```
SELECT COUNT(*) as `rows` WHERE reported_id = ? AND reported_by = ? 
```

瞧，

```
<?php
    if($rows['rows'] > 0) // they reported it
        echo 'Tattle tale.';
    else
        echo 'Snitches get stitches.';
?> 
```

? 是未命名的参数（假设您使用的是 mysqli 或 pdo）

# shell - 如何获取shell中两个特殊字符串之间的内容

> ID：14027332
> 
> 赞同：0
> 
> 时间：2012-12-25T03:04:03.677
> 
> 标签：shell, sed, grep, tr

我有两个特殊字符，我想在 shell 中获取它们之间的内容。

不要使用 awk ，因为我的 linux 找不到 awk。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:51:00.200

```
echo "ABxxxDE" | sed -e 's/AB\(.*\)DE/\1/g' 
```

将打印出：

```
xxx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T06:13:03.343

```
 $ sed -n '/WORD1/,/WORD2/p' /path/to/file 
 $ sed -n '/FOO/,/BAR/p' test.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T20:01:56.223

```
echo "This is a #TEST%" | grep -o \#[a-zA-Z.0-9]*\% 
```

将产生

```
#TEST% 
```

您还可以使用 sed.. 去除特殊字符。

```
echo "This is a #TEST%" | grep -o \#[a-zA-Z.0-9]*\% | sed 's/#//g' | sed 's/%//g' 
```

屈服

```
TEST 
```

# iphone - 如何将从 UIAlertview 文本字段接收到的数据添加到局部变量？

> ID：14027337
> 
> 赞同：2
> 
> 时间：2012-12-25T03:06:11.543
> 
> 标签：iphone, ios

我设置了按钮，当它被点击时，会出现一个带有文本字段的警报视图。我想从该变量中获取数据并触发一个加法函数，该函数将文本字段的值添加到局部变量并在标签中显示数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:17:08.500

设置 的[`delegate`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instp/UIAlertView/delegate)属性`UIAlertView`并使该对象符合[`UIAlertViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)。即回复[`alertView:clickedButtonAtIndex:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/occ/intfm/UIAlertViewDelegate/alertView%3aclickedButtonAtIndex%3a)，期间您可以查询[`textFieldAtIndex`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instm/UIAlertView/textFieldAtIndex%3a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:18:30.217

我假设您已经获得了带有 UITextField 的 UIAlertView（使用 UIAlertViewStyleSecureTextInput、UIAlertViewStylePlainTextInput 或 UIAlertViewStyleLoginAndPasswordInput）。

我还将假设您已设置 UIAlertViewDelegate 以便在按下 UIAlertView 上的按钮时正确调用它。因此，要获取 UITextField 的值，请在`alertView:clickedButtonAtIndex:`您添加以下代码（假设只有一个 UITextField - 如果您有多个，只需更改传递给 textFieldAtIndex 的参数：

```
NSInteger textFieldValueAsInteger = [[alertView textFieldAtIndex:0].text integerValue];
NSInteger finalValue = textFieldValueAsInteger + someOtherIntegerThatYouAlreadyDeclared; 
```

显示它在很大程度上取决于您的 UILabel 等设置，但基本上：

```
UILabel *labelToDisplayResults = [[UILabel alloc] initWithFrame:self.view.frame];
[self.view addSubview:labelToDisplayResults];

[labelToDisplayResults setText:[NSString stringWithFormat:@"%d", finalValue]]; 
```

那应该这样做。如果您有任何其他后续问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:18:47.177

您需要为警报视图设置委托，并且该对象应采用[UIAlertViewDelegate 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)。然后，代理将`-alertView:willDismissWithButtonIndex:`在解除警报之前收到一条消息。您的委托对该方法的实现可以从警报中的任何文本字段中获取文本——用于`-textFieldAtIndex:`获取不同的文本字段。

# php - 在 JavaScript 中创建 JSON

> ID：14027341
> 
> 赞同：2
> 
> 时间：2012-12-25T03:07:32.943
> 
> 标签：php, javascript, jquery, json, stringify

我应该如何在 JavaScript 中将此数据编码为 JSON？

我使用 javascript 在照片上获取任意数量的“标签”。每个标签都有一个名字和姓氏，格式如下：

```
firstname = 'john';
lastname  = 'doe';

firstname = 'jane';
lastname  = 'smith'; 
```

我想将此数据编码为 JSON，使用 Ajax 将其发送到我的服务器，然后在 PHP 中对其进行解码。

我的想法是创建一个多维数组。有一个更好的方法吗？

JSON.stringify() 的输出是`[{\"firstname\":\"John\",\"lastname\":\"Doe\"},{\"firstname\":\"Jane\",\"lastname\":\"Smith\"}]`. 如何让 JSON.stringify() 不转义所有引号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:10:38.047

JSON 的灵感来自 JavaScript 的对象语法，因此您需要做的就是创建一个对象数组：

```
var data = [
  {
    firstname: 'john',
    lastname: 'doe'
  },
  {
    firstname: 'jane',
    lastname: 'smith'
  }
]

var json = JSON.stringify( data ); // send this object to server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:37:49.887

JSON是要走的路

**JAVASCRIPT**

```
 var data = [{
    firstname: 'john',
    lastname: 'doe'
    },
    {
    firstname: 'jane',
    lastname: 'smith'
   }
 ]

var json = JSON.stringify( data ); 
```

现在您的 JSON 字符串将是

> [{"firstname":"John","lastname":"Doe"},{"firstname":"Jane","lastname":"Smith"}]

**PHP**

```
$arr=json_decode('$jsonVar'); 
```

确保将单引号覆盖在 php 端。否则 PHP 不会将其读取为字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:18:55.397

您可以将标签转换为 json 对象

```
var jsonObj = '{"TeamList" : [{"teamid" : "1","teamname" : "Barcelona"}]}';
var obj = $.parseJSON(jsonObj); 
```

或者

```
 var jsonObj = {
"employees": [
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName":"Jones" }
]
}
var obj = $.parseJSON(jsonObj); 
```

# android - 安卓电台广播链接

> ID：14027342
> 
> 赞同：1
> 
> 时间：2012-12-25T03:07:54.947
> 
> 标签：android, radio, shoutcast

> **可能重复：**
> [Android：重定向 pls 文件以便媒体播放器可以读取它](https://stackoverflow.com/questions/14027728/android-redirecting-pls-file-so-that-mediaplayer-can-read-it)

我可以在 setDataSource 中使用此链接：http: //yp.shoutcast.com/sbin/tunein-station.pls?id= [13361](http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361)

```
player.setDataSource("http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361"); 
```

这不会播放任何内容，我怎样才能使该链接正常工作，我是否需要更改它，添加端口或..？

这是“Arman FM”电台：[http ://www.shoutcast.com/Internet-Radio/Arman+FM](http://www.shoutcast.com/Internet-Radio/Arman+FM)

代码：

```
import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;

import java.io.IOException;

import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;

public class ArmanFMRadio extends Activity implements OnClickListener {

private ProgressBar playSeekBar;
private Button buttonPlay;
private Button buttonStopPlay;
private MediaPlayer player;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.armanfm);
    initializeUIElements();
    initializeMediaPlayer();

}

private void initializeUIElements() {

    playSeekBar = (ProgressBar) findViewById(R.id.progressBar1);
    playSeekBar.setMax(100);
    playSeekBar.setVisibility(View.INVISIBLE);

    buttonPlay = (Button) findViewById(R.id.buttonPlay);
    buttonPlay.setOnClickListener(this);

    buttonStopPlay = (Button) findViewById(R.id.buttonStopPlay);
    buttonStopPlay.setEnabled(false);
    buttonStopPlay.setOnClickListener(this);

}

private void initializeMediaPlayer() {
    player = new MediaPlayer();
    try {
        String strurl="http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361";
        player = MediaPlayer.create(ArmanFMRadio.this, Uri.parse(strurl));
        //player.setDataSource("http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361");
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } 
    //catch (IOException e) {
    //    e.printStackTrace();
    //}

    player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

        public void onBufferingUpdate(MediaPlayer mp, int percent) {
            playSeekBar.setVisibility(View.VISIBLE);
            playSeekBar.setSecondaryProgress(percent);
            Log.i("Buffering", "" + percent);

        }
    });
}

public void onClick(View v) {
    switch(v.getId()){
    case R.id.buttonPlay:
        startPlaying();
        break;
    case R.id.buttonStopPlay:
        stopPlaying();
        break;
    } 

}

private void startPlaying() {
    buttonStopPlay.setEnabled(true);
    buttonPlay.setEnabled(false);

    playSeekBar.setVisibility(View.VISIBLE);

    player.prepareAsync();

    player.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {

        player.start();

        }
    });

}

private void stopPlaying() {
    if (player.isPlaying()) {
        player.stop();
        player.release();
        initializeMediaPlayer();
    }

    buttonPlay.setEnabled(true);
    buttonStopPlay.setEnabled(false);
    playSeekBar.setVisibility(View.INVISIBLE);
}

@Override
protected void onPause() {
    super.onPause();
    if (player.isPlaying()) {
        player.stop();
    }
}
}

   12-25 03:50:09.310: W/ActivityThread(712): Application com.afghan.radios is waiting for the debugger on port 8100...
   12-25 03:50:09.340: I/System.out(712): Sending WAIT chunk
   12-25 03:50:09.350: I/dalvikvm(712): Debugger is active
   12-25 03:50:09.401: I/System.out(712): Debugger has connected
   12-25 03:50:09.401: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:09.600: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:09.810: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:10.010: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:10.210: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:10.410: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:10.611: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:10.811: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:11.020: I/System.out(712): waiting for debugger to settle...
   12-25 03:50:11.220: I/System.out(712): debugger has settled (1318)
   12-25 03:50:39.881: D/MediaPlayer(712): Couldn't open file on client side, trying server side
   12-25 03:50:40.320: E/MediaPlayer(712): error (1, -2147483648)
   12-25 03:50:40.431: D/MediaPlayer(712): create failed:
   12-25 03:50:40.431: D/MediaPlayer(712): java.io.IOException: Prepare failed.: status=0x1
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.media.MediaPlayer.prepare(Native Method)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.media.MediaPlayer.create(MediaPlayer.java:611)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.media.MediaPlayer.create(MediaPlayer.java:588)
   12-25 03:50:40.431: D/MediaPlayer(712):  at        com.afghan.radios.ArmanFMRadio.initializeMediaPlayer(ArmanFMRadio.java:54)
   12-25 03:50:40.431: D/MediaPlayer(712):  at com.afghan.radios.ArmanFMRadio.onCreate(ArmanFMRadio.java:31)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.os.Handler.dispatchMessage(Handler.java:99)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.os.Looper.loop(Looper.java:123)
   12-25 03:50:40.431: D/MediaPlayer(712):  at android.app.ActivityThread.main(ActivityThread.java:4627)
   12-25 03:50:40.431: D/MediaPlayer(712):  at java.lang.reflect.Method.invokeNative(Native Method)
   12-25 03:50:40.431: D/MediaPlayer(712):  at java.lang.reflect.Method.invoke(Method.java:521)
   12-25 03:50:40.431: D/MediaPlayer(712):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
   12-25 03:50:40.431: D/MediaPlayer(712):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
   12-25 03:50:40.431: D/MediaPlayer(712):  at dalvik.system.NativeStart.main(Native Method) 
```

# java - 一个将字符解析为 Unicode 的函数在 Eclipse 中有效，但在 JDeveloper 中无效？

> ID：14027345
> 
> 赞同：4
> 
> 时间：2012-12-25T03:08:10.733
> 
> 标签：java, unicode

我遇到了一个奇怪的问题。请看下面的代码：

```
public static String toUNICODE(String s) {
  StringBuilder sb=new StringBuilder();
  for(int i=0;i<s.length();i++) {
    System.out.println(s.charAt(i));
    if(s.charAt(i)<=256) {
      sb.append("\\u00");
    } else {
      sb.append("\\u");
    }
    sb.append(Integer.toHexString(s.charAt(i)));
  }
  return sb.toString();
} 
```

它将字符解析为Unicode。它在 Eclipse 中运行良好。但是当我在 JDeveloper IDE 中测试它时，我得到了错误的结果。例如，在 Eclipse 中，`\u6211`当输入为“我”时，我会得到正确答案。而我将在 JDeveloper 中获得 \u00e6\u2c6\u2018。

请赐教为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:39:53.720

当您将`"我"`( `0xE6 0x88 0x91`) 的 UTF-8 字节解释为 Windows-1252 时，您将得到`"æˆ‘"`

当你传递`"æˆ‘"`给你的函数时，结果是`\u00e6\u2c6\u2018`. 因此，您在某处输入 UTF-8，但程序只是在 Windows-1252 中解释它。

您的问题中没有关于您如何进行输入或阅读的信息，但是一旦您添加了该信息，这应该很容易解决。

顺便说一句，对于 0x100-0xFFF 范围内的代码点，您的函数已损坏，而忽略了这些代码点的填充。以及超出 0xFFFF 的代码点。

# ios - 以安全的方式保存 ios 应用程序配置

> ID：14027348
> 
> 赞同：4
> 
> 时间：2012-12-25T03:08:58.173
> 
> 标签：ios, security, jailbreak

我正在开发一个 iOS 应用程序。我的应用需要在本地保存配置和状态数据。例如，应用程序处于免费模式或付费模式。如果我将此信息放入 plist 文件中，是否可以在越狱 iphone 中访问？如果是，我应该在哪里安全地保存它？（注意：出于某种特殊原因，我不想加密 plist 文件中的数据）。我听说了 iOS 状态保存和恢复，它可以帮助我将数据保存在安全的内存中吗？

更新：我的应用程序在 ipad 上运行 iOS 4.3 + 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:35:58.983

> 如果我将此信息放入 plist 文件中，是否可以在越狱的 iPhone 上访问它？

是的，可能。由于越狱手机具有完全开放的文件系统和有效的 root 用户帐户，用户可以对您的应用程序执行任何操作：获取其秘密数据、破解它、对其进行逆向工程、使用 MobileSubstrate 对其进行修改等等。（**Don'你敢**弹出“我不在越狱设备上运行！”警报视图！）

> 如果是，我应该把它安全地保存在哪里？

简而言之：你不能。

有这个[钥匙串](https://developer.apple.com/library/mac/ipad/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)应该是安全的，但在越狱设备上它根本不安全。钥匙串的全部内容可以通过这个[简单的工具](https://github.com/ptoomey3/Keychain-Dumper)轻松转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:03:26.683

关于将数据放置在安全位置的一种想法。如果您的应用程序有一些身份验证，您可以使用此信息来加密/解密某些数据。

它不是 100% 安全的。如果另一个进程进入您的进程内存，则从中复制数据，那么您就完蛋了。但是，如果其他一些应用程序只是复制一个文件，那将是无用的（因为他们需要先获取您的身份验证信息才能解密它）。

# java - 交替使用开关功能

> ID：14027350
> 
> 赞同：4
> 
> 时间：2012-12-25T03:09:30.380
> 
> 标签：java, switch-statement, blackjack

我正在编写一个程序来模拟二十一点游戏，并且我一直在使用 switch 来浏览菜单。它运行良好，但我想知道您是否可以扩展 switch 以涉及多个案例。例如，每个玩家都有很多结果。例如，二十一点，二十一点与二十一点，玩家破产和庄家不破产，庄家破产但玩家不破产，玩家和庄家破产，双倍下注和破产等。有没有办法在这里使用开关比较多个变量，还是我必须将 if/else-if 与多个条件堆叠在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:45:03.963

如果您对@LeoCorrea 的回答发表评论，您的条件似乎是布尔值。

也许尝试类似：

```
final int PLAYER_BUST = 1 << 0;
final int DEALER_BUST = 1 << 1;
// ...

int total = 0;
total |= player.bust ? PLAYER_BUST : 0;
total |= dealer.bust ? DEALER_BUST : 0;

switch(total) {
    case 0:
        // neither player nor dealer has bust
        break;
    case PLAYER_BUST:
        // just player bust, so dealer wins
        break;
    case DEALER_BUST:
        // just dealer bust, so player wins
        break;
    case PLAYER_BUST | DEALER_BUST:
        // both have bust
        break;
} 
```

是`1 << x`2^x，`|`是按位或。我的例子是 n = 2，但 n 可以是任何合理的数字。

这类似于[PHP 如何对其错误级别进行编码](http://php.net/manual/en/errorfunc.constants.php)。请注意大多数级别是如何用 2 的幂表示的（二进制中只有一个“1”数字）。

我们`|`在这些级别上使用来获得 n 个布尔值的组合结果。int 中的每一位`total`代表一个条件。

由于 n 个布尔值有 2^n 种可能的组合结果，我们可以将每个结果与 n 位中的整数进行匹配。我们不能打开 n 个布尔值，但幸运的是，我们可以`switch`在这个`total`表示 n 个布尔值的整数上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:25:17.133

不幸的是，`switch`在 Java 中不可能使用多个变量。除了@irrelephant 建议的位掩码，您可以尝试重新考虑您的评估：

我对二十一点并不完全熟悉，但我相信`player.busted`您可以将玩家的分数设置为`-1`（或者，如果获得 30 的分数比 25 的分数差，您可以将其设置为`-score`） ，而不是设置和类似的字段然后简单地比较分数。

* * *

PS代替

```
if (player.bust == false && dealer.bust == true) 
```

你可以输入

```
if (!player.bust && dealer.bust) 
```

它节省了很多打字并且更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:17:57.227

我不确定您在说什么语言，因为您没有指定它，但是在 Ruby 中是 case 语句（类似于 switch 语句）

你可以做类似的事情

```
case [A, B]
when [true, true] then ...
when [false, true] then ... 
```

您还可以让多个条件输出相同的输出

```
case condition
  when ("a" and "b")
    # do something
  when "c"
    # do something
end 
```

你的问题很模糊，我认为你应该考虑让它更具体到你使用的语言。

# mysql - phpmyadmin 打开 MySQL 表列表非常慢

> ID：14027351
> 
> 赞同：10
> 
> 时间：2012-12-25T03:09:32.477
> 
> 标签：mysql, phpmyadmin

我可以登录 phpmyadmin 并很快查看数据库。一旦我单击其中一个并尝试查看表格列表，它就会非常慢。有什么我想念的吗？在从 Ubuntu 10.04 更新到 Ubuntu 12.04 之前，我没有这种情况。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-30T17:52:45.600

打开`\config.inc.php`文件并附加这两行：

```
$cfg['MaxExactCount'] = 0;
$cfg['MaxExactCountViews'] = 0; 
```

当然，如果数据库中没有任何视图，则可以跳过第二行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-25T03:27:53.543

这是因为你有很多行的 innoDB 表。InnoDB 不会存储表中的行数，但 MyISAM 会。因此，对于每个 InnoDB 表，PHPMyAdmin 都会调用`SELECT count(*) FROM`查询，如果行数非常高，这会非常慢。要解决此问题，您应该编辑`config.inc.php`文件并设置`$cfg['MaxExactCount']`. `count(*)`这将为行数较少的表调用sql `MaxExactCount`。

```
$cfg['MaxExactCount'] = 20000; 
```

含义形式 phpmyadmin 手册

> 对于 InnoDB 表，确定 phpMyAdmin 应该使用 SELECT COUNT 获得多大的表的确切行数。如果 SHOW TABLE STATUS 返回的近似行数小于该值，将使用 SELECT COUNT，否则将使用近似数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-04T12:26:08.713

phpMyAdmin 在本地服务器上运行缓慢的另一个原因是它明显忽略了 hosts 文件。尝试将 config.inc.php 中出现的任何“localhost”更改为“127.0.0.1”。它在 Windows 计算机上为我创造了极大的加速。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-14T17:55:24.127

我最初使用@“Andrew Kondratev”答案，没有“if view”条件的东西，然后开始仔细研究该方法的其余部分，并意识到这几乎正是如果`$force_exact`为假时将运行的代码。我有一个新的、更简单的 hack，它不会破坏太多并且也适用于*表格*。

就像 Andrew 的 hack 一样：

*   查找安装所在的位置，例如`rpm -ql phpMyAdmin | grep Table.class.php`（或您的本地操作系统等效项）。
*   编辑：（`./libraries/Table.class.php`在我的情况下`/usr/share/phpMyAdmin/libraries/Table.class.php`
*   查找`static public function countRecords`（在我的情况下为第 563 行）
*   在该函数的顶部（在 之后`{`）插入以下内容：

    ```
     /* Tommy's Hack from http://goo.gl/HMTnLc */
            $force_exact = false;
            /* End Tommy's Hack - USE AT YOUR OWN RISK! */ 
    ```

*   在我的情况下，“默认值”已经具有以下内容：

    ```
    config.default.php: * @global integer $cfg['MaxExactCount']
    config.default.php:$cfg['MaxExactCount'] = 0;
    config.default.php: * @global integer $cfg['MaxExactCountViews']
    config.default.php:$cfg['MaxExactCountViews'] = 0; 
    ```

*   但是，您始终可以将其添加到您的 config.inc.php 中：

    ```
    $cfg['MaxExactCountViews'] = 0;//disable trying to count the number of rows in any view
    $cfg['MaxExactCount'] = 0;//disable correcting the InnoDB estimates 
    ```

我相信**问题**实际上已经在[tbl_info.inc.php](https://github.com/phpmyadmin/phpmyadmin/blob/master/libraries/tbl_info.inc.php#L78-L81)中解决了，它在显示表格时将 $force_exact 设置为 true。IMO，唯一需要“准确”的数字是如果您试图查看最后一页，即使那样也可能不是。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-11T02:21:44.357

如果您有多个包含大量 (>10^5) 记录的 VIEWS，即使 MaxExactCountViews 和 MaxExactCount 都设置为 100，它的运行速度也会非常慢。

寻找

> '静态公共函数 countRecords'

在

> 库\Table.class.php

，将以下代码放在此方法的开头：

```
if ($is_view == true && isset($GLOBALS['cfg']['MaxExactCountViews'])) {
    /* dirty hack to avoid performance issue with views when ['cfg']['MaxExactCount'] and ['cfg']['MaxExactCountViews'] does not help it */
    $tmp_tables = PMA_DBI_get_tables_full($db, $table);
    PMA_Table::$cache[$db][$table] = $tmp_tables[$table];
    PMA_Table::$cache[$db][$table]['ExactRows'] = $GLOBALS['cfg']['MaxExactCountViews'];
    return (int) $GLOBALS['cfg']['MaxExactCountViews']; 
} 
```

`Set $GLOBALS['cfg']['MaxExactCountViews']`之后配置中的值。phpMyAdmin 现在将始终为所有视图显示此值。它也会工作得更快:-)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-25T21:00:59.870

我解决您的问题的方法是将 的输出缓存`SHOW TABLE STATUS FROM <DATABASE>`到名为*fi* `showtablecache`的表中，例如每 2 分钟一次。您可以为您的数据库使用一些 cron 脚本来执行此操作。

然后，您可以编辑该文件并用新缓存表上的a`/usr/share/phpmyadmin/libraries/database_interface.lib.php`替换慢速文件。`SHOW TABLE STATUS FROM ...``SELECT ... FROM showtablecache WHERE ...`

您也可以单独保留 phpmyadmin 源，并在其间放置一个 mysql-proxy 实例，为您重写查询。然后您所要做的就是更改 $dbport 变量`config-db.php`:)

如果您在使用 phpmyadmin 以外的非开源工具时遇到此问题，则使用 mysql-proxy 尤其有用。像一些本地的，也许是专有的工作台应用程序。（Upscene 的数据库工作台做了类似的事情（如果我没记错的话））

* * *

cron 脚本中的查询：

```
START TRANSACTION;

DELETE FROM showtablecache WHERE database_ = '<DATABASE>';

INSERT INTO showtablecache
SELECT 
    '<DATABASE>'
    , TABLE_NAME
    , ENGINE
    , VERSION
    , ROW_FORMAT
    , TABLE_ROWS
    , AVG_ROW_LENGTH
    , DATA_LENGTH
    , MAX_DATA_LENGTH
    , INDEX_LENGTH
    , DATA_FREE
    , AUTO_INCREMENT
    , CREATE_TIME
    , UPDATE_TIME
    , CHECK_TIME
    , TABLE_COLLATION
    , CHECKSUM
    , CREATE_OPTIONS
    , TABLE_COMMENT
FROM
    INFORMATION_SCHEMA.TABLES
WHERE
    table_schema = '<DATABASE>';

COMMIT; 
```

所以不要`SHOW TABLE STATUS FROM <DATABASE>`使用：

```
SELECT
    Name_ AS `Name`,
    Engine_ AS `Engine`,
    Version,
    Row_format_ AS `Row_format`,
    Rows_ AS `Rows`,
    Avg_row_length,
    Data_length,
    Max_data_length,
    Index_length,
    Data_free,
    Auto_increment_ AS `Auto_increment`,
    Create_time,
    Update_time,
    Check_time,
    Collation_ AS `Collation`,
    Checksum,
    Comment_ AS `Comment`,
    Create_options
FROM
    showtablecache
WHERE
    Database_ = <DATABASE>; 
```

有关此修复程序的更多详细信息：http: [//blog.cppse.nl/fix-slow-phpmyadmin](http://blog.cppse.nl/fix-slow-phpmyadmin)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-08T02:28:17.743

对我来说，问题是所有站点都启用了 xdebug 分析器。在 phpmyadmin 中加载表列表时，它写入了超过 40MB 的日志。（关闭它会将负载从 15 秒以上加速到 2-3 秒）。

这是我的新 xdebug 设置，我不知道是哪一个成功了：

```
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=1 # this still allows manual logs
xdebug.remote_autostart=0
xdebug.remote_enable=0 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T19:00:32.473

我针对您查询的一般情况发布了修复程序`information_schema.tables`

[information_schema.tables 查询慢](https://stackoverflow.com/questions/11290433/slow-query-on-information-schema-tables/16469127#16469127)

# c - Is a local constant string in global memory

> ID：14027352
> 
> 赞同：2
> 
> 时间：2012-12-25T03:09:43.867
> 
> 标签：c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:11:36.247

If only from code perspective, this is safe. But you should make sure in test(), you can only assign a string const to str. If you do like following:

```
const char *test() {
  char somestr[somesize];
  str = somestr;
  return str;
} 
```

That's still not safe.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:18:26.613

If you do the following, you can use the result of foo() anywhere. You should not modify or free it however. It is irrelevant if this code is part of a DLL or a Library.

```
const char * foo() {
    return "hello";
}

// This is identical.
const char * foo() {
    const char *x = "hello";
    return x;
} 
```

If you want to be able to modify, you could do something like this. Note that every call to `foo()` will be referring to the same piece of memory because `x` is static. Note that here, you can modify `x`, but you still should not free it.

```
char * foo() {
    static char x[] = "hello";
    return x;
} 
```

If you wanted to be able to free the result of `foo()`, you must allocate the space with `malloc()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:12:58.440

The assignment to `str` isn't even necessary. Even without it, it would be safe to return the address of a string literal from a function and to subsequently use the string anywhere.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T03:18:47.937

It's safe if you assign a string literal to the pointer, but if you're going to do that it seems like it would be best to leave the function out of the picture entirely:

```
static char str[] = "hello world"; 
```

Then you could just use `str` like a `static char *` since arrays just decay to pointers.

# php - Codeigniter 模型未插入值

> ID：14027355
> 
> 赞同：4
> 
> 时间：2012-12-25T03:10:18.813
> 
> 标签：php, mysql, database, codeigniter, crud

这是我在 CI 中的第二个 Web 应用程序。

我正在尝试从表单中获取单个值（提交时）并将其插入数据库。

我有一个控制器“urlsubmission”：

```
<?php

class Urlsubmission extends CI_Controller{

    function index() {
          $this->load->model('domaincheckmodel');
          $this->domaincheckmodel->verifyduplicates();

    }
}
?> 
```

一个模型（domaincheckmodel）——它在数据库中搜索任何重复项：

```
<?php

    class Domaincheckmodel extends CI_Model{

        function __construct(){
            // Call the Model constructor
            parent::__construct();
        }

        function verifyduplicates(){
            #PREPARE DATA
            $sql = "SELECT tld from ClientDomain WHERE tld = ?";
            $postedTLD = $_POST['urlInput'];    // Get unsanitized data
            $endquery = $this->db->query($sql,array($this->db->escape_str($postedTLD))); // Query db

            #CONDITION
            if($endquery->num_rows() > 0){
                $this->load->view('err/domainexists'); ##domain already used
                ## please login..
            } 

            else{ #number of rows must be 0, insert into db
                $newDomain = "INSERT INTO ClientDomain(tld) VALUES('".$this->db->escape_str($postedTLD)."')";
                $this->load->view('success/domainfree');
                ## please register
            }
        }    
    }

    ?> 
```

现在有两个愚蠢的观点：domainexists 和 domainfree：

域存在：

```
<h2>Domain Exists</h2> 
```

无域名：

```
<h2>Domain free</h2> 
```

问题是：当我运行脚本时，没有错误，但它正在正确执行`else{}`块，但没有向数据库输入任何内容。

我已经设置了 config/autoload 来自动加载 db lib，例如：

```
$autoload['libraries'] = array('database'); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:18:28.313

您没有运行 SQL 查询。做这个。

```
$newDomain = "INSERT INTO ClientDomain(tld) VALUES('".$this->db->escape_str($postedTLD)."')";
$this->db->query($newDomain); 
```

或者你可以使用 simple_query()

```
$newDomain = "INSERT INTO ClientDomain(tld) VALUES('".$this->db->escape_str($postedTLD)."')";
$this->db->simple_query($newDomain); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:19:00.233

您声明了 INSERT 语句但从不执行它？

# javascript - 同位素 img scr 和链接坏了？

> ID：14027356
> 
> 赞同：1
> 
> 时间：2012-12-25T03:10:29.147
> 
> 标签：javascript, jquery, html, jquery-isotope

我已经得到了同位素插件来解决我在 chrome 和所有其他浏览器中的问题，它似乎没有任何照片。例如，您不能右键单击说“将图像另存为”。甚至带有链接的图像也不起作用。

这是我的代码，虽然它不能在 jsfiddle 中工作，我也不知道为什么，因为它在我的本地主机上工作。 [我的小提琴](http://jsfiddle.net/SkyDrew/7b75m/3/embedded/result/)

任何帮助表示赞赏。

```
<script type = "text/javascript">
    $(function() {
        var $container = $('#container');

        $container.imagesLoaded(function() {
            $container.isotope({
                photoSelector : '.photo',
                       masonry: {
                           columnWidth: 60
                       },
                // options...
            });
        });
    });
</script>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:44:02.227

不太了解 jsFiddle 应该如何工作，但看起来好像没有加载图像，因为它们不存在。尝试输入绝对图像 URL，因为目前它正在[http://fiddle.jshell.net/SkyDrew/7b75m/3/show/light/images/test/](http://fiddle.jshell.net/SkyDrew/7b75m/3/show/light/images/test/)中查找图像并收到 404 错误。

# ruby - 如何加载从特定内存位置或数组开始的文件

> ID：14027361
> 
> 赞同：3
> 
> 时间：2012-12-25T03:11:40.243
> 
> 标签：ruby

我在 6502 仿真器上的工作仍在继续。我在嵌入式处理器仿真中遇到了一些问题，我需要在从 0x1000 开始的数组中加载 6502 二进制文件。

当然，加载文件很容易。但偏移部分不是。在 C 中，我可以轻松地做到这一点。

这是加载我现在正在使用的文件的代码：

```
 def loadbinary(filename)
    @prog = File.open(filen, "rb") { |io| io.read }
    @imagesize = @prog.size
  end 
```

如果加载在 0x1000 处加载，则前面的空间可以为空（0x1000 之前）。

有任何想法吗？

对于任何有趣的人，这是我在 GitHub 上的[6502.rb 项目](https://github.com/farhany/6502 "GitHub 上 Ruby 中的 6502 模拟器")

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:05:41.257

您可能需要分配一个`n`字节数组，其中`n`是您要模拟的可寻址 RAM 的大小。从那里您可以开始将从文件中读取的数据存储到“RAM”中。

这就是我要开始的：

```
def loadbinary(filename)
  @prog = File.read(filename, 'rb')
  @imagesize = @prog.bytesize
end

RAM_SIZE = 1024 * 64
RAM = Array.new(RAM_SIZE)

loadbinary('/path/to/foo')
RAM[0x1000, @imagesize] = @prog.bytes.to_a 
```

注意：不能`String.size`用来获取字符串的长度，因为它允许多字节字符。相反，要获取字节数，您需要`bytesize`，根据[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-bytesize)：

> 返回 str 的长度（以字节为单位）。

同样，我们不能尝试使用转换`@prog`为数组，`split('')`因为它也允许多字节字符。相反，我们可以获取字节并将其转换为数组。可以使用`unpack`或来完成`bytes.to_a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:19:46.947

AFAIK，你不能。`io.read`返回~~一个数组~~一个字符串；它不会写入预先存在的数组。

您必须首先读取一个数组，然后[拼接](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D-3D)到另一个数组中。就像是

```
progimage = io.read.bytes.to_a
image[start, progimage.size] = progimage 
```

幸运的是，现在运行 Ruby 的几乎所有系统都比 C64 拥有更多的内存和 CPU 能力，因此使用额外的数组并不太麻烦。

# jquery - iPhone模拟器理解第一个“点击”jQuery事件，但不是第二个

> ID：14027364
> 
> 赞同：3
> 
> 时间：2012-12-25T03:12:21.927
> 
> 标签：jquery, ios, safari, touch

我发现这有点令人困惑，如果其他人遇到这个并可以启发我......

我有一个`click`使用 jQuery 设置的事件侦听器，它注册得很好，但是第二个没有，但是，在第二个中，`touchend`事件确实注册了。

`$(document).on("click", ".date-button", ...`

以及另一个元素上的第二个类似事件侦听器：

`$(document).on("click touchend", ".time.true", ...`

我必须使用`touchend`，因为`click`没有注册。我很乐意同时使用这两种方法，`click touchend`但如果我在第一个侦听器中这样做，那么行为会运行两次（一次用于单击，一次用于触摸端）！

## 更新

我发现问题在于我“可能”在`document`. 当我委托第二个`click`听众阅读类似的东西时，`$("#times-popup").on("click", ".time.true", ...`它又起作用了。

我仍然认为这是某个地方的错误，无论是在 jQuery 还是在 iOS 中......更可能是 jQuery，还是我在做一些我不应该做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:59:30.087

> 在 iPhone 上，事件委托不适用于 click 事件。它适用于 mouseover 和 mouseout，适用于触摸事件，但不适用于单击。
> 
> 但是...如果事件的目标是链接或输入字段，则事件委托确实有效。

[http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html)

因此，一种方法是将`.date-button`元素更改为 type`a`或`input`. 或者，在您的页面中添加一点 CSS 也可能会修复您的错误：

```
.date-button {
    cursor: pointer;
} 
```

见：http: [//jimmybyrum.com/tests/eventdelegation.html](http://jimmybyrum.com/tests/eventdelegation.html)

# jquery - Jquery 退出弹出窗口

> ID：14027370
> 
> 赞同：1
> 
> 时间：2012-12-25T03:14:04.587
> 
> 标签：jquery

我正在尝试将此调整用于我的博客：[http ://www.tonylea.com/2011/creating-a-jquery-exit-popup/#comment-909](http://www.tonylea.com/2011/creating-a-jquery-exit-popup/#comment-909)

基本上它的作用是只有当您的鼠标向上移出页面时才会显示弹出窗口。

这是代码：

```
<script type="text/javascript">

    var oldPosition = -1;
    $(document).ready(function() {
        $(document).mousemove(function(e) {
            $('#exitpopup').css('left', (window.innerWidth/2 - $('#exitpopup').width()/2));
            $('#exitpopup').css('top', (window.innerHeight/2 - $('#exitpopup').height()/2));

            var position = e.pageY - $(window).scrollTop();
            if(position < 10){
                if(oldPosition != -1){
                    if(position < oldPosition){
                        // Show the exit popup
                        // make sure it's moving upward
                            $('#exitpopup_bg').fadeIn();
                            $('#exitpopup').fadeIn();

                    }
                    oldPosition = position;
                }else{
                    oldPosition = position;
                }
            }
            // $('#divData').html(oldPosition + " : " + position);
        });

        $('#exitpopup_bg').click(function(){
            $('#exitpopup_bg').fadeOut();
            $('#exitpopup').slideUp();
        });
    });
</script> 
```

**问题1：**虽然我没有看到代码有任何问题，但是当你的鼠标向下移动到页面时，弹出窗口也会出现，为什么会出现这种情况？

**问题 2：**当您快速将鼠标拖出页面时，什么也没有出现。那么，我如何确保它在这种情况下也能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:09:51.320

1）这段代码是说如果光标进入页面的前 10 个像素，以显示弹出窗口，是否有人试图退出。下移时仍满足页面前10像素条件的情况。

2）当你快速移动鼠标时，它可能不会触发事件，因为它会以特定的速率触发 mousemove 事件，所以当鼠标移动得太快时，事件实际上并没有被捕获。没有什么可以做的，电脑、操作系统和浏览器决定了这个速度。

解决这个问题的建议是使用`onbeforeunload`浏览器事件来询问用户是想留下还是真的离开页面：

[检测用户何时离开网页的最佳方法？](https://stackoverflow.com/questions/147636/best-way-to-detect-when-a-user-leaves-a-web-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:24:52.537

`oldPosition`您的脚本的部分问题是，当它们不在 10px 范围内时，您永远不会重置为 -1。

如果它们在向下移动的浏览器之外，它将设置`oldPosition`为一个值。现在将鼠标移出浏览器（右侧、左侧或底部）并再次从顶部向下拖动，如果新位置小于 ，`oldPosition`即使它们没有向上移动，您的脚本也会触发。

要解决*问题 1*，请让您的第一个`if`语句包含`else`重置`oldPosition`：

```
if(position < 10){
    ...
} else {
    oldPosition = -1;
} 
```

问题 2 的运行速度与浏览器可以提供脚本 mousemove 事件一样快。你对此无能为力。

# c++ - 在继承的对象中切片

> ID：14027372
> 
> 赞同：3
> 
> 时间：2012-12-25T03:14:26.603
> 
> 标签：c++, virtual, copy-constructor, assignment-operator, object-slicing

以下案例指出了切片问题： 在分配期间： [https ://stackoverflow.com/a/274634/640639](https://stackoverflow.com/a/274634/640639)

在函数调用期间： [什么是对象切片？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c#274636)

我的问题是，如果将赋值运算符和复制构造函数声明为虚拟并且派生类适当地复制所需的数据，这两种情况都不会得到解决吗？如果原则上是这样，在这些情况下传递值应该仍然有效，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:18:24.867

不会。参数是按值传递的，因此会创建一个新的基础对象。

没有虚拟构造函数，`virtual`意思是“依赖于动态类型`this`”，在构造函数运行之前，对象甚至都不存在，所以它不能有派生的动态类型。

虚拟赋值运算符也无济于事，因为它们取决于被分配对象的类型，而不是被分配对象的类型。

如果您希望能够按值复制但仍然具有多态行为，则可以创建一个对象，该对象包含指向另一个对象的指针，并在其构造函数和赋值运算符中克隆该对象（使用类似Martinho Fernandes' Wheels中的[value_ptr](https://bitbucket.org/martinhofernandes/wheels/src/e44e35d607ca/include/wheels/smart_ptr/value_ptr.h%2B%2B)图书馆）：

```
class Base {
    public:
    virtual Base* clone() const = 0;
    virtual void do_stuff() = 0;
};

class CopyablePolymorphic {
public:
    CopyablePolymorphic(Base* base) : ptr(base) {}
private:
    value_ptr<Base> ptr;
};

class Derived1 : public Base {
public:
    virtual Base* clone() const {
        return new Derived1(*this);
    }
    virtual void do_stuff() {
        //Derived1 stuff
    }
};

class Derived2 : public Base {
public:
    virtual Base* clone() const {
        return new Derived2(*this);
    }
    virtual void do_stuff() {
        //Derived2 stuff
    }
};

//etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:19:39.457

显然，您不能将复制构造声明为`virtual`：尚无对象。不过，您可以禁用复制构造。

也就是说，赋值`virtual`仍然不起作用，因为在切片对象时，所分配对象的静态类型仍然只是一个基类。它永远不会成为独立于您分配给它的类型的派生类。

# jquery - jQuery根据公式更改所有后代DOM ID

> ID：14027375
> 
> 赞同：1
> 
> 时间：2012-12-25T03:15:42.607
> 
> 标签：jquery, jquery-selectors

我正在用 jQuery 克隆一个 DOM 元素，它`div`有很多后代。在将克隆的内容`div`插入 DOM 之前，我需要更改`id`那些拥有的后代的属性。我可以对我`id`已经知道的元素执行此操作，如下所示（假设`newElem`是我在预插入阶段克隆的元素）：

```
newElem.find('#question_0_0').attr('id', 'question_' + num1 + '_' + num2); 
```

我的问题是`div`被克隆的一部分是以编程方式生成的。本节中有许多（数十个）div。`id`我需要在插入 DOM 之前在我的克隆中修改生成的 s 末尾的数字，但是在加载页面`div`之前我不知道每个 id 的*开头是什么。*

我如何编写有效地捕获所有以`id`s 结尾的元素`_0_0`（div 的第一部分未知）并将这些`id`s 更改为 ~whatever~_+num1_num2 的东西？我知道我可以使用通配符来捕获所有以 结尾的元素`_0_0`，但我不知道如何在重写 id 时重用“捕获的”通配符部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:31:34.443

```
$('[id$=_0_0]').prop('id', function(){
    var x = $(this).prop('id').split('_')[0]; //part before _0_0
    return x +'_'+ num1 + '_' + num2;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:29:54.693

```
$('[id$="_0_0"]').prop('id', function(index, currentID) {
    return 'question_' + num1 + '_' + index;
}) 
```

# oracle - 如何在一个查询中填充 oracle 对象的集合？

> ID：14027379
> 
> 赞同：1
> 
> 时间：2012-12-25T03:16:43.740
> 
> 标签：oracle, collections, plsql, oracle11g, rdbms

```
CREATE OR REPLACE TYPE pack.D_O IS OBJECT(
r number,
l number,
s_pack number(3),
s_pack_name varchar2(50),
n_uch number(5),
type_name varchar2(30),
date_att date,
cause_att number(2),
cause_att_name varchar2(250)
)

----------------------------------------------------------------------
CREATE OR REPLACE TYPE pack.D_T IS TABLE OF pack.D_O;

----------------------------------------------------------------------
CREATE OR REPLACE TYPE pack.d2_o IS OBJECT(
d NUMBER(5),
n VARCHAR2(75),
m VARCHAR2(75),
f number,
z pack.D_T
)

----------------------------------------------------------------------
select pack.d2_O(
manager,
name,
office,
regalias,
? -- how to fill "z" collection here?
)
from 
t1,t2
where 
..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:56:12.957

您需要创建一个`D_T`, 具有 0 个或更多`D_O`s：

```
select pack.d2_O(
  manager,
  name,
  office,
  regalias,
  pack.D_T(
    pack.D_O(1,2,3,4,5,6,sysdate,8,9),
    pack.D_O(1,2,3,4,5,6,sysdate,8,9)
  )
)
from 
t1,t2 
```

**编辑**

或用于`CAST(COLLECT`从子查询中填充 Z：

```
select pack.d2_O(
  manager,
  name,
  office,
  regalias,
  (
    select cast(collect(d_o(a,b,c,d,e,f,g,h,i)) as d_t)
    from t2
  )
)
from 
t1 
```

# c - typedef 的冲突类型

> ID：14027384
> 
> 赞同：0
> 
> 时间：2012-12-25T03:17:57.177
> 
> 标签：c, struct, header, typedef

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:05:06.323

用 C 语言制作 ADT 既简单又有趣，也是一次很好的学习体验。但是，您不能用任何基于 C 的语言制作可用于不同 ADT 的真正通用 ADT，您必须为每个 ADT 制作单独的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:36:50.197

不，您尝试做的事情不合逻辑。您告诉编译器将 2 个不同的事物（int 和 link_t）类型定义为 1 个事物（item_t）。那没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:24:21.410

您将无法通过广泛的复制粘贴来解决此问题。如果您想`link_t`根据此处的模型将 3 存储在 BST 中`node_t`，那么您必须定义一个具有新名称的新结构。（您也可以使用联合在 BST 的每个元素中存储 a`link_t`或 an `item_t`，但这对于您的目的可能过于复杂。）

# css - 如何使用 CSS 创建一行具有流动间距的对齐元素？

> ID：14027385
> 
> 赞同：2
> 
> 时间：2012-12-25T03:18:03.247
> 
> 标签：css, cross-browser, fluid-layout, multiple-columns, justify

如何使用 、 和/或其他 CSS 属性创建一行具有自动宽度的`text-align:justify`块`display: flex`元素`column-count`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:18:03.247

使用以下组件：

*   行的`text-align:justify`容器
*   `inline-block`每列一个容器
*   用于拉伸内部的`inline-block`占位符`width:100%`

`

```
 /*Row container is justified*/
    #container { width: 100%; text-align: justify; }

    /*Column container and placeholder are inline-block*/
    object, span { display: inline-block; }

    /*Placeholder is stretched to enforce shrink-wrapping*/
    span { width: 100%; }
```

```
 <!--row-->
      <div id="container">
        <!--column-->
        <object>
          <!--content-->
          <div>
          foo
          </div>
        </object>
        <object>
          <div>
          bar
          </div>
        </object>
        <object>
          <div>
          baz
          </div>
        </object>
        <object>
          <div>
          bop
          </div>
        </object>
        <object>
          <div>
          bip
          </div>
        </object>
        <!--placeholder-->
        <span></span>
      </div>
```

或者使用`text-align:justify`具有嵌套`inline-block`和`column-count`行的容器，其中`column-count`的数字等于子元素的数量：

```
#main, #container { width: 100%; }
#main { text-align: justify; }
#container { display:inline-block; } 
#container { -moz-column-count: 5; -webkit-column-count: 5; column-count: 5;}
```

```
<!--full width container-->
<div id="main">

<!--justified inline-block row-->
  <div id="container">
     <!--columns-->
      <div>
      foo
      </div>
      <div>
      bar
      </div>
      <div>
      baz
      </div>
      <div>
      bop
      </div>
      <div>
      bip
      </div>
  </div>
</div>
```

或者一个全宽容器，其中包含`display:flex; flex-direction: row`和 列`flex:auto`：

```
#flex-container {
	display: -webkit-flex;
	display: flex;
	-webkit-flex-direction: row;
	flex-direction: row;
  width: 100%;
}

#flex-container > .flex-item {
	-webkit-flex: auto;
	flex: auto;
}
```

```
<div id="flex-container">
    <div class="flex-item">Foo</div>
    <div class="flex-item">Bar</div>
    <div class="flex-item">Baz</div>
    <div class="flex-item">Bop</div>
    <div class="flex-item">Bip</div>
</div>
```

或者`display:grid`对于and`auto`中的每一列：`grid-template-columns``justify-content: space-between`

```
#grid-container {
  display: grid;
  grid-template-columns: auto auto auto auto auto;
  justify-content: space-between;
  }
```

```
 <div id="grid-container">
        <div>Foo</div>
        <div>Bar</div>
        <div>Baz</div>
        <div>Bop</div>
        <div>Bip</div>
    </div>
```

或者`display: inline-grid`对于and`auto`中的每一列：`grid-template-columns``text-align: justify`

```
#grid-container {
  display: inline-grid;
  grid-template-columns: auto auto auto auto auto;
  width: 100%;
  text-align: justify;
  }
```

```
 <div id="grid-container">
        <div>Foo</div>
        <div>Bar</div>
        <div>Baz</div>
        <div>Bop</div>
        <div>Bip</div>
    </div>
```

> 块级元素生成一个主要的块级框，其中包含后代框和生成的内容，也是任何定位方案中涉及的框。
> 
> 一些块级元素可能会生成除主框之外的其他框：“列表项”元素。这些附加框相对于主框放置。
> 
> 不可替换的内联块和不可替换的表格单元格是块容器，但不是块级框。
> 
> 非行内框的行内层框（例如替换的行内层元素、行内块元素和行内表元素）称为原子行内层框，因为它们作为单个不透明框参与其行内格式化上下文。
> 
> 当一行上的行内级别框的总宽度小于包含它们的行框的宽度时，它们在行框中的水平分布由'text-align'属性确定。如果该属性的值为“justify”，则用户代理也可以拉伸内联框中的空格和单词（但不能拉伸内联表和内联块框）。

**参考**

*   [CSS 2.1：视觉格式化模型](http://www.w3.org/TR/CSS21/visuren.html)

*   [对齐网格](http://justifygrid.com/)

*   [CSS 基本盒子模型](http://www.w3.org/TR/css3-box/)

*   [CSSPlay：带有粘性页脚的基本 Flex Box 圣杯布局](http://www.cssplay.co.uk/layouts/cssplay-flex-basic-layout.html)

*   [自适应布局的 CSS 功能](https://blogs.msdn.microsoft.com/ie/2011/04/14/ie10-platform-preview-and-css-features-for-adaptive-layouts/)

*   [CSS 等距对象 | CSS 技巧](https://css-tricks.com/equidistant-objects-with-css/)

*   [如何使用 CSS3 列 | 网页设计师仓库](https://www.webdesignerdepot.com/2013/03/how-to-use-css3-columns/)

*   [内联框和原子内联框的区别](https://stackoverflow.com/questions/21557803/1113772)

*   [块级盒子和主要块级盒子有什么区别？](https://stackoverflow.com/questions/15114396/1113772)

*   [块容器盒内的内联和块级盒](https://stackoverflow.com/questions/21550554/1113772)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T01:31:25.000

你可以试试这个：

*   使用`text-align:justify`容器；
*   使用`:after`容器；
*   使用`display:inline-block`到列；
*   最后在之前添加一些休息；

### HTML

```
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
  <li>5</li>
  <li>6</li>
  <li>7</li>
  <li>8</li>
  <li>9</li>
  <li>10</li>
  <li>11</li>
  <li>12</li>
  <li>13</li>
  <li>14</li>
  <li class="break"></li>
  <li class="break"></li>
  <li class="break"></li>
  <li class="break"></li>
</ul> 
```

### CSS

```
ul {
  list-style: none outside none;
  margin:0;
  padding: 0;

  text-align: justify;
  font-size: 0.1px; /*hide whitespace between elements*/
}
ul:after{
  content: '';
  display: inline-block;
  width: 100%;
}
li {
  display: inline-block;
  width: 200px;
  height: 200px;
  background: hsla(20,50%,85%,09);
  padding: 0;
  margin: 10px;

}
.break {
   height: 0;
} 
```

请查看[演示](http://codepen.io/airen/pen/ovAtz)。更多详情请点击[这里](http://www.w3cplus.com/css/text-align-justify-and-rwd.html)。

# jsf - 验证文件上传？JSF

> ID：14027398
> 
> 赞同：0
> 
> 时间：2012-12-25T03:18:58.693
> 
> 标签：jsf, file-upload

我想在用户继续之前验证已选择的文件，我该怎么做？

```
<h:form enctype="multipart/form-data">
                    Upload a text file:
                    <corejsf:upload value="#{user.fileText}"/><br/><br/>

                    <h:commandButton value="Submit" action="/submittedText"/> 
```

我只是想确保用户选择了一个文件，在这个阶段是否可以验证选择了什么类型的文件 IE 只有一个 .txt ？

# delphi - 如何使用命令行编译包

> ID：14027401
> 
> 赞同：1
> 
> 时间：2012-12-25T03:19:14.990
> 
> 标签：delphi, delphi-7

我对德尔福很陌生。我尝试使用命令行编译我的项目中的一个包，我收到以下错误

```
dxmdaset.pas Fatal:F1026 File not found: CompatLib_DXE.dcp 
```

我使用以下批处理文件

**BuildAll.bat**

```
call rsvars.bat     
set COMPILER=%BDS%\bin\DCC32.EXE
echo Compiler: %COMPILER%
echo.
MD "%CURRENT_DIR%\..\bin"
MD "%CURRENT_DIR%\..\bin\bpl"
MD "%CURRENT_DIR%\..\bin\dcu"
cd %CURRENT_DIR%\..\bin\bpl
del *.bpl /q
del *.dcp /q
del *.drc /q
del *.map /q
cd %CURRENT_DIR%\%VCLFOLDER%\RemObjects SDK
del wo3p_03_DXE.* /s/q

:Build_CompatLib
echo ...Building CompatLib...
echo.
cd %CURRENT_DIR%\%VCLFOLDER%
call BuildCompatLib.bat

:Build_DevExpress_Old
echo ...Building DevExpress...
echo.
cd %CURRENT_DIR%\%VCLFOLDER%
call BuildDevExpress.bat old 
```

**BuildCompatLib.bat**

```
@echo off
if "%COMPILER%" == "" goto no_compiler
echo Building ComaptLib Component Library:
set COMPILER_OPTIONS=%2 %3 %4 %5 %6 %7 %8 %9
set COMAPTLIB_ROOT=%CD%\Compatibility
if not "%2" == "" echo You specified these dcc32 options: %COMPILER_OPTIONS%
if     "%2" == "" echo Recreating all DCUs then linking td32 info and writing a detailed 
map file.

if     "%2" == "" set COMPILER_OPTIONS=-q -b -gd -v
echo.
:CompatLib
cd %COMAPTLIB_ROOT%
echo Compiling CompatLib_DXE %COMPILER_OPTIONS%
echo.
     "%COMPILER%" CompatLib_DXE.dpk %COMPILER_OPTIONS%

if ERRORLEVEL 1 goto error
echo.
:end_ComaptLib
echo no errors in building CompatLib packages
echo.
echo.
goto end
:error
echo.
echo ERROR! building CompatLib packages: %~f0
echo.
pause
:end 
```

**BuildDevExpress.bat**

```
@echo off
rem Compiler defined in calling batch file
if "%COMPILER%" == "" goto no_compiler
echo Building DevExpress Component Libraries:
set COMPILER_OPTIONS=%2 %3 %4 %5 %6 %7 %8 %9
set DEVEXPRESS_ROOT=%CD%
if not "%2" == "" echo You specified these dcc32 options: %COMPILER_OPTIONS%
if     "%2" == "" echo Recreating all DCUs then linking td32 info and writing a detailed map file.
if     "%2" == "" set COMPILER_OPTIONS=-q -b -gd -v
echo.
:DevExpressCommon
:DevExpressMemData
set PKG_LOCATION=DevExpress\ExpressMemData\Delphi 7\Sources
rem set PKG_LOCATION=DevExpress New\ExpressMemData\Packages
cd %DEVEXPRESS_ROOT%\%PKG_LOCATION%
echo Compiling dxmds_DXE.dpk %COMPILER_OPTIONS%
echo.
     "%COMPILER%" dxmds_DXE.dpk %COMPILER_OPTIONS%
echo Compiling dcldxmds_DXE.dpk %COMPILER_OPTIONS%
echo.
     "%COMPILER%" dcldxmds_DXE.dpk %COMPILER_OPTIONS%
if ERRORLEVEL 1 goto error
cd %DEVEXPRESS_ROOT%
echo. 
```

编译时出现错误`dcldxdms_dxe.dpk`。它实际上是在寻找`compatlib_dxe.dcp`较早编译但找不到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:53:21.967

你需要要么

*   包括正确的命令行开关和编译器命令行的路径，或者
*   在提供它们的项目文件夹中提供 DCC32.CFG 文件。

要找到编译器需要的开关，只需从命令行`dcc32`不带参数（或带`/?`or `--help`）运行：

```
c:\Users\YourName>dcc32 
```

或查看 Delphi 帮助文件主题`DCC32.CFG`（准确搜索该帮助，不带引号）：

> 您可以在名为 DCC32.CFG 的配置文件中设置选项列表，然后除了在命令行中输入的选项之外，还将使用该选项列表。配置文件中的每一行对应于在实际命令行参数之前插入的额外命令行参数。因此，通过创建配置文件，您可以更改任何命令行选项的默认设置。
> 
> 命令行编译器允许您多次输入相同的命令行选项，而忽略除最后一次出现的所有选项。这样，即使您使用配置文件更改了某些设置，您仍然可以在命令行上覆盖它们。
> 
> 当 dcc32 启动时，它会在当前目录中查找 DCC32.CFG。如果在那里找不到该文件，则 dcc32 将在 DCC32.EXE 所在的目录中查找。
> 
> 这是一个示例 DCC32.CFG 文件，为包含、对象和单元文件定义了一些默认目录，并更改了 $O 和 $R 编译器指令的默认状态：

```
-IC:\DELPHI\INC;C:\DELPHI\SRC

-OC:\DELPHI\ASM
-UC:\DELPHI\UNITS
-$R+

-$O- 
```

> 现在，如果您键入：
> 
> dcc32 神秘的东西
> 
> 编译器的执行就像您输入了以下内容一样：

```
dcc32 -IC:\DELPHI\INC;C:\DELPHI\SRC -OC:\DELPHI\ASM -UC:\DELPHI\UNITS -$R+ -$O- MYSTUFF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:00:00.427

从 IDE 编译时，Delphi 将添加项目设置中的库路径以及 Delphi 自己的库路径。

如果从命令行编译，则需要将所有这些作为参数添加到编译器。

还有一个选项可以查看从 IDE 调用时 Delphi 发送给编译器的行，但我不记得他们是什么时候添加的，所以它在 Delphi 7 中可能不可用。

# javascript - 如何在不同的设备、网络下为移动网络应用编写可靠的单元测试？

> ID：14027409
> 
> 赞同：2
> 
> 时间：2012-12-25T03:21:05.990
> 
> 标签：javascript, unit-testing, cordova, jasmine

我正在开发基于 PhoneGap 的网络应用程序。基本上我使用 Jasmine 作为我的测试框架。但是编写健壮的单元测试对我来说很痛苦。我遇到了这些问题，

1.  网络有时会变得不稳定
2.  设备差异，有的 CPU 频率高，内存大，有的低
3.  gps信号在不同情况下可能会变强或变弱

单元测试的结果可能会因上述不确定条件而异。如何消除这些副作用并获得更稳健、更可靠的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:34:52.473

我不确定我能否回答您关于如何消除这些副作用的实际问题，因为我对您的环境了解不多。但是，我确实认为您可以以不同的方式考虑您的测试，这可能会有所帮助。

您的单元测试不应该考虑诸如“如果运行测试时信号变弱怎么办”之类的情况。相反，您应该有一个单元测试来模拟该条件，然后测试您的应用程序在这些条件下的预期行为。当您可以复制假设情况时，您就可以有效地为它们编写单元测试。

下一个明显的问题是如何复制假设条件，我不确定 PhoneGap 或 Jasmine 是否真的可以直接解决。也许您可以在模拟器中控制某些东西，从而有效地重现弱网络/gps 信号。CPU/RAM 功率的差异是您可能只需要大量设备来测试的东西。

# xcode - 为什么我的 MainStoryboard 没有出现在 Base 本地化列表中？

> ID：14027411
> 
> 赞同：4
> 
> 时间：2012-12-25T03:21:18.393
> 
> 标签：xcode, storyboard

我使用的是 xcode 4.5.2 和 iOS 6.0，但为什么我的 MainStoryboard 文件没有出现在 Base 本地化列表中？

![为什么我的 MainStoryboard 没有出现在 Base 本地化列表中？](../Images/b90726cc1d6877c14c364e147ad7ecf5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T10:06:00.320

您需要选择您的故事板，然后在属性检查器的第一个选项卡中，选择本地化，它会将其添加到您的本地化中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T14:21:11.907

我工作区中的一些项目也有同样的事情。

答案在 Apple 的文档中：

> 如果对话框中未显示任何资源，请将 .storyboard 和 .xib 文件添加到语言中，如向语言文件夹中添加其他资源中所述，然后重复这些步骤。

**开发者文档：**
[国际化和本地化指南](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/InternationalizingYourUserInterface/InternationalizingYourUserInterface.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T05:58:41.857

如果您查看[Xcode 发行说明](https://developer.apple.com/library/mac/releasenotes/DeveloperTools/RN-Xcode/_index.html#//apple_ref/doc/uid/TP40001051-SW145)，它们会声明：

> 项目编辑器中的 Use Base Internationalization 设置仅适用于在 OS X v.10.8 及更高版本上部署的 Mac 产品。Xcode 还必须在 OS X v.10.8 或更高版本上运行。iOS 项目不支持此设置。11712855

# php - 无法从表中获取特定数据，其他工作

> ID：14027414
> 
> 赞同：0
> 
> 时间：2012-12-25T03:21:58.687
> 
> 标签：php, mysql

 `````
$sql = "SELECT sid FROM staff WHERE position > 0 ORDER BY name ASC";
  $result = mysql_query($sql) or die(mysql_error());
  while($row = mysql_fetch_array($result)):
    $staff->getInfo($row['sid']);
    echo "<a href='index.php?page=staff&sid=".$staff->sid."'>";
    echo $staff->name;
    echo "</a>, ";
    echo $staff->printPosition();
    echo "<br />";
  endwhile; 
````  `我可以显示员工姓名和职位，但是当我尝试获取 URL 的 sid 时 - 它不起作用。它只是结束为：

index.php?page=staff&sid=

有什么办法可以解决这个问题？

编辑：

```
 function getInfo($sid)
    {
        $sql = "SELECT * FROM staff WHERE sID = '$sid'";
        $result = mysql_query($sql) or die(mysql_error());
        $row = mysql_fetch_array($result);
        $this->sid = $row['sid'];
        $this->branch = $row['branch'];     
        $this->name = $row['name'];
        $this->position = $row['position']; 
        $this->startDate = $row['startDate'];
        $this->div = $row['div'];
        $this->tag = $row['tag'];
    } 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:55:24.160

基本调试要求您应该在分配给“行”的点将 var_dump 放入 getInfo 函数中。如果 vardump 显示 row[sid] 为空，则您的查询有问题。我的猜测是列名是 sID，当您查询 1 时，您在技术上将该列别名为所有小写 sid。但是当您选择 * 时，mysql_fetch 会将包括大小写在内的实际列名分配给变量。因此，请检查数据库中列的大小写，并确保您的数组键与大小写匹配。``

# knockout.js - 当模板使用 $data 绑定处理程序时，淘汰赛不更新视图

> ID：14027416
> 
> 赞同：5
> 
> 时间：2012-12-25T03:22:02.153
> 
> 标签：knockout.js

我正在尝试以某种方式编写我的 KO 模板，它似乎导致了 Knockout 的问题，它停止更新视图。我希望在我的视图中尽可能避免过多的显式依赖，所以当我编写一个添加到文件附件列表的模板时，我想我可以利用这个`$data`变量：

```
<script id="attachments-template" type="text/html">
    <input type="button" data-bind="attachments: $data" value="add">
</script> 
```

和模板绑定：

```
<div data-bind="template: {name: 'button-add-data', data: attachments}"></div> 
```

这会将实际属性映射到使用站点中，而不是在随机模板中关闭。在我的实际案例中，`attachments`绑定处理程序包装了 jQuery fileupload 插件，但`push(i++)`无论如何调用都会显示问题。

```
var i = 0;
ko.bindingHandlers.attachments = {
    init: function(element, valueAccessor) {
        var files = valueAccessor();
        $(element).click(function() {
            files.push(i++);
        });
    }
};

var list = ko.observableArray();
var model= {
    attachments: list
}; 
```

使用 KO 2.2.0 显示这一点的小提琴：http: [//jsfiddle.net/stofte/sWGkJ/](http://jsfiddle.net/stofte/sWGkJ/)小提琴还表明，对显式属性的绑定可以正常工作。

显然，Google 上有很多关于 KO 和绑定上下文的内容，但我找不到任何关于在绑定处理程序中使用 $data 的内容，我不确定我在使用 $data 时违反了哪些 KO 法律，但似乎能够做我想做的事情很有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:49:31.590

看起来淘汰赛并不完全期望您将 an 传递`observableArray`到`data`模板绑定的参数中。通常这就是 a`foreach`的用途。似乎`data`期望常规对象行为正确（需要引用，除了它似乎以这种方式行为之外找不到任何文档）。

使用与您相同的 JS 代码，最简单的解决方案似乎是将可观察数组直接包装在模板绑定中：

```
<script id="button-add-data" type="text/html">
    isObservable: <span data-bind="text: ko.isObservable(items)"></span><br>
    toJSON: <span data-bind="text: ko.toJSON(items)"></span><br>
    <input type="button" data-bind="attachments: items" value="doesnt update">
</script>
<div data-bind="template: {name: 'button-add-data', data: { items: attachments }}"></div> 
```

或者，您可以覆盖您的模板 bindingHandler 并创建一个可以传递的新参数，以简化这种类似的行为。链接：[knockoutjs 覆盖绑定处理程序](https://stackoverflow.com/questions/9002163/knockoutjs-overriding-bindinghandlers)

# python - Pylint 的“公共方法太少”消息是什么意思？

> ID：14027417
> 
> 赞同：135
> 
> 时间：2012-12-25T03:22:03.213
> 
> 标签：python, pylint

我在一些代码上运行 Pylint，并收到错误“公共方法太少（0/2）”。这条消息是什么意思？

Pylint[文档](http://docs.pylint.org/features.html#id22)没有帮助：

> 当一个类的公共方法太少时使用，所以确保它真的值得。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-12-25T04:30:49.620

该错误基本上表明类不*只是*存储数据，因为您基本上将类视为字典。类应该至少有几个方法来操作它们所持有的数据。

如果您的课程如下所示：

```
class MyClass(object):
    def __init__(self, foo, bar):
        self.foo = foo
        self.bar = bar 
```

考虑使用字典或 a`namedtuple`代替。虽然如果一个类看起来是最好的选择，那就使用它。Pylint 并不总是知道什么是最好的。

请注意，它`namedtuple`是不可变的，并且在实例化时分配的值以后不能修改。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-03-18T19:49:09.893

如果您正在扩展一个类，那么我的建议是系统地禁用此警告并继续，例如，在 Celery 任务的情况下：

```
class MyTask(celery.Task):  # pylint: disable=too-few-public-methods                                                                                   
    """base for My Celery tasks with common behaviors; extends celery.Task

    ... 
```

即使你只是扩展一个功能，你肯定需要一个类来让这个技术发挥作用，而且扩展绝对比破解第三方类更好！

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-06-20T07:39:25.147

这是皮林特盲法的另一个例子。

“类不是用来存储数据的”——这是一个错误的陈述。字典并不适合所有事情。类的数据成员是有意义的，字典项是可选的。证明：你可以`dictionary.get('key', DEFAULT_VALUE)`阻止 a `KeyError`，但没有简单`__getattr__`的默认值。

## 使用结构的推荐方法

我需要更新我的答案。现在 - 如果你需要一个`struct`，你有两个很好的选择：

### a) 只需使用`attrs`

这是一个图书馆：

[https://www.attrs.org/en/stable/](https://www.attrs.org/en/stable/)

```
import attr

@attr.s
class MyClass(object):  # Or just MyClass: for Python 3
    foo = attr.ib()
    bar = attr.ib() 
```

你会得到额外的东西：不编写构造函数、默认值、验证、`__repr__`只读对象（`namedtuples`即使在 Python 2 中也可以替换）等等。

### b) 使用`dataclasses`(Py 3.7+)

根据 hwjp 的评论，我还建议`dataclasses`：

[https://docs.python.org/3/library/dataclasses.html](https://docs.python.org/3/library/dataclasses.html)

这几乎和 一样好`attrs`，并且是标准库机制（“包含电池”），没有额外的依赖项，除了 Python 3.7+。

### 上一个答案的其余部分

`NamedTuple`不是很好 - 特别是在 Python 3 之前`typing.NamedTuple`： [https ://docs.python.org/3/library/typing.html#typing.NamedTuple](https://docs.python.org/3/library/typing.html#typing.NamedTuple)

*   您绝对应该检查“派生自`NamedTuple`”模式。Python 2 -`namedtuples`从字符串描述创建 - 丑陋，糟糕并且“在字符串文字中编程”很愚蠢。

我同意当前的两个答案（“考虑使用其他东西，但 Pylint 并不总是正确的” - 被接受的答案和“使用 Pylint 抑制评论”），但我有自己的建议。

让我再次指出这一点：有些类*只是*为了存储数据。

现在还要*考虑*的选项- 使用`property`-ies。

```
class MyClass(object):
    def __init__(self, foo, bar):
        self._foo = foo
        self._bar = bar

    @property
    def foo(self):
        return self._foo

    @property
    def bar(self):
        return self._bar 
```

上面你有只读属性，这对于值对象是可以的（例如，像领域驱动设计中的那些），但你也可以提供设置器 - 这样你的类将能够对你拥有的字段负责 - 对于例如做一些验证等（如果你有设置器，你可以在构造函数中使用它们进行分配，即，`self.foo = foo`而不是直接`self._foo = foo`，但小心，设置器可能假设其他字段已经初始化，然后你需要在构造函数）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-04-01T09:10:04.760

当你的老板期望[单一责任原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)时，这很难，但 Pylint 拒绝了。所以向你的类添加第二个方法，这样你的类就违反了单一责任原则。在旁观者的眼中，您应该在多大程度上采取单一责任原则。

### 我的修复

我在我的类中添加了一个额外的方法，所以它现在做了两件事。

```
def __str__(self):
    return self.__class__.__name__ 
```

我只是想知道我现在是否需要将我的课程分成两个单独的文件，也许还有模块。

问题解决了，但不是我的同事整天都在争论规范，而不是继续下去，就像生死攸关一样。

# objective-c - XML 解析 - 使用 KissXML 和 XPath 将属性分组到 nsdictionary

> ID：14027420
> 
> 赞同：0
> 
> 时间：2012-12-25T03:23:08.363
> 
> 标签：objective-c, cocoa, core-data, xpath, kissxml

我尝试的目标是解析这个 xml 文档[https://api.eveonline.com/eve/SkillTree.xml.aspx](https://api.eveonline.com/eve/SkillTree.xml.aspx)并最终将其放入核心数据中。

但我遇到问题的片段是

```
<rowset name="requiredSkills" key="typeID" columns="typeID,skillLevel">
          <row typeID="13279" skillLevel="3" />
          <row typeID="3402" skillLevel="4" />
        </rowset> 
```

我遇到的问题是试图弄清楚如何将 typeID 和 SkillLevel 保持在一起以保存在 nsdictionary 中。

所以我们的目标是将每个都`<row typeID="13279" skillLevel="3" />` 放入自己的对象中。

我使用的主要代码是

```
-(void)parseXMLFromBundle
{
NSError *error;

NSString *path = [[NSBundle mainBundle] pathForResource:@"SkillTree" ofType:@"xml"];

DDXMLDocument *xmlDoc = [[DDXMLDocument alloc] initWithData:[NSData dataWithContentsOfFile:path] options:0 error:&error];

//main array with everything
NSArray *xmlItems = [xmlDoc nodesForXPath:@"//result" error:&error];
//go through it to extract each thing
for (DDXMLElement *itemElement in xmlItems)
{
self.typeArray = [itemElement nodesForXPath:@"//@typeName" error:&error];

self.requiredIDArray = [itemElement nodesForXPath:@"//row[@typeID]/@typeID" error:&error];
DLog(@"required SkillID: %@",self.requiredIDArray); 
```

}

typeName 工作正常，我想要的每个对象只有 1 个名称，但它可以有多个 typeID，所以我试图将这些值分组到 1 个对象中，以便最终将其全部导入核心数据。我知道 typeID 也只是被全部转储到一个数组中。我只是迷失了如何让元素行更好地分隔东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:53:06.673

如果您使用 NSXMLParser，那会容易得多。在每个行标签的开头，您将创建一个新对象来表示它。此时您还将获得所有属性的字典，因此您可以使用它设置新行对象实例的属性。

# c++ - 如何在 C++ 程序中创建终端命令？

> ID：14027424
> 
> 赞同：2
> 
> 时间：2012-12-25T03:24:28.410
> 
> 标签：c++, shell, terminal, command

我正在编写一个 c++ 程序，我希望人们能够从终端操作它。我唯一知道该怎么做的是`cin`，虽然在收到程序后可以采取行动，但我不会调用命令。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:27:36.833

尝试

```
#include <iostream>
int main(int argc, char* argv[])
{
    std::cout << "Command: " << argv[0] << "\n";
    for(int loop = 1;loop < argc; ++loop)
    {
        std::cout << "Arg: " << loop << ": " << argv[loop] << "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:32:28.380

在您的程序中，使用替代`int main`签名，它接受命令行参数。

```
int main(int argc, char* argv[]);
// argc = number of command line arguments passed in
// argv = array of strings containing the command line arguments
// Note: the executable name is argv[0], and is also "counted" towards the argc count 
```

我还建议将您的可执行文件的位置放在操作系统的搜索路径中，这样您就可以从任何地方调用它，而无需输入完整路径。例如，如果您的可执行文件名为`foo`, 并且位于`/home/me`（在 Linux 上），则使用以下命令（ksh/bash shell）：

```
export PATH=$PATH:/home/me` 
```

在 Windows 上，您需要将路径附加到环境变量`%PATH%`。

然后从任何地方调用`foo`程序，通常：

```
foo bar qux
(`bar` and `qux` are the command line arguments for foo) 
```

# c++ - 用于类实例的 std::thread

> ID：14027426
> 
> 赞同：2
> 
> 时间：2012-12-25T03:24:59.580
> 
> 标签：c++, multithreading, class, c++11

我正在尝试创建此类的两个实例，它们最终将使用 Win32 的 mciSendString 功能播放音乐文件。但是为了测试它，因为这是我第一次尝试使用 std::thread，我编写了一个 test(void) 方法，它输出类 ID，我希望它打印一系列 1 和 2，例如 12122111112212121212 ...

我收到以下错误，test(void) 方法确实存在吗？

错误 1 ​​错误 C2064：术语不计算为采用 0 个参数的函数

```
#include <iostream>
#include <thread>

typedef enum MusicStatus {
    MUSIC_PLAYING = 0, 
    MUSIC_PAUSED, 
    MUSIC_STOPPED, 
    MUSIC_IDLE
} MusicStatus, *pMusicStatus;

class MusicPlayer
{
public:

    MusicPlayer(void) {
        m_bIsPlaying = false;
        m_bIsPaused = false;
    }

    bool isPaused(void) {
        return m_bIsPaused;
    }

    bool isPlaying(void) {
        return m_bIsPlaying;
    }

    MusicStatus getState(void) {
        if ( !m_bIsPlaying && !m_bIsPaused && !m_bIsStopped )
            return MUSIC_IDLE;
        if ( m_bIsPlaying )
            return MUSIC_PLAYING;
        if ( m_bIsPaused ) 
            return MUSIC_PAUSED;
        if ( m_bIsStopped )
            return MUSIC_STOPPED;
        return MUSIC_STOPPED;
    }

    void test(void) {
        for ( int m = 0; m < 100; m++ ) {
            std::cout << this->n;
        }
    }

    int n;

private:

    bool m_bIsPlaying, m_bIsPaused, m_bIsStopped;

};

int main(int argc, char* argv[])
{
    MusicPlayer A;
    MusicPlayer B;
    A.n = 1;
    B.n = 2;

    std::thread t1(A);
    std::thread t2(B);

    t1.join();
    t2.join();

    A.test();
    B.test();

    system("PAUSE");
    return 0;
} 
```

更新：我做了一些调整，现在我遇到了参数列表的问题，错误：MusicPlayer::play_sound 函数调用缺少参数列表

```
#include <iostream>

#pragma comment(lib, "Strmiids.lib") 

#include <thread>
#include <dshow.h>
#include "Lib/NSL.h"

typedef enum MusicStatus {
    MUSIC_PLAYING = 0, 
    MUSIC_PAUSED, 
    MUSIC_STOPPED, 
    MUSIC_IDLE
} MusicStatus, *pMusicStatus;

class MusicPlayer
{
public:

    MusicPlayer() {
        m_bIsPlaying = false;
        m_bIsPaused = false;
        m_bIsStopped = false;
    }

    bool isPaused() {
        return m_bIsPaused;
    }

    bool isPlaying() {
        return m_bIsPlaying;
    }

    MusicStatus getState() {
        if ( !m_bIsPlaying && !m_bIsPaused && !m_bIsStopped )
            return MUSIC_IDLE;
        if ( m_bIsPlaying )
            return MUSIC_PLAYING;
        if ( m_bIsPaused ) 
            return MUSIC_PAUSED;
        if ( m_bIsStopped )
            return MUSIC_STOPPED;
        return MUSIC_STOPPED;
    }

    void playAudio(std::string strFilePath) {
        m_strFilePath = strFilePath;
        std::thread audioThread(play_sound);
        audioThread.join();
    }

private:

    bool m_bIsPlaying, m_bIsPaused, m_bIsStopped;
    std::string m_strFilePath;

    void play_sound() {
        IGraphBuilder *pGraph = NULL;
        IMediaControl *pControl = NULL;
        IMediaEvent   *pEvent = NULL;

        // Initialize the COM library.
        HRESULT hr = CoInitialize(NULL);
        if (FAILED(hr))
        {
            printf("ERROR - Could not initialize COM library");
            return;
        }

        // Create the filter graph manager and query for interfaces.
        hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, 
                            IID_IGraphBuilder, (void **)&pGraph);
        if (FAILED(hr))
        {
            printf("ERROR - Could not create the Filter Graph Manager.");
            return;
        }

        hr = pGraph->QueryInterface(IID_IMediaControl, (void **)&pControl);
        hr = pGraph->QueryInterface(IID_IMediaEvent, (void **)&pEvent);

        // Build the graph. IMPORTANT: Change this string to a file on your system.
        hr = pGraph->RenderFile(s2ws(m_strFilePath).c_str(), NULL);
        if (SUCCEEDED(hr))
        {
            // Run the graph.
            hr = pControl->Run();
            if (SUCCEEDED(hr))
            {
                // Wait for completion.
                long evCode;
                pEvent->WaitForCompletion(INFINITE, &evCode);

                // Note: Do not use INFINITE in a real application, because it
                // can block indefinitely.
            }
        }
        pControl->Release();
        pEvent->Release();
        pGraph->Release();
        CoUninitialize();
    }

};

int main(void)
{
    MusicPlayer A;
    A.playAudio("music.mp3");
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T03:38:08.633

你不能运行一个对象！您*可以*运行的是特定对象上的成员函数：`std::thread`需要告诉线程的入口函数。它使用第一个构造函数参数作为函数对象，将所有其他参数作为参数用于如何调用函数。由于您的类没有函数调用运算符，`std::thread`因此不知道要调用哪个函数。

有一种方法可以解决问题：

1.  `operator()()`您为您的类型提供一个函数调用`MusicPlayer`作为线程的入口函数。
2.  您将成员函数用作第一个参数，并将实际对象用作传递的参数，例如`std::thread t1(&MusicPlayer::test, &A)`.
3.  您使用易于绑定的函数对象作为 的参数`std::thread`，例如`std::thread t1(std::bind(&MusicPlayer::test, std::ref(A))`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:37:50.610

好的，我已经解决了我的问题，由于 std::thread，std::thread 非常适合在后台播放 mp3 文件。注意：**audioThread(&MusicPlayer::play_sound, this);**

```
#include <iostream>

#pragma comment(lib, "Strmiids.lib") 

#include <thread>
#include <dshow.h>
#include "Lib/NSL.h"

typedef enum MusicStatus {
    MUSIC_PLAYING = 0, 
    MUSIC_PAUSED, 
    MUSIC_STOPPED, 
    MUSIC_IDLE
} MusicStatus, *pMusicStatus;

class MusicPlayer
{
public:

    MusicPlayer() {

        m_bIsPlaying = false;
        m_bIsPaused = false;
        m_bIsStopped = false;
        m_pControl = NULL;
        m_pEvent = NULL;
        m_pGraph = NULL;
        m_pEventEx = NULL;
        m_pBasicAudio = NULL;
        m_pMediaSeeking = NULL;

        // Initialize the COM library
        m_hr = CoInitialize(NULL);
        if (FAILED(m_hr)) { // Could not initialize COM library");
            return;
        }

        // Create the filter graph manager and query for interfaces.
        m_hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void **)&m_pGraph);

        if (FAILED(m_hr)) { // Could not create the Filter Graph Manager
            return;
        }

        m_hr = m_pGraph->QueryInterface(IID_IMediaControl, (void **)&m_pControl);
        m_hr = m_pGraph->QueryInterface(IID_IMediaEvent, (void **)&m_pEvent);
        m_hr = m_pGraph->QueryInterface(IID_IMediaEventEx, (void **)&m_pEventEx);
        m_hr = m_pGraph->QueryInterface(IID_IBasicAudio, (void**)&m_pBasicAudio);
        m_hr = m_pGraph->QueryInterface(IID_IMediaSeeking, (void**)&m_pMediaSeeking);
    }

    ~MusicPlayer() {
        m_pControl->Release();
        m_pEvent->Release();
        m_pEventEx->Release();
        m_pGraph->Release();
        m_pBasicAudio->Release();
        m_pMediaSeeking->Release();
        CoUninitialize();
    }

    bool isPaused() {
        return m_bIsPaused;
    }

    bool isPlaying() {
        return m_bIsPlaying;
    }

    MusicStatus getState() {
        if ( !m_bIsPlaying && !m_bIsPaused && !m_bIsStopped )
            return MUSIC_IDLE;
        if ( m_bIsPlaying )
            return MUSIC_PLAYING;
        if ( m_bIsPaused ) 
            return MUSIC_PAUSED;
        if ( m_bIsStopped )
            return MUSIC_STOPPED;
        return MUSIC_STOPPED;
    }

    void playAudio(std::string strFilePath) {
        m_strFilePath = strFilePath;
        set_state(MUSIC_PLAYING);
        std::thread audioThread(&MusicPlayer::play_sound, this);
        audioThread.join();
    }

    bool stopAudio() {
        if ( getState() == MUSIC_PLAYING && m_pControl ) {
            m_hr = m_pControl->Stop();
            if ( SUCCEEDED(m_hr) ) {
                set_state(MUSIC_STOPPED);
                return true;
            }
        }
        return false;
    }

    bool pauseAudio() {
        if ( getState() == MUSIC_PLAYING && m_pControl ) {
            return SUCCEEDED(m_pControl->Pause());
        }
        return false;
    }

    long volume() {
        if ( m_bIsPlaying && m_pBasicAudio ) {
            long lVolume = -1;
            m_hr = m_pBasicAudio->get_Volume(&lVolume);
            if ( SUCCEEDED(m_hr) )
                return lVolume;
        }
        return -1;
    }

    bool setVolume(long lVolume) {
        if ( m_bIsPlaying && m_pBasicAudio ) {
            m_hr = m_pBasicAudio->put_Volume(lVolume);
            return SUCCEEDED(m_hr);
        }
        return false;
    }

    long durationInSeconds() {
        return m_ulTrackDuration / 10000000;
    }

    __int64 currentPosition() {
        if ( getState() == MUSIC_PLAYING && m_pMediaSeeking ) {
            __int64 curPosition = -1;
            m_hr = m_pMediaSeeking->GetCurrentPosition(&curPosition);
            if ( SUCCEEDED(m_hr) )
                return curPosition;
        }
        return -1;
    }

    bool setPosition(__int64* pCurrentPos, __int64* pStop, bool bAbsolutePositioning) {
        if ( getState() == MUSIC_PLAYING && m_pMediaSeeking ) {
            DWORD flags = 0;
            if ( bAbsolutePositioning )
                flags = AM_SEEKING_AbsolutePositioning | AM_SEEKING_SeekToKeyFrame;
            else
                flags = AM_SEEKING_RelativePositioning | AM_SEEKING_SeekToKeyFrame;
            m_hr = m_pMediaSeeking->SetPositions(pCurrentPos, flags, pStop, flags);
            if ( SUCCEEDED(m_hr) )
                return true;
        }
        return false;
    }

private:

    bool m_bIsPlaying, m_bIsPaused, m_bIsStopped;
    std::string m_strFilePath;

    HRESULT m_hr;
    IGraphBuilder *m_pGraph;
    IMediaControl *m_pControl;
    IMediaEvent   *m_pEvent;
    IMediaEventEx *m_pEventEx;
    IBasicAudio   *m_pBasicAudio;
    IMediaSeeking *m_pMediaSeeking;

    // 10,000,000 per second
    __int64 m_ulTrackDuration;

    void set_state(MusicStatus m) {
        switch(m) {
        case MUSIC_STOPPED:
            m_bIsStopped = true;
            m_bIsPlaying = m_bIsPaused = false;
            break;
        case MUSIC_PAUSED:
            m_bIsPaused = true;
            m_bIsPlaying = m_bIsStopped = false;
            break;
        case MUSIC_PLAYING:
            m_bIsPlaying = true;
            m_bIsPaused = m_bIsStopped = false;
            break;
        case MUSIC_IDLE:
            m_bIsPaused = m_bIsPlaying = m_bIsStopped = false;
            break;
        }
    }

    void play_sound() {
        m_hr = m_pGraph->RenderFile(s2ws(m_strFilePath).c_str(), NULL);
        if (SUCCEEDED(m_hr))
        {
            m_hr = m_pControl->Run();
            if (SUCCEEDED(m_hr)) {
                if ( m_pMediaSeeking ) {
                    m_pMediaSeeking->SetTimeFormat(&TIME_FORMAT_MEDIA_TIME);
                    m_pMediaSeeking->GetDuration(&m_ulTrackDuration);
                }
            }
        }

    }

};

int main(void)
{
    MusicPlayer A;
    A.playAudio("music.mp3");
    std::cout << A.durationInSeconds();
    system("pause");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T03:34:04.277

`std::thread`用作您的类的成员，并通过`MusicPlayer`将线程函数分配给它来启动后台线程，一旦更改为 state `MUSIC_PLAYING`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T03:35:23.797

小问题：

```
MusicPlayer(void)
bool isPaused(void)
bool isPlaying(void) 
```

具有零参数的函数定义为：

```
MusicPlayer()
bool isPaused()
bool isPlaying() 
```

主要问题。

线程对象构造函数采用函子。因为您不传递任何参数，所以仿函数也必须采用零参数。这意味着您传递给线程的对象必须可以像这样调用：

```
MusicPlayer A;
std::thread t1(A);

// This means that the object A is callable like a function.
A();

// For this to work the class MusicPlayer must define the opropriate function operator:

class MusicPlayer
{
    public:
        void operator()() { /* Code run inside thread */ }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T14:59:58.830

你可以尝试类似的东西

```
std::thread audioThread(([this](){MusicPlayer::play_sound();}; 
```

# javascript - JavaScript - 如果#id 等于某事

> ID：14027428
> 
> 赞同：0
> 
> 时间：2012-12-25T03:26:24.090
> 
> 标签：javascript

为什么下面的代码不起作用？

```
 var err = document.getElementById("text-error").value;
        if (err == "Team already exists") {
            $('#text-error').fadeIn(400).delay(3200).fadeOut(800);
        } 
```

错误不会淡入或淡出。

检查控制台 - 没有问题。

此外，此特定错误是通过服务器发送的。

淡入和淡出适用于我的客户端错误 - 但不是与我的数据库相关的错误 - 如果这对问题有任何影响。

* * *

更新

在控制台记录之后——我意识到它没有进入 if 语句，即使它显然等于它——通过 html 代码和快速浏览页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:30:09.047

尝试 ：

```
 var err = $("#text-error").val();
    if (err == "Team already exists") {
        console.log('is equal but problem is fadeing not working');
        $('#text-error').fadeIn(400).delay(3200).fadeOut(800);
    }else {
        console.log('not equal');
    } 
```

但是当然有关该问题的更多详细信息将对我们有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T03:42:05.107

我假设你有类似的东西

```
<div id="text-error> Team already exists </div> 
```

如果是这样，那么将您的第一行代码替换为

```
var err = document.getElementById("text-error").innerText; 
```

JsFiddle - [http://jsfiddle.net/fCNe8/](http://jsfiddle.net/fCNe8/)

# php - array_unique 只给我一个结果

> ID：14027430
> 
> 赞同：1
> 
> 时间：2012-12-25T03:26:36.440
> 
> 标签：php, mysql

我在这里有这段代码：

```
$bestffffs = $db->query("SELECT * FROM chapter WHERE ch_trans = '".$wordss."' ORDER BY ch_trans DESC ");
    while($ftffffs = $db->fetch_array($bestffffs))
    {
        $bestffffrs[] = $ftffffs;

    }
    $result = array_unique($bestffffrs); 
```

MYSQL 查询至少有 45 个结果！但是当我尝试使用`array_unique()`我的结果时减少到一个！我在错误的地方使用代码吗？我试着把它放在任何地方，但没有任何效果！

我不能在我的 MYSQL 查询中使用 Group by，因为我想从表中的多个字段中删除重复项。Group by 只会删除我选择的字段的重复项。如果有其他使用 MYSQL 的灵魂，请在此处包含它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:28:06.283

指定`SORT_REGULAR`为第二个参数。

否则，它将它们作为字符串进行比较。任何数组都会转换为文字 string `"Array"`，这当然意味着它们都是“相等的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:31:18.843

您可以尝试的一件事是 DISTINCT。您可以将 DISTINCT 与多个字段一起使用：

```
SELECT DISTINCT(one and two and three...and n) FROM `your_table`... 
```

试一试。如果这不起作用，请尝试：

```
SELECT distinctrow field_one, distinctrow field_two, distinctrow field_three FROM `your_table`; 
```

# javascript - 返回两个对象之间的差异

> ID：14027431
> 
> 赞同：2
> 
> 时间：2012-12-25T03:26:46.447
> 
> 标签：javascript, object

> **可能重复：**
> [使用 Javascript/JQuery 的 JSON 对象的差异](https://stackoverflow.com/questions/1200562/difference-in-json-objects-using-javascript-jquery)

如何返回两个对象之间已更改（差异）的属性？

在我的代码中，我设置了一个全局变量`products_diy`来存储数据。当我更改页面上过滤器的值时，值`products_diy`将相应更改。我想获得在原始值和当前值之间改变（差异）的值`products_diy`。

我太难写这个比较函数了。有人帮忙吗？

```
function obj_diff(o2, o1) {
    var obj = {};
    for (var i in o1) {
        var item_type = typeof o2[i];
        if (item_type != 'undefined') {
            //...
        }
    }
    return obj;
}

var products_diy1 = {
    'zone': [1, 2],
    'category': {
        'c0': '1'
    },
    'fitler': {
        'price': {
            'switcher': 'true',
            'price_start': '30',
            'price_end': '50'
        }
    }
}
var products_diy2 = {
    'zone': [1, 2, 3],
    'category': {
        'c0': '1'
    },
    'fitler': {
        'price': {
            'switcher': 'true',
            'price_start': '30',
            'price_end': '80'
        }
    }
}
/* ------- 
compare 2 objects
if the item in o2 is not the same with the o1, 
join item to returned obj

obj_diff = {
    'zone': [1, 2, 3],
    'fitler': {
        'price': {
            'switcher': 'true',
            'price_start': '30',
            'price_end': '80'
        }
    }
}

------- */ 
```

# mysql - 在 codeigniter 中使用 Where AND Where 条件更新 SQL

> ID：14027432
> 
> 赞同：3
> 
> 时间：2012-12-25T03:26:49.143
> 
> 标签：mysql, sql, codeigniter, activerecord

这是我的代码：

```
public function remove_employee( $emp_no, $now ) {
    $this->db->delete('employees', array('emp_no' => $emp_no));
    $this->db->flush_cache();

    $this->db->start_cache();
    $this->db->where('emp_no', $emp_no);
    $this->db->where('to_date', '9999-01-01');
    $this->db->update('dept_emp', array('to_date' => $now));
    $this->db->stop_cache();
    $this->db->flush_cache();   

    $this->db->start_cache();
    $this->db->where('emp_no', $emp_no);
    $this->db->where('to_date', '9999-01-01');
    $this->db->update('salaries', array('to_date' => $now));
    $this->db->stop_cache();
    $this->db->flush_cache();   

    $this->db->start_cache();
    $this->db->where('emp_no', $emp_no);
    $this->db->where('to_date', '9999-01-01');
    $this->db->update('titles', array('to_date' => $now));
    $this->db->stop_cache();
    $this->db->flush_cache();   

    return;
} //END REMOVE EMPLOYEE 
```

当我运行此代码时，它删除了我的记录。我不明白为什么。

我希望它： **更新**表，其中**CONDITION_1****和**CONDITION_2 = B

PS：

```
**$now** is todays date (i.e. 2012-12-25)
**$emp_no** is a unique employee number i.e. 500122 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:07:18.613

调试它的可能方法是注释掉`$this->db->delete()`.

尝试更改这些行：

```
$this->db->delete('employees', array('emp_no' => $emp_no));
$this->db->flush_cache(); 
```

到：

```
//$this->db->delete('employees', array('emp_no' => $emp_no));
//$this->db->flush_cache(); 
```

然后试试看你的记录是否还在。如果您的更新成功并且您的记录仍在表中，则您可能有一个使用**Delete Cascade的****外键**。这意味着如果您从表中删除记录，您还将从和中删除记录。**`employees``dept_emp``salaries``titles`**

 **CodeIgniter 活动记录类：[http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

InnoDB 外键：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

检查外键：[如何查看表或列的所有外键？](https://stackoverflow.com/questions/201621/how-do-i-see-all-foreign-keys-to-a-table-or-column)**

# xcode - 访问正在加载 sqlite 数据的我的 NSArray 对象时遇到问题

> ID：14027433
> 
> 赞同：2
> 
> 时间：2012-12-25T03:27:00.197
> 
> 标签：xcode, arrays, sqlite, object, nsmutablearray

我认为这应该如何工作存在一些基本的误解，我将不胜感激。我一直在尝试编写一些函数，这些函数将从 sqlite 表中提取数据，将其放入对象中，然后将该对象保存到数组中。然后该数组将被其他例程访问。这门课还有很多我不想阻塞论坛的内容。我遇到的问题是：

1）我似乎只能访问放入数组的最终值。我是否将“用户”对象错误地保存到数组中？

2）假设我在数组中正确获取了对象，我是否正确地将它们拉出？我在底部添加了一个示例拉程序。

3）任何有更多经验的人都可以提到一种更有效的方法吗？我仍在努力让我的 xcode 编程腿在我身下，并希望有任何关于编写更简洁代码的建议。

// **SQLiteFunctions 标头

```
#import <sqlite3.h>
#import "Users.h"

@interface SQLiteFunctions : NSObject
{
@public
    // initializing public variables
    NSMutableArray *returnData;

@private
    // initializing private variables
    sqlite3 *dbPointer;
    sqlite3_stmt *sqlStatement;
    NSArray *paths;
    NSString *documentsDirectory;
    NSString *databasePath;
    char *error;
    Users *users;
}

// initializing public member functions
-(BOOL)openDatabase: (NSString *) table_name;
-(BOOL)openBundleDatabase;
-(BOOL)openNonBundleDatabase;
-(void)closeDatabase;
-(BOOL)getRecords:(const char *)sqlquery;
-(int)getUserRecords:(const char *)sqlquery;

@end 
```

//**SQLiteFunctions 实现

```
-(int)getUserRecords:(const char *)sqlquery
{
    // retreiving database values
    users = [[Users alloc] init];

    // initializing return data array
    returnData = [[NSMutableArray alloc] init];

    // testing prepare statement for verse sql
    if(sqlite3_prepare(dbPointer, sqlquery, -1, &sqlStatement, NULL) == SQLITE_OK)
    {
        // looping through existing return rows
        while (sqlite3_step(sqlStatement)==SQLITE_ROW)
        {
            // retreiving database values
            users->user_id = sqlite3_column_int(sqlStatement,0);
            users->user_name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 1)];

            // adding verse object to the return data array
            [returnData addObject:users];
        }
    }
    else
    {
        // logging problem with prepare
        NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(dbPointer));
        return NO;
    }

    // returning number of rows in the array
    return [returnData count];
} 
```

//** 示例用法

```
// retreiving the number of users from the database
SQLiteFunctions *sql = [[SQLiteFunctions alloc] init];
Functions *func = [[Functions alloc] init];

// testing for successful open
if([sql openDatabase:@"users"])
{
    // testing for that profile name existing already
    if([sql getUserRecords:[func strCat:@"SELECT * FROM  users;":nil:nil:nil:nil]] > 0)
    {
        int user_id;
        NSString *user_name;
        for(Users *myUser in sql->returnData)
        {
            user_id = myUser.user_id;
            user_name = myUser.user_name;
            // do other stuff with values
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:31:57.000

**将对象添加到数组中的问题 数组**
的问题在于您不断更新*User 对象的同一实例的*值，并一遍又一遍地将其添加到数组中。

要解决此问题，请将您的`users = [[Users alloc] init];`行移到 for 循环中。

**访问数组**
中的对象 如果您需要遍历所有（或至少许多）对象，访问数组中的对象很好。如果你只需要一个特定的对象，你可以使用：

```
Users *user5 = [sql->returnData objectAtIndex:5]; 
```

然而，更大的问题是你**真的**不应该从你自己的班级之外访问 ivar。您应该创建一个声明的属性，而不是拥有一个公共 ivar ( `returnData`)：

首先，删除 ivar 声明行 ( `NSMutableArray *returnData;`)，然后将其添加到包含所有 ivar 的块之后（就在您的`// initializing public member functions`评论上方）：

@property (nonatomic, strong) NSMutableArray *returnData;

然后，您将使用访问器访问它：`sql.returnData`或`[sql returnData]`代替`sql->returnData`.

# java - 在 ScrolledComposite 中显示内容

> ID：14027434
> 
> 赞同：0
> 
> 时间：2012-12-25T03:27:01.313
> 
> 标签：java, position, swt, scrolledcomposite

我想创建一个用户可以放大和缩小的视图，所以我计划通过使用来实现该视图`ScrolledComposite`：

```
 ScrolledComposite sc = new ScrolledComposite(shell, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
    sc.setBounds(0, 0, 200, 200); 
```

问题是：当内容的大小小于滚动合成的大小时，它总是出现在滚动合成的左上角，即使我尝试`setBounds()`了控件或`setOrigin()`滚动合成的方法。在下面的示例中，(100, 50) 的显示区域内容`button`小于`sc`(200, 200) 的客户区域，即使我尝试设置一些显示位置，按钮也始终显示在左上角滚动合成。

```
 Button button = new Button(sc, SWT.PUSH);
    button.setText("Button");
    button.setBounds(50, 50, 100, 50);
    sc.setContent(button);
    sc.setOrigin(30, 30); 
```

我得到的结果是

![按钮总是在左上角](../Images/10012c02151d1d1c51e29d3617a2e0a4.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:50:17.347

`Composite`这里的诀窍是在其中使用另一个`ScrolledComposite`将包含您的按钮和可能的其他内容。在内部或内容上`Composite`，您可以根据需要灵活地放置孩子。`ScrollComposite`不使用布局，因此您无法控制子项的位置。就像 a`TabItem`只允许你`setContent`而不是它的位置。

```
ScrolledComposite sc = new ScrolledComposite(shell, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
sc.setBounds(0, 0, 200, 200);

Composite content = new Composite(sc, SWT.NONE);
content.setSize(300, 300);
sc.setContent(content);

Button button = new Button(content, SWT.PUSH);
button.setText("Button");
button.setBounds(50, 50, 100, 50); 
```

您可以`content`以任何您喜欢的方式使用复合来布置子级。您现在还可以在内容组合上使用您选择的布局，以确保按钮始终保持在中心。

# c++ - 为什么 malloc(0) 在“C++ 对象模型内部”中很有用？

> ID：14027448
> 
> 赞同：8
> 
> 时间：2012-12-25T03:30:09.967
> 
> 标签：c++, memory, malloc

在“Inside the C++ Object Model”一书的 6.3 节中，临时对象（第 230 页）：

> 实际结果取决于实现，具体取决于底层删除运算符在实际释放已寻址内存方面的积极程度。**一些实现，虽然将内存标记为空闲，但实际上并没有以任何方式改变它。在内存被其他东西占用之前，它可以像没有被删除一样使用。**虽然显然不是软件工程的典型方法，但这种在内存释放后访问内存的习惯用法并不少见。 **事实上，****许多 的实现都提供了一个特殊的调用来保证这种行为。`malloc()``malloc(0);`**

根据上述，`malloc(0)`似乎与访问已经被释放的内存（但其内容没有改变）有关。

我的问题是如何`malloc(0)`保证这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:24:27.430

**编辑**：我没有注意到“C++ 对象模型内部”是一个参考，而不仅仅是问题标题的一部分。

正如 Dietmar Kuhl 所说，它看起来像一个杂物，即使它出现在你的平台上，你也不应该依赖这样的扩展。

“大多数平台”*确实*包含某种`malloc`调试工具，以帮助程序员找到访问已传递给`free`. 这可能涉及不那么懒惰地执行内存管理或使用特殊字节模式覆盖。听起来该文本正在描述`malloc(0)`为禁用此类设施的一种手段。在 Mac OS XI 上回想一下，有一个环境变量（类似于`MALLOC_DEBUG`）可以控制它。该设施的功能和启用方式在平台之间会有*很大差异。*覆盖`malloc(0)`既不常见，也不是一个好的接口。

**编辑**：我在斯坦利·利普曼（Stanley Lippman）[*的《C++ 对象模型内部》中*](http://www.joomag.com/magazine/Inside_the_C___Object_Model/35761/p134)找到了它，1996 年。不是权威来源。整个页面似乎都致力于讨论标准和“准标准”平台实现之间的差异，尽管 1996 年也是在第一个标准完成之前。请注意，这是很久很久以前的计算机时代，除非您将特定的应用程序从死里复活，否则这些信息将完全无关紧要。Lippman 显然发布了一本关于 C++11 的新书，其中包括具有多线程支持的更新对象模型。（虽然我不知道他或那本书是否好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:50:07.370

从引用看来，似乎有一些实现`malloc()`用作`malloc(0)`某种开关，以指示将来调用`malloc()`分配内存的方式`free()`（并且可能`realloc(p, 0)`）在将分配内存标记为未使用时不会更改分配内存的内容。显然，这是一个符合标准的扩展，您最好不要依赖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:40:21.480

从实际的角度来看`malloc`，甚至不能授予一些空间来真正分配。

了解如何`malloc`操作的最有效方法是将其视为对内核的请求，内核可以说“ok”或“no”，但如果内核说“ok”，您根本无法确定它是否真的为您分配内存，或者只是说“好的”让您开心。

这是一种关于内存页面的超额预订，例如，这是 linux 下的一个常见问题，通常 linux 内核对`malloc`请求是高度允许的，但即使您的`malloc`请求返回一个肯定的结果，您也可能会耗尽内存。

如果您想为“Linux memory overcommit”的主题搜索命名，并且您将大致了解`malloc`Linux 下的工作原理，类似的概念适用于其他平台，这意味着您永远不会从`malloc`和一切基本上都取决于内核。

# r - R：知道表，如何计算分位数

> ID：14027451
> 
> 赞同：2
> 
> 时间：2012-12-25T03:31:11.183
> 
> 标签：r, quantile

s 是一个大数组，只需将表保存在数据库中

```
> table_s
s
1       2 3  4                   5
3000000 1 1  999999999999999999  34 
```

如何用 R 中的 table_s 计算分位数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:22:44.793

您可以使用 Hmisc 包中的分位数函数，该函数允许权重。

```
Hmisc::wtd.quantile(as.numeric(names(table_s)),weights = table_s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:20:35.883

我能想到的最简单（但计算量大）的方法是将表重新扩展为观察向量并使用该`quantile`函数：

```
s <- c(3000000,1,1,999999999999999999,34)
names(s) <- 1:5    
quantile(rep.int(as.integer(names(s)),times=s))
#  0%  25%  50%  75% 100% 
#   1    4    4    4    5 
```

如果您正在寻找更快的东西，那么您可能需要编写自己的函数。

编辑：正如 Matthew Lundberg 在评论中所说，上面的代码不起作用。它只会在`sum(s)`小于向量的最大可能长度时运行，目前为 2^31-1 < 10^10。

# mysql - 即使在 max_allowed_pa cket 中设置了 +500mb ... 它仍然给我一个错误

> ID：14027455
> 
> 赞同：1
> 
> 时间：2012-12-25T03:31:38.267
> 
> 标签：mysql, drupal, caching

我刚刚将我的 Drupal 站点移动到一个新的托管 VPS。

每次我尝试运行 cron 时，都会收到这个令人讨厌的错误：

> 警告：得到一个大于“max_allowed_pa​​cket”字节查询的数据包：INSERT INTO watchdog（uid、type、message、variables、severity、link、location、referer、hostname、timestamp）VALUES（1，'php'，'%message in %文件在 %line.', 'a:4:{s:6:\"%error\";s:12:\"user warning\";s:8:\"%message\";s:1582172 :\"得到一个大于 'max_allowed_pa​​cket' 字节的数据包\n查询：UPDATE cache_update SET data = 'a:72:{s:10:\"admin_menu\";a:10:{s:5:\"title\" ;s:19:\"管理菜单\";s:10:\"short_name\";s:10:\"admin_menu\";s:10:\"dc:creator\";s:3:\" sun\";s:11:\"api_version\";s:3:\"6.x\";s:17:\"recommended_major\";s:1:\"1\";s:16: \"supported_majors\";s:3:\"1,3\";s:13:\&qu 在 /home/drupal/includes/database.mysql.inc 第 135 行

问题是我将 max_allowed_pa​​cket 设置为 64，然后是 100，然后是 250，然后是 512！！！仍然给我这个错误。

该错误似乎与 admin_menu 模块有关，但即使禁用该模块后，错误仍然存​​在（引用其他模块）并且禁用该其他模块后，错误仍然存​​在，依此类推。

似乎问题与 mySQL 表“cache_update”有关，但我不明白发生了什么。即使在搜索 Drupal 论坛之后，我也无法解决问题。刚刚找到了一些破解核心的方法，这并不好。

我认为这是一个特定于 mysql 的问题，所以这就是我在此处发布此内容的原因。

感谢您的洞察力！

罗莎蒙达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:38:09.217

有几点需要考虑：

1.  你确定 的语法`max_allowed_packet`是正确的吗？您是否指定单位？IE`max_allowed_packet = 512M`

2.  您确定 MySQL 使用的是`my.cnf`您正在编辑的同一文件吗？从控制台登录 MySQL，然后运行：设置正确吗`SHOW GLOBAL VARIABLES;`？`max_allowed_packet`

3.  最后，如果一切都失败了，请考虑通过 Drupal Tweaks 模块解决此问题：http: [//drupal.org/project/drupal_tweaks](http://drupal.org/project/drupal_tweaks)

# c - f(n) = n + f(floor(n/2)) 是否存在封闭形式？

> ID：14027456
> 
> 赞同：2
> 
> 时间：2012-12-25T03:31:44.683
> 
> 标签：c, performance, recurrence

我有以下递归公式：

```
 f(0) = 0
  f(1) = 1
  f(n) = n + f(floor(n/2)) 
```

可以用代码表示为：

```
 int f(int n) {
    int s = 0;
    for (; n; n >>= 1)
      s += n;
    return s;
  } 
```

是否有一种封闭形式可以让我`f(n)`一步计算？

如果没有，我还能做些什么来`f(n)`更快地计算吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T04:01:19.507

[在OEIS](http://oeis.org/A005187)上搜索给出了这个系列：

> A005187: a(n) = a([n/2]) + n; 1/sqrt(1-x) 展开的分母也是 2^a(n)；还有 2n - 2n 的二进制扩展中 1 的数量。

所以第二部分给出了 的公式`2*n - bitcount(2*n)`。您可以使用一些有效的位计数实现来计算它，例如 gcc 的`__builtin_popcount`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T04:46:13.173

还要注意 bitcount(2n) = bitcount(n)

推导如下：

让 n = sum(b[j] 2^j) for j=0...N

假设 b[N] = 1。定义

(a) F(n) = n + F(n/2) = n+n/2+n/4+... = 2 * n - (1/2 + 1/4 + ... 1/2 ^N) 按几何级数

这个函数 F 是一个实值函数。现在对于设置的每个位 b[j]，floor 函数减去 b[j](sum(1/2^k, k=1...j+1))。这是因为它实际上取出了 1/2，但是随着它的传播，随后的术语被添加了。

所以

(b) f(n) = floor(F(n)-sum(b[j] sum(1/2^k, k=1...j+1)，对于 j=0...N-1 )

将 (a) 代入 (b) 给出

(c) f(n) = floor(2n - **(1/2 + 1/4 + ... 1/2^(N+1))** - *sum* (b[j] (sum(1/2^(k ), 对于 k=1..j+1), 对于 j=0...N-1))

好的，这部分很酷！观察当 b[j] 为 1 时，如果从粗体表达式中偷偷 1/2^(j+1) 到斜体的 sum 中，sum 里面的 sum 变成 1，这意味着

b[j] (sum(1/2^(k), for k=1..j+1), for j=0...N-1) = sum(b[j], for j=0\. ..N-1)

所以方程（c）简化为

```
f(n) = floor(2*n - sum(b[j], for j=0...N-1) - remainder)
f(n) = 2*n - bitcount(n-2^N) - 1    ; because remainder >0 and <1
f(n) = 2*n - bitcount(n)            ; b[N]=1, so bitcount(n)=bitcount(n-2^N)+1 
```

其中余数是 sum(1/2^j, j=1,..N+1 and b[j-1]==0)，但这个总和总是 >0 且 < 1（最多为 1-1 /2^(N+2) 和至少 1/2^(N+1)，所以它可以作为 -1 移出地板。

还要注意 bitcount 运行时间可以等于设置的位数（[http://gurmeet.net/puzzles/fast-bit-counting-routines/](http://gurmeet.net/puzzles/fast-bit-counting-routines/)）。一些处理器将其作为单独的指令。

不确定乳胶是否在这里有效，但没有数学符号会很痛苦。我一直不得不编辑它，因为看起来总是有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:34:45.463

```
The function grows as follows - 

f(n) = n + f(n/2)
f(n/2) can be further simplified as - 

n/2 + f(n/4)

If we keep doing this, we will see n + n/2 + n/4 + n/8.....upto log n terms
= n (1 + 1/2 + 1/4 + 1/8...log n terms)
= n[ (1- (1/2)^log n)/(1/2)]
= 2n [1 - (1/2)^log n]

The term (1/2)^log n will become smaller and smaller as n increases, therefore the 2n term dominates. Hence f(n) belongs to big Theta (n) 
```

# jquery - 使用 JQuery 将图像来回旋转一个度数

> ID：14027457
> 
> 赞同：1
> 
> 时间：2012-12-25T03:31:48.240
> 
> 标签：jquery, rotation

我一直在搜索 Stackoverflow，但在任何地方都找不到我的问题的答案。我正在尝试制作一种从建筑物后面出现的探照灯效果，就像[这个网站上](http://gtav.net)的一样。我已经开始了，[在这里](http://ilobby.co.uk/beta)。我了解包含动画聚光灯（右上角）的网站正在使用两段 javascript：

sunset2.js & .../jquery/1.7.1/jquery.min.js

我还注意到，在sunset.js 文件的代码中，它是由Wilq32 在2009 年制作的。然后我去了该站点：code.google.com/p/jqueryrotate/ 并意识到另一个站点的所有者（一个包含聚光灯的）使用它来创建聚光灯效果。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:37:22.707

错误是

```
TypeError: $beacon.delay is not a function 
```

这是因为您使用的是旧版本的jquery，所以使用最新的即

替换此脚本参考

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

和

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

这将解决您的问题。

# ios - 在 iOS6 中使用委托，我将如何从概念上设计一个允许我添加和编辑任务的待办事项列表委托？

> ID：14027458
> 
> 赞同：4
> 
> 时间：2012-12-25T03:31:56.580
> 
> 标签：ios, xcode, delegates, ios6, delegation

老实说，整个代表团的事情让我有点困惑，但我正在努力变得更好。

现在，我有一个`UITableView`任务列表，并且我有一个`+`按钮，可以调出一个模式视图来添加一个新任务。您还可以点击每个任务来更改名称。

我将如何使用委托来实现这一点？显然，模态视图结果会改变根 UITableView（添加一个新单元格），所以我认为委托是最好的选择。编辑也是如此。

我做两个分开的吗？一？有人可以从概念上向我展示委托方案的外观吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:39:20.783

我会用不同的方式/更简单地说：委托是允许类相互交谈的几种方式之一。它不是 Objective-C 独有的，也不是每项工作都适合的工具。

**TL;DR：别担心 - 还没有！**

不用担心委托是什么；这就像当你真的只想砍一棵树时问刀是如何制造的。在这种情况下，您将通过实践了解更多（更快），Apple 的 UITableView 文档非常棒：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

您正在尝试做的事情非常结构化，您不需要发明任何新代码 - 事实上，您基本上不能；Apple 已经决定了它`UITableView`的工作原理，因此了解其背后的理论对您（还）无济于事。

所以现在，不要害怕，只需点击上面的链接——也许谷歌一些 UITableView 教程——当你遇到特定问题（你肯定会）时，在 SO 上发布这些问题。:)

**稍后：1 分钟的委派概述**

..然后有一天，您需要开始制作自己的需要相互交谈的类和子类。那是您需要了解委派的时候！

`UIViewController`想象一下，你有一个显示`UITableView`（'Table'）的类的实例（我将称之为'You'）。在这种情况下，Apple 设计`UITableView`使用委托，以便 Table 可以问你一堆问题。表格可能会问你：我需要显示多少行？每行应该多高？第 72 行的单元格应该是什么样子？您知道这一点，但 Table 不知道，因此 Table 将通过委派/数据源方法向您询问答案。您的代码会响应答案。

更好的是：课程可以被迫告诉你事情！例如：“用户刚刚点击了一个单元格”，或“我即将解雇自己”，或“屏幕刚刚旋转”。这些方法的美妙之处在于它允许您对各种关键事件做出反应并做好准备。这是 iOS 编程的一个*HUUUUUUUGE*部分，你会经常遇到它。

简而言之，这就是委托，类之间的对话还有更棒的方式——例如块，在某些情况下甚至是直接变量存储。

如果你真的，真的想知道更多，即使我还不推荐它，你可以在这里查看另一个很好的 Apple 文档：

[http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:36:06.163

委派是一个简单概念的花哨词：替身。UITableView 设置为使用委托（替身），因此您不必在每次要使用它时都对其进行子类化。您的替身将提供自定义视图行为的方法，而不是继承和覆盖（重新定义）其方法。

通常，您会让表视图控制器成为表视图委托。这意味着当 table view 被问到它的任何委托问题（例如“这一行的高度是多少？”）时，它会将这个问题传递给它的替身，即您的控制器。

[UITableViewDelegate 协议参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)中非常清楚地指定了允许您定义其编辑行为的委托方法。您可能还需要一些来自[UITableViewDataSource](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html)的方法。你肯定想看看 Apple 的[Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)。请注意索引底部列出的示例代码项目。

# python - 查找正在运行的进程的基地址

> ID：14027459
> 
> 赞同：4
> 
> 时间：2012-12-25T03:32:15.100
> 
> 标签：python, windows, ctypes, python-3.2

我有以下代码：

```
import subprocess
from ctypes import *

#-Part where I get the PID and declare all variables-#

OpenProcess = windll.kernel32.OpenProcess
ReadProcessMemory = windll.kernel32.ReadProcessMemory

processHandle = OpenProcess(PROCESS_ALL_ACCESS, False, PID)

ReadProcessMemory(processHandle, address, buffer, bufferSize, byref(bytesRead)) 
```

所有这一切都完美无缺，但由于某些进程使用所谓的`BaseAddress`or `StartAddress`。在我的情况下，这个 BaseAddress 的大小不时是随机的。正如[这里](https://stackoverflow.com/questions/13045864/python-how-to-get-the-start-base-address-of-a-process)所建议的，我尝试使用以下代码：

```
BaseAddress = win32api.GetModuleHandle(None) 
```

它所做的只是一遍又一遍地给出相同的十六进制值，即使我确定我的 BaseAddress 已经改变。

链接线程的屏幕截图显示了我正在寻找的内容（左侧是基地址）： ![CE 基本地址](../Images/13f7ada8abf56bc81e68fafec26c046a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-03-10T08:36:08.167

我确实设法找到了 python 3.5 32 位和 64 位的解决方案。

对于 32 位，我使用了 psutil 和 pymem （正如在这个问题上已经建议的那样）。：

```
import psutil
import pymem

my_pid = None
pids = psutil.pids()
for pid in pids:
    ps = psutil.Process(pid)
    # find process by .exe name, but note that there might be more instances of solitaire.exe
    if "solitaire.exe" in ps.name():
        my_pid = ps.pid
        print( "%s running with pid: %d" % (ps.name(), ps.pid) )

base_address = pymem.process.base_address(pid) 
```

对于 64 位 pymem 不起作用。我找到了使用 win32api.GetModuleHandle(fileName) 的建议，但它需要 win32api.LoadLibrary(fileName) ，它没有使用已经运行的进程。

因此我找到了这个次优的解决方案，因为它返回了一个完整的可能性列表：

```
import win32process
import win32api

# first get pid, see the 32-bit solution

PROCESS_ALL_ACCESS = 0x1F0FFF
processHandle = win32api.OpenProcess(PROCESS_ALL_ACCESS, False, my_pid)
modules = win32process.EnumProcessModules(processHandle)
processHandle.close()
base_addr = modules[0] # for me it worked to select the first item in list... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T00:44:27.817

请参阅[How to enumerate modules in python 64bit](https://stackoverflow.com/questions/9763459/how-to-enumerate-modules-in-python-64bit)以获取一些可以使用的好代码。您正在寻找“modBaseAddr”。

有关 tagMODULEENTRY32 的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms684225(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684225(v=vs.85).aspx)

您还可以将[pymem](https://github.com/srounet/Pymem)（'过时'项目但仍然有效）与以下代码（您想要 modBaseAddr）一起使用：

```
 for m in self.listModules():
    if m.szModule==szModule:
      print m.szModule, m.szExePath, m.modBaseAddr 
```

# javascript - 同位素容器 div 上的滚动条

> ID：14027461
> 
> 赞同：2
> 
> 时间：2012-12-25T03:32:56.323
> 
> 标签：javascript, jquery, html, jquery-isotope

我已经分配`overflow:hidden;`并添加`overflow:auto;`了我的 body 元素，试图将滚动条添加到容器 div，因为我需要一个锁定的页眉和页脚与我的容器 div 接壤。

我试过把它放在自己的 div 中。我也试过：

```
var $container = $(".container");
$container.isotope({
  itemSelector: '.item',
  itemPositionDataEnabled: true,
  layoutMode: 'masonry',
  masonry: { 
       columnWidth : 60 
     } 
   }).css('overflow','auto'); 
```

这些似乎都不起作用。有什么建议么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T09:57:16.033

不确定我是否正确理解了这一点，但这是您所追求的：

[http://jsfiddle.net/chrissp26/ywQyg/](http://jsfiddle.net/chrissp26/ywQyg/)

如果是这样，上面 jsfiddle 代码中的重要位是 css 中的覆盖：

```
#container {
    height: 300px !important;   
    overflow: auto !important;  
} 
```

# c# - 将服务器中的通用数据分发到全球分布的桌面应用程序的最佳方法

> ID：14027463
> 
> 赞同：1
> 
> 时间：2012-12-25T03:33:22.260
> 
> 标签：c#, .net, algorithm

**场景：**我有一个桌面应用程序使用的通用数据遍布全球。公用数据会频繁更改，需要分发到全球范围内的桌面应用程序。

**方法**

1.  从全球分布的桌面应用程序调用 Web 服务，每次都获取公共数据进行处理。 **缺点：**服务器每次调用一个桌面是非常昂贵的操作。
2.  将公共数据作为xml文件下载到全球所有桌面应用程序中，如果公共数据发生任何变化，则需要下载更改的数据（应该是推送技术） **缺点：**如果不是推送技术，那么成本会很高

是否有任何推送技术来处理上述情况。（即，如果在服务器中进行了任何更改，则仅关闭更改）

以上哪种方法比较好，或者有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:16:11.280

桌面应用程序是修改数据还是仅仅是“服务器”定义的东西？

如果服务器修改数据并且客户端只读使用，则有很多选项：

*   您可以将数据存储在共享的 DropBox 文件夹中。

*   您可以向 Web 服务添加一个方法，该方法在每次数据更改时返回一个新的 GUID，让客户端知道应该再次下载数据。从服务器获取单个 GUID 应该不会很昂贵（尤其是与一次性下载所有数据相比）

*   您可以使用 RabbitMQ 之类的东西来扇出对所有客户端的更改（如果有一个开放的 TCP 连接是一个选项

如果允许桌面客户端修改数据并且有多个客户端同时修改该数据，您可能需要采用完全不同的方法。但在这种情况下，您的问题中没有足够的信息来真正给您一个好的答案。

# java - 在 Condor 的香草宇宙中使用 java

> ID：14027465
> 
> 赞同：0
> 
> 时间：2012-12-25T03:34:04.710
> 
> 标签：java, condor

我在一个由 Python 脚本和 Java 文件两部分组成的 condor 集群中有一份工作。我想运行 python 脚本并让它调用 jar 文件，并且只在安装了 Java 的机器上运行。有没有办法做到这一点？集群中的许多机器都没有安装 Java，因此当我运行脚本时出现错误。基本上，我想在我的工作中添加一个要求，让它在有一个名为“java”的可执行文件的机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:53:33.953

看起来你真的应该在 Java 世界中运行它

```
Requirements= (HasPython) 
```

或者，我认为你可以在香草宇宙中运行它，比如

```
Requirements= (HasJava && HasPython) 
```

您应该能够仅使用 ClassAd 本身来完成您想要的。我运行一个运行 java 代码和 python 代码的工作，我在 java 世界中运行它，所以我不必担心工人是否有 java - 我知道它会的。我所有的工人都有 python，所以我不做 python 检查。

# javascript - 函数声明或函数表达式

> ID：14027467
> 
> 赞同：6
> 
> 时间：2012-12-25T03:34:37.337
> 
> 标签：javascript, scope, function-declaration, function-expression

我在块范围内定义函数时遇到了问题。考虑以下程序：

```
try {
    greet();

    function greet() {
        alert("Merry Christmas!");
    }
} catch (error) {
    alert(error);
} 
```

我希望这个程序能够提醒`Merry Christmas!`。但是在 Firefox 中是给了我以下内容`ReferenceError`：

```
ReferenceError: greet is not defined 
```

在 Opera 和 Chrome 上，它会像我预期的那样提醒问候语。

显然，Firefox 将块作用域内的函数视为`FunctionExpression`Opera 和 Chrome 将其视为`FunctionDeclaration`.

我的问题是为什么 Firefox 的行为不同？哪种实现更合乎逻辑？哪一个符合标准？

我知道 JavaScript 中的声明被提升了，因此如果在同一范围内的两个或多个不同块中声明相同的函数，则会出现名称冲突。

但是，每次声明函数时重新声明函数不是更合乎逻辑，以便您可以执行以下操作：

```
greet(); // Merry Christmas!

function greet() {
    alert("Merry Christmas!");
}

greet(); // Happy New Year!

function greet() {
    alert("Happy New Year!");
} 
```

除了解决我上面描述的块范围问题之外，我认为这将非常有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T03:41:09.123

实际上，块作用域内的函数声明显然*不是*标准化的，并且行为取决于实现。不同的实现有不同的反应。如果你试图在 if 语句中声明一个函数，你会得到同样的怪异。

ES5 规范建议实现者将块内的函数声明标记为警告或错误。

# android - 再次出现 NullPointerException

> ID：14027469
> 
> 赞同：2
> 
> 时间：2012-12-25T03:35:15.730
> 
> 标签：android, nullpointerexception

日志：

```
12-25 03:26:16.003: E/AndroidRuntime(3623): FATAL EXCEPTION: main
12-25 03:26:16.003: E/AndroidRuntime(3623): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dd.gfit/com.dd.gfit.DaysActivity}: java.lang.NullPointerException
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.os.Looper.loop(Looper.java:137)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at java.lang.reflect.Method.invokeNative(Native Method)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at java.lang.reflect.Method.invoke(Method.java:511)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at dalvik.system.NativeStart.main(Native Method)
12-25 03:26:16.003: E/AndroidRuntime(3623): Caused by: java.lang.NullPointerException
12-25 03:26:16.003: E/AndroidRuntime(3623):     at com.dd.gfit.DaysActivity.onCreate(DaysActivity.java:22)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.Activity.performCreate(Activity.java:5104)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-25 03:26:16.003: E/AndroidRuntime(3623):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-25 03:26:16.003: E/AndroidRuntime(3623):     ... 11 more 
```

下面我添加了相关代码。

MySQLiteHelper.java：

```
package com.dd.gfit;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class MySQLiteHelper extends SQLiteOpenHelper {

  public static final String TABLE_DAYS = "days";

  public static final String COLUMN_ID = "id";
  public static final String COLUMN_NAME = "name";
  public static final String COLUMN_ID_ROUTINE = "id_routine";
  public static final String COLUMN_DAY = "day";

  private static final String DATABASE_NAME = "gfit.db";
  private static final int DATABASE_VERSION = 1;

  public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
        // create days table
        database.execSQL("create table " + TABLE_DAYS + "(" 
                + COLUMN_ID + " integer primary key autoincrement," 
                + COLUMN_ID_ROUTINE + " integer not null," 
                + COLUMN_NAME + " varchar not null," 
                + COLUMN_DAY + " varchar not null"
                + ")");
        database.execSQL("insert into " + TABLE_DAYS + "("+ COLUMN_ID +", "+ COLUMN_ID_ROUTINE +", "+ COLUMN_NAME +", "+ COLUMN_DAY +") VALUES (12, 23, 'Day 1', 'Monday')");
        database.execSQL("insert into " + TABLE_DAYS + "("+ COLUMN_ID +", "+ COLUMN_ID_ROUTINE +", "+ COLUMN_NAME +", "+ COLUMN_DAY +") VALUES (21, 23, 'Day 2', 'Tuesday')");
        database.execSQL("insert into " + TABLE_DAYS + "("+ COLUMN_ID +", "+ COLUMN_ID_ROUTINE +", "+ COLUMN_NAME +", "+ COLUMN_DAY +") VALUES (33, 23, 'Day 3', 'No Specific Day')");
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_DAYS);
    onCreate(db);
  }

} 
```

DaysActivity.java：

```
package com.dd.gfit;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.widget.SimpleCursorAdapter;

public class DaysActivity extends ListActivity {
  private DaysDataSource datasource;
  private long routineDataID;
  private SimpleCursorAdapter dataAdapter;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_days);

    routineDataID = getIntent().getLongExtra("routineDataID", 1);

      Cursor cursor = datasource.fetchAllDays(routineDataID);

      // The desired columns to be bound
      String[] columns = new String[] { MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_DAY };

      // the XML defined views which the data will be bound to
      int[] to = new int[] { R.id.listitem_day_name, R.id.listitem_day_day };

      // create the adapter using the cursor pointing to the desired data 
      dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_day, cursor, columns, to, 0);

      // Assign adapter to ListView
      setListAdapter(dataAdapter);
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.activity_days, menu);
      return true;
  }

} 
```

DaysDataSource.java：

```
package com.dd.gfit;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DaysDataSource {

  // Database fields
  private SQLiteDatabase database;
  private MySQLiteHelper dbHelper;
  private String[] allColumns = { MySQLiteHelper.COLUMN_ID, MySQLiteHelper.COLUMN_ID_ROUTINE, MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_DAY };

  public DaysDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
  }

  public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
  }

  public void close() {
    dbHelper.close();
  }

  public Cursor fetchAllDays(long id) {   
      Cursor mCursor = database.query(MySQLiteHelper.TABLE_DAYS, allColumns, null, null, null, MySQLiteHelper.COLUMN_ID_ROUTINE + " = " + id, null);

      if (mCursor != null) {
          mCursor.moveToFirst();
      }

      return mCursor;
  }
} 
```

listitem_day.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/listitem_day_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Day Name" />

    <TextView
        android:id="@+id/listitem_day_day"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:text="Monday"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

DaysActivity 的意图是如何调用的：

```
Toast toast = Toast.makeText(this, String.valueOf(id), Toast.LENGTH_SHORT);
toast.show(); 

Intent startDaysActivity = new Intent(this, DaysActivity.class);
startDaysActivity.putExtra("routineDataID", id);
this.startActivity(startDaysActivity); 
```

我知道这`routineDataID`已成功通过，因为`Toast`它显示`id`正确。

为什么我会收到 NullPointerException？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:38:08.653

将您的代码更改为：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_days);

    routineDataID = getIntent().getLongExtra("routineDataID", 1);

    datasource=new DaysDataSource(DaysActivity.this); //<<missing this line

    datasource.open() ;  //<<< Open db here       

    Cursor cursor = datasource.fetchAllDays(routineDataID);
     // your code here... 
```

您没有通过传递 Activity 的上下文来初始化数据源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:39:48.003

```
 Cursor cursor = datasource.fetchAllDays(routineDataID); 
```

数据源为空

# java - 使用 MigLayout 在不同平台上截断组件

> ID：14027471
> 
> 赞同：0
> 
> 时间：2012-12-25T03:35:31.673
> 
> 标签：java, swing, layout-manager, miglayout

我想知道在使用`MigLayout`.

具体来说，我在使用`"Height 20!"`类型组件约束时遇到了问题。在不同的 L&F 和平台上进行测试时，组件有时会被截断，或者`JButton`文本会显示为`".."`. 我尽量避免使用这些约束，但有时它似乎是做我想做的事情的唯一方法。还有其他我应该考虑的推荐做法吗？

添加的按钮如下：

```
add(backButton, "h 32!, w 37!"); 
```

例如

# python - ValueError：使用 python cStringIO 对关闭的文件进行 I/O 操作

> ID：14027472
> 
> 赞同：2
> 
> 时间：2012-12-25T03:35:49.707
> 
> 标签：python, file, io

好的，所以我有一个将数据写入内存的函数。我试图让数据达到一定的大小（在本例中为 1 gb），然后截断/转储到文件并继续执行此过程，直到没有更多数据要写入。目前它将达到限制并截断它然后失败并出现以下错误之一，具体取决于我如何结束函数。

```
Traceback (most recent call last):
  File "<pyshell#192>", line 1, in <module>
    cart_for(10,'1234567890')
  File "<pyshell#191>", line 8, in cart_for
    x.write(''.join(p))
ValueError: I/O operation on closed file 
```

我的功能是：

```
x = StringIO()
def cart_for(n, seq):
b = 8
a = 100000
size_max = 1073741824
for m in range(n, b, -1):
    a = a - 1
    for p in itertools.product(seq, repeat=m-1):
        x.write(''.join(p))
        x.write('\n')
        x.seek(0, os.SEEK_END)
        size = x.tell()
        if size > size_max:
            with open('C:/out/' + ran(8,string.ascii_letters) + '.txt', 'w') as handle:
                handle.write(x.getvalue())
                x.close()
                x 
```

如果我以以下方式结束我的功能：

```
x = StringIO() 
```

代替：

```
x 
```

现在的错误是：

```
Traceback (most recent call last):
  File "<pyshell#189>", line 1, in <module>
    cart_for(10, '1234567890')
  File "<pyshell#188>", line 8, in cart_for
    x.write(''.join(p))
UnboundLocalError: local variable 'x' referenced before assignment 
```

关于如何完成此过程的任何想法？作为参考，我相信你们中的许多人可以假设我想每隔一段时间将内存截断到磁盘，这样我就不会用完内存中的空间，所以函数可以继续运行直到它完成。是否可以创建由静态变量定义的随机变量名称来完成此操作（如果有意义的话）？原谅我，我是 python 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:01:15.740

您正在`x`循环使用，但在第一次达到最大尺寸时将其关闭。下次循环进行时，StringIO 已关闭，无法再使用。

您应该在函数内部而不是外部创建 StringIO。移动`x = StringIO()`函数体内部（循环之前），然后将最后一行更改为，`x = StringIO()`以便在每次填充旧 StringIO 时创建一个新 StringIO。

# php - .htaccess 拒绝所有，除了允许 javascript 访问

> ID：14027473
> 
> 赞同：2
> 
> 时间：2012-12-25T03:35:52.283
> 
> 标签：php, javascript, .htaccess

我目前正在使用 .htacces 阻止对服务器上一个目录的所有访问

```
deny from all 
```

我使用 php 进行所有编码，但有一次我使用 javascript 从我的安全目录播放 mp3。但这被 .htaccess 阻止了

无论如何允许javascript访问目录但仍然阻止人们输入url并获得对文件的访问权限。

抱歉，我是 .htaccess 的新手，无法弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:41:56.783

不，`JavaScript`是客户端；因此，如果它可以访问文件，客户端也可以。

考虑将文件移动到非公共目录中，甚至可能在 webroot 之外，然后读取它们并使用脚本将它们发送到客户端。这可以通过 PHP 轻松完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T03:39:30.310

不，不是我知道的。你为什么不把音乐移到另一个有索引的目录中，这样所有的音乐文件都不会列出来？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T04:17:35.857

我最终使用此代码来允许访问 mp3 和 oggs，仅此而已。这不是最佳的，但它有效。

```
deny from all

<FilesMatch ".(ogg|mp3)$">
Order Allow,Deny
allow from all
</FilesMatch> 
```

感谢您的回答。

# ruby - 无法为 [] 激活 rake (= 0.9.2.2, runtime)，已经为 [] 激活了 rake-10.0.2

> ID：14027491
> 
> 赞同：6
> 
> 时间：2012-12-25T03:40:26.213
> 
> 标签：ruby, gem

我正在尝试运行一个简单的 rake 任务。当我这样做时，我收到以下错误：

无法为 [] 激活 rake (= 0.9.2.2, runtime)，已经为 [] 激活了 rake-10.0.2

我运行 gem list 命令，它将 rake 列为具有 10.0.3、0.9.2.2 和 0.8.7。

所以，我输入 gem uninstall rake -v 10.0.3。根据提示，卸载成功 - 但是当我执行 gem list 时版本 10.0.3 仍然存在 - 当我尝试运行任何 rake 任务时仍然遇到完全相同的问题。

有什么建议么？

在此先感谢，蒂姆

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T03:57:46.903

您的 .rake 文件中可能列出了旧版本的 rake `Gemfile.lock`。尝试运行`bundle update rake`，这应该会更新所有与 rake 相关的内容并更改您的 Gemfile.lock。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T10:40:05.370

您可以：

*   如果您不想更新它，请运行`bundle exec rake`以使用您列出的 rake 版本`Gemfile.lock`
*   `Gemfile.lock`通过运行更新您使用的 rake 版本，`bundle update rake`然后您将能够`rake`再次使用该命令！

# c# - 等待点击事件在 Javascript 中完成

> ID：14027495
> 
> 赞同：3
> 
> 时间：2012-12-25T03:41:52.400
> 
> 标签：c#, javascript, jquery, jquery-ui, model-view-controller

我的图像中有 onClick 事件，这会导致将新选项卡添加到 jQuery 选项卡中。它旁边的事件将向这个新选项卡添加内容。

```
$('#Image').click();
$('#controladdedbyclickabove').append( message); 
```

我看到的问题是点击事件不会等待操作完成它会继续下一条语句。因此，我看不到添加到单击将生成的新控件的内容。如何使单击事件在移动到下一条语句之前等待操作完成？

T 必须依赖于触发点击，因为 #image 上的 onClick 操作具有我可以提取为字符串的所有参数，但我不确定如何执行它。

当 onClick 事件发生时，调用此方法：

```
function addTab(title, uri, userid) {
    var newTab = $("#tabs").tabs("add", uri, title);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T04:01:11.690

你可以使用回调函数：

```
 if($('#Image')) {
  $('#Image').click(function() {
        $('#controladdedbyclickabove').append( message);
  });
}else {
  console.log('image object not there');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T03:51:20.200

您不能等待事件被处理，因为在您退出函数并将控制权返回给浏览器之前，它不会被处理。

要在事件处理后运行代码，您需要在退出函数后启动它：

```
$('#Image').click();
window.setTimeout(function(){
  $('#controladdedbyclickabove').append( message);
}, 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T06:17:20.830

有很多方法可以做到这一点。您想在单击完成后执行某些操作。

1：为什么不让你的代码像这样

```
function addTab(title, uri, userid) {
   var newTab = $("#tabs").tabs("add", uri, title);
   $('#controladdedbyclickabove').append( message);
} 
```

2：你也可以像这样定义一个函数

```
function addTabCallback () {
  $('#controladdedbyclickabove').append( message);
}

function addTab(title, uri, userid) {
   var newTab = $("#tabs").tabs("add", uri, title);
   addTabCallback();
} 
```

3：可以使用观察者模式

```
function addTab(title, uri, userid) {
   var newTab = $("#tabs").tabs("add", uri, title);
   var observer = addTab.observers.shift();
   while (observer) {
      observer();
      observer = addTab.observers.shift();
   }
}
addTab.observers = []; 
```

触发点击时应该做一些改变

```
addTab.observers.push(function () {
   // codes here will be executed when the click finished
   $('#controladdedbyclickabove').append( message);
});

$('#Image').click(); 
```

这是一个带有观察者模式的示例代码，实际上，它应该做一些观察者类型检查等。^_^。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T19:33:32.213

我最终将附加消息传递回 ajax 调用的服务器。因此，当单击事件调用时，控件返回时会添加一条消息。我无法让 javascript 回调按预期工作。

# c# - 如果我从数据库中删除用户，用户将保持身份验证（大会话超时）

> ID：14027500
> 
> 赞同：0
> 
> 时间：2012-12-25T03:42:13.907
> 
> 标签：c#, asp.net-mvc

我有一张`User`桌子。我正在使用`Forms`身份验证并具有以下登录代码：

```
 public JsonResult LogOn(FormCollection form)
 {
        var agent = SiteUserRepository.CheckAgent(form["Email"], form["Password"]);
        if (agent == null)
            return Json(new
            {
                IsSuccess = false,
                Message = "Wrong email or password"
            });
        SiteUserRepository.UpdateLastLogon(agent.Email);

        FormsAuthentication.SetAuthCookie(agent.Email, true);
        ApplicationSession.CurrentUser = agent;

        return Json(new
            {
                IsSuccess = true
            });

 } 
```

这`ApplicationSession`是我的对象包装器`Session`。

```
public static class ApplicationSession
{
    private const string _currentUser = "CurrentUser";
    public static SiteUser CurrentUser
    {
        get
        {
            var user = HttpContext.Current.Session[_currentUser];
            if (user != null)
                return (SiteUser)user;
            return null;
        }
        set
        {
            HttpContext.Current.Session[_currentUser] = value;
        }
    }

} 
```

会话超时等于 1440（24 小时）。我需要这个值。例如用户在网站上登录。然后我从数据库中删除这个用户。并且用户将通过身份验证（当然，如果他们不单击注销）。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:53:47.450

您想使用 cookie。您的代码需要检查 cookie，如果它不存在，或者时间已过期，则创建一个新的。

我想这会给你一个很好的例子：

[基于登录信息的 C# Cookie](https://stackoverflow.com/questions/3726896/c-sharp-cookies-based-on-login-information)

[http://www.beansoftware.com/ASP.NET-Tutorials/Cookies-ASP.NET.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Cookies-ASP.NET.aspx)

一天到期的记住我复选框类型的实现可以这样做：

```
if (chBox.Checked)

      {
          HttpCookie myCookie = new HttpCookie("Cookie_Remember"); //new cookie object

          Response.Cookies.Remove("Cookie_Remember"); //This will remove previous cookie
          Response.Cookies.Add(Cookie_Remember); //This will create new cookie

          Cookie_Remember.Values.Add("UserInfo", txt_username.Text); //Add User Name 

        // You can add multiple values

          DateTime CookieExpir= DateTime.Now.AddDays(5); //Cookie life

          Response.Cookies["Cookie_Remember"].Expires = CookieExpir; //Maximum day of cookie's life       
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:49:40.910

一个解决方案是只允许通过您的应用程序从您的存储库/数据库中删除用户。

删除用户时，强制将其注销：

```
//Delete the user
SiteUserRepository.DeleteUser(agent);

//Log them out
FormsAuthentication.Signout(); 
```

# c - 使用 CDT + MinGW + Eclipse 进行调试

> ID：14027503
> 
> 赞同：0
> 
> 时间：2012-12-25T03:43:12.403
> 
> 标签：c

我正在尝试使用 CDT eclipse 和 MinGW 调试一个简单的 c 程序。当我运行我的程序时，控制台会显示所需的输出。但是当我尝试用断点调试程序时，控制台中没有输出。控制台是空白的。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:23:09.393

您需要确保已使用该`-g`选项在调试模式下编译。如果你这样做了，那么执行可能会在你的断点处停止（大概是在打印到控制台的代码之前）。您必须恢复执行，以便它运行其余代码。

# c# - XNA 游戏启动的表单中带有 RichTextBox.ScrollToCaret 的 AccessViolationException

> ID：14027505
> 
> 赞同：2
> 
> 时间：2012-12-25T03:44:04.200
> 
> 标签：c#, .net, winforms, richtextbox, access-violation

我遇到了 RichTextBox.ScrollToCaret 有点令人沮丧的障碍。我有将消息打印到 RichTextBox 的代码。当每条消息发送到表单时，它被拆分为多行并格式化，然后将每一行连接起来，并将结果发送到 RichTextBox.Append。然后，进行以下两个调用以滚动到框的底部：

```
outputBox.Select(outputBox.Text.Length, 0);
outputBox.ScrollToCaret(); 
```

打印一条消息时，没问题。打印少量消息时，没有问题。当快速连续打印一堆消息时，它会随机（在它发生之前打印多少条消息）抛出一个 AccessViolationException （“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”，完整[此处](https://gist.github.com/4371537)详细信息）**下次**在该框上调用 Append 以添加下一条消息。这只发生在快速连续执行时，并且**仅****在**每次使用 RichTextBox.ScrollToCaret 时发生。我依赖的以下代码可以正常工作：

```
outputBox.Focus();
outputBox.Select(outputBox.Text.Length, 0); 
```

我还发现，即使我捕获了异常并将其丢弃，程序也会在下次调用 Append 时挂起。所以，我认为这是 RichTextBox 中实际代码的问题。有人有想法么？

如果有人需要，我可以发布更多我的代码，但情况确实非常基本。需要注意的一点是，没有多线程（除了固有的 UI 线程），所以发送消息的对象和接收它们的表单在同一个线程上。此外，这是在 .NET 4.0 下。

我发现this other question解决了这个问题，但只提供了一种解决方法，没有真正的解释：[AccessViolation 发生在 RichTextBox.ScrollToCaret 中](https://stackoverflow.com/questions/10438493/accessviolation-occurs-in-richtextbox-scrolltocaret)。不幸的是，我在线程方面的经验不是我想要的，所以我无法让他们的解决方案正常工作，但幸运的是我在上面发布的内容很好。

# 更新 1

所以它会处理一些测试，就像它与 XNA 有关，所以这可能是我对线程如何工作的误解。我无法在纯 WinForms 应用程序中重现该错误，但通过一个简单的 XNA 游戏轻松完成。我把这两个都压缩了，让你看看。为错误道歉。 [https://dl.dropbox.com/u/16985121/StackOverFlowExamples.zip](https://dl.dropbox.com/u/16985121/StackOverFlowExamples.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:39:24.943

我有同样的问题。我的情况几乎没有什么不同，但问题基本相同。我将代码与 C++/CLI 和 C# 表单混合在一起。

来自 C++/CLI 的线程之一以 C# 形式调用函数以将消息打印到richtextbox。

'慢慢地'调用这个函数是可以的。但是如果调用函数发生得非常快且频繁，程序就会随机崩溃。

这是我的代码。

```
void PrintOutLog(System::String^ s)
    {
        Monitor::Enter(this->richTextBox_LogBox);
        try
        {
            if(this->richTextBox_LogBox->InvokeRequired)
            {

                AddListItem^ d = gcnew AddListItem(this, &PrintOutLog);
                array<Object^>^ myStringArray = {s};
                this->richTextBox_LogBox->BeginInvoke(d, myStringArray);
            }
            else
            {                
                this->richTextBox_LogBox->AppendText(s + "\n");
                this->richTextBox_LogBox->SelectionStart = this->richTextBox_LogBox->Text->Length;
                this->richTextBox_LogBox->ScrollToCaret();
            }

        }
        finally
        {
            Monitor::Exit(this->richTextBox_LogBox);
        }

    } 
```

事实证明，如果我注释掉以下两行代码，程序不会因为内存访问冲突而崩溃。

```
this->richTextBox_LogBox->SelectionStart = this->richTextBox_LogBox->Text->Length;
this->richTextBox_LogBox->ScrollToCaret(); 
```

如果我将这两行注释掉，那么当 C# 表单没有焦点时，richtextbox 不会在文本框的末尾显示新的日志消息。

我可以使用您的解决方案，该解决方案在放置文本之前获得焦点，但如果我这样做，它总是保持在我需要保持在最上面的其他窗口的顶部。所以我不能那样做。

我查找了 MSDN 页面[http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.scrolltocaret.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.scrolltocaret.aspx)并在页面中间发现了这一点。

**如果控件没有焦点或插入符号已位于控件的可见区域中，则此方法无效。**

但我相信这不是真的。似乎当焦点不在richtextbox控件上时调用ScrollToCaret（）时，我可以看到richtextbox的滚动条在收到新消息时向下移动，这意味着它打印消息并更新，即使它没有焦点。

我试图锁定富文本框以防止多线程，但它没有解决访问冲突问题。如果除了使用 focus() 函数之外还有其他解决方案来解决此问题，那就太好了。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T16:55:24.627

在这里发现了另一个问题，它给了我一种完全规避这个问题的方法，可以毫无问题地产生相同的输出： [https ://stackoverflow.com/a/8562457/568042](https://stackoverflow.com/a/8562457/568042)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:53:31.273

```
public delegate void WriteLogEntryDelegate(string log_entry);

    void WriteLogEntryCB(string log_entry)
    {
        if (richTextBox1.InvokeRequired == true)
        {
            var d = new WriteLogEntryDelegate(WriteLogEntryCB);
            this.Invoke(d, log_entry);
        }
        else
        {
            richTextBox1.AppendText(log_entry + "\r\n");
            this.richTextBox1.SelectionStart = this.richTextBox1.Text.Length;
            this.richTextBox1.ScrollToCaret();
        }
    } 
```

# android - textView中阴影和embossMaskFilter之间的冲突：文本不可见

> ID：14027506
> 
> 赞同：2
> 
> 时间：2012-12-25T03:44:16.393
> 
> 标签：android, android-layout

我有一个文本视图：

```
<TextView
      android:id="@+id/textAfter"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="example string"
      android:textColor="@android:color/transparent"
      android:textSize="40sp"
      /> 
```

此 textView 稍后以编程方式以一系列方式进行修改：

```
imageView_Source = (TextView)findViewById(R.id.source);
textAfter = (TextView)findViewById(R.id.textAfter);

X_FONT = Typeface.createFromAsset(getResources().getAssets(), "ROCKB.TTF");
//textAfter = new TextView(getApplicationContext());
textAfter.setTypeface(X_FONT);
localTextPaint = textAfter.getPaint();
localTextPaint.setTextScaleX(1f);     
localTextPaint.setFakeBoldText(true);
localTextPaint.setAntiAlias(true);
localTextPaint.setSubpixelText(true);
localTextPaint.setMaskFilter(new EmbossMaskFilter(new float[] { 1, 1, 1 },ambientValue, specularValue, blurRadiusValue)); 
```

和

```
public void onClick(View v) {
      //textAfter.invalidate();
      localTextPaint.setMaskFilter(null);
      textAfter.invalidate();
      localTextPaint.setMaskFilter(new EmbossMaskFilter(new float[] { 1, 1, 1 },ambientValue, specularValue, blurRadiusValue));
      textAfter.invalidate();

}}; 
```

onClick 纯粹用于测试目的。但是，如果我添加以下内容：

```
 android:shadowColor="#000000"
 android:shadowDx="3.0"
 android:shadowDy="3.0"
 android:shadowRadius="1.0" 
```

文本变得完全不可见。虽然阴影和蒙版在单独应用时都有效，但在统一应用时都不起作用（文本不会直接出现）。我猜这也与应用于阴影的蒙版有关，但我对 Android 编码还很陌生，所以我真的不知道是什么原因造成的，也不知道如何修复它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T23:12:27.903

我遇到了同样的事情，我意识到这是由于硬件加速。

要为特定视图禁用硬件加速，请执行以下操作：

```
<TextView>.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:45:43.370

我的项目中存在同样的问题。我能够重现这种行为。尝试了一些东西，没有任何效果。我更喜欢 *.9.png 。

如果您不想使用 png，这种方法看起来很有趣[http://qwerjk.com/magic-text](http://qwerjk.com/magic-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-26T20:08:37.167

我在下面使用相同对象的简化透明副本，仅给它阴影，而前景中的原始副本设置为浮雕。

# c++ - strncpy 没有按预期工作

> ID：14027510
> 
> 赞同：0
> 
> 时间：2012-12-25T03:45:20.947
> 
> 标签：c++, string, strncpy

```
#include <iostream>
using namespace std 
#include <string.h>
int main(){
    char token[] = "some random string";
    char c[23];  
    strcpy( c, token);
    strncpy(c, token, 5); 
    c[strlen(c)] = '\0';
    cout<<c;
    return 0 ;
} 
```

我的输出是：`some random string`. 但我希望它是：`some`. 谁能解释为什么它会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T03:51:28.430

它工作得很好 - 请记住，[`strncpy`不一定会以空值终止 string](https://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate)。当你这样做时：

```
strncpy(c, token, 5); 
```

它复制`token`into的前 5 个字节，`c` *但不以空值终止 result*。此外，这条线是无用的：

```
c[strlen(c)] = '\0'; 
```

`strlen(c)`查找现有的空终止符，一旦找到，就用另一个空终止符覆盖它，这是没有意义的。

在新代码中，`strncpy`应该*很少使用，如果曾经*使用过。它的预期用途（不一定是空终止的固定长度缓冲区）早已过时。更喜欢类似的功能[`strlcpy`](http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&sektion=3)（注意：`strlcpy`不是标准的；它仅在类似 BSD 的系统中可用）。

或者，如果您使用 C++ 而不是纯 C 进行编码，则只需使用`std::string`并完全避免此类棘手的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T03:51:32.427

我认为您的输出应该是“一些随机字符串”，因为您的两行代码什么都不做，请参阅注释。

```
int main(){
   char token[] = "some random string";
   char c[23];  
   strcpy( c, token);
   strncpy(c, token, 5);  // Does nothing
   c[strlen(c)] = '\0';   // Does nothing
   cout<<c;
   return 0 ;
} 
```

如果你想输出“一些”，你可以这样做：

```
strncpy(c, token, 5);
c[5] = '\0'; 
```

strncpy() 不会自动将尾随 '\0' 添加到目标字符串。如果源字符串长度大于 len（strncpy 的第三个参数），则将 len 个字符复制到 dest，不带尾随 '\0'。所以你必须通过代码明确地给出一个尾随 '\0'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T03:51:18.500

您需要在单词“some”之后空终止，而不是在整个字符串之后空终止。strncpy 会将“some”复制到 c 中，但它不一定会终止您的字符串（请参阅[strncpy](http://linux.die.net/man/3/strcpy)的手册页）

```
c[4] = '\0' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:26:53.750

正如其他人所提到的，与`snprintf`to不同`sprintf`，`strncpy`它不是更安全的`strcpy`. 它只是确保“恰好 N 个字符被复制到目标（如果源字符串短于 N，则使用 NUL）”。（手册页）

但我想你已经注意到了

```
c[strlen(c)] = '\0'; 
```

这意味着确保`c`. 但这实际上是没有意义`strlen`的，因为使用 NUL 来确定`c`. 所以这条线几乎不意味着“找到 NUL 并将 NUL 写入该位置”。

的重要性`strncpy`是复制字符串的特定部分。它不是对 的修复`strcpy`，并且在引入`snprintf`函数之前就已经存在。

# vb.net - VB.NET Stream Writer UTF-8 不是 ANSI

> ID：14027511
> 
> 赞同：-1
> 
> 时间：2012-12-25T03:45:28.033
> 
> 标签：vb.net, utf-8, stream, ansi

我的代码基本上是这样的：

```
Dim writer As New System.IO.StreamWriter("C:\file.exe")
writer.Write(Chr(CInt("&H80")))
writer.Close() 
```

我正在编写一个可执行文件，所以 UTF-8 不适合我。当我写 &H80 (80) 时，它给了我 (E2 82 AC)，它是 '€' 的 UTF-8 表示。我已经尝试了所有方法，有什么方法可以用 ANSI 编写吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:22:11.380

您混淆了文本和二进制数据：由返回的数据类型`String`和本质上与编码相关联，并且仅用于文本。`Char``Chr`

要处理二进制数据，请使用`Byte`数组。

同样，`StreamWriter`该类用于将*文本*写入精细的而非二进制数据。要写入二进制数据，请使用[`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)该类。

# java - 如果提高可读性，冗余代码是否可以接受？

> ID：14027514
> 
> 赞同：5
> 
> 时间：2012-12-25T03:46:32.957
> 
> 标签：java, coding-style

我有以下代码来检查游戏单位是玩家还是敌人。这是仅有的两类。我可以删除 isEnemy 方法并像 if(!isPlayer) 一样运行对敌人的所有检查，但我个人认为 if(isEnemy) 使代码的意图更加清晰。是否有任何既定的编码风格对这种情况有什么要说的？

```
public boolean isPlayer(Unit unit) {
    return unit == player;
}

public boolean isEnemy(Unit unit) {
    for (Unit e : enemies) {
        if (unit.equals(e))
            return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T04:02:17.543

对于您的情况，您只有两种可能的状态-它们要么是敌人，要么是玩家。如果他们是玩家，他们就不是敌人。最简洁的表达方式是`!isPlayer`.

如果您有其他可能的状态，那么您可能想要查看其他状态的某种枚举。

作为一般经验法则： [不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。如果您复制的代码的一部分发生了更改（可能是为了修复错误），那么您必须更改该错误的每一次出现。它可能变成维护的噩梦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T04:00:04.083

就个人而言，我会实现`isEnemy()`as`!isPlayer()`但拥有`assert`运行循环的 an 以确保它确实是一个敌人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T04:36:39.180

我认为两种方法都可以接受。如果 isEnemy() == !isPlayer() 我会考虑将 isEnemy() 实现为：

```
public boolean isEnemy(Unit unit) {
  return !isPlayer(unit);
} 
```

这样，您可以获得具有两种特定方法的可读性，但不必重复自己，就好像您可以调整 isPlayer() 并影响这两种方法一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T03:57:32.117

在我看来，这是完全可以接受的。特别是在大型项目中，可读性非常重要。还要考虑到，如果您将来添加第三个角色，那么您将无法使用 if (!isPlayer)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-25T04:32:33.767

通过查看您的代码，您正在识别敌人是否存在于集合“敌人”中。所以对你来说，敌人本质上不是不是玩家的人。如果您想强制执行此语义，那么我认为您不应该使用 isEnemy() 方法。

您可能需要 isEnemy() 方法的另一个原因是，如果您看到其他类型的可能性说 Ally。拥有 isEnemy() 方法将使添加更简单、更清晰。

但是，如果以上 2 个条件无效，则将其删除。正如他们所说的YAGNI :)

# objective-c - 使用 NavigationController 并在其中更改视图，而无需推送 Nav 堆栈

> ID：14027516
> 
> 赞同：0
> 
> 时间：2012-12-25T03:46:41.393
> 
> 标签：objective-c, ios, uinavigationcontroller, xcode4.5

我试图能够在不推送到 NavController 的情况下更改 NavController 中的内容。例如，如果我有一个视图控制器“A”，当用户继续手势或单击时，视图将更改为另一个视图控制器“X”，但是导航控制器不会将视图控制器“X”推送到其堆栈上。因此，我可能会做手势或单击继续显示 viewController x 、 y 和 z。但是，在任何时候我都可以按回导航栏，它会将我返回到其堆栈上的前一个 viewController

澄清一下，我希望能够实现一个不影响导航控制器的页面控制器，因此在任何时候，如果用户按下回，他们就会返回到堆栈上的前一个视图控制器。

在图像中，显示了 navcontroller 上的视图控制器。我希望能够通过白色部分中的页面控制器在不同视图之间进行更改。所以我在那里拖放了一个 UIView。我可以将该 UIview 连接到视图控制器，然后实现页面控制器，或者我如何才能在不影响导航控制器的情况下更改白色部分。感谢一切！

![在此处输入图像描述](../Images/bebd8c7ac725b7a167da30390ee75e66.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:53:20.930

您应该能够通过以下方法更改位于视图控制器“堆栈”顶部（或任何位置）的视图[`[UINavigationController setViewControllers: animated: ]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/setViewControllers%3aanimated%3a)：

如果您已经以其他方式显示了视图控制器，请替换您要使用的视图控制器并将“动画”设置为“否”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:10:13.933

从您的问题中不清楚您是否希望这些其他控制器 x、y 和 z 在堆栈中。如果你不这样做，那么你可以将它们添加为堆栈中的一个控制器的子视图控制器，这对后退按钮的操作没有影响——它仍然会带你回到前一个控制器（你推的）。可以这样做：

```
 -(IBAction)addBlue:(id)sender {
        BlueController *blue = [self.storyboard instantiateViewControllerWithIdentifier:@"Blue"];
        [self addChildViewController:blue];
        [self.blue didMoveToParentViewController:self];
        blue.view.frame = self.view.bounds;
        [self.view addSubview:blue.view];
    } 
```

# javascript - 如何使用 html 进行测试

> ID：14027519
> 
> 赞同：3
> 
> 时间：2012-12-25T03:47:44.967
> 
> 标签：javascript, jasmine

我想测试我的功能，html是这样的。

这是我的功能。关于如何测试此功能的任何好主意，使用代码将更有帮助。

```
 <div id="showImgContainer"><img src="test.j" id="showImg" /></div>

    function showIMG(){
        $('#showImg').remove();
        $('#showImgContainer').append('<img src="anothertest.jpg" />');
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:31:53.497

当您想做一个测试用例时，您必须指定输入和预期输出。对于茉莉花，它以下列方式表示

```
it("name of your test case", function() {

    // Your call with the inputs //
    var result = showIMG();

    // The expected outputs //
    expect(result).toBe(false);
}); 
```

对于您的情况，很难说出要测试的最佳输出是什么，因为我们目前缺乏很多上下文。事实上，您必须测试的输出取决于您对函数的期望行为。您只是希望图像 URL 发生变化吗？您是否还期望 HTML 结构保持不变？“返回错误”也是一种期望吗？

对于您可以在 HTML / DOM 上进行的测试，通常分 4 步完成。您必须首先设置 HTML，调用函数，测试输出，然后清理所有内容。如果您的期望之一是只需要更改图像的 URL，它会如下所示：

```
it("URL of the image needs to change", function () {
     // Step 1 - Setup the initial state of the HTML //
     var baseHTML = '<div id="showImgContainer"><img src="test.j" id="showImg" /></div>';
     var div = document.createElement("div");
     div.innerHTML = baseHTML;
     document.body.appendChild(div);

     // Step 2 - Call //
      showIMG();

     // Step 3 - We check the state of the HTML with our expectation //
     expect($("#showImgContainer img").attr("src")).toEqual("anothertest.jpg");

     // Step 4 - Cleanup the setup //
     document.body.removeChild(div);
}); 
```

# asp.net - 如何使用 asp.net-web-api 实现授权？

> ID：14027520
> 
> 赞同：1
> 
> 时间：2012-12-25T03:48:31.830
> 
> 标签：asp.net, asp.net-mvc, authorization, asp.net-web-api

如何使用 asp.net-web-api 实现授权？asp.net-mvc授权和asp.net-web-api授权有多少区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:59:27.777

在 MVC 中，您可以简单地`[Authorize]`在控制器上方添加方法或类来控制受保护的页面。或者为了防止伪造，您可以`[ValidateAntiForgeryToken]`在视图和控制器上使用。它将使用 MachineKeys 来评估相关用户。Asp.net Web API 和 MVC 平台之间没有区别。但是 MVC 平台和网页之间存在一些差异。您还可以[在 Web.config 文件中使用授权](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)。

*   Asp.net MVC 中的 2 种授权类型是：

[1- 基于角色的授权](http://www.asp.net/web-forms/tutorials/security/roles/role-based-authorization-cs)

[2-基于用户的授权](http://www.asp.net/web-forms/tutorials/security/membership/user-based-authorization-cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:21:16.747

您应该首先将授权和身份验证逻辑分开。您可以通过消息处理程序以与主机无关的方式执行身份验证，并通过操作过滤器执行授权。

查看[PingYourPackage](https://github.com/tugberkugurlu/PingYourPackage)项目，它是一个示例 ASP.NET Web API 应用程序。您可以在那里看到[基本的身份验证消息处理程序](https://github.com/tugberkugurlu/PingYourPackage/blob/dev/src/apps/PingYourPackage.API/MessageHandlers/PingYourPackageAuthHandler.cs)。`Thread.CurrentPrincipal`如果请求已通过身份验证，则此处理程序为请求设置。

另外，请查看用于`AuthorizaAttribute`执行授权的控制器。`AuthorizaAttribute`检查执行`Thread.CurrentPrincipal`授权。

# ruby - 什么时候使用块作为要传递的对象？

> ID：14027528
> 
> 赞同：-2
> 
> 时间：2012-12-25T03:50:35.177
> 
> 标签：ruby, block

我看到的大多数示例都是微不足道的，我不确定这会给语言增加什么。我明白为什么你会在 Objective-C 中使用块来处理回调或在 Javascript 中使用闭包作为计时器的回调，但我不确定在 Ruby 中我将使用块来做什么。是否可以使用它来代替具有类似功能的功能`inject`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:59:01.023

Ruby 到处都使用块，这是该语言最普遍的特性之一。它基本上是函数即值的优化案例。一个真正的函数对象，就像在 JavaScript 中一样，在 Ruby 中是一个`Proc`类的实例。块*不是*对象，因此避免了对象性产生的一些开销。原因是，在几乎所有你想将函数作为参数传递的情况下，你只会传递一个，并且你想当场定义它，所以为什么不优化，让事情成为语法上更好一点？

这是一个块：

```
[1, 2, 3].each do |i|
  puts i
end 
```

这是一个函数：

```
func = Proc.new do |i|
  puts i
end
[1, 2, 3].hypothetical_each(func) 
```

您可以看到，即使定义一个函数值也涉及一个块（作为`Proc`构造函数的参数）。

您通常在 中使用块`inject`，而不是函数。您几乎在 Ruby 中的每个循环结构中都使用它（`while`非常不常用）。

您还可以使用块来构建特定领域的语言，例如 Sinatra：

```
get 'index.html' do
  "Hello World"
end 
```

或 Rspec：

```
describe "addition" do
  it "should add two numbers together" do
    (1+2).should equal(3)
  end
end 
```

学好积木，因为没有积木你就不能读，也不能写好 Ruby。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:46:45.387

ruby 中块的秘密在于 ruby​​ 设计的本质。

Ruby 设计有一个对象模式，其中方法调用作为“消息”发送到对象，返回值是响应。在 ruby​​ 中（与 python 和其他一些语言不同），函数和方法本身不是对象。块是 ruby​​ 在此模式中允许类似函数的消息的方式，并且是 ruby​​ 通常如何处理迭代的关键。

如果我错了，请有人纠正我，但我相信实际上不可能在不创建块或使用 while 语句的情况下在 ruby​​ 中进行任何迭代，实际上该`for i in object`符号只是访问对象`each`方法的语法简写。

IE。

```
for i in 1..5
  #do stuff with i
end 
```

执行完全一样：

```
1..5.each do |i|
  #do stuff with i
end 
```

通过 ruby​​ VM，其中 Range 对象`1..5`（包括 ruby​​ 标准 lib Enumerable 模块）将其元素生成给传递的块

在引擎盖下，这个操作看起来像这样（注意这是一个简化版本，没有考虑到范围的 ... 独占和 .. 包含版本）

```
class Range

  def init(start, end)
    @start = start
    @end = end
  end

  def each
    i = @start
    while i < @end
      yield i
      i += 1
    end
  end

end 
```

因此，当调用该 for 循环时，它会创建一个范围对象`obj = Range.new(1,5)`，然后向该对象发送一条消息，`obj.send(:each, &block)`并在每个方法内部使用一个 while 循环并屈服于块

**TL;博士**

Ruby 在内部使用块，因为它们对它的设计至关重要，没有它们，语言本身将无法使用它的`message => object => response`模态。

所以你不应该问：“我为什么要使用积木？” 因为没有它们就无法编写 ruby​​ 程序。

相反，您应该问：“ruby 中的块与 Objective-C 和 Javascript 中的块有何不同？” 因为他们是不同的。

我不能为 Objective-C 说话，但在 JavaScript 中，块在很大程度上是一个对象。它是代码的容器，其他对象可以获取并使用它来做任何需要的事情，块甚至不必与使用它的对象相关联。

在 ruby​​ 中，一个块更像是一个对象在邮件中收到的一组指令，它在它自己上使用（然后在他下次来的时候传递给邮件人）

# java - 为什么我会收到 InputMismatchException？

> ID：14027537
> 
> 赞同：9
> 
> 时间：2012-12-25T03:51:39.217
> 
> 标签：java, input, java.util.scanner, inputmismatchexception

到目前为止，我有这个：

```
public double checkValueWithin(int min, int max) {
    double num;
    Scanner reader = new Scanner(System.in);
    num = reader.nextDouble();                         
    while (num < min || num > max) {                 
        System.out.print("Invalid. Re-enter number: "); 
        num = reader.nextDouble();                         
    }
    return num;
} 
```

还有这个：

```
public void askForMarks() {
    double marks[] = new double[student];
    int index = 0;
    Scanner reader = new Scanner(System.in);
    while (index < student) {
        System.out.print("Please enter a mark (0..30): ");
        marks[index] = (double) checkValueWithin(0, 30); 
        index++;
    }
} 
```

当我对此进行测试时，它不能采用双数，并且我收到了以下消息：

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Scanner.java:909)
at java.util.Scanner.next(Scanner.java:1530)
at java.util.Scanner.nextDouble(Scanner.java:2456)
at MarkingSystem.checkValueWithin(MarkingSystem.java:25)
at MarkingSystem.askForMarks(MarkingSystem.java:44)
at World.main(World.java:6)
Java Result: 1 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-09-24T15:24:37.157

不要使用点，例如：1.2，而是尝试像这样输入：1,2。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-25T04:04:44.393

在这里您可以看到[Scanner](http://www.cs.utexas.edu/users/ndale/Scanner.html)的性质：

> 双下一个双（）
> 
> 以双精度形式返回下一个标记。**如果下一个标记不是浮点数或超出范围，则抛出 InputMismatchException。**

尝试捕捉异常

```
try {
    // ...
} catch (InputMismatchException e) {
    System.out.print(e.getMessage()); //try to find out specific reason.
} 
```

**更新**

**情况1**

我试过你的代码，没有任何问题。您收到该错误是因为**您必须输入`String`value**。当我输入一个数值时，它运行没有任何错误。但是，一旦我输入`String`了您在问题中提到 `throw`的相同内容。`Exception`

**案例二**

您输入的内容**超出了**我上面提到的范围。

我真的很想知道你可以尝试输入什么。在我的系统中，它运行完美，无需更改任何一行代码。只需照原样复制并尝试编译并运行它。

```
import java.util.*;

public class Test {
    public static void main(String... args) {
        new Test().askForMarks(5);
    }

    public void askForMarks(int student) {
        double marks[] = new double[student];
        int index = 0;
        Scanner reader = new Scanner(System.in);
        while (index < student) {
            System.out.print("Please enter a mark (0..30): ");
            marks[index] = (double) checkValueWithin(0, 30); 
            index++;
        }
    }

    public double checkValueWithin(int min, int max) {
        double num;
        Scanner reader = new Scanner(System.in);
        num = reader.nextDouble();                         
        while (num < min || num > max) {                 
            System.out.print("Invalid. Re-enter number: "); 
            num = reader.nextDouble();                         
        } 

        return num;
    }
} 
```

如您所说，您已尝试输入`1.0`等`2.8`。请尝试使用此代码。

**注意：请在不同的行中逐行输入数字。我的意思是，回车`2.7`，按回车，然后输入第二个数字（例如`6.7`）。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-19T17:46:09.013

我遇到了同样的问题。奇怪，但原因是对象扫描器根据系统的本地化解释分数。如果当前本地化使用逗号分隔分数的各个部分，则带有点的分数将变成字符串类型。因此错误...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T04:04:07.810

由于您有手动用户输入循环，因此在扫描仪读取您的第一个输入后，它会将回车/回车传递到下一行，该行也将被读取；当然，这不是你想要的。

你可以试试这个

```
try {
    // ...
} catch (InputMismatchException e) {
    reader.next(); 
} 
```

或者，您可以在读取下一个双重输入之前使用该回车符，方法是调用

> reader.next()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T04:06:36.737

您是否向控制台提供写入输入？

```
Scanner reader = new Scanner(System.in);
num = reader.nextDouble(); 
```

如果您只输入 456 之类的数字，则返回双精度。如果您输入的是字符串或字符，它会在尝试执行 num = reader.nextDouble() 时抛出 java.util.InputMismatchException。

# javascript - Rangy：如何使用动态 elementProperties 创建 CssClassApplier

> ID：14027538
> 
> 赞同：2
> 
> 时间：2012-12-25T03:51:56.830
> 
> 标签：javascript, jquery, rangy

我的代码：

```
var cssApplier;
        window.onload = function () {
            rangy.init();
            cssApplier = rangy.createCssClassApplier("highlight", {
                ignoreWhiteSpace: true,
                elementTagName: "span",
                elementProperties: {
                    id: new Date()
                }
            })
        }; 
```

但是当我打电话时

```
cssApplier.applyToSelection(); 
```

它总是呈现具有相同 id 属性的跨度，我如何设置 id 属性动态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T18:27:13.647

`new Date()`在您调用`rangy.createCssClassApplier()`. 为每个创建的元素生成一个新元素的唯一方法`id`是，如果 Rangy 提供了在每次创建新元素时指定回调的方法，而目前它没有。但是，无论如何，这是我一直在考虑添加的内容。我在 Rangy 问题跟踪器中添加了一个问题：

[https://github.com/timdown/rangy/issues/143](https://github.com/timdown/rangy/issues/143)

**更新**

您现在可以通过传入`onElementCreate`选项对象在 Rangy 1.3 中执行此操作：

```
var id = 0;
var applier = rangy.createApplier("someClass", {
    onElementCreate: function(el) {
        el.id = "rangySpan_" + (id++);
    }
}); 
```

# android - Android Jelly Bean TTS 语速

> ID：14027539
> 
> 赞同：1
> 
> 时间：2012-12-25T03:52:42.053
> 
> 标签：android, text-to-speech

我一直在使用漂亮的新 Android TTS“果冻豆声音”，但在设置语速时遇到了麻烦。

例如，给定以下示例代码：[http ://code.google.com/p/simple-jellybean-tts-example/](http://code.google.com/p/simple-jellybean-tts-example/)

当我使用旧式 TTS 语音时（即，在 tts.speak(...) 中将 KEY_FEATURE_NETWORK_SYNTHESIS 设置为 false），tts.setSpeechRate 可以正常工作，但是当使用新式“果冻豆语音”时（即 KEY_FEATURE_NETWORK_SYNTHESIS 设置为 true）， setSpeechRate 似乎对口语文本没有影响。

有一些解决方法吗？还是我做错了什么？

提前致谢。

# ruby - 运行配置时出错。停止安装

> ID：14027540
> 
> 赞同：0
> 
> 时间：2012-12-25T03:52:56.547
> 
> 标签：ruby

我正在尝试通过 RVM 将 Ruby 更新到 1.9.3-p327。输入后`rvm install 1.9.3-p327`，我得到这个：

```
 No binary rubies available for: downloads/ruby-1.9.3-p327.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
ruby-1.9.3-p327 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p327 (already extracted)
ruby-1.9.3-p327 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/usr/local/rvm/usr', please read /usr/local/rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation. 
```

然后，我检查配置日志，`ruby 1.9.3-p327/configure.log`在其中看到：

```
[2012-12-24 22:39:14] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-       I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/usr/local/rvm/usr
checking build system type... x86_64-apple-darwin11.4.2
checking host system type... x86_64-apple-darwin11.4.2
checking target system type... x86_64-apple-darwin11.4.2
checking whether the C compiler works... no
configure: error: in `/usr/local/rvm/src/ruby-1.9.3-p327':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

我已经安装了最新的 Xcode 4.5.2 以及通过 Xcode 安装 CLT.. 似乎 C 编译器不起作用，我不知道如何修复它。有什么建议吗？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-12-25T09:17:53.423

查看此 RVM 安装页面：[https](https://rvm.io/rvm/install/) ://rvm.io/rvm/install/ 。这可能会帮助你。

# objective-c - 目标 C - 使用 setter 和 w/o setter 更改局部变量

> ID：14027541
> 
> 赞同：1
> 
> 时间：2012-12-25T03:52:58.917
> 
> 标签：objective-c, setter

> **可能重复：**
> [self.ivar 和 ivar 之间的区别？](https://stackoverflow.com/questions/4142177/difference-between-self-ivar-and-ivar)

`[self setVariable: newStuff]`在 Objective-C 中，和有什么区别`variable = newStuff`？

当你有一个带有变量的类时

```
@property (nonatomic) NSInteger num; 
```

你想改变变量，通常你可以做

```
[self setNum: newNum] 
```

但你也可以

```
num = newNum 
```

我知道如果你声明变量`readOnly`，你不能使用第一种方法来改变它，但它背后的概念是什么？仅仅是因为可以在自己的类之外调用带有 setter 的第二种方法吗？就像类的实例被称为“样本”一样。

```
[sample setNum: newNum] 
```

但是，如果您要更改类中的变量，那么任何一种方式都可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:38:50.490

> 在 Objective-C 中，[self setVariable: newStuff] 和 variable = newStuff 有什么区别？

为了绝对迂腐，其中一个将`variable`属性分配给 in `newStuff`，而另一个将值分配给`newStuff`iVar `variable`，但我认为您想到的是 和 之间的`[self setVariable: newStuff]`比较`self.variable = newStuff`。在这种情况下，没有什么不同，编译器会将案例 2 扩展到案例 1。

> 我知道如果你声明变量readOnly，你不能使用第一种方法来改变它，但它背后的概念是什么？仅仅是因为可以在自己的类之外调用带有 setter 的第二种方法吗？就像类的实例被称为“样本”一样。

`readonly`在某些属性对类的实现是私有的但对其他类应该可见的情况下，变量很重要。

例如，如果我正在编写一个堆栈，我可能想公开堆栈上项目数的计数，但其他类能够写入计数变量将是一个非常糟糕的主意。如果我不聪明并且使用类似计数变量的东西，我希望能够在内部调整信号量的计数（这意味着你需要它在内部是可读写的），所以我声明了一个可见的只读属性以便其他类可以得到它，但是在内部声明它为 readwrite 以便我可以修改它：

```
//.h
@interface CFExampleStack : NSObject 

@property (nonatomic, assign, readonly) int count; //readonly

@end

//.m
@interface CFExampleStack ()

@property (nonatomic, assign) int count; //readwrite

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T04:37:51.487

> 仅仅是因为可以在自己的类之外调用带有 setter 的第二种方法吗？

好吧，这取决于您的实例变量是如何声明的。默认情况下，实例变量是`@protected`，即只能从类及其子类中访问它们。但是，如果您将 ivar 显式声明为`@public`，则可以使用 C 结构指针成员运算符在类外部访问它`->`：

```
obj->publicIvar = 42; 
```

但是，不建议这样做，因为它违反了封装。

此外，如果您使用自定义 setter 方法，那么您有机会在更新实例的属性时执行自定义操作。例如，如果更改`backgroundColor`a 的属性，`UIView`除了将新对象分配给其适当的 ivar 之外，它还需要重绘自身，`UIColor`为此，需要具有副作用的自定义 setter 实现。

此外，在保存对象的实例变量的情况下，还有保留（“强”）和复制的属性。为诸如整数之类的原始类型编写 setter 非常简单

```
- (void)setFoo:(int)newFoo
{
    _foo = newFoo;
} 
```

然后，相比之下，保留或复制的属性需要适当的内存管理调用：

```
- (void)setBar:(Bar *)newBar
{
    if (_bar != newBar) {
        [_bar release];
        _bar = [newBar retain]; // or copy
    }
} 
```

如果没有这样的实现，就不会发生引用计数，因此分配的对象可能会被过早地释放或泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T06:30:20.547

还有一个重要的区别...

每当你使用`self.prop`KVC 时，你可以观察到对象的变化，同时`_prop`绕过它。

# iphone - 保存数据，切换场景cocos2d

> ID：14027543
> 
> 赞同：-1
> 
> 时间：2012-12-25T03:53:17.483
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

在一个简单的游戏中，我将大约 100 个精灵预加载到 CCBatchNode 上，然后在游戏期间修改它们的可见性和位置。游戏结束后，我想切换到不同的场景显示高分，然后再回去玩。有没有办法避免将所有精灵重新加载到新的 BatchNode 上？

我还想知道如何最好地存储可以在每个游戏中收集的硬币之类的东西。NSUserDefaults 会是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:16:48.953

我认为最好的解决方案是使用推送场景来推送显示高分的场景，然后使用 popscene 从堆栈中弹出高分场景。当你 push 和 pop 一个场景时，底层的场景是不变的。

[[CCDirector sharedDirector] pushScene:[HelloWorldLayer 场景]];

[[导演共享导演] popScene];

# haskell - 使用持久性将值列表插入数据库

> ID：14027548
> 
> 赞同：4
> 
> 时间：2012-12-25T03:53:52.617
> 
> 标签：haskell, persistent, yesod

假设我有这段代码（从[“概要”](http://www.yesodweb.com/book/persistent)简化）

```
{-# LANGUAGE QuasiQuotes, TemplateHaskell, TypeFamilies, OverloadedStrings #-}
{-# LANGUAGE GADTs, FlexibleContexts #-}
import Database.Persist
import Database.Persist.Sqlite
import Database.Persist.TH
import Control.Monad.IO.Class (liftIO)
import Control.Monad.Trans.Resource (runResourceT)

share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persist|
Person
  name String
|]

main :: IO ()
main = runResourceT $ withSqliteConn ":memory:" $ runSqlConn $ do
  runMigration migrateAll

  johnID <- insert $ Person "John Doe"
  janeID <- insert $ Person "Jane Doe"

  liftIO $ print johnID
  liftIO $ print janeID

  return ()

input = [Person "John Doe", Person "Jane Doe"] 
```

我将如何插入列表`input`并反过来接收 ID 列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T04:48:03.033

您可以在块中使用[forM](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.6.0.0/Control-Monad.html#v%3aforM)函数。`runSqlConn`例如：

```
main :: IO ()
main = runResourceT $ withSqliteConn ":memory:" $ runSqlConn $ do
    runMigration migrateAll

    ids <- forM input insert
    liftIO $ print ids

  where
    input = [Person "John Doe", Person "Jane Doe"] 
```

# xml - 为什么这段代码会产生段错误？

> ID：14027550
> 
> 赞同：3
> 
> 时间：2012-12-25T03:54:45.783
> 
> 标签：xml, json, haskell, segmentation-fault, aeson

我正在尝试编写一个从 api 解析 xml、剥离一些信息并将结果打印为 json 的模块，但我在打印步骤中遇到了问题。如果我打印节目，我确实看到那里有正确的数据，但是，应该将记录转换为 json, 的调用`encode shows`会产生段错误。

```
{-# LANGUAGE Arrows, NoMonomorphismRestriction, OverloadedStrings #-}
import Network.HTTP
import Text.XML.HXT.Core
import Data.Aeson
import qualified Data.ByteString.Lazy.Char8 as LazyByteString

openUrl :: String -> IO String
openUrl url = getResponseBody =<< simpleHTTP (getRequest url)

composeSearch :: String -> String
composeSearch query = "http://services.tvrage.com/feeds/search.php?show=" ++ urlEncode query

searchShow :: String -> IO String
searchShow query = openUrl $ composeSearch query

data TvShow = TvShow { showName, showId :: String } deriving (Show)

getShow = deep (isElem >>> hasName "show") >>>
    proc x -> do
        name <- getText <<< getChildren <<< deep (hasName "name")  -< x
        id <- getText <<< getChildren <<< deep (hasName "showid") -< x 
        returnA -< TvShow { showName = name, showId = id }

instance ToJSON TvShow where
    toJSON (TvShow name id) = object ["name" .= name, "id" .= id]

main :: IO ()
main = do
    results <- searchShow "Always Sunny" 
    shows <- runX (readString [ withValidate  no ] results >>> getShow)
    putStrLn (LazyByteString.unpack (encode shows)) 
```

**编辑：**正如 user1891025 所指出的，这可能是我的机器或软件包版本的问题。

*   系统：Ubuntu 11.04 32bit
*   爱生 v0.6.1.0
*   GHC v7.2.1

这个问题越来越具体，所以我会把它带到 irc，但如果有人有任何帮助，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T19:41:13.523

从包中调用Aeson 的`encode`函数。该函数使用和其他不安全的函数在内存中四处寻找。这可能就是发生段错误的地方。`encodeUtf8``Data.Text``unsafeDupablePerformIO`

[请参阅此处](http://hackage.haskell.org/packages/archive/text/0.11.3.1/doc/html/src/Data-Text-Encoding.html)的代码。

# jquery - 如何更改我确保 jQuery 仅在滑块可见时才执行此代码？

> ID：14027552
> 
> 赞同：1
> 
> 时间：2012-12-25T03:54:59.243
> 
> 标签：jquery, slider

好的，我几乎完成了在[http://www.gablabelle.com/](http://www.gablabelle.com/)上的网站，但我有一个小问题。

我使用滑块来展示我的照片，当您单击其中一个缩略图时，滑块 div 会淡入。当您使用箭头、右/左键盘键、鼠标单击或滑动来更改幻灯片时，由于 jQuery 地址插件，URL 将相应地更改以反映它所在的幻灯片。按 ESC 或徽标将淡出滑块 div。

问题是当我加载主页时，但不要单击任何缩略图并按左右键盘键，URL 会发生变化（因为它实际上会更改滑块的幻灯片，即使您看不到它）。

幻灯片更改不会打扰，因为当我单击缩略图时，无论如何都会出现正确的幻灯片。这是在幻灯片更改时使 URL 更改的代码：

```
slider.ev.on('rsAfterSlideChange', function(event) {
    $.address.state(ajax_object.path).crawlable(true).value(slider.currSlide.caption);
}); 
```

如何更改我确保 jQuery 仅在滑块可见时才执行此代码？

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:04:15.987

使用`if ($(slider).is(":visible")) { // execute operation }`，将滑块选择器替换为您的滑块的正确选择器。 `$(this).is(":visible")`也可以工作。

# jquery - event.keyCode != 快速键入时当前选择指向的字符

> ID：14027559
> 
> 赞同：3
> 
> 时间：2012-12-25T03:57:17.630
> 
> 标签：jquery, google-chrome, selection, jquery-events

在高低搜索了一个像样的@mention/#tag contenteditable div 解决方案之后，我开始着手构建一个。

在 keyup 事件处理程序中，我使用范围选择技巧来获取当前光标位置，从中可以确定输入的最后两个字符。例如，我正在使用它来查看是否输入了空格后跟 @ 以了解何时调用自动完成功能。我需要能够可靠地获取当前光标位置，以便我可以处理所有令人讨厌的退格情况，使用箭头键，单击该区域。

我遇到的问题是，在我的 keyup 处理程序中，我在事件中获得的键码与我输入的内容相匹配，但是当我输入足够快时，选择似乎滞后了。

例如，请参阅此[http://jsfiddle.net/puMCX/](http://jsfiddle.net/puMCX/)

```
$( '#test' ).bind( 'keyup', function( event )
   {
   var range = window.getSelection().getRangeAt(0);

   console.log( "event.which char '" + String.fromCharCode( event.which ) + "' character from range :'" + $( range.startContainer ).text().charAt( range.startOffset - 1 ) + "'" );
   }); 
```

单击 TEST 并快速输入一些内容。如果您键入的速度相当快，您会注意到键码和选择不匹配。

```
fiddle.jshell.net:25event.which char 'T' character from range :'i'
fiddle.jshell.net:25event.which char 'H' character from range :'s'
fiddle.jshell.net:25event.which char 'I' character from range :'s'
fiddle.jshell.net:25event.which char 'S' character from range :'s' 
```

慢慢打字就好了。

在 keyup 事件有机会触发之前，似乎选择正在更新。

所以问题是，当有人打字非常快时，我如何才能准确地确定光标在 contenteditable div 中的位置（以及围绕所述光标位置的字符）？或者更好的是，有没有更好的方法以严格的跨浏览器方式来实现相同的目标？

我尝试过的大多数其他@mention/tagging 插件都遇到了同样的问题。然而，Facebook 没有。无论我打字多快，它都能正常工作，所以显然有更好的方法。

我正在 Linux 下使用 Chrome 进行测试。

# javascript - 使用 Object.create 而不是 new 时传递参数

> ID：14027574
> 
> 赞同：7
> 
> 时间：2012-12-25T04:02:21.743
> 
> 标签：javascript, object-create

这个问题不是重复[使用 "Object.create" 而不是 "new"](https://stackoverflow.com/questions/2709612/using-object-create-instead-of-new)。有问题的线程在使用时不专注于正确传递参数`Object.create`

* * *

我很好奇我将如何使用`Object.create`而不是`new`. 到目前为止，这是我的代码：

```
function Human(eyes) {
    this.eyes = eyes || false;
}

Human.prototype.hasEyes = function() {
    return this.eyes;
}

function Male(name) {
    this.name = name || "No name";
}

Male.prototype = new Human(true); //passing true to the Human constructor

var Sethen = new Male("Sethen");

console.log(Sethen.hasEyes()); 
```

正如你在上面看到的，`Male.prototype = new Human(true);`创建了一个新的对象。运行该`hasEyes()`函数时，这将按预期记录为真。

所以，我的问题是.. 使用`Object.create`我将如何以传递`true`参数的方式执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T04:17:54.610

您必须使用调用构造函数`Object.call(this)`，然后传递您的参数。

```
function Human(eyes, phrase) {
    this.eyes = eyes || false;
    this.phrase = phrase;
}

Human.prototype.hasEyes = function() {
    return this.eyes;
}

Human.prototype.sayPhrase = function() {
    return this.phrase;
}

function Male(name) {
    Human.call(this, true, "Something to say"); //notice the call and the arguments
    this.name = name || "No name";
}

Male.prototype = Object.create(Human.prototype);

var Sethen = new Male("Sethen");

console.log(Sethen.hasEyes());
console.log(Sethen.sayPhrase());

console.log(Object.getOwnPropertyNames(Sethen)); 
```

这有效，现在该对象`Male`具有`eyes`和`phrase`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T18:05:58.790

这是否为原型继承模型提供了一些线索。

```
const Human = {
    constructor: function (eyes) {
        this.eyes = eyes || false;
    },
    hasEyes: function () {
        return this.eyes;
    }
};

let Male = Object.create(Human);

Male.constructor = function (name) {
    this.name = name || "No name";
    return Human.constructor.call(this, "true");
};

let Sethen = Object.create(Male);
Sethen.constructor = function() {
    return Male.constructor.call(this, 'Sethen');
};

Sethen.constructor();

console.log(Sethen.hasEyes());
console.log(Object.getOwnPropertyNames(Sethen)); 
```

# java - java中的匿名函数

> ID：14027578
> 
> 赞同：5
> 
> 时间：2012-12-25T04:03:11.323
> 
> 标签：java, anonymous-function

我有一个名为 LinkGroup 的类，它包含一些游戏对象。我调用 Rotate 为这些对象设置一些旋转变量。每当我的游戏进入更新循环时，我都会根据旋转变量旋转对象。如果他们已经足够旋转，我会触发一个 onComplete 回调。

以下代码有效...

```
public void Rotate(){
    _currentRotation = _0;
    _targetRotation = 180; //degrees
    _rotationSpeed = 50;

    try{
        _onComplete = LinkGroup.class.getDeclaredMethod("rotateComplete", null);
    }
    catch(Exception ex){

    }
} 
```

...但这很丑陋。

我不喜欢必须声明方法 rotateComplete 并通过字符串手动将其链接到 Rotate。是否有类似于 C# 中的匿名函数的东西，所以我可以在 Rotate 方法中声明 rotateComplete 方法？

对于加分，是否有更好的方法来实现“getDeclaredMethod”所需的异常处理？简洁是一种偏好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T04:25:45.130

据我了解，我相信每当旋转某些游戏对象时，您都会尝试调用类`onRotateComplete()`中的方法。`LinkGroup`您可以使用 Java Swing 用于处理按钮单击或其他事件的模式：这可以通过以下方式完成：

定义一个接口

```
interface IRotateHandler {
    public void onRotateComplete();
} 
```

更改`Rotate()`为`Rotate(IRotateHandler handler)`然后在`LinkGroup`课堂上您可以像这样调用您的游戏对象。

```
gameObject.Rotate(new IRotateHandler() {
    public void onRotateComplete() {
        /* do your stuff!
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T04:12:47.730

你不需要使用`getDeclaredMethod`. 只需做`_onComplete`一个`Runnable`（或类似的），并创建一个匿名类：

```
public void Rotate(){
    _currentRotation = _0;
    _targetRotation = 180; //degrees
    _rotationSpeed = 50;

    _onComplete = new Runnable() {
            public void run() {
                rotateComplete();
            }
        };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T04:11:03.107

Java 7 还没有闭包。 [Java 8 会。](http://openjdk.java.net/projects/lambda/) 因此，目前还没有办法在 Java 中匿名编写该函数。

至于错误处理，快速[浏览一下 API](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)就会发现你抛出了两个`RuntimeExceptions`和一个`ReflectiveOperationException`. 捕捉`Exception`可能是您最好的选择，除非您想以不同的方式捕捉所有这三种可能的异常，并根据每种异常采取不同的行动。

# c# - C# 编译器和 C++/CLI 编译器输出的区别

> ID：14027580
> 
> 赞同：14
> 
> 时间：2012-12-25T04:03:39.120
> 
> 标签：c#, performance, visual-c++, testing, c++-cli

我有一个 WPF 应用程序，它可以跨大型数据集进行大量匹配，目前它使用 C# 和 LINQ 来匹配 POCO 并在网格中显示。随着包含的数据集数量的增加和数据量的增加，我被要求研究性能问题。我今晚测试的一个假设是，如果我们将一些代码转换为 C++ CLI，是否存在实质性差异。为此，我编写了一个简单的测试来创建一个`List<>`包含 5,000,000 个项目的 a，然后进行一些简单的匹配。基本的对象结构是：

```
public class CsClassWithProps
{
    public CsClassWithProps()
    {
        CreateDate = DateTime.Now;
    }

    public long Id { get; set; }
    public string Name { get; set; }
    public DateTime CreateDate { get; set; }
} 
```

我注意到的一件事是，平均而言，对于创建列表然后构建具有偶数 ID 的所有对象的子列表的简单测试，C++/CLI 代码在我的开发机器（64 位 Win8 , 8GB 内存)。例如，创建和过滤 C# 对象的情况大约需要 7 秒，而 C++/CLI 代码平均需要大约 8 秒。好奇为什么会这样，我使用 ILDASM 来查看幕后发生的事情，并且惊讶地发现 C++/CLI 代码在构造函数中有额外的步骤。首先是测试代码：

```
static void CreateCppObjectWithMembers()
{
    List<CppClassWithMembers> results = new List<CppClassWithMembers>();

    Stopwatch sw = new Stopwatch();

    sw.Start();

    for (int i = 0; i < Iterations; i++)
    {
        results.Add(new CppClassWithMembers() { Id = i, Name = string.Format("Name {0}", i) });
    }

    var halfResults = results.Where(x => x.Id % 2 == 0).ToList();

    sw.Stop();

    Console.WriteLine("Took {0} total seconds to execute", sw.Elapsed.TotalSeconds);
} 
```

C# 类在上面。C++ 类定义为：

```
public ref class CppClassWithMembers
{
public:
    long long Id;
    System::DateTime CreateDateTime;
    System::String^ Name;

    CppClassWithMembers()
    {
        this->CreateDateTime = System::DateTime::Now;
    }
}; 
```

当我为两个类的构造函数提取 IL 时，这就是我得到的。首先是 C#：

```
.method public hidebysig specialname rtspecialname 
        instance void  .ctor() cil managed
{
  // Code size       21 (0x15)
  .maxstack  8
  IL_0000:  ldarg.0
  IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
  IL_0006:  nop
  IL_0007:  nop
  IL_0008:  ldarg.0
  IL_0009:  call       valuetype [mscorlib]System.DateTime [mscorlib]System.DateTime::get_Now()
  IL_000e:  stfld      valuetype [mscorlib]System.DateTime CsLibWithMembers.CsClassWithMembers::CreateDate
  IL_0013:  nop
  IL_0014:  ret
} // end of method CsClassWithMembers::.ctor 
```

然后是 C++：

```
.method public hidebysig specialname rtspecialname 
        instance void  .ctor() cil managed
{
  // Code size       25 (0x19)
  .maxstack  2
  .locals ([0] valuetype [mscorlib]System.DateTime V_0)
  IL_0000:  ldarg.0
  IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
  IL_0006:  call       valuetype [mscorlib]System.DateTime [mscorlib]System.DateTime::get_Now()
  IL_000b:  stloc.0
  IL_000c:  ldarg.0
  IL_000d:  ldloc.0
  IL_000e:  box        [mscorlib]System.DateTime
  IL_0013:  stfld      class [mscorlib]System.ValueType modopt([mscorlib]System.DateTime) modopt([mscorlib]System.Runtime.CompilerServices.IsBoxed) CppLibWithMembers.CppClassWithMembers::CreateDateTime
  IL_0018:  ret
} // end of method CppClassWithMembers::.ctor 
```

我的问题是：为什么 C++ 代码使用本地来存储调用的值 from `DateTime.Now`？发生这种情况是否有特定于 C++ 的原因，或者仅仅是他们选择实现编译器的方式？

我已经知道还有许多其他方法可以提高性能，而且我知道我离兔子洞还很远，但我很想知道是否有人可以对此有所了解。自从我做 C++ 以来已经很久了，随着 Windows 8 的出现，以及微软对 C++ 的重新关注，我认为刷新一下会很好，这也是我进行这个练习的动机的一部分，但是两个编译器输出之间的差异引起了我的注意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T19:10:40.313

```
System::DateTime CreateDateTime; 
```

这听起来像是一个技巧问题。您发布的 IL 肯定不会由您发布的代码段生成。您对 CreateDateTime 成员的实际声明是：

```
System::DateTime^ CreateDateTime; 
```

在您发布的 IL 中清晰可见。它产生了装箱转换，将值类型值转换为引用对象。这是 C++/CLI 中一个*非常*常见的错误，很容易意外键入帽子。编译器确实应该为其生成警告，但没有。是的，它使代码陷入困境，拳击转换不是免费的。

否则，您尝试使用 C++/CLI 加快代码速度是徒劳的。只要您在 C++/CLI 中编写托管代码，您就会获得与 C# 编译器生成的相同类型的 IL。C++/CLI 的价值在于它能够非常轻松且廉价地调用非托管代码。然而，使用这样的代码不太可能产生好的结果。您调用的非托管代码必须是“实质性的”，以便您从托管代码执行切换到非托管代码执行所产生的惩罚可以忽略不计。对于不需要任何数据转换的简单转换，该成本徘徊在几个 CPU 周期之间。当您需要执行诸如引脚数组或转换字符串之类的事情时，需要数百个周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T18:16:45.217

一个更接近 C# 编译器所做的（并摆脱了昂贵的`box`）的 C++ 版本将是这样的：

```
public ref class CppClassWithMembers
{
public:
    long long Id;
    System::DateTime CreateDateTime;
    System::String^ Name;

    CppClassWithMembers() : CreateDateTime(System::DateTime::Now) { }
}; 
```

# ios - 如何在 ios 中播放完整的 m3u 音频流

> ID：14027586
> 
> 赞同：3
> 
> 时间：2012-12-25T04:05:19.497
> 
> 标签：ios, m3u

```
NSURL *url = [NSURL URLWithString:@"http://yyyyy.com/radio.m3u"];
  moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

   // Register to receive a notification when the movie has finished playing.
   [[NSNotificationCenter defaultCenter] addObserver:self
                                            selector:@selector(moviePlayBackDidFinish:)
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:moviePlayer];
   NSLog(@"start");
   if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)]) {

       NSLog(@"IF");
       // Use the new 3.2 style API
       moviePlayer.controlStyle = MPMovieControlStyleNone;
       moviePlayer.shouldAutoplay = YES;
       [self.view addSubview:moviePlayer.view];
       [moviePlayer setFullscreen:YES animated:YES];
   } else {
       // Use the old 2.0 style API
      // moviePlayer.movie = MPMovieControlModeHidden;
       NSLog(@"else");
       [moviePlayer play];  
   } 
```

上面的代码是用ios开发的，但是m3u播放只有20秒怎么玩完整的m3u不可阻挡请给一些教程。

# php - MySQL 查询报价等

> ID：14027587
> 
> 赞同：3
> 
> 时间：2012-12-25T04:05:24.470
> 
> 标签：php, mysql, sql, select

> **可能重复：**
> [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

**问题 1**

为什么这行得通？

```
"SELECT `id` FROM `table` WHERE x= '".$y."'" 
```

但不是这个？

```
"SELECT `id` FROM `table` WHERE 'x' = '".$y."'"
                                ^ ^
                              Notice the extra single quotes 
```

**问题 2使用****id**比**`id` 更好** （带有奇怪的引号）？还是因为双引号将其解释为变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T04:06:35.877

因为服务器读取`x`为一个值，因为它是用`single quote`. `backtick`转义查询中使用的保留关键字，通常用于包装*columnNames*和*tableNames*。

在您的查询中，

```
SELECT `id` FROM `table` WHERE 'x' = '$y' 
```

`x`没有*列*，而是一个字符串值。

对于问题 2，您可以消除这些反引号，`id`因为它不是 a `Reserved Keyword`，这是 MySQL 中保留关键字的完整列表

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，查询很容易受到`SQL Injection`. 请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# hadoop - Hadoop 流式处理：每个地图的单个文件或多个文件。不要分裂

> ID：14027594
> 
> 赞同：2
> 
> 时间：2012-12-25T04:07:29.573
> 
> 标签：hadoop, hadoop-streaming, mapper

我有很多需要由 C++ 库处理的 zip 文件。所以我使用 C++ 来编写我的 hadoop 流程序。该程序将读取一个 zip 文件，将其解压缩并处理提取的数据。我的问题是：

1.  我的映射器无法获得一个文件的内容。它通常会得到类似 2.4 文件或 3.2 文件的内容。Hadoop 会向我的映射器发送几个文件，但至少有一个文件是部分的。你知道 zip 文件不能这样处理。每张地图我可以只得到一个文件吗？我不想使用文件列表作为输入并从我的程序中读取它，因为我想拥有数据局部性的优势。

2.  如果 Hadoop 不拆分 zip 文件，我可以接受每个地图的多个 zip 文件的内容。我的意思是 1、2、3 个文件，而不是 2.3 个文件。实际上它会更好，因为我的程序需要加载大约 800MB 的数据文件来处理解压缩的数据。我们可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:59:54.750

您可以在这里找到解决方案：

[http://wiki.apache.org/hadoop/FAQ#How_do_I_get_each_of_a_job.27s_maps_to_work_on_one_complete_input-file_and_not_allow_the_framework_to_split-up_the_files.3F](http://wiki.apache.org/hadoop/FAQ#How_do_I_get_each_of_a_job.27s_maps_to_work_on_one_complete_input-file_and_not_allow_the_framework_to_split-up_the_files.3F)

我建议的最简单的方法是设置`mapred.min.split.size`一个较大的值，这样您的文件就不会被拆分。

如果这不起作用，那么您将需要实现一个`InputFormat`不是很难做到的，您可以在以下位置找到步骤：http: [//developer.yahoo.com/hadoop/tutorial/module5.html#fileformat](http://developer.yahoo.com/hadoop/tutorial/module5.html#fileformat)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-22T01:44:42.467

而不是取决于最小分割大小，我建议一种更简单的方法是 Gzip 你的文件。

有一种方法可以使用 gzip 压缩文件

[http://www.gzip.org/](http://www.gzip.org/)

如果您使用的是 Linux，您可以使用以下命令压缩提取的数据

```
gzip -r /path/to/data 
```

现在您已经将此数据作为您的 hadoop 流式传输作业中的输入传递。

# android - 有什么方法可以在 Android 上**永久**隐藏系统栏（或导航栏）？

> ID：14027595
> 
> 赞同：2
> 
> 时间：2012-12-25T04:07:28.927
> 
> 标签：android

有什么方法可以在 Android 上**永久隐藏系统栏（或导航栏）？**当用户触摸屏幕时，它将重新出现。

我的解决方案是：当用户与屏幕交互时捕捉事件（例如触摸）。但我只能在第二次抓住它。第一次我不能。如果我能在第一时间赶上，我想我可以强制系统栏将再次可见。在这种情况下，您有什么方法可以捕捉到事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:13:36.663

是的，这里是[代码](https://github.com/ppareit/HideBar)Pieter Pareit。

# python - wxPython 和 matplotlib.widgets

> ID：14027596
> 
> 赞同：1
> 
> 时间：2012-12-25T04:07:48.893
> 
> 标签：python, matplotlib, wxpython

我正在开发一个 Python 应用程序，该应用程序将 wxPython 用于带有嵌入式 matplotlib 图的 GUI。在我尝试使用 matplotlib [GUI 中性小部件](http://matplotlib.org/api/widgets_api.html#matplotlib.widgets.SpanSelector)（称为`SpanSelector`. 以前，我试图自己编写这种行为，但进展并不顺利，所以我很高兴有一个内置的小部件可以为我处理它。这些小部件应该适用于任何 GUI 后端，而 wxPython 绝对是受支持的后端。

目前我的代码非常简单；我有一个具有这些（相关）功能的已定义应用程序类：

```
def init_gui(self):
    ...
    self.button5 = wx.Button(tab, label="Manual select", size=(120, 30))
    self.button5.Bind(wx.EVT_BUTTON, self.get_selection_manual)
    ...

def get_selection_manual(self, event):
    span = matplotlib.widgets.SpanSelector(self.ax, \
        self.process_selection_manual, "horizontal", useblit=True, \
        rectprops=dict(alpha=0.5, facecolor="red"))

def process_selection_manual(self, vmin, vmax):
    print vmin, vmax 
```

如果它正在工作，它应该做的就是打印出用户在单击按钮后所做的选择。我知道这`get_selection_manual`被调用了，但是在绘图上单击并拖动永远不会创建选择，并且`process_selection_manual`永远不会调用回调。

我尝试放入一个`sleep()`然后更新显示。有趣的是，当我的应用程序在 a`sleep(5)`而不是`time.sleep(5)`. 因此 Python 停滞不前，但它按照当时的预期绘制了选择。我以前从未见过这种情况，我不确定这意味着什么。我还没有找到任何一起使用 wxPython 和 matplotlib 小部件的示例，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T07:13:41.817

结果证明这是一个非常简单的解决方案：`span`必须声明`self.span`......也许它在做任何事情之前就被垃圾收集了？无论如何，如果我更换它现在可以工作

```
def get_selection_manual(self, event):
    span = matplotlib.widgets.SpanSelector(self.ax, \
        self.process_selection_manual, "horizontal", useblit=True, \
        rectprops=dict(alpha=0.5, facecolor="red")) 
```

和

```
def get_selection_manual(self, event):
    self.span = matplotlib.widgets.SpanSelector(self.ax, \
        self.process_selection_manual, "horizontal", \
        rectprops=dict(alpha=0.5, facecolor="red")) 
```

我还删除了`useblit`标志，因为它弄乱了颜色；我认为这与此修复无关，但仍需注意。

# c# - 如何用空格或缩进注释多行

> ID：14027598
> 
> 赞同：38
> 
> 时间：2012-12-25T04:08:12.157
> 
> 标签：c#, visual-studio-2010, comments

在 Visual Studio 2010 中，我有多行要注释的文本：

```
A
B
C 
```

使用`CTRL`++`E`注释掉`C`多行，我得到

```
//A
//B
//C 
```

我想在**//**和**A**之间有一个空格（或缩进） ，因此`// A`而不是`//A`.

但是，在我将一个文本块分组并缩进后，`CTRL`++不再注释掉选定的文本`E`。`C`

如何对评论进行分组并获得以下信息：

```
// A
// B
// C 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-05-31T13:17:47.180

按`Ctrl`+ `K`+`C`或`Ctrl`+ `E`+`C`选择要评论的行后，斜线后不会留出空格。您可以按照 Habib 的建议使用多行选择来提供空间

也许，您可以在要注释的行之前和 */ 之后使用 /*，在这种情况下，您可能不需要提供空格。

```
/*
  First Line to Comment
  Second Line to Comment
  Third Line to Comment      
*/ 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-12-25T04:45:09.733

一种方法是：

1.  选择文本，按`CTRL`+ `K`，`C`评论 ( `CTRL`+ `E`+ `C`)
2.  将光标移动到分隔符之后`//`和代码文本之前的第一行。
3.  按`Alt`+`Shift`并使用箭头键进行选择。*（请记住进行行选择（使用向下、向上箭头键），而不是文本选择 - 请参阅[框选择和多行编辑](http://weblogs.asp.net/scottgu/archive/2010/04/26/box-selection-and-multi-line-editing-with-vs-2010.aspx)）*
4.  选择完成后，按空格键输入一个空格。

注意下图中的垂直蓝线（一旦选择就会出现，然后您可以在它们之间插入任意数量的字符）

![在此处输入图像描述](../Images/a22b57f71294b11162bd46aaf8249f8d.png)

我找不到直接的方法来做到这一点。有趣的是，它在[C# Coding Conventions（C# Programming Guide）](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)中的 Commenting Conventions 中有所提及。

> 在注释分隔符 (//) 和注释文本之间插入一个空格

但是Visual Studio中注释的默认实现不会插入任何空格

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-03T23:58:06.647

我能够通过使用**Alt + Shift + up/down**然后输入所需的注释字符和附加字符来实现所需的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-15T13:11:21.797

*   您可以根据自己的习惯自定义每一个快捷操作。

只需转到工具 > 选项 > 环境 > 键盘 > 找到要设置键盘快捷方式并根据键盘习惯更改的操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-17T21:55:10.493

可能仅适用于 Visual Studio '15，如果您右键单击源代码，则可以选择`insert comment`

这会在您的评论部分周围放置`summary`标签，但它确实提供了您想要的缩进。

# python - Python 基础：需要参数输入帮助，IndexError：列表索引超出范围

> ID：14027601
> 
> 赞同：1
> 
> 时间：2012-12-25T04:09:49.070
> 
> 标签：python, audio, spectrogram

我正在尝试测试一个 Python 脚本，该脚本有望从 wav 文件中生成音频频谱图。我假设我需要输入一个 wav 的路径，但是我收到一个错误：IndexError: list index out of range 当我通过在此处输入它来尝试它时：

```
sr,x = scipy.io.wavfile.read('mySoundFile.wav') 
```

我还尝试将路径作为命令行中的参数，但我没有做对。有什么帮助吗？

[http://mail.python.org/pipermail/chicago/2010-December/007314.html](http://mail.python.org/pipermail/chicago/2010-December/007314.html)

```
"""
Compute and display a spectrogram.
Give WAV file as input
"""
import matplotlib.pyplot as plt
import scipy.io.wavfile
import numpy as np
import sys

wavfile = sys.argv[1]

sr,x = scipy.io.wavfile.read('BeatBoy01.wav')

## Parameters: 10ms step, 30ms window
nstep = int(sr * 0.01)
nwin  = int(sr * 0.03)
nfft = nwin

window = np.hamming(nwin)

## will take windows x[n1:n2].  generate
## and loop over n2 such that all frames
## fit within the waveform
nn = range(nwin, len(x), nstep)

X = np.zeros( (len(nn), nfft/2) )

for i,n in enumerate(nn):
    xseg = x[n-nwin:n]
    z = np.fft.fft(window * xseg, nfft)
    X[i,:] = np.log(np.abs(z[:nfft/2]))

plt.imshow(X.T, interpolation='nearest',
    origin='lower',
    aspect='auto')

plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:29:33.050

你可以使用这个 try/except 来绕过`IndexError`：

```
try:
   wavefile = sys.argv[1]
except IndexError:
   wavfile = 'BeatBoy01.wav'

sr,x = scipy.io.wavfile.read(wavfile) 
```

`BeatBoy01.wav`如果没有参数传递给脚本，这有效地将默认文件设置为。请记住，它`BeatBoy01.wav`应该位于执行脚本的同一目录中才能正常工作。

为了更容易解析参数，请查看[`OptParse`](http://docs.python.org/2/library/optparse.html)库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T04:35:32.717

不要使用“ **wavfile** ”作为变量，它是库的名称。

尝试这个：

```
inputFile = sys.argv[1]

sr,x = scipy.io.wavfile.read(inputFile) 
```

# perl - perlipc - 带有 IO::Socket 的交互式客户端 - 为什么要分叉？

> ID：14027602
> 
> 赞同：0
> 
> 时间：2012-12-25T04:09:48.637
> 
> 标签：perl, client, fork, ipc

我正在阅读**perlipc perldoc**，并被题为“带有 IO::Socket 的交互式客户端”的部分弄糊涂了。它显示了一个客户端程序，它与某个服务器连接并发送消息，接收响应，发送另一条消息，接收响应，无限循环。作者 Tom Christiansen 指出，将客户端编写为单进程程序会“更加困难”，并继续展示一个实现，该实现派生一个专用于读取 STDIN 并发送到服务器的子进程，而父进程读取从服务器写入到 STDOUT。

我了解它是如何工作的，但我不明白为什么将其编写为单进程程序不会更*简单（而不是更难）：*

```
while (1) {
    read from STDIN
    write to server
    read from server
    write to STDOUT
} 
```

也许我没有抓住重点，但在我看来，这是一个不好的例子。您是否真的设计了一个客户端/服务器应用程序协议，其中服务器可能会突然想到其他内容，将字符插入到客户端正在输入下一个查询的终端上？

**更新 1：**我了解该示例*允许*异步性；我感到困惑的是，为什么**CLI**客户端和服务器之间的并发 I/O 永远是*可取的*（由于终端上文本的输入和输出混乱）。我想不出任何 CLI 应用程序——无论是否是客户端/服务器——都能做到这一点。

**更新2：**哦！！呃......我的解决方案只有在客户端发送的*每一*行都从服务器发送的一行中才有效。如果服务器可以发送未知数量的行作为响应，我将不得不坐在“从服务器读取”循环中——这永远不会结束，除非我的协议定义了一些特殊的“响应结束”令牌。通过在单独的进程中处理发送和接收，您可以将其留给终端用户来检测“响应结束”。

（我想知道是客户端还是服务器通常会生成命令提示符？我一直认为它是客户端，但现在我认为它是服务器更有意义。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:30:56.080

因为`<STDIN>`读取请求可能会阻塞，所以在单个进程中执行相同的操作需要对输入/输出函数进行更复杂的异步处理：

```
while (1) {
    if there is data in STDIN
       read from stdin
       write to server
    if there is data from server
       read from server
       write to STDOUT
} 
```

# actionscript-3 - 如何获得当前活跃阶段？

> ID：14027604
> 
> 赞同：2
> 
> 时间：2012-12-25T04:09:53.963
> 
> 标签：actionscript-3, apache-flex

有没有办法做这样的事情？

```
var text:TextField = new TextField();
text.type = TextFieldType.INPUT;
getCurrentActiveStage().focus = text; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:43:14.657

如果您有任何显示对象以某种方式添加到显示链中，您可以通过`stage`属性引用它。所以，如果`text`已经在舞台上，只需调用：

```
text.stage.focus = text; 
```

如果没有，您将无法在没有参考的情况下访问该阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:40:46.857

您可以通过以下方式从任何地方访问舞台`FlexGlobals.topLevelApplication.stage`

# delphi - 如何在屏幕捕获期间计算帧率和时间码？

> ID：14027606
> 
> 赞同：1
> 
> 时间：2012-12-25T04:10:51.027
> 
> 标签：delphi, sync, screen-capture, timecodes

德尔福6项目

我已经非常彻底地搜索了谷歌，但没有找到我的 delima 的答案。基本上我希望在我的应用程序、状态栏或标签中显示当前屏幕捕获会话的时间码和视频帧速率。我还需要将捕获同步到播放视频的软件播放器的帧速率，否则我会得到很多重复或丢失的帧。视频为 29.970 和 23.976 fps。所以我需要能够以某种方式为两者进行配置。

目前，我可以从电视卡和软件视频播放器（如 vlc、ffplay、mplayer、virtualdub 等）进行屏幕截图。

我不确定如何在我的程序中实施必要的例程，更不用说在哪里了。我已经阅读了很多关于以下项目的内容，但它们都在我脑海中，尽管我确实做了很多尝试：

1.  timer1 控件——将间隔设置为 34 不准确，它在屏幕捕获期间重复或丢失帧
2.  gettimetick 和 timegettime
3.  timeBeginPeriod 和 timeEndPeriod
4.  QueryPerformanceTimer 和 QueryPerformanceCounter

为了帮助简化这个过程，我剪掉了很多原始项目的代码，只具有屏幕捕获功能。这是完整的例程（以及一些注释掉的实验代码）：

（在此先感谢您的帮助）

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, mmsystem,
  ExtCtrls, clipbrd, DXClass;

type
  TForm1 = class(TForm)
    Timer1: TTimer;
    Panel1: TPanel;
    m1: TMemo;
    btnCapOnOff: TButton;
    txtHandle: TEdit;
    Edit2: TEdit;
    stDataRate: TStaticText;
    btnCopy: TButton;
    btnSetHDC: TButton;
    dxt1: TDXTimer;
    sb1: TScrollBox;
    Splitter1: TSplitter;
    im1: TImage;
    procedure btnCapOnOffClick(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure capturewindow;
    procedure Timer1Timer(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure btnCopyClick(Sender: TObject);
    procedure btnSetHDCClick(Sender: TObject);
    procedure dxt1Timer(Sender: TObject; LagCount: Integer);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  start,
  finish : cardinal; //int64;
  i : integer;
  s : string;
  bm: tbitmap;
  dc: hdc=0;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  form1.DoubleBuffered:=true;
  sb1.DoubleBuffered:=true; // this is a scrollbox control
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
  im1.Picture.Bitmap.PixelFormat:=pf24bit;
  im1.Width:=352;
  im1.Height:=240;
end;

procedure TForm1.btnSetHDCClick(Sender: TObject);
begin
  if dc=0 then dc := getdc(strToint(txtHandle.text));
end;

procedure TForm1.capturewindow;
begin
  //timeBeginPeriod(1);
  start := timegettime;
  //sleep(1);
  bitblt(bm.canvas.Handle, 0,0, 352,240, dc, 0,0, srccopy);
  finish := timegettime-start;
  //m1.lines.Add(intTostr(finish)); // debugging: to spill out timing values, etc.
  im1.Picture.Bitmap := bm;
  stDataRate.Caption := 'Date Rate: '+intTostr(finish) + ' fps or ms';
end;

procedure TForm1.dxt1Timer(Sender: TObject; LagCount: Integer);
begin
  capturewindow;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
//  capturewindow; // timer1 is too slow or unpredictable
end;

// button: a cheeters way to turn On or Off capturing
procedure TForm1.btnCapOnOffClick(Sender: TObject);
begin
  if btnCapOnOff.caption='Cap is Off' then begin
    btnCapOnOff.caption:='Cap is On';
    //timer1.Enabled:=true; // capture the window // too slow
    dxt1.Enabled:=true;   // capture the window // a better timer control component (delphiX)

  end else begin
    btnCapOnOff.Caption:='Cap is Off';
    //timer1.Enabled:=false; // too slow
    dxt1.Enabled:=false; // stop capturing the window // a better timer control component (delphiX)
  end;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  bm.free;
  releaseDC(dc,dc);
  //timeEndPeriod(1);
end;

procedure TForm1.btnCopyClick(Sender: TObject);
begin
  clipboard.assign(im1.picture.bitmap); // to take quick pics
end;

initialization
  bm := tbitmap.Create;
  bm.PixelFormat:=pf24bit;
  bm.Width:=352;
  bm.Height:=240;  beep;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:57:13.657

实际上挂钩正在播放视频的软件并与之同步，我不知道该怎么做。但在时间上工作可能会有所帮助。假设播放视频的软件也适时，应该可以顺利抓拍。

本教程很有用：http: [//www.codeproject.com/Articles/1236/Timers-Tutorial](http://www.codeproject.com/Articles/1236/Timers-Tutorial)

“多媒体定时器”提供了很好的分辨率（在大多数机器上低至 1 毫秒），我发现它们很可靠。

我会尝试使用性能计时器（queryperformancetimer，正如您已经提到的）来为您的“CaptureWindow”过程计时。然后，当您在多媒体计时器中调用“timesetevent”时，从单帧的总时间中减去捕获所花费的时间，并将其用作“uDelay”值。

```
HowLongTimerShouldWait := LengthOfASingleFrame - TimeSpentCapturingPreviousFrame 
```

多媒体定时器的好处是它们让您可以将其用作“一次性”，其中每个间隔都可以有不同的延迟时间。我通常将计时器设置为递归调用单个过程，直到它被标记为停止。

这样，通过一些微调，您应该能够获得在实际视频 FPS +/-1ms 容差范围内的捕获率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T04:56:08.820

正如所承诺的，这是我根据一些谷歌搜索并在delphi中解决的代码。以下链接确实帮助了我一些（但由于 c/c++/c# 我无法轻松地转换为 delphi），因此大多数最终答案都是基于大量的试验和错误：

1.  [http://www.andrewduncan.ws/Timecodes/Timecodes.html](http://www.andrewduncan.ws/Timecodes/Timecodes.html)
2.  [http://puredata.hurleur.com/sujet-990-framenumber-timecode-conversion](http://puredata.hurleur.com/sujet-990-framenumber-timecode-conversion)

据我所知，日常工作完美无缺。但正如您所知，我喜欢为间隔目的而格式化的数字，所以我填充到 2 位数字，这样当数字超过 59 时，就不会来回收缩。

以下是它的工作原理：

1.  它根据视频源的帧速率计算时间码（即 29.970 隔行或逐行扫描，以及 23.976 用于 24p 电影）......所以只需输入一个帧号，该函数将以字符串格式返回时间码。

示例准备/使用：

1.  在你的 form1 上放两个 Tedit 和一个 Tbutton 控件
2.  在 button1 onClick 事件中，输入：edit2.text := frameNo2timecode(strToint(edit1.text), 29.970);
3.  现在，运行程序并在第一个 edit1.text 中输入您的帧号
4.  然后，按下 button1 控件，它将计算 edit2.text 中的时间码

计算时间码的源代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, math;

type
  TForm1 = class(TForm)
    Edit1: TEdit;
    Edit2: TEdit;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

function FrameNo2Timecode(fn: longint; rate: real): string;
var
  hours,mins,secs,milli: extended;
  hoursStr, minsStr, secsStr, milliStr: string;
function padzero(N: longint; Len: Integer): string;
begin
  FmtStr(Result, '%d', [N]);
  while Length(Result) < Len do
    Result := '0' + Result;
end;
begin
    hours := floor( (fn/rate)/3600) mod 60;
    hoursStr := padzero(floor(hours),2);
    mins  := floor( (fn/rate)/60.0) mod 60;
    minsstr  := padzero(floor(mins),2);
    secs  := floor( (fn/rate)) mod 60;
    secsstr  := padzero(floor(secs),2);
    milli := floor( (1000*fn/rate)) mod 6000 mod 1000;
    millistr := padzero(floor(milli),3);
    result := hoursStr +':'+ minsStr  +':'+ secsStr  +'.'+ milliStr;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  edit2.text := frameNo2timecode(strToint(edit1.text), 29.970);
end;

end. 
```

# javascript - 更改按钮的提交图像

> ID：14027607
> 
> 赞同：1
> 
> 时间：2012-12-25T04:10:56.820
> 
> 标签：javascript, html, css

试图让提交图像更改无济于事

```
<input type="image" name="submit" value="Login" src="../media/Login.png" 

onclick="this.src='../media/Loginned.png';" style="cursor:default;" /> 
```

这不起作用，真的不知道为什么。能得到一点帮助会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:28:36.093

你所拥有的应该是有效的——只要你没有真正提交，并导致页面刷新。您是否尝试过添加`;return false`到您的点击事件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:32:36.423

尝试

```
onclick="this.src='../media/Loginned.png'; return false;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T05:17:02.690

使用此代码

```
 <input type="image" name="submit" value="Login" src="media/Login.png" 
       onclick="this.src='media/Loginned.png';" style="cursor:default;" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T09:39:03.997

您必须提供图像的绝对路径

```
../imagepath 
```

不管用。

# c# - 比较两个集合

> ID：14027609
> 
> 赞同：2
> 
> 时间：2012-12-25T04:11:20.900
> 
> 标签：c#, reflection, collections, compare, observablecollection

我搜索了我的问题的解决方案，但我想我再次尝试了错误的关键字。我想比较两个 ObservableCollections。Equals 和 SequenceEqual 不起作用。

我已经使用反射编写了某种比较方法：

```
var properties = typeof(MyClass).GetProperties();
for (var i = 0; i < list1.Count(); i++)
{
    foreach (var property in properties)
    {
        var value1 = property.GetValue(list1[i]);
        var value2 = property.GetValue(list2[i]);

        if (value1 != value2)
        {
            return false;
        }
    }
} 
```

value1 和 value2 都是“真”，但它会跳转到 return 语句。

当然，我可以使用 MyClass 的每个属性手动完成，但这并不是很舒服。希望你能告诉我我的错误在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:13:18.213

`value1`并且`value2`是盒装`object`的。
`==`将始终通过引用比较它们。

相反，您应该检查`if (Equals(value1, value2))`，它将按值比较它们。
具体来说，它会`value1.Equals(value2)`在适当的空检查之后调用被覆盖的 。

# python - 烧瓶路线顺序很重要吗？

> ID：14027614
> 
> 赞同：2
> 
> 时间：2012-12-25T04:13:26.400
> 
> 标签：python, google-app-engine, flask, jinja2, werkzeug

我刚开始玩 Flask，所以这很可能是一个非常愚蠢的问题。此应用在 Google App Engine SDK 1.7.4 上运行。Flask 0.9、Werkzeug 0.9 和 Jinja2 2.6。

以下代码按预期工作：

```
from flask import Flask
from flask import render_template

app = Flask(__name__)

@app.route('/')
def hello():
   return "Main page"

@app.route('/hello/', methods=['GET', 'POST'])
@app.route('/hello/<name>', methods=['GET', 'POST'])
def hello(name=None):
    return render_template('hello.html', name=name)

if __name__ == "__main__":
    app.run() 
```

但是，如果我反转路由处理程序，则转到 /hello/ 呈现就像我转到 /

```
from flask import Flask
from flask import render_template

app = Flask(__name__)

@app.route('/hello/', methods=['GET', 'POST'])
@app.route('/hello/<name>', methods=['GET', 'POST'])
def hello(name=None):
    return render_template('hello.html', name=name)

@app.route('/')
def hello():
   return "Main page"

if __name__ == "__main__":
    app.run() 
```

更糟糕的是，转到 /hello/，例如 /hello/John，会导致错误 500。

这是正常的行为吗？路线的顺序很重要吗？如果是这样，还请向我指出相关文档，并在可能的情况下解释为什么此顺序如此重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T04:17:11.507

您正在创建两个具有相同名称 ( `hello`) 的函数。重命名第二个：

```
@app.route('/')
def index():
   return "Main page" 
```

# java - Eclipse RegEx 帮助，不包括子字符串

> ID：14027616
> 
> 赞同：-1
> 
> 时间：2012-12-25T04:13:36.933
> 
> 标签：java, android, regex, eclipse

我正在对 Android 应用程序执行本地化。此过程中的痛点之一是区分用于向用户显示的字符串文字和在本地/以编程方式使用的字符串文字之间的区别。

```
public static String PERSON = "Person";
intent.putExtra("isPerson", isPerson);
myTextView.setText("My name is Mark"); 
```

什么是正则表达式，我可以使用它给我的代码行，其中文本用引号引起来，但 1）不是变量声明和 2）不像第二行那样用作字符串键/值映射中的键。理想的目标是让表达式的匹配结果为第 3 行的类型。我可以查找包含 setText 的字符串，但随后会丢失如下硬编码的字符串：

```
String firstName = "Mark";
myTextView.setText(firstName); 
```

我已经设法得到所有非空的被引号包围的字符串：

```
\"\w{1,}" 
```

问题是它太宽泛了，给了我一切。此外，我希望以下内容能够返回所有不包含 putExtra 的字符串：

```
(?<!putExtra).\"\w{1,}" 
```

但这也不能很好地工作，因为它返回的结果如下：

```
intent.putExtra("title", "Welcome"); 
```

当我想排除任何包含 putExtra 子字符串的文本行时，“欢迎”使它显示为匹配项。

您的 RegEx 大师的任何帮助将不胜感激。我目前正在使用启用正则表达式的 Eclipse 文件搜索功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:05:51.577

您正在尝试解决错误的问题。你的线路

```
intent.putExtra("title", "Welcome"); 
```

不应该有一个文字字符串“标题”，而是一个命名常量。因为您肯定至少使用了两次“标题”字符串（在创建额外信息时，以及在活动 onCreate 方法中提取它时），所以根据干净代码规则，它应该是一个命名常量，以避免幻数和字符串。

按照这种方法，基本上不需要识别正则表达式中的键/值设置器。

# wordpress - wordpress 永久链接不起作用 500 错误

> ID：14027620
> 
> 赞同：6
> 
> 时间：2012-12-25T04:14:09.037
> 
> 标签：wordpress, .htaccess, permalinks, posts

我弄得一团糟，我的网站运行得很完美，但是我对 wpconfig 做了一些更改，我似乎不记得了，结果是，如果我不使用永久链接并使用简单的页面 id，整个网站都可以正常工作，如果我尝试使用永久链接所有单个链接都断开，但主页和管理面板仍在工作。

它总是给出 500 内部服务器错误

任何人都知道可能出了什么问题。

PS> 我已经删除了 .htaccess 并创建了一个新的并复制了 wordpress 给出的代码，但它仍然无法正常工作。

我的网站是[NewsKase](http://newskase.com)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-08-06T09:13:56.710

我有同样的问题。在我更改永久链接之前，我的 WordPress 网站运行良好。我所有的个人链接都中断了，但主页和管理面板仍在工作。当我使用简单的页面 ID 作为永久链接时，整个网站都可以正常工作。

有几件事可能导致此问题。以下帖子列出了一些您可以通过查找永久链接问题的根源的可能性。

[https://economictheoryblog.com/2016/07/29/self-hosted-wordpress-permalink-problems/](https://economictheoryblog.com/2016/07/29/self-hosted-wordpress-permalink-problems/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T04:57:38.607

尝试以下操作：

1.  获取 wp-config.php 的新副本并输入您的数据库详细信息（用户名、密码、名称、表前缀）。
2.  删除 htaccess 文件
3.  重新生成永久链接（管理员 - 设置 - 永久链接）
4.  确保服务器开启了 mod-rewrite

# c# - DotNet 中 Textbox/RichTextbox 内部的组件

> ID：14027633
> 
> 赞同：2
> 
> 时间：2012-12-25T02:42:27.043
> 
> 标签：c#, wpf, richtextbox

我正在使用 WPF 中的文本框/富文本框组件，我需要将其他文本框导入其中。目前，我使用一个 RichTextbox 控件，该控件将其他自定义文本框插入其中（它们是必要的，因为它是一个无法以其他方式完成的表达式）。我遇到的问题是当光标与richtexbox 内的文本框相邻时，我需要将注意力集中在文本框中。它似乎忽略了该组件并跳过它。还有其他人对此有解决方案吗？

我似乎无法控制 WPF 中 RichTexbox 内的光标或组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:45:57.083

嵌入在我的 RichTextBox 中的 UIComponent 实际上是一个包含 3 个文本框（基数、上标和下标）的数字。我遇到的问题是光标无法聚焦到数字组件中。

我正在寻找的功能是 this 。. .

```
RichTextBox.CaretPosition.GetAdjacentElement(LogicalDirection Direction) 
```

这是我的代码。. .

```
public class MathRichTextbox : RichTextBox
{
    public MathRichTextbox()
    {
        this.PreviewKeyDown += MathRichTextbox_PreviewKeyDown;
    }

    void MathRichTextbox_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        Digit expr = null;

        switch (e.Key)
        {
            case Key.Left:
                expr = findAdjacentMathDigits(LogicalDirection.Backward);
                break;

            case Key.Right:
                expr = findAdjacentMathDigits(LogicalDirection.Forward);                    
                break;
        }

        if (expr != null)
            this.Dispatcher.BeginInvoke(
                new ThreadStart(() => expr.FocusBase()),
                System.Windows.Threading.DispatcherPriority.Input, null);
    }

    private Digit findAdjacentMathDigits(LogicalDirection direction)
    {
        Digit expr = null;

        if (Selection.Text.Length == 0)
        {
            DependencyObject dpObj = CaretPosition.GetAdjacentElement(
                direction);

            // is it contained in BlockUIContainer?
            expr = CaretPosition.GetAdjacentElement(
                direction) as Digit;

            // is it onctained in a InlineUIContainer?
            if (expr == null)
            {
                InlineUIContainer uiWrapper =
                    CaretPosition.GetAdjacentElement(
                    direction) as InlineUIContainer;

                if (uiWrapper != null)
                    expr = uiWrapper.Child as Digit;
            }

        }

        return expr;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:43:58.507

正如我在评论中所说，您应该尝试使用[Run](http://msdn.microsoft.com/en-us/library/system.windows.documents.run%28v=vs.95%29.aspx)代替。

A`Run`与 TextBox 没有太大区别。让我给你举个例子：

`Paragraph`您想在 RichTextBox的 a 开头添加此字符串“This is an example” ：

```
Paragraph _para //I assume you have this
TextPointer pointer=_para.ContentStart;
Run run=new Run("This is an example",pointer); 
```

就是这样。您可以设置 FontSize、FontFamily 和 ... 其他属性，例如`TextBox`.

```
run.Foregroung=Brushes.Red; 
```

希望能帮助到你。

# asp.net - 默认情况下在哪个帐户中执行 ASP.NET 4.0 代码？

> ID：14027635
> 
> 赞同：3
> 
> 时间：2012-12-25T04:19:49.100
> 
> 标签：asp.net, iis

假设，我有一个应用程序可以访问（读/写）文件系统（应用程序内的文件）、Active Directory 和 SQL Server 数据库。我需要授予此帐户的权限，以便他访问这些东西。应用程序池标识为 IIS APPPOOL\ASP.NET v4，启用匿名身份验证（配置为 IUSR），表单身份验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T04:33:30.967

以下是一些不错的链接，您可以通过这些链接了解 iis 用户

总之：

IIS 5.1 (Windows XP) - 它是一个本地 ASPNET 帐户
IIS 6 - 默认情况下，应用程序池在网络服务帐户下运行，该帐户是 IIS_WPG 组的成员
IIS 7.0 - 仍然是网络服务
IIS 7 SP2 / 7.5 - 在短暂的事物下运行称为 ApplicationPoolIdentity，它映射到一个帐户 IIS APPPOOL\ApplicationPool（例如 IIS APPPOOL\DefaultAppPool）。此帐户是 IIS_IUSRS 用户组的成员

信息来源：-

[用户 ASP.NET 在](https://stackoverflow.com/questions/5045641/user-asp-net-runs-under)
[IIS/ASP.NET 的所有用户帐户下运行，它们有何不同？](https://stackoverflow.com/questions/5729264/what-are-all-the-user-accounts-for-iis-asp-net-and-how-do-they-differ)

[http://www.bluevisionsoftware.com/WebSite/TipsAndTricksDetails.aspx?Name=AspNetAccount](http://www.bluevisionsoftware.com/WebSite/TipsAndTricksDetails.aspx?Name=AspNetAccount)

[http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis](http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis)

[http://imar.spaanjaars.com/287/how-do-i-determine-the-security-account-that-iis-uses-to-run-my-web-site](http://imar.spaanjaars.com/287/how-do-i-determine-the-security-account-that-iis-uses-to-run-my-web-site)

# java - 在 Scala 中，如何覆盖采用 java.util.Map 的方法

> ID：14027636
> 
> 赞同：8
> 
> 时间：2012-12-25T04:19:58.823
> 
> 标签：java, scala, interop

我试图子类化的 Java 类具有如下方法：

```
public abstract void foo(Map var1); 
```

我不知道如何覆盖该方法。我从中继承的 Java 类不使用泛型。

在斯卡拉我试过：

```
override def foo(var1:java.util.Map[Int,Int]){ } 
```

但是编译器给了我一个错误信息，它什么都没有覆盖..

问题的核心是 Scala 需要 Map 上的类型参数，但是 Java 类不使用它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T10:36:25.117

这将使它工作

```
override def foo(var1:java.util.Map[_,_]){ } 
```

# jquery - jquery使表格行在点击时可编辑并在按Enter时发布值

> ID：14027637
> 
> 赞同：0
> 
> 时间：2012-12-25T04:20:08.107
> 
> 标签：jquery, jquery-selectors, jquery-load

HTML

```
<table>
<tr><th>Name</th><th>etc</th><th>tds</th><th>notes</th></tr>
<tr><td></td><td></td><td></td><td></td></tr>
</table> 
```

JS

```
$('td').click(function(){
    var input = $('<input/>').attr('value',$(this).text());
    var w = $(this).innerWidth();
    input.css('width',w).css('border','0');
    $(this).empty();
    $(this).append(input);
    input.focusout(function(){$(this).parent().text($(this).val());});
    input.focus();
}); 
```

我有这个简单的表格，我希望用户填充表格。用户应单击 td 输入值，并在完成所有 4 个字段并按 ENTER 后，他填写的行将发布到服务器并重新加载表。

这样做我在想用户`$(this).closest('table').load('tbl.php',{VALUES OF THE TD's in that row});`

tbl.php withh 然后将行存储到 db，并从 db echo new table 重新加载表。

**我的问题**

1.  如何选择 td 的值并在 .load() 中发送
2.  当用户按下回车键时如何触发该事件

非常感谢

# sharepoint - 通过特征接收器创建诊断区域

> ID：14027638
> 
> 赞同：0
> 
> 时间：2012-12-25T04:20:27.137
> 
> 标签：sharepoint

我正在尝试创建一个诊断区域，用于通过功能接收器记录我的应用程序的需求。我有两种方法可以做到这一点。创建一个农场特征，并在 feature_activated 和 deactivated 中设置代码。第二种方法是拥有网站集范围的功能，并在 feature_installed 和卸载代码

我的问题是，当该功能在其中一个 Web 前端服务器上激活时，是否也需要在其他 WFE 上激活？我在想如果它在一个 WFE 中激活，它应该就足够了，因为它是场配置，不需要在每个 WFE 上激活。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:05:47.043

功能激活会影响 SharePoint 数据库中的功能对象；配置或内容，取决于您的功能范围。与您执行它的场中的哪个服务器无关。激活该功能后，在场中的其他服务器上执行的下一次功能状态检查将产生活动状态。此外，您的功能接收器只会被调用一次；不是在每个 WFE 上。

# asp.net - 如何识别网站上的唯一用户？

> ID：14027640
> 
> 赞同：2
> 
> 时间：2012-12-25T04:20:58.183
> 
> 标签：asp.net

我有一个网站，我可以收集查看者的各种信息（日志） ，包括但不限于：`IP`、、、、和。（如果是移动设备，则为等）`Country``City``OS``Date``Time``MobileOS``Device Model`

但是，具有相同 IP 地址的日志似乎无法识别查看者，因为该网站主要由我大学的学生使用，并且他们具有与大学 WiFi 相同的 IP 地址。

我想以某种方式获取查看器设备的 MAC 地址，但它似乎不适用于 ASP.NET。（有一个 JavaScript 解决方案，但它只适用于 IE。）

有什么方法可以获取我的用户的 MAC 地址吗？或者有没有其他方法可以唯一地识别我网站上的用户，我也许可以使用？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:28:09.827

您无法获取 MAC 地址，因为您和网站查看者之间有很多机器（和接口）。正如您所发现的，IP 地址不是唯一的，因为访问者可能在 NAT 之后，或者可能由于租约续订或临时分配而更改 IP 地址。

如果您只是想识别机器（以及用户和会话），还有其他方法可以进行指纹识别：[https ://panopticlick.eff.org/static/browser-uniqueness.pdf](https://panopticlick.eff.org/static/browser-uniqueness.pdf)

您没有解释为什么要获取 MAC 地址。你想完成什么？

# php - jQuery JSON PHP 请求

> ID：14027641
> 
> 赞同：0
> 
> 时间：2012-12-25T04:21:11.647
> 
> 标签：php, jquery, json

我一直在试图弄清楚我做错了什么，但是当我使用我的 JavaScript 控制台时，它向我显示了这个错误：无法读取 null 的属性“成功”。

JavaScript

```
<script>
$(document).ready(function() {
$("#submitBtn").click(function() {
loginToWebsite();
})
});
</script>
<script type="text/javascript">
function loginToWebsite(){
var username = $("username").serialize();
var password = $("password").serialize(); 
     $.ajax({  
 type: 'POST', url: 'secure/check_login.php',  dataType: "json",  data: { username: username, password: password,  },
    datatype:"json",
            success: function(result) {                 
               if (result.success != true){
                   alert("ERROR");
                   }
                   else
                   {
                       alert("SUCCESS");
                   }
            }   
    });  
} 
</script> 
```

PHP

```
$session_id = rand();
loginCheck($username,$password);
function loginCheck($username,$password)
{
    $password = encryptPassword($password);
    if (getUser($username,$password) == 1)
    {
       refreshUID($session_id);
        $data = array("success" => true);
        echo json_encode($data);
    }
    else
    {
        $data = array("success" => false);
        echo json_encode($data);
    }
}
function refreshUID($session_id)
{
    #Update User Session To Database
    session_start($session_id);
}
function encryptPassword($password)
{
    $password = $encyPass = md5($password);
    return $password;
}
function getUser($username,$password)
{
$sql="SELECT * FROM webManager WHERE username='".$username."' and password='".$password."'";
$result= mysql_query($sql) or die(mysql_error());
$count=mysql_num_rows($result) or die(mysql_error());
if ($count = 1)
{
    return 1;
}
else 
{
    return 0;;
}
}
?> 
```

我正在尝试创建一个登录表单，该表单将为用户提供信息，告诉他他的用户名和密码是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:38:28.273

您的代码中有几个**严重的语法问题**会导致将无效数据发送到服务器。这意味着如果空字段导致您的 php 函数出现问题，您的 php 可能不会使用 JSON 响应。

没有返回数据意味着`result.success`不存在......这很可能是您看到的错误。

首先选择器： `$("username")`&`$("password")`无效，因此您的数据参数将未定义。假设这些是您缺少`#`前缀的元素 ID。**编辑：**原来这些不是 ID，但选择器无效

`serialize()`如果您正在创建一个数据对象以让 jQuery 解析为 formData，您不想使用。使用其中一种。

为了简单起见，尝试使用`var username = $("#inputUsername").val()`. 您可以相应地修复密码字段的 ID

`dataType`两次出现在您的选项对象中，一次有错字。删除`datatype:"json",`不是camelCase的

了解如何在浏览器控制台中检查 AJAX 请求。您会意识到数据参数在很短的时间内没有任何值。那时，在控制台中进行一些调试会引导您立即进行故障排除。

还要检查请求，您可能会看到没有返回任何 json

**编辑：**您似乎还需要在 php 中进行一些验证，因为输入数据显然会导致无法返回任何响应数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T04:25:59.727

尝试在后端进程中添加这个：

```
header("Cache-Control: no-cache, must-revalidate");
header('Content-type: application/json');
header('Content-type: text/json'); 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:31:54.057

您需要转换 PHP 脚本返回的字符串，（请参阅[此问题](https://stackoverflow.com/questions/9098649/jquery-ajax-request-with-json-response-how-to/9099182#9099182)）为此您需要使用`$.parseJSON()`（请参阅[jQuery API](http://api.jquery.com/jQuery.parseJSON/)中的更多信息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T04:56:48.867

我在你的页面上测试。你还有其他问题。您的 ajax 调用中的后变量丢失了，因为您的选择器错误！您正在尝试通过 ID 选择器选择输入的名称属性。您的 input['name'] 的 ID 是“inputUsername”

所以你必须以这种方式选择它

```
$('#inputUsername').val();
// or
$('input[name="username"]').val(); 
```

我又试了一次。您的 PHP 脚本没有任何响应。才200。

```
$.ajax({
type: 'POST', 
url: 'secure/check_login.php', 
dataType: "json", 
data: 'username='+$("#inputUsername").val()+'&password='+$("#inputPassword").val(), 
success: function(result) {
    if (result.success != true){
        alert("ERROR");
    } else {
        alert("HEHEHE");
    }
} 
```

});

尝试在 PHP 脚本的顶部添加以下代码。

```
 header("Content-type: appliation/json");
    echo '{"success":true}';
    exit; 
```

# asp.net - 在通用 http 处理程序中处理会话超时

> ID：14027642
> 
> 赞同：6
> 
> 时间：2012-12-25T04:21:22.313
> 
> 标签：asp.net, session, httphandler, form-authentication

我有一个应用程序，其中大约 20 个`http generic handler`用于`ajax call`.
我已经用于`IReadOnlySessionState`在我的处理程序中访问会话。一切正常。

但是，当会话到期时，我的处理程序会返回一些 html，因为它会重定向到默认页面，并且默认页面的 html 会在响应中发回。

要克服这个问题。
我已经检查了处理程序中的会话变量，如果它为空，我已经写了

```
 context.Response.Write("logout") 
```

我检查了 jQuery ajax 天气，它是注销或其他任何东西。

```
 $.ajax({
            url: "myhandler.ashx",
            contentType: "application/json; charset=utf-8",
            success: function (data) { checklogout(data); $("#loading").hide(); },
            error: function () { $("#loading").hide(); },
            async: false
         }); 
```

如果是注销，那么我已经使用位置重定向到登录页面。
我正在使用`form-authentication`验证用户。

有没有更好的方法来使用 jquery-ajax 调用检查和重定向到登录页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:32:54.927

您的处理程序在一个目录中，该目录由 asp.net 的身份验证自动控制。

我应该做的是不让通过在 web.config 上设置的 asp.net 身份验证自动控制，因此对处理程序的调用将完成，用户未登录以太网，并且在处理程序内部我将检查这一点，如果调用该处理程序的用户具有会话和身份验证。

然后，如果用户没有身份验证来读取该处理程序，我将一个简单的标志返回给我的 ajax 调用，然后识别并进行重定向，例如：

```
$.ajax({
    url: "myhandler.ashx",
    contentType: "application/json; charset=utf-8",
    success: function (data) 
    { 
        if(data.redirectToLogin == true)
        {
            window.location = "/login.aspx"
        }
        else
        {
            // do the rest job
        }
    },
    error: function () 
    { 
        $("#loading").hide(); 
    }
 }); 
```

# ruby-on-rails - 跳过 Rails 中的 JSON 格式生成脚手架

> ID：14027644
> 
> 赞同：23
> 
> 时间：2012-12-25T04:21:38.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scaffolding

当您使用类似命令生成 rails 脚手架时`rails g scaffold Thing`，有什么方法可以避免烦人

```
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @things }
end 
```

你的控制器里的东西？

我正在尝试在 Rails 上教授一门课程，我想先让他们生成一个脚手架，但是对于所有 json 格式，它比它需要的要复杂得多。如果他们可以生成一个创建这样的控制器的脚手架，我会更高兴：

```
class ThingsController < ApplicationController

  def index
    @things = Thing.all
  end

  def show
    @thing = Thing.find(params[:id])
  end

  def new
    @thing = Thing.new
  end

  def edit
    @thing = Thing.find(params[:id])
  end

  def create
    @thing = Thing.new(params[:thing])
      if @thing.save
        redirect_to @thing, notice: 'Thing was successfully created.'
      else
        render: "new" 
      end
    end
  end

  def update
    @thing = Thing.find(params[:id])
      if @thing.update_attributes(params[:thing])
        redirect_to @thing, notice: 'Thing was successfully updated.'
      else
        render: "edit" 
      end
    end
  end

  def destroy
    @thing = Thing.find(params[:id])
    @thing.destroy
    redirect_to things_url
  end
end 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-06-08T09:35:12.750

注释掉`jbuilder`您的`Gemfile`和`respond_to`块中的 gem 将不会生成。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-25T05:00:54.063

只需克隆文件

[https://github.com/rails/rails/blob/v5.2.2/railties/lib/rails/generators/rails/scaffold_controller/scaffold_controller_generator.rb](https://github.com/rails/rails/blob/v5.2.2/railties/lib/rails/generators/rails/scaffold_controller/scaffold_controller_generator.rb)

给你的

```
lib/rails/generators/rails/scaffold_controller/templates/controller.rb 
```

应用程序中的路径并自定义您想要的内容。此外，您可以编写自己的脚手架生成器（[http://guides.rubyonrails.org/generators.html](http://guides.rubyonrails.org/generators.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T05:15:51.263

我想你会错过一个机会。一方面，您将教授非标准 Rails，因此当您的学生在自己的安装中看到正常版本时，他们可能会感到困惑。

更重要的是，控制器以这种方式格式化是有原因的。Rails 强调 REST，它鼓励通过多种数据格式访问资源。许多现代应用不再强调较慢的服务器渲染 html/erb 响应，转而支持 json API。我意识到这是在你的 OP 之后一年多一点，你在课堂上的时间有限，只是为可能发生的任何人添加一些想法。我认为您可以在 response_to 上挥手并告诉他们它正在为您未来的一些可能性做好准备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T05:08:34.460

您会注意到 JSON 响应在此处直接编码到 rails 生成器的模板中：

[https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/scaffold_controller/templates/controller.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/scaffold_controller/templates/controller.rb)

我认为需要注意的一点是，脚手架生成器实际上是为了说明和教育 Rails 堆栈的工作原理，它展示了如何编辑控制器以提供许多不同的格式以满足您的需求！

# caching - 如何在 Meteor 中缓存数据？

> ID：14027646
> 
> 赞同：11
> 
> 时间：2012-12-25T04:21:46.150
> 
> 标签：caching, meteor

感谢大家！最近我想在流星上建一个小cms，但有一些问题

1、缓存、页面缓存、数据缓存等。

例如，当人们搜索某篇文章时

在服务器端：

```
 Meteor.publist('articles',function(keyword){
   return Articles.find({keyword:keyword});
}); 
```

在客户端：

```
Meteor.subscribe('articles',keyword); 
```

没关系，但是......问题是，每次人们这样做时，它都会调用一个 mongo 查询，并降低性能，在其他框架中使用常见的 http 或 https，人们可以依赖 squid 或 varnish 之类的东西来缓存页面或数据，所以每次你路由到一个 url，你从缓存服务器读取数据，但是 Meteor 建立在 socket.js 或 websocket 上，我不知道如何通过套接字缓存......我试过清漆，但没有看到任何效果。那么，可能是它忽略了 websocket 吗？有什么方法可以缓存数据，在 mongodb 中，在服务器中，我可以添加一些缓存服务器吗？

2、聊天

[我在https://github.com/zquestz/simplechat](https://github.com/zquestz/simplechat)看到了聊天室的例子 但是与使用 socket.js 的暗示不同，这个例子将聊天消息保存在 mongodb 中，所以数据流是 message ->mongo->query->people ，这也会调用 mongo 查询！在socket.js中，只需将套接字保存在上下文（或服务器端缓存）中，这样数据就不会通过数据库。我的问题是，Meteor 中是否有套接字接口，所以我可以使用 message->socket->people？如果不能，作为聊天室示例在生产环境中的表现如何（我看到它运行缓慢......）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T09:19:53.153

使用 Meteor，您不必担心缓存 Mongodb 查询。Meteor 会为您做到这一点。根据[有关数据和安全性的文档](http://docs.meteor.com/#dataandsecurity)：

> 每个 Meteor 客户端都包含一个内存数据库缓存。为了管理客户端缓存，服务器发布 JSON 文档集，客户端订阅这些集。随着集合中的文档发生变化，服务器会修补每个客户端的缓存。
> 
> [...]
> 
> 订阅后，客户端将其缓存用作快速的本地数据库，从而大大简化了客户端代码。读取永远不需要昂贵的往返服务器。而且它们仅限于缓存的内容：对客户端集合中的每个文档的查询只会返回服务器正在发布到该客户端的文档。

因为 Meteor 确实经常轮询服务器以查看客户端的缓存是否需要修补，所以您可能会看到这些轮询时不时发生。但它们可能不是很大的请求。此外，由于 Meteor 的一项称为延迟补偿的功能，当您更新数据源时，客户端会立即反映更改，而无需先在服务器上等待。这减少了对用户的性能降低的外观。

如果您在 mongo 中有很多文档，如果您仍然启用了自动发布包，您可能还会看到它们都被获取。您可以通过删除它`meteor remove autopublish`并编写代码以仅发布相关数据而不是整个数据库来解决此问题。

如果你真的需要手动管理缓存，文档也会涉及到：

> 复杂的客户端可以打开和关闭订阅，以控制在缓存中保留多少数据并管理网络流量。当订阅关闭时，它的所有文档都会从缓存中删除，除非另一个活动订阅也提供了相同的文档。

目前正在对 Meteor 进行其他性能改进，包括支持“非常大量的客户端”的 DDP 级代理。您可以在[Meteor 路线图](https://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae)中查看更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-11T18:38:53.707

如果您偶然发现这个问题不是因为对流星的 minimongo 缺乏了解，而是对暂时不再需要订阅后如何缓存订阅感兴趣（但他们可能在未来不想保留额外的订阅）客户端服务器上的 DDP 开销）有两个包选项：

[https://github.com/ccorcos/meteor-subs-cache](https://github.com/ccorcos/meteor-subs-cache)

[https://github.com/kadirahq/subs-manager](https://github.com/kadirahq/subs-manager)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T07:04:32.037

我正在创建一个移动应用程序并且数据库缓存不起作用，因此我使用了流星的 GroundDB 包[https://github.com/raix/Meteor-GroundDB](https://github.com/raix/Meteor-GroundDB)现在每当我重新启动应用程序时数据库总是在本地，你还需要查看meteor的appcache包以在本地缓存整个应用程序。

# linux - GDB 抱怨没有可用的资源

> ID：14027651
> 
> 赞同：10
> 
> 时间：2012-12-25T04:22:39.407
> 
> 标签：linux, assembly, gdb, nasm

我在 Ubuntu 12.10 64 位上运行。

我正在尝试在 GDB 中调试一个简单的汇编程序。但是 GDB 的 gui 模式 (-tui) 似乎无法找到我的程序集文件的源代码。我已经在当前目录中重建了项目并搜索了谷歌无济于事，请在这里帮助我。

我的命令：

```
nasm -f elf64 -g -F dwarf hello.asm

gcc -g hello.o -o hello

gdb -tui hello 
```

调试信息似乎已加载，我可以在 main() 处设置断点，但屏幕上半部分仍显示“ **[No Source Available]** ”。

如果您有兴趣，这里是 hello.asm：

```
;  hello.asm  a first program for nasm for Linux, Intel, gcc
;
; assemble: nasm -f elf -l hello.lst  hello.asm
; link:     gcc -o hello  hello.o
; run:          hello 
; output is:    Hello World 

    SECTION .data       ; data section
msg:    db "Hello World",10 ; the string to print, 10=cr
len:    equ $-msg       ; "$" means "here"
                ; len is a value, not an address

    SECTION .text       ; code section
        global main     ; make label available to linker 
main:               ; standard  gcc  entry point

    mov edx,len     ; arg3, length of string to print
    mov ecx,msg     ; arg2, pointer to string
    mov ebx,1       ; arg1, where to write, screen
    mov eax,4       ; write command to int 80 hex
    int 0x80        ; interrupt 80 hex, call kernel

    mov ebx,0       ; exit code, 0=normal
    mov eax,1       ; exit command to kernel
    int 0x80        ; interrupt 80 hex, call kernel 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T17:44:26.663

这种说法是错误的。

汇编器*确实会*产生行号信息（注意 -g -F dwarf）位。

另一方面，他将显然是 32 位的代码组装成 64 位，这可能会也可能不会。

现在，如果 NASM 的调试输出中存在错误，我们需要知道这一点。

一些快速实验表明 addr2line（但不是 gdb！）*确实*使用 stabs 但不使用 dwarf 正确解码 NASM 生成的行号信息，因此 NASM 生成 DWARF 的方式可能有问题......但也有一些奇怪的地方数据库。

GNU addr2line 版本 2.22.52.0.1-10.fc17 20120131，GNU gdb (GDB) Fedora (7.4.50.20120120-52.fc17))。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T12:10:07.227

这种情况下的问题是汇编器没有为调试器生成行号信息。所以虽然源是存在的（如果你在 gdb 中“列出”，它会显示源文件的列表 - 至少当我按照你的步骤操作时，它确实如此），但调试器需要文件中的行号信息才能知道什么行对应什么地址。它不能用给出的信息做到这一点。

据我所知，没有办法让 NASM 发出例如使用`as`时使用的 .loc 指令。`gcc`但是`as`无法在不产生大量错误的情况下获取您的源文件[即使使用 -msyntax=intel -mmnemonic=intel - 你会认为这应该有效]。

因此，除非更聪明的人能想出一种方法来生成提供调试器行号信息的 .loc 条目，否则我不完全确定我们如何以您满意的方式回答您的问题。

# javascript - Backbone：在添加到集合之前从服务器获取新模型

> ID：14027654
> 
> 赞同：0
> 
> 时间：2012-12-25T04:22:55.803
> 
> 标签：javascript, backbone.js

目前，当我制作模型时，它会直接进入集合并保存到服务器，但是服务器会添加其他信息模型，这些信息模型在刷新页面之前是看不到的。我正在尝试将新模型从服务器添加到集合中，而不是从制作模型的表单中添加。

这是我的添加方法

```
add:function(tenant){
    var values = _.extend(this.$el.find(':input').serializeJSON(), {active: true , modelType:"tenant"}) 

    console.log(values)
    var newView = tenants.create(values, {// FIX REPONCE 
        success:function(model,response){
            console.log(response);
            console.log(model.isNew());
        },
        error:function(model,response){
            console.log(response.responseText);
        }
    },{wait: true},{silent: true})
} 
```

当它到达 model.IsNew() 时，它返回 true，这意味着它还没有到达服务器。如何返回服务器模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:44:33.610

的`collection.create`第二个参数是`options`，但您分别传递了选项`{wait: true}`和`{silent: true}`作为第三个和第四个参数。这就是为什么它们不起作用。尝试这个：

```
var newView = tenants.create(values, {
    wait: true,
    silent: true,
    success:function(model,response){
        console.log(response);
        console.log(model.isNew());
    },
    error:function(model,response){
        console.log(response.responseText);
    }
}); 
```

# java - How to use an animated GIF in Eclipse RCP ImageDescriptor

> ID：14027657
> 
> 赞同：3
> 
> 时间：2012-12-25T04:23:28.383
> 
> 标签：java, eclipse, eclipse-rcp, animated-gif, eclipse-plugin

I want to use an animated GIF in an [ImageDescriptor](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/resource/ImageDescriptor.html). I'm aware eclipse has other ways of animating gifs using manual threads that read the image as an input stream. However that won't work for the ImageDescriptor API as it takes a file as input, not a stream. The reason I want to use an ImageDescriptor is because the ActionBar API only accepts ImageDescriptors for creating buttons with image icons. So in short, is there away to add an animated GIF icon/button to an Eclipse's View's Action bar?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T18:45:12.683

I don't think there is a straight forward way. You need to use timers and animate the gif yourself. Eclipse platform itself does that in few places (Eg: the browser view animation when page is loading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:26:41.057

The ImageDescriptor can accept an url as input param:

```
ImageDescriptor id = Activator.getImageDescriptor("/icons/yourGif.gif"); 
```

Hope it works :-)

# curl - 如何告诉 curl 不要覆盖

> ID：14027659
> 
> 赞同：1
> 
> 时间：2012-12-25T04:23:51.823
> 
> 标签：curl, xargs

我正在使用以下命令：

```
$ xargs -n 1 curl -o -O < ../completeresultlist.txt 
```

../completeresultlist.txt 是我要下载的文件列表所在的位置。但是，其中一些文件虽然来自某个地方的不同目录，但具有相同的名称。我想获取列表中的所有文件，那么如何避免覆盖？当它发现重复时，似乎 curl 只是覆盖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:07:08.127

不幸的是，我不相信此功能受支持，但它在[待办事项列表中](http://curl.haxx.se/docs/todo.html#prevent_file_overwriting)。另一种选择是使用[wget](http://www.gnu.org/software/wget/)，它[支持](http://www.gnu.org/software/wget/manual/wget.html#Download-Options)不覆盖文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T05:38:29.487

我认为以下脚本应该这样做：

```
while read url; do
  if [ ! -e $(basename "$url") ]
  then curl -O "$url"
  else echo "Skipping $url because file already exists" # Leave out if you want silence
  fi
done < ../completeresultlist.txt 
```

# webrtc - WebRTC - 检测相机是否停止

> ID：14027663
> 
> 赞同：2
> 
> 时间：2012-12-25T04:25:09.563
> 
> 标签：webrtc

WebRTC 问题

*   用户相机过早停止流式传输时是否存在事件？

*   WebRTC 可以连接 Peer2Peer Peer1 有一个流和多个观察者查看呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:59:08.050

我对 Chrome 24 和 26 的实验表明，当对等方断开连接时，不会触发任何 mediastream/localmediastream 或视频事件，但 (RTCPeerConnection) icecandidate 事件会在断开连接后立即触发多次：首先使用候选人，然后在没有它的情况下触发事件对象。

```
peer = new RTCPeerConnection({ "iceServers": [{ "url": "stun:stun.l.google.com:19302" }] });
peer.onicecandidate = function(e){
   if(!e.candidate) return console.log('Did someone disconnect?',e);
   console.log('Someone might have just disconnected. Or maybe not.',e);
} 
```

我也能够成功地在 chrome 中连接 3 个对等点：据我所知，每个对等点连接只连接两个对等点，因此要拥有多个同时连接，主机分别与每个连接点连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-28T19:29:56.157

这就是你想要的：

```
(await peerConnection.getStats())
  .forEach((c)=>{if(c.type =='track')console.log(c)}) 
```

这将告诉您已收到多少帧。存储它，然后稍后再询问并比较两个结果。如果帧数相同，则不会获取新数据。

# php - 如何从 PHP 中的 JSON.stringify 中删除反斜杠？

> ID：14027664
> 
> 赞同：2
> 
> 时间：2012-12-25T04:25:14.120
> 
> 标签：php, javascript, ajax, json

> **可能重复：**
> [为什么php在替换双引号时插入反斜杠](https://stackoverflow.com/questions/4017420/why-does-php-insert-backslash-while-replacing-double-quotes)

`JSON.stringify()`在使用 AJAX 发送后，如何从 a 中删除反斜杠？

我发送之前的 JSON 没有反斜杠，之后它有。PHP在字符串中遇到双引号时是否总是添加反斜杠？

的后 ajax 输出`JSON.stringify()`：

```
[
   {
      \"firstname\":\"John\",
      \"lastname\":\"Doe\"
   },
   {
       \"firstname\":\"Jane\",
       \"lastname\":\"Smith\"
   }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:42:32.677

关闭[魔术引号](http://php.net/manual/en/security.magicquotes.php)功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T04:47:55.757

尝试使用 php [stripslashes](http://php.net/strip_slashes)函数来删除它们

# ios - iPad mini 无法接收“UIKeyboardWillShowNotification”

> ID：14027669
> 
> 赞同：2
> 
> 时间：2012-12-25T04:26:48.740
> 
> 标签：ios, nsnotificationcenter, ipad-mini

`viewWillAppear:animated`我在主视图控制器中添加了以下代码。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(showKeyboard:) name:UIKeyboardWillShowNotification object:nil]; 
```

而且，我在同一个类中实现了这个方法，

```
- (void)showKeyboard:(NSNotification *)notification
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Keyboard will appear." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

主视图控制器有一个 UITextField 对象。

在 iPad2 (iOS 5.0) 中，当它获得焦点时会出现一个警报视图。然而，在 iPad mini (iOS 6.0) 中，除了软键盘外，什么都没有出现。

我想让 iPad mini 的行为与 iPad2 相同。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:49:31.053

从 iOS 3.2 开始，`UIKeyboardWillHideNotification`在`UIKeyboardWillShowNotification`两个文本字段之间切换时不再触发。基本上，只有在实际显示或隐藏键盘时才会触发通知。改为使用`UIKeyboardDidShowNotification`。

```
 if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.2) {
        [[NSNotificationCenter defaultCenter] addObserver:self 
                                                 selector:@selector(keyboardDidShow:) 
                                                     name:UIKeyboardDidShowNotification 
                                                   object:nil];     
    } else {
        [[NSNotificationCenter defaultCenter] addObserver:self 
                                                 selector:@selector(keyboardWillShow:) 
                                                     name:UIKeyboardWillShowNotification 
                                                   object:nil]; 
```

# html - 淘汰foreach绑定无序列表

> ID：14027670
> 
> 赞同：3
> 
> 时间：2012-12-25T04:26:49.307
> 
> 标签：html, knockout.js

首先，圣诞快乐！

希望没有其他人在圣诞节工作，除非他们是淘汰赛专家并且真的有帮助我的冲动；-)

我正在使用出色的[jQuery 列导航插件](http://code.google.com/p/jquery-column-navigation/)以多列方式向我的用户显示数据。它在我的静态测试中运行良好，但现在将它实施到生产代码中，我遇到了一些希望不太难解决的问题。

它需要 ul 元素内的 div 以允许在列表变大时滚动。这里的问题是我用来创建列的 foreach 将每个子元素包装在 div 中，而不是整个子集合。

例如：

我应该生成看起来像这样的 HTML

```
<div id="myTree">
<ul>
    <div>   <!-- required to allow scrolling within each column -->
        <li>
            <a>Homepage</a>
            <ul>
                <div>
                    <li><a>Contact</a></li>
                    <li><a>Terms &amp; Conditions</a></li>
                    <li><a>Privacy information</a></li>
                </div>
            </ul>
        </li>
        <li>
            <a>Contents</a>
            <ul>
                <div>
                    <li><a>Page 1</a></li>
                    <li>
                        <a>Page 2</a>
                        <ul>
                            <div>
                            <li><a href="./page2.1/">Page 2.1</a></li>
                            <li><a href="./page2.2/">Page 2.2</a></li>
                            </div>
                        </ul>
                    </li>
                    <li><a>Page 3</a></li>
                </div>
            </ul>
        </li>
    </div>
</ul> 
```

但是使用这个淘汰码

```
<div id="whatever" style="width: 100%">
<ul data-bind="foreach: { data: Column1 }">
    <div>
        <li><a data-bind="text: Name"></a>
            <ul data-bind="foreach: { data: Column2 }">
                <div>
                    <li><a data-bind="text: Name"></a>
                        <ul data-bind="foreach: { data: Column3 }">
                            <div>
                                <li><a data-bind="text: Name, attr: { 'href': Url }"></a></li>
                            </div>
                        </ul>
                    </li>
                </div>
            </ul>
        </li>
    </div>
</ul> 
```

我最终得到的 HTML 看起来像

```
<div id="myTree">
<ul>
    <div>   <!-- required to allow scrolling within each column -->
        <li>
            <a>Homepage</a>
            <ul>
                <div>
                    <li><a>Contact</a></li>
                </div>
                <div>
                    <li><a>Terms &amp; Conditions</a></li>
                </div>
                <div>
                    <li><a>Privacy information</a></li>
                </div>
            </ul>
        </li>
        <li>
            <a>Contents</a>
            <ul>
                <div>
                    <div>
                        <li><a>Page 1</a></li>
                    </div>
                    <li>
                        <a>Page 2</a>
                        <ul>
                            <div>
                                <li><a href="./page2.1/">Page 2.1</a></li>
                            </div>
                            <div>
                                <li><a href="./page2.2/">Page 2.2</a></li>
                            </div>
                        </ul>
                    </li>
                    <li><a>Page 3</a></li>
                </div>
            </ul>
        </li>
    </div>
</ul> 
```

如何让内部 DIV 包装所有子级而不是父级内的单个子记录？

非常感谢您的帮助，并再次祝您圣诞快乐。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T07:23:35.917

第一条评论是正确的...您只需执行此操作即可生成所需的 HTML 输出：

```
 <ul>
     <div data-bind="foreach: { data: Column3 }">
         <li><a data-bind="text: Name, attr: { 'href': Url }"></a></li>
     </div>
 </ul> 
```

虽然`div`直接在 a`ul`中并不是完全有效的 HTML，但我不知道你为什么要这样做。

另一种方法是使用虚拟元素：

```
 <ul>
     <div>
         <!-- ko foreach: { data: Column3 } -->
             <li><a data-bind="text: Name, attr: { 'href': Url }"></a></li>
         <!-- /ko -->
     </div>
 </ul> 
```

正如您在评论中提到的那样，如果不修改“脚本”，就没有（好的）方法可以获得所需的输出。

# ios - UICollectionView : 可见单元格计数

> ID：14027671
> 
> 赞同：4
> 
> 时间：2012-12-25T04:26:55.490
> 
> 标签：ios, ios6, uicollectionview

当我打印出 UICollectionView 中的可见单元格计数和数组计数时，它减少了一个。可见细胞计数较低。有任何想法吗？

```
 NSLog(@"visibleCellscount %d",self.collectionView.visibleCells.count);   (visibleCellscount 2)
 NSLog(@"birdscount %d",self.birds.count);   (birdscount 3) 
```

# sql - PyQt - 直接使用 SQL 与 QSqlTableModel

> ID：14027676
> 
> 赞同：2
> 
> 时间：2012-12-25T04:28:21.013
> 
> 标签：sql, database, qt, pyqt

我正在编写一个简单的学生分数管理器，用于在 PyQt 上练习编程（我不想再使用糟糕的*Visual Basic*）。但是我在选择数据模型时遇到了一个大问题。

我`QSqlTableModel`首先发现，它是一个很好的自动更新模型。麻烦的是，我需要使用大量的 SQL ( `JOIN`, `WHERE`) 从数据库中选择数据。`QSqlTableModel`有`select()`而且`filter()`只有。

然后我找到`QSqlQueryModel`了，但它是只读的。所以我重写了它的 `setData()`方法。所以它现在是读写的。不幸的是，`QSqlQueryModel`可用的功能比`QSqlTableModel`.

如您所见，如果我可以将 SQL 与 结合使用`QSqlTableModel`，我就可以解决所有问题。

所以...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:19:45.617

`QSqlTableModel`有该`setQuery`方法，您可以使用它来设置自定义查询，例如：

```
model = QSqlTableModel()
query = QSqlQuery(your_query)
model.setQuery(query) 
```

但是，[Qt 文档](http://doc.qt.digia.com/4.7-snapshot/qsqltablemodel.html#setQuery)指出：

> 这个函数简单地调用 QSqlQueryModel::setQuery(query)。通常不应在 QSqlTableModel 上调用它。相反，使用 setTable()、setSort()、setFilter() 等来设置查询。

# android - 地理位置到国家级

> ID：14027679
> 
> 赞同：1
> 
> 时间：2012-12-25T04:29:18.630
> 
> 标签：android

我希望能够确定一个人在哪个国家（在 Android 上，不使用 GPS），所以我想使用一个 Web API，我可以调用它，它将根据请求 IP 返回国家。但是我找不到任何可以执行此操作的 Web API，是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:37:07.290

您可以使用 Google place API 查看[此处](https://developers.google.com/places/documentation/details)只需传递参数，您将在 json/xml 中获得响应

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T04:33:38.447

你需要一个数据库来做到这一点，而代理服务器只会挫败你的意图

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T04:49:39.550

使用单元 ID

[OpenCellID API](http://www.opencellid.org/api)

基于 IP 的位置

[在android中获取wifi ip的位置](https://stackoverflow.com/questions/4453328/get-location-of-wifi-ip-in-android)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T11:16:38.503

我最终使用了[http://www.ipinfodb.com/ip_location_api.php](http://www.ipinfodb.com/ip_location_api.php)，它满足了我在问题中指定的所有需求。

# php - PHP正则表达式格式化链接

> ID：14027688
> 
> 赞同：0
> 
> 时间：2012-12-25T04:30:57.760
> 
> 标签：php, regex, url, hyperlink

> **可能重复：**
> [将 url 从字符串转换为链接，除非它们位于 html 标记的属性中](https://stackoverflow.com/questions/12538358/convert-url-to-links-from-string-except-if-they-are-in-a-attribute-of-a-html-tag)

我正在寻找有关 PHP 正则表达式的帮助。

我正在为仅限邀请的博客创建一个输入页面，所以我不需要担心垃圾邮件发送者。我想让人们添加 URL 变得简单，但我也想让他们能够使用 HTML 标记，如果这让他们高兴的话。

在下面的示例中，$text 变量包含三个链接。我想`<a > ... </a>`围绕前两个创建标签，但第三个已经有这些标签，所以我想不管它。我的正则表达式适用于最后两种情况，但不是第一种。

我的正则表达式开头`[^<a href *?= *?\'\"]`我想说“如果字符串以`<a href='>`（或类似）开头，则不要创建匹配项，但这不是它在实践中的工作方式。在这里，`^`行为作为“行首”字符而不是作为否定者。

我希望输出看起来像这样：

```
Visit <a ...>http://www.example.com/</a> for more info.

<a ...>http://www.example.com/index.php?q=regex</a>

Here is a <i><a ...>link</a> to visit</i>. 
```

提前感谢您对重写正则表达式的任何帮助。

詹姆士

```
<?php
$text = "Visit http://www.example.com/ for more info.

http://www.example.com/index.php?q=regex

Here is a <i><a href='http://www.google.ca/search?q=%22php+regex%22&hl=en'>link</a> to visit</i>.";

// Ignore fully qualified links but detect bare URLs...
$pattern = '/[^<a href *?= *?\'\"](ftp|https?):\/\/[\da-z\.-]+\.[a-z\.]{2,6}[\/\.\?\w\d&%=+-]*\/?/i';

// ... and replace them with links to themselves
$replacement = "<a href='$0'>$0</a>";

$output = preg_replace($pattern, $replacement, $text);

// Change line breaks to <p>...</p>...
$output = str_replace("\n", "", $output);
$output = "<p>".str_replace("\r", "</p><p>", $output)."</p>";

// Allow blank lines
$output = str_replace("<p></p>", "<p>&nbsp;</p>", $output);

// Split the paragraphs logically in the HTML
$output = str_replace("</p><p>", "</p>\r<p>", $output);

echo $output;
?> 
```

# c++ - 没有mpi指令的程序在mpirun中非常慢

> ID：14027691
> 
> 赞同：2
> 
> 时间：2012-12-25T04:31:27.360
> 
> 标签：c++, g++, mpi, sunos

我现在正在编写一个学习 MPI 的程序。好的，我会编写一个将方阵相乘的程序。

```
long **multiplyMatrices(long **matrix1, long **matrix2, long capacity)
{
    long **resultMatrix = new long*[capacity];

    for (long i = 0; i < capacity; ++i) {
        resultMatrix[i] = new long[capacity];
    }

    for (long i = 0, j, k; i < capacity; ++i) {
        for (j = 0; j < capacity; ++j) {
            resultMatrix[i][j] = 0;

            for (k = 0; k < capacity; ++k) {
                resultMatrix[i][j] = resultMatrix[i][j] + matrix1[i][k] * matrix2[k][j];
            }
        }
    }

    return resultMatrix;
} 
```

哪里`capacity == 1000`。

好的，在 localhost（Mac Mini 2012、Core i7、OS X 10.8.2）上，我使用 LLVM 在 XCode 中编译此代码。计算需要 17 秒。是的，在一个线程中。

在远程主机（Sun OS 5.11，双核 CPU，8 个 vCPU）上我编译它

```
g++ -I/usr/openmpi/ompi-1.5/include -I/usr/openmpi/ompi-1.5/include/openmpi -O2 main.cpp -R/opt/mx/lib -R/usr/openmpi/ompi-1.5/lib -L/usr/openmpi/ompi-1.5/lib -lmpi -lopen-rte -lopen-pal -lnsl -lrt -lm -ldl -lsocket -o main 
```

要不就

```
g++ -O2 main.cpp -o main 
```

但是...`mpirun main`需要 152 秒来计算这个... 怎么了？我错过了什么吗？那是关于服务器的CPU架构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:03:36.220

主要答案是内存管理。

看看那些线条

```
long **resultMatrix = new long*[capacity];

for (long i = 0; i < capacity; ++i) {
    resultMatrix[i] = new long[capacity];
} 
```

所有行都位于内存的不同位置，而不是整个块。我们知道物理内存在 Mac Mini 上是如何呈现的——两块塑料，但在服务器上它甚至可能是不同的主机（集群）。

现在我们将尝试解决这个问题。

```
long **allocateMatrix(long capacity)
{
    // Allocating a vector of pointers to rows
    long **matrix = (long **)malloc(capacity * sizeof(long *));

    // Allocating a matrix as a whole block
    matrix[0] = (long *)malloc(capacity * capacity * sizeof(long));

    // Initializing a vector of pointers with rows of addresses
    long *lineAddress = matrix[0];
    for(long i = 0; i < capacity; ++i) {
        matrix[i] = lineAddress;
        lineAddress += capacity;
    }

    return matrix;
}

void deallocateMatrix(long **matrix, long capacity)
{
    free(matrix[0]);
    free(matrix);
} 
```

这将在 Mac Mini 上运行的代码提高到 9.8 秒，在服务器上运行到 58 秒。

但我仍然不知道其他时间泄漏在哪里。也许我应该以某种方式优化循环矩阵之一。

# c++ - 进入系统，在 Linux 中使用 Eclipse 实现 CRTL 功能

> ID：14027693
> 
> 赞同：-1
> 
> 时间：2012-12-25T04:31:44.177
> 
> 标签：c++, linux, eclipse

我是 Visual C++ 的专家，但 Linux 开发对我来说是新的。在 Visual Studio 中，很容易追踪到由 C 运行时库实现的任何代码。我只需要确保源代码已安装并且我可以直接进入任何我想要的函数——malloc()、cout::operator<<() 等等。

我正在尝试使用 Eclipse 的 C++ 包进行开发。我怎样才能在那里进入 C 运行时例程？由于 Linux 是开源的，我该如何进入操作系统例程？似乎应该是可能的——我是否缺少调试信息、源代码或两者兼而有之？我的配置中有什么？

我目前正在使用 Ubuntu 12.10。我正在使用 g++。我相信我使用的是 Eclipse 构建系统，因为我从未导入过 makefile 项目；我刚刚从 Eclipse 中的 C++ 项目向导中的一个简单的“Hello World”项目开始。

**在破解了这一点之后：**

我已经安装了 libstdc++6-4.2-dbg 包，认为它是 libstdc 库的调试符号：

```
sudo apt-get install libstdc++6-4.2-dbg 
```

我还安装了 dpkg-dev，因为下一步说我需要它：

```
sudo apt-get install dpkg-dev 
```

我尝试将 libc6 源安装到我家下的目录中：

```
apt-get source libc6 
```

此时，尝试进入 printf() 告诉我 printf.c 丢失了。我无法进入 malloc 或 strlen，这表明我不了解 C 运行时库是如何在 Linux 中分解的。libc、glib 和 libstdc++ 有何不同？我需要哪些包？

如果我让 Eclipse 打开我确实拥有的 printf.c 文件（位于 ~/eglibc-2.15/stdio-common/printf.c），它不会打开文件（不会调整调试窗口以显示源代码) 并重新绘制显示有关无法找到文件的错误消息的窗口。（在“printf.c”中找不到源文件找到该文件或编辑源查找路径以包含其位置。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:54:27.607

虽然，作为 Linux 上的内核开发人员，我确实同意单独使用各个工具将是学习的好东西，因此 Basile 的答案是 usefuel。

但是，使用 Eclipse 应该同样可以进入 C 运行时库。但是仅仅因为操作系统是开源的，并不意味着它支持你在里面随意攀爬——事实上，你不能从用户模式代码进入操作系统本身。您需要 KGDB（google it），并且您肯定需要第二台计算机连接到正在调试的计算机，因为当您进入内核时，您基本上会锁定机器，至少在您正在步进的上下文中，但很可能还会阻止其他工作完成，直到您从内核中退出，例如，如果您进入`open()`，在某些时候，整个文件系统很可能会完全停止工作，直到您退出所持有的任何锁为止。这肯定会扰乱一些软件。请注意，这只是调试内核时事情​​可能会意外工作的一个示例，而不是严格地说“我已经完成了这个并且它发生了” - 我已经使用调试器调试过几次内核，你必须小心你的做，你当然不能在同一台机器上运行调试器，因为机器在你调试时会停止。

回到用户模式，你可以通过 Eclipse 进行调试，基本上你需要做的就是安装你感兴趣的运行时库的源代码，然后去......与在 Windows 上使用 Visual Studio 的原理相同 - 除了几乎您曾经在 Linux 系统上运行的所有软件都可以作为源代码获得。您可能需要使用调试符号重新编译一些库，就像在 Windows 中一样，您需要确保调试器知道如何查找源代码。其他一切都应该由 Eclipse 中的调试器处理。我花了大约三年的时间使用 Eclipse 进行本地和远程调试，总的来说，它可以工作。有些地方有些怪癖，但几乎所有调试器都是如此。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:40:33.223

首先，您不需要 Eclipse 在 Linux 上开发软件。您应该更好地学习使用独立工具（命令行）来做到这一点，例如`emacs`or `gedit`（作为编辑器）、`git`（版本控制）、`make`（builder），它们运行`gcc`or`g++`编译器（两者`gcc`&`g++`都是 GCC，Gnu Compiler Collection 的一部分）。

^(真的，通过不依赖 Eclipse，您将学到更多；它可能只是隐藏了你正在做这项工作的真正命令，你应该了解它们的真正含义。)

您想将`-g -Wall` [选项](http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html)传递给 GCC。该`-g`选项要求提供调试信息，并且`-Wall`选项要求提供几乎所有警告。改进您的代码，直到没有给出警告。

并且操作系统正在提供[系统调用](http://en.wikipedia.org/wiki/Syscall)（这是内核向应用程序提供的操作；从应用程序的角度来看，系统调用是原子的，因此您无法进入它；但是`strace`可能会向您显示某些执行完成的所有系统调用）。如果您想逐步进入系统库，例如`libc`您需要它的调试变体（例如某些`libc6-dbg`包）。但是通常不需要深入系统库。

请参阅[http://advancedlinuxprogramming.com/](http://advancedlinuxprogramming.com/)

然后，您将使用`gdb`该二进制程序进行调试。

因此，终端内的分步说明：

*   [使用emacs](http://www.gnu.org/software/emacs/)或[gedit](http://projects.gnome.org/gedit/)编辑源文件

*   学习如何使用[GCC](http://gcc.gnu.org/)：对于单一源 C++ 程序，编译它`g++ -Wall -g source.cc -o progbin`并`./progbin`在终端中输入以运行它。只有当程序经过调试并且令人满意时，您才会使用优化对其进行编译（通过将`-O`or`-O2`标志赋予`gcc`or `g++`）

*   使用[gdb](http://www.gnu.org/software/gdb/)调试程序（用 编译`-g`）。

*   对于多文件 C++ 程序，考虑学习如何使用[make](http://www.gnu.org/software/make/)

*   使用[git 之类的版本控制系统](http://git-scm.com/)

对于初学者，我建议避免使用 Eclipse，因为它只是隐藏了下面真正发生的事情（Eclipse 只是运行其他工具，如上述命令）

Linux 下的软件开发需要与 Windows 下不同的思维方式：您实际上是在使用自己的独立工具的松散组合，因此最好分别学习一下。

注意。要进入“系统”功能，例如`malloc`（在系统调用之上），您需要包`mmap`的调试变体，并且您需要设置为等...`libc``aptitude install libc6-dbg``LD_LIBRARY_PATH``/usr/lib/debug`

# c - 理解scanf语法

> ID：14027701
> 
> 赞同：0
> 
> 时间：2012-12-25T04:32:30.887
> 
> 标签：c, scanf

我有以下我无法理解的 scanf 代码::

```
char board[3][3];
int i;
for(i=0;i<3;i++) 
scanf("%s[^\n]%*c", board[i]); 
```

请帮助我逐字理解 scanf 语法中字母的含义。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:38:50.397

读取一系列非空白字符，然后`"[^"`是换行符，`"]"`然后是另一个未存储在任何地方的字符。我认为这不是真正需要的。您可以阅读 scanf 手册页（google it）以获取正确的语法。

解释：

`%s`- 捕获一系列非空白字符

`%[`- 捕获由集合确定的字符序列（以']'结尾）

这就是为什么`%s[^\n]`我觉得不对。应该`%[^\n]`改为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:17:10.673

AFAIK，

它的作用是 3 次（在 for 循环内），读取一行（使用 %s）直到遇到换行符（使用 [^\n]）并丢弃最后一个（换行符）字符（使用 %*c） .

```
%*c 
```

在这里，“*”将告诉 scanf 不存储“c”捕获的值。即换行符。

# java - 如何在Android / Java中找到两次之间的差异？

> ID：14027705
> 
> 赞同：-1
> 
> 时间：2012-12-25T04:33:19.100
> 
> 标签：java, android, datetime, timertask, date-difference

> **可能的重复：**
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

我在 HH:MM:SS 格式的字符串数据类型的两个文本框中有两个日期值。我怎样才能找到它们之间的差异并得到 HH:MM:SS 的结果？请帮助我......尽快...... ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:56:22.970

尝试这个：

```
 SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss");
     format.setTimeZone(TimeZone.getTimeZone("UTC"));
     try {
         Date date1 = (Date) format.parse("4:15:20");
         Date date2 = (Date) format.parse("2:30:30");
         //time difference in milliseconds
         long timeDiff = date1.getTime() - date2.getTime(); 
         //new date object with time difference
         Date diffDate = new Date(timeDiff); 
         //formatted date string
         String timeDiffString = format.format(diffDate); 
         System.out.println("Time Diff = "+ timeDiffString );
     } catch (ParseException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
     } 
```

以上代码有一定的局限性。其他正确的方法可能是在字符串中手动转换长时差值，如下所示：

```
 long timeDiffSecs = timeDiff/1000;
     String timeDiffString = timeDiffSecs/3600+":"+
                             (timeDiffSecs%3600)/60+":"+
                             (timeDiffSecs%3600)%60;
     System.out.println("Time Diff = "+ timeDiffString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:37:20.037

您拥有的代码将为您提供所列日期之间的毫秒数差异。答案可能是简单地除以 1000 以获得秒数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:11:27.210

首先将字符串日期转换为简单的日期格式

```
public String getconvertdate1(String date)
{
    DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    inputFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
    DateFormat outputFormat = new SimpleDateFormat("dd MMM yyyy");
    Date parsed = new Date();
    try
    {
        parsed = inputFormat.parse(date);
    }
    catch (ParseException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String outputText = outputFormat.format(parsed);
    return outputText;
} 
```

> //现在可以对日期做任何事情。

```
 long diff = today.getTimeInMillis() - thatDay.getTimeInMillis(); //result in millis
 long days = diff / (24 * 60 * 60 * 1000);// you get day difference between 
```

> 并使用 simpledateFormate 配置 HH:MM:SS

# javascript - NODE.JS 的捆绑模块

> ID：14027710
> 
> 赞同：11
> 
> 时间：2012-12-25T04:34:21.597
> 
> 标签：javascript, node.js, bundle

ASP.NET MVC 4 带来了惊人的工具，可以将多个样式表或 javascript 捆绑为一个，如下所示：

```
bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                    "~/Content/themes/base/jquery.ui.core.css",
                    "~/Content/themes/base/jquery.ui.datepicker.css",
                    "~/Content/themes/base/jquery.ui.theme.css")); 
```

*NODE.JS*是否有任何模块来完成相同的任务 - 将**客户端**JavaScript 库捆绑为一个？我见过 browserify、uglifier 等工具，但这些工具需要手动调用控制台命令（或者我可能错过了什么？）。同时，最好消除多余的步骤并拥有可以轻松集成到*express.js*应用程序中的中间件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:20:44.267

有几种尝试来实现这一点，您可以尝试一下，看看哪个最适合您：[bundle-up](https://github.com/Cowboy-coder/bundle-up)、[brewer.js](https://github.com/matehat/brewer.js)、[connect-assetmanager](https://github.com/mape/connect-assetmanager)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:17:10.540

更不用说将手写笔文件自动复杂化为单个 css 文件，也可用作快速中间件。

在 npm 中搜索“资产”，我相信你可以找到很多这样的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-26T16:34:50.673

您也可以尝试[bl-bundler](https://www.npmjs.com/package/bl-bundler)。它还支持与 express.js 的集成

# android - gainStyleAttributes() 忽略了我试图检索的某些属性

> ID：14027715
> 
> 赞同：1
> 
> 时间：2012-12-25T04:34:59.257
> 
> 标签：android, attributes, android-theme, android-styles

我正在尝试使用obtainStyleAttributes() 检索一组样式属性，但我只检索了前几个项目，而其他所有项目都被默认了。我确认我的样式包含这些属性的非默认值。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:34:59.257

我在这个问题上浪费了 3 个小时，所以我希望这能节省一些时间。

public TypedArray gainStyledAttributes (AttributeSet set, int[] attrs, int defStyleAttr, int defStyleRes) 第二个参数 attrs 必须包含严格递增的数字顺序的属性标识符，否则属性值将无法解析，调用将静默失败，因为如果该属性不存在。

这不是我可以看到的记录，我花了很长时间才弄清楚出了什么问题。

因此，假设我有 2 个属性， ID = 1 的 ATTR1 和 ID = 2 的 ATTR2 （在现实生活中，这些数字要大得多，并且由资源编译器分配）。

如果我想在一次调用中检索两个属性的值，我必须编写：

int[] 属性 = { ATTR1, ATTR2 };

如果相反，我将交换它们，则只会检索 ATTR2，而 ATTR1 将是默认值。

# sqlyog - 为什么输出错误，我不明白

> ID：14027717
> 
> 赞同：0
> 
> 时间：2012-12-25T04:35:10.100
> 
> 标签：sqlyog

```
create table qbey (
idqbey int primary key auto_increment,
bey int,
users int,
foreign key (users) references persons(idusers) on delete cascade on update cascade,
foreign key (bey) references bey(idbey) on delete cascade on update cascade,
); 
```

**程序错误：**

> 错误代码：1005 无法创建表 '.\soft_tj\qbey.frm' (errno:150)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:40:15.367

文档解释了这个错误，虽然不太容易找到：[http ://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

# javascript - Javascript 选项处理

> ID：14027719
> 
> 赞同：1
> 
> 时间：2012-12-25T04:35:47.047
> 
> 标签：javascript

在 JavaScript 中编写选项处理的更好/更短的方法是什么。而不是以下模式？

```
 if(typeof p_options.default_imageset !== "undefined") {
        default_imageset = p_options.default_imageset;
    } else {
        default_imageset = 'mm';
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T04:37:41.660

你可以使用这样的东西：

```
var default_imageset = p_options.default_imageset || 'mm'; 
```

如果`p_options.default_imageset`为真（不是`0`、`null`、`false`、`''`等），则运算符短路。

虽然通常我会反过来做：

```
var value = supplied_value || default_value; 
```

# algorithm - 是否总是可以使用树旋转将一个 BST 变成另一个？

> ID：14027726
> 
> 赞同：8
> 
> 时间：2012-12-25T04:37:17.997
> 
> 标签：algorithm, data-structures, binary-search-tree, tree-rotation

给定一组值，可以从这些值形成许多不同的可能的二叉搜索树。例如，对于值 1、2 和 3，我们可以根据这些值生成五个 BST：

```
1      1      2      3      3
 \      \    / \    /      /
  2      3  1   3  1      2
   \    /           \    /
    3  2             2  1 
```

许多基于平衡二叉搜索树的数据结构使用**[树旋转](http://en.wikipedia.org/wiki/Tree_rotation)**作为重塑 BST 的原语，而不会破坏所需的二叉搜索树不变量。树旋转可用于将节点拉到其父节点上方，如下所示：

```
 rotate
         u      right           v
        / \     ----->         / \
       v   C                  A   u
      / \       <-----           / \
     A   B      rotate          B   C
                 left 
```

给定一个包含一组值的 BST，是否总是可以将该 BST 转换为同一组值的任意其他 BST？例如，我们是否可以仅通过使用树旋转将上述五个 BST 中的任何一个转换为任何其他 BST？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-25T04:37:17.997

您的问题的答案取决于您是否被允许在 BST 中具有可能看起来彼此不同的相等值。例如，如果您的 BST 存储键/值对，则并不总是可以将这些键/值对的一个 BST 转换为相同键/值对的不同 BST。

这样做的原因是，无论执行多少树旋转，BST 中节点的中序遍历保持不变。因此，如果节点的中序遍历结果不同，就不可能从一个 BST 转换到另一个 BST。作为一个非常简单的例子，假设您有一个 BST 持有数字 1 的两个副本，每个副本都用不同的值（例如 A 或 B）进行注释。在这种情况下，没有办法使用树旋转将这两棵树变成另一棵树：

```
 1:a            1:b
         \             \
         1:b           1:a 
```

您可以通过暴力破解（非常小！）您可以通过旋转制作的一组可能的树来检查这一点。然而，注意到第一棵树的中序遍历给出 1:a, 1:b 并且第二棵树的中序遍历给出 1:b, 1:a 就足够了。因此，没有任何旋转次数足以在树之间进行转换。

另一方面，如果所有值都不同，则始终可以通过应用正确数量的树旋转在两个 BST 之间进行转换。我将使用关于节点数的归纳论证来证明这一点。

作为一个简单的基本情况，如果树中没有节点，则只有一个可能的 BST 持有这些节点：空树。因此，始终可以在其中包含零节点的两棵树之间进行转换，因为开始树和结束树必须始终相同。

对于归纳步​​骤，我们假设对于任何两个具有相同值的 0、1、2、...、n 个节点的 BST，始终可以使用旋转将一个 BST 转换为另一个。我们将证明给定由相同 n + 1 个值组成的任意两个 BST，总是可以将第一棵树转换为第二棵树。

为此，我们将从进行关键观察开始。给定 BST 中的任何节点，总是可以应用树旋转来将该节点拉到树的根部。为此，我们可以应用以下算法：

```
while (target node is not the root) {
    if (node is a left child) {
        apply a right rotation to the node and its parent;
    } else {
        apply a left rotation to the node and its parent;
    }
} 
```

这样做的原因是每次节点与其父节点一起旋转时，它的高度都会增加一。结果，在对上述形式进行了足够多的旋转之后，我们可以将根移到树的顶部。

现在，这为我们提供了一个非常简单的递归算法，我们可以使用旋转将任何一个 BST 重塑为另一个 BST。思路如下。首先，查看第二棵树的根节点。在第一棵树中找到那个节点（这很容易，因为它是一个 BST！），然后使用上面的算法将它拉到树的根部。至此，我们已经将第一棵树变成了具有以下属性的树：

1.  第一棵树的根节点是第二棵树的根节点。
2.  第一棵树的右子树包含与第二棵树的右子树相同的节点，但可能具有不同的形状。
3.  第一棵树的左子树包含与第二棵树的左子树相同的节点，但可能具有不同的形状。

因此，我们可以递归地应用相同的算法来使左子树与第二棵树的左子树具有相同的形状，并使右子树与第二棵树的右子树具有相同的形状。由于这些左子树和右子树每个必须严格不超过 n 个节点，根据我们的归纳假设，我们知道这样做总是可能的，因此算法将按预期工作。

总而言之，该算法的工作原理如下：

1.  如果两棵树是空的，我们就完成了。
2.  在第一棵树中找到第二棵树的根节点。
3.  应用旋转将该节点带到根。
4.  递归地重塑第一棵树的左子树，使其具有与第二棵树的左子树相同的形状。
5.  递归地重塑第一棵树的右子树，使其具有与第二棵树的右子树相同的形状。

要分析该算法的运行时间，请注意应用步骤 1 - 3 最多需要 O(h) 步骤，其中 h 是第一棵树的高度。每个节点将恰好被带到某个子树的根节点一次，所以我们总共做了 O(n) 次。由于 n 节点树的高度永远不会大于 O(n)，这意味着该算法最多需要 O(n ² ) 时间来完成。它可能会做得更好（例如，如果两棵树已经具有相同的形状，那么它会在 O(n) 时间内运行），但这给出了一个很好的最坏情况界限。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-30T23:00:15.793

对于二叉搜索树，这实际上可以在*O(n)*中完成。

任何树都可以“拉直”，即放入所有节点要么是根节点要么是左子节点的形式。

这种形式是独一无二的（从根向下读取给出了元素的顺序）

一棵树被拉直如下：

*   对于任何右孩子，围绕自身执行左旋转。这会将右孩子的数量减少*1 ，因此树在**O(n)*旋转中被拉直。

*如果 A 可以在O(n)*次旋转中拉直为 S，B 可以在*O* (n) 次旋转中拉直为 S ，那么由于旋转是可逆的，因此可以在*O(n)*次旋转中将 A -> S -> B旋转。

# android - Android：重定向 pls 文件以便媒体播放器可以读取它

> ID：14027728
> 
> 赞同：0
> 
> 时间：2012-12-25T04:37:18.993
> 
> 标签：android, shoutcast, internet-radio

我想播放广播广播，但通过查看链接，它是一种 pls 文件格式：http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361 [目前](http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361)无法播放，

我有：

初始化：

```
 player = new MediaPlayer();

        try {
            player.setDataSource("http://yp.shoutcast.com/sbin/tunein-station.pls?id=13361");
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

按下播放按钮时：

```
player.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {

        player.start();

        }
    }); 
```

我已经用另一个以 www.example.com:8080 之类的端口结尾的广播链接测试了代码，它工作得很好，但是当链接更改为 pls?id= 它不读取链接，因此我听不到收音机...有人请帮我解决这个问题：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T02:55:05.617

`.pls`文件只是一个播放列表。那里没有媒体。您将自己解析文件以获取实际的流 URL。在文本编辑器中打开它，看看我的意思。

# javascript - js如何从白变蓝？

> ID：14027730
> 
> 赞同：1
> 
> 时间：2012-12-25T04:37:37.227
> 
> 标签：javascript, jquery, html, css

我正在尝试制作一个菜单，当您将鼠标悬停在其他菜单项时，会从白色变为蓝色。我正在考虑使用不透明度，但没有运气，你有什么建议？

[我正在使用此代码](http://jsfiddle.net/mdamC/222/)

HTML

```
 <nav>
        <ul class="showcase">
        <li><a href="#" class="current">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
           <li><a href="#">5</a></li>

        </ul>
        </nav>​ 
```

CSS

```
nav ul li a{
    font-size: 20px;
    font-family:Arial, Helvetica, sans-serif;
    color: black;
    text-transform:capitalize;
    font-weight:normal;
    display:block;    /* IE6, IE7 line height fix */
    padding:15px;
    background-color:transparent;
    margin-top:0px;
    margin-right:6px;
    text-decoration:none;    
}
nav ul li a:hover{
    background-color: #43AEF2;
    padding:15px;
    color:white;
    -moz-border-radius: 8px;
    border-radius: 8px;
}

nav ul li a.current{
    background-color:#43aef2 ;
    padding:15px;
    color:white;
    -moz-border-radius: 8px;
    border-radius: 8px;
} 
```

​ JS

```
$("li").css('opacity', '1')
$(".selected").css('opacity', '.9')

$('ul.showcase').hover(

function() {
    $(this).find('li').stop().fadeTo(500, 1);
}, function() {
    $(this).find('li').stop().fadeTo(500, .8);
})​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:49:45.133

不能 100% 确定您的例外结果，但请尝试一下：

```
$("li").css('opacity', '0.40');
$(".selected").css('opacity', '1');

$('ul.showcase > li').hover(function () {
    $(this).stop().fadeTo(500, 1);
}, function () {
    $(this).not('.selected').stop().fadeTo(500, 0.40);
})​;​ 
```

试试这个小提琴：http: [//jsfiddle.net/fewds/mdamC/228/](http://jsfiddle.net/fewds/mdamC/228/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:01:28.350

由于您使用的是 css3，因此您可以考虑对悬停使用过渡效果，例如：

```
nav ul li a:hover{
    -webkit-transition: background-color linear 1s;
    -moz-transition: background-color linear 1s;
    -ms-transition: background-color linear 1s;
    transition: background-color linear 1s;
    background-color: #43AEF2;
    padding:15px;
    color:white;
    -moz-border-radius: 8px;
    border-radius: 8px;
} 
```

点击链接后：

```
$('ul li a').on('click',function(){
    $(this).parents('ul').find('li a').removeClass('current');
    $(this).addClass('current');
}); 
```

[**JSFiddle**](http://jsfiddle.net/KooiInc/fkPrW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T04:44:56.347

我会接受@elclanrs 的建议，但在你的代码中想知道为什么你选择整个 ul 而不是为每个 li 元素

```
$('ul.showcase li').hover(
  function() {
    $(this).fadeTo(500, 1);
}, function() {
    $(this).fadeTo(500, .8);
})​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T04:49:05.200

相反，“悬停”我更喜欢“mouseenter”和“mouseleave” [http://jsfiddle.net/mdamC/226/](http://jsfiddle.net/mdamC/226/)

```
 $('ul.showcase li').mouseenter(function() {
        $(this).stop().fadeTo(1,1);
    })
    $('ul.showcase li').mouseleave(function() {
        $(this).stop().fadeTo(1,0.4);
    }) 
```

# javascript - Extjs - 工具栏显示不正确

> ID：14027738
> 
> 赞同：1
> 
> 时间：2012-12-25T04:39:10.667
> 
> 标签：javascript, extjs, toolbar

我有一个带有底部工具栏的面板。当我打开我的页面时，有时这个工具栏会被隐藏，如下所示：

![在此处输入图像描述](../Images/2235fcbfab3320eaa44e3d64d4d88e76.png)

当我刷新它看起来没问题！

```
{
                    xtype: 'panel',
                    region: 'center',
                    split: true,
                    frame: false,
                    id: 'Panel_1',                  
                    animCollapse: false,
                    frameHeader: false,
                    dockedItems: [
                        {
                            xtype: 'toolbar',       
                            dock: 'bottom',
                            frame: false,
                            id: 'BottomTB',
                            items: [ 
```

不知道出了什么问题

# css - 关于背面可见性

> ID：14027741
> 
> 赞同：3
> 
> 时间：2012-12-25T04:41:32.547
> 
> 标签：css, mobile, mobile-safari

在为 iPad、iPhone iOS Safari 浏览器进行 Web 开发时，使用以下命令可以防止许多问题，例如动画闪烁、`position:fixed`性能问题、滚动问题等问题：

```
-webkit-backface-visibility: hidden;
-webkit-transform  : translateZ(0); 
-webkit-transform  : translate3d(0,0,0); 
```

这些 CSS 命令在 Internet 上被推荐用于修复 iPad Safari 浏览器上的错误。但是，最近，我发现每当使用其中任何一个时都会出现问题。不知道有没有人注意到了。当您在网页上捏缩放时，通常任何内容都不会重新加载或刷新，但是当进行上述任何一个 CSS 语句时，捏缩放时您会看到一些卡顿，并且事情会变白一秒钟，就像背景一样消失了，然后它以方形块的形式加载回来。

这是一个非常烦人的问题。我想放弃使用上述命令，但是使用它们和不使用它们都会产生错误。是不是没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:38:03.237

尝试添加 -webkit-transform ： translateZ(0); 到目标元素接触或越过的任何元素。

我有一个邪恶的 1+ 秒闪烁，这也让我疯狂调试，这在我的实例中有效。

# java - 将 SWT Widget 添加到 Eclipse 插件的视图中

> ID：14027743
> 
> 赞同：0
> 
> 时间：2012-12-25T04:41:43.957
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-plugin

鉴于以下操作栏，我希望能够向其添加任何其他 SWT 小部件（例如标签）。鉴于[实际的 API](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IActionBars.html)，我不明白这是怎么可能的，因为它只允许添加 IAction 对象。

![只是一个普通的，但我决定上传一张图片以更好地表达我在说什么](../Images/ad11956eab555dfd2696889704fe6470.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:48:45.697

这是不可能的（我认为这很好，否则对于来自不同来源的插件将不会有一致的外观）。

备择方案：

*   仅当视图处于活动状态时，操作栏才可见。然后视图内容区域也是可见的，您可以在其中放置您可能需要的任意数量的小部件。因此，您可以在最顶部添加该标签，类似于“搜索”视图在顶部显示当前搜索词的方式。
*   您可以修改视图本身的名称（您在上面的选项卡中看到的内容）。但是，如果它经常发生，则不建议这样做，因为它会导致该选项卡栏中的选项卡重新布局令人讨厌。
*   如果您想在该标签中显示某种状态信息，也许您可​​以使用带有复选框或单选按钮的下拉按钮来执行此操作。例如，搜索视图中的搜索历史记录或控制台视图中的活动控制台选择下拉菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T17:39:57.937

您可以`IActionBars`通过常规 API 向 中添加其他控件。下面是显示如何实现这一点的代码。我已经修改了由新的“插件项目”向导创建的标准视图示例：

```
...
public void createPartControl(Composite parent) {
    viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL);
    viewer.setContentProvider(new ViewContentProvider());
    viewer.setLabelProvider(new ViewLabelProvider());
    viewer.setSorter(new NameSorter());
    viewer.setInput(getViewSite());
    makeActions();
    hookContextMenu();
    hookDoubleClickAction();
    contributeToActionBars();
}

private void hookContextMenu() {
    MenuManager menuMgr = new MenuManager("#PopupMenu");
    menuMgr.setRemoveAllWhenShown(true);
    menuMgr.addMenuListener(new IMenuListener() {
        public void menuAboutToShow(IMenuManager manager) {
            SampleView.this.fillContextMenu(manager);
        }
    });
    Menu menu = menuMgr.createContextMenu(viewer.getControl());
    viewer.getControl().setMenu(menu);
    getSite().registerContextMenu(menuMgr, viewer);
}

private void contributeToActionBars() {
    IActionBars bars = getViewSite().getActionBars();
    fillLocalPullDown(bars.getMenuManager());
    fillLocalToolBar(bars.getToolBarManager());
}

private void fillLocalPullDown(IMenuManager manager) {
    manager.add(action1);
    manager.add(new Separator());
    manager.add(action2);
}

private void fillContextMenu(IMenuManager manager) {
    manager.add(action1);
    manager.add(action2);
    // Other plug-ins can contribute there actions here
    manager.add(new Separator(IWorkbenchActionConstants.MB_ADDITIONS));
}

private void fillLocalToolBar(IToolBarManager manager) {
    manager.add(action1);
    manager.add(action2);
    manager.add(new LabelContributionItem());
    manager.add(new ComboContributionItem());
}

private class LabelContributionItem extends ControlContribution {
    public LabelContributionItem() {
        super("someLabelId");
    }

    @Override
    protected Control createControl(Composite parent) {
        Label label = new Label(parent, SWT.NONE);
        label.setText("Hello");
        return label;
    }
}

private class ComboContributionItem extends ControlContribution {
    public ComboContributionItem() {
        super("someComboId");
    }

    @Override
    protected Control createControl(Composite parent) {
        Combo combo = new Combo(parent, SWT.NONE);
        return combo;
    }
}
... 
```

希望这可以帮助。

# actionscript-3 - 在运行时设置文本字段可编辑

> ID：14027744
> 
> 赞同：0
> 
> 时间：2012-12-25T04:41:48.503
> 
> 标签：actionscript-3, apache-flex

我有一个文本字段，按下按钮后应该可以编辑：

```
playerName = new TextField();
playerName.autoSize = "left";
playerName.styleSheet = styleSheet;
playerName.type = TextFieldType.DYNAMIC;
playerName.tabEnabled = false;
playerName.maxChars = 14;
playerName.background = false;
playerName.backgroundColor = 0x1e904b;
...
var boldStyleObject:Object = {};
boldStyleObject.fontSize = 12;
boldStyleObject.fontFamily = "Verdana";
boldStyleObject.color = "#ffffff";
boldStyleObject.fontWeight = "bold";
styleSheet.setStyle(".bold", boldStyleObject);
boldStyleName = "bold";
...
playerName.htmlText = "<span class='" + boldStyleName + "'>" + player.name + "</span>";
...
private function ChangeName (event:Event):void
{
    playerName.type = TextFieldType.INPUT;
    playerName.background = true;
    playerName.addEventListener(KeyboardEvent.KEY_DOWN, DoneEditing);
    stage.focus = playerName;
}
...

private function DoneEditing (event:KeyboardEvent):void
{
    var target:TextField = event.target as TextField;

    if (event.keyCode == 27)
    {
        target.text = editBackup;
        DisactivateTextField(target);
    }
    else if (event.keyCode == 13 && target == playerName && playerName.text.length > 3)
    {
        DisactivateTextField(target);
    }
}

private function DisactivateTextField(field:TextField):void
{
    field.type = TextFieldType.DYNAMIC;
    field.background = false;
    field.removeEventListener(KeyboardEvent.KEY_DOWN, DoneEditing);
} 
```

一切正常，除了 TextField 的可编辑性。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:12:55.570

按下按钮需要一个`MouseEvent`，因此请确保您将正确的事件侦听器添加到您的按钮。此外，请确保您正在检查用户输入以终止编辑或评估输入本身。

```
private function something():void {
    yourBtn.addEventListener(MouseEvent.CLICK,ChangeName);
}
private function ChangeName(e:MouseEvent):void {
    playerName.type = TextFieldType.INPUT;
    playerName.background = true;
    playerName.addEventListener(KeyboardEvent.KEY_DOWN,DoneEditing);
    stage.focus = playerName;
}
private function DoneEditing(e:KeyboardEvent):void {
    if (e.keyCode == Keyboard.ENTER) {
        // do your magic here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:48:02.187

问题出在html样式中。出于某种原因，`TextField`无法编辑通过 styleSheet 设置样式的 htmlText。您应该使用`TextField.defaultTextFormat`属性来设置要编辑的文本样式。

# python - Python 帮助：没有条件或循环

> ID：14027748
> 
> 赞同：0
> 
> 时间：2012-12-25T04:42:50.777
> 
> 标签：python

需要帮助在没有条件或循环的情况下解决此问题：

写出`getInRange`接受 3 个值的函数（您可能假设它们都是数字）- `x`、`bound1`和`bound2`，其中`bound1`不一定小于`bound2`。如果`x`在两个边界之间，则不加修改地返回它。否则，如果`x`小于下限，则返回下限，或者如果`x`大于上限，则返回上限。

例如：

*   `getInRange(1, 3, 5)`返回 3（下限，因为 1 位于范围 [3,5] 的左侧）
*   `getInRange(4, 3, 5)`返回 4（原始值，因为 4 在 [3,5] 范围内）
*   `getInRange(6, 3, 5)`返回 5（上限，因为 6 位于范围 [3,5] 的右侧）
*   `getInRange(6, 5, 3)`还返回 5（上限，因为 6 位于范围 [3,5] 的右侧）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:52:17.477

听起来“getInRange”只是中位数：

```
def getInRange(x, y, z):
   return sorted([x, y, z])[1] 
```

# jasper-reports - 如何在jsp页面中预览报告而不需要在服务器上保存html或pdf文件？

> ID：14027753
> 
> 赞同：1
> 
> 时间：2012-12-25T04:44:36.393
> 
> 标签：jasper-reports, report, liferay, portlet, liferay-6

以下是我在 portletAction 的 serveResource 方法中调用的函数

```
public String ajax_GenerateReportsforCampaignAdvertiseDateRangeWithCustomQuery(
            ResourceRequest request, ResourceResponse response,
            String str_camp_id) throws Exception {

        PortletContext pc = request.getPortletSession().getPortletContext();
        String Pathjrxml = pc
                .getRealPath("/src_reports/Campaign_Advertise_DateRange_Report.jrxml");
        String pathjasper = pc
                .getRealPath("/src_reports/Campaign_Advertise_DateRange_Report.jasper");

        _report_path = pc.getRealPath("htmlreport/report");
        _report_name = Calendar.getInstance().getTimeInMillis() + "";
        _report_path = _report_path + _report_name;

        String str_start_date = request.getParameter("f_start_date");
        String str_end_date = request.getParameter("f_end_date");
        Date filter_start_date = null;
        Date filter_end_date = null;

        List<CampaignReport> temp_campReportList = new ArrayList<CampaignReport>(
                8);

        log.info("ajax_Generate Reports For Campaign Advertise With Date Range Enter");

        /** Dateformat which will convert filter date string in to specified **/

        DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");

        filter_start_date = dateFormat.parse(str_start_date);

        filter_end_date = dateFormat.parse(str_end_date);

        str_end_date = dateFormat.format(filter_end_date);

        log.info("Filter Start Date : " + filter_start_date);
        log.info("Filter End Date : " + filter_end_date);

        ReportCustomQuery cust = new ReportCustomQuery();
        String pathImage = request.getContextPath()
                + "/eMenuAdvertise-portlet/img/eMenu Logo_1.png";
        temp_campReportList = cust.GetAdvertiseListByCampaignsForReports(
                Long.parseLong(str_camp_id), filter_start_date,
                filter_end_date, pathImage);

        System.setProperty("java.awt.headless", "true");

        JRBeanCollectionDataSource beanCollectionDataSource = new JRBeanCollectionDataSource(
                temp_campReportList);
        System.out.println(" bean collection "
                + beanCollectionDataSource.getRecordCount());
        System.out.println("Compile Start");

        JasperCompileManager.compileReportToFile(Pathjrxml, pathjasper);
        JasperPrint jasperPrint = JasperFillManager.fillReport(pathjasper,
                new HashMap<String, Object>(), beanCollectionDataSource);

        log.info("Compile End");
        log.info(" report path " + _report_path);

        JasperExportManager.exportReportToHtmlFile(jasperPrint, _report_path
                + ".html");
        JasperExportManager.exportReportToPdfFile(jasperPrint, _report_path
                + ".pdf");

        log.info("ajax_GenerateReports Leave");
        return _report_name;
    } 
```

并且调用此方法的ajax调用如下

```
<script type="text/javascript">
    function GenerateReport(addToDo) {
        var camp_ID = document.getElementById('camp_id').value;
        var f_start_date = document
                .getElementById('Start_validBeforeDatepicker').value;
        var f_end_date = document.getElementById('End_validAfterDatepicker').value;
        $.ajax({
            url : addToDo,
            data : {
                "camp_id" : camp_ID,
                "f_start_date" : f_start_date,
                "f_end_date" : f_end_date,
                "CMD" : camp_ID
            },
            type : "GET",
            timeout : 20000,
            dataType : "text",
            async : false,
            success : function(data) {

                createRenderURL(data);

            }
        }); 
```

以下是我的 creatRenderUrl javascript，它正在为新创建的 html 文件创建一个动态 resourceurl，然后我在 iframe 中显示该 html 页面作为预览

```
function createRenderURL(str_path,contextpath,resourceurl) {

    AUI().use('liferay-portlet-url', function(A) {

        var renderURL = Liferay.PortletURL.createRenderURL();
        renderURL.setParameter("jspPage", "/htmlreport/report" + str_path);
        renderURL.setPortletId("eMenuAdvertise_WAR_eMenuAdvertiseportlet");

        var p= "<%=renderRequest.getContextPath()%>";
        var downloadurl="/eMenuAdvertise-portlet/htmlreport/report"+ str_path+".pdf";

        var x=document.getElementById("outPopUp");
        x.style.visibility="hidden";

        document.getElementById('reportpreview').src = "/eMenuAdvertise-portlet/htmlreport/report"+ str_path+".html";

        $("#download").click(function () {

            DownloadFile(downloadurl,resourceurl);

});

         return downloadurl;

    });

} 
```

但我想做的是在不保存任何文件的情况下预览报告？在飞行中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T06:59:08.640

编译 jrxml 后，调用 JasperRunManager.runReportToPdf 而不是 JasperExportManager，它将返回报告的字节数组。您可以将此字节数组返回给客户端，而无需将报告保存在文件中。

像这样的东西：

```
JasperCompileManager.compileReportToFile(Pathjrxml, pathjasper);
byte[] report = JasperRunManager.runReportToPdf(pathjasper, new HashMap<String, Object>(), beanCollectionDataSource); 
```

# ios - UITextView 光标放置在顶部

> ID：14027755
> 
> 赞同：1
> 
> 时间：2012-12-25T04:45:05.940
> 
> 标签：ios

我有一个 UITextView，其中已经存在一些文本。当我将此 textview 作为第一响应者时，我使用以下代码将光标放在第一行

```
messageTextView.selectedRange=NSMakeRange(0, 0);

[messageTextView becomeFirstResponder]; 
```

我想要的是将光标放在文本的第一行上方（在现有文本和光标之间留出 1 行间距）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:20:02.243

在两行代码之前添加一个换行符：

```
 NSString *tempString = messageTextView.text;
    messageTextView.text = [NSString stringWithFormat:@"\n%@", tempString]];

    messageTextView.selectedRange=NSMakeRange(0, 0);

    [messageTextView becomeFirstResponder]; 
```

# android - android - 谁安装了我的应用程序

> ID：14027757
> 
> 赞同：-1
> 
> 时间：2012-12-25T04:45:44.547
> 
> 标签：android, google-play, keystore

一年前，我在 google play 商店推出了一款应用，它在大约 1000 台设备上成功运行。

在过去的一年里，我丢失了我的笔记本电脑，里面有我的密钥库文件和应用程序的整个代码。现在我想在 google play store 中更新应用程序。为了更新应用程序，我再次将应用程序准备为新应用程序，并准备好提交。

我知道没有旧的密钥库就无法更新旧的应用程序，所以我计划将我的新代码作为一个全新的应用程序提交，但我需要告知现有用户用户。

我的应用程序中有一个数据库，因此现有用户可能已经在其中存储了一些数据。

现在我计划将当前代码作为新应用程序提交给未来的用户，而对于现有用户，我还没有通过电子邮件或任何其他可能的方式发送更新。为此，我想知道安装了我的应用程序以及我的应用程序在谁的设备上运行的人员列表。如何从我在 google play store 中的帐户收集这些数据，有没有办法在没有 google play store 的情况下向他们的设备发送私人通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:36:21.743

如果它是付费应用程序，那么您可以从您的商家帐户订单详细信息中获取电子邮件地址。

如果它是一个免费的应用程序，那么您能做的最好的事情就是在您的旧应用程序描述中添加注释，如果您有的话，也可以在您的网站上添加注释。

此外，如果可能，您应该考虑添加功能以允许老用户导入他们的数据库（如果它位于应用程序的内部私有存储上，则不可能）。

# javascript - 在刷新浏览器之前将图像移开

> ID：14027760
> 
> 赞同：1
> 
> 时间：2012-12-25T04:47:09.000
> 
> 标签：javascript, jquery, html, raphael, reload

在我正在制作的 html 页面中，我使用 jQuery 和 Raphael 的库将图像动态移动到视口中。当我刷新网页时，这些图像在网页再次加载之前显示为白块 <100 毫秒。我想将这些图像移出视口，这样这些白色块就不会出现。

我用来`window.onbeforeuload=functio(){$('#myimge").css(...);}`移动图像。但事实证明，白色块仍然出现，因为浏览器没有时间在新位置显示带有图像的新刷新视图。如果我放`alert()`，那么图像将消失。因此，我正在寻找一种在浏览器重新加载页面之前将图像真正移出浏览器窗口的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:17:51.970

你不能这样做，你不能阻止窗口关闭，除非你破解它，但我认为这是非常糟糕的做法

```
$(window).on('beforeunload', function() {
     var start = +new Date;
     while ((+new Date - start) < 3000);                        
 }); 
```

对我来说，我会使用 ajax 加载页面，更像是 HTML5 页面

# java - Android - 未检测到 ACTION_UP

> ID：14027761
> 
> 赞同：1
> 
> 时间：2012-12-25T04:47:16.203
> 
> 标签：java, android

我无法弄清楚为什么当我将手指从以下代码中移开时没有触发 ACTION_UP 事件。

```
public boolean onTouch(View v, MotionEvent event) {
        switch(event.getActionIndex()){
        case MotionEvent.ACTION_UP:
            Utils.log("Touch Up");
            break;
        case MotionEvent.ACTION_DOWN:
            Utils.log("Touch Down");
            break;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:05:10.993

你应该使用[`getActionMasked()`](http://developer.android.com/reference/android/view/MotionEvent.html#getActionMasked%28%29).

*   `getAction()`返回*单*指针事件（和不推荐使用的多指针事件......）
*   `getActionMasked()`返回*单个*和*多个*指针事件（使用 with`getActionIndex()`来确定哪个指针），
*   `getActionIndex()`只返回指针索引。

所以`getActionIndex()`返回哪个手指执行了向下/向上动作（0、1、2 等），而`getAction()`或`getActionMasked()`返回您想要的*单*`ACTION_DOWN`指针事件（ 、、`ACTION_UP`等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T04:59:47.737

用我的代码替换你的代码。

```
public boolean onTouch(View v, MotionEvent event) {
          //Here's the problem            
       switch(event.getAction()){
        case MotionEvent.ACTION_UP:
            Utils.log("Touch Up");
            break;
        case MotionEvent.ACTION_DOWN:
            Utils.log("Touch Down");
            break;
        }
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T19:55:17.780

对于其他有类似问题的人，没有触发 ACTION_UP 的原因之一可能是 ACTION_MOVE 过于敏感。在这种情况下，ACTION_UP 永远不会被触发，因为系统将触摸动作解释为 ACTION_MOVE 并改为触发它。

一个解决方案是检查 ACTION_MOVE 何时发生，如果 x 和 y 偏移量大到足以将其作为 ACTION_MOVE 处理，否则，您可以将其作为 ACTION_UP 进行威胁。 [这是SO示例。](https://stackoverflow.com/questions/12328867/motionevent-action-move-keeps-firing-x-and-y-even-if-not-moved)

# audio - 播放“mp3”音频文件的简单 gstreamer 代码出错

> ID：14027762
> 
> 赞同：1
> 
> 时间：2012-12-25T04:47:25.843
> 
> 标签：audio, mp3, gstreamer, bus

```
#include <gst/gst.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    GstElement *element;
    GstElement *element1;
    GstElement *element2;
    GstElement *pipeline;

    gst_init(&argc, &argv);

    if(argc != 2)
    {
        g_print("usage: %s argv[1] \n", argv[0]);

        exit(EXIT_FAILURE);
    }

    /* Creating a new pipeline */
    pipeline = gst_pipeline_new("pipeline");

    /* creating a new *.mp3 source element */
    element = gst_element_factory_make("filesrc", "source");
    if(element != NULL)
        g_object_set(G_OBJECT(element), "location", argv[1], NULL);
    else
    {
        g_print("Failed to create element \n");
        exit(EXIT_FAILURE);
    }

    /* creating a new *.mp3 de-coder element */
    element1 = gst_element_factory_make("decodebin2", "decoder");
    if(element1 != NULL)
        g_print("element1 success \n");
    else
    {
        g_print("Failed to create element1 \n");
        exit(EXIT_FAILURE);
    }

    /* creating a new *.mp3 sink element */
    element2 = gst_element_factory_make("autoaudiosink", "play_audio");
    if(element2 != NULL)
        g_print("element2 success \n");
    else
    {
        g_print("Failed to create element2 \n");
        exit(EXIT_FAILURE);
    }

    /* Adding elements to pipeline */
    gst_bin_add_many(GST_BIN(pipeline), element, element1, element2, NULL);

    /* Linking src to sink element */
    gst_element_link_many(element, element1, element2, NULL);

    /* start playing */
    gst_element_set_state(GST_ELEMENT(pipeline), GST_STATE_PLAYING);

    while(gst_bin_iterate_recurse(GST_BIN(pipeline)));

    /* stop playing */
    gst_element_set_state(GST_ELEMENT(pipeline), GST_STATE_NULL);

    /* un-referencing all the elements in the pipeline */
    gst_object_unref(GST_OBJECT(pipeline));

    return 0;
} 
```

1）编译步骤：- gcc gst6.c -o gst6 `pk-config --cflags --libs gstreamer-0.10`，它正在编译，没有任何警告和错误。
2) 导出 PKG_CONFIG_PATH 环境变量，即导出 PKG_CONFIG_PATH=/usr/lin/pkgconfig。3）执行步骤：./gst6 /home/user/Downloads/*.mp3 4）输出：element1成功，element2成功
杀死。

无法播放音频文件。请让我知道我的程序有什么问题。这是我的第一个程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:35:32.637

这一行：

```
while(gst_bin_iterate_recurse(GST_BIN(pipeline))); 
```

没有任何意义。它在循环中[请求一个迭代器](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstBin.html#gst-bin-iterate-recurse)，但不使用它，也不[释放](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/gstreamer-GstIterator.html#gst-iterator-free)它。

如果您想等到播放结束，您可能需要使用[GstBus](http://developer.gnome.org/gstreamer/stable/GstBus.html#GstBus.description)函数`gst_bus_have_pending`并`gst_bus_pop`处理消息。

# python - 在 GAE 上包含 Jinja2 和 Flask 而不是使用 GAE 版本有什么优势？

> ID：14027764
> 
> 赞同：3
> 
> 时间：2012-12-25T04:47:38.893
> 
> 标签：python, google-app-engine, flask, jinja2

我在 GAE 上为 Flask 找到的每个样板项目和教程都包含一个单独的 Jinja2 版本，但 GAE Python 2.7 默认包含 Jinja2 2.6，并且将其包含在 app.yaml 中要方便得多：

```
libraries:
- name: jinja2
  version: 2.6 
```

包含一个单独的 Jinja2 版本而不是使用 GAE 版本有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T04:49:12.590

不是真的，不。我的意思是，如果您想要`jinja2`AppEngine 上不可用的版本，您可以自定义包含它，但只要您对版本不挑剔，只需使用已经可用的版本。

# c# - 为什么我被告知这种类型转换是多余的？

> ID：14027769
> 
> 赞同：3
> 
> 时间：2012-12-25T04:48:49.283
> 
> 标签：c#, resharper

方程很简单，`int = int * int / int`; 但是，整数的乘法可能会变得太大，我试图`Int64`在执行之前将所有内容都转换为 s，然后将结果转换回整数。因此我有：

```
int = (int)((Int64)int * (Int64)int / (Int64)int); 
```

它抱怨所有三个 Int64 演员表。

**注意**：目标是 x86，因为我使用的是 32 位库。 *机器本身是 64 位的*。我可以用 x64 目标理解它。

*   我错过了什么吗？
*   Resharper 不理解中间值溢出的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T05:31:40.097

```
Int16 a = 1000;
Int16 b = 40;

var c = a * b; // c is Int32 because compiler does not want overflow

// The cast makes a3 Int64
// No need to cast a1 because all operations involving Int64
// will be Int64 to ensure no overflows when arithmetic operations are performed
var a3 = a1 * (Int64)a2; 
```

同样适用于：

```
var a3 = (Int64)a1 * a2; 
```

**如您所知，Resharper 是一个聪明人，它会为您的代码中的所有 3 个强制转换发出警告，因为其中任何一个都具有相同的意义。**

编辑：还有一件事，右侧的所有操作都经过评估，并且在 1 次转换完成后输出为 Int64。最终的 int 转换将对最终计算的值起作用，并且它显式转换为 int，因为 Int64 不能直接转换为 int（防止溢出）。没有中间值溢出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T05:00:41.153

第一次演员表产生一个 Int64。Int64 * int 是 Int64。除以 int 就是 Int64。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T05:13:59.567

铸造其中之一就足够了

```
int x, y, z, w;
x = y = z = int.MaxValue; 
```

看看下面的行为，你就会明白这一切

```
textBox1.Text = ((Int64)x * y).ToString(); 
```

输出：4611686014132420609

```
textBox2.Text = (x * y).ToString(); 
```

输出：1

```
textBox3.Text = ((int)((Int64)x * (Int64)y / (Int64)z)).ToString(); 
```

输出：2147483647

# ruby-on-rails-3 - 直接从 Rails 应用程序向 Node.js 和 Socket.io 推送服务器发送消息

> ID：14027772
> 
> 赞同：2
> 
> 时间：2012-12-25T04:49:07.130
> 
> 标签：ruby-on-rails-3, node.js, socket.io

我正在构建一个客户端浏览器应用程序，该应用程序使用通过 AJAX 用 Ruby Rails 3 编写的服务器端 json API。这一切都很好，没有问题。但是我想在其他用户通过 API 执行操作时将数据推送到用户客户端，而不必让客户端不断地轮询服务器以获取新数据。

所以我设置了一个 Node.js 和 Socket.IO 应用程序来充当推送服务器。客户端连接到 Socket.IO 服务器并订阅他们需要的频道。但问题是如何让 Rails 应用程序向节点服务器发送消息以在这些通道上发出？

我想我可以在 Node 服务器上的一个特殊路由上生成一个发布请求，但是有更好的方法吗？以及如何确保发布请求来自我的 rails 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:32:20.390

使用 Redis (redis.io) Pub/Sub 频道从您的 rails 应用程序发布消息，并从 Node.js 应用程序订阅 Redis 频道。

# clojure - 使用 Noir 在 Clojure 中运行 Web 应用程序时没有主要的命名空间错误

> ID：14027774
> 
> 赞同：11
> 
> 时间：2012-12-25T04:49:13.247
> 
> 标签：clojure, noir

我正在使用黑色。

这是我的项目.clj

```
(defproject noir "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]]) 
```

lein run 给了我这个错误：

```
No :main namespace specified in project.clj. 
```

我哪里错了？

现在，如果我将 :main my-website.server 添加到 project.clj，我会收到以下错误：

线程“main”中的异常 java.lang.RuntimeException: java.lang.ClassNotFoundException: my-website.server

```
at clojure.lang.Util.runtimeException(Util.java:165)
    at clojure.lang.RT.classForName(RT.java:2017)
    at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:206)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:92)
    at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:225)
    at user$eval29.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:6465)
    at clojure.lang.Compiler.eval(Compiler.java:6455)
    at clojure.lang.Compiler.eval(Compiler.java:6431)
    at clojure.core$eval.invoke(core.clj:2795)
    at clojure.main$eval_opt.invoke(main.clj:296)
    at clojure.main$initialize.invoke(main.clj:315)
    at clojure.main$null_opt.invoke(main.clj:348)
    at clojure.main$main.doInvoke(main.clj:426)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:405)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:518)
    at clojure.main.main(main.java:37)
Caused by: java.lang.ClassNotFoundException: my-website.server
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at clojure.lang.DynamicClassLoader.findClass(DynamicClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at clojure.lang.RT.classForName(RT.java:2013)
    ... 21 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T05:32:39.180

问题是 lein 不知道在哪里找到您的`-main`功能：

首先，您应该创建`.clj`要运行的文件。[您可以使用ns](http://clojuredocs.org/clojure_core/clojure.core/ns)宏指定它的命名空间。然后你应该`-main`在这个命名空间中定义函数：

```
(ns my-website.server
  (:require [noir.server :as server]
            [noir.core :refer [defpage]]))

(defpage "/welcome" []
  "Welcome to Noir!")

(defn -main
  [& args]
  (server/start 4000)) 
```

然后你应该配置你的`project.clj`：

```
(defproject my-website "0.1.0-SNAPSHOT"
            :description "..."
            :dependencies [[org.clojure/clojure "1.4.0"]
                           [noir "1.2.2"]]
            :main my-website.server) 
```

`[noir "1.2.2"]`是黑色的最新稳定版本。最好用这个。

不要忘记将此文件放入源目录。Bu 默认它的`./src`目录在你的项目根目录中。因此，如果您的名称空间被调用，`my-website.server`那么 lein 将在`./src/my-website/server.clj`文件中查找它（或者在 中`./src/my_website/server.clj`，我不确定）。

现在`lein run`将导致 lein 进入命名空间`my-website.server`，然后运行`(-main)`函数。

有关更多信息，请参阅[示例 lein 项目](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)。

您还可以`project.clj`使用[lein noir 模板](https://github.com/ibdknox/lein-noir)为您的黑色项目生成。

# windows-phone-8 - Windows phone 8，StreamReader 如何正确处理 GB 编码文本？

> ID：14027782
> 
> 赞同：0
> 
> 时间：2012-12-25T04:51:04.357
> 
> 标签：windows-phone-8, encoding, streamreader

我将一个 GB2312 编码的文本文件从 PC 复制到设备的隔离存储中。我有以下代码可以读出来。设备的语言设置为简体中文。但是，读回的文本除了数字和字母之外都是垃圾。似乎编码设置不正确。但是，我可能不会只处理 GB 代码。代码有什么问题？谢谢！

```
 string fileName = "周杰伦-听妈妈的话.lrc";

        using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (StreamReader sr = new StreamReader(store.OpenFile(fileName, FileMode.Open, FileAccess.Read), true))
            {
                while (true)
                {
                    String line = sr.ReadLine();
                    if (line == null)
                        break;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:22:11.257

您是否尝试过使用包含文件正确编码的[StreamReader c'tor ？](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ms143456%28v=vs.105%29.aspx)

```
public StreamReader(
    Stream stream,
    Encoding encoding
) 
```

> 字符编码由 encoding 参数设置，使用默认缓冲区大小。StreamReader 对象尝试通过查看流的前三个字节来检测编码。如果文件以适当的字节顺序标记开头，它会自动识别 UTF-8、little-endian Unicode 和 big-endian Unicode 文本。否则，使用用户提供的编码。有关详细信息，请参阅 Encoding.GetPreamble 方法。

# mysql - Mysql - CAST的唯一约束（TIMESTAMP as DATE）

> ID：14027783
> 
> 赞同：1
> 
> 时间：2012-12-25T04:51:25.573
> 
> 标签：mysql, sql, unique-constraint

我的 MYSQL 表中有一个`TIMESTAMP myDate`字段。

有没有办法可以`stringForTheDay`为每天*定义*一个唯一的字符串`myDate`？

就像是：

```
UNIQUE(stringForTheDay, day_in_mydate) 
```

简而言之，不能允许这 2 行：

```
2012-11-29 13:35:53      samestring
2012-11-29 20:39:09      samestring 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:59:14.357

你不能。

或者，您可以创建另一个数据类型为`DATE`only 的列，并使用您的 dateOnly 列和字符串列创建唯一的复合键，

例如

```
CREATE TABLE Table1
(
  `day_in_mydate` datetime, 
  `stringForTheDay` varchar(10),
  `dateControl` date,
  UNIQUE (dateControl, stringForTheDay)
) 
```

这里展示了一个完整的例子，

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/75154/1)

如果您有一个现有的表，上面有记录，但您仍然可以更改它。添加具有`DATE`数据类型的列，并执行此查询

```
ALTER TABLE tableName ADD CONSTRAINT tb_UQ UNIQUE (dateOnlyColumn, stringColumn) 
```

并使用时间戳字段中的值更新表。

```
UPDATE tableName
SET    dateOnlyColumn = DATE(timestampColumn) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:04:52.220

我认为您最好的选择是将日期部分复制到单独的列中，并在其上添加唯一约束。您可以使用触发器使日期部分保持最新：

```
CREATE TRIGGER ins_tablename BEFORE INSERT ON tablename
FOR EACH ROW SET NEW.dateColumn = CAST(NEW.timestampColumn AS DATE);

CREATE TRIGGER upd_tablename BEFORE UPDATE ON tablename
FOR EACH ROW SET NEW.dateColumn = CAST(NEW.timestampColumn AS DATE); 
```

（参见[*MySQL 5.6 参考手册*](http://dev.mysql.com/doc/refman/5.6/en/triggers.html)[中的第 18.3 节“使用触发器”](http://dev.mysql.com/doc/refman/5.6/en/triggers.html)*。）*

# objective-c - didEnterRegion 被多次触发

> ID：14027785
> 
> 赞同：2
> 
> 时间：2012-12-25T04:51:47.197
> 
> 标签：objective-c, ios, core-location, cllocationmanager

由于某些奇怪的原因，有时当我进入一个区域时，didEnterRegion 会被触发多达 10 次。有谁知道发生这种情况的可能原因是什么？我知道如果我在边界上可能会发生这种情况，但也许苹果的智能逻辑不会在这些点触发。

这是怎么回事？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:49:48.430

我已经看到，当您实例化 CLLocationManager 的多个实例时。假设您有多个需要使用位置的类，您在应用程序生命周期中分配/初始化位置管理器 4-5 次......它们都在侦听委托方法。

那么，如果我只有 4-5 个实例，为什么我会收到 10 个回调？很高兴你问。:p 我相信 Apple 的区域监控委托方法中存在一个错误，该方法会为每个实例触发两次。

解决方案是为位置管理器委托创建您自己的单例类，并将位置管理器的一个实例用于整个应用程序。这将阻止您获得 4-5 x 2 回调。然后你只会像其他人一样得到 2 个。

如果您愿意提供帮助，请在我对这个问题的回答中复制雷达，以便我们可以让 Apple 彻底解决这个问题。

[为什么 didEnterRegion 调用了两次？](https://stackoverflow.com/questions/14054235/why-the-didenterregion-called-twice/14069443#14069443)

# iphone - 在 iPhone 应用程序中使用 API 而不是 HTML

> ID：14027786
> 
> 赞同：-4
> 
> 时间：2012-12-25T04:52:01.247
> 
> 标签：iphone, ios, ipad

我开发了一个应用程序，其中有很多 UIWebView 显示 HTML 数据。一位高级应用程序开发人员建议我不要使用 HTML，而是要求我使用 API。能告诉我怎么用吗？以及使用它的任何教程或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:04:22.950

您可以使用更适合创建应用程序的第 3 部分 API。如果仅将 webviews 捆绑为应用程序，Apple 也不会接受它（[请参阅 Apple 应用商店审查指南 2.12](https://developer.apple.com/appstore/resources/approval/guidelines.html)）。我可以建议您使用 Corona、Phonegap 和 Titanium 之间的任何一种。如果您不知道什么最适合您，请查看以前回答的帖子：[Corona、Phonegap、Titanium 之间的比较](https://stackoverflow.com/questions/1482586/comparison-between-corona-phonegap-titanium)

# ios - 核心图中的 iOS 水平条形图显示两个值

> ID：14027790
> 
> 赞同：3
> 
> 时间：2012-12-25T04:53:45.400
> 
> 标签：ios, core-plot

我使用过带有 Core Plot 的条形图，但我找不到一种方法来获取包含多个值的条形的水平条形图。有没有办法在 Core Plot 中做到这一点？

这是我想要做的图像。

![在此处输入图像描述](../Images/b7bf2de63dcbdbf4b084494cb91f7806.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:12:11.323

您可以使用堆积条形图来做到这一点。为每个部分制作一个条形图，并为每个部分设置`barBasesVary`一个`YES`。`CPTBarPlotFieldBarBase`这会导致绘图查询数据源以获取为每个条形调用的附加字段。使用它来设置栏的下边缘。

*Plot Gallery*示例应用程序中的“垂直条形图”演示了这种技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T17:06:22.047

我知道这是一个非常古老的帖子。但我最近创建了一个库，它根据给定的值创建水平条。它是用 Swift 编写的，也许有人可以在未来的项目中使用它。

[https://github.com/prine/ROSStorageBar](https://github.com/prine/ROStorageBar)

# php - php,postgresql,mysql

> ID：14027801
> 
> 赞同：0
> 
> 时间：2012-12-25T04:56:05.293
> 
> 标签：php, mysql, postgresql

我被困在一个查询中。我不知道究竟是什么问题..任何 1 都可以帮助我吗？

这是代码：

当我运行查询时，它抛出错误：错误：关系“承包商”不存在第 5 行：来自“承包商”

```
select  cont.name, cont.total,cp.contractor_id,cp.amount_paid,wt.id
                FROM
                (
                  select name,sum(amount_to_be_paid) as total
                  from "CONTRACTORS"
                  group by name
                ) cont
                left join
                (
                  select contractor_id,sum(amount_paid) as amount_paid
                  from "CONTRACTOR_PAYMENTS" 
                  group by contractor_id
                ) cp

                    on cont.id= cp.contractor_id
                              left join worktypeids as wt on cont.worktypeid_id = wt.id AND wt.project_id=2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:01:45.163

你也可以添加表结构吗？

在名为 as 的第一个别名中`cont`，即 join with `cp`，因此对于 cont，您还需要选择`id`列。

更好的发布表结构以及你想要的输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:05:13.407

试试这个

```
select  cont.name, cont.total,cp.contractor_id,cp.amount_paid,wt.id
                FROM
                (
                  select  name,id, sum(amount_to_be_paid) as total
                  from contractors group by name,id
                ) cont
                left join
                (
                  select contractor_id,sum(amount_paid) as amount_paid
                  from contractor_payments
                  group by contractor_id
                ) cp

                  on cont.id = cp.contractor_id
                              left join worktypeids as wt on cont.worktypeid_id = wt.id AND wt.project_id=2 
```

# ios - Xcode 没有看到除了 cocoapod

> ID：14027804
> 
> 赞同：2
> 
> 时间：2012-12-25T04:56:13.250
> 
> 标签：ios, xcode, cocoapods

在导入的 pod 中的现有代码中添加了新的类和方法。

我为这个新课程检查了实用程序中的所有内容。

*   .h 和 .m 文件的位置与此 pod 中的所有其他文件一样选择为“相对于项目”
*   实际文件与此 pod 的其他文件位于同一路径中
*   目标成员身份与 pod 相同。

Xcode 没有看到新类的添加（使用 pod 的项目中的 import 语句中的 h 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:43:45.470

不知道为什么它不适合你，但除此之外你不应该**修改**Pods.xcodeproj。CocoaPods 假设它可以控制它，并会在下一个`pod install`或`pod update`. （也许这就是你看到的问题？）

将自定义类添加到您自己的项目中，在您自己的项目中使用类别扩展库，或者拥有将更改推送到的库的分支（可能通过使用`:local`Podfile 中的指令）。

# php - 防止热链接到图像和文件

> ID：14027807
> 
> 赞同：0
> 
> 时间：2012-12-25T04:56:25.357
> 
> 标签：php

我有几个图像和 PDF 文件，并且我看到其他几个站点直接将这些文件复制到他们的服务器。我有更好的方法来防止这种情况。

我尝试了 cpanel 热链接保护，但在这种情况下，我必须为每个允许的 URL 提供链接，而这是不可能的。所以请告诉我更好的方法来保护文件不直接从其他服务器复制。

我无法阻止 IP 地址，因为它来自其他几个来源。所以 IP 拒绝管理器选项也不好。htaccess 也不行。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:05:45.187

您无法采取任何有效的**技术措施。****不要打扰**。正如另一位评论者所说，如果您可以查看它，您可以复制它。时期。

如果您希望只有*付费*客户可以*轻松*访问您的内容，那么设置付费墙[http://en.wikipedia.org/wiki/Paywall](http://en.wikipedia.org/wiki/Paywall)他们需要“破解”您的网站，或违反您的网站条款之后使用复制它 - 这两者都使您有可能对他们提出刑事指控（在大多数司法管辖区）。

否则，您只有（民事）法律选项：

第 1 步：请他们很好地删除适当的内容（使用他们网站上的网站管理员电子邮件）。

第 2 步：发送 DMCA 通知[http://en.wikipedia.org/wiki/Digital_Millennium_Copyright_Act](http://en.wikipedia.org/wiki/Digital_Millennium_Copyright_Act)（如果您在美国）或您所在司法管辖区的同等机构。

第 3 步：让您的律师发送终止函，并附上诉讼警告。

第 4 步：在适当的司法管辖区提起版权侵权诉讼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:01:59.053

不，没有办法阻止这种情况。如果有人可以查看文件，他们可以复制它；这就是网络的工作方式。

# c# - 如何每月在 Silverlight 中运行一次方法？

> ID：14027815
> 
> 赞同：0
> 
> 时间：2012-12-25T04:59:25.093
> 
> 标签：c#, silverlight

我有一个程序以图表的形式显示一些信息。信息每个月都会更新，所以我需要每月检索一次信息。

我想过有一个线程可以睡几个月，但我不知道这是否可行。有人可以提出更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:02:31.763

您可以将上次访问的日期存储在文件/表格中，然后每天在程序启动时轮询文件/表格。如果超过 1 个月（30/31 天），则重新获取您的数据。

使用`DateTime`.NET 中的类来帮助您。也可以`DateTime.Subtract()`在两个日期之间使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:09:59.400

我想知道你想在这里做什么。听起来……很奇怪。

那么，信息从何而来？数据库？如果是这样，您可以在正常提取数据时计算月份的值吗？或者，您可以在 SQL 代理中运行一项作业，该作业每月使用计算值更新一次表。

真正使用 Windows，您可以设置具有类似概念的计划任务。它每月运行一次并提取新数据。

但基本上，关于您正在尝试做的事情的更多信息可能会帮助我们为您提供更好的答案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T05:25:37.257

我已经看到在启动时启动线程并计算直到下一次读取时间的时间的实现。在线程中，它等待发出关闭事件信号（由应用程序触发），超时值是先前计算的时间。一旦等待完成，如果不是由于关闭事件，则读取数据。

但是，我见过的更常见的实现是使用计划任务将数据加载到应用程序。尽管这将比线程版本花费更长的时间来实现，但它应该提供更强大的解决方案。

# php - facebook应用程序，有助于一次发布所有朋友墙

> ID：14027816
> 
> 赞同：0
> 
> 时间：2012-12-25T04:59:44.827
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-apps

我对 Facebook 应用程序开发非常陌生。

我正在尝试开发一个应用程序来帮助一次发布所有朋友的墙。我想使用 Facebook SDK for PHP 来满足这一需求。这个怎么做？我已经注册了我的应用程序并通过主机托管了该应用程序。分步说明表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:44:32.940

> 一次张贴所有朋友墙。

看，你必须使用**Feed** API 来一一发布。

1.  获取用户的所有好友：

    ```
    $facebook->api('/me/friends'); 
    ```

2.  对于每个朋友，使用**提要**在他们的墙上发帖

    ```
    $params = array(
    'access_token'  => USER_ACCESS_TOKEN, 
    'message'       => 'Blah Blah',
    'link'          => URL
    );        

    $facebook->api('/FRIEND_ID/feed','POST',$params); 
    ```

# javascript - 按住键时自动重复 keydown 事件的跨浏览器方式

> ID：14027818
> 
> 赞同：5
> 
> 时间：2012-12-25T04:59:52.923
> 
> 标签：javascript, jquery, events, keydown

使用 Javascript / jQuery，当有人按住某个键时，如何自动重复 keydown 事件或等效事件？

我真正想要的是能够检查一个键是否已关闭，但从这里的其他问题来看，这似乎是不可能的。建议的解决方法似乎是记录 keydown 和 keyup 事件，然后假设 keydown 事件已被记录并且没有后续 keyup。

就我而言，该解决方案遇到了问题。我正在设计一个在线实验。用户应该在整个实验过程中按住“T”键，永远不要松开。该实验由多个试验组成，每个试验都无法访问先前试验记录的信息。因此，试验 1 可以记录 T 的 keydown，但试验 2 无法访问该记录，因此不知道 T 是否关闭。

现在，如果按住 T 键会自动为 T 产生重复的 keydown 事件，我不会有任何问题，因为试验 2 只会捕获 T 的下一个 keydown 事件。但看起来我*不会*因为按住键而自动重复 keydown 事件，至少在 Firefox 中是这样。从我所看到的情况来看，不同浏览器处理按住键的方式似乎有所不同。什么是解决我的问题的好跨浏览器方法？

顺便说一句，如果这很重要，我还需要能够在这一切进行时检测其他键的 keyup 和 keydown 事件。

**编辑：**在阅读了一些评论后，我回过头来确认在正常情况下我确实会重复按键事件。但我真的没有在我需要它们的特定情况下得到它们。我有一些我认为可以隔离问题的简单代码：

```
<!DOCTYPE html>
<html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>

<body>
<div id="target"></div>
</body>

<script type="text/javascript">

var i;
function foo() {
    i++;
    $('#target').html(i);
}

function doTrial() { // do trial
    i=0;
    $(document).keydown(foo);
    $(document).keyup(endTrial);
}

function endTrial() { // end trial
    $('#target').html('');
    $(document).unbind('keydown',foo);
    $(document).unbind('keyup',endTrial);
    doTrial();
}

doTrial();

</script>

</html> 
```

如果您按住某个键，然后松开，然后再次按下，则行为符合预期，即有一个计数器在按住键时递增，在松开时消失，然后在按下时再次开始递增再次。

但是，如果您按下两个键，然后释放一个，我会认为另一个（未释放）键会继续发送 keydown 事件，以便计数器（重置后）继续递增。事实上，这不会发生。知道为什么以及如何实现它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T05:11:50.160

在我尝试过的浏览器中，当按住可键入的键时，我得到了重复的 keydown 事件。我不知道这是否是您真正需要解决的问题。

但是，如果你确实认为你需要解决它，或者如果你想自己控制重复率，你可以这样做：

1.  捕获 keydown 和 keyup 的事件。
2.  在 keydown 上，设置一个间隔计时器，无论您想知道该键是否仍处于关闭状态，该计时器都会触发。
3.  在该键的 keyup 上，停止间隔计时器。
4.  只要按住该键，您就会以跨浏览器的方式收到重复通知。

在这里工作演示：http: [//jsfiddle.net/jfriend00/XbZYs/](http://jsfiddle.net/jfriend00/XbZYs/)

```
var downTimer;
var lastKey;
$(document.body).keydown(function(e) {
    // if not still the same key, stop the timer
    if (e.which !== lastKey) {
        if (downTimer) {
            clearInterval(downTimer);
            downTimer = null;
        }
    }
    // remember previous key
    lastKey = e.which;
    if (!downTimer) {
        // start timer
        downTimer = setInterval(function() {
            $("#result").append("+");
        }, 125);
    }
}).keyup(function(e) {
    // stop timer
    if (downTimer) {
        clearInterval(downTimer);
        downTimer = null;
        lastKey = 0;
    }
}); 
```

* * *

如果您希望一个键永远自动重复直到它被抬起，即使同时按下并释放其他键并且您希望这些其他键进行自己的自动重复，那么操作系统不会执行该行为所以您必须自己实施。你可以做这样的事情，它为每个按键重复事件调用一个回调函数：

工作演示：http: [//jsfiddle.net/jfriend00/aD3Eg/](http://jsfiddle.net/jfriend00/aD3Eg/)

```
// this is called for every manufactured repeat event
// the frequency of the repeat event is determined by the time value set
// on setInterval() below
function repeatCallback(key) {
    $("#result").append(key + " ");
}

var repeatState = {};
$(document.body).keydown(function(e) {
    var key = e.which;
    // if no time yet for this key, then start one
    if (!repeatState[key]) {
        // make copy of key code because `e` gets reused
        // by other events in IE so it won't be preserved
        repeatState[key] = setInterval(function() {
            repeatCallback(key);
        }, 125);
    } else {
        // nothing really to do here
        // The key was pressed, but there is already a timer
        // firing for it
    }
}).keyup(function(e) {
    // if we have a timer for this key, then stop it 
    // and delete it from the repeatState object
    var key = e.which;
    var timer = repeatState[key];
    if (timer) {
        clearInterval(timer);
        delete repeatState[key];
    }
});
​ 
```

对于所有这些制造的自动重复事件调用repeatCallback 函数并传递自动重复的键。​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:08:11.640

看看这个 jQuery 插件：我认为它是你想要/需要的[fastKeys ...](https://github.com/yckart/jQuery.fastKey.js)

# multithreading - GCD 调度并发队列冻结，崩溃日志中出现“已达到调度线程软限制：64”

> ID：14027824
> 
> 赞同：6
> 
> 时间：2012-12-25T05:01:07.227
> 
> 标签：multithreading, grand-central-dispatch

我的程序是一个处理传入请求的服务器。每个有效的请求都被包装`NSOperation`并传递给一个普通的`NSOperationQueue`.

每个`NSOpearation`处理它的请求。`NSDictionary`在某些情况下，我使用`dispatch_queue`（并发队列）、`dispatch_barrier_async`（当设置值时）和`dispatch_sync`（当获取值时）使这个`NSDictionary`线程安全时存在争用。

我同时用 100 个请求测试我的程序，然后进程有时会冻结。我终止进程`SIGSEGV`以查看崩溃日志。

大多数线程都停留在`dispatch_sync`此队列中。并且下面有一个注释

> 已达到调度线程软限制：64（同步操作中阻塞的调度线程过多）

这个注释的真正含义是什么？它的行为是什么？我找不到有关此限制的信息。我该如何解决这个问题？

我可以想到两种可能的方法来避免这个问题。（我将对其进行测试并将稍后更新）

1.  用于`dispatch_semaphore`限制将块提交到此并发队列。
2.  `maxConcurrentOperationCount`的限制`NSOperationQueue`

你有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-06T22:31:40.460

> 我可以想到两种可能的方法来避免这个问题。（我将对其进行测试并将稍后更新）
> 
> 1.  用于`dispatch_semaphore`限制将块提交到此并发队列。
> 2.  的极限`maxConcurrentOperationCount`。`NSOperationQueue`

是的，这是两种常见的模式。为了未来的读者，这个“耗尽工作线程”问题的另一个解决方案是 Objective-C `dispatch_apply`，在 Swift 中也被称为`concurrentPerform`，它允许以不会耗尽工作线程池的方式进行并发操作。但这实际上只适用于预先启动一系列任务（例如，您想要并行化一个`for`循环），而不是您在问题中概述的场景。但是，为了记录，`dispatch_apply`/仍然`concurrentPerform`是这个一般问题的第三个常见解决方案。

> 我找不到有关此限制的信息。

[这曾经在 WWDC 2012 视频Asynchronous Design Patterns with Blocks、GCD 和 XPC](https://developer.apple.com/videos/wwdc/2012/?id=712)中得到很好的介绍，但该视频不再可用（奇怪的是，其他 WWDC 2012 视频有，但不是那个）。但他们确实解决了 WWDC 2015 视频[Building Responsive and Efficient Apps with GCD](https://developer.apple.com/videos/play/wwdc2015/718/?time=1900)中有限的工作线程问题。

# jquery - jQuery UI Tooltip Widget 移除标题属性

> ID：14027825
> 
> 赞同：3
> 
> 时间：2012-12-25T05:01:19.620
> 
> 标签：jquery, jquery-ui, tooltip

我尝试使用 jQuery UI Tooltip Widget，但我发现一些问题。如果工具提示是打开的，它会删除它打开的元素上的 title 属性。我该如何解决这个问题？我尝试这样的事情：

```
<div class="spbin" title="NAME"><div class="ptmd aud" title="LINK"></div></div> 
```

脚本：

```
$('[title]').tooltip({
open:function(){var te=$('.ui-tooltip-content').html();
$(this).attr('title',te);}},
{show:{effect:'slideDown',delay:250}},
{hide:{effect:'explode',delay:250}},
{track:true}); 
```

但这不是我（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:52:10.667

我按照巴尔玛的建议做了。有效。不再需要返回属性标题的值。我使用了以下代码：

```
<div class="spbin" data-n="NAME">
     <div class="ptmd aud" data-l="LINK"></div>
</div>
<div class="tlv"></div> 
```

脚本：

```
$('[title]').tooltip(
    {show:{effect:'slideDown',delay:250}},
    {hide:{effect:'explode',delay:250}},
    {track:true}
);

$('.spbin').each(function(){
    $('.tlv',this).text(this.dataset.n);
    $(this).attr('title',this.dataset.n);
    $(this).hide();
    $(this).delay(du*2).fadeIn(du);
}); 
```

再次感谢巴尔玛！

# api - 从 Magento API 获取请求中获取 stock_data

> ID：14027827
> 
> 赞同：2
> 
> 时间：2012-12-25T05:01:29.117
> 
> 标签：api, magento

我知道在请求单个产品时可以获取库存数据：

`http://magentohost/api/rest/products/:id`

但请告诉我，在请求列表时有一种方法可以获取 stock_data：

`http://magentohost/api/rest/products`

我正在尝试进行包含所有这些数据的大型导入（> 10k 产品），并且一个接一个地执行它太慢了。

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:32:12.203

```
http://magentohost/api/rest/stockitems 
```

为 REST API 提供包含库存详细信息的产品列表。

# javascript - 相对于外部容器节点的大小，如何设置 Dojo TitlePane 的高度？

> ID：14027829
> 
> 赞同：3
> 
> 时间：2012-12-25T05:01:31.943
> 
> 标签：javascript, html, css, dojo

在下一个示例中，我在 200 像素高度的容器之间创建了一个 TitlePane。我将 TitlePane 高度设置为 100%，但它似乎没有扩展。

相关代码：

```
var titlePane = new TitlePane({
    title: "TITLE",
    toggleable: false,
    style: "height: 100%; overflow-y: auto",
    content: "foo"
});
var outerPane = new ContentPane({
    content: titlePane,
    style: "height: 200px;"
}, dojo.byId("body2")); 
```

完整示例：

[http://jsfiddle.net/bzFPM/](http://jsfiddle.net/bzFPM/)

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:23:01.803

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:08:19.017

我找到了使用手风琴容器的解决方法。当只包含一个带有标题的窗格时，它看起来几乎相同。

```
function example(ContentPane, Accordion, Button){

var titlePane = new Accordion({
       style: "height: 100%; overflow-y: auto"
     });

var innerPane = new ContentPane({title:'TITLE', content:'foo'})

titlePane.addChild(innerPane);

var outerPane= new ContentPane({
    content:titlePane,
    style: "height: 200px;"
}, dojo.byId("body2"));

outerPane.startup()
var button= new Button({
    label:"add line",
    onClick:function(ev){
        innerPane.set("content", innerPane.get("content")+"<br>foo")
    }    
}).placeAt(dojo.byId("body2"), "after");
}

require(["dijit/layout/ContentPane", "dijit/layout/AccordionContainer",
     "dijit/form/Button"], example ); 
```

[http://jsfiddle.net/bzFPM/5/](http://jsfiddle.net/bzFPM/5/)

# android - 如何创建图片中给出的圆形编辑文本

> ID：14027832
> 
> 赞同：2
> 
> 时间：2012-12-25T05:01:54.060
> 
> 标签：android, android-layout, android-edittext

![在此处输入图像描述](../Images/a69aed3ff95a0c6caee1e7cb9a55e9fb.png)

谁能告诉我如何将编辑文本的上两个角设置为圆角（用户名）和电子邮件的下两个角圆角。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T05:23:23.247

您将需要两个`shape`可绘制文件。

对于顶部的 EditText，调用这个，`top_edittext_bg`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid
        android:color="#e2e2e2" >
    </solid>

    <corners
        android:radius="1dp"
        android:bottomLeftRadius="0.1dp"
        android:bottomRightRadius="0.1dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="5dp" >
    </corners>

</shape> 
```

对于底部`EditText`，例如调用它`bottom_edittext_bg`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid
        android:color="#e2e2e2" >
    </solid>

    <corners
        android:radius="1dp"
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="5dp"
        android:topLeftRadius="0.1dp"
        android:topRightRadius="0.1dp" >
    </corners>

</shape> 
```

然后将这些在`android:background="@drawable/RESPECTIVE_XMLS"`属性中设置为相关`EditText's`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T05:21:45.863

在将问题放在这里之前搜索您的要求。

有很多例子可以满足您的要求。看[这里](http://misha.beshkin.lv/android-border-for-layout-view/)，[这里](http://androidcookbook.com/Recipe.seam?recipeId=2318)和[这里](https://stackoverflow.com/questions/8203606/android-how-to-draw-a-border-to-a-linearlayout)等等……

反正我也回答一下，

您需要在可绘制文件夹中创建 shape.xml。

```
 <?xml version="1.0" encoding="UTF-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke 
        android:width="1dp" 
        android:color="#505050"/>
    <corners 
        android:radius="7dp" />

    <padding 
        android:left="1dp"
        android:right="1dp"
        android:top="1dp"
        android:bottom="1dp"/>

    <solid android:color="#505050"/>

</shape> 
```

之后只需将其设置为您的 LilnearLayout 的背景。如果您想实现上述布局，则与 EditText 无关。

例如

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="30dp"
        android:background="@drawable/shape"
        android:orientation="vertical"
        android:padding="5dp" >

        <EditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:textStyle="bold"
            android:text="Sign In" />

        <EditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:textColor="#ffffff"
            android:text="Sign Up" />
    </LinearLayout> 
```

就像上面的解释一样，让我知道你的建议或输出。

希望你明白我的意思。

**更新**

如果您只想像上面的布局那样编辑文本，那么您必须将两个形状文件命名为 username_shape.xml 和 email_shape.xml

username_shape.xml 如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke 
        android:width="1dp" 
        android:color="#505050"/>
    <corners 

        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" 
        android:bottomLeftRadius="0dp"
        android:bottomRightRadius="0dp"/>

    <padding 
        android:left="1dp"
        android:right="1dp"
        android:top="1dp"
        android:bottom="1dp"/>

    <solid android:color="#505050"/>

</shape> 
```

另一个文件 email_shape.xml 如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke 
        android:width="1dp" 
        android:color="#505050"/>
    <corners 

        android:topLeftRadius="0dp"
        android:topRightRadius="0dp" 
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"/>

    <padding 
        android:left="1dp"
        android:right="1dp"
        android:top="1dp"
        android:bottom="1dp"/>

    <solid android:color="#505050"/>

</shape> 
```

现在，使用 username_shape.xml 设置用户名的背景并对电子邮件执行相同操作，但设置文件 email_shape.xml。

请专注于这两个文件。我已经在`<corners ... />`

希望这会帮助你。正如我已经完成的那样，它对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T05:08:41.090

自定义您的 EditText.Modify 这一行`android:shape="rectangle"`。点击此[链接](http://developer.android.com/reference/android/graphics/drawable/shapes/package-summary.html)了解更多信息。

```
<selector><item android:state_pressed="true">
    <shape android:shape="rectangle">
        <gradient android:startColor="#40FFE600"
            android:centerColor="#60FFE600" android:endColor="#90FFE600"
            android:angle="270" android:centerX="0.5" android:centerY="0.5" />
        <stroke android:width="5dp" android:color="#50FF00DE" />
        <corners android:radius="7dp" />
        <padding android:left="10dp" android:top="6dp" android:right="10dp"
            android:bottom="6dp" />
    </shape>
</item>
</selector> 
```

尝试这个-

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" android:padding="10dp">
 <solid android:color="#FFFFFF"/>
    <corners
     android:bottomRightRadius="8dp"
     android:bottomLeftRadius="8dp"
  android:topLeftRadius="8dp"
  android:topRightRadius="8dp"/>
</shape> 
```

它会为你做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T05:47:21.283

使用样式bottem.xml将其保存在drawable中

```
<?xml version="1.0" encoding="utf-8"?>
    <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

        <item>
            <shape android:shape="rectangle" >
                <solid android:color="#FF00FF00" />

                <corners
                    android:bottomLeftRadius="40dp"
                    android:bottomRightRadius="40dp" />
            </shape>
        </item>

    </layer-list> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-02T03:07:03.603

可能这段代码应该运行。对于用户名 Edit-text 创建新的 XML 文件并将其保存在可绘制命名“corners_top”中并复制粘贴此代码。

```
 <?xml version="1.0" encoding="UTF-8"?>
   <shape 
    xmlns:android="http://schemas.android.com/apk/res/android">
<stroke 
    android:width="1dp" 
    android:color="#505050"/>
    <corners 
    android:radius="5dp"
    android:bottomRightRadius="0dp"
    android:bottomLeftRadius="0dp"
    android:topRightRadius="7dp"
    android:topLeftRadius="7dp" />

<padding 
    android:left="10dp"
    android:right="1dp"
    android:top="1dp"
    android:bottom="1dp"
    />

<solid android:color="#d0e5ff"/>

</shape> 
```

对于电子邮件编辑文本，在可绘制文件中创建另一个 xml，命名为“corner_bottom”，然后复制粘贴下面的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
 <shape 
xmlns:android="http://schemas.android.com/apk/res/android">
<stroke 
    android:width="1dp" 
    android:color="#505050"
    android:dashGap="2dp"/>
<corners 
    android:radius="5dp"
    android:bottomRightRadius="7dp"
    android:bottomLeftRadius="7dp"
    android:topRightRadius="0dp"
    android:topLeftRadius="0dp" />

<padding 
    android:left="10dp"
    android:right="1dp"
    android:top="1dp"
    android:bottom="1dp"
    />

<solid android:color="#d0e5ff"/>

</shape> 
```

# python - csv.dictreader 没有给出想要的输出

> ID：14027835
> 
> 赞同：1
> 
> 时间：2012-12-25T05:02:05.870
> 
> 标签：python

圣诞节快乐！

我有以下数据：

```
a = ("   101,   151,     0,'T1',2,2,1, 1.71470E-1,-1.02880E-1,2,'NUCA GSU    ',1,   1,0.3200,   2,0.3900,   3,0.1400,   4,0.1500",
 "1.10000E-3, 9.10000E-2,  1200.00",
"21.6000,  21.600,   0.000,  1200.00,  1100.00,  1000.00, 1,    101,22.68000,20.52000, 1.05000, 0.95000,  25, 0, 0.00021, 0.00051",
"500.000, 500.000")

b = (('I','J','K','CKT','CW','CZ','CM','MAG1','MAG2','NMETR','NAME',
             'STAT','O1','F1','O2','F2','O3','F3','O4','F4'),
            ('R1-2','X1-2','SBASE1-2'),
            ('WINDV1','NOMV1','ANG1','RATA1','RATB1','RATC1','COD1','CONT1',
             'RMA1','RMI1','VMA1','VMI1','NTP1','TAB1','CR1','CX1'),
            ('WINDV2','NOMV2')) 
```

我想形成一个字典如下：

```
{'I': 101, 'J': 151, ...... 'F4': 0.1500}
{'R1-2': 1.10000E-3, ...... 'SBASE1-2': 1200.0}
{'WINDV1': 21.60, ...... 'ÇX1': 0.00051}
{'WINDV2': 500.0, 'NOMV2': 500.0} 
```

我想使用 csv.DicReader 所以我尝试了以下代码：

```
for j in range(4):
    c=list(csv.DictReader(a[j], fieldnames=b[j]))
    print c 
```

我没有得到想要的输出。我究竟做错了什么？

我已经可以这样做了：

```
for j in range(4):
    c=dict(zip( b[j], (a[j].split(','))))
    print c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:35:32.093

我认为没有 csv.DictReader 会更简单，因为您没有阅读 CSV。

```
newListOfDict=[]
for keyLine, valueLine in zip(b, a): #one and one line from a and b
    #the string line in b splitted and stripped
    splittedValues = map(lambda v: v.strip(), valueLine.split(","))
    #create the new dict with the result of zip : ((b1, a1),(b2, a2)...)
    newDict = dict(zip(keyLine, splittedValues))
    newListOfDict.append(newDict)
print newListOfDict 
```

# objective-c - 如何使用 GPUImage 在源图片（静止图像）的某个坐标处混合较小的纹理

> ID：14027836
> 
> 赞同：3
> 
> 时间：2012-12-25T05:02:07.150
> 
> 标签：objective-c, gpuimage

我正在使用 GPUImage 库，我希望在静止图像的某个坐标处放置一个小徽标或文本。

我尝试使用 GPUImageSourceOverBlendFilter，它将第二张图片混合到源图片中，但默认位于源图片的中心。

任何人都可以分享一些想法我如何实现这一目标？

# java - 定期 JavaFX 服务

> ID：14027838
> 
> 赞同：5
> 
> 时间：2012-12-25T05:02:23.073
> 
> 标签：java, javafx-2

我想从我的 JavaFX 应用程序中定期执行一项任务。该任务从远程流中提取数据。

虽然我知道我可以使用如下建议的计时器：

[JavaFX 周期性后台任务](https://stackoverflow.com/questions/9966136/javafx-periodic-background-task)

我相信这应该可以使用 JavaFX [Service](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)对象来完成。Javadoc 中提到了指定自定义执行器（这里想到了[ScheduledThreadPoolExecutor ），但是如何指定周期和延迟？](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)理想情况下，这将使用服务通常的启动、重置、重启和状态绑定......

```
public class MyFirstLineService extends Service<String> {
     private StringProperty url = new SimpleStringProperty(this, "url");
     public final void setUrl(String value) { url.set(value); }
     public final String getUrl() { return url.get(); }
     public final StringProperty urlProperty() { return url; }

     public MyFirstLineService() {
         setExecutor(new ScheduledThreadPoolExecutor());
     }

     protected Task createTask() {
         final String _url = getUrl();
         return new Task<String>() {
             protected String call() throws Exception {
                 URL u = new URL(_url);
                 BufferedReader in = new BufferedReader(
                         new InputStreamReader(u.openStream()));
                 String result = in.readLine();
                 in.close();
                 return result;
             }
         };
     }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:07:43.803

在[JavaFX 问题跟踪器 - RT18702](http://javafx-jira.kenai.com/browse/RT-18702)中请求了 ScheduledService 。

跟踪器包括尚未包含在 2.2 分支中[的初步实现的源代码。](http://javafx-jira.kenai.com/secure/attachment/27545/ScheduledService.java)如果需要，您可以查看该来源，看看它是否有助于改进您的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:06:18.910

我已经找到了一种方法来做到这一点，建立在上面 sarcan 的评论之上......

可以创建一个 Timeline 对象，通常用于为 UI 元素设置动画，作为在 FX 应用程序线程上运行的计时器。使用它可以重新启动服务对象，然后在后台线程上执行长时间运行的操作，同时通过 FX 应用程序线程绑定保留属性访问和更新。

前任：

```
 final MyFirstLineService svc = new MyFirstLineService();
    final Duration oneFrameAmt = Duration.seconds(5);
    final KeyFrame oneFrame = new KeyFrame(oneFrameAmt,
            new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent evt) {
                    svc.restart();
                }
            });
    Timeline timer = TimelineBuilder.create()
                            .cycleCount(Animation.INDEFINITE)
                            .keyFrames(oneFrame)
                            .build();
    timer.playFromStart(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T08:29:59.843

遇到同样的问题。一个例子`ScheduledThreadPoolExecutor`可能是：

```
ScheduledExecutorService executor = Executors.newScheduledThreadPool(5);

Service s = new Service(){
    @Override
    protected Task<String> createTask() {
        return new Task<String>() {
            @Override
            protected String call() throws Exception {
                // code...  
            }
        };
    }
}

// created tasks shall be run in thread pool
s.setExecutor(executor);

// start the service the first time
s.start();

// restart the service every 5 seconds
s.scheduleWithFixedDelay(new Runnable() {
        @Override
        public void run() {
            // need runLater here since trigger needs to be in the javaFX thread
            Platform.runLater(new Runnable() {
                @Override
                public void run() {
                    checker.restart();
                }
            });
        }
    }, 0, 5, TimeUnit.SECONDS);
} 
```

可以用 a 来解决，`Timer`但是你失去了 JavaFX 数据绑定能力（正如你已经提到的）。期待Java8！

# git - 我可以通过http（不是https）使用git在某处存储密码吗

> ID：14027842
> 
> 赞同：3
> 
> 时间：2012-12-25T05:02:33.797
> 
> 标签：git

我正在使用只能使用 http 的代理（在 GAE 上开发）。所以当我尝试时，`git push`我每次都必须输入密码和用户名。

我可以将它存储在某个地方并且不再费心输入它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:52:55.973

我不确定这是否适用于 http，但您可以尝试添加 netrc 条目。如果不存在，则在您的主目录中创建一个名为`_netrc`（或者如果在 nix 框上）的文件。`.netrc`然后添加以下格式的条目：

`machine github.com login [your login] password [your password]`

当然，这假设是 github。根据需要更改站点。

**编辑**

只是要清楚......您*正在*将密码以纯文本形式存储在您的机器上。尽管考虑到您的限制，您可能会被卡住。

# android - XmlAdapters 示例错误中的 ProgressDialog

> ID：14027843
> 
> 赞同：1
> 
> 时间：2012-12-25T05:03:17.257
> 
> 标签：android, android-asynctask

下面是 XmlAdapters 示例代码。当我添加如下所示的 ProgressDialog 时收到错误“适配器类型中的方法 loadCursorAdapter(Context, int, String, Object...) 不适用于参数 (new AsyncTask(){}, int, String)”

```
 final ProgressDialog _progressDialog = new ProgressDialog(this);
            _progressDialog.setTitle("Loading ...");
            _progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

            new AsyncTask<Void, Void, Void>() {
             protected Void doInBackground(Void ... urls) {
             setContentView(R.layout.photos_list);
             setListAdapter(Adapters.loadCursorAdapter(this, R.xml.photos,
            "content://xmldocument/?url=" + Uri.encode("http://picasaweb.google.com/data/feed/api/featured?max-results=50&thumbsize=144c")));
             }

             protected void onPostExecute(Void result) {
                 _progressDialog.dismiss();
             }

             protected void onPreExecute(Void no) {
                 _progressDialog.show();
             }

            }.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:06:05.920

> '适配器类型中的方法 loadCursorAdapter(Context, int, String, Object...) 不适用于参数 (new AsyncTask(){}, int, String)'

意味着 loadCursorAdapter 将 Application 或 Activity Context 作为第一个参数而不是 AsyncTask 所以将您的代码更改为：

```
new AsyncTask<Void, Void, Void>() {
      protected Void doInBackground(Void ... urls) {
         setContentView(R.layout.photos_list);
         setListAdapter(Adapters.loadCursorAdapter(Your_Current_Activity.this,
           R.xml.photos,
            "content://xmldocument/?url=" + Uri.encode("http://picasaweb.google.com/data/feed/api/featured?max-results=50&thumbsize=144c")));
                      //your code here... 
```

而且我不确定这是否可行，因为您正在尝试从 AsyncTask 的 doInBackground 方法访问 Ui 元素，该方法总是在后台线程中执行。

`onPostExecute`后台执行完成后， 您需要将所有与 Ui 相关的代码移入以更新 Ui

# mysql - QMYSQL 尝试了几次，还是没有创建库文件？

> ID：14027846
> 
> 赞同：2
> 
> 时间：2012-12-25T05:03:58.787
> 
> 标签：mysql, qt, driver

所以我已经阅读了几篇关于如何在 QT 中正确安装 QYMYSQL 驱动程序的指南，我什至阅读了与其他指南相矛盾的说明……真的很生气。无论如何，我已经到了在我的 `...src\plugins\sqldrivers\mysql`目录中有这些文件/头文件的阶段...... [mysql文件夹](http://www.flickr.com/photos/73265886@N08/8305252991/in/photostream)

问题是指南中的下一步是简单地运行 `migw32-make`，我应该在我的目录中准备好 4 个文件（.dll 和 .a）吗？

但是，我不断收到一组错误，我不知道如何修复。这是我尝试 make 命令时发生的情况：

```
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql>mingw32-make
mingw32-make -f Makefile.Debug all
mingw32-make[1]: Entering directory `C:/Qt/4.8.4/src/plugins/sqldrivers/mysql'
g++ -mthreads -shared -Wl,--out-implib,c:\Qt\4.8.4\plugins\sqldrivers\libqsqlmys
qld4.a -o ..\..\..\..\plugins\sqldrivers\qsqlmysqld4.dll tmp/obj/debug_shared/ma
in.o tmp/obj/debug_shared/qsql_mysql.o tmp/obj/debug_shared/moc_qsql_mysql.o  -L
"c:\Qt\4.8.4\lib" -L"c:\Qt\4.8.4\lib" tmp\obj\debug_shared\qsqlmysqld_resource_r
es.o C:\MYSQL\lib\libmysql.lib -lQtSqld4 -lQtCored4
Creating library file: c:\Qt\4.8.4\plugins\sqldrivers\libqsqlmysqld4.a
tmp/obj/debug_shared/qsql_mysql.o: In function `codec':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:223: undefined reference to `mysql_character_set_name@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `qMakeError':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:234: undefined reference to `mysql_error@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:237: undefined reference to `mysql_errno@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `qMakeStmtError':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:309: undefined reference to `mysql_stmt_error@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:312: undefined reference to `mysql_stmt_errno@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN19QMYSQLResultPrivate12bindInV
aluesEv':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:358: undefined reference to `mysql_stmt_result_metadata@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:362: undefined reference to `mysql_num_fields@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:369: undefined reference to `mysql_fetch_field@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN12QMYSQLResult7cleanupEv':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:432: undefined reference to `mysql_free_result@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:438: undefined reference to `mysql_store_result@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:440: undefined reference to `mysql_free_result@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:437: undefined reference to `mysql_next_result@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:446: undefined reference to `mysql_stmt_close@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:452: undefined reference to `mysql_free_result@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN12QMYSQLResult5fetchEi':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:496: undefined reference to `mysql_stmt_data_seek@12'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:498: undefined reference to `mysql_stmt_fetch@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:513: undefined reference to `mysql_data_seek@12'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:514: undefined reference to `mysql_fetch_row@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN12QMYSQLResult9fetchNextEv':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:529: undefined reference to `mysql_stmt_fetch@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:544: undefined reference to `mysql_fetch_row@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN12QMYSQLResult9fetchLastEv':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:565: undefined reference to `mysql_stmt_num_rows@4'
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:570: undefined reference to `mysql_num_rows@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN12QMYSQLResult4dataEi':
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:614: undefined reference to `mysql_fetch_lengths@4'
tmp/obj/debug_shared/qsql_mysql.o: In function `ZN12QMYSQLResult5resetERK7QString': 
```

它以类似的模式不断重复，直到结束：

```
C:\Qt\4.8.4\src\plugins\sqldrivers\mysql/../../../sql/drivers/mysql/qsql_mysql.c
pp:1516: undefined reference to `mysql_real_escape_string@16'
collect2: ld returned 1 exit status
mingw32-make[1]: *** [..\..\..\..\plugins\sqldrivers\qsqlmysqld4.dll] Error 1
mingw32-make[1]: Leaving directory `C:/Qt/4.8.4/src/plugins/sqldrivers/mysql'
mingw32-make: *** [debug-all] Error 2

C:\Qt\4.8.4\src\plugins\sqldrivers\mysql> 
```

我不知道我是否做错了什么，或者我应该重新安装并遵循不同的安装指南，因为有很多。如果有人能告诉我为什么它会窒息或指向我一个可靠且实际有效的安装指南，我将不胜感激

提前致谢

**更新已解决**

我并没有真正弄清楚问题是什么，但猜测它与不兼容有关......无论如何，我通过使用另一个软件附带的不同 mysql 安装文件来解决它，Xampp 我已经安装了很久以前。现在我可以将 QMYSQL 插件与 Qt 一起使用，它工作正常！！！

# c# - Dictonary<>.Keys 返回的项目顺序

> ID：14027858
> 
> 赞同：1
> 
> 时间：2012-12-25T05:05:51.963
> 
> 标签：c#, dictionary

如果我在`foreach`上进行循环`Dictionary<>.Keys`，是否有任何规则，例如先进先出或后进先出？还是随机的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T05:07:29.373

[字典类](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

> 返回项目的顺序未定义。

字典中的项目没有排序。您不能确定以相同的顺序获得相同的物品。

为其属性[Dictionary.Keys 属性](http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx)

> Dictionary.KeyCollection 中键的顺序未指定，但它与 Values 属性返回的 Dictionary.ValueCollection 中的关联值的顺序相同。

如果您想要订购或想要按索引访问字典项目，那么您可以使用[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)

> 表示可由键或索引访问的键/值对的集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T05:07:39.857

这一切都在[文档](http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx)中。

> **Dictionary.KeyCollection 中键的顺序未指定**，但它与 Values 属性返回的 Dictionary.ValueCollection 中的关联值的顺序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T05:07:30.253

的顺序`dictionary is not deterministic`，您在检索密钥时无法确保顺序。

> 出于枚举的目的，字典中的每个项目都被视为表示值及其键的 KeyValuePair 结构。返回项目的顺序未定义， **[MSDN](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)**

*您可以通过它告诉您顺序的方​​式创建一个键，例如，您可以在 dictionay 中添加键时使用递增整数，或者您可以使用[**有序字典**](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)。*

# jquery - 使用Jquery在jsp页面中的复选框

> ID：14027860
> 
> 赞同：2
> 
> 时间：2012-12-25T05:06:10.307
> 
> 标签：jquery, jsp, checkbox

我在我的应用程序中使用了复选框，尽管我努力了，但我仍然无法解决一个问题。

```
function allChecked(status,set){
    alert(set);
    if(status)
        $('input[type=checkbox]').attr('checked','true');
    else
        $('input[type=checkbox]').attr('checked',''); 
    } 
```

上述函数根据“状态”的值选择或取消选择所有复选框。“set”是一个数字，指定应选择多少个复选框。所以我希望代码根据“set”的值选择复选框。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:24:07.833

**编辑 ：**

**对于函数调用，您可以使用以下代码**

```
function allChecked(){
    if($('#selectall').attr('checked', this.checked))
        $(".case").attr("checked", "checked");
    else
       $(".case").removeAttr("checked"); 

    } 
```

**示例**：http: [//jsfiddle.net/ipsjolly/wUgwz/7/](http://jsfiddle.net/ipsjolly/wUgwz/7/)

**您也可以使用 ID 而不是调用函数**

```
$(function(){

  // add multiple select / deselect functionality
  $("#selectall").click(function () {
      $('.case').attr('checked', this.checked);
  });

  // if all checkbox are selected, check the selectall checkbox
  // and viceversa
  $(".case").click(function(){

    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }

  });
});​ 
```

**示例**：http: [//jsfiddle.net/ipsjolly/wUgwz/8/](http://jsfiddle.net/ipsjolly/wUgwz/8/)

来源：http: [//viralpatel.net/blogs/multiple-checkbox-select-deselect-jquery-tutorial-example/](http://viralpatel.net/blogs/multiple-checkbox-select-deselect-jquery-tutorial-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:40:33.633

假设您要选中或取消选中*前*N 个复选框（按照它们在 DOM 中出现的顺序），您可以使用[slice](http://api.jquery.com/slice/)方法来完成此操作：

```
function allChecked(status, set) {
    var checkboxes = $('input[type=checkbox]').slice(0, set);

    if (status) {
        checkboxes.attr('checked', 'checked');
    }
    else {
        checkboxes.removeAttr('checked');
    }
} 
```

**演示：http:** [//jsfiddle.net/brianpeiris/Xs9Vc/](http://jsfiddle.net/brianpeiris/Xs9Vc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:55:03.013

尝试这样的事情

```
function allChecked(status,set){
alert(set);
if(status)
    $('input[type=checkbox]:lt('+set+')').attr('checked','true');
else
    $('input[type=checkbox]:lt('+set+')').attr('checked',''); 
} 
```

# haskell - 非整数的模数/余数函数

> ID：14027865
> 
> 赞同：26
> 
> 时间：2012-12-25T05:07:48.627
> 
> 标签：haskell, floating-point, modulo

rem 给出了这个：

```
Prelude> rem 9 8
1 
```

我想要这样的东西：

```
Prelude> nonIntRem 9.1 8
1.0999999999999996 
```

我是这样实现的：

```
nonIntRem x y = x - (y * (fromIntegral $ truncate (x/y))) 
```

我的问题是：

1.  标准的 Haskell 库中是否已经存在类似的东西？我更喜欢使用标准功能，我可能错过了它。
2.  如果没有，这个函数在其他语言中是否有更标准的名称？也许是 fmod，但在这种情况下，否定的行为不像 mod，而是像 rem。如果没有标准的名字，你能不能给这个函数想一个更好的名字？
3.  它似乎可以正常工作，但是如果您发现此功能有问题，我想了解一下。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-25T05:29:43.647

您追求的功能[`mod'`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Fixed.html#v:mod-39-)来自`Data.Fixed`.

# sql - 从多个表中显示帐户余额

> ID：14027868
> 
> 赞同：-1
> 
> 时间：2012-12-25T05:08:28.910
> 
> 标签：sql, sql-server

我有以下两个表，其中存储有关信用和借记记录的信息。

凭证Cr 表包含

```
voucherType    voucherPrefix    voucherNo    crparty    cramount
SALES          S                1            1          43000
SALES          S                2            1          10000 
```

凭证Dr 表包含

```
voucherType    voucherPrefix    voucherNo    drparty    dramount
SALES          S                1            5          43000
SALES          S                2            5          10000 
```

现在在这里，在 SALES 凭证 S/1 中，第 1 方已贷记 43000 金额，第 5 方已获得相同金额。SALES 凭证 S/2 也是如此，其中第 1 方已记入 10000 金额，而第 5 方也有相同金额。

现在我想显示如下结果如果我查询第 1 方

```
PARTY    CREDIT    DEBIT    DEBITPARTY    voucherType    voucherPrefix    voucherNo
1        43000              5              SALES          S                1
1        10000              5              SALES          S                2 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:22:47.297

如果我正确理解了您的问题，那么这就是您要寻找的

```
Select c.crParty as Party, d.dramount as credit , null as debit,
d.drParty as DEBITPARTY,c.voucherType as voucherType,
d.voucherPrefix,d.voucherNo
from VoucherCr as c inner join VoucherDr as d
on c.voucherNo=d.VoucherNo and c.voucherPrefix=d.voucherPrefix
where c.crparty=1
group by d.dramount,c.cramount,d.voucherPrefix,d.voucherNo,c.crParty,
c.voucherType,d.drParty
order by d.dramount desc 
```

试试[SQLFIDDLE](http://sqlfiddle.com/#!3/7e17b/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:37:25.420

尝试使用此查询。在您的情况下，是否有可能将一个`dramount`分为多行`voucherDr`？例如 43000->40000+3000

```
select 
vc.Party,vc.CrAmount, vd.drAmount, vd.drparty, 
vc.voucherType, vc.voucherPrefix, vc.voucherNo

from voucherCr vc
left join voucherDr vd on (vc.voucherType=vd.voucherType)
                          and (vc.voucherPrefix=vd.voucherPrefix)
                          and (vc.voucherNo=vd.voucherNo)

where vc.PARTY=1 
```

# jquery - 显示地图并突出显示某些区域

> ID：14027870
> 
> 赞同：2
> 
> 时间：2012-12-25T05:08:37.353
> 
> 标签：jquery, google-maps, maps

我的问题本质上是这个[显示地图并突出显示某些国家](https://stackoverflow.com/questions/12696526/display-a-map-and-highlight-certain-countries)，但我需要在地图中绘制的不是国家或州，而是城市或城市内的城市或地区，如社区或街区。

是否可以使用谷歌地理图表或其他通过 jquery/js 在谷歌地图上工作的工具来完成？

# python - SQLAlchemy - 设置关系时更新 ForeignKey

> ID：14027876
> 
> 赞同：10
> 
> 时间：2012-12-25T05:09:17.483
> 
> 标签：python, sqlalchemy

我有一堂课：

```
class ExampleClass(Base):
    __tablename__ = 'chart'
    id = Column(Integer, primary_key=True)
    element_id = Column(Integer, ForeignKey('anotherTable.id'))
    element = relationship(AnotherClass)
    element2_id = Column(Integer, ForeignKey('anotherTable2.id'))
    element2 = relationship(AnotherClass2) 
```

我想基于`element_id`and进行查找`element2_id`：

```
class ExampleClass(Base):
    ...
    def get_with_element2(self, element2):
        return session.query(ExampleClass).\
                       filter_by(element_id = self.element_id,
                                 element2_id = element2.id).first() 
```

我发现的问题是，如果我实例化一个新`ExampleClass`对象并将其分配给，则不会设置`element`该字段：`element_id`

```
a = ExampleClass(element=element_obj)
a.element_id => None 
```

我该如何解决这个问题？处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T15:52:37.460

首先，下面的所有示例都假设您的`ExampleClass`实例至少处于[挂起](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#quickie-intro-to-object-states)状态，如果不是“持久”状态（即`session.add(a)`）。换句话说，如果您尚未与 a 交互`Session`并且尚未将`ExampleClass`对象添加到其中，那么您将不会获得 的任何数据库级行为`relationship()`，其中维护外键列值是主要功能。您当然可以自由地直接进行此作业：

```
a = ExampleClass(element_id=element_obj.id) 
```

但这显然没有利用`relationship()`构造提供的自动化。

外键属性的分配`relationship()`发生在[刷新](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#flushing)期间，这是一个仅在需要与数据库交互时发生的过程，例如在使用 发出 SQL 语句`session.query()`之前或在使用 完成事务之前`session.commit()`。

通常，这里的理念`relationship()`是您只处理“元素”和“元素2”属性，而让外键属性在幕后处理。您可以这样编写查询：

```
session.query(ExampleClass).\
     filter_by(element=self.element).\
     filter_by(element2=element2) 
```

ORM 将进行比较，例如`SomeClass.somerelationship=someobject`并将其转换为外键表达式`SomeClass.some_fk=some_id`，但不同之处在于，“some_id”的最终值的评估被*推迟*到执行查询之前的右侧。在执行查询之前，`Query()`对象会告诉`Session`“自动刷新”，这将产生插入行以及分配给对象属性`ExampleClass`的主键标识符的效果。`element_obj``element_id``ExampleClass`

您可以在仍然使用这样的 FK 属性的同时获得类似的效果，但这主要是为了了解它是如何工作的：

```
session.query(ExampleClass).\
   filter_by(element_id=bindparam(callable_=lambda: self.element_id)).\
   filter_by(element2_id=element2.id) 
```

或者更明确地说，先进行冲洗：

```
session.flush()
session.query(ExampleClass).\
   filter_by(element_id=self.element_id).\
   filter_by(element2_id=element2.id) 
```

因此，在您想要`element_id`明确引用外键属性的程度上，您还需要`relationship()`明确地为您做的事情。如果您严格处理对象实例和`relationship()`-bound 属性，并保留典型的默认值（如`autoflush`启用），它通常会做“正确的事情”并确保属性在需要时准备就绪。

# php - 如何在php中获取页面标题？

> ID：14027877
> 
> 赞同：1
> 
> 时间：2012-12-25T05:09:31.173
> 
> 标签：php

我有这个功能来获取网站的标题：

```
function getTitle($Url){
$str = file_get_contents($Url);
if(strlen($str)>0){
    preg_match("/\<title\>(.*)\<\/title\>/",$str,$title);
    return $title[1];
}
} 
```

但是，这个功能让我的页面花了太多时间来响应。有人告诉我仅通过网站的请求标头获取标题，这不会读取整个文件，但我不知道如何。谁能告诉我应该使用哪个代码和功能来做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:16:39.630

对 HTML 使用 regex 不是一个好主意，请改用 DOM Parser

```
$html = new simple_html_dom();
$html->load_file('****'); //put url or filename  
$title = $html->find('title');
echo $title->plaintext; 
```

或者

```
// Create DOM from URL or file
$html = file_get_html('*****');

// Find all images 
foreach($html->find('title') as $element) 
       echo $element->src . '<br>'; 
```

* * *

**好读**

1.  [RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T07:09:12.817

试试这个肯定会奏效

```
include_once 'simple_html_dom.php';

$oHtml = str_get_html($url);
$Title = array_shift($oHtml->find('title'))->innertext;
$Description = array_shift($oHtml->find("meta[name='description']"))->content;
$keywords = array_shift($oHtml->find("meta[name='keywords']"))->content;
echo $title;
echo $Description;
echo $keywords; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T06:10:26.693

使用 jQuery 来获取页面的标题

```
$(document).ready(function() {
    alert($("title").text());
});​ 
```

演示：http: [//jsfiddle.net/WQNT8/1/](http://jsfiddle.net/WQNT8/1/)

# java - 从hibernate的外键表中获取主键表的结果

> ID：14027880
> 
> 赞同：0
> 
> 时间：2012-12-25T05:10:08.973
> 
> 标签：java, hibernate, hibernate-mapping, hibernate-criteria

我是休眠新手并尝试使用标准。我坚持从 2 个表中获取结果，即主外键实际存在的表。

我有 Carpooler 和 SourceToDestinationDetails DTO，现在根据用户搜索数据，我想填充包含 SourceToDestinationDetails 的 Carpooler 对象，但我没有得到它，也不知道如何使用 Criteria API 来完成。

```
public class Carpooler implements Serializable{

    private long carpoolerId;
    private String drivingLicenceNumber=null;
    private String userType=null;![enter image description here][1]
    private User user=null;
    private List<VehicleDetails> listOfVehicleDetails=null;
    private List<SourceToDestinationDetails> listOfSourceToDestinationDetails=null;
    private Date carpoolerCreationDate;
}

public class SourceToDestinationDetails implements Serializable{

    private static final long serialVersionUID = -7158985673279885525L;

    private long sourceToDestinationId;
    private String sourcePlace=null;
    private String destinationPlace=null;
    private String inBetweenPlaces=null;

    private String sourceLeavingTime=null;
} 
```

![在此处输入图像描述](../Images/b5775cc8a4fee7db7642c6b4515ec16b.png) ![在此处输入图像描述](../Images/00fc8558c9165a277936996a09162d77.png) 这是我写的，

```
Criteria criteria1 = getSession().createCriteria(SourceToDestinationDetails.class);
criteria1.add(Restrictions.like("sourcePlace", "%" + from + "%"));
criteria1.add(Restrictions.like("destinationPlace", "%" + to + "%"));
List<SourceToDestinationDetails> listOfExactMatchCarpooler = criteria1.list(); 
```

通过上面的 Criteria API，我只获取 SourceToDestinationDetails DTO 记录，但现在我也需要拼车记录，我不知道如何在 SourceToDestinationDetails 表中获取匹配 Carpooler_id 的拼车记录。

我的意思是如果用户给出，

```
String from = "Bellandur";
    String to = "Silk Board"; 
```

那么结果应该是`List<Carpooler>`对象，其中包含所有匹配的 SourceToDestinationDetails 列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:21:33.840

你可以通过[Annotations](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)做到这一点。您可以在*SourceToDestinationDetails*类中使用[@OneToMany](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html)注释，如下所示，

 *```
public class SourceToDestinationDetails implements Serializable{

    private static final long serialVersionUID = -7158985673279885525L;
    @Column
    private long sourceToDestinationId;
    @Column
    private String sourcePlace=null;
    @Column
    private String destinationPlace=null;
    @Column
    private String inBetweenPlaces=null;
    @Column
    private String sourceLeavingTime=null;

    @OneToMany(mappedBy = "carpooler_id", cascade = CascadeType.ALL)
    private Set<Carpooler> carpoolers;
} 
```

如果您想使用*HIBERNATE XML*实现相同的目标。如下声明 XML

```
 <set name="carpoolers" table="source_destination" 
            inverse="true" lazy="true" fetch="select">
        <key>
            <column name="carpooler_id" not-null="true" />
        </key>
        <one-to-many class="com.test.Carpooler" />
    </set> 
```

在这种情况下，您的模型类将是

```
public class SourceToDestinationDetails implements Serializable{

    private static final long serialVersionUID = -7158985673279885525L;

    private long sourceToDestinationId;
    private String sourcePlace=null;
    private String destinationPlace=null;
    private String inBetweenPlaces=null;

    private String sourceLeavingTime=null;
    private Set<StockDailyRecord> carpoolers = 
                new HashSet<StockDailyRecord>();
} 
```

我通常更喜欢注解而不是丑陋的 XML*

# android - 尝试在 php 服务器中上传图像，但它可以发布。在安卓中

> ID：14027882
> 
> 赞同：1
> 
> 时间：2012-12-25T05:11:36.793
> 
> 标签：android, image-uploading

我尝试通过画廊将图像与名称 DOB id 等其他条目一起上传到服务器，除了 php 服务器中的图像外，所有条目都上传了，我不明白我的错误在哪里，请帮忙。建议任何其他代码请告诉我。这是我的代码

```
 Bitmap bitmapOrg = BitmapFactory.decodeFile(imageselectedPath1);
     ByteArrayOutputStream bao = new ByteArrayOutputStream();

            // Resize the image
            double width = bitmapOrg.getWidth();
            double height = bitmapOrg.getHeight();
            double ratio = 400 / width;
            int newheight = (int) (ratio * height);
            System.out.println("———-width" + width);
            System.out.println("———-height" + height);
            Log.d("width ", "width  " + width);
            Log.d("height ", "height " + height);
            bitmapOrg = Bitmap.createScaledBitmap(bitmapOrg, 400,
                    newheight, true);
            // Here you can define .PNG as well
            bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 99, bao);
            byte[] ba = bao.toByteArray();
            String ba1 = Base64.encodeBytes(ba);
            Log.d("uploading  ", "uploading   " + ba1);

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

            nameValuePairs.add(new BasicNameValuePair("user_id", mSignMessg));
            nameValuePairs.add(new BasicNameValuePair("name", mname.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("dob", mbirthday.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("bio", mbio.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("sex", mSexValue));
            nameValuePairs.add(new BasicNameValuePair("profile_status", "0"));
            nameValuePairs.add(new BasicNameValuePair("location", mlocation.getText().toString()));

            nameValuePairs.add(new BasicNameValuePair("image", ba1));
            Log.d("userfile", "userfile " + ba1);

            // nameValuePairs.add(new BasicNameValuePair("image”, ba1));

            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://iapptechnologies.com/snapic/profileXml.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                Log.d("nameValuePairs", "nameValuePairs " + nameValuePairs);

                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();

                // print responce
                outPut = EntityUtils.toString(entity);
                Log.i("GET RESPONSE—-", outPut);
                Log.d("GET RESPONSE—-", outPut);

                // is = entity.getContent();
                Log.e("log_tag ******", "good connection");
                System.out.println("gudconection");
                Log.d("god connection ", "gud connection ");

                bitmapOrg.recycle();

            } catch (Exception e) {

                Log.e("logCatch block***",
                        "Error in http connection " + e.toString());
                Log.d("log_catch block ******", "Error in http connection "
                        + e.toString());
            }

              Log.d("image_name","image_name "+image_name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:49:54.760

下面的代码将首先用分辨率压缩图像，然后`MultiPart`通过方法设置实体并通过网络发送数据`POST`。

```
BitmapFactory.Options options = new BitmapFactory.Options();

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = true;
    // image path `String` where your image is located
    BitmapFactory.decodeFile(imagePath, options);

    int bitmapWidth = 400;
    int bitmapHeight = 250;

    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > bitmapHeight || width > bitmapWidth) {
        if (width > height) {
            inSampleSize = Math
                    .round((float) height / (float) bitmapHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) bitmapWidth);
        }
    }

    options.inJustDecodeBounds = false;
    options.inSampleSize = inSampleSize;

    // you can change the format of you image compressed for what do you
    // want;
    // now it is set up to 640 x 480;

    Bitmap bmpScale = BitmapFactory.decodeFile(imagePath, options);

    ByteArrayOutputStream bos = new ByteArrayOutputStream();

    // CompressFormat set up to JPG, you can change to PNG or whatever you
    // want;

    bmpScale.compress(CompressFormat.JPEG, 100, bos);

    byte[] data = bos.toByteArray();

    MultipartEntity entity = new MultipartEntity(
            HttpMultipartMode.BROWSER_COMPATIBLE);

    entity.addPart("avatar", new ByteArrayBody(data,"pic.jpg"
            ));

    //add your other name value pairs in entity.

    for (int i = 0; i < nameValuePairs.size(); i++) {
        entity.addPart(nameValuePairs.get(i).getName(), new StringBody(
                nameValuePairs.get(i).getValue()));
    }

    httppost.setEntity(entity);

    HttpResponse response = httpClient.execute(httppost); 
```

**编辑**

哦..对不起，我忘了通知。是的，有一个名为`httpmime-4.2.2`and的罐子`httpclient.jar`。您可以从[Apache 站点](http://hc.apache.org/downloads.cgi)下载它。只需解压缩包，您将获得`lib`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:05:39.750

如果 ulr 像这样 [http://iapaaaa.com/snapic/profileXml.php?user_id=2&name=joe&dob=2000-01-10&bio=bla](http://iapaaaa.com/snapic/profileXml.php?user_id=2&name=joe&dob=2000-01-10&bio=bla) bla bla&sex=1&profile_status=0&location=England&userfile=user_photo.png

使用此代码 BitmapFactory.Options options = new BitmapFactory.Options();

```
 // Decode bitmap with inSampleSize set
            options.inJustDecodeBounds = true;
            // image path `String` where your image is located
            BitmapFactory.decodeFile(selectedPath1, options);

            int bitmapWidth = 400;
            int bitmapHeight = 250;
            final int height = options.outHeight;
            final int width = options.outWidth;
            int inSampleSize = 1;
            if (height > bitmapHeight || width > bitmapWidth) {
                if (width > height) {
                    inSampleSize = Math.round((float) height
                            / (float) bitmapHeight);
                } else {
                    inSampleSize = Math.round((float) width
                            / (float) bitmapWidth);
                }
            }

            options.inJustDecodeBounds = false;
            options.inSampleSize = inSampleSize;

            Bitmap bmpScale = BitmapFactory.decodeFile(selectedPath1,
                    options);

            ByteArrayOutputStream bos = new ByteArrayOutputStream();

            // CompressFormat set up to JPG, you can change to PNG or
            // whatever you
            // want;

            bmpScale.compress(CompressFormat.JPEG, 100, bos);
            bmpScale.compress(CompressFormat.JPEG, 100, bos);

            byte[] data = bos.toByteArray();
            MultipartEntity entity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);
            // entity.addPart("avatar", new ByteArrayBody(data,mSignMessg +
            // "-" + new Random().nextInt(1000) + ".jpg"));

            entity.addPart("userfile", new ByteArrayBody(data, "pic.jpg"));
            // add your other name value pairs in entity.
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

            nameValuePairs
                    .add(new BasicNameValuePair("user_id", mSignMessg));
            nameValuePairs.add(new BasicNameValuePair("name", mname
                    .getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("dob", mbirthday
                    .getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("bio", mbio.getText()
                    .toString()));
            nameValuePairs.add(new BasicNameValuePair("sex", mSexValue));
            nameValuePairs
                    .add(new BasicNameValuePair("profile_status", "0"));
            nameValuePairs.add(new BasicNameValuePair("location", mlocation
                    .getText().toString()));

            // nameValuePairs.add(new BasicNameValuePair("image", ba1));
            Log.d("userfile", "userfile " + ba1);

            // nameValuePairs.add(new BasicNameValuePair("image”, ba1));

            for (int i = 0; i < nameValuePairs.size(); i++) {

                try {
                    entity.addPart(
                            nameValuePairs.get(i).getName(),
                            new StringBody(nameValuePairs.get(i).getValue()));
                } catch (UnsupportedEncodingException e) {
                    // TODO Auto-generated catch block
                    Log.d("respons", "image respons " + e);
                    e.printStackTrace();
                }

            }

            // httppost.setEntity(entity);
            //
            // HttpResponse response = httpClient.execute(httppost);

            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://technologies.com/snapic/profileXml.php");

                httppost.setEntity(entity);

                Log.d("nameValuePairs", "nameValuePairs " + nameValuePairs);

                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity1 = response.getEntity();

                // print responce
                outPut = EntityUtils.toString(response.getEntity());
                Log.i("GET RESPONSE—-", outPut);
                Log.d("GET RESPONSE—-", outPut);

                // is = entity.getContent();
                Log.e("log_tag ******", "good connection");
                System.out.println("gudconection");
                Log.d("god connection ", "gud connection ");

                bitmapOrg.recycle();

            } catch (Exception e) {

                Log.e("logCatch block***",
                        "Error in http connection " + e.toString());
                Log.d("log_catch block ******", "Error in http connection "
                        + e.toString());
            } 
```

# iphone - cocos2d CCScene 背景定位

> ID：14027883
> 
> 赞同：0
> 
> 时间：2012-12-25T05:11:37.320
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, iphone-5

我正在尝试使用以下代码为我的场景添加背景图像：

```
 CCSprite* background = [CCSprite spriteWithFile:@"background-hd.png"];
    background.tag = 1;
    background.anchorPoint = CGPointMake(0,0);
    [self addChild:background]; 
```

我的应用程序方向是横向的，图像的方向也是横向的，但是我得到的图像是纵向的：

![http://i.stack.imgur.com/ZIFnU.png](../Images/4fe1e148cb914e12ff1e785057b84e77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:28:00.327

我认为这是使用图层设置场景的解决方案...

```
+(CCScene *) scene
 {
CCScene *scene = [CCScene node];
StartLayer *layer = [StartLayer node];

CCSprite *background = [CCSprite spriteWithFile:@"background-hd.png"];
background.anchorPoint = ccp(0,0);

[layer addChild:background z:-1];
[scene addChild: layer];

return scene;
 } 
```

有关更多信息，请参阅此链接[Cocos2d-Scenes-and-Layers](http://ioscreator.com/cocos2d-scenes-and-layers/) ....

希望这对你有帮助...

# c# - 单击注销时如何重定向到登录页面

> ID：14027885
> 
> 赞同：0
> 
> 时间：2012-12-25T05:11:45.650
> 
> 标签：c#, asp.net

我正在用 asp .net 4.0 开发一个应用程序。

在这里，当我登录到我的应用程序时，转到内部页面，说“管理角色”并复制链接并单击注销按钮，它会显示我的登录页面。现在我将该链接粘贴到另一个选项卡中，并希望它向我显示登录页面，但它没有发生，它显示我管理角色页面。

所以请给我一些解决方案，在这种情况下我该如何显示登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:29:19.780

在您的页面“管理角色”中，在您的页面加载中，检查用户信息在会话中是否可用。当您单击注销按钮时，首先从会话中删除用户信息，然后将其重定向到登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:59:13.530

首先在注销按钮单击事件时删除所有会话

```
 Session.Abandon();
    Session["SessionName"] = null;
    Session.Clear(); 
```

然后在 Global.asax 文件中编写代码

```
 Void Application_Error(object sender,EventArgs e)
    {
         Response.Redirect("LogIn.aspx");
         or
         Server.Transfer("LogIn.aspx");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T05:27:04.653

您必须使用会话变量来检查用户是否已登录，然后在您的每个页面中..在页面加载事件中，如果 null den 将其重定向到登录页面，您必须检查该会话用户变量是否为空

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T05:30:15.293

如果您使用的是 C#，请尝试使用 ASP.Net 中提供的 Session Destroy 功能

尝试：

```
Session.Abandon(); 
```

如果要从会话中删除特定项目，请使用 (MSDN)：

```
Session.Remove("YourItem"); 
```

**编辑：**如果你只想清除一个值，你可以这样做：

```
Session["YourItem"] = null; 
```

如果要清除所有键，请执行以下操作：

```
Session.Clear(); 
```

然后检查每个页面上的会话值，您只想使用会话访问（对于登录用户）进行限制。

# php - 在 javascript 函数中使用 FORM POST

> ID：14027887
> 
> 赞同：2
> 
> 时间：2012-12-25T05:11:50.457
> 
> 标签：php, javascript, jquery, yii, yii-events

我有这样的表格..

```
<?php $form = $this->beginWidget('CActiveForm', array(
    'id'=>'price-form',
    'enableAjaxValidation'=>true,
    'enableClientValidation'=>true,
)); ?> 
```

和这样的提交按钮..

```
<?php echo CHtml::submitButton('Save Changes', array('name' => 'Edit','id'=>'submit''));?> 
```

Jquery 和 javascrippt 函数是：

```
function checkSum()
{
    //alert();
    if(false)
    {
        alert('Please Enter valid credintals !');
        return false;
    }
    else
    {
        //i have to post my form, how can i achieve this 
        where where url goes like this
        controllerName/actionName?id=something
    }
}

$(document).ready(function(){
    $("#submit").click(function(e){
        e.preventDefault();
        checkSum();
    });
}); 
```

我必须稍后在控制器中通过表单 post 方法捕获我的 url 段 id，我必须处理`id = something` Help me 来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:26:09.707

试试这个它应该工作

```
<?php echo CHtml::SubmitButton('Save Changes',array('onclick'=>'return checkSum();'));?> 
```

并且没有必要使用jquery。

# android - 使用 BaseAdapter 和 ImageView Helper 下载图像时滚动缓慢

> ID：14027888
> 
> 赞同：1
> 
> 时间：2012-12-25T05:11:57.383
> 
> 标签：android, imageview, baseadapter

在我的应用程序中，我正在使用[UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)库。在运行时，该应用程序将从服务器和超过 300 个相关图像中获取一个 xml 文件。我面临与滚动速度有关的问题。当我更快地向下滚动时，它会卡住，运行速度很慢。我试过不下载图像，它工作得很好。然后我对图书馆的图像缩放代码进行了一些更改，但没有帮助。即使我尝试了该库中称为“时髦的快速加载”的方法*loadUrlDrawable() ，不幸的是，仍然没有成功。*

这是我的应用程序的外观：

![在此处输入图像描述](../Images/4eb88a430407a71db9ac584f1b637772.png)

适配器的xml文件很简单，这里是JAVA代码：

```
public class MyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public MyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get(CustomizedListView.KEY_TITLE));
    artist.setText(song.get(CustomizedListView.KEY_ARTIST));
    duration.setText(song.get(CustomizedListView.KEY_DURATION));

   UrlImageViewCallback imgCallback = new UrlImageViewCallback() {
   @Override
   public void onLoaded(ImageView imageView, Drawable loadedDrawable,
    String url, boolean loadedFromCache) {
     thumb_image.setImageDrawable(loadedDrawable);
   }
  };
   UrlImageViewHelper.loadUrlDrawable(thumb_image.getContext(), Const.URL_SMALL_IMAGES + restoran.getId() + "/1_m.jpg", imgCallback);
 }
} 
```

我究竟做错了什么？任何帮助将不胜感激。

# c# - 调用者未经服务验证

> ID：14027889
> 
> 赞同：2
> 
> 时间：2012-12-25T05:12:44.293
> 
> 标签：c#, asp.net, wcf, wcf-data-services, wcf-client

我正在使用 WCF 并发现此错误：

> " 调用者未通过服务的身份验证。"

我在`client.config`文件中使用了这段代码：

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSDualHttpBinding_IReceiverController" closeTimeout="00:00:05"
         openTimeout="00:00:05" receiveTimeout="00:10:00" sendTimeout="00:00:05"
         bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
         maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
         messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" />
          <security mode="None">
            <message clientCredentialType="Windows" negotiateServiceCredential="false" />
          </security>
        </binding>
        <binding name="WSHttpBinding_IEMRProWCFService" />
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://pionbuggs-pc:4567/EMRProWCFService.svc"
        binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IEMRProWCFService"
        contract="EMRProWCFService.IEMRProWCFService" name="WSHttpBinding_IEMRProWCFService">
        <identity>
          <dns value="http://pionbuggs-pc:4567/EMRProWCFService.svc" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

以下是`service.config`文件中的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <system.web>
    <compilation />
    <httpRuntime maxRequestLength="2147483647" />

  </system.web>

  <system.serviceModel>
    <services>
      <service name="WCFService.EMRProWCFService">
        <endpoint address="" binding="wsHttpBinding" contract="WCFService.IEMRProWCFService">
          <identity>
            <dns value="http://pionbuggs-pc:4567/EMRProWCFService.svc" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      <webHttpBinding>
        <binding name="WebConfiguration" maxBufferSize="65536" maxReceivedMessageSize="2147483647" transferMode="Streamed">
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:44:31.987

而不是使用`binding="wsHttpBinding"`，尝试仅使用一个基本的，将您的客户端 endopint 更改为：

```
<endpoint address="http://pionbuggs-pc:4567/EMRProWCFService.svc"
    binding="basicHttpBinding" bindingConfiguration="WSHttpBinding_IEMRProWCFService"
    contract="EMRProWCFService.IEMRProWCFService" name="WSHttpBinding_IEMRProWCFService"> 
```

并为您服务：

```
<endpoint address="" binding="basicHttpBinding" contract="WCFService.IEMRProWCFService"> 
```

错误在于您使用了要求您使用身份验证的高级安全性，除非存在需要它的安全约束。

这里有一些关于它的信息：

[BasicHttpBinding vs WsHttpBinding vs WebHttpBinding](https://stackoverflow.com/questions/2650785/basichttpbinding-vs-wshttpbinding-vs-webhttpbinding)

# javascript - javascript 表单 cookie - 仅选择前 10 个索引的打开 cookie

> ID：14027891
> 
> 赞同：5
> 
> 时间：2012-12-25T05:13:04.493
> 
> 标签：javascript, forms, cookies

我以前从未使用过 cookie，所以我使用了一段我非常不熟悉的代码。

它工作得很好，直到我刚才注意到对于选择框，它不适用于第十个索引之后的任何值。（对于索引 10 及以上）。

我查看了存储在我的系统上的 cookie，它似乎没有正确保存它们。（我看到 select10）ETC 存储正确。

但是，当它运行 onload of body 时，它没有正确加载值。

这是我正在使用的 cookie 代码：

```
<SCRIPT LANGUAGE="JavaScript">

<!-- Begin

var expDays = 100;
var exp = new Date(); 

exp.setTime(exp.getTime() + (expDays*24*60*60*1000));

function getCookieVal (offset) {  
    var endstr = document.cookie.indexOf (";", offset);  
    if (endstr == -1) { endstr = document.cookie.length; }
    return unescape(document.cookie.substring(offset, endstr));
}

function GetCookie (name) {  
    var arg = name + "=";  
    var alen = arg.length;  
    var clen = document.cookie.length;  
    var i = 0;  

    while (i < clen) {    
        var j = i + alen;    
        if (document.cookie.substring(i, j) == arg) return getCookieVal (j);    
        i = document.cookie.indexOf(" ", i) + 1;    
        if (i == 0) break;   
    }  

    return null;
}

function SetCookie (name, value) {  
    var argv = SetCookie.arguments;  
    var argc = SetCookie.arguments.length;  
    var expires = (argc > 2) ? argv[2] : null;  
    var path = (argc > 3) ? argv[3] : null;  
    var domain = (argc > 4) ? argv[4] : null;  
    var secure = (argc > 5) ? argv[5] : false;  

    document.cookie = name + "=" + escape (value) + 
    ((expires == null) ? "" : ("; expires=" + expires.toGMTString())) + 
    ((path == null) ? "" : ("; path=" + path)) +  
    ((domain == null) ? "" : ("; domain=" + domain)) +    
    ((secure == true) ? "; secure" : "");
}

// use the following code to call it:
//  <body onLoad="cookieForms('open', 'form_1', 'form_2', 'form_n')" onUnLoad="cookieForms('save', 'form_1', 'form_2', 'form_n')">

function cookieForms() {  
    var mode = cookieForms.arguments[0];

    for(f=1; f<cookieForms.arguments.length; f++) {
        formName = cookieForms.arguments[f];

        if(mode == 'open') {    
            cookieValue = GetCookie('saved_'+formName);

            if(cookieValue != null) {
                var cookieArray = cookieValue.split('#cf#');

                if(cookieArray.length == document[formName].elements.length) {
                    for(i=0; i<document[formName].elements.length; i++) {
                        if(cookieArray[i].substring(0,6) == 'select') { document[formName].elements[i].options.selectedIndex = cookieArray[i].substring(7, cookieArray[i].length-1); }
                        else if((cookieArray[i] == 'cbtrue') || (cookieArray[i] == 'rbtrue')) { document[formName].elements[i].checked = true; }
                        else if((cookieArray[i] == 'cbfalse') || (cookieArray[i] == 'rbfalse')) { document[formName].elements[i].checked = false; }
                        else { document[formName].elements[i].value = (cookieArray[i]) ? cookieArray[i] : ''; }
                    }
                }
            }
        }

        if(mode == 'save') {    
            cookieValue = '';

            for(i=0; i<document[formName].elements.length; i++) {
                fieldType = document[formName].elements[i].type;

                if(fieldType == 'password') { passValue = ''; }
                else if(fieldType == 'checkbox') { passValue = 'cb'+document[formName].elements[i].checked; }
                else if(fieldType == 'radio') { passValue = 'rb'+document[formName].elements[i].checked; }
                else if(fieldType == 'select-one') { passValue = 'select'+document[formName].elements[i].options.selectedIndex; }
                else { passValue = document[formName].elements[i].value; }
                cookieValue = cookieValue + passValue + '#cf#';
            }
            cookieValue = cookieValue.substring(0, cookieValue.length-4); // Remove last delimiter
            SetCookie('saved_'+formName, cookieValue, exp);     
        }   
    }
}

//  End -->
</script> 
```

我相信问题出在以下行，在上面的代码块（第 68 行）的 3/4 处找到：

```
if(cookieArray[i].substring(0,6) == 'select') { document[formName].elements[i].options.selectedIndex = cookieArray[i].substring(7, cookieArray[i].length-1); } 
```

仅供参考，这是我正在使用的开始正文标签：

```
<body style="text-align:center;" onload="cookieForms('open', 'ramsform', 'decksform', 'hullsform', 'crewform', 'shipwrightform'); Swap(crew0z,'crew0i'); Swap(crew1z,'crew1i'); Swap(crew2z,'crew2i'); Swap(crew3z,'crew3i'); Swap(crew4z,'crew4i'); Swap(crew5z,'crew5i'); Swap(crew6z,'crew6i'); Swap(crew7z,'crew7i'); Swap(crew8z,'crew8i'); Swap(crew9z,'crew9i');" onunload="cookieForms('save', 'ramsform', 'decksform', 'hullsform', 'crewform', 'shipwrightform');"> 
```

（请忽略 swap()，因为它们无关）

可以找到我正在处理的页面：[http ://webhostlet.com/POP.htm](http://webhostlet.com/POP.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:50:48.233

在`open`和`save`代码中，更改：

```
document[formName].elements[i].options.selectedIndex 
```

到：

```
document[formName].elements[i].selectedIndex 
```

`options`是所有选项的数组，该`selectedIndex`属性属于`select`包含它们的元素。

改变：

```
cookieArray[i].substring(7, cookieArray[i].length-1) 
```

到：

```
cookieArray[i].substring(6) 
```

你偏离了 1，因为你忘记了它是基于 0 的计数。第二个参数不需要，它默认为字符串的其余部分。

它对前 10 个菜单项起作用的原因是子字符串的一个怪癖：如果第二个参数低于第一个参数，它会交换它们！所以`"select5".substring(7, 6)`被视为`"select5".substring(6, 7)`，它获取字符串的最后一个字符。但是对于较长的字符串，它是``"select35".substring(7, 7)`，它是一个空字符串。

# javascript - Javascript随机填充底部

> ID：14027892
> 
> 赞同：3
> 
> 时间：2012-12-25T05:13:35.107
> 
> 标签：javascript, jquery, css, random

这里是javascript的新手。我尝试点击此处的链接： [如何在悬停效果上随机分配颜色](https://stackoverflow.com/questions/9606148/how-to-randomly-assign-a-color-on-hover-effect)

但我未能在我的#menu_4645908 导航链接上复制相同的效果......

我使用 #menu_4645908.red:hover 但没有效果。

注意：我确实将类的变量从颜色更改为填充，我只是在工作时使用了相同的类名，当它工作时会改变..

知道我哪里出错了吗？

**[更新]**

这是我使用的css，从线程中复制的，

```
#menu_4645908.green:hover { color: #1ace84; }
#menu_4645908.purple:hover { color: #a262c0; }
#menu_4645908.teal:hover { color: #4ac0aa; }
#menu_4645908.violet:hover { color: #8c78ba; }
#menu_4645908.pink:hover { color: #d529cd; } 
```

这是javascript

```
$(document).ready(function() { 
    $("a").hover(function(e) { 
        var randomClass = getRandomClass(); 
        $(e.target).attr("class", randomClass); 
    }); 
}); 

function getRandomClass() { 
   //Store available css classes 
   var classes = new Array("green", "purple", "teal", "violet", "pink"); 

   //Give a random number from 0 to 5 
   var randomNumber = Math.floor(Math.random()*6); 

   return classes[randomNumber]; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T23:39:45.880

您的代码中似乎有两个问题：

1.  jQuery 有一个`addClass()`功能可以完全满足您的需求
2.  该类不应在悬停时分配，而应在页面加载时分配

所以试试这个：（[JsFiddle](http://jsfiddle.net/)）

```
$(document).ready(function() {
  $.each($("a"), function(index, element){
    $(this).addClass(getRandomClass());
  });
});

function getRandomClass() { 
 //Store available css classes 
 var classes = new Array("green", "purple", "teal", "violet", "pink");
 //Give a random number from 0 to 5
 var randomNumber = Math.floor(Math.random()*6); 
 return classes[randomNumber]; 
} 
```

**编辑：正如用户分号在评论中所说，这仅在您只想在页面加载时分配随机类时才有效。**

在这种情况下，您可以每次只分配一个特定的颜色：

```
$(document).ready(function() {
  ("a").hover(function(){
    $(this).css('color', getRandomColor());
  }, function(){
    $(this).css('color', ''); // Reverts to default color
  });
}); 

function getRandomColor() {
 var colors = new Array("#1ace84", "#a262c0", "#4ac0aa", "#8c78ba", "#d529cd");
 var randomNumber = Math.floor(Math.random()*colors.length); 
 return colors[randomNumber];
} ​ 
```

# delphi - 在 Delphi 6 应用程序中运行时在两个版本的基于 ActiveX IDispatch 的相同界面之间切换？

> ID：14027895
> 
> 赞同：1
> 
> 时间：2012-12-25T05:14:22.887
> 
> 标签：delphi, dll, activex, typelib

我有一个 Delphi 6 应用程序，它使用 ActiveX DLL 连接到另一个流行的应用程序（又名“主机”应用程序，因为没有更好的词）。主机应用程序提供集成 DLL。我没有它的源代码或对其进行任何控制。为了使用 DLL，我使用 IDE **Import ActiveX Control**工具创建了一个 TypeLib。

当宿主应用程序供应商创建新版本的 ActiveX DLL 时，就会出现问题。当我的用户升级到主机应用程序供应商的最新或 beta 版本时，我必须争先恐后地为他们提供我的程序的新版本。否则，由于旧 TypeLib 和新 DLL 之间的差异，当对集成 DLL 进行某些调用时，我的应用程序当然会崩溃。这也导致了维护我的应用程序的多个代码库以维护对仍然使用旧版本主机应用程序的用户的支持的负担。我试图避免大混乱的代码大修，我将集成 DLL 暴露的所有内容都包装起来，以便创建一个可以在运行时适应当前 DLL 版本的代码版本。

这就引出了我的问题。Delphi 生成的 TypeLib(s) 是一大堆 IDispatch 方法和属性。显然，Delphi 编译器在后台将这些转换为 IDispatch.Invoke() 调用。现在我*可以*在调用 CoCreate() 来创建 ActiveX 对象*之前*检测主机应用程序的当前版本。那么，有什么方法可以在运行时在两个 DLL TypeLib 定义之间切换？现在我通过编译时条件来完成它，其中包括基于我正在构建的主机应用程序版本的正确 TypeLib。我可以这样做是因为我保留了 TypeLib 的每个版本，并在供应商更新 DLL 时给它一个唯一的名称。但这并不能帮助我在运行时做到这一点。

我无法理解如何做到这一点，因为从定义的变量到方法调用的所有内容都基于编译时的 TypeLib。但是我想知道在 IDispatch 级别是否可以做一些聪明的事情来实现这一点？否则，我将坚持为每个公开的对象创建包装器，这些对象根据主机应用程序的当前版本调用正确的 TypeLib 方法/属性定义。这是一项艰巨的工作，也会导致一些非常复杂的代码。

面对同样的困境，你们是如何解决或应对的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:46:11.890

实际的解决方案是使用后期绑定（使用获取引用`CreateOleObject`并在运行时解析引用）而不是通过类型库使用早期绑定。这意味着只要供应商不删除功能，您的代码将继续工作，无论安装了哪个版本的控件。

[有关使用 MS Office 应用程序执行此操作的示例，您可以在Deborah Pate 的网站](http://www.djpate.freeserve.co.uk/AutoOffc.htm)上看到一些旧的（但仍然准确且可用）的帖子（请参阅下面的注释）。例如，[这个](http://www.djpate.freeserve.co.uk/AutoWord.htm#HowDoI)Word 使用后期绑定来检索当前正在运行的 Word 实例或创建一个新实例：

```
var 
  Word: Variant; 
  Filename: OleVariant;
begin 
  try 
    Word := GetActiveOleObject('Word.Application');    
  except 
    Word := CreateOleObject('Word.Application');    
  end; 

  FileName := 'C:\WordDocs\MyFile.doc';
  Word.Documents.Open(FileName, EmptyParam, EmptyParam, EmptyParam,
                      EmptyParam, EmptyParam, EmptyParam, EmptyParam,
                      EmptyParam, EmptyParam);  
  Word.Visible := True; 
```

请注意，这里没有包含类型库，也没有事先声明`Word.Documents`or`Documents.Open`方法。这些都在运行时为您解决，如果未实施，将引发异常。

# fonts - 字体易手 - 我有旧许可证 - 我还能使用这种字体吗？

> ID：14027897
> 
> 赞同：5
> 
> 时间：2012-12-25T05:15:23.020
> 
> 标签：fonts, licensing, commercial-application

我想在我的网站上使用 MUSEO Slab 字体。过去，谷歌网络字体提供了一种权重，但现在已经消失了……相反，谷歌提供了一个指向 fonts.com 的链接，现在它是他们网络字体的一部分。但它甚至不再包含在他们免费提供的字体中。

现在我的问题是：我的硬盘上有这个字体，有 3 种不同的粗细（300,500,700），并且都是常规加斜体，当字体首次发布时（大约 2009 年）从 myfonts.com 合法下载。每个 zip 文件都包含一个许可文本，其中包括其他内容

> “允许的用途：您可以使用许可字体在任何表面上创建图像，例如计算机屏幕、纸张、网页、照片、电影片尾字幕、印刷材料、T 恤和其他图像尺寸固定的表面。您可以使用许可字体来创建 EPS 文件或其他可缩放绘图。您可以将字体中的字符作为图形对象导入绘图程序并修改这些图形对象。”</p>

**因此我的问题是：我仍然可以在为客户创建的设计中使用这种字体吗？**

据我了解，这将是商业用途。尽管就分布而言，字体看起来已经易手（和条件）。在这种情况下，先前授予的许可证是否会过期？

ps：对于我的网站，我不再使用它，因为我无法将它作为免费的网络字体，所以我用 Arvo 替换它（也在相关图形中）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:32:13.690

这不是软件工程问题，而是许可协议的法律解释问题。我不是律师，但我会就你的问题给你我的非专家意见。

您没有包含完整的许可协议。您未包含的协议部分可能会影响您的情况。

*   许可证的任何部分是否涉及是否允许商业用途？
*   许可证的任何部分是否涉及许可证的期限，尤其是许可证是否是永久的？

您说您“在 [您的] 网站上使用 ...字体”。你没有确切地说出你的想法是什么。但是，如果您打算使用 HTML 和 CSS 来调用浏览器以使用该字体格式化您网站的页面，并且如果您打算在您的网站上安装该字体以便将其提供给 Web 客户端，那么在我看来，这就像与您提到的任何“允许用途”不同的用途。我在您显示的文本中没有看到任何内容表明您可以将其提供给网络客户端。

另一个 Stack Overflow 问题，[*如何合法使用网络字体？*](https://stackoverflow.com/questions/1805324/how-to-use-web-fonts-legally), 可能会提供信息。

另请参阅 Adob​​e 关于[*了解 Web 字体许可*](http://blogs.adobe.com/typblography/2010/10/web-font-licensing.html)的博客文章和[Jarel Remick 的 ThemeForest 博客文章*关于 Web 字体许可您需要知道的一切*](http://blog.themeforest.net/general/font-licensing-for-the-web/)[，以及来自“网站字体许可”](https://www.google.ca/search?q=web+site+font+licensing)的其他搜索结果。

# java - 布局的滑入和滑出动画

> ID：14027899
> 
> 赞同：6
> 
> 时间：2012-12-25T05:15:41.393
> 
> 标签：java, android, slide

我有一个`LinearLayout, I am dynamically adding TextView, ImageView to that LinearLayout`，现在我已将 OnClickListener 添加到这些 TextViews 和 ImageViews。

我有一个数组列表，其中有 10 个项目，使用 for 循环我获取每个值并显示，因为它是测验应用程序，我有下一个和上一个按钮，当我单击它时，我正在从数组列表中一个一个地显示项目。`Now I need slide In and slide Out animation to apply to this Linear Layout.`

我见过这个：

[链接 1](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)

[链接 2](https://stackoverflow.com/questions/11377472/slide-out-menu-like-android-google-and-youtube-style-slide-menu-not-like-faceb)

我也试过这个

```
slideIn = new TranslateAnimation(
    TranslateAnimation.RELATIVE_TO_PARENT, 1.0f,
    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f,
    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f,
    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f);

slideIn.setDuration(500);
slideOut = new TranslateAnimation(
    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f,
    TranslateAnimation.RELATIVE_TO_PARENT, -1.0f,
    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f,
    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f);

slideOut.setDuration(500); 
```

但不工作请帮助解决这个问题。

**编辑：**

问题：我已将此应用于线性布局，但发生的情况是，当我单击下一个按钮时，当前问题将向左滑动并出现一个空白屏幕，然后它将滑入并显示下一个问题，但我希望在当前问题滑动时立即出来后应该是下一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T05:24:18.037

在 res/anim/ 中使用这个 xml

leftright.xml
这是从左到右的动画：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="false">
    <translate android:fromXDelta="-100%" android:toXDelta="0%"
      android:fromYDelta="0%" android:toYDelta="0%"
     android:duration="700"/>
   </set> 
```

在你的java代码中使用它

```
Handler handler = new Handler();
Runnable runnable = new Runnable(){
{
   public void run()
 {
   item[i].setInAnimation(AnimationUtils.loadAnimation(this,R.anim.leftright.xml));
   i=i+1;
   handler.postDelayed(this,5000);
 }
};handler.postDelayed(runnable,5000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T05:53:35.910

如果您的布局具有相同的内容，请在视图翻转器内创建两个布局。用数据加载第一个视图并显示它。当用户单击下一个或上一个时，使用数据加载下一个视图并保留一个标志以显示第二个视图现在可见并用动画显示它。

现在开始根据标志值加载适当的视图和数据并调用showext()。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mainFlipper = (ViewFlipper) findViewById(R.id.flipper);
    firstLayout = (LinearLayout) findViewById(R.id.layout1);
    secondLayout = (LinearLayout) findViewById(R.id.layout2);

    findViewById(R.id.btnPrevious).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            showPrevious();
        }
    });

    findViewById(R.id.btnNext).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            showNext();
        }
    });

}

private void showNext() {
    mainFlipper.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_in_left));
    mainFlipper.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_out_right));
    flip();
}

private void showPrevious() {
    mainFlipper.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_in_right));
    mainFlipper.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_out_left));
    flip();
}

private void flip() {
    if(isFirstVisible) {
        isFirstVisible = false;
        secondLayout.removeAllViews();
        secondLayout.addView(getTextView("Second"));
    } else {
        isFirstVisible = true;
        firstLayout.removeAllViews();
        firstLayout.addView(getTextView("First"));
    }
    mainFlipper.showNext();
}

private TextView getTextView(String txt) {
    TextView txtView = new TextView(this);
    txtView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    txtView.setText(txt);
    return txtView;
} 
```

# asp.net - 嗨，我想将 HTML 中的文本复制到 vb.net 中的文本框

> ID：14027905
> 
> 赞同：-4
> 
> 时间：2012-12-25T05:16:56.153
> 
> 标签：asp.net, vb.net

从 HTML 中获取文本并放入 VB.net 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:18:22.890

通过为其分配 id 并设置属性 runat="server" 使您的跨度服务器可访问。这篇**[文章](http://msdn.microsoft.com/en-us/library/7512d0d0%28v=vs.71%29.aspx)**很好地描述了如何做到这一点。

*html*

```
<span id="MySpan" runat="server" /> 
```

*背后的代码*

```
textbox1.Text = MySpan.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:34:48.753

**使用 jQuery：**

```
$(function(){
  $("#<%=textboxID.ClientID%>").val($("#SpanID").text());
}); 
```

# php - 登录后使链接对管理员完全不可见

> ID：14027908
> 
> 赞同：0
> 
> 时间：2012-12-25T05:17:14.323
> 
> 标签：php, yii

您好，我使用的是 yii 框架，我在 Layout/main.php 中编写了如下代码

```
 array('label'=>'Dashboard', 'url'=>array('/site/todays_task'),'visible'=>$user-checkAccess('Team Leader,employee')), 
```

在我的 Protected/component/WebUser.php 代码如下

```
public function checkAccess($operation, $params=array())
{
    if (empty($this->id)) 
    {
         // Not identified => no rights
         return false;
    }
    $role = $this->getState("Role");
    if ($role === 'admin') {
         return true; // admin role has access to everything
    }
    if (strstr($operation,$role) !== false) { // Check if multiple roles are available
         return true;
    }
         // allow access if the operation request is the current user's role
         return ($operation === $role);
    }
} 
```

所以仪表板链接对管理员可见，也因为管理员可以访问 webuser checkaccess 方法中的所有内容，我希望不可见仪表板链接到管理员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:34:03.950

为此编写第二个函数，为管理部分返回 false；

```
public function checkAccessNoAdmin($operation, $params=array())
{
    if (empty($this->id)) 
    {
         // Not identified => no rights
         return false;
    }
    $role = $this->getState("Role");
    if ($role === 'admin') {
         return false; // admin role has no access here
    }
    if (strstr($operation,$role) !== false) { // Check if multiple roles are available
         return true;
    }
         // allow access if the operation request is the current user's role
         return ($operation === $role);
    }
} 
```

然后改为：

```
array('label'=>'Dashboard', 'url'=>array('/site/todays_task'),'visible'=>$user-checkAccessNoAmdin('Team Leader,employee')) 
```

# nginx - “Logging POST data from $request_body”的代码问题

> ID：14027911
> 
> 赞同：4
> 
> 时间：2012-12-25T05:18:03.840
> 
> 标签：nginx

我想做与[从 $request_body 记录 POST 数据](https://stackoverflow.com/questions/4939382/logging-post-data-from-request-body)相同的事情，并且由于这个问题，我可以成功记录帖子数据。但是我从$request_body得到的数据是encode的，比如"会编码成\x22。如何从$request_body得到原始数据？

# php - 如何从控制器中的模型调用方法

> ID：14027914
> 
> 赞同：-2
> 
> 时间：2012-12-25T05:18:23.250
> 
> 标签：php, codeigniter

我知道如何从控制器调用模型中的方法，但我想知道如何从模型调用控制器中的方法。

```
$this->load->model('dataOperateModel');
$this->dataOperateModel->saveData($formtype); 
```

这会在模型中加载一个方法。但是我还没有看到有人为控制器做模型。有什么简单的方法来处理这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:24:28.470

您不应该从模型中调用控制器动作。这违背了数据分离的观点。我建议将您的问题更改为更具体地针对调用该操作将解决的问题。

回答问题。假设控制器称为 Posts。

```
//Import controller
App::import('Controller', 'Posts');
//Instantiation
$Posts = new PostsController;
//Load model, components...
$Posts->constructClasses();
//Call a method on the controller.
$Posts->index(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:25:08.770

请改变这个：

```
$this->load->model('dataOperateModel','dataOperate');
$this->dataOperate->saveData($formtype); 
```

# ckeditor - 错误：访问属性“CKEDITOR”的权限被拒绝

> ID：14027915
> 
> 赞同：0
> 
> 时间：2012-12-25T05:18:45.713
> 
> 标签：ckeditor

我在 ckeditor 中集成了浏览按钮。该文件正在上传，但它给出“图像源 URL 丢失”并且不显示图像。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:25:35.427

关于您的问题，很可能您正在执行[跨域请求](http://en.wikipedia.org/wiki/Cross-site_scripting)，由于一些安全问题，常规浏览器配置不允许这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:50:36.410

我通过将 CKEditor 文件夹从 webroot 中的 js 文件夹移动到 cakephp 的 webroot 并在视图文件的 CKEditor.replace 函数中提供完整 URL 来解决了这个问题。

# python - 如何将默认参数值作为累加器处理？

> ID：14027916
> 
> 赞同：-5
> 
> 时间：2012-12-25T05:19:22.927
> 
> 标签：python, python-3.x

在 python 中，我们可以在定义函数时设置默认参数值。但是默认参数值只计算一次。因此，如果我们在函数中更改此类参数的值，则更改将在以后的调用中累积。

这意味着一个函数将保持状态。它不符合面向对象的思想，会带来很多混乱。

我认为这是一个糟糕的设计。你认为是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:22:24.587

不——这只是意味着你应该了解你的工具。您的方式需要在`def`时间存储一个隐藏过程，并在每次调用函数时进行评估；在 Python 中，“显式优于隐式”是（据称）选择的设计原则。

由于这不是一个讨论的网站，而是一个用于编程问答的网站，所以这里是如何正确地做到这一点：

代替

```
def funct(array = []): 
```

写

```
def funct(array = None):
    if array is None:
        array = [] 
```

同样的“抱怨”适用于 Ruby、BTW（以及可能具有默认参数值的其他语言），并且不仅限于 Python。

# objective-c - 将 PageController 与 NavigationController 一起使用

> ID：14027918
> 
> 赞同：0
> 
> 时间：2012-12-25T05:20:00.543
> 
> 标签：objective-c, ios5, uinavigationcontroller, uipagecontrol

我正在尝试在导航控制器中实现 pageController。例如

ViewController A -> ViewController b -> ViewController c（这个 ViewController，“c”包含一个 PageController，其中包含教程文本以及图像和音频）。因此，我希望使用页面控制器并能够在包含文本、图像和音频的页面之间进行切换，但是它不会推送到 NavController 堆栈上。在页面控制器中的任何页面，用户都可以从“c”返回到“b”。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:03:43.187

`UIPageControl`在视图中使用而不是在`UINavigationController`堆栈上。如果您愿意，请对其进行自定义。或者简单地将 'b','c' 添加为 'a'`ViewController`中的子视图`ViewController`。

谢谢。

# lightbox - 使用 onClick 事件调用 Lightbox

> ID：14027920
> 
> 赞同：0
> 
> 时间：2012-12-25T05:20:07.573
> 
> 标签：lightbox, lightbox2

我有一个使用无序列表的画廊，如下所示：

```
<ul>
    <li style="background: center no-repeat #bc874c url(images/image-01.jpg)"></li>
    <li style="background: center no-repeat #bc874c url(images/image-02.jpg)"></li>
    <li style="background: center no-repeat #bc874c url(images/image-03.jpg)"></li>
    <li style="background: center no-repeat #bc874c url(images/image-04.jpg)"></li>
</ul> 
```

如您所见，我正在使用元素的背景来显示图像，所以，我想当用户单击`li`元素时，会打开一个灯箱，这可能吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:27:35.823

您可以在每个 LI 中放置一个 onclick 事件，但将 href 链接放在每个 li 中会更容易。

```
<ul>
   <li onclick="alert('here');" style="background: center no-repeat #bc874c url(images/image-01.jpg)"></li>
   <li style="background: center no-repeat #bc874c url(images/image-02.jpg)"></li>
   <li style="background: center no-repeat #bc874c url(images/image-03.jpg)"></li>
   <li style="background: center no-repeat #bc874c url(images/image-04.jpg)"></li>
</ul> 
```

也许创建一个 jquery 函数并将图像 url 作为变量传递..让我知道，我也许可以为你写一些东西

# .htaccess - 如何使用 .htaccess 仅对站点的一个部分禁用 mod_security？

> ID：14027928
> 
> 赞同：1
> 
> 时间：2012-12-25T05:22:50.303
> 
> 标签：.htaccess

我已经研究过并且很确定我需要禁用 mod_security 以允许我的 jquery 使用 php 加载图像。我的工作是坐在一个 joomla 站点旁边，joomla 位于根目录中，而我的位于 www.example.com/mysite/... 我是否能够使用 .htaccess 仅对我的子目录禁用 mod_security 并离开 joomla部分未触及？

# wpf - 如何在 WPF 应用程序中从 System.IO.Stream 播放 MP4 视频？

> ID：14027933
> 
> 赞同：2
> 
> 时间：2012-12-25T05:23:49.097
> 
> 标签：wpf, video

我正在用 C# 开发一个基于 WPF 的应用程序，我想从派生自 System.IO.Stream 的流源播放 h.264/aac 编码的 mp4 文件。

我可以直接从本地文件和 URL 源播放视频，但我还需要从派生自 System.IO.Stream 的数据源播放视频。具体来说，我正在使用 Eldos 的一款名为 Solid File System (http://eldos.com/solfs/) 的产品，它允许您在单个文件中创建虚拟文件系统。为了访问存储在 SolidFS 文件中的数据，他们提供了从 System.IO.Stream 派生的 SolFSStream。

有谁知道 .Net Framework API 或第三方 API 可以让我通过传入流引用来播放视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:59:50.407

DirectX 有一些播放自定义流的方法，但我不知道细节。此外，我们为像您这样的使用场景提供 OS 版本的 SolFS - 您可以拥有一个带有 OS 版本的虚拟磁盘并从那里播放（并且为了安全起见，磁盘访问可以仅限于您的应用程序和播放器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T06:03:00.760

我的偏好是将文件复制到应用程序可以访问的临时目录，然后使用简单易用且功能强大的库来播放文件，例如[http://msdn.microsoft.com/en-us/library/system。 windows.media.mediaplayer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.aspx)

我的理由是支持流可能不是选择第三方库播放 mp4 文件的最佳标准。您需要确保该库是健壮的并且易于与您现有的应用程序集成。

请注意，通过引用 MediaPlayer 类，我并不是说这是最强大的库，但它已经满足了我过去的用例并且很容易与应用程序集成。

# git - Git 网站部署 - 两种方法

> ID：14027937
> 
> 赞同：1
> 
> 时间：2012-12-25T05:24:31.377
> 
> 标签：git, git-post-receive

我一直在研究 git 网站部署，我遇到了 2 种不同的方法。它们似乎都有效，但我想知道我缺少什么优点/缺点。您使用这两种方法中的哪一种，为什么？

1.  在公共 www 目录中具有分离的工作树的回购。您推送到 repo 并且 post-update 挂钩执行 checkout -f （类似于[this](http://danielmiessler.com/study/git/#website)）
2.  公共 www 目录中的裸回购和非裸回购。更新后挂钩执行 git reset 和 git pull。（类似于[这个](http://joemaller.com/990/a-web-focused-git-workflow/)）

方法 1 似乎更简单，因为您只需要担心 1 个存储库，但我想知道是否有我遗漏的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:57:14.307

好吧，在大多数情况下，如果您一个人工作，那没有什么区别。如果您与团队合作，可能会发生以下情况：

1.  有人可能会对生产服务器的 www 目录进行更改，然后您提交并推送。更新后挂钩将重置公共 www 目录并删除他/她的所有工作。
2.  他/她在生产服务器上进行更改并提交。当您进行提交和推送时，他/她的工作将在存储库分支中，然后他/她可以进行合并，所有工作都在那里。

1 方法一开始很容易，但您可能会丢失一些工作。希望对您有所帮助，如果我误解了您的意思，请随时纠正。

# class - Lazarus：我如何找到对象的详细文档（类信息）？

> ID：14027938
> 
> 赞同：0
> 
> 时间：2012-12-25T05:24:35.807
> 
> 标签：class, object, properties, lazarus

有没有办法在 Lazarus 中找到对象的完整类信息。F1 不工作。

例如，我想知道**TSQLQuery**的方法、事件和属性。更具体地说，我试图找到可以与**state**属性一起使用的常量。

到目前为止，我发现的文档在这种情况下并没有太大帮助。

我也尝试过显示“对象浏览器”的菜单，但它只是指向属性窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T00:59:27.420

TSQLQuery 及其单元 sqldb 没有记录。

然而，state 属性来自 sqlquery 的基本 tdataset 祖先，并且已记录在案。

尝试输入 TDatasetstate 或 tdataset 并按 F1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T23:55:27.110

最好的文档是源代码。在表单上放置一个 TSQLQuery 后，按住 CTRL 键单击源编辑器中的标识符“TSQLQuery”。Lazarus 会在声明 TSQLQuery 的位置打开对应的源文件。向下滚动到公共方法或发布的属性以查看您需要的一切。标识符通常是不言自明的——chm 文件通常不包含更多信息。并且源始终是最新的。

您可以对任何标识符执行相同的操作。根据 Lazarus 版本，您可能会进入该单元的实施部分。在这种情况下，只需按 SHIFT-CTRL Up/Down 即可进入该界面。

# java - Java：repaint() 没有在 for 循环中调用 paintComponent()

> ID：14027945
> 
> 赞同：2
> 
> 时间：2012-12-25T05:26:00.077
> 
> 标签：java, swing, for-loop, repaint, paintcomponent

这是我在stackoverflow上的第一篇文章，我希望有人可以帮助我解决我在这里遇到的问题。

我正在处理的问题是一个`repaint()`问题，有些人会认为我在这些论坛上搜索的内容不够多，无法解决我的问题，但我进行了广泛的研究，但没有任何效果。在下面的代码中，我尝试在 for 循环中调用 drawB 来处理数组的大小，该代码可以正常运行。for 循环调用 drawB 20 次左右。在drawB中我希望设置一个图像（它会根据数组中的数字而有所不同）然后调用`repaint()`它，然后调用`paintComponent()`子类GameCanvas。

问题是paintComponant 根本没有在这个初始化中运行。但是`repaint()`DOES 在我制作的循环中运行`gameLoop()`，但我需要在`gameLoop()`.

任何人都知道发生了什么，或者如何解决它？

```
package engine;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class GameMain extends JFrame // main class for the game as a Swing application
{     

    // Define constants for the game
    static final int CANVAS_WIDTH = 800;    // width and height of the game screen
    static final int CANVAS_HEIGHT = 600;
    static final int UPDATE_RATE = 4;    // number of game update per second
    static final long UPDATE_PERIOD = 1000000000L / UPDATE_RATE;  // nanoseconds

    String path;
    BufferedImage image;

    private GameCanvas canvas;

    // Constructor to initialize the UI components and game objects
    public GameMain() 
    {
        gameInit();

        image = null;
        canvas = new GameCanvas();
        canvas.setPreferredSize(new Dimension(CANVAS_WIDTH, CANVAS_HEIGHT));
        this.setContentPane(canvas);

        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.pack();
        this.setTitle("Blockcraft!");
        this.setVisible(true);
    }

    public void gameInit() 
    {
        dispArray();
        gameStart();
    }

    public void dispArray() 
    {
        int tempLevel[][] = new int[][] {{1,1,1,1},{6,2,2,2},{3,3,3,3},{4,4,4,4},{4,4,4,4},{4,4,4,4},{4,4,4,4},{4,4,4,4},{4,4,4,4}};
        int widthTemp = tempLevel[0].length;
        int heightTemp = tempLevel.length;

        for(int i = 0; i < heightTemp; i++)
        {
            for(int j = 0; j < widthTemp; j++)
            {
                try
                {
                    image = ImageIO.read(getFile());
                }
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
                drawB(image);
            }
        }
    }

    public File getFile() 
    {
        path = "images//1.jpg";
        File file = new File(path);
        return file;
    }

    public void drawB(BufferedImage imgTemp) 
    {
        image = imgTemp;
        repaint();
    }

    private void gameLoop() 
    {
        long beginTime, timeTaken, timeLeft;
        while (true) 
        {
            repaint();

            beginTime = System.nanoTime();

            timeTaken = System.nanoTime() - beginTime;
            timeLeft = (UPDATE_PERIOD - timeTaken) / 1000000L;  // in milliseconds
            if (timeLeft < 10) timeLeft = 10;   // set a minimum
            try 
            {
                Thread.sleep(timeLeft);
            }    
            catch (InterruptedException ex)
            { 
                //
            }
        }
    }

    // Refresh the display. Called back via repaint(), which invoke the paintComponent().
    private void gameDraw(Graphics2D g2d) 
    {
        g2d.drawImage(image, 0, 0, 15, 15, this);
    }

    public void gameKeyPressed(int keyCode)
    {
        //
    }

    public void gameKeyReleased(int keyCode) 
    {
       //
    }

    public void gameKeyTyped(char keyChar) 
    {
       //
    }

    class GameCanvas extends JPanel implements KeyListener
    {
        boolean paintAll;
        int xPos, yPos;
        Image img;

        public GameCanvas() 
        {
            setFocusable(true);  
            requestFocus();
            addKeyListener(this);
        }

        // Override paintComponent to do custom drawing.
        // Called back by repaint()... sometimes?
        @Override
        public void paintComponent(Graphics g) 
        {
            System.out.println("repainting");
            Graphics2D g2d = (Graphics2D)g;

            // Draw the game objects
            gameDraw(g2d);
        }

        // KeyEvent handlers
        @Override
        public void keyPressed(KeyEvent e) 
        {
            gameKeyPressed(e.getKeyCode());
        }

        @Override
        public void keyReleased(KeyEvent e) 
        {
            gameKeyReleased(e.getKeyCode());
        }

        @Override
        public void keyTyped(KeyEvent e) 
        {
            gameKeyTyped(e.getKeyChar());
        }
    }

    // To start and re-start the game.
    public void gameStart() 
    { 
        // Create a new thread
        Thread gameThread =  new Thread() 
        {
            // Override run() to provide the running behavior of this thread.
            @Override
            public void run() 
            {
                gameLoop();
            }
        };
        // Start the thread. start() calls run(), which in turn calls gameLoop().
        gameThread.start();
    }

    // main
    public static void main(String[] args) 
    {
        // Use the event dispatch thread to build the UI for thread-safety.
        SwingUtilities.invokeLater(new Runnable() 
        {
            @Override
            public void run() 
            {
                new GameMain();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:57:57.927

自初始化代码以来，在初始化期间没有响应是有道理的：

```
public void dispArray() {
  int tempLevel[][] = new int[][] { { 1, 1, 1, 1 }, { 6, 2, 2, 2 },
        { 3, 3, 3, 3 }, { 4, 4, 4, 4 }, { 4, 4, 4, 4 }, { 4, 4, 4, 4 },
        { 4, 4, 4, 4 }, { 4, 4, 4, 4 }, { 4, 4, 4, 4 } };
  int widthTemp = tempLevel[0].length;
  int heightTemp = tempLevel.length;
  for (int i = 0; i < heightTemp; i++) {
     for (int j = 0; j < widthTemp; j++) {
           try {
              image = ImageIO.read(getFile());
           } catch (Exception e) {
              e.printStackTrace();
           }
        drawB(image);
     }
  }
}

public File getFile() {
  path = "images//1.jpg";
  File file = new File(path);
  return file;
}

public void drawB(BufferedImage imgTemp) {
  image = imgTemp;
  repaint();
} 
```

包括读入图像文件，都是在 Swing 事件线程上完成的，这是你不应该做的事情。

解决方案：不要那样做。而是为此使用后台线程，例如 SwingWorker 提供的。有关这方面的更多信息，请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

# cucumber - 在黄瓜中使用相同的浏览器窗口

> ID：14027948
> 
> 赞同：2
> 
> 时间：2012-12-25T05:26:13.687
> 
> 标签：cucumber, capybara, capybara-webkit

在我的功能文件中，我有这样的东西：

```
Background:
 Given I am on login screen
 Then I log in

Scenario:
 Given I am on a random account summary
 when I try feature-1
 Then I see some output-1

Scenario:
 Given I am on account summary
 When I try feature-2
 Then I see some message 
```

当黄瓜执行第二个场景时，它会重新执行后台。

我的问题是 - 是否可以告诉 Cucumber 使用与先前场景相同的浏览器会话/状态？这将帮助我的测试节省一些执行时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:53:55.193

Capybara 在每个场景之前重置会话，因此您应该在每个场景之前显式登录。但是由于您不会在每种情况下都测试登录，因此我建议您自动执行此过程。

首先，您可以使您的背景更具说明性：

```
Background:
 Given I'm logged in 
```

看看[这篇文章](http://benmabey.com/2008/05/19/imperative-vs-declarative-scenarios-in-user-stories.html)，它说明了为什么这样做更好。

那么你也能：

1.  在后端生成新会话
2.  将会话 cookie 从后端发送到您的测试
3.  将 cookie 设置为 Capybara。Capybara 没有针对它的跨驱动 API，因此您可以使用：

[网络驱动程序](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Options.html#add_cookie-instance_method)：

```
page.driver.browser.manage.add_cookie(name: 'name', value: 'value') 
```

[水豚网络套件](https://github.com/thoughtbot/capybara-webkit/pull/169#issuecomment-3544126)：

```
page.driver.browser.set_cookie('c_user=asdasdasd; domain=.domain.com') 
```

[闹鬼](https://github.com/jonleighton/poltergeist#manipulating-cookies)：

```
page.driver.set_cookie('name', 'value') 
```

[RackTest](http://dobbse.net/thinair/2011/12/capybara-racktest-rspec-cookies-2of2.html)似乎并不完全支持它。作为一种解决方法，您可以执行以下操作：

```
get new_service_request_path, {}, 'HTTP_COOKIE' => 'name=value' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:12:22.070

我认为您有许多使用 Before 和 After 挂钩以及标记的选项。我会从这里开始阅读：[https ://github.com/cucumber/cucumber/wiki/hooks](https://github.com/cucumber/cucumber/wiki/hooks)

像这样的东西：

```
Before do
   AccessRandomAccountPage() #Assumes you're logged in already
end 
```

或者，如果这特定于一组测试，例如您是“AlreadyLoggedIn”测试，您可以使用标记：

```
Before ('@AlreadyLoggedIn') do
   AccessRandomAccountPage()
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T13:28:17.563

在您的功能文件中，您使用了 background:，它在所有场景中都执行，为了避免每次调用（[Background 的详细信息](https://github.com/cucumber/cucumber/wiki/Background)），请将 Background: 更改为 Scenario: 并且告诉 Cucumber 使用相同的就足够了上一个场景中的浏览器会话

```
Scenario:
  Given I am on login screen
  Then I log in

Scenario:
 Given I am on a random account summary
 when I try feature-1
 Then I see some output-1

Scenario:
 Given I am on account summary
 When I try feature-2
 Then I see some message 
```

# java - 如何打印 JComboBox 中的所有项目？

> ID：14027949
> 
> 赞同：6
> 
> 时间：2012-12-25T05:26:37.913
> 
> 标签：java, swing, jcombobox, comboboxmodel

我想知道如何打印出 JComboBox 中的所有项目。我不知道该怎么做。我知道如何打印选择的任何项目。我只需要它在我按下按钮时打印出 JComboBox 中的每个选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-23T20:56:02.543

我知道这是一个老问题，但我发现跳过 ComboBoxModel 更容易。

```
String items = new String[]{"Rock", "Paper", "Scissors"};
JComboBox<String> comboBox = new JComboBox<>(items);

int size = comboBox.getItemCount();
for (int i = 0; i < size; i++) {
  String item = comboBox.getItemAt(i);
  System.out.println("Item at " + i + " = " + item);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-25T05:58:59.983

检查这个

```
public class GUI extends JFrame {

    private JButton submitButton;
    private JComboBox comboBox;

    public GUI() {
        super("List");
    }

    public void createAndShowGUI() {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
        submitButton = new JButton("Ok");
        Object[] valueA  = new Object[] {
            "StackOverflow","StackExcange","SuperUser"
        };
        comboBox = new JComboBox(valueA);

        add(comboBox);
        add(submitButton);
        submitButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                ComboBoxModel model = comboBox.getModel();
                int size = model.getSize();
                for(int i=0;i<size;i++) {
                    Object element = model.getElementAt(i);
                    System.out.println("Element at " + i + " = " + element);
                }
            }
        });
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GUI gui = new GUI();
                gui.createAndShowGUI();
            }
        });
    }
} 
```

# visual-c++ - 使用 MFC 在 WinCE 6.0 设备中检测 USB 设备

> ID：14027953
> 
> 赞同：1
> 
> 时间：2012-12-25T05:27:13.400
> 
> 标签：visual-c++, mfc, windows-ce

谁能帮助我如何检测连接到 WinCE 6.0 设备的 USB 设备并将一些数据发送到相同的设备？

我想要的是，检查是否有任何 USB 设备连接到 WinCE 6.0 设备并将数据发送到同一设备？

提前致谢..！！

# python - 如何/在哪里下载 Pylab for Python 2.7 on Win32？

> ID：14027958
> 
> 赞同：13
> 
> 时间：2012-12-25T05:27:49.363
> 
> 标签：python, python-2.7, matplotlib

我已经用谷歌搜索了所有内容，但看不到在哪里可以获得 pylab。

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-25T05:33:55.933

我相信有两个“版本”的 pylab 浮动/被引用。

第一个是`matplotlib`- 您只需[安装 matplotlib](http://matplotlib.org/users/installing.html)并执行其中一个`import pylab`或`import matplotlib.pyplot as pyplot`. [（有关pylab 与 pyplot](https://stackoverflow.com/q/11469336/646543)的更多信息）。

第二个在[这里](http://www.scipy.org/PyLab)描述，据我所知，还不存在。链接版本只是描述了 pylab 现有版本的假设愿景。不幸的是，当您尝试使用谷歌搜索“pylab”时，这也是第一个结果，我怀疑这是导致您困惑的原因。

来源： http: [//matplotlib.1069221.n5.nabble.com/pylab-td23420.html#a23423](http://matplotlib.1069221.n5.nabble.com/pylab-td23420.html#a23423)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T18:31:11.870

您可以将它作为[环保署 Canopy 分发的](https://www.enthought.com/products/epd/free/)一部分。

# java - Tomcat请求需要半天多，并且仍在工作

> ID：14027964
> 
> 赞同：1
> 
> 时间：2012-12-25T05:29:48.377
> 
> 标签：java, performance, tomcat

我有一个可以工作的 Java servlet，但现在我向它发送了一些请求，但它卡住了 - 正如您在屏幕截图中看到的那样，它工作了超过 48000 秒，超过半天： [https://docs.google。 com/open?id=0B-mMfXyy8lylYWZoN0FJQW5aUE0](https://docs.google.com/open?id=0B-mMfXyy8lylYWZoN0FJQW5aUE0)

这以前没有发生过，当我直接从 Java（没有 Tomcat）运行这个函数时也没有发生。

一种。如何调试它并查看 Tomcat 服务器实际卡在哪里？

湾。有没有办法杀死这些请求？（我尝试重新启动 webapp，但请求继续运行......）

PS我忘了说我在Windows服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T06:46:36.957

**一种。如何调试它并查看 Tomcat 服务器实际卡在哪里？**

1.  检查您的应用程序日志（在 tomcat 上），如果您的应用程序有任何问题，这应该会给您一些线索。

2.  进行线程转储并分析（有分析线程转储的工具）。如果您的应用程序被挂起，这将有很大帮助。

**湾。有没有办法杀死这些请求？（我尝试重新启动 webapp，但请求继续运行......）**

您可以通过在 unix 主机上运行以下命令来列出所有 java 进程

```
ps -ef | grep java 
```

这将列出所有 java 进程及其 PID。您可以使用 kill 命令（kill -9 PID）杀死单个进程。

# objective-c - 将指针传递给 Objective-C 中的方法

> ID：14027967
> 
> 赞同：0
> 
> 时间：2012-12-25T05:30:12.527
> 
> 标签：objective-c, pointers, methods

大家圣诞快乐：）

我有一个指针问题。尽管我熟悉指针概念，但到目前为止，我还没有像这里描述的那样在 Objective-C 中使用指针。

我这样修改它：

```
 int countSInteger = 10;

  [self setHMSValues:countSInteger];

- (void) setHMSValues: (int*) timeCat {
  *timeCat = *timeCat - 1;
} 
```

但现在我收到了 EXC_BAD_ACCESS： ![在此处输入图像描述](../Images/963f5e379edfea93082749c8dae908e0.png)

有圣诞老人的暗示吗？

## 来自瑞士的问候，罗纳德霍夫曼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:34:08.443

尝试：

```
- (void) setHMSValues: (int*) timeCat {
*timeCat = *timeCat - 1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T06:00:06.753

看起来您想要`setHMSValues:`计算并返回整数参数的值。但是，该参数是一个指向 int ( `int *`) 的指针，而您传递的是一个`int`值为`10`. 因为指针本身只是整数值（整数值表示内存地址），所以代码试图在内存位置设置值`10`；因此，您会收到“错误访问”错误，因为您的程序无法访问或更改内存位置 10 的值。

你应该做的是将*地址*传递`countSInteger`给方法：

```
[self setHMSValues:&countSInteger]; 
```

但是，有一个更好的方法可以做到这一点。由于您只从该方法返回一个值，因此不需要 out 参数。您可以将方法更改为：

```
- (int) setHMSValues: (int) timeCat {
  return timeCat - 1;
} 
```

并这样称呼它：

```
int countSInteger = 10;

countSInteger = [self setHMSValues:countSInteger]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T05:33:53.997

“ `countInteger`”被声明为“ `int *`”，而您调用的方法需要一个“ `int`”。

您不认为如果您将“ `countInteger`”声明为普通的“ `int`”，您可能会有更好的运气吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T05:34:56.400

为什么使用 int 指针？只需删除 *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T05:46:26.443

Objective-C 是否支持使用 & 像 C++ 一样通过引用传递？我没有专门检查过 Objective-C，（从来没有需要）但是在 C++ 中，以下内容用于告诉编译器使用 pass-by-reference：

```
void count(int &var); 
```

# java - 正则表达式 - Java 不工作

> ID：14027979
> 
> 赞同：0
> 
> 时间：2012-12-25T05:33:05.563
> 
> 标签：java, regex

我有一行 Java 代码

`System.out.println("...Somtime".matches("^[^a-zA-Z]"));`

返回错误。为什么？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T05:34:36.617

`String#matches`两端匹配，因此您的模式应覆盖完整的字符串。而且你也不需要`(Caret - ^)`在一开始就给那些锚。它是隐含的。

现在，由于您的前三个字符匹配 - `[^a-zA-Z]`，而后面的字符匹配 - `[a-zA-Z]`。

所以，可能你想要： -

```
"...Somtime".matches("[^a-zA-Z]{3}[a-zA-Z]+") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T05:46:59.387

```
String.matches("regex") 
```

此方法会将正则表达式与整个字符串进行匹配。如果字符串匹配正则表达式，它将返回`true`，`false`否则

```
System.out.println("...Somtime".matches("^[^a-zA-Z]{3}[a-zA-Z]+")); 
```

这里是你使用的三个点 {3} 和这个返回`true`

```
System.out.println("Somtime".matches("^[^a-zA-Z]")); 
```

它返回`false`

# javascript - 在堆栈中查找最小值 - 不会打印出任何结果

> ID：14027980
> 
> 赞同：-3
> 
> 时间：2012-12-25T05:33:25.650
> 
> 标签：javascript, minimum, stack

试图找到这个堆栈的最小值；但是，每当我在 JSFiddle 中运行它时，什么都不会打印出来……有人向我解释为什么？这是代码：

```
function min_stack() {
var min = 0; 
this.elements = [];

this.push = function(element) {
    this.elements.push(element);
}

this.pop = function() {
    return this.elements.pop();
}

this.min = function() {
    min = this.elements[0]; 
    if (this.elements.length > 0) {
        for(int i = 0; i < this.elements.length; i++) {
            if (min > this.elements[i]) {
                min = this.elements[i]; 
            }
        }
    }
    return min; 
   } 
```

}

```
var myStack = new min_stack();
myStack.push(5);
myStack.push(4);
myStack.push(3);
print("[" + myStack.elements + "]");
print("min:" + myStack.min());
myStack.pop();
print("[" + myStack.elements + "]");
print("min:" + myStack.min());
myStack.pop();
print("[" + myStack.elements + "]");
print("min:" + myStack.min()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:43:50.663

您的语法错误会`for`立即显示在浏览器控制台中

改变：

```
for(int i = 0; i < this.elements.length; i++) { 
```

到

```
for(var i = 0; i < this.elements.length; i++) { 
```

演示：http: [//jsfiddle.net/y7wET/](http://jsfiddle.net/y7wET/)

也正如评论中指出的那样，我怀疑你想使用`print`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:47:26.507

`int i = 0;`不是有效的 JavaScript。JavaScript 不允许在声明变量时指定变量的类型；相反，使用`var i = 0;`.

此外，因为“window”是全局对象，所以在网页上下文中，print() 等效于[window.print()](https://developer.mozilla.org/en-US/docs/DOM/window.print)，它将页面打印到您的打印机。

For debugging purposes, you can pop up a message box using [window.alert()](https://developer.mozilla.org/en-US/docs/DOM/window.alert); if that is too annoying, you could do something such as adding your output to a textarea element instead.

# iphone - 无法编译 - PJSIP - VOIP 应用程序

> ID：14027983
> 
> 赞同：0
> 
> 时间：2012-12-25T05:33:55.837
> 
> 标签：iphone, ios, ios4, voip, pjsip

我正在尝试使用以下 url 创建一个示例 voip 应用程序。

[http://code.google.com/p/pjsip-iphone-audio-driver/wiki/HowToCompile](http://code.google.com/p/pjsip-iphone-audio-driver/wiki/HowToCompile)

我正在按照上述 URL 中提到的步骤进行操作。当我尝试在终端上执行以下命令时，出现以下错误。

```
pjsip eit$ cd ~/Desktop/pjsip
Rs-Mac-mini-2:pjsip eit$ chmod 755 compile.sh
Rs-Mac-mini-2:pjsip eit$ ./compile.sh
./compile.sh: line 15: autoconf: command not found
/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin ~/Desktop/pjsip
~/Desktop/pjsip
./compile.sh: line 51: make: command not found
./compile.sh: line 52: make: command not found 
```

这里有什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:40:41.343

在此处转到[Apple 的“Xcode”页面](https://developer.apple.com/xcode/)，登录，然后单击“查看下载”链接以获取其他开发人员工具。

您需要安装的是 Xcode 的“命令行工具”。

您还可以通过转到 Xcode 首选项中的“下载”选项卡来安装这些工具，[本常见问题解答中对此](https://developer.apple.com/support/xcode/)进行了详细说明。

一旦你这样做了，你应该能够进行“配置”和“制作”。

# python - Python to json 使用成员名称而不是属性名称放置键

> ID：14027989
> 
> 赞同：3
> 
> 时间：2012-12-25T05:34:42.780
> 
> 标签：python, python-2.7

我想将 Python 对象转换为 JSON，我正在使用成员函数来执行此操作，例如

```
def to_json(self):
    return json.dumps(self.__dict__) 
```

问题是我有成员 _name 和属性名称

```
@property
def name(self):
    return self._name
@name.setter
def name(self, value):
   self._name = some_validation_ove_name(value) 
```

结果 JSON 我得到了带有密钥的数据，`_name`但我想成为`name`. 如果没有手动创建 JSON 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:38:50.177

可能的。当然。什么是最好的方法是更好的问题。在此示例中这应该对您有用，但如果您有其他情况，则可能不是理想的解决方案：

```
def to_json(self):
    return json.dumps({k.strip('_'): v for k, v in self.__dict__.items()}) 
```

**例子**

```
import json

class Foo(object):

    def __init__(self):
        self.foo = "foo"
        self.__bar__ = "__bar__"
        self.baz = "_baz"

    @property
    def name(self):
        return self._name

    @name.setter
    def name(self, value):
        self._name = value

    def to_json(self):
        return json.dumps({k.strip('_'): v for k, v in self.__dict__.items()})

foo = Foo()
foo.name = "name"
print foo.to_json() 
```

**输出**

```
{"baz": "_baz", "foo": "foo", "bar": "__bar__", "name": "name"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:40:57.847

您可以使用您想要的名称创建一个字典并将其编码为 JSON

# java - 如何使用 Java 在 WebDriver 中的隐藏文本框中键入文本

> ID：14027998
> 
> 赞同：1
> 
> 时间：2012-12-25T05:36:21.420
> 
> 标签：java, javascript, input, selenium-webdriver, hidden-field

我正在尝试将密钥发送到输入，但我不知道为什么它会这样警告我：

> org.openqa.selenium.InvalidElementStateException：元素不得隐藏、禁用或只读（警告：服务器未提供任何堆栈跟踪信息）

HTML 页面源代码：

```
<span id="mini-7" class="mini-textbox mini-textbox-empty" style="border-width: 0pt; width: 342px;">
<input class="mini-textbox-input" type="text" autocomplete="off" style="width: 338px;">
<input type="hidden">
</span> 
```

我的代码：

```
driver.findElement(By.cssSelector("#mini-7 > input.mini-textbox-input")).clear();
driver.findElement(By.cssSelector("#mini-7 > input.mini-textbox-input")).sendKeys("yy"); 
```

然后我像这样更改我的代码：

```
JavascriptExecutor jse = (JavascriptExecutor)driver;
((JavascriptExecutor) jse).executeScript("arguments[0].type ='text';",driver.findElement(By.xpath("//span[@id='mini-7']/input[2]"))); 
```

但是这次它抛出了js错误。为什么？

我对第一个输入使用sendkeys，这个输入没有隐藏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:24:34.133

该输入仍可能具有 css 属性`visibility: hidden`或`display: none`. 这就是异常告诉你的。使用浏览器的开发工具检查所有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:21:56.043

首先，它需要将 type 属性的值更改为隐藏的文本。现在，您可以使用 WebDriver 在该文本上键入内容。因此，使用 Java 和 Javascript 使用 WebDriver 键入的整体代码如下：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("document.getElementById('mini-7').setAttribute('type', 'text');");
driver.findElement(By.cssSelector("#mini-7 > input.mini-textbox-input")).clear();
driver.findElement(By.cssSelector("#mini-7 > input.mini-textbox-input")).sendKeys("yy"); 
```

对于未隐藏的第一个输入字段，使用 cssSelector 的绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:21:26.327

在这种情况下，您可以做的是通过修改 css 标签使元素可见

```
visibility: hidden 
```

或者

```
display: none 
```

在向其发送密钥之前使用 javascript。

# ruby-on-rails - 一项 rspec 角色测试失败，但几乎相同的测试成功

> ID：14027999
> 
> 赞同：0
> 
> 时间：2012-12-25T05:36:33.987
> 
> 标签：ruby-on-rails, rspec, rolify

我刚刚添加了[Rolify](https://github.com/EppO/rolify) gem，并且正在运行一些 rspec 测试。

2个测试如下：

```
 describe "roles" do

    before(:each) do
      @user = FactoryGirl.create(:user)
    end

    it "should not approve incorrect roles" do
      @user.add_role :moderator
      @user.has_role? :admin
      should be_false
    end

    it "should approve correct roles" do
      @user.add_role :moderator
      @user.has_role? :moderator
      should be_true
    end

  end 
```

测试结果是：

```
 1) User roles should not approve incorrect roles
     Failure/Error: should be_false
       expected: false value
            got: #<User id: nil, email: "", encrypted_password: "", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, confirmation_token: nil, confirmed_at: nil, confirmation_sent_at: nil, name: nil, position: nil, location: nil, admin: false, archived: false, public_email: false, created_at: nil, updated_at: nil>
     # ./spec/models/user_spec.rb:70:in `block (3 levels) in <top (required)>'

Finished in 1.37 seconds
7 examples, 1 failure

Failed examples:

rspec ./spec/models/user_spec.rb:67 # User roles should not approve incorrect roles

Randomized with seed 13074 
```

工厂.rb

```
FactoryGirl.define do

  factory :user do
    sequence(:name)       {|n| "Example User #{n}"}
    sequence(:email)      {|n| "email#{n}@program.com" }
    position              "Regular"
    location              "Anywhere, USA"
    public_email          false
    password              "foobar"
    password_confirmation "foobar"
    confirmed_at          Time.now
  end
end 
```

第一个测试如何以 nil 对象失败，但第二个测试通过？

**编辑**

进一步检查后，任何测试`should be_true`通过，任何测试`should be_false`失败，无论添加的角色是否与检查的角色匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T06:28:21.173

当您的测试进行时`should be_true`，正在发生的事情是应该调用被委托给主题对象（请参阅[RSpec 文档以获取隐式接收器](https://www.relishapp.com/rspec/rspec-core/v/2-12/docs/subject/implicit-receiver)）。在这种情况下，您的主题对象是尚未保存到数据库的用户实例。如果您的 user_spec.rb 文件以 开头`describe User do`，则 RSpec 会自动提供 User.new 的默认主题（[有关隐式主题，请参阅 RSpec 文档](https://www.relishapp.com/rspec/rspec-core/v/2-12/docs/subject/implicitly-defined-subject)）。

这意味着您的测试本质上是在做`User.new.should be_true`和`User.new.should be_false`. 由于 User 对象总是会评估为 true，因此`should be_true`测试总是会通过（尽管可能不是出于您想要的原因）并且 should be_false 总是会失败。

根据您编写测试的方式，也许您的意思更像这样：

```
describe "roles" do

  before(:each) do
    @user = FactoryGirl.create(:user)
  end

  it "should not approve incorrect roles" do
    @user.add_role :moderator
    @user.has_role?(:admin).should be_false
  end

  it "should approve correct roles" do
    @user.add_role :moderator
    @user.has_role?(:moderator).should be_true
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:28:36.670

我假设示例组实际上嵌套在用 声明的组中`describe User do`，是吗？

问题是每个示例的最后一行读取`should xxx`，但`should`没有接收器，因此 RSpec 为`User`您替换了一个实例。

你想要的是：

```
describe User do
  describe "roles" do
    before(:each) do
      @user = FactoryGirl.create(:user)
    end

    it "should not approve incorrect roles" do
      @user.add_role :moderator
      @user.has_role?(:admin).should be_false
    end

    it "should approve correct roles" do
      @user.add_role :moderator
      @user.has_role?(:moderator).should be_true
    end
  end
end 
```

HTH，大卫